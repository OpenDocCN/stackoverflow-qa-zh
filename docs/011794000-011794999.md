# StackOverflow 问答 11794000-11794999

# asp.net - 是否可以动态呈现 Web 控件？

> ID：11794003
> 
> 赞同：1
> 
> 时间：2012-08-03T10:35:08.660
> 
> 标签：asp.net, dynamic, rendering, web-controls

我们有一个 Web 控件，我们希望将其渲染到已加载页面上的 div 中。这需要在用户单击菜单中的超链接时发生。

Web 控件有一些在 C# 代码中动态添加到其中的 javascript 文件。

我们也没有使用 aspx 文件，而是希望将 web 控件加载到普通的 html 页面上。

请让我知道最好的方法是什么，或者在我努力在网上找到任何有用的东西时将我引导到一篇文章。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:41:38.320

您可以在字符串中动态呈现控件，将字符串发回并将其放置在您的 div 中。使用 ajax 调用后面的代码来呈现控件并返回结果。

```
 // load the control
    var oCConrol = Page.LoadControl("CustomControl.ascx");

    // here you need to run some initialization of your control
    //  because the page_load is not loading now.

    // a string writer to write on it
    using(TextWriter stringWriter = new StringWriter())
    {
      // a html writer
      using(HtmlTextWriter renderOnMe = new HtmlTextWriter(stringWriter))
      {
        // now render the control inside the htm writer
        oCConrol.RenderControl(renderOnMe);

        // here is your control rendered output.
        strBuild = stringWriter.ToString();
      }
    } 
```

或者，您只需制作一个额外的空 aspx 页面，其中仅包含您的控件并使用 Ajax 调用它，即可获得相同的结果。结果将再次成为控制

javascript如何是困难的，不能与控件一起使用。您不能将文本发回然后使其在控件内作为 javascript 运行，这必须分开完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:08:40.190

我通过创建一个单独的、独立的 .aspx 页面和 Jquery ajax 做了类似的事情。使用 Jquery ajax 调用 .aspx 页面并通过 ajax 响应从该页面返回所有呈现的 HTML。

据我所知，没有任何方法可以在 .aspx 页面的上下文之外呈现 Web 控件。

# java - 如何在 Java 枚举中使用 name() 方法

> ID：11794012
> 
> 赞同：4
> 
> 时间：2012-08-03T10:35:47.477
> 
> 标签：java

我正在通过一些代码使用`name`Java Enum 的方法。

任何人都可以向我解释如何以及在哪里使用`name()`Java 中的 Enum 方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T10:51:54.967

鉴于：

```
enum Direction {
  NORTH("north"), SOUTH("south"), EAST("east"), WEST("west");

  private final String printableValue;

  Direction(String printableValue) {
    this.printableValue = printableValue;
  }

  @Override
  public String toString() {
    return printableValue;
  }
} 
```

然后这段代码：

```
Direction travelDirection = Direction.NORTH;
System.out.println("I am going " + travelDirection); 
```

将打印

```
I am going north 
```

但是这段代码：

```
Direction travelDirection = Direction.NORTH;
System.out.println("I am going " + travelDirection.name()); 
```

将打印

```
I am going NORTH 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T10:52:41.347

这个`name()`方法很像`toString()`，只是它被声明为final，所以枚举定义不能改变它。这可能很重要，例如在编写框架来序列化数据时，您必须依赖枚举的名称是唯一标识常量的单个 Java 标识符这一事实。可能还有更多应用程序，但正如[手册](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#name%28%29)所说：

> 大多数程序员应该`toString()`优先使用该方法，因为 toString 方法可能会返回一个对用户更友好的名称。

一般来说，我会说你应该`toString()`在输出用于人类读者时使用，并且`name()`当它针对以某种方式解析的另一个进程时使用。

# c# - 如何在 C# 中将日志写入安全事件日志？

> ID：11794013
> 
> 赞同：1
> 
> 时间：2012-08-03T10:35:47.160
> 
> 标签：c#, security, events, logging, event-log

我想在安全事件日志中写入这些值：

```
Console.WriteLine("Level: {0}", eventInstance.LevelDisplayName);
Console.WriteLine("Date: {0}", eventInstance.TimeCreated);
Console.WriteLine("Forrás: {0}", eventInstance.ProviderName);
Console.WriteLine("Event id: {0}", eventInstance.Id);
Console.WriteLine("Task: {0}", eventInstance.TaskDisplayName);

string sSource;
string sLog;
string sEvent;

sSource = eventInstance.ProviderName;
sLog = "Security";
sEvent = eventInstance.FormatDescription();

if (!EventLog.SourceExists(sSource))
    EventLog.CreateEventSource(sSource, sLog);

EventLog.WriteEntry(sSource, sEvent);
EventLog.WriteEntry(sSource, sEvent,
EventLogEntryType.Warning, eventInstance.Id);

EventLog.WriteEntry(sSource, sEvent);
EventLog.WriteEntry(sSource, sEvent,
EventLogEntryType.Warning, eventInstance.Id); 
```

我有一个例外这一行：

```
if (!EventLog.SourceExists(sSource)) 
```

例外：

> 无法打开源“安全”的日志。您可能没有写入权限。

但是当我将其更改`Security`为另一个时，它可以工作，但只有应用程序事件日志包含这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:47:30.790

读取安全日志需要管理权限，因此`SourceExists`如果不在该上下文下运行，调用将失败。

此外，只有 LSA 可以写入安全日志，它不支持“警告”等类型，仅支持审计事件。

看一眼; [http://msdn.microsoft.com/en-gb/magazine/cc163718.aspx](http://msdn.microsoft.com/en-gb/magazine/cc163718.aspx)

# django - Django 中 2 个不同的管理站点的问题

> ID：11794014
> 
> 赞同：1
> 
> 时间：2012-08-03T10:35:53.370
> 
> 标签：django, django-admin

我想在 Django 项目中有 2 个独立的管理站点。

首先是默认管理员，其次是“coursemanager”我在 AdminSite 的帮助下添加了以下代码

文件路径“cms/courses/admin.py”

```
from courses.models import *
from django.contrib import admin
from django.contrib.admin.sites import AdminSite
from django.contrib.auth.models import User, Group
from django.contrib.auth.admin import UserAdmin, GroupAdmin 

class CourseManager(AdminSite):
    name = 'CourseManager'

course_manager = CourseManager()

class CityAdmin(admin.ModelAdmin):
    list_display = ['__unicode__', 'status',]
    list_filter = ['status',]
    search_fields = ['title',]

 course_manager.register(City, CityAdmin) 
```

“cms/cms/urls.py”

```
from courses.admin import course_manager
urlpatterns = patterns('',    
    url(r'^admin/', include(admin.site.urls)),
    url(r'coursemanager/', include(course_manager.urls)),
) 
```

但是当我添加这个[http://domain.local/coursemanager/](http://domain.local/coursemanager/)和[http://domain.local/admin/](http://domain.local/admin/)两个面板都工作但在[http://domain.local/coursemanger/](http://domain.local/coursemanger/)列表注册城市模块但没有显示添加或更改链接。事件我试图从 url 访问链接但不工作。我正在以超级用户身份检查它，并且我可以访问所有模块。但是当我像下面这样更改代码时

“cms/cms/urls.py”

```
from courses.admin import course_manager
urlpatterns = patterns('',    
    url(r'coursemanager/', include(course_manager.urls)),
    url(r'^admin/', include(admin.site.urls)),
) 
```

然后[http://domain.local/coursemanager/](http://domain.local/coursemanager/)正常工作，[http://domain.local/admin](http://domain.local/admin)面板仅列出所有注册管理员，但不显示添加/更改链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:32:50.597

的`app_name`是`AdminSite()`通过 初始化的`AdminSite.__init__()`。您不能通过提供类级变量来覆盖它，因此您遇到了实例命名空间冲突，然后出现了一些`reverse`故障，[这](https://github.com/django/django/blob/master/django/contrib/admin/sites.py#L354)导致添加/更改链接不显示。尝试

```
class CourseManager(AdminSite):
    '...'

course_manager = CourseManager(name='CourseManager')

# or
course_manager = AdminSite(name='CourseManager') 
```

# javascript - html 多文件选择和队列（添加/删除）

> ID：11794015
> 
> 赞同：1
> 
> 时间：2012-08-03T10:35:56.940
> 
> 标签：javascript, jquery, html, css, flash

我想要做的是能够使用标签上的多个属性选择多个文件，但是当开始上传（POST）时，每个文件都将单独上传+有可能从队列中删除一个文件（这就是使事情发生的原因更难，因为添加文件不是问题，因为我可以轻松创建另一个元素，但删除是不可能的）。

现在出于安全原因，不可能更改 html 中的文件标签！到目前为止，我所做的就是拥有一个文件输入，并且在选择文件时，将在其位置创建一个新元素，因此我给出了队列的幻觉，然后使用jQuery，然后使用jQuery我单独上传每个文件！（不能一次选择多个文件，但一切正常）

我找到了一些 flash 插件，但我不想依赖更多的库，如果它是一个简单的 flash 文件没问题，但大多数插件需要额外的 js 文件等......

我很高兴看到一个跨浏览器的解决方案。我再次知道有一些 Flash 插件可以做到这一点，但我追求一种更清洁、更简单的方法，可能是单个 swf 文件或其他东西....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:38:01.800

我很确定[uploadify](http://www.uploadify.com/)完成了所有这些，并且在一个简单的小swf 中。

# mysql - MySQL 用户主机网络

> ID：11794016
> 
> 赞同：0
> 
> 时间：2012-08-03T10:36:05.087
> 
> 标签：mysql

数据库如何评估 MySQL 用户的主机？我的服务器尝试从其中连接到数据库，`myhostname`但即使我已经在其中设置了该服务器的主机名，它仍然失败，`/etc/hostname`但当我使用 IP 时它确实有效。

用户是这样创建的：

```
GRANT ALL ON db.* TO 'dude'@'myhostname'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:45:08.523

MySQL 错误将告诉您服务器机器*认为*您的用户正在连接的主机名。根据 DNS 设置，这可能是也可能不是您的客户端认为分配给自己的主机名。*从服务器看到*的名称是您需要在`GRANT`语句中设置的名称。

（这是合乎逻辑的。假设我知道服务器授予 Alice 的权限。我有主机 Bob。由于它是*我*的主机，我可以将其名称更改为 Alice。如果只是这样做授予我 Alice 的权限，整个`GRANT`方案将完全不安全！发生的情况是我的主机认为是 Alice，但服务器看到我的 IP，询问 DNS “这是谁？”并收到“他是 Bob”。我仍然可以窃取 Alice 的权限，但我需要[破坏 DNS 记录](http://en.wikipedia.org/wiki/DNS_hijacking)不知何故）

紧要关头，将客户端 IP 和主机名添加到服务器`/etc/hosts`文件中。然而，这是一个 hack，正确的 DNS 设置是要走的路：一个被遗忘的`hosts`hack 可能会让你在接下来的几个月里费尽心思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:49:02.453

如MySQL 手册中的[DNS 查找优化和主机缓存中所述：](http://dev.mysql.com/doc/en/host-cache.html)

> 服务器使用线程安全执行主机名解析，`gethostbyaddr_r()`并`gethostbyname_r()`在操作系统支持时调用。否则，执行查找的线程将锁定互斥体并调用`gethostbyaddr()`and`gethostbyname()`代替。

因此，连接 IP 的解析`myhostname`是操作系统的问题，而不是 MySQL 的问题。您应该首先确定您的操作系统正在正确解析客户端 IP，如果没有，请调试您的操作系统或名称服务配置（有关此主题的问题可能更好地指向[Super User](http://superuser.com)或[Sever Fault](http://serverfault.com)，而不是 StackOverflow）。

# android - 如何结束警报对话框？

> ID：11794017
> 
> 赞同：0
> 
> 时间：2012-08-03T10:36:05.513
> 
> 标签：android

我正在应用程序中制作一个警报对话框，并希望在有人单击警报对话框中给出的特定按钮时结束它。即使是dismiss() 和cancel() 也不适合我。

这是警报对话框的代码：

```
 alertOnButtonDialog = new AlertDialog.Builder(this);
    TextView alertOnButtonView = new TextView(this);
    alertOnButtonView.setText("The website address of velosys consultancy services is \n velosysconsultancyservices.com.");

    Button alertOnButton = new Button(this);
    alertOnButton.setText("ok");
    alertOnButton.setOnClickListener(alertOnButtonClickListener);
    LinearLayout linearLayout = new LinearLayout(this);
    linearLayout.setLayoutParams( new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    linearLayout.setOrientation(1); 
    linearLayout.addView(alertOnButtonView);
    linearLayout.addView(alertOnButton);
    alertOnButtonDialog.setView(linearLayout);
    alertOnButtonDialog.show(); 
```

在这里，我想在单击按钮时结束它：

```
Button.OnClickListener alertOnButtonClickListener = new Button.OnClickListener()
    {  
        @Override  
        public void onClick(View v)
        {   
// code to end the alertDialog
        }
    }; 
```

请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:45:09.497

您所做的是，只需创建一个`AlertDialog`使用构建器的对象。`Create()`方法。

然后使用`dismiss()`AlertDialog 的方法在按钮单击时关闭该对话框。

```
AlertDialog alert;  
alertOnButtonDialog = new AlertDialog.Builder(this);
alert = alertOnButtonDialog.create(); 
```

现在，

```
Button.OnClickListener alertOnButtonClickListener = new Button.OnClickListener()
    {  
        @Override  
        public void onClick(View v)
        {   
         alert.dismiss();
        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:46:14.533

尝试这个..

```
dismissDialog(YourDialog name); 
```

# android - 首选项 xml 中的 android:visibility 属性不起作用？(安卓 2.3)

> ID：11794021
> 
> 赞同：8
> 
> 时间：2012-08-03T10:36:19.630
> 
> 标签：android, xml, visibility, preferences

以这个小preference.xml 文件为例：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen android:title="@string/sig_title" xmlns:android="http://schemas.android.com/apk/res/android">
<ListPreference android:entries="@array/text_display_entries" android:title="@string/sig_style" android:key="text_style" android:entryValues="@array/text_display_values" />
<CheckBoxPreference android:title="@string/custom_font" android:key="tweaks_text" />
<CheckBoxPreference android:title="@string/col_random" android:key="random_color_pref" />
<CheckBoxPreference android:visibility="invisible" android:enabled="false" android:title="@string/sig_show" android:key="show_sig" />
</PreferenceScreen> 
```

最后一个复选框的属性 android:visibility="invisible" 不起作用；此属性（或已消失）不适用于偏好？

我在代码中没有任何东西可以扰乱它的可见性，只是好奇为什么这不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T12:44:02.470

`android:visibility`用于显示和隐藏 `View`s 但对 a 无效`Preference`。的[文档](http://developer.android.com/reference/android/preference/Preference.html)列出了`Preference`可用的 XML 属性，但它们都不是您想要的。

但是，可以通过编程方式添加和删除首*选项*`PreferenceScreen`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-27T20:14:28.590

对于 AndroidX 用户，将其直接添加到您的偏好 XML

```
app:isPreferenceVisible="false" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-31T08:54:08.530

您必须使用`setVisible`方法来更改可见性。

首先，初始化复选框首选项。

```
CheckBoxPreference showSigPreference = (CheckBoxPreference) findPreference("show_sig"); 
```

然后

```
// Show the check box preference
showSigPreference.setVisible(true);

// Hide the check box preference
showSigPreference.setVisible(false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-12T01:00:47.353

我意识到这是一个较老的问题，以前在 xml 中没有可接受的答案。

现在通过添加 AppCompat 库可以直接在 xml 中执行此操作。[请参阅https://stackoverflow.com/a/54154665/114549](https://stackoverflow.com/a/54154665/114549)上的完整示例

# c# - 在按钮单击和删除文件时在新窗口中的浏览器中查看 PDF

> ID：11794024
> 
> 赞同：0
> 
> 时间：2012-08-03T10:36:36.730
> 
> 标签：c#, asp.net

我在删除仅为发送带有附件的电子邮件然后在浏览器中查看而创建的文件时遇到问题。现在我需要删除这个文件，因为它只是为了发送电子邮件而创建的。我怎样才能做到这一点。

这是我到目前为止所得到的。

```
public void SendEmail()
 {
    EmailClient.Send(mailMessage);

    //View PDF Certificate in Browser
    ViewPDFinBrowser((string)fileObject);

    DeleteGeneratedTempCertificateFile((string)fileObject));
}    

public void ViewPDFinBrowser(string filePath)
  {
     PdfReader reader = new PdfReader(filePath);
     MemoryStream ms = new MemoryStream();

     PdfStamper stamper = new PdfStamper(reader, ms);
     stamper.ViewerPreferences = PdfWriter.PageLayoutSinglePage | PdfWriter.PageModeUseThumbs;
     stamper.Close();

     Response.Clear();
     Response.ContentType = "application/pdf";
     Response.OutputStream.Write(ms.GetBuffer(), 0, ms.GetBuffer().Length);
     Response.OutputStream.Close();
     HttpContext.Current.ApplicationInstance.CompleteRequest();

  }

  public static void DeleteGeneratedTempCertificateFile(Object fileObject)
  {
      string filePath = (string)fileObject;
      if (File.Exists(filePath))
      {
          File.Delete(filePath);
      }
  } 
```

所以这是我调用 SendEmail() 时需要的步骤

1) 发送带有附件的电子邮件 --> 创建临时文件 2) 在浏览器中查看临时文件 3) 删除临时文件

我可以理解，只要文件在响应对象中，我就不能对它做任何事情，因为我收到错误消息（“文件被另一个进程使用）。如果我关闭响应流，那么文件将被删除但我不能在浏览器中查看。

我在想，如果我能设法在单击按钮时以某种方式打开文件以在新窗口中的浏览器中查看，我将能够删除该文件。或者我想我可以在 10 分钟后删除文件。因为用户不会在现场查看 PDF 超过 1-2 分钟。

请用示例代码告诉我一种解决方案。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:03:24.207

正如其他人所说，最好按原样使用 MemoryStream 而不将临时文件写入磁盘。有时 3rd 方组件的实现不允许这样做，在这种情况下，在编写 PDF 文件的二进制内容后，一定要调用 close （和/或可能处置，总是检查 MSDN 或 3rd 方 API 文档 .Close () 实际上确实如此）到所有不再需要的流。在您的情况下，在完成 http 请求后关闭*ms*和*reader 。*

在大多数情况下，考虑实现 using 模式。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/aa664736.aspx 。](http://msdn.microsoft.com/en-us/library/aa664736.aspx)但是请记住，这种方法也有一些警告，例如在 WCF 客户端中，这可能会导致异常（因此实际上并未在 using 子句中处理所有内容）。

另外，请记住任何并发问题。保持临时文件名足够随机，并考虑文件已经存在于本地磁盘上的情况（即操作失败并且不向请求者不应该看到的请求发送二进制文件等）。

# objective-c - 我可以像 NSClassFromString 和 NSSelectorFromString 那样做 NSVariableFromString 吗？

> ID：11794026
> 
> 赞同：1
> 
> 时间：2012-08-03T10:36:42.017
> 
> 标签：objective-c, ios, cocoa-touch, nsstring

对，所以我注意到你可以做 NSClassFromString 和 NSSelectorFromString。

是否可以做类似 NSVariableFromString 的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:54:15.807

不。编译的应用程序不包含变量名，除非包含调试信息并且它通常不用于发布应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T19:03:39.317

目标 C 运行时有很多好东西供您使用。

如果您想要一个 iVar，您可以使用字符串名称调用 object_getInstanceVariable。

如果您需要变量，则需要做更多的工作，并且它们必须对链接器全局可见。您可以为此目的使用 CFBundleGetDataPointerForName。

请务必阅读文档以了解有关运行时信息的限制和特定信息，以及不同平台上东西的可用性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:02:42.097

您可以使用从字符串中获取*值*`NSScanner`，但正如[JemeryP 所](https://stackoverflow.com/a/11794322/2998)指出的，在运行时变量名称通常已转换为指针和内存地址。

# jquery - 禁用keyup jquery

> ID：11794032
> 
> 赞同：0
> 
> 时间：2012-08-03T10:37:05.100
> 
> 标签：jquery, keyup

我想要做的是我有一个复选框，它将打印两个输入类型相同.. n 未选中时它允许有不同.. 这里 m 使用下面的代码...它在单击复选框时工作..在第一个输入中给出的输入是相同的，但是。当我取消选中它时，当我在其中输入一些东西时它仍然会给我。有什么方法可以禁用上面使用的键控功能 dat m..

```
function oncheck(){
var c=$("#ubill").attr('checked');
if(c){
     var value = $("#single").val();
$("#single1").val(value);
$("input").keyup(function () {
var value = $("#single").val();
$("#single1").val(value);

});

}
else {
    var value='';
    $("#single1").val(value);
    // what should be here
}

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:47:02.463

```
function stickInputs()
{
    var value = $("#single").val();
    $("#single1").val(value);
}

function oncheck()
{
    var c = $("#ubill").attr('checked');
    if (c)
    {
        var value = $("#single").val();
        $("#single1").val(value);
        //bind a named function
        $("input").keyup(stickInputs);
    }
    else
    {
        var value = '';
        $("#single1").val(value);
        // unbind the function
        $("input").unbind("keyup", stickInputs);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:46:27.233

我不确定我是否完全理解手头的问题。您的代码的[JS Fiddle](http://jsfiddle.net)会很有帮助。但与此同时，我相信您需要的是与此类似的东西，而不是您的功能：

```
$(function () {
    $("input").keyup(function (e) {
        if($("#ubill").attr('checked')){
            var value = $("#single").val();
            $("#single1").val(value); 
        }
    });
}); 
```

我将您的 if 语句移到了 keyup-callback 中。如果`ubill`复选框被选中，我们从一个输入中获取值并将其放在另一个输入中，否则我们什么也不做。

从您的函数的命名来看，我认为您在选中复选框时调用 oncheck 函数。没有必要这样做。相反，我所做的是等到 DOM 准备好，然后我们将一个 keyup-event 监听器附加到输入，然后对每个 key-up 采取行动。

# android - 安卓连接

> ID：11794034
> 
> 赞同：2
> 
> 时间：2012-08-03T10:37:09.613
> 
> 标签：android, networking

嗨，我正在使用来自[android的这个片段](http://developer.android.com/training/basics/network-ops/managing.html)

```
public boolean isOnline() {
    ConnectivityManager connMgr = (ConnectivityManager) 
    getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
    return (networkInfo != null && networkInfo.isConnected());
} 
```

但是当我从我的桌面中断互联网连接时，它不会发现未连接，并尝试连接。我在安卓模拟器中运行它。我的问题：为什么它不会返回 false 并且仍然认为它是连接的？如果它是通过 3D 连接的，它不应该获取数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:50:27.787

禁用计算机上的 Internet 连接不会反映模拟器上的更改。

您需要像在真手机上一样直接从模拟器中禁用互联网：

`Settings -> Wireless and networks -> Mobile Networks -> Use packed data.`

（我想路径可能因模拟器而异，具体取决于 SDK 版本）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-28T04:10:32.283

公共类 HttpManager {

```
public static String getData(String uri) {

    BufferedReader reader = null;

    try {
        URL url = new URL(uri);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();

        StringBuilder sb = new StringBuilder();
        reader = new BufferedReader(new InputStreamReader(con.getInputStream()));

        String line;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        return sb.toString();

    } catch (Exception e) {
        e.printStackTrace();
        return null;
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            }
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T06:12:15.797

```
 ConnectivityManager connMgr =
                (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();

        // Checks the user prefs and the network connection. Based on the result, decides
        // whether
        // to refresh the display or keep the current display.
        // If the userpref is Wi-Fi only, checks to see if the device has a Wi-Fi connection.
        if (WIFI.equals(sPref) && networkInfo != null
                && networkInfo.getType() == ConnectivityManager.TYPE_WIFI) {
            // If device has its Wi-Fi connection, sets refreshDisplay
            // to true. This causes the display to be refreshed when the user
            // returns to the app.
            refreshDisplay = true;
            Toast.makeText(context, R.string.wifi_connected, Toast.LENGTH_SHORT).show();

            // If the setting is ANY network and there is a network connection
            // (which by process of elimination would be mobile), sets refreshDisplay to true.
        } else if (ANY.equals(sPref) && networkInfo != null) {
            refreshDisplay = true;

            // Otherwise, the app can't download content--either because there is no network
            // connection (mobile or Wi-Fi), or because the pref setting is WIFI, and there
            // is no Wi-Fi connection.
            // Sets refreshDisplay to false.
        } else {
            refreshDisplay = false;
            Toast.makeText(context, R.string.lost_connection, Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T06:19:25.750

```
public class Networking {
 /*
 *@return boolean return true if the application can access the internet
 */
 public static boolean isNetworkAvailable(Context context) {
     ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
     if (connectivity != null) {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null) {
           for (int i = 0; i < info.length; i++) {
              if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                 return true;
              }
           }
        }
     }
     return false;
  }
} 
```

# c# - 如何启用对 web 目录的写入权限？

> ID：11794042
> 
> 赞同：0
> 
> 时间：2012-08-03T10:37:51.147
> 
> 标签：c#, .net, iis, doc, user-permissions

我正在编写一个守护进程应用程序。它在位于`inetpub/wwwroot/daemon_Folder`. 它将在那里更改文件。问题是该文件夹设法阻止应用程序在其上写入。我通过右键单击它`properties Window => Web sharing => Share this folder`=>然后选择写入权限和可执行文件来更改权限。我什至更改了`Control Panel=>Administarative Tools=>IIS=>websites=>that_Folder=>permissions`. 但是`"Attempted to read or write protected memory. This is often an indication that other memory is corrupt."`当我尝试以编程方式保存 doc 文件时，我仍然得到了。有人可以说如何实现这一目标吗？

注意：我使用的是 windows-XP、iis v5.1、visual studio 2010、office 2010、.net 4.0、c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:41:54.070

“尝试读取或写入受保护的内存” - 这不是文件夹权限/特权问题，它是“访问冲突”的变体 - 您的代码试图在不应该的时间/位置访问非托管内存：（

# wpf - 绑定“IsReadOnly”依赖属性

> ID：11794049
> 
> 赞同：0
> 
> 时间：2012-08-03T10:38:22.307
> 
> 标签：wpf, data-binding, dependency-properties

我试图创建一个依赖属性“IsReadOnly”，以在某些事件后自动将表单中的所有文本框设置为只读。

该属性是在带有文本框的窗口后面的代码中设置的，如下所示：

```
public static readonly DependencyProperty IsReadOnlyProperty =   
        DependencyProperty.Register("IsReadOnly",
        typeof(bool), 
        typeof(MainWindow), 
        new PropertyMetadata()); 

public bool IsReadOnly
{
  get { return (bool)GetValue(IsReadOnlyProperty); }
  set { SetValue(IsReadOnlyProperty, value);       }
} 
```

文本框的 Xaml 代码与此类似：

```
<TextBox Text="{numBind:NumericFormatBinding Path=BudgetStatement.OpExpTotalByFunction}"
                   IsReadOnly="{Binding Path=IsReadOnly,
                RelativeSource={RelativeSource Mode=FindAncestor, 
                AncestorType=Window}, 
                   Mode=TwoWay}" 
         Name="txtOpExpByProgram" /> 
```

但它不起作用。我仍然可以在文本框中编辑值。我收到以下输出错误： `System.Windows.Data Error: 40 : BindingExpression path error: 'IsReadOnly' property not found on 'object' ''ListCollectionView' (HashCode=54963679)'. BindingExpression:Path=IsReadOnly; DataItem='ListCollectionView' (HashCode=54963679); target element is 'TextBox' (Name=''); target property is 'IsReadOnly' (type 'Boolean')` 我不知道足够的 wpf 来正确理解此错误，但它似乎与 ListCollectionView 有关 - 但我没有尝试将属性附加到 ListCollectionView 所以我'米卡住了。

谷歌搜索表明这可能是由于 DataContext 和依赖属性需要特殊处理（http://stackoverflow.com/questions/8497841/dependency-property-and-binding-error），或者 PropertyMetaData 应该是一个框架（或 UI ) 属性元数据。

谁能指出我正确的方向以找出什么不起作用？

蒂亚

亚历克斯

ps: numbind 只是在所有文本框中设置字符串格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:46:45.823

阅读评论后，将所有者类型从 更改`MainWindow`为`BudgetMainWindow`。

```
public static readonly DependencyProperty IsReadOnlyProperty =   
        DependencyProperty.Register("IsReadOnly",
        typeof(bool), 
        typeof(BudgetMainWindow), 
        new PropertyMetadata()); 
```

# android - 如何更改列表视图文本颜色？

> ID：11794052
> 
> 赞同：2
> 
> 时间：2012-08-03T10:38:34.870
> 
> 标签：android, listview

有人可以帮我在不使用任何基本适配器的情况下更改列表视图的文本颜色吗？我使用 android.R.layout.simple_list_item_single_choice 来显示选项按钮，但默认情况下，列表视图中的文本以白色显示，我需要将其更改为黑色。有没有办法在不使用自定义适配器的情况下将文本更改为黑色。我已经粘贴了我用来创建带有选项按钮的列表视图的代码。![在此处输入图像描述](../Images/2e0cd3b31aa14d56ce8a1adceff67d46.png)

```
 ListView lvCheckBox = (ListView)findViewById(R.id.lvCheckBox);
            save = (ImageView)findViewById(R.id.button1);
            lvCheckBox.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            lvCheckBox.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_single_choice, values)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:42:44.823

只需更改 ListView 项的默认布局

代替 ：

```
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_listview_item, list); 
```

利用

```
adapter = new ArrayAdapter<String>(this, R.layout.customLayout, list); 
```

和 customLayout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/listTextView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/black"
    android:textSize="20dp" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T04:08:22.127

例如，您可以将自定义选择器用于列表视图：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true"    +
 android:drawable="@drawable/listitem_pressed" />
<item android:state_focused="true" android:drawable="@drawable/listitem_selected" />
 </selector> 
```

参考： [另一个问](https://stackoverflow.com/questions/2562051/listview-item-background-via-custom-selector)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-04T11:41:50.017

是的！你是对的，我试过你的代码。**默认情况下，它也显示白色背景和 Textcolor。当我们按下它时，由于选择器颜色而显示文本。所以它对我们来说是可见的。**我接受上面的回答。但我们只能在特定部分进行定制。无需创建单独的 Layout 或 Textview。

```
ListView lvCheckBox = (ListView)findViewById(R.id.lvCheckBox);
                save = (ImageView)findViewById(R.id.button1);
    lvCheckBox.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

    lvCheckBox.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, values) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                CheckedTextView checkedTxtView = (CheckedTextView) super.getView(position, convertView, parent);

                String yourValue = values.get(position);
                checkedTxtView.setText(yourValue);
                checkedTxtView.setTextColor(this.getResources().getColor(android.R.color.black));
                return textView;
            }

    }); 
```

我已经创建了示例 hello world 项目并尝试了这个。这个对我有用。我希望它能帮助你完成你的任务。

还有一件事，你需要 CheckedTextView，所以你使用的是 android.R.layout.simple_list_item_single_choice。如果您按照上述示例创建自定义布局，则必须在这些自定义布局设计中使用 CheckedTextView。因为，在上面的例子中，他们只使用了简单的文本视图。所以要注意这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:49:28.053

![在此处输入图像描述](../Images/190db984488a37b059db7192a08ca132.png)

使用此代码。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.custom_spinner_textview_layout, from);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinnerAlarmTone.setAdapter(adapter); 
```

## XML 布局文件

> ```
> < ?xml version="1.0" encoding="utf-8"?>
> <TextView 
>   xmlns:android="http://schemas.android.com/apk/res/android"
>     android:id="@+id/text1"
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:textSize="16.0sp" 
>     android:textColor="@color/black"
>     android:gravity="left"/> 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T10:50:23.860

您可以使用由 textview 组成的自定义 xml 文件代替默认值`android.R.layout.simple_list_item_single_choice`，并将此 xml 文件传递​​给 ArrayAdapter。通过这种方式，您可以轻松更改 textview 颜色。但我仍然建议您使用自定义适配器以获得更大的灵活性。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-13T07:30:08.057

兄弟，一种解决方案是您将列表视图的背景颜色更改为黑色，您的文本将自动可见。或者您必须在列表视图上设置自定义适配器。当您膨胀自定义布局时，您可以根据需要设置 textview 颜色。

# ios - iOS 从特定位置加载视图

> ID：11794057
> 
> 赞同：0
> 
> 时间：2012-08-03T10:39:09.133
> 
> 标签：ios, uiview, uinavigationcontroller, searchbar

嘿伙计们。

我想要实现的是将我的搜索栏放在导航控制器后面，就像在麻雀应用程序中一样。所以当你向下滚动时，搜索栏基本上是视图的一部分。

![](../Images/c2e60fd130ad2db4127984896fc0a0db.png) ![](../Images/e21c2b2a471b94980a5f89c5e90ed8d8.png)

第一张图片是首次加载时的视图。第二个是在我向下滚动之后。你知道我有什么方法可以做到这一点吗？我正在考虑将搜索栏作为视图的一部分，然后从搜索栏下方的点加载视图。但我不知道该怎么做。任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:57:49.953

如果您使用的是表格视图，我同意@holex 的评论。重新实现似乎很愚蠢。

但是，万一你不是。您可以只为您的内容使用 UIScrollView 并将搜索栏放在顶部，并相应地调整内容偏移量。所以它看起来好像搜索栏从您的导航栏下方动画。

[这是开发网站上 UIScrollView 类页面的链接](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html)

# jquery - chrome 不工作 .offset().top

> ID：11794058
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:39:15.363
> 
> 标签：jquery, google-chrome, offset

不能在 chrome 中工作...... element.offset().top **任何建议**

```
$(window).load(function() {

  $(".scroll-box").scroll(function(){
    $('#document_activity .doc-draft.item.parent').each(function(i) {
      $movingLableTop = [];
      $movingLableHeight = [];
      $fixedLableTop = $('#fixed_version').find('.version').offset().top;
      $movingLableTop.push($(this).offset().top);
      $movingLableHeight.push($(this).height());
      if ($fixedLableTop > ($movingLableTop + $movingLableHeight)){
        $('#fixed_version').find('.version').html($(this).find('.version').html());
      }
    });
  });

}); 
```

很多人提到 chrome 没有得到正确的 offset() 值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:13:32.627

Thx 已修复，现在可以正常工作

而不是这个 $(this).offset().top

通过使用

$(this).position().top

# c++ - 在C中转换为无符号字符

> ID：11794060
> 
> 赞同：3
> 
> 时间：2012-08-03T10:39:16.730
> 
> 标签：c++, c, casting

我面临以下问题：尝试强制转换为 unsigned char 时，我得到了意外的值。我正在使用的代码：

```
unsigned char MyVal1  = ((0xF1E3 && 0xff00) >> 8);
unsigned char MyVal2 = (unsigned char)((0xF1E3 && 0xff00) >> 8);
unsigned char MyVal3 = (unsigned char)((0xF1E3 && 0xff)); 
```

我将所有三个变量都存储在一个数组中。

我得到的输出（查看数组中的值；数组是无符号字符数组）：

```
0x00 
0x00
0x01 
```

当我期待时：

```
0xF1 
0xF1
0xE3 
```

有人可以帮我解决我做错了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T10:40:53.303

运算符`&&`和`&`在整数上的工作方式不同。您的操作数首先转换为 bool（零/非零），然后`and`一起编辑。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T10:41:38.307

`&&`是*布尔值*和运算符；`1`如果它的两个操作数都非零，则它给出，`0`否则。您需要*按位*和运算符，`&`它在其操作数的每一位中给出`1`或`0`。

# windows-phone-7 - 在 Wp7 中将重力与加速度分开（仅使用加速度 Api）

> ID：11794067
> 
> 赞同：2
> 
> 时间：2012-08-03T10:39:45.300
> 
> 标签：windows-phone-7

我是 WP7 开发的新手，正在开发一个项目（wp7 应用程序），我只需要使用加速 API 获得重力（我想我可以使用[Motion Api](http://msdn.microsoft.com/en-us/library/hh202984%28v=vs.92%29.aspx)做一些事情），但它需要窗口电话支持 Compass 和 Gyroscope .所以有没有办法将重力与加速度分开，或者只使用加速度在 X、Y 和 Z 轴上获得重力（因为我希望我的应用程序在没有指南针和陀螺仪的 wp 设备上运行）。

在android中也有一些方法喜欢

*   直线加速度
*   低通/高通滤波器等我们在 Wp7 中有这种支持吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:44:14.623

手机本身不知道加速度是什么力，重力是什么。您需要来自其他传感器的信息才能进行数学运算以分离这些值。这就是 Motion API 的用途。

因此，您唯一的机会就是使用 Motion API。如果设备没有必要的传感器，它将优雅地下降，但如果有：

> 此示例使用的 Motion API 需要所有受支持的 Windows Phone 传感器，因此这些示例应用程序将正常失败，但无法在没有必要传感器的设备或设备模拟器上正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:29:55.757

[Windows Phone 团队博客](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2010/09/08/using-the-accelerometer-on-windows-phone-7.aspx)上有一篇关于在加速度计数据上实现高通/低通滤波器的帖子。我已经使用它并取得了相当不错的效果。

# httpwebrequest - 重定向图像请求

> ID：11794069
> 
> 赞同：0
> 
> 时间：2012-08-03T10:39:46.550
> 
> 标签：httpwebrequest, background-image, asp.net-mvc

我在我们的网站中使用了背景图片 css。

```
.banner-image{
   height: 76%;
   background-image: url("http://cdn.images.com/contents/images/home/bannerimage.PNG");
} 
```

如果我运行 www.test.com，则此页面背景具有横幅图像。我正在从 cdn 域请求横幅图像。我已经上传了图片。

这里我需要处理这种情况，浏览器将图像请求发送到 cdn.images.com 服务器并获得响应。如果图像在 cdn 中不存在，我需要通过将请求发送到我们的本地服务器“www.test.com”来处理它，我在其中放置了所有必需图像的副本。

我怎样才能做到这一点？我们可以为此使用图像处理程序吗？如果是的话怎么办？

谁能给我这个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:44:13.440

HTML：

```
<div class="header">
    <a href="/">
        <span class="header-title">My gray sea design</span><br />
        <span class="header-title-two">A beautiful design</span>
    </a>
</div> 
```

CSS：

```
.header {
    border-bottom:1px solid #eaeaea;
}

.header a {
    display: block;
    background-image: url("http://www.xyz.com/images/embouchure.jpg");
    background-repeat: no-repeat;
    height:160px;
    padding-left:280px;
    padding-top:50px;
    width:470px;
    color: #eaeaea;
} 
```

# iphone - 如何检查指南针航向是否指向特定位置？

> ID：11794073
> 
> 赞同：0
> 
> 时间：2012-08-03T10:39:53.960
> 
> 标签：iphone, gps, xcode4.3

我是 iphone 开发新手。我想知道是否有任何方法可以检查一个人 iphone 是否指向特定位置。我知道有 CLLocation 框架来获取设备的标题。但是我还想检查它是否也指向正确的方向。目的地位置是通过经度和纬度获得的。有人可以建议我一种方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:07:24.247

CLLocationManager 将为您提供标题，请在此处查看文档-> [https://developer.apple.com/library/mac/ipad/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html](https://developer.apple.com/library/mac/ipad/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

另外，查看这个答案，他们谈论 CLLocationDirection 和 trueHeading -> [https://stackoverflow.com/a/2043694/1104563](https://stackoverflow.com/a/2043694/1104563)

- - 更新

没有内置的方法可以做到这一点，您需要使用公式来确定这一点。公式可以在这里找到[计算与两点相关的方位角](http://www.movable-type.co.uk/scripts/latlong.html)

此外，您可以查看这个 SO 答案： [CLLocation Category for Calculating Bearing w/ Haversine function](https://stackoverflow.com/q/3925942/1104563)

希望这可以帮助。祝你好运！

# ios - iOS：为带有 REST Web 服务的 POST 请求寻找一个苗条的框架

> ID：11794077
> 
> 赞同：0
> 
> 时间：2012-08-03T10:40:14.640
> 
> 标签：ios, ipad, rest, post

实际上我想做的只是将带有 POST-Request 的 JSONString 发送到服务器并在响应的标头中实现“OK”。

为此，您会建议什么框架？我已经看过restkit，但对于我的目的来说它太大了。我更喜欢苗条的框架/解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:00:14.123

听起来你在这里不需要一个框架，因为@dasblinkenlight 已经评论过你可能应该只使用 NSURLRequest。

```
 -(BOOL)sendRequestToURL:(NSString*)stringURL withJSON:(NSString*)JSONAsAString{
    NSError *jsonERROR =nil;
    __block BOOL success = NO;
    NSOperationQueue* queue = [[NSOperationQueue alloc]init];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:stringURL]];
    request.HTTPMethod = @"POST";
    request.HTTPBody = [NSJSONSerialization dataWithJSONObject:JSONAsAString options:0 error:&jsonERROR];
    if (!jsonERROR){
        [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError * error) {
            NSHTTPURLResponse *httpResonse = (NSHTTPURLResponse*)response;
            if (httpResonse.statusCode == 200 ) {
                success = YES;
            }
        }];
    } else {
        NSLog(@"jsonERROR: %@", jsonERROR.description);
    }
    return NO;
} 
```

# file - 删除 GitHub 中的任何 .DS_Store

> ID：11794079
> 
> 赞同：3
> 
> 时间：2012-08-03T10:40:18.233
> 
> 标签：file, github, gitignore

我在 GitHub 上有一个存储库：

[https://github.com/ludovicriffault/feed-tastic](https://github.com/ludovicriffault/feed-tastic)

而且我无法删除每个文件夹和子文件夹中的**.DS_Store**文件。我已经尝试了很多东西，比如文件 .gitignore 和 Stackoverflow 中的一些答案，但没有任何效果......

有什么办法解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T10:46:04.940

你需要克隆你的仓库，然后

```
find . -name ".DS_Store" -exec git rm --cached -f {} \;.
git commit -m "delete files"
git push 
```

这个想法是在本地保留您的“ `.DS_Store`”，同时将它们从 git repo 中删除。仅当那些“”首先从索引中删除时才会起作用
，因此“ ”（请参阅​​ 参考资料）。`.gitignore``.DS_Store``git rm --cached -f`[`git rm`](http://git-scm.com/docs/git-rm)

# c# - 获取最后调用方法的名称

> ID：11794081
> 
> 赞同：1
> 
> 时间：2012-08-03T10:40:22.977
> 
> 标签：c#, c#-4.0, methods

我有以下代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        try
        {
            this.CheckValue(true); // call method
        }
        catch(Exception ex)
        {
            // how to get here name of last called method
        }
    }

    public int CheckValue(bool sender)
    {
        var qwe = int.Parse("qwe"); // invoke an exception

        return 0;
    }
} 
```

我需要输入最后调用方法的“catch block”名称（在本例中为“CheckValue”），但它返回调用的方法是“StringToNumber”。

我尝试使用 StackTrace 获取它：

```
stackTrace.GetFrame(1).GetMethod().Name; -> "Main"
MethodBase.GetCurrentMethod(); -> "Void .ctor()"
ex.TargetSite.Name; -> "StringToNumber" 
```

有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:13:58.180

简短的回答：

**是的你可以！！！**

* * *

我只是使用扩展方法，这里的技巧是获取所需类的最后一帧，否则它将获取 mscorlib 程序集的方法。就这样吧：

```
public static string GetLastCalledMethod<T>(this Exception ex)
{
    var stackTrace = new System.Diagnostics.StackTrace(ex);
    var lastFrame = stackTrace.GetFrames().FirstOrDefault(frame => frame.GetMethod().DeclaringType.FullName == typeof(T).FullName);

    string methodName = string.Empty;
    if (lastFrame != null)
        methodName = lastFrame.GetMethod().Name;

    return methodName;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:56:55.953

简短的回答：

## 你不能。

* * *

长答案：

如果您真的需要这样做，您将需要在您想要跟踪的所有方法中执行日志记录代码。

您可以创建一个全局变量（ugh）来存储 a`MethodInfo`与最后调用的方法，并在每个方法中，将其设置为`MethodBase.GetCurrentMethod()`. 然后，无论何时，您都可以检查该变量以查看最后设置它的方法。

* * *

在您的情况下，您可能正在尝试确定抛出异常的方法。您正在查看`TargetSite`，它返回层次结构中最低的方法，而您似乎想要紧挨当前方法下方的方法。如果简单地检查`Exception.StackTrace`不能提供足够的信息，您也许可以从中解析出信息`StackTrace`并使用反射来获取`MethodInfo`. 通常，这`StackTrace`已经足够好了。

您还可以在顶级方法中抛出一个新异常，以便从新方法中获取`TargetSite`。

概括：

如果`Exception.StackTrace`没有提供足够的信息，那么您将不得不：

*   在您要检查的每种方法中执行日志记录代码。
*   解析出你可以从`Exception`.
*   更改异常抛出方案以抛出一个`InnerException`设置为原始异常的新异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:49:01.180

我不知道你为什么要这样做..因为这是预期的行为。异常的站点是您在 int.Parse() 调用中显示的内容。

话虽这么说..如果你真的想这样做，你需要在CheckValue中包装一个try..catch，然后从那里重新抛出异常，但是以一种破坏调用堆栈的方式......就像这样：

```
public int CheckValue(bool sender) {
    try {
        var qwe = int.Parse("qwe"); // invoke an exception

        return 0;
    }
    catch (Exception ex) {
        throw ex; // this breaks the call stack and re-throws the exception from here..
    }
} 
```

然后，ex.TargetSite.Name == "CheckValue"。我仍然不确定您为什么要这样做..因为堆栈跟踪实际上会向您显示失败后它从哪里展开。

# asp.net-mvc - 让 Migrate.exe 工作

> ID：11794084
> 
> 赞同：12
> 
> 时间：2012-08-03T10:40:28.270
> 
> 标签：asp.net-mvc, entity-framework-4, migration

我一直在努力执行 EF Migrate.exe 来工作。

我的解决方案有几个项目。迁移和实体存在于项目数据中。控制器和视图位于 Web 中。

我尝试使用 migrate.exe - 但是我正在努力让第一个参数（程序集）被接受。文档说：

> 程序集：指定包含迁移配置类型的程序集的名称。

我试过了：

> migrate.exe "MySolution\DataProject\bin\Debug\Data.dll"

```
ERROR: Could not load file or assembly 'D:\\MySolution\\Data\\bin\\Debug\\Data' or one of its dep
endencies. The given assembly name or codebase was invalid. (Exception from HRES
ULT: 0x80131047) 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-04T19:29:24.983

读完[这个](http://blog.cincura.net/232804-problem-could-not-load-file-or-assembly-assembly-or-one-of-its-dependencies-the-given-assembly-name-or-codebase-was-invalid-exception-from-hresult-0x80131047-when-using-entity-fra/)，[这个](http://entityframework.codeplex.com/workitem/315)，还有[这个](http://msdn.microsoft.com/en-us/data/jj618307.aspx)

我有（我认为）你需要的东西：

1.  如果对 .NET 4 程序集使用 migrate.exe，则需要将 packages\EntityFramework.5.0.0\tools 中的 Redirect.config 重命名为 migrate.exe.config 并将其复制到与 migrate.exe 相同的目录中。要针对 .NET 4.5 程序集运行 migrate.exe，您不需要此副本，migrate.exe.config 必须不存在。
2.  实体框架 DLL 的正确版本必须与 migrate.exe 位于相同的目录中。正确的版本是 packages\EntityFramework.5.0.0\lib\net40\ 用于针对 .NET 4 程序集运行 migrate.exe。正确的版本是 packages\EntityFramework.5.0.0\lib\net45\ 用于针对 .NET 4.5 程序集运行 migrate.exe
3.  如果您指定 /StartUpDirectory=，请不要指定 /assembly 示例的路径：`C:\Tools\migrate.exe some.dll /StartUpDirectory=C:\Project\bin\`。
4.  如果不指定启动目录，则需要在 /assembly 示例中指定完整路径：`C:\Tools\migrate.exe C:\Project\bin\some.dll`- 在这种情况下，migrate.exe 将无法加载 some.dll 的依赖项，除非您将所有 some.dll 的依赖项并将其放在与 migrate.exe 相同的目录中。
5.  如果您将 migrate.exe 与您的 some.dll 放在同一路径中，则 migrate.exe 将能够使用您的应用程序使用的相同 EntityFramework.dll，并且可以加载所有依赖项，并且可以加载 some.dll 而无需任何路径`C:\Tools\migrate.exe some.dll`
6.  如果您将 migrate.exe 放在一个单独的工具文件夹中，例如 Im 这样做，它需要与 migrate.exe 相同的目录中的 EntityFramework.dll 的正确版本，它将需要该`/StartUpDirectory=<the path where you target dll is present>`子句，并且您应该指定程序集的名称而不像这样的路径：`C:\Tools\migrate.exe some.dll /StartUpDirectory=C:\Project\bin\`
7.  这是我使用的powershell命令：

```
$SolutionPath = (Resolve-Path '..').Path
$ToolsPath = "$SolutionPath\Build\Lib\"

task db  { 
  $migrator = $ToolsPath + 'Migrations\migrate.exe'  
  $migrateCommand = "$migrator zasz_me.dll /StartUpDirectory=$SolutionPath\zasz.me\bin\ /connectionStringName:FullContext /startUpConfigurationFile:$SolutionPath\zasz.me\Web.config /verbose"
  Write-Host $migrateCommand
  Invoke-Expression $migrateCommand
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:37:27.773

我在这里回答了一个类似的问题，关于如何通过参数覆盖连接字符串到 migrate.exe。如果不指定 web/app.config 文件，我还没有让它工作。

[https://stackoverflow.com/a/14138797/134761](https://stackoverflow.com/a/14138797/134761)

# backbone.js - 为什么主干在模型和集合中都有同步方法？

> ID：11794089
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:41:01.593
> 
> 标签：backbone.js, sync

无论如何，仅在集合中或仅在模型中使用同步方法就足够了，那么为什么他们必须在两个地方同步呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:04:28.667

实际上这两种`sync()`方法都只是一个通用`Backbone.sync()`方法的代理：

*   [模型同步（）](https://github.com/documentcloud/backbone/blob/master/backbone.js#L231-234)
*   [集合.sync()](https://github.com/documentcloud/backbone/blob/master/backbone.js#L584-587)
*   [骨干网.sync()](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1311)

`Model.sync()`集合总是在它的单个模型上委托单个操作，例如： `create`，`remove`等等。`sync()`但是Collection在操作中使用了自己的，`fetch()`因为它与`fetch`Model或Collection有很大的不同，例如：URL遵循另一种模式，后端层应该响应不同。

另一方面，我认为这`Backbone.sync()`是一种私有方法，我尽量不直接使用它，如果我这样做我感觉不舒服。我认为该`sync()`方法是一个处理程序点，允许您完全覆盖*后端同步*，您可以覆盖该方法以实现不同*的持久层*，例如使用*LocalStorage*。但不能直接调用。

正如@JMM 在评论中所说，`Model.sync()`and`Collection.sync()`也是一个可以被改写的好点，以使其*“做一些定制的事情，然后`Backbone.sync()`像往常一样调用”*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:01:51.227

`sync`默认情况下，Backbone 在模型和集合中没有- 方法，但是模型和集合都有使用- 方法进行 ajax 调用的方法（`fetch`对于模型和集合以及`save`对于`destroy`模型） 。[文档](http://backbonejs.org/#Sync)，[带注释的来源](http://backbonejs.org/docs/backbone.html#section-162)`Backbone.sync`

使用`Backbone.sync`检查单个集合或模型的方法是否存在的方法，因此可以通过覆盖或通过扩展需要自定义同步的模型或集合与特定部分`sync`来覆盖所有同步的默认功能-function .`Backbone.sync``sync`

至于为什么模型和集合都具有与服务器同步的能力：***灵活性***。如果只有集合具有同步功能，那么您将无法拥有单个模型，如果只有模型具有同步功能，您将如何最初从服务器获取大量模型。模型和集合的同步功能没有缺点，**为什么不呢？**

我对您的反问：仅在另一个上进行同步如何就足够了？

# yii - 重载标准吸气剂

> ID：11794097
> 
> 赞同：3
> 
> 时间：2012-08-03T10:41:42.203
> 
> 标签：yii

我想制作一个自定义 getter，它应该返回模型的两个字段而不是一个。我有类似的属性名称`first_name`。我正在制作的吸气剂是

```
public function getFirstName(){
        return 1;
} 
```

然后我尝试在这样的 CDetailView 中调用它

```
'client.first_name:raw:Client', 
```

但它返回模型的标准属性。怎么做才对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:55:58.243

Yii 检索属性的操作顺序如下：

*   AR 属性
*   公共变量
*   自定义吸气剂

我不确定是先提取 AR 属性还是公共变量，但我知道如果它们中的任何一个存在，则不会调用您的自定义 getter。

如果您已经有一个 first_name 属性（来自 AR），那么您需要为您的 getter 使用不同的名称并使用它。

# php - preg_match(): Unknown modifier 错误何时发生？

> ID：11794101
> 
> 赞同：3
> 
> 时间：2012-08-03T10:41:49.143
> 
> 标签：php, regex, preg-match, exact-match

```
\\    $DigitalSignature have full name value passed
$SignatureMatch =  '/' . strtolower( $NameFirst . ' ' . $NameLast ) . '$/';
if( true == preg_match( $SignatureMatch, strtolower( $DigitalSignature ) ) )
{
    $boolIsValid = true;
} 
```

我有这个代码来精确匹配名字和姓氏与数字签名匹配。但这会在生产（实时）的错误日志中报告我的错误。

```
preg_match(): Unknown modifier 'b' 
```

我无法重现此错误。我怎样才能首先得到这个错误。以及如何解决此错误以进行精确匹配。

我已经看到了很多关于 SO 的问题，但没有得到什么时候会出现这个错误。我该如何解决。我看到的许多问题中的一些问题是 -

1.  [警告：preg_match() [function.preg-match]：未知修饰符](https://stackoverflow.com/questions/5215947/warning-preg-match-function-preg-match-unknown-modifier)
2.  [preg_match() 语句中的未知修饰符](https://stackoverflow.com/questions/7810951/unknown-modifier-in-preg-match-statement)
3.  [警告：preg_match() [function.preg-match]：未知修饰符](https://stackoverflow.com/questions/5215947/warning-preg-match-function-preg-match-unknown-modifier)
4.  [未知修饰符“l”错误](https://stackoverflow.com/questions/4820753/unknown-modifier-l-error)
5.  [未知修饰符 'g' PHP 正则表达式错误](https://stackoverflow.com/questions/7292582/unknown-modifier-g-php-regex-error)
6.  [... 中的未知修饰符“/”？它是什么？](https://stackoverflow.com/questions/3565615/unknown-modifier-in-what-is-it)
7.  [preg_match() 未知修饰符 '[' 帮助](https://stackoverflow.com/questions/3011383/preg-match-unknown-modifier-help)
8.  [警告：preg_match() [function.preg-match]：未知修饰符“v”](https://stackoverflow.com/questions/5321068/warning-preg-match-function-preg-match-unknown-modifier-v)
9.  [PHP Preg_match 匹配精确词](https://stackoverflow.com/questions/4305085/php-preg-match-match-exact-word)
10.  [在正则表达式中使用 preg_match() 表达式时的未知修饰符“v”](https://stackoverflow.com/questions/11394323/unknown-modifier-v-when-using-preg-match-expression-in-regex)
11.  [preg_match(); - 未知修饰符“+”](https://stackoverflow.com/questions/5589807/preg-match-unknown-modifier)
12.  [preg_match 错误未知修饰符'{'](https://stackoverflow.com/questions/10288674/preg-match-error-unknown-modifier)
13.  [使用带有 REGEX 表达式的 preg_match() 时的未知修饰符 '('](https://stackoverflow.com/questions/5153261/unknown-modifier-when-using-preg-match-with-a-regex-expression)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T10:46:19.203

如果名字或姓氏包含 a `/`，您的正则表达式将类似于：

```
/john/doe$/ 
```

To `preg_match`，这看起来像正则表达式 is `/john/`，尾随`doe$/`是修饰符。这些当然是无效的修饰符。您需要`/`使用[`preg_quote`](http://php.net/preg_quote).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T10:44:58.253

`$NameFirst`或`$NameLast`可能包含斜杠 /。

你应该替换这个

```
$SignatureMatch =  '/' . strtolower( $NameFirst . ' ' . $NameLast ) . '$/'; 
```

这样 ：

```
$SignatureMatch =  '/' . preg_quote(strtolower( $NameFirst . ' ' . $NameLast ), '/') . '$/'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T10:44:51.927

您输入的字符串之一（`$NameFirst`或`$NameLast`）包含一个`/`. 使用不同的分隔符或在字符串中对其进行转义。

此外，如果您只是检查子字符串是否在不同的字符串中，请不要使用`preg_match`, ，`stripos()`因为它会快得多。

```
if (stripos($DigitalSignature ,"$NameFirst $NameLast")) { /* It exists! */ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T05:50:10.420

在这种情况下，您不应该使用正则表达式，因为您没有使用任何模式匹配。如果您只想在另一个字符串中查找一个字符串，请使用`strpos`or`strrpos`函数： http: [//php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

如果在签名的末尾找到名称很重要，那么就更容易了：从 $signature 中获取一个子字符串，该子字符串距离结尾有那么多字符。

```
$fullname = strtolower( "$NameFirst $NameLast" );
$len = strlen($fullname);
$possible_name = substr( $fullname, -$len, $len );
$boolIsValid = ( $possible_name == $fullname ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-09T13:35:28.080

如果您使用的是[T-Regx](https://github.com/Danon/T-Regx)，则会自动为您添加分隔符：

```
$SignatureMatch =  strtolower($NameFirst . ' ' . $NameLast) . '$';

if (pattern($SignatureMatch, 'i')->matches($DigitalSignature))
{
    $boolIsValid = true;
} 
```

# eclipse - Groovy eclipse 插件，删除线无处不在

> ID：11794104
> 
> 赞同：0
> 
> 时间：2012-08-03T10:42:02.423
> 
> 标签：eclipse, groovy, syntax-highlighting

我刚刚尝试了 Groovy-Eclipse 插件，一切正常，除了语法突出显示的行为非常奇怪。

基本上，它似乎认为几乎所有东西都已弃用。我到处都有罢工槽。

例如使用时toURL被划线

```
 "http://stackoverflow.com".toURL() 
```

我在很多方法中看到了这一点，包括 eachLine 、 getText 等等。这些方法没有被弃用，这是怎么回事？

我正在运行 Eclipse 4.2、2.7.0.xx-20120703-1400-e42-RELEASE 和 Groovy 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:07:57.320

这些方法已被弃用，因为它们已移至其他类，而您的插件不知道这一点。有很多方法被弃用：

[您可以在此处](http://groovy.codehaus.org/api/deprecated-list.html)查找 Groovy 的新主版本已弃用的 API 。

[您可以在此处](http://groovy.329449.n5.nabble.com/DefaultGroovyMethods-deprecated-td5710664.html)阅读类似的问题：

* * *

> 来自 STS/Groovy-Eclipse 方面的答案。这已在最新的 2.7.1 快照中修复。Groovy-Eclipse 的早期版本不知道 StringGroovyMethod，但这已得到修复。

* * *

# javascript - 使用 jQuery 为属性设置新值

> ID：11794105
> 
> 赞同：56
> 
> 时间：2012-08-03T10:42:12.523
> 
> 标签：javascript, jquery, html, attr

我正在尝试使用 设置 div 的自定义属性的新值[`attr()`](http://api.jquery.com/attr/)。我发现它可以使用 来完成`.attr( attributeName, value )`，但是当我尝试它时它不起作用。

这是我感兴趣的代码部分：

```
$('#amount').attr( 'datamin','1000') 
```

并且具有自定义属性的*div*是

```
<div id="amount" datamin=""></div> 
```

这是整个示例：

```
$(function() {
    $( "#slider-range" ).slider({
        range: true,
        min: <?php echo $min_val;?>,
        max: <?php echo $max_val;?>,
        values: [ <?php echo $min_val;?>, <?php echo $max_val;?> ],
        slide: function( event, ui ) {
            $( "#amount" ).html( "<?php echo $currency_chk_i;?>" + ui.values[ 0 ] + " - <?php echo $currency_chk_i;?>" + ui.values[ 1 ] );

            $('#amount').attr( 'datamin','1000');

        },
        change: function(event, ui) {
            // when the user change the slider
        },
        stop: function(event, ui) {
        alert(ui.values[0]);
            // when the user stopped changing the slider

        }
    });
    $( "#amount" ).html( "<?php echo $currency_chk_i;?>" + $( "#slider-range" ).slider( "values", 0 ) +
        " - <?php echo $currency_chk_i;?>" + $( "#slider-range" ).slider( "values", 1 ) );

}); 
```

谁能指出我错在哪里或任何其他出路？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-03T10:46:39.057

对我来说很好

请参见此处的示例。 [http://jsfiddle.net/blowsie/c6VAy/](http://jsfiddle.net/blowsie/c6VAy/)

确保您的 jquery 在`$(document).ready`函数或类似函数内部。

您还可以使用 jquery[数据改进您的代码](http://api.jquery.com/jQuery.data/)

```
$('#amount').data('min','1000');

<div id="amount" data-min=""></div> 
```

* * *

**更新，**

您的完整代码（几乎）的工作示例在这里。 [http://jsfiddle.net/blowsie/c6VAy/3/](http://jsfiddle.net/blowsie/c6VAy/3/)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-08-03T10:45:11.190

它正在工作，您必须在分配值后检查 attr

[现场演示](http://jsfiddle.net/HyU89/)

```
$('#amount').attr( 'datamin','1000');

alert($('#amount').attr( 'datamin'));​ 
```

# python - Python：将时间格式转换为 unix_timeformat

> ID：11794117
> 
> 赞同：2
> 
> 时间：2012-08-03T10:42:54.777
> 
> 标签：python, time-format

我有这样的时间格式

```
t = "2012-03-20T08:31:00-05:00" 
```

我可以像这样使用 RegEx 提取时间内容。

```
p = re.compile("(\d{4})\-(\d\d)\-(\d\d)T(\d\d):(\d\d):(\d\d)[\-|+]\d\d:\d\d")
matches = p.findall(t) 
```

但我想知道是否有办法将此格式直接转换为 unix_timestamp 而不使用 RegEx ？是否有日历库或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:47:23.190

`datetime.datetime.strptime`是你的朋友 ：）

[http://docs.python.org/library/datetime.html#datetime.datetime.strptime](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:45:34.277

使用时间模块中的[strptime](http://docs.python.org/library/time.html#time.strptime)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:46:03.360

使用[`time.strptime`](http://docs.python.org/library/time.html#time.strptime)：

```
time.strptime(t, "%Y-%m-%dT%H:%M:%S-%Z") 
```

不幸的是，这似乎不适用于数字时区偏移。 [python-dateutil](http://labix.org/python-dateutil)应该能够处理您的格式：

```
dateutil.parser.parse(t) 
```

或者，您可以在数字偏移量之前拆分字符串：

```
t, offset_sign, offset = t[:-6], t[-6], t[-5:]
t = time.strptime(t, "%Y-%m-%dT%H:%M:%S")
offset = time.strptime(offset, "%H:%M") 
```

# django - 在 Django 中硬编码数据的最佳方法

> ID：11794118
> 
> 赞同：4
> 
> 时间：2012-08-03T10:42:58.963
> 
> 标签：django, django-models

我有一个模型 News，它有一个指向另一个模型 Category 的 ForeignKey。这些类别是用 id、name、slug 和其他一些参数定义的。我的类别将来永远不会改变，所以我想知道为什么要将它们存储在数据库中。有没有办法在代码中硬编码它们，比如使用选项或任何其他技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:50:56.087

是的，`choices`：将 ID+名称对存储为元组的元组，并在另一个结构中存储任何其他参数。

```
CATEGORIES = (
    (1, "Some category"),
    (2, "Another category"),
)

CATEGORIES_PARAMS = {
    1: {'slug': 'param_value'},
    2: {'slug': 'another_value'},
}

class News(models.Model):
    category = models.IntegerField("category", choices=CATEGORIES)
    ... 
```

那么您可以通过以下方式使用其他参数：

```
CATEGORIES_PARAMS[news_instance.category]['slug'] 
```

或创建简单的包装类：

```
class Category(object):
    def __init__(self, id):
        self.id = id

    def __getattr__(self, attr):
        return CATEGORIES_PARAMS[self.id][attr]

cat = Category(news_instance.category)
print(cat.slug) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:52:08.667

如果您打算使用 ForeignKey 在 News 和 Category 模型之间创建关系，则必须有一个模型 Category。现在您说您的类别永远不会改变，但是如果将来需要更改它们，您需要重新设计您的代码。要使用 django 的全套 ORM 功能，最好将其存储在数据库中并坚持设计。

# iphone - 带有照片的 Facebook 状态更新（不创建相册）

> ID：11794119
> 
> 赞同：2
> 
> 时间：2012-08-03T10:43:10.397
> 
> 标签：iphone, objective-c, ios, facebook, ios4

我在我的 iphone 应用程序中使用 Facebook SDK。我可以上传带有标题的照片。 *我按照这个例子： http: [//www.icodeblog.com/2011/03/28/facebook-sdk-posting-to-user-news-feed/](http://www.icodeblog.com/2011/03/28/facebook-sdk-posting-to-user-news-feed/)*

我就是这样做的

```
- (IBAction) btnPostPress:(id) sender {

//[self.txtCaption resignFirstResponder];

//we will release this object when it is finished posting
FBFeedPost *post = [[FBFeedPost alloc] initWithPhoto:[UIImage imageNamed:@"test.png"] name:@"testing @ work"];
[post setCaption:@"Test"];
[post publishPostWithDelegate:self];

IFNNotificationDisplay *display = [[IFNNotificationDisplay alloc] init];
display.type = NotificationDisplayTypeLoading;
display.tag = NOTIFICATION_DISPLAY_TAG;
[display setNotificationText:@"Posting Photo..."];
[display displayInView:self.view atCenter:CGPointMake(self.view.center.x, self.view.center.y-100.0) withInterval:0.0];
[display release]; 
```

}

但问题是，**当我上传超过 3,4 张照片时，它会自动使用我的应用程序名称创建一个相册。**然后照片上传到该相册（**不喜欢状态更新**）

但我希望**每张照片都单独张贴在墙上。例如：如果我上传 5 张照片，那么应该有 5 张特定照片的状态更新**。

# iphone - 在 iPhone 中显示不同的货币格式

> ID：11794121
> 
> 赞同：1
> 
> 时间：2012-08-03T10:43:18.717
> 
> 标签：iphone, ios, currency

我需要根据我手中的货币代码在表格视图中显示不同的货币符号。

是否可以使用相应货币的货币代码或 unicode 字符来显示这样的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:48:36.120

```
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier: @"en_US"];
NSString *dollar = [locale displayNameForKey:NSLocaleCurrencySymbol value:@"USD"];
NSLog(@"%@",dollar);
[locale release]; 
```

# ruby-on-rails - rails 3.1 after_create 用户创建钱包

> ID：11794128
> 
> 赞同：0
> 
> 时间：2012-08-03T10:43:55.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3

用户注册后需要为用户创建一个钱包

有用户模型：

```
 has_one :wallet, :dependent => :destroy
  after_create :create_wallet

  def create_wallet
    self.wallet.create(params[:wallet])
  end 
```

和钱包模型

```
 class Wallet < ActiveRecord::Base
  belongs_to :user
 end 
```

注册时，我收到了这个错误

```
Started POST "/users" for 127.0.0.1 at 2012-08-03 13:40:41 +0300
Creating scope :page. Overwriting existing method User.page.
  Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"7rgoJQwWFFbo4Wv6gHF2AzwQpCQwB+Pp/kaNRw/YW/k=", "user"=>{"email"=>"rmagnum2002@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign Up"}
Creating scope :page. Overwriting existing method Product.page.
   (0.2ms)  BEGIN
   (0.3ms)  SELECT 1 FROM `users` WHERE `users`.`email` = BINARY 'rmagnum2002@gmail.com' LIMIT 1
   (0.3ms)  SELECT 1 FROM `users` WHERE `users`.`auth_token` = 'S5R9LGhWVn6ut6Uh4h7KCA==' LIMIT 1
  SQL (0.2ms)  INSERT INTO `users` (`auth_token`, `created_at`, `email`, `password_digest`, `password_reset_sent_at`, `password_reset_token`, `updated_at`) VALUES ('S5R9LGhWVn6ut6Uh4h7KCA==', '2012-08-03 10:40:41', 'rmagnum2002@gmail.com', '$2a$10$KnwA.xrFY4z6eao7SmjHM.dq4ypmZZv3Rnk5LT9pg1jpiwxbl2YkK', NULL, NULL, '2012-08-03 10:40:41')
Creating scope :page. Overwriting existing method Wallet.page.
  Wallet Load (0.1ms)  SELECT `wallets`.* FROM `wallets` WHERE `wallets`.`user_id` = 4 LIMIT 1
   (27.2ms)  ROLLBACK
Completed 500 Internal Server Error in 158ms

NameError (undefined local variable or method `params' for #<User:0x9af5894>):
  app/models/user.rb:39:in `create_wallet'
  app/controllers/users_controller.rb:57:in `block in create'
  app/controllers/users_controller.rb:56:in `create'
  app/controllers/application_controller.rb:78:in `catch_not_found'
  app/middleware/flash_session_cookie_middleware.rb:17:in `call'

Rendered vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.3/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
Rendered vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
Rendered vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (3.1ms) 
```

我建立的代码是基于这个答案

[Rails 3：After_save 创建配置文件](https://stackoverflow.com/questions/4553239/rails-3-after-save-create-profile)

我做错了什么。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:18:55.917

该错误`undefined local variable or method 'params'`清楚地表明`params`在您的模型中不可用。

此外，在模型中使用参数也不是一个好主意。请参阅此问题[Rails How to pass params from controller to after_save inside model](https://stackoverflow.com/questions/4725185/rails-how-to-pass-params-from-controller-to-after-save-inside-model)。

此外，即使您进入`params`您的模型，`params[:wallet]`也将不可用，因为它不是从 Web 表单提交的。

```
# No 'wallet' key here.
Parameters: {"utf8"=>"✓", "authenticity_token"=>"7rgoJQwWFFbo4Wv6gHF2AzwQpCQwB+Pp/kaNRw/YW/k=", "user"=>{"email"=>"rmagnum2002@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign Up"} 
```

**更新**

无需创建钱包`params`

```
 has_one :wallet, :dependent => :destroy

  after_create do |user|
    user.create_wallet
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:19:31.380

您的用户模型的未定义局部变量或方法“参数”

# symfony - Propel 1.6 中可以有 test_schema.xml 吗？

> ID：11794131
> 
> 赞同：0
> 
> 时间：2012-08-03T10:44:12.707
> 
> 标签：symfony, propel

我正在使用 Symfony-2.0 和 Propel 1.6。

出于测试目的，我想要单独的架构文件。原因是使用我当前的模式无法加载转储的固定装置，因为过程因 PK 和自动增量而失败：

```
app/console propel:fixtures:load --env=test
Use connection named default in test environment.
No SQL fixtures found.
No XML fixtures found.

  [Propel] Exception                                                 

  Cannot insert a value for auto-increment primary key (article.ID) 
```

如果我可以定义`test_schema.xml`，我会从它生成没有`autoIncrement="true"`属性的模型，然后加载固定装置。

* * *

**如何强制 Propel`test_schema.xml`在测试环境中使用？**

*或者可能有另一种如何正确加载夹具的方法？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:23:21.070

您可以使用 propel propel.schema.dir 和 propel.default.schema.basename 构建属性来指定架构文件的位置及其名称：

```
# app/config/config_test.yml
propel:
    build_properties:
# The directory where Propel expects to find your `schema.xml` file.
        propel.schema.dir = //wherever
# The schema base name
        propel.default.schema.basename = schema 
```

# sql-server - 创建数据库时 xpstar90.dll 出错？

> ID：11794136
> 
> 赞同：2
> 
> 时间：2012-08-03T10:44:24.123
> 
> 标签：sql-server, sql-server-2008

我在 SQL Server Management Studio 2008 中创建数据库时遇到了这个问题。它显示 xpstar90.dll DLL 查找无法加载的错误（响应 126）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:26:05.977

此错误通常表明有问题的 dll 已损坏。您可以尝试用另一台运行相同版本 SQL Server 的计算机上的 dll 替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-30T12:21:42.400

我发现的另一个原因是用户无权访问包含 xpstar90.dll 的目录之一。就我而言，当管理员将管理工作室添加到我的 PC 时，她没有启用对 C:\program files\Microsoft Sql Server\MSSQL.1 的读取访问权限。在这种情况下，它产生了即使它在机器上也找不到xpstar90.dll的错误。

# php - 什么样的任务适合使用 Front Controller 的插件？

> ID：11794138
> 
> 赞同：1
> 
> 时间：2012-08-03T10:44:33.570
> 
> 标签：php, zend-framework

现在我正在学习 ZF 的前端控制器。我知道我们可以通过实现方法来使用前端控制器的插件扩展请求流`routerStartup`：、、、、、、。`routerShutdown``dispatchLoopStartup``preDispatch``postDispatch``dispatchLoopShutdown`

你如何使用前端控制器的插件？使用 Front Controller 的插件可以解决哪些现实世界的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:19:56.010

这里有一些例子：

*   访问控制（例如“管理”部分/模块）
*   根据模块设置布局
*   将公共变量分配给视图/布局
*   将旧 URL 重定向到新的等价物

# c# - 有效文件名的正则表达式

> ID：11794144
> 
> 赞同：54
> 
> 时间：2012-08-03T10:44:48.353
> 
> 标签：c#, regex

我已经在 StackOverflow 中解决了一些关于此问题的问题，但对我来说没有什么帮助。

我想限制用户提供一个只应包含字母数字字符、、、`-`和`_`空格`.`的文件名。

我不擅长正则表达式，到目前为止我想出了这个`^[a-zA-Z0-9.-_]$`。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-03T11:06:25.287

这是正确的表达方式：

```
string regex = @"^[\w\-. ]+$"; 
```

`\w`相当于`[0-9a-zA-Z_]`。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-08-03T10:52:46.123

要验证文件名，我建议使用 C# 提供的函数而不是正则表达式

```
if (filename.IndexOfAny(System.IO.Path.GetInvalidFileNameChars()) != -1)
{
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-01-03T14:55:02.083

While what the OP asks is close to what the currently accepted answer uses (`^[\w\-. ]+$`), there might be others seeing this question who has even more specific constraints.

First off, running on a non-US/GB machine, `\w` will allow a wide range of unwanted characters from foreign languages, according to the limitations of the OP.

Secondly, if the file extension is included in the name, this allows all sorts of weird looking, though valid, filenames like `file .txt` or `file...txt`.

Thirdly, if you're simply uploading the files to your file system, you might want a blacklist of files and/or extensions like these:

> web.config, hosts, .gitignore, httpd.conf, .htaccess

However, that is considerably out of scope for this question; it would require all sorts of info about the setup for good guidance on security issues. I thought I should raise the matter none the less.

So for a solution where the user can input the full file name, I would go with something like this:

```
^[a-zA-Z0-9](?:[a-zA-Z0-9 ._-]*[a-zA-Z0-9])?\.[a-zA-Z0-9_-]+$ 
```

It ensures that only the English alphabet is used, no beginning or trailing spaces, and ensures the use of a file extension with at least 1 in length and no whitespace.

I've tested this on [Regex101](https://www.regex101.com/r/EJcjiu/3), but for future reference, this was my "test-suite":

```
## THE BELOW SHOULD MATCH
web.config
httpd.conf
test.txt
1.1
my long file name.txt

## THE BELOW SHOULD NOT MATCH - THOUGH VALID
æøå.txt
hosts
.gitignore
.htaccess 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-08-10T13:55:38.260

In case someone else needs to validate filenames (including Windows reserved words and such), here's a full expression: `\A(?!(?:COM[0-9]|CON|LPT[0-9]|NUL|PRN|AUX|com[0-9]|con|lpt[0-9]|nul|prn|aux)|[\s\.])[^\\\/:*"?<>|]{1,254}\z`

Extended expression (don't allow filenames starting with 2 dots, don't allow filenames ending in dots or whitespace):

`\A(?!(?:COM[0-9]|CON|LPT[0-9]|NUL|PRN|AUX|com[0-9]|con|lpt[0-9]|nul|prn|aux)|\s|[\.]{2,})[^\\\/:*"?<>|]{1,254}(?<![\s\.])\z`

Edit: For the interested, here's a link to Windows file naming conventions: [https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-03T10:46:03.907

使用这个正则表达式`^[a-zA-Z0-9._ -]+$`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-08T15:36:35.793

这是工程师回答的一个小改动。

```
string regex = @"^[\w\- ]+[\w\-. ]*$" 
```

这将阻止`".txt"`无效。

麻烦的是，它确实阻止`"..txt"`了有效的

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-18T07:04:22.223

For full character set (Unicode) use `^[\p{L}0-9_\-.~]+$`

or perhaps `^[\p{L}\p{N}_\-.~]+$` would be more accurate if we are talking about Unicode.

I added a '~' simply because I have some files using that character.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-01T10:19:46.240

I've just created this. It prevents two dots and dot at end and beginning. It doesn't allow any two dots though.

```
^([a-zA-Z0-9_]+)\.(?!\.)([a-zA-Z0-9]{1,5})(?<!\.)$ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-15T18:44:05.803

I may be saying something stupid here, but it seems to me that these answers aren't correct. Firstly, are we talking Linux or Windows here (or another OS)?

Secondly, in Windows it is (I believe) perfectly legitimate to include a "$" in a filename, not to mention Unicode in general. It certainly seems possible.

I tried to get a definitive source on this... and ending up at the [Wikip Filename page](https://en.wikipedia.org/wiki/Filename): in particular the section "Reserved characters and words" seems relevant: and these are, clearly, a list of things which you are NOT allowed to put in.

I'm in the Java world. And I naturally assumed that Apache Commons would have something like `validateFilename`, maybe in `FilenameUtils`... but it appears not (if it had done, this would still be potentially useful to C# programmers, as the code is usually pretty easy to understand, and could therefore be translated). I did do an experiment, though, using the method `normalize`: to my disappointment it allowed perfectly invalid characters (?, etc.) to "pass".

The part of the Wikip Filename page referenced above shows that this question depends on the OS you're using... but it should be possible to concoct some simple regex for Linux and Windows at least.

Then I found a Java way (at least):

```
Path path = java.nio.file.FileSystems.getDefault().getPath( 'bobb??::mouse.blip' ); 
```

output:

> java.nio.file.InvalidPathException: Illegal char at index 4: bobb??::mouse.blip

... presumably different `FileSystem` objects will have different validation rules

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-02-03T15:22:32.497

Copied from @Engineer for future reference as the dot was not escaped (as it should) in the most voted answer.

This is the correct expression:

```
string regex = @"^[\w\-\. ]+$"; 
```

# c# - 在 C# 中将 int 转换为 byte 作为 HEX

> ID：11794146
> 
> 赞同：2
> 
> 时间：2012-08-03T10:44:50.503
> 
> 标签：c#, hex, int, byte

我需要通过串口向设备发送一个十六进制字符串，我现在这样做：

```
byte[] c = new byte[3];
c[0] = 0x57;
c[1] = 0x30;
ComPort.Write(c,0,c.Length ); 
```

现在我需要将 int 的值转换为 30`c[1] = 0x30`或 34 的 int 值`c[1] = 0x34`。我希望你明白我的意思。

那么我该如何处理呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T10:49:27.680

这种格式称为[*二进制编码的十进制*](http://en.wikipedia.org/wiki/Binary-coded_decimal)。对于两位数，整数除以 10 并乘以 16，然后将除以 10 的余数加回：

```
int num = 45;
int bcdNum = 16*(num/10)+(num%10); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T11:57:44.133

另一种方法可能是

```
c[1] = Convert.ToByte(num.ToString(), 16); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T09:52:39.983

假设 int Data=2821; 是通过 COM 端口发送：

```
c[0]= Convert.ToByte(data & 0x00FF); 

c[0]= Convert.ToByte(data & 0xFF00) >> 8);

ComPort.Write(c,0,c.Length ); 
```

# ajax - 使用ajax将值数组从视图传递到控制器

> ID：11794155
> 
> 赞同：1
> 
> 时间：2012-08-03T10:45:23.957
> 
> 标签：ajax, asp.net-mvc-3, visual-studio-2010

我的视图页面中有一个表单。它包含 5 个文本框，一个搜索按钮。当用户在文本框中输入值（输入所有字段不是强制性的）并单击搜索按钮时，我必须将值存储在数组并将其传递给控制器​​，根据搜索结果，我必须显示那些搜索记录的结果。

我能够将搜索到的值存储在一个数组中，现在我想如何将此数组传递给控制器​​以及如何在控制器中访问这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:14:32.933

正如 Jose 所说，您的请求可能如下所示：

```
 $("#submit").click(function () {
        var searchData = new Array();
        $(".search-input").each(function () {
            searchData.push($(this).attr('value'));
        });

        $.ajax({
            type: "POST",
            url: "/Home/Index",
            data: {"searchData"  : searchData},
            success: function (data) {
                // do something on success
            },
            traditional: true,
            dataType: "json"
        });
        return false;
    }); 
```

您的控制器操作可能是：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Index([Bind(Prefix="searchData")] List<string> searchData)
    {
        return Index();
    } 
```

你的表单必须有这样的标记：

```
<form id="myform">
       <input type="text" class='search-input' />
       <input type="text" class='search-input' />
       <input type="text" class='search-input' />
       <input type="text" class='search-input' />
       <input type="submit" id="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:05:30.723

使用阿贾克斯。如果 jQuery 是一个选项，你可以写这样的东西

```
$(form).submit(function()
{
    var ;
    $.ajax({
        type: "POST",
        url: "/Controller/Action",
        data: JSON.stringify(_yourArrayObject),
        success: function(data){
            alert(data.Result);
        },
        dataType: "json"
    });
}) 
```

# php - Wordpress - 自定义 the_excerpt() 不起作用

> ID：11794157
> 
> 赞同：2
> 
> 时间：2012-08-03T10:45:29.577
> 
> 标签：php, wordpress

我已将以下代码添加到我的主题中的 functions.php 脚本中：

```
function custom_excerpt_length( $length ) {
    return 15;
}
add_filter( 'excerpt_length', 'custom_excerpt_length', 999 );

function new_excerpt_more( $more ) {
    return '...';
}
add_filter('excerpt_more', 'new_excerpt_more'); 
```

如本页所建议： http: [//codex.wordpress.org/Template_Tags/the_excerpt](http://codex.wordpress.org/Template_Tags/the_excerpt)

但摘录的长度仍然是默认的 55 个单词，并且末尾的字符串仍然是`[...]`而不是`...`.

WordPress 版本是 3.4.1

我用来显示摘录的代码很简单：

```
the_excerpt(); 
```

有没有人对如何修复它有任何想法，以便我的 functions.php 的添加工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T07:54:18.540

使用此代码限制内容

```
<?php query_posts('cat=ID'.'&showposts=NO. OF POST') ?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
<?php the_post_thumbnail(); ?>
<p><?php echo substr(get_the_excerpt(), 0,65).' [...]'; ?></p>
<a href="<?php the_permalink(); ?>">Read More...</a>

<?php endwhile; ?>
<?php wp_reset_query(); ?>
<?php endif;?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:25:25.183

通过使用以下方式，我设法达到了预期的结果：

```
$excerpt = get_the_excerpt();
$excerpt = preg_replace('/\s+?(\S+)?$/', '', substr($excerpt, 0, 71));
echo '<div class="blog-posts-grid-box-excerpt">' . $excerpt . '...</div>'; 
```

希望这对发现这个问题的人有所帮助。

# symfony - Symfony 2：过滤 x 对多关系

> ID：11794163
> 
> 赞同：2
> 
> 时间：2012-08-03T10:45:59.153
> 
> 标签：symfony, doctrine

我有两个实体代表用户 ( `User`) 和友谊请求 ( `FriendshipRequest`)。User 和 FriendshipRequest 之间存在 oneToMany 关系，因此 Doctrine 创建了一个`getFriendshipRequests()`在 User 类中调用的方法。这没关系，但是 FriendshipRequest 有一个称为 status 的属性，所以我希望 User 类可以过滤与其关联的友谊请求，以关注他们的状态。我已经阅读了 Doctrine 文档，我发现了这一点：

> 在本机您不能过滤 2.0 和 2.1 中的关联。您应该使用 DQL 查询来查询过滤后的实体集。

据此，我想我应该创建一个 FriendshipRequest 存储库并创建一个名为“findByStatusAndUser”（或类似的东西）的方法，但我认为这是一个糟糕的解决方案。

我想在 User 实体中有一个方法，例如`getPendingStatusRequests()`. 这可能吗？如果不是，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-07T10:08:00.260

从 Doctrine 2.3 开始，您可以使用[match 和 Criteria](http://docs.doctrine-project.org/en/latest/reference/working-with-associations.html#filtering-collections)。
然后你可以`getPendingStatusRequests()`像你想要的那样在用户实体中使用。对于您的示例，代码如下所示：

```
public function getPendingStatusRequests()
{
    $criteria = Criteria::create(); //don't forget to use Doctrine\Common\Collections\Criteria;
    $criteria->where(Criteria::expr()->eq('status', 1));

    return $this->friendshipRequests->matching($criteria);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:12:40.860

我认为 FriendshipRequest 存储库中的“getPendingRequestsForUser($user)”方法应该是一个很好的解决方案。在此方法中，您只需要创建一个适当的 DQL。

这是一个很好的解决方案，因为所有逻辑都应该移到存储库中，使实体尽可能小而干净。

UPD：另外，您可以使用 findBy 方法，如此[处](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/working-with-objects.html#by-simple-conditions)所述，例如：

```
$pendingRequests = $em->getRepository('MyBundle:FriendshipRequest')->findBy(
    array('user' => $user->getId(), 'status' => 1)
); 
```

但对我来说，首选第一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:45:00.620

您当然可以将 getPendingStatusRequests() 添加到用户，然后让它循环遍历所有友谊请求，并仅返回具有适当状态的那些。

唯一潜在的问题是所有的友谊请求都会被加载，包括那些你不需要的。由您决定这是否是一个真正的问题。可能是，一旦处理了友谊请求，就会将其删除，因此用户在任何给定时间都不会有很多请求。

如果您确实想避免加载所有请求，请进行查询并在连接子句上使用 WITH 表达式。就像是：

```
$qb->leftJoin('user.friendshipRequests','request', 
        Expr\Join::WITH, $qb->expr()->eq('request.status', $qb->expr()->literal('Pending'))); 
```

而且由于您使用的是 S2，因此我不会在存储库中胡闹。只需创建一个名为 UserManager 的服务，注入实体管理器，然后给它一个名为 loadUserWithPendingFriendshipRequests 的方法。

# c++ - std::find 继承对象 c++

> ID：11794177
> 
> 赞同：4
> 
> 时间：2012-08-03T10:46:27.290
> 
> 标签：c++, inheritance, std, stdvector

1.所以我有：

```
Class A;

Class B : public A;

Class C : public B; 
```

2.和B类型的指针向量：

```
vector<B*> vec; 
```

3.然后：

```
C* ptr = new C();

vec.push_back(ptr); 
```

所以问题是，这样使用 std::find 可靠吗？

```
std::find(vec.begin(), vec.end(), prt); 
```

另外，使用 this-> 指针进行搜索可以吗？

```
std::find(vec.begin(), vec.end(), this); //inside of a type C object 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:49:14.027

是的，这是安全的，因为`==`在类型层次结构中指向对象的指针之间存在明确定义的比较 ()。即使指针的实际值在转换为基类类型后可能会有所不同（通常是多重继承的情况），但运行时需要对此进行调整，以便这些指针之间的比较仍然产生正确的结果。

# c# - SQLCLR 和 Microsoft.SqlServer.Management.Smo.Server..ctor()

> ID：11794179
> 
> 赞同：1
> 
> 时间：2012-08-03T10:46:30.680
> 
> 标签：c#, sql-server-2008, sqlclr

我用 c# 编写的 clr 存储过程遇到了很大的问题。我已经成功安装了程序集，但是当我调用存储过程时，出现以下错误：-

```
Msg 6522, Level 16, State 1, Procedure RestoreDatabaseClr, Line 0

A .NET Framework error occurred during execution of user-defined routine or     aggregate "RestoreDatabaseClr": 

System.Exception: This functionality is disabled in the SQLCLR. It is recommended that you execute from your client application.
System.Exception: 
at Microsoft.SqlServer.Management.Common.ConnectionManager..ctor()
at Microsoft.SqlServer.Management.Common.ServerConnection..ctor()
at Microsoft.SqlServer.Management.Smo.ExecutionManager..ctor(String name)
at Microsoft.SqlServer.Management.Smo.Server..ctor()
at DBRestoreClr.StoredProcedures.RestoreDatabaseClr(String backupFile, String dbName, String dataFiles, String logFiles) 
```

.

这是我试图在 sproc 中执行的 c# 代码：-

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.IO;
using Microsoft.SqlServer.Management.Common;
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Server;

namespace DBRestoreClr
{
    public partial class StoredProcedures
    {
        [SqlProcedure()]
        public static int RestoreDatabaseClr(string backupFile, string dbName, string dataFiles, string logFiles)
        {
             var sqlServer = new Server();
        }
    }
} 
```

我正在使用以下执行

```
EXEC @ReturnValue RestoreDatabaseClr 'C:\Workspace\DEV\DBRestoreDatabase\tests\Clr\restore.bak', 
                            'restore',
                            'C:\2008\MSSQL10.MSSQLSERVER\MSSQL\DATA\restore',
                            'C:\2008\MSSQL10.MSSQLSERVER\MSSQL\DATA\restore\logs'; 
```

任何人有任何想法为什么它不工作？

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:23:43.453

因为“此功能在 SQLCLR 中被禁用”。SMO 框架检测到您在 SQL CLR 中并拒绝工作。这样做的原因可能是微软让这一切正常工作的成本很高，这是一个正当的理由。

正如消息所暗示的那样，您为什么不从客户端程序中恢复数据库？

# sql - 获取前一天未更新的记录

> ID：11794182
> 
> 赞同：0
> 
> 时间：2012-08-03T10:46:42.520
> 
> 标签：sql, sql-server, tsql

我需要获取前一天未更新的项目列表。

我目前有...

```
 SELECT     dbo.aboProducts.asin, dbo.aboProducts.sku
 FROM       dbo.aboProducts INNER JOIN
            dbo.LowestPrices ON dbo.aboProducts.asin = dbo.LowestPrices.productAsin
 WHERE     (dbo.LowestPrices.priceDate <= DATEADD(day, - 1, GETDATE())) 
```

然而，这没有返回任何内容。如果我将 <= 更改为 >= 我会得到过去 24 小时的结果。我只需要退还任何未更新的项目，并保留已更新的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:49:28.690

这看起来很好，假设每个产品在 LowestPrices 中至少有一个条目。你真的有没有更新的项目吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:53:39.657

试试这个：

```
SELECT     aboProducts.asin, aboProducts.sku
FROM       dbo.aboProducts 
where aboProducts.asin 
not in(
     select aboProducts.asin 
     FROM       dbo.aboProducts 
     INNER JOIN
                dbo.LowestPrices 
     ON aboProducts.asin = LowestPrices.productAsin
     WHERE     (LowestPrices.priceDate >= DATEADD(day, - 1, GETDATE()))
 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:42:11.613

试试这个：

```
 SELECT     dbo.aboProducts.asin, dbo.aboProducts.sku
 FROM       dbo.aboProducts INNER JOIN
            dbo.LowestPrices ON dbo.aboProducts.asin = dbo.LowestPrices.productAsin
 WHERE     (dbo.LowestPrices.priceDate != DATEADD(day, - 1, GETDATE())) 
```

# c# - 在 where 子句中的 Linq to SQL 有效电子邮件地址

> ID：11794184
> 
> 赞同：0
> 
> 时间：2012-08-03T10:46:56.623
> 
> 标签：c#, linq-to-sql

我想从我的联系人表中返回联系人记录，但仅限于联系人电子邮件地址有效的地方。所以类似于以下内容：

```
var contacts = (from cont in db.Contacts
                        where cont.Accounts_CustomerID == accountId
                        && ValidEmail(cont.EmailAddress)
                        select new ContactLight
                        {
                            AccountId = cont.Accounts_CustomerID,
                            FirstName = cont.Firstname,
                            LastName = cont.Lastname,
                            EmailAddress = cont.EmailAddress
                        });

private static bool ValidEmail(string email)
{
    if(email == "")
        return false;
    else
        return new System.Text.RegularExpressions.Regex(@"^[\w-\.]+@([\w-]+\.)+[\w-]{2,6}$").IsMatch(email);
} 
```

我收到“方法 'Boolean ValidEmail(System.String)' 不支持对 SQL 的转换。” 所以我假设无法翻译带有正则表达式的方法。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:50:16.737

将您的电子邮件验证移至客户端（Linq-to-Objects）。

```
var contacts = db.Contacts
    .Where(cont.Accounts_CustomerID == accountId)
    .Select(cont => new ContactLight
                    {
                        AccountId = cont.Accounts_CustomerID,
                        FirstName = cont.Firstname,
                        LastName = cont.Lastname,
                        EmailAddress = cont.EmailAddress
                    })
    .AsEnumerable() //this forces request to client side
    .Where(e => ValidEmail(e.EmailAddress)); 
```

# c# - 在 WP7.5 中强制应用通过 wi-fi 连接使用 3G 连接

> ID：11794194
> 
> 赞同：3
> 
> 时间：2012-08-03T10:47:25.357
> 
> 标签：c#, windows-phone-7, wifi, windows-phone-7.1, 3g

我有一个应用程序，一旦用户启动应用程序并接受 EULA，注册过程就会开始，并且要完成注册过程以获取 user_id，应用程序必须访问 3 个服务器。第一个服务器必须通过 3G 进行连接即使 wi-fi 可用，用户也会收到一条消息以禁用 Wi-Fi 并仅连接到 3g 网络以继续注册。所有代码都已到位，应用程序也可以正常工作。但是新的要求是忽略 wi-fi，只使用 3G，这样用户就不会被需要更改手机设置的消息所打扰。

我浏览了许多论坛帖子，但没有任何帮助。我找到[了这篇文章](https://stackoverflow.com/questions/9075785/forcing-windows-phone-to-use-wifi-connection)，并认为我可以根据需要参考它使用。但没有帮助。

然后我发现了这个：-

```
ConnectState.Disconnected 
```

但我不知道我是否可以使用它来禁用 wi-fi，直到发出第一个请求，然后再启用 wi-fi。

请帮忙。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:23:15.037

现在，为什么我没有将上一篇文章标记为未回答是，我找到了一种方法来强制我的应用程序通过 Wi-Fi 使用 3G 网络连接，最好的部分是，它只会发生在应用程序级别而不是设备级别. 当然，用户会收到通知，出于注册目的，我们将使用 3G 网络。这是代码。

在我的 httpconnection 类 post() 方法中。在发起请求之前正在执行以下操作。

```
 HttpWebRequest myHttpWebRequest1 = (HttpWebRequest)WebRequest.Create(uri);
//the network preference depends on the requestID
            if (requestId == DataManager.REQ_REGISTRATION)
            {
                myHttpWebRequest1.SetNetworkPreference(NetworkSelectionCharacteristics.Cellular);
            }
            else
            {
                myHttpWebRequest1.SetNetworkPreference(NetworkSelectionCharacteristics.NonCellular);
            } 
```

就如此容易。在 3G 不是强制性但首选的其他情况下（不是我的要求），应用程序尝试通过 3G 连接，但如果失败，它将自动（无需用户干预）通过可用网络连接。

感谢史蒂夫分享的知识。我希望这对其他有类似要求的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:58:08.087

简短的回答：Windows Phone 不可能。作为一个原因，应用程序不应该能够做用户​​没有明确允许的事情。当有 Wi-Fi 时，大多数时候不需要超过 3g 的连接。这些数据计划价格很高，用户在启用 Wi-Fi 时不会期望应用程序使用它。所以他必须自己禁用 Wi-Fi 才能完全控制。

只是好奇：为什么通过 3g 连接对于这个特定的服务器如此重要？

* * *

**更新**：正如在另一个答案中所指出的，带有 Windows Phone 7.1 SDK 的 HttpWebRequest 类的新方法 SetNetworkPreference() 出现了。所以，确实有可能，对不起我的错误信息。

# git - 克隆的 repo，它的分支和 git checkout

> ID：11794205
> 
> 赞同：1
> 
> 时间：2012-08-03T10:48:00.327
> 
> 标签：git

我从 github 克隆了一个带有 2 个分支的仓库：

```
git clone https://github.com/user/repo
cd repo 
```

当我这样做时`git branch`，它只显示主分支。然后我做了一个`git branch -a`它显示所有分支。

```
master
remotes/origin/HEAD
remotes/origin/master
remotes/origin/develop 
```

然后我做了一个`git checkout develop`：

```
Branch develop set up to track remote branch develop from origin.
Switched to a new branch 'develop' 
```

然后`git checkout master`回到`master`分支。

为什么`git checkout develop`不同于`git checkout origin/develop`（它说我处于分离的头部状态）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:52:36.853

你应该这样做：

```
git checkout --track -b develop origin/develop
# or
git checkout -t origin/develop 
```

From [`git checkout`](http://git-scm.com/docs/git-checkout)：如果您没有指定起点，它将从当前开始`HEAD`（`master`在您的情况下，这意味着您的“开发”分支不是从您认为应该的位置开始）。

在 --track 选项上，请参阅“ [Git：什么是跟踪分支？](https://stackoverflow.com/questions/4693588/git-what-is-a-tracking-branch/4697054#4697054) ”。

如果您想在本地仓库中查看/跟踪我们所有的远程分支，请参阅“[将所有远程 git 分支跟踪为本地分支](https://stackoverflow.com/a/6300386/6309)”。

您的起点是 master，因为您的 git 分支返回了当前分支：master。
如果你`git checkout`只是在那里进行开发，它会从当前分支开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:00:38.010

当您说 git checkout develop （未指定远程“ `origin`”）时，它正在尝试签出名为`develop`. 但是，您的 gitconfig 已设置，因此如果找不到具有该名称的本地分支，它将自动查找`origin/develop`. 它发现并签出了一个名为`develop`本地的新分支并自动将其设置为跟踪远程分支。

当您 时`git checkout origin/develop`，您正在检查上游`develop`分支的缓存副本。您无法编辑这些分支。这就是为什么 git 告诉你你处于分离的头部状态。

如果要进行更改，则需要提交到本地`develop`分支，然后执行`git push`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:05:23.583

您尚未创建分支“开发”。为此，您需要创建一个跟随 'origin/develop' 分支的分支：

```
git checkout -b develop origin/develop 
```

新分支“develop”与远程分支“origin/develop”分离。git 故意这样做：解耦允许分支独立变化。出于许多原因，这是可取的，但我认为最有用的两个是：

1.  您可以进行一系列独立于 github 分支中所做更改的更改。

2.  Changes made in the github repository are not automatically incorporated into your branch, unless you want them to be. If, for example, 'origin/develop' has a history of being particularly unstable, you may want to control when you incorporate new changes into your local branch 'develop'.

# php - 将 Wordpress 站点从 Linux 移动到 Windows 会引发错误

> ID：11794206
> 
> 赞同：0
> 
> 时间：2012-08-03T10:48:02.793
> 
> 标签：php, wordpress, xampp

我被要求将某人的博客从 Linux 服务器移到 Windows 2008 机器上。我在新盒子上使用了 Xampp。当我尝试访问博客时，出现以下错误：

```
Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\htdocs\newblogBlog\httpdocs\wp-settings.php on line 472

Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\htdocs\newblogBlog\httpdocs\wp-settings.php on line 487

Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\htdocs\newblogBlog\httpdocs\wp-settings.php on line 494

Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\htdocs\newblogBlog\httpdocs\wp-settings.php on line 530

Strict Standards: Declaration of Walker_Page::start_lvl() should be compatible with Walker::start_lvl(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 594

Strict Standards: Declaration of Walker_Page::end_lvl() should be compatible with Walker::end_lvl(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 594

Strict Standards: Declaration of Walker_Page::start_el() should be compatible with Walker::start_el(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 594

Strict Standards: Declaration of Walker_Page::end_el() should be compatible with Walker::end_el(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 594

Strict Standards: Declaration of Walker_PageDropdown::start_el() should be compatible with Walker::start_el(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 611

Strict Standards: Declaration of Walker_Category::start_lvl() should be compatible with Walker::start_lvl(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 705

Strict Standards: Declaration of Walker_Category::end_lvl() should be compatible with Walker::end_lvl(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 705

Strict Standards: Declaration of Walker_Category::start_el() should be compatible with Walker::start_el(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 705

Strict Standards: Declaration of Walker_Category::end_el() should be compatible with Walker::end_el(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 705

Strict Standards: Declaration of Walker_CategoryDropdown::start_el() should be compatible with Walker::start_el(&$output) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\classes.php on line 728

Strict Standards: Redefining already defined constructor for class wpdb in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\wp-db.php on line 306

Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\cache.php on line 103

Strict Standards: Redefining already defined constructor for class WP_Object_Cache in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\cache.php on line 425

Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\query.php on line 21

Deprecated: Assigning the return value of new by reference is deprecated in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\theme.php on line 623

Strict Standards: Redefining already defined constructor for class WP_Dependencies in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\class.wp-dependencies.php on line 15

Warning: Creating default object from empty value in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\update.php on line 39

Warning: Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\class.wp-dependencies.php:15) in C:\xampp\htdocs\newblogBlog\httpdocs\wp-includes\pluggable.php on line 770 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:53:03.883

我认为您的 linux 服务器中的 php.ini 正在停用错误报告。

对于严格的标准，您可以通过`E_STRICT`从 php.ini 文件中的选项`error_reporting`中删除来隐藏它们（但修复它们可能会更好）。

对于其他问题，我确实建议您修复它们，尤其是警告。

还要检查 linux 中的 PHP 版本是否与 windows 中的相同，从一个版本迁移到另一个版本可能会导致这样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:54:32.167

检查服务器和 xammp-box 上使用的 php 版本。您可以通过创建包含单行的单个文件来做到这一点

```
<?php phpinfo(); ?> 
```

这为您提供了使用过的版本。如果您可以在新旧系统上使用相同的版本，您可以获得更少的警告，也许......

如果仍然存在警告，您可以使用 php.ini 中的正确条目将它们过滤掉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:02:52.423

建议生产系统不要显示错误，有人可能会使用这些信息来破解您的系统...您可以更改 Yazmat 提到的显示错误的详细级别，或者关闭php.ini[中的错误显示，](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)例如这个：

```
display_errors = 0 
```

# c# - 在项目自定义 ContainerCmdletProvider 上设置位置

> ID：11794207
> 
> 赞同：2
> 
> 时间：2012-08-03T10:48:08.650
> 
> 标签：c#, powershell, provider

我正在尝试在 c# 中创建一个自定义 powershell 提供程序，它允许您管理项目（在文件夹类型目录中）用户应该能够 cd 到 --> 文件/文件夹并能够查看子项目等并对其进行操作。我的问题是我总是可以前往根目录但是一旦我尝试将我的位置设置为 myAcme:/any_path_here_of_valid_item 它就会出错，如下所示。这很奇怪，因为我可以在这条路上得到物品。我是否在这里误解了某些内容，或者无法将您的位置设置为该项目的位置（我正在尝试将我的位置设置为该项目以获取其子项目）

```
PS my****:\> cd myAcme:/
PS myAcme:\> get-item /files/folders/****
<Removed so you don' get hit by a wall of text but this displays the items info fine>
PS myAcme:\> cd myAcme:/files/folders/****
Set-Location : Cannot find path 'myAcme:/files/folders/****' because it does not exist.
At line:1 char:3
+ cd <<<<  myAcme:/files/folders/****
    + CategoryInfo          : ObjectNotFound: (myAcme:/files/folders/****:String) [Set-Location], ItemNotFoundException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.SetLocationCommand 
```

我现在不会在这里显示任何代码，因为我很确定我很可能错过了理解 containercmdletprovider 的概念

编辑当我执行命令 cd myAcme:/files/folders/ *** *时，我忘记在调试器中添加 ItemExists 正在返回 true

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:15:43.397

`ContainerCmdletProvider`仅适用于没有子文件夹的简单提供程序。此类提供程序的示例是PowerShell 中的 和 驱动`function`器`env`。`variable`此类提供程序不支持`set-location`, `get-location`(cd) 或嵌套路径的概念。一切都应该在根中，并且必须是叶节点（例如文件。）

如果要使用树结构，则必须继承自`NavigationCmdletProvider`. 如果您使用我的脚本提供程序框架，您可能会发现更容易开发，该框架允许您使用常规 PowerShell 脚本非常快速地对提供程序进行原型设计。[在http://psprovider.codeplex.com/](http://psprovider.codeplex.com/)上有一些示例和简单文档以及下载

祝你好运！

# android - 从服务检查Android通知？

> ID：11794208
> 
> 赞同：0
> 
> 时间：2012-08-03T10:48:09.343
> 
> 标签：android, service, notifications

我目前正在编写一个应用程序，它具有启动服务。该服务只是在一段时间后弹出一个通知，并在给定的时间段内用新信息更新它。目前不需要任何进一步的电池节省，我只希望更新序列正常工作。

我遇到了一个问题。创建启动 BroadcastReceiver 然后启动我的服务。它，我通过 Timer 和 TimerTask 完成工作。但是正如我所看到的，没有简单的方法来检查通知是否被删除，因此不要尝试更新它，而是重新创建它。

我想做的事：

```
private Notification n;

NotifTask extends TimerTask {
    public void run() {
        if(n.exists){
           // Update notification
        }else{
           n = Notification.Builder(context).[customize it].build();
        }
    }
} 
```

并在服务的 onStart 中设置一个计时器，每 10 秒运行一次此任务。现在，我的问题是：有没有什么方法可以轻松地完成“n.exists”部分，而无需任何意图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:00:22.573

如果您发布通知并且该通知已经存在，它将使用新信息进行更新。如果它不存在，它将被创建。我认为你不需要做任何特别的事情来获得你想要的行为。

从[NotificationManager.notify() 的文档中](http://developer.android.com/reference/android/app/NotificationManager.html)：

> 发布要在状态栏中显示的通知。如果您的应用程序已经发布了具有相同 id 的通知并且尚未取消，则它将被更新的信息替换。

# sql - 翻译sql子查询加入

> ID：11794209
> 
> 赞同：0
> 
> 时间：2012-08-03T10:48:11.923
> 
> 标签：sql, subquery

我有一个很长的查询，我通过使用连接来缩短它，结果查询如下，但它仍然有子查询。如何将此子查询转换为加入

```
SELECT 
    pav.post_id as Id, img.path as Path, attr.name as Name, pc.title as Category, pav.value_text as Valuess, post.created_on as createdOn 
FROM 
    postings post inner join post_attributes_values pav on post.post_id = pav.post_id
    left outer join images img on post.post_id = img.post_id and img.sequence='1' 
    inner join attributes attr on pav.attr_id = attr.attr_id 
    inner join categories_parent_categories pc on attr.cat_id = pc.category_id 
where 
    pav.post_id in  (select distinct post_id from post_attributes_values where value_text = 'SFX') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:31:09.160

在阅读了您对 Matei 回答的最后一条评论后，我意识到您实际上想要其中一个属性值为“SFX”的*所有帖子。*如果我理解正确，您唯一的选择是添加派生表并通过 post_id 加入：

```
SELECT pav.post_id     AS Id,
       img.path        AS Path,
       attr.name       AS Name,
       pc.title        AS Category,
       pav.value_text  AS Valuess,
       post.created_on AS createdOn
FROM   postings post
       INNER JOIN post_attributes_values pav
               ON post.post_id = pav.post_id
       LEFT OUTER JOIN images img
                    ON post.post_id = img.post_id
                       AND img.sequence = '1'
       INNER JOIN attributes attr
               ON pav.attr_id = attr.attr_id
       INNER JOIN categories_parent_categories pc
               ON attr.cat_id = pc.category_id
       INNER JOIN
       (
             SELECT DISTINCT post_id
             FROM   post_attributes_values
             WHERE  value_text = 'SFX'
       ) sfxPosts
               ON pav.post_id = sfxPosts.post_id 
```

（由于[即时 sql 格式化程序，查询重新格式化](http://www.dpriver.com/pp/sqlformat.htm)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:53:14.803

也许这个？请测试一下

```
SELECT 
    pav.post_id as Id, img.path as Path, attr.name as Name, pc.title as Category, pav.value_text as Valuess, post.created_on as createdOn 
FROM 
    postings post 
  inner join post_attributes_values pav on post.post_id = pav.post_id AND pav.value_text = 'SFX'
  left outer join images img on post.post_id = img.post_id and img.sequence='1' 
  inner join attributes attr on pav.attr_id = attr.attr_id 
  inner join categories_parent_categories pc on attr.cat_id = pc.category_id 
```

# wordpress - 如何在 wordpress 管理面板中创建新页面

> ID：11794210
> 
> 赞同：0
> 
> 时间：2012-08-03T10:48:21.777
> 
> 标签：wordpress

我正在尝试在 wordpress 管理面板上创建一个单独的菜单部分，其中将包含三个页面。这些页面的行为与普通的 wordpress 页面完全一样，我只想在管理面板中有一个单独的菜单部分。我可以使用 wp_editor() 在表单中显示编辑器。我的问题是如何从编辑器中获取内容以及如何保存到数据库中的 wp_post 中？这是我已经想出的一段代码：

```
 <?php
            $content = '';
            wp_editor('test', 'mydescription', array('textarea_name' => 'my_description', 'tinymce' => true));
        ?>

        <p><div class="submit"><input type="submit" name="save_front_content_options" value="<?php _e('Save Changes', 'save_options') ?>"  style="font-weight:bold;" /></div></p>
        <input type="hidden" name="action" value="save" />
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:51:17.400

如果我理解正确，您正在寻找设置 API：

*   [设置 API 教程。](http://wp.tutsplus.com/tutorials/the-complete-guide-to-the-wordpress-settings-api-part-2-sections-fields-and-settings/)
*   [设置 API 文档。](http://codex.wordpress.org/Settings_API)

# php - 来自php中多维数组的3d波前对象坐标数据

> ID：11794212
> 
> 赞同：1
> 
> 时间：2012-08-03T10:48:22.153
> 
> 标签：php, arrays, algorithm, 3d, wavefront

嗨，我做了一个简单的脚本（算法）来用 php 解析波前目标文件。我可以提取每个顶点的 3d 坐标并将它们分配到一个数组中，我有每个顶点的数组 $y、$x、$z。我的目标是围绕主坐标创建一个顶点立方体，所以我将每个轴的负坐标和正坐标转换为绝对值，然后将它们除以分离距离。

例如：

```
 $separator =  02.0000  ;
   $z_minus   = -23.3344  ;
   $z_plus    =  13.3445  ;
   $z_length  =  abs($z_minus) + abs($z_plus);
   $number_of_vertex_z =  $z_length/$separator; 
```

相同的过程为我提供了每个轴的 $number_of_vertex 。从中我可以使用循环来创建新点的 x、y、z 坐标，以在我的 3d 形状周围形成一个点的立方体。我的最终目标是只保留原始 3d obj 02.0000 以内的点，这是一种三角测量形式，我想就如何有效地做到这一点提供一些建议。

首先形成一个立方体然后提取端点对我来说很重要，因为我希望结果对象是原始对象的细分版本，由类似于用于 3d 打印的 gcode 的相同大小的矩形面制成，但在我的情况下，我的对象将是由多个小方脸组成。

谢谢，我希望我的目标足够明确。

# android - 把小图标从left_Top tp left_bottom

> ID：11794220
> 
> 赞同：0
> 
> 时间：2012-08-03T10:48:35.373
> 
> 标签：android, android-layout, layout

你看图片，left_Top有一个小图标我想放在left_bottom，怎么做。我的xml：

![](../Images/af63d7a192784edfdc03a856707712a1.png)

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:padding="1dip">

<ImageView
    android:id="@+id/imageViewThumb"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="fitXY" >
</ImageView>
<ImageView
    android:id="@+id/imageTick"
    android:layout_marginBottom="2dip"
    android:layout_width="20dp"
    android:layout_height="20dp"
    android:src="@drawable/sina" >
</ImageView>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:55:48.687

利用`Relative layout`

```
 <?xml version="1.0" encoding="utf-8"?> 
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:layout_gravity="center"
     android:padding="1dip">

   <ImageView
      android:id="@+id/imageViewThumb"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:scaleType="fitXY" >
   </ImageView>

    <ImageView
      android:id="@+id/imageTick"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_alignParentRight="true"
      android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:52:56.293

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center">

<ImageView
    android:id="@+id/imageViewThumb"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="fitXY" >
</ImageView>
<ImageView
    android:id="@+id/imageTick"
    android:layout_gravity="bottom|left"
    android:layout_width="20dp"
    android:layout_height="20dp"
    android:src="@drawable/sina" >
</ImageView> 
```

```
add android:layout_gravity="bottom|left" 
```

# java - Spring 控制器的 JSON 类型错误响应处理程序

> ID：11794221
> 
> 赞同：1
> 
> 时间：2012-08-03T10:48:39.033
> 
> 标签：java, json, spring

我有这个异常处理程序，它工作得很好：

```
@ExceptionHandler(DataNotExistException.class)
@ResponseStatus(value = HttpStatus.BAD_REQUEST, reason = "Data not exist")
public void handleDataNotExistException() {

} 
```

我需要把这个异常处理程序放到浏览器中不会显示的异常。虽然它有效，但它显示了“通用”Jetty Browser 错误代码。我需要一个 JSON 类型的响应类型。

我尝试返回一个类类型错误，但异常显示在浏览器中。我正在考虑使用地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:07:56.180

如果您的请求包含标头**Accept=application/json**则使用注释您的方法`@ResponseBody`并返回将转换为 json 的对象。从 中删除原因`@ResponseStatus`。

# asp.net - 将 webgrid 导出为 pdf asp mvc razor

> ID：11794225
> 
> 赞同：4
> 
> 时间：2012-08-03T10:48:51.040
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, pdf, razor

如何将 webgrid 导出到 mvc .net Web 应用程序中的 .pdf 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T17:15:44.860

这里有几种方法：

*   您可以使用前面回复中提到的[RazorPDF](http://www.nyveldt.com/blog/post/Introducing-RazorPDF)
*   您可以使用[Rotativa](https://github.com/webgio/Rotativa)。运行速度非常快，但您需要权限才能在完全信任下运行服务器，因为 PDF 转换发生在可执行文件上
*   您可以使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)，这将是最难/最繁琐的实现，但同时您可以根据需要灵活地编写 PDF 文档

希望有帮助-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T16:16:23.367

如需完整参考，请遵循 [如何在 MVC4 应用程序中将 Webgrid 导出为 PDF](http://www.dotnetawesome.com/2014/08/how-to-export-webgrid-to-pdf-in-mvc4.html)

创建指向您的视图页面的操作链接

```
<div>
     Export Data : @Html.ActionLink("Export to PDF","GETPdf","Webgrid")
</div> 
```

然后创建一个 MVC Action 用于将 webgrid 数据导出到 pdf 文件。这里 iTextSharp.dll 用于导出 pdf 文件。

```
public FileStreamResult GETPdf()
    {
        List<CustomerInfo> all = new List<CustomerInfo>();
        using (MyDatabaseEntities dc = new MyDatabaseEntities())
        {
            all = dc.CustomerInfoes.ToList();
        }

        WebGrid grid = new WebGrid(source: all, canPage: false, canSort: false);
        string gridHtml = grid.GetHtml(
                columns: grid.Columns(
                        grid.Column("CustomerID", "Customer ID"),
                        grid.Column("CustomerName", "Customer Name"),
                        grid.Column("Address", "Address"),
                        grid.Column("City", "City"),
                        grid.Column("PostalCode", "Postal Code")
                    )
                ).ToString();

        string exportData = String.Format("<html><head>{0}</head><body>{1}</body></html>", "<style>table{ border-spacing: 10px; border-collapse: separate; }</style>", gridHtml);
        var bytes = System.Text.Encoding.UTF8.GetBytes(exportData);
        using (var input = new MemoryStream(bytes))
        {
            var output = new MemoryStream();
            var document = new iTextSharp.text.Document(PageSize.A4, 50, 50, 50, 50);
            var writer = PdfWriter.GetInstance(document, output);
            writer.CloseStream = false;
            document.Open();

            var xmlWorker = iTextSharp.tool.xml.XMLWorkerHelper.GetInstance();
            xmlWorker.ParseXHtml(writer, document, input, System.Text.Encoding.UTF8);
            document.Close();
            output.Position = 0;
            return new FileStreamResult(output, "application/pdf");
        } 
```

# sql - 带有子查询的 Oracle 选择

> ID：11794242
> 
> 赞同：7
> 
> 时间：2012-08-03T10:49:54.060
> 
> 标签：sql, oracle, subquery

你能帮我下一个oracle sql查询吗？

```
SELECT "NEWS"."NEWSID" as ID,
       "NEWS"."SLUG",
       "NEWS_TRANSLATION".*, 
       (SELECT FILENAME FROM NEWS_MEDIA WHERE NEWSID = ID AND rownum <= 1 ORDER BY POSITION ASC) as FILENAME
FROM "NEWS" 
INNER JOIN "NEWS_TRANSLATION" ON NEWS.NEWSID = NEWS_TRANSLATION.NEWSID 
WHERE (NEWS.PUBLISH = 1) AND (NEWS_TRANSLATION.LANG = :lang) 
ORDER BY "NEWS"."NEWSID" DESC; 
```

当我执行此查询时出现错误

```
ORA-00907: missing right parenthesis
00907\. 00000 -  "missing right parenthesis"
*Cause:    
*Action:
Error at Line: 4 Column: 74 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T17:56:51.473

试试这个：

```
SELECT "NEWS"."NEWSID" as ID,
   "NEWS"."SLUG",
   "NEWS_TRANSLATION".*, 
   (SELECT * FROM (SELECT FILENAME FROM NEWS_MEDIA WHERE NEWSID = ID ORDER BY POSITION ASC) WHERE rownum = 1) as FILENAME
FROM "NEWS" 
INNER JOIN "NEWS_TRANSLATION" ON NEWS.NEWSID = NEWS_TRANSLATION.NEWSID 
WHERE (NEWS.PUBLISH = 1) AND (NEWS_TRANSLATION.LANG = :lang) 
ORDER BY "NEWS"."NEWSID" DESC; 
```

你什么时候一起使用“order by”和“rownum”，你需要先对它们排序并查找第一条记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:08:11.547

这是工作*代码*：

```
SELECT "NEWS"."NEWSID" as ID,
   "NEWS"."SLUG",
   "NEWS_TRANSLATION".*, 
   (SELECT FILENAME FROM NEWS_MEDIA WHERE NEWSID = ID AND rownum <= 1 ) as FILENAME
FROM "NEWS" 
INNER JOIN "NEWS_TRANSLATION" ON NEWS.NEWSID = NEWS_TRANSLATION.NEWSID 
WHERE (NEWS.PUBLISH = 1) AND (NEWS_TRANSLATION.LANG = :lang) 
ORDER BY "NEWS"."NEWSID" DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T12:19:07.563

请尝试删除子查询中的 order by 子句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T13:17:35.847

试试这个：

```
SELECT "NEWS"."NEWSID" AS ID, "NEWS"."SLUG", "NEWS_TRANSLATION".*,
       (SELECT FILENAME
          FROM NEWS_MEDIA
         WHERE NEWSID = "NEWS"."NEWSID" AND ROWNUM <= 1)
           AS FILENAME
  FROM     "NEWS"
       INNER JOIN
           "NEWS_TRANSLATION"
       ON NEWS.NEWSID = NEWS_TRANSLATION.NEWSID
 WHERE (NEWS.PUBLISH = 1) AND (NEWS_TRANSLATION.LANG = :LANG)
ORDER BY "NEWS"."NEWSID" DESC 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-07-10T06:08:04.563

```
SELECT STUDENT_NAME, STUDENT_ALIAS_NAME
FROM school
WHERE STUDENT_NAME IN (
        SELECT STUDENT_NAME
        FROM school
        WHERE STUDENT_DEPARMENT= 0
        ); 
```

# actionscript-3 - FlashBuilder 4.0 和 FlashCS5 有什么区别？

> ID：11794243
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:49:56.340
> 
> 标签：actionscript-3

我使用舞台的getObjectsUnderPoint 的方法来获取一些东西。

当单击一个按钮时，我会得到按钮的内部状态的 displayObject，当迭代它的父属性时，我遇到了一个非常奇怪的问题

这个按钮有四个状态（Shape DisplayObject），在Flash IDE中，我跟踪状态的父级，它输出SimpleButton，没错！！但是在flashBuilder中，输出“null”..但是它的舞台属性不为null..谁知道原因？

我FlashIDE的版本是FlashCS5，FlashBuilder的sdk是4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:58:38.213

我知道原因，阅读 Adob​​e 的 SimpleButton 文档

从 Player 版本 11.2 / AIR 版本 3.2 开始，SimpleButton 对象的状态的 parent 属性将在查询时报告 null。

# eclipse - 使用 SWT Bot eclipse 检查项目树中的文件图标

> ID：11794250
> 
> 赞同：0
> 
> 时间：2012-08-03T10:50:21.863
> 
> 标签：eclipse, unit-testing, eclipse-plugin, junit4, swtbot

我正在使用 swt bot 测试一个 eclipse 插件。但我找不到在项目资源管理器中检查树中文件图标的方法。如何做到这一点

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:40:01.893

用这个怎么样？

```
 tree.display.asyncExec(new Runnable() {

        @Override
        public void run() {
            Image i = treeItem.widget.getImage();   
        }
    }); 
```

# sql - 在我的查询中指定日期不会产生任何结果/记录

> ID：11794254
> 
> 赞同：2
> 
> 时间：2012-08-03T10:50:28.627
> 
> 标签：sql, sql-server

我想针对两个日期查询我的表并检索其中的记录。

我这样声明我的变量；

```
DECLARE @StartDate datetime;
DECLARE @EndDate datetime; 
```

并像这样设置我的变量；

```
SET @StartDate = 2012-08-01;
SET @EndDate = 2012-08-02; 
```

我的 WHERE 子句；

```
WHERE Date BETWEEN  @StartDate AND @EndDate 
```

执行查询时没有显示记录，我的错误是什么？我尝试在日期上添加时间，但这也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:51:31.900

改为这样做

```
SET @StartDate = '2012-08-01'; SET @EndDate = '2012-08-02'; 
```

或更好

```
SET @StartDate = Convert(datetime,'2012-08-01',120); 
SET @EndDate = Convert(datetime,'2012-08-02',120); 
```

这将返回 8 月 1 日的任何数据，或任何标记为 8 月 2 日午夜的数据。它不会返回任何标记为例如：8 月 2 日上午 9 点的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:53:20.050

```
DECLARE @StartDate datetime, @EndDate datetime
SELECT @StartDate = '20120801', @EndDate = '20120802'

SELECT * from TableName
WHER Date between @StartDate and @EndDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:55:03.803

试过了

```
WHERE Date >= @StartDate AND Date <= @EndDate 
```

# android - 退出应用程序

> ID：11794255
> 
> 赞同：0
> 
> 时间：2012-08-03T10:50:30.393
> 
> 标签：android, exit

在我的应用程序中，我想在单击后退按钮时退出应用程序。当第一次进入应用程序时，从该屏幕单击返回意味着它正在退出。但是如果我进入下一个屏幕并返回该屏幕并单击返回意味着转到上一个屏幕不退出。在此先感谢..

我的代码：

```
public boolean onKeyDown(int keyCode, KeyEvent event) 
         {      

            if (keyCode == KeyEvent.KEYCODE_BACK)
            {           
                finish();
                java.lang.System.exit(0);

            }
            return super.onKeyDown(keyCode, event);
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:58:48.003

我建议不要实现这样的功能。后退按钮在大多数应用程序中的工作方式相同，用户知道后退按钮最终总是会将他们返回主屏幕感到安全。也许 TabView 可能是在两个活动之间切换的更好方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:18:41.287

one better way to do that is by starting second activity using

```
startActivityForResult(); 
```

then, when the user click back button check the result by overriding

```
onActivityResult(){} 
```

and finish the first activity too.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:59:19.323

如果您希望在从启动器活动中按下后退按钮时始终退出应用程序，您可以使用以下命令将其设置为单个任务，以便应用程序将在按下后退出。

在 android 清单文件中：`android:launchMode="singleTask"` 使用 startActivity() 指向此活动时，`intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T18:07:49.880

在您的 Activity 上调用 moveTaskToBack(true) （它不会杀死您的应用程序，而是将其从屏幕上删除）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-21T12:48:50.760

你应该使用：

> ```
> if (keyCode == KeyEvent.KEYCODE_BACK)
> {           
>       finishAffinity();
> } 
> ```

# javascript - 香草砌体 + JQuery 翻转

> ID：11794256
> 
> 赞同：0
> 
> 时间：2012-08-03T10:50:30.590
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, jquery-masonry, flip

我正在使用 Vanilla Masonry 运行带有块墙的 RoR 应用程序，并且可以使用 JQuery Flip 翻转这堵墙中的每个块！插入。问题是块每一侧的内容长度可能不同，所以我希望在每次翻转动作后重新加载墙壁位置，以避免重叠。

我的代码单向工作，当我第一次翻转块时，但是当我恢复翻转时，我遇到了重叠。

我在加载时初始化 Masonry，这是我的 Flipping-wall.js 代码：

```
$(document).ready(function(){
    $('.sponsorFlip').bind("click",function(){
            var elem = $(this);
    var wall = new Masonry( document.getElementById('container'), {
                    gutterWidth:5,
                    isFitWidth: true
                  });

    if(elem.data('flipped'))
    {
        elem.revertFlip();
        elem.data('flipped',false);
                    wall.reload();  
    }
    else
    {
        elem.flip({
            direction:'lr',
            speed: 350,
            onBefore: function(){
                elem.html(elem.siblings('.sponsorData').html());
            }
        });
        elem.data('flipped',true);
        wall.reload();
    }
});

}); 
```

这里是三个步骤：

![在此处输入图像描述](../Images/4a6135ffc05644616d15065bbb142261.png)

![在此处输入图像描述](../Images/e5c42da43c2d860d542707b485946676.png)

![第三步](../Images/2ad39f851107f3483a75b455c7d0a0ca.png)

拜托，你能告诉我我做错了什么。多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:06:24.980

据我所知（在我的本地主机上测试），翻转完成后，您必须引用已经初始化的 Masonry 对象（而不是创建另一个实例）并重新加载它。

它可能看起来像这样（把它代替你的 onload 函数）。

```
$(window).load(function() {
    // initialize Masonry - later on you will refer to this wall variable
    var wall = new Masonry( document.getElementById('container'), {gutterWidth:5, isFitWidth: true});

    $('.box').click(function() {
        var elem = $(this);

        // data('flipped') is a flag we set when we flip the element:

        if(elem.data('flipped'))
        {
        // If the element has already been flipped, use the revertFlip method
        // defined by the plug-in to revert to the default state automatically:

        elem.revertFlip();
        // Unsetting the flag:
        elem.data('flipped',false);    

        }
        else
        {
        // Using the flip method defined by the plugin:

        elem.flip({
            direction:'lr',
            speed: 350,
            onBefore: function(){
                // Insert the contents of the .sponsorData div (hidden
                // from view with display:none) into the clicked
                // .sponsorFlip div before the flipping animation starts:

                elem.html(elem.siblings('.box').html());
            }
        });

        // Setting the flag:
        elem.data('flipped',true);

        }
            // reload already existing Masonry object
        wall.reload();
    })
}) 
```

PS 使用 jQuery Masonry 可以为您省去一些麻烦，因为它可以嵌入到头部。

# html - Html 议程数据：表格还是“div”？

> ID：11794268
> 
> 赞同：0
> 
> 时间：2012-08-03T10:51:26.510
> 
> 标签：html, tabular

我正在尝试建立一个 html 每周议程（只是为了好玩）。起初我没有使用表格来做这件事。

但我发现了一个例子，其中表格用于数独（[http://www.w3.org/TR/html5/the-table-element.html#the-table-element](http://www.w3.org/TR/html5/the-table-element.html#the-table-element)）。

所以我想知道：表格是每周议程的最佳语义方法吗？有可能持续多天的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:13:50.893

是的。表格应该用于表格数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T11:39:05.970

我认为使用 div 和一般的 css 框模型会更好，因为在议程中，您不仅需要表格演示文稿，还需要更复杂的结构来表达，例如，安排在多个小时或几天内的事件。**当你有像数独一样的固定**结构时，应该使用表格。

# android - 调用 setCurrentItem(0) 时不会触发 onPageSelected

> ID：11794269
> 
> 赞同：68
> 
> 时间：2012-08-03T10:51:29.733
> 
> 标签：android, android-viewpager

我有一个带有 ViewPager 的 Activity，它显示了一堆图片。当它启动时，ViewPager 的位置是根据用户在前一个 Activity 中选择的内容设置的。类似于画廊。

我希望每次选择新页面时都会调用 onPageSelected，即首次打开 Activity 或用户滑动到新页面时。

我这样设置起点：

```
 mPager.setCurrentItem(index); 
```

一切正常，除非调用 setCurrentItem 并将索引设置为 0，因为这不会触发 onPageSelected。

```
mPager.setOnPageChangeListener(new OnPageChangeListener() {
  @Override
  public void onPageSelected(int index) {
    Log.d(TAG, "onPageSelected " + index);
  }
  ...
} 
```

所以我的问题是；这是一个错误，如果是，我该怎么办？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-11-29T19:10:13.613

到目前为止，我发现的最干净的解决方案是引用您在 ViewPager 上设置的 onPageChangeListener（因为我认为没有 ViewPager.getOnPageChangeListener() 方法），然后在设置 ViewPager 的适配器之后， 称呼：

```
onPageChangeListener.onPageSelected(viewPager.getCurrentItem()); 
```

但是，当前索引处的页面片段还没有被实例化（至少如果你使用 FragmentStatePagerAdapter），所以你可能需要将它包装在一个可运行的文件中，ala：

```
viewPager.post(new Runnable(){
@Override
    public void run() {
        onPageChangeListener.onPageSelected(viewPager.getCurrentItem());
    }
}); 
```

此外，如果在 onPageSelected 处理程序中需要对片段的引用，则必须自己进行。我为我的 FragmentStatePagerAdapter 使用了一个抽象基类，它覆盖了实例化和销毁方法，并从 SparseArray 添加/删除了片段。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-08-22T09:43:47.387

好的，所以我无法弄清楚这是否是错误（或功能）。但我想我会分享解决问题的可能方法。

在 Activity 的方法中编写您希望执行的功能，然后在 onPageSelected 方法中调用它。

```
mPager.setOnPageChangeListener(new OnPageChangeListener() {
    @Override
    public void onPageSelected(int index) {
        myOnPageSelectedLogic(index);
    }
    ...
} 
```

然后在打电话之后

```
setCurrentItem(index); 
```

在Activity中，添加如下if语句

```
if(index == 0) {
    myOnPageSelectedLogic(0);
} 
```

它不是超级漂亮，但我希望它可以帮助某人:)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-07-17T08:18:12.793

其实我认为这是一个BUG。我检查了 ViewPager 的源代码，发现 onPageSelected 的唯一**触发器**：

```
if (dispatchSelected && mOnPageChangeListener != null) {
            mOnPageChangeListener.onPageSelected(item);
        } 
```

上面，变量**dispatchSelected**由代码确定：

```
final boolean dispatchSelected = mCurItem != item; 
//item is what you passed to setCurrentItem(item) 
```

并且，变量**mCurItem**被定义和初始化为：

```
private int mCurItem; // Index of currently displayed page. 
```

因此**mCurItem**默认为 0。调用 setCurrentItem(0) 时，**dispatchSelected**将为 false，因此不会调度 onPageSelected()。

现在我们应该明白为什么调用 setCurrentItem(0) 是一个问题，而 setCurrentItem(1, or 2, 3...) 不是。

**如何解决这个问题呢：**

1.  将 ViewPager 的代码复制到自己的项目中并修复：

    ```
    from 
    final boolean dispatchSelected = mCurItem != item; //the old line
    to
    final boolean dispatchSelected = mCurItem != item || mFirstLayout; //the new line 
    ```

    然后使用您自己的 ViewPager。

2.  由于您有意识地调用了 setCurrentItem(0) 并参考了 OnPageChangedListener，因此请自行调度 onPageSelected()。

3.  听楼下怎么说...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-22T22:59:20.380

以下解决方案似乎对我有用。即，当第一次加载 viewpager 以及来自用户滚动或 setCurrentItem(x) 调用的所有后续选择时，我在位置 0 处获得回调。我没有观察到任何不良行为。

```
viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

                if (positionOffsetPixels == 0) {
                 //Do something on selected page at position
                }

            }

            @Override
            public void onPageSelected(int position) {}

            @Override
            public void onPageScrollStateChanged(int state) {}
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:47:58.510

`onPageSelected`不会为首先打开的页面触发。对于这种情况，我手动执行所有需要的操作。另外，我认为调用 to`onPageSelected(0)`也应该有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-16T09:14:29.833

`ViewPager`当位置从 0 更改为 0 时，您可以自行扩展和调用 Listener

```
public class BetterViewPager extends ViewPager {

    public BetterViewPager(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        // we some the listner
        protected OnPageChangeListener listener;

        @Override
        public void setOnPageChangeListener(OnPageChangeListener listener) {
            super.setOnPageChangeListener(listener);
            this.listener = listener;
        }

        @Override
        public void setCurrentItem(int item) {
            // when you pass set current item to 0,
            // the listener won't be called so we call it on our own
            boolean invokeMeLater = false;

            if(super.getCurrentItem() == 0 && item == 0)
                invokeMeLater = true;

            super.setCurrentItem(item);

            if(invokeMeLater && listener != null)
                listener.onPageSelected(0);
        }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-16T13:39:56.283

```
public class PageChangeListener implements ViewPager.OnPageChangeListener {
    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

    }

    @Override
    public void onPageSelected(int position) {
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        if (state == ViewPager.SCROLL_STATE_IDLE && getCurrentItem() == 0) {
         //this indicate viewpager finish scroll and page at position 0 is selected.
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-04T16:07:15.050

最简单的解决方案是使用函数，例如

```
 viewpager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {

        @Override
        public void onPageScrollStateChanged(int state) {}

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {}

        @Override
        public void onPageSelected(int position) {
            onPage(position);
        }
    });

    // call first time
    onPage(0); 

    private void onPage(int position) {
        //...
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-15T00:10:32.127

If the ViewPager is in a fragment, in the onViewCreated method, call mPager.setOnPageChangeListener(this)

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2015-02-04T10:25:32.357

如果你不关心屏幕动画试试

```
pager.setCurrentItem(1);
pager.setCurrentItem(0); 
```

# android - 自定义标签栏 android

> ID：11794273
> 
> 赞同：5
> 
> 时间：2012-08-03T10:51:34.733
> 
> 标签：android, android-layout

我想为我的 android 应用程序制作一个自定义标签栏，比如 pic（iphone 上的标签栏）

![在此处输入图像描述](../Images/a70749d0d707fcecb9b65f46793d715e.png)

当我从选项卡传递到其他选项卡时，它会制作动画

请帮助

# android - 如何优化 SQLiteOpenHelper 的错误处理

> ID：11794274
> 
> 赞同：0
> 
> 时间：2012-08-03T10:51:39.940
> 
> 标签：android, sqliteopenhelper

是否有可能让错误处理更清晰、更易读？我的版本似乎有点笨重：

```
public synchronized void doSomeTrans(...) throws Exception {
    Exception ex = null;
    SQLiteDatabase db = null;
    boolean bTrans = false;

    try {
        db = getWritableDatabase();

        db.beginTransaction();
        bTrans = true;

        db.execSQL(...);
        db.execSQL(...);

        db.setTransactionSuccessful();
    }
    catch (Exception ex1) {
        ex = ex1;
    }

    if (db != null) {
        if (bTrans != false)
            db.endTransaction();

        db.close();
    }

    if (ex != null)
        throw ex;
} 
```

此外，在我的版本中，我没有围绕 endTransaction 方法进行任何错误处理，如果此方法抛出异常，我的数据库仍然存在打开。我认为这不好，但不确定在 try/catch 块上添加新内容是这种情况下的最佳解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:10:31.923

如果不出意外，您应该使用`finally`. 无论如何，您都在进一步抛出异常，所以根本不要费心去捕捉它：

```
try {
    db = getWritableDatabase();
    ...
} finally {
    if (db != null) {
        if (bTrans != false)
            db.endTransaction();
        db.close();
    }
} 
```

另一件事是您不应该为一个操作打开数据库并再次关闭它，因为那是*SLOW*。您应该`db`至少在`Activity`or的整个生命周期内都可以使用`Service`。它摆脱了外部`getWritableDatabase()`/`close`对，因此您可以：

```
db.beginTransaction();
try {
    db.execSQL(...);
    db.execSQL(...);

    db.setTransactionSuccessful();
} finally {
    db.endTransaction();
} 
```

请注意，这并没有涉及到`endTransaction`if `beginTransaction`throws，这很容易发生。我不确定Android包装器，因为我通常使用C API，但是C API不会等待锁定数据库，而是当数据库已经被另一个事务锁定时立即失败。

显然 RAII 或上下文管理器会更短，但不幸的是 Java 两者都没有（更新：Java 8 确实有`try(variable)`，但 Android 坚持使用 Java 6；然而，即使是该目标，它也应该在 Kotlin 中得到支持）。

# ruby-on-rails - 如何在启动 rinari 控制台之前获取此 shell 脚本？

> ID：11794276
> 
> 赞同：0
> 
> 时间：2012-08-03T10:51:47.243
> 
> 标签：ruby-on-rails, emacs, rinari

在我的项目中，我们有一个为一些环境变量设置默认值的 shell 脚本。当我尝试运行时`rinari-console`，我收到一个错误，因为该脚本尚未获得来源。有没有办法确保 rinari 来源它，以便在 rails 控制台启动时，所有变量都具有所需的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:15:44.193

好吧，我一直在思考这个问题。我提出了两种可能的解决方案：

# 通过包装器在 Emacs 外部

这个解决方案有点笨拙，但它应该可以工作。

您可以创建一个包装脚本，例如“emacs-wrapper.sh”：

```
#!/bin/sh
set -a
. YOUR-SCRIPT.sh
emacs 
```

如果您启动 ./emacs-wrapper.sh，将获取 YOUR-SCRIPT.sh，然后启动 Emacs。通过这种方式，Emacs 将可以看到相同的环境。在我的机器上测试这种方法，我能够*(getenv "var")* YOUR-SCRIPT.sh 中定义的所有变量

# 更好：在 Emcas 中通过 shell-command

这是 IMO 一个更好的解决方案，因为它完全在 Emacs 中运行。调用 shell-command-to-string 以获取您的 YOUR-SCRIPT.sh。最后，它还会转储该进程的环境。随后将其添加到 Emacs 自己的进程环境中：

```
;; defadvice is optional, you could also just call source-script directly
(defadvice rinari-console (before init-environment activate)
   (source-script "/PATH/TO/YOUR-SCRIPT.sh"))

(defun source-script (script)
   (let ((env (extract-environment script)))
       (mapc 'import-environment-variable (split-string env "\n"))))

(defun extract-environment (script)
   (shell-command-to-string (format "set -a; . %s > /dev/null 2>&1; env" script)))

(defun import-environment-variable (variable-assignment)
   (when (not (or (null variable-assignment) (string= "" variable-assignment)))
      (let* ((key-value-pair (split-string variable-assignment "="))
             (key (car key-value-pair))
             (value (cadr key-value-pair)))
        (setenv key value)))) 
```

我也在我的机器上验证了这种方法。在 YOUR-SCRIPT 中定义的所有变量也在 Emacs 中定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:52:17.110

我设法用包装器做你想做的事。假设您在`~/test`. Rinari 将尝试`irb`通过执行命令来启动`~/test/script/console`。我创建了一个名为`~/test/script/console.sh`：

```
#!/bin/sh

. ~/test/script/env.sh
~/test/script/console 
```

包装器获取包含环境变量的脚本，然后执行常规命令。

该文件`~/test/script/env.sh`包含：

```
export TEST=test 
```

现在要使用该包装器，请`rinari-mode`使用前缀参数调用并将 a`C-u M-x rinari-mode`添加`.sh`到建议命令的末尾。`TEST`将设置环境变量。

然后，您可以创建一个`.sh`自动添加的宏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T07:52:29.827

我不使用 rinari，所以可能有更好的方法来做到这一点，但原则上你可以在运行实际的 rinari-console 命令之前运行“YOUR-SCRIPT.sh”。

```
(defadvice rinari-console (before run-my-script activate)
  (shell-command "YOUR-SCRIPT.sh")) 
```

另见：[http ://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-06T09:36:53.053

好吧，如果您想获取脚本，是否可以执行与 tkf 建议的非常相似的操作：

```
(defadvice rinari-console (before run-my-script activate)
  (shell-command ". YOUR-SCRIPT.sh")) 
```

# c++ - 用于立方体贴图表面上的光泽镜面反射的 GLSL 着色器

> ID：11794277
> 
> 赞同：19
> 
> 时间：2012-08-03T10:51:52.220
> 
> 标签：c++, opengl, graphics, glsl

我为环境立方体贴图写了一个着色器

***顶点着色器***

```
varying vec3 Normal;
varying vec3 EyeDir;
uniform samplerCube cubeMap;

void main()
{
        gl_Position = gl_ModelViewProjectionMatrix*gl_Vertex;
        Normal = gl_NormalMatrix * gl_Normal;
        EyeDir = vec3(gl_ModelViewMatrix * gl_Vertex);
} 
```

***片段着色器***

```
varying vec3 Normal;
varying vec3 EyeDir;

uniform samplerCube cubeMap;

 void main(void)
 {
    vec3 reflectedDirection = normalize(reflect(EyeDir, normalize(Normal)));
    reflectedDirection.y = -reflectedDirection.y;
    vec4 fragColor = textureCube(cubeMap, reflectedDirection);
    gl_FragColor = fragColor;
} 
```

这是经典的结果： ![http://braintrekking.files.wordpress.com/2012/07/glsl_cubemapreflection.png?w=604&h=466](../Images/613b753bba9f13434535d0544ed628a0.png) 现在我想添加一些镜面白色高光以获得更有光泽的效果，例如珍珠母。怎么可能添加这种亮点？就像这张图片中的那个我应该将镜面反射分量相加 `gl_FragColor`吗？第一次尝试是在顶点着色器中计算镜面反射

```
vec3 s = normalize(vec3(gl_LightSource[0].position - EyeDir));
vec3 v = normalize(EyeDir);
vec3 r = reflect( s, Normal );
vec3 ambient = vec3(gl_LightSource[0].ambient*gl_FrontMaterial.ambient);

float sDotN = max( dot(s,Normal), 0.0 );
vec3 diffuse = vec3(gl_LightSource[0].diffuse * gl_FrontMaterial.diffuse * sDotN);
vec3 spec = vec3(0.0);
if( sDotN > 0.0 )
    spec = gl_LightSource[0].specular * gl_FrontMaterial.specular * pow( max( dot(r,v), 2.0 ), gl_FrontMaterial.shininess );

LightIntensity = 0*ambient + 0*diffuse +  spec; 
```

并将其乘以`gl_FragColor`但我获得的效果并不令人信服。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-03T16:23:22.550

这是一个如何**做到**这一点的示例：

珍珠母效果**OFF** :珍珠
![在此处输入图像描述](../Images/eff5eccf6cb954f7063397cafd3f5830.png)
母效果**ON** :
![在此处输入图像描述](../Images/39187d89676cffc1124510fccf1fe588.png)

**顶点着色器：**

```
uniform vec3 fvEyePosition;

varying vec3 ViewDirection;
varying vec3 Normal;

void main( void )
{
   gl_Position = ftransform();
   vec4 fvObjectPosition = gl_ModelViewMatrix * gl_Vertex;

   ViewDirection  = fvEyePosition - fvObjectPosition.xyz;
   Normal         = gl_NormalMatrix * gl_Normal;
} 
```

**片段着色器：**

```
uniform samplerCube cubeMap;

varying vec3 ViewDirection;
varying vec3 Normal;

const float mother_pearl_brightness = 1.5;

#define MOTHER_PEARL

void main( void )
{
   vec3  fvNormal         = normalize(Normal);
   vec3  fvViewDirection  = normalize(ViewDirection);
   vec3  fvReflection     = normalize(reflect(fvViewDirection, fvNormal)); 

#ifdef MOTHER_PEARL
   float view_dot_normal = max(dot(fvNormal, fvViewDirection), 0.0);
   float view_dot_normal_inverse = 1.0 - view_dot_normal;

   gl_FragColor = textureCube(cubeMap, fvReflection) * view_dot_normal;
   gl_FragColor.r += mother_pearl_brightness * textureCube(cubeMap, fvReflection + vec3(0.1, 0.0, 0.0) * view_dot_normal_inverse) * (1.0 - view_dot_normal);
   gl_FragColor.g += mother_pearl_brightness * textureCube(cubeMap, fvReflection + vec3(0.0, 0.1, 0.0) * view_dot_normal_inverse) * (1.0 - view_dot_normal);
   gl_FragColor.b += mother_pearl_brightness * textureCube(cubeMap, fvReflection + vec3(0.0, 0.0, 0.1) * view_dot_normal_inverse) * (1.0 - view_dot_normal);
#else
   gl_FragColor = textureCube(cubeMap, fvReflection);
#endif
} 
```

当然，计算 R、G 和 B 分量的方式不是很正确，但我发布此代码是为了向您展示方法，而不是解决方案。

* * *

# 编辑：

这是彩虹色着色器承诺的“正确”版本：

**顶点着色器：**

```
varying vec3 v_view_direction;
varying vec3 v_normal;
varying vec2 v_texture_coordinate;

void main(void)
{
   gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
   v_texture_coordinate = gl_MultiTexCoord0.xy;
   v_view_direction = -gl_ModelViewMatrix[3].xyz;
   v_normal = gl_NormalMatrix * gl_Normal;
} 
```

**片段着色器：**

```
uniform samplerCube texture_reflection;
uniform sampler2D texture_iridescence;
uniform sampler2D texture_noise;

varying vec3 v_view_direction;
varying vec3 v_normal;
varying vec2 v_texture_coordinate;

const float noise_strength = 0.5;

void main(void)
{
   vec3 n_normal = normalize(v_normal);
   vec3 n_wiew_direction = normalize(v_view_direction);
   vec3 n_reflection = normalize(reflect(n_wiew_direction, n_normal)); 

   vec3 noise_vector = (texture2D(texture_noise, v_texture_coordinate).xyz - vec3(0.5)) * noise_strength;

   float inverse_dot_view = 1.0 - max(dot(normalize(n_normal + noise_vector), n_wiew_direction), 0.0);
   vec3 lookup_table_color = texture2D(texture_iridescence, vec2(inverse_dot_view, 0.0)).rgb;

   gl_FragColor.rgb = textureCube(texture_reflection, n_reflection).rgb * lookup_table_color * 2.5;
   gl_FragColor.a = 1.0;
} 
```

## 结果

无虹彩效果：
![在此处输入图像描述](../Images/549403afe27bced4684933a047de8422.png)

虹彩效果（查找纹理 1）：
![在此处输入图像描述](../Images/de2f52cacdb6e4d8970e447355145ace.png)

虹彩效果（查找纹理 2）：
![在此处输入图像描述](../Images/420236813795f175ee7d459532dae9d2.png)

彩虹色查找纹理 2： ![在此处输入图像描述](../Images/b0a776fd06c052609ea771276db46ca8.png)

噪声纹理：
![在此处输入图像描述](../Images/268100da60fa335ddbd91cf1d98c685a.png)

**备注：**
彩虹色查找纹理也可以是一维纹理，这样会更节省内存。
另外，计算噪声向量的方式实际上是胡说八道。正确的解决方案是使用凹凸贴图。但是，嘿，它有效！:D

# c++ - 如何使用 objdump 在高度优化的目标文件中交错源代码？

> ID：11794280
> 
> 赞同：0
> 
> 时间：2012-08-03T10:51:57.527
> 
> 标签：c++, gcc, g++, compiler-optimization, objdump

我有一个带有调试信息的高度优化的编译*C++*目标文件（用 g++ 编译，指定）。`-O3 -g -march=amdfam10 -Wall`

我正在使用`objdump -S "objname"`.

不幸的是，交错源代码似乎不起作用，因为有时我看到同一组行（不仅仅是单行）重复，而且不仅仅是一个代码行，而是多个代码行，很多次，然后*只有*一条装配线，然后是其他 3/4 源代码行，没有多大意义。

例如，我看到 3/4 C++ 代码行带有迭代器，并且映射初始化后跟只有 1/2 ASM 行？是否有意义？

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:31:42.430

优化后的代码（尤其是 O3 开启的积极优化）不再与源代码直接对应。例如，编译器通常会消除变量，因为值不需要存储在内存中，只需要存储在寄存器中。它还将重新排序操作，以便它们更快。例如，一个简单的优化是将循环内的条件变成在两个不同循环之间进行选择的条件，变成这样

```
while(1){
    if(foo){
        bar();
    } else {
        baz();
    }
} 
```

变成这样的东西

```
if(foo){
    while(1){
        bar();
    }
} else {
    while(1){
        baz();
    }
} 
```

这是等效的，但避免在每次迭代时进行比较。

如果你想能看到和源代码直接对应，O1差不多就是你能去的高了。

# url - Emacs 中的浏览器式 FTP URL 识别

> ID：11794283
> 
> 赞同：2
> 
> 时间：2012-08-03T10:52:16.807
> 
> 标签：url, emacs, ftp, minibuffer

有没有人找到任何方法来制作 Emacs minibuffer 输入，例如 in `find-file`，正确检测/识别和访问标准 ftp-url，例如

```
ftp://gcc.gnu.org/pub/gcc/infrastructure/ 
```

不必手动将其转换为 emacs 自己的格式

```
/ftp:anonymous@gcc.gnu.org:/pub/gcc/infrastructure/ 
```

在将其输入到 minibuffer 之前。

当透明地处理 FTP 目录时，这将使 Emacs 作为文件管理器更易于访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:06:05.930

希望将其视为由

Mx 报告-emacs-bug

# xml - 如何在 openXML document.xml 中直接插入图像

> ID：11794284
> 
> 赞同：0
> 
> 时间：2012-08-03T10:52:27.090
> 
> 标签：xml, xslt, openxml, openxml-sdk

我需要在 openXML 中调用本地图像并使用 XSLT 将这些图像的 XML 转换为 Word，我想直接插入图像而不是在 document_rels 文件中调用。

我使用下面的标签在 C 驱动器中调用图像“blue_hills.jpg”

```
 <w:pict>
    <v:shape id="_x0000_i1025" type="#_x0000_t75" style="width:250; height:200">
     <v:imagedata src="c:\Blue_hills.jpg"/>
    </v:shape>
   </w:pict> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:44:02.930

你不能那样做。图像被转换为​​二进制并作为图像部分添加到文档中。XML 中 imagedata 的属性 src 无效。它只存储图像部分的关系 ID。

此[链接](http://blogs.msdn.com/b/dmahugh/archive/2006/12/10/images-in-open-xml-documents.aspx)解释了带有图像的文档的 Open XML。

这是一个以编程方式插入图像的[示例。](http://tepehughes.wordpress.com/2010/01/19/adding-and-image-to-a-word-2007-document-using-open-xml-sdk-v2-0/)

# c++ - 如何从 C++ 中的文本文件中删除一个空行？

> ID：11794289
> 
> 赞同：2
> 
> 时间：2012-08-03T10:52:51.300
> 
> 标签：c++

我在大学里已经学习编程大约一年了，一路上我学到了一些东西，所以我决定制作我自己的**“主机编辑器”**程序，它基本上可以编辑你的 Windows 主机文件，让你插入、删除和管理里面的网址。:)

但是，我在尝试从文件中删除 URL 时遇到了问题。我实际上并没有删除它，因为我不知道该怎么做，但是我创建了一个新的空文本文件，然后复制了除了带有我希望删除的 URL 的行之外的所有行。听起来合理吗？

但是，如果不离开所谓的**“空行”** ，我就无法删除 URL 。至少不是我的编码方式......我已经尝试了一切，我真的需要你的帮助。

但是请在这里和我一起使用“noob友好”的语言，我不会理解任何复杂的术语:)

谢谢，这是我的完整代码：

[http://joggingbenefits.net/hcode.txt](http://joggingbenefits.net/hcode.txt)

这只是我认为困扰我的部分代码（删除 URL 功能）：

```
void del(int lin)  // line index
{
    FILE* fp=fopen("C:\\Windows\\System32\\drivers\\etc\\hosts","r+");
    FILE* fp1=fopen("C:\\Windows\\System32\\drivers\\etc\\hosts1","w");

    char str[200];
    int cnt=0;

    while(! feof(fp))
    {
        fgets(str,200,fp);

        if(str[0]=='#')
        {
            fputs(str,fp1);
        }
        else
        {
            if(cnt==lin)
            {               // problem. FLAG?!
                cnt++;
            }
            else
            {
                    cnt++;
                    fputs(str,fp1);
            }

        }

    }

    fclose(fp);
    fclose(fp1);

    rename("C:\\Windows\\System32\\drivers\\etc\\hosts","C:\\Windows\\System32\\drivers\\etc\\deleteme");
    rename("C:\\Windows\\System32\\drivers\\etc\\hosts1","C:\\Windows\\System32\\drivers\\etc\\hosts");
    remove("C:\\Windows\\System32\\drivers\\etc\\deleteme");

    cout << endl << "LINE DELETED!" << endl;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T11:31:30.623

由于您已将其标记为 C++，因此我假设您要重写它以消除 C`FILE`接口。

```
std::ifstream in_file("C:\\Windows\\System32\\drivers\\etc\\hosts");
std::ofstream out_file("C:\\Windows\\System32\\drivers\\etc\\hosts1");

std::string line;
while ( getline( in_file, line ) ) {
    if ( ! line.empty() ) {
        out_file << line << '\n';
    }
} 
```

[http://ideone.com/ZibDT](http://ideone.com/ZibDT)

很直接！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:32:57.943

# 原因

`fgets()`函数读取包含尾随行尾字符 ( `'\n'`) 的行，而`puts()`函数写入传递给 in的行**和**行尾字符。所以如果你读

`this line`

它存储为

`this line\n`

在`str`. 并写回文件为

`this line\n\n`

看起来像这样

`this line`

 `在文件中。

# 使固定

*   利用`fprintf(fp2, "%s", str);`
*   使用前删除拖尾`"\n"`。`str``fputs()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:49:28.010

你还没有说这段代码*是如何*失败的（或者给了我们一些文本作为例子），但我注意到你的循环有问题。“文件结束”条件是由于试图读取文件末尾的行为引起的，但是您在*之前*执行了test ( `feof`) ，因此您对最后一行进行了两次操作：控制在最后一行之后进入循环被读取，尝试 - 并且失败 - 读取另一行，作用于仍在 中的行，然后终止循环。*`fgets``str`*

 *代替

```
while(! feof(fp))
  {
    fgets(str,200,fp))
    ... 
```

尝试：

```
while(fgets(str,200,fp))
{
  ... 
```*`

# jquery - 有没有使用 Yepnope 动态加载 CSS 的用途？

> ID：11794290
> 
> 赞同：1
> 
> 时间：2012-08-03T10:52:52.377
> 
> 标签：jquery, css, yepnope

目前，我正在使用 headjs 动态加载我的 javascript 文件。

我的一个应用程序页面中有一堆插件，我会在需要时下载并加载插件。

但是，我注意到大多数插件都有 css 文件，我在应用程序本身的开头使用这些文件加载​​这些文件

我看到只有 yepnope loader 允许动态加载 css。

当动态加载css而不是将它包含在标题中的链接中时，您可以节省多少时间来显示页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:46:07.940

yepnope 的要点是如果条件匹配则加载一个文件，否则加载另一个文件。它通常用作 Modernizr 的一部分，因此您可以检测时髦的 CSS 转换或其他什么，如果不支持，则加载您的 jQuery 脚本。因此，节省时间的方法是要么不加载不受支持的东西，要么在原生支持某个功能时不加载 shim。

# c++ - Ubuntu 的 SFML '没有匹配函数调用“sf:SocketUDP::Receive(sf::Packet&,sf::IPAddress&)”'

> ID：11794291
> 
> 赞同：0
> 
> 时间：2012-08-03T10:52:54.187
> 
> 标签：c++, networking, ubuntu, sfml

当（可能）错误发生时，我正在尝试编译我的 SFML 网络测试。

在 SFML 1.6 的参考中，SocketUDP 具有我正在尝试使用的成员函数。

但是，在 SFML 2.0 的参考中，该函数已更改，现在需要一个额外的字段 unsigned short &remotePort。

即使我的版本是 1.6，该库似乎也需要我使用 v2.0 方法。

我可以用

```
#include <SFML/Network.hpp>

int main(){
    sf::SocketUDP s;
    sf::Packet p;
    sf::IPAddress a;
    s.Receive(p,a);
    return 0;
} 
```

那么，这是 Ubuntu 的 SFML 中的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:06:38.977

经过更多检查并从网站下载SFML，似乎功能已更改。

他们真的应该更新他们的参考页面。

# java - Google Guava 的 CacheLoader loadAll() 方法实现问题

> ID：11794297
> 
> 赞同：3
> 
> 时间：2012-08-03T10:53:07.790
> 
> 标签：java, guava

我有兴趣知道 google guava 11.0 库中引入的 loadAll 方法实现的有效方法是什么。

这是以下代码，描​​述了加载所有
根据 CachesExplained 示例扩展的方法实现

```
LoadingCache<Key, Graph> graphs = CacheBuilder.newBuilder().maximumSize(1000)
.refreshAfterWrite(1, TimeUnit.MINUTES)
.build(
   new CacheLoader<Key, Graph>() {
     public Graph load(Key key) { // no checked exception
       return getGraphFromDatabase(key);
     }

     public Map<Key, Graph> loadAll(Iterable<? extends K> keys) {
         return getAllGraphsFromDatabase(keys);
     }
   }
);

private Map<Key, Graph> getAllGraphsFromDatabase(Iterable<? extends key> keys)
{
  lListOfGraph = //resultset got from DB Call
  for (lCount = 0; lCount < lListOfGraph.size(); lCount++)
  {
     lGraph = (Graph)lListOfGraph.get(lCount).get(0);
     graphs.asMap().put((key , lGraph);
  }
  return (Map<key, Graph>) graphs;
} 
```

此处返回类型为 Map 会抛出错误 java.lang.ClassCastException:com.google.common.cache.LocalCache$LocalLoadingCache 无法转换为 java.util.Map （知道加载缓存对象不能是 Map 类型的事实）

如果这不是使用 LoadingCache 的正确实现方式，那么如何将数据注入到 LoadingCache 的 Component 中，使其可以用作 Cache。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T11:13:55.007

您的`getAllGraphsFromDatabase`方法应该从底层数据存储中获取值。该`LoadingCache`实现会为您处理将返回的值添加到地图中。

我认为您的加载方法应如下所示：

```
private Map<Key, Graph> getAllGraphsFromDatabase(Iterable<? extends key> keys)
{
  final List<Graph> lListOfGraph = //resultset got from DB Call

  final Map<Key, Graph> map = new HashMap<Key, Graph>(listOfGraph.size());
  for (final Graph graph : lListOfGraph)
    map.put(graph.getKey(), graph);

  return map;
} 
```

# algorithm - 距离和角度机器人控制

> ID：11794299
> 
> 赞同：1
> 
> 时间：2012-08-03T10:53:12.750
> 
> 标签：algorithm, robotics

如果不是正确的 Stack Exchange 网站，我很抱歉，我应该问这个问题，但在我看来，这与软件编程密切相关，而不是电气工程！如果它应该在其他地方，请告诉我。

假设我们想要控制一个 2 电动轮机器人从 A 点到 B 点。假设我想通过提供距离和角度来控制我的机器人。

我可以先控制我的角度，然后控制距离，所以机器人首先绕着它的中心转动（通过为一个轮子提供正指令，对另一个轮子提供负指令），然后移动直到到达 B 点（通过向车轮提供两个正序）。

但是，如果我希望机器人一次性完成，我希望同时控制两个不同的控制值。这样，机器人在到达目的地之前确实有一个很好的曲线。这样做，我给轮子提供了两个正指令，我在一侧添加一个正指令，在另一侧添加一个负指令。

使用最后一个解决方案，我很难理解如何达到正确的方向。

例如，如果我想向后走 1 米。我将我的订单设置为 B 点：(1m,180°)。用第一种方案，没问题，先做角度，做完了再做1m。使用第二种解决方案，我在转弯时移动，因此，曲线比有序的 1m 大得多，它在 1m 后停止，而不是在 B 点。

我应该如何解决这个问题？您有什么建议，或者我可能不太了解这种技术？我尝试用一​​个小 XNA 游戏模拟一个控制系统，以尝试没有任何机器人的解决方案，所以请随时提供您认为有趣的任何建议！

Al_th

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:58:54.580

我自己不完全有资格回答这个问题，但在 Udacity 上有一些很好的材料：[http](http://www.udacity.com/view#Course/cs373/CourseRev/apr2012/Unit/510040/Nugget/515042) ://www.udacity.com/view#Course/cs373/CourseRev/apr2012/Unit/510040/Nugget/515042 。Sebastian Thrun（负责 Google 的自动驾驶汽车项目）会比我更好地解释这一点。

编辑：视频中的示例假定自行车模型（仅两个轮子），因此它并不直接适用于您的情况。但是，您可能会获得一些可以利用的有价值的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:53:19.530

您可能想研究反馈线性化。我相信你使用的机器人类型会略有不同，所以你应该寻找关于非完整机器人的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T01:58:25.233

什么样的机器人有这个作为它的控制方案？通常，当您控制 2 轮差速驱动机器人时，您会直接给它 2 个电机命令。您将使用轴距和车轮半径来确定机器人的旋转中心。不一定在机器人的中间。

如您所述，2 轮差速驱动机器人通常有 2 种控制方案。给定您当前的位置和角度，以及目标位置和角度，您可以：

1.  转弯，直行，转弯。这是您描述的简单情况。

2.  规划两点之间的平滑路径。一般来说，这是一条平滑样条曲线。但我认为它也可以是分段的圆形段和线。

注意我说的是“计划”。或者换句话说“搜索”。有无数种方法可以在 2 点之间获得。因此机器人需要在给定一些指标（如转弯半径、最短路径、不向后行驶等）的情况下选择“最佳”的那个。

如果你不关心最终的角度，事情会简单一些，就像我认为你不关心的那样。但总的来说，非完整路径规划是一种痛苦。因此，除非这是您的研究领域（http://scholar.google.com/scholar?hl=en&as_sdt=0,22&as_vis=1&q=nonholonomic+path+planning），我认为大多数人只是使用案例 1。

我认为即使在案例 2 中，直接向后行驶也是落后您 1 米的最佳解决方案。除非您的指标之一是不向后行驶。那么它可能会驱动某种螺旋。我不知道如何在您的控制方案中表示这一点。车轮上的电机大约是左轮 20 个，右轮 10 个。然后左轮会慢慢减速，接近右轮的速度。

# c# - 在进行数据库调用之前在 CheckBox 中设置勾号

> ID：11794300
> 
> 赞同：0
> 
> 时间：2012-08-03T10:53:13.403
> 
> 标签：c#, .net-4.0, checkbox, draw

我有一个标准 CheckBox 并在 CheckChanged 事件中调用数据库以刷新其他位置的结果集。然而，数据库调用可能需要大约一秒钟，这会导致在复选框中绘制的刻度被延迟，这可能会导致用户一次又一次地单击。你知道用户是什么样的！！

那么，无论如何我可以在调用数据库之前进行刻度线吗？？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:56:50.273

首先，我建议您不要在 UI 线程上进行数据库调用。而是使用 [BackgroundWorker](http://www.dotnetperls.com/backgroundworker)或只是启动另一个线程。

但是，如果您只想控制用户再次单击复选框，只需将控件设置为禁用并通过光标告诉用户等待：

```
public void CheckBox_CheckChanged(object sender, EventArgs e){
   CheckBox.Enabled = false;
   Cursor = Cursors.Wait;
   //Long Running database operation
   Cursor = Cursor.Default;
   CheckBox.Enabled = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:58:05.173

不要在 UI 线程上执行缓慢的数据库调用。使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:25:35.573

正如其他人所提到的，您可以使用[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。另一种选择是使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)：

```
private void CheckBox_CheckChanged(object sender, EventArgs e)
{
    Task.Factory.StartNew<MyResultData>(DoLongOperation)
                .ContinueWith(UpdateUI, TaskScheduler.FromCurrentSynchronizationContext());
}

private MyResultData DoLongOperation()
{
    // Long operation

    // Return result to be used to update the UI
    return new MyResultData();
}

private void UpdateUI(Task<MyResultData> task)
{
    // Get the result of the task
    MyResultData data = task.Result;

    // Update the UI using the data
} 
```

使用任务，当/如果您将来将代码定位到 .NET 4.5 时，您还将获得能够使用新的 async-await 功能的好处。

# java - 在android应用程序中使用数据库来保存gps位置

> ID：11794301
> 
> 赞同：0
> 
> 时间：2012-08-03T10:53:12.807
> 
> 标签：java, android, database, gps

我是编程新手，我正在尝试制作一个 android 应用程序。我想做一个按钮，当你按下它时，它会将你的 GPS 位置保存在数据库中。我可以制作一个简单的访问数据库，但我什至不确定是否可以使用访问。有人可以帮我编写java编码以将java链接到数据库。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:05:31.053

```
 db = openOrCreateDatabase("mydb.db", Context.MODE_PRIVATE, null);
    db.execSQL("CREATE TABLE IF NOT EXISTS gps_details (ID INTEGER PRIMARY KEY AUTOINCREMENT, Latitude REAL, Longitude REAL);");

     ContentValues values;
     values = new ContentValues();
     values.put("Latitude", latitudeValue);
     values.put("Longitude", longitudeValue);

     db.insert("gps_details", null, values);
     db.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:06:15.860

一些提示，从这里开始获取有关如何获取位置的一些信息

[http://developer.android.com/guide/topics/location/index.html](http://developer.android.com/guide/topics/location/index.html)

继续阅读有关如何在 Android 中使用数据库的信息

[http://developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)

本节 1\. - 4.

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

教程将提供一些有关处理数据库的更有价值的信息

我建议不要复制和粘贴您在此处或网络上找到的一些代码，而是阅读必要的文档以实际了解它是如何工作的

# java - web.xml 中的“转发”与过滤器中的“转发”有什么区别

> ID：11794303
> 
> 赞同：1
> 
> 时间：2012-08-03T10:53:15.093
> 
> 标签：java, filter, spring-security

到底在做什么

```
<url-pattern>/*</url-pattern>
<dispatcher>REQUEST</dispatcher>  
<dispatcher>FORWARD</dispatcher> 
```

当过滤器中存在转发时&

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T10:56:01.807

这意味着此过滤器也适用于内部转发的请求（不仅仅是来自外部的原始传入请求）。

# asp.net - Smtp 电子邮件发送不起作用？

> ID：11794304
> 
> 赞同：0
> 
> 时间：2012-08-03T10:53:15.850
> 
> 标签：asp.net, email, smtp

我使用 SMTP 服务器发送电子邮件。我在 asp 中使用 creatuserwizard 创建注册表单。这是.aspx 文件。

```
 <asp:CreateUserWizard ID="userwizard" ContinueDestinationPageUrl="~/secretfiles/secret.aspx" runat="server" >
  <MailDefinition BodyFileName="register.txt" Subject="Registration Confirmation" From="amrit.enest@gmail.com" />
  </asp:CreateUserWizard> 
```

这是我的 web.config 文件。

```
<mailSettings>
    <smtp deliveryMethod="SpecifiedPickupDirectory" from="amrit.enest@gmail.com">
    <specifiedPickupDirectory pickupDirectoryLocation="C:\Users\eNest-25\Desktop\emails"/>
    </smtp>
    </mailSettings> 
```

.eml 文件正在生成目录位置，其中包含有关电子邮件的信息，但用户尚未收到它，它不会显示在发件人电子邮件 ID 的已发送邮件中。为什么？

我没有提供用于在任何地方发送电子邮件的电子邮件密码。我怀疑 smtp 如何在不知道发送电子邮件密码的情况下发送邮件

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:08:18.543

我可能错了，但没有指定取件目录传递方法会阻止实际发送电子邮件文件？我认为您的传递方式告诉服务器只将电子邮件放在指定的目录中，也就是说，避免实际发送它们..

我认为您需要指定 deliveryMethod="Network" 才能实际发送电子邮件。

更新：示例 web.config 配置：

```
<smtp deliveryMethod="Network" from="someaddress@classifiedspak.com">
    <network
    host="smtp.yourmailserver.com"
    userName="user@yourmailserver.com"
    password="*************"
    port="25"
    enableSsl="true" />
</smtp> 
```

仅当您的服务器需要身份验证时才需要用户名和密码。我假设您希望对服务器进行 ssl 加密。

# webrtc - 我无法接收远程视频流

> ID：11794305
> 
> 赞同：6
> 
> 时间：2012-08-03T10:53:17.117
> 
> 标签：webrtc

我在 linux 上使用 google chrome 21.x，webrtc 对等连接建立但无法接收任何远程视频流，给予对等连接“.onaddstream”的回调永远不会被调用，有人可以建议我需要在哪里看?

我正在粘贴我的整个代码，仍然无法接收远程视频流，也没有任何错误。

```
var peerConnCreated = false;
var peerConn = null;
var cameraOn = false;
var clientId = 0;
var svcName = "";
var clientIdRecvd = false;
var myname = "";
var hisname = "";
var myJsep;
var hisJsep;
var mySdp;
var hisSdp;

function login()
{
    var loginid = document.getElementById("login").value;
    var jsonText = {"clientid":clientId, "service":"rtc", "mtype": "online", "username": loginid};
    myname = loginid;
    socket.send(JSON.stringify(jsonText));
}

function iceCallback(canditate, moreToFollow)
{
    if(canditate) {
        console.log("ice canditate");
        var jsonText = {"clientid":clientId, "service":"rtc", "mtype": "canditate", "sndr": myname, "rcpt": hisname, 
            "label": canditate.label, "cand": canditate.toSdp()};
        socket.send(JSON.stringify(jsonText));
    }
}

function onSessionConnecting(message)
{
    console.log("session connecting ...");
}

function onRemoteStreamRemoved(event)
{
    console.log("remote stream removed");
    remotevid.src = "";
}

function onSessionOpened(message)
{
    console.log("session opened");
}

function onRemoteStreamAdded(event)
{
    console.log("remote stream added");
    remotevid.src = window.webkitURL.createObjectURL(event.stream);
    remotevid.style.opacity = 1;
}

function createPeerConnection()
{
    if (peerConnCreated) return;
    peerConn = new webkitPeerConnection00("STUN stun.l.google.com:19302", iceCallback); 
    peerConn.onconnecting = onSessionConnecting;
    peerConn.onopen = onSessionOpened;
    peerConn.onaddstream = onRemoteStreamAdded;
    peerConn.onremovestream = onRemoteStreamRemoved;
    console.log("peer connection created");
    peerConnCreated = true;
}

function turnOnCameraAndMic()
{
    navigator.webkitGetUserMedia({video:true, audio:true}, successCallback, errorCallback);
    function successCallback(stream) {
        sourcevid.style.opacity = 1;
        sourcevid.src = window.webkitURL.createObjectURL(stream);
        peerConn.addStream(stream);
        console.log("local stream added");
    }
    function errorCallback(error) {
        console.error('An error occurred: [CODE ' + error.code + ']');
    }
    cameraOn = true;
}

function dialUser(user)
{
    if (!peerConnCreated) createPeerConnection();
    hisname = user;
    var localOffer = peerConn.createOffer({has_audio:true, has_video:true});
    peerConn.setLocalDescription(peerConn.SDP_OFFER, localOffer);
    mySdp =  peerConn.localDescription;
    myJsep = mySdp.toSdp();
    var call = {"clientid":clientId, "service":"rtc", "mtype": "call", "sndr": myname, "rcpt": hisname, "jsepdata": myJsep};
    socket.send(JSON.stringify(call));
    console.log("sent offer");
    //console.log(myJsep);
    peerConn.startIce();
    console.log("ice started ");
}

//handle the message from the sip server
//There is a new connection from our peer so turn on the camera 
//and relay the stream to peer.
function handleRtcMessage(request)
{
    var sessionRequest = eval('(' + request + ')');
    switch(sessionRequest.mtype) 
    {
        case 'online':
            console.log("new user online");
            var newuser = sessionRequest.username;
            var li = document.createElement("li");
            var name = document.createTextNode(newuser);
            li.appendChild(name);
            li.onclick = function() { dialUser(newuser); };
            document.getElementById("Contact List").appendChild(li);
            break;

        case 'call':
            console.log("recvng call");
            alert("Incoming call ...");
            if (!peerConnCreated) createPeerConnection();
            peerConn.setRemoteDescription(peerConn.SDP_OFFER, new SessionDescription(sessionRequest.jsepdata));
            hisname = sessionRequest.sndr;
            var remoteOffer = peerConn.remoteDescription;
            //console.log("remoteOffer" + remoteOffer.toSdp());
            var localAnswer = peerConn.createAnswer(remoteOffer.toSdp(), {has_audio:true, has_video:true}); 
            peerConn.setLocalDescription(peerConn.SDP_ANSWER, localAnswer);
            var jsonText = {"clientid":clientId,"service":"rtc", "mtype": "pickup", "sndr" :myname, "rcpt": hisname, "jsepdata": localAnswer.toSdp()};
            socket.send(JSON.stringify(jsonText));
            console.log("sent answer");
            //console.log(localAnswer.toSdp());
            peerConn.startIce();
            if (!cameraOn) turnOnCameraAndMic();
            break;

        case 'pickup':
            console.log("recvd pickup");
            peerConn.setRemoteDescription(peerConn.SDP_ANSWER, new SessionDescription(sessionRequest.jsepdata));
            hisname = sessionRequest.sndr;
            if (!cameraOn) turnOnCameraAndMic();
            break;

        case 'canditate':
            console.log("recvd canditate");
            var canditate = new IceCandidate(sessionRequest.label, sessionRequest.cand);
            peerConn.processIceMessage(canditate);
            break;

        case 'bye':
            console.log("recvd bye");
            break;
    }
}

//open the websocket  to the antkorp webserver
var socket = new WebSocket('ws://bldsvrub:9981');
var sourcevid = null;
var remotevid = null;

socket.onopen = function () {
    console.log("websocket opened");
    sourcevid = document.getElementById("sourcevid");
    remotevid = document.getElementById("remotevid");
};

socket.onmessage = function (event) { 
    if (!clientIdRecvd) {
        var reqObj = eval('(' + event.data + ')');
        clientId = reqObj.clientid;
        svcName  = reqObj.service;
        clientIdRecvd = true;
    } else {
        //hookup the new handler to process session requests
        handleRtcMessage(event.data);
    }
};

socket.onclose = function (event) { socket = null; }; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T10:44:50.603

上面粘贴的代码包含一个小错误，应在生成 answer 或 offer 之前将流添加到对等连接，即应在任何 setlocalDescription 或 setRemoteDescription 调用之前调用“addStream”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T12:36:12.730

许多 WebRTC 演示：

*   [https://github.com/muaz-khan/WebRTC-Experiment](https://github.com/muaz-khan/WebRTC-Experiment)

例如一对一的 WebRTC 音频/视频/屏幕通话：

*   [https://github.com/muaz-khan/WebRTC-Experiment#one-to-one-calls](https://github.com/muaz-khan/WebRTC-Experiment#one-to-one-calls)

## 笔记：

这个问题太老了。这就是为什么我不认为我应该在这里添加一个工作片段代码片段的原因。上面的链接回答了所有问题。

但是，如果您是 NEW-WebRTC 用户并且遇到类似问题，那么这里有一些提示：

*   在创建对等点之前，请确保两个对等点都准备好​​握手。
*   就绪意味着，双方都可以访问媒体流（音频和/或视频）
*   第一个对等点应该启动 RTCPeerConnection 对象，调用“addStream”并创建报价描述。
*   第二个对等点应该从第一个对等点接收 OFFER-SDP。
*   第二个对等点应该启动 RTCPeerConnection 对象，在创建 ANSWER-description 之前调用“addStream”和 setRemoteDescription。
*   第二个对等方应该创建 ANSWER-SDP。
*   第一个对等点应该得到 ANSWER-SDP 和 set-Remote-Descriptions。
*   ICE-candidate-pairs 应该与上述过程并行交换。

你可以在这里找到一些教程：

*   [https://www.webrtc-experiment.com/#documentations](https://www.webrtc-experiment.com/#documentations)

## 记住

此答案针对 WebRTC-1.0。它没有回答 WebRTC-1.1 (ORTC) 或更新版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T04:06:17.160

onaddstream 应在收到包含至少一个流的答案时调用。如果您没有收到回调，请确保 setLocal 和 setRemoteDescription 都已被调用并成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-16T18:20:55.260

我发现在我的情况下，如果不回复另一个视频，我将无法接收视频。

我解决了一个假视频流：

```
 let w = 640;
            let h = 480;
            let canvas: any = Object.assign(document.createElement("canvas"), { w, h });
            canvas.getContext('2d').fillRect(0, 0, w, h);
            let blackStream = canvas.captureStream();
            outgoingStream.addTrack(blackStream.getVideoTracks()[0]); 
```

# java - 动态组合框问题

> ID：11794308
> 
> 赞同：2
> 
> 时间：2012-08-03T10:53:24.990
> 
> 标签：java, swing, jtable, jcombobox

嗨，我正在使用一个包含两列即仪器和方法的表格。单击按钮后，我将在每个单元格中添加一个带有组合框的行作为编辑器。此外，那些组合框将具有动作侦听器。就像我在选择仪器时一样，应该更改方法组合框列表。我只使用两个组合框，每次添加一行时都会实例化它。我的问题是每当我添加一个新行时，现有的行组合都会重新加载最新的值。这意味着，组合框是独一无二的，即使我以不同的方式实例化它。动态创建组合框的方法是什么，它应该有自己的值。在下面发布我的代码供您参考。

```
addItem.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent arg0) {
            comboInstrument = new CeNComboBox();
            comboMethod = new CeNComboBox();
            TableColumn instrumentColumn = table.getColumn("Instrument Used");
            TableColumn methodColumn = table.getColumn("Method Title");
            comboInstrument.removeAllItems();
            listInstruments = analyticalUtil.getInstruments(listAnalysisSummaryPrefs);
            iterateInstruments = listInstruments.iterator();
            while(iterateInstruments.hasNext()){
                comboInstrument.addItem(iterateInstruments.next());
            }
            dtm.addRow(new Object[]{" "," "});
            comboInstrument.setEditable(true);
            instrumentColumn.setCellEditor(new MyComboBoxEditor(comboInstrument));
            instrumentColumn.setCellRenderer(new MyComboBoxRenderer());
            comboMethod.setEditable(true);
            methodColumn.setCellEditor(new MyComboBoxEditor(comboMethod));
            methodColumn.setCellRenderer(new MyComboBoxRenderer());

            comboInstrument.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent argEvent){
                    comboInstrumentActionPerformed();
                }
            });
            comboMethod.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent argEvent){
                    comboMethodActionPerformed();
                }
            });
        }
    }); 
```

MyComboBoxEditor.java

```
public class MyComboBoxEditor extends DefaultCellEditor {

    public MyComboBoxEditor(JComboBox combobox) {
        super(combobox);
    }
} 
```

我对 Swing 很陌生。请帮帮我。

添加一些带有硬编码值的示例代码。如果你运行它，你就会明白我的问题。以这种方式进行测试。1\. 从第一列、第一行中选择一个值，然后从另一列中选择一个值。2\. 在第二行做同样的事情，现在检查第一行的第二列。所有值都将根据为第二行所做的选择重新加载。这是我面临的问题。以下代码从以下链接 [JComboBox Action listener复制和编辑](https://stackoverflow.com/questions/6539001/jcombobox-action-listener)

```
private static final long serialVersionUID = 1L;
        private JComboBox mainComboBox;
        private JComboBox subComboBox;
        private Hashtable<Object, Object> subItems = new Hashtable<Object, Object>();

        public Testing() {
            String[] items = {"","Select Item", "Color", "Shape", "Fruit", "Size"};
            mainComboBox = new JComboBox(items);
            mainComboBox.addActionListener(this);
            mainComboBox.addItemListener(this);
            mainComboBox.setEditable(true);
            //prevent action events from being fired when the up/down arrow keys are used
            //mainComboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE);
//          getContentPane().add(mainComboBox, BorderLayout.WEST);
            subComboBox = new JComboBox();//  Create sub combo box with multiple models
            subComboBox.setPrototypeDisplayValue("XXXXXXXXXX"); // JDK1.4
            subComboBox.addItemListener(this);
//          getContentPane().add(subComboBox, BorderLayout.CENTER);
            String[] subItems1 = {"Select Color", "Red", "Blue", "Green"};
            subItems.put(items[1], subItems1);
            String[] subItems2 = {"Select Shape", "Circle", "Square", "Triangle"};
            subItems.put(items[2], subItems2);
            String[] subItems3 = {"Select Fruit", "Apple", "Orange", "Banana"};
            subItems.put(items[3], subItems3);
            String[] subItems4 = {"Select Size", "Big", "Middle", "Small"};
            subItems.put(items[4], subItems4);
            DefaultTableModel model = new DefaultTableModel(new String[]{"Instrument Used","Method Title"},0);
            JTable table = new JTable(model);
            table.getColumn("Instrument Used").setCellEditor(new MyComboBoxEditor(mainComboBox));
            table.getColumn("Instrument Used").setCellRenderer(new MyComboBoxRenderer());
            table.getColumn("Method Title").setCellEditor(new MyComboBoxEditor(subComboBox));
            table.getColumn("Method Title").setCellRenderer(new MyComboBoxRenderer());
            model.addRow(new String[]{""});
            model.addRow(new String[]{""});
            getContentPane().add(table, BorderLayout.CENTER);
        }

        public void actionPerformed(ActionEvent e) {
            String item = (String) mainComboBox.getSelectedItem();
            JOptionPane.showMessageDialog(null, "Action Performed "+item);
            Object o = subItems.get(item);
            if (o == null) {
                subComboBox.setModel(new DefaultComboBoxModel());
            } else {
                subComboBox.setModel(new DefaultComboBoxModel((String[]) o));
            }
        }

        public void itemStateChanged(ItemEvent e) {
            if (e.getStateChange() == ItemEvent.SELECTED) {
                if (e.getSource() == mainComboBox) {
                    if (mainComboBox.getSelectedIndex() != 0) {
                        FirstDialog firstDialog = new FirstDialog(Testing.this,
                                mainComboBox.getSelectedItem().toString(), "Please wait,  Searching for ..... ");
                    }
                } 
            }
        }

        private class FirstDialog extends JDialog {

            private static final long serialVersionUID = 1L;

            FirstDialog(final Frame parent, String winTitle, String msgString) {
                super(parent, winTitle);
                //setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
                JLabel myLabel = new JLabel(msgString);
                JButton bNext = new JButton("Stop Processes");
                add(myLabel, BorderLayout.CENTER);
                add(bNext, BorderLayout.SOUTH);
                bNext.addActionListener(new ActionListener() {

                    public void actionPerformed(ActionEvent evt) {
                        setVisible(false);
                    }
                });
                javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {

                    public void actionPerformed(ActionEvent e) {
                        setVisible(false);
                    }
                });
                t.setRepeats(false);
                t.start();
                setLocationRelativeTo(parent);
                setSize(new Dimension(400, 100));
                setVisible(true);
            }
        }

        public static void main(String[] args) {
            JFrame frame = new Testing();
            frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:16:31.807

感谢您提供新代码。这很有帮助。

我玩你的例子并重写它以正确使用编辑器。

注意以下部分：

1.  测试。我删除了 subComboBox，你在这里不需要它。我删除了 mainComboBox 的 actionListener。
2.  MyComBobBox 编辑器。我实现方法`getTableCellEditorComponent()`。这是编辑器中的主要方法。在这种方法中，我检查在当前行中选择了哪个工具，并为特定工具准备编辑器组合框。

此示例尚不包括可编辑的组合框。但我希望它对你有帮助。

```
public class Testing extends JFrame implements ItemListener{
    private static final long serialVersionUID = 1L;
        private JComboBox mainComboBox;
        private Hashtable<Object, Object> subItems = new Hashtable<Object, Object>();

        public Testing() {
            String[] items = {"","Select Item", "Color", "Shape", "Fruit", "Size"};
            mainComboBox = new JComboBox(items);
            mainComboBox.addItemListener(this);
            mainComboBox.setEditable(true);
            String[] subItems1 = {"Select Color", "Red", "Blue", "Green"};
            subItems.put(items[2], subItems1);
            String[] subItems2 = {"Select Shape", "Circle", "Square", "Triangle"};
            subItems.put(items[3], subItems2);
            String[] subItems3 = {"Select Fruit", "Apple", "Orange", "Banana"};
            subItems.put(items[4], subItems3);
            String[] subItems4 = {"Select Size", "Big", "Middle", "Small"};
            subItems.put(items[5], subItems4);
            DefaultTableModel model = new DefaultTableModel(new String[]{"Instrument Used","Method Title"},0);
            JTable table = new JTable(model);
            table.getColumn("Instrument Used").setCellEditor(new DefaultCellEditor(mainComboBox));
            //table.getColumn("Instrument Used").setCellRenderer(new MyComboBoxRenderer());
            table.getColumn("Method Title").setCellEditor(new MyComboBoxEditor());
            //table.getColumn("Method Title").setCellRenderer(new MyComboBoxRenderer());
            model.addRow(new String[]{""});
            model.addRow(new String[]{""});
            getContentPane().add(table, BorderLayout.CENTER);
        }

       public void itemStateChanged(ItemEvent e) {
            if (e.getStateChange() == ItemEvent.SELECTED) {
                if (e.getSource() == mainComboBox) {
                    if (mainComboBox.getSelectedIndex() != 0) {
                        FirstDialog firstDialog = new FirstDialog(Testing.this,
                                mainComboBox.getSelectedItem().toString(), "Please wait,  Searching for ..... ");
                    }
                } 
            }
        }

        private class FirstDialog extends JDialog {

            private static final long serialVersionUID = 1L;

            FirstDialog(final Frame parent, String winTitle, String msgString) {
                super(parent, winTitle);
                //setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
                JLabel myLabel = new JLabel(msgString);
                JButton bNext = new JButton("Stop Processes");
                add(myLabel, BorderLayout.CENTER);
                add(bNext, BorderLayout.SOUTH);
                bNext.addActionListener(new ActionListener() {

                    public void actionPerformed(ActionEvent evt) {
                        setVisible(false);
                    }
                });
                javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {

                    public void actionPerformed(ActionEvent e) {
                        setVisible(false);
                    }
                });
                t.setRepeats(false);
                t.start();
                setLocationRelativeTo(parent);
                setSize(new Dimension(400, 100));
                setVisible(true);
            }
        }

        public static void main(String[] args) {
            JFrame frame = new Testing();
            frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        }

    class MyComboBoxEditor extends AbstractCellEditor implements TableCellEditor, ItemListener {

            private JComboBox editorComboBox;

            public MyComboBoxEditor() {
                editorComboBox = new JComboBox();
            editorComboBox.addItemListener(this);
            }

            public Object getCellEditorValue()
            {
                return editorComboBox.getSelectedItem();
            }

            public Component getTableCellEditorComponent(JTable table,
                    Object value,
                    boolean isSelected,
                    int row,
                    int column)
            {
                // which instrument is selected?
                String instrument = (String) table.getValueAt(row, 0);
                String[] methods = (String[]) subItems.get(instrument);
                editorComboBox.setModel(new DefaultComboBoxModel(methods));
                editorComboBox.setSelectedItem(value);
                return editorComboBox;
            }

        public void itemStateChanged(ItemEvent e)
        {
            stopCellEditing();
        }
        }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T11:37:45.060

`setCellEditor()`首先，`setCellRenderer()`每次添加一行时都不需要 call 。此方法必须在创建表后调用一次。

其次，添加行时不应创建组合框。更好的方法是在`MyComboBoxEditor.getCellEditorComponent()`方法中创建组合框。

我想你的问题原因是`MyComboBoxEditor`. 当您创建新行时，您会替换`TableCellEditor`表格中所有单元格的现有和现有组合框编辑器，而不仅仅是添加。 `TableCellEditor`按需为每个单元格提供编辑器组件。它必须为特定单元格准备编辑器组件并将其返回。但我想您`MyComboBoxEditor`将相同的组件返回到每个单元格。你能提供 MyComboBoxEditor 的代码来确定吗？

看看这个[问题](https://stackoverflow.com/questions/7601436/jcombobox-as-a-custom-tablecelleditor)。我希望它会有所帮助。

# java - 如何在特定时间安排任务？

> ID：11794313
> 
> 赞同：4
> 
> 时间：2012-08-03T10:53:44.297
> 
> 标签：java, timer, scheduled-tasks, scheduling

java调度程序有一个问题，我的实际需要是我必须在特定时间启动我的进程，并且我将在特定时间停止，我可以在特定时间启动我的进程但我不能在特定时间停止我的进程，如何指定进程在调度程序中运行多长时间，（这里我不会放）任何人对此都有建议。

```
import java.util.Timer;
import java.util.TimerTask;
import java.text.SimpleDateFormat;
import java.util.*;
public class Timer
{
    public static void main(String[] args) throws Exception
    {

                  Date timeToRun = new Date(System.currentTimeMillis());
                  System.out.println(timeToRun);
                  Timer timer1 = new Timer();
                  timer1.schedule(new TimerTask() 
                   { 
                     public void run() 
                               {

                        //here i call another method
                        }

                    } }, timeToRun);//her i specify my start time

            }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T11:12:18.443

您可以使用`ScheduledExecutorService`2 个计划，一个用于运行任务，一个用于停止任务 - 请参见下面的简化示例：

```
public static void main(String[] args) throws InterruptedException {
    final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(2);

    Runnable task = new Runnable() {
        @Override
        public void run() {
            System.out.println("Starting task");
            scheduler.schedule(stopTask(),500, TimeUnit.MILLISECONDS);
            try {
                System.out.println("Sleeping now");
                Thread.sleep(Integer.MAX_VALUE);
            } catch (InterruptedException ex) {
                System.out.println("I've been interrupted, bye bye");
            }
        }
    };

    scheduler.scheduleAtFixedRate(task, 0, 1, TimeUnit.SECONDS); //run task every second
    Thread.sleep(3000);
    scheduler.shutdownNow();
}

private static Runnable stopTask() {
    final Thread taskThread = Thread.currentThread();
    return new Runnable() {

        @Override
        public void run() {
            taskThread.interrupt();
        }
    };
} 
```

# asp.net - 处理httprequest执行超时场景

> ID：11794315
> 
> 赞同：1
> 
> 时间：2012-08-03T10:53:52.580
> 
> 标签：asp.net, c#-4.0, timeout, httprequest

我的 ASP.Net Web 服务的 httprequest 执行超时为 110 秒（默认值）。如果处理时间超过 110 秒，我希望向我的客户端应用程序抛出自定义异常。如何以及在哪里处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:05:45.547

有一个解决方法，但不是一个好的解决方案。

我可以使用 Server.GetLastError(); 在 Global.ASAX 的 Application_Error 事件中获取异常信息；我没有成功发送自定义异常。在尝试解析为 SOAP xml 之前，我会要求我的客户端开发人员检查 HTML 内容。

# sql - 在日期字段上的 ms 访问查询中格式化通配符

> ID：11794316
> 
> 赞同：0
> 
> 时间：2012-08-03T10:53:52.643
> 
> 标签：sql, vb.net, ms-access, string.format

我的 MS Access 数据库中有一个`DTB_VER.VER_DATUM`包含所有完整日期的日期字段（例如 03-04-2012）。

当我使用字符串格式（vb.net）创建以下查询时：

```
Dim sql as string =  string.format("SELECT * FROM DTB_VER WHERE VER_DATUM LIKE '{0}%-{1}%-{2}%'", day, month, year) 
```

使用此查询，我可以完美地搜索一天或一年或两者的组合，但是一旦我输入一个月，它就会失败，我不知道为什么。

有任何想法吗？

**更新：**

我尝试了以下方法：

```
SELECT * FROM DTB_VER where Day(Ver_datum) like '*day*' and Month(Ver_datum) like '*month*' and year(Ver_datum) like '*year*' 
```

我可以再次搜索一天或一年或两者的组合（并将月份留空），但我无法搜索一个月。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:10:42.083

例如，您可以使用访问日期格式

```
sql="SELECT * FROM DTB_VER WHERE VER_DATUM=#" & year & "/" & month & "-/" & day & "#" 
```

您不能将 LIKE 与日期一起使用。如果您想选择一个月中的所有日子，您需要以下内容：-

```
sql="SELECT * FROM DTB_VER WHERE VER_DATUM>=#" & year & "-" & month & "-01# and VER_DATUM<#" & format(dateadd("m",1,cdate(year & "/" month & "/" & day),"yyyy/mm") & "/01" 
```

# android - Android：如何动态创建此布局？

> ID：11794317
> 
> 赞同：0
> 
> 时间：2012-08-03T10:53:55.467
> 
> 标签：android, android-layout

我想在 android 中动态创建一个包含一些按钮的布局。但我找不到任何方法来动态创建这个布局。

这是我的布局：

![动态布局](../Images/d9c4258823eb3c9dfdf45053dc7d8a9c.png)

我想在按钮完全填充设备宽度后将它们放入下一行。按钮的总数可以变化。有没有办法动态地做到这一点？

**更新：** 根据您的建议，我正在使用此代码：

```
private void addQuestionPallete() {
        int tempBtn = 30;
        LayoutParams param = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, 0.1f);
        LayoutParams param2 = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, 1f);

        linearContent.setWeightSum(1f);
        linearContent.setOrientation(LinearLayout.VERTICAL);
        btnQuestionPalete = new Button[10];

        for (int j = 0; j < tempBtn / 10; j++) {
            linearQuestionPalettesRow = new LinearLayout(mContext);
            linearQuestionPalettesRow.setOrientation(LinearLayout.HORIZONTAL);
            linearQuestionPalettesRow.setLayoutParams(param2);
            for (int i = 0; i < 10; i++) {
                btnQuestionPalete[i] = new Button(mContext);
                btnQuestionPalete[i].setLayoutParams(param);
                btnQuestionPalete[i].setTextColor(Color.BLACK);
                btnQuestionPalete[i].setText("5");
                btnQuestionPalete[i].setId(fChexkBoxID++);
                linearQuestionPalettesRow.addView(btnQuestionPalete[i]);
            }
        }
        linearContent.addView(linearQuestionPalettesRow);
    } 
```

但它只显示单行按钮。我在哪里做错了？

**更新 ：**

好的，我已经解决了我的问题。我在 for 循环中添加了布局。因此布局只添加了一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:19:30.953

*   在垂直线性布局中添加水平线性布局。
*   将水平线性布局的“权重总和”设置为 1。
*   现在在添加按钮之前，将每个按钮的权重设置为 0.1
*   为添加的按钮数量保留一个计数器，从 1 开始，当它达到 10 时，添加另一个水平线性布局。

您可以根据需要更改按钮的重量，使它们变大或变小，然后调整您的计数器以相应地运行。

例如，如果您决定为每个按钮分配 weight = 0.2，那么您的计数器应该计数到 5 (1/0.2 = 5)。您还可以将权重设置为 0.05 或 0.025 等，具体取决于每行中所需的按钮数量。

这样您就不必担心不同的屏幕尺寸，因为 weight 属性将调整任何屏幕尺寸的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:59:11.080

1.  创建垂直线性布局
2.  将水平线性布局添加到垂直线性布局
3.  `addView`然后使用方法将按钮添加到水平线性布局
4.  记下按钮的数量，当它达到最大值时，从第 2 步开始重复

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:27:43.747

如果您想更好地控制系统如何将您的对象放置在屏幕上，我建议您实现自定义布局。

您应该创建一个扩展 ViewGroup 并覆盖方法的类：

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
```

和

受保护的无效 onLayout（布尔 arg0，int arg1，int arg2，int arg3，int arg4）

在此方法中，您描述了如何将对象放置在屏幕上。例如，如果您的对象具有所有相同的大小，您可以计算与左侧的距离和与顶部的距离，如下所示：

```
int left = pinImg.getCol() * dotSize + dotSize ;
int top = pinImg.getRow()  * dotSize + dotSize ; 
```

其中 pinImg 在这种情况下是要放置的对象。

在您的 xml 中描述您的布局

```
<package.CustomView
     android:id="@+id/pinsTable"
     android:layout_width="wrap_content" 
     android:layout_height="wrap_content"    

    /> 
```

希望这有帮助。

# c++ - 如何避免“（void）a”演员表造成副作用？

> ID：11794318
> 
> 赞同：12
> 
> 时间：2012-08-03T10:54:02.910
> 
> 标签：c++, gcc, void

我有这段代码，GCC 打印“什么！？”。我怎样才能避免这种情况，以便 void 演员只是具有 C 意思“忽略孤独的'a;'”？

```
#include <iostream>

struct A {
  template<typename T>
  operator T() { 
    std::cout << "what!?";
  }
};

int main() {
  A a;
  (void)a;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T11:47:31.497

正如您所观察到的，这是[gcc 中的一个错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54165)。标准如下：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 12.3.2 转换函数[class.conv.fct]
> 
> (1) 从不使用转换函数将（可能是 cv 限定的）对象转换为 [...]（可能是 cv 限定的）void。
> 116) 转换为 void 不会调用任何转换函数 (5.2.9)。
> 
> ### 5.2.9 静态转换 [expr.static.cast]
> 
> (6) 任何表达式都可以显式转换为 cv void 类型，在这种情况下，它变成了废弃值表达式（第 5 条）。

作为一种解决方法，您可以编写：

```
a, void(); 
```

重载是不可能的，`operator,(void)`因此从符合要求的实现中调用用户定义行为的可能性为零。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T10:58:23.483

添加一个

```
operator void() {} 
```

照顾它。

# c# - 在 Asp.net 中访问不同网页的变量

> ID：11794321
> 
> 赞同：0
> 
> 时间：2012-08-03T10:54:14.013
> 
> 标签：c#, asp.net, sql

我有 5 个网页。我在这些页面上有 5 个单独的提交按钮。发生这样的情况，当用户单击相应页面上的提交时，信息将从文本框中获取并存储在变量中，例如：

认为：

```
 static public String DOB;
   static public String CNIC;
   static public String Domicile;
   static public String Dependents;

    Gender = DropDownList8.SelectedItem.Text;
    Nationality = DropDownList8.SelectedItem.Text;
    Maritial_Status = DropDownList2.SelectedItem.Text;
    DOB = TextBox9.Text; 
```

像这样我在前 4 页上有不同的变量，我想在最后一页访问所有变量。我必须使用所有这些变量通过查询提交插入命令，所以这意味着我需要为插入命令提供所有变量！

请告诉我一个简单的方法，我怎么能做到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:56:22.397

请将它们存储起来，`Session variables e.g. as a Dictionary`然后您可以在任何页面上访问它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:44:22.803

您可以通过以下步骤完成此操作 - 创建一个名为的类，该类处理需要放入会话中的所有变量并创建如下所示的属性

```
public class SessionController
    {
        public static string DOB
        {
            get
            {
                if (HttpContext.Current.Session["DOB"] != null)
                {
                    return HttpContext.Current.Session["DOB"].ToString();
                }
                else
                {
                    return null;
                }
            }
            set
            {
                HttpContext.Current.Session["DOB"] = value;

            }
        }
    } 
```

- 在此之后从您的 aspx 页面访问属性，然后在 aspx 页面的相应代码隐藏中通过“使用”语句引用此类，如下所示

// 下面的代码可以写在后面的aspx代码中

```
 SessionController.DOB = txtDob.Text;
 SessionController.Gender = Dropdownlist8.SelectedItem.Text; 
```

-当您在最后一页访问它时，您可以将参数传递给您的插入方法，例如

//调用方法

```
SomeDALC.InsertMethod(SessionController.DOB,SessionController.Gender,etc... ) 
```

像上面一样

希望您了解如何使用它。

问候斯里维迪亚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:00:40.663

这就是会议的目的！！会话变量充当键值对，您可以在其中将信息存储在一个页面中并在任何其他页面中检索，例如。

```
Session[key]=Value 
```

此外，在后面的代码中，您可以使用 Session[key] 访问它

# compiler-construction - CPU能理解编程语言吗？

> ID：11794324
> 
> 赞同：4
> 
> 时间：2012-08-03T10:54:28.087
> 
> 标签：compiler-construction, cpu

编程书籍有时会指出 CPU 不理解 C++ 语言（或任何高级编程语言）。所有 C++ 语句都必须先翻译成机器代码才能执行。但是谁来翻译？

哦，这并不神秘，他们说；翻译由编译器完成——它本身就是一个计算机程序。但在这种情况下，计算机正在进行翻译。

在我看来，这是一个无法解决的悖论。CPU（计算机核心的“大脑”）不理解 C++ 的一个词，但它执行 C++ 和它自己的内部语言之间的转换。这不是矛盾吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T10:54:28.087

大部分答案是这样的：C++ 源代码（或任何高级编程语言）存储在文本文件中，就像您可能存储文章或备忘录一样。但是文本字符以数字形式存储。因此，当编译器处理这些数据时，它会进行另一种形式的数字运算、评估数据并根据精确的规则做出决策。

如果这不能解决问题，请想象一下：您的任务是阅读一个懂日语但不会英语的人的来信。与此同时，你会英语，但不会一个字的日语。

但是假设你有一本指导书，告诉你如何将日语字符翻译成对应的英语。说明书本身是用英文写的，所以你使用它没有问题。

因此，即使您不懂日语，也可以通过仔细按照说明翻译所有您想要的日语。

这就是计算机程序的真正含义：CPU 读取的指令书。计算机程序是一种惰性的东西——一系列指令和数据——但计算机内部的“知识”来自于它的程序。程序使计算机能够做各种聪明的事情——包括翻译包含 C++ 的文本文件。

编译器当然是一个非常特殊的程序，但它所做的一点也不奇怪或不可能。如前所述，作为计算机程序，它是一本“指导书”。它告诉我们如何做的是读取一个包含 C++ 源代码的文本文件并输出另一本说明书：这个输出是你的 C++ 程序的可执行形式。

最初的编译器必须用机器代码编写。后来，旧的编译器可以用来编写新的编译器……因此，通过引导过程，即使是熟练的程序员也可以越来越少地依赖编写机器代码。

# android - 解析 XML 并将子节点的值提供给字符串

> ID：11794330
> 
> 赞同：0
> 
> 时间：2012-08-03T10:54:39.077
> 
> 标签：android, xml, xml-parsing, android-xml

我想在 XML 中给出一个子节点的值，它是一个 URL，然后把这个值放在一个字符串中。我在解析 XML 后使用 HashMap 将地图放入列表（songList）中。xml 中的 thumb_url 包含 URL 的值，我想将该值放在一个名为“link”的字符串中。

```
 // XML node keys
static final String KEY_SONG = "song"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url"; 
```

和：

```
 ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);

    } 
```

我实际上想将“链接”提供给“new DownloadFileFromURL().execute(link);” 按歌曲列表的行后下载。最好的问候大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:48:54.747

我找到了答案。

诀窍是我应该通过链接表单适配器。`getView()`我在适配器的视图中添加了一个标签。`view.setTag(song.get(MainActivity.KEY_LINK));`. 然后在主要活动中通过`String Link = view.getTag().toString();`

我希望这可以帮助某人:)

# c++ - 如何通过自定义选择底层容器来制作树形结构？

> ID：11794334
> 
> 赞同：1
> 
> 时间：2012-08-03T10:54:51.117
> 
> 标签：c++, templates

我尝试制作一个模板化的 Trie 结构。它表示内部私有结构中的树`Node`，其中包含`TElem`，`bool`表示该特定节点是一个终端和一个子向量：

```
template<typename TElem>
class Trie
{
    // ...
private:
    struct Node
    {
        TElem elem;
        bool isTerminal;
        std::vector<std::shared_ptr<Node>> children;
    };

    Node root_;
}; 
```

现在我想制作另一个模板参数，可以选择另一个底层容器，例如`list`. 如何做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:01:42.770

带模板模板参数（未经测试的代码，但大体思路应该没问题）：

```
template <typename TElem, 
          template <typename, typename> class Cont
          template <typename> class Allocator=std::allocator>
class Trie {
 private:
    struct Node
    {
        typedef std::shared_ptr<Node> NodePtr_;
        TElem elem;
        bool isTerminal;
        Cont<NodePtr_, Allocator<NodePtr_>> children;
    };

    Node root_;
}; 
```

然后

```
Trie<int, std::list> myTrie = ....; 
```

# php - 如何从 OO PHP 中的函数中获取数组

> ID：11794340
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:55:08.480
> 
> 标签：php, arrays

我开始玩 OO PHP。我想使用函数从我的数据库中检索一些数据，然后 fetch_array 应该使我能够“解包”数组。（每个等都有很好的循环）。我应该如何在面向对象编程中解决这个问题

```
public static function find_by_sql($sql="") 
{
    global $database;
    $result_set = $database->query($sql);
    $object_array = array();
    while ($row = $database->fetch_array($result_set)) 
    {
        $something $something
    }
    return $something $something;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:58:28.020

如果我很好地回答了您的问题，那么您正在寻找的功能是[PDO 的 fetchObject 功能](http://php.net/manual/fr/pdostatement.fetchobject.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:07:15.090

整个问题是如何处理“某事”部分？

```
$records = array();
while ($row = $database->fetch_array($result_set)) 
{
    $records[] = $row;
}
return $records; 
```

# jquery-ui - jquery UI手风琴鼠标悬停效果

> ID：11794341
> 
> 赞同：0
> 
> 时间：2012-08-03T10:55:22.940
> 
> 标签：jquery-ui, accordion

我正在使用 [http://jqueryui.com/demos/accordion/#hoverintent](http://jqueryui.com/demos/accordion/#hoverintent)（鼠标悬停效果）手风琴如何在鼠标悬停时自动关闭。

[http://premiumfitnessuae.com/services.html](http://premiumfitnessuae.com/services.html)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:51:11.693

[http://demos.w3avenue.com/cross-browser-pure-css3-vertical-accordion/](http://demos.w3avenue.com/cross-browser-pure-css3-vertical-accordion/)

看到这个它可能会有所帮助纯 css3 手风琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:01:10.537

在鼠标移出时使用它

关闭 .accordion( "activate" , index ) 中的所有内容（只有可折叠：true 才有可能）

# imagemagick - imagemagick 多层 tiff

> ID：11794344
> 
> 赞同：1
> 
> 时间：2012-08-03T10:55:41.370
> 
> 标签：imagemagick, tiff

嗨，我有一个标准 tif 文件，我想创建一个多层 tiff。

我似乎可以在互联网上找到有关如何操作的任何信息。

你能帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:14:20.327

```
convert [source image] -define tiff:tile-geometry=256x256 -compress jpeg 'ptif:o.tif' 
```

这将从源创建分层 tif 并使用 imagemagick 将其命名为 o.tif

# c - 执行与我的 C 程序不同的程序

> ID：11794346
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:55:50.343
> 
> 标签：c, shell, execution

我在 Linux 中编写一个基本的 shell 作为爱好，我想开始执行程序，但不知道如何做到这一点。我见过`execp()`它的各种兄弟姐妹，但显然这迫使内核放弃当前正在运行的进程，在这种情况下是我的 shell，并继续使用新进程。

所以基本上我所需要的只是一个函数，我可以用它来调用命令，`ls`或者`cd`让它执行，然后返回到我的 shell。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:06:32.160

ouah 的回答基本上是正确的，但它不适用于`cd`. 您的 shell 需要将其实现为内置命令（即 shell 需要包含`cd`.

这样做的原因是`fork`首先创建当前进程的新副本（在本例中为 shell 的运行实例）。然后 exec 用您要运行的可执行文件覆盖新进程。当命令完成时，新进程终止并消失。如果您使用`cd`它，它将更改新进程的工作目录，但保持旧进程（shell）的工作目录完全不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:57:23.037

创建一个新进程，`fork`然后调用`exec`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:59:45.917

使用这样的东西：

```
if (fork ()==0) {
    execl ("/bin/sh",NULL);
} 
```

这将创建新进程（已经运行的进程的精确副本），然后用新进程替换它。请注意，在某些 CPU 不完全支持虚拟内存的环境中，这可能需要一些解决方法，并且您的原始进程太大以至于您无法复制它。

# .net - 在 UserControl 中引发一个事件并在主窗口中监听它

> ID：11794347
> 
> 赞同：0
> 
> 时间：2012-08-03T10:55:51.473
> 
> 标签：.net, wpf, events, event-handling, code-behind

我有一个用户控件 A。

在文件后面的代码中，我想引发一个特定的事件（由我创建）。

现在我希望主窗口（包含用户控件）正在监听事件。

在 WindowsForms 我用这种方式：

```
namespace MyProgramm
{
    public partial class MyClass
    {   
        public MyClass()
        {
            InitializeComponent();
            DataContext = this;
        }

        internal event MyEventHandler MyEvent;

        private void RaiseMyEvent()
        {
            if (MyEvent!= null)
            {
                MyEvent(this, ...);
            }
        }

        public string Name { get; set; }

    }

    internal delegate void MyEventHandler (MyClass sender, ...);
} 
```

如何在 WPF 中以一种很好的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:06:40.517

在我看来，最好使用[EventHandler](http://msdn.microsoft.com/en-us/library/db0etb8x.aspx)而不是您自己的委托类型。

此外，如果该类是公共的并且具有公共构造函数，则您可以将其设为`MyEvent`公共。

```
public event EventHandler<MyEventArgs> MyEvent; 
```

# java - 从传输中排除“.txt”文件 - Java

> ID：11794348
> 
> 赞同：-2
> 
> 时间：2012-08-03T10:55:55.967
> 
> 标签：java, file-io

我在一个文件夹中有几个文件：

piratesCaribbean_part001 piratesCaribbean_part002 name.txt

当我将文件传输到另一个文件夹时，我想排除 name.txt 被传输。因为其他 2 个文件没有扩展名，所以我无法指定扩展名来过滤掉我想要传输的文件。

我如何在 Java 中做到这一点？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:59:29.573

好吧，展示你的代码总是好的。

无论如何，对于您的问题：创建一个过滤器（实现`java.io.FileFilter`界面）。并使用该过滤器获取文件。

# android - 如何在 ListView Row 中添加多个 textView 和动态 ImageView

> ID：11794349
> 
> 赞同：0
> 
> 时间：2012-08-03T10:55:57.087
> 
> 标签：android, android-layout, android-listview, android-arrayadapter

有人请以正确的方式指导我。

我有以下设计：main.xml

```
 <?xml version="1.0" encoding="utf-8"?>  
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
      android:orientation="vertical"  
      android:layout_width="fill_parent"  
      android:layout_height="fill_parent">  

        <ListView android:layout_width="fill_parent"   
          android:layout_height="fill_parent"   
          android:id="@+id/topSongs">  
        </ListView>  

    </RelativeLayout> 
```

列表.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            android:src="@drawable/albumart_cocktail" />

        <TextView
            android:id="@+id/AlbumText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/imageView2"
            android:layout_toRightOf="@+id/imageView2"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/songText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/AlbumText"
            android:layout_centerVertical="true"
            android:textAppearance="?android:attr/textAppearanceSmall" />

    </RelativeLayout> 
```

活动代码：

我有这个数组：

```
 String[] AlbumText = {"Maximum", "Shangai", "Cocktail",
            "Rowdy Rathore", "Bol Bachan"
    };
    String[] songText = {"Sunday", "Monday", "Tuesday",
              "Wednesday", "Thursday"
    }; 
```

以及特定歌曲的 5 张图片（专辑封面）。我正在设置这样的数组：

```
setListAdapter(new ArrayAdapter<String>(this,
    R.layout.list, R.id.songText, songText));
setListAdapter(new ArrayAdapter<String>(this,
    R.layout.list, R.id.AlbumText, AlbumText)); 
```

我知道上面的那个是错误的，我需要知道如何以正确的方式做到这一点。

**我的问题：**我需要实现一个带有 2 个 textView 和 1 个专辑封面的 listView，因此我使用了 list.xml 文件中的相对布局。至少我知道如何将一个数组发送到 textView，我真的不知道如何更改特定行的图像。

请有人以正确的方式指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T10:01:04.567

为了在列表视图的单行中开发一个包含 Imageview 和多个文本视图的联系人列表，我使用以下 xml 来定义列表视图中的每一行。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/pIcon"
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:contentDescription="@string/hello"
    android:paddingBottom="10dp"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:paddingTop="10dp">
</ImageView>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_toRightOf="@+id/pIcon"
    android:layout_alignBaseline="@+id/pIcon"
    android:layout_alignTop="@+id/pIcon" >

    <TextView
        android:id="@+id/pName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <TextView
        android:id="@+id/pNum"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello" />
</LinearLayout> 
```

我为列表视图定义了一个自定义适配器。自定义适配器的代码是

```
public class ContactListAdapter extends BaseAdapter {

private ArrayList<ContactListItem> contactListItems;
private Context context;

public ContactListAdapter(ArrayList<ContactListItem> contactListItems,
        Context context) {
    this.contactListItems = contactListItems;
    this.context = context;
}

@Override
public int getCount() {
    return contactListItems.size();
}

@Override
public Object getItem(int arg0) {
    return contactListItems.get(arg0);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        LayoutInflater mInflater = (LayoutInflater) context
                .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        convertView = mInflater.inflate(R.layout.contact_list_item, null);
    }
    // references to the list items
    TextView numTxt = (TextView) convertView.findViewById(R.id.pNum);
    TextView nameTxt = (TextView) convertView.findViewById(R.id.pName);
    ImageView peopleIcon = (ImageView) convertView.findViewById(R.id.pIcon);
    // set the value of the list items
    peopleIcon.setImageResource(contactListItems.get(position).getIcon());
    nameTxt.setText(contactListItems.get(position).getName());
    numTxt.setText(contactListItems.get(position).getNum());
    return convertView;
}

} 
```

为了获取联系人列表项，我定义了另一个类。该类的代码是

```
public class ContactListItem {
int pIcon;
String pNum;
String pName;

public ContactListItem() {
}

public ContactListItem(int pIcon, String pNum, String pName) {
    this.pIcon = pIcon;
    this.pNum = pNum;
    this.pName = pName;
}

public int getIcon() {
    return this.pIcon;
}

public String getNum() {
    return this.pNum;
}

public String getName() {
    return this.pName;
}

public void setIcon(int icon) {
    this.pIcon = icon;
}

public void setNum(String num) {
    this.pNum = num;
}

public void setName(String name) {
    this.pName = name;
}
} 
```

listview 用于片段中，您可以在活动中轻松使用它。

```
public class ContactFragment extends Fragment {
private ListView mContactList;

// array for the contact list
private String[] pNum;
private String[] pName;
private TypedArray pIcon;

private ArrayList<ContactListItem> contactListItems;
private ContactListAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // get the names of people in the contact list
    pName = getResources().getStringArray(R.array.pNames);
    // get the numbers of the people in the contact list
    pNum = getResources().getStringArray(R.array.pNumbers);
    // get the photos of the people in the list
    pIcon = getResources().obtainTypedArray(R.array.pIcons);
    // Initialise the contact list adapter
    contactListItems = new ArrayList<ContactListItem>();
    // add the items to array list
    for (int i = 0; i < 5; i++) {
        contactListItems.add(new ContactListItem(
                pIcon.getResourceId(i, -1), pNum[i], pName[i]));
    }
    pIcon.recycle();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View rootView = inflater.inflate(R.layout.contact_us_layout, container,
            false);

    return rootView;
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    // set the title of the activity
    ((MainActivity) getActivity()).setTitle("CONTACT US");
    // get a reference to the contact list
    mContactList = (ListView) view.findViewById(R.id.contact_list);
    adapter = new ContactListAdapter(contactListItems, getActivity());
    mContactList.setAdapter(adapter);
}
} 
```

如果有人想查看代码以便在活动中使用它，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:16:27.903

数组

```
String[] AlbumText = {"Maximum", "Shangai", "Cocktail", "Rowdy Rathore", "Bol Bachan"
};
String[] songText = {"Sunday", "Monday", "Tuesday","Wednesday", "Thursday"
};

 // add values to adapter class like this

MobileArrayAdapter adapter = new MobileArrayAdapter(this, AlbumText , songText );
        list.setAdapter(adapter);                

        list.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {                      
              //here to use get values from adapter class and pass values use intent

                    Intent intent = new Intent(ListMobileActivity.this, Display.class);                         
                    intent.putExtra("AlbumText", one);
                    intent.putExtra("songText", two);                                    

                    startActivity(intent);          
                }
            }        
        });
    } 
```

显示活动

```
 message = getIntent().getExtras().getString("AlbumText");
            message1 = getIntent().getExtras().getString("songText");                                          

            text.setText(message);
            text1.setText(message1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:10:00.377

对于您想要实现的目标，我相信您将需要实现您的自定义适配器。
而且我认为两次设置适配器是不正确的，因为只有最后一行才会生效。

您可以查看[Android](http://androidresearch.wordpress.com/2012/01/07/building-a-custom-fancy-listview-in-android/)博客文章中的 Building a Custom Fancy ListView 以了解如何构建自定义适配器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:01:23.820

错误的：

```
setListAdapter(new ArrayAdapter<String>(this,
    R.layout.list, R.id.songText, songText));
setListAdapter(new ArrayAdapter<String>(this,
    R.layout.list, R.id.AlbumText, AlbumText)); 
```

创建自定义适配器的建议/步骤：

1.  创建自定义适配器并扩展 ArrayAdapter 或 BaseAdapter
2.  实现 getView() 方法。
3.  遵循视图支架设计模式。

是的，如果您有 10 个关于您的歌曲或专辑的详细信息，那么**您会创建 10 个 Array 或 Arraylist 吗？**而是使用 getter/setter 方法创建一个自定义类，为特定项目创建对象并添加到 ArrayList 中。因此，除了 10 个数组或 ArrayList 之外，它易于管理单个 ArrayList 以获取单个详细信息。

# ios5 - 在 uiscrollviewdelegate 中，是否可以将 targetContentOffset 设置为负值？

> ID：11794351
> 
> 赞同：4
> 
> 时间：2012-08-03T10:56:01.303
> 
> 标签：ios5, uiscrollview, uiscrollviewdelegate

我有一个 UIScrollView，它的宽度与其父视图相同。它有一个非常宽的 contentSize 并且水平滚动。

我正在尝试使用委托方法 scrollViewWillEndDragging:withVelocity:targetContentOffset: 将 targetContentOffset->x 设置为负值（即将内容区域的左边缘移动到更靠近屏幕中心的位置）。

设置该值似乎有效（NSLog 显示之前和之后的更改）但滚动视图似乎忽略了修改后的 targetContentOffset 并且只是在 0 处结束滚动。

```
-(void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset
{
    NSLog(@"target: %@", NSStringFromCGPoint(*targetContentOffset));
    if (targetContentOffset->x <= 0.0)
    {
        targetContentOffset->x = -300;
    }

    NSLog(@"target: %@", NSStringFromCGPoint(*targetContentOffset));
} 
```

有人知道这是否可以使用这种方法完成，还是我应该以其他方式完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-21T07:24:29.900

我已经设法通过使用`contentInset`属性来解决类似的问题。

这是 Swift 中的示例：

```
func scrollViewWillEndDragging(scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer<CGPoint>) {
    // Determine threshold for dragging to freeze content at the certain position
    if scrollView.contentOffset.y < -50 {
        // Save current drag offset to make smooth animation lately
        var offsetY = scrollView.contentOffset.y
        // Set top inset for the content to freeze at
        scrollView.contentInset = UIEdgeInsetsMake(50, 0, 0, 0)
        // Set total content offset to preserved value after dragging
        scrollView.setContentOffset(CGPoint(x: 0, y: offsetY), animated: false)
        // Make any async function you needed to
        yourAsyncMethod(complete: {() -> Void in
            // Set final top inset to zero
            self.tripsTableView.contentInset = UIEdgeInsetsMake(0, 0, 0, 0)
            // Set total content offset to initial position
            self.tripsTableView.setContentOffset(CGPoint(x: 0, y: -50), animated: false)
            // Animate content offset to zero
            self.tripsTableView.setContentOffset(CGPoint(x: 0, y: 0), animated: true)
        })
    }
} 
```

您可以改进它以用于水平滚动

# jquery - 如何创建一个带有 jQ grid 的模式弹出窗口？

> ID：11794353
> 
> 赞同：0
> 
> 时间：2012-08-03T10:56:00.917
> 
> 标签：jquery, asp.net-mvc-3, jqgrid

我正在寻找一个简单的 ASP.NET MVC 3 示例，说明如何使用 jqgrid 实现模式窗口？所以我想先打开一个弹出窗口，然后在弹出窗口中显示网格。有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:47:54.660

[这](http://jqueryui.com/demos/dialog/)是我所知道的最简单的模态窗口实现。你应该可以把任何你想要的东西放在里面。

# c++ - 在 C++ 中，在不使用 Windows 句柄的情况下更改光标位置。Qbasic模仿慢

> ID：11794355
> 
> 赞同：0
> 
> 时间：2012-08-03T10:56:20.350
> 
> 标签：c++, handler, qbasic

有时我需要在屏幕的某个位置写东西（例如：第 10 列和第 20 行）。我在网上搜索，发现它是通过使用 windows.h 的 windows 处理程序完成的。

是的，使用句柄很快但有点复杂，所以我编写了一个只使用 printf(string) 的类，并以适合屏幕的方式更改字符串，并且每个 printf 命令都填充整个 80x24 控制台屏幕。该类模仿 QBasic 的 CLS 、 LOCATE x,y 和 PRINT 命令。

**问题：**有没有一种更简单的方法可以到达屏幕中的任何位置并放置一个字符或一个点（绘图）而不使用 Windows 句柄或像我这样的慢速类？

![这是示例输出：](../Images/d0a2220f11ea534e6bff1428797db273.png)

我的 QBASIC 课程太慢了，我每秒只能使用几次。VC++ 10.0 Windows XP

谢谢你的时间。

这是我的课和一些例子：

```
// print_test.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
class QBASIC
{
public:
QBASIC()
{
    for(int i=0;i<(80*23);i++)
    {
        default_fill[i]=' ';
        current_fill[i]=' ';
    }
    default_fill[80*23]=NULL;
    current_fill[80*23]=NULL;
    row=0;
    column=0;
    window_number=0;

}
void locate(int x,int y)
{
    row=y;
    column=x;
    return;
}
void print(char* text)
{
    int length=strlen(text);
    for(int i=0;i<length;i++)
    {
        current_fill[row*80+column+i]=text[i];
    }
    row++;
    column=0;
    printf("%s",current_fill);

    return;
}
void cls()
{
    for(int i=0;i<(80*24);i++)
    {
        current_fill[i]=default_fill[i];
    }
    column=0;
    row=0;
    printf("%s",current_fill);

}
void window(int x1,int y1,int x2,int y2,char*text,int id)
{
    //178 wall code
    window_buffer[window_number]=new unsigned char[1000];
    window_number++;
    for(int i=x1;i<(x2+1);i++)
    {
        current_fill[i+80*y1]=178;
        current_fill[i+80*y2]=178;

    }
    for(int j=y1;j<(y2+1);j++)
    {
        current_fill[x1+80*j]=178;
        current_fill[x2+80*j]=178;

    }
    int length=strlen(text);int temp_row=0;int temp_column=0;
    for(int i=0;i<length;i++)
    {
        if(current_fill[(x1+1+temp_column)+(y1+1+temp_row)*80+i]!=178)
        {
        current_fill[(x1+1+temp_column)+(y1+1+temp_row)*80+i]=text[i];
        }
        else
        {
            temp_row++;
            temp_column=-i;
            current_fill[(x1+1+temp_column)+(y1+1+temp_row)*80+i]=text[i];

        }

    }
    printf("%s",current_fill);
    return;
}
private:
unsigned char default_fill[80*23+1000];
unsigned char current_fill[80*23+1000];
int row,column;
unsigned char *window_buffer[10];//max windows number=10
int window_number;

};

int main()
{
QBASIC *mimic=new QBASIC();
mimic->cls();
mimic->locate(25,10);
mimic->print("x <--here is 26th column and 11th row");

mimic->locate(5,4);
mimic->print("x <--here is 6th column and 5th row");

mimic->locate(0,0);
mimic->print("x <--here is origin");

mimic->print("x <--here is sequantial print after");
mimic->print("x <--here is another");
int window_id_1=0,window_id_2=1;
mimic->window(20,5,28,9,"this is a window",window_id_1);
mimic->window(10,18,70,22,"this is another window from 10,18 to 70,22",window_id_2);

delete mimic;

getchar();// waiting to see the screen before exiting. press enter to continue
return 0;
} 
```

我认为没有解决办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:18:21.823

Ok, I will continue using handles again.

```
void LOCATE(int x, int y)
{
  COORD newPosition = { x, y };
  HANDLE h = GetStdHandle(STD_OUTPUT_HANDLE);
  SetConsoleCursorPosition(h, newPosition);
} 
```

# r - 将 pairwise.wilcox.test 测试的输出转换为列表

> ID：11794358
> 
> 赞同：1
> 
> 时间：2012-08-03T10:56:35.130
> 
> 标签：r, list

我想从pairwise.wilcox.test转换输出矩阵：

```
> df <- data.frame(obs = c(rep("a", 10), rep("b", 10), rep("c", 10), rep("d", 10)), 

                   vars = c(runif(10, 1, 3), runif(10, 1, 6), runif(10, 3, 7), runif(10, 2, 9)))

> pairwise.wilcox.test(df$vars, df$obs)$p.value
             a          b         c
b 6.299985e-01         NA        NA
c 6.495053e-05 0.02052437        NA
d 6.495053e-05 0.01554483 0.6299985 
```

进入一个列表，例如：

```
a  b  6.299985e-01
a  c  6.495053e-05
a  d  6.495053e-05
b  c  0.02052437
b  d  0.01554483
c  d  0.6299985 
```

有什么简单的方法吗？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:00:26.667

你可以用这个

```
temp <-pairwise.wilcox.test(df$vars, df$obs)$p.value
df <- data.frame(expand.grid(dimnames(temp)),array(temp))
na.omit(df) 
```

# ios - 用 NSFileManager 替换 CoreData persistantStore 是否安全？

> ID：11794368
> 
> 赞同：3
> 
> 时间：2012-08-03T10:57:03.333
> 
> 标签：ios, ipad, core-data, nsfilemanager, uimanageddocument

我有一个与我的应用程序完美配合的 CoreData 数据库。数据库存储用户保存的预设。我想让用户能够通过 iTunes 使用文件共享来备份数据库。

基本上我想：

1.  备份：数据库 -> 用户可以在设备之间传输的文件

2.  恢复：文件 -> 数据库

我想到的最直接的方法就是简单地复制和替换persistentStore。像这样。。

这就是我创建数据库的方式：

```
self.database = [[UIManagedDocument alloc] databaseURL]; 
if (![[NSFileManager defaultManager] fileExistsAtPath:[self.database.fileURL path]]) {
    [self.database saveToURL:self.database.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) { }]; 
```

}

这就是我替换persistentStore的方式：

```
- (void)restoreBackupWithBackupURL:(NSURL *)backupURL {
// close the current document
[self.database closeWithCompletionHandler:^(BOOL success) {        
    // GET PERSISTENT STORE URL
    NSURL *databaseURL = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    databaseURL = [databaseURL URLByAppendingPathComponent:@"Default Database"];
    databaseURL = [databaseURL URLByAppendingPathComponent:@"StoreContent"];
    databaseURL = [databaseURL URLByAppendingPathComponent:@"persistentStore"];

    // DELETE PERSISTENT STORE
    NSError *error;
    BOOL deleted  = [[NSFileManager defaultManager] removeItemAtURL:databaseURL error:&error];
    if (!deleted) {
        NSLog(@"Error deleting file: %@", error.localizedDescription);
        return;
    }

    // COPY BACKUP PERSISTENT STORE
    BOOL copied = [[NSFileManager defaultManager] copyItemAtURL:backupURL toURL:databaseURL error:&error];
    if (!copied) {
        NSLog(@"Error copying file: %@", error.localizedDescription);
        return;
    }

    // INITIALIZE
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"Default Database"];

    self.database = [[UIManagedDocument alloc] initWithFileURL:url]; 
}]; 
```

}

我有它的工作，但是，我不确定它是否是一个安全和首选的解决方案（核心数据的新手）。有输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:51:26.657

如果您的用法足够简单，那通常应该没问题。

如果您对大型二进制数据使用外部链接，则还需要复制这些文件。

如果您使用文件包（或 UIManagedDocument），您将需要整个文件包，而不仅仅是 sql 存储。

如果您使用的是 iCloud，您还有其他一些事情需要担心......

# java - 为什么 javac “-source” 标志不起作用？

> ID：11794369
> 
> 赞同：3
> 
> 时间：2012-08-03T10:57:03.210
> 
> 标签：java, javac

我正在测试`javac -source`标志，我对它应该如何工作感到有点困惑。

请参阅此代码作为示例。它是不兼容的 Java5 代码，因为`isEmpty()`在该版本的 JDK 中没有为 String 定义该方法。

```
public class TestJavac {
   public static void Main(String args[]) {
   String pippo = "pippo";   
   pippo.isEmpty();
   }
} 
```

尝试编译使用：

```
javac -source 5 TestJavac.java 
```

然后它起作用了！这对我来说听起来很奇怪，但也许有一些我忽略了。我的`JAVA_HOME`观点`1.6 JDK`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T11:00:22.287

source 选项仅适用于语言级别，不适用于 API（由 JDK 运行时库提供）。

有一个单独的选项 (-bootclasspath -extdirs) 来指定要使用的 JDK（并且您需要获取适当的 jar 文件）。

请注意，还有 -target （控制输出字节码版本）。

您应该始终指定所有（甚至使用较旧的 JDK 进行编译，无论如何您或多或少都需要第二个开关才能工作）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:03:40.867

源标志仅用于验证语言功能，来自`-source`标志的文档：

```
1.3  The compiler does not support assertions, generics, or other
     language features introduced after Java SE 1.3.

1.4  The compiler accepts code containing assertions, which were 
     introduced in Java SE 1.4.

1.5  The compiler accepts code containing generics and other language 
     features introduced in Java SE 5.

5    Synonym for 1.5.

1.6  No language changes were introduced in Java SE 6\. However, encoding 
     errors in source files are now reported as errors instead of warnings 
     as in previous releases of Java SE.

6    Synonym for 1.6.

1.7  This is the default value. The compiler accepts code with features 
     introduced in Java SE 7. 
```

如您所见，Java 6 中没有引入任何更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:01:43.033

`-source`仅检查 java 语法，不检查包含的库。例如它忽略了`@since 1.6`:(

同样`-target`会产生类，这些类将在旧版本的 JVM 上加载但可能无法运行。

[http://vanillajava.blogspot.co.uk/2012/02/using-java-7-to-target-much-older-jvms.html](http://vanillajava.blogspot.co.uk/2012/02/using-java-7-to-target-much-older-jvms.html)

# c# - 如何更新非 .txt 文件而不是重新下载它

> ID：11794370
> 
> 赞同：0
> 
> 时间：2012-08-03T10:57:04.973
> 
> 标签：c#, file, download, overwrite

我目前正在开发一个提供多种功能的 C# 应用程序。其中之一是在每次启动时检查是否存在具有不同大小的特定文件的新“版本”。如果有，我希望应用程序更新它，但实际上并不重新下载它。我知道这对于使用 StreamWriter 等的文本文件是可能的。

该文件当前位于我的保管箱公用文件夹中，仅用于测试目的。我对更新的意思很简单，如果可以只下载还不是本地文件一部分的文件部分，从而减少更新文件所需的时间。

您是否也将其他文件类型转换为文本以进行更新？如果是这样，怎么做？还有其他选择吗？

干杯

# c# - 我为我的 asp 应用程序创建了一个登录名，但每次我登录时，它都不会将我重定向到安全文件夹

> ID：11794371
> 
> 赞同：0
> 
> 时间：2012-08-03T10:57:07.113
> 
> 标签：c#, asp.net

当我登录我的 asp 应用程序时，我配置它应该带我到 Forms- Secure 区域。我在成员资格中添加了角色，以便只有管理员可以看到此选项。但是当我用管理员登录时，它要求我再次登录。就像不承认我已登录。

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:03:09.757

如果您使用 FormsAuthentication 调用 SetAuthCookie 并重定向。检查 ReturnUrl 查询字符串变量并在那里重定向或将用户发送到默认帐户页面。

此外，在您登录后，您还可以使用 FireBug 来确保设置了安全 cookie（名称在 web.config 中定义），如果没有，则存在更深层次的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T11:06:50.603

在页面加载事件中添加这个希望它会工作它在 mvc 中运行良好不确定 asp.net

[授权（角色=“管理员”）]

# php - PHP MySQL 喜欢的地方

> ID：11794372
> 
> 赞同：-1
> 
> 时间：2012-08-03T10:57:11.753
> 
> 标签：php, mysql

我正在尝试使用 mysql select 仅返回某个列“类别”包含 id 的结果，例如在字段中可能有“1,2,4”。我想使用一个变量来查看该 id 是否存在于该字段中。

到目前为止的代码：

```
 function returnSQLByCategory($criteria) {
    $lat = $criteria['lat'];
    $lng = $criteria['lng'];
    $categoryid = $criteria['categoryid'];
    $page_number = $criteria['page_number'];
    $nb_display = $criteria['nb_display'];

    //if($page_number=='') $page_number=1;
    //if($nb_display=='') $nb_display=10;
    $start = ($page_number*$nb_display)-$nb_display;

    $sql = "SELECT company, name, lng, lat, address, city, country, zip, link,
    ( 3959 * acos( cos( radians('".mysql_real_escape_string($lat)."') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('".mysql_real_escape_string($lng)."') ) + sin( radians('".mysql_real_escape_string($lat)."') ) * sin( radians( lat ) ) ) ) AS distance 
    FROM locations WHERE categoryid LIKE '%$categoryid%'";

    $sql .= " ORDER BY distance";

    return $sql;
    } 
```

这不起作用，并且必须返回“1”，因为我只能看到 categoryid 为“1”的行。如果我手动输入语句“2”或示例，它会按预期工作！

非常感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:20:38.277

```
SELECT 
    company, 
    name, 
    lng, 
    lat, 
    address, 
    city, 
    country, 
    zip, 
    link 
FROM 
    locations 
WHERE 
    MATCH (categoryid) AGAINST ($categoryid IN BOOLEAN MODE) 
```

使用 MATCH 怎么样，尽管您的类别 ID 字符串需要用一个空格分隔，而不是逗号分隔。ie('1 2 3 4') 并在你的 sql 语句中用单引号括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:00:18.850

你为什么不使用 IN ？

```
categoryid IN ('.$categoryid.') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T11:02:02.793

```
$categoryid = 1;
$categoryid = mysql_real_escape_string($categoryid);

$sql = "SELECT * FROM `locations` WHERE categoryid = '$categoryid'";

$result = mysql_query($sql); 
```

# ruby-on-rails - 视图中字段的 Rails 迭代

> ID：11794375
> 
> 赞同：1
> 
> 时间：2012-08-03T10:57:28.950
> 
> 标签：ruby-on-rails, iteration

我想迭代出一些字段名称，将索引号附加到字段名称，例如`claim_1`，`claim_2`等`claim_3`

简化视图：

```
<% (1..4).each_with_index do |index| %>
    <%= f.label :claims_index %> 
<% end %> 
```

如何使索引分别为 1、2、3、4 或其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:01:26.247

```
<% (1..4).each_with_index do |index| %>
    <%= f.label "claim_#{index}" %> 
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:36:39.857

实际上，您不需要`each_with_index`迭代器-

```
<% 1.upto(4) do |i| %>
  <%= f.label "claims_#{i}" %> 
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:16:31.630

不确定这是否是您所追求的，但 each_with_index 需要两个参数，因此您可以这样做：

```
<% @claims.each_with_index do |claim,index| %>
   <%= "#{index+1}: #{claim.name}" %>
<% end %> 
```

这将打印出每个声明名称和索引 (1,2,3,4) +1 使其基于 1，而不是基于 0。

或者，只需使用：

```
<% (1..4).each do |i| %>
  <%= i %>
<% end %> 
```

# java - 如何向每个 JTree 节点添加不同的 JComboBox？

> ID：11794376
> 
> 赞同：0
> 
> 时间：2012-08-03T10:57:31.660
> 
> 标签：java, swing, jcombobox, jtree

我有一个 JTree，我正在为我正在编写的游戏数据库程序填充技能。

有几个类别和子类别（实际技能），然后是低于该类别的技能（有时）。目前我正在用一个技能类、内部的一些选项和一些枚举来模拟这个，再加上一个检查技能是否是一个类别的方法（称为 isCategory）。另外两点需要注意：

1.  **不同类型的技能表现不同。**
    有些买了一次，有些买了好几次，有些可以选择等等
2.  **不同的类别包含不同的技能。**
    例如，武器技能类别有不同类型的武器，但护甲技能位于不同的部分。

我已经看到了一个非常好的示例，它通过单元格渲染器将 ComboBox 附加到树中的每个节点。这是我找到的[示例。](http://www.cs.cf.ac.uk/Dave/HCI/HCI_Handout_CALLER/node156.html#SECTION000137000000000000000)

我理解上面的代码，但我看不到如何将组合框附加到节点，而不是树？我已经阅读了“[如何使用 Trees](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html) ”，然后运行并查看了一些[tree 演示](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html)的代码。我可以制作基本的树，但我发现教程有点迟钝，并且缺乏足够的细节来让自己弄清楚如何进行。我发现了另一个仅将叶节点呈现为复选框的[示例](http://www.java2s.com/Tutorial/Java/0240__Swing/CreatinganEditorJustforLeafNodes.htm)，这要复杂得多。

显然我想将两者结合起来，能够拥有不同的类别能够拥有不同的技能，并且不同的技能具有不同的熟练程度。但是，我能想到的唯一方法是为不同的类型提供不同的 JComboBoxModel，但我不知道该怎么做，我也不知道怎么做。我试图编辑复选框示例以使用 ComboBoxes，但对于我的生活，我无法弄清楚。

有人可以给我一个提示，告诉我应该采取什么方法，因为我是 Java 新手并且正在努力弄清楚该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:25:42.513

您应该实施`TreeCellRenderer`以及`TreeCellEditor`. 两者都应该返回`JComboBox`不同的模型。您应该根据值参数（实际上是树节点）在`getTreeCellEditorComponent`/中决定选择哪种模型。`getTreeCellRenderingComponent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:33:28.897

> [这](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)是一个很好的起点吗？

从概念上讲，是的。两者都`JTable`使用`JTree`享元模式来渲染和编辑单元格/节点。

*   这个[例子](https://stackoverflow.com/a/3200937/230513)引用了一个基本的`TreeCellRenderer`.
*   此[示例](https://stackoverflow.com/a/11113648/230513)`TreeCellEditor`说明了使用默认渲染器的简单方法。
*   此[示例](https://codereview.stackexchange.com/a/4447/6692)显示了一个`Outline`包含`JTable`和的功能的视图`JTree`。

![图片](../Images/7c1220f9da6f43a6289eb3845f86da6a.png)

# python - 使用生成器作为 sorted() 的输入而不是列表理解是否值得

> ID：11794381
> 
> 赞同：2
> 
> 时间：2012-08-03T10:58:03.290
> 
> 标签：python, optimization, generator, list-comprehension, sorted

> **可能重复：**
> [sorted() 使用生成器表达式而不是列表](https://stackoverflow.com/questions/4154571/sorted-using-generator-expressions-rather-than-lists)

我们都知道使用生成器而不是一直实例化列表可以节省时间和内存，尤其是在我们大量使用推导式的情况下。

这是一个问题，请考虑以下代码：

```
output = SomeExpensiveCallEgDatabase()
results = [result[0] for result in output]
return sorted(results) 
```

对 sorted 的调用将返回结果的排序列表。如下声明结果然后调用排序是更好还是更糟？

```
results = (result[0] for result in output) 
```

我的猜测是对 sorted() 的调用将遍历生成器并实例化一个列表本身，以便对其运行快速排序或合并排序。所以在这里使用生成器没有任何优势。这个假设正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:02:30.323

我相信你的假设是正确的，因为没有先将整个列表放在内存中就没有简单的方法来排序集合（至少肯定不是默认排序算法，如果我没记错的话，TimSort）。

看看这个： [sorted() 使用生成器表达式而不是列表](https://stackoverflow.com/questions/4154571/sorted-using-generator-expressions-rather-than-lists)

要创建新列表，内置的 sorted 方法使用`PySequence_List`：

> PyObject* PySequence_List(PyObject *o) 返回值：新引用。返回与任意序列 o 内容相同的列表对象。返回的列表保证是新的。

两种方法的优缺点：

**内存方面：**

返回的列表是用于排序版本的列表，因此这意味着在这种情况下，在任何给定时间，只有一个列表完全存储在内存中，使用生成器版本。

这使得生成器版本在内存方面更有效率。

**速度：**

在这里，具有整个列表的版本获胜。

要基于生成器创建新列表，必须创建一个空列表（或最多使用第一个元素），并将每个后续元素附加到列表中，这可能会引发可能的重新尺寸调整步骤。

要基于以前的列表创建新列表，列表的大小是事先知道的，因此可以一次分配并分配每个条目（可能，这里还有其他优化工作，但我不能回那个）。

因此，关于速度，列表获胜。

“什么是最好的”的答案归结为任何工程领域中最常见的答案......*这取决于*......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T11:03:27.140

不，您仍在创建一个全新的列表`sorted()`

```
output = SomeExpensiveCallEgDatabase()
results = [result[0] for result in output]
results.sort()
return results 
```

将更接近生成器版本。

我相信最好使用生成器版本，因为 Python 的某些未来版本*可能*能够利用这一点来更有效地工作。免费获得加速总是很好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:02:10.330

是的，你是对的（虽然我相信排序例程仍然称为 tim-sort，在 uncle timmy <wink-ly y'rs> 之后）

# php - 我如何在 PHP 中显示狮身人面像搜索结果

> ID：11794383
> 
> 赞同：1
> 
> 时间：2012-08-03T10:58:07.970
> 
> 标签：php, sphinx

我已经安装并配置了 sphinx怎么可能显示 sphinx 搜索结果`PHP` ，但我无法通过`PHP`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:00:21.053

检查 Sphinx 库：[Sphinx 文档](http://php.net/manual/en/book.sphinx.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:58:49.987

下面的代码用于从 Sphinx 搜索结果中获取全部内容目前我们需要在 $SQL 行中提供 ID

```
<?php
echo "Welcome To Sphinx Search Site </br>";
$q = "html";
$sphx = sphinx_search("html", 0, 20);
$sphx['122'];

$ids = 122;

$sql =  "SELECT post_title , post_content FROM wp_posts WHERE  ID = '122'";
db();

if(  !($r = mysql_query($sql)))
    die("[MYSQL]".mysql_error() . mysql_errno() );

$max = $sphx['total'];
$num_rows = $sphx['docs'];

echo "<b>Displaying {$num_rows} results of {$max}</b><br /><br />";

while($row = mysql_fetch_assoc($r) ) {
    echo "{$row['post_title']} <br />{$row['post_content']}<br /><hr />";    
    }
mysql_free_result($r);

/*
 * SPHINX Search
 */

/*
 * Search sites by Keywords using sphinx; with an option to search sites tags only
 * @param string $q te keyword
 * @param int $i id of the first result to return
 * @param int $max max results to return
 * @param bollen $url set to true to return matches from the 'url' column only
 *
 * @return string $ids comma seperated list of ids
 */
function sphinx_search($q, $i, $limit, $post_type=true){
        require_once 'sphinxapi.php';

        $ids = '33500';

        $cl = new SphinxClient();
        $cl->SetServer( "192.168.0.89" , 9667);
        $cl->SetMatchMode( SPH_MATCH_EXTENDED  );
        $cl->SetSortMode ( SPH_SORT_RELEVANCE );
        $cl->SetFieldWeights(array('post_title' => 300));
        $cl->SetLimits( $i , $limit);
        $q = $cl->EscapeString( $q);

        //search url only
        $q = $post_type ? "@post_type {$q}" : $q;

        $result = $cl->Query( $q, 'sites sitesDelta' );

        if ( $result === false )
                error_log( '[SPHINX]Query failed: ' . $cl->GetLastError() );
        elseif ( $cl->GetLastWarning() )
                error_log( '[SPHINX]WARNING: ' .  $cl->GetLastWarning() );

        if ( !empty($result["matches"]) ){
            foreach ( $result["matches"] as $doc => $docinfo )
                 $ids .= "$doc,";
            $ids = substr( $ids, 0, -1 );
       }else
           return false;

       return  array( 'ids' => $ids, 'total' => $result['total'], 'docs' => count($result["matches"])  );

}

/*
 * Connect to MySQL
 */
function db(){

    if( !empty($GLOBALS['db']) ) return true;

    if( !$GLOBALS['db'] = mysql_connect('localhost', 'root', '' ) ) {
        die("[MYSQL]".mysql_error() . mysql_errno() );
    }
    elseif(!mysql_select_db('sphinxiirmulti')) {
        die("[MYSQL]".mysql_error() . mysql_errno() );
    }    

}
?> 
```

# ios - 使用自定义 NSURLProtocol 在 UIWebView 中通过 AJAX 调用加载文本文件失败

> ID：11794385
> 
> 赞同：4
> 
> 时间：2012-08-03T10:58:18.090
> 
> 标签：ios, uiwebview

我想使用`UiWebView`. 站点的某些组件（即使用 AJAX 调用加载的 Web 服务结果）应替换为本地数据。

考虑以下示例：

*文本.txt：*

```
foo 
```

*page1.html：*

```
<html><head>
    <title>test</title>
    <script type="text/javascript" src="jquery.js"></script>
</head>
<body>
<div id="target"></div>
<script type="text/javascript">
    function init(){
        $.get("text.txt",function(text){    
            $("#target").text(text);
        });
    }
    $(init);
</script>
</body></html> 
```

*视图控制器：*

```
@interface ViewController : UIViewController <UIWebViewDelegate>
    @property (nonatomic,assign) IBOutlet UIWebView *webview;
@end

@implementation ViewController
    @synthesize webview;
    //some stuff here
    - (void)viewDidLoad
    {
        [super viewDidLoad];
        [NSURLProtocol registerClass:[MyProtocol class]];
        NSString *url = @"http://remote-url/page1.html";
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];
        [request setCachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData];
        [webview loadRequest:request];
    }
@end 
```

*我的协议：*

```
@interface MyProtocol : NSURLProtocol

@end

@implementation MyProtocol

+ (BOOL) canInitWithRequest:(NSURLRequest *)req{
    NSLog(@"%@",[[req URL] lastPathComponent]);
    return [[[req URL] lastPathComponent] caseInsensitiveCompare:@"text.txt"] == NSOrderedSame;
}

+ (NSURLRequest*) canonicalRequestForRequest:(NSURLRequest *)req{
    return req;
}

- (void) startLoading{

    NSLog(@"Request for: %@",self.request.URL);
    NSString *response_ns = @"bar";
    NSData *data = [response_ns dataUsingEncoding:NSASCIIStringEncoding];
    NSURLResponse *response = [[NSURLResponse alloc] initWithURL:[self.request URL] MIMEType:@"text/plain" expectedContentLength:[data length] textEncodingName:nil];

    [[self client] URLProtocol: self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageNotAllowed];
    [[self client] URLProtocol:self didLoadData:data];
    [[self client] URLProtocolDidFinishLoading:self];
    [response release];
}

- (void) stopLoading{
    NSLog(@"stopLoading");
}

@end 
```

如果我没有注册我的自定义 URLProtocol，页面会正确显示。如果调用了我`startLoading()`，则会加载内容并`stopLoading()`在之后触发。但是在 UIWebView 上什么都没有发生。我试图做一些错误处理，但既没有抛出 JS AJAX 错误，也没有被`didFailLoadWithError`调用`UIWebViewDelegate`。

我尝试了另一种情况并创建了一个仅加载图像的 HTML 页面：

```
<img src="image.png" /> 
```

并修改了我的 URLProtocol 以仅处理图像的加载-这可以正常工作。也许这与 AJAX 调用有关？

你知道问题可能是什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T21:50:39.437

我有同样的问题，经过几天的拉头发终于解决了：

您的问题来自您创建响应的方式，您必须创建状态 200 响应并在必要时强制 WebView 允许跨域请求：

```
NSDictionary *headers = @{@"Access-Control-Allow-Origin" : @"*", @"Access-Control-Allow-Headers" : @"Content-Type"};
NSHTTPURLResponse *response = [[NSHTTPURLResponse alloc] initWithURL:request.URL statusCode:200 HTTPVersion:@"1.1" headerFields:headers]; 
```

您可以在我的回答中看到我的完整工作实现：

[如何使用 NSURLProtocol 模拟 AJAX 调用？](https://stackoverflow.com/questions/15224071/how-to-mock-ajax-call-with-nsurlprotocol/15234787#15234787)

希望这会有所帮助，文森特

# kindle - 获取 *.mobi 或 *.prc 文件的封面图片

> ID：11794389
> 
> 赞同：3
> 
> 时间：2012-08-03T10:58:25.133
> 
> 标签：kindle, mobipocket

我正在尝试解析移动图书，只想获取图书的一些信息，即：标题、作者和封面（如果有）。我正在关注[mobi 格式规范](http://wiki.mobileread.com/wiki/MOBI#FLIS_Record)。

现在，我可以正确获取标题和作者，但是当涉及到封面时，我得到了这些信息：

1.  我得到图像记录块索引：

    > ```
    >  108  0x6c    4   First Image index   First record number (starting with 0) that contains an image. Image records should be sequential. 
    > ```

2.  我得到从开始到图像记录的偏移量

3.  我试图获得这些领域，但我没有从我的任何书中得到它们：

> ```
> EXTH
>  201  4   coveroffset  Add to first image field in Mobi Header to find PDB record containing the cover image  <EmbeddedCover>
>     202   4   thumboffset  Add to first image field in Mobi Header to find PDB record containing the thumbnail cover image    
>     203       hasfakecover 
> ```

所以，现在我得到了一个原始二进制块，我将它与其他 png 文件和 jpg 文件进行了比较，没有发现任何共同点。我还尝试将此二进制块保存到 test.png 或 test.jpg，但它似乎不是真实的图像。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:26:24.070

我可以完美地将我的第一个 image_record_block 保存为 jpg。而且因为它们是压缩图像，所以不会受到 mobi 或 palmdoc 压缩。您应该在文本编辑器中打开原始文件，看看这是否真的是任何图像格式。这可能是您希望索引号错误或文件指针不在正确的偏移量中，请尝试使用 fseek()

# blackberry - Blackberry VerticalfieldManager 虚拟滚动视图尺寸太大

> ID：11794395
> 
> 赞同：0
> 
> 时间：2012-08-03T10:58:47.937
> 
> 标签：blackberry, scrollview

在黑莓（OS 7.0）上开发，我创建了一个扩展的垂直字段管理器：

```
_myVFM = new MyViewManager(Manager.USE_ALL_WIDTH | Manager.USE_ALL_HEIGHT | Manager.VERTICAL_SCROLL){}; 
```

但是，当我滚动视图时，虚拟滚动视图的大小显得太大了。即，我可以向下滚动很多，而不是需要，但我不知道为什么？

任何机构任何快速的想法？我确实有一个这样创建的背景图像：

```
public void paint(Graphics graphics)
{
    Bitmap backgroundBitmap = Bitmap.getBitmapResource("bg.png");
    Bitmap newBackground = new Bitmap(Display.getWidth(), Display.getHeight());
    backgroundBitmap.scaleInto(newBackground, Bitmap.FILTER_LANCZOS, Bitmap.SCALE_TO_FILL);

    graphics.clear();
    graphics.drawBitmap(0, 0, Display.getWidth(),            
             Display.getHeight(), newBackground, 0, 0);                 
    super.paint(graphics);
} 
```

请和谢谢，

洞穴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:14:56.923

无需在构造函数中使用 USE_ALL_HEIGHT。

// 改为使用这个

```
_myVFM = new MyViewManager(Manager.USE_ALL_WIDTH | Manager.VERTICAL_SCROLL){}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T20:54:20.347

您可以重新定义方法来定义管理器的高度

```
protected void setExtent(int width, int height) {
    super.setExtent(width, myHeight);
} 
```

为了不重复背景图片需要重新定义下面的方法，返回false

```
protected boolean isScrollCopyable() {
    return false;
} 
```

另一个评论是，从绘画方法获取图像是一种不好的做法。你所做的是每次调用paint方法都会得到这个图像。最好先获取图像，然后再使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:49:57.730

```
 public MyScreen() {
    super(NO_VERTICAL_SCROLL); 
```

我设法使用“NO_VERTICAL_SCROLL”样式参数在我的 MainScreen 扩展中解决了这个问题

结合 Rupak 的建议，即在我的 Vertical Field Manager 的构造函数中设置背景而不是覆盖绘画（ [https://gist.github.com/3248319](https://gist.github.com/3248319)）

现在一切似乎都很好 - 感谢大家的帮助。

洞穴

# java - 在 Java 中呈现 excel 工作表报告的最佳实践是什么？

> ID：11794399
> 
> 赞同：6
> 
> 时间：2012-08-03T10:58:54.427
> 
> 标签：java, excel, reporting, apache-poi, jexcelapi

我需要生成一个类似于以下模板的 excel 工作表报告—— ![Excel 报告](../Images/9de423bb9364556d0565932f18c62a53.png)

我知道这可以使用**`JExcelApi`**和之类的库来完成**`Apache POI`**。但是我想知道是否有办法通过编写类似于编写`Apache Velocity`用于发送电子邮件的模板的模板来实现这一点。

如果有生成此类报告的标准、良好实践方法，它是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T12:04:05.290

为什么不使用 Excel 创建样式模板？对应该替换的值使用占位符（如 ${name.of.field}），否则按需要设置所有样式。使用不同的占位符来标记模板的结尾（这将允许您在此空间之外写评论或其他数据，以记录您的模板）。

然后，通过 JExcelApi 或 Apache POI，

*   打开模板文件，找到模板结束标记。
*   打开目标文件
*   对于每条记录，从模板中复制字段，用 ${xyz} 值替换它们的实际内容，并在到达模板结束标记时停止。
*   关闭目标和模板

模板修改将非常容易。唯一的问题是保持字段名称同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:22:01.620

您可以使用像[i-net Clear Reports](http://www.inetsoftware.de/de/products/clear-reports)这样的标准 Java 报告库并使用 excel 输出格式。

# visual-studio-2010 - Visual Studio 2010 中的“错误 MSB3073” - 构建后命令不处理换行符？

> ID：11794400
> 
> 赞同：3
> 
> 时间：2012-08-03T10:59:01.780
> 
> 标签：visual-studio-2010, msbuild, post-build-event

我在 Visual Studio 2010 中有一个后期构建命令：

```
setlocal
cd D:\1.5\BINZ
if %errorlevel% neq 0 goto :cmEnd
D:
if %errorlevel% neq 0 goto :cmEnd
"C:\Program Files\CMake 2.8\bin\cpack.exe" -C $(Configuration) --config ./CPackConfig.cmake
if %errorlevel% neq 0 goto :cmEnd
:cmEnd
endlocal & call :cmErrorLevel %errorlevel% & goto :cmDone
:cmErrorLevel
exit /b %1
:cmDone
if %errorlevel% neq 0 goto :VCEnd 
```

在一台 PC 上可行，而在另一台 PC 上则不行：我每行都收到错误 MSB3037。

```
3>C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(113,5): error MSB3073: The command "setlocal

3>C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(113,5): error MSB3073: cd D:\1.5\BINZ 
```

等等

一件奇怪的事情是，当我打开项目属性并查看我上面提到的构建后事件命令时 - 我看到的换行符是正方形。

会不会是换行的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:07:20.297

这是一个完全不同的问题（路径长度超过 256），它与构建后事件语法无关 - 所以这个问题应该完全删除。

# php - 尝试通过带有 IN 子句的 php 从 mysql 表中获取数据（收藏夹）

> ID：11794401
> 
> 赞同：0
> 
> 时间：2012-08-03T10:59:01.937
> 
> 标签：php, mysql, where-clause, where-in

这是我的表“用户”的外观：

```
Name Password Favorites

Test Test     1 2 3 4 
```

在我的表“数据”中，我有

```
Comment ID
"Test"  2 
```

我希望用户能够将评论保存到其收藏夹，因此在第一个表格中，我将所有收藏夹保存在一行中，因此表格不会变得太大。我尝试通过 implode 和 IN 子句将它们全部恢复。现在它似乎不起作用，我希望这里的人可以给我一些关于如何克服这个问题的有用输入:)

```
$favoritenstring = ($GET_["favoritenstring"]);

$query = "SELECT * FROM $table_id WHERE ID in ('" . implode("','",$favoritenstring) . "')"; 
```

现在我在上面的查询行上收到了这个错误：传递了无效的参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:36:28.920

您必须首先从字符串中删除斜杠：

```
$string = stripslashes($favoritenstring);
$query = "SELECT * FROM $table_id WHERE ID in " .$string; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:07:49.990

改变这个...

从

```
($GET_["favoritenstring"]); 
```

至

```
($_GET["favoritenstring"]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T11:08:02.803

尝试这个：

```
$query = "SELECT * FROM $table_id WHERE ID in ( ";

$myVars=explode($favoritenstring);
$numFavs=count(explode(' ', $favoritenstring));
for($i=0;$i<$numFavs;$i++)
{
    $query.=$myVars[$i];
    if($i<($numFavs-1))
    {
        $query.=", ";
    }
}

$query.=");"; 
```

# php - Az 指数上市

> ID：11794402
> 
> 赞同：-2
> 
> 时间：2012-08-03T10:59:05.013
> 
> 标签：php, indexing

这里我的桌子看起来像

```
|A Bay of Blood|
|The Adventure|
|Blood River|
|Dooms Day|
|....| 
```

我想显示 az 索引

```
A B C D E F...... Z 
```

我只想提供可在表格中找到的字母的可点击链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:10:19.590

```
<a href="index.php?alphabet=a">A</a> | <a href="index.php?alphabet=b">B</a> ....

$qry = "select <col_name> from <table_name> where <col_name> LIKE '".$_GET['alphabet']."%'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:04:06.743

一个简单的方法是使用这样的查询：

“从你的表中选择第 1 列，第 2 列，其中标题如 '$letter%'”

...其中 $letter 是 A、B 或 C 等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:04:34.013

制作一个数组，其中字母是键，值是`true`（可点击的链接）或`false`（仅显示）。将所有值初始化为`false`：

```
$letters = array_fill_keys(range('A', 'Z'), false); 
```

遍历标题并将与每个标题的第一个字母对应的值设置为`true`：

```
foreach ($titles as $title) {
    $letters[$title[0]] = true;
} 
```

然后遍历结果并相应地显示一个链接或仅显示字母：

```
foreach ($letters as $letter => $link) {
    if ($link) ...
    else ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:08:12.490

这应该工作：

```
$abc = array ('A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z');
foreach ($abc as $v) {
    $ret = $db->query("SELECT COUNT (column) WHERE column LIKE '" .$v. "%'");
    $count = $ret->fetchColumn();
    if ($count == 0) 
        echo '<li>' .$v. '</li>';
    else
        echo '<li><a href="link.php">' .$v. '</a></li>';
} 
```

# java - 在 JUnit 测试之间启动和停止 Jetty 服务器

> ID：11794405
> 
> 赞同：9
> 
> 时间：2012-08-03T10:59:11.377
> 
> 标签：java, testing, junit, jersey, jetty

我正在尝试模拟我的程序的各种运行测试，在一个方法中设置一个 Jetty 服务器`@Before`并在一个`@After`.

我的第一个测试将成功运行，但是在尝试在以下测试中发布数据`com.sun.jersey.api.client.ClientHandlerException: java.net.SocketException: Software caused connection abort: recv failed`时会发生。有什么方法可以让我的服务器（和客户端？）在测试之间干净地关闭？

我的前后代码如下：

```
@Before
public void startServer() {
    try {
        server = new Server(8080);
        ServletContextHandler root = new ServletContextHandler(server, "/ingest", ServletContextHandler.SESSIONS);

        root.addServlet(new Servlet(), "/*");

        server.start();

        client = new Client();
        client.setChunkedEncodingSize(16 * 1024);

        FileInputStream stream = new FileInputStream(testFile);
        try {
            client.resource(uri).type(MediaType.APPLICATION_OCTET_STREAM).post(stream);
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            Closeables.closeQuietly(stream);
            client.destroy();
        }
    } catch (Exception e) {
        e.printStackTrace();
        fail("Unexpected Exception when starting up server.");
    }
}

@After
public void shutDown() {
    if (output.exists()) {
        output.delete();
    }
    try {
        server.stop();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T20:00:51.147

测试场景的最佳实践是不对端口进行硬编码。这只会在其他地方运行时导致冲突，尤其是在负载中等或项目种类繁多的 CI 系统上。

在 Jetty 9 中（在 6、7、8 中的想法相同）

```
_server = new Server();
_connector = new ServerConnector(_server);  
_server.setConnectors(new Connector[] { _connector });
_server.start();
int port = _connector.getLocalPort(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:08:08.773

事实证明，我所拥有的实际上正在工作，但是由于 的异步特性`server.stop()`，我的新服务器试图在前一个服务器的关闭线程完全执行之前进行实例化。

一个简单`Thread.sleep(n)`的 after`server.stop()`为服务器提供了在测试之间关闭所需的时间。不幸的是，服务器似乎过早地声称它已经停止，因此通过检查服务器状态来阻止确切的解决方案 - 但也许有一些东西要在服务器上轮询；可能检查线程池可以提供一致的结果？

在任何情况下，由于这仅用于测试目的，因此仅启动服务器`@BeforeClass`并关闭它`@AfterClass`可以防止整个服务器关闭 kerfuffle，但要注意在测试套件的同一端口上启动另一台服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T06:54:42.703

I handle this using a couple of things. First, after each test, make sure your server is shutdown, and `join()` on it. Either do this in `@After` or `@AfterClass` depending on what you are doing.

```
server.stop();
server.join(); 
```

Next, before each test, make sure the port is available. I use the snippet available at **[Sockets: Discover port availability using Java](https://stackoverflow.com/questions/434718/sockets-discover-port-availability-using-java)**

Then, the setup code becomes

```
public static void waitForPort(int port) {
    while( !available(port) ) {
        try { Thread.sleep(PORT_SLEEP_MILLIS); } 
        catch (InterruptedException e) {}
    }
}

@Before
public void setUp() throws Exception {
    waitForPort(9876);
    waitForPort(9877);

    // Make sure the ports are clear
    Thread.sleep(500);
} 
```

The little extra `sleep` at the end ensures that the port is available; because just checking that it is available might make the system not reuse it. Another option is to just set `SO_REUSEADDR` when you are opening the port after having checked it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T23:01:01.633

我的猜测是它发生了端口冲突。我们实际上是为我们的测试这样做的，令人惊讶的是，性能影响并没有那么糟糕。正如答案所示，我们首先在所有测试之前启动单个服务器，但我们必须切换到支持突变测试。依赖 Maven 的一个缺点是您必须在旁边启动它才能在 IDE 中运行单个测试。

对于任何感兴趣的人，我们的实现在这里：[embedded-test-jetty](https://github.com/TheLadders/embedded-test-jetty)。它在不同的端口上同时运行多个服务器（用于并行测试），检查端口可用性，支持 SSL 等。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-04T09:50:22.587

我意识到这并不能直接回答您的问题...但是当您有多个需要运行服务器的集成测试时，在`@Before`和方法中启动和停止服务器效率低下，因为每次测试都会重新启动服务器`@After`.

您可能需要考虑围绕整个测试套件启动和停止服务器。如果您使用 Maven 进行构建，您可以结合使用故障安全和 Jetty 插件来完成此操作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-03T11:31:17.397

尝试：

```
server = new Server();
    SocketConnector connector = new SocketConnector();
    connector.setPort(8080);
    server.setConnectors(new Connector[] { connector });
    WebAppContext context = new WebAppContext();
    context.setServer(server);
    context.setContextPath("/your-context");
    context.setWar("path to war");
    server.addHandler(context);
    Thread monitor = new MonitorThread();
    monitor.start();
    server.start();
    server.join(); 
```

然后在某处说：

```
 server.stop() 
```

有用的文章： http:
[//www.codeproject.com/Articles/128145/Run-Jetty-Web-Server-Within-Your-Application](http://www.codeproject.com/Articles/128145/Run-Jetty-Web-Server-Within-Your-Application)

# powershell - 读取所有文件，更改内容，再次保存

> ID：11794410
> 
> 赞同：3
> 
> 时间：2012-08-03T10:59:35.983
> 
> 标签：powershell

我正在尝试替换某个目录结构中所有文件的内容。

```
get-childItem temp\*.* -recurse |
    get-content |
    foreach-object {$_.replace($stringToFind1, $stringToPlace1)} |
    set-content [original filename] 
```

我可以从原始 get-childItem 获取文件名以在 set-content 中使用它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T11:08:32.657

为每个文件添加处理：

```
get-childItem *.* -recurse | % `
{
    $filepath = $_.FullName;
    (get-content $filepath) |
        % { $_ -replace $stringToFind1, $stringToPlace1 } |
        set-content $filepath -Force
} 
```

关键点：

1.  `$filepath = $_.FullName;`— 获取文件路径
2.  `(get-content $filepath)`— 获取内容并*关闭*文件
3.  `set-content $filepath -Force`— 保存修改的内容

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T12:00:14.570

您可以简单地使用`$_`，但您也需要`foreach-object`在每个文件周围加上一个。虽然@akim 的回答会起作用，但使用`$filepath`是不必要的：

```
gci temp\*.*  -recurse | foreach-object { (Get-Content $_) | ForEach-Object { $_ -replace $stringToFind1, $stringToPlace1 } | Set-Content $_ } 
```

# regex - Powershell 正则表达式组替换

> ID：11794412
> 
> 赞同：19
> 
> 时间：2012-08-03T10:59:40.747
> 
> 标签：regex, powershell, replace

我想替换文件夹中每个脚本文件中的一些文本，我正在尝试使用这个 PS 代码：

```
$pattern = '(FROM [a-zA-Z0-9_.]{1,100})(?<replacement_place>[a-zA-Z0-9_.]{1,7})'
Get-ChildItem -Path 'D:\Scripts' -Recurse -Include *.sql | ForEach-Object { (Get-Content $_.fullname) -replace $pattern, 'replace text' | Set-Content $_.fullname } 
```

但我不知道如何保留表达的第一部分，而只是替换第二部分。知道我该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-03T11:29:49.957

不确定为表名提供的*正则表达式*是否正确，但无论如何您可以使用变量等替换为捕获`$1`，`$2`并遵循以下[语法](http://www.powershelladmin.com/wiki/Powershell_regular_expressions)：`'Doe, John' -ireplace '(\w+), (\w+)', '$2 $1'`

请注意，替换模式需要使用单引号 ( `''`) 或`$`将替换组说明符的符号转义 ( `"`$2 `$1"`)。

```
# may better replace with     $pattern = '(FROM) (?<replacement_place>[a-zA-Z0-9_.]{1,7})'
$pattern = '(FROM [a-zA-Z0-9_.]{1,100})(?<replacement_place>[a-zA-Z0-9_.]{1,7})'

Get-ChildItem -Path 'D:\Scripts' -Recurse -Include *.sql | % `
{
   (Get-Content $_.fullname) | % `
     { $_-replace $pattern, '$1 replace text' } | 
     Set-Content $_.fullname -Force
} 
```

如果您需要在替换表达式中引用*其他*变量（可能），您可以使用双引号字符串并用反引号转义捕获美元

```
 { $_-replace $pattern, "`$1 replacement text with $somePoshVariable" } | 
```

# c# - 从 URL 获取端点 IP

> ID：11794413
> 
> 赞同：1
> 
> 时间：2012-08-03T10:59:41.757
> 
> 标签：c#, http, ssl

使用 TCP 客户端进行 http post。我得到的结果与异常不同。没有 HTTP 200 好的...

这是我的要求：

```
GET / HTTP/1.1
Accept: text/html, application/xhtml+xml, */*
Accept-Language: de-DE
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)
UA-CPU: AMD64
Accept-Encoding: gzip, deflate
Host:www.mywebsite.com
Connection: Keep-Alive
Cache-Control: max-age=0 
```

这是我的回应：

```
HTTP/1.1 302 Moved Temporarily
Server: Apache-Coyote/1.1
Location: http://somewhere.com (url changed)
Content-Length: 0
Date: Fri, 03 Aug 2012 10:38:14 GMT 
```

它告诉我重定向到“位置”。下一个请求应该是对[http://somewhere.com](http://somewhere.com)的 GET并引用 www.mywebsite.com ？

***另一种情况是 https 链接。它通常与 HostEntry 返回的 IP 完全不同。如何获得IP？c# 有简单的方法吗？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:03:57.623

是的，302 表示 url 不在您想要的位置（主机可能已经移动它，或者更喜欢您使用 www 而不是顶点）。因此，只需对新 URL 使用 HTTP GET。

就IP地址而言，恐怕不是那么简单，一个主机名可以有多个IP地址

```
string stackoverflow= "stackoverflow.com"
IPAddress[] addresslist = Dns.GetHostAddresses(stackoverflow);

foreach (IPAddress theaddress in addresslist)
{
   Console.WriteLine(theaddress.ToString());
} 
```

使用多个 IP 的情况很多（主要是负载平衡情况）。

# java - 在 servlet 和 jdbc 中找不到类异常

> ID：11794416
> 
> 赞同：0
> 
> 时间：2012-08-03T10:59:59.387
> 
> 标签：java, database, servlets, jdbc

我正在使用带有 jdbc 的 servlet 程序，但是在执行程序时，出现`class not found`异常。我已包含`ojdbc14.jar, servlet.api`在 Eclipse (Junos) 构建路径中，但仍然遇到相同的异常。

```
java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@//localhost:1521/orcl
at java.sql.DriverManager.getConnection(DriverManager.java:604)
at java.sql.DriverManager.getConnection(DriverManager.java:221)
at p1.dao.Goodsmain.custm(Goodsmain.java:26)
at p1.dao.Goodsmain.addgoods(Goodsmain.java:42)
at p1.goodsserv.doGet(goodsserv.java:54)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:04:59.687

确保为您的应用程序提供 JDBC 驱动程序。

将驱动程序包含在应用程序的 web-inf/lib 文件夹中，它应该可以正常工作

另请注意，根据[http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html ，此驱动程序适用于 JDK 1.4 和 1.5](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html)

**更新** （如果您的服务器运行的是 1.4 或 1.5 以外的版本，它将无法工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:07:24.753

**你的例外**的第一行

 **`No suitable driver found for jdbc:oracle:thin:@//localhost:1521/orcl`

表示**未找到驱动程序**

您应该知道所有**外部库**都必须放在`lib`您的`web-inf`文件夹中，即。`web-inf/lib/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T08:59:53.237

> java.sql.SQLException: 找不到适合 jdbc:oracle:thin:@//localhost:1521/orcl 的驱动程序

您应该致电：

```
Class.forName ("oracle.jdbc.OracleDriver"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:06:54.130

希望您有单独的应用程序服务器（tomcat）来加载 webapp 并遇到此异常。如果是这种情况，那么 ojdbc14.jar 应该在您的 webapp 目录的 WEB-INF/lib 文件夹下。

请尝试具体说明异常和您使用的应用服务器以获得适当的响应。**

# java-me - 如何在 s40 设备上安装大小大于 1MB 的应用程序？

> ID：11794417
> 
> 赞同：2
> 
> 时间：2012-08-03T11:00:05.000
> 
> 标签：java-me, j2mepolish, nokia-s40

我正在开发一个 J2ME 应用程序。它的大小为 1.5MB。

当我尝试使用诺基亚 PC 套件安装它时，出现此错误“应用程序无法安装到手机，文件太大”。

如何安装此应用程序或以任何方式减小其大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:55:51.570

有没有用proguard对jar文件进行混淆优化？

当用户启动应用程序时，您可以将 jar 文件中的资源（图像、视频、声音...）作为后台任务下载吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T09:39:12.133

1.  在手机中下载uc浏览器。
2.  然后使用 uc 浏览器的下载器下载您的应用程序。.
3.  它会将您的应用程序保存为 name_jar。.
4.  退出uc浏览器。.
5.  转到您下载应用程序的目录。.
6.  现在将您的文件从 name_jar 重命名为 name.jar。

. . 这就是现在运行应用程序的全部内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:05:04.190

尝试通过使用低分辨率图像来减小大小，听起来像 jpg 或 mp3 并使用混淆，它会减少 jar 的空间并在模拟器设置中设置最大 jar 大小。

# linux - 内核模块从用户空间获取数据

> ID：11794427
> 
> 赞同：0
> 
> 时间：2012-08-03T11:00:27.523
> 
> 标签：linux, module, kernel, communication

在不使用 netlink 和不使用可能不存在的功能（例如 debugfs）的情况下，将一些数据发送到已加载和运行的内核模块的正确方法是什么？

我希望看到一种干净且安全的方法来做到这一点，它应该适用于大多数内核（或者最好是所有现代内核），或者充其量是它的近似值。

想要向模块发送数据的用户是root用户，数据量大概在64 kiB以下，由一系列字符串组成。

我已经考虑过尝试从模块中读取文件，这不仅由于各种原因而受到高度反对，而且很难做到。我查看了 netlink，socket() 告诉我我的内核不支持。我查看了 debugfs，我的内核也不支持它。

显然我可以使用不同的内核，但正如我所提到的，我想要一种正确的方法来做到这一点。如果有人可以向我展示一个简单的模块示例，该模块将只对从用户空间发送的字符串执行 printk()，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-24T11:03:20.010

... 一个简单的模块示例，它只对从用户空间发送的字符串 printk() 执行 printk()，printkm.c：

```
#include <linux/module.h>
#include <linux/proc_fs.h>
MODULE_DESCRIPTION("printk example module");
MODULE_AUTHOR("Dietmar.Schindler@manroland-web.com");
MODULE_LICENSE("GPL");

static
ssize_t write(struct file *file, const char *buf, size_t count, loff_t *pos)
{
    printk("%.*s", count, buf);
    return count;
}

static struct file_operations file_ops;

int init_module(void)
{
    printk("init printk example module\n");
    struct proc_dir_entry *entry = proc_create("printk", 0, NULL, &file_ops);
    if (!entry) return -ENOENT;

    file_ops.owner = THIS_MODULE,
    file_ops.write = write;
    return 0;
}

void cleanup_module(void)
{
    remove_proc_entry("printk", NULL);
    printk("exit printk example module\n");
} 
```

示例使用：

```
root@kw:~# insmod printkm.ko
root@kw:~# echo a string >/proc/printk 
root@kw:~# dmesg|tail -1
[193634.164459] a string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T00:42:19.647

我认为您可以使用 char 设备。查看[Linux 设备驱动程序第 3](http://www.makelinux.net/ldd3/)章第 3 章。使用 *copy_to_user* 和 *copy_from_user* 函数，您可以安全地将数据复制到用户空间或从用户空间复制数据。

# php - 如何从视图中调用组件的功能？

> ID：11794428
> 
> 赞同：1
> 
> 时间：2012-08-03T11:00:29.070
> 
> 标签：php, yii, yii-extensions

Q1 : 如何从视图中调用组件的功能？

我的功能之一是使用大多数控制器。

```
public function actionDynamicdepartment()
    {

            //Department
            $data = Department::model()->findAll('p_id=0 AND company_id=:company_id', array(':company_id'=>(int) $_POST['company_id']));
            $data = CHtml::listData($data,'id','name');
            $dddepatment = "<option value=''>Please select a department</option>"; 
            foreach($data as $value=>$name)
                $dddepatment .= CHtml::tag('option', array('value'=>$value),CHtml::encode($name),true);

            //Section and Team
            $ddsection = "<option value=''>Please select a section</option>";
            $ddteam = "<option value=''>Please select a team</option>";

            // return data (JSON formatted)
            echo CJSON::encode(array(
              'dddepartment'=>$dddepatment,
              'ddsection'=>$ddsection,
              'ddteam'=>$ddteam
            ));
    } 
```

我想把它放到组件或某个地方。

我想从我的观点中调用这些函数。例如

```
<div class="row">
    <?php echo $form->labelEx($model,'company_id'); ?>
    <?php
        $records = Company::model()->findAll();
        $company = CHtml::listData($records, 'id', 'name');

        echo $form->dropDownList($model,'company_id', $company, array('prompt'=>'Please select a company',
                'ajax' => array(
                    'type'=>'POST', //request type
                    'url'=>CController::createUrl('department/dynamicdepartment'), //url to call.
                    'dataType'=>'json',
                    'data'=>array('company_id'=>'js:this.value'),  
                    'success'=>'function(data) {
                        $("#FaMovehistory_department_id").html(data.dddepartment);
                        $("#FaMovehistory_section_id").html(data.ddsection);
                        $("#FaMovehistory_team_id").html(data.ddteam);
                    }',
                )
            )
        ); 
    ?>
    </div> 
```

或 Q2：将这些功能放在控制器之一（department.php）中。我可以从不同的角度调用这些函数吗？

Q3 : 如果像 Q2 那样做，有流量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:53:01.773

我用来做的是定义一个`CWidget`（就像 Dmitry 说的那样）然后我创建一些函数（我倾向于将它们设为静态，就好像它是一个库一样），所以如果，例如，你的 Widget 被称为“部门”，你可以这样做：

```
Yii::import("application.components.Departments");
Departments::actionDynamicdepartment(); 
```

很简单。对于这种情况，您可以返回该 CJson 而不是回显。但是，您可能对此方法的静态响应不感兴趣。

对于您的最后一个问题，我倾向于以更经典的方式处理下拉列表的数量，使用 ajax 调用（我使用 jquery）请求中央控制器并将一些变量传递给它。当然，这会产生流量。

因此，总而言之，如果您想接收部门列表并避免在当前页面期间更改它，您可以选择小部件/组件。另一方面，**如果****您的下拉菜单需要与表单中的其他项目一起响应，则控制器的操作是您最好的**（并且可能是唯一的）**选项**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:21:04.593

您需要创建一个小部件而不是组件。

每个小部件都有自己的视图，您将能够在其类逻辑中描述他的行为（将代码从控制器中移出）然后在主视图中调用它：

```
 <?php $this->widget('path.to.your.widget') ?> 
```

阅读更多：[http](http://www.yiiframework.com/doc/api/1.1/CWidget) ://www.yiiframework.com/doc/api/1.1/CWidget和[http://www.yiiframework.com/doc/guide/1.1/en/basics.view#widget](http://www.yiiframework.com/doc/guide/1.1/en/basics.view#widget)

# r - 在R中垂直堆叠多个图，具有相同的x轴但不同的Y轴

> ID：11794436
> 
> 赞同：16
> 
> 时间：2012-08-03T11:01:12.330
> 
> 标签：r, plot, data-visualization

我有一个带有多个时间序列向量的 data.frame 与 date:time 向量。我想绘制所有相关向量，垂直堆叠在具有相同 X 轴但唯一 Y 轴的单独图表上。与此类似的图表：![在此处输入图像描述](../Images/f2d38a865ab9eeedcbb3fbe053ab4732.png)

我的数据如下所示：

```
 dt <- structure(list(DEPTH = c(156, 156.5, 157.4, 158.15, 158.8, 159.2, 
159.75, 160.35, 160.85, 161.1, 161.6, 162.05, 162.5, 162.65, 
163.15, 163.45, 163.55, 163.8, 163.65, 163.75, 163.8, 163.8, 
163.75, 164.45, 164.8, 165.35, 165.65, 165.75, 166.1, 166.75, 
167, 167.2, 167.65, 168, 168.8, 169.3, 169.7, 170.2, 170.65, 
170.9, 171.45, 171.65, 172, 172.1, 172.25, 173, 173.4, 173.9, 
174.2, 174.6, 175, 175.25, 175.45, 175.9, 176.25, 176.7, 177, 
177.15, 177.5, 178, 178.5, 179.05, 179.2, 180.7, 181.05, 181.25, 
181.5, 181.7, 182.1, 182.3, 182.35, 182.75, 183.1, 183.65, 184.3, 
184.6, 185.1, 185.15, 185.3, 185.15, 185.25, 185.3, 185.15), 
    Smooth.Vert.Speed = c(-0.550000000000011, -0.5, -0.900000000000006, 
    -0.75, -0.650000000000006, -0.399999999999977, -0.550000000000011, 
    -0.599999999999994, -0.5, -0.25, -0.5, -0.450000000000017, 
    -0.449999999999989, -0.150000000000006, -0.5, -0.299999999999983, 
    -0.100000000000023, -0.25, 0.150000000000006, -0.0999999999999943, 
    -0.0500000000000114, 0, 0.0500000000000114, -0.699999999999989, 
    -0.350000000000023, -0.549999999999983, -0.300000000000011, 
    -0.0999999999999943, -0.349999999999994, -0.650000000000006, 
    -0.25, -0.199999999999989, -0.450000000000017, -0.349999999999994, 
    -0.800000000000011, -0.5, -0.399999999999977, -0.5, -0.450000000000017, 
    -0.25, -0.549999999999983, -0.200000000000017, -0.349999999999994, 
    -0.0999999999999943, -0.150000000000006, -0.75, -0.400000000000006, 
    -0.5, -0.299999999999983, -0.400000000000006, -0.400000000000006, 
    -0.25, -0.199999999999989, -0.450000000000017, -0.349999999999994, 
    -0.449999999999989, -0.300000000000011, -0.150000000000006, 
    -0.349999999999994, -0.5, -0.5, -0.550000000000011, -0.149999999999977, 
    -1.5, -0.350000000000023, -0.199999999999989, -0.25, -0.199999999999989, 
    -0.400000000000006, -0.200000000000017, -0.049999999999983, 
    -0.400000000000006, -0.349999999999994, -0.550000000000011, 
    -0.650000000000006, -0.299999999999983, -0.5, -0.0500000000000114, 
    -0.150000000000006, 0.150000000000006, -0.0999999999999943, 
    -0.0500000000000114, 0.150000000000006), DIVE_SURF = c("dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21", "dive21", "dive21", 
    "dive21", "dive21", "dive21", "dive21"), X = c(2050L, 2062L, 
    2026L, 2078L, 2058L, 2076L, 2050L, 2068L, 2060L, 2078L, 2058L, 
    2088L, 2080L, 2065L, 2088L, 2076L, 2084L, 2105L, 2084L, 2102L, 
    2123L, 2096L, 2074L, 2054L, 2090L, 2089L, 2080L, 2078L, 2068L, 
    2092L, 2084L, 2082L, 2094L, 2056L, 2062L, 2067L, 2082L, 2084L, 
    2091L, 2058L, 2076L, 2098L, 2104L, 2090L, 2058L, 2050L, 2080L, 
    2074L, 2074L, 2082L, 2070L, 2088L, 2062L, 2062L, 2082L, 2086L, 
    2070L, 2081L, 2092L, 2058L, 2060L, 2076L, 2094L, 2083L, 2072L, 
    2107L, 2104L, 2066L, 2110L, 2104L, 2072L, 2076L, 2065L, 2042L, 
    2066L, 2093L, 2080L, 2083L, 2108L, 2107L, 2086L, 2096L, 2126L
    ), Y = c(2036L, 2000L, 2049L, 1966L, 2042L, 2078L, 2072L, 
    2055L, 2036L, 2128L, 2044L, 2112L, 2066L, 2051L, 2102L, 2060L, 
    2054L, 2043L, 2034L, 2086L, 1980L, 2076L, 2003L, 2033L, 2107L, 
    1992L, 2028L, 2027L, 2024L, 2005L, 2050L, 2010L, 1944L, 2010L, 
    2046L, 2020L, 2088L, 2086L, 2034L, 2066L, 2060L, 2152L, 2044L, 
    2078L, 2040L, 2067L, 2080L, 2072L, 2073L, 2028L, 2066L, 2082L, 
    2030L, 2042L, 1990L, 2076L, 2054L, 2064L, 2016L, 2048L, 2029L, 
    2008L, 2090L, 2038L, 2026L, 2096L, 2002L, 2025L, 2001L, 2098L, 
    2061L, 2022L, 2054L, 2064L, 2043L, 2090L, 2042L, 2086L, 2073L, 
    2066L, 2040L, 2081L, 2087L), Z = c(2488L, 2484L, 2490L, 2486L, 
    2488L, 2492L, 2498L, 2490L, 2492L, 2484L, 2491L, 2494L, 2497L, 
    2493L, 2488L, 2493L, 2494L, 2484L, 2486L, 2487L, 2478L, 2490L, 
    2478L, 2493L, 2490L, 2486L, 2488L, 2486L, 2488L, 2482L, 2488L, 
    2480L, 2480L, 2488L, 2490L, 2490L, 2490L, 2489L, 2492L, 2490L, 
    2486L, 2480L, 2488L, 2491L, 2486L, 2488L, 2488L, 2494L, 2490L, 
    2488L, 2492L, 2498L, 2484L, 2491L, 2480L, 2491L, 2497L, 2487L, 
    2482L, 2490L, 2490L, 2478L, 2488L, 2492L, 2492L, 2482L, 2484L, 
    2489L, 2482L, 2484L, 2485L, 2492L, 2488L, 2493L, 2487L, 2490L, 
    2492L, 2488L, 2490L, 2487L, 2484L, 2486L, 2478L)), .Names = c("DEPTH", 
"Smooth.Vert.Speed", "DIVE_SURF", "X", "Y", "Z"), row.names = 7222:7304, class = "data.frame") 
```

我希望在具有共同 X 轴的单独图表上绘制 DEPTH、X、Y 和 Z。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T13:09:49.307

我同意@PaulHiemstra，ggplot2 是要走的路。

假设是`Smooth.Vert.Speed`您想要绘制的公共 x 轴变量`DEPTH`，`X`...`Y``Z`

```
library(ggplot2)
library(reshape2)

# Add time variable as per @BenBolker's suggestion
dt$time <- seq(nrow(dt))

# Use melt to reshape data so values and variables are in separate columns
dt.df <- melt(dt, measure.vars = c("DEPTH", "X", "Y", "Z"))

ggplot(dt.df, aes(x = time, y = value)) +
  geom_line(aes(color = variable)) +
  facet_grid(variable ~ ., scales = "free_y") +
  # Suppress the legend since color isn't actually providing any information
  opts(legend.position = "none") 
```

![针对一个常见的 x 变量绘制多个 y 变量](../Images/c7ab6d01742d0674634a0a46eaff0864.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T13:32:51.800

只是为了与众不同，让我提一个既不涉及 lattice 也不涉及 ggplot2 的解决方案——几年前我将其作为[条目 65](http://addictedtor.free.fr/graphiques/RGraphGallery.php?graph=65)发布到 Romain 的 R Graph Gallery ，[代码为 here](http://addictedtor.free.fr/graphiques/graphcode.php?graph=65)。它只是将图表堆叠起来，使用`par()`设置来保持它们堆叠。

请注意，垂直尺寸因选择而异，它们也可以很容易地具有相同的高度。

![在此处输入图像描述](../Images/5a407ac8e5a903b02c9defe57d938433.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-03T13:19:05.697

如果你想成为老式的，你可以使用`lattice`. 与@aaronwolen 不同，我假设数据集中缺少一个`time`变量，所以我做了一个：

```
dt$time <- seq(nrow(dt))
library(reshape2)
mm <- melt(subset(dt,select=c(time,DEPTH,X,Y,Z)),id.var="time")
library(lattice)
xyplot(value~time|variable,data=mm,type="l",
       scales=list(y=list(relation="free")),
       layout=c(1,4)) 
```

![在此处输入图像描述](../Images/749cadc6bda117c919ed6f0ddd4fb619.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-03T16:19:44.653

实际上，我已经找到了另一种使用 zoo 库的有趣方法：

```
library(zoo)
z <- with(dt, zoo(cbind(DEPTH, X, Y, Z),as.POSIXct(time))) 
plot.zoo(z,  ylab=c("Depth (m)", "Pitch Angle (degrees)", "Swaying Acceleration (m/s^2)", "Heaving Acceleration (m/s^2)"), col=c("black", "blue", "darkred", "darkgreen"), 
     xlab = c("Time"), lwd=2, ylim=list((rev(range(dt$DEPTH))), c(-90,90), c(-10,10), c(-10,10))) 
```

因此，在动物园图内，您可以将新轴标签创建为列表形式，并且所有图都可以有不同的颜色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T07:20:11.927

请阅读这个例子：

生成示例数据：

```
dt = read_table("Time        A       B       C       D
10:12:54    2376.2  1.462   3.462   48
10:12:55    2410    1.462   3.462   48
10:12:56    2400    1.462   3.462   48
10:12:57    2409    1.462   3.462   48.6
10:12:58    2400    1.462   3.462   48.6
10:12:59    2385.1  1.462   3.462   46.6
10:13:00    2400    1.462   3.462   46.6
10:13:01    2410    1.462   3.462   46.6
10:13:02    2400    1.462   3.462   46.6
10:13:03    2106    1.463   3.463   46.6
10:13:04    2406    1.463   3.463   44.8
10:13:05    2376.2  1.463   3.463   44.8
10:13:06    2406    1.463   3.463   44.8
10:13:07    2400    1.463   3.463   44.8")
dt$Time=as.POSIXct(dt$Time) 
```

如果你想快速绘制它，试试这个：

```
library(foqat)
geom_ts_batch(dt, panelgap=4) 
```

[![在此处输入图像描述](../Images/1c0eb3ea71841d83115034a0d28b1c48.png)](https://i.stack.imgur.com/DoBEn.png)

如果您想以更大的自由度绘制它，请尝试以下操作：

```
library(foqat)
library(patchwork)
blankx=theme(axis.title.x=element_blank(),axis.text.x=element_blank(),axis.ticks.x=element_blank())
p2=geom_ts(dt, yl=2, llist=2, lcc="blue", yllab="A")+blankx
p3=geom_ts(dt, yl=3, llist=3, lcc="red", yllab="B")+blankx
p4=geom_ts(dt, yl=4, llist=4, lcc="green", yllab="C")+blankx
p5=geom_ts(dt, yl=5, llist=5, lcc="grey", yllab="D", xlab="Time")
p2/p3/p4/p5 
```

[![在此处输入图像描述](../Images/8c8bd2722a361e212587163007674b4d.png)](https://i.stack.imgur.com/WrTzN.png)

# ruby - rspec 测试红宝石脚本

> ID：11794444
> 
> 赞同：2
> 
> 时间：2012-08-03T11:01:49.603
> 
> 标签：ruby, rspec

假设我们有一个 ruby​​ file.rb 像：

```
if __FILE__ == $0 then
  if ARGV[0] == 'foo'
    puts "working"
    # Dir.chdir(../)
    v = Someclass.new
    v.do_something
  end
end 
```

`working`它假设仅在文件被触发时打印`ruby file.rb foo`。
我的问题：如何在 rspec 中测试这种东西？

我的尝试如下。该文件运行但不在 rspec 测试范围内：
`Dir expected :chdir with (any args) once, but received it 0 times`

```
it 'should work' do
  FILE = File.expand_path('file.rb')
  RUBY = File.join(Config::CONFIG['bindir'], Config::CONFIG['ruby_install_name'])
  @v = Someclass.new
  Someclass.should_receive(:new).and_return @v
  @v.should_receive(:do_something)

  `#{RUBY} #{FILE} foo`
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:21:01.877

Backticks 运行新的 shell，执行命令，并将结果作为字符串返回。这就是它在您的范围之外运行的原因。Backticks 不关心脚本的内容：ruby、bash 或其他内容。

`chdir`，当然，只适用于这个新的外壳，所以似乎没有办法检查你的目录更改示例脚本（跟踪系统调用除外）。也许一些“真正的”脚本会做一些事情，输出更多，从而提供更多检查它的可能性。

# batch-file - 批处理文件生成文件

> ID：11794448
> 
> 赞同：0
> 
> 时间：2012-08-03T11:01:59.033
> 
> 标签：batch-file

好的，我正在尝试制作一个批处理文件来生成一系列文件和文件夹，但找不到如何去做。

我的点子：

```
FOR /f "Tokens=* delims=" %%I IN (export2.csv) DO call:create %%I GOTO:EOF

:create ECHO 1 >>%~pd0%1 
```

但它根本没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:06:42.430

由于我不知道您的数据文件看起来如何，因此很难在这里给出好的建议，但是您的代码可以稍微清理一下：

```
set "filepath=%~dp0"
for /f "tokens=* delims=" %%I in (export2.csv) do call :create "%%I"
rem This is needed to avoid stepping into the subroutine again
goto :eof

:create
rem This will create an empty file instead of one that contains a single line with 1
copy nul "%filepath%%~1"
goto :eof 
```

不过，这不会创建任何目录。您可以使用`md`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:25:39.667

不久前想通了，这就是我最终得到的。它将生成路径并使用 masterlist.csv 中列出的文件名创建一个空文件。

源代码

```
@ECHO OFF
CHDIR "%~dp0"
SET Count=0
ECHO/ Generating Necessary File, please Wait...
FOR /F %%A IN (Masterlist.csv) DO CALL:MKDIR %%A
EXIT /B

:MKDIR
SET /A Count+=1
SET "Path=%~dp1"
SET "File=%~nx1"
IF NOT EXIST "%Path%" MKDIR "%Path%
IF NOT EXIST "%Path%" CALL:ERROR "Path"
IF NOT EXIST "%Path%\%File%" ECHO/ >>"%Path%\%File%"
IF NOT EXIST "%Path%\%File%" CALL:ERROR
EXIT /B

:ERROR
IF NOT EXIST "Errorlog.csv" ECHO Error, Line Count>>Errorlog.csv
ECHO %~1, Line %Count%>>Errorlog.csv 
```

Masterlist.csv 中的一些示例行

```
2006\MS06-003\Office2000\office2000-kb892842-fullfile-enu.exe
2006\MS06-003\Office2003\office2003-kb892843-fullfile-enu.exe
2006\MS06-003\Office2003\WinSec-MS06-003-009-P44333-outlook2003-kb892843-fullfile-enu.exe
2006\MS06-003\OfficeXP\officexp-kb892841-fullfile-enu.exe
2006\MS06-006\WindowsMedia-KB911564-x86-ENU.exe
2006\MS06-007\2003\WindowsServer2003-KB913446-x86-ENU.exe
2006\MS06-007\XP\WindowsXP-KB913446-x86-ENU.exe
2006\MS06-012\2003\office2003-KB905756-FullFile-ENU.exe
2006\MS06-015\2000\Windows2000-KB908531-x86-ENU.EXE
2006\MS06-015\2003\WindowsServer2003-KB908531-x86-ENU.exe 
```

# opera - Opera Mobiles css3 渲染问题

> ID：11794451
> 
> 赞同：0
> 
> 时间：2012-08-03T11:02:20.160
> 
> 标签：opera, css, opera-mobile

在使用 Opera Mobile 测试我的网站时，我发现了一些严重的问题，我不知道它们为什么会发生以及如何解决它们。

下面是 FF (Windows) 和 Opera Mobile（FF 按预期渲染）之间的比较：

![在此处输入图像描述](../Images/65d1f63ad1e3c3bede65f9e6fdea46ae.png)

[这是带有源代码的jsfiddle](http://jsfiddle.net/Gezwm/)

以下是不同之处：

1.  第一张图片看起来很奇怪。
2.  第4张图消失了。
3.  图像部分/缺失`border-radius`。
4.  `box-shadow`不见了。

我很确定`box-shadow`和`border-radius`是问题的主要原因，因为删除它们时一切看起来都很好。

我想知道它为什么会发生以及如何解决它......

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:32:11.770

当您删除时`opacity`，它会更好吗？似乎有一个非常不幸的错误混合了盒子阴影和不透明度。它由 Opera 的 CORE-39908 跟踪。我会将您的示例 jsfiddle 示例添加到错误报告中。

# c# - 如何判断当前可见的设置魅力

> ID：11794453
> 
> 赞同：0
> 
> 时间：2012-08-03T11:02:35.543
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

如果我错了，请道歉，我正在使用 Windows 8 发布预览版和 C#(VS 2012) 开发 Metro 应用程序，我被设置的魅力所困。 **简介：**在我的应用程序中有两种模式管理员和用户，所以设置应该只能访问管理员，但是，当用户拿出设置魅力时，我们可以得到鼠标事件吗？或者有没有办法从应用程序获取用户正在尝试打开设置的通知。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:39:02.247

雷蒙德·陈是对的。当您的应用程序在“用户”模式下运行时，请勿使用“设置”超级按钮注册您的应用程序。当用户以管理员身份登录时，允许进行注册。非常简单的解决方案。

# android - Android游标使用字符串获取列索引

> ID：11794460
> 
> 赞同：2
> 
> 时间：2012-08-03T11:03:22.867
> 
> 标签：android, cursor

当我这样做时，`cursor.getColumnIndex(Database._F_A3)`它会按预期工作。

但如果我这样做

```
String dbColumn = "Database._F_A3";
cursor.getColumnIndex(dbColumn ); 
```

它给出了错误。

我相信这是因为`getColumnIndex()`将括号内的任何内容管理为要在列中搜索的字符串。

有什么办法可以做我想做的事吗？

收藏夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:07:05.050

```
String dbColumn = "Database._F_A3";
cursor.getColumnIndex(dbColumn ); 
```

上面的调用是完全错误的，因为它改变了你在数据库类中声明为静态的名称，

假设您在 Database 类中声明为，

```
public static String _F_A3 = "something"; 
```

现在如果你打电话，

```
String dbColumn = "Database._F_A3";
cursor.getColumnIndex(dbColumn );  // it means you are using Database._F_A3 
                 // as column name which doesn't exist instead of "something" 
```

所以，最好尝试使用

```
String dbColumn = Database._F_A3;  // without quotes
cursor.getColumnIndex(dbColumn ); 
```

# css - 从 html 页面中提取类/ID

> ID：11794463
> 
> 赞同：2
> 
> 时间：2012-08-03T11:03:30.270
> 
> 标签：css, dom, html-parsing

我需要为现有的 html 页面创建一个 css 样式表。是否有任何简单的方法可以使用脚本提取所有类和 id...我熟悉 python、java、c、javascript 和 php。这些语言有图书馆吗？对我来说似乎有点矫枉过正。感谢您的帮助。

干杯！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:06:10.227

检索`id`每个元素的 s 的最简单方法是简单地遍历具有 的元素`id`，然后检索它：

```
var idEls = document.querySelectorAll('*[id]'),
    ids = [];

for (var i=0, len=idEls.length; i<len; i++){
    ids.push(idEls[i].id);
} 
```

覆盖那些未实现的浏览器的一种方法`querySelectorAll()`是为*每个*元素创建一个 nodeList，然后迭代该（可能非常大）nodeList，测试`id`它，如果存在，将其推送到数组中：

```
var els = document.getElementsByTagName('*'),
    ids = [];

for (var i=0, len=els.length; i<len; i++){
    if (els[i].id){
        ids.push(els[i].id);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T11:07:17.823

使用 jquery，遍历元素并获取 id 和 class

```
$('html *').each(function(){
  console.log($(this).attr('id'), $(this).attr('class'))
}) 
```

# c++ - 可以 sizeof(std::list ) 因不同类型的 T 而有所不同？

> ID：11794464
> 
> 赞同：17
> 
> 时间：2012-08-03T11:03:33.530
> 
> 标签：c++, stl

我可以假设对于任何类型`T`，该类型`std::list<T>`将具有相同的恒定大小吗？为了清楚起见，我的意思是“主要”类型本身的大小，而不是它分配的内存的大小。

对我来说，假设它`T`本身的大小应该只影响使用分配器分配的列表节点的大小，这似乎是合乎逻辑的。

但是，有两件事可能会导致`sizeof(std::list<T>)`我能想到的变化：

1.  一个标准 C++ 库试图`std::list`通过将一些`T`实例放入`std::list<T>`自身来“优化”类型。这对我来说似乎是个坏主意，它可能违反了标准提出的“恒定时间”要求；
2.  一种标准 C++，具有`std::list<T>`某些类型的库特化，这些特化具有不同的大小。

我想不出（1）或（2）的任何用途，但我可能错了。

我正在考虑实现的是使用`std::list<T>`内部模板类使用固定大小的切片分配器。

* * *

注意：这是关于不同类型的差异`T`，而*不是*不同分配器的差异。我将对所有实例化进行显式控制，并且它们都将使用`std::allocator`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T11:21:22.860

**是**的，它可以。

`list<T>`据我所知，该标准并未精确保证对象的大小。不过，还有其他保证。

* * *

让我们揭穿一些事情：

> 一个标准 C++ 库试图`std::list`通过将一些`T`实例放入`std::list<T>`自身来“优化”类型。这对我来说似乎是个坏主意，它可能违反了标准提出的“恒定时间”要求；

只要这个数字是有界的，它就不会以任何方式打破“恒定时间”的要求，因为 O(5) 是 O(1)。但是，在`splice`操作期间，节点应该从一个列表移动到另一个列表，*而不需要在内存中移动*。因此禁止本地存储。

> 一种标准 C++，具有`std::list<T>`某些类型的库特化，这些特化具有不同的大小。

由于我们已经排除了本地存储的可能性，因此很难想象基本`std::list<T>`类型*本身*的任何其他变体。

* * *

让我们担心什么是重要的：

a 分配的内存`std::list<T>`由它的第二个模板参数提供：分配器。大多数分配器（包括`std::allocator<T>`默认分配器）使用简单的指针类型：`T*`...但是分配器应该可以随意更改这种类型。

因此，通过更改`allocator`参数（更准确地说，它的指针类型），自然会`std::list`在我所见过的所有实现中更改容器的大小。

*请注意，分配器本身可以专门用于某些类型，但是使用重新绑定魔法有点难以实现。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T11:19:14.060

Chapter 23 of the C++11 standard (Containers) does not say anything about their sizes, so technically you cannot assume that the size will be constant. Implementors could (in theory) specialize some container for a specific primitive in a way that affects its footprint.

In practice, you could use a static assertion that `sizeof(list<T>) == sizeof(list<int>)` and use `sizeof(list<int>)` as the "fixed" size. Worst thing that can happen is a compile-time error.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:33:53.493

类使用`std::list<T>`的固定大小的切片分配器几乎没有意义，除非您还为列表本身使用固定大小的切片分配器，列表项的分配可能比列表标题的分配更多。

现在您当然可以使用列表的第二个模板参数分配器为列表提供您自己的固定大小的切片分配器。然而有一个转折：你不知道切片应该有多大。A`list<T>`接受`allocator<T>`，但它真正需要的是`allocator<U>`其中 U 是一个包含 prev/next 指针和 T 的结构。为了得到它，它调用`rebind`了具有签名的方法`template <typename T> template <typename T> allocator<U> allocator<T>::rebind<U>()`。

因为我实际上需要这样做一次，所以我所做的是创建一个对象，该对象包含多个切片大小的分配器集合。分配器本身拥有一个指向 this 的共享指针和一个指向分配器的共享指针，以获取其参数的大小。在重新绑定时，我从集合中提取了适当的分配器，或者如果它不存在则创建一个。如果这样做，它将作为副作用解决列表的分配，因为如果有多个大小，它将为每个大小创建单独的池。而且不会有很多不同的大小，因为对象不会很大。

# python - 昂贵对象的高效池化/缓存

> ID：11794466
> 
> 赞同：2
> 
> 时间：2012-08-03T11:03:43.427
> 
> 标签：python

如何有效地在适当的 pythonic 池/缓存对象中从数据库中获取昂贵的答案？

我的模块包含以下原理图代码：

```
import sqlite3

db = sqlite3.connect(config.DB) # application shared database
db.row_factory = sqlite3.Row

class Foo:

    def __init__(self, id):
        self.id = id

    @property
    def bar(self):
        if not hasattr(self, '_bar'):
            row = db.execute(
                'SELECT bar FROM bars WHERE id=?', (self.id, )).fetchone()
            self._bar = row['bar'] if row else None
        return self._bar 
```

应用程序在其生命周期内创建`Foo`对象以访问`bar`数据库中的某些值。该`Foo.bar`属性代表昂贵的操作，因此是惰性处理。类的实例`Foo`根本没有太大变化，它们只是数据库存储数据的读取代理。

现在我意识到，`Foo`具有相同实例的实例`id`经常被创建和销毁。每次对象死亡时，有关的知识`Foo.bar`都会丢失，以后必须再次从数据库中获取。

我想出了两种方法来处理它，或者将对象本身池化：

```
class DBObject:

    _pool = {}

    def __new__(cls, *params, **key_params):        
        key = cls.__name__ + str(params) + str(key_params)
        if not key in DBObject._pool:
            self = object.__new__(cls, *params, **key_params)
            DBObject._pool[key] = self
        self = DBObject._pool[key]
        return self

class Foo(DBObject):
    ... 
```

或他们的状态：

```
class DBObject:

    _states = {}

    def __new__(cls, *params, **key_params):        
        self = object.__new__(cls, *params, **key_params)        
        key = cls.__name__ + str(params) + str(key_params)
        if not key in DBObject._states:
            DBObject._states[key] = {}            
        self.__dict__ = DBObject._states[key]
        return self

class Foo(DBObject):
    ... 
```

有没有更好更pythonic的解决方案？我监督了什么？

PS：我是具有 Java/C++ 背景的 Python 初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:36:47.220

我会使用一个简单的 memoize 装饰器，这是一个通用的：

```
import functools

def memoize(func):
    cache = {}
    sentinel = object()

    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        key = (args, tuple(kwargs.items()))
        result = cache.get(key, sentinel)
        if result is not sentinel:
            return result
        result = func(*args, **kwargs)
        cache[key] = result
        return result       
    return wrapper 
```

你可以用它来装饰`Foo`类：

```
@memoize
class Foo:
... 
```

您还可以将`memoize`装饰器应用于`bar`方法，并对其进行一些清理：

```
@property
@memoize
def bar(self):
    row = db.execute('SELECT bar FROM bars where id=?', (self.id, )).fetchone()
    return row['bar'] if row else None 
```

Python3.2 中的另一个新功能是`functools.lru_cache`它具有许多不错的功能（清除缓存、跟踪命中/未命中统计信息、可选大小和类型检查）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:30:46.727

[lru lfu 缓存实现为装饰器](http://code.activestate.com/recipes/498245-lru-and-lfu-cache-decorators/)

# jquery - 删除 div 标签上的 Style 属性

> ID：11794467
> 
> 赞同：1
> 
> 时间：2012-08-03T11:03:44.123
> 
> 标签：jquery, css

谁能告诉我，如何从下面的 div 中删除样式属性？

```
<div class="ui-state-default ui-jqgrid-hdiv" style="width: 1085px;"> 
```

我已经尝试了以下方法，但是它并没有删除它。

```
$('.ui-state-default ui-jqgrid-hdiv').removeAttr('style') 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T11:05:05.627

使用`dot`或`comma`加入选择器中的类

**[现场演示](http://jsfiddle.net/ndASG/)**

```
$('.ui-state-default.ui-jqgrid-hdiv').removeAttr('style') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:10:09.400

或者，这可能有帮助吗？

```
var width = $(window).width(); //Just assuming screen width

$('#gridId').setGriWidth(width); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:13:17.340

问题出在您的选择器上。

```
$('.ui-state-default ui-jqgrid-hdiv').removeAttr('style') 
```

需要是

```
$('.ui-state-default.ui-jqgrid-hdiv').removeAttr('style') 
```

# c# - 根据 db 值重定向到特定页面

> ID：11794468
> 
> 赞同：0
> 
> 时间：2012-08-03T11:03:45.480
> 
> 标签：c#, asp.net

我有一个类似于登录表单的表单，想法是用户输入他的名字和姓氏，我需要检查性别是否为男性，它将重定向到male.aspx，如果性别为女性，则将重定向到 female.aspx，如果 firstname 和 lastname 错误或不匹配或不存在，他将再次返回相同的表单。

我做了主要代码，但我不知道如何检查性别以重定向到页面

我还想在下一页显示全名（名字和姓氏）。

这是我的代码。希望我能得到帮助。

```
protected void log_Click(object sender, EventArgs e)
{
    SqlDataSource sds = new SqlDataSource();
    sds.ConnectionString = ConfigurationManager.ConnectionStrings["myDbConnectionString1"].ToString();
    sds.SelectParameters.Add("firstname", TypeCode.String, this.firstname.Text);
    sds.SelectParameters.Add("lastname", TypeCode.String, this.lastname.Text);
    sds.SelectCommand = "SELECT * FROM [myTb] WHERE [firstname] = @firstname AND [lastname] = @lastname";
    DataView dv = (DataView)sds.Select(DataSourceSelectArguments.Empty);
    if (dv.Count == 0)
    {
        this.lblmsg.Text = "Invalid firstname and lastname!";
        return;
    }
    else
    {
        Response.Redirect("home.aspx");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:08:02.847

试一试 将数据存储在数据视图中后，访问性别列

```
 string gender = dv.Table.Rows[0]["gender"].ToString();
    if (gender == "male")
    {
          Response.Redirect("malepage.aspx");
    }
    else if( gender == "female" )
    { 
          Response.Redirect("femalepage.aspx");
    } 
```

为了获得名字和姓氏，请使用此

```
 string fname= dv.Table.Rows[0]["firstname"].ToString();
 string lname= dv.Table.Rows[0]["lastname"].ToString(); 
```

您可以使用查询字符串或会话将这些传递到第二页。

```
Response.Redirect("yourpage.aspx?fname="+fname+"lname="+lname);

// on second page get them as
string fname = Request.QueryString["fname"];
string lname = Request.QueryString["lname"];

// or by using session pass these values as
Session["fname"] = fname;
Session["fname"] = lname;

// and on the second page get them as
string firstname = Session["fname"].ToString();
string lasttname = Session["lname"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:20:34.990

You can do like this

```
if(dview.Table.Rows[0]["Gender"].ToString() =="Gender")
{
Response.Redirect("Page.aspx?fname="+dview.Table.Rows[0]["fname"].ToString()"&LastName=" + dview.Table.Rows[0]["lname"].ToString());

}
else
{
Response.Redirect("Page2.aspx?fname="+dview.Table.Rows[0]["fname"].ToString()");
} 
```

Send First Name and Last Name in a querystring and join them in the destination page by `Request.Querystring`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:11:01.387

```
if (System.Convert.ToString(dv.Table.Rows[0]["colName"]) == "Male")
{
Response.Redirect("~/Male.aspx");
}
else
{
Response.Redirect("~/female.aspx");
} 
```

# jqgrid - JqG rid 虚拟滚动导致 div 内部 bdiv 的高度错误

> ID：11794470
> 
> 赞同：2
> 
> 时间：2012-08-03T11:03:50.167
> 
> 标签：jqgrid

DOM 看起来像这样：

```
<div class="ui-jqgrid-dbiv" style="width:998px; height:200px">
    <div style="height:1151702px; position:relative">
        <div style="height:680800px;"> 
```

看起来 jqGrid API 导致了它。我们将滚动设置为 true，即打开了虚拟分页。在某些情况下，网格中的几行被填充，并且在 DOM 检查中我们看到了这些副作用。有没有 JQGrid 经验的人解释发生了什么以及如何解决这个问题！

```
 jQuery(document).ready(function() {
        jQuery('#ContentPanel1__01TestCustomerList').jqGrid(
           {
              datatype:function(postdata) {            
                $('#ContentPanel1__01TestCustomerList').listContentPart('getData', postdata); },
             page: 1,
             colNames: ["A/C Ref","Name","Short Name","Credit Limit"],colModel: [{"classes":"sage200-gridCell","name":"CustomerAccountNumber","index":"CustomerAccountNumber","formatter":DefaultFormat,"unformat":unformatField,"searchoptions":{"attr":{"title":"contains"},"sopt":["eq","ne","cn","nc","bw","bn"]}},{"classes":"sage200-gridCell","name":"CustomerAccountName","index":"CustomerAccountName","formatter":DefaultFormat,"unformat":unformatField,"searchoptions":{"attr":{"title":"contains"},"sopt":["eq","ne","cn","nc","bw","bn"]}},{"classes":"sage200-gridCell","name":"CustomerAccountShortName","index":"CustomerAccountShortName","formatter":DefaultFormat,"unformat":unformatField,"searchoptions":{"attr":{"title":"contains"},"sopt":["eq","ne","cn","nc","bw","bn"]}},{"classes":"sage200-gridCell","name":"CreditLimit","index":"CreditLimit","formatter":CurrencyFormat,"unformat":unformatField,"searchoptions":{"attr":{"title":"equals"},"sopt":["eq","ne","lt","le","gt","ge"]}}],
viewrecords: true,
scrollrows: false,
prmNames: { id: "CustomerAccountNumber" },
shrinkToFit: false,
pager: jQuery('#ContentPanel1__01TestCustomerList_pager'),
onSelectRow: function (a,b) { OnRowSelect('ContentPanel1__01TestCustomerList', a, b); },
ondblClickRow: function (event){ GridDoubleClick(event.target); },
loadError: jqGrid_aspnet_loadErrorHandler,gridComplete: function () { $("#ContentPanel1__01TestCustomerList").listContentPart("onInit"); },
resizeStop: function(newWidth, index) { $("#ContentPanel1__01TestCustomerList").listContentPart("onColumnResize", newWidth, index); },
hoverrows: false,
scroll: 1,
rowNum: 25,
rowList: [10,20,30],
editDialogOptions: {"recreateForm":true,errorTextFormat:function(data) { return 'Error: ' + data.responseText },editData:{ __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val() }},addDialogOptions: {"recreateForm":true,errorTextFormat:function(data) { return 'Error: ' + data.responseText },editData:{ __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val() }},delDialogOptions: {"recreateForm":true,errorTextFormat:function(data) { return 'Error: ' + data.responseText },delData:{ __RequestVerificationToken: jQuery('input[name=__RequestVerificationToken]').val() }},searchDialogOptions: {onReset:ContentPanel1_onReset,"multipleSearch":true,"sFilter":"ObeyOperatorFilters",onInitializeSearch:ContentPanel1_onInitializeSearch,afterRedraw:ContentPanel1_afterRedraw,"modal":true,"Find":"Apply",onSearch:ContentPanel1_onSearch,"width":600,beforeShowSearch:ContentPanel1_beforeShowSearch,"recreateForm":true,"caption":"Advanced Filter"},jsonReader: {id:"id",page:function (obj) { return obj.page; },root:function (obj) {return obj.$resources;},records:function (obj) { return obj.$totalResults;},total:function (obj) { return obj.total; },repeatitems:false},sortorder: 'asc',multiselect: true,width: '250',height: '200',viewsortcols: [false,'vertical',true]})
    .navGrid('#ContentPanel1__01TestCustomerList_pager',{"edit":false,"add":false,"del":false,"search":true,"refresh":true,"view":false,"position":"left","cloneToTop":true},jQuery('#ContentPanel1__01TestCustomerList').getGridParam('editDialogOptions'),jQuery('#ContentPanel1__01TestCustomerList').getGridParam('addDialogOptions'),jQuery('#ContentPanel1__01TestCustomerList').getGridParam('delDialogOptions'),jQuery('#ContentPanel1__01TestCustomerList').getGridParam('searchDialogOptions') );
    function jqGrid_aspnet_loadErrorHandler(xht, st, handler) {jQuery(document.body).css('font-size','100%'); jQuery(document.body).html(xht.responseText);};}); 
```

# asp.net-mvc-3 - 如何发送列表 to a Web Method? I am developing a web application using MVC 3 and ASMX Web Services. I am trying to send a List< object > to a Web Method, but I get the following error: " cannot convert from 'System 问问题 问问题 2012-08-03T11:03:58.203 612 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am developing a web application using MVC 3 and ASMX Web Services. I am trying to send a List< object > to a Web Method, but I get the following error: " cannot convert from 'System.Collections.Generic.List' to 'WebServiceClass.ArrayOfAnyType' " This is my Web Service definition: public class WebServiceClass : System.Web.Services.WebService { [WebMethod] public bool MyWebMethod(List ParameterValues) { //do stuff.. } } And this is the block of code where I call the Web Method: List ParameterValues = new List(); WebServiceClass.WebServiceClassSoapClient MyWebService = new WebServiceClass.WebServiceClassSoapClient(); //I use actual objects here, this is just for an example ParameterValues.Add(new DateTime(2012,5,2)); ParameterValues.Add(23); ParameterValues.Add("some string"); MyWebService.MyWebMethod(ParameterValues); My idea was to save time and pass Lists of objects to all Web Methods instead of defining WebMethod(DateTime date, int someint, string somestring). Is there a solution for this? Best regards. If your method expects 3 parameters of type DateTime, int, and string than define a method with this arguments. Otherwise you will have to case down and your solution is not type-safe. Are all your methods in code taking a list of objects as a parameter? Probably not. And the same should apply to web methods. asp.net-mvc-3web-serviceslistobjectasmx 4 1 回答 1 This answer is useful 0 如果您的方法需要 3 个类型的参数，则DateTime使用int此string参数定义一个方法。否则，您将不得不放弃并且您的解决方案不是类型安全的。 您在代码中的所有方法是否都将对象列表作为参数？可能不是。这同样适用于网络方法。 于 2012-08-03T11:10:30.910 回答 Related 4 asp.net-mvc - MVC 模型如何使 byte[] 可以为空？ 1 c++ - 分配给变量时的数字变化值？ 1 security - 如何让所有人都可以读取但只能由我写入的 USB 驱动器？ 1 screen - 开源“屏幕共享”应用程序 0 c# - ASP.NET 应用程序在 Page_Load 之后挂起 - 似乎是特定于工作进程的？ 2 macos - 10.7 和 10.8 的 NSSplitView 问题 1 ios - 活动 perl Geo OSM 瓦片 2 vim - 如何理解下面的 vim 脚本条目？ 1 php - 使用 XPath 指定自定义前缀时如何解决命名冲突？ 1 javascript - 具有相对目标的动态文件映射 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11794473
> 
> 赞同：0
> 
> 时间：
> 
> 标签：asp.net-mvc-3, web-services, list, object, asmx

I am developing a web application using MVC 3 and ASMX Web Services.

I am trying to send a List< object > to a Web Method, but I get the following error:

" cannot convert from 'System.Collections.Generic.List' to 'WebServiceClass.ArrayOfAnyType' "

This is my Web Service definition:

```
public class WebServiceClass : System.Web.Services.WebService
{
    [WebMethod]
    public bool MyWebMethod(List<object> ParameterValues)
    {
        //do stuff..
    }
} 
```

And this is the block of code where I call the Web Method:

```
 List<object> ParameterValues = new List<object>();

        WebServiceClass.WebServiceClassSoapClient MyWebService = new WebServiceClass.WebServiceClassSoapClient();

        //I use actual objects here, this is just for an example
        ParameterValues.Add(new DateTime(2012,5,2));
        ParameterValues.Add(23);
        ParameterValues.Add("some string");

        MyWebService.MyWebMethod(ParameterValues); 
```

My idea was to save time and pass Lists of objects to all Web Methods instead of defining WebMethod(DateTime date, int someint, string somestring).

Is there a solution for this?

Best regards.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:10:30.910

如果您的方法需要 3 个类型的参数，则`DateTime`使用`int`此`string`参数定义一个方法。否则，您将不得不放弃并且您的解决方案不是类型安全的。

您在代码中的所有方法是否都将对象列表作为参数？可能不是。这同样适用于网络方法。

# ios - ARC 转换失败：-ccc-arcmt-check 参数“未使用”

> ID：11794482
> 
> 赞同：2
> 
> 时间：2012-08-03T11:04:44.540
> 
> 标签：ios, xcode, automatic-ref-counting

我正在尝试将我的 iOS 项目升级为使用 ARC。通过*Edit -> Refactor -> Convert to Objective-C ARC*开始转换时，我选择我的目标，取消选择链接库并按检查。接下来我收到以下错误：

```
clang: error: argument unused during compilation: '-ccc-arcmt-check'
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

一些想法如何解决这个问题？Xcode 甚至不会尝试开始转换源文件。

请注意，我的项目文件中有几个目标共享一些源文件。转换对话框仅显示当前方案中设置的目标。

我已经成功转换了另一个（静态库）项目，所以 Xcode 设置应该没问题。

**编辑：**我已经激活了 Xcode 首选项中的*错误后继续构建*，至少现在我看到了所有 ARC 错误。让我们看看这是否能让我转换为 ARC。

**EDIT2：**我的目标的每个源文件都收到此错误，我*不想*使用 ARC - 所以编译器似乎有并发标志*-ccc-arcmt-check*和*-fno-objc-arc 的*问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T12:20:52.143

我发现了：在项目设置中关闭*将警告视为错误。*

# visual-studio - 在 Visual Studio 之外将现有文件夹添加到 SVN

> ID：11794483
> 
> 赞同：2
> 
> 时间：2012-08-03T11:04:52.100
> 
> 标签：visual-studio, svn, version-control, tortoisesvn

我已经在线创建了一个存储库，我想向其中添加一个现有文件夹并使其受版本控制。我正在使用 TortoiseSVN。

使用 Visual Studio 时，我只需单击*“添加到 Subversion”*，它就会自动将版本控制添加到我的项目中。当我单击物理文件夹时，所有内容旁边都有图标，表示它现在已版本化。然后，我可以将所有内容提交到 Visual Studio 中或之外。

我的问题是，我现在有一个不属于我想要版本化的 Visual Studio 项目的文件夹。但我不知道该怎么做。如果我单击导入，我可以导入所有文件，但不会将版本控制添加到文件夹中。然后我可以将它导出到其他地方，但我仍然没有版本控制。

我必须做什么才能在没有 Visual Studio 的情况下对现有文件夹进行版本控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:18:04.367

您应该阅读[SVNBook](http://svnbook.red-bean.com/)和[TortoiseSVN](http://tortoisesvn.net/docs/release/TortoiseSVN_en/index.html)手册。至少它们会帮助您总体上理解 Subversion 和版本控制背后的概念。

当您将某个文件夹转到 Subversion 时，您可以稍后通过在 TortoiseSVN 或命令行客户端中`svn import`执行操作来获取此文件夹的工作副本。`svn checkout`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:10:01.427

无论您在 Visual Studio 中使用什么工具，都在后台使用 subversion 客户端 - 如果需要，您通常可以直接从命令行调用此工具。

如果您对此不满意，可以下载并安装与 windows shell 集成的免费[TortoiseSVN](http://tortoisesvn.tigris.org/)工具。安装后，您可以右键单击文件/文件夹，将它们添加到 Visual Studio 之外的存储库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:16:55.357

我刚刚想出了如何做到这一点，所以我回答我自己的问题，以防其他人试图这样做：

1.  在服务器上创建存储库，

2.  `svn import`一切尽在其中，

3.  `svn checkout`您刚刚在现有文件夹顶部导入的内容。

*现在一切都准备好提交了！*

# sql - SQL server - 如何在表中查找十六进制字符

> ID：11794487
> 
> 赞同：17
> 
> 时间：2012-08-03T11:05:12.707
> 
> 标签：sql, sql-server, sql-server-2008

如何从 SQL Server 表中搜索十六进制字符？实际上我尝试如下，但它正在搜索该字段中的所有零。

```
select Email,* 
from address 
where CHARINDEX(convert(varchar, Ascii(0x00)), Email) > 0 
```

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-01T03:40:26.560

我有一个类似的问题，十六进制字符使查询崩溃。这就是我为找到它所做的。

```
select Email
from address
where Email like '%' + CHAR(0x00) +'%' 
```

现在要首先阻止不良数据进入......

# javascript - Ajax 成功回调仅适用于 Chrome

> ID：11794489
> 
> 赞同：1
> 
> 时间：2012-08-03T11:05:16.750
> 
> 标签：javascript, internet-explorer, firefox, google-chrome, jquery

尽管我已经阅读了一些与此类似的帖子，但我似乎无法使其正常工作。我有以下在按下按钮时调用的 Ajax。

```
 function refreshTab(){
           theObject = {
               getArray: function(callback) {

                   $.ajax({
                       url: 'urlGoeshere',
                       data: "",
                       type: "GET",
                       dataType: 'json',
                       success: function(data)         
                       {                                                          
                           callback.call(this,data);
                           alert("testing");
                       },
                       error: function (err)
                        {
                            alert(err.responseText)
                        }
                   });
               }
           }
           theObject.getArray(function(data) {
               javascript: console.log(data);
               for(i=0;i<data.length;i++){
                   auditHolder = auditHolder + "<tr class='gradeU'><br><td>" + data[i].Description + "</td><td style='width:100px' align='center'>" + data[i].CreatedOn + "</td><br></tr>"
                   // $('#container tbody').append("<tr class='gradeU'><br><td>" + data[i].Description + "</td><td style='width:100px' align='center'>" + data[i].CreatedOn + "</td><br></tr>");

               }
               $('#container tbody').html(auditHolder);

           });                                          
       } 
```

上面的代码在 Chrome 中完美运行，但在 FF 或 IE 中都不起作用。目前使用 jQuery 1.4.4。

通过 alert("testing"); 我发现似乎破坏代码的行是

```
 callback.call(this,data); 
```

在它在所有浏览器中工作之前放置一个警报框但是只有在 Chrome 中才会在回调后触发警报框。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T13:07:20.183

我刚刚遇到了同样的问题，发现旧版本的 Firefox、jQuery 和 Firebug (!!) 的组合是这个问题的原因。也可以看看：

[http://bugs.jquery.com/ticket/6349](http://bugs.jquery.com/ticket/6349)

# android - 如何正确地从 URI 获取真实的文件路径？

> ID：11794490
> 
> 赞同：1
> 
> 时间：2012-08-03T11:05:19.900
> 
> 标签：android, cursor, uri, android-camera

从相机拍照后，我尝试从 URI 获取真实文件路径。我这样做：

```
private String getRealPathFromURI(Uri contentURI) {
    Cursor cursor = getContentResolver().query(contentURI, null, null, null, null); 
    cursor.moveToFirst(); 
    int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA); 
    return cursor.getString(idx); 
} 
```

和这个：

```
 public String getRealPathFromURI(Uri contentUri) {
     String[] proj = { MediaColumns.DATA };
     Cursor cursor = managedQuery(contentUri, proj, null, null, null);
     int column_index = cursor.getColumnIndexOrThrow(MediaColumns.DATA);
     cursor.moveToFirst();
     return cursor.getString(column_index);
     } 
```

和：

```
private String getRealPathFromURI(Uri selectedVideoUri) {
    String filePath;
    final String[] filePathColumn = new String[] { MediaColumns.DATA };

    Cursor cursor = getContentResolver().query(selectedVideoUri,
            filePathColumn, null, null, null);
    cursor.moveToFirst();

    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
    filePath = cursor.getString(columnIndex);
    cursor.close();
    return filePath;
} 
```

在大多数手机上，一切正常。但在某些手机应用程序崩溃并出现错误：

```
08-03 14:55:13.092: E/AndroidRuntime(1676):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(SourceFile:190)
08-03 14:55:13.092: E/AndroidRuntime(1676):     at android.os.Handler.dispatchMessage(SourceFile:130)
08-03 14:55:13.092: E/AndroidRuntime(1676):     at android.os.Looper.loop(SourceFile:351)
08-03 14:55:13.092: E/AndroidRuntime(1676):     at android.app.ActivityThread.main(SourceFile:4070)
08-03 14:55:13.092: E/AndroidRuntime(1676):     at java.lang.reflect.Method.invokeNative(Native Method)
08-03 14:55:13.092: E/AndroidRuntime(1676):     at java.lang.reflect.Method.invoke(Method.java:538)
08-03 14:55:13.092: E/AndroidRuntime(1676):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(SourceFile:901)
08-03 14:55:13.092: E/AndroidRuntime(1676):     at com.android.internal.os.ZygoteInit.main(SourceFile:659)
08-03 14:55:13.092: E/AndroidRuntime(1676):     at dalvik.system.NativeStart.main(Native Method)
08-03 14:55:19.823: I/System.out(1728): --MyLocationListener is created!
08-03 14:55:19.838: D/AndroidRuntime(1728): Shutting down VM
08-03 14:55:19.838: W/dalvikvm(1728): threadid=1: thread exiting with uncaught exception (group=0x4001c648)
08-03 14:55:19.842: E/AndroidRuntime(1728): FATAL EXCEPTION: main
08-03 14:55:19.842: E/AndroidRuntime(1728): java.lang.RuntimeException: Unable to create service com.webparadox.tonquer.MyLocationListener: java.lang.NullPointerException
08-03 14:55:19.842: E/AndroidRuntime(1728):     at android.app.ActivityThread.handleCreateService(SourceFile:2221)
08-03 14:55:19.842: E/AndroidRuntime(1728):     at android.app.ActivityThread.access$2500(SourceFile:160) 
```

请帮我修复这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:08:56.157

希望下面的代码会有所帮助

```
 String[] projection = { MediaStore.Images.Media._ID, MediaStore.Images.Media.DATA,
    };
    Cursor mImageCursor =   getContentResolver().query(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, null,
            null, null);

    if (mImageCursor != null) 
    {
        if (mImageCursor.getCount() == 0) 
        {
            setContentView(R.layout.no_image_found);
                        } 
        else
        {

            while (mImageCursor.moveToNext()){
                Images im = new Images();
                int column_index = mImageCursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                im.setFilePath(mImageCursor.getString(column_index));
                image_column_index = mImageCursor
                        .getColumnIndexOrThrow(MediaStore.Images.Media._ID);
                int id = mImageCursor.getInt(image_column_index);
                im.setUri(Uri.withAppendedPath(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI, ""
                                + id));
                arrayOfImages.add(im);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T07:16:34.613

[这是解决方案](https://github.com/iPaulPro/aFileChooser/blob/master/aFileChooser/src/com/ipaulpro/afilechooser/utils/FileUtils.java) ->只需将此文件复制粘贴到您的代码中并使用以下代码获取文件路径：-

```
 filepath= FileUtils.getPath(getActivity(),selectedImageUri); 
```

笔记：-

```
 else if (isDownloadsDocument(uri)) {
            final String id = DocumentsContract.getDocumentId(uri);
            final Uri contentUri = ContentUris.withAppendedId(
                    Uri.parse("content://downloads/public_downloads"), Long.valueOf(id));

            return getDataColumn(context, contentUri, null, null);
        } 
```

--> 如果你愿意，可以省略方法:)

# java - 如何为 Openfire 插件进行 HTTP 绑定

> ID：11794492
> 
> 赞同：0
> 
> 时间：2012-08-03T11:05:23.223
> 
> 标签：java, jsp, jetty, openfire

我正在使用 Openfire 作为我公司的聊天服务器。现在我需要为 Openfire 创建一个插件。

正如我从其他插件中看到的，它们可以通过端口 7070 与自己进行 HTTP 绑定。例如：[http](http://example.com:7070/redfire) ://example.com:7070/redfire其中**redfire**是插件的名称。

我的插件的名称是**toplug**，所以我希望能够通过以下方式访问我的插件的 JSP 页面：[http](http://example.com:7070/toplug/index.jsp) ://example.com:7070/toplug/ index.jsp 其中“index.jsp”是一些示例页面。

但是当我尝试通过端口 7070 访问我的 JSP 页面时，Jetty 服务器（Openfire 在其上运行）总是报告错误 404 'page not found'。我猜这是因为尚未设置与包含 JSP 页面的文件夹的绑定。请问这个绑定的东西怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:08:34.070

问题在这里得到解答：http:
[//community.igniterealtime.org/message/224134](http://community.igniterealtime.org/message/224134)

您不需要插件即可访问 http bing 端口的 Web 服务。只需将您的网页放在以下文件夹中：
**OPENFIRE_HOME/openfire/resources/spank**

并访问：
[http ://example.com:7070/your_folder/your_page.html](http://example.com:7070/your_folder/your_page.html)

请注意，除非您替换 lib 文件夹中的 jasper-xxxx.jar 文件，否则 Openfire 不会编译 JSP 页面。

如果您仍然想从您的插件创建一个码头网络上下文（应用程序），请参阅 Redfire 插件的源代码：

```
import org.eclipse.jetty.server.handler.ContextHandlerCollection;
import org.eclipse.jetty.webapp.WebAppContext;     
...

public void initializePlugin(PluginManager manager,File pluginDirectory) {
  ContextHandlerCollection contexts = 
  HttpBindManager.getInstance().getContexts();

  context = new WebAppContext(contexts,pluginDirectory.getPath(),"/"+NAME);
  context.setWelcomeFiles(new String[]{"index.html"});
... 
```

# php - 在查询中添加一个 db 字段

> ID：11794495
> 
> 赞同：0
> 
> 时间：2012-08-03T11:05:31.477
> 
> 标签：php, mysql

我有一个查询，我想在这个查询中添加一个字段，我被困在哪里放置这个字段，即正确的位置。

```
mysql_query("INSERT INTO `table-name`(".substr($columns,0,-2).") VALUES (".substr($values,0,-2).");"); 
```

添加电子邮件的字段名称，其值为 $email。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:14:01.293

您的 $columns 和 $values 变量必须是某种分隔字符串。您需要更新控制这些变量的任何机制，或者只需将您的电子邮件字段添加到末尾，如下所示：

```
INTO `table-name`(".substr($columns,0,-2).", email) VALUES (".substr($values,0,-2).", '".$email."');"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:10:08.937

通过使用它，您可以将任意数量的值插入到表中

```
INSERT INTO `table-name` (`col1`, `col2`, `col3`,...) VALUES ('val1', 'val2', 'val3', ...); 
```

# jasper-reports - JasperReports，iReport 3.7：组依赖

> ID：11794496
> 
> 赞同：0
> 
> 时间：2012-08-03T11:05:33.147
> 
> 标签：jasper-reports, ireport

如何在*iReport 3.7.1*中使用组和子组依赖项编写组表达式？

我的报告输出应如下所示：

```
A1
B1
C1
Person 1
Person 2

A2
B2
C3
Person 3

A2
B3
C4
Person 4

C4
Person 5 
```

注意：C 是 B 的子组，B 是 A 的子组。 B 仅在具有新值时出现（第 4 个人和第 5 个人具有相同的值 B3 => B3 仅第一次出现，我们第 5 个人有 B3)。我只想在每次 B 组更改时出现 A 组，就像第 3 人和第 4 人的情况一样，我们有相同的组 A (A2)，但 B 已从 B2 更改为 B3 => 即使出现 A2 也应该出现它仍然具有相同的价值。

我怎样才能使这种依赖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:04:21.247

在 iReport 中，右键单击 Report Inspector 中的报告名称。单击“添加报告组”。在 Group Criteria 区域的“Group by the following report object”下，选择要分组的字段。这将是您的“A”字段。对“B”和“C”重复此操作。在您的详细信息带中，为“Person”放置一个文本字段。

确保查询中的 ORDER BY 子句按 A、B、C 排序。

# c# - Observable 集合项属性已更改

> ID：11794498
> 
> 赞同：1
> 
> 时间：2012-08-03T11:05:45.283
> 
> 标签：c#, .net, wpf, xaml, mvvm

我有一个使用视图模型库来实现的列类`INotifyPropertyChanged`（我知道懒惰）：

```
public class Column : ViewModelBase
{
    public string ColumnName { get; set; }
    public bool Anonymize { get; set; }
} 
```

然后是列列表：

```
public class Columns : ObservableCollection<Column>
{
} 
```

在我的视图模型中，我有一个属性列，我将它绑定到一个带有复选框和文本块的组合框：

```
private Columns _tableColumns;
public Columns TableColumns
{
  get
  {
    return _tableColumns;
  }
  set
  {
    _tableColumns = value;
    OnPropertyChanged("TableColumns");
  }
} 
```

```
 <ComboBox Name="cbColumns" ItemsSource="{Binding TableColumns}">
    <ComboBox.ItemTemplate>
      <DataTemplate>
        <StackPanel Orientation="Horizontal">
          <CheckBox  IsChecked="{Binding Anonymize, Mode=TwoWay}" />
          <TextBlock Text="{Binding ColumnName}"/>
        </StackPanel>
      </DataTemplate>
    </ComboBox.ItemTemplate>
  </ComboBox> 
```

当我通过项目上的复选框更改 Anonymize 属性时，如何使视图模型中的 Columns 属性更改以反映这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:14:20.177

你的`Column`类需要实现`INotifyPropertyChanged`（你说它确实如此）。`Anonymize`当值发生变化时（您没有），您还需要引发该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:22:01.653

`Anonymize`如果您只想从 UI更改属性，那么您就完成了。如果您想在 UI 上查看更改（来自后端），您必须`INotifyPropertyChanged`在类中实现接口`Column`。

```
public class Column : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public string columnName;
    public bool anonymize;

    public string ColumnName
    {
        get { return columnName; }
        set
        {
            columnName = value; RaiseOnPropertyChanged("ColumnName");
        }
    }
    public bool Anonymize
    {
        get { return anonymize; }
        set { anonymize = value; RaiseOnPropertyChanged("Anonymize"); }
    }

    public void RaiseOnPropertyChanged(string propertyName)
    {
        var eh = PropertyChanged;
        if (eh != null)
            eh(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:11:19.400

当`Anonymize`状态改变时，它需要通知视图模型它需要修改列的集合。我之前解决此问题的方法是将 CheckChanged 事件添加到`Anonymize`. 视图模型在创建 Column 对象后订阅事件，但它被添加到`Columns`集合中。当 CheckChanged 被引发时，视图模型从 Columns 集合中添加/删除项目。

# scala - 玩！2.0框架多Module项目

> ID：11794500
> 
> 赞同：3
> 
> 时间：2012-08-03T11:06:07.950
> 
> 标签：scala, playframework, playframework-2.0, sbt

我需要有两个不同的项目，比如说内部和外部，它们使用相同的数据层，并且出于干燥的原因，我想避免复制配置文件。

[我查看了http://www.playframework.org/documentation/2.0.2/SBTSubProjects](http://www.playframework.org/documentation/2.0.2/SBTSubProjects)上的子项目文档，但文档很短。

感谢@Georg Engel，我现在知道模块化配置的可能性

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "MyApp"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      // Add your project dependencies here,
    )

    lazy val common = Project(appName + "-common", file("modules/common"))

    lazy val website = PlayProject(
    appName + "-website", appVersion, path = file("modules/website")
    ).dependsOn(common)

    lazy val adminArea = PlayProject(
    appName + "-admin", appVersion, path = file("modules/admin")
    ).dependsOn(common)

    lazy val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
      // Add your own project settings here      
    ).dependsOn(
    website, adminArea
    )

} 
```

以及我遇到的编译错误仅是由于反向路由器（取消路由但不是控制器操作导致此）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T11:49:38.283

这是我所做的和已经做过的。我制作了一个[多模块 Maven](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)项目，我基本上保留了所有核心可重用代码。

然后对于我所有的其他 Web 项目（制作 WAR 的项目），我在某些情况下使用 SBT、Gradle 甚至是带有 Maven 插件的 Ant。*这些项目有自己的配置（如 db host 和 creds）*。

```
framework
   - pom.xml
   - db-module
     - pom.xml
     - src/main/resources # possible classpath loading config here
     - etc...
   - mail-module
     - pom.xml
     - etc...
   - service-module
     - pom.xml
     - etc... 
```

然后其他项目仅依赖于框架，对于 SBT 项目（play 2.0），您可以对其进行设置，以便您的解析器之一是本地 maven 存储库：[https ://github.com/harrah/xsbt/wiki/Getting-Started -库依赖项](https://github.com/harrah/xsbt/wiki/Getting-Started-Library-Dependencies)

**编辑澄清：**框架 pom.xml 是父项目。您可以使邮件模块依赖于 db-module，然后在您单独的 Web 应用程序项目中，您可以只依赖于 mail-module，您将同时获得 mail-module 和 db -module。

许多人把 Maven 扔到了公共汽车下，但它仍然比其他任何东西都做得更好。

更多解释：

*   [http://www.sonatype.com/books/mvnex-book/reference/multimodule-web-spring-sect-intro.html#fig-multimodule-web-spring-projects](http://www.sonatype.com/books/mvnex-book/reference/multimodule-web-spring-sect-intro.html#fig-multimodule-web-spring-projects)

*   在此处下载示例 maven pom 文件：http: [//www.sonatype.com/book/mvn-examples-1.0.zip](http://www.sonatype.com/book/mvn-examples-1.0.zip) ...第 7 章是多模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T08:57:07.957

我们正在使用这样的子模块（其中“核心”是共享子模块）：

构建.scala

```
val coreModule = PlayProject(appName + "-core", "1.0", appDependencies, path = file("modules") / "core")

val main = PlayProject(appName + "-app", appVersion, appDependencies, mainLang = SCALA).settings(
  // Add your own project settings here      
).dependsOn(coreModule).aggregate(coreModule) 
```

不幸的是，子模块必须位于项目树下（“../core”作为路径是不可能的） - 所以我们使用 git 子模块将共享模块放入树中：

```
git submodule add git://git.example.com/modules.git modules

git submodule init

git submodule update 
```

可能 SVN 外部、mercurial 子模块等也将完成这项工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T18:04:26.907

对位于源树中某处的模块的源依赖可以帮助您实现所需的构建：

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "test"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      // Add your project dependencies here,
    )

    lazy val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
      // Add your own project settings here      
    ).dependsOn(common)

    lazy val common = RootProject(file("../common")) 

} 
```

您不能将游戏项目与另一个项目混合使用，因此您的配置应位于“依赖项”中。源依赖的好处是它们存在于您的项目中（感谢 SBT 的递归性）。如果你的依赖源发生变化，你的主项目会在下一次编译时得到变化。

您可以在此处查看我的多模块播放应用程序的完整结构： [https](https://github.com/un-jon/play2MultiModule) ://github.com/un-jon/play2MultiModule 。

# c++ - 从字符串集派生 RegExp

> ID：11794508
> 
> 赞同：2
> 
> 时间：2012-08-03T11:06:30.117
> 
> 标签：c++, regex, string

想象有一组任意字符串。我们现在假设除了几个后续字符之外它们都是相等的（如果这个假设不成立，我可以返回错误）。我现在想派生一个正则表达式来识别字符串中不同的部分。

```
输入：
“你好 Alice，我是 Bob。”、“你好 John，我是 Bob。”、“你好 Josh，我是 Bob。”

输出：
“你好 (.+)，我是 Bob。”

输入：
“星期一”、“树”、“狗”

输出：
错误

```

也许找到[最长的公共子串](https://en.wikipedia.org/wiki/Longest_common_substring_problem)或[Levenshtein 距离](https://en.wikipedia.org/wiki/Levenshtein_distance)会有所帮助？我还不确定其中一个是否真的适用于我的问题或如何使用它们来解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:36:23.253

您遇到了一个问题并决定使用正则表达式来解决它——现在您有两个问题。:-)

除了开玩笑，您可以将其分解为两个步骤：

1.  识别字符串之间的差异。
2.  查看所有差异并找出匹配它们的正则表达式。

对于 (1)，使用您的语言（如 Python）中的差异计算库`difflib`来查找两个字符串之间相同区域的列表是一个问题。如果所有字符串都有公共段，则将 string-1 与每个 string-[2..N] 进行比较以分析生成的相同块（您必须聪明地比较每个块的内容及其相对于其他相同块的位置块）。提取和记录相同块之间的文本。

对于您的示例，每次比较时都会得到两个相同的块：`"Hello "`和`", I'm Bob."`. 相同块之间的文本将是这些字符串：`"Alice"`, `"John"`, `"Josh"`.

对于 (2)，最简单的解决方案是将您的发现组合成一个非常字面的正则表达式，其中包括：

`Hello`+ `(Alice|John|Josh)`+`, I'm Bob.`

*或者，将在所有*字符串中找到的相同相同块之间的任何段替换为`.*`. 考虑让它成为一个非贪婪的匹配 - `.*?`。

我不了解自动机理论，无法帮助您解决 DFA/NFA，但如果您需要更高的精度，这是一个可靠的方向。

# .htaccess - .htaccess 的域正则表达式

> ID：11794509
> 
> 赞同：1
> 
> 时间：2012-08-03T11:06:30.820
> 
> 标签：.htaccess, url-rewriting

首先，对不起我的英语不好。我想配置我的 .htaccess 来重写 URL。

example.com/company1.com

而是 example.com/sub=company1.com

我的 .htaccess 现在：

```
RewriteEngine On
RewriteRule ^([a-z_]+)/?$ index.php?sub=$1 
```

我在stackoverflow中搜索。如果我将 (.*) 正则表达式用于所有字符或 ([az\.]+) 用于在域字符串 (company1.con) 中包含“点”字符，我的皮肤就坏了。我的临时解决方案是使用 ([a-z_]+) 和[http://example.com/company1_com](http://example.com/company1_com)而不是 [http://example.com/company1.com](http://example.com/company1.com) 这是不好的解决方案 :( 所以，请给我这个问题的正则表达式。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:25:45.950

[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)中描述了 Apache 的重写。

对你来说，只要你忽略可能的 GET 参数或路径，它应该是

```
RewriteEngine On
RewriteRule ^/([^?/]+) /index.php?sub=$1 [L] 
```

我猜它坏了，因为您在 index.php 之前缺少“/”，GET 中有更长的路径（example.com/company1.com/css/style.css）或者您提交表单（example.com /company1.com?a=foo&b=bar )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:18:31.787

试试这个

```
RewriteEngine On
RewriteRule ^(.*)$ index.php?sub=$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:08:48.657

您需要防止`index.php`循环：

```
RewriteEngine On
# let index.php pass through, thus stopping the rewrite loop
RewriteRule index.php - [L]
# route everything to index.php
RewriteRule ^(.*)$ /index.php?sub=$1 [L] 
```

您也可以先检查现有资源。由于 index.php 存在，这也会打破循环。这样如果您请求静态内容（如 javascript 或 css），它将不会通过 index.php 路由：

```
RewriteEngine On
# request isn't for an existing file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# route everything to index.php
RewriteRule ^(.*)$ /index.php?sub=$1 [L] 
```

# wpf - 使用 DirectX 11 在 WPF 控件上呈现

> ID：11794516
> 
> 赞同：4
> 
> 时间：2012-08-03T11:06:44.860
> 
> 标签：wpf, directx, directx-11, d3dimage

我正在尝试创建一个基于 WPF 的地图编辑器。目前我正在使用 hack 来呈现 DirectX 内容。我创建了一个 WinFormsHost 并在 WinForms-Panel 上呈现。

这一切都是因为 DirectX（我正在使用具有 Featurelevel 10 的 DirectX 11）需要一个句柄（别名 IntPtr）来渲染。我不知道如何在没有句柄的情况下初始化和使用 DX 设备。

但是 WPF 控件没有句柄。所以我刚刚发现，有一个名为“D3DImage”的互操作类。但我不明白如何使用它。

我当前的系统是这样工作的：

内部循环遍历“IGameloopElement”列表。对于每一个，它都会渲染其调用“Draw()”的内容。之后，它调用交换链的“Present()”来显示更改。然后它重置设备以将句柄切换到下一个元素（大多数情况下只有一个元素）。

现在，因为 D3DImage 没有句柄，我如何渲染它？我只知道我必须使用“Lock()”然后是“SetBackBuffer()”、“AddDirtyRect()”然后是“Unlock()”。

但是如何在不指定设备句柄的情况下渲染到 DirectX11.Texture2D 对象？

我真的迷路了...我刚刚在 codeplex 上找到了“DirectX 4 WPF”示例，但这实现了 DirectX 的所有版本，管理设备本身并且具有如此巨大的开销。我想留在我目前的系统。我自己管理设备。我不希望 WPF 控件处理它。

该循环应该调用“Render()”，然后将后缓冲纹理传递给 WPF 控件。

谁能告诉我该怎么做？我完全卡住了...

非常感谢 ：）

R

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-01T18:43:13.200

WPF 的 D3DImage 仅支持 Direct3D9/Direct3D9Ex，不支持 Direct3D 11。您需要使用[DXGI Surface Sharing](http://msdn.microsoft.com/en-us/library/windows/desktop/ee913554.aspx)才能使其工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-02T03:17:13.813

另一个答案写道，“`D3DImage`仅支持**Direct3D9/Direct3D9Ex** ”……这在过去几年中可能并不*完全正确。*正如我在[此处](https://gamedev.stackexchange.com/questions/125448/how-to-convert-directx-texture2d-to-a-dxgi-surface-for-wpf-rendering#comment266736_142254)的评论中总结的那样，关键似乎是带有DXGI的**Direct3D11**具有非常特定的互操作兼容性模式（`D3D11_SHARED_WITHOUT_MUTEX`标志），它可以`ID3D11Texture2D1`直接用作`D3DResourceType.IDirect3DSurface9`) WPF`D3DImage`愿意接受什么。

这是对我有用的粗略草图，它创建了一个**D3D11** SampleAllocator，它产生`ID3D11Texture2D1`的内容与 WPF 的 Direct3D9 直接兼容。因为这里显示的所有 .NET 互操作都是我自己设计的，所以这不会是完全可以在您的项目中运行的代码，但是方法、意图和过程应该清楚，以便于适应。

**1.预备帮手**

```
static D3D_FEATURE_LEVEL[] levels =
{
    D3D_FEATURE_LEVEL._11_1,
    D3D_FEATURE_LEVEL._11_0,
};

static IMFAttributes GetSampleAllocatorAttribs()
{
    MF.CreateAttributes(out IMFAttributes attr, 6);
    attr.SetUINT32(in MF_SA_D3D11_AWARE, 1U);
    attr.SetUINT32(in MF_SA_D3D11_BINDFLAGS, (uint)D3D11_BIND.RENDER_TARGET);
    attr.SetUINT32(in MF_SA_D3D11_USAGE, (uint)D3D11_USAGE.DEFAULT);
    attr.SetUINT32(in MF_SA_D3D11_SHARED_WITHOUT_MUTEX, (uint)BOOL.TRUE);
    attr.SetUINT32(in MF_SA_BUFFERS_PER_SAMPLE, 1U);
    return attr;
}

static IMFMediaType GetMediaType()
{
    MF.CreateMediaType(out IMFMediaType mt);
    mt.SetUINT64(in MF_MT_FRAME_SIZE, new SIZEU(1920, 1080).ToSwap64());
    mt.SetGUID(in MF_MT_MAJOR_TYPE, in WMMEDIATYPE.Video);
    mt.SetUINT32(in MF_MT_INTERLACE_MODE, (uint)MFVideoInterlaceMode.Progressive);
    mt.SetGUID(in MF_MT_SUBTYPE, in MF_VideoFormat.RGB32);
    return mt;
} 
```

**2\. D3D11 设备和上下文实例去某个地方**

```
ID3D11Device4 m_d3D11_device;

ID3D11DeviceContext2 m_d3D11_context; 
```

**3.接下来是初始化代码**

```
void InitialSetup()
{
    D3D11.CreateDevice(
        null,
        D3D_DRIVER_TYPE.HARDWARE,
        IntPtr.Zero,
        D3D11_CREATE_DEVICE.BGRA_SUPPORT,
        levels,
        levels.Length,
        D3D11.SDK_VERSION,
        out m_d3D11_device,
        out D3D_FEATURE_LEVEL _,
        out m_d3D11_context);

    MF.CreateDXGIDeviceManager(out uint tok, out IMFDXGIDeviceManager m_dxgi);

    m_dxgi.ResetDevice(m_d3D11_device, tok);

    MF.CreateVideoSampleAllocatorEx(
        ref REFGUID<IMFVideoSampleAllocatorEx>.GUID,
        out IMFVideoSampleAllocatorEx sa);

    sa.SetDirectXManager(m_dxgi);

    sa.InitializeSampleAllocatorEx(
        PrerollSampleSink.QueueMax,
        PrerollSampleSink.QueueMax * 2,
        GetSampleAllocatorAttribs(),
        GetMediaType());
} 
```

**4.根据需要使用样本分配器重复生成纹理**

```
ID3D11Texture2D1 CreateTexture2D(SIZEU sz)
{
    var vp = new D3D11_VIEWPORT
    {
        TopLeftX = 0f,
        TopLeftY = 0f,
        Width = sz.Width,
        Height = sz.Height,
        MinDepth = 0f,
        MaxDepth = 1f,
    };

    m_d3D11_context.RSSetViewports(1, ref vp);

    var desc = new D3D11_TEXTURE2D_DESC1
    {
        SIZEU = sz,
        MipLevels = 1,
        ArraySize = 1,
        Format = DXGI_FORMAT.B8G8R8X8_UNORM,
        SampleDesc = new DXGI_SAMPLE_DESC { Count = 1, Quality = 0 },
        Usage = D3D11_USAGE.DEFAULT,
        BindFlags = D3D11_BIND.RENDER_TARGET | D3D11_BIND.SHADER_RESOURCE,
        CPUAccessFlags = D3D11_CPU_ACCESS.NOT_REQUESTED,
        MiscFlags = D3D11_RESOURCE_MISC.SHARED,
        TextureLayout = D3D11_TEXTURE_LAYOUT.UNDEFINED,
    };

    m_d3D11_device.CreateTexture2D1(ref desc, IntPtr.Zero, out ID3D11Texture2D1 tex2D);
    return tex2D;
} 
```

# objective-c - 如何将数据从导航控制器传递到 TabBarController

> ID：11794517
> 
> 赞同：0
> 
> 时间：2012-08-03T11:06:45.073
> 
> 标签：objective-c, uinavigationcontroller, uikit, uitabbarcontroller

我是 Objective C 的新手，我目前正在开发一个同时使用`UITabBarController`和的应用程序`UINavigationController`。

我已经将它们都连接起来了，我的 TabController 作为初始控制器。现在我正在尝试将 ( `NSMutableDictionary`) 数据从我的导航控制器场景（来自 3 层场景导航控制器的第三个场景）传递到我的 TabBarController，因此我可以使用该数据在直接连接到我的任何场景之间共享标签栏控制器。

我不知道如何开始为此编程。谁能帮我？我只需要简单的代码来展示如何将数据从导航控制器场景传递到 tabBarController 场景，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:28:28.377

我使用了这段代码：

```
self.tabBarItem.title = [[NSUserDefaults standardUserDefaults] objectForKey:@"Tag1"]; 
```

例如，我制作了我的应用程序，其标签栏字符串是从导航页面发送的。

![ss1](../Images/961a7f3c57ebba51b223dc81cda0df51.png)

![SS2](../Images/a4b2bd270a7ed65ae0a774524ac615bc.png)

# android - 在 Eclipse Juno 中添加 ActionBarSherlock

> ID：11794528
> 
> 赞同：0
> 
> 时间：2012-08-03T11:07:28.633
> 
> 标签：android, eclipse, actionbarsherlock

我是 Android World 的新手，但我真的很喜欢它，我编写了一些应用程序，现在我想尝试专门用于选项卡菜单的 ActionBarSherlock。

我有 Eclipse Juno 4.2 版，我使用 jdk-7u5 和最新版本的 SDK (v.20)

我想安装 ActionBarSherlock 4.1 版

与 Eclipse Juno 中一样，没有“从现有源中选择创建项目”选项我将 Sherlock 库作为 Eclipse 上的现有项目导入，并且在 src 中的几乎所有包中都会出现一个红十字。

然后，我将它作为库添加到我自己的项目中。现在我的 Android 应用项目上出现了一个红色的感叹号。

我正在使用 android:minSdkVersion="7" android:targetSdkVersion="14"

我阅读了很多关于库 ActionBarSherlock 的不同问题，并尝试了他们在论坛中所说的一切，甚至安装了 Eclipse Helios 以使用“从现有源中选择创建项目”选项，但我遇到了 ADT 的安装问题。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T17:25:20.753

我发现本教程可以解决我在使用 ActionBarSherlock 时遇到的问题。这是[http://androiddevelopmenttutorial.co/actionbarsherlock-getting-started/](http://androiddevelopmenttutorial.co/actionbarsherlock-getting-started/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T09:08:39.830

从这个网站[http://www.grokkingandroid.com/adding-actionbarsherlock-to-your-project/](http://www.grokkingandroid.com/adding-actionbarsherlock-to-your-project/)

获取 ActionBarSherlock 并将其添加到 Eclipse

您要做的第一件事是从 actionbarsherlock.com 下载库。在此之后解压缩/解压缩它。下载包含三个文件夹：library、samples 和 website。示例文件夹包含四个示例项目，用于展示您可以做什么以及如何操作。你应该看看他们。website文件夹包含项目网站的代码。library 文件夹最终包含 ActionBarSherlock 的源代码。现在转到 Eclipse 并将 ABS 库添加为 Android 项目。不要使用 Eclipse 的导入工具来导入 ActionBarSherlock 库——它不会立即工作，您必须修复一些设置。而是使用 Android 开发者工具的项目创建向导。

从现有代码打开文件 -> 新建 -> 项目 -> Android 项目。

从现有源创建一个 Android 项目 在下一个屏幕中选择文件夹，然后 Eclipse 使用该文件夹搜索项目。如果您选择 ActionBarSherlock 根文件夹，Eclipse 会建议创建一个项目列表。选中“库”项目并取消选中所有其他项目：

选择库项目 点击“完成”创建项目。

Eclipse 现在将创建一个名为“library”的新项目。我更喜欢一个更有用的名称，因此选择名为“library”的项目并按 F2 重命名该项目。我已将 Eclipse 中的项目重命名为“ActionBarSherlock”，因此以下所有屏幕都将引用此名称。

将库添加到您的项目

现在 ABS 是一个库项目，您必须告诉您自己的项目使用它。我将为此使用我上一篇文章的项目。转到 FragmentStarter 的项目设置并切换到 Android 选项卡。

如有必要，向下滚动，直到看到“库”面板。点击“添加”：

将库添加到 Android 项目 在下一个窗口中，将列出所有可用的库项目。选择 ActionBarSherlock 并单击“确定”。

从库列表中选择 ActionBarSherlock 当窗口消失时，库应列在 Android 属性选项卡的库面板中：

检查库是否添加成功

然后出现错误：Jar mismatch！修复您的依赖项，要解决它，可以从 your_project/libs 复制文件 android-support-v4.jar 并将其粘贴到 library/libs 上。

在您可以使用 ActionBarSherlock 之前，您必须像这样扩展您的 Activity： public class MainActivity extends SherlockActivity 并更改 Manifest 中的主题： android:theme="@style/Theme.Sherlock.Light.DarkActionBar"

这是将 ABS 添加到项目中的方法。希望它适用于所有人

# javascript - 在javascript中动态修改遮罩高度

> ID：11794530
> 
> 赞同：0
> 
> 时间：2012-08-03T11:07:40.573
> 
> 标签：javascript, dynamic, height, mask

我必须通过 javascript(extjs) 增加 .x-mask 类的高度。我将通过使用获得动态高度

```
var hgt = document.documentElement.scrollHeight; 
```

然后我必须应用它而不是

```
.x-mask {
   height: 100% !important;
} 
```

通过javascript动态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:16:37.507

如果您正在使用像 div 或 span 这样的任何元素，您已经分配了此类，例如

```
<div id="mydiv" class="x-mask"> 
```

试试这个js

```
document.getElementById('mydiv').style.height=hgt; 
```

如果您使用的是 jQuery，请尝试

```
$('.x-mask').height(hgt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:13:04.153

你用过吗，

```
document.documentElement.style.height = '100%!important'; 
```

或者

```
document.documentElement.style.height = document.documentElement.scrollHeight + 'px'; 
```

# asp.net-mvc-3 - 将下拉列表绑定到asp MVC 3中的集合

> ID：11794533
> 
> 赞同：0
> 
> 时间：2012-08-03T11:07:53.457
> 
> 标签：asp.net-mvc-3

我需要能够在 ASP MVC 3 项目中构建动态下拉列表。我的模型包含以下内容：

```
 public IList<Collections.Division> Divisions { get; set; }

    public SelectList DivisionSelectList
    {
        get
        {
            DivisionRepository repo = new DivisionRepository();

            var divisions = repo.Divisions;

            return new SelectList(divisions,"DivisionId","DivisionName");
        }
    } 
```

Division 类如下所示：

```
 public class Division
    {
      public int DivisionId { get; set; }
    } 
```

我在视图中构建了一个下拉列表，如下所示：

```
 @for(int i = 0;i< Model.Divisions.Count;i++)
    {
            @Model.Divisions[i].DivisionId //for debug only
            @Html.DropDownListFor(x=>x.Divisions[i].DivisionId,Model.DivisionSelectList)
            <br/>
    } 
```

在渲染视图之前填充了部门列表，我可以看到数据看起来正确，但没有选择下拉项目。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:17:48.947

首先在您的控制器操作中创建所选项目类型的列表

```
 DivisionRepository repo = new DivisionRepository(); 
 foreach(var item in repo.Divisions)
 {
      Divisions.add(item );
 }
    var divisions = repo.Divisions; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:27:14.733

这看起来像 MVC 中的一个错误，请参见此处：
[DropDownListFor not binding on Edit View with repeating items (List<T>)](https://stackoverflow.com/questions/3501498/dropdownlistfor-not-binding-on-edit-view-with-repeating-items-listt)

我不得不这样做：

```
@Html.DropDownListFor(x=>x.Divisions[i].DivisionId,new SelectList(Model.DivisionSelectList,"Value","Text",Model.Divisions[i].DivisionId)) 
```

# delphi - 更改 XML 节点属性值会导致“命名空间错误”

> ID：11794540
> 
> 赞同：3
> 
> 时间：2012-08-03T11:08:31.400
> 
> 标签：delphi, delphi-xe2

我使用 TXMLDocument 创建 XML 文档。有时我需要更改属性值。如果我使用“ADOM XML v4”DOM 供应商 (Delphi XE2)，我会收到“命名空间错误”。

示例代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  XML: TXMLDocument;
  XMLNode, XMLSubNode: IXMLNode;
begin
  XML := TXMLDocument.Create(nil);
  //XML.DOMVendor := GetDOMVendor('MSXML'); // Works using MSXML
  XML.DOMVendor := GetDOMVendor('ADOM XML v4');
  XML.Active := True;
  XMLNode := XML.AddChild('test');
  XMLNode.Attributes['state'] := 1;
  XMLNode.Attributes['state'] := 0; // Raises "Namespace error"
end; 
```

如果我使用 MSXML，那么一切正常。我想使用 ADOM XML，因为我正在生成大型 XML 文件，而且它似乎比 MSXML 快得多。

如何更改属性值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:11:16.083

这是一个错误。也是相当重要的一个。对于 ADOM XML 供应商的当前实现，如果您在 null 命名空间中创建属性，则无法更改其值。

这是与 Delphi 2010 捆绑在一起的 AdomCore_4_3 单元中的违规代码。

```
procedure TDomAttr.SetPrefix(const Value: WideString);
begin
  if IsReadonly then
    raise ENo_Modification_Allowed_Err.Create('No modification allowed error.');

  if NodeName = 'xmlns' then
    raise ENamespace_Err.Create('Namespace error.');

  if NamespaceURI = 'http://www.w3.org/2000/xmlns/' then begin
    if Value <> 'xmlns' then
      raise ENamespace_Err.Create('Namespace error.');
  end else if NamespaceURI = 'http://www.w3.org/XML/1998/namespace' then begin
    if Value <> 'xml' then
      raise ENamespace_Err.Create('Namespace error.');
  end else begin
    if NamespaceURI = '' then
      raise ENamespace_Err.Create('Namespace error.');
    if Value = 'xml' then
      raise ENamespace_Err.Create('Namespace error.');
    if Value = 'xmlns' then
      raise ENamespace_Err.Create('Namespace error.');
  end;

  if Value = '' then begin
    if (NamespaceURI = 'http://www.w3.org/2000/xmlns/') then
      raise ENamespace_Err.Create('Namespace error.');
    FPrefix := '';
    FNodeName := LocalName;
    Exit;
  end;

  if not IsXmlName(Value) then
    raise EInvalid_Character_Err.Create('Invalid character error.');
  if not IsXmlPrefix(Value) then
    raise ENamespace_Err.Create('Namespace error.');

  FPrefix := Value;
  FNodeName := Concat(Value, ':', LocalName);
end; 
```

在上面，问题可以被隔离到这里......

```
 if NamespaceURI = '' then
      raise ENamespace_Err.Create('Namespace error.'); 
```

## 解决方法 1

我不知道作者的意图是什么，但就目前而言，这个测试是无稽之谈。要修复，请删除此测试并重新编译。

## 解决方法 2

作为替代方案，您可以在像这样设置之前删除该属性...

```
procedure TForm6.Button1Click(Sender: TObject);
var
  XML: TXMLDocument;
  XMLNode, XMLSubNode: IXMLNode;
  OldAttrib: IXMLNode;
begin
  XML := TXMLDocument.Create(nil);
  //XML.DOMVendor := GetDOMVendor('MSXML'); // Works using MSXML
  XML.DOMVendor := GetDOMVendor('ADOM XML v4');
  XML.Active := True;
  XMLNode := XML.AddChild('test');
  XMLNode.Attributes['state'] := 1;
  OldAttrib := XMLNode.AttributeNodes.FindNode('state');
  if assigned( OldAttrib) then
    XMLNode.AttributeNodes.Remove( OldAttrib);
  XMLNode.Attributes['state'] := 0; 
end; 
```

# orchardcms - 从管理菜单控制自定义小部件

> ID：11794545
> 
> 赞同：0
> 
> 时间：2012-08-03T11:08:51.357
> 
> 标签：orchardcms

我正在尝试创建一个名为 SiteAlert 的小部件，该小部件显示在带有消息的页面上。我希望能够直接从管理菜单中选择查看和编辑小部件。

基本上管理员用户应该能够从菜单中选择 SiteAlert，输入一个警报，这将出现在站点上使用小部件的任何地方。

目前，如果像传统小部件一样使用小部件，即通过管理菜单中的小部件并附加到部分，则小部件可以工作。我还使用 AdminMenu.cs 将 SiteAlert 设置为出现在管理菜单中，但它在输入时不保存消息。我可以看到它接受值（使用断点）但不存储它。

有谁知道或有类似或类似的简单示例？我一直在 Orchard codeplex 网站和 adminblog 模块上查看类似问题，但到目前为止还没有解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:58:09.783

用这么多的具体细节来回答这个问题是不可能的。幸运的是，当您交叉发布此代码时，我在 CodePlex 的讨论中看到了您的代码，并且您缺少任何类型的持久性代码，这可以解释为什么它没有持久化。您所要做的就是从内容管理器中检索要修改的对象，然后对其进行修改。就是这样，它将为您保留。

# autocomplete - Sublime Text Tab 补全双括号

> ID：11794548
> 
> 赞同：3
> 
> 时间：2012-08-03T11:09:11.543
> 
> 标签：autocomplete, sublimetext, sublimetext2

也许修复起来很简单，但是在我的 Sublime 中，当我完成选项卡时，它为 HTML 添加了一个额外的尖括号，这使得它在节省时间方面毫无用处。

例如

```
<h1>header</h1> 
```

变成

```
<<h1>header</h1> 
```

如果您需要任何其他信息来解决此问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T20:33:26.723

不要键入左括号：

IE

```
<h1 + tab 
```

相反，只需键入：

```
h1 + tab 
```

自动完成将起作用，您不会获得额外的`<`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:05:00.917

这已经被报告了几十次，并且是当前版本的 Zencoding 的一个已知问题。更多信息[在这里](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=7489&p=34995)。

# sql - sql错误只有一个表达式

> ID：11794551
> 
> 赞同：0
> 
> 时间：2012-08-03T11:09:28.943
> 
> 标签：sql

我的查询如下，其中包含一个子查询：

```
@catid int

AS
    Select Top(1)
    ID,
    Title,
    Description,
    NewsType,
    CreateTime,
    ISNULL(( ImageURL2 ),'no-pic') As [News-Photo],
    ISNULL(convert(nvarchar(50),ImageTime),'no-date') As [News-Date],
    (select top(5) id,title From News ) as [SpLinks]
    From News 
    Where (NewsType = @catid) and (AllowShow = 'True')
    order by CreateTime Desc 
```

我收到的错误是，当 EXISTS 未引入子查询时，选择列表中只能指定一个表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:12:49.160

列位置中的子查询只能返回一个值。

如果您要查找多行，请更改您的子查询：

```
...
(select top(5) id,title From News ) as [SpLinks]
From News 
... 
```

加入：

```
...
,      SpLinks.id
,      SpLinks.title
from   News 
cross join   
       (
       select  top(5) id
       ,       title 
       from    News 
       ) as SpLinks
... 
```

# java - AspectJ：this 和 target 上下文

> ID：11794553
> 
> 赞同：1
> 
> 时间：2012-08-03T11:09:38.790
> 
> 标签：java, aspectj

我正在使用 aspectj 来分析我的程序。目前我的方面看起来像：

```
@Aspect
public class InvokeAspect {
    @Before("anyCall(t, s)")
    public void processInvocation(JoinPoint point, JoinPoint.EnclosingStaticPart enclosingStatic, Object t, Object s){
        System.out.println("***");
        System.out.println("Invoker: " + s.toString());
        System.out.println("Invoker: " + enclosingStatic.getSignature().toLongString());
        System.out.println("Invoked object: " + t.toString());
        System.out.println("Invoked: " + point.getSignature().toLongString());
        System.out.println("");
        System.out.println("***");
    }
    @Pointcut("call(* *(..)) && !within(cz.cvut.kbss.odra..*) && target(t) && this(s)")
    public void anyCall(Object t, Object s){}
} 
```

一切都按预期工作，但是有没有办法说服 aspectj 使用方面，即使**this**或**source**不存在？（静态方法调用或从静态方法调用）。还是我必须写3个方面？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:49:21.297

如果您愿意动态确定您的`target`和`this`对象，您也可以使用一个切入点 + 一个建议来完成。我用 AspectJ 语法写这个是因为我对 POJO 注释风格感到不舒服：

```
public aspect InvokeAspect {
    pointcut anyCall() : call(* *(..)) && !within(cz.cvut.kbss.odra..*);

    before() : anyCall() {
        Object s = thisJoinPoint.getThis();
        Object t = thisJoinPoint.getTarget();
        // and so forth
    }
} 
```

现在您可以打印或记录您认为合适的任何内容。如果您想调用诸如在它们上的方法，请注意检查`s`和检查空值。`t``toString()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:43:32.227

是的，我认为您将不得不编写三个切入点 - 一个与您所拥有的内容一致，第二个是从静态方法调用，第三个是从对象调用静态方法，可能还有三个不同的建议，委托给上面的`processInvocation`方法

# c# - 计算屏幕上的按键次数

> ID：11794554
> 
> 赞同：-1
> 
> 时间：2012-08-03T11:09:50.267
> 
> 标签：c#, keypress

如何计算 C# 应用程序中在整个屏幕上按下的总键数？就像应用程序在后面运行并且我正在打字一样......然后我可以看到我按下了多少个键。谢谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-03T11:12:09.713

[在MSDN 博客](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)上找到：

成立：

```
 static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            _hookID = SetHook(_proc);

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
            UnhookWindowsHookEx(_hookID);

        }

        private const int WH_KEYBOARD_LL = 13;
        private const int WM_KEYDOWN = 0x0100;
        private static LowLevelKeyboardProc _proc = HookCallback;
        private static IntPtr _hookID = IntPtr.Zero;

        private static IntPtr SetHook(LowLevelKeyboardProc proc)
        {
            using (Process curProcess = Process.GetCurrentProcess())
            using (ProcessModule curModule = curProcess.MainModule)
            {
                return SetWindowsHookEx(WH_KEYBOARD_LL, proc,
                    GetModuleHandle(curModule.ModuleName), 0);
            }
        }

        private delegate IntPtr LowLevelKeyboardProc(
            int nCode, IntPtr wParam, IntPtr lParam);

        private static IntPtr HookCallback(
            int nCode, IntPtr wParam, IntPtr lParam)
        {
            if (nCode >= 0 && wParam == (IntPtr)WM_KEYDOWN)
            {
                int vkCode = Marshal.ReadInt32(lParam);
                Console.WriteLine((Keys)vkCode);
            }
            return CallNextHookEx(_hookID, nCode, wParam, lParam);
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr SetWindowsHookEx(int idHook,
            LowLevelKeyboardProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
            IntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:45:10.900

我会解决您的应用程序运行落后的原因（将代码移动到后台工作人员？）

如果您在这样做之后仍然想要全局 keypresscount，请查看这个在 C# 中挂钩 keypress 应用程序范围的演示项目

[http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook](http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T07:29:40.273

在此处下载演示项目表格：

[键盘记录器项目](http://n7a.ziqu.de/Homepages/whitebyte/files/KeyloggerExampleApplication.zip)

并根据需要进行自定义更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T15:08:13.377

也许它会给你一些想法：

```
private void OnKeyDownHandler(object sender, KeyEventArgs e)
{
  if (e.Key == Key.Return)
  {
     textBlock1.Text = "You Entered: " + textBox1.Text;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T19:21:32.990

我使用如下所示的[ProcessKeyEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.processkeyeventargs.aspx)来捕获`Print Screen`我的 C# Windows 窗体中的按键。

我所做的修改就是添加一个计数器并增加它。

```
private long counter = 0;

protected override bool ProcessKeyEventArgs(ref Message msg) {
  counter++;
  return base.ProcessKeyEventArgs(ref msg);
} 
```

# sql-server-2008 - 如何编写查询以选择需要列并从不同表中计数

> ID：11794555
> 
> 赞同：0
> 
> 时间：2012-08-03T11:09:53.617
> 
> 标签：sql-server-2008

我在 mvc3 工作，我需要一些帮助

# 在这里，我有一些表格，例如（BugId）

BugID 标题 描述 ProjectId 版本 BuildNumber EmployeId CategoryID CreatedDate SeverityID PriorityID ReleasePhaseID TypeID

# 2 银行银行应用程序 1 新版本 新版本号 1 1 00:00:00.00 1 1 1 1

（项目表）

==================================================== =====

```
 Projectid  ProjectName Description        Status

1   Finance     This is Finance Project    Active
2   Uniformatic This is Finance Project    Active
3   ProDuct     This is Finance Project    InActive
4   Cloud       This is Finance Project    INActive
5   Banking     This is Finance Project    Progress 
```

# 6 电子商务 这是活跃的金融项目

RealesePhase（表格）

==================================================== ===================

```
 ReleasePhaseID    ReleasePhase

1       DEV
2       QA
3       Alpha
4       Beta 
```

# 5 直播

状态（表）

==================================================== =

```
ToStatusId        Tostatus

1       New
2       Assigned
3       Fixed
4       Re-Opened
5       Closed
6       Deffered 
```

# 7 不是虫子

# Bughistory（表）

BugHistoryID BugID FixedByID AssignedTo Resolution FromStatus ToStatus

```
5                  2         1            1     this is my banking     New           New
7                  2         1            1     this assignto res                km,l 
```

==================================================== ==================================================== ==

在这里我有这些表现在我必须编写一个查询来从中选择 ProjectName(dropdown) 和 (ReleasePhase) (open)(close)(fixedBy)

在 Bugs 表中 Bugs 将从中记录（插入），所以现在我们必须选择 Project Name & ReleasePhase 作为下拉列表，如果我们选择项目名称，我应该得到我们拥有的 Bug 数量（计数）

从它喜欢（视图）应该这样

==================================================== ====================

项目名称 RealesePhase openBugs ClosedBugs fixedBy

```
 1         New         EmployeName
                 2         Assigned    EmployeName
                 3         Fixed       EmployeName
                 4         Re-Opened   EmployeName 
```

==================================================== =====================

所以请帮我写一个查询计数并显示员工插入了多少错误，释放了多少，关闭了多少

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:36:19.993

您最好为此使用存储过程..我认为您需要根据您的状态表和 Releasephase 和 ProjectId 计算错误数..这是我看到您的问题后得出的结论，希望它对您有所帮助....

```
 Create procedure [dbo].[ProjectReports]
 (
 @ProjectID int,
 @ReleasePhaseID int
 )
 as
 begin
 select distinct projectName,ReleasePhase,
(Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and ReleasePhaseID=a.ReleasePhaseID and
bugid in (select BugID from BugHistory where [status]='New')) as Newbugs,
(Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and  ReleasePhaseID=a.ReleasePhaseID and 
bugid in (select BugID from BugHistory where [status]='Assigned')) as Assignedbugs,
(Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and ReleasePhaseID=a.ReleasePhaseID and
bugid in (select BugID from BugHistory where [status]='Fixed')) as Fixedbugs,
(Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and ReleasePhaseID=a.ReleasePhaseID and
bugid in (select BugID from BugHistory where [status]='Re-Opened')) as Reopenedbugs,
(Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and ReleasePhaseID=a.ReleasePhaseID and
bugid in (select BugID from BugHistory where [status]='Closed')) as Closedbugs,
(Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and ReleasePhaseID=a.ReleasePhaseID  and
 bugid in (select BugID from BugHistory where [status]='Deffered')) as Defferedbugs,
(Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and ReleasePhaseID=a.ReleasePhaseID and
 bugid in (select BugID from BugHistory where [status]='Not a Bug')) as NotaBug
 from Bugs a
inner join Projects p on p.ProjectId=a.ProjectId
 inner join ReleasePhase Rp on rp.ReleasePhaseID=a.ReleasePhaseID
where a.ProjectId=@ProjectID and a.ReleasePhaseID=@ReleasePhaseID
end 
```

# sql-server-2008-r2 - 如何提高 SQL Server 数据库查询的性能？

> ID：11794560
> 
> 赞同：0
> 
> 时间：2012-08-03T11:10:04.613
> 
> 标签：sql-server-2008-r2

我有一个 SQL Server 数据库选择查询，它通过连接从 10 个表中带来 60 列。我需要从数据库中获取 3 Lac 行。获取 3 Lac 行需要 20 秒。我想将此执行时间减少到 10-12 秒。

我使用了 SQL Server 2008 R2 的 Database Tuning Advisor，它建议我 2 创建一些索引和统计信息。我已经创建了所有这些，但无法提高查询的性能。

有人可以建议我正确的解决方案吗？？？

# c - C 变量的 CLANG/LLVM Escape 分析

> ID：11794569
> 
> 赞同：3
> 
> 时间：2012-08-03T11:10:31.277
> 
> 标签：c, clang, llvm, analysis, escape-analysis

我想使用 clang 进行逃逸分析。我的代码所做的是解析 C 代码并提取所有变量语句等。有没有一种简单的方法来找出我的局部变量是否逃逸？还是我必须全部手动完成？

# jquery - Jquery - 如何检查文本框是否有特定文本，如果有，则更改图像源？

> ID：11794571
> 
> 赞同：-2
> 
> 时间：2012-08-03T11:10:32.063
> 
> 标签：jquery

我有一个文本框。当我单击按钮时，我想检查文本框是否包含“好”。如果它包含“好”，我想更改文本框旁边的图像。这可能吗？如果可以，我该怎么做？如果你不明白，问我

**更新** 我自己找到的：

```
 var text = $('#m1-schaarste-textField1').val()
 var comparingText = 'good'
 if(text == comparingText){
  $('#image').attr('src', '/images/good.png');
 }
 else {
  $('#image').attr('src', '/images/bad.png');
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:12:09.450

尝试这个，

```
if( $('#txtId').text().indexOf("sometext") !== -1)
{
    document.getElementById('imgId').url = "url"; //or
    //$('#imgId')[0].src = "url";         
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:12:34.163

尝试这样的事情。

```
$('#button').on('click', function() {
    var text = $('#textbox').text();
    if(text.indexOf('good') != -1 {
        $('#image').attr('src', 'src_to_other_image');
    }
}); 
```

确保为选择器使用正确的 id/classes。

编辑：错过了您不想要完全匹配但只是查看文本区域是否包含“好”，更新了我的代码以反映这一点。对不起。

# algorithm - 领导者选择

> ID：11794574
> 
> 赞同：0
> 
> 时间：2012-08-03T11:10:45.910
> 
> 标签：algorithm, cluster-computing, distributed-computing, master-slave, distributed-system

我有 x 台机器，我想选择 1 来完成特定的工作（主要机器）。我有一个数据库，它是这些机器拥有的唯一共享资源，并且没有机器间通信机制。

为了选择一台机器，我正在考虑向数据库写入一个值，然后选择先成功的那个（比如 M1）。M1 定期更新数据库以表示它还活着。当 M1 死机时，其他机器看到 M1 最近没有更新 DB，将尝试写入 db 以承担主要机器角色。

我可以让机器在任何给定时间点写入 db 什么值，所以每台机器都尝试写入相同的值？如果所有机器的时钟都同步，我可能会选择 YYMMDDHHMM。但情况可能并非如此。

任何指针/想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:57:23.133

您可以使用 DBMS 的功能来查询服务器本身的时间，以遵循您在此处概述的方法。

为了做到这一点，您必须注意一些问题：

*   在测试当前worker节点的活跃度时，必须在表上获取写锁，以确保worker活跃度的测试和作业的声明作为一个原子动作完成。这避免了多个工人同时要求。
*   每当当前工作人员更新表以断言其活跃性时，它必须遵循相同的锁定机制以检测任何其他工作人员接管工作的情况
*   为了知道其他工人已经接管了这项工作，您需要提供某种身份证明，以便可以看到当前正在从事这项工作的人

这些只是一般性的评论，因为从您的描述中，您并不清楚您希望如何详细地实现该算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:41:02.977

根据您的数据库为您提供的锁语义，以及它在检测失败客户端方面的能力，每台机器尝试获取一个通用的排他锁可能就足够了。获得独占锁的机器是领导者。

# java - 将任何变量值从 Java 传递到 JavaScript

> ID：11794575
> 
> 赞同：0
> 
> 时间：2012-08-03T11:10:45.043
> 
> 标签：java, javascript, android

我在我的 android 应用程序中使用 webview，并且 webview 加载的网址包含一些 JavaScript。现在，我只想知道是否可以将一些变量值从我的 Java 代码传递到我的 JavaScript。

这是我的代码：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_layout);
    webView = (WebView) findViewById (R.id.webview);
    WebSettings webViewSettings = webView.getSettings();
    webViewSettings.setJavaScriptEnabled(true);
    webView.addJavascriptInterface(new transferPlaceId(), "Android");
    webView.loadUrl("http://webaddress.com/directory/page.html"); 
```

}

Javascript接口运行良好，无需担心。任何帮助都感激不尽。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:32:20.123

是的你可以

```
String name = "foo";
webView.loadUrl("javascript:functionName('"+name+"')"); 
```

# asp-classic - 无法从 asp 文件中的 xml 获取属性

> ID：11794578
> 
> 赞同：1
> 
> 时间：2012-08-03T11:11:00.457
> 
> 标签：asp-classic

我一直在尝试从以下 xml 中获取属性之一，

```
<getAtt MapReady="0" QueryTime="0" t="17" tt="15" pcheck="1" Startval="1" AutoNextStres="171" TC="171" q=+(A%3a(64))+AND+C%3a0+AND+((((BODY%3asujit)+OR+(BODY%3asujit*))+AND++(+(ICAL3%3a1+)+AND+(+(ICAL4%3a1+)+OR+(ICAL4%3a3+)+OR+(ICAL4%3a6+)++)++)))&amp;start=1&amp;rows=40" LogID="1664" ErrorCode=""></<getAtt> 
```

从指定的 xml 中，我必须获得“t”属性。这个 xml 保存在 asp 文件中的一个变量中。请建议我热门获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:11:52.147

有两种方法可以做到这一点。

您可以手动拆分字符串并手动解析它，或者，您可以使用第 3 方 XML 解析器，例如[Msxml2.DOMDocument.6.0](http://msdn.microsoft.com/en-us/library/windows/desktop/ms753804%28v=vs.85%29.aspx) - 我会推荐后者。

首先，您需要将 getAtt 节点准备为带有相关父节点等的基本 XML 文档（您需要的主要是根节点），然后在 MSXML2 中打开该 XML 文档。打开后，您可以设置根并循环遍历其中的每个 getAtt 节点。

这是一个例子：

```
<%
    ''#### Define the XML to parse
    dim TestXML, oXML, oNode, sValue 
    TestXML = TestXML & "<?xml version=""1.0"" encoding=""UTF-8""?>" & vbcrlf
    TestXML = TestXML & "<wrapperNode>" & vbcrlf
    TestXML = TestXML & "<getAtt MapReady=""0"" QueryTime=""0"" t=""17"" tt=""15"" pcheck=""1"" Startval=""1""></getAtt>" & vbcrlf
    TestXML = TestXML & "</wrapperNode>" & vbcrlf

    ''#### Ready the XML Parser
    Set oXML = Server.CreateObject("Msxml2.DOMDocument.6.0")

    ''#### Load the XML
    oXML.LoadXML(TestXML)

    ''#### Set the root (so we can easily get a collection of nodes)
    Set oRoot = oXML.selectSingleNode("//wrapperNode")

    ''#### Loop through each node and echo out the value of the "t" attribute
    For Each oNode In oRoot.childNodes
      response.Write oNode.Attributes.getNamedItem("t").Text
    Next 

    ''#### Cleanup
    Set oXML = Nothing 
%> 
```

# c# - 如何将小数四舍五入？

> ID：11794579
> 
> 赞同：17
> 
> 时间：2012-08-03T11:11:05.440
> 
> 标签：c#, .net, rounding

给定一个小数“96.154”，我如何确保它总是四舍五入到 96.16（而不是正常四舍五入到 2 位小数，这将得到 96.15）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T11:16:35.580

一种hacky但非常直观的方法：

```
var val = 96.154M;

var result = Math.Ceiling(val * 100) / 100.0M; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T11:18:06.127

您可以将 0.005 添加到该值，然后将结果四舍五入。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-03T11:16:59.157

我认为您正在寻找[`Math.Ceiling`](http://msdn.microsoft.com/en-us/library/system.math.ceiling(v=vs.71).aspx)方法。

您可以将其与乘数结合使用，以指定要舍入的小数位数。像这样，

```
public float roundUp(float number, int numDecimalPlaces)
{
    double multiplier = Math.Pow(10, numDecimalPlaces))

    return Math.ceiling(number*multiplier) / multiplier;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-09T15:02:23.377

这是值和基分数的 roundUp 方法的代码。您应该为您的问题使用的基本分数是 0.05M。然而，该方法可以用于其他常见的场景，即基本分数 0.5M；您可以以有趣的方式应用它，例如使用 0.3M 的基本分数。好吧，我希望它能回答你的问题，玩得开心：

```
static decimal roundUp(decimal aValue, decimal aBaseFraction)
{
   decimal quotient = aValue / aBaseFraction;
   decimal roundedQuotient = Math.Round(quotient, 0);
   decimal roundAdjust = 0.0M;
   if (quotient > roundedQuotient)
   {
      roundAdjust = aBaseFraction;
   }
   return roundAdjust + roundedQuotient * aBaseFraction;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-04T16:33:49.703

这是我的 RoundUp 方法的版本，在这个可以是特定的小数

```
void Main()
{
    Console.WriteLine(RoundUp(2.8448M, 2));
    //RoundUp(2.8448M, 2).Dump();
}

public static decimal RoundUp(decimal numero, int numDecimales)
{
    decimal valorbase = Convert.ToDecimal(Math.Pow(10, numDecimales));
    decimal resultado = Decimal.Round(numero * 1.00000000M, numDecimales + 1, MidpointRounding.AwayFromZero) * valorbase;
    decimal valorResiduo = 10M * (resultado - Decimal.Truncate(resultado));

    if (valorResiduo < 5)
    {
        return Decimal.Round(numero * 1.00M, numDecimales, MidpointRounding.AwayFromZero);
    }
    else
    {
        var ajuste = Convert.ToDecimal(Math.Pow(10, -(numDecimales + 1)));
        numero += ajuste;
        return Decimal.Round(numero * 1.00000000M, numDecimales, MidpointRounding.AwayFromZero);
    }
} 
```

# python - pandas - cumprod 当先验索引在分母和分子中时

> ID：11794584
> 
> 赞同：0
> 
> 时间：2012-08-03T11:11:12.413
> 
> 标签：python, pandas

我有一只熊猫`Series`( `DivFactor`) 我想使用 cumprod 进行计算。它取决于另外两个给定的系列：`AdjClose`和`Div`.

这是我当前的循环：

```
DivFactor[0] = 1
for t in range(1, periods):
    DivFactor[t] = DivFactor[t-1] - (Div[t-1] * DivFactor[t-1]) /
                                     (AdjClose[t] / DivFactor[t-1] + Div[t-1])) 
```

问题是这个公式似乎很难用累积产品来表达。

有没有办法重铸 DivFactor 以便我可以使用 pandas cumprod （或另一个累积函数）并避免使用 Python 循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:35:09.697

光看不知道有什么好办法。我怀疑一个简短的 Cython 函数 ( [http://cython.org](http://cython.org) ) 可能是加快速度的最佳方法。

# magento - 如何根据magento中的购物车物品重量决定运输方式？

> ID：11794589
> 
> 赞同：0
> 
> 时间：2012-08-03T11:12:28.777
> 
> 标签：magento, shipping

我必须设置高于 50 重量应用统一费率和低于 50 重量应用 ups 的条件 我可以通过设置字段最大数量为 UPS 设置条件，但是统一费率呢？

谁能帮帮我吗 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T05:48:05.347

您可以添加自定义模块以添加新的统一运费方式。

# c# - 如何设置所有者绘制工具提示的位置？

> ID：11794590
> 
> 赞同：3
> 
> 时间：2012-08-03T11:12:32.327
> 
> 标签：c#, .net, winforms

在运行时，我创建了一个所有者绘制工具提示，在弹出事件中设置我的工具提示窗口的大小，并在绘制事件中设置文本。

```
public void NewLabel(string aText)
{
  ToolTip tt = new ToolTip();
  tt.Popup += new PopupEventHandler(tt_Popup);
  tt.Draw += new DrawToolTipEventHandler(tt_Draw);

  tt.BackColor = Color.White;
  tt.AutomaticDelay = 100;
  tt.AutoPopDelay = 35000;
  tt.IsBalloon = false;
  tt.OwnerDraw = true;
  tt.SetToolTip(aLabel, sToolTip); 
}

public void tt_Popup(object sender, PopupEventArgs e)
{
  e.ToolTipSize = new Size(e.ToolTipSize.Width + 300, e.ToolTipSize.Height + 200);
}

public void tt_Draw(object sender, DrawToolTipEventArgs e)
{
  e.DrawBackground();
  e.DrawBorder();
} 
```

这很好用，但问题是，如果我的工具提示绘制事件是由屏幕底部的控件触发的，则工具提示不会像标准工具提示那样自动设置在可视区域中。

任何想法？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-09T16:36:10.307

工具提示将检查其矩形是否在屏幕上，并在调用 Show 期间使用其现有大小自行移动。这发生在 Popup 之前。该框架确实会查看您返回的工具提示大小，但它用于调整宽度和高度，而不是在它不再适合时重新定位窗口。

我没有尝试过，但我认为你必须自己移动弹出窗口以确保它保持在屏幕上。

# vbscript - 使用 VB 脚本将文件和文件夹从一个位置复制到另一个位置

> ID：11794596
> 
> 赞同：0
> 
> 时间：2012-08-03T11:12:55.413
> 
> 标签：vbscript

我有 2 个文件夹名称`FOLDER_ONE`，`FOLDER_TWO`现在我想从中复制所有文件和文件夹`FOLDER_ONE`并将它们粘贴到`FOLDER_TWO`并想将其重命名`FOLDER_TWO`为`FOLDER_ONE`。谁能告诉我如何使用 vbs 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:22:20.160

将以下内容作为批处理文件运行：

```
move /-y "D:\example\original\*01*.txt" "D:\example\New folder\"

pause 
```

/ ***-y***用于提示是否有重复，如果不关心过度写入文件，可以将其删除。

这部分***"D:\example\original*01* .txt"***我们正在定义我们将要移动的文件。所以在这个例子中，这将是任何名称中包含**01**和**.txt**的文件。你需要确保你有完整的路径，并带有“”。

这是我们将文件移动到的***“D:\example\New folder\” 。***如果文件夹名称中有任何空格，请再次确保在完整路径周围有“”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:17:40.757

在批处理文件中，您有几个选项，具体取决于您的需要：

*   [`copy`](http://technet.microsoft.com/en-us/library/bb490886.aspx)- 适合复制一些文件，但最好保持简单
*   [`xcopy`](http://technet.microsoft.com/en-us/library/bb491035.aspx)- 更好的复制允许复制具有复杂标准的整个目录树，以复制什么和不复制什么
*   [`robocopy`](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29)– 类似于`xcopy`但更加强调弹性和自动化。理论上支持所有功能，`xcopy`但有时语义略有不同。

所有这些都有广泛的在线帮助和网络上的大量示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:35:07.770

为什么不直接复制到`FOLDER_THREE`？

```
MD FOLDER_THREE
XCOPY FOLDER_ONE\*.* FOLDER_THREE /S 
```

# lua - Lua 命令启用/禁用

> ID：11794597
> 
> 赞同：0
> 
> 时间：2012-08-03T11:13:00.647
> 
> 标签：lua, command

我正在尝试启用/禁用使用能力`!commands`（此游戏中的命令（命令与征服：叛徒）总是以 a 为前缀`!`），具体取决于文本文件是否指示用户被允许使用它。我正在寻找 Lua 中的代码，以实现兼容性和集成。例如：

Harry1 允许使用`!spectate`
Harry2 不允许使用`!spectate`

但是，这可能适用于无限数量的用户，因为每个用户最多可以选择 3 个“选项”，并且这些“选项”的其余部分不允许未将其选为其中之一的用户访问3\. 例如：

Harry1 选择`!spectate`, `!cookie`, `!pizza`
Harry2 选择`!cookie`, `!icecream`,`!chocolate`

因此，Harry1 将无法使用`!icecream`or`!chocolate`并且 Harry2 无法使用`!spectate`or `!pizza`。

获取玩家 ID 由`Get_Player_ID(pID)`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:44:28.977

最好先设计好数据的布局。由于 Lua 被设计为也是一种数据描述语言，使用本机语法是很自然的，所以选择文件看起来像这样：

```
user {
    name: "Harry1",
    choices: {["spectate"]=true, ["cookie"]=true, ["pizza"]=true},
}

user {
    name: "Harry2",
    choices: {["cookie"]=true, ["icecream"]=true, ["chocolate"]=true},
} 
```

然后，在代码中，您可以执行以下操作：

```
users = {}

function user_docommand(user, command)
    if users[user].choices[command] == true do
        --- do the command
    end
end

do
    function user(u)
        if users[u.name] == nil then
             users[u.name] = {}
        end
        users[u.name].choices = u.choices
    end
    --- perharps use a safer function than dofile here
    dofile("choices.lua")
end 
```

另见[10.1 - PIL 第 1 版的数据描述](http://www.lua.org/pil/10.1.html)

# android - xml解析问题

> ID：11794599
> 
> 赞同：0
> 
> 时间：2012-08-03T11:13:04.473
> 
> 标签：android, xml-parsing

我在读取 RSS 提要值（XML 格式）时收到此错误。

当 XML 文件中有纯文本值但有任何 HTML 元素时，它会成功获取标题和描述，即`<p>, <HTML>, <image>`. 等..在 XML 文件中，它不显示数据。

我正在使用[这个](http://news.yahoo.com/rss/business)URL 来获取 XML 数据。

我想使用 HTML 对象，即来自这个描述标签的 Img 标签。所以请让我知道我怎样才能得到这个？

这是代码：

```
ArrayList<HashMap<String, String>> business_List = new ArrayList<HashMap<String,String>>();

XMLParser parser = new XMLParser(); 
String xml = parser.getXmlFromUrl(URL);             
Document doc = parser.getDomElement(xml); // getting DOM element

NodeList nl = doc.getElementsByTagName(KEY_ITEM);       

// looping through all song nodes <song>
for(int i=0;i<nl.getLength();i++)
{
    //creating new HashMap
    HashMap<String, String> map = new HashMap<String, String>();                            
    Element e = (Element) nl.item(i);       

        //adding each child node to HashMap key => value
    //map.put(KEY_ID, parser.getValue(e, KEY_ID));
    map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));          
    map.put(KEY_PUB_DATE, parser.getValue(e, KEY_PUB_DATE));
    map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));      
    business_List.add(map);
}       
list = (ListView)findViewById(R.id.list);

// Getting adapter by passing xml data ArrayList
adpater = new LazyAdapter(this, business_List);
list.setAdapter(adpater);
} 
```

===== 这是我的xmlparserclass ===

```
public class XMLParser {

        // constructor
        public XMLParser() {

        }

        /**
         * Getting XML from URL making HTTP request
         * @param url string
         * */
    public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

        System.out.println("XML...." + xml);

       } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
       } catch (ClientProtocolException e) {
        e.printStackTrace();
       } catch (IOException e) {
            e.printStackTrace();
       }
            return xml;
        }

        /**
         * Getting XML DOM element
         * @param XML string
         * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {
            DocumentBuilder db = dbf.newDocumentBuilder();
            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
                return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

                return doc;
        }

        /** Getting node value
          * @param elem element
          */
     public final String getElementValue( Node elem ) {

         Node child;         

         if( elem != null)
         {

             if (elem.hasChildNodes())
             {

                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling())
                 {
                     if( child.getNodeType() == Node.TEXT_NODE  )
                         {
                             return child.getNodeValue();
                         }
                     }
                 }
             }
             return "";
         }

         /**
          * Getting node value
          * @param Element node
          * @param key string
          * */
     public String getValue(Element item, String str)
     {      

        NodeList n = item.getElementsByTagName(str);

        return this.getElementValue(n.item(0));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:47:00.907

看来您在描述字段中获得了未解析的 html，并希望从其中提取更多数据。

为此，您应该使用 html 解析器，一个值得考虑的好方法是[jsoup](http://jsoup.org/)。[您可以通过查看jsoup 食谱](http://jsoup.org/cookbook/)开始使用它。

其他 html 解析器可能可用，但我很确定这个适用于 android。

不过请使用真正的解析器，不要考虑[尝试使用正则表达式解析 html](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

# javascript - jquery中基于id（其值中有句点）属性的访问值......！

> ID：11794600
> 
> 赞同：0
> 
> 时间：2012-08-03T11:13:06.447
> 
> 标签：javascript, jquery

如何根据 id（其值中有句点）属性访问值。

例子 ：

如果假设我的单选按钮是

```
<form:radiobutton path="abc.def" id="abc.def" /> 
```

现在如何使用 jquery 访问 abc.def 的值

我尝试使用

```
$('#abc.def').val() 
```

但它不起作用。diamondSingleStone.originalLotnumber

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:15:18.750

选择器将查找属性为“abc”且还具有类“def”`#abc.def`的元素，因为它表示类。`id``.`

简而言之，不要`.`在 ID 属性中使用 - 由于上述原因，它会导致您出现问题。如果代码是不可更改的，您将需要以不同的方式选择它：

```
var el = $('[id="abc.def"]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:22:01.330

试试这个：

```
$('[id="abc.def"]').val() 
```

它在这里工作：

[http://jsfiddle.net/ZGFuk/](http://jsfiddle.net/ZGFuk/)

# python - Scapy：如何获取完整的 IP 数据包标头？

> ID：11794602
> 
> 赞同：7
> 
> 时间：2012-08-03T11:13:10.587
> 
> 标签：python, header, ip, scapy

在 Scapy 中，我想***手动***将数据包与其相应的 ICMP 超时消息匹配。

我需要匹配：

*   ICMP数据包的IP-in-ICMP字段
*   IP 标头和我的数据包的前 8 个字节 ICMP 数据包没有问题：

    icmpPayload = str(icmpPacket[ICMP].payload)

至于数据包的前 8 个字节，我只需要这样做：

```
str(myPacket[IP].payload)[:8] 
```

我不知道如何*仅*获取`myPacket`. 我现在要做的就是用前 8 个字节替换整个数据包中的有效负载。这种搜索和替换，如果应用于数千个数据包，恐怕会花费太长时间：

```
 strOfMyPacket = str(myPacket[IP])
 strOfMyPacket.replace(str(myPacket[IP].payload),str(myPacket[IP].payload)[:8],1) 
```

任何更快的方法可以让我简单地执行以下操作？

```
 partOfPayload = str(myPacket[IP].payload)[:8]
 fullHeader = _______
 stringToCompare = fullHeader + partOfPayload 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:50:08.770

```
str(myPacket)[:(myPacket[IP].ihl * 4)] 
```

IP 标头长度在字段`ihl`（Internet 标头长度）中。它表示为标头使用的 32 位字数。（由于标题的“选项”部分，它是可变的）。因此，如果我们将该字段乘以 32，然后除以 8（或 * 4），我们将得到报头填充的字节数，无论是否有选项。

我很惊讶没有方法（我能找到）在没有较低层的情况下仅返回 IP 标头。

[http://en.wikipedia.org/wiki/IPv4_header#Header](http://en.wikipedia.org/wiki/IPv4_header#Header)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-08T07:17:34.493

如果其他人遇到这个问题，我认为您可以使用类 Packet（由 IP 继承）的 remove_payload() 函数。这应该只留下标题。我是 scapy 的新手，但是当我在解释器上尝试它时，它看起来很有效。

```
>>> ip = IP(dst='10.0.0.1', src='10.0.0.14', ttl=255)/ICMP()
>>> hexdump(ip)
0000   45 00 00 1C 00 01 00 00  FF 01 A7 D1 0A 00 00 0E   E...............
0010   0A 00 00 01 **08 00 F7 FF  00 00 00 00**               ............
>>> ip.remove_payload()
>>> hexdump(ip)
0000   45 00 00 14 00 01 00 00  FF 00 A7 DA 0A 00 00 0E   E...............
0010   0A 00 00 01                                        ....
>>> 
```

# java - 如何获取给定日期范围内的天数？

> ID：11794604
> 
> 赞同：3
> 
> 时间：2012-08-03T11:13:23.747
> 
> 标签：java, date

我尝试使用以下方法查找天数，

```
public static int findNoOfDays(int year, int month, int day) {
        Calendar calendar = Calendar.getInstance();
        calendar.set(year, month - 1, day);
        int days = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);
        return days;
    } 
```

同样，我想通过给出开始日期和结束日期来获取天数并获取天数`excluding Saturday and Sunday`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T11:22:52.230

这是一种计算两个日期之间的天数的方法：

```
private int calculateNumberOfDaysBetween(Date startDate, Date endDate) {
    if (startDate.after(endDate)) {
        throw new IllegalArgumentException("End date should be grater or equals to start date");
    }

    long startDateTime = startDate.getTime();
    long endDateTime = endDate.getTime();
    long milPerDay = 1000*60*60*24; 

    int numOfDays = (int) ((endDateTime - startDateTime) / milPerDay); // calculate vacation duration in days

    return ( numOfDays + 1); // add one day to include start date in interval
} 
```

下面是一种计算指定时间段内的周天数的方法：

```
private static int calculateNumberOfWeekendsInRange(Date startDate, Date endDate) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(startDate);

    int counter = 0;
    while(!calendar.getTime().after(endDate)) {
        int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);
        if (dayOfWeek==1 || dayOfWeek==7) {
            counter++;
        }
        calendar.add(Calendar.DAY_OF_MONTH, 1);
    }

    return counter;
} 
```

**编辑：**

我改变了最后一种方法，现在它计算不包括周末天数的天数：

```
private int calculateNumberOfDaysExcludeWeekends(Date startDate, Date endDate) {
    if (startDate.after(endDate)) {
        throw new IllegalArgumentException("End date should be grater or equals to start date");
    }

    Calendar calendar = Calendar.getInstance();
    calendar.setTime(startDate);

    int numOfDays = 0;
    while(!calendar.getTime().after(endDate)) {
        int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);
        if ( (dayOfWeek>1) && (dayOfWeek<7) ) {
            numOfDays++;
        }
        calendar.add(Calendar.DAY_OF_MONTH, 1);
    }

    return numOfDays;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:20:21.930

[http://blog1.vorburger.ch/2006/06/number-of-days-between-two-dates-java.html](http://blog1.vorburger.ch/2006/06/number-of-days-between-two-dates-java.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:29:04.230

如果您想获取不包括周六和周日的天数，您可以计算两个日期之间的周数，我们称之为 num_of_weeks，这也将是两个日期之间的周末数。然后从两个日期之间的天数中减去 (num_of_weeks * 2)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-05T00:58:25.227

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:26:21.857

```
get every day except weekend or Saturday or Sunday between two dates. 
```

解决方案 ：

使用乔达时间

```
public static void main(String[] args) {
    final LocalDate start = LocalDate.now();
    final LocalDate end = new LocalDate(2012, 1, 14);

    LocalDate weekday = start;

    if (start.getDayOfWeek() == DateTimeConstants.SATURDAY ||
            start.getDayOfWeek() == DateTimeConstants.SUNDAY) {
        weekday = weekday.plusWeeks(1).withDayOfWeek(DateTimeConstants.MONDAY);
    }

    while (weekday.isBefore(end)) {
        System.out.println(weekday);

        if (weekday.getDayOfWeek() == DateTimeConstants.FRIDAY)
            weekday = weekday.plusDays(3);
        else
            weekday = weekday.plusDays(1);
    }
} 
```

# statistics - 如何在数据集中找到值的分布并根据该分布生成随机值？

> ID：11794607
> 
> 赞同：0
> 
> 时间：2012-08-03T11:13:39.597
> 
> 标签：statistics, distribution

我有一个包含 100 个案例的数据集。每个案例都有一个类 {I,II,III,IV,V} 和一个值 A 和 V，每个类在数据集中出现 20 次：

```
Class   A   V
5       2   3
1       3   5
3       2   3
2       3   5
3       2   3
1       2   4
1       2   4
1       4   4
2       3   3
2       3   4 
```

我想根据这个集合再生成 100 个案例。我是否正确地假设我应该

1.  找到每个班级的 A 分布和 V 分布？
2.  计算每类 A & V 的联合分布
3.  根据这个联合分布获得随机数

如果是这样，任何指向 java 或 python 中的应用程序或库的指针都会受到赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T16:08:07.877

当我想在数据集中查找值的分布时，我使用 R 中的包 rriskDistributions。这个包为用户提供了一个 GUI，允许在不了解 R 语法的情况下选择最合适的分布。

[风险分布 PDF](http://cran.r-project.org/web/packages/rriskDistributions/rriskDistributions.pdf)

# java - 验证 XML 元素标记

> ID：11794608
> 
> 赞同：0
> 
> 时间：2012-08-03T11:13:42.817
> 
> 标签：java

我有一个 XML 文件，例如

```
<parent>
  <child1>
   <child2>
     <name>name</name>
     <value>
     <item>value></item>
    </value>
  </child2>
 </child1>
  <child1>
   <value>
     <item>value></item>
    </value>
 </child1>
</parent> 
```

在这里我需要检查 child2 节点是否丢失。

我的java代码就像

```
File xmlfile = new File ("sample.xml");
DocumentBuilderFactory dbfaFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder documentBuilder = dbfaFactory.newDocumentBuilder();
Document doc = documentBuilder.parse(xmlfile);
NodeList child1= doc.getElementsByTagName("child1");
for( int i=0; i<child1.getLength(); i++)
{
NodeList child1= doc.getElementsByTagName("child1");
if(!doc.getElementsByTagName("child2").equals(null))
{
System.out.println("Not Equal to null");

                else
                {
                    System.out.println("Equal to null");
                }
} 
```

但是每次我得到 Not Equal to null 时，即使 XML 中缺少 child2 节点。

这里 child2 不见了

```
<child1>
   <value>
     <item>value></item>
    </value>
 </child1> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:02:46.960

此代码无法工作：`doc.getElementsByTagName("child2")`遍历整个 XML，即它返回它可以找到的任何 child2。

要么尝试使用`child1.getElementsByTagName("child2")`，要么考虑使用“健全”的 XML 库。例如，XOM 有一个[`getChildElements(String name)`](http://www.xom.nu/apidocs/)按您期望的方式工作的功能。

编辑：正如詹森所指出的，您可能会遇到`NullPointerException`带有该空检查子句的 s ，请`child1.getElementsByTagName("child2") != null`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:19:50.303

您可能会发现 XPath 非常适合此任务：

```
 try {
        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
        documentBuilderFactory.setNamespaceAware(true);
        DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
        Document document = documentBuilder.parse(new File("sample.xml"));

        XPathFactory xPathFactory = XPathFactory.newInstance();
        XPath xPath = xPathFactory.newXPath();
        XPathExpression xPathExpression = xPath.compile("/parent/child1/child2");

        NodeList nodeList = (NodeList) xPathExpression.evaluate(document, XPathConstants.NODESET);

        for (int i = 0; i < nodeList.getLength(); i++) {
            Node node = nodeList.item(i);
            System.out.println(node.getNodeName());
        } 
```

如果`child2`存在，则`nodeList.getLength()`等于 1（或 下的`child2`元素数`child1`），否则为零。

如果您想要所有`child1`没有孩子的实例，`child2`您可以使用：

```
/parent/child1/*[not(self::child2)] 
```

作为您的 XPath 表达式。如果您只想计算`child1`没有孩子的次数，`child2`那么您可以使用：

```
/parent/child1/*[not(self::child2)][1] 
```

# android - 将 Toast 更改为 GridView

> ID：11794611
> 
> 赞同：0
> 
> 时间：2012-08-03T11:13:52.770
> 
> 标签：android, layout, gridview, toast

我正在尝试在 GridView 中显示一些联系人，但我正在使用的示例当前正在使用 Toast。由于我是 Android 开发新手，所以我只是在玩这些工具，现在我需要一些帮助 :)

```
private void displayContacts() 
{
    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    if (cur.getCount() > 0) 
    {
        while (cur.moveToNext()) 
        {
            String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
            String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if (Integer.parseInt(cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) 
            {
                    Cursor pCur = cr.query(
                         ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                         null, 
                         ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                         new String[]{id}, null);
                    while (pCur.moveToNext()) 
                    {
                        String phoneNo = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        Toast.makeText(NativeContentProvider.this, "Name: " + name + " | Phone No: " + phoneNo, Toast.LENGTH_LONG).show();
                    } 
                    pCur.close();
            }
        }
    }
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:17:31.433

试试这个——

```
public class Test extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        GridView gv = (GridView)findViewById(R.id.gridview);

        Cursor c = managedQuery(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);

        String[] cols = new String[]{ContactsContract.Contacts.DISPLAY_NAME};
        int[]   views = new int[]   {android.R.id.text1};

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_1,
                c, cols, views);
        gv.setAdapter(adapter);
    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- This file is at /res/layout/gridview.xml -->
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10px"
    android:verticalSpacing="10px"
    android:horizontalSpacing="10px"
    android:numColumns="auto_fit"
    android:columnWidth="100px"
    android:stretchMode="columnWidth"
    android:gravity="center"
    /> 
```

您可以使用自己的光标值代替上面的光标。并且，请确保`GridView`您的 xml 部分中应该有 on 。不要忘记在清单文件中添加重要权限。

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T07:15:52.400

像这样在你的 XML 中添加 gridView::

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/grid_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:columnWidth="90dp"
    android:horizontalSpacing="10dp"
    android:verticalSpacing="10dp"
    android:gravity="center"
    android:stretchMode="columnWidth" >  

</GridView> 
```

然后在 onCreate() 方法中，定义：

```
 gridView = (GridView) findViewById(R.id.gridView1); 
```

现在 `while (pCur.moveToNext())` 在一个 arrayList 中存储你需要的数据；然后

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, numbers);

        gridView.setAdapter(adapter); 
```

# ruby-on-rails - 设计没有在 Heroku 上显示的路线

> ID：11794618
> 
> 赞同：1
> 
> 时间：2012-08-03T11:14:06.617
> 
> 标签：ruby-on-rails, heroku, devise

我在我的 rails 应用程序中使用设计。它在本地工作得很好。我已将所有内容推送到 Heroku，但是当我运行 heroku rake 路线时，Devise 路线没有出现。我只是得到：

```
 home_index GET    /home/index(.:format)     home#index
 deals_new GET    /deals/new(.:format)      deals#new
 deals_all GET    /deals/all(.:format)      deals#all
     deals GET    /deals(.:format)          deals#index
           POST   /deals(.:format)          deals#create
  new_deal GET    /deals/new(.:format)      deals#new
 edit_deal GET    /deals/:id/edit(.:format) deals#edit
      deal GET    /deals/:id(.:format)      deals#show
           PUT    /deals/:id(.:format)      deals#update
           DELETE /deals/:id(.:format)      deals#destroy
      root        /                         home#index 
```

更新：

我已经让它大部分工作了。但是，仍然缺少 sign_up 路线：

```
 home_index GET    /home/index(.:format)         home#index
           deals_new GET    /deals/new(.:format)          deals#new
           deals_all GET    /deals/all(.:format)          deals#all
               deals GET    /deals(.:format)              deals#index
                     POST   /deals(.:format)              deals#create
            new_deal GET    /deals/new(.:format)          deals#new
           edit_deal GET    /deals/:id/edit(.:format)     deals#edit
                deal GET    /deals/:id(.:format)          deals#show
                     PUT    /deals/:id(.:format)          deals#update
                     DELETE /deals/:id(.:format)          deals#destroy
    new_user_session GET    /user/sign_in(.:format)       devise/sessions#new
        user_session POST   /user/sign_in(.:format)       devise/sessions#create
destroy_user_session DELETE /user/sign_out(.:format)      devise/sessions#destroy
       user_password POST   /user/password(.:format)      devise/passwords#create
   new_user_password GET    /user/password/new(.:format)  devise/passwords#new
  edit_user_password GET    /user/password/edit(.:format) devise/passwords#edit
                     PUT    /user/password(.:format)      devise/passwords#update
                root        /                             home#index 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:58:29.787

我终于解决了这个问题。在我的 user.rb 模型中有一个：

```
 if Rails.env.production? 
```

设计在这里设置了几个选项。在本地环境中 :registerable 已设置。它在生产环境中丢失。这就是为什么路线在本地而不是在生产中显示的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:28:37.303

实际上路线应该已经显示出来了。heroku 没有什么额外的.. 请检查以下内容-

1.  您在 heroku 上部署了最新代码

    git push heroku 大师

2.  重启heroku服务器

    heroku restart --app [你的应用名称]

# javascript - 如何通过在查询中使用值来选中/取消选中复选框

> ID：11794619
> 
> 赞同：1
> 
> 时间：2012-08-03T11:14:06.020
> 
> 标签：javascript, jquery

HTML 代码：

```
<form id="myform">
 <input type='checkbox' name='foo[]' value='1'>
 <input type='checkbox' name='foo[]' checked='true' value='2' >
 <input type='checkbox' name='foo[]' value='3' >
 <input type='checkbox' name='foo[]' checked='true' value='4' >
</form> 
```

JS代码：

```
$('input[name=foo]:checked').each(function(i,el){
    if(clusterVal == 'ALL')
        {
            /* what do I have to do here? */
        }
    array.push($(el).val());
}); 
```

如何通过在查询中使用值来选中/取消选中复选框

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:25:00.913

[**从 jQuery 1.6 开始，** .prop() 方法提供了一种显式检索属性值的方法，而 .attr() 检索属性。](http://api.jquery.com/prop/)

试试这个..但这只是演示如何检查和取消选中

# [演示](http://jsfiddle.net/bGwrS/32/)

```
 $(function(){
        var el=$('input:checkbox[name="foo[]:checked"]');

        el.each(function()
          {
                         $(this).prop('checked', true);
          });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:16:28.283

将checkbox 元素的**checked属性设置为****true**或**false**，即

```
el.checked = false; 
```

如果你想用 jquery 来做，也可以使用**attr**函数和**检查**的属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:21:48.213

Hans 是对的，~~虽然`el`很可能是一个 jQuery 对象（`.each`在这种情况下方法返回 jQuery 对象。正如 Anthony 指出的那样，情况并非总是如此。）~~但正如 Anthony 向我指出的那样，`el`并不总是纯粹的 dom目的。它有时可能是一个 jQuery 对象，因此该`checked`属性不一定可用。处理这些情况的几种方法：

```
$(el).get(0).checked = false;
$(el).removeAttr('checked');//or $(el).attr('checked',false);

$(el).get(0).checked = true;
$(el).attr('checked','checked'); 
```

感谢 Anthony 指出我对`$.each`和`.each`的行为的笨拙 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:19:29.770

使用 prop 或 attr 来执行此操作。像这样的东西

```
$(el).attr("checked", "checked"); 
```

或者

```
$(el).prop("checked", true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:21:28.903

[Jquery API Prop()](http://api.jquery.com/prop/)

您可以选中或取消选中以下元素

```
$(element).prop('checked',true); // check
$(element).prop('checked',false); // uncheck 
```

# visual-studio-2010 - CRM Developer Toolkit 未部署样式表 Web 资源

> ID：11794620
> 
> 赞同：0
> 
> 时间：2012-08-03T11:14:10.587
> 
> 标签：visual-studio-2010, deployment, dynamics-crm-2011

我创建了一个“虚拟”非托管解决方案来试用 CRM Developer Toolkit（在其最新的稳定版本中可用），*除了*CSS 文件之外，一切似乎都正常工作。

在我的 Toolkit 解决方案中，`Plugins`项目`Workflow`是空的（我刚刚为 Plugins 项目创建了 SNK），并且添加了一个 Silverlight 应用程序项目。

我在`CrmPackage`项目中添加了三个网络资源：

*   一个 JScript 文件`test.js`（空）
*   一个 HTM 文件`test.htm`（包含一个虚拟的 html 骨架）
*   一个 CSS 文件`test.css`（填充了几个属性，只是为了不留空）

当我右键单击->*部署*项目时，在`CrmPackage`解决方案中我得到了这个：

*   XAP（来自 Silverlight 项目）
*   2xDLL（来自`Plugins`和`Worflow`项目）
*   HTM 和 JS 网络资源
*   ***CSS文件无处可寻***

我没有收到任何来自 Visual Studio IDE（或来自 CRM）的错误，并且我期待 CSS 文件显示在其他 Web 资源中......

...我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:42:07.520

[我通常在 CRM 解决方案中创建我的 WebResources，](http://blogs.c5insight.com/Home/tabid/40/entryid/220/Managing-Web-Resources-and-Plug-ins-with-the-CRM-Developer-Toolkit.aspx)然后使用 CRM 浏览器中的“添加到打包项目”（我不喜欢工具包产生的命名）。我会尝试在 CRM 解决方案中创建 .CSS，将其添加到您的 Visual Studio，然后部署更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:58:12.013

这实际上是一个非常微不足道的问题：给我的资源赋予了相同的名称后，它们显然无法发布（它们最终会与 Web 资源具有相同的名称！）

我返回了这个问题，打开了一个新项目，使用了不同的命名，如下所示：

*   JScript 文件变成`myScript.js`
*   HTM 文件变成`myPage.htm`
*   CSS文件变成了`myStyle.css`

项目部署完美。

# android - ActionBar Sherlock 样式问题

> ID：11794622
> 
> 赞同：0
> 
> 时间：2012-08-03T11:14:29.927
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在android上开发一个新应用程序。我已经在我的应用程序中实现了actionbarsherlock。这是我的屏幕截图。![图像1](../Images/c95f93ca1932182c11b71f95baf399a5.png)

我想改变屏幕的背景，所以我创建了一个样式。

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.ForceOverflow">
<item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
<item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    </style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
<item name="android:background">#ff000000</item>
<item name="background">#ffff0000</item>
   </style> 
```

使用我的主题后，蓝色边框不见了。这是我使用主题后得到的屏幕。![在此处输入图像描述](../Images/9e889b4a5f6160601175fc97e6e7a3f0.png).

请帮我找到解决方案的朋友。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:19:54.897

这是因为蓝色边框是操作栏背景的一部分。当您将其更改为红色时，它就消失了。

您必须创建自己的带有底部边框的可绘制对象并覆盖操作栏的背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:19:30.493

我以前没有任何使用 Sherlock 的经验，但我在你的风格中看到你有一个背景属性：

```
<item name="android:background">#ff000000</item> 
```

所以，我相信你可以用红色和底部的边框制作一个自定义背景，让它成为一个[形状](http://androidresearch.wordpress.com/2012/03/24/drawing-shapes-in-android/)，或者一个 9 补丁图像。

然后你可以这样设置：

```
<item name="android:background">@drawable/my_cool_background</item> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:27:16.730

该蓝线边框是背景可绘制对象的一部分。请参阅文件 res/drawable-hdpi/abs__cab_background_top_holo_dark.9.png。因此，如果您希望在您的操作栏中有一个带有自定义背景的底线边框，您需要创建一个带有该边框的 9-patch 可绘制对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T06:47:27.277

在文件布局/abs__action_bar_tab_bar_view.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<com.actionbarsherlock.internal.widget.IcsLinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
   android:background="@drawable/bq_up_bar"
/>
<!--   style="?attr/actionBarTabBarStyle"  --> 
```

# javascript - jQuery一旦添加就无法删除li

> ID：11794624
> 
> 赞同：0
> 
> 时间：2012-08-03T11:14:40.733
> 
> 标签：javascript, jquery, list, add

当我在`<li>`列表中添加新功能，然后尝试将其删除时，它不会让我从列表中删除新添加的功能？

[http://jsfiddle.net/43nWM/](http://jsfiddle.net/43nWM/)

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:22:08.880

你可以试试。

[http://jsfiddle.net/43nWM/1/](http://jsfiddle.net/43nWM/1/)

```
 $(function(){
      $('#cblist a').live('click', function(){
        $(this).parent('li').remove();
        return false;
      });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:18:15.570

因为当浏览器正在读取您的 javascript 代码时，动态添加的 li 不在 DOM 中，因此无法找到它。而是将处理程序添加到父级，并像这样监听 a：

```
$('#cblist').on('click', 'a', function(){
    $(this).parent('li').remove();
    return false;
}); 
```

小提琴：http: [//jsfiddle.net/43nWM/3/](http://jsfiddle.net/43nWM/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:18:17.870

您仅将 click 事件绑定到当前的“删除”链接，而不是未来的链接。为此使用事件委托，以涵盖这两个基础。改变：

```
 $('#cblist a').click(function(){ 
```

到

```
 $('#cblist').on('click', 'a', function() { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:19:47.347

这里的秘密是**事件委托**。当您调用`.click(function() {...})`或`.on('click', function() {...})`该事件处理程序仅分配给**在代码运行时**与选择器匹配的元素时。它不会影响以后添加的元素。

但是，您可以使用事件委托将事件处理程序分配给将包含所有动态元素的静态元素，只要与动态选择器匹配的元素触发该类型的事件，它将运行回调函数：

```
$('#cblist').on('click', 'a', function() {
    $(this).parent('li').remove();
    return false;
}); 
```

查看函数文档中标题为**直接和委托事件**[`.on()`](http://api.jquery.com/on/)的部分以获取更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:19:57.907

```
$(function(){
     $('#cblist').on('click','a',function(){
         $(this).parent('li').remove();
         return false;
     });
}); 
```

查看这个[jsfiddle](http://jsfiddle.net/43nWM/6/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T11:20:43.597

另一种选择是使用 on() 函数，如下所示：http: [//jsfiddle.net/43nWM/12/](http://jsfiddle.net/43nWM/12/)

老实说，我实际上更喜欢这里的其他两种解决方案。

编辑：使用 on() 代替。我最初建议使用 live()

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T11:23:53.137

您应该添加此代码以添加动态`li`标签

```
$li = $('<li>'+name+'</li>');
$a = $('<a href="">remove</a>');
        $a.click(function(){
          $(this).parent('li').remove();
          return false;      
        });
$li.append($a); 
```

我还更新了 jsfiddle 上的代码

# java - Spring 3.1.1 表单标签不使用格式化程序/转换器

> ID：11794628
> 
> 赞同：3
> 
> 时间：2012-08-03T11:14:55.083
> 
> 标签：java, spring, spring-mvc, converter, formatter

我有以下枚举类型：

```
public enum SearchLocationTypes {REGISTRATION, WORKPLACE} 
```

我已经为这个枚举 + 格式化程序注释工厂创建了转换器和格式化程序（以防万一）。

格式化程序：

```
public class SearchLocationTypesFormatter implements Formatter<SearchLocationTypes> {
    @Override
    public String print(SearchLocationTypes type, Locale locale) {
        String strType = "";
        switch(type) {
            case REGISTRATION: 
                strType = "rg";
                break;
            case WORKPLACE:
                strType = "wp";
                break;
        }
        return strType;
    }

    @Override
    public SearchLocationTypes parse(String strType, Locale locale) throws ParseException {
        if(strType.equals("rg")) return SearchLocationTypes.REGISTRATION;
        if(strType.equals("wp")) return SearchLocationTypes.WORKPLACE;
        else throw new IllegalArgumentException();
    }
} 
```

工厂：

```
public class SearchLocationTypesAnnotationFormatterFactory 
implements AnnotationFormatterFactory<SearchLocationTypesFormat> {

    @Override
    public Set<Class<?>> getFieldTypes() {
        return new HashSet<Class<?>>(Arrays.asList(new Class<?>[] {SearchLocationTypes.class}));
    }

    @Override
    public Printer<?> getPrinter(SearchLocationTypesFormat a, Class<?> type) {
        return new SearchLocationTypesFormatter();
    }

    @Override
    public Parser<?> getParser(SearchLocationTypesFormat a, Class<?> type) {
        return new SearchLocationTypesFormatter();
    }

} 
```

注解：

```
@Target({ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
public @interface SearchLocationTypesFormat {} 
```

转换器：

```
public class SearchLocationTypesConverter implements Converter<SearchLocationTypes, String> {

    @Override
    public String convert(SearchLocationTypes type) {
        String strType = "";
        switch(type) {
            case REGISTRATION: 
                strType = "rg";
                break;
            case WORKPLACE:
                strType = "wp";
                break;
        }
        return strType;
    }

} 
```

servlet.xml 的一部分：

```
<mvc:annotation-driven conversion-service="conversionService"  />
<bean id="conversionService"
    class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
    <property name="converters">
        <set>
            <bean class="ru.riado.web.format.SearchLocationTypesConverter" />
        </set>
    </property>
    <property name="formatters">
        <set>
            <bean class="ru.riado.web.format.SearchLocationTypesAnnotationFormatterFactory" />
            <bean class="ru.riado.web.format.SearchSortTypesFormatter" />
        </set>
    </property>
</bean> 
```

当我从 JSP 调用以下代码时，一切都按预期工作。
示例：假设我有一个属性为“locType”的bean“form”设置为“REGISTRATION”。

```
public class Form {
  @SearchLocationTypesFormat
  private SearchLocationTypes locType;
  // setters and getters
} 
```

现在，我正在使用以下代码，它的输出是“rg”：

```
<s:eval expression="form.locType"> 
```

但是弹簧形式不会将其值转换为“rg”。而不是这个，它将值设置为“注册”，就像它使用默认转换器一样。我试图关闭默认转换，但这没有帮助。

谁能告诉我我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:02:33.013

我会先重构你的代码：

```
public enum SearchLocationTypes {
  REGISTRATION("rg"),
  WORKPLACE("wp");

  private String abbr;

  SearchLocationTypes(String abbr) {
    this.abbr = abbr;
  }

  @Override
  public String toString() {
    return abbr;
  }

  public static SearchLocationTypes fromString(String from) {
    for (SearchLocationTypes locType : SearchLocationTypes.values()) {
      if (locType.abbr.equals(from)) {
        return locType;
      }
    }
    throw new IllegalArgumentException();
  }
} 
```

和`Formatter`（与`Converter`打印方法相同）：

```
public class SearchLocationTypesFormatter implements
    Formatter<SearchLocationTypes> {
  @Override
  public String print(SearchLocationTypes type, Locale locale) {
    return type == null ? "" : type.toString();
  }

  @Override
  public SearchLocationTypes parse(String strType, Locale locale)
      throws ParseException {
    return SearchLocationTypes.fromString(strType);
  }
} 
```

现在您可以在 jsp 中使用`form:radiobuttons`or `form:options`：

```
<form:select path="locType">
  <form:options />
</form:select> 
```

*默认情况下，表单值是枚举的 name()，表单标签是枚举的 toString()*（来自[https://jira.springsource.org/browse/SPR-3389](https://jira.springsource.org/browse/SPR-3389)）。

我不能检查这个，但`<s:eval expression="form.locType">`现在试试。

# matlab - 在二进制图像matlab中获取形状的帧a

> ID：11794629
> 
> 赞同：0
> 
> 时间：2012-08-03T11:15:17.420
> 
> 标签：matlab

我有以下二进制图像： ![在此处输入图像描述](../Images/40d2895a3dfdbaceab68c5b6dd320533.png)

我最终想要得到的是： ![在此处输入图像描述](../Images/c8de359add18148e06e54330d0ad7b93.png) 有没有人有解决它的想法？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T05:58:41.053

对于这个问题，我们假设字母是黑色背景 (0) 上的白色 (1)。（即图像外面是黑色的）

以下 matlab 脚本使用腐蚀、膨胀、填充和 AND/OR/NOT 逻辑运算的组合工作：

```
 %This script assumes the input image is a binary bitmap image
     %Otherwise use: 
     %BW = logical(BW); after loading grayscale image with BW = imread(filename); 

     BW = imread('img.bmp'); %read in the image
     figure
     imshow(BW) %show original image

     %for the outside edges
     BW2 = imfill(BW, 'holes'); %fill holes in letters
     BW3 = imerode(BW2, strel('disk',1));
     BW4 = BW2 & (~BW3); %outside boundary of letters (8 connected)
     figure
     imshow(BW4) %show outside edges

     %for the inside edges
     BW2 = imerode(BW3, strel('disk',1)); %erode filled letters again
     BW3 = ~(BW & BW2);  %logical AND operation of original image and doubly eroded filled letter image
     BW2 = ~imfill(BW3,1); %fill image with white (1), starting at 1,1 leaves
     BW3 = imfill(BW2, 'holes'); %fill inner holes
     BW2 = BW3 & (~BW2); %logical operation to isolate inner holes
     BW3 = imdilate(BW2,strel('disk',1))-BW2; %boundary of inner edges

     BW2 = BW3 | BW4; %logical OR operation to obtain inside and outside edges
     figure
     imshow(BW2) %final image 
```

# asp.net - 服务器端的 SignalR IDisconnect 不起作用

> ID：11794631
> 
> 赞同：1
> 
> 时间：2012-08-03T11:15:24.600
> 
> 标签：asp.net, signalr

我写了一个实现 IDisconnect 接口的集线器。我不知道为什么 Disconnect 永远不会执行。我读到它可能不适用于 Visual Studio 调试，但我什至在生产服务器上对其进行了测试。

这是我的代码：

```
[HubName("myHub")]
public class MyHub: Hub, IDisconnect, IConnected
{
    public Task Disconnect()
    {
        Log.SaveCurrentTime();
        return Clients.leave(Context.ConnectionId, DateTime.Now.ToString());
    }

    public Task Connect()
    {
        return Clients.joined(Context.ConnectionId, DateTime.Now.ToString());
    }

    public Task Reconnect(IEnumerable<string> groups)
    {
        return Clients.rejoined(Context.ConnectionId, DateTime.Now.ToString());
    }

    public void Test()
    {
        Log.SaveCurrentTime();
    }
} 
```

Log.SaveCurrentTime() 仅用于测试目的，它保存当前日期时间做数据库记录。如果我使用 firebug 并在控制台中执行 hub.test()，一切正常，但是当我关闭浏览器时，当前时间不会保存到数据库，所以 Disconnect 没有被执行。

在这里我添加了 MyHub.js 的代码

```
var hub;
$(function () { 
hub = $.connection.myHub;

$.connection.hub.start().done(function () {
    alert('connected');
})
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:46:48.070

SignalR 使用什么传输方法？每个浏览器可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:25:52.360

您的实施很好，您期望这应该有效。

你要等多久？如果您只是关闭浏览器，则网络级别的断开连接可能需要一些时间才能被 IIS“注意到”并传播到 SignalR。

# objective-c - 在 Xcode 中解析 .Pls 播放列表

> ID：11794632
> 
> 赞同：2
> 
> 时间：2012-08-03T11:15:31.273
> 
> 标签：objective-c

我正在尝试使用 AVPlayer 的实例在 Xcode 中编写一个简单的音频播放器。要访问 .Pls 文件中所需的 URL，我当前的函数如下所示：

```
- (NSURL*)dirtyFirstTrack:(NSURL*)path
{
    NSString *data = [NSString stringWithContentsOfURL:path encoding:NSASCIIStringEncoding    error:nil];
    NSString *urlString = [[[[data componentsSeparatedByString:@"\n"]objectAtIndex:2] componentsSeparatedByString:@"="] objectAtIndex:1];
    return [NSURL URLWithString:urlString];
} 
```

这对我来说似乎不是一个好的解决方案，但也许你们中的一个人知道更好的方法。

# spring - EntityManager 关闭后尝试加载惰性关系

> ID：11794633
> 
> 赞同：1
> 
> 时间：2012-08-03T11:15:38.273
> 
> 标签：spring, hibernate, jpa, lazy-loading, entitymanager

我有三个 spring+JPA 项目...一个基础项目 A、一个插件项目 B 和实际项目 C。在 C 中，其他两个项目都作为 A.jar 和 B.jar 导入。每个项目都有自己的 ApplicationContext.xml。叶项目，即 C 在自定义位置有它的 persistence.xml，如 proeject-A 中的 appcontext.xml 中所述（启动项目 A 在整个类路径中查找 appcontext.xml 和 persistence.xml，因此能够从 B 加载 xml和 C)。

下面是我的配置，ApplicationContext.xml - 在项目 A

```
<bean id="jpaQueryManager" class="com.motherframework.base.dao.jpa.JPAQueryManager">
    <property name="jpaTemplate" ref="jpaTemplate"/>
</bean>

<bean id="jpaTemplate" class="org.springframework.orm.jpa.JpaTemplate">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <!-- <property name="persistenceUnitManager" ref="pum"/>
    <property name="persistenceUnitName" value="SchoolWebsitePersistenceUnit"/> -->
    <property name="persistenceXmlLocation" value="classpath*:configuration/xml/persistence.xml"/>
    <!-- <property name="persistenceUnitPostProcessors">
      <list>
        <bean class="com.motherframework.base.dao.jpa.EntityScanner"/>
      </list>
    </property> -->
    <property name="dataSource"><ref bean="dataSource"/></property>
    <property name="jpaVendorAdapter">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="showSql" value="true"/>
        <property name="generateDdl" value="true"/>
        <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect"/>
      </bean>
    </property>
</bean> 
```

这是我的persistence.xml

```
<persistence-unit name="SchoolWebsitePersistenceUnit" transaction-type="RESOURCE_LOCAL">

    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.motherframework.plugin.school.entity.Account</class>
    <class>com.motherframework.plugin.school.entity.Module</class>
    <class>com.motherframework.plugin.school.entity.NavigationMenu</class>
    <class>com.motherframework.plugin.school.entity.User</class>

    <properties>
        <property name="dialect" value="org.hibernate.dialect.SQLServerDialect"/>
        <property name="hibernate.connection.autocommit" value="true"/>
        <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.archive.autodetection" value="class, hbm"/>
    </properties>

</persistence-unit> 
```

现在从我的客户端类（主要方法）中，我正在使用@transactional Service-DAO 层获取实体（例如用户）。

```
User u = ((TestService) ApplicationContext.getBean("testService")).fetchUser();
// FROM User u WHERE u.id=1  (Note: no INNER JOIN u.account)

print(u.getAccount()) 
```

它应该给我NULL，但它抛出异常，

```
DEBUG DefaultListableBeanFactory:241 - Returning cached instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
 DEBUG AnnotationTransactionAttributeSource:106 - Adding transactional method 'fetchUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
DEBUG DefaultListableBeanFactory:241 - Returning cached instance of singleton bean 'jpaTxManager'
DEBUG JpaTransactionManager:365 - Creating new transaction with name [com.motherframework.plugin.test.service.TestService.fetchUser]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
DEBUG JpaTransactionManager:323 - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@d964af] for JPA transaction
DEBUG JpaTransactionManager:355 - Exposing JPA transaction as JDBC transaction [SimpleConnectionHandle: jdbc:mysql://localhost:3306/schooldb, UserName=scott@localhost, MySQL-AB JDBC Driver]
DEBUG TransactionSynchronizationManager:183 - Bound value [org.springframework.jdbc.datasource.ConnectionHolder@45378f] for key [org.apache.commons.dbcp.BasicDataSource@181b3d4] to thread [main]
DEBUG TransactionSynchronizationManager:183 - Bound value [org.springframework.orm.jpa.EntityManagerHolder@29d65b] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b8176d] to thread [main]
DEBUG TransactionSynchronizationManager:258 - Initializing transaction synchronization
DEBUG TransactionInterceptor:381 - Getting transaction for [com.motherframework.plugin.test.service.TestService.fetchUser]
DEBUG TransactionSynchronizationManager:139 - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@29d65b] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b8176d] bound to thread [main]
DEBUG TransactionSynchronizationManager:139 - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@29d65b] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b8176d] bound to thread [main]
DEBUG TransactionSynchronizationManager:139 - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@29d65b] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b8176d] bound to thread [main]
Hibernate: select user0_.id as id3_, user0_.accountId as accountId3_, user0_.email as email3_, user0_.loginId as loginId3_, user0_.name as name3_, user0_.password as password3_ from User user0_ where user0_.id=1
DEBUG TransactionInterceptor:410 - Completing transaction for [com.motherframework.plugin.test.service.TestService.fetchUser]
DEBUG JpaTransactionManager:925 - Triggering beforeCommit synchronization
DEBUG JpaTransactionManager:938 - Triggering beforeCompletion synchronization
 DEBUG JpaTransactionManager:752 - Initiating transaction commit
DEBUG JpaTransactionManager:462 - Committing JPA transaction on EntityManager [org.hibernate.ejb.EntityManagerImpl@d964af]
DEBUG JpaTransactionManager:951 - Triggering afterCommit synchronization
DEBUG JpaTransactionManager:967 - Triggering afterCompletion synchronization
DEBUG TransactionSynchronizationManager:311 - Clearing transaction synchronization
DEBUG TransactionSynchronizationManager:229 - Removed value [org.springframework.orm.jpa.EntityManagerHolder@29d65b] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b8176d] from thread [main]
DEBUG TransactionSynchronizationManager:229 - Removed value [org.springframework.jdbc.datasource.ConnectionHolder@45378f] for key [org.apache.commons.dbcp.BasicDataSource@181b3d4] from thread [main]
DEBUG JpaTransactionManager:548 - Closing JPA EntityManager [org.hibernate.ejb.EntityManagerImpl@d964af] after transaction
DEBUG EntityManagerFactoryUtils:329 - Closing JPA EntityManager
856 [main] ERROR org.hibernate.LazyInitializationException - could not initialize proxy - no Session
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
at            org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:132)
at     org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:174)
Exception in thread "main" org.hibernate.LazyInitializationException: could not initialize proxy - no Session
at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:132)
at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:174)
at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
at      com.motherframework.plugin.school.entity.Account_$$_javassist_3.toString(Account_$$_javassist_3.java)
at java.lang.String.valueOf(Unknown Source)
at java.io.PrintStream.println(Unknown Source)
at 
```

您会发现我的实体管理器已关闭，因此如果它尝试获取用户的帐户，它会给出异常......我理解......但如果实体管理器已关闭，那么它为什么要这样做？如何阻止它？配置有问题吗？

还有一件事，我使用的 entitymanagerfactory 是否适合生产环境中的公共 Web 应用程序（以及在 tomcat 7 中）？

提前致谢..：）

谢谢 Nizet ..你的意思是我的 PersistenceContext 已经关闭，因为 EntityManager 已关闭。但是，如果实体真的不在 PersistenceContext 之外，那么它为什么要尝试获取它的关系呢？..它是一个简单的 POJO，不再是 @Entity..对吗？对于第二个问题，是的，我错过了

```
<tx:annotation-driven transaction-manager="jpaTxManager"/>
<bean id="jpaTxManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory"><ref bean="entityManagerFactory"/></property>
    <property name="dataSource"><ref bean="dataSource"/></property>
</bean> 
```

请检查我的 Entitymanager 类型和 transactionmanager ...它们是否适合生产？

这是我的 DS：

```
<bean id="dataSource" destroy-method="close"   class="org.apache.commons.dbcp.BasicDataSource">
<property name="driverClassName" value="${motherframework.configuration.db.driver}" />
<property name="url" value="${motherframework.configuration.db.url}" />
<property name="username" value="${motherframework.configuration.db.username}" />
<property name="password" value="${motherframework.configuration.db.password}" /> 
```

但是你的意思是说，尽管持久性上下文是关闭的，“用户”对象仍然拥有一些使其不同于普通 POJO 类的属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T11:35:35.887

您的用户与帐户有关联。该帐户是延迟加载的。这意味着当你第一次调用帐户（`user.getAccount().getName()`）上的任何方法时，Hibernate 将从数据库中加载帐户的状态，并返回帐户的名称。它只能在实体管理器打开时执行此操作，否则，它不再与数据库建立任何连接。

它不能返回 null：返回 null 意味着：*这个用户没有帐户*，这是错误的。

如果要在实体管理器关闭后访问账户，则需要在关闭之前初始化账户。没有办法解决这个问题。

关于您的配置，不，它还没有准备好投入生产：

*   showSql 应该是假的
*   hibernate.show_sql 应该是假的
*   generateDdl 应该是假的
*   hibernate.connection.autocommit 应该是 false
*   你还没有显示你的数据源定义，这是一个非常重要的部分

# javascript - 播放声音 HTML5 时的延迟

> ID：11794634
> 
> 赞同：1
> 
> 时间：2012-08-03T11:15:54.357
> 
> 标签：javascript, html, audio

我有一系列的声音。加载游戏时开始播放前两个声音。他们同时演奏并重复。每次发生游戏事件（球被撞）时都会播放第三个声音，这是一个延迟。如果我不播放两个第一个声音，那么这个延迟就会消失。它在 IE 中可以正常工作，但在 Chrome 中不行……这是 Chrome 错误吗？

```
function getSoundInstance(src) {
    var audioElement = new Audio();
    audioElement.src=src;    
    return audioElement;    
}

sounds['ocean'] = getSoundInstance('./src/audio/ocean.mp3');
sounds['music'] = getSoundInstance('./src/audio/song1.mp3');
sounds['bump'] =  getSoundInstance('./src/audio/bump.mp3');

sounds['ocean'].loop=true;
sounds['ocean'].volume=.9;
sounds['music'].loop=true;
sounds['music'].volume=.4;

sounds['ocean'].play();               
sounds['music'].play();

//when I start to play sounds['bump'] I get a delay. 
```

# mysql - Mysql更快的INSERT

> ID：11794635
> 
> 赞同：4
> 
> 时间：2012-08-03T11:15:57.060
> 
> 标签：mysql, sql, performance, insert

好的，我有大约 175k INSERT 语句，相当大的 INSERT 语句，例如：

```
INSERT INTO `gast` (`ID`,`Identiteitskaartnummer`,`Naam`,`Voornaam`,`Adres`,`Postcode`,`Stad`,`Land`,`Tel`,`Gsm`,`Fax`,`Email`,`Creditcardnummer`) VALUES ('100001','5121-1131-6328-9416','Cameron','Rhoda','Ap #192-1541 Velit Rd.','54398','Catskill','Bermuda','1-321-643-8255','(120) 502-0360','1 48 428 3971-3704','tempor@justo.org','8378-3645-3748-8446'); 
```

（忽略这是荷兰语的事实）。所有数据都是完全随机的。

我必须这样做大约 3 到 4 次。在我的 PC 上查询 100k INSERT 语句大约需要一个小时。有没有办法在不改变 INSERT 语句的情况下更快地做到这一点？我正在使用 MySQL 工作台。谢谢。

**编辑**

到目前为止，我已经尝试了所有建议。只使用一个 INSERT 但多个 VALUES 会给我一个错误，即 INSERT 语句太大。在插入之前禁用索引也不会提高性能。

我也尝试过通过命令行加载一个 sql 文件，但这也没有做任何事情......

每个 INSERT 的插入性能从 0.015 秒到 0.032 秒不等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:21:13.430

将所有数据插入到一个表中 - 您将使用该表重新设置数据库的种子 - 然后发出 INSERT SELECT 语句，因为它将作为批处理而不是 175K 不同的语句执行。

此外，当您使用 INSERT SELECT 语句为数据库重新设定种子时，请关闭目标表上的约束`ALTER TABLE yourtablename DISABLE KEYS`，然后再将它们重新打开`ALTER TABLE yourtablename ENABLE KEYS`。

我还将亲自在种子数据表上建立一个[覆盖索引](http://www.mysqlperformanceblog.com/2006/11/23/covering-index-and-prefix-indexes/)，因为这样它就不必读取数据页了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:19:17.040

Just use one statement

```
INSERT INTO `gast` 

    (`ID`,`Identiteitskaartnummer`,`Naam`,`Voornaam`,`Adres`,`Postcode`,`Stad`,`Land`,`Tel`,`Gsm`,`Fax`,`Email`,`Creditcardnummer`) 
    VALUES 
    ('100001','5121-1131-6328-9416','Cameron','Rhoda','Ap #192-1541 Velit Rd.','54398','Catskill','Bermuda','1-321-643-8255','(120) 502-0360','1 48 428 3971-3704','tempor@justo.org','8378-3645-3748-8446'),
    ('100002','5121-1131-6328-9416','Cameron','Rhoda','Ap #192-1541 Velit Rd.','54398','Catskill','Bermuda','1-321-643-8255','(120) 502-0360','1 48 428 3971-3704','tempor@justo.org','8378-3645-3748-8446') 
```

etc etc....

Maybe you should do 10000 a time instead of all 175k

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T12:53:57.983

将所有数据放入 csv 文件中，用户将文件 FILENAME 中的数据加载到表 TABLE 不会花费超过一分钟 如果您想使用插入来完成，最好使用单个插入一次发送多行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T21:55:35.777

另一种解决方案是将数据保存到文本文件中，然后使用 LOAD DATA LOCAL INFILE 加载数据

它可能不那么好，但它会快得多

# javascript - 仅使用 Javascript/JQuery 将网格数据导出到 CSV 文件并使用扩展名 .csv 保存

> ID：11794636
> 
> 赞同：1
> 
> 时间：2012-08-03T11:16:00.437
> 
> 标签：javascript, jquery

我发现了一些代码可以帮助我生成 CSV 文件。但我无法使用 .csv 的扩展名保存它

我正在使用以下代码生成 csv 文件，但我需要以 .csv 作为扩展名保存文件

```
var ExportToCSV= function (gridData, fileName, humanize, ignore){

           var csv = '',
           data = [],
        ignore = [];

                                                                         if (!ignore) {
        ignore = [];
    }

    //ignore added datasource properties       
    var commonIgnore = ["_events", "idField", "_defaultId", "constructor", "init", "get",
        "_set", "wrap", "bind", "one", "first", "trigger",
        "unbind", "uid", "dirty", "parent"];
    ignore = $.merge($.merge([], ignore), commonIgnore);

     var data= gridData._data;

    //add the header row
    if (data.length > 0) {
        for (var col in data[0]) {
            //do not include inherited properties
            if (!data[0].hasOwnProperty(col) || ($.inArray(col, ignore) > -1)) {
                continue;
            }

            if (humanize) {
                col = col.split('_').join(' ').replace(/([A-Z])/g, ' $1');
            }

            col = col.replace(/"/g, '""');
            csv += '"' + col + '"';
            if (col != data[0].length - 1) {
                csv += ",";
            }
        }
        csv += "\n";
    }

    //add each row of data
    for (var row in data) {
        for (var col in data[row]) {
            //do not include inherited properties
            if (!data[row].hasOwnProperty(col) || ($.inArray(col, ignore) > -1)) {
                continue;
            }

            var value = data[row][col];
            if (value === null) {
                value = "";
            } else if (value instanceof Date) {
                value = kendo.toString(kendo.parseDate(value),"dd/MM/yyyy");
            } else {
                value = value.toString();
            }

            value = value.replace(/"/g, '""');
            csv += '"' + value + '"';
            if (col != data[row].length - 1) {
                csv += ",";
            }
        }
        csv += "\n";
    }

    //TODO replace with downloadify so we can get proper file naming
    window.open("data:application/csv;charset=utf-8," + escape(csv)); 
```

};

有很多方法可以使用服务器端代码，如 php、asp.net、java 来解决问题。但是任何人都可以通过使用客户端脚本（即使用 Javascript/JQuery）来帮助我实现同样的目标。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:57:50.660

关注这篇关于 Chrome 的优秀博客文章（和 FF，虽然还没有测试过）： [http ://hackworthy.blogspot.co.nz/2012/05/savedownload-data-generated-in.html](http://hackworthy.blogspot.co.nz/2012/05/savedownload-data-generated-in.html)

我仍在寻找 IE9 上的工作方法（ActiveX 和 execCommand() 对我不起作用）。不得已：Flash、大量插件（Downloadify 等...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:32:43.790

因为浏览器是沙盒的，您将无法保存 .csv - 但是您可以将其发送到服务器，或使用 api 发送到 Dropbox 或类似设备，然后为用户提供下载文件的链接。

# java - 在java中将时间戳转换为日期

> ID：11794648
> 
> 赞同：3
> 
> 时间：2012-08-03T11:16:40.500
> 
> 标签：java, mysql, web-services, soap, valueconverter

这是我的数据库： ![在此处输入图像描述](../Images/6aece4374207b07fc96fcf73fb3148ff.png)

这里我要查看查询当前日期+状态=Q信息并获取计数值。

这是我的代码：

```
public class TodayQ {
    public int data() {
         int count=0;
        Date date = new Date(timestamp);
DateFormat dateFormat = new SimpleDateFormat ("yyyy-MM-dd");
System.out.println( dateFormat.format (date));

        // count++;

        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/pro", "root", "");

            PreparedStatement statement = con
                    .prepareStatement("select * from orders where status='Q' AND date=CURDATE()");
            ResultSet result = statement.executeQuery();
            while (result.next()) {
                // Do something with the row returned.
                count++; // if the first col is a count.
            }

        }

        catch (Exception exc) {
            System.out.println(exc.getMessage());
        }

        return count;
    }

} 
```

这里我要编辑日期是（yyyy-mm-dd）格式。现在我得到了输出。但我希望在我的数据库上使用时间戳。那么如何在 Java 中将时间戳转换为日期。如何在我的代码中使用该代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T10:33:14.440

您可以使用 mysql 函数实现相同的目的。希望以下查询为您提供所需的输出。

```
select * 
from orders
where status='Q' AND 
      date_format(from_unixtime(date),'%Y-%m-%d') = current_date; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:21:25.077

```
Date date = new Date(timestamp); 
```

而时间戳是一个长变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:21:25.220

假设时间戳是以毫秒为单位的时间，您可以使用 java.util.Calendar 将时间戳转换为日期时间，如下所示：

```
java.util.Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(timestamp);
java.util.Date date = cal.getTime(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T12:50:26.000

看起来您看到的整数值是自纪元开始以来 UNIX 的秒数（即 1970-01-01T00:00:00Z ）-> [http://en.wikipedia.org/wiki/Unix_epoch](http://en.wikipedia.org/wiki/Unix_epoch)

我不知道 mysql JDBC 驱动程序是否会为您转换此字段。如果是这样，获取其价值的首选方法是：

```
java.sql.Timestamp ts = result.getTimestamp( columnNumber ); 
```

Timestamp 扩展了 java.util.Date，因此您可以在需要常规 java.util.Date 的地方使用它。

如果由于某种原因这不会产生所需的结果，则获取列值`long`并将该值调整为毫秒。您在这里很幸运，因为 Java 和 UNIX 的时代同时开始（Java 更精确）。

```
long ts = result.getLong( columnNumber ) * 1000L;

java.util.Date date = new java.util.Date( ts ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:37:38.907

在 yyyy-mm-dd 中打印时间戳：

```
Date date = new Date(timestamp);
DateFormat dateFormat = new SimpleDateFormat ("yyyy-MM-dd");
System.out.println( dateFormat.format (date)); 
```

**更新**

以下是您可以如何进行的提示：

```
public static int data() {
    int count = 0;
    Date now = Calendar.getInstance().getTime();
    System.out.println("TODAY IS:"+now.getTime()); //TODAY IS:1344007864862

    try {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "");

        PreparedStatement statement1 = (PreparedStatement) con.prepareStatement("SELECT * FROM ORDERS WHERE STATUS = 'Q' AND DT= "+now.getTime());
        ResultSet rs1 = statement1.executeQuery();
        while (rs1 .next()) {
            count++; //A HIT IS FOUND
        }
    } catch (Exception exc) {
        System.out.println(exc.getMessage());
    }
    return count;
} 
```

显然 now.getTime() 返回在**now**变量中捕获日期的实际毫秒数。从现在开始，数学完全取决于您的实施。

请记住，在午夜（10/05/2012 00:00:00）获取 Calendar 对象的方法是[Java program to get the current date without timestamp](https://stackoverflow.com/questions/2806360/java-program-to-get-the-current-date-without-timestamp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T02:00:48.797

数据库中的日期列应该是`TIMESTAMP`or`DATE`或`TIME`。

这些被检索为`java.sql.Timestamp`或`java.sql.Date`或`java.sql.Time`分别。

所有这些类都扩展了`java.util.Date`.

所以数据应该已经是您要求的格式。

所以没有什么可做的。

# matlab - 在 Matlab 中使用 FFT 进行频移

> ID：11794654
> 
> 赞同：5
> 
> 时间：2012-08-03T11:17:10.790
> 
> 标签：matlab, fft, frequency-analysis

我正在使用跳频实现 BFSK 调制和解调，我需要使用 Matlab 测试我的结果。我从 BFSK 程序得到的输出是一个正弦值数组，对应于不同位的载波信号。这些信号是以 2.51KHz 为中心的通带信号，其周围的带宽为 4KHz。但要测试解调步骤，我需要将信号转换为基带。所以我需要将我的输出信号集中在 0Hz。

我知道创建一个 2.51KHz 的复杂信号并在时域中将其相乘就可​​以完成这项工作。但是有没有什么方法可以用`fft()`matlab中的函数来改变信号的中心频率，然后取一个`ifft()`信号来生成基带信号。

谢谢，安舒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:36:10.670

这应该是完全可能的。在计算 ifft 之前，只需旋转从 fft 过程中出现的复数向量。

伪代码将是：

```
shiftIndex  = 20; %// This value would depend on the frequency shift requited

Y = fft(x); %// Where x is the input vector
z = ifft (  [Y((shiftIndex+1):end);      Y(1:shiftIndex)]  ); 
```

有关您需要将索引移动的 bin 数量的帮助，您可能会发现以下问题很有用。. .

[https://dsp.stackexchange.com/questions/2970/how-to-make-frequency-axis-for-even-and-odd-fft-length/2971#2971](https://dsp.stackexchange.com/questions/2970/how-to-make-frequency-axis-for-even-and-odd-fft-length/2971#2971)

这提醒了我，您将来在 DSP.stackexchange.com 上发布此类问题可能会得到更快的答案。

# listview - 我想知道 ListView 中项目的大小

> ID：11794656
> 
> 赞同：0
> 
> 时间：2012-08-03T11:17:19.353
> 
> 标签：listview, hidden

我想知道 ListView 中项目的大小。我可以做到，但首先我需要以隐藏模式将 ListView 显示到屏幕上，请告诉我语法。

我的语法（短）但不是隐藏模式......

```
ListView rssListView = null;
ArrayList<RssItem> rssItems = new ArrayList<RssItem>();
aa = new ArrayAdapter<RssItem>(this, R.layout.list_item, rssItems);
rssListView.setAdapter(aa); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:28:09.627

你可以试试以下

```
rssListView.setVisibility(View.INVISIBLE); 
```

# php - 我在重复区域中更改变量的代码需要修改

> ID：11794657
> 
> 赞同：0
> 
> 时间：2012-08-03T11:17:19.457
> 
> 标签：php

我有一个重复的区域问题。我在这里尝试做的是重复查询中的信息，直到用完为止。我将它的限制设置为 5。我希望信息重复，但 DIV id 在重复时会发生变化。这是可能吗？我在这里尝试创建的是一个特色的 jquery 滑块，为此我需要显示的内容以在主框中滑动或单击时将其拉入主框。提前致谢。

```
<?php 
$idname = "fragment-";
$idnum = 1;
echo $idname . $idnum;
?>

<?php do { ?>
<div id="<?php for($idnum=1;$idnum<=5;$idnum++){

echo $idname . $idnum++; break;}?>" class="ui-tabs-panel" style="">
            <img src="<?php echo $row_getDisplay['picture']; ?>" alt="" />
             <div class="info" >
                <h2><a href="fetch?id=<?php echo $row_getDisplay['post_id']; ?>" ><?php echo $row_getDisplay['title']; ?></a></h2>
                <p><?php echo $row_getDisplay['preview']; ?><a href="fetch?id=<?php echo $row_getDisplay['post_id']; ?>" >Click Here</a></p>             </div>
        </div>
<?php } while ($row_getDisplay = mysql_fetch_assoc($getDisplay)); ?> 
```

这是代码的当前输出..

```
<div id="fragment-1" class="ui-tabs-panel" style="">
            <img src="images/archives/2012/july/1343579505.jpg" alt="" />
             <div class="info" >
                <h2><a href="fetch?id=39" >Testing Preview Box Character Count max out on the total number</a></h2>
                <p>Other things have to go here to show the preview seems like other things don't really fit<a href="fetch?id=39" >Click Here</a></p>            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:22:52.347

```
<?php 
$idnum = 1;

do { ?>
<div id="fragment-<?php echo $idnum; ?>" class="ui-tabs-panel" style="">
        <?php $idnum++; ?>
        <img src="<?php echo $row_getDisplay['picture']; ?>" alt="" />
        <div class="info" >
            <h2><a href="fetch?id=<?php echo $row_getDisplay['post_id']; ?>" ><?php echo $row_getDisplay['title']; ?></a></h2>
            <p><?php echo $row_getDisplay['preview']; ?><a href="fetch?id=<?php echo $row_getDisplay['post_id']; ?>" >Click Here</a></p>             
        </div>
        </div>
<?php } while ($row_getDisplay = mysql_fetch_assoc($getDisplay)); ?> 
```

# javascript - onError 在浏览器之间的行为不同

> ID：11794658
> 
> 赞同：1
> 
> 时间：2012-08-03T11:17:23.987
> 
> 标签：javascript, css, image, onerror

我试图让 onError 事件工作，但到目前为止它只在 Internet Explorer 9 中工作。我尝试了几个代码，但基本上归结为：

```
<img class="a_toc_image" src="' + asap.imgurl + '" onError="this.src=\'images/no_image.png\';" /> 
```

*   *互联网浏览器 9：*
*   成功：从我们的数据库中获取图像
*   失败：**显示 no_image.png**

*   *铬 20.0.11：*

*   成功：从我们的数据库中获取图像
*   失败：**只是空格**

*   *火狐 14.0.1：*

*   成功：从我们的数据库中获取图像
*   失败：**损坏的图像图标**

此代码上的许多主要是美学变体（例如省略或放入 " 或 ' ）会产生类似的结果。这个特定的变体在 Iexplorer 中产生了堆栈溢出，但除此之外没有任何改变：

```
<img class="a_toc_image" src="' + asap.imgurl + '" onError=this.src="\images/no_image.png()" /> 
```

谁能告诉我这里出了什么问题以及为什么它只能在 Iexplorer 9 中工作？

谢谢！

## -添加：

在无法加载的图像上使用 Chrome 中的“检查元素”时，我看到：

```
<img class="a_toc_image" src="images/no_image.png" onerror="this.src='images/no_image.png';"> 
```

所以看起来它正在生成正确的输出，但由于某种原因不会显示图像，对吗？我刚才试图放一个 .jpg 而不是 .png （也许 Chrome 不会显示 .png 图像），但这也不能解决任何问题。

-加法2，前面的代码

```
// General functions

var open_mask = function () {

    //Get the screen height and width
    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    //Set height and width to mask to fill up the whole screen
    $('#mask').css({'width':maskWidth,'height':maskHeight});

    //transition effect     
    $('#mask').fadeIn(1000);    
    $('#mask').fadeTo("fast",0.7);  

};

var center_dialog = function (dialog) {

    //Get the window height and width
    var winH = $(window).height();
    var winW = $(window).width();

    var dialog_top =  (winH/2-dialog.height()/2) + $(window).scrollTop();
    var dialog_left = (winW/2-dialog.width()/2) + $(window).scrollLeft();

    dialog_top = (dialog_top >= 0) ? dialog_top : 0;
    dialog_left = (dialog_left >= 0) ? dialog_left : 0;

    dialog.css('top',  dialog_top);
    dialog.css('left', dialog_left);
};

//function that creates posts  

var updatepostHandler = function(postsJSON) {

    $.each(postsJSON,function(i,asap) {  

        if(i === 0) {
            first = asap.first;
            last = asap.last;
        } else {
            if(asap.type === 'article') {
                $('<div></div>')                        //create the HTML
                            .addClass('solid')  
                    .html('<div class="titbox">' + asap.title + '</div> \
                        <div class="boxinsolid"> \
                        <div class="aubox">' + asap.authors + '</div> \
                        <div class="doibox"> DOI: ' + asap.doi + ' </div> \
                        <div class="joubox">' + asap.journal + '</div> \
                        </div> \
                        <div class="imgbox"> \
                                <img class="a_toc_image" src="' + asap.imgurl + '" onError="this.src=\'images/no_image.png\';" /> \
                        </div>')        

                            .click(function(e) {  
                        open_details(e, asap.id);
                                })  
                            .prependTo($('#container'))
                    .slideDown('slow') 
            } else if(asap.type === 'ad') {
                $('<div></div>')                        //create the HTML
                            .addClass('ad')  
                    .html('<div class="titbox">' + asap.title + '</div> \
                        <div class="boxinsolid"> \
                        <div class="aubox">' + asap.authors + '</div> \
                        <div class="doibox">&nbsp;</div> \
                        <div class="joubox">' + asap.company + '</div> \
                        </div> \
                        <div class="imgbox"> \
                                <img class="a_toc_image" src="' + asap.image + '" onError="this.src=\'images/no_image.png\';" /> \
                        </div>')                        

                            .click(function(e) {  
                        open_details(e, asap.ad_id);
                                })  
                            .prependTo($('#container'))
                    .slideDown('slow') 
            }

        };

          });

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:27:40.673

我在 Chrome 和 FF 中尝试过，问题似乎是单引号字符之前的（不必要的）反斜杠。见这个例子：http: [//jsfiddle.net/Yapad/](http://jsfiddle.net/Yapad/)

因此，您应该使用此代码，而不是您的代码：

```
<img class="a_toc_image" src="' + asap.imgurl + '" onerror="this.src='images/no_image.png';"> 
```

**编辑：** 通过正确处理 asap.imgurl 来回避问题如下所示：

```
<img class="a_toc_image" src="' + (asap.imgurl != "" ? asap.imgurl:"/images/no_image.png") + '"> 
```

# sql - 将主键添加到现有表

> ID：11794659
> 
> 赞同：237
> 
> 时间：2012-08-03T11:17:25.563
> 
> 标签：sql, sql-server, sql-server-2008, constraints, primary-key

我有一个名为`Persion`. 在此表中，我有 5 列：

*   persionId
*   名称
*   PMID
*   描述
*   帕姆特

创建此表时，我将`PersionId`and设置`Pname`为主**键**。

我现在想在主键中再包含一列 - PMID。我怎样才能写一个`ALTER`声明来做到这一点？（我的表中已经有 1000 条记录）

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-08-03T11:19:23.410

drop constraint and recreate it

```
alter table Persion drop CONSTRAINT <constraint_name>

alter table Persion add primary key (persionId,Pname,PMID) 
```

edit:

you can find the constraint name by using the query below:

```
select OBJECT_NAME(OBJECT_ID) AS NameofConstraint
FROM sys.objects
where OBJECT_NAME(parent_object_id)='Persion'
and type_desc LIKE '%CONSTRAINT' 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2012-08-03T11:33:08.117

我认为这样的事情应该有效

```
-- drop current primary key constraint
ALTER TABLE dbo.persion 
DROP CONSTRAINT PK_persionId;
GO

-- add new auto incremented field
ALTER TABLE dbo.persion 
ADD pmid BIGINT IDENTITY;
GO

-- create new primary key constraint
ALTER TABLE dbo.persion 
ADD CONSTRAINT PK_persionId PRIMARY KEY NONCLUSTERED (pmid, persionId);
GO 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2015-02-27T13:59:00.640

```
-- create new primary key constraint
ALTER TABLE dbo.persion 
ADD CONSTRAINT PK_persionId PRIMARY KEY NONCLUSTERED (pmid, persionId); 
```

是一个更好的解决方案，因为您可以控制 primary_key 的命名。

* * *

这比仅仅使用更好

```
ALTER TABLE Persion ADD PRIMARY KEY(persionId,Pname,PMID) 
```

这会产生随机名称，并且在编写脚本或比较数据库时可能会导致问题

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2017-02-22T22:55:41.193

如果添加主键约束

```
ALTER TABLE <TABLE NAME> ADD CONSTRAINT <CONSTRAINT NAME> PRIMARY KEY <COLUMNNAME> 
```

例如：

```
ALTER TABLE DEPT ADD CONSTRAINT PK_DEPT PRIMARY KEY (DEPTNO) 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2018-12-19T02:55:43.217

您的表中已经有一个主键。不能只添加主键，否则会报错。**因为sql表只有一个主键。**

首先，您必须删除旧的主键。

MySQL：

```
ALTER TABLE Persion
DROP PRIMARY KEY; 
```

SQL Server / Oracle / MS 访问：

```
ALTER TABLE Persion
DROP CONSTRAINT 'constraint name'; 
```

> 您必须在表中找到约束名称。如果您在创建表时给出了约束名称，则可以轻松使用约束名称（例如：PK_Persion）。

二、添加主键。

MySQL / SQL Server / Oracle / MS Access：

```
ALTER TABLE Persion ADD PRIMARY KEY (PersionId,Pname,PMID); 
```

或者下面更好的

```
ALTER TABLE Persion ADD CONSTRAINT PK_Persion PRIMARY KEY (PersionId,Pname,PMID); 
```

这可以由开发人员设置约束名称。维护表更容易。

当我查看所有答案时，我有点困惑。所以我研究了一些文件来找到每一个细节。希望这个答案可以帮助其他 SQL 初学者。

参考：[https ://www.w3schools.com/sql/sql_primarykey.asp](https://www.w3schools.com/sql/sql_primarykey.asp)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-10-23T09:35:34.427

死灵术。
以防万一有人和我一样有一个很好的模式可以使用......
这是正确的方法：

在本例中，表名是 dbo.T_SYS_Language_Forms，列名是 LANG_UID

```
-- First, chech if the table exists...
IF 0 < (
    SELECT COUNT(*) FROM INFORMATION_SCHEMA.TABLES 
    WHERE TABLE_TYPE = 'BASE TABLE'
    AND TABLE_SCHEMA = 'dbo'
    AND TABLE_NAME = 'T_SYS_Language_Forms'
)
BEGIN
    -- Check for NULL values in the primary-key column
    IF 0 = (SELECT COUNT(*) FROM T_SYS_Language_Forms WHERE LANG_UID IS NULL)
    BEGIN
        ALTER TABLE T_SYS_Language_Forms ALTER COLUMN LANG_UID uniqueidentifier NOT NULL 

        -- No, don't drop, FK references might already exist...
        -- Drop PK if exists (it is very possible it does not have the name you think it has...)
        -- ALTER TABLE T_SYS_Language_Forms DROP CONSTRAINT pk_constraint_name 
        --DECLARE @pkDropCommand nvarchar(1000) 
        --SET @pkDropCommand = N'ALTER TABLE T_SYS_Language_Forms DROP CONSTRAINT ' + QUOTENAME((SELECT CONSTRAINT_NAME FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS 
        --WHERE CONSTRAINT_TYPE = 'PRIMARY KEY' 
        --AND TABLE_SCHEMA = 'dbo' 
        --AND TABLE_NAME = 'T_SYS_Language_Forms' 
        ----AND CONSTRAINT_NAME = 'PK_T_SYS_Language_Forms' 
        --))
        ---- PRINT @pkDropCommand 
        --EXECUTE(@pkDropCommand) 
        -- Instead do
        -- EXEC sp_rename 'dbo.T_SYS_Language_Forms.PK_T_SYS_Language_Forms1234565', 'PK_T_SYS_Language_Forms';

        -- Check if they keys are unique (it is very possible they might not be)        
        IF 1 >= (SELECT TOP 1 COUNT(*) AS cnt FROM T_SYS_Language_Forms GROUP BY LANG_UID ORDER BY cnt DESC)
        BEGIN

            -- If no Primary key for this table
            IF 0 =  
            (
                SELECT COUNT(*) FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS 
                WHERE CONSTRAINT_TYPE = 'PRIMARY KEY' 
                AND TABLE_SCHEMA = 'dbo' 
                AND TABLE_NAME = 'T_SYS_Language_Forms' 
                -- AND CONSTRAINT_NAME = 'PK_T_SYS_Language_Forms' 
            )
                ALTER TABLE T_SYS_Language_Forms ADD CONSTRAINT PK_T_SYS_Language_Forms PRIMARY KEY CLUSTERED (LANG_UID ASC)
            ;

        END -- End uniqueness check
        ELSE
            PRINT 'FSCK, this column has duplicate keys, and can thus not be changed to primary key...' 
    END -- End NULL check
    ELSE
        PRINT 'FSCK, need to figure out how to update NULL value(s)...' 
END 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-02-18T04:37:14.530

PRIMARY KEY 约束唯一标识数据库表中的每条记录。主键必须包含 UNIQUE 值，列不能包含 NULL 值。

```
 -- DROP current primary key 
  ALTER TABLE tblPersons DROP CONSTRAINT <constraint_name>
  Example:
  ALTER TABLE tblPersons 
  DROP CONSTRAINT P_Id;

  -- ALTER TABLE tblpersion
  ALTER TABLE tblpersion add primary key (P_Id,LastName) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-11T14:49:21.720

请试试这个-

```
ALTER TABLE TABLE_NAME DROP INDEX `PRIMARY`, ADD PRIMARY KEY (COLUMN1, COLUMN2,..); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-12-06T05:35:20.437

```
ALTER TABLE TABLE_NAME ADD PRIMARY KEY(`persionId`,`Pname`,`PMID`) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-27T07:05:47.747

alter table[Person] add ID int 主键 IDENTITY (1,1)

这将添加主键和标识种子并填充新列。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-11T14:06:22.740

尝试使用此代码：

```
ALTER TABLE `table name` 
    CHANGE COLUMN `column name` `column name` datatype NOT NULL, 
    ADD PRIMARY KEY (`column name`) ; 
```

# iphone - Can only switch views one way, can't switch back, sigabort error

> ID：11794671
> 
> 赞同：0
> 
> 时间：2012-08-03T11:18:18.620
> 
> 标签：iphone, xcode, uiviewcontroller, modalviewcontroller

I'm trying to build an iphone app that plays a video then switches view to an info page after. The user can then switch back to the original view before the video plays after reading the info page. I can get the first switch to happen but not the second for some reason. I get a sigabort error that highlights this in the AppDelegate:

```
 return UIApplicationMain(argc, argv, nil, NSStringFromClass([videoPlayAppDelegate class])); 
```

Here is my code for the first switch...

videoPlayViewController.h

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>
#import "View2.h"

@interface videoPlayViewController : UIViewController
<MPMediaPickerControllerDelegate, UIAlertViewDelegate>
{
    MPMoviePlayerController *moviePlayer;
}
@property (strong, nonatomic) MPMoviePlayerController *moviePlayer;
-(IBAction) playMovie;

@end 
```

videoPlayViewController.m

```
#import "videoPlayViewController.h"

@implementation videoPlayViewController
@synthesize moviePlayer;

-(void)playMovie
{
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                         pathForResource:@"sample" ofType:@"mov"]];
    moviePlayer =  [[MPMoviePlayerController alloc]
                    initWithContentURL:url];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayer];

    moviePlayer.controlStyle = MPMovieControlStyleDefault;
    moviePlayer.shouldAutoplay = NO;
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES];
    [moviePlayer.view setTransform:CGAffineTransformMakeRotation(M_PI / 2)]; 
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification {
    MPMoviePlayerController *player = [notification object];
    [[NSNotificationCenter defaultCenter] 
     removeObserver:self
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:player];

    if ([player
         respondsToSelector:@selector(setFullscreen:animated:)])
    {
        NSLog(@"This method is working");
        View2 *second =[[View2 alloc] initWithNibName:nil bundle:nil];

        [self presentModalViewController:second animated:YES];

    }

    //[player.view removeFromSuperview];
} 
```

Here's how I switch back...

View2.h

```
#import <UIKit/UIKit.h>
#import "videoPlayViewController.h"

@interface View2 : UIViewController

-(IBAction) goBack;

@end 
```

View2.m

```
#import "View2.h"

@interface View2 ()

@end

@implementation View2

-(IBAction) goBack 
{
  //Figure this out
    videoPlayViewController *map =[[videoPlayViewController alloc] initWithNibName:@"videoPlayViewController" bundle:nil];

    [self presentModalViewController:map animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:30:42.187

这不是“回去”，而是继续你已经拥有的不同实例。

`presentModalViewController:`is的倒数`dismissModalViewControllerAnimated:`（尽管如果您查看文档，它们都已被弃用），因此要摆脱您以模态形式呈现的内容，您需要将其关闭。

# android - ConnectivityManager setNetworkPreference() / getNetworkPreference(): How are they actually used?

> ID：11794674
> 
> 赞同：3
> 
> 时间：2012-08-03T11:18:25.983
> 
> 标签：android, connectivity

I'm trying to understand the details of the ConnectivityManager. I noticed there are methods setNetworkPreference() and getNetworkPreference(), but there are no details in the [documentation](http://developer.android.com/reference/android/net/ConnectivityManager.html#getNetworkPreference%28%29) about how they should be used, except that they accept/return an integer, respectively. There is also a constant called DEFAULT_NETWORK_PREFERENCE, but that doesn't really provide many hints. Any ideas?

Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:43:21.570

你是对的，没有文件。如果您在 android 的源代码中 grep，您会看到以下内容。

```
user@host:~/android/system/frameworks$ grep -r "setNetworkPreference" *
base/core/java/android/net/IConnectivityManager.aidl:    void setNetworkPreference(int pref);
base/core/java/android/net/ConnectivityManager.java:    public void setNetworkPreference(int preference) {
base/core/java/android/net/ConnectivityManager.java:            mService.setNetworkPreference(preference);
...
base/cmds/svc/src/com/android/commands/svc/WifiCommand.java:                    connMgr.setNetworkPreference(ConnectivityManager.TYPE_WIFI);
base/cmds/svc/src/com/android/commands/svc/DataCommand.java:                    connMgr.setNetworkPreference(ConnectivityManager.TYPE_MOBILE);
base/services/java/com/android/server/ConnectivityService.java:    public void setNetworkPreference(int preference) { 
```

从上面看起来它只是用于设置访问网络的首选方法`TYPE_WIFI`。`TYPE_MOBILE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:20:32.850

One example to test network :

```
public static boolean checkStatus(Context context)
{
    final ConnectivityManager connMgr = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);

    final android.net.NetworkInfo wifi = connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    final android.net.NetworkInfo mobile = connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if( wifi.isAvailable() || mobile.isAvailable())
    {
        return true;
    }
    else
    {
        Log.i(DEBUG_TAG, "No network available");
        return false;
    }

} 
```

# asp.net - Action link with 3 parameters

> ID：11794678
> 
> 赞同：1
> 
> 时间：2012-08-03T11:18:44.390
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

I'm working on an mvc .net web application. Is there a way to pass 3 parameters to an action link?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:34:06.073

是的，actionlink 采用 routevalues 对象或字典

```
@Html.ActionLink("Comment", "NewComment", new { id_diff=somevalue, pseudo=somevalue, contenu=somevalue}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:49:40.303

是的，请看下面的代码

我正在向一个动作发送 3 个参数，这些参数包括

*   int id_diff
*   字符串伪
*   字符串连续

    ```
    @Html.ActionLink("Text", "ActionName", new { id_diff = 33, pseudo = "bye", contenu = "haha" }) 
    ```

# android - Android - Expand ellipsized TextView

> ID：11794681
> 
> 赞同：2
> 
> 时间：2012-08-03T11:18:48.807
> 
> 标签：android, textview, expand, collapse

I'm trying to implement a function that when a `TextView` contains too many lines of text, it can be collapsed into 2 lines after a user taps a button. It is expected that when the user taps that button again, the `TextView` should then show the full text it contains. In the `collapseView()` method, I use `setEllipsize` as below:

```
private void collapseView() {
        m_vwText.setMaxLines(2);
        m_vwText.setEllipsize(TruncateAt.END);
        m_vwExpandButton.setText(EXPAND);
    } 
```

So I wonder what should I do in my `expandView()` method to show all lines contained in the `TextView`. Please help and thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:34:26.177

一个想法是将原始 TextView 值放入一个临时变量并将其保留在那里，并在`customView()`方法中使用它。

例如：在`onCreate()`

```
String originalText=m_vwText.getText().toString(). 
```

然后在你的`expandView()`工作中`originalText`

```
private void expandView(){
   m_vwText.setText(originalText);
} 
```

# c# - Slow unzipping of text files using c# dotnetzip .NET 4.0

> ID：11794687
> 
> 赞同：0
> 
> 时间：2012-08-03T11:19:21.430
> 
> 标签：c#, unzip

I am making a method to extract information from zipped files. All the zip files will contain just one text file. It is the intend that method should return a string array.

I am using dotnetzip, but i am experiencing a horrable performance. I have tried to benchmark the performance of each step and seems to be performing slowly on all steps.

The c# code is:

```
 public string[] LoadZipFile(string FileName)
    {
        string[] lines = { };
        int start = System.Environment.TickCount;
        this.richTextBoxLOG.AppendText("Reading " + FileName + "... ");
        try
        {
            int nstart;

            nstart = System.Environment.TickCount;       
            ZipFile zip = ZipFile.Read(FileName);
            this.richTextBoxLOG.AppendText(String.Format("ZipFile ({0}ms)\n", System.Environment.TickCount - nstart));

            nstart = System.Environment.TickCount;
            MemoryStream ms = new MemoryStream();
            this.richTextBoxLOG.AppendText(String.Format("Memorystream ({0}ms)\n", System.Environment.TickCount - nstart));

            nstart = System.Environment.TickCount;
            zip[0].Extract(ms);
            this.richTextBoxLOG.AppendText(String.Format("Extract ({0}ms)\n", System.Environment.TickCount - nstart));

            nstart = System.Environment.TickCount;
            string filecontents = string.Empty;
            using (var reader = new StreamReader(ms)) 
            { 
                reader.BaseStream.Seek(0, SeekOrigin.Begin); 
                filecontents = reader.ReadToEnd().ToString(); 
            }
            this.richTextBoxLOG.AppendText(String.Format("Read ({0}ms)\n", System.Environment.TickCount - nstart));

            nstart = System.Environment.TickCount;
            lines = filecontents.Replace("\r\n", "\n").Split("\n".ToCharArray());
            this.richTextBoxLOG.AppendText(String.Format("SplitLines ({0}ms)\n", System.Environment.TickCount - nstart));
        }
        catch (IOException ex)
        {
            this.richTextBoxLOG.AppendText(ex.Message+ "\n"); 

        }
        int slut = System.Environment.TickCount;
        this.richTextBoxLOG.AppendText(String.Format("Done ({0}ms)\n", slut - start)); 
        return (lines); 
```

As an example I get this output:

Reading xxxx.zip... ZipFile (0ms) Memorystream (0ms) Extract (234ms) Read (78ms) SplitLines (187ms) Done (514ms)

A total of 514 ms. When the same operation is performed in python 2.6 using this code:

```
def ReadZip(File):
z = zipfile.ZipFile(File, "r")
name =z.namelist()[0]
return(z.read(name).split('\r\n')) 
```

It executes in just 89 ms. Any ideas on how to improve performance is very welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:37:26.193

你的代码不是同类的，所以比较是不公平的。一些重要的点：

*   您是否尝试过删除您的日志记录代码？这些`AppendText`电话将负责一些额外的时间。
*   您在调用 split 之前进行文件范围的替换，这将大大减慢该部分的过程。只是分开`\r\n`。
*   您将每一行转换为 char 数组，而不仅仅是返回字符串。这也会减慢速度。
*   您可能想比较不同的 Zip 库，看看是否有更快的提取方法。
*   重复调用可能`StreamReader.ReadLine`比读取整个流然后手动拆分更快。

简而言之，您应该分析一些替代方法，并且如果您想要真正的同类比较，则应该在不使用 RichTextBox 进行中间日志记录的情况下对代码进行计时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T06:48:07.087

感谢您的建议。我最终以几种方式更改了代码：

*   使用 collection.generic 返回行
*   使用 streamreader.readline

删除日志记录和异常处理并没有太大改变性能。我查看了 sharplibs 解压缩库，但它的实现看起来有点复杂，而且从我在其他帖子中可以看到的内容来看，解压缩可能会有所收获。它现在以大约 300 毫秒的速度运行。

```
 public List<string> LoadZipFile2(string FileName)
    {
        List<string> lines = new List<string>();
        int start = System.Environment.TickCount;
        string debugtext;
        debugtext = "Reading " + FileName + "... ";
        this.richTextBoxLOG.AppendText(debugtext);

        try
        {
            //int nstart = System.Environment.TickCount;
            ZipFile zip = ZipFile.Read(FileName);
           // this.richTextBoxLOG.AppendText(String.Format("ZipFile ({0}ms)\n", System.Environment.TickCount - nstart));

            //nstart = System.Environment.TickCount;
            MemoryStream ms = new MemoryStream();
            //this.richTextBoxLOG.AppendText(String.Format("Memorystream ({0}ms)\n", System.Environment.TickCount - nstart));

            //nstart = System.Environment.TickCount;
            zip[0].Extract(ms);
            zip.Dispose();
            //this.richTextBoxLOG.AppendText(String.Format("Extract ({0}ms)\n", System.Environment.TickCount - nstart));

            //nstart = System.Environment.TickCount;
            using (var reader = new StreamReader(ms))
            {
                reader.BaseStream.Seek(0, SeekOrigin.Begin);
                while (reader.Peek() >= 0)
                {
                    lines.Add(reader.ReadLine());
                }
            }
            ;
            //this.richTextBoxLOG.AppendText(String.Format("Read ({0}ms)\n", System.Environment.TickCount - nstart));
        }
        catch (IOException ex)
        {
            this.richTextBoxLOG.AppendText(ex.Message + "\n");
        }
        int slut = System.Environment.TickCount;
        this.richTextBoxLOG.AppendText(String.Format("Done ({0}ms)\n", slut - start));
        return (lines); 
```

# c++ - 将一种类型的对象分配给另一种类型的引用变量不起作用

> ID：11794696
> 
> 赞同：0
> 
> 时间：2012-08-03T11:19:33.223
> 
> 标签：c++

考虑以下代码：

```
#include <iostream>
using namespace std;
class B{
public:
  B(){}
};
class A
{
public:
A(){}
A(B &b){

}
A(const B &b){
       cout<<"cccddd"<<endl;
}
};
int main()
{
   B b;
   A c(b);
   A a;
   a=b; //ok
   A &ref = b; //error and why???
} 
```

为什么分配给 a 的 b 可以，但分配给 ref 的 b 是非法的？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:21:36.603

```
A(const B &b){
       cout<<"cccddd"<<endl;
} 
```

这将使您能够将 type 的对象转换为 type`B`的对象`A`。但是，`T&`不能从其他类型创建引用`L`。

> ### 8.5.3 参考文献 [dcl.init.ref]
> 
> 1.  声明为 a`T&`或的变量`T&&`，即“对类型的引用`T`”（8.3.2），应由 T 类型的对象或函数或可转换为 T 的对象初始化。
>     
>     
> 2.  [...]
>     
>     
> 3.  [...]
>     
>     
> 4.  给定类型“cv1 `T1`”和“cv2” ，如果“cv1”与“cv2”类型相同，或者是“cv2 ”的基类，则“cv1”与“ `T2`cv2 `T1`”引用相关。如果“cv1 ”与“cv2 ”引用相关，并且 cv1 与 cv2 具有相同的 cv-qualification 或大于 cv2 [...]，则“cv1”与“cv2”是引用兼容的。`T2``T1``T2``T1``T2``T1``T2``T1``T2`

在您的示例中`A`，既不是`B`同一类型，也不是`A`的基类`B`，因此这两个类都与引用无关。

### 为什么`A &ref = (A)b`行不通？

该表达式`(A) b`实际上会创建一个临时的，不能绑定到普通引用：

> 错误：从“B”类型的临时变量中“A&”类型的非常量引用的初始化无效</p>

您需要为此提供 const 参考`A const & ref = (A)b`。

# php - ZipArchive - 提取文件夹

> ID：11794697
> 
> 赞同：1
> 
> 时间：2012-08-03T11:19:33.993
> 
> 标签：php, ziparchive

我允许用户在我的网站上上传 ZIP 档案中的投资组合。

问题是大多数档案具有以下文件夹结构：

```
zipfile.zip
  - zipfile
    - file1.ext
    - file2.ext
    - file3.ext 
```

有什么方法可以简单地将文件（而不是目录）放到我的网站上（所以他们的投资组合的文件夹结构就是这样）

```
user_name
  - portfolio
    - file1.ext
    - file2.ext
    - file3.ext 
```

它目前像这样上传它们：

```
user_name
  - portfolio
    - zipfile
      - file1.ext
      - file2.ext
      - file3.ext 
```

这会产生各种问题！

我试过这样做：

```
$zip = new ZipArchive();
$zip->open($_FILES['zip']['tmp_name']);
$folder = explode('.', $_FILES['zip']['name']);
end($folder);
unset($folder[key($folder)]);
$folder = (implode('.', $folder));
$zip->extractTo($root, array($folder));
$zip->close(); 
```

无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:24:28.137

你可以这样做：

1.  将 Zip 文件解压缩到临时位置。
2.  扫描它并将所有文件移动（复制）到`portfolio`文件夹。
3.  删除临时文件夹及其所有内容（在步骤 1 中创建）。

代码：

```
 //Step 01
$zip = new ZipArchive();
$zip->open($_FILES['zip']['tmp_name']);
$zip->extractTo('temp/user');
$zip->close();

 //Define directories
$userdir = "user/portfolio"; // Destination
$dir = "temp/user";          //Source

 //Step 02
// Get array of all files in the temp folder, recursivly
$files = dirtoarray($dir);

// Cycle through all source files to copy them in Destination
foreach ($files as $file) {
    copy($dir.$file, $userdir.$file);
}

 //Step 03
//Empty the dir
recursive_directory_delete($dir);

 // Functions Code follows..
//to get all the recursive paths in a array
function dirtoarray($dir, $recursive) {
    $array_items = array();
    if ($handle = opendir($dir)) {
        while (false !== ($file = readdir($handle))) {
            if ($file != "." && $file != "..") {
                if (is_dir($dir. "/" . $file)) {
                    if($recursive) {
                        $array_items = array_merge($array_items, dirtoarray($dir. "/" . $file, $recursive));
                    }
                } else {
                    $file = $dir . "/" . $file;
                    $array_items[] = preg_replace("/\/\//si", "/", $file);
                }
            }
        }
        closedir($handle);
    }
    return $array_items;
}

// Empty the dir
function recursive_directory_delete($dir)
{
     // if the path has a slash at the end we remove it here
     if(substr($directory,-1) == '/')
     {
          $directory = substr($directory,0,-1);
     }

     // if the path is not valid or is not a directory ...
     if(!file_exists($directory) || !is_dir($directory))
     {
          // ... we return false and exit the function
          return FALSE;

     // ... if the path is not readable
     }elseif(!is_readable($directory))
     {
          // ... we return false and exit the function
          return FALSE;

     // ... else if the path is readable
     }else{

          // we open the directory
          $handle = opendir($directory);

          // and scan through the items inside
          while (FALSE !== ($item = readdir($handle)))
          {
               // if the filepointer is not the current directory
               // or the parent directory
               if($item != '.' && $item != '..')
               {
                    // we build the new path to delete
                    $path = $directory.'/'.$item;

                    // if the new path is a directory
                    if(is_dir($path))
                    {
                         // we call this function with the new path
                         recursive_directory_delete($path);

                    // if the new path is a file
                    }else{
                         // we remove the file
                         unlink($path);
                    }
               }
          }
          // close the directory
          closedir($handle);

          // return success
          return TRUE;
     }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-12-21T04:45:22.363

如果将您的 zip 文件更改为此如何？

```
zipfile.zip
  - file1.ext
  - file2.ext
  - file3.ext 
```

# php - 邮件中的最大行长

> ID：11794698
> 
> 赞同：19
> 
> 时间：2012-08-03T11:19:40.903
> 
> 标签：php, email

为什么[mail（）的php文档](http://php.net/manual/en/function.mail.php)说

> 行不应超过 70 个字符。

（下部分：参数消息）？

是否有 RFC 指定邮件的行长？

这个问题： [PHP mail and Lines should not be large than 70 characters](https://stackoverflow.com/questions/9054708/php-mail-and-lines-should-not-be-larger-than-70-characters)说

> 没有多少客户无法处理排长队

那么，是否只是糟糕的构建客户端/服务器对太长的行做坏事，而 70 是一个运行良好的测试值，还是有 RFC 或其他东西说邮件应用程序需要处理 70 个字符长的行？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-03T11:25:15.150

*Internet 消息格式*RFC，其中最新的是[5322](http://www.rfc-editor.org/rfc/rfc5322.txt)

> 2.1.1。行长限制
> 
> 该标准对一行中的字符数有两个限制。每行字符必须不超过 998 个字符，并且应该不超过 78 个字符，不包括 CRLF。
> 
> ...
> 
> 更保守的 78 个字符推荐是为了适应显示这些消息的用户界面的许多实现，这些消息可能会截断或灾难性地换行，每行超过 78 个字符的显示，尽管这样的实现不符合本规范的意图（以及 [RFC2821] 的意图，如果它们实际上导致信息丢失）。同样，即使对消息施加了这种限制，它也依赖于显示消息的实现

（MIME RFC 还指定最多 76 个字符）

# cakephp - CakePHP 中的嵌套标签

> ID：11794704
> 
> 赞同：0
> 
> 时间：2012-08-03T11:20:02.013
> 
> 标签：cakephp

我试图让图像显示在隐藏区域中，这是我从其他人制作的另一个页面复制的一段代码。所以一切正常，您单击按钮，隐藏区域出现，我可以从我制作的表格中获取数据以显示并更改周围的 css，没问题。

```
$tmp .= $html->tag('span',$html->tag('h3', 
```

完整的代码如下，但上面的行是我工作的地方。这是隐藏区域的开始。我想做的是在跨度标签内有 img 图像标签。但是，此时我的所有代码都是打印/回显我放入数据库中的位置，但不显示图像。我不确定这是否是我把文件放在哪里做错了，webroot/img/events/tempimg.jpg，打印的是“img/events/tempimg.jpg”。我认为我的图像在正确的位置，只是我以错误的方式打开了标签。或者关闭span标签第一次打开img标签会更好，如果是这样，我将如何确保它只出现在隐藏区域而不是主页上。

```
 $tmp = $html->tag('strong', $NewDate. " - " . $EventTitle.'<br />');  
                    $tmp .= $html->tag('div', substr($EventLoc, 0, 10).'... <br />', array('class' => 'EventInfo'));

                    $tmp .= $html->tag('span',$html->tag('h3',
                        __d('EventsHeader', $e['Team']['name'] . ' Events ', true), array('class' => 'EventInfos'))
                        .$html->tag('img', $EventImage, array('class' => 'EventHide hide'))
                        .nl2br($EventInfo . ' testing more......'), array('class' => 'EventHide hide')
                    ); 
```

非常感谢您的帮助

格伦·柯蒂斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:15:29.787

以防万一这对其他人有帮助，现在我已经建立了标签，而不使用 HTML 帮助器

```
 $tmp .= "<div class=\"EventHide hide\">
                                <h3 class=\"EventInfos\">" .$e['Team']['name'] . " Events - ". $EventTitle ." - ". $EventLoc ."</h3>
                                <div class=\"\"><img src=\"$EventImage\" width=\"250\" height=\"200\"/></div>
                                <span class=\"EventDisplayDate\">When : $DisplayDate</span>
                                <span class=\"EventDisplayLoc\">Where : $EventLoc</span>
                                <span class=\"EventDisplayDes\">Description<br/>$EventInfo</span>
                            </div>"; 
```

格伦。

# php - PHP CSV 上传脚本，使用新行？

> ID：11794705
> 
> 赞同：1
> 
> 时间：2012-08-03T11:20:02.617
> 
> 标签：php, mysql, csv, upload

我正在尝试将 CSV 导入 MySQL 数据库，其中每个新行应代表数据库中的一个新行。

这是我目前在 CSV 中的内容：

```
1one, 1two, 1three, 1four
2one, 2two, 2three, 2four 
```

在应用程序中：

```
$handle = fopen($_FILES['filename']['tmp_name'], "r");
$data = fgetcsv($handle, 1000, ",");

$sql = "INSERT INTO tbl (col1, col2, col3, col4) VALUES (?, ?, ?, ?)";
$q = $c->prepare($sql);

$q->execute(array($data[0],$data[1],$data[2],$data[3])) 
```

**问题是只插入了前四个值，显然是由于缺少循环。**

**我可以想到两个选项来解决这个问题：**

1）做一些“hacky”for循环，记住索引的位置，然后对每个插入的数组值执行n+1。

2）意识到 fgetcsv 不是我需要的功能，并且有更好的东西来处理新行！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:24:34.483

```
while ($data = fgetcsv($handle, 1000, ",")){
  //process each $data row
} 
```

您可能还希望`auto_detect_line_endings`在 php.ini 中设置为 true，以避免 Mac 创建的 CSV 出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:36:34.287

为什么你需要一个脚本呢？您可以在 1 个简单的查询中执行此操作：

```
LOAD DATA LOCAL INFILE '/data/path/to/file.csv' INTO your_db.and_table
FIELDS TERMINATED BY ', ' /* included the space here, bc there's one in your example*/
LINES TERMINATED BY '\n' /* or, on windows box, probably by '\r\n'*/
(`col1`, `col2`, `col3`, `col4`); 
```

这就是它的全部内容（在这种情况下，mysql手册将提供更多可以指定的选项`OPITIONALLY ENCLOSED BY`等等......）

* * *

好的，就注入而言：在插入时 - 据我所知 - 不可能成为问题。数据绝不用于构建查询，MySQL 只是将其解析为 varchar 数据并插入数据（它不执行任何数据）。它进行的唯一操作是强制转换，如果需要，类型强制转换为 int 或 float。

可能发生的情况是数据确实包含查询字符串，当您开始从表中选择数据时可能会造成伤害。您可能可以设置您的 MySQL 服务器以转义此会话的某些字符，或者您可以只`str_replace('``','``',$allData);`在脚本中运行 a 或其他内容。
底线是：我不完全确定，但总体而言，注射的风险应该很小。

可以在[这里找到更多信息](https://stackoverflow.com/questions/10645988/best-way-to-error-catch-load-data-local-infile)

对于临时文件，由于您正在使用`$_FILES['filename']['tmp_name']`，您可能希望使用自己的临时文件：`file_put_contents('myLoadFile.csv',file_get_contents($_FILES['filename']['tmp_name']));`，并在完成后删除该文件。很可能可以直接使用临时文件，但我没有尝试过，所以我不知道（今天也不打算尝试：-P）。

# joomla - malware text show up intermittently in my joomla site content

> ID：11794707
> 
> 赞同：0
> 
> 时间：2012-08-03T11:20:10.500
> 
> 标签：joomla, malware

My joomla site infected with some malware but i dont know how to rid with this..its appearing sometimes in site but its still showing in google cache of site. below is the link of google cache website : [http://webcache.googleusercontent.com/search?q=cache:V5KCr9zRmCkJ:www.highwaysafetygroup.com/index.php%3Foption%3Dcom_content%26view%3Darticle%26id%3D64%26Itemid%3D70+&cd=6&hl=en&ct=clnk&client=firefox-a](http://webcache.googleusercontent.com/search?q=cache:V5KCr9zRmCkJ:www.highwaysafetygroup.com/index.php%3Foption%3Dcom_content%26view%3Darticle%26id%3D64%26Itemid%3D70+&cd=6&hl=en&ct=clnk&client=firefox-a)

Below is actual site link : www.highwaysafetygroup.com

can any help me out?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:37:14.013

首先要做的是添加 &tmpl=component 到 URL 有问题。如果问题消失了，那么问题出在某个模块中。如果没有，则切换模板。如果问题消失，请检查您的模板文件。接下来关闭浏览器中的javascript，看看问题是否仍然存在。如果它消失了，那么问题是 javascript 插入到了您的数据库中。

# php - php to call a shell script

> ID：11794708
> 
> 赞同：1
> 
> 时间：2012-08-03T11:20:15.823
> 
> 标签：php, shell, sudo, minecraft

purpose: use php to input commands directly into the minecraft server console

Im trying to use a php script (run from browser) to exec() a shell script. when i run the php from a terminal it works! But in the browser, nothing happens.

```
exec('sudo -u root sh /home/minecraft/whitelist-reload.sh', $out, $ret_val); 
```

When running from terminal, i get a "array 0" but the browser gives me a "array 1"

what is the issue? and once i run the shell, shouldn't everything after that work as if you were on a terminal?(does it matter what is inside of shell script?)

the shell has all rx permissions and is in the sudoers file as

```
www-data ALL = NOPASSWD: /home/minecraft/whitelist-reload.sh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:28:53.497

问题是，您在终端上以可能拥有`sudo`权限的用户身份运行脚本，而 apache/webserver 用户没有，因此`$ret_val`（实际上只是一个状态代码）设置为 1（表示错误） .

尝试`var_dump($out);`在这两种情况下查看 exec 调用的结果。要从浏览器中执行此类操作，您可能需要查看`proc_open`和家庭，或者有一个 chmod'ed 为 777 的脚本，因此 apache 用户也可以运行它。然后让该脚本调用实际的 shell 脚本并返回它的输出。然而，这是非常危险的，并且应该只用于在您自己的机器上测试环境。永远不要在生产环境中这样做！

我在这里也发布了几个问题，这可能会提供有用的信息：

[通过 ssh 进行交互](https://stackoverflow.com/questions/10102952/proc-open-interaction)

[打开第二个外壳，加载配置文件变量并调用另一个脚本](https://stackoverflow.com/questions/9843550/load-profile-with-proc-open)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:42:09.753

原来......在将 www-data 输入到 sudoers 文件后，我需要做的就是在它后面加上“-u root”

# r - lubridate mac timezone names

> ID：11794711
> 
> 赞同：3
> 
> 时间：2012-08-03T11:20:23.380
> 
> 标签：r, macos, timezone, lubridate

I am trying to calculate the length of time between dates some of which have been taken from gmail and are therefor stated in PDT(America/Los_Angeles) or PST (Daylight Saving time of the same time zone) depending on the time of the year. As the rest of my data is in Central European Time (Europe/Zurich) I want to convert the PDT and PST dates into CET(CEST).

I used the following command to convert the dates into the appropriate tz:

```
DF$sendback_date1[!is.na(DF$sendback_date1)] <-
    force_tz(DF$sendback_date1[!is.na(DF$sendback_date1)],
             tz = "Europe/Zurich") 
```

Now the problem: On my mac the force_tz command produces the following error message:

```
Fehler in as.POSIXlt.character(time) :    character string is not in a
standard unambiguous format 
```

I saw this command work on linux. Am I missing something? Does Mac use other names for the time zones?

Thanks for your help!!

To make my problem clearer, I post you a reproducible example, here:

```
library(lubridate)
    DF <- structure(list(sendback_date1 = c("12.05.31 11:12", "12.07.03 11:33", "12.04.24 09:59", "12.07.02 18:37", "12.07.02 20:02", "", "12.04.24 15:00", "", "12.03.02 13:37", "12.03.26 10:23", "", "12.04.24 09:20", "", "12.03.26 14:14", "12.03.02 10:20", "12.04.23 17:30", "12.05.30 11:03", "", "12.05.24 08:51", "12.03.30 10:02", "12.03.19 12:44"), sendback_date2 = c("", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""), send_date = c("12/05/22 01/17/10", "12/05/22 01/17/14", "12/04/23 07/27/29", "12/03/01 12/08/28", "12/03/23 07/46/59", "12/03/23 07/47/00", "12/04/23 07/27/30", "12/05/22 01/17/17", "12/03/01 12/08/30", "12/04/23 19/17/00", "12/03/01 21/29/00", "12/03/23 16/18/00", "12/05/22 10/00/00", "12/03/23 07/47/01", "12/03/01 12/08/32", "12/04/23 07/27/32", "12/05/22 01/17/20", "12/04/23 07/27/35", "12/05/22 01/17/21", "12/03/23 07/47/03", "12/03/01 12/08/34"), Daylight = c("PDT", "PDT", "PDT", "PST", "PDT", "PDT", "PDT", "PDT", "PST", "", "", "", "", "PDT", "PST", "PDT", "PDT", "PDT", "PDT", "PDT", "PST")), .Names = c("sendback_date1", "sendback_date2", "send_date", "Daylight"), row.names = 60:80, class = "data.frame")

DF[DF == ""] <- NA
    DF$send_date <- gsub("^\\s+|\\s+$", "", DF$send_date) 
DF

DF$sendback_date1[!is.na(DF$sendback_date1)] <- ymd_hm(DF$sendback_date1[!is.na(DF$sendback_date1)], tz = "Europe/Zurich")
DF$sendback_date2[!is.na(DF$sendback_date2)] <- ymd_hm(DF$sendback_date2[!is.na(DF$sendback_date2)], tz = "Europe/Zurich")

DF$send_date[!is.na(DF$send_date) & !is.na(DF$Daylight)] <- ymd_hms(DF$send_date[!is.na(DF$send_date) & !is.na(DF$Daylight)], tz = "America/Los_Angeles")
DF$send_date[!is.na(DF$send_date) & !is.na(DF$Daylight)] <- with_tz(DF$send_date[!is.na(DF$send_date) & !is.na(DF$Daylight)], tz = "Europe/Zurich")

DF$send_date[!is.na(DF$send_date) & is.na(DF$Daylight)] <- ymd_hms(DF$send_date[!is.na(DF$send_date) & is.na(DF$Daylight)], tz = "Europe/Zurich")

   dput(head(DF)) structure(list(sendback_date1 = c("12.05.22 13:57", "12.04.24 09:17",  
   "12.04.10 13:26", "12.03.09 10:09", "12.03.02 12:39", "12.05.22 12:33" ), 
   sendback_date2 = c("12.05.31 11:55", NA,  NA, NA, NA, NA), 
     sendback_date3 = c(NA_character_, NA_character_, NA_character_, 
     NA_character_, NA_character_, NA_character_), send_date = c("12/05/22 01/16/28", 
     "12/04/23 07/26/52", "12/03/23 07/46/30", "12/03/01 12/07/59", 
     "12/03/01 12/08/00", "12/05/22 01/16/32"), Daylight = c("PDT", 
     "PDT", "PDT", "PST", "PST", "PDT")), .Names = c("sendback_date1",  "sendback_date2", 
     "sendback_date3", "send_date",  "Daylight"), row.names = c(NA,  6L), class = "data.frame")

> str(DF)
'data.frame':   1004 obs. of  5 variables:
 $ sendback_date1: chr  "12.05.22 13:57" "12.04.24 09:17" "12.04.10 13:26" "12.03.09 10:09" ...
 $ sendback_date2: chr  "12.05.31 11:55" NA NA NA ...
 $ sendback_date3: chr  NA NA NA NA ...
 $ send_date     : chr  "12/05/22 01/16/28" "12/04/23 07/26/52" "12/03/23 07/46/30" "12/03/01 12/07/59" ...
 $ Daylight      : chr  "PDT" "PDT" "PDT" "PST" ... 
```

# wcf - RESTfull 服务不接受对象作为参数

> ID：11794715
> 
> 赞同：2
> 
> 时间：2012-08-03T11:20:37.767
> 
> 标签：wcf, rest

```
[WebInvoke(Method="POST",UriTemplate="/Users",RequestFormat=WebMessageFormat.Json)]
public string StudentUsers(Student user)
{
    return string.Format("Hello {0}", user.Name);
} 
```

上面的代码是我的 REST 服务。我的客户代码是：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "POST";
request.ContentType = "application/json; charset=utf-8";
Student user = 
    new Stuent {
        Name="Test User", 
        Email = "test@test.com",    
        Password = "test" 
    };                
DataContractJsonSerializer ser = new DataContractJsonSerializer(user.GetType());
MemoryStream ms = new MemoryStream();
ser.WriteObject(ms, user);
String json = Encoding.UTF8.GetString(ms.ToArray());
StreamWriter writer = new StreamWriter(request.GetRequestStream());
writer.Write(json);
writer.Close();

var httpResponse = (HttpWebResponse)request.GetResponse();
using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
{
    var result = streamReader.ReadToEnd();
    Console.WriteLine(result);
} 
```

我的服务是托管的，我正在使用 webHttpBinding。当我调试我的 REST 服务时，我收到`null`了 Student 对象。我确信我的 post 方法正在发送数据，因为我通过将名称、电子邮件和密码作为 REST 服务的参数来测试它，因此我的数据已成功发布，但问题是我发布的 Json 数据没有转换为 Student 对象。我在某处读到 RESTfull 服务会将 Json 数据转换为对象。这是真的还是我们需要明确地转换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:40:26.960

您需要为您的 POST 数据发送 Content-Length：

```
request.ContentLength = ms.Length; 
```

请参阅[此处](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)了解更多详细信息：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T10:32:57.207

我已通过将 WebInvoke 更改为

```
    [WebInvoke(Method="POST",UriTemplate="/Users",RequestFormat=WebMessageFormat.Json,BodyStyle = WebMessageBodyStyle.Bare)]

```

# vbscript - VBScript 和批处理交互

> ID：11794724
> 
> 赞同：2
> 
> 时间：2012-08-03T11:21:16.520
> 
> 标签：vbscript, batch-file

我正在运行一个批处理脚本，并且用户必须在某个地方访问数据库。

这时，一个用vbscript制作的窗口会提示要求用户输入登录名和密码。（确定，取消按钮）

如果 OK 后凭据正确，则批次将根据计划 A 继续执行，否则批次将执行其他操作以执行计划 B。如果（取消），它将返回批处理和主菜单。

**这就是我一直在努力解决的问题：**

```
@echo off 

:Ini 
echo   [1] Access database 
echo   [2] Main menu 
echo: 
set /p Quest= What do you prefer (1 / 2)?        
if not '%Quest%'=='' set Quest=%Quest:~0,1%  
if '%Quest%'=='1' goto VBS 
if '%Quest%'=='2' goto BATCH 
echo Invalid option, please try again 
cls 
goto Ini 

:BATCH 
echo Heading for main menu ... 
goto Main 

:VBS 
:wscript.echo InputBox("Enter your password","VBScript-Batch") 
findstr "^:" "%~sf0" | findstr /i /v ":Label" >temp.vbs 
for /f "delims=" %%N in ('cscript //nologo temp.vbs') do set pass=%%N  
del temp.vbs 

:Label1 

If %pass%=="okay" echo Valid Password ! & goto PLAN-A
If not %pass%=="okay" echo Invalid Password !! & goto PLAN-B 

:PLAN-A
echo continue from here 

:PLAN-B
echo do something else 
```

(...)

***-- 如何获取用户信息，对其进行验证并返回到planA 或planB 的批次？***

如您所见，如果我们消除 " `& goto PLAN`" 的东西，脚本就可以工作。它将 VBS 输入“通过”发送到批处理，批处理回显“从这里继续”或“做其他事情”，其余代码应从同一批处理中继续。

但是，它不起作用......有什么帮助让它**真正**起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:05:45.753

您的主要问题是您没有正确设置文件以方便从批处理文件中提取 VBS。您的 VBS 看起来与批次标签没有什么不同。您过滤掉了“标签”标签，但您仍然包含诸如`:ini`、`:BATCH`等行。显然，这些行会使 VBS 出错。`:::`我通过为您的 VBS 添加前缀并调整您的过滤器解决了这个问题。无需显式过滤掉任何标签。我选择了 3 个冒号，因为一个冒号用于标签，而 2 个冒号经常用于注释。只需改变前面冒号的数量，您就可以在批处理中嵌入多个独立的 VBS 脚本。

我还对代码进行了少量重组，并添加了一些 EXIT /B 语句，这样代码就不会失败。你的 :MAIN 也没有定义，所以我注释掉了 GOTO 并用 EXIT /B 替换它。

```
@echo off
:Ini
echo   [1] Access database
echo   [2] Main menu
echo:
set /p Quest= What do you prefer (1 / 2)?
if not '%Quest%'=='' set Quest=%Quest:~0,1%
if '%Quest%'=='1' goto VBS
if '%Quest%'=='2' goto BATCH
echo Invalid option, please try again
cls
goto Ini

:BATCH
echo Heading for main menu ...
::goto Main
exit /b

:VBS
:::wscript.echo InputBox("Enter your password","VBScript-Batch")
findstr "^:::" "%~sf0" >temp.vbs
for /f "delims=" %%N in ('cscript //nologo temp.vbs') do set pass=%%N
del temp.vbs
If "%pass%"=="okay" (
  echo Valid Password !
    goto PLAN-A
) else (
  echo Invalid Password !!
    goto PLAN-B
)

:PLAN-A
echo continue from here
exit /b

:PLAN-B
echo do something else
exit /b 
```

# c# - 从javascript函数调用webservice并存储结果

> ID：11794725
> 
> 赞同：1
> 
> 时间：2012-08-03T11:21:16.367
> 
> 标签：c#, javascript, jquery, asp.net, web-services

这个问题是参考我的另一个问题[Auto complete not working](https://stackoverflow.com/questions/11789941/autocomplete-jquery-function-returning-internal-server-error-while-calling-webse)。这个问题在我的代码中仍然存在，但我想以其他方式这样做。我正在考虑从另一个 javascript 函数调用我的 web 服务，并将从服务返回的值传递给这个自动完成函数，因为当我尝试将一些虚拟值传递给这个 jquery 函数时，它运行良好。我不确定它是否没有调用我的网络服务。

虽然现在我已经编写了另一个函数来调用我的服务并获取请求 -

```
 function SendRequest() 
    {
    debugger;
        SearchIssues.GetServerResponse(document.getElementById('ctl00_ContentPlaceHolder1_txtIssueNo').value, OnComplete, OnError, OnTimeOut);
    }
    function OnComplete(arg)
    {
        alert(arg);
    }
    function OnTimeOut(arg)
    {
        alert("timeOut has occured");
    }
    function OnError(arg)
    {
        alert("error has occured: " + arg._message);
    } 
```

在脚本管理器标签中，我添加了我的网络服务的参考 -

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
        <Services>
            <asp:ServiceReference Path="~/SearchIssues.asmx" />
        </Services>
    </asp:ScriptManager> 
```

我已将我的自动完成功能更新为 -

```
 $(function() {
   debugger;
        $(".tb").autocomplete({
            source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"]  });}); 
```

在这里，我在源中传递了虚拟数据，它工作正常。

我的网络服务的签名是 -

```
 [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public List<string> GetCompletionList(string prefixText)
        {....
} 
```

但它仍然没有调用我的网络服务并返回一些javascript错误 -

> 搜索问题未定义

请帮忙谢谢

![在此处输入图像描述](../Images/32e1e7c3a284ed2dbc3a45df7afd4a8c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:49:19.290

1>我认为在打电话时你应该有完整的命名空间

```
 NameSpace.SearchIssues.GetServerResponse(document.getElementById('ctl00_ContentPlaceHolder1_txtIssueNo').value, OnComplete, OnError, OnTimeOut) 
```

2>您的服务类必须具有`[ScriptService]`属性。

3> 测试服务的相对 URL

> “~/SearchIssues.asmx”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:12:36.040

这对我有用

```
 [WebMethod]
            public static Array GetCompletionList(string code)
    {
    .....your code
    }

 $.ajax({
                type: "POST",
                url: "CompletionList.aspx/GetCompletionList",
                data: '{"code1":"' +code1 + '"}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (c2) {
                   ....your code
                    });

}); 
```

# objective-c - 使用平移手势交换图像

> ID：11794731
> 
> 赞同：0
> 
> 时间：2012-08-03T11:21:46.767
> 
> 标签：objective-c, ios, xcode, uiview, uipangesturerecognizer

我`UIImageView`在主视图中添加了多个，每个`UIImageView`都显示在其自己的父`UIView`级中以进行裁剪，每个`UIImageView`还附加到`PanGestureRecognizer`.

我很好奇如何实现平移手势识别器并通过拖动一个图像（A）将鼠标悬停在另一个图像（B）上并按住来允许图像交换，然后图像A和B将被交换（所以A现在显示在老 B 的 UIView）。

这有点像刚刚实现的 iPhoto 应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:43:04.300

*   实现平移手势

*   在处理平移手势的方法中，使用**CGRectIntersectsRect**检查两个 imageview 的帧是否相交。

    ```
    if ([gestureRecognizer state] == UIGestureRecognizerStateEnded)
    {
    if(CGRectIntersectsRect(frame1,frame2))
           // Swap both the imageview's
    } 
    ```

# ios - 在Objective C中将数据从3个类传递给另一个类

> ID：11794735
> 
> 赞同：0
> 
> 时间：2012-08-03T11:21:55.230
> 
> 标签：ios, objective-c, xcode, methods, delegates

我无法在Objective C中的3个视图之间传递变量。只要只有2个，我就可以将数据从一个类传递到另一个类，但是如果我添加另一个需要访问相同委托方法的视图，我就无法做到所以。

让我试着解释一下：

View1 访问 View2 中声明的委托方法。但是，如果我添加另一个名为 View3 的视图并需要访问 View2 中的委托方法，我不能。我正确声明了所有内容，并且能够引用委托方法，但我仍然无法在 View3 中输入该引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:21:59.497

如果你想将数据从 1 个类传递到 3 个类，你最好使用 NSNotification。你可以这样使用。

在第一个接收类中：

```
@implementation TestClass1

- (void) dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
}

- (id) init
{
    self = [super init];
    if (!self) return nil;

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(receiveNotification1:) 
                                                 name:@"TestNotification"
                                               object:nil];

    return self;
}

- (void) receiveNotification1:(NSNotification *) notification
{
    NSLog(@"receive 1");
}

@end 
```

在第二接收类：

```
@implementation TestClass2

- (void) dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
}

- (id) init
{
    self = [super init];
    if (!self) return nil;

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(receiveNotification2:) 
                                                 name:@"TestNotification"
                                               object:nil];

    return self;
}

- (void) receiveNotification2:(NSNotification *) notification
{
    NSLog(@"receive 2");
}

@end 
```

在第三接收类：

```
@implementation TestClass3

- (void) dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
}

- (id) init
{
    self = [super init];
    if (!self) return nil;

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(receiveNotification3:) 
                                                 name:@"TestNotification"
                                               object:nil];

    return self;
}

- (void) receiveNotification3:(NSNotification *) notification
{
    NSLog(@"receive 3");
}

@end 
```

在帖子类中：

```
- (void) yourMethod
{

    [[NSNotificationCenter defaultCenter] 
        postNotificationName:@"TestNotification" 
        object:self];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:31:02.733

两个对象不能同时是第三个的委托。那是你的问题吗？如果是这样，请考虑使用 NSNotification 来发送消息：多个对象可以订阅通知。

# android - Facebook 连接 android 以获取我的电子邮件地址？

> ID：11794738
> 
> 赞同：1
> 
> 时间：2012-08-03T11:22:01.673
> 
> 标签：android, facebook

如何在 android 中使用 facebook connect 获取我的电子邮件地址和 facebook id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:34:43.197

> 您需要电子邮件权限才能读取用户的电子邮件地址。这将在来自 [uid] 或我请求的 json-response 中添加一个电子邮件标签。

```
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.ColorMatrix;
import android.graphics.ColorMatrixColorFilter;
import android.graphics.Paint;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.Facebook;
import com.facebook.android.LoginButton;

public class FacebookIntegrationActivity extends Activity 
{
    public static final String APP_ID = "166597773469222";     // TestFBIntegration App 
    private Facebook mFacebook;
    private AsyncFacebookRunner mAsyncRunner;
    private LoginButton mLoginButton;
    private TextView mText;
    private Button buttonLoad = null,buttonBlackAndWhite=null;
    private String uniq_id,first_name,last_name,avatar,user_name,emailaddress;

    private static final String[] PERMISSIONS =
            new String[] {"publish_stream", "read_stream", "offline_access","user_photos","user_likes","friends_photos","friends_likes","email"};

    private ImageView imageViewFacebook = null;

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initControls();
    }

    private void initControls()
    {
        try
        {
            if (APP_ID == null) 
            {
                Util.showAlert(this, "Warning", "Facebook Applicaton ID must be " +
                        "specified before running this example");
            }

             mLoginButton = (LoginButton) findViewById(R.id.login);
             mText = (TextView) findViewById(R.id.txt);

             mFacebook = new Facebook(APP_ID);
             mAsyncRunner = new AsyncFacebookRunner(mFacebook);

             SessionStore.restore(mFacebook, this);
             SessionEvents.addAuthListener(new SampleAuthListener());
             SessionEvents.addLogoutListener(new SampleLogoutListener());
             mLoginButton.init(this, mFacebook,PERMISSIONS);

             buttonLoad = (Button)findViewById(R.id.buttonLoad);
             buttonLoad.setOnClickListener(this);
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

     public class SampleAuthListener implements AuthListener 
     {
            public void onAuthSucceed() 
            {
                mText.setText("You have logged in! ");
                mAsyncRunner.request("me&fields=id,name,email,first_name,last_name,picture", new SampleRequestListenerForUniqueId());
                Log.i("------------- Get Access Tokens","=============== :: "+mFacebook.getAccessToken());
            }
            public void onAuthFail(String error) {
                mText.setText("Login Failed: " + error);
            }
      }

      public class SampleLogoutListener implements LogoutListener 
      {
            public void onLogoutBegin() 
            {
                mText.setText("Logging out...");
            }

            public void onLogoutFinish() 
            {
                mText.setText("You have logged out! ");
            }
        }

        public class SampleRequestListenerForUniqueId extends BaseRequestListener 
        {
            public void onComplete(final String response,Object state) 
            {
                try 
                {
                     JSONObject dataObject = Util.parseJson(response);
                     uniq_id = dataObject.getString("id");
                     user_name = dataObject.getString("name");
                     first_name = dataObject.getString("first_name");
                     last_name = dataObject.getString("last_name");
                     emailaddress = dataObject.getString("email");
                     avatar = dataObject.getString("picture");
                } 
                catch (JSONException e)
                {
                    e.printStackTrace();
                    Log.w("Facebook-Example", "JSON Error in response");
                } 
                catch (FacebookError e) 
                {
                    Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
                }
            }
        }
} 
```

## 主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="@drawable/white"
    android:gravity="center_horizontal">

    <com.facebook.android.LoginButton
        android:id="@+id/login"
        android:src="@drawable/login_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_margin="30dp"
        android:visibility="gone"/>

    <TextView android:id="@+id/txt" 
        android:text="@string/hello"
        android:textColor="@drawable/black"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="gone"/>

    <Button
        android:id="@+id/buttonLoad"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Load Photo Albums" 
        android:visibility="gone"/>

    <ImageView
        android:id="@+id/imageViewFacebook"
        android:layout_width="300dip"
        android:layout_height="300dip"
        android:src="@drawable/login" />

    <Button
        android:id="@+id/buttonBlackAndWhite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Black and White"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:27:19.897

我不确定，但如果我没记错的话，可以从Facebook 提供的[Graph API获得此信息。](http://www.facebook.com/login.php?next=http://developers.facebook.com/docs/reference/api/)您需要登录才能访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:33:37.917

LoginButton 是在我看来实现的 Facebook SDK 原生对象 (com.facebook.widget.LoginButton)。

**查看代码：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:id="@+id/login_options"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <com.facebook.widget.LoginButton
        android:id="@+id/authButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="30dp">
        </com.facebook.widget.LoginButton>
    </RelativeLayout> 
```

**Java 代码：**

```
RelativeLayout view = (RelativeLayout) inflater.inflate(R.layout.login_options, container, false);    

LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);

authButton.setReadPermissions(Arrays.asList("email")); 
```

# javascript - 为什么 JavaScript 代码写得几乎是故意难以阅读的？

> ID：11794741
> 
> 赞同：3
> 
> 时间：2012-08-03T11:22:11.630
> 
> 标签：javascript, formatting

我一直在一些网站上做一些维护工作（最初都是由不同的人开发的），我注意到很多这样的 JavaScript 代码：

```
function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
} 
```

几分钟的努力可以提高可读性。

```
function MM_findObj(name)
{
    var doc = document;
    var x;

    if((var p = name.indexOf("?")) > 0 && parent.frames.length != 0)
    {
        doc = parent.frames[name.substring(p + 1)].document;
        name = name.substring(0, p);
    }

    if(!(x = doc[name]) && doc.all)
    {
        x = doc.all[name];
    }

    for (var i = 0; !x && i < doc.forms.length; i++)
    {
        x = doc.forms[i][name];
    }

    for(var i = 0; !x && doc.layers && i < doc.layers.length; i++)
    {
        x = MM_findObj(name, doc.layers[i].document);
    }

    if(!x && doc.getElementById)
    {
        x = doc.getElementById(name);
    }

    return x;
} 
```

我很好奇为什么 JavaScript 往往不以可读的方式编写？在我工作过的网站中——并且与最初的开发没有任何关系——精简、格式差和不可读的 JavaScript 绝对是我注意到的一种趋势。仅仅是为了减少脚本在页面上占用的空间量，还是只是技术不佳？

编辑：为了增加这个问题，为什么单字符变量名似乎也是常态？

PS我绝不是专家，事实上我几乎不精通JavaScript，所以如果有人也可以解释上面的代码实际上*做*了什么，那么将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T11:23:41.687

有一些非常常用的[工具](http://code.google.com/p/minify/)可以获取 JavaScript 代码并删除不需要的空格并缩短变量名，从而生成这样的代码，或者更糟。它节省了网络带宽，并防止随意的外观阅读您的代码（由于默默无闻，安全性非常差。）

通常，当人们在编写代码时，代码看起来并不像这样。这只是在代码即将发布时完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T11:29:50.250

用于 Web 浏览器的 Javasicript 通常针对浏览器进行优化，而不是人类阅读器。在开发它时，您将其视为编译语言；当然，源代码的格式、注释等都很好，但这不是您提供的。实际工件已“缩小”以减少网络消耗。它可以在几百万次点击中对您的带宽账单产生重大影响。

所以你看到的代码不像作者看到的那样；您看到的是已编译可执行文件的道德等价物。

当然，大多数浏览器和服务器都支持在传输过程中自动对 Javascript 进行 gzip 压缩，这使得缩小的必要性比以前减少了。但它仍然是大多数 webdev 商店过程的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T11:23:19.633

压缩 JS 会减少带宽使用，从而加快页面加载时间，尽管你应该只在发布时这样做，而不是对你的源 :(

[js美化](http://jsbeautifier.org/)器会自动为你修复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:52:29.780

如果您需要可读的 javascript 来学习或构建代码，请使用原始网站的原始版本，不要使用最小版本，它很难阅读。

那么如果你想实现你的javascript代码，你可以制作或使用最小版本来获得网络中的最佳性能。文件的大小真的不同。我认为这就是程序员发布两个版本的 javascript 的原因。

您可以使用[notepad++ 之](http://notepad-plus-plus.org/)类的工具 来制作最少的 javascript。

浏览器只需要相同的符号来运行代码，而不是人类语言中单词的意思。

# c# - 如何在 C# 中的单行上使用反转一些布尔变量？

> ID：11794748
> 
> 赞同：0
> 
> 时间：2012-08-03T11:22:50.753
> 
> 标签：c#, boolean, boolean-logic

我从 Stackoverflow.com 阅读了一些文章，尤其是：

[获取 Java 布尔值的倒数的最简洁方法是什么？](https://stackoverflow.com/questions/3907384/whats-the-most-concise-way-to-get-the-inverse-of-a-java-boolean-value)

[翻转布尔值的最简单方法？](https://stackoverflow.com/questions/610916/easiest-way-to-flip-a-boolean-value)

如果我有三个布尔变量会发生什么？我想使用单行分配一个真/假值。

例如，`test1`and`test3`必须为 true 且`test2`必须为 false。

我用了

```
test1 = test2 ^= test3 = true;   //true, false, true 
```

或者

```
test1 = test3 ^= test2 ^= true; 
```

但这并不好。逻辑不好。

我知道我的问题很简单，但我有 6-7 个布尔变量，如果可能的话，我想使用单行赋值。

有可能的 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:26:57.167

你可以这样做：

```
test1 = !(test2 = !(test3 = true)); 
```

尽管您绝对应该将作业拆分为多行：

```
test1 = true;
test2 = false;
test3 = true; 
```

我想不出 c# 中可以做前者但不能做后者的任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:41:57.197

```
a = b = c = !(d = e = f = true); 
```

这会将第一个设置为 false，第二个设置为 true。（从 D 开始。）

所以在你的情况下：

```
test2 = !(test1 = test3 = true); 
```

# java - 如何解码 android.os.Build.SERIAL？

> ID：11794749
> 
> 赞同：4
> 
> 时间：2012-08-03T11:22:55.477
> 
> 标签：java, android, serial-number

我正在研究循环序列号主题以提供唯一 ID。

我试试这个：

```
 String serial = null; 

        try {
            Class<?> c = Class.forName("android.os.SystemProperties");
            Method get = c.getMethod("get", String.class);
            serial = (String) get.invoke(c, "ro.serialno");
        } catch (Exception ignored) {
        } 
```

和

```
 StringBuilder sb = new StringBuilder();
        sb.append("SERIAL ").append(android.os.Build.SERIAL).append("\n");

        textReportAdmin.setText(
                sb.toString()); 
```

两者都给出相同的值：`C4F12FDD949F22F`

在盒子和我标签的贴纸上，序列号是：`RF2C202WYME`

我在标签上工作，没办法使用

```
 TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    String imei = telephonyManager.getDeviceId(); 
```

在我的情况下，IMEI 是空的。

SERIAL 是我需要的，但我需要它的清晰版本，如标签后面条形码上的贴纸所示。

我想这是可能的，当进入系统应用程序并查看设备的状态时，它会以清晰的方式显示......

如何将 android.os.Build.SERIAL 返回的值转换为人类可见的值？

版本：我还查看了：

```
 sb.append("PRODUCT ").append(android.os.Build.PRODUCT).append("\n");
        sb.append("BOARD ").append(android.os.Build.BOARD).append("\n");
        sb.append("BOOTLOADER ").append(android.os.Build.BOOTLOADER).append("\n");
        sb.append("BRAND ").append(android.os.Build.BRAND).append("\n");
        sb.append("CPU_ABI ").append(android.os.Build.CPU_ABI).append("\n");
        sb.append("CPU_ABI2 ").append(android.os.Build.CPU_ABI2).append("\n");
        sb.append("DEVICE ").append(android.os.Build.DEVICE).append("\n");
        sb.append("DISPLAY ").append(android.os.Build.DISPLAY).append("\n");
        sb.append("FINGERPRINT ").append(android.os.Build.FINGERPRINT).append("\n");
        sb.append("HARDWARE ").append(android.os.Build.HARDWARE).append("\n");
        sb.append("HOST ").append(android.os.Build.HOST).append("\n");
        sb.append("ID ").append(android.os.Build.ID).append("\n");
        sb.append("MANUFACTURER ").append(android.os.Build.MANUFACTURER).append("\n");
        sb.append("MODEL ").append(android.os.Build.MODEL).append("\n");
        sb.append("PRODUCT ").append(android.os.Build.PRODUCT).append("\n");
        sb.append("RADIO ").append(android.os.Build.RADIO).append("\n");
        sb.append("SERIAL ").append(android.os.Build.SERIAL).append("\n");
        sb.append("TAGS ").append(android.os.Build.TAGS).append("\n");
        sb.append("TIME ").append(android.os.Build.TIME).append("\n");
        sb.append("TYPE ").append(android.os.Build.TYPE).append("\n");
        sb.append("USER ").append(android.os.Build.USER).append("\n"); 
```

无处，我得到了贴纸上的序列号，虽然可以找到，但系统本身可以在“参数”，“关于”，“状态”中显示它（我不知道里面的词英语，我有一个法语标签，它是“Paramètres”、“A propos de”、“Etat”，然后是“Serial Number”，清晰版本，如贴纸上所示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T23:07:23.090

你试过这个吗？

```
String serial = null; 

try {
     Class<?> c = Class.forName("android.os.SystemProperties");
     Method get = c.getMethod("get", String.class);
     serial = (String) get.invoke(c, "ril.serialnumber");
 } catch (Exception ignored) {
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T08:59:08.977

如果您想获取设备背面显示的序列号，并且如果您使用的是三星 Galaxy Tab，那么为什么不使用“ril.serialnumber”属性

项目更改为您的设备应显示的内容：

```
$ adb shell getprop | grep serial
[ril.serialnumber]: [RF2C202WYME]
[ro.boot.serialno]: [c4f12fdd949f22f]
[ro.serialno]: [c4f12fdd949f22f] 
```

Pre-jellybean 'ro.boot.serialno' 不存在

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T22:15:08.920

在许多设备上，“设置”->“关于活动”中显示的信息是非标准的，并且无法从任何标准 Android API 获得。例如，FCC ID 有时会显示在那里，但对应用程序不可用。

此外，通过 API 提供的序列号不要求是产品的“真实”序列号（即包装上的序列号）。只是它是独一无二的。

所以，我认为没有办法做你想做的事（阅读包装盒上和关于活动中的序列号），然后查看该产品的源代码（如果可用），看看是否有办法获得该特定产品或制造商的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-02T18:45:16.013

你应该使用 sys.serialnumber ，有些设备有 ril.serialnumber ，有些有 sys.serialnumber ，所以你应该试试 sys one

# java - ftp 文件检索未完成的文件

> ID：11794750
> 
> 赞同：2
> 
> 时间：2012-08-03T11:23:02.163
> 
> 标签：java, ftp, apache-commons

对于从 ftp 服务器检索文件的程序来检查要下载的文件是否是正在进行的传输（在我们决定下载期间有人已经上传此文件）的最佳方法是什么。ftp 客户端 API 是否处理此问题？（例如 apache commons ftp 客户端）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:28:30.063

我认为这不太可能。几年前我遇到了类似的问题，我有两个选择。（不幸的是它是 C#，而不是 Java）你可以检查文件是否还在增长（暗示你会有一个小的延迟，因为你需要检查两次）或者你是否使用 Windows（我不知道如何 linux工作）你可以尝试访问这个文件，你应该得到一个异常，该文件正在被另一个进程使用。只有两种可能性和一个让您思考问题的起点。也许其他人想出了一个非常好的解决方案，但现在这对你来说可能是一个小解决方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:38:23.357

ftp 的设计目的不是告诉您文件是否正在使用，ftp 守护程序最多只能拒绝传输，这在某些服务器中是可配置的。可能有一个服务器可以临时重命名文件或提供一个脚本来这样做，但你必须找到一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:49:20.600

不知道这对你来说是否足够，但如果你只需要一些“dum”检查，我会尝试`System.getSecurityManager().checkDelete()`. 只有在没有打开流的情况下才能删除文件。

# c# - C#增加字符串数组的长度

> ID：11794751
> 
> 赞同：0
> 
> 时间：2012-08-03T11:23:04.127
> 
> 标签：c#, arrays

> **可能重复：**
> [如何在我的锯齿状数组中插入一个新数组](https://stackoverflow.com/questions/11767023/how-to-inset-a-new-array-to-my-jagged-array)

我有一个问题，我不知道如何在数组长度中创建一个字符串数组变量。

我现在下面有这段代码：

```
string[] p = new string[10];
int num = 0;

foreach (Product products in GetAllProducts())
    {
     //do something
     p[num]= "some variable result"
     num++
    } 
```

问题是，我不知道我会得到多少个“p”，虽然我知道它至少会小于 10。但是如果我把它设置为 0，当我启动它时我会得到一个错误，因为它没有不知道“p[num]”所以我正在寻找某种方法使“p”具有可变长度。

有人可以帮帮我吗？谢谢

============已解决==========

```
List<string> p = new List<string>();
int num = 0;

foreach (Product products in GetAllProducts())
    {
     string s= null;
     //do something ( create s out of multiple parts += s etc.)
     p.add(s)
     num++
    } 
```

感谢解决方案海报

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T11:24:45.713

[`List<string>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)如果您不知道需要添加的项目数，请使用 an而不是数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:25:00.693

您的数组长度在实例化后无法修改。使用[ArrayList](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx)或[Generic Lists](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:35:05.423

我看到很多人给了你正确的答案，那就是使用列表。如果你最后仍然需要一个数组，你可以很容易地将你的列表转换成这样的数组：

```
 string[] tempArray = myList.ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:27:40.533

返回什么`GetAllProducts()`？它有计数或长度吗？您应该首先调用它，将其保存在变量中，获取计数/长度，然后声明您的数组！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:27:51.847

有两种解决方案。

如果您想继续使用数组：

```
int num = 0;
var list = GetAllProducts();
string[] p = new string[list.Length]; // Or list.Count if this is a collection

foreach (Product products in list)
{
    //do something
    p[num] = "some variable result";
    num++;
} 
```

否则你应该使用这样的列表：

```
List<string> p = new List<string>();

foreach (Product products in GetAllProducts())
{
    //do something
    p.Add("some variable result");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T11:38:23.960

因为您的代码对 GetAllProducts 的结果使用了 foreach，所以 GetAllProducts 必须返回一个[IEnumerable](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)集合。可能最好的解决方案是将 GetAllProducts 的结果简单地分配给这样的集合。例如，也许它已经返回了一个字符串列表？所以你可以这样做：

```
List<string> strings = GetAllProducts(); 
```

如果您已经从 GetAllProducts 返回了一个集合，则无需使用 foreach 循环来创建数组。

或者简单地说：

```
var strings = GetAllProducts(); 
```

让编译器计算出字符串的类型。

大多数可以用数组做的事情，也可以用 List 做，还有更多（例如将项目添加到 List 的末尾）。

也许您可以发布 GetAllProducts 的签名（尤其是它的返回类型），以便我们更好地为您提供建议？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T11:25:23.627

```
var p = new new List<string>(10);
foreach (Product products in GetAllProducts()) 
{ 
    //do something 
    p.Add("some variable result"); 
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-03T11:32:29.237

使用 Array.Resize() 方法，它允许调整它的大小（通过 n 个索引）。在我的示例中，我将在每一步中按 1 调整：

```
 string[] array = new string[3]; //create array
        for (int i = 0; i < 5; i++)
        {
            if (array.Length-1 < i) //checking for the available length
            {
                Array.Resize(ref array, array.Length + 1); //when to small, create a new index
            }
            array[i] = i.ToString(); //add an item to array[index] - of i
        } 
```

# installation - Word 2003 添加加载失败

> ID：11794753
> 
> 赞同：1
> 
> 时间：2012-08-03T11:23:20.220
> 
> 标签：installation, add-in, word-2003

我使用 Windows XP 上的 Visual Studio 2008 使用 IDTExtensibility2 接口为 Word 2003 标准版开发了一个插件。插件在开发机器上运行良好。不幸的是，安装插件后，它不会加载到客户端计算机上。

症状如下：

1.  安装插件后第一次运行 Word 时，其加载行为在注册表中从 3 更改为 2。将加载行为更改回 3 始终会在下次运行 Word 时将加载行为恢复为 2。

2.  如果您只是在客户端计算机上安装 Visual Studio 2008，则插件开始工作。如果您随后从客户端计算机中删除 Visual Studio 2008，则该插件将不再起作用。

3.  在 Word 外部使用 vbscript 实例化 add in，返回错误代码 0x8013141A。在互联网上查看这似乎主要是由于程序集未正确签名造成的。使用 sn 工具对程序集进行签名会返回程序集不是强命名程序集。

我已经在互联网上查看了许多解决这些问题的可能解决方案，但没有一个解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:29:43.700

下一步是尝试将程序集签名为强名称，微软在此网页上提供了这样做的指南：http: [//msdn.microsoft.com/en-us/library/xc31ft41.aspx](http://msdn.microsoft.com/en-us/library/xc31ft41.aspx)。创建密钥并成功完成该过程后，您可以查看错误是否仍然出现。在开发环境中，许多 dll、程序集和保护设置都已更改，以允许您执行和调试代码。您需要安装带有调试符号的插件版本，以及用于本地代码[的 Windows 调试工具或](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)[MDbg](http://msdn.microsoft.com/en-us/library/ms229861.aspx)或 coredbg（[轻量级 .NET 调试器？](https://stackoverflow.com/questions/163647/lightweight-net-debugger)），以查看您的参考机器上发生了什么。

# msbuild - 如何将 PropertyGroup/ItemGroup 中可变数量的项目传递给 msbuild 脚本

> ID：11794756
> 
> 赞同：4
> 
> 时间：2012-08-03T11:23:21.830
> 
> 标签：msbuild, msbuild-task, msbuild-propertygroup

请阅读，直到我清楚地说明我的问题。我正在尝试实现一个自定义 msbuild 任务，该任务将接受来自 msbuild 脚本的可变数量的输入参数。我知道海关任务中的输入参数数组

```
public ITaskItem[] ArrayofItems { get; set; } 
```

这些可以使用 propertygroup/itemgroup 声明如下

```
<PropertyGroup>
<Item1>1</Item>
<Item2>2</Item>
<Item3>3</Item>
<Item4>4</Item>
<Item5>5</Item></PropertyGroup>

 <ItemGroup>
<File Include="1"></File>
<File Include="2"></File>
<File Include="3"></File>
<File Include="4"></File>
<File Include="5"></File>  </ItemGroup> 
```

然后从VS 2010命令行我可以设置/覆盖属性如下

msbuild somefile.csproj /t:MyTarget /p:Item1=Name1;Item2=Name2...等

我的问题是： - 是否可以在构建文件中声明可变数量的属性组/项目组，以便我可以使用属性组/项目组从 msbuild 命令行中传递“n”个可变参数？

msbuild somefile.csproj /t:MyTarget /p:Item1=Name1;Item2=Name2;ItemN=NameN（'N' 仅用于说明目的）

这甚至可能吗？

在此先感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T18:39:24.767

如果你这样调用你的构建项目......

```
> msbuild My.proj /p:ItemProperty="1;2;3;4;5" 
```

而这个项目就是这样做的......

```
<ItemGroup>
    <FromProperty Include="$(ItemProperty)" />
</ItemGroup>
<Message Text="%(FromProperty.Identity)" /> 
```

...您实际上已将属性转换为项目数组。如果您要转换为动态创建的属性，那么在脚本的其余部分中将没有简单的方法来引用它们，因为在编写脚本时您不会提前知道它们的名称。

摘自[MSBuild Trickery](https://rads.stackoverflow.com/amzn/click/com/061550907X)，技巧 #30，其中包含有关此操作的许多附加详细信息

# sql-server - SQL Server 存储过程的结果类型

> ID：11794757
> 
> 赞同：0
> 
> 时间：2012-08-03T11:23:23.083
> 
> 标签：sql-server, vb.net, entity-framework, stored-procedures

好的，所以我正在调用一个存储过程，但我不确定我的 VB.net 代码将接收什么类型。

这是存储过程：

```
@IDNo varchar(Max)
AS
select a.IDNo,
        p.EMAIL
from person p 
    left join customer a on p.person_id=a.person_id
where (a.IDNo=@IDNo) 
```

到目前为止，这是我的 VB；

```
resultSet = thisDataCxt.sp_GetEmail(IDNo).FirstOrDefault() 
```

我的问题是，resultSet 应该是什么类型？我可以把它做成一个`Object`吗？如果是这样，我如何访问其 IDNo 和 EMAIL 属性。

还需要记住，我正在使用它来查看是否没有返回结果（又名 IDNo 没有匹配）所以我需要测试 resultSet 是否为 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:31:17.350

它将是您将`FunctionImport`sp_getEmail 的结果映射到的任何内容，可能是`ComplexType`. 它本身不会是一个集合，因为您使用的是 FirstOrDefault。

顺便说一句，在你的 SP 前面加上 sp_ 是不好的做法。[http://sqlserverpedia.com/blog/sql-server-bloggers/stored-procedure-performance-using-%E2%80%9Csp_%E2%80%9D-prefix-%E2%80%93-myth-or-事实/](http://sqlserverpedia.com/blog/sql-server-bloggers/stored-procedure-performance-using-%E2%80%9Csp_%E2%80%9D-prefix-%E2%80%93-myth-or-fact/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:47:48.817

为什么不能使用数据集和数据表并将 sp 输出存储在其中。如果数据表的行数超过 0，则尝试通过它迭​​代值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:23:48.213

检查此示例代码。

```
cmd.CommandText = "your proc name";
                    cmd.CommandType = CommandType.StoredProcedure;

                    SqlParameter param1 = cmd.Parameters.Add("@param1", SqlDbType.VarChar, 255);
                    param1.Direction = ParameterDirection.Input;
                    SqlParameter param2 = cmd.Parameters.Add("@param2", SqlDbType.Int, 8);
                    param2.Direction = ParameterDirection.OutPut;
                    cmd.ExecuteNonQuery(); 
```

现在你在@param2 中有你的输出值。

# ruby - Ruby：使用非标准模式加入 ActiveRecord

> ID：11794758
> 
> 赞同：1
> 
> 时间：2012-08-03T11:23:30.327
> 
> 标签：ruby, activerecord, join

我正在努力使表之间的连接在非标准模式上工作。我知道这样做的正确方法是迁移架构并使用 ActiveRecord 约定，但只要我使用它来消耗数据以进行测试，这不是一个选项。

可以使用两个表中都存在的键“AGREEMENT_TYPE_ID”进行连接。

我在模型定义中有以下内容：

```
class Agreements < ActiveRecord::Base
    self.table_name = 'AGREEMENTS'
    self.primary_key = 'AGREEMENT_ID'
    has_one :Agreement_Types, :foreign_key => 'AGREEMENT_TYPE_ID'
end

class Agreement_Types < ActiveRecord::Base
    belongs_to :Agreements
    self.table_name = 'AGREEMENT_TYPES'
    self.primary_key = 'AGREEMENT_TYPE_ID'
end 
```

这是实例化：

```
puts Agreements.joins(:Agreement_Types) 
```

这是输出：

```
C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/inheritance.rb:111:in     `compute_type': uninitialized constant Agreements
::AgreementTypes (NameError)
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/reflection.rb:172:in `klass'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/associations/join_dependency/join_association.rb:40:in `initialize'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/associations/join_dependency.rb:152:in `new'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/associations/join_dependency.rb:152:in `build_join_association'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/associations/join_dependency.rb:115:in `build'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/associations/join_dependency.rb:123:in `block in build'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/associations/join_dependency.rb:122:in `each'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/associations/join_dependency.rb:122:in `build'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/associations/join_dependency.rb:18:in `initialize'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/relation/query_methods.rb:358:in `new'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/relation/query_methods.rb:358:in `build_joins'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/relation/query_methods.rb:266:in `build_arel'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/relation/query_methods.rb:260:in `arel'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/relation.rb:171:in `exec_queries'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/relation.rb:160:in `block in to_a'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/explain.rb:25:in `logging_query_plan'
        from C:/tools/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/active_record/relation.rb:159:in `to_a'
        from C:in `to_ary'
        from prueba.rb:29:in `puts'
        from prueba.rb:29:in `puts'
        from prueba.rb:29:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:38:05.677

我找到了一个可行的解决方案：

```
class AgreementType < ActiveRecord::Base
    self.table_name = 'AGREEMENT_TYPES'
    self.primary_key = 'AGREEMENT_TYPE_ID'
    belongs_to :Agreement
end

class Agreement < ActiveRecord::Base
    self.table_name = 'AGREEMENTS'
    self.primary_key = 'AGREEMENT_ID'
    has_one :AgreementType, :primary_key => 'AGREEMENT_TYPE_ID', :foreign_key => 'AGREEMENT_TYPE_ID'
end 
```

# c# - Listview 显示冗余数据

> ID：11794761
> 
> 赞同：0
> 
> 时间：2012-08-03T11:23:39.843
> 
> 标签：c#, listview, redundancy

我有以下代码，我在其中将数据添加到列表视图，但最终在其中包含冗余项目。请让我知道我哪里错了

```
 private void button2_Click(object sender, EventArgs e)
    {
        listView1.Items.Clear();
        StreamReader sr = new StreamReader("C:\\sample.txt");
        string s;
        s = sr.ReadLine();

        while (s != null)
        {
            s = sr.ReadLine();
            var m = Regex.Match(s, @"^([a-zA-Z._]+)@([\d]+)");

            if(m.Success)
            {
                allcont ac = new allcont();
                ac.name = m.Groups[1].Value;
                ac.number = m.Groups[2].Value;
                con.Add(ac);
                foreach (allcont aa in con)
                {
                    ListViewItem i = new ListViewItem(new string[] { aa.name, aa.number });
                    i.Tag = aa;
                    listView1.Items.Add(i);
                }
                s = sr.ReadLine();
            }
        }
        sr.Close();
    }
    contacts con = new contacts();
    public class contacts:List<allcont>
    { 

    }
    public class allcont
    {
        public string name;
        public string number;
    }
} 
```

我的**sample.txt**有这个：

```
wer@123

erty@098

sdf@645

ytu@432 
```

**更新**：这是我的列表视图显示的数据：

```
name number    
wer  123
wer  123
erty 098
wer  123
erty 098
sdf  645
wer  123
erty 098
sdf  645
wer  123
erty 098
sdf  645
ytu  432 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:32:41.637

我猜你会得到类似的东西

```
wer@123

wer@123
erty@098

wer@123
erty@098
sdf@645

wer@123
erty@098
sdf@645
ytu@432 
```

原因：你这里有问题

```
allcont ac = new allcont();
ac.name = m.Groups[1].Value;
ac.number = m.Groups[2].Value;
con.Add(ac);
foreach (allcont aa in con)
{
     ListViewItem i = new ListViewItem(new string[] { aa.name, aa.number });
     i.Tag = aa;
     listView1.Items.Add(i);
 } 
```

因为您在 while 循环中执行此操作。（您`con`在每个循环中将内容添加到列表中，然后在 while 循环中循环这个“增量列表”）。

所以你应该移动“内循环”

```
foreach (allcont aa in con)
    {
         ListViewItem i = new ListViewItem(new string[] { aa.name, aa.number });
         i.Tag = aa;
         listView1.Items.Add(i);
     } 
```

在 while 循环之外（在 之后`sr.Close`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:46:11.257

```
con.Add(ac);
                foreach (allcont aa in con)
                {
                    ListViewItem i = new ListViewItem(new string[] { aa.name, aa.number });
                    i.Tag = aa;
                    listView1.Items.Add(i);
                } 
```

您在每场比赛中迭代完整的 con 集合
摆脱内部循环

```
allcont ac = new allcont();
ac.name = m.Groups[1].Value;
ac.number = m.Groups[2].Value;
con.Add(ac);

ListViewItem i = new ListViewItem(new string[] { ac.name, ac.number });
i.Tag = aa;
listView1.Items.Add(i); 
```

# java - SLF4J isDebugEnabled 有时在未启用时返回 true

> ID：11794766
> 
> 赞同：0
> 
> 时间：2012-08-03T11:23:46.357
> 
> 标签：java, slf4j, websphere-6.1

`isDebugEnabled`即使未启用，我也会遇到返回 true 的间歇性问题。它位于集群的 WAS 6.1 环境中。[问题是在 spring 模块验证 0.9（错误报告](https://jira.springsource.org/browse/MOD-466)）中暴露了 NPE 。我可以尝试重新编译验证 jar，但宁愿找到问题的根源。我检查了服务器的管理控制台，但没有启用运行时调试设置。为什么会发生这种情况？

# regex - 正则表达式匹配多行 C 函数调用

> ID：11794771
> 
> 赞同：1
> 
> 时间：2012-08-03T11:24:13.020
> 
> 标签：regex

我正在努力组合一个正则表达式来匹配如下的函数调用：

```
funcname (...(..
    ...)..(..(...
    )...)..) 
```

因此该函数可以有多个括号内的参数分布在多行上。

点可以是任何来自 '(' 或 ')' 的东西。

我会将正则表达式与 sed 或 grep 一起使用。

谢谢，里斯托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:46:16.060

所以，我继续用 bash 编写这个简单的解析器。它并不完美，但可以作为一个起点。例如，它无法区分函数调用是否被注释掉等。

```
while read file; do
    linenum=0
    while IFS= read -r line; do
        (( linenum++ ))
        if [ $fmatch -eq 0 ]; then
            if [[ ! $line =~ $funcname ]]; then
                continue
            fi
            linenummatch=$linenum
            fmatch=1
            fstripped=0
            openbracket=0
            closebracket=0
            spacenum=0
        fi

        linelen=${#line}
        position=0
        while [ $position -lt $linelen ]; do
            if [ $fstripped -eq 0 ]; then
                subline=${line:$position}
                mlen=`expr "$subline" : "$funcname"`
                if [ $mlen -gt 0 ]; then
                    (( position+=mlen ))
                    resultstr=$funcname
                    fstripped=1
                    continue
                fi
                (( position++ ))
                continue
            fi
            ch=${line:$position:1}

            case $ch in
                '(' )
                    (( openbracket++ ))
                    spacenum=0
                    newresultstr="$resultstr$ch"
                    ;;

                ')' )
                    if [ $openbracket -eq 0 ]; then
                        fmatch=0
                        break
                    fi
                    (( closebracket++ ))
                    spacenum=0
                    newresultstr="$resultstr$ch"
                    if [ $closebracket -eq $openbracket ]; then
                        echo "$file $linenummatch $newresultstr"
                        fmatch=0
                        break
                    fi
                    ;;

                ' ' | '\t' )
                    if [ $spacenum -eq 0 ]; then
                        newresultstr=$resultstr' '
                    fi
                    (( spacenum++ ))
                    ;;

                '\n' )
                    # line feeds are skipped
                    ;;
                * )
                    if [ $openbracket -eq 0 ]; then
                        fmatch=0
                        break
                    fi
                    spacenum=0
                    newresultstr="$resultstr$ch"
                    ;;
            esac
            resultstr=$newresultstr
            (( position++ ))
        done
    done < $file
done < $filelist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:24:11.343

由于 C 是一种[不规则语言](http://en.wikipedia.org/wiki/Regular_language)，因此您可能需要一个[解析器](http://en.wikipedia.org/wiki/Parsing)。当所有开括号再次关闭时，您将遇到的问题是。你可以用 C 做一些相当奇怪的事情。例如，你可以有一个参数，它本身就是一个函数定义。例如，考虑在以下程序中如何区分 a()、b()、c()、d()、e()、f() 和 g()？

```
#include <stdio.h>

#define f(c) c;

char a()
{
    return f('z');
}

/*
A function in a comment.
char b()
{
    return 'y';
}
*/

char c(char d()) 
{
    return d(); 
}

#if 0
This code is not included
char g()
{
    return 'v';
}
#endif

void main()
{
    printf ("A function in a string: char e() { return 'x'; }\n");
    printf ("The result from passing a to c: %c\n", c(a));
    printf ("Press enter to exit");
    getchar();
} 
```

我已经看到很多尝试用正则表达式做这种事情，但大多数都以[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)问题告终。

# c# - 使用 2 个 Get 方法重载 WebAPI 控制器

> ID：11794773
> 
> 赞同：4
> 
> 时间：2012-08-03T11:24:37.613
> 
> 标签：c#, .net, asp.net-web-api

我有带有 2 种操作方法的 webapi 控制器，如下所示：

```
public List<AlertModel> Get()
{
    return _alertService.GetAllForUser(_loginService.GetUserID());
}

public AlertModel Get(int id)
{
    return _alertService.GetByID(id);
} 
```

但是，当我向我提出请求时，`api/alerts`出现以下错误：

> 参数字典包含“ekmSMS.Web.Api.AlertsController”中方法“ekmSMS.Common.Models.AlertModel Get(Int32)”的不可为空类型“System.Int32”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。

我在中设置了以下路线`global.asax`：

```
routes.MapHttpRoute("Api", "api/{controller}/{id}", new { id = UrlParameter.Optional }); 
```

这种类型的重载应该有效吗？如果应该我做错了什么？

**编辑**

虽然这个问题是关于 WebAPI 的，但控制器是 MVC3 项目的一部分，这些是另一个`MapRoutes`：

```
routes.MapRoute("Templates", "templates/{folder}/{name}", new { controller = "templates", action = "index", folder = "", name = "" });    
routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "app", action = "index", id = UrlParameter.Optional }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T12:40:36.560

问题是您使用`UrlParameter.Optional`（这是一种 ASP.NET MVC 特定类型）而不是`RouteParameter.Optional`. 如下更改您的路线，然后它应该可以工作：

```
GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    "Api",
    "api/{controller}/{id}",
    new { id = RouteParameter.Optional }
); 
```

# android - Android中的活动或片段？

> ID：11794784
> 
> 赞同：4
> 
> 时间：2012-08-03T11:25:10.240
> 
> 标签：android

我正在创建一个带有操作栏的应用程序，并且标签会转到不同的网页。当用户单击不同的选项卡时，我希望以前的选项卡网页保持相同的状态（即再次按下选项卡时不重新加载）。

最好的方法是什么？分开活动？碎片？一项活动中的多个网络视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:30:40.063

使用 ActionBar 中的选项卡，它允许您使用 Fragments。更改选项卡时，Fragment 将替换，之前的 Fragment 将保留其内容。

请参阅[操作栏 - 添加导航选项卡 | 安卓开发者](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:33:08.880

我认为您必须使用一个 webview 并在本地[存储](https://stackoverflow.com/questions/7598273/how-i-can-save-webview-contents-to-show-even-when-no-network-available)每个页面的内容，例如在 DB 中，然后为自己制作一些导航栏并通过导航栏重新加载您的 webview 内容。例如，导航栏可以像带有 Buttons 子项的 LinearLayout 一样组织。如果您使用这种方式 - 例如，您可以在家中使用 Wi-Fi 下载 10 个网页，然后最小化您的应用程序并出去散步，一段时间后（即使您使用其他应用程序）您可以从DB，但是如果您只在选项卡中使用片段，您可能会因为内存不足而丢失页面。

如果您在选项卡中使用 Fragments 或 atcitvities - 您无法确定是否会保存以前的内容（但您仍然可以通过适配器和 tabhost 来完成（有足够多的示例如何使用 Fragments + tabs）

PS。这只是我的意见，我还没有尝试过，但我认为本地商店是解决您问题的最佳方式。

# facebook - 用户在接受我的应用邀请时收到 404 - 为什么？

> ID：11794800
> 
> 赞同：0
> 
> 时间：2012-08-03T11:26:30.907
> 
> 标签：facebook

在 Facebook 上创建 iOS 应用后，我尝试向 FB 用户发送应用邀请。但是，邀请会将他们定向到 URL [http://www.facebook.com/apps/application.php?id=175116205946673](http://www.facebook.com/apps/application.php?id=175116205946673)，这只是一个 404 页面。

我尝试将应用程序连接到社区页面，希望邀请将他们发送到那里，但没有运气。该应用程序未处于沙盒模式。

我以前见过这个问题，但没有解决方案对我有用。我无法告诉邀请将用户定向到我的社区页面、我的应用中心页面或只是我的 iTunes 商店页面 - 因为我不知道如何在邀请中手动设置目标 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:31:35.773

去`Facebook Developer Apps center`，

确保这`175116205946673`是您的应用 ID，并检查：

1.你的申请在吗？（不是沙箱）

2.您的申请是否获得授权？

# html - 如何自定义 Yahoo Messager Link 图片

> ID：11794802
> 
> 赞同：0
> 
> 时间：2012-08-03T11:26:32.683
> 
> 标签：html, css

如何自定义在 Yahoo! 中使用的图像（在线/离线）信使链接。

```
<a href="ymsgr:sendim?UserID"><img src="http://opi.yahoo.com/online?u=USERID&amp;m=g&amp;t=2" border="0" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:32:19.563

让服务器端脚本请求图像。确定它是哪一个。发回您选择的图像。

您不能在客户端执行此操作（没有找到要调用的不同 Yahoo! API），因为尝试将被同一来源策略阻止。

# actionscript-3 - As3Iso：为什么要使用辅助显示列表？

> ID：11794806
> 
> 赞同：2
> 
> 时间：2012-08-03T11:27:18.523
> 
> 标签：actionscript-3, flash, isometric

我正在移植 as3iso 以与我的抽象显示列表一起使用，但我看不到作者决定使用辅助显示列表（节点层次结构）的原因。除了能够获得显示对象的子数组之外，我无法想到这样做的必要性。对于（i in 0...numChildren）getChildAt 与获取 children 数组，性能真的有那么大吗？这也可以通过在覆盖时维护子数组来缓解。

唯一的另一个原因是 flash.display.DisplayObject 的某些属性是最终的，并且希望 x 和 y 与 isoX/isoY 相关，但 worldX/worldY 是一个合理的 API。

我对辅助显示列表没有任何问题，但我看不到重点，我倾向于让我的 iso 显示对象从我的 DisplayObject 扩展。

另外，我曾假设 Flash 不需要标记不在屏幕上或 scrollRect 之外的对象可见 = false，并且通常在渲染中，因为这是/应该在渲染器级别处理？flash软件渲染器是这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:07:55.397

对于最后一个问题，设置它很有用，`visible=false`因为这样渲染器可以快速跳过该对象，而无需计算它是否在屏幕矩形内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:03:27.563

这样库不依赖于渲染系统。您可以使用传统的 Flash 显示列表、Stage3D 或自定义解决方案。

# asp.net-mvc-3 - 如何在升级到新版本的 nopCommerce 时保留自定义？

> ID：11794808
> 
> 赞同：0
> 
> 时间：2012-08-03T11:27:21.813
> 
> 标签：asp.net-mvc-3, nopcommerce, affiliate

我正在开发 NopCommerce 2.60，并通过添加两个新字段（如“WebsiteURL”和“图片上传”）扩展了 NopCommerce 2.6 中的附属模块。

为此，我对`Affiliate Services`, `Affiliate Controller`, `Affiliate.cs`, `Affiliate Map`,`Affiliate Model`文件进行了更改。现在，如果我想将这些更改集成到即将发布的 NopCommerce 版本中。

那么有什么更好的方法来更改 NopCommerce 代码并轻松集成到即将发布的 NopCommerce 版本中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:37:48.660

我最近对此进行了调查，因为我们公司希望确保 nopCommerce 可以在以后根据需要进行升级。我们找到的最好的解决方案是把我们的修改变成插件，这样我们就可以尽可能地避免修改核心。[就像 Shivkumar 说的那样，做 nopCommerce升级证明](http://blog.csharpwebdeveloper.com/2011/09/27/cheat-sheet-for-effectively-extending-nopcommerce/)是不可能的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:53:38.640

nopcommerce 无法在更高版本中升级自定义功能。相反，我建议您独立于 nop 运行意味着为所有附属功能编写单独的类，将其复制到下一个版本中，正如您在 nopcommerce2.65 中看到的那样，它们更改了一些服务、属性名称。

# android - 错误：找不到与给定名称匹配的资源：attr 'abBackground'

> ID：11794809
> 
> 赞同：1
> 
> 时间：2012-08-03T11:27:24.433
> 
> 标签：android, actionbarsherlock

我正在使用`ActionBarSherlock`，并且想为 ActionBar 和它下面的内容视图使用自定义背景。当我尝试这个时，背景会填满整个屏幕，包括操作栏：

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="android:windowBackground">@drawable/background</item>
</style> 
```

因此，从[这个答案](https://stackoverflow.com/a/9162297/675383)中，我尝试添加`abBackground`到主题中：

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="android:windowBackground">@drawable/background</item>
    <item name="abBackground">@drawable/bg_button_idle</item>
</style> 
```

但是，我得到了错误

> 错误：找不到与给定名称匹配的资源：attr 'abBackground'。

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T11:36:30.690

以下是更改操作栏背景的方法：

```
<style name="MyTheme" parent="Theme.Sherlock">
    <item name="actionBarStyle">@style/MyActionBar</item>
    <item name="android:actionBarStyle">@style/MyActionBar</item>
</style>

<style name="MyActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="background">@drawable/your_custom_drawable</item>
    <item name="android:background">@drawable/your_custom_drawable</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:36:24.257

//没有abBackground

```
 <item name="abBackground">@drawable/bg_button_idle</item> 
```

//尝试

```
<item name="android:background">@drawable/bg_button_idle</item> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-01-05T07:51:25.223

如果项目是一个库模块，你应该检查库模块[![在此处输入图像描述](../Images/28a69b714ad51e009748caf31212ba44.png)](https://i.stack.imgur.com/N1wdy.png)

# php - 是否可以获得对 Amazon s3 对象发出的请求的数量（计数）？

> ID：11794810
> 
> 赞同：2
> 
> 时间：2012-08-03T11:27:32.280
> 
> 标签：php, amazon-s3, amazon-web-services

AWS SDK for php 是否支持通过文件名对特定对象发出的获取请求数。只需要找到对特定对象的命中次数的唯一计数。基本上亚马逊计数在存储桶上发出的请求数。只是好奇想知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:44:30.533

S3 不支持这个，所以 PHP SDK 也不支持。亚马逊不会为您计算访问次数。

您需要设置[S3 访问日志](http://docs.amazonwebservices.com/AmazonS3/latest/dev/LoggingHowTo.html)并使用一些东西来分析这些。

# ruby-on-rails-3 - 需要宝石问题

> ID：11794813
> 
> 赞同：0
> 
> 时间：2012-08-03T11:27:37.820
> 
> 标签：ruby-on-rails-3, rubygems

我已经使用以下代码安装了 google api 客户端，并且安装成功。

```
gem install google-api-client 
```

我使用的是 rails 3.0.3，所以我还包含了上面的 line bundler 并运行了 bundle install ，它成功了。

我也安装了rvm。并创建了一个gemset。

当我在终端中运行以下命令时：

```
gem environment | grep INSTALLATION | awk '{print $4}' 
```

它给了我以下结果

```
/home/jamal/.rvm/gems/ruby-1.9.3-p194 
```

当我尝试在项目目录外的 scintilla 中执行以下代码时。它给了我一个错误。

```
require 'rubygems'
require 'google/api_client' 
```

错误：

```
usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- google/api_client (LoadError)
    from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:31:in `require' 
```

这种错误的主要原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:25:14.000

可能的机会是您的编辑器没有加载`gemset`您安装 gem 的特定内容。

`gem list google-api-client -d`请在您的问题中提供输出。这样我就可以弄清楚到底发生了什么。

编辑：通常发生的另一个问题是 ruby​​ 的双重安装。当我们确实有系统级安装和 rvm 安装时，许多编辑对此感到困惑。他们加载了原始系统安装的 ruby​​，这些 ruby​​ 确实有前缀`1.8.7`，`1.9.1`并且在`/usr/share/bin/`. 你在哪里安装了 rvm 配置文件中的 gem。为了克服这个问题，你必须在选择正确的之后从终端运行你的代码`gemset`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T21:50:39.013

我收到了这`google/api_client (LoadError)`条消息，但它涉及另一个 Google gem。

```
gem 'google_drive', '~> 0.3.10'
gem 'google-api-client' 
```

`, '~> 0.3.10'`如果它是兼容性问题，我只是删除了该部分。那成功了：

```
Using google-api-client 0.7.1 (was 0.9.4)
Installing google_drive 1.0.6 (was 0.3.11) 
```

# html - CSS居中与另一个div左侧的div

> ID：11794816
> 
> 赞同：3
> 
> 时间：2012-08-03T11:27:42.110
> 
> 标签：html, css

所以我想要完成的是让一个 div 以页面 ( ) 为中心，并在其左侧`margin: auto auto;`有一个导航。`div`

导航的想法`div`可以打开或关闭（因此可能存在也可能不存在）。如果它存在与否，则不应干扰主 div 的居中。

下面是一个例子

![样机图像](../Images/46def55e59da6030247fd45be5d146ab.png)

我尝试了几件事

*   用主 div 包装两个 div。将主 div 设置为`margin: auto auto`，然后将两个子 div 设置为`float: left`. 问题是，当导航 div 消失时，整个东西都会向左移动。

*   保持中间 div`margin: auto auto;`向左浮动导航 div 然后使用`margin-left`，但是当页面变大或变小时，这会发生变化。

任何指针都会以最好的方式得到赞赏。我希望避免使用桌子。

[JSFiddle 链接](http://jsfiddle.net/GhvhU/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:00:27.437

试试这个：

在您的 html 中：

```
<body>
<div class="encasing">
    <div class="leftmenu"></div>
</div>
</body> 
```

在你的 CSS 中：

```
html, body
{
  width: 100%;
  height: 100%;
}

div.encasing
{
  top: 50px;
  margin-left: auto;
  margin-right: auto;
  width: 70%;
  height: 500px;
  background-color: green;
  position: relative;
}

div.leftmenu
{
  right: 100%;
  width: 10%;
  height: 300px;
  background-color: red;
  position: absolute;
} 
```

重要的部分是：

*   将包含菜单的块*放在*中心块内
*   使中心块有 margin-left: auto; 边距右：自动；
*   使中心块具有相对定位
*   让菜单有绝对定位
*   使菜单正确：100%

这里的想法是让左侧菜单使用中心块的位置，然后自行调整。右：100% 将菜单的右边缘放在菜单的左边缘。

最后，css 中一个非常好的技巧是绝对定位元素相对于最近的相对或绝对定位的父元素调整自己。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:36:35.753

我能想到的几个解决方案：

*   导航 div 使用绝对定位。您可能希望给 body 元素一个最小宽度，以避免在窗口太小时时导航 div 与主 div 重叠。
*   三列布局，例如左右浮动的两个固定宽度的div，以及它们之间的内容div。在左浮动 div 内，显示您的导航 div（或不显示）。或者，尝试`display: inline-block`三列。不同之处在于如何处理小窗口（试试看）。同样，您可以通过在主体上设置最小宽度来消除不良影响。
*   完全固定的布局。决定一个理想的屏幕分辨率，然后对所有内容进行硬编码。这样，您可以将所有内容绝对定位到您想要的位置，但缺点是它在任何偏离预期分辨率的东西上都不会很好看。尤其是移动设备将看到毁灭性的结果；您可以通过查询来应对这些`@media`问题，以将您的布局调整为其他屏幕分辨率。

您还应该尝试找到一个做您想做的事情的网站，并看看他们是如何做到的（检查 HTML、CSS，也许还有 Javascript）。

# node.js - 如何从for循环将mongodb数据异步从内部函数发送到外部回调函数？

> ID：11794821
> 
> 赞同：0
> 
> 时间：2012-08-03T11:28:01.623
> 
> 标签：node.js, mongodb, for-loop, callback

最新帖子：

这是没有数据库的工作异步代码的示例。问题是，如果我用 db.collection.find(); 替换 vars (data1_nodb,...); 函数，最后收到的所有需要​​的 db var 并且 for() 循环结束不正确。我希望这能更好地解释我的问题。办公自动化

```
 var calc = new Array();
        function mach1(callback){               

                            error_buy = 0;                                                  

                            // some vars                            

                            for(var x_c99 = 0; x_c99 < array_temp_check0.length;x_c99++){

                                // some vars                        

                                    calc[x_c99] = new Array();                                      
                                    calc[x_c99][0]= new Array();    

                                    calc[x_c99][0][0] = "dummy1";
                                    calc[x_c99][0][1] = "dummy2";
                                    calc[x_c99][0][2] = "dummy3";
                                    calc[x_c99][0][3] = "dummy4";
                                    calc[x_c99][0][4] = "dummy5";

                                    function start_query(callback) {

                                            data1_nodb = "data1";
                                            data2_nodb = "data2";
                                            data3_nodb = "data3";
                                            data4_nodb = "data4";

                                            calc[x_c99][0][0] = data1_nodb;
                                            calc[x_c99][0][1] = data2_nodb;
                                            calc[x_c99][0][2] = data3_nodb;

                                            callback(data1_nodb,data2_nodb,etc..);

                                    }

                                            start_query(function() {

                                                console.log("start_query OK!"); 

                                                function start_query2(callback) {

                                                data4_nodb = "data5";
                                                data5_nodb = "data6";
                                                data6_nodb = "data7";

                                                calc[x_c99][0][3] = data4_nodb;
                                                calc[x_c99][0][4] = data5_nodb;

                                                callback(data5_nodb,data6_nodb,etc..);

                                            }                                           

                                            start_query2(function() {

                                                console.log("start_query2 OK!");    

                                                    function start_query3(callback) {

                                                        for(...){

                                                                // do something
                                                            }

                                                            callback(vars...);                                              
                                                        }

                                                start_query3(function() {
                                                    console.log("start_query3 OK!");    
                                                });

                                            });
                                        }); 
                                }

                            callback(calc); 

                    };

                    function mach2(callback){

                        mach1(function() {

                            console.log("mach1 OK!");

                            for(...){                                                                                               
                            // do something                                                         
                            }   

                        });         

                        callback(calc,error_buy);

                    };                          

                    mach2(function() {
                    console.log("mach2 OK 2!");                                         
                    }); 
```

旧帖子：

我尝试从 mongodb 读取数据并通过回调将它们发送回下一个函数，该函数需要来自 db 的信息才能继续。

如果没有 mongodb 读取函数，它可以完美运行，但现在我不知道如何将 db vars 从两个内部函数发送到第一个回调函数。

希望有人可以帮助我...谢谢

> 变量错误 = 0; var var1 = "是的";
> 
> 功能启动查询（回调）{
> 
> var db_name = "db1";

```
db[db_name].find({name:var1},{data1:1, data2:1, data3:1, data4:1}, function(err, data_catch,callback) {

    if( err || !data_catch ) {
        console.log("Problem finding data_catch:" + err);

    } else {

        data_catch.forEach( function(data_catch_finder,callback) {

            data1_db = data_catch_finder.data1;
            data2_db = data_catch_finder.data2;
            data3_db = data_catch_finder.data3;
            data4_db = data_catch_finder.data4;

            if(data1_db == "" || data2_db == "" || data3_db == "" || data4_db == ""){error = 1; console.log("Error: data_catch_finder");}

             callback(data1_db, data2_db, data3_db, data4_db, error);

        }); 

    }
});

    callback(data1, data2, data3, data4, error);

}

//########################################################################

 start_query(function() {

     function start_query2(callback) {

         console.log("DATA1 from callback:" + data1_db);
         console.log("DATA2 from callback:" + data2_db);
         console.log("DATA3 from callback:" + data3_db);
         console.log("DATA4 from callback:" + data4_db);

         var var_no_db = "testing";

         //do something else and callback

         callback(var_no_db);

     }

     start_query2(function() {

         console.log("Var from callback start_query2:" + var_no_db);
         console.log("The end");
     });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:18:29.873

您的回调签名`callback`作为参数发出。

据我了解您的代码，您需要保留第一个回调的引用，即您在此处收到的那个：`function start_query(callback)`.

在每个回调函数中，您都错误地将变量名绑定`callback`到来自 mongo 驱动程序的参数（`undefined`我认为这很简单）。

`callback`您可以修复它，从内部函数的签名中删除每个引用。

一个简单的例子：

```
function async (cb) {
  // params: Error, data
  cb(null, 'moo');
}

function foo(callback) {
  async(function(err, data, callback){
    console.log(callback); // undefined
  });

  console.log(callback); // Moo
}

foo('Moo'); 
```

看看[Eloquent Javascript](http://eloquentjavascript.net/chapter3.html)以更好地理解 JS 上下文切换；

* * *

*编辑*

等待异步函数结果的唯一方法是在最后一个嵌套回调中调用第一个回调。

```
function ugly_nested (callback) {
  dbquery('...', function(err, data_01) {
    if (!! err) return callback(err);

    dbquery('...', function(err, data_02) {
      if (!! err) return callback(err);

      dbquery('...', function(err, data_03) {
        if (!! err) return callback(err);

        callback(null, data_01, data_02, data_03);
      });
    });
  });
}

ugly_nested(function(err, data01, data02, data03) {
  if (!! err) throw err;

  manage_data(data01, data02, data03);
}); 
```

循环是同步的`FOR`，但是数据库调用是异步的，因此，for循环将在数据库返回结果之前结束。如果你真的需要那个 for 循环，你可以尝试其中一个不错的[流](https://github.com/caolan/async)[控制](https://github.com/creationix/step)[库](https://github.com/joyent/node/wiki/modules#wiki-async-flow)

# html - CSS中的半动态内容背景

> ID：11794823
> 
> 赞同：0
> 
> 时间：2012-08-03T11:28:04.400
> 
> 标签：html, css, layout

对不起，如果标题不是太具有描述性，但我不知道该怎么说。问题是：

![布局](../Images/9a72852e904f6cf248ee70a217de4d3d.png)

1 和 2 是只包含背景图形的 div，并且具有固定的宽度和高度。

我希望 3 和 4 也包含背景图形，但具有动态高度。这意味着如果内容多，则 3 和 4 会更高，与增加的内容成比例。3 和 4 也应该总是接触页脚。

我知道这很容易，但我很难将 3 和 4 放在它的位置上。为此需要什么 html/css 结构或如何实现？

**添加：**

[基本代码](http://jsfiddle.net/4wERd/)- 在区域 1 和 2 下，应该是区域 3 和 4，无论内容区域的大小如何，都可以将它们与页脚连接起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:57:51.237

~~可能有一种更简单的方法可以做到这一点，但是让一个列向下伸展以匹配兄弟的动态高度是很棘手的，我经常求助于绝对定位。~~

为列制作 3 个 div 以包含 1) 图表的 1 号和 3 号 div，2) 动态内容的 div 以及 3) 图表中的 2 和 4 div。

将这 3 个放在一个 div 中（我给这个一个 id 为“all”）。将 clearfix 样式应用于此容器（样式在我的 CSS 末尾定义）。应用位置：相对于这个 div。您还需要精确设置此容器的宽度以包含三列（必须正确考虑第三个绝对定位的列）

根据您的设计固定 3 列中每一列的宽度，浮动前 2 列。但是，将第 3 列设为 position:absolute。置顶：0px；底部：0px；右：0px；

然后根据你想要的比例用百分比设置里面 2 个 div 的高度。

我的解决方案有很多。所以我把代码保存在 jsfiddle：http: [//jsfiddle.net/feaLC/5/](http://jsfiddle.net/feaLC/5/)

~~调整动态内容区域中的文本数量，看看它是如何工作的。~~

**更新**——根据提问者的澄清完全修改：

我将通过绝对定位左右列来完成此操作，然后将第二个 div 绝对定位在这 2 列中的每一列中以一直延伸到底部：

另见：http: [//jsfiddle.net/feaLC/6/](http://jsfiddle.net/feaLC/6/)

HTML：

```
<div id="header"></div>
<div id="all" >
    <div id="leftCol">
    <div id="left1"></div>
    <div id="left3"></div>
    </div>
    <div id="content">text text text text text text 
            text text text text text text text text text text text text 
            text text text text text text text text text text text text 
            text text text text text text text text text text text text 
            text text text text text text text text text text text text 
            text text text text text 
    </div>
    <div id="rightCol">
    <div id="right2"></div>
    <div id="right4"></div>
    </div>
</div>
<div id="footer"></div> 
```

CSS：

```
#all, #footer, #header{position:relative;width:500px;}
#footer, #header{background:green;height:30px;}

#content{width:300px;padding:0px 100px}

#rightCol, #leftCol{position:absolute;width:100px;top:0px;bottom:0px;}
#rightCol{left:0px;}
#leftCol{right:0px;}

#left1, #right2{background:yellow;height:100px;}
#left3, #right4{background:DarkRed;position: 
        absolute;left:0px;right:0px;bottom:0px;top:100px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:02:17.430

用小 jquery。

```
<html>
    <head>
        <title>div align</title>
        <script src="Script/jquery-1.7.2.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {

                $('.flex').height($('#main').height() - 200);//200 height of 1 or 2 div (assume 1 and 2 div has same height)
            });
        </script>
    </head>

    <body>
        <div style="width:800px; margin:auto;">
            <div style="height:100px; border:1px solid RED">Header</div>
            <div >
                <div  style="width:100px; float:left; border:1px solid pink">
                    <div class="sdiv" style="width:100px; height:200px; border:1px solid RED">div 1</div>
                    <div class="flex" style="border:1px solid Black"> div 3</div>
                </div>

                <div id="main" style="width:590px; float:left; border:1px solid BLUE">
                    dynamic content<br />
                    <br />text
                    <br />
                    <br />
                    <br />text
                    <br />
                    <br />text
                    <br />
                     <br />text
                    <br />
                    <br />text
                    <br />
                    <br />
                    <br />text
                    <br />
                    <br />text
                <div style="clear:both"></div>
                </div>

                <div class="flex" style="width:100px; float:right; border:1px solid pink">

                    <div class="sdiv" style="width:100px; height:200px; border:1px solid GRAY">div 2</div>
                     <div class="flex" style="border:1px solid Black"> div 4</div>

                </div>

                <div style="clear:both"></div>
                <div style="height:30px; border:1px solid GREEN">Footer</div>

            </div>
        </div>
    </body>
</html> 
```

# pdf - BIRT pdf 以 pdf 格式报告打印问题完成

> ID：11794825
> 
> 赞同：0
> 
> 时间：2012-08-03T11:28:06.820
> 
> 标签：pdf, birt

我有一个从 BIRT 报告中导出的 pdf 文件。我尝试在 adobe acrobat 中打开该 pdf 文件并尝试打印它。它打印正确。

但是，当我尝试使用 PDF complete 打开同一个 pdf 文件并打印它时，什么也没有打印出来。但是 pdf 文件以 PDF 格式正确打开。

birt pdf报告是否与使用pdf完整的打印不兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:05:33.617

BIRT 与创建可打印的 PDF 兼容。

这里没有足够的信息来发现用户的特定问题。

正在使用什么版本的 BIRT？

PDF 如何被“导出”（而不是打开为）？

PDF是如何保存的？

# logging - 将来自不同用户会话的日志消息记录到不同的日志文件中

> ID：11794827
> 
> 赞同：0
> 
> 时间：2012-08-03T11:28:08.673
> 
> 标签：logging, log4j, slf4j, usersession

我需要将来自不同用户会话的消息记录到不同的日志文件中。还要滚动 X 天前的日志文件。我怎样才能做到这一点？目前我正在使用 SLF4j 和 Log4j。但我愿意改变我的日志框架。

我尝试使用 SLF4j MDC。但它适用于每个线程。看起来同一个线程正在为不同的用户会话提供服务。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:14:03.593

终于想通了。MDC 是按线程设置的。因此，每次向服务器发出请求时，我们都需要设置 MDC，这可以使用 Servet/Portlet 过滤器来实现。

# apache - Windows 上的 XAMPP - Apache 未启动

> ID：11794829
> 
> 赞同：21
> 
> 时间：2012-08-03T11:28:26.227
> 
> 标签：apache, xampp

我已经在我的 Windows 7 机器上安装了 XAMPP，但无法让 Apache 工作。

开始时我收到以下错误：

```
13:09:21  [apache]  Apache Service Detected With Wrong Path
13:09:21  [apache]  Uninstall the service manually first
13:09:21  [apache]  Possible problem detected! 
13:09:21  [apache]  Port 80 in use by "system"!
13:09:21  [tomcat]  Tomcat Service Detected With Wrong Path
13:09:21  [tomcat]  Uninstall the service manually first 
```

打开 XAMPP 面板并安装 Apache 服务后：我试过启动它，它总是卡在“正在启动 apache 服务...”

关于如何解决这个问题的任何建议？

谢谢贾米尔

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-22T18:14:17.250

我能够解决这个问题！

遇到与上述相同的问题，确保没有使用端口 80 并且仍然无法正常工作，并收到消息说 Apache 和 Mysql 被检测到错误的路径。

我之前确实安装过一次 XAMPP，卸载并重新安装。我什至手动卸载但仍然有问题。

修复。确保先备份系统！

1.  通过控制面板>管理工具启动服务（也可以使用*`Ctrl`+`R`*和`services.msc`）

2.  寻找 Apache 和 MySQL 服务。查看描述中指示的补丁（右键单击服务，然后单击属性）。有可能您列出了两次 Apache，一次来自您的正确安装，另一次来自之前的安装。即使您只看到一个，请查看路径，它很可能来自以前的安装并导致您的安装无法正常工作。无论哪种情况，您都需要删除那些不正确的服务。

    一种。进入命令提示符（以管理员身份运行）：开始>所有程序>附件>右键单击命令提示符>选择“以管理员身份运行”

    湾。在命令提示符下键入`sc delete service`，其中*service*是您要删除的服务，例如 apache2.1 （或`sc delete Apache2.4`）。它应该与您的服务中出现的完全相同。如果服务有空格，如 Apache 2.1，则在引号中输入，即 sc delete "Apache 2.1"

    C。按回车。现在刷新或关闭/打开您的服务窗口，您会看到它消失了。

对 XAMPP 发现以错误路径运行的所有服务执行此操作。

完成此操作后，继续并重新启动 XAMPP 控制面板（以管理员身份），瞧！一切正常。没有冲突

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-22T01:03:02.773

我的朋友，这将解决你的问题；）

在文件夹的根目录 ( xampp ) 只需运行此文件 ( setup_xampp.bat ) 然后按 Enter

并尝试启动 apache 服务器

每件事都会像魅力一样发挥作用；）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T11:34:56.027

最可能的原因是其他东西正在使用端口 80。（通常这可能是 Skype、IIS 等）

本教程展示了[如何在 XAMPP 中更改 Apache 端口](http://complete-concrete-concise.com/web-tools/how-to-change-the-apache-port-in-xampp)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-04T08:29:56.347

我花了三个多小时才找到解决方案。实际上，“系统”服务正在使用端口 80，所以我尝试在“httpd”文件中将端口从 80 更改为 8080，但同样的问题引发了“系统使用端口 80”。它让我发疯了 3 个小时，因为每件事都发生了变化，比如端口、本地主机服务器等指向 8080。

最后我发现错误是服务器根目录。基本上“httpd”中的“服务器根”应该指向xampp的apache foler。就我而言，那是

```
ServerRoot "xampp/apache" 
```

我只是将其更改如下：

```
ServerRoot "C:/xampp/apache" 
```

它已成功运行，现在一切运行正常。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-08T06:18:57.510

参考这个：- [http://www.sitepoint.com/unblock-port-80-on-windows-run-apache/](http://www.sitepoint.com/unblock-port-80-on-windows-run-apache/)

并启用远程登录[http://social.technet.microsoft.com/wiki/contents/articles/910.windows-7-enabling-telnet-client.aspx](http://social.technet.microsoft.com/wiki/contents/articles/910.windows-7-enabling-telnet-client.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-30T13:03:48.587

我在安装 XAMPP v3.2.1 后遇到了同样的问题。我没有大多数人认为的 Skype，但是作为软件开发人员，我认为端口 80 已经被我的其他应用程序使用。所以我通过简单地使用 XAMPP 控制面板对其进行了更改： [![在此处输入图像描述](../Images/1150e81321fe2774af9efb64d15aa4b0.png)](https://i.stack.imgur.com/owiOI.jpg)

单击与 APACHE 服务对应的“配置”按钮，然后选择第一个选项“Apache (httpd.conf)”。在打开的文档中（使用任何文本编辑器 - MS Word 除外！），找到文本：

> 听 12.34.56.78:80
> 
> 听 80

并将其更改为：

> 听 12.34.56.78:83
> 
> 听 83

这可以是任何未使用的端口号。谢谢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-02T18:19:09.063

我知道这是一个老话题，但万一将来有人读到这个……

我卸载了 xampp，删除了 c:\xampp 文件夹下的所有内容，然后以管理员身份重新安装了 xampp，它就像一个魅力。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-26T19:00:47.977

对我来说，问题是我安装了两个 Apache Tomcat

以下步骤解决了我的问题：

1.  在命令提示符下打开 services.msc
2.  选择Apache Tomcat服务，右键选择属性
3.  检查服务可执行文件的路径
4.  按照 [https://stackoverflow.com/questions/7190480/modifying-the-path-to-executable-of-a-windows-service](https://stackoverflow.com/questions/7190480/modifying-the-path-to-executable-of-a-windows-service "在 Windows 中更改服务的可执行路径") 中的说明将路径更改为**"\tomcat\bin\tomcat7.exe" // RS //Tomcat7**
5.  重启 XAMPP 控制面板

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-10T05:02:15.170

我的 Apache 服务与 MySQL 服务不同。如果以上提示均无效，请按照以下步骤操作：

1.  在任何可用的窗口上打开 regedit.exe。以管理员身份运行。（仅适用于 Windows 7 及更高版本）
    2.  转到本地机器/system/controlset001/services
    3.  查找并删除服务 apache 和 mysql 的文件夹。
    4.  卸载 xampp 。删除xampp的文件夹。
    5.  重新启动计算机并重新安装 Xampp 。之后你的 Xampp apache 和 Mysql 应该可以工作了。

* * *

```
Note: Ports 80 and 443 must be unused by any program. 
      If it is in use . Just edit ports. There is a lot of tutorials about that . 
```

# jquery - JQuery mobile：重绘整个页面

> ID：11794831
> 
> 赞同：1
> 
> 时间：2012-08-03T11:28:33.387
> 
> 标签：jquery, jquery-mobile, cordova

我在可能的 JQuery mobile \ phonegap 应用程序中有一些动态布局。我在`iframe`. `iframe`里面很正常 当我在android手机布局打开它时，布局中断，但在oreinetation改变布局后变得正常。因此，我阅读了与事件相关的 JQuery 移动代码，`orientationchange`但没有发现任何有用的东西。如何强制 android\jquery mobile 像 after 一样重绘页面`orientationchange`。我试过`$page.trigger( "create");`等等，但没有帮助

## 更新

```
<script lang="javascript">
    function calcBlockSizes() {
        $.each($('[data-role=page]'), function(i, page){
            $page = $(page);
            var bodyfixed = $page.find(".bodyfixed");
            var topfixed = $page.find(".topfixed:first");
            var bottomfixed = $page.find(".bottomfixed:first");
            if ($(".topfixed").length > 0) {
                bodyfixed.css("top", topfixed.outerHeight() + 'px');
            } else {
                bodyfixed.css("top", "0px");
            }
            if ($(".bottomfixed").length > 0) {
                bodyfixed.css("bottom", bottomfixed.outerHeight() + 'px');
            } else {
                bodyfixed.css("bottom", "0px");
            }
            $page.trigger( "create");
        });

    }
    $(window).load(function() {
        calcBlockSizes();
    });
    //$(document).delegate('.ui-page', 'pageshow', function () {
    //    calcBlockSizes();
    //});
</script> 
```

问题是`topfixed`div 看起来`css("top", "0px");`与底部不一样。他们处于不正确的位置——价值观`top`和`bottom`价值观有问题。但我不知道如何在 phonegap 应用程序中测试它。

# java - JAXB 解组期间的默认类字段值

> ID：11794833
> 
> 赞同：1
> 
> 时间：2012-08-03T11:28:46.930
> 
> 标签：java, xml, jaxb

如果在 JAXB 解组期间 xml 文件中的某些类字段没有值，会发生什么情况？JAXB 只是“省略”了这个值并让它们未初始化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:32:36.897

他们将被初始化。

将设置字段的初始值，并且还将运行无参数构造函数。

例如：

```
class AClass {

    private int x = 5;
    private int y = 16;
    private Object object;

    public AClass() {
        this.x = 100;
    }

    // getters and setters
    // ...

} 
```

如果 xml 中 x、y、z 和 object 的值被省略，则值为：

x：100（构造函数在字段值初始化后运行） y：16（从字段值初始化） object：null（如果没有给定值，则对象初始化为 null）

# debugging - 在 GE 客户端调试 KML

> ID：11794835
> 
> 赞同：4
> 
> 时间：2012-08-03T11:28:56.197
> 
> 标签：debugging, kml, google-earth

使用 Google Earth 6.2.2.6613 客户端和 KML 文件，我需要进行调试。

我遇到 GE 报告我的 KML 文件发出“无效的 HTTP 请求”并显示有问题的 URL 的情况。

我可以将 URL 剪切并粘贴到 Web 浏览器中，它会返回预期的结果。

所以问题是“如何从 GE 客户端获得有用的调试信息？”

例如“无效的 HTTP 请求”？如何 ？什么无效？GE 客户端是否运行/有调试日志或模式？

我使用的是 Windows 7 Professional 64bit，但将来我需要测试其他版本（Mac OS X）。

虽然 Web 代理（或我自己的全球服务器）可以让我查看 http 流量，但我需要查看 GE 客户端中的请求之间发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:55:44.483

Google 地球本身不会记录它在内部所做的事情，也没有调试模式来启用此类记录。您可以在工具/选项/常规菜单中启用“ *KML 错误处理*”，这可能会提供有关无效 KML 的更多信息，但最好使用[KML Validator](http://www.kmlvalidator.com/%E2%80%8E)之类的工具来验证 KML 。

因此，调试 Google 地球 HTTP 访问的最简单方法是使用网络分析器（例如 Fiddler Web Debugger）来识别网络流量。

Fiddler 作为 HTTP 代理运行并捕获显示完整 HTTP 请求和响应信息的所有 Web 访问。只需单击“*捕获流量*”，然后启动 Google 地球即可捕获所有 HTTP 流量。

您可以捕获 HTTP 会话，其中包含对*kh.google.com、mw1.google.com、khmdb.google.com、mw2.google.com 等*的点击，以及完整的 URL、请求和响应的 HTTP 标头等。多视图、过滤、解码、定时信息等有很多选项。您会看到所选图层被下载为 KMZ 文件。

```
Sample Web session

Result Port  Host            URL
200    HTTP  kh.google.com   /geauth?ct=free
200    HTTP      Tunnel to www.google.com:443
200    HTTP      Tunnel to accounts.google.com:443 
200    HTTP  kh.google.com   /flatfile?q2-0-q.534
200    HTTP  mw1.google.com  /mw-earth-vectordb/photos/360cities/360cities.kmz
200    HTTP  mw1.google.com  /mw-weather/base/files/kml/weather_en.kmz
... 
```

调试后，您可以停止 Fiddler，它将 HTTP 代理设置恢复正​​常。

我使用这个工具可以快速了解 Google 地球在幕后所做的事情。它易于使用且非常友好。

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

# c - 如何将 sizeof 运算符应用于函数指针并初始化结构？

> ID：11794837
> 
> 赞同：0
> 
> 时间：2012-08-03T11:29:12.840
> 
> 标签：c, pointers, struct

以下代码生成错误： 在编译时声明和初始化用户结构变量的行上，*初始化元素不是常量。*

```
#include <stdio.h>
#include <stdlib.h>

struct user_s {
    char *name;
    void (*(*pred_skip_func))(int);
};

void f1 (int skip) {
    printf("I am f1\n");
}

void f2 (int skip) {
    printf("I am f2\n");
}

void (*(*pred_skip_func))(int);
struct user_s user = {"Manu", pred_skip_func};

int main(void) {

    struct user_s tmp;
    pred_skip_func = malloc(sizeof(tmp.pred_skip_func) * 2);
    pred_skip_func[0] = f1;
    pred_skip_func[1] = f2;

    int i;
    for (i = 0; i < 2; i++) {
        (*(user.pred_skip_func)[i]) (i);
    }
    return EXIT_SUCCESS;
} 
```

在主函数中移动初始化可以解决问题，但我想了解为什么？对结构初始化有任何限制吗？

此外，如您所见，我创建了一个 tmp user_struc 变量来获取指向函数指针的指针的大小，因为我无法以更简洁的方式执行此操作。我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:32:51.263

第一个问题：

“结构初始化有什么限制吗？”

C 要求具有静态存储持续时间的聚合类型的初始值设定项保持不变：

> （C99，6.7.8p4）“具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。”

请注意，在 C89 中，即使聚合类型的对象具有自动存储持续时间，初始化程序也必须是常量表达式（在 C99 中不再是这种情况）。

第二个问题：

“此外，如您所见，我创建了一个 tmp user_struc 变量来获取指向函数指针的指针的大小，因为我无法以更简洁的方式执行此操作。”

您可以使用您的`user`对象来计算成员的大小：

```
sizeof (user.pred_skip_func) 
```

如果您没有声明任何结构类型的对象，则使用 C99 复合文字：

```
sizeof (((struct user_s) {0}).pred_skip_func) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:38:17.473

正如@ouah 指出的那样，问题在于这`pred_skip_func`不是一个恒定值。编译器抱怨是因为`user`具有静态存储持续时间，这意味着它的按位表示将在链接时“烘焙”到可执行映像中。为了让链接器知道这个表示，for 的值`pred_skip_func`必须是一个常数。

但是，您可以很容易地为 struct 成员指定一个“合理的默认”常量值：

```
struct user_s user = {"Manu", 0}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T12:44:54.910

你可以`typedefs`像下面这样寻找函数指针。

```
typedef void (*pfunc_type)(int); 

struct user_s 
{     
    char *name;     
    pfunc_type *pred_skip_func; 
}; 

.....

int main (void)
{
    .....
    pred_skip_func = (pfunc_type *)malloc(sizeof(pfunc_type) * 2); 
    .....
} 
```

这将增加程序的可读性。

# clearcase - 使用 Cleartool 查找版本并删除它

> ID：11794839
> 
> 赞同：2
> 
> 时间：2012-08-03T11:29:17.897
> 
> 标签：clearcase

我正在尝试从特定分支中递归删除一些版本/文件。

`find`提供正确的文件。现在需要`rmver`删除版本，但这给了我一个错误。我在语法上苦苦挣扎。

```
cleartool> find Component\Test -element "brtype(P_Testing_device)" -exec "rmver -f \"%CLEARCASE_PN%@@\main\G_Testing_device\P_Testing_device\LATEST\""
cleartool: Error: Extra arguments: "%CLEARCASE_PN%@@\main\G_Testing_device\P_Testing_device\LATEST\" 
```

那有什么问题？您将如何从分支中递归删除版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:59:24.160

如果可以避免的话，首先不要这样做。[`rmver`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_rmver.htm)，正如我在“[如何在 ClearCase 远程客户端中撤消签入](https://stackoverflow.com/a/4259212/6309)”中解释的那样，是非常危险的。
如果您将超链接附加到要删除的版本（明确地来自 ClearCase），例如合并链接（使用 UCM 传递或变基链接），您可能会遇到许多“悬空超链接”，这是不好的。

其次，我会先尝试：

```
find Component\Test -element "brtype(P_Testing_device)" -exec 'rmver -f "%CLEARCASE_PN%@@\main\G_Testing_device\P_Testing_device\LATEST"' 
```

排除弱引用与强引用的任何问题（如“[`CLEARCASE_XPN`在 clearcase 命令中未解析为变量](https://stackoverflow.com/a/11429466/6309)”）

如果这不起作用，我建议找到所有正确的版本并将它们放入一个文件中，然后将该文件的内容通过管道传输到`cleartool rmver`.

* * *

一条更安全的路线是到`cleartool lock -obs`分支，使其不可修改且对于未来的版本树不可见。

# wordpress - 在 CodeIgniter 控制器中调用 WP 插件函数

> ID：11794841
> 
> 赞同：0
> 
> 时间：2012-08-03T11:29:31.297
> 
> 标签：wordpress, codeigniter

我正在使用**WP Super Cache**插件并想调用`wp_cache_post_change( $post_id )`CodeIgniter 控制器，但我不知道我能做到，请帮助... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:07:38.940

好的，我解决了我的问题。我只包含 WP 函数存在的确切文件路径，然后调用。:)

# unix - 查找命令以使用忽略大小写查找 Zip 文件

> ID：11794842
> 
> 赞同：1
> 
> 时间：2012-08-03T11:29:31.860
> 
> 标签：unix, find

有人可以告诉我如何使用 Find 命令查找扩展名为 Zip、ZIP、zip 的文件。? 寻找 。-iname *.zip 在 AIX 中对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:48:48.277

您需要在模式匹配部分周围使用引号。所以

```
find . -iname '*.zip' 
```

会做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:48:47.850

假设您的 shell 支持字符类作为其通配符处理的一部分，大多数人都这样做，请尝试

```
find . -name '*.[Zz][Ii][Pp]' 
```

`-iname`? 我不知道那个。

是的，对不起，您需要一个起始目录，在这种情况下是“。” 您已标记为失踪。

我希望这有帮助。

# jquery - li 附加到现有的 ul 但旧功能不再起作用

> ID：11794847
> 
> 赞同：1
> 
> 时间：2012-08-03T11:29:57.067
> 
> 标签：jquery, html-lists, append

我有`ul`一些`li`。在`li`一个有一个`button`。当我单击它时，它会显示一条消息。当我尝试做这样的事情时：`$("#myUl").append("<li> <div id="click">Click</div></li>");` 它不适用于添加的新 li ！你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:35:37.283

您可能需要使用该[`on()`](http://api.jquery.com/on/)函数将函数绑定到 parent `<ul>`，而不是`<li>`本身

因此，如果您正在使用：

> $('li').click(function(){});

你应该使用

> $('ul').on('click','li',function(){});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:36:25.130

我假设您的意思是新链接在添加到 DOM 后不起作用。如果是这种情况，您应该使用类似的东西

```
$('ul li').on('click', '#click', function() {
    // Handle here
}); 
```

[在http://api.jquery.com/on/](http://api.jquery.com/on/)阅读有关 on() 处理程序的信息

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T11:41:14.147

如果您将附加内容，则您的功能将完美运行，如果您将使用 jquery，则在此之后为功能：[$.on](http://api.jquery.com/on/)

喜欢 `$("ul").on("events",function(){
  $(this).to_be_fired_event();
});` 

因为`< li >`标签是动态添加的。

# ios - 编译时链接错误

> ID：11794849
> 
> 赞同：0
> 
> 时间：2012-08-03T11:30:00.457
> 
> 标签：ios, xcode, build, compilation, linker

我有 iOS 应用程序，当我尝试构建我的项目时，XCode 给我这个错误：

```
linker command failed with exit code 1 (use -v to see invocation) 
```

发生了什么？我应该如何解决这个问题？

错误：

```
ld: duplicate symbol _OBJC_CLASS_$_TrackInfo in /Users/Development/Library/Developer/Xcode/DerivedData/turbomusic-ezqahcxcowedlgaylyjxqdieywsn/Build/Intermediates/turbomusic.build/Debug-iphonesimulator/turbomusic.build/Objects-normal/i386/PlayerView.o and /Users/Development/Library/Developer/Xcode/DerivedData/turbomusic-ezqahcxcowedlgaylyjxqdieywsn/Build/Intermediates/turbomusic.build/Debug-iphonesimulator/turbomusic.build/Objects-normal/i386/turbomusicAppDelegate.o for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:43:50.333

`turbomusicAppDelegate.m`并且`PlayerView.m`都声明了一个名为`TrackInfo`. 这可能是因为您在两个文件（或它们包含的头文件）中都有该类的实际副本，或者您`TrackInfo`在不使用包含保护的情况下包含了两个文件中包含的头，在这种情况下，最好使用`#import`指令而不是`#include`一个指令，因为编译器确保在您使用`#import`.

# javascript - JavaScript 中的逗号运算符：预期语法错误，但代码运行正常

> ID：11794850
> 
> 赞同：0
> 
> 时间：2012-08-03T11:30:14.760
> 
> 标签：javascript, syntax, comma

我刚刚在我的一个微不足道的网络应用程序中修复了一些错误，并偶然发现了一些有趣的行。我不记得为什么我按照以前的方式实施这些线路。现在我将它们更改为“正常”语法，一切都很好。我的问题只是出于好奇：为什么该方法完全有效？我预计会出现语法错误，但事实并非如此。代码确实有效。

这是旧的方法实现：

```
ListFillFilter: function(list){
    if (OC.Shorty.Debug) OC.Shorty.Debug.log("using 'default' method to filter filled list");
    // only makes sense for default OC.Shorty list
    var data=new Array();
    data['sum_shortys']=$('#desktop #list-of-shortys tbody tr').length;
    data['sum_clicks']=0;
    $('#desktop #list-of-shortys tbody tr').each(function(){
        data['sum_clicks']+=parseInt($(this).attr('data-clicks'),10);
    });
    OC.Shorty.WUI.Sums.fill.apply(OC.Shorty.Runtime.Context.ListOfShortys,[data]),
    // filter list
    OC.Shorty.WUI.List.filter.apply(this,[list,'target',list.find('thead tr#toolbar th#target #filter').val()]),
    OC.Shorty.WUI.List.filter.apply(this,[list,'title', list.find('thead tr#toolbar th#title #filter').val()]),
    OC.Shorty.WUI.List.filter.apply(this,[list,'status',list.find('thead tr#toolbar th#status select :selected').val()])
    // sort list
    $.when(
        OC.Shorty.Action.Preference.get('list-sort-code')
    ).done(function(pref){
        OC.Shorty.WUI.List.sort(list,pref['list-sort-code']);
    })
}, // OC.Shorty.Runtime.Context.ListOfShortys.ListAddInsert 
```

在中间，您会看到 5 行都以“OC.Shorty.WUI.Sums.fill.apply”开头。这些行以逗号 (",") 结束，而不是分号 (";")。为什么这没有显示为语法错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:37:46.600

基本上，[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)将多个表达式组合在一起，它们表示*最后一个*表达式的值。在您的情况下，您也可以省略它。

想象一下你有这样的代码：

```
1
2
3 
```

这是完全有效的 JavaScript 代码。这些数字只是用来表示三个任意表达式。

如果您要执行以下操作：

```
var expression_value = 1
2
3 
```

`expression_value`将具有价值`1`。

如果您使用逗号运算符和括号：

```
expression_value = (1,
2,
3) 
```

它将具有 value `3`，因为逗号运算符从最右边的表达式返回值。

如果您不使用任何括号，则将**隐含**以下括号：

```
implied = ((expression_value = 1),
2,
3) 
```

`expression_value`然后将具有 的值`1`，但`implied`（即*整个*表达式）现在将具有 3 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:37:58.600

此语法使用逗号运算符`,`. 它评估其所有操作数并返回最后一个操作数的值。

使用这种编码风格的原因是他们可以快速或在一行上执行代码。这是一个例子：

```
var a = 0,
    b = 1,
    c;

c = ( a++, b++, a + 2 ); // a is incremented, b is incremented, then c is assigned a + 2

a; // 1
b; // 2
c; // 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:41:23.227

逗号操作符标记一个序列；**JS仅**在需要使代码可解析时才在行尾插入额外的 ';' 。因此，像这样的代码

```
alert("hi"),
alert("there"),
alert("bob") // no semi-colon here 
```

完全有效 - 它被理解为

```
alert("hi"),
alert("there"),
alert("bob"); // notice the semi-colon 
```

而不是（非法的）

```
alert("hi"),;
alert("there"),;
alert("bob"); 
```

不过，依赖自动插入分号被认为是[不好的风格](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml?showone=Semicolons#Semicolons)。

# jquery - jQuery 可排序占位符位置（索引）

> ID：11794854
> 
> 赞同：2
> 
> 时间：2012-08-03T11:30:39.970
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我想在可排序占位符中显示可排序元素位置（或索引）。它在拖动第一个元素时起作用，而不是与其他元素一起使用（位置 0 而不是 1）。

请查看：http: [//jsfiddle.net/upsidown/Hw2rJ/](http://jsfiddle.net/upsidown/Hw2rJ/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-08T19:45:49.007

我正在寻找类似挑战的解决方案，并找到了这个[http://forum.jquery.com/topic/sortable-show-placeholders-position-and-give-it-a-number](http://forum.jquery.com/topic/sortable-show-placeholders-position-and-give-it-a-number)并稍作调整（和更正) 得到它的工作

```
$('.elements-sortable').sortable({
    placeholder: 'sortable-placeholder',
    opacity: 0.6,
    helper: 'clone',
    sort: function(event,ui){
        $(ui.placeholder).html(Number($('.elements-sortable > div:visible').index(ui.placeholder)+1));
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:47:43.950

可能是因为它在您拖动元素之前附加了新元素

所以让我们试试这段代码

```
var position;
$(".elements-sortable").sortable({

placeholder: "sortable-placeholder",
opacity: "0.6",

start: function(event, ui) {

    position = position = Number($(".elements-sortable > div:not(.ui-sortable-helper)").index(ui.placeholder)+1);
    $(".sortable-placeholder").html('Drop me at position ' + position);

},

change: function(event, ui) {
    position = position = Number($(".elements-sortable > div:not(.ui-sortable-helper)").index(ui.placeholder)+1);
    $(".sortable-placeholder").html('Drop me at position ' + position);
}
}); 
```

我已经在[jsFiddle上测试过了](http://jsfiddle.net/Hw2rJ/6/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-04T06:31:14.923

[在jsFiddle](http://jsfiddle.net/z315l/C8a2r/)上试试这个

```
$(".connectedSortable").sortable({
    connectWith: ".connectedSortable",
    stop: function (e,ui ) {
        $("body").append("<p> current position : " + $(ui.item).prevAll().length + "</p>");
    }
}); 
```

# java - Java继承：抽象类中的“铸造”变量为静态

> ID：11794862
> 
> 赞同：0
> 
> 时间：2012-08-03T11:31:08.330
> 
> 标签：java, inheritance, static, abstract

我正在寻求减少我的 Android 项目中的冗余代码。让我告诉你我已经拥有的东西。

我有两大主要观点。一种称为 MapView，它是一个包含可以缩放、平移等的位图的 View。另一种称为 StepInfoView，它是一个包含静态数据的 View，例如坐标数组和有关这些坐标的信息。此视图也以与 MapView*相同的方式进行*缩放和平移，但是，缩放因子和平移量需要独立于 MapView。

StepInfoView 扩展了几个不同的类（总共 6 个），所有这些都需要同步（坐标绘制在一个上，坐标之间的线绘制在另一个上，等等）。

所以，这是我的代码的要点，目前：

```
public class MapView extends View
{
    protected float scale = 1;

    protected class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener
    {
        @Override
        public boolean onScale(ScaleGestureDetector detector)
        {
            scale *= detector.getScaleFactor());
            return true;
        }

    }

    }
... 

public class StepInfoView extends View
{
    static protected float scale = 1;
    protected class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener
    {
        @Override
        public boolean onScale(ScaleGestureDetector detector)
        {
            scale *= detector.getScaleFactor());
            return true;
        }

    }
}
...
public class StepView extends StepInfoView
{  
    // Custom onDraw, same scale as PathView
}
public class PathView extends StepInfoView
{
    // Custom onDraw, same scale as StepView
} 
```

如您所见， onScales 是*相同*的。我想创建一个抽象类来保存缩放功能，我们称之为 RootView。MapView 和 StepInfoView 都有比例，但我不能在 RootView 中使比例成为静态，因为 MapView 比例必须独立于 StepInfoView。这是我知道可行的解决方案，但我不喜欢 getter 和 setter 的混乱：

```
abstract class RootView extends View
{
    abstract protected float getScale();

    abstract protected void setScale(float s);
    protected class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener
    {
        @Override
        public boolean onScale(ScaleGestureDetector detector)
        {
         setScale(getScale() * detector.getScaleFactor());
         return true;
        }
    }
}
...
public class MapView extends RootView
{
    public float scale = 1;
    protected float getScale(){
        return scale;
    }

    protected void setScale(float s){
        scale = s;
    }
}

public class StepInfoView extends RootView
{
    public static float scale = 1;
    protected float getScale(){
        return scale;
    }

    protected void setScale(float s){
        scale = s;
    }
}
public class StepView extends StepInfoView
{  
    // Custom onDraw, same scale as PathView
}
public class PathView extends StepInfoView
{
    // Custom onDraw, same scale as StepView
} 
```

这正是我希望它工作的方式，但再一次，有重复的相同代码（getter 和 setter 以及 MapView 和 StepInfoView 中的“比例”变量）。

我希望我能做的是在 RootView 中声明一个非静态比例并在 StepInfoView 中将其“转换”为静态。这完全不可能……

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:35:00.200

一个浮点数大约需要 4 个字节。拥有另一个类将使用比这更多的内存。由于对象通常是 8 字节对齐的，因此它甚至可能不会使对象更小。

如果您想避免复杂性，我会将字段保留为非静态。

你可以有

```
class RootView {
    protected final float[] scale;

    RootView() {
        scale = new float[] { 1.0f };
    }

    protected RootView(float[] scale) {
        this.scale = scale;
    }

    public boolean onScale(ScaleGestureDetector detector) {
        scale[0] *= detector.getScaleFactor();
        return true;
    }
}

class StepInfoView extends RootView {
    static final float[] scale = { 1.0f };

    StepInfoView() {
        super(scale);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:37:05.333

将 scale 字段移动到 listener，并提供 get 和 set。

在视图中，保留对侦听器的引用，以便您可以访问比例。

对于 MapView，为每个视图实例注册不同的侦听器，以便它们具有不同的比例。

对于 StepInfoView，为每个视图实例注册相同的侦听器，以便它们具有相同的比例。您可以将侦听器的引用存储在静态字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:34:49.983

为什么不将`scale`字段移入`RootView`课堂？

更新：刚刚得到它。我认为有一个聚合的地方：为 stepinfo`scale`值创建一些对象容器，并通过 StepInfoView 传递。

无论如何，我认为最简单的方法是使用吸气剂。

# c# - 如何从泛型中获取布尔值作为返回对象

> ID：11794866
> 
> 赞同：4
> 
> 时间：2012-08-03T11:31:26.320
> 
> 标签：c#, linq

我有这样的结构。

```
 public class ExportStructure
    {
        public string issueid { get; set; }
        public string filename {get;set;}
        public bool export { get; set; }
    }
public class ExportStructureManager
    {
        public List<ExportStructure> ExportIntoStructure { get; set; }
        public ExportStructureManager()
        {
            this.ExportIntoStructure = new List<ExportStructure>();
        }
        public ExportStructure AddToStructure(string issueid,string filename,bool exportornot)
        {
            ExportStructure expstr = new ExportStructure();
            expstr.issueid = issueid;
            expstr.filename = filename;
            expstr.export = exportornot;

            this.ExportIntoStructure.Add(expstr);
            return (expstr);
        }
        public bool GetStatusFromStructure(string issuekey)
        {
          return (from p in ExportIntoStructure
                where p.issueid == issuekey
                select p.export));
        }
    } 
```

从上面的一个，我想执行`GetStatusFromStructure`它应该返回我的`export`财产状态。对于那个我是这样写的。但它给出了错误

> 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“bool”

在`select p.export` 如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T11:33:25.727

问题是您的查询是检索*一系列*值`bool`- 每个记录与您的过滤器匹配。大概你只期待一个结果，所以你可以使用`Single`：

```
return (from p in ExportIntoStructure
        // I assume you meant == rather than =
        where p.issueid == issuekey
        select p.export).Single(); 
```

但是，如果有多个结果或根本没有结果，您还应该考虑您想要发生的事情。选项包括：

*   `Single`
*   `SingleOrDefault`
*   `First`
*   `FirstOrDefault`
*   `Last`
*   `LastOrDefault`

哪一个是合适的取决于您希望在这些情况下的行为是什么。

您可能还想考虑将其设为非查询表达式：

```
return ExportIntoStructure.Where(p => p.issueid == issuekey)
                          .Select(p => p.export)
                          .Single(); 
```

甚至先匹配单个对象，然后投影：

```
return ExportIntoStructure.Single(p => p.issueid == issuekey)
                          .export; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:33:26.693

变更声明

```
return (from p in ExportIntoStructure
            where p.issueid = issuekey
            select p.export)); 
```

到

```
return (from p in ExportIntoStructure
            where p.issueid == issuekey
            select p.export)).Single(); 
```

但要确保 issuekey 存在，否则会抛出异常。或尝试其默认值。

```
return (from p in ExportIntoStructure
            where p.issueid == issuekey
            select p.export)).SingleOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:35:11.027

在查询结束时添加 FirstOrDefault 匿名方法。

```
return (from p in ExportIntoStructure
            where p.issueid = issuekey
            select p.export)).FirstOrDefault(); 
```

FirstOrDefault（或SinlgeOrDefault()）匿名方法好，如果没有结果，它会返回null，如果你会使用onoy First或Single，如果没有值，就会抛出错误！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:36:55.630

把函数改成这样：

```
 public bool GetStatusFromStructure(string issuekey) 
    { 
        return (from p in ExportIntoStructure 
                where p.issueid = issuekey 
                select p.export).FirstOrDefault()); 
    } 
```

但请注意，如果没有匹配，它将是布尔默认值，即 false。

# windows - 从 Linux 在远程 Windows 上运行 bat 文件

> ID：11794867
> 
> 赞同：1
> 
> 时间：2012-08-03T11:31:28.223
> 
> 标签：windows, linux, batch-file

我正在处理持续集成过程，我正在为我的 Jenkins 使用 Linux 平台，但现在我需要在远程 pc（Windows）上运行 bat 文件来启动自动化测试处理并发送报告。有没有可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:32:39.063

在该窗口上运行另一个 jenkins 实例并使用远程触发插件来触发 bat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T21:05:42.313

这种方法有一点学习曲线，但我建议在 Windows 机器上安装 Cygwin。Cygwin 的许多 UNIX 软件端口之一是 SSH 守护程序。这是在 Windows 上安装 sshd 的非常详细的教程：http: [//inside.mines.edu/fs_home/gmurray/HowTo/sshNotes.html](http://inside.mines.edu/fs_home/gmurray/HowTo/sshNotes.html)。在 Linux 上运行 SSH 客户端应该很容易。

然后你会运行这样的东西： ssh windowsuser@windowsbox 'c:\path\script.bat'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:04:57.980

您可以使用 NodeLabel 参数插件 + 参数化触发器插件在一台或多台 Windows 机器上运行作业。要在所有机器上并行启动作业，请阅读[此页面](https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin#NodeLabelParameterPlugin-BuildParameterFactory)

# c# - 在动画页面过渡时开始加载

> ID：11794869
> 
> 赞同：2
> 
> 时间：2012-08-03T11:31:32.667
> 
> 标签：c#, windows-phone-7, xaml, microsoft-metro, loading

Metro 设计语言（对不起，Windows 8 风格的 UI）的基本设计原则之一是运动原则。造成这种情况的原因之一是在动画运行时可能会发生加载。好想法。

现在，您应该如何在动画运行时加载任何内容（例如，从 REST 服务器或隔离存储）？我想在相关页面开始“in”转换之前这是不可能的，但是我如何在动画开始时就开始加载呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:56:00.193

根据我检查的内容（Contructor，Page_Loaded，OnNavigatedTo），构造函数首先被调用，Page_Loaded 最后被调用。在构造函数中启动异步加载任务可能会起作用。

我想到的另一个想法是在调用 Naviagte 到页面之前启动 AsyncTask。如果您想在应用程序的起始页面上执行此操作，我会尝试在 App 构造函数中开始加载。

# wpf - 样式覆盖

> ID：11794872
> 
> 赞同：0
> 
> 时间：2012-08-03T11:31:48.007
> 
> 标签：wpf, xaml, styles

我为我的按钮（宽度、高度、对齐方式）编写了一种新样式，但我也使用 ExpressionDark 样式，并且当我使用 MY 样式时，例如：

```
<Style x:Key="MyButtonStyle" TargetType="{x:Type Button}">
...
<Button Style="{StaticResource MyButtonStyle}" /> 
```

...它覆盖了 ExpressionDark 样式：/如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:33:28.050

[`BasedOn`](http://msdn.microsoft.com/en-us/library/system.windows.style.basedon.aspx)`="{StaticResource {x:Type Button}}"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:33:37.863

您可以使用[BasedOn](http://msdn.microsoft.com/en-us/library/system.windows.style.basedon.aspx)属性来扩展现有样式。

```
 <Style x:Key="Style1">
   <Setter Property="Control.Background" Value="Yellow"/>
 </Style>

 <Style x:Key="Style2" BasedOn="{StaticResource Style1}">
    <Setter Property="Control.Foreground" Value="Blue"/>
 </Style> 
```

# javascript - 与 iframe 交互 - 获取选定的 HTML

> ID：11794876
> 
> 赞同：1
> 
> 时间：2012-08-03T11:32:10.623
> 
> 标签：javascript, jquery, asp.net, html

我真正需要的是像 Firebug 中的 hover-element 这样的功能，我们可以在其中获取选定的 HTML。

在我们的程序中，我们将加载一个 URL，该 URL 将在 iFrame 中打开。这里我们想要悬停元素，当用户点击某个元素时，我们想要那个特定元素的 HTML 源代码。

所以：

*   您可以与 iFrame 交互（获得悬停的 html），从而获得选定的 HTML 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:53:21.723

这是你想要的东西。它将在一个名为 sourcecode 的 div 中运行。

但是，如果需要，您可以将源代码 div 放在 iframe 中。

```
<div class="sourceCode">
</div>
<script type="text/javascript">
    (function ($) {
        $.fn.outerHTML = function () {
            return $(this).clone().wrap('<div></div>').parent().html();
        }
    })(jQuery);

    $(document).ready(function () {
        $("p,div").click(function () {

            var thisobject = this;
            var sourcecodes = $(thisobject).outerHTML();
            sourcecodes = htmlEscape(sourcecodes);
            $(".sourceCode").html(sourcecodes);

        });

    });

    function htmlEscape(str) {
        return String(str)
        .replace(/&/g, '&amp;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:40:36.047

短版：没有。

实际上，您可以在 iframe 中运行的唯一脚本是 iframe 中加载的页面中的那些脚本。

如果你想做这样的事情，有办法，但它也不漂亮。您可以使用 ajax 请求来解析 iframe 中的页面，然后将其加载到您的页面中。或者，您可以编写一个服务器端脚本来重新创建整个 iframe 页面，然后将您的界面添加为覆盖。

这些都不漂亮。责备网络钓鱼者、抓取工具和垃圾邮件发送者。

# c# - 生成 wsdl 时出现问题

> ID：11794884
> 
> 赞同：0
> 
> 时间：2012-08-03T11:32:30.253
> 
> 标签：c#, wcf

我在使用 xml 命名空间为我的服务生成 WSDL 时遇到了问题。这是我的情况。

我有 3 个 xsd，并从中生成了一个对象图。该对象，可以说 Payload 是我的服务调用的参数，如下所示：

```
interface IService
{
  bool SendRequest(Payload payload)
} 
```

我的 Payload 类具有如下属性：

```
 [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
        [System.SerializableAttribute()]
        [System.Diagnostics.DebuggerStepThroughAttribute()]
        [System.ComponentModel.DesignerCategoryAttribute("code")]
        [System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://company.com/schema/series/2")]
        [System.Xml.Serialization.XmlRootAttribute("Payload", Namespace = "http://company.com/schema/series/2",
            IsNullable = false)]    
public class Payload
{
} 
```

现在，当我查看我的 wsdl 时，它引用了有效负载类的 c# 命名空间。如何使用准确的模式命名空间生成正确的 wsdl？此 wsdl 被提供给外部，系统与 java 客户端互操作。

谢谢，-迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:49:31.343

您需要将有效负载标记为`DataContract`

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://company.com/schema/series/2")]
[System.Xml.Serialization.XmlRootAttribute("Payload", Namespace="http://company.com/schema/series/2",IsNullable = false)]   
[DataContract] 
public class Payload
{
} 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms733127.aspx](http://msdn.microsoft.com/en-us/library/ms733127.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:31:13.063

采用

```
[DataContract(Name="...", Namespace="http://company.com/schema/series/"] 
```

# c - 如何使用 scanf 函数读取特殊字符（标点符号、连字符、冒号）？

> ID：11794885
> 
> 赞同：4
> 
> 时间：2012-08-03T11:32:31.013
> 
> 标签：c, character, special-characters, scanf

我写了一小段代码，可以从键盘输入地址。但是，我无法弄清楚如何才能阅读特殊字符，例如连字符、冒号等。您能否建议对下面的代码进行一些编辑：

```
#include<stdio.h>

main()
{
       char address[80];

       printf("Enter address: ");
       scanf("%[a-z | A-Z | 0-9]", address); //How may I include characters like hypen.
       printf("\n\n%s\n\n", address);
} 
```

我得到的输出：

```
Enter Address: Plot No - 16, Palm Grooves, Nagpur - 440022, India

Plot No 
```

没有逗号，没有连字符，没有显示数字。

感谢您的帮助和评论。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T11:35:24.990

将它们一一添加到可接受的字符列表中，如下所示：

```
"%[a-z | A-Z | 0-9/,.-]" 
```

这是[ideone 上的这个例子](http://ideone.com/FVmIB)。

由于您使用`scanf`的是有限大小的缓冲区，因此最好向格式说明符添加大小约束以避免缓冲区溢出：

```
char address[81]; // One extra character for padding
printf("Enter address: ");
scanf("%80[a-z | A-Z | 0-9/,.-]", address); // %80 limits the input
printf("\n\n%s\n\n", address); 
```

# java - 通过变量 JSF 访问数据

> ID：11794889
> 
> 赞同：0
> 
> 时间：2012-08-03T11:32:42.233
> 
> 标签：java, jsf, jsf-2, xhtml, icefaces

我有一个带有支持 bean 的 xhtml 文件，我想动态创建一个表。我能够动态创建列，但我如何才能访问**项目**变量的**标题**属性。我的意思是，如果**标题**变量中有“Stock”字符串（所以这将是列的标题），那么我如何访问**item.stock**数据？

XHTML：

```
 <ice:dataTable value="#{tableBean.carInventory}" var="item">                    
                <ice:columns value="#{tableBean.showableCols}" var="headings">                                        
                    <f:facet name="header">
                        <h:outputText value="#{headings}"/>
                    </f:facet>
                    <ice:outputText value="#{item.?????headings??????}"/>
                </ice:columns>
            </ice:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:38:35.850

所以我不能接受评论，所以我必须写一个，答案是使用：`#{item[headings]}`，感谢**eljunior**

# javascript - 淘汰 ko.observableArray 不刷新视图

> ID：11794893
> 
> 赞同：0
> 
> 时间：2012-08-03T11:32:48.660
> 
> 标签：javascript, knockout.js

代码可以在[这里](http://jsfiddle.net/yaroslavya/k79qc/26/)找到 当我初始化 observableArray 并调用 ko.applyBindings 时，它运行良好。但是对视图模型的任何其他更改都不会显示在 ui 上。我正在向 observableArray 添加另一个对象，并且敲除不会在网格中呈现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:43:01.083

当您推送到 observableArray 时，您希望`push`直接调用 observableArray 本身，而不仅仅是底层数组。

所以，你会想打电话：

`Categories.push`而不是`Categories().push`.

observableArrays 包含许多数组函数的包装器，这些函数将对底层数组执行操作并通知任何订阅者。

# css - 在jquery mobile中更改li的高度

> ID：11794897
> 
> 赞同：0
> 
> 时间：2012-08-03T11:33:05.960
> 
> 标签：css, jquery-mobile, html-lists

我正在尝试更改 li 元素的高度，但没有运气。我已经尝试过[这里](https://stackoverflow.com/questions/8838212/setting-listview-li-height-in-jquery-mobile "这里")给出的解决方案，但它只是不起作用！我正在使用 jQM 1.1.1 版。列表视图是动态生成的。以下是代码：

```
$('.eventInfoBox').append(' <div id="eventInfoBoxContents"> \
   <div data-role="fieldcontain"> \
      <label>Target Item: </label> \
      <ul data-role="listview" data-inset="true" id="targetItemUL">\
          <li class="ui-li"><img style="width:20px;height:20px;margin-top: 3px;margin-left: 3px;" id="targetImage" src="images/products.jpg" /> \
             <div style="padding-left: 5px;"> \
                <h3>Testing</h3> \
             </div> \
          </li> \
     </ul> \
   </div> \
').trigger('create'); 
```

我添加的 CSS 如下：

```
#targetItemUL > li .ui-li {
    height : 30px;
} 
```

有人可以在这里帮助我并告诉我我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:48:11.093

修复了问题！Arpit 接受了您的建议并使用萤火虫进行了检查。问题是最小高度属性。jQM css 将其设置为 60px 并且必须被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:36:10.153

您`li` *的 is ，但您当前的选择器* *在*LI 中`.ui-li`查找`.ui-li`元素。改变

 *```
#targetItemUL > li .ui-li 
```

到

```
#targetItemUL > li.ui-li 
```*

# php - PHP：扩展类是否需要另一个“使用”来调用命名空间？

> ID：11794901
> 
> 赞同：21
> 
> 时间：2012-08-03T11:33:25.163
> 
> 标签：php, class, inheritance, namespaces, extend

我想知道在我扩展一个上面已经有'use'关键字的类以使用特定命名空间的情况下 - 我是否需要在继承类之上添加另一个'use'才能使用相同的命名空间？像这样的情况：

```
namespace Core;

use System\Plugin;

class Front extends Application { } 
```

现在在 Controller 中，它在没有命名空间的情况下直接调用（使用完整路径）：

```
use System\Plugin;

class PageController extends Front { } 
```

或者它是否也可以在没有“使用”的情况下工作并允许我使用 System\Plugin 命名空间：

```
class PageController extends Front { } 
```

?

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-03T11:36:05.613

不，您需要两个文件中的“使用”语句。使用是文件级关键字，不受继承影响。

请参阅[导入的范围规则](http://php.net/manual/en/language.namespaces.importing.php)和描述我在手册页底部所说内容的小框。

# php - 使用 MS sql 数据库时出现日志错误

> ID：11794904
> 
> 赞同：0
> 
> 时间：2012-08-03T11:33:27.037
> 
> 标签：php, sql-server-2008, logging, error-handling

我编写了一个连接到 ms sql db 并执行一些插入/更新的 php 页面/脚本。可能会发生错误，所以我想将它们记录到文件中。

当前版本的日志记录功能是：

```
function logMsSqlError($fileStream){
        fwrite($fileStream, "Error: ".mssql_get_last_message()."\n");
        fwrite($fileStream,urldecode(http_build_query( error_get_last()))."\n" );
} 
```

它的用法如下：

```
 $res = mssql_query($q, $dbhandle);
        if(!$res) {
                logMsSqlError($fh);
                fclose($fh);
                die("query failed");
        } 
```

问题是，当出现错误时，我会在网页中看到很多有用的信息：

```
"Warning: mssql_query(): message: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Test1". 

The conflict occurred in database "testDb", table "dbo.testTable", column 'TestColumn'. (severity 16) in /var/www/html/sms/utilities.php on line 31 

Warning: mssql_query(): General SQL Server error: Check messages from the SQL Server (severity 16) in /var/www/html/sms/utilities.php on line 31 

Warning: mssql_query(): Query failed in /var/www/html/sms/utilities.php on line 31" 
```

在日志文件中，我无法捕获所有这些详细信息。现在我得到：

```
Error: The statement has been terminated.
type=2&message=mssql_query(): Query failed&file=/var/www/html/sms/utilities.php&line=31 
```

如何在日志文件中获取浏览器错误中的详细信息？（网页中的详细信息来自哪里？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:39:47.390

您有两个选择：您可以`log_errors`在[php.ini](http://php.net/manual/en/errorfunc.configuration.php)中打开或使用[set_error_handler](http://www.php.net/manual/en/function.set-error-handler.php)函数将您自己的日志记录系统与 PHP 错误处理程序集成。

# floating-point - Lua检查变量的类型是否为float

> ID：11794907
> 
> 赞同：2
> 
> 时间：2012-08-03T11:33:29.267
> 
> 标签：floating-point, lua

如何检查变量的类型是否为浮点数？Float 不是 Lua 中值的基本类型，所以函数 type() 只返回*number*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:47:35.777

Lua 中的所有数字都是浮点数¹。您可以通过使用来判断一个数字*表示*具有非零小数部分的数字[`math.modf`](http://lua-users.org/wiki/MathLibraryTutorial)。

* * *

¹除非 lua 的代码本身是用一个标志编译的，指示它使用整数而不是浮点数，在这种情况下你根本不能在你的程序中使用浮点数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-28T15:49:29.197

math.type() 告诉您数字是浮点数还是整数。它仅在 Lua 5.3 上可用

请参阅数学函数的 Lua 5.3 参考手册 [https://www.lua.org/manual/5.3/manual.html#6.7](https://www.lua.org/manual/5.3/manual.html#6.7)

# iphone - 由于 uiimageview 导致应用程序崩溃

> ID：11794911
> 
> 赞同：0
> 
> 时间：2012-08-03T11:33:46.743
> 
> 标签：iphone

我有一个应用程序，我在其中显示大约 50 张图像，当我达到第 30 张图像时，我的应用程序由于内存问题而崩溃。我已经尝试了所有我知道的方法，但仍然没有解决问题。所以请帮助我。

```
NSLog(@"%d",nn);
nn ++;
NSLog(@"%d",nn);
NSMutableArray* arr2 = [[NSMutableArray alloc]init];
arr2 = [Database executeQuery:@"select * from cartoon"];
if (nn == [arr2 count]) 
{
    nn = 0;
}
NSMutableDictionary*  dict1 = [arr2 objectAtIndex:nn];
NSLog(@"%@",dict1);              
NSString * both_name = [NSString string];
both_name = [both_name stringByAppendingString:[dict1 objectForKey:@"mainpk"]];
both_name = [both_name stringByAppendingFormat:@".  "];
both_name = [both_name stringByAppendingString:[dict1 objectForKey:@"name"]];
NSLog(@"both %@",both_name);
label1.text = both_name;
imgv.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@.jpg",[dict1 objectForKey:@"name"]]];  ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:31:18.430

代码**[dict1 objectForKey:@"mainpk"]**没有返回字符串。

**代码中的错误：**

在下面的行中，您正在创建没有键的字典。

```
NSMutableDictionary*  dict1 = [arr2 objectAtIndex:nn]; 
```

然后通过无效键访问字符串。

```
[dict1 objectForKey:@"mainpk"]]; 
```

将无效值附加到字符串

```
[both_name stringByAppendingString:[dict1 objectForKey:@"mainpk"]]; 
```

这会崩溃:)

**这将起作用：**

```
NSMutableDictionary*  dict1 =  [[ NSMutableDictionary alloc ] initWithCapacity: 0];

[dict1 setObject: @"test" forKey: @"mainpk"];
[dict1 setObject: @"test1" forKey: @"name"];    

NSString * both_name = [NSString string];
both_name = [both_name stringByAppendingString:[dict1 objectForKey:@"mainpk"]];
both_name = [both_name stringByAppendingFormat:@".  "];
both_name = [both_name stringByAppendingString:[dict1 objectForKey:@"name"]];
NSLog(@"both %@",both_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:42:42.347

您正在尝试将 50 张图像加载到内存中并且不希望遇到麻烦？它们的文件大小有多大？

最好只在需要/显示时加载图像。尝试将实际图像与图像信息（名称、大小等）分开并将它们加载到您的系统中，也许显示一些占位符。然后，当您显示特定图像时，将实际图像加载到您的内存中并显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:53:50.277

你不能一次加载那么多图片。内存不够。

1.  仅加载您正在显示的内容
2.  不要让你的图片比你需要的大（如果你需要某种预览，请使用小缩略图）
3.  不要使用 imageNamed: ，它会缓存图像并吃掉内存。使用 imageWithFile: 代替。

# c# - 如何在我的保存按钮旁边以及经过验证的控件旁边显示 ASP.NET 验证消息？

> ID：11794915
> 
> 赞同：1
> 
> 时间：2012-08-03T11:34:02.340
> 
> 标签：c#, asp.net, .net, validation, customvalidator

当用户单击页面上的“保存”按钮时，我正在使用 asp CustomValidator 对一些控件执行客户端验证。但是，此页面很长，因此他们经常看不到验证失败的控件旁边显示的验证消息。如何在“保存”按钮旁边也放置一条常规验证消息，例如“请解决上述验证错误”，以便用户知道页面未提交的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:35:29.843

您可以使用[验证摘要](http://msdn.microsoft.com/en-us/library/dd5c6s6h%28v=vs.71%29.aspx)控件，您可以将其放在保存按钮附近，它将提供所有无效验证控件的摘要。

您可以使用以下规则定义它：

```
<asp:ValidationSummary 
     id="programmaticID" 
     DisplayMode="BulletList | List | SingleParagraph" 
     EnableClientScript="true | false"
     ShowSummary="true | false"
     ShowMessageBox="true | false"                        
     HeaderText="You need to resolve the following issues before you are able to continue:"
     runat="server"/> 
```

# python - 为什么 Python 会自我显式化？

> ID：11794918
> 
> 赞同：11
> 
> 时间：2012-08-03T11:34:26.957
> 
> 标签：python

为什么 Python`self`在每个参数列表中都需要一个显式参数？

例如在文档中给出的类 Complex

```
class Complex: 

    def __init__(self, realpart, imagpart):
        self.r = realpart
        self.i = imagpart

    def conjugate(self):
        self.i = -self.i

x = Complex(3.0, -4.5) # 2 instead of 3?
x.conjugate()          # No parameters? 
```

我最初发现它非常令人困惑，这`__init__( )`似乎需要 3 个参数，但你`Complex( )`只用 2 个参数调用。

`self`参数是显式而不是隐式的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T12:30:34.787

[这](http://neopythonic.blogspot.ch/2008/10/why-explicit-self-has-to-stay.html)是 GvR 关于这个问题的一篇好文章。它讨论了为什么显式`self`引用会保留下来。

他提出的要点包括：

强化了等效性

```
foo.meth(arg) == C.meth(foo, arg) 
```

能够将方法动态附加到类，然后可以从该类的所有新对象和现有对象中使用：

```
def meth(myself, arg):
   myself.val = arg
   return myself.val

# Poke the method into the class:
C.meth = meth 
```

我鼓励您阅读本文的其余部分。这很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:49:13.263

就是这样。Python 的对象实际上只是一组属性（属性）。其中一些是常规值，但其他一些是函数。除了作为其实例的属性之外，它们对类没有任何特殊绑定。方法调用语法只是一点点糖，负责为您传递第一个参数。事实上，方法只是简单的函数，您可以这样调用它们，显式传递第一个参数。

我不知道做出这个选择的确切原因，但我认为这与您可以将自由函数作为属性分配给现有对象然后将它们作为方法调用这一事实有关；如果没有明确的`self`参数，这将导致更多的混乱。

该机制类似于 Javascript，只是在 Javascript 中，隐式传递的`this`参数始终作为名为 的局部变量引入`this`，没有显式参数，而在 Python 中，您可以通过显式第一个参数选择自己喜欢的名称 -`self`不是关键字，只是约定。这种差异还意味着您可以更轻松地将函数用作方法 -`this`如果在对象上下文（或者更确切地说，在默认对象的上下文中，通常`window`）之外使用，使用的 javascript 函数将中断，但在 Python 中，您可以传递合适的对象作为第一个参数。

请注意，其他 OOP 风格（Java、C++ 等）也将`self`/`this`参数传递给您的方法，但它们是隐式执行的，并且`this`不会显示为显式参数。这些语言虽然不允许将方法调用为自由函数（并且 vv.，您不能将自由函数用作方法）。

至于为什么叫它`__init__`：至少有一个优点，即您可以重命名类而不必重命名构造函数。这使得重构更容易，更不容易出错。顺便说一句，Python 并不孤单 - PHP 使用`__construct`，虽然也支持类命名的构造函数，但不再推荐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:37:56.807

关于“self”参数：它标识某个类的*实例*。例如，在 C++ 中，完成了完全相同的事情——但在幕后。

进一步阅读： http: [//linuxgazette.net/issue56/orr.html](http://linuxgazette.net/issue56/orr.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T12:30:25.060

（以下内容有点过于简单化，但应该让您了解 Python 对象创建的过程。）

该声明

```
x = Complex(3.0, -4.5) 
```

不`Complex.__init__`直接调用。相反，它与以下内容有些相同：

```
x = Complex.__new__(Complex, 3.0, -4.5)
Complex.__init__(x, 3.0, -4.5) 
```

你可能仍然认为这是不必要的混乱。但它是这样设计的，以实现最大的灵活性。您可以覆盖`__new__`（通常只是从基类继承）来做更多（或不同）的事情，而不是返回类的实例。但是，大多数时候您不需要这样做，因此为了避免您一直需要进行两次调用来创建和初始化一个对象，它被包裹在将类型本身视为可调用对象的简写中一步创建和初始化对象。

# tsql - tsql !> 运算符有什么作用？

> ID：11794922
> 
> 赞同：0
> 
> 时间：2012-08-03T11:34:47.440
> 
> 标签：tsql, null, operators

我想知道这个操作员是做什么的，我找不到任何关于它的信息。很高兴看到一些使用示例。

```
set ansi_nulls [on | off]
expression !> expression (NULL) 
```

例如：这些查询返回相同的结果 (1)：

```
select 1 where 1 !> 1;

select 1 where 1 = 1; 
```

但是这些查询没有返回任何内容：

```
set ansi_nulls off;
select 1 where null !> null;

set ansi_nulls on;
select 1 where null !> null; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T11:37:22.760

其说明“[不大于](http://msdn.microsoft.com/en-us/library/ms184364.aspx)”。

例如：

```
IF 1 !> 2
BEGIN
    PRINT 'foo'
END 
```

此查询将`PRINT`“foo”，因为 1**不大于**2。

* * *

1 不大于 1，因此返回`true`。

1 也等于 1，所以这也将返回`true`。

因此，为什么您的两个语句都返回相同的结果。

* * *

比较时不会返回任何内容，`null`因为它们没有值。（即。`null != null`）。所以声明永远不会`true`

# watir - 悬停并单击动态内容

> ID：11794926
> 
> 赞同：0
> 
> 时间：2012-08-03T11:35:00.173
> 
> 标签：watir

浏览了很多问题和论坛，但我无法弄清楚。Watir 很新鲜。

在用户可以创建组的网页上进行测试（该解决方案构建在 kendoui 框架内）

创建一个组。

browser.button(:id => "add_group").click

browser.text_field(:id => "group_name").set("delete")

browser.button(:id => "add_group").click

创建了组，然后我想删除该组。如果用户将鼠标悬停在新组上，则会在组容器的右侧出现一个 thrashcan 符号，然后单击该组会被删除。

代码：

```
<div id="left_pane" class="side_panel k-pane k-scrollable" style="position: absolute; top: 0px; width: 220px; height: 724px; left: 0px;">
<ul id="toolbox_panel" class="k-widget k-reset k-header k-panelbar" data-role="panelbar">
    <li class="k-item k-state-default k-first">
    <li id="group_ungrouped" class="k-item k-state-default" data-role="droptarget">
    <li id="group_delete" class="k-item k-state-default k-last" data-role="droptarget">
    <span class="k-link k-header k-state-hover">delete</span>
        <!--snipp below is only visible on hover of delete element-->
        delete
        <span class="minicon remove_pod"></span>    
        </li> 
```

我用 Watir 尝试过的几件事：

browser.div(:id, 'left_pane').ul(:id, 'toolbox_panel').li(:id, 'group_delete').span(:class, 'minicon remove_pod').fire_event "onclick"

给出以下内容：

> C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:36 5:in `assert_exists': unable to locate element, using {:class=>"minicon remove_pod", :tag_name=>"spa n"} (Watir::Exception::UnknownObjectException) from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/ element.rb:247:in`fire_event' 来自 C:/bin/scripts /ruby/sm_groups.rb:34:in `'

其他测试：

browser.div(:id, 'left_pane').ul(:id, 'toolbox_panel').li(:id, 'group_delete').span(:class, /k-state-hover/).span(:class , 'minicon remove_pod').fire_event "onclick"

browser.div(:id, 'left_pane').ul(:id, 'toolbox_panel').li(:id, 'group_delete').span(:class, 'k-link k-header k-state-hover' ).span(:class, 'minicon remove_pod').click

我对如何悬停“group_delete”然后在悬停时找到delete/minicon remove_pod并单击它以删除创建的内容有点不知所措。

如果需要更多信息，请告诉我。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:52:28.447

要悬停和元素，请尝试以下操作：

```
browser.element(how, what).hover 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:25:51.727

决定修改网页中的代码，以便最后一个 span 类在 firebug 中可见，而无需鼠标悬停。

Watir 做到了这一点：

```
browser.element(:id, 'left_pane')
    .ul(:id, 'toolbox_panel')
    .li(:id, 'group_delete')
    .span(:class, 'k-link k-header')
    .span(:class, 'minicon remove_item')
    .click() 
```

# javascript - 无法在 core.js 文件中设置未定义的属性“值”

> ID：11794927
> 
> 赞同：4
> 
> 时间：2012-08-03T11:35:00.873
> 
> 标签：javascript, joomla, joomla1.7

我明白这个错误意味着什么，我似乎无法理解为什么会发生这种情况。

我正在使用 Joomla 1.7 并创建了一个组件。现在一切正常，有一天我在尝试提交表单时收到了这个错误。这就是我所拥有的：

```
<form action="index.php" method="post" name="adminForm">
..some elements...
<input type="hidden" name="option" value="<?php echo $lists['option']; ?>" />
<input type="hidden" name="task" value="<?php echo $lists['task']; ?>" /> 
</form> 
```

当`$lists['task']`回声正是它所应该的。现在错误显示在 submitForm 函数的 core.js joomla 文件中，其中包含：

```
function submitform(a) {
    if (a) document.adminForm.task.value = a;
    if (typeof document.adminForm.onsubmit == "function") document.adminForm.onsubmit();
    typeof document.adminForm.fireEvent == "function" && document.adminForm.fireEvent("submit");
    document.adminForm.submit()
} 
```

抱歉文件被压缩了，基本上这是一个非常简单的函数，将任务元素设置为给定的变量并提交表单。（仅供参考：`a`var 是正确的 var，一切都完美发送）

现在我似乎无法理解的是，当它以前从未发生过时，我怎么会得到这个错误，并且我在组件内部创建了许多这样的表单，完全相同并且它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:18:30.417

`<input type="hidden" name="task" value="<?php echo $lists['task']; ?>" />`

属性“值”必须为空，它将由 joomla js 分配

`<input type="hidden" name="task" value=""/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:42:40.710

如果存在 onsubmit 事件处理程序，则该函数将被调用两次：

1- document.adminForm.onsubmit();

2- document.adminForm.submit(); （也会触发 onsubmit 事件处理程序）。

由于我在这里看不到该代码，因此无法进一步诊断。但是，您可能希望在此 submitForm 函数以及附加到 onsubmit 事件的任何处理程序中放置一个调试点（例如使用 Firebug）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:12:37.103

好吧，问题正如 WTK 所建议的那样，有一个 HTML 错误。一些代码破坏了导致此错误的 HTML（表外有 2 个表行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-06T11:29:53.723

在第 22 行左右的 www/media/system/js/core-uncompressed.js 中，之后

```
if (!form) {
    form = document.getElementById('adminForm');
} 
```

添加：

```
if (!form) {
    form = document.adminForm;
} 
```

# android - 如何创建类似应用程序的幽灵模式？

> ID：11794928
> 
> 赞同：0
> 
> 时间：2012-08-03T11:35:01.170
> 
> 标签：android

我有一个需要隐藏的 android 应用程序，只有在用户拨打特定号码时才会出现。请问我可以确切地知道它是如何完成的吗？我已经搜索并没有成功。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:39:23.087

为了从启动器中完全隐藏应用程序，您首先需要创建一个 BroadcastReciever：

```
 public class LaunchAppViaDialReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras();
    if (null == bundle)
        return;
    String phoneNubmer = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
    //here change the number to your desired number
    if (phoneNubmer.equals("<Requested Number>")) {
        setResultData(null);
        if(status == true){
            PackageManager packageManager = context.getPackageManager();
            ComponentName componentName = new ComponentName(context,
                    YourLauncherActivity.class);
            packageManager.setComponentEnabledSetting(componentName, PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                    PackageManager.DONT_KILL_APP);
            Intent appIntent = new Intent(context,    YourLauncherActivity.class);
            appIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(appIntent);
        }
    }
} 
```

并添加权限：android.permission.PROCESS_OUTGOING_CALLS 将 BroadcastReciever 添加到 Manifest 文件。

最好让用户通过偏好设置Ghost模式

# python - 熊猫数据框应用

> ID：11794935
> 
> 赞同：7
> 
> 时间：2012-08-03T11:35:21.480
> 
> 标签：python, pandas

我有一个`DataFrame`有四列的 Pandas `A, B, C, D`，. 事实证明，有时 和 的值`B`可以`C`是`0`。因此，我希望获得以下信息：

```
B[i] = B[i] if B[i] else min(A[i], D[i])
C[i] = C[i] if C[i] else max(A[i], D[i]) 
```

我曾经在哪里`i`表示在框架的所有行上运行。使用 Pandas 很容易找到包含零列的行：

```
df[df.B == 0] and df[df.C == 0] 
```

但是我不知道如何轻松执行上述转换。我可以想到各种低效和不优雅的方法（`for`在整个框架上循环），但并不简单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T20:07:32.360

布尔索引和应用的组合可以解决问题。下面是一个关于替换 C 列的零元素的示例。

```
In [22]: df
Out[22]:
   A  B  C  D
0  8  3  5  8
1  9  4  0  4
2  5  4  3  8
3  4  8  5  1

In [23]: bi = df.C==0

In [24]: df.ix[bi, 'C'] = df[bi][['A', 'D']].apply(max, axis=1)

In [25]: df
Out[25]:
   A  B  C  D
0  8  3  5  8
1  9  4  9  4
2  5  4  3  8
3  4  8  5  1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:05:11.010

尝试使用“iterrows”DataFrame 类方法来有效地遍历 DataFrame 的行。请参阅 pandas 0.8.1 指南的第 6.7.2 章。

```
from pandas import *
import numpy as np

df = DataFrame({'A' : [5,6,3], 'B' : [0,0,0], 'C':[0,0,0], 'D' : [3,4,5]})

for idx, row in df.iterrows():
    if row['B'] == 0:
        row['B'] = min(row['A'], row['D'])
    if row['C'] == 0:
        row['C'] = min(row['A'], row['D']) 
```

# python - Finding roots of Legendre polynomial in python

> ID：11794937
> 
> 赞同：4
> 
> 时间：2012-08-03T11:35:26.333
> 
> 标签：python, root

I'm writing a program that solves an integral by Legendre-Gauss quadrature. The algorithm for nth-order quadrature requires, at one point, finding the roots of the nth-order Legendre polynomial, Pn(x), assigning them to the array Absc (for 'abscissa'). Pn is an nth order polynomial with n independent real roots on the interval [-1,1]. I'd like to be able to compute the roots, instead of just importing them from some library. I am able to create an array that gives the polynomial coefficients, which I call PCoeff. To find the roots I have tried

```
 Absc = numpy.roots(PCoeff) 
```

This works up to about n = 40, but beyond that it starts to fail, giving complex roots when it really shouldn't be. I've also tried defining the polynomial using

```
P = numpy.poly1d(PCoeff)
Absc = P.r 
```

but this gives the same problems, presumably because it uses the same numpy root-finding algorithm.

Another method, which seemed promising was using scipy.optimize.fsolve(Pn, x0), where x0 is an n-element array of my guess at the roots. The problem with this is that, depending on my x0 choices, this method may give one particular root more than once in the place of other roots. I've tried populating x0 as equidistant points on [-1,1]

```
x0 = numpy.zeros(n)
step = 2./(n-1)
for i in xrange(n):
  x0[i] = -1\. + i*step 
```

but once I get to n = 5, fsolve gives some roots repeated and neglects others. I have also tried using the results of numpy.roots as x0\. However, in the problem area where np.roots gives complex values, these cause an error in fsolve

```
TypeError: array cannot be safely cast to required type 
```

I saw online that there is a scipy.optimize.roots() routine that could work, but it is not in the scipy library on my computer. Updating is a hassle since I don't have permission to download things on this computer.

I'd like to be able to run the quadrature at 64th order for high accuracy, but this root finding causes failure. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:10:26.847

As np.roots rely on "finding eigenvalues of the Companion matrix" as stated by the documentation you may be hit by an error propagation issue resulting in non-zero imaginary part on the roots. Maybe you could just discard the imaginary part using the np.real function.

You could try a different way to compute the roots using taylor approximation of the roots :

[https://math.stackexchange.com/questions/12160/roots-of-legendre-polynomial](https://math.stackexchange.com/questions/12160/roots-of-legendre-polynomial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-09T10:05:44.130

You could find a simple example implementation to your problem with `SymPy` in [its documentation](http://docs.sympy.org/dev/modules/mpmath/functions/orthogonal.html):

```
>>> for n in range(5):
...     nprint(polyroots(taylor(lambda x: legendre(n, x), 0, n)[::-1]))
...
[]
[0.0]
[-0.57735, 0.57735]
[-0.774597, 0.0, 0.774597]
[-0.861136, -0.339981, 0.339981, 0.861136] 
```

The example, as the previous answer suggests, uses a taylor expansion of the polynomial.

# forms - Symfony 嵌入 i18n 表单不想被保存

> ID：11794938
> 
> 赞同：0
> 
> 时间：2012-08-03T11:35:27.457
> 
> 标签：forms, symfony1, internationalization, symfony-1.4

这是我的代码。在我的表单配置中，我写道：

```
 $this->embedI18n(array('en', 'bg'));
    $this->widgetSchema->setLabel('en', 'English');
    $this->widgetSchema->setLabel('bg', 'Bulgarian'); 
```

在我的操作中，我尝试以这种方式保存此表单：

```
$agree=  Doctrine_Core::getTable('agreements')->findOneById('1');

    //Myuser::pd($agree);
    $this->form= new agreementsForm($agree); 
     if ($request->isMethod('post'))
         {            
           $this->form= new agreementsForm($agree);                   
           $this->form->bind($request->getParameter($this->form->getName()));              
             if ( $this->form->isValid())
             {          
               $agree=$this->form->save();             
               //$this->redirect('homepage');
             }

         } 
```

当我单击编辑时，我会看到这两种语言的表单和每种语言的值，但是当我尝试保存表单时，它不想保存。

# c# - 从车辆图像中提取车牌

> ID：11794943
> 
> 赞同：2
> 
> 时间：2012-08-03T11:35:39.623
> 
> 标签：c#, image-processing, aforge, anpr

我正在开发一个 anpr 应用程序，我已经设法从车辆图像中找到车牌区域。![以下是我提取的车牌图像](../Images/d0de8c47e87f415d9f794dfaa8df6c1f.png)

当我将此图像提供给 tesseract OCR 引擎时，它似乎在“C”之前检测到一个字符“L”，所以我想取出车牌区域周围剩余的黑色像素。我可以采取一种特殊的方法来解决这个问题吗？在这种情况下，我使用的是 aforge.net 库

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:23:07.800

半自动去除车牌周围黑色像素区域的一种方法是应用[PointedColorFloodFill](http://www.aforgenet.com/framework/docs/html/eb628233-8dda-1f36-68b1-d2b7d8c05a25.htm)过滤器四次，将泛色填充起点放置在图像的四个角上。

这是一些示例代码，我在上面的问题中对车牌图像的副本应用了过滤器（裁剪以删除白色边框）：

```
var filter = new PointedColorFloodFill();
filter.FillColor = Color.White;
filter.Tolerance = Color.FromArgb(60, 60, 60);

filter.StartingPoint = new IntPoint(0, 0);
filter.ApplyInPlace(image);
filter.StartingPoint = new IntPoint(image.Size.Width - 1, 0);
filter.ApplyInPlace(image);
filter.StartingPoint = new IntPoint(image.Size.Width - 1, image.Size.Height - 1);
filter.ApplyInPlace(image);
filter.StartingPoint = new IntPoint(0, image.Size.Height - 1);
filter.ApplyInPlace(image); 
```

在从所有四个角完成过滤后提供以下图像：

![充满洪水的车牌](../Images/f1d604d8b28371725e6396e3e0df9907.png)

您可能想尝试使用更灰色的填充颜色和不同的容差，但这个示例至少可以提供一个合理的起点。

**更新**我偶然发现了[BradleyLocalThresholding](http://www.aforgenet.com/framework/docs/html/0ad5b988-5613-d62a-22a9-cf41e39c139f.htm)过滤器，它可以为您的 OCR 识别提供更好的起点。此过滤器*只能*应用于 8bpp 图像，例如，您可以通过首先在原始图像上应用[灰度过滤器来解决此问题。](http://www.aforgenet.com/framework/docs/html/d7196dc6-8176-4344-a505-e7ade35c1741.htm)`PointedColorFloodFill`如果在代码前添加以下四行：

```
var grayFilter = new Grayscale(0.3, 0.3, 0.3);
var image = grayFilter.Apply(originalImage);

var bradleyfilter = new BradleyLocalThresholding();
bradleyfilter.ApplyInPlace(image); 
```

并将`PointedColorFloodFill`每个 RGB 分量的容差降低到例如 10：

```
filter.Tolerance = Color.FromArgb(10, 10, 10); 
```

完全过滤的车牌现在看起来像这样：

![在此处输入图像描述](../Images/6ca08f2cc98a41447941091bd913092e.png)

# android - 为什么要使用strings.xml？

> ID：11794944
> 
> 赞同：30
> 
> 时间：2012-08-03T11:35:40.687
> 
> 标签：android

谁能解释为什么硬编码的字符串如此糟糕？如果我对字符串进行硬编码，我应该期待什么问题？为什么有一个单独的字符串 xml 文件可以解决这些问题？

在 strings.xml 中创建新元素是一项非常耗时的活动。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-03T11:36:49.170

将字符串添加到 时`strings.xml`，您可以轻松地将整个应用程序翻译成其他语言。

因此，在`values`您将拥有`strings.xml`此内容的文件夹中：

```
<string name="hello">Hello</string> 
```

在`values-fr`一个`strings.xml`有这个内容的：

```
<string name="hello">Bonjour</string> 
```

这为您节省了***大量***工作，而不是硬编码的方式：Android 会根据用户偏好自动选择正确的语言，您不必担心选择和显示该语言。

另请阅读[本地化 | 安卓开发者](http://developer.android.com/guide/topics/resources/localization.html)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-03T11:40:07.920

另外，假设您有一个字符串，例如，让它成为一个标题，它在您的应用程序的每个活动中重复。现在假设一段时间后，您决定更改该标题。

使用`strings.xml`你需要在一个地方更改它，而硬编码的值需要在每个活动中更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T05:19:30.837

字符串是使用 name 属性中提供的值（不是 XML 文件的名称）引用的简单资源。`<resources>`因此，您可以在一个 XML 文件中的一个元素下将字符串资源与其他简单资源结合起来。

# php - Xoops - 为什么我得到一个数组而不是 XoopsObject？

> ID：11794949
> 
> 赞同：0
> 
> 时间：2012-08-03T11:35:59.780
> 
> 标签：php, content-management-system, portal

我试图从我的处理程序中获取一个对象，但是当我试图知道它是否是一个带有“is_object”的对象时，答案是假的，而“is_array”的答案是真的。

为什么 ？

这是我的代码：

```
 // Get members list
        $criteria = new CriteriaCompo();
        $criteria->setSort('member_id');
        $criteria->setOrder('ASC');
        $members = $memberhandler->getObjects($criteria, true, false);
        unset($criteria);

        // Get  Nickname / Pseudo
        if (count($members) > 0) {
            foreach (array_keys($members) as $i) {
                is_object($members[$i]) ? print_r("is object") : print_r("is not object");
                is_object($members[0]) ? print_r("is object") : print_r("is not object");
                is_array($members[$i]) ? print_r("is array") : print_r("is not array");
                echo($member->getVar('uid'));
            }
        } 
```

感谢你的回答 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:56:11.120

这是因为“getObjects”正在为您提供“对象数组”

如果您想检索特定对象并拥有 member_id，那么您应该使用“get”，在您的情况下，您将不再使用“criteria”，而是直接请求对象：

$member = $memberhandler->get($member_id);

您可以在此演示文稿中看到更多示例：

[http://www.slideshare.net/xoopsproject/oop-adventures-with-xoops](http://www.slideshare.net/xoopsproject/oop-adventures-with-xoops)

# mysql - MySQL 4 表查询帖子，图像始终位于顶部

> ID：11794950
> 
> 赞同：0
> 
> 时间：2012-08-03T11:36:00.450
> 
> 标签：mysql, join

我有 4 个 MySQL 表

文件夹、文件夹用户、文件夹帖子、帖子

我需要构建一个视图来查询上述内容并返回我可以根据用户 ID 过滤的数据

文件夹有：

> id、userid、标题、日期

folder_users 有：

> ID、文件夹ID、用户ID

folder_posts 有：

> id、文件夹id、postid

帖子有：

> id、userid、媒体、文本、类型

目的是向登录用户显示一组文件夹，他们可以访问该文件夹并显示最新图像（保存在帖子表的媒体列中）理想情况下我想将它放入 MySQL 视图并拥有它按文件夹.日期排序

我正在努力从哪里开始这个查询，所以任何帮助都会非常感谢。

*** 编辑只是想到了一个缺失的元素 ****

帖子表将包含其他类型的帖子，这意味着文件夹中的某些帖子可能没有媒体，因此查询需要对此进行补偿，即在有媒体的地方确保将其包含在结果中，然后在没有媒体的地方不这样做不

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:45:40.477

```
SELECT
  p.media, f.title
FROM
  posts p
INNER JOIN
  folder_posts fp
  ON
  fp.postid=p.id
INNER JOIN
  folder_users fu
  ON
  fu.id=fp.folderid
INNER JOIN
  folder f
  ON 
  f.id=fu.folderid AND f.userid='LOGED_USER_ID'
WHERE p.media IS NOT NULL
GROUP BY p.id
ORDER BY f.date 
```

# c# - 在我关闭并重新运行应用程序之前，最后插入的记录不会显示在列表视图中

> ID：11794967
> 
> 赞同：0
> 
> 时间：2012-08-03T11:36:53.743
> 
> 标签：c#, wpf, sql-server-2008, sqlcommand

这是我在此类论坛的第一篇文章，所以请原谅我的无知。

我有一个带有 SQL Server 2008 mdf 数据库的 WPF 应用程序。

我使用以下代码将新记录插入到名为 Sales_TBL 的表中。

```
SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\SalesDB.mdf;Integrated Security=True;User Instance=True");

con.Open();
SqlTransaction tran = con.BeginTransaction();

SqlCommand cmd =
      new SqlCommand("INSERT INTO  Sales_TBL (Date, Sale_ID,Cust_Fname, Cust_Lname,  Comments, Total_Sale_Price) VALUES (@salesDate, @SalesID, @CFname, @CLname, @Comms, @TotSalePrice)", con);
cmd.Parameters.AddWithValue("@salesDate", saleDate_DB);
cmd.Parameters.AddWithValue("@SalesID", salesID_DB);
cmd.Parameters.AddWithValue("@CFname", custFname_DB);
cmd.Parameters.AddWithValue("@CLname", custSname_DB);
cmd.Parameters.AddWithValue("@Comms", comments_DB);
cmd.Parameters.AddWithValue("@TotSalePrice", totSalesPrice_DB);

cmd.Transaction = tran;
cmd.ExecuteNonQuery();
tran.Commit();
con.Close();

//navigate to another page to display the contents of the sales_tbl
recPage printRecPage = new recPage();
this.NavigationService.Navigate(printRecPage); 
```

然后我导航到另一个页面 (recPage) 并使用以下 Sales_TBL 代码的所有内容填充列表视图 (SoldItemsmListView)：

```
DataClasses1DataContext dc = new DataClasses1DataContext();

var q =
from a in dc.GetTable<Sales_TBL>()
select new RecData 
{
   salesID = (string)a.Sale_ID,
   salesDate = (DateTime)a.Date,
   custFname = (string)a.Cust_Fname,
   custSname = (string)a.Cust_Lname,
   saleComms = (string) a.Comments,
   totPrice = (double) a.Total_Sale_Price,
};
SoldItesmListView.DataContext = q; 
```

现在上述所有工作正常，但是我遇到的唯一问题是通过插入查询输入的最后一条记录不会显示在上面的列表视图*中（以前插入的数据确实显示在列表视图中），*记录被插入数据库成功，当我关闭并重新运行应用程序时，记录然后显示在列表视图中。

我希望这是有道理的，我不知道为什么会这样，我搜索了几个论坛并没有发现类似的问题。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:53:40.647

请指定您使用的 ORM（实体框架、Linq2Sql、...）。可能它缓存了先前查询的结果并且不知道该表已更新，因为您使用常规 Ado.Net 命令对其进行了更新。

您应该使用相同的 ORM 更新表，或者在检索表数据之前找到清除其缓存的方法。

# xamarin.ios - 来自 monotouch 的 Cocos2D

> ID：11794971
> 
> 赞同：0
> 
> 时间：2012-08-03T11:37:18.313
> 
> 标签：xamarin.ios, cocos2d-iphone

此处介绍的 Cocos2D 绑定是否可用：[https](https://github.com/mono/monotouch-bindings/tree/master/cocos2d) ://github.com/mono/monotouch-bindings/tree/master/cocos2d ？

熟悉 Cocos2D api 的人应该可以看看[https://github.com/mono/monotouch-bindings/blob/master/cocos2d/cocos2d.cs](https://github.com/mono/monotouch-bindings/blob/master/cocos2d/cocos2d.cs)是否包含了他们走objective-c方式时用到的所有函数.

我不熟悉 Cocos2D api，所以我需要熟悉的人来看看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:05:45.033

最后一次提交：8 个月前。提交历史显示只有[一次提交](https://github.com/mono/monotouch-bindings/commits/master/cocos2d)，它被命名为“work-in-progress”。有趣的是，历史甚至说提交是在 11 个月前。不知道差异来自哪里。

所以它肯定不是最新的，而且很可能是不完整的。单个提交还告诉我，它没有得到积极维护，也没有被其他人使用（他们可能会报告错误、提供代码修复和改进）。

就个人而言，我不会相信这一点。这不是它是否可用的问题。

你总是可以做一些快速测试，看看 cocos2d 的实现是否真的在工作，而不是天生就坏掉了。这不应该花费超过一两个小时来确定您是否对 cocos2d+monotouch 有足够的信心。

# java - 在选择性方法之前使用 AOP 调用常用操作

> ID：11794974
> 
> 赞同：0
> 
> 时间：2012-08-03T11:37:22.797
> 
> 标签：java, spring, aop

我目前正在为解决方案进行设计，但对某些要求的方法有疑问（在 Spring java 应用程序中）。

我的要求是在调用方法之前执行一个通用过程（例如解析和持久化到 db）。问题是应用程序应该能够配置是否在特定操作之前调用此方法。（这将是可集中配置的，因为我们期望频繁更改）。

我正在考虑使用 AOP 建议将此方法称为选择性方法。

请让我知道是否有更好的方法来满足此要求。另外请让我知道是否可以在 AOP 的 xml 中维护集中配置。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:11:23.897

是的。使用 AOP。

您在方面类中的方法可能如下所示

```
@Before("within(pkg1..*)")
public Object  something(ProceedingJoinPoint joinPoint) throws Throwable { 
{
    if(false){
        throw SomeException; // returns with exception; make sure to catch this
    } else {
        joinPoint.proceed(); // Proceeds to execute the method
    }

    joinPoint.proceed();
} 
```

# iphone - iOS将实体从类添加到核心数据

> ID：11794986
> 
> 赞同：1
> 
> 时间：2012-08-03T11:38:01.767
> 
> 标签：iphone, ios, xcode, core-data

我创建了一个应用程序，并希望添加核心数据功能。

我有两个类 -有`project`没有**一种方法可以轻松地将它们添加到我的核心数据模型**中。我知道可以做相反的事情并从模型中创建一个类。`photo`**`Entity`**

 **我正在使用 Xcode 4.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:51:57.863

没有内置工具可以查看您的类并更新 Xcode 中的核心数据模型。

不过，做起来也不是特别难。假设这些类主要用于数据存储：

*   从您的类中删除与数据存储相关的所有内容，只留下属性声明。
*   为每个属性添加一个@dynamic 语句（而不是@synthesize - 这必须去）。
*   使您的对象成为 NSManagedObject 而不是 NSObject 的子类。
*   将实体添加到具有适当属性的数据模型中，并将类设置为修改后的类。

如果您正在谈论更新使用 plist 进行存储的现有应用程序，并且您希望将现有数据迁移到您的核心数据存储中，那么您必须在您的应用程序中包含一个单独的例程才能在首次启动时运行新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:37:45.743

在 Core Data 中存储图像与存储 URL 或文件 URL 一样有效。重要的步骤是在 Xcode 中：检查图像数据属性，“存储在外部记录文件中”。**

# javafx - javafx 2.1 中的警报替换是什么？警报在 javafx 1.3 中，但不在 javafx 2.1 中

> ID：11794987
> 
> 赞同：3
> 
> 时间：2012-08-03T11:38:09.310
> 
> 标签：javafx, javafx-2

Alert 是 javafx 1.3 中的类，但在 javafx 2.1 中不是。那么什么是 javafx 2.1 中警报的替代品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:03:32.517

特奥卡利是正确的。 [警报对话框](http://javafx-jira.kenai.com/browse/RT-12643)在 3.0 中进入平台，目前正在开发中。

JavaFX 2.2 支持在显示时[暂停执行](http://javafx-jira.kenai.com/browse/RT-19783)的对话框。这使得创建自己的警报实现（通过调用`stage.showAndWait()`）非常简单。

（要访问此答案中的 JavaFX jira 链接，您可以在单击其中一个链接后注册 jira 帐户）。

Jonathan Giles（JavaFX 开发人员）指出：

> 由于时间不够，Dialogs 类（目前称为）没有进入 JavaFX 2.2。我刚刚将我的概念验证对话框类推送到 JavaFX Lombard（又名 3.0）存储库中，因此它可能包含在该版本中。虽然还有很长的路要走，但至少公共构建即将开始，您可以使用 JavaFX 3.0 构建开发您的应用程序并使用 API（并提供有关如何改进它的反馈）。

我创建了一个[模态确认对话框示例](https://gist.github.com/1887631)。

Anton 创建了一个[JavaFXDialog 项目](https://github.com/4ntoine/JavaFxDialog)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:06:28.953

对于它的价值，我认为目前 JavaFx 2.0 中不支持模态对话框，因此对于警报样式对话框也是如此。也许您会在这里找到更多信息：[How to create and show common dialog (Error, Warning, Confirmation) in JavaFX 2.0?](https://stackoverflow.com/questions/8309981/how-to-create-and-show-common-dialog-error-warning-confirmation-in-javafx-2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:48:34.913

我发现这个线程是少数提供用于 WebView 的 javafx 对话框示例的线程之一。我创建了以下有助于创建对话框的实用程序。下载以下文件，

*   [JavaScriptDialog.java](http://benow.ca/misc/code/JavaScriptDialog.java)
*   [JavaScriptDialog.css](http://benow.ca/misc/code/JavaScriptDialog.css)

并与 WebView 一起使用，如下所示：

```
webEngine.setPromptHandler(new Callback<PromptData, String>() {
  @Override
  public String call(PromptData arg0) {
    JavaScriptDialog dialog = new JavaScriptDialog(stage, arg0.getMessage());
    dialog.addPrompt(arg0.getDefaultValue());
    dialog.addAcceptButton();
    dialog.addRejectButton();
    dialog.showAndWait();
    return dialog.getPrompt();
  }
}); 
```

可以对警报和确认进行类似的操作。在 WebView 对话框成为 JavaFX 的一部分之前，此代码只是权宜之计。它可能会得到改进，可能会有更好的选择，但这对我有用。如果您希望分享您的增强功能，请随时使用和调整并与我联系并提供补丁。

它改编自jewelsea提供的示例

# knockout.js - 使用敲除以绑定值呈现 HTML 日历

> ID：11794994
> 
> 赞同：1
> 
> 时间：2012-08-03T11:38:38.670
> 
> 标签：knockout.js

如何使用淘汰赛绑定创建以下日历网格？： ![在此处输入图像描述](../Images/61739a1689fdc946c68b44c58aaba2e3.png)

将有 7 列。（每天一个）。表格的第一行（标题）将包含日期和日期。第二行将包含相应日期的值。下一行将是另一个标题，然后是值。重复直到月底。

我将所有数据都放在一个可观察的集合对象中：

```
function CalendarDate(id, date, volume) {
    var self = this;
    self.id = ko.observable(id);
    self.date = ko.observable(date);
    self.volume = ko.observable(volume);
};

function ForecastViewModel() {
    var self = this;
    self.dates = ko.observableArray([]);
} 
```

我觉得我应该使用`foreach`绑定，但不知道如何在第 7 列之后包装网格。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:41:45.183

演示链接： [JsFiddle](http://jsfiddle.net/gurkavcu/qhvbL/)

创建2个模板和一个容器

```
<div id="container" ></div> 
```

第一个负责渲染日期框：

```
<script id="datebox" type="text/x-jquery-tmpl">
 ... 
</script> 
```

第二个负责 7 天：

```
<script id="week" type="text/x-jquery-tmpl">
  <div data-bind="template: { name : 'datebox'  , foreach : dates }">
</script> 
```

然后准备一个拆分日期数组的函数并应用这样的模板：

```
function splitDateArray() {

  /** Splice observable Array 4 or 5 subArray depends on the month of year **/
  var subArray_one   /* contains 7 date */
  var subArray_two   /* contains 7 date */
  var subArray_three /* contains 7 date */
  var subArray_four  /* contains 7 date */
  var subArray_five  /* contains 0-3 date */

  /** Then create dynamic dom object and apply each array indivually to week template **/

  var week1=$("<div id='w1'></div>");
  $("#container").append(week1);

  ko.applyBindingsToNode($("#w1").get(0) , { template: { name: 'week', data: subArray_one  } });

  ... apply the same pattern for other arrays ...

  ko.applyBindingsToNode($("#w2").get(0) , { template: { name: 'week', data: subArray_two  } });

  ko.applyBindingsToNode($("#w3").get(0) , { template: { name: 'week', data: subArray_three  } });

  ko.applyBindingsToNode($("#w4").get(0) , { template: { name: 'week', data: subArray_four  } });

  ko.applyBindingsToNode($("#w5").get(0) , { template: { name: 'week', data: subArray_five  } }); 
```

}

概括 ：

准备好数组后，使用 ko.applyBindingsToNode 函数呈现子模板。这是我的第一个想法。可以有更有效的解决方案。

**编辑 ：**

这是一个没有细节的想法的简单实现：[JsFiddle](http://jsfiddle.net/gurkavcu/qhvbL/)

# c++ - 具有副作用的移动构造函数的替代方案？

> ID：11794997
> 
> 赞同：1
> 
> 时间：2012-08-03T11:38:48.327
> 
> 标签：c++, c++11, move-constructor

我正在编写一个库，它提供一个类`A`并支持用它进行评估（基本上带有中缀符号的赋值和表达式）。让我们不要让事情不必要地复杂化，只看作业。用户可以执行以下操作：

```
 A a0,a1;
 a0=a1;
 a1=a0; 
```

同时，库还应该提供一个操作，让我们调用它`fuse`，它接受任意数量的此类语句：

```
fuse(
  a0=a1,
  a1=a0
); 
```

有或没有 . 都应该使用相同的语法`fuse`。为了完成这项工作，我需要一个非标准的赋值运算符（一个不返回引用`A`但代表语句的对象）和一个单独的`assign`方法：

```
struct A {
  B operator=(const A& a) {
    B b(*this,a);
    return b;
  }
  A& assign(const A& a) { // does the actual work }
}; 
```

`B`试图包装一个语句。赋值操作是在销毁时触发的`B`。

```
struct B {
  B(A& dest,const A& src) : calc(true), dest(dest), src(src) { }
  B(B&& b) : calc(b.calc), dest(b.dest), src(b.src) { b.calc=false; }
  ~B() {
    if (calc)      
      dest.assign(src);
  }
  bool calc;
  A& dest;
  const A& src;
}; 
```

bool`calc`跟踪该语句是否需要评估。然后该`fuse`操作带有可变参数块：

```
struct fuse {
  template<typename... Bs>
  fuse(Bs&&... bs) {
    // Recurse and evaluate...
  }
}; 
```

这种设置有一个严重的缺陷：它依赖于调用移动构造函数的编译器。由于复制省略规则，人们不能做这样的事情。

没有复制/移动构造函数怎么办？