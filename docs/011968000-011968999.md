# StackOverflow 问答 11968000-11968999

# sql - Crystal Report for VS2010 中的 Oracle TO_DATE 函数问题

> ID：11968009
> 
> 赞同：0
> 
> 时间：2012-08-15T10:48:32.183
> 
> 标签：sql, oracle, crystal-reports, crystal-reports-2010

我在 Crystal Report VS2010 命令文本中运行以下查询时遇到问题。它在 Oracle 10g 中运行良好。

```
SELECT *
FROM tbl_ts
WHERE PROJECTCODE = 2274
AND LOGDATE >= TO_DATE('01/08/2011','dd/mm/yyyy')
AND LOGDATE <= TO_DATE('31/08/2011','dd/mm/yyyy') 
```

我曾尝试使用 BETWEEN 函数，但我收到了同样的错误消息：

![在此处输入图像描述](../Images/9b8fd28e932d3a975f0d8565a75d16f1.png)

我认为它与`TO_DATE`功能有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:15:01.367

我将在这里进行猜测并断言出现错误是因为您在代码块 ( `'dd/mm/yyyy'`) 中指定的日期格式与数据库中指定的日期格式不完全匹配。

换句话说，如果 Oracle 期望使用标准格式的日期，`'DD-MON-YY'`因为您将函数用作 TO_DATE(some_date, `'dd/mm/yyyy'`)，您将看到此错误。“非数字”值将是月份名称。

# actionscript-3 - AS3 - ImageSnapshot - 不拍摄整个组件的快照

> ID：11968017
> 
> 赞同：0
> 
> 时间：2012-08-15T10:49:23.070
> 
> 标签：actionscript-3

我尝试捕获渲染的 SWF 文件（图表）的屏幕截图，并使用以下代码将其转换为图像。但是，输出图像仅包含实际渲染图表的一部分。它没有捕获整个渲染图表...请帮助我...提前致谢。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
    layout="absolute"
    minWidth="955" minHeight="600"
    backgroundColor="white" viewSourceURL="srcview/index.html" initialize="initApp()">

<mx:Script>
    <![CDATA[
        import mx.core.IUIComponent;
        import mx.graphics.ImageSnapshot;
        import mx.graphics.codec.PNGEncoder;
        import flash.net.FileReference;
        import mx.events.CloseEvent;
        import mx.events.FlexEvent;
        import mx.controls.Alert;

        private var image:ImageSnapshot = new ImageSnapshot;
        private var dataXML:String="<chart labelDisplay='Normal' xAxisName='' yAxisName='' pyAxisName='' syAxisName='' rotateYAxisName='' caption='' subCaption='' baseFont='Regular' baseFontSize='10' baseFontColor='' decimalPrecision='' thousandSeparator=',' decimalSeparator='.' numberPrefix='' numberSuffix='' sNumberPrefix='' sNumberSuffix='' bgColor='' showBorder='1' YAxisMinValue='' YAxisMaxValue='' pyAxisMinValue='' pyAxisMaxValue='' syAxisMinValue='' syAxisMaxValue='' showLabels='1' showValues='1' showLegend='Y' legendPosition='Right'><categories><category label='Unmapped'/><category label='FY 2002 - 03'/><category label='FY 2003 - 04'/><category label='FY 2004 - 05'/><category label='FY 2005 - 06'/><category label='FY 2006 - 07'/><category label='FY 2007 - 08'/><category label='FY 2008 - 09'/><category label='FY 2009 - 10'/><category label='FY 2010 - 11'/></categories><dataset seriesName='Base Amount'><set value='-65770'/><set value='71461203'/><set value='66548822'/><set value='87063456'/><set value='261797187'/><set value='282962118'/><set value='3830823027'/><set value='16001588683'/><set value='22514728943'/><set value='23822586701'/></dataset></chart>";
          private function initApp():void
          {
            chart_1.source="MSCombi2D.swf?chartWidth=100&chartHeight=100&registerWithJS=1&dataXML="+dataXML;
          }
        private function takeSnapshot(source:IBitmapDrawable):void {
           // var imageSnap:ImageSnapshot = ImageSnapshot.captureImage(source);
           // var imageByteArray:ByteArray = imageSnap.data as ByteArray;
           // var str:String = imageByteArray.
           // swfLoader.load(imageByteArray);
            var imageBitmapData:BitmapData = ImageSnapshot.captureBitmapData(source);
            swfLoader.source = new Bitmap(imageBitmapData);

            // take a screen capture
          //  image = ImageSnapshot.captureImage(source, 72, new PNGEncoder(), false);
           //   var fileSave:FileReference = new FileReference();
           //       fileSave.save(image.data, "saveImage.png");
        }

    ]]>
</mx:Script>

<mx:ApplicationControlBar dock="true">
    <mx:Button label="Take snapshot of DataGrid"
            click="takeSnapshot(chart_1);" />
</mx:ApplicationControlBar>

<mx:HBox>
   <mx:SWFLoader id="chart_1" /> 

    <mx:SWFLoader id="swfLoader">
        <mx:filters>
            <mx:DropShadowFilter />
        </mx:filters>
    </mx:SWFLoader>
</mx:HBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:30:17.463

我得到了答案...我将函数“takeSnapshot”的代码更改如下：

```
 private function takeSnapshot(source:IBitmapDrawable):void 
        {                          
            var bitmapData:BitmapData = new BitmapData( 1350, 700 );
            bitmapData.draw( IBitmapDrawable( chart_1 ));
            var swfBitmap:Bitmap = new Bitmap( bitmapData );            
            var jpg:JPEGEncoder = new JPEGEncoder(100); 
            var ba:ByteArray  = jpg.encode(swfBitmap.bitmapData); 
            var fileSave:FileReference = new FileReference();
            fileSave.save(ba, "saveImage.jpg");
        } 
```

# c# - ASP.NET MVC 4 应用程序中 Chrome 和 IE9 中的不同成员行为

> ID：11968025
> 
> 赞同：0
> 
> 时间：2012-08-15T10:49:55.167
> 
> 标签：c#, asp.net-mvc-4

我有 ASP.NET MVC 4 应用程序。在这个应用程序中，对于登录的用户，Membership.GetUser() 在 Chrome 中工作时返回 null ......它在 IE9 中工作得很好。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T06:04:18.643

Chrome 23 - 一切正常！

# php - Silex Twig 库的视图/资源位置

> ID：11968026
> 
> 赞同：2
> 
> 时间：2012-08-15T10:50:00.773
> 
> 标签：php, twig, silex, composer-php

通常，对于 Silex 项目，我会有顶级目录，例如：

```
- app/
   - views/
- src/
- vendor/
- web/ 
```

现在，我的一些类可能会调用，它会从文件夹中`$app['twig']->render(...)`拉出一个视图。`app/views`

**如果我提取一个库以使其更可重用，跨多个项目，我应该将其视图文件保存在哪里，以及如何指示 Twig 去那里查看？**

同样的问题适用于我通常会放入的图形/样式表等`web/`。

他们肯定必须在`vendor/my-lib`某个地方才能让 Composer 干净地安装文件吗？有没有一种通用/最佳实践的方法来做到这一点？

**更新** 作为参考，这是我最终做的：

```
<?php

// in my \Silex\ServiceProviderInterface ...

/**
 * @var \Twig_Environment $twig
 */
$twig = $app['twig'];

// Add the paths to our twig templates here
$fsLoader = new \Twig_Loader_Filesystem(array(
    __DIR__.'/views/'
));

$twig->setLoader(new \Twig_Loader_Chain(array($twig->getLoader(), $fsLoader))); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:09:15.897

我将视图存储在 src/{Library}/{Class}/View/

我将 Twig 的基本路径设置为 src

```
$app->register(new TwigServiceProvider(), array(
    'twig.path' => array(
        __DIR__ . '/../src/{Library}/'
    ),
    'twig.options' => array('cache' => false, 'strict_variables' => true)
)); 
```

并且在调用渲染时，我从该点传入路径

```
$app['twig']->render('{Class}/View/{twigfile}.html.twig',$data); 
```

# codeigniter - Codeigniter 实例和外部库对象：身份验证

> ID：11968028
> 
> 赞同：1
> 
> 时间：2012-08-15T10:50:06.113
> 
> 标签：codeigniter, authentication, configuration, static-libraries

我会尽量清楚地解释我的问题。如果没有，告诉我！

Mywebapp 基于 Codeigniter。在其中，我做了一个控制器来显示用户上传的图像。通过这种方式，图像只能由成员或授权人看到，而不是像在 facebook 中那样公开（图像地址只是散列但是公开的）。

我还使用 mpdf 库从网页内容生成 pdf。要使用它，我在第三方目录中有 mpdf 库。为了能够在我的格式中使用它，我将我的 mpdf 库放入了库目录（在应用程序目录中）（只是为了能够从不同的控制器中使用它）。我有一个 pdf 控制器，它是从我要生成 pdf 的视图中调用的。

所以过程是：我从我的角度调用pdf控制器的一个函数。在这个函数中，我调用了我的 mpdf 库的一个函数，它创建了一个 mpdf 对象（第三方类）并生成了 pdf。

pdf的生成效果很好。我唯一拥有的是图像。我解释。在我的 html 文档中，图像是这样嵌入的：

```
<img src="http:localhost/www/myapp/library/image/hashed_name_of_the_image" alt="" /> 
```

库控制器的图像功能检索图像并显示它。但是在这个功能中，我可以保护或不保护运行它的访问权限。例如，强制成为登录用户查看图像 ( `if($this->session->userdata(‘logged’) == true)`)。

如果没有限制，则生成的 pdf 包含图像。凉爽的 ：）。

但如果我施加限制，它不会。我知道 mpdf 对象是要求图像功能显示图像的对象。所以验证失败。

在调用 pdf 函数之前，我尝试在 CI 实例对象上使用配置参数。例如，将“pdf_conversion”设置为 true 并且转换完成后，将其设置回 false。

但它不起作用。当我检查图像函数中的值时，它仍然是错误的......就像所有对象的配置值都没有改变，而只是改变了它的 pdf 对象。

有没有办法做我想做的事？？？使用配置参数或其他任何东西！我想我误解了一些东西，但不知道是什么！

提前感谢您的回答巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:16:14.453

你的问题是，然后库“调用”图像函数，它没有登录。所以你的控制器代码拒绝访问。

你可以做两件事：

1.  将生成/获取图像的代码从控制器移动到新库中。然后从控制器和 PDF 库中调用该库。这是首选方式。

2.  在“图像”操作中，找到一种方法来检查请求是否来自 PDF 库。最好的猜测是在 PDF 库发送的 HTTP 标头中查找某些内容。无论如何，这不是很安全，因为 HTTP 标头可以“伪造”。

题外话：您是否有理由通过控制器操作而不是直接引用图像文件来提供图像？

### 关于解决方案 1 的说明

所以你会有一个像这样的库 image.php

```
class Image {
  ...
  function get_image($hash){
    [code for getting the image here]
  }
  ... 
} 
```

在控制器中：

```
function image($hash) {
  $this->load->library('image');

  if (if($this->session->userdata(‘logged’) == true)) {
    $image = $this->image->get_image($hash);

    [send it to the browser]
  }
} 
```

在 PDF 库中

```
function export($hash) {
  $ci =& get_instace();

  $ci->load->library('image');

  [do pdf stuff]

  $image = $ci->image->get_image($hash);

  $this->add_image($image);

  [do more pdf stuff]
} 
```

这是想法，实现的实际细节取决于您。

# php - php中的嵌套函数在多次调用外部时抛出异常

> ID：11968031
> 
> 赞同：4
> 
> 时间：2012-08-15T10:50:23.607
> 
> 标签：php

以免假设我有以下

```
function a(){
  function b(){}
}
a(); //pass
a(); //error 
```

为什么在第二次调用中抛出异常并且它说

```
cannot re-declare  function b() 
```

我认为每个函数调用都会创建一个包含自己范围的新活动记录；就像在 PHP 以外的其他语言中一样，当我们在函数中声明一个变量并调用该函数时，所有变量在它们的范围内都是有效的，为什么内部函数不一样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T10:54:21.260

命名函数在 PHP 中总是全局的。因此，您需要检查函数 B 是否已经创建：

```
function A() {
    if (!function_exists('B')) {
        function B() {}
    }
    B();
} 
```

另一种解决方案是使用匿名函数（这更可能满足您的需求，因为该函数现在存储在一个变量中，因此在 A 的函数范围内是本地的）：

```
function A() {
    $B = function() {};
    $B();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T10:53:07.553

这是因为当你执行函数时`a`，它声明了函数 b。再次执行它会重新声明它。您可以使用`function_exists`函数来解决此问题。

```
function a(){
  if(!function_exists('b')){
    function b(){}
  }
} 
```

但我的建议是，你应该在外面声明这个函数。不在里面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:53:30.027

这正是所说的，当您`a()`再次调用时，它会尝试重新声明`b()`，`b()`在外部声明并从内部`a()`调用，如下所示：`b()``a()`

```
function a() {
  b();
}

function b() {}

a();
a(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T11:13:37.217

像这样在另一个函数中声明一个函数将被认为是 php 中的不良做法。如果你真的需要 a() 中的函数，你应该创建一个闭包。

```
function a() {
  $b = function() {

  };
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T10:53:57.127

这是因为您`a()`在全局范围内调用。添加一个[`function_exists`](http://php.net/function_exists)调用以使上述代码工作，但实际上很少有场景你应该真正做这样的事情。

# java - Android POST 请求 400 响应代码抛出异常

> ID：11968033
> 
> 赞同：2
> 
> 时间：2012-08-15T10:50:30.103
> 
> 标签：java, android, post, http-status-code-400

当我向服务器发送 POST 请求时，如果响应为 200，我会得到 JSON 正文。但是，对于不成功的请求，服务器会发送 400 响应代码，但我的 android 代码会引发 FileNotFoundException。阅读 400 响应和 200 响应之间有什么区别吗？

```
 StringBuffer responseBuilder = new StringBuffer();
    String line = null;
    HttpURLConnection conn = null;
    OutputStream out = null;
    BufferedReader rd = null;
    System.setProperty("http.keepAlive", "false");
    try
    {
        conn = (HttpURLConnection) new URL(requestURL).openConnection();
        conn.setRequestMethod("POST");
        conn.setDoOutput(true);
        conn.setDoInput(true);
        conn.setUseCaches(false);
        conn.setAllowUserInteraction(false);
        conn.setConnectTimeout(NetworkConstants.CONNECTION_TIMEOUT);
        conn.setReadTimeout(NetworkConstants.SOCKET_TIMEOUT);

        out = conn.getOutputStream();
        Writer writer = new OutputStreamWriter(out, "UTF-8");
        String s = formatParams();
        Log.d("-------------------------------------------------->", s);
        writer.write(s);
        writer.flush();
        writer.close();
    }

    catch (Exception e)
    {

    }

    finally
    {
        if (out != null)
        {
            try
            {
                out.close();
            }
            catch (IOException e)
            {
                e.printStackTrace();

            }
        }
    }
    try
    {
        rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        while ((line = rd.readLine()) != null)
        {
            responseBuilder.append(line);
            if (!rd.ready())
            {
                break;
            }
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    finally
    {
        if (conn != null)
        {
            conn.disconnect();
        }
    }

    String response = responseBuilder.toString();
    Log.d("@@@@@@@@@@@@@@@@@@@@@@@@@@@", response);
    return response; 
```

亲切的问候，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-04T02:03:28.700

用于`getErrorStream()`此。从[文档](http://developer.android.com/reference/java/net/HttpURLConnection.html)：

> 如果 HTTP 响应表明发生了错误，`getInputStream()`将抛出一个`IOException`. 用于`getErrorStream()`读取错误响应。可以使用正常方式读取标题`getHeaderFields()`。

示例代码：

```
 httpURLConnection.connect();

        int responseCode = httpURLConnection.getResponseCode();
        if (responseCode >= 400 && responseCode <= 499) {
            Log.e(TAG, "HTTPx Response: " + responseCode + " - " + httpURLConnection.getResponseMessage());
            in = new BufferedInputStream(httpURLConnection.getErrorStream());
        }
        else {
            in = new BufferedInputStream(httpURLConnection.getInputStream());
        }

        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        String line = "";
        while ((line = reader.readLine()) != null) {
            urlResponse.append(line);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:55:47.337

如果响应代码不是 200 或 2xx，请使用 getErrorStream() 而不是 getInputStream() 来解析 json 并显示后端提供的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-07T22:23:01.050

我知道这个问题已经有很长时间了，但为了其他仍然遇到此类问题的人的利益，请注意问题的另一个可能原因是使用“connection.getContent()”来获取 InputStream。
像这样：

```
InputStream is = (InputStream) connection.getContent(); 
```

这可能会产生一个问题，即根本不会处理大于 399 的响应代码。
因此建议直接使用 getInputStream() 和 getErrorStream() ，如前面的评论和以下示例所示：

```
 HttpURLConnection connection = null;
    BufferedReader bufferedReader = null;
    try {
        String urlString = "http://www.someurl.com";
        URL url = new URL(urlString);
        connection = (HttpURLConnection) url.openConnection();
        connection.connect();
        InputStream is;
        int responseCode = connection.getResponseCode();
        if (responseCode < HttpURLConnection.HTTP_BAD_REQUEST) {
            is = connection.getInputStream();
        } else {
            is = connection.getErrorStream();
        }

        StringBuilder response = new StringBuilder();
        bufferedReader = new BufferedReader(new InputStreamReader(is));
        String tempLine;
        while ((tempLine = bufferedReader.readLine()) != null) {
            response.append(tempLine);
        }
        String serverResponse = response.toString();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (bufferedReader != null) {
            try {
                bufferedReader.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        if (connection != null) {
            connection.disconnect();
        }
    } 
```

# java - 应用程序不会从网络加载任何图像

> ID：11968037
> 
> 赞同：0
> 
> 时间：2012-08-15T10:50:59.077
> 
> 标签：java, android, image, listactivity, inflate

我真的不知道该怎么办了...

我得到了这段代码（之前尝试过很多次）：

```
final LoaderImageView image = (LoaderImageView) findViewById(R.id.loaderImageView);
        image.setImageDrawable(getAnImageUrl());  *<--- is line 119, where logcat say the NullPointer is*emphasized text*

private String getAnImageUrl() {
        return "http://i.imgur.com/n6jBV.jpg";
    } 
```

这应该显示一个图像，我也尝试了我在互联网上找到的许多其他方法，但它总是说：

```
08-15 12:37:57.770: E/AndroidRuntime(19455): FATAL EXCEPTION: main
08-15 12:37:57.770: E/AndroidRuntime(19455): java.lang.RuntimeException: Unable to start activity 

ComponentInfo{com.dlv.listactivity/com.dlv.listactivity.MainActivity}: java.lang.NullPointerException
08-15 12:37:57.770: E/AndroidRuntime(19455):    at android.app.ActivityThread.performLaunchActivity

(ActivityThread.java:1651)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at android.app.ActivityThread.handleLaunchActivity

(ActivityThread.java:1667)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at android.app.ActivityThread.access$1500

(ActivityThread.java:117)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at android.app.ActivityThread$H.handleMessage

(ActivityThread.java:935)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at android.os.Looper.loop(Looper.java:123)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at android.app.ActivityThread.main

(ActivityThread.java:3691)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at java.lang.reflect.Method.invokeNative(Native 

Method)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at java.lang.reflect.Method.invoke(Method.java:507)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at com.android.internal.os.ZygoteInit

$MethodAndArgsCaller.run(ZygoteInit.java:847)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at com.android.internal.os.ZygoteInit.main

(ZygoteInit.java:605)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at dalvik.system.NativeStart.main(Native Method)
08-15 12:37:57.770: E/AndroidRuntime(19455): Caused by: java.lang.NullPointerException
08-15 12:37:57.770: E/AndroidRuntime(19455):    at com.dlv.listactivity.MainActivity.onCreate

(MainActivity.java:119)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at android.app.Instrumentation.callActivityOnCreate

(Instrumentation.java:1047)
08-15 12:37:57.770: E/AndroidRuntime(19455):    at android.app.ActivityThread.performLaunchActivity

(ActivityThread.java:1615) 
```

关于这一点，他得到了一个 NullPointer。
我也已经授予互联网许可（尝试了我现在在互联网上找到的每一个）：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.DELETE_CACHE_FILES"> 
```

这是我的 list.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">
  <com.dlv.listactivity.LoaderImageView
        android:id="@+id/loaderImageView"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"/>
      <!--  image="http://developer.android.com/images/dialog_buttons.png" -->

  <ImageView
      android:id="@+id/img"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:src="@drawable/ic_launcher" />

  <TextView
      android:id="@+id/title"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_weight="1" android:layout_gravity="left|center_vertical" android:textSize="20dip" android:layout_marginLeft="10dip"/>
</LinearLayout> 
```

我使用 a `listActivity`（而不是普通的`Activity`），并且我得到了 2 个与`inflate`.

我什至有其他项目可以从互联网上下载/显示图片...但是这个没有，我找不到问题...

通货膨胀会是个问题吗？或者是其他东西？
请给我一些建议。

已经谢谢了，Bigflow

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:12:37.553

您的布局没有 ID 为 R.id.loaderImageView 的 LoaderImageView。这就是为什么它是空的。

我相信你正在使用这个：[http](http://blog.blundell-apps.com/imageview-with-loading-spinner/) ://blog.blundell-apps.com/imageview-with-loading-spinner/ 但忘记在布局上声明它：

```
 <com.blundell.tut.LoaderImageView
   android:id="@+id/loaderImageView"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content" /> 
```

# android - 非透明像素上的 ImageView ColorFilter。夹子

> ID：11968040
> 
> 赞同：3
> 
> 时间：2012-08-15T10:51:11.290
> 
> 标签：android, image, mask, clip

我有一个带有位图的 ImageView。此位图具有 Alpha 通道和透明像素。当我尝试将 ColorFiter 与 Mode.OVERLAY （因为蜂窝）一起使用时 - 提供颜色覆盖整个图像视图（整个矩形），但我只想覆盖非透明像素。如何剪辑 imageview 的画布以在我想要的地方执行过滤器？

**更新**

我在 png 中有灰色图像：

![在此处输入图像描述](../Images/38a1fbf20c29d06b9b264792e46c5154.png)

当我尝试使用 MODE_ATOP 我得到：

![在此处输入图像描述](../Images/bcc4fd13097b155b73c1bb7578732e7f.png)

当我使用 OVERLAY 时，我得到：

![在此处输入图像描述](../Images/f9fbf5bf5d42c03b23148a9b2f903e3f.png)

我想得到什么：

![在此处输入图像描述](../Images/1c2199cecc493bc7405f660418659b50.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:32:44.023

可能有一种更有效的方法来做到这一点（也许通过创建一个[`ColorMatrixColorFilter`](http://developer.android.com/reference/android/graphics/ColorMatrixColorFilter.html)来近似它），但由于[`Mode.OVERLAY`](http://developer.android.com/reference/android/graphics/PorterDuff.Mode.html)看起来[很难简化](https://github.com/android/platform_external_skia/blob/master/src/core/SkXfermode.cpp#L202)，这里有一些示例代码应该实现你想要的：

```
public class MyActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final ImageView imageView = new ImageView(this);
        setContentView(imageView);

        final Paint paint = new Paint();
        Canvas c;

        final Bitmap src = BitmapFactory.decodeResource(getResources(),
                android.R.drawable.sym_def_app_icon);
        final int overlayColor = Color.RED;

        final Bitmap bm1 = Bitmap.createBitmap(src.getWidth(), src.getHeight(), Config.ARGB_8888);
        c = new Canvas(bm1);
        paint.setColorFilter(new PorterDuffColorFilter(overlayColor, PorterDuff.Mode.OVERLAY));
        c.drawBitmap(src, 0, 0, paint);

        final Bitmap bm2 = Bitmap.createBitmap(src.getWidth(), src.getHeight(), Config.ARGB_8888);
        c = new Canvas(bm2);
        paint.setColorFilter(new PorterDuffColorFilter(overlayColor, PorterDuff.Mode.SRC_ATOP));
        c.drawBitmap(src, 0, 0, paint);

        paint.setColorFilter(null);
        paint.setXfermode(new AvoidXfermode(overlayColor, 0, Mode.TARGET));
        c.drawBitmap(bm1, 0, 0, paint);

        imageView.setImageBitmap(bm2);
    }

} 
```

简而言之，我们使用`OVERLAY`模式绘制源位图和颜色，然后使用辅助位图（使用`SRC_ATOP`模式合成），我们将其组合使用[`AvoidXfermode`](http://developer.android.com/reference/android/graphics/AvoidXfermode.html)以不绘制透明像素。

原图：

![原始图像](../Images/d16669e4557145f86b2ea5727e86c250.png)

结果：

![结果](../Images/f24c8377edded26b76c069d178a386ce.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-14T22:26:37.390

您可以使用 Overlay 模式，然后使用 DST_ATOP xFerMode 用相同的位图裁剪掉原来透明的区域。[https://developer.android.com/reference/android/graphics/PorterDuff.Mode](https://developer.android.com/reference/android/graphics/PorterDuff.Mode)

```
private fun applyFilterToImage() {

    val bitmapCopy = Bitmap.createBitmap(originalImage.width, originalImage.height, Bitmap.Config.ARGB_8888)
    val canvas = Canvas(bitmapCopy)

    val rnd = java.util.Random()
    val randomColor = Color.rgb(rnd.nextInt(256), rnd.nextInt(256), rnd.nextInt(256))

    val paint = Paint()
    val porterDuffMode = PorterDuff.Mode.OVERLAY
    paint.colorFilter = PorterDuffColorFilter(randomColor, porterDuffMode)

    val maskPaint = Paint()
    maskPaint. xfermode = PorterDuffXfermode(PorterDuff.Mode.DST_ATOP)

    canvas.drawBitmap(originalImage, 0f, 0f, paint)

    canvas.drawBitmap(originalImage, 0f, 0f, maskPaint) //clips out the background that used to be transparent.

    imageView.setImageBitmap(bitmapCopy)
} 
```

[标记颜色更改GIF](https://i.stack.imgur.com/2LWPC.gif)

# c# - LINQ 'AsEnumerable' 和实体框架

> ID：11968045
> 
> 赞同：4
> 
> 时间：2012-08-15T10:52:11.397
> 
> 标签：c#, performance, entity-framework, linq

我正在编写类似于以下内容的 LINQ 查询：

```
var test = from o in dbcontext.Orders.AsEnumerable()
        where o.ID==1
        select new Order
        { 
             Name = GetName(o.ID)
        }; 
```

为了在 LINQ 查询中调用外部函数，我`AsEnumerable()`在查询中使用。

我知道，通常在调用诸如等的枚举函数之前不会执行查询`ToList()`。但在这里我*在*查询中调用枚举。

谁能告诉我这样使用是否被认为是不好的做法`AsEnumerable()`？与创建查询`ToList()` *后*调用相比，它的性能会受到影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T10:55:58.470

我会做

```
var ids = from o in dbcontext.Orders
          where o.ID==1
          select new { ID = o.ID }; 

var names = from i in ids.AsEnumerable()
            select new Order { Name = GetName(i.ID) }; 
```

即在数据库中进行尽可能多的查询，然后只在 C# 中执行 ID 到名称的转换。

# performance - XSLT - 如何加速复杂的 for-each

> ID：11968047
> 
> 赞同：1
> 
> 时间：2012-08-15T10:52:14.443
> 
> 标签：performance, xslt, optimization, foreach, xslt-2.0

我是 XSLT 的新手，我在使用以下 for-each 语句时遇到了一些速度问题。我希望有人能给我一些关于如何优化这个的建议吗？

下面的 for-each 循环通过大约 4mb 的 XML。它正在测试以确保每个酒店节点都有描述和目的地。它还在测试每家酒店的评分是否大于 2 但不是 6。XML 中评分的可能值为 0、1、2、3、4、5 或 6。理想情况下，我希望它只选择评分3、4或5，忽略其他。

```
<for-each select="response/results/hotel[
    not(@description = '') and
    @rating &gt; '2' and
    not(@rating = '6') and
    not(@destination = '')              ]">
  <call-template name="hotelparams"/>
  <call-template name="upropdata"/>
  <call-template name="request"/>
  <call-template name="Newline"/>
</for-each> 
```

作为请求，我添加了下面调用的模板。输出是创建制表符分隔的文本文件，然后将其导入 mySQL。顺便说一下，请忽略 upropdata 模板，它很快就会被删除...

```
<xsl:template name="hotelparams">
<xsl:value-of select="@itemcode"/><xsl:value-of select="$tab"/>
<xsl:value-of  select="@cheapestcurrency"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@cheapestprice"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@checkin"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@checkout"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@description"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@destair"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@destination"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@destinationid"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@engine"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@hotelname"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@image"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@nights"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@rating"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@resultkey"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@resultno"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@supplierdestination"/><xsl:value-of select="$tab"/>
<xsl:value-of select="@type"/></xsl:template>

<xsl:template name="upropdata">
<xsl:value-of select="$tab"/>\N<xsl:value-of select="$tab"/>\N<xsl:value-of select="$tab"/>\N<xsl:value-of select="$tab"/>\N<xsl:value-of select="$tab"/>\N<xsl:value-of select="$tab"/>2011-01-01</xsl:template>

<xsl:template name="request">
<xsl:for-each select="/response/request/method"><xsl:value-of select="$tab"/><xsl:value-of select="./@sessionkey"/></xsl:for-each></xsl:template>
<xsl:template name="Newline">
<xsl:text>&#13;</xsl:text></xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:12:28.007

怎么样 ...

```
<xsl:for-each select="response/results/hotel
      [not(@description = '')]
      [@rating = (3,4,5)]">
  <xsl:call-template name="hotelparams"/>
  <xsl:call-template name="upropdata"/>
  <xsl:call-template name="request"/>
  <xsl:call-template name="Newline"/>
</xsl:for-each> 
```

注意：我没有包括目的地检查，因为您没有指定其节点名称。

另外，如果你能消除空描述属性的可能性（也就是说酒店将有一个非空描述或根本没有描述属性），那么你可以使用这种稍微缩写的形式......

```
<xsl:for-each select="response/results/hotel
      [not(@description)]
      [@rating = (3,4,5)]">
  <xsl:call-template name="hotelparams"/>
  etc...
</xsl:for-each> 
```

另请注意，第二个谓词的另一种形式是...

```
 [@rating = (3 to 5)] 
```

一个人可以写...

```
 [(@rating &gt; 2) and (@rating &lt; 6)] 
```

或者

```
 [@rating &gt; 2][@rating &lt; 6] 
```

...但我怀疑这会降低效率，因为 @rating 必须被提取两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:03:37.900

> 下面的 for-each 循环通过大约 4mb 的 XML。它正在测试以确保每个酒店节点都有描述和目的地。它还在测试每家酒店的评分是否大于 2 但不是 6。XML 中评分的可能值为 0、1、2、3、4、5 或 6。理想情况下，我希望它只选择评分3、4或5，忽略其他。
> 
> ```
> <for-each select="response/results/hotel[
>     not(@description = '') and
>     @rating &gt; '2' and
>     not(@rating = '6') and
>     not(@destination = '')              ]">
>   <call-template name="hotelparams"/>
>   <call-template name="upropdata"/>
>   <call-template name="request"/>
>   <call-template name="Newline"/>
> </for-each> 
> ```

我相信性能问题的原因在于被调用的模板（问题中没有提供）——而不是模板`xsl:for-each`本身。

它可以用不同的替代方式重写，但性能提升将是最小的（毫秒），如果有的话。

**请注意，提供的代码*根本不*检查`@destination`属性**的存在。任何`hotel`满足其他条件但没有`destination`属性的元素都会*被*选中。

`description`属性也是如此。

**指定的一种正确方法`xsl:for-each`是**：

```
<xsl:for-each select="response/results/hotel[
     string(@description)
    and
     @rating > 2
    and
     not(@rating > 5)
    and
     string(@destination)
    ]">
  <xsl:call-template name="hotelparams"/>
  <xsl:call-template name="upropdata"/>
  <xsl:call-template name="request"/>
  <xsl:call-template name="Newline"/>
</xsl:for-each> 
```

**更新**：

OP 现在已经提供了被调用模板的代码。

我将使用以下`hotelparams`模板：

```
<xsl:sequence select=
 "string-join
  (
   (@itemcode,
    @cheapestcurrency,
    @cheapestprice,
    @checkin,
    @checkout,
    @description,
    @destair,
    @destination,
    @destinationid,
    @engine,
    @hotelname,
    @image,
    @nights,
    @rating,
    @resultkey,
    @resultno,
    @supplierdestination,
    @type),
   $tab
  )
 "/> 
```

**我会将模板替换为`upropdata`：**

这段代码：

```
 <xsl:sequence select="'&#9;\N&#9;\N&#9;\N&#9;\N&#9;\N2011-01-01'"/> 
```

或者，如果`$tab`真的可以不同于`&#9;`，我将只计算一次并将结果放入全局变量中：

```
<xsl:variable name="vUPropData" select=
"concat($tab,'\N',$tab,'\N',$tab,'\N'$tab,'\N',$tab,'\N2011-01-01')"/> 
```

然后只需：

```
 <xsl:sequence select="$vUPropData"/> 
```

**我会将`request`模板**替换为：

这段代码：

```
<xsl:sequence select=
  "concat($tab,string-join(/response/request/method/@sessionkey, $tab))"/> 
```

由于这不依赖于任何上下文节点（是一个绝对表达式），我将只计算一次并将其放入一个全局变量中（如前一种情况）并且只引用这个全局变量。

最后，在命名模板中生成相同的单个字符是没有意义的。我将用`Newline`全局变量或全局参数替换模板。

**我相信在这次重构之后，代码可能会执行得更快**。

# sql - regexp_like 选择属性字符串包含多个不同单词的行

> ID：11968048
> 
> 赞同：3
> 
> 时间：2012-08-15T10:52:22.067
> 
> 标签：sql, regex, oracle, select

对 regexp 有点陌生，并寻求一些帮助来理解一些功能。我目前正在尝试选择一些数据集，这些数据以一个单词开头，后跟一个空格，然后是几个可能的单词。

示例 1：我基本上希望选择诸如 Product1 绿色、Product1 红色、Product1 蓝色（基本上是绿色、红色或蓝色）之类的数据，但不是：xyz Product1、Product1 黑色、Product1 白色、Product1 垃圾红色。

我尝试了以下查询但没有多大成功：

```
Where regexp_like(item, 'Product1 [green | red | blue]');
Where regexp_like(item, 'Product1 [green, red, blue]');
Where regexp_like(item, '^Product1 [green, red, blue]'); 
```

假设地，有没有人知道我也可以实现“AND”的方法，例如选择在同一属性中包含单词 green 和 red 的项目。

示例 2：类似情况，但尝试匹配标点符号后的单词

```
Where regexp_like (job, 'Commerce [[:punct:]] .*'); 
```

通过此查询，我希望选择具有 Commerce - test Commerce 的工作：abcdefg

这些查询没有像我期望的那样工作，我无法弄清楚为什么。我假设我误解了这些正则表达式的构造。

任何帮助/解释将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:01:54.467

首先，尝试以下

```
WHERE REGEXP_LIKE(ITEM, '^Product1.*(green|red|blue)') 
```

或者

```
WHERE REGEXP_LIKE(ITEM, '^Product1 (green|red|blue)') 
```

或者

```
WHERE REGEXP_LIKE(ITEM, '^Product1 +(green|red|blue)') 
```

取决于您在之后的期望`Product1`- 第一种情况允许零个或多个任何类型的字符，第二种情况需要在 之后有一个空格`Product1`，第三种情况需要在 之后有一个或多个空格`Product1`。

不知道你在第二个到底要去哪里。如果您真的想要以“Commerce”开头的字符串，后跟一个空格，后跟一个标点符号，另一个空格，然后是任何内容，请尝试

```
WHERE REGEXP_LIKE(JOB, '^Commerce [:punct:] .*'); 
```

如果您要查找的不是标点符号，而是“：”或“-”，请尝试

```
WHERE REGEXP_LIKE(JOB, '^Commerce [:-] .*'); 
```

我不是正则表达式方面的专家，但我会尝试提供一些解释：

*   `^`要求以下元素位于字符串的开头。因此，在第一种情况下，`^Product1`意味着“'Product1' 必须位于字符串的开头”。
*   在正则表达式中，括号用于对表达式进行分组，因此在第一种情况下`(green|red|blue)`被组合在一起。
*   `|`是一个逻辑或，所以`(green|red|blue)`意思是“必须是‘绿色’或‘红色’或‘蓝色’之一”。
*   方括号用于字符类。您可以使用预定义的类，例如 :punct: 或 :space:，或者您可以像在`[:-]`. 在正则表达式解释期间，方括号字符类，无论多长，都表示正在匹配的字符串中的单个字符。因此，在正则表达式`^Commerce [:-] .*`中，字符类的`[:-]`意思是“查找冒号或破折号”。如果您想表明您希望在类中一个接一个地出现多个字符，请在类之后使用重复运算符之一（`*`或`+`） - 这样`[abc]*`将匹配所有`abcabcabc`.

还要记住，在正则表达式中，每个字符都意味着某种东西，因此您不能使用空格来使正则表达式更易读，因为在解释表达式时会查找空格。

分享和享受。

* * *

**编辑**

没有注意到你`AND`之前的问题。将多个表达式与在一起的一种简单方法是将它们一个接一个地放置。要查找 (green|red|blue)，后跟一个空格，然后是 (green|red|blue)，一个简单的表达式是

```
WHERE REGEXP_LIKE(ITEM, '^Product1 (green|red|blue) (green|red|blue)') 
```

如果可能在颜色之间允许多个空格

```
WHERE REGEXP_LIKE(ITEM, '^Product1 (green|red|blue) +(green|red|blue)') 
```

可用于。

抵抗是没有用的。

# c - K&R 中边界有限的qsort | 排序过程不会在字符串中的下一个位置继续

> ID：11968050
> 
> 赞同：1
> 
> 时间：2012-08-15T10:52:56.657
> 
> 标签：c, pointers, qsort, kernighan-and-ritchie

很抱歉又一个关于 K&R 计划的问题打扰您。但是有些事情我也不清楚。下面的程序用于对 readlines 函数保存的行进行排序（它真的保存了它们吗？）为此，我们创建了一个指向这些行中的每一行的指针数组。

问题：[1] 为什么我们通过`qsort(lineptr, 0, nlines-1);`我的意思是 nlines-1 而不仅仅是 nlines ？

[2] 假设我输入了两行：

好极了

阿尔法

现在它们是从数组中指向的（我将进行可视化，所以不要因为看到括号中的字符而生气；））

*v[] == [lineptr[0] - 指向 bravo 的指针][lineptr[1] - 指向 alfa 的指针]

根据算法： lineptr[0] 是枢轴，所以我们交换它们；最后 = 0; 进入 for 循环：strcmp of - lineptr[1] 在词法上不小于 lineptr[0]；递增 i 已经完成，所以我们退出 for 循环。现在我们将 last = 0 与 left = 0 交换，所以什么也没有发生。它们已经就位。

但是，如果它们以相同的字母开头，例如。abravo 和 alfa，如果 qsort 仅在数组的索引上从左到右操作意味着不同的行数而不是检查字符串中的下一个字符，它将如何继续下一个字母。

请纠正我，因为所有这些指针都让我发疯。

整个代码：

```
#include <stdio.h>
#include <string.h>
#define MAXLINES 5000 /* max #lines to be sorted */
char *lineptr[MAXLINES]; /* pointers to text lines */
int readlines(char *lineptr[], int nlines);
void writelines(char *lineptr[], int nlines);
void qsort(char *lineptr[], int left, int right);
/* sort input lines */
main()
{
    int nlines;
    /* number of input lines read */
    if ((nlines = readlines(lineptr, MAXLINES)) >= 0) {
        qsort(lineptr, 0, nlines-1);
        writelines(lineptr, nlines);
        return 0;
    } else {
        printf("error: input too big to sort\n");
        return 1;
    }
}
#define MAXLEN 1000 /* max length of any input line */
int getline(char *, int);
char *alloc(int);
/* readlines: read input lines */
int readlines(char *lineptr[], int maxlines)
{
    int len, nlines;
    char *p, line[MAXLEN];
    nlines = 0;
    while ((len = getline(line, MAXLEN)) > 0)
        if (nlines >= maxlines || p = alloc(len) == NULL)
            return -1;
        else {
            line[len-1] = '\0'; /* delete newline */
            strcpy(p, line);
            lineptr[nlines++] = p;
        }
    return nlines;
}
/* writelines: write output lines */
void writelines(char *lineptr[], int nlines)
{
    int i;
    for (i = 0; i < nlines; i++)
        printf("%s\n", lineptr[i]);
}

/* qsort: sort v[left]...v[right] into increasing order */
void qsort(char *v[], int left, int right)
{
    int i, last;
    void swap(char *v[], int i, int j);
    if (left >= right) /* do nothing if array contains */
        return;
    /* fewer than two elements */
    swap(v, left, (left + right)/2);
    last = left;

    for (i = left+1; i <= right; i++)
        if (strcmp(v[i], v[left]) < 0)
            swap(v, ++last, i);
    swap(v, left, last);
    qsort(v, left, last-1);
    qsort(v, last+1, right);
} 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:00:31.060

`strcmp`比较两个字符串的字典顺序。这将负责使用整个字符串进行比较，而不仅仅是第一个字符。

并且该参数`right`采用最右边索引的索引进行排序。如果您有一个长度为 10 的数组，则第一个元素是 0，最后一个元素是 9（即 10 - 1，即`right -1`）。线索在 line`for (i = left+1; i <= right; i++)`中，它将 i 从循环`left+1`到`right`包含两个值。

您调用了它`qsort(lineptr, 0, nlines-1);`，因此它将包括`0`数组的第一个（第一个）元素和`nlines-1`（最后一个）元素。

# jquery - 如何获取事件对象的类

> ID：11968054
> 
> 赞同：0
> 
> 时间：2012-08-15T10:53:26.507
> 
> 标签：jquery

我正在尝试检查单击的 li 元素是否具有“更新”类。

```
$('li.category').live('click', function(event)
{
    //my code here
}); 
```

我试过了：

```
if (($(event.target).hasClass('update')))

if ($(this).hasClass('update')) 
```

两者总是返回false。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:56:02.677

`if ($(this).hasClass('update'))`应该可以正常工作。你确定你正在测试的元素有这个`update`类吗？这是一个例子：

[http://jsfiddle.net/yv3ba/](http://jsfiddle.net/yv3ba/)

# ruby-on-rails - ruby in rails 中的字符串处理带来困难

> ID：11968056
> 
> 赞同：-2
> 
> 时间：2012-08-15T10:53:33.750
> 
> 标签：ruby-on-rails, ruby, mongoid, cancan

我正在使用 Cancan 在我的用户模型中有

```
ROLES = %w[admin user ram] 
```

我想从我自己的模块中获得价值。

```
 all= Role.all
 @all.each do |all|
 all.name
 end 
```

在这里，我可以从滚动模型中携带数据库中的所有值。我想把它放在 %w[] 里面，比如`

```
ROLES = %w[ all= Role.all
     @all.each do |all|
     all.name
     end] 
```

但我不知道格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:57:37.393

尝试`pluck`：

```
ROLES = Role.pluck(:name) 
```

有关 APIdock 的更多信息：http: [//apidock.com/rails/ActiveRecord/Calculations/pluck](http://apidock.com/rails/ActiveRecord/Calculations/pluck)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:02:09.140

%w[] 只是创建数组的一种奇特方式。如果你想要这应该以同样的方式工作。

```
ROLES = @all.collect! {|item| item.name } 
```

# facebook-graph-api - 测试用户没有权限使用内置之类的？

> ID：11968063
> 
> 赞同：1
> 
> 时间：2012-08-15T10:53:56.617
> 
> 标签：facebook-graph-api, testing, facebook-opengraph, facebook-test-users

我搜索了几个小时以找到解决此问题的方法。也许我错过了什么？

我在 Open Graph 中为原生 iOS 应用程序构建了一个内置的 Like Action。为了获得批准，我还建立了一个测试网站，该网站将从那里触发此操作。

现在的问题：它适用于开发人员/管理员**，但不适用于 test-users**。

我收到以下消息：

`(#100) The Action Type likes:Like is not approved, so app xxxxxxx can only publish to administrators, developers, and testers of the app. User xxxxxxxxx is not one of those roles.`

我用 Graph Api Explorer 调用了 graph api：

方法：发布

网址：[https ://graph.facebook.com/me/og.likes](https://graph.facebook.com/me/og.likes)

字段：object = objectURL

有任何想法吗？

# android - 将文件类型与我的应用程序动态关联

> ID：11968069
> 
> 赞同：1
> 
> 时间：2012-08-15T10:54:38.480
> 
> 标签：android, file, associations

我有一个应用程序在我的清单中关联 pdf 文件（通过意图过滤器），所以当有人在默认浏览器中单击 pdf 链接时，我可以使用我的应用程序执行该操作并使用进度条下载它。我的问题是，这是一种我可以在清单中关联其他文件但不是“硬编码”的方式，而是让用户在首选项中选择（或编写）该文件扩展名，我可以从代码中动态添加它。我知道这可能可以通过广播接收器完成，但找不到任何示例或简单代码。我在 bsplayer 设置中看到过类似的偏好菜单 .. 但不能发布图像，因为没有足够的声誉。

我将尝试更详细地解释我的问题，因为我认为下面的答案存在一些误解。

1.  我有一个应用程序，在我的清单中有闲置代码。

    ```
     <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />

            <data android:scheme="http" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.pdf" />
        </intent-filter> 
    ```

2.我启动了我的应用程序，它注册了 .pdf 文件。所以下次我在浏览器中单击 pdf 链接时，会弹出一个窗口，让我选择应该使用哪个应用程序来完成该操作。如果我选择我的应用程序，我的主要活动将启动，我使用 getIntent() 并且我的应用程序使用进度条下载文件。

3.问题是我想下载和其他类似的文件。jpg，png .. 等，但给用户一个选择，或者甚至让他为他想要使用我的应用程序下载的文件编写扩展名，如果点击某个链接会导致那种文件。

4.为了实现这一点，文件扩展名应该在代码中动态添加，而不是在清单中。我正在寻找广播接收器的一些示例，因为该类可以使用 IntentFilter 类，但不能真正理解我应该用它做什么。

5.我的主要目标：启动我的应用程序，有一些微调或编辑框的布局。用户选择/编写一些扩展名（.dwf）。该扩展程序现在已在我的应用程序中注册。如果下次用户浏览互联网时点击指向 .dwf 文件的链接，他可以选择继续使用我的应用程序进行操作。并且文件应该像.pdf一样下载

6.sry 我的英语不好，我们将不胜感激。还有代码；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:03:04.667

```
boolean enabled=prefs.getBoolean(key, false);
int flag=(enabled ?
            PackageManager.COMPONENT_ENABLED_STATE_ENABLED :
            PackageManager.COMPONENT_ENABLED_STATE_DISABLED);
ComponentName component=new ComponentName(MyActivity.this, TargetActivity.class);

getPackageManager()
    .setComponentEnabledSetting(component, flag,
                                PackageManager.DONT_KILL_APP); 
```

根据您的偏好，您可以禁用在您的接收器中处理文件类型的活动`BOOT_COMPLETED`。我相信你必须有不同的活动来处理不同的文件类型，然后有选择地禁用

# windows-phone-7 - wp 7 在 LongListSelector 中禁用滚动

> ID：11968071
> 
> 赞同：0
> 
> 时间：2012-08-15T10:54:44.167
> 
> 标签：windows-phone-7, xaml

我的 wp7 页面上有一个 LongListSelector。是否可以禁用 LongListSelector 上的滚动？

# javascript - Twitter Bootstrap 按钮单击以切换按钮上方的展开/折叠文本部分

> ID：11968072
> 
> 赞同：68
> 
> 时间：2012-08-15T10:54:55.827
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我最近遇到了引导程序，我正在努力扩展英雄示例。我想在我的页面中添加以下行为：

单击按钮（即带有选择器“.row .btn”的元素）时，我希望能够在展开/折叠按钮上方的文本部分之间切换。

这是 HTML 的样子：

```
<html>
  <head>
      <title>Test Page</title>
    <!-- Le styles -->
    <link href="../assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="../assets/css/bootstrap-responsive.css" rel="stylesheet">
  </head>
  <body>
    <div class="navbar navbar-fixed-top">
    </div>

    <div class="container">
      <div class="hero-unit">
        <h1>Hello, world!</h1>
        <p>Blah, blah.</p>
        <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
      </div>

      <!-- Example row of columns -->
      <div class="row">
        <div class="span4">
          <h2>Heading</h2>
           <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div>
      </div>
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap-transition.js"></script>
    <script src="../assets/js/bootstrap-alert.js"></script>
    <script src="../assets/js/bootstrap-modal.js"></script>
    <script src="../assets/js/bootstrap-dropdown.js"></script>
    <script src="../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../assets/js/bootstrap-tab.js"></script>
    <script src="../assets/js/bootstrap-tooltip.js"></script>
    <script src="../assets/js/bootstrap-popover.js"></script>
    <script src="../assets/js/bootstrap-button.js"></script>
    <script src="../assets/js/bootstrap-collapse.js"></script>
    <script src="../assets/js/bootstrap-carousel.js"></script>
    <script src="../assets/js/bootstrap-typeahead.js"></script>

  </body>
</html> 
```

我可以使用 jQuery 破解它，但也许有一种方法可以通过 Bootstrap 方式来实现？- 即使用引导 API？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-12-06T19:29:03.527

使用链接上的 data-collapse 和 data-target 属性可以在不使用额外 JS 代码的情况下执行此操作。

例如

```
<a class="btn" data-toggle="collapse" data-target="#viewdetails">View details &raquo;</a> 
```

[这是一个工作示例](http://jsfiddle.net/Dc6jF/)。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-08-15T11:43:56.053

基于[文档](https://getbootstrap.com/javascript/#collapse)

```
<div class="row">
    <div class="span4 collapse-group">
        <h2>Heading</h2>
        <p class="collapse">Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
        <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
</div> 
```

```
$('.row .btn').on('click', function(e) {
    e.preventDefault();
    var $this = $(this);
    var $collapse = $this.closest('.collapse-group').find('.collapse');
    $collapse.collapse('toggle');
}); 
```

[工作演示](http://jsfiddle.net/Sherbrow/68RXP/)。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-10-04T20:27:15.677

详细说明 Taylor Gautier 的回复（对不起，我没有足够的声誉来添加评论），我会回复 Dean Richardson 关于如何做他想做的事，而不需要任何额外的 JS 代码。纯 CSS。

您可以将他的替换`.btn`为以下内容：

```
<a class="btn showdetails" data-toggle="collapse" data-target="#viewdetails"></a> 
```

并在显示内容时添加一个小 CSS：

```
.in.collapse+a.btn.showdetails:before { 
    content:'Hide details «';
}
.collapse+a.btn.showdetails:before { 
    content:'Show details »'; 
} 
```

[这是他的修改示例](http://jsfiddle.net/8cYFj/)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-10-14T19:33:46.293

我想要一个带有加号和减号按钮的“展开/折叠”容器来打开和关闭它。这使用标准引导事件并具有动画。这是BS3。

![在此处输入图像描述](../Images/7d3c750414556e6f5825d39c1df6509e.png)

### HTML：

```
<button id="button" type="button" class="btn btn-primary" 
  data-toggle="collapse" data-target="#demo">
  <span class="glyphicon glyphicon-collapse-down"></span> Show
</button>

<div id="demo" class="collapse">
  <ol class="list-group">
      <li class="list-group-item">Warrior</li>
      <li class="list-group-item">Adventurer</li>
      <li class="list-group-item">Mage</li>
  </ol>
</div> 
```

### JS：

```
$(function(){
  $('#demo').on('hide.bs.collapse', function () {
    $('#button').html('<span class="glyphicon glyphicon-collapse-down"></span> Show');
  })
  $('#demo').on('show.bs.collapse', function () {
    $('#button').html('<span class="glyphicon glyphicon-collapse-up"></span> Hide');
  })
}) 
```

### 例子：

[http://plnkr.co/edit/aG5BtH?p=preview](http://plnkr.co/edit/aG5BtH?p=preview)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-28T04:34:03.307

html:

```
<h4 data-toggle-selector="#me">toggle</h4>
<div id="me">content here</div> 
```

js：

```
$(function () {
    $('[data-toggle-selector]').on('click',function () {
        $($(this).data('toggle-selector')).toggle(300);
    })
}) 
```

# jquery - 隐藏在 SELECT 中的第一个选项仅适用于第一个选择，而不适用于所有

> ID：11968074
> 
> 赞同：3
> 
> 时间：2012-08-15T10:55:10.430
> 
> 标签：jquery, select, drop-down-menu

我对某些代码有疑问。基本上我想从`<select>`使用 jQuery 中删除第一个选项，它正在工作，但仅适用于第一个选择。如果我有 3 个下拉菜单，则代码仅适用于第一个。我尝试使用`.each`，但老实说，我真的不知道在哪里，这甚至会有所帮助。这是一个html：

```
 <select class="checkb" name="gender">
     <option disabled value="">Gender</option>
     <option value="male">Male</option>
     <option value="female">Female</option>
  </select>  

  <select class="checkb" name="age">
     <option disabled value="">Age</option>
     <option value="under 13">Under 13</option>
     <option value="13-17">13-17</option>
     <option value="18-24">18-24</option>
     <option value="25-44">25-44</option>
     <option value="45-64">45-64</option>
     <option value="65+">65+</option>
  </select>  

  <select class="checkb" name="cinema">
     <option disabled value="">Select your cinema</option>
     <option value="001">Cinema 1</option>
     <option value="002">Cinema 2</option>
     <option value="003">Cinema 3</option>
  </select> 
```

这是jQuery：

```
 $(".checkb option:first").attr('hidden','hidden'); 
```

它完美地隐藏了“性别”文本，但不隐藏“年龄”和“选择你的电影”。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T10:58:59.187

好吧，`:first`告诉 jquery 只作用于第一个孩子（在这种情况下是类的第一个元素），所以删除它并使你的代码如下所示：

```
$('.checkb').each(function () {
  $(this).children('option:first').attr('hidden','hidden');
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T10:59:37.267

该选择器将选择`<option>`它找到的第一个元素，该元素位于具有 class 的元素中`.checkb`，这就是它仅从 first 中删除第一个`<option>`的原因`<select>`。

您可以改为使用[`:nth-child()`](http://api.jquery.com/nth-child-selector/)选择器来获取属于该类`<option>`的第一个子元素的所有元素：`<select>`

```
$('.checkb option:nth-child(1)').attr('hidden', 'hidden'); 
```

编辑：我很好奇解决此问题的三种方法的效率（当前答案中建议的两种方法，以及克里斯托弗肯尼答案的第三种方法），因此决定对其进行测试。你可以在[这里](http://jsperf.com/nth-child-vs-each-first-vs-each-eq)看到结果。

# git - git fetch 的优点；git rebase 起源大师

> ID：11968075
> 
> 赞同：6
> 
> 时间：2012-08-15T10:55:15.290
> 
> 标签：git, github

> **可能重复：**
> [git pull VS git fetch git rebase](https://stackoverflow.com/questions/3357122/git-pull-vs-git-fetch-git-rebase)

我看到一些`git`项目建议您通过以下方式更新项目

```
git fetch; git rebase origin master 
```

这样做有什么好处吗，与

```
git pull 
```

从开源项目的角度来看`github`，因为无论如何你总是信任远程。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T12:26:39.060

如果您没有对分支的本地副本进行任何更改，则两组命令将产生完全相同的历史记录。当您对当前分支副本进行本地提交时，差异就会发挥作用。

如果您`git pull`对远程所做的任何更改都将合并到您的本地分支中，并且您将在历史记录中进行合并提交。另一方面，如果您执行 fetch 后跟 rebase（或`git pull --rebase`），您的本地更改将在远程更改之上重播。这会导致更清晰的历史记录，因为您将有更少的合并提交使历史记录混乱。

由于新提交之前的历史记录与远程的历史记录相匹配，它通常也使您的更改更容易合并到上游。

# reflection - 如何使用反射获取所有字典值的列表？

> ID：11968086
> 
> 赞同：0
> 
> 时间：2012-08-15T10:56:20.440
> 
> 标签：reflection, dictionary

我有一本字典，想使用反射从键/值对中获取所有字典值的列表。这些值可以是不同的类型。键是字符串，我可以通过这种方式获取所有字典键：

```
PropertyInfo p_info_keys = obj.GetType().GetProperty("Keys");
IEnumerable<string> keys = (IEnumerable<string>)p_info_keys.GetValue(obj, null); 
```

我可以使用以下代码查看所有字典值：

```
PropertyInfo p_info_values = obj.GetType().GetProperty("Values");
object values = p_info_values.GetValue(obj, null); 
```

但是，我不确定如何获得可以枚举的东西而不是对象类型。所以，这行代码是有问题的：

```
object values = p_info_values.GetValue(obj, null); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:58:46.170

您可以使用弱类型`IEnumerable`来完成这项工作：

```
IEnumerable values = (IEnumerable)p_info_values.GetValue(obj, null); 
```

现在您可以枚举值：

```
foreach(object value in values)
{
    // ...
} 
```

# ruby-on-rails - 授权一个rest api通过rails使用它

> ID：11968088
> 
> 赞同：1
> 
> 时间：2012-08-15T10:56:29.397
> 
> 标签：ruby-on-rails, rest, authentication

我尝试通过我的rails代码中的rest api使用服务器（hibiscus）。据我所知，木槿 api 没有登录方法或类似方法。当我打电话时：

```
class Hibiscus < ActiveResource::Base  
  self.site = "https://10.0.0.128:8080/webadmin/rest/hibiscus/umsaetze/query/Telekom" 
end 

test = Hibiscus.find(1) 
```

我只得到：

```
ActiveResource::UnauthorizedAccess: Failed.  Response code = 401\.  Response message = Unauthorized. 
```

由于 hibiscus 是一个在线银行应用程序，因此必须进行某种登录。在我的浏览器中，我一登录系统就可以打开相应的链接。

如何像浏览器在 Rails 中一样进行授权？

还是有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-29T07:57:56.193

如果将来有人会再次出现这种情况：您只需在登录浏览器时提供基本身份验证以及您必须输入的登录凭据。

在邮递员中它看起来像这样 [![登录验证](../Images/029e1bbbe9b46cecd665f47e68c53969.png)](https://i.stack.imgur.com/rB6ZI.png)

# c# - WMI 查询显示单个 USB 串行 COM 端口？

> ID：11968098
> 
> 赞同：2
> 
> 时间：2012-08-15T10:57:22.660
> 
> 标签：c#, usb, serial-port, wmi

下面的代码执行 WMI 查询以枚举我计算机上的工作设备（操作系统是 windows 7）。当我有多个设备连接到 USB 插头时，它会检索一个 USB 串行端口。因此，我对这个话题有三个问题：

1) 是否所有 USB 插头都有一个单独的 com 端口，或者所有 USB 都有一个 com 端口？

2）如果我向USB串口发送一个字符串数组，它将如何到达特定设备？

3) 我可以从此查询中提取 USB 端口以将其保留为字符串吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Management;
using System.Windows.Forms;

namespace MyNamespace
{
    class Program
    {
        static void Main(string[] args)
        {
            MyClass x = new MyClass();
            var com = x.GetCOMs();
            foreach (string port in com) 
            {
                Console.WriteLine(port);
            }
            Console.ReadLine();
        }

    }

    class MyClass
    {
        public List<string> GetCOMs()
        {
            List<string> coms = new List<string>();
            try
            {
                ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2",
                "SELECT * FROM Win32_PnPEntity WHERE ConfigManagerErrorCode = 0");

                foreach (ManagementObject obj in searcher.Get())
                {
                    object captionObj = obj["Caption"];
                    if (captionObj != null)
                    {
                        string caption = captionObj.ToString();
                        if (caption.Contains("(COM"))
                        {
                            coms.Add(caption);
                        }
                    }
                }

                m_ParseCOMs(ref coms);
            }
            catch (ManagementException ex)
            {
                MessageBox.Show("An error occurred while querying for WMI data: " + ex.Message);
                return coms;
            }

            return coms;
        }

        private void m_ParseCOMs(ref List<string> comPorts)
        {
            string[] temp;
            List<string> temp2 = new List<string>();
            int index = 0;
            foreach (string s in comPorts)
            {
                string temp3 = "";
                temp = s.Split(' ');
                temp3 += temp[temp.Length - 1] + " - ";
                for (int i = 0; i < temp.Length - 1; i++)
                {
                    temp3 += temp[i] + " ";
                }
                temp2.Insert(index, temp3);
                index++;
            }
            comPorts = temp2;
        }
    }
} 
```

提前谢谢了！

# java - Java 媒体框架 x64bit

> ID：11968100
> 
> 赞同：3
> 
> 时间：2012-08-15T10:57:27.270
> 
> 标签：java, frameworks, media-player, jmf

我尝试在 64 位环境中使用 JMF，但没有找到任何 64 位 jmvfw。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:46:44.263

尝试像 Sai Ye Yan Naing Aye 在第一个答案中所说的 Xuggler ，或者您也可以尝试[FMJ](http://fmj-sf.net/)。

来自 FMJ 网站：

```
FMJ is an open-source project with the goal of providing an alternative to Java Media
Framework (JMF), while remaining API-compatible with JMF. It aims to produce a single
API/Framework which can be used to capture, playback, process, and stream media across
multiple platforms.
Since FMJ is API-compatible with latest JMF, you may use existing JMF codes and run the. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T11:14:05.213

64位环境没有JMF。但是你可以试试[这个](https://forums.oracle.com/forums/thread.jspa?threadID=2132405)form oracle forum。另一个喜欢JMF的选择是[Xuggler](http://www.xuggle.com/xuggler)。尝试使用它。

# jsf - 在对话框关闭时重定向到新页面

> ID：11968101
> 
> 赞同：3
> 
> 时间：2012-08-15T10:57:27.737
> 
> 标签：jsf, dialog, primefaces

关闭primeface对话框后，我正在尝试重定向到新页面。我已经尝试在对话框中使用 ajax 关闭事件来触发支持 bean 中的重定向。

```
<p:ajax event="close" listener="#{bean.goToStartPage}" /> 
```

关闭对话框后还有其他方法可以将重定向放置到新页面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:29:36.607

[此处](http://weblogs.java.net/blog/driscoll/archive/2009/05/redirecting_fro.html)找到的另一个解决方案是在 bean 方法中重定向 ExternalContext。这将重定向页面，无论它是否是 Ajax。

```
FacesContext ctx = FacesContext.getCurrentInstance();
ExternalContext extContext = ctx.getExternalContext();

String url = extContext.encodeActionURL(ctx.getApplication().getViewHandler().getActionURL(ctx, "/start.xhtml"));

try {
     extContext.redirect(url);
} catch (IOException ioe) {
    throw new FacesException(ioe);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:30:35.870

您可以将 JSF 配置为对 AJAX 请求进行正确的重定向，但是如果您不希望以这种方式执行重定向，我将调用一个隐藏按钮，该按钮将触发整个页面回发到您的托管 bean 方法。

```
<p:ajax event="close" oncomplete="hiddenBtnWidget.jq.click()" />

...

<p:commandButton id="hiddenBtn" widgetVar="hiddenBudgetWidget" ajax="false"
    actionListener="#{bean.goToStartPage}" style="display: none;" /> 
```

只要您的侦听器正在执行重定向，那么这将重定向页面。

# node.js - 在 Node.js 中访问 Azure ServiceConfiguration 设置

> ID：11968102
> 
> 赞同：1
> 
> 时间：2012-08-15T10:57:28.173
> 
> 标签：node.js, azure, iisnode

我即将进入构建通过 Windows Azure 上的 iisnode 运行的 Node.js 应用程序的 beta 部署阶段。在设置了多个实例以及生产/暂存分离之后，我的研究使我得出以下结论：

> 如果我想在不重新部署代码的情况下即时更改配置设置，我需要使用服务配置`.cscfg`文件。

我的问题是我已经在我可能想要更改的元素中存储了各种配置设置`<appSettings>`，`<iisnode>`这些`web.config`设置当前通过进程全局对象在我的 Node 应用程序中公开。

我查看了[MSDN](http://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-configure-a-cloud-service/)、[Node 文档](http://nodejs.org/api/process.html#process_process)和[SO](https://stackoverflow.com/questions/7915562/what-is-the-relationship-between-web-config-connection-strings-and-serviceconfig)（通常的），但找不到 Node 是否可以或可以以相同的方式公开服务配置设置。如果没有，有没有办法可以将它们公开给我的应用程序？

**编辑：**更具体地说，我真的只是希望将`node_env`设置从`web.config`服务配置移动，因为我希望能够通过配置更改从暂存切换到生产设置。原因 - 我们使用 IP 切换在 staging 和 prod 之间进行交换，并且两者之间存在一些非常小的差异（例如，它使用的 RESTful Web 服务的 URL）。

我也知道我可以`node_env`在`iisnode.yaml`iisnode 读取的文件中进行配置，但这仍然会回收应用程序，并且我不想修改**x** yaml 文件并重新部署，其中**x**是生产/登台应用程序的实例数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T02:26:56.467

您可以通过 Azure SDK for Node.js 访问配置设置。

安装：

`npm install azure`

要获取配置设置：

```
var azure = require('azure');

azure.RoleEnvironment.getConfigurationSettings(function(error, settings) {
  if (!error) {
    // You can get the value of setting "setting1" via settings['setting1']
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:27:39.493

这些设置似乎保存在 Azure 机器的 c:\Config\ 文件夹中的 XML 文件中。

我确定您不*应该*直接访问这些，但您可以轻松解析此 XML 并在节点启动时读取设置。

# c# - 如何通过初始化部分类的构造函数来调用部分类中的对象？

> ID：11968103
> 
> 赞同：0
> 
> 时间：2012-08-15T10:57:30.720
> 
> 标签：c#, asp.net-mvc-3, constructor, partial-classes

我正在使用 C# 开发 ASP.NET MVC3。我收到如下错误

```
Type 'Test' already defines a member called 'Test' with the same parameter types 
```

我的代码是：

```
public partial class Test
{
    Test()
    {
       //some code
    }
}

public partial class Test
{
    Test()
    {
        days = new List<SelectListItem>();
    }

    public IList<SelectListItem> days { get; set; }
} 
```

两个类都在不同的文件中。
我不想修改第一个部分类。那么我该如何处理这种我必须调用同一个构造函数两次的情况呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T10:58:52.763

一种方法是`partial`方法：

```
public partial class Test
{
    partial void OnCtor() // implement the partial method
    {
       //some code
    }
}

public partial class Test
{
    partial void OnCtor(); // declare the partial method
    Test()
    {
        days = new List<SelectListItem>();
        OnCtor();          // invoke the partial method **if implemented**
    }

    public IList<SelectListItem> days { get; set; }
} 
```

关键：如果你没有在某个地方添加一个*带有实现*`OnCtor`的方法，那么它会**完全从调用代码中消失**，即调用没有被编译。

 ***这是代码生成器中的一种常见方法，因为它允许生成的代码发布和宣传扩展点，然后开发人员可以在他们自己的部分类部分中自定义扩展点，但如果不这样做，则影响为零（性能等）实施的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T11:01:39.117

我会通过摆脱不必要的构造函数来解决它：

```
public partial class Test
{
    Test()
    {
       //some code
    }
}

public partial class Test
{
    private IList<SelectListItem> _days = new List<SelectListItem>();

    public IList<SelectListItem> days {
        get { return _days; }
        set { _days = value; }
    }
} 
```***

# login - 在 pyrocms 中显示登录/注销链接？

> ID：11968106
> 
> 赞同：1
> 
> 时间：2012-08-15T10:58:20.707
> 
> 标签：login, logout, pyrocms

希望大家都身体健康！

我是 PyroCMS 的新手，我面临着基于用户会话显示登录和注销链接的问题。我努力在谷歌上寻求帮助，但可以找到适当的帮助。

```
{ if'{session:data name="user_id" != "" }'}
      <li><a href="{{url:base}}users/logout">logout</a></li>
{/else}
      <li><a href="{{url:base}}users/login">log in</a></li>
{/if} 
```

它不工作。请帮我解决这个问题！

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T11:26:46.093

PyroCMS 有一个标签专门用于检查用户是否已经登录。试试这样的：

```
{{ if user:logged_in }}
  <a href="{{ url:site uri='users/logout' }}">Logout</a>
{{ else }}
  <a href="{{ url:site uri='users/login' }}">Login</a>
{{ endif }} 
```

# jquery - jQuery.each() 不运行

> ID：11968109
> 
> 赞同：0
> 
> 时间：2012-08-15T10:58:33.803
> 
> 标签：jquery, count, each, html

```
$(function(){
    $(".link").each(function(){
        var spany =$('span').size();
        var word = $('.button').text().length;
        var a = 5;
        if(a > word){
            $("#control").append("small");
        } else {
            $("#control").append("big");
        }
    });
    return false;
}); 
```

我对 jquery 及其`each`功能有疑问。`each`不运行。
在我的示例中，我有第二个跨度 5 个字（大）但第一个跨度 4 个字（不大）。我想要输出 1.span 小，2.span 大。我怎样才能修复我的代码来得到这个？

[http://jsfiddle.net/GNUUH/](http://jsfiddle.net/GNUUH/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:02:26.977

试试这个：

```
$(function(){
    $(".link").each(function(){
        var spany =$(this).find('span').size();
        var word = $(this).find('.button').text().length;
        var a = 5;
        if(a > word){
            $("#control").append("small");
        } else {
            $("#control").append("big");
        }
    });
    return false;
}); 
```

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:03:32.017

您当前的选择器`span`将`.button`搜索整个文档。用于`$(this).find`仅在当前`.link`元素下方搜索：

```
var spany = $(this).find('span').size();
var word = $(this).find('.button').text().length; 
```

[jsFiddle](http://jsfiddle.net/GNUUH/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:05:50.080

对于每个循环的每次迭代，您都在浏览页面上的每个跨度。

检查这个解决方案... [http://jsfiddle.net/GNUUH/7/](http://jsfiddle.net/GNUUH/7/)

# javascript - 使用 img 十六进制代码进行 xss 攻击

> ID：11968111
> 
> 赞同：1
> 
> 时间：2012-08-15T10:58:45.240
> 
> 标签：javascript, html, xss

我最近发现 XSS 是我网站的一个大线程。我已经设置了一些措施来防止这种情况，比如过滤用户输入，删除与 javascript 相关的任何内容

但是我最近发现javascript可以编码成十六进制代码可以在html img代码中使用，我尝试自己制作，我在一个XSS预防网站上找到了这个：

```
<img src=&#x6A&#x61&#x76&#x61&#x73&#x63&#x72&#x69 &#x70&#x74&#x3A&#x61&#x6C&#x65&#x72&#x74&#x28&#x27 &#x58&#x53&#x53&#x27&#x29> 
```

这段代码是javascript：

```
javascript:alert('XSS'); 
```

问题是，这段代码不能正常工作，我无法测试它是否真的有效。

这是 js 小提琴：http: [//jsfiddle.net/CCgT3/](http://jsfiddle.net/CCgT3/)

问题是它应该输出为

```
<img src="javascript:alert('XSS')"> 
```

但是小提琴显示的是这样的（萤火虫）：

```
<img &#x58&#x53&#x53&#x27&#x29="" &#x70&#x74&#x3a&#x61&#x6c&#x65&#x72&#x74&#x28&#x27="" src="javascri"> 
```

十六进制有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:17:19.897

尝试删除 src 属性中的空格：

```
<img src=&#x6A&#x61&#x76&#x61&#x73&#x63&#x72&#x69&#x70&#x74&#x3A&#x61&#x6C&#x65&#x72&#x74&#x28&#x27&#x58&#x53&#x53&#x27&#x29> 
```

然后它应该工作。

# css - IE7 和列表样式图像对齐问题

> ID：11968114
> 
> 赞同：1
> 
> 时间：2012-08-15T10:58:49.607
> 
> 标签：css, xhtml, internet-explorer-7

我有一个使用列表，`list-style-image`列表图像到处都是；我不能只添加填充，因为行的大小取决于文本行。

您可以在此处查看页面右下角的列表：http: [//www.condorstudios.com/stuff/temp/index.php](http://www.condorstudios.com/stuff/temp/index.php)

我想我可以将它创建为列表项的背景并填充内容；但是在我决定改变它的编码方式之前还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:25:52.863

根据我的经验，list-style-image 是有问题的跨浏览器。改为使用图像作为背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:35:08.150

我相信在 IE7 中对此的支持是空的：http: [//www.w3schools.com/cssref/pr_list-style-image.asp](http://www.w3schools.com/cssref/pr_list-style-image.asp)

您可以使用 :before 或更好地制作背景图像。

# arrays - 检查数组的所有元素是否相同

> ID：11968120
> 
> 赞同：3
> 
> 时间：2012-08-15T10:59:19.593
> 
> 标签：arrays, vba

我不是 VBA 专家，但我需要确定数组中的所有元素是否相同。是否有一个函数可以用来检查所有元素是否相同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T13:37:10.770

[这与KopBuH 的答案](https://stackoverflow.com/a/11969220/698590)基本相同，但我更喜欢这种循环/布尔赋值的方法......

```
Function ElementsSame(arr As Variant) As Boolean
    Dim l As Long
    ElementsSame = True
    For l = 1 To UBound(arr)
        If arr(0) <> arr(l) Then
            ElementsSame = False
            Exit For
        End If
    Next l
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T12:25:18.163

您可以使用此函数检查任何类型的变量的任何数组。如果此函数返回 TRUE，则表示数组中的所有元素都相等。

```
Function IsAllElementsTheSame(arr As Variant) As Boolean
    Dim buf As Variant
    buf = arr(0)
    Dim i As Integer
    i = 0
    Do While (buf = arr(i) And i < UBound(arr))
    i = i + 1
    Loop
    IsAllElementsTheSame = False
    If i = UBound(arr) And buf = arr(UBound(arr)) Then
        IsAllElementsTheSame = True
    End If
End Function 
```

# javascript - 用单引号括起来时，正则表达式不起作用

> ID：11968122
> 
> 赞同：0
> 
> 时间：2012-08-15T10:59:30.293
> 
> 标签：javascript, regex

我需要将正则表达式括在引号中，以便可以在其中添加另一个 javascript 变量，但这会阻止它工作。

这是工作示例...

```
var re = new RegExp(/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/); 
```

而我最终想要实现的将看起来像这样（但经过修改使其有效）：

```
var re = new RegExp('^'+element.defaultValue+'|(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$'); 
```

这允许日期格式为 DD/MM/YYYY 或输入字段的默认值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T11:04:52.583

在字符串文字中，您需要转义所有反斜杠。例如`'\d'`实际上只是字符串`'d'`，因为 Javascript 解析器将反斜杠作为字符串转义序列的开始。构造函数需要字符串中的`RegExp()`实际反斜杠，因此您必须转义它们：

```
 `'|(0?[1-9]|[12][0-9]|3[01])[\\/\\-](0?[1-9]|1[012])[\\/\\-]\\d{4}$'` 
```

如果您尝试放入字符串的默认值包含任何特殊字符，您也必须对它们进行转义。要么逃避他们，`element.defaultValue`要么使用[这个问题](https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript)的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:07:27.723

您不需要*转义*斜杠，但要*转义*反斜杠：

`new RegExp('^'+element.defaultValue+'|(0?[1-9]|[12][0-9]|3[01])[/\\-](0?[1-9]|1[012])[/\\-]\\d{4}$');`

# mysql - MySQL：查询加入日期列表，但如何在每个日期显示多个条目

> ID：11968126
> 
> 赞同：0
> 
> 时间：2012-08-15T10:59:39.593
> 
> 标签：mysql

我有一个看起来像这样的查询（为了清楚起见，我试图去掉不相关的字段/连接）：

```
SET @num = -1;
SELECT 
*,
CAST(DATE_ADD( '2012-04-01', interval @num := @num+1 day)AS DATE) AS date_sequence, 
DAYOFWEEK(DATE_ADD('2012-04-01', interval @num+1 day)) AS day_week
FROM batch AS b1

left join (
select
batch.`startedDate` AS batch_startedDate,
epiRun.`runType` AS epiRun_runType
.... other fields selected.........
from batch
left join `epiRun` epiRun ON epiRun.`batchID`= batch.`keyID`
.......other joins........
WHERE batch.`startedDate` >= '2012-04-01' AND batch.`startedDate` <= '2012-04-18' 
ORDER BY  batch.`startedDate`ASC) 
AS b2 ON cast((b2.`batch_startedDate`) AS DATE)=CAST(DATE_ADD('2012-04-01', interval @num+1
day)AS DATE)

WHERE
(DATE_ADD('2012-04-01', interval @num+1 day) <= '2012-04-18') 
```

嵌套选择查询在自己运行时按我预期的方式执行。这个查询有几个问题：

- 批处理表中的每个字段都被选中，但由于这是针对 iReport 的，所以问题不大

- 我得到了从 4 月 1 日到 4 月 18 日的日期列表，但如果我一天有多个批次，那么我只会显示一个 - 理想情况下，我希望日期列中有多个相同的条目，每个批次都有一个唯一的条目。重要的是我可以看到没有批次的日子。

我有的表示例：

```
Date          Batch
01/04/2012    TS01
02/04/2012    TS03
03/04/2012    null 
```

以及我想生成的内容：

```
Date          Batch
01/04/2012    TS01
01/04/2012    TS02
02/04/2012    TS03
02/04/2012    TS04
03/04/2012    null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:53:19.553

I personally would create a separate "dates" table and populate it with all the dates from say 1/1/2000 through 12/31/2050 (or whatever date range will cover all potential queries) and then do a left join from that table to the batch and epiRun tables.

I think that this is a much cleaner way to do what you are looking for and will give you exactly the results you desire.

# c++ - 对 C++ #include 感到困惑

> ID：11968127
> 
> 赞同：0
> 
> 时间：2012-08-15T10:59:43.680
> 
> 标签：c++, class, hyperlink, compilation, header

我的项目有这个文件夹结构：

```
Project/
--Classes/
----Class1.h
----Class1.cpp
--main.cpp 
```

“Class1.h”包含方法定义，“Class1.cpp”是“Class1.h”的源代码。

“Class1.h”的源代码是这样的：

```
class Class1 {
  public:
    void do_something();
}; 
```

“Class1.cpp”的源代码是这样的：

```
#include "Class1.h"

void Class1::do_something() {
  //
} 
```

“main.cpp”的源代码是这样的：

```
#include "Classes/Class1.h"

int main(int argc,char** args) {
  Class1* var = new Class1();
  var->do_something();
  return 0;
} 
```

但是，在编译“main.cpp”时，编译器不知道Class1中方法的实现在哪里，所以会显示关于未定义引用的链接错误。

我是否必须在命令行中添加任何路径，以便编译器知道它必须编译哪些源文件？如何告诉编译器它也必须编译“Class1.cpp”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T11:04:40.153

您需要将项目中的所有文件提供给编译器，而不仅仅是“main.cpp”。[在这里](http://www.network-theory.co.uk/docs/gccintro/gccintro_11.html)，您可以阅读有关与 Gcc 一起编译乘法文件的基础知识。

另一种选择是将您的类编译为动态或静态库，但如果您对库不太熟悉，则应该先将它们一起编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T11:03:39.393

正确的方法是在文件中包含标头`Class1.cpp`。这样，如果 Class1.cpp 被编译为库，您可以使用头文件来获取声明。

*反之，如果您将直接使用 Class1.cpp，则将其与*您的项目一起编译。您应该包含`Class1.cpp`在您的 main.cpp 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T11:11:42.133

您需要了解如何构建（编译和链接）C++ 应用程序。这个主题通常不会在有关 C++ 的编程书籍中描述，并且是唯一的方法 - 谷歌和带有文章的编程社区站点。

快速的答案是：

```
g++ -c Classes/Class1.cpp -o Class1.o
g++ -c main.cpp -o main.o
g++ Class1.0 main.0 -o ProjectName 
```

这是一组用于编译和链接程序的简单命令。通常它会通过构建系统（make、qmake、cmake、waf、scons、ant 等）来完成。此外，IDE 无需额外配置即可构建程序，例如 Visual Studio。

# html - xcode 4中的Phonegap科尔多瓦

> ID：11968128
> 
> 赞同：0
> 
> 时间：2012-08-15T10:59:50.730
> 
> 标签：html, xcode, cordova

我已经在我的 Mac 上安装了 phonegap，但是当我单击创建一个新项目时，我无法在 xcode 中选择一个 phonegap 应用程序。

为什么phonegap不显示在xcode中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:34:03.540

通过加载 PhoneGap 下载附带的模板，您可以在 XCode 中创建一个“PhoneGap 应用程序”。请参阅 iOS 版 PhoneGap 入门指南（[此处链接](http://docs.phonegap.com/en/2.2.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)）。你基本上需要运行一个终端命令来创建一个默认的 XCode 项目，然后在 XCode 中打开它。

# iphone - 在 iOS 中实现背景音频并对其进行故障排除

> ID：11968130
> 
> 赞同：15
> 
> 时间：2012-08-15T10:59:55.060
> 
> 标签：ios5, iphone, ios5, avaudioplayer, audioqueue, avaudiosession

> *StackOverflow 上有很多关于 iOS 中背景音乐播放的问题。没有人完全探索所有边缘情况，这个问题的目的是成为 iOS 上背景音频问题中的最后一句话*

## 定义和假设

所有代码、问题和示例均参考[ios5](/questions/tagged/ios5 "显示标记为“ios5”的问题")。

**“背景”** ——当用户按下主页按钮或电源按钮时应用程序进入的状态（因此设备显示锁定屏幕）。该应用程序还可以使用多任务切换器或 iPad 上的多任务手势置于后台。

**"audio"** — 使用 AudioQueue 播放的音频（包括 AVAudioPlayer）

## 先决条件

据我了解，让应用程序在后台播放音频有两个要求。

1.  设置`UIBackgroundModes`为`audio`_`Info.plist`
2.  `[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];`

# 要求

我的用例是在后台播放相对较长的音频（音乐）。可能有数百首曲目，应用程序将按顺序播放它们。可以认为音频将无限期地播放。

该应用程序将通过暂停播放来处理中断。

# 问题

我在以下方面取得了喜忧参半的成功：

```
[[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:...]; 
```

允许在后台播放音频。但我对它是否需要以及它与以下内容有何不同感到困惑：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

## 边缘案例

1.  中断。如果您注册以接收音频中断（电话等）的通知，请成为`AVAudioPlayer`. 例如，如果您在中断开始时暂停或停止音频并在结束时恢复音频，如果中断超过 10 分钟（后台任务完成允许的最长时间），您的应用程序是否会暂停？

2.  如果调用 Lock 或 Home，模拟器将停止音频，同时使用：

    ```
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
    ```

但是，这适用于设备。这是一个已知的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:29:11.363

我对 GPS 背景模式和背景音频有一些经验。这与您的情况不完全相同（您想播放长音频文件，而我播放短消息），但我可以告诉您：

*   `beginBackgroundTaskWithExpirationHandler`这个选择器在后台被调用时有一个目的：避免应用程序返回到暂停状态，在这种状态下不能再调用任何代码（你被“冻结”了）。因此，只要您在使用 调用`beginBackgroundTaskWithExpirationHandler`并终止长时间运行的任务之前`beginBackgroundTaskWithExpirationHandler`，您就会使用 CPU，并消耗电池。
    我真的怀疑在后台播放文件是否应该像运行应用程序一样使用 iPhone 的电池，所以我怀疑这`beginBackgroundTaskWithExpirationHandler`是否真的参与了你的流程。

*   模拟器：不要依赖模拟器：它没有完全实现后台模式。实际上，当您单击主页按钮时，您的应用程序会进入后台，但是在此阶段，您仍然可以在应用程序中执行代码。一段时间后，您的应用程序将暂停（=冻结），并且您的代码执行将暂停以节省电池。这种挂起状态永远不会出现在模拟器上。

*   中断。来电时暂停/恢复播放不取决于您。平台负责此操作，您可以使用[AVAudioSessionDelegate](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSessionDelegate_ProtocolReference/Reference/Reference.html)对此做出反应。但是，您可以通过设置音频会话的属性来影响会话与其他音频声音交互的方式（例如，请参阅[kAudioSessionProperty_OverrideCategoryMixWithOthers](http://developer.apple.com/library/ios/documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html#//apple_ref/c/econst/kAudioSessionProperty_OverrideCategoryMixWithOthers)）。所以流程更多：您描述音频会话应与系统其余部分交互的方式，系统将相应地混合声音，如果您的会话被中断，您将收到 AVAudioSessionDelegate 通知。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T12:24:55.747

我已将以下代码用于设备控制 -

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder]; 
```

用于注册监听遥控器。完成后删除它 -

```
[[UIApplication sharedApplication] endReceivingRemoteControlEvents];
[self resignFirstResponder]; 
```

使应用程序**canBecomeFirstResponder** -

```
- (BOOL)canBecomeFirstResponder {
    return YES;
} 
```

使用委托方法来处理 iPhone 控制，例如双击主页按钮时播放和暂停

```
- (void)remoteControlReceivedWithEvent:(UIEvent *)event {
    //if it is a remote control event handle it correctly
    if (event.type == UIEventTypeRemoteControl) {
        if (event.subtype == UIEventSubtypeRemoteControlPlay) {
           [audioPlayer play];
            NSLog(@"play");
        } else if (event.subtype == UIEventSubtypeRemoteControlPause) {
           [audioPlayer stop];
             NSLog(@"pause");
        } else if (event.subtype == UIEventSubtypeRemoteControlTogglePlayPause) {
            NSLog(@"toggle");
        }
    }
} 
```

# javascript - 如何将外部javascript文件注入div

> ID：11968132
> 
> 赞同：0
> 
> 时间：2012-08-15T10:59:57.237
> 
> 标签：javascript, jquery

如何将外部 javascript 文件注入 div。当我尝试使用下面的代码设置它时，div 'toupdate' 不会用新的 javascript 文件更新。

```
<script type="text/javascript">

$(document).ready(function () {
      $('#toupdate').html('<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/5968383.js"></script>');
});

</script>

    <body>
    <div id="toupdate">
    <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script>
    </div>

    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:01:20.433

你可以使用 $.getScript("URL") 函数 [定义](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:05:08.643

您的替换代码在 div 'toupdate' 加载之前执行，您需要将`<script>`标签移动到 div 之后，或者将替换代码放在`$(document).ready()`这样的函数中：

```
$(document).ready(function () {
  $('#toupdate').html('<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/5968383.js"></script>');
}); 
```

编辑：

测试和工作示例：

```
$(document).ready(function() {
    $('#toupdate').children('script').attr('src', 'http://static.polldaddy.com/p/5968383.js');
});​ 
```

JSfiddle：http: [//jsfiddle.net/m7q3H/45/](http://jsfiddle.net/m7q3H/45/)

# python - 如何在 python dicts 上使用 $push/$addToSet mongodb 更新修饰符

> ID：11968136
> 
> 赞同：3
> 
> 时间：2012-08-15T11:00:08.960
> 
> 标签：python, mongodb

Mongodb 更新提供了`$push`附加到数组的修饰符。我的问题是我希望这发生在一个字典上，例如

如果我的记录最初看起来像这样：

```
{"collaborations":{'id1':{'role':'dev','scope':'dev'}}} 
```

我想在“collaborations”字段字典中添加另一个项目（下面的“id2”），看起来像这样：

```
{"collaborations":{'id1':{'role':'dev','scope':'dev'},'id2':{'role':'qa','scope':'qa'}}} 
```

我正在尝试`$push`：

```
my_record.update({match_criteria},{$push,{"collaborations":{'id2':{'role':'qa','scope':'qa'}}}}) 
```

还有`$addToSet`：

```
my_record.update({match_criteria},{$,{"collaborations":{'id2':{'role':'qa','scope':'qa'}}}}) 
```

使用这两种方法，mongodb 会抛出错误“无法将`$addToSet`（`$push`）修饰符应用于非数组”。

如何为 dict 类型做到这一点？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T11:07:54.720

问题是`$addToSet`and`$push`修饰符适用于数组。

要更新子文档（这就是您需要的），只需使用`$set`带有点符号的修饰符来访问子文档（`field.subfield`）：

```
my_record.update({
    match_criteria
}, {
    '$set': {
        'collaborators.id2': {
            // new document fields here
        }
    }
}) 
```

# c# - 后台Win8视频采集

> ID：11968137
> 
> 赞同：-1
> 
> 时间：2012-08-15T11:00:10.130
> 
> 标签：c#, windows-8, microsoft-metro

当我的应用程序（Windows 8 RP Metro 风格）不在前台时，我可以从网络摄像头录制视频吗？我需要为此使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:54:43.383

这是不可能的。一旦应用程序切换到后台，您的应用程序将停止接收视频。

对此没有解决方法或“解决方案”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:00:20.793

这是不可能的，您的用户也可能不希望这样。为什么要在用户不知道它正在发生的情况下捕获视频？

# svn - NetBeans SVN：“显示注释”不起作用

> ID：11968139
> 
> 赞同：9
> 
> 时间：2012-08-15T11:00:21.393
> 
> 标签：svn, netbeans

当我尝试做 Team | Show Annotations it get's "stuck"...进度条将显示"Annotating..."，文件的左侧，注释应该显示的位置显示"Computing..."这些将被卡住，直到我执行“隐藏注释”或我手动取消任务。

当我从 svn 1.6.x 更改为 1.7.x（我认为）时出现了这个问题，但那是几个月前的事情，所以我记不太清了。

我正在运行 Netbeans 7.1.1、java 1.7.05 64 位、TortoiseSVN 1.7.7、Windows 7。

我尝试过使用不同服务器版本的两个不同存储库。

有任何想法吗？我宁愿不再改回运行 svn 1.6 ......

编辑：我也试过 Netbeans 7.2，同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T06:40:21.413

在阅读了[NetBeans 7.x 和 Subversion 1.7.1](https://stackoverflow.com/questions/7943034/netbeans-7-x-and-subversion-1-7-1)和答案后，我意识到在 NB-Tools-Misc-Versioning-SVN-Path 下我没有输入任何内容，所以在放入 C:/Program Files/TortoiseSVN/bin/ 之后一切正常.

我没想到这很重要，因为其他 svn 命令似乎在该路径中没有任何作用？例如更新？和历史？奇怪的。但现在它起作用了！:)

# wpf - 在运行时获取用户控件的设计高度/宽度

> ID：11968140
> 
> 赞同：0
> 
> 时间：2012-08-15T11:00:25.467
> 
> 标签：wpf, user-controls, height, width

我正在编写一个 WPF 应用程序，其中用户控件在运行时添加到 TabControl - 为每个用户控件创建一个选项卡。那么问题是......这些控件可以有不同的宽度和高度，这意味着tabcontrol必须相应地调整自己的宽度和高度。我认为这将是一个简单的练习，只需访问用户控件的 Height/ActualHeight 属性，但这些是 NaN/0.0 是否无法获取此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:45:08.683

我可以提出下一个解决方案：

当您将新控件添加到 TabControl（它是 TabControl 还是 TabItem？）时，请设置 Width 和 Height 属性的绑定。创建一个转换器以将添加的控件的大小转换为所有者的大小（以防您需要最小大小）。

ActualWidth 和 ActualHeight 属性可能为 0，因为尚未测量控制。看这个[线程](https://stackoverflow.com/questions/1695101/why-are-actualwidth-and-actualheight-0-0-in-this-case)

# objective-c - UISwitch 控制不同的视图

> ID：11968144
> 
> 赞同：0
> 
> 时间：2012-08-15T11:00:37.800
> 
> 标签：objective-c, uiimageview, uiswitch

我是`iOS`编程初学者，我想知道如何`UIImageView`使用`UISwitch`. 我已经在同一个视图中完成了它，但我想控制`UIImageView`视图 3 中的哪个（在我的情况下）和`UISwitch`视图 1 中的哪个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:24:47.613

因此，您需要一些了解视图 0、1、2 的对象。如果它们在选项卡栏或导航栏中，则很容易获得视图控制器数组，并且假设您确切知道视图在数组中的位置，您可以获得对控制器的引用。或者，您可以让其他一些对象（如应用程序控制器）了解视图。

您的应用显示带有开关的视图 1，并且用户更改了开关。view1 中的 IBAction 然后获取对 view3 的引用，并使用 view3 提供的一些方法将图像更改为您想要显示的内容。

或者，您可以向 appDelegate 之类的对象发送消息，并要求它告诉视图 3 将其图像更改为某某。

# eclipse - 如何在 Eclipse 中重复输入

> ID：11968151
> 
> 赞同：1
> 
> 时间：2012-08-15T11:01:29.350
> 
> 标签：eclipse

我想用（例如）50个'#'字符在代码中创建一个分隔符，如下所示：

```
################################################## 
```

在 vim 或 emacs 中，它可以通过“重复输入”功能来完成。

你知道有什么方法可以在 Eclipse 中重复一个字符 n 次吗？（如果没有插件会很棒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:21:52.907

选项将包括为 Eclipse 安装 VIM 插件，如以下问题所述：[What vim plugins are available for Eclipse?](https://stackoverflow.com/questions/2220653/what-is-the-best-vim-plugin-for-eclipse)

或者，

一个非常简单的**[AHK](http://www.autohotkey.com/)**脚本可以很好地做到这一点：

我刚刚测试过的代码是：

```
#Persistent
#SingleInstance force
SetTitleMatchMode 2

Hotkey, IfWinActive,ahk_class SWT_Window0 
    Hotkey,#r,repeatchar
    Hotkey,!+^r,repeatchar
return

repeatchar:
    sendinput ^c ;copy the selected character
    sendinput {%clipboard% 50}
return 
```

该脚本将在 Eclipse 中按`Windows + R`或重复所选字符串 50 次`Alt + Ctrl + Shift + R`。

**[我在这里](https://www.dropbox.com/sh/kkr8iza99yzj7b2/4hRjI3mDVX)**共享了脚本以及它的可执行文件。可执行文件是通过编译脚本创建的。**[如果您不喜欢执行它，您可以从这里](http://www.autohotkey.com/download/)**下载 AHK 的便携式版本。使用便携式版本，您必须手动将`.ahk`文件关联到 Open with `AutoHotkey.exe`.

**[这](http://youtu.be/2XzlaJqPpFE)**是一个（不太出色的）截屏视频，展示了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:25:53.333

You asked for an alternative without any plugin. Input the `#` character at some place and select it. Now hit `Ctrl`-`F` to open Find/Replace, select the "Regular Expressions" option and use `$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0$0` as replacement string. It will replace the search term by 50 times itself. As the dialog remembers all entries, you can easily reuse that pattern the next time.

# c# - 使用“静态外部 int 系统（字符串 str）”时的 PInvokeStackImbalance

> ID：11968154
> 
> 赞同：1
> 
> 时间：2012-08-15T11:01:50.143
> 
> 标签：c#, msvcrt

我正在尝试在 C# 中使用 system(string str) 命令进行 dos 操作。

```
namespace XYZ
{
    internal class Program
    {
        [DllImport("msvcrt.dll")]
        static extern int system(string str);

        static void Main(string[] args)
        {
             string Command = Console.ReadLine();
             system(Command); 
             /* Excutes command, then "PInvokeStackImbalance". */
        }
    }
} 
```

我知道 using`static extern int system(string str)`是一个糟糕的解决方案，但我尝试了其他不起作用的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:36:14.310

您忘记指定调用约定：

```
[DllImport("msvcrt.dll", CallingConvention = CallingConvention.Cdecl)]
static extern int system(string str); 
```

我通常会尝试解释原因，但这在这里似乎没有必要；）否则这不太可能解决您的问题，无论它可能是什么，它与

```
Process.Start("cmd.exe", "/c " + str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:24:58.427

一般来说，你做错了。此函数适用于基于 C/C++ 本地控制台的应用程序。在 C# 中，您拥有 System.Diagnostic 命名空间，您可以使用它轻松启动新进程。请看这里：[C#中的C++“system()”](https://stackoverflow.com/questions/10806427/c-system-in-c-sharp)

当然，您**也可以**使用该功能。可能调用异常是因为 DllImport 短语不完整，请参见[.Net 4：PInvokeStackImbalance Exception](https://stackoverflow.com/questions/2723021/in-net-4-pinvokestackimbalance-exception)此线程是关于 strlen，但我几乎可以肯定 system() 和 strlen() 使用相同的堆栈约定。

# slickgrid - 是否可以使光滑的网格控件自动调整其高度到最小-最大范围之间以适应行数？

> ID：11968165
> 
> 赞同：6
> 
> 时间：2012-08-15T11:02:51.157
> 
> 标签：slickgrid

我正在创建一个网站，其中网格可能有几行，也可能有很多。

当只有几行时，网格中的空白空间会浪费大量空间。

理想情况下，我希望能够设置最小高度和最大高度，然后根据行数让光滑网格在该范围内自动调整大小。

我进行了搜索，发现有一个选项可以使网格自动调整为行数，但它显然与分页不兼容。

```
var gridOptions = { autoHeight:true }; 
```

[如何让 slickgrid div 根据表格大小调整大小](https://stackoverflow.com/questions/10842504/how-to-get-slickgrid-div-to-resize-with-size-of-table)

似乎您也无法设置最大高度；它将继续扩展，直到显示所有内容。

有没有人有任何解决方案或建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:43:49.177

我认为您需要调整周围 DIV 的高度，而不是调整网格的大小。SlickGrid 的高度是根据它初始化的 DIV 的高度计算的。所以理论上，你可以根据你拥有的数据量来修改DIV的高度，然后手动初始化网格。

检查此链接以获取有关网格显式初始化的示例：http: [//mleibman.github.com/SlickGrid/examples/example-explicit-initialization.html](http://mleibman.github.com/SlickGrid/examples/example-explicit-initialization.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T22:36:08.380

以下是我处理三种不同“高度”情况的方法：

1.  `maxHeight`高度动态增长，并根据*可见*行数限制在某些范围内
2.  高度动态增长且不受限制（页面将滚动）
3.  高度是固定的和静态的（例如，如果只有 1 行，可能会显示空白）

基本上我`autoHeight`用于案例 #2 和案例 #1（但仅适用于案例 #1，如果行数小于所需的可见行数）。对于我使用的案例 #1`rowHeight`和我自己的发明，`maxVisibleRows`让开发人员说“此表在开始滚动之前将增长到 5 行，并且可滚动区域的高度等于 5 行的高度之和。” 对于案例#3，它只是一个简单的父高度约束，这是 SlickGrid 的默认行为。

示例代码：

```
 var parentContainer = document.getElementById("slick_container");
    var uniqueRecordIdField = "id";
    var rows = [{id: 1, product: "Bells"}, {id: 2, product: "Whistles"}]; // data (array of rows)
    var maxVisibleRows = 3; // user can see 3 rows without scrolling

    var HeightOptions = { Static:0, Auto:1, Max:2 }; // "enum" for illustrative purposes

    var HeightOption = HeightOptions.Auto; // dev would set this somehow
    var options = { ... }; // slick grid options object
    var parentHeight = "";
    switch (HeightOption)
    {
      case HeightOptions.Static:

        parentHeight = "400px;" // (hardcoded default/example; probably should allow override)
        options.autoHeight = false; // do not use slickgrid auto height
        break;

      case HeightOptions.Max:

        // use # of rows to determine whether table should be scrollable
        if (maxVisibleRows > 0 && rows.length > maxVisibleRows)
        {
           var arbitraryHeightPadding = 14; // style hack for viewport
           // constrain height to only show X rows
           parentHeight = ((options.rowHeight * maxVisibleRows) + arbitraryHeightPadding) + "px";
           options.autoHeight = false; // do not use slickgrid auto height
        }
        else
        {
          // use slickgrid autoHeight to allow height to shrink / grow
          parentHeight = "";
          options.autoHeight = true;
        }
        break;

      case HeightOptions.Auto:
      default:

        parentHeight = ""; // or could use 'inherit' or 'auto' or whatever probably
        options.autoHeight = true; // use slickgrid auto height to grow indefinitely
        break;
    }

    // set height of slick grid parent (container)    
    parentContainer.style.height = parentHeight;

   // do normal slick grid rendering stuff... 
   DataView.onRowCountChanged.subscribe(function (e, args)
   {
      Grid.updateRowCount();
      Grid.render();
   });    
   DataView.beginUpdate();
   DataView.setItems(rows, uniqueRecordIdField);
   DataView.endUpdate(); 
```

# c# - 随机 2D 瓦片地图生成算法

> ID：11968167
> 
> 赞同：28
> 
> 时间：2012-08-15T11:03:00.737
> 
> 标签：c#, algorithm, xna, terrain, procedural-generation

谁能告诉我一种像我的世界那样生成岛屿结构或山丘结构的方法？

我只是在寻找一个合适的理论来生成随机形状，但它应该保持一个定义的基本模式..

像：岛屿应该是圆形的，但形状和规模会有所不同（最小/最大宽度和高度）。

或者：河流不应该是直线，它们应该有曲线和随机宽度。

甚至：生成某种森林，其中树木以用户仍然可以穿过森林的方式放置（我认为这是一个简单的方式，只是说如果代码尝试放置树周围的一些块应该保持空白最后一棵树周围有更多树）

我可以用什么样的数学来做这些事情？

我会很高兴有一些教程或参考链接。我在网上搜索了几个小时，但我只能找到一些可以买的书，比如“游戏数学”之类的书，但我的预算设置为零。

编辑：

首先，我很抱歉我的英语不好。

第二，我要感谢大家的回答。这些都是很好的参考资料，我会花很多时间来深入了解。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-15T11:09:10.797

我强烈建议您查看[Amit 的 Game Programming Information](http://www-cs-students.stanford.edu/%7Eamitp/gameprog.html)和他的其他博客文章。他有一整套关于用河流、海岸线等创建逼真的地图的系列。

> **构建世界**
> 
> 虽然程序地图生成可以应用于非网格世界，但它最常用于网格。从一个时间点来看，生成的游戏地图很少像手工制作的世界那么好。但是，它们具有三个优点：（1）如果要制作许多世界，则每个世界的成本更低，（2）更多的重玩价值，因为下一次穿越世界不同，以及（3）世界发展的潜力，而游戏进行。
> 
> *   阿米特的世界地图生成器
> *   程序内容生成：生成地形、城市、建筑物
> *   Unangband的地牢生成
> *   生成具有锁匙结构的游戏世界，以便某些房间需要来自其他房间的对象
> *   构建河流的算法
> *   将河流添加到随机生成的地形
> *   用于生成地牢的原始 Rogue 算法
> *   11 种带有演示和代码的迷宫生成算法
> *   使用噪声函数生成洞穴，例如泰拉瑞亚和 Minecraft 中的洞穴
> *   不规则形状的房间，简单的算法
> *   可调整大小的室内房间区域
> *   在 DungeonMaker 中挖掘地牢的隧道算法
> *   随机地形生成技术指南
> *   程序内容生成的 Wiki 指南
> *   模拟大型虚拟世界

**Amit 的[Polygonal Map Generation for Games](http://www-cs-students.stanford.edu/%7Eamitp/game-programming/polygon-map-generation/)**（列表中的第一项）是一篇非常令人印象深刻的文章，它讨论了生成合理形状的海岸线、岛屿、河流、山脉等的逻辑。令人印象深刻的工作！

[**一种在随机生成的世界中“生长”河流的方法**](http://www.pixelenvy.ca/wa/river.html) [包括在上面的列表中] 相当简单的算法，用于根据地图中的其他“图块”（例如它们的类型和海拔高度）生成河流的路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T11:15:03.517

我曾经在制作 rougelike 时找到了一个很棒的理论站点。[看看](http://pcg.wikidot.com/pcg-algorithm%3amap-generation)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T11:16:06.073

很多时候，地图在逻辑上被分成图层/叠加层，如“基本地形高度”、“水位”、“高地”、“树木”、“房屋”等。

然后为每一层运行不同类型的生成器。经常使用分形，因为它们往往会产生有趣且难以预测的形状。但只使用了分形的一部分。使用整体会立即暴露结构（在顶级分形上非常重复）并且观众会注意到它。因此，生成的分形随后会被扭曲/修改/过滤/切割，这样就不明显了。例如，您可以使用一些简单的 XY 三角振荡器生成基本地形水平，然后将其与分形图像的一部分相加，限制为一些最小值-最大值，您会得到一个不平坦的地形，有明显的山丘和水滴..

对于所有其他图层，您通常无法“总结”，因为地形以外的图层与“高度”或“密度”无关，而是0/1 - 将树放在这里还是不放树？但是同样，你执行它类似：你生成一些图像（可能再次分形），然后检查数字并设置阈值：当数字高于/低于 X 时，你放置/不放置东西。您还可以对其进行过滤或分支：例如，如果一棵树会撞到水下位置，则将鱼放在那里或根本不放置树。

我很惊讶你找不到关于它的资源。几年前在谷歌上搜索“地形生成算法”会得到很多点击！

# jquery - .next() 和 .is(:hidden) 不起作用

> ID：11968169
> 
> 赞同：0
> 
> 时间：2012-08-15T11:03:07.863
> 
> 标签：jquery

所以我有一个像这样的脚本：

```
$(".contenttitle,.contenttitle_half").click (function(){
     $(this).next().stop().toggle(); 
    $goran = $(this);
      if ($(this).next().stop().is(':hidden')) { do something } 
```

它正在工作。但是不应该`onclick`但`onload`测试元素是否隐藏的新脚本不起作用：

```
jQuery(document).ready(function(){
    if ($(".contenttitle").next().is(':hidden')) { DO SOMETHING } 
```

而这个由于某种原因不起作用。如果我`$(".contenttitle").next()`使用控制台进行测试，它会显示下一个元素，这意味着 only`.is(:hidden)`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:34:35.600

如果页面上有更多 1 .contenttitle 试试这个：

```
jQuery(document).ready(function(){
    $('.contenttitle').each(function() {
       if ($(this).next(':hidden').length > 0) { DO SOMETHING }
    });
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:06:46.057

在 next 中使用选择器试试：

```
jQuery(document).ready(function(){
if ($(".contenttitle").next(':hidden').length > 0) { DO SOMETHING } 
```

# java - Java 泛型和类型推断

> ID：11968172
> 
> 赞同：1
> 
> 时间：2012-08-15T11:03:29.317
> 
> 标签：java, generics

来自[Sun 泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)

类型推断

> 为了说明最后一点，在以下示例中，推理确定传递给 pick 方法的第二个参数是 String 类型：

```
static <T> T pick(T a1, T a2) { return a2; }  
Serializable s = pick("d", new ArrayList<String>()); 
```

最初我认为这个想法是你可以使用任何参数来代替，`T`只要它以`String`. 例子`ArrayList<ArrayList<String>>`

但是后来我看到以下也编译得很好：
`Serializable s = pick("d", new ArrayList<Integer>());`
似乎`T`推断为 a`Serializable`而不是 a `String`？

那么声明的意义是什么

> 推断确定传递给 pick 方法的第二个参数是**String 类型**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:13:01.250

在这种情况下，3 种类型是`Serializable`, `String`, `ArrayList<String>`。

*   `Serializable`不扩展任何东西
*   `String`工具`Serializable`和其他不相关的东西
*   `ArrayList<String>`工具`Serializable`和其他不相关的东西

所以适用于所有 3 的最具体的类型是`Serializable`.

如果将调用替换`Serializable s = pick("d", new Object());`为例如，它将不再编译，因为最具体的类型现在是 Object，并且您不能将 Object 强制转换为 Serializable。

# python - 复制模块

> ID：11968182
> 
> 赞同：0
> 
> 时间：2012-08-15T11:03:44.370
> 
> 标签：python, django, django-models, django-views, python-module

在 Django 应用程序中，我有一个额外的模块。所以我的应用程序被称为标题，在其中我有一个模型、视图和一个头文件。在头文件内部，我有一个名为 resources 的类，它可以执行我想要的操作，但由于某种原因，在页面刷新时，它会复制信息。

看法：

```
def home(request):
header = Resources("home") #generate the resources for this page

return render_to_response('pages/index.html', {'header': header, 'content': test}) 
```

资源：

```
class Resources(object):

javascript_resources = []
javascript_files = []
style_sheets = []

def __init__(self, page_id = "home"):
    self.page_id = page_id.lower()
    self.get_status()
    self.get_meta()
    self.get_javascript()
    self.get_style_sheets()

def get_status(self):

def get_meta(self):

def get_javascript(self):

def get_style_sheets(self): 
```

所以发生的情况是， header.javascript_resources 列表应该只有 3 个成员长，但它添加到它的每个副本。因此，出于某种原因，即使在页面刷新之后，该对象仍保留在内存中。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:09:11.247

`javascript_resources`是`Resource` *class*的一个属性，因此如果您在后续请求中向其添加内容，它们将“加起来”。

如果您希望每个请求都有一个空的`javascript_resources`，请将其设置为实例的属性（即在 中对其进行初始化`__init__`）或在实例化之前将其清空`Resource`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T11:09:31.227

问题似乎是您创建`javascript_resources`为类变量。尝试在`__init__`方法中移动它的初始化。

# macos - 如何在转换为 unicode 的 Mac OS X 上的 Git 中处理文件名中的重音字符

> ID：11968183
> 
> 赞同：12
> 
> 时间：2012-08-15T11:03:46.057
> 
> 标签：macos, git, unicode

在我的 Git 存储库中，重音文件为 éíóúàèìòùãõ_800x600.jpg，但在进行克隆后，我无法拉取，因为文件显示为已修改：

```
$git clone [...]
done

$git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   "a\314\201e\314\201i\314\201o\314\201u\314\201a\314\200e\314\200i\314\200o\314\200u\314\200a\314\203o\314\203_800x600.jpg" 
```

尽管如此，我还是无法添加、删除、重置或存储文件。

我试过了：

```
$git add a\314\201e\314\201i\314\201o\314\201u\314\201a\314\200e\314\200i\314\200o\314\200u\314\200a\314\203o\314\203_800x600.jpg
fatal: pathspec 'a314201e314201i314201o314201u314201a314200e314200i314200o314200u314200a314203o314203_800x600.jpg' did not match any files

$git stash
No local changes to save

$git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   "a\314\201e\314\201i\314\201o\314\201u\314\201a\314\200e\314\200i\314\200o\314\200u\314\200a\314\203o\314\203_800x600.jpg" 
```

如何处理转换为 unicode 的重音文件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-12T18:11:07.293

您需要在 Mac 上将 core.precomposeunicode 选项设置为 true，然后再次克隆存储库。

```
git config --global core.precomposeunicode true 
```

如[git config man page](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)中所述，该选项与 Mac OS 中 Unicode 字符的特定分解有关：

> 此选项仅由 git 的 Mac OS 实现使用。当 core.precomposeunicode=true 时，git 恢复 Mac OS 对文件名的 unicode 分解。这在 Mac OS 和 Linux 或 Windows 之间共享存储库时很有用。（需要 Windows 1.7.10 或更高版本的 Git，或 cygwin 1.7 下的 git）。当为 false 时，文件名由 git 完全透明地处理，这与旧版本的 git 向后兼容。

手册页没有指出的是，此选项对存储库没有追溯影响，它仅在之后克隆的存储库中生效。

参考： [Leo Koppelkamm 在“Mac OS X 上的 Git 和变音符号问题”中的回答](https://stackoverflow.com/a/15553796/207968)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:38:32.267

[如何在 OS X 上的 Git 中处理文件名中的亚洲字符](https://stackoverflow.com/questions/4144417/how-to-handle-asian-characters-in-file-names-in-git-on-os-x)

# google-analytics - Google Analytics for Mobile (__utm.gif) 和多个子域

> ID：11968186
> 
> 赞同：0
> 
> 时间：2012-08-15T11:04:03.380
> 
> 标签：google-analytics

在我正在开发的移动网站上，我使用服务器端调用`http://www.google-analytics.com/__utm.gif?utmwv=4.4sa&utmn=1527287986&utmhn=<removed>&utmr=<removed>&utmp=<removed>&utmac=<removed>&utmcc=__utma%3D999.999.999.999.999.1%3B&utmvid=<removed>&utmip=`

（参考：[https](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites) ://developers.google.com/analytics/devguides/collection/other/mobileWebsites ）

该站点位于 m.myhostname.com

www.myhostname.com 上有一个主要网站

因此，使用客户端 Javascript ga.js 的主网站已`_gaq.push(['_setDomainName', '.myhostname.com']);`设置。

我是否需要在服务器端调用上做类似的事情，以便访问者跟踪域之间的移动？

我找不到任何关于它需要它的文档？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:25:35.863

您需要在您的网站上设置跨域跟踪，并将 javascript 代码放在两个子域中的每个页面上： [https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

或者，您也可以在同一个 GA 帐户中设置单独的配置文件，并过滤掉进入每个子域的流量，以便您可以通过这种方式查看流量。
[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1034832&topic=1034830&ctx=topic](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1034832&topic=1034830&ctx=topic)

# java - Java中递归算法的优化

> ID：11968187
> 
> 赞同：10
> 
> 时间：2012-08-15T11:04:06.330
> 
> 标签：java, algorithm, markov-chains

## 背景

我有一组有序的数据点存储为`TreeSet<DataPoint>`. 每个数据点都有一个`position`和一个`Set`对象`Event`( `HashSet<Event>`)。

有 4 个可能的`Event`对象`A`、`B`、`C`和`D`。每个`DataPoint`都有 2 个，例如`A`和`C`，除了集合中的第一个和最后一个`DataPoint`对象，它们`T`的大小为 1。

我的算法是在这个集合中找到一个新`DataPoint` `Q`位置`x`的概率。`Event` `q`

我通过计算`S`这个数据集的值，然后添加`Q`到集合中并`S`再次计算来做到这一点。然后我将第二个`S`除以第一个以隔离新的概率`DataPoint` `Q`。

## 算法

计算公式为`S`：

[http://mathbin.net/equations/105225_0.png](http://mathbin.net/equations/105225_0.png)

在哪里

[http://mathbin.net/equations/105225_1.png](http://mathbin.net/equations/105225_1.png)

[http://mathbin.net/equations/105225_2.png](http://mathbin.net/equations/105225_2.png)

对于 [http://mathbin.net/equations/105225_3.png](http://mathbin.net/equations/105225_3.png)

和

[http://mathbin.net/equations/105225_4.png](http://mathbin.net/equations/105225_4.png)

[http://mathbin.net/equations/105225_5.png](http://mathbin.net/equations/105225_5.png)是一个昂贵的概率函数，它只依赖于它的参数而不依赖于其他任何东西（和[http://mathbin.net/equations/105225_6.png](http://mathbin.net/equations/105225_6.png)），[http://mathbin。 net/equations/105225_7.png](http://mathbin.net/equations/105225_7.png)是集合中的最后一个`DataPoint`（右手节点），[http](http://mathbin.net/equations/105225_8.png) ://mathbin.net/equations/105225_8.png 是第一个`DataPoint`（左手节点），[http ://mathbin.net/equations/105225_9 .png](http://mathbin.net/equations/105225_9.png)是最右边`DataPoint`的不是节点，[http](http://mathbin.net/equations/105225_10.png) ://mathbin.net/equations/105225_10.png是一个`DataPoint`，[http://mathbin.net/equations/105225_12.png](http://mathbin.net/equations/105225_12.png)是这个`Set`的事件`DataPoint`。

所以`Q`with的概率`Event` `q`是：

[http://mathbin.net/equations/105225_11.png](http://mathbin.net/equations/105225_11.png)

## 执行

我在Java中实现了这个算法，如下所示：

```
public class ProbabilityCalculator {
    private Double p(DataPoint right, Event rightEvent, DataPoint left, Event leftEvent) {
        // do some stuff
    }

    private Double f(DataPoint right, Event rightEvent, NavigableSet<DataPoint> points) {
        DataPoint left = points.lower(right);

        Double result = 0.0;

        if(left.isLefthandNode()) {
            result = 0.25 * p(right, rightEvent, left, null);
        } else if(left.isQ()) {
            result = p(right, rightEvent, left, left.getQEvent()) * f(left, left.getQEvent(), points);
        } else { // if M_k
            for(Event leftEvent : left.getEvents())
                result += p(right, rightEvent, left, leftEvent) * f(left, leftEvent, points);
        }

        return result;
    }

    public Double S(NavigableSet<DataPoint> points) {
        return f(points.last(), points.last().getRightNodeEvent(), points)
    }
} 
```

所以要找到`Q`at`x`的概率`q`：

```
Double S1 = S(points);
points.add(Q);
Double S2 = S(points);
Double probability = S2/S1; 
```

## 问题

就目前的实现而言，它严格遵循数学算法。然而，这在实践中并不是一个特别好的主意，因为`f`每个`DataPoint`. 因此，对于[http://mathbin.net/equations/105225_9.png](http://mathbin.net/equations/105225_9.png)，`f`被调用两次，然后对于`n-1` `f`之前的每个调用再次调用 两次，依此类推。`O(2^n)`考虑到`DataPoints`每个`Set`. 因为`p()`它独立于除参数之外的所有内容，所以我包含了一个缓存函数，如果`p()`已经对这些参数进行了计算，它只是返回之前的结果，但这并不能解决固有的复杂性问题。关于重复计算，我是否在这里遗漏了一些东西，或者这个算法中的复杂性是不可避免的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:03:18.670

您还需要记住`f`前 2 个参数（第 3 个参数始终通过，因此您无需担心）。这会将代码的时间复杂度从 O(2^n) 降低到 O(n)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:30:19.423

Thanks for all your suggestions. I implemented my solution by creating new nested classes for the values of `P` and `F` already calculated, then used a `HashMap` to store the results. The `HashMap` is then queried for the result before computation takes place; if it is present it just returns the result, if it is not it computes the result and adds it to the `HashMap`.

The final product looks a bit like this:

```
public class ProbabilityCalculator {

    private NavigableSet<DataPoint> points;

    private ProbabilityCalculator(NavigableSet<DataPoint> points) {
        this.points = points;
    }

    private static class P {
        public final DataPoint left;
        public final Event leftEvent;
        public final DataPoint right;
        public final Event rightEvent;

        public P(DataPoint left, Event leftEvent, DataPoint right, Event rightEvent) {
            this.left = left;
            this.leftEvent = leftEvent;
            this.right = right;
            this.rightEvent = rightEvent;
        }

        public boolean equals(Object o) {
            if(!(o instanceof P)) return false;
            P p = (P) o;

            if(!(this.leftEvent == null ? p.leftEvent == null : this.leftEvent.equals(p.leftEvent)))
                return false;
            if(!(this.rightEvent == null ? p.rightEvent == null : this.rightEvent.equals(p.rightEvent)))
                return false;

            return this.left.equals(p.left) && this.right.equals(p.right);
        }

        public int hashCode() {
            int result = 93;

            result = 31 * result + this.left.hashCode();
            result = 31 * result + this.right.hashCode();
            result = this.leftEvent != null ? 31 * result + this.leftEvent.hashCode() : 31 * result;
            result = this.rightEvent != null ? 31 * result + this.rightEvent.hashCode() : 31 * result;

            return result;
        }
    }

    private Map<P, Double> usedPs = new HashMap<P, Double>();

    private static class F {
        public final DataPoint left;
        public final Event leftEvent;
        public final NavigableSet<DataPoint> dataPointsToLeft;

        public F(DataPoint dataPoint, Event dataPointEvent, NavigableSet<DataPoint> dataPointsToLeft) {
            this.dataPoint = dataPoint;
            this.dataPointEvent = dataPointEvent;
            this.dataPointsToLeft = dataPointsToLeft;
        }

        public boolean equals(Object o) {
            if(!(o instanceof F)) return false;
            F f = (F) o;
            return this.dataPoint.equals(f.dataPoint) && this.dataPointEvent.equals(f.dataPointEvent) && this.dataPointsToLeft.equals(f.dataPointsToLeft);
        }

        public int hashCode() {
            int result = 7;

            result = 31 * result + this.dataPoint.hashCode();
            result = 31 * result + this.dataPointEvent.hashCode();
            result = 31 * result + this.dataPointsToLeft.hashCode();

            return result;
        }

    }

    private Map<F, Double> usedFs = new HashMap<F, Double>();

    private Double p(DataPoint right, Event rightEvent, DataPoint left, Event leftEvent) {
        P newP = new P(right, rightEvent, left, leftEvent);

        if(this.usedPs.containsKey(newP)) return usedPs.get(newP);

        // do some stuff

        usedPs.put(newP, result);
        return result;

    }

    private Double f(DataPoint right, Event rightEvent) {

        NavigableSet<DataPoint> dataPointsToLeft = dataPoints.headSet(right, false);

        F newF = new F(right, rightEvent, dataPointsToLeft);

        if(usedFs.containsKey(newF)) return usedFs.get(newF);

        DataPoint left = points.lower(right);

        Double result = 0.0;

        if(left.isLefthandNode()) {
            result = 0.25 * p(right, rightEvent, left, null);
        } else if(left.isQ()) {
            result = p(right, rightEvent, left, left.getQEvent()) * f(left, left.getQEvent(), points);
        } else { // if M_k
            for(Event leftEvent : left.getEvents())
                result += p(right, rightEvent, left, leftEvent) * f(left, leftEvent, points);
        }

        usedFs.put(newF, result)

        return result;
    }

    public Double S() {
        return f(points.last(), points.last().getRightNodeEvent(), points)
    }

    public static probabilityOfQ(DataPoint q, NavigableSet<DataPoint> points) {
        ProbabilityCalculator pc = new ProbabilityCalculator(points);

        Double S1 = S();

        points.add(q);

        Double S2 = S();

        return S2/S1;

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:32:37.700

更新：

由于如下所述，不能使用顺序来帮助优化，因此必须使用另一种方法。由于大多数 P 值将被计算多次（并且如上所述，这很昂贵），因此一种优化是缓存它们。我不确定最好的密钥是什么，但您可以想象更改代码如下：

```
....
private Map<String, Double> previousResultMap = new ....

private Double p(DataPoint right, Event rightEvent, DataPoint left, Event leftEvent) {
   String key = // calculate unique key from inputs
   Double previousResult = previousResultMap.get(key);
   if (previousResult != null) {
      return previousResult;
   } 

   // do some stuff
   previousResultMap.put(key, result);
   return result;
} 
```

这种方法应该可以有效地减少大量冗余计算 - 但是，由于您比我更了解数据，因此您需要确定设置密钥的最佳方式（即使 String 是最好的表示）。

# javascript - 将一个数组复制到另一个数组

> ID：11968188
> 
> 赞同：2
> 
> 时间：2012-08-15T11:04:10.947
> 
> 标签：javascript, jquery

我是以下格式的数组。我正在从这样的文件中读取以下`data.json`数据

```
$.getJSON('data/data.json', function (ids) {
            for (var i = 0; i < ids.length; i++) {
                var id = ids[i];
                teams = id;
                $('<li>' + id + '</li>').appendTo(span);

            }
        }); 
```

这是数据

```
[
"109 200",
"109 201",
"102 202",
"103 202"
] 
```

所以我想要的是把这个数组复制到另一个让我们说`c`但是以下面的形式

```
[
"109",
"109",
"102",
"103",
"200",
"201",
"202",
"202"
] 
```

如何使用 javascript 或 jquery 执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:06:41.343

**遍历**结果集，用空格**分割每个元素，****并将**得到的两个数字添加到两个不同的数组中，每个数组代表一半，最后， 将左侧部分与右侧部分**连接起来：**

```
var left = [], 
    right = [];
for (var i = 0; i < ids.length; i++) {
  var pair = ids[i].split(" ");
  left.push(pair[0]);
  right.push(pair[1]);
}
var result = left.concat(right); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T11:10:55.497

只需使用

```
ids.join(' ').split(' '); 
```

**编辑** 这将尊重订单。

```
$.map(ids,function(i){ return i.split(' ')[0]; }).concat($.map(ids,function(i){ return i.split(' ')[1]; })) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:15:50.083

尽管 João 有正确的方法来执行此操作，但我注意到您希望将这些元素添加到数组中的顺序。要获得您所追求的内容，请尝试以下操作：

```
$.getJSON('data/data.json', function (ids) {
    var leftArray = new Array();
    var rightArray = new Array();

    for (var i = 0; i < ids.length; i++) {
        var splitted = ids[i].split(" ");

        if (splitted[0] !== null) {
            leftArray.push(splitted[0]);
        }

        if (splitted[1] !== null) {
            rightArray.push(splitted[1]);
        }
    }

    // now join the two arrays together to get your order
    var joinedArray = leftArray.conact(rightArray);

    // now build your elements with the data
    for (var i = 0; i < joinedArray.length; i++) {
        $('<li>' + joinedArray[i] + '</li>').appendTo(span);
    }
}); 
```

# oracle - 无法在 PLSQL 中调用带参数的过程

> ID：11968191
> 
> 赞同：1
> 
> 时间：2012-08-15T11:04:25.350
> 
> 标签：oracle, stored-procedures, plsql

无论我尝试了什么，我都会收到 PLS-00103 错误消息：

```
Error starting at line 1 in command:
DECLARE
  MyVar NUMBER(12,0);
BEGIN
  HISTORY.sp_CHS_Insert('OMSC01', 522‚ 'OMSC01' ,522 , 4, 'S14_DCSKOLIZE', 'CHYBA', MyVar);
END;
Error report:
ORA-06550: řádka 4, sloupec 38:
PLS-00103: Encountered the symbol "," when expecting one of the following:

   ) , * & = - + < / > at v is mod remainder not rem =>
   <exponent (**)> <> or != or ~= >= <= <> and or like like2
   like4 likec between || multiset member submultiset
 Symbol ", was inserted before"‚", so continuation would be possible.
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

我的程序的标题如下。该过程在包 HISTORY 中：

```
procedure sp_CHS_Insert(
  ParH01Source in OMSH01.H01Source%type,
  ParH01ExtID in OMSH01.H01ExtId%type,
  ParH01UpdSource in OMSH01.H01UpdSource%type,
  ParH01UpdExtId in OMSH01.H01UpdExtId%type,

  ParXUR01UserID in XUR01.XUR01UserID%type := null,
  ParS14Code in OMSS14.S14Code%type := null,
  ParS12Code in OMSS12.S12Code%type := null,
  ParH01ID out OMSH01.H01ID%type
); 
```

调用 SQL 如下所示：

```
DECLARE
  MyVar NUMBER(12,0);
BEGIN
  HISTORY.sp_CHS_Insert('OMSC01', 555‚ 'OMSC01' ,555, 4, 'S14_DCSKOLIZE', 'CHYBA', MyVar);
END; 
```

我检查了参数类型，它们是正确的。我正在通过 SQL Developer 运行脚本。

我是一个 PLSQL 新手（一个被迫做 PLSQL 的 .NET 开发人员），我知道这可能是非常明显的事情，但我就是看不到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:04:53.830

位置 38 中的“逗号”（在第一个 之后`522`）不是 ASCII 逗号。当我将您的代码复制到 SQL Developer 中时，它看起来略有不同，当我检查 ASCII 函数在传递此字符时返回 130，而普通逗号将返回 44。

# solr - 使用连字符和驼峰式大小写的 Solr 搜索未返回预期结果

> ID：11968193
> 
> 赞同：0
> 
> 时间：2012-08-15T11:04:26.393
> 
> 标签：solr, edismax, hyphen

我有一个 solr 搜索应用程序，它在字段值既是驼峰形式又是连字符的特定情况下失败。尽管 solr 中的字段分析页面与条款匹配，但这些案例单独工作正常，尽管没有匹配项。

例如：

字段*myField*包含值*camelCase-hyphen*。*使用驼峰连字符*的查询值（注意这不是驼峰大小写），尽管我的 WordDelimiterFilterFactory 设置连接了整个术语，然后是 LowerCaseFilterFactory，但仍然没有匹配项。

分析页面显示匹配，但执行实际搜索不会产生任何结果。见下文。

我的字段类型分析是

```
<fieldtype name="textBlock" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt"
                        ignoreCase="true" expand="true"/>
                <filter class="solr.StopFilterFactory" ignoreCase="true"
                        words="stopwords.txt"/>
                <filter class="solr.WordDelimiterFilterFactory"
                        generateWordParts="1" generateNumberParts="1"
                        catenateWords="1" catenateNumbers="1" catenateAll="1" preserveOriginal="1"/>
                <filter class="solr.LowerCaseFilterFactory"/>
                <filter class="solr.EnglishPorterFilterFactory"
                        protected="protwords.txt"/>
                <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
        </analyzer>
        <analyzer type="query">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt"
                        ignoreCase="true" expand="true"/>
                <filter class="solr.StopFilterFactory" ignoreCase="true"
                        words="stopwords.txt"/>
                <filter class="solr.WordDelimiterFilterFactory"
                        generateWordParts="1" generateNumberParts="1"
                        catenateWords="1" catenateNumbers="1" catenateAll="1" preserveOriginal="1"/>
                <filter class="solr.LowerCaseFilterFactory"/>
                <filter class="solr.EnglishPorterFilterFactory"
                        protected="protwords.txt"/>
                <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
        </analyzer>
</fieldtype> 
```

我正在使用 Solr 3.6.1 和 edismax。

任何帮助将非常感激。

更新：

[详细字段分析输出](https://dl.dropbox.com/u/16277757/solr/field%20analysis.html)

[调试响应](https://dl.dropbox.com/u/16277757/solr/debug-response.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:49:44.673

查看您在此处发布的调试响应[Debug Response](https://dl.dropbox.com/u/16277757/solr/debug-response.xml)，我可以看到您的搜索与至少一个文档匹配，因此它可以按您的预期工作。

```
 <result name="response" numFound="1" start="0">
      <doc>
        <str name="a_searchable_name_t">camelcase-hyphen</str>
      </doc>
    </result> 
```

看看`numFound=1`它有一个匹配，但我猜你仍然认为你没有得到任何结果。对不起，我想将此作为后续评论发布，但格式和字符限制不允许详细说明。

# linux - 监控屏幕上的日志

> ID：11968197
> 
> 赞同：0
> 
> 时间：2012-08-15T11:04:45.493
> 
> 标签：linux, terminal, centos, monitoring

有没有可以用来监控日志文件的 linux 命令？例如有一个命令`top`，当我执行它时，我可以看到最近的 CPU 使用率、内存使用率等变化。是否有一些类似的命令可用于查看某些日志文件的更改？

我可以使用`tail -500 myFile.log`，但每次我必须执行它才能看到最近的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:06:51.103

采用

```
tail -f myFile.log 
```

我需要提供更多文本，但我真的不知道还要写什么，所以我只是在这里输入随机垃圾。

# entity-framework - 用于单元测试的内存数据库中的实体框架（代码优先）

> ID：11968203
> 
> 赞同：5
> 
> 时间：2012-08-15T11:05:10.093
> 
> 标签：entity-framework, unit-testing

出于单元测试的目的，是否可以这样做：

*   将某种格式的测试数据（XML？）签入源代码控制
*   运行单元测试时，从该测试数据中实例化某种内存数据库
*   在单元测试运行期间，让 EF 对此在内存数据库中运行

?

我们不希望我们的单元测试依赖于存在的特定外部数据库，并且处于特定状态。

我们也不想在我们的代码和测试中维护两个不同的“世界”，即 EF 针对真实数据库运行的真实世界和我们的测试针对某种 EF 模拟运行的虚假工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:06:47.990

单元测试不应该依赖于**任何数据库**。对数据库的任何依赖（甚至在内存数据库中）都意味着您正在进行集成测试，并且应该针对您要使用的真实数据库进行集成测试。

我不知道任何用于 EF 的 XML 数据库，但即使它存在，您也会回到您的要求之前：*我们也不想在我们的代码和 test 中维护两个不同的“世界”*。每个数据库都有自己的 EF 提供程序，由不同的公司创建。即使是 MS SQL Server 和 MS SQL Server Compact Edition 的提供程序也存在很大差异，因此在它们之间进行切换非常具有挑战性。

你应该做什么：

*   将所有 EF 使用隐藏在一些抽象后面（包括包括 Linq-to-entities 查询在内的所有内容）并模拟此抽象而不是 EF 以进行单元测试
*   针对您想在生产中使用的真实数据库实现使用集成测试来测试抽象本身

# cocoa-touch - 登录屏幕、导航和 UI 标签栏控制器

> ID：11968206
> 
> 赞同：1
> 
> 时间：2012-08-15T11:05:18.740
> 
> 标签：cocoa-touch, ios5, uinavigationcontroller, uitabbarcontroller, xcode4.2

我在问一个关于 UI 选项卡栏控制器的一般问题。在我的应用程序中有一个登录屏幕，成功登录后，需要显示一个基于标签栏的界面。因此，我将导航控制器作为根控制器，并在成功登录后将标签栏控制器推送到导航堆栈上。它对我来说很好。选项卡来了，切换也起作用了。只是导航栏上显示的内容视图控制器的标题不会出现。当我将内容视图控制器直接添加到导航堆栈时，它会出现，但是当我的内容视图控制器位于标签栏内时，标题不会出现。此外，我在许多网站上读到标签栏控制器不应添加为任何其他控制器的子级。它应该始终是窗口的根控制器。那么我正在做的不是正确的用法吗？我该怎么做？我不能将标签栏控制器作为应用程序委托中的根控制器，因为有登录屏幕和导航要求。请指导我。我确实知道之前已经发布过类似的问题，但我无法清楚地理解这一点。

# iphone - 如何将填充了对象的 NSMutableArray 传递给 UITableView 并显示数据

> ID：11968209
> 
> 赞同：0
> 
> 时间：2012-08-15T11:05:40.373
> 
> 标签：iphone, ios, uitableview

**设置：**

`MainViewController`持有一个`NSMutableArray`对象。对象是 my 的一个实例，`NewContact`它有一个`firstName`和一个`contactImage`ivar。当我点击时`showAllContactsBtn`，`MainViewController` `AllContactsViewController`应该在桌子上显示所有对象 ivars (`firstNames`和`contactImages`)。

我认为问题在于我没有正确地将数据传递给`AllContactsViewController`但无法弄清楚如何修复它。值得一提的是，我没有看到其中的 `NSLog`语句，`cellForRowAtIndex`所以可能根本不会调用该方法？

**主视图控制器.m**

```
- (IBAction)showAllCBtnTapped:(id)sender
{
    AllContactsViewController *nAllCVC = [[AllContactsViewController alloc]init];
    nAllCVC.allContactsArray = self.contactsArray; // Properly passed the data???
    nAllCVC.delegate = self;
    nAllCVC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

    [self presentModalViewController:nAllCVC animated:YES];
} 
```

**AllContactsViewController.h**

```
@interface AllContactsViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

**AllContactsViewController.m**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdent = @"ContactCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdent];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdent];
    }

    NewContact *tempContact = [[NewContact alloc]init];

    tempContact = [self.allContactsArray objectAtIndex:[indexPath row]];

    cell.textLabel.text = tempContact.firstName;

    NSLog(@"%@", tempContact.firstName);
    NSLog(@"Test......");

    cell.imageView.image = tempContact.contactPicture;

    [tableView reloadData];

    return cell;
} 
```

**笔记：**

正如您所看到的，这`AllContactsViewController`是从 子类化的`UIVIewController`，这很好还是我必须从子类化，`UITableViewController`尽管我正确设置了委托和数据源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:20:37.677

当您创建视图控制器时，它的数组最初是空的，因此从数据源方法中，表格视图获取（任何）部分中的行数为零的信息 - 因此它永远不会调用单元格的数据源要显示。可能的解决方案：

一。调用后`nAllCVC.allContactsArray = self.contactsArray;`，调用`[nAllCVC.tableView reloadData];`（假设 nAllCVC 通过该属性公开其表视图），或者更好：

二。代替 @synthesize-ing 表格视图的数据数组，提供一个自定义的 getter 和 setter 自动调用表格视图；像这样的东西：

```
- (NSArray *)allContactsArray {
    return _allContactsArray;
}

- (void)setAllContactsArray:(NSArray *)a {
    if (_allContactsArray == a) return;

    [_allContactsArray release];
    _allContactsArray = [a retain];

    [_tableView reloadData];
} 
```

P.s.：您将指针与它们指向的内存混淆了。`NewContact *tempContact = [[NewContact alloc]init];`是多余的并且正在泄漏内存。

P. ps：不要在请求每个单元格时重新加载表格视图，这可能会导致无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:19:09.987

要检查的几件事：

1) 你的 in 财产声明是`allContactsArray`什么`AllContactsViewController`样子的？是`@property(retain)`吗？

`UITableViewController`2）尽管它使您的生活更轻松，但您不必被迫进行子类化。在您的情况下，请确保代表`delegate`和`dataSource`您`UITableView`的设置正确。

3）这段代码`NewContact *tempContact = [[NewContact alloc]init];`根本没有必要，因为你从你的数组中获取你的对象。

4）删除代码行`[tableView reloadData];`

5）确保委托方法`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`正确实现

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:22:51.587

感谢大家的帮助，我在一分钟前发现我重新初始化了`array`in the `viewDidLoad`，`AllContactsViewController`因此我认为这些值在我收到它们后就被覆盖了。我删除了该行，现在我看到在`tableview`. 祝你今天过得愉快

# powershell - Powershell Get-WmiObject 访问被拒绝

> ID：11968210
> 
> 赞同：2
> 
> 时间：2012-08-15T11:05:41.507
> 
> 标签：powershell, tfs

我有一个包含以下行的 Powershell 脚本：

```
$package = Get-WmiObject -Class Win32_Product -ComputerName $TargetServer -Filter ("Name='{0}'" -f $ApplicationName) 
```

我按照这个答案的步骤来启用服务器之间的 Powershell Remoting：[远程安全步骤](https://stackoverflow.com/questions/8362057/what-security-setting-is-preventing-remote-powershell-2-0-from-accessing-unc-pat)

当我从 Powershell ISE（在提升的管理窗口中）运行脚本时，我收到以下错误：

```
Get-WmiObject : Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
At line:1 char:14
+ Get-WmiObject <<<<  win32_bios -computername d-vasbiz01
+ CategoryInfo          : NotSpecified: (:) [Get-WmiObject], UnauthorizedAccessException
+ FullyQualifiedErrorId : System.UnauthorizedAccessException,Microsoft.PowerShell.Commands.GetWmiObjectCommand 
```

我需要能够在 ISE 中运行脚本，以便解决其他问题。

谁能建议我需要做些什么来解决这个安全错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:40:19.270

我需要将凭据传递给 Get-WmiObject cmdlet。

我在这里找到了答案：[Powershell Masters](http://powershellmasters.blogspot.co.uk/2009/04/powershell-and-remote-wmi.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-12T02:15:36.353

在猜测了一段时间后，缓存的凭据是我的问题。

打开 Windows 凭据管理器：

rundll32.exe keymgr.dll,KRShowKeyMgr

删除所有缓存的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-06T23:52:32.020

要扩展 Rob Bowman 的答案，您可以预先收集凭据，也可以在运行命令时收集凭据。

*   预先（最好，因为您可以将其重新用于未来的 Get-WmiObject 命令：

    ```
    $creds = get-credential

    $package = Get-WmiObject -Class Win32_Product -ComputerName $TargetServer -Filter ("Name='{0}'" -f $ApplicationName) -credential $creds 
    ```

*   排队：

    ```
    $package = Get-WmiObject -Class Win32_Product -ComputerName $TargetServer -Filter ("Name='{0}'" -f $ApplicationName) -credential (get-credential) 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-23T19:23:00.603

您必须授予该用户 WMI 权限。

[https://technet.microsoft.com/en-us/library/cc771551(v=ws.11).aspx](https://technet.microsoft.com/en-us/library/cc771551(v=ws.11).aspx)

默认情况下，本地/域管理员应该拥有它。

# javascript - .bind（'all'，'update'）上的骨干奇怪的TypeError错误？

> ID：11968212
> 
> 赞同：0
> 
> 时间：2012-08-15T11:05:43.573
> 
> 标签：javascript, backbone.js, underscore.js

我希望我`ApplicationView`监听路由器上的所有事件。如果我这样做，它会起作用：

```
this.model.router.on('route:myroute1, 'update');
this.model.router.on('route:myroute2, 'update');
this.model.router.on('route:myroute3, 'update'); 
```

当我尝试绑定`all`事件时：

```
this.model.router.bind('all', 'update'); 
```

我得到了这个可怕的错误：

> TypeError: all[i].apply 不是函数
> 
> all[i].apply(all[i + 1] || this, args);

视图（定义为 requirejs 模块）：

```
define(['backbone', 'lodash'], function(Backbone, _) {

    return Backbone.View.extend({

        el: 'body',

        initialize: function() {
            this.model.router.bind('all', 'update');

            _.bindAll(this, 'render', 'update');
            this.render();
        },

        render: function() { },

        update: function(route) {
            this.$el
                .find('.nav-collapse a[href=#'+ route +']')
                .parent()
                    .addClass('active')
                    .siblings()
                        .removeClass('active');
        }

    });

}); 
```

虽然这是原始源代码中发生错误的地方：

```
 // Execute "all" callbacks.
if (all) {
    args = [event].concat(rest);
    for (i = 0, length = all.length; i < length; i += 2) {
        all[i].apply(all[i + 1] || this, args);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:10:24.633

`on()`/的第二个参数`bind()`应该是一个函数。这是您可以传递字符串的未记录功能吗？在这种情况下，它调用该方法的对象是什么？你确定它适用于你的第一种情况吗？

如果你这样做会发生什么？：

```
this.model.router.bind('all', this.update); 
```

# java - Maven 未能通过 JUnit Spring 控制器测试，但在 Eclipse 中工作正常

> ID：11968220
> 
> 赞同：1
> 
> 时间：2012-08-15T11:06:08.223
> 
> 标签：java, spring, maven, junit

当我在 Eclipse 中运行 Junit 测试时，它可以正常工作。但是当我想用 Maven 构建应用程序时。它会失败。如果我删除 testclass，一切正常。

测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "test-context.xml")
public class RoomControllerTest {

    private final Logger log = LoggerFactory.getLogger(RoomServiceTest.class);

    @Autowired
    private RoomService roomService;
    @Autowired
    private CalendarHelper cal;

    @Autowired
    private RoomController room;

    private MockHttpServletRequest mockRequest;
    private AnnotationMethodHandlerAdapter handlerAdapter;
    private MockHttpServletResponse mockResponse;

    @Before
    @Transactional
    public void setUP() {
        mockRequest = new MockHttpServletRequest();
        handlerAdapter = new AnnotationMethodHandlerAdapter();
        mockResponse = new MockHttpServletResponse();

        roomService.save(new Room("test", DigestUtils.sha256Hex("test"), cal
                .getExpiresDate()));
    }

@Test
    @Transactional
    public void login() throws Exception {
        mockRequest.setMethod("POST");
        mockRequest.setParameter("name", "test");
        mockRequest.setParameter("pwd", "test");
        mockRequest.setRequestURI("/login");

        @SuppressWarnings("rawtypes")
        HttpMessageConverter[] messageConverters = {new MappingJacksonHttpMessageConverter()};

        handlerAdapter.setMessageConverters(messageConverters);

        handlerAdapter.handle(mockRequest, mockResponse, room);

        log.debug(mockResponse.getContentAsString());

    }
} 
```

控制器类：

```
@Controller
public class RoomController {

    @Autowired
    private RoomService roomService;

@RequestMapping(value = "login", method = { RequestMethod.POST,
            RequestMethod.GET })
    public @ResponseBody Room login(
            @RequestParam(value = "name", required = true) String name,
            @RequestParam(value = "pwd", required = true) String pwd) {

        return roomService.login(name.toLowerCase(), pwd);
    }
} 
```

测试上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <import resource="classpath:persistence/Hibernate.xml" />

    <context:annotation-config />
    <context:component-scan base-package="webaccess" />

    <mvc:annotation-driven />

</beans> 
```

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>WebAccess</groupId>
    <artifactId>WebAccess</artifactId>
    <version>b1</version>
    <packaging>war</packaging>
    <name>WebAccess</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <spring.version>3.1.1.RELEASE</spring.version>
        <hibernate.version>4.1.4.Final</hibernate.version>
        <slf4j.version>1.6.6</slf4j.version>
    </properties>

    <dependencies>

        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <!-- Hibernate -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${hibernate.version}</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <!-- Hibernate dependecies -->
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <!-- MySQL connector -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <!-- logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${slf4j.version}</version>
        </dependency>

        <!-- testing -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>

        <!-- json -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.8</version>
        </dependency>

        <!-- other -->
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.6</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <!-- Java version -->
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.1.2</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <downloadJavadocs>true</downloadJavadocs>
                    <wtpversion>2.0</wtpversion>
                    <additionalBuildcommands>
                        <buildCommand>
                            <name>org.springframework.ide.eclipse.core.springbuilder</name>
                        </buildCommand>
                    </additionalBuildcommands>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <packagingExcludes>WEB-INF/web.xml</packagingExcludes>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

错误：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
java.lang.NoClassDefFoundError: javax/servlet/http/HttpServletResponse
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getMethod0(Unknown Source)
    at java.lang.Class.getMethod(Unknown Source)
    at org.apache.maven.surefire.battery.JUnitBattery.processTestClass(JUnitBattery.java:126)
    at org.apache.maven.surefire.battery.JUnitBattery.<init>(JUnitBattery.java:81)
    at org.apache.maven.surefire.SurefireUtils.instantiateBattery(SurefireUtils.java:63)
    at org.apache.maven.surefire.Surefire.instantiateBatteries(Surefire.java:262)
    at org.apache.maven.surefire.Surefire.run(Surefire.java:140)
    at org.apache.maven.surefire.Surefire.run(Surefire.java:87)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.maven.surefire.SurefireBooter.runTestsInProcess(SurefireBooter.java:285)
    at org.apache.maven.surefire.SurefireBooter.run(SurefireBooter.java:201)
    at org.apache.maven.test.SurefirePlugin.execute(SurefirePlugin.java:366)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.ClassNotFoundException: javax.servlet.http.HttpServletResponse
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 38 more
RUN ABORTED
java.lang.NoClassDefFoundError
org.apache.maven.surefire.Runner
An exception or error caused a run to abort.
javax/servlet/http/HttpServletResponse

Results :
[surefire] Tests run: 0, Failures: 0, Errors: 1

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.242s
[INFO] Finished at: Wed Aug 15 12:44:40 CEST 2012
[INFO] Final Memory: 12M/164M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.1.2:test (default-test) on project WebAccess: There are some test failure. -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:39:48.117

我认为您需要将 Servlet API 作为范围的依赖项添加`provided`到您的`pom.xml`：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>provided</scope>
</dependency> 
```

我猜它在 Eclipse 中运行良好，因为 Servlet API 包含在项目属性的类路径中（特别是如果您使用动态 Web 项目），但对于 Maven 构建，您需要在`pom.xml`.

请注意，这`<scope>provided</scope>`很重要——没有它，如果您尝试部署`.war`由 Maven 组装的文件，您将遇到类加载问题。

# java - 如何在 Android 的固定间隔之间更新 SurfaceView？

> ID：11968229
> 
> 赞同：1
> 
> 时间：2012-08-15T11:06:51.197
> 
> 标签：java, android

我正在编写一个基于 LunarLander 示例项目的小程序。我想要实现的是在像这样的固定间隔之间更新我的`SurfaceView`（主要重新定位一些s）：`Drawable`

```
private static final int UPDATE_INTERVAL = 1000 / 20; // 20 FPS 
```

我正在运行一个`Thread`在它的`run()`方法中这样做的：

```
@Override
    public void run() {
        while (isRunning) {
            Canvas c = null;
            try {
                c = view.getSurfaceHolder().lockCanvas(null);
                synchronized (view.getSurfaceHolder()) {
                    if (GameState.RUNNING.equals(state)) {
                        long now = System.currentTimeMillis();
                        if (now - lastUpdate > UPDATE_INTERVAL) {
                            lastUpdate = now;
                            updater.updatePieces();
                        }
                        doDraw(c);
                    }
                }
            } finally {
                if (c != null) {
                    view.getSurfaceHolder().unlockCanvasAndPost(c);
                }
            }
        }
    } 
```

我的问题是这可能`Thread`正忙于等待`(now - lastUpdate > UPDATE_INTERVAL)`条件成为`true`。但是如果重绘需要超过 1000 / 20 秒，还有另一种情况。这意味着动画并不总是无缝的。我在我的模拟器中试了一下，通常没问题，但有时我`Drawable`的速度变慢了，然后它加速了大约半秒。这只是模拟器还是其他？

我不会在细节上打扰你，`updatePieces()`只是从上到下移动一个小圆圈。我没有创建任何新对象。我不知何故觉得这段代码不正确。这是动画`Drawable`s 的好习惯还是我遗漏了一些明显的东西？我对这个话题有点陌生。

我将触摸和按键事件从 UI 线程传播到这个线程，所以我真的不想调用`sleep()`它，`Thread`因为它可能会导致 UI 线程变得无响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:09:17.187

想想物体在现实中的反应。物体移动一定距离。它在一定时间内移动的距离取决于速度。速度取决于最后的加速度。距离、速度和加速度都取决于时间。

在您的代码中，您根本不处理时间*，*因此对您当前的代码没有现实世界的解释。像这样把你的物理放在一起：

1.  实现一个增量系统，比如欧拉积分。该系统应包含有关绘制前一帧所用时间的信息。*注意：欧拉积分在加速度恒定（如重力）时是准确的，而不是在加速度变化时准确。但这更多是一个优化主题，现在不要考虑这个问题。*
2.  当您知道前一帧花了多长时间时，您也知道您的对象根本没有移动的时间。
3.  在下一次更新中考虑那个时间。

例如：

```
public void updatePieces(float timeDelta) {
    // The amount of an acceleration depends on a force
    // in a specified direction. You can skip this, and just
    // give your object a velocity. But to consider acceleration
    // later on, you have to assign forces and resolve them in
    // their respective direction.
    mAccelerationX  = fResX / weight;             
    mAccelerationY  = fResY / weight; 

    // Consider the previous velocity and add the change
    // in velocity.
    mVelocityX = mVelocityX + (mAccelerationX * timeDelta);
    mVelocityY = mVelocityY + (mAccelerationY * timeDelta);

    mPositionX = mPositionX + (mVelocityX * timeDelta);
    mPositionY = mPositionY + (mVelocityY * timeDelta);
} 
```

了解一点物理学有助于理解为什么这是有道理的：

```
mAccelerationX  = fResX / weight; 
```

基本上是[牛顿第二定律](http://en.wikipedia.org/wiki/Newton%27s_laws_of_motion)，`F = ma`。

```
mVelocityX = mVelocityX + (mAccelerationX * timeDelta); 
```

有效，因为我们正在做的是将加速度乘以`m/s^2`时间`s`。这将为您提供自上一帧以来速度发生了多少变化。简单的取消给了我们`(m/s^2)*s = m*s/s^2 = m/s`。添加之前的速度并完成。

同样的逻辑适用于：

```
mPositionX = mPositionX + (mVelocityX * timeDelta);
// (m/s)*s  = m*s/s = m 
```

请注意，您可能必须添加一个比例因子来相乘，以使物理效果在您的屏幕上逼真 - 例如多少像素等于五米，或类似的东西。

有大量文章对此进行了描述，例如 Glenn Fiedler 的[Integration Basics](http://gafferongames.com/game-physics/integration-basics/)。搜索，你会发现更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:12:33.777

对于任何有其他工作要做的系统，这不是一个基于时间做任何事情的好习惯：您的代码正在消耗尽可能多的 CPU 时间。您编码的内容称为“忙循环”。这意味着当您没有工作要做时，您仍然很忙。

更好的选择包括使用某种类型的计时器/警报（java Timer、Android AlarmManager）来安排在其时间完成的工作，或者调用 Thread.sleep() 以延迟到您的下一个更新间隔。

# android - 在模拟器中模拟服务崩溃

> ID：11968232
> 
> 赞同：1
> 
> 时间：2012-08-15T11:07:29.783
> 
> 标签：android, service, android-emulator, crash

有人知道如何在模拟器中模拟服务崩溃吗？我在模拟器上的应用程序中运行了两个服务，我必须检查如果服务崩溃会发生什么..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:23:37.437

如果你想让服务崩溃，你需要做的就是让它抛出未处理的异常。如果写： `int a = 3/0` 会抛出异常，服务会崩溃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:27:32.043

您也可以在设置-应用程序-运行中停止服务并选择您的应用程序/服务。这并不完全是崩溃，但在某些工作期间停止服务也会导致一些麻烦 ;-)

# jquery - Chrome 扩展：未捕获的错误：此上下文不允许从字符串生成代码

> ID：11968234
> 
> 赞同：4
> 
> 时间：2012-08-15T11:07:41.693
> 
> 标签：jquery, google-chrome, google-chrome-extension, template-engine

我正在尝试在 chrome 扩展中使用[微模板引擎](http://ejohn.org/blog/javascript-micro-templating/)并收到以下错误：`Uncaught Error: Code generation from strings disallowed for this context` 解析模板时。你能帮我解决这个问题吗？

清单.json

```
manifest.json:
{
  "name": "YYYY",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.ico",
    "default_popup": "popup.html"
  }
} 
```

popup.html：

```
<!doctype html>
<html ng-csp ng-app>
  <head>
    <title>Getting Started Extension's Popup</title>
    <style>
      body {
        min-width:357px;
        overflow-x:hidden;
      }
    </style>

    <!-- JavaScript and HTML must be in separate files for security. -->
    <script src="jquery.min.js"></script>
    <script src="popup.js"></script>

  </head>
  <body>
      <ul>
            <li></li>
      </ul>

        <script id="userlisttemplate" type="text/html">
           <% for(var i=0; i < items.length; i++) { var item = items[i]; %>               

                <li> 
                <%= item.UserName%>

                </li>                                                     

           <% } %>
        </script>
  </body>
</html> 
```

popup.js：

```
// Simple JavaScript Templating
// John Resig - http://ejohn.org/ - MIT Licensed
(function () {
    var cache = {};

    this.tmpl = function tmpl(str, data) {
        // Figure out if we're getting a template, or if we need to
        // load the template - and be sure to cache the result.
        var fn = !/\W/.test(str) ?
      cache[str] = cache[str] ||
        tmpl(document.getElementById(str).innerHTML) :

        // Generate a reusable function that will serve as a template
        // generator (and which will be cached).
      new Function("obj",
        "var p=[],print=function(){p.push.apply(p,arguments);};" +

        // Introduce the data as local variables using with(){}
        "with(obj){p.push('" +

        // Convert the template into pure JavaScript
        str
          .replace(/[\r\t\n]/g, " ")
          .split("<%").join("\t")
          .replace(/((^|%>)[^\t]*)'/g, "$1\r")
          .replace(/\t=(.*?)%>/g, "',$1,'")
          .split("\t").join("');")
          .split("%>").join("p.push('")
          .split("\r").join("\\'")
      + "');}return p.join('');");

        // Provide some basic currying to the user
        return data ? fn(data) : fn;
    };
})();

$.ajax({
    url: myurl,
    type: "GET",
    contentType: "application/json",
    success: function (response) {
        debugger;
        console.log(response);
        var data = response.data;
        var s = tmpl($('#userlisttemplate').html(), { items: data });
        $('body').append($(s));
    },
    error: function (jqXHR, textStatus, errorThrown) {
        $("#result").text(textStatus);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T21:09:37.237

此模板库不能在常规扩展页面中使用，因为它`new Function()`与字符串一起使用，现在 Chrome 的新内容安全策略禁止使用清单版本 2 创建的扩展。[请参阅此处](https://developer.chrome.com/trunk/extensions/sandboxingEval.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:15:42.097

`"new Function"`尝试替换它的所有实例`"function(){}"`使我的 socket.io.js 工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:23:59.817

不要在 popup.html 中使用内部脚本。请参阅[内容安全策略](https://developer.chrome.com/extensions/contentSecurityPolicy.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T11:10:54.957

你使用的 tmpl 函数不正确，试试这个：

```
var s = tmpl('userlisttemplate', { items: data }); 
```

同样在您的模板中，您希望 items 是一个数组，但返回的 json 是一个对象（除非`manifest.json`不是实际请求的 json，在这种情况下我需要返回的数据）

manifest.json 也不包含`UserName`模板中提到的任何内容

尝试以下我确实得到了结果：

```
var s = tmpl('userlisttemplate',{
        items: [{
            "UserName": "test1"
        },{
            "UserName": "test2"
        },{
            "UserName": "test3"
        }]
});
$('body').append($(s)); 
```

# facebook - 有没有办法确定 Facebook 应用用户是否实际在线并使用我的 FB 应用？

> ID：11968241
> 
> 赞同：0
> 
> 时间：2012-08-15T11:08:16.703
> 
> 标签：facebook, html

我正在开发我的第一个 Facebook 应用程序。

它涉及随着游戏在各个阶段的进展向用户发送消息。

如果用户碰巧在线并且已经在使用我的应用程序，我希望在页面上发出通知，而不是通过 Facebook 请求路由它们，否则我将使用记录的 FB 请求。

有没有其他人尝试过这样做？

有没有任何人可以参考的例子？

如果它更容易，我准备在这一点上将应用程序限制为 HTML5 用户！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:22:17.750

# php - 从 STDIN 逐行读取

> ID：11968244
> 
> 赞同：51
> 
> 时间：2012-08-15T11:08:36.920
> 
> 标签：php, pipe, stdin

我想做这样的事情：

```
$ [mysql query that produces many lines] | php parse_STDIN.php 
```

在`parse_STDIN.php`文件中，我希望能够从标准输入逐行解析我的数据。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-15T11:13:03.077

使用`STDIN`常量作为文件处理程序。

```
while($f = fgets(STDIN)){
    echo "line: $f";
} 
```

注意：STDIN 上的 fgets 读取`\n`字符。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-02-13T20:25:57.070

您也可以使用生成器 - 如果您不知道 STDIN 的大小。

**需要 PHP 5 >= 5.5.0, PHP 7**

类似于以下内容：

```
function stdin_stream()
{
    while ($line = fgets(STDIN)) {
        yield $line;
    }
}

foreach (stdin_stream() as $line) {
    // do something with the contents coming in from STDIN
} 
```

您可以在此处阅读有关生成器的更多信息（或谷歌搜索教程）： http: [//php.net/manual/en/language.generators.overview.php](http://php.net/manual/en/language.generators.overview.php)

# java - 是否可以将 java.io.FIle 传递给 JUnitCore.runClasses()

> ID：11968245
> 
> 赞同：0
> 
> 时间：2012-08-15T11:08:39.340
> 
> 标签：java, junit

我正在尝试使用 JUnitCore.runClasses() 并且可以使用以下代码使其运行

```
JUnitCore.runClasses(testClass.class); 
```

但我很好奇，因为 runClasses() 可以接受任意数量的参数，是否可以使用类似于以下的代码？

```
Class c = testClass.class;
JUnitCore.runClasses(c); 
```

或者

```
List<Class> c = new ArrayList<>{test1.class, test2.class, test3.class};
JUnitCore.runClasses(c); 
```

我在问这个问题，就好像您尝试将 java.io.File 类型传递给 JUnitCore.runClasses() 一样，您会收到以下错误

```
no suitable method found for runClasses(java.io.File)
method org.junit.runner.JUnitCore.runClasses(java.lang.Class<?>...) is not applicable
  (argument type java.io.File does not conform to vararg element type java.lang.Class<?>)
method org.junit.runner.JUnitCore.runClasses(org.junit.runner.Computer,java.lang.Class<?>...) is not applicable
  (actual argument java.io.File cannot be converted to org.junit.runner.Computer by method invocation conversion) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:35:16.023

我假设您正在尝试执行以下操作：

您有一个包含要使用 JUnitCore 运行的 java 类的文件。

要完成此任务，您必须：

1.  加载类，这可以通过使用自定义类加载器来完成。更好的方法是将类包含到您的应用程序中
2.  现在您可以调用 JUnitCore.runClasses(loadedClass);

**代码示例：**

```
File file = new File("path to your file");
File dir = file.getParentFile();
URL url = new URL("file://" + dir.getAbsolutePath());
URLClassLoader classLoader = new URLClassLoader(new URL[]{url});
Class<?> clazz = classLoader.findClass("ClassName");
JUnitCore.runClasses(clazz); 
```

该示例仅在该类没有包时才有效。您可以编写自己的类加载器来控制类加载过程。请参阅[URLClassLoader 的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/net/URLClassLoader.html)以了解此类加载器的工作原理。要编写自定义类加载器，您可以参考[这个](http://publib.boulder.ibm.com/infocenter/javasdk/v1r4m2/index.jsp?topic=/com.ibm.java.doc.diagnostics.142/html/id1100.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T14:59:43.017

您还可以创建一个包含所有 TestClass 的 TestSuite 类。然后你可以调用它

```
JunitCore.runClasses(TestSuite.class); 
```

TestSuite 类包含您的 TestClass 的列表，例如

```
@RunWith(Suite.class)
@Suite.SuiteClasses({
    Test1.class,
    Test2.class
}) 
```

# vba - 内容为 XPS 时如何使用 Webbrowser.Document 属性？

> ID：11968249
> 
> 赞同：0
> 
> 时间：2012-08-15T11:09:10.203
> 
> 标签：vba, webbrowser-control, domdocument, xps

我正在使用本机的非 .NET WebBrowser 控件向用户显示 HTML 页面或 XPS 文档。我愿意`Navigate`。

我对 HTML 部分很满意，但 XPS 文档通常不适合浏览器范围。我想按宽度适合它。如果我双击内容会发生这种情况，但我想在文档加载时以编程方式进行。

据记录，它为托管[文档](http://msdn.microsoft.com/en-us/library/aa752052%28v=vs.85%29)`WebBrowser.Document`返回一个`IDispatch`。自然，我想获得这个属性并做类似的事情。`Webbrowser1.Document.Parent.[FitToWidth()](http://msdn.microsoft.com/en-us/library/system.windows.controls.documentviewer.fittowidth%28v=vs.90%29)`

问题是我无法弄清楚返回的`IDispatch`实际方法以及如何使用它。
我试图用 获取类/接口信息`TypeLib Info`，但运气不好，该对象不支持。
我尝试了一些常见的属性，例如`Name`or `Parent`，它们似乎也不存在。
我认为它可能类似于`DocumentViewer`，但同样，“对象不支持此操作。”

**那么当内容为 XPS 时如何使用 Webbrowser.Document 属性呢？**

*（顺便说一句，错误很奇怪。在 VBA 世界中，它应该是“对象不支持此属性或方法”，但实际上是“对象不支持此操作。”是网络浏览器阻止我什至使用该文档（因为它对脚本编写不安全）？）*

希望避免在浏览器范围内模拟双击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:08:32.143

@GSery您是否尝试过从诸如 BeforeNavigate2 和 DocumentComplete 之类的事件中获取 pDisp 以便您可以使用 pDisp （以及事件传递的其他参数）来查看您还能用它做什么？

当然，WBControl.Document 提供了 .Width 和 .Height 属性，我相信您已经尝试过这些，如果您还没有尝试过，请试一试。另一种选择是在文档窗口中运行 javascript。像这样（WB 是您的 WebBrowser 控件名称），sScript 是您要更改 window.height 和 window.width 的 javascript 文件，每行新的 js 代码都可以用 ; 一行可以包含多行，用 ; 分隔。此外，必须将 sLanguage 设置为“JScript”，然后您就可以开始了。

```
WB.Document.parentWindow.execScript sScript, sLanguage 
```

否则，我们可以使用另一个技巧，将 .XPS 加载到主/父文档内的 iframe 中，并在父/主文档托管的 HTML 中设置 iframe 的宽度。这应该会强制 XPS 正常运行，当然，您也可以在主/父文档上运行 .execScript（javascript 行 od 代码）（并从那里访问您的框架）。

此外，如果您使用 .NET 版本的 WB 控件，欢迎您使用 .InvokeScript 代替 .execScript（但两者都应该工作）。

此外，在解析父/框架窗口层次结构时，您可以在 WB.Document.parentWindow 下或在您正在执行的 JavaScript 中执行此操作，或者您可以使用您的 exe 应用程序代码和您的 javascript 代码混合匹配和解析文档层次结构。

让我知道你们相处得如何，如果有什么我可以帮忙的。

# facebook-graph-api - php：base_facebook.php 中未指定节点

> ID：11968251
> 
> 赞同：0
> 
> 时间：2012-08-15T11:09:15.680
> 
> 标签：facebook-graph-api, error-handling, facebook-php-sdk, php

您好我正在使用此代码进行 api 调用：

```
function foo(){
   require_once 'facebook.php';
   $facebook = new Facebook(array(
                      'appId'  => $facebook_appid,
                      'secret' => $facebook_app_secret,
                    ));
   $data=$facebook->api('/me/photos',array('access_token'=>'my_access_token'));
} 
```

但现在我收到以下错误：

```
Fatal error: Uncaught Exception: No node specified thrown in C:\Users\xxx\base_facebook.php on line 1106 
```

这是什么意思？我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:21:57.757

你登录过脸书应用吗？ [参考](http://developers.facebook.com/docs/reference/php/facebook-api/)

```
function foo(){
$config = array(
    'appId' => 'YOUR_APP_ID',
    'secret' => 'YOUR_APP_SECRET',
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();
 if($user_id) {
      try {
       $data=$facebook->api('/me/photos',array('access_token'=>'my_access_token'));
      }
 } catch(FacebookApiException $e) { }
 }
} 
```

您应该确定用户是否正在登录？别的`$facebook->getLoginUrl()`

# android - apk 文件的源代码已恢复，但与我写的不一样

> ID：11968257
> 
> 赞同：3
> 
> 时间：2012-08-15T11:09:50.407
> 
> 标签：android, apk, decompiling

我正在为 Android 创建一个应用程序，它几乎完成了，但现在硬盘驱动器崩溃了，我丢失了所有数据以及应用程序的源代码。但是，幸运的是我已经在我的手机上安装了那个应用程序，所以我得到了我的应用程序的 .apk 文件，并且还使用本文中提到的步骤对文件进行了反编译，[有没有办法从 APK 文件中获取源代码？](https://stackoverflow.com/questions/3593420/android-getting-source-code-from-an-apk-file)

但是我遇到了一个问题，来源发生了一些变化，在某些地方我提到了一些变量名被一些数字代替。我附上了代码的屏幕截图，以便您可以正确查看问题。

谁能告诉我如何解决问题并恢复我编写的原始代码。因为我不能浪费时间再次编写整个代码。

我无法在此处上传屏幕截图，因此我将链接粘贴到照片中。

![在此处输入图像描述](../Images/a282e91ab49150d8b053fa09777a4255.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:14:22.840

您无法从 APK 中恢复确切的源代码；它不在那里。你恢复的代码是你能做的最好的——它是基于编译代码的近似值。

根据你恢复的截图，你很幸运能拥有这么高水平的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T11:18:11.583

使用[它](http://code.google.com/p/dex2jar/)来将其转换为 JAR，然后使用[它](http://java.decompiler.free.fr/?q=jdgui)来获取代码。

变量的问题可能是由混淆器 - ProGuard 引起的。有一种去混淆它的方法，但如上所述，你已经走得很远，你很幸运能拥有你所拥有的。

编辑：

来自官方[开发者网站](http://developer.android.com/tools/help/proguard.html)：

> **注意：**每次在发布模式下运行构建时，这些文件都会被 ProGuard 生成的最新文件覆盖。每次发布应用程序时保存它们的副本，以便从发布版本中消除混淆错误报告。

我不确定您是否可以在没有原始 ProGuard 设置的情况下对其进行去混淆...

# dynamics-crm - Online Dynamics CRM 插件注册工具停止工作

> ID：11968260
> 
> 赞同：-3
> 
> 时间：2012-08-15T11:10:07.357
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-online

最近（我想，在使用 user@a.onmicrosoft.com 引入新的登录系统之后）CRM SDK PluginRegistration 工具停止工作。有没有人解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:08:13.667

这是同一问题的另一个线程，看起来更改您的发现 URL 将使所有内容都得到解决。

[http://social.microsoft.com/Forums/en/crm/thread/039f9483-f1c2-4718-9c56-3f7d66cbea26](http://social.microsoft.com/Forums/en/crm/thread/039f9483-f1c2-4718-9c56-3f7d66cbea26)

# c - LLDB - 评估寄存器中的地址

> ID：11968261
> 
> 赞同：16
> 
> 时间：2012-08-15T11:10:15.243
> 
> 标签：c, debugging, gdb, lldb

要在 LLDB 中查看我的堆栈，我目前使用以下内容：

```
(lldb) register read rbp --format hex
rbp = 0x00007fff5fbff820 
```

然后查看向下增长的前 64 字节：

```
(lldb) memory read --size 4 --format x --count 16 `0x00007fff5fbff820-64`
0x7fff5fbff7e0: 0x5fbff900 0x00007fff 0x00000000 0x00000000
0x7fff5fbff7f0: 0x00000000 0x00000000 0x00000000 0x00000000
0x7fff5fbff800: 0x00000000 0x00000000 0x00000000 0x00000000
0x7fff5fbff810: 0x5fbff838 0x00000006 0x00000008 0x00000000 
```

我一直无法找到如何做到这一点，但有没有办法替换表达式：

```
`0x00007fff5fbff820-64` 
```

更像是：

```
`%rbp-64` 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T21:24:09.680

`$rbp-64`

还有一些用于内存读取和打印的快捷格式化程序，其作用类似于 gdb。例如

x/16x `$rbp`

有关 x/ 和 p/ 接受的格式化程序字符的详细信息，请参阅“帮助 gdb-format”。这些实际上只是内存读取 -G 和 expr -G 的命令别名。

# java - 从 Java 方法返回多个变量

> ID：11968265
> 
> 赞同：2
> 
> 时间：2012-08-15T11:10:33.757
> 
> 标签：java, methods, return

抱歉这个愚蠢的问题......有人可以帮我从方法中返回两个变量吗（我[在这里](http://helpdesk.objects.com.au/java/how-can-i-return-more-than-one-value-from-a-java-method)阅读 并尝试重新编码但没有结果）。

```
public class FileQualityChecker {
    EnviroVars vars = new EnviroVars();  
    public int n = 0;
    public int z = 0;
    public int m = 0;
    String stringStatus;

    public void stringLenghtCheck(String pathToCheckedFile)
    {
        try{    
    FileInputStream fstream = new          FileInputStream(pathToCheckedFile+"\\"+"Test.dat");
         // Get the object of DataInputStream
         DataInputStream in = new DataInputStream(fstream);
         BufferedReader br = new BufferedReader(new InputStreamReader(in));
         String strLine;
          //Read File Line By Line
         while ((strLine = br.readLine()) != null)   
         {

           if  (
           strLine.length() == vars.strLenghtH ||
           strLine.length() == vars.strLenghtCUoriginal ||
           strLine.length() == vars.strLenghtCEAoriginal ||
           strLine.length() == vars.strLenghtCAoriginal ||
           strLine.length() == vars.strLenghtTrailer ||
           strLine.length() == vars.strLenghtLastRow 

           ) 
            {
               stringStatus = "ok";
               n++;
               z++; 

            }
           else 
           {
                stringStatus = "Fail";
                n++; 
                m++;
                }
           System.out.println (n +" " + strLine.length() +" " + stringStatus);
          }

         //Close the input stream
          in.close();
        }
        catch
        (Exception e){//Catch exception if any
         System.err.println("Error: " + e.getMessage());
         }

         /*How to return m and z from method to use these vars for writing in the file*/
         return (m, z);

        }

} 
```

我需要另一个类中的 m 和 z 将它们写入文件。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T11:19:19.703

我对这类问题的第一个问题是，这两个结果之间有什么关系？

如果它们不相关，这是否表明您的方法在做两件不同的事情？

如果它们是相关的（在这种情况下它们似乎是相关的），则将它们包装在自定义对象中。这使您有机会稍后将更多结果添加到此对象中，*并且*您可以将行为附加到此对象。

您的另一个解决方案是将回调对象传递给此方法，因此您根本不返回任何内容，而是您的方法然后调用此对象上的方法，例如

```
// do some processing
callbackObject.furtherMethod(m, n); 
```

这样做的好处是遵循 OO 原则，*让对象为您做事，而不是向他们询问信息并自己做*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T11:12:44.333

创建一个单独的类并将 m 和 z 作为该对象中的变量，创建并填充该对象并返回该对象

```
class result {
  int m ; 
  int z ; 

// define getters and setters 
} 

public result stringLengthCheck(String pathToFile)
{

// your code 

result r = new result();
r.setM(m);
r.setZ(z);
return r ;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T12:12:24.607

如何返回地图。例如：

```
Map<String,Integer> result = new HashMap<String,Integer>();
result.put("ok",m);
result.put("fail",z);
return result; 
```

并且您的方法应更改为：

```
public Map stringLenghtCheck(String pathToCheckedFile) 
```

最后，您可以通过查看地图得到结果：

```
map.get("ok")
map.get("fail") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-02T12:07:38.643

您不能从方法中返回多个变量。您需要返回其他内容。可以提出很多建议：

1.  在你的方法所在的类中设置这些变量，然后访问它们（在这个类之外？）
    *   加：简单的符号，如`set`和`get`
    *   加：永远不要混淆你的变量
    *   减：课堂上的一些垃圾
2.  返回带有变量的数组或列表
    *   加：存储简单
    *   加：迭代数据的可能性
    *   减号：您可以轻松混淆变量（需要关于变量位置的约定）
    *   减号：额外的内存分配 - 存储少量变量时可能就足够了
3.  返回一个包装器（包含所需变量的类的实例）
    *   加：存储和阅读的简单性
    *   加：永远不要混淆你的变量
    *   减：丑陋的代码（可能）如果包装器不常用
4.  使用回调（如`void setToArray(int[] array, args...)`） - 与 1-3 点相同的 +/- 和

    *   加：内存分配减少是可能的
    *   减：更丑陋的方法签名

    并且一些黑客（黑客 - 不适合临时案例！）也可能发生：

5.  使用串联。您可以使用分隔符将多个字符串合二为一，或者将两个整数存储为 long

    *   所有可能的缺点，没有优点，但很有趣
6.  使用`InputStream`和`OutputStream`
    *   加：使用所有代码进行流处理的可能性（例如，存储/读取到文件）
    *   减：不能随机访问数据
7.  使用`Iterator`（我把它放在'hacks'下只是因为在很多方面它假设存储变量就像在包装器中）
    *   加：迭代数据的可能性
    *   加：避免额外内存分配的可能性
    *   减：不能随机访问数据
8.  全部存储在`String`（或`byte[]`）中并在需要时解析
    *   加：`String`无论如何都可以传输
    *   减：解析是一个昂贵的过程

经常使用存储两个整数`Point`和类。`Dimension`但是对于给定的代码，我建议使用简单的数组或在 class 中存储变量`FileQualityChecker`，因为`m`并且`z`似乎不适合坐标或维度上下文。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T12:16:19.133

另一种选择是不返回任何内容，因为您可以使用其他方法来获取这些字段中的结果。

```
FileQualityChecker fqc = ..

fqc.stringLenghtCheck(fileName);
int okCount = fqc.getOkCount();
int failedCount = fqc.getFailedCount(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T11:14:58.613

您可以创建一个自定义类或返回一个列表：

```
return Arrays.asList(m, z); 
```

（您的方法的返回类型是`List<Integer>`）

或者在您的情况下，因为`m`and`z`是类成员，您可以不返回任何内容（void）并提供 getter 来获取方法返回后`m`的值。`z`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-15T11:15:02.647

不，你不能，但编写一个包含这些字段的类很容易：

```
class StrAndInt {
   String str;
   int num;

   StrAndInt(String str, int num) {
       this.str = str;
       this.num = num;
   }
}

class MyApplication {
   ....
   ....
   StrAndInt myMethod() {
      ....
      ....
      return new StrAndInt("The value returned", 10);
   } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-09T21:10:09.633

1.我希望`m`并`n` 使用**价值观传递**。2.而不是使用引用传递。要在Java中通过引用**传递**，它必须是Java对象。3.所以创建新的整数对象**m=new Integer();** .

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-15T11:40:37.733

我不认为你可以从一个方法返回两个变量，因为一个方法只能有一个返回类型。所以IMO你有两个选择：

1）创建一个具有相同类型变量的类，并为您在该类中定义的那些变量生成getter-setter。现在从要返回变量的方法创建该类的对象，并使用 setter 将实例变量的值设置为要返回的变量的值返回该对象。

2）创建这些变量的数组并返回该数组。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-19T05:48:10.920

`int[]`当您调用该方法时，您可以将两个变量都放在一个中并提取这两个值。

```
return new Integer[]{m, z}; 
```

调用方法后：

```
Integer[] array = Foo.method();
int m = array[0];
int z = array[1]; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-31T01:23:22.147

您可以简单地构造一个对象。

但是，如果您必须返回多个变量，则可以返回一组类似类型的变量，示例如下：

```
public static StringBuilder[] remedySBarrayreturner() {
    sbbb.append("huhu");
    sbcc.append("hihi");
    return new StringBuilder[] {sbbb, sbcc};
} 
```

# javascript - 删除外部事件时在 FullCalendar 上获取资源 ID

> ID：11968266
> 
> 赞同：3
> 
> 时间：2012-08-15T11:10:35.057
> 
> 标签：javascript, fullcalendar

我正在使用[`FullCalendar jQuery plugin`](https://github.com/jarnokurlin/fullcalendar)支持资源的版本。

按照[这个例子](http://arshaw.com/js/fullcalendar-1.5.3/demos/external-dragging.html)，我正在拖入外部事件。

这一切都很好，但我找不到一种方法来获取`Resource ID`与外部事件已被丢弃的单元格（天）相关联的那个。

我正在使用下面的拖放功能。

```
drop: function(date, allDay) { 
    // this function is called when something is dropped
    // retrieve the dropped element's stored Event Object
    var originalEventObject = $(this).data('eventObject');

    // we need to copy it, so that multiple events
    // don't have a reference to the same object
    var copiedEventObject = $.extend({}, originalEventObject);

    // assign it the date that was reported
    copiedEventObject.start = date;
    copiedEventObject.allDay = allDay;

    // render the event on the calendar
    // the last `true` argument determines if the event "sticks" 
    // (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
    $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

    // is the "remove after drop" checkbox checked?
    if ($('#drop-remove').is(':checked')) {
        // if so, remove the element from the "Draggable Events" list
        $(this).remove();
    }
} 
```

我将非常感谢您对此提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T06:54:21.793

我也使用 FullCalendar 的这个分支，当你删除一个事件时可以获得资源 ID，如下所示：

```
drop: function(date, allDay, test3, test4, resource) {          
    var originalEventObject = $(this).data('eventObject');
    var copiedEventObject = $.extend({}, originalEventObject);
    copiedEventObject.start = date;
    copiedEventObject.allDay = allDay;
    copiedEventObject.resource = resource.id;

    $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

    if ($('#drop-remove').is(':checked')) {
        $(this).remove();
    }
} 
```

所以，你应该将参数传递`resource`给`drop`函数，你可以通过调用来获取资源ID `resource.id`。

# asp.net - 只允许特定用户访问 Kentico 中的页面

> ID：11968268
> 
> 赞同：1
> 
> 时间：2012-08-15T11:10:40.743
> 
> 标签：asp.net, kentico

我只想允许某个用户访问 Kentico 中的页面，但由于 Deny 比 Allow 更强大，似乎没有办法做到这一点（例如，我不能拒绝除了用户之外的所有人）。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:35:43.300

您需要设置[文档权限](http://devnet.kentico.com/docs/6_0/devguide/document_permissions.htm)

根据您的需要。总是有很多可能的组合，您还必须仔细考虑创建用户角色并将用户分配给他们。最好先画一个模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:16:57.400

You can create a login page and set a session/cookie value if login is successful, then on Page_Load event of the page you want to limit the users, check the value of session/cookie, if user is authenticated, do nothing otherwise redirect the user to login page. I assume that you are familiar with custom page templates.

# linux - 从 csv 输出特定行

> ID：11968270
> 
> 赞同：1
> 
> 时间：2012-08-15T11:10:43.363
> 
> 标签：linux, csv, sed, awk, grep

我有一个非常大（500mb）的 csv 文件和另一个每行包含一个单词的文本文件。

**当我在特定**列中的 csv 文本文件中找到一个单词时，我想输出该行（将输出重定向到文件）。我有一个使用 grep -iE "(word1|word2|word3|...|wordn)" 的 grep 解决方案，但是在使用 16gb 内存和段错误后它崩溃了，并且只提取了很少的条目。

我试过 csvtool 但它拒绝产生任何有价值的东西。

该解决方案必须在 linux 下工作，并且最好不要限制内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:16:31.123

使用`awk`. 首先处理每行一个单词的文件，将其数据保存在一个数组中，然后对于第二个文件，使用表达式***if (column in array)***检查特定列：

```
awk '
    BEGIN {
        FS = OFS = ",";
    }
    FNR == NR {
        data[ $1 ] = 1;
        next;
    }
    FNR < NR {
        if ( $4 in data ) {
            print $0;
        }
    }
' textfile large_csv_file 
```

# java - 如何以编程方式获取 contentPlaceHolder 的代码

> ID：11968273
> 
> 赞同：0
> 
> 时间：2012-08-15T11:10:56.870
> 
> 标签：java, android, html, master-pages, html-content-extraction

我希望能够使用任何 Html 解析器提取 contentPlaceHolder 的代码。问题是，我需要一个 url，但因为它是一个母版页，所以我不能拥有它。

实际上有一个`select`标签，您可以在其中选择一个选项，当您选择一个时，它会加载一个 contentPlaceHolder。我想从 contentPlaceHolder 中提取代码。

注意：我没有建立网站。

这里有一些图片可以更好地解释它：

这是母版页。 ![在此处输入图像描述](../Images/b37a772d4798097935c03ad610e02684.png)

这是内容（当你按下红色标志时）： ![在此处输入图像描述](../Images/d5ec23050535d9f7552172d3a537eef7.png)

我希望它足够清楚理解......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:41:52.010

首先，这需要[JSoup](http://jsoup.org)。

```
try {
    // Regexp pattern used to strip the links
    Pattern p = Pattern.compile("\'([^\']*)\'");

    // First, let's find the IFRAME from the main page
    Document doc = Jsoup.connect("http://blich.co.il/timetable-shahaf").get();
    Elements iframe = doc.select("iframe");
    if (!iframe.isEmpty()) {
        String src = iframe.get(0).absUrl("src");
        if (!TextUtils.isEmpty(src)) {
            // Now we need to fetch the contents of the IFRAME
            doc = Jsoup.connect(src).get();

            // This is where we manipulate the <select ..> statement. There's only
            // one on this page, so this will be done quick and dirty
            Elements selects = doc.select("select.HeaderClasses");
            Elements options = selects.select("option");
            if (!options.isEmpty()) {
                // There's a lot of options here.. dunno what they mean, so let's just
                // select a **random** and go with that. Your code should probably let the user
                // choose from a dialog or something.
                Collections.shuffle(options);
                Element option = options.get(0);

                String name=selects.get(0).attr("name");
                if (!TextUtils.isEmpty(name)) {
                    doc = Jsoup.connect(src)
                            .data("__EVENTTARGET", name)
                            .data("__EVENTARGUMENT", "")
                            .data(name, option.attr("value")) // Add random option value
                            .data("__VIEWSTATE", 
                                    doc.select("input#__VIEWSTATE").attr("value"))
                            .data("__LASTFOCUS", "")
                            .post();
                }
            }
            // All the relevant links are stored in a td with the class "HeaderCell"
            Elements links = doc.select("td.HeaderCell a");
            for (Element link : links) {                    
                // These are all links to a silly java-script method, _doPostBack(..)
                // function __doPostBack(eventTarget, eventArgument) {
                //   if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
                //      theForm.__EVENTTARGET.value = eventTarget;
                //      theForm.__EVENTARGUMENT.value = eventArgument;
                //      theForm.submit();
                //   }
                // }
                // The important bits appear to be eventTarget and eventArgument at least,
                // but none of the links define an eventArgument in any case - so we just
                // need "eventTarget".

                // Naïve splitting, take the first quoted string
                Matcher m = p.matcher(link.attr("href"));
                if (m.find()) {
                    String eventTarget = m.group(1);
                    // The eventTarget you're looking for ends with 'ChangesTable'
                    if (eventTarget != null && eventTarget.endsWith("ChangesTable")) {
                        // Now we need to do a POST :-D - this API requires us to retain
                        // __VIEWSTATE - so we need to post that to.
                        doc = Jsoup.connect(src)
                                .data("__EVENTTARGET", eventTarget)
                                .data("__EVENTARGUMENT", "")
                                .data("__VIEWSTATE", 
                                        doc.select("input#__VIEWSTATE").attr("value"))
                                .data("__LASTFOCUS", "")
                                .post();

                        // All the lesson information is stored in a div with the class 
                        // TTLesson, so let's select those
                        Elements lessons = doc.select("div.TTLesson");
                        if (lessons.isEmpty()) {
                            Log.w(TAG, "Unable to list any lessons");
                        } else {
                            for (Element lesson : lessons) {
                                // This is were knowledge of Hebrew would come in handy -
                                // but this will list all lessons. You should be able
                                // to figure out how to find the one you want.
                                System.out.println(lesson);
                            }
                        }
                    }
                }
            }
        } else {
            Log.w(TAG, "Unable to find iframe src");
        }
    } else {
        Log.w(TAG, "Unable to find iframe");
    }
} catch (IOException e) {
    Log.w(TAG, "Error reading timetable", e);
} 
```

这将列出您想要的页面上的所有课程。我会把找到正确的教训留给你，因为我知道的希伯来语不够多，无法辨别任何细胞到底包含什么。

**编辑**：现在该示例将在 <select> 中随机选择一个选项并刷新页面。

# vb.net - 如何在默认浏览器中从 VB.net Web 浏览器打开链接

> ID：11968274
> 
> 赞同：0
> 
> 时间：2012-08-15T11:11:02.510
> 
> 标签：vb.net, visual-studio-2010, web, browser

我使用 Visual basic 中的内置 Web 浏览器来显示我的 Adsense 广告，这些广告显示在我的网页上。这很好用。唯一的问题是，当您点击广告时，它会在应用程序中打开。

我在这里看过：在默认浏览器中打开 Web 视图中的所有链接

它说的是 WebPolicyDelegate，我不确定如何做到这一点。

无论如何在默认的互联网浏览器中打开一个点击的链接，而不是在 vb.net (visual studio 2010)

谢谢克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:23:56.883

上次我在使用 Adsense 时检查了条款和服务，他们要求在同一窗口中打开广告。这可能已经改变，但您应该阅读 TOS 进行确认。您正在体验的此功能是设计使然。

此处突出显示：http: [//support.google.com/adsense/bin/answer.py ?hl=en&answer=1354740](http://support.google.com/adsense/bin/answer.py?hl=en&answer=1354740)

# maven - 在 ServiceMix 中将简单的战争部署为 OSGi 包

> ID：11968278
> 
> 赞同：1
> 
> 时间：2012-08-15T11:11:13.053
> 
> 标签：maven, osgi, war, apache-servicemix

我编写了一个非常简单（没有 java 文件）的 war 文件，我希望将其部署到 servicemix。它具有以下目录结构：

```
.
|-src
  |-main
    |-webapp
      |-css
      |-js
      |-WEB-INF
        \-web.xml
      \-index.html
\-pom.xml 
```

我可以使用以下命令将其部署到在 ServiceMix 中运行的码头容器：

```
>install war:file:///<Fully qualified war location>?Webapp-Context=<Application name>
>osgi:start <Bundle id>
>http://localhost:8181/<Application name>/index.html 
```

我更喜欢像对其他捆绑包一样进行热部署。pom.xml 应该是什么样的？越简单越好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:04:49.533

我有类似的要求（只是 Karaf，而不是 ServiceMix）。我的看起来像这样：

编辑：请参阅 ben1729 对附加捆绑插件配置的回答。我忘记了那部分，因为它在我所有模块的父 pom.xml 中。

```
 <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <archive>
                    <!-- add the generated manifest to the war -->
                    <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
                </archive>
                <overlays>
                  <overlay>
                    <!-- empty groupId/artifactId represents the current build -->
                      <excludes>
                          <exclude>*</exclude>
                      </excludes>
                  </overlay>
                </overlays>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <configuration>
                <instructions>
                    <Web-ContextPath>/base/url</Web-ContextPath>
                </instructions>
            </configuration>
        </plugin>
    </plugins> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:41:06.233

这对我来说已经成功了（尽管我确实需要添加一个占位符 java 文件以确保生成目标/类）：

```
<plugins>
    <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <configuration>
            <archive>
                <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
            </archive>
        </configuration>
    </plugin>
    <plugin>
        <groupId>org.apache.felix</groupId>
        <artifactId>maven-bundle-plugin</artifactId>
        <executions>
            <execution>
                <id>bundle-manifest</id>
                <phase>process-classes</phase>
                <goals>
                    <goal>manifest</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <supportedProjectTypes>
                <supportedProjectType>jar</supportedProjectType>
                <supportedProjectType>bundle</supportedProjectType>
                <supportedProjectType>war</supportedProjectType>
            </supportedProjectTypes>
            <instructions>
                <Bundle-Version>${pom.version}</Bundle-Version>
                <Webapp-Context>webclient</Webapp-Context>
                <_include>-osgi.bnd</_include>
            </instructions>
        </configuration>
    </plugin>
</plugins> 
```

# android - SQLite 计数（列）按问题分组

> ID：11968279
> 
> 赞同：1
> 
> 时间：2012-08-15T11:11:17.357
> 
> 标签：android, sql, sqlite

我无法弄清楚以下问题。我得到一个带有名称列的非常简单的表。现在我想用下面的功能来计算这个关系中的所有名字。

```
Cursor c = database.rawQuery(
            "select count(name) from geo group by name", null);
    int count = 0;
    if (c.getCount() > 0) {
        c.moveToFirst();
        count = c.getInt(0);        
    }
    c.close();
    return count; 
```

我在表中正好看到两行。一个叫“John”，另一个叫“Sandra”。但是代码总是返回`count = 1` 如果我在我的服务器端应用程序中使用 mysql 执行 sql，它运行良好。

你看到问题了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:20:38.310

你可能想要

```
 SELECT count(name) FROM geo 
```

或者

```
 SELECT count(DISTINCT name) FROM geo 
```

# jquery - jquery ajax 仅在 IE 上没有返回数据

> ID：11968281
> 
> 赞同：1
> 
> 时间：2012-08-15T11:11:21.320
> 
> 标签：jquery, ajax, internet-explorer

我有一个在 Chrome、FF 和 Safari 上运行良好的 ajax 调用，但在 IE 上总是失败（“成功但没有数据”）。我检查了服务器日志并且总是触发正确的响应，但 IE 仍然显示空响应并且没有捕获正确的 302 http 状态代码。我尝试了很多组合，发现当使用 contentType: "text/html; charset=utf-8" IE 确实得到了响应，但问题是 $_POST 数组是空的，因为发送 POST 应该是 contentType: "application/x -www-form-urlencoded；字符集=utf-8"

这是我的 JavaScript：

```
 ```
function someFunc() {   
  $.ajax({
    cache: false,
    async: false,
    type: 'POST',
    dataType: 'html',
            contentType: "application/x-www-form-urlencoded; charset=utf-8",
        //contentType: "text/html; charset=utf-8",
    url: myProtocol + myHost + "/mypage.php",
    data: {action: "someAction"},
    success: function( data ) {
        if (data == ""){
            alert("success but no data");
            return;
        }
        // do something...
        return;
    },
    error: function( data ) {
        if (data.status == "302"){
                            // do something...
            return;
        } else {
            // do something...
            return;
        }
    }
});

  return;
} 
``` 这是我的 PHP 响应（mypage.php）：

```
 ```
$loginUrl = "someUrl";
header("HTTP/1.1 302 Found");
header("Content-Type: text/html; charset=utf-8");
Header("Content-Length: " . mb_strlen($loginUrl, "8bit"));
header("Connection: close", true);
echo $loginUrl; 
``` 只有在 IE 7-9 上，我才能在其他浏览器上完美运行“成功但没有数据”。任何想法？有人？

谢谢！

            回答 #1

赞同：0

时间：2012-08-24T13:33:20.493

问题在于 IE 试图跟随重定向位置，这不是我想要在我的 JS 中做的。我所做的解决方法是将响应更改为 200 OK 并让 JS 检测 URL 是否在响应，然后对其进行处理：

```
success: function( data ) {
    if (data.match('http://') || data.match('https://')){
        window.parent.location = data;
        return;
    } else {
            var url = (window.location != window.parent.location) ? document.referrer: document.location;
        window.parent.location = url;
        return;
    }
} 
```

            回答 #2

赞同：-1

时间：2012-08-15T11:19:52.640

您要返回[`Location HTTP`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)标题吗？

```
header("Location", $loginUrl); 
```

```

```

# javascript - AngularJS：基于属性的模板变体

> ID：11968284
> 
> 赞同：5
> 
> 时间：2012-08-15T11:11:41.530
> 
> 标签：javascript, angularjs

假设我在 AngularJS Web 应用程序中有一个控制器，它有一个数据数组，用于存储非常相似但需要不同模板的对象，具体取决于成员变量“类型”。例如 ：

```
function fooCtrl($scope) {
    $scope.bar = [
        {"name": "example 1",
         "type": "egType1",
         "text": "Some example text"},
        {"name": "example 2",
         "type": "egType2",
         "text": "Some example text"},
        {"name": "example 3",
         "type": "egType3",
         "text": "Some example text"},
    ];
} 
```

可以使用 ng-repeat 指令轻松创建一个模板来输出数据，如下所示：

```
<ul>
    <li ng-repeat="item in bar">
        {{item.name}}
        <p>{{item.text}}</p>
    </li>
</ul> 
```

但是，这将导致每个项目具有相同的显示。

在能够根据 item.type 的值改变模板的同时输出 bar 中所有项目的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T11:21:02.103

我想您可以使用[ngSwitch](http://docs.angularjs.org/api/ng.directive%3angSwitch)指令，如下所示：

```
<li ng-repeat="item in bar">
    <div ng-switch on="item.type">
        <div ng-switch-when="egType1">
            {{item.name}}
            <p>{{item.text}}</p>
        </div>
        <div ng-switch-when="egType2">
            XXX {{item.name}}
            <span>{{item.text}}</spab>
        </div>
        <div ng-switch-default>
            DEFAULT {{item.name}}
            <span>{{item.text}}</spab>
        </div>
    </div>
</li> 
```

# c# - 使用语句中的 MemoryStream - 我需要调用 close()

> ID：11968289
> 
> 赞同：42
> 
> 时间：2012-08-15T11:12:09.627
> 
> 标签：c#, using, memorystream, using-statement

在 using 语句中使用内存流时，我需要调用 close 吗？例如这里需要 ms.Close() 吗？

```
 using (MemoryStream ms = new MemoryStream(byteArray)) 
    {  
      // stuff 

      ms.Close(); 
    } 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-15T11:13:13.833

不，这不对。

`using`确保[`Dispose()`](http://msdn.microsoft.com/en-us/library/ms227422)将被调用，而后者又调用该`Close()`方法。

您可以假设所有类型的 Streams 都被该`using`语句关闭。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)：

> 当您使用访问非托管资源的对象（例如 StreamWriter）时，一个好的做法是使用 using 语句创建实例。**当使用它的代码完成时，using 语句会自动关闭流并在对象上调用 Dispose**。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T11:13:02.020

> 在 using 语句中使用内存流时，我需要调用 close 吗？

不，你不需要。它将`.Dispose()`被自动调用的方法调用：

```
using (MemoryStream ms = new MemoryStream(byteArray)) 
{  
    // stuff 
} 
```

# android - eclipse中的@override注解

> ID：11968290
> 
> 赞同：6
> 
> 时间：2012-08-15T11:12:17.663
> 
> 标签：android, eclipse

我知道有很多人问同样的问题（很多人回答），但他们的回答都没有帮助我。

如果我从接口匿名实现方法，我总是会收到 @override 注释错误。

```
 listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override //  <-- **this will give error message**
        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {

            Menu menu = MainMenu.listMenu.get(i);

            Tabs.setCurrentTab(menu.pos + 1); 
        }
    }); 
```

我正在团队中开发我的 android 应用程序。我的团队在使用 Eclipse 时使用 IDEA。我的团队从未收到此错误。会不会是eclipse的bug？

我们的java版本是一样的，1.6。我的eclipse版本是3.7。

错误是：

```
Multiple markers at this line
- The method onItemClick(AdapterView<?>, View, int, long) of type new AdapterView.OnItemClickListener(){} must override a superclass 
 method
- implements android.widget.AdapterView.OnItemClickListener.onItemClick 
```

谁能建议可以采取一些措施来消除此错误？

编辑：更多信息，在这种情况下我不会出错：

```
@Override
    public View getView(int position, View v, ViewGroup parent) {
        try {
            ...
            }

            Menu menu = Menu.getListMenu().get(position);

            if (menu != null){
               ...
            }
        } catch (Exception e) {
          ...
        }

        return v;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T11:20:57.693

从现有代码导入项目时，我曾多次遇到此问题。出于某种原因，JDK 合规级别默认为 Java 1.5，即使您的机器上安装了 1.6。如果是这种情况，请在 Eclipse 包资源管理器中右键单击您的项目，选择 Properties，选择 Java Compiler 部分，并将 JDK Compliance level 设置为 1.6

# android - Android 兼容性库和新软件版本

> ID：11968291
> 
> 赞同：1
> 
> 时间：2012-08-15T11:12:27.280
> 
> 标签：android, android-support-library, android-compatibility

**问题**

我使用了一个自定义版本`Compatibility Support Library`，使我能够将 Google Maps 与 Fragments 一起使用。

我的问题是，当新软件发布时，例如`Jelly Bean`刚刚发布，我的兼容性库是否仍然有效，或者一切都会崩溃和中断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:26:23.480

如果它在您的目标版本上运行良好，它将在任何更高版本上运行良好。

但是在真实的设备上对其进行测试总是一件好事。

希望这能回答你的问题。

# python - 将 f2py 扩展名导入为“import mymod.foo”

> ID：11968295
> 
> 赞同：4
> 
> 时间：2012-08-15T11:12:46.103
> 
> 标签：python, import, python-sphinx, f2py, autodoc

我从 Fortran 文件创建了一个 Python 模块：

```
f2py -c -m mymod file1.f90 file2.f90 file3.f90 
```

`file1.f90`包含 Fortran 模块：`foo`, `bar`, `bar`. 模块`foo`包含函数：`f`, `g`, `h`.

f2py 自动为 function 编写文档字符串`f`。

`mymod.so`包含在目录`ROOT`中，我已经添加`ROOT`到我的`PYTHONPATH`.

我可以通过以下方式访问`f`函数的文档字符串：

```
import mymod
mymod.foo.f.__doc__ 
```

我现在想`f`使用 sphinx 的 autodoc 扩展为函数编写文档：

```
.. autofunction:: mymod.foo.f 
```

但它失败了：

```
ImportError: No module named mymod.foo 
```

我认为 sphinx 正试图像这样导入，但它不起作用：

```
import mymod.foo
foo.f.__doc__ 
```

我试图导入一个包含`__init__.py`.

我怎样才能让 sphinx 找到`mymod.foo.f`docstring？

# android - 如何使用蓝牙在 Android 和正在运行的 NXT 程序之间进行交互

> ID：11968303
> 
> 赞同：0
> 
> 时间：2012-08-15T11:13:20.423
> 
> 标签：android, bluetooth, nxt, lego

我修改了 Minddroid github Android 程序以读取 LEGO NXT 上的传感器（很棒的设备！）。现在我想读取蓝牙消息并将其写入在 NXT 中运行的 Mindstorms 程序。这样我就可以运行 NXT 程序并在 Android 要求时将结果/读数发送到 Android。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:40:24.353

我创建了一个项目，NXT 将数据发送回我的 Android 设备。这是一些应该工作的代码：

**这是所有Android端代码：**

这是我编写的一个类，它将负责通过蓝牙进行*连接和通信。*

```
public class Connector {

    public static final String TAG = "Connector";

    public static final boolean BT_ON = true;
    public static final boolean BT_OFF = false;

    public BluetoothAdapter bluetoothAdapter;
    public BluetoothSocket bluetoothSocket;
    public String address;

    public Connector(String address) {
        this.address = address;
        this.bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    }

    public void setBluetooth(boolean state) {
        if(state == Connector.BT_ON) {
            // Check if bluetooth is off
            if(this.bluetoothAdapter.isEnabled() == false)
            {
                this.bluetoothAdapter.enable();
                while(this.bluetoothAdapter.isEnabled() == false) {

                }
                Log.d(Connector.TAG, "Bluetooth turned on");

            }

        }
        // Check if bluetooth is enabled
        else if(state == Connector.BT_OFF) {
            // Check if bluetooth is enabled
            if(this.bluetoothAdapter.isEnabled() == true)
            {
                this.bluetoothAdapter.disable();
                while(this.bluetoothAdapter.isEnabled() == true) {

                }
                Log.d(Connector.TAG, "Bluetooth turned off");

            }

        }

    }

    public boolean connect() {

        boolean connected = false;
        BluetoothDevice nxt = this.bluetoothAdapter.getRemoteDevice(this.address);

        try {
            this.bluetoothSocket = nxt.createRfcommSocketToServiceRecord(UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"));
            this.bluetoothSocket.connect();
            connected = true;

        } 
        catch (IOException e) {
            connected = false;

        }

        return connected;

    }

     public Integer readMessage() {
         Integer message;

         if(this.bluetoothSocket!= null) {
             try {
                 InputStreamReader input = new InputStreamReader(this.bluetoothSocket.getInputStream());
                 message = input.read();
                 Log.d(Connector.TAG, "Successfully read message");

             } 
             catch (IOException e) {
                 message = null;
                 Log.d(Connector.TAG, "Couldn't read message");

             }  
         }
         else {
             message = null;
             Log.d(Connector.TAG, "Couldn't read message");

         }

         return message;

     }

} 
```

在您的活动类中，您可以创建一个`Connector`对象。在 onCreate() 方法中，您必须像这样连接才能建立到 NXT 的连接：

```
// Establish a bluetooth connection to the NXT
this.connector = new Connector("00:16:53:12:B6:78");
this.connector.setBluetooth(Connector.BT_ON);
this.connector.connect(); 
```

现在要从 NXT（一个 Integer 对象）读取消息，您可以这样做：

```
this.connector.readMessage(); 
```

要关闭连接：

```
this.connector.setBluetooth(Connector.BT_OFF); 
```

**这是所有 NXT 端代码：**

*注意：下载[leJOS](http://lejos.sourceforge.net/)以使所有代码都能正常工作（leJOS 将允许您在 java 中编写 NXT 代码）。*

在主类中定义这两个对象：

```
public static DataOutputStream dataOutputStream;
public static NXTConnection bluetoothConnection; 
```

要连接到您的手机：

```
bluetoothConnection = Bluetooth.waitForConnection();
bluetoothConnection.setIOMode(NXTConnection.RAW);
dataOutputStream = bluetoothConnection.openDataOutputStream(); 
```

以 Integer 对象的形式向手机发送数据：

```
dataOutputStream.write(100);
dataOutputStream.flush(); 
```

要断开连接，请运行：

```
dataOutputStream.close();
bluetoothConnection.close(); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:04:12.913

我对蓝牙命令有点困惑，但现在我看到你需要下载 leJOS！

我通常会尽量避免弄乱NXT上的固件，但是java更容易处理！

对于任何感兴趣的人，您可以从您的 android 以原始格式向 NXT 发送命令，尽管它不像上面列出的那样漂亮。这里有一个很棒的教程： [http ://www.robotappstore.com/Knowledge-Base/Programming-LEGO-NXT-Mindstorms/92.html](http://www.robotappstore.com/Knowledge-Base/Programming-LEGO-NXT-Mindstorms/92.html)

但如果你想免费下载一个应用程序，这里有一个： [http ://www.robotappstore.com/Apps/Lego-NXT-Mindstorms-Driver---Android-app.html?x=693A00AA-7F15-46E7 -9616-8101068DB58D](http://www.robotappstore.com/Apps/Lego-NXT-Mindstorms-Driver---Android-app.html?x=693A00AA-7F15-46E7-9616-8101068DB58D)

还有很多，如果你也在那里搜索的话

希望这可以帮助！

# animation - 我在 GIMP 中创建了一个动画硬币，但在每一帧之后都不清楚

> ID：11968306
> 
> 赞同：0
> 
> 时间：2012-08-15T11:13:59.143
> 
> 标签：animation, gif, gimp

我不确定我的标题是否解释正确，但这是图片，您可以看到哪里出了问题。

[动画 http://askibadev.comule.com/animation.gif](http://askibadev.comule.com/animation.gif)

GIMP 中的各个图层不显示此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:35:21.693

这是答案……在为 GIF 对话框中的“帧处理”选项保存 GIF 时要注意。

# html - 音频标签 GUI 不可见

> ID：11968309
> 
> 赞同：3
> 
> 时间：2012-08-15T11:14:05.977
> 
> 标签：html, audio, audiojs

我在页面上包含了音频标签

```
<audio src='a.mp3' preload='auto'>
</audio> 
```

但它不起作用，我在页面上看不到任何内容。

但是当我将audiojs包含为

```
 <script src="/static/js/audiojs/audio.min.js"></script>
  <script>
    audiojs.events.ready(function() {
      var as = audiojs.createAll();
    });

  </script> 
```

我想知道为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T11:20:25.107

据我所知， src 是音频中的一个元素，而不是一个属性。所以你的代码应该是这样的：

```
<audio controls="controls">
  <source src="song.ogg" type="audio/ogg" />
  <source src="song.mp3" type="audio/mpeg" />
  Your browser does not support the audio element.
</audio> 
```

[（资源）](http://www.w3schools.com/html5/html5_audio.asp)

**编辑：** src 也可以是一个属性，所以这不是你的问题。为了让浏览器显示音频的*任何内容*，您需要“控件”属性。但是，如果您不想要默认控件，请添加 html 按钮并使用 JavaScript 控制音频的开始/停止等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T11:21:49.707

尝试这个：

```
<audio src='a.mp3' controls preload='auto'>
</audio> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-03T16:19:07.213

这是你的 CSS。

```
 audio{
        min-width: 400px;
        height: auto;
        object-fit: inherit;
    } 
```

# android - 用于 Android ICS 的 c 二进制“whereis”

> ID：11968310
> 
> 赞同：0
> 
> 时间：2012-08-15T11:14:08.380
> 
> 标签：android, binary

我希望通过将 c-binary`whereis`从 Ubuntu 10.4 盒子复制到我的 Android 平板电脑`/system/bin`文件夹来实现这一点，但不知何故它没有。

它给了我：

> bash: /syste/bin/whereis: 无法执行二进制文件

我使用`root explorer`Android 中的程序来授予权限`rwxr-xr-x`并`suid`授予此文件，但仍然不走运。

关于如何使其发挥作用的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:17:27.507

您需要从可以在带有 ARM 处理器的 Android 中运行的源代码编译二进制文件。来自 Ubuntu 的二进制文件不会在您的手机上运行。

# google-maps-api-3 - 计算圆圈中的标记

> ID：11968316
> 
> 赞同：1
> 
> 时间：2012-08-15T11:14:51.940
> 
> 标签：google-maps-api-3

基于此[http://jsfiddle.net/kaiser/wzcst/light/](http://jsfiddle.net/kaiser/wzcst/light/)示例，但圆圈中的标记不准确，当标记在圆圈外且靠近圆圈时，考虑在圆圈内，这是不想要的。

还有其他想法吗？

**代码片段**（来自链接的小提琴）：

```
window.onload = function init() {
  var
    contentCenter = '<span class="infowin">Center Marker (draggable)</span>',
    contentA = '<span class="infowin">Marker A (draggable)</span>',
    contentB = '<span class="infowin">Marker B (draggable)</span>';
  var
    latLngCenter = new google.maps.LatLng(37.081476, -94.510574),
    latLngCMarker = new google.maps.LatLng(37.0814, -94.5105),
    latLngA = new google.maps.LatLng(37.2, -94.1),
    latLngB = new google.maps.LatLng(38, -93),
    map = new google.maps.Map(document.getElementById('map'), {
      zoom: 7,
      center: latLngCenter,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      mapTypeControl: false
    }),
    markerCenter = new google.maps.Marker({
      position: latLngCMarker,
      title: 'Location',
      map: map,
      draggable: true
    }),
    infoCenter = new google.maps.InfoWindow({
      content: contentCenter
    }),
    markerA = new google.maps.Marker({
      position: latLngA,
      title: 'Location',
      map: map,
      draggable: true
    }),
    infoA = new google.maps.InfoWindow({
      content: contentA
    }),
    markerB = new google.maps.Marker({
      position: latLngB,
      title: 'Location',
      map: map,
      draggable: true
    }),
    infoB = new google.maps.InfoWindow({
      content: contentB
    })
    // exemplary setup: 
    // Assumes that your map is signed to the var "map"
    // Also assumes that your marker is named "marker"
    ,
    circle = new google.maps.Circle({
      map: map,
      clickable: false,
      // metres
      radius: 100000,
      fillColor: '#fff',
      fillOpacity: .6,
      strokeColor: '#313131',
      strokeOpacity: .4,
      strokeWeight: .8
    });
  // attach circle to marker
  circle.bindTo('center', markerCenter, 'position');

  var
  // get the Bounds of the circle
    bounds = circle.getBounds()
    // Note spans
    ,
    noteA = jQuery('.bool#a'),
    noteB = jQuery('.bool#b');

  noteA.text(bounds.contains(latLngA));
  noteB.text(bounds.contains(latLngB));

  // get some latLng object and Question if it's contained in the circle:
  google.maps.event.addListener(markerCenter, 'dragend', function() {
    latLngCenter = new google.maps.LatLng(markerCenter.position.lat(), markerCenter.position.lng());
    bounds = circle.getBounds();
    noteA.text(bounds.contains(latLngA));
    noteB.text(bounds.contains(latLngB));
  });

  google.maps.event.addListener(markerA, 'dragend', function() {
    latLngA = new google.maps.LatLng(markerA.position.lat(), markerA.position.lng());
    noteA.text(bounds.contains(latLngA));
  });

  google.maps.event.addListener(markerB, 'dragend', function() {
    latLngB = new google.maps.LatLng(markerB.position.lat(), markerB.position.lng());
    noteB.text(bounds.contains(latLngB));
  });

  google.maps.event.addListener(markerCenter, 'click', function() {
    infoCenter.open(map, markerCenter);
  });

  google.maps.event.addListener(markerA, 'click', function() {
    infoA.open(map, markerA);
  });

  google.maps.event.addListener(markerB, 'click', function() {
    infoB.open(map, markerB);
  });

  google.maps.event.addListener(markerCenter, 'drag', function() {
    infoCenter.close();
    noteA.html("draggin&hellip;");
    noteB.html("draggin&hellip;");
  });

  google.maps.event.addListener(markerA, 'drag', function() {
    infoA.close();
    noteA.html("draggin&hellip;");
  });

  google.maps.event.addListener(markerB, 'drag', function() {
    infoB.close();
    noteB.html("draggin&hellip;");
  });
};
```

```
body {
  margin: 0;
  padding: 0
}
html,
body,
#map {
  height: 100%;
  font-family: Arial, sans-serif;
  font-size: .9em;
  color: #fff;
}
#note {
  text-align: center;
  padding: .3em;
  10px;
  background: #009ee0;
}
.bool {
  font-style: italic;
  color: #313131;
}
.info {
  display: inline-block;
  width: 40%;
  text-align: center;
}
.infowin {
  color: #313131;
}
#title,
.bool {
  font-weight: bold;
}
```

```
<script src="http://maps.googleapis.com/maps/api/js"></script>
<div id="note"><span id="title">&raquo;Inside the circle?&laquo;</span>
  <hr /><span class="info">Marker <strong>A</strong>: <span id="a" class="bool"></span></span>&larr;&diams;&rarr; <span class="info">Marker <strong>B</strong>: <span id="b" class="bool"></span></span>
</div>
<div id="map">test</div>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:52:20.797

google.maps.LatLngBounds 是一个矩形。您需要一个多边形“包含”功能。对于一个圆，这可以简化为测试该点是否小于离中心的半径。

[例子](http://jsfiddle.net/geocodezip/yGgcX/9/)

**代码片段：**

```
window.onload = function init() {
  var
    contentCenter = '<span class="infowin">Center Marker (draggable)</span>',
    contentA = '<span class="infowin">Marker A (draggable)</span>',
    contentB = '<span class="infowin">Marker B (draggable)</span>';
  var
    latLngCenter = new google.maps.LatLng(37.081476, -94.510574),
    latLngCMarker = new google.maps.LatLng(37.0814, -94.5105),
    latLngA = new google.maps.LatLng(37.2, -94.1),
    latLngB = new google.maps.LatLng(38, -93),
    map = new google.maps.Map(document.getElementById('map'), {
      zoom: 7,
      center: latLngCenter,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      mapTypeControl: false
    }),
    markerCenter = new google.maps.Marker({
      position: latLngCMarker,
      title: 'Center of Circle',
      map: map,
      draggable: true
    }),
    infoCenter = new google.maps.InfoWindow({
      content: contentCenter
    }),
    markerA = new google.maps.Marker({
      position: latLngA,
      title: 'A',
      map: map,
      label: "A",
      draggable: true
    }),
    infoA = new google.maps.InfoWindow({
      content: contentA
    }),
    markerB = new google.maps.Marker({
      position: latLngB,
      title: 'B',
      map: map,
      label: "B",
      draggable: true
    }),
    infoB = new google.maps.InfoWindow({
      content: contentB
    })
    // exemplary setup: 
    // Assumes that your map is signed to the var "map"
    // Also assumes that your marker is named "marker"
    ,
    circle = new google.maps.Circle({
      map: map,
      clickable: false,
      // metres
      radius: 100000,
      fillColor: '#fff',
      fillOpacity: .6,
      strokeColor: '#313131',
      strokeOpacity: .4,
      strokeWeight: .8
    });
  // attach circle to marker
  circle.bindTo('center', markerCenter, 'position');

  var
  // get the Bounds of the circle
    bounds = circle.getBounds()
    // Note spans
    ,
    noteA = jQuery('.bool#a'),
    noteB = jQuery('.bool#b');

  noteA.text((100000 > google.maps.geometry.spherical.computeDistanceBetween(markerA.getPosition(), markerCenter.getPosition())));
  noteB.text((100000 > google.maps.geometry.spherical.computeDistanceBetween(markerB.getPosition(), markerCenter.getPosition())));

  // get some latLng object and Question if it's contained in the circle:
  google.maps.event.addListener(markerCenter, 'dragend', function() {
    latLngCenter = markerCenter.position;
    noteA.text((100000 > google.maps.geometry.spherical.computeDistanceBetween(markerA.getPosition(), markerCenter.getPosition())));
    noteB.text((100000 > google.maps.geometry.spherical.computeDistanceBetween(markerB.getPosition(), markerCenter.getPosition())));
  });

  google.maps.event.addListener(markerA, 'dragend', function() {
    latLngA = markerA.position;
    noteA.text((100000 > google.maps.geometry.spherical.computeDistanceBetween(markerA.getPosition(), markerCenter.getPosition())));
  });

  google.maps.event.addListener(markerB, 'dragend', function() {
    latLngB = markerB.position;
    noteB.text((100000 > google.maps.geometry.spherical.computeDistanceBetween(markerB.getPosition(), markerCenter.getPosition())));
  });

  google.maps.event.addListener(markerCenter, 'click', function() {
    infoCenter.open(map, markerCenter);
  });

  google.maps.event.addListener(markerA, 'click', function() {
    infoA.open(map, markerA);
  });

  google.maps.event.addListener(markerB, 'click', function() {
    infoB.open(map, markerB);
  });

  google.maps.event.addListener(markerCenter, 'drag', function() {
    infoCenter.close();
    noteA.html("draggin&hellip;");
    noteB.html("draggin&hellip;");
  });

  google.maps.event.addListener(markerA, 'drag', function() {
    infoA.close();
    noteA.html("draggin&hellip;");
  });

  google.maps.event.addListener(markerB, 'drag', function() {
    infoB.close();
    noteB.html("draggin&hellip;");
  });
};
```

```
body {
  margin: 0;
  padding: 0
}
html,
body,
#map {
  height: 100%;
  font-family: Arial, sans-serif;
  font-size: .9em;
  color: #fff;
}
#note {
  text-align: center;
  padding: .3em;
  10px;
  background: #009ee0;
}
.bool {
  font-style: italic;
  color: #313131;
}
.info {
  display: inline-block;
  width: 40%;
  text-align: center;
}
.infowin {
  color: #313131;
}
#title,
.bool {
  font-weight: bold;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://maps.googleapis.com/maps/api/js?libraries=geometry"></script>
<div id="note"><span id="title">&raquo;Inside the circle?&laquo;</span>
  <hr /><span class="info">Marker <strong>A</strong>: <span id="a" class="bool"></span></span>&larr;&diams;&rarr; <span class="info">Marker <strong>B</strong>: <span id="b" class="bool"></span></span>
</div>
<div id="map">test</div>
```

# asp.net-mvc - Html.DropdownlistFor 不在视图中显示

> ID：11968317
> 
> 赞同：1
> 
> 时间：2012-08-15T11:14:52.800
> 
> 标签：asp.net-mvc, model-view-controller

我的 view.aspx 中有这一行我没有使用剃须刀：

```
 <p style="color:Red">
        <% Html.DropDownListFor(model => model.AllSundays, new SelectList(Model.AllSundays)); %>
  </p> 
```

当我运行我的程序并查看源代码时，那里什么都没有。我在我的行动中使用了 ViewModel 我有：

```
 var allSundaysInThisMonth = new SundaysInMonthViewModel
  {
    AllSundays = sundays.Select(x => new SelectListItem
    {
      Value = x.ToString("dd-MM-yyyy"),
      Text = x.ToString("dd-MM-yyyy"),
    })
  };

  var selectedSunday = new SundaysInMonthViewModel{
    SelectedSunday = thisMonthSundays.Where(x => x < now)
    .Last().ToString("dd-MM-yyyy")
  };

  return View(allSundaysInThisMonth); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T11:16:23.470

`<%=`如果要向响应输出某些内容，则应在末尾使用and 不使用逗号，否则您只会执行永远不会刷新到响应的服务器端代码：

```
<%= Html.DropDownListFor(
    model => model.AllSundays, 
    new SelectList(Model.AllSundays)
) %> 
```

`AllSundays`似乎也已经是，因此`IEnumerable<SelectListItem>`您无需将其提供给`SelectList`视图中的 a ：

```
<%= Html.DropDownListFor(
    model => model.AllSundays, 
    Model.AllSundays
) %> 
```

此外（这非常重要），您不应该将相同的属性用作选定值和可用值。目前您正在使用`AllSundays`两次。那是绝对错误的。DropDownList 帮助器期望视图模型上的标量属性作为第一个参数来保存所选值，并将`IEnumerable<SelectListItem>`属性作为第二个参数来保存所选值。

所以你想要的是：

```
<%= Html.DropDownListFor(
    model => model.SelectedSunday, 
    Model.AllSundays
) %> 
```

# ruby-on-rails - Elasticsearch 和 Tire Gem：“IndexMissingException[[products] missing]”？

> ID：11968321
> 
> 赞同：3
> 
> 时间：2012-08-15T11:15:06.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, elasticsearch, tire

我不确定如何让我的产品被索引，因为我认为这就是我收到此错误的原因：

```
Tire::Search::SearchRequestFailed in SearchController#results

404 : {"error":"IndexMissingException[[products] missing]","status":404} 
```

这是我的产品型号：

```
class Product < ActiveRecord::Base
  attr_accessible :name, :description
  belongs_to :user

  include Tire::Model::Search
  include Tire::Model::Callbacks

  def self.search(params)
     tire.search(load: true, page: params[:page], per_page: 10) do
        query { string params[:query]} if params[:query].present?
     end
  end
end 
```

如果这是问题，我如何索引我的产品？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T17:35:59.870

运行以下 rake 任务

```
rake environment tire:import CLASS='Product' 
```

# wcf - WCF 内容类型不匹配

> ID：11968323
> 
> 赞同：0
> 
> 时间：2012-08-15T11:15:12.160
> 
> 标签：wcf, iis

刚刚将 WCF 项目部署到 IIS。

但是，当我尝试将服务引用添加到测试项目时，Visual Studio 会提供以下内容：

```
The document was understood, but it could not be processed.
  - The WSDL document contains links that could not be resolved.
  - There was an error downloading 'http://server1.local/WCFServices/serv1/serv1.svc?xsd=xsd0'.
  - The underlying connection was closed: An unexpected error occurred on a receive.
  - Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
  - An existing connection was forcibly closed by the remote host
    Metadata contains a reference that cannot be resolved: 'http://server1.local/WCFServices/serv1/serv1.svc?wsdl'.
    Content Type application/soap+xml; charset=utf-8 was not supported by service http://server1.local/WCFServices/serv1/serv1.svc?wsdl.  The client and service bindings may be mismatched.
The remote server returned an error: (415) Cannot process the message because the content type 'application/soap+xml; charset=utf-8' was not the expected type 'text/xml; charset=utf-8'..
If the service is defined in the current solution, try building the solution and adding the service reference again. 
```

所以有一个问题，我有点明白。服务的内容类型与客户的期望不匹配。

那么，我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:30:21.043

检查客户端的 App.Config 或 Web.Config 并检查**ServiceModel**。很可能有一个与 WCF 服务发送的不同的 customBinding **。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T13:38:20.513

由于这是 google 出现此错误的第一篇文章，我想参与我的解决方案：

我在更改运行良好的系统中的代码时遇到了类似的错误，但更新我的开发系统上的引用失败。该参考位于 silverlight 项目中，并且与集成在周围网站中的 WCF 相关（我猜是标准配置）。我的错误消息包括“WCF 元数据包含无法解析的引用：'一些有趣的路径'。响应消息的内容类型 text/html;charset=utf-8 与绑定的内容类型不匹配（应用程序/soap +xml；字符集=utf-8)。" 我的网站使用授权角色，这就是问题/解决方案的基础。为了更新服务参考，我必须允许所有用户：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <!--<authorization>
            <allow users="*"/>            
        </authorization>-->
        <authorization>
            <deny users="?"/>
            <allow roles="role-1,role-2"/>
            <deny users="*"/>
        </authorization>
    </system.web>
</configuration> 
```

# .net - 如何从长时间运行的 PostgreSQL 函数向客户端报告进度

> ID：11968325
> 
> 赞同：10
> 
> 时间：2012-08-15T11:15:32.620
> 
> 标签：.net, sql, postgresql, plpgsql, npgsql

我有一个 C# 客户端应用程序，它使用 Npgsql 在 PostgreSQL 9.1.4 中调用 plpgsql 函数。该功能需要很长时间，我想以某种方式向客户报告进度。我该怎么做？

LISTEN/NOTIFY 机制听起来很适合这个，除了整个事情在事务中运行并且 NOTIFY 事件直到事务结束才发送，这对我来说没用。

我尝试过的另一件事是 RAISE NOTICE，我可以在客户端上处理它，但即使是那些通知似乎也被缓冲了一段时间并分批发送。有总比没有好，但并不理想。有什么办法可以“刷新”它们，以便立即将它们发送给客户？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T13:09:44.670

没有什么比发出通知更好的了。

这些信号没有被缓冲——它们是异步的——你的应用程序中的通知处理可能有问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T23:40:23.710

除了@Pavel 关于 的优秀观点之外`RAISE NOTICE`，还有另一种用于监控 Pg 中的查询进度的经典技术。这有点像黑客，但它非常有效。

您可以利用对序列的更改随处可见的事实，将函数的进度暴露给外部。要么使用硬编码序列并确保函数不会被并发调用，要么将进度监控序列名称传递给函数。

您的函数可以`nextval(seqname)`在每次迭代时调用，感兴趣的各方可以`SELECT last_value FROM seqname`从另一个会话中检查序列的状态。

您可以通过设置来使序列成为完成的倒计时

```
create sequence test maxvalue 2147483647 increment by -1; 
```

并`setval('seqname', num_items)`在函数开始时调用。`nextval`然后，每次通话都会倒计时至零。顺便说一句， 2147483647 是[maxint](http://www.postgresql.org/docs/current/static/datatype-numeric.html)。

不用说这不是可移植的，并且不能保证`SELECT`序列中的 ing 将始终以这种方式工作。不过，这很方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:36:00.457

最简单的方法是将您的 pgsql 函数拆分为多个子函数，而不是按顺序调用它们，应用程序端，管理应用程序中的事务范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T10:08:48.147

您还可以使用：

```
EXECUTE 'COPY (SELECT ''progress: ' || progress_variable || ''') TO ''d:\progress.txt'''; 
```

在您的函数内部将当前进度写入文本文件。

# eclipse-plugin - 部署Xtext时，如何通过插件与Eclipse集成？

> ID：11968326
> 
> 赞同：2
> 
> 时间：2012-08-15T11:15:43.107
> 
> 标签：eclipse-plugin, dsl, xtext

我已经完成了我的 Xtext 和 Xtend 项目的测试版。现在我想将它与 Eclipse 集成。使用这个新的 Eclipse，我希望能够选择“New 'mydsl' project”，然后在这个新项目中，我希望默认引用一个 .jar。还有一个 mydsl 的空文件。如果可能，请摆脱将 Xtext 性质添加到 project 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:26:41.090

这个问题有几个重要的过程：

1.  为了能够选择“新建 'yourDSL' 项目”，您必须实现自己的项目向导。也就是说，在您的 plugin.xml 文件中，您必须为扩展点“ **org.eclipse.ui.newWizards** ”做出贡献并创建一个必须实现 INewWizard 接口的类，您可以通过扩展 Wizard 类来实现。

2.  该向导在**performFinish** () 任务中应该以编程方式创建一个**IJavaProject**，您可以在其中指定所需的性质。您还必须指定源和输出文件夹，并配置类路径（添加类路径条目）。此链接继续详细介绍如何创建项目。[http://www.pushing-pixels.org/2008/11/18/extending-eclipse-creating-a-java-project-without-displaying-a-wizard.html](http://www.pushing-pixels.org/2008/11/18/extending-eclipse-creating-a-java-project-without-displaying-a-wizard.html)

3.  在上一步 (#2) 中，创建自定义项目时，您可以添加包、文件夹、文件，因此您可以添加空的 .mydsl 文件。

4.  现在是最棘手的部分。要默认引用 .jar 文件，有几种方法。最简单的一种方法是，如果您事先知道 .jar 路径，则可以通过添加（在步骤 #2 中）指向该 .jar 文件的**CPE_LIBRARY类型的类路径条目来添加引用，但同样您需要以某种方式知道路径。**就我而言，我不知道路径，因为我的 .jar 文件是作为插件导出的库，所以我最终实现了一个**IClasspathContainer**，它在已安装的插件中​​查找我的插件库（.jar 文件）。您可以通过以下方式查找您的插件：

`Bundle bundle = Platform.getBundle("com.my.libraryPlugin");`

`File bundleFile = FileLocator.getBundleFile(bundle);`

...然后，在第 2 步中，我添加的是**CPE_CONTAINER**类型的类路径条目：

```
JavaCore.newContainerEntry("MY_CONTAINER"); 
```

您可以在此处阅读有关**IClasspathContainer**的更多信息：http : [//www.ibm.com/developerworks/opensource/tutorials/os-eclipse-classpath/section2.html](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-classpath/section2.html)

5-您可能已经知道如何做到这一点。最后一步是导出您的 DSL 插件并将它们复制到 Eclipse 安装的“plugins”文件夹中。要导出插件：选择项目 -> 右键单击​​ -> 导出 -> 插件开发 -> 可部署插件和片段...

# asp.net - Web.Config 程序集/参考问题

> ID：11968327
> 
> 赞同：1
> 
> 时间：2012-08-15T11:15:44.983
> 
> 标签：asp.net, web-config

今天我不得不重新创建我的 web.config 文件，并且丢失了我以前的代码。我的数据库连接和角色工作正常，但是，我的程序集似乎从来没有工作......在我的后端代码中，我总是收到错误

> 命名空间“在此处插入”中不存在类型或命名空间名称“在此处插入”（您是否缺少程序集引用？）

我当前的配置文件的程序集部分是由 Visual Web Developer 使用添加引用选项创建的：

```
<configuration>
<system.web>
    <compilation>
        <assemblies>
            <add assembly="mscorlib"/>
            <add assembly="System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="*" />
        </assemblies>
    </compilation>
---rest of code here--- 
```

万一这意味着什么，我在使我的数据库成员友好时遵循的教程将我定向到 C:\Windows\Microsoft.NET\Framework\v2.0.50727 目录中的 aspnet_regsql.exe，但我的 web.config 中的版本是4.0.0.0。这可能与它有关吗？我应该使用 v4.0.30319 文件夹中的 exe 吗？

如果有人可以请帮助我尝试解决这个问题......我真的无法在我的网站上取得任何进展，因为所有非数据库的东西都完成了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:26:51.100

我认为我的 web.config 文件有问题，所以我创建了一个新网站，将原始文件夹中的所有内容都复制了一遍，它就可以工作了。我知道这可能不是最好的解决方案，但它可能花了 10 分钟，远远少于我已经浪费的时间。

# sparc - 如何设置 Solaris SPARC 以小端模式运行？

> ID：11968328
> 
> 赞同：3
> 
> 时间：2012-08-15T11:15:47.357
> 
> 标签：sparc, endianness, solaris-10

有没有办法将在 SPARC 上运行的 Solaris 设置为在小端模式下运行？

我一直在阅读 v9 架构芯片是双端芯片，但默认情况下，系统以大端模式运行。如何切换到小端？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:52:45.527

不，小端模式几乎只是为了使总线访问更容易。由于许多较新的 sun 机器具有小端模式的 PCI，因此添加对小端模式的支持是很有意义的。但是，我怀疑您是否会在用户代码中大量使用它。

使用双端功能几乎是特定于内核/驱动程序的。

# magento - Magento 1.7：非系统产品属性未保存在 PHP 脚本中

> ID：11968335
> 
> 赞同：0
> 
> 时间：2012-08-15T11:16:16.693
> 
> 标签：magento

我有一个脚本，它使用
`$product = Mage::getModel("catalog/product")->loadByAttribute('sku', $data['id']);`

如果我修改或检索系统属性，例如重量，一切正常：
`$product->getWeight(); // returns the correct weight
$product->setWeight(5.0); // correctly sets weight`

我有两个自定义属性：*google_product_category*和*mpn*。如果我尝试使用相同的技术修改它们，如下所示： 调用不会引发错误，但数据不会保存（是的，我在之后调用 $product->save()）。
`$product->setMpn('123ABC');
$product->setGoogleProductCategory('Electronics');`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:07:28.107

你能发布你的脚本吗？你是开发者模式吗？

看起来问题是因为商店区域

看看`Mage_Catalog_Model_Product`->`setOrigData`

```
public function setOrigData($key=null, $data=null)
{
    if (Mage::app()->getStore()->isAdmin()) {
        return parent::setOrigData($key, $data);
    }

    return $this;
} 
```

保存产品时，需要将数据与原始数据进行比较。

如果从“管理”区域运行，它可以检索原始数据。如果您的脚本从“默认”区域运行，它将无法获取原始数据。

因此，如果您处于开发人员模式，则在某些代码点中会抛出一个警告，这会破坏您的脚本（我可能是错的，因为您说没有抛出错误）

您可以通过更改`Mage::app('default')`为`Mage::app('admin')` 或使用来做到这一点`Mage::app()->setCurrentStore('admin');`

# 3d - 哪个软件可以生成这个 3d 文件？

> ID：11968338
> 
> 赞同：-1
> 
> 时间：2012-08-15T11:16:23.703
> 
> 标签：3d

现在我有一个名为 file.3d 的文件，文件的内容与以下类似：

> **T** 模型/文件.bmp
> 
> **米**
> 
> 1 1.454459 -4.069280 16.820227 0.921623 -0.163685 -0.351877 0.338465 0.550959 1 1.732314 -3.945513 17.490400 0.966073 -0.145701 0.213248 0.328628 0.577800 1 1.171872 -4.761898 17.010565 0.842542 -0.533085 -0.077096 0.357091 0.562627
> 
> 1 1.732314 -3.945513 17.490400 0.966073 -0.145701 0.213248 0.328628 0.577800 1 0.647007 -5.256052 17.856688 0.765348 -0.532969 0.360814 0.350134 0.590982 1 1.171872 -4.761898 17.010565 0.842542 -0.533085 -0.077096 0.357091 0.562627
> 
> **米**
> 
> **小号**
> 
> 0 -1
> 
> 1 0
> 
> 2 0
> 
> 3 0
> 
> 4 2
> 
> 5 3
> 
> 6 4
> 
> 7 5
> 
> 8 0
> 
> 9 8
> 
> 10 8
> 
> 11 9
> 
> 12 10
> 
> 13 11
> 
> 14 12
> 
> 15 13
> 
> 16 14
> 
> 17 15
> 
> 18 16
> 
> 19 8
> 
> 20 19
> 
> 21 20
> 
> 22 21
> 
> 23 22
> 
> 24 23
> 
> 25 24
> 
> **小号**
> 
> **Ĵ**
> 
> 0 0.039382 0.000004 11.387473 1.570796 0.000000 0.000000 1 -0.050000 5.900000 0.000000 0.000000 0.000000 0.000000 2 2.950000 -0.250000 -0.000000 -2.164269 1.547812 -3.141593 3 -2.850000 -0.250000 -0.000000 2.148354 1.546611 0.000000 4 0.000000 0.000000 3.890210 -0.528631 0.568091 -3.141593 5 -0.000000 -0.000000 3.830288 0.516909 0.556028 -3.141593
> 
> **Ĵ**

我发现有四个部分，包括T，M，S和J。

我想知道哪些软件可以产生这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:37:48.080

也许您可以为空间中的 3d 点编写自己的解析器并将它们显示在屏幕上。

我在文本文件中看不到任何模式，所以我无法帮助你。

# visual-studio - 缺少 VTK 的头文件

> ID：11968340
> 
> 赞同：0
> 
> 时间：2012-08-15T11:16:34.120
> 
> 标签：visual-studio, vtk

我安装了`Visual Studio 2010`,`Qt`和`Cmake`. 我配置了它们。然后我想通过示例代码进行测试。但是，程序找不到头文件。我在网上搜索了一下，发现可能有问题`PATH`。

然后，我按照这种方式导致失败：

我通过在它们之间放置分号来分别编写每个文件夹名称

> 项目 > 属性 > C/C++ > 常规 > 附加包含目录。

通过这种方式，程序找到了头文件，但它给了我一个`error LNK1104`. 我认为这是因为文件名的路径扩展到超过 260 个字符。[我从这个网站](http://msdn.microsoft.com/en-us/library/ts7eyw4s%28v=VS.100%29.aspx)了解到。

我试图找到一个可以写入的文件夹`PATH`。我认为它是lib文件。但我找不到它。

我应该怎么做才能解决这个问题？

# ms-access - Access 2010 SQL 查询死端

> ID：11968346
> 
> 赞同：0
> 
> 时间：2012-08-15T11:17:03.803
> 
> 标签：ms-access, pivot

我需要为一个项目创建一个数据库。在过去的几个月里，我一直在学习 MS Access 2010 的基础知识，并开始涉足 SQL 以进行更具体的查询。话虽如此，我对程序的功能有一些非常基本的了解和知识。

我正在尝试从单个表创建查询以显示一系列计算。我已经取得了很大的进步，但现在我摸不着头脑，转而寻求帮助。

```
Table: LIT_ALL

SITE  DATE    TRANSECT  CATEGORY  DISTANCE_M
PIT  6/2/2011     1        RKC      0.25
PIT  6/2/2011     1        FMA      0.58
PIT  6/2/2011     1        LHC      0.75
PIT  6/2/2011     2        FMA      0.5
PIT  6/2/2011     2        SA       0.6
PIT  6/2/2011     2        RKC      0.52
PIT  6/2/2011     2        LHC      0.6
PIT  6/2/2011     3        CCA      0.59
PIT  6/2/2011     3        LHC      0.6
PIT  6/2/2011     3        FMA      0.52 
```

使用此代码

```
TRANSFORM Sum(DISTANCE_M) AS SumOfDISTANCE_M
SELECT SITE, DATE, [CATEGORY]
FROM LIT_ALL
GROUP BY SITE, DATE,[CATEGORY]
PIVOT TRANSECT; 
```

我的最终产品有部分格式

```
SITE  DATE      CATEGORY   1    2    3 
PIT   6/2/2011  CCA                  .59
PIT   6/2/2011  FMA       .58  .5    .52
PIT   6/2/2011  LHC       .75  .6    .6
PIT   6/2/2011  RKC       .25  .52    
PIT   6/2/2011  SA             .6 
```

除了一些死胡同，我一直无法产生这样的结果。

```
SITE    DATE     CATEGORY   1      2      3     AVG    STD    SE
PIT    6/2/2011  CCA       0.00   0.00   34.5   11.5   19.92  6.64
PIT    6/2/2011  FMA       36.71  22.52  30.41  29.88  7.11   2.37
PIT    6/2/2011  LHC       47.47  27.03  35.09  36.53  10.30  3.43
PIT    6/2/2011  RKC       15.82  23.42  0.00   13.08  11.95  3.98
PIT    6/2/2011  SA        0.00   27.03  0.00   9.01   15.60  5.20 
```

此示例中显示的值是百分比值。1,2,3 字段（Pivoted Transect Field）中的每个值都通过字段 1,2 中的单元格值或 3/sumtotal（分别为 1,2 或 3 值）*100 形成。我在删除 Null 时也遇到了问题。我已经使用 Nz 函数取得了一定程度的成功。只有我让我的 AVG 不考虑新插入的 O 值并将 AVG 扔掉。STDEV 是您日常运行的流行 stdev。SE代表错误..在这种情况下是STDEV / 3（即横断面的总数）。感谢您为我指明正确方向的所有帮助。我每天都在学习新技巧！接受建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:38:23.673

创建 2 个查询，其中之一是您的支点。第二个查询是一个标准选择，其中包含 avg、stdev 和 se 的聚合。然后创建第三个查询，将数据透视查询连接到聚合。我更改了一些字段名称只是因为。

qryPivot

```
 TRANSFORM Sum(LIT_ALL.DISTANCE) AS SumOfDISTANCE
 SELECT LIT_ALL.SITE, LIT_ALL.dtDATE, LIT_ALL.[CATEGORY]
 FROM LIT_ALL
 GROUP BY LIT_ALL.SITE, LIT_ALL.dtDATE, LIT_ALL.[CATEGORY]
 PIVOT LIT_ALL.TRANSECT; 
```

qryStats

```
 SELECT LIT_ALL.Site, LIT_ALL.dtDate, LIT_ALL.category, Avg(LIT_ALL.distance) AS Mean,
 StDev(LIT_ALL.distance) AS SD, StDev([distance])/3 AS SE
 FROM LIT_ALL
 GROUP BY LIT_ALL.Site, LIT_ALL.dtDate, LIT_ALL.category; 
```

查询结果

```
SELECT qryPivot.*, qryStats.Mean, qryStats.SD, qryStats.SE
FROM qryPivot INNER JOIN qryStats ON (qryPivot.CATEGORY = qryStats.category) AND 
(qryPivot.dtDATE =   qryStats.dtDate) AND (qryPivot.SITE = qryStats.Site); 
```

因为可能并不总是知道数据透视列的名称，所以我使用 select *.

# facebook-graph-api - 将多张照片批量上传到多个用户帐户

> ID：11968350
> 
> 赞同：1
> 
> 时间：2012-08-15T11:17:16.433
> 
> 标签：facebook-graph-api, batch-processing

我有一个如下所示的数组：

```
$userImages = array(
    '100000000000001' => array(
        '..../image01.jpg',
        '..../image02.jpg',
        '..../image03.jpg',
    ),
    '100000000000002' => array(
        '..../image04.jpg',
        '..../image05.jpg',
        '..../image06.jpg',
    ),
); 
```

其中包含 FB 用户 ID 作为键，然后是要上传到每个用户帐户的图像数组。

我的上传代码如下所示：

```
/** @var FacebookSessionPersistence $facebook */
$facebook = $this->container->get('fos_facebook.api');
$facebook->setFileUploadSupport(true);

$count = 1;

foreach ($userImages as $userId => $images) {
    $batch = array();
    $params = array();
    foreach ($images as $image) {
        $request = array(
            'method' => 'post',
            'relative_url' => "{$userId}/photos",
            'attached_files' => "file{$count}",
            'access_token' => $this->getUserAccessToken($userId)
        );
        $batch[] = json_encode($request);
        $params["file{$count}"] = '@' . realpath($image);
        $count++;
    }
}
$params['batch'] = '[' . implode(',', $batch) . ']';

$result = $facebook->api('/', 'post', $params);
return $result; 
```

我在**access_token**下为每个图像添加了用户访问令牌，但是当调用 $facebook-api() 时，我从 Facebook 得到以下信息：

![在此处输入图像描述](../Images/14e718ac7fa39c971038fc52c40ffa4f.png)

有谁知道为什么，我收到这些错误？我是否在错误的位置添加了用户访问令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:41:55.517

access_token 必须添加到 $params 关联数组的根目录中，而不是添加到每个图像项中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:07:53.143

您的逻辑很好，但是您需要为每个单独的请求将访问令牌放在正文中。

例如：

```
...
$request = array(
  'method' => 'post',
  'relative_url' => "{$userId}/photos",
  'attached_files' => "file{$count}",
  'body' => "access_token={$this->getUserAccessToken($userId)}",
);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:51:18.657

> 有谁知道为什么，我收到这些错误？我是否在错误的位置添加了用户访问令牌？

您是否确定，您*实际上*已经添加了访问令牌，而不仅仅是一个`null`值？

该错误消息并未说明您使用了*错误*或*过期*的用户访问令牌，但它表示需要*用户*访问令牌。

所以我猜，因为您并没有真正将实际令牌放入单独的批处理请求部分，*然后*回退到您的应用程序访问令牌，因此出现特定的错误消息。

# xcode - 无法推送到远程 git 存储库

> ID：11968353
> 
> 赞同：10
> 
> 时间：2012-08-15T11:17:35.443
> 
> 标签：xcode, git, terminal

因此，我在将最近的提交推送到我在 Bitbucket 上设置的远程存储库时遇到了麻烦。

我最初使用的是 Xcode，并提出[**了这个问题**](https://stackoverflow.com/questions/11963677/cant-push-to-git-repository)，建议使用终端推送而不是 Xcode。

现在，我尝试了终端，但这并没有解决问题。但是当我尝试时它确实给了我更详细的错误消息`git push`

```
Neils-iMac:ProjectName Neil$ git push
Password: 

Counting objects: 49, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (38/38), done.
Writing objects: 100% (39/39), 975.78 KiB, done.
Total 39 (delta 31), reused 0 (delta 0)
error: RPC failed; result=55, HTTP code = 0
fatal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly
fatal: expected ok/error, helper said '2004\??? ?&?ЇҶ-9?u?r?m?v?ǣ3Ƅ:??Eƒ?=?&?"d?+??
   *^?eA??/3cv????ʞe??f???????
                              ?(??`}D???5???^:T??PxP????%?338?]??F?}???Gf?g??[??*??}zƈ1X'

Neils-iMac:ProjectName Neil$ 
Neils-iMac:ProjectName Neil$ 
```

我是这些远程存储库的新手，并且在 Xcode 上一切正常，所以如果你建议我在终端中做某事，那么如果你描述了如何做会有所帮助。

有关更多详细信息，请参阅我[**以前的问题。**](https://stackoverflow.com/questions/11963677/cant-push-to-git-repository)

* * *

**编辑**：这是结果；

`git status`：

```
# On branch master
# Your branch is ahead of 'origin/master' by 5 commits.
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   CrunchCalculator.xcodeproj/project.xcworkspace/
#   CrunchCalculator.xcodeproj/xcuserdata/
nothing added to commit but untracked files present (use "git add" to track) 
```

`git remote show origin`：

```
HEAD branch: master
  Remote branch:
    master tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (fast-forwardable) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T13:31:06.190

看起来您正在尝试推送一个大的增量，而您的[推送缓冲区不够大](http://flyingtomoon.com/2011/04/12/git-push-is-failed-due-to-rpc-failure-result56/)

试试这个：

```
git config http.postBuffer 524288000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:12:37.697

我有同样的问题并`git config http.postBuffer 524288000`为我工作。

# symfony - Symfony2：为什么 access_denied_handler 不起作用

> ID：11968354
> 
> 赞同：4
> 
> 时间：2012-08-15T11:17:38.893
> 
> 标签：symfony, exception-handling

我想在 AccessDeniedException 的情况下自定义 Symfony2 的行为。如果引发异常的 HTTP 请求是 XMLHTTPRequest，那么我会回复一个 JSON，否则我会在登录页面生成 302。

这是我的实现。日志显示在 AccessDeniedException 之后永远不会调用 AccessDeneidHandler。我错过了什么？

```
#security.yml
firewalls:
    secured_area:
        access_denied_handler: kernel.listener.access_denied.handler 
```

```
#config.yml
kernel.listener.access_denied.handler:
   class: NoaLisa\Bundle\OVMBundle\DependencyInjection\AccessDeniedHandler
     tags:
        - { name: kernel.event_listener, event: security.kernel_response, method: handle} 
```

```
#AccessDeniedHandler

class AccessDeniedHandler implements AccessDeniedHandlerInterface{

function handle(Request $request, AccessDeniedException $accessDeniedException){

    if ($request->isXmlHttpRequest()) {
        $response = new Response(json_encode(array('status' => 'protected')));
        return $response;
    }
    else {
        return new RedirectResponse($this->router->generate('login'));
    }
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T11:50:30.117

好的，当我深入研究 ExceptionListener 时，我终于发现了问题所在

`access_denied_handler`只有当用户没有足够的权限访问资源时，才会调用指向的服务。如果用户根本没有经过身份验证，则永远不会调用 access_dened_handler。

`entry_point`向in提供服务`security.yml`确实解决了问题。

# ember.js - 两次使用相同的视图但具有不同的值

> ID：11968356
> 
> 赞同：0
> 
> 时间：2012-08-15T11:17:49.960
> 
> 标签：ember.js

我有一个观点，我想使用两次但具有不同的值。

```
 {{#view App.ColorPickerView sytleName="Background Color" css="bgColor"}}
    {{view.sytleName}}
{{/view}}

{{#view App.ColorPickerView sytleName="Text Color" css="textColor"}}
    {{view.sytleName}}
{{/view}} 
```

这应该很容易。

请看这个jsfiddle [http://jsfiddle.net/rmossuk/LUEUV/11/](http://jsfiddle.net/rmossuk/LUEUV/11/)

基本上，当您单击背景颜色时，它应该更改背景颜色，但它正在更改文本颜色，因为它似乎正在使用视图的下一个实例。

有人帮我解决这个问题吗？

谢谢瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:56:59.810

答案很简单，在didInsertElement中，你把view声明为全局的，所以在实例化第二个ColorPicker的时候，第一个颜色选择器的`view`in`onChange`方法引用的是第二个view。

声明视图`var view = this;`使代码工作。

# php - 用 PHP 实现的 IMAP 或 POP3 服务器

> ID：11968363
> 
> 赞同：7
> 
> 时间：2012-08-15T11:18:30.567
> 
> 标签：php, azure, imap, pop3, sendgrid

PHP 中是否有任何可用的 POP3/IMAP 服务器实现？

[我正在使用sendgrid](http://sendgrid.com/)处理我的电子邮件服务。我将使用 files/db/whatever 将邮件存储在我的服务器上，现在我想为我的用户提供对其邮箱的完整 POP3 或 IMAP（首选）访问权限。PHP中有这样的实现吗？或者是否有任何其他可能在 Windows Azure 的分布式环境中运行 POP3/IMAP（假设我将邮箱存储在共享 blobs/tables/db 中）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T16:49:41.693

好吧，只是为了表明实际上可以用 PHP 编写 POP3 服务器，就是这样。服务器不进行身份验证——或者几乎没有其他任何事情。它只是一遍又一遍地发送相同的消息。但它有效。Thunderbird 能够从中检索消息。完全没用，但有点酷。

我的设置是带有 PHP 5.2 的 Windows 上的 Apache 2。

```
<?php

// echo something so fopen() would return
header("Content-type: text/plain");
echo "OK\n";
flush();

// listen for incoming connection
$listen_socket = socket_create_listen(110, 1);
$r = $w = $e = array($listen_socket);
$n = socket_select($r, $w, $e, 120);
$client_socket = ($n == 1) ? socket_accept($listen_socket) : null;
socket_close($listen_socket);

// spawn copy of myself
$internal_url = "http://{$_SERVER['HTTP_HOST']}:{$_SERVER['SERVER_PORT']}{$_SERVER['SCRIPT_NAME']}";
$stream_context_options = array (
    'http' => array (
        'method' => 'GET',
        'timeout' => 1
    )
);
$context = stream_context_create($stream_context_options);
if($f = fopen($internal_url, "rb", 0, $context)) {
    fclose($f);
}

if(!$client_socket) {
    // timed out
    exit;
}

// start handling the session
$read_buffer = "";
$write_buffer = "+OK POP3 server ready\r\n";
$active = true;

$messages = array(
    "From: webmaster@example.com\r\nSubject: This is a test\r\n\r\nHello world!\r\n"
);

$idle_start = time();
while(true) {
    $r = $w = $e = array($client_socket);
    $n = socket_select($r, $w, $e, 60);
    if($n) {
        if($r) {
            // read from the socket
            $read_buffer .= socket_read($client_socket, 128);
            $idle_start = time();
        }
        if($w) {
            if($write_buffer) {
                // write to the socket
                $written = socket_write($client_socket, $write_buffer);
                $write_buffer = substr($write_buffer, $written);
                $idle_start = time();
            } else if($active) {
                $now = time();
                $idle_time = $now - $idle_start;
                if($idle_time > 10) {
                    // exit if nothing happened for 10 seconds
                    break;
                } else if($idle_time > 2) {
                    // start napping when the client is too slow
                    sleep(1);
                }
            } else {
                break;
            }
        }
        if($e) {
            break;
        }
        if($read_buffer) {
            if(preg_match('/(.*?)(?:\s+(.*?))?[\r\n]+/', $read_buffer, $matches)) {
                $read_buffer = substr($read_buffer, strlen($matches[0]));
                $command = $matches[1];
                $argument = $matches[2];
                switch($command) {
                    case 'USER':
                        $username = $argument;
                        $write_buffer .= "+OK $username is welcome here\r\n";
                        break;
                    case 'PASS':
                        $message_count = count($messages);
                        $write_buffer .= "+OK mailbox has $message_count message(s)\r\n";
                        break;
                    case 'QUIT': 
                        $write_buffer .= "+OK POP3 server signing off\r\n";
                        $active = false;
                        break;
                    case 'STAT':
                        $message_count = count($messages);
                        $mailbox_size = 0;
                        foreach($messages as $message) {
                            $mailbox_size += strlen($message);
                        }
                        $write_buffer .= "+OK $message_count $mailbox_size\r\n";
                        break;
                    case 'LIST':
                        $start_index = (int) $argument;
                        $message_count = count($messages) - $start_index;
                        $total_size = 0;
                        for($i = $start_index; $i < count($messages); $i++) {
                            $total_size += strlen($messages[$i]);
                        }
                        $write_buffer .= "+OK $message_count messages ($total_size octets)\r\n";
                        for($i = $start_index; $i < count($messages); $i++) {
                            $message_id = $i + 1;
                            $message_size = strlen($messages[$i]);
                            $write_buffer .= "$message_id $message_size\r\n";
                        }
                        $write_buffer .= ".\r\n";
                        break;
                    case 'RETR':
                        $message_id = (int) $argument;
                        $message = $messages[$message_id - 1];
                        $message_size = strlen($message);
                        $write_buffer .= "+OK $message_size octets\r\n";
                        $write_buffer .= "$message\r\n";
                        $write_buffer .= ".\r\n";
                        break;
                    case 'DELE':
                        $write_buffer .= "+OK\r\n";
                        break;
                    case 'NOOP':
                        $write_buffer .= "+OK\r\n";
                        break;
                    case 'LAST':
                        $message_count = count($messages) - $start_index;
                        $write_buffer .= "+OK $message_count\r\n";
                        break;
                    case 'RSET':
                        $write_buffer .= "+OK\r\n";
                        break;
                    default:
                        $write_buffer .= "-ERR Unknown command '$command'\r\n";
                }
            }
        }
    } else {
        break;
    }
}

?> 
```

# c - 为什么 apr_palloc 比 malloc 快？

> ID：11968365
> 
> 赞同：2
> 
> 时间：2012-08-15T11:18:36.300
> 
> 标签：c, malloc, apr

通读*The Apache Modules Book*，我在第 3.4.3 部分遇到了这个主张：

> “第二个好处是在大多数平台上，池分配比 malloc 更快！”

我意识到这是一个悬而未决的问题，但是……嗯，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T11:47:06.893

除了 Lars 关于局部性的观点之外，池分配只是一种与`malloc`.

`malloc`必须跟踪每个分配的块，能够单独释放块，处理空闲块碎片和合并，有一些策略来选择从几个空闲块中分配，等等。

这是*通用分配器所**必需*的，但池通过让调用者*静态*地决定一些这种行为来避免所有这些复杂性（以及相关的空间和运行时开销）。

 **Apache 示例似乎只允许整个池释放（所以它就像一个[竞技场分配器](http://en.wikipedia.org/wiki/Region-based_memory_management)）。这意味着它不需要跟踪单个分配记录、它们的生命周期和零散的免费存储。它只需要跟踪一个（或多个）大块内存，并更新指向下一个未使用空间的指针。请注意，即使使用 分配这些大块`malloc`，此成本通常也会在*许多*池分配中分摊。

其他池类型可能仅限于相同大小（或类型）的对象，这进一步简化了它们；他们甚至可以以接近零的成本保持 LIFO 免费列表，从而允许按记录重新分配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T11:34:19.120

池分配策略可以通过两种方式带来更好的性能。在数据结构遍历与数据分配顺序匹配的应用程序中，池化策略可以暴露更多的规则步幅。

例如，考虑通过记录的链接列表进行搜索。每条记录由一个关键字段、一个数据字段和一个指向列表中下一条记录的下一个字段组成。连续访问 key 和 next 字段，直到找到匹配项。只有这样才能访问数据字段。如果存储在每个记录中的数据本身就是一个堆对象，更糟糕的是，数据从记录到下一个记录的大小不同，那么对工作集的空间局部性就会产生各种不良影响。即，不必要地从内存中获取数据，消耗宝贵的带宽。

此外，由于可变长度数据介入键和下一个字段之间，记录内的步幅以及跨连续记录的步幅将显得不规则。因此，不同对象类型的隔离可以提高空间局部性，并随之提高整体性能。

此外，由于池分配可能会暴露更多的常规步幅，因此简单的预取策略可以预测未来的引用并缩短它们的内存访问延迟。**

# php - cURL 循环内存增长

> ID：11968366
> 
> 赞同：5
> 
> 时间：2012-08-15T11:18:39.380
> 
> 标签：php, linux, curl

我在使用 cURL 的循环中遇到了这个问题，其中内存呈指数增长。在这个示例脚本中，它开始使用大约 14MB 的内存并以 28MB 结束，使用我的原始脚本并重复到 1.000.000，内存增长到 800MB，这很糟糕。

PHP 5.4.5
卷曲 7.21.0

```
for ($n = 1; $n <= 1000; $n++){

    $apiCall = 'https://api.instagram.com/v1/users/' . $n . '?access_token=5600913.47c8437.358fc525ccb94a5cb33c7d1e246ef772';

    $options = Array(CURLOPT_URL => $apiCall,
                     CURLOPT_RETURNTRANSFER => true,
                     CURLOPT_FRESH_CONNECT => true
    );

    $ch = curl_init();
    curl_setopt_array($ch, $options);
    $response = curl_exec($ch);
    curl_close($ch);

    unset($ch);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:27:51.307

我想我找到了解决内存泄漏的方法。我在 PHP 脚本中使用 curl lib 时遇到了同样的问题。反复调用 curl_exec() 函数后，内存耗尽。

根据[PHP 错误报告](https://bugs.php.net/bug.php?id=45161)，此内存泄漏可能会在关闭 Curl 处理程序后修复，如下代码：

```
...
curl_close($ch);
unset($ch); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T00:41:04.490

这已经很晚了，但我建议不要在这种情况下使用 curl_close ，或者如果您这样做，请将其放在 for 循环之外。

我们遇到了类似的问题，即 curl 内存在多次循环后开始泄漏。我们正在使用 curl_multi 并关闭每个单独的处理程序，这导致我们的记忆变得疯狂。用 curl_init 覆盖处理程序似乎绰绰有余。curl_close 似乎有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:19:16.420

一种解决方案是少调用 curl （比如 100 次），然后刷新页面，这可能会释放内存。

# c# - 主方法中的 if/else 条件出错

> ID：11968367
> 
> 赞同：-1
> 
> 时间：2012-08-15T11:18:43.280
> 
> 标签：c#

我需要按`t`两次才能获得任何输出；否则程序直接进入 else 条件或给出异常处理程序错误。我在这里做错了什么？

正如你们所看到的，有两个类一个`twotable`和另一个`program`包含主要方法。我正在尝试使用`twotable`类的调用方法获取输出。

```
namespace ConsoleApplication6
{               
    class twotable        
    {        
        public static void two()
        {
            int i;
            int j;
            for (i = 1; i <= 10;i++)
            {
                for (j = 2; j <= 2;j++ )
                {
                    Console.WriteLine(i * j);
                }
            }
        }
    }

    class Program
    {
        static void Main()
        {
            Console.WriteLine("Press t for two table");
            char c = Convert.ToChar(Console.ReadLine());
            {
                char t = Convert.ToChar(Console.ReadLine());
                if (c == t)
                {

                    twotable.two();
                }
                else
                {

                    Console.WriteLine("i hate u");
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:23:03.007

您正在从控制台读取两次。

代替

```
char t = Convert.ToChar(Console.ReadLine());
if (c == t) 
```

你需要

```
if (c == 't') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:25:49.490

您是否希望用户在不同的 ReadLine() 上输入字符 't' 两次以显示输出？如果是这样：

```
 static void Main()
    {

        Console.WriteLine("Press t for two table");
        char c1 = Convert.ToChar(Console.ReadLine());
        char c2 = Convert.ToChar(Console.ReadLine());

        if (c1 == 't' && c2 == 't')
        {
            twotable.two();
        }
        else
        {
            Console.WriteLine("i hate u");
        }
    } 
```

或者您想在一个 ReadLine() 中读入“tt”吗？

```
 static void Main()
    {

        Console.WriteLine("Press t for two table");
        string input = Console.ReadLine();

        if (input.Equals("tt"))
        {
            twotable.two();
        }
        else
        {
            Console.WriteLine("i hate u");
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:22:26.993

我认为你的问题在这里 - `char c`。你在`char c` 比较`char t`

这两行都要求用户输入。

`char c = Convert.ToChar(Console.ReadLine());`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T11:24:25.587

代码有点乱，但即使在*这段*代码上也是如此

```
char c = Convert.ToChar(Console.ReadLine());
...
{
    char t = Convert.ToChar(Console.ReadLine());
.....
} 
```

你打电话`Console.ReadLine(...)`2次，所以你需要按`t`2次。很难说，但**可能**你想做这样的事情：

```
char t = 't';
...
{
    char consoleChar = Convert.ToChar(Console.ReadLine());
    if(consoleChar == t) // or simple if(consoleChar == 't')
    {
       //do something here, we get a t symbol from console
    }
.....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T11:26:55.943

我需要[`Console.ReadKey`](http://msdn.microsoft.com/en-us/library/system.console.readkey)改用，并测试`c == 't'`：

> 获取用户按下的下一个字符或功能键。

你的代码是这样的：

```
var cki = Console.ReadKey();
if (cki.KeyChar == 't')
{
    ...
} 
```

# xslt - XSLT 多个 CDATA 部分

> ID：11968368
> 
> 赞同：0
> 
> 时间：2012-08-15T11:18:46.850
> 
> 标签：xslt

我在 XLST 方面有点新手，但我遇到了一个问题，让我把头发扯掉了。我有一个看起来像这样的 XML 查找文件....

```
<car make='honda'>
    <model>
        <![CDATA[I am a civic]]>
    </model>
    <model>
        <![CDATA[I am a CRV]]>
    </model>
</car> 
```

使用 XSLT 样式表，我传递我的主文件，然后转到此查找文件并尝试显示 CDATA 部分中的内容.....

```
<xsl:for-each select="document('lookup.xml')/car[@make='honda']">
    <p><xsl:value-of select="." /></p>
</xsl:for-each> 
```

我遇到的问题是 CDATA 中的文本被一起返回。例如，此代码当前产生...

```
<p>
I am a civic
I am a CRV
</p> 
```

但我真的很想...

```
<p>I am a civic</p>
<p>I am a CRV</p> 
```

谁能帮我解决这个问题。

谢谢

理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:25:12.740

而不是这样做......

```
<xsl:for-each select="document('lookup.xml')/car[@make='honda']"> 
```

改为这样做....

```
<xsl:for-each select="document('lookup.xml')/car[@make='honda']/model"> 
```

这将单独迭代**模型**元素，这是您所需要的。

# security - 防御 XSRF 攻击 GWTP 应用程序

> ID：11968371
> 
> 赞同：2
> 
> 时间：2012-08-15T11:19:01.050
> 
> 标签：security, gwt, csrf, gwtp

我正在尝试[防止 XSRF 攻击](http://code.google.com/p/gwt-platform/wiki/GettingStartedDispatch)GWTP 应用程序。像 JSESSION 这样的问题很容易进入[paroz 测试工具](http://www.testingsecurity.com/paros_proxy)，如果用户已经登录并且同时通过 paroz 发出相同的服务器请求，则使用该工具。它使用更新的值执行相同的事务，这是一个安全问题。

要停止那个，**需要为每个请求创建新的 cookie**并从客户端发送到服务器。

```
@SecurityCookie
public static final String securityCookieName = getRandomString(); //Not work 
```

对于客户端模块

```
public class ClientModule extends AbstractPresenterModule {

    @Override
    protected void configure() {

        bindConstant().annotatedWith(SecurityCookie.class).to(
                NameTokens.securityCookieName); 
```

在 DispatchServletModule 中

```
public class DispatchServletModule extends ServletModule {

    @Override
    public void configureServlets() {
        bindConstant().annotatedWith(SecurityCookie.class).to(NameTokens.securityCookieName); 
```

我想随机生成 cookie 而不是“JSESSIONID”。如何/在哪里做？在 GWTP 中为每个请求重新生成 cookie 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:20:02.713

对于通用 gwt，请参阅[XSRF 保护](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecurityRpcXsrf)

它用于 RPC 调用：

> RPC XSRF 保护是使用 RpcToken 功能构建的，它允许开发人员使用 HasRpcToken 接口在 RPC 端点上设置令牌，并将该令牌包含在通过该端点进行的每个 RPC 调用中。

您必须重写要在获取令牌的回调中调用的 rcp 调用，但这并不难实现。

**编辑**

我不明白需要一个随机的 cookie 名称。对于标准 GWT 保护，您必须指定一个集合名称：

```
<context-param>
  <param-name>gwt.xsrf.session_cookie_name</param-name>
  <param-value>JSESSIONID</param-value>
</context-param> 
```

您明确引用的 gwtp 状态的文档：

> 为了保护您的应用程序免受 XSRF 攻击，如 GWT 应用程序的安全性中所述，**您必须指定要使用的安全 cookie 的名称**。 通过在客户端和服务器上**绑定一个用@SecurityCookie 注释的字符串常量来做到这一点。**

我认为用户是否登录并不重要。恶意代码无法读取 JSESSIONID cookie（或您指定的任何 cookie），它需要 cookie 的值（确保它可以发送 cookie，但因为恶意代码需要该值，以便它可以计算您发送每个请求的唯一令牌）。这就是文档所说的：

> 默认 XSRF 保护实现通过生成会话 cookie 值的 MD5 哈希并将生成的哈希用作 XSRF 令牌，从会话身份验证 cookie 派生 XSRF 令牌。这种无状态的 XSRF 保护实现依赖于攻击者无权访问会话 cookie，因此无法生成有效的 XSRF 令牌这一事实

因此，您**确实**需要指定您的 cookie 名称才能将其配置为工作，**否则GWT 无法使用该 cookie 的值来生成您在每次 rpc 调用***之前*获得并*包含在*每个 rpc 调用中的端点令牌。

因此，虽然我认为您不需要实现自己的[XSRF 保护](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecurityRpcXsrf)，因为您没有使用标准 gwt，但我认为您确实需要遵循您引用的文档来配置 gwtp 以使用它的 xsrf 保护实现。

# jquery-autocomplete - jQuery 自动完成 - 根据选择显示数据

> ID：11968372
> 
> 赞同：0
> 
> 时间：2012-08-15T11:19:07.320
> 
> 标签：jquery-autocomplete

我有一个类似于以下的标准 jQuery 自动完成设置：

```
$("input#autocomplete").autocomplete({
    source: source,
    minLength: 5 ,
    select: function( event, ui ) {
         alert(ui.item.value);
    }
}); 
```

What I would like is, when the value is chosen, a data-table within the page appears and get populated with data from a database using the value as a search parameter.

因此，例如，如果我选择“ `RED`”，则表格将显示并显示来自查询的数据，例如`SELECT * FROM TABLE WHERE COLUMN='RED'`

查询已简化，但谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:30:32.430

为此，您应该请求一种`search`将充当`JSON`端点的页面，例如

```
$("input#autocomplete").autocomplete({
    source: source,
    minLength: 5 ,
    select: function( event, ui ) {

      var _value = ui.item.value;

      $.post('services/populate_table.php', // endpoint URL
             { someParameterToTransmit: _value  }, // some data to transmit
             function(data) { // on complete handler
               $('.result').html(data); // populate retrieved data in any form you need
             } // on complete function
      ); // post
    } // on select (autocomplete)
}); // autocomplete 
```

来自的数据`endpoint`也可以检索为`JSON`.

您可以阅读[文档](http://api.jquery.com/jQuery.post/)以获取有关请求方法的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:39:56.327

如果我理解正确，您正在寻找[`$.post`](http://api.jquery.com/jQuery.post).

例如，您的 jQuery 将是：

```
$("input#autocomplete").autocomplete({
    source: source,
    minLength: 5 ,
    select: function( event, ui ) {
        $.post("autocomplete.php", { option: ui.item.value }, function(data){
            $("table").html( data[0] );
            // sets the content of a table element to the first matched row
        });
    }
}); 
```

在 中`autocomplete.php`，你会得到这样的东西：

```
// DB connect

// use $_POST['option'] here for the selected option
$sth = mysql_query("SELECT ...");
$r = mysql_fetch_assoc($sth);
print $r; 
```

我们在这里所做的是请求页面`autocomplete.php`并 POST 数据，在这种情况下是选定的值。`autocomplete.php`获取该 POST 值并搜索数据库（您可以自定义该查询以满足您的需求）。然后页面打印一个匹配行的数组，这是 jQuery 接收到的数据，可以作为 Javascript 数组进行遍历。

# jakarta-ee - 几秒钟后重定向到另一个页面 jsf2 primefaces

> ID：11968375
> 
> 赞同：1
> 
> 时间：2012-08-15T11:19:16.377
> 
> 标签：jakarta-ee, jsf-2, primefaces

我有一个允许编辑用户的页面，当用户单击“编辑”按钮时，我将他重定向到另一个页面几秒钟，我想再次将他重定向到另一个页面，但这次一劳永逸，我试过了使用`<p:poll>`

但它在这里不起作用是我的代码：

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <body>

        <ui:composition template="./template_admin.xhtml">

            <ui:define name="content">
                <h:form id="form">

                            <p:panel id="panel" header="Confirmation" style="width: 400px;margin: auto;" >

                                <h:panelGrid columns="1">
                                    <h:outputText value="votre edition est sauvegardé avec succée"/>
                                    <h:outputText value="vous serez rediriger vers la page de la liste des utilisateurs dans quelques instants" />
                                    <p:poll interval="3" action="utilsateurs" />
                                </h:panelGrid>

                            </p:panel>

                        </h:form>

            </ui:define>

        </ui:composition>

    </body>
</html> 
```

你有什么想法提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:02:09.447

你不需要民意调查。你可以用普通的html来做。将此标签添加到页面头部

```
<meta http-equiv="refresh" content="5;URL=otherUrl.jsf" /> 
```

这将在 5 秒后重定向到“otherUrl.jsf”。由于您使用的是模板，也许您可​​以在标题中添加一个 ui:insert ，这样您就可以从模板客户端将元数据插入到标题中。

# vb.net - 报表服务 2008 表达式中的 vbtab

> ID：11968380
> 
> 赞同：2
> 
> 时间：2012-08-15T11:19:45.183
> 
> 标签：vb.net, reporting-services, vbscript, tabs

我正在尝试在特定文本框上使用 Reporting Service 2008 表达式中的选项卡。我尝试在两个字段的字段名称和值之间使用三个选项卡（& vbTab & vbTab & vbTab &）。

```
=iif(Trim(Fields!Field1.Value) <>"", "FVE1:" & vbTab & vbTab & vbTab &  Fields!Field1.Value & VbCrLf,"") & iif(Trim(Fields!Field2.Value) <>"", "RV:" & vbTab & vbTab & vbTab & Fields!Field2.Value,"" ) 
```

我想要实现的是这样的事情

```
FEV1:   3.29
RV:     0.51 
```

但我无法做到这一点，它得到如下所示

```
FEV1:   3.29
RV:   0.51 
```

任何帮助都会很受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:27:39.220

如果制表符不起作用，请尝试使用不间断空格右对齐`Chr(160)`：

*（为了便于阅读，换行）*

```
= Iif(
  Trim(Fields!Field1.Value) <> "", 
  "FVE1:" & Fields!Field1.Value.ToString().PadLeft(5, Chr(160)) & VbNewLine, 
  ""
) 
& Iif(
  Trim(Fields!Field2.Value) <> "", 
  "RV:" & Fields!Field1.Value.ToString().PadLeft(5, Chr(160)),
  ""
) 
```

# image - 用户在 Wordpress 中生成带有图像的内容

> ID：11968382
> 
> 赞同：0
> 
> 时间：2012-08-15T11:19:53.360
> 
> 标签：image, wordpress, plugins, upload, user-generated-content

我正在寻找 Wordpress 插件来实现以下场景。

1.  *用户 A*点击“添加新餐厅”并填写表格并提交餐厅*“ACME Food”*
2.  */wp-admin/ 中的管理员*打开队列并批准*“ACME Food”（版本/修订 1）*
3.  *用户 B*点击“编辑 ACME Food”并编辑地址（自定义字段）。
    *   用户收到一条反馈消息，表明已收到更新并处于待处理状态
4.  */Wordpress 系统/*保持 *“ACME Food”（版本/修订版 1）*的发布并将副本作为*“ACME Food”（版本/修订版 2）*添加到队列中。
5.  *管理员*批准了*“ACME Food”（版本/修订版 2）*并取代了版本/修订版 1

此外，我正在寻找该特定餐厅中食物的图片上传。因此，任何用户都可以在 ACME Food 上传他们的食物图像，该图像再次添加到队列中。

用户 A 和 B 都可能注册也可能不注册（我不想强迫他们注册）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:16:36.573

[您可以使用Gravity Forms](http://www.gravityforms.com/)做一些您想要（但不完全是）的事情。这是一个付费插件，但在 IMO 的良好支持下非常值得。

我在[这个网站](http://www.yourimportantreason.com.au/)上使用了 GF 的**Post Fields**来创建一个[表格](http://www.yourimportantreason.com.au/submit/)，让公众可以将照片和一些文字上传到网站。创建草稿帖子并附加上传的图像。发送通知电子邮件。然后管理员批准图像（基本上是为了确保没有人提交鸡巴照片）并将其设置为发布。

以下来自重力表格网站：

> **帖子字段**是表单字段，可让您捕获用于创建 WordPress 帖子的数据。这些字段使您可以快速轻松地创建允许用户向您的站点提交内容的表单。结果帖子将被设置为草稿，并且需要在它们可见之前发布。
> 
> 帖子标题
> 帖子正文
> 帖子摘录
> 帖子标签
> 帖子类别
> 帖子图片 帖子自定义字段

就插件解决方案而言，这几乎是我能想到的。

* * *

**或者...**

...您可以查看`wp_insert_post` [功能](http://codex.wordpress.org/Function_Reference/wp_insert_post)。这是来自 SO我尚未测试此代码的[示例用法](https://stackoverflow.com/questions/4321914/wp-insert-post-with-a-form)`wp_insert_post`，但根据我的经验，它看起来是正确的。

# php - preg_match 在 PHP 中不匹配，尽管正则表达式似乎是正确的

> ID：11968385
> 
> 赞同：-2
> 
> 时间：2012-08-15T11:20:14.293
> 
> 标签：php, preg-match

我在做

```
preg_match("/\<\/p\> (\d*?) /", $error, $matches) 
```

在哪里`$error="bla-bla-bla </p> 12345 bla-bla-bla"`

奇怪的是它没有找到匹配项，即使我仔细检查了正则表达式。

为什么它不起作用？

这是完整的代码：

```
 $values=$form->getValue();
            $url = "http://something.freshdesk.com/helpdesk/tickets.xml";
            $request = "<helpdesk_ticket><description>".$values['subject']."</description><email>".$username."</email></helpdesk_ticket>"; 
            echo $request;
            $headers = array('Content-Type: application/xml','Content-Length: ' . strlen($request));
            var_dump($headers);

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_USERPWD, 'email@email.com:password');
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_POST, 1);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
//          curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
//          curl_setopt($ch, CURLOPT_HEADER, true);
            curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC); 

            $http_result = curl_exec($ch);
            $error       = curl_error($ch);
            $http_code   = curl_getinfo($ch ,CURLINFO_HTTP_CODE);

            curl_close($ch);

            if ($error) {
              print "<br /><br />$error";
            } else {
              if (preg_match("/\<\/p\> (\d*?) /", $error, $matches)) {
                $ticket_id = $matches[1];
                print "Ticket submitted: $ticket_id\n";
              }
              print "<br /><br />Location header not found";
              var_dump($matches);
              var_dump($http_result);
              echo $error;
              echo $http_result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:35:44.150

您的正则表达式是正确的，它肯定匹配。您的问题是您没有在 http 的响应中执行正则表达式。使用`$http_result`代替`$error`

```
preg_match("/\<\/p\> (\d*)/", $http_result, $matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:13:18.310

找到了解决方案：

我应该用`htmlspecialchars()`在`$error`

# iphone - 数据未在 UITableView 中加载。可能是什么问题？

> ID：11968390
> 
> 赞同：0
> 
> 时间：2012-08-15T11:20:39.037
> 
> 标签：iphone, uitableview, ios5, tableview, segue

`UITableView`当按下按钮时，我有一个in next segue。我在实现文件中实现的代码如下。视图正在移动，但数据未加载到视图中。

可能是什么问题呢？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"https://api.twitter.com/1/statuses/public_timeline.json"]];
        NSError* error;
        tweets = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error];
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TweetCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    NSDictionary *tweet = [tweets objectAtIndex:indexPath.row];
    NSString *text = [tweet objectForKey:@"text"];
    NSString *name = [[tweet objectForKey:@"user"] objectForKey:@"name"];
    cell.textLabel.text = text;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:28:30.553

```
(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 0;
} 
```

**你不需要至少1个部分吗？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:27:59.383

您应该在调试器中使用断点来中断`numberOfRowsInSection`方法并`cellForRowAtIndexPath`验证您的数据是否被正确解析和处理。如果您不熟悉断点，现在是了解它们的好机会——它们在调试和解决问题方面*非常宝贵。*

作为一般说明，您可能不应该使用它`dataWithContentsOfURL`来建立网络。它并不是真正为这种用途而设计的。`NSURLConnection`是一个更好的选择，它将为您提供更大的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:34:31.107

```
dyspatch_async 
```

之所以命名为是因为它是异步的。您似乎认为第二次调用它是在第一次调用之后执行的 - 但不是。它们是并行执行的，并且由于 URL 操作较慢，表视图的更新会在还没有数据时发生。

解决方案：将 reloadData 调用与 URL 操作放在同一个块中 - 您不需要两个单独的 dispatch_async 调用。

此外，您返回 0 从

```
numberOfSectionsInTableView: 
```

所以该表甚至不查找数据。返回 1。

# ruby-on-rails - “nil”不是返回有效部分路径的 ActiveModel 兼容对象

> ID：11968396
> 
> 赞同：0
> 
> 时间：2012-08-15T11:21:03.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, will-paginate

第一个问题，请温柔:)

我在为属于具有 has_many 关联的用户模型的客户端模型创建索引视图时遇到问题。

错误信息：

```
'nil' is not an ActiveModel-compatible object that returns a valid partial path. 
```

具体来说，错误是指第 11 行的部分错误：

/views/clients/index.html

```
<% provide(:title, current_user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>Your clients</h1>
    </section>
  </aside>
  <div class="span8">
    <% if current_user.clients.any? %>
      <ol class="clients">
        <%= render @clients %>
      </ol>
      <%= will_paginate %>
    <% end %>
  </div>
</div> 
```

/clients/_client.html.erb

```
<li>
  <span class="client-name"><%= client.name %></span>
  <span class="client-info">
    Extra client info to come.
  </span>
</li> 
```

客户端控制器：

```
class ClientsController < ApplicationController
  belongs_to :user

  def index
    @clients = current_user.clients.paginate(page: params[:page])
  end 
```

编辑：

用户控制器是否有帮助...

```
class UsersController < ApplicationController
  before_filter :authenticate_user!

  def show
    if current_user.admin?
        @user = User.find(params[:id])
    else
        @user = current_user
    end
  end

  def index
    if current_user.admin?
        @users = User.paginate(page: params[:page])
    else
        redirect_to root_path
    end
  end

  def destroy
        User.find(params[:id]).destroy
        flash[:success] = "User destroyed."
        redirect_to users_path
    end
  end 
```

正如您可能会告诉我的那样，我是 Rails 的新手，但已经搜索以确保这还没有被覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:26:30.210

你应该传递`:page => params[:page]`给分页吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:03:10.220

我在客户端控制器和模型中声明了belongs_to，而不仅仅是模型。两天没注意到。

# namespaces - 如何使 JAXB 解组器忽略前缀？

> ID：11968399
> 
> 赞同：7
> 
> 时间：2012-08-15T11:21:11.237
> 
> 标签：namespaces, jaxb, prefix, unmarshalling

我有以下 XML：

```
<ns2:Person name="John" age="20" /> 
```

我想将它解组为从 XSD 生成的 JAXB 对象 Person。

这是我正在运行的代码：

```
JAXBContext context = JAXBContext.newInstance(PersoEntity.class);
Unmarshaller um = context.createUnmarshaller();
StringReader sr = new StringReader(xml);
Person p = (Person)um.unmarshal(sr); 
```

令人惊讶的是，我得到以下异常：

```
javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException: The prefix "ns2" for element "ns2:Person" is not bound.] 
```

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T13:58:03.077

**获取片段**

您当前获取 XML 片段的方式导致名称空间声明丢失。在您的片段`ns2`中不再是前缀，您只有一个带有冒号的元素名称（`ns2:Person`）。这将导致命名空间感知解析器出现问题。下面的文章可能是您获取 XML 片段的更好方法：

*   [http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html](http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html)

**处理您的用例**

使用您拥有的 XML 片段，您可以创建一个`XMLFilter`从 XML 元素中删除前缀的片段，然后利用 JAXB`UnmarshallerHandler`进行解组。

***演示***

```
package forum11968399;

import java.io.StringReader;
import javax.xml.bind.*;
import javax.xml.parsers.*;
import org.xml.sax.*;
import org.xml.sax.helpers.XMLFilterImpl;

public class Demo {

    private static final String xml = "<ns2:Person name='John' age='20' />";

    public static void main(String[] args) throws Exception {
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xmlReader = sp.getXMLReader();
        XMLFilter xmlFilter = new MyXMLFilter(xmlReader);

        JAXBContext context = JAXBContext.newInstance(PersonEntity.class);
        Unmarshaller um = context.createUnmarshaller();
        UnmarshallerHandler unmarshallerHandler = um.getUnmarshallerHandler();
        xmlFilter.setContentHandler(unmarshallerHandler);

        StringReader sr = new StringReader(xml);
        xmlFilter.parse(new InputSource(sr));
        PersonEntity p = (PersonEntity) unmarshallerHandler.getResult();
    }

    private static class MyXMLFilter extends XMLFilterImpl {

        public MyXMLFilter(XMLReader xmlReader) {
            super(xmlReader);
        }

        @Override
        public void startElement(String uri, String localName, String qName,
                Attributes attributes) throws SAXException {
            int colonIndex = qName.indexOf(':');
            if(colonIndex >= 0) {
                qName = qName.substring(colonIndex + 1);
            }
uri = XML_NAMESPACE; //to prevent unknown XML element exception, we have to specify the namespace here
            super.startElement(uri, localName, qName, attributes);
        }

        @Override
        public void endElement(String uri, String localName, String qName)
                throws SAXException {
            int colonIndex = qName.indexOf(':');
            if(colonIndex >= 0) {
                qName = qName.substring(colonIndex + 1);
            }
            super.endElement(uri, localName, qName);
        }

    }

} 
```

***个人实体***

```
package forum11968399;

import javax.xml.bind.annotation.*;

@XmlRootElement(name="Person")
@XmlAccessorType(XmlAccessType.FIELD)
public class PersonEntity {

    @XmlAttribute
    private String name;

    @XmlAttribute
    private int age;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:36:36.153

您最好的选择可能是将所需元素嵌套在绑定命名空间的另一个元素中。将它绑定到什么并不重要，只需将其设为可解析的有效 XML 文档即可。然后你可以[按声明的类型解组](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html#unmarshalByDeclaredType)

```
JAXBContext context = JAXBContext.newInstance(Person.class);
Unmarshaller um = context.createUnmarshaller();
String xml = "<ns2:Person name=\"John\" age=\"20\" />";
String xmlWithPrefixMapped = "<ns2:FakeElement xmlns:ns2=\"someuri\">" + xml + "</ns2:FakeElement>";
StringReader sr = new StringReader(xmlWithPrefixMapped);
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setNamespaceAware(true);
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(sr));
Node n = (Node) doc.getDocumentElement().getFirstChild();
JAXBElement<Person> personElement = um.unmarshal(n, Person.class);
Person p = personElement.getValue(); 
```

# c++ - 不能在 Xcode (c++) 中使用 _strdate

> ID：11968403
> 
> 赞同：0
> 
> 时间：2012-08-15T11:21:48.147
> 
> 标签：c++, xcode

我想在我的 c++ 程序中显示当前日期和时间。我只是通过这些代码行做到了这一点：

```
char date[9], time[9];

_strdate( date );
_strtime( time );

cout << "Current date and time: " << date << " " << time << endl; 
```

这在 MS Visual C++ 2010 和 Dev C++ 4.9.9.2 中完美运行。但这在 Xcode 中不起作用！它说我正在使用未声明的标识符“strdate”和“strtime”。我已经包含了*iostream*和*ctime*库，但这没有帮助。有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:23:45.307

这些函数不是标准 C++ 的一部分；它们是 Microsoft 特定的扩展，因此可能并非随处可用。

对于类似的功能，您可以尝试结合`time`,`localtime`和`strftime`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:29:58.557

```
std::string _strdate_alternative()
{
 char cptime[50];
 time_t now = time(NULL);
 strftime(cptime, 50, "%b. %d, %Y", localtime(&now)); //short month name
 return std::string(cptime);
} 
```

如前所述，标准 c/c++ 库中没有这样的功能。您可以使用此替代方法。代码基于在 Internet 上找到的一些信息。我没有编译它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:26:51.413

您正在寻找的功能是[`strftime`](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/strftime.3.html).

# php - 从连接的 MySQL 查询中仅选择一行

> ID：11968414
> 
> 赞同：0
> 
> 时间：2012-08-15T11:22:39.230
> 
> 标签：php, mysql

我正在尝试用 PHP/MySQL 制作一个社交网站。我目前正在开发状态更新和状态系统的评论。我正在尝试显示我的所有状态以及对某些状态的评论。为此，我有两个表：`comment`和`user_status`.

我使用了这个 MySQL 查询，

```
 SELECT * FROM user_status LEFT JOIN 
      comment ON id_status = comment.status_id
      WHERE sender_id = '$id2'
      OR receive_id = '$id2'

     /* $id2 is my id */ 
```

我已成功显示状态和一条评论。但问题是，当评论数超过1时，状态显示不止1次。将显示多少相同的状态取决于对某些状态有多少评论可用。但我希望能够仅显示一次相同的状态，并在某些状态下显示多个评论（如果可用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:30:21.440

这与其说是 PHP 问题，不如说是对 SQL 连接如何工作的混淆。

听起来您真正想要的不是连接，而是来自两个表的一组不同的记录。在您的 SQL 技能进一步发展之前，请考虑通过进行两个查询来简化事情——一个用于评论和 user_status。还可以考虑只请求您感兴趣的特定字段，而不是使用`SELECT *`.

[这是不同 SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)，以防您想通过单个查询进行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:35:53.803

我假设您没有显示查询的原始结果，而是将它们传送到要显示的 html 页面。仅在文本框中显示最近的状态。然后显示薄表或列出评论的有序列表。

您的查询是正确的。

# cordova - PhoneGap 中的软键盘涵盖了输入元素

> ID：11968420
> 
> 赞同：3
> 
> 时间：2012-08-15T11:23:19.173
> 
> 标签：cordova, keyboard, hidden

我已经看过这个问题几次了，但似乎没有一个答案对我有用。我怀疑我做了一些非常愚蠢的事情，并且错过了显而易见的事情（对等编程+1？）

使用 PhoneGap (Cordova) 2.0.0 为 Android（SDK 版本 8+）开发。我有一个用于用户设置输入的整页表单，页面下方有等间距的元素，最底部有取消和提交按钮。当用户触摸上部元素时，软键盘弹出，没有问题。但是，如果用户触摸软键盘下方的元素（如果它正在显示），那么当它弹出时它会被键盘覆盖。

我在清单文件中尝试了 android:windowSoftInputMode="adjustPan" 的各种咒语和化身（基于[http://solutions.michaelbrooks.ca/2011/07/05/android-soft-keyboard-resizes-web-view/](http://solutions.michaelbrooks.ca/2011/07/05/android-soft-keyboard-resizes-web-view/)和[http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)），但无济于事，元素将被键盘隐藏。

我的清单文件的相关部分如下所示

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".title"
        android:label="@string/title" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
        android:windowSoftInputMode="adjustPan"
    </activity>
</application> 
```

和 index.html 的视口部分（我看过一些关于更改的帖子）

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"> 
```

任何指针将不胜感激

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:23:14.727

代替

```
android:windowSoftInputMode="adjustPan" 
```

尝试

```
android:windowSoftInputMode="adjustResize" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T04:59:56.183

```
android:windowSoftInputMode="adjustResize" 
```

它在我的手机上运行良好（4.1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T01:11:53.173

这对我来说也是一个大问题，在 Android 2.x 和早期的 4.x 上。

如果我错了，请纠正我，但我认为 android:windowSoftInputMode 用于本机开发并在活动启动时应用。更改该设置似乎并没有影响我的 PhoneGap/Cordova 项目。

当编辑字段获得焦点时，我将窗口显式滚动到位：

```
onFocusEditField = function(comp, e, eopts) {
    if(Ext.os.is.Android) {
        var ost = comp.element.dom.offsetTop;
        this.getParent().getParent().getScrollable().getScroller().scrollTo(0, ost-50);
    }
}; 
```

注意：使用 Sencha Touch 2.x。

# python - 如何在 for 循环中使用列表索引？

> ID：11968426
> 
> 赞同：0
> 
> 时间：2012-08-15T11:23:39.113
> 
> 标签：python, for-loop, indexing

> **可能重复：**
> [在循环中查找列表的索引](https://stackoverflow.com/questions/3549959/finding-the-index-of-a-list-in-a-loop)

假设您有一个列表，其中不仅值有意义，索引也有意义。

```
counts = [3,4,5,3,1] 
```

假设这意味着“我们有 3 个类型为 0 的对象，4 个类型为 1 的对象，依此类推”。

您想从中创建一个对象列表并为这些对象提供两个信息详细信息：

```
[CountObject(amount=a,type=???) for a in counts] 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T11:25:14.993

使用[`enumerate()`功能](http://docs.python.org/library/functions.html#enumerate)：

```
[CountObject(amount=a, type=i) for i, a in enumerate(counts)] 
```

`i`那么索引在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:27:54.990

就像是：

```
[CountObject(amount=counts[a],type=a) for a in range(len(counts))] 
```

我猜会做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:27:58.743

除了`enumerate()`你也可以尝试`range()`，`xrange()`如果你在 python 2.x 上使用：

```
[CountObject(amount=counts[i],type=i) for i in range(len(counts))] 
```

# android - 如何从 SQLite 数据库中更新和删除行？

> ID：11968427
> 
> 赞同：0
> 
> 时间：2012-08-15T11:23:40.100
> 
> 标签：android, sqlite

我是 android 开发的新手，当我在首页开发记事本应用程序时`listview`包含作为笔记标题的项目，我想更新和删除一行`listview`：

```
public void Update(String txt)
    {
    ContentValues upateValues = createContentValues(txt);
    db.update(table_name, upateValues, row + "="+ "a", null);
    Toast.makeText(this, "Record Updated", Toast.LENGTH_SHORT).show();
    }

public void Delete()
    {
    db.delete(table_name, "row" +"="+"jmj", null);
    Toast.makeText(this, "Record Deleted", Toast.LENGTH_SHORT).show();
    //Display();
    } 
```

此查询对于更新和删除操作是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:33:16.190

您有两个（主要）选项如何做到这一点：

1) 使用 rawQuery 并像在任何其他数据库引擎中一样编写更新/删除。

```
db.rawQuery("UPDATE table_name SET column1=value, column2=value2 WHERE some_column=some_value") 
```

2）使用“帮助”方法并这样做：更新：

```
ContentValues values = new ContentValues();
values.put("your new values");
db.update(TABLE, values, ID + "=?", new String[] { rowId }); 
```

删除：

```
db.delete(TABLE, ID + " =? ", new String[] { intId }); 
```

不要忘记告诉您的列表视图数据集已更改。如何做到这一点取决于您为 ListView 使用的适配器。我想你不使用 ContentProvider/Loader 这么简单的 adapter.notifyDatasetChanged() 应该会有所帮助。

# html - 使用底部定位的页脚允许页面随内容一起增长

> ID：11968434
> 
> 赞同：3
> 
> 时间：2012-08-14T22:34:58.900
> 
> 标签：html, css

我使用本教程 (http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page) 设计了一个带有页脚的网站，该页脚浮动在我的屏幕底部，无论内容的长度 - 但是我现在遇到的问题是当有更多内容将显示在视口中时，而不是更少。

我的设计比他演示的更复杂，我将它与 CMS 一起使用，所以它在 html 方面显然有点不同。

使用此模型时，有没有人有任何技巧来推送内容 - 我正在处理的网站是[http://sproffer.joyatechsolutions.com](http://sproffer.joyatechsolutions.com)

如果您转到定价页面 - 您会看到内容多于显示内容（5 个段落），并且虽然显示了滚动条 - 它只在页脚下方添加了应该固定在底部的空间。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:27:18.730

你应该使用

```
position:fixed; 
```

对于#底部

您还应该在 #mainContent 上添加一个 padding-bottom

```
padding-bottom: 255px; 
```

这是为了阻止#mainContent 的内容被#bottom div 隐藏

事实上，看着它，我会将您的 div#mainContent 更改为

```
div#mainContent {
    width: 1000px;
    overflow:hidden;
    background: white;
    margin-top: 3px;
    padding: 14px;
    padding-bottom: 225px;
} 
```

# web-services - 通过 MATLAB 查询 Web 服务时如何查看 HTTP 事务？

> ID：11968439
> 
> 赞同：0
> 
> 时间：2012-08-15T11:25:17.170
> 
> 标签：web-services, debugging, http, matlab, soap

我正在使用 MATLAB 和 SOAP 来查询 Web 服务。除了使用像 WireShark 这样的低级数据包嗅探器之外，还有什么方法可以查看传出和传入的 HTTP 数据包以调试交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T21:53:26.460

您可以使用[TCPMon](http://technonstop.com/tcpmon-tutorial)：它可以位于客户端和服务器之间，显示它们之间的所有内容。

（它创建了一个类似代理的“隧道”，侦听一个端口并在显示时将所有内容转发到另一个端口。）

# applescript - 在苹果脚本中选择页面内容

> ID：11968442
> 
> 赞同：0
> 
> 时间：2012-08-15T11:25:41.410
> 
> 标签：applescript

我想逐页浏览 MS Word 文档并生成所有页面的图像。我被困在一开始。虽然我可以计算总页数，但我无法将第 1 页的内容放入选择对象中。

我想要类似的东西

```
select page 1 of active document 
```

或者

```
set myRange to create range active document page 1 
```

或者

```
create range active document start (start of page 1) end (end of page 1) 
```

当然，我有页数，我想循环它并逐页生成图像，但请先帮助我将页面内容放入选择对象中，以便我可以继续。

如果有人对完成这项工作有其他想法，我完全赞成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:28:06.743

我已经解决了。

步骤是。

1.  通过苹果脚本将word文档转换为pdf。
2.  在自动化器中创建工作流程以将 pdf 呈现为图像。
3.  通过苹果脚本中的 shell 命令调用 word flow。

我会在几天内制作一个教程并在哪里发布。

# adfs2.0 - 发送专有名称 ADFS 2.0

> ID：11968455
> 
> 赞同：2
> 
> 时间：2012-08-15T11:26:48.133
> 
> 标签：adfs2.0

你们能帮我解决如何在 ADFS 2.0 的声明中发送 DN 吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T18:39:24.613

似乎没有 DN 的标准 URI，但您始终可以自己滚动。

ADFS 声明规则框实际上是可配置的 - 请参阅[ADFS：选择不在默认下拉列表中的声明](http://nzpcmad.blogspot.co.nz/2011/09/adfs-selecting-claim-thats-not-in.html)

因此，在“LDAP 属性”中输入“DN”并在“传出声明类型”中输入“http://company.com/identity/claims/DistinguishedName”之类的内容。

**编辑：**

LDAP 属性请参见此处：[选定的 LDAP 属性](http://www.skills-1st.co.uk/papers/ldap-attributes/selected-LDAP-attributes.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T14:17:02.533

c:[Type == " [http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname](http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname) ", Issuer == "AD AUTHORITY"] => issue(store = "Active Directory", types = (" [http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name) "), 查询 = "; distinctName;{0}", 参数 = c.Value);

# android - 在 WidgetConfigActivity 之后阻止 App-Activity-launch

> ID：11968462
> 
> 赞同：0
> 
> 时间：2012-08-15T11:26:57.190
> 
> 标签：android, configuration, android-activity, widget, android-activityrecord

我有一个具有 ConfigActivity 的小部件。如果我第一次将小部件放在主屏幕上，一切都会按预期工作：

*   User Places Widget -> WidgetConfig 已启动
*   用户配置小部件
*   用户点击接受
*   带有小部件的主屏幕由服务显示和更新。

小部件上有一个图标，允许用户返回到配置。如果用户启动应用程序，按下 HomeButton，然后在 WidgetConfigIcon 上单击，则会出现该错误：

*   用户点击 WidgetConfigIcon -> WidgetConfig 启动
*   用户配置并点击接受
*   显示 APP 而不是 HomeScreen
*   用户按下后退按钮
*   显示主屏幕。

如果用户启动应用程序并单击 BackButton 而不是 HomeButton，则它不会出现。我希望 ConfigIcon 具有完全相同的行为，因为它位于主屏幕上的第一个位置。我发布了相关的实现

小部件服务：

```
Intent activityIntent = new Intent(this, WidgetConfig.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
//tried many Flags with no result
activityIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mWidgetData.getWidgetId());
PendingIntent configPendingIntent = PendingIntent.getActivity(this, mWidgetData.getWidgetId(), activityIntent, PendingIntent.FLAG_UPDATE_CURRENT);
mRemoteViews.setOnClickPendingIntent(R.id.widget_controls, configPendingIntent); 
```

清单入口：

```
<activity 
    android:name="namespace.WidgetConfig" 
    android:theme="@android:style/Theme.Light.NoTitleBar">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE"/>
     </intent-filter>
</activity> 
```

如果需要，我将发布任何其他代码。

用户完成配置后，我该怎么做才能防止应用程序出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:02:06.677

我让它自己工作。我添加了 IntentFlag`Intent.FLAG_ACTIVITY_NEW_TASK`并`android:taskAffinity:"some.custom.widgetConfig.task.ns"`在我的 Android-Manifest 中添加了一个自定义，它正在工作。

# r - google api距离矩阵到R

> ID：11968463
> 
> 赞同：0
> 
> 时间：2012-08-15T11:27:15.727
> 
> 标签：r, api, matrix, distance

我通过google api服务计算了城市之间的距离。我需要将距离转换为 R 中的距离矩阵，但是当我使用代码时：

```
de1 <- "http://maps.googleapis.com/maps/api/distancematrix/json?origins=Berlin|Hamburg|Muenchen|Koeln|Frankfurt am Mein|Duesseldorf|Bremen|Hannover|Nuernberg&destinations=Berlin|Hamburg|Muenchen|Koeln|Frankfurt am Mein|Duesseldorf|Bremen|Hannover|Nuernberg&mode=driving&language=en&sensor=false"
webpage1 <- getURL(de1)
webpage1 <- readLines(tc <- textConnection(webpage1)); close(tc)
pagetree <- htmlTreeParse(webpage1, error=function(...){}) 
```

如果我然后键入“pagetree”，我会收到一条错误消息。

```
 > pagetree
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, minimum-scale=1, width=device-width">
<title>Error 400 (Bad Request)!!1</title>
<style>
*{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}
</style>
<a href="//www.google.com/"><img src="//www.google.com/images/errors/logo_sm.gif" alt="Google"></a>
</head>
<body>
<p><b>400.</b> <ins>That&acirc;&#128;&#153;s an error.</ins>
</p>
<p>Your client has issued a malformed or illegal request.  <ins>That&acirc;&#128;&#153;s all we know.</ins></p>
</body>
</html> 
```

有人可以帮帮我吗？

谢谢你，索菲亚页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:44:36.123

尝试

```
require(RCurl)
webpage1 <- getURL(URLencode(de1)) 
```

返回的数据也是`JSON`格式

```
require(RJSONIO)
data<-fromJSON(webpage1) 
```

也许有用

如果你想`xml`退货试试

```
require(XML)
de2 <- "http://maps.googleapis.com/maps/api/distancematrix/xml?origins=Berlin|Hamburg|Muenchen|Koeln|Frankfurt am Mein|Duesseldorf|Bremen|Hannover|Nuernberg&destinations=Berlin|Hamburg|Muenchen|Koeln|Frankfurt am Mein|Duesseldorf|Bremen|Hannover|Nuernberg&mode=driving&language=en&sensor=false"
webpage2 <- getURL(URLencode(de2))
data2<-xmlParse(webpage2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-11T05:08:46.813

尝试包ggmap

```
library(ggmap) 
mapdist(from, to, mode = c("driving", "walking", "bicycling"),
output = c("simple", "all"), messaging = FALSE, sensor = FALSE,
language = "en-EN", override_limit = FALSE) 
```

# java - 如何制作多页docx？

> ID：11968468
> 
> 赞同：1
> 
> 时间：2012-08-15T11:27:35.040
> 
> 标签：java, apache-poi, docx

```
 InputStream is = Thread.currentThread().getContextClassLoader().getResourceAsStream(TEMPLATE);
    XWPFDocument document = new XWPFDocument(is);
    List<IBodyElement> elements = document.getBodyElements();
    for (int i = 0; i < elements.size(); i++) {
        document.removeBodyElement(i);
    }

    CTBody body = document.getDocument().getBody();
    CTSectPr docSp = body.getSectPr();

    CTPageSz pageSize = docSp.getPgSz();
    CTPageMar margin = docSp.getPgMar();

    BigInteger pageWidth = pageSize.getW();
    pageWidth = pageWidth.add(BigInteger.ONE);
    BigInteger totalMargins = margin.getLeft().add(margin.getRight());
    BigInteger contentWidth = pageWidth.subtract(totalMargins);

    ...

    XWPFTable table = document.createTable(totalRows, totalColumns); 
```

从模板开始，我创建了一个 XWPFDocument 并向其中添加了一个表。如何在一个页面上添加多个表格？也就是说，也许，我如何插入分页符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T17:27:09.633

我只是一个使用 POI 生成 .docx 文件的初学者，但到目前为止我已经弄清楚如何插入分页符。创建 XWPFParagraph 后，可以像这样插入分页符：

```
XWPFDocument document = new XWPFDocument(is);
...
XWPFParagraph paragraph = document.createParagraph();
XWPFRun run = paragraph.createRun();
run.addBreak(BreakType.PAGE); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-27T17:54:16.913

另一种方法是您可以使用以下方式设置分页符`XWPFParagraph`：

```
XWPFDocument document = new XWPFDocument(is);
...
XWPFParagraph paragraph = document.createParagraph();
paragraph.setPageBreak(true); 
```

# webview - JavaFX WebView 中的缓存

> ID：11968471
> 
> 赞同：7
> 
> 时间：2012-08-15T11:27:43.293
> 
> 标签：webview, javafx-2

我们正在开发一个 JavaFX 2.x 应用程序，它需要提供一些 GIS 支持。我们得出结论，通过嵌入式 WebView 使用 GoogleMaps 是最快的选择。它的问题是每次我们的应用程序启动时，都会下载相应的 JavaScript 库。这使得开发变得非常困难，因为在 WebView 面板上进行任何交互之前需要几秒钟的时间。

首先想到的是像 Web 浏览器那样进行某种缓存，以便存储库并在需要时在本地读取它们。使用 WebView 如何实现这一点？在我们的案例中，是否有缓存的替代方案？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T22:09:06.003

WebView 组件不提供开箱即用的 Web 资源缓存。但是，它确实利用 java.net 堆栈进行网络通信。这意味着您可以安装自己的 URL 处理程序，该处理程序与缓存通信并从该缓存中提供资源。例如，`main()`在 JavaFX 启动调用之前在您的方法中放置类似以下的块：

```
URL.setURLStreamHandlerFactory(new URLStreamHandlerFactory() {
    public URLStreamHandler createURLStreamHandler(String protocol) {
        if ( "http".equals(protocol) ) {
            return new URLStreamHandler() {
                protected URLConnection openConnection(URL u) throws IOException {
                    if ( isCached(u) ) {
                        return new CachedStreamConnection(u);
                    }
                    return new MyURLConnection(u);
                }
            };
        }
        // Don't handle a non-http protocol, so just return null and let
        // the system return the default one.
        return null;
    }
}); 
```

当然，魔鬼在细节中。在缓存中存储资源时，您**应该**考虑 HTTP 标头（如[ETags ）返回的缓存策略。](http://en.wikipedia.org/wiki/HTTP_ETag)另一个考虑因素是 HTML 元标记。 [这](http://www.mnot.net/cache_docs/)是一个关于缓存的好资源。

您可能还想考虑一个 cookie 管理系统来补充这个缓存管理系统。

# android - 在 Android 中无需滑动或手势即可在布局之间滑动

> ID：11968472
> 
> 赞同：0
> 
> 时间：2012-08-15T11:27:54.157
> 
> 标签：android, android-layout, viewflipper, android-sliding

我正在使用视图翻转器使用户能够通过单击相关按钮在布局之间滑动，但问题是，我有大约 10 种不同的布局，其中一些非常复杂。所以我得到“内存不足”错误。

我在互联网上搜索了一些东西，我看到的是，用手势在布局之间滑动。而我想要的只是能够在具有“滑入”和“滑出”动画的两个布局之间滑动。不使用手势和滑动，只需单击按钮。这就像一个新的活动开始，但我只想在布局之间滑动。谢谢是提前！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:36:18.783

碎片！动态构建、显示、隐藏和销毁它们。并使用 XML 动画来做任何你想要的动画过渡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:23:23.420

使用`ViewPager`with `Fragments`，两者都可以在[支持库](http://developer.android.com/tools/extras/support-library.html)中找到，并且一直兼容到 Android 1.6。

# plot - 将矩阵映射到圆形框架图像

> ID：11968473
> 
> 赞同：0
> 
> 时间：2012-08-15T11:27:54.780
> 
> 标签：plot

我有一个矩阵，想要将它映射到一个圆形框架。矩阵中的每个元素都应映射到圆形框架上的预定义位置。我真正要做的是处理从安装在头骨上的不同电极记录的人脑信号。这是我想得到的最后一个情节： [http ://www.ihr.mrc.ac.uk/img/research/2009/3/scan-banner.jpg](http://www.ihr.mrc.ac.uk/img/research/2009/3/scan-banner.jpg)

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:40:34.817

如果我错了，请纠正我。我不知道这些电极能够检索什么样的数据，但无论如何，我认为您可以从两种不同的性质来查看它们：首先，采样数据（一个封装通过一个特定电极收集的所有信息的类）和第二，地理映射对象，将每个电极的数据绑定到一个特定位置。

至于第一部分，您可以根据需要设计任何您想要的类。这个类可能只有一个双精度值（如强度或电平，或其他）或一组完整的变量，甚至是其他类，以表示您需要的方式排列。

至于第二部分，由于要将每个电极检索到的数据映射到圆形区域中的预定点，我认为具有水平和垂直定位值的类是好的。这可以是 java.awt.Point（可以映射到您希望的点的实际 X 和 Y 位置）或具有两个 X 和 Y 变量的自定义类（与任何域无关），可以转换为最终图像中的真实 X 和 Y 坐标。

类似的东西

```
public class Position {
    private int x;
    private int y;

    public Position(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }
} 
```

和

```
public class Sample {
    private double electricalLevel;
    private Position position;
    public double getElectricalLevel() {
        return electricalLevel;
    }
    public void setElectricalLevel(double electricalLevel) {
        this.electricalLevel = electricalLevel;
    }
    public Position getPosition() {
        return position;
    }
    public void setPosition(Position position) {
        this.position = position;
    }
} 
```

类似的东西。

然后您必须实例化每个 Sample，将其映射到 Position 实例并不断更新值。

至于到正确位置的映射，您可以预先计算所有位置并将其作为文字输入，或从定位函数计算。我认为预先计算的位置是可以的，因为它们不容易改变......

然后你会有类似的东西：

```
Sample s1 = new Sample();
s1.setPosition(new Position(100, 100));

Sample s2 = new Sample();
s2.setPosition(new Position(150, 80)); 
```

依此类推，对于每个电极。

至于绘图本身，您将不得不深入研究 java 成像。这不会那么简单，因为您实际上不仅仅是在绘制点本身。实际上，如果我是正确的，每个点及其周围区域的颜色将是采样数据的函数，因为颜色似乎反映了来自该大脑区域的采样数据。

更糟糕的是，多个点之间的边界区域会相互影响，从而产生颜色渐变。

我建议您首先关注给定的场景，然后在其他问题中询问绘画和 Java 成像问题。

抱歉，这是一个非常笼统的答案，但据我所知，我可以进行许多假设并且不知道您到底在处理什么。不过，我希望它有所帮助。

# ruby-on-rails - 使用 Rails 中的 Business_time gem 计算一个月的工作日

> ID：11968477
> 
> 赞同：0
> 
> 时间：2012-08-15T11:28:03.727
> 
> 标签：ruby-on-rails, rubygems

我是新来的`ROR`，我想编写一个函数，我将传递给该函数，它将使用rails 中的 gem`month`返回`total working days`该特定月份的（周六和周日除外）`business_time`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:32:37.053

尝试（未测试）：

```
first_day = Date.parse("September 30, 2012")
last_day = Date.parse("November 1, 2012")
first_day.business_days_until(last_day) 
```

# php - 用于页面管理的 php yii 框架扩展

> ID：11968479
> 
> 赞同：0
> 
> 时间：2012-08-15T11:28:09.173
> 
> 标签：php, yii, yii-extensions

你能告诉我一些用于页面管理的 yii 框架扩展吗？

我希望能够使用所见即所得编辑器在管理面板中创建/编辑常见页面，例如“使用条款”和“隐私政策”。

如何在 Yii 中创建这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:30:36.860

[**这里**](http://www.yiiframework.com/extensions/?tag=wysiwyg)有很多针对不同编辑器的扩展。查看它们并选择您喜欢的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:39:56.430

具有最佳所见即所得编辑器扩展的管理面板是：

*   [CL编辑器](http://www.yiiframework.com/extension/cleditor/)
*   [Yii RedactorJS 所见即所得](http://www.yiiframework.com/extension/yii-redactorjs-wysiwyg-widget/)

# iphone - 在 iPhone 和 iPad 上保留、释放

> ID：11968481
> 
> 赞同：-2
> 
> 时间：2012-08-15T11:28:20.163
> 
> 标签：iphone, objective-c, ios, ipad, memory-management

此代码在**iPad 4S上运行，但是在****iPad 1**上运行时会导致崩溃。

该代码没有使用 ARC，（我也不希望使用 ARC，因为我正在尝试掌握内存管理的概念）。

[pastebin 上的头文件](http://pastebin.com/wFBL6XdP)

[pastebin 上的实现文件](http://pastebin.com/Arb5v7U6)

代码是一个投币App，用户可以选择不同类的投币数量，这个值由实现文件访问。

我最初认为阵列给我带来了麻烦。根据我对内存管理的理解，我将它们声明为`@property(nonatomic, retain)`，这意味着我拥有所有权，因此必须在`dealloc`方法中释放它们。`dealloc`一旦`retainCount`对象的 达到**0** ，就会调用该方法。我已尽力理解问题所在。

但我不确定是否有一个，因为代码适用于**4s**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:33:57.010

请参阅我上面关于提供崩溃日志的评论 -*但是*：

我从您的代码中看到您正在到处使用该`retainCount`方法。**不要这样做！**

`retainCount`永远不应该这样使用 - 这是一个非常容易混淆的命名方法，在 99% 的情况下只会造成进一步的麻烦。Apple 的文档在这一点上非常清楚：不要`retainCount`用于这样的事情。有关更多信息，请参阅此问题（评价最高的答案实际上是由现在担任 Apple Frameworks 工程师的人提供的）：

[何时使用 -retainCount？](https://stackoverflow.com/questions/4636146/when-to-use-retaincount)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:12:11.107

There are a lot of issues with that code.

• uses NSMutableArray when an NSArray will do

• calls fillArray *way too often*

• loads a ton of images all at once (likely source of memory issue, regardless)

• has a bunch of global variables that are probably supposed to be instance variables

• Does this: `[NSString stringWithFormat:@" "]` (just use `@" "` directly)

• uses `retainCount` at all

• leaks some objects

Post the crash log for more information on the actual crash. Use the static analyzer (build and analyze) and fix all indicated issues first.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:14:02.573

如果我错过了什么，我会提前道歉，但看起来你的内存不足，因为你正在使用：

```
 @property(nonatomic, retain)  NSMutableArray *myArray; 
```

一个“保留的”合成器，当你这样做时，你也为数组分配了更多的内存：

```
 [[NSMutableArray alloc] init] 
```

所以你有效地这样做了：

```
 [self setMyArray:[[NSMutableArray alloc] init]]; 
```

这导致数组在分配给数组变量时被分配和再次保留。保留计数为 2。相反，我会使用：

```
 [self setMyArray:[NSMutableArray array]]; 
```

在这种情况下，[NSMutableArray array] 方法会在数组返回之前自动释放它的内存。设置器将保留应用于数组，因为它将它分配给您的变量。保留计数为 1。因此，当您在 dealloc 中释放变量时，数组内存被释放。

请注意，retainCount 方法可能无法准确反映真实的保留计数，因为它不考虑对象上的自动释放。

# android - Android 2.2 模拟器不工作

> ID：11968488
> 
> 赞同：1
> 
> 时间：2012-08-15T11:28:57.933
> 
> 标签：android, android-emulator

我正在创建一个模拟器，但它没有启动。

我收到以下错误；

```
Starting emulator for AVD 'Froyo' 
```

> X Error of failed request: BadRequest (invalid request code or no such operation) Major opcode of failed request: 136 (GLX) Minor opcode of failed request: 19 (X_GLXQueryServerString) Serial number of failed request: 12 Current serial number in output stream: 12

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:34:30.883

只需删除路径中的 .android 文件夹（如 C:\Users\Abhinai.android）并打开您的 avd 管理器，然后尝试创建一个新的 AVD 即可正常工作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-05T07:40:39.043

在 /var/log/Xorg.0.log 中查找 (EE)

你的opengl安装有问题。库和/或驱动程序的版本可能错误。

# ssis - 如何使用脚本任务更改 OLEDB 连接信息？

> ID：11968489
> 
> 赞同：3
> 
> 时间：2012-08-15T11:29:04.957
> 
> 标签：ssis

我有一个 OLEDB 连接，我希望在脚本中动态更改此连接。我正在使用以下代码获取此 OLEDB 连接的信息：

```
ConnectionManager cm = Dts.Connections["VendorDB"];
        DbConnection conn = null;
        if (cm.CreationName == "OLEDB")
        {
            Wrap.IDTSConnectionManagerDatabaseParameters100 cmParams =
            cm.InnerObject as Wrap.IDTSConnectionManagerDatabaseParameters100;
            conn = cmParams.GetConnectionForSchema() as DbConnection;
        }
        else
        {
            conn = cm.AcquireConnection(null) as DbConnection;
        }

        if (conn.State == ConnectionState.Closed)
        {
            conn.Open();
        }
        MessageBox.Show(conn.ConnectionString.ToString()); 
```

我需要更改此连接信息（例如我想更改初始目录等）并希望此更改后的信息在整个包中保留。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:32:54.997

我会通过结合使用来解决这个问题

*   [首先，我将定义一个 SSIS 变量，如此处](http://www.simple-talk.com/sql/ssis/ssis-basics-introducing-variables/)所示
*   我会将连接字符串设为[此处所示的表达式](http://consultingblogs.emc.com/jamiethomson/archive/2006/03/11/ssis-nugget_3a00_-setting-expressions.aspx)
*   [并通过脚本更改变量，如此处](https://stackoverflow.com/questions/9064438/how-to-modify-the-variable-in-ssis)所示

第一步相对容易：

打开变量选项卡（右键单击控制流内部并单击变量）并添加您想要的变量（可能是您的连接字符串的字符串）

使用新定义的变量创建表达式。使用第三个链接中的代码在运行时更改值。

```
Dts.Variables("myVariable").Value = @"C:\Test2.txt";

Dts.TaskResult = ScriptResults.Success 
```

# javascript - 将对象转换为 jquery 对象

> ID：11968490
> 
> 赞同：0
> 
> 时间：2012-08-15T11:29:14.723
> 
> 标签：javascript, jquery, handlebars.js

我正在使用车把 js，并且我创建了一个助手。

```
Handlebars.registerHelper('str', function(....) {
    el = $(this);
    console.log(el);
}); 
```

当我签入 firebug el 时，将以这种格式分配一个对象

```
 Object { title="Title1", day="Fri", more...} 
```

但它基本上是一个里。如何将对象作为 li 获取，以便我可以对其执行操作。![在此处输入图像描述](../Images/f431897de81f2418875084e32e3ea06d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:33:51.300

你可以直接使用`this`

```
el = this; 
```

更新：

我没有注意到“handlebars.js”。无论如何，handlebars js 处理 html 字符串。它不操纵对象。您可以创建模板并应用数据来填充所需的 html 字符串。因此，如果您想添加一些可以使用 jQuery 检索的数据，您必须添加一个属性，如下所示。

```
<li data-name="abc">abc</li> 
```

可以使用

```
$("li").data("name") 
```

我希望下面的代码能帮助你 jsfiddle：http: [//jsfiddle.net/diode/bGJTv/](http://jsfiddle.net/diode/bGJTv/)

```
Handlebars.registerHelper('str', function(items, options) {
    var out = '<ul>';

    for (var i = 0, l = items.length; i < l; i++) {
        out = out + '<li data-mydata="' + items[i].year + '" onclick="onLiClick(event)">' + items[i].firstName + " " + items[i].lastName + '</li>';
    }

    return out + '</ul>';
});

$("#entry-template").html(Handlebars.compile($("#entry-template").html())({
    people: [
        {
        firstName: "Yehuda",
        lastName: "Katz",
        year: "2010"},
    {
        firstName: "Carl",
        lastName: "Lerche",
        year: "2011"},
    {
        firstName: "Alan",
        lastName: "Johnson",
        year: "2012"}
    ]
}));

onLiClick = function (event){
   console.log(event.currentTarget);
    console.log($(event.currentTarget).data("mydata"));
} 
```

# mysql - 闭包树中兄弟姐妹之间的唯一名称约束

> ID：11968493
> 
> 赞同：1
> 
> 时间：2012-08-15T11:29:26.443
> 
> 标签：mysql, hierarchical-data, unique-constraint, transitive-closure-table

我想知道在 MySQL 中使用[闭包表对层次结构建模时，如何对兄弟节点的名称强制执行唯一约束。](http://www.mysqlperformanceblog.com/2011/02/14/moving-subtrees-in-closure-table/)

这是我的架构：

```
create table spaces (
  id int not null, 
  name varchar(50) not null,
  parent int not null,
  primary key (id),
  foreign key (parent) references spaces(id),
  unique key (name, parent)
)

create table space_paths (
  ancestor int not null,
  descendant int not null,
  depth int not null,
  primary key (ancestor, descendant),
  foreign key (ancestor) references spaces(id),
  foreign key (descendant) references spaces(id)
) 
```

使用此架构，我在`spaces`表上使用唯一约束来验证没有兄弟姐妹具有相同的名称。

这种方法的缺点是它对封装在`space_paths`表中的层次元数据进行了非规范化。这意味着我需要手动管理表中`parent`字段与`spaces`表中路径的一致性`space_paths`。

有没有一种方法可以重新设计架构以使数据库在兄弟姐妹之间强制执行唯一名称约束而不必非规范化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:30:08.590

在这里使用闭包表并不是你的问题的相关部分——你只需要一个`UNIQUE KEY`on `parent, name`，这就是你似乎已经定义好的东西，所以你应该很好。

可能导致您悲伤的一件事是您`NOT NULL`对列有限制`parent`。你将如何支持“根”节点？您可以使根节点使用与其 ID 列相等的父值，但这需要一个自分配的主键（AFAIK，您不能在插入语句中引用自动增量值）：

```
INSERT INTO spaces(id, name, parent) values (0, 'root', 0); 
```

# sql - SQL 事务/错误处理/更新

> ID：11968495
> 
> 赞同：0
> 
> 时间：2012-08-15T11:29:37.823
> 
> 标签：sql, transactions

我有一个复杂的问题。我有一个不带参数的存储过程。目前，当我运行它时，我收到一条错误消息，告诉我

> *在 EXECUTE 之后表示 BEGIN 和 COMMIT 语句的数量不匹配。先前计数 = 0，当前计数 = 1。*

本质上，存储过程看起来像这样：

```
 USE FirstDatabase
    GO

    SET ANSI_NULLS ON
    GO

    SET QUOTED_IDENTIFIER ON
    GO

    CREATE PROCEDURE [schema].[Procedure]
    AS

    SET NOCOUNT ON
    SET XACT_ABORT ON

    BEGIN TRY

DECLARE @WholeBunchOfVariables varchar(max); --All these are ofcourse separated and different data types

IF(SELECT OBJECT_ID('tempdb..#tempTable')) IS NOT NULL
BEGIN
    DROP TABLE #tempTable
END

CREATE TABLE #tempTable (
    ...,  --bunch of fields to be populated
    IsProcessed bit) -- this field is used later to run through a temp table variable one record at a time, once done, this is set to 1

DECLARE @tempTableVar TABLE (
    ...)

    --Insert data from the accounts table(s) into the temp table.  Only process data
    --that has been modified in the past day.

    INSERT INTO #tempTable
    SELECT DISTINCT
        ... -- bunch of fields from different tables
    FROM
        SomeTables

    --Loop through the data in the temp table, one record at a time.  Process it and 
    --once done, set the IsProcessed field in the temp table to 1 so that it can pick 
    --up the next record to process.

    WHILE (1=1)
    BEGIN

    INSERT INTO @tempTableVar
SELECT TOP 1
    ... --bunch of fields from temp table
FROM
    #tempTable
WHERE
    IsProcessed = 0  -- check for first unprocessed record

    --The following variables need to be initiated so that it can be used for executing 
    --The main stored procedure that popuplates the marketing tables.

    SELECT
        ... --bunch of variables initiated from the temp table variable
    FROM
        @tempTableVar

    BEGIN TRY

    BEGIN TRANSACTION

    IF (SELECT COUNT(*) FROM @tempTableVar) = 0
    BEGIN
            BREAK;
        ROLLBACK TRANSACTION;
    END

    --Another stored procedure is called here to be executed with the variables that 
    --were initiated a bit further up, as input parameters.

    EXEC [SomeDatabase].[Schema].[SomeOtherStoredProcedure]
        ... --bunch of input parameters / variables

COMMIT TRANSACTION

    END TRY

    BEGIN CATCH

IF (XACT_STATE() <> 0)
ROLLBACK TRAN;

SELECT 
        @ErrorNumber = ERROR_NUMBER(),
    @ErrorSeverity = ERROR_SEVERITY(),
    @ErrorState = ERROR_STATE(),
    @ErrorLine = ERROR_LINE(),
    @ErrorProcedure = ISNULL(ERROR_PROCEDURE(), '-');

SELECT @ErrorMessage = ERROR_MESSAGE() +  '(Error %d, Level %d, State %d, Procedure %s, Line %d).'

    --Errors on this level, essentially raised by the secondary stored procedure, are
    --stored in an error logging table for later reference

    INSERT INTO [schema].[ImportErrors] (
        ErrorType,
        ErrorMessaae) VALUES (
        'Some Type',
        @ErrorMessage);

UPDATE
    #tempTable
SET
    IsProcessed = 1
WHERE
    someField = @someVariable ...

DELETE
FROM
    @tempTableVar

    END CATCH

    --Update the temp table's IsProcessed field to 1 for the affected record, if there 
    --are no errors.

    UPDATE #tempTable
    SET
        IsProcessed = 1
    WHERE
        someField = @someVariable ...

    --Delete the entry from the temp table variable so that it can be used for the next
    --record.

    DELETE
    FROM
        @tempTableVar

    END

    IF(SELECT OBJECT_ID('tempdb..#tempTable')) IS NOT NULL
    BEGIN
        DROP TABLE #tempTable
    END

    SET NOCOUNT OFF
    SET XACT_ABORT OFF

    END TRY

    BEGIN CATCH

        IF (XACT_STATE() <> 0)
            ROLLBACK TRAN;

        -- Do the error handling.
        -- Assign variables to error-handling functions that 
        -- capture information for RAISERROR.
        SELECT 
            @ErrorNumber = ERROR_NUMBER(),
            @ErrorSeverity = ERROR_SEVERITY(),
            @ErrorState = ERROR_STATE(),
            @ErrorLine = ERROR_LINE(),
            @ErrorProcedure = ISNULL(ERROR_PROCEDURE(), '-');

        -- Building the message string that will contain original
        -- error information.
        SELECT @ErrorMessage =
    'Message: '+ ERROR_MESSAGE() + N' (Error %d, Level %d, State %d, Procedure %s, Line %d).';

--SELECT @ErrorMessage = @ErrorMessage + @CustomerCategoryID + ' ' + @CustomerID + ' ' + @EmailAddress

-- Raise an error: msg_str parameter of RAISERROR will contain
-- the original error information.
RAISERROR (
    @ErrorMessage, 
    @ErrorSeverity, 
    1,
    @ErrorNumber,    -- parameter: original error number.
    @ErrorSeverity,  -- parameter: original error severity.
    @ErrorState,     -- parameter: original error state.
    @ErrorProcedure, -- parameter: original error procedure name.
    @ErrorLine);       -- parameter: original error line number.

    END CATCH 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:49:37.730

这是要解析的大量代码 - 您的代码中有很多事务开始/结束，并且在回滚/提交之前您没有检查任何一个事务是否仍处于打开状态。

理想情况下，每个逻辑插入集都应该有一个事务提交/回滚语句。

# c# - var 如何知道未定义的类型？

> ID：11968498
> 
> 赞同：6
> 
> 时间：2012-08-15T11:29:55.007
> 
> 标签：c#, syntax

隐式类型变量如何`var`知道未在范围内定义的类型（使用`using`）？

例子：

还行吧

```
public class MyClass
{
    public void MyMethod        
    {
        var list = AStaticClass.GetList();
    }
} 
```

但这不行

```
public class MyClass
{
    public void MyMethod        
    {
        List<string> list = AStaticClass.GetList();
    }
} 
```

在最后一个代码片段中，我必须添加`using System.Collections.Generic;`它才能工作。

这是如何运作的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T11:31:58.203

> 这是如何运作的？

当编译器进行类型推断时，它会替换`var`为`System.Collections.Generic.List<string>`，您的代码变为：

```
public class MyClass
{
    public void MyMethod        
    {
        System.Collections.Generic.List<string> list = AStaticClass.GetList();
    }
} 
```

但是由于编译器吐出 IL，下面的 C# 程序（没有任何`using`语句）：

```
public class Program
{
    static void Main()
    {
        var result = GetList();
    }

    static System.Collections.Generic.List<string> GetList()
    {
        return new System.Collections.Generic.List<string>();
    }
} 
```

该`Main`方法如下所示：

```
.method private hidebysig static void Main() cil managed
{
    .entrypoint
    .maxstack 8
    L_0000: call class [mscorlib]System.Collections.Generic.List`1<string> Program::GetList()
    L_0005: pop 
    L_0006: ret 
} 
```

如您所见，编译器从赋值运算符的右侧推断类型并替换`var`为完全限定的类型名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T11:33:08.593

编译器实际上知道类型。即使您没有使用 using 编译器缩短它，仍然可以将 ' `var`' 替换为带有命名空间`System.Collections.Generic.List<string>`的完整类型定义......就像您可以在没有 'using' 指令的情况下使用该行定义变量一样。

# eclipse - 以编程方式重新排列图表

> ID：11968509
> 
> 赞同：0
> 
> 时间：2012-08-15T11:30:44.793
> 
> 标签：eclipse, eclipse-plugin, eclipse-emf, eclipse-gmf

我正在尝试以编程方式重新排列（自动布局）UML2 图。
但是，我无法根据`Diagram`实例这样做。

到目前为止，我的代码如下所示：

```
Diagram diagram = /*...*/;
EditPart editPart = new DiagramEditPart(diagram);

List<EditPart> editParts = CollectionUtil.createNewSequence();
editParts.add(editPart);

ArrangeRequest request = new ArrangeRequest("");
request.setPartsToArrange(editParts);
editPart.getCommand(request).execute(); 
```

目前它完全没有效果。我想我不应该手动创建 DiagramEditPart 而是从其他地方获取它 - 但我不知道从哪里开始寻找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:02:24.527

使用`OffscreenEditPartFactory.createDiagramEditPart`创建`EditPart`似乎工作：

```
EditPart editPart = OffscreenEditPartFactory.getInstance().createDiagramEditPart(diagram, getShell());

List<EditPart> editParts = CollectionUtil.createNewSequence();
editParts.add(editPart);

ArrangeRequest request = new ArrangeRequest(ActionIds.ACTION_ARRANGE_ALL, LayoutType.DEFAULT);
request.setPartsToArrange(editParts);
Command cmd = editPart.getCommand(request);
if (cmd != null)
    cmd.execute(); 
```

# javascript - 获取两个时区之间的时差（Javascript）

> ID：11968512
> 
> 赞同：0
> 
> 时间：2012-08-15T11:31:24.267
> 
> 标签：javascript

我有：

任何日期 (GMT+00:00)UTC

```
var d = new Date(y, m, d, h, min, s); 
```

和小时的时差

```
var visitortime = new Date();
var time_offset = visitortime.getTimezoneOffset()/60; 
```

如何在不编写长手工函数的情况下考虑差异来计算新日期？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-15T12:04:32.260

[**样品**](http://jsfiddle.net/f0t0n/kASDy/)：

```
​&lt;div id="d1"></div>
<div id="d2"></div>
<script type="text/javascript">
    var d1 = document.getElementById('d1'),
    d2 = document.getElementById('d2'),
    hours = 3,
    date1 = new Date(),
    date2 = new Date();
    date2.setTime(date1.getTime() + hours * 3600000);
    d1.innerHTML = date1;
    d2.innerHTML = date2;
</script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T12:09:33.920

如果您想为`Date`实例添加小时数，则可以使用该[`Date.setHours`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setHours)方法。

```
var userTime = new Date();

// Add four hours to the `userTime` date instance.
userTime.setHours(userTime.getHours() + 4); 
```

如果你想让它可重用，你可以在`Date`对象的原型中添加一个新方法：

```
// Add the supplied number of hours to a Date instance.
Date.prototype.addHours = function (value) { 
    this.setHours(this.getHours() + value);
}; 
```

然后你可以简单地写：

```
var userDate = new Date();
userDate.addHours(4); 
```

如果您打算在代码中进行大量日期操作，那么最好引入一个日期/时间库，例如[moment.js](http://momentjs.com/)，其中包含许多有用的实用程序方法，而不像添加新方法到`Date`原型，您的代码将保持可移植性。这是使用 moment.js 向 Date 实例添加四个小时的方法

```
var result = moment().add("hours", 4); 
```

# json - JsonMappingException：如何通过 Restlet 传输 Objectify 实体（带键）

> ID：11968513
> 
> 赞同：1
> 
> 时间：2012-08-15T11:31:24.030
> 
> 标签：json, restlet, objectify, restlet-2.0

我正在开发一个 Android 应用程序，与 GAE 服务器 + Objectify DB 通信。

我选择 Restlet 作为 rest 框架。

当我尝试检索具有 Key 属性的实体时遇到问题。服务器抛出错误：

```
org.codehaus.jackson.map.JsonMappingException: Direct self-reference leading to cycle
(through reference chain: java.util.ArrayList[0]->com.my.model.MyMessage["senderKey"]->com.googlecode.objectify.Key["root"]) 
```

这是我的模型（非常简单）：

```
public class MyMessage implements Serializable {
private static final long serialVersionUID = -1075184303389185795L;

@Id
private Long id;

@Unindexed
private String sendMessage;

@Parent
Key<MyUser> senderKey;

private MyMessage() {
}

public MyMessage(MyUser user, String message) {
    super();
    this.sendMessage = message;
    this.senderKey = new Key<MyUser>(MyUser.class, user.getId());
}

[... getters and setters ...]
} 
```

.

```
public class MyUser implements Serializable {

private static final long serialVersionUID = 7390103290165670089L;
@Id private String id;

private MyUser() {
    this.setId("default");
}

public MyUser(String mail) {
    this.setId(mail);
}
[... getters and setters ...] 
```

}

我能做些什么来解决这个问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:08:30.903

Objectify 的 Key 有一个方便的方法 getRoot()，它返回祖先链中的根元素。当键*是*根时， getRoot() 返回**this**。杰克逊将此检测为一个循环，因此您会收到错误消息。

解决这个问题的最好方法是不要尝试将 Keys 序列化为 json 对象。键在 JSON 中更好地表示为字符串化版本。

我不知道你是如何在 Restlet 中做到这一点的，但是你需要修改 ObjectMapper 实例以提供一个 KeySerializer 来进行这种翻译。查看`ObjectifyJacksonModule`Objectify4 中的指导：

[https://code.google.com/p/objectify-appengine/source/browse/src/com/googlecode/objectify/util/jackson/ObjectifyJacksonModule.java](https://code.google.com/p/objectify-appengine/source/browse/src/com/googlecode/objectify/util/jackson/ObjectifyJacksonModule.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:46:33.877

你有没有包括

```
<inherits name="com.googlecode.objectify.Objectify" /> 
```

在你的 GWT 模块中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-13T12:41:00.497

我有一个类似的问题导致了这个确切的错误。将代码简化为绝对必需品后，我发现如果我从 AppEngine API 方法返回一个 Key 对象，我将看到此错误。

IE

```
@ApiMethod(name = "insertPureContainer", path="insertPureContainer", httpMethod = ApiMethod.HttpMethod.POST)
public Key insertPureContainer(PureContainer container, User user) throws OAuthRequestException {

    return ofy().save().entity(container).now();    

} 
```

将导致此错误，返回更新的对象不会。

# c# - 在 C# 中合并两个相似的动态对象在途中创建集合

> ID：11968514
> 
> 赞同：2
> 
> 时间：2012-08-15T11:31:47.683
> 
> 标签：c#, dynamic, merge, expandoobject

我有多个动态对象（大多数时候）只有几个值不同。我希望能够将这些对象合并到一个对象中，如果发生冲突（两个值不相同），那么我希望将它们存储在一个集合或另一个动态对象中（如果可能的话）。

我正在使用 expandoObject 类，因此我可以将我的对象转换为字典并尝试合并它，但我还没有找到任何关于合并字典的文章或资源，这些字典会创建有冲突的集合。

有没有办法以一种易于实施和高效的方式做到这一点？

我将发布一些代码示例，让您了解我正在尝试完成的工作

```
//returns a dynamic object from JSON (output from DataBase)
JsonReader reader = new JsonReader();
dynamic object = reader.Read(input);

//Creates a dictionairy with all the fieldnames and values.
IDictionary<string, dynamic> properties = (IDictionary<string, dynamic>)object;

//My goal is to merge multiple of these objects into one single object and
//creating collections when values are different from each other. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:32:28.720

您的问题似乎基于 IDictionary<> 接口。它假设每个键只有一个值。我相信您更愿意转向`IEnumerable<IGrouping<TKey,TValue>>`表示键值集合列表的 LINQ-ish。

当您执行 .GroupBy 或 .ToLookup 调用时，LINQ 会发出此类对象。
那就玩吧：

```
using System.Linq;

Dictionary<string, dynamic> A = ...;
Dictionary<string, dynamic> B = ...;

// naiive atempt:
var lookup = 
    A.Keys.Concat(B.Keys)
        .ToDictionary(key => key, key => new dynamic[]{ A[key], B[key] } )); 
```

当然它不会起作用，但我已经写了它来看看它会暴露什么问题。首先 - 你可能会在连接时得到重复的键。那么并不是所有的键都在 A 和 B 中，所以索引器会抛出。接下来，我碰巧假设原始对象是字符串到一值的，并且您可能会处理已经碰撞的对象。然后，这仅使用 2 个 A/B 对象，而您可能想要处理多个..

```
IEnumerable<Dictionary<string, dynamic>> inputs = ....;

// btw. GropuBy returns a lookup, too :) a key -> all matches
var matched_by_keys = inputs.GroupBy(pair => pair.Key);

var final = matched_by_keys.ToDictionary(group => group.Key, group => group); 
```

看这里。我已经使用了所有字典，并根据它们的键“将它们配对”。结果，我得到了一个查找，将每个现有的键绑定到一系列之前分配给该键的值。结果`matched_by_keys`是一个 Enumerable，而不是字典，所以后来被翻译成它。查看 ToDictionary 的参数：Group 本身就是一个 IEnumerable，只需指出一个键，并且该组保持不变。

尽管如此，输入仅适用于单值的 IDictionary。如果您也需要对多值输入执行此类操作，您可以轻松地将 IDictionaries 转换为查找并对它们执行操作：

```
IEnumerable<Dictionary<string, dynamic>> inputs1 = ....; // normal items
IEnumerable<ILookup<string, dynamic>> inputs2 = ....; // items that previously already collided

var allAsLookups =
    inputs1.ToLookup(pair => pair.Key, pair => pair.Value)
    .Concat( inputs2 );

// btw. GropuBy returns a lookup, too :) a key -> all matches
var matched_by_keys = lookups.GroupBy(lk => lk.Key);

var final1 = matched_by_keys.ToDictionary(group => group.Key, group => group.SelectMany(s=>s)); 
```

请注意现在必须翻译最后的组。在此示例中， groupis 不是`IEnumerable<Value>`，而是因为**允许**`IEnumerable<IEnumerable<Value>>`输入是多值的，即使它们只有 1 个值。所以，它必须被展平，这是由 SelectMany 完成的。这反过来不需要投影任何东西，因为该项目已经是 IEnumerable，所以 =>s 就足够了。

 **使用 GroupBy、ToLookup 和 ToDictionary 的不同重载，您可以实现许多有用的效果。玩超载！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:35:28.053

由于值是 a`dynamic`你确实可以存储一个值或一个集合，只要你认为合适。

我们需要某种字典集合，在本例中是一个数组。

```
var props1 = new Dictionary<string, dynamic> 
    {
        {"uniq1", "uniq1"},
        {"same", "same1"},
    };
var props2 = new Dictionary<string, dynamic> 
    {
        {"uniq2", "uniq2"},
        {"same", "same2"},
    };
var props3 = new Dictionary<string, dynamic> 
    {
        {"uniq3", "uniq3"},
        {"same", "same3"},
    };

var props = new[] { props1, props2, props3 }; 
```

然后获取第一个并将其与以下合并。如果一个键已经存在，那么检查它是否已经是一个 List 或者我们是否必须创建一个。如果密钥不存在，则只需添加它。

```
var merged = props.First();

foreach (var prop in props.Skip(1))
{
    foreach (var key in prop.Keys)
    {
        dynamic oldValue;
        if (merged.TryGetValue(key, out oldValue))
        {
            if (oldValue is IList<dynamic>)
                merged[key].Add(prop[key]);
            else
                merged[key] = new List<dynamic> { oldValue, prop[key] };
        }
        else
            merged.Add(key, prop[key]);
    }
} 
```

`merged`将设置为：

```
merged
Count = 4
    [0]: {[uniq1, uniq1]}
    [1]: {[same, System.Collections.Generic.List`1[System.Object]]}
    [2]: {[uniq2, uniq2]}
    [3]: {[uniq3, uniq3]}
merged["same"]
{System.Collections.Generic.List<object>}
    [0]: "same1"
    [1]: "same2"
    [2]: "same3" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T15:10:51.700

如果您的动态对象是`Expando`，您可以使用 Linq 如下：

```
var objectList = new List<dynamic>() {...};

var result = objectList.SelectMany(obj => 
                           (IDictionary<string, dynamic>)obj.ToList())
            .GroupBy(pair => pair.Key)
            .ToDictionary(group => group.Key,
                          group => group.Select(pair => pair.Value)); 
```

首先，使用从动态对象`SelectMany`中选择所有`KeyValuePair<string, dynamic>`，这种方式将接受具有相同键的列表。

然后，按 Key 分组并使用函数`ToDictionary`来获取结果。**

# php - PHP 错误 [2]: fopen(http://www1.macys.com/robots.txt)

> ID：11968516
> 
> 赞同：0
> 
> 时间：2012-08-15T11:31:51.087
> 
> 标签：php, robots.txt

我正在尝试下载 robots.txt 文件的内容

我原来的问题链接：[URL/robots.txt 的 PHP file_exists() 返回 false](https://stackoverflow.com/questions/11966187/php-file-exists-for-url-robots-txt-returns-false)

这是第 22 行：`$f = fopen($file, 'r');`

我收到此错误：

```
PHP Error[2]: fopen(http://www1.macys.com/robots.txt): failed to open stream: Redirection limit reached, aborting
    in file /host/chapache/host/apache/www/home/flaviuspogacian/proiecte/Mickey_ClosetAffair_Discovery/webroot/protected/modules/crawler/components/Robots.php at line 22
#0 /host/chapache/host/apache/www/home/flaviuspogacian/proiecte/Mickey_ClosetAffair_Discovery/webroot/protected/modules/crawler/components/Robots.php(22): fopen() 
```

对于此代码，其中 $website_id 是一个数字， $website 就像[http://www.domain.com/](http://www.domain.com/)

```
public function read_website_save_2_db($website_id, $website) {
    $slashes = 0;
    for ($i = 0; $i < strlen($website); $i++)
        if ($website[$i] == '/')
            $slashes++;
    if ($slashes == 2)
        $file = $website . '/robots.txt';
    else
        $file = $website . 'robots.txt';
    echo $website_id . ' ' . $file . PHP_EOL;
    try {
        $f = fopen($file, 'r');
        if (($f) || (strpos(get_headers($file, 1), "404") !== FALSE)) {
            fclose($f);
            echo 'exists' . PHP_EOL;
            $curl_tool = new CurlTool();
            $content = $curl_tool->downloadFile($file, ROBOTS_TXT_FILES . 'robots_' . $website_id . '.txt');
            //if the file exists on local disk, delete it
            if (file_exists(ROBOTS_TXT_FILES . 'robots_' . $website_id . '.txt'))
                unlink(ROBOTS_TXT_FILES . 'robots_' . $website_id . '.txt');
            echo ROBOTS_TXT_FILES . 'robots_' . $website_id . '.txt', $content . PHP_EOL;
            file_put_contents(ROBOTS_TXT_FILES . 'robots_' . $website_id . '.txt', $content);
        }
    else {
        echo 'maybe it\'s not there' . PHP_EOL;
    }
} catch (Exception $e) {
    echo 'EXCEPTION ' . $e . PHP_EOL;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:45:24.583

您的部分代码看起来很混乱。我会做这样的事情（但当然不是从函数内部回显，它只是举例）

```
public function read_website_save_2_db($website_id, $website) {
  $url = rtrim($website, '/') . '/robots.txt';
  $content = @file_get_contents($url);
  $status = 0;
  $success = false;
  if( !empty($http_response_header) ) {
    foreach($http_response_header as $header) {
      if(substr($header, 0, 6) == 'HTTP/1') {
        $status = trim(substr($header, strpos($header, ' '), strlen($header)));
        $success = strnatcasecmp($status, '200 OK') === 0;
        break;
      }
    }
  }
  if(!$success) {
    echo 'Request failed with status '.$status;
  }
  elseif(!$content) {
    echo 'Website responded with empty robots.txt';
  }
  else {
    file_put_contents(ROBOTS_TXT_FILES . 'robots_' . $website_id . '.txt', $content);
    echo 'Wii, we have downloaded a copy of '.$url;
  }
} 
```

# php - 根据类型返回数组元素

> ID：11968521
> 
> 赞同：0
> 
> 时间：2012-08-15T11:32:10.123
> 
> 标签：php

我正在阅读有关 php 的书，这是打印数组元素的任务取决于它们的类型；所以我创建了数组`$arr = array (5, 'str', 4, 'str1', -100, 10);`，然后使用`foreach`语句我尝试打印整数元素

```
foreach ($arr1 as is_integer($arrelem)) 
    {
        print $arrelem;

    } 
```

但这给了我一个错误`Fatal error: Can't use function return value in write context in`。我确定算法有问题，但我需要有关如何理解这些算法的建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T11:33:37.427

`foreach ($arr1 as is_integer($arrelem))`不允许

像这样写：

```
foreach ($arr1 as $arrelem) {
    if (is_integer($arrelem)) {
        print "int:" . $arrelem;
    } else if (is_string($arrelem)) {
        print "string:" . $arrelem;
    } else {
        print "other:" . $arrelem;
    }
} 
```

如果这是用于调试，您也可以使用`var_dump`，它将为您提供变量的*类型*和*值*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T11:50:58.953

```
$integerValues = array_filter($array1,'is_integer');
$booleanValues = array_filter($array1,'is_bool'); 
```

ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:35:04.437

在关键字之后，它的语法不正确，因为您只能放置变量的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T11:45:09.747

你可以使用这个例子

```
$arr = array(5,'str',4,'str1',- 100,10); 
```

示例 1 - **Waygood**

```
foreach ($arr as $var) {
    print $var . ": ";
    echo gettype($var), "\n";
} 
```

示例 2

```
foreach ( $arr as $var ) {
    print $var . ": ";
    if (is_integer($var)) {
        if ($var < 0) {
            print "Negative Integer \n";
        } else {
            print "Positive Integer \n";
        }
    }
} 
```

# ruby-on-rails - Rails：使用关联时只获取一些项目（在 has_many 部分）

> ID：11968522
> 
> 赞同：0
> 
> 时间：2012-08-15T11:32:11.587
> 
> 标签：ruby-on-rails, associations

我使用关联来映射我的 Store 模型和我的 Product 模型，使用 Store`has_many :products`和 Product `belongs_to :store`。在这种情况下，我可以使用这个简单的代码简单地获取商店信息和商店的所有产品：

```
@store = Store.find_by_id params[:store_id] 
```

但是，我最近在产品中添加了一个**状态**字段。此状态默认设置为 ON，当用户想要销毁产品时，此状态设置为 OFF，而不是删除数据库中的产品。

但在这种情况下，在前面的代码中，我得到了所有产品（无论产品状态如何）。

问题：我怎样才能获得商店信息和只有：status => 'ON' 的产品？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:38:49.200

您可以为模型使用默认范围

```
class Product < ActiveRecord::Base
  default_scope where(status: "on")
end 
```

更新：

您可以像这样跳过默认范围：

```
@store.products.unscoped 
```

如果您不想使用默认范围，可以尝试以下操作：

```
@store.products.where(status: "on") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:57:42.383

您可以添加`:conditions => {:status => 'ON'}`到`has_many`

```
has_many :products, :conditions => {:status => 'ON'} 
```

但它只会显示“活跃”的产品`@store.products`

另一种方法是将命名范围添加到产品模型

```
scope :active, where(:status => 'ON') 
```

所以你可以得到所有的产品`@store.products`和“活跃”的产品`@store.products.active`

# asp.net - asp.net notifyIcon 带有声音的气球提示弹出窗口

> ID：11968525
> 
> 赞同：1
> 
> 时间：2012-08-15T11:32:22.520
> 
> 标签：asp.net, notifyicon, balloon

我正在使用`asp.net` `notifyIcon`Control 在带有窗口的状态栏中打开弹出`asp.net`窗口。我也想在弹出窗口中添加声音，但我无法添加。

有没有办法为 Windows 基础应用程序添加声音？

# jpa - 获取 EAGER 的问题

> ID：11968526
> 
> 赞同：0
> 
> 时间：2012-08-15T11:32:23.970
> 
> 标签：jpa

我使用 jpa hibernate 我尝试开发三个类：

但我有与获取 EAGER 类型相关的错误

```
@Entity
public class Request implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer requestId;
    private String detailRequest;

    private String place;

        @ManyToMany(mappedBy="requests",fetch=FetchType.EAGER)
    private List<Expertise> expertises;

...
//getter , setter and constructor
} 
```

专业知识.java

```
@Entity
public class Expertise implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
     @Id
     @GeneratedValue(strategy = GenerationType.AUTO)
    private int idExpertise;
    private String seniority;
    @ManyToMany(mappedBy="expertises",fetch=FetchType.EAGER)
    private List<TechnicalSkill> technicalSkills=new ArrayList<TechnicalSkill>();

    @ManyToMany
    private List<Request> requests=new ArrayList<Request>();

....
//getter , setter and constructor
} 
```

TechnicalSkill.java

```
@Entity
public class TechnicalSkill implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

     @Id
     @GeneratedValue(strategy = GenerationType.AUTO)
    private int idTechnicalSkill;
    private String description;
    @ManyToMany
    private List<Expertise> expertises=new ArrayList<Expertise>();

...
//getter , setter and constructor
} 
```

但是当我在 jboss 中运行这个类时，会显示这个错误

```
Caused by: org.hibernate.HibernateException: cannot simultaneously fetch multiple bags 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:00:10.887

这是因为专业实体中的 Eager fetch

```
 @ManyToMany(mappedBy="expertises",fetch=FetchType.EAGER)
    private List<TechnicalSkill> technicalSkills=new ArrayList<TechnicalSkill>(); 
```

删除 Eager fetch 即可。

# git - .idea 文件夹中的 gitignore 是什么？

> ID：11968531
> 
> 赞同：613
> 
> 时间：2012-08-15T11:32:40.517
> 
> 标签：git, intellij-idea, gitignore, webstorm

> **可能重复：**
> [Intellij Idea 9/10，要签入（或不签入）源代码控制的文件夹？](https://stackoverflow.com/questions/3041154/intellij-idea-9-10-what-folders-to-check-into-or-not-check-into-source-contro)

我开始使用 WebStorm 进行 Web 开发，但不确定从我们的 Git 存储库中添加什么以及排除什么。很明显，文件`.idea`夹中的一些文件应该像外部库设置（`jsLibraryMappings.xml`）一样受版本控制，但其他文件可能会经常更改并且是开发人员特定的（例如，`workspace.xml`）。

`.gitignore`WebStorm / IntelliJ IDEA的推荐模式是什么？

PS 对此已有疑问，但通常只关注是否包含整个`.idea`文件夹或是否完全排除它。我认为文件`.idea`夹中的某些文件应该受版本控制，而其他文件不应该受版本控制，我正在尝试找出哪些文件。

* * *

## 回答 #1

> 赞同：504
> 
> 时间：2012-08-15T11:41:29.220

[官方支持页面](https://intellij-support.jetbrains.com/hc/en-us/articles/206544839-How-to-manage-projects-under-Version-Control-Systems)应该会回答您的问题。

因此，在您的文件中，您可能会忽略以, 和and`.gitignore`结尾的文件。`.iws``workspace.xml``tasks.xml`

* * *

## 回答 #2

> 赞同：288
> 
> 时间：2015-05-02T04:58:56.313

我只想介绍一个更新的替代方案。有一个在线工具可以`.gitignore`根据您可能使用的操作系统、IDE 和编程语言生成文件。

[gitignore.io](http://www.gitignore.io)

* * *

**编辑**免责声明：不要复制此文件，而是复制网站生成的文件，他们在保持更新方面做得很好。这只是一个例子。

生成的文件`IntelliJ`包含以下内容

```
# Created by https://www.gitignore.io/api/intellij

### Intellij ###
# Covers JetBrains IDEs: IntelliJ, RubyMine, PhpStorm, AppCode, PyCharm, CLion, Android Studio and Webstorm
# Reference: https://intellij-support.jetbrains.com/hc/en-us/articles/206544839

# User-specific stuff:
.idea/workspace.xml
.idea/tasks.xml
.idea/dictionaries
.idea/vcs.xml
.idea/jsLibraryMappings.xml

# Sensitive or high-churn files:
.idea/dataSources.ids
.idea/dataSources.xml
.idea/dataSources.local.xml
.idea/sqlDataSources.xml
.idea/dynamic.xml
.idea/uiDesigner.xml

# Gradle:
.idea/gradle.xml
.idea/libraries

# Mongo Explorer plugin:
.idea/mongoSettings.xml

## File-based project format:
*.iws

## Plugin-specific files:

# IntelliJ
/out/

# mpeltonen/sbt-idea plugin
.idea_modules/

# JIRA plugin
atlassian-ide-plugin.xml

# Crashlytics plugin (for Android Studio and IntelliJ)
com_crashlytics_export_strings.xml
crashlytics.properties
crashlytics-build.properties
fabric.properties

### Intellij Patch ###
# Comment Reason: https://github.com/joeblau/gitignore.io/issues/186#issuecomment-215987721

# *.iml
# modules.xml 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2019-01-17T14:39:17.983

几年来，我一直支持将特定`.gitignore`的 IntelliJ 与[此建议配置](https://github.com/github/gitignore/blob/master/Global/JetBrains.gitignore)一起使用。

**不再。**

IntelliJ 更新非常频繁，内部配置文件规范的变化比我想要的更频繁，JetBrains 旗舰版擅长基于 maven/gradle/etc 构建文件自动配置自身。

所以我的建议是将**所有编辑器配置文件留在项目之外**，让用户根据自己的喜好配置编辑器。代码样式之类的东西可以而且应该在构建级别进行配置；说直接在 Maven/Gradle/sbt/etc 上使用**[Google Code Style](https://github.com/google/google-java-format)**或**[CheckStyle 。](http://checkstyle.sourceforge.net/)**

这确保了一致性，并将编辑器文件排除在源代码之外，在我个人看来，这是它们应该存在的地方。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2016-09-19T08:19:15.627

[https://www.gitignore.io/api/jetbrains](https://www.gitignore.io/api/jetbrains)

由[https://www.gitignore.io/api/jetbrains创建](https://www.gitignore.io/api/jetbrains)

```
### JetBrains ###
# Covers JetBrains IDEs: IntelliJ, RubyMine, PhpStorm, AppCode, PyCharm, CLion, Android Studio and Webstorm
# Reference: https://intellij-support.jetbrains.com/hc/en-us/articles/206544839

# User-specific stuff:
.idea/workspace.xml
.idea/tasks.xml
.idea/dictionaries
.idea/vcs.xml
.idea/jsLibraryMappings.xml

# Sensitive or high-churn files:
.idea/dataSources.ids
.idea/dataSources.xml
.idea/dataSources.local.xml
.idea/sqlDataSources.xml
.idea/dynamic.xml
.idea/uiDesigner.xml

# Gradle:
.idea/gradle.xml
.idea/libraries

# Mongo Explorer plugin:
.idea/mongoSettings.xml

## File-based project format:
*.iws

## Plugin-specific files:

# IntelliJ
/out/

# mpeltonen/sbt-idea plugin
.idea_modules/

# JIRA plugin
atlassian-ide-plugin.xml

# Crashlytics plugin (for Android Studio and IntelliJ)
com_crashlytics_export_strings.xml
crashlytics.properties
crashlytics-build.properties
fabric.properties

### JetBrains Patch ###
# Comment Reason: https://github.com/joeblau/gitignore.io/issues/186#issuecomment-215987721

# *.iml
# modules.xml
# .idea/misc.xml 
# *.ipr 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2019-02-24T01:01:09.420

Github 将以下 .gitignore 用于他们的程序

[https://github.com/github/gitignore/blob/master/Global/JetBrains.gitignore](https://github.com/github/gitignore/blob/master/Global/JetBrains.gitignore)

```
# Covers JetBrains IDEs: IntelliJ, RubyMine, PhpStorm, AppCode, PyCharm, CLion, Android Studio and WebStorm
# Reference: https://intellij-support.jetbrains.com/hc/en-us/articles/206544839

# User-specific stuff
.idea/**/workspace.xml
.idea/**/tasks.xml
.idea/**/usage.statistics.xml
.idea/**/dictionaries
.idea/**/shelf

# Generated files
.idea/**/contentModel.xml

# Sensitive or high-churn files
.idea/**/dataSources/
.idea/**/dataSources.ids
.idea/**/dataSources.local.xml
.idea/**/sqlDataSources.xml
.idea/**/dynamic.xml
.idea/**/uiDesigner.xml
.idea/**/dbnavigator.xml

# Gradle
.idea/**/gradle.xml
.idea/**/libraries

# Gradle and Maven with auto-import
# When using Gradle or Maven with auto-import, you should exclude module files,
# since they will be recreated, and may cause churn.  Uncomment if using
# auto-import.
# .idea/modules.xml
# .idea/*.iml
# .idea/modules

# CMake
cmake-build-*/

# Mongo Explorer plugin
.idea/**/mongoSettings.xml

# File-based project format
*.iws

# IntelliJ
out/

# mpeltonen/sbt-idea plugin
.idea_modules/

# JIRA plugin
atlassian-ide-plugin.xml

# Cursive Clojure plugin
.idea/replstate.xml

# Crashlytics plugin (for Android Studio and IntelliJ)
com_crashlytics_export_strings.xml
crashlytics.properties
crashlytics-build.properties
fabric.properties

# Editor-based Rest Client
.idea/httpRequests

# Android studio 3.1+ serialized cache file
.idea/caches/build_file_checksums.ser 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-09-15T19:56:43.197

`.idea/*`您可以通过添加到`.gitignore`文件中简单地忽略所有这些。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-21T07:13:13.517

就我而言，`/**/.idea/*`效果很好

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-08-23T11:54:45.357

如[支持页面](https://intellij-support.jetbrains.com/hc/en-us/articles/206544839-How-to-manage-projects-under-Version-Control-Systems)所述，从 2019.1 版本开始，IntelliJ 能够[自动](https://www.jetbrains.com/help/idea/creating-and-managing-projects.html#share-project-through-vcs)将需要共享的所有内容添加到版本控制中。

这很棒，因为 IDE 将分两步将必要的文件添加到 Git：

1.  使用 IntelliJ 打开项目并稍等片刻，直到右下角出现以下弹出窗口
2.  选择“始终添加”

[![IntelliJ 菜单弹出窗口说](../Images/7b5d221f162d8a2ab479325dc46b2538.png)](https://i.stack.imgur.com/nqmSF.png)

或者，您可以选择“查看文件”，然后手动添加它们。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2020-05-04T01:02:48.837

虽然维护正确的`.gitignore`文件很有帮助，但我发现这种替代方法更清洁且更易于使用。

*   创建虚拟文件夹`my_project`并在其中创建`git clone my_real_project`实际的项目存储库。
*   现在，在 IDE（Intellij/Pycharm）中打开项目时，打开文件夹`my_project`并标记`my_project/my_real_project`为 VCS 根目录。
*   您可以看到`my_project/.idea`不会污染您的 git 存储库，因为它愉快地存在于您想要的 git 存储库之外。这样你的`.gitignore`文件也保持干净。

由于以下原因，这种方法效果更好。

1 -`.gitignore`文件保持干净，我们不必插入与 JetBrains 产品相关的行，该文件更适合用于二进制文件和库以及 autogen 内容。

2 - Intellij 不断更新他们的项目，其中的文件`.idea`不断更改 JB 的每个重要版本。这意味着我们必须不断更新我们的`.gitignore`相应内容，这不是理想的时间利用方式。

3 - Intellij 在这里有缺陷的模式，大多数编辑器 Atom、VS Code、Eclipse ......没有人将他们的 IDE 内容直接存储在项目根目录中。JB也不应该是个例外。Jetbrains 有责任在项目根目录之外跟踪这些文件。他们必须避免污染 VCS 根。这种方法就是这样做的。该`.idea`文件夹保存在外部`PROJECT_ROOT`

希望这可以帮助。

* * *

## 回答 #10

> 赞同：-7
> 
> 时间：2017-06-07T04:07:55.887

*   删除 .idea 文件夹

    ```
    $rm -R .idea/ 
    ```

*   添加规则

    ```
    $echo ".idea/*" >> .gitignore 
    ```

*   提交 .gitignore 文件

    ```
    $git commit -am "remove .idea" 
    ```

*   下一次提交就可以了

# sql - 关键字 TSQL 之间的分组

> ID：11968533
> 
> 赞同：1
> 
> 时间：2012-08-15T11:32:53.617
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2008-r2

**问题**

我导入了一个电子表格，其中包含与子项位于同一列的父组数据。我想为组添加提取列，如下所示。

**创建表**

```
DECLARE @Fruit TABLE
    (
      ProductID INT IDENTITY(1, 1)
                    PRIMARY KEY ,
      FruitName NVARCHAR(20) ,
      FruitCost MONEY
    )

INSERT  INTO @fruit
        ( FruitName, FruitCost )
VALUES  ( 'Berry', NULL )
INSERT  INTO @fruit
        ( FruitName, FruitCost )
VALUES  ( 'BlueBerry', 2 )
INSERT  INTO @fruit
        ( FruitName, FruitCost )
VALUES  ( 'StrawBerry', 2 )
INSERT  INTO @fruit
        ( FruitName, FruitCost )
VALUES  ( 'Citrus', NULL )
INSERT  INTO @fruit
        ( FruitName, FruitCost )
VALUES  ( 'Lemon', 2 )
INSERT  INTO @fruit
        ( FruitName, FruitCost )
VALUES  ( 'Orange', 2 )

SELECT  *
FROM    @Fruit 
```

**表结果**

```
ProductID   FruitName            FruitCost
----------- -------------------- ---------------------
1           Berry                NULL
2           BlueBerry            2.00
3           StrawBerry           2.00
4           Citrus               NULL
5           Lemon                2.00
6           Orange               2.00 
```

**所需结果**

```
FruitName            FruitCost             FruitGroup
-------------------- --------------------- --------------------
BlueBerry            2.00                  Berry
StrawBerry           2.00                  Berry
Lemon                2.00                  Citrus
Orange               2.00                  Citrus 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:41:14.650

试试这个

```
select
    f3.FruitName, f3.FruitCost, f.FruitName
from
    @Fruit f
        inner join
    (
        SELECT  *,
        (Select max(productid) from @Fruit f2 where FruitCost is null and ProductID<=f.ProductID) as fgroup
        FROM    @Fruit f
    ) f3
        on f.ProductID = f3.fgroup
where f3.FruitCost is not null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:56:39.343

```
select t.FruitName,t.FruitCost,  
(select FruitName from @fruit t2
  where t2.ProductId in 
  (
    select max(t3.ProductId) from 
    @fruit t3 
    where (t3.FruitCost is null) and (t3.ProductId<t.ProductId)
   )

) FruitGroup
from @Fruit t where (t.FruitCost is not null) 
```

# c# - 从 wpf 文本框中的 characterIndex 获取一个点

> ID：11968543
> 
> 赞同：0
> 
> 时间：2012-08-15T11:33:48.697
> 
> 标签：c#, wpf, textbox

我在 WPF 文本框中使用自定义插入符号，我想从 characterIndex 或 caretIndex 中获取 Point(x,y)。有一种方法可以将点（x，y）转换为字符索引（getCharacterIndexfromPoint），但是有没有办法反过来呢？

# android - 操作系统的语言可能会导致 Android SDK 安装出现问题？

> ID：11968554
> 
> 赞同：1
> 
> 时间：2012-08-15T11:34:32.543
> 
> 标签：android, android-emulator, operating-system

以前我要求安装 Android SDK，这让我遇到了麻烦，因为我无法解析它。您可以在[这里](https://stackoverflow.com/questions/9319195/android-sdk-failed-to-install)查看问题，现在我要说的新内容是，在安装 OS 窗口 7 时，我选择了 OS 的语言为“HINDI”。现在我认为问题是由于相同的。问题是因为我选择了印地语吗？

您可以在下面看到问题的图像 -

![在此处输入图像描述](../Images/4be8ed3ca4b8bf927fc52bde887f71fb.png)

帮我解决Android SDK安装问题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:51:40.747

我认为这不是主要问题，但这可能是导致您的 SDK 安装失败的问题。我建议你改变你的操作系统。

# javascript - 从Javascript中的字符串中提取一部分

> ID：11968555
> 
> 赞同：0
> 
> 时间：2012-08-15T11:34:33.283
> 
> 标签：javascript, string

我有一个这样的字符串`LatLng(41.3371, 19.81717)`存储在变量中`a` 但我只需要这个数字`41.3371`来进行一些进一步的计算。关于如何提取号码的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:38:08.443

使用正则表达式可以做到`/^LatLng\((\d+\.\d+), (\d+\.\d+)\)$/`。

**使用 javascript：**

```
console.log('LatLng(41.3371, 19.81717)'.match(/^LatLng\((\d+\.\d+), (\d+\.\d+)\)$/)[1]);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:39:20.363

使用正则表达式

```
<div id="res"></div>
<script type="text/javascript">
    var res = document.getElementById('res'),
        re = /\((\d+\.\d+),\s*(\d+\.\d+)\)/,
        str = 'LatLng(41.3371, 19.81717)',
        m = str.match(re);
    res.innerHTML = 'x = ' + m[1] + ' and y = ' + m[2];
</script> 
```

​</p>

[**​演示**](http://jsfiddle.net/f0t0n/ZZbV7/)[](http://jsfiddle.net/f0t0n/ZZbV7/)

# c - 如何在终端输入EOF的值

> ID：11968558
> 
> 赞同：39
> 
> 时间：2012-08-15T11:34:38.710
> 
> 标签：c

我有一个 C 程序。

```
int main ()
{
    if (getchar()!=EOF)
        puts("Got a character");
    else
        puts("EOF");
} 
```

我应该在终端上的标准输入中输入什么来生成 EOF？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-15T11:45:47.970

在 Windows 中，`Control+Z`是表示“文件结束”的典型键盘快捷键，在 Linux 和 Unix 中，它通常是`Control+D`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-15T11:47:54.367

1.  EOF 被包裹在一个宏中是有原因的——你永远不需要知道这个值。
2.  在命令行中，当您运行程序时，您可以使用`Ctrl`- `D`(Unix) 或`CTRL`- `Z`(Microsoft) 将 EOF 发送到程序。
3.  要确定 EOF 在您的平台上的价值，您可以随时打印它：

    ```
    printf ("%i\n", EOF); 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-15T11:39:53.567

您可以使用以下命令模拟 EOF：

*   窗户：`ctrl`+`Z`
*   Unix: `ctrl`+`D`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-18T21:03:10.210

It's not mentioned in any of the other answers so far, but you may need to press the right key combo (^D or ^Z) 2 or 3 times in order to actually signal EOF; [see here](https://stackoverflow.com/questions/37959469/understanding-how-eof-and-ctrl-d-work) for explanation.

# android - 加快字体更换

> ID：11968559
> 
> 赞同：0
> 
> 时间：2012-08-15T11:34:40.573
> 
> 标签：android, performance, fonts

有什么方法可以加快字体的加载速度，因为我的活动加载速度比以前慢，因为我已经实现了更改字体的代码？我为我的应用程序中的每个活动更改字体并使用 3 种不同的字体。我在资产文件夹中有我的字体。我的代码示例是：

```
Typeface fontTitle;
static final String fTitle = "MStiffHeiHK-UltraBold.otf";

fontTitle = Typeface.createFromAsset(getAssets(), fTitle);  
txTitle.setTypeface(fontTitle); 
```

等等...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:39:14.377

您可以创建一个处理字体的类，然后在其中使用如下方法：

```
public static Typeface getFont(Context context) {
    if(mFont != null) {
        return mFont;
    } else {
        mFont = Typeface.createFromAsset(context.getAssets(), fTitle);
    }
} 
```

您的 mFont 应该是静态的。

为了最小的性能提升，你应该让方法结束，但除此之外，我认为你不能提高速度。

# sql-server - 如何优化这个查询？

> ID：11968560
> 
> 赞同：2
> 
> 时间：2012-08-15T11:34:41.957
> 
> 标签：sql-server, optimization

工作表中有 100 万条记录。以下查询的执行时间为 30 秒。该查询并不优雅，它将返回符合条件的记录数。请帮我优化。

```
DECLARE @MaxIdValue varchar(100)
DECLARE @SerchFilter varchar(100) = 'test'
DECLARE @TotalRowCount int = ( SELECT 
Count(*) AS [RowCount]
FROM 
[Jobs]
INNER JOIN [Sites] ON [Jobs].[SiteId] = [Sites].[Id]  
INNER JOIN [JobStatusHistory] ON [Jobs].[JobStatusHistoryId] = [JobStatusHistory].[Id]  
INNER JOIN [JobStatuses] ON [JobStatusHistory].[StatusId] = [JobStatuses].[Id]  
INNER JOIN [JobTypes] ON [Jobs].[JobTypeId] = [JobTypes].[Id]  
LEFT JOIN [Customers] ON [Jobs].[CustomerId] = [Customers].[Id]  
LEFT JOIN [Priorities] ON [Jobs].[PriorityId] = [Priorities].[Id]  
LEFT JOIN [TaskTypes] ON [Jobs].[TaskTypeId] = [TaskTypes].[Id]  
LEFT JOIN [Areas] ON [Sites].[AreaId] = [Areas].[Id]  
WHERE
( 
 [Sites].[Active]=1
 AND 
   (
    [Jobs].[OwnedByCompanyId]=18
      OR  
    [Jobs].[OwnedByCompanyId] = 0)
      AND 
    [Jobs].[Active]=1
   ) 
 AND 
   ( 
  [Customers].[Name] LIKE '%'+@SerchFilter+'%'
 OR 
   [Sites].[Name] LIKE  '%'+@SerchFilter+'%'
   OR 
 [Sites].[Address1] LIKE  '%'+@SerchFilter+'%'
    OR 
  [Sites].[Postcode] LIKE  '%'+@SerchFilter+'%'
 OR 
  [Sites].[UPRN] LIKE  '%'+@SerchFilter+'%'
 OR 
 [Sites].[Contact] LIKE  '%'+@SerchFilter+'%'
     OR 
 [Sites].[Telephone] LIKE  '%'+@SerchFilter+'%'
   OR 
 [Sites].[Work] LIKE  '%'+@SerchFilter+'%'
 OR 
  [Sites].[MobileNumber] LIKE  '%'+@SerchFilter+'%'
  OR 
  [Areas].[Description] LIKE  '%'+@SerchFilter+'%'
    OR 
   [Jobs].[Id] LIKE  '%'+@SerchFilter+'%'
  OR 
  [Jobs].[OrderNumber] LIKE  '%'+@SerchFilter+'%'
   OR 
   [Jobs].[Description_PlainText] LIKE  '%'+@SerchFilter+'%'
  OR 
   [Jobs].[JobNumber] LIKE  '%'+@SerchFilter+'%'
  OR 
  [JobTypes].[Description] LIKE  '%'+@SerchFilter+'%'
   OR 
  [TaskTypes].[Description] LIKE  '%'+@SerchFilter+'%'
     OR 
   [Priorities].[Description] LIKE  '%'+@SerchFilter+'%'
    ) 
  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:40:15.953

优化将是用`'%'+@SerchFilter+'%'`替换`@SerchFilter+'%'`。

where 子句`'%'+@SerchFilter+'%'`阻止使用索引查找。

编辑：

您真的需要一次过滤所有这些字段吗？如果它不是一个数字，为​​什么还要费心在该`Telephone`领域搜索。

如果您使用的是 SQL Server 2005 或更高版本，您可以考虑使用[FullText-Search](http://msdn.microsoft.com/en-us/library/ms142571.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:54:20.877

您可能想要使用更多索引和全文目录。

如果您使用的是 MS SQL 2008，您可以检查执行计划中是否缺少索引。同样从这里你可以看到为什么它需要这么长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T12:14:50.323

假设您的连接列已被适当索引，我怀疑问题出在众多 LIKE 上。不幸的是，这些都是相当昂贵的数据库操作。

做了类似的事情后，我相信您可以通过执行以下操作来获得更好的性能：

```
SELECT COUNT(*) FROM ... WHERE COL1 + COL2 + COL3 + COL4 + COL5 LIKE '%SEARCH%' 
```

而不是：

```
SELECT COUNT(*) FROM ... WHERE 
COL1 LIKE '%SEARCH%' 
OR COL2 LIKE '%SEARCH%'
OR COL3 LIKE '%SEARCH%'
OR COL4 LIKE '%SEARCH%'
OR COL5 LIKE '%SEARCH%' 
```

# trac - 跟踪工单类型修改不会改变工作流程

> ID：11968561
> 
> 赞同：0
> 
> 时间：2012-08-15T11:34:44.093
> 
> 标签：trac

我有两种票证类型“新”和“更新”，每种都有不同的工作流程。如何在 trac.ini 文件中实现，如果修改了工单类型，工作流也会更改以匹配类型。无论“错误”工作流中的当前阶段如何，在更新时都应将其修改为工作流的第一阶段。使用 trac 版本 0.12.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:56:12.447

序言：将工单类型命名为“新”并不是最明智的主意，因为这会与工单状态“新”相冲突，因此相当令人困惑——你明白吗？

您的要求听起来很合理，但我仍然不知道任何可以实现这一点的配置。默认情况下，Trac 提供保持无效票证状态不变**或**修复它。所以如果不改变现有的 Trac 核心代码，或者安装一个 Trac 插件，几乎等同于前者，这是无法做到的。

Trac 的模块化[组件架构](http://trac.edgewall.org/wiki/TracDev/ComponentArchitecture)非常适合以相当小的工作量做到这一点。总而言之，听起来[ITicketManipulator](http://trac.edgewall.org/wiki/TracDev/PluginDevelopment/ExtensionPoints/trac.ticket.api.ITicketManipulator)接口的实现将是正确的选择。您不需要关心时间 - 它会在每次工单更改时触发 - 只需确定有趣的条件和适当的操作，并且实现“在类型更改时设置工作流开始”应该相当容易。

提示：每个 'ticket' 实例应该是一个`Ticket`类对象，并且在内部具有当前（可能已更改）以及旧（最后存储）值。不要再往里看`trac.ticket.model`，以找出如何/在哪里可以在该对象内找到它。

# java - 如何以分布式方式处理耗时的任务？

> ID：11968568
> 
> 赞同：3
> 
> 时间：2012-08-15T11:35:22.297
> 
> 标签：java, distribution, distributed-computing

我们需要通过多个节点处理需要大量时间的任务（解析巨大的 xml 文件并将数据插入数据库）。节点不会很多，我们甚至会从单个节点开始。

这些文件将从 FTP 读取。该作业将被安排并每天进行一次。什么是分配处理的好方法？

我目前的草稿想法是：

*   使用 hazelcast 分布式`ConcurrentMap`- 它处理场景背后的地图同步
*   每个节点获取整个文件列表并将其打乱
*   然后每个节点迭代列表，使用`.putIfAbsent(..)`- 如果文件不在地图中，则处理它。如果它在地图中，则表示另一个节点正在处理它，因此请尝试下一个文件。

那样：

*   节点永远不会空闲
*   如果一个节点发生故障，其他节点仍将处理所有内容（只是速度较慢）
*   由于文件很大并且处理它们需要大量时间，因此`.putIfAbsent(..)`调用和底层同步中的争用开销很小（改组也旨在改善这一点）
*   它需要最少的配置，不需要安装和管理其他服务（如消息队列）

我不确定这是否是最好的方法。可以吗？有什么可以改进的？有更好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:56:18.850

根据您的评论，我建议考虑使用 JMS，（例如我发现使用/开发最简单的 ActiveMQ）

它可以是独立的、冗余的和/或嵌入式的。

您可以将消息添加到队列并从任意数量的节点消费。关闭自动提交后，失败的节点消息会自动返回到队列中。

# c# - 将 Double 转换为 DateTime？

> ID：11968570
> 
> 赞同：11
> 
> 时间：2012-08-15T11:35:29.537
> 
> 标签：c#, excel, datetime, datetime-format

我有一个正在读入 C# 程序的 .CSV 文件。在其中一列中，有一个日期，但它是“通用”格式，因此它在 .CSV 中显示为一个数字。例如：41172。

如何在 C# 中将此数字转换为 dd/mm/yyyy 格式的日期？41172 相当于 20/09/2012。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-15T11:53:58.377

要从“Excel 格式”的 DateTime 转换为 C# Date Time，您可以使用[DateTime.FromOADate](http://msdn.microsoft.com/en-us/library/system.datetime.fromoadate.aspx)函数。

在上面的示例中：

```
 DateTime myDate = DateTime.FromOADate(41172); 
```

要将其写出来以所需格式显示，请使用：

```
 myDate.ToString("dd/MM/yyyy"); 
```

如果您想知道 Excel 日期处理中的差异来自哪里，它应该是故意的：

> 当 Lotus 1-2-3 首次发布时，该程序假定 1900 年是闰年，尽管它实际上不是闰年。这使程序更容易处理闰年，并且对 Lotus 1-2-3 中的几乎所有日期计算没有任何损害。
> 
> 当 Microsoft Multiplan 和 Microsoft Excel 发布时，他们还假设 1900 年是闰年。这允许 Microsoft Multiplan 和 Microsoft Excel 使用 Lotus 1-2-3 使用的相同序列日期系统，并提供与 Lotus 1-2-3 的更大兼容性。将 1900 年视为闰年也使用户更容易将工作表从一个程序移动到另一个程序。
> 
> 尽管在技术上可以纠正这种行为，以便当前版本的 Microsoft Excel 不会假定 1900 年是闰年，但这样做的弊大于利。

资料来源：[http ://www.ozgrid.com/Excel/ExcelDateandTimes.htm](http://www.ozgrid.com/Excel/ExcelDateandTimes.htm)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-15T11:42:47.160

编辑：正如评论和其他答案中所述，[`DateTime.FromOADate`](http://msdn.microsoft.com/en-us/library/system.datetime.fromoadate.aspx)是一种更好的方法。如果它不被接受，我会删除这个答案。（但是，仍有一些平台，如 .NET Core`FromOADate`不受支持，因此它对使用这些平台的人仍然有用。）

我怀疑你想要：

```
DateTime date = new DateTime(1900, 1, 1).AddDays(days - 2); 
```

（请参阅其他答案，了解为什么需要减去 2。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-26T06:49:57.727

如果您在 .Net Core 中寻找`FromOADate`它不存在。

我分解了 .Net Framework 的实现并创建了一个扩展方法。

```
 public static DateTime FromOADate(this double date)
        {
            return new DateTime(DoubleDateToTicks(date), DateTimeKind.Unspecified);
        }

        internal static long DoubleDateToTicks(double value)
        {
            if (value >= 2958466.0 || value <= -657435.0)
                throw new ArgumentException("Not a valid value");
            long num1 = (long)(value * 86400000.0 + (value >= 0.0 ? 0.5 : -0.5));
            if (num1 < 0L)
                num1 -= num1 % 86400000L * 2L;
            long num2 = num1 + 59926435200000L;
            if (num2 < 0L || num2 >= 315537897600000L)
                throw new ArgumentException("Not a valid value");
            return num2 * 10000L;
        } 
```

还是需要测试一下。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T11:52:36.713

Excel 使用的日期格式较旧，但仍受[DateTime.FromOADate](http://msdn.microsoft.com/en-us/library/system.datetime.fromoadate.aspx)函数支持，您可以使用该函数转换此数字。它被定义为

> 基准日期 1899 年 12 月 30 日午夜之前或之后的天数

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-15T11:54:49.757

我从 MSDN 看到了这个：http: [//msdn.microsoft.com/en-us/library/system.datetime.fromoadate.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.fromoadate.aspx)，但我实际上认为这是错误的。

真正的问题是 Excel 错误地认为世纪年（1900 年）是闰年，而实际上不是，而是 2000 年是闰年！

要检查这一点，请尝试将 Excel 中的单元格格式化为日期，然后输入`1`并给出`1 Jan 1900`. 现在输入`59`，它给出了`28 Feb 1900`. `60`给出`29 Feb 1900`（不是真正的日期），然后`61`给出`01 March 1900`.

所以...

```
switch (days)
{
   case < 1:
     // Not valid. Do whatever...
   break;
   case < 59:
     DateTime date = new DateTime(1900, 1, 1).AddDays(days);
   break;
   default:
     // Knock off the extra days caused by 29 Feb 1900 and 29 Feb 2000
     DateTime date = new DateTime(1900, 1, 1).AddDays(days-2);
   break;
} 
```

# jquery - 整个表可单击而不是 WEBGRID 中的单行的问题

> ID：11968571
> 
> 赞同：0
> 
> 时间：2012-08-15T11:35:32.470
> 
> 标签：jquery, asp.net-mvc-3

我已更改我的应用程序以合并前端更改。我现在已经创建了表，在这些表中，我有 @RenderBody()

当我的 webgrid 显示在我的屏幕上时，整个屏幕变得可点击，而不仅仅是 WEBGRID 中的单个行。

这是使用的_InitLayout。请参阅 RenderBody() 部分。它在表内调用。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">

    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>@ViewBag.Title</title>
        <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
        <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script> 
        <script src="@Url.Content("~/Scripts/jquery-ui-1.8.18.custom.min.js")" type="text/javascript"></script>                  
        <link href="@Url.Content("~/Content/jquery-ui-1.8.18.custom.css")" rel="stylesheet" type="text/css" />      

    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/png"  href='@Url.Content("~/Content/favicon.png")' />

    </head>

    <body>
            <div onload="MM_preloadImages('@Url.Content("~/Content/images/buttons/signup2.jpg")','@Url.Content("~/Content/images/buttons/logon2.jpg")'">
                <table width="980" border="0" align="center" cellpadding="0" cellspacing="0">
                    <tr>
                    <td class="tdfrontend" colspan="2"><img src='@Url.Content("~/Content/images/interface/header.jpg")' alt="header" width="1000" height="105" /></td>
                    </tr>
                    <tr>
                    <td class="tdfrontend" colspan="2" bgcolor="#FFFFFF">
                    <table width="1000" border="0" cellspacing="0" cellpadding="0">
                      <tr>
                        <td class="tdfrontend">
                        <table width="1000" border="0" cellspacing="0" cellpadding="0">
                          <tr>
                            <td class="tdfrontend" width="700">
                            <table width="365" border="0" cellspacing="0" cellpadding="0">
                              <tr>
                                <td class="tdfrontend" width="18" align="center" valign="middle">&nbsp;</td>
                                <td class="tdfrontend" align="center" valign="middle"><span class="style3"><a href="/" style="text-decoration:none">Home</a></span>&nbsp;</td>
                                <td class="tdfrontend" align="center" valign="middle"><img src='@Url.Content("~/Content/images/interface/lineup.jpg")' alt="linup" width="3" height="22" /></td>
                                <td class="tdfrontend" align="center" valign="middle">&nbsp;<span class="style3">@Html.ActionLink("Browse All Projects", "AllProjectsHeaderSR", "Projects", "",new { @style = "text-decoration:none" } )</span>&nbsp;</td>
                                <td class="tdfrontend" align="center" valign="middle"><img src='@Url.Content("~/Content/images/interface/lineup.jpg")' alt="linup" width="3" height="22" /></td>
                                <td class="tdfrontend" align="center" valign="middle">&nbsp;<span class="style3">@Html.ActionLink("Search Projects", "SearchProjectsSR", "Projects", "",new { @style = "text-decoration:none" })</span>&nbsp;</td>
                                <td class="tdfrontend" align="center" valign="middle"><img src='@Url.Content("~/Content/images/interface/lineup.jpg")' alt="linup" width="3" height="22" /></td>
                                <td class="tdfrontend" align="center" valign="middle">&nbsp;<span class="style3">@Html.ActionLink("How It Works", "HowItWorks", "Home", "",new { @style = "text-decoration:none" })</span>&nbsp;</td>
                                <td class="tdfrontend" align="center" valign="middle"><img src='@Url.Content("~/Content/images/interface/lineup.jpg")' alt="linup" width="3" height="22" /></td>
                              </tr>
                            </table></td>
                            <td class="tdfrontend" width="300" align="right" valign="middle">
                            <table width="300" border="0" cellspacing="0" cellpadding="0">
                              <tr>
                                <td class="tdfrontend" width="221" align="right"><a href="@Url.Action("LogOn","Account")" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('logon','','@Url.Content("~/Content/images/buttons/logon2.jpg")',1)"><img src='@Url.Content("~/Content/images/buttons/logon1.jpg")' name="logon" width="80" height="19" border="0" id="logon" /></a></td>
                                <td class="tdfrontend" width="79" align="right"><a href="@Url.Action("Register", "Account")" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('signup','','@Url.Content("~/Content/images/buttons/signup2.jpg")',1)"><img src='@Url.Content("~/Content/images/buttons/signup1.jpg")' name="signup" width="79" height="19" border="0" id="signup" /></a></td>
                              </tr>
                            </table></td>
                          </tr>
                        </table>
                        </td>
                      </tr>
                    </table>
                    </td>
                    </tr>
                  <tr>
                    <td class="tdfrontend" colspan="2" align="center" valign="top" bgcolor="#FFFFFF"><img src='@Url.Content("~/Content/images/interface/line.jpg")' alt="ling" width="1000" height="4" /></td>
                  </tr>
                  </table>
            </div>   

        <div id="container">
            <div id="col1"> 
                @RenderSection("SideBar1", required: false)
            </div> 
            <div id="col2outer1"> 
                <div id="col2mid1">                    
                  <table width="980" border="0" align="center" cellpadding="0" cellspacing="0">
                  <tr>
                    <td class="tdfrontend" width="600" align="left" valign="top" bgcolor="#FFFFFF">
                    <table width="600" border="0" cellspacing="10" cellpadding="10">
                      <tr>
                        <td>
                            @RenderBody()
                        </td>
                      </tr>
                    </table>
                    <h2>&nbsp;</h2>
                    <table width="600" height="100%" border="0" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="tdfrontend" align="left" valign="top">&nbsp;</td>
                        </tr>
                    <tr>
                      <td class="tdfrontend">
                      <table width="100%" border="0" cellpadding="3" cellspacing="3" bgcolor="#CCCCCC">
                        <tr>
                          <td class="tdfrontend" height="150" align="center" valign="middle"><img src='@Url.Content("~/Content/images/pics/it_pic1.jpg")' alt="it pic1" width="96" height="100" /></td>
                          <td class="tdfrontend" align="center" valign="middle"><img src='@Url.Content("~/Content/images/pics/it_pic2.jpg")' alt="it pic2" width="158" height="100" /></td>
                          <td class="tdfrontend" align="center" valign="middle"><img src='@Url.Content("~/Content/images/pics/it_pic3.jpg")' alt="it pic 3" width="157" height="100" /></td>
                          <td class="tdfrontend" align="center" valign="middle"><img src='@Url.Content("~/Content/images/pics/it_pic4.jpg")' alt="it pic 4" width="131" height="100" /></td>
                        </tr>
                      </table>
                      </td>
                    </tr>
                   </table>
                   </td>

                <td class="tdfrontend" width="400" align="left" valign="top" bgcolor="#FFFFFF"><table width="400" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td class="tdfrontend"><img src='@Url.Content("~/Content/images/interface/blu_header.jpg")' alt="blu_header" width="400" height="34" /></td>
                    </tr>
                    <tr>
                        <td class="tdfrontend" align="left" valign="top" background='@Url.Content("~/Content/images/interface/blu_bg.jpg")'><table width="400" border="0" cellspacing="15" cellpadding="3">
                            <tr>
                            <td class="tdfrontend"><p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                                <p>populate info hieght controlled </p>
                            </td>
                            </tr>
                        </table>
                            <p>&nbsp;</p>
                        <p>&nbsp;</p></td>
                    </tr>
                    <tr>
                        <td class="tdfrontend"><img src='@Url.Content("~/Content/images/interface/blu_footer.png")' alt="blu_footer" width="400" height="23" /></td>
                    </tr>
                    </table></td>
                </tr>
                <tr>
                <td class="tdfrontend" colspan="2" align="center" valign="top" bgcolor="#1780BA">
                <table width="980" border="0" cellspacing="0" cellpadding="3">
                    <tr>
                    <td class="tdfrontend" width="100" class="news"><span class="footer_text">&copy; Copyright 2012 GrepTech.co.za</span></td>
                    <td class="tdfrontend" width="466" align="right" valign="middle" class="footer_text">
                        @Html.ActionLink("Privacy Policy", "PrivacyPolicy", "Home", "", new { style = "color:#FFFFFF", target = "_blank" }) 
                        &nbsp; 
                        &nbsp; 
                        @Html.ActionLink("Terms & Conditions", "TermsConditions", "Home", "", new { style = "color:#FFFFFF", target = "_blank" })    
                        &nbsp; 
                        &nbsp;
                        @Html.ActionLink("Advertise", "Advertise", "Home", "", new { style = "color:#FFFFFF" })
                        &nbsp;
                        &nbsp;
                        @Html.ActionLink("Contact Us", "ContactUs", "Home", "", new { style = "color:#FFFFFF", target = "_blank" })
                        </td>
                    </tr>
                </table>
                </td>
                </tr>
            </table>
            <p>&nbsp;</p>

            </div>
            <div id="col2side1"> 
                @RenderSection("SideBar2", required: false) 
            </div> 
         </div>
            <br />
        </div>
    </body>
    </html> 
```

这是我对 WEBGRID 的看法：

```
 @model mvc1.Models.ProjectHeaderModelList 

    @{ 
        if (ViewBag.userTypeID == null) 
        { 
            Layout = "~/Views/Shared/_InitLayout.cshtml"; 

        } 
        else if (ViewBag.userTypeID == "SP") 
        { 
            Layout = "~/Views/Shared/_SPLayout.cshtml";              
        } 
        else if (ViewBag.userTypeID == "SR") 
        { 
            Layout = "~/Views/Shared/_SRLayout.cshtml";              
        } 
    } 

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script> 
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 

    @{ 
        ViewBag.Title = "All Projects"; 
    } 

    @section SideBar1 { 
                        <p> 
                        </p> 
    } 

    @section SideBar2 { 
                                <p> 
                                </p>  

    } 

    @{ 
        if (ViewBag.userName != null) 
        { 
            <div align="right"><font color="#000000" size="2">User: @ViewBag.userName  is logged in</font></div> 
        } 
    }             

    @{ 
        if (ViewBag.Message != null) 
        { 
            <p><font color="red">@ViewBag.Message </font></p> 
        } 
    } 

    @{ 
        var grid = new WebGrid(Model, 
                               rowsPerPage: 5, 
                               defaultSort: "projectStatus"); 
    } 

    @using (Html.BeginForm()) 
    { 
        if (ViewBag.userName != null) 
        { 
            <br /> 
        } 

        if (ViewBag.userTypeID == null) 
        { 
            <br /> 
            <p> @Html.ActionLink("Log On", "LogOn", "Account") to GrepTech or @Html.ActionLink("Register", "Register", "Account") if you don't have an account. 
            </p> 
        } 

    <fieldset> 
      <legend>List Of All Projects</legend> 
      <br /> 
    <div id="grid"> 

        @grid.GetHtml(columns: grid.Columns( 
                        grid.Column("projectCode", "Project Code", canSort: true), 
                        grid.Column("projectName", "Project Name", canSort: true), 
                        grid.Column("projectCreationDate", header: "Created Date", format: @<text>@item.projectCreationDate.ToString("dd-MMM-yyyy")</text>, canSort: true), 
                        grid.Column("projectEndDate", header: "Bidding Expiry Date", format: @<text>@item.projectEndDate.ToString("dd-MMM-yyyy")</text>, canSort: true), 
                        grid.Column("projectStatus", "Project Status", canSort: true), 
                        grid.Column("daysLeft", "Days Remaining", canSort: true)), 
            tableStyle: "webgrid", 
            headerStyle: "webgrid-header", 
            footerStyle: "webgrid-footer", 
            selectedRowStyle: "webgrid-selected-row", 
            rowStyle: "webgrid-row-style")     
    </div>   

    <script type="text/javascript"> 
        $(function () { 
            $('tbody tr').on('hover', function () { 
                $(this).toggleClass('clickable'); 
            }).on('click', function () { 
                var self = this; 
                $.ajax( 
                            { 
                                type: "POST", 
                                url: "/Projects/AllProjectsHeaderSR", 
                                data: "projectCode=" + $(this).find('td:first').text(), 
                                success: function (data) { 
                                    $('#container').html(data); 
                                    $(self).unbind('click'); 
                                } 
                            }); 
            }); 
        });  
    </script>  
    </fieldset> 
    } 
```

如您所见，可点击部分是在 Jquery 中为 VIEW() 设置的。但整个屏幕变得可点击。我猜是因为 RenderBody() 在表格内？我不确定。

我如何才能仅在 webgrid 中获取可单击的行？

解决方案：

改变：

```
$('tbody tr').on('hover', function () { 
```

至：

```
$('#grid tbody tr').on('hover', function () { 
```

# xml - 在 Excel (2007) VBA 中读取和更改多个 XML 文件

> ID：11968572
> 
> 赞同：0
> 
> 时间：2012-08-15T11:35:33.253
> 
> 标签：xml, parsing, vba, excel

我正在尝试读取一个充满 XML 文件的文件夹并将参考编号更改为特定格式，即今天的日期（yymmdd），首字母缩写，从 00000001 开始的 8 位参考

例如 120815AB00000001 然后 120815AB00000002 等等。每个文件都有一个参考号。它包含在 <CPAReferenceNumber> 标记中。

我正在使用 Excel 和 VBA 来读取文件并更改相关字段。引用设置为默认值（在下面的代码中，它现在将“This”更改为“That”）

此代码适用于一个单独的文件并进行正确的更改。这些文件具有随机名称，并且没有适当的命名约定。我无法将其扩展到文件夹中的所有 XML 文件。任何帮助将不胜感激。

```
Sub ReplaceStringInFile()

Dim sBuf As String
Dim sTemp As String
Dim iFileNum As Integer
Dim sFileName As String

sFileName = "c:\Search and Replace Files\blah.XML"
iFileNum = FreeFile

Open sFileName For Input As iFileNum
    Do Until EOF(iFileNum)

            Line Input #iFileNum, sBuf
            sTemp = sTemp & sBuf & vbCrLf

    Loop

Close iFileNum
sTemp = Replace(sTemp, "THIS", "THAT")

iFileNum = FreeFile

Open sFileName For Output As iFileNum
Print #iFileNum, sTemp

Close iFileNum

End Sub 
```

帮助后，我将其修改为以下代码，但这会导致错误： sFileName is out of context。文本更改不适用于 xml 文件。

```
Sub ReplaceStringInFile()

Dim sBuf As String
Dim sTemp As String
Dim iFileNum As Integer
Dim sFileName As String
Const sSearchString As String = "c:\blah\*.xml"
Const directoryString As String = "c:\blah\"

iFileNum = FreeFile

sFileName = Dir(sSearchString)

Do While sFileName <> ""

      Open directoryString & sFileName For Input As iFileNum

        Do Until EOF(iFileNum)

                Line Input #iFileNum, sBuf
                sTemp = sTemp & sBuf & vbCrLf

        Loop

        Close iFileNum
        sTemp = Replace(sTemp, "IDNUMBER", "******SUCCESS!!!!!!******")

        iFileNum = FreeFile

        Open sFileName For Output As iFileNum
        Print #iFileNum, sTemp

        Close iFileNum

        Debug.Print "Do something with file named " & sFileName
        sFileName = Dir()

Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:08:52.930

使用`Dir`命令搜索文件。

以下示例将遍历所有 XML 文件`C:\Temp`并返回文件名（不包括路径）：

```
Const sSearchString As String = "c:\temp\*.xml"
Dim sFileName As String

sFileName = Dir(sSearchString)
Do While sFileName <> ""
    Debug.Print "Do something with file named " & sFileName
    sFileName = Dir()
Loop 
```

现在，如果我结合你的原始代码和我的`Dir`循环，我会得到一些在我的环境中工作的东西，希望它对你有用。我认为你忘记的是`sFileName`它只包含文件名而不是完整路径 - 所以你写入的文件与你读取的文件不同，并且可能`Do While sFileName <> ""`同时混淆了循环：

```
Sub ReplaceStringInFile()

    Const sSearchString As String = "c:\temp\*.xml"

    Dim sBuf As String
    Dim sTemp As String
    Dim iFileNum As Integer
    Dim sFileName As String
    Dim sFilePath As String

    sFileName = Dir(sSearchString)

    Do While sFileName <> ""

        sFilePath = "c:\temp\" & sFileName  'Get full path to file
        iFileNum = FreeFile
        sTemp = ""  'Clear sTemp

        Open sFilePath For Input As iFileNum

            Do Until EOF(iFileNum)

                Line Input #iFileNum, sBuf
                sTemp = sTemp & sBuf & vbCrLf

            Loop

        Close iFileNum

        sTemp = Replace(sTemp, "THIS", "THAT")

        iFileNum = FreeFile

        Open sFilePath For Output As iFileNum
        Print #iFileNum, sTemp

        Close iFileNum

        sFileName = Dir() 'Get the next file
    Loop
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-17T18:28:54.400

只是使用 ADO 流对象的轻微变化：

```
Sub ReplaceStringInFile()
    'Don't forget to set a reference to Microsoft ActiveX Data Objects 2.8 Library
    Const sSearchString As String = "c:\temp\*.xml"
    Dim sTemp As String
    Dim sFileName As String
    Dim sFilePath As String
    sFileName = Dir(sSearchString)

    Dim objStream As Stream
    Set objStream = CreateObject("ADODB.Stream")
    objStream.Type = adTypeText
    objStream.Charset = "utf-8"

    Do While sFileName <> ""
        sFilePath = "c:\temp\" & sFileName  'Get full path to file

        objStream.Open
        objStream.LoadFromFile (sFilePath)
        sTemp = objStream.ReadText()
        sTemp = Replace(sTemp, "THIS", "THAT")
        objStream.Close

        objStream.Open
        objStream.WriteText sTemp, adWriteChar
        objStream.SaveToFile sFilePath, adSaveCreateOverWrite
        objStream.Close

        sFileName = Dir() 'Get the next file
    Loop
End Sub 
```

# android - Android 网站容器

> ID：11968578
> 
> 赞同：0
> 
> 时间：2012-08-15T11:35:50.900
> 
> 标签：android, html, google-play, containers

我目前正在开发一个大型电子商务网站，我还需要开发一个 Android 和 iPhone 应用程序。为了节省时间和总体成本，我认为我只需将 Android 应用程序制作为一个容器，将 html5 网站加载到完整网站页面的简化版本中。

我刚刚检查过，Apple 不允许此功能，Apple 表示他们很可能会拒绝它并且不允许它进入他们的市场。看起来我将不得不创建一个完整的 Apple 应用程序以及开发我的网站的移动版本。

Android 市场是否也会因为我的应用程序只是我的网站的容器而不是完整的应用程序而拒绝我的应用程序？

有人在 Android 市场上有这方面的经验吗？如果你们有任何建议或经验，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:56:17.717

不，这在 Android Marketplace / Play 商店中非常好。Play 商店没有这样的审批流程，他们只有开发者指南（没有说明为移动网站发布“容器”的任何内容）以及对已发布应用程序的病毒和恶意软件主动扫描。

有些服务的唯一目的就是做到这一点（例如 Appgeyser）。他们将（移动）网站转变为可在 Google Play 商店上发布的 Android 应用程序。

请记住，“本机”应用程序几乎总是对用户更友好，并且通常被用户更积极地看待。根据 iOS/Android 应用程序是否是您电子商务网站战略的核心，我会选择原生 Android 应用程序（如果您那时已经开发了原生 iOS 版本，这可能不会做更多工作）。

# android - Android graphics.Camera 在 Target SDK 14 时无法工作

> ID：11968580
> 
> 赞同：0
> 
> 时间：2012-08-15T11:35:51.570
> 
> 标签：android, graphics, sdk, camera

使用 android.graphics.Camera 并将清单设置为针对低于 14 的任何 SDK 时，它可以正常工作。

一旦我将目标 SDK 设置为 14，它就会停止工作。

为什么？

**编辑：**

我没有收到任何错误，它只是没有工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T00:15:39.170

使用`targetSdk="14"`自动启用硬件加速渲染，它在所有情况下都不支持 3D 变换（至少在 4.3 之前不支持。）你是如何使用`Camera`对象的？剪辑不适用于 3D 转换和硬件加速。

`Camera.applyToCanvas()`不适用于硬件加速的画布。相反，只需调用`Canvas.translate()`，或调用`Camera.getMatrix()`然后`Canvas.concat(Matrix)`。

# vba - MS Access 将文本框/组合框输入字符和长度限制为数字

> ID：11968586
> 
> 赞同：1
> 
> 时间：2012-08-15T11:36:01.973
> 
> 标签：vba, ms-access, vbscript

我想将用户可以在我的表单上输入组合框的字符数限制为 2、4、6 和 8（4 个组合框）。我还想确保只能输入数字字符。我将每个组合框上的输入掩码设置为适当的表达式（99、9999、999999、99999999）。然后，我将每个组合框的默认值设置为 0。我遇到的问题是“_”字符显示为缺少条目的占位符，当我手动清除组合框时，会抛出错误消息。

我的目标是尽量避免为此使用代码。以下链接中有一个带有代码的示例，但我不想添加代码。[http://support.microsoft.com/kb/210047](http://support.microsoft.com/kb/210047)

但是，我会很感激有关如何摆脱“占位符”和错误消息的建议。我还希望了解有关设置什么以使组合框下拉显示，在用户键入组合框时显示过滤的选择的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:47:46.560

您在谈论数字条目，不是吗？您可以设置验证规则。

两位数

```
<100 
```

或者

```
 >9 And <100 
```

三位数

```
<1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:51:28.437

组合框的下拉可以通过代码（对不起）来实现

```
Me.ControlName.SetFocus
Me.ControlName.Dropdown 
```

# logging - 如何测试与亚马逊的连接

> ID：11968588
> 
> 赞同：0
> 
> 时间：2012-08-15T11:36:05.833
> 
> 标签：logging, amazon-s3, amazon-web-services, amazon, ec2-api-tools

我的应用程序应该在 Amazon S3 存储桶中创建新文件夹并在那里放置一些日志。问题是：它只是没有发生。S3 存储桶存在（我之前创建过），但那里没有看到新文件夹。

如何测试问题？有什么有用的工具吗？

我打开了 Amazon S3 存储桶日志记录（请参阅此处：[http](http://www.bucketexplorer.com/documentation/amazon-s3--bucket-logging.html) ://www.bucketexplorer.com/documentation/amazon-s3--bucket-logging.html ），但日志每小时汇总一次......然后我正在寻找其他方法/工具来测试问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:00:35.273

s3cmd 很好： [http ://s3tools.org/s3cmd](http://s3tools.org/s3cmd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:05:21.353

Amazon S3 是一个“平面”文件系统，这意味着它没有物理文件夹。如您所知，“文件夹”只是添加到文件名的前缀。

试着把文件放在那里，不用考虑文件夹，看看它是否有效。

# nhibernate - NHibernate 不会创建代理，除非 class...lazy=true

> ID：11968590
> 
> 赞同：2
> 
> 时间：2012-08-15T11:36:11.373
> 
> 标签：nhibernate, nhibernate-mapping

考虑如下对象：

```
public partial class Record
{
    public int RecordID {get; set;}
    public DateTime? Created { get; set; }
    public int CreatorUserUserObjectNDX { get; set; }
    public UserObject Creator { get; set; }
    ...
} 
```

和

```
public partial class UserObject
{
  public virtual int ID {get; set;}
  public virtual string Name {get; set;}
} 
```

它们的映射如下：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" schema="..." namespace="..." assembly="...">
<class name="Record" table="records" lazy="false" schema="..">
    <id name="RecordID" column="ndx">
        <generator class="native" />
    </id>
    <property name="Created" column="created" />
    <property name="CreatorUserUserObjectNDX" column="creator_user_user_object_ndx" />

    <many-to-one name="Creator" column="creator_user_user_object_ndx" lazy="proxy"/>
</class> 
```

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" schema="..." namespace="..." assembly="...">
<class name="UserObject" table="user_objects" lazy="false">
    <id name="NDX" column="ndx">
        <generator class="native" />
    </id>

    <property name="Name" column="name" />
</class> 
```

它们在这里故意保持简单，实际上它们更重于一对多集合等，但是这些工作，所以它们不是这里的重点。

我遇到的问题是，当我使用这样的定义和映射时，做一个简单的

```
var results = session.QueryOver<Record>()
  .List(); 
```

NHibernate 不会为该`creator`属性创建代理，它只是在执行的 SQL 语句中使用左外连接并`UserObject`直接插入 a。当我更改`lazy='false'`为`lazy='true'`在 UserObject 的映射中工作时，会创建代理并且执行的 SQL 没有外部连接。

那么，是否有必要`lazy='true'`为所有类进行设置，这可能是任何地方的参考？我想我可以将所有映射的默认设置为 false，并`lazy='proxy'`在需要时在多对一定义中设置。

我使用 NHibernate 3.2，所以没有关于 proxyfactory 的配置。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:46:26.910

如果在映射中设置了lazy=false，NHibernate 就不需要创建代理，因为所有的属性都会被急切地加载。

除非要求您进行预先加载，否则不应更改延迟加载设置。即使这样，您也可以使用“fetch”（例如在 hql 中）来急切地加载您需要的内容。

# c++ - 使用 Linux Eclipse，我可以通过编程方式告诉我正在调试器 (gdb) 中执行吗？

> ID：11968596
> 
> 赞同：0
> 
> 时间：2012-08-15T11:36:23.780
> 
> 标签：c++, eclipse, gdb

该主题几乎涵盖了它：使用 Linux Eclipse，我可以通过编程方式告诉我正在调试器 (gdb) 中执行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:56:36.243

您可能不得不求助于晦涩难懂的黑客攻击。

例如，您可以检查 /proc/<pid>/status 文件中的“TracerPid”以确定您是否正在被跟踪。

如果您真的想知道您是否被 gdb 跟踪，您可以尝试查看该进程的 exe 链接（但这并不可靠）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T15:11:38.860

```
//=====================================================================
// effectively performs  `cat /proc/$pid/status | grep TracerPid`
//=====================================================================
bool     RunningInDebugger( pid_t pid )
{
   std::string       line        = "";
   std::string       pidFileName = "";
   size_t            y           = 0;
   size_t            x           = 0;
   bool              rc          = FALSE;

   pidFileName = "/proc/";
   pidFileName = pidFileName.append( NumToStr( pid ).c_str() );
   pidFileName = pidFileName.append( "/status" );

   std::ifstream     pidFile  (pidFileName.c_str() );

   if ( pidFile.is_open() )
   {
      while ( pidFile.good() )
      {
         getline (pidFile,line);
         x = line.find( "TracerPid:" );
         if ( x != std::string::npos )
         {
            line = line.substr( x+11 );                        // length of "TracerPid:" + 1
            x = line.find_first_not_of( " \t" );               // find first non whitespace character
            y = line.find_first_of( " ", x );                  // next whitespace
            if ( std::string::npos == y )                      // can't find trailing spaces that aren't there
               y = line.size() - 1;
            rc = atoi( line.substr( x, y-x+1 ).c_str() );
            pidFile.close();                                   // pidFile will no longer be "good"
         }
      }
      pidFile.close();
   }
   else     // File open failed
      rc = FALSE;

   return rc;
} 
```

# google-maps - 聚类 Google 地图标记时，对象没有方法“getPosition”（api v3）

> ID：11968600
> 
> 赞同：7
> 
> 时间：2012-08-15T11:36:40.483
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, markerclusterer

我正在尝试使用[Google Maps Utility Library v3](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/simple_example.html)在 Google 地图上进行聚类标记的基本实现。

但是，当我运行此程序时，我在 Chrome 开发人员工具控制台上收到错误消息：

```
Uncaught TypeError: Object #<Object> has no method 'getPosition' 
```

这与此处的实用程序库脚本中的第 649 行有关：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js)。这是以下功能：

```
/**
 * Determins if a marker is contained in a bounds.
 *
 * @param {google.maps.Marker} marker The marker to check.
 * @param {google.maps.LatLngBounds} bounds The bounds to check against.
 * @return {boolean} True if the marker is in the bounds.
 * @private
 */
MarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {
  return bounds.contains(marker.getPosition());
}; 
```

我使用的代码是相当标准的谷歌地图的东西，其主要功能是：

```
function initialize(items,loop,zoom) {
  geocoder = new google.maps.Geocoder();
  if (items.length > 0) {
    var latlng = new google.maps.LatLng(items[0].Lat, items[0].Lng);
    var myOptions = {
      zoom: zoom,
      center: latlng,
      //mapTypeControl: false,
      streetViewControl: false,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById("map"), myOptions);
    map.setOptions({styles: stylez});

    for (var i = 0; i < items.length; i++) {
      var marker = new google.maps.Marker({
        position: new google.maps.LatLng(items[i].Lat, items[i].Lng),
        title: items[i].Title,
        icon: _iconCenter,
        shadow: shadow,
        infocontent: items[i].Description
      });
      marker.setMap(map);
      markersArray.push(marker);
    }
    var markerCluster = new MarkerClusterer(map, items);
    google.maps.event.addListener(map, "tilesloaded", function () {
      if(loop == true){
        SetLoop();
      }
    });
  }
} 
```

据我所知，我已经追溯了错误函数，它应该接收地图边缘的坐标以便能够确定边界，这应该只是标准行为，但显然有些不对劲。

我想知道是否有人可以对此有所了解？

谢谢各位大侠指点...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:21:44.423

事实证明，我在 google maps 脚本之前声明了 markerclusterer 脚本。调用地图脚本首先解决了它......现在很明显！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T11:57:16.377

MarkerClusterer 需要一组标记。您创建一个，但将 items 数组传递给它的构造函数。改变：

```
var markerCluster = new MarkerClusterer(map, items); 
```

到：

```
var markerCluster = new MarkerClusterer(map, markersArray); 
```

# jquery - ul>li>复选框>href

> ID：11968602
> 
> 赞同：1
> 
> 时间：2012-08-15T11:36:52.267
> 
> 标签：jquery

如何获取用链接、属性 href="" 和文本链接标记的值。我为我的英语道歉。谢谢你。

```
<ul id="list-item">
<li><input type="checkbox" checked="checked" /><a href="http://localhost/">Item 1</a></li>
<li><input type="checkbox" /><a href="http://localhost/">Item 2</a></li>
<li><input type="checkbox" /><a href="http://localhost/">Item 3</a></li>
<li><input type="checkbox" /><a href="http://localhost/">Item 4</a></li>
<input type="button" id="save" value="Save"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:39:00.857

试试这个：

```
$('#list-item input[type="checkbox"]:checked').next('a').attr('href'); 
```

您可以使用`change`事件来映射锚点的文本和链接，尝试以下操作：

```
var anchors = [];
$('#list-item input').change(function(){
   var anchors = $(this).closest('ul').find('input:checked').siblings('a').map(function(){
                    return $(this).text() + ": " +this.href
               }).get()    
}) 
```

[演示](http://jsfiddle.net/HKmh7/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:51:20.793

我认为您正在努力实现这一目标：

**编辑：**

```
$('#list-item input[checked=checked]').each(function(){
    alert($(this).next('a').text() + ': ' + $(this).next('a').attr('href') )
}) 
```

## [看演示](http://jsfiddle.net/eGFwR/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:52:50.543

您可以使用该`find`方法获取元素下元素的值。然后使用 jquery`each`方法获取集合中的值：

像这样的东西。

```
function getAnchorValues(){
    var checklist = $('#list-item').find($('input[type="checked"]:checked');
    $.each(checklist, function(index, val){
        alert index + ' : ' +  val;
    });
} 
```

# c# - 其他形式的datagridview无法刷新

> ID：11968603
> 
> 赞同：0
> 
> 时间：2012-08-15T11:36:58.073
> 
> 标签：c#, datagridview, refresh

我有两个 Windows 窗体（Form1 和 Form2）。Form1 包括一个按钮和datagridview。Form1 显示客户列表。Form2 包括 4 个文本框。Form2 是我的客户信息编辑屏幕。我有 2 个问题：

1.  当我按下 Form1 中的按钮时，我想在文本框中查看数据。

2.  当我更改任何 textbox.Text 内容并关闭 Form2 时；datagridview 中的数据没有改变。当我重新启动项目时，datagridview 中的所有行都没有问题。

你能给我一个解决这个问题的方法吗？要在编辑客户列表时打开更多内容，我想立即在 datagridview 中看到它。我希望它被刷新并查看编辑后的数据。（顺便说一下我尝试使用的方式`datagridview.Refresh()`等等，但它不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:07:36.370

[您可以使用BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)组件轻松地跨表单共享数据。

表格1：

```
dataGridView1.DataSource = bindingSource1; 
```

表格2：

```
textBoxName.DataBindings.Add("Text", form1.bindingSource1, "CustomerName"); 
```

有关更多详细信息，请参阅[此](http://msdn.microsoft.com/en-us/library/ms404320.aspx)MSDN 链接。

# android - 使用 2 层从 Drawable[] 更改层的大小

> ID：11968605
> 
> 赞同：1
> 
> 时间：2012-08-15T11:37:07.447
> 
> 标签：android, layout, resources, drawable, layer

我需要更改 Drawable[] 的第二层的大小。我有以下代码：

```
hLayout.postDelayed(new Runnable() {

                        DisplayMetrics metrics = getActivity().getResources().getDisplayMetrics();
                        int width = metrics.widthPixels;
                        int height = metrics.heightPixels;

                        @Override
                        public void run() {

                            if (coupons != null) {
                                int coupSize = coupons.size();
                                final int itemWidth = (width / 3);
                                final int itemHeight = (height / 3);
                                hLayout.removeAllViews();
                                for (int i = 0; i < coupSize; i++) {
                                    Coupon coupon = coupons.get(i);
                                    if (coupon.getImage() != null) {
                                        RelativeLayout parent = new RelativeLayout(getActivity());
                                        RelativeLayout.LayoutParams linearparams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                                        parent.setLayoutParams(linearparams);
                                        final CheckBox cb = new CheckBox(getActivity());
                                        final ImageView iv = new ImageView(getActivity());
                                        // iv.setScaleType(ScaleType.CENTER_INSIDE);
                                        LayoutParams checkBoxParams = new LayoutParams();
                                        cb.setId(i);
                                        checkBoxParams.height = LayoutParams.WRAP_CONTENT;
                                        checkBoxParams.width = LayoutParams.WRAP_CONTENT;
                                        cb.setOnCheckedChangeListener(changeListener);
                                        RelativeLayout.LayoutParams imageParams = new RelativeLayout.LayoutParams(itemWidth, itemHeight);
                                        imageParams.height = itemHeight;
                                        imageParams.width = itemWidth;
                                        imageParams.addRule(RelativeLayout.BELOW, cb.getId());
                                        if (cb.getId() == 0) {
                                            imageParams.topMargin = 72;
                                        }
                                        parent.addView(cb, checkBoxParams);
                                        parent.addView(iv, imageParams);
                                        hLayout.addView(parent);
                                        //ImageUtil.loadImage(coupon.getImage(), iv, itemWidth, itemHeight, "", false, getActivity());
                                        Bitmap b  =Util.generateEAN("9310779300005", getActivity());
                                        Drawable d = new BitmapDrawable(getResources(),b);
                                        System.out.println("------------b : "+b);
                                        //iv.setImageBitmap(b);
                                        Resources r = getResources();
                                        Drawable[] layers = new Drawable[2];
                                        layers[0] = r.getDrawable(R.drawable.coupon1);

                                        layers[1] = d;
                                        layers[1].setAlpha(200);

                                        LayerDrawable layerDrawable = new LayerDrawable(layers);
                                        iv.setImageDrawable(layerDrawable);
                                    }
                                }
                            }

                        }
                    }, 200); 
```

我尝试使用 layers[1].setBounds(left, top, right, bottom); 但没有运气，我不知道还能尝试什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-13T09:29:59.823

我只是在我的代码中执行此操作....在这里我更改了`layer[0]`. 有用 。只需更改以下值`layerDrawable.setLayerInsert(layer index,left,top,right,bottom)`：

```
 Resources r = getResources();
        Drawable[] layers = new Drawable[2];

        layers[0] = r.getDrawable(R.drawable.gi);
        layers[1] = r.getDrawable(R.drawable.url);
        LayerDrawable layerDrawable = new LayerDrawable(layers);
                  // left top right bottom
        layerDrawable.setLayerInset(0, 600, 600, 600, 600);

        iv1.setImageDrawable(layerDrawable); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-16T12:40:38.857

我使用`Canvas`类来实现这个目的。请看[这里](http://developer.android.com/reference/android/graphics/Canvas.html)。

# jquery - JqG rid 列在 IE 中被截断（显示滚动条）但在 Firefox 中很好（没有滚动条）

> ID：11968609
> 
> 赞同：1
> 
> 时间：2012-08-15T11:37:38.987
> 
> 标签：jquery, internet-explorer, firefox, jqgrid

我正在使用具有大量列的 jqGrid。我有一个问题，其中一些列在 Internet Explorer 中被截断（我正在 IE9 上测试）所有列在 Firefox 中都显示得很好。谁能想到这个问题的原因或解决方法。我在 Firefox 与 IE 中的最后一个列下面放了一个屏幕截图。IE 确实会弹出一个水平滚动条，但这很痛苦，因为我显示了 100 行，所以你必须在浏览器中向下滚动很多，然后滚动才能看到最后一列。试图看看是否有办法摆脱那个网格水平滚动条

这是显示所有 16 列的 Firefox

![在此处输入图像描述](../Images/0ad2cdcb9ae0697b763e13a9eef2cb17.png)

这是 Internet Explorer，其中仅显示了 14 个完整列，第 15 列（ResourceType）被截断了 1/2 列

![在此处输入图像描述](../Images/20a73ffe8ddcf3e7fdf5bbcde1ec4b7c.png)

关于如何让所有列显示在 Internet Explorer 中的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:44:19.060

我想您遇到的问题与我在[错误报告](http://www.trirand.com/blog/?page_id=393/bugs/cellwidth-can-works-incorrectly-on-windows-with-the-custom-text-size-dpi/#p27061)中描述的问题相同。在这种情况下，您应该将内部[cellWidth](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L184-191)函数[的最后一行从](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L190)

```
return testCell !== 5; 
```

到

```
return Math.abs(testCell – 5) > 0.1; 
```

您可以在文件中执行此操作，`jquery.jqGrid.src.js`也可以尝试使用[该文件](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.0/js/jquery.jqGrid.src-fixed.js)。在我的情况下，它解决了网格宽度计算错误的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T08:21:46.223

我使用的是 Jqgird 4.5.2，chrome 版本是 28.0.1500.71。上面的解决方案列表在我的环境中不起作用。我不知道为什么，所以我尝试记录 testCell！==5。它在 Firefox 中返回 false，在 chrome 中返回 false。最后，我在单元格宽度中添加 return false 而不关心比较结果。它有效。

```
cellWidth : function () {
    var $testDiv = $("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),
    testCell = $testDiv.appendTo("body")
        .find("td")
        .width();
    $testDiv.remove();
    return false;
}, 
```

希望它可以有所帮助。

# c++ - 链接器错误：缺少 vtable

> ID：11968623
> 
> 赞同：0
> 
> 时间：2012-08-15T11:39:45.777
> 
> 标签：c++, objective-c, linker-errors

我在 xcode 中遇到链接器错误，我很难理解和发现问题。这是我得到的错误：

![在此处输入图像描述](../Images/1905479005bdaf5bcea3fe4ea6bf8242.png)

* * *

我的`Instrument class`样子是这样的：

```
class Instrument {

private:

public:

    virtual float getSample(Note &note);
    Instrument(){}

}; 
```

它是由我实现的`Synth class`：

```
class Synth : public Instrument{

private:
    Volume volume;
public:
    Synth(){}
    void setVolume(float aVolume);
    virtual float getSample(Note &note);
}; 
```

我正在使用 Instrument 作为我的成员`Track class`：

```
class Track {
public:
    bool muted;
    Instrument instrument;
Track(){
    this->muted = false;
}
}; 
```

任何想法是什么导致了问题？我还有一个问题：如果有一个`Track`对象，将它的`instrument`成员初始化为的最佳方法是`Synth`什么？这行得通吗？

```
Track track;
track.instrument = Synth(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:58:07.563

正如错误中的注释所说，您需要提供我猜缺少的虚函数的定义：`Instrument::getSample(Note &note);`

但我想你需要纯虚函数，让它：

```
class Instrument {
//...
public:
    virtual float getSample(Note &note) =0;
    Instrument(){}
}; 
```

如果不是这种情况，请发布更多代码并在不同的编译器上检查您的代码，可能是您的编译器有问题

# java - Java SWT - 如何绘制其他东西而不是绘制复合的孩子？

> ID：11968628
> 
> 赞同：0
> 
> 时间：2012-08-15T11:40:04.113
> 
> 标签：java, swt

我有一个复合材料，在某些情况下应该会崩溃。

当合成物被折叠时——应该通过绘制折叠合成物的图像来指示状态。

我将如何实现这是 SWT？我可以以某种方式接管绘图，并在小部件的画布上绘制其他东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:43:07.257

你应该看看 StackLayout。

使用 StackLayout，您可以在其中放置一个显示所需图像的小部件。当您想要“折叠”您的合成时，您只需将其移回以使其不可见并将图像放在 StackLayout 的顶部。

# android - Android应用程序中的语言

> ID：11968631
> 
> 赞同：1
> 
> 时间：2012-08-15T11:40:25.877
> 
> 标签：android, encoding, letters

我在我的 Android 应用程序中收到了一些 XML 格式的 RSS 提要。这个想法很简单，它只是接收 RSS 更新并显示它们。除了显示一些正确的词外，我管理了一切。问题是数据是用其他语言编写的，而我的应用程序是英文的（我对这些东西知之甚少）。例子：

09:05 KAMIONDZIJE

20:05 Doček naših olimpijaca ispred Skupštine grada

诸如此类的东西..您会看到那些Ž，č，š字母..它们显示为其他一些我不知道的语言..有谁知道如何解决这个问题..我只是希望它像写的那样在 RSS 的 XML 文件中，无论如何都没有改变。

这是我完整的解析器类：

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}
/**
 * Getting XML DOM element
 * @param XML string
 * */

public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setCoalescing(true);
    dbf.setNamespaceAware(true);
    try {
        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 //if( child.getNodeType() == Node.TEXT_NODE  ){
                 if(child.getNodeType() == Node.TEXT_NODE || child.getNodeType() == Node.CDATA_SECTION_NODE){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
     //return elem.getTextContent();
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);                
        return this.getElementValue(n.item(0));
    }
 public String getValue2(Element item, String str){
     //NodeList n = item.getElementsByTagNameNS("http://purl.org/rss/1.0/modules/content/", str);
     return item.getTextContent();
 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:43:45.830

您应该确保将文本解析为 utf-8。但是当你这样做时，你仍然会有一堆奇怪的字符，但这是正常的......很多语言都有奇怪的字符。丹麦（我的根）有æøå。

**编辑**：

试试这个：

```
EntityUtils.toString(httpEntity,"UTF-8"); 
```

# javascript - 使用 javascript 传递逗号分隔的变量

> ID：11968632
> 
> 赞同：0
> 
> 时间：2012-08-15T11:40:33.620
> 
> 标签：javascript, jquery

我有一个变量（pvlist）一个包含像' `120123,345654`'这样的数据的数组。当我尝试使用`window.open`它只传递一个值时，例如当数组只有一个值时。如果我的数组中有多个值，我会得到一个没有任何内容的空白页。我尝试了各种建议的解决方案，包括：

```
window.open("../Functions/csv.php?refno="+pvlist);
window.open("../Functions/csv.php?refno="+pvlist+"");
window.open("../Functions/csv.php?refno="+pvlist.join(",")+""); 
```

有什么建议可以用来传递具有多个逗号分隔值的变量吗？所有帮助表示赞赏。

**EDIT** 变量 pvlist 是具有逗号分隔值的变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:44:33.517

你需要数组的**join**方法。这会将这样的数组 [1,2,3,4,5] 变成这样的字符串 "1,2,3,4,5" （或您需要的任何其他分隔符）

例子：

```
window.open("../Functions/csv.php?refno=" + pvlist.join(',')); 
```

# windows-phone-7 - 如何动态地使用for循环在网格内创建一个文本框？

> ID：11968638
> 
> 赞同：1
> 
> 时间：2012-08-15T11:40:44.393
> 
> 标签：windows-phone-7

我是新的 Windows 手机，我想在网格内动态地使用 for 循环创建一个文本框。我想使用他们的名字访问文本框来执行一些计算。我的代码如下所示：

```
 public MainPage()
    {
        InitializeComponent();
        string[] str = new string[2];
        str[0] = "force";
        str[1] = "force components";
        TextBox[] textbox = new TextBox[2];

       for (int i =0; i <2; i++)
       {
           textbox[i].Text = str[i]; 

            ContentPanel.Children.Add(textbox[i]);
        }
    } 
```

上面的代码在“textbox[i].Text = str[i]”行中显示了空引用异常。请告诉我清除此问题的代码。帮我。谢谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:57:28.220

我不完全相信你这样做是正确的*，但在没有任何更好的信息的情况下，我会直接回答你的问题......
你没有为循环的每次迭代声明一个新的 TextBox。试试这个...

```
for (int i =0; i <2; i++)
{
    textbox[i]= new TextBox { Text = str[i] } ; 
    ContentPanel.Children.Add(textbox[i]);
} 
```

* 绑定到某种 ItemsControl 可能会更可取...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:42:06.183

补充一下zombiesheep所说的。您还需要定义绘制它们的位置。如果您不这样做，它们将彼此重叠显示（如果您使用网格布局）。所以你需要指定边距、高度和宽度等。我曾经像这样向网格控件添加按钮，我所做的是：

```
button[i].Margin.X= 24+button[i-1].Margin.X; 
```

这会将下一个按钮在 x 轴上比之前绘制的按钮多 24 像素。

# java - mkdirs 创建文件而不是创建文件夹 [JAVA]

> ID：11968640
> 
> 赞同：1
> 
> 时间：2012-08-15T11:40:59.480
> 
> 标签：java, android, file, unzip

我在解压文件时遇到问题，出现“open failed: ENOTDIR (Not a directory)”错误。经过调试发现问题出在这个函数上：
确定当前的ZipEntry是一个目录后，我用它的路径调用这个函数：

```
private void dirChecker(String dir) {
        File FiledirChecker = new File(PATH + dir); // PATH+dir = /mnt/sdcard/Pictures/Hafs

        if (!FiledirChecker.isDirectory())
            FiledirChecker.mkdirs();
    } 
```

此功能结束后，我浏览到图片目录，Hafs 不是目录，而是一个名为“Hafs”的 0 字节文件。

为什么会这样？

我应该指出，对于其他目录（“Hafs”除外），mkdirs 通常会创建该文件夹！但仅针对此目录 (Hafs) mkdirs 不会创建目录而是文件！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T11:54:32.087

发生这种情况是因为在代码的其他地方，已经创建了一个空文件。

或者当您的代码无法创建目录时，该文件是您上次运行的剩余文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:55:12.603

除非我错过了你的文件已经在其他地方创建的东西。
根据我在您的代码中看到的内容
1）您检查文件是否不是目录
2）如果 1）为真，您将尝试创建完整的目录结构和与可能已经存在的文件同名的目录。

# xaml - WinRT ProgressBar 值绑定未更新

> ID：11968641
> 
> 赞同：1
> 
> 时间：2012-08-15T11:41:05.617
> 
> 标签：xaml, windows-runtime

在 Windows 8 RP 中，我将 XAML 视图转换为更像 MVVM 的模型。

ProgressBar.Value 属性的绑定似乎不会更新该值。RaisePropertyChanged 已正确发送，其他参数如 .Maximum 和 .Visibility 似乎工作正常。该值通过 ViewModel 类中的 DispatchTimer 更新。

有人在“Metro Style Apps”中遇到过这种情况吗？

一些片段：

```
Time = 1;
MaxTime = 60;
TimerVisibility = Windows.UI.Xaml.Visibility.Visible;
timer.Start(); 
```

在设置上述值之前，ProgressBar 已折叠。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T11:46:32.387

好的，修好了。绑定模式应设置为“TwoWay”。奇怪为什么不是默认模式？

# javascript - PrimeFaces p:fileUpload multiple files autoComplete 仅在第一个文件后有效

> ID：11968642
> 
> 赞同：4
> 
> 时间：2012-08-15T11:41:10.377
> 
> 标签：javascript, jquery, jsf, primefaces, javabeans

我尝试上传一些文件，然后重定向到另一个页面，`oncomplete` 问题是`oncomplete`只有在第一个文件上传后才有效

```
<p:fileUpload  mode="advanced"
     label="#{FileMessages.file_add_file_lbl_Select_File}"
     fileUploadListener="#{fileAddFileAction.upload}"
     oncomplete="redirect(#{fileAddFileAction.groupId});"
     multiple="true"
     allowTypes="/(\.|\/)(txt|doc|docx|pdf)$/"
     widgetVar="fileUplaod" >
 </p:fileUpload> 
```

Java 脚本函数：redirect(groupId)

```
function redirect(groupId) {
     var url = "/network/group/files.html?gId="+groupId;
     $(location).attr('href',url);
} 
```

bean.java

```
public void upload(FileUploadEvent event) {

    UploadedFile uploadedFile = event.getFile();

    try {
        String thumbnail = getDestination() + uploadedFile.getFileName();
        String[] filetype = thumbnail.split("\\.");
        String newfilename = Calendar.getInstance().getTimeInMillis() + "." + filetype[1];

        SystemFile file = new SystemFile();
        file.setAccount(getActor().getAccount());
        file.setCtime(new Date());
        file.setName(newfilename);
        file.setPath(getDestination());
        file.setFileType(FileUtil.checkFileType(filetype[1]));
        file.setOriginalName(uploadedFile.getFileName());

        getFileService().saveSystemFile(file);

        copyFile(getDestination() + newfilename, uploadedFile.getInputstream());

        copyFile(getDestination() + newfilename, uploadedFile.getInputstream());

    } catch (IOException ex) {
        Logger.getLogger(FileAddFileAction.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:20:10.740

这似乎是一个已知问题：[http ://code.google.com/p/primefaces/issues/detail?id=3836](http://code.google.com/p/primefaces/issues/detail?id=3836)

用户已在此页面上完成了自定义补丁：

> 可以通过在 ap:fileUpload 标记中添加以下行来使用它：

```
<p:ajax event="fileUploadsComplete" listener="#{filesBean.done}"/> 
```

> filesBean.done 方法如下所示：

```
public void done(FileUploadsCompleteEvent event) {
    System.out.println("done"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T17:25:46.763

我有一个类似的问题（Primefaces 5）。由于“父级不是 ClientBehaviorHolder 的实例”错误，添加 ajax fileUploadsComplete 失败。

这是我的hack-around。这不是最令人满意的，但它正在工作：

```
<script>
    function setUploadFilesCount() {
        var numberOfFiles = $('.ui-fileupload-preview').size();
        var input = document.getElementById('fileupload-multi-fix-input');
        input.value = numberOfFiles;
        input.onchange();
    }
</script>

<h:form id="file-upload-form">
    <p:fileUpload id="file-upload" fileUploadListener="#{backingBean.handleFilesUpload}" mode="advanced" dragDropSupport="false"
                               sizeLimit="10000000" multiple="true" allowTypes="/(\.|\/)(jpg)$/" onstart="setUploadFilesCount()" update=":content">
    </p:fileUpload>
</h:form>

<h:form prependId="false" style="display:none;">
    <h:inputText id="fileupload-multi-fix-input" value="#{backingBean.numberOfUploadFiles}">
        <f:ajax event="change" execute="@form"  />
    </h:inputText>
</h:form> 
```

所以在我的 BackingBean 中，我有以下内容：

```
@Named
@SessionScoped
public class BackingBean implements Serializable{

    private static final long serialVersionUID = 1L;

    private int numberOfUploadFiles; //... add getter and setter

    private boolean isUploadComplete = false; //... add getter and setter

    private int uploadCount = 0;

    public void handleFilesUpload(FileUploadEvent event) throws IOException {

        // ... handle file upload here

        uploadCount++;

        if(uploadCount == numberOfUploadFiles){
            isUploadComplete = true;
        }
    }
} 
```

解释：

我添加了一个 JavaScript 函数 `setUploadFilesCount`和一个`<h:form />`包含隐藏的`<h:input />`.

`<p:fileUpload onstart=...`在（第一个）文件传输开始时调用一次。我调用 JavaScript 函数`setUploadFilesCount`来`onstart`设置支持 bean 中上传文件的数量。

通过读取具有 css 类的元素的出现次数来检测文件的数量`ui-fileupload-preview`。视图中的`ui-fileupload-preview`元素数量等于上传文件的数量。这发生在

```
$('.ui-fileupload-preview').size(); 
```

`input.onchange();`使隐藏的输入字段值提交给支持 bean。

在支持 bean 上，我可以通过增加一个计数器来检查最后一个项目是否已上传

```
uploadCount++;

if(uploadCount == numberOfUploadFiles){...} 
```

所以我可以检查是否所有项目都已上传或在最后一个上传项目完成后调用特殊函数。

* * *

`<p:fileUpload oncomplete...`每次上传上传文件之一时调用。

因此，在您的特定情况下，您必须另外将您的 javascript 包装成这样：

```
<h:panelGroup id="afterLoad">
    <h:outputScript>
        function redirect(groupId) {
            if(#{backingBean.isUploadComplete}=='true'){
                var url = "/network/group/files.html?gId="+groupId;
                $(location).attr('href',url);
            }
        }
    </h:outputScript>
</h:panelGroup> 
```

将其放在与 the 相同的形式中`<p:fileUpload`并添加`<p:fileUpload ... update="afterLoad" ...`

# c++ - C++11 noexcept 限定符和内联方法

> ID：11968645
> 
> 赞同：12
> 
> 时间：2012-08-15T11:41:17.827
> 
> 标签：c++, exception, c++11, inline, noexcept

`inline`当 C++11调用使用`noexcept`限定符声明的其他函数时，它们是否对函数或方法提供任何保证？

```
class My_String { ...

    const char * c_str () const noexcept;
    inline operator const char * () const { return c_str(); }
}; 
```

`noexcept`我假设优化编译器可以根据资格自由实现内联方法，而无需完全 EH 和堆栈展开。我也希望这是一个简单的访问器方法：

```
... inline operator const char * () const { return m_buffer; } 
```

虽然这个例子看起来微不足道，但当用于实现其他类或函数时，异常保证很重要。**问：** C++11 标准是否解决了这个问题，还是应该标记内联方法`noexcept`？`noexcept`或者除非*需要*匹配类或函数规范，否则最好省略？

**编辑：**为了避免一些混淆：`noexcept`内联方法是隐式的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T12:30:29.307

抱歉，没有。唯一隐含的异常规范是

*   在析构函数上。
*   在其他隐式声明或显式默认的特殊成员函数上：默认构造函数、复制和移动构造函数以及复制和移动赋值，当未在类定义中声明或使用`= default;`.
*   关于释放函数：`operator delete`和`operator delete[]`.

[请注意，对于解除分配函数，隐式异常规范始终为 if `noexcept(true)`。对于所有析构函数，以及在第一个声明中隐式声明或显式默认的特殊成员函数，隐式异常规范可以是`noexcept(true)`或`noexcept(false)`，由任何基类和成员的相应特殊成员函数的异常规范确定类类型。]

因此，对于任何一个示例声明，都`noexcept(static_cast<const char*>(std::declval<const MyString>()))`必须是`false`. 继续写`noexcept`可能重要的地方。

当然，正如您所指出的，仍然允许编译器优化注意到内联函数不能抛出异常并简化调用者中的异常处理。

# ruby-on-rails - 控制器私有方法不起作用

> ID：11968649
> 
> 赞同：0
> 
> 时间：2012-08-15T11:41:40.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在构建一个用户可以发布的应用程序。每个帖子都被赞成和反对。在显示帖子的地方，我有一个允许用户过滤帖子的小表单。它只是将一个参数传递给名为 params[:post_filter] (localhost:3000/somepage?post_filter=value) 的 url。现在，这工作得很好，很花哨，除了我写的修改查询的私有方法不起作用。

这是我的查询：

```
def room
            @posts = Post.where('lesson_id = ?', params[:id]).order(post_filter_params).page(params[:page]).per(30)
    end 
```

这是我的私人方法：

```
private

def post_filter_params
    chosen_option = params[:post_filter].to_i == 1 or 2 or 3 ? params[:post_filter] : '1'
    case chosen_option
    when 1
        'created_at DESC'
    when 2
        'upvotes DESC'
    when 3
        'downvotes DESC'
    end
end 
```

现在，每当我用我的私有方法中的一个字符串替换 .order() 值时，一切都按计划进行。但是，将私有方法名称放在 .order() 值中不起作用。关于发生了什么的任何想法？

**编辑**

为了确保所有值都是相同的数据类型，我这样做了，但它仍然不起作用：

```
def post_filter_params
    param_option = params[:post_filter].to_i
    chosen_option = param_option == 1 or 2 or 3 ? param_option : 1
    case chosen_option
    when 1
        'created_at DESC'
    when 2
        '(upvotes - downvotes) DESC'
    when 3
        'downvotes DESC'
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:54:33.383

我认为私有方法不会像您认为的那样做。

这个怎么样？

```
def post_filter_params
  case params[:post_filter].to_i
  when 1
    'created_at DESC'
  when 2
    'upvotes DESC'
  when 3
    'downvotes DESC'
  else
    'created_at DESC'
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:46:56.130

尝试将数字与数字或字符串与字符串进行比较。

引用 1、2 和 3

```
when '1'
... 
```

或转换`chosen_options`为数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:30:10.183

我想解释@shioyama 的观点。首先，让我们关注这段代码：

```
param_option = params[:post_filter].to_i
chosen_option = param_option == 1 or 2 or 3 ? param_option : 1 
```

在 IRB 会话中..

```
irb(main):005:0> param_option = 1
=> 1
irb(main):006:0> chosen_option = param_option == 1 or 2 or 3 ? param_option : 1
=> true
irb(main):007:0> chosen_option
=> true
irb(main):008:0> param_option = 2
=> 2
irb(main):009:0> chosen_option = param_option == 1 or 2 or 3 ? param_option : 1
=> 2
irb(main):010:0> chosen_option
=> false 
```

因此，该行`chosen_option = param_option == 1 or 2 or 3 ? param_option : 1`与 相同`chosen_option = (param_option == 1) or (2) or (3 ? param_option : 1)`，即为`true`或`false`。

你想要的是，可能是：`chosen_option = param_option == 1 || param_option == 2 || param_option == 3 ? param_option : 1`.

```
irb(main):036:0> chosen_option = param_option == 1 || param_option == 2 || param_option == 3 ? param_option : 1
=> 3
irb(main):037:0> chosen_option
=> 3 
```

一个常见的快捷方式是`chosen_option = [1, 2, 3].include?(param_option) ? param_option : 1`. 但在这种情况下，最好的方法是@shioyama 建议：

```
def post_filter_params
  case params[:post_filter].to_i
  when 2
    'upvotes DESC'
  when 3
    'downvotes DESC'
  # you can just fallback to else
  # when 1
  #   'created_at DESC'
  else
    'created_at DESC'
  end
end 
```

最后一个提示：考虑使用`CONSTANTS`而不是幻数，它将帮助其他人在（不长的）未来阅读您的代码和您自己:)

# perl - perl ping 失败

> ID：11968650
> 
> 赞同：2
> 
> 时间：2012-08-15T11:41:43.527
> 
> 标签：perl

```
#!/usr/bin/perl
use Net::Ping;
$p = Net::Ping->new();
my $main_ip="$ARGV[0]";

if ($p->ping($main_ip,1)){
    $result=true;
    print "$main_ip is alive \n";
}else{
    print "$main_ip is down \n";
} 
```

我正在使用上面的 perl 脚本来 ping 检查服务器。除了 IP 192.168.0.168 之外，它在所有情况下都运行良好。

```
$ perl test.pl 192.168.0.168 
```

192.168.0.168 已关闭

```
]$ ping 192.168.0.168

PING 192.168.0.168 (192.168.0.168) 56(84) bytes of data.
64 bytes from 192.168.0.168: icmp_seq=1 ttl=64 time=0.304 ms
64 bytes from 192.168.0.168: icmp_seq=2 ttl=64 time=0.355 ms
64 bytes from 192.168.0.168: icmp_seq=3 ttl=64 time=2.94 ms
64 bytes from 192.168.0.168: icmp_seq=4 ttl=64 time=0.388 ms

--- 192.168.0.168 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3292ms
rtt min/avg/max/mdev = 0.304/0.997/2.944/1.124 ms

]$ ping 192.168.0.18

PING 192.168.0.18 (192.168.0.18) 56(84) bytes of data.
From 192.168.0.181 icmp_seq=2 Destination Host Unreachable
From 192.168.0.181 icmp_seq=3 Destination Host Unreachable
From 192.168.0.181 icmp_seq=4 Destination Host Unreachable

--- 192.168.0.18 ping statistics ---
4 packets transmitted, 0 received, +3 errors, 100% packet loss, time 3292ms
pipe 3

]$ perl test.pl 192.168.0.18

192.168.0.18 is down 
```

即使我增加了 ping 超时，我也不知道，但结果相同

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:08:38.410

我能想到的唯一问题是，ping 命令默认使用 ICMP 协议，而`Net::Ping`使用 TCP。您可以通过像这样创建对象来切换`Net::Ping`到 ICMP：

```
my $p = Net::Ping->new( 'icmp' ); 
```

请注意，在 Unix 上进行 ICMP ping 需要 root 权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:46:22.073

为了发送 icmp 数据包，您必须拥有创建原始套接字的权限，即拥有 root 权限。
我想你以普通用户身份运行 ping.pl，但你需要是 root

```
ls -al `which ping`
-rws--x--x 1 root root 39640 Dec 17  2011 /bin/ping
   ^
   |
   suid bit 
```

ping 程序有一个 suid 位，它允许以 root 权限运行 ping 程序。

默认情况下，Net::Ping 尝试连接到`echo`端口 (7/tcp)，如果它得到 ECONNREFUSED - 这意味着主机已启动但拒绝连接（没有在该端口上监听）。如果超时连接中断，这意味着主机已关闭。

但！我可以通过防火墙阻止所有到 7/tcp 的连接：

```
iptables -I INPUT -p tcp --dport 7 -j DROP 
```

而且...瞧，我得到`down`了而不是`alive`

因此，您应该检查主机上的`failure pinged`防火墙

# javascript - 从 DOM 数组中移除 DOM 对象

> ID：11968652
> 
> 赞同：3
> 
> 时间：2012-08-15T11:41:52.257
> 
> 标签：javascript, jquery, dom, jquery-mobile

如果我使用`$("div:jqmData(role='page')")`它，它将返回我`DOM`对象中的页面数组。但是 jquerymobile 创建了一个没有任何 ID 的默认空白页面，因此我实际上无法通过其 ID 获取它。相反，我`$("div:jqmData(role='page')").get(0)`用来获取代表创建的默认 Page jquery 的第一个 DOM 对象。

但如果我使用`$("div:jqmData(role='page')").get(0).remove()`它不会删除页面，但它会返回错误。

谁能教我如何删除该 DOM？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T11:46:23.337

`.remove()`是一个 jQuery 方法，所以你需要一个 jQuery 对象来调用它。`.get`虽然返回一个 DOM 元素。使用[`.eq` *^([docs])*](http://api.jquery.com/eq/)来获取元素作为 jQuery 对象：

```
$("div:jqmData(role='page')").eq(0).remove() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T11:46:50.870

该[`.get()`](http://api.jquery.com/get/)函数返回 DOM 元素本身，因此您将无法`.remove()`在它之后链接 jQuery 函数（例如 ）。如果您需要这样做，请使用[`.eq()`](http://api.jquery.com/eq/)返回包装在 jQuery 对象中的单个 DOM 元素的方法，允许您进行链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:47:51.550

它不起作用，因为`.get()`返回的是底层 DOM 元素，**而不是**jQuery 对象。您可以使用`.eq()`在特定索引处访问 jQuery 对象。

所以这应该工作：

```
$("div:jqmData(role='page')").eq(0).remove() 
```

# jquery - 使用 jQuery 选择和过滤 innerHTML 文本

> ID：11968653
> 
> 赞同：0
> 
> 时间：2012-08-15T11:42:05.780
> 
> 标签：jquery, filtering, innerhtml

我还有另一个问题，尽管我认为这个问题可能不那么平凡。但是快速免责声明，这个有点开放，所以让我首先说我不是在寻找一个完整的解决方案来解决我在这里打开的更大问题，如果我扩大限制，我提前道歉可接受的参考代码包含的最低限度。我尊重你的时间，而且我更喜欢自己把这些碎片拼凑起来：P

顺便说一句，问题来了：我设置了一个 PHP 函数，它从 Twitter 提要中提取文本，然后将其作为一种“社交媒体”侧边栏发布在网站上。麻烦的是，推文中包含的链接被复制为简单的文本。例子：

```
 <p>Last night saw the USA win gold in Women's Beach Volleyball---today at 1pm... the
    USA WOMEN SOCCER team will go... http://t.co/M7rtaZFC</p> 
```

我想在最后抓取那个未链接的 URL，将其包装在一些友好的“a”标签中，然后以愉快的方式发送。除了实际过滤jQuery返回到目标'http：//'+字符串的其余部分之外，我几乎可以弄清楚所有事情。

这可能使用jQuery吗？再说一次，我不期待任何太深入的东西，只是想找人给我指出正确的方向。感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:50:19.110

## 仅使用 PHP 的第一个解决方案

我不知道你是如何抓取推文的，但我之前使用过这个 PHP 代码，它会立即打印出包含在`<a>`-tags 中的链接。所以，这里不需要使用 JavaScript：

```
// get tweets
function UtilityGetLatestTweets() {

    $user       = 'username';
    $limit      = 10;
    $value      = '';

    $curl       = curl_init();

    curl_setopt($curl, CURLOPT_URL, 'http://search.twitter.com/search.atom?q=from:' . $user . '&amp;rpp=' . $limit);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_HEADER, 0);

    $result     = curl_exec($curl);
    curl_close($curl);

    $xml        = simplexml_load_string($result);

    foreach ($xml->entry as $tweet) {   
        $value .= $tweet->content; 
    }

    return $value;
}

$tweets     = UtilityGetLatestTweets(); 
```

也许这对你有帮助。

## 编辑：使用 JavaScript 的第二种解决方案

如果你想要一个 JavaScript 解决方案，你可以这样做：

### JavaScript

```
function replaceURLWithHTMLLinks(text) {
    var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
    return text.replace(exp,"<a href='$1'>$1</a>"); 
}

// when document is loaded
$(document).ready(function () {
    // select all p-tags within a container
    $('#content p').each( function (key, value) {
        // replace the content
        $(value).html( replaceURLWithHTMLLinks($(value).text()) );
    });
}); 
```

### HTML

```
<div id="content">
    <p>Some text and link http://somethingsomething.com</p> 
    <p>Some text and link http://somethingdifferent.com</p>
</div> 
```

这假设所有`<p>`-tags 都包装在具有 ID 的容器中。

*   它结合使用**ID 选择器**和**标签选择器**：`$('#content p') 来选择所有推文
*   之后它遍历所有元素：
    *   它使用从每个条目中获取文本`$(value).text()`
    *   `replaceURLWithHTMLLinks`使用from this [answer](https://stackoverflow.com/a/37687/1456376)替换锚点
    *   `<p>`使用更新-tag的 HTML`$(value).html()`

# javascript - 为 prettyPhoto 使用不同的缩略图

> ID：11968655
> 
> 赞同：0
> 
> 时间：2012-08-15T11:42:29.027
> 
> 标签：javascript, jquery, prettyphoto

使用 prettyPhoto，我想知道当我点击链接（缩略图通过结构内的标签“附加”到该链接）时，是否有可能与显示的实际图像不同的“缩略图”？

换句话说，我在构造上有 rel="prettyPhoto"，所以 prettyPhoto 将（单个图像）显示我附加到 href 的任何内容。但我希望将单独的 ICON 用作缩略图，而不是实际图像的缩略图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:47:45.720

嗯，呵呵！:-)

是的，通过这样做：

```
<a href="url_to_be_displayed_by_prettyPhoto" rel="prettyPhoto">
  <img src="url_to_thumbnail_or_icon" />
</a> 
```

我需要更多的咖啡因！

# rotation - 偏航、俯仰和滚动到 vectorDir 和 vectorUp

> ID：11968659
> 
> 赞同：3
> 
> 时间：2012-08-15T11:43:04.830
> 
> 标签：rotation, pitch, euler-angles

我有一个对象的偏航、俯仰和滚动，我需要将其转换为 vectorDir 和 vectorUp。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:41:00.960

我会将欧拉角（偏航角、俯仰角和滚动角）转换为旋转矩阵`M`。例如，按照[这个答案](https://stackoverflow.com/a/11956867/341970)。

不是 100% 清楚你需要什么，但你是以下之一。

您可以通过将列向量乘以`x=[1,0,0]`其中一个`M`或它的转置来获得 vectorDir。

您可以通过将列向量乘以`z=[0,0,1]`其中一个`M`或它的转置来获得 vectorUp。

**笔记。**欧拉角是邪恶的，它们会破坏应用程序的稳定性，例如

*   [android方向传感器的奇怪行为](https://stackoverflow.com/q/5577334/341970)，

*   [减少 wiimote 俯仰/滚动变化](https://stackoverflow.com/q/5010978/341970)。

它们[也不适用于插值](https://stackoverflow.com/questions/5580283/interpolating-between-rotation-matrices/5580491#5580491)。

# tridion - 为项目设置 IsEditable=false 会禁用保存/关闭按钮但不禁用保存按钮？

> ID：11968661
> 
> 赞同：6
> 
> 时间：2012-08-15T11:43:17.847
> 
> 标签：tridion

我开发了一个数据扩展器类，它作用于 GetItem 和 CheckOutItem 命令来执行一些特定于业务的验证，以确定用户是否应该有权修改项目（基本上，如果它超过了工作流中的初始“作者”任务，没有人可以编辑它。默认情况下，Tridion 允许工作流程中的“审阅者”编辑项目，这在我们的业务中是禁止的）。

我相对肯定这在某一时刻有效，但现在没有。我正在探索可能发生了什么变化，但我想我会在这里问一下，以防有人知道。

如果无法修改该项目，我将 IsEditable 属性设置为 false。这实际上禁用了“保存并关闭”按钮和“保存并新建”按钮，但出于某种原因启用了“保存”按钮。我不太明白为什么会有差异。（我正在寻找是否有人以某种方式扩展了保存按钮，但我没有看到这样做）。当其他按钮不启用时，关于如何启用“保存”按钮的任何想法？

感谢您的任何建议，

〜华纳

```
public override XmlTextReader ProcessResponse(XmlTextReader reader, PipelineContext context)
{
    using (new Tridion.Logging.Tracer())
    {
        string command = context.Parameters["command"].ToString();
        if (command == CHECKOUT_COMMAND || command == GETITEM_COMMAND)
        {
            XmlDocument xmlDoc = ExtenderUtil.GetExtenderAsXmlDocument(reader);
            XmlNamespaceManager nsmgr = new XmlNamespaceManager(xmlDoc.NameTable);
            nsmgr.AddNamespace("tcm", Constants.TcmNamespace);
            try
            {
                //is this a page or component?
                XmlNode thisItemNode = null;
                thisItemNode = xmlDoc.SelectSingleNode("//tcm:Component", nsmgr) ?? xmlDoc.SelectSingleNode("//tcm:Page", nsmgr);
                if (thisItemNode == null) return ExtenderUtil.GetExtenderAsXmlTextReader(xmlDoc);
                // need to impersonate system admin in order to get workflow version of item later
                Session sessionSystemAdmin = Util.SystemAdminSession;
                XmlAttribute idAttribute = thisItemNode.Attributes.GetNamedItem("ID") as XmlAttribute;
                //if ID attribute is null, we don't have the actual object being used (just a referenced item. so, we'll ignore it)
                if (idAttribute != null)
                {
                    string itemId = idAttribute.Value;
                    VersionedItem tridionObject = Util.ObtainValidTridionIdentifiableObject(sessionSystemAdmin, itemId) as VersionedItem;
                    //logic has been moved to separate method, just for maintainablility...
                    //the logic may change when workflow code is finished.
                    bool allowSave = IsItemValidForEdit(tridionObject, nsmgr);
                    if (!allowSave)
                    {
                        //not the WIP ("author") task... make item read-only
                        Logger.WriteVerbose("setting iseditable to false for item: " + itemId);
                        XmlAttribute isEditableAttribute = thisItemNode.Attributes.GetNamedItem("IsEditable") as XmlAttribute;
                        isEditableAttribute.Value = "false";
                    }
                }
            }
            catch (Exception e)
            {
                Logger.WriteError("problem with get item data extender", ErrorCode.CMS_DATAEXTENDER_GETITEM_FAILURE, e);
            }
            return ExtenderUtil.GetExtenderAsXmlTextReader(xmlDoc);
        }
        else
        {
            return reader;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:05:10.077

大多数 Tridion GUI 可能基于所谓的允许操作提供的选项。这是列表调用（如果请求）和项目 XML 中存在的`Allow`和`Deny`属性的组合。

因此，至少您必须从`Allow`属性中删除 CheckIn 和 Edit 操作（并可能将它们添加到`Deny`属性中）。如果您查看核心服务文档（或任何其他 Tridion API 文档：这些值已经很长时间没有更改），您可以找到一个名为 Enum 的调用`Actions`来保存可能的操作及其对应的值。`Allow`和`Deny`属性只是这些数字的加法。

我提到的 CheckIn 操作是 number `2`， Edit 是`2048`。

* * *

***更新***：

我有一个小命令行程序来为我[解码 AllowedActions](http://apps.vanpuffelen.net/tridion/allowedactions.html)。[为了庆祝您的问题，我迅速将其转换为您可以在此处](http://apps.vanpuffelen.net/tridion/allowedactions.html)找到的网页。下面是主要的工作马，展示了如何解码数字以及如何操作它。在这种情况下，这都是减法，但您可以通过向其添加数字来轻松添加允许的操作。

```
var AllowedActionsEnum = {
    AbortAction:                134217728,
    ExecuteAction:               67108864,
    FinishProcessAction:         33554432,
    RestartActivityAction:       16777216,
    FinishActivityAction:         8388608,
    StartActivityAction:          4194304,
    BlueprintManagedAction:       2097152,
    WorkflowManagedAction:        1048576,
    PermissionManagedAction:       524288,
    EnableAction:                  131072,
    CopyAction:                     65536,
    CutAction:                      32768,
    DeleteAction:                   16384,
    ViewAction:                      8192,
    EditAction:                      2048,
    SearchAction:                    1024,
    RePublishAction:                  512,
    UnPublishAction:                  256,
    PublishAction:                    128,
    UnLocalizeAction:                  64,
    LocalizeAction:                    32,
    RollbackAction:                    16,
    HistoryListAction:                  8,
    UndoCheckOutAction:                 4,
    CheckInAction:                      2,
    CheckOutAction:                     1
};
function decode() {
    var original = left = parseInt(prompt('Specify Allow/Deny actions'));
    var msg = "";
    for (var action in AllowedActionsEnum) {
        if (left >= AllowedActionsEnum[action]) {
            msg += '\n' + action + ' ('+AllowedActionsEnum[action]+')';
            left -= AllowedActionsEnum[action];
        }
    }
    alert(original+msg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:04:48.127

解决方案是**真正**查看整个解决方案，并绝对肯定最近没有人偷偷插入一些与保存按钮混淆的东西，并在幕后神奇地启用它。我重新编辑了代码以显示我最初是如何拥有它的。它确实有效。它将禁用保存、保存/关闭、保存/新建按钮并禁用所有字段。我很抱歉浪费了弗兰克的时间。希望出于历史目的而将其放在这里可能会对将来有类似要求的其他人派上用场。

# c++ - 如何释放局部变量拥有的资源？

> ID：11968662
> 
> 赞同：0
> 
> 时间：2012-08-15T11:43:18.020
> 
> 标签：c++, qt

我的程序中的某些功能需要运行很长时间，以便用户可能会中断它。结构是这样的：

```
int MainWindow::someFunc1()
{
    //VP is a class defined somewhere.
    VP vp1;
    //the for loop that needs time to execute.
    return 0;
}

int MainWindow::someFunc2()
{
    VP vp2;
    //another loop that consumes time.
    return 0;
} 
```

如果用户运行其中一个函数或同时运行并单击右上角的退出，程序仍将在后台运行，直到循环结束。我尝试在 void closeEvent(QCloseEvent *) 中释放资源：</p>

```
void MainWindow::closeEvent(QCloseEvent *)
{
    vp.stopIt();
} 
```

但是由于 vp1 和 vp2 是局部变量，我不知道如何将它们传递给 closeEvent() 函数并释放资源。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:48:46.900

由于变量是在堆栈上创建的，因此它们将在其作用域结束时自动释放（`}`在您的情况下是在函数关闭时），您不必担心它们。

如果你想在函数结束*之前*释放它们，你需要重新实现函数，并且可能在函数之外自己为这些变量分配和释放内存。您将它们传递给函数的方式（将它们作为函数参数传递，或者将它们包含到类中）取决于您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T11:48:45.683

你不能。您应该将`vp1`and声明`vp2`为`MainWindow`成员变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T12:32:23.207

据我了解 OP 的要求，他正在寻找如何中断`someFunc1`或`someFunc2`何时关闭主窗口。

那些函数在GUI线程中运行，所以下面的说法是一个误解

> 程序仍将在后台运行，直到循环完成

实际发生的情况是，程序运行直到功能完成，然后用户操作由框架处理。因此，当`void MainWindow::closeEvent`执行时，后台没有任何东西在运行，并且资源已经被释放。

OP 应该移动`someFunc1`到`someFunc2`一个工作线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:15:43.233

***从理论上讲***，您可以使用 setjmp 执行此操作。这些方面的东西：

```
#include "setjmp.h"

jmp_buf doNotAttempt;
jmp_buf badPractice;

int MainWindow::someFunc1()
{
    VP vp1;
    for (...) {
        // do stuff
        if (setjmp(doNotAttempt)) { /*free resources, then: */ longjmp(badPractice,1); }
    }
    return 0;
}

// [...]

void MainWindow::closeEvent(QCloseEvent *)
{
    if (!setjmp(badPractice))
        longjmp(doNotAttempt,1);
    else
        // do the same for your other loop
} 
```

在实践中，**不要这样做**——出于各种原因，这是一个糟糕的主意。正如其他人所说，只需将 vp1 和 vp2 声明为成员变量。

# javascript - 是否可以在某些事件上更改更改地址栏或浏览器中的 url

> ID：11968663
> 
> 赞同：0
> 
> 时间：2012-08-15T11:43:25.960
> 
> 标签：javascript, html, url

你们都用过pinterest，你可以看到当你点击任何pin时，会添加一个div，并且lightbox会显示在同一页面上，但url会更改为实际pin页的url。我有相同的灯箱来显示数据，是否可以像那样更改网址？..

我要说的一件事是，我有一个链接，该链接具有调用 view() 方法的 onclick 事件，其中我正在使用 ajax 请求调用另一个页面，该页面在我的页面上显示该页面的内容，我想更改 url单击此链接并在关闭时返回上一个网址时..这是我的代码

```
function view(){
   $.get('mypage.jsp', function(html) {
   $(html).hide().appendTo('body').fadeIn(500);
   }, 'html');
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:46:10.963

此功能称为[HTML5 推送状态](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)。这是一个相关的 StackOverflow 问题，可能会提供更多见解。[使用 HTML5 History API 的好教程（Pushstate？）](https://stackoverflow.com/questions/4015613/good-tutorial-for-using-html5-history-api-pushstate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:45:18.790

我还没有检查过 Pintrest 的解决方案。但是*哈希*是你要找的吗？

```
window.location.hash="Whatever-you-want-to-add-to-the-URL" 
```

这将更`http://stackoverflow.com/posts/11968693/`改为`http://stackoverflow.com/posts/11968693/#Whatever-you-want-to-add-to-the-URL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:47:30.060

是的，使用 HTML5 的新`history`API。在触发灯箱的地方，添加如下内容：

```
var hist = window.history;
hist.pushState({ image: [IMAGE URL] }, 'lightbox', [URL]); 
```

这将在不重新加载页面的情况下更改当前 URL，并将在浏览器历史记录中创建一个条目，因此用户可以使用浏览器的后退按钮返回到之前的状态（在这种情况下，在他们打开灯箱之前）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T11:47:20.723

您可以使用历史对象上的 pushState 或 replaceState 函数来更改 url（不仅是哈希）。更多细节：[http ://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

# silverstripe - 嵌套的 getcmsfields_forpopup 显示在 silverstripe 的同一弹出窗口中

> ID：11968665
> 
> 赞同：0
> 
> 时间：2012-08-15T11:43:29.713
> 
> 标签：silverstripe

我在 silverstrip 的后端（管理面板）的 getcmsfields_forpopup 中有表单。在该表单中，我添加了嵌套的 dataobjectmanager 字段以输入多个日期（has_many 关系）。当主窗体在弹出窗口中打开并单击添加日期链接时，第二个弹出窗体在同一窗口中打开，而不是在单独的窗口中打开。这意味着在输入日期数据并保存后，当我单击关闭按钮时，整个表单将关闭，而不是返回主表单。请在这方面提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:09:38.943

这不能使用 SilverStripe 的默认弹出表单来完成，除非您扩展了 DataObject Manager 字段并让它在 iFrame 中呈现自身。

最好的选择是也使用 DataObjectManger 管理您的父 DataObjects。DataObjectManager 支持嵌套的 DataObjectManager 字段。请参阅本教程“[嵌套 DataObjectManager](http://www.youtube.com/watch?v=eeXOTlXFmQQ) ”（在 YouTube 上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:45:34.250

如果可以，我可以建议您试用 SilverStripe 3.0 吗？SilverStripe 3.0 对这种事情的支持比 2.4 好得多。

# java - 从库中扩展 Android 活动

> ID：11968672
> 
> 赞同：0
> 
> 时间：2012-08-15T11:43:47.830
> 
> 标签：java, android, inheritance, constructor

在我的 Android 项目中，我正在使用我的自定义 Android 库。

在这个库中，我定义了跟随活动（片段的一部分）：

```
public class MyLibAcitivity extends Activity {

    int  counter = 0;
    int[] results = new int[2]; 
```

在主项目中，我想扩展此活动：

```
public class MainActivity extends MyLibAcitivity { 
```

但是，我收到以下错误：

```
Implicit super constructor  is undefined for default constructor. Must define an explicit constructor 
```

我怎样才能使它起作用？

另一方面，也许我没有正确的方法。我想要实现的是将应用程序的所有逻辑都包含在库中并扩展几个类（活动）以使用不同的“数据源”——我的数据源现在是另一个 Java 类。所以基本上，在主类中，我只想将源更改为本地源，而不是从库中获取数据。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:47:31.950

`Must define an explicit constructor`

如果您在 Eclipse 上，请右键单击类代码 -> 源代码 -> 从超类生成构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T11:56:10.260

将此添加到`MyLibAcitivity`

```
public MyLibAcitivity() {
        // TODO Auto-generated constructor stub
        super();
    } 
```

# c# - Bigrock.in/.com 或 Godaddy 共享 Windows 主机上的 WCF

> ID：11968676
> 
> 赞同：0
> 
> 时间：2012-08-15T11:43:58.437
> 
> 标签：c#, windows, wcf, hosting, shared-hosting

我想知道是否`wcf service`允许将 a 托管在[http://Bigrock.in](http://Bigrock.in)或[http://bigrock.com](http://bigrock.com) [windhows shared hosting](https://www.bigrock.in/web-hosting/windows-hosting.php) 或[godaddy 的 shared windows hosting](http://www.godaddy.com/hosting/web-hosting.aspx?ci=9009)。

任何人都对上述内容有任何经验，以及这些主机上可能存在哪些限制？

如果那里不允许，有人可以建议一些我可以托管的托管计划`wcf service`吗？（正常使用，不重）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:04:40.547

是的，Bigrock 允许这样做。在 sales[at]bigrock[dot]com 上向我们发送电子邮件，我们将帮助您提供所需的任何详细信息。

# html - hierarki divs 将许多 div 集中在一排

> ID：11968679
> 
> 赞同：0
> 
> 时间：2012-08-15T11:44:27.670
> 
> 标签：html, css

我想这样做，但它们之间没有界限。

![在此处输入图像描述](../Images/9c5b000403b525588fad2f4f426a468f.png)

我遇到的问题是将许多 div 集中在一行上。当我使用`float:left`它不起作用。有人可以帮我用正确的方法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:46:57.910

将一行的 div 放到一个容器 div 中，并将其放在中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:47:06.787

您可以使用

```
display:inline-block; 
```

如果你的目标是 IE8+ 等。

认为这适用于 IE6-7

```
display:inline-block;
*display:inline;
zoom:1; 
```

# c - 常量、文字和全局变量在哪里获得空间

> ID：11968680
> 
> 赞同：0
> 
> 时间：2012-08-15T11:44:30.903
> 
> 标签：c, memory, memory-management

我最近了解到，可以使用指针更改 c 中的常量值，但对于字符串文字却不可能。可能的解释在于常量和其他字符串在空间中的可修改区域中分配空间，而字符串文字在空间中的不可修改区域（可能是代码段）中分配空间。我编写了一个程序来显示这些变量的地址。输出也显示出来。

```
#include <stdio.h>
int x=0;
int y=0;

int main(int argc, char *argv[])
{
    const int a =5;
    const int b;
    const int c =10;
    const char *string = "simar";   //its a literal, gets space in code segment
    char *string2 = "hello";
    char string3[] = "bye"; // its array, so gets space in data segment
    const char string4[] = "guess";
    const int *pt;
    int *pt2;

    printf("\nx:%u\ny:%u Note that values are increasing\na:%u\nb:%u\nc:%u Note that values are dec, so they are on stack\nstring:%u\nstring2:%u Note that address range is different so they are in code segment\nstring3:%u Note it seems on stack as well\nstring4:%u\n",&x,&y,&a,&b,&c,string,string2,string3,string4); 
} 
```

![在此处输入图像描述](../Images/37e04bc6921dd361c9a584d97e70f4d8.png)

请解释这些变量究竟在哪里获得空间？全局变量从哪里获得空间，常量从哪里获得，字符串文字从哪里获得？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:04:59.200

“可能”夸大了情况。

您可以编写尝试修改 const 对象的代码（例如，通过将其地址转换为指向非 const 类型的指针）。您还可以编写尝试修改字符串文字的代码。

在这两种情况下，您的代码都有未定义的行为，这意味着标准并不关心发生了什么。实现可以做它喜欢做的事情，而发生的事情通常是其他重要事情的意外副作用。你不能依赖这种行为。简而言之，该代码是错误的。这对于定义为 的对象`const`和字符串文字都是如此。

可能在特定实现上，效果是更改对象或文字。可能是在另一个实现中，您遇到访问错误并且程序崩溃。可能是在第三种实现中，您有时会得到一种行为，而有时会得到另一种行为。可能会发生完全不同的事情。

它是特定于实现的，变量在哪里获得空间，但在典型的实现中：

*   `x`并且`y`在可修改的数据段中
*   `a`在堆栈上。如果不是因为您获取了它的地址，那么可以完全优化变量存储，并且`5`在编译器为使用`a`.
*   `b`我认为是一个错误——未初始化的 const 对象。也许这是允许的，但编译器可能应该发出警告。
*   `c`在堆栈上，与 相同`a`。
*   文字“simar”等都在代码段、只读数据段或可修改数据段中，如果实现不打扰rodata的话。
*   `string3`并且`string4`是堆栈上的数组。每个都是通过复制字符串文字的内容来初始化的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:02:01.037

> 我最近了解到可以使用指针更改 c 中的常量值

这样做会导致未定义的行为（参见标准 6.7.3），这意味着任何事情都可能发生。实际上，您可以在某些基于 RAM 的系统上修改常量。

> 字符串文字不可能

这同样是未定义的行为，可能有效，也可能无效，或者可能导致硬盘冒出蓝烟。

> 可能的解释在于常量和其他字符串在空间中的可修改区域中分配空间，而字符串文字在空间中的不可修改区域中分配空间

这取决于系统。在某些系统上，它们都位于常量/虚拟 RAM 段中，在某些系统上，它们可能位于非易失性闪存中。如果不指定您正在谈论的系统，则讨论事物最终在内存中的位置是没有意义的。没有通用案例。

# mysql - 将 Ant 参数作为字符串传递给 mysql 查询

> ID：11968681
> 
> 赞同：0
> 
> 时间：2012-08-15T11:44:32.337
> 
> 标签：mysql, ant, phpmyadmin

我正在使用下面的语句在我的 mysql 数据库中添加一条记录，其中每列的类型均为 longtext，但似乎无法正常工作，并且我收到此消息“您的 sql 语句中有错误

```
 <sql
     driver="${DB_DRIVER}"  
     url="${DB_URL}"
     userid="${DB_USER}"
     password="${DB_PASSWORD}"
     print="yes" 
     classpathref="antclasspath">

     INSERT INTO `book_logs`(`bookName`, `logFile`, `description`) VALUES (${build_log_filename},${build_log_dir},${FAIL_MESSAGE})
    </sql> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:24:59.320

尝试将以下查询与配额一起使用：

```
 INSERT INTO `book_logs`(`bookName`, `logFile`, `description`) VALUES ('${build_log_filename}','${build_log_dir}','${FAIL_MESSAGE}') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:25:32.983

你也需要围绕值的`。否则 sql 将无效：

```
INSERT INTO `book_logs`(`bookName`, `logFile`, `description`) 
VALUES (`${build_log_filename}`,`${build_log_dir}`,`${FAIL_MESSAGE}`) 
```

# android - Android - 加入特定wifi网络时自动启动服务

> ID：11968686
> 
> 赞同：1
> 
> 时间：2012-08-15T11:44:43.070
> 
> 标签：android, service, wifi

我正在尝试构建一个应用程序/服务，该应用程序/服务将在我每次连接到特定的 wifi 网络时执行一些编码（登录到该网络，然后保持连接处于活动状态）。我已经有了登录部分的代码并且工作正常，但我真的不知道如何在连接到网络时自动运行此代码。

理想情况下，我想构建一个服务，它在我加入特定的 wifi 网络时启动，保持连接处于活动状态（比如每 10 分钟发出一次请求以保持连接处于活动状态），最后在我离开该网络时停止。

我知道如何构建服务并使其保持活动状态，但不知道如何在加入/离开 wifi 网络时自动启动和停止它。任何有关如何做到这一点的建议表示赞赏。如果我的方法不正确并且有更好/更简单的方法可以做到这一点，请告诉我

问候，

马塞尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:48:39.203

你需要一个广播接收器。此广播接收器将接收 Wifi 连接和 wifi 断开操作的广播，您可以从那里开始和停止您的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:19:08.967

实现一个[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)监听扫描结果`WifiManager.startScan()`

看看[Android 扫描 Wifi 网络](https://stackoverflow.com/a/3456770/432903)

# python - 无法获得 supervisord 监控进程的输出

> ID：11968687
> 
> 赞同：3
> 
> 时间：2012-08-15T11:44:46.770
> 
> 标签：python, monitoring, supervisord

我创建了一个测试可执行文件，以查看是否可以捕获由 Supervisord 监控的程序的输出。

**测试器.py：**

```
#! /usr/bin/env python

import time, os
pid = os.getpid()
print "EXECUTING ON %s" % pid
while True:
    time.sleep(5)
    print "HOLLER %s" % pid 
```

**supervisord.conf：**

```
[program:mytester]
command={path}/tester.py 
```

但是当我尝试`tail`在 supervisorctl 的进程上运行时，什么都没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-29T17:03:32.070

自从您问以来已经有一段时间了，但是如果您仍然感兴趣并且对于遇到同样问题的任何人：

在这种情况下，Python 正在缓冲输出，在刷新到标准输出之前您不会看到它。您可以在程序中强制刷新`sys.stdout.flush()`，但可能最干净的修复方法是使用 Python 解释器的标志在*无缓冲模式下运行脚本：*`-u`

**supervisord.conf**

```
[program:mytester]
command=python -u {path}/tester.py 
```

（遇到同样的问题，在 supervisord 的[邮件列表](https://lists.supervisord.org/pipermail/supervisor-users/2008-October/000291.html)中找到了解决方案）

# python - python多线程等待所有线程完成

> ID：11968689
> 
> 赞同：161
> 
> 时间：2012-08-15T11:44:54.437
> 
> 标签：python, multithreading

这可能是在类似的情况下被问到的，但在搜索了大约 20 分钟后我无法找到答案，所以我会问。

我写了一个 Python 脚本（比如说：scriptA.py）和一个脚本（比如说 scriptB.py）

在 scriptB 中，我想用不同的参数多次调用 scriptA，每次运行大约需要一个小时，（它是一个巨大的脚本，做了很多事情......别担心），我希望能够运行scriptA 同时包含所有不同的参数，但我需要等到所有参数都完成后再继续；我的代码：

```
import subprocess

#setup
do_setup()

#run scriptA
subprocess.call(scriptA + argumentsA)
subprocess.call(scriptA + argumentsB)
subprocess.call(scriptA + argumentsC)

#finish
do_finish() 
```

我想同时运行所有`subprocess.call()`，然后等到它们都完成，我该怎么做？

我尝试像[这里](http://www.saltycrane.com/blog/2008/09/simplistic-python-thread-example/)的示例一样使用线程：

```
from threading import Thread
import subprocess

def call_script(args)
    subprocess.call(args)

#run scriptA   
t1 = Thread(target=call_script, args=(scriptA + argumentsA))
t2 = Thread(target=call_script, args=(scriptA + argumentsB))
t3 = Thread(target=call_script, args=(scriptA + argumentsC))
t1.start()
t2.start()
t3.start() 
```

但我认为这是不对的。

我怎么知道他们在去我的地方之前都跑完了`do_finish()`？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-08-15T12:00:03.550

将线程放在一个列表中，然后使用[Join 方法](https://docs.python.org/3/library/threading.html#threading.Thread.join)

```
 threads = []

 t = Thread(...)
 threads.append(t)

 ...repeat as often as necessary...

 # Start all threads
 for x in threads:
     x.start()

 # Wait for all of them to finish
 for x in threads:
     x.join() 
```

* * *

## 回答 #2

> 赞同：191
> 
> 时间：2012-08-15T11:54:27.147

您需要在脚本末尾使用对象的[连接](http://docs.python.org/library/threading.html#threading.Thread.join)方法。`Thread`

```
t1 = Thread(target=call_script, args=(scriptA + argumentsA))
t2 = Thread(target=call_script, args=(scriptA + argumentsB))
t3 = Thread(target=call_script, args=(scriptA + argumentsC))

t1.start()
t2.start()
t3.start()

t1.join()
t2.join()
t3.join() 
```

因此主线程将等待直到`t1`，`t2`并`t3`完成执行。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2016-05-20T08:02:14.377

在 Python3 中，由于 Python 3.2 有一种新方法可以达到相同的结果，我个人更喜欢传统的线程创建/启动/加入，包`concurrent.futures`：[https ://docs.python.org/3/library/concurrent.futures .html](https://docs.python.org/3/library/concurrent.futures.html)

使用`ThreadPoolExecutor`代码将是：

```
from concurrent.futures.thread import ThreadPoolExecutor
import time

def call_script(ordinal, arg):
    print('Thread', ordinal, 'argument:', arg)
    time.sleep(2)
    print('Thread', ordinal, 'Finished')

args = ['argumentsA', 'argumentsB', 'argumentsC']

with ThreadPoolExecutor(max_workers=2) as executor:
    ordinal = 1
    for arg in args:
        executor.submit(call_script, ordinal, arg)
        ordinal += 1
print('All tasks has been finished') 
```

前面代码的输出类似于：

```
Thread 1 argument: argumentsA
Thread 2 argument: argumentsB
Thread 1 Finished
Thread 2 Finished
Thread 3 argument: argumentsC
Thread 3 Finished
All tasks has been finished 
```

优点之一是您可以控制设置最大并发工作人员的吞吐量。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2015-08-05T11:19:32.630

我更喜欢使用基于输入列表的列表推导：

```
inputs = [scriptA + argumentsA, scriptA + argumentsB, ...]
threads = [Thread(target=call_script, args=(i)) for i in inputs]
[t.start() for t in threads]
[t.join() for t in threads] 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-30T15:07:45.410

您可以拥有类似下面的类，您可以从中添加“n”个要并行执行的函数或控制台脚本，然后开始执行并等待所有作业完成。

```
from multiprocessing import Process

class ProcessParallel(object):
    """
    To Process the  functions parallely

    """    
    def __init__(self, *jobs):
        """
        """
        self.jobs = jobs
        self.processes = []

    def fork_processes(self):
        """
        Creates the process objects for given function deligates
        """
        for job in self.jobs:
            proc  = Process(target=job)
            self.processes.append(proc)

    def start_all(self):
        """
        Starts the functions process all together.
        """
        for proc in self.processes:
            proc.start()

    def join_all(self):
        """
        Waits untill all the functions executed.
        """
        for proc in self.processes:
            proc.join()

def two_sum(a=2, b=2):
    return a + b

def multiply(a=2, b=2):
    return a * b

#How to run:
if __name__ == '__main__':
    #note: two_sum, multiply can be replace with any python console scripts which
    #you wanted to run parallel..
    procs =  ProcessParallel(two_sum, multiply)
    #Add all the process in list
    procs.fork_processes()
    #starts  process execution 
    procs.start_all()
    #wait until all the process got executed
    procs.join_all() 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-03-14T13:35:32.590

我刚刚遇到了同样的问题，我需要等待使用 for 循环创建的所有线程。我刚刚尝试了以下代码。它可能不是完美的解决方案，但我认为这将是一个简单的解决方案去测试：

```
for t in threading.enumerate():
    try:
        t.join()
    except RuntimeError as err:
        if 'cannot join current thread' in err:
            continue
        else:
            raise 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-10T09:55:24.220

从`threading` [模块文档](https://docs.python.org/3/library/threading.html#thread-objects)

> 有一个“主线程”对象；这对应于 Python 程序中的初始控制线程。它不是一个守护线程。
> 
> 有可能会创建“虚拟线程对象”。这些是对应于“外来线程”的线程对象，它们是在线程模块之外启动的控制线程，例如直接从 C 代码。虚拟线程对象的功能有限；他们总是被认为是活着的和恶魔般的，不能被`join()`编辑。它们永远不会被删除，因为无法检测到外来线程的终止。

因此，当您对保留创建的线程列表不感兴趣时​​，要捕获这两种情况：

```
import threading as thrd

def alter_data(data, index):
    data[index] *= 2

data = [0, 2, 6, 20]

for i, value in enumerate(data):
    thrd.Thread(target=alter_data, args=[data, i]).start()

for thread in thrd.enumerate():
    if thread.daemon:
        continue
    try:
        thread.join()
    except RuntimeError as err:
        if 'cannot join current thread' in err.args[0]:
            # catchs main thread
            continue
        else:
            raise 
```

于是：

```
>>> print(data)
[0, 4, 12, 40] 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-06T12:31:22.750

也许，像

```
for t in threading.enumerate():
    if t.daemon:
        t.join() 
```

# mysql - 带有 INNER JOIN 的 UPDATE 失败，但相关的 SELECT 语句有效

> ID：11968696
> 
> 赞同：2
> 
> 时间：2012-08-15T11:45:24.727
> 
> 标签：mysql, sql-update, inner-join

是否有以下 UPDATE 语句产生错误的原因

```
UPDATE `t1`
INNER JOIN `t2` ON `t2`.`id`=`t1`.`t2_id`
INNER JOIN `t3` ON `t2`.`t3_id` = `t3`.`id` AND `t3`.`a_id` = '123'
WHERE `t2`.`date` > '2012-08-14'
    AND `t2`.`status` = 'pending'
SET `t1`.`active` = '0'; 
```

我得到的错误是：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `t2`.`date` > '2012-08-14' AND `t2`.`statu' at line 4 
```

以下（相关）SELECT 语句可以正常工作

```
SELECT `t1`.*
FROM `t1`
INNER JOIN `t2` ON `t2`.`id`=`t1`.`t2_id`
INNER JOIN `carer` ON `t2`.`t3_id` = `t3`.`id` AND `t3`.`a_id` = '123'
WHERE `t2`.`date` > '2012-08-14'
    AND `t2`.`status` = 'pending' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T11:47:10.583

MySQL 的[`UPDATE`语法](http://dev.mysql.com/doc/refman/5.5/en/update.html)是：

```
UPDATE [LOW_PRIORITY] [IGNORE] table_references  
    SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...  
    [WHERE where_condition] 
```

用这个：

```
UPDATE `t1`
INNER JOIN `t2` ON `t2`.`id`=`t1`.`t2_id`
INNER JOIN `t3` ON `t2`.`t3_id` = `t3`.`id` AND `t3`.`a_id` = '123'

SET `t1`.`active` = '0'

WHERE `t2`.`date` > '2012-08-14'
    AND `t2`.`status` = 'pending' ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-05T19:00:54.090

使用此语法来做到这一点：

```
UPDATE r
INNER JOIN ENGING_DERIVE r
FROM ENGING_DERIVE
SET r.TUNING_PERFORM = r.BORE * r.STROKE
WHERE t.ID = t.ID; 
```

# post - Lua 中的 Get 和 Post 方法

> ID：11968697
> 
> 赞同：0
> 
> 时间：2012-08-15T11:45:27.933
> 
> 标签：post, login, get, lua, gideros

我需要一个 Lua 中的方法。这个方法应该像 php 中的 post 和 get 方法一样工作。我需要它来用 lua 构建一个简单的登录页面。我需要用 Lua 做什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:43:51.263

使用[Luasockets](http://w3.impa.br/~diego/software/luasocket/http.html)怎么样？显然 gideros[安装](http://appcodingeasy.com/Gideros-Mobile/Using-LuaSocket-in-Gideros)了 luasocket 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:02:08.633

如果您希望它充当 Web 服务器，您可能需要像 Xavante 这样的东西。

除此之外，前面提到的 luasockets 还有一些 HTTP 功能；你应该看看它的文档。

# ruby-on-rails - ActiveRecord 限制关联计数与 nested_form gem 和 accept_nested_attributes, allow_destroy => true

> ID：11968700
> 
> 赞同：2
> 
> 时间：2012-08-15T11:45:37.287
> 
> 标签：ruby-on-rails, validation, activerecord, nested-attributes

我想将我的关联限制为两个（每个范围之一）。我试过了：

```
has_many :associations
has_many :associations_with_first_scope, :class_name => 'Association', :conditions => {...}
has_many :associations_with_second_scope, :class_name => 'Association', :conditions => {...}

validates :associations, {:maximum => 4}
validates :associations_with_first_scope, {:maximum => 2}
validates :associations_with_second_scope, {:maximum => 2} 
```

我还尝试了自定义验证器（我也尝试了计数、大小和长度）：

```
validate :custom_associations_limit

def custom_associations_limit
  error.add(:base, '...') if associations_with_first_scope.size > 2
  error.add(:base, '...') if associations_with_second_scope.size > 2
end 
```

我还尝试将验证放入关联模型中。没有任何效果。我认为我的问题是由使用 nested_form gem 引起的。当我有四个关联的表格（每种两个）并且我将删除拖曳并添加拖曳时，模型认为它有六个关联而不是四个。因为它可能在通过 nested_attributes 之前进行验证（allow_destroy 设置为 true）。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:12:15.577

[Rails 已经通过has_one](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one)宏内置了这个功能。

```
has_many :associations
has_one :associations_with_first_scope, :class_name => 'Association', :conditions => {...}
has_one :associations_with_second_scope, :class_name => 'Association', :conditions => {...} 
```

唯一的区别是您不会使用复数关联，因为只会有一个。

# javascript - 旋转嵌入在html中的谷歌地图

> ID：11968701
> 
> 赞同：2
> 
> 时间：2012-08-15T11:45:41.550
> 
> 标签：javascript, css, html

我将制作一个应用程序，它有一个特殊的部分来显示嵌入式谷歌地图。起初一切正常但是当我旋转我的设备时，地图超出了定义的宽度并失去了它的 css 类（它不能应用我使用的 220px 的宽度）。

{ // 无论如何，当我触摸地图时，它会正常，它会达到它的宽度 // } { // 我正在使用 Twitter Bootstrap // }

我的这个大问题的解决方案是什么？

我正在等待您的友好答复。

这是嵌入的谷歌地图：

```
 <article class="container">
     .
     .
     .
     ...( some tags go here )

           <section class="span12">
        <div class="map">
            <iframe width="80%" height="50%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/?ie=UTF8&amp;ll=39.6846,-104.88802&amp;spn=0.088114,0.209255&amp;t=m&amp;z=13&amp;output=embed">
            </iframe>
        </div>
           </section>

    </article> 
```

这是我正在使用的 CSS 类：

```
 @media (max-width: 400px) {
  .map {width: 220px;}
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:32:27.807

呵呵 :-DI 终于找到了解决方案：

*iframe* HTML5 标签在这方面是没有用的，因为它不支持设备方向。所以它必须被删除，我使用了一个 id="mapDiv" 的 div 来代替：

```
 <body onLoad="initialize()"> <!-- Important -->
       <article class="container">
       .
       .
       .
       ...( some tags go here )

            <section class="span12">
                <div id="mapDiv"> </div> <!-- Changed -->
            </section>

       </article> 
     </body> 
```

根据 Sven Bieder 的评论，我使用了这样的谷歌地图 API：

```
/*Added javascript*/
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">

 function initialize() {
     var position = new google.maps.LatLng(38.89655520572012, -77.03372955322266); /*Here is the coordinates of the specific place we want to mark on map*/
     var myOptions = {
     zoom: 15,
     center: position,
     mapTypeId: google.maps.MapTypeId.ROADMAP,
     };
     var map = new google.maps.Map(
     document.getElementById("mapDiv"), myOptions);

     var marker = new google.maps.Marker({
     position: position,
     map: map,
     title:"We are here.",
     }); 
     }
</script> 
```

那么设备方向问题现在已经解决了:-)

以下是#mapDiv 的一些可选 CSS：

```
 #mapDiv {
     width: 100%;
     height: 300px;
     margin: auto;
     -moz-box-shadow: 1px 2px 12px #999999;
     -webkit-box-shadow: 1px 2px 12px #999999;
     border-radius: 8px;
   } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T13:39:55.623

添加此样式将旋转 div

```
div
{
  transform:rotate(7deg);
  -ms-transform:rotate(7deg); /* IE 9 */
  -moz-transform:rotate(7deg); /* Firefox */
  -webkit-transform:rotate(7deg); /* Safari and Chrome */
  -o-transform:rotate(7deg); /* Opera */
}

<div style="transform:rotate(90deg); -ms-transform:rotate(90deg); /* IE 9 */ -moz-transform:rotate(90deg); /* Firefox */ -webkit-transform:rotate(90deg); /* Safari and Chrome */ -o-transform:rotate(90deg); /* Opera */" class="map">
        <iframe width="80%" height="50%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/?ie=UTF8&amp;ll=39.6846,-104.88802&amp;spn=0.088114,0.209255&amp;t=m&amp;z=13&amp;output=embed">
        </iframe>
    </div> 
```

# java - MapField 在黑莓设备 9320 上不起作用

> ID：11968702
> 
> 赞同：3
> 
> 时间：2012-08-15T11:45:45.617
> 
> 标签：java, blackberry, blackberry-eclipse-plugin

我开发了一个使用 mapField 的黑莓应用程序。在模拟器上，地图字段显示加拿大某处的地图图像并获取坐标。当我在设备上进行测试时，我得到一个空白的白色屏幕，但长坐标和纬度坐标确实更新了。我的设备上似乎没有“地图”应用程序，当我尝试下载黑莓地图应用程序时，我被告知软件不兼容

我使用的是黑莓 9320，固件 7.1.0 平台 9.49。

地图场过时了吗？

# wpf - 开始 WPF 测试的最简单和最便宜的方法

> ID：11968705
> 
> 赞同：1
> 
> 时间：2012-08-15T11:45:52.277
> 
> 标签：wpf, testing, automated-tests

我有一个（封闭源代码）WPF 应用程序，主要包含两个模块：一个 UI exe 和一个“模型”dll。一个屏幕（目前）和大约 30 个课程。

我想开始使用测试工具对其进行测试。

我有更清晰的。

我没有时间:)。我不想学习工厂、模拟、IOC 等等。而且我不想过多地干扰代码（重新 IOC 等）

我没有很多钱。我在这里看到了[SmartBear 的 TestComplete](http://smartbear.com/products/qa-tools/automated-testing-tools)的推荐，然后我看到了它 2000 美元的价格标签，我对价格犹豫不决：99 美元我会为薪水而哭泣，而你无法获得免费 :)

所以，我的问题是：“**对我来说，开始 WPF 测试的最简单和最便宜的方法是什么，不一定是*最好*的解决方案，但可以以低成本提供一些好处？** ”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:49:25.427

如果你想去自由路线，你可以看看 System.Windows.Automation 命名空间：http: [//msdn.microsoft.com/en-us/library/system.windows.automation.aspx](http://msdn.microsoft.com/en-us/library/system.windows.automation.aspx)

请参阅这篇文章：http: [//msdn.microsoft.com/en-us/magazine/dd483216.aspx](http://msdn.microsoft.com/en-us/magazine/dd483216.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:00:28.643

可能最简单的方法是专注于 30 个类（非 GUI）进行测试。似乎（但我不确定）大多数功能都在这 30 个类中。

如果设计得好，模型（这 30 个类）可以相当容易地进行测试。对于 GUI 测试，通常需要付出更多的努力。

因此，如果您想花更少的时间，请专注于测试模型。

为了测试模型，您通常做的是：为外部组件编写存根（如果需要），设置输入参数（取决于您的应用程序）并检查“输出”是否符合您的预期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T12:08:13.490

一种免费且有趣的方法是 Approval Tests：[http](http://approvaltests.sourceforge.net/) ://approvaltests.sourceforge.net/ 。您基本上会“批准”您的 UI，然后针对您的应用执行测试。如果生成的 UI 与批准的版本不匹配，则测试失败。此处的比较基于您的 UI 图像 - 与其他测试方法相比，这显然有利有弊。

此视频是使用 WPF 进行批准测试的示例：[http ://www.youtube.com/watch?v=Xc_ty03lZ9U&list=PL0C32F89E8BBB5368&index=17&feature=plpp_video](http://www.youtube.com/watch?v=Xc_ty03lZ9U&list=PL0C32F89E8BBB5368&index=17&feature=plpp_video)

# php - 在数据库中保存 é 而不是 é

> ID：11968706
> 
> 赞同：0
> 
> 时间：2012-08-15T11:45:54.273
> 
> 标签：php, mysql

我在互联网上阅读了很多关于字符集的内容，但大多数时候人们希望将 é 保存在数据库中而不是 é 中。

我需要保存 é 而不是 é。目前字符串用 é 保存，有谁知道我需要选择哪个字符集，以便在我的 MySQL 数据库中保存为 é？

这是使我的离线数据库与我的在线数据库兼容所必需的。

# php - vbulletin - 如何将整个内容包装在我自己的页眉和页脚中？

> ID：11968707
> 
> 赞同：0
> 
> 时间：2012-08-15T11:45:54.057
> 
> 标签：php, vbulletin

是否可以将 vbulletin 包装在我自己的页眉和页脚中？我需要编辑哪些文件？我想把整个东西放在我网站的框架内......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:49:51.500

你应该去 ACP - 样式和模板 - 样式管理器 - 你的样式 - 编辑模板 - 页眉（和页脚）

# jquery - jQuery Mobile 显示隐藏的选择元素

> ID：11968710
> 
> 赞同：8
> 
> 时间：2012-08-15T11:46:18.697
> 
> 标签：jquery, jquery-mobile

用 .查看这个`select`元素`display:none`。在 jQuery Mobile 中，尽管如此，它仍会显示：

```
<select id="dddd" name="dddd"
        data-mini="true" data-native-menu="false" data-theme="c"
        onChange=""
        style="display:none">     
  <option value="1">An optinos</option>
</select> 
```

我正在尝试显示/隐藏`select`依赖于其他用户操作的 jQuery Mobile 元素，因此我为什么要执行上述操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T13:23:58.227

当您的页面加载时，jQuery Mobile 会增强您的页面以使其具有移动外观。不幸的是，jQuery mobile 目前存在一个问题，它无法将自定义类（甚至自定义样式，通过 style 属性）附加到增强元素。请检查[https://github.com/jquery/jquery-mobile/issues/3577](https://github.com/jquery/jquery-mobile/issues/3577)的问题。作为此问题仍未解决的解决方法，您实际上可以将其包装在 div 元素中，并改为控制 div 包装器的显示。

```
<div id="dddd-wrapper" class="ui-screen-hidden">
  <select data-mini="true" data-native-menu="false" id="dddd" name="dddd" data-theme="c"     onChange="" style="display:none">     
    <option value="1">An optinos</option>
  </select>
</div> 
```

`ui-screen-hidden`是用于隐藏元素的 jquery mobile 定义的样式规则（在 jquery.mobile..css 中）。

# javascript - 是否可以从商店前端使用 shopify api？

> ID：11968712
> 
> 赞同：3
> 
> 时间：2012-08-15T11:46:22.570
> 
> 标签：javascript, ajax, api, shopify

我可以开发一个shopify应用程序，我可以使用shopify_api（在rails中），我可以做很多事情，但我可以找到从前端使用api的方法......我想开发一个ajax过滤器前端，但是如果我不能使用API​​，我将无法做到......

如何从前端访问 API？可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:40:30.133

是的。你可以。如果您有一个可通过 URL 访问的应用程序，并且您想要对它进行 HTTP Post|Get|Put|Delete，您只需制作您的 Ajax 调用并将其发送到您的 URL。

由于您现在要进行跨域 Ajax，因此您负责实现 CORS 或使用 JSONP。你的选择。两者都运作良好。

更好的是，设置一个 App Proxy，您可以安全地接受 Ajax 到端点并返回您需要的任何数据，知道请求来自 Shopify，这比 CORS 或 JSONP 更好。

请注意，如果您想使用产品标签实现过滤，您可以使用 App Proxy 执行此操作，并通过渲染 Liquid 将您的结果从 App 传递回商店店面。那可能也适合你。

因此，您当然可以尝试从前端使用 API。

# java - Android：线程中的运行时异常

> ID：11968714
> 
> 赞同：0
> 
> 时间：2012-08-15T11:46:25.273
> 
> 标签：java, android

我正在构建一个 android 应用程序，该应用程序涉及从文件中读取文本并对它们进行一些操作。我正在使用线程（我将输入流对象（in）传递给线程（AsyncTask））。我已经成功地从文件中提取了模式，但是在我将 ArrayList 转换为 String 数组的下一行中发生了错误（在调试模式下）。

```
String[] str=a.toArray(new String[a.size()]); 
```

我的代码是（在doInBackground里面）：

```
BufferedReader br = new BufferedReader(new InputStreamReader(in));
String strLine;
while ((strLine = br.readLine()) != null) {
    Matcher m = MY_PATTERN.matcher(strLine);
    a = new ArrayList<String>();
    while (m.find()) {
        a.add(m.group(1));
        // s now contains "BAR"
    }
    String[] str=a.toArray(new String[a.size()]);//ERROR STEP
              double ltdo=(Math.round(Double.parseDouble(lt)*100.0)/100.0);
              double lodo=(Math.round(Double.parseDouble(lo)*100.0)/100.0);
} 
```

我的目录错误是：

```
08-15 16:38:12.980: I/global(384): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
08-15 16:38:52.972: W/dalvikvm(384): threadid=8: thread exiting with uncaught exception (group=0x4001d800)
08-15 16:38:53.360: E/AndroidRuntime(384): FATAL EXCEPTION: AsyncTask #1
08-15 16:38:53.360: E/AndroidRuntime(384): java.lang.RuntimeException: An error occured while executing doInBackground()
08-15 16:38:53.360: E/AndroidRuntime(384):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-15 16:38:53.360: E/AndroidRuntime(384):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-15 16:38:53.360: E/AndroidRuntime(384):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-15 16:38:53.360: E/AndroidRuntime(384):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-15 16:38:53.360: E/AndroidRuntime(384):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-15 16:38:53.360: E/AndroidRuntime(384):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-15 16:38:53.360: E/AndroidRuntime(384):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-15 16:38:53.360: E/AndroidRuntime(384):  at java.lang.Thread.run(Thread.java:1096)
08-15 16:38:53.360: E/AndroidRuntime(384): Caused by: java.lang.NullPointerException
08-15 16:38:53.360: E/AndroidRuntime(384):  at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:263)
08-15 16:38:53.360: E/AndroidRuntime(384):  at java.lang.Double.parseDouble(Double.java:287)
08-15 16:38:53.360: E/AndroidRuntime(384):  at my.GPS.FindLocation.doInBackground(FindLocation.java:67)
08-15 16:38:53.360: E/AndroidRuntime(384):  at my.GPS.FindLocation.doInBackground(FindLocation.java:1)
08-15 16:38:53.360: E/AndroidRuntime(384):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-15 16:38:53.360: E/AndroidRuntime(384):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-15 16:38:53.360: E/AndroidRuntime(384):  ... 4 more 
```

# c# - 打印机日志扩展信息

> ID：11968716
> 
> 赞同：0
> 
> 时间：2012-08-15T11:46:29.663
> 
> 标签：c#, windows

我已经构建了一个小软件来获取和保存打印机日志详细信息。我正在阅读 Windows 系统事件日志以获取发送到打印队列的每个打印作业的数据。在研究了一些商业软件之后，我可以看到他们从 System Eventlog 中获得了更多信息，例如纸张大小、份数和灰度。

有没有其他方法可以获取这些打印作业的详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:49:48.080

是的。您可以编写驱动程序软件或作为打印机驱动程序安装的服务或连接到驱动程序通信接口的服务，以读取和保存用户打印时发生的确切情况。

# c# - 在类中传递一个 INotifyProperty 以便更改传播回来

> ID：11968722
> 
> 赞同：0
> 
> 时间：2012-08-15T11:46:56.090
> 
> 标签：c#, .net, wpf

我已经实现了一个类，它负责异步加载对象并相应地更改光标，即在**UpdateCursor**方法中：

```
 static Cursor cursor;

    public AsyncLoader(Func<CbT> request, Callback callback, Cursor cursor)
    {
        this.request = request;
        this.callback = callback;
        AsyncLoader<CbT>.cursor = cursor;

        LatestRequestId = Guid.NewGuid();
        UpdateCursor();
        ...
    }

    void UpdateCursor()
    {
        if (LatestRequestId == Guid.Empty)
        {
            cursor = Cursors.Arrow;
        }
        else
        {
            cursor = Cursors.AppStarting;
        }
    } 
```

在我要使用这个类的类中，我有 Cursor 属性，它实现了 INotifyProperty 并且它绑定到窗口的光标：

```
 private Cursor _CurrentCursor;
    public Cursor CurrentCursor
    {
        get { return _CurrentCursor; }
        set
        {
            if (value != _CurrentCursor)
            {
                _CurrentCursor = value;
                OnPropertyChanged("CurrentCursor");
            }
        }
    } 
```

在视图中：

```
 Cursor="{Binding CurrentCursor}" 
```

问题是，如何将 CurrentCursor 传递给 AsyncLoader，以便在 UpdateCursor 运行时，更改将反映回 CurrentCursor 并触发 PopertyChange 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:00:53.683

解决方案之一是创建一个界面

```
interface ICursorHolder{
    Cursor CurrentCursor{get;set;}
} 
```

将 ICursorHolder 类型的实例传递给 AsyncLoader 并使用 Cursor 属性在您的类中实现此接口

```
public AsyncLoader(Func<CbT> request, Callback callback, ICursorHolder cursorHolder)
{
    this.request = request;
    this.callback = callback;
    AsyncLoader<CbT>.cursorHolder = cursorHolder;//change according to your logic

    LatestRequestId = Guid.NewGuid();
    UpdateCursor();
    ...
}

void UpdateCursor()
{
    if (LatestRequestId == Guid.Empty)
    {
        cursorHolder.Cursor = Cursors.Arrow;
    }
    else
    {
        cursorHolder.Cursor = Cursors.AppStarting;
    }
} 
```

和你的班级

```
public class ShellPresenter: PresenterBase, ICursorHolder{   
    private Cursor _CurrentCursor;
    public Cursor CurrentCursor
    {
        get { return _CurrentCursor; }
        set {
            if (value != _CurrentCursor){
                _CurrentCursor = value;
                OnPropertyChanged("CurrentCursor");
            }
        }
    }    
} 
```

**更新1**

更新了示例代码

**更新2**

```
private void CallAsync(){
   ShellPresenter shell=GetInstance();
   Loader.AsyncLoader(request,callback, shell);

} 
```

# python - 枚举压缩列表时如何避免嵌套元组解包？

> ID：11968729
> 
> 赞同：0
> 
> 时间：2012-08-15T11:47:09.917
> 
> 标签：python, itertools, enumerate, iterable-unpacking

在枚举这样的元组列表时，如何避免使用嵌套元组解包？

```
for i, (x, y) in enumerate(zip("1234", "ABCD")):
    # do stuff 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:49:07.640

用于[`itertools.count`](http://docs.python.org/library/itertools.html#itertools.count)避免嵌套元组拆包：

```
from itertools import count

for i, x, y in zip(count(), "1234", "ABCD"):
    # do stuff 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-01-15T13:42:10.763

该代码很好，并且是最干净的习语。

试图避免它正在解决一个非问题，它实际上比使用更**糟糕**，因为一个陷阱是如果我们使用/ 迭代器长度不同它会中断，因为它是一个无限迭代器：`itertools.count``enumerate``zip_longest``count()`

### `itertools.count`如果我们使用`zip()`，即两个迭代器的长度相同，或者我们可以将较长的迭代器截断为较短的迭代器的长度，则可以工作：

```
for i, x, y in itertools.zip_longest(count(), "1234", "ABCD"): print(f'{i}: {x} {y}') 
```

### `itertools.count`中断（即无限运行）如果我们使用`izip_longest()`, 迭代器的长度不同：

```
for i, x, y in itertools.zip_longest(count(), "1234", "ABCDE"):
    print(f'{i}: {x} {y}')

0: 1 A
1: 2 B
2: 3 C
3: 4 D
4: None E
5: None None
6: None None
... 
```

由于对相同大小的迭代器使用一种习惯用法，而对不同长度的迭代器使用另一种习惯用法会非常混乱，因此我们通常不应该使用`count()`它。即使你知道你的代码不会，有人可能会复制.修改你的代码并点击它。所以这是不好的成语。

# java - 在java中重置对象

> ID：11968738
> 
> 赞同：0
> 
> 时间：2012-08-15T11:47:38.197
> 
> 标签：java, android

我正在开发一款安卓游戏。整个游戏都在“游戏”类中。问题是当我想要重新开始选项时，我不知道如何从“Gameplay”类中删除“mg”对象并制作一个新对象。这是我的代码：

```
package com.PJA.game;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;

public class GameScreen extends BaseScreen {
    static short state=1;
    Gameplay mg;
    Menu mm;
    LostScreen ls;
    public GameScreen(Gra game) {
        super(game);
        mm=new Menu();
        mg=new Gameplay();
        ls=new LostScreen();
    }

    public void update() {
        if(state==1)    mm.live();
        if(state==2)    mg.live();
        if(state==3)    ls.live();

        Gdx.app.log("CurrentState: ", Integer.toString(state));
    }

    public void drau(SpriteBatch sb) {
        if(state==1)    mm.show(sb);
        if(state==2)    mg.show(sb);    
        if(state==3)    ls.show(sb);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:50:20.217

制作一个新的并将其设置为`mg`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:50:57.983

```
mg = new Gameplay() 
```

这将创建一个新实例来替换旧实例（最终将被垃圾收集）

另一个更详细的选择是编写一个`.reset()`方法，将所有字段设置`Gameplay`为其初始值。这将使您更好地控制要重置的字段，但是如果您想要所有内容 - 只需创建一个新的实例`Gameplay`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:51:58.797

初始化构造函数中的所有字段通常是个坏主意。虽然感觉很自然，但它限制了重复使用。创建专用`init()`或`reset()`方法通常更好：

```
public GameScreen(Gra game) {
    super(game);

    reset();
}

public void reset() {
    mm=new Menu();
    mg=new Gameplay();
    ls=new LostScreen();
} 
```

# javascript - 循环遍历一些 SVG 元素

> ID：11968739
> 
> 赞同：0
> 
> 时间：2012-08-15T11:47:38.633
> 
> 标签：javascript

我有一些来自 Raphaël.js 的图标，我想在页面加载时按顺序淡入它们。

我在这里构建图标：

```
function navBar() {
    var icon={/* lots of path strings */},
    fill = {
        fill:"#666",
        stroke:"none",
        opacity:0 // opacity is initially 0; would like to loop through this
    },
    stroke = {
        stroke:"#fff",
        "stroke-width":3,
        "stroke-linejoin":"round",
        opacity:0
    };

    for (var name in icon) {
        var r = Raphael(0, 0, 40, 40),
            s = r.path(icon[name]).attr(stroke).translate(4, 4),
            Icon = r.path(icon[name]).attr(fill).translate(4, 4),
            Path = document.getElementById("path"),
            none = {fill: "#000", opacity: 0};

        (function (icon, path, s, name) {
            r.rect(0, 0, 38, 38).attr(none).hover(function () {
                s.stop().animate({opacity: 1}, 200);
            }, function () {
                s.stop().attr({opacity: 0});
            });
        })(Icon, icon[name], s, name);

        // Here I'm able to fade all of the icons in at the same time
        (function (icon) {          
            Icon.animate({opacity:1},200);
        })(Icon);

    }
} 
```

而不是像我在脚本末尾所做的那样同时淡入所有图标，我如何循环遍历它们并将它们逐个淡入，并在两者之间稍有延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:42:52.687

也许您需要在创建 opr 后为它们设置动画。已经完成了。这是一个模拟：http: [//jsfiddle.net/r75hh/](http://jsfiddle.net/r75hh/)

像这样或那样。

```
// creating
var icon = new Raphael ...
...
icon.attr("rel", "icon")

// the last line in navBar()
animateIcons();

// animating
function animateIcons() {
    // assuming jQuery in use
    var icons = $("elementTagNameOfIcon[rel='icon']");
    var i = 0;
    var f = function(){
        var icon = icons.get(i);
        if (icon) {
            $(icon).animate({opacity:1}, 200, function(){
                f();
            });
            i++;
        }
    };
    f();
} 
```

# mongodb - 学习 mongo db 的启动项目

> ID：11968743
> 
> 赞同：-4
> 
> 时间：2012-08-15T11:48:01.317
> 
> 标签：mongodb

我想学习**mongodb**。

一个简单的项目可以作为学习 MONGODB 的开始吗？

请提供您的意见。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:59:39.333

查看 10gen 的网站（mongodb.org 和 10gen.com）以获取教程和用例。这些中的任何一个都可以很好地开始：
[https://www.10gen.com/presentations/mongodb-stockholm/2012/building-your-first-mongodb-application](https://www.10gen.com/presentations/mongodb-stockholm/2012/building-your-first-mongodb-application)
[http://docs.mongodb.org/manual/tutorial /write-a-tumblelog-application-with-django-mongodb-engine/](http://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-django-mongodb-engine/)

# iphone - 在 App Purchase/View Controller Crash: Message sent to deallocated instance

> ID：11968746
> 
> 赞同：1
> 
> 时间：2012-08-15T11:48:02.387
> 
> 标签：iphone, objective-c, ios

我的视图控制器上有一个按钮，用于显示我的应用内购买商店。

```
storeSinglePlayer *ssp = [[storeSinglePlayer alloc] initWithNibName:@"storeSinglePlayer" bundle:nil];

//Animation Code

CATransition* transition = [CATransition animation];
transition.duration = 0.5;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionPush; 
transition.subtype = kCATransitionFromTop;
[self.navigationController.view.layer addAnimation:transition forKey:nil];

[self.navigationController pushViewController:ssp animated:NO]; 
```

导航控制器成功地将这个商店推送到屏幕上。商店有一个执行以下代码的后退按钮：

```
[self.request cancel];
self.request.delegate = nil;
self.request = nil;
[[SKPaymentQueue defaultQueue] removeTransactionObserver:self];

CATransition* transition = [CATransition animation];
transition.duration = 0.5;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionPush;
transition.subtype = kCATransitionFromBottom; 
[self.navigationController.view.layer addAnimation:transition forKey:nil];

[self.navigationController popViewControllerAnimated:NO]; 
```

这也成功执行。但是，如果我现在单击按钮再次显示商店视图控制器，我会收到以下消息：

```
-[storeSinglePlayer respondsToSelector:]: message sent to deallocated instance 0xd642df0 
```

这确实是一个非常有名的问题。正如您将在上面的代码中注意到的那样，我已经合并了我在 stackoverflow 上遇到的各种帖子的建议。已实现以下代码：

```
[self.request cancel];
self.request.delegate = nil;
self.request = nil;
[[SKPaymentQueue defaultQueue] removeTransactionObserver:self]; 
```

我也将我的属性和相应的合成设置为：

```
@property (nonatomic, strong) SKProductsRequest *request;
@synthesize request = _request; 
```

我不知道，为什么会崩溃！

PS：该项目启用了ARC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:01:56.553

在 ARC 发布后，某些东西正在调用您的 ssp。您发布的代码并不清楚发生在哪里。

最有可能解决问题的一件事是在类声明中保留对 ssp 的成员变量+属性的引用，而不是每次单击按钮时都创建一个新的。只需在您的第一个视图控制器加载并重用它时初始化一次。

如果您想进一步调查，您可以尝试注释掉设置转换的块，看看它是否仍然崩溃。在 ssp 发布后，导航控制器可能会进行一些调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:01:18.423

当一条消息被发送到一个解除分配的实例时，一个对象从内存中被释放并且你试图再次使用它。ARC 必须释放对象，因为它会自动检测到您不再需要它。尝试将以下内容之一添加到您的头文件中。

```
@property (nonatomic, strong) storeSinglePlayer *ssp; 
```

或者

```
storeSinglePlayer *__strong ssp; 
```

上面的重要词是**strong**。它告诉 ARC 你想保留这个对象供以后使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:26:44.577

我到了我搞砸的地方。我正在使用以下代码处理多次旋转：

```
[[NSBundle mainBundle] loadNibNamed:[NSString stringWithFormat:@"storeSinglePlayerLandscape"] owner:self options:nil];

[self viewDidLoad]; 
```

我现在意识到，这不是最佳实践，因为它多次调用 viewDidLoad。不过，这并不是问题的真正原因。当商店只显示几次并返回到前一个视图控制器时，它工作正常。但是说在 10-15 次之后，有太多的请求会随产品返回，因此会发送错误，“消息已发送到解除分配的实例”。

我注释掉了代码，现在它工作正常。

我知道，这是一个非常典型的问题，大多数用户可能不会遇到。但是以防万一，您使用了像我这样的错误代码，可能这些信息有效！

# regex - 使用两个星号在 git 中添加文件

> ID：11968747
> 
> 赞同：16
> 
> 时间：2012-08-15T11:48:10.310
> 
> 标签：regex, git, wildcard, glob, git-bash

我想添加一个具有唯一文件名但前面路径很长的文件（例如 a/b/c/d/filename.java）。通常我会通过这样做将它添加到我的存储库中

`git add *filename.java`.

但是我以前也这样做过：

`git add a/b/c/d/filename*`

所以我尝试将两者结合起来：

`git add *filename*`

但这做了一些奇怪的事情。它添加了每个未跟踪的文件。我可以看到失败的可能原因，但它们都应该发生在前两个命令之一中，所以我不知道为什么会这样。

我的问题不在于如何仅使用文件名将文件添加到 git 存储库（尽管这很有用）。我的问题是我对`*`操作的误解是什么，这使我认为上述内容应该有效。

信息：

我正在使用基于[minGW的](http://mingw.org/)[Git Bash for Windows](http://msysgit.github.com/)。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-15T11:51:47.267

您正在查看[glob](http://en.wikipedia.org/wiki/Glob_(programming)) （不是正则表达式，它是一种不同的模式匹配语言），它们由您的 shell 扩展，而不是由 git。

如果您想查看它们将如何匹配，只需将相同的 glob 传递给另一个命令，例如。

```
$ ls -d *filename.java 
```

对比

```
$ ls -d *filename* 
```

（我刚刚添加了`-d`so ls 不显示任何匹配的目录的内容）

* * *

由于您使用的是 git bash，并且 glob 扩展的行为可能与常规 shell 不同，请尝试

```
$ git add --dry-run --verbose -- *filename* 
```

例如：这应该向您展示它如何真正扩展 glob 以及它有什么影响。

请注意`--`... 如果您使用的 glob*可能*与带有前导的文件名匹配`-`，请务必确保 git 知道它是文件名而不是选项。

不幸的是，这只会显示与 glob 匹配的文件，并且在索引和工作副本之间存在一些差异。

* * *

**作者的回答：** 试运行帮助很大，这是我发现的：

我忘记了我没有添加的 bin 文件夹，所以当我执行试运行时，我意识到它找到了两个匹配项：filename.java 和 filename.class。当我将 glob 更改为`*filename.j*`有效时。

我的下一步是删除 .class 并再次尝试该命令：它成功了！仍然无法解释为什么 git bash 在找到两个匹配项时添加了所有内容......因为空运行的行为与实际运行不同，我认为肯定存在错误，但我认为讨论将在其他地方举行（除非有人认为它不是错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-07T17:18:38.000

你可以试试`git add ./**/*.java`

注意：我用 zsh 测试过，它也应该适用于 bash。

# extjs - Extjs 4 类别轴分组

> ID：11968755
> 
> 赞同：1
> 
> 时间：2012-08-15T11:48:56.057
> 
> 标签：extjs, grouping, categories

当我尝试创建散点 extjs 图表时，我遇到了这样一个问题：类别轴名称未分组（具有相同名称的数组元素不被视为相同）。图表似乎试图将其绘制为数学函数（每个 x 只有一个 y 元素），但我故意选择散点图来避免它。

试图在谷歌中找到分析器，但我发现的唯一结果就是接受......

这是代码：

```
window.store_direct = Ext.create('Ext.data.JsonStore', {
fields: ['id','line','bidder','data0','data1','data2','data3'],
data: [
{'line':1000.00,'id':0,'bidder':'Пок','data0':1000.00},

{'line':800.00,'id':1,'bidder':'Пок','data0':800.00},

{'line':950.00,'id':0,'bidder':'Брг','data1':950.00},

{'line':599.00,'id':1,'bidder':'Брг','data1':599.00},

{'line':1.00,'id':2,'bidder':'Брг','data1':1.00},

{'line':500.00,'id':0,'bidder':'КВВ','data2':500.00},

{'line':900.00,'id':0,'bidder':'Buy4','data3':900.00},

{'line':600.00,'id':1,'bidder':'Buy4','data3':600.00}
], 
```

});

```
var chart = function () {
var win = Ext.create('Ext.Window', {
    renderTo: Ext.getBody(),
    width: 500,
    height: 300,
    animate: true,
    hidden: false,
    maximizable: true,
    title: 'Процесс торгов',
    layout: 'fit',
    items:{xtype: 'chart',style: 'background:#fff;',animate: true,store: store_direct,shadow: true,legend: {position: 'right'},
    axes: [{
        type: 'Numeric',
        position: 'left',
        fields: ['data0','data1','data2','data3'],
        label: {
            renderer: Ext.util.Format.numberRenderer('0,0')
        },
        title: 'Sample Values',
        grid: true,
        minimum: 0
    }, {
        type: 'Category',
        position: 'bottom',
        fields: ['bidder'],
        title: 'Sample Metrics'
    }],
    series: [
     {
        type: 'Scatter',
        highlight: {size: 7,radius: 7},
        axis: 'left',
        xField: 'bidder',
        yField: 'data0',
        markerConfig: {type: 'cross',size: 4,radius: 4,'stroke-width': 0}
    }
    , {
        type: 'Scatter',
        highlight: {size: 7,radius: 7},
        axis: 'left',
        xField: 'bidder',
        yField: 'data1',
        markerConfig: {type: 'cross',size: 4,radius: 4,'stroke-width': 0}
    }
    , {
        type: 'Scatter',
        highlight: {size: 7,radius: 7},
        axis: 'left',
        xField: 'bidder',
        yField: 'data2',
        markerConfig: {type: 'cross',size: 4,radius: 4,'stroke-width': 0}
    }
    , {
        type: 'Scatter',
        highlight: {size: 7,radius: 7},
        axis: 'left',
        xField: 'bidder',
        yField: 'data3',
        markerConfig: {type: 'cross',size: 4,radius: 4,'stroke-width': 0}
    }
             ]
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:41:28.960

Ext JS 图表的术语有点具体；在这种情况下，您需要配置您的系列。Charts 有一些很好的例子，看看：[http ://docs.sencha.com/ext-js/4-1/#!/example](http://docs.sencha.com/ext-js/4-1/#!/example)

# php - fopen() 并传递 unicode 文件名

> ID：11968758
> 
> 赞同：1
> 
> 时间：2012-08-15T11:49:06.643
> 
> 标签：php, windows, utf-8, filesystems, fopen

> **可能重复：**
> [PHP 中的 UTF8 文件名和不同的 Unicode 编码](https://stackoverflow.com/questions/1089966/utf8-filenames-in-php-and-different-unicode-encodings)
> [NTFS 中的文件名存储为什么编码？](https://stackoverflow.com/questions/2050973/what-encoding-are-filenames-in-ntfs-stored-as)

我必须创建文件。

文件名具有 unicode 字符，例如：

```
K. Wiśniewska-Bugaj 
```

我尝试回显文件名，没关系。但在文件系统中它是：

```
K. WiĹ›niewska-Bugaj 
```

不幸的是，我无法更改文件名。

# mysql - 多个 LEFT JOIN 到 self 与产生分布的标准

> ID：11968760
> 
> 赞同：2
> 
> 时间：2012-08-15T11:49:07.457
> 
> 标签：mysql, sql, left-join, self-join

虽然[有几个](https://stackoverflow.com/questions/8537200/mysql-count-of-multiple-left-joins-optomization)。[问题](https://stackoverflow.com/questions/4242715/removing-duplicates-from-multiple-self-left-joins)。[来吧](https://stackoverflow.com/questions/1990352/mysql-multiple-left-joins)。[关闭](https://stackoverflow.com/questions/8869599/sql-self-join-multiple-times)。对于我想要的（在我写这个stackoverflow 时已经提出了更多建议，但没有一个能完全捕捉到我的问题），我似乎无法找到摆脱SQL 丛林的方法。

我有一个包含三个字段的表（我们称之为 user_classification_fct）：用户、周和类（例如，第 1 周的用户 #1 有一个“常规用户”类，而第 1 周的用户 #2 有一类“不经常使用的用户”）。（顺便说一句，我*已经将*类实现为 INT，但在整理 SQL 时，我想使用 VARCHAR 形式的易读的东西。）

我想要做的是生成一份汇总报告，说明用户行为*总体*上是如何变化的：

1.  第 1 周和第 2 周都有 50 个用户是普通用户，并且......
2.  第 1 周有 10 个用户是普通用户，但在第 2 周下降为不常用户
3.  有 5 位用户从第 1 周的不常到第 2 周的常客
4.  ... 等等 ...

让这更棘手的是用户#5000 可能只是在第 2 周才开始使用该服务，因此表中没有第 1 周的记录。在这种情况下，我希望看到第 1 周的 NULL 和第 2 周的“普通用户”（或任何合适的）。表的大小不是严格相关的，但有 5 周的数据我正在查看 4200 万行，所以我*不想*插入 4 '对于仅在第 5 周或其他时间开始使用该服务的人的“非用户”行。

对我来说，这似乎很明显是在 MySQL 中使用 LEFT 或 RIGHT JOIN 的情况，因为 NULL 应该在“缺失”记录中出现。

我已经尝试在 LEFT JOIN 上同时使用 WHERE 和 AND 条件，但没有得到“正确”的答案（即，在尾随 WHERE 条件的情况下我根本没有得到 NULL 值，或者我的计数太高了在下面使用的 AND 约束的情况下，不同用户的数量（大约 1000 万）。这是我最后一次尝试让这个工作：

```
SELECT
    ucf1.class_nm AS 'Class in 2012/15',
    ucf2.class_nm AS 'Class in 2012/16',
    ucf3.class_nm AS 'Class in 2012/17',
    ucf4.class_nm AS 'Class in 2012/18',
    ucf5.class_nm AS 'Class in 2012/19',
    count(*) AS 'Count'
FROM
    user_classification_fct ucf5
LEFT JOIN user_classification_fct ucf4 
    ON ucf5.user_id=ucf4.user_id 
        AND ucf5.week_key=201219 AND ucf4.week_key=201218
LEFT JOIN user_classification_fct ucf3 
    ON ucf4.user_id=ucf3.user_id 
       AND ucf4.week_key=201218 AND ucf3.week_key=201217
LEFT JOIN user_classification_fct ucf2 
    ON ucf3.user_id=ucf2.user_id 
       AND ucf3.week_key=201217 AND ucf2.week_key=201216
LEFT JOIN user_classification_fct ucf1 
    ON ucf2.user_id=ucf1.user_id 
       AND ucf2.week_key=201216 AND ucf1.week_key=201215
GROUP BY 1,2,3,4,5; 
```

在查看 stackoverflow.com 上的各种其他问题时，很可能我需要一次执行一个查询并将结果集合并在一起，或者使用括号将它们一对一地链接起来，但是那些方法不是我（还）熟悉的方法，我什至无法获得一个 LEFT JOIN（即第 5 周到第 1 周，删除所有其他周的数据）来返回有用的东西。

任何提示都会非常感谢，我非常感谢在 MySQL 中工作的建议，因为切换数据库产品不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:14:40.103

您可以通过 group by 执行此操作。我首先将五周内所有可能的组合总结为：

```
select c_201215, c_201216, c_201217, c_201218, c_201219,
       count(*) as cnt
from (select user_id,
             max(case when week_key=201215 then class_nm end) as c_201215,
             max(case when week_key=201216 then class_nm end) as c_201216,
             max(case when week_key=201217 then class_nm end) as c_201217,
             max(case when week_key=201218 then class_nm end) as c_201218,
             max(case when week_key=201219 then class_nm end) as c_201219
      from user_classification_fct  ucf
      group by user_id
     ) t
group by c_201215, c_201216, c_201217, c_201218, c_201219 
```

这可能会解决您的问题。如果您有 5 个类（包括 NULL），那么这将最多返回 5^5 或 3,125 行。

这适合 Excel，因此您可以在那里进行最终处理。或者，您仍然可以使用数据库。

如果您想提取成对的星期，那么我建议将上述内容放入一个临时表中，例如“t”。并使用联合进行一系列提取：

```
select *
from ((select '201215' as weekstart, c_201215, c_201216, sum(cnt) as cnt
       from t
       group by c_201215, c_201216
      ) union all
      (select '201216', c_201216, c_201217, sum(cnt) as cnt
       from t
       group by c_201216, c_201217

      ) union all
      (select '201217', c_201217, c_201218, sum(cnt) as cnt
       from t
       group by c_201217, c_201218

      ) union all
      (select '201218', c_201218, c_201219, sum(cnt) as cnt
       from t
       group by c_201218, c_201219
      )
     ) tg
order by 1, cnt desc 
```

我建议将它放在子查询中，因为您不想在如此大的表上使用公共子查询优化来传递消息。您将首先进行总结，然后将数据汇总在一起，从而得出最终答案。

# php - 谷歌分析核心报告 API PHP 查询

> ID：11968769
> 
> 赞同：3
> 
> 时间：2012-08-15T11:50:08.857
> 
> 标签：php, analytics, google-analytics-api

这是我第一次尝试使用 Core Reporting API。我已成功通过 Hello Analytics 教程并毫无问题地发出 API 请求。我的问题在于查询 API 以使用维度、指标和过滤器。下面是我正在使用的代码。我可以显示在本月的第一天和当天之间我有多少访问者。然后它显示其中有多少来自自然搜索。我希望有人可以给我一个关于使用更复杂的请求查询 API 的示例。可能包括维度、指标、过滤器……然后在行中显示。任何帮助深表感谢。以下是我到目前为止的代码...

//查询核心报告API

```
 function getResults($analytics, $profileId, $first_day, $today) {
         return $analytics->data_ga->get(
    'ga:' . $profileId,
    $first_day,
    $today,
    'ga:visits, ga:organicSearches');
    } 
```

//输出结果

```
 function printResults(&$results) {
          if (count($results->getRows()) > 0) {
    $profileName = $results->getProfileInfo()->getProfileName();
    $rows = $results->getRows();
    $visits = $rows[0][0];
    $organic = $rows[0][1];
    print "<h1>$profileName</h1>";

    echo '<table border="1" cellpadding="5">';

   echo '<tr>';
   echo '<td>Visits</td>';
   echo '<td>Organic</td>';
   echo '</tr>';

   echo '<tr>'; 
   echo '<td>'. $visits . '</td>';
   echo '<td>'. $organic . '</td>';   
   echo '</td>';

   echo '</table>';

   } else {
        print '<p>No results found.</p>';
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:37:48.997

这是代码：

```
$optParams = array(
        'dimensions' => 'ga:date,ga:customVarValue1,ga:visitorType,ga:pagePath',
        'sort' => '-ga:visits,ga:date',
        'filters' => 'ga:visitorType==New',
        'max-results' => '100');

$metrics = "ga:visits";
$results = $analytics->data_ga->get(
'ga:' . $profileId,
'2013-03-01',
'2013-03-10',
$metrics,
$optParams); 
```

用于显示结果：

```
 function getRows($results) {
      $table = '<h3>Rows Of Data</h3>';

      if (count($results->getRows()) > 0) {
      $table .= '<table>';

      // Print headers.
      $table .= '<tr>';

      foreach ($results->getColumnHeaders() as $header) {
          $table .= '<th>' . $header->name . '</th>';
      }
      $table .= '</tr>';

      // Print table rows.
      foreach ($results->getRows() as $row) {
        $table .= '<tr>';
        foreach ($row as $cell) {
           $table .= '<td>'
               . htmlspecialchars($cell, ENT_NOQUOTES)
               . '</td>';
        }
        $table .= '</tr>';
      }
      $table .= '</table>';

      } else {
      $table .= '<p>No results found.</p>';
      }

      return $table;
  } 
```

如果您尝试让这个[演示](https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/analytics/)工作，您可以更好地理解。
另请参阅此[代码](https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/analytics/demo/coreReportingApiReference.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-10T08:46:57.070

这是`data_ga->get`api源码中函数的定义。

```
public function get($ids, $startDate, $endDate, $metrics, $optParams = array())
  {
    $params = array('ids' => $ids, 'start-date' => $startDate, 'end-date' => $endDate, 'metrics' => $metrics);
    $params = array_merge($params, $optParams);
    return $this->call('get', array($params), "Google_Service_Analytics_GaData");
  } 
```

完整的参数列表在[这里](https://developers.google.com/analytics/devguides/reporting/core/v3/reference#startDate)

除了 ids、startdate、enddate 和 metrics 之外的所有参数都是可选的，需要作为关联数组作为 get 函数的第 5 个参数发送。

# mongodb - MongoDB Unclean Shutdown - 无法修复

> ID：11968775
> 
> 赞同：1
> 
> 时间：2012-08-15T11:50:37.270
> 
> 标签：mongodb

我在 Amazon AWS 上运行 MongoDB，直到有一天它用完了空间。然后，数据库完全无法访问，我试图关闭数据库。重新启动服务器并安装更大的磁盘后，无法启动 MongoDB。我尝试修复数据库，错误如下所示：

> 8 月 15 日星期三 10:08:04 [initandlisten] MongoDB 开始：pid=1447 port=27017 dbpath=/var/lib/mongodb/ 32-bit
> 
> ** 注意：当使用 32 位 MongoDB 时，您被限制为大约 2 GB 的数据 ** 参见[http://blog.mongodb.org/post/137788967/32-bit-limitations](http://blog.mongodb.org/post/137788967/32-bit-limitations) ** 使用 --dur，限制较低
> 
> 8 月 15 日星期三 10:08:04 [initandlisten] db 版本 v1.8.3，pdfile 版本 4.5 8 月 15 日星期三 10:08:04 [initandlisten] git 版本：c206d77e94bc3b65c76681df5a6b605f68a2de05 8 月 15 日星期三 10:08:04 [initandlisten] 构建系统信息Linux domU-12-31-39-01-70-B4 2.6.21.7-2.fc8xen #1 SMP Fri Feb 15 12:39:36 EST 2008 i686 BOOST_LIB_VERSION=1_37 Wed Aug 15 10:08:04 [initandlisten] *** * 8 月 15 日星期三 10:08:04 [initandlisten] **** 8 月 15 日星期三 10:08:04 [initandlisten] 需要使用 pdfile 版本 559903.1345021735 升级数据库 md，新版本：4.5 8 月 15 日星期三 10:08:04 [initandlisten] 开始升级 8 月 15 日星期三 10:08:04 [initandlisten] md repairDatabase md Wed Aug 15 10:08:04 [initandlisten] md.system.namespaces 断言失败 isOk() db/pdfile。h 259 0x817c27b 0x819121e 0x83cf525 0x83d6bec 0x83f5420 0x82a4fb7 0x83f8680 0x83fcece 0x8401358 0x8401e29 0x8402abd 0x828f755 0x83b3d67 0x83b931c 0x83bb3df 0x81ce25f 0x81ae714 0x8380f31 0x83831ba 0x83d4faf mongod(_ZN5mongo12sayDbContextEPKc+0xcb) [0x817c27b] mongod(_ZN5mongo8assertedEPKcS1_j+0x12e) [0x819121e] mongod(_ZN5mongo11DataFileMgr7findAllEPKcRKNS_7DiskLocE+0x7a5) [0x83cf525] mongod (_ZN5mongo13findTableScanEPKcRKNS_7BSONObjERKNS_7DiskLocE+0x13c) [0x83d6bec] mongod(_ZNK5mongo9QueryPlan9newCursorERKNS_7DiskLocEi+0x830) [0x83f5420] mongod(_ZN5mongo11UserQueryOp5_initEv+0x437) [0x82a4fb7] mongod(_ZN5mongo12QueryPlanSet6Runner6initOpERNS_7QueryOpE+0x110) [0x83f8680] mongod(_ZN5mongo12QueryPlanSet6Runner3runEv+0x2ee) [0x83fcece] mongod(_ZN5mongo12QueryPlanSet5runOpERNS_7QueryOpE+0x2e8) [0x8401358]mongod(_ZN5mongo16MultiPlanScanner9runOpOnceERNS_7QueryOpE+0x59) [0x8401e29] mongod(_ZN5mongo16MultiPlanScanner5runOpERNS_7QueryOpE+0x2d) [0x8402abd] mongod(_ZN5mongo8runQueryERNS_7MessageERNS_12QueryMessageERNS_5CurOpES1_+0x1575) [0x828f755] mongod() [0x83b3d67] mongod(_ZN5mongo16assembleResponseERNS_7MessageERNS_10DbResponseERKNS_8SockAddrE+0x70c) [0x83b931c] mongod(_ZN5mongo14DBDirectClient4callERNS_7MessageES2_bPSs+0x7f) [0x83bb3df ] mongod(_ZN5mongo14DBClientCursor4initEv+0x15f) [0x81ce25f] mongod(_ZN5mongo12DBClientBase5queryERKSsNS_5QueryEiiPKNS_7BSONObjEii+0x2a4) [0x81ae714] mongod(_ZN5mongo6Cloner2goEPKcRSsRKSsbbbb+0x451) [0x8380f31] mongod(_ZN5mongo9cloneFromEPKcRSsRKSsbbbb+0x5a) [0x83831ba] mongod(_ZN5mongo14repairDatabaseESsRSsbb+0x38f) [0x83d4faf] Wed Aug 15 10 :08:04 [initandlisten] 断言 0 断言 db/pdfile.h:259 ns:md.system.namespaces query:{} Wed Aug 15 10:08:04 [initandlisten] Assertion: 10290:bad system.namespaces object { $err:" assertion db/pdfile.h:259" } 0x819045e 0x8381181 0x83831ba 0x83d4faf 0x852a30c 0x852b217 0x852e733 0x852f59c 0x85366bb 0xb74a4ce7 0x810b551 mongod(_ZN5mongo11msgassertedEiPKc+0x15e) [0x819045e] mongod(_ZN5mongo6Cloner2goEPKcRSsRKSsbbbb+0x6a1) [0x8381181] mongod(_ZN5mongo9cloneFromEPKcRSsRKSsbbbb+0x5a) [0x83831ba] mongod( _ZN5mongo14repairDatabaseESsRSsbb+0x38f) [0x83d4faf] mongod(_ZN5mongo11doDBUpgradeERKSsSsPNS_14DataFileHeaderE+0x6c) [0x852a30c] mongod() [0x852b217] mongod(_ZN5mongo14_initAndListenEiPKc+0x6c)bad system.namespaces object { $err: "assertion db/pdfile.h:259" } 0x819045e 0x8381181 0x83831ba 0x83d4faf 0x852a30c 0x852b217 0x852e733 0x852f59c 0x85366bb 0xb74a4ce7 0x810b551 mongod(_ZN5mongo11msgassertedEiPKc+0x15e) [0x819045e] mongod(_ZN5mongo6Cloner2goEPKcRSsRKSsbbbb+0x6a1) [0x8381181] mongod (_ZN5mongo9cloneFromEPKcRSsRKSsbbbb+0x5a) [0x83831ba] mongod(_ZN5mongo14repairDatabaseESsRSsbb+0x38f) [0x83d4faf] mongod(_ZN5mongo11doDBUpgradeERKSsSsPNS_14DataFileHeaderE+0x6c) [0x852a30c] mongod() [0x852b217] mongod(_ZN5mongo14_initAndListenEiPKc+0x4b3) [0x852e733] mongod(bad system.namespaces object { $err: "assertion db/pdfile.h:259" } 0x819045e 0x8381181 0x83831ba 0x83d4faf 0x852a30c 0x852b217 0x852e733 0x852f59c 0x85366bb 0xb74a4ce7 0x810b551 mongod(_ZN5mongo11msgassertedEiPKc+0x15e) [0x819045e] mongod(_ZN5mongo6Cloner2goEPKcRSsRKSsbbbb+0x6a1) [0x8381181] mongod (_ZN5mongo9cloneFromEPKcRSsRKSsbbbb+0x5a) [0x83831ba] mongod(_ZN5mongo14repairDatabaseESsRSsbb+0x38f) [0x83d4faf] mongod(_ZN5mongo11doDBUpgradeERKSsSsPNS_14DataFileHeaderE+0x6c) [0x852a30c] mongod() [0x852b217] mongod(_ZN5mongo14_initAndListenEiPKc+0x4b3) [0x852e733] mongod(} 0x819045e 0x8381181 0x83831ba 0x83d4faf 0x852a30c 0x852b217 0x852e733 0x852f59c 0x85366bb 0xb74a4ce7 0x810b551 mongod(_ZN5mongo11msgassertedEiPKc+0x15e) [0x819045e] mongod(_ZN5mongo6Cloner2goEPKcRSsRKSsbbbb+0x6a1) [0x8381181] mongod(_ZN5mongo9cloneFromEPKcRSsRKSsbbbb+0x5a) [0x83831ba] mongod(_ZN5mongo14repairDatabaseESsRSsbb+0x38f) [0x83d4faf] mongod( _ZN5mongo11doDBUpgradeERKSsSsPNS_14DataFileHeaderE+0x6c) [0x852a30c] mongod() [0x852b217] mongod(_ZN5mongo14_initAndListenEiPKc+0x4b3) [0x852e733] mongod(} 0x819045e 0x8381181 0x83831ba 0x83d4faf 0x852a30c 0x852b217 0x852e733 0x852f59c 0x85366bb 0xb74a4ce7 0x810b551 mongod(_ZN5mongo11msgassertedEiPKc+0x15e) [0x819045e] mongod(_ZN5mongo6Cloner2goEPKcRSsRKSsbbbb+0x6a1) [0x8381181] mongod(_ZN5mongo9cloneFromEPKcRSsRKSsbbbb+0x5a) [0x83831ba] mongod(_ZN5mongo14repairDatabaseESsRSsbb+0x38f) [0x83d4faf] mongod( _ZN5mongo11doDBUpgradeERKSsSsPNS_14DataFileHeaderE+0x6c) [0x852a30c] mongod() [0x852b217] mongod(_ZN5mongo14_initAndListenEiPKc+0x4b3) [0x852e733] mongod(mongod(_ZN5mongo14_initAndListenEiPKc+0x4b3) [0x852e733] mongod(mongod(_ZN5mongo14_initAndListenEiPKc+0x4b3) [0x852e733] mongod(*ZN5mongo13initAndListenEiPKc+0x2c) [0x852f59c] mongod(main+0x6bdb) [0x85366bb] /lib/libc.so.6(*_libc_start_main+0xe7) [0xb74a4ce7] mongod() [0x810b551] 8 月 15 日星期三 10:08:04 [initandlisten] initAndListen 中的异常 std::exception: bad system.namespaces object { $err: "assertion db/pdfile.h:259 " }，终止 8 月 15 日星期三 10:08:04 dbexit：8 月 15 日星期三 10:08:04 [initandlisten] 关闭：将关闭侦听套接字... 8 月 15 日星期三 10:08:04 [initandlisten] 关闭：将刷新诊断日志... 8 月 15 日星期三 10:08:04 [initandlisten] 关闭：要关闭套接字... 8 月 15 日星期三 10:08:04 [initandlisten] 关闭：等待 fs 预分配器... 10 年 8 月 15 日星期三： 08:04 [initandlisten] 关机：关闭所有文件... 8 月 15 日星期三 10:08:04 closeAllFiles() 完成 8 月 15 日星期三 10:08:04 [initandlisten] 关机：删除 fs 锁... 8 月 15 日星期三 10： 08:04 dbexit：现在真的要退出了

我完全拥有所有 *.number 和 *.ns 文件。但似乎 ns 文件已损坏。有什么办法可以修复数据库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:23:50.037

如果维修不起作用，那么不幸的是你运气不好。

我假设您没有启用日记功能或任何备份。我强烈建议您在启用日志的情况下运行，并遵循[此处](http://docs.mongodb.org/manual/administration/backups/)列出的备份策略之一。LVM 快照很容易实现，相当快速和可靠。

你最好在 64 位系统上运行 MongoDB。32 位将您限制为[2gb 的数据](http://blog.mongodb.org/post/137788967/32-bit-limitations)。你说你“空间不足”？

# javascript - 从原始行插入表格行和删除按钮

> ID：11968776
> 
> 赞同：1
> 
> 时间：2012-08-15T11:50:43.677
> 
> 标签：javascript, jquery, html-table

我有一个表格，表格中最初有 1 行输入字段。用户可以单击“新行”按钮以获取另一行，其中输入字段为空。这给我留下了每一行的“新行”按钮的多个副本——我想删除除最近创建的“新行”按钮之外的所有按钮（即最后一行输入字段中的那个）。

我在以下位置设置了一个示例 JSFiddle：

[http://jsfiddle.net/fmdataweb/vRe9v/2/](http://jsfiddle.net/fmdataweb/vRe9v/2/)

有什么我可以添加到现有的 js 中的东西，它会删除被点击的按钮，同时将新创建的按钮留在新行中？这是Javascript：

```
var table = $( '#nextYear' )[0];

$( table ).delegate( '#button2', 'click', function () {
    var thisRow = $( this ).closest( 'tr' )[0];
   $( thisRow ).clone().insertAfter( thisRow ).find( 'input:text' ).val( '' );
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:52:38.097

您可以使用 jQuery [**remove()**](http://api.jquery.com/remove/)从 DOM 中删除匹配的元素集。

在您的情况下，当您在按钮单击事件中时，`this`引用 DOM 中的按钮对象。

变成`this`一个 jQuery 对象并像这样调用[**remove() ：**](http://api.jquery.com/remove/)

```
$(this).remove(); 
```

完成新代码：

```
var table = $('#nextYear')[0];

$(table).delegate('#button2', 'click', function() {
    var thisRow = $(this).closest('tr')[0];
    $(thisRow).clone().insertAfter(thisRow).find('input:text').val('');

    $(this).remove(); // remove button that was clicked
});​ 
```

见[**演示**](http://jsfiddle.net/vRe9v/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:53:48.263

在控件事件中使用`$(this).remove();`jQuery $(this) 表示触发事件的控件。您可以使用`remove()`将删除正在单击的按钮的方法`dom`

**[现场演示](http://jsfiddle.net/rajaadil/vRe9v/5/)**

```
var table = $('#nextYear')[0];

$(table).delegate('#button2', 'click', function() {

    var thisRow = $(this).closest('tr')[0];
    $(thisRow).clone().insertAfter(thisRow).find('input:text').val('');
    $(this).remove();
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-12T18:25:32.093

试试这个：演示：http: [//jsfiddle.net/xRQs8/2/](http://jsfiddle.net/xRQs8/2/)

可以使用单个按钮完成：+

```
<table id="dataTable" cellspacing="0" cellpadding="0" border="0" width="100%">
                                        <tr>
                                            <td>
                                                <input type="Button" value="Add More" name="AddMore" class="AddOption" />
                                            </td>
                                        </tr>
                                    </table> 
```

# html - CSS HTML 隐藏屏幕右侧的字段

> ID：11968779
> 
> 赞同：0
> 
> 时间：2012-08-15T11:51:01.547
> 
> 标签：html, css, forms, styles

我将一个表格放置在一个文档的右侧，只显示了它的一部分

```
<form class="right-form">
   <textarea></textarea>
   <input type="submit" value="submit"></div>
</form> 
```

我的风格是这样的（简化示例）

```
 body{
   height: 100%;
   width: 100%;
 }

.right-form{
   position:absolute;
   rigth: -220px;
   width: 250px
   transition: width 0.5s ease 0s, right 0.5s ease 0s;
}
.right-form:hover{
   right: 0px;
} 
```

一切正常，除了底部的滚动条在隐藏表单时从左到右滚动，我不希望它出现。有人知道如何处理这个css问题吗？希望问题是可以理解的...

非常感谢

编辑：使用 matthias.p 提出的溢出规则，用户仍然可以按箭头键向右滚动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:52:59.380

添加

```
overflow: hidden; 
```

身体法则。

**编辑：** 你可以这样做：

```
body {
height: 100%;
width: 100%;
}
.right-form {
position:absolute;  
right: 0;
width: 30px;
overflow: hidden;
transition: width 0.5s ease;
}
.right-form:hover {
width: 250px;
} 
```

我没有更改值，而是更改`right`了表单的宽度，`overflow`而是在表单上而不是在正文上进行了操作。现在您不能再使用箭头键在不悬停时显示表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:49:36.723

使用下面的代码，100% + 默认边距导致问题

```
body{
 width: 100%;
 height: 100%;
 margin: 0;
 padding: 0;
}

.right-form{
     position:absolute;
     rigth: -220px;
     width: 250px
     transition: width 0.5s ease 0s, right 0.5s ease 0s;
}
.right-form:hover{
     right: 0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:21:49.180

溢出的使用仍然允许使用箭头键。您可以像这样终止使用箭头键：

```
$(document).keydown(function(event) {
     switch(event.keyCode){
        case 37:
        case 39:
            return false;
            break;
     }
 }); 
```

# java - JComponent.isShowing() 和 isDisplayable() 之间的区别

> ID：11968780
> 
> 赞同：11
> 
> 时间：2012-08-15T11:51:09.707
> 
> 标签：java, swing, jcomponent

[`Component.isShowing()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#isShowing%28%29)和有什么区别[`Component.isDisplayable()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#isDisplayable%28%29)？我想用它们来决定我是否应该停止/启动计时器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T12:12:51.513

一个组件
`isShowing()`当

> 确定此组件是否显示在屏幕上。这意味着组件必须是可见的，并且它必须在一个可见和显示的容器中。

`isShowing()`是递归的，也检查所有父组件，但`isDisplayable()`只`isVisible()`验证组件的状态，而不是其父组件的状态。

这意味着您的组件当前正在屏幕上显示在 Frame、Panel 等中
`setVisible(true)`。-->`isShowing()`返回 true（在大多数情况下）
`setVisible(false)`-->`isShowing()`返回 false（在所有情况下）

`isDisplayable()`什么时候

> 确定此组件是否可显示。当组件连接到本机屏幕资源时，它是可显示的。
> 
> 当一个组件被添加到一个可显示的包含层次结构中或者当它的包含层次结构变得可显示时，它就可以显示了。当其祖先窗口被打包或可见时，包含层次结构将变为可显示的。
> 
> 当一个组件从可显示的包含层次结构中移除时，或者当它的包含层次结构变得不可显示时，它就会变得不可显示。释放其祖先窗口时，包含层次结构将变为不可显示。

这意味着您的组件处于可以在屏幕上显示但不需要当前在屏幕上显示的`displayable`状态。例如，即使`setVisible(false)`之前在组件上调用过（因此组件是“不可见的”），组件仍然存在`displayable`并且`isDisplayable()`将返回 true。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T12:11:35.260

isDisplayable() 如果组件的对等点不为空（对等点是本机窗口容器），则返回 true。

isShowing() 如果组件可见（即调用了 setVisible(true) 或 show(true)），则返回 true，它的对等点是非空的，如果它也有父级，则父级也正在显示（即 isShowing()在父级上返回 true）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T12:10:51.297

据我了解，如果组件可见，则 Component.isShowing() 返回 true，如果组件处于可显示层次结构中，则 Component.isDisplayable() 返回 true，这意味着它可以显示。我认为方法名称本身就可以说明问题。

# matlab - Radix-4 FFT 实现

> ID：11968784
> 
> 赞同：1
> 
> 时间：2012-08-15T11:51:27.597
> 
> 标签：matlab, fft, octave

如果我逐个设置 (xp) 值的幂，则下面的 Octave `radix-4`FFT 代码可以正常工作。`4`

```
$ octave fft4.m

ans = 1.4198e-015 
```

但是，如果我取消注释循环代码，我会收到以下错误

```
$ octave fft4.m

error: `stage' undefined near line 48 column 68
error: evaluating argument list element number 1
error: evaluating argument list element number 2
error: called from:
error:   r4fftN at line 48, column 22
error:   c:\Users\david\Documents\Visual Studio 2010\Projects\mv_fft\fft4.m at line 80, column 7

the "error" refers to a line the in fft function code which otherwise works correctly when xp is not set by a loop ... very strange.

    function Z = radix4bfly(x,segment,stageFlag,W)
      % For the last stage of a radix-4 FFT all the ABCD multiplers are 1.
      % Use the stageFlag variable to indicate the last stage
      % stageFlag = 0 indicates last FFT stage, set to 1 otherwise

      % Initialize variables and scale to 1/4
      a=x(1)*.25;
      b=x(2)*.25;
      c=x(3)*.25;
      d=x(4)*.25;

      % Radix-4 Algorithm
      A=a+b+c+d;
      B=(a-b+c-d)*W(2*segment*stageFlag + 1);
      C=(a-b*j-c+d*j)*W(segment*stageFlag + 1);
      D=(a+b*j-c-d*j)*W(3*segment*stageFlag + 1);

      % assemble output
      Z = [A B C D];
    end % radix4bfly()

    % radix-4 DIF FFT, input signal must be floating point, real or complex
    %
    function S = r4fftN(s)

      % Initialize variables and signals: length of input signal is a power of 4
      N = length(s);
      M = log2(N)/2;

      % Initialize variables for floating point sim
      W=exp(-j*2*pi*(0:N-1)/N);
      S = complex(zeros(1,N));
      sTemp = complex(zeros(1,N));

      % FFT algorithm
      % Calculate butterflies for first M-1 stages
      sTemp = s;
      for stage = 0:M-2
        for n=1:N/4
          S((1:4)+(n-1)*4) = radix4bfly(sTemp(n:N/4:end), floor((n-1)/(4^stage)) *(4^stage), 1, W);
        end
        sTemp = S;
      end

      % Calculate butterflies for last stage
      for n=1:N/4
        S((1:4)+(n-1)*4) = radix4bfly(sTemp(n:N/4:end), floor((n-1)/(4^stage)) * (4^
    stage), 0, W);
      end
      sTemp = S;

      % Rescale the final output
      S = S*N;
    end % r4fftN(s)

    % test FFT code
    %
    xp = 2;

    % ERROR if I uncomment loop!

    %for xp=1:8
      N = 4^xp; % must be power of: 4 16 64 256 1024 4086 ....
      x = 2*pi/N * (0:N-1);
      x = cos(x);
      Y_ref = fft(x);
      Y = r4fftN(x);
      Y = digitrevorder(Y,4);
      %Y = bitrevorder(Y,4);
      abs(sum(Y_ref-Y)) % compare fft4 to built-in fft
    %end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:03:01.073

问题是指数 xp 的循环边界应该从 2 开始，因为 fft4 代码假定至少 2 个阶段的 radix-4 蝴蝶

对不起各位:(

-大卫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-28T18:18:30.120

请在下面找到一个完全工作的 Matlab 实现*radix-4 Decimation In Frequency* FFT 算法。我还提供了复杂矩阵乘法和加法方面的总体操作计数。确实可以证明，每个 radix-4 蝴蝶都涉及`3`复数乘法和`8`复数加法。由于有`log_4(N) = log_2(N) / 2`阶段，每个阶段都涉及`N / 4`蝴蝶，所以操作数为

```
complex multiplications = (3 / 8) * N * log2(N)
complex additions       = N * log2(N) 
```

这是代码：

```
% --- Radix-2 Decimation In Frequency - Iterative approach

clear all
close all
clc

% --- N should be a power of 4
N = 1024;

% x = randn(1, N);
x = zeros(1, N);
x(1 : 10) = 1;
xoriginal = x;
xhat = zeros(1, N);

numStages = log2(N) / 2;

W = exp(-1i * 2 * pi * (0 : N - 1) / N);
omegaa = exp(-1i * 2 * pi / N);

mulCount = 0;
sumCount = 0;

M = N / 4;
for p = 1 : numStages;
    for index = 0 : (N / (4^(p - 1))) : (N - 1);
        for n = 0 : M - 1;   
            a =  x(n + index + 1) +      x(n + index + M + 1) + x(n + index + 2 * M + 1) +      x(n + index + 3 * M + 1);
            b = (x(n + index + 1) -      x(n + index + M + 1) + x(n + index + 2 * M + 1) -      x(n + index + 3 * M + 1)) .* omegaa^(2 * (4^(p - 1) * n));
            c = (x(n + index + 1) - 1i * x(n + index + M + 1) - x(n + index + 2 * M + 1) + 1i * x(n + index + 3 * M + 1)) .* omegaa^(1 * (4^(p - 1) * n));
            d = (x(n + index + 1) + 1i * x(n + index + M + 1) - x(n + index + 2 * M + 1) - 1i * x(n + index + 3 * M + 1)) .* omegaa^(3 * (4^(p - 1) * n));
            x(n + 1 + index) = a;
            x(n + M + 1 + index) = b;
            x(n + 2 * M + 1 + index) = c;
            x(n + 3 * M + 1 + index) = d;
            mulCount = mulCount + 3;
            sumCount = sumCount + 8;
        end;
    end;
    M = M / 4;
end

xhat = bitrevorder(x);

tic
xhatcheck = fft(xoriginal);
timeFFTW = toc;

rms = 100 * sqrt(sum(sum(abs(xhat - xhatcheck).^2)) / sum(sum(abs(xhat).^2)));

fprintf('Theoretical multiplications count \t = %i; \t Actual multiplications count \t = %i\n', ...
         (3 / 8) * N * log2(N), mulCount);
fprintf('Theoretical additions count \t\t = %i; \t Actual additions count \t\t = %i\n\n', ...
         N * log2(N), sumCount);
fprintf('Root mean square with FFTW implementation = %.10e\n', rms); 
```

# javascript - JavaScript如何在命名空间中有类

> ID：11968786
> 
> 赞同：0
> 
> 时间：2012-08-15T11:51:28.420
> 
> 标签：javascript

我想在我的命名空间中定义一个类类型，但我想不出如何做到这一点，以便“this”命令引用类的实例而不是命名空间的“this”。

如果我提供需要执行此操作的示例，这将更有意义。我正在创建一些 JavaScript 代码来将所有表单转换为通过 Ajax 提交，然后如果 Ajax 请求失败，它会在一段时间后尝试再次提交表单。这样的想法是，如果用户的互联网连接断开，该页面仍然可以工作。

代码

```
// Add event handlers to capture form submit events here (code not shown)

// Use this object as a namespace
var AjaxStack_f = function () {}

// Use this as a struct/class for defining requests (This is what I don't like)
function Request(url, data, method) {
    this.url = url;
    this.data = data;
    this.method = method;
}

// The stack of Requests
AjaxStack_f.prototype.stack = [];

// Push a Request on to the stack
AjaxStack_f.prototype.push = function(request){
    this.stack.push(request);
}

// Provide instance
var AjaxStack = new AjaxStack_f(); 
```

使用上面我可以用这段代码做我想做的事

```
var request1 = new Request("www.example.com", { value: 1 }, "get");
var request2 = new Request("www.anotherurl.com", { value: 2 }, "get");
AjaxStack.push(request1);
AjaxStack.push(request2); 
```

如何将 Request 类放在 AjaxStack 命名空间中，以便我可以做这样的事情

```
var request1 = new AjaxStack.Request("www.example.com", { value: 1 }, "get");
var request2 = new AjaxStack.Request("www.anotherurl.com", { value: 2 }, "get");
AjaxStack.push(request1);
AjaxStack.push(request2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:01:29.373

你可以这样做：

```
var AjaxStack_f = function () {}

AjaxStack_f.prototype.Request = function(url, data, method) {
    this.url = url;
    this.data = data;
    this.method = method;
} 
```

然后你可以说：

```
var AjaxStack = new AjaxStack_f();
var request1 = new AjaxStack.Request("www.example.com", { value: 1 }, "get"); 
```

在构造函数`this`中作为错误对象不会有问题，因为您使用.`Request``new`

# jquery - 在页面调整大小时触发手风琴功能

> ID：11968788
> 
> 赞同：0
> 
> 时间：2012-08-15T11:51:40.533
> 
> 标签：jquery, mobile, resize, accordion

是否可以在窗口调整大小时触发以下代码。当浏览器窗口调整到 660 像素以下时，我基本上需要一个手风琴来启动，如果超过 660 像素，则设置为 null。

```
$(document).ready(function(){
    $('.accordion ul').slideUp(-100);
});

$(".accordion > li > p").click(function(){
    if(false == $(this).next().is(':visible')) {
        $('.accordion ul').slideUp(300);
    }
    $(this).next().slideToggle(300);
});

$('.accordion ul:eq(0)').show(); 
```

我希望这里有足够的信息。

谢谢，

米奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:07:54.967

请参阅此示例：

```
function DimensionaCatalogo() {
    var tamanho = $(window).width();

    if (tamanho <= 1024) { // iPad
        $("#Carrinho").hide();
    }
} 
```

要拦截窗口调整大小，请使用以下命令：

```
$(window).resize(function () {
     DimensionaCatalogo();
}); 
```

# haskell - 具有零构造函数的代数数据类型有什么意义？

> ID：11968789
> 
> 赞同：5
> 
> 时间：2012-08-15T11:51:42.407
> 
> 标签：haskell, types, algebraic-data-types

不幸的是，这段关于在 Haskell 中开发 ADT 的文章缺乏参考，来自[A History of Haskell: Being Lazy With Class](http://research.microsoft.com/en-us/um/people/simonpj/papers/history-of-haskell/history.pdf)，第 5.1 节：

> 通常，代数类型指定一个或多个备选方案的总和，其中每个备选方案是零个或多个字段的乘积。允许零个替代项的总和可能是有用的，这将是一个完全空的类型，但当时这种类型的价值并不受欢迎。

让我想知道，这样的 ADT 有什么用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T12:01:38.737

从理论上讲：Curry-Howard 同构给了我们将这种类型解释为“假”命题的解释。“假”作为一个命题本身是有用的；但对于构造“非”组合子 (as `type Not a = a -> False`) 和其他类似构造也很有用。

务实：此类型可用于防止参数化数据类型的某些分支出现。例如，我在一个库中使用它来解析各种游戏树，如下所示：

```
data RuleSet a            = Known !a | Unknown String
data GoRuleChoices        = Japanese | Chinese
data LinesOfActionChoices -- there are none in the spec!
type GoRuleSet            = RuleSet GoRuleChoices
type LinesOfActionRuleSet = RuleSet LinesOfActionChoices 
```

这样做的影响是，在解析 Lines of Action 游戏树时，如果指定了规则集，我们*知道*它的构造函数将为`Unknown`，并且可以在模式匹配等过程中关闭其他分支。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T19:06:18.657

在对应于逻辑*假*（如另一个答案中所述）中，它们通常用于与[GADTs](http://www.haskell.org/haskellwiki/GADT)结合创建额外的类型约束。例如：

```
{-# LANGUAGE GADTs #-}
{-# LANGUAGE EmptyDataDecls #-}

import Data.List (groupBy)

data Zero
data Succ n

data Vec n a where
    Nil  ::                 Vec Zero a
    Cons :: a -> Vec n a -> Vec (Succ n) a

vhead :: Vec (Succ n) a -> a
vhead (Cons v _) = v

vtail :: Vec (Succ n) a -> Vec n a
vtail (Cons _ v) = v 
```

这里我们有两种没有构造函数的数据类型。它们在这里的含义只是表示自然数：`Zero`,`Succ Zero`等。它们在数据类型`Succ (Succ Zero)`中用作[幻像类型](http://www.haskell.org/haskellwiki/Phantom_type)`Vec`，以便我们可以在其类型中编码向量的长度。然后，我们可以编写类型安全的函数，例如`vhead`/`vtail`只能应用于非空向量。

另请参阅[Haskell 中的 [Haskell] 固定长度向量，第 1 部分：使用 GADT](http://www.haskell.org/pipermail/haskell/2005-May/015815.html)，其中详细阐述了示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T18:24:42.127

没有办法构造一个无构造函数类型的“真实”值（这里的“真实”是指终止计算；Haskell 有`undefined :: a`，并且有可能`error :: String -> a`编写像`mwahaha = mwahaha`假”值）。

[管道](http://hackage.haskell.org/package/conduit/)库的 0.5 版及更高版本就是其中一个有用的示例。库中的基本类型是`Pipe l i o u m r`; 对于这些类型具有不同的参数，a`Pipe`可以用作**源**（产生输出而不消耗任何输入）、**接收器**（消耗输入而不产生任何输出）或**管道**（消耗输入并产生输出）。`i`to和`o`type 参数分别是其`Pipe`输入和输出的类型。

`Void`因此，管道库通过使用类型 from[`Data.Void`](http://hackage.haskell.org/package/void-0.5.7)作为源的输入类型和接收器的输出类型来强制执行源不消耗输入而接收器不产生输出的概念的一种方式。同样，没有终止方法来构造这种类型的值，因此尝试使用接收器输出的程序不会终止（提醒一下，在 Haskell 中，这可能意味着“引发错误”而不一定“永远循环”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:16:02.560

没有构造函数的类型称为*幻像类型*。请参阅[Haskell wiki](http://www.haskell.org/haskellwiki/Phantom_type)中的页面。

# python - 打印所有组合，python

> ID：11968790
> 
> 赞同：4
> 
> 时间：2012-08-15T11:51:43.887
> 
> 标签：python, combinations

假设我有 3 个不同的变量，每个变量都有 2 个可能的值，所以我总共有 8 种不同的组合。是否有 python 库函数或可用于打印所有可能组合的算法？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T11:54:56.757

我认为您正在寻找[产品](http://docs.python.org/library/itertools.html#itertools.product)：

```
a = [1, 2]
b = [100, 200]
c = [1000, 2000]

import itertools
for p in itertools.product(a, b, c):
    print p 
```

印刷：

```
(1, 100, 1000)
(1, 100, 2000)
(1, 200, 1000)
(1, 200, 2000)
(2, 100, 1000)
(2, 100, 2000)
(2, 200, 1000)
(2, 200, 2000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:55:20.050

这里真正的一个功能是[itertools.product](http://docs.python.org/library/itertools.html#itertools.product)

# ios - Youtube 视频教程 - 地理标记应用程序

> ID：11968793
> 
> 赞同：-1
> 
> 时间：2012-08-15T11:52:06.253
> 
> 标签：ios, xcode4, uiviewcontroller, viewcontroller

按照本[教程](http://www.youtube.com/watch?v=qNMNRAbIDoU&list=PL56E5A96A1ADE139D&index=1&feature=plpp_video&fmt=18)，我完成了地图应用程序编码的最后阶段。

当我输入 about 时`viewControllers.mapView`，出现以下语法错误：

**'未知的接收者'viewController'; 你的意思是“UIViewController”吗？**

我正在运行**XCode 版本 4.4.1**

我相信本教程使用的是以前的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:23:36.690

我创建了 viewController 方法并且它起作用了。

# python - 如何从主线程中突然杀死一个线程？

> ID：11968800
> 
> 赞同：1
> 
> 时间：2012-08-15T11:52:49.297
> 
> 标签：python, multithreading, ftplib

我有一个使用 serve_forever 命令的 ftp 服务器。这个 ftp 服务是在一个线程中调用的，我想做的是当我点击我的 GUI 上的停止按钮时，我想从主线程中突然关闭线程。

```
import os
import sqlite3
from pyftpdlib import ftpserver
def main():
    authorizer = ftpserver.DummyAuthorizer()
    #does something
    address = ('127.0.0.1', 10221)
    ftpd = ftpserver.FTPServer(address, handler)

    # start ftp server
    ftpd.serve_forever()
if __name__ == '__main__':
    main() 
```

这是我调用 ftp 服务的主线程

```
def start_ftp(self):
    self.ftp_status.setText("Running")
    self.ftp_status.setStyleSheet("Background : light green")
    #thread.start_new_thread( FtpService )

def stop_ftp(self):
    self.ftp_status.setText("Stopped")
    self.ftp_status.setStyleSheet("Background : red")
    #what should i put here for the desired result 
```

请帮助伙计们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:20:33.523

根据[文档](http://code.google.com/p/pyftpdlib/wiki/Tutorial#2.4_-_Server_(acceptor))，`close_all`应该“停止服务......”，所以`serve_forever`应该返回。

将您的`ftpd`对象存储在全局变量中（目前它是本地的`main`），您可以调用`close`或`close_all`从主线程调用。

* * *

根据您的评论，步骤如下：

1.  make`ftpd = ftpserver.FTPServer(address, handler)`引用一个[全局变量](https://stackoverflow.com/q/4693120/212858)
2.  `ftpd.close_all()`当您想停止提供 ftp 连接时调用

# mysql - MySQL 语法 - 根据多个参数选择选择行？

> ID：11968801
> 
> 赞同：0
> 
> 时间：2012-08-15T11:52:49.937
> 
> 标签：mysql, sql, database, database-design

查看以下查询：

```
SELECT title,rating from books, book_genres WHERE
books.id = (book_genres.book_id = (book_genres.book_id=2)); 
```

我正在尝试显示一个表格，该表格显示某种类型的书籍的标题和评级。

每本书的流派在 book_genres 中定义，每本书的外键和流派之间的关系。

当我尝试执行查询时，没有返回任何错误 - 我只是得到一个空集。所以我在正确的轨道上，但我显然做错了什么。我将如何获得理想的结果？

如果有任何不清楚的地方，请告诉我，我会澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:58:11.387

尝试：

```
SELECT b.title, b.rating from books b
LEFT JOIN book_genres bg ON(bg.book_id = b.book_id)
WHERE b.book_id = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:01:47.997

尝试这个

```
SELECT b.title, b.rating from books b, book_genres bg
WHERE bg.book_id = b.book_id and b.book_id = 2 
```

# java - 使用 JSch sudo 示例和 Channel.setPty 在远程主机上运行 sudo 命令

> ID：11968805
> 
> 赞同：3
> 
> 时间：2012-08-15T11:53:14.593
> 
> 标签：java, ssh, amazon-ec2, sudo, jsch

我在以下链接下使用了 JSch Sudo 示例：

[http://www.jcraft.com/jsch/examples/Sudo.java.html](http://www.jcraft.com/jsch/examples/Sudo.java.html)

并对其进行了一些更改并摆脱了所有对话框，因为我必须将它用于使用 PuTTY 的 EC2 实例。

现在我的代码如下所示：

```
import com.jcraft.jsch.*;
import java.awt.*;
import javax.swing.*;
import java.io.*;

public class sudo{
  public static void main(String[] arg){
    try{
      JSch jsch=new JSch();

      String host=null;
      if(arg.length>0){
        host=arg[0];
      }

      String privateKey = "my private key.pem";

      jsch.addIdentity(privateKey, "");
      Session session=jsch.getSession("ec2-user", "xx.xx.xx.xx", 22);

      session.setPassword("");
      java.util.Properties config = new java.util.Properties();
      config.put("StrictHostKeyChecking", "no");
      session.setConfig(config);

      session.connect();

      String command="sudo mkdir /data";
      String sudo_pass="";

      Channel channel=session.openChannel("exec");

      // man sudo
      // -S The -S (stdin) option causes sudo to read the password from the
      // standard input instead of the terminal device.
      // -p The -p (prompt) option allows you to override the default
      // password prompt and use a custom one.
      ((ChannelExec)channel).setCommand("sudo -S -p '' "+command);

      InputStream in=channel.getInputStream();
      OutputStream out=channel.getOutputStream();
      ((ChannelExec)channel).setErrStream(System.err);

      channel.connect();

      out.write((sudo_pass+"\n").getBytes());
      out.flush();

      byte[] tmp=new byte[1024];
      while(true){
        while(in.available()>0){
          int i=in.read(tmp, 0, 1024);
          if(i<0)break;
          System.out.print(new String(tmp, 0, i));
        }
        if(channel.isClosed()){
          System.out.println("exit-status: "+channel.getExitStatus());
          break;
        }
        try{Thread.sleep(1000);}catch(Exception ee){}
      }
      channel.disconnect();
      session.disconnect();
    }
    catch(Exception e){
      System.out.println(e);
    }
  }
} 
```

但我得到了错误

> 抱歉，您必须有一个 tty 才能运行 sudo

我也尝试使用`((ChannelExec) channel).setPty(true)`，但我可以运行该程序一次，但下一次，对于同一个 EC2 实例，我收到以下错误，但对于新实例，它第一次运行良好。

```
com.jcraft.jsch.JSchException: Session.connect: java.io.IOException: End of IO Stream Read
sudo mkdir /data
Exception in thread "main" com.jcraft.jsch.JSchException: session is down
        at com.jcraft.jsch.Session.openChannel(Session.java:791) 
```

然后我也无法从命令行 ssh 远程主机。

有人可以指导我`sudo`在远程主机上运行命令需要做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:29:13.243

我正在处理的项目中有类似的代码，并且遇到了同样的错误。我`setPty(true)`像你一样使用解决了这个问题。

我认为您收到此错误是因为您没有关闭代码中的流。如果您使用的是 Java 1.7，则可以按如下方式使用资源块：

```
try( InputStream in=channel.getInputStream() ) {
    try( OutputStream out = channel.getOutputStream() ) {
    ...
    }
} 
```

或过去版本中的 try...finally 块模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T09:04:02.080

设置后

```
((ChannelExec) channel).setPty(true) 
```

我的代码中报告的问题得到了解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T09:49:57.293

默认情况下，SUDO 配置为需要 TTY。也就是说，SUDO 应该从登录 shell 运行。

这可能是因为您的 /etc/sudoers 文件（或它包含的任何文件）具有：

```
Defaults requiretty 
```

但是 sudo 中的选项 -S 将使它从标准输入中读取。

```
-S    The -S (stdin) option causes sudo to read the password from
      the standard input instead of the terminal device.  The pass-
      word must be followed by a newline character. 
```

Jsch 利用相同的漏洞并尝试发送密码。如果你想让 Jsch 在不提示密码的情况下工作，你需要从 sudoers 文件中禁用 requiretty...使用 visudo 命令如下

```
Defaults !requiretty 
```

或者

```
#Defaults requiretty 
```

# erlang - erlang中的热代码替换

> ID：11968809
> 
> 赞同：20
> 
> 时间：2012-08-15T11:53:51.110
> 
> 标签：erlang

我正在使用 erlang 进行我的第一个真实项目，但是，为简洁起见，此代码已简化。我希望能够在项目运行时将较新版本的文件**远程**加载到我的项目中。我读过关于使用类似`gen_server`或`gen_fsm`免费的行为。虽然这可能会达到结果，但我想用它来学习如何去做，而不仅仅是完成它。我已经阅读了有关[代码替换](http://www.erlang.org/doc/reference_manual/code_loading.html#id83918)的文档，以及 LYSE 关于[Hot Code Loving](http://learnyousomeerlang.com/designing-a-concurrent-application#hot-code-loving)的一些内容，但我还没有找到任何适合我正在做的事情的东西，所以这是基本的想法。

```
-module(reloading).

-export([loop/0]).

loop() ->
    receive
        upgrade ->
            ?MODULE:loop();
        hello ->
            io:format("This is a test~n"),
            loop();
        _ ->
            loop()
    end. 
```

我只是在循环我可以发送消息`upgrade`并且它将加载更新版本的代码的想法。

```
$ erl
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
1> c(reloading).
{ok,reloading}
2> Loop = spawn(reloading, loop, []).
<0.39.0>
3> Loop ! hello.
This is a test
hello 
```

此时我将 10 行更改为`io:format("I have changed this!~n"),`

```
4> Loop ! upgrade.
upgrade
5> Loop ! hello.  
This is a test
hello 
```

我希望这个电话不会`hello`打印。我知道我可以简单地调用并按照预期的方式进行这项工作，但我希望向实际项目发送消息，而不是手动更新代码。那么我的断开连接在哪里？我做错了什么，为了热加载这段代码我应该做什么？如前所述，为了教育，我正在寻找非 OTP 解决方案。`I have changed this!``This is a test``c(reloading).`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-15T15:10:59.487

为了得到明确的答案，我发布了这个。

使用使用[代码](http://www.erlang.org/doc/man/code.html)`@rvirding`模块的建议，我将其修改为如下所示：

```
-module(reloading).

-export([loop/0]).

loop() ->
    receive
        upgrade ->
            code:purge(?MODULE),
            compile:file(?MODULE),
            code:load_file(?MODULE),
            ?MODULE:loop();
        hello ->
            io:format("This is a test~n"),
            loop();
        _ ->
            loop()
    end. 
```

首先[code:purge](http://www.erlang.org/doc/man/code.html#purge-1) old `?MODULE`，然后[compile:file](http://www.erlang.org/doc/man/compile.html#file-1)新文件，最后[code:load_file](http://www.erlang.org/doc/man/code.html#load_file-1)新文件`?MODULE`。这按我最初的意图工作。

```
$ erl
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
1> Loop = spawn(reloading, loop, []).
<0.34.0>
2> Loop ! hello.
This is a test
hello 
```

将行更改为`io:format("I have changed this!~n"),`

```
3> Loop ! upgrade.                   
upgrade
4> Loop ! hello.  
I have changed this!
hello 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-15T12:42:00.783

虽然 erlang 可以处理模块的两个版本并且调用函数`mod:func(...)`总是会调用模块的最新版本（如果函数已导出），但您仍然必须将模块的新版本加载到 Erlang 系统中。你不能指望它会自动检测到你碰巧在某个地方有一个新版本的模块，找到它，编译它并加载它。

**NB**编译和加载是两个独立的事情。因此`c(mod).` **，两者都**编译**和**加载模块，而`l(mod).`只是加载已编译模块的目标代码（.beam 文件）。Erlang 编译器是从模块中调用的`compile`，它只是编译并生成一个 .beam 文件，而代码加载由模块处理`code`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T19:35:45.017

除了上述之外，我还想注意到一些自动为您重新加载代码的工具。

您应该查看[同步](https://github.com/rustyio/sync)或[活动](https://github.com/synrc/active)项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-23T19:33:34.120

在本地编译 *.beam，然后将其发送到您的服务器并按照手册页中的说明重新加载：

[http://erlang.org/documentation/doc-1/reference_manual/code_loading.html#id86381](http://erlang.org/documentation/doc-1/reference_manual/code_loading.html#id86381)

```
-module(m).
-export([loop/0]).

loop() ->
    receive
        code_switch ->
            m:loop();
        Msg ->
            ...
            loop()
    end. 
```

# ios - 在 uitablview 中显示多个 uiwebview

> ID：11968810
> 
> 赞同：2
> 
> 时间：2012-08-15T11:53:56.100
> 
> 标签：ios, uitableview, uiwebview

我遇到了 webview 的问题，我认为很多人都遇到过。

在我的应用程序中，我有一个 UITableview 并且 tableview 的每个单元格都是自定义的。在每个单元格中嵌入了一个 UIWebview。当我滚动我的表格视图时，我需要显示每个单元格的内容。（webview 的 loadHTML 和 image_url 来自本地数组）

问题是每个单元格中的 UIWebview 加载一个远程图像 url，当用户滚动表格如此之快时，单元格中的 webview 无法足够快地响应，因此 webview 可能会显示重复的图像少于 1 秒。（因为我使用了可重用的单元格和来自 image_url 数组的 webview 加载，所以

```
image_url = [array_image_url objectAtIndex:[index row]]; 
```

对于用户体验来说，看到重复的图像是很糟糕的。我试图弄清楚，但仍然无法。谁能帮我解决这个问题？

PS：如果可能的话，我不想在磁盘上缓存图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:10:30.080

我遇到了类似的问题（我正在显示远程图像）并使用`UIScrollView`委托方法（`UITableView`继承自`UIScrollView`）来处理何时更新我的​​图像。当滚动停止时，您可以执行类似于加载内容的操作：

```
// UIScrollView Delegate Methods
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
    if (!decelerate) {
        [self loadImagesForOnscreenRows];
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    [self loadImagesForOnscreenRows];
} 
```

编辑 - 忘记了实际加载行的方法。这可能会有所帮助 :) 注意 - 此代码中的某些特定于我的应用程序，您需要适应您的数据和图像的 Web 位置。另外 - setImageWithURL 方法是 AFNetworking 库的一部分。如果您还没有检查过 AFNetworking，它会很震撼。如果您还没有使用 AFN 并且不需要，那么我还添加了一个我编写的类，它使用块来异步加载 Web 图像。

```
- (void)loadImagesForOnscreenRows
{
    if ([self.phonebookData count] > 0)
    {
        NSArray *visiblePaths = [self.myTableView indexPathsForVisibleRows];
        for (NSIndexPath *indexPath in visiblePaths)
        {
            NSDictionary *selRow = [[self.persons valueForKey:[[[self.persons allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];

            PBCell *cell = (PBCell *)[self.myTableView cellForRowAtIndexPath:indexPath];

            if ([[selRow objectForKey:@"picFileName"] length] > 0) {           
                [cell.thumbnailImage setImageWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"YourURLHere/%@",[selRow objectForKey:@"picFileName"]]] placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

            } else {
                cell.thumbnailImage.image = [UIImage imageNamed:@"defaultImage.png"];
            }
        }
    }
} 
```

替代方法而不是 AFNetworking：

```
WebImageOperations.h:

//
//  WebImageOperations.h
//
//  Created by Larry Wilson on 11/11/11.
//  Copyright (c) 2011 Larry Wilson. All rights reserved.
//

#import <Foundation/Foundation.h>

@interface WebImageOperations : NSObject {
}

+ (void)processImageDataWithURLString:(NSString *)urlString andBlock:(void (^)(NSData *imageData))processImage;

@end 
```

WebImageOperations.m:

```
//
//  WebImageOperations.m
//
//  Created by Larry Wilson on 11/11/11.
//  Copyright (c) 2011 Larry Wilson. All rights reserved.
//

#import "WebImageOperations.h"
#import <QuartzCore/QuartzCore.h>

@implementation WebImageOperations

+ (void)processImageDataWithURLString:(NSString *)urlString andBlock:(void (^)(NSData *imageData))processImage
{
    NSURL *url = [NSURL URLWithString:urlString];

    dispatch_queue_t callerQueue = dispatch_get_current_queue();
    dispatch_queue_t downloadQueue = dispatch_queue_create("com.myappname.processimagedataqueue", NULL);
    dispatch_async(downloadQueue, ^{
        NSData * imageData = [NSData dataWithContentsOfURL:url];

        dispatch_async(callerQueue, ^{
            processImage(imageData);
        });
    });
    dispatch_release(downloadQueue);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T15:08:27.293

UITableView 中的多个 UIWebViews 不是一个好的做法。但是有时我们想在短时间内构建一个应用程序，UIWebView 对我们来说是一个非常方便的类。

就我而言，我设置了一个自定义 UITableViewCell

CustomTableViewCell.h

```
#import <UIKit/UIKit.h>

@interface VerticalTableViewCell : UITableViewCell

@property (nonatomic,retain) UIWebView * webView;

-(void)setWebViewContent:(NSString *)htmlContent andIndex:(NSString *)row;

@end 
```

CustomTableViewCell.m

```
#import "CustomTableViewCell.h"

@interface CustomTableViewCell()

@end

@implementation VerticalTableViewCell

@synthesize webView;

- (instancetype)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:reuseIdentifier];
    if (self) {

        self.webView = [[UIWebView alloc]init];
        [self.webView setFrame:self.contentView.frame];
        [self.webView setUserInteractionEnabled:NO];
        [self.contentView addSubview:self.webView];

    }

    return self;
}

-(void)setWebViewContent:(NSString *)htmlContent andIndex:(NSString *)row
{
    [self.webView loadHTMLString:[NSString stringWithFormat:@"<html><head></head><body><div style='width:414px;height:414px;background-image:url(%@);background-size:414px 414px;'></div><p>现在是第%@排&lt;/p></body></html>",htmlContent,row] baseURL:nil];

}

- (void) layoutSubviews
{
    [super layoutSubviews];

    CGRect contentViewFrame = self.contentView.frame;
    contentViewFrame.size.width = [[UIScreen mainScreen] bounds].size.width;
    contentViewFrame.size.height = 586.0f;
    self.contentView.frame = contentViewFrame;
    self.webView.frame = contentViewFrame;
}

-(void)dealloc
{
    [self.webView loadHTMLString:nil baseURL:nil];
    self.webView = nil;
}

@end 
```

自定义表格视图.m

```
...

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CMainCell = @"CMainCell";

    CustomTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CMainCell];
    if (cell == nil) {
        cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleValue1  reuseIdentifier: CMainCell];
        //自定义cell的内容
    }
    if (self.whiteData!=nil) {
        NSString * row = [NSString stringWithFormat:@"%ld",indexPath.row];
        [cell setWebViewContent:self.whiteData[indexPath.row] andIndex:row];
        //[cell setCustomImage:self.whiteData[indexPath.row]];
    }

    return cell;
}

-(void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomTableViewCell * customCell = (CustomTableViewCell *)cell;
    [customCell.webView loadHTMLString:nil baseURL:nil];
}

... 
```

你可以看到我使用的方法：

```
-(void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath; 
```

在这个方法中，当tableView中的cell不可见时，cells会将webViews设置为空。

在我们的案例中，由于 UITableView Reuse 特性，cells 不会清理 contentViews。因此用户以非常快速的方式滚动 tableView，cells 将被重用并且 HTML 内容仍然存在。如果我们清理 contentView，效果很好。

但是这里还有一个问题。因为单元格在进入可见区域时应该渲染HTML内容。UIWebView的渲染速度不是很快，所以我们应该编写一些代码来优化渲染过程。

希望这会帮助你。干杯。

# javascript - jquery ui 1.9 beta ui autocomplete 引用了一个函数 response() ，但我没有找到它的实现（源代码可用）

> ID：11968813
> 
> 赞同：0
> 
> 时间：2012-08-15T11:54:07.813
> 
> 标签：javascript, jquery-ui, widget

```
 response( someObject ); 
```

这个响应函数被引用了很多，但我找不到它的实现。有人明白发生了什么吗？

[github上的完整源代码](https://github.com/jquery/jquery-ui/blob/1.9.0-beta.1/ui/jquery.ui.autocomplete.js)

[完整的源代码原始](https://raw.github.com/jquery/jquery-ui/1.9.0-beta.1/ui/jquery.ui.autocomplete.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:35:39.850

如果我正确地遵循了代码，[它将被实现为`_response`](https://github.com/jquery/jquery-ui/blob/1.9.0-beta.1/ui/jquery.ui.autocomplete.js#L410)，这似乎是用于显示您的术语的 jQuery 自动完成入口点（在 中实现`__response`）。

[`_response``this._response``_search`](https://github.com/jquery/jquery-ui/blob/1.9.0-beta.1/ui/jquery.ui.autocomplete.js#L402)像回调一样[传递](https://github.com/jquery/jquery-ui/blob/1.9.0-beta.1/ui/jquery.ui.autocomplete.js#L402)[给函数。](https://github.com/jquery/jquery-ui/blob/1.9.0-beta.1/ui/jquery.ui.autocomplete.js#L402)

# algorithm - 小文件的哈希算法

> ID：11968816
> 
> 赞同：-1
> 
> 时间：2012-08-15T11:54:23.710
> 
> 标签：algorithm, hash

前段时间我遇到过一种哈希算法，它对小文件非常有用。从记忆中，算法本身非常简单。它涉及将散列与下一个字节相加并乘以某个固定数字（也许是 33？），然后最后有一个位移。

伪代码如下所示：

```
for each byte:
    x = nextbyte * 33
    hash += x
    hash <<= 4 
```

有人知道这个哈希算法的名字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:05:41.520

它看起来像[java哈希码算法：](http://en.wikipedia.org/wiki/Java_hashCode%28%29)

```
public static int calculateHash(String input) {
    int h = 0;
    int len = input.length();
    for (int i = 0; i < len; i++) {
        h = 31 * h + input.charAt(i);
    }
    return h;
} 
```

但如果这不是真的，请尝试滚动[哈希函数列表](http://en.wikipedia.org/wiki/List_of_hash_functions)

# facebook - Facebook Canvas 应用程序部分加载

> ID：11968825
> 
> 赞同：4
> 
> 时间：2012-08-15T11:55:08.313
> 
> 标签：facebook, heroku, facebook-page, facebook-canvas

我有一个单页 FB Canvas 应用程序，它通过 iframe 调用我在 Heroku 上托管的页面。

通过我的 heroku 链接直接加载页面没有问题。但是，当我尝试通过画布应用程序加载页面时，它有时只加载了一半的 HTML。我需要垃圾邮件刷新，以便整个页面在应用程序中正确呈现。

我已经根据 W3C 验证器检查了我的页面，并且没有语法问题。

Heroku只是慢了吗？当我直接访问 url 时，它加载得非常快。

什么可能导致我的页面加载到一半就停止了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:05:13.553

我在使用 Heroku 时遇到了这个问题，但仅限于我和一位分别以所有者和测试者身份与应用程序关联的同事，其他帐户可以正常加载页面。

通过24/3 ADSL测试通过[pagekite](http://pagekite.me)托管的相同应用程序非常有效。

HTTPS 或 HTTP 似乎无关紧要。我会说这是一个 Heroku 问题。

* * *

编辑：我不确定发生了什么，但问题不存在了。我想不出我做了什么可以解决这个问题，但是在问题消失之前和之后我做了很多事情，比如在数据库中缓存远程数据等等。我不能确定这有什么帮助，或者它是否是 Heroku 基础设施中的一些隐藏问题。

我就这个问题联系了 Heroku，当他们回复我时，这个问题突然消失了。

我已承诺返回日志（应用程序和客户端 HTTP/TCP 日志），如果您遇到此问题并且可以重现它，请捕获日志并将其发送给[Heroku 支持](https://help.heroku.com/)。捕获 TCP 流量可以使用[wireshark](http://www.wireshark.org/)完成， Heroku 应用程序日志可以通过`heroku logs`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:19:17.167

我也有这个问题。我认为这与这个问题中的问题有关：[iFrame 在 Facebook Canvas App 中显示空白](https://stackoverflow.com/questions/11056283/iframe-showing-up-blank-in-facebook-canvas-app)

如果它是使用 Flask 的 Python 应用程序，请尝试以下代码： from werkzeug.wsgi import LimitedStream

```
class StreamConsumingMiddleware(object):

    def __init__(self, app):
        self.app = app

    def __call__(self, environ, start_response):
        stream = LimitedStream(environ['wsgi.input'],
                               int(environ['CONTENT_LENGTH'] or 0))
        environ['wsgi.input'] = stream
        app_iter = self.app(environ, start_response)
        try:
            stream.exhaust()
            for event in app_iter:
                yield event
        finally:
            if hasattr(app_iter, 'close'):
                app_iter.close() 
```

用这条线激活它：

```
app.wsgi_app = StreamConsumingMiddleware(app.wsgi_app) 
```

资料来源： http: [//flask.pocoo.org/snippets/47/](http://flask.pocoo.org/snippets/47/)

# css - 边距在 Firefox 和 Safari 中看起来不错，但在 IE 中要宽得多

> ID：11968826
> 
> 赞同：0
> 
> 时间：2012-08-15T11:55:08.547
> 
> 标签：css, internet-explorer, margin

我遇到了一个问题，我有一个内联块，其边距可以在 Safari 和 Firefox 中正确显示。但在 IE 中，由于某种原因，边距要大得多，也就是说 IE 中的宽度要宽得多。事实上在 IE 中显示整个页面，就好像浏览器窗口大了很多一样。

我的 CSS 如下所示：

```
.wpcontainer {
 display: inline-block;
 width: 80%;
 margin-left: 10%;
 margin-right: 10%;
 padding: 1%;
 background-color: #FFFFFF;
} 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:21:34.547

我认为您应该提供链接或整个代码，以便我可以在计算机上检查问题所在。你的 CSS 有一个问题`width 80% + margin 20% + padding 2% = 102%`，实际上它应该是这样的

```
.wpcontainer {
  display: inline-block;
  width: 78%;
  margin-left: 10%;
  margin-right: 10%;
  padding: 1%;
  background-color: #FFFFFF;
} 
```

# javascript - 与输入值相关的对象的警报值属性

> ID：11968829
> 
> 赞同：0
> 
> 时间：2012-08-15T11:55:13.083
> 
> 标签：javascript, jquery

我无法提醒与区域标签 ID 对应的对象值。

我的代码是，

```
 $(document).ready(function () {
            $(".wholecirclewrapper area").click(function(){      
                if($(this).hasClass("active")) {        
                    return false;
                }       
                var choice = $(this).attr("id");    
                $.each(results.States, function(i, item) {
                    var st=results.States[i].Name;
                    if(choice==st)
                    {
                        alert(results.States[i].ISHI);  
                    }
                });

            });

        }); 
```

我的 HTML 代码是

```
 <div id="mapdiv">
        <img src="india.gif"  alt="India" usemap="#indiamap" />
        <map name="indiamap" class="wholecirclewrapper">
            <area class="specificshelfdiv1" id="AndraPradesh" shape="rect" coords="0,0,82,126" href="#"  />
            <area class="specificshelfdiv2" id="ArunachalPradesh" shape="circle" coords="90,58,3" href="#"  />
            <area class="specificshelfdiv3" id="Assam" shape="circle" coords="124,58,8" href="#"   />     
        </map> 
    </div> 
```

我的外部 json 看起来像

```
 var results={"States":[
        { "Name" : "AndraPradesh" , "ISHI" : "19.5 (Serious)" ,"Literacy rate" : "67.7" ,"Population rate" : "84,665,533" ,"NFHS" : "29.8" ,"Tap water" : "69.9"}, 
        { "Name" : "ArunachalPradesh" , "ISHI" : "Not estimated" ,"Literacy rate" : "67" ,"Population rate" : "1,382,611" ,"NFHS" : "29.6" ,"Tap water" : "65.5"}, 
        { "Name" : "Assam" , "ISHI" : "19.8 (Serious)" ,"Literacy rate" : "73.2" ,"Population rate" : "31,169,272" ,"NFHS" : "35.8" ,"Tap water" : "10.5"} 
     ]
     }; 
```

我通过调用 json

```
 <script src="json_states.json" type="text/javascript"> </script> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:59:19.557

首先，尝试用console.log**替换****alert**

 **```
console.log(results.States[i].ISHI); 
```

然后在 Chrome 中按 F12，转到控制台并查看是否打印了值。根据经验，始终使用 console.log 而不是 alert，因为它更强大且更易于使用。

更新：

尝试在文档头中按以下顺序加载脚本：

```
<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script src="json_states.json"></script>
<script>
   $(document).ready(function () {
...
</script> 
```

另请参阅我写的这个例子：[http ://radulescu.me/overflow/1/](http://radulescu.me/overflow/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:07:28.203

您的代码似乎在[此 jsFiddle 示例](http://jsfiddle.net/Br8VQ/1/)中有效。我正在添加另一个元素`<p id="result"></p>`，而不是提醒我正在设置`.text()`这个元素，这很好。试试这个方法`alert`，看看你得到了什么。

```
$(".wholecirclewrapper area").click(function() {
    if ($(this).hasClass("active")) {
        return false;
    }

    var choice = $(this).attr("id");

    $.each(results.States, function(i, item) {
        var st = results.States[i].Name;
        if (choice == st) {
            $("#result").text(results.States[i].ISHI);
        }
    });
}); 
```

您是否使用某种弹出窗口阻止程序，因为这些阻止某些脚本执行。如果没有，那么我建议您在浏览器调试环境中检查脚本错误。

* * *

**编辑**- 如果您从外部文件加载 json，而不是将其包含在标题中，您是否尝试像这样加载它：

```
$.getJSON('json_states.json', function(data) {
    var results = data;

    // do the rest of your script here
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T13:14:33.787

已经说了3次了，但是你好像忽略了，或者不理解，我再发一次。

```
var results={"States":[
    { "Name" : "AndraPradesh" , "ISHI" : "19.5 (Serious)" ,"Literacy rate" : "67.7" ,"Population rate" : "84,665,533" ,"NFHS" : "29.8" ,"Tap water" : "69.9"}, 
    { "Name" : "ArunachalPradesh" , "ISHI" : "Not estimated" ,"Literacy rate" : "67" ,"Population rate" : "1,382,611" ,"NFHS" : "29.6" ,"Tap water" : "65.5"}, 
    { "Name" : "Assam" , "ISHI" : "19.8 (Serious)" ,"Literacy rate" : "73.2" ,"Population rate" : "31,169,272" ,"NFHS" : "35.8" ,"Tap water" : "10.5"} 
 ]
 }; 
```

不是 JSON。它是一个 Javascript 对象。

JSON 就是这样：

```
{"States":[
    { "Name" : "AndraPradesh" , "ISHI" : "19.5 (Serious)" ,"Literacy rate" : "67.7" ,"Population rate" : "84,665,533" ,"NFHS" : "29.8" ,"Tap water" : "69.9"}, 
    { "Name" : "ArunachalPradesh" , "ISHI" : "Not estimated" ,"Literacy rate" : "67" ,"Population rate" : "1,382,611" ,"NFHS" : "29.6" ,"Tap water" : "65.5"}, 
    { "Name" : "Assam" , "ISHI" : "19.8 (Serious)" ,"Literacy rate" : "73.2" ,"Population rate" : "31,169,272" ,"NFHS" : "35.8" ,"Tap water" : "10.5"} 
 ]} 
```

我不确定 .json 文件扩展名是否会导致任何浏览器出现问题，但如果您在文件中定义一个变量，它应该只是 .js ... 因为它就是这样。**

# mingw - minGW (gcc for windows) - 访问被拒绝 - 解决方案或解决方法

> ID：11968832
> 
> 赞同：0
> 
> 时间：2012-08-15T11:55:53.333
> 
> 标签：mingw

首先我解释一下背景：我希望在 Windows 上安装一些 python（和其他）库能够正常工作，我的意思是在构建过程中需要 c 编译的库。

由于 cygwin 出现问题并阅读了一些建议，我选择安装 minGW 工具和编译器。之后，我将 mingw/bin 添加到 PATH 中。

从命令行键入 gcc 时，我得到：访问被拒绝

如果我尝试 gcc-4 或 g++，我会得到正确的响应。尝试检查安全权限，但似乎我的用户拥有所有可用的安全权限，从 minGW shell 运行 gcc 工作正常，但不能解决我的基本问题自动安装在构建过程中具有编译阶段的依赖项（因为我没有控制它从哪里运行）有谁知道这个问题的解决方案或解决方法？

使用win7 pro 64位

# c# - 在 ASP.NET MVC 3 中通过 PowerShell 的 O365：抛出 MicrosoftOnlineException

> ID：11968836
> 
> 赞同：3
> 
> 时间：2012-08-15T11:56:25.360
> 
> 标签：c#, asp.net-mvc-3, powershell, office365

我有一个 ASP.NET MVC 3 应用程序，它使用 PowerShell 连接到 Office 365 以检索有关用户许可证的一些详细信息。

代码本身在许多情况下都有效：

*   我本地 IIS 中的项目有效
*   使用该库的 LINQPad 中的一段代码在我的机器上工作
*   使用该库的 LINQPad 中的一段代码在目标服务器上工作

它不工作的地方当然是它真正*应该*工作的唯一地方：目标服务器上的 IIS。

`Connect-MsolService`调用cmdlet时，我总是遇到异常。问题是异常并没有告诉我任何事情。

异常类型是

`Microsoft.Online.Administration.Automation.MicrosoftOnlineException`

消息是

> 引发了“Microsoft.Online.Administration.Automation.MicrosoftOnlineException”类型的异常

这是非常没用的。

我在代码中使用的 Office 365 用户帐户始终相同。用于启动 IIS 的用户帐户也始终相同（本地系统）。

我将 PowerShell 代码执行包装在一个名为`PowerShellInvoker`. 它的代码可以在[这里](http://pastebin.com/Gqd9nMw1)找到。

这是连接到 Office 365 的代码：

```
var cred = new PSCredential(upn, password);

_psi = new PowerShellInvoker("MSOnline");
_psi.ExecuteCommand("Connect-MsolService", new { Credential = cred }); 
```

实际上并没有*抛出异常*，错误是在`Error`管道的属性中发现的。（参见课程的第 50 行`PowerShellInvoker`。）

问题是我不知道可能出了什么问题，特别是因为当我使用 LINQPad 时相同的代码可以工作。谷歌的搜索结果也帮不了我。

该服务器在带有 IIS 7.5 的 Windows Server 2008 R2 Datacenter SP1 上运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T14:43:13.753

我找到了解决方案！

我不知道原因，但在目标服务器上，我的应用程序的应用程序池的高级设置已将**Load User Profile**设置为`False`. 我把它改回`True`（这应该是默认的）并且瞧，它有效！

***编辑：***加载**用户配置文件**设置显然`False`是默认自动设置的，因为安装了 IIS 6.0 管理器并且`False`是 IIS 6.0 之前的默认行为。

# flash - SwfObject 没有在 IE 中设置 bgcolor

> ID：11968840
> 
> 赞同：0
> 
> 时间：2012-08-15T11:56:39.957
> 
> 标签：flash, internet-explorer, background-color, swfobject, param

我正在尝试使用 SwfObject javascript 创建一个 flash 对象。它如何与 FF 和 chrome 一起工作，但它不显示背景颜色

* * *

## 我的 JS 代码

```
 var swfWidth = "500";
 var swfHeight = "500";
 var swfBgColor = "#ff0000";

 var flashVersion = '9.0.0'
 var flashvars = false;
 var params = { bgcolor:swfBgColor };
 var attributes = {};

 swfobject.embedSWF(swfUrl, "kcSwf", swfWidth, swfHeight, flashVersion, "/resources/expressInstall.swf", flashvars, attributes, params); 
```

* * *

## 这是它在我的 IE 上为上述代码提供的输出。

它确实在标签上设置了**bgcolor****属性**，但是它没有在**标签**中设置 bgcolor （见下文）

 ****```
<OBJECT style="VISIBILITY: visible" id=kcSwf classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 width=620 height=540 bgcolor="F8F8F8"><PARAM NAME="_cx" VALUE="16404"><PARAM NAME="_cy" VALUE="14287"><PARAM NAME="FlashVars" VALUE="">
 <PARAM NAME="Movie" VALUE="http://test.skf.com/CampaignBanner/knowledgeengineering/090309_banners/flash_example.swf">
 <PARAM NAME="Src" VALUE="http://test.skf.com/CampaignBanner/knowledgeengineering/090309_banners/flash_example.swf">
 <PARAM NAME="WMode" VALUE="Window"><PARAM NAME="Play" VALUE="-1">
 <PARAM NAME="Loop" VALUE="-1">
 <PARAM NAME="Quality" VALUE="High"><PARAM NAME="SAlign" VALUE="">
 <PARAM NAME="Menu" VALUE="-1">
 <PARAM NAME="Base" VALUE=""><PARAM NAME="AllowScriptAccess" VALUE="">
 <PARAM NAME="Scale" VALUE="ShowAll">
 <PARAM NAME="DeviceFont" VALUE="0">
 <PARAM NAME="EmbedMovie" VALUE="0">
 <PARAM NAME="BGColor" VALUE="">           // <--- check this
 <PARAM NAME="SWRemote" VALUE="">
 <PARAM NAME="MovieData" VALUE="">
 <PARAM NAME="SeamlessTabbing" VALUE="1">
 <PARAM NAME="Profile" VALUE="0">
 <PARAM NAME="ProfileAddress" VALUE="">
 <PARAM NAME="ProfilePort" VALUE="0">
 <PARAM NAME="AllowNetworking" VALUE="all">
 <PARAM NAME="AllowFullScreen" VALUE="false">
 <PARAM NAME="AllowFullScreenInteractive" VALUE="">
</OBJECT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:17:35.030

:) 我认为我的帖子很愚蠢，我自己回答问题:)

好吧，这是一个愚蠢的问题，但也许有一天它可能会对某些人有所帮助。我弄乱了**属性和参数的顺序**

* * *

## 错误的顺序

swfobject.embedSWF(swfUrl, "kcSwf", swfWidth, swfHeight, flashVersion, "/resources/expressInstall.swf", flashvars,**属性, 参数**);

* * *

## 正确的顺序

swfobject.embedSWF(swfUrl, "kcSwf", swfWidth, swfHeight, flashVersion, "/resources/expressInstall.swf", flashvars, **params, attributes** );****

# html - Trigger.io 是否有用于缓存媒体文件以供离线访问的 API？

> ID：11968841
> 
> 赞同：1
> 
> 时间：2012-08-15T11:56:40.623
> 
> 标签：html, cordova, media, offline-caching, trigger.io

我阅读了Trigger.io Forge 网站上的[缓存文档。](http://docs.trigger.io/en/v1.4/features/cache.html)但我无法确定他们是否支持缓存媒体文件以进行离线访问。Mobile Safari 不支持缓存 HTML5 应用程序的媒体文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:24:25.813

是的，这可以通过我们的[forge.file.cacheURL](http://current-docs.trigger.io/modules/file.html#cacheurl)方法实现

# php - 处理脸书异常

> ID：11968842
> 
> 赞同：2
> 
> 时间：2012-08-15T11:56:47.353
> 
> 标签：php, facebook, exception, facebook-php-sdk

也许这很简单，但我不知道该怎么做，所以我问。有时我会从 facebook 收到异常，例如发布操作失败。通常它可以工作，但有时不会。我使用 php sdk 并且当有某事时。错了，我得到一个 facebook 异常，整个网站停止运行。

有没有办法我可以忽略这些异常并将其存储在数据库中，以便网站的其余部分正常工作？

我认为它在 base_facebook.php 中，希望有人知道我必须更改哪一行。

非常感谢你

鲁文

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:00:07.653

您无需接触 Facebook SDK。您可以捕获异常并对它们做任何您喜欢的事情（例如将它们存储在数据库中）。

例子：

```
try {
    // Facebook code here
} catch (Exception $e) {
    // Display the exception (or whatever else you like)
    echo $e->getType()." ".$e->getMessage();
} 
```

# jquery - jquery 验证不起作用发送邮件

> ID：11968844
> 
> 赞同：1
> 
> 时间：2012-08-15T11:56:55.363
> 
> 标签：jquery, html, forms, validation, contact

我有一个小问题。我创建了一个经过 jquery 验证的表单。验证工作完美，我只是没有收到邮件。我将解释：如果我将我的 jquery 验证取消到我正确接收邮件的表单，如果我再次插入它以验证电子邮件没有到达更多......成本我做错了吗？

这是 html 代码和 jquery：http: [//jsfiddle.net/Je7ep/](http://jsfiddle.net/Je7ep/)

这是发送正常工作的邮件的代码 php：http: [//jsfiddle.net/daArB/](http://jsfiddle.net/daArB/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:40:54.510

您能否在发送邮件中添加一行以记录代码是否完全运行？

这可能只是您的邮件服务器设置中的一个错误，因为代码似乎可以正常工作。

尝试并实现这里提到的记录器：

[http://www.redips.net/php/write-to-log-file/](http://www.redips.net/php/write-to-log-file/)

然后让它记录在它已完成的发送邮件的末尾。

# linq - LINQ 中的 GROUP BY 和 HAVING

> ID：11968854
> 
> 赞同：0
> 
> 时间：2012-08-15T11:57:54.963
> 
> 标签：linq, count, group-by, having

我想将此代码转换为 linq：

```
select t1.title, COUNT(*)as num 
from t1 INNER join t2 on t2.gId = t1.Id 
group by t1.title, t1.cId 
having t1.cId = 2 
```

我尝试了以下代码：

```
from p in db.t1s join r in db.t2s on p.Id equals r.gId 
where p.cId == 2 
group p by p.title into g 
select new{ name = from o in g select o.title, num = g.Count()} 
```

但这不会正确返回 COUNT。

请指导我如何解决问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:28:54.460

如果没有样本数据，很难做到正确，但试试这个片段

```
from p in db.t1s 
join r in db.t2s on p.Id equals r.gId 
where p.cId == 2 
group p by new {p.title, p.cId} into grouped
select new{ name = grouped.Key.title, num = grouped.Count()} 
```

另外，请注意这个 sql：

```
select t1.title, COUNT(*)as num 
from t1 INNER join t2 on t2.gId = t1.Id 
group by t1.title, t1.cId 
having t1.cId = 2 
```

将始终返回 1 作为 COUNT(*) 的结果。原因是您过滤了 t1.cId = 2 并按 t1.cId 作为第二个参数进行分组。

# windows-phone-7 - 将 Windows Phone 7.0 应用程序提交到 Marketplace

> ID：11968859
> 
> 赞同：0
> 
> 时间：2012-08-15T11:58:12.200
> 
> 标签：windows-phone-7

是否仍然可以向 Marketplace 提交 Windows Phone 7.0 应用程序？我知道 Marketplace 只能通过 7.5 电话访问。但我有一些旧的代码库，希望改变最小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:14:39.900

是的。你可以。您不必**使用**7.5 功能，但我建议您这样做。我知道，当我使用一个应用程序时，如果一个应用程序不使用 Mango 的快速应用程序切换功能，它会让我发疯，而且除了切换到较新的 SDK 之外不需要任何额外的代码，除非你是已经在使用墓碑（不，不是所有的应用程序都需要这个），在这种情况下，您需要在 app.xaml.cs 中添加一个简短的 if 语句到 application_activated 方法。

```
private void Application_Activated(object sender, ActivatedEventArgs e) 
   {     
      if (!e.IsApplicationInstancePreserved)     
      {
         RestoreStateFromTombstone();
      }
   } 
```

这是解释上述内容的链接：http: [//henry-chong.com/2011/08/wp7-upgrading-your-app-from-7-0-to-mango-fas-tombstoning/](http://henry-chong.com/2011/08/wp7-upgrading-your-app-from-7-0-to-mango-fas-tombstoning/)

使用 7.0 SDK 是让我删除应用程序的好方法，除非它是我真正需要的东西，而且没有其他东西，在这种情况下，我会寻找替代品。

# matlab - 缩进会影响 Matlab 代码吗？

> ID：11968860
> 
> 赞同：5
> 
> 时间：2012-08-15T11:58:20.307
> 
> 标签：matlab, syntax, indentation

这可能吗？它不应该，但有时它的行为与普通的编程感觉完全相反。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T12:21:25.233

不，Matlab 不受缩进的影响。

他们确实有会自动为您缩进代码的编辑器，但这只是为了便于阅读。[使用智能缩进](http://blogs.mathworks.com/community/2009/05/11/keep-your-code-readable-with-smart-indenting/)保持代码可读性不仅对您自己，而且对可能需要通读您的代码的其他人都是一个好主意。

注意：如果缩进不一致，可能会出现***警告***（取决于 IDE），但即使是零星的缩进也不会影响您的代码在 Matlab 中的执行方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T12:54:26.623

如果你没有正确缩进，它会给你警告。如果你做了一个 if 或 for 循环或类似的东西，并且结束块没有与它内联，你会得到一个可能的警告，说该语句可能与其结束块不对齐。CRTL+A CTRL+I 虽然很简单。

# codeigniter - codeigniter：在特定区域更改 .txt 文件

> ID：11968865
> 
> 赞同：0
> 
> 时间：2012-08-15T11:58:35.067
> 
> 标签：codeigniter, anchor

我正在做一个笔记本，登录，写笔记。所有信息都必须存储到文本文件中（我知道使用 DB 更简单，但存储到文件是项目要求）。

到目前为止，我已经完成了登录、创建新成员、添加新注释。我现在需要使这些注释可编辑。

当我在视图中显示所有笔记（然后用户登录）时，我向这些属于已登录用户的笔记添加了一个锚点，即“编辑”。

```
 foreach ($notes as $item)
    {
        if ($item['user'] == $name) // if post belongs to logged in user, I add "edit"
        {
             echo "<h3>", $item['user'], " " ,$item['date'], "</h3>";
             echo "<p>", $item['content'], " ", anchor('site/edit_note', 'Edit'), "</p>";                
        } 
        //if posts belongs to other users, notes are just posted
              else { 
                   echo "<h3>", $item['user'], " " ,$item['date'], "</h3>";
                   echo "<p>", $item['content'], "</p>";
               }   
    } 
```

我的文本文件结构：

```
some user : some user post : date 
```

我想我需要通过这些锚传递一些信息，以使它们独一无二，并知道在文件中的何处进行编辑，并使该帖子以文本区域的形式显示。我已阅读有关 URI 类和 URL 助手的信息，但不确定这是我需要的吗？

后来我想我会做一些文件信息数组，在数组中重写我需要的帖子，然后将数组存储在文件或其他东西中。我只是想知道这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:29:37.597

我认为您应该将文件结构更改为每行/帖子也有一个唯一的 ID：

```
unique id : some user : some user post : date 
```

然后，您可以像这样设置网址：

```
echo "<p>", $item['content'], " ", anchor('site/edit_note/'.$item['id'], 'Edit'), "</p>"; 
```

并且您的 edit_note 方法将需要接受 ID 参数

```
function edit_note($requested_id = null)
{
    if (!$requested_id) { return ""; }
    // get the requested id item from your file, that is below

    // The [`file()` function][1] will return the contents of a file as an array. 
    // Each array item will be a line of the file. So if each of your posts are a 
    // line, then you can just do:

    $rows = file('file/path/here');

    //Filter the $rows array to view just the ID needed
    $selected_row = array_filter($rows, function($row) use ($requested_id) {
        $row_items = explode(' : ', $row);
        return ($row_items[0] == $requested_id); 
    });

    $row_items = explode(' : ', $selected_row);

    // now you'll have the contents of the requested post in the $row_items array
    // and can call a view and pass it that data
    $data['row_items'] = $row_items;
    $this->load->view('edit_view', $data);
} 
```

# java - 如何使用 Flex 在 Java 中开发一对一聊天？

> ID：11968867
> 
> 赞同：1
> 
> 时间：2012-08-15T11:58:39.760
> 
> 标签：java, apache-flex

`MXML`在我正在写的 Flex 应用程序文件中。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
                width="598" height="459" creationComplete="consumer.subscribe()" layout="vertical">

    <mx:Script>
        <![CDATA[
        import mx.controls.Alert;
        import mx.messaging.messages.AsyncMessage;
        import mx.messaging.messages.IMessage;

        public function send():void {
        var message:IMessage = new AsyncMessage();
        message.destination = "SimpleChatDestination";
        message.body = "\n" + usernameInput.text + ":\t" + messageInput.text;

        trace(producer.connected);
        producer.send(message);

        messageInput.text = "";
        }

        public function messageHandler( message:IMessage ):void {
        textArea.text += message.body;
        }
        ]]>
    </mx:Script>

    <mx:Producer id="producer" destination="SimpleChatDestination"/>

    <mx:Consumer id="consumer" destination="SimpleChatDestination" message="messageHandler(event.message)"/>

    <mx:TextArea id="textArea" width="400" height="300" color="#F31C1C" editable="false"
                 enabled="false"/>

    <mx:HBox horizontalGap="0">
        <mx:TextInput id="usernameInput" width="80"/>
        <mx:TextInput id="messageInput" width="180"/>
        <mx:Button label="Send" click="send();"/>
    </mx:HBox>

</mx:Application> 
```

在 BlazeDs（java 端）message-config.xml 文件中，我编写了这样的代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<service id="message-service" 
    class="flex.messaging.services.MessageService">

    <adapters>
        <adapter-definition id="actionscript" class="flex.messaging.services.messaging.adapters.ActionScriptAdapter" default="true" />
        <!-- <adapter-definition id="jms" class="flex.messaging.services.messaging.adapters.JMSAdapter"/> -->
    </adapters>

    <default-channels>
        <channel ref="my-polling-amf"/>
    </default-channels>

        <adapters>
        <adapter-definition id="actionscript" default="true" />
        <!-- <adapter-definition id="jms"/> -->
    </adapters>

    <default-channels>
        <channel ref="my-polling-amf"/>
    </default-channels>

 <destination id="SimpleChatDestination">
  <properties>
   <network>
    <subscription-timeout-minutes>0</subscription-timeout-minutes>
   </network>
   <server>
    <message-time-to-live>0</message-time-to-live>
    <allow-subtopics>true</allow-subtopics>
    <subtopic-separator>.</subtopic-separator>
   </server>
  </properties>

 </destination>

</service> 
```

所以它工作正常。但问题是，当我们打开三个是四个聊天框时，所有的聊天框都会参与。

```
 i want only allow two user can only chat if 3rd user came not visiable 2nd person chating information.
just it is like Facebook,Gmail chating. 
```

请帮助我..

# c# - 为什么我们需要在 C# 中键入强制枚举

> ID：11968868
> 
> 赞同：11
> 
> 时间：2012-08-15T11:58:44.790
> 
> 标签：c#

我有一个像这样的枚举：

```
public enum Test:int
{
   A=1, 
   B=2
} 
```

所以在这里我知道我的枚举是一个 int 类型，但如果我想做如下的事情：

```
int a = Test.A; 
```

这不起作用。

如果我有这样的课程：

```
public class MyTest
{
    public static int A =1;
} 
```

我可以说 ，

```
int a = MyTest.A; 
```

在这里，我不需要`A`明确地转换为 int 。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T12:01:23.040

> 所以在这里我知道我的枚举是一个 int 类型

不，这不对。它有一个*基础*类型`int`，但它是一个单独的类型。哎呀，这是首先拥有枚举的一半 - 您可以将类型分开。

当你想在一个枚举值和它的数字等价物之间进行转换时，你可以强制转换——这并不痛苦，而且它可以让你的代码在类型安全方面更清晰。基本上，这是其中一件事情，因为它是*正确*的事情的稀有性使得它适合明确。

编辑：您应该注意的一个奇怪之处是存在*从*常量值 0 到枚举类型的隐式转换：

```
Test foo = 0; 
```

事实上，在 MS 实现中，它可以是*任何*类型的常数 0：

```
Test surprise = 0.0; 
```

这是一个错误，但修复为时已晚:)

我相信这个隐式转换的其余部分是为了更简单地检查标志枚举中是否设置了任何位，以及其他使用“0 值”的比较。就我个人而言，我不喜欢这个决定，但至少值得知道它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T12:01:14.267

[“基础类型指定为每个枚举器分配多少存储空间。但是，需要显式转换才能将枚举类型转换为整数类型”。](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T12:01:51.123

枚举值不是`int`类型。`int`是枚举的基本类型。枚举在技术上是整数，但在逻辑上（从 C# 语言的角度来看）不是。`int`( `System.Int32`) 默认情况下是所有枚举的基本类型，如果您没有明确指定另一个枚举。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-15T12:39:42.463

使用您更新的示例：

```
public class MyTest
{
    public static int A =1;
} 
```

和用法：

```
int a = MyTest.A; 
```

这*不是*枚举的样子。枚举看起来更像（注释是我们与真实枚举不同的地方）：

```
public struct MyTest /* Of course, this isn't correct, because we'll inherit from System.ValueType. An enum should inherit from System.Enum */
{
    private int _value; /* Should be marked to be treated specially */
    private MyTest(int value) /* Doesn't need to exist, since there's some CLR fiddling */
    {
       _value = value;
    }

    public static explicit operator int(MyTest value) /* CLR provides conversions automatically */
    {
       return value._value;
    }
    public static explicit operator MyTest(int value) /* CLR provides conversions automatically */
    {
       return new MyTest(value);
    }

    public static readonly MyTest A = new MyTest(1); /* Should be const, not readonly, but we can't do a const of a custom type in C#. Also, is magically implicitly converted without calling a constructor */

    public static readonly MyTest B = new MyTest(2); /* Ditto */
} 
```

是的，您可以*轻松*获得“基础” int 值，但 和 的值`A`仍然`B`被强类型化为 type `MyTest`。这样可以确保您不会在不合适的地方*意外*使用它们。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-15T12:02:24.087

你的枚举是类型`Test`。这`int`不仅仅是因为您的枚举具有整数值。

您可以转换您的枚举以获取 int 值：

```
int a = (int) Test.A; 
```

# rally - 如何保存应用程序实例的特定状态

> ID：11968871
> 
> 赞同：0
> 
> 时间：2012-08-15T11:59:12.560
> 
> 标签：rally

我想保存用户对 Rally 工件的选择，以便在重新加载页面时显示有关该工件的详细信息。smae 仪表板上可能有多个应用程序实例；什么是唯一标识特定实例的最佳方法。我打算使用首选项 api 来保存状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:22:25.710

如果我们谈论的是 SDK 2.0p3：应用程序的每个副本都有一个唯一的 ID，您可以使用“getAppID()”来查找。但是，如果您使用 updateSettingsValues，它将自动按 AppID 唯一保存。可悲的是，updateSettingsValues 仅是特定于应用程序的，而不是特定于用户或项目的。

# xslt - 在 xslt 1.0 中，如果值在字符串值中包含数字

> ID：11968872
> 
> 赞同：1
> 
> 时间：2012-08-15T11:59:16.723
> 
> 标签：xslt, xslt-1.0

我有一个复杂的地址字符串，或者说是不同的可能格式，我需要将其拆分为道路名称、门牌号、楼层、位置（左、右、中门）或门/房间号

除了最后一点，我已经设法用伪“包含”完成了所有工作：

```
<xsl:choose>
                <xsl:when test="contains(@addressFarLeft, ANY_NUMERIC_VALUE_ANYWHERE)">
                  <door>NUMERICVALUE</door>
                </xsl:when>
                <xsl:otherwise></xsl:otherwise>
              </xsl:choose> 
```

我很确定我不能只使用某种形式的包含，但是然后呢？

值是动态设置的，但这里有一些可能的值：

```
<xsl:variable name="addressFarLeftValue">.th.</xsl:variable> =>
no numeric value, do nothing

<xsl:variable name="addressFarLeftValue">.1.</xsl:variable> =>
   produce:  <door>1</door>

<xsl:variable name="addressFarLeftValue">, . tv </xsl:variable> =>
no numeric value, do nothing

<xsl:variable name="addressFarLeftValue">,th, 4.</xsl:variable> =>
   produce:   <door>1</door> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:11:37.023

如果要测试字符串是否包含数值，一种方法是使用“翻译”函数从字符串中删除所有数字，如果结果字符串与初始字符串不匹配，则必须已包含一个数字。如果字符串没有改变，那么它没有改变。

```
<xsl:choose>
  <xsl:when test="translate($addressFarLeft, '1234567890', '') != $addressFarLeft">
    <door>1</door>
  </xsl:when>
  <xsl:otherwise/> 
```

所以，`<xsl:variable name="addressFarLeftValue">.1.</xsl:variable>`输出`<door>1</door>`，但`<xsl:variable name="addressFarLeftValue">.th.</xsl:variable>`不输出任何东西。

*如果*您想提取实际数字，然后假设字符串中只出现一次数字，您可以这样做......

```
<xsl:value-of 
   select="translate(
      @addressFarLeft, 
      translate(@addressFarLeft, '1234567890', ''), 
      '')" /> 
```

所以，`<xsl:variable name="addressFarLeftValue">,th, 42.</xsl:variable>`输出**42**

如果您有多个数字，例如`,th, 42, ab, 1`这种方法会失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T12:28:41.867

**可以使用“*双重翻译*”方法获得所需的数值，该方法首先由 Michael Kay 展示**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="addressFarLeftValue1" select="',th, 4.'"/> 
 <xsl:variable name="addressFarLeftValue2" select="', . tv'"/>  

 <xsl:variable name="vDoorNumber1" select=
  "translate($addressFarLeftValue1,
             translate($addressFarLeftValue1, '0123456789', ''),
             '')"/>
 <xsl:variable name="vDoorNumber2" select=
  "translate($addressFarLeftValue2,
             translate($addressFarLeftValue2, '0123456789', ''),
             '')"/>

 <xsl:template match="/">
     "<xsl:value-of select="$vDoorNumber2"/>"
==========
   "<xsl:value-of select="$vDoorNumber1"/>"
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
 ""
==========
   "4" 
```

# php - 简单的单个 ruby 文件 Web 应用程序

> ID：11968873
> 
> 赞同：0
> 
> 时间：2012-08-15T11:59:18.160
> 
> 标签：php, javascript, ruby, webserver

好吧，这似乎是一个真正的菜鸟问题。

我目前在我的 MAMP 服务器上运行了一个简单的 html 和 javascript 新闻阅读器。你可以在[Github](https://github.com/laverboy/message-mobile)上看到它。一切都在客户端运行，除了获取和缓存由一个非常小的 php 文件完成的提要。我有一个 ajax 调用，它通过向 php 脚本传递一些参数来请求新闻提要。

我最近一直在学习 Ruby，并开始在 Ruby 中重做这个简单的 php 脚本。我遇到的问题是，我不能像使用 php 那样通过 ajax 请求带有参数的 ruby​​ 脚本。

那么，要做到这一点，最简单的步骤是什么？

我觉得一个成熟的框架，即使像 Sinatra 一样小，也会是矫枉过正。所以任何帮助将不胜感激。我是否完全以错误的方式思考这个问题？谢谢。

**更新**

我最终采用了 Ruby CGI 方式。这就是我所做的。

在我有我的脚本的文件夹中，我添加了一个 .htaccess 文件，其中包含以下内容以使 apache 执行 .rb 文件。

```
AddHandler cgi-script .rb
Options +ExecCGI 
```

然后我像这样开始我的红宝石文件。

```
#!/usr/bin/ruby
require 'cgi'

cgi = CGI.new('html4')

cgi.out {
    cgi.html {
        "Hello World" #started content here   
    }

} 
```

然后我确保该文件是可执行的。`chmod 774`.

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:18:52.823

这里最简单的解决方案是[Ruby CGI](http://ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:04:58.900

如果您认为 sinatra 对您来说仍然很重要，请更深入并尝试编写纯 Rack 应用程序。

例如查看这个最小的应用程序 - [https://github.com/stevenwilkin/ip.stevenwilkin.com](https://github.com/stevenwilkin/ip.stevenwilkin.com)

机架只需要像这样的 3 个元素数组

```
[200           , {"Content-Type" => "text/plain"}, [env["REMOTE_ADDR"]]]
[return status , headers hash                    , body string         ] 
```

Rails、Sinatra 和许多其他 ruby​​ web 框架都在内部使用 Rack。

如果您需要格式良好的请求参数，您可以使用[http://rack.rubyforge.org/doc/classes/Rack/Request.html](http://rack.rubyforge.org/doc/classes/Rack/Request.html)例如。

# hash - 这是一个合理的密码使用方案吗？

> ID：11968875
> 
> 赞同：0
> 
> 时间：2012-08-15T11:59:21.843
> 
> 标签：hash, passwords

这是一个简单的想法，基于一些阅读。

服务器存储（明文+盐）的散列版本。只要散列难以反转，就可以避免看到密码。

当客户端尝试登录时，服务器发送它（盐，随机），即一个恒定盐和一个新生成的随机字符串。

客户端发回哈希（哈希（明文+盐）+随机），即客户端附加盐，散列，然后附加随机，然后再次散列。

服务器检查哈希值是否与它自己的 H(H(pwd+salt)+rnd) 相同。

我对此没有太多经验，所以我能问一下潜在的问题是什么吗？另外，人们通常用盐做什么？你真的可以不用同样的盐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:23:12.003

您建议的方案不会为检查密码增加任何安全性，只会增加使用 SSL 登录所没有的复杂性。使用 SSL，您可以安全地将明文密码从浏览器传输到服务器，用盐对其进行哈希处理，然后检查存储的哈希值。这消除了对复杂方案的需要。目前，只有民族国家才能真正可行地以系统方式破坏 SSL 连接，尽管一些真正有进取心的黑客发现了一些有趣的漏洞。

您描述的方案听起来很像 Diffie-Helman 零知识密钥交换，它比 ssl 安全得多，因为它在最初与服务器设置后从未真正传输密码。今天这种密钥交换的问题在于，它必须在客户端用 Javascript 编写，因此，它会将实际的工作原理暴露给每个愿意查看的攻击者。然后，攻击者可以用其他东西替换您的 Javascript，或者如果您不使用 SSL，则只需利用它来收集初始密码，因此您再次只需要一个从客户端到服务器的 SSL 连接的安全性一堆增加的复杂性和故障点。有一些方法可以使用 ActiveX、Java 或其他项目来创建浏览器插件来处理所有密钥交换的东西，但这又是，

Firefox 一直致力于在浏览器级别实现密码的 Diffie-Helman 密钥交换，如果它成功的话，将允许大量增加安全性并使这种密码方案可行。

# java - 使用 JSch，有没有办法在不执行 ls 的情况下判断远程文件是否存在？

> ID：11968878
> 
> 赞同：18
> 
> 时间：2012-08-15T11:59:41.467
> 
> 标签：java, jsch

使用 JSch，有没有一种方法可以判断远程文件是否存在，而无需执行`ls`并遍历文件以查找名称匹配？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-03-23T19:00:32.743

你也可以这样做：

```
try {
    channelSftp.lstat(name);
} catch (SftpException e){
    if(e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE){
    // file doesn't exist
    } else {
    // something else went wrong
        throw e;
    }
} 
```

如果你对不存在的东西执行 lstat，你会得到一个 id 为 2 的 SftpExecption，否则你会得到关于文件的信息。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-21T12:36:43.857

这就是我在[JSch](http://www.jcraft.com/jsch/)中检查目录存在的方式。

**注意：**与这个问题无关，但有些人可能会觉得它很有用。

如果目录不存在则创建目录

```
ChannelSftp channelSftp = (ChannelSftp)channel;
String currentDirectory=channelSftp.pwd();
String dir="abc";
SftpATTRS attrs=null;
try {
    attrs = channelSftp.stat(currentDirectory+"/"+dir);
} catch (Exception e) {
    System.out.println(currentDirectory+"/"+dir+" not found");
}

if (attrs != null) {
    System.out.println("Directory exists IsDir="+attrs.isDir());
} else {
    System.out.println("Creating dir "+dir);
    channelSftp.mkdir(dir);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-05T13:10:39.413

实际上在我的项目中`ls`没有循环。我只是通过`ls`文件名传递给调用路径。

```
private static boolean exists(ChannelSftp channelSftp, String path) {
    Vector res = null;
    try {
        res = channelSftp.ls(path);
    } catch (SftpException e) {
        if (e.id == SSH_FX_NO_SUCH_FILE) {
            return false;
        }
        log.error("Unexpected exception during ls files on sftp: [{}:{}]", e.id, e.getMessage());
    }
    return res != null && !res.isEmpty();
} 
```

例如，有一个`file.txt`带有 url的文件`sftp://user@www.server.comm/path/to/some/random/folder/file.txt`。我传递给`exists` `path`作为`/path/to/some/random/folder/file.txt`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-15T12:08:06.943

*（如果您使用的是库的 SFTP 部分，这是我没有考虑的假设。）*

我认为它`ls(String path)`会接受文件名；我暂时无法检查。

如果没有，则不需要手动迭代；您可以使用选择器变体：

```
ls(String path, ChannelSftp.LsEntrySelector selector) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-21T16:39:33.690

```
import java.util.ArrayList;
import com.jcraft.jsch.Channel;
import com.jcraft.jsch.ChannelExec;
import com.jcraft.jsch.ChannelSftp;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.Session;

public class FileExists {

ChannelExec channelExec = null;
static Channel channel = null;

static String host = "hostname";
static String user = "username";
static String password = "password$";

public static void main(String[] args) {
    String filename = "abc.txt";
    String filepath = "/home/toolinst/ggourav";
    try {
        Channel channel = getChannelSftp(host, user, password);
        channel.connect();
        ChannelSftp channelSftp = (ChannelSftp) channel;
        channelSftp.cd(filepath);
        String path = channelSftp.ls(filename).toString();
        if (!path.contains(filename)) {
            System.out.println("File doesn't exist.");
        } else
            System.out.println("File already exist.");

    } catch (Exception e) {
        e.printStackTrace();
    }

}

private static Channel getChannelSftp(String host, String user, String password) {
    try {
        JSch jsch = new JSch();
        Session session = jsch.getSession(user, host, 22);
        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking", "no");
        config.put("PreferredAuthentications", "publickey,keyboard-interactive,password");
        session.setConfig(config);
        session.setPassword(password);
        session.connect();
        channel = session.openChannel("sftp");

    } catch (Exception e) {
        System.out.println("Failed to get sftp channel. " + e);
    }
    return channel;
} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T12:05:22.517

你可以检查

```
 if [ -e FILE_NAME ] ; then
    //do something
 fi 
```

或者

```
 if [ -d DIRNAME ] 
```

对于目录

或者

```
 if [ -l SYMLINK ] 
```

对于软链接

我希望这有帮助

* * *

这是在远程机器上运行命令的示例[http://www.jcraft.com/jsch/examples/Exec.java.html](http://www.jcraft.com/jsch/examples/Exec.java.html)

您可以很好地运行`ls`或传递整个脚本。这与将脚本复制到远程计算机然后执行它相同。

# mysql - 自动增量复合键 InnoDB

> ID：11968879
> 
> 赞同：5
> 
> 时间：2012-08-15T11:59:48.497
> 
> 标签：mysql, innodb

我想为 InnoDB MySQL 表创建类似 MyISAM 的行为。我想要一个复合主键：

主键（id1，id2）

其中 id1 根据 id2 的值自动递增。使用 InnoDB 完成此任务的最佳方法是什么？

```
+----------+-------------+--------------+
|      id1 |         id2 | other_column |
+----------+-------------+--------------+
|        1 |           1 | Foo          |
|        1 |           2 | Bar          |
|        1 |           3 | Bam          |
|        2 |           1 | Baz          |
|        2 |           2 | Zam          |
|        3 |           1 | Zoo          |
+----------+-------------+--------------+ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T06:26:45.770

您可以使用此 BEFORE INSERT 触发器来替换零 id 值 -

```
CREATE TRIGGER trigger1
  BEFORE INSERT
  ON table1
  FOR EACH ROW
BEGIN

  SET @id1 = NULL;

  IF NEW.id1 = 0 THEN
    SELECT COALESCE(MAX(id1) + 1, 1) INTO @id1 FROM table1;
    SET NEW.id1 = @id1;
  END IF;

  IF NEW.id2 = 0 THEN

    IF @id1 IS NOT NULL THEN
      SET NEW.id2 = 1;
    ELSE
      SELECT COALESCE(MAX(id2) + 1, 1) INTO @id2 FROM table1 WHERE id1 = NEW.id1;
      SET NEW.id2 = @id2;
    END IF;

  END IF;

END 
```

然后插入零值（id1 或 id2）以生成新值 -

```
INSERT INTO table7 VALUES(0, 0, '1');
INSERT INTO table7 VALUES(0, 0, '2');
INSERT INTO table7 VALUES(1, 0, '3');
INSERT INTO table7 VALUES(1, 0, '4');
INSERT INTO table7 VALUES(1, 0, '5');
... 
```

# windows-services - 使用一个 Windows 服务执行作业，使用两个 Web 应用程序安排作业

> ID：11968884
> 
> 赞同：1
> 
> 时间：2012-08-15T12:00:10.587
> 
> 标签：windows-services, quartz.net

我有一个 SQL Server 数据库作为作业存储，两个都可以安排作业的 Web 应用程序，以及一个用于执行作业的 Quartz.NET Windows 服务。

我希望这两个 Web 应用程序只安排作业，而 Windows 服务只执行作业。

**问题来了：**

如果我在两个 Web 应用程序和 windows 服务中创建 IScheduler 实例，它们将同时执行作业，可能会发生冲突。

如果我不在两个 Web 应用程序中创建 IScheduler 实例，如何将作业从 Web 应用程序调度到 Windows 服务？

有没有办法让 IScheduler 只安排作业而不执行作业？（我可以将 IJob 程序集部署到所有这三个应用程序）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T14:13:10.237

您可能不想在网站中实例化 IScheduler 实例，正是因为创建本地实例也会执行作业。

我已经实现了类似于你想要做的事情。

首先，确保在您的服务配置文件 (app.config) 中配置了四个键`quartz.scheduler.exporter.type`、`quartz.scheduler.exporter.port`、`quartz.scheduler.exporter.bindName`和`quartz.scheduler.exporter.channelType`.

其次，确保您的 web.config 配置了以下四个键：`quartz.scheduler.instanceName`、`quartz.scheduler.instanceId`、`quartz.scheduler.proxy`和`quartz.scheduler.proxy.address`。

然后，当您创建`StdSchedulerFactory()`并使用它来获取调度程序时，您不会实例化新的调度程序，而是附加到现有的调度程序。然后，您可以通过远程调度程序执行任何可以使用本地调度程序执行的操作，但只有一个实例可以执行作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:41:34.417

在您的配置文件中，将键“quartz.threadPool.type”设置为“Quartz.Simpl.ZeroSizeThreadPool, Quartz”。这样创建的石英调度程序可以调度/修改作业/触发器/日历，但不能运行作业。

# vb.net - VB.NET 事件处理程序名称前缀

> ID：11968886
> 
> 赞同：1
> 
> 时间：2012-08-15T12:00:20.267
> 
> 标签：vb.net

在 ASP.NET 中 - 当在 Visual Studio 中选择 Load 事件时 - 设计器生成 Page_Load 作为事件处理程序的子名称。如何使用自定义事件做类似的事情？

当我在 Visual Studio 中选择自定义事件时，Sub 名称的前缀是类的名称。因此，如果我的自定义事件被命名为“Delete”并且类名为 ManageRoom，它将生成 Sub ManageRoom_Delete() Handles ...

有没有办法设置它，使它使用的前缀不是类名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:06:43.240

看看这个 Visual Studio 扩展[EventHandlerNaming](https://github.com/einaregilsson/EventHandlerNaming)

从[主页](http://einaregilsson.com/better-eventhandler-names-in-visual-studio-2010/)：

> 我制作了一个 Visual Studio 扩展 EventHandler Naming，它允许您自定义生成的事件处理程序名称并使用委托推理。

![在此处输入图像描述](../Images/b9c4d9c7222e84b8e6af8c8414514f05.png)

我不知道它是否适用于 Visual Basic，但它是我知道的唯一一个。

# regex - Perl 正则表达式替换一个模式，不包括另一个模式

> ID：11968895
> 
> 赞同：1
> 
> 时间：2012-08-15T12:00:54.993
> 
> 标签：regex, perl

我有一个字符串如下。

```
$line = 'this is my string "hello world"'; 
```

我想要一个正则表达式来删除字符串中除“Hello world”区域之外的所有空格字符。

我在下面使用删除空格字符，但它会删除所有字符。

```
$line=~s/ +//g; 
```

如何排除“Hello world”之间的区域，我得到如下字符串？

```
thisismystring"hello world" 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:17:55.390

由于您可能希望正确处理带引号的字符串，因此您应该查看[Text::Balanced](http://metacpan.org/module/Text%3a%3aBalanced)模块。

使用它将您的文本拆分为引用部分和未引用部分，然后仅对未引用部分进行替换，最后再次将字符串连接在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:20:10.477

好吧，这是一种方法：

```
use warnings;
use strict;

my $l = 'this is my string "hello world some" one two three "some hello word"';
$l =~ s/ +(?=[^"]*(?:"[^"]*"[^"]*)+$)//g;

print $l;
# thisismystring"hello world some"onetwothree"some hello word" 
```

[演示](http://codepad.org/g1jwi5fk)。

但我真的想知道不应该以其他方式完成（例如，通过标记字符串），特别是如果引号可能不平衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:16:29.397

```
s/\s+(?=(?:[^"]*"[^"]*")*[^"]*$)//g 
```

[在这里](http://ideone.com/gqaHv)测试代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:22:58.343

[另一个正则表达式](http://regexr.com?31rdq)：

```
s/(\s+(".*?")?)/$2/g 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T12:23:00.287

```
#!/usr/bin/perl
use warnings;
use strict;

sub main {
  my $line = 'this is my string "hello world"';
  while ($line =~ /(\w*|(?:"[^"]*"))\s*/g) { print $1;}
  print "\n";
}

main; 
```

# javascript - 如何向嵌入 SWFObject 2.2 的播放器发送搜索事件？

> ID：11968896
> 
> 赞同：0
> 
> 时间：2012-08-15T12:00:56.647
> 
> 标签：javascript, flash, swfobject

我已将我的 SWFObject 从 1.5 更新到 2.2，现在需要复制一些过去在 1.5 中工作的旧功能，即事件跳转到视频中的某个点。

这是我的脚本标签的内容：

```
var flashvars = {
    file: '79834.flv',
    autostart: 'true',
    displayclick: 'mute',
    repeat: 'single',
    start: 0
};
var params = {
    allowfullscreen: "true",
    allownetworking: "all",
    allowscriptaccess: "always"
};
swfobject.embedSWF("player.swf","main","500","400","9.0.0", "false", flashvars, params);

var player;
function playerReady(obj) {
    player = document.getElementById(obj.id);
    alert(player);
    setTimeout("seek()", 1000);
}
function seek() {
    player.sendEvent("SEEK", 100);
} 
```

上半部分是我替换旧 V1.5 代码的内容。

下半部分（来自“var player”）不再有效。playerReady 仍在发生，但显然 obj.id 现在是“null”。是否有新的正确方法可以找到播放器元素？还是另一种实现搜索事件的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:18:31.050

你错过了这个`id`属性：

```
var attributes = {
    id: "playerID"
}
// and later
swfobject.embedSWF("player.swf","main","500","400","9.0.0", "false", flashvars, params, attributes); 
```

# c++ - MapViewOfFile 和 VirtualLock

> ID：11968898
> 
> 赞同：2
> 
> 时间：2012-08-15T12:01:06.397
> 
> 标签：c++, visual-studio, winapi, windows-7, file-mapping

下面的代码是否会将数据从文件加载到系统内存中，以便对结果指针的访问永远不会阻塞线程？

```
auto ptr = VirtualLock(MapViewOfFile(file_map, FILE_MAP_READ, high, low, size), size); // Map file to memory and wait for DMA transfer to finish.
int val0 = reinterpret_cast<int*>(ptr)[0]; // Will not block thread?
int val1 = reinterpret_cast<int*>(ptr)[size-4]; // Will not block thread?

VirtualUnlock(ptr);
UnmapViewOfFile(ptr); 
```

编辑：

达蒙斯回答后更新。

```
auto ptr = MapViewOfFile(file_map, FILE_MAP_READ, high, low, size);

#pragma optimize("", off)
char dummy;
for(int n = 0; n < size; n += 4096)
    dummy = reinterpret_cast<char*>(ptr)[n];
#pragma optimize("", on)

int val0 = reinterpret_cast<int*>(ptr)[0]; // Will not block thread?
int val1 = reinterpret_cast<int*>(ptr)[size-4]; // Will not block thread?

UnmapViewOfFile(ptr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:10:54.463

如果文件的大小小于最小的最大工作集大小（或者，如果您相应地修改了工作集大小），那么*理论上*是的。如果您超过了您的最大工作集大小，`VirtualLock`则将什么也不做（即失败）。

（在实践中，我已经看到`VirtualLock`相当......自由......在解释它应该做的事情而不是它实际做的事情，至少在 Windows XP 下 - 在更现代的版本下可能会有所不同）

我过去一直在尝试类似的事情，现在我只是通过一个简单的`for`循环（读取一个字节）来触摸我想要在 RAM 中的所有页面。这没有留下任何问题并且有效，唯一可能的例外是页面在理论上*可能会*在触摸后再次被换出。在实践中，这永远不会发生（除非机器的 RAM 真的很低，然后发生就可以了）。

# php - 如果为空，则从 URL 中删除文本框名称

> ID：11968903
> 
> 赞同：0
> 
> 时间：2012-08-15T12:01:31.357
> 
> 标签：php, url, textbox

我正在使用 PHP 网站。我有 2 个文本框，两个值都通过 GET 到下一页，所以看起来像

[http://mywebsite.com/?word=&word2=你好](http://mywebsite.com/?word=&word2=hello)

我想要如果 word 为空，不在 URL 中显示

喜欢

[http://mywebsite.com/?word2=你好](http://mywebsite.com/?word2=hello)

请帮忙。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:02:35.743

如果表单元素被认为是空的，您将必须在提交表单之前使用一些 javascript 来删除它们 - 然后提交表单。

您可以编写一个由虚假提交按钮触发的函数。这将验证元素，根据需要进行更改 - 然后提交表单作为最终操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T16:59:56.693

您可以使用 Javascript`window.location`函数。将文本框的值存储到变量中

# json - 如何在 Twitter4j 中获取带有完整 JSON 的推文

> ID：11968905
> 
> 赞同：10
> 
> 时间：2012-08-15T12:01:41.437
> 
> 标签：json, twitter4j

我需要检索推文列表，其中包含许多信息（可以从一些 Tweet.getX() 方法轻松检索），但推文的整个 JSON 除外。

我不知道如何从 QueryResult 中获取属于推文的 JSON。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T00:00:55.563

您可以通过设置传递给构造函数`setJSONStoreEnabled(true);`的对象来获取推文的 JSON 。`ConfigurationBuilder``TwitterFactory`

这是一个完整的例子：

```
public static void main(String[] args) throws TwitterException {
    ConfigurationBuilder cb = new ConfigurationBuilder();
    cb.setJSONStoreEnabled(true);

    Twitter twitter = new TwitterFactory(cb.build()).getInstance();
    Query query = new Query("lizardbill");
    QueryResult result = twitter.search(query);
    for (Tweet tweet : result.getTweets()) {
        System.out.println(tweet.getFromUser() + ":" + tweet.getText());
        String json = DataObjectFactory.getRawJSON(tweet);
        System.out.println(json);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-18T21:35:36.660

我认为比尔回答了这个问题，但那些仍然想知道使用的人`TwitterObjectFactory`，我相信它是这样完成的：

```
ResponseList<Status> userTimeline = // init twitter instance

userTimeline.forEach(x -> {
        String json = TwitterObjectFactory.getRawJSON(x);
        System.out.println(json);
    }); 
```

# html - `abbr` 元素的语义使用

> ID：11968909
> 
> 赞同：4
> 
> 时间：2012-08-15T12:01:53.600
> 
> 标签：html, semantic-markup, abbr

在以下情况下，`<abbr>`标签在语义上肯定是合适的：

`<p>The Olympic games coverage by the <abbr title="British Broadcasting Corporation">BBC</abbr> was highly praised.</p>`

但是，在某些情况下，由于空间限制（而不是使用首字母缩写），我需要**用省略号截断内容**`title`，并使用该属性来描述完整内容。

例如，假设“*英国广播公司*”变为“*英国广播公司...* ”。该`<abbr>`元素仍然是**语义上最正确**的吗？

`<abbr title="British Broadcasting Corporation">British Broadcas...</abbr>`

**笔记**

我知道[CSS`text-overflow`属性](http://www.quirksmode.org/css/textoverflow.html)，但仅适用于单行文本的 AFAIK，而我需要文本在适当的地方自然换行。我也不是在寻找 jQuery/Javascript 解决方案，因为截断发生在后端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:19:19.633

`<abbr>`用于缩写文本，因此我认为将其用于截断文本是可以接受的，因为这是一个缩写词。过去，首字母缩略词曾经有自己的标签`<acronym>`，但已被弃用，取而代之的是使用`<abbr>`.

# entity-framework - EF Code First DropCreateDatabaseIfModelChanges 的最低数据库权限

> ID：11968912
> 
> 赞同：4
> 
> 时间：2012-08-15T12:01:57.863
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.3

我们正在使用 EF4.3 和 Code First。

我们的 DBA 热衷于减少开发人员对开发数据库的权限。但是我们遇到过很多情况，当我们调用时数据库被删除后我们无法创建数据库`DropCreateDatabaseIfModelChanges`

用户能够同时调用`DropCreateDatabaseIfModelChanges`和所需的最低数据库权限是`DropCreateDatabaseAlways`多少？

这些是否需要不同的权限？

是否有任何我可以参考我们的 DBA 的文档来帮助解释需要什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:16:03.407

两个初始化器都需要删除和创建数据库的权限。这些操作需要非常不同的权限：

*   数据库可以由其所有者删除 - 此权限本地化到数据库（`db_owner`在 SQL Server 中）。
*   数据库只能由具有创建数据库的全局服务器权限的用户创建 - 这通常是只提供给高权限用户（`dbcreator`SQL Server 中的角色）的权限

您还需要对 Master 数据库进行读取访问。

顺便提一句。如果这与开发环境有关，您应该使用您自己的本地数据库服务器。

# d - 要求解释惯用的 D2 构造

> ID：11968916
> 
> 赞同：1
> 
> 时间：2012-08-15T12:02:16.723
> 
> 标签：d, dmd

我经常遇到以下我在 D2 源代码中不太掌握的结构：

```
alias uint SymbolRef;

struct SymbolTable {
  alias entries this;
  SymbolRef startSymbol;
  Symbol[] entries;
} 
```

`alias entries this;`鉴于已经存在，类型定义的内部意味着什么`Symbol[] entries;`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:47:59.210

[官方文档](http://dlang.org/class.html#AliasThis)

简而言之：**别名这个**构造是D的多重实现继承方式。在您的示例中，结构 SymbolTable 的行为应该与 Symbol[] 类似，只是增加了一些额外的东西。它可以隐式转换为 Symbol[]。

但是，我经常听说在当前编译器实现中，更复杂的**别名**使用被认为是错误的，所以最好在这里小心并准备好错误报告；）

*《 The D Programming Language* 》的相关章节是《*6.13 Multiple Subtyping*》

# asp.net - 由于访问权限，无法在 Windows Server 2008 上创建用户

> ID：11968917
> 
> 赞同：0
> 
> 时间：2012-08-15T12:02:22.783
> 
> 标签：asp.net, .net, c#-4.0, user-accounts, windows-users

尝试在远程计算机上创建用户时出现以下错误。

System.UnauthorizedAccessException：在 System.DirectoryServices.AccountManagement.PrincipalContext.DoMachineInit() 在 System.DirectoryServices.DirectoryEntry.RefreshCache() 的 System.DirectoryServices.Interop.UnsafeNativeMethods.IAds.GetInfo() 的一般访问被拒绝错误 System.DirectoryServices.AccountManagement .PrincipalContext.Initialize() 在 System.DirectoryServices.AccountManagement.PrincipalContext.ContextForType(Type t) 在 System.DirectoryServices.AccountManagement.Principal.GetStoreCtxToUse() 在 System.DirectoryServices.AccountManagement.Principal.set_DisplayName(String value) 在 testemail.CreateLocalWindowsAccount （字符串用户名、字符串密码、字符串 displayName、字符串描述、布尔 canChangePwd、布尔 pwdExpires）

这是代码。

```
public void CreateLocalWindowsAccount(string username, string password, string displayName, string description, bool canChangePwd, bool pwdExpires)
    {
        try
        {
            PrincipalContext context = new PrincipalContext(ContextType.Machine, "127.0.0.1");
            UserPrincipal user = new UserPrincipal(context);
            user.SetPassword(password);
            user.DisplayName = displayName;
            user.Name = username;
            user.Description = description;
            user.UserCannotChangePassword = canChangePwd;
            user.PasswordNeverExpires = pwdExpires;
            user.Save();

            //now add user to "Users" group so it displays in Control Panel
            GroupPrincipal group = GroupPrincipal.FindByIdentity(context, "Remote Desktop Users");
            group.Members.Add(user);
            group.Save();
        }
        catch (Exception ex)
        {
            Response.Write(ex.ToString());
        }
    } 
```

# apache-flex - 是否可以将 Kleene 运算符用于 Flex 格式化程序？

> ID：11968919
> 
> 赞同：1
> 
> 时间：2012-08-15T12:02:24.507
> 
> 标签：apache-flex, flex4

格式化程序是否可以使用 Kleene 运算符（Kleene Star）？
我想使用phoneFormatter，它在第5个数字之后加上一个减号，之后应该可以有可变数量的数字。
例如：0172-555666999、0160-44552 等。

这就是我开始的方式，但我不知道最后一个哈希之后属于哪个字符（它不是星号，我已经尝试过 ;-)）：

```
<fx:Declarations>
        <mx:PhoneFormatter id="mPhoneFormat"
                           formatString="####-#"/>

    </fx:Declarations> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:19:47.803

默认`PhoneFormatter`期望输入字符串具有与格式字符串相同的字符数。它们不支持正则表达式模式（如 * 以匹配元素零次或多次）。

但是，制作自己的格式化程序非常容易。为此，我扩展了`PhoneFormatter`类并覆盖了它的`format()`方法。我复制并粘贴了原始`format()`方法并进行了以下修改：

*   注释掉比较源字符串长度和格式字符串长度的代码
*   比较格式化字符串的长度。如果原始字符串较长，则将原始字符串中的剩余字符附加到格式化字符串。

这可能无法处理您的所有用例，但根据您的需要进行修改应该非常简单。

```
package
{
    import mx.formatters.PhoneFormatter;
    import mx.formatters.SwitchSymbolFormatter;

    public class CustomPhoneNumberFormatter extends PhoneFormatter
    {
        public function CustomPhoneNumberFormatter()
        {
            super();
        }

        override public function format(value:Object):String
        {
            // Reset any previous errors.
            if (error)
                error = null;

            // --value--

            if (!value || String(value).length == 0 || isNaN(Number(value)))
            {
                error = defaultInvalidValueError;
                return "";
            }

            // --length--

            var fStrLen:int = 0;
            var letter:String;
            var n:int;
            var i:int;

            n = formatString.length;
            for (i = 0; i < n; i++)
            {
                letter = formatString.charAt(i);
                if (letter == "#")
                {
                    fStrLen++;
                }
                else if (validPatternChars.indexOf(letter) == -1)
                {
                    error = defaultInvalidFormatError;
                    return "";
                }
            }

//          if (String(value).length != fStrLen)
//          {
//              error = defaultInvalidValueError;
//              return "";
//          }

            // --format--

            var fStr:String = formatString;

            if (fStrLen == 7 && areaCode != -1)
            {
                var aCodeLen:int = 0;
                n = areaCodeFormat.length;
                for (i = 0; i < n; i++)
                {
                    if (areaCodeFormat.charAt(i) == "#")
                        aCodeLen++;
                }
                if (aCodeLen == 3 && String(areaCode).length == 3)
                {
                    fStr = String(areaCodeFormat).concat(fStr);
                    value = String(areaCode).concat(value);
                }
            }

            var dataFormatter:SwitchSymbolFormatter = new SwitchSymbolFormatter();
            var source:String = String(value);
            var returnValue:String = dataFormatter.formatValue(fStr, value);
            if (source.length > returnValue.length)
            {
                returnValue = returnValue + source.substr(returnValue.length-1);
            }
            return returnValue;
        }
    }
} 
```

# python - urllib2 没有检索带有哈希的 url

> ID：11968922
> 
> 赞同：2
> 
> 时间：2012-08-15T12:02:46.810
> 
> 标签：python

我试图从网页中获取一些数据，但我发现了一个问题。每当我想转到下一页（即第 2 页）以继续检索其中的数据时，我一直从第 1 页接收数据。显然在尝试切换到下一页时出现了问题。

问题是，我没有遇到这样的网址问题：

```
'http://www.webpage.com/index.php?page=' + str(pageno) 
```

我可以开始一个 while 语句，然后通过将 1 添加到“pageno”来跳转到第 2 页

当我尝试使用这种格式打开一个 url 时，我的问题就出现了：

```
'http://www.webpage.com/search/?show_all=1#sort_order=ASC&page=' + str(pageno) 
```

作为

```
urllib2.urlopen('http://www.webpage.com/search/?show_all=1#sort_order=ASC&page=4').read() 
```

将从[http://www.webpage.com/search/?show_all=1检索源代码](http://www.webpage.com/search/?show_all=1)

就我而言，没有其他方法可以在不使用哈希的情况下检索其他页面。

我想这只是 urllib2 忽略了哈希，因为它通常用于指定浏览器的起点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:07:52.203

哈希 (#) 符号后面的 URL 片段用于客户端处理，实际上并未发送到 Web 服务器。我的猜测是页面上有一些 javascript 使用 AJAX 从服务器请求正确的数据，您需要弄清楚用于此目的的 URL。

如果您使用 chrome，您可以查看开发人员工具的“网络”选项卡，并查看当您单击链接转到浏览器中的第二页时请求的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:11:23.680

这是因为哈希不是发送到服务器的 url 的一部分，它是一个片段标识符，用于识别页面内的元素。不过，一些网站滥用 JavaScript 挂钩的哈希片段来识别页面。您要么需要能够在页面上执行 JavaScript，要么需要对 JavaScript 进行逆向工程并模拟正在发出的真实搜索请求，大概是通过 ajax。Firebug 的 Net 选项卡对此非常有用。

# javascript - 如何拆分一个字符串，然后将它们与另一个字符串匹配

> ID：11968926
> 
> 赞同：1
> 
> 时间：2012-08-15T12:03:24.350
> 
> 标签：javascript, split

让我们坐下来，我有句子“我喜欢饼干”和句子“I_like_chocolate_cookies”。如何拆分字符串“我喜欢饼干”并检查第二句中是否存在单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:11:27.840

像这样

```
var words = "I like cookies".replace(/\W/g, '|');
var sentence = "I_like_chocolate_cookies";

console.log(new RegExp(words).test(sentence)); 
```

[https://tinker.io/447b7/1](https://tinker.io/447b7/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:11:19.293

这是一些示例代码：

```
str1 = 'I like cookies'
str2 = 'I_like_chocolate_cookies'
// We convert the strings to lowercase to do a case-insensitive check. If we
// should be case sensitive, remove the toLowerCase().
str1Split = str1.toLowerCase().split(' ')
str2Lower = str2.toLowerCase()
for (var i = 0; i < str1Split.length; i++) {
  if (str2Lower.indexOf(str1Split[i]) > -1) {
    // word exists in second sentence
  }
  else {
    // word doesn't exist
  }
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:11:19.363

像这样？

```
var x ="i like grape";
var c ="i_don't_like";
var xaar = x.split(' ');
for(i=0;i<xaar.length;i++){
if(c.indexOf(xaar[i])>-1) console.log(xaar[i]);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T12:32:48.877

```
var foo = "I_like_chocolate_cookies";
var bar = "I like chocolate cookies";

foo.split('_').filter(function(elements) {
  var duplicates = []
  if(bar.split().indexOf(element) != -1) {
    return true;
  }
}); 
```

# c# - 为什么在使用 mstest 进行单元测试时 MSDTC 的行为不一致？

> ID：11968927
> 
> 赞同：4
> 
> 时间：2012-08-15T12:03:40.873
> 
> 标签：c#, nhibernate, mstest, msdtc

我在测试我的 Nhibernate 存储库时遇到了一个奇怪的问题。

我有 10 个单元测试，如下所示。每次批量运行它们时，第一次失败，其余成功。如果一个一个地运行它们，它们都会失败。如果在我的测试运行之前重新启动 MSDTC，它有时会表现得像以前一样，有时所有测试都会成功。我找不到它为什么会这样的模式。

我希望事务回滚，以便从每个测试的干净数据库开始，因此事务处理。

由于此错误，测试/测试失败：

> System.Data.SqlClient.SqlException：服务器“MYCOMPUTERNAME\SQLEXPRESS”上的 MSDTC 不可用。

我的测试如下所示：

```
[TestInitialize]
public void MyTestInitialize()
{
    _transactionScope = new TransactionScope();
}

[TestCleanup]
public void MyTestCleanup()
{
    if (_transactionScope != null)
    {                
        _transactionScope.Dispose();
        _transactionScope = null;
    }
}             

[TestMethod]
[TestCategory("RepositoryTests")]
public void RepositoryCanSaveAProduct()
{
    var platform = ProductObjectMother.CreatePlatform("100010", "Supplier 10");

    var mainsegment = ProductObjectMother.CreateMainSegment("123");
    var application = ProductObjectMother.CreateApplication("Foo");
    var productfamily = ProductObjectMother.CreateProductFamily("X99");

    Engine i = ProductObjectMother.CreateEngine(platform, productfamily, application, mainsegment);
    var repository = new ProductRepository();
    repository.Save(i);
    repository.Flush();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:19:09.393

问题似乎与既没有使用 _transactionScope.Complete() 提交也没有通过抛出异常回滚的事务有关。

我还注意到一件奇怪的事情，测试通常会通过测试中缺少的“断言”函数（等于、不等于、存在等）失败或成功运行。:)

# objective-c - 使用 stringByAddingPercentEscapesUsingEncoding 的空白编码

> ID：11968929
> 
> 赞同：0
> 
> 时间：2012-08-15T12:04:10.273
> 
> 标签：objective-c

我正在使用字符串中的空格编码

```
[@"iPhone Content.doc" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] 
```

在 SKPSMTP 消息发送中。但是，在附件位置接收邮件时，我得到了名称`iPhone%20Content.doc`- 而不是它显示的空格`%20`。如何避免/正确编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T02:07:22.280

远程接收者当然不能接受带有空格的url，所以我们必须使用`stringByAddingPercentEscapesUsingEncoding`函数转换URL地址。

此函数将 URL 表达式中的空格替换为 %20。当 URL 包含非 ascii 字符时，它特别有用 - 您已使用该功能对 URL 进行百分比转义，以便远程服务器可以接受您的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:54:51.320

我的问题得到了解决方案。实际上我错过了将“”设置为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:12:42.697

如果您这样做，`stringByAddingPercentEscapesUsingEncoding`那么您将在结果字符串中获得百分号......您可以使用不同的东西，或者稍后返回并删除百分号。

从文档：

> **`stringByAddingPercentEscapesUsingEncoding:`**使用给定的编码返回接收者的表示，以确定将接收者转换为合法 URL 字符串所需的百分比转义。

又名，“此方法添加百分号”。如果要反转此过程，请使用`stringByReplacingPercentEscapesUsingEncoding`

只是一个旁注，`%20`是因为空格字符的十六进制表示是 20 并且 % 符号是转义符。您只需对 URL 执行此操作，因为它们不允许使用空格字符。

# c - C中的线程/函数指针错误

> ID：11968930
> 
> 赞同：1
> 
> 时间：2012-08-15T12:04:13.470
> 
> 标签：c, pthreads

我正在学习 C 中的函数指针和线程。以下代码将创建一个线程，该线程将从用户那里读取字符串。然后它将打印用户在主线程上输入的名称。但我得到了分段错误：11

```
#include<pthread.h>
#include<stdio.h>

int agelimit;
char *string1, *string2;
void *getName();
//void (*getAge)();
main(){

    pthread_t thread1,thread2;

    string1 = malloc(1000);
    //scanf("%s",string0);
    pthread_create(&thread1, 0, getName, 0);

    //pthread_create(&thread2, 0, getAge, 0);
    sleep(10);
    printf("name is %s age is",string1);

}
void *getName(){

    int x;
    printf("enter name:");

    scanf("%s",&string1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:08:34.650

虽然您的代码需要更多改进/错误处理，但似乎您需要更改

```
scanf("%s",&string1); 
```

至

```
scanf("%s",string1); 
```

让它现在工作。

PL。请参阅链接以获取有关

[POSIX 线程编程](https://computing.llnl.gov/tutorials/pthreads/)

**解释：**

string1 是一个变量，存储在内存中。所以它有一个内存地址说*a1*（这是起始地址）。现在这个内存地址中存储了什么？这来自您在下面的赋值语句。

```
string1 = malloc(1000); 
```

malloc -> 分配一块 1000 字节的内存并返回该块的起始地址，即*p1*。

所以现在变量 string1 的内容是*p1*或者换句话说，存储单元*a1*现在有*p1*（实际上这不应该是一个单元，而是一个 4 字节/8 字节的数量......但为了简单起见，我假设一个单元）。

现在 scanf 期望它的第二个参数是什么？

```
scanf("%s",&string1);

A valid address where it can store the input which it has accepted.

What is that in this example a1 or p1? - It is p1. 
```

因此，当您将 &string1 作为参数提供给 scanf 时，您将*a1*传递给 scanf ，这是不正确的。它应该让*p1*正常工作，所以你需要传递 string1 而不是 &string1

希望这个解释有所帮助。一般来说，PL。参考下面的c-faq链接，对理解c概念很有帮助 [comp.lang.c常见问题](http://c-faq.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:06:36.080

线程通常会导致缓冲流的古怪行为，但您的代码也是错误的。`getName`有一个错误的签名，`pthread_create`你`scanf`用冲突的参数（即“%s”和`char**`）调用它。

考虑在您使用的任何编译器中提高警告级别。

# testing - 使用 IBM Rational 对“Finacle - Infosys”核心银行系统进行功能和性能测试

> ID：11968932
> 
> 赞同：0
> 
> 时间：2012-08-15T12:04:17.423
> 
> 标签：testing, rft, ibm-rational, rpt

我正在尝试评估以下 IBM Rational 工具处理“Finacle - Infosys”核心银行系统的功能测试自动化和性能测试的能力。

1.  IBM Rational 功能测试器 (RFT)
2.  IBM Rational 性能测试器 (RPT)

另外，我想确认是否需要为这两个工具添加任何额外的组件来支持我的测试需求（例如，用于测试 Web 服务的插件或处理 Oracle NCA JInitiator ... 等）。

感谢您的帮助和支持。

注意：对于在“软件质量保证和测试”和主要的“StackOverFlow”网站上两次发布问题，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:47:09.420

**Rational Functional Tester (RFT)** 是一个功能/GUI 测试/自动化工具。我不确定您正在使用的应用程序，但是 RFT 为基于 Html /Java /.Net /Win 的应用程序提供了非常好的支持（仅举几例）

我将简要介绍 RFT 可以做什么，然后您可以决定它是否满足您对功能测试或自动化的要求。RFT 可以安装在 Eclipse IDE 或 Visual Studio IDE 或两者上，你可以使用任何你喜欢的东西。

RFT 为您提供了使用记录器创建测试脚本的能力，该记录器仅记录您在应用程序上执行的操作，捕获您一直交互的对象并保存对象映射。您可以创建验证点（数据验证点、属性验证点等）或使用 Datapool 使用不同的数据集运行一些测试。

如果需要后期录制，可以进一步微调由此生成的脚本。准备好脚本后，您可以播放脚本，然后 RFT 将开始执行脚本包含的操作，RFT 将使用对象映射来确定对象的属性和层次结构以查找控件并对其执行操作。如果有的话，它也可以使用保存的验证点来验证任何数据/属性。或者可以使用数据池对脚本进行数据驱动。

使用 RFT 的另一种方法是利用描述性编程的力量（您需要一些基本的 Java/VB 技能）。使用描述性编程，您基本上可以在不使用记录器的情况下自行创建脚本。您可以使用 RFT 提供的 find() api 来查找对象，然后执行操作/验证测试等。使用描述性脚本时，我们通常会从对象映射中解除绑定，因为我们正在定义要查找的内容和查找位置等。

也可以使用两者的组合，您可以使用对象映射中的一些对象，而可以使用 find() api 找到一些对象。这完全取决于您要编写的测试用例类型和您正在自动化/测试的应用程序类型。

您还可以使用简化脚本，它以类似简单的英语格式记录脚本，并且还允许捕获应用程序视觉效果，即使应用程序处于脱机状态，用户也可以使用捕获的视觉效果来修改脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:49:01.963

根据 IBM 代表的检查和确认，并根据 IBM Portal（链接[此处](http://www-304.ibm.com/partnerworld/gsd/solutiondetails.do?solution=25721&expand=true&lc=en)），应该支持使用 Rational Performance Tester (RPT) 和 Rational Functional Tester (RFT)。

在接下来的 12 个月内，我们将运行一个项目来对“Finacle - Infosys”核心银行系统进行功能测试自动化和性能测试，之后我可以发布关于我的这个问题的任何更新。

# iphone - Google plus SDK 在尝试与 iPhone App 集成时发出链接器错误

> ID：11968934
> 
> 赞同：0
> 
> 时间：2012-08-15T12:04:30.257
> 
> 标签：iphone, ios, linker, ios5

一些简单的事情有时是行不通的；）就像这个！我正在尝试按照此处给出的说明将 Google+ SDK 集成到 iPhone 应用程序中：

[https://developers.google.com/+/mobile/ios/#initialize_the_google_client](https://developers.google.com/+/mobile/ios/#initialize_the_google_client)

我做了每一步。但是当我构建应用程序时，它会抱怨以下错误：

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_GTMOAuth2Keychain", referenced from:
      objc-class-ref in libGooglePlusUniversal.a(GooglePlusSignIn.o)
  "_OBJC_CLASS_$_GTMOAuth2SignIn", referenced from:
      objc-class-ref in libGooglePlusUniversal.a(GooglePlusSignIn.o)
  "_OBJC_CLASS_$_GTMOAuth2ViewControllerTouch", referenced from:
      objc-class-ref in libGooglePlusUniversal.a(GooglePlusSignIn.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

它报告的类是开源 Google 工具箱项目的一部分（下载的 SDK 中也有该项目，但说明要求用户在 XCode 的项目中仅包含 GooglePlusShare.h 和 libGooglePlusUniversal.a）。我尝试包含目录“google-plus-ios-sdk-1.0.0\OpenSource”中的头文件，但这没有用。我尝试从目录'google-plus-ios-sdk-1.0.0\OpenSource'中包含整个（不仅仅是.h文件），它导致许多与ARC相关的错误（超过500个！）；所以我退出了这个选项。

请提供有关如何解决这些链接器错误的任何帮助？

我的环境：XCode 4.3.3，iOS 5.0，Mac OS X Lion 10.7.4，用 iPhone 4 测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:46:18.223

```
 Just select GData.xcodeproj .
 select GDataTouchStaticLib from target .
 search "othet c flag"
 remove "-DGTM_INCLUDE_OAUTH2=1" if exist

 add "-DGDATA_INCLUDE_OAUTH2=1"
 click on done. clean project and then build. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:22:04.173

缺少钥匙串和 auth-stuff 通常意味着您从未在项目中导入 Security.framework。

如果您确实包含库，请再次检查

*   *安全框架*
*   *SystemConfiguration.framework*

在您提到的说明的**第 1 步**中描述的 Xcode 项目中。

要验证这一点：

*   在 xcode 中单击您的**项目名称并选择您的****目标**。
*   在**“构建阶段”**选项卡下，这两个框架应列在名为**“链接二进制与库”**的部分下。
*   如果未列出，请按**+**按钮添加它们。

# php - 这个变量在 Codeigniter 中来自哪里？还有更多吗？

> ID：11968938
> 
> 赞同：4
> 
> 时间：2012-08-15T12:04:57.507
> 
> 标签：php, codeigniter

在默认的 Codeigniter 安装中，有一个“欢迎”控制器，它有一个“索引”操作，可以加载“欢迎”视图。这按预期工作。

但是，在检查“欢迎”视图时，我可以在页脚中看到这个变量。

```
<p class="footer">Page rendered in <strong>{elapsed_time}</strong> seconds</p> 
```

据我了解，该变量`{elapsed_time}`是使用带有文本表示的内置模板解析器而不是使用 PHP 短标签来回显变量的示例。

但是在“欢迎”控制器内部，“索引”操作中唯一的行就是这些。

```
$this->load->view('welcome'); 
```

而且它没有通过`$data['elapsed_time']='xxx';`，这意味着我无法弄清楚变量`elapsed_time`的来源！

我的问题是这个。

在哪里`elapsed_time`得到定义？它是否内置在模板解析器类中（因此无需先定义即可使用）？如果是这样，这些其他预定义变量的列表在哪里？我想知道我还有什么可以访问的，因为我知道`elapsed_time`我可以使用它，这将非常有用。有没有人有模板解析器预定义变量的列表？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T12:09:10.567

elapsed_time 定义的输出类。此类由 CodeIgniter 自动初始化。

更多信息[在这里](http://codeigniter.com/user_guide/libraries/output.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-16T09:35:01.760

CI 会将`{elapsed_time}`最终输出字符串中的“”字符串替换为实际的“total_execution_time”。您可以在 v213 的**system** **/core/Output.php 第 366 行**检查它

# playn - 如何在 PlayN 中正确地对身体施加扭矩或角冲量？

> ID：11968941
> 
> 赞同：2
> 
> 时间：2012-08-15T12:04:59.443
> 
> 标签：playn, jbox2d

我一直在尝试对 PlayN 中的 Body 对象应用角度脉冲，但无济于事。无论我输入哪个值（径向），身体的角度都不会改变。我也尝试设置扭矩，但没有结果。

**不起作用的示例代码：**

```
BodyDef def = new BodyDef();
def.type = BodyType.DYNAMIC;
Body body = world.createBody(def);

float degToRad = (float) (180 / Math.PI);
float radials = (float) (50 / degToRad);

// None of the following options work.
body.applyAngularImpulse(radials);       // Immediate angular change.
body.applyTorque(radials);               // Angular change over time. 
```

**如何在不手动设置角速度（例如使用 setAngularVelocity）的情况下获得有效的身体对象来改变其角度？**

提前致谢！

我确实注意到通过调用 setWake 方法来重置扭矩和角速度，我从不手动执行该方法，但它是由 Island 类调用的：

```
public void setAwake(boolean flag) {
    ...
    m_angularVelocity = 0.0f;
    m_torque = 0.0f;
    ...
} 
```

**注意：**设置角速度不是一个选项，因为我依赖于物理模拟。我找到了[一篇关于 Box2D 角度旋转](http://www.iforce2d.net/b2dtut/rotate-to-angle)的文章，但它并没有改变 applyAngularImpulse 方法的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:03:04.700

我已经调试了一些，得出的结论是我一直在使用的值太低了。在浏览 applyAngularImpulse 代码时，我注意到了一些事情：

```
public void applyAngularImpulse(float impulse) {
    if (m_type != BodyType.DYNAMIC) {
        return;
    }

    if (isAwake() == false) {
        setAwake(true);
    }
    m_angularVelocity += m_invI * impulse;
} 
```

**m_invI**是一个非常低的值，例如**2.44882598E-4**所以如果我使用太低的值是有道理的，那就是没有可见的效果。如果计算问题示例乘以**m_invI**字段的脉冲：

```
m_invI                                 = 0.00044882598 = 2.449E-4
impulse          = 50 / 180 / PI       = 0.08841941282 = 8.842E-2
m_invI * impulse = 2.449E-4 * 8.842E-2 = 0.00002165237 = 2.165E-5 <-- 
```

**这意味着每个更新周期只有0.00002165237**的角速度增量......这似乎太低而无法注意到。

此外，在浏览 Box2D 论坛以了解类似情况时，我发现将身体的惯性纳入角脉冲计算是一种最佳做法。像这样：

```
body.applyAngularImpulse(speedValue * body.getInertia()); 
```

对我来说，惯性往往是一个很高的值（+4000）。

*希望这可以对其他难以施加角脉冲或扭矩的人有所帮助。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-16T19:52:45.603

就我而言，我忘了打电话

```
body.setFixedRotation(false); 
```

即使我设置了质量，但报告的惯性为 0，并且忽略了所有扭矩和角脉冲。

显然它是默认固定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-17T19:35:11.557

我有同样的问题。

就我而言，我不小心将我的点按 CW 顺序排列（导致负面积和零质量）。这是我的错误代码：

```
// incorrect version
triangleVertices.push(new B2Vec2(width / 2, 0.0)); // top
triangleVertices.push(new B2Vec2(0.0, height));    // left
triangleVertices.push(new B2Vec2(width, heightM)); // right 
```

这看起来像CCW，对吧？不，不在我的坐标系中（+Y 向下）。

```
// corrected version
triangleVertices.push(new B2Vec2(width / 2, 0.0)); // top
triangleVertices.push(new B2Vec2(width, heightM)); // right
triangleVertices.push(new B2Vec2(0.0, height));    // left 
```

# android - @android:id/list @+id/android:list 有什么不同？

> ID：11968942
> 
> 赞同：1
> 
> 时间：2012-08-15T12:05:08.690
> 
> 标签：android

我看到两个 listview xml 代码：

```
<ListView
    android:id="@android:id/list"
... 
```

和

```
<ListView
    android:id="@+id/android:list" 
```

它们之间有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:06:21.000

使用`+`告诉 Android 更新 R.java 文件。

> 加号 (+) 表示这是一个新资源名称，必须创建并添加到我们的资源中（在 R.java 文件中）。

[在Android XML Layouts](http://developer.android.com/guide/topics/ui/declaring-layout.html)阅读所有相关信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:07:23.390

`@+id/test`意味着您正在应用程序的命名空间中创建一个名为 test 的 id。您可以使用`@id/test`.

`@android:id/test` 表示您指的是在 android 命名空间中定义的 id。

# perl - 将字符串转换为逻辑表达式

> ID：11968947
> 
> 赞同：1
> 
> 时间：2012-08-15T12:05:29.043
> 
> 标签：perl

我使用配置文件加载逻辑表达式，稍后将根据成功或失败配置替换为 0 或 1

```
expression=(server.ip.1&&server.ip.2)||(server.ip.3&&server.ip.4) 
```

稍后 server.ip.1 将根据服务器可用性替换为 1 或 0。逻辑表达式评估的后面部分有以下代码。

```
my $reg_expression= configurator->get_reg_expression() ;

...
$reg_expression =~ s/$values[0]/$ip_status/g;

if ($reg_expression){
    $logger->debug("no failover");
}else{
    $logger->debug("falling to failover mode");
} 
```

问题是如果条件始终为真，则任何值都分配给表达式。问题似乎是它被视为字符串，所以它总是以 true 结尾。我可以做同样的任何其他方式，或者如何将上述变量转移回我可以在 if 条件内成功使用的状态。

```
 $reg_expression = (0&&0)||(1&&0); # diffe
 $reg_expression = '(0&&0)||(1&&0)'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:14:35.707

您[可以使用 eval](http://perldoc.perl.org/functions/eval.html)来评估表达式：

```
my $reg_expression = '(0&&0)||(1&&0)';
print eval $reg_expression, "\n"; 
```

# c++ - Qt::QueuedConnection 信号是否总是按顺序调用？

> ID：11968948
> 
> 赞同：1
> 
> 时间：2012-08-15T12:05:33.997
> 
> 标签：c++, qt

与[Qt 相关：事件是否按顺序处理？](https://stackoverflow.com/questions/1733022/qt-do-events-get-processed-in-order)

`Qt::QueuedConnection`信号**总是**按顺序调用吗？

所以：

```
void A::func()
{
    emit first_signal();
    emit second_signal();
} 
```

如果它们**都**通过插槽连接，那么`Qt::QueuedConnection`它们是否总是按顺序调用？`first_signal()``second_signal()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:31:51.663

鉴于[有关事件优先级](https://bugreports.qt-project.org/browse/QTBUG-19637)的错误最近仍在修复（目标版本 4.8.0），最好不要依赖它。文档避免任何粗体陈述的观察很可能意味着开发人员根本不太确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:19:16.840

如果文档没有说明，你不应该假设它。

# python - 根据用户输入生成 raw_inputs？[Python]

> ID：11968951
> 
> 赞同：2
> 
> 时间：2012-08-15T12:05:48.540
> 
> 标签：python, raw-input

有没有办法根据用户输入生成许多 raw_inputs（带有唯一变量）？所以，假设我有这个：

```
if choice == 1:
    noelemen = int(raw_input("Enter total amount of elements: ")) 
```

是否有任何方法可以使放入该 raw_input 字段中的整数然后“生成”所需数量的 raw_inputs？我想，如果可能的话，它会使用函数或类似的东西，但我对如何完成它才能做到这一点有点困惑。

我目前拥有的是这样的：

```
if noelemen == 1:
        first = raw_input("Enter element: ")

        #Look for the weight of the entered element
        weight1 = float(elemen_data.get(first.lower()))

        if weight1 is not None:
            total_weight = weight1
        print "Total mass =", total_weight

if  noelemen == 2:
        first = raw_input("Enter first element: ")
        second = raw_input("Enter second element: ")

        #Look for the weight of the entered element
        weight1 = float(elemen_data.get(first.lower()))
        weight2 = float(elemen_data.get(second.lower()))

        if weight1 is not None:
            total_weight = weight1 + weight2
        print "Total mass =", total_weight 
```

这可能是一种非常混乱的方式，特别是因为我必须达到 10 个元素，甚至更多。

所以，重复一遍......有什么方法可以根据用户输入生成具有唯一变量的 raw_inputs 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:11:06.290

这样的事情怎么样？

```
elements = []
numberOfPrompts = raw_input("Enter total amount of elements: ")
for i in range(numberOfPrompts):
   # will prompt "Enter Element 1: " on the first iteration
   userInput = raw_input("Enter Element %s" % (i+1, )) 
   elements.append(userInput) 
```

## 示例案例：

```
>>> Enter total amount of elements: 2 # now hit enter 
```

此时，变量的值`numberOfPrompts`将是`2`。变量的值为`elements`，`[]`即它是一个空列表

```
>>> Enter Element 1: 3.1415 # hit enter 
```

`numberOfPrompts`留下来`2`_ `elements``['3.1415']`

```
>>> Enter Element 2: 2.7182 
```

`elements`将会`['3.1415', '2.7182']`

现在 for 循环完成了，您可以在索引为 0 的列表中方便地获取用户输入`elements`，您可以像访问元组（*数组*）一样访问它：

```
>>> elements[1]
2.7182 
```

* * *

## 编辑：

阅读您的评论后，我注意到您打算做什么，就像其他答案所述，最好为此使用字典。这应该有效：

```
elements = {}
numberOfPrompts = raw_input("Enter total amount of elements: ")
for i in range(numberOfPrompts):
   # will prompt "Enter Element 1: " on the first iteration
   userInput = raw_input("Enter Element %s" % (i+1, )) 
   userInput = userInput.lower()
   elements[userInput] = float(elem_data.get(userInput)) 
```

现在`elements`看起来像这样：

```
{'oxygen':15.9994, 'hydrogen':1.0079} 
```

您可以像这样遍历所有键（以找出已输入的元素）：

```
for element in elements.keys():
    print element
# output:
oxygen
hydrogen 
```

要获取所有值（例如总结它们），请执行以下操作：

```
weightSum = 0
for weight in elements.values():
    weightSum += weight
print weightSum
# output:
17,0073 
```

请记住，此示例适用于 python 2.x。对于 python 3.x，你需要调整一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:09:51.453

我会为此使用字典：

```
noelemen = int(raw_input("Enter total amount of elements: "))
elem={}
for x in xrange(1,noelemen+1):
    elem[x]=raw_input("Enter element: ") 
```

# javascript - 如何为 jquery 自动完成框设置默认值？

> ID：11968952
> 
> 赞同：1
> 
> 时间：2012-08-15T12:05:48.297
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

您将如何使用 id 从设置值中为自动完成框设置默认值？

这些值来自数据库。

本质上，我想要的与 html 中的普通选择相同，您可以在其中明确地说选择了此选项（selected=selected）

我是整个 jquery 的新手，并且看到了类似的主题，但似乎无法让它工作

这是我的代码

```
<script>
    $(function() {
        function log( message ) {
            $( "<div/>" ).text( message ).prependTo( "#log" );
            $( "#log" ).scrollTop( 0 );
        }

        $( "#birds" ).autocomplete({
            source: "search.php",
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.value + " aka " + ui.item.id :
                    "Nothing selected, input was " + this.value );
            }

        });
    });
    </script>
</head>
<body>

<div class="demo">

<div class="ui-widget">
    <label for="birds">Birds: </label>
    <input id="birds"  />
</div> 
```

因此，当页面加载时，我希望它从我的源中选择一个值，例如：robin

这是演示中的代码，我试图操纵它以我想要的方式工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:33:07.330

我只需将`input`' 值设置为您想要的默认值：

```
<input value="robin" id="birds" /> 
```

# javascript - 来自 MS Access 的 null 的 javascript 陷阱

> ID：11968954
> 
> 赞同：0
> 
> 时间：2012-08-15T12:06:07.063
> 
> 标签：javascript, ms-access, null

这应该很简单，但是...我正在通过 JavaScript 使用来自 MS Access db 的值填充一些选择框。所以...我遍历记录并检索名称。其中一些是有效的，一些是空的，还有一些是空的（无论出于何种原因）。我想捕获空值和空值，这样它们就不会出现在选择选项中。这是我所拥有的：

```
var SQL = "SELECT DISTINCT design_lead FROM projects";
rs.Open(SQL, cn);
    if(!rs.bof) {
        rs.MoveFirst();
    }
var i=0;
while(!rs.eof) {
    desLead = rs("design_lead");
    if(desLead==null || desLead==undefined || desLead=='') {
        i=i+1;
        rs.MoveNext();
    }
    else {
        $("#leadName").append("<option>"+desLead+"</option>")
        i=i+1;
        rs.MoveNext();
    }
}
rs.Close(); 
```

问题是 null 总是出现在选项列表中。我已经搜索了几天，但没有找到任何有用的东西......我尝试了许多不同的陷阱（typeof 等），但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:10:47.313

首先不返回空值怎么样：

```
var SQL = "SELECT DISTINCT design_lead FROM projects WHERE design_lead IS NOT NULL"; 
```

此外，您可以将 while 循环缩小一点，因为在 if 和 else 情况下只有一行不同：

```
while(!rs.eof) {
    desLead = rs("design_lead");
    if(desLead) {
        $("#leadName").append("<option>"+desLead+"</option>")
    }
    i=i+1;
    rs.MoveNext();
} 
```

通过说`if(desLead)`您正在测试是否`desLead`是“真实的”，请注意`null`和`undefined`空字符串都是“虚假的”。

`"null"`如果由于某种原因可能会返回实际字符​​串，那么只需执行以下操作：

```
if(desLead && desLead != "null") 
```

# grails - 具有弹簧安全核心的 grails 应用程序的两个或三个不同的用户对象？

> ID：11968955
> 
> 赞同：0
> 
> 时间：2012-08-15T12:06:08.290
> 
> 标签：grails, spring-security, grails-2.0

我正在使用 grails 2.1，并且我的 Web 应用程序中有三个不同的业务对象（用户对象）。

每个用户对象具有不同的属性和与其他域对象的关系。

我希望每个用户对象都能够通过 Web 应用程序进行身份验证，并能够访问不同的屏幕/仪表板等。某些屏幕对所有用户对象都可用并且看起来相同。

直到今天，我只是扩展了 spring security core 生成的 User 类。例如：

```
class ShopOwner extends User {}
class Customer extends User {}
class Affiliate extends User {} 
```

在这种情况下，我可以使用 Spring Security 登录作为 ShopOwner、Customer 和 Affiliate，而不会出现问题。

但这是这样做的首选方式吗？或者我应该以不同的方式实现这个用例吗？（根据UserDetailService等）一些建议，官方解决方案？谢谢！

# php - PHP 脚本崩溃和最长执行时间

> ID：11968956
> 
> 赞同：1
> 
> 时间：2012-08-15T12:06:10.740
> 
> 标签：php, apache

我目前有一个网站因“过度使用系统资源”而被我的托管服务提供商两次暂停。在每种情况下，我的一个 PHP 脚本都有 300 - 400 个崩溃副本留在服务器上运行。

脚本本身从家里的网络摄像头提取图像并将其复制到服务器。他们利用文件锁来确保一次只有一个人可以写入。任何查看该页面的客户端每 3 秒调用一次脚本。

最初我很困惑，因为我知道 PHP 脚本要么完成（返回结果），要么崩溃（返回内部服务器错误页面）。然而，我被告知“失效的脚本”是一种非常常见的情况。

有人可以教育我吗？我已经用谷歌搜索死了，但我看不到脚本如何最终处于崩溃状态。当它达到最大执行时间时会不会超时？

我的托管服务提供商在 Linux 平台上使用 PHP 作为 CGI 设置。我相信我实际上已经发现了我的脚本的问题，因为我没有意识到flock 是一个阻塞函数（而且我没有使用LOCK_NB 掩码）。我假设我的脚本的数百个副本最终被阻止等待资源可用，这会导致崩溃？这听起来合理吗？我不愿意重新启用该网站，因为担心它会再次被暂停。

任何见解都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:43:03.547

可能我推荐的方法是先使用`tempnam()`并在里面写入内容（这可能需要一段时间）。完成后，您将执行文件锁定等。

不确定在完成 PUT 请求时是否会发生这种情况；通常 PHP 会先处理文件上传，然后再将执行交给您的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:14:48.363

脚本可能会因这两个限制而崩溃

*   max_execution_time
*   内存限制

在使用资源时，除非您在脚本中没有其他错误/也检查通知错误

# c# - 如何将 pinvoke 用于指向 C# 的 C 结构数组指针

> ID：11968960
> 
> 赞同：4
> 
> 时间：2012-08-15T12:06:21.153
> 
> 标签：c#, c, arrays, struct, pinvoke

我正在尝试使用 pinvoke 编组从 C 到 C# 的另一个结构内的结构数组。AFAIK，没有办法。
因此，相反，在 C 结构中，我向我的数组和 malloc 声明了一个 ptr。问题：1）如何在 C# 端声明等价物？2) 如何在 C# 端分配和使用等价物？

```
//The C code
typedef struct {
       int a;
       int b; } A;
typedef struct {
      int c;
      // A myStruct[100];    // can't do this, so:
      A *myStruct; } B;

//The c# code:
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public class A{
    int a;
    int b;
}

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public class B{
      int c;
      // can't declare array of [100] A structures...
     ?
 } 
```

[编辑]：不知何故，我误解了我在其他地方读到的关于 c# 端的固定对象数组的内容。而且我*可以*在 C 中修复数组大小所以编译好了，但是在使用时我得到“对象引用未设置为对象的实例”：

`data.B[3].a = 4567;` 因此，在其他地方阅读此错误可能是什么时，我添加了此方法：

```
public void initA()
        {
          for (int i = 0; i < 100; i++) { B[i] = new A(); }
        } 
```

同样，编译正常，但同样的错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T13:32:38.700

要在 C 和 C# 之间编组这样的“复杂”结构，您有几个选择。

在这种情况下，我强烈建议您尝试将固定数组嵌入到 C 端结构中，因为它会大大简化 C# 端。您可以使用该`MarshalAs`属性告诉 C# 在运行时需要在数组中分配多少空间：

```
// In C:
typedef struct
{
 int a;
 int b;
} A;

typedef struct
{
 int c;
 A data[100];
} B;

// In C#:
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct A 
{
  int a;
  int b;
}

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct B
{
  int c;
  [MarshalAs(UnmanagedType.LPArray, SizeConst=100)]
  A[] data = new data[100];
} 
```

如果您不知道或无法指定数组的固定大小，那么您需要执行您所做的并将其声明为 C 中的指针。在这种情况下，您无法告诉 C# 有多少内存该数组将在运行时使用，因此您几乎无法手动完成所有编组。[这个问题](https://stackoverflow.com/questions/1197181/how-to-marshal-a-variable-sized-array-of-structs-c-sharp-and-c-interop-help)很好地说明了它的工作原理，但基本思想是：

1.  您应该在结构中添加一个包含数组元素计数的字段（这将使您的生活更轻松）
2.  将 C# 中的字段声明为：`IntPtr data;`没有属性。
3.  用于`Marshal.SizeOf(typeof(A))`获取结构在非托管内存中的大小。
4.  用于`Marshal.PtrToStructure`将单个非托管结构转换为 C#
5.  用于`IntPtr.Add(ptr, sizeofA)`移动到数组中的下一个结构
6.  循环直到用完为止。

# php - 在 .htaccess 上使用 php 变量进行 url 重写

> ID：11968961
> 
> 赞同：0
> 
> 时间：2012-08-15T12:06:33.897
> 
> 标签：php, .htaccess, rewrite

我有一个 php 文件，可以`test.php?x=1`用 .htaccess 说我可以重写 url。

这是我的 .htaccess

```
RewriteEngine on
RewriteRule ^some-page_([0-9]+)_(.+)?$ test.php?x=$1 [L] 
```

通常我可以在 url 上的 x 之后写任何我想写的东西。现在这是我想做的事情；在 test.php 文件中有一个变量`$name`。我想将该变量写入 .htaccess 因此我想在下面制作链接

`localhost/some-page_1_SOME-TEXT-COMING-FROM-VARIABLE`

我怎么能这样做？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:10:09.067

你不能。Apache 重写规则和 PHP 没有任何关系。

重写规则也不会“建立链接”。它们只是控制响应 URL 执行的脚本或程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:11:11.540

```
RewriteEngine on
RewriteRule ^some-page_([0-9]+)_(.+)?$ test.php?x=$1&name=$2 [L]
RewriteRule ^some-page_([0-9]+)?$ test.php?x=$1 [L] 
```

第二行允许您让 localhost/some-page_1 也能正常工作。

以上将或应该将下面的第一行重写为底部 URL：

```
localhost/some-page_1_SOME-TEXT-COMING-FROM-VARIABLE
localhost/some-page.php?id=1&name=SOME-TEXT-COMING-FROM-VARIABLE 
```

# java - 使用 string.split 未正确拆分字符串

> ID：11968964
> 
> 赞同：3
> 
> 时间：2012-08-15T12:06:41.203
> 
> 标签：java, string

我很尴尬地问这个问题，这是一个真正的新手问题，但它整个上午都在踢我的屁股。这里是：我正在尝试使用三个句点作为分隔符将 IP 地址分成四个单独的字符串。这是我正在使用的代码：

```
 Toast.makeText(getBaseContext(),s,Toast.LENGTH_SHORT).show();
     String[] ip = s.split(".",4);
     String ip0ne = ip[0];
     String ipTwo = ip[1];
     String ipThree = ip[2];
     String ipFour = ip[3]; 
```

's'是包含ip地址'82.163.99.82'的字符串，这个在toast中得到验证问题是，ipOne，ipTwo和ipThree最终什么都不包含，而ipFour最终包含'163.99.82'第一个数字IP地址完全消失了。请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T12:07:16.447

```
String[] ip = s.split("\\.",4); 
```

字符串参数被评估为正则表达式，因此我们必须转义点（在 java 中我们也必须转义转义字符 - 因此：双反斜杠）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:08:49.903

该[`split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)方法采用正则表达式-并且`.`在正则表达式中匹配任何字符:(我个人认为任何非正则表达式API都将正则表达式*作为a`String`*而在方法名称中没有任何指示是疯狂的，但是嘿......

您*可以*用作`"\\."`拆分值 - 但我个人会使用[Guava](http://guava-libraries.googlecode.com)及其[`Splitter`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Splitter.html)类型：

```
private static final Splitter DOT_SPLITTER = Splitter.on('.').limit(4); 
```

# java - 安卓摇码

> ID：11968970
> 
> 赞同：0
> 
> 时间：2012-08-15T12:06:52.650
> 
> 标签：java, android, accelerometer, shake

在我的游戏中，我希望玩家在游戏中的任何时候摇晃他的手机，每次摇晃都会导致切换武器。

示例：玩家有刀，[摇晃手机]并切换到武士刀。

```
if (accelerometer.x >= 5 || accelerometer.x <= -5   || accelerometer.y >= 5 
   || accelerometer.y <= -5   || accelerometer.z >= 5 || accelerometer.z <= -5 )
   switchWep(); 
```

这行得通，问题是**它有副​​作用**。当玩家摇晃手机时，有时会切换两次武器。所以我想限制它，这样如果有很大的震动，游戏就不会从武器 0 切换到武器 2。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:10:06.260

您可以设置一个简单的时间限制，这样您就不能彼此切换 2 次。我认为 1 秒 - 500 毫秒足以避免双重切换。

**编辑**：你可以这样做，但我不确定它是最优化或锁定安全的方法。

```
protected void shake() {
    if(mAllowShake) {
        mAllowShake = false;

        // do shake

        Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                mAllowShake = true;
            }
        };

        handler.sendMessageDelayed(null, 500);  // time in milliseconds
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:11:48.133

您可以尝试将 .5 更改为更高的数字。

# linux - 如何检查 sshd 是否在远程机器上运行

> ID：11968971
> 
> 赞同：17
> 
> 时间：2012-08-15T12:06:51.867
> 
> 标签：linux, bash, shell

```
ssh -q -o "BatchMode=yes" user@host "echo 2>&1" && echo "OK" || echo "NOK" 
```

此方法是合适的，但它会`true`在 pub.key 复制到主机时返回。我需要查看 ssh 是否可以在没有密钥的两个设备之间连接。

只是想检查 sshd 是否正在远程运行。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-15T12:22:41.333

如果您只想检查是否可以通过 ssh 连接到主机，则只需检查端口 22 是否打开。有多种方法可以做到这一点。

使用[nmap](http://nmap.org/)（将 localhost 替换为您的目标主机）：

```
$ nmap -p22 localhost

Starting Nmap 5.21 ( http://nmap.org ) at 2012-08-15 13:18 BST
Nmap scan report for localhost (127.0.0.1)
Host is up (0.000044s latency).
PORT   STATE SERVICE
22/tcp open  ssh

Nmap done: 1 IP address (1 host up) scanned in 0.04 seconds 
```

要在脚本中使用它：

```
if nmap -p22 localhost -oG - | grep -q 22/open; then 
    echo "OK"
else 
    echo "NOK"
fi 
```

您还可以使用[netcat](http://netcat.sourceforge.net/)：

```
$ nc -zv localhost 22
Connection to localhost 22 port [tcp/ssh] succeeded! 
```

要在脚本中使用它：

```
if nc -zv localhost 80 2>&1 | grep -q succeeded; then 
    echo "OK"
else 
    echo "NOK"
fi 
```

* * *

这是一种快速检查，在大多数情况下就足够了，但它并非万无一失。不能保证在远程端口上侦听的服务实际上是 SSH 服务器。

您可以尝试虚拟连接并检查返回的标头，例如：

```
$ echo "dummy" | nc localhost 22
SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
Protocol mismatch. 
```

然而，由于各种原因，这种方法是不可取的。唯一有保证的方法是建立实际连接，如您在问题中所示。

# javascript - Knockout.js 嵌套视图模型不起作用

> ID：11968972
> 
> 赞同：1
> 
> 时间：2012-08-15T12:07:02.330
> 
> 标签：javascript, knockout.js

我是 ko 的新手，但找不到解决问题的方法。我尝试将我的可绑定属性组织到视图模型层次结构中。根据文档，在我看来，以下内容应该有效，但事实并非如此。你有什么提示吗？

```
function AppViewModel() {
    this.nested = new NestedViewModel();
}

function NestedViewModel() {
    this.firstName = ko.observable();
     this.lastName = "Bertington";
}

ko.applyBindings(new AppViewModel()); 
```

并在这里使用：

```
<p data-bind="with: nested">

<p>First name: <input type="text" data-bind="value: firstName, valueUpdate: afterkeydown"></input></p>
<p>Last name: <strong data-bind="text: firstName"></strong></p>

</p> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:11:59.337

您的 HTML 无效。您不能嵌套`<p>`元素。因此浏览器会自动生成结束标签为`<p data-bind="with: nested"></p>`.

将外部包装器替换为例如 a`<div>`以使 HTML 有效并且脚本工作。

此外，它必须是`valueUpdate: 'afterkeydown'`（加上引号），否则敲除会寻找一个名为“afterkeydown”的可观察对象。

这是一个工作演示：http: [//jsfiddle.net/JwWCc/1/](http://jsfiddle.net/JwWCc/1/)

# android - 从 java 类访问上下文的模式（它不是活动）

> ID：11968975
> 
> 赞同：0
> 
> 时间：2012-08-15T12:07:17.250
> 
> 标签：android, android-activity

在我的 android 项目中，我有一些活动类，并且还简化了 java 类。其中一些完全独立于上下文和视图，但在另一些中，我需要它来访问特定的上下文方法。

我读过它，有人说他们将某些活动的上下文传递给每个需要其方法的类；其他传递视图然后获取上下文或此类必须扩展 Activity... ¬¬

但例如，我有一个类，它只调用一次上下文方法，例如：

```
getSharedPreferences(configNameFile, 0);
getString(R.string.text);
... 
```

因此，我想知道您总是使用什么模式来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:16:13.023

我个人最喜欢的方法是：

**使用 RoboGuice 进行**依赖注入****

 **或者

**确保您不需要上下文**

如果可能，请尽量避免在其他文件中使用上下文，然后是您的活动。如果真的需要，我大部分时间都会写一个包装器。例如，对于设置，我编写了一个设置界面，它能够通过共享偏好来实现。以后无论何时想要更改设置实现，都可以通过交换接口的实现来轻松完成。如果你真的需要它，我更喜欢使用[静态应用程序上下文](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:27:33.753

此外，您可以使该方法接受`Context`参数，例如：

```
public void getPrefs(Context context){
   context.getSharedPreferences(configNameFile, 0);
   context.getString(R.string.text);
} 
```

然后在您的 Activity 中将当前上下文传递给它：

```
public void getPrefs(this); 
```**

# python - 仅列出当前目录中的文件

> ID：11968976
> 
> 赞同：286
> 
> 时间：2012-08-15T12:07:20.660
> 
> 标签：python

在 Python 中，我只想列出当前目录中的所有文件。我不希望从任何子目录或父目录中列出文件。

那里似乎确实有类似的解决方案，但它们似乎对我不起作用。这是我的代码片段：

```
import os
for subdir, dirs, files in os.walk('./'):
    for file in files:
      do some stuff
      print file 
```

假设我的当前目录中有 2 个文件，holygrail.py 和 Tim。我也有一个文件夹，其中包含两个文件——我们称它们为 Arthur 和 Lancelot——在里面。当我运行脚本时，这就是我得到的：

```
holygrail.py
Tim
Arthur
Lancelot 
```

我对 Holygrail.py 和 Tim 很满意。但是我不想列出 Arthur 和 Lancelot 这两个文件。

* * *

## 回答 #1

> 赞同：478
> 
> 时间：2012-08-15T12:09:55.920

只需使用[`os.listdir`](http://docs.python.org/library/os#os.listdir)and[`os.path.isfile`](http://docs.python.org/library/os.path.html#os.path.isfile)而不是[`os.walk`](http://docs.python.org/library/os#os.walk).

**例子：**

```
import os
files = [f for f in os.listdir('.') if os.path.isfile(f)]
for f in files:
    # do something 
```

* * *

但是在将其应用于其他目录时要小心，例如

```
files = [f for f in os.listdir(somedir) if os.path.isfile(f)]. 
```

这不起作用，因为`f`它不是完整路径，而是相对于当前目录。

因此，要过滤另一个目录，请执行`os.path.isfile(os.path.join(somedir, f))`

*（感谢[因果](https://stackoverflow.com/users/1311956/causality)的提示）*

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2012-08-15T12:09:25.503

您可以`os.listdir`用于此目的。如果您只想要*文件*而不是*目录*，您可以使用`os.path.isfile`.

例子：

```
files = os.listdir(os.curdir)  #files and directories 
```

或者

```
files = filter(os.path.isfile, os.listdir( os.curdir ) )  # files only
files = [ f for f in os.listdir( os.curdir ) if os.path.isfile(f) ] #list comprehension version. 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-06-10T09:39:29.810

```
import os

destdir = '/var/tmp/testdir'

files = [ f for f in os.listdir(destdir) if os.path.isfile(os.path.join(destdir,f)) ] 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-10-24T10:37:19.807

您可以使用`[os.scandir()](https://docs.python.org/3/library/os.html#os.scandir)`. stdlib 中的新函数从 Python 3.5 开始。

```
import os

for entry in os.scandir('.'):
    if entry.is_file():
        print(entry.name) 
```

比 快`os.listdir()`。`os.walk()` [实现](https://docs.python.org/3/whatsnew/3.5.html#optimizations) `os.scandir()`。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-11-08T17:46:30.817

您可以使用该[`pathlib`](https://docs.python.org/3/library/pathlib.html)模块。

```
from pathlib import Path
x = Path('./')
print(list(filter(lambda y:y.is_file(), x.iterdir()))) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-09-24T13:34:35.777

这可以通过 os.walk() 来完成

**python 3.5.2 测试；**

```
import os
for root, dirs, files in os.walk('.', topdown=True):
    dirs.clear() #with topdown true, this will prevent walk from going into subs
    for file in files:
      #do some stuff
      print(file) 
```

删除 dirs.clear() 行并再次包含子文件夹中的文件。

更新**参考资料**；

[os.walk](https://docs.python.org/3/library/os.html#os.walk)记录在这里并讨论正在创建的三重列表和自上而下的效果。

[.clear()](https://docs.python.org/3.3/tutorial/datastructures.html)在此处记录用于清空列表

因此，通过从 os.walk 中清除相关列表，您可以根据您的需要影响其结果。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-08-15T12:09:15.487

而不是`os.walk`，只需使用`os.listdir`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-02-25T15:09:11.360

```
import os
for subdir, dirs, files in os.walk('./'):
    for file in files:
      do some stuff
      print file 
```

您可以改进此代码，`del dirs[:]`如下所示。

```
import os
for subdir, dirs, files in os.walk('./'):
    del dirs[:]
    for file in files:
      do some stuff
      print file 
```

如果您可以将 os.walk 指向当前工作目录，甚至更好。

```
import os
cwd = os.getcwd()
for subdir, dirs, files in os.walk(cwd, topdown=True):
    del dirs[:]  # remove the sub directories.
    for file in files:
      do some stuff
      print file 
```

# java - Java + SSL 使用自定义 Socket

> ID：11968977
> 
> 赞同：0
> 
> 时间：2012-08-15T12:07:21.190
> 
> 标签：java, sockets, ssl

我正在开发一个基于 Java 的 P2P 应用程序，其中对等点使用一个名为 ice4j 的库与每个点进行通信，它是一个名为 PsuedoTCPSocket 的自定义套接字。

我现在想为应用程序添加 SSL 支持。PsuedoTCPSocket 扩展了 java.net.Socket 所以认为应该可以在该套接字之上使用 SSLSocket。但是，我无法找到使用自定义底层套接字创建 SSLSocket 实例的任何方法。这可能吗？如果可以，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:25:57.000

如果您的`PseudoTCPSocket`扩展`java.net.Socket`（并且没有破坏其 API），您应该能够将其升级到`SSLSocket`using [`SSLSocketFactory.createSocket(Socket s, String host, int port, boolean autoClose)`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSocketFactory.html#createSocket%28java.net.Socket,%20java.lang.String,%20int,%20boolean%29)。

# mysql - 加快缓慢的mysql查询

> ID：11968982
> 
> 赞同：0
> 
> 时间：2012-08-15T12:07:37.443
> 
> 标签：mysql

我正在尝试提高应用程序的性能。我可能需要创建在 cron 上运行的汇总表，这样应用程序的加载时间就不会太长（5-10 秒）。这是最好的主意吗？

给定下表：

```
mysql> describe school_data_sets_numeric_data;
+--------------+---------------+------+-----+---------+----------------+
| Field        | Type          | Null | Key | Default | Extra          |
+--------------+---------------+------+-----+---------+----------------+
| id           | int(11)       | NO   | PRI | NULL    | auto_increment |
| data_set_nid | int(11)       | NO   | MUL | NULL    |                |
| school_nid   | int(11)       | NO   | MUL | NULL    |                |
| year         | int(11)       | NO   | MUL | NULL    |                |
| description  | varchar(255)  | NO   |     | NULL    |                |
| value        | decimal(18,5) | NO   |     | NULL    |                |
+--------------+---------------+------+-----+---------+----------------+
6 rows in set (0.00 sec) 
```

以及以下查询（为学校的每个 data_set_nid 运行一次）

此查询运行速度很快（0 秒）：

```
SELECT year, description, CONCAT(FORMAT((value/(SELECT SUM(value) 
FROM `school_data_sets_numeric_data` as numeric_data_inner 
WHERE year = numeric_data_outer.year and data_set_nid = numeric_data_outer.data_set_nid and school_nid = numeric_data_outer.school_nid)) * 100, 2), '%') as value 
FROM `school_data_sets_numeric_data` as numeric_data_outer 
WHERE data_set_nid = 38251 and school_nid = 32805 ORDER BY id DESC; 
```

解释：

```
+----+--------------------+--------------------+------+---------------------------------------------+--------------+---------+-----------------------------------------------------------------------------------------------------------+------+-----------------------------+
| id | select_type        | table              | type | possible_keys                               | key          | key_len | ref                                                                                                       | rows | Extra                       |
+----+--------------------+--------------------+------+---------------------------------------------+--------------+---------+-----------------------------------------------------------------------------------------------------------+------+-----------------------------+
|  1 | PRIMARY            | numeric_data_outer | ref  | data_set_nid,data_set_nid_2,school_nid      | data_set_nid | 8       | const,const                                                                                               |   17 | Using where; Using filesort |
|  2 | DEPENDENT SUBQUERY | numeric_data_inner | ref  | year,data_set_nid,data_set_nid_2,school_nid | data_set_nid | 8       | rocdocs_main_drupal_7.numeric_data_outer.data_set_nid,rocdocs_main_drupal_7.numeric_data_outer.school_nid |    9 | Using where                 |
+----+--------------------+--------------------+------+---------------------------------------------+--------------+---------+-----------------------------------------------------------------------------------------------------------+------+-----------------------------+ 
```

此查询运行缓慢（1.43 秒）：

```
SELECT year, description, CONCAT(FORMAT((SUM(value)/(SELECT SUM(value) 
FROM `school_data_sets_numeric_data` as numeric_data_inner 
WHERE year = numeric_data_outer.year and data_set_nid = numeric_data_outer.data_set_nid)) * 100, 2), '%') as value 
FROM `school_data_sets_numeric_data` as numeric_data_outer 
WHERE data_set_nid = 38251 GROUP BY year,description ORDER BY id DESC; 
```

解释：

```
+----+--------------------+--------------------+------+----------------------------------+----------------+---------+-------+-------+----------------------------------------------+
| id | select_type        | table              | type | possible_keys                    | key            | key_len | ref   | rows  | Extra                                        |
+----+--------------------+--------------------+------+----------------------------------+----------------+---------+-------+-------+----------------------------------------------+
|  1 | PRIMARY            | numeric_data_outer | ref  | data_set_nid,data_set_nid_2      | data_set_nid_2 | 4       | const | 90640 | Using where; Using temporary; Using filesort |
|  2 | DEPENDENT SUBQUERY | numeric_data_inner | ref  | year,data_set_nid,data_set_nid_2 | year           | 4       | func  | 38871 | Using where                                  |
+----+--------------------+--------------------+------+----------------------------------+----------------+---------+-------+-------+----------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-15T12:33:48.497

相关的子查询/子选择通常是瓶颈——部分原因是 MySql 只有一个嵌套循环连接算法，没有散列连接/合并连接。

我会尝试将您的主选择加入到包含您需要的所有 SUM 值的派生表中。

# java - 将文件从 zip 传输到 jar

> ID：11968987
> 
> 赞同：0
> 
> 时间：2012-08-15T12:08:04.997
> 
> 标签：java, jar, zip

在过去的 3 天里，我一直被一个烦人的问题所困扰，我不知道如何将文件从 zip 传输到 jar。我不确定我是否需要为所述进程提供缓冲区，以及我是使用 JarInput/OutputStream 还是使用 Enumerations，我已经对如何做到这一点进行了一些研究，除了我找不到任何东西一大堆代码，你可以告诉我，我更喜欢解释我需要做什么作为一个姿势而不是如何去做。

基本上我想要一个很好的简单的，是的，关于我如何将“foo.zip”的内容传输到“bar.jar”的内容丰富的教程。（“bar.jar”已经包含我不想删除的文件）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:11:22.250

要将*所有*文件从 zip 传输到 jar，您只需将 zip 重命名为 jar，因为 jar 是一种 zip 格式。

编辑：如果要将某些条目从 zip/jar 复制到其他 zip/jar 或将条目复制到现有 zip/jar，则必须使用 迭代输入文件中`ZipInputStream`的条目，读取条目并将它们写入 output `ZipOutputStream`。看看这个教程：http: [//java.sun.com/developer/technicalArticles/Programming/compression/](http://java.sun.com/developer/technicalArticles/Programming/compression/)。它详细解释了所有内容并包含代码示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:10:39.590

您实际上可以将文件从 重命名`foo.zip`为`foo.jar`. 我不是在开玩笑！

您可以使用[java.util.zip](http://docs.oracle.com/javase/6/docs/api/java/util/zip/package-summary.html)读取和写入文件，`zip`文件实际上只是文件。`jar``jar``zip`

# wordpress - 在 wordpress get_posts 上应用过滤器

> ID：11968989
> 
> 赞同：1
> 
> 时间：2012-08-15T12:08:06.920
> 
> 标签：wordpress, add-filter

我希望通过尝试使用以下日期来限制 get_posts() 结果，但它对我不起作用......

谁能告诉我我这样做是否正确？为什么没有按预期执行？

```
add_filter( 'posts_where', 'filter_dates_between' );

$args=array(
        'post_type'=>'log',
        'suppress_filters' => false,
        'post_status'=>'private',
        'numberposts'=> -1,
        'meta_key'=>'_wpcf_belongs_agent_id','meta_value'=>$agentId);

$logs=get_posts($args);

remove_filter( 'posts_where', 'filter_dates_between' ); 
```

这是过滤功能

```
function filter_dates_between( $where =''  ) {
                global $dateFrom,$dateTo,$wpdb;

                $where .= $wpdb->prepare( " AND post_date >= %s", $dateFrom );
                $where .= $wpdb->prepare( " AND post_date <= %s", $dateTo );

                return $where;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:38:34.627

你的代码很好。我认为问题出在您传递的日期被视为字符串。

确保最终采用此示例格式

```
 "AND post_date >= '2009-03-01' AND post_date <= '2009-03-15'" 
```

或者干脆

```
 "AND cast(post_date as datetime) between cast... AND cast... 
```

# javascript - HTML 5 音频：是否有在缓冲持续时间更改时触发的事件

> ID：11968991
> 
> 赞同：2
> 
> 时间：2012-08-15T12:08:22.000
> 
> 标签：javascript, jquery, html, audio

我正在为 HTML 5 音频制作自定义控件。我需要显示缓冲的持续时间。duration 属性给出了元数据的完整持续时间，而 buffered 属性是当前缓冲的持续时间。我需要在缓冲持续时间发生变化时更新它。媒体文件的缓冲持续时间更改时是否会触发事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:21:53.377

看来您正在寻找该`progress`事件。

以下是媒体元素触发的所有事件的描述：http: [//www.w3.org/TR/html5/media-elements.html#mediaevents](http://www.w3.org/TR/html5/media-elements.html#mediaevents)

# c++ - 为什么不能重载类模板？

> ID：11968994
> 
> 赞同：50
> 
> 时间：2012-08-15T12:08:42.647
> 
> 标签：c++, templates, overloading, template-specialization, language-lawyer

阅读[这个问题](https://stackoverflow.com/q/11964089/20984)让我想知道：是否有不允许类模板重载的技术原因？

通过重载，我的意思是有几个具有相同名称但参数不同的模板，例如

```
template <typename T>
struct Foo {};

template <typename T1, typename T2>
struct Foo {};

template <unsigned int N>
struct Foo {}; 
```

编译器设法处理重载函数和函数模板，难道不能将相同的技术（例如名称修改）应用于类模板吗？

起初，我认为单独使用模板标识符时可能会导致一些歧义问题，但唯一可能发生的情况是在将其作为模板模板参数传递时，因此可以使用参数的类型来选择合适的超载：

```
template <template <typename> class T>
void A {};

template <template <unsigned int> class T>
void B {};

A<Foo> a; // resolves to Foo<T>
B<Foo> b; // resolves to Foo<N> 
```

你认为这样的功能有用吗？是否有一些“好的”（即技术）原因导致这在当前的 C++ 中是不可能的？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-15T12:19:18.597

**模板完整指南**（[亚马逊](https://rads.stackoverflow.com/amzn/click/com/0201734842)）的第 12.5 节包含以下引用：

> 您可能想知道为什么只有类模板可以部分特化。原因主要是历史原因。可以为函数模板定义相同的机制（参见第 13 章）。
> 
> 在某些方面重载函数模板的效果是相似的，但也有一些细微的差别。这些差异主要与遇到使用时需要查找主模板这一事实有关。只有在之后才考虑专业化，以确定应该使用哪个实现。
> 
> 相比之下，所有重载的函数模板都必须通过查找被带入一个重载集，它们可能来自不同的命名空间或类。这增加了无意中重载模板名称的可能性。
> 
> 相反，也可以想象允许类模板的一种重载形式。这是一个例子：
> 
> ```
> // invalid overloading of class templates
> template<typename T1, typename T2> class Pair; 
> template<int N1, int N2> class Pair; 
> ```
> 
> 然而，似乎并不迫切需要这种机制。

此外，**C++ 的设计和演变**（[亚马逊](https://rads.stackoverflow.com/amzn/click/com/0201543303)）在第 15.10.3 节中包含此引用

> 因此，我得出结论，我们需要一种“专门化”模板的机制。这可以通过接受一般重载或通过一些更具体的机制来完成。我选择了一个特定的机制，因为我认为我主要是解决由 C 中的不规则性引起的不规则性，并且因为超载的建议总是会引起抗议。我试图保持谨慎和保守；**我现在认为这是一个错误**。最初定义的专业化是一种受限制且异常的重载形式，与语言的其余部分不匹配。

大胆强调我的。我将其解释为函数重载解决方案比类专业化更难实现（并且用户正确）。所以可能没有真正的技术障碍（类似于函数模板部分专业化），而是一个历史事故。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-15T12:21:07.840

您不能“重载”类型参数、非类型参数和模板模板参数，但您可以专门化可变参数模板：

```
template <typename... T>
struct Foo;

template <typename T1>
struct Foo<T1> {};

template <typename T1, typename T2>
struct Foo<T1,T2> {}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-13T07:40:13.250

这已经有一段时间了，但我在搜索时仍然找到了这篇文章。感谢@log0 为我提供了一个良好的开端。这是一个避免需要为所有可能的枚举提供模板特化的解决方案。它确实做了一个假设：您可以根据自身及其基类定义每个模板扩展。（这将在`FooImpl`下面完成）：

```
template <typename... T>
struct Foo;

template<typename T>
struct Foo<T> { /* implementation of base class goes here*/};

template <typename C, typename Base>
struct FooImpl : public Base { /* implementation of derived class goes here */};

template<typename C, typename... Bases>
struct Foo<C, Bases...> : FooImpl<C, Foo<Bases...> > { /*NO IMPLEMENTATION HERE */}; 
```

的使用`FooImpl`打破了否则会导致的模棱两可的递归。然后，这允许声明如下：

```
Foo<int> foo_int;
Foo<int, double> foo_int_double;
Foo<int, float, double> foo_int_float_double; 
```

也许这就是 STL 现在的做法？

# python - 删除包含特定字符串的行

> ID：11968998
> 
> 赞同：28
> 
> 时间：2012-08-15T12:08:54.410
> 
> 标签：python, line

我正在尝试从文本文件中读取文本，读取行，删除包含特定字符串的行（在本例中为“坏”和“顽皮”）。我写的代码是这样的：

```
infile = file('./oldfile.txt')

newopen = open('./newfile.txt', 'w')
for line in infile :

    if 'bad' in line:
        line = line.replace('.' , '')
    if 'naughty' in line:
        line = line.replace('.', '')
    else:
        newopen.write(line)

newopen.close() 
```

我是这样写的，但没有成功。

重要的一件事是，如果文本的内容是这样的：

```
good baby
bad boy
good boy
normal boy 
```

我不希望输出有空行。所以不喜欢：

```
good baby

good boy
normal boy 
```

但像这样：

```
good baby
good boy
normal boy 
```

我应该从上面的代码中编辑什么？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-15T12:43:47.373

您可以像这样使您的代码更简单，更具可读性

```
bad_words = ['bad', 'naughty']

with open('oldfile.txt') as oldfile, open('newfile.txt', 'w') as newfile:
    for line in oldfile:
        if not any(bad_word in line for bad_word in bad_words):
            newfile.write(line) 
```

使用[上下文管理器](http://docs.python.org/release/2.5.2/lib/typecontextmanager.html)和[任何](http://docs.python.org/library/functions.html#any).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T12:11:50.137

您可以简单地不将该行包含到新文件中，而不是进行替换。

```
for line in infile :
     if 'bad' not in line and 'naughty' not in line:
            newopen.write(line) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-31T09:45:11.447

我用它从文本文件中删除不需要的单词：

```
bad_words = ['abc', 'def', 'ghi', 'jkl']

with open('List of words.txt') as badfile, open('Clean list of words.txt', 'w') as cleanfile:
    for line in badfile:
        clean = True
        for word in bad_words:
            if word in line:
                clean = False
        if clean == True:
            cleanfile.write(line) 
```

或者对目录中的所有文件执行相同操作：

```
import os

bad_words = ['abc', 'def', 'ghi', 'jkl']

for root, dirs, files in os.walk(".", topdown = True):
    for file in files:
        if '.txt' in file:
            with open(file) as filename, open('clean '+file, 'w') as cleanfile:
                for line in filename:
                    clean = True
                    for word in bad_words:
                        if word in line:
                            clean = False
                    if clean == True:
                        cleanfile.write(line) 
```

我确信必须有一种更优雅的方式来做到这一点，但这正是我想要的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-09T16:48:51.197

今天我需要完成一个类似的任务，所以我根据我所做的一些研究写了一个完成任务的要点。我希望有人会发现这很有用！

```
import os

os.system('cls' if os.name == 'nt' else 'clear')

oldfile = raw_input('{*} Enter the file (with extension) you would like to strip domains from: ')
newfile = raw_input('{*} Enter the name of the file (with extension) you would like me to save: ')

emailDomains = ['windstream.net', 'mail.com', 'google.com', 'web.de', 'email', 'yandex.ru', 'ymail', 'mail.eu', 'mail.bg', 'comcast.net', 'yahoo', 'Yahoo', 'gmail', 'Gmail', 'GMAIL', 'hotmail', 'comcast', 'bellsouth.net', 'verizon.net', 'att.net', 'roadrunner.com', 'charter.net', 'mail.ru', '@live', 'icloud', '@aol', 'facebook', 'outlook', 'myspace', 'rocketmail']

print "\n[*] This script will remove records that contain the following strings: \n\n", emailDomains

raw_input("\n[!] Press any key to start...\n")

linecounter = 0

with open(oldfile) as oFile, open(newfile, 'w') as nFile:
    for line in oFile:
        if not any(domain in line for domain in emailDomains):
            nFile.write(line)
            linecounter = linecounter + 1
            print '[*] - {%s} Writing verified record to %s ---{ %s' % (linecounter, newfile, line)

print '[*] === COMPLETE === [*]'
print '[*] %s was saved' % newfile
print '[*] There are %s records in your saved file.' % linecounter 
```

链接到 Gist：[emailStripper.py](https://gist.github.com/Azlirn/a7107212401f1865106a5e1476303f3e)

最好的，阿兹

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-15T12:15:50.610

`else`只连接到最后一个`if`。你想要`elif`：

```
if 'bad' in line:
    pass
elif 'naughty' in line:
    pass
else:
    newopen.write(line) 
```

另请注意，我删除了行替换，因为无论如何您都不会写这些行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-27T18:26:02.853

使用 python-textops 包：

```
from textops import *

'oldfile.txt' | cat() | grepv('bad') | tofile('newfile.txt') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-16T12:23:47.480

正则表达式比我使用的公认答案（对于我的 23 MB 测试文件）要快一些。但是里面没有很多。

```
import re

bad_words = ['bad', 'naughty']

regex = f"^.*(:{'|'.join(bad_words)}).*\n"
subst = ""

with open('oldfile.txt') as oldfile:
    lines = oldfile.read()

result = re.sub(regex, subst, lines, re.MULTILINE) 

with open('newfile.txt', 'w') as newfile:
    newfile.write(result) 
```

[![在此处输入图像描述](../Images/edeb0be5948c731f6c26f0594d7cf949.png)](https://i.stack.imgur.com/xv76v.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-31T11:46:04.390

试试这个效果很好。

```
import re

text = "this is bad!"
text = re.sub(r"(.*?)bad(.*?)$|\n", "", text)
text = re.sub(r"(.*?)naughty(.*?)$|\n", "", text)
print(text) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-15T12:27:14.247

```
to_skip = ("bad", "naughty")
out_handle = open("testout", "w")

with open("testin", "r") as handle:
    for line in handle:
        if set(line.split(" ")).intersection(to_skip):
            continue
        out_handle.write(line)
out_handle.close() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-09T21:09:33.373

```
bad_words = ['doc:', 'strickland:','\n']

with open('linetest.txt') as oldfile, open('linetestnew.txt', 'w') as newfile:
    for line in oldfile:
        if not any(bad_word in line for bad_word in bad_words):
            newfile.write(line) 
```

这`\n`是换行符的 Unicode 转义序列。

# android - Android：如何在 ActionBarSherlock 选项卡中加载 Activity？

> ID：11968999
> 
> 赞同：1
> 
> 时间：2012-08-15T12:08:59.217
> 
> 标签：android, android-intent, tabs, actionbarsherlock

我从 ActionBarSherlock 开始。

我知道如何在没有此库的情况下在选项卡中加载内容（例如其他活动），但我还没有找到如何使用 Sherlock 来执行此操作。

在正常情况下，我通常会创建一个新 Intent 并通过“setContent”加载它：

```
TabHost.TabSpec spec;
intent = new Intent().setClass(this, SQLFavouritesFragmentActivity.class);
spec.setContent(intent); 
```

在 Sherlock 中，我看到了一个名为“onTabSelected”的方法，但我不知道如何使用它，也不知道如何与选项卡关联。

有什么建议、想法或教程吗？

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:31:52.647

作为选项卡内容的活动已被弃用。ActionBarSherlock 或本机操作栏不支持在选项卡中托管活动。

如果将相关活动转换为片段，则可以在选择选项卡时将片段加载到 UI 中。