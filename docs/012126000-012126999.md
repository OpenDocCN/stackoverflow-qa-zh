# StackOverflow 问答 12126000-12126999

# css - 简单的 Bootstrap 响应式标题（导航栏）在调整大小时下降

> ID：12126005
> 
> 赞同：1
> 
> 时间：2012-08-25T22:02:53.460
> 
> 标签：css, twitter-bootstrap, responsive-design

当您使用宽浏览器窗口查看页面时，它看起来不错。如果调整窗口大小使其变窄，标题会突然下降 60 像素，这等于主体的 padding-top。为了制作这个页面，我从一个简单的 Bootstrap 模板开始，去掉了大部分内容。为什么会这样？

![截屏](../Images/a112bf2e0f7fff0256adc1b8eff0c15a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T04:23:35.700

事实证明，问题在于自定义主体 css 需要位于 bootstrap.css 文件之前：

```
<style type="text/css">
    body {
        padding-top: 60px;
        padding-bottom: 40px;
    }
</style>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.0/css/bootstrap-combined.min.css" rel="stylesheet"> 
```

# java - 为什么这个 Ant 错误不会阻止整个系统（Java Pet Store）运行？

> ID：12126006
> 
> 赞同：1
> 
> 时间：2012-08-25T22:03:05.727
> 
> 标签：java, ant, glassfish, build-error

我正在研究 Java Pet Store 项目（有点过时）。运行设置时，我必须运行`ant`我收到此错误：

```
C:\LatestPS\trunk\ws\apps\petstore>ant
Buildfile: C:\LatestPS\trunk\ws\apps\petstore\build.xml

default-ear:

-pre-compile:

bpp-actual-compilation:
     [echo] Compiling petstore
    [mkdir] Created dir: C:\LatestPS\trunk\ws\apps\petstore\build\web\WEB-INF\cl
asses
    [javac] Compiling 40 source files to C:\LatestPS\trunk\ws\apps\petstore\buil
d\web\WEB-INF\classes
    [javac] C:\LatestPS\trunk\ws\apps\petstore\src\java\com\sun\javaee\blueprint
s\petstore\model\CatalogFacade.java:39: package javax.servlet.annotation does no
t exist
    [javac] import javax.servlet.annotation.WebListener;
    [javac]                                ^
    [javac] C:\LatestPS\trunk\ws\apps\petstore\src\java\com\sun\javaee\blueprint
s\petstore\model\CatalogFacade.java:41: cannot find symbol
    [javac] symbol: class WebListener
    [javac] @WebListener()
    [javac]  ^
    [javac] 2 errors

BUILD FAILED
C:\LatestPS\trunk\ws\bp-project\command-line-ant-tasks.xml:78: Compile failed; s
ee the compiler error output for details.

Total time: 2 seconds

C:\LatestPS\trunk\ws\apps\petstore> 
```

之后我做了其他设置（asadmin start-database，然后是 asadmin start-domain domain1，然后是 ant deploy）。

但最后我去了最终的网页目的地（`http://localhost:8080/petstore/faces/index.jsp`），它工作（图片）！

![在此处输入图像描述](../Images/8a46c639dee4d14f57eb2f37ac27843d.png)

这是 build.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2006 Sun Microsystems, Inc.  All rights reserved.  You may not modify, use, reproduce, or distribute this software except in compliance with the terms of the License at: 
 http://developer.sun.com/berkeley_license.html
 $Id: build.xml,v 1.56 2007-03-16 15:29:15 basler Exp $ -->

<project name="petstore" default="default" basedir=".">
    <description>Builds, tests, and runs the project petstore.</description>

    <property name="is.war.module" value="true"/>
    <property name="default.javac.target" value="1.5"/>
    <property name="default.javac.source" value="1.5"/>
    <import file="bp-project.xml" />

    <available property="bp-ui-5-jar.exists" file="lib/bp-ui-5.jar"/>    
    <target name="create-bp-ui-5-jar" depends="init" unless="bp-ui-5-jar.exists">
        <ant dir="${bp-ui-5.home}" inheritAll="false" inheritRefs="false"/>
        <!-- copy appropriate jars that are needed in petstore -->
        <copy todir="lib/">
            <fileset dir="${bp-ui-5.home}/dist"/> 
        </copy>
    </target>    

    <target name="-post-compile" depends="init">
        <!-- copy property files into build directory -->
        <copy todir="${build.classes.dir}" overwrite="true">
            <fileset dir="src/java">
                <include name="**/*.properties"/>
            </fileset>
        </copy>
        <mkdir dir="${build.web.dir}/WEB-INF/lib"/>
        <copy todir="${build.web.dir}/WEB-INF/lib">
            <fileset file="./build/catalog-persistence.jar"/>
            <fileset file="${file.reference.lucene-core-2.0.0.jar}"/>
            <fileset file="${file.reference.bp-ui-5.jar}"/>
            <fileset file="${file.reference.shale-remoting.jar}"/>
            <fileset file="${file.reference.commons-fileupload-1.1.1.jar}"/>
            <fileset file="${file.reference.commons-io-1.2.jar}"/>
            <fileset file="${file.reference.commons-logging-1.1.jar}"/>
            <fileset file="${file.reference.jdom.jar}"/>
            <fileset file="${file.reference.rome-0.8.jar}"/>
            <fileset file="${file.reference.rome-fetcher-0.7.jar}"/>
        </copy>        

        <copy file="src/conf/persistence.xml" todir="${build.web.dir}/WEB-INF/classes/META-INF"/>

        <antcall target="insert-proxy-settings"/>
    </target>

    <target name="insert-proxy-settings">
        <copy todir="${build.web.dir}/WEB-INF/" file="web/WEB-INF/web.xml"/>
        <concat destfile="${build.dir}/proxy.properties">proxy.host=${proxy.host}
            proxy.port=${proxy.port}
            <filterchain>
                <expandproperties/>
            </filterchain>
        </concat>
        <!-- Replace value of the proxy settings in web.xml for Google maps -->
        <replace file="${build.web.dir}/WEB-INF/web.xml" propertyFile="${build.dir}/proxy.properties">          
            <replacefilter token="@@proxy.host@@" property="proxy.host"/>
            <replacefilter token="@@proxy.port@@" property="proxy.port"/>
        </replace>        
    </target>

    <target name="unzipIndexes">
        <unzip src="lib/petstoreIndexes.zip" dest="${javaee.domaindir}/lib/petstore" overwrite="true"/>
    </target>

    <target name="setup" depends="init, create-bp-ui-5-jar">
        <mkdir dir="${javaee.domaindir}/lib/petstore/images"/>
        <ant dir="." antfile="setup/setup.xml" target="setup" inheritAll="false" inheritRefs="false"/>
        <antcall target="unzipIndexes"/>
    </target>

    <target name="unsetup">
        <ant dir="." antfile="setup/setup.xml" target="unsetup" inheritAll="false" inheritRefs="false"/>
    </target>

    <target name="checkLines">
        <fixcrlf srcdir="./src" tab="remove" tablength="4" eol="unix" includes="**/*.properties,**/*.jsp,**/*.html,**/*.sh,**/*.java,**/*.xml" excludes="**/ja/**" />
    </target>
</project> 
```

为什么它让它运行，但在它说失败之前？如何修复该错误消息（或者我什至需要？）？

# ruby-on-rails - 安装 devise + activeadmin 后缺少默认设计路由

> ID：12126008
> 
> 赞同：1
> 
> 时间：2012-08-25T22:03:12.560
> 
> 标签：ruby-on-rails, devise, activeadmin

我最近为一个新项目启动了 Rails。我尝试使用[本指南](http://dan.doezema.com/2012/02/how-to-implement-a-single-user-model-with-rails-activeadmin-and-devise/)安装设计和活动管理员，但似乎缺少默认设计路线。我可以去 /users/sign_in 登录，但 users/sign_up 不起作用。Rake 路由不显示任何注册路由。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:16:12.747

出于某种原因，我不得不重新运行活动的管理设计生成器

# css - 在不知道宽度或高度的情况下以绝对定位居中

> ID：12126015
> 
> 赞同：12
> 
> 时间：2012-08-25T22:04:19.343
> 
> 标签：css, overlay, css-position

我正在创建一个叠加层。有一个 div 用 50% 透明黑色覆盖整个页面。另一个 div 必须居中，垂直和水平到屏幕。它必须绝对定位。无论如何在不知道高度/宽度的情况下这样做吗？它将根据屏幕分辨率而变化。当您知道高度和宽度时，我熟悉绝对定位居中技术，（即left：50％；margin-left：-150px；top：50％；margin-top：-300px；）......但同样，我可以在不知道高度/宽度的情况下执行此操作吗？这是代码：

```
.hiddenBg {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: black;
filter:alpha(opacity=50);
-moz-opacity:0.5;
-khtml-opacity: 0.5;
opacity: 0.5;
z-index: 10000;
/*display: none;*/
}

.hiddenBox {
position: absolute;
left: 50%;
margin-left: -200px;
top: 50%;
margin-top: -100px;
width: auto;
height: auto;
background-color: #FF7F00;
border: solid 10px white;
z-index: 10001;
text-align: center;
/*display: none;*/
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-09-25T10:24:23.933

偶然发现了这个老问题。我认为你现在有两种不同的可能性来做到这一点（浏览器支持正在增长）只用 CSS，不需要 JavaScript：

**1\. 使用 flexbox**

```
<div class="hiddenBg">
    <div class="hiddenBox">
       Hello
    </div>
</div>

<style>
   .hiddenBg {
      display: flex;
      align-items: center;
      justify-content: center;
   }
</style> 
```

**2.绝对+负变换翻译**

```
.hiddenBox {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
} 
```

在前三行中，对象将被放置在父容器的中间，`top`并`left`设置为`50%`。不幸的是，这适用于对象的左上角。所以它看起来不会在视觉上居中。第四行通过将中心点转换到对象的中间来纠正这一点。请注意，它的父容器需要相对定位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-10T10:13:06.473

您可以使用父级`div`和通用 CSS 属性来实现。它的优点是可以在任何地方工作，不需要 JS 或 flexbox：

```
<div id="parent">
    <div id="child">Hello, I am div !</div>
</div>

<style>
    #parent {
        position: relative;
        width: 100%;
        text-align: center;
    }

    #child {
        display: inline-block;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T22:35:49.757

你可以用javascript来做到这一点。`.hiddenbox`使用您熟悉的技术动态获取宽度和高度并正确定位它。还有一个选项可以使用，请查看此处的示例：

```
body {
  margin: 0;
}

#fade {
  background: #ccc;
  width: 600px;
  height: 200px;
  display: table-cell;
  text-align: center;
  vertical-align: middle;
}

#content {
  background: #fff;
  border: 1px solid #ff0000;
  padding: 20px;
  display: inline-block;
}
```

```
<div id="fade">
  <div id="content">
    Something goes here...
  </div>
</div>
```

[在 jsFiddle 上查看](http://jsfiddle.net/XyYND/)

但在此示例中，您需要知道父容器的确切宽度和高度（`.hiddenBg`在您的情况下），它不适用于 % 单位。

如果您可以在此任务中使用 javascript - 请告诉我们并可能`javascript`在您的问题中添加标签。我们可以帮助您处理这部分 js 代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-22T12:10:23.527

```
.hiddenBox {
  position: absolute;
  left: 50%;
  transform: translateX(-50%)
} 
```

# cakephp-2.0 - cakephp2.0 选择

> ID：12126023
> 
> 赞同：0
> 
> 时间：2012-08-25T22:05:57.877
> 
> 标签：cakephp-2.0

我是 Cakephp 2.0 的新手，但我想查看两个表。我有以下表格：

**带有记录的 hpsas：ciname、位置、状态
带有记录的 ldaps：ciname、状态**

我要使用的查询是：

`select hpsas.ciname, hpsas.status, ldaps.ciname, ldaps.status from cmdb.hpsas, cmdb.ldaps where hpsas.ciname = ldaps.ciname;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:06:12.603

您是否想要一个有效的查询，或者您想知道如何为您的数据建模？

你现在查询工作吗？看起来您的`SELECT`声明（ciname）中的一个字段是多余的，因为您正在加入它。

为什么不：

```
SELECT hpsas.ciname AS ciname, hpsas.status AS hstatus, ldaps.status as lstatus 
FROM cmdb.hpsas, cmdb.ldaps 
WHERE hpsas.ciname = ldaps.ciname; 
```

这样你就会得到类似的东西：

```
+-----------------------------------+
| ciname | hstatus | lstatus        |
+-----------------------------------+
| [data] | [data]  | [data]         |
+-----------------------------------+ 
```

# plone - 克隆：默认首页没有添加新菜单

> ID：12126024
> 
> 赞同：1
> 
> 时间：2012-08-25T22:05:58.717
> 
> 标签：plone

我们使用的是 Plone 4.2（但问题也适用于早期版本）。

我们有一个名为 news 的文件夹，其中包含我们所有的新闻项目，并在导航中有一个 News 选项卡以转到 News default 。我们通过配置 Zope Management Interface -> Plone site at / -> Properties -> default_page 将站点的默认首页设置为 News 文件夹。这是因为每次用户第一次访问我们的网站或点击我们网站顶部的网站标题时，他都会看到新闻默认视图。但是，此新闻默认视图的顶部没有“添加新”菜单。当用户单击导航的“新闻”选项卡时，“新闻”默认视图具有“添加新”菜单，供用户将新新闻项添加到文件夹中。

是否可以使网站的默认首页显示与导航的“新闻”选项卡相同的显示？

非常感谢您的期待。

厘米gui

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:49:56.100

在 siteroot 添加内容类型“链接”，输入您选择的标题并将目标设置为“/yourSiteId/yourNewsFolderId”，确保已发布，将链接设置为您网站的默认视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T21:49:48.503

如果您无法获得内容类型的“添加”选项，您可以使用 TALES 条件来控制哪些人可以查看您网页上的特定项目。围绕你想要控制的东西。一个例子，它没有向匿名用户显示“添加事件”链接。

```
<span tal:condition="not: context/@@plone_portal_state/anonymous">
                <a tal:attributes="href string:../createObject?type_name=Event" tal:content="string:add new event"></a>
            </span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T21:45:23.417

如果使用灵巧：

当您第一次进入 ZMI 单击“属性”选项卡并将“默认页面”更改为您要显示的页面。
这可以是一个文件夹项目，并且将具有您在创建新内容类型时定义的任何“添加”权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T05:36:08.777

不，这是不可能的——至少在对代码和配置进行一些自定义时是不可能的。“你所看到的”和“你能做什么”通常与特定的接口或 portal_types 相关联，并且基本上不支持使某些东西以与在另一个上下文中相同的方式出现。

# python-3.x - 如何控制 Py3k 如何处理字节和 unicode 中的转义字符

> ID：12126026
> 
> 赞同：0
> 
> 时间：2012-08-25T22:06:32.837
> 
> 标签：python-3.x

我正在使用python 3.2，它处理转义字符的方式似乎几乎......不确定。我能让它们真正作为换行符（而不是作为转义符）工作的唯一方法是打印它们。行为如下所示：

```
>>> a = 'a\nb'
>>> a
'a\nb'
>>> a.encode('ascii')
b'a\nb'
>>> print(a)
a
b
>>> print(a.encode('ascii'))
b'a\nb'
>>> print(str(a.encode('ascii')))
b'a\nb' 
```

我确信这其中的复杂性记录在某处，我只是找不到它。也许某处有一个字节->字符串方法与编码（解码？）相反。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T22:29:59.363

它是完全确定性和简单的。不过，您需要注意字节和 unicode 字符串之间的区别。阅读Ned Batchelder 的[Pragmatic Unicode](http://bit.ly/unipain)。

`a`指由三个字符组成的 unicode 字符串，因此`a`对其进行评估，Python REPL 会尝试使用`print()`它——第一步是将其转换为 a `str`（仅`return self`用于字符串）。根据与标准输出（例如您的终端）关联的编码，将生成的字符串转换为字节，并将这些字节发送到那里。您的终端根据它使用的编码来解释它接收到的字节。

`a.encode('ascii')`使用 ASCII 编码将 unicode 显式转换为字节序列。其结果是一个字节对象，该结果`print`由 Python REPL 'd'。同样，第一步是将其转换为字符串——因为字节不是字符串，并且两者之间的隐式转换是非常有害的，正如 Python 2 编码/解码错误所证明的那样，你只会得到`repr`同样给你的东西：一个等价的字符串到 Python 源代码中的字节文字。然后像以前一样打印此字符串，相同的区别。

在`>>> print(a)`中，您调用`print`自己的结果与上述相同，结果`print`是`None`Python REPL 不会打印它。与`>>> print(a.encode('ascii'))`and相同`>>> print(str(a.encode('ascii')))`，您只需显式触发打印并`str`预先进行转换，而不是隐式进行。

确实存在 的逆`str.encode`，它确实被称为`decode`并且是`bytes`对象的方法。所以`some_str.encode(E).decode(E)`可以是无操作的。它还可能丢失信息或沿途更改字符串（例如，通过替换未知字符），或者如果您不要求它丢失信息，则抛出异常。

如果您有以某种编码表示某些字符串的字节，则可以将它们用于 I/O。事实上，这是执行 I/O 的“本机”方式——所有 I/O 和所有网络都是字节。但`print`适用于字符串。相反，在文件 I/O（包括标准输出）的情况​​下，您希望以二进制模式打开它们并使用该`.write`方法。具体来说`sys.stdout`，默认情况下使用文本模式，但您可以访问二进制版本作为[`sys.stdout.buffer`](http://docs.python.org/py3k/library/sys.html#sys.stdout). 当然，如果您发送的字节是使用不同的编码创建的（或者根本不打算作为文本），您会得到胡言乱语。

# javascript - Nodejs - 将 '{a:1}' 样式的字符串（由 `util.format()` 生成）转换为对象

> ID：12126027
> 
> 赞同：0
> 
> 时间：2012-08-25T22:06:51.357
> 
> 标签：javascript, node.js

`util.format()`生成`'{a:1}'`不是有效 JSON 的 -style 字符串。（注意键没有用双引号括起来。）如何将这种字符串转换回对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:12:05.797

`eval`如果它绝对值得信赖，请使用：

```
eval('(' + str + ')'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:39:24.163

除非您有充分的理由不这样做，否则您应该使用[`JSON.stringify()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)将对象转换为字符串并[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)从字符串重新构造对象。

# model-view-controller - 使用视图获取引用值——Yii 的正确 MVC？

> ID：12126030
> 
> 赞同：0
> 
> 时间：2012-08-25T22:07:38.000
> 
> 标签：model-view-controller, yii

正如您从下面的两个片段中猜到的那样，我将在显示部件详细信息时引用类别表。

## 零件型号：

```
public function relations()    {
    return array(
        'category' => array(self::BELONGS_TO, 'Category', 'fid_caty2') );
} 
```

## 类别型号：

```
public function relations()    {
    return array('part' => array(self::HAS_MANY, 'Part', 'fid_caty2') );
} 
```

我已经学习了这种在视图中呈现引用值的方法：

```
echo CHtml::encode($data->category->name_caty2); 
```

我也找到了一些其他方法，但它们都发生在视图中。既然模型设置了关系，为什么不应该将引用的值包含在`CActiveRecord`模型的中？我认为这正是我们为模型保留的那种嘎吱声。在视图中解决它似乎很奇怪，加上很多额外的工作。

如果我是对的，我该如何让它在模型视图中工作？还是我对 MVC 的理解需要修正？

## 这个怎么样

```
public function loadModel($id)
{   $model=Part::model()->findByPk($id);
    if($model===null)
        throw new CHttpException(404,'The requested page does not exist.'); 
    return $model;
} 
```

这是在控制器页面中。我可以在加载时将我的引用值偷偷带入模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:51:02.747

Yii 使用延迟加载，这意味着它只加载它需要的模型，因此只查询它需要的表以获取 set 语句。

例如，当您在控制器中拉出您的零件模型时；

```
$data = Part::model()->findAll($criteria); 
```

您不会拉关系，因为它不是明确需要的，并且正如您已经提到的，您的代码在视图中；

```
$data->category->name_caty2; 
```

将执行另一个查询，并且您不想在视图中执行此操作，您的问题是正确的，业务逻辑不应该出现在视图中。

解决这个问题的方法是使用 Yii 的预加载（与上面提到的延迟加载相反）。如[手册](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#performing-relational-query)中所述；

> 急切加载方法检索相关的 AR 实例以及主要的 AR 实例。这是通过使用 with() 方法和 AR 中的 find 或 findAll 方法之一来完成的。例如，
> 
> $posts=Post::model()->with('author')->findAll();

所以在你的情况下，你需要使用；

```
$data = Part::model()->with('category')->findAll($criteria); 
```

# javascript - 从 Backbone 中的自定义 BaseView 扩展时，为什么“事件”不会绑定到视图？

> ID：12126031
> 
> 赞同：0
> 
> 时间：2012-08-25T22:07:48.330
> 
> 标签：javascript, events, inheritance, backbone.js

我正在尝试添加一个`BaseView`为我的模块中的所有主干视图执行一些初始化。

这是一个[小提琴](http://jsfiddle.net/nupul/fTrSj/2/)，代码在下面复制

创建一个自定义 BaseView 并让它订阅调度程序上的“关闭”事件。让它成为所有儿童创作的一部分。

```
var dispatcher = _.clone(Backbone.Events);

var ctor = Backbone.View;
var BaseView = Backbone.View.extend({
    //override Backbone's constructor
    constructor: function(options) {

        ctor.apply(this, arguments);

        dispatcher.on('close', this.close, this);

    },

    close: function() {

        console.log(this.cid);

    }

});

//Is this really needed??
BaseView.prototype.constructor = Backbone.View; 
```

创建继承自 BaseView 的子视图：

```
var View = BaseView.extend({
    el: '#clickholder',

    initialize: function() {
        _.bindAll(this);
    },

    //Events not bound?
    events: {
        "click #clicker": "clicked"
    },

    //never called :(
    clicked: function(e) {
        alert("clicked button");
    }
});

new View();​ 
```

这是HTML：

```
<div id="clickholder">
<button id="clicker">Clicker</button>
</div>​ 
```

**问题：**如果单击按钮，则永远不会触发事件并且永远不会显示警报。我不确定问题是什么。我已经花了很长时间，但无法理解为什么`events`不绑定到`View`? 我究竟做错了什么？

PS：这是基于[这里](https://stackoverflow.com/a/11961470/609074)的答案。我专门创建了一个 BaseView 类，以便不会对我的应用程序中的所有主干视图产生全局影响，而只是将其限制在特定模块中

**更新**：根据@mu下面的答案修复小提琴。将按钮包装在 div 中似乎也不能解决问题。为了简化，我错误地将视图直接绑定到按钮。在我的主应用程序中，按钮位于视图的 el 中，因此在上述 BaseView 到位之前，委派工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:26:44.840

你有几个问题：

1.  您的 Backbone 代码正在文档中运行，`<head>`因此它没有`#clicker`运行时间，因此没有任何东西可以绑定事件。
2.  您的视图`el`应该是，`#clicker`但您的事件正试图绑定到`#clicker` *inside* `el`。来自[精美手册](http://backbonejs.org/#View-delegateEvents)：

    > **委托事件** `delegateEvents([events])`
    > 
    > [...] 省略`selector`导致事件绑定到视图的根元素 ( `this.el`) 的原因。

    如果你想绑定到点击`el`，那么你想要：

    ```
    events: {
        "click": "clicked"
    } 
    ```

更新的演示：http: [//jsfiddle.net/ambiguous/fTrSj/](http://jsfiddle.net/ambiguous/fTrSj/)

# php - 强制php下载文件，显示未知符号

> ID：12126033
> 
> 赞同：-1
> 
> 时间：2012-08-25T22:07:58.873
> 
> 标签：php, header, download

当我运行此代码时，我在强制 php 下载文件时遇到问题：

```
 $file = "storage/".$filename;
  header('Content-Description: File Transfer');
  header('Content-Type: '.$mimetype);
  header('Content-Disposition: attachment; filename='.basename($originalfilename));
  header('Content-Transfer-Encoding: binary');
  header('Expires: 0');
  header('Cache-Control: must-revalidate');
  header('Pragma: public');
  header('Content-Length: ' . filesize($file));
  ob_clean();
  flush();
  readfile($file);
  exit(); 
```

它不会强制浏览器下载文件，而是显示文件的所有内容。例如，当我想强制浏览器下载 test.png 时，浏览器本身会显示很多未知符号（exp. �q�M�6�%V�һK..）。如何强制浏览器下载文件而不是显示它？

我使用了实时 HTTP 标头，当我单击此页面中的下载按钮时： [http ://www.helios.ir/get.php?file=17/dl.php?name=56379948c6df5e49d3073aee14358e3fc98ba5ae.jpg](http://www.helios.ir/get.php?file=17/dl.php?name=56379948c6df5e49d3073aee14358e3fc98ba5ae.jpg)

它显示了这个标题：

```
----------------------------------------------------------
http://www.helios.ir/download.php?file=17.jpg&name=56379948c6df5e49d3073aee14358e3fc98ba5ae.jpg

GET /download.php?file=17.jpg&name=56379948c6df5e49d3073aee14358e3fc98ba5ae.jpg HTTP/1.1
Host: www.helios.ir
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
Referer: http://www.helios.ir/get.php?file=17/dl.php?name=56379948c6df5e49d3073aee14358e3fc98ba5ae.jpg
Cookie: mfh_mylang=en; mfh_sess_id=effccfb2429a54b6f26ef2f155144c98; mfh_logined=0; mfh_uid=0; mfh_last_click=1345470635; __utma=44342077.1613075140.1345761327.1345912829.1345927090.14; __utmz=44342077.1345910409.12.11.utmcsr=localhost|utmccn=(referral)|utmcmd=referral|utmcct=/share6/get.php; __utmb=44342077.18.10.1345927090; PHPSESSID=bb18789f8011836092f4e2d14aa3118d; __utmc=44342077

HTTP/1.1 200 OK
Date: Sat, 25 Aug 2012 22:25:01 GMT
Server: Apache/2.2.22 (CentOS)
X-Powered-By: PHP/5.2.17
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html; charset=UTF-8
---------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:34:04.517

在您刚刚发布的响应标头中没有`Content-Disposition: attachment`出现...您可能应该挂断`ob_clean()`电话（或者，至少，将其移到`header()`电话之前*）。

此外，这`flush()`完全没有意义（刷新空缓冲区有什么意义？）。去掉它。

* * *

*前提是你事先打电话`ob_start()`- 通常在你的脚本开始

# jquery - jQuery 扩展 - 目标对象不被扩展

> ID：12126040
> 
> 赞同：0
> 
> 时间：2012-08-25T22:09:50.137
> 
> 标签：jquery, extend

```
var collection = $('ul li');
collection.each(function (index) {
    var test = $.extend($(this), {
    // var test = $.extend(collection.eq(index), {
        someProperty: 'val'
    });
    console.log(test.someProperty);
});
console.log(collection.eq(0).someProperty); 
```

和测试：http: [//jsfiddle.net/simo/G3yCr/1/](http://jsfiddle.net/simo/G3yCr/1/)

我正在尝试扩展 jquery 集合中的每个对象。我想直接从集合中的每个项目访问属性。

问题是为什么`collection.eq(index)`对象没有得到扩展。注释行是替代的，并给出相同的结果。

规范：[http ://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:12:35.250

在您的`.each`函数`this`中指的是集合中的单个 DOM 元素，而不是 jQuery 对象。

然后，当您调用时`$(this)`，您正在创建一个*新*的jQuery 对象，它不是集合中的那个。

使这个附加属性保持不变的最简单方法是将其添加到元素本身。或者用于`.data()`存储和检索附加属性。

在 ES5 浏览器上，你可以使用（可能是讨厌的）hack 让你`.data()`看起来像一个真实的财产：

```
(function($) {
    Object.defineProperty($.fn, 'foo', {
        get: function() {
            return $(this).data('foo');
        },
        set: function(v) {
            $(this).data('foo', v);
        }
    });
})(jQuery);

$('#d1').foo = 'bar';
$('#d2').foo = 'wot';

alert([$('#d1').foo, $('#d2').foo]); 
```

请注意（AFAIK）没有其他 jQuery 代码添加属性（除了`.length)`在 jQuery 对象上。使用此技巧可能会使其他开发人员感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:19:03.693

简单的。只需阅读[jQuery Plugin Authoring](http://docs.jquery.com/Plugins/Authoring)：

```
$.fn.someProperty = 'val';
var collection = $('ul li');
console.log(collection.eq(0).someProperty);​ 
```

不需要对整个集合进行迭代。

# audio - 当合成中存在音频时，Avplayer 不播放视频

> ID：12126044
> 
> 赞同：2
> 
> 时间：2012-08-25T22:10:15.723
> 
> 标签：audio, video, avplayer, avmutablecomposition, avvideocomposition

如果我将音频添加到合成中，我一直在努力解决 avplayer 不显示视频资产的问题。

这是现在的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    AVMutableComposition *composition = [[AVMutableComposition alloc] init];

    AVURLAsset *videoAsset = [[AVURLAsset alloc]initWithURL:[NSURL URLWithString:@"http://xxx.xxx.xxx/xxx.mp4"] options:nil];
    AVURLAsset *audioAsset = [[AVURLAsset alloc]initWithURL:[NSURL URLWithString:@"http://xxx.xxx.xxx/xxx.mp3"] options:nil];

    AVMutableCompositionTrack *cmpTrackVideo = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    AVMutableCompositionTrack *cmpTrackAudio = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

    AVAssetTrack *clipVideo = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVAssetTrack *clipAudio = [[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

    [cmpTrackVideo insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) ofTrack:clipVideo atTime:kCMTimeZero error:nil];
    [cmpTrackAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration) ofTrack:clipAudio atTime:kCMTimeZero error:nil];

    AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:composition];
    self.player = [[AVPlayer alloc] initWithPlayerItem:playerItem];

    AVPlayerLayer * playerLayer = [AVPlayerLayer playerLayerWithPlayer:player];
    [playerLayer setFrame:self.view.bounds];
    [self.view.layer addSublayer:playerLayer];

    [self.player play];
} 
```

我也尝试过使用`playerItem.videoComposition`等等`avmutablevideocompositioninstruction`......但没有运气。

有没有人知道可能导致这种情况的原因？

我会对任何输入、提示、示例等感到满意。

最好的问候，尼诺

# iphone - 将数组定义为目标 c 中的全局变量

> ID：12126045
> 
> 赞同：1
> 
> 时间：2012-08-25T22:10:16.130
> 
> 标签：iphone, objective-c, nsmutablearray, global-variables

我需要将一个数组定义为全局变量，我可以在我的代码中使用它该数组必须具有 10 个随机数的数据，该数据必须在整个代码中固定我在下面做了什么，但在 .h 中没有运气@interface 之后的文件我把这一行

```
NSMutableArray *globalarray; 
```

在.m 文件中我把它放在@implemention 文件之后

```
- (void)glo {
if (!globalarray) {
 globalarray= [NSMutableArray  globalarray];
    for (int x = 0; x < 10; x++) {
        [globalarray addObject:[NSNumber numberWithInt: arc4random()%200]];
    }}} 
```

在同一个 .m 文件中，我在 NSLOG 中调用了数组，如下所示

```
-(IBAction)click_one:(id)sender{

    NSLog(@"%@",globalarray);}

-(IBAction)click_two:(id)sender{

    NSLog(@"%@",globalarray);} 
```

NSLOG 在控制台中返回 null 任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:29:55.683

这一行：

```
globalarray= [NSMutableArray  globalarray]; 
```

假设 NSMutableArray 上有一些方法称为“globalarray”。没有。你要：

```
globalarray = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:36:48.213

```
#import "AppDelegate.h"

// in viewDidLoad
self.del = (AppDelegate*) [[UIApplication sharedApplication] delegate];

// array now available as
NSLog(@"%@", del.dataArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T03:23:03.830

问题是您分配了自动释放分配。

```
 GlobalArray=[NSMutableArray array]; is same declarating it as.  

   GlobalArray=[[[NSMutableArray alloc]init]autorelease]; 
```

// 所以这里的引用计数在分配和标记它时增加 1 autorelease 使其引用计数为 0。当它的引用计数变为 0 时，它被选择进行垃圾回收，所以你需要保留它，像这样

```
 GlobalArray=[[NSMutableArray array]retain];// when retaining its reference count increases by 1 
```

需要时释放它。

# html - 无法删除浮动元素的填充/边距

> ID：12126046
> 
> 赞同：0
> 
> 时间：2012-08-25T22:10:19.230
> 
> 标签：html, css, margin, padding

我有浮动元素，即使使用 CSS 重置，我也无法删除填充和/或边距。

请参阅[http://ogabrielsantos.com.br/dev/](http://ogabrielsantos.com.br/dev/)，当悬停`Ilustradores`菜单时，每个图像都需要没有填充、边距等。

我可以在这里粘贴一些代码，但是，我认为在网站上看更容易和快速，因为我必须在这里放一个大的 css/html 块。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:25:48.037

`display:block`在菜单中的图像上使用。默认情况下，图像是内联元素，它们与文本基线对齐（它们的底线在文本基线上），并且在基线下方有几个像素，这就是您所看到的。

# mysql - 数据库字段（GROUP_CONCAT）作为数组

> ID：12126047
> 
> 赞同：2
> 
> 时间：2012-08-25T22:10:36.173
> 
> 标签：mysql, arrays, join, group-concat

我的桌子..

**文章**字段：

> *   ID
> *   姓名

**猫**领域：

> *   ID
> *   姓名

**article_cats**字段：

> *   ID
> *   article_id
> *   cat_id

我有这个sql：

```
SELECT
  a.id AS article_id ,
  a.name AS article_name ,
  COUNT( c.id ) AS num_categories ,
  GROUP_CONCAT( c.name ) AS categorie_names
 FROM
  articles AS a
 LEFT JOIN
  article_cats AS ac
 ON
  ( a.id = ac.article_id )
 LEFT JOIN
  cats AS c
 ON
  ( ac.cat_id = c.id )
 GROUP BY
  a.id 
```

它提供了这个表结构：

![数据库结构](../Images/f5e1e175c722cbf60502b0fa5d5e37ae.png)

我需要的是，在数组中获取类别 ID 和名称，因此 categorie_names 将是一个数组，其中每个类别都有字段 cat_id 和 cat_name。

这可以用 mysql 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T22:42:35.007

在数据库中，数组表示表。如果您想要数组格式的数据，则最好将值存储在单独的临时表中。

喜欢

```
article_id, category_id, category_name
1           1            Cat1
2           1            Cat1
3           2            Cat2
3           1            Cat1 
```

或者您必须在 group_concat 中使用串联

```
GROUP_CONCAT(cast(concat(c.id,\': \',c.name) AS char)SEPARATOR \', \') AS categorie_names 
```

所以结果会像 2:Cat2,1:Cat2。您可以拆分（首先使用 ',' 然后使用 ':'）此值并检索 ID 和名称。

# javascript - 如果使用所有 setTimeout ID 会发生什么？

> ID：12126049
> 
> 赞同：3
> 
> 时间：2012-08-25T22:11:13.040
> 
> 标签：javascript, settimeout

调用该`setTimeout`函数将返回一个整数 ID，以便`clearTimeout`可以使用该 ID 调用它。

如果`setTimeout`被调用的次数多于 JavaScript 中的正整数，会发生什么？有安全问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T22:17:12.613

在 Chrome 中找到相关代码：

```
static int timeoutId()
{
    static int lastUsedTimeoutId = 0;
    ++lastUsedTimeoutId;
    // Avoid wraparound going negative on us.
    if (lastUsedTimeoutId <= 0)
        lastUsedTimeoutId = 1;
    return lastUsedTimeoutId;
} 
```

因此，在没有剩余正整数之后，Last ID 将仅为 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T22:15:09.583

在这种情况发生之前，您将耗尽内存（或其他一些资源）。Javascript 数字是 64 位浮点数，它可以准确地表示高达 2^52 的整数，这意味着即使保存这么多 ID 也需要 32 PB 的内存，更不用说伴随的对象或任务了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T22:54:40.507

在我的带有 Chrome 21 的 32 位 Windows 7 系统上，带有页面的选项卡在大约 4295063 后崩溃。但它只是选项卡。我关闭了该选项卡，其他一切正常。

Opera 12 的脚本运行速度越来越慢。

Firefox 抱怨脚本花费了很多时间。

您可以自己测试：http: [//jsfiddle.net/some/r58s8/](http://jsfiddle.net/some/r58s8/)

# ios5 - iOS 内存管理问题与属性

> ID：12126054
> 
> 赞同：0
> 
> 时间：2012-08-25T22:11:54.500
> 
> 标签：ios5

我有一个具有以下集合的类：

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
@interface MyViewController : UIViewController
{
    NSMutableDictionary *details;           
}
@property (nonatomic,retain) NSMutableDictionary *details; 
```

我删除了这个问题的所有不必要的细节。在我包括的实现文件中`@synthesize details;`

我从另一个视图转发到这个视图，在那个类中我得到了一个本地字典：

```
NSMutableDictionary *getData = [responsestring JSONValue]; 
```

我将它设置为这个类中的可变字典，我尝试了两种方式。两者都在下面提到：

```
objMyVc.details = [[NSMutableDictionary alloc] initWithDictionary:getData];
objMyVc.details = [getData retain]; 
```

一旦我在 MyViewController 中，值详细信息始终为空。为什么会这样？在这种情况下不应该保留价值吗？

**[编辑]**

我可以确认它`getData`不为空，因为我有以下检查：

```
if ([getData valueForKey:@"VALUE"]) {

} 
```

在`if`声明中，我试图将值分配给 details 字典并转发给`ViewController`. 我也尝试复制如下：

```
objMyVc.details = getData; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:21:21.320

您的代码似乎正确。您是否检查过 getData 是否为空？我还会在初始化后立即检查详细信息是否为空。我认为您的问题与保留无关。

# php - 使用 PHPUnit 和 Selenium 进行 Yii 框架测试错误/警告

> ID：12126056
> 
> 赞同：3
> 
> 时间：2012-08-25T22:12:13.077
> 
> 标签：php, selenium, yii, tdd, phpunit

我正在使用这本书：“使用 Yii 1.1 和 PHP5 进行敏捷 Web 应用程序开发”来开始使用 Yii。

在设置我的 TDD 环境并运行我的第一个测试时，会弹出以下警告：

```
sl@cker:/var/www/demo/protected/tests$ phpunit functional/SiteTest.php
PHPUnit 3.6.12 by Sebastian Bergmann.

Configuration read from /var/www/demo/protected/tests/phpunit.xml

PHP Warning:  include(SiteTest: Firefox.php): failed to open stream: No such file or directory in /var/www/framework/YiiBase.php on line 423
PHP Warning:  include(): Failed opening 'SiteTest: Firefox.php' for inclusion (include_path='.:/var/www/demo/protected/components:/var/www/demo/protected/models:/usr/share/php:/
usr/share/pear') in /var/www/framework/YiiBase.php on line 423
...PHP Warning:  include(SiteTest: Firefox.php): failed to open stream: No such file or directory in /var/www/framework/YiiBase.php on line 423
PHP Warning:  include(): Failed opening 'SiteTest: Firefox.php' for inclusion (include_path='.:/var/www/demo/protected/components:/var/www/demo/protected/models:/usr/share/php:/
usr/share/pear') in /var/www/framework/YiiBase.php on line 423

Time: 44 seconds, Memory: 8.25Mb

OK (3 tests, 10 assertions) 
```

有谁知道我该如何解决这个问题，或者我可以忽略这些警告吗？这本书没有提到一个名为： 的文件`Firefox.php`。不过，测试确实在 Firefox 中运行。

**额外信息：**

*   PHP 版本 5.3.10
*   平台：Ubuntu 12.04
*   服务器：Apache/2.2.22
*   PHPUnit 版本：3.6.12
*   硒版本：2.25.0
*   Yii版本：v1.1.12

（都是最新的稳定版本）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T22:36:31.647

好的..我已经解决了。我只是回答我自己的问题，以防其他人遇到这个问题。

解决方法如下。

改为`phpunit.xml`：

```
<phpunit bootstrap="bootstrap.php"
        colors="false"
        convertErrorsToExceptions="true"
        convertNoticesToExceptions="true"
        convertWarningsToExceptions="true"
        stopOnFailure="false">

    <selenium>
        <!-- <browser name="Firefox" browser="*firefox" /> -->
    </selenium>

</phpunit> 
```

并更改`WebTestCase.php`为：

```
<?php

/**
 * Change the following URL based on your server configuration
 * Make sure the URL ends with a slash so that we can use relative URLs in test cases
 */
define('TEST_BASE_URL','http://localhost/demo/index-test.php/');

/**
 * The base class for functional test cases.
 * In this class, we set the base URL for the test application.
 * We also provide some common methods to be used by concrete test classes.
 */
class WebTestCase extends CWebTestCase
{
    /**
     * Sets up before each test method runs.
     * This mainly sets the base URL for the test application.
     */
    protected function setUp()
    {
        parent::setUp();
        $this->setBrowser('*firefox');
        $this->setBrowserUrl(TEST_BASE_URL);
    }
} 
```

您的输出将是：

```
sl@cker:/var/www/demo/protected/tests$ phpunit functional/SiteTest.php
PHPUnit 3.6.12 by Sebastian Bergmann.

Configuration read from /var/www/demo/protected/tests/phpunit.xml

...

Time: 32 seconds, Memory: 8.25Mb

OK (3 tests, 10 assertions) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-03T23:27:09.980

如果我的输出是：

> `/usr/local/bin/phpunit: line 1: html: No such file or directory` `/usr/local/bin/phpunit: line 2: syntax error near unexpected token`<' `'usr/local/bin/phpunit: line 2:`404 未找到

正如你提到的，我有我的文件结构

# javascript - 使用不同事件的相同功能

> ID：12126058
> 
> 赞同：3
> 
> 时间：2012-08-25T22:12:38.853
> 
> 标签：javascript, jquery

这似乎很简单，但我无法弄清楚。我是 javascript/jquery 的新手。

我想触发一个函数来移动一个 div onmouseover 和另一个 onmouseout。我想在几个不同的 div 上调用这个相同的函数。如果不编写多个函数，我将如何做到这一点？

```
 <div id="indexJoinBanner" onmouseover="moveDivRight()" onmouseout="moveDivLeft()"> 
  <!-- end #indexJoinBanner --></div>
  <div id="indexJoinBanner2" onmouseover="moveDivRight()" onmouseout="moveDivLeft()"> 
  <!-- end #indexJoinBanner2 --></div>

function moveDivRight(){
  $("#indexJoinBanner").animate({
    left: "0px",
  },500 );
};

function moveDivLeft() {
  $("#indexJoinBanner").animate({
    left: "-150px",
  },500 );
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T22:17:00.910

```
$("#indexJoinBanner, #indexJoinBanner2").hover(function () {
    $(this).animate({left: '0px'}, 500);
},
function () {
    $(this).animate({left: '-150px'}, 500);
}); 
```

`.hover`允许您同时绑定 mouseover 和 mouseout，但您也可以单独绑定它们。

您可以使用`this`来引用作为绑定目标的对象（即使您一次绑定到多个元素）。

如果需要，您还可以绑定命名函数。

**注意**：在此解决方案`onmouseover`中，HTML 中根本不需要 等属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T22:26:01.610

您可以将 div 传递给函数，例如

```
<div id="indexJoinBanner" onmouseover="moveDivRight(this)" onmouseout="moveDivLeft(this)"> 
```

并在函数中使用

```
function moveDivRight(div){
  $(div).animate({
    left: "0px",
  },500 );
};

function moveDivLeft(div) {
  $(div).animate({
    left: "-150px",
  },500 );
} 
```

`this`在属性中指定当前元素。

或者，您可以使用`.on()`而不是 onmouseover 和 onmouseout 属性来附加处理程序，然后为要附加处理程序的所有元素提供一个类

```
$('.someclass').on('mouseover', function () {
  $(this).animate({
    left: "0px",
  },500 );
}).on('mouseout', function () {
  $(this).animate({
    left: "-150px",
  },500 );
}) 
```

[**演示**](http://jsfiddle.net/mowglisanu/qNBEJ/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-25T22:17:22.913

```
<div id="indexJoinBanner" onmouseover="moveDivRight()" onmouseout="moveDivLeft()"></div>
<div id="indexJoinBanner2" onmouseover="moveDivRight()" onmouseout="moveDivLeft()"></div>

<script>
$(document).ready(function() {
    $('#indexJoinBanner').mouseover(function() {
        $(this).animate({left: '0px'});
    });

    $('#indexJoinBanner2').mouseover(function() {
        $(this).animate({left: '0px'});
    });

    $('#indexJoinBanner').mouseout(function() {
        $(this).animate({left: '-150px'});
    });

    $('#indexJoinBanner2').mouseout(function() {
        $(this).animate({left: '-150px'});
    });
});
</script> 
```

# bash - 为什么在 sed 中使用双反斜杠来运行 ssh？

> ID：12126059
> 
> 赞同：1
> 
> 时间：2012-08-25T22:12:45.477
> 
> 标签：bash, sed, subshell, metacharacters

我在 Gentoo Linux 的 wiki 中遇到了以下[关于动态 jumphost 列表的内容](http://wiki.gentoo.org/wiki/SSH_jump_host#Multiple_jumps)：

```
 ProxyCommand ssh $(echo %h | sed 's/+[^+]*$//;s/\([^+%%]*\)%%\([^+]*\)$/\2 -l \1/;s/:/ -p /') nc -w1 $(echo %h | sed 's/^.*+//;/:/!s/$/ %p/;s/:/ /') 
```

它有效，但我想`sed`完全理解这个表达。

阅读其[原始参考资料](http://glandium.org/blog/?p=308)，我能够很好地理解使用该`Host *+*`模式的命令的递归调用。但我有两个问题：

1.  表达式使用`%%`. 为了了解原因，我使用`ssh -v`了 ，并观察到当`ssh`客户端解析时`$HOME/.ssh/config`，似乎第一个`%`被剥离了。试图确认上述内容，我下载了[openssh 源代码](http://www.openssh.com/openbsd.html)，但`readconf.c`没有给我任何线索。我是 OpenSSH 源代码的新手，但不怕用调试信息和它来编译`gdb`它。不过，如果有更快的方法来证实我的猜想，我将不胜感激。
2.  `ssh -v`还透露：

    ```
    [...]
    debug1: Executing proxy command: exec ssh $(echo zackp%node0+zackp%node1+node3 | sed 's/+[^+]*$//;s/\\([^+%]*\\)%\\([^+]*\\)$/\\2 -l \\1/;s/:/ -p /')
    [....] 
    ```

    即`\(`现在`\`在子shell 中用a 转义。为什么这是必要的？

谢谢，

——扎克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:54:07.487

好问题。这是一个相当曲折的命令！听起来你已经掌握了它。在您的机器上，主机字符串已剥离了一个加号分隔的跃点；为方便起见，该令牌然后将任何端口和用户提取并转换为选项（`-l`和`-p`）。最后，将其他跃点的信息弹出到一个字符串中传递给 netcat。您机器上的 ssh 建立一个连接，并在其目标机器上使用包含有关剩余跃点信息的字符串执行 netcat。然后相同的过程再次在那里发生，依此类推，直到所有跃点完成，每个中继上运行一个 netcat 实例来转发流量。相当整洁的命令行乐趣！

您的具体问题：

1.  为什么 % 符号被转义了？这是特定于`ProxyCommand`选项的！从有关以下内容的手册页`ProxyCommand`：

    > 在命令字符串中，任何出现的“%h”都将替换为要连接的主机名，“%p”替换为端口，“%r”替换为远程用户名。

    像所有表现良好的 unix 实用程序一样，当出现元字符时，很自然的事情是使用该字符加倍来表示文字。否则，就无法表示某些字符串！它可能只是程序员出于整洁而添加的，没有想到有人会使用 % 为跳转列表编写自己的迷你语法并将其发布在 Gentoo wiki 上！

    % 代码特定于此选项，因此转义可能隐藏在 OpenSSH 源中处理该选项的位置附近。

2.  棘手的问题！指定为 ProxyCommand 选项的字符串不是将直接传递给 ssh 的命令字符串；它是专门“使用用户的外壳”执行的。因此，该选项中的内容是对用户友好的，因此您可以在 ssh.conf 中输入您在 shell 中输入的内容。

    现在，大多数人（包括我！）对 100% 精确的日志记录并不太在意，但是 OpenBSD 的家伙有一个 strnvis 函数，OpenSSH 在输出之前传递所有日志字符串。它对控制字符和其他讨厌的字符进行编码，以便日志输出提供字符串日志记录函数传入的精确（无空）缓冲区的可读记录。这很棒，但唯一的窍门是，在阅读日志时，您必须将其“srunvis”回其原始形式。

    基本上，反斜杠是他们的日志格式的一个奇怪之处。它不会传递给外壳。

    [~~现在，我在这里猜测（我认为不值得深入研究！），但基本上问题在于日志记录 ssh 的输出在冗长时会吐出。我之前写过用于进程启动的日志记录，考虑到参数可能有多复杂（嵌入换行符？尾随空格？疯狂引号？），这有点草率。您通常不需要 100%“准确”的方式将参数无损地记录到 exec，因为它太乏味了。看起来这里的 OpenSSH 代码的作者，在寻找要记录的单个字符串时，只是吐出他方便作为最后一个参数传递给 sh 的字符串的转义形式。这不是将要执行的内容的“完美”表示（因为我怀疑一些空格会在日志记录中丢失）并且它'~~]

# git - 我怎样才能得到我的发挥！2.0 自动编译协议缓冲区的应用？

> ID：12126063
> 
> 赞同：2
> 
> 时间：2012-08-25T22:13:32.183
> 
> 标签：git, scala, heroku, playframework-2.0, sbt

我的项目有一些`.proto`文件，我使用了生成的 Java 源代码。我希望 Play 在项目编译期间自动编译并包含这些文件。

理想情况下，我会将`.proto`文件保存在`app`目录中，如下所示：

```
<play root>/
  app/
    protobuf/
      myfile.proto
    controllers/
      Application.scala
  ... 
```

一些要求如下：

*   生成的源代码不应*包含*在 git 中
*   Heroku*必须*能够在部署期间编译 protobuf

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T22:13:32.183

您可以使用[sbt-protobuf](https://github.com/sbt/sbt-protobuf)。您将需要如下配置一些文件（使用 sbt 0.11 或更高版本）：

### 项目/plugins.sbt

```
resolvers += "gseitz@github" at "http://gseitz.github.com/maven/"

addSbtPlugin("com.github.gseitz" % "sbt-protobuf" % "0.2.2") 
```

### 构建.sbt

```
// must be at top of file

import sbtprotobuf.{ProtobufPlugin=>PB}

seq(PB.protobufSettings: _*)

javaSource in PB.protobufConfig <<= (sourceManaged in Compile) 
```

此配置将需要 protobufs`app/protobuf`并将它们放置在托管（非版本控制）源目录中。

***警告***- 不要*给*你的 protobuf 文件提供包名`messages`，它会干扰 Play，你会得到 i18n 错误。

# redmine - Redmine 2.0.3 中的登录重定向 URL 错误

> ID：12126065
> 
> 赞同：2
> 
> 时间：2012-08-25T22:13:55.197
> 
> 标签：redmine

我已经在我的服务器上安装了 Redmine 2.0.3，它一切正常，只是当你登录时 URL 被弄乱了，所以它无法正确重定向。如果您在登录后手动输入正确的 URL，则可以正常工作。

我得到的网址是：

`http://redmine.mydomain.comhttp%3a%2f%2fredmine.mydomain.com%2f`

这个 URL 是在哪里生成的/我该如何修复它？

谢谢。

马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:37:03.090

我的设置有一个启用了 SSL 的“主”Apache httpd 和 mod_proxy 到 Redmine v2.1.2 的单独 apache 实例。

我遇到了我认为是 Rails 而不是 Redmine 本身的问题。

生产日志：

```
Started GET "/redmine/projects/test/issues/new" for 127.0.0.1 at Tue Dec 11 
07:31:31 -0800 2012
Processing by IssuesController#new as HTML
  Parameters: {"project_id"=>"test"}
  Current user: anonymous
Redirected to http://myserver/redmine/login?back_url=http%3A%2F%2Fmyserver%2F
redmine%2Fprojects%2Ftest%2Fissues%2Fnew
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 155ms (ActiveRecord: 98.4ms)

Started GET "/redmine/login?back_url=http%253A%252F%252Fmyserver%252Fredmine%252F
projects%252Ftest%252Fissues%252Fnew" for 127.0.0.1 at Tue Dec 11 07:31:31 -0800 
2012
Processing by AccountController#login as HTML
  Parameters: {"back_url"=>"http%3A%2F%2Fmyserver%2Fredmine%2Fprojects%2Ftest%2F
  issues%2Fnew"}
  Current user: anonymous
  Rendered account/login.html.erb within layouts/base (11.4ms)
Completed 200 OK in 399ms (Views: 351.9ms | ActiveRecord: 37.7ms)
Started POST "/redmine/login" for 127.0.0.1 at Tue Dec 11 07:32:17 -0800 2012
Processing by AccountController#login as HTML
  Parameters: {"username"=>"speroshiropetto", "back_url"=>"http%3A%2F%2Fmyserver
  %2Fredmine%2Fprojects%2Ftest%2Fissues%2Fnew", "login"=>"Login »", "utf8"=>"?", 
  "authenticity_token"=>"D4wruy76o/adfhafnen30kS6b2FtOQIaiFdtzbMxzs=", 
  "password"=>"[FILTERED]"}
  Current user: anonymous
Successful authentication for 'speroshiropetto' from 127.0.0.1 at Tue Dec 11 
15:32:17 UTC 2012
Redirected to http://myserverhttp%3A%2F%2Fmyserver%2Fredmine%2Fprojects%2Ftest%2F
issues%2Fnew
Completed 302 Found in 356ms (ActiveRecord: 176.4ms)

-------------------------------------------------------------------------------- 
```

将以下内容添加到 Redmine Apache 配置中会有所帮助。

`RequestHeader set X_FORWARDED_PROTO 'https'`

# javascript - 在 OpenLayers 中删除图层

> ID：12126067
> 
> 赞同：9
> 
> 时间：2012-08-25T22:15:05.477
> 
> 标签：javascript, openlayers

我不知道为什么这不起作用。我认为答案非常简单。在添加新图层之前，我需要删除图层。

```
 if (graphic) {
        window.map.removeLayer(graphic);
    }
    var graphic = new OpenLayers.Layer.Image(
        'Sightline'+''+SC,
        url,
        new OpenLayers.Bounds(derWesten[0].firstChild.nodeValue,derSueden[0].firstChild.nodeValue,derOsten[0].firstChild.nodeValue, derNorden[0].firstChild.nodeValue),
        new OpenLayers.Size(0,0),
        options
    );

    window.map.addLayer(graphic); 
```

它只是不断地堆积在层上，而不是去除任何东西。有什么帮助吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-25T23:35:28.680

您的声明将始终评估为 false，因为您每次运行该部分代码时都`if`重新声明。`graphic`变量被*提升*，并且在评估时它的值将是未定义的`if`。

您需要在不同的范围内声明变量：

```
var graphic;

function removeAddLayer() {
   if (graphic) {
      window.map.removeLayer(graphic);
   }
   graphic = new OpenLayers.Layer.Image( /* stuff */); // note: no 'var' in front of graphic
   window.map.addLayer(graphic);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T13:31:57.050

使用`map.getLayersByName(layerName)`获取图层。您可能需要跟踪某个数组或其他内容中的图层名称

该方法返回一个数组，因此您可以遍历层数组并使用`map.removeLayer(layer)`.

如果需要，您可以将此解决方案外部化到不同的功能中，并且它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T02:06:19.510

通过实验我发现删除一个层并不会清理客户端浏览器中的内存（在我的情况下，大约 2 百个 wms 层在 Firefox 中获得大约 2gb 的内存）。所以对我有用的唯一方法是只创建一个 wms 层并合并NewParams。希望它会有所帮助。

# c# - 基于 C# 列表的动态 SQL 查询（基于字符串）

> ID：12126071
> 
> 赞同：1
> 
> 时间：2012-08-25T22:15:54.750
> 
> 标签：c#, sql

我试图找到一种使用字符串 sql 查询将 C# 列表作为数据库进行查询的方法，例如：

```
List<Customer> customers = new List<Customer>(){
    new Customer(){Name = "joe", Age = 20},
    new Customer(){Name = "john", Age = 25}
};
string query = @"Select * from customers";
List<Tuple> tuples = EntityDB.query(customers, query);
Console.Writeline(tuples[0][0]); //prints "joe" 
```

我有几个需要使用此功能来满足的要求，

*   它需要支持动态 SQL 查询（字符串查询），因为我需要从这个列表中提取特定的行，并且过滤不是预定义的。（linq 在这里没有帮助）
*   它需要能够像 SQL 一样支持多行的功能（如 Average、Count...）。
*   它需要支持与 SQL 完全一样的指定列的提取（选择 column1、column2...）

我没有 SQL 服务器，我没有额外的 mdf DB，它只是这个客户对象列表，有没有办法做到这一点？

我这样做的动机是能够从此列表中提取特定信息到二维表并将其输出到 excel，但是行和列过滤没有预定义，并且需要多行操作，用户将能够指定确切的他们想要像 SQL 查询一样提取的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T22:20:23.753

LINQ 允许您对各种数据源（数据库、XML 文件、应用程序对象）执行类似查询的命令。您可以使用 LINQ 非常轻松地从列表中选择项目：

```
items.Select(c => c.Customer) 
```

当对内存对象执行此操作时，您正在使用 LINQ-to-Objects。

我更喜欢这个而不是编写一个 SQL 到对象的框架。这听起来像是一场真正的维护噩梦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:21:37.470

您是否考虑过以与构建字符串相同的方式构建 Linq？

就像是

```
var customers = new List<Customer> { … };
IQueryable<Customer> results = customers.AsQueryable();

if(!string.IsNullOrEmpty(CustomerName))
    results = results.Where(x => x.Name = CustomerName);

if(CustomerMaxAge != 0)
    results = results.Where(x => x.Age <= CustomerMaxAge);

//etc....

return results.ToList(); 
```

通过使用，`IQueryable`您可以推迟内存中的内容，直到您完成添加条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T11:08:33.437

与其尝试在代码中模拟数据库，您是否考虑过使用轻量级数据库来解决您的问题？想到 SQLite 之类的东西。通常它会将文件写入磁盘，但实际上也支持在内存中加载。

根据文档，内存中的 SQLite 数据库不需要将文件写入磁盘，并且在您打开连接时存在于内存中。一旦连接关闭，它就不再存在。

[http://www.sqlite.org/inmemorydb.html](http://www.sqlite.org/inmemorydb.html)

打开连接后，您可以像使用常规 SQL 字符串查询任何其他数据库一样查询数据，或者如果您愿意，可以使用带有 NHibernate 的 LINQ 或其他一些受支持的 ORM 查询数据。

SQLite 专为您需要 SQL 的强大功能但无需设置完整数据库服务器的开销而设计。事实上，如果您使用 Firefox 作为浏览器，那么您现在正在使用 SQLite ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T22:39:29.900

也许这就是你想要的？

```
 List<Tuple<string,int>> tuples = customers.Select(x => Tuple.Create(x.Name,x.Age)).ToList(); 
```

# javascript - 验证一组相关选项中的每个字段是否都已填写？

> ID：12126072
> 
> 赞同：0
> 
> 时间：2012-08-25T22:16:22.230
> 
> 标签：javascript, jquery, html

我发现的大多数示例都适用于表单。请参阅示例小提琴

[http://jsfiddle.net/pepefloyd/DL53N/2/](http://jsfiddle.net/pepefloyd/DL53N/2/)

我只想在任一组字段中的所有字段都已填写时才显示该按钮。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:40:23.170

如果我对您的理解正确，您想检查您的所有字段（输入、选择）是否包含一个值，如果是，请继续...您不依赖于表单（尽管它在语义上更正确）。

你可以这样做：

```
submitapproval = function()
{
    var allFilled = true;

    // iterate through all your fields and check if they do have a value set.
    $("input, select").each(function(i,el) {
      var $el = $(el);
      // if any field has no value, allFilled turns to false.
      allFilled = allFilled && ($el.val() !== "");
    });            

    if (allFilled)
    {
        // your code...
    }
} 
```

`#depends1`如果您想检查用户是否设置了它，您应该考虑不为字段（如您的）设置默认值。

# mysql - 如何在 SQL 中做动态 if 语句？

> ID：12126075
> 
> 赞同：2
> 
> 时间：2012-08-25T22:16:44.470
> 
> 标签：mysql, sql, select, inner-join

我在一个论坛上工作，就像在每个论坛上一样，有话题和回复。这些是我在数据库中用来存储它们的表：

```
post
------------
id
user_id
time
type
effective_id

thread
------------
id
update_time
text
response_number
deleted

response
------------
id
container_id
text
deleted 
```

The`post.type`是 a `enum('thread', 'response')`，并且 the必须根据指示的内容`post.effective_id`匹配 a`thread.id`或 a 。`response.id``post.type`

如您所见，我正在分解线程和响应的所有共同点。

* * *

这是我遇到的问题：我想确定是否在**单个查询**`id`中删除了给定的帖子（将其作为信息）并且**不将****字段移动到帖子表**。****`deleted`****

 **如果我事先知道给定的 id 是否属于线程或响应，这些将是我将使用的查询。

```
SELECT thread.deleted
FROM post INNER JOIN thread ON post.effective_id = thread.id 
```

或者

```
SELECT response.deleted
FROM post INNER JOIN response ON post.effective_id = response.id 
```

但是我如何在 SQL 中说“ `if the post.type is thread then INNER JOIN with thread and get the deleted field, if post.type is response then INNER JOIN with response and get the delete field.`”？我需要某种动态的“如果”

这甚至可能与指定的条件有关吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:21:19.230

查看以下查询中的案例：

```
SELECT CASE 
WHEN post.type = 'thread' THEN thread.deleted
WHEN post.type = 'response' THEN response.deleted
ELSE 'default'
END
FROM post 
LEFT JOIN thread ON post.effective_id = thread.id
LEFT JOIN response ON post.effective_id = response.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T22:19:25.080

使用两个左连接：

```
SELECT IFNULL(thread.deleted, response.deleted) AS deleted
FROM post
LEFT JOIN thread ON post.effective_id = thread.id
AND post.type = 'thread'
LEFT JOIN response ON post.effective_id = response.id
AND post.type = 'response' 
```**

# c++ - 无法将 Const Char[21] 转换为 Char？

> ID：12126076
> 
> 赞同：0
> 
> 时间：2012-08-25T22:16:49.487
> 
> 标签：c++, pointers, constants, default-value

我在转换时遇到问题。我不能在这个程序中使用字符串，所以我必须使用`char`'s - 我收到错误：

```
error C2664: 'printText' : cannot convert parameter 1 from 'const char [21]' to 'char'
1>          There is no context in which this conversion is possible 
```

我尝试将其转换为 const 指针：

```
void printText(const char* text[100] = "notextgiven"... 
```

但这似乎没有帮助，给我的错误比什么都多。

我的程序：

```
#include <iostream>
using namespace std;

void printText(char, char, int);

int main(){
    printText("I hear and I forget.", "*", 15);
}

void printText(char text[100] = "notextgiven", char symbol = ' ', int repeat = 10){
    int temp = 0;
    while(temp < repeat){
        cout << symbol;
            temp++;
    }

    cout << text;

    temp = 0;
    while(temp < repeat){
        cout << symbol << endl;
            temp++
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T22:21:29.790

这不是为您尝试做的事情定义功能的正确方法

```
void printText(char text[100] = "notextgiven", char symbol = ' ', int repeat = 10) 
```

试试这个

```
void printText(const char* text, char symbol, int repeat) 
```

这应该允许您的程序编译。也改变这一行

```
 printText("I hear and I forget.", "*", 15); 
```

到

```
printText("I hear and I forget.", '*', 15);
                                  ^ ^ 
```

单引号用于单个 char 变量，双引号将其视为字符串文字。由于这是家庭作业，您可能被要求专门使用`char*`，但由于您通常使用 C++，因此最好使用`std::string`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T22:20:02.653

在您的原始函数中，您首先尝试将整个字符串放在一个字符内 - 这显然是不可能的。然后，您尝试了一个合理的解决方案，主要是由于历史原因，C++ 不允许这样做。

改变你`printText`的

```
void printText(const char *, char, int); 
```

为什么需要这个？

*   C 字符串是`char`s 的数组；
*   数组不能在 C/C++ 中按值传递（无特殊原因¹）；
*   数组的名称衰减为指向其第一个元素的指针，如果您有指向第一个元素的指针，则可以索引整个数组；

出于这个原因，当你将数组传递给 C/C++ 函数时，你实际上传递了一个指向它们的第一个元素的指针。对于通用数组，您还可以在单​​独的参数中传递数组的大小（否则被调用的函数将不知道何时停止检查数组），对于 C 字符串则不需要，因为按照惯例，它们以第一个 '\ 0' 字符（空终止符）。

为什么`const`？因为您的函数不需要修改您传递给它的字符串，所以您明确了这一事实，并且还允许您的调用者传递`const`字符串而不会产生编译错误（字符串文字理论上是`const`字符串，因为它们不能被修改，但`char *`由于历史原因，它们可以再次隐式转换）。

* * *

顺便说一句，向函数声明大小数组参数并不是天生禁止的 - 但是，对于上述兼容性问题，它无论如何都被解释为指针。默认值会出错，因为您必须在函数的*声明*(=prototype) 中指定它们，而不是在其*定义*中。

* * *

最后，正如其他人注意到的那样，在您的函数调用中

```
printText("I hear and I forget.", "*", 15); 
```

第二个参数是一个字符串（因为你用双引号括起来），它应该是一个简单的`char`（用单引号括起来）。

* * *

1.  IIRC 它与与 B 或 BCPL 或其他什么的兼容性有关，关键是数组不能按值传递没有内在原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T22:22:02.140

您尝试将字符串传递给函数，根据您的设置方式，该函数仅接受单个字符。

`printText`需要将其参数作为`char*`而不是`char`（即：作为字符序列而不是单个字符）。

因此，`printText(char, char, int);`您需要将前向声明改为`printText(char*, char*, int)`.

同样，函数签名应该是：

`void printText(char* text = "notextgiven", char* symbol = " ", int repeat = 10)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T22:50:06.877

请注意，您在原始标题中描述的错误消息与您的实际错误消息并不完全相同。（我冒昧地改变了这一点。）最后的“[21]”**非常**重要。特别是“[]”符号代表一个数组。所以编译器告诉你你正试图从一个字符**数组**转换为一个字符。由于一个数组可以容纳多个字符，编译器抱怨它不能做到这一点的原因应该很明显了。

有了这个解释，让我们看看如何修复你的代码。有三行导致您的代码出现问题：

函数*声明*：

```
void printText(char, char, int); 
```

函数*调用*：

```
printText("I hear and I forget.", "*", 15); 
```

函数*定义*：

```
void printText(char text[100] = "notextgiven", char symbol = ' ', int repeat = 10){ 
   //...
} 
```

这是创建自己的功能的三个要素，它们必须**全部匹配**！如果他们不这样做，编译器会抱怨。因此，让我们分析这些部分。首先声明：

```
void printText(char, char, int); 
```

在这里，您*声明*了一个名为“printText”的函数，它需要三个输入（两个字符和一个整数）并且没有输出（“void”）。

现在看函数定义：

```
void printText(char text[100] = "notextgiven", char symbol = ' ', int repeat = 10){ 
   //...
} 
```

这*定义*了一个名为“printText”的函数，它有三个输入，没有输出。不过，仔细看看。这个“printText”函数需要一个字符**数组**、一个字符和一个整数作为其输入。因为这个输入列表与声明中的不同，这实际上是一个与声明的**完全不同**的函数。

我还想在这里提一下，函数定义*定义*了函数的实际作用。这是“{”和“}”之间的代码。另一方面，函数声明只是声明函数存在*于某处*，但没有说明函数内部发生了什么。为了满足编译器，我们需要两者。（从技术上讲，也涉及链接器，但该细节对当前问题并不重要。）

还有一件事：您的函数提供带有“=”的默认参数。我怀疑这不是你想要的。由于您刚刚开始，我强烈建议您删除这些，因为它们只会使事情复杂化。当您对函数更加熟悉时，您可以了解默认参数。

最后，我们看一下函数调用：

```
printText("I hear and I forget.", "*", 15); 
```

由于这一行出现在 main() 函数中，它告诉 printText() 函数做它的事情。这一行还提供了 printText() 函数的输入。请注意，此处给出的输入是两个字符串（或字符数组）和一个整数。（双引号内的任何内容 -- "" -- 都是一个字符串，也相当于一个字符数组。）现在这与函数声明所描述的输入列表不匹配，因此编译器会尝试转换您对所列类型的输入。编译器抱怨，因为它无法这样做。

我怀疑您实际上想将第三个参数更改为`'*'`. 注意单引号。这就是您在 C++（和大多数其他编程语言）中指示单个字符的方式。

我希望这个解释能帮助你理解你的代码发生了什么。祝你学习 C++ 好运！

# javascript - 使捕鼠器与 Greasemonkey 选择文本字段一起使用？

> ID：12126078
> 
> 赞同：-1
> 
> 时间：2012-08-25T22:17:01.133
> 
> 标签：javascript, greasemonkey, event-listener

Wondering how to get Greasemonkey to work with Mousetrap ( [http://craig.is/killing/mice](http://craig.is/killing/mice) ) where it will tr​​igger a function when text is selected. 它在 API 中提到了一些关于它的内容，但我不知道如何让它适用于整个页面而不仅仅是一个字段。

> 文本字段
> 
> 默认情况下，如果您在文本区域、输入或选择内，所有键盘事件都不会触发，以防止发生不希望的事情。
> 
> 如果出于某种原因您想要它们，您可以将类捕鼠器添加到元素中。

```
<textarea name="message" class="mousetrap"></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:19:59.767

Mousetrap 中目前没有执行此操作的选项。

但是，您可以通过一些简单的 JQuery 来实现这一点。这样的事情应该可以解决问题：

`$(':input').addClass('mousetrap');`

我正在考虑`_stop()`在 Mousetrap 中公开该方法，这将允许人们将其扩展为以默认方式以外的方式工作。

# java - 在 JLayeredPane 上移动 JLabel

> ID：12126083
> 
> 赞同：0
> 
> 时间：2012-08-25T22:17:44.963
> 
> 标签：java, swing, jlabel, repaint, jlayeredpane

我需要在 JLayeredPane 上动态移动一些 JLabels。问题是它们没有正确刷新。有时它们会正确移动，有时它们根本不会出现。

我的代码如下所示：

构建面板

```
JLayeredPane gameBoardPane = new JLayeredPane();
gameBoardPane.setLayout( null );
Dimension gameBoardLabelSize = gameBoardLabel.getPreferredSize();
gameBoardLabel.setBounds(30, 30, gameBoardLabelSize.width, gameBoardLabelSize.height);
gameBoardPane.add(gameBoardLabel, new Integer(10));
gameBoardPane.setAlignmentY(Component.TOP_ALIGNMENT);

// ...

JPanel gamePane = new JPanel();
gamePane.setLayout( new BoxLayout(gamePane, BoxLayout.LINE_AXIS) );
gamePane.add(gameBoardPane);
gamePane.add(gameControlPane);

// ...

Container contentPane = getContentPane();
contentPane.add(gamePane, BorderLayout.PAGE_START);
SnLFrame.setSize( 720,600 ); 
```

添加 JLabel：

```
Coordinates position = new Coordinates();
position = convertToCoordinates(blockNumber);
position.x = position.x * 50;
position.y = position.y * 50;

Dimension smallPlayer1IconLabelSize = smallPlayer1IconLabel.getPreferredSize();
smallPlayer1IconLabel.setBounds(position.x, position.y, smallPlayer1IconLabelSize.width, smallPlayer1IconLabelSize.height);
gameBoardPane.add(smallPlayer1IconLabel, new Integer(100));
SnLFrame.invalidate();
SnLFrame.validate();
SnLFrame.repaint(); 
```

当它确实显示 JLabel 时定位是正确的，但它并不总是显示它......这里出了什么问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:38:50.920

我浏览了 Hovercraft 之前的答案，我很确定它会满足你的需求，但我忍不住想玩一玩。

这仅作为示例。动画引擎很垃圾（网上有更好的框架），但有点好玩；）

```
public class AnimateGlassPane {

    public static void main(String[] args) {
        new MyFrame();
    }

    public static class MyFrame extends JFrame {

        public MyFrame() {
            setTitle("Testing");
            setSize(800, 600);
            setLocationRelativeTo(null);
            setDefaultCloseOperation(EXIT_ON_CLOSE);

            setGlassPane(new MyGlassPane());
            getGlassPane().setVisible(true);

            setVisible(true);              
        }

    }

    public static class MyGlassPane extends JPanel {

        private JLabel[] labels;
        private JLabel random;
        private Timer timer;
        private float progress = 0f;
        private float increment = 0.1f;

        public MyGlassPane() {

            setOpaque(false);
            setLayout(null);

            labels = new JLabel[4];
            labels[0] = new JLabel("Up/Down");
            labels[1] = new JLabel("Down/Up");
            labels[2] = new JLabel("Left/Right");
            labels[3] = new JLabel("Right/Left");

            for (int index = 0; index < labels.length; index++) {
                labels[index].setSize(labels[index].getPreferredSize());
                add(labels[index]);
            }

            random = new JLabel("Look at me!");
            random.setSize(random.getPreferredSize());
            random.setVisible(false);
            random.setOpaque(true);
            random.setBackground(Color.RED);
            random.setForeground(Color.YELLOW);

            add(random);

            timer = new Timer(125, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    progress += increment;
                    if (progress < 0) {
                        progress = 0;
                        increment = 0.1f;
                    } else if (progress > 1) {
                        progress = 1;
                        increment = -0.1f;
                    }

                    int width = getWidth() - 1;
                    int height = getHeight() - 1;

                    int x = (width - labels[0].getWidth()) / 2;
                    int y = Math.round((height * progress));
                    if (y + labels[0].getHeight() > height)  {
                        y = height - labels[0].getHeight();
                    } else if (y < 0)  {
                        y = 0;
                    }

                    labels[0].setLocation(x, y);

                    y = Math.round((height * (1f - progress)));
                    if (y + labels[1].getHeight() > height)  {
                        y = height - labels[1].getHeight();
                    } else if (y < 0)  {
                        y = 0;
                    }

                    labels[1].setLocation(x, y);

                    y = (height - labels[2].getHeight()) / 2;
                    x = Math.round(width * progress);
                    if (x + labels[2].getWidth() > width)  {
                        x = width - labels[2].getWidth();
                    } else if (x < 0)  {
                        x = 0;
                    }

                    labels[2].setLocation(x, y);

                    x = Math.round(width * (1f - progress));
                    if (x + labels[3].getWidth() > width)  {
                        x = width - labels[3].getWidth();
                    } else if (x < 0)  {
                        x = 0;
                    }

                    labels[3].setLocation(x, y);

                    repaint();

                    int value = (int)Math.round(Math.random() * 100d);
                    if (value % 5 == 0) {

                        random.setVisible(!random.isVisible());
                        x = (int)Math.round(Math.random() * width);
                        y = (int)Math.round(Math.random() * height);

                        if (x + random.getWidth() > width) {
                            x = width - random.getWidth();
                        } else if (x < 0) {
                            x = 0;
                        }
                        if (y + random.getHeight() > height) {
                            y = height - random.getHeight();
                        } else if (y < 0) {
                            y = 0;
                        }

                        random.setLocation(x, y);

                    }
                }
            });

            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:30:06.267

问题实际上出在我的定位算法中。

# android - 在 Android Eclipse 项目中运行 main

> ID：12126088
> 
> 赞同：0
> 
> 时间：2012-08-25T22:19:50.360
> 
> 标签：android, eclipse

我有一些使用 android 包进行 HTML 解析的代码。有没有一种简单的方法可以使用 main 方法在 Eclipse 中运行代码而不用担心模拟器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T01:22:35.890

如果您确实想在您的代码上运行 main（假设您有一个例程要运行）：创建另一个引用 Android 代码的 Eclipse 项目并将您的 main 放在那里。您将能够调用任何不依赖于模拟器的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T22:43:08.080

你能行的。我认为它比普通的 apk 方法更复杂。但是你还是可以试试的。你需要 dx 工具。dx 工具存在于 android-sdk/platform-tools/

```
class Foo {
 public static void main(String[] args) {
 System.out.println("Hello, world"); 
 } 
} 
```

javac Foo.java
dx --dex --output=foo.jar Foo.class
adb push foo.jar /sdcard
adb shell dalvikvm -cp /sdcard/foo.jar Foo

[你可以在这里](http://www.milk.com/kodebase/dalvik-docs-mirror/docs/hello-world.html)获得更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T22:28:42.667

你的问题不是很清楚。在为 Android 编程时，不能使用“Main”方法。Android 应用程序从`onCreate`扩展 Activity 的类的方法开始。

前任：`public class LeGame extends Activity`

但是，我假设您想在不使用计算机模拟器的情况下运行您的 Android 代码。你可以在你的安卓手机上运行它。在您的手机上，转到设置 > 应用程序 > 开发 > USB 调试（检查它）。

现在，当您将手机连接到计算机时，您只需在 eclipse 中单击“运行”，您的应用程序就会在您的手机上运行。

（假设您已经下载并安装了所有必需的 Android SDK 包等）

# c# - 将文本框插入符号/光标定位到与其他文本框 C# 相同的行

> ID：12126091
> 
> 赞同：0
> 
> 时间：2012-08-25T22:20:09.823
> 
> 标签：c#

我一直在寻找这个，但我尝试过的方法都没有奏效。

我基本上想从一个文本框中取出插入符号所在的行，然后将第二个文本框滚动到相同的位置。

这是我尝试过的：

```
 int line = textBox1.GetLineFromCharIndex(textBox1.SelectionStart);
        Point pNew = new Point();
        pNew.X = 0;
        pNew.Y = line;
        textBox2.SelectionStart = textBox2.GetCharIndexFromPosition(pNew);
        textBox2.ScrollToCaret(); 
```

我想做的就是保持第二个文本框与第一个文本框一样滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:11:48.050

这是你想要的吗 ：

```
 textBox2.SelectionStart = textBox1.SelectionStart;
       textBox2.ScrollToCaret(); 
```

这适用于两个文本框文本相等的情况。

我没有明白你的目的`All I want to do is keep the second textbox as scrolled as much as the first textbox.`：两个文本框有相同的文本。

# android - 每次只在自定义布局中选择一个孩子

> ID：12126096
> 
> 赞同：2
> 
> 时间：2012-08-25T22:20:29.193
> 
> 标签：android, view, custom-component, viewgroup

我坚持这一点：我有一个 ViewGroup 托管几个视图。所有视图都有布局参数：match_parent/match_parent。视图可以像在图片上一样放置在另一个之上。

应选择触摸事件视图（如果在其填充的矩形上发生点击），并且每次只能选择一个视图。

实现这一点的最佳方法是什么？

![在此处输入图像描述](../Images/88ae516ff56fb6424f2f99cc7460661a.png)

**升级版：**

视图中的代码：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    float eventX = event.getX();
    float eventY = event.getY();
    // if it's over filled area
    if (mBounds.contains((int)eventX, (int)eventY)) {
        // set current view selected or perform other stuff
        // also at this moment we need to unselect all siblings
        mGestureDetector.onTouchEvent(event); 
        return true;
    } else {
        setSelected(false);
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T05:11:34.313

`View`创建一个表示在 custom 中选择的当前子项的字段`ViewGroup`。当您遇到触摸事件时，请检查您是否有以前的`View`选择以及是否有可能是相同的视图。如果不是，则取消选中上一个视图并使其指向当前视图。我猜发布的代码是针对子视图的，在这种情况下，您可以创建一个回调接口，其中父级`ViewGroup`实现每次选择视图时都会调用的接口。下面是一个小模板：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    float eventX = event.getX();
    float eventY = event.getY();
    // if it's over filled area
    if (mBounds.contains((int)eventX, (int)eventY)) {
        mListener.onViewSelected(this);
        // set current view selected or perform other stuff
        // also at this moment we need to unselect all siblings
        mGestureDetector.onTouchEvent(event); 
        return true;
    } else {
        setSelected(false);
        return false;
    }
} 
```

在父母中`ViewGroup`：

```
public class NiceViewGroup extends ViewGroup implements OnViewSelected {

   private View mCurrentSelectedView = null;

   public void onViewselected(View selected) {
        if (mCurrentSelectedView == null || mCurrentSelectedView == selected) {
             return;
        } else {
             mCurrentSelectedView.unselectView();
             mCurrentSelectedView = selected;      
        }    
   } 
```

当然，`ViewGroup`当您创建子视图时，您必须将父级作为侦听器传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:38:14.760

在您的视图中添加对 onClickListeners 的支持（默认情况下不支持）

```
public class myCustomView extends View {
    boolean clicking = false;
    OnClickListener onClickListener;

    public void setOnClickListener(OnClickListener ocl) {
        onClickListener = ocl;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        switch (ev.getAction) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_MOVE:
            boolean clicking = true;
            return true;
        case MotionEvent.ACTION_UP:
            if (clicking) {
                if (onClickListener != null) {
                    onClickListener.onClick(this);
                }
                clicking = false;
                return true;
            }
            return false;
        default:
            clicking = false;
            return false;
        }
    } 
```

# objective-c - 如何检测以编程方式生成的 UIView 的旋转

> ID：12126098
> 
> 赞同：9
> 
> 时间：2012-08-25T22:20:53.983
> 
> 标签：objective-c, ios, uiview, rotation

我有一个`UIView`正在以编程方式创建的：

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:CGRectMake(0, 0, frame.size.width, frame.size.height)];
    if (self) {
        self.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:.5];

        UIImageView* closeButton = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"modal_close.png"]];

        closeButton.frame = CGRectMake(self.frame.size.width*.89, self.frame.size.height*.09, closeButton.frame.size.width, closeButton.frame.size.height);

        UIButton* button = [[UIButton alloc] initWithFrame:CGRectMake(self.frame.size.width*.89, self.frame.size.height*.09,20, 20)];

        [button addTarget:self action:@selector(close) forControlEvents:UIControlEventTouchUpInside];

        UIView* mainView = [[UIView alloc] initWithFrame:CGRectMake(self.frame.size.width*.1,self.frame.size.height*.1,self.frame.size.width*.8,self.frame.size.height*.8)];

        mainView.backgroundColor = [UIColor whiteColor];
        _displayMainView = mainView;        

        [self addSubview:_displayMainView];
        [self addSubview:closeButton];
        [self addSubview:button];

        mainView = nil;
        closeButton = nil;
    }
    return self;
} 
```

如何检测旋转？这是作为另一个现有视图之上的模式。如果重要的话，这是一个仅限 iPad 的应用程序。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-26T06:26:51.807

您可以让设备开始生成旋转通知：

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

添加您自己的选择器作为设备旋转通知的观察者：

```
 [[NSNotificationCenter defaultCenter] addObserver: self selector:   @selector(deviceOrientationDidChange:) name: UIDeviceOrientationDidChangeNotification object: nil]; 
```

然后编写您的通知处理程序

```
- (void)deviceOrientationDidChange:(NSNotification *)notification {
     //Obtain current device orientation
     UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

      //Do my thing
 } 
```

请记住在调用自定义 UIView 的 dealloc 方法时（或完成后）删除观察者，并停止生成设备更改通知。

```
-(void) dealloc{
[[NSNotificationCenter defaultCenter] removeObserver: self];
[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications];
} 
```

这对您的问题有帮助吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-15T08:59:01.420

我正在重写@clearwater82 对 Swift 3 的回答，因为他的方法是我最终使用的方法：

我在视图的`init`方法中添加了以下代码（对于控制器，它将在它的`viewDidLoad`方法中）：

```
// Handle rotation
UIDevice.current.beginGeneratingDeviceOrientationNotifications()
NotificationCenter.default.addObserver(
    self,
    selector: #selector(self.orientationChanged(notification:)),
    name: NSNotification.Name.UIDeviceOrientationDidChange,
    object: nil
) 
```

然后我将该`orientationChanged`方法添加到我的视图中。您可以根据需要重命名此方法，只需记住在上面的代码片段中也对其进行重命名：

```
// Called when device orientation changes
@objc func orientationChanged(notification: Notification) {
    // handle rotation here
} 
```

最后，我添加了`deinit`删除视图时删除不必要通知的方法：

```
deinit {
    NotificationCenter.default.removeObserver(self)
    UIDevice.current.endGeneratingDeviceOrientationNotifications()
} 
```

最后一个片段所做的是从通知观察者中删除视图本身，然后阻止设备生成其他旋转通知。这种方法是我需要的，但您可能不想在删除视图时停止生成通知。

我希望这是有用的，干杯

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T22:26:56.913

我认为你有两个选择：

1.  您将视图放在自定义中[`UIViewController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)并覆盖该`shouldAutorotateToInterfaceOrientation:`方法以对您想要支持的所有方向返回 YES。视图控制器将自动旋转并调整内容（您的视图）的大小。您只需确保拥有正确的 autoresizeMask（或约束，如果您使用自动布局）。
2.  您可以使用加速度计直接观察设备方向的变化。然后，您可以在需要时调整视图。

如果可以的话，这确实是您应该选择的第一种方法。

# batch-processing - 运行 BATCH 时，最小化窗口并返回最大化

> ID：12126100
> 
> 赞同：1
> 
> 时间：2012-08-25T22:21:12.273
> 
> 标签：batch-processing, batch-file

我无法为我的问题找到一个好的答案。也许有人已经有了答案，并且很乐意分享。我正在运行一个批处理文件，并且在某个时间，我想最小化批处理窗口。一些代码稍后，将其最大化或返回到实际大小。

```
@echo off
mode con cols=100 lines=100
echo My batch is NOT minimized. This message is from a normal window! 
start "window_will_be_minimized" k:\Folder20\MiniMaxi.exe 
start /wait "" cmd /c c:\Folder00\Drawing.exe 
```

**Drawing.exe 现在正在运行。**

```
REM --- At this point my batch window is minimized and the MiniMaxi.exe is closed
REM --- until the Drawing.exe is closed. 
```

**Drawing.exe 现在已关闭。**

```
REM --- Immediatelly my batch window must return to its previous size.
        Therefore, the MiniMaxi.exe will be launched and then closed

start "window_will_be_MAXImized" k:\Folder20\MiniMaxi.exe
echo Again, this message is from a normal window
pause > nul
exit /b 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:53:05.590

坏消息：批处理文件无法控制自己的窗口是最小还是最大；这必须在调用批处理文件时完成，此时您可以告诉它运行/min、/max 或都不运行/default。新批次将不知道此设置。正如 EitanT 所提到的，它必须由应用程序管理。只有在开始新批次时，您才能控制*该*批次是最小、最大还是正常。

对于时间，您唯一的控制是暂停（就像您在脚本中所做的那样），或者通过执行大约 10 秒的延迟来延迟脚本继续执行的某种方法：

```
ping -n 10 localhost >nul 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T03:34:09.267

但是，我不能按照您的要求做，如上所述，您可以在*最小化*、*最大化*或*默认*状态下生成批处​​理文件。以下将创建一个新的批处理，将`xmise.bat`其*最小化* 并退出。新批次`xmise.bat`将启动 Drawing.exe，等待，启动原始批次（自定义大小的窗口）并退出。然后原始批次将删除创建的批次`xmise.bat`。

你可以写

> 一些代码稍后/隐藏的“清理”功能

到 xmise.bat

```
@echo off
mode con cols=100 lines=100
if "%var%"=="" echo My batch is NOT minimized. This message is from a normal window!
if "%var%"=="created" echo Again, this message is from a normal window
pause>nul 
if "%var%"=="created" del xmise.bat&cls&goto :end
set var=created
echo start /wait "" "Drawing.exe">xmise.bat
echo start "" cmd /c "%~n0.bat">>xmise.bat
echo exit>>xmise.bat
start /min xmise.bat
:end
exit 
```

**Drawing.exe 现在正在运行。**

```
REM --- At this point the xmise.bat window is minimized and the original.bat (%~n0.bat) exits
REM --- until the Drawing.exe is closed. 
```

**Drawing.exe 现在已关闭。**

```
REM --- Immediatelly my batch window must return to its previous size.
REM --- the original.bat will be relaunched custom size, xmise.bat exits, & then is deleted. 
```

# c - bss 和数据的最大大小

> ID：12126103
> 
> 赞同：8
> 
> 时间：2012-08-25T22:21:27.197
> 
> 标签：c, linux

我想在编译时声明我的 C 程序中的所有变量，例如：

```
char cache[CACHE_SIZE];
char udp_ring[MAX_UDP_PACKET_SIZE*MAX_REQUESTS];
int  num_packets;
char error_codes[NUM_ERRORS][MAX_ERROR_STRING]= {
    {"Unknown user\n"},
    {"Wrong password\n"},
    ....
}; 
```

问题是，当 C 程序中的变量进入 BSS 或 DATA 段时，它们的大小是否有任何限制？例如，如果我声明 8GB RAM 的 CACHE_SIZE，它会起作用吗？32位或64位有什么区别吗？我计划在 Linux 上运行该程序，并且我的 RLIMIT_DATA 配置没有任何限制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T23:00:08.733

您将能够管理内核允许进程处理的尽可能多的虚拟内存：这将取决于架构。

例如，在 x86 架构（没有 x86-64 长模式）上，Linux 默认将进程看到的虚拟内存拆分为 3GB 用于进程，1GB 用于内核（即使启用了 PAE）：您的进程不会能够处理超过 3GB 的虚拟内存（包括文本部分、数据、bss、堆、堆栈、共享对象等）

如果您静态分配所有缓冲区并且内核无法将其放入进程虚拟地址空间中，它将在启动时被终止：使用 8GB 缓冲区将主要导致在 32 位架构上出现这种行为。

如果您不想依赖 glibc 的内存管理功能（`malloc`...），您可以推出自己的内存管理库并强制您的进程使用它`LD_PRELOAD`，这样您就可以定义一个`malloc/calloc/realloc/free`（使用`sbrk()`）实现匹配你自己的要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T07:04:38.427

如果您不想与 链接`glibc`，您应该找到一些奇怪的方法来进行系统调用（在[syscalls](http://en.wikipedia.org/wiki/Syscall) [(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)手册页中列出）。任何应用程序都必须执行一些系统调用（例如[open(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)、[read(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)、[write(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html) ...）。Glibc 还用于为系统调用提供 C 接口。[汇编howto](http://tldp.org/HOWTO/Assembly-HOWTO/)解释了如何在没有libc 的情况下直接使用一些汇编代码（例如通过C 指令）调用系统调用`asm`。另请参见过时的[_syscall(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/_syscall.2.html)手册页。还要寻找[VDSO](http://blogs.igalia.com/aperez/2009/01/13/the-story-of-linux-gatevdsoso/)。

[您可以使用mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)和`munmap(2)`系统调用更改您的地址空间。这是分配和释放内存的基本操作。Glibc 使用它们来实现`malloc`和`free`.

将所有变量声明为全局变量或静态变量，无论是初始化（`.data`段）还是清除（`.bss`段）都有一个明显的缺点：您不能动态使用内存资源。并且拥有大量初始化数据会产生巨大的成本：您的 ELF 可执行文件将非常庞大。

但是您确实应该解释为什么要避免使用 Glibc。用 C 编码时很难避免它。您可以使用较轻的替代品，例如[Dietlibc](http://www.fefe.de/dietlibc/)。

# python - __setattr__ 破坏代码？

> ID：12126111
> 
> 赞同：0
> 
> 时间：2012-08-25T22:22:24.340
> 
> 标签：python, setattr

这是我的代码

```
class Human(object):
  def __init__(self, name, gender):
    self.name = name
    self.gender = gender
    print 'Hi there, I am '+ self.name

  def ThankHeavens(self):
    return 'Thanks Gods!'

class Soldier(Human):
  def __init__(self, name, gender, rank):
    super(Soldier, self).__init__(name, gender)
    self.rank = rank
    print self.rank + ' reporting!'

class Officer(Soldier):
  def __init__(self, name, gender, rank, num_subordinates):
    super(Officer, self).__init__(name, gender, rank)
    self.num_subordinates = num_subordinates

  def __setattr__(self, rank, value):
    if rank not in ['lieutenant', 'captain', 'major', 'colonel', 'commander', 'admiral']:
      print 'Invalid officer rank'
    else:
      super(Officer, self).__setattr__(rank, value) 
```

每当我尝试创建军官时，它就会中断：

```
helo = Officer(name='Agathon',
               gender='m',
               rank='lieutenant',
               num_subordinates=0)

Traceback (most recent call last):
  File "hw7.py", line 39, in <module>
    num_subordinates=0)
  File "hw7.py", line 20, in __init__
    super(Officer, self).__init__(name, gender, rank)
  File "hw7.py", line 14, in __init__
    super(Soldier, self).__init__(name, gender)
  File "hw7.py", line 7, in __init__
    print 'Hi there, I am '+ self.name
AttributeError: 'Officer' object has no attribute 'name' 
```

为什么它不能识别我在定义时输入的名称`helo`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T22:30:16.737

您尚未发布的是您创建的两条消息`__setattr__`：

```
Invalid officer rank
Invalid officer rank 
```

这些来自以下几行：

```
self.name = name
self.gender = gender 
```

由于这些失败，您以后无法检索名称：

```
 print 'Hi there, I am '+ self.name 
```

使固定：

```
def __setattr__(self, key, value):
    if key == "rank" and value not in [.....] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T03:34:21.653

您在任何时间以任何方式设置`__setattr__`任何属性时都会调用您，包括在通过超类初始化期间。`Officer``__init__`

当`__setattr__`被调用时，`self`将是`Officer`实例，`rank`将是**要设置的属性的名称**，并且`value`将是该属性所需的值。

您所做的是使`Officer`该类可以对`.lieutenant`列表中的值具有等，但不能具有`.rank`（或`.name`或`.gender`）-并且您实际上根本没有限制该属性的值。

这比你想要的更深奥的魔法；您显然想限制专门设置**属性时使用****的****值**。为此，请使用属性。**`.rank`**

# mysql - GROUP BY 选择具有每月定期日期的记录

> ID：12126115
> 
> 赞同：2
> 
> 时间：2012-08-25T22:23:22.520
> 
> 标签：mysql

我正在处理股票价格数据并进行此查询以获取每月一个价格，例如 Google（来自每个工作日价格的表格）：

`SELECT * FROM pricedata WHERE symbol='GOOG' GROUP BY symbol,month(date),year(date)`

```
2012-07-02
2012-06-01
2012-05-01 
```

如果我删除 WHERE 子句，它将返回该月的最后一个日期而不是第一个日期（当然还有更多行，因为表中的所有符号都会显示出来），如

`SELECT * FROM pricedata GROUP BY symbol,month(date),year(date)`

```
2012-07-31
2012-06-29
2012-05-31 
```

我知道“服务器可以从每个组中自由选择任何值”，所以我可能很幸运第一个查询按我的意愿工作，但我想知道为什么会发生这种变化。

是否有一个快速的解决方案来持续获得每个月的第一个值？我还没有发现任何类似的问题，但它们可能在那里......第二个查询并不重要，但我试图为每月记录建立一个缩小大小的表并遇到了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:29:32.160

> 我想知道为什么会发生这种变化。

服务器可以自由地从组中选择任何值，但实际上它会选择它找到的第一个值。如果你有一个索引，`symbol`那么它将选择第一个，因为它们在索引中排序。如果您删除该`WHERE`子句，它将使用另一个索引或聚集键。这将以不同的顺序排序，因此服务器遇到的第一行将不同。

基本上你不应该依赖获得任何特定的价值。正如文档所说，服务器可以自由选择任何值，并且没有指定它选择的值。

> 是否有一个快速的解决方案来持续获得每个月的第一个值？

```
SELECT symbol, MIN(date) AS date
FROM pricedata
GROUP BY symbol, month(date), year(date) 
```

# css - 针对 IE 4096 选择器/样式表限制的 Rails 资产管道解决方案

> ID：12126118
> 
> 赞同：34
> 
> 时间：2012-08-25T22:23:47.043
> 
> 标签：css, ruby-on-rails, internet-explorer, asset-pipeline, sprockets

# 问题

[Microsoft 的 IE 支持文档](http://support.microsoft.com/kb/262161)解释说，在 Internet Explorer 6-9 中：

> 1.  前 31 个样式标签之后的所有样式标签都不会应用。
> 2.  不应用前 4,095 条规则之后的所有样式规则。
> 3.  在使用@import 规则持续导入外部样式表的页面上，导入其他样式表的页面，超过三层深度的样式表将被忽略。

[脚本演示](http://demos.telerik.com/testcases/BrokenTheme.aspx)有很多证据表明这个问题。另见[祝福](http://blesscss.com/)。

# 需要解决方案

我们需要一种方法来拆分资产管道中 Sprockets 生成的已编译样式表，以保持最大选择器计数低于 4096，并在已部署的 Rails 应用程序的 HTML 中链接到它们。**我们如何将已处理资产（特别是样式表）的编译输出作为参数传递给可以修改文件的方法？**

请参阅以下尝试以了解起点。如果有人可以帮助我找到一种方法来使任一操作（或全新的解决方案），那就太棒了！

# 现有的解决方案尝试

*   [Bless](http://blesscss.com/)是为了解决这个问题而创建的，它通过拆分样式表以将每张表的最大选择器计数保持在限制之下。Bless 在 node.js 中的服务器上运行。我还没有看到一个 Ruby 等效的。Eric Fields 尝试将[使用 compass 编译的资产提供给 Bless](http://ericdfields.com/2012/02/29/bless-this-css-mess-in-compass/)（在节点中运行），但该解决方案依赖于 Compass 处理资产编译，因此似乎不适用于资产管道。*请注意，Bless 不是链接到多个样式表，而是将`@include`语句添加到第一个表中，这可能是避免接触标记的方法。*

*   当 Christian Peters (@crispy)[发现这个问题](https://stackoverflow.com/questions/6953345/sass-dealing-with-the-ie-4095-selectors-per-stylesheet-restriction)时，他[实现了一个](https://gist.github.com/1131536)像 Bless 这样的分离器，它也将 Compass 输出传递到一个自定义模块，这在 Rails 3.1 之前工作得很好。后来，他[使用 SprocketsEngine 调整了他的拆分器，以便与 Rails Asset 管道集成](https://gist.github.com/2398394)。我已经尝试实现新代码，但它似乎不能自动运行（尽管在控制台中手动调用拆分器时工作正常）。

## 相关信息

有关 IE 6-9 中的 CSS 限制的更多信息，请参阅以下相关问题：

*   [IE 8 对每页的样式表数量有限制吗？](https://stackoverflow.com/questions/3211991/does-ie-8-have-a-limit-on-number-of-stylesheets-per-page)
*   [Internet Explorer 的 CSS 规则限制](https://stackoverflow.com/questions/9906794/internet-explorers-css-rules-limits)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T22:14:19.097

*我们有一个自动化的（尽管有点尴尬）解决方案在生产中用于具有资产管道的 Rails 3.1 应用程序。Ryan 已经在他的问题中引用了该解决方案，但我试图提出一个更全面的答案。*

资产管道通过不同的 Sprocket 引擎对资产进行管道传输。

因此，您可能有一个`ie.css.sass.erb`通过 ERB Sprocket 引擎运行然后传递给 Sass Sprocket 引擎等的 a，但它始终是一个文件输入和一个文件输出。

在这个特殊问题中，我们希望有 1 个入站文件和 n 个出站文件。我们还没有找到使用链轮实现这一点的方法。但我们找到了解决方法：

提供一个`ie.css.sass`包含完整样式表和一个`ie_portion2.css.sass.split2`只导入完整 ie.css 文件的文件：

```
//= include 'ie.css' 
```

对于`split2`文件扩展名，我们注册了一个 Sprockets Engine：

```
require 'css_splitter'
Rails.application.assets.register_engine '.split2', CssSplitter::SprocketsEngine 
```

在使用 split2 扩展评估资产时，我们将其内容传递给 CssSplitter 并指示它提取第 2 部分（> 4095 个选择器）：

```
require 'tilt'
module CssSplitter

  class SprocketsEngine < Tilt::Template
    def self.engine_initialized?
      true
    end

    def prepare
    end

    def evaluate(scope, locals, &block)
      part = scope.pathname.extname =~ /(\d+)$/ && $1 || 0
      CssSplitter.split_string data, part.to_i
    end
  end
end 
```

这也适用于其他部分（split3，...）。

[CSS 拆分器](https://gist.github.com/2398394#file_lib_css_splitter.rb)识别出样式表可以拆分为少于 4096 个选择器的部分的有效位置，并返回请求的部分。

结果是一个 ie_portion2.css，您必须在头部链接并单独预编译。

我希望我修改后的[CSS Splitter Gist](https://gist.github.com/2398394)足够完整，可以使用该解决方案。

**更新：**

上面提到的 CssSplitter 现已作为 gem 发布：[https ://github.com/zweilove/css_splitter](https://github.com/zweilove/css_splitter)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T11:23:58.170

我在生产中使用的解决方案非常简单，不是自动化的，但效果很好。对我来说，这是显而易见的事情，所以也许你已经考虑过了并且不喜欢它——不管怎样，我们开始吧：

我假设您正在使用 sass，如果没有，我认为您应该:)

**首先**，将您`application.css.scss`的文件拆分为单独的文件，例如： `application_a.css.scss`和`application_b.css.scss`

**其次**，在您的`application.css.scss`文件中，使用：

```
@import "application_a"
@import "application_b" 
```

**第三**，在您的布局模板中，包括完整的文件或两个部分：

```
<!--[if !IE]><!-->
  # link to application.css.scss
<!--<![endif]-->

<!--[if IE]>
  # link to application_a.css.scss
  # link to application_b.css.scss
<![endif]--> 
```

旁注：不要通过资产管道生成样式表清单文件，通过 sass 和它的`@import`语句来生成，其他一切都会导致问题。

# android - ListView 获取点击行的详细信息

> ID：12126119
> 
> 赞同：-1
> 
> 时间：2012-08-25T22:24:13.717
> 
> 标签：android, listview, android-layout, onclick

android API 8.
我想以 listView 和以下方式显示一些数据：
项目 1
- 项目 1.1
- 项目 1.2
项目 2
- 项目 2.1
- 项目 2.2
- 项目 2.3

到目前为止，我用一个主 ListView 解决了：每个项目由一个 TextView（用于项目 N）和一个辅助 ListView（在 LinearLayout 内）组成。对于这个列表，每个项目都是一个 TextView（对于 NM 项目）。
点击Item AB后，我需要检索其相关数据并调用其他Activity。
现在我在承载主 ListView 的 Activity 中定义了 onClick(View) 成员。这可行，但我不知道如何从 View 对象中获取列表的单击行和相关数据。

它是一个好的解决方案还是存在更好的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T04:35:51.620

我认为你应该使用[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)

# xpath - 如何制定此 XPath 表达式以选择同级？

> ID：12126120
> 
> 赞同：3
> 
> 时间：2012-08-25T22:24:22.500
> 
> 标签：xpath

如何制定 XPath 表达式以获取以下 HTML的`a`节点 ( ) 之后的第一个输入节点的属性值：`value A`

```
<a href="http://www.link.com">link</a>
<input value="value A" />
<input value="value B" /> 
```

我试过了：

```
//input[(preceding-sibling::a[1])]/@value 
```

`a`但是，当我只想要节点是最近的先前兄弟节点的节点的属性时，这会获取两个输入节点的 value 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:46:32.017

您在`[1]`错误的节点上使用谓词。您希望第一个输入具有，而不是在给定级别`preciding-sibling::a`的第一个元素之后的所有输入。`a`

这应该会产生正确的结果： `//a/following-sibling::input[1]/@value`

这意味着：对于`a`文档中任何级别的每个元素，选择它后面的第一个`input`元素，同时是它的兄弟元素。然后读取它的`value`属性。

对于此输入：

```
<xml>
  <p>
    <input value="value A" />
    <a href="http://www.link.com">link</a>
    <input value="value B" />
    <input value="value C" />
  </p>
  <p> 
    <a href="http://www.link.com">link</a>
    <input value="value D" />
    <input value="value E" />
    <a href="http://www.link.com">link</a>
    <input value="value F" />
  </p>
</xml> 
```

它返回：

*   值 B
*   值 D
*   值 F

## 编辑

`a`如果在它之后和第一个元素之间没有元素，则此方法有效`input`。

例如，输入如下：

```
 <a href="http://www.link.com">link</a>
    <strong>OMG NOEZ!</strong>
    <input value="value A" /> 
```

值 A 仍然被选中

如果没问题，保持上面的表达式。如果不是，请像这样修改它以过滤其他元素：

`//a/following-sibling::*[1][self::input]/@value`

这将选择 的第一个后续兄弟`a`，无论标签是什么，只有在它被选中后，它才会检查实际标签。这样`input`就不会选择在同一级别上更远的那个。

# jquery-ui - 创建带有淘汰赛的 jqueryUI 可排序列表

> ID：12126121
> 
> 赞同：1
> 
> 时间：2012-08-25T22:24:42.267
> 
> 标签：jquery-ui, knockout.js

我有一个允许用户移动项目的 UL 列表。我与淘汰赛绑定，因为我想将他们的选择保存回数据库。

排序有效，但是 UI 会复制 UI 中拖动的元素。viewmodel 的数据是正确的，我可以看到它没有在数据中创建额外的元素。

[我在这里](http://jsfiddle.net/spnz/JVhZe/)有一个小的 jsfiddle 示例

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:23:43.573

也许？

```
<script type="text/javascript">
$(function () {
                var curr;
                $("#giftListEditor").sortable({
                    start: function (event, ui) {
                        curr = viewModel.gifts()[ui.item.index()];
                    },
                    update: function (event, ui) {
                        var currIndex = ui.item.index();
                        viewModel.gifts.remove(curr);
                        viewModel.gifts.splice(currIndex == -1 ? 0 : currIndex, 0, curr);
                    }
                }).disableSelection(); 
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:57:35.807

更新了 jsFiddle：http: [//jsfiddle.net/JVhZe/2/](http://jsfiddle.net/JVhZe/2/)

我已经替换`ui.item.removeData('previous_index');`为`ui.item.remove()`. `removeData`是一种用于清理自定义数据的 jQuery 特定方法。您不必调用此方法，因为当您取消绑定/删除元素时，Knockout 已经为您执行此操作。

顺便说一句，我建议您看一下 Knockout 可排序列表的出色实现：

[http://jsfiddle.net/rniemeyer/QWgRF/](http://jsfiddle.net/rniemeyer/QWgRF/)

# css - 对 Rails App 和 Bootstrap 的简单 CSS 误解

> ID：12126123
> 
> 赞同：0
> 
> 时间：2012-08-25T22:24:59.943
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我想在我的网站主页上的主 div 中添加一个包装器。我[还](http://www.54footy.com)没有购买 ssl 证书。

我正在使用引导程序，这个 div 有*容器*类。我想将它包装在一个 div 中以提供背景，类似于这个[twillio 网站](http://www.twilio.com/)。

这是一个简单的 css 操作（或者我认为），所以我确定我在 rails/bootstrap 方面遗漏了一些东西。根据 Rails 约定，我使用了几种布局，经过大约 3 个小时的尝试来解决这个问题，我担心在这里遗漏了一些更深层次的东西。感谢您对此的帮助。

```
<div class="center hero-unit" id="homegreen">
<h1>54footy</h1>
<iframe width="550" height="315" src="http://www.youtube.com/embed/1hQmlFzqJyo" frameborder="0" allowfullscreen></iframe>
<p>Your Heroes here -54footy</p>    
<%= link_to "Pick your Hero", signup_path, class: "btn btn-large btn-primary" %>    
<input type="text" data-provide="typeahead" data-source="["Option 1","Option 2","Option 3"]">
</div> 
```

应用程序.html.erb

```
<!DOCTYPE html>
<html>
 <head>
  <title><%= full_title(yield(:title)) %></title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <%= render 'layouts/shim' %>
 </head>
 <body>
   <%= render 'layouts/header' %>
   <div class="container">
    <% flash.each do |key, value| %>
     <%= content_tag(:div, value, class: "alert alert-#{key}") %>
    <% end %>
    <%= yield %>
    <%= render 'layouts/footer' %>
    <%= debug(params) if Rails.env.development? %>
   </div>
 </body>
</html> 
```

当我尝试为背景插入一个 div 时，它就像容器一样居中，我本质上希望它拉伸页面的整个长度，并让 div 现在在背景中居中内容。与我列为参考的 twillion 站点非常相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:29:10.173

我看到的第一件事是你没有关闭它

```
<div class="center hero-unit" id="homegreen"> 
```

尝试`</div>`在最后添加一个...：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:21:39.893

在我的静态页面控制器中，我添加了

```
render :layout => false 
```

然后，我复制了我的应用程序布局并将其放在我的主视图中。从那里我能够以我以前无法做到的方式操纵家庭 css。基本上将问题中的上述代码添加到问题中的后一个代码中。

```
 <!DOCTYPE html>
 <html>
  <head>
   <title><%= full_title(yield(:title)) %></title>
   <%= stylesheet_link_tag    "application", :media => "all" %>
   <%= javascript_include_tag "application" %>
   <%= csrf_meta_tags %>
   <%= render 'layouts/shim' %>
  </head>
  <body>
    <%= render 'layouts/header' %>
     <div id="wrapper" style="height:600px; background-color:red;">
      <div class="container">
    <% flash.each do |key, value| %>
      <%= content_tag(:div, value, class: "alert alert-#{key}") %>
    <% end %>
        <div>
          <span id="home_pic">
            <img src="http://placehold.it/550x315">
          </span>
        </div>
       </div>
     </div>
   <div class="container">
      <%= render 'layouts/footer' %>
     <%= debug(params) if Rails.env.development? %>
   </div>   
  </body>
 </html> 
```

这一点没有什么干的。其他任何人都想到了更好的方法来做到这一点，我很肯定这只是我的解决方案。谢谢。

# vb.net - 如何在 VB.net 中使用 IMAP 命令从 Gmail.com 服务器获取响应？

> ID：12126124
> 
> 赞同：1
> 
> 时间：2012-08-25T22:25:11.240
> 
> 标签：vb.net, email, imap

我正在使用 Visual Basic 2010 专业版，我正在开发一个软件，其中一部分是获取 [Inbox] 电子邮件，但我什至无法从服务器获得响应。

我做了这些步骤：

1.  [确保我的 Gmail.com 帐户正在使用 IMAP](http://support.google.com/mail/bin/answer.py?hl=en&answer=78799)
2.  我使用的是两步验证方法，所以我使用的是我的应用程序密码。
3.  我正在使用这段代码：

    ```
     Imports System.Net.Sockets
        Imports System.IO
        Imports System.Text        
        Imports System.Net.Security

        Public Class ImapClient1 

        Dim ServerNm As String 
        Dim UsrNm As String
        Dim PassStr As String
        Dim _IntPort As Integer
        Dim ImapClient As New Net.Sockets.TcpClient
        Dim NetworkS_stream As NetworkStream
        Dim m_sslStream As SslStream
        Dim Read_Stream As StreamReader
        Dim StatResp As String

        Function Login(ByVal Sstream As SslStream, ByVal Server_Command As String)
        ImapClient = New TcpClient(ServerNm, _IntPort)
        NetworkS_stream = ImapClient.GetStream 'Read the stream
        Sstream = New SslStream(NetworkS_stream)
        Dim Read_Stream2 = New StreamReader(Sstream)
        Server_Command = Server_Command ' + vbCrLf
        m_buffer = System.Text.Encoding.ASCII.GetBytes(Server_Command.ToCharArray())
        Sstream.Write(m_buffer, 0, m_buffer.Length)
        Dim Server_Reponse As String
        Server_Reponse = Read_Stream2.ReadLine()
        Return Server_Reponse

    End Function 
    ```

当我将此登录功能与 [button] 一起使用时：

```
 ListBox1.Items.Clear()
        StatResp = Login(m_sslStream, "LOGIN " + UsrNm + " " + PassStr + " ") & vbCrLf
        ListBox1.Items.Add(StatResp) 
```

我在 [ListBox] 控件中一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T02:02:31.027

每个 IMAP 命令都需要在其前面添加一个“Tag”前缀，这是您需要生成的随机字母数字字符串。通常，登录过程如下所示：

```
A001 LOGIN user password
A002 SELECT INBOX
A003 ...
...
A010 LOGOUT 
```

# android - 当活动由 clearTop 完成时，SetResult 不起作用

> ID：12126125
> 
> 赞同：2
> 
> 时间：2012-08-25T22:25:13.653
> 
> 标签：android, android-activity

**问题概述**：ActivityA 以 ActivityB 启动`startActivityForResult`。ActivityB 使用 设置其结果`setResult`，然后使用 启动 ActivityC `startActivity`。ActivityC 然后启动`singleTop`ActivityA 并设置`CLEAR_TOP`标志。我希望这可以完成 ActivityB 并调用 ActivityA 的`onActivityResult`方法。不幸的是，在重新启动 ActivityA 时不会调用此方法。

* * *

**ActivityA 代码**：我使用`startActivityForResult()`来自 ActivityA 的以下代码启动了一个活动 (ActivityB)：

```
....
final Intent intent = new Intent(this, ActivityB.class);
startActivityForResult(intent, 0);   
.... 
```

ActivityA 中的以下代码等待结果：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == ACTIVITY_RESULT){ 
        doSomethingSpecial();
    }
} 
```

**ActivityB 代码**：我有一个确认对话框。当用户单击“是”时，他们将设置此活动的结果，即

```
private void showConfirmationDialog(String message, final String username) {
    AlertDialog.Builder alert = new AlertDialog.Builder(this)
    .setMessage(message)
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            Intent intent = new Intent(this, ActivityC.class);

            setResult(ActivityA.ACTIVITY_RESULT);

            startActivity(intent);
        }
    })
    .setNegativeButton("No", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
        }
    });
    alert.show();
} 
```

**ActivityC 代码**：准备就绪后，在 ActivityC 中单击按钮时会调用以下代码：

```
private void startActivityA(){
    Intent intent = new Intent(this, ActivityA.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intent);
} 
```

我期望`doSomethingSpecial()`调用 ActivityA 中的函数，但这没有发生。

**注意**：顺便说一句，如果替换了 ActivityB 代码，而不是从对话框中启动 ActivityC，而是调用了 finish()——即 ActivityC 永远不会打开而 B 只是简单地关闭，那么`doSomethingSpecial()`确实会被调用。所以这个问题似乎源于对back stack和clear top的功能缺乏了解。

任何帮助将不胜感激，为什么这不符合预期！我对此提出了一些技巧，但我最感兴趣的是为什么会发生这种情况，以提高我对活动堆栈的理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T04:24:21.587

我认为，从用户的角度来看，您从后来的活动（C）“开始”前一个活动（A），而不是仅仅“回到”它，这会感觉很奇怪。

我相信你应该从 B 开始 C 与`startActivityWithResult()`. 然后当活动 C 完成时调用`finish()`。在 B 的`onActivityResult()`电话中`setResult()`，然后`finish()`。

# iphone - UIPopoverController 不显示在 iPad 上

> ID：12126126
> 
> 赞同：0
> 
> 时间：2012-08-25T22:25:22.640
> 
> 标签：iphone, ios, ipad

我有一个适用于 iPhone 和 iPad 的通用应用程序。使用下面的代码，我试图从照片库或相机中获取图片。对于 iphone，它工作正常，但对于 iPad，当我单击警报视图中的任何按钮时，它不显示任何内容。可能是什么问题？

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {

    if (buttonIndex == 0) {
        UIImagePickerController* picker = [[UIImagePickerController alloc] init];
        picker.allowsEditing = YES;
        picker.delegate   = self;
        camera = NO;
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

        [self presentModalViewController:picker animated:YES];

    } else if (buttonIndex == 1) {

        BOOL hasCamera = [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera];
        camera = YES;
        UIImagePickerController* picker = [[UIImagePickerController alloc] init];
        picker.allowsEditing = YES;
        picker.delegate   = self;
        picker.sourceType = hasCamera ? UIImagePickerControllerSourceTypeCamera : UIImagePickerControllerSourceTypePhotoLibrary;

        [self presentModalViewController:picker animated:YES];

        }
    }else {
    // We are using an iPad
    UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
    imagePickerController.delegate = self;
    popoverController=[[UIPopoverController alloc] initWithContentViewController:imagePickerController];
    popoverController.delegate=self;
    [popoverController presentPopoverFromRect:[self.view bounds] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    }

}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if (clickedButton == YES) {

            UIImage *originalImage, *editedImage;

            editedImage = (UIImage *) [info objectForKey: UIImagePickerControllerEditedImage];

            originalImage = (UIImage *) [info objectForKey: UIImagePickerControllerOriginalImage];

            if (editedImage) {

                thisImage = editedImage;

            } else {

                thisImage = originalImage;

            }

            imageThis.image = thisImage;

        NSData *imageData = UIImageJPEGRepresentation(thisImage, 30);

        [defaults setObject:imageData forKey:@"thisImage"];

        [defaults synchronize];

     //   [[NSUserDefaults standardUserDefaults] setObject:UIImagePNGRepresentation(thisImage) forKey:@"thisImage"];

    }
    else {

        UIImage *originalImage, *editedImage;

        editedImage = (UIImage *) [info objectForKey: UIImagePickerControllerEditedImage];

        originalImage = (UIImage *) [info objectForKey: UIImagePickerControllerOriginalImage];

        if (editedImage) {

            thatImage = editedImage;

        } else {

            thatImage = originalImage;

        }

        imageThat.image = thatImage;

        NSData *imageData = UIImageJPEGRepresentation(thatImage, 30);

        [defaults setObject:imageData forKey:@"thatImage"];

        [defaults synchronize];

        //[[NSUserDefaults standardUserDefaults] setObject:UIImagePNGRepresentation(thatImage) forKey:@"thatImage"];

    }

    [picker dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T01:34:38.563

那是因为您在 iPad 上使用 UIActionSheet。在 iPad 上，UIActionSheet 使用 UIPopoverController 来呈现工作表，并且在 UIActionSheetDelegate 方法中，当 UIActionsheet 使用的第一个 UIPopoverController 未被隐藏时，您将使用另一个 UIPopoverController。您需要知道的是，任何时候屏幕上都只能显示一个 UIPopoverController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:51:46.200

就是这一行：

```
[popoverController presentPopoverFromRect:[self.view bounds] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

您需要从控制器视图内的矩形呈现（我假设这`self`是一个视图控制器），否则您会得到奇怪的结果。在刚才的测试中，我有一个弹出框拒绝出现，还有一个弹出框的箭头指向屏幕中心。例如：

```
[popoverController presentPopoverFromRect:[myButtonOutlet frame] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

# php - php mysql update if else 总是返回 true

> ID：12126129
> 
> 赞同：0
> 
> 时间：2012-08-25T22:25:55.077
> 
> 标签：php

我已经尝试了我能找到的每一个例子来使这个工作正常，但没有成功。看起来很简单，如果`$number`不是跟踪行中的值，我想要的只是一个错误。

```
<?php
mysql_connect("localhost", "user", "pass") or die("Connection Failed");
mysql_select_db("mydb") or die("Connection Failed");
$number = $_POST['number'];
$date = $_POST['datechange'];
$removed = $_POST['remover'];
$query = "UPDATE Custody SET DateOut = '$date' ,RemovedBy = '$removed' WHERE Tracking= '$number'";  
if (mysql_query($query)) {
    echo "updated";
} else {
    echo "fail";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:32:11.097

您正在寻找[mysql_affected_rows()](http://php.net/manual/en/function.mysql-affected-rows.php)。您可以在更新后检查它并轻松检测到您的错误。

但是，关于实际代码，您应该真正注意“建议的替代方案”部分，[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)现在是 PHP 数据库访问更安全的选择。问题中的代码有明确的[SQL 注入问题](http://en.wikipedia.org/wiki/SQL_injection)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T22:32:26.143

如果您想知道是否修改了行，请使用[mysql_affected_rows](http://www.php.net/manual/en/function.mysql-affected-rows.php)，也就是说 mysql_* 函数是旧的且未维护的，您应该使用[msqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)代替准备好的语句，因为您将未经处理的数据放入查询中

# iphone - ImageView 和 NSString 变量在切换视图后重置

> ID：12126135
> 
> 赞同：0
> 
> 时间：2012-08-25T22:27:06.243
> 
> 标签：iphone, ios, uiviewcontroller, background, uiimageview

我正在设计一个 iPhone 程序，它可以在一个显示不同视图的视图中按下“自定义”圆角矩形按钮（我使用内置情节提要上的模式连接在视图之间切换），它是可以自定义第一个视图的背景。自定义屏幕（第二个屏幕）有几个按钮来选择使用以下代码的背景：

**视图控制器.h：**

```
@interface{
...
IBOutlet UIImageView *backgroundImageTest;

...

}

...

@property (strong,nonatomic) NSString *backgroundImageName;

@property (retain, nonatomic) IBOutlet UIImageView *backgroundImageTest;

... 
```

**视图控制器.m：**

```
- (IBAction)setJungleBackground:(id)sender {

backgroundImageName=@"jungle.png";

backgroundImageTest.image=[UIImage imageNamed:@"jungle.png"];
}

- (IBAction)setArcticBackground:(id)sender {

backgroundImageName=@"arctic.png";

backgroundImageTest.image=[UIImage imageNamed:@"arctic.png"];
} 
```

对于每个可能的背景。

同样在 ViewController.m 中：

```
- (void)viewDidLoad
{

if(!notFirstTime){

    notFirstTime=YES;

    ...

    backgroundImageName=@"white.png";

}

...

backgroundImageTest.image=[UIImage imageNamed:backgroundImageName];

...

[super viewDidLoad];

} 
```

每次切换视图时，firstTime 布尔值重置为 NO，并且背景保持默认背景 (@"white.png")。如果我用@"jungle.png" 替换@"white.png"，背景可以工作，但不能切换到任何其他背景。

我对两个视图都使用一个 ViewController。到目前为止，它似乎工作得很好，除了这个小问题。我应该使用多个 ViewController 吗？我不确定在什么情况下我应该这样做。

另外，我不确定是否应该在变量的属性声明中使用保留或强。

我对 iPhone 编程比较陌生，非常感谢任何建议。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:33:09.707

viewDidLoad 在你的视图控制器被实例化后被调用——你似乎在不断地重新创建你的视图控制器实例。避免这种情况，然后使用 viewDidAppear。

# php - 关注网站访问者在做什么？

> ID：12126136
> 
> 赞同：0
> 
> 时间：2012-08-25T22:27:06.090
> 
> 标签：php, logging

假设我有一个网站，由一家托管公司托管，对 php 和 apache 的日志文件（访问、错误）文件的访问范围有限。

但仍然想知道通过 GET 和 POST 访问或提交到我的站点，特别是我的数据库的 URL/查询？

我有一个主文件，包含在我网站上的所有其他页面中，我可以将该文件转换为可以通过 POST 和 GET 捕获请求数据的简单 PHP 脚本吗？

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:39:50.210

为此，您可以使用[Google Analytics 。](http://google.com/analytics)它将能够告诉您网站上发生的一切。

您还可以使用服务器全局

```
$_SERVER['QUERY_STRING'] 
```

访问每个页面上的查询字符串并将其存储在数据库中或更可能存储在日志文本文件中。

因此，在您包含在每个页面上的文件中，您可以将其添加到日志文件中：

记录日期：

```
time(); // will give you the number of seconds from the Unix Epoch. This can then be translated back into a readable format with the date() function. 
```

记录ip：

```
$_SERVER['REMOTE_ADDR']; // Records the IP address of the client requesting the page. 
```

记录网址：

```
 $_SERVER['REQUEST_URI']; // will give you the full url entered. 
```

如果不进入代码并将其记录在出现的位置，发布数据将很难记录所有提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:36:41.093

您可以使用[Google Analytics](http://google.com/analytics)获得有关用户如何与您的网站互动的一些非常详细的统计数据。它是免费的，并提供了很好的信息。您需要做的就是在您要跟踪的每个页面上包含一段 javascript（使用包含的 PHP 文件很容易做到）

# turing-machines - 有没有什么简单的方法可以解决“构建图灵机……”的问题？

> ID：12126137
> 
> 赞同：3
> 
> 时间：2012-08-25T22:27:43.483
> 
> 标签：turing-machines, formal-languages

我理解图灵机的逻辑。当给出图灵机时，我可以理解它是如何工作的以及它是如何停止的。但是当它被要求构建一个图灵机时，它就更加困难了。

有什么简单的方法可以找到以下问题的答案：

```
Construct a Turing machine a*b* 
Construct a Turing machine a*b*a* 
etc. 
```

我想绘制这些图灵机的图表？有没有什么方法，比如填表然后画图等等？

我在网上搜索了很多关于这个主题的内容。只有答案（只有图表）。没有解释它是如何解决的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-13T14:07:41.960

您给出的两个示例是正则表达式，并且确实存在将正则表达式转换为自动机的简单算法方法 - 即 NFA。一旦有了 NFA，您就可以使用简单的结构将它们变成 TM。

将正则表达式转换为 NFA 的算法如下所示：

规则 1：如果`r = a`对于某个字母符号 a，则 NFA 为`r`：

```
 a
--->q0--->(q1) 
```

规则 2：如果`r = st`对于正则表达式`s, t`和`M1`和分别是和`M2`的 NFA ，那么对于 的 NFA是：`s``t``r`

```
 e
--->M1--->M2 
```

也就是说，初始状态是 的`M1`，接受状态是 的，并且从 的所有（以前）接受状态到 的（以前）初始状态`M2`都有新的空转换。`M1``M2`

规则 3：如果`r = s + t`, 对于正则表达式`s, t`, and`M1`和分别是和`M2`的 NFA ，那么对于 的 NFA是：`s``t``r`

```
 e
--->q0--->M1
     | e
     +--->M2 
```

也就是说，初始状态是一个新状态`q0`，最终状态是`M1`和的状态`M2`，并且添加了两个空转换，从新的初始状态到 和 的（以前的）初始`M1`状态`M2`。

规则 4：如果`r = s*`对于正则表达式`s`，并且`M`是 的 NFA `s`，那么对于 的 NFA`r`是：

```
 +------+
     |  e   |
     V      |
--->(q0)--->M 
```

也就是说，`q0`添加了一个新的初始状态，接受状态是 的`M`，`q0`并且从 的接受状态添加了新的空`M`转换`q0`。

在您的示例中，我们得出 NFA 如下：

```
a: Rule 1           a
             --->q0--->(q1)

b: Rule 1           b
             --->q0--->(q1)

a*: Rule 4         +-------------+
                   |      e      |
                   V             |
             --->(q0)--->q0'--->(q1)
                      e      a

b*: Rule 4         +-------------+
                   |      e      |
                   V             |
             --->(q0)--->q0'--->(q1)
                      e      b

a*b*: Rule 2      +-----------+
                  |           | e
                  V e      a  |
             --->q0--->q0'--->q1
                  |           |
                e |           | e
                  +-----------+--+
                  |              | e
                  V   e      b   |
                 (q2)--->q2'--->(q3)

a*b*: Rule 2      +-----------+
                  |           | e
                  V e      a  |
             --->q0--->q0'--->q1
                  |           |
                e |           | e
                  +-----------+
                  |           | e
                  V  e    b   |
                 q2--->q3'--->q3
                  |           |
                e |           | e
                  +-----------+--+
                  |              | e
                  V   e      a   |
                 (q4)--->q5'--->(q5) 
```

有了 NFA，TM 可以按如下方式构建：

1.  与 NFA 相同的州
2.  消耗输入的转换将磁带头向右移动。
3.  空的转换根本不移动磁带头。
4.  TM 永远不会覆盖其输入。
5.  当 TM 向右移动足够远后遇到空白时，如果它处于 DFA 的接受状态，则进入 halt-accept，否则进入 halt-reject。

# ios - 用户点击静态表格视图单元格时如何启用编辑模式？

> ID：12126138
> 
> 赞同：0
> 
> 时间：2012-08-25T22:27:58.383
> 
> 标签：ios, tableview, edit

在我的基本应用程序中，我目前将数据存储在一个没有问题的表中，当用户选择一行时，它将相关数据加载到一个带有静态表视图（三个单元格）的新 VC 中。现在，我希望能够在用户点击它们时（可能在编辑模式下）编辑这三个单元格的值，就像在联系人应用程序中一样。我该怎么做呢？另外，有没有办法在编辑模式下禁用删除功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:43:05.017

调用`setEditing:animated:`表格视图的方法并实现所需的委托方法，例如

*   `tableView:canEditRowAtIndexPath:`
*   `tableView:commitEditingStyle:forRowAtIndexPath:`
*   `tableView:commitEditingStyle:forRowAtIndexPath:`

我建议阅读这一章

[插入和删除行和节](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/ManageInsertDeleteRow/ManageInsertDeleteRow.html#//apple_ref/doc/uid/TP40007451-CH10-SW1)

# asp.net - ASP.NET MVC Forms 身份验证 - 它如何工作并保持身份验证？

> ID：12126142
> 
> 赞同：9
> 
> 时间：2012-08-25T22:28:55.480
> 
> 标签：asp.net, asp.net-mvc-3, forms-authentication, security

我正在使用表单身份验证的网站上工作。我对身份验证系统的工作方式很感兴趣，因为当我最初打开站点中的任何页面时，它会将我重定向到登录名，*并且没有任何控制器/操作在其中放置任何授权逻辑*。

*   通过下面的配置，MVC 或 ASP.NET 是否会自动确定您是否通过了身份验证？（就像我说的，控制器中没有代码可以“重定向”或确保用户被授权。
*   如果 ASP.NET 处理这个问题，在什么情况下您需要授权您的操作/控制器？（即 [Authorize] 属性）
*   表单身份验证如何工作？我对如何保持“授权”特别感兴趣？（即饼干？？）

网站 web.config 技术：MVC 3、Entity Framework 4.1（代码优先）、ASP.NET 4

```
<configuration>
<system.web>
        <authentication mode="Forms">
          <forms loginUrl="~/Account/Index" timeout="2880" />
        </authentication>

        <membership defaultProvider="CodeFirstMembershipProvider">
          <providers>c
            <clear />
            <add name="CodeFirstMembershipProvider" type="Vanguard.AssetManager.Services.Security.MembershipService" applicationName="/" />
          </providers>
        </membership>

        <roleManager enabled="true" defaultProvider="CodeFirstRoleProvider">
          <providers>
            <clear />
            <add name="CodeFirstRoleProvider" type="Vanguard.AssetManager.Services.Security.RoleService" applicationName="/" />
            <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" />
          </providers>
        </roleManager>

      </system.web>

      <location path="Admin">
        <system.web>
          <authorization>
            <allow roles="Admin" />
            <deny users="*" />
          </authorization>
        </system.web>
      </location>

      <location path="Content/packages">
        <system.web>
          <authorization>
            <allow roles="Admin" />
            <deny users="*" />
          </authorization>
        </system.web>
      </location>

      <location path="Home">
        <system.web>
          <authorization>
            <deny users="?" />
          </authorization>
        </system.web>
      </location>

      <location path="CheckIn">
        <system.web>
          <authorization>
            <allow roles="CheckIn, Admin" />
            <deny users="*" />
          </authorization>
        </system.web>
      </location>

      <location path="Assignment">
        <system.web>
          <authorization>
            <allow roles="Assignment, Admin" />
            <deny users="*" />
          </authorization>
        </system.web>
      </location>
<configuration> 
```

该站点使用 MVC 区域，我认为这就是该部分所指的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T22:36:31.907

> 通过下面的配置，MVC 或 ASP.NET 是否会自动确定您是否通过了身份验证？（就像我说的，控制器中没有代码可以“重定向”或确保用户被授权。

是的，它使用`<location>`web.config 中的部分来仅允许具有管理员角色的用户访问`/Admin/*`路径。

> 如果 ASP.NET 处理这个问题，在什么情况下您需要授权您的操作/控制器？（即 [Authorize] 属性）

在 ASP.NET MVC 中，使用`[Authorize]`属性是控制哪些操作需要授权的首选方法，而不是`<location>`像您那样使用 web.config 中的标记。原因是 ASP.NET MVC 使用路由，您不应该在 web.config 中硬编码路径，这就是该`<location>`部分发生的情况。因此，请始终使用该`[Authorize]`属性来装饰需要身份验证的控制器/操作。

> 表单身份验证如何工作？我对如何保持“授权”特别感兴趣？（即饼干？？）

饼干，是的。您还可以查看 MSDN 上的[以下文章](http://msdn.microsoft.com/en-us/library/ff647070.aspx)，该文章解释了表单身份验证的工作原理。

# c++ - 常量字段中的初始化列表不生成 operator=

> ID：12126144
> 
> 赞同：0
> 
> 时间：2012-08-25T22:29:17.290
> 
> 标签：c++, visual-studio-2010, compiler-construction, constants, initializer-list

由于某种原因，编译器无法为此类生成 operator= 因为 const 字段 _constFoo 的初始化，我只想知道为什么。使用VS2010。

```
class Foo {
public:
    Foo(int f) : _constFoo(f) { }
    int getFoo() const { return _constFoo; }
    //void operator=(const Foo &f) { memcpy(this, &f, sizeof(Foo)); }
private:
    const int _constFoo;
};

int main(int argc, char *argv[])
{
    Foo f(5);
    cout << f.getFoo() << endl;
    f = Foo(6); //error C2582: 'operator =' function is unavailable in 'Foo'
    cout << f.getFoo() << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:38:17.197

该标准不允许它：

### C++03 12.8。复制对象

> 12) [...] 如果隐式定义了复制赋值运算符的类具有：
> 
> *   **类型的非静态数据成员`const`，或**
> *   引用类型的非静态数据成员，或
> *   具有不可访问的复制赋值运算符的类类型（或其数组）的非静态数据成员，或
> *   具有不可访问的复制赋值运算符的基类。
> 
> [...]

强调我的。

所以你的程序格式不正确。通过不定义您自己的赋值运算符，编译器试图隐式定义一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:35:35.633

这是因为默认的赋值运算符，它只是复制数据，不能用于“const”。因此，不能盲目地复制对象。

# nhibernate - 如果我的对象是以前失败的事务的一部分，NHibernate 将不会保存它

> ID：12126153
> 
> 赞同：1
> 
> 时间：2012-08-25T22:30:58.150
> 
> 标签：nhibernate, transactions, oracle11g

我将 NHibernate 与 Oracle 一起使用，我让 NHibernate 处理获取表主键的下一个序列值。在下面的代码中，我似乎无法让 NHibernate 在第二次调用 transaction.Commit() 时保存我的对象。数据库表 ReportSource 已经有一条记录，其中 Name 列设置为“test2”，并且我在 Name 列上设置了唯一约束。所以我希望第一个 transaction.Commit() 失败。但是，为什么在我使用当前不在数据库中的名称更新 ReportSource 对象后，第二个 transaction.Commit() 失败了？

```
 using (var session = Ioc.Container.Get<ISession>())
        {
            var db = new ReportSource { Name = "test2", ConnectionString = "test", Provider = "test" };
            using (var transaction = session.BeginTransaction())
            {
                try
                {
                    session.SaveOrUpdate(db);
                    transaction.Commit();
                }
                catch (Exception ex)
                {
                    transaction.Rollback();
                }
            }
            using (var transaction = session.BeginTransaction())
            {
                try
                {
                    db.Name = "test4";
                    //fails with or without the below statement
                    //session.SaveOrUpdate(db);
                    transaction.Commit();
                }
                catch (Exception ex)
                {
                    transaction.Rollback();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:21:32.823

如果在数据库调用期间发生异常，则不应尝试在同一会话中执行任何其他操作。相反，应该丢弃当前会话，因为它不再处于一致状态。这就是 NHibernate 的文档所[指出的](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-exceptions)：

> 如果 ISession 抛出异常，您应该立即回滚事务，调用 ISession.Close() 并丢弃 ISession 实例。ISession 的某些方法不会使会话保持一致状态。

您应该创建另一个会话并重试，而不是尝试在同一个会话中进行另一个事务。

```
using (var session = Ioc.Container.Get<ISession>())
{
    var db = new ReportSource { 
        Name = "test2", ConnectionString = "test", Provider = "test" };
    using (var transaction = session.BeginTransaction())
    {
        try
        {
            session.SaveOrUpdate(db);
            transaction.Commit();
        }
        catch (Exception ex)
        {
            transaction.Rollback();
        }
    }
}
using (var session = Ioc.Container.Get<ISession>())
{
    using (var transaction = session.BeginTransaction())
    {
        try
        {
            // assign to the new session
            session.Update(db);
            db.Name = "test4";
            session.SaveOrUpdate(db);
            transaction.Commit();
        }
        catch (Exception ex)
        {
            transaction.Rollback();
        }
    }
} 
```

# android - Android 从应用程序文件夹中读取 png / 我需要移动它们吗？

> ID：12126155
> 
> 赞同：-1
> 
> 时间：2012-08-25T22:31:59.780
> 
> 标签：android, image, loading, bundle, assets

我的应用程序中有大约 150 多个 PNG 需要不断阅读。

我是否必须像打开数据库一样将这些文件从资产文件夹移动到 /data/data/myApp.com/？

或者

有没有办法，就像在 iPhone 中一样，只从应用程序包中读取？

好像不是将我的 PNG 添加到资产中，而是将它们添加到 myApp.com/images 并从那里读取，**无论它是安装在内部还是安装到 SD 卡？**

任何帮助表示赞赏

问候~大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:42:38.313

`Context.getAssets()` [http://developer.android.com/reference/android/content/Context.html#getAssets](http://developer.android.com/reference/android/content/Context.html#getAssets) () 返回一个`AssetManager`允许你读取捆绑数据的。例如

```
InputStream is=getAssets().open("image.png",AssetManager.ACCESS_STREAMING); 
```

将从您的资产文件夹中读取 image.png。

# wordpress - 在简码中使用 IF 语句会破坏主题

> ID：12126156
> 
> 赞同：0
> 
> 时间：2012-08-25T22:32:00.777
> 
> 标签：wordpress, shortcode

我一直在设置一个带有多个选项的滑块简码，这是一个标题，使用元框作为滑块的自定义帖子类型，以提供诸如是否显示标题、标题文本等选项。基本上我用过的地方

```
if ( $captionCheckbox !== '1') { 
```

至

```
 endif;

$slider .= '</li>'; 
```

if 和 endif 之间的所有内容都破坏了主题，但我不明白为什么，如果有帮助，这里是整个短代码。

```
function ls_slider_shortcode( $atts, $content = null ) {

$slider = '<section id="slider" class="flexslider container clearfix">';

    $slider .= '<ul class="slides">';

        $sliderQuery = "post_type=slider";

        query_posts( $sliderQuery );

        if ( have_posts() ) : while ( have_posts() ) : the_post();

            $slideImage = get_the_post_thumbnail( $post->ID, 'slider');

            $slider .= '<li>';
                $slider .= $slideImage;

                $captionCheckbox = get_post_meta( get_the_id(), 'ls_show_slider_caption', true);
                $productCheckbox = get_post_meta( get_the_id(), 'ls_show_button_link', true);
                $position        = get_post_meta( get_the_id(), 'ls_caption_position', true);
                $heading         = get_post_meta( get_the_id(), 'ls_caption_heading', true);
                $text            = get_post_meta( get_the_id(), 'ls_caption_text', true);
                $productLink     = get_post_meta( get_the_id(), 'ls_project_link', true);

                    if ( $captionCheckbox !== '1' ) {

                        $slider .= '<div class="caption' . $position . '>';
                            $slider .= '<div class="body">';
                                $slider .= '<h2 class="caption-title">' . $heading . '</h2>';
                                $slider .= '<p>' . $text . '</p>';
                            $slider .= '</div>';

                            if ( $captionCheckbox !== '1' ) {
                                $slider .= '<a href="' . $productLink .'">View Project</a>';
                            }

                            endif;

                        $slider .= '</div>'
                    }

                    endif;

            $slider .= '</li>';

        endwhile; endif; wp_reset_query();

    $slider .= '</ul>';

$slider .= '</section>';

return $slider;

}

add_shortcode('slider', 'ls_slider_shortcode'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:41:45.210

```
function ls_slider_shortcode( $atts, $content = null ) {

$slider = '<section id="slider" class="flexslider container clearfix">';

    $slider .= '<ul class="slides">';

        $sliderQuery = "post_type=slider";

        query_posts( $sliderQuery );

        if ( have_posts() ) : while ( have_posts() ) : the_post();

            $slideImage = get_the_post_thumbnail( $post->ID, 'slider');

            $slider .= '<li>';
                $slider .= $slideImage;

                $captionCheckbox = get_post_meta( get_the_id(), 'ls_show_slider_caption', true);
                $productCheckbox = get_post_meta( get_the_id(), 'ls_show_button_link', true);
                $position        = get_post_meta( get_the_id(), 'ls_caption_position', true);
                $heading         = get_post_meta( get_the_id(), 'ls_caption_heading', true);
                $text            = get_post_meta( get_the_id(), 'ls_caption_text', true);
                $productLink     = get_post_meta( get_the_id(), 'ls_project_link', true);

                    ?>

                    <?php if ( $captionCheckbox !== '1' ): ?>

                        <?php

                        $slider .= '<div class="caption' . $position . '>';
                            $slider .= '<div class="body">';
                                $slider .= '<h2 class="caption-title">' . $heading . '</h2>';
                                $slider .= '<p>' . $text . '</p>';
                            $slider .= '</div>';

                            ?>

                            <?php if ( $captionCheckbox !== '1' ): ?>
                                <?php $slider .= '<a href="' . $productLink .'">View Project</a>'; ?>
                            <?php endif; ?>

                        <?php endif; ?>

                        <?php

                        $slider .= '</div>'

                        ?>

                    <?php endif; ?>

                    <?php

            $slider .= '</li>';

        endwhile; endif; wp_reset_query();

    $slider .= '</ul>';

$slider .= '</section>';

return $slider;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:34:29.193

在这种形式中，您需要*使用*`endif`大括号或用冒号打开要关闭的块：

```
<?php if ( $captionCheckbox !== '1'): ?>

  // do stuff

<?php endif; ?> 
```

如果你使用大括号，右大括号就足够了。

```
<?php if ( $captionCheckbox !== '1') { ?>

  // do stuff

<?php } ?> 
```

# php - 计算找到水平

> ID：12126164
> 
> 赞同：1
> 
> 时间：2012-08-25T22:33:31.883
> 
> 标签：php

如果我知道 的值`$c_xp`，我怎么能在`$c_level`不写 100 个 if 语句的情况下找到。

```
Level     XP
1         0-99
2         100
3         500  +400 xp points from last level
4         1000 +500 xp points from last level
5         1600 +600 xp points from last level
6         2300 +700 xp points from last level
7         3100 +800 xp points from last level
8         4000 +900 xp points from last level 
```

等等。

```
$c_level = ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T22:47:56.730

如果我正确理解您的模式：

```
$c_level = floor((-1 + sqrt(1 + 4 * ($c_xp + 500) / 100 * 2)) / 2) - 1; 
```

您正在添加 100，然后是 400，然后是 500、600、700、800，等等。因为有 100 种破坏模式，我们现在将忽略它。

假设你正在追求模式

```
Level     XP

1         0-99
2         100-299
3         300-599
4         600-999
5         1000-1499
6         1500-2099 
```

这会更容易，因为增量是 100、200、300 等等。低于 100 的为 1 级。低于 300 的为 2 级。低于 600 的为 3 级。方便：

```
0+1=1 (hence 100)
0+1+2=3 (hence 300)
0+1+2+3=6 (hence 600) 
```

等等等等第四个。前 x 个整数的总和是 0.5 * x * (1 + x) = y，其中 y 是总和 - 请参阅[http://en.wikipedia.org/wiki/Summation](http://en.wikipedia.org/wiki/Summation)。

在我们的例子中，我们有 100 倍的总和。我们可以简单地将 XP 除以 100 得到 y，然后使用二次公式求解 x。如果 XP 为 600，则等级为 4。

600 / 100 = 6，并且 0.5 * x * (1 + x) = 6。二次公式告诉我们 x 是 3。由于我无法解释的原因，我们必须在其上使用 floor() 并加 1。长话短说，在 500 点以下缺乏模式的情况下进行调整，我们将 500 和主题 2 添加到最终数量，以使公式生效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T22:41:05.163

1.  将 level-xp 对存储在数组中：

    ```
    $levels = array(
        1 => 99,
        2 => 499,
        3 => 999
    ); 
    ```

    请注意，与级别相关的值是给定级别的最大值，即多一个点将与下一个级别相关联。

2.  遍历levels数组，检查玩家的XP是否小于level最大值：

    ```
    $level = null;
    $xp = 845;

    foreach ($levels as $l => $max) {
        if ($xp <= $max) {
            $level = $l;
            break;
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T22:43:35.483

试试这个：

```
<?php
    $levels=Array(
    1=>99,
    2=>100,
    3=>500,
    4=>1000,
    5=>1600,
    6=>2300,
    7=>3100,
    8=>4000
    );

    //this will probably be pulled from somewhere else,
    //take it out:
    $c_xp=499;
    foreach($levels as $level=>$xp) {
        if($c_xp>=$xp) $c_level=$level;
        else break;
    }
    echo $c_level;

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T23:04:56.837

试试这个

```
$maxLevel = 10;
$exp[2] = 100;

if($c_xp < 100)
    $c_level = 1;
elseif($c_xp < 500)
    $c_level = 2;

else
{   
   $increment = 400;

   for($i = 3; $i<= $maxLevel; $i++)
    {

        $prevExp = $exp[$i-1];
        $calc = $increment + $prevExp;
        if($c_xp == $calc)
        {
            $c_level = $i;
            break;
        }
        elseif($c_xp > $prevExp && $c_xp < $calc)
        {
            $c_level = $i-1;
            break;
        }
        $exp[$i] = $calc;
        $increment += 100;
    }
}

$c_level = isset($c_level) ? $c_level : $maxLevel;
echo "level $c_level"; 
```

将 maxLevel 变量切换到您想要的最大级别。

可能是一个更有效的解决方案，但我对算法很烂，现在是周末。

# javascript - 在 HTML 文档中使用 XML 文件中的数据

> ID：12126166
> 
> 赞同：1
> 
> 时间：2012-08-25T22:33:53.043
> 
> 标签：javascript, html, xml, youtube-api, xmldom

正如标题所示，我希望能够在 HTML 页面中使用 XML 文件中的数据。让我解释一下该页面正在尝试做什么，以帮助解释我需要帮助的内容..

完成后，HTML 页面将通过搜索查询进入 YouTube 服务器，并检索由搜索生成的 XML 文件，其中包含最新信息。然后页面将查看给定的 XML 文件，找到`<yt:videoid>`节点，并将字符串传输到 HTML 文件。然后 HTML 文件可以使用字符串（可能在 javascript 中）来制作嵌入视频代码。

因此，由于搜索查询，结果页面将始终包含最新的视频。

到目前为止，我已经找到了获取 XML 文件的链接（如下）并查看了 XML（链接： [https ://gdata.youtube.com/feeds/api/videos?author=inthegamesroom&orderby=published&prettyprint=true&start-index =1&max-results=1&v=2](https://gdata.youtube.com/feeds/api/videos?author=inthegamesroom&orderby=published&prettyprint=true&start-index=1&max-results=1&v=2) )

我发现我想要的信息在一个名为`<yt:videoid>`which is under `<media:group>`which is under`<feed>`

在网上做了一些研究（因为我不是javascript程序员，我只有一个基础知识，我发现你可以使用XML DOM从HTML页面中读取和适配XML文件。但是XML DOM代码的问题是它要求将 XML 文件托管在实际服务器本身上，这显然不是 - 因为它在 youtube 上。

有谁知道我可以读取数据并将其放入 javascript 变量的方法？我不一定希望你花很多时间写一些代码，但至少希望你能引导我走向正确的方向？

非常感谢高级，

蚂蚁。

PS，请记住我不是 JS 或 HTML 程序员。我只知道基础知识，如果我在这篇文章中做错了什么，请告诉我，因为这是我在 stackoverflow 上的第一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:55:59.450

示例 php 代码：

```
// content of example.php
<?php

$xml = simplexml_load_file('https://gdata.youtube.com/feeds/api/videos?author=inthegamesroom&orderby=published&prettyprint=true&start-index=1&max-results=1&v=2');
foreach( $xml->children() as $child) {
    if($child->getName() == 'yt:videoid'){
        echo $child->asXML();
    }
}

?> 
```

示例 jQuery 代码：

```
var ytUrlThing;
$.post('example.php', function(data) { ytUrlThing = data; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:25:58.180

无需在浏览器端做任何事情来获取 XML 或解析它。

Youtube 的 API 是公开的，允许任何人（？）查询它，这意味着您只需要一个简单的 ajax 调用来获取 xml 文件。使用一些额外的 jQuery（或任何其他库），您可以提取视频的 id：

```
jQuery(document).ready(function() {
    // request xml data
    jQuery.ajax('https://gdata.youtube.com/feeds/api/videos?author=inthegamesroom&orderby=published&prettyprint=true&start-index=1&max-results=1&v=2',{
        dataType:'xml',
        success: function(data,status, xhr ) {
           // process response
           var $_d =$(data);

           var videoTag = $_d.find('yt\\:videoid'); // doesn't seem to work
           var videoTag = $_d.find('videoid'); // works
           var videoId = videoTag.text();

           // do the embedding
           embedYT(videoId);
        }
    });

   // a simple way to embed a youtube player in a page
   function embedYT(id) {
        jQuery(document.body).append("<iframe class='youtube-player' type='text/html' width='640' height='385' src='http://www.youtube.com/embed/"+id+" frameborder='0'></iframe>")
   }
}); 
```

[jsFiddle](http://jsfiddle.net/GAffm/2/)

# php - 混合 PHP 和 Rails

> ID：12126168
> 
> 赞同：1
> 
> 时间：2012-08-25T22:34:05.757
> 
> 标签：php, ruby-on-rails, ruby

对于我的一个项目，我正在使用 PHP 开发一个网站。我想知道是否可以将它与 Rails 混合使用？

Ruby on Rails 会在 GitHub 上查询数据，我想用 PHP 处理它，这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:42:29.887

一切皆有可能。您只需要编写一个带有 RoR 的小型 Web 服务，它从 github 获取数据并以定义的格式将其提供给您的 php 前端（例如，使用 json 的 rest 服务）。

但我认为如果一个人用两种语言编写一个网站是没有意义的......

# c# - 为什么 DateTime.Parse 这么慢？

> ID：12126169
> 
> 赞同：10
> 
> 时间：2012-08-25T22:34:19.753
> 
> 标签：c#, .net, datetime

我对速度如此之慢感到震惊`DateTime.Parse`。这段代码运行大约需要 100 秒；如果我使用正则表达式版本，则需要 100 毫秒。这里发生了什么？

```
Stopwatch sw = new Stopwatch();
sw.Start();
var re = new Regex(@"(\d\d)/(\d\d)/(\d\d\d\d) (\d\d):(\d\d):(\d\d)", RegexOptions.Compiled);
for (int i = 0; i < 100000; i++)
{
    //var m = re.Match("08/01/2012 23:10:12");
    DateTime.Parse("08/01/2012 23:10:12", CultureInfo.CreateSpecificCulture("en-US"));
}
sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds); 
```

**编辑**：马克是对的，移动`CultureInfo.CreateSpecificCulture("en-US")`循环外有帮助。我之前没有这样做的原因是我使用 VS Profiler 分析了这段代码，它显示了以下结果：

![在此处输入图像描述](../Images/d546e5fcf5e9f4cec154e9b41f50070a.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-25T22:36:55.587

这不是一个公平的测试。

1.  调用`CultureInfo.CreateSpecificCulture("en-US")`是缓慢的部分。将其移出循环，存储结果并重用它。

2.  您的正则表达式只处理一种特定格式，但`DateTime.Parse`可以处理许多不同的输入格式。它必须决定它理解的多种格式中的哪一种是正确的。如果您事先知道格式是什么，请使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)而不是`DateTime.Parse`.

固定代码如下：

```
CultureInfo ci = CultureInfo.CreateSpecificCulture("en-US");
for (int i = 0; i < 100000; i++)
{
    DateTime.ParseExact("08/01/2012 23:10:12", "MM/dd/yyyy HH:mm:ss", ci);
} 
```

通过这两个更改，我得到`DateTime.ParseExact`和正则表达式方法几乎相同。

并且您的正则表达式接受一些无效的日期时间，例如`00/00/0000 99:99:99`. 如果你修复它，让它只接受有效的日期时间，它会更慢。

# java - 如何在java中定义枚举二维数组？

> ID：12126173
> 
> 赞同：0
> 
> 时间：2012-08-25T22:35:31.460
> 
> 标签：java

这对我来说是一个错误。我认为这在语法上是正确的。我没有java经验。只有 C++。有人可以告诉我我做错了什么吗？

```
private enum Site{
    OPEN, BLOCKED }
Site[][] grid;

final Site DEFAULT_STATE = Site.OPEN;
/**
 * Constructor.
 */
public GridClass(int N)
{
    for(int i = 0; i < N; i++)
    {
        for(int j = 0; j < N; i++)
        {
            grid[i][j] = DEFAULT_STATE;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:38:09.250

你只是在声明`grid`，你没有定义它。

你需要类似的东西：

```
Site[][] grid = new Site[N][N]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T22:39:28.953

问题是您在`grid`尚未为其分配内存的情况下进行访问。

将此添加为构造函数中的第一行：

```
grid = new Site[N][N]; 
```

您收到的错误称为 a `NullPointerException`，因为该`grid[i][j]`行试图取消引用空指针`grid`.

* * *

此外，您的第二个 for 循环说`i++`; 它应该是`j++`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T02:25:40.677

您需要在构造函数中创建数组，因为这是您知道维度的地方。这不能在静态初始化程序中完成，因为此时 N 不在范围内。

```
public GridClass(int N) {
   grid = new Site[N][N];
   for (int i=0;i<N;i++) {
      Arrays.fill(grid[i], DEFAULT_STATE);
   }
} 
```

# html - 如何将我的样式按钮与表单链接？

> ID：12126175
> 
> 赞同：-1
> 
> 时间：2012-08-25T22:35:47.590
> 
> 标签：html, forms, button, submit

这是我的代码：

```
<div class="container">

    <form id="signup">

        <div class="inputs">

            <input type="email" required="required" placeholder="Your Email" autofocus=""/>

            <input type="password" required="required" placeholder="Desired Password" />

            <a id="submit" onclick="confirmation()">REQUEST INVITE NOW</a>

        </div>

    </form>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:40:27.313

您可以只使用一个真正的提交输入元素`<input type="submit" id="submitbutton" />`，然后使用 CSS 来设置按钮的样式

```
input#submitbutton{
/*CSS GOES HERE*/
} 
```

或者，如果您不使用外部样式表，请使用类似的方式在 HTML 中添加 CSS`<input type="submit" id="submitbutton" style="CSS GOES HERE" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T03:37:55.277

发布的不是按钮，只是附有事件的文本。如果您希望 [submit] 输入看起来相似，请参阅`style=""`代码示例，修改所需效果。此输入将帮助您传递`<input type="email" />`和 `<input type="password" />`值。在电子邮件、密码和提交输入中使用`name="email"`而不是属性以使它们正常工作。`id="email"`

```
 <form action="" method="post">
      <input type="email" name="email" required="required" placeholder="Your Email" autofocus=""/>
      <input type="password" name="password" required="required" placeholder="Desired Password" />
      <input type="submit" name="PICK-ME" value="REQUEST INVITE NOW" style="background: transparent; border-top: 0; border-right: 0; border-bottom: 1px solid #333333; border-left: 0; color: #42413C; display: inline; margin: 0; padding: 0; font-family: Verdana, Arial, Helvetica, sans-serif; font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;" />
    </form> 
```

# java - 用于更改/修改代码的用户定义注释

> ID：12126178
> 
> 赞同：1
> 
> 时间：2012-08-25T22:36:03.687
> 
> 标签：java, annotations

例如，我有这个代码：

```
// ...
for (int i = 0; i < 5000; ++i) {
    for (int j = 0; j < 7000; ++j) {
        // Do something...
    }
}
// ... 
```

我可以使用注释更改它吗？如果是，我该如何执行？像这样的东西：

```
// ...
@SplitFor(value="i < 2000, j < 3000")
for (int i = 0; i < 5000; ++i) {
    for (int j = 0; j < 7000; ++j) {
        // Do something...
    }
}
// ... 
```

应翻译为：

```
// ...
for (int i = 0; i < 2000; ++i) {
    for (int j = 0; j < 3000; ++j) {
        // Do something...
    }
}
// ... 
```

有可能吗？如果是——如何？

PS：这可以用于简单的并行化：例如，我可以生成拆分循环以在 Fork/Join 框架中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:33:23.637

通常，您可以通过以下两种方式之一执行此操作：

1.  注释处理器，它将查看注释并更改类代码
2.  Aspectj，它可以找到注释，并进行代码的运行时编织，但我不确定它有什么能力对代码进行块替换。通常人们将它用于之前/之后/周围的建议，而不是替换代码。

# r - R Blotter 演示无法在 linux 下运行

> ID：12126192
> 
> 赞同：3
> 
> 时间：2012-08-25T22:38:29.907
> 
> 标签：r, demo, blotter

我正在寻找在 linux 下运行 r blogger 演示程序，并在运行 demo(amzn_test) 时出现以下错误

```
> # update the portfolio stats
> updatePortf("amzn_port",Dates="2010-01-14")
Error in if (nzchar(intervals[1])) s <- as.POSIXlt(do.call(firstof, parse.side(intervals[1]))) : 
  argument is of length zero 
```

有趣的是，使用相同版本的 R，一切都在 Windows 中运行良好。我对 R 很陌生，并试图解决问题。我确实检查了 Linux 和 Windows 中的 sessioInfo，除了我认为特定于操作系统的语言环境之外，它们是匹配的。

在 Linux 上：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8   
 [6] LC_MESSAGES=en_US.UTF-8    LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] lattice_0.20-6          blotter_0.8.10          FinancialInstrument_1.0 quantmod_0.3-17         TTR_0.21-1              Defaults_1.1-1         
[7] xts_0.8-6               zoo_1.7-7              

loaded via a namespace (and not attached):
[1] grid_2.15.1  tools_2.15.1 
```

在 Windows 上：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T23:26:26.307

此问题已在 Rev. 1133 中修复。代码在列表中使用该`time`函数，而不是在列表包含的 xts 对象上。看起来这个问题已经有一段时间了，但是直到昨天更改为显式使用，正在调度`xts:::time.xts`一个不同的方法，它很高兴地返回了与预期不同的值而没有错误。`time`感谢您的报告。

如果您在检查、构建和安装最新版本时需要帮助，请参阅[这篇文章](https://stackoverflow.com/a/11105132/967840)

# php - PDO - 在非对象上调用成员函数 fetch()

> ID：12126193
> 
> 赞同：2
> 
> 时间：2012-08-25T22:38:33.740
> 
> 标签：php, database, pdo, fetch, fatal-error

我的错误：

`( ! ) Fatal error: Call to a member function fetch() on a non-object in C:\wamp\www\PDO\index.php on line 13`

我的代码：

```
<?php 

$config['db'] = array(
    'host'      =>      'localhost',
    'username'  =>      'root',
    'password'  =>      '',
    'dbname'    =>      'learnpdo'
);

$db = new PDO('mysql:host='.$config['db']['host'].';dbname'.$config['db']['dbname'], $config['db']['username'], $config['db']['password']);
$query = $db->query("SELECT articles . title FROM articles");

while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
    echo $row['title'];
} 
```

我知道有很多这样的问题，但似乎没有一个答案有效。

谢谢

* * *

编辑：

上面是固定的，感谢下面的每一个人。:) 现在我遇到了另一个错误：

`Notice: Undefined index: id in C:\wamp\www\PDO\index.php on line 7`

这是我的数据库：

[http://d.pr/i/vcod](http://d.pr/i/vcod)

这是我的代码：

```
$db = new PDO('mysql:host=localhost;dbname=learnpdo;charset=UTF-8', 'root', '');
$query = $db->query("SELECT `articles`.`title` FROM `articles`");

while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
    echo $row['id'];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T22:41:11.047

`PDO::query()`如果查询失败，则返回`false`（显然是非对象）。所以这是你的问题。**您的查询有错误。**

我建议您在 PDO 中设置错误模式。

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO:ERRMODE_EXCEPTION); 
```

然后捕获错误以查看您的查询有什么问题。

`PDO::ERRMODE_SILENT`存在的不同错误模式是`PDO::ERRMODE_WARNING`和`PDO:ERRMODE_EXCEPTION`。[您可以在 PDO](http://www.php.net/manual/en/book.pdo.php)的 PHP 手册中了解它们。在编写 SQL 时知道如何调试很重要，也是**不必问这类问题的关键。**

## **关于你的其他问题**

如果你想使用它，你必须选择 id 列。

```
SELECT * FROM articles 
```

或者

```
SELECT id, title FROM articles 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T22:44:22.800

代替：

```
$query = $db->query("SELECT articles . title FROM articles"); 
```

尝试：

```
$query = $db->query("SELECT title FROM articles"); 
```

## 编辑

尝试：

```
while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
    echo $row['title'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T22:43:47.207

这个错误几乎总是意味着您的查询没有按照您想要的方式工作，因此 $query 为空（或假？）而不是查询结果对象。尝试回显`db->errorinfo()`，看看它是否告诉你出了什么问题。

您也可以尝试将查询文本直接粘贴到 mysql 中并查看结果。如果这似乎工作正常，那么问题可能出在您的数据库连接代码上。

# android - ViewPagerIndicator ClassNotFoundException？

> ID：12126194
> 
> 赞同：5
> 
> 时间：2012-08-25T22:38:47.300
> 
> 标签：android, viewpagerindicator

我正在尝试`ViewPagerIndicator`在我的项目中使用 Jake Wharton 的库，并按照此处列出的简单教程进行操作：

[http://viewpagerindicator.com/](http://viewpagerindicator.com/)

`ClassNotFoundException`但是当我尝试运行我的项目时，我一直得到一个。

这是我的布局中的 XML：

```
<android.support.v4.view.ViewPager
    android:id="@+id/day_pager"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" />

<com.viewpagerindicator.TitlePageIndicator
    android:id="@+id/titles"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent" /> 
```

这是我拥有的相应代码（`dayPage`是一种`ViewPager`类型）。

```
 ArrayList<Integer> testData = new ArrayList<Integer>();
    testData.add(12);
    testData.add(13);
    testData.add(22);

    dayPage = (ViewPager) this.getActivity().findViewById(R.id.day_pager);
    dayPage.setAdapter(new DayAdapter(testData));

    //Bind the title indicator to the adapter
    TitlePageIndicator titleIndicator = (TitlePageIndicator)this.getActivity().findViewById(R.id.titles);
    titleIndicator.setViewPager(dayPage); 
```

现在的值`testData`是垃圾。

完整的堆栈跟踪是：

```
08-25 22:32:23.420: E/AndroidRuntime(1710): FATAL EXCEPTION: main
08-25 22:32:23.420: E/AndroidRuntime(1710): android.view.InflateException: Binary XML file line #12: Error inflating class com.viewpagerindicator.TitlePageIndicator
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at vt.finder.sherlock.ScheduleFragment.onCreateView(ScheduleFragment.java:50)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at vt.finder.sherlock.ScheduleFragment.onCreate(ScheduleFragment.java:30)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:835)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.support.v4.view.ViewPager.populate(ViewPager.java:895)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1234)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.View.measure(View.java:8313)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.View.measure(View.java:8313)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.View.measure(View.java:8313)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.View.measure(View.java:8313)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.View.measure(View.java:8313)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.os.Looper.loop(Looper.java:130)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at java.lang.reflect.Method.invokeNative(Native Method)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at java.lang.reflect.Method.invoke(Method.java:507)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at dalvik.system.NativeStart.main(Native Method)
08-25 22:32:23.420: E/AndroidRuntime(1710): Caused by: java.lang.ClassNotFoundException: com.viewpagerindicator.TitlePageIndicator in loader dalvik.system.PathClassLoader[/data/app/vt.finder.sherlock-1.apk]
08-25 22:32:23.420: E/AndroidRuntime(1710):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.LayoutInflater.createView(LayoutInflater.java:471)
08-25 22:32:23.420: E/AndroidRuntime(1710):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
08-25 22:32:23.420: E/AndroidRuntime(1710):     ... 37 more 
```

`ViewPagerIndicator`我将该项目作为库导入到我的项目中，并仔细检查了包名是否完好无损，确实如此。我对我的项目进行了清理，但我仍然得到类未找到异常。我错过了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-26T03:22:06.557

很多人将此添加到 lib 的文件夹或导入它（这是不正确的）

相反，您需要在库部分的属性/android 对话框下添加整个项目（源和所有资源）（如下所示）

如果您不确定自己做了什么，请尝试删除对库的所有引用，使其不在库或引用的库文件夹中，并且不会显示在 properties/java 构建路径 - 库选项卡下

然后通过属性/android对话框将整个项目添加回，做一个干净的构建（有时两次，感谢eclipse）它应该可以正常工作。

![将其添加到 Eclipse](../Images/9167cec16a05930aebff73a92142da08.png)?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T08:25:50.443

上面建议的步骤对我不起作用，但这起到了作用：

*   右键项目，属性
*   java构建路径，源选项卡
*   添加文件夹，添加有问题的文件夹

# rvm - 无法在 irb 中加载红宝石

> ID：12126206
> 
> 赞同：1
> 
> 时间：2012-08-25T22:40:06.253
> 
> 标签：rvm, global, gemset

我很确定前几天我试图为特定的应用程序创建一个单独的 gemset，因为在我这样做之前一切都很好。但我相信它发生在我运行的 rvm @gloabl gemset create 上。

老实说，我不确定要纠正它的方向，但任何建议都会很棒。

但这是我尝试在 irb via (require 'ap') 中安装 gem 时得到的结果，该方法从几天前开始工作。

```
LoadError: cannot load such file -- ap
    from /Users/Construct/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/Construct/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from (irb):1
    from /Users/Construct/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:41:44.337

你试过先跑`require 'rubygems'`吗？

# c++ - 使用初始化列表时的c ++数据成员初始化顺序

> ID：12126209
> 
> 赞同：4
> 
> 时间：2012-08-25T22:40:57.910
> 
> 标签：c++, constructor, initializer-list

```
class A
{
private:
int a; 
int b; 
int c;

public:
A() : b(2), a(1), c (3)
{
}
}; 
```

根据 C++ 标准数据成员按照声明的顺序构造和初始化，对吗？

但是在使用初始化列表的时候，我们改变了数据成员的顺序，现在是按照初始化列表的顺序初始化还是按照声明的顺序初始化呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T22:42:38.660

在声明的顺序中，初始化列表中的顺序无关紧要。一些编译器实际上会给你警告（gcc），告诉你初始化列表的顺序与声明的顺序不同。这就是为什么在使用成员初始化其他成员等时也必须小心的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T22:43:02.073

不，初始化列表与它无关。

成员总是按照它们在类主体中出现的顺序进行初始化。

如果命令不同，一些编译器甚至会警告您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T22:43:30.423

它们按声明顺序初始化。许多编译器也警告您，您的初始化列表与声明顺序不匹配，尽管标准允许这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T23:17:23.963

在 C++11 中，您还可以执行以下操作：

```
class A
{
    private:
    int a = 1; 
    int b = 2; 
    int c = 3; 

public:
    A()
    {
       // your code
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-01T03:56:58.800

类数据成员始终按其在类中声明的顶部->底部顺序初始化，并以相反的顺序销毁。**初始化列表不影响数据成员的初始化顺序。**

在使用初始化列表时，您还可以查看以下相关问题以了解更棘手的情况，

[函数调用如何处理构造函数的初始化列表中的未初始化数据成员对象](https://stackoverflow.com/questions/34011947/how-function-call-is-working-on-an-unitialized-data-member-object-in-constructor)

# c - 应该吗？运算符使用频率更高？

> ID：12126216
> 
> 赞同：-1
> 
> 时间：2012-08-25T22:41:59.890
> 
> 标签：c, operator-keyword, ternary-operator

> **可能重复：**
> [三元还是不三元？](https://stackoverflow.com/questions/160218/to-ternary-or-not-to-ternary)

今天，在阅读我的 C 书时，我偶然发现了一个小宝石：`?`运算符。它是一个三元运算符，其行为类似于基于天气的 if else 语句，或者语句是真还是假。

显然使用`?`运算符应该更有效。

以下代码使用 if / else 语句（假设 somefunc 在失败时返回 NULL）：

```
foo = somefunc();
if(foo) printf("\nFunction Suceeded!");
else printf("\nFunction Failed!"); 
```

这是代码与第一个相同，但使用`?`运算符：

```
somefunc() ? printf("\nFunction Suceeded!") : printf("\nFunction Failed!"); 
```

我可以看到这在大多数情况下都不会有用，但是我知道我已经看到了无数的例子，这些例子可以很容易地用来代替 if / else 语句。

使用这种方法是一种好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:45:49.967

抛开效率不谈，你应该使用更具可读性的那个。

包括效率，如果*真的*`?`更有效，编译器肯定会自动将任何语句重写为表达式。为什么不呢？*`if``?`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T22:45:06.160

谨慎使用三元运算符。它绝对有用，可以是适当的缩写，但它也可能导致代码可读性降低。你的例子证明了这一点。*

# hash - 使用长度扩展攻击来破坏 SHA1

> ID：12126217
> 
> 赞同：0
> 
> 时间：2012-08-25T22:42:06.410
> 
> 标签：hash, sha1

我正在实现 SHA1 的这个缺陷：

[https://blog.whitehatsec.com/hash-length-extension-attacks/](https://blog.whitehatsec.com/hash-length-extension-attacks/)

我需要 SHA1 一个数据块，然后使用生成的哈希作为起始向量，我将 SHA1 另一个数据块。

喜欢：

```
firstHash = SHA1(fisrtchunk)
setSHA1StartingVector(firstHash)
secondHash = SHA1(secondchunk) 
```

### 您是否有任何图书馆允许您使用自定义起始向量应用 SHA1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:54:30.577

我知道了。搜索 shaext python 模块。

# batch-file - 回显命令后可能在 BATCH 文件中闪烁光标？

> ID：12126223
> 
> 赞同：3
> 
> 时间：2012-08-25T22:42:42.447
> 
> 标签：batch-file

我想让我的光标在我正在运行的批次的特定部分闪烁。

```
@echo off

REM some code goes here ... 

setlocal
for /f %%A in ('"prompt $H & echo on & for %%B in (1) do rem"') do set "BS=%%A"
set /p Menu=%BS%  Please inform your option {1,2,3} followed by ENTER: 
```

请注意，使用 SET /P 命令时，光标符号“_”将在单词“ENTER”前面和冒号符号“:”旁边闪烁，等待用户决定，如 ENTER：_

但是，稍后在我的代码中，我有以下内容：

```
REM some code goes also here ...
echo:
echo Please, press any key to return to main menu
pause>nul
Call Begin 
```

在这种情况下，光标会等待用户命令，但它会在其他地方闪烁，而不是在单词 main menu 的字母“U”旁边

问题 - 如何使光标在单词 menu 旁边的“U”后闪烁？

先感谢您 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T15:51:09.317

ECHO 命令在您的输出末尾发出一个新行，因此暂停闪烁光标出现在下一行。

您可以使用 SET /P 打印您的提示而无需换行以获得您想要的结果。

```
<nul set/p"=Please, press any key to return to main menu"
pause>nul 
```

顺便说一句，您可能不应该使用 CALL 返回主菜单。可以发出而不返回的连续 CALL 的数量是有限制的。我怀疑您的主菜单已经在调用例程或批处理文件。您的主菜单可能应该在 GOTO 循环中，然后让每个选项调用批处理或例程。然后 CALLed 例程可以简单地 EXIT /B 返回到主菜单。

# python - 使用 sqlalchemy 的 QTreeView

> ID：12126225
> 
> 赞同：2
> 
> 时间：2012-08-25T22:42:51.833
> 
> 标签：python, qt, pyqt, pyside

我想制作一个 QTreeView 来显示我使用 sqlalchemy 获得的一些数据。大约有 1000-10.000 行要显示。我认为在这里使用模型比使用更简单的 QTreeWidget 更好，因为我认为将模型连接到 sqlalchemy 会相对容易，因为我认为这是经常做的事情。显然不是……我找不到这方面的好例子。

我查看了 QStandardItemModel 的文档，据我了解，我必须为每个值创建一个 QStandardItem。有数千行乘以九列，我认为这将非常缓慢。
我之前在 wxpython 中使用过[ObjectListView](http://objectlistview.sourceforge.net/python/)，并希望 Qt 中的树视图能够类似地工作，所以当我发现这将是多么复杂时，你可以想象我的失望：P。

所以我的问题：

1.  有没有办法将 sqlalchemy 连接到 QTreeView？
2.  如何在我的树视图中使用 sqlaclhemy 返回的项目？（就像 ObjectListView 所做的那样）

如您所见，我对模型和视图（以及 Qt）非常陌生，因此非常欢迎任何答案、解释、链接、有用的提示或任何对此有话要说的东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:49:30.627

好消息 - 您*不需要*创建任何 QStandardItems。Qt 视图类从不调用数据类的任何方法，因此您的数据可以以任何您想要的方式存储。它们只调用模型类上的方法（不像在 Ruby on Rails 中，每个数据类都被视为一个模型，在 Qt 中，“模型”指的是整个数据类集合）。

我建议对[QAbstractItemModel](https://qt-project.org/doc/qt-4.8/qabstractitemmodel.html)进行子类化（请参阅“子类化”部分）并从那里开始工作。如果您只有一个平面列表，您甚至可以设置它，以便您的自定义模型简单地包装从数据库返回的结果。

我是在 C++ 中完成的——花了我相当长的时间来理解它，但是一旦我这样做了，它就很容易使用。这是我的只读模型的基本代码 - 你必须将它翻译成 python，但希望它能让你免于痛苦！

**注意：**下面的代码假设您的数据是一个平面列表（没有父子关系）。如果不是这种情况，请查看[本教程](https://qt-project.org/doc/qt-4.8/itemviews-simpletreemodel.html)以获取有关您必须进行哪些调整的详细信息。

```
template <typename T> class ListModel : public QAbstractItemModel
{
protected:
    //This is where I store my data - it's just a generic list!
    //Try using your SQL result instead?
    QList<T*> mData;

public:
    ListModel(): mData() {}

    int columnCount(const QModelIndex& index) const
    {
        //You'll probably want a different number here:
        return 1;
    }

    QVariant data(const QModelIndex& index, int role) const
    {
        if(index.isValid() && role == Qt::DisplayRole && index.column() == 0)
        {
            if(T* t = (T*) index.internalPointer())
            {
                //Something, based on column number:
                return t->data[index.column()];
            }
        }

        return QVariant();
    }

    QVariant headerData(int section, Qt::Orientation orientation, int role) const
    {
        if(orientation == Qt::Horizontal && role == Qt::DisplayRole && section == 0)
        {
            //Something, based on column number:
            return "header text";
        }

        return QVariant();
    }

    QModelIndex index(int row, int column, const QModelIndex& parent) const
    {
        //Tweak this if you have a hierarchical model:
        return (parent.isValid())? QModelIndex() : createIndex(row, column, (void*) mData[row]);
    }

    QModelIndex parent(const QModelIndex& child) const
    {
        //Tweak this if you have a hierarchical model:
        return QModelIndex();
    }

    int rowCount(const QModelIndex& index) const
    {
        //Tweak this if you have a hierarchical model:
        return (index.isValid())? 0 : mData.count();
    }
}; 
```

# c# - 如何防止图片框图像在移动时拖尾？

> ID：12126226
> 
> 赞同：1
> 
> 时间：2012-08-25T22:42:55.733
> 
> 标签：c#, winforms, controls, picturebox, doublebuffered

你好 stackoverflow 社区。我已经尝试寻找类似的问题，但我只发现了关于闪烁的问题，这与我遇到的问题不同。

`PictureBox`每当我在面板上移动它们时，我都需要帮助防止es 拖尾。我正在制作的应用程序类似于 MS Paint。当我单击 a 时，`PictureBox`我可以使用以下命令单击并拖动它：

```
private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
{            
    x = e.X;
    y = e.Y;
}

private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        pictureBox1.Left += (e.X - x);
        pictureBox1.Top += (e.Y - y);
    }
} 
```

并且我没有单击的其他图片框被绘制到 DoubleBuffered 面板，使用：

```
private void panel1_Paint(object sender, PaintEventArgs e)
{
    foreach (PictureBox pb in pboxes)
    {
        if (!pb.Visible)
        {
            e.Graphics.DrawImage(pb.BackgroundImage, new Rectangle(pb.Location, pb.Size));
        }
    }
} 
```

出于某种原因，当我拖动`PictureBox`它的背景图像时，它会拖过绘制的面板。

奇怪的是，这只发生在 Paint 事件上。如果我要制作面板的背景图像，则移动`PictureBox`不会拖尾。只有当我`Image`在面板上绘制 s 时才会发生这种情况。

这是一个例子![在此处输入图像描述](../Images/147260596a71b2ffcb17ef7422a010df.png)

我将不胜感激任何帮助，谢谢。

我简化了代码，这样更容易理解。（拖尾效应仍然存在）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Collections;

namespace WindowsFormsApplication1

{

public partial class Form1 : Form
{

    int x;
    int y;

    public Form1()
    {
        InitializeComponent();
        pictureBox1.Show();
        pictureBox2.Hide();
        pictureBox3.Hide();
    }

    private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
    {            
        x = e.X;
        y = e.Y;
        panel1.Invalidate();
    }

    private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            pictureBox1.Left += (e.X - x);
            pictureBox1.Top += (e.Y - y);
        }
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.DrawImage(pictureBox2.BackgroundImage, new Rectangle(pictureBox2.Location, pictureBox2.Size));
        e.Graphics.DrawImage(pictureBox3.BackgroundImage, new Rectangle(pictureBox3.Location, pictureBox3.Size));
    }

}} 
```

它使用这个 doubleBuffered 面板类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public class DoubleBufferPanel : Panel
    {

        public DoubleBufferPanel()
        {

            // Set the value of the double-buffering style bits to true.
            this.DoubleBuffered = true;

            this.SetStyle(ControlStyles.DoubleBuffer | ControlStyles.UserPaint |
             ControlStyles.AllPaintingInWmPaint, true);

            this.UpdateStyles();

        }

    }

} 
```

现在我的代码需要 3`PictureBox`和 1`DoubleBuffered`面板。

表格被最大化，`Panel1.size = (2000, 1200);`并且`PictureBox` `size = (700, 700)`将每个`PictureBox`es背景图像设置为随机的大细节图像。当我移动时会出现拖尾效应，`pictureBox1`我每次都可以重现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:49:45.870

您是否尝试过从 OnPaint 处理程序调用 base 的 OnPaint，或者从 MouseMove 执行选择性的无效/刷新？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-01T04:34:23.357

我知道这是几年前的事了，但我今天也遇到了类似的麻烦。我正在单击并拖动 a`PictureBox`以放大图像部分。这些问题通过正确的操作顺序得到解决：尺寸、移动、油漆。我通过以下方式解决了这个问题：

1.  `PictureBox`在表单`Load`事件期间实例化

2.  活动期间搬迁`PictureBox`及其`Location`财产`MouseMove`

3.  `PictureBox`搬迁后失效

4.  在事件期间重绘`Paint`，这是通过触发的`Invalidate()`

5.  我有一个自定义形状 ( `Region`) `PictureBox`，这是在`VisibleChange`活动期间设置的。*

6.  仅在按下鼠标左键且图像足够大时才可见 ( ) 。`PictureBox`*`Visible == true`

    * = 可选

这是我的代码的修改摘录。我希望它们足够相关。

```
public Form1()
{
    InitializeComponent();

    this.Paint += new System.Windows.Forms.PaintEventHandler(Form1_Paint);
    Main_PictureBox.Paint += new PaintEventHandler(Main_PictureBox_Paint);
    Main_PictureBox.MouseDown += new MouseEventHandler(StartZoom);
    Zoom_PictureBox.MouseDown += new MouseEventHandler(StartZoom);
    Main_PictureBox.MouseMove += new MouseEventHandler(MoveZoom);
    Main_PictureBox.MouseUp += new MouseEventHandler(EndZoom);
    Main_PictureBox.MouseLeave += new EventHandler(EndZoom);
    Zoom_PictureBox.MouseUp += new MouseEventHandler(EndZoom);
    Zoom_PictureBox.VisibleChanged += new EventHandler(Zoom_PictureBox_VisibleRegion);
    Zoom_PictureBox.Paint += new PaintEventHandler(Zoom_PictureBox_Paint);
}
private void Form1_Paint(object sender, PaintEventArgs e)
{
    int H = flowLayoutPanel1.Height - flowLayoutPanel1.Margin.Size.Height;
    Main_PictureBox.MinimumSize = new Size(0, 0);
    Main_PictureBox.MaximumSize = new Size(flowLayoutPanel1.Width, H);
}
private void Main_PictureBox_Paint(object sender, PaintEventArgs e)
{
    Main_PictureBox.Parent.MaximumSize = Main_PictureBox.Size + Main_PictureBox.Margin.Size;
}
private void DisplayImage(object sender, EventArgs e)
{
    Image img = ((PictureBox)sender).Image;

    int W = img.Width;
    int H = img.Height;
    float ratio = (float)W / (float)H;

    Main_PictureBox.Image = img;
    Main_PictureBox.Size = new Size(W, H);
    float TestRatio = ((float)Main_PictureBox.Width / (float)Main_PictureBox.Height);
    if (TestRatio < ratio)
        Main_PictureBox.Height = (int)((float)Main_PictureBox.Width / ratio);
    else if (TestRatio > ratio)
        Main_PictureBox.Width = (int)((float)Main_PictureBox.Height * ratio);
}
private void Zoom_PictureBox_VisibleRegion(object sender, EventArgs e)
{
    using (var gp = new System.Drawing.Drawing2D.GraphicsPath())
    {
        gp.AddEllipse(new Rectangle(0, 0, this.Zoom_PictureBox.Width, this.Zoom_PictureBox.Height));
        this.Zoom_PictureBox.Region = new Region(gp);
    }
}
private void Zoom_PictureBox_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.DrawImage(Main_PictureBox.Image, e.ClipRectangle, cropRectangle, GraphicsUnit.Pixel);
}
private void StartZoom(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left && scale > 1.25)
    {
        int dX = Zoom_PictureBox.Width / 2;
        int dY = Zoom_PictureBox.Height / 2;
        Zoom_PictureBox.Visible = true;
        Zoom_PictureBox.Location = new Point(e.X - dX, e.Y - dY);
    }
}
private void MoveZoom(object sender, MouseEventArgs e)
{
    if (Main_PictureBox.Image != null)
    {
        Zoom_PictureBox.Visible = (e.Button == MouseButtons.Left && scale > 1.25);
        if (Zoom_PictureBox.Visible && e.Button == MouseButtons.Left)
        {
            int dX = Zoom_PictureBox.Width / 2;
            int dY = Zoom_PictureBox.Height / 2;

            Zoom_PictureBox.Location = new Point(e.X - dX, e.Y - dY);
            Zoom_PictureBox.Invalidate();
        }
    }
}
private void EndZoom(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
        EndZoom();
}
private void EndZoom(object sender, EventArgs e)
{
    EndZoom();
}
private void EndZoom()
{
    Zoom_PictureBox.Visible = false;
}
private Rectangle cropRectangle
{
    get
    {
        if (Main_PictureBox.Image != null)
        {
            Point origin = Main_PictureBox.PointToScreen(new Point(0, 0));
            float X = (float)(MousePosition.X - origin.X);
            return new Rectangle(
                (int)(scale * X) - Zoom_PictureBox.Width / 2,
                (int)(scale * (float)(MousePosition.Y - origin.Y)) - Zoom_PictureBox.Height / 2,
                Zoom_PictureBox.Width,
                Zoom_PictureBox.Height);
        }
        else
            return new Rectangle();
    }
}
private float scale
{
    get
    {
        if (Main_PictureBox.Image != null)
            return (float)Main_PictureBox.Image.Height / (float)Main_PictureBox.Height;
        else
            return 0;
    }
} 
```

# perl - Perl 将常量传递给子程序

> ID：12126227
> 
> 赞同：1
> 
> 时间：2012-08-25T22:42:59.873
> 
> 标签：perl, parameters, constants, subroutine

我有以下内容：

```
#! /usr/bin/perl

use strict;

# Declare some meaningful named constants
use constant {FOO => 2,
              BAR => 3,
              BAM => 4};

# Define paths between the named entities
my %PATHS = (FOO => {BAR => "Foo->Bar",
                     BAM => "Foo->Bam"},
             BAR => {FOO => "Bar->Foo",
                     BAM => "Bar->Bam"},
             BAM => {FOO => "Bam->Foo",
                     BAR => "Bam->Bar"});

# Printing out PATHS map does more or less what I expect:
foreach my $src (sort keys %PATHS) {
  foreach my $dst (sort keys %{ $PATHS{$src} } ) {
    print "$src:$dst\t$PATHS{$src}{$dst}\n";
  }
}

# I can't use the constants as parameters
sub findPath($$) {
  my $src = shift;
  my $dst = shift;

  print "src:$src\ndst:$dst\n";
  my $path = $PATHS{$src}{$dst};
  print defined $path ? "path=$path\n" : "UNDEFINED\n";
}

findPath(FOO, BAR); 
```

看来我的常量被视为裸词，并且在 HoH PATHS 的声明中添加了隐式引号。有没有一种简单的方法来定义这样一个映射，其中符号键可跨函数调用使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T22:45:07.890

操作员做了`=>`两件事：

1.  引用左边的裸词
2.  像逗号一样

如果您只想要#2，只需使用逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T03:21:39.477

Perl 常量实际上只是不带参数并返回固定值的子例程。

这意味着您可以添加`&`前缀以*强制*对它们进行插值：

```
my %PATHS = (&FOO => {&BAR => "Foo->Bar",
                      &BAM => "Foo->Bam"},
             &BAR => {&FOO => "Bar->Foo",
                      &BAM => "Bar->Bam"},
             &BAM => {&FOO => "Bam->Foo",
                      &BAR => "Bam->Bar"}); 
```

并保持`=>`显示键 => 值关系的良好语法。

您还可以使用`@{[...]}`始终有效的旧技巧：

```
print "The value of constant FOO is '@{[FOO]}'\n"; 
```

哪个比这更容易用你的眼睛解析：

```
print "The value of constant FOO is '" . FOO . "'\n"; 
```

# jquery - 需要 jQuery on() 选择器辅助

> ID：12126231
> 
> 赞同：0
> 
> 时间：2012-08-25T22:43:18.687
> 
> 标签：jquery, dynamic

我在理解 jQuery 时遇到了一些问题。

如果我有一个 UL，其中有一些通过 jquery 创建的动态 Li 元素，它将设置第一个 li 以选择类 - 例如

```
<li class='selected'>text</li> 
```

编辑UDPATE：

好的..所以我拥有的是一组从文本框动态生成的 REST 调用动态生成的 LI。我需要做的是基本上在我输入（keyup）之后我会显示一些结果（类似于自动完成）。然后我需要做的是从搜索框的上下文中检测向上和向下箭头并在树上上下移动“.selected”类。下面的代码适用于静态列表，而不是动态创建的。

一些示例代码：

```
$('.txtSearchBox')
.unbind('keypress keyup')
.bind('keypress keyup', function (e) {
    if ($(this).val().length < 3 && e.keyCode != 13) {
        $('.searchWrapper').hide();
    } else {
        $('.searchWrapper').show();
        SearchAutoComplete.init($('.searchWrapper'));
        SearchAutoComplete.load();
    }

    if (e.keyCode == 38) { // up
        var selected = $(".selected");
        $(".searchWrapper li").removeClass("selected");
        if (selected.prev().length == 0) {
            selected.parent().children().last().addClass("selected");
        } else {
            selected.prev().addClass("selected");
        }
    }
    if (e.keyCode == 40) { // down
        var selected = $(".selected");
        $(".searchWrapper li").removeClass("selected");
        if (selected.next().length == 0) {
            selected.parent().children().first().addClass("selected");
        } else {
            selected.next().addClass("selected");
        }
    }
});

$(".searchWrapper li").live('mouseover', function (e) {
    $(".searchWrapper li").removeClass("selected");
    $(this).addClass("selected");
}); 
```

如您所见，此代码检测向上和向下箭头键。问题是对于动态元素，这无济于事。我只是感到困惑，因为 on 事件应该在 li 而不是 a？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:08:26.287

这是你的意思吗？[演示](http://jsfiddle.net/uV9mN/)

使用[each](http://api.jquery.com/jQuery.each/)，您可以遍历您的元素并根据需要操作它们。

```
$('ul.alist li').on('click', function(){

jQuery.each($('ul.alist li'), function() {
  $(this).removeClass('selected');

});
}); 
```

使用上面的代码，我所做的就是遍历 li 标签并删除“selected”类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:10:32.267

试试这个：

```
$(".searchWrapper ul").on('mouseover',"li", function () {
    $(".searchWrapper li").removeClass("selected");
    $(this).addClass("selected");
}); 
```

从 JQuery[文档](http://api.jquery.com/on/)中，当您为函数（“li”）提供选择器时，`on()`事件处理程序被委派。

# objective-c - 带有可替换内容的 UIView 的 UIViewController

> ID：12126238
> 
> 赞同：0
> 
> 时间：2012-08-25T22:44:34.453
> 
> 标签：objective-c, xcode

我有一个`UIViewController`带有`UISegmentControl`3 个按钮/段的。

`UIView`如果我在情节提要的主视图中放置一个较小的。我可以根据当前细分显示来自其他 3 个`UIViewController`类的内容吗？`UIView``UISegmentControl`

`UIViewController`我不得不问，因为刚刚阅读了一些关于不在`UIViewController`. 这是我正在处理的场景：

[http://www.flickr.com/photos/80427098@N07/7859459430/in/photostream](http://www.flickr.com/photos/80427098@N07/7859459430/in/photostream)

因此，如果我的图片场景是一种不好的做法，我的问题是：

是否有另一种显示`UIViewController`1,2 和 3内容的方法`UISegmentControl`？

我被困住了，所以我需要一些关于如何以经批准的工作方式执行此操作的快速指南，因为这 3 个场景彼此非常不同。

**头脑风暴：**

*   将 3 个放置`UIViews`在`UIViewController`场景中相互重叠，并根据`UISegmentControl`.

*   `UIScrollView`使用 1,2,3 中的内容进行长时间不可滚动，并`UIScrollView`根据`UISegmentControl`

我不想再次陷入困境，所以请告诉我最简单的方法，我只需要一些提示..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T03:59:14.873

我相信在这种情况下您正在寻找的是[容器视图控制器。](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html#//apple_ref/doc/uid/TP40007457-CH112-SW17)这里还有一篇关于它们的文章[Subjective Objective-C - container view controllers](http://subjective-objective-c.blogspot.com/2011/08/writing-high-quality-view-controller.html)和另一篇与它们相关的 SO 文章[Container View Controller Examples](https://stackoverflow.com/questions/7755498/container-view-controller-examples)

# c - read() 不等待输入

> ID：12126239
> 
> 赞同：0
> 
> 时间：2012-08-25T22:45:00.780
> 
> 标签：c, linux, input, io, stdin

我有一个奇怪的问题。我正在开发一个简单的程序，该程序应该通过网络将从标准输入获取的数据发送到该程序的另一个实例，该实例应该将数据直接发送到标准输出。但它没有按应有的方式工作，只发送了一部分数据。之后，我设法找出从标准输入读取的问题出在哪里：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#define SIZE 1024

int main(void) {
    char *buffer;
    int read_bytes;

    buffer = (char *) malloc(sizeof(char)*SIZE);

    while ((read_bytes = read(STDIN_FILENO,buffer,SIZE)) == SIZE) {
        write(STDOUT_FILENO,buffer,SIZE);
        fprintf(stderr,"read %d bytes\n",read_bytes);
    }
    fprintf(stderr,"read %d bytes\n",read_bytes);
    write(STDOUT_FILENO,buffer,read_bytes);
    return 0;
} 
```

（这只是为了简单地说明问题，而不是原始代码的实际部分）
它一切正常（-> 将数据从标准输入重新发送到标准输出），直到我从需要更多时间的东西中获取信息，例如：

```
find / | ./the_programme > output.file 
```

输出在几千字节后停止，我真的很困惑为什么（肯定没有完成）。我尝试使用 fcntl 清除 STDIN_FILENO 上的 O_NONBLOCK 标志，但它根本没有帮助。我可能在这里遗漏了一些非常基本的东西，但是手册页和谷歌搜索都没有帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T22:48:08.963

从手册（`man 2 read`）：

> 返回值：
> 
> 成功时，返回读取的字节数（零表示文件结束），文件位置提前该数字。如果此数字小于请求的字节数，则**不是错误；**这可能会发生，例如因为现在实际可用的字节较少（可能是因为我们接近文件结尾，或者因为我们正在从管道或终端读取），或者因为 read() 被中断信号。

```
while ((read_bytes = read(STDIN_FILENO,buffer,SIZE)) > 0) {
    write(STDOUT_FILENO,buffer,read_bytes);
    fprintf(stderr,"read %d bytes\n",read_bytes);
} 
```

# centos - Centos/fedora/amazon linux：iptables 最佳实践

> ID：12126243
> 
> 赞同：-2
> 
> 时间：2012-08-25T22:45:21.243
> 
> 标签：centos, firewall, fedora, iptables, puppet

我试图坚持使用一种风格的 linux，但不知何故进入了 CentOs、Fedora 和 Amazon Linux 组合。（Amazon linux 的优先级最低，因为它有自己的防火墙通过控制台）

**目标**：使用通用脚本（BASH 或 PUPPET）为 CentOS 和 Fedora（15-17）配置防火墙

**困惑**：

1.  Fedora 17 似乎对我不关心的 GUI 使用了新的“防火墙”。我只想使用一个shell脚本。
2.  如果服务器同时具有 IPV4 和 IPV6，应用于 IPV4 的规则是否也会自动应用于 IPV6，还是我必须运行单独的规则？我希望它们被共享。
3.  我下载了“puppetlabs-firewall”模块——它指的是`/etc/sysconfig/iptables` 我在 Fedora 中找不到的模块。此外，它仅指 RedHat|CentOs 而不是 fedora：

    ```
    exec { "persist-firewall":
        command => $operatingsystem ? {
        "debian" => "/sbin/iptables-save > /etc/iptables/rules.v4",
        /(RedHat|CentOS)/ => "/sbin/iptables-save > /etc/sysconfig/iptables",
      }
      refreshonly => true,
    }
    Firewall {
      notify => Exec["persist-firewall"]
    } 
    ```

我愿意使用 puppet（将被预装）或 bash，但**我只想要一个简单的脚本，用我提供的一组主端口（可能是允许的 IP）初始化服务器**。如果这也适用于 amazon linux，那么它是一个奖励。

幂等脚本最好！

对一些专家来说可能看起来很简单，但对于像我这样的新手来说，很多可能会出错:) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:34:23.733

iptables 是 Linux 网络过滤引擎 (IPv4) 的用户界面

ip6tables 是 Linux netfilter 引擎 (IPv6) 的用户界面

99% 的 Linux 防火墙只不过是围绕 iptables 的包装器

/etc/sysconfig/iptables （在您的示例中）由 iptables-save 在脚本中生成

网络上有数百万个 iptables 脚本，但这一切都取决于你真正需要做什么，iptables 不仅仅是剪切和粘贴

# vb.net - 使用 Array.ForEach 初始化数组 - VB.NET

> ID：12126246
> 
> 赞同：1
> 
> 时间：2012-08-25T22:45:57.093
> 
> 标签：vb.net, arrays

我有一个 RichTextBoxes 数组，我想使用 Array.ForEach 初始化它们。

我做了以下尝试但没有成功：

```
Dim aRTB(5) as RichTextBox
Array.ForEach(aRTB, Function() New RichTextBox) 
```

该代码是唯一使其通过编译器的代码，但它不会初始化数组的任何部分。

未能通过编译器的代码包括：

```
Array.ForEach(aRTB, Function() Return New RichTextBox)
Array.ForEach(aRTB, Function(rtb as RichTextBox) rtb = New RichTextBox) 
```

我意识到我可以轻松地设置一个常规循环（For、Do、While）来执行相同的操作，但是我想看看这种方式是否可行。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:03:49.257

> 我有一个 RichTextBoxes 数组，我想使用 Array.ForEach 初始化它们。

你不能。[Array.ForEach](http://msdn.microsoft.com/en-us/library/zecdkyw2.aspx)对数组的每个元素执行一个操作，即，它将数组的元素传递给您的函数一个参数：

```
Array.ForEach(aRTB, Sub(rtb as RichTextBox) ...do something with rtb...) 
```

参数是`ByVal`，即不能用它来*改变*数组的内容：

```
Array.ForEach(aRTB, Sub(ByRef rtb as RichTextBox) rtb = New RichTextBox())
' Yields compilation error: 
' Nested sub does not have a signature that is compatible 
' with delegate 'System.Action(Of RichTextBox) 
```

由于您的数组最初是空的，因此您无法对 Array.ForEach 做任何有用的事情。

抱歉，但您必须为此使用经典`For`循环：

```
For i = 0 To 5
    aRTB(i) = New RichTextBox()
Next 
```

[这`0 To 5`不是错字...在 VB.NET 数组声明中指定上限，而不是大小。]

# git - 当我没有对我的存储库做任何事情时，为什么 `.git/index` 会发生变化？

> ID：12126247
> 
> 赞同：6
> 
> 时间：2012-08-25T22:46:00.870
> 
> 标签：git, unison

使用最新的 Debian 版本的 git（我使用的是 1.7.2.5），我注意到一个`.git/index`文件可能会发生神秘的变化，而我没有执行任何我认为应该更改存储库的操作。（我的 shell 偶尔会运行`git branch`，因此它可以显示签出的分支，但这不应该改变任何东西。）更改导致`.git/index`文件的长度与原始文件相同，但包含不同的位。 **是什么导致了这种变化，我该如何阻止它？**

[（这个改变很不方便，因为它把Unison](http://www.cis.upenn.edu/~bcpierce/unison/)文件同步器弄乱了。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T07:15:52.413

索引文件不应该只是随机更改。那是暂存树，是提交存储库和工作树之间的缓冲区。为了提高效率，它还存储了一些关于工作树的元数据（您可以修改的签出文件），这将允许更快`status`或`diff`结果。要查看存储了什么样的此类信息，请尝试执行`git ls-files --debug`. 对于每个文件和目录，这应该打印如下内容：

```
path/to/file
  ctime: 1332898839:873326227
  mtime: 1332898839:873326227
  dev: 2052     ino: 4356685
  uid: 1000     gid: 100
  size: 3065    flags: 6c 
```

因此，如果一个文件在磁盘上发生任何变化，而不是它的内容，而是它使用的 inode 等内部内容，它将在`index`下次使用索引时触发对文件的更新。

`git branch`不更新索引，因为它只检查`.git/HEAD`文件`.git/refs/heads`和`.git/packed-refs`文件，它不关心索引或工作树。`git diff`并且`git status`，另一方面，使用索引。

我做了一个实验：我复制了当前`index`文件，我创建了一个新版本的文件，确保将分配一个新的 inode 给它（复制，删除原始，将副本重命名回原始名称），执行`git status`，然后将新的索引文件与原始副本进行比较。有两件事发生了变化：其中包含受影响文件的行，更改位于文件名之前的字节中，以及索引文件末尾的几个字节，可能是最后一次索引计算的时间戳。文件的整体大小保持不变。

回到您的问题，如果您自己没有执行任何涉及索引的命令，那么也许您有另一个工具可以为您执行此操作：IDE 插件或了解 git 存储库并检查状态的文件浏览器扩展的 git 存储库。或者，还有另一个过程可以改变文件在磁盘上的存储方式，例如磁盘碎片整理实用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-13T16:04:57.153

我也遇到过这个问题，我相信是 unison 和 git 之间的交互导致了这个问题。unison 同步两个目录时，不同步ctimes。这意味着在 git 存储库的一个副本中，比如副本 2，文件 ctimes 与存储在 .git/index 中的时间不匹配。这意味着副本 2 中的 .git/index 将在您下次运行统计文件的 git 命令时更新。当 unison 运行时，.git/index 被复制到副本 1，但其内容与那里的 ctimes 不匹配。所以下次在那里运行 git 命令时，索引会更新。然后 unison 将其复制到副本 2，依此类推。

我还没有找到一个合理的解决方法。设置 core.trustctime=false 没有帮助。

就 .git/index 是一个缓存而言，它应该从同步中省略。但我相信 .git/index 也用于暂存文件，并且可能在一台机器上启动该过程并在另一台机器上完成它，这需要 .git/index 同步。

（我知道有些人认为将 git repos 与 unison 同步很奇怪，但 unison 的重点是您可以在两台不同的机器上工作之间切换，并从您离开的地方继续。这是一个了不起的工具！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T19:48:36.600

对于这个问题的作者来说，这可能不是解决方案，但就我而言，etckeeper 的每日自动提交功能是罪魁祸首。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T10:39:00.890

我在设置中看到了同样的问题，我让 Unison 在两台机器之间同步我的主目录（包含 3 个 git repos），以及一个 cd 到每个 repo 目录并每天运行“git status”的 cron 作业（并通过电子邮件发送给我如果未签入更改）。我的测试表明这是由于 .git/index 存储了特定于机器的数据，例如文件的 inode 数量[1]。

要对此进行测试，请使用已经在两台机器上同步且相同的存储库。将 .git/index 从一台机器复制到另一台机器，例如 `scp -p machineB:/home/me/myrepo/.git/index /home/me/myrepo/.git/index`

现在比较这两个文件，您应该会发现它们是相同的： `sha1sum /home/me/myrepo/.git/index ssh machineB "sha1sum /home/me/myrepo/.git/index"`

现在运行：`git status`

现在再次比较这两个文件，你会发现它们已经改变了： `sha1sum /home/me/myrepo/.git/index ssh machineB "sha1sum /home/me/myrepo/.git/index"`

我没有看到解决方案，因为如果不运行诸如更新索引的 git status 之类的命令，就无法使用 git。

[1] [https://github.com/git/git/blob/867b1c1bf68363bcfd17667d6d4b9031fa6a1300/Documentation/technical/index-format.txt#L38](https://github.com/git/git/blob/867b1c1bf68363bcfd17667d6d4b9031fa6a1300/Documentation/technical/index-format.txt#L38)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-25T14:58:39.573

罪魁祸首竟然是 Emacs VC 模式： [https ://emacs.stackexchange.com/questions/38418/could-magit-be-writing-git-index-without-my-intervention](https://emacs.stackexchange.com/questions/38418/could-magit-be-writing-git-index-without-my-intervention)

为了使这篇文章成为答案，而不是评论，我不得不说更多。所以这里转载了正确的答案：

> Emacs VC 使用计时器来定期刷新一些信息并调用`git`命令来这样做，其中一些会触及索引。
> 
> 如果 VC 是导致此问题的原因，则删除`Git`from `vc-handled-backends`可能会解决此问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-18T22:15:42.720

在 Emacs 中禁用 VC 并不能真正解决这个问题。它只会阻止 Emacs 自己运行`git status`，但手动运行它仍然会修改文件`.git/index`并导致与 Unison 的虚假修改/冲突。

git 邮件列表建议了一个适合我的解决方法 [1]：

*   `times = true`在 Unison ( )中启用 mtime 同步
*   `git config core.trustctime false`
*   `git config core.checkstat minimal`

（当然可以全局设置 git-config 选项。）

通过这些设置，git 现在在检查文件是否被修改时只查看 mtime 的组成部分和文件大小，并且两者都由 Unison 同步。

[1] [https://marc.info/?l=git&m=157937653401027](https://marc.info/?l=git&m=157937653401027)

# css - 在 div 中垂直和水平居中表格

> ID：12126248
> 
> 赞同：0
> 
> 时间：2012-08-25T22:46:19.867
> 
> 标签：css, html-table, alignment, vertical-alignment, centering

你可能认为它是重复的，但我不这么认为，因为**我说的是表格而不是图像！**

我尝试使用以下代码在 div 的中心水平和垂直设置一个表格。这些代码适用于图像，但是当我放置一个表格而不是图像时，它似乎看不到表格，然后将跨度大小设置为 100%，并且表格显示在 div 下方，而不是在 div 的中心。

代码：

```
<style>
.wraptocenter {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    width:155px;
    height: 160px;
    background-color:#999;
    display: block;
}
.wraptocenter * {
    vertical-align: middle;
}

.wraptocenter span {
    display: inline-block;
    height: 100%;
    width: 1px;
}

</style>
<!--[if lt IE 8]><style>
.wraptocenter span {
    display: inline-block;
    height: 100%;
}
</style><![endif]-->
<div class="wraptocenter">
    <span></span>
    <table border="1" width=" 70%">
        <tr height="10px">
            <td width="10px" height="10px"></td>
            <td width="10px" height="10px"></td>
        </tr>
        <tr height="10px">
            <td height="10px"></td>
            <td height="10px"></td>
        </tr>
    </table>
</div> 
```

如果你放一张图片，一切都很好，但桌子不行！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:10:22.620

见[http://jsfiddle.net/FW2Af/](http://jsfiddle.net/FW2Af/)

您的代码仅以 为中心元素`display:inline-block`，例如图像。但一张桌子有`display:table`。

然后，您可以通过创建一个包含您的表的内容来解决`div`它`display:inline-block`。

如果您希望表格的宽度为 wraptocenter 宽度的 70%：

*   摆到`width:100%`桌子上
*   设置`width:70%`为容器`div`。

此外，您还有`width="10px"`顶部单元格。如果表格的宽度为 70%，那是无稽之谈。

**编辑：**

我已经修复了 IE 7（及之前），因为如果你设置`display:inline-block`一个元素是一个块，它仍然是一个块，所以你必须设置`diplay:inline`才能使它成为`display:inline-block`：

```
<!--[if lt IE 8]><style>
.wraptocenter>div{
    display:inline;
}
</style><![endif]--> 
```

`<span>`此外，在某些浏览器上会显示和之间的空格`<div>`，因此表格没有完全居中。

解决方案是：

```
.wraptocenter {
    font-size:0;
}
.wraptocenter>div{
    font-size:16px; /* Or whatever you want */
} 
```

（字体：[https](https://stackoverflow.com/a/8902198/1529630) ://stackoverflow.com/a/8902198/1529630 ，这是个好主意，因为在这种情况下使用浮动会破坏居中）

在这里看到它：http: [//jsfiddle.net/FW2Af/2/](http://jsfiddle.net/FW2Af/2/)

**编辑3：**

你说在 IE 8 上什么都没有显示。对我来说它有效，但不是黑色边框，而是白色。固定在这里：http: [//jsfiddle.net/FW2Af/3/](http://jsfiddle.net/FW2Af/3/)

```
.wraptocenter td{
    border:1px solid black;
} 
```

# ios - UIButton,UIAlertView 设置动作

> ID：12126249
> 
> 赞同：0
> 
> 时间：2012-08-25T22:46:22.787
> 
> 标签：ios, uibutton, uialertview

我有一个简单的问题，请帮助我，因为我真的卡住了。如果登录名和密码不为空，我需要在按下登录按钮后切换到另一个 ViewController

我有一个简单的登录界面，带有用户名、密码和登录按钮。UIAlertView 在密码或登录为空时显示，代码如下：

.m 文件

```
- (IBAction)login:(id)sender {
    if (userName.text.length == 0 || password.text.length == 0){
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Complete All Fields" message:@"You must complete all fields to login!" delegate:self cancelButtonTitle:@"Good" otherButtonTitles:nil, nil];
        [alert show]; 
    }
} 
```

如何为按钮添加动作以切换到其他 UIController？这个一直很糟糕`[self presentModalViewController: anotherUIViewController animated YES];`这里还有一个通知 - “应用程序试图在目标上呈现一个 nil 模态视图控制器。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T05:45:44.457

根据您使用的是 xibs 还是 storyboards，只保留下面解释的其中一行。

```
- (IBAction)login:(id)sender {
    if (userName.text.length == 0 || password.text.length == 0){
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Complete All Fields" message:@"You must complete all fields to login!" delegate:self cancelButtonTitle:@"Good" otherButtonTitles:nil, nil];
        [alert show];
    }else{
        //if you are using xibs use this line
        UIViewController *anotherUIViewController = [[UIViewController alloc] initWithNibName:@"anotherUIViewController" bundle:[NSBundle mainBundle]];
        //
        //if you are using storyboards use this line
        UIViewController *anotherUIViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"someIdentifierForThisController"];
        //
        //then simply present the view controller
        [self presentViewController:anotherUIViewController animated:YES completion:nil];
    }
} 
```

# javascript - 将页面的 javascript 变量更改转换为提要

> ID：12126251
> 
> 赞同：2
> 
> 时间：2012-08-25T22:46:51.710
> 
> 标签：javascript, rss

[http://www.wtfcomics.com/index.html](http://www.wtfcomics.com/index.html)是我关注的唯一一个既没有 RSS 也没有 Twitter 功能的网站。我已经尝试过像 page2RSS 这样的服务，并且我已经用尽了所有最后一种方法来关注这个宇宙中存在的 Facebook 页面，但没有任何效果。

作为最后的手段，我查看了页面的来源。当他上传新漫画时发生变化的一件事是 javascript 变量“newest_issues”。我想知道是否有可能创建某种提要，只要该变量从其当前数字更改时就会自动通知我，因为 RSS（或至少 page2RSS）无法做到这一点。

如果这不可能，另一种方法是 Facebook 页面：我找到了它的 RSS 提要，但该提要不包括其他人的墙贴（即使我在 URL 的末尾添加了 &everyone），其中是一个问题，因为作者当前在更新站点时从他自己的 Facebook 帐户发布到该页面。

如果那是不可能的，最后的替代方法是监视服务器以获取新图像文件的提要，但我非常怀疑它是否具有允许我这样做的文件夹权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:10:41.517

我用 Feed43.com 制作了一个 RSS 提要。就到这里，希望对你有用。 [http://feed43.com/wtfcomics.xml](http://feed43.com/wtfcomics.xml)

# cuda - NVIDIA GPU 对设备内存 0x0 做了什么？

> ID：12126252
> 
> 赞同：6
> 
> 时间：2012-08-25T22:46:54.077
> 
> 标签：cuda

似乎其中一本 CUDA 书籍（CUDA by Example: An Introduction to General-Purpose GPU Programming）中的示例在初始化指针时从未使指针无效。

两个问题：

1.  GPU 是否使用 0x0（或整数 0）作为 NULL 指针？我们是否应该使用设备指针遵循 C/C++ 指针实践（例如，在初始化时将其设为无效）

2.  在 cudaFree 之前我们需要检查指针是否为 NULL 吗？if (devPtr) HANDLE_ERROR(cudaFree(devPtr));

有人说，对于 Fermi 架构，0x0 用于片上共享内存，看来使用 0x0 不应该被使用过的指针指向还是可以的。
[http://forums.thedailywtf.com/forums/p/25369/273567.aspx](http://forums.thedailywtf.com/forums/p/25369/273567.aspx)

开普勒架构怎么样？GPU对0x0地址做了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:44:56.860

通常，您可以像处理主机指针一样处理 NULL 指针。回答你的问题。

1.  是的。随意使用您在主机上使用的相同做法（随意无效）。

2.  在释放它之前检查 NULL 是安全的，但不是必需的，因为`cudaFree(0)`实际上不会尝试释放任何内存。（实际上`cudaFree(0)`通常用于初始化 CUDA 上下文！）我相信大多数现代`malloc`实现不会尝试释放零值指针。

# facebook - MVC4 oauth facebook 访问用户和朋友权限：

> ID：12126253
> 
> 赞同：6
> 
> 时间：2012-08-25T22:47:07.000
> 
> 标签：facebook, asp.net-mvc-4

现在使用新的 mvc4 可以让我们使用 facebook oauth otb。

我在 facebook 中创建了一个新应用程序，并针对询问用户电子邮件地址/位置和生日的权限设置了一些额外的要求。

我已经在 fb 中保存了更改，当单击预览身份验证对话框时，我可以看到我希望在预览窗口中显示的额外权限。

当我尝试对 facebook 进行身份验证时，系统不会询问我是否允许我在 facebook 中设置的额外字段。

我的 mvc 应用程序中是否还有其他内容需要更改才能将这些额外要求传递给 facebook？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:41:56.983

看来您必须编写自己的自定义提供程序。如果是这样，您应该查看 [http://blogs.msdn.com/b/webdev/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx) 和 [http://blog.mrroa.com /post/30454808112/asp-net-custom-linkedin-oauth-provider](http://blog.mrroa.com/post/30454808112/asp-net-custom-linkedin-oauth-provider)

我所做的是：在`AccountController`： - 我使用 Facebook 添加；（`facebook.dll`来自 www.csharpsdk.org）也在`AccountController`，找到`ExternalLoginCallback`：

在这里，我使用 facebook c# sdk 在调用`CreateOrUpdateAccount`.

我不认为这是最好的解决方案，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:11:01.870

> 我在 facebook 中创建了一个新应用程序，并针对询问用户电子邮件地址/位置和生日的权限设置了一些额外的要求。
> 
> 我已经在 fb 中保存了更改，当单击预览身份验证对话框时，我可以看到我希望在预览窗口中显示的额外权限。
> 
> 当我尝试对 facebook 进行身份验证时，系统不会询问我是否允许我在 facebook 中设置的额外字段。

这听起来像您是另一个对*[Authenticated Referrals](https://developers.facebook.com/docs/opengraph/authentication/#referrals)*实际所做的事情感到困惑的人。（您的应用设置中的权限字段仅适用于那些！）

*当用户点击任何链接重定向到您在 Facebook 上的应用时，经过身份验证的推荐*就会发挥作用。

但是，如果您自己进行登录 - 您必须使用参数请求您想要的权限`scope`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:20:25.793

不幸的是，如果您在 MVC 4 附带的 FacebookClient 类上使用 ILSpy，您会看到 MS 代码根本不请求电子邮件信息，即使底层 DotNetOpenAuth 类支持它。

因此，您需要实现自己的 FacebookClient 类，该类几乎完成相同的操作，但将电子邮件地址添加到请求的项目中。我自己现在正在尝试这个，并希望它很快就能工作。

# google-chrome - chrome css-transform 问题：旋转元素前面的元素对样式和点击反应不佳

> ID：12126254
> 
> 赞同：2
> 
> 时间：2012-08-25T22:47:23.550
> 
> 标签：google-chrome, css, css-transforms

我有一个旋转的绿色 div：

`-webkit-transform: perspective( 600px ) rotateY( -45deg )`

在它的前面有一个黑色的 div `cursor:pointer`（并且它也会在点击时发出警报）。

演示小提琴：http: [//jsfiddle.net/antishok/QWNyT/8/](http://jsfiddle.net/antishok/QWNyT/8/)

**问题**：在 chrome 中（但不是在 FF 中）沿黑色 div 移动鼠标光标时，有一个光标返回默认值的整个区域（并且不会触发单击事件）。没有后面的 div 的旋转，就不存在这样的问题。

我能做点什么吗？这是一个已知的错误？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T10:36:45.670

如果您在 Safari 中查看，您会看到黑色 div 实际上穿过绿色 div，如下所示：

![在此处输入图像描述](../Images/f298693bc3adc848045e8cf2a19548ca.png)

因此，从您的意图来看，Chrome 似乎正确地获得了命中区域，但 Firefox 和 Chrome 都将其呈现错误。

您需要做的是在 3d 空间中将绿色 div 推得更远，您可以通过...

```
-webkit-transform: translateZ( -200px ) perspective( 600px ) rotateY( -45deg );
-moz-transform: translateZ( -200px ) perspective( 600px ) rotateY( -45deg ); 
```

# position - CoreMidi 解析 MIDI 歌曲位置

> ID：12126255
> 
> 赞同：1
> 
> 时间：2012-08-25T22:47:35.707
> 
> 标签：position, midi, coremidi

我正在尝试解析收到的 midi 值并以以下格式显示它：

酒吧：节拍：部门：滴答声

我有以下代码：

```
unsigned short CombineBytes(unsigned char First, unsigned char Second) 
{ 
    unsigned short _14bit;

    _14bit = (unsigned short)Second; 
    _14bit<<=7; 
    _14bit|=(unsigned short)First; 
    return(_14bit); 
}

-(void) midiSource:(PGMidiSource *)input midiReceived:(const MIDIPacketList *)packetList{

    const MIDIPacket *packet = &packetList->packet[0];
    for (int i = 0; i < packetList->numPackets; ++i)
    {

        Byte statusByte = packet->data[0];
        Byte status = statusByte >= 0xf0 ? statusByte : statusByte >> 4 << 4;

        if (status == 0xF2){

            NSLog(@"%i", CombineBytes(packet->data[1], packet->data[2]));
        }
    }
} 
```

基本上，当 Logic Pro 或 Ableton Live 发送歌曲位置信号时，我会收到 404、405 等值...

例如：404= 026:02:01 其中 026 = 小节，02= 节拍，01 - 分度。这部分对我来说很清楚......

但是怎么买票呢？这就是问题所在，这要么是我不明白的事情。或者应该是不同的midi信号。但我看了看 Midi Monitor 并没有看到其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-29T10:40:23.960

根据 MIDI 标准，1 个节拍 = 6 个时钟。后者通过定时时钟消息（0xF8）发送。

# database - 是否有任何数据库使用基于增量或差异的复制？

> ID：12126261
> 
> 赞同：0
> 
> 时间：2012-08-25T22:48:28.073
> 
> 标签：database, replication, delta

是否有任何数据库使用基于增量的复制系统而不是 oplog 或 binlog 样式的复制方案？我正在寻找当前系统的示例、现有数据库（mysql、postgresql、mongodb 等）的插件或功能有限的专用数据库。

具体来说，我正在寻找通过每隔几秒发送一次更改而不是不断发送有关每次更新的信息来减少复制的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:55:09.467

据我所知不是。最接近您的是使用[DRBD](http://www.drbd.org/)之类的东西，它在磁盘块级别而不是在应用程序级别进行复制。

# javascript - 如何引用原型的父级？

> ID：12126262
> 
> 赞同：0
> 
> 时间：2012-08-25T22:48:46.687
> 
> 标签：javascript

我有一个非常基本的 javascript 问题，我什至无法制作适当的 Google 查询来回答它。例如：

```
function Parent(name){
  this.name = name;
}

Parent.prototype.Child() = function (){
  if(this.name == 'Sam'){ // This is the comparison that obviously doesn't work
    /* Do something */
  } else {
   /* Do something else */
  }
}

var Parent1 = new Parent('Sam');
var Child1 = new Parent1.Child(); 
```

在比较中是否有一个关键字可以用来代替 this 来访问 Parent 的“name”属性？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T22:50:49.573

这个例子不起作用，因为你有`()`它不属于的地方。它应该如下所示：

```
Parent.prototype.Child = ... 
```

此外，在这条线上..

```
var Child1 =  new Parent1.Child(); 
```

...它应该是

```
var Child1 = Parent1.Child(); 
```

我们取出了`new`因为`Parent1`不是构造函数。

然后，您的代码将按照您的预期运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T22:53:53.253

```
var Parent1= new Parent('sam') 
```

这将创建一个名为 parent1 的对象

因为 parent1 有能力使用子功能

它应该是

```
Parent.prototype.Child = function (){ 
```

最后你可以使用这个

```
parent1.child() 
```

# python - 使用 Google App Engine 下载链接

> ID：12126264
> 
> 赞同：1
> 
> 时间：2012-08-25T22:48:57.190
> 
> 标签：python, google-app-engine, download

我在 Google App Engine 上有一个静态网站，可以下载一些 .rar 文件。现在它由静态文件处理程序定义（app.yaml）处理：

```
handlers:
- url: /(.*\.(bz2|gz|rar|tar|tgz|zip))
  static_files: static/\1
  upload: static/(.*\.(bz2|gz|rar|tar|tgz|zip)) 
```

现在我想做的是提供一个像 /download?MyFile.rar 这样的下载链接，这样我就可以**计算下载量**并**查看谁在盗链**。

只要网站使用此网址，我就不想阻止盗链（真实路径将被隐藏/不可用）。这样我就可以计算下载量，即使它来自外部（Google Analytics 或 Clicky 显然无法处理，并且日志保留时间仅为 90 天左右，不方便用于此目的）。

问题是：如何制作一个可以为用户启动文件下载的python处理程序？就像我们在很多 php/asp 网站上看到的那样。

经过大量搜索并阅读了这两个线程（[我如何让 Google App Engine 有一个从数据库下载内容的下载链接？](https://stackoverflow.com/questions/11604193/how-do-i-let-google-app-engine-have-a-download-link-that-downloads-something-fro)，[google app engine download a file contains files](https://stackoverflow.com/questions/11605846/google-app-engine-download-a-file-containing-files)），似乎我可以有类似的东西：

```
self.response.headers['Content-Type'] = 'application/octet-stream'
self.response.out.write(filecontent) # how do I get that content?
#or
self.response.headers["Content-Type"] = "application/zip"
self.response.headers['Content-Disposition'] = "attachment; filename=MyFile.rar" # does that work? how do I get the actual path? 
```

我确实读到处理程序只能运行有限的时间，所以它可能不适用于大文件？

任何指导将不胜感激！

谢谢。

罗姆兹

**编辑：** 让它工作，它让我有一个处理所有 .rar 文件的处理程序。它让我拥有看起来像直接链接（example.com/File.rar）但实际上是在 python 中处理的 url（因此我可以检查引用者、计算下载量等）。

这些文件实际上位于不同的子文件夹中，并且由于生成路径的方式而**受到保护，不会受到真正的直接下载。**我不知道是否应该过滤掉其他字符（除了'/'和'\'），但是这样任何人都不应该能够访问父文件夹中的任何其他文件或其他任何文件。

虽然我真的不知道这一切对我的配额和文件大小限制意味着什么。

*应用程序.yaml*

```
handlers:
- url: /(.*\.rar)
  script: main.app 
```

*主文件*

```
from google.appengine.ext import webapp
from google.appengine.api import memcache
from google.appengine.ext import db
import os, urlparse

class GeneralCounterShard(db.Model):
    name = db.StringProperty(required=True)
    count = db.IntegerProperty(required=True, default=0)

def CounterIncrement(name):
    def txn():
        counter = GeneralCounterShard.get_by_key_name(name)
        if counter is None:
            counter = GeneralCounterShard(key_name=name, name=name)
        counter.count += 1
        counter.put()
    db.run_in_transaction(txn)
    memcache.incr(name) # does nothing if the key does not exist

class MainPage(webapp.RequestHandler):
    def get(self):

    referer = self.request.headers.get("Referer")
    if (referer and not referer.startswith("http://www.example.com/")):
        self.redirect('http://www.example.com')
        return

    path = urlparse.urlparse(self.request.url).path.replace('/', '').replace('\\', '')
    fullpath = os.path.join(os.path.dirname(__file__), 'files/'+path)
    if os.path.exists(fullpath):
        CounterIncrement(path)
        self.response.headers['Content-Type'] = 'application/zip'
        self.response.headers["Content-Disposition"] = 'attachment; filename=' + path
        self.response.out.write(file(fullpath, 'rb').read())
    else:
        self.response.out.write('<br>The file does not exist<br>')

app = webapp.WSGIApplication([('/.*', MainPage)], debug=False) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T02:21:25.673

您可以将文件内容存储在 blob 存储中并从那里提供服务，但如果文件很大且客户端速度较慢，您将达到时间限制（约 30 秒）

另一种选择是有一个简单的处理程序来计算下载，然后发出临时重定向（HTTP 302）到真正的下载链接。它可以让您提供大文件，但仍然可以热链接真实文件而不是处理程序 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T02:40:49.247

您可以尝试使用`self.resquest.referer`.

这是你如何做到的。有一个“单击此处”下载链接到您的文件下载页面，然后您可以有一个`FileDownloadHandler`，其中`name`//`id`或 whaterver 作为参数传递，在此处理程序中，检查引用者是否是“下载页面”，这样你就知道了如果请求是有效下载。如果是，则提供文件，如果不是，则重定向或执行一些错误。

只是一个想法

# ruby-on-rails - Rails - 访问 HABTM 中间人的关系数据

> ID：12126267
> 
> 赞同：0
> 
> 时间：2012-08-25T22:49:31.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我有 3 个模型：

```
#Client.rb
has_many :contracts
has_many :accessories,  :through => :contracts

#Contract.rb
has_and_belongs_to_many :accessories
belongs_to :client

#Accessory.rb
has_and_belongs_to_many :contracts
belongs_to :pay_interval
has_many :clients, :through => :contracts 
```

在我的客户的`show.html.erb`查看页面上，我想列出所有客户的配件，以及配件所属的合同 ID。例如：

```
<% @client.accessories.each do |a| %>
  <%= a.name %>
  <%= a.contract.id %>
<% end %> 
```

但是，`contract`不能通过附件访问，只能访问**合同**（复数），但我想避免第二个循环。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:43:41.227

> `contract`无法通过附件访问

这是混淆点，因为

```
<%= a.contract.id %> 
```

使您不清楚您要做什么。不是`contract`不能通过`Accessory`; 它`Accessory` **没有`contract`关联**。

* * *

假设您想要**each****的第`contract``Accessory`**一个，您可以`.include`在查询上使用强制连接您的`contracts`表，避免 n+1 查询问题

```
<% @client.accessories.includes(:contracts).each do |a| %>
  <%= a.name %>
  <%= a.contracts.first.id %>
<% end %> 
```

# ios - NSOperation VS GCD 用于核心数据

> ID：12126269
> 
> 赞同：5
> 
> 时间：2012-08-25T22:50:01.337
> 
> 标签：ios, core-data, grand-central-dispatch, nsoperation

什么更适合数据需要在一个线程上存储在 Core-Data 中并从另一个线程上从 Core-Data 读取的情况？

我在考虑 GCD，但它如何与为每个线程创建 NSManagedObjectContext 一起工作？如何在队列中创建这些对象？

当在各个线程上进行更改时，需要更新/同步数据存储，这对 GCD 或 NSOperation 更好吗？

我希望能够根据需要在读取和写入数据存储时将块传递到 2 个队列，而不会出现损坏存储或存储不同版本的问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-25T23:03:53.313

GCD 和 GCD 之间的争论`NSOperation`基本上可以归结为使用最高级别的抽象来为您提供一个好的解决方案。

`NSOperationQueue`是建立在 GCD 之上的，所以它一定是更高层次的抽象。

但是，GCD 在一般情况下非常容易使用，我发现`NSOperationQueue`在许多情况下它更可取。

现在，当您将 CoreData 加入其中时，我会建议第三种选择。如果您使用的是 iOS 5，那么您可以将私有队列并发与您的 MOC 一起使用。我发现这是一个很好的抽象，并提供了一个易于使用的界面。

因此，我建议您简单地`NSPrivateQueueConcurrencyType`为每个要执行 Core Data 的线程创建一个 MOC。您可以根据您的应用程序特性选择是共享一个`persistentStoreCoordinator`，还是使用一个单独的。您甚至可以使用嵌套上下文（对插入端有一个警告）。

基本上，它遵循这个模型......

```
NSManagedObjectContext *moc = [[NSManagedObjectCotext alloc] initWithConcurrencyType:NSPrivateQueuqConcurrencyType];
moc.parentContext = contextIWantToBeParent;
moc.persistentStoreCoordinator = pscIWant;

[moc performBlock:^{
    // Your MOC stuff running on its own private queue
}]; 
```

当然，您必须选择一种方法（对现有 MOC 进行育儿或附加到 PSC）。

我通常更喜欢这种`performBlock`方法。

**编辑**

> 谢谢。我读到 NSManagedObject 不是线程安全的。我将如何在该私有队列上创建新的 NSManagedObjects？– 氦气3

是的，这是真的。但是，当您创建具有并发类型的 MOC 时，您就同意了类似这样的合同。

我，一个精明的程序员，郑重同意以下关于并发的核心数据规则：

1.  如果我使用`NSConfinementConcurrencyType`，我只会在创建它的线程上运行时使用它。

2.  如果我使用`NSPrivateQueueConcurrencyType`，我只会在`performBlock`或中使用 MOC `performBlockAndWait`。

3.  如果我使用`NSMainQueueConcurrencyType`，我只会在 、 或当我知道我在主线程上运行时使用`performBlock`MOC `performBlockAndWait`。

如果您遵循这些规则，那么您将能够在其他线程上使用 MOC。

具体来说，在使用 时`performBlock`，Core Data API 将确保代码适当地同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:03:23.873

您的所有问题都已通过 iOS 5 中的新上下文并发类型得到解决，甚至更多：

[http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html)

[http://www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

# javascript - 使用 getElementById 时不显示 lat 和 lng

> ID：12126278
> 
> 赞同：0
> 
> 时间：2012-08-25T22:51:25.610
> 
> 标签：javascript, google-maps, geolocation

我正在按地址获取纬度和经度。一切正常，我可以毫无问题地显示地图，但我想显示高度和经度。

这是我的代码，我在正文中初始化

```
function codeAddress() {
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                draggable: true,
            });

        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
        google.maps.event.addListener(marker, 'click', function() {
            document.getElementById('lat').value = results[0].geometry.location.lat();
            document.getElementById('lng').value = results[0].geometry.location.lng();
        });
    });
} 
```

这是用法：

```
<div id="mapholder"></div>
            </p>
            <div id="map_canvas"></div>
            <div id="info"></div>
            <div>
                <input id="address" type="textbox" value="הזן כתובת">
                <input type="button" value="מצא את מיקומך" onclick="codeAddress()"><br>
                <input type="button" value="מצא קופונים באזורך" onclick="showPositionCoupons(32.105892, 35.198483)"><br>
                Latitude: <input type="text" id="lat"><br>
                Longitude: <input type="text" id="lng"><br>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:54:48.573

好吧，发现代码很好用

```
function updateCoordinates(latlng)
{
  if(latlng) 
  {
    document.getElementById('lat').value = latlng.lat();
    document.getElementById('lng').value = latlng.lng();
  }
}

function codeAddress() {
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            updateCoordinates(results[0].geometry.location);
            if (marker) marker.setMap(null);
            marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                draggable: true
            });

            google.maps.event.addListener(marker, "dragend", function() {
                updateCoordinates(marker.getPosition());
            });

        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
} 
```

# xml - PDF 到 XML 并再次返回 PDF

> ID：12126282
> 
> 赞同：3
> 
> 时间：2012-08-25T22:52:54.367
> 
> 标签：xml, pdf

好吧，我最近问了一个关于将 PDF 文件变成 XML 文件然后将其返回到 PDF 文件的问题，最好与原始文件完全相同，但至少几乎相同。

我一直在尝试不同的方法，到目前为止我想出了这个。

1.  用 LibreOffice 编写的文档被保存为 DocBook XML。假设它被命名为“file.xml”。
2.  该文件由文件“docbook.xsl”启动的 DocBook 项目中的一组 XSL 模板解析。
3.  这可以通过运行：xsltproc -o intermediate-fo-file.fo /usr/share/xml/docbook/stylesheet/nwalsh/fo/docbook.xsl file.xml
4.  结果是一个中间 XSL-FO，通过运行以下命令变为 PDF： fop intermediate-fo-file.fo final.pdf
5.  此 PDF 文件看起来与原始 ODT 文件几乎相同。

但是，假设我一开始有一个 PDF 文件，怎么能做同样的事情呢？有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T00:26:12.627

从 PDF 无损转换到 XML 的唯一机会是使用与 PDF 具有相同文档视图的目标 XML 词汇表。由于 PDF 的文档视图主要（如果不完全是）集中在表示上，并且设计像 Docbook 这样的 XML 词汇表的通常动机是捕获更高级别的抽象，因此您面临两个困难：（1）面向表示的 XML 词汇表并不厚实并且 (2) 如果您想从 PDF 转换为更传统的 XML 词汇表（直接或通过面向表示的 XML），您将推动水上坡，试图解释文档的表示形式目标词汇的更高层次的抽象。充其量，要使这样的过程自动化是非常困难的。

如果这是一种思想实验，并且您正在考虑 PDF-XML-PDF 往返以了解何时以及如何实现它，那么您现在知道某些人会给出的理由认为它在任何一般形式下都不可能。如果您出于某种实际原因需要此 PDF 到 PDF 数据流，您可能需要考虑是否可以通过其他方式实现您的实际目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T14:47:56.530

如果您的文档与全文文章类似（例如[http://pdfx.cs.man.ac.uk/example.pdf](http://pdfx.cs.man.ac.uk/example.pdf)），[PDFX](http://pdfx.cs.man.ac.uk/)可能会有所帮助。

它将 PDF 文章转换为结构类似于 Docbook 文档的 XML。它还尝试保留在原始 PDF 中找到的有关提取元素的一些定位信息（例如页码和列号），这可以帮助您从 PDFX XML 转到您已经制作 PDF 的 Docbook XML。

输入/输出示例：http: [//pdfx.cs.man.ac.uk/example](http://pdfx.cs.man.ac.uk/example)

用法： http: [//pdfx.cs.man.ac.uk/usage](http://pdfx.cs.man.ac.uk/usage)

您也可以考虑使用 Tex 替代 XSL-FO，[TeXML](https://en.wikipedia.org/wiki/TeXML)。我有一个旧的 XSL 可以将类似 PDFX 的 XML 转换为 .texml，然后`texml`可以将其转换为`.tex`.

（披露：我写了 PDFX。）

# c# - 在 C# 和 XAML 中绑定数据？

> ID：12126284
> 
> 赞同：0
> 
> 时间：2012-08-25T22:53:28.447
> 
> 标签：c#, xaml, binding, microsoft-metro

我正在尝试在我的 Metro 应用程序中使用与 C# 和 XAML SemanticZoom 控件的绑定，但老实说，我不知道该怎么做。这是迄今为止我从问题、文章等中拼凑而成的 XAML 代码：

```
<SemanticZoom x:Name="boardZoom" Height="626" Margin="10,132,10,0" VerticalAlignment="Top">
        <SemanticZoom.ZoomedInView>

           <GridView IsSwipeEnabled="True" x:Name="ItemsGridView">

                    <GridView.ItemTemplate>

                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="10,10,0,0" 
                        HorizontalAlignment="Left" Background="White">
                                <TextBlock Text="{Binding Title}" TextWrapping="Wrap" Width="200" Height="300"
                                    FontFamily="Global User Interface" FontSize="40" Foreground="Black"
                           VerticalAlignment="Center"  HorizontalAlignment="Left"/>

                                <Image Source="{Binding Image}" Height="60" Width="60" 
                       VerticalAlignment="Center" Margin="0,0,10,0" Visibility="{Binding isImage}" />

                                <TextBlock Text="{Binding Category}" TextWrapping="Wrap" Width="200"
                                    FontFamily="Global User Interface" Foreground="Black"
                           VerticalAlignment="Center"  HorizontalAlignment="Left"/>
                            </StackPanel>
                        </DataTemplate>

                    </GridView.ItemTemplate>

                </GridView>
            </SemanticZoom.ZoomedInView>

<!--Didn't include SemanticZoom.ZoomedOutView since I'm still trying to get the ZoomedIn one working first-->

        </SemanticZoom> 
```

还有我的 C# 代码：

```
 List<PinStore.pin> pins = PinStore.CopyFromStream(response.GetResponseStream()); //returns a list of PinStore.pin objects, which have name, type, Image, isImage, and Category objects
        System.Collections.ObjectModel.ObservableCollection<SemanticZoomed.zoomedIn> toSource = new System.Collections.ObjectModel.ObservableCollection<SemanticZoomed.zoomedIn>(); //should I be using ObservableCollection or something like List<> here?
        foreach (PinStore.pin pin in pins)
        {
            SemanticZoomed.ZoomedIn toAdd = new SemanticZoomed.ZoomedIn(); //class with Title, Image, isImage, and Category objects
            if (pin.type == "text")
            {
                toAdd.Title = pin.name;
                toAdd.Image = null;
                toAdd.isImage = Visibility.Collapsed;
                toAdd.Category = pin.category;
            }
            toSource.Add(toAdd);
        }
        ItemsGridView.DataContext = toSource; 
```

我在 XAML/C# 方面没有太多经验，并且在绑定方面经验为零。我没有收到任何错误，但我注意到如果我替换`ItemsGridView.DataContext = toSource;`为`ItemsGridView.ItemsSource = toSource;`GridView 中显示的空白堆栈面板，我似乎无法找到用我指定的标题和类别值填充它的方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:10:41.703

那么您应该首先考虑创建一个 ResourceDictionary 以便您可以保存您的项目样式。然后您可以将 ItemStyle 设置为资源字典。

但不管你需要做什么： ItemsGridView.ItemsSource = toSource; 如果不选择在 GridView xaml 中绑定 toSource。

还要确保 SemanticZoomed.zoomedIn 对象实现 INotifyPropertyChanged 接口，并正确调用事件。并确保标题、图像、类别等是在编辑时调用事件的公共属性。并且您还需要确保 pin.Text 是实际值。{确保}。

如果您想了解有关数据绑定的更多信息，请查看他们如何在 Windows 8 中使用 C# 和 XAML 进行操作{应该是一样的}：http: [//msdn.microsoft.com/en-us/library/windows/apps/ xaml/hh464965.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh464965.aspx)

# delphi - 如何使我的应用程序静音？

> ID：12126287
> 
> 赞同：6
> 
> 时间：2012-08-25T22:53:54.363
> 
> 标签：delphi, audio, delphi-xe2, volume

我有一个有声音的应用程序。我有一个全局属性来静音。问题是，有很多不同的东西可以发出声音，我不想遍历不同的类类型并将它们的声音静音/取消静音。相反，我正在寻找一种在全局应用程序级别上静音的方法。我也不是说要使整个系统音量静音。

一种情况：在 Windows 7 中，您可以打开音量混合器并调整各个应用程序的音量。虽然我不打算更改这个实际的特定值（因为我知道它是特定于 Windows 7 的），但我想一次更改我的应用程序中所有内容的音量。我还需要能够完全静音应用程序中所有内容的声音。我需要这种能力才能与 Windows XP 及更高版本兼容。我假设它将涉及 Windows API 调用，但我不知道要进行什么调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T08:40:21.883

XP 不支持按应用程序进行音量控制。该功能是在 Vista 中添加的。因此，您尝试做的事情不能在 XP 中以公平的方式完成。

有一个名为[IndieVolume](http://www.indievolume.com/)的软件，它可以复古地将每个应用的音量控制适应 XP。我只能想象它是通过低级黑客攻击、DLL 注入等方式实现的。我怀疑这对你来说真的是一个选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T13:01:24.450

你所要求的在 XP 上是不可能的；操作系统根本不支持每个应用程序的音量级别。

您可以通过创建一个设置类来保留类似`SoundActive: Boolean`或`PlaySounds: Boolean`类似的东西来完成您想要的事情。将它放在它自己的单元中，并有一个创建它的实例的初始化部分和一个释放它的终结部分（使其有效地成为全局值的集合）。

每个需要访问这些设置的单元只需使用包含它们的单元，并相应地调整行为。因此，您的每个子类或表单或任何只需要添加检查的东西：

```
if CurrentSettings.PlaySounds then
  // Code that makes sounds, plays music, whatever. 
```

设置类还可以包含跟踪当前音量级别的方法（在 XP 上，系统范围级别），以及使用`MMSystem`音量函数增加或减少音量的方法（这里有很多例子，通过谷歌这样做）。然后，您的应用可以使用`OnActivate`和`OnDeactivate`事件在您的应用获得焦点时设置音量级别，并在您的应用失去焦点时将其恢复到适当的音量。

在 Vista 及更高版本中，您可以使用[`IAudioEndPointVolume`](http://msdn.microsoft.com/en-us/aa964574.aspx)我前面提到的界面和控制系统范围音量的方法`GetMasterVolumeLevel`或`SetMasterVolumeLevel`方法（我有一个这样做的示例，以及适当的`MMDevAPI`接口定义）或设备级音量（[`IMMDevioce.Activate`](http://msdn.microsoft.com/en-us/ms679029)用于选择合适的设备先然后上面的`IAudioEndPointVolume`方法在设备接口上从参数`IMMDevice.Activate`中接收`ppInterface`）。

对于单个应用程序，您可以使用该[`ISimpleAudioVolume`](http://msdn.microsoft.com/en-us/library/ms679138.aspx)接口，该接口有四种方法：`GetMasterVolume`和`SetMasterVolume`，用于控制应用程序音频会话的音量，以及`GetMute`允许`SetMute`您检索当前静音标志值或分别设置它。（MS 的 Larry Osterman 是开发 Vista 和 Win7 中新音频支持的开发人员之一，在他的博客上有一篇很好的[起点文章](http://blogs.msdn.com/b/larryosterman/archive/2007/04/04/volume-in-windows-vista-part-2-types-of-volume-in-windows-vista.aspx)，介绍了新 API 中的音频类型以及何时使用它们。 )

从概念上讲，可以在运行时确定您正在使用哪个操作系统，并以编程方式在使用`MMSystem`XP 和更早版本的`MMDevAPI`功能与 Vista 和更高版本的功能之间切换。然而，期望有人在这里提供这样做的代码有点不合理。我提供的链接应该让您开始走上正确的道路，当您遇到障碍时，解决这些障碍的具体帮助将是很好的问题。

# java - 替换没有空格的字符串中的字符序列 - java

> ID：12126289
> 
> 赞同：1
> 
> 时间：2012-08-25T22:54:30.557
> 
> 标签：java, string, replace

我正在尝试用“”替换字符序列“&a”

所以我可以有例如：“This&aIs&aA&aTest”->“ThisIsATest”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:56:59.533

使用[String#replace](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)。

```
String yourString = "This&aIs&aA&aTest";
yourString = yourString.replace("&a", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T22:57:14.143

使用`String.replace`：

```
s = s.replace("&a", ""); 
```

请记住，字符串是不可变的。`String.replace`实际上并没有修改字符串。您需要将结果分配回变量。

在线查看它：[ideone](http://ideone.com/oQYdc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T22:57:03.830

使用带有 replaceAll() 的正则表达式

```
str.replaceAll("&a", ""); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-25T22:57:41.730

这正是 String 对象的替换函数的用途。如果要获取所有出现的 &a，请使用正则表达式，如下所示：

```
<html>
<script>

a =  "This&aIs&aA&aTest"

alert(a.replace(new RegExp ("&a", "g") , " "));

</script>
</html> 
```

或替换所有（）。

# vim - 紧迫 在行首给我一个“M”

> ID：12126293
> 
> 赞同：2
> 
> 时间：2012-08-25T22:55:07.250
> 
> 标签：vim, vi, ncurses, gnu-screen

这是一个最奇怪的问题，我只能使用 GNU Screen 和诺基亚 N900 解决。在 vi（vim 和 nvi，结果是）下，如果我在插入模式下输入，`one<Enter>two`我会得到

```
Mtwo
one 
```

所以，不仅在行首`<Enter>`放了一个，而且实际上它同时做了一些很奇怪的事情。`M`除其他外，此问题不允许我保存并退出。

有什么想法吗？提前致谢。

**可能的答案**：事实证明，[我不是唯一一个遇到此问题的人](https://stackoverflow.com/questions/63378/screen-vim-causes-shift-enter-to-insert-m-and-a-newline)，只需将其添加`term xterm`到您的`.screenrc`. 很抱歉在询问之前没有进行更彻底的搜索...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:02:46.160

你`<Enter>`就像一个回车和换行（`<CRLF>`）。那是 ASCII 10，然后是 ASCII 13（你看到的 CTRL-M）。但是，屏幕不支持它。试着做：

```
export TERM=vt100 
```

然后运行 ​​vi 等或只是

```
TERM=vt100 vi 
```

这应该可以解决问题（假设您具有 vt100 终端功能）。

# php - 根据用户位置显示天气

> ID：12126295
> 
> 赞同：5
> 
> 时间：2012-08-25T22:55:19.293
> 
> 标签：php, wordpress, location, weather

我正在使用根据我插入的 Yahoo API URL 更改我的 wordpress 网站背景的代码。有没有办法让它在没有任何数据库的情况下自动显示访客天气？我虽然使用过 Google 的 API，但我是编程新手，不知道如何在我的网站中实现它。请帮忙！代码可以在这里查看：http: [//css-tricks.com/using-weather-data-to-change-your-websites-apperance-through-php-and-css/](http://css-tricks.com/using-weather-data-to-change-your-websites-apperance-through-php-and-css/)

请彻底，因为我是 PHP 新手 谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-05-06T07:20:20.133

您将需要一个 API 用于将访问者 IP 地址映射到位置 ( [ipapi.co](https://ipapi.co/#api) )，并需要另一个 API 来获取该位置的天气预报 ( [openweathermap.org](http://openweathermap.org/api) )。以下代码适用于 php（服务器端）：

```
# Part 1 (get latitude & longitude)
$ip = '1.2.3.4';
$api_1 = 'https://ipapi.co/' . $ip . '/latlong/';
$location = file_get_contents($api_1);
$point = explode(",", $location);

# Part 2 (get weather forecast)
$api_2 = 'http://api.openweathermap.org/data/2.5/weather?lat=' . $point[0] . '&lon=' . $point[1] . '&appid=API_KEY';
$weather = file_get_contents($api_2); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T01:22:12.747

[这将使用来自Data Science Toolkit的开源](http://www.datasciencetoolkit.org/)[IP2Coordinates 服务](http://www.datasciencetoolkit.org/developerdocs#ip2coordinates)从用户的 IP 地址获取用户的邮政编码。

那里有更准确的地理位置 API，但这个 API 是完全免费的，而且使用起来非常简单。如果我在生产站点上开发这个，我会使用[HTML5 Geolocation](http://www.w3schools.com/html5/html5_geolocation.asp)作为我的主要方法，并回退到更好的 IP 地理定位器，比如[Max Mind](http://www.maxmind.com/app/ip-location)。

请注意，这仅适用于您网站的美国用户。您可能应该将更详细的数据传递给其他 Yahoo 地点 API 之一，以使用其 WOEID 之一（或选择不同的天气 API）。

这是给你的代码。将其放在`<?php`示例代码中的标记之后。一旦你确定它工作正常，注释掉所有以 . 开头的行`print`。

```
//Get the user's IP address
$user_ip = $_SERVER['REMOTE_ADDR'];
//The Data Science Toolkit URL
$url = 'http://www.datasciencetoolkit.org/ip2coordinates/';
//Find the user's location from their IP. 
//*** You need the get_data function from the sample code
$raw_geocode = json_decode( get_data( $url . $user_ip) );
//Check if the user is in the US
if ('US' === $raw_geocode->$user_ip->country_code) {
  //If yes, store their zip code in a variable, and print it
  $zip_code = $raw_geocode->$user_ip->postal_code;
  printf('<p>Your zip code is: %s</p>', $raw_geocode->$user_ip->postal_code);
} else {
  //If the user isn't in the US, set a sip code that will work.
  $zip_code = '97211';
  //and print an error
  printf('<p>Sorry, this app does not work in %s.</p>', $raw_geocode->$user_ip->country_name);
}

//Print the raw data for debugging.
printf('<pre>%s</pre>', print_r($raw_geocode, true)); 
```

现在将示例代码中以此开头的行更改为`$data =`：

```
$data = get_data("http://weather.yahooapis.com/forecastrss?p={$zip_code}&u=f"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T17:02:17.847

使用[ipinfo.io](http://ipinfo.io/)和[OpenWeatherMap](http://openweathermap.org/)

Javascript：

```
<script type="text/javascript" src="jquery.simpleopenweather.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $.get("http://ipinfo.io", function (response) {
            $("#weather").attr('data-simpleopenweather-city', response.city).simpleopenweather({template: '<h2>'+'{{temperature}} '+'&deg;'+'C'+'<h2>', units: 'metric'});
        }, "jsonp");
    });
</script> 
```

HTML：

```
<div id="weather" class="simpleopenweather" data-simpleopenweather-city=""></div> 
```

它将显示类似 6.3 ºC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-13T04:55:50.667

```
***You can get data about the location with use third-party API. for example:http://ip-api.com/.**
You get your location weather data from OpenWeatherMap service using the ip-api. its help you to get visitor location weather.*

 var getIP = 'http://ip-api.com/json/';
    var openWeatherMap = 'http://api.openweathermap.org/data/2.5/weather'
    $.getJSON(getIP).done(function(location) {
        $.getJSON(openWeatherMap, {
            lat: location.lat,
            lon: location.lon,
            units: 'metric',
            APPID: 'Your-Openweather-Apikey'
        }).done(function(weather) {
          $('#weather').append(weather.main.temp);
            console.log(weather);
        })
    }) 
```

HTML：

```
<div id="weather"> </div> 
```

它显示您当前的天气温度。

# android - Android中的最大音量响铃

> ID：12126299
> 
> 赞同：1
> 
> 时间：2012-08-25T22:56:11.663
> 
> 标签：android

我想改变安卓闹钟（STREAM_RING）的音量。

我试试这个：

```
audioManager.adjustStreamVolume(
   AudioManager.STREAM_RING,
   audioManager.getStreamMaxVolume(AudioManager.STREAM_RING),
   AudioManager.FLAG_PLAY_SOUND
); 
```

但它不起作用，我有错误（方向错误 7）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:57:37.280

您需要使用 setStreamVolume 而不是 adjustStreamVolume。AdjustStreamVolume 是调高或调低 1 级。

```
audioManager.setStreamVolume(
   AudioManager.STREAM_RING,
   audioManager.getStreamMaxVolume(AudioManager.STREAM_RING),
   AudioManager.FLAG_PLAY_SOUND
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:00:55.033

查看[AudioManager.adjustStreamVolume 的文档](http://developer.android.com/reference/android/media/AudioManager.html#adjustStreamVolume%28int,%20int,%20int%29)：

> **public void adjustStreamVolume (int streamType, int direction, int flags)**
> 
> ...
> 
> *方向* 调整音量的方向。ADJUST_LOWER、ADJUST_RAISE 或 ADJUST_SAME 之一。

您的第二个参数不是这三个值。也许您想改用[setStreamValue](http://developer.android.com/reference/android/media/AudioManager.html#setStreamVolume%28int,%20int,%20int%29)？

# pypy - 使用 JIT 编写解释器的 RPython 之外的选项？

> ID：12126300
> 
> 赞同：8
> 
> 时间：2012-08-25T22:56:23.943
> 
> 标签：pypy, brainfuck, rpython

我对 PyPy 项目真的很感兴趣，但是对于下面列出的第一个（但鲜为人知的）目的：

*   一组用于为解释语言实现解释器的工具
*   使用此工具链的 Python 实现

在以下博客文章中，[http](http://morepypy.blogspot.com/2011/04/tutorial-writing-interpreter-with-pypy.html) ://morepypy.blogspot.com/2011/04/tutorial-writing-interpreter-with-pypy.html和[http://morepypy.blogspot.com/2011/04/tutorial-part -2-adding-jit.html](http://morepypy.blogspot.com/2011/04/tutorial-part-2-adding-jit.html)有一个详细的教程，介绍如何使用 RPython 实现一个 Brainfork 解释器，并添加一个 JIT。

但是，我在其他地方读到 RPython 使用起来可能很麻烦——为动态类型创建的语法突然限制为推断的静态类型会导致难以理解的编译错误。

所以我的问题是，有没有其他项目可以让你像上面的教程一样编写一个brainfudge解释器/JIT？或者 PyPy 是简洁的唯一选择吗？

（旁白）：如果存在的话，一般来说，RPython 的意义何在？是否只是为了表明可以使 Python 的子集成为类型安全的，并且 Python 在该子集中实现？在现有的解释器创建工具中做“PyPy”会更有意义吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T23:45:08.330

> However I've read elsewhere that RPython can be troublesome to work with--syntax created for dynamic typing suddenly restricted to inferred static typing leads to hard-to-understand compile errors.

It's less about syntax (the only thing Python syntax has to do with typing is that it has no place for type annotations, and that can - and was, in 3.0 - changed), and more about:

1.  Good error messages are *seriously* hard, and the code for them almost inevitable changes as the rest of the compiler changes. Therefore, it's a lot of effort, and one of the first corners to cut when you're working on highly complicated code compiling code written by a handful of experts (quite often the same people who wrote the translator) instead of the general public. The fact that the translator operates quite differently from usual compilers does not help either.
2.  The fact that *everything* is inferred means the only insight into types (for you as reader) comes from understanding and mentally applying the process by which the translator infers types. And that's quite different from usual compiler techniques and not exactly trivial.

> So my question is, are there any other projects that would allow you to write a brainfudge interpreter/JIT like in the tutorial above? Or is PyPy the only option for doing so as succinctly?

I am not aware of any other project which attempts creates a JIT compiler from an interpreter. I'm pretty confident the idea was new when the PyPy guys did it, so the odds that something else like this (if it exists) is more mature than RPython are slim. There are numerous projects which aid individual aspects. There are also a few which tackle many or "all" of these aspects together, such as Parrot. But AFAIK none of them have success stories anywhere as compelling as PyPy.

Parrot is a VM for dynamic languages and features several backends (no JIT since v1.7 as I just learned, but the architecture permits re-introducing one transparently), and apparently grew a rich set of tools for language implementers. The CLR and JVM offer similar services for static object-oriented languages, though I do not know of tools quite as sophisticated as Parrot's.

But instead of you writing an interpreter, it defines am IR (several ones in fact) and your job is compiling the language to that IR (and defining built-in functionality in terms the VM can understand). In this regard, it's different from the RPython approach of writing an interpreter. Also, as with other VMs, you are screwed should some aspect of your language map badly to the IR. Need something radically different from the VM's services? Have fun emulating it (and suffering from awful performance). Need a language-specific optimization (that is not valid for arbitrary IR, and cannot be done ahead of time)? Say goodbye to those performance improvements. I'm not aware of a complete language implementation on Parrot except for toy languages. And since they are not constantly bragging about performance, I fear that they are currently weak in this regard.

LLVM (mentioned by others), as well as many other code generators/backends, is just one ingredient. You'd have to write a fully-blown static compiler lowering your language to the level of abstraction of machine code, rather than an interpreter. That may be feasible, but is certainly quite different.

> If one exists, what's the point of RPython in general?

"Writing JIT compilers is hard, let's ~~go shopping~~write interpreters." Well, it probably started out as "we want to do Python in Python, but it'd be too slow and we don't want to make a programming language from scratch". But these days, RPython is a very interesting programming language in its own right, by virtue of being the world's first programming language with JIT compilers as first-class (not really in the sense of first-class functions, but close enough) language construct.

> Would it have made more sense just to do "PyPy" in an existing interpreter-creation tool?

Just for the sake of being meta, doing research, and showing it works, I favor the current approach. Up until the point where the JIT generator worked, you could have had the same in any language with static compilation, C-ish performance potential and macros (or another way to add what they call "translation aspects") -- although those are rare. But writing a well-performing (JIT or not) compiler for the *entire* Python language has repeatedly proven too hard for humans to do. I'd say it would not have made more sense to write an interpreter, and then struggle to get it right *again* in a separate JIT compiler codebase, and still optimize anything.

# jquery - jQuery - 选择第四个之后的所有表格行

> ID：12126303
> 
> 赞同：3
> 
> 时间：2012-08-25T22:56:52.933
> 
> 标签：jquery

是否可以选择第 4 行之后的表的所有行？我想隐藏其余的。

```
<table class="mytable">
<tr><td></td></tr>
<tr><td></td></tr>
<tr><td></td></tr>
<tr><td></td></tr>

<tr><td></td></tr>
<tr><td></td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T22:58:01.867

您可以使用[`:gt()`](http://api.jquery.com/gt-selector/)选择器：

```
$(".mytable tr:gt(3)").hide();​ 
```

另一种选择是使用[`slice()`](http://api.jquery.com/slice/)方法：

```
$(".mytable tr").slice(4).hide();​ 
```

**演示：http:** [//jsfiddle.net/F937n/](http://jsfiddle.net/F937n/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:12:36.367

如果您*总是*希望隐藏第 4 行之后的所有行，那么[`nth-child`](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)假设您的[浏览器支持它](http://caniuse.com/#search=nth-child)，标准 CSS 不会更干净：

```
.mytable tr:nth-child(n+5) {
    display:none;
}​​​​​ 
```

当然，等效的 jQuery 也可以在较旧的浏览器上运行：

```
$('.mytable tr:nth-child(n+5)​​​​​​​​​​​​​​​​​​​​​​​​​​​').hide();​​​​​ 
```

# c# - 三次贝塞尔曲线问题

> ID：12126308
> 
> 赞同：2
> 
> 时间：2012-08-25T22:57:17.307
> 
> 标签：c#, .net, bezier

我正在尝试通过使用[此维基百科文章中使用的公式来优化贝塞尔曲线实现。](http://en.wikipedia.org/wiki/Bezier_curve#Cubic_B.C3.A9zier_curves)我现在的实施速度非常慢，但至少它应该是准确的。使用以下内容：

```
p0 = (0, 256) //Violet dot
p1 = (70, 223) //Green dot
p2 = (24, 472) //Blue dot
p3 = (255, 256) //Yellow dot
t = 0.5 
```

用下面我当前的代码绘制，T = 0.5 处的点是 (67.125, 324.625)

![在此处输入图像描述](../Images/d3b62a233e6412303086e152dc17d5cb.png)

尝试 X 轴的公式，我做了这样的计算：

```
var x = Math.Pow(1 - t, 3) * p0.X + 3 * Math.Pow(1 - t, 2) * t * p1.X + 3 
        * (1 - t) * Math.Pow(t, 2) * p2.X + Math.Pow(t, 3) + p3.X; 
```

但这给了我一个 290.375 的 X 坐标，这显然是不正确的。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:04:38.630

呸！现在看看我自己的问题，我明白了。最后一位 Math.Pow(t, 3) + p3.X; 应该是 Math.Pow(t, 3) * p3.X;。现在它起作用了。

# webgl - Three.js 中的 Collada 相机移动 - 有可能吗？

> ID：12126309
> 
> 赞同：1
> 
> 时间：2012-08-25T22:57:23.647
> 
> 标签：webgl, three.js

是否可以在 three.js 场景中使用导出的 collada 相机运动？换句话说：three.js 可以处理 collada 相机移动吗？谢谢！

# java - ElementListSelectionDialog 没有元素

> ID：12126311
> 
> 赞同：4
> 
> 时间：2012-08-25T22:57:41.383
> 
> 标签：java, eclipse, dialog, swt, jface

我正在尝试使用[ElementListSelectionDialog](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/dialogs/ElementListSelectionDialog.html)。我遵循了示例代码，但无论出于何种原因，对话框显示但没有选项

我的代码：

```
ElementListSelectionDialog dialog = 
      new ElementListSelectionDialog(shlSpriteCreator, new LabelProvider());
dialog.setMultipleSelection(false);
dialog.setIgnoreCase(true);
dialog.setAllowDuplicates(true);
dialog.setMessage("Select an AI");
dialog.setTitle("What AI to use?");
dialog.setElements(new String[]{"HELLO","GOODBYE"});
if (dialog.open() == Window.OK) {
    aiControllerLocation = (String) dialog.getFirstResult();
} 
```

结果对话框：

![没有选项可供选择的对话框](../Images/63921b8d3da8f6e70add9308061ef9e0.png)

我最初使用了一个类数组，但由于它不起作用，所以我用一个简单的字符串列表代替，尽管据我了解，通过使用[LabelProvider](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/LabelProvider.html)类，我应该能够使用任何对象，并且它将通过它的 toString() 表示形式显示.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:11:21.387

这种类型的对话框在 Workbench UI 下正常工作。要正确运行此对话框，您应该使用示例代码

```
ElementListSelectionDialog dialog = 
    new ElementListSelectionDialog(PlatformUI.getWorkbench().getDisplay().getActiveShell(), new LabelProvider()); 
```

# python - 用 Python 减去日期

> ID：12126318
> 
> 赞同：40
> 
> 时间：2012-08-25T22:59:09.147
> 
> 标签：python, date, time

我正在开发一个简单的程序来告诉一个人他们活了多久。

我知道如何获得当前日期，并获得他们的生日。唯一的问题是我无法减去两个日期，我知道减去两个日期的方法，但不幸的是它不包括小时、分钟或秒。

我正在寻找一种可以减去两个日期并将差值返回到第二个日期的方法，而不仅仅是一天。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-25T23:04:17.527

```
from datetime import datetime

birthday = datetime(1988, 2, 19, 12, 0, 0)
diff = datetime.now() - birthday
print diff
# 8954 days, 7:03:45.765329 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-25T23:22:33.903

使用 UTC 时间，否则在 DST 转换期间，以秒为单位的年龄可能会倒退：

```
from datetime import datetime

born = datetime(1981, 12, 2) # provide UTC time
age = datetime.utcnow() - born
print(age.total_seconds()) 
```

如果您的程序在与一个人出生的地方（时区）不同的计算机上运行，​​或者如果自生日以来该地方的时间规则发生了变化，您也不能使用本地时间。它可能会引入几个小时的错误。

如果你想考虑闰秒，那么这项任务几乎是不可能的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-25T23:05:56.853

减去两个`datetime`对象时，您将得到一个新`datetime.timedelta`对象。

```
from datetime import datetime
x = datetime.now()
y = datetime.now()
delta = y - x 
```

它将为您提供微编码分辨率的时差。

有关更多信息，请查看[官方文档](http://docs.python.org/library/datetime.html)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-25T23:03:31.057

`datetime.datetime`从您的日期创建一个：

```
datetime.datetime.combine(birthdate, datetime.time()) 
```

现在您可以从中减去它`datetime.datetime.now()`。

```
>>> from datetime import date, datetime, time
>>> bday = date(1973, 4, 1)
>>> datetime.now() - datetime.combine(bday, time())
datetime.timedelta(14392, 4021, 789383)
>>> print datetime.now() - datetime.combine(bday, time())
14392 days, 1:08:13.593813 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-08T01:25:52.487

```
import datetime
born = datetime.date(2002, 10, 31)
today = datetime.date.today()
age = today - born

print(age.total_seconds()) 
```

输出：463363200.0

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-06-19T20:30:30.360

由于 DateTime.DateTime 是一个像这样的不可变类型方法总是产生一个新对象，两个 DateTime 对象的差异产生一个 DateTime.timedelta 类型：

```
from datetime import date,datetime,time,timedelta
dt=datetime.now()
print(dt)
dt2=datetime(1997,7,7,22,30)
print(dt2)
delta=dt-dt2
print(delta)

print(int(delta.days)//365)
print(abs(12-(dt2.month-dt.month)))
print(abs(dt.day)) 
```

输出 timedelta(8747,23:48:42.94) 或您测试代码的天数表明时间增量编码了 8747 天和 23 小时 48 分钟的偏移量......

**输出**

```
 2021-06-19 22:27:36.383761
    1997-07-07 22:30:00
    8747 days, 23:57:36.383761
    23  Year
    11  Month
    19  Day 
```

# facebook - 如何在没有令牌的情况下联系 Facebook 应用程序用户

> ID：12126319
> 
> 赞同：0
> 
> 时间：2012-08-25T22:59:17.290
> 
> 标签：facebook

我的 Facebook 应用程序有几千名用户，但他们很长时间没有访问过该应用程序，我也没有他们的访问令牌。我确实有他们的uid。

我如何联系我的应用程序用户？

我曾经使用 Notification.sendEmail，但现在已弃用，不会发送任何电子邮件。我拥有所有用户的电子邮件权限，但我之前没有存储用户的电子邮件地址，因为我使用了该功能。我应该存储地址。

我知道所有使用新的 Graph api 都需要访问令牌。所以我的选择是使用旧的 Rest api。但是有没有一种方法可以在这种情况下使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:43:17.723

如果他们随后没有删除它，您应该仍然能够检索授予您的应用`email` [权限](https://developers.facebook.com/docs/authentication/permissions/)的用户的电子邮件地址 - 您可以使用应用访问令牌执行此操作（有关更多信息，请参阅[身份验证文档）](https://developers.facebook.com/docs/authentication/)

拨打电话`/<USER ID>?fields=email`获取地址

# html - Firefox 和 IE 将填充/边距放在 元素上。clearfix 的怪异之处

> ID：12126320
> 
> 赞同：0
> 
> 时间：2012-08-25T22:59:40.150
> 
> 标签：html, css, browser, css-selectors

很长一段时间以来，我在 Firefox 和 IE 中遇到了一些垂直间距问题。

我`*`在我的 css 中使用选择器将边距应用于某个容器元素中的所有内容。在 Chrome 中运行良好，但在 FF 和 IE 中，我似乎从无处获得了神秘的额外填充，您可以在此处观察到：http: [//jsfiddle.net/XrVXF/3/](http://jsfiddle.net/XrVXF/3/)。

事实证明我有两个不同的问题。一是非 Chrome 浏览器会使用选择器选择元素`*`并应用边距，*边距会显示在浏览器中！*即使该元素对 Firebug 之类的东西是不可见的。**这应该被认为是一个错误吗？**您可能会问，链接元素在 body 标记内做什么业务。好吧，我可能可以避免它，但这是在我的网站上做一些事情的最简单方法。[这个页面](http://www.tutorialchip.com/tutorials/html5-block-level-elements-complete-list/)说`*`选择器应该只适用于我正在使用的 HTML5 中的块级元素，所以从这个意义上说，在我看来，至少 Firefox 正在出现问题，如果它们应该有适当的 HTML5 支持，IE 也是如此. 既然我知道了这一点，我可以解决它，但是**也许还有其他我应该担心的因素？**（似乎不适用于脚本或样式标签。）**将边距应用于大量 html 元素而不是 html 元素会更好`*`吗？**

另一个奇怪的事情，你可以在我链接的小提琴中观察到，底部的 clearfix（在示例中不是必需的，但在我的网站上）也拾取边距并将它们应用于 FF 和 IE 但不是在铬。**哪个是“正确”的行为？**奇怪的是，我注意到关闭溢出：隐藏，可以防止 clearfix 占用空间，并且似乎对我的网站没有任何不利影响。**溢出设置为隐藏的目的是什么？**

**更正：**糟糕，当我打算使用 .clearfix （在浮动内容之后附加内容）时，我使用了 .clear，这似乎工作正常并且没有边距问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:05:52.067

> **这应该被认为是一个错误吗？**

考虑到您将样式应用于最初不应该出现的位置的元素（`link`在`body`？？？），这是任何人的猜测。它们没有出现在 Firebug 中的可能原因是 Firebug 不希望它们出现。

说真的，我对你小提琴中发生的事情的最佳猜测是：

*   Chrome 有一个 UA 样式的`link`元素到`display: none`. 我想它对属于`head`element 和 not的任何其他元素都是一样的`body`。

*   其他浏览器没有元素的默认`display`样式`link`，而是依赖于`head`必须`display: none`隐藏属于`head`元素的所有内容。因此，当您将 a 放置在`link`内时`body`，它会以边距显示，因为它以 的初始值显示`display: inline`。

    FWIW，如果你给它一个样式`display: block`，[它的边距会塌陷](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)`display: none`，它会产生与Chrome一样的明显效果。

同样，这是基于您小提琴中的无效标记，所以我不能说哪个浏览器（如果*有*）是对还是错，因为所有规范都说不应该呈现页头。`*`此外，关于这是否是不使用选择器的原因，或不编写无效 HTML 的原因，或两者兼而有之的提示参数/辩论...

# php - Mysqli 获取数组第 n 行

> ID：12126333
> 
> 赞同：5
> 
> 时间：2012-08-25T23:03:11.680
> 
> 标签：php, mysql, loops

我有以下获取单行的代码：

```
$query = "SELECT *
          FROM translations
          WHERE iddoc = '$id'
          AND submitted = 1;";
$result = mysqli_query($query);
$row = mysqli_fetch_array($result); 
```

我知道这在 while 循环中很有用，您可以在其中循环遍历结果。

但我需要能够抓取满足此条件的特定行。这个伪代码后面的东西：

```
$query = "SELECT *
          FROM translations
          WHERE iddoc = '$id'
          AND submitted = 1;";
$result = mysqli_query($query);
$arrayofrows = mysqli_fetch_arrayofrows($result);
$arrayofrows[0] //(to get the first row)
$arrayofrows[1] //(2nd row) 
```

等等...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T23:15:43.310

你可以试试这样的

```
$arrayofrows = array();
while($row = mysqli_fetch_array($result))
{
   $arrayofrows = $row;
} 
```

你现在可以拥有

```
$arrayofrows[0] //(to get the first row)
$arrayofrows[1] //(2nd row) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T23:24:06.647

我认为您正在寻找的功能是**mysqli_fetch_all**，如下所示。这避免了创建额外的循环结构或函数来执行已经提供的操作的需要。

```
$query = "SELECT *
          FROM translations
          WHERE iddoc = '$id'
          AND submitted = 1;";
$result = mysqli_query($query);
$arrayofrows = mysqli_fetch_all($result);
$arrayofrows[0] //(to get the first row)
$arrayofrows[1] //(2nd row) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T23:15:07.583

这取决于您是否需要返回整个结果集，但我认为 LIMIT 可以像这样使用：

```
$query = "SELECT *
          FROM translations
          WHERE iddoc = '$id'
          AND submitted = 1 LIMIT 200,200;"; 
```

否则，正如其他人所说，您将需要转换为数组（这就是这样`fetch_all`做的），然后从该数组中获取元素。

# html - 如何阻止第二个 div 低于第一个 div

> ID：12126334
> 
> 赞同：-1
> 
> 时间：2012-08-25T23:03:18.610
> 
> 标签：html, css

在 1024x768 屏幕上，我有 2 个 div 并排在屏幕中央。如果我调整浏览器窗口的大小，第二个 div 会低于第一个 div。如何阻止这种情况发生：

[http://oshirowanen.x10.mx/](http://oshirowanen.x10.mx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:46:56.380

One way is to add the `white-space: nowrap;` style to the container `<body>` and add the `white-space: normal;` style to the two `<div>`s.

# css - 与具有类跨度的输入字段一起使用时，引导内联帮助跨度不是内联的

> ID：12126339
> 
> 赞同：0
> 
> 时间：2012-08-25T23:03:51.783
> 
> 标签：css, twitter-bootstrap

我在具有“span11”类的输入字段旁边使用引导程序中的内联帮助类。跨度没有与输入字段内联显示，而是由于类“span11”而显示在下一行

这是代码：

```
<div class="control-group error" id="password-control">
<label class="control-label" for="password-confirm">Confirm Password</label>
<input type="password" size="30" name="register[confirm]" id="password-confirm" class="span11">
<span class="help-inline">password did not match</span> 
```

当我摆脱 span11 时，它会显示在输入字段旁边。我需要 span11 用于响应式文本字段，所以我无法删除它。知道如何解决这个问题吗？谢谢！：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:18:03.680

在 Twitter Bootstrap 中，`<input>`'s 旨在使用以下类来调整大小：

```
input-small
input-medium
input-large
input-xlarge
input-xxlarge 
```

这些`spanX`类更适用于`<div>`'s 和其他容器元素（尽管我承认使用它们对其他事物产生了良好的影响）。

如果您使用的是 Bootstrap 提供的响应式 CSS，一旦您缩小到手机大小的视口宽度，所有`spanX`类都将变为`width:100%;`，这将保证您的`help-inline`内容将被推送到下一行。

至少它们不会填满整个宽度，只要视口不是小得离谱，你就可以保持在`input-small`那里。`input-medium``help-inline`

# c++ - opengl 错误：GLTest.exe 中 0x0251D09F (ig4dev32.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000

> ID：12126341
> 
> 赞同：2
> 
> 时间：2012-08-25T23:03:53.577
> 
> 标签：c++, opengl

我想获得opengl版本，代码是：

```
#include "stdafx.h"
#include <GL/glut.h>

void main(int argc, char** argv)
{
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
    glutInitWindowPosition(100,100);
    glutInitWindowSize(400,300);
    glutCreateWindow("OpenGL Version");
    const char* version = (const char*)glGetString(GL_VERSION);
    printf("OpenGL version：%s\n", version);
    glutMainLoop();
} 
```

但我得到了错误`glutCreateWindow("OpenGL Version");`，谁能帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T03:27:24.807

您似乎正在使用 Microsoft 提供的默认图形驱动程序。要使用 OpenGL，您必须安装显卡制造商提供的驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:33:28.500

我通过更新我的图形驱动程序解决了这个问题，网址是：http: [//downloadmirror.intel.com/18223/a08/win7_1512754.exe](http://downloadmirror.intel.com/18223/a08/win7_1512754.exe)

# c++ - 与类成员的函数调用？

> ID：12126344
> 
> 赞同：0
> 
> 时间：2012-08-25T23:04:17.740
> 
> 标签：c++, function, pointers, callback, non-static

在我展示这篇文章底部的代码之前，我想谈谈我不想要的问题和修复。好的，基本上我已经从头开始创建了一个 GUI，我想要的一个要求是允许组件有自己的点击执行，所以如果我点击一个按钮或选项卡等。它会调用 Component->Execute(); 好吧，通常你会做类似 id 的 switch 语句，如果组件 ID 等于 n 个数字，那么它将执行此操作。好吧，这对我来说似乎有点愚蠢，我认为必须有更好的方法。我最终尝试在 JAVA 中加入一个功能，你会喜欢 Component.AddActionListener(new ActionListener( public void execute(ActionEvent ae) { })); 或类似的东西，我认为这个功能必须在 C++ 中成为可能。我最终遇到了将 void 函数存储到一个变量中，该变量可以随时执行并随时修改。但是我没有注意到一个问题，那就是这只适用于静态函数。所以下面你会看到我的问题。我已经通过使用指向 SomeClass 的指针解决了这个问题，但这意味着对每个类类型都有一个单独的函数调用，如果不执行以下策略，就没有办法将函数回调存储到非静态类成员吗？而是做一个像注释掉的代码这样的策略？已经通过使用指向 SomeClass 的指针解决了这个问题，但这意味着对每个类类型都有一个单独的函数调用，如果不执行以下策略，是否无法将函数回调存储到非静态类成员？而是做一个像注释掉的代码这样的策略？已经通过使用指向 SomeClass 的指针解决了这个问题，但这意味着对每个类类型都有一个单独的函数调用，如果不执行以下策略，是否无法将函数回调存储到非静态类成员？而是做一个像注释掉的代码这样的策略？

//main.cpp

```
#include <iostream> //system requires this.
#include "SomeClass.h"

void DoSomething1(void)
{
    std::cout << "We Called Static DoSomething1\n";
}

void DoSomething2(void)
{
    std::cout << "We Called Static DoSomething2\n";
}

int main()
{
    void (*function_call2)(SomeClass*);
    void (*function_call)() = DoSomething1; //This works No Problems!
    function_call(); //Will Call the DoSomething1(void);
    function_call = DoSomething2; //This works No Problems!
    function_call(); //Will Call the DoSomething2(void);

    SomeClass *some = new SomeClass(); //Create a SomeClass pointer;
    function_call = SomeClass::DoSomething3; //Static SomeClass::DoSomething3();
    function_call(); //Will Call the SomeClass::DoSomething3(void);
    //function_call = some->DoSomething4; //Non-Static SomeClass::DoSomething4 gives an error.
    //function_call(); //Not used because of error above.
    function_call2 = SomeClass::DoSomething5; //Store the SomeClass::DoSomething(SomeClass* some);
    function_call2(some); //Call out SomeClass::DoSomething5 which calls on SomeClass::DoSomething4's non static member.
    system("pause");
    return 0;
} 
```

//SomeClass.hpp

```
#pragma once

#include <iostream>

class SomeClass 
{
    public:
        SomeClass();
        ~SomeClass();

    public:
        static void DoSomething3(void);
        void DoSomething4(void);
        static void DoSomething5(SomeClass* some);
}; 
```

//SomeClass.cpp

```
#include "SomeClass.h"

SomeClass::SomeClass(void)
{

}

SomeClass::~SomeClass(void)
{

}

void SomeClass::DoSomething3(void)
{
    std::cout << "We Called Static DoSomething3\n";
}

void SomeClass::DoSomething4(void)
{
    std::cout << "We Called Non-Static DoSomething4\n";
}

void SomeClass::DoSomething5(SomeClass *some)
{
    some->DoSomething4();
} 
```

二级修复我不会做一个我想要的确切答案，但它现在满足我的需求，同时允许额外的功能，如果这不存在，这些功能将变得过于复杂。

//组件.hpp

```
#pragma once

#include <iostream>
#include <windows.h>
#include <d3dx9.h>
#include <d3d9.h>

#include "Constants.hpp"
#include "ScreenState.hpp"
#include "ComponentType.hpp"

using namespace std;

class Component 
{

    static void EMPTY(void) { }
    static void EMPTY(int i) { }

    public:
    Component(void)
    {
        callback = EMPTY;
        callback2 = EMPTY;
        callback_id = -1;
    }

    Component* SetFunction(void (*callback)())
    {
        this->callback = callback;
        return this;
    }

    Component* SetFunction(void (*callback2)(int), int id)
    {
        this->callback_id = id;
        this->callback2 = callback2;
        return this;
    }

    void execute(void)
    {
        callback();
        callback2(callback_id);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:05:51.050

指向成员函数的指针的语法如下：

```
struct Foo
{
    void bar(int, int);
    void zip(int, int);
};

Foo x;

void (Foo::*p)(int, int) = &Foo::bar;   // pointer

(x.*p)(1, 2);                           // invocation

p = &Foo::zip;

(x.*p)(3, 4);                           // invocation 
```

注意函数调用中的额外括号，这是获得正确运算符优先级所必需的。成员取消引用运算符是`.*`（也`->*`来自实例指针）。

# java - 只运行一次 cron 作业

> ID：12126345
> 
> 赞同：0
> 
> 时间：2012-08-25T23:04:21.970
> 
> 标签：java, google-app-engine

我们如何安排 cron 作业在 google app engine for java 上只运行一次？

我试图设置一个非常大的值，比如每 1000 年，但似乎不起作用。

还有其他选择吗？使用的语法是：

```
 <cron>
    <url>/AdHocScriptJob</url>
    <description>Run adhoc script</description>
    <schedule>every 200 minutes</schedule>
    <timezone>Asia/Calcutta</timezone>
  </cron> 
```

我试图查看[https://developers.google.com/appengine/docs/java/config/cron](https://developers.google.com/appengine/docs/java/config/cron)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:09:05.413

这就是任务队列的用途：[https ://developers.google.com/appengine/docs/java/taskqueue/overview](https://developers.google.com/appengine/docs/java/taskqueue/overview)

或者，您可以在任务执行后删除 cron 配置或使您的代码具有幂等性（例如，通过将其与拉取队列混合）。

# iphone - 加载每个不同的用户自己的数据

> ID：12126348
> 
> 赞同：1
> 
> 时间：2012-08-25T23:04:48.910
> 
> 标签：iphone, uitableview, nsuserdefaults

我正在制作一个应用程序，用户可以添加许多帐户并在其中查看它，`UITableView` 并且我通过它持有名称`NSUserDefaults`，一旦在其中单击名称，`UITableView`它将打开一个不同的页面，其中包含许多要填写的数据字段，即 DONE。

例如，当用户单击 John 或其他名称时。用户可以看到自己的数据。我的问题是我怎样才能为每个用户显示他自己的数据？我也可以通过这个来做`NSUserDefaults`吗？

它对 iPhone 中的联系人选项卡微笑。我希望我能解释我的问题。

我的源代码希望对你有帮助[下载链接](http://dropbox.com/s/41yxlr50jnovnl0/SavaDataIm-2.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:18:00.673

如果不知道您在表格中显示的架构和数据，这个答案就不是常见的答案。通常数据库极大地解决了这个问题-您将所有数据存储在数据库中并通过谓词仅获取所需的数据-

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name== %@", userName];
NSArray *orders = [Order findAllUsingPredicate:predicate]; // this is prototype method 
```

但是数据库正在用于大量数据，如果您不想使用 db 或要显示静态数据，请查看[plists](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html#//apple_ref/doc/uid/10000048i)。您可以使用节点创建 plist

```
-John
  -Order1,Order2
-Mike
  -Order3,Order4,Order5
... 
```

然后读取这个文件，并像这样获取 John 的对象：

```
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:pathToPlist];
johnsObjects = [dict objectForKey:@"John"]; 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:24:33.913

使用基于文档的应用程序 ( `UIDocument`)。给每个用户他自己的文档。切换用户时在文档之间切换。请参阅[iOS 的基于文档的应用程序编程指南](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/Introduction/Introduction.html)。

# css - CSS：高度：100％与底部：0

> ID：12126349
> 
> 赞同：9
> 
> 时间：2012-08-25T23:04:51.410
> 
> 标签：css

两者的本质区别是什么：

```
position: absolute;
top: 0;
height: 100%; 
```

和

```
position: absolute;
top: 0;
bottom: 0; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-25T23:34:15.077

对于每个属性，子元素的高度是不同的：

`bottom: 0`=> child_height = parent_height - child_margin - child_border

`height: 100%`=> child_height = parent_height

换句话说，将子级`height: 100%`的*内部高度*设置为其父级的相同高度，而`bottom: 0`将子级的*外部高度*设置为其父级的相同高度。

示例：http: [//jsfiddle.net/2N4QJ/1/](http://jsfiddle.net/2N4QJ/1/)

有关位置/尺寸的更多信息：http: [//msdn.microsoft.com/en-us/library/ms530302 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms530302(VS.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:25:16.783

很简单，设置为 100% 会将其设置为文档高度，而`height`​​如果设置为 0，它将设置为将元素与屏幕的顶部和底部对齐，它会在视觉上做同样的事情，尽管一些较旧的浏览器可能“更喜欢”设置为 100%。`top``bottom``height`

# android - Android：禁用按钮的透明度

> ID：12126352
> 
> 赞同：1
> 
> 时间：2012-08-25T23:05:34.250
> 
> 标签：android, eclipse

我正在 Android 上制作一个应用程序，当我使用 Eclipse 的插件添加一个按钮时，该按钮是透明的。

例如： http:
[//kakko76.free.fr/buttontransparent.png](http://kakko76.free.fr/buttontransparent.png)

但我不想要透明按钮！

我尝试在按钮上使用背景属性，但在点击或其他方面失去了其他效果。
我怎样才能禁用按钮的透明度？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-04T08:42:12.337

找到了完美最简单的解决方案：

只需将按钮的背景设置为

```
android:background="@android:drawable/btn_default" 
```

但请确保直接在 XML 中进行，而不是在“图形布局”界面中进行，因为它可能不起作用

希望它能拯救某人的一天；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:17:41.437

默认情况下，按钮不应该是透明的。但是，您可以只为您的 Button 创建一个选择器，这样您就可以将其设置为背景，但无论何时单击它仍然具有单击效果。

```
<?xml version="1.0" encoding="utf-8"?>
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" >
        <shape>
            <gradient
                android:startColor="insert color"
                android:endColor="insert color"
                />
            <stroke
                android:width="3dp"
                android:color="insert color" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>

    <item android:state_pressed="false" >        
        <shape>
            <gradient
                android:endColor="insert color"
                android:startColor="insert color"
               />
            <stroke
                android:width="3dp"
                android:color="insert color" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
</selector> 
```

这些是 API 级别 <10 中按钮的默认图像：

**选择器：**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/btn_erase_pressed" />
    <item android:state_focused="true" android:state_pressed="false"
        android:drawable="@drawable/btn_erase_selected" />
    <item android:drawable="@drawable/btn_erase_default" />
</selector> 
```

以及你会在你的

```
\android-sdk\platforms\android-10\data\res\  folder 
```

例如：

![按下](../Images/144aba03846f233710e0b9952ef8ea20.png) ![默认](../Images/c99935476f760abc9ee1eba07119e05d.png) ![选择](../Images/d5aefb4abc93e668e7962dd20ccb36b3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T06:44:37.253

当我找到冰淇淋资源时，按钮背景图像是透明的，因此您需要使用选择器将背景更改为您自己的图像。

# if-statement - 双重否定 IF 语句

> ID：12126358
> 
> 赞同：1
> 
> 时间：2012-08-25T23:06:25.350
> 
> 标签：if-statement, double, conditional

在审查代码时，我遇到了一些在评估中`if`使用`!`后跟 an的语句`!=`，例如

```
if (!(fs.ReadByte() != (byte)'D' ||
      fs.ReadByte() != (byte)'I' ||
      fs.ReadByte() != (byte)'C' ||
      fs.ReadByte() != (byte)'M'))
{
    Console.WriteLine("Not a DCM");
    return;
} 
```

是否有任何理由使用双重否定而不是评估积极，例如

```
if ((fs.ReadByte() == (byte)'D' ||
     fs.ReadByte() == (byte)'I' ||
     fs.ReadByte() == (byte)'C' ||
     fs.ReadByte() == (byte)'M'))
{
    Console.WriteLine("Not a DCM");
    return;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T23:08:50.597

这两个*是*不同的。第一个说“这些都不相等”，第二个说“这些都相等”。

如果您将`!`运算符应用于它们，则必须将其更改`||`为`&&`：

```
if ((fs.ReadByte() == (byte)'D' &&
     fs.ReadByte() == (byte)'I' &&
     fs.ReadByte() == (byte)'C' &&
     fs.ReadByte() == (byte)'M'))
{
    Console.WriteLine("Not a DCM");
    return;
} 
```

# c# - 注册委托和注册事件命名方法的区别

> ID：12126359
> 
> 赞同：0
> 
> 时间：2012-08-25T23:06:25.693
> 
> 标签：c#, events, delegates

我想确认一些事情——当我将一个方法注册为一个事件的订阅者时，就像这样：

```
_serviceContext.ReadingEntity += new EventHandler<ReadingWritingEntityEventArgs>(_serviceContext_ReadingEntity); 
```

如果我不希望在触发事件时继续调用该方法，我需要从事件的订阅中取消注册该方法，如下所示：

```
_serviceContext.ReadingEntity -= new EventHandler<ReadingWritingEntityEventArgs>(_serviceContext_ReadingEntity); 
```

当我将委托注册为事件的订阅者时，如下所示：

```
public guy ThisMethod()
{
    _serviceContext.ReadingEntity += delegate(object sender, ReadingWritingEntityEventArgs e)
        {

        };
} 
```

无法通过该方法从订阅者列表中取消注册该委托。因此，我假设此注册的范围仅限于其注册的方法 - 即，如果 _serviceContext.ReadingEntity 事件在 ThisMethod 调用的方法中被触发，则此注册已经过期，并且委托中的代码不会跑。它是否正确？

谢谢！

ps 我意识到注册事件处理程序的第一个“长”方式也有范围限制，但我对此有点模糊。然而，我的主要问题是委托注册是否会在上述方法之外继续存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:10:59.207

一旦您以这种方式订阅了委托（`-=`如果您在某处缓存委托变量，则可以使用运算符取消订阅），您无法将其从订阅者列表中删除，并且每次事件上升时**都会调用它，直到发布者还活着。**此外，此订阅**将**阻止任何订阅者类（包含您订阅事件的方法的类）进行垃圾收集，直到发布者处于活动状态（除非您使用静态方法）。

为了清楚起见，IL 代码中没有“匿名”方法。您所有的委托和 lamdbas 都被转换为静态/实例方法和闭包类（取决于它们是否使用实例成员/函数参数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:15:39.377

如果您保留对委托的引用，则可以取消订阅委托。

```
EventHandler<ReadingWritingEntityEventArgs> aDelegate = delegate(object sender, ReadingWritingEntityEventArgs e)
    {

    };
_serviceContext.ReadingEntity += aDelegate;
_serviceContext.ReadingEntity -= aDelegate; 
```

如果您不这样做，则无法取消订阅。范围不限于注册方法。它将在事件的整个生命周期内注册。

# javascript - 如何缓慢移动 DOM 元素？

> ID：12126361
> 
> 赞同：0
> 
> 时间：2012-08-25T23:06:49.127
> 
> 标签：javascript, jquery, jquery-animate

如何缓慢移动 DOM 元素？这不起作用

```
 for ( var a = 0 ; a < 100 ; a++){

    $('*').each(function(){

      if ( ! /HTML/.test($(this).context.nodeName))
      {
        var top =  parseInt($(this).css('top')) + 1;

        $(this).css('top',top + "px");
      }

    });
  } 
```

循环结束时定位元素

我怎样才能慢慢做到这一点？

对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:11:21.857

试试 jquery 的[$.animate()](http://api.jquery.com/animate/)

它要求您设置要移动到的目标位置，而不是连续移动

或使用[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)：

```
intervalInMilliseconds=17;//60 frames per second
var interval = setInterval(function()
{
for ( var a = 0 ; a < 100 ; a++){

    $('*').each(function(){

      if ( ! /HTML/.test($(this).context.nodeName))
      {
        var top =  parseInt($(this).css('top')) + 1;

        $(this).css('top',top + "px");
      }

    });
  }
},intervalInMilliseconds); 
```

完成后停止执行此操作：

```
clearInterval(interval) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:28:29.130

或者在纯 JavaScript 中，您应该使用计时器

```
var $elem = $(this), // jquery object
    elem = $elem[0], // dom element
    currentPos = $elem.offset().top, // current position
    targetPos = currentPosition + 100, // target position
    timer = setInterval (function () { // timer to move element slowly
        currentPos++;
        $elem.css('top',currentPosition + "px");
        if (currentPos == targetPos)
            clearInterval(timer);
    }, 100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T23:33:59.243

如果您的目标是足够新的浏览器版本，则可以改用[CSS 动画](https://developer.mozilla.org/en-US/docs/CSS/CSS_animations)。

# ruby - 模块中的标记方法以供混合类参考

> ID：12126362
> 
> 赞同：0
> 
> 时间：2012-08-25T23:07:12.730
> 
> 标签：ruby, module, metaprogramming, class-method, instance-methods

我有一个模块`M`，我想将特定方法标记为“特殊”，这样混合在该模块中的类可以检查给定的方法名称是否特殊。这是我尝试过的：

```
module M
  def specials
    @specials ||= {}
  end

  def self.special name
    specials[name] = true
  end

  def is_special? name
    specials[name]
  end

  def meth1
    ...
  end
  special :meth1
end

class C
  include M

  def check name
    is_special? name
  end
end 
```

当然这不起作用，因为我不能从类方法中调用实例方法`self.special`。我怀疑如果我想保持能够调用`special :<name>`模块中所需方法的功能，我别无选择，只能使用类变量（例如`@@specials`）有人可以证明我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:46:29.437

You can make all these methods class methods and do the following:

```
module M
  def self.specials
    @specials ||= {}
  end

  def self.special name
    self.specials[name] = true
  end

  def self.is_special? name
    self.specials[name]
  end

  def meth1
    'foo'
  end

  def meth2
    'bar'
  end

  special :meth1
end

class C
  include M

  def check name
    M.is_special? name
  end
end

p C.new.check(:meth1)
#=> true
p C.new.check(:meth2)
#=> nil 
```

Not sure if that would work for you.

# silverlight - 使用 MVVM Light 从 ViewModel 查看通知

> ID：12126363
> 
> 赞同：0
> 
> 时间：2012-08-25T23:07:26.833
> 
> 标签：silverlight, mvvm, mvvm-light

在我的 silverlight 应用程序中，我需要从 ViewModel 向 View 发送通知。作为对它的响应，应该调用 UI 控件上的方法。我知道有两种方法可以做到这一点：

1）在 ViewModel 中引发一个事件，并在 View 的代码中处理它。
2) 从 ViewModel 发送消息（使用 MVVM Light 消息传递支持）并在 View 的代码中响应此消息。

我想知道是否有一种方法可以在不使用 View 后面代码中的代码的情况下完成此操作，例如通过 XAML 中的某种数据绑定？

请分享任何想法。

**有关视图在收到来自 ViewModel 的通知时应该做什么的附加信息 在视图**
的 XAML 中，我声明了一个自定义 Silverlight 网格控件的实例，它具有以下方法：
`public void FileExportFinished(bool fileExportSucceeded)`
我想从 XAML 调用此方法以响应通知从 ViewModel 接收，传递一个与通知一起接收的布尔值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T07:15:57.747

是的......你可以在依赖属性的帮助下做到这一点。

1.  为该视图创建一个依赖属性（使其成为布尔类型，因为我们只需要此属性来调用另一个视图方法）。
2.  在其属性更改回调中，规定调用您所需的视图方法。
3.  然后将 DependencyProperty 与 ViewModel 中的属性绑定。
4.  因此，当您需要更新视图时，只需设置上面提到的绑定属性，这将触发 Dependency 属性的属性更改回调，并在那里调用您所需的视图方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:44:17.477

为什么不简单地在您的 viewmodel 中使用 Property 并在您的 xaml 中使用 DataTrigger？

如果您想要某种对话框弹出窗口，您可以使用对话框服务。你真的应该把你想做的事情添加到你的问题中。当通知到达时，您认为应该发生什么？

顺便说一句，Messenger 用于 viewmodel-viewmodel 通信，所以这不是一个选项。

# android - Eclipse/Android：“选择项目”缺少选择？

> ID：12126364
> 
> 赞同：0
> 
> 时间：2012-08-25T23:07:27.860
> 
> 标签：android, eclipse, project

我在 Mac OS X 10.7.4（完全补丁）上使用 Eclipse Indigo（完全补丁）。ADT 已安装，并且所有内容都通过 Android SDK 管理器保持最新状态。Java 由 Apple 提供，为 1.6.0.33。

我正在尝试创建一个新的“Android Activity”。出现提示时，我无法选择项目。下拉菜单中没有选择。

Eclipse 安装在 /Applications 中，并且安装了 ADT。Android SDK 和 NDK 安装在 /opt/local/android-sdk 和 /opt/local/android-ndk 中。Eclipse 的首选项正确显示路径和已安装的 API (2.2 - 4.1)。

从我的登录中通过 Eclipse 图标（别名）启动时存在问题；当从命令行以 root 身份运行时：`sudo /Applications/.Eclipse/Eclipse.app/Contents/MacOS/eclipse`.

有没有人有任何想法可能会发生什么或如何解决它？

![缺少项目选择](../Images/eb8d70e697e423d6ce4338c0379909e7.png).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T23:16:17.303

您需要有一个项目来定义一个活动。

因此，要么将现有项目导入工作区，然后创建新 Activity，要么选择“Android 应用程序项目”向导创建新项目并将新 Activity 添加到其中。

# fonts - 新 Microsoft 徽标的字体是什么？还是微软办公室？

> ID：12126377
> 
> 赞同：4
> 
> 时间：2012-08-25T23:10:51.920
> 
> 标签：fonts

标题有点说。我是它的粉丝，好奇是否有人知道它是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T23:13:21.700

根据此链接[http://fontsinuse.com/uses/2007/the-new-microsoft-logo](http://fontsinuse.com/uses/2007/the-new-microsoft-logo)它是 Segoe

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T23:12:57.613

世高。字体“Segoe UI”略有不同，包含在 Windows/Office 中，但是我在任何地方都找不到原始的 Segoe 字体

# ruby-on-rails - 茉莉花没有加载我的自定义 js 文件

> ID：12126380
> 
> 赞同：1
> 
> 时间：2012-08-25T23:11:13.333
> 
> 标签：ruby-on-rails, jasmine

我无法让 jasmine 加载我的自定义 javascript 文件，即使它在浏览器中完美运行。我已将 javascript 减少到最低限度以避免任何错误的可能性，但我仍然对最简单的事情进行了失败的测试。

自定义 ARB.js 文件：

```
$(document).ready(function() {
  alert('typeof ARB: ' + typeof ARB);
    });
ARB = {};
ARB.VERSION = "V1.01.00 2012-08-24"; 
```

jasmine 配置文件片段（我在 Rails 3.0.9 上）：

```
src_files:
  - "public/javascripts/**/*.js"
  - "public/javascripts/ARB.js" 
```

本次测试：

```
 it('should define the custom javascript functions', function() {
    expect(typeof ARB).toEqual('object');
    }); 
```

失败：

```
Expected 'undefined' to equal 'object'. 
```

jQuery 被加载，我的 application.js 文件也是如此。运行 jasmine 时，我没有收到任何警报消息，但是当我运行我的应用程序时会收到。

我错过了什么？

更新：如果我删除 $(document).ready 函数，茉莉花通过了所有测试——那是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:57:53.673

[shioyama](https://stackoverflow.com/users/820254/shioyama)给了我需要解决这个问题的指针：我的自定义 ARB.js 文件在 jquery 文件之前被加载，因此它无法访问 $(document).ready 函数。我必须做的是明确说明我的 javascript 文件的加载顺序。这是我在 /spec/javascripts/support/jasmine.yml 中放入我的 jasmine 配置文件的内容：

```
src_files:
  - "public/javascripts/**/jquery.js"
  - "public/javascripts/**/jq*.js"
  - "public/javascripts/**/application.js"
  - "app/assets/javascripts/**/*.js"
  - "public/javascripts/ARB.js" 
```

我首先强制加载主 jquery.js 文件，然后是所有其他 jquery 文件，然后是 application.js，然后是位于 assets 目录中的任何其他 javascript 文件，最后是我的自定义 javascript 文件。

这对我有用，因为我仍在使用 Rails 3.0.9 并开始迁移到 3.1+ 和资产管道。

# sql-server-2005 - sql server 2005 约束和验证

> ID：12126384
> 
> 赞同：0
> 
> 时间：2012-08-25T23:12:10.187
> 
> 标签：sql-server-2005

我有一个表，其中存储了带有列的付款详细信息：（`paymentmethod`- 支票、现金或信用卡）、( `Checknumber`)、( `Cardholdersname`)、( `creditcardnumber`)。

问题是：我如何验证 when `paymentmethod`is`cash`或 check then应该留空，而 when `Cardholdersname`is then应该留空。`creditcardnumber``paymentmethod``creditcard``Checknumber`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:24:57.320

你真的有两个不同的表：

```
PaymentDetails(ID, PaymentMethod) and
CreditCardDetails (PaymentDetailsID, CardholderName, CreditCardNumber) 
```

两个表中的所有列都不可为空。

* * *

可以将所有三个案例保存在同一个表中。在这种情况下，请尝试以下操作：

```
CREATE TABLE [dbo].[PaymentDetails]
(
    ID INT IDENTITY(1,1) NOT NULL,
    PaymentMethod INT NOT NULL CHECK (PaymentMethod IN (1,2,3)), -- Cash, Check, Credit
    CheckNumber int NULL,
    CardHoldersName nvarchar(100) NULL,
    CreditCardNumber varchar(20) NULL
)

ALTER TABLE [dbo].[PaymentDetails]
    ADD CONSTRAINT [PaymentTypeConstraint] 
    CHECK  ((PaymentMethod = 1 AND CheckNumber IS NULL AND 
                                   CardholdersName IS NULL AND
                                   CreditCardNumber IS NULL) OR
            (PaymentMethod = 2 AND CheckNumber IS NOT NULL AND 
                                   CardholdersName IS NULL AND
                                   CreditCardNumber IS NULL) OR
            (PaymentMethod = 3 AND CheckNumber IS NULL AND 
                                   CardholdersName IS NOT NULL AND
                                   CreditCardNumber IS NOT NULL)); 
```

# php - 为什么 PHP 图像复制和调整大小脚本会导致浏览器返回“内容编码错误”？

> ID：12126385
> 
> 赞同：0
> 
> 时间：2012-08-25T23:12:20.173
> 
> 标签：php

我有一个 PHP 脚本，它获取图像，检查类型和文件大小，然后创建 2 个调整大小的主图像副本，所有 3 个图像都保存到服务器。我的印象是一切都很好。我正在测试脚本，在一张 jpg 图像上，我得到了 firefox 抛出的错误“内容编码错误”。做一些阅读表明这是一个 Firefox 问题，但在 IE 和 Chrome 中进行测试导致了类似的错误。

奇怪的是，一些 .jpg 文件可以工作，而另一些则不能。对于那些不起作用的错误，当脚本将第二个调整大小的副本编码为主副本并将第一个副本输出到指定文件夹时，就会发生错误。在进行更多阅读后，我检查了图像本身并没有损坏。在允许脚本完全完成的 .jpg 和不允许脚本完全完成的 .jpg 之间，我能注意到的唯一区别是，当在 Windows 中查看失败脚本的属性时，它似乎携带更多数据，例如过去使用的相机，型号等

有谁知道什么可能导致这个错误被抛出？

编辑

这是我正在使用的代码。

```
$imgsrc = imagecreatefromjpeg($file);
imagecopyresampled($thbout,$imgsrc,0,0,0,0,$thbwid,$thbhei,$width,$height);
imagejpeg($thbout,$thbpath,80);
imagedestroy($thbout);
imagecopyresampled($optout,$imgsrc,0,0,0,0,$optwid,$opthei,$width,$height);
imagejpeg($optout,$optpath,80);
imagedestroy($optout); 
```

今晚玩了一会儿，我通过将代码切换到这个来让它工作。（切换到先创建更大的文件）

```
$imgsrc = imagecreatefromjpeg($file);
imagecopyresampled($optout,$imgsrc,0,0,0,0,$optwid,$opthei,$width,$height);
imagejpeg($optout,$optpath,80);
imagedestroy($optout);
imagecopyresampled($thbout,$imgsrc,0,0,0,0,$thbwid,$thbhei,$width,$height);
imagejpeg($thbout,$thbpath,80);
imagedestroy($thbout); 
```

所以我想我的新问题变成了，为什么它会这样？

# php - Opera 忽略 height / max-height 属性

> ID：12126386
> 
> 赞同：0
> 
> 时间：2012-08-25T23:12:35.993
> 
> 标签：php, css, web, opera

> **可能重复：**
> [表格属性的最小宽度和最大高度](https://stackoverflow.com/questions/6426779/min-width-and-max-height-for-table-atrributes)

我在我的CSS中设置了一个高度

```
.entry, p{
display: table-cell;
vertical-align: middle;
padding: 2px;
font-size: 13pt;
margin: 0px;
}
.entry{
    float: left;
    color: white;
    -moz-border-radius: 5px;
    -o-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    background-color: #3c3838;
    width: auto;
    margin: 5px; 
    height: 52px;
    max-height: 52px;
    display: table;
    overflow: auto;
    font-size: 13pt;
    font-weight: normal;
} 
```

但可悲的是，Opera 忽略了我的固定高度并使其变大，如此处所示

![在此处输入图像描述](../Images/e8fd1135229cecc9dd471d7dd01aefd3.png)

想法？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T23:16:31.050

看看这个答案，我想这会为你解决问题。 [表格属性的最小宽度和最大高度](https://stackoverflow.com/questions/6426779/min-width-and-max-height-for-table-atrributes)

和 W3 的最大高度，而不是该答案中定义的最大宽度。 [http://www.w3.org/TR/CSS21/visudet.html#propdef-max-height](http://www.w3.org/TR/CSS21/visudet.html#propdef-max-height)

> 在 CSS 2.1 中，'min-height' 和 'max-height' 对表格、内联表格、表格单元格、表格行和行组的影响是未定义的。

# php - 重命名比找到的键高 2 级的键

> ID：12126394
> 
> 赞同：0
> 
> 时间：2012-08-25T23:14:03.790
> 
> 标签：php, arrays

如何重命名一个比找到的键高两级的键，例如这个数组

```
[database] => Array
        (
            [0] => Array // Would be renamed to "production"
                (
                    [host] => test
                    [user] => test
                    [pass] => test
                    [name] => test
                    [port] => test
                    [@attr] => Array
                        (
                            [alias] => production
                            [name] => live
                        )

                )

            [1] => Array // Would be renamed to "development"
                (
                    [user_data] => Array
                        (
                            [0] => Array // Would be renamed to "three"
                                (
                                    [user] => sample
                                    [@attr] => Array
                                        (
                                            [alias] => three
                                        )

                                )

                            [1] => Array // Would be renamed to "two"
                                (
                                    [user] => sample
                                    [@attr] => Array
                                        (
                                            [alias] => two
                                        )

                                )

                        )

                    [host] => test
                    [user] => test
                    [pass] => test
                    [name] => test
                    [port] => test
                    [@attr] => Array
                        (
                            [alias] => development
                        )

                )

        ) 
```

使用我当前尝试的代码：

```
private function _applyXmlAlias($array)
        {
            foreach ($array as $config)
            {
                if (is_array($config))
                {
                    if (isset($config['@attr']['alias']))
                    {
                        $alias = $config['@attr']['alias'];

                        unset($config['@attr']['alias']);

                        if (empty($config['@attr']))
                        {
                            unset($config['@attr']);
                        }

                        reset($config);

                        while (list($key, $val) = each($config))
                        {

                            $this->_config[$alias][$key] = $val;
                        }

                        //$this->_config[$alias] = $config;

                        //$this->_applyXmlAlias($this->_alias[$alias]);

                    } else {

                        $this->_applyXmlAlias($config);
                    }

                } else {

                    break;
                }
            }
        } 
```

我得到这个数组输出

```
Array
(
    [database] => Array
        (
            [0] => Array
                (
                    [host] => test
                    [user] => test
                    [pass] => test
                    [name] => test
                    [port] => test
                    [@attr] => Array
                        (
                            [alias] => production
                            [name] => live
                        )

                )

            [1] => Array
                (
                    [user_data] => Array
                        (
                            [0] => Array
                                (
                                    [user] => sample
                                    [@attr] => Array
                                        (
                                            [alias] => three
                                        )

                                )

                            [1] => Array
                                (
                                    [user] => sample
                                    [@attr] => Array
                                        (
                                            [alias] => two
                                        )

                                )

                        )

                    [host] => test
                    [user] => test
                    [pass] => test
                    [name] => test
                    [port] => test
                    [@attr] => Array
                        (
                            [alias] => development
                        )

                )

        )

    [production] => Array
        (
            [host] => test
            [user] => test
            [pass] => test
            [name] => test
            [port] => test
            [@attr] => Array
                (
                    [name] => live
                )

        )

    [development] => Array
        (
            [user_data] => Array
                (
                    [0] => Array
                        (
                            [user] => sample
                            [@attr] => Array
                                (
                                    [alias] => three
                                )

                        )

                    [1] => Array
                        (
                            [user] => sample
                            [@attr] => Array
                                (
                                    [alias] => two
                                )

                        )

                )

            [host] => test
            [user] => test
            [pass] => test
            [name] => test
            [port] => test
        )

    [three] => Array
        (
            [user] => sample
        )

    [two] => Array
        (
            [user] => sample
        )

) 
```

正如你所看到的，我已经得到了一些输出。唯一的问题是我需要用`alias`主配置数组中的新名称替换新数组。并且还需要让数组知道包含`[@attr][alias]`它们属于同一个父数组的键的任何子数组，而不是附加到主配置数组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:06:33.823

据我从您的问题陈述中了解到，您需要采用基于递归/堆栈的解决方案。但这既昂贵又复杂。如果您可以描述需要执行此操作的场景，则可能通过讨论可以发挥更好的设计效果：)

# git - 关于git读写权限？

> ID：12126395
> 
> 赞同：0
> 
> 时间：2012-08-25T23:14:10.817
> 
> 标签：git

对于 git 仓库，如果我有只读权限，我可以创建一个分支并在我的分支中修改源代码吗？还是我必须分叉存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:20:01.590

你在问什么并不完全清楚。我相信您要问的是“如果磁盘上有只读存储库，您可以将自己的分支添加到其中吗？” 不，元数据区域通常都具有相同的权限。您需要克隆它，并在您的 fork 中进行更改。

# google-app-engine - Google Webfont 未显示在 GAE 网站上

> ID：12126397
> 
> 赞同：0
> 
> 时间：2012-08-25T23:14:54.243
> 
> 标签：google-app-engine, webfonts, google-webfonts

所以我试图在 GAE 网站上使用 Google Webfont。当我在本地浏览网站时，该字体有效，但在我部署并转到 .appspot.com 地址后，该字体不再有效，默认为“草书”。

以下是相关代码：

CSS：

```
.logo {
  font-family: 'Nothing You Could Do', cursive;
} 
```

HTML：

```
<head>
    <link href='http://fonts.googleapis.com/css?family=Nothing+You+Could+Do' rel='stylesheet' type='text/css'> 
</head>
<a class="logo" href="/">Project</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T01:20:13.467

我相信这是一个浏览器问题。

[从这里](https://developers.google.com/webfonts/faq#Browsers_Unsupported)引用：

> 支持哪些浏览器？Google Web Fonts API 与以下浏览器兼容：
> 
> Google Chrome：版本 4.249.4+ Mozilla Firefox：版本：3.5+ Apple Safari：版本 3.1+ Opera：版本 10.5+ Microsoft Internet Explorer：版本 6+
> 
> 不受支持的浏览器会看到什么？如果有人使用不受支持的浏览器访问使用 Web Fonts API 的页面，则文本将使用 CSS 字体堆栈中的下一个可用字体显示。

# vba - VBA使用工作表名称引用单元格无法正常工作

> ID：12126399
> 
> 赞同：2
> 
> 时间：2012-08-25T23:14:57.440
> 
> 标签：vba, excel

**摘要：**我正在编写一个宏，它从 excel 文件中的许多不同工作表中获取名称并将它们一起编译到“主列表”中，但是我在引用另一个工作表上的单元格时遇到了麻烦。

**问题：**当我使用工作表名称作为参考来引用特定单元格时`Sheets("MasterList").ActiveCell.Offset(0, 1)`，没有任何内容被拾取。但是，当我删除`Sheets("MasterList")`宏时工作正常（宏当前在“MasterList”上，这是唯一可行的方法）。此外，我的代码中工作表名称的拼写是正确的。

**问：**为什么会这样？代码背后的逻辑似乎很合理，而且我的工作表名称拼写正确。

**代码：**

```
Do              

   If Sheets("MasterList").ActiveCell.Offset(0, 1) = firstName Then        'IF FIRST AND LAST NAMES MATCH, EXIT THE CHECK

          Exit Do

   End If

   On Error Resume Next

   Cells.Find(What:=lastName, After:=ActiveCell, LookIn:=xlFormulas, _
   LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
   MatchCase:=False, SearchFormat:=False).Activate

Loop Until Err.Number > 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T23:51:22.087

`ActiveCell`是`Application`对象的属性，而不是`Sheet`.

只有一个`ActiveCell`，它是当前活动工作表上的活动单元格。

目前尚不清楚您要做什么。但总的来说，您应该避免`Select`使用`Activate`这种代码。使用类似的东西：

```
Dim wsMasterList as Worksheet
Set wsMasterList = Thisworkbook.WorkSheets("MasterList")  ' assuming the vba code is in the workbook containing MasterList 
```

要跟踪 MasterList 中最后使用的单元格，请使用类似的变量

```
Dim rMasterList as Range
Set rMasterList = wsMasterList.Cells( ...  ' Specify the cell you want 
```

然后用于`rMasterList.Offset(0, 1)`引用相对于该单元格的单元格

在 MasterList 上搜索使用：

```
Dim cl as Range
Set cl = wsMasterList.UsedRange.Find( ... )
If Not cl Is Nothing Then
    ' cl will be Nothing if the search term is not found
    ' ... 
```

# php - .htaccess mod_rewrite 斜杠

> ID：12126401
> 
> 赞同：0
> 
> 时间：2012-08-25T23:15:10.387
> 
> 标签：php, sql, .htaccess, mod-rewrite

我在这里遇到了我的 mod_rewrite 模块的问题。如果我执行 /toronto/，它会相应地引导我，但是，如果我执行 /toronto 而没有尾部斜杠，它会返回 404。我需要 /toronto 和 /toronto/ 都从 /city_name 文件夹中读取。如何避免使用斜杠，这是我的代码：

RewriteBase 上的 RewriteEngine /city_name

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*)/$ /city_name/index.php?page=$1 [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /([^\./]+)\.php$
RewriteCond %{DOCUMENT_ROOT}/city_name/%1.php -f
RewriteRule ^(.*)/([^\./]+)\.php$ /city_name/$2.php?page=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:19:37.003

```
RewriteRule (.*)/$ /city_name/index.php?page=$1 [L,QSA] 
```

该规则明确表示 URI 必须以斜杠结尾，因此 'toronto' 不匹配任何规则。要使斜线可选，请使用 ? 操作员：

```
RewriteRule (.*)/?$ /city_name/index.php?page=$1 [L,QSA] 
```

# sockets - 在关闭事件处理程序中获取套接字的 IP 地址

> ID：12126403
> 
> 赞同：0
> 
> 时间：2012-08-25T23:15:18.017
> 
> 标签：sockets, node.js

```
socket.on('data', function(data)
{
    console.log(socket.remoteAddress + ":" + socket.remotePort);
}

socket.on('close', function()
{
    console.log(socket.remoteAddress + ":" + socket.remotePort);
} 
```

数据处理程序的日志显示`127.0.0.1:8000`。

关闭处理程序的日志显示`undefined:undefined`。

我正在尝试使用 IP:Port 作为键来保留已连接套接字的列表。如果我不知道哪个已关闭，我如何将其从列表中删除？关闭后如何获取已关闭套接字的 IP：端口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T16:06:44.407

这就是我跟踪客户的方式：

```
server.on('connect', function(socket)
{
    socket.key = socket.remoteAddress + ":" + socket.remotePort;
    clients[socket.key] = socket;

    socket.on('close', function()
    {
        delete clients[socket.key];
    }
} 
```

非常感谢 Node.js IRC 频道中的 mscdex 提出了这个解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T00:48:25.570

```
socket.on('connect', function()
{
   socket.address = socket.remoteAddress + ":" + socket.remotePort;//save  the address in socket object
   console.log(socket.remoteAddress + ":" + socket.remotePort);
});
socket.on('data', function(data)
{
   console.log(socket.address );
});

socket.on('close', function()
{
  console.log(socket.address );
}); 
```

只需保持数据与套接字对象相关联。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T03:21:04.560

[一旦https://github.com/joyent/node/commit/8c38b07252d86f4eef91344f8df4f0c3e38bca35](https://github.com/joyent/node/commit/8c38b07252d86f4eef91344f8df4f0c3e38bca35)在 Node.js 的稳定版本中，即使断开连接，remoteAddress 属性也会存在。io.js 将在下一个版本中包含它：[https ://github.com/iojs/io.js/issues/1157](https://github.com/iojs/io.js/issues/1157)

# c++ - C++。每帧更新和复制一系列值。我应该使用哪种类类型？

> ID：12126404
> 
> 赞同：2
> 
> 时间：2012-08-25T23:15:31.760
> 
> 标签：c++, arrays

我每帧生成一个值集合，我想将这些值添加到特定索引处的更大值集合中。

这是我正在生成的集合的典型示例

```
std::vector<glm::vec3> corners;
corners.reserve(8);
//glm::vec3 corners[8];
//std::list<glm::vec3> corners;

corners[i++] = position - hX + hY + hZ;
corners[i++] = position + hX + hY + hZ;
corners[i++] = position + hX - hY + hZ;
corners[i++] = position - hX - hY + hZ;
corners[i++] = position - hX + hY - hZ;
corners[i++] = position + hX + hY - hZ;
corners[i++] = position + hX - hY - hZ;
corners[i++] = position - hX - hY - hZ; 
```

然后我有一个更大的 glm::vec3 值集合，我想将上面的值复制到特定索引处。

```
std::vector<glm::vec3> vertices;
vertices.assign(maxVertices, 0); 
```

C# 等价物是

```
corners.CopyTo(vertices, index); 
```

我可以使用什么类类型来有效地生成较小的集合并将其复制到较大的集合，而不会在每一帧生成它的开销太大？

我可以将每个新生成的较小集合分配到较大集合的末尾，这样可以忽略索引值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:45:54.613

在您的代码中，您应该`corners.resize(8)`，而不是`corners.reserve(8)`。此外，如果我理解正确，您似乎总是有 8 个角？然后使用数组：

```
typedef std::array<glm::vec3, 8> Corners; 
// or in pre-c++0B code use boost::array same way
// or if neither is available then just raw glm::vec3[8] can do. 
```

然后可以通过初始化完成填充：

```
// somehow we have position, hX, hY and hZ
Corners corners =
{
    position - hX + hY + hZ,
    position + hX + hY + hZ,
    position + hX - hY + hZ,
    position - hX - hY + hZ,
    position - hX + hY - hZ,
    position + hX + hY - hZ,
    position + hX - hY - hZ,
    position - hX - hY - hZ
}; 
```

可以使用标准副本进行复制：

```
std::vector<glm::vec3> vertices;
// somehow it gets filled

// somewhere comes index

std::copy( corners.begin(), corners.end(), vertices.begin() + index );
// with raw glm::vec3[8] std::copy( corners, corners + 8, vertices.begin() + index ); 
```

如果您需要插入而不是复制，请使用 vertices.insert()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:47:34.630

您可以使用[`vector::insert`](http://en.cppreference.com/w/cpp/container/vector/insert). 如果你想在向量中的`corners`位置之前插入值，你可以这样做：`index``vertices`

```
vertices.insert(vertices.begin() + index, corners.begin(), corners.end()); 
```

但是，该操作需要为新值腾出空间。这会将所有元素从`index`向量的末尾转移（也许也需要调整向量的大小）。

为了避免这种情况，您可以使用 a[`list`](http://en.cppreference.com/w/cpp/container/list)代替。

# html - 在 UpdatePanel“”中找不到触发器的 ID 为“”的控件

> ID：12126407
> 
> 赞同：0
> 
> 时间：2012-08-25T23:15:51.857
> 
> 标签：html, ajax, triggers, updatepanel, server-error

我正在尝试使用更新面板，因此每次单击菜单项时我的页面都不会刷新，但似乎我正在做的事情没有解决，您能帮帮我吗？

顺便说一句，这段代码是子菜单列表的一部分，所以我无法为按钮或类似的东西更改它。这是我的代码：

```
<ul id="ebul_mb73g0_2" class="ebul_mb73g0" style="display: none;">
   <li>            
     **<asp:UpdatePanel runat="server" id="UpdatePanel2" updatemode="Conditional">
           <ContentTemplate>
              <a title="" id="btnStock" tabindex="2" onclick="btnStock_Click">Stock</a>    
           </ContentTemplate>
           <Triggers>
              <asp:AsyncPostBackTrigger ControlID="btnStock" eventname="Click" />
           </Triggers>            
      </asp:UpdatePanel>**
   </li>             
   <li><a title="" id="btnSales" tabindex="3">Sales</a></li>
</ul> 
```

这是我得到的执行错误：在 UpdatePanel 'UpdatePanel2' 中找不到触发器的 ID 为 'btnStock' 的控件

我相信这是因为`<a></a>`不是控制，但有什么办法可以解决这个问题吗？

谢谢你的帮助 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:21:58.407

你是对的，这`<a>`不是服务器端控件。

我认为您想为此更改为 an `<asp:Button>`，因为如果您想引起回发并点击它，它并不是真正的链接`btnStock_Click()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-04T00:13:03.480

这也可以通过在标签中添加**runat="server"**来解决，假设需要处理按钮单击服务器端。

# android - 更改列表视图的背景颜色

> ID：12126409
> 
> 赞同：1
> 
> 时间：2012-08-25T23:16:11.090
> 
> 标签：android, listview, android-listview

我在 ViewFlipper 中使用 ListView，如下所示：

```
<ViewFlipper
    android:id="@+Category/viewFlipper"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
   <ListView
        android:id="@+id/listView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:entries="@array/options"
        android:cacheColorHint="#FFFFFF"
        android:background="#FFFFFF"/>
</ViewFlipper> 
```

我想更改 ListView 的背景颜色。我在选项数组中只有 5 个项目，它们没有填满屏幕。因此，listView 的其余部分以默认的灰色显示。我想更改此默认颜色。我在其他人发布的与此相关的问题中阅读了 cacheColorHint 属性。但它没有成功。谁能帮我解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:12:42.603

您应该为您的 ListView 使用`layout_height="wrap_content"`（并且`layout_width="wrap_content"`如果需要）并更改“默认灰色”，就像您通过设置 ViewFlipper 的背景所说的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:23:22.573

将选择器设置为 ListView 的背景：

```
ListView mylw = findViewById(R.id.mylistView);
//Do not use reserved  android or java identifiers as your id or variable!
mylw.setBackgroundResource(R.drawable.thexmlbelow); 
```

可绘制：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="false" android:drawable="Background Color" />
    <item android:drawable="Background Color when pressed" />
</selector> 
```

# c# - Unity C#生成的网格偏移了为什么不在正确的位置？

> ID：12126413
> 
> 赞同：3
> 
> 时间：2012-08-25T23:16:46.490
> 
> 标签：c#, unity3d, mesh

我正在尝试从脚本统一生成网格。网格是通过向特定方向投射光线生成的。然后从命中点或光线终止处获取顶点。网格生成良好并且运行良好，但是网格在带有附加脚本的对象位置上方生成大约 5 到 10 个单位单位。我将在下面附上我的脚本。

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class Torch : MonoBehaviour {

    public GameObject  lightmeshholder;

    private int RaysToShoot = 128;
    private float distance = 50;
    private Vector3[] vertices;
    private Vector2[] vertices2d;
    private int[] triangles;

    private Mesh mesh;

    private Texture2D texture;
    private int screenwidth;
    private int screenheight;
    private int grab = 0;

    private RaycastHit hit;

    // Use this for initialization
    void Start () {
    screenwidth = Screen.width;
    screenheight = Screen.height;
    texture = new Texture2D (screenwidth, screenheight, TextureFormat.RGB24, false);

    vertices = new Vector3[RaysToShoot];
    vertices2d = new Vector2[RaysToShoot];
    triangles = new int[(RaysToShoot) +1 ];

    mesh= lightmeshholder.GetComponent<MeshFilter>().mesh;

    }

    // Update is called once per frame
    void Update () {

        float angle =0;

            for(int i=0;i<RaysToShoot;i++){

                        float x = Mathf.Sin(0);
                        x=-5;
            if(Input.GetKey(KeyCode.P)){
                    x = 5;
            }
                        float y = Mathf.Cos(angle);
            if (angle <= 90){
                        angle += 2*Mathf.PI/RaysToShoot;
            }

            Vector3 dir = new Vector3(x,y,0);
        if (Physics.Raycast (this.transform.position, dir,out hit, distance)) 
        {
                Debug.DrawLine (this.transform.position, hit.point,new Color(1,1,0,1));
            Vector3 tmp = lightmeshholder.transform.InverseTransformPoint(hit.point);
            vertices2d[i] = new Vector2(tmp.x,tmp.y);

            }else{
            Vector3 tmp = lightmeshholder.transform.InverseTransformPoint(this.transform.position + dir*distance);
            vertices2d[i] = new Vector2(tmp.x,tmp.y);
            Debug.DrawLine(this.transform.position,dir * distance,Color.red,0); 
            }

        }

        // build mesh

    Vector2[] uvs = new Vector2[vertices2d.Length +1];
    Vector3[] newvertices = new Vector3[vertices2d.Length+1];

    for (int n = 0; n<newvertices.Length-1 ;n++) 
    {

            if(n==0){
            newvertices[0]=this.transform.position; 
                newvertices[1] = vertices2d[0];
                uvs[0] = new Vector2(this.transform.position.x,this.transform.position.y);
                uvs[1] = vertices2d[0];
            }else{
            newvertices[n+1] = vertices2d[n];   
                uvs[n+1] = vertices2d[n];
            }

            if(n==0){
                triangles[0] = 0;   
                triangles[1] = 1;
                triangles[2] = 2;
            }else if(n<newvertices.Length/3){
                triangles[n*3] = 0; 
                triangles[1+n*3] = n+1;
                triangles[2+n*3] = n+2;
            }

    }
        Mesh mesh = new Mesh(); 
        GetComponent<MeshFilter>().mesh = mesh; 
        mesh.Clear();
        mesh.vertices = newvertices;        
        mesh.uv = uvs;  
        mesh.triangles = triangles;
        mesh.RecalculateNormals();          
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T22:15:44.500

您从光线投射中获得的生命值是全球性的。您可以：

1) 确保网格位于位于 0,0,0 的游戏对象中。每当我基于射线命中点创建动态网格时，我通常会在 0,0,0 处创建一个新的无父游戏对象并将网格添加到其中。（而不是从外部获取容器 GameObject）

2) 在构建网格之前，在光线投射的命中点上调用 lightmeshholder.transform.InverseTransformPoint

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T12:55:35.080

当您将顶点分配回网格时，它们是在相对于对象根的局部坐标中计算的。因此，如果您想将其带回“它应该在的位置”，请使用 .TransformPoint() 调用处理它们以获得适当的偏移量。这应该可以解决您的问题，因为它们位于与您预期不同的位置。我有同样的问题。

# android - 从 Web 与应用程序通信

> ID：12126417
> 
> 赞同：-1
> 
> 时间：2012-08-25T23:17:28.817
> 
> 标签：android, web-services, url, web-applications

我想开发一个网站，让我可以远程操作我的 android 手机，我可以使用什么作为 URL 来链接 2 个应用程序？我应该使用网络服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:32:08.197

[您可以使用特殊链接](http://beradrian.wordpress.com/2010/01/15/special-links/)触发特殊功能，例如发送短信或拨打电话

**Android 和 iOS 的示例：**

```
<a href="wtai://wp/mc;123456789">Call 123456789</a>
<a href="sms:123456789*[?body=MESSAGE]">Send SMS</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T01:10:16.437

你有3个选择。

1.  [RESTful 服务（它们就像被剥离的 Web 服务）](http://www.vogella.com/articles/REST/article.html)
2.  [通过 json 和 php 或任何你知道的脚本](http://www.vogella.com/articles/AndroidJSON/article.html)
3.  [谷歌的云消息传递](http://developer.android.com/guide/google/gcm/index.html)

由于您似乎渴望使用 Web 服务，因此我建议您使用第一个。对你来说会更容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T23:26:41.737

我看不到与本机应用程序直接通信的方式。该网站可以将请求发送到服务器，然后使用[推送通知](http://developer.android.com/guide/google/gcm/index.html)来触发本机应用程序中的更改。

# jsf - JSF规范的不同实现

> ID：12126418
> 
> 赞同：1
> 
> 时间：2012-08-25T23:17:39.207
> 
> 标签：jsf, myfaces, mojarra, openfaces

JSF 是包含在 Java EE 平台中的规范。不同的供应商有不同的 JSF 实现。我知道 Oracle 提供 Mojarra 而 Apache 提供 MyFaces。是否有其他供应商提供的其他 JSF 实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T09:07:40.987

参考实现 Mojarra 和独立的 Apache 实现 MyFaces 是唯一真实且实用的 JSF 实现。

传说 IBM 曾经也有自己的实现，但显然他们不再使用它（AFAIK WAS 7 随附 Mojarra 和 MyFaces，将选择权留给用户）。

据说（曾经）有一个神话般的中国/东方 JSF 实现可用。（对我们而言）一些不起眼的东方公司已经实施了一堆 Java EE 规范，这些公司只为内部市场销售他们的闭源产品。即使在互联网时代，也很难验证这些产品是否真的存在和/或它们是否只是众所周知的实现的重新包装和重新命名的版本。

# php - isset PHP isset($_GET['something']) ？$_GET['某事']：''

> ID：12126420
> 
> 赞同：37
> 
> 时间：2012-08-25T23:17:59.090
> 
> 标签：php, isset

我正在寻求扩展我的 PHP 知识，但遇到了一些我不确定它是什么或什至如何搜索它的东西。我正在查看 php.net isset 代码，我看到了`isset($_GET['something']) ? $_GET['something'] : ''`

我了解正常的 isset 操作，例如`if(isset($_GET['something']){ If something is exists, then it is set and we will do something }`但我不了解 ?、再次重复 get、: 或 ''。有人可以帮我解决这个问题，或者至少为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-25T23:29:55.577

它通常被称为“速记”或[三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)。

```
$test = isset($_GET['something']) ? $_GET['something'] : ''; 
```

方法

```
if(isset($_GET['something'])) {
    $test = $_GET['something'];
} else {
    $test = '';
} 
```

分解它：

```
$test = ... // assign variable
isset(...) // test
? ... // if test is true, do ... (equivalent to if)
: ... // otherwise... (equivalent to else) 
```

或者...

```
// test --v
if(isset(...)) { // if test is true, do ... (equivalent to ?)
    $test = // assign variable
} else { // otherwise... (equivalent to :) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-07-25T12:11:34.107

在 PHP 7 中你可以写得更短：

```
$age = $_GET['age'] ?? 27; 
```

这意味着如果在 URL 中提供了变量，则该`$age`变量将被设置为`age`参数，否则将默认为 27。

查看[PHP 7 的所有新特性](http://php.net/manual/en/migration70.new-features.php)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-25T23:21:47.227

这称为三元运算符，主要用于代替 if-else 语句。

在您给出的示例中，它可用于从给定 isset 的数组中检索值返回 true

```
isset($_GET['something']) ? $_GET['something'] : '' 
```

相当于

```
if (isset($_GET['something'])) {
 echo "Your error message!";
} else {
 $test = $_GET['something'];
} 
```

回声$测试；

当然，除非您将其分配给某些东西，甚至可能为用户提交的值分配一个默认值，否则它并没有多大用处。

```
$username = isset($_GET['username']) ? $_GET['username'] : 'anonymous' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-25T23:23:23.933

您遇到了[三元运算符](http://davidwalsh.name/php-shorthand-if-else-ternary-operators)。它的目的是一个基本的 if-else 语句。以下代码片段做同样的事情。

三元：

```
$something = isset($_GET['something']) ? $_GET['something'] : "failed"; 
```

如果别的：

```
if (isset($_GET['something'])) {
    $something = $_GET['something'];
} else {
    $something = "failed";
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-25T23:21:22.167

它被称为三元运算符。它是 if-else 块的简写。有关示例，请参见此处[http://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary](http://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-25T23:21:35.460

? 被称为三元（条件）运算符：[示例](http://www.tutorialspoint.com/php/php_conditional_operator_examples.htm)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-25T23:26:33.367

您正在查看的内容称为[三元运算符](http://en.wikipedia.org/wiki/Ternary_operation)，您可以在[此处找到 PHP 实现](http://www.php.net/manual/en/language.operators.comparison.php)。这是一个`if else`声明。

```
if (isset($_GET['something']) == true) {
    thing = isset($_GET['something']);
} else {
    thing = "";
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-01T04:28:18.440

如果您想要一个空字符串默认值，那么首选方法是其中之一（取决于您的需要）：

```
$str_value = strval($_GET['something']);
$trimmed_value = trim($_GET['something']);
$int_value = intval($_GET['somenumber']); 
```

如果 url 参数`something` **中不存在 url**则将`$_GET['something']` **返回`null`**

`strval($_GET['something'])`-> `strval(null)`->`""`

并且您的变量`$value`设置为空字符串。

*   `trim()`根据代码，可能更喜欢`strval()`使用它（例如，名称参数可能想要使用它）
*   `intval()`如果只需要数值并且默认为零。`intval(null)`->`0`

需要考虑的案例：

`...&something=value1&key2=value2`（典型的）

`...&key2=value2`（url $_GET 中缺少的参数将为其返回 null）

`...&something=+++&key2=value`（参数为`" "`）

**为什么这是首选方法：**

*   它整齐地放在一条线上，并且很清楚发生了什么。
*   它的可读性比`$value = isset($_GET['something']) ? $_GET['something'] : '';`
*   降低复制/粘贴错误或拼写错误的风险：`$value=isset($_GET['something'])?$_GET['somthing']:'';`
*   它与旧的和新的 php 兼容。

* * *

**更新** 严格模式可能需要这样的东西：

```
$str_value = strval(@$_GET['something']);
$trimmed_value = trim(@$_GET['something']);
$int_value = intval(@$_GET['somenumber']); 
```

# cocos2d-iphone - Cocos2d - 精灵上的动画 + 定心相机？

> ID：12126424
> 
> 赞同：0
> 
> 时间：2012-08-25T23:19:10.593
> 
> 标签：cocos2d-iphone, sprite-sheet

我一直在按照[本](http://www.raywenderlich.com/1163/how-to-make-a-tile-based-game-with-cocos2d)教程创建基于图块的地图并让角色四处移动。然后我按照[本](http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d)教程为运动添加精灵动画。我想出了类似以下的运动：

```
[self stopAction: cameraMoveAction];
[playerSprite stopAction:playerMoveAction];
[playerSprite runAction: targetAction];

self.playerMoveAction = [CCSequence actions:
                         [CCMoveTo actionWithDuration: MOVEMENT_SPEED * 4 position: newPosition],
                         [CCCallFunc actionWithTarget: self selector: @selector(finishedMoving)],
                         nil
                         ];

self.cameraMoveAction = [CCSequence actions:
                         [CCMoveTo actionWithDuration: MOVEMENT_SPEED * 4 position: [self calculateNewCenterOfScreen: newPosition]],
                         nil
                         ];

[self runAction: cameraMoveAction];
[playerSprite runAction: playerMoveAction]; 
```

所以如果你看到了，我正在移动玩家和相机（为了让玩家始终居中）。我也曾尝试在`finishedMoving`通话中将摄像头对准玩家，但这看起来很糟糕（玩家会移动，然后摄像头会猛拉到玩家的位置）。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:46:59.257

您还可以尝试自动跟随给定节点的 CCFollow 操作。当你移动你的播放器时，只需调用类似的东西，

[层runAction：[CCFollow actionWithTarget：playerNode]]；

# svg - jQuery-SVG 插件的奇怪缩放/移动问题

> ID：12126427
> 
> 赞同：0
> 
> 时间：2012-08-25T23:19:52.747
> 
> 标签：svg, jquery-svg

我正在使用来自[http://keith-wood.name/svg.html](http://keith-wood.name/svg.html)的 jQuery SVG 插件，并且有一个奇怪的问题。

插件包非常好，启用简单的代码。但是，当我实现缩放和移动功能时，该代码仅适用于一台 PC，不适用于其他 PC 或智能手机。

我想找到根本原因并解决问题——以便缩放适用于所有平台。

适用于：一台带有 IE8 的 XP PC，带有 Adob​​e SVG Viewer 插件

不适用：带 Firefox 的 XP PC；Win 7 与 IE8、Firefox、Chrome；移动歌剧

相关代码如下。

```
<style type="text/css">
@import "jquery.svg.css";
#svgbasics { width: 800px; height: 600px; border: 1px solid #484; }
</style>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript" src="jquery.svg.js"></script>
<script type="text/javascript" src="jquery.svgdom.js"></script>

<script type="text/javascript">
$(function() {
    $('#svgbasics').svg({loadURL: 'Test.svg'});

    $('#ZoomIn').click(ZoomIn);
    $('#ZoomOut').click(ZoomOut);

});

function ZoomOut() {

        var svg = $('#svgbasics').svg('get');

        var viewBoxSize = $(svg.root()).attr('viewBox');
        $('#message').html(viewBoxSize);
        var viewBoxSizeArray = viewBoxSize.split(" ");

            X = Number(viewBoxSizeArray[0]);
        Y = Number(viewBoxSizeArray[1]);
        Width = Number(viewBoxSizeArray[2]);
        Height = Number(viewBoxSizeArray[3]);

        Width = Width/0.9;
        Height = Height/0.9;
        var string = X + " " + Y + " " + Width + " " + Height;
        $('#message2').html(string);
        svg.change(svg.root(), {viewBox: string});

}

</script> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:14:52.680

我知道这已经很晚了，但我只是在研究大致相同的问题时发现了你的帖子。

无论如何，您的问题*可能*与 jQuery 对属性名称执行 .toLowerCase() 的事实有关。通常，这很好，但 SVG 似乎是某些浏览器中的一个例外。

代替

```
$(svg.root()).attr('viewBox'); 
```

尝试

```
svg.root().getAttribute('viewBox'); 
```

然后

```
svg.root().setAttribute('viewBox', value); 
```

完成后设置它。

# ruby-on-rails - 手动定义getter/setter（attr_accessor或attr_writers）时如何使用read_attribute

> ID：12126429
> 
> 赞同：0
> 
> 时间：2012-08-25T23:20:20.750
> 
> 标签：ruby-on-rails, validation, ruby-on-rails-3.2, models

我建立了一个`search`模型，并希望至少填写一个字段。我发现了一个有助于验证的问题[Rails: how to require at least one field not be blank](https://stackoverflow.com/questions/2823628/rails-how-to-require-at-least-one-field-not-to-be-blank)。（我尝试了所有答案，但 Voyta 的似乎是最好的。）

验证工作正常，除非我想通过`attr_accessor`or重新定义 getter/setter `attr_writer`。（我在表单上有需要作为验证之外的虚拟属性。）为了找出问题所在，我使用常规属性进行了测试`item_length`。如果我添加`attr_accessor :item_length`，验证将停止工作。所以，我想问题是如何在不使用点符号的情况下读取属性的值。由于验证使用字符串，我不能使用正常的阅读方式。

这是一个片段：

```
if %w(keywords 
      item_length 
      item_length_feet 
      item_length_inches).all?{|attr| read_attribute(attr).blank?}
    errors.add(:base, "Please fill out at least one field")
  end 
```

就像我说的那样，虚拟属性（length_inches 和 length_feet）根本不起作用，而普通属性（length）起作用，除非我重新定义了 getter/setter。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T23:29:41.307

您应该将 read_attribute 视为读取 Active Record 列的私有方法。否则，您应该始终直接使用阅读器。

```
self.read_attribute(:item_length) # does not work
self.item_length # ok 
```

由于您试图动态调用它，您可以使用通用 ruby​​ 方法`public_send`来调用指定的方法

```
self.public_send(:item_length) # the same as self.item_length 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-25T23:31:06.823

如评论中所述，使用`send`

```
array.all? {|attr| send(attr).blank?} 
```

* * *

对于那些想知道`send`在这种情况下是否可以的人，是的，它是：对象调用它自己的实例方法。

But`send`是一个锋利的工具，因此无论何时与其他对象一起使用，请确保将其公共 api 与`public_send`

# eclipse - AspectJ - 使用类型间声明创建全局 Logger 字段

> ID：12126436
> 
> 赞同：3
> 
> 时间：2012-08-25T23:21:51.803
> 
> 标签：eclipse, class, logging, global, aspectj

我想创建一个 Inter-Type 声明，在每个类中声明一个（静态最终）Logger 实例。

构造函数应该传递封闭类`Klazz.class`值：

```
@Aspect
public class LoggerAspect {

    public interface Logger {
    }

    public static class LoggerImpl implements Logger {
        private static final Logger logger = 
          new Logger(thisJoinPoint.getTarget().getClass()/*.getName()*/);
    }

    @DeclareParents(value="com.my.api..*",defaultImpl=LoggerImpl.class)
    private Logger implementedInterface;
} 
```

我编写了上述解决方案，但是我无法在`thisJoinPoint`AspectJ 之外使用`advice`。

如果将 Logger 默认实现应用于某些类 Klazz，如何修改上述代码以成功将 Klazz.class 传递给 Logger 构造函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T02:38:11.293

您可以通过类型间声明在任何单个类上声明静态成员：

```
public aspect LoggingAspect {
    static Logger MyClass.someField = Logger.getLogger(MyClass.class.getName());
} 
```

但这不是很灵活，因为您需要为每个班级都这样做。我只是想提一下。

为了向一个类添加一些技术上不是但实际上是静态成员的东西，只需为您的日志记录方面使用每个类型的关联：

```
public aspect LoggingAspect
    pertypewithin(org.foo..*)              // per-type association
{
    Logger logger;

    after() : staticinitialization(*) {    // run 1x after class-loading
        logger = Logger.getLogger(
            getWithinTypeName()            // type associated with aspect instance
        );
    }

    pointcut logged() :                    // what to log, e.g. public methods
        execution(public * *(..));         // (pointcut could also be abstract
                                           // and refined in sub-aspects)

    before() : logged() {
        logger.log(...);                   // logging action
    }
} 
```

[在 Ramnivas Laddad 的优秀著作AspectJ in action (2nd edition)](https://rads.stackoverflow.com/amzn/click/com/1933988053)的第 6.2.4 章中可以找到一个与此类似的示例 - 这是一种常见模式。[AspectJ 文档](http://www.eclipse.org/aspectj/doc/next/adk15notebook/pertypewithin.html)中也提到了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T14:57:42.733

[这个答案](https://stackoverflow.com/questions/7382464/aspectj-syntax-for-after-staticinitialization)给出了正确的解决方案，为方便起见，贴在下面。此外，它使用 AspectJ 注释，这是当今的首选表示法。

开发人员最近添加了注释 API，我想是为了标准化标记，就像 Spring 等许多其他流行的库一样。

```
@Aspect("pertypewithin(com.something.*))")
public abstract class TraceAspect {

    Logger logger;

    @Pointcut
    public abstract void traced();

    @Pointcut("staticinitialization(*)")
    public void staticInit() {
    }

    @After(value = "staticInit()")
    public void initLogger(JoinPoint.StaticPart jps) {
        logger = Logger.getLogger(jps.getSignature().getDeclaringTypeName());
    }

    @Before(value = "traced()")
    public void traceThatOne(JoinPoint.StaticPart jps) {
        logger.log(jps.getSignature().getName());
    }
} 
```

# php - 在单个 Heroku 应用程序 procfile 中运行 python 和 php

> ID：12126439
> 
> 赞同：1
> 
> 时间：2012-08-25T23:22:06.407
> 
> 标签：php, python, heroku

我还没有找到在一个 Heroku 应用程序中为不同语言类型启动两个网络工作者的方法。

我有一个运行良好的 python 应用程序，并且我在一个文件夹中添加了一个 PHP 应用程序，所以我的 procfile 理想情况下看起来像这样：

网页：python pythonapp.py 网页：sh phpapp/index.php

当然这不起作用，事实上，即使我完全删除了 python 工作者，我也无法让 PHP 应用程序通过 procfile 运行。日志只是显示它已经崩溃并且“语法错误：”（“意外”

如果我只是将 PHP 应用程序加载到没有 procfile 的 Heroku 应用程序中，它运行良好。

所以问题是：如何通过 procfile 启动 PHP 应用程序，而不是依靠 Heroku 来自动检测 PHP？

谢谢，

-詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-11T14:22:16.257

对于在线程启动数年后（对我来说是 2020 年）来到这里的任何人来说，Heroku 现在已经内置了多构建包。使用此链接获取信息以及如何设置：

[https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app](https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app)

（注意：我从上面 Kenneth Reitz 的回答开始得到这个链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:17:07.087

听起来这些应用程序应该分成两个独立的代码库。

但是，您可以使用 multi-buildpack 实现此目的：

[https://github.com/ddollar/heroku-buildpack-multi](https://github.com/ddollar/heroku-buildpack-multi)

# jquery - 如何在特定的 jQuery 选项卡中使用与定位相关的 jQuery

> ID：12126440
> 
> 赞同：0
> 
> 时间：2012-08-25T23:22:12.790
> 
> 标签：jquery, tabs, positioning, conflict, jquery-masonry

我正在为特定选项卡中的某些内容使用 jQuery 插件。jQuery 是[http://masonry.desandro.com/](http://masonry.desandro.com/)并且选项卡是[http://os.alfajango.com/easytabs/](http://os.alfajango.com/easytabs/)。当我尝试在其中一个选项卡中加载 Masonry 时，它根本不起作用，或者显示不正确（所有东西都堆叠在左上角）。我不确定如何解决这个问题，到目前为止，我只尝试在单击选项卡后、在选项卡内容变得可见以及其他类似的事情后才运行砌体。

请指出我正确的方向！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:52:18.893

这个问题似乎与我使用带有砖石和简单标签的图像这一事实有关。要解决此问题，您必须使用 Masonry 的 imagesLoaded 推荐，并将代码设置为：

```
var $container = $('#masonry-container-name');

$container.imagesLoaded(function(){
    $container.masonry({
        itemSelector : '.item-class-or-id'
    });

    $(document).ready(function(){
        $('#easytabs-container-name').easytabs();
    });
}); 
```

# perl - 如何检查目录中是否存在扩展名为 .txt 的文件？

> ID：12126441
> 
> 赞同：1
> 
> 时间：2012-08-25T23:22:15.630
> 
> 标签：perl, file-exists

我想知道如何检查目录中是否有带`.txt`扩展名的文件。

怎么做到呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T23:30:43.657

只需使用 glob ：

```
if ( <*.txt> ) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:14:53.537

请记住，`*.txt`这实际上可能是一个目录。如果它是您所追求的文件，`grep`则`glob`：

```
if ( grep -f, glob '*.txt' ) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T09:48:27.947

```
#! /usr/bin/perl

my $dir = '.';  # current dir

opendir(DIRHANDLE, $dir) || die "Couldn't open directory $dir: $!\n";
my @txt = grep {  /\.txt$/ && -f "$dir/$_" } readdir DIRHANDLE;
closedir DIRHANDLE;

print ".txt files found" if (scalar(@txt)); 
```

作为奖励，找到的所有 .txt 文件都在数组 @txt 中。

# php - 空访问令牌

> ID：12126444
> 
> 赞同：0
> 
> 时间：2012-08-25T23:22:50.597
> 
> 标签：php, facebook, curl, access-token

我有这个网址，但是当我运行 curl 函数时，我无法得到`access token`：知道吗？

```
 $url =  "https://graph.facebook.com/oauth/access_token?client_id=xx16796&redirect_uri=http%3A%2F%2Flocalhost%2Fcake%2Fusers%2Flogin&client_secret=f70f01e76xxxxxebbbb9dfd7e&code=AQAD2Cfkx_RryGAQ5w5fHPelQFCOqIJRnw1gg8DGFpw..." 
```

* * *

```
 /**
       * Call to Facebook to get access token
       */
      if (($response = $this->_connect($url)) !== false) {
        parse_str($response, $response);
            // i should stay here.
      }

  /**
   * Something went wrong! todo
   */
  if (empty($response['access_token'])) {
    // i am here.
    return false;
  } 
```

* * *

```
 public function _connect($url)
  {
    $response = false;

    if (is_callable('curl_init')) {

      $curl = curl_init($url);

      if (is_resource($curl) === true) {
        curl_setopt($curl, CURLOPT_FAILONERROR, true);
        curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);

        /**
         * Attempt to execute the session until we get a result OR
         * the number of maximum attempts has been reached
         */
        $attempts = 3;
        while (($response === false) && (--$attempts > 0)) {
          $response = curl_exec($curl);

          var_dump($curl); //resource(58, curl)
          var_dump($response); //boolean false 

        }

        curl_close($curl);
      } else {
        return false;
      }

/**
 * If cURL is not enabled, we use file_get_contents
 */
    } else {
      $response = @file_get_contents($url);
    }

    return $response;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:45:55.473

我不知道到底是什么问题。

但这对我来说很好。

```
public function _connect($url)
{
    $result = false;
    $url = str_replace(' ', '%20', $url);
    $curl = curl_init($url);

    if (is_resource($curl) === true)
    {
        curl_setopt($curl, CURLOPT_FAILONERROR, true);
        curl_setopt($curl, CURLOPT_FOLLOWLOCATION, false);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);

        $result = curl_exec($curl);
        curl_close($curl);
    }

    return $result;
} 
```

# ruby-on-rails - 为什么我不能在 Heroku 上的 Web 应用程序中删除我的用户帐户？

> ID：12126449
> 
> 赞同：1
> 
> 时间：2012-08-25T23:23:38.770
> 
> 标签：ruby-on-rails

我正在开发我的第一个 Rails 应用程序，我是一名初学者。我让注册我的应用程序的人做的一件事是删除他们的帐户。现在，我可以删除在本地环境中创建的帐户，但在 Heroku 上，当我尝试删除用户帐户时，我收到一条错误消息，提示“出现问题”。这是我认为相关的所有代码：

我在 routes.rb 中的 delete_account 路由：

```
match '/delete_account', to: 'users#destroy' 
```

我在 users_controller.rb 中的销毁方法：

```
 def destroy
    @user = User.find(params[:id])
    cu = Stripe::Customer.retrieve(@user.stripe_customer_token)
    cu.delete
    @user.destroy
    flash[:success] = "Your account has been deleted."
    redirect_to root_path
  end 
```

我在 app/views/users/edit.html.erb 中的链接：

```
 <%= link_to 'Delete Account', @user, confirm: 'Are you sure?', method: :delete %> 
```

当我检查我的 Heroku 日志时，没有错误。我能找到的唯一错误是关于没有加载我的 favicon.ico 文件的路径。如果您可以帮助我解决问题并帮助我在我的应用程序中使用用户可以删除自己的功能，我将不胜感激。

# objective-c - 将 UIAlertView 委托给另一个类/文件？不工作？

> ID：12126450
> 
> 赞同：0
> 
> 时间：2012-08-25T23:23:48.387
> 
> 标签：objective-c, ios, cocoa-touch

所以我是 iOS 开发的新手，我正在尝试将按钮单击事件委托给另一个类。每当我单击警报上的按钮时，应用程序就会崩溃，并且我收到一条错误消息 Thread_1 EXC_BAD_ACCESS。

这是我的代码。

```
// theDelegateTester.h
#import <UIKit/UIKit.h>

@interface theDelegateTester : UIResponder <UIAlertViewDelegate>
- (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex;
@end 
```

执行..

```
// theDelegateTester.m
#import "theDelegateTester.h"

@implementation theDelegateTester
- (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"Delegated");
}
@end 
```

这是我的视图文件的实现..

```
#import "appleTutorialViewController.h"
#import "theDelegateTester.h"

@interface appleTutorialViewController ()
- (IBAction)tapReceived:(id)sender;
@end

@implementation appleTutorialViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)tapReceived:(id)sender {
    theDelegateTester *newTester = [[theDelegateTester alloc] init];
    UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"Alert!" message:@"This is a delegated alert" delegate:newTester cancelButtonTitle:@"Close" otherButtonTitles:@"Cool!", nil];
    [myAlert show];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:35:51.757

首先，您应该始终以大写字母开头类名，这样您就可以轻松地区分类和实例或方法。

而且您可能会泄漏委托类。您应该在视图控制器中声明一个强/保留属性`TheDelegateTester *myDelegate`。然后`tapReceived:`是这样的：

```
- (IBAction)tapReceived:(id)sender {
    if (!self.myDelegate) {
        TheDelegateTester *del = [[TheDelegateTester alloc] init];
        self.myDelegate = del;
        [del release];
    }
    UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"Alert!" message:@"This is a delegated alert" delegate:newTester cancelButtonTitle:@"Close" otherButtonTitles:@"Cool!", nil];
    [myAlert show];
    [myAlert release];
} 
```

# php - 对图像宽度和高度进行检查

> ID：12126451
> 
> 赞同：0
> 
> 时间：2012-08-25T23:23:48.977
> 
> 标签：php, html, css, image, function

如何检查图像的宽度和高度？

```
$image_size = getimagesize($image_temp); 
```

数组的第三个元素显示：

```
width="1679" height="939" 
```

我想知道如何检查图像的宽度是否超​​过 1000，如果是，我可以将宽度更改为 1000px；

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:31:07.743

使用第 0 个元素检查条件并自己生成输出，例如：

```
$size = getimagesize($image_temp);
$width_and_height = $size[0] > 1000 ? 'width="1000"' : $size[3]; 
```

或者，如果您想保持高度：

```
$width_and_height = $size[0] > 1000 ? 'width="1000" height="'.$size[1].'"' : $size[3]; 
```

# php - Sum 变量并继续显示和更新它

> ID：12126453
> 
> 赞同：2
> 
> 时间：2012-08-25T23:24:03.210
> 
> 标签：php, javascript

我有这个功能，它是我游戏的一部分，它会将数据发送到 getScore.php。在那个php中，我有一些代码可以将玩家输入的每个标签的分数发回给我，例如“100”“50”或“10”。现在我想获取这些分数并将它们相加并继续向玩家展示他的得分（更新），直到游戏结束。

```
function showScore() {
    $.ajax({
        type: "GET",
        url: "getScore.php",
        data:{
            tag: $("#tag").val(),
            timecode: curTime,
            filename: getFileName(),
            gameid: gameID()
        }
    }).done(function( msg )
    {
    show3(msg);

    });

    return false; 
}; 
```

最后一个函数是我显示分数的地方，但现在我想将其更改为 sum 和 show。我怎样才能做到这一点？！

```
var score;

function show3(string)
{
document.getElementById('myScore').innerHTML = string;
return string;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:14:09.630

我猜您想将从 myScore.php 获得的分数添加到`score`并显示它。该`parseInt()`功能应该可以解决问题：

```
function show3(msg)
{
score = score+parseInt(msg);
document.getElementById('myScore').innerHTML = score;
return score;
} 
```

首先，命名 var 和函数参数`score`会让您感到困惑。其次，您没有添加从 getScore.php 获得的分数，而是替换它。

# ios - 更改 Interface Builder Storyboard 的方向

> ID：12126456
> 
> 赞同：2
> 
> 时间：2012-08-25T23:24:33.470
> 
> 标签：ios, xcode, interface-builder, storyboard

我有一个 .storyboard 文件，我需要将其方向从纵向更改为横向，这样它就不会只是拉伸场景，因为应用程序只是横向的。
我该如何修改这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T01:24:31.053

单击 ViewController 栏（底部，视图下方），然后转到 Attribute Inspector，在 Simulated Metrics > Orientation 中选择 Landscape。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T21:37:44.707

如果你有很多观点要改变：

*   右键单击情节提要 -> 作为源代码打开并替换此行：

    ```
    <simulatedOrientationMetrics key="orientation"/> 
    ```

经过

```
<simulatedOrientationMetrics key="orientation" orientation="landscapeRight"/> 
```

或者

```
<simulatedOrientationMetrics key="orientation" orientation="landscapeLeft"/> 
```

或其他取决于您的需要

# php - span 标签的正则表达式

> ID：12126458
> 
> 赞同：0
> 
> 时间：2012-08-25T23:24:39.010
> 
> 标签：php, regex

如何正则表达式跨度标签exp。

```
<span id="n1">value here</span> 
```

我需要获取 span id 和“这里的值”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:34:04.533

您不应该使用正则表达式来解析 HTML。但是，如果您必须这样做，应该这样做。

```
$regex = '#<span id="(.+?)">(.+?)</span>#';
preg_match($regex, $input, $groups);

$id = $groups[1];
$value = $groups[2]; 
```

这绝不是绝对的防弹。不是由一个长镜头。

你真的应该看看像[DOMDocument这样的东西](http://us2.php.net/domdocument)

# nhibernate - 是否有相当于 nhibernate 的 IIdentifierGenerator 的 EF 5？

> ID：12126459
> 
> 赞同：0
> 
> 时间：2012-08-25T23:24:51.163
> 
> 标签：nhibernate, entity-framework-5, key-generator

我知道在 EF 中您可以指定 PK 由 db 生成（如 MSSQL 身份），但是这里有什么钩子吗？有没有办法像在 NHibernate 中一样使用 IIdentifierGenerator 接口插入自定义 pk 生成器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:01:41.620

简短的回答：没有。EF 没有那种可扩展性。

长答案：您可以通过覆盖`SaveChanges`或收听`ObjectContext.SavingChanges`、从跟踪器获取新添加的实体并分配 id 来模拟它。

# java - OpenGL ES 2.0 - 多个视图如何使用同一个渲染器？

> ID：12126466
> 
> 赞同：1
> 
> 时间：2012-08-25T23:26:00.100
> 
> 标签：java, android, opengl-es-2.0

现在我有我的`ApplicationActivity`，这个活动负责管理多个视图（`GLSurfaceViews`）。我可以/应该让所有视图将渲染器设置为“全局”渲染器吗？

代码：

```
public class ApplicationActivity extends Activity 
{
    private static final String TAG = ApplicationActivity.class.getSimpleName();

    private final Stack<Screen> screens = new Stack<Screen>();
    private GlRenderer glRenderer;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

            Log.d(TAG, "Main Activity Created");

        setupGraphics();

        ChangeScreen(new MainMenu(this, glRenderer)); //Creating a new Screen sets the renderer
    }

    private void setupGraphics()
    {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,     WindowManager.LayoutParams.FLAG_FULLSCREEN);

        glRenderer = new GlRenderer(this);
    }

    public void Draw() //Is called by the glRenderer onDrawFrame() { mainActivity.Draw() } 
    {

    }
} 
```

它之间的相同活动切换`GLSurfaceViews`，据我所知，我相信该方法`setRenderer`设置视图渲染器，然后启动渲染线程（创建一个新线程），但我不想每次在视图之间切换时重新创建线程 - 可能会创建潜在问题。

所以最后我想要一个 Renderer 类只是为了将图形与业务逻辑等分开，但是，我不知道是否可以使用一个 Renderer，而无需再次设置线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:52:00.610

只有在使用`GLSurfaceView.onPause()`/正确切换它们时，才能使用具有相同渲染器的多个视图`.onResume();`

我的具体情况：

```
@Override
protected void onPause() //Overrides onPause from Activity
{
    surfaceViews.peek().onPause();
    super.onPause();
} 
```

所以每次活动暂停时，我都必须暂停当前视图。如果活动恢复，则视图也恢复。

我还有一个方法称为`SetView`（暂停并删除然后更改为另一个视图）或（暂停然后更改为另一个视图）这是使用`Stack`

```
public void SetView(View screen)
{   
    if (!screens.empty())
    {
        screens.peek().onPause();
        screens.pop();
    }

    screens.push(screen);
    setContentView(screens.peek());
} 
```

当然，因为我们现在使用的是视图而不是活动，所以我们必须重写`onBackPressed()`以返回到以前的视图。

```
@Override
public void onBackPressed() 
{       
    if (screens.size() == 1)
        super.onBackPressed();
    else
    {
        screens.pop();
        setContentView(screens.peek());
        screens.peek().onResume();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:42:43.230

通过这样做`new GLRenderer()`，您可以创建类的新**实例**。所以在不同的活动中使用相同的渲染器是没有问题的。

编辑：我似乎误解了你的问题 - 如果你想一次看到许多 GL 表面，那么不，这是不可能的。但这与重用渲染器代码无关。

# android - android的左边框，右边框等？

> ID：12126471
> 
> 赞同：0
> 
> 时间：2012-08-25T23:27:08.870
> 
> 标签：android, styles

我想在我的 android 应用程序中设置一个按钮的样式，并且我想为每个边框侧/“描边侧”设置不同的颜色。这可能吗，或者我需要为此创建一个 9patch 吗？任何等于左边界的东西，例如在css中？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:35:25.560

我之前尝试过，如果不使用[NinePatchDrawable](http://developer.android.com/reference/android/graphics/drawable/NinePatchDrawable.html)就无法实现。我什至尝试过使用[Shape Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)，但你不能为不同的描边应用不同的颜色。

您可以[按照以下步骤](http://developer.android.com/tools/help/draw9patch.html)生成 9-patch 可绘制对象。

# php - 无法使用最新的 PHP 驱动程序连接到 SQL SERVER

> ID：12126472
> 
> 赞同：1
> 
> 时间：2012-08-25T23:27:16.560
> 
> 标签：php, sql-server, php-extension

我一直在试图找出哪个 dll 以及如何使用它来连接到 sql server。

使用旧的 php_mssql 要容易得多。

我在 WinXP Pro SP3 上使用 Xampp。我一直无法弄清楚如何连接，我已经搜索了手册，但没有任何命令起作用。

我得到 PDO 错误驱动程序未找到

扩展-php_pdo_sqlsrv_54_ts.dll 扩展=php_sqlsrv_54_ts.dll

我意识到我必须使用 SQLSERV 2.0 驱动程序。但是哪个 dll 是正确的呢？我必须使用什么语法来连接和运行查询？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:11:10.657

一种方法是使用 FreeTDS for Windows

我假设你有 PHP >5.3 下载这个[http://download.moodle.org/download.php/dblib/php53/DBLIB_TS.zip](http://download.moodle.org/download.php/dblib/php53/DBLIB_TS.zip)

将此行添加到您的 php.ini`extension=php_dblib.dll`

`freetds.conf`您还需要在 PHP 安装的根目录中创建一个名为的文件。

它应该看起来像这样：

```
[global]
     host = xxx.xxx.xxx.xxx (host name or ip of the MSSQL server)
     port = 1433
     client charset = UTF-8
     tds version = 8.0
     text size = 20971520 
```

重新启动 Apache 并尝试运行此脚本：

```
<?php
    $link = mssql_connect('localhost', 'db_user', 'db_password');
    if(!$link) {
        echo'Could not connect';
        die('Could not connect: ' . mssql_error());
    }
    echo'Successful connection';
    mssql_close($link);
?> 
```

如果这不起作用，请在 fb 上联系我 ;)

# android - 在平板电脑中使用高清进度圈

> ID：12126474
> 
> 赞同：0
> 
> 时间：2012-08-25T23:27:27.057
> 
> 标签：android, tablet, definition, progress, android-screen-support

我正在开发安卓应用程序。在我的 GALAXY Tab 10.1 中显示了低清进度圈。但是，我的手机GALAXY Nexus显示高清进度圈。

起初，GALAXY Nexus 也显示了低清进度圈。因此，我尝试将 anyDensity false 的值更改为 true，如下所示：

[AndroidManifest.xml] `<supports-screens android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" android:anyDensity="true"/>`

此代码在 GALAXY Nexus 上运行良好，但在 GALAXY 选项卡上不起作用。如何在平板电脑上显示高清进度圈？我只是使用默认的进度圈...

*   节点：720×1280 /
*   GALAXY 标签：128​​0×800 (150ppi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:37:14.967

您可以覆盖`spinner_black_76`每个密度文件夹中 API 级别 10 中使用的图像。您可以从以下位置获取 hdpi 图像：

```
android-sdk\platforms\android-10\data\res\drawable-hdpi\spinner_black_76 
```

将此 hdpi 图像放入所有文件夹（hdpi/mdpi/ldpi）。

**但**我不知道这是否适用于其他 API 级别。因此，只需使用以下命令创建您自己的进度条：

```
<animated-rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/spinner_black_76"
    android:pivotX="50%"
    android:pivotY="50%"
    android:framesCount="12"
    android:frameDuration="100" /> 
```

编辑：

好的，我查了一下。在 7-16 的每个 API 级别中，都会调用默认微调器，`spinner_black_76`因此如果您将 hdpi 图像放在所有文件夹中，它应该在所有平台中覆盖它（至少从 7-16 开始）。

# regex - 如何仅打印与 sed 匹配的内容？

> ID：12126476
> 
> 赞同：2
> 
> 时间：2012-08-25T23:27:53.280
> 
> 标签：regex, macos, bash, sed, terminal

好吧，这很容易，但我无法弄清楚。

基本上我想`<a href="[^<>]*">[^<>]*</a>`从一个大`html`文件中提取所有链接（）。

我试图用 来做到这一点`sed`，但我得到了各种各样的结果，只是不是我想要的。我知道我的正则表达式是正确的，因为我可以替换文件中的所有链接：

```
sed 's_<a href="[^<>]*">[^<>]*</a>_TEST_g' 
```

如果我在类似的东西上运行它

```
<div><a href="http://wwww.google.com">A google link</a></div>
<div><a href="http://wwww.google.com">A google link</a></div> 
```

我明白了

```
<div>TEST</div>
<div>TEST</div> 
```

我怎样才能摆脱其他一切而只打印匹配项？我更喜欢的最终结果是：

```
<a href="http://wwww.google.com">A google link</a>
<a href="http://wwww.google.com">A google link</a> 
```

PS。我知道我的正则表达式不是最灵活的，但对于我的意图来说已经足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T23:49:27.047

匹配整行，将有趣的部分放在一个组中，替换为组的内容。使用`-n`选项来抑制不匹配的行，并添加`p`修饰符以打印`s`命令的结果。

```
sed -n -e 's!^.*\(<[Aa] [^<>]*>.*</[Aa]>\).*$!\1!p' 
```

请注意，如果该行有多个链接，则仅打印最后一个链接。您可以对此进行改进，但它超越了简单的 sed 用法。最简单的方法是使用两个步骤：首先在任意两个链接之前插入换行符，然后提取链接。

```
sed -n -e 's!</a>!&\n!p' | sed -n -e 's!^.*\(<[Aa] [^<>]*>.*</[Aa]>\).*$!\1!p' 
```

这仍然不能处理 HTML 注释、`<pre>`分布在多行的链接等。解析 HTML 时，请[使用 HTML 解析器](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:42:42.913

假设每行只有一个超链接，则以下可能有效...

```
  sed -e 's_.*<a href=_<a href=_' -e 's_>.*_>ed <<'EOF'
 -e 's_.*<a href=_<a href=_' -e 's_>.*_>_'
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T23:56:23.430

如果您不介意使用像 sed 这样的 perl，它可以使用非常多样化的输入进行复制：

```
  perl -n -e 's+(<a href=.*?</a>)+ print $1, "\n" +eg;'
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T07:24:28.263

这可能对您有用（GNU sed）：

```
sed '/<a href\>/!d;s//\n&/;s/[^\n]*\n//;:a;$!{/>/!{N;ba}};y/\n/ /;s//&\n/;P;D' file 
```

# php - 如何在 php 应用程序的 webroot 之外存储数据库信息将提高安全性

> ID：12126482
> 
> 赞同：1
> 
> 时间：2012-08-25T23:29:53.060
> 
> 标签：php, mysql, database, security

我见过许多最近的 php 脚本开源应用程序（论坛、cms 等），它们的数据库信息存储在一个单独的 php 文件中，但（不幸的是）在 webroot 中。现在我要选择要使用什么脚本，因此需要知道这种忽视将如何影响我的数据库的安全性？事实上，我不知道通过将 dbconfig.php 移动到单独的目录，我们可以提高多少，以及通过什么方式来提高 d 的安全性？

我也已经看过这个线程：[如何在 PHP 中保护数据库密码？](https://stackoverflow.com/questions/97984/how-to-secure-database-passwords-in-php)

好的，刚才我发现这个线程[mysql/php 这是连接到 mysql DB 的一种安全方式，](https://stackoverflow.com/questions/11181675/mysql-php-is-this-a-secure-way-to-connect-to-mysql-db)并且想让我的问题更加清楚：这些地方中的哪一个更安全地保存我的 dbconfig.php，为什么？

```
 1./dbconfig.php 
 2./public_html/dbconfig.php
 3./public_html/includes/dbconfig.php 
```

假设文件索引文件位于此处（我猜被称为webroot）：

```
/public_html/index.php ( which first needs to include the dbconfig.php) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T03:35:20.253

> 事实上，我不知道通过将 dbconfig.php 移动到单独的目录，我们可以提高多少，以及通过什么方式来提高 d 的安全性？

您有两个提高安全性的基本工具。把事情简化一点。. .

1.  地点。将其移出网络根目录会使其他人更难访问。如果他们通过 http 进入您的服务器，他们可能无法访问 Web 根目录下的任何内容。（但如果他们对你的帐户有 shell 访问权限，你就输了。安全的 shell 和好的密码是你的朋友。）
2.  权限。该文件应具有尽可能严格的权限。就我而言，除了所有者之外，任何人都无法阅读。（`chmod 600`例如。）

# php - Ajax 注释调用 json 成函数

> ID：12126485
> 
> 赞同：0
> 
> 时间：2012-08-25T23:30:22.690
> 
> 标签：php, javascript, jquery, html, ajax

我正在处理 ajax 评论，想知道如何使用下面的代码从 comment_add.php 页面获取项目，然后我可以将其插入到 obj.innerHTML 中。

```
function addcomment(streamid,content,containerid,posterid,postername,postid){
var obj = document.getElementById(containerid);
$.post("../comment_add.php", { streamid: streamid,content:content} );
obj.innerHTML = obj.innerHTML + "<div class='stream_comment'><table width='100%'><tbody><tr><td valign='top' width='30px'><img style='border:none;padding:0px;height:30px;width:30px;border-radius:0px;' src='imgs/cropped"+posterid+".jpg' onerror='this.src=&quot;img/no_profile_img.jpeg&quot;;'></td><td valign='top' align='left'><a href='profile.php?username="+posterid+"'>"+postername+" </a>"+content+"</td></tr></tbody></table></div>"; 
```

COMMENT_ADD.PHP

```
 <?php
    session_start();
    require"include/load.php";

    if(isset($_POST['streamid'])&isset($_POST['content'])){

    user_core::add_comment($_POST['streamid'],$_POST['content']);

    }

    $json = array();
    $check = "SELECT comment_id,comment_streamitem, comment_content FROM streamdata_comments";
    $check1 = mysqli_query($mysqli,$check);
    $resultArr = mysqli_fetch_array($check1);
    $json['comment_id'] = $resultArr['comment_id'];
    $json['comment_streamitem'] = $resultArr['comment_streamitem'];
    mysqli_free_result($check1);

    $check = "SELECT * FROM users WHERE id=".$_SESSION['id']."";
    $check1 = mysqli_query($mysqli,$check);
    $resultArr = mysqli_fetch_array($check1);
    $json['username'] = $resultArr['username'];
    $json['id'] = $resultArr['id'];
    $json['first'] = $resultArr['first'];
    $json['middle'] = $resultArr['middle'];
    $json['last'] = $resultArr['last'];
    mysqli_free_result($check1);

    echo json_encode($json);

    ?> 
```

我确实尝试使用此代码。然而，每次我发表评论时，它只会将其添加到流中的第一个帖子中，因为顶级功能没有，它会将其添加到用户评论的状态中。

```
<script>
$(document).ready(function(){
$("form#mycommentform").submit(function(event) {
event.preventDefault();
var streamid = $("#streamid").val();
var content = $(this).children('#content').val();

$.ajax({
type: "POST",
url: "comment_add.php",
cache: false,
dataType: "json",
data: { 'streamid': streamid, 'content': content}, 
success: function(html){  
$("#commentaddid").html("<div class='stream_comment_holder' id='comment_holder_"+html['comment_streamitem']+"'><div id='comment_list_"+html['comment_streamitem']+"'><div class='stream_comment' id='comment_"+html['comment_id']+"'>div class='stream_comment_holder' id= style='display:;'><div class='stream_comment'><table width='100%'><tbody><tr><td valign='top' width='30px'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+html['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></td><td valign='top' align='left'><a href='profile.php?username="+html['username']+"'>"+html['first']+" </a>"+html['comment_content']+"</td></tr></tbody></table></div></div></div></div>");
}
});
return false
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T03:15:22.740

看起来 top 函数被传递了一个`containerId`它用来知道在哪里放置评论的函数。但是，较低的 ajax 版本总是将注释放入`#commentaddid`. 目前尚不清楚您希望评论出现在 DOM 中的哪个位置，但无论它在哪里，您都需要将`#commentaddid`选择器替换为它的选择器。

# php - PHP从paypal响应中插入mysql数组

> ID：12126486
> 
> 赞同：0
> 
> 时间：2012-08-25T23:30:24.373
> 
> 标签：php, database, insert, paypal

我正在尝试获取`PayPal`帐户的交易详细信息，我成功地这样做了，但是我得到了这么长（我假设是一个数组），我需要将详细信息插入`MySQL`数据库。我尝试了几种`foreach`方法，但显然我做错了什么。

这是`PayPal`请求成功后的响应（存储为`$httpParsedResponse`）

```
TransactionSearch Completed Successfully: Array (
    [L_TIMESTAMP0] => 2012%2d08%2d14T18%3a46%3a00Z 
    [L_TIMESTAMP1] => 2012%2d08%2d14T18%3a45%3a32Z 
    [L_TIMESTAMP2] => 2012%2d08%2d13T01%3a45%3a48Z 
    [L_TIMESTAMP3] => 2012%2d08%2d13T01%3a34%3a12Z 
    [L_TIMEZONE0] => GMT 
    [L_TIMEZONE1] => GMT 
    [L_TIMEZONE2] => GMT 
    [L_TIMEZONE3] => GMT 
    [L_TYPE0] => Payment 
    [L_TYPE1] => Payment 
    [L_TYPE2] => Payment 
    [L_TYPE3] => Transfer 
    [L_EMAIL0] => pmd_1333866_per%40yahoo%2ecom 
    [L_EMAIL1] => pmd_1333866_per%40yahoo%2ecom 
    [L_EMAIL2] => pmd_1333866_per%40yahoo%2ecom 
    [L_NAME0] => Joshua%20O 
    [L_NAME1] => Joshua%20O 
    [L_NAME2] => Joshua%20O 
    [L_NAME3] => PayPal 
    [L_TRANSACTIONID0] => 58289472YK615973G 
    [L_TRANSACTIONID1] => 4U113116FL1819900 
    [L_TRANSACTIONID2] => 2X978155KR373471P 
    [L_TRANSACTIONID3] => 3TH38971MF599302V 
    [L_STATUS0] => Completed 
    [L_STATUS1] => Completed 
    [L_STATUS2] => Completed 
    [L_STATUS3] => Completed 
    [L_AMT0] => %2d100%2e00 
    [L_AMT1] => %2d50%2e00 
    [L_AMT2] => %2d200%2e00 
    [L_AMT3] => 2000%2e00 
    [L_CURRENCYCODE0] => USD 
    [L_CURRENCYCODE1] => USD 
    [L_CURRENCYCODE2] => USD 
    [L_CURRENCYCODE3] => USD 
    [L_FEEAMT0] => 0%2e00 
    [L_FEEAMT1] => 0%2e00 
    [L_FEEAMT2] => 0%2e00 
    [L_FEEAMT3] => 0%2e00 
    [L_NETAMT0] => %2d100%2e00 
    [L_NETAMT1] => %2d50%2e00 
    [L_NETAMT2] => %2d200%2e00 
    [L_NETAMT3] => 2000%2e00 
    [TIMESTAMP] => 2012%2d08%2d25T17%3a59%3a01Z 
    [CORRELATIONID] => bf5b1a824d937 
    [ACK] => Success 
    [VERSION] => 51%2e0 
    [BUILD] => 3435050
) 
```

显然，我猜该数组的结构为

```
 [L_TIMESTAMP0]
 [L_TIMESTAMP1]
 [L_TIMESTAMP2] 
```

并且对于每组有多少组交易细节，即时间戳，时区，类型，电子邮件等......

在这种情况下，有 3 组交易细节，但无论是只有 1 笔交易还是 100 笔交易，任何解决方案都需要能够遍历它。

就像我说的，这里唯一的目标是从 PayPal 获取这个返回的数组并插入 MySQL 数据库。

我希望这是有道理的，任何帮助都将不胜感激！谢谢！

对不起，我不得不编辑我的旧问题，因为我猜我是新手 - 无论如何，我认为你的代码有助于更好地组织它，这是我现在得到的回应......仍然对如何将其插入 mysql 感到困惑数据库...

```
Array ( [0] => Array ( [timestamp] => 2012%2d08%2d14T18%3a46%3a00Z 
[timezone] => GMT 
[type] => Payment 
[email] => pmd_1333866_per%40yahoo%2ecom 
[name] => Joshua%20O 
[transactionid] => 58289472YK615973G 
[status] => Completed 
[amt] => %2d100%2e00 
[feeamt] => 0%2e00 
[netamt] => %2d100%2e00 )

[1] => Array ( [timestamp] => 2012%2d08%2d14T18%3a45%3a32Z 
[timezone] => GMT 
[type] => Payment 
[email] => pmd_1333866_per%40yahoo%2ecom 
[name] => Joshua%20O 
[transactionid] => 4U113116FL1819900
[status] => Completed
[amt] => %2d50%2e00 
[feeamt] => 0%2e00 
[netamt] => %2d50%2e00 ) 

[2] => Array ( [timestamp] => 2012%2d08%2d13T01%3a45%3a48Z 
[timezone] => GMT 
[type] => Payment 
[email] => pmd_1333866_per%40yahoo%2ecom 
[name] => Joshua%20O 
[transactionid] => 2X978155KR373471P 
[status] => Completed 
[amt] => %2d200%2e00 
[feeamt] => 0%2e00 
[netamt] => %2d200%2e00 ) 

[3] => Array ( [timestamp] => 2012%2d08%2d13T01%3a34%3a12Z 
[timezone] => GMT 
[type] => Transfer 
[email] => 
[name] => PayPal 
[transactionid] => 3TH38971MF599302V 
[status] => Completed 
[amt] => 2000%2e00 
[feeamt] => 0%2e00 
[netamt] => 2000%2e00 ) ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:17:38.533

两个想法是：

`$numOfTransactions=intval((count($response)-5)/11);`

其中 5 是每个事务不重复的值的数量，11 是每个事务的值的数量。这取决于结构是否可靠。

或者

```
$numOfTransactions=0;
foreach ($response as $key=>$value){
 $check=strpos($key,'L_TIMESTAMP');
 if ($check===false) break;
 $numOfTransactions++;
} 
```

然后您可以遍历响应以构建数据

```
for ($i=0;$i<$numOfTransactions;$i++){
 $data[$i]=array("timestamp"=>$response['L_TIMESTAMP'.$i],"timezone"=>$response['L_TIMEZONE'.$i]...);
} 
```

# mysql - 插入延迟错误

> ID：12126490
> 
> 赞同：0
> 
> 时间：2012-08-25T23:31:06.573
> 
> 标签：mysql, insert, delay

我刚刚收到来自托管服务提供商的电子邮件，其中说明了以下内容：

由于 MySQL 使用率高，您的数据库已被阻止。这是由以下查询引起的：| 17649732 | 延迟 | 本地主机 | k* ***** *** | 延迟插入 | 22 | 等待插入 |

我试图查看这些数字和信息的含义，但我找不到任何有用的信息。我该如何解决这种性质的错误和/或我如何确定要在哪里解决错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:47:30.100

这基本上是由于服务提供商使用脚本来寻找攻击性的 mysql 行为。在这种情况下，该行来自进程列表。您发出了一个 INSERT DELAYED 语句，这会导致 mysql 创建一个“延迟插入线程”。这个线程将一直存在，直到 mysql 有理由杀死它。

行中的 22 表示线程处于“等待插入”状态 22 秒。我的猜测是，他们的脚本会查找运行时间超过 15 或 20 秒的查询，但他们仅每 10 秒左右检查一次，导致该数字不是偶数 10 或 5 秒。

无论如何，这条线永远不会出现在慢查询日志中。我会问提供商他们如何确定您过度使用 mysql，并可能将他们指向 mysql 文档以进行延迟插入。

也有可能您实际上正在发布大量延迟插入，而这恰好是他们捕获的时间。没有更多信息就无法知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:10:28.067

根据我配置的 MySQL 引擎，“违规”查询很可能被 MySQL 引擎分类为所谓的“慢查询”，并可能出现在“慢查询”日志中。

您需要与为您的站点提供服务的 MySQL 引擎配置人员交谈，以确定“慢查询”日志的状态，以便查看查询是否显示在日志中。

# iphone - 从动画 viewWillAppear 停止 transitionFormViewController

> ID：12126492
> 
> 赞同：3
> 
> 时间：2012-08-25T23:31:20.890
> 
> 标签：iphone, objective-c, ios

我正在尝试组合一个简单的容器视图控制器，它允许我从任何方向呈现子视图控制器（从右侧像标准导航控制器一样，也从顶部、底部和左侧放置。

为 iOS 5 开发时，我使用父/子视图控制器关系并使用带有自定义动画块的 transitionFromViewController 在视图中滑动。

所有消息（viewWillAppear 等）都正确传递给子视图控制器，但问题是例如`viewWillAppear`似乎是从动画循环内部调用的（即，当我设置动画属性时，如 backgroundColor 或子视图框架- 子视图控制器的视图，它们实际上是动画的）。我不想要这种行为，因为我想在显示视图控制器之前使用 viewWillAppear 方法来执行初始化。我不希望这段代码被动画化。

这是我的代码的简化版本：

```
@implementation ContainerViewController
@synthesize currentViewController;

- (void)viewDidLoad {
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor yellowColor];

    self.currentViewController = [[SimpleViewController alloc] init];
    [self addChildViewController:self.currentViewController];
    self.currentViewController.view.frame = self.view.bounds;
    [self.view addSubview:self.currentViewController.view];
}

- (void) slideViewController {
    UIViewController* previousViewController = self.currentViewController;

    UIViewController* viewController = [[SimpleViewController alloc] init];
    viewController.view.frame = CGRectOffset(self.view.bounds, self.view.bounds.size.width, 0);
    [self addChildViewController:viewController];
    [previousViewController willMoveToParentViewController:nil];

    [self transitionFromViewController:previousViewController toViewController:viewController duration:1.0 options:UIViewAnimationOptionTransitionNone animations:^{
        viewController.view.frame = self.view.bounds;
    } completion:^(BOOL finished) {
        [previousViewController removeFromParentViewController];
        [viewController didMoveToParentViewController:self];
    }];

    self.currentViewController = viewController;
}

- (void) loop {
    double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [self slideViewController];
        [self loop];
    });
}

- (void)viewDidAppear:(BOOL)animated {
    [self loop];
}

@end

@implementation SimpleViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor whiteColor];
}

- (void)viewWillAppear:(BOOL)animated {
    CGFloat red = (arc4random()%256)/255.0;
    CGFloat green = (arc4random()%256)/255.0;
    CGFloat blue = (arc4random()%256)/255.0;
    self.view.backgroundColor = [UIColor colorWithRed:red green:green blue:blue alpha:1];
}

@end 
```

如果您尝试运行此代码，您将看到一个新的视图控制器从右侧滑出。问题是该`backgroundColor`视图控制器的视图从白色变为随机颜色（参见`viewWillAppear`方法`SimpleViewController`）。我希望`backgroundColor`立即设置视图而不设置动​​画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:59:10.097

我找到了一种解决方法，通过禁用 viewWillAppear 方法中的属性动画（有关详细信息，请参阅[禁用 -[CALayer setNeedsDisplayInRect:]](https://stackoverflow.com/questions/2244147/disabling-implicit-animations-in-calayer-setneedsdisplayinrect)线程中的隐式动画）

代码可以包装在 CATransaction 中，以在没有动画的情况下提交更改。

```
- (void)viewWillAppear:(BOOL)animated {
    [CATransaction begin];
    [CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];

    CGFloat red = (arc4random()%256)/255.0;
    CGFloat green = (arc4random()%256)/255.0;
    CGFloat blue = (arc4random()%256)/255.0;

    self.view.backgroundColor = [UIColor colorWithRed:red green:green blue:blue alpha:1];

    [CATransaction commit];
} 
```

但是我想知道是否有其他人遇到过这个问题，是否有更好的方法来解决它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T02:07:40.950

在考虑了更多之后，我同意您的评论，最好将子控制器的所有逻辑保留在其类中。因此，在您的子控制器中覆盖 init（或者 viewDidLoad 可能会起作用），并在其中设置您想要的任何属性——这应该在您的动画发生之前进行设置。

# ios - 如何获取证书签名请求

> ID：12126496
> 
> 赞同：117
> 
> 时间：2012-08-25T23:32:10.973
> 
> 标签：ios, xcode, certificate, keychain, certificate-signing-request

如何获取证书签名请求？我要做的就是让我的应用程序在我的 ipod touch 上运行。这很容易，因为我可以去 IOS 开发门户并下载一个，不用大惊小怪。但是现在他们要我创建一个 CSR 来创建一个配置文件，我不知道怎么做。我已经在 Keychain Access 和在线文档中闲逛了两个小时，但我仍然完全迷失了方向。

我什至不知道为什么我现在需要一个，而我以前不需要。在我最近从 Snow Leopard 切换到 Mountain Lion 之前，我有一个配置文件，但现在它不会接受它。是的，我还在同一台电脑上。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-08-26T00:12:44.153

由于您安装了新的操作系统，您可能不再拥有以前用于将应用程序登录到 XCode 的私钥和公钥。你需要在你的机器上重新生成这些密钥，方法是撤销你以前的证书并在 iOS 开发门户上请求一个新的。作为该过程的一部分，您将被要求生成证书签名请求，这似乎是您遇到问题的地方。

您将在那里找到所需的一切，其中包括（来自官方文档）：

> 1.在 Mac 上打开 Keychain Access（位于应用程序/实用程序中）。
> 
> 2.打开首选项并单击证书。确保在线证书状态协议和证书吊销列表都设置为关闭。
> 
> 3\. 选择钥匙串访问 > 证书助手 > 向证书颁发机构请求证书。
> 
> 注意：如果您在执行此操作时选择了私钥，则不会接受 CSR。确保没有选择私钥。输入您的用户电子邮件地址和常用名称。使用您在 iOS 开发者计划中注册时使用的相同地址和名称。不需要 CA 电子邮件地址。
> 
> 4.选择“保存到磁盘”和“让我指定密钥对信息”选项，然后单击继续。
> 
> 5.指定文件名并单击保存。（确保将 .certSigningRequest 替换为 .csr）
> 
> 密钥大小选择 2048 位，算法选择 RSA。单击继续，证书助手会创建一个 CSR 并将文件保存到您指定的位置。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2017-08-04T10:20:43.260

按照以下步骤创建 CSR（代码签名身份）：

1.  在 Mac 上，转到文件夹“应用程序”►“实用程序”并打开“钥匙串访问”。

    ![在此处输入图像描述](../Images/5e8eb91015cb915cf0e791fee8476b61.png)

2.  转到“钥匙串访问”► 证书助手► 向证书颁发机构请求证书。￼</p>

    ![在此处输入图像描述](../Images/00322ffb25aa5fb768bd32fcb9c10ffa.png)

3.  填写下面指定的证书信息窗口中的信息，然后单击“继续”。
    • 在用户电子邮件地址字段中，输入用于识别此证书的电子邮件地址
    • 在通用名称字段中，输入您的姓名
    • 在请求组中，单击“保存到磁盘”选项 ￼</p>

    ![在此处输入图像描述](../Images/6bc27055a67ffd08de47379532106423.png)

4.  将文件保存到硬盘。

    ![在此处输入图像描述](../Images/ff8c7b0e7af59d8894844adf21a3cc06.png)

使用此 CSR (.certSigningRequest) 文件在 Apple 开发人员帐户中创建项目/应用程序证书和配置文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-12T11:09:49.637

要手动生成证书，您需要来自 Mac 的证书签名请求 (CSR) 文件。要创建 CSR 文件，请按照以下说明使用 Keychain Access 创建一个。

创建 CSR 文件。在 Mac 上的 Applications 文件夹中，打开 Utilities 文件夹并启动 Keychain Access。

在 Keychain Access 下拉菜单中，选择 Keychain Access > Certificate Assistant > Request a Certificate from a Certificate Authority。

在“证书信息”窗口中，输入以下信息： 在“用户电子邮件地址”字段中，输入您的电子邮件地址。在 Common Name 字段中，为您的私钥创建一个名称（例如，John Doe Dev Key）。CA 电子邮件地址字段应留空。在“请求是”组中，选择“保存到磁盘”选项。单击 Keychain Access 中的 Continue 以完成 CSR 生成过程。

# javascript - 带有输入值的内部 HTML

> ID：12126497
> 
> 赞同：4
> 
> 时间：2012-08-25T23:32:15.183
> 
> 标签：javascript, jquery, user-input, innerhtml

有一个关于 innerHTML 和已输入的输入值的简短问题。请参阅下面的简短示例（为方便起见，使用 jQuery）：

[http://jsfiddle.net/F7urT/2/](http://jsfiddle.net/F7urT/2/)

**jQuery：**

```
jQuery(document).ready(function($) {
    $('.send').click(function() {
        alert( $('.content').html() );
        return false;
    });
});​ 
```

**html:**

```
<div class="content">
    <input type="text" name="input" value="Old Value" />
    <input type="button" class="send" value="Send" />
</div>​ 
```

如果您编辑输入值，然后单击“发送”按钮，则警报显示获取的 innerHTML 包含具有“旧值”的输入，而不是用户输入的值。为什么是这样？我们如何才能将 HTML 作为字符串与用户输入的输入值一起获取？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T23:38:29.587

新值存储为属性而不是属性，值可以通过 获取`inputelement.value`，修改值不影响属性。如果您想要具有新值的 html，只需将属性设置为新值。

为复选框和单选按钮设置选中属性，为文本区域设置innerHTML，为选择设置选项上的选定属性

[http://jsfiddle.net/mowglisanu/F7urT/5/](http://jsfiddle.net/mowglisanu/F7urT/5/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-27T10:32:53.900

这个解决方案更好。适用于更多输入。

```
 $('input[type=text]').attr('value', function (i, val) { return val; });
  $('input[type=checkbox],input[type=radio]').attr('checked', function () { return this.checked; });
  $('textarea').html(function () { return this.value; });
  $('select').find(':selected').attr('selected', 'selected'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T23:37:36.477

你不能用`.innerHTML`( `.html()`) 得到它。写入一个*element 不会修改 html 标记，也不会更改`value`实际标记中的属性。*

 *您只能通过直接询问*元素为其`.value`- 值。使用 jQuery，你也可以通过它来做到这`.val()`一点。*

 ** * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-25T23:38:15.420

`$('#input_id').attr('value',$('#input_id').val());`
将值放入 html

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-08T12:53:02.700

DanCZ 和 Musa 解决方案效果很好，但我在 textarea 上遇到了麻烦。

我必须在 Typescript 项目中实现这一点，我发现让 textarea 显示值的唯一方法是：

```
textarea.innerHTML = textarea.value; 
```**

# php - Wordpress 主题选项不断消失

> ID：12126499
> 
> 赞同：1
> 
> 时间：2012-08-25T23:32:54.827
> 
> 标签：php, mysql, wordpress

我想这更像是一种`has this happened to you and have you fixed it?`问题。我制作了一个客户 wordpress 主题，直到今天一切都很好。我的主题选项消失了。它们存储在数据库中的序列化数组中，行和序列化数组仍然存在，但不再调用保存的值。

你遇到过这个吗？

# android - 让 Activity 始终保持其状态

> ID：12126500
> 
> 赞同：0
> 
> 时间：2012-08-25T23:33:01.147
> 
> 标签：android

我正在开发一个 android 应用程序，用户将在其中浏览不同的活动。我有一个 RecentActivity.java 类，它将显示一个空的列表视图，每次用户输入其他活动时，我都会将每个活动添加到 RecentActivity.java 的列表视图中。但是当我退出应用程序并打开其他应用程序时，RecentActivity 会丢失存储在列表视图中的内容，所以我想一直保留它的数据。谢谢，我会很感激你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:42:57.350

你可以创建一个 SQLite 数据库来存储你的浏览历史，这里有一个 SQLite 在 Android 中的使用教程： [Android SQLite 教程](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T02:51:19.173

有许多不同的[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)，但使用哪种取决于您存储的内容。

“状态”相当模糊，如果您存储原始数据，您可以使用共享首选项

如果您想存储类但不需要查询功能（GSON 库使其在大多数情况下非常易于使用），您可以使用 JSON 格式和类似[GSON](http://code.google.com/p/google-gson/)库的东西，然后将结果写入外部或内部存储（向上给你）

在我看来，SQLite 对于简单的状态存储来说太过分了，但又不能完全确定您要存储什么或如何尝试检索它。

# objective-c - 检查 GKScore 实例是否具有上下文属性

> ID：12126501
> 
> 赞同：1
> 
> 时间：2012-08-25T23:33:06.457
> 
> 标签：objective-c, ios, game-center

对于我的游戏的在线模式，我使用 的`context`属性`GKScore`，并且由于所有支持 Game Center 的设备都可以更新到 iOS 5（`context`添加属性时），我要求该`context`属性可以在线玩。但是，我在实现此运行时检查时遇到问题。我假设我可以`[GKScore instancesRespondToSelector:@selector(setContext:)]`用来检查它的存在，但这在 iOS 5 和 5.1 模拟器以及 for `@selector(context)`. 为什么会发生这种情况，请问执行此检查的最干净和正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T12:49:21.813

这看起来像是 GK 实现中的一个错误。

考虑以下代码...

```
// Get the C-functions that are really called when the selector message is sent...
typedef BOOL (*XX)(id, SEL, SEL);
XX classImpNSObject = (XX)[NSObject
    methodForSelector:@selector(instancesRespondToSelector:)];
XX classImpGKScore = (XX)[GKScore
    methodForSelector:@selector(instancesRespondToSelector:)];
XX instImpNSObject = (XX)[NSObject
    instanceMethodForSelector:@selector(respondsToSelector:)];
XX instImpGKScore = (XX)[GKScore
    instanceMethodForSelector:@selector(respondsToSelector:)];

// See that the same C function is called for both of these...
NSLog(@"instancesRespondToSelector: %p, %p", classImpNSObject, classImpGKScore);

// But, different functions are called for these...
NSLog(@"respondsToSelector: %p, %p", instImpNSObject, instImpGKScore);

// Invoke to C-Functions for instancesRespondToSelector:
NSLog(@"NSObject instancesRespondToSelector: context: %s",
    classImpNSObject(
        [NSObject class],
        @selector(instancesRespondToSelector:),
        @selector(context))
    ? "YES" : "NO");
NSLog(@"GKScore instancesRespondToSelector: context: %s",
    classImpGKScore(
        [GKScore class],
        @selector(instancesRespondToSelector:),
        @selector(context))
    ? "YES" : "NO");

// Invoke the C functions for respondsToSelector:
GKScore *gkScore = [[GKScore alloc] init];
NSLog(@"NSObject respondsToSelector: context: %s",
    instImpNSObject(
        gkScore,
        @selector(respondsToSelector:),
        @selector(context))
    ? "YES" : "NO");
NSLog(@"GKScore respondsToSelector: context: %s",
    instImpGKScore(
        gkScore,
        @selector(respondsToSelector:),
        @selector(context))
    ? "YES" : "NO"); 
```

基本上，我们只是提取了响应这些消息时调用的 C 函数。

如您所见，NSObject 和 GKScore 使用完全相同的 C 函数实现`instancesRespondToSelector:`。但是，它们对`respondsToSelector:`. 这意味着用自己的实现`GKScore`覆盖`respondsToSelector:`（但不覆盖`instancesRespondToSelector`.

如果将相同的`GKScore`实例发送到不同的 C 实现，则`respondsToSelector:`某些选择器会得到不同的结果（显然，或者没有理由提供子类实现）。

看起来他们为一些特殊属性做了一些时髦的事情，并提供了一个覆盖`respondsToSelector:`来处理特殊情况，但忘记了确保 `instancesRespondToSelector:`做正确的事情。

如果您想浏览汇编代码，请设置断点，我相信您可以看到差异。

我没有那样做。

我个人的好奇心只会带我走这么远:-)

对于您的情况，尝试检测代码中的方法实现，我建议创建一个临时`GKScore`对象来进行测试，缓存该结果并释放临时对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:24:05.467

如果您专门寻找属性的存在，您应该使用 Objective-C 运行时函数：

```
class_getProperty(Class cls, const char *name) 
```

要使用它，您必须导入：

```
#import <objc/runtime.h> 
```

作为一个小测试示例，以下是测试特定属性是否存在的方法：

```
#import <objc/runtime.h>

//...

objc_property_t realP = class_getProperty([GKScore class], "context");
objc_property_t fakeP = class_getProperty([GKScore class], "fakeContext");

if (realP) {
    NSLog(@"context exists");
}
if (!fakeP) {
    NSLog(@"fakeContext does not exist");
}
// Both statements will log correctly. 
```

至于为什么 GKScore 实例似乎没有响应正确的选择器，我的想法是可能会声明上下文属性，`@dynamic`因此 会返回（请参阅[此问题](https://stackoverflow.com/questions/9003690/objective-c-respondstoselector-for-dynamic-properties "这个问题")）。不知道内部细节，这就是我所能建议的，但如果你只是想测试一个属性的存在，上面的示例代码就可以了。`+instancesRespondToSelector:``-respondsToSelector:``NO`

顺便说一句，如果您不希望在 Objective-C 运行时中包含浮动，您可能希望将此行为封装在一个类中或将其包装在选择器中，而不是一字不差地将其粘贴在某个地方。当然，这完全取决于你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T05:37:57.723

我无法完全解释这一点，但类的*实例化*对象`GKScore`将返回**YES**，`repondsToSelector(context)`即使类说它不会。如果没有其他解决方案有效，请构造一个`GKScore`对象来查询它。

* * *

我想知道是否`[[GKScore alloc] init]`实际上返回了一个类型不是`GKScore`. 这可能发生。

```
GKScore *instantiatedScore = [[GKScore alloc] init]; // Add autorelease if using manual reference counting.
NSString* className = NSStringFromClass([instantiatedScore class]);
NSLog(@"instantiatedScore class name = %@", className); 
```

但是，根据这个输出，它没有：

```
instantiatedScore class name = GKScore 
```

* * *

`GKSCore.h`我想知道头文件中的编译器指令是否会影响这一点。它定义了两个仅在 iOS 5.0 或更高版本中可用的属性：`context`和`shouldSetDefaultLeaderboard`. 也许那些编译器指令意味着该类不能保证它会支持这两个属性。

在这个假设下`[GKScore instancesRepondToSelector:@selector(category)]`应该返回**YES**，但`[GKScore instancesRepondToSelector:@selector(shouldSetDefaultLeaderboard)]`应该返回**NO**。

```
GKScore *instantiatedScore = [[GKScore alloc] init]; // Add autorelease if using manual reference counting.
NSLog(@"GKScore category = %d", [GKScore instancesRespondToSelector:@selector(category)]);
NSLog(@"instantiatedScore category = %d", [instantiatedScore respondsToSelector:@selector(category)]);

NSLog(@"GKScore context = %d", [GKScore instancesRespondToSelector:@selector(context)]);
NSLog(@"instantiatedScore context = %d", [instantiatedScore respondsToSelector:@selector(context)]);

NSLog(@"GKScore shouldSetDefaultLeaderboard = %d", [GKScore instancesRespondToSelector:@selector(shouldSetDefaultLeaderboard)]);
NSLog(@"instantiatedScore shouldSetDefaultLeaderboard = %d", [instantiatedScore respondsToSelector:@selector(shouldSetDefaultLeaderboard)]); 
```

但是，输出比这更奇怪：

```
GKScore category = 0
instantiatedScore category = 1
GKScore context = 0
instantiatedScore context = 1
GKScore shouldSetDefaultLeaderboard = 1
instantiatedScore shouldSetDefaultLeaderboard = 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T20:07:16.293

我也遇到过这个问题，但在我的情况下是*GKTurnBasedMatchParticipant*。我快速转储了将*#instancesRespondToSelector:*发送到此类的每个属性的结果。

结果如下：

```
1   playerID            false
2   lastTurnDate        false
3   status              true
4   matchOutcome        false
5   matchOutcomeString  true
6   isWinner            true
7   invitedBy           false
8   inviteMessage       false
9   internal            true 
```

注意有多少属性报告它们不能作为选择器发送。但是，还要注意一个额外的“内部”属性。现在看看查询这个内部对象是否会响应属性选择器的结果：

```
1   playerID            true
2   lastTurnDate        true
3   status              true
4   matchOutcome        true
5   matchOutcomeString  false
6   isWinner            false
7   invitedBy           true
8   inviteMessage       true
9   internal            false 
```

因此，许多缺失的属性都在这里。我想利用未记录的“内部”功能来解决明显的 Apple 错误并不是很安全，但知道它仍然很有趣。

编辑：经过一天的闲逛，我在这里发现了问题。这些流氓属性实际上被设置为转发方法以转发到“内部”对象。作为一个 ObjectiveC 菜鸟，我没有意识到这是一件完全可以接受的事情。

就我而言，我不只是试图检测对象是否响应选择器，而且我实际上也想调用它。因此，处理转发的一般解决方案是：

(a) 要检查响应的可用性，请使用 [instance #respondsToSelector: sel] 而不是 [[instance class] instanceRespondsToSelector: del]。

(b) 要调用可能会或可能不会被转发的方法，请执行以下操作：

```
NSMethodSignature *signature = [instance methodSignatureForSelector:sel];
if (!signature) {
    // It's possible this is a message forwarding selector, so try this before giving up.
    NSObject *fwd=[instance forwardingTargetForSelector:sel];
    if (fwd && (signature= [fwd methodSignatureForSelector:sel]))
        // Redirect to the forwarding target
        instance=fwd;
    else {
        // ERROR case - selector is really not supported
    }
}

NSInvocation *invocation=[NSInvocation invocationWithMethodSignature:signature];

// Proceed with invocation setup 
```

我希望这有助于防止其他人像我一样浪费时间。

# matlab - 将变量列表及其值从 Matlab 写入文本

> ID：12126502
> 
> 赞同：1
> 
> 时间：2012-08-25T23:33:08.087
> 
> 标签：matlab, file-io, formatting, string-formatting

我正在尝试将以下内容写入文件。

```
keys = {'one','two','three'}
values = [1 2 3] 
```

到目前为止，这是我的代码：

```
function save_recording_results(keys,values)
    keys=keys.';
    fid = fopen('hoping', 'wt');
    fprintf(fid, '%s : %f\n', keys{:},values);
    fclose(fid);
end 
```

我的输出是这样的：

```
one : 116.000000 
wo : 116.000000
hree : 1.000000
: 
```

我希望它看起来像这样：

```
one : 1
two : 2
three : 3 
```

我不确定我做错了什么。为什么它会删除第一个字符？即使第一个字符不是“t”，也会发生这种情况。我收集到它正在做的是在冒号后面的第 n 个变量的行上打印第 (n+1) 个变量的第一个字母。（T 在 ASCII 中是 116。）但是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:03:52.127

发生的事情是，当您`keys{:}`返回一个 cs-list 时。基本上你正在做的是这个

`printf ('%s : %f\n', 'one', 'two', 'three', [1 2 3]);`

尝试键入 keys{:} 以了解我所说的 cs-list（逗号分隔列表）的含义。

因此，在解释您的格式时，它第一次需要一个字符串 (%s) 并且它工作正常，因为它找到了“一个”。第二次需要一个浮动 (%f) 但得到一个字符串 ("two")。所以将它转换成一个向量`double ("two")`，它是`[116 119 111]`第一个用于浮动。然后它需要另一个字符串（第二行）。“t”是之前使用的（转换为浮动），所以它只有“wo”，它用于字符串。以此类推，以此类推，直到最后。

以下是如何正确执行此操作。您必须创建一个包含 2 列的新单元格数组。以下应该可以正常工作。

```
values = num2cell (values);
new    = {keys{:}; values{:}}
printf ('%s : %f\n', new{:}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:59:10.967

如果您不反对使用循环：

```
fid = fopen('hoping', 'wt');    
for a = 1:length(keys)
  fprintf (fid,'%s : %d\n', keys{a},values(a))
end
fclose(fid) 
```

# objective-c - 带有故事板的 UIView 的子类

> ID：12126508
> 
> 赞同：0
> 
> 时间：2012-08-25T23:34:09.350
> 
> 标签：objective-c, xcode

如果你想在子视图中显示一些 UIViews 作为内容，你可以为 UIViews 创建类并为它们添加一个 XIB。然后这些 UIView 可以显示在 UIViewController 的子视图中。但是使用情节提要，如何为 UIView 设置一个界面以用作子视图，而不是在 UIViewController 中制作它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:45:04.557

The short answer is, you don't. If your views are completely re-usable and can be fully de-coupled from any View Controller, feel free to continue using .xib files for these.

Storyboards are intended to architect and document the UI at the level of "hierarchies of views", each hierarchy is managed by a view controller. Xib files are still be right place to construct (graphically) "satellite" views which do not belong to a particular view hierarchy.

# testing - 使用 Jasmine 和 Sinon 测试主干模型 - Object # has no method 'spy' I am trying to learn how to use Jasmine and Sinon for testing a Backbone application, and I was following 问问题

> ID：12126512
> 
> 赞同：1
> 
> 时间：2012-08-25T23:34:44.397
> 
> 标签：testing, backbone.js, jasmine, sinon

I am trying to learn how to use Jasmine and Sinon for testing a Backbone application, and I was following [this tutorial](http://tinnedfruit.com/2011/03/25/testing-backbone-apps-with-jasmine-sinon-2.html). Nevertheless, I ran into a problem that I don't know how to solve.

Most likely the solution is simple, but I need some guidance ...

In my project.spec.js file this is the code that is giving the problem:

```
it("should not save when name is empty", function() {
    var eventSpy = sinon.spy();
    this.project.bind("error", eventSpy);
    this.project.save({"name": ""});
    expect(this.eventSpy.calledOnce).toBeTruthy();
    expect(this.eventSpy.calledWith(
      this.project, 
      "cannot have an empty name"
    )).toBeTruthy();
}); 
```

And this is the specific error that can be seen in the browser:

```
Failing 1 spec
7 specs | 1 failing
Project model should not save when name is empty.
TypeError: Object #<Object> has no method 'spy'
TypeError: Object #<Object> has no method 'spy'
    at null.<anonymous> (http://localhost:8888/__spec__/models/project.spec.js:53:26)
    at jasmine.Block.execute (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:1024:15)
    at jasmine.Queue.next_ (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:2025:31)
    at jasmine.Queue.start (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:1978:8)
    at jasmine.Spec.execute (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:2305:14)
    at jasmine.Queue.next_ (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:2025:31)
    at onComplete (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:2021:18)
    at jasmine.Suite.finish (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:2407:5)
    at null.onComplete (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:2451:10)
    at jasmine.Queue.next_ (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:2035:14) 
```

In addition to the sinon.js library, I have installed the jasmine-sinon.js library (both are in the vendor/assets/javascripts folder and are included in the application.js file).

Thank you, Alexandra

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T08:23:08.197

当我从 GitHub 下载 sinon.js 文件（没有 Sinon 文件夹）时，我遇到了这个问题。[我通过从http://sinonjs.org/](http://sinonjs.org/)下载库解决了这个问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T01:00:00.700

我将根据上面的评论线程将此作为答案发布。我们已经将问题缩小到`sinon.spy()`被调用的行，所以它不是特定于这个测试，而是如何加载 sinon。

我怀疑问题是你在 application.js 中包含了 sinon 和 jasmine-sinon，而它们真的应该放在 spec/javascripts/spec.js 中（格式相同）。尝试改变它，看看是否有任何改变。

更新：

根据下面的评论线程，似乎代码已到达该`this.project.save(...)`行，但验证不起作用：我知道这一点，因为如果您在控制台中收到 POST 错误，这意味着主干实际上发出了请求（它不应该有，因为名称为空）。所以你应该回去检查你实际测试的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T21:29:40.707

我知道这个线程很旧，但是我今天在阅读本教程时遇到了类似的问题[http://tinnedfruit.com/2011/03/25/testing-backbone-apps-with-jasmine-sinon-2.html](http://tinnedfruit.com/2011/03/25/testing-backbone-apps-with-jasmine-sinon-2.html) . 看起来 Backbone 进行了更改，并在提供无效模型数据时调用“无效”事件，而不是“错误”。

如果您遇到此错误，请尝试更改：

```
it("should not save when name is empty", function() {
    ...
    this.project.bind("error", eventSpy);
    ...
}); 
```

至：

```
it("should not save when name is empty", function() {
    ...        
    this.project.bind("invalid", eventSpy);
    ...
}); 
```

这为我解决了这个问题。

# java - GWTP 与 GWT MVP 和活动/地点的关系

> ID：12126516
> 
> 赞同：1
> 
> 时间：2012-08-25T23:35:44.563
> 
> 标签：java, gwt, mvp, gwtp, gwt-activities

我*对 GWT 的理解*是，它首次发布时带有活动和地点的概念，以支持 UI 作为状态机的想法，其中每个状态都是 UI 的可预订配置。

我的*理解*是，GWT 后来发布了他们的建议，以使用 MVP 架构模式构建 GWT 应用程序，以便更好地分离关注点并更轻松地进行单元测试。

但是，当您下载示例应用程序并真正查看源代码时，尽管这两种想法都促进了具有`client`和包结构`server`，`shared`但它们的内部工作基于不同的概念和不同的核心类型。基本上，您似乎必须在其中一个或另一个之间做出选择（**这是真的吗？**）。

现在我看到了 GWTP（GWT 平台）。这*看起来*像是活动/地点范式以及 MVP 设计的坚实融合。所以我问：如果我选择使用 GWTP，在活动/地点或 MVP 领域下有什么我会错过的吗？换句话说，通过使用 GWTP，我是否会限制自己并被禁止使用前两项的任何最佳实践或组件？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T10:52:26.047

Google 首先提出了 MVP 模式来简化测试（AFAIK 在开发 Google Wave 时），并在 Google I/O [2009](http://www.google.com/events/io/2009/sessions/GoogleWebToolkitBestPractices.html)和[2010](http://www.google.com/events/io/2010/sessions/gwt-continuous-build-testing.html)上讨论了它。

同时（实际上，谁知道呢？在 Ray Ryan 的演讲之前它是 Google 内部的），他们提出了*地方*的概念，作为在应用程序内导航的一种类型安全、面向对象的方式，作为浏览器历史记录 ( `com.google.gwt.user.client.History`)。它只是在 2009 年的演讲结束时以*地点服务*的形式快速提及。

后来，他们提出了活动的概念（部分灵感来自 Android 自己的活动 AFAICT），并在 GWT 2.1（其第一个里程碑于 2010 年 7 月发布）中实现了它。

这两个概念一起使用，并在 GWT SDK的*移动 Web 应用程序示例中得到了最好的演示。*

至于 GWTP，它建立在 Ray Ryan 2009 年的演讲（导航*场所*的概念和 MVP）之上，根本不使用活动和场所 API（GWTP 早于它们）。查看[http://code.google.com/p/gwt-platform/wiki/ComparisonWithGwtMVP](http://code.google.com/p/gwt-platform/wiki/ComparisonWithGwtMVP)比较 GWTP 与 GWT 的活动和地点（最初被错误地宣传为关于 MVP）。

# asp.net - 在 Microsoft Windows Azure 上设置网站的默认网页

> ID：12126518
> 
> 赞同：6
> 
> 时间：2012-08-25T23:35:56.280
> 
> 标签：asp.net, vb.net, azure, hosting

我最近在 azurewebsites.net 上建立了一个网站。

但是当我转到网址 http:/website.azurewebsites.net/ 时，它不会加载。

但是当我去 http:/website.azurewebsites.net/home.aspx 它加载。

我想要的是，如果用户访问 http:/website.azurewebsites.net/ 它会加载 home.aspx 内容或被重定向到 http:/website.azurewebsites.net/home.aspx

这不起作用

```
 <system.webServer>
   <defaultDocument>
     <files>
       <clear />
       <add value="Default.aspx" />
     </files>
   </defaultDocument>
  </system.webServer> 
```

抱歉，这里的实际链接[http://rathgarfantasyhockey.azurewebsites.net/default.aspx](http://rathgarfantasyhockey.azurewebsites.net/default.aspx)可以正常工作，但是当您转到[http://rathgarfantasyhockey.azurewebsites.net](http://rathgarfantasyhockey.azurewebsites.net)`The resource cannot be found`时，会显示HTTP 错误 404 。

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-08T08:40:49.187

如果您使用的是 MVC 或 Web API，请在 RegisterRoutes() 中添加以下行：

```
 routes.IgnoreRoute(""); 
```

这解决了我的问题。希望它可以帮助你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T00:59:08.127

根据这篇博文：http: [//blogs.msdn.com/b/cesardelatorre/archive/2010/07/22/how-to-set-a-default-page-to-a-windows-azure-web-角色应用程序-silverlight-asp-net-etc.aspx](http://blogs.msdn.com/b/cesardelatorre/archive/2010/07/22/how-to-set-a-default-page-to-a-windows-azure-web-role-app-silverlight-asp-net-etc.aspx)

```
<defaultDocument> 
          <files>                           
             <clear/>                           
             <add value="Default.aspx"/>                      
          </files>
</defaultDocument> 
```

应该管用。或者您可以键入到 URL 映射它。为此，请查看[http://msdn.microsoft.com/en-us/library/cc668201.aspx](http://msdn.microsoft.com/en-us/library/cc668201.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T22:33:51.100

如果您的应用程序是 MVC 应用程序，它会查找默认控制器而不是默认页面。

所以你必须在 RouteConfig 中映射一个路由。就我而言，我想用 index.html 页面加载网站，所以我做了：

RouteConfig.cs 文件：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id =    UrlParameter.Optional }
        );
    } 
```

在我的 HomeController Index Action 中，编写以下代码：

```
public ActionResult Index()
    {
        return Redirect("/index.html");
    } 
```

这在带有共享站点的 Azure 中运行良好。我希望这能帮到您。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-25T23:42:02.433

你有错字吗？

你有：

```
<add value="Default.aspx" /> 
```

但是您说您的“主页”有效的是`/home.aspx`.

如果您想`/home.aspx`在用户访问时显示`http:/website.azurewebsites.net/`，那么我可以想出几种方法来实现这一点。

由于您拥有`Default.aspx`您的`defaultDocument`，因此您可以重命名`home.aspx`为`Default.aspx`，当有人访问 http:/website.azurewebsites.net/ 时，`Default.aspx`将显示 的内容。

如果您出于某种原因需要保持`home.aspx`命名为`home.aspx`，那么根据您的要求，如果您想`http:/website.azurewebsites.net/`重定向到然后在根目录中`/home.aspx`创建一个名为的文件并编辑它以包含. 此类页面的完整示例可在[http://msdn.microsoft.com/en-us/library/a8wa7sdt(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/a8wa7sdt(v=vs.80).aspx)获得。`Default.aspx``Response.Redirect("home.aspx", false);`

更新：

尝试添加`enabled="true"`到您的`defaultDocument`XML 标记。请参阅以下来自[http://www.iis.net/ConfigReference/system.webServer/defaultDocument的示例](http://www.iis.net/ConfigReference/system.webServer/defaultDocument)

```
 <system.webServer>
      <defaultDocument enabled="true">
         <files>
            <add value="home.html" />
         </files>
      </defaultDocument>
  </system.webServer> 
```

# c++ - OpenGL3 两组着色器，纹理显示为黑色

> ID：12126520
> 
> 赞同：0
> 
> 时间：2012-08-25T23:36:02.483
> 
> 标签：c++, opengl, opengl-3

我最近成功地使用 GL_TEXTURE_RECTANGLE 制作了一个小型测试应用程序。现在我正在尝试将它集成到我更大的项目中，但是当我在渲染函数中调用 glBindTexture(GL_TEXTURE_RECTANGLE, _tex_id[0]) 时，它会导致 GL_INVALID_OPERATION​ 错误。纹理图像有时会显示几分之一秒，然后变黑并保持黑色。

我试图通过使用两组顶点和片段着色器来做到这一点，一组用于 3D 场景，一组用于 2D 叠加，但我以前从未尝试过，所以我不知道这是否是导致错误，或者我应该以不同的方式解决这个问题。着色器都可以正常编译和链接。

任何见解都将不胜感激，如果有助于查看一些代码，请告诉我，我会发布其中的一些（尽管我认为任何人都可能无法合理地浏览它）。

**编辑：** gDEBugger 在调用 glBindTexture() 时中断，当单击断点时，属性窗口会显示我的其他纹理之一的图片（由 3D 场景的着色器加载的纹理），它表明它正在尝试加载纹理编号 1，但我知道该编号已被用于绘制属性窗口中显示的相同 3D 场景的纹理……为什么 glGenTextures() 会给我重叠的纹理 ID 编号？这是正常的还是问题的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T01:37:46.920

黑色纹理是由于我没有将一些顶点着色器输入（法线）转发到片段着色器，即使我没有对 2D 叠加着色器中的任何内容使用法线。当我为所有输入添加输出并将它们转发到片段着色器时，纹理不再是黑色的，但它仍然在几分之一秒后消失。这是因为我在渲染函数的末尾调用 glBindTexture(GL_TEXTURE_RECTANGLE, 0) 并希望它会清理一些状态......这显然是错误的做法，因为删除该调用会导致 2D 纹理留在屏幕上。此外，使用 GL_TEXTURE_RECTANGLE 目标调用 glBindTexture() 似乎在纹理设置阶段有效，但在渲染 GL_TEXTURE_RECTANGLE 目标期间导致 GL_INVALID_OPERATION 错误。仅在渲染函数中将目标更改为 GL_TEXTURE_2D 会使错误消失，现在一切似乎都运行良好。

# ruby-on-rails - 用于友好 URL 的 Rails 中的模型和控制器设计

> ID：12126523
> 
> 赞同：0
> 
> 时间：2012-08-25T23:36:21.147
> 
> 标签：ruby-on-rails, ruby, activerecord, friendly-id

rails新手的另一个问题。我在 rails 3.x 中使用 friendly_id gem 和 mysql

这是一个设计问题（在 Rails 中可能很容易）。我期待 Rails 专家的建议。我正在构建一个图书馆列表应用程序。用户可以在其中按“都会区”或“城市”查看图书馆。例如：

我希望有这样的网址：

www.list.com/library/san-francisco-bay-area

或者

www.list.com/library/san-francisco-bay-area/palo-alto/

在数据库中我有表：

```
library
-------
id, name, city_id, slug 
```

名字在这里打了，city_id 是 FK

```
city
----
city_id, name, metro_area_id, slug 
```

名称在这里被猛击，metro_area_id 是 FK

```
metro_area 
----------
metro_area_id, name, state, slug 
```

名字在这里被猛击

因此，当用户将浏览器指向 www.list.com/library/san-francisco-bay-area/palo-alto

我希望获得 san-francisco-bay-area/palo-alto 的图书馆列表。但是我的库表模型仅包含库名称的 slug。那么如何解析这个 URL 以找到可以在库模型和控制器中使用的 city_id 来获取列表。

请记住，我不能只依赖城市的名称。*我必须找到位于*地铁“旧金山湾区”的“帕洛阿尔托”的 city_id 。由于 metro_area 和 city 的 slug 在其他表中，所以设计模型和控制器的最佳方法是什么。

控制器的显示方法是：

```
def show
    @user = Library.find(params[:id])

    respond_to do |format|
       format.html # show.html.erb
       format.json { render json: @library }
    end
end 
```

模型是

```
class Library < ActiveRecord::Base
  attr_accessible :name, :city_id, :slug
  extend FriendlyId
  friendly_id :name, use: :slugged
end 
```

这不适用于我的友好 URL 要求。所以我会感谢专家的建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T04:26:58.467

也许您已经找到了解决方案，我也是 Rails 新手，所以我只是猜测这会奏效。

因为你想展示两种不同型号的蛞蝓。我假设显示 ID 的方式类似于

```
www.list.com/libraries/:id/cities/:id/metro_areas/:id 
```

这可以通过添加[嵌套资源来编辑路由文件来完成](http://guides.rubyonrails.org/routing.html#nested-resources)

至于只显示两个 id

```
www.list.com/library/:city_id/:metro_area_id 
```

Rails 指南将其称为[动态段](http://guides.rubyonrails.org/routing.html#dynamic-segments)

之后，只需将 id 转换为 slug 即可。

我还在针对您的案例的 FriendlyId 文档中找到了[这一点。](http://rubydoc.info/github/norman/friendly_id/master/file/Guide.rdoc#Routes_for_Scoped_Models)

希望能帮助到你

# php - PHP xml到html编码问题

> ID：12126528
> 
> 赞同：0
> 
> 时间：2012-08-25T23:37:35.000
> 
> 标签：php, xml, encoding, html-entities

我正在从 rss xml 抓取 rss 提要数据。一些字符串中有引号。在将字符串插入数据库之前，我正在通过 htmlentities() 运行字符串。然后，当我尝试在浏览器中显示相同的信息时，引号显示为“??”。字符在数据库中存储为“& acirc; ??s”（无空格）

我的页面的标题

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8"> 
```

我确定其他实体显示不正确。我应该如何去纠正这个？

带有“Agawi”引号的示例提要：http: [//feeds.feedburner.com/TechCrunch/gaming](http://feeds.feedburner.com/TechCrunch/gaming)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T01:01:24.537

如果您使用 PHP，此例程可能会很有用。

它在标准 get_html_translation_table() 中添加了通常 M$ Word 替换为键入文本的字符代码。
否则，这些字符将永远不会在 html 输出中正确显示，这是您的麻烦。

```
function get_html_translation_table_CP1252() {
    $trans = get_html_translation_table(HTML_ENTITIES);
    $trans[chr(130)] = '&sbquo;';    // Single Low-9 Quotation Mark
    $trans[chr(131)] = '&fnof;';    // Latin Small Letter F With Hook
    $trans[chr(132)] = '&bdquo;';    // Double Low-9 Quotation Mark
    $trans[chr(133)] = '&hellip;';    // Horizontal Ellipsis
    $trans[chr(134)] = '&dagger;';    // Dagger
    $trans[chr(135)] = '&Dagger;';    // Double Dagger
    $trans[chr(136)] = '&circ;';    // Modifier Letter Circumflex Accent
    $trans[chr(137)] = '&permil;';    // Per Mille Sign
    $trans[chr(138)] = '&Scaron;';    // Latin Capital Letter S With Caron
    $trans[chr(139)] = '&lsaquo;';    // Single Left-Pointing Angle Quotation Mark
    $trans[chr(140)] = '&OElig;    ';    // Latin Capital Ligature OE
    $trans[chr(145)] = '&lsquo;';    // Left Single Quotation Mark
    $trans[chr(146)] = '&rsquo;';    // Right Single Quotation Mark
    $trans[chr(147)] = '&ldquo;';    // Left Double Quotation Mark
    $trans[chr(148)] = '&rdquo;';    // Right Double Quotation Mark
    $trans[chr(149)] = '&bull;';    // Bullet
    $trans[chr(150)] = '&ndash;';    // En Dash
    $trans[chr(151)] = '&mdash;';    // Em Dash
    $trans[chr(152)] = '&tilde;';    // Small Tilde
    $trans[chr(153)] = '&trade;';    // Trade Mark Sign
    $trans[chr(154)] = '&scaron;';    // Latin Small Letter S With Caron
    $trans[chr(155)] = '&rsaquo;';    // Single Right-Pointing Angle Quotation Mark
    $trans[chr(156)] = '&oelig;';    // Latin Small Ligature OE
    $trans[chr(159)] = '&Yuml;';    // Latin Capital Letter Y With Diaeresis
    ksort($trans);
    return $trans;
}

$trans = get_html_translation_table_CP1252();
$feed = strtr($feed, $trans); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:43:33.150

# android - 实时共享对象，单一模式

> ID：12126534
> 
> 赞同：-1
> 
> 时间：2012-08-25T23:38:57.043
> 
> 标签：android

我根本没有找到在活动之间共享实时数据的解决方案。我的第一个活动接收实时对象（双精度型，随机数）。我想把这个数字传递给第二个活动。一切正常，只有第二个 Activity 只显示一次数据。我必须通过返回第一个活动来刷新活动，然后第二个活动才会显示最新数据。我实现了一个单格顿模式：

```
public class FirstActivity extends Activity{
 public double xAxis;
 public double yAxis;
 public static FirstView instance;

     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.device_view);

        handler = new Handler() {
                @Override
                public void handleMessage(Message msg) {
                    int data1 = msg.arg1;
                    xAxis = (double) data1;
                    dataX.setText(String.valueOf(xAxis));
                    int data2 = msg.arg2;
                    yAxis = (double) data2;
                    dataY.setText(String.valueOf(yAxis));

                }
            };
        secondview.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Intent nextScreen = new Intent(getApplicationContext(),
                            SecondActivity.class);
                    startActivity(nextScreen);
                }
            });

    }

     public static void initInstance(){
    if(instance == null)
    {
       instance = new FirstActivity();
    }
     }

    public static FirstActivity getInstance(){
        return instance;
    }
} 
```

第二视图类

```
public class SecondActivity extends Activity{
       private double valueX;
    private double valueY;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.linegraph); 
        valueX = FirstActivity.getInstance().xAxis;
        valueY = FirstActivity.getInstance().yAxis;
      }
} 
```

应用类

```
package com.bluetoothcomm;

import android.app.Application;

public class MyApplication extends Application {

    @Override
    public void onCreate(){
        super.onCreate();
        initSingeltons();
    }

    public void initSingeltons(){
        FirstActivity.initInstance();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:20:05.757

我发现了我的问题，解决方案是使用`Application`. 只有这个剂量不能解决我的问题。问题是静态变量实例`public static FirstView instance`绑定到类加载器，第一个初始化它的类。因此，当任何类中的静态变量已被 Activity 初始化时，当第二个 Activity 启动时，第一个 Activity 被销毁，这意味着静态变量也未初始化。这就是为什么 SecondActivity 没有获取最新数据或实时数据的原因，它只捕获静态常量数据。

我用 Singelton 和 Application 的组合稍微改变了我的代码，因为这样在激活 SecondActivity 时静态变量永远不会被取消初始化。但是我仍然得到相同的结果，当我切换到第二个活动时，静态变量实例未初始化。我做错了什么，有没有人看到。我添加了我的代码。

@Max Rasguido，@Orabig

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:54:34.247

You may implement a background service capable of providing the real time data to Activity1 and also to Activity2\. I am guessing that your problem ocurrs if you are passing data from Activity1 to Activity2 through an Intent with putExtras, on this way it will only do this at the moment you start Activity2.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T23:41:24.950

您应该使用意图过程。[文档](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T23:50:23.833

How is your data supposed to change when activity2 is shown, if you say that it's received by activity1 ?

However, I would use a preference, or an attribute of your application class (which is a singleton itself), but you give too little informations to fully understand your needs...

# jquery - JQuery Mobile 1.1.1 嵌套列表无法正确滚动

> ID：12126537
> 
> 赞同：1
> 
> 时间：2012-08-25T23:39:04.080
> 
> 标签：jquery, jquery-mobile, nested-lists

我正在动态构建一些嵌套列表。为了帮助您理解这里是一个抽象的例子。

要添加一个子类别，我会这样做：

```
obj.append('<ul id="' + id_ul + '"></ul>');
$("#" + id_ul).append('<li id="' + id + '"><h3>' + name + '</h3><p>' + text + '</p></li>');
$("#" + id_ul).append('<li id="' + id2 + '"><h3>' + name2 + '</h3><p>' + text2 + '</p></li>'); 
```

并在其中一个类别中添加一个项目，我这样做：

```
obj.append('<ul id="' + id_ul + '"></ul>');
$("#" + id_ul).append('<li id="' + id + '" data-icon="false"><a id="' + ida + '" href="#"><h3>' + name + '</h3><p>' + text + '</p><p class="ui-li-aside"><strong>' + info + '</strong></p></a></li>');
$("#" + id_ul).append('<li id="' + id2 + '" data-icon="false"><a id="' + ida2 + '" href="#"><h3>' + name2 + '</h3><p>' + text2 + '</p><p class="ui-li-aside"><strong>' + info2 + '</strong></p></a></li>'); 
```

obj 当然始终是我希望新的子类别或项目附加到的父对象。所以我通过附加到一个id来完成这一切。

我将此代码与版本 1.0.1 一起使用，它运行良好，现在我切换到 1.1.1（1.2.0 alpha 也有同样的问题），这是我的问题：

*   嵌套列表中只有类别的页面：工作正常
*   只有嵌套列表中的项目的页面：工作正常
*   嵌套列表中同时包含类别和项目的页面：**如果列表扩展了屏幕高度，则它不可滚动，并且在显示其中一个不可滚动页面后，我的导航中的所有其他页面也不再可滚动，直到我重新加载整个页面页**

嵌套列表视图和从 JQueryMobile 1.1.1 向上滚动是否有任何已知问题？还是我建立了错误的列表？

目前这让我发疯，所以任何想法都会受到高度赞赏！

编辑：

这是最终列表的示例 HTML，其中包含一个子目录和 2 个项目：

```
<div data-role="page" data-url="mylist&amp;ui-page=ul_4" data-theme="c" data-count-theme="c" tabindex="0" class="ui-page ui-body-c ui-page-active">

<div data-role="header" data-theme="c" class="ui-header ui-bar-c" role="banner">
        <div class="ui-title">myuppercat</div>
</div>

<div data-role="content" class="ui-content" role="main">
    <ul id="ul_4" class="ui-listview">
        <li id="li_2134" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-up-c">
            <div class="ui-btn-inner ui-li">
                <div class="ui-btn-text">
                    <a href="#mylist&amp;ui-page=ul_4" class="ui-link-inherit"><h3 class="ui-li-heading">mysubcat</h3><p class="ui-li-desc"></p></a>
                </div>
                <span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span>
            </div>
        </li>
        <li id="li_2136" data-icon="false" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li ui-btn-up-c">
            <div class="ui-btn-inner ui-li">
                <div class="ui-btn-text">
                    <a id="2136" href="#" onclick="javascript:dosomething(this)" class="ui-link-inherit"><p class="ui-li-aside ui-li-desc"><strong>somedetail</strong></p><h3 class="ui-li-heading">item1</h3><p class="ui-li-desc"></p></a>
                </div>
            </div>
        </li>
        <li id="li_2137" data-icon="false" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li ui-btn-up-c">
            <div class="ui-btn-inner ui-li">
                <div class="ui-btn-text">
                    <a id="2137" href="#" onclick="javascript:dosomething(this)" class="ui-link-inherit"><p class="ui-li-aside ui-li-desc"><strong>somedetail</strong></p><h3 class="ui-li-heading">item2</h3><p class="ui-li-desc"></p></a>
                </div>
            </div>
        </li>
    </ul>

</div> 
```

# entity-framework - 如何将表格添加到模型中？

> ID：12126549
> 
> 赞同：0
> 
> 时间：2012-08-25T23:42:33.060
> 
> 标签：entity-framework

我将新表添加到我的数据库中，并设法使用“从数据库更新模型”选项将其添加到我的数据模型中。但我无法生成类以在代码中访问此表。“添加代码生成项”导致为我的数据库中的所有表创建类。

嗯，好像是重复的，但是请不要立即删除这个话题，因为我已经搜索了很长时间的解决方案，但没有发现任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:34:00.330

如果您已经做过一次，则无需再次添加代码生成项。通常，保存您的 EDMX 文件就足够了，并且应该触发生成。如果由于任何原因不起作用，请右键单击*解决方案资源管理器*`.tt`中负责生成类的文件，然后从上下文菜单中选择*运行自定义工具。*

# python - Haystack中的可变长度针（Python）

> ID：12126552
> 
> 赞同：3
> 
> 时间：2012-08-25T23:42:53.747
> 
> 标签：python, pytest

我有一个旨在查找应用程序搜索功能中的错误的函数，它[从非控制 UTF-8 可能性生成一个可变长度的搜索字符串](https://gist.github.com/3173004)。在此函数上运行 pytest 迭代，提交用于搜索的随机 UTF-8 字符串大约每 500 次搜索生成一次调试错误。

由于我可以抓取导致错误的每个字符串，因此我想确定这些字符串中真正引起错误的字符的最小子系列是什么。换句话说，（在 pytest 循环内）：

```
def fumble_towards_ecstasy(string_that_breaks):
    # iterate over both length and content of the string
        nugget = # minimum series of characters that break the search
        return nugget 
```

我是否应该将字符串切成两半并削减每一边并重新提交直到它失败，从它的 (len() - 1) 中选择随机字符，然后如果没有发生错误则备份？蛮力组合？解决这个问题的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:48:59.733

如果存在导致失败的两个字符序列，并且该序列恰好位于中间，则将字符串分成两半将失败。每一半都成功，但组合字符串失败。

这是一种可以找到局部最小值的算法：

尝试依次删除每个字符。

*   如果删除字符仍然导致失败，请保留新的较短字符串并在此新字符串上重复算法。
*   如果删除字符不再导致失败，请将其放回并尝试删除下一个字符。继续前进，直到没有更多的角色可以尝试。当您到达字符串的末尾时，您知道删除任何一个字符都会导致搜索成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:54:11.290

我会使用“从双方削减”的方法。拆分字符串总是会冒着破坏导致错误的子字符串的风险。我的方法是：

1.  尽可能多地从字符串左侧弹出字符，同时仍确保字符串会导致错误。
2.  对右侧做同样的事情。
3.  理论上，您只剩下导致错误的最小子字符串。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T14:34:15.633

首先值得注意的是，解决方案可能不是唯一的，即可能存在*两个*或多个损坏的子串。

另一个建议（对 Xavier 和 Mark 的好答案）是运行递归方法。使用导致错误的有限字符串子集重复采样。一旦发现另一个错误，重复直到达到最小子字符串。这种方法足够强大，可以处理更复杂的用例，其中错误可能存在于两个不相邻的条目中。我认为这里不是这种情况，但是有一个通用的 purpopse 方法很好。

# php - 在Javascript中将日期输出为字符串

> ID：12126557
> 
> 赞同：1
> 
> 时间：2012-08-25T23:44:20.937
> 
> 标签：php, javascript, string, date, tostring

您能否建议如何`2012-08-11`在 JavaScript 中以字符串形式输出而不
将结果显示为整数，即`1993`。我曾尝试使用该`.toString()`功能，但这
不起作用 - 它仍然将其输出为 `1993`.
我正在`2012-08-11`通过 PHP 将日期解析为 JavaScript 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T23:50:51.523

```
<?php
$year  = 2008;
$month = 8;
$day   = 11; 

echo "<script>";
echo "alert( $year + '-' + $month + '-' + $day )";
echo "</script>";
?> 
```

[**演示**](http://codepad.viper-7.com/UgavXa)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T23:55:06.410

试试这个：

```
var d = new Date(),
    txt = d.getFullYear() + '-' + d.getMonth() + '-' + d.getDate();
alert(d.toUTCString());
alert(d.toDateString());
alert(txt); 
```

有关详细信息，请参阅[JavaScript 日期对象](http://www.w3schools.com/jsref/jsref_obj_date.asp "JavaScript 日期对象")

# magento - 从哪里开始编辑订单信息？

> ID：12126558
> 
> 赞同：0
> 
> 时间：2012-08-25T23:44:23.590
> 
> 标签：magento, magento-1.7

查看订单时，我想更改 Magento 中收货地址的显示方式。由于我不熟悉编辑adminhtml，也不熟悉Mage的核心，我想知道要参考哪个文件。我目前正在查看此文件中的详细信息：

```
/app/design/adminhtml/default/default/template/sales/order/view/info.phtml 
```

第 170 行内容如下：

```
<address><?php echo $_order->getShippingAddress()->getFormated(true) ?></address> 
```

这导致我到这个文件：

```
/app/code/core/Mage/Sales/Model/Order.php 
```

在第 948 行显示：

```
@return Mage_Sales_Model_Order_Address 
```

所以我打开了以下文件：

```
/app/code/core/Mage/Sales/Model/Order/Address.php 
```

延伸：

```
/app/code/core/Mage/Customer/Model/Address/Abstract.php 
```

在函数格式（第 323 行）似乎可以解决问题的地方。但那时，我最终得到了一个渲染器，但不知道如何继续。有人可以指出我正确的文件吗？

我实际上正在尝试做的事情是更改送货地址的格式：

```
John Doe
Streetname 123
City, Postal
Country
T: Phone 
```

类似于：

```
John Doe
Streetname 123
Postal, City 
```

如果进入公司：

```
Companyname
to: John Doe
Streetname 123
Postal, City 
```

对不起，很长的帖子，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:37:50.070

找到了解决方案，但不是在 Mage 核心中！

转到系统 > 配置 > 客户 > 客户配置 > 地址模板

我已将 HTML 输出更改为以下内容：

```
{{if company}}{{var company}}<br />t.a.v.{{/if}}
{{depend prefix}}{{var prefix}} {{/depend}}{{var firstname}} {{depend middlename}}{{var middlename}} {{/depend}}{{var lastname}}{{depend suffix}} {{var suffix}}{{/depend}}<br/>
{{if street1}}{{var street1}}<br />{{/if}}
{{depend street2}}{{var street2}}<br />{{/depend}}
{{depend street3}}{{var street3}}<br />{{/depend}}
{{depend street4}}{{var street4}}<br />{{/depend}}
{{if postcode}}{{var postcode}}{{/if}} {{if city}}{{var city}}{{/if}} 
```

这正是我的客户所要求的。

# php - Web 服务器意外退出，重新启动新实例

> ID：12126565
> 
> 赞同：0
> 
> 时间：2012-08-25T23:45:27.203
> 
> 标签：php, javascript, apache

我没有任何其他选择，只能再次在这里问......问题在过去的 5 个小时里让我丧命。我得到了调用 javascript 函数的按钮，然后 javascript 打开另一个 php 页面并插入 MySQL 数据库。

HTML 代码：

```
<ul>
<li id="ConfirmButton" name="Insert" onclick="GetAllIDs()"><a>Potvrdi</a></li>
</ul> 
```

Javascript代码：

```
var request_type;
var browser = navigator.appName;
if (browser == "Microsoft Internet Explorer") {
request_type = new ActiveXObject("Microsoft.XMLHTTP");
}
else {
request_type = new XMLHttpRequest();
}

var http = request_type;
http.open('get', 'insert.php?MatchID='+MatchID+'&TipID='+TipID+'&UserID=' + 1,true);
http.send(null); 
```

PHP代码：

```
include('config.php');
$matchID = $_GET['MatchID'];
$tipID = $_GET['TipID'];
$userID = $_GET['UserID'];

// Escape User Input to help prevent SQL Injection  
$MatchID = mysql_real_escape_string($matchID); 
$TipID = mysql_real_escape_string($tipID); 
$UserID = mysql_real_escape_string($userID); 

$insertTicket_sql = "INSERT INTO 
betslips(DateTime,MatchID,TipID,UserID)
VALUES(".$MatchID.",".$TipID.",'".date("Y-m-d H:i:s")."',".$UserID.")";
$insertTick= mysql_query($insertTicket_sql) or die(mysql_error()); 
```

因此，在我运行此代码并使用断点之后，我在我的 php 代码中看到了我通过表单正常发送的所有参数，并且它们都在那里，但是当我到达代码时，`$insertTick`我得到错误 web 服务器意外退出，重新启动新实例。

有没有人以前见过这个问题，我该如何处理？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:07:09.287

> 以前有人见过这个问题吗？

不是我，我不使用 mysql_* 函数。

您的 INSERT 查询参数和值不匹配。

因此，我将您的示例代码移植到了 PDO 中，也许它有些兴趣：

```
<?php 
//PDO Connect
try{
    $con = new PDO('mysql:host=127.0.0.1;dbname=yourDB','root','password');
    $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $con->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $con->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE,PDO::FETCH_ASSOC);
}catch (Exception $e){
    die('Cannot connect to database. Details:'.$e->getMessage());
}

//Check that the variables are set
if(isset($_GET['MatchID']) && isset($_GET['TipID']) && isset($_GET['UserID'])){

    //Prepare your query
    $query = $con->prepare("INSERT INTO betslips (DateTime,MatchID,TipID,UserID)
                            VALUES ('".date("Y-m-d H:i:s")."', :matchID, :tipID, :userID)");

    //Bind your values with the placeholders
    $query->bindParam(":matchID", $_GET['MatchID']);
    $query->bindParam(":tipID", $_GET['TipID']);
    $query->bindParam(":userID", $_GET['UserID']);

    //Execute
    $query->execute();
    die('Success!');
}else{
    die('Error: Parameter not set.');
}
?> 
```

# assembly - Addressing in x86

> ID：12126571
> 
> 赞同：0
> 
> 时间：2012-08-25T23:46:42.667
> 
> 标签：assembly, x86, addressing

I have got a problem with addressing in x86\. Can someone tell me what this does:

```
mov 4000(%ecx, %ebx, 4), %eax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:54:05.757

An address is computed as 4000 plus the value in the %ecx register plus 4 times the value in the %ebx register. A 32-bit value is loaded from that address and put into the %eax register.

# php - Fusion tables authentication php - daily limit exceeded

> ID：12126573
> 
> 赞同：0
> 
> 时间：2012-08-25T23:47:01.337
> 
> 标签：php, google-fusion-tables

From this snippet of code using the Oauth2 access_token:

```
$acsToken = json_decode($client->getAccessToken())->{'access_token'};
$arrHeader = array('Content-Type'=>'application/json', 'Authorization'=>'Bearer '.$acsToken);

$ch = curl_init( 'https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20UserID%20FROM%201DGQPfPkjgcNVUc3ndplxNBlET9TlwoVcQw5_jVA');
curl_setopt( $ch, CURLOPT_HTTPHEADER, $arrHeader);
curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt( $ch, CURLOPT_HEADER, 0);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1);
$response = curl_exec( $ch );

if($response === false){
    echo 'Curl error: ' . curl_error($ch);
} else {
    echo "<br /> response: ".$response; 
} 
```

This is what is returned.

response: { "error": { "errors": [ { "domain": "usageLimits", "reason": "dailyLimitExceededUnreg", "message": "Daily Limit Exceeded. Please sign up", "extendedHelp": "https://code.google.com/apis/console" } ], "code": 403, "message": "Daily Limit Exceeded. Please sign up" } }

According to the api Console I have had 50 requests in the past 28 days. The maximum limit for fusion tables is 25,000 per day. so I shouldn't be over the limit.

I have not use cURL before. Is my cURL request malformed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:19:13.503

您需要将 API 密钥添加为调用`key`请求的第二个参数。

`https://www.googleapis.com/fusiontables/v1/query?sql=<query>&key=<your API key>`

[您可以在Google API 控制台](https://code.google.com/apis/console/)的“API 访问”选项卡上找到您的 API 密钥。

# jquery - jquery-mobile：获取 ui-li-count 的值

> ID：12126574
> 
> 赞同：3
> 
> 时间：2012-08-25T23:47:24.677
> 
> 标签：jquery, jquery-mobile

我有十几个可折叠列表（如下所示），每个列表都有一堆动态创建的“li”：

```
 <div data-role="collapsible" data-collapsed="true" data-theme="b" data-content-theme="b">
    <h3>Community Alerts
    <span id="comm_count" class="ui-li-count" style="float:right;">0</span></h3>
    <ul id="communityAlertList" data-role="listview"></ul>
  </div> 
```

当用户对“li”之一进行点击时，我想将其删除“li”（该部分工作），然后我需要更新/减少 ui-li-count。要查找跨度并获取其内容，我使用以下内容：

```
 var ui_li_count = $(this).closest('span')
    var count = $(ui_li_count).textContent;    // also tried innerHTML
    alert("Count = " +count);
    count--;
    $(ui_li_count).html(count); 
```

警报显示“计数 = 未定义”。

如何查找和检索 textContent？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:25:54.770

问题是您使用`.closest()`. 有效的方法`.closest()`是找到最近的父/子，从 (this) 元素散开。在您的代码中，没有 span 元素是 an 的直接父/子`<li>`，因此它返回 undefined。

简单地说，使用 jquery 选择器，您想要获取的跨度从您的 li 中嵌套如下：

```
var count =  $(this).parent().parent().children('h3').children('span').text(); 
```

但是我们并不想使用所有这些选择器，所以我们可以这样做：

```
var count =  $(this).closest('div').find('span.ui-li-count').text(); 
```

因为 与`h3`您的 处于同一级别`ul`，所以我们首先需要获取它的容器，在您的示例中是`div`. 然后我们使用 find 来查找该 div 内的跨度。

另请注意，我曾经`.text()`获取内容。这是 jQuery 替代 javascripts `.textContent`。

制作了一个简单的测试用例，以便您可以看到它与您的代码一起使用：

[http://jsbin.com/odamac/3/edit](http://jsbin.com/odamac/3/edit)

希望这将为您指明正确的方向:)

* * *

**更新**

您将遇到的另一个问题是您的 DOM 并没有完全按照您的想法进行布局。当窗口加载时，jQuery Mobile 会在页面中插入额外的元素，以便它可以实现其功能。

你的实际页面 DOM 看起来像这样：

```
<div data-role="page">

    <div data-role="collapsible" class="ui-collapsible">

        <h3 class="ui-collapsible-heading">
            <a href="#" class="ui-collapsible-heading-toggle ui-btn">
                <span class="ui-btn-inner">
                    <span class="ui-btn-text">
                        Community Alerts
                        <span id="comm_count" class="ui-li-count" style="float:right;">5</span>
                        <span class="ui-collapsible-heading-status"> click to expand contents</span>
                    </span>

                    <span class="ui-icon">&nbsp;</span>
                 </span>
             </a>
         </h3>

         <div class="ui-collapsible-content">

             <ul id="communityAlertList" data-role="listview" class="ui-listview">
                 <li data-theme="b" id="1" class="ui-li">1</li>
                 <li data-theme="b" id="2" class="ui-li">2</li>
                 <li data-theme="b" id="3" class="ui-li">3</li>
                 <li data-theme="b" id="4" class="ui-li">4</li>
                 <li data-theme="b" id="5" class="ui-li">5</li>
             </ul>

         </div>
     </div>

 </div> 
```

请注意 jQuery Mobile 为使可折叠功能正常工作而插入的额外元素和元素。`closest();`在使用, `find();`, `parent();`,`children();`等遍历 DOM 时，您需要考虑这些元素。

# javascript - 返回 false 不停止表单提交

> ID：12126583
> 
> 赞同：3
> 
> 时间：2012-08-25T23:50:25.373
> 
> 标签：javascript, jquery, forms

我很确定这不应该那么难。我有一个在提交时运行以下函数的表单：

```
function FORMVALIDATE_add_rota_entry() {
    var rota_date = $("#rota_date").val();
    var rota_id = $("#rota_id").val();
    var am_pm = $("#am_pm").val();
    if(rota_date == "")
    {
        alert("Please enter a date.");
        return false;
    }
    if(rota_id == "error")
    {
        alert("Please select a rota from the list.");
        return false;
    }
    // check if that rota has already been entered for that date and am/pm
    $.ajax({
        async:false,
        type:"POST",
        url:"/modules/rotas/check_rota_entry_existence",
        data:{rota_date:rota_date, rota_id:rota_id, am_pm:am_pm},
        success: function(result) {
            if(result != "0")
            {
                alert("This rota has already been added to this date, "+am_pm+".");
                return false;
            }
        }
    });
} 
```

它在表单标签中通过以下方式调用：

```
onsubmit="return FORMVALIDATE_add_rota_entry();" 
```

它在前两个 rota_date 和 rota_id 上运行良好，当它们应该出现警报时，它会阻止表单提交，但是当它到达 ajax 调用时，它会很好，返回正确的结果，当它发出警报时应该，但返回 false 似乎并没有阻止表单提交。有没有人有任何想法，因为我很难过！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T00:03:44.500

你做错了。你这样做的方式，你应该让函数总是返回 false：

```
function FORMVALIDATE_add_rota_entry() {
    var rota_date = $("#rota_date").val();
    var rota_id = $("#rota_id").val();
    var am_pm = $("#am_pm").val();
    if(rota_date == "")
    {
        alert("Please enter a date.");
        return false;
    }
    if(rota_id == "error")
    {
        alert("Please select a rota from the list.");
        return false;
    }
    // check if that rota has already been entered for that date and am/pm
    $.ajax({
        async:false,
        type:"POST",
        url:"/modules/rotas/check_rota_entry_existence",
        data:{rota_date:rota_date, rota_id:rota_id, am_pm:am_pm},
        success: function(result) {
            if(result != "0")
            {
                alert("This rota has already been added to this date, "+am_pm+".");
                return false;//this is called when the server responds....which in your case isnt happening in the first place

            }
        }
    });

    return false;//this should be at the end so 'false' is always returned to 'onsubmit'
} 
```

if 语句中的唯一目的是`return false;`防止 ajax 代码运行。但是函数的末尾也应该有一个。这应该是一个更容易解决的问题：

`onsubmit="FORMVALIDATE_add_rota_entry();return false;"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:08:19.943

消除：

```
onsubmit="return FORMVALIDATE_add_rota_entry();" 
```

在您的函数下方添加（`my-form`表单的 id 在哪里）：

```
$('#my-form').submit(FORMVALIDATE_add_rota_entry); 
```

改变：

```
function FORMVALIDATE_add_rota_entry() { 
```

到：

```
function FORMVALIDATE_add_rota_entry(event) { 
```

在您的功能更改中：

```
return false; 
```

到

```
event.preventDefault(); 
```

这并不总是会停止表单提交，因为 ajax 请求是异步的，并且内部的代码不会及时运行以停止表单进程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:13:34.777

好的，所以在尝试了上述解决方案但没有绝对成功之后，我自己来了。我完全放弃了表单元素，并在点击时发送了三个值，如下所示：

```
 onclick="FORMVALIDATE_add_rota_entry($('#rota_date').val(), $('#rota_id').val(), $('#am_pm').val());" 
```

然后，函数变成如下：

```
function FORMVALIDATE_add_rota_entry(rota_date, rota_id, am_pm) {
    // check if that rota has already been entered for that date and am/pm
    $.ajax({
        type:"POST",
        url:"/modules/rotas/check_rota_entry_existence",
        data:{rota_date:rota_date, rota_id:rota_id, am_pm:am_pm},
        success: function(result) {
            if(result != "0")
            {
                alert("This rota has already been added to this date, "+am_pm+".");
            }
            else if(rota_date == "")
            {
                alert("Please enter a date.");
            }
            else if(rota_id == "error")
            {
                alert("Please select a rota from the list.");
            }
            else
            {
                $.post('/modules/rotas/add_rota_entry2', {rota_date:rota_date, rota_id:rota_id, am_pm:am_pm});
                parent.$.fn.colorbox.close();
            }
        }
    });
} 
```

一切正常！

感谢大家的投入:) }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T23:53:55.627

尝试在语句`event.preventDefault()`之前使用。`return`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-09T15:01:23.153

而不是使用

```
onsubmit="return FORMVALIDATE_add_rota_entry();" 
```

尝试使用

```
onclick="return FORMVALIDATE_add_rota_entry();" 
```

您可能需要`return true;`在函数末尾添加。

# asp.net - Security issue about using bbcode parser vs antiXSS library

> ID：12126590
> 
> 赞同：1
> 
> 时间：2012-08-25T23:51:17.470
> 
> 标签：asp.net, asp.net-mvc, parsing, bbcode, antixsslibrary

In my application, I have rich textbox, and I wonder what is safer to use:

*   A bbcode rich textbox with bbcode parser,

or

*   A rich textbox with html encoded tags, and validation with Microsoft anti-XSS sanitizer

I think that first approach is a bit harder to implement, because I would need to write a custom bbcode validator/sanitizer.

So, which method would you use, and why?

# c++ - c ++ GDI位图不想加载

> ID：12126594
> 
> 赞同：0
> 
> 时间：2012-08-25T23:51:48.727
> 
> 标签：c++, bitmap, gdi, nullptr

我的名字是 Miguel，我试图在一个 .bmp 中获取每个像素，但到目前为止，当我初始化位图时，它没有得到任何值，所以我猜我初始化它是错误的。这是我当前的代码：（片段）

```
Bitmap *PerlinImage;

void OpenPerlinFile()
{
    PerlinImage = new Bitmap((WCHAR*)"C:\\Users\\Utilizador\\Documents\\Visual Studio 2012\\Projects\\Cube3D\\IDTech_JavaOpenGL_Port\\perlinNoise.bmp");
}

// END

void Initialize(void)
{
    OpenPerlinFile();

    Unit tempunit;
    Color color; 

    int ccount = 0;
    for (int h = 0; h != PerlinImage->GetHeight(); h++)
...... 
```

现在，你能看看我的代码，也许可以预测我做错了什么。

谢谢你

米格尔·彼得森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:53:31.823

假设您的路径正确，则如下：

```
PerlinImage = new Bitmap((WCHAR*)"C:\\Users\\Utilizador\\Documents\\Visual Studio 2012\\Projects\\Cube3D\\IDTech_JavaOpenGL_Port\\perlinNoise.bmp"); 
```

应该：

```
PerlinImage = new Bitmap(_T("C:\\Users\\Utilizador\\Documents\\Visual Studio 2012\\Projects\\Cube3D\\IDTech_JavaOpenGL_Port\\perlinNoise.bmp")); 
```

或者，没有辅助宏：

```
PerlinImage = new Bitmap(L"C:\\Users\\Utilizador\\Documents\\Visual Studio 2012\\Projects\\Cube3D\\IDTech_JavaOpenGL_Port\\perlinNoise.bmp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T01:47:58.517

需要调用 GdiplusStartup。还要检查 PerlinImage 的值，如果它不为 NULL，那么您可以使用 PerlinImage->GetLastStatus() 检查错误。如果 PerlinImage 为 NULL，那么您可能会忘记调用 GdiplusStartup。

# regex - 从数字部分字符串中删除逗号

> ID：12126597
> 
> 赞同：7
> 
> 时间：2012-08-25T23:52:04.020
> 
> 标签：regex, r

我如何（最快最好）从字符串的数字部分删除逗号而不影响字符串中的其余逗号。因此，在下面的示例中，我想从数字部分中删除逗号，但 dog 后面的逗号应该保留（是的，我知道 1023455 中的逗号是错误的，但只是扔了一个角盒）。

是）我有的：

```
x <- "I want to see 102,345,5 dogs, but not too soo; it's 3,242 minutes away" 
```

期望的结果：

```
[1] "I want to see 1023455 dogs, but not too soo; it's 3242 minutes away" 
```

***规定：必须在基础没有添加的包中完成。***

先感谢您。

**编辑：** 谢谢 Dason、Greg 和 Dirk。你的两个回答都很好。我正在玩一些接近 Dason 的反应的东西，但括号内有逗号。现在再看也觉得没有道理。我对这两个响应进行了微基准测试，因为我需要速度（文本数据）：

```
Unit: microseconds
         expr     min      lq  median      uq     max
1  Dason_0to9  14.461  15.395  15.861  16.328  25.191
2 Dason_digit  21.926  23.791  24.258  24.725  65.777
3        Dirk 127.354 128.287 128.754 129.686 154.410
4      Greg_1  18.193  19.126  19.127  19.594  27.990
5      Greg_2 125.021 125.954 126.421 127.353 185.666 
```

对你们所有人+1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T23:59:40.787

您可以用数字本身替换带有模式（逗号后跟数字）的任何内容。

```
x <- "I want to see 102,345,5 dogs, but not too soo; it's 3,242 minutes away"
gsub(",([[:digit:]])", "\\1", x)
#[1] "I want to see 1023455 dogs, but not too soo; it's 3242 minutes away"
#or
gsub(",([0-9])", "\\1", x)
#[1] "I want to see 1023455 dogs, but not too soo; it's 3242 minutes away" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T00:08:00.797

使用 Perl 正则表达式，并专注于“数字逗号数字”，然后我们只用数字替换：

```
R> x <- "I want to see 102,345,5 dogs, but not too soo; it's 3,242 minutes away"
R> gsub("(\\d),(\\d)", "\\1\\2", x, perl=TRUE)
[1] "I want to see 1023455 dogs, but not too soo; it's 3242 minutes away"
R> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-26T01:27:53.223

这里有几个选项：

```
> tmp <- "I want to see 102,345,5 dogs, but not too soo; it's 3,242 minutes away"
> gsub('([0-9]),([0-9])','\\1\\2', tmp )
[1] "I want to see 1023455 dogs, but not too soo; it's 3242 minutes away"
> gsub('(?<=\\d),(?=\\d)','',tmp, perl=TRUE)
[1] "I want to see 1023455 dogs, but not too soo; it's 3242 minutes away"
> 
```

它们都匹配一个数字，后跟一个逗号，后跟一个数字。`[0-9]`and `\d`（多余的转义`\`第二个，以便它通过常规 epression）都匹配单个数字。

第一个 epression 捕获逗号之前的数字和逗号之后的数字，并在替换字符串中使用它们。基本上把它们拉出来再放回去（但不把逗号放回去）。

第二个版本使用零长度匹配，`(?<=\\d)`表示逗号前需要有一个数字才能匹配，但数字本身不是匹配的一部分。表示逗号后面需要有`(?=\\d)`一个数字才能匹配，但它不包含在匹配中。所以基本上它匹配一个逗号，但前提是它前面和后面是一个数字。由于仅匹配逗号，因此替换字符串为空，表示删除逗号。

# c# - c# 静态成员是如何以及何时处置的？

> ID：12126598
> 
> 赞同：41
> 
> 时间：2012-08-25T23:52:14.100
> 
> 标签：c#, .net, dispose, idisposable

我有一个包含大量静态成员的类，其中一些保留对托管和非托管对象的引用。

例如，只要引用了 Type，就会调用静态构造函数，这会导致我的类启动任务的阻塞队列。例如，当调用其中一种静态方法时，就会发生这种情况。

我实现了 IDisposable，它为我提供了处理我创建的任何实例对象的处置的方法。但是，如果使用者没有从我的类创建任何实例对象，则永远不会调用这些方法。

我如何以及在哪里放置代码来处理由我的类的静态部分维护的引用？我一直认为静态引用资源的处理是在最后一个实例对象被释放的时候发生的；这是我第一次创建一个不能创建实例的类。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-25T23:57:46.380

在卸载托管您的类的应用程序域之前，您的类的静态变量不会被垃圾收集。该`Dispose()`方法不会被调用，因为它是一个实例方法，并且您说过您不会创建您的类的任何实例。

如果您想使用该`Dispose()`方法，请将您的对象设置为单例，创建它的一个实例，并在您的应用程序即将退出时显式处理它。

```
public class MyClass : IDisposable {
    public IList List1 {get; private set;}
    public IDictionary<string,string> Dict1 {get; private set;}
    public void Dispose() {
        // Do something here
    }
    public static MyClass Instance {get; private set;}
    static MyClass() {
        Instance = new MyClass();
    }
    public static void DisposeInstance() {
        if (Instance != null) {
            Instance.Dispose();
            Instance = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-11-09T10:25:08.710

```
public class Logger : IDisposable
{

    private string _logDirectory = null;
    private static Logger _instance = null;

    private Logger() : this(ConfigurationManager.AppSettings["LogDirectory"])
    {
        AppDomain.CurrentDomain.ProcessExit += CurrentDomain_ProcessExit;
    }

    private Logger(string logDirectory) 
    {
    } 

    public static Logger Instance
    {
        get
        {
            if (_instance == null)
                _instance = new Logger();
            return _instance;
        }
    }

    private void CurrentDomain_ProcessExit(object sender, EventArgs e)
    {
        Dispose();
    }

    public void Dispose()
    {
        // Dispose unmanaged resources
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T23:55:33.257

您应该手动处理这些对象，无法为静态资源创建“终结器”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-05-23T21:47:05.683

如果您真的想要保留对非托管对象的引用的静态成员，只需创建一个用于处理非托管对象的方法并“强制”消费者在退出时使用它。

我所说的“强制”是指用一段说明“何时”和“为什么”使用此“处置”方法的段落来记录您的课程。如果您是唯一的消费者（或您的代码......）或者您计划分发您的课程，请执行此操作。还尝试使用某种描述性名称（对于“dispose”方法），例如“DisposeStatics”、“AlwaysDispose”、“DisposeAtEnd”等。

# matlab - 如何对相邻的非空单元格进行分组？

> ID：12126602
> 
> 赞同：2
> 
> 时间：2012-08-25T23:54:00.087
> 
> 标签：matlab, cell-array

我有一个 4x4 单元阵列`C`，它

```
C= {

[1] [3] [6] [ ]; 

[2] [ ] [ ] [8];  

[ ] [4] [ ] [9]; 

[ ] [5] [7] [ ]} 
```

我想生成一个新的单元格数组 D 给我

```
D = {[1;2], [3], [4;5],[6],[7],[8;9]} 
```

基本上我想1.垂直组合每列中相邻的非空单元格，2.输出`D`包含结果的新单元格数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:47:14.630

你可以使用这个。我使用了成像工具包中的 bwlabel：

```
C= {                   ...
[1] [3] [6] [ ];       ...
[2] [ ] [ ] [8];       ...
[ ] [4] [ ] [9];       ...
[ ] [5] [7] [ ]};

lenf = @(X)~isempty(X);
lens = cellfun(lenf, C); 
```

`lens`现在是一个逻辑数组，指示 C 中的任何插槽是否为空。现在我们可以`D`通过将每一列`lens`视为 1 x*任何*二进制图像来构建，并使用`bwlabel()`. 最后，我们将区域放入 D。

```
sum = 0;
for k = 1:size(lens,2)
    [L,num] = bwlabel(lens(:,k), 4);
    for idx = 1:num
        D{idx+sum} = cat(1, C{L==idx, k});
    end
    sum = sum + num;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:57:01.240

不依赖于另一个工具箱，您可以使用此代码

```
nextGroup = diff([true(1, size(C, 2)); cellfun(@isempty, C)]) < 0;
index = reshape(cumsum(nextGroup(:)), size(nextGroup));
result = arrayfun(@(x) horzcat(C{index==x}), 1:index(end,end), ...
                  'UniformOutput', false); 
```

它适用于 Octave，所以我希望它也适用于 Matlab。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T01:01:51.460

用 NaN 值替换空单元格，使其成为一个矩阵，`cell2mat`并得到一个包含所有数字的逻辑矩阵。在 for 循环中，您可以轻松获取所有连接的值`bwconncomp`（这将需要图像工具箱）。

为了避免 for 循环，我们可以变成一个长向量，用 nan 分隔每列的末尾（通过在将其变成向量之前添加一行 nan）。

```
C(cellfun (@isempty, C)) = {nan};
C                = cell2mat (C);
C(end+1, :)      = nan;
mask             = false (size (C));
mask(~isnan (C)) = true;
list             = regionprops (bwconncomp (mask(:)), C(:), 'PixelValues') 
```

`list`是一个结构数组，因此当您尝试访问它时会得到一个 cs-list。您可以将所有值放入一个元胞数组中：

```
D = {list(:).Pixelvalues} 
```

# c# - 从后台工作人员内部操作 ListView

> ID：12126612
> 
> 赞同：-1
> 
> 时间：2012-08-25T23:55:16.267
> 
> 标签：c#, listview, backgroundworker

我正在使用后台工作人员循环遍历 a 中的每个项目，`ListView`并在单击按钮后对其进行处理：

```
private void bParsePosts_Click(object sender, EventArgs e)
{
    parseWorker.RunWorkerAsync(this.lvPostQueue);
} 
```

然后，我有：

```
private void parseWorker_DoWork(object sender, DoWorkEventArgs e)
{
    // Loop through each item
    for (int i = 0; i < lvPostQueue.Items.Count; i++)
    {
        string title = lvPostQueue.Items[i].SubItems[0].ToString();
        string category = lvPostQueue.Items[i].SubItems[1].ToString();
        string url = lvPostQueue.Items[i].SubItems[2].ToString();

        lvPostQueue.Items[i].SubItems[3].Text = "Done";
    }
} 
```

但是，我收到此错误：

```
Cross-thread operation not valid: Control 'lvPostQueue' accessed from a thread other than the thread it was created on. 
```

我将如何`lvPostQueue`从该后台工作人员中操作控件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:00:29.353

只需使用线程安全调用：http: [//msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx)

例子：

```
// This event handler starts the form's  
        // BackgroundWorker by calling RunWorkerAsync. 
        // 
        // The Text property of the TextBox control is set 
        // when the BackgroundWorker raises the RunWorkerCompleted 
        // event. 
        private void setTextBackgroundWorkerBtn_Click(
            object sender, 
            EventArgs e)
        {
            this.backgroundWorker1.RunWorkerAsync();
        }

        // This event handler sets the Text property of the TextBox 
        // control. It is called on the thread that created the  
        // TextBox control, so the call is thread-safe. 
        // 
        // BackgroundWorker is the preferred way to perform asynchronous 
        // operations. 

        private void backgroundWorker1_RunWorkerCompleted(
            object sender, 
            RunWorkerCompletedEventArgs e)
        {
            this.textBox1.Text = 
                "This text was set safely by BackgroundWorker.";
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:18:33.270

正确的答案是：

```
private void bParsePosts_Click(object sender, EventArgs e)
{
    parseWorker.WorkerReportsProgress = true;
    parseWorker.ProgressChanged += new ProgressChangedEventHandler(worker_ProgressChanged);
    parseWorker.RunWorkerAsync();
}

private void parseWorker_DoWork(object sender, DoWorkEventArgs e)
{
    // Loop through each item
    for (int i = 0; i < lvPostQueue.Items.Count; i++)
    {
        string title = lvPostQueue.Items[i].SubItems[0].ToString();
        string category = lvPostQueue.Items[i].SubItems[1].ToString();
        string url = lvPostQueue.Items[i].SubItems[2].ToString();

        parseWorker.ReportProgress(i * 100 / lvPostQueue.Items.Count, i);
    }
}

void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    var i = (int)e.UserState;
    lvPostQueue.Items[i].SubItems[3].Text = "Done";
} 
```

# browser - 我应该使用哪些浏览器来测试我的网页？

> ID：12126614
> 
> 赞同：0
> 
> 时间：2012-08-25T23:55:36.300
> 
> 标签：browser, web

我已经在 Chrome (Mac)、Firefox (all)、Safari (all)、IE9 (Win 7) 和 Opera (Mac) 中测试了我的页面。我还计划为 Windows 开发 Chrome，为 Linux 开发 Chromium，为 Windows 开发 Opera。是否还有其他（用于桌面）具有足够广泛用途的我应该下载和测试它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:01:35.300

我一直发现最好的策略是在 IE、Chrome、Firefox 和 Safari（最新版本）中进行测试，然后安装 Google Analytics 之类的服务来了解您在哪些其他浏览器上流行。跨所有不同操作系统进行测试可能会非常耗时，而且您可能会对网站的流量崩溃感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:09:22.453

使用此链接可以很好地了解浏览器的使用趋势： [http](http://www.w3schools.com/browsers/browsers_stats.asp)
://www.w3schools.com/browsers/browsers_stats.asp 请记住，这些统计数据是基于此特定站点的用户，可能会更多“精通技术”然后是普通用户。如果您单击特定浏览器，您将看到浏览器不同版本的统计信息。例如，您可以看到大约 8% 的网站用户使用 IE8，这不在您的列表中。

此外，请使用此站点：
[http](http://caniuse.com/)
://caniuse.com/ 检查不同浏览器对特定 HTML / CSS 元素的支持。

不要忘记为旧浏览器版本不支持的每个元素为您的网站用户提供适当的后备内容。

# postgresql - Postgresql ILIKE 与 TSEARCH

> ID：12126615
> 
> 赞同：6
> 
> 时间：2012-08-25T23:56:05.547
> 
> 标签：postgresql, full-text-search, full-text-indexing

我有一个带有许多测试字段的查询，如下所示：

```
SELECT * FROM some-table
  WHERE field1 ILIKE "%thing%"
     OR field2 ILIKE "%thing"
     OR field3 ILIKE "%thing"; 
```

这些列几乎都是 varchar(50) 左右。现在我明白为了提高性能，我应该索引搜索操作的字段。我应该考虑完全用 TSEARCH 替换 ILIKE 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-26T07:16:33.823

全文搜索设置与“包含”之类的查询不同。它包含单词等，因此您可以将“汽车”与“汽车”相匹配。

如果你真的想要一个快速的 ILIKE，那么没有标准的数据库索引或 FTS 会有所帮助。幸运的是，pg_trgm 模块可以做到这一点。

*   [http://www.postgresql.org/docs/9.1/static/pgtrgm.html](http://www.postgresql.org/docs/9.1/static/pgtrgm.html)
*   [http://www.depesz.com/2011/02/19/waiting-for-9-1-faster-likeilike/](http://www.depesz.com/2011/02/19/waiting-for-9-1-faster-likeilike/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T00:05:02.933

非常重要的一件事：**没有 B-TREE INDEX**会改进这种搜索：

```
where field ilike '%SOMETHING%' 
```

我的意思是，如果您执行以下操作：

```
create index idx_name on some_table(field); 
```

您将改进的唯一访问是`where field like 'something%'`. （当您搜索以某些文字开头的值时）。`field`因此，在这种情况下，向列添加常规索引不会有任何好处。

如果您需要提高搜索响应时间，请务必考虑使用**FULL TEXT SEARCH**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T13:41:10.790

补充一点其他人所说的。

首先，您不能真正使用基于字符串中间值的索引。索引通常是树搜索，您无法知道您的搜索是否会比仅扫描表更快，因此 PostgreSQL 将默认为 seq 扫描。*只有与字符串的第一*部分匹配时才会使用索引。所以：

```
SELECT * FROM invoice
  WHERE invoice_number like 'INV-2012-435%' 
```

可以使用索引但`like '%44354456%'`不能。

一般来说，在 LedgerSMB 中，我们会同时使用这两种方法，具体取决于我们正在执行的搜索类型。您可能会看到如下搜索：

```
select * from parts
  WHERE partnumber ilike ?  || '%'
    and plainto_tsquery(get_default_language(), ?) @@ description; 
```

所以这些是非常不同的。在最有意义的地方使用每一个。

# ruby-on-rails-3 - 水豚访问不起作用

> ID：12126616
> 
> 赞同：0
> 
> 时间：2012-08-25T23:56:06.877
> 
> 标签：ruby-on-rails-3, rspec, capybara

```
describe Inventory::Export do
  describe "export page" do
    it "check to show export page" do
      user = FactoryGirl.build(:admin) 
      activity_type = FactoryGirl.create(:activity_type) 
      visit "/users/sign_in"
      fill_in "user_Login", :with => user.Login
      fill_in "user_password", :with => user.password
      click_button "user_submit"
      visit "/admin/inventory/exports"
      save_and_open_page
    end
  end
end 
```

代码在

```
visit "/admin/inventory/exports" 
```

不影响结果

```
save_and_open_page 
```

我得到授权后重定向的页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T02:38:47.160

尝试

```
visit admin_inventory_exports_path 
```

使用 .检查您的路线的实际路径`rake routes`。

# algorithm - 算法方法 - 在网格中找到最佳路径

> ID：12126618
> 
> 赞同：3
> 
> 时间：2012-08-25T23:56:24.523
> 
> 标签：algorithm, graph-theory, dynamic-programming

**问题：**有一个**m** x **n**网格（**0 <= m, n <= 500**）。网格中的每个单元格包含 **k**个硬币（k 也可以是负数或 0）。你从**0, 0**开始，到**m-1, n-1**结束，你可以向下移动 1 步或向右移动 1 步，收集尽可能多的硬币。如果**k < 0**，则该特定单元格有强盗，您无法进入该单元格。如果您进入**8**个相邻单元中的任何一个，您将被抢走**k**个硬币。**当你到达m-1, n-1**时你会有多少硬币？

例如在网格中：

```
0,23,20,-32
13,14,44,-44
23,19,41,9
46,27,20,0 
```

ans = 129（按照路径：0-13-23-46-27-20-0）

**时间限制：5秒**

我不认为这个程序可以使用动态编程来解决。而且我还没有研究过图论（以防它可以用来解决这个问题）。直接递归的方法是我唯一能想到的，在给定的约束下效率太低了。

那么解决这个问题的好方法是什么？不要只是发布代码，告诉我如何开始。如果它与图论有关，那么指出涉及哪个定理将非常有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T00:08:12.487

您的问题称为[加权有向无环图](http://en.wikipedia.org/wiki/Longest_path_problem#Weighted_directed_acyclic_graphs)的[最长路径问题](http://en.wikipedia.org/wiki/Longest_path_problem)。

当您到达 (x,y) 时，您可以拥有的最多硬币数量由下式给出：

```
coins(x,y) = max(coins(x-1,y), coins(x,y-1)) + change 
```

这是一种[重复关系](http://en.wikipedia.org/wiki/Recurrence_relation)。它可以通过使用递归和记忆来解决，也可以通过使用迭代算法来解决。

迭代算法是一次通过一个对角线的网格。从 0,0 开始。然后计算 0,1 和 1,0。然后是 0,2 和 1,1 和 2,0。ETC...

步骤1：

```
 0,  ?,  ?,  ?
 ?,  ?,  ?,  ?
 ?,  ?,  ?,  ?
 ?,  ?,  ?,  ? 
```

第2步：

```
 0, 23,  ?,  ?
13,  ?,  ?,  ?
 ?,  ?,  ?,  ?
 ?,  ?,  ?,  ? 
```

第 3 步：

```
 0, 23,-33,  ?
13, 37,  ?,  ?   // 37 because of max(23,13) + 14
36,  ?,  ?,  ?
 ?,  ?,  ?,  ? 
```

ETC...

完成此过程后，答案是右下角的数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T00:11:09.830

> 我不认为这个程序可以使用动态编程来解决。

为什么不？这是动态规划方法的主要候选者。

> 直接递归的方法是我唯一能想到的，在给定的约束下效率太低了。

你能构建一个递归解决方案来解决，比如说，一个 5x5 网格吗？完美的！从它开始，然后通过为您已经解决的单元格添加一组最佳结果来[*记忆它。*](http://en.wikipedia.org/wiki/Memoization)`MxN`以所有大的负值开始该数组，然后在找到更好的解决方案时对其进行更新。比已经存在的。完成单元格后，将解决方案放入`MxN`数组中：下次递归时，检查数组中的数字，如果存在值，则返回它而不继续递归。

记忆的解决方案本身相当简单。算法的预处理步骤（从相邻单元格中减去负数）需要更多代码。

```
int solve(int r, int c) {
    if(memo[r][c] != MIN) {
        return memo[r][c];
    }
    int res = grid[r][c];
    int a = 0, b = 0;
    if (r+1 != R) {
        a = solve(r+1, c);
    }
    if (c+1 != C) {
        b = solve(r, c+1);
    }
    res = max(res+a, res+b);
    return memo[r][c] = res;
} 
```

这是[ideone](http://ideone.com/0h9yg)上的解决方案，它`129`按预期返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T00:10:09.520

您的问题可以描述为[最大流量问题](http://en.wikipedia.org/wiki/Max_flow)，因此可以通过[Ford-Fulkerson-Algorithm](http://en.wikipedia.org/wiki/Ford%E2%80%93Fulkerson_algorithm)解决。

转换过程如下：

*   删除负节点并从相邻单元格中减去它们的数量。
*   0/0 将是源，m-1，n-1 是汇
*   每个节点都连接到下方和右侧的节点，弧的容量等于其目标节点的值。
*   现在最大流量等于你可以拥有的最大硬币数量

可能有更简单的解决方案，这只是我想到的第一件事。

编辑：正如 dasblinkenlight 在评论中指出的那样，这是行不通的，因为流程实际上是多条路径的组合，这当然不是我们想要的。

# java - “Do-er”类与静态实用程序方法

> ID：12126625
> 
> 赞同：7
> 
> 时间：2012-08-25T23:57:48.640
> 
> 标签：java, oop

假设您有`FileReader`一个带有`read`方法的类。

我知道类级别的属性可以证明拥有一个实例是合理的。但是，通过在相应方法`ReaderUtils`的范围内提取这些相同的属性来停止创建等效类是什么？`static` `read`

简而言之，关于静态实用程序方法，究竟是什么证明了“Doer”类的合理性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T02:15:14.530

接口不能静态实现——接口的实现方法必须是*实例*方法。因此，这禁止[注入](http://en.wikipedia.org/wiki/Dependency_injection)或[JNDI](http://en.wikipedia.org/wiki/Java_Naming_and_Directory_Interface)查找“实用程序类”作为执行某些服务的运行时实现 - 它必须是类的*实例*。这是“实干家”类存在的主要原因之一。

如果在编译时知道实现，则实用程序类很好，并且作为静态方法，它们更可能自然地是无状态的（只要确保任何静态字段都是不可变/无状态的），这是并发服务请求的典型服务器所必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T22:14:32.370

OOP 的本质是封装状态/数据以及相关的行为。静态实用程序方法类似于过程语言中的全局函数——您将行为（静态方法）与状态（此方法的参数）分开，从而打破封装。

这在实践中意味着什么？`reader.read()`您必须调用而不是能够调用`ReaderUtils.read(file)`，这意味着您现在与实现紧密耦合——您已经做出了一个隐含的假设，即您将始终使用`ReaderUtils`并始终传入文件。

如果您改为使用通用`Reader`接口，则可以使用 a `FileReader`today 但将其换成 a`DatabaseReader`或`HttpReader`明天，而无需更改任何其他代码——所有`reader.read()`调用将继续以相同的方式工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T02:15:32.487

这是一个偏好问题。一般来说，Java 偏爱名词（因为人们觉得这更 OO）因此 FileReader。

正如 Jeffrey 所指出的，有时对名词的痴迷会导致不必要的冗长，此时调用会被包含在静态方法中。

# file-upload - 将动态生成的目录名称传递给 cffile 标记的 Destination 属性

> ID：12126627
> 
> 赞同：0
> 
> 时间：2012-08-25T23:58:33.447
> 
> 标签：file-upload, coldfusion, cffile

我正在努力使用以下 cffile 代码。我正在尝试传递一个动态生成的图像目录，其名称存储在一个会话变量中（每个新成员一个）。我需要将该名称传递给 cffile 标记的目标属性：

这是我处理文件上传的代码

```
<cfset mypath=expandpath('UserImages/UploadedImages/' & '#session.details.uimages#')>
<cffile action="upload" destination="#mypath#" nameconflict="makeunique"/> 
```

如果我将 #session.details.uimages# 替换为实际的目录名称，则上传工作正常。是，我正在尝试做的事情，可以实现还是不可能？

当我把头发扯掉时，任何帮助或指导都将受到欢迎！

谢谢大家！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T01:08:44.997

如果该目录不存在，则需要先创建它。

如果 uimages 来自用户，不要忘记首先验证它是一个有效的目录名称（特别是它不包含路径遍历语法，即`..`）。

此外，您的[cffile](http://cfdocs.org/cffile-action-upload)缺少必需的 filefield 属性。

还要注意会话变量周围缺少散列 - 它们是不必要的。

```
<cfset MyPath = expandPath( 'UserImages/UploadedImages/' & session.details.uimages ) />

<cfif NOT DirectoryExists( MyPath )>
    <cfset DirectoryCreate( MyPath ) />
</cfif>

<cffile
    action       = "upload"
    destination  = "#MyPath#"
    nameconflict = "makeunique"
    filefield    = "name_of_field_to_upload_from"
/> 
```

# eclipse - 如何更改 Eclipse 中的所有字体大小？

> ID：12126628
> 
> 赞同：13
> 
> 时间：2012-08-25T23:58:55.547
> 
> 标签：eclipse

关于堆栈溢出问题*[如何在 Eclipse 中为 Java 文本编辑器更改字体大小？](https://stackoverflow.com/questions/4922305)*：

这个问题询问如何在编辑器窗口中更改字体大小。但是有没有办法改变整个 Eclipse GUI 的所有字体大小？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T06:37:04.710

转到窗口->首选项，常规->外观->颜色和字体

进入基础。寻找*文本字体*和*文本编辑器*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T13:32:22.573

[要使用 Linux、 Ubuntu 10.04](https://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_10.04_LTS_.28Lucid_Lynx.29) (Lucid Lynx)更改 Eclipse 工作区中的字体，我修改了系统字体桌面 →*系统*→*首选项*→*外观*→*字体*。

我还修改了 Eclipse v3.7 (Indigo) → menu *Windows* → *Preferences* → *General* → *Appearances* → *Colors and Fonts*。它反映在 Eclipse 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-10T11:31:15.527

在 Windows 7 上更改 Eclipse 包资源管理器字体大小

在您的 Eclipse exe 文件所在的文件位置下方打开

```
eclipse\plugins\org.eclipse.ui.themes_1.0.1.v20141126-1957\css/e4_default_win7.css 
```

添加

```
 .MPart Tree{  
  font-size: 12;  
 } 
```

重新启动 Eclipse 以反映更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-16T22:45:39.420

添加到`Eclipse\plugins\org.eclipse.ui.themes_<version>\css\dark\e4-dark_globalstyle.css`：

```
 * {
    font-size: 13;
} 
```

根据您使用的 Eclipse 版本和主题（我使用的是深色主题！），您可能需要将其添加到另一个 css 文件中，例如`e4_basestyle.css`.

# c# - 如何从按钮项创建列表并通过列表填充它们？

> ID：12126635
> 
> 赞同：0
> 
> 时间：2012-08-26T00:00:46.283
> 
> 标签：c#, winforms, list

我有两个 DropDownButtons (ToolStripDropDownItem) - btn01 和 btn02

我希望 btn02 成为 btn01 项目的排序列表。

我目前有。

```
List<string> list = new List(btn01.DropDownItems); //  I want to create a list
list.Sort();
btn02.DropDownItems = list; // sorted list should be btn02 items. 
```

第一行和第三行有语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:42:55.933

像这样的东西会起作用。

这不是最漂亮的代码，可以减少几行，但我想确保它是清晰的。

```
var unorderedList = new List<ToolStripItem>();
for (int i = 0; i < toolStripDropDownButton1.DropDownItems.Count;i++ )
{
    unorderedList.Add(toolStripDropDownButton1.DropDownItems[i]);
}

var orderedList = unorderedList.OrderBy(l => l.Text).ToList();
toolStripDropDownButton2.DropDownItems.AddRange(orderedList.ToArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:17:48.727

我认为第一行的错误是因为 DropDownItems 不是字符串的集合，试试这个：

```
var list = DropDownItems.ToList(); 
```

如果您希望它们作为字符串，您可以这样做：

```
var list = new List<string>();
foreach(var item in DropDownItems)
{
list.Add(item.ToString());
} 
```

什么是下拉项？您能否添加有关此控件的更多信息？

# c++ - 为什么 boost-multi-index 会返回错误的迭代器？

> ID：12126637
> 
> 赞同：0
> 
> 时间：2012-08-26T00:01:06.750
> 
> 标签：c++, boost, boost-multi-index

Boost 文档说 iterator_to 会返回一个有效的迭代器，但下面的代码表明发生了其他事情。

> Boost.MultiIndex 的所有索引都提供了一个名为 iterator_to 的成员函数，它返回一个指向容器给定元素的迭代器

[http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/tutorial/indices.html#iterator_to](http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/tutorial/indices.html#iterator_to)

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/member.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/random_access_index.hpp>

using boost::multi_index_container;
using namespace boost::multi_index;

struct Test
{
  int id;
  std::string name;
};

struct idx{};
struct id{};
struct name{};

typedef boost::multi_index_container<
  Test*,
  indexed_by<
    random_access<tag<idx> >,
    ordered_unique<tag<id>, member<Test, int, &Test::id> >,
    ordered_unique<tag<name>, member<Test, std::string, &Test::name> >
  >
> TTestTable;

class TestTable : public TTestTable
{
  public:
    // Fill table with some values
    TestTable()
    {
      Test* test1 = new Test();
      Test* test2 = new Test();
      Test* test3 = new Test();
      Test* test4 = new Test();
      test1->id = 1;
      test2->id = 2;
      test3->id = 3;
      test4->id = 4;
      test1->name = "name1";
      test2->name = "name2";
      test3->name = "name3";
      test4->name = "name4";

      push_back(test1);
      push_back(test2);
      push_back(test3);
      std::cout << at(0)->name << std::endl;
      std::cout << at(1)->name << std::endl;
      std::cout << at(2)->name << std::endl;

      typedef TTestTable::index<idx>::type test_table_by_index;
      test_table_by_index::iterator it = get<0>().iterator_to(test1); // gives back a wrong iterator

      std::cout << get<idx>().iterator_to(test1) - get<idx>().begin() << "\n"; // WRONG
      replace(iterator_to(test1), test4); // CRASH
      replace(it, rule4); // CRASH
    }
};

int
main(int argc, char **argv)
{
  TestTable table;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T01:02:38.510

从您提供的链接：

> ```
> // The following, though similar to the previous code,
> // does not work: iterator_to accepts a reference to
> // the element in the container, not a copy.
> int x=c.back();
> c.erase(c.iterator_to(x)); // run-time failure ensues 
> ```

您没有将引用传递给`iterator_to`，而是传递了一个副本。

以下应该有效：

```
Test* const& test1_ref = at(0);

typedef TTestTable::index<idx>::type test_table_by_index;
test_table_by_index::iterator it = get<0>().iterator_to(test1_ref);

std::cout << get<idx>().iterator_to(test1_ref) - get<idx>().begin() << "\n";
replace(iterator_to(test1_ref), test4); 
```

顺便说一句，我不认为`boost::multi_index_container`s 被设计为用作基类，因为它们[不提供虚拟析构函数](http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/reference/multi_index_container.html#constructors)。

# mysql - MySQL ORDER BY > 如果值相等则交换结果

> ID：12126638
> 
> 赞同：1
> 
> 时间：2012-08-26T00:01:28.423
> 
> 标签：mysql, sql-order-by

我正在使用一个简单的 MySQL 语句来查询我的数据库以获取按点击排序的产品建议：

```
SELECT * FROM suggestions WHERE source = :source_item_id ORDER BY clicks DESC LIMIT 7 
```

这一切都按预期工作。但是，如果点击次数相同，有没有办法告诉 MySQL 随机吐出？

例子：

```
Product  Clicks
1        2
2        2
3        3 
```

如果查询，则顺序为 3,2,1，如果点击量不变，则始终为该顺序。如何随机化具有 w 点击次数的产品 1 和 2？时不时地我想交换结果，即让它成为 3、1、2，也许下次是 3、2、1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:18:35.863

如何添加具有随机值的列并对其进行二次排序？

```
SELECT product, clicks, RAND() AS rand 
FROM suggestions 
WHERE source = :source_item_id 
ORDER BY clicks, rand 
DESC 
LIMIT 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T13:30:08.573

为什么不...

```
SELECT product, clicks
FROM suggestions 
WHERE source = :source_item_id 
ORDER BY clicks DESC, RAND()
LIMIT 7 
```

...？

# html - 为什么我的标题栏与滚动条重叠

> ID：12126641
> 
> 赞同：2
> 
> 时间：2012-08-26T00:01:39.027
> 
> 标签：html, css, scrollbar, overlapping

我已经尝试查看已经存在的问题，但其中没有一个解决方案对我有用。基本上，我的标题栏（应该跨越整个屏幕）与滚动条重叠——我似乎无法在滚动条下找到它，这正是我想要的。

![重叠](../Images/60c5ae5381da2c9beed575408cad2af3.png)

[http://jsfiddle.net/9cnXN/2/](http://jsfiddle.net/9cnXN/2/)

[http://jsfiddle.net/9cnXN/2/embedded/result/](http://jsfiddle.net/9cnXN/2/embedded/result/)

这是使用 Rockmelt 作为浏览器。我还可以确认 FireFox 最新版本和 Chrome 的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T10:09:39.267

您可以将可滚动区域的边距调整为正好是页眉和页脚栏的高度 - [**DEMO**](http://jsfiddle.net/9cnXN/3/)

```
.page {
    position: absolute;
    left: 0;
    right: 0;
    overflow: auto;
    margin: 44px 0;
} 
```

# php - 首次加载窗口时运行 onchange ajax

> ID：12126642
> 
> 赞同：0
> 
> 时间：2012-08-26T00:02:11.710
> 
> 标签：php, mysql, ajax, json

我有这个 ajax 设置，当用户更改下拉列表的选择时，它会执行一些 php 计算，然后它会发回结果并输出它们。这一切都很好，除了当用户第一次加载他们受到欢迎的屏幕时，只有空的结果框，并且只有当他们在其中一个下拉框中更改选择时，才会出现结果。我的问题是，无论如何在加载窗口时运行 ajax，所以可以输出默认的下拉选择。

这是ajax代码，如果您需要其他内容，请告诉我：

```
 <script>
$("document").ready(function (){ 

    $(".add_detail_dropdown").change(function(){

        var m = document.getElementById('meter_square');
        var meter_square = m.options[m.selectedIndex].value;

        var s = document.getElementById('story_height');
        var story_height = s.options[s.selectedIndex].value;

        var r = document.getElementById('roof_type');
        var roof_type = r.options[r.selectedIndex].value;

        var q = document.getElementById('material_quality');
        var material_quality = q.options[q.selectedIndex].value;

        var w = document.getElementById('wall_type');
        var wall_type = w.options[w.selectedIndex].value;

        var f = document.getElementById('flooring');
        var flooring = f.options[f.selectedIndex].value;

     $.ajax({
            type: "GET",
            url: "add_extension_calc.php",
            data: { meter_square: meter_square, story_height: story_height, roof_type: roof_type, material_quality: material_quality, wall_type: wall_type, flooring: flooring, estimated_wealth: <?php print "$estimated_wealth";?>, gain_percent: <?php print "$addon_gain_percent";?>  },
            dataType: "json",
            statusCode: {
                200: function (response) {
                                            $("#res_expected_gain").html(response.total_gain);
                                            $("#res_expected_house_price").html(response.house_price);
                                            $("#res_total_supply_cost").html(response.store_price);
                                            $("#res_total_supply_time").html(response.store_time);
                                            $("#res_expected_profit").html(response.expected_profit);
                                         }

            }
        });
})
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:06:36.243

简单地使用`change()`，它会触发你的改变..

```
<script>
    $("document").ready(function (){ 

        $(".add_detail_dropdown").change(function(){
            // ............
        });

        $(".add_detail_dropdown").change();
    });
</script> 
```

# javascript - 如何使用javascript自动单击此表单

> ID：12126646
> 
> 赞同：0
> 
> 时间：2012-08-26T00:02:49.633
> 
> 标签：javascript, click

什么javascript代码可以实现一个自我点击这个表单？

```
 <head><script language=JavaScript1.2></script>
    </head>
    <body>
    <form action="http://www.tumblr.com/follow" id="FormType"  method="post" style="display:block; float:left;" onsubmit="_gaq.push(['_trackEvent', 'Iframe', 'Follow', 'c-h-o-c-o-l-a-t-a');">

                            <input type="hidden" name="form_key" value="QT4EOzpHQoAwecU3oWHu0uThVY">
                            <input type="hidden" name="id" value="c-h-o-c-o-l-a-t-a">
                            <input type="image" src="http://assets.tumblr.com/images/iframe_follow_alpha.png?1037" style="width:58px; height:20px; border-width:0px; display:block; margin-left:3px; cursor:pointer;" alt="Follow" name="image" id="followbb">

                        </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:05:41.067

将此脚本放在`<head>`：

```
<script type="text/javascript">
  function autoClick () {
    document.forms["FormType"].submit();
   }
 window.onload = autoClick;
</script> 
```

当文档完成加载表单将被提交（魔术！）。

# javascript - Javascript 正则表达式

> ID：12126648
> 
> 赞同：0
> 
> 时间：2012-08-26T00:03:13.940
> 
> 标签：javascript, regex, string, replace

这是我的字符串

```
str = "asd;images30/127ef-30-30-wm.jpg;59 | asd;images30/127ef-30-30-wm.jpg;60 | " 
```

和正则表达式是

```
var re = new RegExp(".*?;.*?;"+$(this).parent().attr("id")+" | ","ig"); 
```

和替换功能是

```
str.replace(re,''); 
```

我实际上想`asd;images30/127ef-30-30-wm.jpg;59 |`从字符串中删除。以上正则表达式返回

```
 | asd;images30/127ef-30-30-wm.jpg;60 | 
```

而预期是

```
asd;images30/127ef-30-30-wm.jpg;60 | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:15:23.047

您必须将`|`RegExp 调用中的替换为`\\|`. 这是必要的，因为单个反斜杠将被忽略（如果之后的字符已在转义序列中使用，例如，如果它是一个`n`，这两个将成为换行符转义序列，但对于不属于转义序列的字符，单个反斜杠被忽略），并且额外的一个将导致单个的出现。然后可以在正则表达式中使用它来指示您正在转义文字管道符号，而不是内置的正则表达式“替代”符号。

请注意，如果您的`id`from jQuery 可能是非数字的，您可能还需要转义该值。您可以使用这样的函数对其进行[转义](http://phpjs.org/functions/preg_quote:491)。

要在此处硬编码一个 ID（根据您的示例，该值显然是 59），如果您删除双反斜杠，它不会删除第一个管道：

```
str = "asd;images30/127ef-30-30-wm.jpg;59 | asd;images30/127ef-30-30-wm.jpg;60 | ";
var re = new RegExp(".*?;.*?;"+59+" \\| ","ig");
str = str.replace(re,'');

alert(str) 
```

# python - 同时运行多个python程序

> ID：12126655
> 
> 赞同：6
> 
> 时间：2012-08-26T00:04:44.090
> 
> 标签：python, bash

我有 python 脚本**run.py**：

```
def do(i):
    # doing something with i, that takes time

start_i = sys.argv[1]
end_i = sys.argv[2]
for i in range(start_i, end_i):
    do(i) 
```

然后我运行这个脚本：

```
python run.py 0 1000000 
```

30分钟后脚本完成。但是，对我来说太长了。

所以，我创建了 bash 脚本**run.sh**：

```
python run.py 0 200000 &
python run.py 200000 400000 &
python run.py 400000 600000 &
python run.py 600000 800000 &
python run.py 800000 1000000 
```

然后我运行这个脚本：

```
bash run.sh 
```

6分钟后脚本完成。相当不错。我很高兴。

但我认为，还有另一种解决问题的方法（不创建 bash 脚本），不是吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T00:20:07.023

您正在寻找[多处理](http://docs.python.org/library/multiprocessing.html)包，尤其是`Pool`类：

```
from multiprocessing import Pool
p = Pool(5)  # like in your example, running five separate processes
p.map(do, range(start_i, end_i)) 
```

Besides consolidating this into a single command, this has other advantages over your approach of calling `python run.py 0 200000 &` etc. If some processes take longer than others (and therefore, `python run.py 0 200000` might finish before the others), this will make sure all 5 threads keep working until all of them are done.

Note that depending on your computer's architecture, running too many processes at the same time might slow them all down (for starters, it depends on how many cores your processor has, as well as what else you are running at the same time).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:08:05.387

您可以让您的 python 程序创建独立的进程，而不是 bash 这样做，但这并没有太大的不同。您认为您的解决方案有什么不足之处？

# android - 三星 Galaxy S3 奇怪的 ddms 日志输出

> ID：12126657
> 
> 赞同：0
> 
> 时间：2012-08-26T00:04:59.427
> 
> 标签：android, eclipse, ddms

我有 2 台设备。第一个是搭载 Android 4.1 的 Asus Eee Pad 变压器。当我连接它并使用 ddms 日志（在 Eclipse 中）进行调试时，一切正常：警告为黄色，错误为红色等等。过滤器也可以正常工作。

但是，当我将新的三星 Galaxy S3 与 Android 4.1.1 板载 logcat 连接时，我会看到一些奇怪的未格式化输出。这是一个屏幕截图：

![在此处输入图像描述](../Images/84e117e92d92274a80c6130e897cec57.png)

ddms 似乎将所有消息都视为警告。我已将所有开发工具更新到最新版本。这似乎是一个操作系统错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:40:56.793

它发生在我的 Nexus 中。没有定制的东西。没有rom。当我将 Eclipse 更新到 Juno 时，它得到了解决。最终，如果您想保留您的 Eclipse 版本或已经拥有 Juno，它也可以通过重新安装来工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:18:01.380

在eclipse中-去帮助->检查更新->更新所有内容（ddms和其他东西应该没有更新）就是这样

# macos - OpenGL立方体没有显示，它可能有近平面和远平面吗？

> ID：12126660
> 
> 赞同：1
> 
> 时间：2012-08-26T00:05:03.610
> 
> 标签：macos, cocoa, opengl, glsl, nsopenglview

尝试进行手动透视转换后，我无法显示我的立方体我的代码如下。我怀疑这可能是我的远近飞机号码。

```
-(void)drawRect:(NSRect)dirtyRect
{
    // get the dimensions of the window
    NSSize dim = [self frame].size;

    // clear the background with color
    glClearColor(0.0, 0.0, 0.0, 0.4);
    glViewport(0, 0, dim.width, dim.height);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // variables
    GLfloat cubeHeight = 90.0;
    GLfloat cubeWidth = 90.0;
    GLfloat cubeLength = 200.0;
    //GLfloat alpha = 0.0;
    //GLfloat beta = 0.0;
    //GLfloat gamma = 0.0;

    // cube position data
    GLfloat cubePositionData[] = {0.0, 0.0, 0.0,
        0.0, 0.0, cubeLength,
        cubeWidth, 0.0, cubeLength,
        cubeWidth, 0.0, 0.0,
        0.0, cubeHeight, 0.0,
        0.0, cubeHeight, cubeLength,
        cubeWidth, cubeHeight, cubeLength,
        cubeWidth, cubeHeight, 0.0};

    // cube indices data
    GLubyte cubeIndices[] = {0, 1, 2, 0, 2, 3,
        4, 5, 6, 4, 6, 7,
        1, 2, 6, 1, 6, 5,
        2, 3, 7, 2, 7, 6,
        3, 0, 4, 3, 4, 7,
        0, 1, 5, 0, 5, 4};

    // cube color data
    GLfloat cubeColorData[] = {0.0, 0.3, 0.8, 1.0,
        0.0, 1.0, 0.0, 1.0,
        0.0, 1.0, 0.0, 1.0,
        0.0, 0.3, 0.8, 1.0,
        0.0, 0.3, 0.8, 1.0,
        0.0, 1.0, 0.0, 1.0,
        0.0, 1.0, 0.0, 1.0,
        0.0, 0.3, 0.8, 1.0};

    // array to hold buffer IDs
    GLuint vertexBuffers[2];

    // bind each array of data to separate buffers
    // bind cube position data to the first buffer
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[0]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(cubePositionData), cubePositionData, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    // bind the cube color data to the second buffer
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[1]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(cubeColorData), cubeColorData, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    // enable the shader program
    GLuint programID = [self loadShaders];
    glUseProgram(programID);

    // enable vertex attributes
    // enable cube position attributes
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[0]);
    glEnableVertexAttribArray(VERTEX_POS_INDEX);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    // enable cube color attributes
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[1]);
    glEnableVertexAttribArray(VERTEX_COLOR_INDEX);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    // point to the enabled attribute data
    glVertexAttribPointer(VERTEX_POS_INDEX, VERTEX_POS_SIZE, GL_FLOAT, GL_FALSE, 0, cubePositionData);
    glVertexAttribPointer(VERTEX_COLOR_INDEX, VERTEX_COLOR_SIZE, GL_FLOAT, GL_FALSE, 0, cubeColorData);

    GLfloat offset[] = {0.5, 0.5};
    GLint offsetUnif = glGetUniformLocation(programID, "offset");
    GLint zNearUnif = glGetUniformLocation(programID, "zNear");
    GLint zFarUnif = glGetUniformLocation(programID, "zFar");
    GLint frustumScaleUnif = glGetUniformLocation(programID, "frustumScale");

    glUniform2fv(offsetUnif, 1, offset);
    glUniform1f(frustumScaleUnif, 1.0f);
    glUniform1f(zNearUnif, 1.0);
    glUniform1f(zFarUnif, 3.0);

    // draw the elements
    glDrawElements(GL_TRIANGLES, sizeof(cubeIndices)/sizeof(GLubyte), GL_UNSIGNED_BYTE, cubeIndices);

    glDisableVertexAttribArray(VERTEX_POS_INDEX);
    glDisableVertexAttribArray(VERTEX_COLOR_INDEX);
    glUseProgram(0);

    // flush buffer
    glFlush();
    [[self openGLContext] flushBuffer];

} 
```

问题可能是什么？哦，还有着色器：

```
#version 120

attribute vec3 position;
attribute vec4 inColor;

uniform vec2 offset;
uniform float zNear;
uniform float zFar;
uniform float frustumScale;

varying vec4 outColor;

void main()
{
    vec4 cameraPos = vec4(position, 1.0) + vec4(offset.x, offset.y, 0.0, 0.0);
    vec4 clipPos;

    clipPos.xy = cameraPos.xy * frustumScale;

    clipPos.z = cameraPos.z * (zNear + zFar) / (zNear - zFar);
    clipPos.z += 2 * zNear * zFar / (zNear - zFar);

    clipPos.w = -cameraPos.z;

    gl_Position = clipPos;
    outColor = inColor;
}

#version 120

varying vec4 outColor;

void main()
{
    gl_FragColor = outColor;
} 
```

* * *

好的，将我的代码的一部分更改为如下所示：

```
GLfloat offset[] = {-2.0, -2.0};
GLint offsetUnif = glGetUniformLocation(programID, "offset");
GLint zNearUnif = glGetUniformLocation(programID, "zNear");
GLint zFarUnif = glGetUniformLocation(programID, "zFar");
GLint frustumScaleUnif = glGetUniformLocation(programID, "frustumScale");

glUniform2fv(offsetUnif, 1, offset);
glUniform1f(frustumScaleUnif, 1.0);
glUniform1f(zNearUnif, 1.0);
glUniform1f(zFarUnif, 25.0); 
```

我明白了：

![节目结果](../Images/a533342034b8a5d39fd90a5620281fa0.png)

后端（绿色）不应该在远处看起来更小而不是更大，就像梯形底座一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T02:40:43.133

您似乎只使用缓冲区和着色器。在这种情况下，您应该使用 OpenGL3.2 和 GLSL 1.5。您必须通过在 NSOpenGLView（或控制器）中手动更改上下文来手动更改为核心 opengl。

```
NSOpenGLPixelFormatAttribute attribute[] = 
{
    NSOpenGLPFAOpenGLProfile, NSOpenGLProfileVersion3_2Core,
    0
};

NSOpenGLPixelFormat *pixelFormat = [[NSOpenGLPixelFormat alloc] initWithAttributes:attribute];
NSOpenGLContext *context = [[NSOpenGLContext alloc] initWithFormat:pixelFormat shareContext:nil];
[self setPixelFormat:pixelFormat];
[self setOpenGLContext:context]; 
```

但是您必须更改一些着色器代码，例如将属性/变量更改为输入/输出。

然后，关于您的问题，需要您创建并绑定一个 VAO。只需添加

```
int vao;
glGenVertexArrays(1, &vao);
glBindVertexArray(vao); 
```

在绑定缓冲区和顶点属性指针之前。就是这样。而已。

另外，我认为您的顶点可能有一些问题。由于您正在查看 -Z 位置，因此您的立方体在您身后。因此，您必须将偏移更改为 vec3，并将 Z 偏移设置为 -100，看看您的立方体有多大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T03:54:47.160

好的，我想我修好了。将我的顶点着色器更改为如下所示：

```
#version 120

attribute vec3 position;
attribute vec4 inColor;

uniform vec2 offset;
uniform float zNear;
uniform float zFar;
uniform float frustumScale;

varying vec4 outColor;

void main()
{
    vec4 cameraPos = vec4(position.x, position.y, -position.z, 1.0) + vec4(offset.x, offset.y, -10.0, 0.0);
    vec4 clipPos;

    clipPos.xy = cameraPos.xy * frustumScale;

    clipPos.z = cameraPos.z * (zNear + zFar) / (zNear - zFar);
    clipPos.z += 2 * zNear * zFar / (zNear - zFar);

    clipPos.w = -cameraPos.z;

    gl_Position = clipPos;
    outColor = inColor;
} 
```

我明白了：

![程序结果](../Images/605bb6a63414419427603ce9300e39fa.png)

也许也许？

# php - PHP AJAX 中的数组显示问题

> ID：12126661
> 
> 赞同：0
> 
> 时间：2012-08-26T00:05:10.893
> 
> 标签：php, ajax, arrays

我正在通过检查数据库中是否使用用户名并根据我在网上找到的教程创建了一些代码来学习一些新东西。我理解逻辑，但不确定我是否以正确的方式接近它。在本质上。信息是从表单域传递过来的。如果输入的内容与数据库中的字段匹配，那么我希望它返回/回显结果“是”。如果不匹配，我需要它来回显“否”。似乎直截了当。

本教程是为预先确定的值而设计的。即 $existing_users=array('test',''one','two',three');

虽然我希望 'test',''one','two',three' 实际上从数据库中动态提取。

因此，我开始添加设置以执行此操作，尽管当我尝试将动态值放入其中时，我编写的代码不起作用。我的代码如下：

```
$existing_users = array();
mysql_select_db($database_db, $db);
$result = mysql_query('SELECT * FROM clients') or exit(mysql_error());
while ($row = mysql_fetch_assoc($result)) {$existing_users[] = $row['shortcode'];}

$arr = $existing_users;

$display = "'" . implode("', '", $arr) . "'";

    // THIS IS THE PROBLEM 
    // If the code is written out as:
    // $existing_users=array('test',''one','two',three'); 
    // It works.
    // When the script is coded as below. It doesn't work.
    // Note. If I echo $display is displays 'test',''one','two',three'

$existing_users=array($display);

//value received from the get method
$user_name=$_POST['user_name'];

//checking weather user exists or not in $existing_users array
if (in_array($user_name, $existing_users))
{

//user name is not available
echo "no";
} 
else
{ 
//user name is available 
echo "yes";
} 
```

我不确定我是否以正确的方式接近这一点，因为我正在破解一个在线教程，可能有一个更简单的方法。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:13:09.193

这是一种更快的方法：

```
$user_name=mysqli_real_escape_string($_POST['user_name']);

$result = mysql_query("SELECT * FROM clients where shortcode like '$user_name'") or exit(mysql_error());

if(mysql_num_rows($result)==0)
    echo 'no';
else
    echo 'yes' 
```

我没有验证来自 $_POST 的输入

你到底在遵循什么教程？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:11:36.053

您不需要 remake `$existing_users`，因为您已经从数据库查询中创建了该数组

```
$existing_users = array();
mysql_select_db($database_db, $db);
$result = mysql_query('SELECT * FROM clients') or exit(mysql_error());
while ($row = mysql_fetch_assoc($result)) {
    $existing_users[] = $row['shortcode'];
}

$user_name=$_POST['user_name'];

if (in_array($user_name, $existing_users)){
    echo "no";
} else { 
    //user name is available 
    echo "yes";
} 
```

并尝试将您的代码移动到 PDO

```
$db = new PDO('mysql:host=localhost;dbname='.$database_db, 'username', 'password', array(ATTR::PDO_EMULATE_PREPARES => false));
$stmt = $db->prepare("SELECT * FROM clients WHERE `shortcode`=:shortcode");
$stmt->execute(array(':shortcode' => $_POST['user_name']));

if($stmt->rowCount() == 1){
    echo 'no';
} else {
    echo 'yes';
} 
```

# java - How can I write bits to a byte?

> ID：12126662
> 
> 赞同：1
> 
> 时间：2012-08-26T00:05:17.993
> 
> 标签：java, byte, jdk1.6, bitset

I currently have 16 bits I want to set to variables (2 separate bytes). I've used the BitSet object to hold my bits and while in Java 1.7 there is a toByteArray() method, I need something that works on earlier versions of Java. It doesn't need to use BitSet, but I would prefer that it does (if possible).

If someone could tell me how to write something like 01101011 to a byte, I think that would help me enough. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:11:10.020

您可以使用这段代码来做到这一点：

```
public static byte convert(BitSet bits, int offset) {
  byte value = 0;
  for (int i = offset; (i < bits.length() && ((i + offset) < 8)) ; ++i) {
    value += bits.get(i) ? (1 << i) : 0;
  }
  return value;
} 
```

因此，要转换两个字节，您将执行以下操作：

```
BitSet b = ....;
byte b1 = Helper.convert(b, 0);
byte b2 = Helper.convert(b, 8); 
```

# meteor - Collection update not triggering reaction in Meteor

> ID：12126663
> 
> 赞同：2
> 
> 时间：2012-08-26T00:05:21.877
> 
> 标签：meteor

I'm trying to build an active/inactive indicator into a chat application in Meteor. To do that, I need to keep track of the time of each user's most recent activity on every client. Whenever a user sends a message, this line is called:

```
People.update({ name: login }, { $set: { activity: new Date() }}); 
```

I can see the data changing in the database with the `meteor mongo` command. In another part of the file, I have some code that looks like this:

```
Template.user_listing.people = function () {
  return People.find();
} 
```

In my code, this function only gets called when items are added to or removed from the People collection. The first code example, `People.update(...)`, doesn't trigger a reaction, and I was under the impression that it should. What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:17:27.457

最好避免问题或答案中的`x`和等变量。`y`

重命名`x`为`user_listing`. 不应该是这个样子吗

```
Template.user_listing.people = function () {
  return People.find();
} 
```

现在您有了可以`#each`在模板中传递的数据库游标。

模板看起来像这样，

```
<template name="user_listing">
  {{#each people}}
      Who: {{name}}
      Recent activity: {{activity}}
  {{/each}}
</template> 
```

假设你有，

```
People = new Meteor.Collection('people'); // or whatever your collection name is 
```

[http://docs.meteor.com/#templates](http://docs.meteor.com/#templates)有一个例子。用那个验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T16:44:34.490

Meteor 具有反应性的“部分”。这意味着每当反应源发生变化时，计算（使用该反应源的所有其他变量和函数）都会刷新（重新运行）。您可以通过订阅 people 集合来实现您所描述的。订阅是反应性的。当您更改人员文档时，更改也将被推送到客户端，并且由于订阅是反应性的，您的模板将使用新内容更新......

TLDR：为了在前端自动接收数据库更新，您需要删除自动发布包并使用发布和订阅，就像我正在做的一样。

```
// client js
Template.user_listing.onCreated(function () {
  this.subscribe('people');
});

Template.user_listing.helpers({
  getPeople: function () {
    return People.find();
  }
});

// then, when a user sends a message you trigger  the update
People.update({ name: login }, { $set: { activity: new Date() }});

// and in your html template
<template name="user_listing">
  {{#each people}}
    Who: {{name}}
    Recent activity: {{activity}}
  {{/each}}
</template>

// server
Meteor.publish('people', function () {
  return People.find();
});

// on both server and client
People = new Meteor.Collection('people'); 
```

阅读有关发布和订阅的更多信息并遵循示例： [https ://www.meteor.com/tutorials/blaze/publish-and-subscribe](https://www.meteor.com/tutorials/blaze/publish-and-subscribe)

# c# - 拖放图像

> ID：12126664
> 
> 赞同：-1
> 
> 时间：2012-08-26T00:05:30.817
> 
> 标签：c#, winforms

我有一个带有 6 个标签的表单，其中 4 个标签中有 png 图像。我已经设置好了，因此用户可以将 4 个图像中的一个拖到 label5 中，而 label6 会给他们一条消息，告诉他们他们选择的 4 个图像中的哪一个我有拖放部分工作，但无法弄清楚我需要告诉什么代码他们被选中了。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace Drag_Drop_Tester2
{
public partial class Form1 : Form
{
    Image img1 = Image.FromFile("Peg_Red.png");
    Image img2 = Image.FromFile("Peg_Blue.png");
    Image img3 = Image.FromFile("Peg_Green.png");
    Image img4 = Image.FromFile("Peg_Orange.png");

    public Form1()
    {
        InitializeComponent();
    }

    private void DD_MouseDown(object sender, MouseEventArgs e)
    {
        Label lblPic = (Label)sender;
        lblPic.DoDragDrop(lblPic.Image, DragDropEffects.Copy);
    }

    private void DD_DragEnter(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(typeof(Bitmap)))
            e.Effect = DragDropEffects.Copy;
        else
            e.Effect = DragDropEffects.None;
    }

    private void DD_DragDrop(object sender, DragEventArgs e)
    {
        Label lblPic = (Label)sender;
        Graphics g = lblPic.CreateGraphics();
        g.DrawImage((Image)e.Data.GetData(typeof(Bitmap)), new Point(0, 0));

        if ("code that goes here")
            lblMsg.Text = "You picked red";
        else
            lblMsg.Text = "I can't decide what you picked";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:49:18.140

没关系，我想通了：

```
If (sender == label1)

lblMsg.Text = "You Picked Red"; 
```

我让它变得更难然后它需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:54:41.603

您发布的内容将起作用，但您也可以向图像添加标签，这样您就不必依赖标签的名称来确定丢弃的图像。看看这样的事情是否适合你。

```
public partial class Form1 : Form
{
    Image img1 = Image.FromFile("Peg_Red.png");
    Image img2 = Image.FromFile("Peg_Blue.png");
    Image img3 = Image.FromFile("Peg_Green.png");
    Image img4 = Image.FromFile("Peg_Orange.png");

    public Form1()
    {
        InitializeComponent();
        img1.Tag = 1;
        img2.Tag = 2;
        img3.Tag = 3;
        img4.Tag = 4;
        label1.Image = img1;
        label2.Image = img2;
        label3.Image = img3;
        label4.Image = img4;

    }

    private void DD_MouseDown(object sender, MouseEventArgs e)
    {
        Label lblPic = (Label)sender;
        lblPic.DoDragDrop(lblPic.Image, DragDropEffects.Copy);
    }

    private void DD_DragEnter(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(typeof(Bitmap)))
            e.Effect = DragDropEffects.Copy;
        else
            e.Effect = DragDropEffects.None;
    }

    private void DD_DragDrop(object sender, DragEventArgs e)
    {
        Label lblPic = (Label)sender;
        Graphics g = lblPic.CreateGraphics();
        var image = (Image)e.Data.GetData(typeof(Bitmap));
        var index = (int)image.Tag;
        g.DrawImage(image, new Point(0, 0));

        switch (index)
        {
            case 1:
                break;
            case 2:
                break;
            case 3:
                break;
            case 4:
                break;
            default:
                break;
        }
        g.Dispose();
        image.Dispose();

    } 

} 
```

# java - 尽管初始化，java运行时NullPointerException

> ID：12126668
> 
> 赞同：0
> 
> 时间：2012-08-26T00:06:30.737
> 
> 标签：java, nullpointerexception

尽管正确初始化了我的所有对象（据我所知），但我得到了一个空指针异常。基本上，我需要有人指出我在哪里是个白痴。

运行时 NPE 发生在这里：

```
public class CDAlbum implements Album{
    private String title;
    private String genre;
    private String artist;
    private ArrayList<String> tracks;
    private int i=0;

    public CDAlbum() {    //constuctor
        title   = "Unknown CD";
        genre   = "Unknown genre";
        artist = "Unknown artist";
        ArrayList<String> tracks = new ArrayList<String>(); //NPE occurs on this line
        tracks.add("-- no tracks --");
    }
    //snip 
```

以及调用构造函数的代码：

```
CDAlbum tempCD;
tempCD = new CDAlbum(); 
```

我想我正在正确初始化所有内容，所以我看不到这个空指针异常来自哪里。一点帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:17:31.330

事实证明，您的问题是因为您忘记重新编译代码！从您的保管箱下载代码后，我反编译`CDAlbum`以显示一个过时的构造函数：

```
public CDAlbum() {
  i = 0;
  title = "Unknown CD";
  genre = "Unknown genre";
  artist = "Unknown artist";
  tracks.add("-- no tracks --");
} 
```

重新编译后（按照我的建议），代码似乎工作正常。

* * *

正如我在[评论](https://stackoverflow.com/questions/12126668/java-runtime-nullpointerexception-despite-initialising#comment16216772_12126668)中所说，您的代码可能已被修改，而**不是**产生异常的实际代码；您很可能尝试添加到该`tracks`字段，但**您从未初始化它** - 您*只*初始化了局部变量`tracks`。

尝试执行以下操作...

```
tracks = new ArrayList<>(Collections.singleton("-- no tracks --")); 
```

您应该发布[SSCCE](http://sscce.org)或至少发布未修改的代码以获得准确的帮助。如果您将其视为黑匣子，将很难解决该问题。

* * *

请注意，您可以将所有初始化移动到字段声明，例如

```
private String title = "Unknown CD"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:14:14.667

线

```
ArrayList<String> tracks = new ArrayList<String>(); 
```

应该

```
tracks = new ArrayList<String>(); 
```

你在不应该的时候重新声明它，因为你已经在上面的类范围内声明了它

```
private ArrayList<String> tracks; 
```

# jquery - 类型错误：没有物体命名为轨道

> ID：12126670
> 
> 赞同：1
> 
> 时间：2012-08-26T00:06:48.787
> 
> 标签：jquery, css, css-frameworks

我正在尝试使用 Zurb 的 Foundation 3。他们的一个功能称为轨道滑块，我正在尝试使用它。但是我收到了这个错误和另一个错误，

> 未捕获的 ReferenceError：未定义 jQuery
> 
> 未捕获的类型错误：对象 [对象对象] 没有方法“轨道”

这是我的代码：

```
html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Mama's Kitchen</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href='http://fonts.googleapis.com/css?family=Shadows+Into+Light+Two' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" type="text/css" href="stylesheets/app.css" />
        <link rel="stylesheet" type="text/css" href="stylesheets/foundation.css" />
        <link rel="stylesheet" type="text/css" href="stylesheets/foundation.min.css" />
        <script type="text/javascript" src="javascripts/modernizr.foundation.js"></script>
        <script type="text/javascript" src="javascripts/app.js"></script>
        <script type="text/javascript" src="javascripts/foundation.min.js"></script>

        <script type="text/javascript" src="javascripts/jquery.foundation.accordion.js"></script>
        <script type="text/javascript" src="javascripts/jquery.foundation.alerts.js"></script>
        <script type="text/javascript" src="javascripts/jquery.foundation.buttons.js"></script>
        <script type="text/javascript" src="javascripts/jquery.foundation.forms.js"></script>
        <script type="text/javascript" src="javascripts/jquery.foundation.mediaQueryToggle.js"></script>
        <script type="text/javascript" src="javascripts/jquery.foundation.navigation.js"></script>
        <script type="text/javascript" src="javascripts/jquery.foundation.orbit.js"></script>
        <script type="text/javascript" src="javascripts/jquery.foundation.reveal.js"></script>
        <script type="text/javascript" src="javascripts/jquery.foundation.tabs.js"></script>
        <script type="text/javascript" src="javascripts/jquery.foundation.tooltips.js"></script>
        <script type="text/javascript" src="javascripts/jquery.js"></script>
        <script type="text/javascript" src="javascripts/jquery.placeholder.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    </head>
    <body style="background-color: #EE9A49">
        <div class="row">
            <div class="nine columns centered " >
                <img src="images/il_fullxfull.148292217.jpg" style="float: left" width="150px"  height="150px"/>
                <h3 style="font-family:  'Shadows Into Light Two', cursive;">Mama's Indian Kitchen</h3>
                <h5 style="font-family:  'Shadows Into Light Two', cursive;">Authentic Indian Food</h5>
                <hr>
            </div>
        </div>
        <br />
        <br />
        <div class="row">
            <div class="nine columns centered">

                <div id="featured">
                    <img src="images/528061_432208526817809_425531179_n.jpg" />
                    <img src="images/578889_431847450187250_114066073_n.jpg" />
                    <img src="images/579962_431846126854049_1905559928_n.jpg" />
                </div>
            </div>
        </div>
        <script type="text/javascript">
            $(window).load(function() {
                $('#featured').orbit();
            });
        </script>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T00:08:54.570

首先加载`jquery.js`（在 jquery 插件之前）应该可以解决您的问题

# java - 如何在 Eclipse 中为 JSP、Servlet、JPA、Hibernate Web 开发设置项目

> ID：12126679
> 
> 赞同：1
> 
> 时间：2012-08-26T00:08:24.323
> 
> 标签：java, eclipse, hibernate, jsp, servlets

我是休眠的新手。

我有一个使用 MySQL、JDBC、JSP/Servlet、Tomcat 技术的学校项目。

我在每个 Servlet 中进行数据库连接的方式是：

1.  在 JDBC 中建立数据库连接。
2.  创建查询语句并执行它。
3.  关闭数据库连接。

这是非常非常乏味的，所以我想使用 JPA 和 Hibernate 来处理它。

我查看了一些教程，发现 Eclipse 中有一个 JPA Project 选项，所以继续使用它。

现在我对如何将 JSP/Servlet 添加到这个项目中感到困惑。似乎这种类型的项目不适用于处理任何前端技术。

谁能帮我解决这个问题？在我的情况下，我应该使用什么类型的 Eclipse 项目？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:49:46.897

你可以使用任何你想要的 Eclipse 项目模板，它们只是为了方便而设置目录结构和库。如果您愿意，您可以从一个普通的 Java 项目开始，这只是了解要设置哪些库/依赖项的问题。我个人的偏好是使用动态 Web 项目，因此它设置了我的 Web 目录结构和 web.xml。

将 JPA/Hibernate 添加到项目包括：

1) 映射你的类（注解或 xml）
2) 创建 EntityManagerFactory/SessionFactory
3) 在你需要访问数据库的地方注入工厂

如果这是您的第一个重要的数据库应用程序，请查看[DAO 模式](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)。它将帮助您了解如何从应用程序逻辑中抽象出特定于数据库的决策（例如 JDBC 与 Hibernate 与 JPA）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:26:21.790

不确定您查看了哪些教程和信息。有很好的信息可用，但首先你可以快速浏览一下这里的一些 myeclipse 教程[，这里](http://www.myeclipseide.com/documentation/quickstarts/jpa/)的教程[很好](http://tv.jetbrains.net/channel/intellij-idea)。干杯。

# php - PHP 如何与 HTML 交互，反之亦然？

> ID：12126684
> 
> 赞同：15
> 
> 时间：2012-08-26T00:09:39.133
> 
> 标签：php, html

我正在学习互联网和网站的运作方式。我想我了解 PHP 处理器如何处理 .php 文件：

浏览器请求以 .php 结尾的网页并将请求发送到该网页的服务器。
服务器询问“我能找到那个页面吗？”
如果服务器没有找到它，服务器发回错误。
如果服务器找到页面，服务器会询问“文件扩展名是否以 .html 或 .php 结尾”？
如果它以 .html 结尾，服务器将页面发送回浏览器。
如果它以 .php 结尾，则将页面交给 PHP 处理器。
PHP 处理器逐行扫描页面。它构建了一个经过处理的 HTML 页面。
如果它找到 HTML，它会将其作为它正在构建的已处理 HTML 页面的一部分传递。
如果它找到 PHP 脚本，PHP 处理器可能会也可能不会输出 HTML。
PHP 处理器完成后，将处理后的页面交给 Web 服务器以发送到浏览器。

HTML 是否仍然为 .php 文件提供结构，就像 HTML 为也使用 CSS 的网页提供结构一样？当我说结构时，我的意思是划分，以及头部和身体部分。结构与网页的基本骨架一样。似乎在某些网页上，PHP 比 HTML 还多。有时只有最低限度的 HTML，其余的是 PHP 和 Javascript，这就是网页的制作方式吗？

总之，包含 PHP 代码的网页需要具有 .php 扩展名。一旦 PHP 处理器遇到`<? PHP`or `<?`，服务器将代码发送到 PHP 处理器（这个措辞可能是多余的）。PHP 处理器的输出可以是任何东西。
任何东西都包括：

*   CSS
*   HTML
*   Javascript？
*   XML？
*   XHTML？
*   图片
*   声音？
*   视频？
*   flash之类的动画？

显然可能需要强制内容类型，但可以做到。
HTML 是所见即所得。
要在网页到达用户浏览器后对其进行控制和操作，可以使用 Javascript。随着移动设备和一些不同类型的浏览器的出现，发明了 jQuery 以使开发 Javascript 程序更容易。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T00:21:24.337

HTML 是网络的语言。它是一种标记语言，这意味着我们唯一可以使用它的就是“标记”文档，即设计最终用户对内容的外观。

想象一下，我们有一个向用户显示日期的页面。

我们可以使用一些 HTML 来做到这一点：

```
<p>Sunday 26 August 2012</p> 
```

但是假设我们想让该页面保持最新。我们必须每天手动更改日期。因为 HTML 是静态的，所以不能动态更改。

根据页面的加载时间，能够自动生成将正确的日期添加到页面可能会很有用。

这就是 PHP 的用武之地。PHP 是一种脚本语言，虽然它可以用于很多事情，但它的主要用途之一是动态生成 HTML。因此，与其写今天的日期——我们可以做的是使用一些 PHP 并说。

```
<p><? echo date("l j F Y");?></p> 
```

这将为我今天打印“2012 年 8 月 26 日星期日”，明天“2012 年 8 月 27 日星期一”，依此类推。

我需要将这个新版本的页面保存为 page.php 而不是 page.html，因为我需要我的服务器（使用 PHP 设置）将页面发送到 PHP 解释器。它会寻找特殊的`<?php`或`<?`尝试处理它找到的任何东西。在这种情况下，它会在我的页面上吐出正确的日期文本，并将其添加到页面中，然后再发送给用户。

我们可以用 PHP 做很多很酷的事情。它是“服务器端”技术，这意味着它在服务器上完成工作，然后将添加了所有动态内容的完成页面发送给我们。

有时我们可能希望在页面到达用户浏览器后对其进行控制和修改。为此，我们需要一些“客户端”技术，即在用户浏览器中运行的代码。最常见的客户端语言选择是 javascript。

同样，我们可以使用 Javascript 做很多事情，但大多数情况下，我们在网页中使用它以允许我们在 HTML 页面到达用户后控制它的元素。

我们可能希望在页面上隐藏某些内容，然后仅在用户单击按钮后才显示它。我们可以用 javascript 做到这一点。

现在因为 Javascript 是“客户端”技术，即它在您的浏览器中运行，它实际上可能很难使用，因为您必须编写适用于各种不同浏览器的代码，现在也可以在手机上运行！为了使这项工作更容易，非常聪明的开发人员通过创建库和框架来使用 javascript 来控制网页中的元素，从而减轻了很多痛苦。其中最流行的一种是[jQuery 框架](http://jquery.com/)。我认为 jQuery 是学习中最有趣的东西，因为它允许你在网页中做所有“很酷的东西”——让东西淡入、淡出、播放声音、移动元素等等

* * *

我希望这可以帮助您了解不同的技术如何帮助您实现不同的目标。

**TL;DR**版本将是：

HTML & CSS - 列出你的页面的外观。

PHP - 帮助您动态生成 HTML。

JavaScript - 帮助您使页面更具交互性，并可以响应用户的点击或其他操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T00:23:36.283

最重要的是要了解 HTML 和 PHP 之间的区别。在 HTML 中，您编写代码、上传代码，然后用户将随后下载该页面以及所有代码。用户的浏览器会解释此代码并向用户显示您想要的页面（希望如此）。换句话说，HTML 是一种所见即所得，从某种意义上说，所有代码都交给用户并由浏览器解释。

使用 PHP，它的工作方式略有不同，因为您实际上并没有下载作者编写的代码。发生的情况是，如果您要下载 php 页面，则该文件中的代码首先由服务器处理，然后您下载代码的输出，而不是整个代码。这又将像以前一样是 HTML，这就是为什么您永远不会在网页源代码中看到 PHP 代码的原因。

使用 PHP 的目标是使用服务器的处理能力来构建（通常）动态网页。一个非常基本的示例是在网页上显示一天中的正确问候语。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T00:19:48.447

轻微变化...

PHP 处理器逐个字符地扫描页面。
直到一个 <? PHP 发现此文本以一种复制模式直接发送到 Web 服务器。
（此文本可能是 HTML、XML、JavaScript 或其他任何内容）。
一次在 <? PHP 被发现输入被定向到 PHP，它会用它做任何事情。
PHP 的任何标准“打印”输出都会发送到传出的 http 流。
一旦找到 ?>，流就会恢复到原始复制模式。

PHP 能够发送 HTML、CSS、JavaScript 或其他任何内容。您可能需要强制内容类型，但可以做到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T01:00:41.437

PHP 并没有什么特别之处。基本区别在于用编程语言编写的静态文件和动态文件。

静态文件只是由服务器直接发送到浏览器。这些不仅仅是 HTML，图像文件也是如此。当您下载应用程序或 PDF 时，使用相同的机制——它可能是 ZIP 文件、EXE、磁盘映像（Mac 下载常见）。

在动态文件的情况下，文件以某种方式执行，并且它产生的输出被发送到浏览器。动态文件可以是任何语言——它甚至可以是二进制编译的可执行文件。然而，脚本语言通常是最受欢迎的，仅仅是因为它们往往更容易编写 Web 应用程序。因此，已经编写了很多库来支持 Web 应用程序——这是一种积极的反馈情况。在网络的早期，Perl 可能是最常用的语言。我们没有像现在这样过多的脚本语言。

PHP 的特别之处在于它是专门为编写网页脚本而设计的。在所有其他语言中，您必须编写显式命令来生成任何输出。PHP 处理器简单地逐字输出文件内容，直到遇到`<?php`标记（它还可以识别一些其他标记）。然后它开始执行程序，直到它看到`?>`，此时它恢复为逐字输出。

另一种思考方式是，外界的任何事情都被视为一项重大`echo`声明。事实上，这个模型是有必要理解的，你实际上可以在语句中间切换模式。你可以做：

```
<?php
if(something){
    ?>
    some text
    <?php
} else {
    ?>
    some other text
    <?php
} 
```

这显然是只输出一行的愚蠢方式，但想象一下如果它是一大块文本。基本上，PHP 的设计允许您编写一个普通的 HTML 网页，然后在您需要的地方嵌入编程代码以生成动态内容。

虽然 PHP 脚本输出 HTML 是最常见的，但并非总是如此。有一个输出图像的 PHP 脚本并不少见。它可以通过使用数据库来存储图像或图像文件的位置来实现。它还具有内置和库函数，可以动态生成图像数据。例如，如果您访问一个生成图表的网站，这些图表可能是由 PHP 脚本生成的。

# javascript - NodeJS REPL：为什么这个变量赋值失败？

> ID：12126686
> 
> 赞同：4
> 
> 时间：2012-08-26T00:10:07.100
> 
> 标签：javascript, node.js, scope, global, read-eval-print-loop

有人可以帮我理解以下行为吗？我希望，因为我可以从这个回调中*设置*全局`f`，我也应该能够*改变*它。我不太了解节点如何在 REPL 中处理上下文与全局，以理解这一点，我将不胜感激。

开始一个 REPL 没有`useGlobal`

```
$ cat test.js 
var repl = require('repl');
repl.start({useGlobal:false}); 
```

现在尝试`f`连续设置两次：

```
$ node test.js 
> f
ReferenceError: f is not defined
>  setTimeout(function(){f=1;}, 0);
> f
1 
```

第一次工作......现在再试一次：

```
>  setTimeout(function(){f=2;}, 0);
> f
1 
```

哼！

第一次运行设置它；第二个不影响它。

（设置`useGlobal`：`true`我得到了我期望的行为。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:14:37.840

这是因为 Node 的错误 vim 模块在幕后运行您的代码。当您禁用 useGlobal 时，它会更改它运行代码的方式，从 vm.runInThisContext 更改为 vm.runInContext [1]。基本上发生的事情是，它将所有变量从指定的沙箱对象复制到它运行代码的实际全局对象，执行代码，然后将所有内容复制回来。当您使用 setTimeout 时，将*在*所有内容复制回来后进行更改。这部分归咎于 repl 模块 [2]，部分归咎于 vm 模块 [3]。我相信 vm 模块将在下一个版本中进行大修。

*   [1] [https://github.com/joyent/node/blob/master/lib/repl.js#L111](https://github.com/joyent/node/blob/master/lib/repl.js#L111)
*   [2] [https://github.com/joyent/node/blob/master/lib/repl.js#L341](https://github.com/joyent/node/blob/master/lib/repl.js#L341)
*   [3] [https://github.com/joyent/node/blob/master/src/node_script.cc#L114](https://github.com/joyent/node/blob/master/src/node_script.cc#L114)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-14T11:01:00.047

尝试在控制台中输入 .clear。它为我更新了全球价值观。

从所选答案中，以下行对我不起作用。repl.start('>',{useGlobal: true});

# html - FontFace，Firefox 问题...使用字体松鼠

> ID：12126693
> 
> 赞同：0
> 
> 时间：2012-08-26T00:11:48.927
> 
> 标签：html, css, fonts, font-face

在我的页面上，我将字体称为如下：

```
<link rel="stylesheet" href="fonts/Bebas/stylesheet.css" type="text/css" charset="utf-8" /><!---BebasRegular ---> 
```

然后，当我提到字体时，我使用如下代码：

```
#pagewrapper {
    font: 14px/1.4 'BebasRegular', sans-serif;
          } 
```

最后，我直接从字体松鼠使用以下代码：

```
/* Generated by Font Squirrel (http://www.fontsquirrel.com) on July 18, 2012 03:57:10     PM America/New_York */
@font-face {
font-family: "BebasRegular";
src: url('BEBAS___-webfont.eot');
src: url('BEBAS___-webfont.eot?#iefix') format('embedded-opentype'),
     url('BEBAS___-webfont.woff') format('woff'),
     url('BEBAS___-webfont.ttf') format('truetype'),
     url('BEBAS___-webfont.svg#BebasRegular') format('svg');
font-weight: normal;
font-style: normal;

} 
```

我只是直接从字体松鼠解压，没有更改任何其他文件或将任何内容移出目录。

因此，该字体在 chrome 上完美运行，即和 safari。但是，在 Firefox 中是行不通的。我知道这不是一个非常有趣的问题——但我一无所知。出了什么问题？谁能发现这个问题？

我觉得它的设置如此简单，不应该有任何问题的余地...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:24:23.453

检查字体系列名称。在这两种情况下，您如何称呼字体是不同的

```
font-family: "BebasRegular"; 
```

和

```
font: 14px/1.4 'BebasNeueRegular', sans-serif; 
```

尝试@font-face 中定义的**BebasRegular ：**

```
#pagewrapper {
font: 14px/1.4 'BebasRegular', sans-serif;
} 
```

# javascript - 如何根据屏幕大小隐藏带有 jQ uery 的 div

> ID：12126695
> 
> 赞同：2
> 
> 时间：2012-08-26T00:12:15.623
> 
> 标签：javascript, jquery, responsive-design, show-hide, banner

我正在编写一个响应式 WordPress 主题，并且我想根据查看器的屏幕分辨率隐藏一个 div。

我在一个 div 中有一个来自 BuySellAds 的 468 像素 x 60 像素的广告横幅，我想对在智能手机或平板电脑上查看该网站的观众隐藏它。

我尝试使用 CSS3 媒体查询来实现这一点，但它不起作用。

这可以使用jQuery来实现吗？如果是这样的话，任何能指引我正确方向的代码将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T00:17:31.157

您可以从`$(window)`选择器中获取值。用于获取当前值；使用`resize()`方法：

[这是工作的jsFiddle。](http://jsfiddle.net/8hWfq/8/)

```
var range = 200;
//for getting begining values
var windowW = $(window).height();
var windowH = $(window).width();
console.log(windowW+'X'+windowH);

//for getting current values
$(window).resize(function() {
   var windowW = $(this).height();
   var windowH = $(this).width();
   console.log(windowW+'X'+windowH);

   if( windowW < range ) {
      $('.ele').hide();
   }else{
      $('.ele').show();
   }
});​ 
```

**编辑：**您也可以使用纯 css3 执行此操作，使用此 css：

```
@media only screen and (min-width: 767px) { .ele { display:none; } } 
```

如果您想进一步使用**jQuery 滚动值，我建议检查这些答案：** [设置窗口滚动动画的 CSS 值限制](https://stackoverflow.com/questions/11971475/setting-css-value-limits-of-the-window-scrolling-animation/11971912#11971912) 和[如何在页面底部构建简单的粘性导航？](https://stackoverflow.com/questions/11983294/make-div-stick-to-bottom-of-browser-then-top-of-browser-on-scroll/11983369#11983369)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:18:13.937

```
$(window).resize(function(){
  if($(window).width() < 500){
    $('#obj_id').hide();
  }else{
    if($('#obj_id').is(':hidden'){
      $('#obj_id').show();
    }
  }
});
$(window).trigger('resize'); //so the resize function runs on-load 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T00:20:36.753

和：

```
$(window).height();   // returns height of browser viewport
$(document).height(); // returns height of HTML document 
```

你可以得到高度大小......（http://api.jquery.com/height/）并且......

```
$(window).width();   // returns width of browser viewport
$(document).width(); // returns width of HTML document 
```

宽度大小... (http://api.jquery.com/width/)

然后.. 用一个简单的 IF.. 你可以做你想做的;-)

```
if($(window).width()<1024)$('#divID').hide(); 
```

# php - 获取数组变量

> ID：12126700
> 
> 赞同：-1
> 
> 时间：2012-08-26T00:13:27.040
> 
> 标签：php, arrays, serialization

我得到`serialize($result->response)`了正在保存到文件的字符串，但我需要其中的变量，我该如何访问它们？我试过 f.ex：

```
$result->response['StatusCode']
$result->response[StatusCode] 
```

olso 带未大写字母

但它不工作

我将它保存到这样的文件中

> write_to_file("debug.txt", "订单详情：\n\n " . serialize($result->response) . "\n\n");

在文件中是这样的：

> a:1:{s:8:"OpenPayU";a:2:{s:14:"HeaderResponse";a:3:{s:10:"SenderName";s:8:"checkout";s:7 :"版本";s:3:"1.0";s:9:"算法";s:3:"MD5";}s:19:"OrderDomainResponse";a:1:{s:21:"OrderRetrieveResponse" ;a:10:{s:5:"ResId";s:32:"31cc3099884b92879ca144c5048ad07f";s:6:"状态";a:1:{s:10:"StatusCode";s:16:"OPENPAYU_SUCCESS" ;}s:13:"MerchantPosId";s:5:"37857";s:9:"SessionId";s:32:"77bd6bf3a1f029e250dbdccd59348bcc";s:14:"CustomerRecord";a:6:{s:10 :"CustomerId";s:8:"nyi3iw6v";s:5:"Email";s:28:"meil@meil.com.pl";s:5:"电话";s:15:"(+ 48) 786265656";s:9:"名字";s:5:"mieta";s:8:"LastName";s:5:"mieta";s:8:"Language";s:2:"pl";}s:11:"OrderStatus";s:21:"ORDER_STATUS_COMPLETE";s:13:"PaymentStatus ";s:18:"PAYMENT_STATUS_END";s:10:"PaidAmount";s:4:"3000";s:12:"CurrencyCode";s:3:"PLN";s:7:"PayType"; s:1:"t";}}}}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:22:21.607

尝试对数据进行反[序列化。](http://php.net/manual/en/function.unserialize.php)看起来你的序列化字符串是一个数组，而不是一个对象。你有任何错误吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:33:37.107

他们没有解释完。

在您[序列化（）](http://php.net/serialize)一个数组并将其存储在某个地方之后，然后您想使用它，您必须[取消序列化（）](http://php.net/unserialize)以再次使其成为数组

所以它会是

```
$file = file_get_contents('debug.txt');
$array = unserialize($file);
echo $array['StatusCode']; 
```

# jsf - JSF 数据表 - 编辑多个 InputText 框

> ID：12126702
> 
> 赞同：0
> 
> 时间：2012-08-26T00:13:57.773
> 
> 标签：jsf, datatable

我目前有一个显示数据库中数据的数据表。我正在尝试为用户添加一种方法来编辑数据表的当前行（在数据表本身内部，没有外部表单或按钮），然后将其提交给支持 bean，然后更新数据库。

我有一些条件渲染，允许用户按下特定行上的编辑按钮，并将输出文本更改为输入文本框供他们编辑。

一般外观：

inputText1 inputText2 inputText3（保存按钮）

我遇到的问题是，除非用户在每个 inputText 上手动点击返回，否则 bean 中的值不会更新。除了调用数据库更新方法之外，保存按钮似乎没有做任何事情，而是使用表中的原始（未更新）数据。我已经为此工作了几个小时，似乎无法取得任何进展。

如果有人能指出我正确的方向，我将不胜感激。基本上我想要的是每行中的一个按钮（保存），它将捕获用户在框中键入的值。

示例代码：

```
<h:dataTable id="dt1" value="#{Results.players}" var= "item" bgcolor="#F1F1F1" border="10" cellpadding="5" cellspacing="3">
    <h:column>
        <f:facet name="header"><h:outputText value="ID"/></f:facet>
        <h:outputText value="#{item.id}"/>
    </h:column>
    <h:column>
        <f:facet name="header">
            <h:outputText value="Name"/>
        </f:facet>
        <h:outputText value="#{item.name}" rendered="#{not item.editable}"/>
        <h:form>
            <h:inputText value="#{Results.currentName}" rendered="#{item.editable}" immediate="true"/> 
        </h:form>
    </h:column>
    <h:column>
        <f:facet name="header">
            <h:outputText value="Department"/>
        </f:facet>
        <h:outputText value="#{item.department}" rendered="#{not item.editable}"/>
        <h:inputText value="#{Results.currentDepartment}" rendered="#{item.editable}" immediate="true"/> 
    </h:column> 
```

还有按钮。编辑将正常显示，单击“保存”按钮时将显示该行将呈现为输入文本。

```
<h:column>
    <f:facet name="header">
        <h:outputText value="Edit"/>
    </f:facet>
    <h:form>
        <h:commandLink value="Edit" rendered="#{not item.editable}" action="#{Results.editPlayers(item)}"/>
        <h:commandLink value="Save" rendered="#{item.editable}" action="#{DBupdate.updatePlayers(item)}"/>
    </h:form>
</h:column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:09:15.687

在这些情况下更正常的一个问题是不更新屏幕字段，一种强制 jsf 更新字段的方法如下：

```
<h:commandLink ..>
    <f:ajax event="click" render="@all" execute="@this" />
</h:commandLink> 
```

或者

```
<h:commandLink ..>
    <f:ajax render="@all" execute="@form" />
</h:commandLink> 
```

问候，

# c - Scanf 在带有 GDB 的 Eclipse CDT 中似乎无法在调试模式下工作

> ID：12126703
> 
> 赞同：2
> 
> 时间：2012-08-26T00:13:59.937
> 
> 标签：c, gdb, eclipse-cdt, scanf

在调试模式下运行此代码时：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int a, b, c;
    scanf("%d%d%d", &a, &b, &c);
    printf("Values entered: %d %d %d\n", a, b, c);
    return EXIT_SUCCESS;
} 
```

该程序不会请求任何用户输入，只会输出：

> 输入值：18 78 2130026496

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:13:59.937

似乎问题是由在运行之前`GDB`写入`stdin`以下行引起的`scanf`：

> 18-list-thread-groups -- 可用

并将`scanf("%d%d%d", &a, &b, &c);`该行解释为 int 而不是等待用户输入。

我使用的当前解决方案是`stdin`在程序开始时使用：

```
int ch;
while ((ch = getchar()) != '\n' && ch != EOF); 
```

我知道这是一种 hack，但我搜索了一个多小时的解决方案，但我找不到任何解决方案。我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T17:19:49.367

我有同样的问题。发现如果使用换行符或使用输入函数，则必须清除输出缓冲区。所以，这样做..

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int a, b, c;
    fflush(stdout);//Clears the stdout buffer
    scanf("%d%d%d", &a, &b, &c);
    printf("Values entered: %d %d %d\n", a, b, c);
    return EXIT_SUCCESS;
} 
```

# macos - Mac Os 中的 JavaFX 应用程序名称

> ID：12126709
> 
> 赞同：6
> 
> 时间：2012-08-26T00:15:03.560
> 
> 标签：macos, javafx

对于 Swing 应用程序，我使用了 setProperty() 方法，但它看起来不适用于 FX 应用程序，还有其他方法可以从源代码配置应用程序名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T18:40:04.790

对你来说是个坏消息。你不能改变它。这是 JIRA 的链接，您可以在其中添加您对它尚未修复的失望。

[https://javafx-jira.kenai.com/browse/RT-22988](https://javafx-jira.kenai.com/browse/RT-22988)

# javascript - Javascript div滑块没有jquery

> ID：12126711
> 
> 赞同：1
> 
> 时间：2012-08-26T00:15:25.060
> 
> 标签：javascript, jquery, slider

我正在寻找编写一个 javascript div 滑块。我尝试了用于 div 滑动的 JQuery 插件。然而，由于我们的应用程序是动态生成的，因此当前的 jQuery 插件似乎无法正确呈现滑块。

因此想看看我是否可以编写一个简单的滑块，以滑块方式切换两个 div。

基本上，我会有两个 div 和一个左按钮和一个右下角。

```
<img src='images/left'></img>
<div id='content-one'>My First content </div>
<div id='content-two'>My Second content </div>
<img src='images/right'></img> 
```

所以当我点击右键时，第一个内容应该滑到第二个（水平）。同样，我可以用左键将其翻转回来。能够在转换之间延迟 1 秒会很有帮助。

任何关于如何编写它的指针都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T01:04:57.157

这就是你要找的？[**小提琴**](http://jsfiddle.net/mNAsd/3/)。

> 不使用 jQuery。
> 注意布局的细微变化（内容 DIV 在容器中）。
> 需要用于溢出、显示、填充和边距的 CSS。

我只是写了最基本的线性滚动，你可以随意修改。

# android - Android：从应用程序切换后保持片段（用于 ActionBar 选项卡）运行

> ID：12126719
> 
> 赞同：1
> 
> 时间：2012-08-26T00:18:18.930
> 
> 标签：android, android-fragments, android-actionbar

我正在创建一个应用程序，其中涉及多个片段作为操作栏上的选项卡。当我切换选项卡关闭应用程序时，我需要保持这些片段的进程运行（不是结束应用程序，但是当按下主页或返回时，我希望应用程序继续在后台运行）。因此，为了在选项卡之间切换时保持片段运行，我修改了 sdk 中的示例 TabListener 之一以显示和隐藏而不是附加和分离。代码是：

```
public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;
    private final Bundle mArgs;

    public TabListener(Activity activity, String tag, Class<T> clz) {
        this(activity, tag, clz, null);
    }

    public TabListener(Activity activity, String tag, Class<T> clz, Bundle args) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
        mArgs = args;

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        mFragment = mActivity.getFragmentManager().findFragmentByTag(mTag);
        if (mFragment != null && !mFragment.isHidden()) {
            FragmentTransaction ft = mActivity.getFragmentManager().beginTransaction();
            ft.hide(mFragment);
            ft.commit();
        }
    }

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName(), mArgs);
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.show(mFragment);
        }
    }

    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            ft.hide(mFragment);
        }
    }

    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }
} 
```

选项卡是这样创建的：

```
 ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab aTab= actionBar.newTab().setText("Tab A").setTabListener(new TabListener<AFragment>(this, "AFrag", AFragment.class));
    actionBar.addTab(aTab);
    ActionBar.Tab bTab= actionBar.newTab().setText("Tab B").setTabListener(new TabListener<BFragment>(this, "BFrag", BFragment.class));
    actionBar.addTab(bTab); 
```

所以这似乎有效，至少可以切换标签。有时这些片段会出现在彼此之上，尽管那是 TabListener 的不同实现，并且从那以后它就没有发生过，所以它现在可能已经消失了。我不知道它为什么会发生，所以我不知道如何复制它。

虽然关闭应用程序时它非常有问题。大多数情况下，当我按下 home 键时，应用程序仍然可以运行，并且当我再次打开它时它会运行。有时它不会，这很奇怪。按返回也会关闭应用程序，但再次启动它似乎会从头开始重新启动应用程序，这是不希望的。有时，当从该位置按下时，它会返回到先前运行的片段。

虽然它非常随机且不稳定。它何时起作用或不起作用是不可预测的。解决此问题以提高稳定性的最佳方法是什么，以便在关闭时继续运行，并且重新打开应用程序不会重新启动它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T01:54:35.633

像活动一样，片段可以将它们的状态保存在一个 Bundle 中，当`onCreate()`被调用时它会被传入。您可以考虑保存状态，以便即使您的应用程序被杀死（为了内存）您也可以恢复它。

我也建议使用

```
ft.addToBackStack(null)
    .remove(CurrentFragment)
    .add(ToShowFragment)
    .commit() 
```

这样您就可以使用`popBackStack()`来轻松处理添加和删除片段。另请注意`replace()`，由于未正确反转，因此无法从后台弹出堆栈（您将获得状态异常）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:44:15.813

您可以尝试使用`Fragment.setRetainInstance(true)`来保留 Fragment，尽管这可能仅适用于方向更改，但文档有点不清楚。

没有我知道的方法可以保留碎片。也许您最好的选择是将您想要保留的所有内容保存到 Bundle 对象中`Fragment.onSaveInstanceState(..)`，然后在`Fragment.onCreate(..)`或中读取此数据`Fragment.onCreateView(..)`。

另一种我不太了解的替代方法是使用`Fragment.SavedState`类，它似乎与上面类似，只是您可以随时手动保存状态。这将需要您进行大量编码，但会给您更大的控制权

# iphone - 识别 3d 立方体特定侧的触摸

> ID：12126720
> 
> 赞同：1
> 
> 时间：2012-08-26T00:18:24.387
> 
> 标签：iphone, ios, calayer, uitouch, catransformlayer

![在此处输入图像描述](../Images/ba9ea5370c1849d4c7765898163586d2.png)

立方体由 6 个 CALayer 组成，然后将它们添加到单个 CATransformLayer。这个 transformLayer - 以及它，立方体 - 可以使用触摸输入旋转。

问题：我希望能够识别用户触摸了立方体的哪一侧。

我试过这段代码：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
CGPoint location = [[touches anyObject] locationInView:self];

        if ([self.side1 containsPoint: [self.layer convertPoint:location toLayer:self.side1]]) {
            NSLog(@"Side 1");}
        if ([self.side2 containsPoint: [self.layer convertPoint:location toLayer:self.side2]]) {
            NSLog(@"Side 2"); }
        if ([self.side3 containsPoint: [self.layer convertPoint:location toLayer:self.side3]]) {
            NSLog(@"Side 3 "); }
        if ([self.side4 containsPoint: [self.layer convertPoint:location toLayer:self.side4]]) {
            NSLog(@"Side 4"); }
        if ([self.side5 containsPoint: [self.layer convertPoint:location toLayer:self.side5]]) {
            NSLog(@"Side 5"); }
        if ([self.side6 containsPoint: [self.layer convertPoint:location toLayer:self.side6]]) {
            NSLog(@"Side 6");
    } 
```

但立方体似乎被映射到二维空间：当我触摸第 1 面时，不仅可以识别第 1 面，还可以识别它后面的面（例如第 4 面）。

如何确保只选择离用户较近的一侧（较高的 z 坐标）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:16:25.337

您是否尝试过在侧面的表示层上使用 hitTest 方法？又名类似的东西：

```
CALayer* touchedLayer = [[self.side4.presentationLayer hitTest:location] modelLayer];
if(touchedLayer!=nil){
   NSLog(@"Side 4");
} 
```

想法？

# php - PHP 参考行为怪异

> ID：12126721
> 
> 赞同：2
> 
> 时间：2012-08-26T00:18:28.797
> 
> 标签：php, post, reference, foreach

我对 PHP 的引用（&）有一个奇怪的问题。

假设我有一个看起来像这样的表单：

```
<form name="form1" id="form1" method="post">
   Name: <input type="text" name="name" /><br />
   Email: <input type="text" name="email" /><br />
   Location: <input type="text" name="location" /><br />
   Phone Number: <input type="text" name="phonenumber" /><br />
</form> 
```

然后我将该表单提交给另一个 PHP 处理程序。处理程序这样做：

```
foreach($_POST as $name => &$value)
{
    //more code here
}
echo $_POST['phonenumber']; //Returns value of $_POST['location'] for some reason 
```

有人可以向我解释为什么电话号码的价值将是任何位置的价值吗？即使 foreach 内部没有代码，它仍然会这样做。

编辑：

对于那些想知道 foreach 内部发生了什么，或者我为什么要这样做的人，这是因为它是一种将所有提交给处理程序的数据转义的干净方法，而不是手动一次执行一个变量，尤其是当你有动态输入进来。所以像这样：

```
foreach($_POST as $name => &$value)
{
    $value = preg_replace( "/[<>#$%]/", "", $value);
    $value = preg_replace('/\s\s+/', ' ', $value);
} 
```

除了我上面提到的问题外，它工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:53:35.367

您是否可能会重复它两次，一次有参考，一次没有？它有很大的不同：

```
$array = [1, 2];

foreach($array as &$value);
echo implode(',', $array); # 1, 2

foreach($array as $value);
echo implode(',', $array); # 1, 1 
```

[这是一个演示。](http://codepad.viper-7.com/XdSCU3)解决方法是[在循环之间](http://codepad.viper-7.com/akmBSC)[取消设置`$value`](http://codepad.viper-7.com/akmBSC)：

```
$array = [1, 2];

foreach($array as &$value);
echo implode(',', $array); # 1, 2
**unset($value);**

foreach($array as $value);
echo implode(',', $array); # 1, 2
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:33:13.433

我很确定您对`foreach`循环中的引用值感到困惑。您不应该使用它的另一个原因。如果您真的认为至少在循环之后需要`unset()`它`value`。看看这个例子：[http](http://codepad.viper-7.com/VCOI2O) ://codepad.viper-7.com/VCOI2O （注意`&`第一个转储中的电话号码，它仍然被引用）。

但我认真地认为你应该重新考虑通过参考来做。相反，只需访问循环中需要的项目：

```
foreach($_POST as $name => $value)
{
    // do with the value what you want
    $_POST[$name] = $value;
} 
```

然而，完全不改变超全球会更好`$_POST`。当您稍后尝试访问它并且其中的某些内容已更改时，它只会使其他人和您自己感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T00:32:59.980

如果您正在重新分配`$value`变量，则可能会发生这种情况。例如，在这种情况下，最后一次迭代（对于电话号码）将等于位置值，因为这`&`意味着如果您分配给它，该值将被更新：

```
<?php

$i = 0;

foreach($_POST as $name => &$value) {
    if ($i > 2) {
        $value = $temp;
    }
    $i++;

    $temp = $value;
    echo $value;
}

?> 
```

# ruby-on-rails - 异常通知 gem “错误：无法生成异常摘要”

> ID：12126724
> 
> 赞同：4
> 
> 时间：2012-08-26T00:19:02.783
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, exception-handling, gem

一段时间以来一直在相当成功地使用`exception-notification`gem，但是在实际错误之后，我对每个电子邮件正文顶部的电子邮件条目感到恼火。问题文本是：

```
-------------------------------
Request:
-------------------------------

 ERROR: Failed to generate exception summary:

 ActionView::Template::Error: Missing rack.input 
```

接下来的几行甚至总是相同的。这说明什么？如何解决此问题，以便在任何有意义的内容上升到堆栈跟踪顶部之前不再看到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:36:33.563

这意味着 ExceptionNotifier 在生成[此文件](https://github.com/smartinez87/exception_notification/blob/master/lib/exception_notifier/views/exception_notifier/_request.text.erb)时遇到了问题。这通常发生在您自定义发送给它的数据时。您能否将中间件配置* 添加到问题中，以便我们查看是否是问题所在？此外，您能否确认您使用的是什么版本的 Rails 和异常通知，以及您是否在请求环境中设置任何自定义数据**？

***它应该看起来像这样

```
Whatever::Application.config.middleware.use ExceptionNotifier,
  :email_prefix => "[Whatever] ",
  :sender_address => %{"notifier" <notifier@example.com>},
  :exception_recipients => %w{exceptions@example.com} 
```

** 前过滤器中的类似内容

```
request.env["exception_notifier.exception_data"] = { ... } 
```

# jquery - 在灯箱中显示链接到全尺寸图像的缩略图（没有两个单独的图像文件）

> ID：12126725
> 
> 赞同：-1
> 
> 时间：2012-08-26T00:19:18.283
> 
> 标签：jquery, css, image, lightbox, lightbox2

我正在以标准 HTML 格式显示数字图像。我不知道图像的大小。有些尺寸很小，但有些很大。

```
<img src="image1.jpg">
<img src="image2.jpg"> 
```

我想做什么..

1.  在不扭曲图像的情况下缩小图像（如果宽或高于 250 像素 x 250 像素）。
2.  用户应该能够单击图像以在灯箱中查看全尺寸。

我看到了[灯箱 jQuery 插件](http://lokeshdhakar.com/projects/lightbox2/)，但它似乎需要单独的缩略图。有没有办法仍然利用它？

我正在使用最新的 Chrome，所以我可以在这个项目中使用 HTML5/CSS3/jQuery/etc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:29:44.083

一些建议：

每当您必须处理缩略图/全尺寸图像时，您都必须提供**两者**，因为使用全图像作为预览会影响整体加载性能[想想移动设备]。

如果您可以控制服务器，请考虑使用一些**按需缩放**[例如[PHP 中的 GD 库]](http://www.php.net/manual/en/ref.image.php)或**缩略图的抢先缓存**[更好和更具可扩展性的选项]。

最后一件事：关于*您*使用 Chrome，考虑到会有人坚持使用**IE8**左右，请考虑您网站的受众，而不仅仅是您的测试环境。

# javascript - 弹出窗口不适用于引导程序？

> ID：12126726
> 
> 赞同：4
> 
> 时间：2012-08-26T00:19:43.460
> 
> 标签：javascript, jquery, html, twitter-bootstrap, popover

按照我复制的[文档：](http://twitter.github.com/bootstrap/javascript.html#popovers)

```
<div class="container">
    <div class="row">
        <div class="bs-docs-example" style="padding-bottom: 24px;">
            <a href="#" class="btn btn-large btn-danger" rel="popover" data-content="And here's some amazing content. It's very engaging. right?"
            data-original-title="A Title">Click to toggle popover</a>
        </div>
    </div>
</div> 
```

**[JSfiddle](http://jsfiddle.net/HjJW6/)**

但是它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T00:51:42.463

我通过做两件事让它工作：

1.  由于 Popover 依赖于 Tooltip，请确保在 bootstrap-popover.js 之前包含 bootstrap-tooltip.js。

2.  使用类似的行激活插件`$('.container a').popover();`

要将顶部的弹出窗口添加`data-placement="top"`到`a`标签中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T15:23:16.913

默认情况下不初始化弹出框。如果您包含一个包罗万象的 bootstrap.js（v 2.2、2.3），请通过以下方式对其进行初始化：

```
$('a[data-toggle=popover]').popover();
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T18:34:36.137

```
<a href="#" id="LinkId">Text</a> 
```

在准备好的文件中，

```
$("#LinkId").popover({ title: '', content: "Popover Content", placement: 'left|top|etc', trigger: 'hover' }); 
```

您只需要包括`bootstrap.js`.

# image - 在处理数据之前加载图像并等待 image.complete

> ID：12126727
> 
> 赞同：1
> 
> 时间：2012-08-26T00:19:46.447
> 
> 标签：image, base64, html5-canvas, settimeout

这似乎是一个长期存在的问题，我认为很多人都想一劳永逸地彻底解决这个问题。

问题存在于链条中

```
image = new Image();
image.src = imagePath; 
```

然后暂停等待 image.complete 类似...

```
while(HHGimg.height == 0) 
```

或者

```
while(!image.complete)
{
     setTimeout(function(){ foo },100);
} 
```

其次是 canvas to base64 方法。

```
var canvas = document.createElement('canvas');                          
canvas.width = image.width;                                         
canvas.height = image.height;                                           
var canvasContext = canvas.getContext('2d');                            
canvasContext.drawImage(image, 0, 0, canvas.width, canvas.height);  
imageData = canvas.toDataURL('image/jpeg'); 
```

问题是暂停以确保 image.complete 完成其工作并将有效对象传递到画布。

需要一种方法来确保暂停足以完成，而不会以停止脚本的循环结束（这个“while”方法似乎是这样）

关于如何在继续之前等待有效图像的任何想法......

我的整个功能如下...

```
<script type="text/javascript">
    function imageFetch(imgpath, imgname)                                               
{
    imgdata = "";                                       
    image = new Image();                                                        
    image.src = imgpath + imgname;;                                             
    while(image.height == 0)
    {
            setTimeout(function(){imgdata = "";},100);                                                      
    }
    var canvas = document.createElement('canvas');                          
    canvas.width = image.width;                                         
    canvas.height = image.height;                                           
    var canvasContext = canvas.getContext('2d');                            
    canvasContext.drawImage(image, 0, 0, canvas.width, canvas.height);      
    imgdata = canvas.toDataURL('image/jpeg');                                                   
    return imgdata;                                                             
}
</script> 
```

...但在暂停以确保图像完全加载之前，一些返回只是“数据：”

现在交给你了。关于如何击败这个的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:11:17.993

试试图像加载器 - 这是一个很棒的[教程](http://www.html5canvastutorials.com/tutorials/html5-canvas-image-loader/)。

这是给出的代码：

```
 function loadImages(sources, callback) {
    var images = {};
    var loadedImages = 0;
    var numImages = 0;
    // get num of sources
    for(var src in sources) {
      numImages++;
    }
    for(var src in sources) {
      images[src] = new Image();
      images[src].onload = function() {
        if(++loadedImages >= numImages) {
          callback(images);
        }
      };
      images[src].src = sources[src];
    }
  }

  window.onload = function(images) {
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");

    var sources = {
      darthVader: "http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg",
      yoda: "http://www.html5canvastutorials.com/demos/assets/yoda.jpg"
    };

    loadImages(sources, function(images) {
      context.drawImage(images.darthVader, 100, 30, 200, 137);
      context.drawImage(images.yoda, 350, 55, 93, 104);
    });
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T07:32:59.310

只需使用[`image.onload`](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Using_images#Creating_an_image_from_scratch)！您还需要意识到，只有来自同一个域的图像才能转换为数据 URL。如果不是，您将遇到相同的来源策略错误。此外，您的函数必须等待`image.onload`能够转换数据，因此您应该更改您的函数以接受回调。

您的代码应如下所示：

```
<script type="text/javascript">
    function imageFetch(imgpath, imgname, callback)                                               
    {
    var imgdata = "",                                       
    image = new Image();                                                        
    image.src = imgpath + imgname;
    var canvas = document.createElement('canvas');                                     
    var canvasContext = canvas.getContext('2d');                            
    image.onload = function (){                          
        canvas.width = image.width;                                         
        canvas.height = image.height;     
        canvasContext.drawImage(image, 0, 0, canvas.width, canvas.height);      
        imgdata = canvas.toDataURL('image/jpeg');
        callback(imgdata);
    }                          
    return;                                                          
}
</script> 
```

然后像这样运行它：

```
imageFetch("/", "random.jpg", function (imgData){
    console.log(imgData);
    // Do whatever you want with imgData here
}); 
```

我添加了一个[演示](http://jsfiddle.net/3ZZQX/)。请注意，由于相同的来源策略，我在那里为图像使用 base64 URL。托管在同一服务器和端口上的图像应该适合您。

# html - 如何使用 css3 和 html5 制作不规则形状的 div？

> ID：12126731
> 
> 赞同：15
> 
> 时间：2012-08-26T00:20:27.650
> 
> 标签：html, css, css-shapes

我想知道是否有可能构建具有不规则形状的 div，类似于此（例如格陵兰、欧洲、非洲）。我想使用 CSS3 和 HTML5 创建像这里这样的地图。

这是示例图像的链接：

![](../Images/8c3a1f7bd00dd5708e5b945dd8b10e5c.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-26T07:32:03.013

你在那里的东西看起来像一个网格，你可以在一个 div 上使用许多渐变来获得它，或者使用你应用 CSS 转换的许多 div 的网格来获得。

```
div { box-sizing: border-box; }
.container {
    overflow: hidden;
    width: 32em;
    height: 32em;
    margin: 5.6em auto 0;
    background: silver;
}
.grid {
    transform: skewX(-45deg) 
        rotate(15deg) 
        scaleX(1.785) scaleY(.8)
        translateX(-4.5em) translateY(-3em);
}
.grid-row {
    width: 32em;
    height: 2em;
}
.grid-cell {
    float: left;
    width: 2em;
    height: 2em;
}
.high {
    background: gainsboro;
}
.high:hover {
    background: whitesmoke;
}
```

```
<div class='container'>
    <div class='grid'>
        <div class='grid-row'>
            <div class='grid-cell'></div>
            <div class='grid-cell high'></div>
        </div>
        <div class='grid-row'>
            <div class='grid-cell'></div>
            <div class='grid-cell high'></div>
        </div>
    </div>
</div>
<!-- and so on... -->
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-08T16:22:24.007

元素一直是矩形的。不过，您可以通过在矩形分区内绘制 CSS 形状并安排不同的分区（使用 z-index 等）来模拟其他形状。这将帮助您：

[http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T14:47:20.420

您应该能够使用您选择的任何元素将地图创建为正方形，然后将整个东西包装在 div/span/whatever 中并执行 css3 3d 转换以获得您需要的内容。

# mysql - 我的查询有什么问题

> ID：12126733
> 
> 赞同：-1
> 
> 时间：2012-08-26T00:21:09.630
> 
> 标签：mysql

`MySQL`写道：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“DELETE FROM surebet.fork_bet WHERE surebet_fork_key NOT IN (SELECT super”附近使用正确的语法

```
DELETE
FROM superbet.fork_bet
WHERE superbet_fork_key
NOT IN (
    SELECT superbet_fork_key 
    FROM fork_bet_temp
    WHERE fork_bet_temp.superbet_fork_key = fork_bet.superbet_fork_key
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:35:14.967

```
DELETE
FROM superbet.fork_bet
WHERE superbet.fork_key
NOT IN (
    SELECT superbet_fork_key 
    FROM fork_bet_temp
    WHERE fork_bet_temp.superbet_fork_key = fork_bet_temp.superbet_fork_key
); 
```

更改了两者的 WHERE 子句，看起来您尝试在需要句点的地方下划线，并且您错误地命名了第二个 WHERE，fork_bet 不是表，fork_bet_temp 是。

如果您遇到错误，请发布您的表格布局。

# php - 依赖注入容器，类参数

> ID：12126738
> 
> 赞同：0
> 
> 时间：2012-08-26T00:23:04.107
> 
> 标签：php, dependency-injection

我正在尝试编写一个非常简单的依赖注入容器。

到目前为止，我有以下内容（不多，但开始理解）：

```
class DiContainer
{
    private $_parameters;

    public function __set($key, $value)
    {
        $this->_parameters[$key] = $value;
    }

    public function __get($key)
    {
        if (isset($this->_parameters[$key])) {
            $class = $this->_parameters[$key]; 
            return new $class; 
        }
    }
} 
```

如果一个类需要一些参数会发生什么？

所以如果我有：

```
class A {

  public function __construct($params, $params2) {

  }
} 
```

我将如何通过服务容器实例化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:33:09.837

有反射

```
$reflectedClass = new ReflectionClass($classname);
$instance = $reflectedClass->newInstanceArgs($constructorArguments); 
```

请参见[ReflectionClass:newInstanceArgs()](http://php.net/reflectionclass.newinstanceargs)

# javascript - 站点验证抛出错误：没有属性“DATA-BG”

> ID：12126740
> 
> 赞同：0
> 
> 时间：2012-08-26T00:23:19.343
> 
> 标签：javascript, css, validation

验证我正在开发的网站，[可以在这里查看](http://www.class-a-studio.co.il/test01.php)，我收到错误消息：第 92 行，第 32 列：没有属性“DATA-BG”。我在整个网站中使用这样的数据属性：

```
<div class="sbi_panel" data-bg="slider/images/4.jpg"> 
```

因此，无法识别 data-bg 属性。我想知道这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:29:09.250

问题是您的[DOCTYPE](http://en.wikipedia.org/wiki/Document_Type_Declaration)，目前设置为：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

W3C 验证器在确定要执行的验证类型时查看 DOCTYPE 声明。开头的 HTML 属性`data-`是一个 HTML5 想法，因此您需要将 DOCTYPE 更改为 HTML5，以便验证它是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:22:30.243

根据 HTML 4.01 doctype 或任何已发布的 doctype，这些`data-`属性是不允许的，这对其功能没有影响；这只是一个句法问题。

选项：

1.  只是忽略该消息。如果您有大量此类属性，这将变得不切实际，因为这些消息的数量使得很难检测到真正的标记错误。
2.  [构造一个](http://www.cs.tut.fi/~jkorpela/html/own-dtd.html)允许`data-`您使用的属性的自定义 DTD。[W3C 反对这个想法](http://www.w3.org/Style/customdtd.en.html)，但它的真正问题是大多数人不想参与 DTD，编辑 DTD 需要一些学习。在这种情况下，您只需将属性添加到`coreattrs`属性中。您需要分别添加每个`data-`属性。
3.  更改为 HTML5 doctype 语句，`<!doctype html>`. 这使得所有`data-`属性都被允许，但它也意味着其他领域的限制。HTML5*不是*HTML 4.01 的纯粹扩展；例如，它声明大多数类型的`meta`标签无效（虽然大多数`meta`标签是无用的，但您可能有一些有用但目前在 HTML5 中不允许使用）。

# python - 如何在 python 中连接/断开/配置无线网络？

> ID：12126744
> 
> 赞同：6
> 
> 时间：2012-08-26T00:24:52.043
> 
> 标签：python, windows, windows-xp, wireless

我正在寻找是否有一种方法可以在 python 中连接或断开无线网络，如果我提供了密码，最好是一种适用于公共和安全网络的方法。如果我可以配置有关无线的选项，那将是一个额外的好处（例如，查看范围内的所有网络，查看范围内的网络信息（如加密类型））。我运行一台 Windows 计算机，所以我在 Linux 或其他操作系统中看到了很多这个问题的答案，但在 Windows 中却没有。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T23:20:10.493

为此，您可能必须在 Windows 中使用其中一个 DLL。使用[ctypes](http://docs.python.org/library/ctypes.html)，您可以从 Python 访问 win32 API。

看起来 wlanapi.dll 中的[函数（](http://msdn.microsoft.com/en-us/library/windows/desktop/aa816369%28v=vs.85%29.aspx)以[WlanOpenHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706759%28v=vs.85%29.aspx)和[WlanEnumInterfaces 开头）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706716%28v=vs.85%29.aspx)可能会满足您的需求。

**编辑：**例如代码，请参阅对此的接受[答案](https://stackoverflow.com/questions/2851233/how-can-i-retrieve-the-signal-strength-of-nearby-wireless-lan-networks-on-window?rq=1)。

# c++ - 如何为 windows 7 c++ 制作屏幕保护程序

> ID：12126746
> 
> 赞同：4
> 
> 时间：2012-08-26T00:25:05.280
> 
> 标签：c++, windows-7, screensaver

我意识到以上并不是一个具体的问题，我也没有代码可言，但我觉得其他人也无法完成这一壮举——我觉得这是案例可以解决一切的问题之一。

所以这就是我的问题。我已经为实际运行的内容制作了屏幕保护程序。基本上我想要做的是，让它自己运行，关闭计时器......也许还有一些相关的预览窗口功能，因为我们需要选择它。问题是，这方面的资源很稀少，或者我的 Google-fu 今天无法正常工作。（实际上，我在 SO 上发现的所有带有屏幕保护程序标签的问题都是关于知道如何制作屏幕保护程序的用户，或者那些不想制作屏幕保护程序而是检查一个屏幕保护程序的用户，即它是否在程序执行期间开始运行。

一些信息：尝试使用 C++ 使其适用于 Windows 7（如果重要，请使用 Windows 7）。

我要问的是，如何从我当前的点开始，在那里我有一个正常的程序（即，从 main 开始，做一些图形......）它本身可以正常循环，但我想弄清楚，如何让它成为一个真正的屏幕保护程序 - 不幸的是，不能简单地通过将其重命名为 .scr 来解决。

感谢您提供任何信息。

PS：我在这里很新，对大多数事情都不太了解，包括使用SO。我的最后一个问题被否决了（我承认，这很糟糕），我现在决心提出好的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:31:37.640

这应该有帮助： [http ://www.cityintherain.com/howtoscr.html](http://www.cityintherain.com/howtoscr.html)

和另一个（带有可下载的示例代码） [http://www.codeguru.com/cpp/gm/opengl/article.php/c2695/OpenGL-screen-savers.htm](http://www.codeguru.com/cpp/g-m/opengl/article.php/c2695/OpenGL-screen-savers.htm)

我希望你熟悉 win32 api

# c++ - C++ LinkedList 结构引用为双指针，需要访问下一个节点

> ID：12126752
> 
> 赞同：0
> 
> 时间：2012-08-26T00:26:29.307
> 
> 标签：c++, pointers, linked-list, double-pointer

好的，所以我设置了一个链接列表结构：

```
struct ListNode {
    ListNode* next;
    int data;
    ListNode(int in) {
        data = in;
        next = NULL;
    }
    ListNode(int in, ListNode* n) {
        data = in;
        next = n;
    }
}; 
```

连同插入功能：

```
bool insertNode(ListNode **head, int position, int data) {
    if (position == 0) {
        ListNode *element = new ListNode(data, *head->next);
        *head->next = element;
        return true;
    }
    else if (head == NULL)
        return false;
    else {
        insertNode(head->next, position-1, data);
    }
} 
```

我将如何访问 head 的下一个元素？使用当前的代码，我收到以下错误消息：

```
request for member ‘next’ in ‘* head’, which is of non-class type ‘ListNode*’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T00:32:22.160

这应该可以解决问题

```
(*head)->next 
```

编辑：有关运营商优先级的更多信息[http://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)

# opengl-es - 开放式 如何在同一个绘图调用中多次渲染相同的纹理三角形？

> ID：12126755
> 
> 赞同：1
> 
> 时间：2012-08-26T00:27:05.937
> 
> 标签：opengl-es

我必须在屏幕的不同点渲染相同的纹理三角形。当渲染超过 10 次时，我注意到性能受到很大影响。我怎么能在绘制之前多次渲染相同的纹理三角形。

我试图在绘制之前将新几何图形添加到顶点数组，但没有成功。我认为步幅值不对：

这是顶点和纹理坐标。我准备画 2 个带纹理的正方形，所以我只是复制数组中的数据。

在 DrawArray 中，我将 4 更改为 8。第一个方块似乎还可以，第二个肯定不好 GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP , 0, 8);

```
private float[] mVertexData2 = 
    {
            -0.3f, -0.3f,  0.0f,        // V1 - bottom left

            -0.3f,  0.3f,  0.0f,        // V2 - top left

             0.3f, -0.3f,  0.0f,        // V3 - bottom right

             0.3f,  0.3f,  0.0f         // V4 - top right

        //Seconde square     
             -1f, -1f,  0.0f,        // V1 - bottom left

            -1f,  1f,  0.0f,        // V2 - top left

             1f, -1f,  0.0f,        // V3 - bottom right

             1f,  1f,  0.0f         // V4 - top right

    };

    private float[] mTextureData2 =
    {
            0.0f, 1.0f,     // top left     (V2)
            0.0f, 0.0f,     // bottom left  (V1)
            1.0f, 1.0f,     // top right    (V4)
            1.0f, 0.0f,     // bottom right (V3)

        //Texture for seconde square    
            0.0f, 1.0f,     // top left     (V2)
            0.0f, 0.0f,     // bottom left  (V1)
            1.0f, 1.0f,     // top right    (V4)
            1.0f, 0.0f,     // bottom right (V3)

    };

public void draw()
{

    // Load the vertex position
    mVertices.position(0);
    GLES20.glVertexAttribPointer ( mSpritePositionLoc, 3, GLES20.GL_FLOAT, 
                                   false, 
                                   0, mVertices );

    // Load the texture coordinate
    mTexVertices.position(0);
    GLES20.glVertexAttribPointer ( mSpriteTexCoordLoc, 2, GLES20.GL_FLOAT,
                                   false, 
                                   0, 
                                   mTexVertices );

    GLES20.glEnableVertexAttribArray ( mSpritePositionLoc );
    //GLES20.glEnableVertexAttribArray ( mSpriteTexCoordLoc );

    GLES20.glActiveTexture ( GLES20.GL_TEXTURE0 );
    GLES20.glBindTexture ( GLES20.GL_TEXTURE_2D, mSpriteTextureId);
    // Set the base map sampler to texture unit to 1
    GLES20.glUniform1i ( mSpriteTextureIdLoc, 1 );

    //GLES20.glDrawElements ( GLES20.GL_TRIANGLES, 6, GLES20.GL_UNSIGNED_SHORT, mIndices );
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP    , 0, 8);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:56:23.220

在每个纹理中，而不是使用 DrawArrays，您需要将其顶点和纹理坐标保存为正确的旋转和平移到一个大数组中，然后使用 DrawArrays 仅绘制这个数组。（嗯......我不能更好地解释它:)）

这是我的代码：

```
 float squarevData[12]={
            -1,1,
            1,1,
            -1,-1,
            1,1,
            1,-1,
            -1,-1,
        };
    float squarevData2[12]={
            -1,1,
            1,1,
            -1,-1,
            1,1,
            1,-1,
            -1,-1,
        };
    class BatchRenderer
    {
    public:
        float* partVdata;
        float* partCdata;
        float* partTdata;

    int counter1,counter2,counter3;
    int count;
    bool isz;
    BatchRenderer(int maxTextures,bool iszi)
    {
        isz=iszi;
        if(isz)partVdata=(float*)malloc(maxTextures*18*4);
        else partVdata=(float*)malloc(maxTextures*12*4);

        partCdata=(float*)malloc(maxTextures*24*4);
        partTdata=(float*)malloc(maxTextures*12*4);
    }

    void Draw(float x,float y,float z,float scalex,float scaley,float angle,float r,float g,float b,float a)
    {
        angle*=0.017453f;
        for(int c2=0;c2<12;c2+=2)
        {
                float x=squarevData[c2]*scalex;
                float y=squarevData[c2+1]*scaley;
                float cos1=cos(angle);
                float sin1=sin(angle);
                squarevData2[c2] = (cos1*x) - ( sin1*y);
                squarevData2[c2+1] = (sin1*x) + ( cos1*y);
        }

        partVdata[counter1++]=x+squarevData2[0];
        partVdata[counter1++]=y+squarevData2[1];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=0;
        partTdata[counter3++]=1;

        partVdata[counter1++]=x+squarevData2[2];
        partVdata[counter1++]=y+squarevData2[3];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=1;
        partTdata[counter3++]=1;

        partVdata[counter1++]=x+squarevData2[4];
        partVdata[counter1++]=y+squarevData2[5];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=0;
        partTdata[counter3++]=0;

        partVdata[counter1++]=x+squarevData2[6];
        partVdata[counter1++]=y+squarevData2[7];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=1;
        partTdata[counter3++]=1;

        partVdata[counter1++]=x+squarevData2[8];
        partVdata[counter1++]=y+squarevData2[9];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=1;
        partTdata[counter3++]=0;

        partVdata[counter1++]=x+squarevData2[10];
        partVdata[counter1++]=y+squarevData2[11];
        if(isz)partVdata[counter1++]=z;
        partCdata[counter2++]=r;
        partCdata[counter2++]=g;
        partCdata[counter2++]=b;
        partCdata[counter2++]=a;
        partTdata[counter3++]=0;
        partTdata[counter3++]=0;

        count++;

    }
    void RenderStart()
    {
        counter1=counter2=count=counter3=0;

    }
    void RenderStop(int textureid)
    {
        glEnable(GL_TEXTURE_2D);
        glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE,GL_MODULATE);
        glEnableClientState(GL_COLOR_ARRAY);
        glEnableClientState(GL_TEXTURE_COORD_ARRAY);
        glEnableClientState(GL_VERTEX_ARRAY);
        glBindTexture(GL_TEXTURE_2D, textureid);
        glTexCoordPointer(2, GL_FLOAT, 0, partTdata);
        glColorPointer(4, GL_FLOAT, 0,partCdata );
        if(isz)glVertexPointer(3, GL_FLOAT, 0, partVdata);
        else glVertexPointer(2, GL_FLOAT, 0, partVdata);
        glDrawArrays(GL_TRIANGLES, 0, count*6);
        glDisableClientState(GL_COLOR_ARRAY);
        glDisableClientState(GL_TEXTURE_COORD_ARRAY);
        glDisableClientState(GL_VERTEX_ARRAY);

    }
}; 
```

如何使用它？

```
BatchRenderer* br=new BatchRenderer(500,false)//the max number of textures that can be drawn , and if you want z axis

void Render()
{
      br->RenderStart();
      for(int c=0;c<POINTS;c++)
      {                          
    br->Draw(p[c].x,p[c].y,0,p[c].scalex,p[c].scaly,p[c].angle,p[c].r,p[c].g,p[c].b,p[c].a);
      }
      br->RenderStop(yourtextureid);

} 
```

您可以使用中间设备以 60 fps 的速度绘制 500 多个纹理，并且每个纹理都可以具有独特的比例、旋转和颜色

# solr - Nutch updatedb 杀死并跳过了批次 ID

> ID：12126757
> 
> 赞同：1
> 
> 时间：2012-08-26T00:28:07.807
> 
> 标签：solr, nutch

我正在使用 nutch 2.0 和 solr 4.0 并且成功率最低我有 3 个 url，并且我的 regex-urlfilter.xml 设置为允许一切。我运行了这个脚本

```
#!/bin/bash

# Nutch crawl

export NUTCH_HOME=~/java/workspace/Nutch2.0/runtime/local

# depth in the web exploration
n=1
# number of selected urls for fetching
maxUrls=50000
# solr server
solrUrl=http://localhost:8983

for (( i = 1 ; i <= $n ; i++ ))
do

log=$NUTCH_HOME/logs/log                                                                                                                                                           

# Generate
$NUTCH_HOME/bin/nutch generate -topN $maxUrls > $log

batchId=`sed -n 's|.*batch id: \(.*\)|\1|p' < $log`

# rename log file by appending the batch id
log2=$log$batchId
mv $log $log2
log=$log2

# Fetch
$NUTCH_HOME/bin/nutch fetch $batchId >> $log

# Parse
$NUTCH_HOME/bin/nutch parse $batchId >> $log

# Update
$NUTCH_HOME/bin/nutch updatedb >> $log

# Index
$NUTCH_HOME/bin/nutch solrindex $solrUrl $batchId >> $log

done
---------------------------- 
```

当然，我在运行脚本之前 bin/nutch 注入了 url，但是当我查看日志时，我看到 Skipping : different batch id 和一些我看到的 url 不在 seed.txt 中，我想将它们包含在 solr 中，但不会添加它们。我的 seed.txt 中有 3 个网址

运行此脚本后，我尝试过 `bin/nutch parse -force -all` `bin/nutch updatedb` `bin/nutch solrindex http://127.0.0.1:8983/solr/sites -reindex`

我的问题如下。1\. 最后三个命令为什么它们是必要的？2.如何在解析作业期间获取所有 url，即使使用 -force -all 我仍然会跳过不同的批处理 id 3.上面的脚本，如果我将 generate -t​​opN 设置为 5。这是否意味着如果一个站点有一个链接到另一个站点到另一个站点到另一个站点到另一个站点到另一个站点到另一个站点。它将包含在获取/解析周期中吗？4\. 这个命令怎么样，为什么会提到这个： `bin/nutch crawl urls -solr http://127.0.0.1:8983/solr/sites -depth 3 -topN 10000 -threads 3.` 5\. 当我运行 bin/nutch updateb 时，它需要 1-2 个 mineuts 然后它回显 Killed。这让我很担心。请帮忙。

是的，我已经阅读了很多关于 nutch 和 solr 的页面，并且我已经试图弄清楚这几个星期了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:20:30.020

> 我看到的一些 URL 不在`seed.txt`

我认为这是由于 URL 规范化而发生的。*Nutch*执行此 URL 规范化，因此原始 URL 被更改或转换为更标准的格式。

**对于＃1：**您注入然后执行生成提取阶段......对吗？您问题中的这 3 个阶段是解析爬网数据、使用新发现的页面更新数据库并分别索引它们所必需的。

**对于＃2：**对不起，我没有得到你的问题。

**对于 #3：** No.`topN`设置为 5 意味着*nutch*将从`while`符合获取条件的 URL 中选择前 5 个 URL。它将仅考虑这些选定的高分 URL 进行提取。

**对于#4：**这是一个自动调用所有*nutch*阶段的命令。因此，您不必为每个阶段手动执行单独的命令。只需一个命令，它就可以完成所有工作。

**对于 #5：** hadoop 日志中会记录一些异常。提供堆栈跟踪和错误消息，以便我对其发表评论。没有那个我什么都想不出来。

# c# - Xbox 360 上通过 XNA 的 Thread.SetAffinity 和线程问题

> ID：12126759
> 
> 赞同：2
> 
> 时间：2012-08-26T00:28:20.667
> 
> 标签：c#, xna, xbox360

所以我开发了一个非常有效的碰撞检测系统，但问题是它仍然无法在主线程上运行，因为它太慢了。

我尝试设置一些线程，如果线程结束，则会创建另一个线程。

```
if (doneCollisions)
            {
                PopulateGrid();
            }

            if (doneCollisions)
            {
                Thread thread = new Thread(new ThreadStart(CheckCollisionsGrid));

                thread.Start();

            }

void CheckCollisionsGrid()
{
Thread.CurrentThread.SetProcessorAffinity(3);
            doneCollisions = false;
            //Increments through all the grids.
.
.
.
doneCollisions = true;
} 
```

现在我在调试时注意到了一些奇怪的行为。当我调用 Thread.SetAffinity 时，它会一遍又一遍地跳回它，然后才最终开始实际检查碰撞。

现在我的碰撞延迟了5-10秒......

如果有人有见识，请在此处输入一些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:44:05.527

XBOX 360 有 3 个核心，每个核心有 2 个硬件线程，总共产生 6 个硬件线程。线程 0 和 2 由 XNA 框架保留，留下 1、3、4 和 5 供您使用。

As for the question, why are you creating a new thread after checking for collisions, to do exactly the same all over again? If you need to repeat the collision checking in a thread, simply put it inside a `while(true)` loop to keep it going.

# facebook - 尝试使用“应用访问令牌”发布操作以打开图表时出现 Facebook 会话过期错误

> ID：12126760
> 
> 赞同：3
> 
> 时间：2012-08-26T00:29:00.100
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, facebook-access-token

我的一些用户遇到了这个错误，情况如下：

我使用 facebook“应用程序访问令牌”将操作发布到 facebook Open Graph 而不是用户访问令牌，因为根据 facebook 文档，除非您刷新应用程序密码，否则应用程序访问令牌不会过期，我使用以下 Post url 发布操作

[https://graph.facebook.com/user_facebook_id/App_Namespace:action_name?FBOG_Object=FBOG_OBJECT_URL&access_token=app_access_token](https://graph.facebook.com/user_facebook_id/App_Namespace:action_name?FBOG_Object=FBOG_OBJECT_URL&access_token=app_access_token)

某些操作确实出现在 facebook 上，但对于某些用户而言，这些操作无法发布并返回以下消息：

```
{ "error": { "message": "Error validating access token: Session has expired at unix time 1345759200\. The current unix time is 1345925578.", "type": "OAuthException", "code": 190, "error_subcode": 463 } } 
```

我究竟做错了什么？为什么我在使用应用访问令牌时会出现过期错误？我应该担心用户权限吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:58:14.617

检查服务器后，似乎没有部署使用应用令牌的代码，并且使用用户令牌的代码仍然存在。

除非应用所有者采取了一些行动，否则应用令牌不会过期。 [https://developers.facebook.com/docs/authentication/applications/](https://developers.facebook.com/docs/authentication/applications/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:06:37.977

错误消息清楚地表明您的访问令牌已过期，您需要获取另一个令牌。

但是你可以处理这个问题：[访问令牌过期](http://developers.facebook.com/docs/authentication/access-token-expiration/)

此外，如果您正在寻找长寿命令牌，则需要在将应用程序授权给新用户时提供更多参数。

`offline_access`参数可以包含在请求中，但现在它已被 facebook 弃用。[删除离线访问](https://developers.facebook.com/roadmap/offline-access-removal/)

# spring - 速度模板中#springFormSingleSelect 的无效工作

> ID：12126763
> 
> 赞同：0
> 
> 时间：2012-08-26T00:29:28.090
> 
> 标签：spring, model-view-controller, spring-mvc, velocity

我正在制作spring mvc应用程序并使用速度模板进行视图。有表格用于填充数据，在此表格中我使用#springFormSingleSelect.Form在数据有效时工作正常，但当表格由无效数据填充时，如上所述有错误消息，但#springFormSingleSelect 为空。这是我的观点：

```
<form action="saveEmployee" method="POST">
                #springBind("newEmployee")
            <a href="listEmployees">#springMessage("label.back")</a>
            <p>
            <table>                
                <tr>
                    <td>#springMessage("label.firstName")</td>
                    <td>#springFormInput("newEmployee.firstName" "")</td>
                    <td><font color="red">#springShowErrors("&nbsp" "")</font></td>
                </tr>
                <tr>
                    <td>#springMessage("label.lastName")</td>
                    <td>#springFormInput("newEmployee.lastName" "")</td>
                    <td><font color="red">#springShowErrors("&nbsp" "")</font></td>
                </tr>
                <tr>
                    <td>#springMessage("label.salary")</td>
                    <td>#springFormInput("newEmployee.salary" "")</td>
                    <td><font color="red">#springShowErrors("&nbsp" "")</font></td>
                </tr>
                <tr>
                    <td>#springMessage("label.birthdate")</td>
                    <td>#springFormInput("newEmployee.birthday" "")</td>
                    <td><font color="red">#springShowErrors("&nbsp" "")</font></td>
                </tr>
                <tr>
                    <td>#springMessage("label.departament")</td>
                    <td>#springFormSingleSelect("newEmployee.departamentId" $departamentsMap "")</td>
               </tr>

            </table>
                    <input type="submit" value="#springMessage("label.submit")">
        </form> 
```

这是视图控制器的一部分：

```
@RequestMapping(value="/saveEmployee", method= RequestMethod.GET)
    public ModelAndView newuserForm(){
        ModelAndView model = new ModelAndView("newEmployee");
        Employee empl = new Employee();

        Map departamentsMap = new TreeMap();
        List<Departament> departamentsList = service.listDepartaments();

        //for singleselect of departaments
        for(int i=0; i<departamentsList.size(); i++){
            Departament dep = departamentsList.get(i);
            departamentsMap.put(dep.getDepartamentId(),dep.getTitle() );
        }                    
        model.addObject("departamentsMap",departamentsMap);

        model.getModelMap().put("newEmployee", empl);
        return model;
    }

    @RequestMapping(value="/saveEmployee", method=RequestMethod.POST)
    public String create(@ModelAttribute("newEmployee")Employee empl, BindingResult result){

        employeeValidator.validate(empl, result);
        if(result.hasErrors()){
            return "newEmployee";
        }
        service.saveEmployee(empl);
        return "redirect:/listEmployees";
    } 
```

也许有人知道这种行为的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:56:55.043

出错时departamentsMap 为空...所以请添加model.addObject("departamentsMap",departamentsMap); 在您的帖子详细信息中，因此当 eeror 发生时它不能为空。

```
//Modified this line of code..

if(result.hasErrors()){
        Map departamentsMap = new TreeMap();
        List<Departament> departamentsList = service.listDepartaments();

        //for singleselect of departaments
        for(int i=0; i<departamentsList.size(); i++){
            Departament dep = departamentsList.get(i);
            departamentsMap.put(dep.getDepartamentId(),dep.getTitle() );
        }                    
        model.addObject("departamentsMap",departamentsMap);

   return "newEmployee";
        } 
```

# javascript - 如何在 window.location.search 中搜索特定文本？

> ID：12126764
> 
> 赞同：3
> 
> 时间：2012-08-26T00:29:40.497
> 
> 标签：javascript

我有以下代码，我希望它仅在“？”之后的部分显示 div 包括“gclid=”。请注意，网址可能类似于 xxxxxx.com/?gclid=kljl3j4lk3j4l23

我不太确定如何合并部分字符串搜索，所以它只查找“？gclid”

```
<script type="text/javascript"> 
      $(function(){
            if (window.location.search == "?gclid") {
        $('#new').show();
  } else {
        $('#new').hide();
  }
});

        </script> 
```

我对此有点陌生，所以请原谅我的无知

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T00:40:25.627

你可以使用`indexOf()`

```
if(window.location.search.indexOf("gclid=") > -1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:40:37.017

```
if (window.location.search.match(/[?&]gclid=/)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T00:39:43.297

您可以使用正则表达式或子字符串和文本解析来执行此操作。

```
var stringPart = window.location.search.substr(0, 6);
if (stringPart == "?gclid") { ... 
```

或者

```
var re = new RegExp(/^\?gclid/);
if (window.location.search.match(re)) { ... 
```

这两个都应该让你到达那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T10:43:48.480

您可以使用 javaScript **split**来做到这一点

假设你有一个像

> [http://www.website.com/profile?var1=abc&var2=def&var3=ghi](http://www.website.com/profile?var1=abc&var2=def&var3=ghi)

```
//the url
var path = "http://www.website.com/profile?var1=abc&var2=def&var3=ghi";

//get all url parameters
var parameters = path.split("?")[1]; 

// get the parameters
var para1 = parameters.split("&")[0];
var para2 = parameters.split("&")[1];
var para3 = parameters.split("&")[2];

// get the parameter value
var para1var = para1.split("=")[1];
var para2var = para2.split("=")[1];
var para3var = para3.split("=")[1];
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-11T22:51:21.480

将每个参数一一提取，工作代码：

```
http://localhost:10/mapserver1/viewer/?config=viewer_simple1&url=https://maps2.dcgis.dc.gov/dcgis/rest/services/Zoning/MapServer&zoom=17&lat=38.917292&long=-77.036420 
```

你可以这样做：

```
 var ___zoom;
        var ___lat;
        var ___long;
        var ___basemap;

        var ___type;
        var ___url;
        var ___title;
        var ___opacity;

        /*
         *  if (value) { 
         *     
         *  }
         * 
         * will evaluate to true if value is not:

                null
                undefined
                NaN
                empty string ("")
                false
                0
         * 
         * 
         * 
         */

        if ( location.search.match(/zoom=([^&]*)/i) )
        {
             ___zoom = location.search.match(/zoom=([^&]*)/i)[1];
         }

        if ( location.search.match(/lat=([^&]*)/i) )
        {
           ___lat = location.search.match(/lat=([^&]*)/i)[1];
        }

        if (location.search.match(/long=([^&]*)/i))
        {
            ___long = location.search.match(/long=([^&]*)/i)[1];
        }

        if (location.search.match(/basemap=([^&]*)/i))
        {
            ___basemap = location.search.match(/basemap=([^&]*)/i)[1];
        }

        if (location.search.match(/type=([^&]*)/i))
        {
            ___type = location.search.match(/type=([^&]*)/i)[1];
        }

       if (location.search.match(/url=([^&]*)/i))
        {
            ___url = location.search.match(/url=([^&]*)/i)[1];
        }

        if (location.search.match(/title=([^&]*)/i))
        {
            ___title = location.search.match(/title=([^&]*)/i)[1];
        }

        if (location.search.match(/opacity=([^&]*)/i))
        {
            ___opacity = location.search.match(/opacity=([^&]*)/i)[1];
        }

        //console.log(location.search.match(/zoom=([^&]*)/i)[0]);   //    'zoom=17'
        //console.log(location.search.match(/zoom=([^&]*)/i)[1]);   //     '17'
        console.log(___zoom); 
        console.log(___lat); 
        console.log(___long); 
        console.log(___basemap); 

        console.log(___type); 
        console.log(___url); 
        console.log(___title); 
        console.log(___opacity); 
```

# mef - MEF：在字段上导入

> ID：12126766
> 
> 赞同：1
> 
> 时间：2012-08-26T00:30:09.850
> 
> 标签：mef

是否建议我们将 Import 放在属性而不是字段上？我在一个字段上尝试过它并且它正在工作，但 Resharper 告诉我一个警告，该字段从未初始化过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T04:29:11.780

ReSharper 无法识别 MEF 将设置变量，并且由于无法保证 MEF 将设置变量（例如，如果它没有放入容器中），因此 ReSharper 对此发出警告是合理的. 您可以忽略它，也可以简单地将字段初始化为 null（或 default(T)）。

至于是否应该使用属性或字段，我认为使用字段很好（假设它不是公共的）。我通常会为我想要公开的东西保留属性。这里要考虑的一种特殊情况是，在 SL 或部分信任等低信任场景中，私有成员上存在导入问题，因为 MEF 使用反射，而在某些场景中您不能使用私有反射。

# jquery - JQuery Mobile 内部哈希链接不起作用

> ID：12126767
> 
> 赞同：1
> 
> 时间：2012-08-26T00:30:14.830
> 
> 标签：jquery, html, hyperlink

我正在使用 JQuery Mobile 创建一个移动网站。我有链接到 div 的内部链接。第一个有效，但第二个链接（除了链接和文本外具有完全相同的格式）不起作用。有什么理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T22:37:50.583

您`data-role="page"`在代码中使用多个 's 吗？
如果是这样，您将需要使用[子页面](https://github.com/ToddThomson/jQuery-Mobile-Subpage-Widget)小部件并将 children 替换为`page`“ `subpage`”。

来自[jQuery Mobile 文档 - 链接页面](http://jquerymobile.com/test/docs/pages/page-links.html)

> 注意：您不能链接到激活 Ajax 导航的多页文档，因为框架只会加载它找到的第一个页面，而不是完整的内部页面集。在这些情况下，您必须在不使用 Ajax 的情况下进行链接（请参阅下一节）以进行整页刷新，以防止潜在的哈希冲突。当前有一个子页面插件，可以加载多页文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T23:28:01.780

我相信 OP 是（可能）问的是他/她有一些带有“快速导航”菜单系统的页面，可以跳到特定的标题，而不必单独手动向下滚动到每个标题 - 经常发现（或使用无论如何）在内容丰富的冗长页面上。就像是：

```
<div id="quick_nav_menu">
    <a href="#heading1">Heading 1</a>
    <a href="#heading2">Heading 2</a>
... <a href="#headingLast">Last Heading</a>
</div>
...
<h1 id="heading1">Heading 1</h1> 
```

单击其中一个 quick_nav_menu 链接会导致“错误加载页面”...错误。不幸的是，添加诸如“rel='external'”或“data-ajax='false'”之类的东西并不会产生更好的结果。我自己正在研究解决这个问题的方法。

**更新**

我自己用一点 JavaScript (jQuery) 解决了这个问题。我抓住了每个 quick_nav_menu 链接，并为每个链接附加了一个点击事件。click 事件提取每个超链接的 href 属性，在 hash 标记处将其拆分，从而生成一个包含两个元素（第一个元素为空）的列表：[, headerId]。它获取第二个列表项（标题的 ID），并使用 scrollIntoView() JavaScript 方法向下滚动到它。然后它返回“false”以禁止超链接的默认行为。

前任。

```
$(document).ready(function () {
    $("#quick_nav_menu a").click(function () {
        var href = $(this).attr("href");
        var headerId = href.split("#")[1];
        document.getElementById(headerId).scrollIntoView();
        return false;
    });
}); 
```

不幸的是，在 Web 浏览器上按下*后退*按钮不会让用户返回到 quick_nav_menu，而是滚动回上一个 jquery Mobile 页面，但它对于我的目的来说已经足够好了。

# iphone - 如何使用网格单元索引添加和删除覆盖图像

> ID：12126769
> 
> 赞同：1
> 
> 时间：2012-08-26T00:30:52.537
> 
> 标签：iphone, objective-c, ios, grid, imageview

这是我的代码

```
-(void)gridCell:(GridCell *)gCell didSelectImageAtIndex:(NSInteger)index imagSize:(CGRect )frameSize
{
            UIImage *img=[UIImage imageNamed:@"Overlay"];
            UIImageView *imgView=[[UIImageView alloc]initWithFrame:frameSize];
            imgView.image=img;
            [_scrPage addSubview:imgView];
            [self.view addSubview:_scrPage];
 } 
```

请帮我如何删除覆盖..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T02:25:00.213

通过“叠加”，我假设您的意思是`UIImageView`您添加的意思`_srcPage`？您是否保留了对该观点的某种参考？如果是这样，那么您需要做的就是`[imgView removeFromSuperview];` 如果不是，您需要找出如何获得对该特定视图的引用。

# ruby-on-rails - 使用规范和工厂女孩测试控制器，无法登录

> ID：12126776
> 
> 赞同：1
> 
> 时间：2012-08-26T00:32:47.873
> 
> 标签：ruby-on-rails, rspec, devise, factory-bot, functional-testing

我是 Rails 和测试 Rails 应用程序的新手。我尝试使用 rspec 测试现有的 rails 应用程序。
我刚刚完成了模型测试，我也必须完成控制器测试。
但是我在 rspec 上的 sign_in 方法有问题。我已经尝试了互联网上的所有解决方案，但我仍然无法像使用 rspec 的用户一样登录。
这是我的控制器代码，太简单了；

```
class AboutController < ApplicationController
  def index
  end

  def how_it_works
  end

  def what_is
  end

  def creative_tips
  end

  def brand_tips
  end

  def we_are
  end

  def faq
  end
end 
```

这是我的规范代码；

```
require 'spec_helper'

describe AboutController do

  before(:all) do
    @customer=Factory.create(:customer)
    sign_in @customer
  end

  context 'index page :' do

    it 'should be loaded successfully' do
      response.should be_success
    end

  end

end 
```

这是我的工厂代码；

```
Factory.define :unconfirmed_user, :class => User do |u|
  u.sequence(:user_name) {|n| "user_#{n}"}
  u.sequence(:email){|n| "user__#{n}@example.com"}
  u.sequence(:confirmation_token){|n| "confirm_#{n}"}
  u.sequence(:reset_password_token){|n| "password_#{n}"}
  u.password '123456'
  u.password_confirmation '123456'
  u.user_type :nil
end

Factory.define :user, :parent => :unconfirmed_user do |u|
  u.confirmed_at '1-1-2010'
  u.confirmation_sent_at '1-1-2010'
end

Factory.define :customer, :parent => :user do |u|
  u.user_type :customer
end 
```

最后是我的 spec_helper 代码

```
ENV["RAILS_ENV"] ||= 'test'
require File.dirname(__FILE__) + "/../config/environment" unless defined?(Rails)
require 'rspec/rails'
require "paperclip/matchers"

Dir["#{File.dirname(__FILE__)}/support/**/*.rb"].each {|f| require f}

RSpec.configure do |config|
  config.include Paperclip::Shoulda::Matchers
end

RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
end

RSpec.configure do |config|
  config.mock_with :rspec
  config.fixture_path = "#{::Rails.root}/spec/fixtures"
  config.use_transactional_fixtures = true
end 
```

宝石文件；

```
gem 'rails', '3.0.3'
gem 'mysql2', '< 0.3'
.
.
.
gem "devise" , "1.1.5"
.
.
.

group :test do
  gem 'shoulda'
  gem "rspec-rails", "~> 2.11.0"
  gem "factory_girl_rails"
end 
```

这是错误；

```
Failures:

  1) AboutController index page : should be loaded successfully
     Failure/Error: sign_in @customer
     NoMethodError:
       undefined method `env' for nil:NilClass
     # ./spec/controllers/about_controller_spec.rb:7:in `block (2 levels) in <top (required)>' 
```

解决方案一定太简单了，但我是新手，我找不到它:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:35:54.193

您必须在块内进行登录步骤`it`，以便 rspec 能够访问响应，例如：

```
it 'should be loaded successfully' do
  sign_in @customer
  response.should be_success
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T01:14:46.043

你没有主题。

```
require 'spec_helper'

describe AboutController do

  before(:all) do
    @customer=Factory.create(:customer)
    sign_in @customer
  end

  context 'index page :' do

    subject { Page }    
    it 'should be loaded successfully' do
      response.should be_success
    end

  end

end 
```

你可能需要`visit customers_path`.

# php - Mysql(i)_query 两次返回相同的查询

> ID：12126777
> 
> 赞同：0
> 
> 时间：2012-08-26T00:32:52.893
> 
> 标签：php, jquery, mysql, ajax

我已经为此苦苦挣扎了一段时间，似乎无法找到解决方案。

通过使用 JQuery-ui，我有一个可排序的列表。每当位置发生变化时，它们后面的颜色也需要更改到相同的位置。

因此，每当列表发生更改时，我都会对应该处理排序的 PHP 文件执行 AJAX 请求。所有关于颜色应该如何排序的数据都运行良好。但是，我需要将其更新到我的数据库中的一个表中。

当我调试时，通过回显从 AJAX 请求返回的数据 (console.log)，我得到了它们应该如何排序的正确方式。但是，只要我添加 myqsli_query($the_query)，它就会两次返回相同的查询。然后最终弄乱了排序，一切都从那部分开始走下坡路。

AJAX 请求转到的一段代码：

```
 foreach ($status_colors as $values) {
            //rearranges the colors with the new positions
            for ($i = 0; $i < count($positions); $i++) {
                $new_array[$positions[$i]] = $values[$i];
            }
            //sorting by key starting with 0
            ksort($new_array);

            //since the colors are saved in the table like this;
            //red,green,yellow,purple,etc. I have to implode
            $new_status_color = implode(',', $new_array);
             //return the right order of colors.
            echo $new_status_color;

            //Setting up the query with the new status_color the id here is just a example, however its actually going through about 20 records to update
            $update_query = 'UPDATE cars SET status_color="'. $new_status_color .'" WHERE id=1';
            //If i echo out $update_query, sort the list a couple of times
            //I get the result that I want, but as soon as I use the following it breaks
            //This breaks it, on the first sort it goes fine. But when I sort again, I get the same query back, as the first one.
            mysqli_query($link, $update_query);
        } 
```

关于这个问题的一个例子：假设我在一个列表中有 5 个项目，这是可排序的。

1.  项目 1 - 绿色
2.  项目 2 - 黄色
3.  项目 3 - 红色
4.  项目 4 - 蓝色
5.  项目 5 - 黑色

假设我将第 5 项更改为高于第 1 项，这将创建此列表：

1.  项目 5 - 黑色
2.  项目 1 - 绿色
3.  项目 2 - 黄色
4.  项目 3 - 红色
5.  项目 4 - 蓝色

现在使用 mysql_query 第一次可以正常工作，但是当我将其更改回第一个列表（第 1 - 5 项）时，它仍然返回上一个列表中的 SQL。

我希望能把它弄清楚一点，如果不是，你可以问一下，试着让它更容易理解。

还想补充一点，我尝试在 PHP 和 JQuery AJAX 中禁用缓存，这也无济于事。

# java - 一系列可能的值

> ID：12126782
> 
> 赞同：-4
> 
> 时间：2012-08-26T00:33:24.330
> 
> 标签：java, android

我想做一个 If 声明：

```
if(x == y+n)

{ }

n = [-20...20] 
```

其中 n 可以是从 -20 到 20 的任何整数值。

如何在java中做到这一点？

在android中，我试图将ontouch监听器“同步”到drawView。所以我的意思是随机出现的图像我想在图像出现时执行某个动作......所以屏幕上的“触摸”非常精确......

```
----DrawView Class---

setX(rand.nextInt(width-20));
setY(rand.nextInt(height-20));
canvas.drawBitmap(b, getX(), getY(), paint);

public boolean onTouch(View arg0, MotionEvent event) {
if (event.getX() == DrawView.getX()|| event.getY() == DrawView.getY())
{
Certian action...
} 
} 
```

那么如何包含 DrawView.getX()+[-20...20] 和 DrawView.getY()+[-20...20]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:36:56.433

如果我正确理解您的问题，您的意思可能是这样的：

```
int n = x - y;
if (n >= -20 && n <= 20) {
    // etc...
} 
```

对于您的特定范围，您可以使用以下方法简化此表达式`Math.abs`：

```
if (Math.abs(x - y) <= 20) {
    // etc ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:36:54.467

检查是否`x >= y - 20 && x <= y + 20`.

# php - 打开 php 文件，我知道你想打开还是保存文件

> ID：12126783
> 
> 赞同：0
> 
> 时间：2012-08-26T00:33:24.393
> 
> 标签：php, apache, file-io, module

最近我将`Apache 2.2`服务器配置为运行`PHP`并配置为`PHP 5`作为模块加载。我可以毫无问题地启动 Apache，但是当我尝试运行 PHP 文件时，它会弹出你想打开还是保存文件？

继续运行`Windows XP SP3`

`Internet Explorer`浏览器但不相关

只是尝试将其作为文件打开而不是我的文件，`index.php`并且没有设置 Apache 将其作为我的`index`. 如果有帮助，我认为我的问题可能在这里：

```
;AddType application/x-httpd-php .php
;AddType application/x-httpd-php .php5
;AddType application/x-httpd-php .phtml 
```

我尝试在我的 Apache conf 文件中进行修改，`addtype`但`addhandler`没有任何更改，并且 apache 仍然以两种方式启动。

我尝试将它们放在 mime 配置部分内部和外部，两种方式都相同，但不确定我的`loadmodule`部分应该在文档中的哪个位置输入。

我不确定，但我唯一能看到的另一个问题是在我没有对其进行任何修改的 php.ini 文件中。

有人可以指出我正确的方向吗？我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T01:02:00.107

编辑`httpd.conf`并添加（或删除`;`行首的）：

```
# PHP 5.x module
LoadModule php5_module  modules/libphp5.so
AddHandler php5-script  .php 

# Add index.php to your DirectoryIndex line:
DirectoryIndex index.html index.php

AddType text/html   .php

# PHP Syntax Coloring
# (optional but useful for reading PHP source for debugging):
AddType application/x-httpd-php-source phps 
```

我不知道，但我认为您需要重新启动 Apache。

来自[http://dan.drydog.com/apache2php.html](http://dan.drydog.com/apache2php.html)（第 11 步）

# javascript - Javascript动态数组不起作用

> ID：12126785
> 
> 赞同：0
> 
> 时间：2012-08-26T00:33:29.027
> 
> 标签：javascript, arrays, dynamic, letter

我目前正在为网站所有者设计一个功能，以跟踪他们网站上最常搜索/输入的内容。为此，我有一个基本功能，记录按下了哪些键，尽管我想将这些字母推入一个数组，这样更容易管理，但我遇到了一个问题，它只将最后一个键推入数组。我是编程新手，所以在我的代码上放轻松：P

这是带有故障动态数组的代码：

```
$(document).ready(function() {
   $(document).keyup(function(objEvent) {
        (objEvent) ? keyCode = objEvent.keyCode : keyCode = event.keyCode;
        varArray = [];
        varLetter = String.fromCharCode(keyCode);
        console.log(varLetter);
        varArray.push(varLetter);
        });
   }); 
```

提前致谢

-亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:35:22.620

您正在重置阵列与此行上的每一次按键...

```
varArray = []; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:55:40.573

在事件处理程序之外声明并初始化您的数组，以便它可以累积按键而不是每次都重置。您当前的代码在每次按键时将数组设置为空`varArray = [];`。

您可以使用这样的东西，其中 varArray 被声明并初始化一次作为全局变量。我也改成`varLetter`了一个局部变量，因为它只在本地使用，不需要它是全局的：

```
var varArray = [];
$(document).ready(function() {
   $(document).keyup(function(objEvent) {
        (objEvent) ? keyCode = objEvent.keyCode : keyCode = event.keyCode;
        var varLetter = String.fromCharCode(keyCode);
        console.log(varLetter);
        varArray.push(varLetter);
    });
}); 
```

# php - PHP 单个 mySQL 表加上未定义数量的多个 mySQL 表条目通过单个 HTML 表单

> ID：12126787
> 
> 赞同：0
> 
> 时间：2012-08-26T00:33:41.773
> 
> 标签：php, javascript, mysql

这是我在互联网上发布的第一个问题，我通常能够找到某种解决方案，但现在我要么必须以其他更基本的方式来解决这个问题，要么我希望能从 Stack Overflow 上的某个人那里得到帮助. 我有一个想法如何以另一种方式做到这一点，但我真的很想如果我能让它像这样工作。

我正在尝试构建一个互联网应用程序，人们或组织可以通过该应用程序通知收容所他们想捐赠的衣服，以供收容所的移动团队领取。

我现在将我的 HTML 表单、PHP 脚本、JavaScript 函数和 mySQL 的简化版本用于制作我想要存储来自 HTML 表单的信息的表。

HTML 表单：

```
<form action="apply.php" method="post">
<p>Please enter your personal info so we can make contact with you:<br />
Name: <input type="text" name="name" /><br />
Address: <input type="text" name="addr" /><br />
Phone: <input type="text" name="phon" /><br />
e-mail: <input type="text" name="emai" /><br /><br />
<!--previous part of the form needs to be entered only once in a table named
"application" in real form there are more fields-->     
<div id="dod">
<p><b>I wish to donate:</b> (in case you wish to donate more stuff click on
"Add more"):</p>
<p> <select name="kind">
<option value="Jacket">Jacket</option>
<option value="Shirt">Shirt</option>
<option value="Pants">Pants</option>
</select></p>
<!--there are more options in the actual form-->
<p>How many items of this type would you like to donate?
<input type="text" name="piec"></p>      
<p>Size of the items: <select name="size">
<option value="S">S</option>
<option value="M">M</option>
<option value="L">L</option>
<option value="Other">Other</option>
<option value="Various">Various</option>
</select></p><br />
<!--This part should be entered several times depending on how many types of clothes
and in which sizes people wish to donate. There are more options in actual form-->
</div>
<center>
<a href="#" onclick="JavaScript:addClothes()" style="font-family: 'verdana'">Add more
</a><br /><br />
<input type="submit" value="Submit"></input>
</center>
</form> 
```

这是 JavaScript 的简化版本，它将表单字段添加到

```
function addClothes() {
document.getElementById('dod').innerHTML+="<p><select name='kind'><option\n\
value='Jacket'>Jacket</option>\n\
<option value='Shirt'>Shirt</option>\n\
<option value='Pants'>Pants</option>\n\
</select>\n\
</p><p>How many items of this type would you like to donate? <input type='text'\n\
name='piec'></p>
<p>Size: <select name='size'><option value='S'>S</option>\n\
<option value='M'>M</option>\n\
<option value='L'>L</option>\n\
<option value='Other'>Other</option>\n\
<option value='Various'>Various</option></select></p><br />";
} 
```

这些是用于在 shield_db 数据库中创建表的 mySQL 表达式：

```
CREATE TABLE shelter_db.application
(
Name varchar(80) NOT NULL,
Address varchar(80) NOT NULL,
Phone varchar(20) NOT NULL,
Email varchar(50) NOT NULL,
Stamp timestamp NOT NULL,
PRIMARY KEY (Stamp)
);

CREATE TABLE shelter_db.clothes
(
Kind varchar(40) NOT NULL,
Pieces integer(6) NOT NULL,
Size varchar(20),
Stamp timestamp,
FOREIGN KEY (Stamp)
REFERENCES application (Stamp)
); 
```

我的想法是让这两个表中的数据通过记录时的时间戳连接起来，因为不同方肯定不会同时输入。然后，被分配联系捐赠者的人可以看到该特定方希望捐赠什么，并可以相应地派出带有汽车或皮卡车的移动团队。

我正在苦苦挣扎的是如何制定 php/sql 页面，在浏览了几十个网页之后，我找不到适合我需要的解决方案。我假设我应该使用 implode 函数，但是在尝试了各种解决方案之后，我找不到合适的解决方案。这是代码：

```
<?php
$con = mysql_connect('localhost','root','');
if (!$con) {die('Unable to connect: ' . mysql_error());}
mysql_select_db('shelter_db', $con);
//the following part needs only one entry into application table of the db
$sql="INSERT INTO application (Name, Address, Phone, Email, Stamp)
VALUES
('$_POST[name]','$_POST[addr]','$_POST[phone]','$_POST[emai]',time());
//the following part needs multiple entries depending on how many times the Add more 
//button in the HTML form has been clicked
INSERT INTO clothes (Kind, Pieces, Size, Stamp)
VALUES
('$_POST[kind]','$_POST[piec]','$_POST[size]',time())";
if (!mysql_query($sql,$con)) { die('Error: ' . mysql_error()); }
else {
echo 'Database entry successful.';
}
mysql_close($con)
?> 
```

我将感谢任何可以为我提供适合我示例的代码的人。对不起，较长的帖子，但他们说要彻底。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:38:20.730

首先，通过时间戳关联绝对不是一个好主意。首先，有可能两个人同时使用您的网站，他们提交的内容会很混乱。其次，插入应用程序表和衣服表之间的时间可能会发生变化（日期时间精确到秒，可能第一次插入时间是 T.999，第二次插入时间是 T+1.000；第二个问题可以通过以下方式解决在脚本开头为时间分配一个变量，并在所有插入中使用它。但是由于第一个问题，您仍然不应该为此使用时间戳。

相反，您应该为应用程序分配一个唯一的 ID。这很容易在 mysql 中通过使用带有`auto-increment`选项的 ID 列来完成。当您向表中添加一行时，您会忽略此列（或将其值设为 NULL），服务器将自动分配一个比上一个分配的值高 1 的值。该函数`mysql_insert_id()`将返回您在上次插入时分配的值。在衣服表中，添加一个`application_id`包含该 ID 的列。您可以使用它来关联两个表。

接下来你要处理的是如何处理表单中的多个衣服列。在您添加的每一行中，您为表单元素指定了与前一行相同的名称。PHP 在处理表单时，`$_POST['kind']`只能获取其中一个。处理这种情况的方法是给它们命名以结尾`[]`，例如`<select name="kind[]">`。这告诉 PHP 它应该创建一个包含这些输入的数组。然后，您可以得到第一行的种类为`$_GET['kind'][0]`，第二行为`$_GET['kind'][1]`，依此类推。因此，当您写入数据库时​​，您可以执行以下操作：

```
foreach ($_GET['kind'] as $i => $kind) {
  $sql = "INSERT INTO clothes (Application_ID, Kind, Pieces, Size) VALUES ($id, ".$kind.", "$_GET['piec'][$i]", '"$_GET['size'][$i]"')";
  mysql_query($sql, $con) or die ('Error: ' . mysql_error());
} 
```

`$id`包含您从中获得的值`mysql_insert_id()`。

最后，如果我没有指出这些`mysql_XXX`函数已被弃用并且不应在任何新代码中使用，我就不会履行作为 SO 回答者的职责。它们已被`mysqli_XXX`PDO 取代。这些允许您创建“准备好的”语句，因此您不必像上面那样将变量替换为字符串，这可能会导致 SQL 注入攻击，除非您仔细清理数据（为了权宜之计，我没有在上面这样做）。

顺便说一句，我还没有看过你的 JavaScript。看起来没什么大不了的。如果其他人注意到其中的问题，请竖起大拇指。

# python - Apache 不压缩/放气/GZIP 响应

> ID：12126788
> 
> 赞同：0
> 
> 时间：2012-08-26T00:33:57.730
> 
> 标签：python, apache, .htaccess, apache2

我已经设置了 apache .htaccess 文件，以便它应该压缩我的应用程序喷出的 JSON。该应用程序是用 python 编写的，并通过 CGI 脚本链接到 apache。

```
<ifmodule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript text/javascript text/json application/json
</ifmodule> 
```

我返回的 JSON 仍然不是 GZipped，尽管返回的静态文件是。关于如何解决这个问题有什么想法或想法吗？

我正在使用 Apache2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T02:06:56.777

.htaccess 不会影响脚本输出，因此您必须从 Python 应用程序处理 gzip 压缩。例如，对于 Django 应用程序，您可以使用 GZipMiddleware。

# android - android - 请求权限不存在

> ID：12126789
> 
> 赞同：0
> 
> 时间：2012-08-26T00:34:01.833
> 
> 标签：android

比如说，一个应用程序在 manifest xml 中请求 VIBRATOR，并在代码中获取振动器服务，但设备没有配备振动器。那么，是安装失败还是 getSystemService 返回空指针？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:23:55.040

我相信您的问题的答案在这篇文章中[Android: vibrator method (if phone has no vibrator?)](https://stackoverflow.com/questions/8863363/android-vibrator-method-if-phone-has-no-vibrator)

这将检查以确保您的应用即使在没有振动器的设备上也不会崩溃。

```
 Vibrator vibe = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

 if(vibe.hasVibrator()){
     vi.vibrate(100);
 } 
```

尽管如此，Google Play 会过滤应用程序，因此如果设备没有振动器，则无法安装清单中需要振动权限的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T01:32:48.933

当用户选择从 Android Market 安装时，他们会收到所需权限的通知。用户不能选择允许或拒绝这个或那个权限；他们会收到应用程序所需权限的通知，并且通过选择安装应用程序，他们接受将授予所需权限。

您无法从市场中筛选出缺少振动电机的设备，因为 VIBRATE 许可不是暗示[功能要求](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)的许可之一。

# python - Python 读写二进制

> ID：12126790
> 
> 赞同：-1
> 
> 时间：2012-08-26T00:34:06.217
> 
> 标签：python, binary, python-2.7

> **可能重复：**
> [如何在 python 中将单个位写入文本文件？](https://stackoverflow.com/questions/5205487/how-to-write-individual-bits-to-a-text-file-in-python)

我一直在寻找，试图找到一种方法来简单地从文件中读取和写入位。我发现的大多数东西都只是展示了将字符转换为二进制的方法。如：

```
 >>> byte = 'a'
    >>> byte = ord(byte)
    >>> byte = bin(byte)
    >>> print byte
    '0b1100001' 
```

这不是我想要的。我正在寻找操作文件中的实际二进制文件。我不想使用额外的模块，只是标准的 python 2.7。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:37:15.843

以二进制模式打开文件，使用`'r+b'`：

```
>>> f=open('data.txt','wb')
>>> f.write('abcd')
>>> f.close()
>>> f=open('data.txt','rb')
>>> [bin(ord(x)) for x in f.read(4)]        #read(4) to read 4 bytes
['0b1100001', '0b1100010', '0b1100011', '0b1100100']
>>> 
```

# php - 如何获取此功能以使用 RegEx 替换 URL 以排除 URL

> ID：12126795
> 
> 赞同：0
> 
> 时间：2012-08-26T00:35:47.687
> 
> 标签：php, regex

我遇到了`RegEx`用纯文本替换 URL（不是超链接）的出色“小程序”。唯一的问题是我对 RegEx 知之甚少，所以我完全坚持让这个为我的博客工作。

因此，我正在寻求排除 URL 的帮助，例如，`$exception_url = 'http://mysite.com'`

```
function strip_urls($text, $xception_url = FALSE)
{
    return preg_replace("/( (?:
    (?:https?|ftp) : \\/*
    (?:
        (?: (?: [a-zA-Z0-9-]{2,} \\. )+
            (?: arpa | com | org | net | edu | gov | mil | int | [a-z]{2}
                | aero | biz | coop | info | museum | name | pro
                | example | invalid | localhost | test | local | onion | swift ) )
        | (?: [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} )
        | (?: [0-9A-Fa-f:]+ : [0-9A-Fa-f]{1,4} )
    )
    (?: : [0-9]+ )?
    (?! [a-zA-Z0-9.:-] )
    (?:
        \\/
        [^&?#\\(\\)\\[\\]\\{\\}<>\\'\\\"\\x00-\\x20\\x7F-\\xFF]*
    )?
    (?:
        [?#]
        [^\\(\\)\\[\\]\\{\\}<>\\'\\\"\\x00-\\x20\\x7F-\\xFF]+
    )?
) | (?:
    (?:
        (?: (?: [a-zA-Z0-9-]{2,} \\. )+
            (?: arpa | com | org | net | edu | gov | mil | int | [a-z]{2}
                | aero | biz | coop | info | museum | name | pro
                | example | invalid | localhost | test | local | onion | swift ) )
        | (?: [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} )
    )
    (?: : [0-9]+ )?
    (?! [a-zA-Z0-9.:-] )
    (?:
        \\/
        [^&?#\\(\\)\\[\\]\\{\\}<>\\'\\\"\\x00-\\x20\\x7F-\\xFF]*
    )?
    (?:
        [?#]
        [^\\(\\)\\[\\]\\{\\}<>\\'\\\"\\x00-\\x20\\x7F-\\xFF]+
    )?
) | (?:
    [a-zA-Z0-9._-]{2,} @
    (?:
        (?: (?: [a-zA-Z0-9-]{2,} \\. )+
            (?: arpa | com | org | net | edu | gov | mil | int | [a-z]{2}
                | aero | biz | coop | info | museum | name | pro
                | example | invalid | localhost | test | local | onion | swift ) )
        | (?: [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} )
    )
) )/Dx", '', $text);
} 
```

非常感谢您的回答，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:54:48.970

更改正则表达式几乎是不可能的，并且最终会变得巨大。

但是，您可以暂时用一些虚假字符串替换异常 URL 中将其标识为 URL 的部分，然后在正则表达式之后将它们替换回来（如果您真的想要偏执，您可以确保替换字符串不t 已经存在于文本中（或者在 URL 剥离后不存在），如果存在，则附加一个随机数，直到它们不存在）：

```
$identifier = '.com';
$temp_replace = '@@@STRIP_URLS-COM@@@';
$identifier2 = '://';
$temp_replace2 = '@@@STRIP_URLS-SLASHES@@@';
if ($exception_url) {
    $text = str_replace($exception_url, str_replace(array($identifier, $identifier2), array($temp_replace, $temp_replace2), $exception_url), $text);
}

$text = preg_replace(...)
....rest of regex here...

if ($exception_url) {
    $text = str_replace(array($temp_replace, $temp_replace2), array($identifier, $identifier2), $text);
}
return $text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:59:06.433

我相信有人会发现这很有用。

您可以指定一个相对 URL，即允许来自您网站的 URL：

```
strip_urls($blog_comment, 'http://www.mysite.com/'); 
```

来自一组合作伙伴域：

```
strip_url($blog_comment, array('http://mysite.com/', 'http://partner.com/', 'http://partner1.com/')). 
```

使用 Mihai Loga 使用占位符的想法，我修改了初始脚本以将数组或字符串作为 $exception_url。我还制作了占位符以使其更安全。

```
function strip_urls($text, $exception_url = array())
{
    if( ! empty($exception_url))
    {
    if(is_string($exception_url)) $exception_url = array($exception_url);

$placeholder_array = array();
$placeholder = md5(uniqid());

if(strpos($text, $placeholder))
{
    while(strpos($text, $placeholder))
    {
    $placeholder = md5(uniqid());
    }
}

for($i = 0; $i < count($exception_url); $i++)
{
    if( ! is_string($exception_url[$i]))
    {
    unset($exception_url[$i]);
    $exception_url = array_values($exception_url);
    continue;
    }

    $pos = mb_strpos($text, $exception_url[$i]);

    if (FALSE === $pos) continue;

    $text = substr_replace($text, $placeholder + $i, $pos, mb_strlen($exception_url[$i]));
    $placeholder_array[] = $placeholder + $i;
}
}

$text = preg_replace("/( (?:
    (?:https?|ftp) : \\/*
    (?:
        (?: (?: [a-zA-Z0-9-]{2,} \\. )+
            (?: arpa | com | org | net | edu | gov | mil | int | [a-z]{2}
                | aero | biz | coop | info | museum | name | pro
                | example | invalid | localhost | test | local | onion | swift ) )
        | (?: [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} )
        | (?: [0-9A-Fa-f:]+ : [0-9A-Fa-f]{1,4} )
    )
    (?: : [0-9]+ )?
    (?! [a-zA-Z0-9.:-] )
    (?:
        \\/
        [^&?#\\(\\)\\[\\]\\{\\}<>\\'\\\"\\x00-\\x20\\x7F-\\xFF]*
    )?
    (?:
        [?#]
        [^\\(\\)\\[\\]\\{\\}<>\\'\\\"\\x00-\\x20\\x7F-\\xFF]+
    )?
) | (?:
    (?:
        (?: (?: [a-zA-Z0-9-]{2,} \\. )+
            (?: arpa | com | org | net | edu | gov | mil | int | [a-z]{2}
                | aero | biz | coop | info | museum | name | pro
                | example | invalid | localhost | test | local | onion | swift ) )
        | (?: [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} )
    )
    (?: : [0-9]+ )?
    (?! [a-zA-Z0-9.:-] )
    (?:
        \\/
        [^&?#\\(\\)\\[\\]\\{\\}<>\\'\\\"\\x00-\\x20\\x7F-\\xFF]*
    )?
    (?:
        [?#]
        [^\\(\\)\\[\\]\\{\\}<>\\'\\\"\\x00-\\x20\\x7F-\\xFF]+
    )?
) | (?:
    [a-zA-Z0-9._-]{2,} @
    (?:
        (?: (?: [a-zA-Z0-9-]{2,} \\. )+
            (?: arpa | com | org | net | edu | gov | mil | int | [a-z]{2}
                | aero | biz | coop | info | museum | name | pro
                | example | invalid | localhost | test | local | onion | swift ) )
        | (?: [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} \\. [0-9]{1,3} )
    )
) )/Dx", '', $text);

return (empty($exception_url))? $text : str_replace($placeholder_array, $exception_url, $text); 
```

}

感谢 Mihai Loga 并设计了这个 RegEx……一切都始于一个好主意。

# php - 如何结合 jQuery 和 PHP 来根据用户选择动态更改输入值？

> ID：12126802
> 
> 赞同：0
> 
> 时间：2012-08-26T00:37:26.330
> 
> 标签：php, javascript, jquery, html

所以基本上这就是我想要做的：

我有一个名为的 php 变量`$dynamicchange`，它根据不同的用户选择（他们在哪个页面等）获得不同的值

我还有一些选择选项表单输入，其中包含“全部”作为条目。

使用 jQuery，我想这样做：

```
 [every 1 millisecond, check for and update all input fields if needed] << function

if ($dynamicchange == 'en') {
do not replace anything, the phrase stays as it is, 'All'.
}
if ($dynamicchange == 'tr') {
replace all input phrases every 1 millisecond, changing them to 'Hepsi'.
} 
```

我要定位的示例输入选项是：

```
 <select id="sub_cat" style="" name="sub_cat">
 <option selected="selected" value="-10">All</option> 
```

如果 的值为，`$dynamicchange`则`en`保持原样，如果为`tr`，则更改为`Hepsi`。

我该怎么做呢？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T01:05:21.120

我不明白你到底想要什么，但据我所知，你可以做这样的事情

将值放在隐藏的输入中

```
<input id="test" hidden="hidden" value="$dynamicchange"> 
```

然后做这样的事情

```
$(function(){
   var herp = $('#test').val();
   if(herp=="en"){
        //do stuff
    }else{ 
        //do other stuff
    }
}); 
```

您可以有一个计数器（不是 1 毫秒，您的电脑会爆炸），它会再次触发该功能。您首先不清楚此功能将如何触发，因此我将其留给您判断（我会做 window.load()）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T01:35:16.217

连接到经常无法正常运行的服务器。

在这种情况下，您可以使用 ajax-jquery，如下所示：

```
$.get('phpfile', { send your data }, function(returned) { if returned == en ... } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T01:57:51.203

如果我理解正确，我认为您应该使用 AJAX 脚本并为访问者做出的“选择”引入事件。您需要有单独的 PHP 页面，其中包含要显示的文本和元素。您的 Javascript 应如下所示：

```
function showText(cv){//cv is an element identifier which is posted to php page
var url='show.php';
$.post(url,{contentVar:cv}, function (data){
$('#textt').html(data).show();
});
}
function eraseText (){
document.getElementById('textt').innerHTML="What you want it to say by default";
} 
```

在 HTML 文档中，您必须拥有带有 Javascript 能够识别的 ID 的元素，例如：

```
<p onmouseover="JavaScript:showText('id1');" onmouseout="JavaScript:eraseText();">Some 
text</p><!--this is the element upon which the actions taken will change the page, you
can have many such elements but you need to change the id inside ('id1')-->
<div id="textt"style="position: fixed; bottom: 20%; left: 20%; background: lightgrey; 
width: 70%; height: 70%;">What you want it to say by default
<br /></div><!--this is the element that will be changed upon action, you can define 
more such elements by adding more rows in the function--> 
```

最后你的 show.php 文件应该是这样的：

```
<?php
$contentVar=$_POST['contentVar'];
if ($contentVar=='id1') {
echo 'Text that you want to be displayed instead';}
//you can use multiple 'else if' loops afterwards
?> 
```

希望有帮助。

# ruby-on-rails - 在 before_create 中设置布尔字段会停止创建吗？

> ID：12126807
> 
> 赞同：2
> 
> 时间：2012-08-26T00:38:13.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以这可能是一个错误。

在我的模型中，在我的`orders`桌子上，我有一个名为`active`. 它是一个布尔值，默认为 true。在`before_create`订单中，我正在做一些逻辑，`active`如果 XYZ 发生，将设置为 false。

但是，当 XYZ 发生时，它似乎会阻止记录一起保存（没有给我提供任何真正的错误），而不仅仅是将字段设置为 false。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T00:53:29.320

如果您在过滤器`active = false`的末尾设置，`before_create`过滤器将返回`false`并停止过滤器执行链，导致保存无法完成。

如果您的代码是这种情况，请在您`true`的末尾返回，`before_create`您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T13:21:45.563

我有同样的问题，我必须在每个 before_create 回调的末尾插入 1==1 或 true 。回调定义中看起来有些奇怪。

# svn - 加载旧 svn 转储然后更新文件的推荐过程

> ID：12126808
> 
> 赞同：0
> 
> 时间：2012-08-26T00:38:29.667
> 
> 标签：svn, dump, subclipse

情况如下：

我最近备份的 svn 转储文件是（比如说）修订版 7150。但是，我的 SVN 客户端上的文件的最新版本（Windows Eclipse 上的子剪辑）是 7175。此时服务器文件系统在非可恢复的方式。所以，我没有最新的转储。

要在新服务器（centos linux）上创建新存储库，我可以加载存储库，它会在 7150 之前保持最新状态。我是否应该在客户端上创建一个新文件夹并将存储库签出到这个位置（即，将客户端上的旧仓库将过时，因为它指向旧实例？）。此外，鉴于我将丢失从 7150 到 7175 的文件更改，将新存储库同步到最新状态 (7175) 的推荐方法是什么？也许如果我手动复制更改的文件，那么单个提交可以更新到 7151（与旧系统上的 7175 类似的状态）？在此先感谢您的任何指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:19:13.360

问题是您当前的客户端已签出到修订版 7175 - 一个不再存在的修订版。

进行新的签出，并将当前工作目录 (rev 7175) 中的文件复制到新签出的工作目录 (rev 7150)。如果您使用的是 Subversion 1.7 客户端，则唯一的`.svn`目录将位于结帐的根目录中，因此很容易复制所有内容（只是不要覆盖那个新`.svn`目录！）。如果您使用的是 1.7 之前的客户端，请注意`.svn`树中所有目录中的目录。

您的新修订版将是修订版 7151，而不是 7175 或 7176。旧修订版 7151 和 7174 之间的旧更改历史记录将不复存在。不再。你不再知道是谁改变了它们或为什么。

# php - php中的单例和类实例化

> ID：12126809
> 
> 赞同：0
> 
> 时间：2012-08-26T00:38:36.423
> 
> 标签：php, codeigniter, singleton

在 codeigniter 框架中有一个这样的类（我将它编辑得更清楚，完整的功能在这里[http://pastebin.com/K33amh7r](http://pastebin.com/K33amh7r)）：

```
function &load_class($class, $directory = 'libraries', $prefix = 'CI_')
    {
        static $_classes = array();

        // Does the class exist?  If so, we're done...
        if (isset($_classes[$class]))
        {
            return $_classes[$class];
        }

        is_loaded($class);

        $_classes[$class] = new $name();
        return $_classes[$class];

    } 
```

所以，第一次加载类时（传递给这个函数），它将被保存到这个静态变量中。下次加载同一个类时，此函数会检查该类是否已经存在（如果它已经分配给静态，缓存，我不确定它是如何存储在内存中的），如果它存在，则加载它（**NOT** **实例化**再次 ）

据我所知，**唯一的目的**是节省时间或内存，而不是两次实例化同一个类。

我的问题是：真的实例化一个类会占用内存或消耗加载时间，所以它必须像这样被缓存吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T00:44:40.190

CodeIgniter 适用于快速原型设计，几乎在任何情况下都不是企业模式的好例子。这种行为与他们对“控制器”与几乎所有其他对象的关系的设计选择有关；即几乎任何东西都只有一个（只有一个控制器实例，每个库只有一个实例，等等）。这种设计选择更适合快速开发（由开发人员“不必跟踪太多”或类似的东西证明是合理的......）。

基本上，通过不实例化对象可以节省内存（存储对象的实例变量所需的内存），如果对象的构造函数尝试做很多工作，您也可以节省时间。

然而，单例命令式的适当性显然不是普遍的；有时你真的想要一个新的实例。当你能证明这一点时，选择一个更好的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:46:06.947

实例化类所用的资源和时间通常可以忽略不计。我通常看到使用单例类的主要原因是维护数据完整性。例如，如果您有一个表示数据库中数据的类，为它创建多个对象可能会导致数据不同步。如果一个对象更改并将数据提交到数据库，则其他对象可能具有旧数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T01:07:21.883

它是一个相当简单的概念，利用单例模式确保一个类在应用程序的执行周期中只实例化一次。

这种概念更适用于图书馆。让我们看一个基本的例子：

```
class Authenticate {
     public function login($username, $password) {
        ....
     }

     public function logout() {

     }
} 
```

现在，通过一个页面的执行，几乎没有任何情况需要多次创建上述类的对象。主要要了解的是***资源的利用***

**是**的，一遍又一遍地实例化同一个类毫无疑问会在内存中加起来，虽然它可能像我展示的例子一样可以忽略不计，但它确实会影响。

# java - How to turn int[] to Integer[] in java?

> ID：12126811
> 
> 赞同：0
> 
> 时间：2012-08-26T00:38:56.577
> 
> 标签：java, arraylist

I have a function taking an int array and need to have that array put into an arraylist

So I use `list.addAll(Arrays.asList(array));`

However since `list` is `ArrayList<Integer>`, the `addAll` only accepts `Integer[]` instead of `int[]`

How should I box the primitive array into an Integer Object array?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:47:02.153

You can use [ArrayUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html#toObject%28int%5B%5D%29) from Apache Commons:

```
Integer[] integerArray = ArrayUtils.toObject(intArray); 
```

to follow on from this, to create a `List<Integer>`, you can use:

```
List<Integer> integerList = Arrays.asList(ArrayUtils.toObject(intArray)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T00:46:29.000

```
static void addAll(final Collection<Integer> collection, final int[] v) {
  for (final int i : v) {
    collection.add(i);
  }
}
...
addAll(list, array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T00:40:24.080

Iterate through the int array and instantiate new `Integer` objects, and place them in the `ArrayList`. You won't be able to use autoboxing since that only works for primitives. Arrays aren't primitive types.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T02:40:59.420

If you have [Guava](http://guava-libraries.googlecode.com), you can just use

```
list.addAll(Ints.asList(array)); 
```

...which, by the way, creates fewer unnecessary objects than the Apache Commons technique will. (Specifically, it won't bother creating an `Integer[]`; it'll just return a `List<Integer>` view of an `int[]`.)

Disclosure: I contribute to Guava.

# php - PHP PDO Select 语句不起作用

> ID：12126813
> 
> 赞同：1
> 
> 时间：2012-08-26T00:39:11.447
> 
> 标签：php, mysql, pdo

新的 mysql 和非常新的 PDO - 但我试图通过大量的教程来学习。

我试图在数据库中获取与用户 ID 对应的条目，然后使用它在个人资料页面上回显用户名等。

```
$stmt = $conn->query('SELECT * FROM clients WHERE id = 42');
$results = $stmt->fetchAll(PDO::FETCH_ASSOC);

    // Content here...

echo $results['firstname']; 
```

这给了我一个**错误**，即**名字****未定义**- 我在这里做错了什么？

完成本教程：[http ://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:42:59.893

尝试更改它：

```
$results = $stmt->fetch(PDO::FETCH_ASSOC) 
```

因为您从数据库中请求单行，而不是包含行的数组

```
PDOStatement::fetchAll — Returns an array containing all of the result set rows
PDOStatement::fetch — Fetches the next row from a result set 
```

# javascript - 如何从选择选项中获取 HTML5 数据值？

> ID：12126815
> 
> 赞同：5
> 
> 时间：2012-08-26T00:39:21.333
> 
> 标签：javascript, jquery, html

是否可以使用 jquery 从选择选项中获取 html5 数据属性？

```
<select id="change-image">
<option value="cool" data-image="myimage.jpg">Cool</option>
</select>

$("#pet-tag-id").change(function() {                    
var src = $("#change-image").data("image");
$("#image-preview").attr("src", src);
});

<img id="image-preview"> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-26T00:41:40.830

是的。

你甚至以正确的方式做到了。jQuery 会将*HTML5 数据属性*拉入其内部元素的 expando*数据对象*中。因此，您可以仅通过名称访问它们。

唯一不正确的是，您没有调用`.data()`正确的元素。您在 上调用它`<select>`，但您需要获取选定的选项元素。喜欢

```
var src = $("#change-image option:selected").data("image"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:43:09.287

```
$("#change-image").change(function() {                    
    var data_image = $(this).children('option:selected').attr('data-image');
}); 
```

​</p>

# django - 使某些页面仅对 django 中的某些用户可用？

> ID：12126826
> 
> 赞同：2
> 
> 时间：2012-08-26T00:42:37.873
> 
> 标签：django

我正在用 django 建立一个电子商务网站。我想建立一个页面，列出在某一天创建的所有订单，但我只希望我的员工能够访问这个页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:44:52.477

如果工作人员指的是`is_staff`标志而不是自定义组，那么您可以在视图之前使用此装饰器

```
from django.contrib.admin.views.decorators import staff_member_required

@staff_member_required
... view ... 
```

# mysql - MySQL 子查询概述

> ID：12126827
> 
> 赞同：0
> 
> 时间：2012-08-26T00:42:50.207
> 
> 标签：mysql, subquery

好吧，我猜我需要一个子查询来解决这个问题，我对这些有点生疏。所以我有3张桌子：

tblAccount
tblItem
tblAccountItem

tblAccount - 有用户信息和 AccountID
tblItem - 有项目信息和 ItemID
AccountID - 有 3 个字段 - AccountItemID / AccountID / ItemID

一个账户可以有很多项目，一个项目可以有很多账户。示例数据：

tbl 帐户

```
AccountID    AccountName     AccountEmail
1            John Smith      john@smith.com
2            Fred John       fred@john.com
3            George Mike     george@mike.com 
```

表项

```
ItemID       ItemName        ItemDescription
1            Hammer          Smashes things
2            Axe             Breaks things 
```

好的，可以说锤子属于约翰、弗雷德和乔治。斧头只属于约翰和弗雷德。

tblAccountItem

```
AccountItemID       AccountID     ItemID
1                   1             1
2                   2             1
3                   3             1
4                   1             2
5                   2             2 
```

所以我想展示 John 拥有哪些物品，并展示还有谁拥有该物品。我要显示的输出是：

```
ItemName            ItemDescription    OtherOwners
Hammer              Smashes things     Fred, George
Axe                 Breaks things      Fred 
```

任何帮助将不胜感激！

ctrahey 的答案是完美的，但我有一点要补充的条件。tblAccount 中有 2 种类型的帐户，由一个字段表示。

tbl 帐户

```
AccountID    AccountName     AccountEmail       AccountDescription    AccountTypeID
1            John Smith      john@smith.com     NULL                  1
2            Fred John       fred@john.com      NULL                  1
3            George Mike     george@mike.com    Runner                2 
```

tblAccountTypeID

```
AccountTypeID   AccountType     
1               User      
2               Admin 
```

如果 AccountTypeID 为 1，那么我需要输出 AccountEmail。如果 AccountTypeID 为 2，我需要输出 AccountDescription。例如输出（与上面相同的故事）：

```
ItemName            ItemDescription    OtherOwners
Hammer              Smashes things     Fred, Runner
Axe                 Breaks things      Fred 
```

关闭 ctrahey 我猜需要创建 ALIAS 字段的查询。就像是：

```
WHERE AccountTypeID = 1 (SELECT AccountName)
WHERE AccountTypeID = 2 (SELECT AccountDescription) 
```

我希望这是有道理的，感谢到目前为止的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:53:00.763

你最好使用编码来解决这个问题，这里粗略的查询可能会帮助你了解：

```
SELECT AccountName
FROM tblAccount
WHERE AccountID = (SELECT AccoundID 
                   FROM tblAccountItem
                   WHERE itemID = (SELECT itemID
                                   FROM tblAccountItem
                                   WHERE AccountID = 1 (john Id as example))); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:59:36.703

子查询实际上很少需要，并且经常被精心设计的 JOIN 替换（提高性能）。

在这里，我们从 AccountItem 表开始（WHERE 子句立即将查询限制为我们感兴趣的帐户所拥有的项目）；然后我们加入同一个表（将其别名为“others_items_join”），告诉它加入相同的 itemID 但如果感兴趣，则不属于我们的帐户。这就是整个查询的本质，接下来的两个连接只是为了在我们的输出中引入我们想要的实际字符串（其他人的名字和项目名称/描述）。GROUP BY 用于为我们感兴趣的帐户拥有的每个项目提供一行。

```
SELECT 
  ItemName,
  ItemDescription,
  GROUP_CONCAT(others.AccountName) as OtherOwners
FROM 
  tblAccountItem as my_items
  LEFT JOIN tblAccountItem as others_items_join 
    ON others_items_join.ItemID = my_items.ItemID AND others_items_join.AccountID != ?
  LEFT JOIN tblAccount as others
    ON others_items_join.AccountID = others.AccountID
  JOIN tblItems ON my_items.ItemID = tblItems.ItemID
WHERE my_items.AccountID = ?
GROUP BY ItemName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T01:19:45.980

`SELECT ItemName, ItemDescription, AccountItemID FROM tblitem RIGHT JOIN tblaccountitem ON tblitem.ItemID=tblaccountitem.ItemID`

我希望这有助于你的答案。我还在研究这个

# javascript - 对象的属性访问和普通变量访问之间的速度差异是什么？

> ID：12126828
> 
> 赞同：2
> 
> 时间：2012-08-26T00:42:51.417
> 
> 标签：javascript, arrays, performance, object, properties

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T00:55:10.920

为了回答您的“疑问”，我建议使用[JSPerf](http://jsperf.com/)对您的代码进行基准测试。除非经过测试，否则仅凭代码无法真正判断该过程是否比另一个*更快。*

另外，我建议您在构造过程中使用数组和对象的文字符号而不是`new`符号：

```
var objArray=[
    {
        property : 'some string property'
    }, {
        ...
    },
]; 
```

此外，根据您的代码，最好有这个，因为每次迭代都使用相同的对象：

```
var obj = objArray[0].property1,
    objIDX = 0;

for(var x=0; x<65536; x++){
    doSomething(obj,objIDX);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T02:02:19.047

我意识到这并不能完全回答您的问题*（因为它已经得到了回答）*，但是因为您似乎正在寻找关于发生数千次的函数调用的速度改进*（因为其他人可能也在这样做）*。我想我会把它包括在这里，因为它违背了假设：

一个示例函数：

```
var go = function (a,b,c,d,e,f,g,h) {
  return a+b+c+d+e+f+g+h;
} 
```

以下是您通常如何调用重复函数：

```
var i=500000; while(i--){
  go(1,2,3,4,5,6,7,8);
} 
```

但是，如果这些参数中没有一个*（或少数几个）*因函数的这种特定用途而改变，那么这样做会更好*（从速度 pov - 显然不是异步 pov）*：

```
var i=500000; go.args = [1,2,3,4,5,6,7,8];
while(i--){
  go();
} 
```

为了使上述工作正常，您只需对原始功能稍作修改：

```
var go = function (a,b,c,d,e,f,g,h, i) {
  if ( go.args ) {
    i = go.args;
    a = i[0]; b = i[1];
    c = i[2]; d = i[3];
    e = i[4]; f = i[5];
    g = i[6]; h = i[7];
  }
  return a+b+c+d+e+f+g+h;
} 
```

第二个函数的运行速度明显更快，因为您没有传入任何参数*（一个没有参数调用的函数非常快速启动）*。从 .args 数组中提取值似乎也不那么昂贵*（除非您涉及字符串）*。即使您更新一两个参数，它仍然快得多，这使其非常适合像素或图像数据操作，因为您通常只移动 x 和 y：

```
var i=500000; go.args = [1,2,3,4,5,6,7,8];
while(i--){
  go.args[2] = i;
  go();
} 
```

所以在某种程度上，这是一个对象属性可以比本地变量更快的例子——如果有点复杂和离题;）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T00:50:40.353

尽管有可能的浏览器优化，但访问对象的属性比访问局部变量（但不一定是全局变量或父函数的变量）更昂贵。

属性越深，您受到的性能影响就越大。换句话说，

```
for(var x=0; x<65536; x++) 
 doSomething(objArray[0].property1, objIDX=0); 
```

将通过缓存得到改进`objArray[0].property1`，而不是重复分配给`objIDX`：

```
var prop = objArray[0].property1;
objIDX = 0;
for(var x=0; x<65536; x++) 
 doSomething(prop, 0); 
```

# c# - 如何在 Linq 语句中添加 if 语句

> ID：12126832
> 
> 赞同：1
> 
> 时间：2012-08-26T00:44:38.700
> 
> 标签：c#

如何添加下面代码片段中注释的 if 语句？

```
Dictionary<string,int> toReturn;
List<string> lookup = GetIt();

foreach (string test in lookup)
{
    var testDictionary = ToGroupDictionary(test);
    testDictionary.Keys.ToList().ForEach(k =>
        //if(true){add toReturn list}
    );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T00:47:34.727

只需要添加花括号：

```
testDictionary.Keys.ToList().ForEach(k => 
{
    //if(true){add toReturn list}
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T00:49:11.493

或者添加一个`Where`子句

```
testDictionary
  .Keys
  .Where(k => conditional(k))
  .ForEach(k => { /* something else */ } ); 
```

# javascript - Twitter Bootsrap：弹出框和自动刷新

> ID：12126834
> 
> 赞同：5
> 
> 时间：2012-08-26T00:44:41.790
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 Twitter Boostrap 进行网站重新设计，我需要一些 jQuery 帮助。我正在使用与 bootstrap 一起打包的“Popover”附加组件，我将它放在#div 标签中（具体来说是#onlinedata），并且我使用 jquery 每 10 秒重新加载一次 div。这很好用，但是，如果您碰巧将鼠标悬停在 div 刷新时激活弹出框的链接上，弹出框就会卡住。

我正在使用此代码进行刷新：

```
setInterval(function(){
        $("#onlinedata").load("http://website.com #onlinedata");
}, 10000); 
```

如果需要，激活弹出框的代码：

```
$(function () {
        $('a[rel=popover]').popover({
            placement:'right',
            title:'Title',
            content: $('#div-that-contains-data').html()
        });
}); 
```

有没有办法避免在 div 重新加载时弹出框卡在打开状态？

任何帮助是极大的赞赏。

* * *

***关联的 HTML***

这**`$id`**是每个弹出窗口的特定键，因为我有多个弹出窗口。

`popover_controller`在悬停之前隐藏的弹出框部分：

```
<div id="controller_popup_$id" style="display:none;">
   <div style="font-size:11px">
       //data_fetched_from_database
   </div>
</div> 
```

触发弹窗的链接

```
<li><a href="#" rel="popover_controller_$id">Link Title</a></li> 
```

最后，我正在使用的当前 javascript（它通过数据库记录循环，因此每条记录都获得以下 javascript）：

```
$(function () {
    $('a[rel=popover_controller_$id]').popover({
          placement:'right',
          title:'Title (this is fetched from the database for each popover)',
          content: $('#controller_popup_$id).html()
    });
});
$(document).ready(function() {
    // refreshing code
    setInterval(function() {
        $('#controller_popup_$id').hide(); // close any open popovers
        // fetch new html
        $('#onlinedata').load('http://website-link.com #onlinedata', function() {
            // after load, set up new popovers
            $('a[rel=popover_controller_$id]').popover({
                placement:'right',
                title:'Title (this is fetched from the database for each popover)',
                content: $('#controller_popup_$id').html()
            });
        });
    }, 10000); // 10 second wait
}); 
```

* * *

# **新密码女巫半作品**

我正在使用以下半有效的代码。我遇到的唯一问题是在它重新加载#onlinedata div 之后，它会增加弹出链接。

```
$(document).ready(function() {
        $('a[rel=popover_controller_$id]').popover({
            placement:'right',
            title:'Title',
            content: $('#controller_popup_$id').html()
        });
        // refreshing code
        setInterval(function() {
            // fetch new html
            $('a[rel=popover_controller_$id]').load('http://websiteurl.com/ #onlinedata', function() {

                $('a[rel=popover_controller_$id]').popover('destroy'); // remove old popovers
                // after load, set up new popovers
                $('a[rel=popover_controller_$id]').popover({
                    placement:'right',
                    title:'Title',
                    content: $('#controller_popup_$id').html()
                });

            });
        }, 10000); // 10 second wait
}); 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T01:38:31.383

像[这个答案](https://stackoverflow.com/questions/1926673/apply-plugin-to-a-new-element-in-the-dom-jquery)一样，我认为您需要将插件重新应用到已被`load`-ed 的新 DOM 元素。这实际上意味着在调用`popover`之后添加代码副本。`load`如果旧的popovers到处都是，你可能不得不把它们藏起来。这给了我们：

```
$(document).ready(function() {
    // refreshing code
    setInterval(function() {
        $('a[rel=popover]').popover('destroy'); // remove old popovers
        // fetch new html
        $('#onlinedata').load('/onlinedata.html #onlinedata', function() {
            // after load, set up new popovers
            $('a[rel=popover]').popover({
                placement:'right',
                content: $('#div-that-contains-data').html()
            });
        });
    }, 10000); // 10 second wait
}); 
```

# objective-c - 来自 NSStatusitem 的 NSTextField

> ID：12126836
> 
> 赞同：0
> 
> 时间：2012-08-26T00:45:02.313
> 
> 标签：objective-c, macos, cocoa, nsstatusitem

当用户点击状态栏中的 NSStatusitem 时，有什么方法可以让 NSPopover 出现？

到目前为止，在我的标题中我有这个：

```
IBOutlet NSStatusItem *statusitem; 
```

和这个 ：

```
@property (assign) IBOutlet NSPopover *pop; 
```

在该方法下，我有这个：

```
[[NSImage imageNamed:@"mic.png"]setSize:NSMakeSize(20,20)];
statusitem = [[NSStatusBar systemStatusBar]statusItemWithLength:NSVariableStatusItemLength];
[statusitem setHighlightMode:YES];
[statusitem setImage:[NSImage imageNamed:@"mic.png"]];
[statusitem setMenu:menu];
[statusitem setAction:@selector(pop:)] 
```

和

```
- (void)pop:(id)sender{
[[self pop]showRelativeToRect:[sender bounds] ofView:sender preferredEdge:NSMaxXEdge];
} 
```

反正有没有让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T05:08:23.587

这非常接近正确。您的 statusItem 属性应该保留，而不是 IBOutlet，因为您是在代码中创建它。此外，您的状态项不能同时拥有菜单和操作——如果您有菜单，它将在您单击状态项时打开，而不是触发您的操作方法。因此，如果您进行了这些更改，并且您在 IB 中设置了弹出框，这应该可以工作。

# css - IE 中不显示网站中的徽标

> ID：12126839
> 
> 赞同：0
> 
> 时间：2012-08-26T00:45:44.607
> 
> 标签：css, image, internet-explorer, png

在除 IE 之外的所有浏览器中显示。该图像是透明的png。

音乐.thebc.co

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:54:09.700

IE不欣赏`width:auto`

在图像周围放置一个条件 if 以提供没有宽度的 IE 1

[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

只是要清楚：

```
<!--[if IE]>
<img height="100" id="logo" alt="The Brilliantly Creative Company Logo" src="http://www.music.thebc.co/images/bcco_logo.png"/>
-->
<!--[if !IE]> -->
<img width="auto" height="100" id="logo" alt="The Brilliantly Creative Company Logo" src="http://www.music.thebc.co/images/bcco_logo.png"/>
<!-- <![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:58:09.840

尝试按照此处的建议使用 AlphaImageLoader：http: [//support.microsoft.com/kb/294714](http://support.microsoft.com/kb/294714)

```
<div style="position:absolute; left:140px; height:400; width:400;
     filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(
     src='image.png', sizingMethod='scale');" >
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T01:08:45.493

在 IE9 中看起来图像放置正确，但它只需要更高的 z-index；试试这个 CSS：

```
#logo {
    z-index: 10000;
} 
```

# google-maps - 地图图例未与嵌入式谷歌地图一起出现

> ID：12126840
> 
> 赞同：0
> 
> 时间：2012-08-26T00:45:48.430
> 
> 标签：google-maps, google-maps-api-3, kml

当我使用 google map api v3 加载 kmz 文件时。显示 kmz 文件，但不显示作为 kmz 文件一部分的图例。我是这个东西的新手，我不知道该怎么做。我可以用谷歌地图查看kmz文件，图例数据就在那里。如果需要，我可以包含代码，但这似乎是一般问题或 api 问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:45:16.103

默认情况下，Google Maps API v3（或 v2）中不会创建侧边栏 要在 Google Maps API v3 地图上为 KMZ 文件创建侧边栏，您需要使用第三方 KML 解析器，如 geoxml3（来自 kmz 分支）。

[这是一个](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmztest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/election2012_kmz.zip)使用 KMZ 文件的简单侧边栏示例。

如果你有一个 KML 文件，[geoxml-v3](http://code.google.com/p/geoxml-v3/)第三方解析器有一个很好的内置侧边栏。[这是一个例子](http://www.geocodezip.com/geoxml3_test/v3_dyasdesigns_com_geoxml_mtrmtrip.html)。

# blackberry - 如何在黑莓中获取当前的背光设置？

> ID：12126846
> 
> 赞同：2
> 
> 时间：2012-08-26T00:46:29.263
> 
> 标签：blackberry, backlight

当我的黑莓应用程序启动时，它想获取用户设置的**当前**背光超时值，例如，30秒，1分钟。

我在 API 文档中找到了 Backlight 类。但它只有*getTimeoutDefault()*方法，总是返回 30 秒。

请告诉我该怎么做。非常感谢！

# javascript - 一个对象怎么可能是不可修改的？

> ID：12126847
> 
> 赞同：1
> 
> 时间：2012-08-26T00:46:35.680
> 
> 标签：javascript, node.js

我有一个返回用户对象的 mongodb 函数调用

```
User.findOne(condition, function(err, user) {
    console.log(user)   //  {username : 'blah', picture : 'blah', _id : 'blah'}
    delete user.picture;
}); 
```

不知何故，用户对象无法修改，删除什么也不做。如果我深复制一个全新的用户对象

```
var new_user = {};
for (var key in user)
    new_user[key] = user[key] 
```

并在那里进行删除，它有效。当对象不可修改时，在 Javascript 中是否存在任何情况？还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:50:23.150

确实。对象属性可以被*冻结*、*不可删除*、不可*枚举*和不可*配置*。你可以去检查一下`Object.getOwnPropertyDescriptor`。

```
console.log( Object.getOwnPropertyDescriptor( user, 'picture' )); 
```

例如。

如果*可配置*设置为`false`，则无法删除该属性。

# iphone - 在 iOS 中 - 在滚动视图中触摸文本字段时，视图无法滚动

> ID：12126860
> 
> 赞同：4
> 
> 时间：2012-08-26T00:49:17.820
> 
> 标签：iphone, xcode, interface, scrollview, textfield

当试图通过触摸和拖动文本字段来滚动视图时，类似于您在 iPhone 上的编辑联系人视图上滚动的方式，视图不会在文本字段之间移动、触摸和拖动或移到一边滚动视图中的文本字段有效，但在触摸文本字段时无效。

任何见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T02:21:13.440

尝试将`delaysContentTouches`属性设置`YES`为`UIScrollView`您已添加到文本字段的属性。如果您触摸然后在文本字段中拖动，这应该允许您滚动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-08T04:19:23.917

设置`delaysContentTouches`为`true`对我也不起作用。所做的是遍历滚动视图的手势识别器并分别设置它们的`delaysTouchesBegan`和和：`cancelsTouchesInView``true``false`

```
scrollView.gestureRecognizers?.forEach {

    $0.delaysTouchesBegan = true; $0.cancelsTouchesInView = false
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-21T18:41:15.990

我认为它在这种情况下的解决方案

```
extension UITableView {

    override public func touchesShouldCancelInContentView(view: UIView) -> Bool {
        if view is UITextField || view is UITextView {
            return true
        }
        return super.touchesShouldCancelInContentView(view)
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-21T17:45:52.803

尝试以下方法。只需将您的 UIScrollView 替换为 ScrollView 并将代码添加到您的项目中。

**斯威夫特 4.1**

```
class ScrollView: UIScrollView {
  override func touchesShouldCancel(in view: UIView) -> Bool {
    if type(of: view) == TextField.self || type(of: view) == UITextView.self {
      return true
    }
    return super.touchesShouldCancel(in: view)
  }
} 
```

# ios - uitableviewcell 图像视图在选择时调整大小（仅水平）

> ID：12126863
> 
> 赞同：2
> 
> 时间：2012-08-26T00:49:38.407
> 
> 标签：ios, uitableview, imageview, sdwebimage

嗨，我有一个 uitableviewcell，使用 cell.imageView 中 ios 中提供的默认 uitableview 单元格，它的图像是通过像这样的图像的 url 填充的

```
[cell.imageView setImageWithURL:[NSURL URLWithString:movie.show_image_url] placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

它最初加载一切正常，但是在模拟器中，当我选择一行时，我可以看到单元格中的元素（除了人字形）向左移动，这使得图像视图的宽度看起来更短

我不知道为什么，如果我用存储在应用程序中的静态图像替换 imageview，比如 placeholder.png，那么我不会观察到这个问题。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T06:11:04.793

我也遇到了这个问题，并找到了一个非常简单的解决方案——在你的 UITableViewCell 类中覆盖 -layoutSubViews （如果还没有完成，则子类化 UITableViewCell ）。

有关详细信息，请参阅[SDWebImage 固定宽度单元格图像](http://www.wrichards.com/blog/2011/11/sdwebimage-fixed-width-cell-images/)（在[阅读 SDWebImage github 存储库](https://github.com/rs/SDWebImage)时找到）。

本文中提出的技术涉及在 IB 中可用的标准 UITableViewCell 中控制 UIImageView 和两个 UILabel 几何图形。我正在使用自定义单元格，并且能够通过简单地覆盖 UIImageView 的布局方式来解决问题：

```
- (void)layoutSubviews
{
    [super layoutSubviews];
    self.thumbnailView.frame = CGRectMake(
                                          0,
                                          0,
                                          THUMBNAIL_WIDTH,
                                          THUMBNAIL_HEIGHT
                                          );

} 
```

（注意 THUMBNAIL_WIDTH 和 THUMBNAIL_HEIGHT 只是宏，都设置为 71）。

希望有帮助。

# matlab - Octave：使其尽可能与 MATLAB 兼容

> ID：12126866
> 
> 赞同：8
> 
> 时间：2012-08-26T00:50:54.507
> 
> 标签：matlab, octave

我需要在`MATLAB`（作业）中实现几个算法，但是我想`GNU Octave`改用它。但我想关闭任何`octave`扩展，基本上把它变成`MATLAB`. 我应该更改哪些设置？执行程序时应该提供哪些命令行选项`octave`？

PS：我知道`--traditional`命令行选项，尽管它似乎没有多大作用。

PPS：欢迎提出任何建议。例如，如果遵循您的建议需要`octave`从源代码进行重建，那就顺其自然吧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T01:13:55.527

除了使用该`--traditional`选项之外，您无能为力。不要使用 Octave 提供的额外语法。毕竟，Matlab 语法是 GNU Octave 语言的一个子集，您只能使用该子集。

**编辑：**这不是您想要的答案，但有充分的理由说明这是一项不可能完成的任务（不可能，我的意思是非常困难。唯一的选择实际上就是分叉 Octave 并更改它，直到它是一个精确的克隆。你不不想这样做，相信我）。想象一下下面的例子。Octave 具有“行”和“列”功能，但 Matlab 没有。如果您更改了 Octave 以使这些函数不再存在，那么使用它们的所有其他 Octave 函数（我猜很多）也将停止工作。

在你成功说服他们的教授接受用 Octave 编写的作业之前，其他人只要确保你至少尝试编写兼容的代码。

**编辑2：**我将尝试通过将这种情况与钢琴进行比较来解释（似乎是一个很好的比较）。您可以购买 85 或 88 键的钢琴。现在想象 Matlab 是一架 85 键的钢琴，而 Octave 是一架 88 键的钢琴（如果你愿意，也可以想象 Matlab 有 3 个踏板，而 Octave 只有 2 个踏板）。两架钢琴之间的唯一区别是，一架钢琴的音调范围稍大，也就是说，它可以弹奏更多的音调（来自 3 个额外的琴键）。但是当您在 85 键的钢琴上弹奏 C4 和在 88 键的钢琴上弹奏 C4 时，声音是相同的，它们是相同的音符。注释是您可用的功能和关键字。他们是一样的。一架钢琴上的音符与另一架钢琴上的音符相同。

现在，如果您是一位作曲家，正在创作音乐，您可能需要考虑到这一点。只是不要写任何需要这些额外键的音乐。两种钢琴的音乐是相同的。如果你有一架 88 键的钢琴，你不会砍掉 3 个额外的键，因为你希望它与 85 键的钢琴兼容。你根本不弹那些键。88 键钢琴与 85 键钢琴兼容，就像 Octave 与 Matlab 兼容一样。

如果你想要一个指南来提醒你不能使用那些额外的钥匙，我猜你可以在它们上贴上一些繁文缛节来提醒你不要使用它们。同样，使用 Octave 和文本编辑器对 Octave 和 Matlab 具有不同的语法高亮显示，因此当您使用不属于 Matlab 的语法时，它会错误地高亮显示。除此之外，您无能为力（除非您计算分叉 Octave 项目，请求 Mathworks 在 Matlab 中实现它们或自己实现它们。我并不是说这是粗鲁的讽刺，只是想详尽无遗）。

For sake of completion, yes Octave has not implemented all Matlab things yet but it's moving that way as people develop it. It's not a static project (just take a look at the [NEWS](http://hg.savannah.gnu.org/hgweb/octave/file/default/NEWS) file for the development branch for example), things get implemented as the people who need them develop them. And some functions do behave differently but those are bugs you can [report](http://savannah.gnu.org/bugs/?func=additem&group=octave) (and even fix since after all it's free and open source). Such incompatibilities are not there for the sake of annoying users. They are there because no one has reported or fixed them. Plus most of them are for incorrectly or undocumented Matlab features.

**EDIT 3:** you can also turn on the matlab incompatible warnings (which are off by default). Run `warning ('on', 'Octave:matlab-incompatible')`. You can leave this on your `.octaverc` file. To see more warnings look into `warning_ids`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:04:08.833

I guess it is better to use a GUI that does it for you. I personally use [Xoctave](http://www.xoctave.com) due to its support and Matlab like interface.

# php - Wordpress 小部件中的 if/else 逻辑问题

> ID：12126867
> 
> 赞同：1
> 
> 时间：2012-08-26T00:50:55.070
> 
> 标签：php, wordpress

我正在开发一个自定义的 wordpress 小部件，如果小部件文本字段完成，它会显示一些社交链接：

```
if (!empty($fss_fb_icon) && !empty($fss_fb_link) && !empty($fss_fb_text)) {
    echo "nothing"; 
} else {
    echo "<li class='social-new'><img src='/images/social-media/16px/".$fss_fb_icon.".png' alt='".$fss_fb_text."'/><a href='".$fss_fb_link."' target='_blank'>".$fss_fb_text."</a></li>";
} 
```

问题是无论小部件字段的状态如何，这个测试似乎总是返回 else 代码行。我不确定我是否在 php 语法中犯了错误，或者我不知道是否有一些奇怪的 wordpress 小部件。完整代码如下

```
class FSSSocialWidget extends WP_Widget
{
  function FSSSocialWidget()
  {
    $widget_ops = array('classname' => 'FSSSocialWidget', 'description' => 'Displays social media links in the footer' );
    $this->WP_Widget('FSSSocialWidget', 'FSS Social Media Footer', $widget_ops);
  }

  function form($instance)
  {
    $instance = wp_parse_args( (array) $instance, array( 'title' => '' ) );
    $title = $instance['title'];
    $fss_fb_icon = $instance['fss_fb_icon'];
    $fss_fb_link = $instance['fss_fb_link'];
    $fss_fb_text = $instance['fss_fb_text'];
?>
    <p><label for="<?php echo $this->get_field_id('title'); ?>">Title: <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo attribute_escape($title); ?>" /></label></p>
    <p><label for="<?php echo $this->get_field_id('fss_fb_icon'); ?>">Facebook Icon Name: <input class="widefat" id="<?php echo $this->get_field_id('fss_fb_icon'); ?>" name="<?php echo $this->get_field_name('fss_fb_icon'); ?>" type="text" value="<?php echo attribute_escape($fss_fb_icon); ?>" /></label></p>
    <p><label for="<?php echo $this->get_field_id('fss_fb_link'); ?>">Facebook URL: <input class="widefat" id="<?php echo $this->get_field_id('fss_fb_link'); ?>" name="<?php echo $this->get_field_name('fss_fb_link'); ?>" type="text" value="<?php echo attribute_escape($fss_fb_link); ?>" /></label></p>   
    <p><label for="<?php echo $this->get_field_id('fss_fb_text'); ?>">Facebook Link Text: <input class="widefat" id="<?php echo $this->get_field_id('fss_fb_text'); ?>" name="<?php echo $this->get_field_name('fss_fb_text'); ?>" type="text" value="<?php echo attribute_escape($fss_fb_text); ?>" /></label></p> 

<?php
  }

  function update($new_instance, $old_instance)
  {
    $instance = $old_instance;
    $instance['title'] = $new_instance['title'];
    $instance['fss_fb_icon'] = $new_instance['fss_fb_icon'];
    $instance['fss_fb_link'] = $new_instance['fss_fb_link'];
    $instance['fss_fb_text'] = $new_instance['fss_fb_text'];
    return $instance;
  }

  function widget($args, $instance)
  {
    extract($args, EXTR_SKIP);

    /* User-selected settings. */
   $fss_fb_icon = $instance['fss_fb_icon'];
   $fss_fb_link = $instance['fss_fb_link'];
   $fss_fb_text = $instance['fss_fb_text'];

    echo $before_widget;
    $title = empty($instance['title']) ? ' ' : apply_filters('widget_title', $instance['title']);

    if (!empty($title))
      echo $before_title . $title . $after_title;;

    // WIDGET CODE GOES HERE
    echo "<ul id='footer-social-new'>";

    if (!empty($fss_fb_icon) && !empty($fss_fb_link) && !empty($fss_fb_text)) {
        echo "nothing"; 
    } else {
        echo "<li class='social-new'><img src='/images/social-media/16px/".$fss_fb_icon.".png' alt='".$fss_fb_text."'/><a href='".$fss_fb_link."' target='_blank'>".$fss_fb_text."</a></li>";
    }

    echo "</ul>";

    echo $after_widget;
  }

}
add_action( 'widgets_init', create_function('', 'return register_widget("FSSSocialWidget");') ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T00:53:55.007

您缺少两个`!`运算符，并且 if/else 阻止了错误的方式：

```
if (!empty($fss_fb_icon) && !empty($fss_fb_link) && !empty($fss_fb_text))) {
    echo "<li class='social-new'>...etc...";
} else {
    echo "nothing"; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-30T08:26:00.990

您需要`$title = empty($instance['title']) ? ' '`将此空白删除`' '`到`''`. 如果不是你的功能不是空的。

# disqus - Disqus 评论系统 [Wordpress] - 更改“评论”一词

> ID：12126869
> 
> 赞同：1
> 
> 时间：2012-08-26T00:51:34.023
> 
> 标签：disqus, appearance

我已经在我的一个 wordpress 博客上安装了 Disqus 评论系统，但我希望评论编号显示为`0`代替`0 Comments`或`12`代替`12 Comments`. 以前在 Disqus 管理员中曾经有一个外观部分，该部分曾经有一个选项来更改此输出，如回答[此问题](https://stackoverflow.com/questions/4573684/disqus-change-comment-word)所建议的那样。但似乎该`Appearance`部分已被 Disqus 删除。有没有其他方法可以实现这一点（当然，不会弄乱插件代码。）？

更新：

好吧，也查看了插件源但没有用，似乎他们正在使用 javascript 更新它。现在启用后`Reactions`它返回`0 comments and 0 Reactions`。

更新#2：

好的，所以我终于找到了它的来源......插件基本上包括一个`count.js`来自 的文件`yoursite.disqus.com\count.js?some wierd parameters`，而 js 文件看起来像这样：

```
var DISQUSWIDGETS;

if (typeof DISQUSWIDGETS != 'undefined') {
    DISQUSWIDGETS.displayCount({"showReactions": true, "text": {"and": "and", "reactions": {"zero": "0 Reactions", "multiple": "{num} Reactions", "one": "1 Reaction"}, "comments": {"zero": "0 Comments", "multiple": "{num} Comments", "one": "1 Comment"}}, "counts": [{"reactions": 0, "uid": 1, "comments": 0}, {"reactions": 0, "uid": 0, "comments": 0}, {"reactions": 0, "uid": 3, "comments": 0}, {"reactions": 0, "uid": 2, "comments": 0}, {"reactions": 0, "uid": 4, "comments": 0}]});
} 
```

最糟糕的是，我们甚至无法更改`js`文件中的代码，因为它是托管在`disqus`自身之上的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:20:14.997

或者，您可以“破解” Disqus 的代码。我将尝试逐步解释我所做的事情：

1.  获取主要 disqus 函数的最新文件。它应该类似于以下内容： `http://disqus.com/forums/(your-site-id)/count.js`
2.  将该脚本复制到某处，您可以“美化它”以使其更具可读性。比找到并将`displayCount`函数更改为您想要的任何内容：

    ```
    c.displayCount = function (a)
    {
      for (var b, c, e, g, f = 0; f < a.counts.length; f++)
      if (b = a.counts[f], c = h[b.uid]) e = b.comments === 0 ? "0 drivels" : b.comments == 1 ? "1 drivel" : "{num} drivels",
      g = e.replace("{num}", b.comments),
      a.showReactions && (e = b.reactions === 0 ? a.text.reactions.zero : b.reactions == 1 ? a.text.reactions.one : a.text.reactions.multiple, e !== "" && (g += " " + a.text.and + " " + e.replace("{num}", b.reactions))),
      c.element.innerHTML = g
    }; 
    ```

    （注意乱码；）

3.  将整个文件保存（上传）到服务器的某个位置并记住路径

4.  使用 Wordpress 管理编辑 Disqus 插件文件`disqus-comment-system/disqus.php`并找到包含与单词连接的 url 的行`count.js`。它在文件的大约 3/4 中。截至目前，这条线看起来像这样，但将来可能会改变：

    ```
    s.src = '//' + '<?php echo DISQUS_DOMAIN; ?>/forums/' + disqus_shortname + '/count.js'; 
    ```

5.  将此链接指向您新上传的文件，如下所示（我使用的是相对 URL）：

    ```
    s.src = '/wp-include/custom/disqus-count.js'; 
    ```

6.  保存并获利！我花了一个多小时才弄清楚这一点，所以我希望这对某人有帮助（我需要将这些信息翻译成我的母语）。这种方法的一大好处是，如果您的语言对不同的数字（0、1 等除外）使用不同的单词形式，您可以编写脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T01:37:48.610

您应该能够通过 JavaScript 隐藏它。

这些方面的东西：

```
node = document.getElementsByClassName("dsq-comment-count")[0].childNodes[0]
node.nodeValue = node.nodeValue.replace("Comments", "") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-18T01:40:45.607

官方答案在这里：[http ://help.disqus.com/customer/portal/articles/565624#customizing-link-text](http://help.disqus.com/customer/portal/articles/565624#customizing-link-text)

1.  转到[http://YOUR-SITE.disqus.com/admin/settings/?p=general](http://YOUR-SITE.disqus.com/admin/settings/?p=general)

2.  根据需要编辑评论计数链接部分。

3.  就这样！

# cocoa - 用图形保存 NSTextView 的内容

> ID：12126871
> 
> 赞同：0
> 
> 时间：2012-08-26T00:52:26.287
> 
> 标签：cocoa, nstextview

谢谢您的帮助。我需要用图形保存我的 RTF。以下适用于文本。我需要做什么才能使这项工作与嵌入式图形一起使用？

再次感谢。保罗。

```
NSSavePanel *panel = [NSSavePanel savePanel];

[panel setAllowedFileTypes:[NSArray arrayWithObject:@"rtf"]];

NSString *outputName = @"Output File";

[panel setCanCreateDirectories:YES];
[panel setCanSelectHiddenExtension:YES];
[panel setNameFieldStringValue:outputName];

[panel beginSheetModalForWindow:theSwatch completionHandler:^(NSInteger result) {

    if (result == NSFileHandlingPanelOKButton){

        [[textView RTFFromRange:NSMakeRange(0, [[textView string] length])] writeToURL:    [panel URL] atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:41:22.900

我认为您可以使用 NSText 方法 writeRTFDToFile:atomically:。由于 NSTextView 是 NSText 的子类，你应该可以这样做：

```
[textView writeRTFDToFile:[[panel URL] path] atomically:YES]; 
```

# nant - NANT 中的脚本任务现在抱怨 SortedDictionary

> ID：12126872
> 
> 赞同：1
> 
> 时间：2012-08-26T00:52:48.837
> 
> 标签：nant

我一直在尝试在运行 Cruise Control.Net 的构建服务器中将 Nant 从 0.86-beta1 升级到 0.92。现在（似乎自从我重新启动服务器以来），`<script>`任务失败了。即使恢复到旧的南特也无济于事。这是任务：

```
<script language="C#">
    <code>
        <![CDATA[
            public static void ScriptMain(Project project)
            {
                    System.Collections.Generic.SortedDictionary<string, string> sortedByKey = new System.Collections.Generic.SortedDictionary<string, string>();
                    foreach(DictionaryEntry de in project.Properties)
                    {
                            sortedByKey.Add(de.Key.ToString(), de.Value.ToString());
                    } 

                    NAnt.Core.Tasks.EchoTask echo = new NAnt.Core.Tasks.EchoTask();
                    echo.Project = project;
                    foreach(System.Collections.Generic.KeyValuePair<string, string> kvp in sortedByKey)
                    {
                            // Omit the many boring nant.tasks properties
                            if(kvp.Key.StartsWith("nant.tasks"))
                                    continue;

                            echo.Message = String.Format("{0}: {1}", kvp.Key, kvp.Value);
                            echo.Execute();
                    }
            }
        ]]>
    </code>
</script> 
```

这是我从某处复制的脚本，用于回显所有已定义属性的值作为调试辅助。Nant 抱怨在 .Net 2.0（Nant 0.86-beta1 使用）和 .Net 4.0（对于 Nant 0.92）中`SortedDictionary`都不能在 namespace 中找到`System.Collections.Generic`它，但它应该在哪里。它在程序集 System.DLL 中，所以看起来 Nant 应该能够找到它。

为了进行 Nant 升级，我只是将新版本安装在之前版本旁边的文件夹中，并更改了 PATH 变量。出于某种原因，仅重新启动 CC.Net 服务并不足以让它开始使用新版本，但重新启动计算机就可以了。但后来我开始遇到这个问题。将 PATH 切换回来（并再次重新启动）并没有解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:33:50.503

这对我来说听起来很奇怪。

您是否尝试将引用和命名空间部分放入`<script>`任务的参数中？只是猜测...

```
<script language="C#" >
  <references>
    <include name="System.dll" />
  </references>
  <imports>
    <import namespace="System.Collections.Generic" />
  </imports>
  <code>
    <!-- ... -->
  </code>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:22:16.227

远景：是否有可能您还安装了 .NET 1.1 并且它以某种方式使用了那个？

只是为了仔细检查，你能用一个可以编译的脚本替换错误的脚本，并让那个脚本打印出[使用的 .NET 框架的版本](http://msdn.microsoft.com/en-us/library/system.environment.version.aspx)吗？

**编辑**实际上我[在 Stackoverflow](https://stackoverflow.com/questions/12034592/nant-does-not-see-reference)中发现了另一个类似问题的问题。显然，NAnt 默认不会引用 System.dll。请查看该问题以获取更多详细信息。

# android - Android 布局 XML 中的代码更改

> ID：12126873
> 
> 赞同：0
> 
> 时间：2012-08-26T00:52:56.350
> 
> 标签：android, xml, android-layout

我有一个问题，当我在某处单击或移动光标时，我的代码会自动更改。这发生在布局 XML 中。

我使用 Eclipse Juno 并插入了一个 ExpandableList。我的最小 sdk 是 14，最大是 16。

似乎只有 .xml 部分发生了变化，而不是布局。.xml 部分，如果再次打开，没问题，但它做同样的事情。

帮助？

**编辑**

我还注意到，当我运行代码时，可扩展列表没有显示（它只是调用布局）

XML 文件：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ExpandableListView
    android:id="@+id/expandableListView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1" >
</ExpandableListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:45:22.107

您的意思是代码在视觉上更改为您的 XML 文件中已有的其他代码行吗？Eclipse 时不时地对我这样做。不知道为什么（我猜这可能是 Lint 的一个错误），但通常关闭并重新打开 Eclipse 会为我修复它。

据我所知，代码实际上并没有改变，只是显示的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:37:06.383

尝试使用 对齐代码`ctrl + shift + f`，如果问题仍然存在，请重新打开 xml 文件，最后尝试关闭 eclipse 并再次打开它。

# c++ - 在 Open GL 2.0 和 glm 中创建第一人称相机

> ID：12126882
> 
> 赞同：5
> 
> 时间：2012-08-26T00:54:04.303
> 
> 标签：c++, opengl, matrix, glm-math

我对 Open GL 和 c++ 非常陌生，并且遇到了创建第一人称相机的问题。我不懂矩阵数学，所以这对我来说更加困难。到目前为止，为了计算相机的旋转，我已经这样做了：

```
void CameraFP::calculate_view()  {
    m_view = glm::rotate(m_view, this->get_rotation_x(), glm::vec3(1, 0, 0));
    m_view = glm::rotate(m_view, this->get_rotation_y(), glm::vec3(0, 1, 0));
} 
```

每次更新调用都会调用该函数。

为了通过鼠标处理相机的旋转，我做了以下事情：

```
void CameraFP::process_mouse(sf::Window *app)  {
    GLfloat mouse_x = app->GetInput().GetMouseX();
    GLfloat mouse_y = app->GetInput().GetMouseY();

    GLfloat mouse_x_delta = std::max(mouse_x, old_mouse_x) - std::min(mouse_x, old_mouse_x);
    GLfloat mouse_y_delta = std::max(mouse_y, old_mouse_y) - std::min(mouse_y, old_mouse_y);

    y_rot += mouse_x_delta / (float)app->GetWidth();
    x_rot += mouse_y_delta / (float)app->GetHeight();

    this->old_mouse_x = mouse_x;
    this->old_mouse_y = mouse_y;

    app->SetCursorPosition(app->GetWidth() / 2, app->GetHeight() / 2);
} 
```

为了处理运动，我做了以下事情：

```
void CameraFP::process_keyboard(sf::Window *app)  {
    const sf::Input *input = &app->GetInput();

    if (input->IsKeyDown(sf::Key::W))  {
        position.z += 1.0f / 100.0f;
    }
    if (input->IsKeyDown(sf::Key::S))  {
        position.z -= 1.0f / 100.0f;
    }
    if (input->IsKeyDown(sf::Key::A))  {
        position.x -= 1.0f / 100.0f;
    }
    if (input->IsKeyDown(sf::Key::D))  {
        position.x += 1.0f / 100.0f;
    }
} 
```

我的问题在于我的相机不会朝着您面对的方向移动，并且它永远不会停止旋转：/。另外，如果你能给我指一个指南或关于矩阵数学的东西，那就太棒了:)

**编辑2：** '

我刚刚启动了一个新的进程鼠标功能，它沿着屏幕的 x 轴移动，作为相机的正确旋转。但是，无论我向左还是向右移动鼠标都没有关系，这两个动作都会使我向右旋转。与 3d 空间中的 x 轴相同，但这发生在向下。关于造成这种情况的任何想法？

```
void CameraFP::process_mouse(sf::Window *app)  {
    GLfloat mouse_x = app->GetInput().GetMouseX();
    GLfloat mouse_y = app->GetInput().GetMouseY();

    GLfloat mouse_x_delta = old_mouse_x - mouse_x;
    GLfloat mouse_y_delta = old_mouse_y - mouse_y;

    if (mouse_x_delta > 0)  {
        y_rot += mouse_x_delta / (float)app->GetWidth() * 0.1f;
    } else if (mouse_x_delta < 0)  {
        y_rot -= mouse_x_delta / (float)app->GetWidth() * 0.1f;
    }
    if (mouse_y_delta > 0)  {
        x_rot += mouse_y_delta / (float)app->GetWidth() * 0.1f;
    } else if (mouse_y_delta < 0)  {
        x_rot -= mouse_y_delta / (float)app->GetWidth() * 0.1f;
    }

    if (mouse_x != old_mouse_x)  {
        m_view = glm::rotate(m_view, y_rot, glm::vec3(0, 1, 0));
    }
    if (mouse_y != old_mouse_y)  {
        m_view = glm::rotate(m_view, x_rot, glm::vec3(1, 0, 0));
    }

    this->old_mouse_x = mouse_x;
    this->old_mouse_y = mouse_y;

    app->SetCursorPosition(app->GetWidth() / 2, app->GetHeight() / 2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:48:45.063

我现在没有时间寻找我的相机代码，但我现在可以告诉你的是，你的运动计算完全是错误的。
您没有考虑相机旋转。你必须做这样的事情：

```
if (input->IsKeyDown(sf::Key::W))  {
    position.z += sin(camera_rot_y);
}
else if (input->IsKeyDown(sf::Key::S))  {
    position.z -=  sin(camera_rot_y);
}

if (input->IsKeyDown(sf::Key::A))  {
    position.x -=  cos(camera_rot_y);
}
else if (input->IsKeyDown(sf::Key::D))  {
    position.x +=  cos(camera_rot_y);
} 
```

你也可以使用“else if”，因为你不能同时向前和向后移动。^^

另外，为什么在以下代码中使用 std::min() 和 max() ？：

```
GLfloat mouse_x_delta = std::max(mouse_x, old_mouse_x) - std::min(mouse_x, old_mouse_x);
GLfloat mouse_y_delta = std::max(mouse_y, old_mouse_y) - std::min(mouse_y, old_mouse_y); 
```

如果你想在相反的方向旋转，你需要得到一个负的增量，这在你的代码中是不可能的。摆脱 min() 和 max() 函数。

顺便说一句：我的相机代码不是最有效的（使用旋转而不是直接计算），但它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T19:47:30.560

您没有显示 in 的用法，`position`但`CameraFP`我`m_view`认为这里有问题：

```
void CameraFP::process_keyboard(sf::Window *app)  {
    const sf::Input *input = &app->GetInput();

    if (input->IsKeyDown(sf::Key::W))  {
        position.z += 1.0f / 100.0f;
    }
    if (input->IsKeyDown(sf::Key::S))  {
        position.z -= 1.0f / 100.0f;
    }
    if (input->IsKeyDown(sf::Key::A))  {
        position.x -= 1.0f / 100.0f;
    }
    if (input->IsKeyDown(sf::Key::D))  {
        position.x += 1.0f / 100.0f;
    }
} 
```

您必须将矩阵与此平移相乘，并且`m_view`。在矩阵乘法中，矩阵的重要顺序。首先必须是因为它是主矩阵，并且您想从旋转中`m_view`前进。`m_view`但是有`glm`命名空间和方法`glm::translate`，它们以正确的顺序相乘，您只需创建`glm::vec3`该方法的参数（使用 x、y、z 进行转换）。

（如果你使用**相对位置**......只有帧之间的差异）

所以你必须像这样改变它：

```
void CameraFP::process_keyboard(sf::Window *app)  {
    const sf::Input *input = &app->GetInput();

    glm::vec3 pos;
    if (input->IsKeyDown(sf::Key::W))  {
        pos.z += 1.0f / 100.0f;
    }
    if (input->IsKeyDown(sf::Key::S))  {
        pos.z -= 1.0f / 100.0f;
    }
    if (input->IsKeyDown(sf::Key::A))  {
        pos.x -= 1.0f / 100.0f;
    }
    if (input->IsKeyDown(sf::Key::D))  {
        pos.x += 1.0f / 100.0f;
    }

    //Make translation
    m_view = glm::translate(m_view, pos);

    //Values at position 12, 13, 14 are translation x, y, z
    //Save absolute position of camera
    position = glm::vec3(m_view[12], m_view[13], m_view[14]);

} 
```

PS：对不起我的英语不好。

# php - 表格不起作用

> ID：12126888
> 
> 赞同：0
> 
> 时间：2012-08-26T00:56:07.773
> 
> 标签：php, javascript, jquery, html, css

我目前正在开发一个简单的内容管理系统。当用户单击链接以将新幻灯片添加到现有幻灯片时，我有一个 div，其中 jquery 通过字符串将表单植入到 div 中。

我遇到的问题是当我单击“上传”按钮时没有任何反应，并且它没有寻找 upload_slide.php 页面。任何人都知道为什么会发生这种情况？这是有问题的部分：

```
function showprompt(prompttype) {
    var prompttext = "";
    $('.prompt_inner').text(prompttext);

    if (prompttype=="slideprompt") {
        prompttext = '<table style="margin-right: 50px;"><form enctype="multipart/form-data" action="upload_slide.php" method="post">';
        prompttext += '<tr><td colspan="2"><b>CREATE NEW SLIDE</b><td></tr>';
        prompttext += '<tr><td>SLIDE:</td><td><input name="new_slide" type="file" /></td></tr>';
        prompttext += '<tr><td colspan="2"><input type="submit" value="Upload" /></td></tr>';
        prompttext += '</form></table>';
        $('.prompt_inner').append(prompttext);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T01:02:04.767

将表格移到表外

```
function showprompt(prompttype) {
    var prompttext = "";
    $('.prompt_inner').text(prompttext);

    if (prompttype=="slideprompt") {
        prompttext = '<form enctype="multipart/form-data" action="upload_slide.php" method="post"><table style="margin-right: 50px;">';
        prompttext += '<tr><td colspan="2"><b>CREATE NEW SLIDE</b><td></tr>';
        prompttext += '<tr><td>SLIDE:</td><td><input name="new_slide" type="file" /></td></tr>';
        prompttext += '<tr><td colspan="2"><input type="submit" value="Upload" /></td></tr>';
        prompttext += '</table></form>';
        $('.prompt_inner').append(prompttext);
    }
}​ 
```

# c# - 如何使用 WinForms 进度条？

> ID：12126889
> 
> 赞同：112
> 
> 时间：2012-08-26T00:56:16.973
> 
> 标签：c#, winforms, progress-bar

我想显示在外部库中执行的计算进度。

例如，如果我有一些计算方法，并且我想在我的 Form 类中将它用于 100000 个值，我可以编写：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }            

    private void Caluculate(int i)
    {
        double pow = Math.Pow(i, i);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        progressBar1.Maximum = 100000;
        progressBar1.Step = 1;

        for(int j = 0; j < 100000; j++)
        {
            Caluculate(j);
            progressBar1.PerformStep();
        }
    }
} 
```

我应该在每次计算后执行一步。但是，如果我在外部方法中执行所有 100000 次计算怎么办。如果我不想让这个方法依赖于进度条，我应该什么时候“执行步骤”？例如，我可以写

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void CaluculateAll(System.Windows.Forms.ProgressBar progressBar)
    {
        progressBar.Maximum = 100000;
        progressBar.Step = 1;

        for(int j = 0; j < 100000; j++)
        {
            double pow = Math.Pow(j, j); //Calculation
            progressBar.PerformStep();
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        CaluculateAll(progressBar1);
    }
} 
```

但我不想那样做。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-08-26T01:35:34.673

我建议你看看[BackgroundWorker](https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.backgroundworker?view=netframework-4.7.1)。如果您的 WinForm 中有一个那么大的循环，它将阻塞，您的应用程序看起来就像挂起一样。

查看`BackgroundWorker.ReportProgress()`如何将进度报告回 UI 线程。

例如：

```
private void Calculate(int i)
{
    double pow = Math.Pow(i, i);
}

private void button1_Click(object sender, EventArgs e)
{
    progressBar1.Maximum = 100;
    progressBar1.Step = 1;
    progressBar1.Value = 0;
    backgroundWorker.RunWorkerAsync();
}

private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    var backgroundWorker = sender as BackgroundWorker;
    for (int j = 0; j < 100000; j++)
    {
        Calculate(j);
        backgroundWorker.ReportProgress((j * 100) / 100000);
    }
}

private void backgroundWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar1.Value = e.ProgressPercentage;
}

private void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // TODO: do something with final calculation.
} 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2016-01-31T12:30:39.760

从 .NET 4.5 开始，您可以将[**async**和**await**](https://msdn.microsoft.com/en-us/library/hh191443.aspx)与[**Progress**](https://msdn.microsoft.com/en-us/library/hh193692(v=vs.110).aspx)结合使用来向 UI 线程发送更新：

```
private void Calculate(int i)
{
    double pow = Math.Pow(i, i);
}

public void DoWork(IProgress<int> progress)
{
    // This method is executed in the context of
    // another thread (different than the main UI thread),
    // so use only thread-safe code
    for (int j = 0; j < 100000; j++)
    {
        Calculate(j);

        // Use progress to notify UI thread that progress has
        // changed
        if (progress != null)
            progress.Report((j + 1) * 100 / 100000);
    }
}

private async void button1_Click(object sender, EventArgs e)
{
    progressBar1.Maximum = 100;
    progressBar1.Step = 1;

    var progress = new Progress<int>(v =>
    {
        // This lambda is executed in context of UI thread,
        // so it can safely update form controls
        progressBar1.Value = v;
    });

    // Run operation in another thread
    await Task.Run(() => DoWork(progress));

    // TODO: Do something after all calculations
} 
```

任务目前是实现`BackgroundWorker`功能的首选方式。

> 任务并`Progress`在此处更详细地解释：
> 
> *   [4.5 中的异步：在异步 API 中启用进度和取消](https://blogs.msdn.microsoft.com/dotnet/2012/06/06/async-in-4-5-enabling-progress-and-cancellation-in-async-apis/)
> *   Stephen Cleary[报告异步任务的进度](http://blog.stephencleary.com/2012/02/reporting-progress-from-async-tasks.html)
> *   [BackgroundWorker 的任务并行库替换？](https://stackoverflow.com/questions/3513432/task-parallel-library-replacement-for-backgroundworker)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-19T06:01:30.953

嘿，有一个关于点网珍珠的有用教程：http: [//www.dotnetperls.com/progressbar](http://www.dotnetperls.com/progressbar)

与 Peter 一致，您需要使用一定数量的线程，否则程序将挂起，有点违背目的。

使用 ProgressBar 和 BackgroundWorker 的示例：C#

```
using System.ComponentModel;
using System.Threading;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, System.EventArgs e)
        {
            // Start the BackgroundWorker.
            backgroundWorker1.RunWorkerAsync();
        }

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            for (int i = 1; i <= 100; i++)
            {
                // Wait 100 milliseconds.
                Thread.Sleep(100);
                // Report progress.
                backgroundWorker1.ReportProgress(i);
            }
        }

        private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            // Change the value of the ProgressBar to the BackgroundWorker progress.
            progressBar1.Value = e.ProgressPercentage;
            // Set the text.
            this.Text = e.ProgressPercentage.ToString();
        }
    }
} //closing here 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-19T09:56:10.073

有`Task`存在，使用起来很简单`BackgroundWorker`，`Task`更简单。例如：

ProgressDialog.cs：

```
 public partial class ProgressDialog : Form
    {
        public System.Windows.Forms.ProgressBar Progressbar { get { return this.progressBar1; } }

        public ProgressDialog()
        {
            InitializeComponent();
        }

        public void RunAsync(Action action)
        {
            Task.Run(action);
        }
    } 
```

完毕！然后你可以在任何地方重用 ProgressDialog：

```
var progressDialog = new ProgressDialog();
progressDialog.Progressbar.Value = 0;
progressDialog.Progressbar.Maximum = 100;

progressDialog.RunAsync(() =>
{
    for (int i = 0; i < 100; i++)
    {
        Thread.Sleep(1000)
        this.progressDialog.Progressbar.BeginInvoke((MethodInvoker)(() => {
            this.progressDialog.Progressbar.Value += 1;
        }));
    }
});

progressDialog.ShowDialog(); 
```

# .htaccess - 使用 htaccess 重定向大量页面

> ID：12126890
> 
> 赞同：0
> 
> 时间：2012-08-26T00:57:12.697
> 
> 标签：.htaccess, redirect, categories, article

我想用 htaccess 重定向很多页面（150 个链接），但我想问是否可以有重写规则。

我的旧链接是；

[http://www.sitename.com/aaa/category/article.html](http://www.sitename.com/aaa/category/article.html)

[http://www.sitename.com/aaa/category/differentarticle.html](http://www.sitename.com/aaa/category/differentarticle.html)

[http://www.sitename.com/aaa/anothercategory/anotherarticle.html](http://www.sitename.com/aaa/anothercategory/anotherarticle.html)

[http://www.sitename.com/aaa/anothercategory/anotherarticletoo.html](http://www.sitename.com/aaa/anothercategory/anotherarticletoo.html)

新链接是

[http://www.sitename.com/aaa/111-category/999-article.html](http://www.sitename.com/aaa/111-category/999-article.html)

[http://www.sitename.com/aaa/111-category/990-differentarticle.html](http://www.sitename.com/aaa/111-category/990-differentarticle.html)

[http://www.sitename.com/aaa/222-anothercategory/888-article.html](http://www.sitename.com/aaa/222-anothercategory/888-article.html)

[http://www.sitename.com/aaa/222-anothercategory/886-anotherarticletoo.html](http://www.sitename.com/aaa/222-anothercategory/886-anotherarticletoo.html)

问题是有很多文章，而且它们都有不同的文章 ID。

我如何为每个类别编写规则以进行 301 重定向？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:21:24.120

我假设您想将[http://www.sitename.com/aaa/category/article.html](http://www.sitename.com/aaa/category/article.html)重写为[http://www.sitename.com/aaa/111-category/999-article.html](http://www.sitename.com/aaa/111-category/999-article.html)，并且您正在使用 PHP 和某种形式的数据库来存储文章（至少是名称和 ID）

ModRewirte 不能添加额外的数据（除非它是硬编码的值，它将对每个 url 应用相同的值）。

但是，您可以让它对所有内容进行内部重写（而不是重定向）`index.php`，然后 index.php 可以读取 $_SERVER['REQUEST_URI'] 以查看请求的 URL。这将为您`/aaa/category/article.html`提供然后您可以使用 PHP 做任何您想做的事情，包括发送重定向。

以下是我执行相同技巧但目的不同的摘录。第一位忽略诸如 css 和 images 文件夹之类的位置。与这些位置不匹配的任何内容都将发送到 index.php

```
Options +FollowSymLinks
IndexIgnore */*
RewriteEngine On

RewriteCond %{REQUEST_URI} !/css/.*$
RewriteCond %{REQUEST_URI} !/images/.*$
RewriteCond %{REQUEST_URI} !/js/.*$
RewriteCond %{REQUEST_URI} !/favicon\.ico$
RewriteCond %{REQUEST_URI} !/robots\.txt$
RewriteRule . index.php 
```

和你的 index.php（或任何你想叫它的东西：我的是 router.php）

```
<?php
function http_redirect($url, $code=301) {
    header('HTTP/1.1 '.$code.' Found');
    header('Location: '.$url);
    echo 'Redirecting to <a>'.$url.'</a>.';
    die('');
}

$loc = explode('?', $_SERVER['REQUEST_URI']); //Get rid of any query string
$query = loc[1];
$loc = explode('/', $loc[0]);
//you now have
//array('aaa','category','article.html')
//look these up in the database to build your new URL
http_redirect('my/new/url'.$loc[0]); //whatever, don't forget the query string if it has 1
?> 
```

您还应该添加更多错误检查，我将其省略以保持简短

# facebook - Facebook like modal 隐藏在页面下方

> ID：12126892
> 
> 赞同：0
> 
> 时间：2012-08-26T00:57:33.307
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk

当在我们的页面上单击“赞”按钮时，共享模式会隐藏在 Chrome 中的页面下方。

它显示错误：“不安全的 Javascript 尝试使用 URL 访问框架”，但我认为这无关，因为我在其他网站上看到了相同的错误，它仍然适用于他们。

![在此处输入图像描述](../Images/d57dcff6f8b6518bb196381a0d2951df.png)

我们的网站通过 HTTPS 运行（不确定这是否重要），代码几乎是从 Facebook 直接复制粘贴的：

```
<div class="fb-like" data-href="http://www.facebook.com/Coinbase" data-send="false" data-layout="button_count" data-width="85" data-show-faces="false"></div>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=154072648063392";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:15:05.553

我不确定您是否提供了足够的信息，但此类问题的一般解决方案是将页面中的“赞”按钮向上移动。

更新：将 clearfix 添加到 like 元素的容器中。

# jquery - 如何使用 jQuery 更改输入选项文本？

> ID：12126893
> 
> 赞同：0
> 
> 时间：2012-08-26T00:57:37.257
> 
> 标签：jquery

我想以此输入为目标并使用 jQuery 动态更改它：

```
<select id="sub_cat" style="" name="sub_cat">
<option selected="selected" value="-10">All</option> 
```

我希望能够使用基于不同变量的 if 语句来更改“全部”。jQuery可以做到这一点吗？如何？任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:01:27.053

[jsFiddle 示例](http://jsfiddle.net/HRxRM/)

```
var option = $('#sub_cat').find('option:contains("All")');
option.text('New Text'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T01:03:27.000

这将根据`lang`变量的值更改所选选项的值。

```
$("#sub_cat option").each(function() {
  var option = $(this);
  var val = option.val();
  if(val === "All") option.val("Hepsi");
}); 
```

# java - 如果取消引用的 Java 对象启动了仍在运行的线程，它是否仍会被垃圾回收？

> ID：12126894
> 
> 赞同：1
> 
> 时间：2012-08-26T00:58:03.303
> 
> 标签：java, multithreading, garbage-collection

考虑以下场景：

*   对象在某个函数中*本地*`myObj`实例化。*`myFunc`*
**   `myObj`启动一个`someThread`运行一些后台任务的线程，例如从套接字读取。*   `myFunc`然后返回，导致`myObj`被取消引用。*

 *在正常情况下，JVM 只会进行垃圾收集`myObj`。但是，如果`someThread`仍在运行，是否仍然如此？

我知道只要它仍在运行，它`someThread`本身就***不会***`myObj`被 GC，但在我的代码中，它还需要访问存储在 中的值，因此我确保`myObj`在它仍在运行时仍然存在是很重要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T01:14:40.927

一个对象只有在没有对它的引用时才有资格进行垃圾回收。您说`someThread`需要访问存储在 中的值`myObj`，这意味着它*必须*具有对`myObj`. 这意味着除非也符合条件`myObj`，否则不符合垃圾收集条件。`someThread`

你可以保证一个对象永远不会从你下面被垃圾收集，例如，这是非常安全的：

```
void foo() {
    final Object something = new String("I'm alive!");
    new Thread() {
        public void run() {
            try {Thread.sleep(10000);} catch (InterruptedException e) {}
            System.out.println(something);
        }
    }.start();
} 
```

`something`由匿名线程引用，因此在匿名线程完成之前它没有资格进行垃圾收集。

更具体地说，对于您的示例，这也是安全的：

```
void foo() {
    new ThreadStartingObject("I'm alive!");
}

class ThreadStartingObject {
    private String message;

    public void ThreadStartingObject(String msg) {
        this.message = msg;
        new Thread() {
            public void run() {
                try {Thread.sleep(10000);} catch (InterruptedException e) {}
                System.out.println(message);
            }
        }.start();
    }
} 
```

代表线程的匿名内部类具有对外部的隐式引用`this`，即 的实例`ThreadStartingObject`。该引用防止垃圾收集。*

# thumbnails - 获取 box.net 中图像的缩略图

> ID：12126901
> 
> 赞同：1
> 
> 时间：2012-08-26T00:59:14.523
> 
> 标签：thumbnails, box-api

get_account_tree() API 返回缩略图信息。但是，box.net 发布了 v2.0 API，并且没有 API 提供缩略图信息。这对于快速查看图像而不是下载整个图像很重要。基本上，我正在寻找类似于 dropbox 提供的 /thumbnail 的 API。这将非常有用。

谢谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:54:16.160

Box 支持图像的缩略图。

```
curl https://api.box.com/2.0/files/FILE_ID/thumbnail.png
-H "Authorization: Bearer ACCESS_TOKEN" 
```

此处的文档：http: [//developers.box.com/docs/#files-get-a-thumbnail-for-a-file](http://developers.box.com/docs/#files-get-a-thumbnail-for-a-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T03:30:35.450

感谢您的反馈。V2.0 API 仍处于测试阶段，我们确实计划增强一些端点以包含缩略图的 URL。请继续关注[http://developers.blog.box.com/](http://developers.blog.box.com/)上的博客文章，了解 V2 API 的更新。

# php - 页面未返回 - CURL PHP

> ID：12126906
> 
> 赞同：0
> 
> 时间：2012-08-26T01:00:16.723
> 
> 标签：php, api, curl, oauth-2.0, yahoo-api

我正在尝试使用 oAuth Yahoo API。我有 Auth URL，但我的 CURL 没有返回任何内容。有人可以指出我做错了什么吗？

我想要登录屏幕（假设我还没有登录）..

```
$auth_url = 'https://api.login.yahoo.com/oauth/v2/request_auth?oauth_token=qj94ktv';         

// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL,$auth_url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false)        

// grab URL and pass it to the browser
curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch); 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T01:07:51.800

您`curl_exec($ch);`没有传递给浏览器。此外，您在重定向时不会跟随位置，并且`RETURNTRANSFER`

您需要为其分配一个变量或只是转储它：

```
$auth_url = 'https://api.login.yahoo.com/oauth/v2/request_auth?oauth_token=qj94ktv';         
// create a new cURL resource
$ch = curl_init();
// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL,$auth_url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);       
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
// grab URL and pass it to the browser
echo curl_exec($ch);
// close cURL resource, and free up system resources
curl_close($ch); 
```

# c# - 何时应该在 C# 中定义（显式或隐式）转换运算符？

> ID：12126907
> 
> 赞同：11
> 
> 时间：2012-08-26T01:00:16.630
> 
> 标签：c#, casting, operator-overloading, implicit-conversion, explicit-conversion

C# 的一个鲜为人知的特性是创建隐式或显式[用户定义类型转换](http://msdn.microsoft.com/en-us/library/aa691298%28v=vs.71%29)的可能性。我已经编写 C# 代码 6 年了，但我从未使用过它。所以，我担心我可能会错过好机会。

用户定义转换的合法、良好用途是什么？您是否有比仅定义自定义方法更好的示例？

--

事实证明，微软有一些关于转换的[设计指南](http://msdn.microsoft.com/en-us/library/ms229033.aspx)，其中最相关的是：

> 如果最终用户没有明确期望此类转换，请勿提供转换运算符。

但是什么时候会“预期”转换呢？在玩具编号类之外，我无法弄清楚任何真实世界的用例。

* * *

以下是答案中提供的示例的摘要：

*   弧度/度/双
*   极地/Point2D
*   开尔文/华氏度/摄氏度

模式似乎是：隐式转换在定义数值/值类型时主要（仅？）有用，转换由公式定义。回想起来，这是显而易见的。不过，我想知道非数字类是否也可以从隐式转换中受益……？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T01:28:24.027

当与不同类型进行自然而清晰的转换时，您可以使用转换运算符。

例如，假设您有一个表示温度的数据类型：

```
public enum TemperatureScale { Kelvin, Farenheit, Celsius }

public struct Temperature {

  private TemperatureScale _scale;
  private double _temp;

  public Temperature(double temp, TemperatureScale scale) {
    _scale = scale;
    _temp = temp;
  }

  public static implicit operator Temperature(double temp) {
    return new Temperature(temp, TemperatureScale.Kelvin);
  }

} 
```

使用隐式运算符，您可以将 double 分配给温度变量，它将自动用作 Kelvin：

```
Temperature a = new Temperature(100, TemperatureScale.Celcius);
Temperature b = 373.15; // Kelvin is default 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T22:40:49.690

正如评论中提到的，度数和旋转是避免混淆双精度值的一个很好的例子，尤其是在 API 之间。

我拔出了我们目前正在使用的`Radians`和类，它们就在这里。`Degrees`现在看看它们（经过这么长时间）我想清理它们（尤其是评论/文档）并确保它们经过适当的测试。谢天谢地，我已经设法在日程安排中抽出时间来这样做。无论如何，使用这些需要您自担风险，我不能保证这里的*所有*数学运算是否正确，因为我很确定我们实际上并没有*使用/测试*我们编写的所有功能。

### 弧度

```
/// <summary>
/// Defines an angle in Radians
/// </summary>
public struct Radians
{
    public static readonly Radians ZERO_PI = 0;
    public static readonly Radians ONE_PI = System.Math.PI;
    public static readonly Radians TWO_PI = ONE_PI * 2;
    public static readonly Radians HALF_PI = ONE_PI * 0.5;
    public static readonly Radians QUARTER_PI = ONE_PI * 0.25;

    #region Public Members

    /// <summary>
    /// Angle value
    /// </summary>
    public double Value;
    /// <summary>
    /// Finds the Cosine of the angle
    /// </summary>
    public double Cos
    {
        get
        {
            return System.Math.Cos(this);
        }
    }
    /// <summary>
    /// Finds the Sine of the angle
    /// </summary>
    public double Sin
    {
        get
        {
            return System.Math.Sin(this);
        }
    }

    #endregion

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="value">angle value in radians</param>
    public Radians(double value)
    {
        this.Value = value;
    }
    /// <summary>
    /// Gets the angle in degrees
    /// </summary>
    /// <returns>Returns the angle in degrees</returns>
    public Degrees GetDegrees()
    {
        return this;
    }

    public Radians Reduce()
    {
        double radian = this.Value;
        bool IsNegative = radian < 0;
        radian = System.Math.Abs(radian);
        while (radian >= System.Math.PI * 2)
        {
            radian -= System.Math.PI * 2;
        }
        if (IsNegative && radian != 0)
        {
            radian = System.Math.PI * 2 - radian;
        }
        return radian;
    }

    #region operator overloading

    /// <summary>
    /// Conversion of Degrees to Radians
    /// </summary>
    /// <param name="deg"></param>
    /// <returns></returns>
    public static implicit operator Radians(Degrees deg)
    {
        return new Radians(deg.Value * System.Math.PI / 180);
    }
    /// <summary>
    /// Conversion of integer to Radians
    /// </summary>
    /// <param name="i"></param>
    /// <returns></returns>
    public static implicit operator Radians(int i)
    {
        return new Radians((double)i);
    }
    /// <summary>
    /// Conversion of float to Radians
    /// </summary>
    /// <param name="f"></param>
    /// <returns></returns>
    public static implicit operator Radians(float f)
    {
        return new Radians((double)f);
    }
    /// <summary>
    /// Conversion of double to Radians
    /// </summary>
    /// <param name="dbl"></param>
    /// <returns></returns>
    public static implicit operator Radians(double dbl)
    {
        return new Radians(dbl);
    }
    /// <summary>
    /// Conversion of Radians to double
    /// </summary>
    /// <param name="rad"></param>
    /// <returns></returns>
    public static implicit operator double(Radians rad)
    {
        return rad.Value;
    }
    /// <summary>
    /// Add Radians and a double
    /// </summary>
    /// <param name="rad"></param>
    /// <param name="dbl"></param>
    /// <returns></returns>
    public static Radians operator +(Radians rad, double dbl)
    {
        return new Radians(rad.Value + dbl);
    }
    /// <summary>
    /// Add Radians to Radians
    /// </summary>
    /// <param name="rad1"></param>
    /// <param name="rad2"></param>
    /// <returns></returns>
    public static Radians operator +(Radians rad1, Radians rad2)
    {
        return new Radians(rad1.Value + rad2.Value);
    }
    /// <summary>
    /// Add Radians and Degrees
    /// </summary>
    /// <param name="rad"></param>
    /// <param name="deg"></param>
    /// <returns></returns>
    public static Radians operator +(Radians rad, Degrees deg)
    {
        return new Radians(rad.Value + deg.GetRadians().Value);
    }
    /// <summary>
    /// Sets Radians value negative
    /// </summary>
    /// <param name="rad"></param>
    /// <returns></returns>
    public static Radians operator -(Radians rad)
    {
        return new Radians(-rad.Value);
    }
    /// <summary>
    /// Subtracts a double from Radians
    /// </summary>
    /// <param name="rad"></param>
    /// <param name="dbl"></param>
    /// <returns></returns>
    public static Radians operator -(Radians rad, double dbl)
    {
        return new Radians(rad.Value - dbl);
    }
    /// <summary>
    /// Subtracts Radians from Radians
    /// </summary>
    /// <param name="rad1"></param>
    /// <param name="rad2"></param>
    /// <returns></returns>
    public static Radians operator -(Radians rad1, Radians rad2)
    {
        return new Radians(rad1.Value - rad2.Value);
    }
    /// <summary>
    /// Subtracts Degrees from Radians
    /// </summary>
    /// <param name="rad"></param>
    /// <param name="deg"></param>
    /// <returns></returns>
    public static Radians operator -(Radians rad, Degrees deg)
    {
        return new Radians(rad.Value - deg.GetRadians().Value);
    }

    #endregion

    public override string ToString()
    {
        return String.Format("{0}", this.Value);
    }

    public static Radians Convert(object value)
    {
        if (value is Radians)
            return (Radians)value;
        if (value is Degrees)
            return (Degrees)value;

        return System.Convert.ToDouble(value);
    }
} 
```

* * *

### 度数

```
public struct Degrees
{
    public double Value;       

    public Degrees(double value) { this.Value = value; }

    public Radians GetRadians()
    {
        return this;
    }

    public Degrees Reduce()
    {
        return this.GetRadians().Reduce();
    }

    public double Cos
    {
        get
        {
            return System.Math.Cos(this.GetRadians());
        }
    }

    public double Sin
    {
        get
        {
            return System.Math.Sin(this.GetRadians());
        }
    }

    #region operator overloading

    public static implicit operator Degrees(Radians rad)
    {
        return new Degrees(rad.Value * 180 / System.Math.PI);
    }

    public static implicit operator Degrees(int i)
    {
        return new Degrees((double)i);
    }

    public static implicit operator Degrees(float f)
    {
        return new Degrees((double)f);
    }

    public static implicit operator Degrees(double d)
    {
        return new Degrees(d);
    }

    public static implicit operator double(Degrees deg)
    {
        return deg.Value;
    }

    public static Degrees operator +(Degrees deg, int i)
    {
        return new Degrees(deg.Value + i);
    }

    public static Degrees operator +(Degrees deg, double dbl)
    {
        return new Degrees(deg.Value + dbl);
    }

    public static Degrees operator +(Degrees deg1, Degrees deg2)
    {
        return new Degrees(deg1.Value + deg2.Value);
    }

    public static Degrees operator +(Degrees deg, Radians rad)
    {
        return new Degrees(deg.Value + rad.GetDegrees().Value);
    }

    public static Degrees operator -(Degrees deg)
    {
        return new Degrees(-deg.Value);
    }

    public static Degrees operator -(Degrees deg, int i)
    {
        return new Degrees(deg.Value - i);
    }

    public static Degrees operator -(Degrees deg, double dbl)
    {
        return new Degrees(deg.Value - dbl);
    }

    public static Degrees operator -(Degrees deg1, Degrees deg2)
    {
        return new Degrees(deg1.Value - deg2.Value);
    }

    public static Degrees operator -(Degrees deg, Radians rad)
    {
        return new Degrees(deg.Value - rad.GetDegrees().Value);
    }

    #endregion

    public override string ToString()
    {
        return String.Format("{0}", this.Value);
    }

    public static Degrees Convert(object value)
    {
        if (value is Degrees)
            return (Degrees)value;
        if (value is Radians)
            return (Radians)value;

        return System.Convert.ToDouble(value);
    }
} 
```

* * *

### 一些示例用法

这些在使用 API 时确实受益匪浅。虽然在内部，您的组织可能会决定严格使用度数*或*弧度以避免混淆，但至少对于这些类，您可以使用最有意义的类型。例如，公开使用的 API 或 GUI API 可以使用`Degrees`，而您的大量数学/三角函数或内部使用可能使用`Radians`. 考虑以下类/打印功能：

```
public class MyRadiansShape
{
    public Radians Rotation { get; set; }
}

public class MyDegreesShape
{
    public Degrees Rotation { get; set; }
}

public static void PrintRotation(Degrees degrees, Radians radians)
{
    Console.WriteLine(String.Format("Degrees: {0}, Radians: {1}", degrees.Value, radians.Value));
} 
```

是的，代码很做作（而且非常模棱两可），但没关系！只是去展示它如何帮助减少意外的混淆。

```
var radiansShape = new MyRadiansShape() { Rotation = Math.PI / 2}; //prefer "Radians.HALF_PI" instead, but just as an example
var degreesShape = new MyDegreesShape() { Rotation = 90 };

PrintRotation(radiansShape.Rotation, radiansShape.Rotation);
PrintRotation(degreesShape.Rotation, degreesShape.Rotation);
PrintRotation(radiansShape.Rotation + degreesShape.Rotation, radiansShape.Rotation + degreesShape.Rotation);

//Degrees: 90, Radians: 1.5707963267949
//Degrees: 90, Radians: 1.5707963267949
//Degrees: 180, Radians: 3.14159265358979 
```

然后它们对于实现基于角度的*其他数学概念非常有用，例如极坐标：*

```
double distance = 5;
Polar polarCoordinate = new Polar(distance, (degreesShape.Rotation - radiansShape.Rotation) + Radians.QUARTER_PI);
Console.WriteLine("Polar Coordinate Angle: " + (Degrees)polarCoordinate.Angle); //because it's easier to read degrees!
//Polar Coordinate Angle: 45 
```

最后，您可以`Point2D`通过隐式转换来实现一个类（或使用 System.Windows.Point）`Polar`：

```
Point2D cartesianCoordinate = polarCoordinate;
Console.WriteLine(cartesianCoordinate.X + ", " + cartesianCoordinate.Y);
//3.53553390593274, 3.53553390593274 
```

正如我所说，我想再通过这些类，并可能消除`double`隐式转换`Radians`以避免一些可能的极端情况混淆和编译器歧义。这些实际上在我们创建 static `ONE_PI`，`HALF_PI`（等等）字段之前就已经存在，并且我们正在从`Math.PI`double 的某个倍数进行转换。

编辑：这是`Polar`作为附加隐式转换演示的类。它利用了`Radians`类（以及它的隐式转换）以及它和`Point2D`类上的辅助方法。我没有在这里包含它，但是`Polar`该类可以轻松地实现与该类交互的运算符，`Point2D`但这些与本讨论无关。

```
public struct Polar
{
    public double Radius;
    public Radians Angle;

    public double X { get { return Radius * Angle.Cos; } }
    public double Y { get { return Radius * Angle.Sin; } }

    public Polar(double radius, Radians angle)
    {
        this.Radius = radius;
        this.Angle = angle;
    }

    public Polar(Point2D point)
        : this(point.Magnitude(), point.GetAngleFromOrigin())
    {
    }

    public Polar(Point2D point, double radius)
        : this(radius, point.GetAngleFromOrigin())
    {
    }

    public Polar(Point2D point, Point2D origin)
        : this(point - origin)
    {
    }

    public Point2D ToCartesian()
    {
        return new Point2D(X, Y);
    }

    public static implicit operator Point2D(Polar polar)
    {
        return polar.ToCartesian();
    }

    public static implicit operator Polar(Point2D vector)
    {
        return new Polar(vector);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-30T20:55:37.173

我用它来无缝转换`DateTime`到`"yyyyMMdd"`相应的`int`(yyyyMMdd) 值。

例如：

```
void f1(int yyyyMMdd);
void f2(string yyyyMMdd);

...
f1(30.YearsFrom(DateTime.Today));
f2(30.YearsFrom(DateTime.Today));

...
public static DateAsYyyyMmDd YearsFrom(this int y, DateTime d) 
{
    return new DateAsYyyyMmDd(d.AddYears(y));
}

...
public class DateAsYyyyMmDd
{
    private readonly DateTime date;

    public DateAsYyyyMmDd(DateTime date)
    {
        this.date = date;
    }

    public static implicit operator int(DateOrYyyyMmDd d)
    {
        return Convert.ToInt32(d.date.ToString("yyyyMMdd"));
    }

    public static implicit operator string(DateOrYyyyMmDd d)
    {
        return d.date.ToString("yyyyMMdd");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T01:16:43.127

假设您有一个用于商店应用程序的产品（例如玩具）类：

```
class Product
{
    string name;
    decimal price;
    string maker;
    //etc...
} 
```

您可以定义可能执行以下操作的显式强制转换：

```
public static explicit operator string(Product p)
{
    return "Product Name: " + p.name + " Price: " + p.price.ToString("C") + " Maker: " + p.maker;
    // Or you might just want to return the name.
} 
```

这样，当您执行以下操作时：

```
textBox1.Text = (string)myProduct; 
```

它将输出格式化为`Product`类的显式运算符中的内容。

* * *

> 如果最终用户没有明确期望此类转换，请勿提供转换运算符。

Microsoft 的意思是，如果您**确实**提供了一个转换运算符，则不会返回意外的结果。使用我们`Product`类的最后一个示例，这将返回一个意外的结果：

```
public static explicit operator string(Product p)
{
    return (p.price * 100).ToString();
    //...
} 
```

显然没有人会真正这样做，但如果其他人使用`Product`该类并使用显式字符串转换，他们不会期望它返回价格乘以 100。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T01:20:01.020

一般来说，如果两件事在逻辑上是可转换的。我在这种情况下使用它们来提供更流畅的代码。我有时也会使用它们来绕过那些不太像我期望的那样工作的语言特性。

这是一个非常简单，人为的示例，说明了与我在生产中使用的类似的最后一个想法......

```
class Program
{. 
    static void Main(string[] args)
    {
        Code code1 = new Code { Id = 1, Description = "Hi" };
        Code code2 = new Code { Id = 2, Description = "There" };

        switch (code1)
        {
            case 23: 
              // do some stuff
              break;
            // other cases...
        }
    }
}

public class Code
{
    private int id;
    private string description;

    public int Id { get; set; }
    public string Description { get; set; }

    public static implicit operator int(Code code)
    {
        return code.Id;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-04T08:32:29.957

没有普遍的答案。我会小心使用它，并且只有在保持代码易于理解和直截了当的情况下（即它显示出预期的行为）。

所以我可以根据一个实际的例子给你一个答案，如果你跟着它，你就会明白什么时候使用，什么时候最好不要使用转换运算符：

我最近想用一种更简单的方法来处理 Guid。我的设计目标是：简化语法和初始化，简化转换和变量分配。

如您所知，如果您需要创建 GUID，使用起来有点麻烦：

**示例 1：**

盒子外面：

```
var guids = new Guid[] {
  new Guid("2f78c861-e0c3-4d83-a2d2-cac269fb87f1"), new Guid("2f78c861-e0c3-4d83-a2d2-cac269fb87f2"),
  new Guid("2f78c861-e0c3-4d83-a2d2-cac269fb87f3")
}; 
```

如果您可以将 GUID 字符串隐式转换为字符串，例如：

```
var guids = new EasyGuid[] {
    "2f78c861-e0c3-4d83-a2d2-cac269fb87f1", "2f78c861-e0c3-4d83-a2d2-cac269fb87f2",
    "2f78c861-e0c3-4d83-a2d2-cac269fb87f3"
}; 
```

这将允许将 GUID 列表直接从 JSON 文件粘贴到 C# 代码中。

**示例 2：**

要初始化数组，您需要执行以下操作：

```
var guids = new Guid[30];
for (int i = 0; i < 30; i++)
{
    guids[i] = System.Guid.Empty; // Guid with 000...
} 
```

像这样的指导会不会更容易：

```
var guids = new EasyGuid[30]; // create array with 30 Guids (value null) 
```

然后可以像这样使用两个示例中的指南

```
foreach (Guid g in guids)
{
        g.Dump();
} 
```

换句话说，它们可以在需要使用时隐式转换为“普通”Guid。在第二个示例中，如果它们为空，则动态隐式分配空 Guid。

你怎么能那样做？您不能从 System.Guid 继承。但是您可以使用隐式转换。看看这个类，我称之为它`EasyGuid`，它使上面的声明成为可能：

```
/// <summary>
/// Easy GUID creation
/// Written by Matt, 2020
/// </summary>
public class EasyGuid
{
    // in case you want to replace GUID generation 
    // by RT.Comb, call Provider.PostgreSql.Create()
    private static System.Guid NewGuid => System.Guid.NewGuid();

    private System.Guid _guid = EasyGuid.NewGuid;

    public EasyGuid()
    {
        _guid = NewGuid;
    }

    public EasyGuid(string s)
    {
        _guid = new System.Guid(s); // convert string to Guid
    }

    // converts string to Guid
    public static implicit operator EasyGuid(string s) => new EasyGuid(s);

    // converts EasyGuid to Guid, create empty guid (Guid with 0) if null
    public static implicit operator System.Guid(EasyGuid g)
                                    => (g == null) ? System.Guid.Empty : g.ToGuid();

    // converts EasyGuid to Guid?, null will be passed through
    public static implicit operator System.Guid?(EasyGuid g)
                                    => (g == null) ? null : (Guid?)g.ToGuid();

    public override string ToString() => _guid.ToString();
    public System.Guid ToGuid() => _guid;
} 
```

您可以看到它`EasyGuid`可以将字符串隐式转换为 EasyGuid，也可以将 EasyGuid 转换为 Guid - 通过调用`ToGuid()`. 它也可以打印为字符串，因为我已经覆盖了`.ToString()`.

最后，我希望能够轻松地动态生成新的 GUID。我通过写作实现了这一点。

```
 // converts EasyGuid to Guid, create empty guid (Guid with 0) if null
    public static implicit operator System.Guid(EasyGuid g)
                                    => (g == null) ? EasyGuid.NewGuid : g.ToGuid(); 
```

这会产生这样的效果

```
var guids = new EasyGuid[30]; 
```

将在转换为 GUID 后立即生成新的 GUID。但是我从[@OskarBerggren](https://stackoverflow.com/users/1141275/oskar-berggren)那里得到反馈，这种方法虽然很容易实现，但会引起混淆——对于阅读它的其他人来说，代码将不再明显（谢谢你，Oskar 的这个提示！）。它还可能导致意外问题（错误）。记住微软的话：

> 如果最终用户没有明确期望此类转换，请勿提供转换运算符。

因此，我不是通过隐式转换来实现的，而是使用如下扩展方法来实现的：

```
public static class Extensions
{
    public static System.Guid[] ToGuids(this EasyGuid[] guidArray, bool replaceNullByNewGuid = false)
        => guidArray.ToList().ToGuids(replaceNullByNewGuid).ToArray();

    public static List<System.Guid> ToGuids(this List<EasyGuid> easyGuidList, bool replaceNullByNewGuid = false)
    {
        var guidList = new List<Guid>();
        foreach (var g in easyGuidList)
        {
            Guid result = (g!=null) ? g : ((replaceNullByNewGuid) ? new EasyGuid().ToGuid() : System.Guid.Empty);
            guidList.Add(result);
        }
        return guidList;
    }
} 
```

这更简单，因为现在您可以选择：

```
// shorter: .ToGuids(true)
var guids = new EasyGuid[30].ToGuids(replaceNullByNewGuid: true); 
```

如果你只想创建一个空 Guid 的数组：

```
var guids = new EasyGuid[30].ToGuids(); 
```

这样做（对于 GUIDS 列表相同）。

此示例表明隐式转换运算符很容易因意外行为而引起混淆。有时，最好使用扩展方法（如此处所示）。

我认为这个例子表明，在某些情况下转换运算符可以让您的生活更轻松，而在其他情况下，您应该停下来思考并找到更明显的实现方式。

* * *

为了完整性：其他情况是：

```
var eg1 = new EasyGuid();  // simple case: new Guid
Guid g = eg1; g.Dump();    // straight-forward conversion

EasyGuid eg2 = null;       // null-handling
Guid g2 = eg2; g2.Dump();  // converted to 00000000-0000-0000-0000-000000000000
Guid? g3 = eg2; g3.Dump(); // will be null 
```

# c# - C# XmlWriter - 在元素中添加元素

> ID：12126909
> 
> 赞同：2
> 
> 时间：2012-08-26T01:01:03.183
> 
> 标签：c#, xmlreader, xmlwriter

目前我正在使用 XmlWriter 并想询问如何在现有的 XML 文件中写入，例如：

一个.xml

```
<info>
     <description>Test3</description>
     <loops>100</loops>
</info> 
```

添加`<Info>`，例如

```
<name>Test1</name> 
```

position of`<name>`没有任何作用，但最好写在 之前`</info>`，因此是最后一个元素。

```
<info>
     <description>Test3</description>
     <loops>100</loops>
     <name>Test1</name>
</info> 
```

或者：

```
<info>
     <name>Test1</name>
     <description>Test3</description>
     <loops>100</loops>
</info> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T01:26:38.377

`XmlWriter`类速度很快，但只能在一个方向上逐个元素地编写。如果要编辑现有 XML，最简单的方法是使用 LINQ to XML：

```
var doc = XDocument.Parse(xml); // or XDocument.Load(xmlFilePath)
doc.Root.Add(new XElement("name", "Test1"));

doc.Save(xmlFilePath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T01:31:29.370

我不建议您使用 XmlReader 和 Writer，但如果您问... 例如

```
 XmlDocument d = new XmlDocument();
            d.Load("c:/a.xml");

            XmlNode root = d.FirstChild;
            if(root.HasChildNodes)
            {
                using(XmlWriter writer = new XmlTextWriter("c:/a.xml", Encoding.Default))
                {
                    writer.WriteStartDocument();
                    writer.WriteStartElement(root.Name);
                    foreach(XmlNode node in root.ChildNodes)
                    {
                        writer.WriteStartElement(node.Name);
                        writer.WriteValue(node.InnerText);
                        writer.WriteEndElement();

                        // writing new node after "loop" node
                        if (node.Name == "loop")
                        {
                            writer.WriteStartElement("name");
                            writer.WriteValue("test1");
                            writer.WriteEndElement();
                        }

                    }
                    writer.WriteEndElement();
                    writer.WriteEndDocument();
                }
            } 
```

# javascript - 如何将此数据编码为 JSON 中的父/子结构

> ID：12126914
> 
> 赞同：16
> 
> 时间：2012-08-26T01:01:54.360
> 
> 标签：javascript, json, d3.js, hierarchy, treemap

我正在使用 d3.js 将动物（有机体）家族（一次最多 4000 个）可视化为树形图，尽管数据源也可以是目录列表或命名空间对象列表。我的数据看起来像：

```
json = {
    organisms:[
        {name: 'Hemiptera.Miridae.Kanakamiris'},
        {name: 'Hemiptera.Miridae.Neophloeobia.incisa'},
        {name: 'Lepidoptera.Nymphalidae.Ephinephile.rawnsleyi'},
        ... etc ...
    ]
} 
```

我的问题是：我正在尝试找到将上述数据转换为分层父/子数据结构的最佳方法，这些数据结构被许多 d3 可视化（例如[树形图](http://bost.ocks.org/mike/treemap/)）使用（例如，请参阅d3/ 中的[flare.json](https://github.com/mbostock/d3/blob/master/examples/data/flare.json) ）示例/数据/目录）。这是所需数据结构的示例：

```
{"name": "ROOT",
 "children": [
        {"name": "Hemiptera",
         "children": [
             {"name": "Miridae",
              "children": [
                  {"name": "Kanakamiris", "children":[]},
                  {"name": "Neophloeobia",
                   "children": [
                       {"name": "incisa", "children":[] }
                   ]}
              ]}
         ]},
        {"name": "Lepidoptera",
         "children": [
             {"name": "Nymphalidae",
              "children": [
                  {"name": "Ephinephile",
                   "children": [
                       {"name": "rawnsleyi", "children":[] }
                   ]}
              ]}
         ]}
    ]}
} 
```

编辑：将所有原始所需的数据结构包含在一个`ROOT`节点内，以符合只有一个主父节点的 d3 示例的结构。

我希望了解一般的设计模式，作为奖励，我很想在 javascript、php（甚至 python）中看到一些解决方案。javascript是我的偏好。关于 php：我实际使用的数据来自一个将结果编码为 json 的 php 脚本对数据库的调用。如果这对基于 php 的答案有任何用途，则 php 脚本中的数据库结果是一个有序数组（见下文）。

```
Array
(
    [0] => Array
        (
            ['Rank_Order'] => 'Hemiptera'
            ['Rank_Family'] => 'Miridae'
            ['Rank_Genus'] => 'Kanakamiris'
            ['Rank_Species'] => ''
        ) ........ 
```

其中： `'Rank_Order'`isParentOf `'Rank_Family'`isParentOf `'Rank_Genus'`isParentOf`'Rank_Species'`

[我在这里](https://stackoverflow.com/questions/11981153/rearrange-a-php-array-into-a-nested-hierarchical-array)问了一个关于 php 解决方案的类似问题，但唯一的答案在我的服务器上不起作用，我不太明白发生了什么，所以我想从设计模式的角度提出这个问题，并包括参考到我在 javascript 和 d3.js 中的实际使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T07:57:35.967

以下内容特定于您提供的结构，可以很容易地使其更通用。我确信*addChild*函数可以简化。希望评论对您有所帮助。

```
function toHeirarchy(obj) {

  // Get the organisms array
  var orgName, orgNames = obj.organisms;

  // Make root object
  var root = {name:'ROOT', children:[]};

  // For each organism, get the name parts
  for (var i=0, iLen=orgNames.length; i<iLen; i++) {
    orgName = orgNames[i].name.split('.');

    // Start from root.children
    children = root.children;

    // For each part of name, get child if already have it
    // or add new object and child if not
    for (var j=0, jLen=orgName.length; j<jLen; j++) {
      children = addChild(children, orgName[j]);      
    }
  }
  return root;

  // Helper function, iterates over children looking for 
  // name. If found, returns its child array, otherwise adds a new
  // child object and child array and returns it.
  function addChild(children, name) {

    // Look for name in children
    for (var i=0, iLen=children.length; i<iLen; i++) {

      // If find name, return its child array
      if (children[i].name == name) {
        return children[i].children;        
      }
    }
    // If didn't find name, add a new object and 
    // return its child array
    children.push({'name': name, 'children':[]});
    return children[children.length - 1].children;
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T03:12:07.007

鉴于您的起始输入，我相信类似以下代码的内容会产生您想要的输出。我不认为这是最漂亮的方法，但这是当时想到的。

预处理数据似乎最简单，首先将初始字符串数组拆分为数组数组，如下所示：

```
[
   ["Hemiptera","Miridae","Kanakamiris" ],
   ["Hemiptera","Miridae","Neophloeobia","incisa" ],
   //etc
] 
```

...然后对其进行处理以获取如下形式的工作对象：

```
 working = {
       Hemiptera : {
           Miridae : {
              Kanakamiris : {},
              Neophloeobia : {
                  incisa : {}
              }
           }
       },
       Lepidoptera : {
           Nymphalidae : {
              Ephinephile : {
                  rawnsleyi : {}
              }
           }
       }
    } 
```

...因为使用对象而不是数组可以更轻松地测试子项是否已经存在。创建了上述结构后，我最后一次处理它以获得最终所需的输出。所以：

```
// start by remapping the data to an array of arrays
var organisms = data.organisms.map(function(v) {
        return v.name.split(".");
    });

// this function recursively processes the above array of arrays
// to create an object whose properties are also objects
function addToHeirarchy(val, level, heirarchy) {
    if (val[level]) {
        if (!heirarchy.hasOwnProperty(val[level]))
            heirarchy[val[level]] = {};
        addToHeirarchy(val, level + 1, heirarchy[val[level]]);
    }
}
var working = {};    
for (var i = 0; i < organisms.length; i++)
    addToHeirarchy(organisms[i], 0, working);

// this function recursively processes the object created above
// to create the desired final structure
function remapHeirarchy(item) {
    var children = [];
    for (var k in item) {
        children.push({
            "name" : k,
            "children" : remapHeirarchy(item[k])
        });
    }
    return children;
}

var heirarchy = {
    "name" : "ROOT",
    "children" : remapHeirarchy(working)
}; 
```

演示：http: [//jsfiddle.net/a669F/1/](http://jsfiddle.net/a669F/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T03:37:57.390

我自己的问题的另一种答案....在过去的一天里，我对 d3.js 的了解不多，与这个问题[d3.nest()](https://github.com/mbostock/d3/wiki/Arrays#wiki-_nest)和 .key() 和 .entries() 的关系是我的朋友（所有 d3 功能）。该答案涉及更改初始数据，因此它可能不能作为我提出的特定问题的良好答案。但是，如果有人有类似的问题并且可以更改服务器上的内容，那么这是一个非常简单的解决方案：

以这种格式从数据库中返回数据：

```
json = {'Organisms': [
    { 'Rank_Order': 'Hemiptera',
      'Rank_Family': 'Miridae',
      'Rank_Genus': 'Kanakamiris',
      'Rank_Species': '' },
    {}, ...
]} 
```

然后使用[d3.nest()](https://github.com/mbostock/d3/wiki/Arrays#wiki-_nest)

```
organismNest = d3.nest()
    .key(function(d){return d.Rank_Order;})
    .key(function(d){return d.Rank_Family;})
    .key(function(d){return d.Rank_Genus;})
    .key(function(d){return d.Rank_Species;})
    .entries(json.Organism); 
```

这返回：

```
{
key: "Hemiptera"
  values: [
    {
      key: "Cicadidae"
      values: [
        {
          key: "Pauropsalta "
          values: [
            {
              key: "siccanus"
              values: [
                       Rank_Family: "Cicadidae"
                       Rank_Genus: "Pauropsalta "
                       Rank_Order: "Hemiptera"
                       Rank_Species: "siccanus"
                       AnotherOriginalDataKey: "original data value"

etc etc, nested and lovely 
```

这返回的内容与我在上面问题中描述为我想要的格式的它们的数组非常相似，但有一些区别。特别是，没有所有封闭的 ROOT 元素，而且我最初想要的键是“name”和“children”。nest() 分别将键返回为“key”和“values”。这些替代键很容易在 d3.js 中使用，只需定义适当的数据访问器函数（基本 d3 概念）......但这超出了问题的原始范围......希望对某人也有帮助

# php - 正则表达式在逗号后添加空格，但当逗号是千位分隔符时不添加空格？

> ID：12126917
> 
> 赞同：0
> 
> 时间：2012-08-26T01:02:17.077
> 
> 标签：php, regex, punctuation

以简单的方式使用 php regexp，是否可以修改字符串以在单词后面的逗号和句点后添加空格，但不能在逗号或句点前后添加一个数字，例如 1,000.00？

```
String,looks like this with an amount of 1,000.00 
```

需要改成...

```
String, looks like this with an amount of 1,000.00 
```

这当然应该允许多个实例......这是我现在使用的，但它导致数字返回为 1, 000\. 00

```
$punctuation = ',.;:';
$string = preg_replace('/(['.$punctuation.'])[\s]*/', '\1 ', $string); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:08:03.607

你可以`'/(?<!\d),|,(?!\d{3})/'`用`', '`.

就像是：

```
$str = preg_replace('/(?<!\d),|,(?!\d{3})/', ', ', $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T10:27:04.520

我正在寻找这个正则表达式。

这篇文章对我很有帮助，我改进了 Qtax 提出的解决方案。

这是我的：

```
$ponctuations = array(','=>', ','\.'=>'. ',';'=>'; ',':'=>': ');
foreach($ponctuations as $ponctuation => $replace){
    $string = preg_replace('/(?<!\d)'.$ponctuation.'(?!\s)|'.$ponctuation.'(?!(\d|\s))/', $replace, $string);
} 
```

使用此解决方案，“sentence like: this”将不会更改为“sentence like: this”（带有 2 个空格）

就这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T21:24:46.573

虽然这已经很老了，但我一直在寻找同样的问题，在理解了给出的解决方案后，我得到了不同的答案。

这个正则表达式不是检查逗号之前的字符，而是检查逗号之后的字符，因此它可以限制为字母字符。此外，这不会创建逗号后有两个空格的字符串。

```
$punctuation = ',.;:';
$string = preg_replace("/([$punctuation])([a-z])/i",'\1 \2', $string); 
```

测试脚本可以在[这里](http://sandbox.onlinephpfunctions.com/code/97fc8b90fc010a06ee46930666ab30c557aaf9c3)检查。

# c# - 应用程序注册失败，因为文件位于网络共享上。在注册包之前将文件复制到本地计算机

> ID：12126918
> 
> 赞同：11
> 
> 时间：2012-08-26T01:02:26.367
> 
> 标签：c#, windows

我正在使用这些示例来构建 Windows 8 应用程序：

[http://code.msdn.microsoft.com/windowsapps/Getting-started-with-C-and-41e15af5](http://code.msdn.microsoft.com/windowsapps/Getting-started-with-C-and-41e15af5)

（注意：该链接已过时，这可能是正确的链接：[C# 和 Visual Basic 入门：Hello World 示例](http://code.msdn.microsoft.com/windowsapps/Getting-started-with-C-and-aec28023) ）

当我尝试运行 Windows 8 设备模拟器时，我收到此错误：

> 错误 1 ​​错误：DEP0700：应用注册失败。拒绝从文件注册的请求：//psf/Home/Desktop/Getting%20started%20with%20C#%20and%20Visual%20Basic%20Hello%20World%20and%20Blog%20reader%20samples%20(1)/C#/ HelloWorld_Part1/bin/Debug/AppX/AppxManifest.xml，因为这些文件位于网络共享上。在注册包之前将文件复制到本地计算机。(0x80073cf9) HelloWorld_Part1

我在 Mac 上使用 Parallels。哪个文件夹不是网络共享？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-12-28T11:51:51.733

我正在将 Parallels 与 Windows 10 映像和 VS Community 2013 一起使用。我用上面@tempy 提出的解决方案解决了这个问题：在启动配置中选择远​​程主机并在以下屏幕中写入 localhost，当它询问机器名称时。我能够像往常一样运行、调试、设置断点

**对于 Visual Studio 2015：**

*   右键单击项目
*   选择属性
*   选择调试设置
*   在*开始选项下*
    *   将*目标设备*设置为“远程机器”
    *   将*远程机器*设置为“localhost”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T23:05:57.407

我将文件复制到 C:\inpetpub\wwwroot 并从那里运行它们。您不能从 pdf 运行项目。VS 2012 无法在网络共享上运行文件。我猜 Paralells 在一种网络共享上获取 Mac 文件。

# random - 来自 C++ 种子的确定性随机字节/字符串生成器

> ID：12126920
> 
> 赞同：0
> 
> 时间：2012-08-26T01:02:49.653
> 
> 标签：random

我想要一个函数，给定一个种子字符串和一个字节数 X，它将输出一个长度为 X 的伪随机字符串。但它应该确定地执行此操作。这是出于加密/解密目的，因此确定性部分很重要。我不知道从哪里开始寻找这样的东西，因为我几乎没有任何密码学知识。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:10:23.313

编码密码学最重要的规则是永远不要自己动手。使用现有的、经过良好测试和审查的库。即使您了解算法和理论，也有太多方法可以搞砸。

无论如何，您正在寻找的东西称为流密码。

# java - JMenu 子菜单小箭头图标指示器

> ID：12126922
> 
> 赞同：0
> 
> 时间：2012-08-26T01:03:44.360
> 
> 标签：java, swing, submenu, jmenu, jmenubar

有谁知道如何控制出现在 JMenu 子菜单上的小箭头的显示？

我可以改变它吗？我可以禁用它吗？我可以移动它吗？

另外，我注意到只有当它们是其他 JMenu 的子菜单时，这个箭头才会出现在顶级 JMenu 上。这种不一致让我很恼火，因为我在 JMenuBar 的根目录上混合了 JMenuItem 和 JMenu，所以我希望它总是能指出这一点。无论如何也要这样做？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T03:46:39.803

看一下`Menu.arrowIcon`UI 属性

![没有箭头](../Images/cd31fc25cf69f4e064611ac12b4b7fb1.png)

（感谢 AndrewThompson 的测试代码）。

这样做会影响应用修改后创建的所有菜单。

所以在你初始化 Look and Feel 之后，在你创建任何菜单调用之前`UIManager.getLookAndFeelDefaults().put("Menu.arrowIcon", null);`

我只想说我认为这是一个糟糕的主意，并且会极力阻止你这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T02:50:20.063

> 只有当它们是其他 JMenu 的子菜单时，此箭头才会出现在顶级 JMenu 上。

在这里使用 Metal 的外观看起来（单调地）一致。

![使用 Metal PLAF 的菜单和子菜单箭头](../Images/35e15ed812da9de288a47d814aa48994.png)

```
import javax.swing.*;

public class MenuArrows {

    MenuArrows() {
        JMenuBar mb = new JMenuBar();

        JMenu root1 = new JMenu("Root Menu 1"); 
        JMenu root2 = new JMenu("Root Menu 2"); 

        addSubMenus(root1, 5);
        addSubMenus(root2, 3);

        mb.add(root1);
        mb.add(root2);

        JOptionPane.showMessageDialog(null, mb);
    }

    public void addSubMenus(JMenu parent, int number) {
        for (int i=1; i<=number; i++) {
            JMenu menu = new JMenu("Sub Menu " + i);
            parent.add(menu);

            addSubMenus(menu, number-1);
            addMenuItems(menu, number);
        }
    }

    public void addMenuItems(JMenu parent, int number) {
        for(int i=1; i<=number; i++) {
            parent.add(new JMenuItem("Item " + i));
        }
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                new MenuArrows();
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

# rdf - 快速启动语义网的最佳 rdf 数据库

> ID：12126923
> 
> 赞同：5
> 
> 时间：2012-08-26T01:04:02.647
> 
> 标签：rdf, semantics, sparql

希帕尔！我是语义网的新手。我想选择一个符合**资源描述框架**并支持**SPARQL**的 RDF 数据库。有 4store、AllegroGraph 等。哪个更好，更容易上手，并且有很好的文档（在 Ubuntu 中使用 Python），用于构建图像搜索的语义网络. 最好显示商店资源的可视化图表。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T21:44:09.733

[OpenRDF Sesame](http://www.openrdf.org/)是 RDF 的开源框架，它提供完整的 SPARQL 1.1 支持，并具有对多个三元存储解决方案的供应商中立访问 API。尽管 Sesame 是 Java 语言，但可以通过 Python 轻松访问它（请参阅[Jeni Tennisson 的这篇博客文章以](http://www.jenitennison.com/blog/node/153)获取快速演练）。

Sesame 是一个 Java Web 应用程序，设置只需安装 Tomcat 并部署 Sesame WAR 文件。有关安装、配置和使用说明，请参阅[Sesame 用户文档。](http://www.openrdf.org/doc/sesame2/users/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T16:09:04.997

在 ubuntu 上设置 Virtuoso 非常简单：

[http://ods.openlinksw.com/wiki/main/Main/VOSUbuntuNotes](http://ods.openlinksw.com/wiki/main/Main/VOSUbuntuNotes)

```
sudo aptitude install  virtuoso-opensource 
```

有很多功能，非常适合初学者

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T22:55:19.137

[Stardog](http://stardog.com)非常易于设置、解压缩，您就完成了，并为 Sesame 和 Jena 提供 API 绑定。有一个用于 Stardog 的 HTTP 协议的[Python 库](https://github.com/huyphan/pystardog)和一个即将推出的 Javascript 版本。它还不支持 SPARQL 1.1，这将在几周后到期，但它支持对 RDFS 和所有三个 OWL2 配置文件的推理支持。

# php - php - 测试 SESSION 用户是否查看过页面 X？

> ID：12126924
> 
> 赞同：0
> 
> 时间：2012-08-26T01:04:31.110
> 
> 标签：php, mysql, session

我有一个简单的通知系统，它应该像通知系统一样通知用户是否有新评论发布到用户的页面。

为了构建它，我计划在`hasViewed`页面数据库中为合并到通知系统中的每个页面提供一个附加变量，然后简单地将值吐出 where `hasViewed = 0`。

唯一的问题是，如何测试`SESSION`用户是否查看了页面？谢谢你。

# iphone - 从 NSDate 获取时区名称

> ID：12126932
> 
> 赞同：5
> 
> 时间：2012-08-26T01:06:12.953
> 
> 标签：iphone, objective-c, ios

有什么方法可以从 NSDate 获取时区缩写（例如 UTC、EET）？我从字符串中获取 NSDate，例如 2012-08-26 02:54:50 +0200 并且需要显示该日期的时区。

目前正在这样做：

```
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setDateFormat: @"yyyy-MM-dd HH:mm:ssZZZ"];
NSDate *isoDate = [formatter dateFromString: isoTime.value];
NSInteger offset = [[NSTimeZone defaultTimeZone] secondsFromGMTForDate: isoDate];
NSTimeZone *timeZone = [NSTimeZone timeZoneForSecondsFromGMT: offset]; 
```

但我得到的是 GMT+03:00 时区缩写，但它应该是 EET。有什么办法得到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T01:30:41.100

An`NSDate`与时区无关；它本身没有时区。因此，您无法从中获取时区。

`secondsFromGMTForDate:`从指定日期的 GMT 返回该时区的偏移量（在您的情况下为默认时区）。它返回的信息`NSTimeZone`可能取决于日期（例如，如果您的时区支持夏令时），而不是日期。

# xcode - 将对象添加到数组时遇到问题

> ID：12126942
> 
> 赞同：0
> 
> 时间：2012-08-26T01:08:52.157
> 
> 标签：xcode, ios5.1

在下面的代码中，我试图将对象添加到数组中。没有错误，但也没有添加对象。很抱歉问了这个非常基本的问题。需要帮忙

NS 对象定义
//DataDefinition.h #import

```
@interface DataDefinition : NSObject
@property (nonatomic, retain) NSString *dataHeader;
@property (nonatomic, retain) NSMutableArray *dataDetails;

@end 
```

数据定义实现

```
#import "DataDefinition.h"
@implementation DataDefinition

@synthesize dataHeader;
@synthesize dataDetails;

@end 
```

显示标题部分 //DataDisplay.h #import

```
#import "DataDefinition.h"

@interface DataDisplay : UITableViewController
@property (strong, nonatomic) NSMutableArray *dataSet;
@property (strong, atomic) DataDefinition *individualData;

@end 
```

显示实施部分

```
 //DataDisplay.m
 #import "DataDisplay.h"

 @interface DataDisplay ()
 @end

 @implementation DataDisplay
 @synthesize dataSet;
 @synthesize individualData;

- (void)viewDidLoad
{

    [super viewDidLoad];

    individualData.dataHeader  = @"Header1";
    individualData.dataDetails = [[NSMutableArray alloc] initWithObjects:@"Header1-Detail1", @"Header1-Detail2", @"Header1-Detail3", nil];

    //This didnot add
    [dataSet addObject:individualData];
    NSLog(@"Count of objects is %d:",[dataSet count]);

    //Nor did this
    dataSet = [[NSMutableArray alloc] initWithObjects:individualData, nil];
    NSLog(@"Count of objects is %d:",[dataSet count]);

    self.title = @"DataDisplay";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:02:56.557

问题是它`individualData`实际上从未设置为实例化对象（换句话说，它从未被*初始化*）。

由于 Objective-C 关于向 nil 发送消息的无错误策略，这些疏忽很常见；这是完全合法且通常有用的原则。这意味着你的代码永远不会抱怨，直到你尝试将它传递给某个方法，如果它看到 nil 就会崩溃。不幸的是，您使用的是`initWithObjects`，它只是将 nil 视为（空）列表的末尾。如果您改为尝试使用`[NSArray arrayWithObject:individualData]`，您可能会看到一个错误，提示您使用 nil 而不是对象。

请注意，在 nil 上设置属性特别棘手，因为*看起来*您只是在处理 C-syle *lvalue*，而实际上它在运行时转换为消息发送调用：

```
individualData.dataHeader  = @"Header1"; 
// is *literally* the same as:
[individualData setDataHeader:@"Header1"]; 
```

您可以选择解决方案。“便宜”的方法是简单地在那里初始化它。“更好”的方式（通常）是惰性实例化（即在 getter 中）。由于该对象被标记为*atomic*，您可能需要让编译器为您编写 getter，并在 viewDidLoad （或 awakeFromNib、initWithCoder 或类似的）中对其进行初始化：

```
- (void)viewDidLoad
{

    [super viewDidLoad];
    self.individualData = [[DataDefinition alloc] init];
    ... 
```

# vb.net - 使用类和列表

> ID：12126943
> 
> 赞同：1
> 
> 时间：2012-08-26T01:09:08.260
> 
> 标签：vb.net, class, types

我正在尝试声明类型 Product 和类型 Productlist 谁能告诉我这是否是正确的方法？

```
Public Class Product
  Public Property name As String
  Public Property price As Double
End Class
Public Class ProductsList
  Public Property items() As New List(Of Product)
End Class 
```

我的意思是我可以写吗

```
Public Class Product
  Public Property name As String
  Public Property price As Double
End Class

Public property ProductsList as new List(Of Product) 
```

反而 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T03:09:21.137

第一种方法似乎是更好的做法。你可以这样编码：

```
Dim p as new Product()
p.name = "Apple"
p.price = 1

Dim pList as new ProductList()
pList.Items.Add(p) 
```

第二种方法的问题是你会有一个包装类，例如 DemoWrapper：

```
Public Class DemoWrapper

   Public Class Product
      Public Property name As String
      Public Property price As Double
    End Class

    Public ProductsList as new List(Of Product)

End Class 
```

你的代码最终会是这样的：

```
Dim p as new DemoWrapper.Product() 
```

# django - 在多个环境中使用 collectstatic

> ID：12126945
> 
> 赞同：1
> 
> 时间：2012-08-26T01:10:15.137
> 
> 标签：django, heroku, amazon-s3

我在 Heroku 上有一个 Django 应用程序，带有登台和生产环境。静态文件托管在 S3 上。我正在简化我的部署过程，并计划在我手动工作后设置 fabfile。

如何配置 collectstatic 以推送到多个地方？如果我在本地运行它，它会使用我的开发设置（使用本地 STATIC_ROOT）。如果我在我的 Heroku 应用程序之一上运行它（heroku run ./manage.py collectstatic），那么它就无法抓取文件（因为 .slugignore 确保它们永远不会被推送到 Heroku）。如果我在我的 Procfile 中包含 collectstatic，这同样适用。

我也在使用 django-pipeline，虽然它还没有做太多，因为我被困在 collectstatic 位上。

**更新** 为了回答 Marat 的问题，我尝试将设置文件作为选项传递给 collectstatic: `./manage.py collectstatic --settings=project.settings.prod`，但出现错误：`Unknown command: 'collectstatic'`我检查了服务器，但已安装的应用程序确实包含 django.contrib.staticfiles 并且我也可以远程运行 collectstatic，所以我不确定是什么原因造成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T19:22:04.980

您可以设置环境变量 DJANGO_SETTINGS_MODULE 这样您就不需要在任何地方指定 --settings ：

```
heroku config:set DJANGO_SETTINGS_MODULE=project.settings.prod 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:05:48.987

我刚刚回答了关于[从 Heroku 上传媒体到 Amazon S3](https://stackoverflow.com/questions/13214507/upload-media-from-heroku-to-amazon-s3/14437249#14437249)的类似问题。如果您自定义设置以考虑环境变量，则可以在推送到 Heroku 时使用本地文件系统存储后端和 S3 存储后端。这将在编译您的 slug 时收集并上传您的静态文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T04:56:12.600

首先，如果您要通过 CloudFront 提供静态服务，您可以使用自定义源并始终使用本地 STATIC_ROOT。实际上它比 S3 源有一些优势，例如 gzip 支持。

您可以做的另一件好事是将环境相关设置放在单独的文件中，然后将其导入 settings.py，例如：

local_settings.py（不在项目存储库中，但您可以拥有 local_settings.py.example）：

```
#environment dependent settings
DATABASES = { .. }
CACHES = { .. }
STATIC_ROOT = 'your_path/static' 
```

设置.py：

```
import local_settings 
```

# mysql - 通过 Linux 命令行连接到 SphinxQL

> ID：12126948
> 
> 赞同：26
> 
> 时间：2012-08-26T01:10:45.917
> 
> 标签：mysql, command-line, search-engine, sphinx

我正在尝试以这种方式通过 Linux**命令行连接到****SphinxQL**服务器：

 **```
> mysql -P 9306

ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO) 
```

我的 Sphinx 配置文件有 2 个监听条目：

```
listen                  = 9312
listen                  = 9306:mysql41 
```

searchd 守护进程正在运行：

```
> ps ax | grep searchd
10727 ?        S      0:00 /usr/local/sphinx/bin/searchd
10728 ?        Sl     0:00 /usr/local/sphinx/bin/searchd 
```

常规搜索查询完美运行：

```
> /usr/local/sphinx/bin/search StackOverflow | more

Sphinx 2.0.4-release (r3135)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file '/usr/local/sphinx/etc/sphinx.conf'...
index 'test1': query 'StackOverflow ': returned 2 matches of 2 total in 0.009 sec

displaying matches:
1\. document=1788212, weight=1797
        id=1788212
... 
```

那么，我做错了什么？如何访问 SphinxQL 控制台？

任何提示将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-26T23:25:49.060

'mysql' 客户端，如果检测到 mysql 在 unix-socket 上运行，将完全忽略 -P 参数。所以真的，即使你要求 sphinxQL 端口，你正在连接到 mysql

利用

```
mysql -P9306 --protocol=tcp 
```

告诉客户端忽略套接字。

专家提示：

```
mysql -P9306 --protocol=tcp --prompt='sphinxQL> ' 
```

这可以作为一个有用的持续提醒您连接到 sphinx 而不是 mysql :)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-25T11:21:21.260

为我工作：

```
mysql -P 9306 -h 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T03:03:31.843

我最近遇到了这个。通过注释掉`listen`未指定 MySQL 的配置，我能够通过 mysql shell 进入 Sphinx。如果您仍需要`searchd`通过 API 访问，这可能对您不起作用。**

# asp.net - 从gridview中的选定行在外部文本框中显示数据

> ID：12126952
> 
> 赞同：0
> 
> 时间：2012-08-26T01:13:37.480
> 
> 标签：asp.net

我正在使用模板字段创建一个网格视图。我在网格视图中使用模板字段插入了一个链接按钮。GridView 之外有 4 个文本框。我想在单击链接按钮时选择行并将所选行的数据放在文本框中。我什至为此使用了行命令，但它不起作用......我使用的语法是.：

```
<asp:GridView ID="gview" AutoGenerateColumns="False" runat="server" CellPadding="4" 
        ForeColor="#333333" GridLines="None" onrowcommand="gview_RowCommand">
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
<Columns>
<asp:TemplateField HeaderText="Book Name">
<ItemTemplate>
<%#Eval("book_name") %>
</ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Book Author">
<ItemTemplate>
<%#Eval("book_author") %>
</ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Book Publisher">
<ItemTemplate>
<%#Eval("book_Publisher") %>
</ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Book Price">
<ItemTemplate>
<%#Eval("book_Price") %>
</ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Update">
<ItemTemplate>

<asp:LinkButton ID="lnkDet" CommandName="cmdBind" CommandArgument="<%# ((GridViewRow) Container).RowIndex %>"  runat="server" CausesValidation="false">View Details</asp:LinkButton>
</ItemTemplate>
</asp:TemplateField>   

</Columns> 
```

和文件后面的代码：

```
protected void gview_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "cmdBind")
    {
        LinkButton lb = (LinkButton)e.CommandSource;
        int index = Convert.ToInt32(lb.CommandArgument);

        //Bind values in the text box of the pop up control
        txt_name.Text = gview.Rows[index].Cells[0].Text;
        txt_author.Text = gview.Rows[index].Cells[1].Text;
        txt_price.Text = gview.Rows[index].Cells[2].Text;
    }
} 
```

谁能告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:18:41.410

我认为这有效：

```
protected void gview_RowCommand(object sender, GridViewCommandEventArgs e){
if (e.CommandName == "cmdBind")
{

    int index = Convert.ToInt32(e.CommandArgument);

    //Bind values in the text box of the pop up control
    txt_name.Text = gview.Rows[index].Cells[0].Text;
    txt_author.Text = gview.Rows[index].Cells[1].Text;
    txt_price.Text = gview.Rows[index].Cells[2].Text;
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T10:45:16.420

以您的方式尝试它并非不可能，但只为每一行使用内置的选择按钮可能会更容易。这样你就可以使用 gridview 的 SelectedIndexChanged 事件：

```
protected void gview_SelectedIndexChanged(object sender, EventArgs e)
{
    txt_name.Text = gview.SelectedRow.Cells[0].Text;
    txt_author.Text = gview.SelectedRow.Cells[1].Text;
    txt_price.Text = gview.SelectedRow.Cells[2].Text;
} 
```

# javascript - 删除 WinJS ListView 中所有项目的最快方法是什么？

> ID：12126960
> 
> 赞同：1
> 
> 时间：2012-08-26T01:14:35.637
> 
> 标签：javascript, windows-8, winjs

我想删除 WinJS ListView 中的所有项目。我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T15:04:57.310

我更喜欢这种方式：

```
list.splice(0, list.length); 
```

第三个参数是可选的...

[http://msdn.microsoft.com/en-us/library/windows/apps/hh700810.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700810.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T01:30:51.053

最简单的方法是将 itemDataSource 属性设置为 null。

```
listview.winControl.itemDataSource = null; 
```

当您需要重新开始添加新项目时，只需创建一个新的 Binding.List 并填充它。您还可以创建一个新的空绑定列表并分配...

```
var newList = new WinJS.Binding.List([]);
listview.winControl.itemDataSource = newList; 
```

# python - 有哪些可供选择的 Python 编程环境？

> ID：12126964
> 
> 赞同：0
> 
> 时间：2012-08-26T01:15:22.017
> 
> 标签：python, development-environment

我想知道是否有比终端 shell 更适合初学者的环境来编写 Python。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T01:35:28.780

我的建议：

*   我使用[DreamPie](http://dreampie.sourceforge.net/)作为我的 Python shell。DreamPie 的一些有用功能：自动完成属性和文件名，自动显示函数参数和文档，自动折叠长输出，让您将历史记录保存`session`为 HTML 文件，当您在函数后按空格时自动添加括号和可选引号. 它还将窗口划分为一个代码框（您编写代码的地方）和一个历史框（包含所有先前的命令及其输出）——在我看来，这是一个非常方便的概念。

*   `DreamPie`是一个很棒的 shell，但 shell 只适用于您将使用一次并丢弃的小脚本。我所知道的用于编写 Python 程序/项目的最佳 IDE 是[Eclipse](http://www.eclipse.org/) IDE中的[Pydev](http://pydev.org/)插件。它具有我见过的最好的 Python 自动完成功能、良好的调试器、令牌浏览器、Django 集成、Unittest 集成、自动导入、易于使用的重构选项（重命名、提取方法、内联变量、提取变量等）等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T01:27:20.477

看看各种

*   [蟒蛇壳](https://stackoverflow.com/questions/277170/is-there-a-good-python-gui-shell)
*   [编辑](http://wiki.python.org/moin/PythonEditors)
*   [IDE](http://wiki.python.org/moin/IntegratedDevelopmentEnvironments)

另请参阅[Python 使用什么 IDE？](https://stackoverflow.com/questions/81584/what-ide-to-use-for-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T01:21:53.077

不要期望您从与 Python 相关的经典编程语言 IDE 中获得什么。由于语言的动态特性以及为了弄清楚诸如自动完成、参数信息或成员之类的细节，IDE 在某些时候必须运行代码 - 它可以因为可能的副作用，所以不能这样做。

我自己正在使用 Emacs 和 Sublime Text 2。

# c++ - OpenCV - 向类成员崩溃程序添加变量

> ID：12126966
> 
> 赞同：0
> 
> 时间：2012-08-26T01:16:47.057
> 
> 标签：c++, memory-management, opencv, stdvector

我有点头疼，试图理解为什么简单地向 OpenCV 的 Point_ 类添加一个成员变量会使我的程序崩溃。这是 OpenCV 附带的用于存储 2D 点的类之一。如果编辑 opencv2/core/core.hpp 并向类 Point_ 添加成员变量，则程序崩溃。将我的成员变量注释视为注释：

```
template<typename _Tp> class CV_EXPORTS Point_
{
public:
typedef _Tp value_type;

// various constructors
Point_();
Point_(_Tp _x, _Tp _y);
Point_(const Point_& pt);
Point_(const CvPoint& pt);
Point_(const CvPoint2D32f& pt);
Point_(const Size_<_Tp>& sz);
Point_(const Vec<_Tp, 2>& v);

Point_& operator = (const Point_& pt);
//! conversion to another data type
template<typename _Tp2> operator Point_<_Tp2>() const;

//! conversion to the old-style C structures
operator CvPoint() const;
operator CvPoint2D32f() const;
operator Vec<_Tp, 2>() const;

//! dot product
_Tp dot(const Point_& pt) const;
//! dot product computed in double-precision arithmetics
double ddot(const Point_& pt) const;
//! checks whether the point is inside the specified rectangle
bool inside(const Rect_<_Tp>& r) const;

_Tp x, y; //< the point coordinates
//OCR Additions
bool iAddedThisButItCrashesRemovingMeMakesItWork;
}; 
```

它不仅仅是添加一个布尔值。它可以是像“int i”这样的成员变量。

```
BoundingBox(vector<vector<cv::Point> > &contourPoints, vector<Vec4i> &hierarchy, Mat &imgSrc)
{
    currentContour=0;
    nextContour=0;
    maxContour=0;
    //Is is related to the shallow copy???
    this->contourPoints= contourPoints;  //<----- starts crashing here
    this->hierarchy=hierarchy;
    this->imgSrc = imgSrc;
} 
```

所以我得到的运行时异常是：

“调试断言失败！” “表达式：向量迭代器不可解引用”

我是WTF。如果有人有任何想法，请告诉我。

附加信息（堆栈跟踪）：

```
>   msvcp100d.dll!std::_Debug_message(const wchar_t * message=0x00fac0b0, const wchar_t * file=0x00fabb60, unsigned int line=70)  Line 15   C++
OCR.exe!std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > >::operator*()  Line 70 + 0x14 bytes    C++
OCR.exe!std::_Uninit_copy<std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > >,cv::Point_<int> *,std::allocator<cv::Point_<int> > >(std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > > _First={x=-1414812757 y=-17891602 iAddedThisButItCrashesRemovingMeMakesItWork=false }, std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > > _Last={x=-33686019 y=-1414812757 iAddedThisButItCrashesRemovingMeMakesItWork=true }, cv::Point_<int> * _Dest=0x00b51520, std::allocator<cv::Point_<int> > & _Al={...}, std::_Nonscalar_ptr_iterator_tag __formal={...})  Line 376 + 0x8 bytes   C++
OCR.exe!std::_Uninitialized_copy<std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > >,cv::Point_<int> *,std::allocator<cv::Point_<int> > >(std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > > _First={x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true }, std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > > _Last={x=-33686019 y=-1414812757 iAddedThisButItCrashesRemovingMeMakesItWork=true }, cv::Point_<int> * _Dest=0x00b51070, std::allocator<cv::Point_<int> > & _Al={...})  Line 414 + 0x73 bytes    C++
OCR.exe!std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > >::_Ucopy<std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > > >(std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > > _First={x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true }, std::_Vector_const_iterator<std::_Vector_val<cv::Point_<int>,std::allocator<cv::Point_<int> > > > _Last={x=-33686019 y=-1414812757 iAddedThisButItCrashesRemovingMeMakesItWork=true }, cv::Point_<int> * _Ptr=0x00b51070)  Line 1318 + 0x58 bytes   C++
OCR.exe!std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > >::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > >(const std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > & _Right=[99]({x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=119 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=118 y=89 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=116 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=92 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=93 y=113 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=113 y=91 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=114 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=111 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=90 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=91 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=93 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=94 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=96 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=97 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=99 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=100 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=102 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=103 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=105 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=106 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=108 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=109 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=111 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=112 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=117 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=117 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },...,...))  Line 539 + 0x57 bytes  C++
OCR.exe!std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > >::construct<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > &>(std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _Ptr=0x00b93b40 [0](), std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > & _Val=[99]({x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=119 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=118 y=89 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=116 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=92 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=93 y=113 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=113 y=91 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=114 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=111 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=90 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=91 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=93 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=94 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=96 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=97 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=99 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=100 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=102 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=103 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=105 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=106 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=108 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=109 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=111 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=112 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=117 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=117 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },...,...))  Line 208 + 0x3c bytes   C++
OCR.exe!std::_Cons_val<std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > >,std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > >,std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > &>(std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > & _Alval={...}, std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _Pdest=0x00b93b40 [0](), std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > & _Src=[99]({x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=119 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=118 y=89 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=116 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=92 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=93 y=113 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=113 y=91 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=114 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=111 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=90 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=91 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=93 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=94 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=96 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=97 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=99 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=100 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=102 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=103 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=105 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=106 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=108 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=109 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=111 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=112 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=117 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=117 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },...,...))  Line 281   C++
OCR.exe!std::_Uninit_copy<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > *,std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > *,std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > >(std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _First=0x00b4d570 [99]({x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=119 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=118 y=89 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=116 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=92 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=93 y=113 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=113 y=91 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=114 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=111 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=90 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=91 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=93 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=94 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=96 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=97 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=99 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=100 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=102 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=103 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=105 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=106 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=108 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=109 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=111 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=112 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=117 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=117 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },...,...), std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _Last=0x00b4d7dc [0](), std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _Dest=0x00b93b40 [0](), std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > & _Al={...}, std::_Nonscalar_ptr_iterator_tag __formal={...})  Line 376 + 0x11 bytes C++
OCR.exe!std::_Uninitialized_copy<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > *,std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > *,std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > >(std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _First=0x00b4d570 [99]({x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=119 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=118 y=89 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=116 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=92 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=93 y=113 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=113 y=91 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=114 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=111 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=90 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=91 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=93 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=94 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=96 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=97 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=99 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=100 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=102 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=103 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=105 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=106 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=108 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=109 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=111 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=112 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=117 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=117 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },...,...), std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _Last=0x00b4d7dc [0](), std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _Dest=0x00b93b40 [0](), std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > & _Al={...})  Line 414 + 0x33 bytes   C++
OCR.exe!std::vector<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > >,std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > >::_Ucopy<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > *>(std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _First=0x00b4d570 [99]({x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=119 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=118 y=89 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=116 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=92 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=93 y=113 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=113 y=91 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=114 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=111 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=90 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=91 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=93 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=94 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=96 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=97 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=99 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=100 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=102 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=103 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=105 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=106 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=108 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=109 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=111 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=112 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=117 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=117 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },...,...), std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _Last=0x00b4d7dc [0](), std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > * _Ptr=0x00b93b40 [0]())  Line 1318 + 0x18 bytes  C++
OCR.exe!std::vector<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > >,std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > >::operator=(const std::vector<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > >,std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > > & _Right=[31]([99]({x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=119 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=118 y=89 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=116 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=92 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=93 y=113 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=113 y=91 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=114 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=111 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=90 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=91 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=93 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=94 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=96 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=97 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=99 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=100 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=102 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=103 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=105 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=106 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=108 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=109 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=111 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=112 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=117 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=117 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },...,...),...,...))  Line 739 + 0x1d bytes    C++
OCR.exe!BoundingBox::BoundingBox(std::vector<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > >,std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > > & contourPoints=[31]([99]({x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=119 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=118 y=89 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=116 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=92 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=93 y=113 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=113 y=91 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=114 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=111 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=90 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=91 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=93 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=94 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=96 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=97 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=99 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=100 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=102 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=103 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=105 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=106 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=108 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=109 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=111 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=112 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=117 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=117 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },...,...),...,...), std::vector<cv::Vec<int,4>,std::allocator<cv::Vec<int,4> > > & hierarchy=[31]({...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...}), cv::Mat & imgSrc={...})  Line 29  C++
OCR.exe!OCRBase::processImage(std::vector<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > >,std::allocator<std::vector<cv::Point_<int>,std::allocator<cv::Point_<int> > > > > & contourPoints=[31]([99]({x=121 y=87 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=119 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=118 y=89 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=116 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=92 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=93 y=113 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=113 y=91 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=90 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=114 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=111 y=88 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=88 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=90 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=91 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=93 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=94 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=96 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=97 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=99 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=100 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=102 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=103 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=105 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=106 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=108 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=109 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=111 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=112 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=114 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=115 y=110 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=110 y=117 iAddedThisButItCrashesRemovingMeMakesItWork=true },{x=117 y=112 iAddedThisButItCrashesRemovingMeMakesItWork=true },...,...),...,...), std::vector<cv::Vec<int,4>,std::allocator<cv::Vec<int,4> > > & hierarchy=[31]({...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...},{...}), cv::Mat & imgSrc={...})  Line 10 + 0x3a bytes    C++
OCR.exe!main(int argc=2, char * * argv=0x00b4d228)  Line 35 C++
OCR.exe!__tmainCRTStartup()  Line 555 + 0x19 bytes  C
OCR.exe!mainCRTStartup()  Line 371  C 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T03:41:00.523

要解决此问题，请改用此数据类型

```
Vector<cv::mat> 
```

# ruby-on-rails - ruby on rails - heroku postgres - 编码

> ID：12126967
> 
> 赞同：0
> 
> 时间：2012-08-26T01:17:12.347
> 
> 标签：ruby-on-rails, ruby, encoding, heroku

我有一个奇怪的编码问题，或者我做错了简单的方法。也许有人知道会发生什么。信息：我是 ruby​​ on rails 的新手！

我有一系列景观名称，它们有特殊字符，如“äüöéèà...”。在我的表单中，我希望用户选择这些景观的多个项目。所以我从一个包含所有景观名称的 select_tag 开始：

```
<%= select_tag 'model[landscapes][]', options_for_select(AVAILABLE_LANDSCAPES, @landscapes_selected), { :multiple => true, :size =>5, :id => "model_landscapes" } %> 
```

在我的模型中，我将这些名称保存在数据库中，一切正常。我已经有一个大型数据库，其中包含横向字符串中的这些特殊字符。现有景观条目为“ländscape1, lândscape2, blalilü”。我从数据库中保存或获取数据没有问题。在我的带有 mysql 数据库的本地机器上，这工作正常！但是当我在 heroku 上运行我的应用程序时，我遇到了编码问题。当我使用 'â' 之类的字符保存字符串时，它会使用 '\xC3\xA2' 保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:09:05.377

我不知道为什么只有当我在 heroku 上运行我的应用程序时才会出现这个问题！

但是，这对我有用：

我的错误是我将选定的风景作为字符串保存在我的数据库中！

```
serialize :landscapes 
```

将我的风景保存和加载为数组，然后我就没有编码问题了！！！

# magento - magento 结帐时出现 500 内部服务器错误

> ID：12126968
> 
> 赞同：1
> 
> 时间：2012-08-26T01:18:07.447
> 
> 标签：magento, checkout, internal-server-error

每次我尝试在我一直在工作的 magento 网站上以用户身份结帐时，我都会不断收到错误消息。单击结帐按钮或转到 /checkout/onepage 时会发生这种情况。有时它会是一个内部服务器错误，有时它会显示几行手风琴菜单。这仅在我以客户身份登录时发生。以客人身份结账没有问题，结账时注册也没有问题。[您可以在wadjetworldwide.com](http://www.wadjetworldwide.com)查看该网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T04:01:25.210

确保您的 php 文件具有正确的权限。试试 644

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T00:01:20.080

我有一个类似的问题，仅在我使用主题时才显示。最后，在测试了很多东西之后，解决方案是将 php 内存限制从 32 增加到 256MB。

=]

# c# - 在 C# 中解析 JSON 查询

> ID：12126969
> 
> 赞同：0
> 
> 时间：2012-08-26T01:18:12.893
> 
> 标签：c#, .net, json, parsing, json.net

我想用 C# 开发一个网站，它可以解析来自 JSON 查询的数据，以便以后使用它们。到目前为止，我已经找到了所有要使用的库，但是经过多次尝试解析不起作用，我希望得到您的帮助。我使用视觉工作室 2010 专业版。

这是 C# 代码。

```
using System;
using System.Collections.Generic;
using System.Net;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Json;
using System.Text;
using Newtonsoft.Json.Linq;

namespace TwitterFeed
{
public partial class URLReader : System.Web.UI.Page
{
    static string username = null;
    static string result = null;
    static string url = null;
    JsonTextParser parser;
    JsonObject obj;

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void ButtonTest_Click(object sender, EventArgs e)
    {
        username = TextBoxUsername.Text;    // takes the username imported by the user
        if (username == "")
        {
            TextBoxTest.Text = "Please enter a username...";    // informs the user that no username was imported
        }
        else
        {
            url = "JSONQuery.txt";
            try
            {
                WebClient client = new WebClient();     // The methods needed taking the content of the URL
                result = client.DownloadString(url);    // Putting the JSON content of the URL into a string

                JObject obj = JObject.Parse(result);
                Console.WriteLine("name: " + obj["name"]);
            } 
            catch (Exception ex)
            {
                TextBoxTest.Text = ex.Message;
            }
        }
    }
} 
```

}

这是输出中显示的错误：

```
A first chance exception of type 'Newtonsoft.Json.JsonReaderException' occurred in Newtonsoft.Json.DLL 
```

这是 JSON 代码：

```
 {  
   "created_at":"Sun Apr 08 14:51:37 +0000 2012",
   "id":189002564061241344,
   "id_str":"189002564061241344",
   "text":"Another invention from google. http:\/\/t.co\/Fcx13JrJ #google",
   "source":"web",
   "truncated":false,
   "in_reply_to_status_id":null,
   "in_reply_to_status_id_str":null,
   "in_reply_to_user_id":null,
   "in_reply_to_user_id_str":null,
   "in_reply_to_screen_name":null,
   "user":{  
      "id":132681798,
      "id_str":"132681798",
      "name":"Charilaos Eristikos",
      "screen_name":"EristikosTigka",
      "location":"Glasgow, Scotland",
      "url":null,
      "description":"Technology Lives Between Us.",
      "protected":false,
      "followers_count":52,
      "friends_count":133,
      "listed_count":2,
      "created_at":"Tue Apr 13 22:28:19 +0000 2010",
      "favourites_count":1,
      "utc_offset":0,
      "time_zone":"Edinburgh",
      "geo_enabled":false,
      "verified":false,
      "statuses_count":64,
      "lang":"en",
      "contributors_enabled":false,
      "is_translator":false,
      "profile_background_color":"FFFFFF",
      "profile_background_image_url":"http:\/\/a0.twimg.com\/profile_background_images\/209319404\/8.jpg",
      "profile_background_image_url_https":"https:\/\/si0.twimg.com\/profile_background_images\/209319404\/8.jpg",
      "profile_background_tile":true,
      "profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/1632508237\/380352_2437786137920_1049741902_2747933_696669280_n_normal.jpg",
      "profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/1632508237\/380352_2437786137920_1049741902_2747933_696669280_n_normal.jpg",
      "profile_link_color":"00B093",
      "profile_sidebar_border_color":"9E9E9E",
      "profile_sidebar_fill_color":"DDEEF6",
      "profile_text_color":"000000",
      "profile_use_background_image":true,
      "show_all_inline_media":false,
      "default_profile":false,
      "default_profile_image":false,
      "following":null,
      "follow_request_sent":null,
      "notifications":null
   },
   "geo":null,
   "coordinates":null,
   "place":null,
   "contributors":null,
   "retweet_count":0,
   "entities":{  
      "hashtags":[  
         {  
            "text":"google",
            "indices":[  
               52,
               59
            ]
         }
      ],
      "urls":[  
         {  
            "url":"http:\/\/t.co\/Fcx13JrJ",
            "expanded_url":"http:\/\/phys.org\/news\/2012-04-google-floor-app-venue-owners.html",
            "display_url":"phys.org\/news\/2012-04-g\u2026",
            "indices":[  
               31,
               51
            ]
         }
      ],
      "user_mentions":[  

      ]
   },
   "favorited":false,
   "retweeted":false,
   "possibly_sensitive":false
},
{  
   "created_at":"Thu Apr 05 16:24:08 +0000 2012",
   "id":187938685436698624,
   "id_str":"187938685436698624",
   "text":"Very interesting for computing science students http:\/\/t.co\/xp4lq2Y1 #csstudents",
   "source":"web",
   "truncated":false,
   "in_reply_to_status_id":null,
   "in_reply_to_status_id_str":null,
   "in_reply_to_user_id":null,
   "in_reply_to_user_id_str":null,
   "in_reply_to_screen_name":null,
   "user":{  
      "id":132681798,
      "id_str":"132681798",
      "name":"Charilaos Eristikos",
      "screen_name":"EristikosTigka",
      "location":"Glasgow, Scotland",
      "url":null,
      "description":"Technology Lives Between Us.",
      "protected":false,
      "followers_count":52,
      "friends_count":133,
      "listed_count":2,
      "created_at":"Tue Apr 13 22:28:19 +0000 2010",
      "favourites_count":1,
      "utc_offset":0,
      "time_zone":"Edinburgh",
      "geo_enabled":false,
      "verified":false,
      "statuses_count":64,
      "lang":"en",
      "contributors_enabled":false,
      "is_translator":false,
      "profile_background_color":"FFFFFF",
      "profile_background_image_url":"http:\/\/a0.twimg.com\/profile_background_images\/209319404\/8.jpg",
      "profile_background_image_url_https":"https:\/\/si0.twimg.com\/profile_background_images\/209319404\/8.jpg",
      "profile_background_tile":true,
      "profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/1632508237\/380352_2437786137920_1049741902_2747933_696669280_n_normal.jpg",
      "profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/1632508237\/380352_2437786137920_1049741902_2747933_696669280_n_normal.jpg",
      "profile_link_color":"00B093",
      "profile_sidebar_border_color":"9E9E9E",
      "profile_sidebar_fill_color":"DDEEF6",
      "profile_text_color":"000000",
      "profile_use_background_image":true,
      "show_all_inline_media":false,
      "default_profile":false,
      "default_profile_image":false,
      "following":null,
      "follow_request_sent":null,
      "notifications":null
   },
   "geo":null,
   "coordinates":null,
   "place":null,
   "contributors":null,
   "retweet_count":0,
   "entities":{  
      "hashtags":[  
         {  
            "text":"csstudents",
            "indices":[  
               69,
               80
            ]
         }
      ],
      "urls":[  
         {  
            "url":"http:\/\/t.co\/xp4lq2Y1",
            "expanded_url":"http:\/\/googleblog.blogspot.co.uk\/2012\/03\/new-kind-of-summer-job-open-source.html",
            "display_url":"googleblog.blogspot.co.uk\/2012\/03\/new-ki\u2026",
            "indices":[  
               48,
               68
            ]
         }
      ],
      "user_mentions":[  

      ]
   },
   "favorited":false,
   "retweeted":false,
   "possibly_sensitive":false
} 
```

它是 Twitter 的脚本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T02:12:42.410

这不是合法的 json，它包含对象的“列表”。您可以像这样解决问题：

```
result = client.DownloadString(url);    // Putting the JSON content of the URL into a string
result = @"{ ""data"" : ["+result+"]}";

JObject obj = JObject.Parse(result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T02:08:20.457

你的 JSON 很糟糕。
在一些在线 JSON 解析器上检查它，比如[http://json.parser.online.fr/](http://json.parser.online.fr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T02:12:15.933

第 86 行关闭了对象字面量。然后应该是 EOF，但是你有另一个对象文字。你的意思是创建一个数组吗？

# string - 使用批处理从文本文件中提取 IP 地址

> ID：12126971
> 
> 赞同：0
> 
> 时间：2012-08-26T01:19:52.380
> 
> 标签：string, batch-file, trim

我有一个包含如下数据的文本文件：

8 月 21 日 [10.23.5.5] 拆解动态

8 月 18 日 [10.150.1.45] 8 月 21 日 15:28:34

2012 年 8 月 24 日 [10.96.5.10] 2012 年 8 月 21 日 18:58:26

2012 年 8 月 24 日 [10.96.5.10] 2012 年 8 月 22 日 18:58:26

8 月 21 日 [192.168.15.231] 发送邮件[18831]

我需要删除除“[”和“]”包围的 IP 地址之外的所有内容。“[”之前的字符串长度是固定的。“]”之后的字符串长度不同。我尝试在这里使用现有解决方案之一，但未能成功。是否可以使用批处理来完成？谢谢：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T10:30:35.873

直接从命令行：`for /f "tokens=2 delims=[]" %F in (file.txt) do echo %F`. 根据需要重定向。不如 sed/awk 和正则表达式灵活，但它不需要外部工具。

但是，如果您打算将更复杂的东西放在一起，我真的会寻找更强大的工具——除了已经提到的 awk 或 Perl，Win 上的自然选择是 Powershell。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T02:22:35.087

安装一个版本，`sed`如果它还没有在你的系统上。

```
$ sed -r -e 's/^[^[]*\[([^]\]*)].*/\1/' file.txt
10.23.5.5
10.150.1.45
10.96.5.10
10.96.5.10
192.168.15.231 
```

这个 sed 单行“脚本”在从行中删除所有内容后输出每个输入行，但该行的*第一* 组 [] 方括号内的内容除外 - 它不会*检查*这些内容以确保它与 IP 地址匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T02:08:51.137

您将此标记为批处理，所以我假设这是在 Windows 上而不是 linux 上。尽管如此，我强烈建议您访问[Cygwin](http://www.cygwin.com/)的网站并下载一份副本。这将使您可以访问`cat`和`grep`命令，这使这变得更加简单。安装[Cygwin](http://www.cygwin.com/)后，您可以运行以下命令从日志文件中解析出 IP 地址。

`cat your.log | grep -oE '([[:digit:]]{1,3}\.){3}[[:digit:]]{1,3}' > ips.txt`

干杯

# matlab - Hanning window and online FFT

> ID：12126979
> 
> 赞同：3
> 
> 时间：2012-08-26T01:21:26.343
> 
> 标签：matlab, signal-processing, fft

I am learning DSP and I couldn't write a code to calculate and plot these figures (just magnitude of Hanning and triangular windows in frequency domain.) Could anyone please help me with the code?

![window frequency plots](../Images/12645aa87d24578ccd40c2f6b96380d0.png)

I've read something related to online FFT, and, for example, they calculate online FFT with 1024 time steps. I don't understand what is 1024 time steps, and what are the influences of time step value to FFT analysis?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T02:24:29.540

I hope the following piece of code is helpful to you.

```
L = 10;
win1 = hanning(L);
win2 = triang(L);
nfft = 64;
S1 = fft(win1,nfft);
S2 = fft(win2,nfft);
f = 1:nfft/2+1;
plot(f,10*log10(abs(S1(1:nfft/2+1))),'.-',f,10*log10(abs(S2(1:nfft/2+1))),'o-'); 
```

Annotation:

You can put `win1` and `win2` as Time-series signal. `L` is the length of `win1` or `win2`. `nfft` is the length of FFT . if `L < nfft` , then the function `fft()` will add `0` to the rest of `nfft`. If `L > nfft`, then the function `fft()` will interception the length of `L` to equal `nfft`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T03:28:01.230

The frequency of the time steps or samples (Fs), divided by the number of time steps fed the FFT (the FFT length), gives you the frequency steps of the FFT result bins (up to Fs/2).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:35:32.783

Regarding the 1024 "time steps" in your question, that is simply the number of samples that are taken from the time-domain signal.

As to how the 1024 time-domain samples influence the FFT, this involves the sampling frequency that was used to obtain the samples.

Sampling frequency is typically chosen to conform with the Nyquist-Shannon sampling theorem, which basically states that you must sample the time-domain signal at a frequency higher than "2F" if you want to resolve a frequency "F" via the FFT.

As for the Hann (Hanning) and Triangular window codes, they are as follows:

```
Hann window:
for( i=0; i<bufLen; i++ )
   window[i] = 0.5 * ( 1 - cos( 2 * PI * i / (bufLen-1) ) )

Triangular window:
for( i=0; i<bufLen; i++ )
   window[i] = 2/bufLen * ( (bufLen)/2 - abs( i-((bufLen-1)/2) ) ) 
```

...

The plot below is the frequency response of the Triangular window, in dB magnitude.

![Triangular Window Function dB magnitude](../Images/9de9dadee62c0857f8b3ff5607b99b72.png)

The plot below is the frequency response of the Triangular window, but now in linear magnitude.

![Triangular Window Function linear magnitude](../Images/c9520dc09f063495b83a8710d09afed2.png)

You can plot the Hann, Triangular, and many other window functions here: [Plot windows functions](https://sooeet.com/math/fast-fourier-calculator.php)

# actionscript-3 - 在 as3 中获取类型未找到错误实现源

> ID：12126982
> 
> 赞同：2
> 
> 时间：2012-08-26T01:22:34.603
> 
> 标签：actionscript-3, import, implementation

我正在尝试编译并运行本文中的演示：

[Flash 通过 osc 与 max msp 对话](http://blog.derhess.de/2011/08/16/flash-talks-to-max-msp-via-osc/comment-page-1/#comment-3193)

我正在使用 Flash Develop 和 Flex SDK 以及最新版本的 air。

当我运行演示：“as3_MaxFlashHarmony”时，我收到一个错误，我不知道如何修复。整个项目的源码在这里：

[该项目](http://code.google.com/p/derhess/source/browse/trunk/AS3/de/derhess/projects/#projects%2Fair_MaxFlashHarmony)

但特别是我得到的错误说：

```
col: 30 Error: Type was not found or was not a compile-time constant: OSCMessage. 
```

这是它专门引用的 as3 文件：

```
//IHarmonyApp.as
package 
{
    import org.tuio.osc.OSCMessage;

    public interface IHarmonyApp
    {
        function updateOSCData(msg:OSCMessage):void;
    }
} 
```

它使用库 Tuio、MinimalComps 和 MonsterDebugger。我不明白的是，如果正确导入了 OSCMessage，它怎么找不到 OSCMessage？IDE 对其进行了很好的引用，我可以打开它的声明。OSCMessage 是一个公共类。我不明白。

为了给潜在的答案提供一些额外的信息，IDE flashdevelop 可以很好地找到库 org.tuio.osc.OSCMessage，无论 org.tuio... 是否是源路径以及整体路径，它都会给出错误不包含任何特殊字符。我不知道这是否重要，但我觉得这是我在某个地方犯了一个愚蠢的错误。如果需要，我可以提供我的项目压缩包。

谢谢！

编辑 9:48, 8/25/12 我的项目中确实有文件路径 org/tuio/osc/OSCMessage.as，并且文件 OSCMessage 存在。FlashDevelop 可以很好地找到它，我可以导航到该位置的声明。这就是我被难住的原因。再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T01:37:18.390

**在除de**文件夹之外的 AS3 文件夹中，您需要有**org**文件夹以及相关文件夹和类。

例如要导入 org.tuio.osc.OSCMessage 你需要一个文件：

../YourPackageRoot/org/tuio/osc/OSCMessage.as

另一种方法是包含一个 SWC 文件（所有文件夹和类都压缩到一个 swc 文件中）。**您可以通过右键单击 swc 文件并选择“添加到库**”将 swc 文件包含在 FlashDevelop 中

# java - 将 Java 项目导出为 .jar 文件会抱怨找不到某些 .java 文件

> ID：12126985
> 
> 赞同：10
> 
> 时间：2012-08-26T01:24:34.727
> 
> 标签：java, eclipse

当尝试将项目导出为`.jar`文件时，Eclipse 会抱怨在类路径中找不到某些文件：

> 找不到或无法访问类路径上的类文件：“proj/src/main/java/analysis/specification/VerifyVariableIsDefinedInsideTargetTerm.java”

现在，有趣的是，这些文件实际上已经很久没有在磁盘上存在了。我想我强迫 Eclipse 以某种方式刷新它的数据库。我尝试过 F5 进行完整构建，但似乎无济于事。我也尝试了[此博客文章](http://blog.timmattison.com/archives/2009/11/10/how-to-fix-a-broken-eclipse-environment-without-starting-completely-from-scratch/)中描述的过程，但问题仍然存在。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T07:07:21.427

错误……其实我刚才就知道问题的原因了……</p>

所有引起问题的文件确实存在于项目中，但被注释掉了（因此，我没有在包资源管理器中看到它们，这是我通常使用的视图）。

删除它们后，一切正常。不过，我仍然不明白为什么他们会在 JAR 创建过程中引发错误……</p>

**编辑：** 这是一个注释掉的类的例子：

```
package a.b.c

//import java.io.Closeable;

//public class Example implements Closeable {
//    public void close() throws IOException {
//        System.out.println("closed");
//    }
//} 
```

因为整个类都被注释掉了，所以没有`Example.class`创建。而如果类被这样注释掉：

```
package a.b.c

//import java.io.Closeable;

public class Example
//    implements Closeable
{
//    public void close() throws IOException {
//        System.out.println("closed");
//    }
} 
```

an`Example.class`被创建，虽然是空的。

这可能是eclipse中的一个错误。如果您从 eclipse 中导出 ant 构建脚本并使用它，它会很好地创建 JAR。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T08:55:21.817

这个问题我也遇到过。但是，我遇到的问题是我在 Eclipse 中遇到了 JRE 配置问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:04:29.540

可能真正的问题是并非所有的类文件都在同一个地方……我的建议是将所有`.java`文件移动到同一个文件夹中，重新编译以制作`.class`文件，确保所有`.class`文件都在同一个文件夹中……然后，查看此[网页](http://www.centerkey.com/mac/java/)，如果您在实际创建`.jar`.

该网站还假设您使用的是 Mac，但您仍然应该能够在 Windows 上使用命令提示符来使其工作。

# c# - Nhibernate - 数据库端查询

> ID：12126986
> 
> 赞同：0
> 
> 时间：2012-08-26T01:24:35.900
> 
> 标签：c#, linq, nhibernate, filter, expression

请参阅[https://stackoverflow.com/questions/41810306/appointment-scheduling](https://stackoverflow.com/questions/41810306/appointment-scheduling) ...。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:58:37.480

您的代码有两个问题。

首先是你如何声明你的方法：

```
Func<T, bool> ComposeFilter 
```

当您这样做时，您将返回一个已编译的委托，并且`Where`选择的扩展方法重载是 from`Enumerable`而不是`Queryable`.

您必须将其声明为：

```
Expression<Func<T, bool>> ComposeFilter 
```

第二个问题是你写的代码不能转换成表达式树。由于您没有使用原语而是动态构造表达式，因此您需要了解`System.Linq.Expressions`.

# java - Java - mkdir() 不写目录

> ID：12126987
> 
> 赞同：10
> 
> 时间：2012-08-26T01:25:22.920
> 
> 标签：java, mkdir

我正在尝试创建一个目录，但似乎每次都失败？我已经检查过这也不是权限问题，我拥有写入该目录的完全权限。提前致谢。

这是代码：

```
private void writeTextFile(String v){
    try{

        String yearString = convertInteger(yearInt);
        String monthString = convertInteger(month);
        String fileName = refernce.getText();
        File fileDir = new File("C:\\Program Files\\Sure Important\\Report Cards\\" + yearString + "\\" + monthString);
        File filePath = new File(fileDir + "\\"+ fileName + ".txt");
        writeDir(fileDir);
        // Create file 
        FileWriter fstream = new FileWriter(filePath);
        try (BufferedWriter out = new BufferedWriter(fstream)) {
            out.write(v);
        }
    }catch (Exception e){//Catch exception if any
    System.err.println("Error: " + e.getMessage());
    }
}

private void writeDir(File f){
    try{
         if(f.mkdir()) { 
             System.out.println("Directory Created");
        } else {
        System.out.println("Directory is not created");
        }
    } catch(Exception e){
        e.printStackTrace();
    }
}

public static String convertInteger(int i) {
    return Integer.toString(i);
}

Calendar cal = new GregorianCalendar();
public int month = cal.get(Calendar.MONTH);
public int yearInt = cal.get(Calendar.YEAR); 
```

这是输出：

```
Directory is not created
Error: C:\Program Files\Sure Important\Report Cards\2012\7\4532.txt (The system cannot find the path specified) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-26T01:30:10.043

这可能是因为`File.mkdir`仅当父目录存在时才创建目录。尝试使用[`File.mkdirs`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs%28%29)which 创建所有必要的目录。

这是对我有用的代码。

```
private void writeDir(File f){
    try{
         if(f.mkdirs()) { 
             System.out.println("Directory Created");
        } else {
        System.out.println("Directory is not created");
        }
    } catch(Exception e){
            //  Demo purposes only.  Do NOT do this in real code.  EVER.
            //  It squashes exceptions ...
        e.printStackTrace();
    }
} 
```

我所做的唯一更改是更改`f.mkdir()`为`f.mkdirs()`并且有效

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-26T02:01:24.567

我认为[@La bla bla](https://stackoverflow.com/a/12127002/139985)已经成功了，但为了完整起见，以下是我能想到的所有*可能*导致调用`File.mkdir()`失败的事情：

*   路径名中的语法错误；例如，文件名组件中的非法字符
*   包含最终目录组件的目录不存在。
*   已经有同名的东西了。
*   您无权在父目录中创建目录
*   您无权在路径上的某个目录中进行查找
*   要创建的目录位于只读文件系统上。
*   文件系统出现硬件错误或网络相关错误。

（显然，这些可能性中的一些可以在这个问题的背景下迅速消除......）

# mysql - 从 VARCHAR 转换为 INT - MySQL

> ID：12126991
> 
> 赞同：318
> 
> 时间：2012-08-26T01:26:30.250
> 
> 标签：mysql, sql

我的当前数据

```
SELECT PROD_CODE FROM `PRODUCT` 
```

是

```
PROD_CODE
2
5
7
8
22
10
9
11 
```

我已经尝试了所有四个查询，但没有任何工作。（[参考](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast)）

```
SELECT CAST(PROD_CODE) AS INT FROM PRODUCT;

SELECT CAST(PROD_CODE AS INT) FROM PRODUCT;

SELECT CAST(PROD_CODE) AS INTEGER FROM PRODUCT;

SELECT CAST(PROD_CODE AS INTEGER) FROM PRODUCT; 
```

所有抛出语法错误，如下所示：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ') AS INT FROM PRODUCT LIMIT 0, 30' 附近使用正确的语法
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“INTEGER) FROM PRODUCT LIMIT 0, 30”附近使用正确的语法

在 MySQL 中将 varchar 转换为整数的正确语法是什么？

MySQL 版本：5.5.16

* * *

## 回答 #1

> 赞同：638
> 
> 时间：2012-08-26T01:35:01.833

如[Cast 函数和运算符](http://dev.mysql.com/doc/en/cast-functions.html#function_cast)中所述：

> 结果的类型可以是以下值之一：
> 
> *   `BINARY[(N)]`
> *   `CHAR[(N)]`
> *   `DATE`
> *   `DATETIME`
> *   `DECIMAL[(M[,D])]`
> *   `SIGNED [INTEGER]`
> *   `TIME`
> *   `UNSIGNED [INTEGER]`

因此，您应该使用：

```
SELECT CAST(PROD_CODE AS UNSIGNED) FROM PRODUCT 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2016-03-01T19:00:37.750

为了将 varchar 字段/值转换为数字格式，可以使用很少的技巧：

```
SELECT (`PROD_CODE` * 1) AS `PROD_CODE` FROM PRODUCT` 
```

# jquery - 对输入电子邮件字段使用不同的消息：jquery 验证插件

> ID：12126996
> 
> 赞同：0
> 
> 时间：2012-08-26T01:27:41.477
> 
> 标签：jquery, jquery-validate

我有 2 个不同的页面登录并使用类似性质的电子邮件字段进行注册，如下所示。我正在使用 jquery validate 插件来进行字段验证。我需要根据放置的页面为电子邮件字段显示两条不同的错误消息。是否可以通过使用“addMethod”函数或任何其他方法编写一些自定义验证来做到这一点？我是否添加一个类来区分两个电子邮件字段以实现这一目标？任何指针

```
<form id="login">
    <input type="email" class="required"/>
</form>

<form id="signup">
    <input type="email" class="required"/>
</form>

    rules: {
                            username: {
                                required: true,
                                email: true
                            },
                            password: {
                                 required: true
                            }

                        },
                        messages: {
                            username: {
                                required: "please enter an email address",
                                email: "You must use a valid email address."
                            },
                            password:{
                                required: "",
                                password: "You must use a valid password."
                            }
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:33:28.467

您可以使用消息参数的函数：

```
messages: {
  username: {
    required: "please enter an email address",
    email: function() {
      if ($("#login")) { return "Message for login page"; }
      else if ($("#signup")) { return "Message for signup page"; }
      else { return "Generic message" }
  },
  password: ...
} 
```

据我所知，这些函数无法知道正在处理哪个表单`.validate()`，但它们可以查看页面的内容。所以这只是检查页面是否有一个`login`或`signup`ID。

# for-loop - XTend For-Loop 支持和添加范围支持

> ID：12126999
> 
> 赞同：9
> 
> 时间：2012-08-26T01:28:42.637
> 
> 标签：for-loop, foreach, xtend

我似乎无法找到一种在 Xtend 中表达以下内容的好方法，而无需借助 while 循环：

```
for(int i = 0; i < 3; i++){
    println("row ");
}
println("your boat"); 
```

所以，我想我的问题有两个部分：

*   有没有更好的方法来完成上述操作？我在他们的文档中没有看到任何有希望的[东西](http://www.eclipse.org/xtend/documentation.html)
*   该语言的大部分功能只是 Xtend 库扩展（它们很棒！）。是否有`range()`我不知道的 Python 功能？

我最终自己滚动并得到了如下内容：

```
class LanguageUtil {

def static Iterable<Integer> range(int stop) {
    range(0, stop)
}

def static Iterable<Integer> range(int start, int stop) {
    new RangeIterable(start, stop, 1)
}

def static Iterable<Integer> range(int start, int stop, int step) {
    new RangeIterable(start, stop, step)
}
}

// implements Iterator and Iterable which is bad form.
class RangeIterable implements Iterator<Integer>, Iterable<Integer> {
val int start
val int stop
val int step
var int current

new(int start, int stop, int step) {
    this.start = start;
    this.stop = stop;
    this.step = step
    this.current = start
}

override hasNext() {
    current < stop
}

override next() {
    val ret = current
    current = current + step
    ret
}

override remove() {
    throw new UnsupportedOperationException("Auto-generated function stub")
}

/**
 * This is bad form. We could return a 
 * new RangeIterable here, but that seems worse.
 */
override iterator() {
    this
}
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-16T07:13:55.280

确切的替代品

```
for(int i = 0; i < 3; i++){
    println("row ");
} 
```

是

```
for (i : 0 ..< 3) {
    println("row ")
} 
```

注意排他范围运算符：`..<`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-02T05:45:51.420

你也可以用更惯用的方式来做

```
(1..3).forEach[println("row")] 
```

对 Xtend 来说非常新，但它让 jvm 上的编程变得很棒。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-05T18:45:46.693

对我来说，基于范围`forEach`意味着范围在某种程度上是有意义的。对于在没有迭代变量的情况下循环特定次数，我发现 Ruby 的`times`循环更清楚地表达了意图：

```
3.times [|println("row")] 
```

可悲的是，它不是 的一部分`IntegerExtensions`，但实现很简单：

```
def static times(int iterations, Runnable runnable) {
    if (iterations < 0) throw new IllegalArgumentException(
            '''Can't iterate negative («iterations») times.''')
    for (i: 0 ..< iterations) runnable.run()
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-26T02:13:53.473

呵呵，过了一会儿我找到了答案：

```
for(i: 1..3) {
    println("row ")
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-06T18:19:32.350

实际上有一个版本`forEach()`接受带有两个参数的 lambda。如果您需要访问循环内的迭代索引，这很有用。

```
(10..12).forEach[ x, i | println('''element=«x» index=«i»''')] 
```

印刷：

```
element=10 index=0
element=11 index=1
element=12 index=2 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-16T06:44:56.863

从[Xtend 2.6](http://www.eclipse.org/xtend/documentation.html#traditionalForLoop)开始，我们也支持“传统”的 for 循环，就像在 Java 中一样。