# StackOverflow 问答 000165000-000165999

# asp.net-2.0 - 在带有 .NET 2.0 应用程序的服务器上安装 .NET 3.5

> ID：165010
> 
> 赞同：3
> 
> 时间：2008-10-02T23:19:20.440
> 
> 标签：asp.net-2.0, asp.net-3.5, iis-5

我想将 IIS 5 服务器上的 Web 项目从 .NET 2.0 升级到 .NET 3.5。这些 Web 应用程序与其他不会升级到 .NET 3.5 的 Web 应用程序一起存在于服务器上。服务器管理员不愿安装 .NET 3.5，因为他担心它会破坏该机器上运行 2.0 和 1.1 的应用程序。

据我所知，这不会是一个问题，因为 .NET 3.5 是对 2.0 的补充，而不是一个新的框架。我希望社区帮助收集证据，向他表明他们的担忧是没有意义的，并且不会损害其他应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-02T23:22:01.510

如果您有 .NET 2 SP1，您应该没有问题。

确切地说，.NET 3 和 3.5 是在 .NET 2.0 SP 1 之上构建的，我们在将 3.5 部署到只有 .NET 2（不是 SP1）的服务器上时遇到了问题，这导致那里的应用程序中断。原因是您在 .NET 2 中的核心框架程序集已升级，并且具有未针对该应用程序编译的新版本号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T23:20:55.787

它不会有任何问题，您将能够使用同一台服务器运行您的 2.0 和 3.5 应用程序。这是因为两个框架的代码库是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T23:21:31.870

我已经将几台服务器从 .net 1.1 升级到 2.0 和 3.5，没有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-02T23:26:36.490

引导服务器管理员了解 3.5 的可再发行组件的内容。它添加了很多新的 dll，它不会更新 2.0.x 目录中的任何内容。您可能想向他展示面向 3.5 的应用程序如何仍在使用 2.0.x 框架目录中的 System.dll 等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T00:00:55.007

两个框架可以同时运行。事实上，这是默认行为。

不过需要注意的是，请确保不要为使用不同版本框架的应用程序使用相同的应用程序池。否则，您将收到“服务器应用程序不可用”错误。为每组应用程序使用不同的应用程序池。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-02T07:26:30.210

安装 3.5 将修改您的 .NET 2.0 web.config 文件和其他一些文件。

这肯定会破坏我使用的至少 1 个应用程序。卸载 3.5 将恢复文件并解决问题。

# asp.net - ASP.NET 1.1 性能问题

> ID：165014
> 
> 赞同：0
> 
> 时间：2008-10-02T23:20:04.977
> 
> 标签：asp.net, performance, debugging, profiling

我正在对 1.1 应用程序进行一些分析，并发现了一个问题。似乎此功能要永远加载到某个页面上：

ParserCacheItem System.Web.UI.TemplateControlParser.CompileAndGetParserCacheItem（字符串，字符串，HttpContext）

我四处搜寻，但没有运气。有谁知道这个功能在做什么？如果我知道的话，也许它会对情况有所了解。

谢谢！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-02T23:55:11.960

它确实是一个消除的过程。

我也遇到过类似的问题，似乎我是唯一遇到特定问题的人。

通过分解我的页面，我找到了导致超时/错误的控件，并围绕它进行了一些更具体的搜索。

然后我发现该错误实际上与我遇到的症状无关，它被其他问题所掩盖。

这是对时间的投资，但您可能会发现某些控制或页面的一部分由于某些完全不明显的原因而超时，并且无论如何都不会被报告。您确实暗示该页面很复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T23:41:37.733

页面由什么组成？

你有没有尝试过：

*   从页面中删除所有元素并再次运行分析器并查看是否发生相同的错误，如果它没有将每个元素添加回来以缩小导致它的原因
*   .aspx 的所有命名空间引用都正确吗？
*   您是否尝试过在另一个运行 IIS 的机器上运行该应用程序以查看配置是否可能是问题？

# asp.net - 为什么我的 Excel 导出顶部有一个空白行？

> ID：165025
> 
> 赞同：2
> 
> 时间：2008-10-02T23:23:55.077
> 
> 标签：asp.net, excel

在 ASP.NET 中，我将一些数据导出到 Excel，只需将 DataSet 绑定到 GridView，然后将 ContentType 设置为 Excel。

我的 ASPX 页面非常简单，如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="ExamExportReport.aspx.cs" Inherits="Cabi.CamCentral.Web.Pages.Utility.ExamExportReport" %>
<html>
<body>
  <form id="form1" runat="server">
        <asp:GridView
            ID="gridExam"
            AutoGenerateColumns="true"
            runat="server">
        </asp:GridView>
  </form>
</body>
</html> 
```

在后面代码的Page_Load方法中，我是这样做的：

```
protected void Page_Load(object sender, EventArgs e)
{
    BindGrid();
    Response.ContentType = "application/vnd.ms-excel";
    Response.AddHeader("content-disposition", "attachment; filename=ExamExport.xls");
} 
```

通常，一切正常，Excel 文件会弹出正确的数据。问题是 Excel 文件总是以列标题正上方的空白第一行结束。我只是无法弄清楚是什么原因造成的。也许这与表单标签有关？也许我需要添加一些样式或其他东西来去除填充或边距？我已经尝试了很多东西，但我就是无法摆脱那个该死的第一行空白。有没有其他人遇到过这个？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T23:53:18.423

@azamsharp - 当您回复时，我在其他地方找到了解决方案。:-) 事实证明，从 ASPX 页面中完全删除 form 标记是诀窍，唯一的方法是像您所做的那样覆盖 VerifyRenderingInServerForm 方法。

如果您更新您的解决方案以包括您需要从页面中删除表单标签的事实，我将接受您的回答。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T23:43:46.467

这是我工作正常的代码：

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                BindData();
            }
        }

        private void BindData()
        {
            string connectionString = "Server=localhost;Database=Northwind;Trusted_Connection=true";
            SqlConnection myConnection = new SqlConnection(connectionString);
            SqlDataAdapter ad = new SqlDataAdapter("select * from products", myConnection);
            DataSet ds = new DataSet();
            ad.Fill(ds);

            gvProducts.DataSource = ds;
            gvProducts.DataBind(); 
        }

        protected void ExportGridView(object sender, EventArgs e)
        {
            Response.ClearContent();

            Response.AddHeader("content-disposition", "attachment; filename=MyExcelFile.xls");

            Response.ContentType = "application/excel";

            StringWriter sw = new StringWriter();

            HtmlTextWriter htw = new HtmlTextWriter(sw);

            gvProducts.RenderControl(htw);

            Response.Write(sw.ToString());

            Response.End();
        }

        public override void VerifyRenderingInServerForm(Control control)
        {

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-08T20:16:06.533

一个更简单的解决方案是覆盖 Render (HtmlTextWriter writer) 方法并使其为空：

protected override void Render(HtmlTextWriter writer){}

[http://c-sharpe.blogspot.com/2009/05/get-rid-of-blank-row-when-exporting-to.html](http://c-sharpe.blogspot.com/2009/05/get-rid-of-blank-row-when-exporting-to.html)

# language-agnostic - 冗余与依赖：哪个更糟？

> ID：165041
> 
> 赞同：11
> 
> 时间：2008-10-02T23:30:12.707
> 
> 标签：language-agnostic

在开发新软件时，我通常会遇到冗余与依赖问题。也就是说，要么接受我有很大依赖关系的第 3 方库，要么自己编写代码会复制所有效果，但会减少依赖关系。

尽管我最近一直在尝试提出一种衡量代码冗余和代码依赖关系的度量方法。在大多数情况下，我已经得出结论，减少冗余会增加代码中的依赖性。减少代码中的依赖关系会增加冗余。所以它非常相互抵消。

所以我的问题是：你过去使用过的一个好的指标是什么，并且确实用来衡量代码中的依赖关系或冗余？

我认为非常重要的一件事是，如果您选择依赖关系路线，您需要适当的工具集，以便您可以快速检查使用指定函数的所有例程和函数。如果没有这些工具集，似乎冗余会获胜。

PS 继一篇文章
[文章](http://www.yosefk.com/blog/redundancy-vs-dependencies-which-is-worse.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-02T23:32:45.587

我绝对会推荐阅读 Joels 的文章：

[“为非发明症候群辩护”](http://www.joelonsoftware.com/articles/fog0000000007.html)

对于依赖项，我能想到的最佳指标是“如果这种情况消失，世界会陷入停顿吗”。例如，如果 C++ 的 STL 神奇地消失了，大量程序将停止工作。如果 .Net 或 Java 消失，我们的经济可能会因为停止工作的产品数量而受到打击……

我会从这些方面考虑。当然，如果很多东西消失了，它们就会在“世界末日”和“meh”之间变成灰色阴影。如果依赖关系消失，它越接近可能导致世界末日，它就越有可能稳定、拥有活跃的用户群、众所周知的问题等等。用户越多越好。

它类似于成为某些硬件组件的小消费者。有时硬件会过时。为什么？因为没有人使用它。如果您是一家小公司并且需要为您的产品获取组件，您将选择通常可用的东西——“大玩家”大量订购的东西，希望这意味着（a）组件不会消失，（b）组件的问题是众所周知的，（c）有一个庞大的，知情的用户群，（d）它可能成本更低并且更容易获得。

但有时，您需要那个特殊的磁通电容器部件，并且您冒着风险，如果您一年只订购 20 个，那么卖给您的公司可能不关心继续生产磁通电容器，而且似乎没有人关心 :)。在这种情况下，*可能*值得开发自己的磁通电容器，而不是依赖不可靠的 Doc Brown Inc.。只是不要从利比亚人那里购买钚。

如果您从事过制造工作（尤其是当您的年产量远少于数百万件时），您就必须处理这个问题。我相信，软件依赖关系需要用非常相似的术语来理解。

如何将其量化为真正的指标？粗略计算有多少人依赖某事。如果它很高，依赖伤害你的风险要低得多，你可以决定什么时候风险太大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-02T23:46:11.017

我之前并没有真正考虑过我用来决定是否使用第三方库的标准，但是考虑过它，可能如下，没有特别的顺序：

*   图书馆的普及程度（如果需要，我能否找到支持）
*   我需要用它做意想不到的事情的可能性有多大（我最终会开始为期三周的任务来添加我需要的功能吗？）
*   我需要使用多少（我要花几天时间学习来龙去脉只是为了使用一个功能）
*   它看起来有多稳定（麻烦多于价值？）
*   界面有多稳定（未来一两年内情况可能会发生变化吗？）
*   这个问题有多有趣（我个人自己实施它会更好吗？我会学到什么有用的东西吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T23:44:46.120

如果外部软件为您的项目提供了很多价值，则可能的替代方法是使用它，但将其隐藏在简化（并且与您的项目更一致）界面之后。

这允许您利用第三方库的强大功能，但在调用库时的复杂性（以及冗余度）大大降低。该接口确保您不会让第三方库的特定样式渗入您的项目，并允许您在认为可能有必要时轻松地将其替换为内部实现。

发生这种情况的迹象可能是您要支持的接口受到第三方库的阻碍。

这样做的显着缺点是它确实需要额外的开发并增加一定的维护影响（这会随着您需要从库中获得的功能数量而增加），但允许您利用第三方库而无需过多耦合且无需所有您的开发人员需要了解它。

一个很好的例子是在一组存储库或数据访问对象或使用依赖注入框架实现的工厂之后使用对象关系映射器（Hibernate\NHibernate）。

# excel - 阻止 Excel 自动将某些文本值转换为日期

> ID：165042
> 
> 赞同：587
> 
> 时间：2008-10-02T23:30:43.643
> 
> 标签：excel, csv, import

有没有人碰巧知道我可以为某个字段添加到我的 csv 中的令牌，以便 Excel 不会尝试将其转换为日期？

我正在尝试从我的应用程序中编写一个 .csv 文件，其中一个值恰好看起来很像 Excel 自动将其从文本转换为日期的日期。我尝试将所有文​​本字段（包括看起来像日期的字段）放在双引号内，但这没有任何效果。

* * *

## 回答 #1

> 赞同：380
> 
> 时间：2008-10-02T23:33:21.123

我发现在双引号前加上一个 '=' 会完成你想要的。它强制数据为文本。

例如。="2008-10-03",="更多文字"

**编辑（根据其他帖子）**：由于[Jeffiekins 指出的 Excel 2007 错误，](https://stackoverflow.com/a/4412775/684229)应该使用[Andrew 提出的解决方案](https://stackoverflow.com/a/6023847/684229)：`"=""2008-10-03"""`

* * *

## 回答 #2

> 赞同：173
> 
> 时间：2013-02-27T08:16:41.577

我知道这是一个老问题，但问题不会很快消失。CSV 文件很容易从大多数编程语言中生成，相当小，在使用纯文本编辑器时易于人类阅读，并且无处不在。

问题不仅在于文本字段中的**日期，而且****任何数字**也会从文本转换为数字。几个有问题的例子：

*   邮政编码
*   电话号码
*   政府身份证号码

有时**可以**以一个或多个零 (0) 开头，这些零在转换为数字时会被丢弃。或者该值包含可能与数学运算符混淆的字符（如日期：/、-）。

我能想到的两种情况，如前所述，“前置=”解决方案**可能并不理想**是

*   文件可能会被导入到 MS Excel 以外的程序中（想到 MS Word 的邮件合并功能），
*   人类可读性可能很重要。

# 我解决这个问题的技巧

如果在值中预先/附加一个非数字和/或非日期字符，则该值将被识别为文本并且不进行转换。非打印字符会很好，因为它不会改变显示的值。但是，普通的旧空格字符（\s，ASCII 32）对此不起作用，因为它被 Excel 截断，然后值仍然被转换。**但是**还有其他各种打印和非打印空格字符可以很好地工作。**然而，最简单的方法**是**附加（添加）简单的制表符（\t，ASCII 9）。**

这种方法的好处：

*   可从键盘或易于记忆的 ASCII 码 (9) 获得，
*   它不打扰进口，
*   *通常*不会影响邮件合并结果（取决于模板布局 - 但通常它只是在行尾添加一个宽阔的空间）。（如果这是一个问题，请查看其他字符，例如零宽度空格（ZWSP，Unicode U+200B）
*   在记事本（等）中查看 CSV 时不是很大的障碍，
*   并且可以通过在 Excel（或记事本等）中查找/替换来删除。
*   您无需*导入*CSV，只需双击即可在 Excel中*打开CSV。*

如果出于某种原因您不想使用该选项卡，请在 Unicode 表中查找其他合适的内容。

# 另外一个选项

可能是生成 XML 文件，较新的 MS Excel 版本也接受某种格式的导入，并且允许更多类似于 .XLS 格式的选项，但我没有这方面的经验。

所以有多种选择。根据您的要求/应用程序，一个可能比另一个更好。

* * *

# 添加

需要说的是，MS Excel 的较新版本（2013+）不再以电子表格格式打开 CSV - 工作流程中的另一个加速器使 Excel 变得不那么有用......至少，存在绕过它的说明。参见例如这个 Stackoverflow：[如何在 Excel 2013 中正确显示 .csv 文件？](https://stackoverflow.com/questions/17953679/how-to-correctly-display-csv-files-within-excel-2013) .

* * *

## 回答 #3

> 赞同：104
> 
> 时间：2011-05-16T21:48:35.250

根据 Jarod 的解决方案和 Jeffiekins 提出的问题，您可以修改

```
"May 16, 2011" 
```

到

```
"=""May 16, 2011""" 
```

* * *

## 回答 #4

> 赞同：70
> 
> 时间：2013-02-21T05:06:50.417

我有一个类似的问题，这是帮助我无需编辑 csv 文件内容的解决方法：

如果您可以灵活地将文件命名为“.csv”以外的名称，则可以使用“.txt”扩展名来命名，例如“Myfile.txt”或“Myfile.csv.txt”。然后当您在 Excel 中打开它时（不是通过拖放，而是使用文件->打开或最近使用的文件列表），Excel 将为您提供“文本导入向导”。

在向导的第一页中，为文件类型选择“分隔”。

在向导的第二页中，选择“，”作为分隔符，如果您的值用引号括起来，还选择文本限定符

在第三页中，分别选择每一列，并为每一列分配“文本”而不​​是“常规”类型，以阻止 Excel 弄乱您的数据。

希望这可以帮助您或遇到类似问题的人！

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2010-12-10T19:58:59.950

警告：Excel '07（至少）有一个（另一个）错误：如果字段的内容中有逗号，它不会正确解析 ="field, contents"，而是将逗号后面的所有内容放入后面的字段，不管引号。

我发现唯一可行的解​​决方法是在字段内容包含逗号时消除 = 。

这可能意味着有些字段无法在 Excel 中完全“正确”表示，但现在我相信没有人会感到惊讶。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2018-08-12T07:59:04.800

# 2018

唯一适合我的解决方案（也**无需修改 CSV**）。

**Excel 2010：**

1.  创建新工作簿
2.  数据 > 从文本 > 选择您的 CSV 文件
3.  在弹出窗口中，选择“分隔”单选按钮，然后单击“下一步>”
4.  分隔符复选框：仅勾选“逗号”并取消选中其他选项，然后单击“下一步>”
5.  在“数据预览”中，滚动到最右侧，然后按住 shift 并单击最后一列（这将选择所有列）。现在在“列数据格式”中选择单选按钮“文本”，然后单击“完成”。

**Excel office365：（**客户端版本）

1.  创建新工作簿
2.  数据 > 从文本/CSV > 选择您的 CSV 文件
3.  数据类型检测 > 不检测

**注意：** Excel office365（网络版），当我写这篇文章时，你将无法做到这一点。

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2014-04-21T13:09:04.123

在 C# 中创建要写入我的 CSV 文件的字符串时，我必须以这种方式对其进行格式化：

```
"=\"" + myVariable + "\"" 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2014-02-06T21:15:58.137

在 Excel 2010 中打开一个新工作表。在数据功能区上单击“从文本获取外部数据”。选择您的 CSV 文件，然后单击“打开”。点击下一步”。取消选中“选项卡”，在“逗号”旁边打上复选标记，然后单击“下一步”。单击第一列的任意位置。按住 shift 键的同时拖动滑块直到您可以单击最后一列，然后松开 shift 键。单击“文本”单选按钮，然后单击“完成”

所有列都将作为文本导入，就像它们在 CSV 文件中一样。

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2015-11-30T17:35:45.667

在 Microsoft Office 2016 版本中仍然是一个问题，对于我们这些使用诸如 MARC1、MARCH1、SEPT1 等基因名称的人来说相当令人不安。我发现在 R 中生成“.csv”文件后最实用的解决方案，然后将与 Excel 用户打开/共享：

1.  以文本形式打开 CSV 文件（记事本）
2.  复制它（ctrl+a，ctrl+c）。
3.  将其粘贴到新的 Excel 工作表中 - 它将全部粘贴在一列中作为长文本字符串。
4.  选择/选择此列。
5.  转到数据-“文本到列...”，在打开的窗口中选择“分隔”（下一个）。检查是否标记了“逗号”（标记它已经将数据显示到下面的列中）（下一步），在此窗口中您可以选择所需的列并将其标记为文本（而不是一般）（完成）。

高温高压

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2013-01-28T18:05:52.803

这是我们在工作中首先生成 csv 文件时使用的简单方法，它确实会稍微改变值，因此它并不适合所有应用程序：

为 csv 中的所有值添加一个空格

该空间将被 Excel 从“1”、“2.3”和“-2.9e4”等数字中删除，但将保留在“01/10/1993”等日期和“TRUE”等布尔值上，阻止它们被转换为excel的内部数据类型。

它还可以阻止在读入时使用双引号，因此即使像“3.1415”这样的文本是用双引号括起来并在整个字符串前面加上空格，excel 保持 csv 中文本保持不变的万无一失的方法，即（使用单引号显示您将键入的内容）'“3.1415”'。然后在excel中你总是有原始字符串，除了它用双引号括起来并用空格前置，所以你需要考虑任何公式等中的那些。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2008-10-02T23:34:08.877

（假设 Excel 2003 ......）

使用 Text-to-Columns 向导时，在第 3 步中，您可以指定每个列的数据类型。单击预览中的列，将行为不端的列从“常规”更改为“文本”。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2013-08-27T15:08:03.963

这是我知道如何在不弄乱文件本身的情况下完成此操作的唯一方法。像往常一样使用 Excel，我通过在桌子上敲了几个小时的头来学习这一点。

将.csv文件扩展名改为.txt；这将阻止 Excel 在打开文件时自动转换文件。我是这样做的：将 Excel 打开到空白工作表，关闭空白表，然后 File => Open 并选择扩展名为 .txt 的文件。这会强制 Excel 打开“文本导入向导”，它会在其中询问您希望它如何解释文件的问题。首先选择分隔符（逗号、制表符等），然后（这是重要部分）选择一组列并选择格式。如果您想要文件中的确切内容，请选择“文本”，Excel 将仅显示分隔符之间的内容。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2015-09-17T09:39:27.807

（EXCEL 2007 及更高版本）

## 如何在不编辑源文件的情况下强制 excel 不“检测”日期格式

**任何一个：**

*   将文件重命名为 .txt
*   如果您不能这样做，请不要直接在 excel 中打开 CSV 文件，而是创建一个新工作簿，然后转到
    `Data > Get external data > From Text`
    并选择您的 CSV。

无论哪种方式，您都会看到导入选项，只需选择包含日期的每一列并告诉 excel 格式化为“文本”而不​​是“一般”。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2015-12-08T01:12:13.523

我为同样的问题所做的是在每个 csv 值之前添加以下内容："=""" 并在每个 CSV 值之后添加一个双引号，然后在 Excel 中打开文件。以以下值为例：

```
012345,00198475 
```

在 Excel 中打开之前，应将这些更改为：

```
"="""012345","="""00198475" 
```

执行此操作后，每个单元格值在 Excel 中显示为公式，因此不会格式化为数字、日期等。例如，值 012345 显示为：

```
="012345" 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2017-11-30T10:59:29.860

这里提供的解决方案都不是一个好的解决方案。它可能适用于个别情况，但前提是您可以控制最终显示。以我为例：我的工作产生了他们出售给零售的产品清单。这是 CSV 格式并包含零件代码，其中一些以零开头，由制造商设置（不受我们控制）。去掉前导零，您实际上可能会匹配另一个产品。零售客户需要 CSV 格式的列表，因为后端处理程序也是我们无法控制的，并且每个客户都不同，因此我们无法更改 CSV 文件的格式。没有前缀'='，也没有添加标签。原始 CSV 文件中的数据是正确的；当客户在 Excel 中打开这些文件时，问题就开始了。许多客户并不真正精通计算机。他们几乎可以打开并保存电子邮件附件。我们正在考虑以两种略有不同的格式提供数据：一种作为 Excel 友好格式（使用上面建议的选项，添加一个 TAB，另一种作为“主”格式。但这可能是一厢情愿的想法，因为有些客户不明白为什么我们需要这样做。与此同时，我们继续解释为什么他们有时会在电子表格中看到“错误”的数据。在微软做出适当的改变之前，我认为没有适当的解决方案，只要人们无法控制最终用户的方式使用文件。但这可能是一厢情愿的想法，因为一些客户不会理解我们为什么需要这样做。同时，我们继续解释为什么他们有时会在电子表格中看到“错误”的数据。在微软做出适当的改变之前，我认为没有适当的解决方案，只要人们无法控制最终用户如何使用这些文件。但这可能是一厢情愿的想法，因为一些客户不会理解我们为什么需要这样做。同时，我们继续解释为什么他们有时会在电子表格中看到“错误”的数据。在微软做出适当的改变之前，我认为没有适当的解决方案，只要人们无法控制最终用户如何使用这些文件。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2013-06-13T00:34:45.197

本周我遇到了这个约定，这似乎是一个很好的方法，但我在任何地方都找不到它的引用。有人熟悉吗？你能引用它的来源吗？我已经找了好几个小时了，但我希望有人会认可这种方法。

示例 1： =("012345678905") 显示为**012345678905**

示例 2： =("1954-12-12") 显示为**1954-12-12**，而不是**12/12/1954**。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2014-02-20T06:37:30.767

你好我也有同样的问题

我写这个 vbscipt 来创建另一个 CSV 文件。新的 CSV 文件在每个字段的字体中都会有一个空格，因此 excel 会将其理解为文本。

因此，您使用以下代码创建一个 .vbs 文件（例如 Modify_CSV.vbs），保存并关闭它。**将您的原始文件拖放**到您的 vbscript 文件中。它将在同一位置创建一个带有“SPACE_ADDED”文件名的新文件。

```
Set objArgs = WScript.Arguments

Set objFso = createobject("scripting.filesystemobject")

dim objTextFile
dim arrStr ' an array to hold the text content
dim sLine  ' holding text to write to new file

'Looping through all dropped file
For t = 0 to objArgs.Count - 1
    ' Input Path
    inPath = objFso.GetFile(wscript.arguments.item(t))

    ' OutPut Path
    outPath = replace(inPath, objFso.GetFileName(inPath), left(objFso.GetFileName(inPath), InStrRev(objFso.GetFileName(inPath),".") - 1) & "_SPACE_ADDED.csv")

    ' Read the file
    set objTextFile = objFso.OpenTextFile(inPath)

    'Now Creating the file can overwrite exiting file
    set aNewFile = objFso.CreateTextFile(outPath, True) 
    aNewFile.Close  

    'Open the file to appending data
    set aNewFile = objFso.OpenTextFile(outPath, 8) '2=Open for writing 8 for appending

    ' Reading data and writing it to new file
    Do while NOT objTextFile.AtEndOfStream
        arrStr = split(objTextFile.ReadLine,",")

        sLine = ""  'Clear previous data

        For i=lbound(arrStr) to ubound(arrStr)
            sLine = sLine + " " + arrStr(i) + ","
        Next

        'Writing data to new file
        aNewFile.WriteLine left(sLine, len(sLine)-1) 'Get rid of that extra comma from the loop

    Loop

    'Closing new file
    aNewFile.Close  

Next ' This is for next file

set aNewFile=nothing
set objFso = nothing
set objArgs = nothing 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-05-08T11:51:32.437

它不是 Excel。Windows 确实将公式、数据识别为日期并自动更正。您必须更改 Windows 设置。

“控制面板”（->“切换到经典视图”）->“区域和语言选项”->选项卡“区域选项”->“自定义...”->选项卡“数字”->然后更改符号根据你想要的。

[http://www.pcreview.co.uk/forums/enable-disable-auto-convert-number-date-t3791902.html](http://www.pcreview.co.uk/forums/enable-disable-auto-convert-number-date-t3791902.html)

它将在您的计算机上运行，​​如果这些设置没有更改，例如在您客户的计算机上，他们将看到日期而不是数据。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2015-03-30T19:00:02.477

在不修改 csv 文件的情况下，您可以：

1.  将excel单元格格式选项更改为“文本”
2.  然后使用“文本导入向导”来定义 csv 单元格。
3.  导入后删除该数据
4.  然后粘贴为纯文本

excel 将正确格式化并将您的 csv 单元格分隔为文本格式，忽略自动日期格式。

一种愚蠢的解决方法，但它胜过在导入之前修改 csv 数据。Andy Baird 和 Richard 有点逃避这种方法，但错过了几个重要步骤。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-02-29T02:43:30.000

在我的例子中，使用 R 生成的 csv 文件中的“Sept8”被 Excel 2013 转换为“8-Sept”。通过使用 xlsx 包中的 write.xlsx2() 函数生成 xlsx 格式的输出文件，解决了这个问题, 可以由 Excel 加载而无需进行不必要的转换。因此，如果给您一个 csv 文件，您可以尝试将其加载到 R 中并使用 write.xlsx2() 函数将其转换为 xlsx。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-04-17T08:19:32.917

我知道这是一个旧线程。对于像我这样通过 PowerShell COM 对象使用 Office 2013 仍然存在此问题的人，可以使用[opentext 方法](https://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.workbooks.opentext.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)。问题是这种方法有很多参数，有时是互斥的。要解决此问题，您可以使用本文介绍[的](https://stackoverflow.com/questions/5544844/how-to-call-a-complex-com-method-from-powershell)`invoke-namedparameter`方法。一个例子是

```
$ex = New-Object -com "Excel.Application"
$ex.visible = $true
$csv = "path\to\your\csv.csv"
Invoke-NamedParameter ($ex.workbooks) "opentext" @{"filename"=$csv; "Semicolon"= $true} 
```

不幸的是，我刚刚发现当单元格包含换行符时，这种方法会以某种方式破坏 CSV 解析。CSV 支持这一点，但微软的实现似乎有问题。它也不知何故没有检测到德语特有的字符。给它正确的文化并没有改变这种行为。所有文件（CSV 和脚本）都以 utf8 编码保存。首先，我编写了以下代码来逐个插入 CSV 单元格。

```
$ex = New-Object -com "Excel.Application"
$ex.visible = $true;
$csv = "path\to\your\csv.csv";
$ex.workbooks.add();
$ex.activeWorkbook.activeSheet.Cells.NumberFormat = "@";
$data = import-csv $csv -encoding utf8 -delimiter ";"; 
$row = 1; 
$data | %{ $obj = $_; $col = 1; $_.psobject.properties.Name |%{if($row -eq1){$ex.ActiveWorkbook.activeSheet.Cells.item($row,$col).Value2= $_ };$ex.ActiveWorkbook.activeSheet.Cells.item($row+1,$col).Value2 =$obj.$_; $col++ }; $row++;} 
```

但这非常慢，这就是我寻找替代方案的原因。显然，Excel 允许您使用矩阵设置一系列单元格的值。所以我使用[这个博客](https://powertoe.wordpress.com/2010/11/05/how-to-get-data-into-an-excel-spreadsheet-very-quickly-with-powershell-contd/)中的算法将 CSV 转换为多数组。

```
function csvToExcel($csv,$delimiter){
     $a = New-Object -com "Excel.Application"
     $a.visible = $true

    $a.workbooks.add()
     $a.activeWorkbook.activeSheet.Cells.NumberFormat = "@"
     $data = import-csv -delimiter $delimiter $csv; 
     $array = ($data |ConvertTo-MultiArray).Value
     $starta = [int][char]'a' - 1
     if ($array.GetLength(1) -gt 26) {
         $col = [char]([int][math]::Floor($array.GetLength(1)/26) + $starta) + [char](($array.GetLength(1)%26) + $Starta)
     } else {
         $col = [char]($array.GetLength(1) + $starta)
     }
     $range = $a.activeWorkbook.activeSheet.Range("a1:"+$col+""+$array.GetLength(0))
     $range.value2 = $array;
     $range.Columns.AutoFit();
     $range.Rows.AutoFit();
     $range.Cells.HorizontalAlignment = -4131
     $range.Cells.VerticalAlignment = -4160
}

 function ConvertTo-MultiArray {
     param(
         [Parameter(Mandatory=$true, Position=1, ValueFromPipeline=$true)]
         [PSObject[]]$InputObject
     )
     BEGIN {
         $objects = @()
         [ref]$array = [ref]$null
     }
     Process {
         $objects += $InputObject
     }
     END {
         $properties = $objects[0].psobject.properties |%{$_.name}
         $array.Value = New-Object 'object[,]' ($objects.Count+1),$properties.count
         # i = row and j = column
         $j = 0
         $properties |%{
             $array.Value[0,$j] = $_.tostring()
             $j++
         }
         $i = 1
         $objects |% {
             $item = $_
             $j = 0
             $properties | % {
                 if ($item.($_) -eq $null) {
                     $array.value[$i,$j] = ""
                 }
                 else {
                     $array.value[$i,$j] = $item.($_).tostring()
                 }
                 $j++
             }
             $i++
         }
         $array
     } 
} 
csvToExcel "storage_stats.csv" ";" 
```

您可以按原样使用上面的代码；它应该将任何 CSV 转换为 Excel。只需更改 CSV 的路径和底部的分隔符即可。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2015-08-12T15:10:26.337

最简单的解决方案我今天才发现。

*   在 Word 中打开
*   用破折号替换所有连字符
*   保存并关闭
*   在 Excel 中打开

完成编辑后，您可以随时在 Word 中重新打开它，以再次用连字符替换短划线。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2017-12-19T22:00:59.487

使用 Google Drive（或 Numbers，如果您在 Mac 上）的解决方法：

1.  在 Excel 中打开数据
2.  将数据不正确的列的格式设置为文本（格式>单元格>数字>文本）
3.  将 .csv 加载到 Google Drive，然后使用 Google Sheets 打开它
4.  复制有问题的列
5.  将列作为文本粘贴到 Excel 中（编辑 > 选择性粘贴 > 文本）

或者，如果您在 Mac 上执行第 3 步，您可以在 Numbers 表格中打开数据。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-06-27T09:45:43.593

（EXCEL 2016及以后，其实老版本我没试过）

1.  打开新的空白页
2.  转到选项卡“数据”
3.  单击“来自文本/CSV”并选择您的 csv 文件
4.  在预览中检查您的数据是否正确。
5.  如果某些列被转换为日期，请单击“编辑”，然后通过单击列头中的日历来选择文本类型
6.  点击“关闭并加载”

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2021-01-20T17:42:44.237

如果有人仍在寻找答案，那么下面的行对我来说非常有用

我进入了**`=("my_value")`**。
即`=("04SEP2009")`显示为`04SEP2009`不像`09/04/2009`

这同样适用于超过 15 位的整数。他们不再被修剪了。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2014-05-06T01:14:02.667

好的，在 Excel 2003 到 2007 中找到了一种简单的方法。打开一个空白的 xls 工作簿。然后进入数据菜单，导入外部数据。选择您的 csv 文件。通过向导，然后在“列数据格式”中选择任何需要强制为“文本”的列。这会将整个列作为文本格式导入，以防止 Excel 尝试将任何特定单元格视为日期。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-05-21T10:45:48.733

Mac Office 2011 和 Office 2013 中仍然存在此问题，我无法阻止它发生。这似乎是一个基本的事情。

在我的情况下，我在用逗号正确括起来的 CSV 中有诸如“1 - 2”和“7 - 12”之类的值，这会自动转换为 excel 中的日期，如果您随后尝试将其转换为纯文本，您会得到日期的数字表示，例如 43768。此外，它将条形码和 EAN 数字中的大数字重新格式化为无法转换回的 123E+ 数字。

我发现 Google Drive 的 Google Sheets 不会将数字转换为日期。条形码中每 3 个字符都有逗号，但这些很容易删除。它处理 CSV 非常好，尤其是在处理 MAC / Windows CSV 时。

有时可能会救人。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-08-16T20:09:22.067

我对不断转换为科学记数法的信用卡号执行此操作：我最终将我的 .csv 导入 Google 表格。导入选项现在允许禁用数值的自动格式化。我将任何敏感列设置为纯文本并下载为 xlsx。

这是一个糟糕的工作流程，但至少我的价值观保持原样。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2017-09-17T16:04:02.703

我制作了这个 VBA 宏，它基本上在粘贴数字之前将输出范围格式化为文本。当我想粘贴诸如 8/11、23/6、1/3 等值而不用 Excel 将它们解释为日期时，它非常适合我。

```
Sub PasteAsText()
' Created by Lars-Erik Sørbotten, 2017-09-17
Call CreateSheetBackup

Columns(ActiveCell.Column).NumberFormat = "@"

Dim DataObj As MSForms.DataObject
Set DataObj = New MSForms.DataObject
DataObj.GetFromClipboard

ActiveCell.PasteSpecial

End Sub 
```

我很想知道这是否也适用于其他人。我一直在寻找解决这个问题的方法，但我还没有看到不包括`'`在输入文本前面插入的快速 VBA 解决方案。此代码以原始形式保留数据。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-07-26T22:28:34.377

## 如果可以更改文件源数据

如果您准备更改原始源 CSV 文件，另一种选择是更改数据中的“分隔符”，因此如果您的数据是“4/11”（或 4-11）并且 Excel 会将其转换为 4/11 /2021（英国或 11-4-2021 美国），然后将“/”或“-”字符更改为其他字符将阻止不需要的 Excel 日期转换。选项可能包括：

*   波浪号 ('~')
*   加号（'+'）
*   下划线（'_'）
*   双破折号 ('--')
*   破折号（Alt 150）
*   破折号（Alt 151）
*   （其他角色！）

注意：如果文件要在其他地方使用，移动到 Unicode 或其他非 ascii/ansi 字符可能会使事情复杂化。

**因此，将 '4-11' 转换为带有波浪号的 '4~11' 不会被视为日期！**

对于大型 CSV 文件，这没有额外的开销（即：额外的引号/空格/制表符/公式结构），并且仅在直接打开文件时起作用（即：双击 CSV 以打开）并避免将列预先格式化为文本或将 CSV 文件作为文本“导入”。

如有必要，记事本（或类似工具）中的搜索/替换可以轻松转换为替代分隔符/从替代分隔符转换。

## 导入原始数据

在较新版本的 Excel 中，您可以导入数据（在其他答案中概述）。在旧版本的 Excel 中，您可以安装“Power Query”加载项。此工具还可以在不转换的情况下导入 CSV。选择：Power Query 选项卡/来自文件/来自 Text-CSV，然后“加载”以作为表格打开。（您可以从“数据类型检测”选项中选择“不检测数据类型”）。

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2008-10-02T23:43:02.067

另一种方法：

将要更改的列的格式转换为“文本”。选择要保留的所有单元格，复制。在不取消选择这些列的情况下，单击“编辑 > 选择性粘贴 > 作为值”

另存为 CSV。请注意，这必须是您对文件执行的最后一件事，因为当您重新打开它时，它会将自身格式化为日期，因为单元格格式无法保存在 CSV 文件中。

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2015-10-24T19:46:00.230

将表格粘贴到 word 中。进行搜索/替换并将所有 - （破折号）更改为 -- （双破折号）。复制并粘贴到 Excel 中。可以对其他符号 (/) 等执行相同操作。如果需要在 Excel 中更改回破折号，只需将该列格式化为文本，然后进行更改。希望这可以帮助。

* * *

## 回答 #33

> 赞同：-2
> 
> 时间：2008-10-02T23:33:00.547

如果在字段的开头放置一个逗号，它将被解释为文本。

例子： `25/12/2008`变成`'25/12/2008`

您还可以在导入时选择字段类型。

* * *

## 回答 #34

> 赞同：-2
> 
> 时间：2014-10-21T15:19:51.317

**双引号中的空格**前缀解决了这个问题！

我在 .csv 文件列之一中有类似**“7/8”的数据，MS-Excel 将其转换为日期为“07-Aug”。**但是使用“LibreOffice Calc”没有问题。

为了解决这个问题，我只是为空格字符（在 7 之前添加了空格）添加了前缀，例如**“7/8”**，它对我有用。这是针对 Excel-2007 测试的。

* * *

## 回答 #35

> 赞同：-4
> 
> 时间：2011-02-24T08:10:04.973

```
SELECT CONCAT('\'',NOW(),'\''), firstname, lastname 
FROM your_table
INTO OUTFILE 'export.csv' 
FIELDS TERMINATED BY ',' 
ENCLOSED BY '\"' 
LINES TERMINATED BY '\n' 
```

* * *

## 回答 #36

> 赞同：-5
> 
> 时间：2013-05-03T05:55:30.500

CSV - 逗号分隔值。只需通过文本编辑器而不是 xls/xlsx/exel 创建/编辑。在编辑中，您可以将日期设置为所需的格式，并且必须保持原样。这是假设随后以编程方式处理相同的文件。

# java - 整数内的字母。这些是什么？

> ID：165043
> 
> 赞同：11
> 
> 时间：2008-10-02T23:31:07.777
> 
> 标签：java, types, double, int, literals

这是我在 Java 中使用的一个类的代码摘录（如下）。显然，代码定义了一个名为 EPSILON 的静态变量，其数据类型为 double。我不明白的是“1E-14”部分。那是一个什么样的号码？这是什么意思？

最终双 EPSILON = 1E-14；

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-10-02T23:33:44.290

在您的情况下，这相当于编写：

```
final double EPSILON = 0.00000000000001; 
```

除非您不必计算零。这称为[科学记数法](http://en.wikipedia.org/wiki/Scientific_notation)，在编写非常大或非常小的数字时很有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-02T23:33:37.333

“E”记数法是科学记数法。你也会在计算器上看到它。它的意思是“一次（十次方的-14）”。

再举一个例子，2E+6 == 2,000,000。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-02T23:33:14.900

1E3 => 1000

1E-1 => 0.1

1E-2 => 0.01

这是写 1 * 10 ^(-14的一种方式)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-02T23:34:37.067

那是[指数符号](http://en.wikipedia.org/wiki/Exponential_notation#E_notation)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-02T23:33:43.883

1E-14 是 1 乘以 10 的 -14 次方

# .net - 如何卸载 .NET 框架？

> ID：165066
> 
> 赞同：4
> 
> 时间：2008-10-02T23:36:02.723
> 
> 标签：.net

我在某些机器上运行 VS 2005 应用程序时遇到问题，而在其他机器上却没有。我在谷歌上查找了错误消息，发现了一个有同样错误的人的帖子，并通过卸载并重新安装 .NET 框架来修复它。当我尝试这样做时，Windows 不会让我这样做，因为它正在使用中。

我是否应该先卸载使用框架的所有内容，然后卸载框架，然后重新安装等？有谁知道更简单的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-02T23:40:00.657

查看 Aaron Stebner 的[.NET Framework Cleanup Tool](http://blogs.msdn.com/b/astebner/archive/2008/08/28/8904493.aspx)。工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-03T00:27:38.200

启动到安全模式并从添加/删除程序中卸载框架。

# apache - (Apache) 错误日志美化器

> ID：165072
> 
> 赞同：11
> 
> 时间：2008-10-02T23:38:26.277
> 
> 标签：apache, logging

任何人都知道一个好的错误日志美化器？（应该能够处理 apache 错误日志）。

应该是开源/免费的，最好带有网络界面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T15:52:51.167

我使用[http://www.librelogiciel.com/software/ScanErrLog/action_Presentation](http://www.librelogiciel.com/software/ScanErrLog/action_Presentation)它贯穿错误日志，生成摘要网页或其他一些格式。虽然它最好从常规的 cron-job 运行（它会记录之前解析的内容以节省工作量），它也可以作为 CGI 运行（尽管演示似乎被破坏了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-04T19:28:16.003

您可以在以下地址查看使用[Analog](http://www.analog.cx/)和[Report Magic](http://www.reportmagic.org/)生成的示例报告：[http](http://www.reportmagic.org/sample/index.html) ://www.reportmagic.org/sample/index.html 。失败报告很简单，但却是一个起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T21:23:32.977

我使用[Webalizer](http://www.webalizer.org/)来处理我网站的日志。它的 Web 界面可能有点过时，但它非常强大、可靠并且可以处理非常大的日志。在我的书中设置一个很大的优点也很容易，因为你不想担心软件，你只想可视化数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-19T07:57:57.500

[阿帕奇电锯](http://logging.apache.org/chainsaw/index.html)

# vb.net - 使用 HashTable 映射对象引用

> ID：165075
> 
> 赞同：0
> 
> 时间：2008-10-02T23:39:27.957
> 
> 标签：vb.net, hashtable

我想使用 HashTable 映射对对象的引用而不是对象值

```
configMapping.Add("HEADERS_PATH", Me.headers_path) 
```

这样，当我要检索“HEADERS_PATH”的值时，我就可以为 Me.headers_path 分配一个值

类似于 C 中的“&”运算符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-02T23:45:14.183

我假设*Me.headers_path*是 System.String。因为**System.String**是不可变的，所以您想要的无法实现。但是您可以添加额外的间接级别来实现类似的行为。

> 计算机科学中的所有问题都可以通过另一个层次的间接来解决。 *巴特勒兰普森*

C# 中的示例（请善意编辑到 VB 并稍后删除此评论）：

```
public class Holder<T> {
    public T Value { get; set; }
}

...

Holder<String> headerPath = new Holder<String>() { Value = "this is a test" };
configMapping.Add("HEADERS_PATH", headerPath);

...

((Holder<String>)configMapping["HEADERS_PATH"]).Value = "this is a new test";

// headerPath.Value == "this is a new test" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T23:44:05.013

使 headers_path 成为一个礼节（带有集合）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T23:49:24.020

这似乎是一个字典，在 .Net 2.0 中，如果要更新的引用始终是字符串，则可以将其定义为 Dictionary，如果要获取任意引用，则可以定义为 Dictionary（不推荐）。

如果您需要替换字典中的值，您可以定义自己的类并提供一些辅助方法来简化此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-13T19:42:18.457

我不完全确定你想做什么。假设 smink 是正确的，那么这里是他的代码的 VB 翻译。抱歉，我无法编辑它，我认为我还没有足够的代表。

```
public class Holder(Of T)
    public Value as T 
end class
...
Dim headerPath as new Holder(Of String)
headerPath.Value = "this is a test"
configMapping.Add("HEADERS_PATH", headerPath)
...
Directcast(configMapping["HEADERS_PATH"]),Holder(Of String)).Value = "this is a new test"

'headerPath.Value now equals "this is a new test" 
```

@marcj - 你需要在你的答案中转义尖括号，所以使用 < 对于 < 和 > 对于 >。再次抱歉，我不能只为您编辑您的帖子。

# html - 使用 CSS 插入链接

> ID：165082
> 
> 赞同：20
> 
> 时间：2008-10-02T23:42:47.000
> 
> 标签：html, hyperlink, fogbugz

我正在手动维护一个 HTML 文档，并且正在寻找一种方法来自动在表格中的文本周围插入链接。让我举例说明：

```
<table><tr><td class="case">123456</td></tr></table> 
```

我想在我们的错误跟踪系统（顺便说一下，它是 FogBugz）中，自动将带有“案例”类的 TD 中的每个文本链接到该案例。

所以我希望将“123456”更改为这种形式的链接：

```
<a href="http://bugs.example.com/fogbugz/default.php?123456">123456</a> 
```

那可能吗？我玩过 :before 和 :after 伪元素，但似乎没有办法重复案例编号。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-02T23:47:27.517

不是以跨浏览器工作的方式。但是，您可以使用一些相对简单的 Javascript 来做到这一点。

```
function makeCasesClickable(){
    var cells = document.getElementsByTagName('td')
    for (var i = 0, cell; cell = cells[i]; i++){
        if (cell.className != 'case') continue
        var caseId = cell.innerHTML
        cell.innerHTML = ''
        var link = document.createElement('a')
        link.href = 'http://bugs.example.com/fogbugz/default.php?' + caseId
        link.appendChild(document.createTextNode(caseId))
        cell.appendChild(link)
    }
} 
```

您可以使用类似的东西来应用它`onload = makeCasesClickable`，或者只是将它包含在页面的末尾。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-03T00:03:26.183

这是特定于您发布的 HTML的[jQuery解决方案：](http://jquery.com)

```
$('.case').each(function() {
  var link = $(this).html();
  $(this).contents().wrap('<a href="example.com/script.php?id='+link+'"></a>');
}); 
```

本质上，在每个 .case 元素上，都会抓取元素的内容，并将它们放入包裹在它周围的链接中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-02T23:50:47.010

使用 CSS 是不可能的，而且这不是 CSS 的用途。客户端 Javascript 或服务器端（插入选择的语言）是要走的路。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T23:52:09.050

我认为CSS不可能。CSS 只应该影响内容的外观和布局。

这似乎是 PHP 脚本（或其他语言）的工作。您没有提供足够的信息让我知道最好的方法，但可能是这样的：

```
function case_link($id) {
    return '<a href="http://bugs.example.com/fogbuz/default.php?' . $id . '">' . $id . '</a>';
} 
```

然后稍后在您的文档中：

```
<table><tr><td class="case"><?php echo case_link('123456'); ?></td></tr></table> 
```

如果你想要一个 .html 文件，只需从命令行运行脚本并将输出重定向到一个 .html 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T00:06:56.113

你可以有这样的东西（使用Javascript）。里面`<head>`有

```
<script type="text/javascript" language="javascript">
  function getElementsByClass (className) {
    var all = document.all ? document.all :
      document.getElementsByTagName('*');
    var elements = new Array();
    for (var i = 0; i < all.length; i++)
      if (all[i].className == className)
        elements[elements.length] = all[i];
    return elements;
  }

  function makeLinks(className, url) {
    nodes = getElementsByClass(className);
    for(var i = 0; i < nodes.length; i++) {
      node = nodes[i];
      text = node.innerHTML
      node.innerHTML = '<a href="' + url + text + '">' + text + '</a>';
    }
  }
</script> 
```

然后在结束时`<body>`

```
<script type="text/javascript" language="javascript">
  makeLinks("case", "http://bugs.example.com/fogbugz/default.php?");
</script> 
```

我已经测试过了，它工作正常。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-06-25T15:09:00.860

我知道这是一个老问题，但我偶然发现了这篇文章，寻找使用 CSS 创建超链接的解决方案并最终制作了我自己的，对于像我一样偶然发现这个问题的人可能会感兴趣：

这是一个名为 'linker();' 的 php 函数，它启用了一个虚假的 CSS 属性

> 连接：'url.com'；

对于#id 定义的项目。只需让 php 在您认为值得链接的每个 HTML 项目上调用它。输入是 .css 文件**作为字符串**，使用：

> $style_cont = file_get_contents($style_path);

以及对应项目的#id。这是整个事情：

```
 function linker($style_cont, $id_html){

    if (strpos($style_cont,'connect:') !== false) {

        $url;
        $id_final;
        $id_outer = '#'.$id_html;
        $id_loc = strpos($style_cont,$id_outer);    

        $connect_loc = strpos($style_cont,'connect:', $id_loc);

        $next_single_quote = stripos($style_cont,"'", $connect_loc);
        $next_double_quote = stripos($style_cont,'"', $connect_loc);

        if($connect_loc < $next_single_quote)
        {   
            $link_start = $next_single_quote +1;
            $last_single_quote = stripos($style_cont, "'", $link_start);
            $link_end = $last_single_quote;
            $link_size = $link_end - $link_start;
            $url = substr($style_cont, $link_start, $link_size);
        }
        else
        {
            $link_start = $next_double_quote +1;
            $last_double_quote = stripos($style_cont, '"', $link_start);
            $link_end = $last_double_quote;
            $link_size = $link_end - $link_start;
            $url = substr($style_cont, $link_start, $link_size);    //link!
        }

        $connect_loc_rev = (strlen($style_cont) - $connect_loc) * -1;
        $id_start = strrpos($style_cont, '#', $connect_loc_rev);
        $id_end = strpos($style_cont,'{', $id_start);
        $id_size = $id_end - $id_start;
        $id_raw = substr($style_cont, $id_start, $id_size);
        $id_clean = rtrim($id_raw);                             //id!

        if (strpos($url,'http://') !== false) 
        {
            $url_clean = $url;
        }
        else
        {
            $url_clean = 'http://'.$url;
        };

        if($id_clean[0] == '#')
        {
            $id_final = $id_clean;

            if($id_outer == $id_final)
            {
                echo '<a href="';
                echo $url_clean;
                echo '" target="_blank">';
            };
        };
    };
}; 
```

这可能可以使用 .wrap() 或 getelementbyID() 之类的命令来改进/缩短，因为它只生成`<a href='blah'>`部分，但是`</a>`如果没有开始子句，它仍然会消失，如果你只是将它们添加到任何地方：D

# git - 我可以在 git 的一个命令中推送到多个存储库吗？

> ID：165092
> 
> 赞同：41
> 
> 时间：2008-10-02T23:45:28.833
> 
> 标签：git, version-control

基本上我想做类似的事情`git push mybranch to repo1, repo2, repo3`

现在我只是多次输入 push，如果我急于完成推送，我只是将它们全部发送到后台`git push repo1 & git push repo2 &`

我只是想知道`git`本机是否支持我想做的事情，或者是否有一个聪明的脚本，或者可能是一种编辑本地 repo 配置文件的方法，说应该将一个分支推送到多个遥控器。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2008-10-03T09:10:20.287

您可以在 git 中为每个远程设置多个 URL，即使该`git remote`命令似乎没有显示我上次检查的内容。在`.git/config`中，输入如下内容：

```
[remote "public"]
    url = git@github.com:kch/inheritable_templates.git
    url = kch@homeserver:projects/inheritable_templates.git 
```

现在你可以说“<code>git push public”同时推送到两个仓库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-02T23:58:55.073

我所做的是在我推送到的主目录中拥有一个单一的裸存储库。然后，该存储库中的更新后挂钩会推送或 rsync 到其他几个公开可见的位置。

这是我的钩子/更新后：

```
#!/bin/sh
#
# An example hook script to prepare a packed repository for use over
# dumb transports.
#
# To enable this hook, make this file executable by "chmod +x post-update".

# Update static info that will be used by git clients accessing
# the git directory over HTTP rather than the git protocol.
git-update-server-info

# Copy git repository files to my web server for HTTP serving.
rsync -av --delete -e ssh /home/afranco/repositories/public/ afranco@slug.middlebury.edu:/srv/www/htdocs/git/

# Upload to github
git-push --mirror github 
```

# c++ - 部分模板专业化的“不完整类型的无效使用”错误

> ID：165101
> 
> 赞同：42
> 
> 时间：2008-10-02T23:47:55.723
> 
> 标签：c++, gcc, templates, partial-specialization

以下代码：

```
template <typename S, typename T>
struct foo {
   void bar();
};

template <typename T>
void foo <int, T>::bar() {
} 
```

给我错误

```
invalid use of incomplete type 'struct foo<int, T>'
declaration of 'struct foo<int, T>' 
```

（我正在使用 gcc。）我的部分专业化语法是否错误？请注意，如果我删除第二个参数：

```
template <typename S>
struct foo {
   void bar();
};

template <>
void foo <int>::bar() {
} 
```

然后它可以正确编译。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2008-10-03T00:05:53.807

你不能部分专门化一个函数。如果您希望在成员函数上这样做，则必须部分专门化整个模板（是的，这很烦人）。在大型模板类中，要部分专门化一个函数，您需要一种解决方法。也许模板化的成员结构（例如`template <typename U = T> struct Nested`）会起作用。或者，您可以尝试从另一个部分专业化的模板派生（如果您使用该`this->member`表示法，则可以使用，否则您将遇到编译器错误）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-19T13:05:11.567

虽然 coppro 已经提到了两个解决方案，并且 Anonymous 解释了第二个，但我花了很长时间才理解第一个。也许下面的代码对偶然发现这个网站的人有帮助，这个网站在谷歌中仍然排名很高，比如我。该示例（将 numericT 的向量/数组/单个元素作为 dataT 传递，然后通过 [] 或直接访问它）当然有些人为，但应该说明您实际上如何非常接近通过包装成员函数来部分特化它在部分专业课上。

```
/* The following circumvents the impossible partial specialization of 
a member function 
actualClass<dataT,numericalT,1>::access
as well as the non-nonsensical full specialisation of the possibly
very big actualClass. */

//helper:
template <typename dataT, typename numericalT, unsigned int dataDim>
class specialised{
public:
  numericalT& access(dataT& x, const unsigned int index){return x[index];}
};

//partial specialisation:
template <typename dataT, typename numericalT>
class specialised<dataT,numericalT,1>{
public:
  numericalT& access(dataT& x, const unsigned int index){return x;}
};

//your actual class:
template <typename dataT, typename numericalT, unsigned int dataDim>
class actualClass{
private:
  dataT x;
  specialised<dataT,numericalT,dataDim> accessor;
public:
  //... for(int i=0;i<dataDim;++i) ...accessor.access(x,i) ...
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-06-04T19:06:55.423

如果您需要部分专门化构造函数，您可以尝试以下操作：

```
template <class T, int N>
struct thingBase
{
    //Data members and other stuff.
};

template <class T, int N> struct thing : thingBase<T, N> {};

template <class T> struct thing<T, 42> : thingBase<T, 42>
{
    thing(T * param1, wchar_t * param2)
    {
        //Special construction if N equals 42.
    }
}; 
```

注意：这是从我正在处理的事情中匿名的。当您有一个包含大量成员的模板类并且您只想添加一个函数时，您也可以使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-02T11:50:32.250

如果您正在阅读这个问题，那么您可能希望被提醒，虽然您不能部分专门化方法，但您可以添加一个非模板化重载，它将优先于模板化函数调用。IE

```
struct A
{
  template<typename T>
  bool foo(T arg) { return true; }

  bool foo(int arg) { return false; }

  void bar()
  {
    bool test = foo(7);  // Returns false
  }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-22T19:03:56.553

在 C++ 17 中，我使用“if constexpr”来避免专门化（和重写）我的方法。例如 ：

```
template <size_t TSize>
struct A
{
    void recursiveMethod();
};

template <size_t TSize>
void A<TSize>::recursiveMethod()
{
    if constexpr (TSize == 1)
    {
        //[...] imple without subA
    }
    else
    {
        A<TSize - 1> subA;

        //[...] imple
    }
} 
```

避免专门化 A<1>::recursiveMethod()。您也可以将此方法用于以下示例：

```
template <typename T>
struct A
{
    void foo();
};

template <typename T>
void A<T>::foo()
{
    if constexpr (std::is_arithmetic_v<T>)
    {
        std::cout << "arithmetic" << std::endl;
    }
    else
    {
        std::cout << "other" << std::endl;
    }
}

int main()
{
    A<char*> a;
    a.foo();

    A<int> b;

    b.foo();
} 
```

输出 ：

```
other
arithmetic 
```

# .net - Linq to SQL 有什么问题？

> ID：165102
> 
> 赞同：9
> 
> 时间：2008-10-02T23:48:48.997
> 
> 标签：.net, database, linq-to-sql

Linq to SQL 有什么问题？

或者 - Linq to SQL 会使其不适合新项目或现有项目吗？我想听听为什么您**不会**为特定项目选择 Linq to SQL - 包括哪些项目参数使其不适合。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-02T23:57:06.230

它不太适应数据库模式的变化。您必须重建 dbml 层并重新生成数据上下文。

像任何 ORM 一样（我不参与关于它是否是 ORM 的辩论），您必须知道正在生成什么 SQL，以及这将如何影响您的调用。

插入不是批处理的，因此性能成本可能很高。

它正在被淘汰以支持实体框架

尽管它使用的提供程序模型允许为其他 DBMS 平台构建提供程序，但仅支持 SQL Server。

[**编辑**@ AugustLights - 根据我的经验：] 延迟加载*可能*需要一些黑客才能开始工作。

话虽如此，我认为如果使用得当，它会非常方便

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-03T02:25:30.353

对于需要使用 SQL Server 以外的数据库的项目：

1) 你被锁定在使用 SQL Server

对于具有复杂实体关系和/或关系随时间逐渐变化的项目：

2）您被锁定在表到类的一对一映射中

对于必须使用 .NET 1.x 版本的项目

3) 不适用于 .NET 1.x

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-06T04:01:48.557

*   无法在数据上下文上混合使用延迟加载/急切加载。
*   真正的坚持无知是非常困难的。
*   映射选项是有限的。例如，没有多对多关系。
*   将映射与架构更改重新同步是很痛苦的。

尽管如此，我认为 linq-to-sql 是许多项目的绝佳选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-03T00:11:04.247

由于类上缺少接口，因此在单元测试时很难模拟`System.Data.Linq.DataContext`。这是一种可能的方法：[Mocking LINQ to SQL DataContext](http://andrewtokeley.net/archive/2008/07/06/mocking-linq-to-sql-datacontext.aspx)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-03T00:18:57.597

因为你没有使用 3.5 ......这是一个有效的答案吗？！？！？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-02T23:51:57.227

好吧，我已经使用 LINQ to SQL 开发了一些应用程序。我发现的主要问题之一是必须对您的应用程序进行分层。在 LINQ to SQL 中，实体类与数据访问代码密切相关。此外，DataContext 存在一些问题，这意味着您可以使用 DataContext 对象来检索项目，但不能将项目（对象）转移到另一个 DataContext（至少不容易）。

如果您不关心正确分层应用程序，并且如果您只想以快速方式创建应用程序（也称为快速应用程序开发），LINQ to SQL 将很有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-03T00:05:13.137

LINQ-to-SQL 的许多优势来自于能够基于您的 dbml 中的强类型可查询/可枚举数据对象（它扮演非常有限的 DAL 的角色）在您的代码隐藏中构建数据查询. 因此，正如已经提到的那样，结果是它在某种程度上鼓励您在应用程序中使用严格定义和分离的层或层。
为了反驳这一点，这应该意味着您应该能够消除您写入数据库存储过程中的大部分或全部任何业务逻辑，因此至少您只需转到处理数据的代码即可更改不影响模式的业务规则...但是，当您意识到使用带有分组的聚合的外部联接编写查询是多么复杂时，至少在您第一次接近它时，这会有点崩溃。所以你会很想在你知道的 SQL 中编写存储过程，它是如此简单且擅长做这些事情，而不是花额外的时间试图找出 LINQ 语法来做同样的事情，而它只是要转换它无论如何都要丑陋的SQL代码......
话虽如此，我真的很喜欢 LINQ，当我开始忽略这种“查询语法更容易阅读”的情绪并转向方法语法时，我对它的尊重大大增加了。再也没有回头。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-06T05:21:04.887

如果您想使用除 SQL Server 之外的其他 RDBMS，我将其标记为技术“搅局者”的唯一事情。（虽然它可以解决 - 请参阅 Matt Warren 的博客 @ [http://blogs.msdn.com/mattwar/](http://blogs.msdn.com/mattwar/)）

除此之外，您的问题的先前答案中已经列出了一些优点和缺点。但是，到目前为止提到的所有负面因素都有解决方法，因此它们并不是真正的阻碍。

一个非技术性的 [潜在] 阻碍是 MSFT 将放弃它转而支持 EF 的风险......更多信息请点击此处： http: [//oakleafblog.blogspot.com/2008/05/is-adonet-team-abandoning- linq-to-sql.html](http://oakleafblog.blogspot.com/2008/05/is-adonet-team-abandoning-linq-to-sql.html)

尽管（在我看来，）EF 的当前状态足以让他们继续在 L2S 上工作。所以让我们希望他们这样做...

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-14T19:48:23.517

一个真正的 ORM 应该将您的业务实体的设计与您的持久性介质分开。这样，您可以分别重构其中任何一个，并且只需要维护两者之间的映射。这减少了您需要为数据库更改维护的应用程序逻辑代码量。

要使用 Linq-to-SQL 完成这种与持久性无关的方法，您必须在 DTO 处使用其生成的类并维护 DTO 和实体之间的映射逻辑。

采用这种方法有更好的 ORM（如 NHibernate），可以大大减少对 DTO 的需求。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-14T19:09:57.117

它[似乎不](https://stackoverflow.com/questions/201706/how-do-i-ensure-linq-to-sql-doesnt-override-or-violate-non-nullable-db-default)支持 DB 列的默认值。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-10-03T15:20:44.180

这个问题以前[在这里](https://stackoverflow.com/questions/72168/does-linq-to-sql-provide-faster-response-times-than-using-adonet-and-oledb#73805)被问过一次。但是，实质上，LINQ to SQL 会在您的数据库中生成次优执行计划。对于您搜索的每个不同长度的参数，它将强制创建不同的执行计划。这最终会阻塞数据库中用于缓存执行计划的内存，并且您将开始使旧查询过期，当它们再次出现时需要重新编译。

正如我在链接到的问题中提到的那样，这取决于您要完成的工作。如果您愿意以执行速度换取开发速度，LINQ to SQL 可能是一个不错的选择。如果您担心执行速度，还有其他可用的 ORM/DAL/解决方案可能需要更长的时间才能使用，但会以额外的开发开销为代价，为您提供未来针对模式更改和性能更好的解决方案的证明。

# oracle - 如何禁用正在监听 8080 的 Oracle XE 组件？

> ID：165105
> 
> 赞同：28
> 
> 时间：2008-10-02T23:49:33.317
> 
> 标签：oracle, oracle-xe

安装 Oracle XE 后，Oracle 中的某些东西正在侦听端口 8080。我不确定他们是否有 Apache HTTPD、Tomcat 或其他东西。但是我怎样才能禁用它呢？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-10-02T23:55:34.377

它是 Oracle XML DB HTTP Server；按如下方式禁用它：

```
sqlplus '/ as sysdba'
EXEC DBMS_XDB.SETHTTPPORT(0);
commit; 
```

您可能必须重新启动 Oracle XE（不仅仅是侦听器）。

# project-management - 完美的状态报告是什么样的？

> ID：165106
> 
> 赞同：7
> 
> 时间：2008-10-02T23:50:04.547
> 
> 标签：project-management, projects, status

我与许多异地开发商和承包商一起工作。我每天要求他们向我发送他们当天工作的快速 5 分钟状态。我有时必须将个人的状态整合到团队中，有时还要整合一周的状态，以便向我的客户报告期末。

我想学习：

*   完成的项目以及在每个项目上花费了多少时间
*   遇到的问题以及每个问题花费了多少时间
*   接下来要处理的项目，他们的估计（以工时为单位）和他们的目标日期
*   他们对工作的疑问

我正在寻找一种可以提供此信息的格式，同时：

*   让开发者快速完成（5-10分钟，不用想太多）
*   便于我快速阅读和浏览
*   对每个开发人员都是统一的

你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-03T02:23:45.613

你可能不想听到这个，但无论如何，这就是 -

我在办公桌两边都遇到过这种情况，得出的结论是，这些汇总的状态报告对您和开发人员来说完全是浪费时间。原因如下：

*   开发人员应该在指定期限内开发功能/可交付成果
*   开发人员应该在问题发生时提出问题
*   通信应根据需要双向流动

如果这些事情没有发生，再多的被动状态报告也无法解决不可避免出现的问题

在围栏的开发人员方面 - “快速五分钟状态”[我讨厌这个短语，五分钟并不快！] 打断了开发人员的流程，导致十五分钟（或更多）的生产力损失（乔尔甚至在博客上写道我认为这是）。但即使真的只有五分钟，如果你有十几个开发人员，那么你*每周*在管理上浪费五个工时（可能更像是 20 个）

在围栏的经理方面 - 按项目将个人的状态报告卷入团队等是非生产性的忙碌工作，也会浪费您的时间。很有可能甚至没有人阅读这些报告。

但真正的问题是：这种报告和汇总可能表明被动管理而不是主动管理。换句话说，无论使用什么方法——scrum、xp、敏捷、理性、瀑布、本土或其他方法——如果项目计划和执行得当，那么*你应该已经知道每个人都在做什么，*因为这是提前计划好的。不管是那天早上还是六个月前就计划好了。

暂时忽略客户要求，如果您真的每天都需要这些信息来管理项目，那么项目可能存在一些严重问题 -***每天***询问开发人员他们接下来要做什么以及需要多长时间例如，将暗示没有事先进行真正的计划......

至于客户的要求，如果他们绝对坚持这种细节[我知道，例如，一些政府机构就是这样做的]，那么最好的选择是提供一个 Web 界面或其他应用程序来自动化完成这项工作的单调乏味为你卷起来。您仍然会浪费开发人员的时间，但至少您不会浪费时间 ;-)

哦，从字面上回答你的问题：完美的状态报告说“符合项目计划的目标”，仅此而已;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-03T00:00:54.817

使用[Scrum](http://en.wikipedia.org/wiki/Scrum_(development))。创建 sprint backlog，有一个包含任务的电子表格和 sprint 每一天的列。要求人们填写每天每项任务的工作时间。发送每日报告，从 sprint 的燃尽图开始，然后为每个成员缩短两个单行 - 最后一个工作和下一个工作。发送带有燃尽图的每周报告、每个主要功能的红色/黄色/绿色状态（以及如果不是绿色的阻塞问题和注释）以及 sprint 待办事项上的剩余项目。

我没有示例链接，但这里有一些草稿：

```
2008 年 10 月 2 日 - 产品 A 的日常状态

<燃尽图>

团队成员 A
最后 24 位：特征 A
下一个 24：功能 A 单元测试

团队成员 B
最后 24: 错误监狱
下一个 24：特征 B

团队成员 C
最后 24 位：特征 C
下一个 24：特征 C
被阻止：依赖项 D - 仍在等待团队 D 的重新分发

```

```
2008 年 10 月 2 日 - 产品 A 每周状态

<燃尽图>

**功能 A** - 绿色
【注：红/黄/绿代表状态；使用背景颜色以及更好的可视化]
步入正轨

**功能 B** - 黄色
【注：红/黄/绿代表状态；使用背景颜色以及更好的可视化]
由于错误监狱而滑倒了一天
缓解措施：将对团队成员 A 的单元测试进行负载平衡

**功能 C** - 红色
【注：红/黄/绿代表状态；使用背景颜色以及更好的可视化]
功能因团队 D 的外部依赖而被阻止。取消阻止时没有 ETA。
缓解措施：考虑削减此 sprint 的功能

**里程碑时间表：**
计划完成 - 9/15（两周计划）
代码完成 - 10/15（四个星期的编码）
RC - 10/30（两周稳定和测试）

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T23:59:58.127

只需给他们一个模板，以您希望看到返回的数据的格式布局。如果您需要估算未来的工作。我不相信有人在 5 分钟内得出的估计。想都没想。

如果您当前正在使用任何项目管理软件，那么开发人员记录和审查（甚至只是记住）他们为您编译它所做的事情应该是微不足道的。理想情况下，他们会全天记录问题或问题，而不是仅仅为了填写报告而提出这些问题。

您的“我想学习”列表似乎是生成模板的绝佳起点。只有您会知道最适合您的格式是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T00:03:45.577

看起来你想做极限编程站立会议。

[http://www.extremeprogramming.org/rules/standupmeeting.html](http://www.extremeprogramming.org/rules/standupmeeting.html)

您可以使用带有 laudspeaker 或某些 VOIP 的电话与场外团队成员交谈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T00:14:09.077

一般来说，我只是依靠电子邮件作为提供状态报告的一种方式，它提供了完成的简单性和速度，但没有强制任何形式的统一性。

有许多选项可以实现这一点，但它们都有使过程更加复杂和耗时的风险。其中一些可能是：

一个在线表格，每个表格都有部分或多张电子表格，每张表格都是一个部分。

所有这些都需要你自己付出一些努力来创造它们，你是否需要出于某种目的的统一性？例如自动化汇总报告。

另一种方法是使用承包商在工作时填写的一些项目管理工具，您可以随时报告。我会推荐 Thoughtworks Studio Mingle，但它确实依赖于类似敏捷的过程。

# asp.net - Team Foundation Server 端口 8080 ASMX 访问问题

> ID：165127
> 
> 赞同：3
> 
> 时间：2008-10-02T23:55:54.970
> 
> 标签：asp.net, visual-studio, tfs

[为什么本地管理员组中的一个用户在访问http://localhost:8080/services/v1.0/Registration.asmx](http://localhost:8080/services/v1.0/Registration.asmx)时没有问题，而本地管理员组中的其他用户却得到 403（拒绝访问）错误（在事件簿）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-28T18:06:41.020

您是否检查了所有三个区域的权限。为此，您需要服务器、报告服务和共享点的权限。

我强烈建议您下载[Team Foundation Server Administrator 工具](http://go.microsoft.com/fwlink/?LinkId=59385)来执行此操作，否则可能会很痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T20:06:07.310

**rasx**，是的，该工具的界面并不是最好的。它基本上允许一种简单的方法来设置对 Team Foundation Server、Reporting Services 和 Sharepoint 的权限。

我遇到的大多数安全问题总是归结为特定用户的这三个权限之一。我很确定这就是你所经历的。**如果没有鸽子**提到的 Team Foundation 管理员工具，您仍然可以手动为每个区域添加权限。

令人遗憾的是，TFS 并没有一种简单的方法来管理所有地方的所有权限，但是你有它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-11-20T19:23:48.863

鸽子，我不确定 Team Foundation Server Administrator 工具在这方面有何帮助。我将它安装在 TF 服务器上，得到了一个空界面，看起来像是在等待预先退出的团队项目。

# multithreading - 基于 GPU 的显卡可以加速您的程序计算，如何？

> ID：165133
> 
> 赞同：6
> 
> 时间：2008-10-02T23:59:40.373
> 
> 标签：multithreading, gpu

我在[这篇文章](http://www.ddj.com/hpc-high-performance-computing/210605281)中读到，一家公司创建了一个软件，该软件能够并行使用多个基于 GPU 的视频卡，以每秒处理数千亿次定点计算。

该程序似乎在 Windows 中运行。是否可以从 Windows 将线程分配给 GPU？他们会创建自己的驱动程序然后与之交互吗？知道他们是如何做到的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T00:02:37.467

我想他们正在使用像[CUDA](http://en.wikipedia.org/wiki/CUDA)这样的语言来对 GPU 上的关键代码部分进行编程，以加速他们的计算。

程序（及其线程）的主要功能仍将在主机 CPU 上运行，但数据会从 GPU 中运出以处理高级算法。CUDA 是 C 语法的扩展，因此它使程序员比学习[Cg](http://en.wikipedia.org/wiki/Cg_(programming_language))等较旧的着色器语言在 GPU 上编写通用计算更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-03T00:17:14.577

一个很好的起点[——GPGPU](http://en.wikipedia.org/wiki/GPGPU)

另外，郑重声明，我认为不存在非基于 GPU 的显卡之类的东西。GPU 代表图形处理单元，顾名思义，它是显卡的核心。

# c# - 如何在 .net 中为网络适配器设置 dns 搜索后缀？

> ID：165135
> 
> 赞同：3
> 
> 时间：2008-10-03T00:00:16.910
> 
> 标签：c#, .net, networking, wmi

我编写了一个命令行实用程序，用于检测连接的网络接口，并为其设置 staitc ip 地址和 dns 服务器（通过调用 netsh）。但是，我似乎无法弄清楚如何设置 dns 搜索后缀。netsh 似乎没有能力做到这一点。否则我该怎么做（也许是WMI）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T03:50:11.583

我认为您必须在 Win32_NetworkAdapterConfiguration WMI 对象的 DNSDomainSuffixSearchOrder 属性中设置所需的值。

如果需要，这里是在 WMI 中设置值的示例： [修改对象和运行方法](http://www.developerfusion.com/article/5450/using-wmi-from-managed-code/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-08T15:11:57.913

dns 搜索后缀对整机有效，对单个网卡无效。您也可以从注册表中获取它们：

```
string searchList = "";
try 
{
    using (var reg = Microsoft.Win32.Registry.LocalMachine.OpenSubKey(tcpSettingsSubKey))
    {
        searchList = (reg.GetValue("SearchList") as string);
    }
}
catch(Exception ex)
{
    // something went wrong
} 
```

（这不是机器是AD成员时默认的dns后缀）

# subsonic - SubSonic SubSonic.Sql查询和日期

> ID：165140
> 
> 赞同：0
> 
> 时间：2008-10-03T00:01:52.507
> 
> 标签：subsonic, date

SubSonic.SqlQuery 是否有一个介于/和的日期范围？如果不是，那么获得范围的最佳方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T00:31:17.007

尝试这样的事情：

```
SqlQuery query = new SqlQuery().From("Table")
                               .WhereExpression("Column")
                               .IsBetweenAnd("1/1/2008", "12/31/2008");
DataSet dataSet = query.ExecuteDataSet();  // Or whatever output you need 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-09T03:52:02.990

使用 SubSonic 进行查询的另一种方法。

`TableCollection data = new TableCollection();`

 ````
Query q = Table.CreateQuery()
        .BETWEEN_AND("Column", "1/1/2008", "12/31/2008");

 data.LoadAndCloseReader(q.ExecuteReader());

// loop through collection 
````  `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-02T18:27:31.047

结合罗斯文的答案：

```
 SqlQuery query = new SqlQuery().From("Orders")
                                                             .WhereExpression("OrderDate")
                                                             .IsBetweenAnd("1996-07-02", "1996-07-08");
        DataSet dataSet = query.ExecuteDataSet();  // Or whatever output you need

        #region PresentResultsReplaceResponseWriteWithConsole.WriteLineForConsoleApp

        DataTable dt = dataSet.Tables[0];
        Response.Write("<table>");
        foreach ( DataRow dr in dt.Rows ) 
        {
            Response.Write("<tr>");
                for (int i = 0; i < dt.Columns.Count; i++)
                {
                    Response.Write("<td>");
                    Response.Write(dr[i].ToString() + " ");
                    Response.Write("<td>");
                } //eof for 
                Response.Write("</br>");
                Response.Write("</tr>");

        }
        Response.Write("<table>");
        #endregion PresentResultsReplaceResponseWriteWithConsole.WriteLineForConsoleApp 
```

# silverlight - 如何在 Silverlight 2 中创建路由事件？

> ID：165143
> 
> 赞同：1
> 
> 时间：2008-10-03T00:02:38.933
> 
> 标签：silverlight, events

有人知道如何在 Silverlight 2 中创建路由事件吗？在 WPF 中，代码如下所示。但是，Silverlight 中没有 EventManager。

```
 public static readonly RoutedEvent ShowVideoEvent =
        EventManager.RegisterRoutedEvent("ShowVideo", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(NavBar));

    public event RoutedEventHandler ShowVideo
    {
        add { AddHandler(ShowVideoEvent, value); }
        remove { RemoveHandler(ShowVideoEvent, value); }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T14:42:49.903

至少目前，[似乎没有一种方法](http://blogs.telerik.com/HristoHristov/Posts/08-07-23/Routed_Events_in_Silverlight_2.aspx)可以创建自己的。然而，该帖子是针对 Beta2 的，查看 Beta2- [>RC0 破坏性更改的文档，](http://download.microsoft.com/download/6/F/E/6FE1F43D-9D0C-4346-AD08-602DF9BCB3CF/BreakingChangesBetweenBeta2andRelease.doc)似乎没有提及任何内容。但后来我想这可能不会是重大变化，我们总是希望 eh ;)

有许多[事件被路由](http://msdn.microsoft.com/en-us/library/cc189018(VS.95).aspx#bubbled)，但我再次不确定该文档是否已针对 RC0 进行了更新。

# .net - 在 PostBack 上重定向 UpdatePanel 内的父框架

> ID：165149
> 
> 赞同：1
> 
> 时间：2008-10-03T00:04:53.920
> 
> 标签：.net, javascript, asp.net-ajax, updatepanel

这是一个奇怪的问题，但我必须为我们的网站创建一个搜索框，该搜索框将在另一个网站上进行 iframe。当用户点击搜索按钮时，需要将父框架重定向到**我们的**搜索结果页面。

目前我所做的是使搜索按钮成为回发触发器，然后注册一个客户端脚本块来运行它：

```
if (window.parent) window.parent.location.href='<url>'; 
```

这*没关系*，但这似乎是一种黑客行为，这意味着如果用户在搜索后点击浏览器，它会将他们重定向回搜索结果页面。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-06T17:43:25.667

好的，既然没有其他人回答，我会试一试。

首先，您是否正在以真实世界的方式测试您正在使用的代码？我担心在实际应用程序中，您的 iframe 页面和父页面不会驻留在同一个域中。如果是这样，您的代码不可能有任何方法将父窗口定向到任何 URL。

如果您被允许控制父框架的位置，那么您的代码对我来说看起来不错。如果您不希望历史记录中的新网址，我相信您可以使用：

```
if (window.parent) { window.parent.location.replace("<url>"); }
```

参见例如：[“Javascript 重定向方法之间的区别”](http://www.bloggingdeveloper.com/post/Location-href-vs-Location-replace---The-Difference-Between-JavaScript-Redirect-Methods.aspx)

# wysiwyg - Is Dreamweaver worth getting if I probably won't use its WYSIWYG editor?

> ID：165151
> 
> 赞同：2
> 
> 时间：2008-10-03T00:05:17.117
> 
> 标签：wysiwyg

In the past I've done web application development using Visual Studio. Initially I'd use the design view, editing the page visually. But over time I learned more and more (X)HTML, CSS, and Javascript. I became familiar with the tags for ASP.NET server controls and their common attributes.

I got to the point where I'd do all the markup by hand (still in Visual Studio though) and then test the site in an actual browser. Of course I'd also still use Visual Studio for programming server side functionality in C#, but never the WYSIWYG page editor. I was able to get work done faster too, getting the site to look just the way I wanted, and the same across different browsers.

Now I'm going to be taking charge of a public facing website (entirely static content - no ASP.NET, PHP, or anything). The website was created and maintained using Dreamweaver, which I don't have and never used before.

I'll be working from home, so the organization is looking into getting me a copy of Dreamweaver. Even though it's not money out of my own pocket ...

## Is it worth using Dreamweaver if I probably won't touch the visual editor?

**Or should I tell them to save their money and I'll just use Notepad++.**

Or am I crazy and should relearn to use a WYSIWYG editor?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-03T00:16:13.407

You may not know until you see the code. If they were using things like Dreamweaver templates, unless you are going to extricate them, you may end up needing Dreamweaver for sanity sake.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-03T00:19:23.337

Dreamweaver is really useful if you maintain a site with templates. If the site is in PHP or ASP, then all you need to do is put the common parts (header, footer etc.) in a separate file and include them in the different pages. If the pages are static then the common parts can't be included. Which means that if you want to change the menu, you have to change it in all pages. With dreamweaver, you can save a page as a template and when you create a new page from a template, dreamweaver stores it in the comments. Next time you update the template, all the pages that use the template are updated. I found this to be the best use of dreamweaver.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-03T00:19:53.133

I do 95% of my web dev stuff using Dreamweaver's code editor. But, for the other 5%, the WYSIWYG stuff really comes in handy.

Plus, it's not your money anyway. I'd say get it and if the WYSIWYG stuff is too much for you just keep it in source code mode and use it as an editor.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-03T00:27:44.253

I haven't used a WYSIWYG HTML editor in *years*, all the HTML I produce these days is hand-coded, and it's something I would recommend to anyone. WYSIWYG Editors simply make it far too easy to throw in tons of unnecessary markup, and then you end up with unwieldy pages that are tricky to work with and hard to fix browser compatibility problems in.

However. If you're taking over a large existing codebase that *has* been produced this way, I'd say you probably want to make sure you at least *have access* to Dreamweaver or a similar editor (if they were produced in Dreamweaver, that's probably the best choice). Simply because many pages designed in this way are rather verbose, and can be a nightmare to deal with in a text editor.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-03T00:38:33.167

This depends - you mean old school Dreamweaver or CS4 Dreamweaver?

With all the new additions (code hinting with some of the newer javascript frameworks, a "preview" that is integrated with webkit so you can see your page in action, being able to test AJAX calls and do a "code freeze") I'm tempted to walk away from jedit and try it out.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-03T00:07:37.640

I believe that DreamWeaver gives you intellisense in the code editor for HTML, so I would use it for that, if you're not paying for it. I wouldn't pay for that myself though :)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-03T00:12:36.850

If the Visual Studio editor works fine for you, there is no point in switching.

And if you don't like WYSIWIG editing, then there's no point in learning it. I stopped using WYSIWIG years ago, and like you, I've found it to be much more flexible and reliable to edit HTML/CSS by hand.

If you like DreamWeaver more and the organisation is willing to pay for it, then go for it!

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-03T00:24:06.307

FWIW, I do a lot of HTML and javascript coding in dreamweaver's code view- the JSF extensions are nice as well. I got it as part of the CS3 bundle, since I needed to get my hands on photoshop and illustrator as well to carve up graphics. If possible, try to get your company to get the whole bundle, since graphics manipulation is always important when you're maintaining a site- and most designers will be giving you photoshop source files. I never ever go in wysiwyg mode, and it's still useful.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-03T22:16:19.183

I use dreamweaver, but not for the same reasons as everyone here seem to. I like the syntax highlighting, and I absolutely LOVE the way Dreamweaver handles FTP in the window on the right. If I could find another editor that would offer these two things, I would, but none seem to be that great.

I code my pages by hand usually (I do a LOT of PHP, which dreamweaver 8 obviously can't preview) so I do a lot of things like (1) edit page (2) upload changes (3) preview live on testing server. However, I still use the WYSIWIG editor occasionally, especially if I need to throw something together using tables or form elements. I just find it to be a bit quicker that way than doing things by hand.

That said, I *never* use Dreamweaver (8, mind) for CSS, as the implementation is buggy at best. I much prefer to do CSS and more complex HTML by hand. I also do not use the standard method of templating, as I prefer to have one "index.php" that calls in the appropriate template and stuffs data into it that it generated before.

All that said though, Dreamweaver offers a nice enough set of tools that I don't really want to leave it, and it certainly won't hurt to learn it, especially if its free. I'd say at least **try it out** and see if its going to work before making a final decision. It comes down to what you personally prefer to use.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-13T10:45:07.037

I hand-code but there are times Dreamweaver is incredibly useful:

1.  Making visual-tweaks to someone else's complex HTML. It's much quicker to use the WYSIWYG if you're short on time and the code is a mess.

2.  Dreamweaver has got an incredibly good search and replace. The tag-based searching is the best I've seen anywhere for you whilst the regex seach/replace allows back-references, named groups in the replace field etc.

The code Dreamweaver produces isn't too horrific and it's fairly good at not breaking your own nice code if you ever dip into the visual editor.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-01T21:38:09.277

I use dreamweaver CS5 for code only on a daily basis, and it's a great tool. It is very effective, and its a great tool even for people who already know how to write code. Some of its' features that make it one of the best editors, in my opinion, are:

*   Code coloring
*   Customizable color-schemes
*   Error highlighting
*   in-app validation
*   Autocomplete & Codehinting (works great!)
*   in-app FTP
*   New document type dialog (great for quick start)
*   Search & replace
*   Code Snippets

There are many more features, like setting up a local server and binding it to a database so you can write queries more easily and use dreamweaver's "help" with server-side code, but I haven't really got into it.

**Bottom line:** If you are considering getting Dreamweaver mostly for code editing, then I'd say it's definitely a great deal - even if you aren't going to use some of its' other features.

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2008-10-03T00:37:30.470

Dreamweaver's a tad bloated for something which you really can just do in Notepad (++ or otherwise). No WYSIWYG will give you code to the same quality as hand-crafted code. Especially since it's vanilla HTML, just use an everyday programmer's text editor. Having intellisense isn't that important: I mean, there's only about 10 tags you need to know.

# mysql - 关于主键和插入的简单mysql问题

> ID：165156
> 
> 赞同：8
> 
> 时间：2008-10-03T00:07:26.223
> 
> 标签：mysql, insert, primary-key

在mysql中，当它自动递增时，如何获取用于插入操作的主键。

基本上，我希望在语句完成时返回新的自动增量值。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-03T00:42:32.550

您的澄清评论说您有兴趣确保 LAST_INSERT_ID() 如果发生另一个并发 INSERT 不会给出错误的结果。请放心，无论其他并发活动如何，使用 LAST_INSERT_ID() 都是安全的。LAST_INSERT_ID() 仅返回当前会话期间生成的最新 ID。

你可以自己试试：

1.  打开两个 shell 窗口，在每个窗口中运行 mysql 客户端并连接到数据库。
2.  Shell 1：使用 AUTO_INCREMENT 键插入到表中。
3.  外壳 1：选择 LAST_INSERT_ID()，查看结果。
4.  Shell 2：插入到同一个表中。
5.  Shell 2：SELECT LAST_INSERT_ID()，查看与 shell 1 不同的结果。
6.  Shell 1： SELECT LAST_INSERT_ID() 再次，查看先前结果的重复。

如果您考虑一下，这是唯一有意义的方法。所有支持自动递增密钥机制的数据库都必须以这种方式运行。如果结果取决于与其他客户端可能同时插入的竞争条件，那么将没有可靠的方法来获取当前会话中最后插入的 ID 值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-03T00:11:59.627

MySQL 的**[LAST_INSERT_ID()](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T00:15:13.927

MySQL Docs 描述了该函数：[LAST_INSERT_ID()](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-10-03T00:17:57.490

[从 table_name 中选择 max(primary_key_column_name)] 啊，没必要。我不是 MySQL 人，但有一些特定的方法可以为最后完成的操作获取最后插入的 id，这些方法比这更强大。如果在您写入表和查询它之间发生了插入怎么办？我知道是因为它在很多个月前刺痛了我（所以它确实发生了）。如果一切都失败了阅读手册：[http ://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)

# ruby-on-rails - 在 Ruby on Rails 中，如何格式化带有“th”后缀的日期，例如“Sun Oct 5th”？

> ID：165170
> 
> 赞同：188
> 
> 时间：2008-10-03T00:12:07.317
> 
> 标签：ruby-on-rails, ruby, date

我想以以下格式显示日期：一周中的短日期、短月份、不带前导零但包括“th”、“st”、“nd”或“rd”后缀的月份中的某天。

例如，询问此问题的日期将显示“Thu Oct 2nd”。

我正在使用 Ruby 1.8.7，而[Time.strftime](http://ruby-doc.org/core/Time.html#method-i-strftime)似乎并没有这样做。如果存在，我更喜欢标准库。

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2008-10-03T00:25:37.660

使用“active_support”中的 ordinalize 方法。

```
>> time = Time.new
=> Fri Oct 03 01:24:48 +0100 2008
>> time.strftime("%a %b #{time.day.ordinalize}")
=> "Fri Oct 3rd" 
```

注意，如果你在 Ruby 2.0 中使用 IRB，你必须首先运行：

```
require 'active_support/core_ext/integer/inflections' 
```

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2008-10-03T00:21:31.430

您可以对数字使用 active_support 的 ordinalize 辅助方法。

```
>> 3.ordinalize
=> "3rd"
>> 2.ordinalize
=> "2nd"
>> 1.ordinalize
=> "1st" 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2009-01-11T16:10:30.970

进一步了解 Patrick McKenzie 的回答，您可以在您的`config/initializers`目录中创建一个名为`date_format.rb`（或您想要的任何内容）的新文件并将其放入其中：

```
Time::DATE_FORMATS.merge!(
  my_date: lambda { |time| time.strftime("%a, %b #{time.day.ordinalize}") }
) 
```

然后在您的视图代码中，您可以简单地通过为其分配新的日期格式来格式化任何日期：

```
My Date: <%= h some_date.to_s(:my_date) %> 
```

它很简单，可以工作，并且易于构建。只需在 date_format.rb 文件中为每种不同的日期格式添加更多格式行。这是一个更充实的例子。

```
Time::DATE_FORMATS.merge!(
   datetime_military: '%Y-%m-%d %H:%M',
   datetime:          '%Y-%m-%d %I:%M%P',
   time:              '%I:%M%P',
   time_military:     '%H:%M%P',
   datetime_short:    '%m/%d %I:%M',
   due_date: lambda { |time| time.strftime("%a, %b #{time.day.ordinalize}") }
) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-10-03T00:29:53.640

```
>> require 'activesupport'
=> []
>> t = Time.now
=> Thu Oct 02 17:28:37 -0700 2008
>> formatted = "#{t.strftime("%a %b")} #{t.day.ordinalize}"
=> "Thu Oct 2nd" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-10-03T01:37:38.347

我喜欢 Bartosz 的回答，但是，嘿，既然这是我们正在谈论的 Rails，让我们在迂回中更上一层楼。（编辑：虽然我打算只对以下方法进行monkeypatch，但事实证明有一种更清洁的方法。）

`DateTime`实例具有`to_formatted_s`由 ActiveSupport 提供的方法，该方法将单个符号作为参数，如果该符号被识别为有效的预定义格式，则返回具有适当格式的字符串。

这些符号由 定义`Time::DATE_FORMATS`，它是标准格式化函数的字符串的符号哈希...或 procs。哇哈哈。

```
d = DateTime.now #Examples were executed on October 3rd 2008
Time::DATE_FORMATS[:weekday_month_ordinal] = 
    lambda { |time| time.strftime("%a %b #{time.day.ordinalize}") }
d.to_formatted_s :weekday_month_ordinal #Fri Oct 3rd 
```

但是，嘿，如果你无法抗拒猴子补丁的机会，你总是可以给它一个更干净的界面：

```
class DateTime

  Time::DATE_FORMATS[:weekday_month_ordinal] = 
      lambda { |time| time.strftime("%a %b #{time.day.ordinalize}") }

  def to_my_special_s
    to_formatted_s :weekday_month_ordinal
  end
end

DateTime.now.to_my_special_s  #Fri Oct 3rd 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-10-20T14:52:10.527

## 创建自己的`%o`格式。

### 初始化器

**`config/initializers/srtftime.rb`**

```
module StrftimeOrdinal
  def self.included( base )
    base.class_eval do
      alias_method :old_strftime, :strftime
      def strftime( format )
        old_strftime format.gsub( "%o", day.ordinalize )
      end
    end
  end
end

[ Time, Date, DateTime ].each{ |c| c.send :include, StrftimeOrdinal } 
```

### 用法

```
Time.new( 2018, 10, 2 ).strftime( "%a %b %o" )
=> "Tue Oct 2nd" 
```

您也可以将其与`Date`和一起使用`DateTime`：

```
DateTime.new( 2018, 10, 2 ).strftime( "%a %b %o" )
=> "Tue Oct 2nd"

Date.new( 2018, 10, 2 ).strftime( "%a %b %o" )
=> "Tue Oct 2nd" 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-01-26T04:25:58.963

尽管 Jonathan Tran 确实说过他首先要查找缩写的星期几，然后是缩写的月份，但我认为对于最终来到这里的人来说，了解 Rails 对更多功能的开箱即用支持可能会很有用。常用的长月，有序日整数，后跟年份，如`June 1st, 2018`.

它可以通过以下方式轻松实现：

```
Time.current.to_date.to_s(:long_ordinal)
=> "January 26th, 2019" 
```

或者：

```
Date.current.to_s(:long_ordinal)
=> "January 26th, 2019" 
```

如果你愿意，你也可以坚持一个时间实例：

```
Time.current.to_s(:long_ordinal)
=> "January 26th, 2019 04:21" 
```

[您可以在Rails API 文档](https://api.rubyonrails.org/classes/Date.html#DATE_FORMATS)中找到更多关于如何创建自定义格式和上下文的信息。

# java - 令人困惑的退货声明

> ID：165175
> 
> 赞同：1
> 
> 时间：2008-10-03T00:14:29.123
> 
> 标签：java, floating-point, operator-precedence

我无法准确理解 IF 语句在做什么，从我可以看到它正在检查变量`x`是否等于 int `0`。如果这是返回`true`变量的绝对值`y`......这是我失去情节的时候，为什么 return 语句会继续包含`<= ESPILON`？当然这意味着小于或等于 epsilon 的值？如果是这样，那是如何工作的？如果不是这个意思，那又是什么意思？

（JAVA代码）

```
final double EPSILON = 1E-14;
if (x == 0)
    return Math.abs(y) <= EPSILON; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-03T00:17:44.183

浮点数学本质上是不准确的，因此开发人员选择了一个小数（在这种情况下为 1x10^-14）作为接近零的可接受容差，而不是测试等价性（这总是一个坏主意） . return 语句返回一个比较，所以它的作用是取 y 的绝对值，当且仅当它足够接近零时返回 true，其中足够接近由 EPSILON 定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-03T00:16:23.737

如果 y 的绝对值 <= EPSILON，则返回 true，否则返回 false。<= 在 return 语句之前进行评估。这段代码是等价的：

```
if(x == 0)
{
   boolean ret = Math.abs(y) <= EPSILON;
   return ret;
} 
```

代码不是简单地从左到右读取的。一个更简单的例子是

```
int x = 3 + 4 * 5; 
```

在评估之后，x 是 23，而不是 35。评估是 3 + (4*5)，而不是 (3+4)*5，因为 * 的优先级高于 +。原始示例中的 return 语句具有非常低的优先级。+、-、<、>= 等所有运算符都在它之前进行评估。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-03T00:17:36.540

整个表达式

```
Math.abs(y) <= EPSILON 
```

应该首先评估，这意味着该函数将返回一个布尔值（真/假）。话虽如此，如果

```
x != 0 
```

那么我不确定会返回什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T00:16:54.310

你是对的，它正在检查变量 x 是否等于（嗯，也许是 int）0。但是，如果这是真的，那么它不会返回 y 的绝对值，它会返回一个布尔值，即<= 运算符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-03T00:17:24.887

它返回一个布尔值。

Epsilon 是一个双精度数，其值为 1E-14。

这是实际的 IF 语句

```
if (x==0) {
    return MATH.abs(y) <= EPSILON;
} 
```

因此，返回的是 y 的绝对值是否小于或等于 Epsilon。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T00:18:38.440

我已经很久没有使用 Java 了，但看起来这实际上是在返回一个布尔值（可能是隐式转换的）。

我会说，如果 x 等于 0，则当 y <= Epsilon 的绝对值时返回 true，否则返回 false。

但是，如果 x 不等于 0，那么它将返回 null，因为没有语句涵盖 else。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-03T09:19:48.410

“问题”是这个片段严重依赖于运算符优先级（本身并不坏，但有时它可能会令人困惑）。

[在这里](http://java.sun.com/docs/books/tutorial/java/nutsandbolts/operators.html)，您可以找到所有 java 运算符及其优先级的列表，并[在此处](http://www.cppreference.com/wiki/operator_precedence)比较 C/C++ 的同一张表

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-03T13:23:17.287

相当于这个

```
return (Math.abs(y) <= EPSILON); 
```

为了清楚起见，应该将其添加到代码中。如前所述，它返回一个布尔值。

一个替代方案是

```
if (Math.abs(y) <= EPSILON)
    return true;
else
    return false; 
```

# c++ - Solaris 9 上的 printf + uint_64？

> ID：165188
> 
> 赞同：9
> 
> 时间：2008-10-03T00:17:40.207
> 
> 标签：c++, c, printf

我有一些使用 sprintf 将 uint_64 转换为字符串的 c(++) 代码。这需要可移植到 linux 和 Solaris。

在 linux 上我们使用 %ju，但在 Solaris 上似乎没有任何等价物。我能找到的最接近的是 %lu，但这会产生不正确的输出。一些示例代码：

```
#include <stdio.h>
#include <sys/types.h>

#ifdef SunOS
typedef uint64_t u_int64_t;
#endif

int main(int argc, char **argv) {
    u_int64_t val = 123456789123L;

#ifdef SunOS
    printf("%lu\n", val);
#else
    printf("%ju\n", val);
#endif
} 
```

在linux上，输出如预期；在 Solaris 9 上（不要问），它是“28”

我可以使用什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-03T00:22:30.070

如果你有 inttypes.h 可用，你可以使用它提供的宏：

```
printf(  "%" PRIu64 "\n", val); 
```

不漂亮（我最近似乎经常这么说），但它确实有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-03T00:33:05.067

在符合 C99 的系统上：

```
#include <inttypes.h>

uint64_t big = ...;
printf("%" PRIu64 "\n", big); 
```

请参阅 C99 标准的第 7.8 节。

说明符是 {PRI,SCN}[diouxX]{N,LEASTN,MAX,FASTN,PTR}

其中 PRI 用于 printf() 系列，SCN 用于 scanf() 系列，d 和 i 用于有符号整数类型；o,u,x,X 用于八进制、十进制、十六进制和十六进制等无符号整数类型；N 是支持的宽度之一；LEAST 和 FAST 对应于那些修饰符；PTR 用于 intptr_t；MAX 用于 intmax_t。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-03T00:23:29.087

答案取决于您的代码实际上是 C 还是 C++。在 C 中，您应该使用一种`unsigned long long`而不是另一种类型（这符合当前标准，并且`long long`就 C99 支持而言非常普遍），附加`ULL`而不是`L`您的常量，并使用（如前所述）`%llu`作为您的说明符。如果不存在对 C99 的支持，您可能需要查看编译器文档，因为没有其他标准方法可以做到这一点。`long long`保证至少为 64 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T00:20:26.410

你可以使用`%llu`很长时间。但是，这也不是很便携，因为`long long`不能保证是 64 位。:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T00:22:47.543

如果你想避免 SunOS 条件 typedef，你可以从中得到`uint64_t`。`stdint.h`

# javafx - 有人用xui吗？JavaFX？

> ID：165209
> 
> 赞同：1
> 
> 时间：2008-10-03T00:23:48.023
> 
> 标签：javafx, xui

警告：Java 新手。

一直在寻找Java的[XUI 。](http://www.xoetrope.com/xui)它看起来很有趣。有点类似于 WPF 设计界面的方式。但是在谷歌上搜索，除了说它已经发布的文章外，我没有看到太多。那么它使用得更多还是有点小众？

是否还有其他类似的 Java 框架？正在研究 JavaFX，但似乎普遍认为它的开发速度很慢。是否有其他以类似方式工作的框架？我得到的印象是 Swing/SWT 似乎更像 WinForms。我想做一些更像 WPF 的东西。正如我所说，Java 新手，所以我可能对这一切感到困惑。似乎有这么多的 UI 框架，它有点不知所措地为新项目使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T01:06:25.097

如果您不能使用 JavaFx，请查看[http://www.swixml.org](http://www.swixml.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-21T02:34:25.140

JavaFx 是一个很好的框架，它很容易学习和使用。还有一些不错的教程、doco、API 可用，目前仍仅在 Preview SDK 中，但预计下一个版本很快就会发布。

我建议试一试

[官方 javaFx 网站](http://javafx.com/)

[suns JavaFX 概述](http://www.sun.com/software/javafx/)

[打开jfx](https://openjfx.dev.java.net/)

# linux - linux：获取已运行进程的umask？

> ID：165212
> 
> 赞同：30
> 
> 时间：2008-10-03T00:24:43.607
> 
> 标签：linux, unix, umask

如何检查当前正在运行的程序的 umask？

[更新：另一个进程，不是当前进程。]

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-10-03T04:46:39.717

您可以将 gdb 附加到正在运行的进程，然后在调试器中调用 umask：

```
(gdb) attach <your pid>
...
(gdb) call umask(0)
[Switching to Thread -1217489200 (LWP 11037)]
$1 = 18 # this is the umask
(gdb) call umask(18) # reset umask
$2 = 0
(gdb) 
```

（注意：18 对应`O22`于本例中的 umask）

这表明使用 ptrace 获取 umask 可能有一种非常丑陋的方法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-03-28T10:14:52.180

从 Linux 内核 4.7 开始，umask 在`/proc/<pid>/status`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-03T01:19:25.050

来自 GNU C 库手册：

> 这是一个示例，展示了如何在`umask` 不永久更改掩码的情况下读取掩码：
> 
> ```
> mode_t
> read_umask (void)
> {
>   mode_t mask = umask (0);
>   umask (mask);
>   return mask;
> } 
> ```
> 
> 但是，`getumask`如果您只想读取掩码值，最好使用它，因为它是可重入的（至少如果您使用 GNU 操作系统）。

`getumask`不过，它是 glibc 特有的。因此，如果您重视可移植性，那么不可重入解决方案是唯一的解决方案。

编辑：我刚刚`->umask`通过 Linux 源代码搜索了所有内容。没有任何地方可以为您提供不同进程的 umask。此外，没有`getumask`; 显然这是赫德唯一的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-03T01:04:54.710

如果您是当前进程，则可以将文件写入 /tmp 并检查其设置。更好的解决方案是调用 umask(3) 传递零 - 函数返回调用之前的设置 - 然后通过将该值传递回 umask 将其重置。

另一个进程的 umask 似乎没有暴露。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-09T22:14:57.300

一位同事刚刚向我展示了这个命令行模式。我总是在运行 emacs，所以在下面的示例中。这`perl`是我的贡献：

```
sudo gdb --pid=$(pgrep emacs) --batch -ex 'call/o umask(0)' -ex 'call umask($1)' 2> /dev/null | perl -ne 'print("$1\n")if(/^\$1 = (\d+)$/)' 
```

# vim - Vim Dvorak 键绑定（重新绑定 :)

> ID：165231
> 
> 赞同：36
> 
> 时间：2008-10-03T00:30:43.157
> 
> 标签：vim, keyboard-shortcuts, dvorak

虽然我以前玩过它，但我终于开始定期使用[Dvorak (Simplified) 。](http://en.wikipedia.org/wiki/Dvorak_Simplified_Keyboard)几年来，我一直与 Vim 保持着稳定的关系，我正在尝试找出重新映射键绑定以适应我新发现的 Dvorak 技能的最佳方法。

*你*如何重新映射 Vim 的键绑定以最好地使用 Dvorak？

鼓励解释！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-10-03T00:41:15.750

我使用一种更[常见的推荐键绑定](http://vim.wikia.com/wiki/Change_cursor_movement_keys_for_Dvorak_layout)：

```
Dvorak it!
no d h
no h j
no t k
no n l
no s :
no S :
no j d
no l n
no L N
Added benefits
no - $
no _ ^
no N <C-w><C-w>
no T <C-w><C-r>
no H 8<Down>
no T 8<Up>
no D <C-w><C-r> 
```

移动键保持在同一位置。其他变化：

*   删除 'd' -> 垃圾 'j'
*   下一个 'n' -> 看 'l'
*   上一个'N' -> 回头看'L'

也有一些熟悉的变化，'s'/'S' 可用于访问命令模式（: 的旧位置，仍然有效）。

额外的好处

*   行尾 '$' -also- '-'
*   '^' 行的开头 -also- '_'
*   向上移动 8 'T'
*   向下移动 8 'H'
*   下一个窗口`<C-w><C-w>`-也-'N'
*   交换窗口`<C-w><C-r>`- 也 - 'D'

-亚当

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-10-03T10:32:32.163

我发现我不需要重新映射 Dvorak 的键——当我切换布局时，我很快就习惯了使用默认键绑定。

作为奖励，这意味着当我在 Dvorak 和 Qwerty 之间切换时，我不必记住两个不同的组合键。键盘布局的差异足以让我不希望按键位于同一位置。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-27T15:37:38.917

有点晚了，但我使用以下内容：

```
" dvorak remap
noremap h h
noremap t j
noremap n k
noremap s l
noremap l n
noremap L N

" easy access to beginning and end of line
noremap - $
noremap _ ^ 
```

这基本上执行以下操作：

*   left-down-up-right 都在主行的默认手指位置下（即没有像默认的 QWERTY Vim 映射中那样移动一个）
*   l/L 用于下一个/上一个搜索结果
*   使用 -/_ 到达一行的结尾/开头

这似乎对我有用......

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-10-10T16:34:26.137

我只是将标准 qwerty 用于命令，将 dvorak 用于插入模式

这是[设置方法](http://vim.wikia.com/wiki/Using_Vim_with_the_Dvorak_keyboard_layout)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-07-13T06:00:08.123

我的重新绑定：

```
noremap h h
noremap t j
noremap n k
noremap s l
noremap j t
noremap l n
noremap k s
noremap J T
noremap L N
noremap K S
noremap T J
noremap N L
noremap S K 
```

笔记：

*   在 qwert 中，vi 必须使用 'h'，因为 vi 不想使用 ';' 一个非字母。但是在 dvroak 中，我们有 's'，那么为什么不利用这个优势呢？
*   vi 使用 Caps 进行相关操作。这是一个很好的设计理念。所以我试图遵守这一点。

含义：

```
n (Next) -> l (Left) -- "What's left?" resembles "What's next?"
s (Substitute) -> k (Kill then insert)
t (jump Till) -> j (Jump till)
N, S, T are similar.

J (Join lines) -> T (make lines Together)
K (Keyword) -> S (Subject)
L[count] (Line count) -> N (line Number) 
```

BTW L 本身到最后一行，而 N 是 fin 的最后一个字母。（感谢天祖指出这一点。）

PS我已经使用这些重新绑定一段时间了。现在我不在 vim 中使用它。我只使用默认的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-03T09:18:02.360

Vim 附带了一个扩展的 Dvorak 脚本，但不幸的是它不能直接`source`执行，因为该文件包含几行指令和另一个撤消其效果的脚本。要阅读它，请发出以下命令：

```
:e $VIMRUNTIME/macros/dvorak 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-09T19:44:30.763

你可以使用它[让 Vim 仅在插入模式下使用 Dvorak：](https://stackoverflow.com/questions/14025247/make-vim-use-dvorak-keybindings-only-in-insert-mode)

```
:set keymap=dvorak 
```

这样，所有的命令仍然在 QWERTY 中，但您键入的所有内容都将在 Dvorak 中。

**警告：**嗯，几乎所有东西。插入模式、搜索模式和替换模式都将是 dvorak，但 ex 命令不会。这意味着您不必重新学习`:wq`，但您需要输入`:%s/foo/bar/gc`QWERTY。

如果您只想移动某些命令，这将无济于事，但我发现在我的脑海中，“向前移动一个单词”必然会“向上移动左手无名指”，而不是“询问打字部门字母在哪里” w' 是，然后按下它，”这使我更容易使用这种方法。

# .net - 在双显示器设置中，如何强制 .net 应用程序显示在特定显示器上？

> ID：165249
> 
> 赞同：5
> 
> 时间：2008-10-03T00:39:41.120
> 
> 标签：.net, multiple-monitors

我想运行我的应用程序的多个副本，并强制第一个在一个监视器上打开，第二个实例在第二个监视器上打开

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-03T00:58:44.243

```
Screen monitor1 = System.Windows.Forms.Screen.AllScreens[0];
Screen monitor2 = System.Windows.Forms.Screen.AllScreens[1]; 
```

将为您提供两个显示器的大小和位置信息。

```
Form f = new Form();
f.Location = monitor2.Location;
f.Size = monitor2.Size;
f.StartPosition = FormStartPosition.Manual;
f.WindowState = FormWindowState.Maximized;
f.Show(); 
```

应该在您的第二台显示器中弹出一个表单。

# javascript - JavaScript：如何强制 Image() 不使用浏览器缓存？

> ID：165253
> 
> 赞同：12
> 
> 时间：2008-10-03T00:41:40.867
> 
> 标签：javascript, image, caching

如果我在浏览器中手动加载 nextimg URL，每次重新加载时它都会提供一张新图片。但是这段代码每次迭代都会显示相同的图像`draw()`。

如何强制 myimg 不被缓存？

```
<html>
  <head>
    <script type="text/javascript">
      function draw(){
        var canvas = document.getElementById('canv');
        var ctx = canvas.getContext('2d');
        var rx;
        var ry;
        var i;

        myimg = new Image();
        myimg.src = 'http://ohm:8080/cgi-bin/nextimg'

        rx=Math.floor(Math.random()*100)*10
        ry=Math.floor(Math.random()*100)*10
        ctx.drawImage(myimg,rx,ry);
        window.setTimeout('draw()',0);
      }
    </script>
  </head>
  <body onload="draw();">
    <canvas id="canv" width="1024" height="1024"></canvas>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-10-03T00:43:27.133

最简单的方法是将不断变化的查询字符串挂在末尾：

```
var url = 'http://.../?' + escape(new Date()) 
```

有些人更喜欢使用`Math.random()`for that 而不是`escape(new Date())`. 但正确的方法可能是更改 Web 服务器发送的标头以禁止缓存。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-03T00:44:03.340

您无法阻止它在 Javascript 中完全缓存图像。但是，您可以使用图像的 src/address 来强制它重新缓存：

```
[Image].src = 'image.png?' + (new Date()).getTime(); 
```

您可能可以采用任何 Ajax 缓存解决方案并在此处应用它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-03T01:10:12.390

这实际上听起来像是浏览器中的一个错误——如果它在 Safari中，您可以在[http://bugs.webkit.org或在 Firefox 中提交](http://bugs.webkit.org)[https://bugzilla.mozilla.org/](https://bugzilla.mozilla.org/)。为什么我说潜在的浏览器错误？因为浏览器意识到它不应该在重新加载时进行缓存，但是当您以编程方式请求图像时，它确实会为您提供图像的缓存副本。

那就是说你确定你真的在画什么吗？Canvas.drawImage API 不会等待图像加载，并且当您尝试使用它时，如果图像尚未完全加载，则指定不绘制。

更好的做法是：

```
 var myimg = new Image();
    myimg.onload = function() {
        var rx=Math.floor(Math.random()*100)*10
        var ry=Math.floor(Math.random()*100)*10
        ctx.drawImage(myimg,rx,ry);
        window.setTimeout(draw,0);
    }
    myimg.src = 'http://ohm:8080/cgi-bin/nextimg' 
```

（您也可以只将`draw`参数作为参数传递给 setTimeout 而不是使用字符串，这将节省一遍又一遍地重新解析和编译相同的字符串。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-15T21:42:57.467

这里实际上需要绕过**两个**缓存：一个是常规 HTTP 缓存，可以通过在图像上使用正确的 HTTP 标头来避免。但是您还必须阻止浏览器重新使用图像的内存副本；如果它决定它可以做到这一点，它甚至永远不会到达查询其缓存的地步，因此 HTTP 标头将无济于事。

为防止这种情况，您可以使用更改的查询字符串或更改的片段标识符。

有关更多详细信息，请参阅我的[帖子](https://stackoverflow.com/a/22429796/999120 "我的回答：在相同的 url 上用新的图像刷新图像")。

# c# - 调整大小后，Flowlayout 面板不显示滚动条

> ID：165284
> 
> 赞同：3
> 
> 时间：2008-10-03T00:54:00.277
> 
> 标签：c#, .net, vb.net, user-interface

我有一个 flowlayout 面板，在调整大小事件中，我调整了 flowlayout 面板内所有控件的大小，使它们适合（flowlayoutpanel - padding - 滚动条宽度）的宽度。在某些调整大小时，不会显示滚动条，将大部分控件隐藏在 flowlayoutpanel 区域之外，而在其他调整大小时会显示滚动条。我已将 flowlayoutpanel 上的 AutoScroll 属性设置为 true。这都是使用 C# 完成的，但我在 VB.net 中也遇到过这个问题。

有没有办法强制flowlayoutpanel在我调整resize事件中的控件大小后重新计算控件的布局方式或解决此问题的其他方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T06:22:53.340

试试这个`.PerformLayout()`方法，看看有没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T00:57:33.823

通过使用[Refresh](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.refresh.aspx)方法（从 Control 继承），您可以强制控件无效并重绘其自身及其子项。

编辑：奇怪的是，您是否正在调整大小以获得上下堆叠的效果？

# keyboard - 如何获得 Dvorak 键盘？

> ID：165314
> 
> 赞同：9
> 
> 时间：2008-10-03T01:13:04.567
> 
> 标签：keyboard, dvorak

我一直认为，在我可以使用 Dvorak 布局之前，我需要购买一个 Dvorak 键盘。但是我在亚马逊上找不到。仅仅是从 Qwerty 键盘上弹出键并移动它们的问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-03T01:17:45.833

为了帮助您了解键盘布局，您可以重新排列 Qwerty 键盘上的按键。或者您可以简单地用贴纸重新标记按键。我个人学会了使用 Dvorak 布局打字，无需重新标记或重新排列键，发现并不难。

大多数现代操作系统允许您将任何键盘重新映射到 Dvorak 布局。

*   Windows XP/Vista：您可以通过控制面板->区域和语言选项->语言->详细信息...设置映射。

*   Mac OSX：系统偏好设置 -> 国际 -> 输入菜单（感谢 jmah）

*   Ubuntu：系统 -> 首选项 -> 键盘，布局选项卡，添加...，选择您选择的 Devorak 布局并可选择设置为默认值。然后，您可以右键单击面板，选择“添加到面板”并选择键盘指示器。然后，您可以在布局之间切换。（感谢瓦格纳）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-03T02:04:36.283

如果您是触摸打字员，您将从 Dvorak 布局中受益匪浅。

我自学 Dvorak 作为触摸打字机的方法是将布局的一个小副本粘贴到我的显示器上。然后我通过查看副本而不是按键来练习打字。

那是六年前的事了。我仍然使用标准的 Qwerty 键盘，但自从 20 年前我第一次学会触摸打字以来，我还没有看过按键的含义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-03T01:27:33.503

您可以使用[Das Keyboard Ultimate](http://www.daskeyboard.com/)，它的键上没有字母。你很快就会成为一个触摸德沃夏克打字员。或者你可以懦弱地在钥匙上贴上标签。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-03T02:25:56.000

我通过使用操作系统更改布局来学习 Dvorak。我打印了一个键盘布局并将它贴在我的显示器下方，这样我就可以在不低头看按键的情况下参考它。

后来，当我知道钥匙在哪里后，我就把贴纸打印出来贴在键帽上。

直到今天，我只是依靠操作系统布局切换来获得德沃夏克。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-05T22:09:32.073

我试图重新排列字母一次，在某些键盘上它不起作用。由于字母的形状根据它们所在的行而有所不同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-03T01:19:16.207

好吧，如果你有一个胖钱包，那么[Optimus 键盘](http://www.artlebedev.com/everything/optimus/)会给你 Dvorak（以及 qwerty 和 azerty 以及任何组合！）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-03T01:17:43.307

您只需重新排列当前键盘上的按键并更改布局即可。

这是关键布局： ![替代文字](https://rffr.de/images/dvorak.jpg)

我没有看到图片，所以这里是[直接链接](https://rffr.de/images/dvorak.jpg)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-03T01:24:28.003

可在 qwerty 和 Dvorak 之间切换：[DvortyBoard](http://www.ergocanada.com/products/keyboards/dvortyboard_standard.html)

便宜，但您需要操作系统来重新映射键：[Hooleon](http://hooleon.com/miva/merchant.mvc?Screen=PROD&Product_Code=KB-0110&Category_Code=KB-D&Product_Count=0)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-03T01:55:08.180

如果您要重新排列物理键盘，请选择带有可拆卸键帽的[Model M。](http://en.wikipedia.org/wiki/Model_M_Keyboard)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-05T22:15:56.820

不要使用德沃夏克键盘。非触摸式 dvorak 对您的手腕有害，而且速度与非触摸式 qwerty 一样慢。绝对没有意义。你想*摆脱*这种习惯。

更改操作系统中的布局并学会不依赖于看键盘。如果有的话，请弹出键帽并将它们随机放回。如果您绝对必须购买新硬件，请购买 Das 键盘或任何其他空白键盘。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-06-08T04:19:16.597

我得到了其中两个（一个用于工作，一个用于家庭），我喜欢它们：

[http://matias.ca/dvorak/](http://matias.ca/dvorak/)

它也可以通过一个按钮切换到 Qwerty，作为对可能需要在上面打字的同事的让步。

我唯一的抱怨是一个非常小的抱怨：4 年后，一些标签开始褪色或刮掉。

如果你只是在学习德沃夏克，祝你好运。我做的最好的事情是 100% 的时间切换到它。当我为了速度而切换回 Qwerty 时，我所做的只是扰乱我的大脑。当您处于学习曲线时，Dvorak 会变慢，但这是非常值得的。从长远来看，手指的压力要小得多，12 年后，我在 Dvorak 上的打字速度实际上比我在 Qwerty 上的打字速度更快。

最好的练习方法：打开一本书或杂志，用德沃夏克抄写一些段落。如果你发现一个棘手的段落，把它打出两三遍，直到模式开始变成肌肉记忆。

祝你好运！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-03T01:17:27.037

您将无法使键适合（也许您可以直接在它们上面画图），但是是的，您应该能够在操作系统中切换布局。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-03T01:20:36.700

我不知道你准备投入多少，但我认为[Art Lebedev Studios的](http://www.artlebedev.com/)[Optimus Maximus](http://www.artlebedev.com/everything/optimus/)键盘会是一个不错的选择，因为你可以很容易地切换键盘布局，而且不需要弹出键。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-11-07T01:07:06.763

在大多数 PC 键盘上，每行中的键具有不同的形状。键帽顶部的角度不同。这提供了键顶表面的轻微的前后曲率。（如果您从侧面看钥匙，您可以看到这一点）。

如果你在行之间移动键，键的顶部不会对齐……键盘看起来很奇怪，感觉“凹凸不平”和不均匀。不适合触摸打字。

解决方案：

平面键盘 - 一些制造商生产的键盘所有键帽的形状都相同。Apple 和 Sun 键盘是这样的，我认为大多数 Logitech 键盘也是如此……但要小心新的 Apple 铝制键盘——安全移除键帽可能会更难。

此外，您最好从美国 QWERTY 键盘开始。其他国家布局有一些不同的键，你将无法通过重新排列获得标准的德沃夏克。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-11-23T16:39:08.203

您可以尝试从 Unicomp 获取自定义键盘。他们提供名为“Customizer 104/105”的 IBM 屈曲弹簧式键盘，可提供多种不同语言，包括 US-Dvorak（如果您需要）。我从这家公司购买了几个键盘，质量是一流的。如果您想要一个新的屈曲弹簧键盘，这是我所知道的唯一一家提供它们的公司。

此键盘是硬连线的，因此如果您在操作系统中切换键盘布局，您不会遇到任何问题 - 例如您的登录键映射与您的帐户键映射不同，或者远程连接到另一台计算机的问题.

[Unicomp 键盘](http://pckeyboards.stores.yahoo.net/keyboards.html)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-11-05T21:25:26.533

您可以更改操作系统中的布局。实际上最好不要使用德沃夏克键盘，这样您就可以学习德沃夏克而不必依赖于看按键。帮助您学习的出色打字导师是 Stamina Typing Tutor（只需 google 即可），它有一个屏幕键盘，因此您不必看按键。当您不只是练习时，您可以从 Google 图片中打印出 Dvorak 布局，并在您输入时参考。如果您真的想在亚马逊上获得硬连线键盘搜索 Matias Dvorak。那是我在亚马逊上唯一能找到的 Dvorak 键盘，它有一个按钮可以在 Qwerty 和 Dvorak 之间切换。我不会重新排列您的密钥，因为大多数操作系统在用户登录之前不会切换到 Dvorak。

# c# - STAThread 和多线程

> ID：165316
> 
> 赞同：104
> 
> 时间：2008-10-03T01:14:01.570
> 
> 标签：c#, .net, multithreading, sta

来自关于 STAThread 的 MSDN 文章：

> 指示应用程序的 COM 线程模型是单线程单元 (STA)。

（仅供参考，这是[整篇文章](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)。）

单线程公寓...好吧，这超出了我的想象。另外，我在某处读到，除非您的应用程序使用 COM 互操作，否则此属性实际上什么都不做。那么它究竟做了什么，它又如何影响多线程应用程序呢？多线程应用程序（包括从任何使用`Timer`s 到异步方法调用的任何东西，而不仅仅是线程池等）是否应该使用 MTAThread，即使它“只是为了安全”？STAThread 和 MTAThread 实际上是做什么的？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-10-03T01:42:26.010

单元线程是一个 COM 概念；如果您不使用 COM，并且您调用的任何 API 都没有“在幕后”使用 COM，那么您无需担心公寓。

如果您确实需要了解公寓，那么细节可能会[有点复杂](http://msdn.microsoft.com/en-us/library/ms693344(VS.85).aspx)；一个可能过于简化的版本是标记为 STA 的 COM 对象必须在 STAThread 上运行，而标记为 MTA 的 COM 对象必须在 MTA 线程上运行。使用这些规则，COM 可以优化这些不同对象之间的调用，避免不必要的编组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-03T01:38:32.617

它确保`CoInitialize`将 COINIT_APARTMENTTHREADED 指定为参数。如果您不使用任何 COM 组件或 ActiveX 控件，它对您完全没有影响。如果你这样做，那么它是至关重要的。

单元线程的控件实际上是单线程的，对它们的调用只能在创建它们的单元中处理。

来自 MSDN 的更多细节：

> 在单线程单元 (STA) 中创建的对象仅从其单元的线程接收方法调用，因此调用被序列化并且仅到达消息队列边界（当调用 Win32 函数 PeekMessage 或 SendMessage 时）。
> 
> 在多线程单元 (MTA) 中的 COM 线程上创建的对象必须能够随时接收来自其他线程的方法调用。您通常会使用 Win32 同步原语（如临界区、信号量或互斥锁）在多线程对象的代码中实现某种形式的并发控制，以帮助保护对象的数据。
> 
> 当配置为在中性线程单元 (NTA) 中运行的对象被 STA 或 MTA 中的线程调用时，该线程将传输到 NTA。如果此线程随后调用 CoInitializeEx，则调用失败并返回 RPC_E_CHANGED_MODE。

* * *

## 回答 #3

> 赞同：-15
> 
> 时间：2012-03-21T13:48:23.473

STAThread 在 C# GUI 项目的 Main 函数之前编写。它什么也不做，只是允许程序创建一个线程。

# asp.net - 如何让 asp.net 登录控件自动验证以前经过身份验证的用户？

> ID：165331
> 
> 赞同：3
> 
> 时间：2008-10-03T01:22:00.160
> 
> 标签：asp.net, authentication, cookies, login, controls

我正在尝试设置登录控件以记住以前成功输入用户名和密码的用户的登录凭据。我将记住我的属性设置为 true，但它似乎不会触发任何我可以读取 cookie 并自动登录用户的事件。

有没有一种简单的机制来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T01:36:27.973

您需要[在 ASP.NET 2.0 中使用 Google 进行表单身份验证](http://msdn.microsoft.com/en-us/library/aa480476.aspx)

您将需要设置您的应用程序（通过 web.config），并且可能还需要更改 IIS 设置。虽然这一切都非常简单，但可以使用大量设置，因此最好阅读一些文章。ScottGu 有一个 [博客条目](http://weblogs.asp.net/scottgu/archive/2006/02/24/ASP.NET-2.0-Membership_2C00_-Roles_2C00_-Forms-Authentication_2C00_-and-Security-Resources-.aspx)，其中包含很多很好的细节。

[www.asp.net](http://www.asp.net/learn/)上也有很多不错的视频，包括这些[安全教程](http://www.asp.net/learn/security/)

尝试[如何：创建 ASP.NET 登录页面](http://msdn.microsoft.com/en-us/library/ms178331.aspx)和[演练：创建具有成员资格和用户登录的网站](http://msdn.microsoft.com/en-us/library/879kf95c.aspx)。如果我记得，除非您使用 Sql Server Membership 提供程序，否则您仍然必须自己进行身份验证。在这种情况下，您仍然需要设置数据库和 web.config。

* * *

本质上，一旦您正确设置了配置，您就有了一个登录页面。在该登录页面中，您告诉 Forms Authentication 在您对其进行身份验证后为您创建身份验证*票*：

```
if (VerifyUser(name, password) ) // this is not a framework method
    FormsAuthentication.RedirectFromLoginPage(
        userName, false); // no persistent cookie 
```

如果您想读取身份验证票证数据（从其他任何地方）。

```
// output just writes to a StringBuilder 'sb' 
output(sb, "Identity.AuthenticationType", Page.User.Identity.AuthenticationType);

FormsIdentity fi = Page.User.Identity as FormsIdentity;
if (fi == null)
{
    output(sb, "Identity Type", Page.User.Identity.ToString());
    return;
}

output(sb, "FormsIdentity.Ticket.IssueDate", fi.Ticket.IssueDate);
output(sb, "FormsIdentity.Ticket.Expiration", fi.Ticket.Expiration);
output(sb, "FormsIdentity.Ticket.Name", fi.Ticket.Name);
output(sb, "FormsIdentity.Ticket.CookiePath", fi.Ticket.CookiePath);
output(sb, "FormsIdentity.Ticket.UserData", fi.Ticket.UserData);
output(sb, "FormsIdentity.Ticket.Version", fi.Ticket.Version);
output(sb, "FormsIdentity.Ticket.IsPersistent", fi.Ticket.IsPersistent); 
```

关键是，一旦通过身份验证，asp.net 只会在身份验证票已过期且用户位于受保护页面上时将用户重定向到登录页面。Asp.net 不会一直要求您对用户进行不必要的身份验证。

# .net - Visual Studio 中的相对路径

> ID：165338
> 
> 赞同：10
> 
> 时间：2008-10-03T01:28:13.890
> 
> 标签：.net, visual-studio, path, relative-path

我在 Visual Studio 2005 中工作，并添加了一个文本文件，需要通过在解决方案资源管理器中右键单击项目并添加 --> 新项目来解析该文件。这会将 .txt 文件放置到项目文件夹中。调试 .exe 文件位于 /bin/debug 文件夹中。

如何使用可以正确解析两个文件夹的相对路径从代码中正确指向 txt 文件，同时在解决方案发布后也解析为位于同一文件夹中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-03T01:40:02.897

如果我正确理解您的问题：在“解决方案资源管理器”中选择文件。在属性 --> 复制到输出目录下，选择“始终复制”或“如果更新则复制”。对于构建操作，选择“内容”。这会将文件复制到构建时的 /bin/debug 文件夹。从那时起，您应该能够从项目根目录中引用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-03T01:48:11.487

查看[应用程序类](http://msdn.microsoft.com/en-us/library/system.windows.forms.application_members.aspx)。它有几个成员可用于在安装后相对于应用程序定位文件等。

例如，Application.ExecutablePath 告诉您正在运行的 EXE 文件的位置；然后，您可以使用相对路径来查找文件，例如 ..\..\FileToBeParsed.txt。但是，这假定文件部署在与项目文件夹结构相同的文件夹结构中，但通常情况并非如此。

部署项目后，考虑使用 CommonAppDataPath 和 LocalUserAppDataPath 等属性来定位与应用程序相关的文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-03T12:14:49.203

在磁盘上定位文件的另一种方法是将文件直接包含在已编译的程序集中作为嵌入式资源。为此，请右键单击该文件并选择“嵌入式资源”作为构建操作。然后，您可以将文件作为字节流检索：

```
Assembly thisAssembly = Assembly.GetExecutingAssembly();
Stream stream = thisAssembly.GetManifestResourceStream("Namespace.Folder.Filename.Ext");
byte[] data = new byte[stream.Length];
stream.Read(data, 0, (int)stream.Length); 
```

更多关于嵌入式资源的信息可以在[这里](http://www.codeproject.com/KB/dotnet/embeddedresources.aspx)和[这里](http://www.devx.com/dotnet/Article/10831/0/page/2)找到。

如果您正在构建自己使用的应用程序，David Krep 的建议是最好的：只需将文件复制到输出目录即可。如果您正在构建一个将被重用或分发的程序集，那么嵌入式资源选项更可取，因为它将所有内容打包在一个 .dll 中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-03T01:39:19.747

我会添加一个后期构建步骤，将 txt 文件复制到活动配置的输出文件夹中：

```
xcopy "$(ProjectDir)*.txt" "$(OutDir)" 
```

定义了一些宏，例如 " `$(ConfigurationName)"`,`$(ProjectDir)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-19T00:27:41.277

转到项目属性-> 配置属性-> 调试

将“工作目录”设置为 $(TargetDir)

然后您可以使用代码中的相对路径正确引用您的文件（例如“....\foo.xml”）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-12-09T14:44:12.147

Application.ExecutablePath 解决方案不适用于单元测试。将返回 vstesthost.exe 的路径

System.Reflection.Assembly.GetExecutingAssembly().Location 将起作用，但会给出包含程序集名称的路径。

所以这有效：
`System.Reflection.Assembly.GetExecutingAssembly().Location + "\..\" + "fileToRead.txt"`

只是 ：

```
fileToRead.txt 
```

也有效。似乎工作目录是默认执行的程序集目录。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-03T01:33:21.977

您可以添加构建后事件以将 .txt 文件复制到构建输出文件夹。然后您的代码可以假定该文件与可执行文件位于同一文件夹中。

# java - 加工中的不同颜色

> ID：165346
> 
> 赞同：4
> 
> 时间：2008-10-03T01:33:18.497
> 
> 标签：java, colors, processing, spiral

我一直致力于将我的一些处理代码移植到 NetBeans 中的常规 Java。到目前为止一切顺利，除了我使用非灰度颜色时，大多数东西都很好用。

我有一个绘制螺旋图案的脚本，并且应该根据模数检查改变螺旋中的颜色。然而，该脚本似乎挂起，我无法真正解释原因。

如果有人对处理和 Java 有一定的经验，你可以告诉我我的错误在哪里，我真的很想知道。

为了同行评审，这是我的小程序：

```
package spirals;
import processing.core.*;

public class Main extends PApplet
{
    float x, y;
    int i = 1, dia = 1;

    float angle = 0.0f, orbit = 0f;
    float speed = 0.05f;

    //color palette
    int gray = 0x0444444;
    int blue = 0x07cb5f7;
    int pink = 0x0f77cb5;
    int green = 0x0b5f77c;

    public Main(){}

    public static void main( String[] args )
    {
        PApplet.main( new String[] { "spirals.Main" } );
    }

    public void setup()
    {
        background( gray );
        size( 400, 400 );
        noStroke();
        smooth();
    }

    public void draw()
    {
        if( i % 11 == 0 )
            fill( green );
        else if( i % 13 == 0 )
            fill( blue );
        else if( i % 17 == 0 )
            fill( pink );
        else
            fill( gray );

        orbit += 0.1f; //ever so slightly increase the orbit
        angle += speed % ( width * height );

        float sinval = sin( angle );
        float cosval = cos( angle );

        //calculate the (x, y) to produce an orbit
        x = ( width / 2 ) + ( cosval * orbit );
        y = ( height / 2 ) + ( sinval * orbit );

        dia %= 11; //keep the diameter within bounds.
        ellipse( x, y, dia, dia );
        dia++;
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-04T09:55:53.180

您是否考虑过添加调试语句 (System.out.println) 并查看 Java 控制台？

可能会有大量的产出和明确的放缓，但你至少可以看到当似乎什么都没有发生时会发生什么。

我认为逻辑错误是填充 if 语句；每次迭代，您决定该迭代的颜色并填充该颜色。只有 i == 11、13 或 17 的迭代才会填充颜色。下一次迭代，颜色被灰色覆盖。我认为它往往会闪烁，可能会快速看到。

你不想要类似的东西吗

```
public class Main extends PApplet
{
  ...

  int currentColor = gray;

  public Main(){}

  ...

  public void draw()
    {
        if( i % 11 == 0 )
           currentColor = green;
        else if( i % 13 == 0 )
           currentColor = blue;
        else if( i % 17 == 0 )
           currentColor = pink;
        else {
           // Use current color
        } 

        fill(currentColor);

        ...
} 
```

这样你从灰色开始，去绿色，蓝色，粉红色，绿色，蓝色，粉红色等。如果你还想在某个时候看到灰色，你必须添加类似的东西

```
 else if ( i % 19 ) {
    currentColor = gray;
  } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-21T08:44:01.900

要查看这里发生的事情，请添加

```
stroke(255); 
```

在抽奖开始时。你会看到所有想要的圆圈都画出来了，但没有颜色。正如之前的海报所提到的：您只在第 11、13 和 17 次迭代中使用非灰色。

我认为您的颜色值是这里的主要问题。从参考页

*从技术角度来看，颜色是 32 位信息，按 AAAAAAAARRRRRRRRGGGGGGGGBBBBBBBB 排序，其中 A 包含 alpha 值，R 是红色/色调值，G 是绿色/饱和度，B 是蓝色/亮度。*

如果您查看您的值，您会看到一个非常低的 alpha 值，这可能无法与背景区分开来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-30T10:54:07.977

不确定您是否还有问题。你提到挂。这是在黑暗中拍摄，但我记得弗莱重复说 size() 调用必须是 setup() 中的第一条指令。所以也许下移 background() 调用可能会有所帮助。反正伤不起。

# c# - 为什么这两种日期格式不同？

> ID：165355
> 
> 赞同：2
> 
> 时间：2008-10-03T01:40:23.270
> 
> 标签：c#, .net, datetime, formatting

我试图在 WPF 文本块中只生成天数，没有前导零，也没有额外的空间填充（这会影响布局）。第一个生成带有空格的日期数，第二个生成整个日期。根据[文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，“d”应该产生日期（1-31）。

```
string.Format("{0:d }", DateTime.Today);
string.Format("{0:d}", DateTime.Today); 
```

更新：添加 % 确实是诀窍。适当的文档[在这里](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#UsingSingleSpecifiers)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T01:51:24.303

看[这里](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.aspx)

> d, %d
> 
> 一个月的一天。个位数的天数没有前导零。如果格式模式未与其他格式模式组合，则应用程序指定“%d”。

否则 d 被解释为：

> d - '短日期模式'

PS。对于搞乱格式字符串，使用[LinqPad](http://www.linqpad.net/)是无价的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T01:53:13.660

从“自定义日期和时间格式字符串”的 MSDN 文档中：

> 任何不是标准日期和时间格式字符串的字符串都被解释为自定义日期和时间格式字符串。

{0:d} 被解释为标准数据和时间格式字符串。从“标准日期和时间格式字符串”中，“d”格式说明符：

> 表示由当前 ShortDatePattern 属性定义的自定义日期和时间格式字符串。

使用空格，{0:d } 不匹配任何标准日期和时间格式字符串，并被解释为自定义数据和时间格式字符串。从“自定义日期和时间格式字符串”中，“d”格式说明符：

> 以 1 到 31 的数字表示月份中的某天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T01:58:02.960

该`{0:d}`格式使用[MSDN 的标准日期和时间格式字符串文档中](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)定义的模式。'd' 转换为短日期模式，'D' 转换为长日期模式，依此类推。

您想要的格式似乎是[自定义日期和时间格式修饰符](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，当没有匹配的指定格式（例如，'d' 包括空格）或使用 ToString() 时，它可以工作。

您可以改用以下代码：

```
string.Format("{0}", DateTime.Today.ToString("d ", CultureInfo.InvariantCulture)); 
```

# oracle - Oracle Alias 中的双引号

> ID：165365
> 
> 赞同：2
> 
> 时间：2008-10-03T01:46:24.020
> 
> 标签：oracle, double, alias, quotes

我在 Oracle 9i 中遇到了反复无常的问题

从对偶中选择 1“FirstColumn”；

Oracle 在执行上述查询时抛出错误。ORA-03001：我的生产服务器中未实现的功能。

相同的查询在我的验证服务器中运行良好。两台服务器都使用 Oracle 9i

任何人有想法有什么问题...？这是 Oracle 服务器中的可配置项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T10:41:43.627

尝试：

```
 SELECT 1 AS "'FirstColumn'" FROM dual; 
```

有一个类似的问题： [Double Quotes in Oracle Column Aliases](https://stackoverflow.com/questions/56591/double-quotes-in-oracle-column-aliases)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T02:18:13.163

两台服务器上的完整 Oracle 版本是什么？9i 是一个营销标签——您是否将 9.0.1.x 数据库与 9.2.0.x 数据库进行比较？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T03:46:57.427

如果你这样做，它会给出相同的输出吗？

```
select 1 as "FirstColumn" from dual; 
```

要找出 yoru 验证和生产服务器上的特定版本，请在每个服务器上执行此 SQL 并比较结果：

```
select * from v$version; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-06T19:49:59.640

Hanumath：MetaLink 是 Oracle 的支持服务。如果您是获得许可的 Oracle，并且签订了支持合同，您将拥有一个 MetaLink ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-06T19:54:27.260

很确定你应该在 1 和“FirstColumn”之间有一个空格

```
SELECT 1 "FirstColumn" from dual; 
```

也就是说，使用前面的回答者指出的 AS 关键字更正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T16:21:08.580

对于它的价值，我在 9.2.0.7 上可以正常工作：

```
select 1"FirstColumn" from dual 
```

对我来说就像一个错误；你试过Metalink吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-03T15:06:55.487

以下是我的服务器的版本：

Oracle9i 企业版 9.2.0.8.0 版 - 验证 Oracle9i 企业版 9.2.0.8.0 版 - 64 位生产

64位确实有所作为。从双重中选择 1 作为“'FirstColumn'”；正在工作，但会导致我更新近数百个软件包。配置更改可能很方便，而不是更改代码。

问候， 哈努马特

# sql-server - SQL 服务器的最佳 RAID 设置

> ID：165383
> 
> 赞同：15
> 
> 时间：2008-10-03T02:01:33.903
> 
> 标签：sql-server, database, performance, hardware

我们的网站有一个 SQL 2005 数据库后端，目前大小约为 10GB。尽管我没有确切的统计数据，但读取次数比写入次数多得多。

我们正在升级我们的数据库服务器，我正在考虑获取 4 个磁盘并将它们设置在两个 RAID 1 阵列中 - 一个用于数据文件，另一个用于操作系统和日志文件。这是最佳设置还是 RAID 5 更适合数据文件？RAID 10 有点贵，对我们来说可能有点矫枉过正。

在这个阶段，SQL Server 应该将大部分数据库保留在 RAM (8GB) 中，但它会增长，所以我不想完全依赖它。

编辑：我们绝对希望生产服务器上的冗余，所以 RAID 0 本身就出来了。RAID 10 不错，但对我们来说可能有点贵。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-03T02:32:49.087

您使用独立 RAID 1 镜像的概念是正确的策略。

我们在我的工作中实现了类似的场景，并且效果很好。

**RAID 1**

RAID 1 为您提供 1 个磁盘用于写入但 2 个磁盘用于读取的速度。

当您将数据写入 RAID 1 阵列时，它必须将该数据写入两个磁盘，因此您不会获得任何性能提升，但这是您获得数据安全性的地方。

从 RAID 1 阵列读取时，控制器将从两个磁盘读取，因为它们具有相同的数据。

**RAID 5**

这对于保护大量数据很有用。对于相同数量的数据，RAID 5 的成本增加比 RAID 1（或 RAID 0+1，一旦您的容量超出单个磁盘的大小）慢得多。

如果您想使用 RAID 5 保护 600gb，您可以使用 4x200gb 驱动器或 3x300gb 驱动器来实现，需要 800-900gb 的总购买驱动器空间。RAID 1 将是 2x600gb 驱动器，需要 1,200gb 购买空间（600gb 驱动器相当昂贵）或 RAID 0+1 允许您使用更便宜的容量驱动器（即：4x300gb 或 6x200gb）但仍然需要总共 1,200gb购买的空间。

**RAID 0+1**

提供与 RAID 1 类似的优势，通过跨磁盘条带化将其提升了一个档次。我假设如果您担心更高的同时读取，您还将使用多处理器/多核。您将一次处理多个查询，因此条带化不会有太大帮助。对于使用大型数据文件的单个应用程序（例如视频编辑），您会发现 RAID 0+1 具有更好的优势。

不久前，当我为一位客户研究同样的问题时，我发现这篇文章非常有趣[http://blogs.zdnet.com/Ou/?p=484](http://www.zdnet.com/blog/ou/comprehensive-raid-performance-report/484)。在第二页上，他讨论了从 RAID 0+1 到独立 RAID 1 阵列的变化，这带来了很多性能改进。这是一个更大的规模（20 个磁盘和 16 个磁盘 SAN），但概念相同。SQL Server 能够在多个卷之间对数据进行负载平衡，而不是仅使用 RAID 0+1 的基本不知情条带化，这是一个很棒的概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-03T23:57:48.923

我会花一点时间确保您的数据库被有效索引；监控它的全表扫描，确保最频繁的查询读取尽可能少的数据；我会在慢速磁盘设置上采用高效设计的数据库，而不是 SSD 上索引不正确的数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T02:05:37.450

鉴于读取次数多于写入次数，RAID 5 将更快地处理您的数据文件。

如果可能，请为事务日志文件使用单独的 RAID 1+0 阵列。

编辑：您将需要至少 3 个磁盘来创建 RAID 5 阵列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T02:14:39.397

请注意，关键性能指标将是搜索速率，而不是数据速率。也就是说，一个典型的磁盘绑定数据库（随着它的增长可能会变成你的数据库）将受到磁盘每秒可以支持多少 IO 的限制，而不是它们可以支持顺序读取的最大数据速率。

这意味着如果您想知道如何使用 4 个磁盘（例如），两个 RAID1 对应该比一个 4 磁盘 RAID5 阵列提供更好的性能。当然，您不会从两个 RAID1 对中获得尽可能多的可用存储空间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-03T23:37:17.687

考虑到数据库的小尺寸，我会使用四个 15krpm 2.5" SFF SAS 磁盘，设置为两个独立的 RAID 1 镜像。我会通过 Adaptec 5805 PCI-e x 8 SAS 控制器之类的东西运行它们。我会把一个阵列上的数据和另一个阵列上的日志以确保安全。条形内存映射整个数据库，一个非常大/昂贵的 SAN 或使用 SSD 我非常相信这将是最快的设置。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-25T05:45:26.830

两件事情，

理论是 RAID 1 为您提供两个驱动器进行读取，但不要认为这等于性能的两倍。事实上，它没有，通常顺序读取速度最终与一个驱动器完全相同。令人惊讶，但真实....做真实世界的测试，不要依赖理论。

话虽如此，我会使用两个 RAID 1 ......但不像你说的那样，一个用于操作系统，另一个用于数据。我会在其中一个上有一些小的 OS 分区，但肯定会将两个 raid 都交给 sql server 以获取数据。给 sql server 所有你可以的集合。

SQL Server 可以跨对进行条带化，尽管这里有人说，你绝对不想使用 0+1。他们再次查看理论基准，不了解 sql server 可以跨磁盘条带化所有数据，并且可以以优化的方式这样做。

Raid 1 只是为了数据冗余......除此之外，尽可能多地给 sql server，让它做它的事情......它非常擅长它的工作。

你有一个 0+1 并将它分成两个 raid 1....做真实世界的测试，你会惊讶于 sql server 工作哪个更快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-03T02:20:13.047

如果您使用具有大量电池支持的高速缓存 RAM 的硬件控制器，RAID 5 就很好。选择块大小并配置 DB，使条带大小（数据磁盘 * 块大小）等于 DB 写入大小。确保您的数据分区 [对齐/是条带大小的倍数]。

否则，RAID 1+0 始终是 DB 服务器的不错选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-06T11:44:42.350

我还建议建立一组基线值，让你们都可以做一些更有根据的预测，而不仅仅是把手指放在空中（或者问 StackOverflow，这两个概念似乎模糊而奇怪地相似）。

使用一些基准值，您还可以衡量更改的有效性，并为未来的升级奠定良好的基础......

（如果不知道，请查阅有关性能工程的一些文献（或维基百科）。这是处理此类问题的整个分支）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-25T05:48:57.773

顺便说一句，在我工作的地方，他们有一个高端的 san，大约 2 分钟就可以完成一次表扫描。我将驱动器分成简单的raid 1 组，让sql server 处理条带化...而不是san。2分钟下降到45秒。

网上还有其他关于此的文章……很难让“真正的信徒”接受这一点，这就是为什么我如此强调这一点。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-09-30T15:49:01.887

我更喜欢我已经在我的戴尔 r210-II linux 服务器上配置的 raid 10。惊人的表现...

# c++ - 使用 C++ Boost 库提高 VS 项目的编译速度

> ID：165386
> 
> 赞同：3
> 
> 时间：2008-10-03T02:03:54.833
> 
> 标签：c++, performance, visual-studio, boost

我刚刚开始使用 Boost 1.36。这些库对于减少我正在处理的非托管 C++ 软件项目中所需的代码量非常有用。

然而，当我尝试使用这些库时，我的编译时间增加了十倍。这几乎可以抵消我通过使用该库获得的生产力收益。

我正在使用具有 2GB RAM 和 VS 2003 的 3GHz Intel 双核。

我添加了一段代码。

```
#include “升压/数字/ublas/matrix.hpp”   
#include “升压/数字/ublas/vector.hpp”  
#include “升压/数字/ublas/matrix_proxy.hpp”  

typedef ublas::bounded_matrix <long double,NUM_OF_COLUMNS,NUM_OF_CATEGORIES,ublas::row_major> 矩阵；  
typedef ublas::bounded_vector <long double,NUM_OF_COLUMNS> 向量；  

```

`void Print(const Matrix& amount)
{`

 ````
Vector total;

total.clear();
for (int category = 0; category < NUM_OF_CATEGORIES; category++)
{
    PrintLine(ublas::row(amount, category));
    total += ublas::row(amount, category);
}

PrintLine(total); 
```` 

`}`

VS 2003有问题吗？
我知道 VS 2008 更快，但升级将是一个艰难的销售。
仅仅是Boost针对快速运行时间而不是快速编译时间进行了优化吗？
我只是以次优方式使用 Boost 库吗？
还是我只是在工作中使用了错误的工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T02:06:26.967

您是否尝试过使用预编译的标头？这包括 StdAfx.h 中的 boost 头文件或您用于预编译头文件的任何头文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T02:10:05.617

您尝试[过 Incredibuild](http://www.xoreax.com/)吗？它将允许您在多台计算机上分发您的构建。我已经看到它成功使用了。

# asp.net - ASP.NET 是在请求 开始时从 SQL 服务器传输所有会话数据，还是仅在需要时传输？

> ID：165399
> 
> 赞同：3
> 
> 时间：2008-10-03T02:10:56.800
> 
> 标签：asp.net, session, sql-session-state

我正在使用 ASP.NET，会话状态存储在 SQL Server 的进程之外。当页面请求开始时，用户会话的*全部*内容是从数据库中检索、反序列化并一举发送到 ASP.NET 进程，还是仅在需要时才将单个对象传输到 ASP.NET 进程？

基本上，我有一个在会话中存储一些大型对象的页面，我的应用程序很难确定何时可以处理数据。如果数据只是在使用时才从数据库中提取出来，那么就没有问题；如果针对每个页面请求将整个会话状态分块到 ASP.NET，我可能会遇到性能问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T03:13:15.760

一口气完成。会话对象在请求开始时从存储区重新创建。无论底层存储是什么，它都可以让 ASP.NET 以相同的方式工作。

[你可以在这里](http://msdn.microsoft.com/en-us/library/aa479041.aspx)找到血淋淋的细节。

# sql - 如何比较/验证 sql 架构

> ID：165401
> 
> 赞同：15
> 
> 时间：2008-10-03T02:11:21.230
> 
> 标签：sql, redgate

我正在寻找一种在更新应用程序版本后验证生产数据库上的 SQL 模式的方法。如果应用程序与 DB 模式版本不匹配，则应该有一种方法来警告用户并列出所需的更改。

是否有具有内置功能的工具或框架（以编程方式使用）来做到这一点？或者是否有一些简单的算法来运行这个比较？

> **更新：**红门列出“395 美元起”。有什么免费的吗？还是比只保留版本号更万无一失？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-10-03T14:42:15.473

试试这个 SQL。
- 对每个数据库运行它。
- 将输出保存到文本文件。
- 区分文本文件。

```
/* get list of objects in the database */
SELECT name, 
       type 
FROM  sysobjects
ORDER BY type, name

/* get list of columns in each table / parameters for each stored procedure */
SELECT so.name, 
       so.type, 
       sc.name, 
       sc.number, 
       sc.colid, 
       sc.status, 
       sc.type, 
       sc.length, 
       sc.usertype , 
       sc.scale 
FROM   sysobjects  so , 
       syscolumns  sc 
WHERE  so.id = sc.id 
ORDER BY so.type, so.name, sc.name

/* get definition of each stored procedure */
SELECT so.name, 
       so.type, 
       sc.number, 
       sc.text 
FROM   sysobjects  so , 
       syscomments sc 
WHERE  so.id = sc.id 
ORDER BY so.type, so.name, sc.number 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-04T09:08:34.340

我希望我能提供帮助 - 这是我建议阅读的文章：

[自动比较 SQL Server 数据库架构](http://solutioncenter.apexsql.com/compare-sql-server-database-schemas-automatically/)

它描述了如何使用 T-SQL、SSMS 或第三方工具自动执行 SQL Server 架构比较和同步过程。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-03T06:31:11.307

您可以通过查看两个数据库的数据字典（sys.objects、sys.columns 等）并比较它们来以编程方式进行操作。但是，也有像[Redgate SQL Compare Pro](http://www.red-gate.com/products/SQL_Compare/index.htm)这样的工具可以为您执行此操作。我已经在一些场合将其指定为数据仓库系统质量保证工具的一部分，包括我目前正在研究的那个。在我目前的演出中，这完全没有问题，因为这里的 DBA 已经在使用它了。

使用这些工具的基本方法是维护一个构建数据库的参考脚本并将其保存在版本控制中。将脚本运行到临时数据库中并将其与您的目标进行比较以查看差异。如果您愿意，它还会生成补丁脚本。

据我所知，除非你想自己写，否则没有什么免费的东西可以做到这一点。Redgate 足够便宜，它还不如免费。即使作为一个 QA 工具来证明生产数据库不在配置中，它也可以在一次事件后为您节省购买价格。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-07-11T14:02:57.507

您现在可以免费使用我的**SQL Admin Studio**来运行**模式比较**、**数据比较**和同步更改。不再需要从此处下载许可证密钥[http://www.simego.com/Products/SQL-Admin-Studio](http://www.simego.com/Products/SQL-Admin-Studio)

也适用于 SQL Azure。

[更新：是的，我是上述程序的作者，因为它现在是免费的，我只是想与社区分享]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-03T02:30:43.523

如果您正在寻找可以比较两个数据库并向您展示 Red Gate 使[SQL 比较的差异的工具](http://www.red-gate.com/products/SQL_Compare/index.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-03T18:40:57.537

您没有提到您正在使用哪个 RDMBS：如果您的 RDBMS 中存在 INFORMATION SCHEMA 视图，并且您可以从同一主机引用这两个模式，则可以查询 INFORMATION SCHEMA 视图以识别以下方面的差异：-tables -列 -列类型 -约束（例如主键、唯一约束、外键等）

在过去的工作中，我已经在 SQL Server 上为此目的编写了一组查询——它可以很好地识别差异。许多查询使用带有 IS NULL 的 LEFT JOIN 来检查是否缺少预期的项目，其他查询则比较列类型或约束名称等内容。

这有点乏味，但这是可能的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-12-01T09:01:57.900

我发现这个小而免费的工具可以满足我的大部分需求。 [http://www.wintestgear.com/products/MSSQLSchemaDiff/MSSQLSchemaDiff.html](http://www.wintestgear.com/products/MSSQLSchemaDiff/MSSQLSchemaDiff.html)

这是非常基本的，但它向您展示了两个数据库的架构差异。它没有任何花哨的东西，例如自动生成的脚本来消除差异，并且它不比较任何数据。

它只是一个小型的免费实用程序，可以向您显示架构差异 :)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-03T02:16:29.267

制作一个表格并将您的版本号存储在其中。只需确保根据需要进行更新。

```
CREATE TABLE version (
    version VARCHAR(255) NOT NULL
)
INSERT INTO version VALUES ('v1.0'); 
```

然后，您可以在应用程序设置期间或任何方便的地方检查存储在数据库中的版本号是否与应用程序代码匹配。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-03T02:30:19.297

[由 Red Gate 进行的 SQL 比较](http://www.red-gate.com/products/SQL_Compare/index.htm)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-03T12:25:17.857

这是哪个 RDBMS，潜在的变化有多复杂？

也许这只是比较每个表的行数和索引数的问题——如果您还要担心触发器和存储过程版本，那么您需要更工业化的东西

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-04-09T11:22:18.003

试试[dbForge Data Compare for SQL Server](http://www.devart.com/dbforge/sql/datacompare/)。它可以比较和同步任何数据库，甚至是非常大的数据库。快速、简单、始终提供正确的结果。在您的数据库上尝试并评论产品。

我们可以向您推荐一个可靠的 SQL 比较工具，它可以将您的 SQL Server 数据库中的表数据的比较和同步速度提高 3 倍。它是 SQL Server 的 dbForge 数据比较。

主要优点：

*   大型数据库的更快比较和同步
*   支持本机 SQL Server 备份
*   表、列和模式的自定义映射
*   调整比较和同步的多个选项
*   生成比较和同步报告

加上 30 天免费试用和无风险购买以及 30 天退款保证。

# asp.net - Html控件和Server控件可以在单个aspx页面中使用

> ID：165402
> 
> 赞同：0
> 
> 时间：2008-10-03T02:11:29.357
> 
> 标签：asp.net

我需要有关以下 aspx 代码的帮助

asp 代码：

```
<asp:Label ID ="lblName" runat ="server" Text ="Name"></asp:Label>
<asp:TextBox ID ="txtName" runat ="server"></asp:TextBox> 
```

考虑这是我的 aspx 页面内容。我将仅在服务器回发之后填充 TextBox 的值。但是标签也会发布到服务器 ( `runat="server"`)，即使它不是必需的。我是否应该像这样编写代码以节省服务器的时间并减少负载。

更正的代码：

```
<label id ="lblNames">Name</label>
<asp:TextBox ID ="txtName" runat ="server"></asp:TextBox> 
```

只有我的服务器控件将发送到服务器进行回发，而不是我的具有静态值的 HTML 控件。

请建议这是否是正确的编码方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T02:15:41.343

如果您从元素中**`runat='server'`**取出，`<label>`那么它将不会被解析为服务器控件。如果您不打算对*`lblNames`*服务器执行任何操作，那么将其排除在外是完全可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-03T02:45:14.097

如果您没有对标签服务器端做*任何事情*，那么只需使用`<span>`. 它最终会在浏览器中显示为相同的 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T03:07:39.720

.net 标签控件呈现为 html 标签元素，不会被回发到服务器。标签只是不回帖。服务器控件允许您在代码中操作控件的属性，但这非常有用。

如果您不需要对元素进行任何编程控制，那么在您的 aspx/ascx 页面中使用 html 标记也没有任何问题。

# c# - 2d 游戏物理资源

> ID：165404
> 
> 赞同：42
> 
> 时间：2008-10-03T02:13:12.097
> 
> 标签：c#, f#, 2d, physics

我正在寻找一些很好的参考资料来学习如何在游戏中建模 2d 物理。我**不是**在寻找一个图书馆来为我做这件事——我想思考和学习，而不是盲目地使用别人的工作。

我已经做了很多谷歌搜索，虽然我找到了一些关于 GameDev 等的教程，但我发现他们的教程很难理解，因为它们要么写得不好，要么假设我没有一定程度的数学理解' t还拥有。

具体来说——我正在寻找如何建模一个自上而下的 2d 游戏，有点像坦克格斗游戏——我想准确地建模（除其他外）加速度和速度、“组件”的热量积聚、之间的碰撞模型和关卡边界，以及导弹型武器。

网站、推荐书籍、博客、代码示例——如果它们有助于理解，都欢迎。我正在考虑使用 C# 和 F# 来构建我的游戏，因此使用这两种语言中的任何一种的代码示例都会很棒——但不要让语言阻止你发布一个好的链接。=)

**编辑**：我并不是说我不懂数学——更多的情况是我不知道为了理解所涉及的系统我需要知道什么，并且真的不知道如何找到资源会以通俗易懂的方式教我。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-10-03T07:20:45.417

这是我几年前收集的一些资源。值得注意的是 Verlet 集成。我还包括了一些我当时发现的开源和商业物理引擎的链接。这里有一篇关于这个主题的 stackoverflow 文章：[2d 游戏物理？](https://stackoverflow.com/questions/98628/2d-game-physics)

**物理方法**

*   [Verlet 集成](http://en.wikipedia.org/wiki/Verlet_integration)（维基百科文章）
*   [高级角色物理](http://www.gamasutra.com/resource_guide/20030121/jacobson_01.shtml)（很棒的文章！包括运动、碰撞、关节和其他约束。）

**图书**

*   [“游戏物理引擎开发”](https://rads.stackoverflow.com/amzn/click/com/012369471X)，Ian Millington——我拥有这本书并强烈推荐它。本书从头开始用 C++ 构建了一个物理引擎。作者从基本的粒子物理开始，然后添加“运动定律”、约束、刚体物理等等。他自始至终都包含有据可查的源代码。

**物理引擎**

*   [托卡马克](http://www.tokamakphysics.com)（开源物理 API）
*   [APE](http://www.cove.org/ape/index.htm)（Actionscript 物理引擎）
*   [FLADE](http://www.cove.org/flade/)（闪光动态引擎）
*   [Fisix 引擎](http://www.fisixengine.com)（另一个 Flash Actionscript 引擎）
*   [简单物理引擎](http://spehome.com)（商业）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-03T03:47:57.050

[![](https://i.stack.imgur.com/dGkA7.gif)](https://i.stack.imgur.com/dGkA7.gif)
[（来源：[oreilly.com](http://web.archive.org/web/20070225050059/http://www.oreilly.com:80/catalog/covers/0596000065_cat.gif)）]

O'Reilly[为游戏开发者准备的物理学](http://oreilly.com/catalog/9780596000066/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-03-10T22:23:13.110

从经验来看，实现 2D 物理引擎非常困难。我将详细介绍创建引擎时采取的几个步骤。

1.  碰撞检测。即使您不处理 3D 世界或网络模拟，碰撞检测也可能是一个难题。对于 2D 物理，您肯定想使用[分离轴定理](http://en.wikipedia.org/wiki/Separating_axis_theorem)。一旦你实施了 SAT，你就完成了引擎的动态部分的一半。

2.  运动学/动力学。Chris Hecker 编写了一个出色的[在线资源](http://chrishecker.com/Rigid_Body_Dynamics)，它逐步引导我了解碰撞响应。

3.  其他一切。一旦你完成了碰撞检测/响应，它的问题就是在引擎中实现你想要的一切。这可以包括摩擦力、接触力、关节以及您能想到的任何其他内容。

玩得开心！创建自己的物理模拟是一种非常有益的体验。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-14T20:44:18.907

这是一个很棒的教程，它演示了使用 flash 的 2D 物理概念，并不特定于 flash。 [http://www.rodedev.com/tutorials/gamephysics/game_physics.swf](http://www.rodedev.com/tutorials/gamephysics/game_physics.swf)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-24T00:13:28.387

即使您想自下而上地学习它，一个编码和文档都很好的开源物理库包含的信息远比一本书多。我该如何处理情况 x... 在文件中查找可以比纸质索引更快。

原始回复：

什么，没有提到[Box2D](http://www.box2d.org/)？它是暴雪员工的开源项目，有一个很好的社区，而且效果很好。

在我对 Box2D 的（简要）体验中，将它与 Torque Game Builder 集成，我发现 API 干净易用，文档清晰，它支持我期望的所有物理对象（特别是关节是必需的），并且社区看起来很友好并且活跃（大约在 2010 年初的某个时候）。

从论坛海报来看，经理们似乎也乐于接受源贡献（不携带许可证包袱）。

它的基于岛的求解器似乎相当快，正如我从它的声誉中所预期的那样，而不是我进行了任何主要的性能测试。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-03T17:54:07.207

F# 有一个名为*Units of Measure*的功能，它可以为您进行尺寸分析，如果您弄错了，它会提供错误。例如，如果你说：

```
let distance : float<meters> = gravity * 3.0<seconds> 
```

这会产生编译错误，因为重力是 < 米/秒 ^2 > 而不是 < 米 >。此外，由于 F# 只是 .NET，因此您可以在类库中编写数学/物理代码并从 C# 中引用它。

我建议您查看这些博客文章以获取更多信息：

*   [使用测量单位的 F# 中的简单 WPF 游戏](http://blogs.msdn.com/chrsmith/archive/2008/09/04/simple-f-game-using-wpf.aspx)
*   [安德鲁·肯尼迪的博客](http://blogs.msdn.com/andrewkennedy/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-18T17:33:36.133

[这是编写您的第一个引擎的绝佳资源](http://gafferongames.wordpress.com/game-physics/spring-physics/)。它是 3D 的，但很容易转换为 2D。我知道至少有一家大公司按照本教程开发他们的内部引擎，我个人也按照他的步骤开发自己的引擎。他解释了基于弹簧/脉冲物理的所有基本物理概念，并向您展示如何编写自己的积分器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-19T23:04:26.337

[F#.NET Journal](http://www.ffconsultancy.com/products/fsharp_journal/?so)发表了两篇关于此的文章：

*   [实时有限元材料模拟](http://fsharpnews.blogspot.com/2009/05/downloadable-demos-from-fnet-journal.html)（2008 年 6 月 15 日）。

*   [刚体动力学](http://fsharpnews.blogspot.com/2010/01/rigid-body-dynamics.html)（2010 年 1 月 15 日）

# ado - 添加字段以打开记录集

> ID：165421
> 
> 赞同：0
> 
> 时间：2008-10-03T02:20:46.277
> 
> 标签：ado, recordset

我有一种简单的方法可以将新字段附加到现有的打开 ADO 记录集吗？

`fields.append()`如果 RecordSet 处于打开状态，则将不起作用，并且关闭似乎会杀死现有数据。

注意：我正在使用**Microsoft ActiveX DataObject 2.8 库**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-03T02:27:35.807

您不能在记录集打开时将字段附加到它。

您可以创建记录集的克隆，附加您的必填字段，打开它并从原始数据中复制数据。

另一种选择是将记录集保存为 xml，修改行集架构，添加必填字段，然后将 xml 加载到新记录集中。

# .net - ItemContainerGenerator.ContainerFromItem 如何处理分组列表？

> ID：165424
> 
> 赞同：30
> 
> 时间：2008-10-03T02:22:07.350
> 
> 标签：.net, wpf, listbox

我有一个 ListBox，直到最近才显示一个平面项目列表。我能够使用 myList.ItemContainerGenerator.ConainerFromItem(thing) 来检索列表中托管“事物”的 ListBoxItem。

本周我稍微修改了 ListBox，因为它为其项目绑定的 CollectionViewSource 已启用分组。现在 ListBox 中的项目被分组在漂亮的标题下。

但是，由于这样做，ItemContainerGenerator.ContainerFromItem 已停止工作 - 即使对于我知道在 ListBox 中的项目，它也会返回 null。见鬼 - 即使 ListBox 填充了许多项目，ContainerFromIndex(0) 也会返回 null！

如何从显示分组项目的 ListBox 中检索 ListBoxItem？

编辑：这是精简示例的 XAML 和代码隐藏。这会引发 NullReferenceException，因为即使列表中有四个项目，ContainerFromIndex(1) 也会返回 null。

XAML：

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
    Title="Window1">

    <Window.Resources>
        <XmlDataProvider x:Key="myTasks" XPath="Tasks/Task">
            <x:XData>
                <Tasks xmlns="">
                    <Task Name="Groceries" Type="Home"/>
                    <Task Name="Cleaning" Type="Home"/>
                    <Task Name="Coding" Type="Work"/>
                    <Task Name="Meetings" Type="Work"/>
                </Tasks>
            </x:XData>
        </XmlDataProvider>

        <CollectionViewSource x:Key="mySortedTasks" Source="{StaticResource myTasks}">
            <CollectionViewSource.SortDescriptions>
                <scm:SortDescription PropertyName="@Type" />
                <scm:SortDescription PropertyName="@Name" />
            </CollectionViewSource.SortDescriptions>

            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="@Type" />
            </CollectionViewSource.GroupDescriptions>
        </CollectionViewSource>
    </Window.Resources>

    <ListBox 
        x:Name="listBox1" 
        ItemsSource="{Binding Source={StaticResource mySortedTasks}}" 
        DisplayMemberPath="@Name"
        >
        <ListBox.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}"/>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
            </GroupStyle>
        </ListBox.GroupStyle>
    </ListBox>
</Window> 
```

CS：

```
public Window1()
{
    InitializeComponent();
    listBox1.ItemContainerGenerator.StatusChanged += ItemContainerGenerator_StatusChanged;
}

void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
{
    if (listBox1.ItemContainerGenerator.Status == System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
    {
        listBox1.ItemContainerGenerator.StatusChanged -= ItemContainerGenerator_StatusChanged;

        var i = listBox1.ItemContainerGenerator.ContainerFromIndex(1) as ListBoxItem;

        // select and keyboard-focus the second item
        i.IsSelected = true;
        i.Focus();
    }
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-10-03T22:21:58.370

您**必须**监听`ItemsGenerator.StatusChanged`事件并对事件做出反应，并等到 ItemContainers 生成后，才能使用 ContainerFromElement 访问它们。

* * *

进一步搜索，我[在 MSDN 论坛中找到了一个](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/8be8307b-83dd-4658-971d-22d47a34dfb6/)有同样问题的人的帖子。当一个设置了 GroupStyle 时，这似乎是 WPF 中的一个错误。解决方案是在渲染过程之后对 ItemGenerator 的访问进行踢。以下是您的问题的代码。我试过这个，它的工作原理：

```
 void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
    {
        if (listBox1.ItemContainerGenerator.Status
            == System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
        {
            listBox1.ItemContainerGenerator.StatusChanged
                -= ItemContainerGenerator_StatusChanged;
            Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Input,
                new Action(DelayedAction));
        }
    }

    void DelayedAction()
    {
        var i = listBox1.ItemContainerGenerator.ContainerFromIndex(1) as ListBoxItem;

        // select and keyboard-focus the second item
        i.IsSelected = true;
        i.Focus();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T12:15:30.713

如果上面的代码不适合你，试试这个

```
public class ListBoxExtenders : DependencyObject
{
    public static readonly DependencyProperty AutoScrollToCurrentItemProperty = DependencyProperty.RegisterAttached("AutoScrollToCurrentItem", typeof(bool), typeof(ListBoxExtenders), new UIPropertyMetadata(default(bool), OnAutoScrollToCurrentItemChanged));

    public static bool GetAutoScrollToCurrentItem(DependencyObject obj)
    {
        return (bool)obj.GetValue(AutoScrollToSelectedItemProperty);
    }

    public static void SetAutoScrollToCurrentItem(DependencyObject obj, bool value)
    {
        obj.SetValue(AutoScrollToSelectedItemProperty, value);
    }

    public static void OnAutoScrollToCurrentItemChanged(DependencyObject s, DependencyPropertyChangedEventArgs e)
    {
        var listBox = s as ListBox;
        if (listBox != null)
        {
            var listBoxItems = listBox.Items;
            if (listBoxItems != null)
            {
                var newValue = (bool)e.NewValue;

                var autoScrollToCurrentItemWorker = new EventHandler((s1, e2) => OnAutoScrollToCurrentItem(listBox, listBox.Items.CurrentPosition));

                if (newValue)
                    listBoxItems.CurrentChanged += autoScrollToCurrentItemWorker;
                else
                    listBoxItems.CurrentChanged -= autoScrollToCurrentItemWorker;
            }
        }
    }

    public static void OnAutoScrollToCurrentItem(ListBox listBox, int index)
    {
        if (listBox != null && listBox.Items != null && listBox.Items.Count > index && index >= 0)
            listBox.ScrollIntoView(listBox.Items[index]);
    }

} 
```

XAML 中的用法

```
<ListBox IsSynchronizedWithCurrentItem="True" extenders:ListBoxExtenders.AutoScrollToCurrentItem="True" ..../> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T02:25:48.433

尝试从“事物”向上解析 VisualTree，直到达到 ListBoxItem 类型

# jquery - 如何使用 jQuery 将“标题”属性转换为鼠标悬停事件？

> ID：165443
> 
> 赞同：1
> 
> 时间：2008-10-03T02:31:51.147
> 
> 标签：jquery, html

我在“table”“td”元素中有一个“span”元素。跨度标签有一个标题。

我想获取该跨度标签的标题并将其拉出以使其成为“td”元素的“鼠标悬停”提示。

例如：

我想转这个：

```
<td>
    <a href="#"><span id="test" title="Acres for each province">Acres</span></a>
</td> 
```

进入这个：

```
<td onmouseover="tip(Acres for each province)">
    <a href="#"><span id="test">Acres</span></a>
</td> 
```

**编辑：**我认为你们不明白。我正在尝试将 onmouseover 功能放入“td”标签中。我不是想把它放到“span”标签中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-03T03:02:45.817

根据您的编辑，您可以查看 jQuery 的 DOM 遍历方法：[http ://docs.jquery.com/Traversing](http://docs.jquery.com/Traversing)

沿着这些路线的东西（未经测试，我不声称它在语法上是正确的，只是这里的一般想法）......

```
$("td").each(function()
{
    $(this).mouseover(function()
    {
        tip($(this).children("span").attr("title"));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T02:36:30.793

就像是：

```
$("span#test").mouseover( function () {
   tip($(this).attr("title"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T03:04:40.803

如果您不能在 td 上放置一个类或以某种方式选择它，那么首先选择跨度，然后转到跨度的祖父母并附加到鼠标悬停：

```
// get each span with id = test
$("span#test").each(function(){
    var $this = $(this);
    // attach to mouseover event of the grandparent (td)
    $this.parent().parent().mouseover( function () {
        tip($this.attr("title"));
    }
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-05T18:09:45.693

好的，我也试试:P

```
$("#yourTable").find("td").over(function()
  { generateTip($(this).find("span:first").attr("title") }
  , function() { removeTip() }
) 
```

这是做什么的：

*   获取 id 为 yourTable 的表
*   选择所有它的 td
*   插入 mouseover 和 mouseout 事件
*   mouseover 事件：使用该 td 中第一个 span 的标题值调用 generateTip 函数
*   mouseout 事件：调用 removeTip()（可选）函数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-03T02:37:07.063

使用 jQuery：

```
$('#test').attr('title') 
```

# php - 调用函数时PHP保留范围

> ID：165445
> 
> 赞同：5
> 
> 时间：2008-10-03T02:33:58.397
> 
> 标签：php

我有一个函数，它包含一个基于传递给它的字符串的文件，即来自查询字符串的操作变量。我将其用于过滤等目的，因此人们不能包含他们不应该包含的文件，并且如果文件不存在，则会加载默认文件。问题是当函数运行并包含文件范围时，由于包含在函数内运行而丢失。这成为一个问题，因为我使用全局配置文件，然后我为站点上的每个模块使用特定的配置文件。我目前这样做的方式是定义我希望能够用作全局变量，然后将它们添加到过滤函数的顶部。

有没有更简单的方法可以做到这一点，即在进行函数调用时保留范围，或者是否有 PHP 宏之类的东西？

**编辑：**使用 extract($_GLOBALS); 会更好吗？而不是在我的函数调用中？

**编辑2：** 对于任何关心的人。我意识到我完全在思考这个问题，而不是使用一个函数，我应该只使用一个包含，呃！这样我就可以保持我的范围并拥有我的蛋糕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T02:36:27.987

**编辑：**好的，我已经重新阅读了你的问题，我想我明白你现在在说什么：
你想要这样的东西起作用：

```
// myInclude.php
$x = "abc";

// -----------------------
// myRegularFile.php

function doInclude() {
    include 'myInclude.php';
}
$x = "A default value";
doInclude();
echo $x;    // should be "abc", but actually prints "A default value" 
```

如果您只更改几个变量，并且您提前知道将在包含中定义哪些变量，请将它们声明为`global`在`doInclude()`函数中。

或者，如果您的每个包含都可以定义任意数量的变量，您可以将它们全部放入一个数组中：

```
// myInclude.php
$includedVars['x'] = "abc";
$includedVars['y'] = "def";

// ------------------
// myRegularFile.php
function doInclude() {
    global $includedVars;
    include 'myInclude.php';
    // perhaps filter out any "unexpected" variables here if you want
}

doInclude();
extract($includedVars);
echo $x;        // "abc"
echo $y;        // "def" 
```

* * *

*原答案：*

这种东西被称为“闭包”，并在 PHP 5.3 中引入

[http://steike.com/code/php-closures/](http://steike.com/code/php-closures/)

> 使用 extract($_GLOBALS); 会更好吗？而不是在我的函数调用中？

亲爱的主，不。如果要从函数内部访问全局变量，只需使用`global`关键字。例如：

```
$x = "foo";
function wrong() {
    echo $x;
}
function right() {
    global $x;
    echo $x;
}

wrong();        // undefined variable $x
right();        // "foo" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T11:24:51.953

> 有没有更简单的方法可以做到这一点，即在进行函数调用时保留范围

你可以使用：

```
function doInclude($file, $args = array()) {
  extract($args);
  include($file);
} 
```

如果您不想显式传递变量，则可以调用`doInclude`with[`get_defined_vars`](http://docs.php.net/get_defined_vars)作为参数，例如：

```
doInclude('test.template.php', get_defined_vars()); 
```

就个人而言，我更愿意传递一个显式数组，而不是使用它，但它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T03:15:33.820

当涉及到配置选项（尤其是文件路径等）时，我通常只使用 define() 用绝对路径来定义它们。就像是：

```
define('MY_CONFIG_PATH', '/home/jschmoe/myfiles/config.inc.php'); 
```

这样，无论范围更改如何，它们始终可以全局访问，除非我迁移到不同的文件结构，否则它总是能够找到所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T05:40:13.660

如果我理解正确，您的代码如下：

```
function do_include($foo) {
  if (is_valid($foo))
    include $foo;
}

do_include(@$_GET['foo']); 
```

一种解决方案（可能简单也可能不简单，具体取决于代码库）是将包含移出全局范围：

```
if (is_valid(@$_GET['foo']))
  include $_GET['foo']; 
```

存在其他解决方法（如您提到的：声明全局变量、直接使用 $_GLOBALS 数组等），但此解决方案的优点是您不必在所有包含的文件中记住此类约定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T07:17:44.673

为什么不从包含中返回一个值，然后将包含调用的值设置为一个变量：

配置文件

```
return array(
    'foo'=>'bar',
    'x'=>23,
    'y'=>12
); 
```

脚本.php

```
$config = require('config.php');
var_dump($config); 
```

无需用全局变量搞乱这个地方

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-04-17T06:46:05.860

您可以将包含文件中的变量声明为全局变量，确保它们具有全局范围：

```
//inc.php
global $cfg;
$cfg['foo'] = bar;

//index.php
function get_cfg($cfgFile) {
    if (valid_cfg_file($cfgFile)) {
        include_once($cfgFile);
    }
}
...
get_cfg('inc.php');
echo "cfg[foo]: $cfg[foo]\n"; 
```

# javascript - 我在哪里可以找到一个好的 jQuery 投影插件？

> ID：165446
> 
> 赞同：19
> 
> 时间：2008-10-03T02:35:31.780
> 
> 标签：javascript, jquery, plugins

有人对投影 jQuery 插件有很好的推荐吗？

我一直在做一个项目，页面上的每个元素都有一个微妙的阴影，我们开始使用[RUZEE](http://www.ruzee.com/blog/shadedborder/)来做阴影，但是当你在页面上计算超过 4 或 5 个阴影时，性能会受到严重影响.

我开始[编写自己的插件](http://ralphwhitbeck.com/2008/08/27/jQueryPluginSimpleShadow.aspx)，我称之为简单阴影，它只使用 jQuery 将图像注入到浮动 div 中，您想要阴影的 div 周围。没有什么优雅的，但为了完成该站点，它在没有性能影响的情况下工作。

现在我的插件没什么特别的，但我仍在寻找一个好的轻量级阴影插件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-01-31T18:25:19.137

CSS 3 将支持投影。Firefox 和 Safari 已经支持该功能。

您可能想使用它而不是 jQuery 功能，因为它将在关闭 javascript 的浏览器中运行。

看看[http://www.css3.info/preview/box-shadow/](http://www.css3.info/preview/box-shadow/)的影子演示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-12-17T14:31:43.650

托管 jQuery Dropshadow 插件的原始站点显然已经关闭。

对于任何寻找它的人，[我目前将它托管在我的 Dropbox 帐户上](http://dl.dropbox.com/u/1546882/jquery.dropshadow.js)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T08:35:21.917

试试 FontEffect jQuery 插件，抱歉我无法发布链接，但你可以在 google 或 jQuery 插件网站上轻松找到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T15:03:07.310

JQuery UI 不再支持影子功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-03T02:40:25.747

[jQuery UI](http://docs.jquery.com/UI/Shadow)还提供了投影功能。

# c# - 为什么人们喜欢区分大小写？

> ID：165455
> 
> 赞同：14
> 
> 时间：2008-10-03T02:40:08.150
> 
> 标签：c#, case-sensitive

只是想知道为什么人们喜欢在编程语言中区分大小写？我不是想发起一场火焰战争，只是好奇而已。
就我个人而言，我从来没有真正喜欢过它，因为当我尝试过一种区分大小写的语言时，我发现我的工作效率会下降，请注意，我正在慢慢热身/习惯它，因为我更多地使用 C# 和 F#我曾经。

那你为什么喜欢它？

干杯

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-10-03T02:45:22.737

一致性。如果“foo”、“Foo”、“fOO”和“fOo”被认为是相同的，则代码更难阅读。

有些人会用全部大写字母写所有内容，从而降低可读性。

根据大写约定，区分大小写使得以不同方式使用“相同名称”变得容易，例如，

```
Foo foo = ...  // "Foo" is a type, "foo" is a variable with that type 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-03T03:16:21.493

VB.NET 的一个优点是，尽管它不区分大小写，但 IDE 会自动将所有内容重新格式化为您正在使用的标识符的“官方”大小写 - 因此易于保持一致，易于阅读。

缺点是我讨厌 VB 风格的语法，更喜欢 C 风格的运算符、标点符号和语法。

在 C# 中，我发现我总是按 Ctrl-Space 以节省必须使用正确的类型。

仅仅因为您可以命名仅因情况而异的事物并不意味着这是一个好主意，因为如果其中很多泄漏到更大的范围内，可能会导致误解，因此我建议在应用程序或子系统中避免使用它-级别，但只允许在函数、方法或类内部使用它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-03T03:11:18.183

区分大小写不会强制编码样式或一致性。如果你对常量进行帕斯卡大小写，编译器不会抱怨。它只会强制您每次使用它时都使用帕斯卡大小写。我个人觉得不得不尝试区分两个仅在大小写上有所不同的项目是令人恼火的。在很短的代码块中很容易做到，但在非常大的代码块中很难保持直截了当。另请注意，人们实际上可以使用区分大小写而不发疯的唯一方法是，如果他们都严格遵循相同的命名约定。增加值的是命名约定，而不是区分大小写。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-03T03:47:04.930

我为我的公司维护了一个内部编译器，并且很想把它变成一个混合体——你可以使用你想要的任何大小写作为标识符，你必须用相同的大小写来引用它，但是用相同的名称命名其他东西并且不同的情况会导致错误。

```
暗淡 abc = 1
Dim y = Abc - 1 ' 错误，大小写不匹配 "abc"
Dim ABC = False ' 错误，无法重新声明变量“abc”

```

它目前不区分大小写，所以我可能可以修复一些现有的错误，而且没有人会抱怨太多......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-03T04:28:12.243

许多喜欢*区分大小写*的人误解了*区分*大小写的含义。

VB .NET 不区分大小写。这并不意味着您可以将变量声明为 abc，然后将其称为 ABC、Abc 和 aBc。这意味着如果您将其键入为其他任何一个，IDE 将自动将其更改为正确的形式。

不区分大小写意味着您可以键入

```
dim a as string 
```

VS 会自动将其更改为正确大小写的

```
Dim a As String 
```

实际上，这意味着您几乎不需要按 Shift 键，因为您可以输入所有小写字母并让 IDE 为您更正。

但是 C# 在这方面并没有以前那么糟糕。C# 中的 Intellisense 比 VS 2002 和 2003 中的更加激进，因此击键计数下降了很多。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-01-13T18:55:05.427

这里有很多答案，但令我惊讶的是，没有人指出同样取笑 stackoverflow 竞争对手的明显例子：

```
expertSexChange != expertsExchange 
```

当您使用驼峰式大小写变量名称时，大小写非常重要。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-03T02:55:54.803

我相信它可以强制执行一致性，从而提高代码的可读性，并让您的眼睛更好地解析出各个部分。

```
class Doohickey {

  public void doSomethingWith(string things) {
     print(things);
  }
} 
```

使用大小写约定使代码对任何程序员来说都显得非常标准化。您可以轻松地挑选出类、类型和方法。如果有人可以以任何方式将其资本化，那就更难了：

```
Class DOOHICKEY {
  Public Void dosomethingwith(string Things) {
    Print(things);
  }
} 
```

并不是说人们会写出丑陋的代码，而是大写和标点规则使编写更易于阅读，区分大小写或大小写标准使代码更易于阅读。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-03T03:54:36.287

我相信重要的是要理解区分大小写和可读性之间的区别，以正确回答这个问题。虽然使用不同的大小写策略很有用，但您可以在不区分大小写的语言中使用它们。

例如 foo 可以用作变量，而 FOO 在 java 和 VB 中都可以用作常量。VB 将允许您稍后键入 fOo 存在细微差别，但这主要是可读性问题，希望通过某种形式的代码完成来修复。

当您想要拥有对象的实例时，可能会非常有用。如果您使用一致的命名约定，则可以很容易地查看对象的来源。

例如： FooBar fooBar = new FooBar();

当只需要一个类型的对象时，可读性会显着提高，因为对象是什么一目了然。当需要多个实例时，您显然必须选择新的（希望是有意义的名称），但在小的代码段中，使用带有小写首字符的类名而不是像 myFooBar、x 或其他一些你会忘记它的作用的任意值。

当然，所有这些都是一个上下文问题，但是在这种情况下，我会说 9 次中的 10 次它得到了回报。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-03T02:41:51.640

它为您提供了更多选择。

铃铃铃

都是不同的。

此外，它驱使刚被雇用的新手们试图找出总数不正确的原因；o)))

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-03T02:46:20.880

因为现在您实际上必须以一致的方式键入所有内容。然后事情突然开始变得有意义。

如果你有一个体面的编辑器——一个具有 IntelliSense 功能的编辑器或具有另一个名称的相同功能——你应该不会有任何问题来找出区分大小写的名称。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-03T03:25:19.460

区分大小写是疯狂的！什么样的疯狂程序员会在同一个范围内使用名为 foo、foO、fOo 和 fOO 的变量？你永远不会让我相信区分大小写是有原因的！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-03T04:15:48.467

我认为这里还涉及心理学问题。我们是程序员，我们对事物进行细微的区分。`a`与 ASCII 值不同`A`，当我的编译器认为它们相同时，我会感到奇怪。这就是为什么，当我输入

```
(list 'a 'b 'c) 
```

在 LISP 中（在 REPL 中），它以

```
(A B C) 
```

我的脑海里立刻惊呼‘*这不是我说的！*'。当事情不一样时，它们*是*不同的，必须这样考虑。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-08T17:26:19.117

我通常会在假期花一些时间在 Delphi 编程上，而其他大部分时间我只使用 C++ 和 MASM。有一件事很奇怪：当我在 Delphi 上时，我不喜欢区分大小写，但是当我在 C++ 上时——我喜欢。我喜欢区分大小写，因为它使相似的词（函数、变量）看起来相似，我喜欢不区分大小写，因为它不会对语法施加过多的限制。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-02-14T18:35:00.857

来自 .NET Framework Developer's Guide [Capitalization Conventions](http://msdn.microsoft.com/en-us/library/ms229043.aspx)，区分大小写：

> 大写指南的存在只是为了使标识符更易于阅读和识别。大小写不能用作避免库元素之间名称冲突的方法。
> 
> 不要假设所有编程语言都区分大小写。他们不是。名称不能仅因大小写而异。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-03T02:43:49.480

它对于区分代码中的类型很有用。

例如在 Java 中：如果它以大写字母开头，那么它可能是一个类。如果它的 ALL_CAPS 它可能是一个常数。

它提供了更多的多功能性。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-10-03T02:45:14.720

感觉像是一种更专业的编码方式。不应该需要编译器来弄清楚你的意思。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-10-03T02:47:30.673

很久以前，当我更多地使用 VB3/4 时，我的感觉和你一样。现在我主要在 C# 中工作。但是现在我发现 IDE 在查找符号方面做得很好，并在不同的情况下提供了良好的智能感知。它还为我自己的代码提供了更大的灵活性，因为我可以对具有不同情况的项目有不同的含义，我现在做了很多。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-10-03T02:47:44.963

恕我直言，这完全是一个习惯问题。无论你习惯哪一种，都会显得自然而正确。

你可以想出很多理由来解释它的好坏，但没有一个站得住脚。例如：

*   你会得到更多可能的标识符，例如。`foo`对比`Foo`对比`FOO`_
*   但是只有在情况下才不同的标识符不是一个好主意
*   您可以将类型信息编码为名称（例如，`FooBar`=typename、`fooBar`=function、`foo_bar`=variable、`FOO_BAR`=macro）
*   但是你无论如何都可以用匈牙利符号来做到这一点

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-10-03T02:52:44.950

如果您在引用文件名区分大小写的 Linux 中工作，这也是一个好习惯。我不得不移植一个 Windows ColdFusion 应用程序才能在 Linux 中工作，这简直是一场噩梦。还有一些数据库开启了区分大小写功能，想象一下那里的乐趣。

不管平台如何，这是一个好习惯，并且肯定会导致更一致的开发风格。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-10-03T04:31:49.270

因为这也是自然语言的工作方式。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-10-03T10:20:41.500

在编程中，需要注意区分大小写，例如有一个公共属性 Foo 和一个相应的私有/受保护字段 foo。使用 IntelliSense，不犯错误并非难事。

然而，在操作系统中，区分大小写简直太疯狂了。我真的不想在同一个目录中有一个文件 Foo*和*foo*和*fOO 。每次我在做 *nix 的东西时，这让我发疯。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-10-03T10:46:11.450

对我来说，区分大小写只是对诸如 thisValue 用于参数和 ThisValue 用于公共属性或函数之类的范围的一种游戏。

您经常需要在不同的范围内使用相同的变量名（因为它代表相同的事物），并且区分大小写可以帮助您在不使用前缀的情况下做到这一点。

唷，至少我们不再使用匈牙利符号。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-11-17T09:35:12.043

在使用旧的 VBScript ASP 代码多年后，当我们迁移到 .NET 时，我们选择了 C#，主要原因之一是区分大小写。旧代码是不可读的，因为人们没有遵循任何约定：代码是一团不可读的混乱（好吧，糟糕的 VBScript IDE 对此有所帮助）。

在 C# 中，我们可以定义命名约定，每个人都必须遵守它们。如果某些东西大小写不正确，您可以重命名它（使用重构，但这是 IDE 功能）并且不会有任何问题，因为类或变量将在整个代码中以相同的方式命名。

最后，我认为如果所有内容都正确大小写，它的可读性会更高。也许在不区分大小写的情况下编写会更快，但从代码审查和维护的角度来看，这不是最好的事情，因为跳过代码来寻找东西更容易。例如，`foo`一目了然地找到所有字符串比查找`foo`, `Foo`, `FOO`, `FOo`...更容易

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2011-01-13T20:03:33.843

不区分大小写的语言不容易推广到非 ASCII 字符集。对英语以外的语言进行适当的大小写转换不是一项简单的任务，并且取决于系统区域设置等。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2012-01-18T07:47:19.163

不区分大小写非常困难，除非您将语法限制为 ascii（或仅对 ascii 字符应用不区分大小写），并且您还需要限制语言环境。

确定字符大小写的规则既没有很好的定义，也不是无损的。

一些字符可以有多个“小写”形式。有些人会不同意正确的大写形式应该是什么。

（某些语言和环境允许在名称中使用几乎字符）

考虑[在 C# 中 ToUpper() 和 ToUpperInvariant() 有什么区别？](https://stackoverflow.com/questions/3550213/in-c-sharp-what-is-the-difference-between-toupper-and-toupperinvariant)

# c# - 检查 Null 异常的正确方法是什么？

> ID：165458
> 
> 赞同：5
> 
> 时间：2008-10-03T02:41:44.713
> 
> 标签：c#, asp.net

哪个是最正确的代码？

```
if (HttpContext.Current.Response.Cookies[authCookieName] != null) {
    HttpContext.Current.Response.Cookies[authCookieName].Value = "New Value";
} 
```

或者

```
if (HttpContext.Current != null)
    if (HttpContext.Current.Response != null)
        if (HttpContext.Current.Response.Cookies != null)
            if (HttpContext.Current.Response.Cookies[authCookieName] != null)
                HttpContext.Current.Response.Cookies[authCookieName].Value = "New Value"; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-10-03T02:43:56.063

如果 HttpContext、HttpContext.Current、HttpContext.Current.Response 或 Http.Current.Response.Cookies 中的任何一个为 null，那么您已经有麻烦了。让异常发生并修复您的 Web 服务器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-03T03:18:30.583

两者都很好。假设您已经检查了需要首先检查的所有其他内容。例如：

```
private bool CheckSuspendersAndBelt()
{
    try
    {
        //ensure that true is true...
        if (true == true)
        {
            //...and that false is false...
            if (false == false)
            {
                //...and that true and false are not equal...
                if (false != true)
                {
                    //don't proceed if we don't have at least one processor
                    if (System.Environment.ProcessorCount > 0)
                    {
                        //and if there is no system directory then something is wrong
                        if (System.Environment.SystemDirectory != null)
                        {
                            //hopefully the code is running under some version of the CLR...
                            if (System.Environment.Version != null)
                            {
                                //we don't want to proceed if we're not in a process...
                                if (System.Diagnostics.Process.GetCurrentProcess() != null)
                                {
                                    //and code running without a thread would not be good...
                                    if (System.Threading.Thread.CurrentThread != null)
                                    {
                                        //finally, make sure instantiating an object really results in an object...
                                        if (typeof(System.Object) == (new System.Object()).GetType())
                                        {
                                            //good to go
                                            return true;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        return false;
    }
    catch
    {
        return false;
    }
} 
```

（对不起，无法抗拒...... :)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-03T02:46:41.317

可以尝试：

```
if(HttpContext.Current != null && 
   HttpContext.Current.Response != null && 
   HttpContext.Current.Response.Cookies != null && 
   HttpContext.Current.Response.Cookies[authCookieName] != null) 
{
    // do your thing
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T02:49:27.300

HttpContext.Current.Response.Cookies 永远不会为空。唯一可能导致 null 的是，如果您期望的 cookie 不存在，那么第一个是正确的。如果您不接受网络请求，HttpContext.Current 将为 null :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-03T04:36:35.187

你给出的第一个例子绰绰有余。如前所述，如果任何其他对象为空，则 ASP.NET 存在问题。

```
if (HttpContext.Current.Response.Cookies[authCookieName] != null) {
    HttpContext.Current.Response.Cookies[authCookieName].Value = "New Value";
} 
```

但是，不要用这些经常检查的代码乱扔代码，您应该创建一些通用函数，如**SetCookie**、**GetCookie**、**GetQueryString**和**GetForm**等，它们接受名称和值（对于 Set 函数）作为参数，处理 null 检查，以及返回值或空字符串（用于获取函数）。这将使您的代码更易于维护和可能改进，如果您决定在将来使用 Cookie 以外的东西来存储/检索选项，您只需更改功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T02:44:38.963

两者都不是更正确的，尽管我会避免使用第二种，因为深度嵌套的条件往往难以理解和维护。

如果您希望获得空指针异常，请使用第一个。如果您想以其他方式或静默处理空值，请使用第二种方式（或第二种方式的重构版本）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-03T02:44:53.940

如果您认为`Current`, `Response`,`Cookies`或`Cookies[authCookieName]`可能是`null`，并且如果其中任何一个是，您有合理的事情要做，那么后者就是要走的路。如果机会很低，和/或如果中间体为空，您无能为力，请选择前者，因为它更简洁 - 如果您使用扩展示例，您可以做的最好的事情是获得更好的日志记录。

# tsql - 避免 TSQL 数据转换错误

> ID：165466
> 
> 赞同：4
> 
> 时间：2008-10-03T02:44:32.723
> 
> 标签：tsql, sybase, data-conversion

我认为最好以简单示例的形式提出这个问题。以下 SQL 块导致*“DB-Library Error:20049 Severity:4 Message:Data-conversion 导致溢出”*消息，但这是怎么回事？

```
declare @a numeric(18,6), @b numeric(18,6), @c numeric(18,6)
select @a = 1.000000, @b = 1.000000, @c = 1.000000
select @a/(@b/@c)
go 
```

这与以下有何不同：

```
select 1.000000/(1.000000/1.000000)
go 
```

哪个工作正常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-05T11:58:26.583

上次尝试使用 Sybase 时（多年前）我遇到了同样的问题。从 SQL Server 的思维方式出发，我没有意识到 Sybase 会尝试强制输出小数——从数学上讲，这是它**应该**做的。:)

从[Sybase 手册](http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/34781;pt=35709)：

> 当新类型的小数位数太少而无法容纳结果时，就会发生算术溢出错误。

再往下：

> 在隐式转换为数字或小数类型期间，比例丢失会产生比例错误。使用 arithabort numeric_truncation 选项来确定此类错误的严重程度。默认设置 arithabort numeric_truncation on 会中止导致错误的语句，但会继续处理事务或批处理中的其他语句。如果将 arithabort numeric_truncation 设置为 off， Adaptive Server 将截断查询结果并继续处理。

因此*，假设在您的场景中精度损失是可以接受的*，您可能希望在事务开始时执行以下操作：

```
SET ARITHABORT NUMERIC_TRUNCATION OFF 
```

然后在您的交易结束时：

```
SET ARITHABORT NUMERIC_TRUNCATION ON 
```

这就是多年前为我解决的问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T19:29:17.047

这只是推测，但可能是 DBMS 不查看变量的动态值而只查看潜在值？因此，一个六进制数字除以一个六进制数字可以得到一个十二进制数字；在字面除法中，DBMS 知道没有溢出。不过，仍然不确定为什么 DBMS 会关心——它不应该将两个 6 位小数除法的结果返回为 18 位小数吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-04T23:11:27.333

因为您已经在第一个示例中声明了变量，所以结果应该是相同的声明（即数字 (18,6)），但事实并非如此。

我不得不说第一个在 SQL2005 中工作（返回 1.000000 [相同的声明类型]），而第二个返回（1.00000000000000000000000 [完全不同的声明]）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T11:39:25.143

没有直接关系，但使用 Sybase ASE (12.5.0.3) 可能会因算术溢出错误而节省一些时间。

我在一个打算稍后更新的临时表中设置了一些默认值，并偶然发现了算术溢出错误。

```
declare @a numeric(6,3)

select 0.000 as thenumber into #test --indirect declare

select @a = ( select thenumber + 100 from #test )

update #test set thenumber = @a

select * from #test 
```

显示错误：

```
Arithmetic overflow during implicit conversion of NUMERIC value '100.000' to a NUMERIC field . 
```

在我的脑海中应该可以工作，但没有声明“thenumber”列（或间接声明为 decimal(4,3) ）。因此，您必须将临时表列的比例和精度间接声明为您想要的格式，在我的例子中是 000.000。

```
select 000.000 as thenumber into #test --this solved it 
```

希望这可以节省一些时间:)

# class - 编写成员函数时有什么更好的做法？

> ID：165474
> 
> 赞同：4
> 
> 时间：2008-10-03T02:45:49.243
> 
> 标签：class, member-functions

我已经看到成员函数在它们所属的类内部和类外部都使用类内部的函数原型进行了编程。我只使用过第一种方法进行编程，但想知道使用另一种方法或只是个人喜好是否更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-03T02:53:32.627

*假设你的意思是 C++，在类之外*定义函数总是更好，因为如果你把它放在类中，编译器可能会尝试内联它，这并不总是可取的：

1.  代码大小的增加（每个包含此标头的目标文件最终都可能在其代码中包含该函数的副本）。
2.  函数定义更改时破坏二进制兼容性。

即使使用内联函数，*通常*最好将定义放在类之外以提高类公共接口的可读性，除非该函数是一个普通的访问器或其他一些单行器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-03T05:43:31.313

对于 C++，将方法定义放在头文件中意味着包含给定头文件的所有内容都必须在头文件更改时重新编译——即使它只是一个实现细节。

将定义移出头文件意味着仅当头文件本身发生更改（添加/删除函数或更改声明）时，才需要重新编译包含头文件的文件。这会对复杂项目的编译时间产生很大影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-03T02:53:36.540

这两种技术都有优点。

如果您只在类定义中放置原型，那么使用您的类的人可以更轻松地查看可用的方法。他们不会因实施细节而分心。

将代码直接放在类定义中可以更简单地使用类，您只需#include 一个标题。这对于模板类特别有用（必要）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-03T02:55:27.223

假设语言是 C++：

底线是个人喜好。课堂内部整体更短，更直接，尤其是对于

```
int getFoo() const { return _foo; } 
```

函数类型。在 te 类之外，可以从类定义中删除“混乱”。

我看到这两个都在使用...

当然，非内联函数总是在类之外。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-03T03:02:28.970

在定义类时混合两种样式也很常见。对于由 1 或 2 行组成的简单方法，在类定义中定义方法体是常见且方便的。对于更冗长的方法，最好在外部定义它们。您将拥有更具可读性的类定义，而不会将它们与方法体混淆。

隐藏方法的实现是有益的，因为类的用户不会被实际实现分散注意力，或者对以后可能会改变的实现做出假设。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-03T02:56:24.490

我假设你在谈论 C++。

拥有一个漂亮而干净的界面当然是一个好主意。拥有一个单独的实现文件有助于保持界面整洁。

它还减少了编译时间，尤其是在您使用[不透明指针](http://en.wikipedia.org/wiki/Opaque_pointer)时。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-03T03:10:16.033

如果在类中实现函数，则不能在多个 .cpp 文件中 #include 类，否则链接器会抱怨函数的多个定义。

因此，通常的做法是将类定义放在 .h 文件中，将成员实现放在 .cpp 文件中（通常具有相同的名称）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-03T06:59:36.200

同样，假设 C++，我通常将其限制为虚拟函数的占位符，例如

```
virtual int MyFunc() {}  // Does nothing in base class, override if needed 
```

其他任何事情，而 Andrew Medico 的观点太容易出现并损害编译时间。

# ruby - 在 Windows 上安装八哥

> ID：165488
> 
> 赞同：5
> 
> 时间：2008-10-03T02:50:03.587
> 
> 标签：ruby, rubygems, starling-server

我正在尝试在我的 Windows 机器上安装 starling gem。但是，每当我尝试安装它时，我都会收到此错误：

```
Building native extensions.  This could take a while...  
ERROR:  Error installing starling:  
        ERROR: Failed to build gem native extension.  

c:/ruby/bin/ruby.exe extconf.rb install starling -- --srcdir= c:\ruby-1.8.7-p72  
checking for windows.h... no  
*** extconf.rb failed ***  
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:  
        --with-opt-dir  
        --without-opt-dir  
        --with-opt-include  
        --without-opt-include=${opt-dir}/include  
        --with-opt-lib  
        --without-opt-lib=${opt-dir}/lib  
        --with-make-prog  
        --srcdir=.  
        --curdir  
        --ruby=c:/ruby/bin/ruby  

Gem files will remain installed in c:/ruby/lib/ruby/gems/1.8/gems/eventmachine-0
.12.2 for inspection.  
Results logged to c:/ruby/lib/ruby/gems/1.8/gems/eventmachine-0.12.2/ext/gem_mak
e.out 
```

我需要安装什么来提供`windows.h`标题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-03T14:50:09.247

Gems~~目前在 Windows 上[有些损坏](https://stackoverflow.com/questions/134581/gem-update-on-windows-is-it-broken)~~，当时是在 Windows 上损坏，但现在已修复。以下解决方法适用于旧的一键式安装程序版本的 Ruby；你真的应该更新到新的基于 MinGW 的[RubyInstaller](http://rubyinstaller.org/)和[DevKit](http://rubyinstaller.org/add-ons/devkit/)，解决方法仍然有效，但更多的是未来的证明。

*   找到具有 win32 二进制文件的问题 gem 版本（在本例中为**eventmachine**）。如果您查看[RubyForge](http://rubyforge.org/frs/?group_id=1555)，您会看到最后一个拥有 win32 二进制文件的 eventmachine gem 是版本 0.12.0
*   强制安装该版本的事件机器：

    `$ gem install eventmachine --version=0.12.0
    Successfully installed eventmachine-0.12.0-x86-mswin32
    1 gem installed
    Installing ri documentation for eventmachine-0.12.0-x86-mswin32...
    Installing RDoc documentation for eventmachine-0.12.0-x86-mswin32...`

*   现在安装尝试再次安装您的原始 gem：

    `$ gem install starling
    Successfully installed ZenTest-3.10.0
    Successfully installed memcache-client-1.5.0
    Successfully installed SyslogLogger-1.4.0
    Successfully installed starling-0.9.8
    4 gems installed
    Installing ri documentation for ZenTest-3.10.0...
    Installing ri documentation for memcache-client-1.5.0...
    Installing ri documentation for SyslogLogger-1.4.0...
    Installing ri documentation for starling-0.9.8...
    Installing RDoc documentation for ZenTest-3.10.0...
    Installing RDoc documentation for memcache-client-1.5.0...
    Installing RDoc documentation for SyslogLogger-1.4.0...
    Installing RDoc documentation for starling-0.9.8...`

但是请注意，如果您现在运行**`gem update`**gems 将愚蠢地尝试安装最新版本的 eventmachine，正如我们已经知道的那样，它不会在 Windows 上构建。这会导致 gem 更新完全停止。请参阅[此问题](https://stackoverflow.com/questions/134581/gem-update-on-windows-is-it-broken)以了解如何解决*这个*特殊的烦恼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-13T06:41:57.837

现在一切都安装好了，是否可以让它在windows下工作？我在这台机器上得到了一个未实现的 fork() 函数，因为 Windows 没有 fork() 进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T04:48:00.930

安装似乎卡在安装 eventmachine gem 上。这里最简单的方法可能是在此处下载并安装适用于 Windows 的 eventmachine 二进制[gem](http://rubyforge.org/frs/?group_id=1555&release_id=22647)

否则，您将需要一个编译器。（我假设你没有）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T12:14:33.180

我不知道这是否可行，但有人正在开发 Windows 下带有 C 编译器的一键式 Ruby 安装程序。

见[http://github.com/luislavena/rubyinstaller/tree/master](http://github.com/luislavena/rubyinstaller/tree/master)

# python - 使用python检测Windows中的鼠标点击

> ID：165495
> 
> 赞同：24
> 
> 时间：2008-10-03T02:51:44.470
> 
> 标签：python, windows, mouse

无论鼠标在哪个窗口中，如何检测鼠标点击？

Perferabliy in python，但如果有人可以用任何语言解释它，我可能会弄明白。

我在微软的网站上找到了这个：http: [//msdn.microsoft.com/en-us/library/ms645533 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms645533(VS.85).aspx)

但我不知道如何检测或获取列出的通知。

尝试使用 pygame 的 pygame.mouse.get_pos() 函数如下：

```
import pygame
pygame.init()
while True:
    print pygame.mouse.get_pos() 
```

这只是返回 0,0。我对pygame不熟悉，有什么遗漏吗？

无论如何，我更喜欢一种不需要安装第 3 方模块的方法。（除了 pywin32 [http://sourceforge.net/projects/pywin32/](http://sourceforge.net/projects/pywin32/)）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-10-03T21:38:15.320

在程序外检测鼠标事件的唯一方法是使用[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx)安装 Windows 挂钩。pyHook模块封装[了](http://www.cs.unc.edu/Research/assist/developer.shtml)细节。这是一个示例，它将打印每次鼠标单击的位置：

```
import pyHook
import pythoncom

def onclick(event):
    print event.Position
    return True

hm = pyHook.HookManager()
hm.SubscribeMouseAllButtonsDown(onclick)
hm.HookMouse()
pythoncom.PumpMessages()
hm.UnhookMouse() 
```

您可以检查随模块安装的**example.py**脚本以获取有关**事件**参数的更多信息。

在纯 Python 脚本中使用 pyHook 可能会很棘手，因为它需要一个主动的消息泵。从[教程](https://web.archive.org/web/20100501173949/http://mindtrove.info/articles/monitoring-global-input-with-pyhook/)：

> 任何希望接收全局输入事件通知的应用程序都必须具有 Windows 消息泵。获得其中之一的最简单方法是使用 Python 的 Win32 扩展包中的 PumpMessages 方法。[...] 运行时，该程序只是闲置并等待 Windows 事件。如果您使用的是 GUI 工具包（例如 wxPython），则该循环是不必要的，因为该工具包提供了自己的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-01-30T07:01:35.750

我使用win32api。它在单击任何窗口时起作用。

```
# Code to check if left or right mouse buttons were pressed
import win32api
import time

state_left = win32api.GetKeyState(0x01)  # Left button down = 0 or 1\. Button up = -127 or -128
state_right = win32api.GetKeyState(0x02)  # Right button down = 0 or 1\. Button up = -127 or -128

while True:
    a = win32api.GetKeyState(0x01)
    b = win32api.GetKeyState(0x02)

    if a != state_left:  # Button state changed
        state_left = a
        print(a)
        if a < 0:
            print('Left Button Pressed')
        else:
            print('Left Button Released')

    if b != state_right:  # Button state changed
        state_right = b
        print(b)
        if b < 0:
            print('Right Button Pressed')
        else:
            print('Right Button Released')
    time.sleep(0.001) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-06T00:24:34.810

自从提出这个问题以来，这是一个热门的时刻，但我想我会分享我的解决方案：我刚刚使用了 built-in module `ctypes`。（我正在使用 Python 3.3 顺便说一句）

```
import ctypes
import time

def DetectClick(button, watchtime = 5):
    '''Waits watchtime seconds. Returns True on click, False otherwise'''
    if button in (1, '1', 'l', 'L', 'left', 'Left', 'LEFT'):
        bnum = 0x01
    elif button in (2, '2', 'r', 'R', 'right', 'Right', 'RIGHT'):
        bnum = 0x02

    start = time.time()
    while 1:
        if ctypes.windll.user32.GetKeyState(bnum) not in [0, 1]:
            # ^ this returns either 0 or 1 when button is not being held down
            return True
        elif time.time() - start >= watchtime:
            break
        time.sleep(0.001)
    return False 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-03T09:56:35.030

Windows MFC，包括 GUI 编程，可以通过 Python 使用Mark Hammond的[Python for Windows 扩展来访问。](http://sourceforge.net/projects/pywin32/)来自 Hammond 和 Robinson 的[书中](http://oreilly.com/catalog/9781565926219/)[的 O'Reilly 书籍摘录](http://www.onlamp.com/lpt/a/217)展示了如何挂钩鼠标消息，例如：

```
self.HookMessage(self.OnMouseMove,win32con.WM_MOUSEMOVE) 
```

原始 MFC 并不容易或显而易见，但在网络上搜索 python 示例可能会产生一些可用的示例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-03T09:13:27.253

windows的做法是处理`WM_LBUTTONDBLCLK`消息。

要发送此信息，您的窗口类需要使用`CS_DBLCLKS`类样式创建。

恐怕我不知道如何在 Python 中应用它，但希望它能给你一些提示。

# gcc - 是否可以说服 GCC 模仿 fastcall 调用约定？

> ID：165496
> 
> 赞同：3
> 
> 时间：2008-10-03T02:51:57.450
> 
> 标签：gcc, visual-c++

所以我有一个程序集需要在 Windows 上使用 fastcall 调用约定调用一个函数，但 gcc 不（afaict）支持它。GCC 确实提供了 regparm 属性，但它期望前 3 个参数在 eax、edx 和 ecx 中传递，而 fastcall 期望前两个参数在 ecx 和 edx 中传递。

我只是试图避免有效地复制一些代码路径，所以这并不是很关键，但如果它是可以避免的，那就太好了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-03T03:01:09.440

GCC 确实支持`fastcall`, via `__attribute__((fastcall))`。它似乎已在 GCC 3.4 中引入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T21:05:53.340

我知道我参加这个聚会有点晚了，但如果你们中的任何人偶然发现这一点，请记住，您可以定义一个宏来模仿它。例如：

```
#if defined(__GNUC__)
    #define MSFASTCALL __fastcall
    #define GCCFASTCALL 
#elif defined(_MSC_VER)
    #define MSFASTCALL
    #define GCCFASTCALL __attribute__((fastcall))
#endif

int MSFASTCALL magic() GCCFASTCALL; 
```

显然，这看起来有点难看，所以你可以定义 2 个原型（我就是这样做的）以使其更易于阅读，但有些人更喜欢需要更少打字的路线。除了特殊情况，我一般不使用调用约定。我只是让编译器优化其余部分。

现在，有一些怪癖要记住。例如，当您针对 64 位平台时，所有函数都使用 fastcall 约定以利用额外的寄存器并提高速度并降低间接成本。同样，不同平台的 fastcall 实现方式也不同，因为它不是标准化的。还有一些其他的，但这是我能想到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T03:00:53.903

如果您从 asm 调用该函数，那么您肯定可以完全控制如何调用该函数。是什么阻止您加载寄存器并发出`CALL`?

# shell - 在 SPL - 本地范围内设置 PDQ？

> ID：165511
> 
> 赞同：1
> 
> 时间：2008-10-03T02:55:44.773
> 
> 标签：shell, informix

为了根据批处理作业运行的时间微调 PDQ 资源的分配，我们有一个实用程序可以根据一周中的某天/一天中的某小时规则设置 PDQPRIORITY，例如：

```
PDQPRIORITY=$(throttle); export PDQPRIORITY 
```

但是，这在脚本启动时是固定的，因此长时间运行的作业不会随着它们的进展而受到限制。为了解决这个问题，我们尝试了以下方法：

```
CREATE PROCEDURE informix.set_pdq() RETURNING VARCHAR(50);
  DEFINE pdq, dow SMALLINT;
  DEFINE hr SMALLINT;

  LET dow = WEEKDAY(CURRENT);
  LET hr = TO_CHAR(CURRENT, '%H');

  IF (dow == 0 OR dow == 6 OR hr < 8 OR hr > 14) THEN
      LET pdq = 100;
      SET PDQPRIORITY 100; -- SET PDQ does not accept a variable name arg.
  ELIF (hr >= 8 AND hr <= 10) THEN
      LET pdq = 40;
      SET PDQPRIORITY 40;
  ELIF (hr >= 11 AND hr <= 12) THEN
      LET pdq = 60;
      SET PDQPRIORITY 60;
  ELIF (hr >= 13 AND hr <= 14) THEN
      LET pdq = 80;
      SET PDQPRIORITY 80;
  END IF;
  RETURN "PDQPriority set to " || pdq;
END PROCEDURE; 
```

在整个 SQL 的不同时间间隔，我们添加了：

```
EXECUTE PROCEDURE set_pdq(); 
```

然而，虽然它没有失败，但 SET PDQ 的范围似乎是 SPL 的本地。`onstat -g mgm`不报告对分配的原始资源的任何更改。所以添加这些`set_pdq()`调用似乎没有任何效果——在程序启动时分配的资源保持不变。

该代码是嵌入在shell中的SQL，即：

```
 dbaccess -e $DBNAME << EOSQL
   SELECT .. INTO TEMP ..;
   EXECUTE PROCEDURE set_pdq();
   SELECT .. INTO TEMP ..;
   --etc
 EOSQL 
```

所以反引号或 $( ) 插值发生在脚本的开头，当 here 文档被传递给 dbaccess 时。（这消除了明显的`SET PDQPRIORITY $(throttle);`：）

哇，这很快就变得罗嗦了。任何人都可以提出任何不涉及完全重写这些批处理作业的实现方式吗？由于严重依赖临时表，因此无法将 SQL 分解成更小的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-12T02:09:49.423

正如您从提出问题和第一次尝试回答之间的过度延迟中推断出的那样，这并非微不足道。

我认为，部分问题是在创建存储过程或更新其统计信息时捕获了 PDQPRIORITY。事实上，这可能就是问题的全部。现在，临时表会导致存储过程出现另一组问题——当涉及到临时表时，存储过程通常需要重新优化（除非可能是 SP 本身创建了临时表）。

# registry - 如何跟踪安装屏蔽安装程序对系统所做的注册表更改？

> ID：165515
> 
> 赞同：1
> 
> 时间：2008-10-03T02:57:02.070
> 
> 标签：registry, installshield

我需要 i6comp 之类的东西，但需要 reg 更改列表而不是文件列表。

这样的事情存在吗？

编辑：我知道有办法监控ergistry的变化，但有没有办法通过检查设置文件来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-03T02:59:50.380

[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-03T02:59:54.153

[监管月](http://technet.microsoft.com/en-us/sysinternals/bb896652.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T03:54:21.013

您可以使用 Orca 之类的工具检查 MSI 中的注册表，但不能保证捕获对注册表的所有可能更改。

唯一确定的方法是使用 RegMon 之类的方法比较安装前和安装后的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T03:00:36.227

1.  导出注册表。
    *   运行安装程序。
    *   将注册表导出到其他文件
    *   将这两个文件与您最喜欢的比较程序进行比较。

# .net - 运行时的集合编辑器

> ID：165525
> 
> 赞同：2
> 
> 时间：2008-10-03T03:00:02.937
> 
> 标签：.net, propertygrid, collectioneditor

我正在开发一个使用属性网格编辑名称/值对的应用程序。我的类文件中的一些属性是 ListDictionary 集合。是否有可以在属性声明中应用的 Editor 属性，使 Collection Editor 在运行时工作？如果没有，是否可以从 ComponentModel.Design.CollectionEditor 继承以在运行时使用？我需要能够添加、删除和编辑集合值。非常感谢，特里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T03:11:48.447

来自 codeproject 文章 [ [http://www.codeproject.com/KB/cs/dzcollectioneditor.aspx][1]](http://www.codeproject.com/KB/cs/dzcollectioneditor.aspx][1])

> 为了与 CollectionEditor 成功持久化，集合应满足三个要求：
> 
> 1.  首先，集合必须实现 IList 接口（从 System.Collections.CollectionBase 继承在大多数情况下是最佳选择）。
> 2.  其次，它必须具有 Indexer（VB.NET 中的项）属性。CollectionEditor 使用此属性的类型来确定将添加到集合中的实例的默认类型。
>     
>     
>     
>     为了更好地理解其工作原理，请查看 CustomCollectionEditorForm 的 GetItemType() 函数：
>     
>     
>     
>     受保护的虚拟类型 GetItemType(IList coll) { PropertyInfo pi= coll.GetType().GetProperty("Item", new Type[]{typeof(int)}); 返回 pi.PropertyType }
>     
>     
> 3.  第三，集合类必须实现以下一种或两种方法：Add 和 AddRange。尽管 IList 接口有一个 Add 成员并且 CollectionBase 实现了 IList，但您仍然必须为您的集合实现一个 Add 方法，因为 CollectionBase 声明了 IList 的 Add 成员的显式成员实现。设计器根据您实现的方法对集合进行序列化。如果您同时实现了两者，则首选 AddRange。

在本文中，您将找到在属性网格上实现集合所需的一切

# iphone - iPhone 接近传感器

> ID：165539
> 
> 赞同：20
> 
> 时间：2008-10-03T03:06:11.550
> 
> 标签：iphone, api, sensors, proximity

iPhone SDK 可以利用 iPhone 的接近传感器吗？如果是这样，为什么没有人利用它们？我可以想象一些体面的用途。

例如，在赛车游戏中，您可以将手指放在接近传感器上，而不是用拇指占用屏幕空间。当然，如果这是您唯一的选择，那么 iPod touch 用户将无法使用该应用程序。

接近传感器是否告诉您离您有多近，或者只是在它前面有什么东西？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-11-19T18:38:34.353

为此有*一个*公共 API。-[UIApplication setProximitySensingEnabled:(BOOL)] 将打开该功能。顺便说一句，它似乎没有使用光传感器，因为接近感应会在黑暗的房间里调整出来。

但是，当您将手机举到脸上时，API 调用基本上会使屏幕空白。可悲的是，对交互没有用处。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-10-03T19:41:14.060

假设您的意思是当您将屏幕靠近耳朵时会关闭屏幕的传感器，我很确定这只是耳机内部的红外传感器。如果您启动电话应用程序（您不必打电话）并按住某物在耳机上投下阴影，您可以关闭显示屏。

当您问这个问题时，它无法通过公共 API 访问。您现在可以通过 UIDevice 的`proximityState`属性访问传感器的状态。然而，它对游戏来说并没有那么有用，因为它只是一个开/关的东西，而不是一个近/远的衡量标准。此外，它仅在 iPhone 上可用，在 iPod touch 上不可用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-07-22T05:49:39.007

显然，如果状态栏处于横向，接近传感器将永远不会打开。即，如果您致电：

```
[UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeLeft; 
```

您将不再收到**接近：打开**通知。

这肯定发生在 OS 3.0 上，我无法在 2.X 设备上测试它，因为我没有带接近传感器的设备。

这似乎是一个错误。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-28T21:38:58.650

接近传感器通过测量 IR 反射率工作。如果您将 iPhone 举到网络摄像头前，您会看到一个小的脉冲红外 LED。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-09-17T23:21:24.267

接近传感器和环境光传感器之间存在很多混淆。iPhone 两者都有。Touch 没有接近传感器，使其成为用户输入的糟糕选择。无论如何，这将是一个坏主意，因为 Apple 没有义务在未来的设备中将其定位在同一个地方。你不应该知道或关心它在哪里。

接近传感器通过脉冲红外 LED 和测量反射量来工作。您可以使用 iSight 摄像头看到这一点（大多数数码摄像头对 IR 敏感。）只需启动 Photo Booth，在手机上发起呼叫（或播放语音邮件）并将其指向您的 iSight 摄像头。注意听筒旁边的闪光灯；用手指盖住它，屏幕会变黑。

在这一点上，环境光传感器的 API 显然是私有的。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2011-09-24T22:44:42.200

只是为了更新，这是可能的。

```
device = [UIDevice currentDevice];

// Turn on proximity monitoring
[device setProximityMonitoringEnabled:YES];

// To determine if proximity monitoring is available, attempt to enable it.
// If the value of the proximityMonitoringEnabled property remains NO, proximity
// monitoring is not available.

// Detect whether device supports proximity monitoring
proxySupported = [device isProximityMonitoringEnabled];

// Register for proximity notifications
[notificationCenter addObserver:self selector:@selector(proximityChanged:) name:UIDeviceProximityStateDidChangeNotification object:device]; 
```

正如 benzado 指出的那样，您可以使用：

```
// Returns a BOOL, YES if device is proximate
[device proximityState]; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-03T03:09:22.290

没有用于此的公共 API。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-07-06T17:59:32.260

在 iPhone 3.0 中，官方支持接近传感器。`UIDevice proximityMonitoringEnabled`在文档中查看。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-06-02T01:52:15.677

如果您的目标不是 AppStore，您可以在此处阅读我的文章，了解如何访问这些内容：

接近传感器：http: [//iphonedevwiki.net/index.php/AppleProxShim](http://iphonedevwiki.net/index.php/AppleProxShim)

环境光传感器：http: [//iphonedevwiki.net/index.php/AppleISL29003](http://iphonedevwiki.net/index.php/AppleISL29003)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-12-30T08:50:56.147

*显然，如果状态栏处于横向，接近传感器将永远不会打开。即如果你调用： [UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeLeft; 您将不再收到proximity:ON 通知。这肯定发生在 OS 3.0 上，我无法在 2.X 设备上测试它，因为我没有带接近传感器的设备。这似乎是一个错误。2009 年 7 月 22 日 5:49 Kevin Lambert 回答*

* * *

我也遇到过这个问题。我花了很长时间才弄清楚接近传感器不工作的真正原因。当orientation为UIInterfaceOrientationLandscapeLeft或UIInterfaceOrientationLandscapeRight时，接近传感器不起作用；在纵向模式下效果很好。我的 iPhone 是 iPhone 4S (iOS SDK 5.0)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-03T05:11:34.667

这些接近传感器基本上是一个导体矩阵。垂直的“电线”是绝缘体薄片一侧的轨道，水平的在另一侧。交叉点起到电容器的作用。您的手指带有静电荷，因此每个结的电容会随着接近程度而变化。FET 放大信号并通过偏置设置阈值。实际上，电路比这更复杂，因为它必须检测*相对*变化并抑制噪声。

但无论如何，传感器网格告诉您的是已经感应到场效应，并且场效应是指尖大小并位于显示器表面上的物体的特征。计算电容性干扰的质心（可能由硬件计算），并且（可能）将坐标报告为端口上的数字，该端口最有可能通过中断引起设备操作系统的注意。在像 iPhone 这样性感的东西中，可能有最后十几个位置的缓冲区，因此它可以计算出方向和速度。可能这些也由硬件计算并在同一端口上显示为数字。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-20T04:17:55.713

@Dipak Patel & @Coderer

[您可以在http://spazout.com/google_cheats_independent_iphone_developers_screwed](http://spazout.com/google_cheats_independent_iphone_developers_screwed)下载工作代码

它有一个在 UIApplication 中未记录的方法的proximityStateChanged 的​​工作实现。

希望这可以帮助。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-10-03T12:07:38.793

要关闭屏幕，可以想象使用多个传感器来确定是否应该关闭屏幕。Cryptognome 描述的 IR 接近传感器与 Peter Wone 描述的触摸屏传感器相结合，如果 iphone 靠近你的脸（或其他带有轻微电荷的东西），或者它只是非常靠近你的脸-动画。

# model - 我可以在 UML 的领域模型中显示泛化关系吗

> ID：165542
> 
> 赞同：2
> 
> 时间：2008-10-03T03:08:13.760
> 
> 标签：model, uml, dns

我想问是否可以在 UML 中显示域模型的泛化关系，尽管我知道我可以在类图中做到这一点？除了在类图中，我没有看到太多显示泛化关系的域模型示例。如果不可能，显示域模型中的实体是实体 A 或实体 B 或实体 C 或实体 D 等的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-03T04:11:38.803

是的，您的域模型中的实体之间的泛化是允许的。

基本上，域模型是一个类图，其中类显示了您的概念设计中的实体类型，而不是您在典型类图中显示的具体编程语言类。

为了更好地找出您能做什么或不能做什么，您可以阅读[UML 2.x Superstructure specification](http://www.omg.org/technology/documents/formal/uml.htm)，但理解起来相当复杂。

我通常倾向于自由地使用任何与我的设计交流的东西，但是如果您受限于某些有些严格的特定建模工具，您应该熟悉 UML 规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-03T03:26:42.357

您需要澄清为什么要区分域模型和类图。

一方面，您的领域模型可以简单地是可以映射到您的数据库并使用它的所有内容的类图。因此，泛化关系可以简单地描述实现继承或接口继承。

另一方面，您的领域模型可以简单地表达您期望您的类如何工作。在这种情况下，它可以是任何标准的 UML 图：类、序列、协作、组件、活动等。

ADD：您是在谈论寻找不同的方法来对您的持久实体进行分类，例如标记系统？或者你可以让一个持久实体在一个类别树中有很多节点成为可能？

# c++ - 如何判断 Windows 剪贴板上的文本是 C++ 中的 ISO 8859 还是 UTF-8？

> ID：165551
> 
> 赞同：6
> 
> 时间：2008-10-03T03:12:03.487
> 
> 标签：c++, windows, utf-8, clipboard

我想知道是否有一种简单的方法可以检测剪贴板上的文本是 ISO 8859 还是 UTF-8 ？

这是我当前的代码：

```
 COleDataObject  obj;

    if (obj.AttachClipboard())
    {
        if (obj.IsDataAvailable(CF_TEXT))
        {
            HGLOBAL hmem = obj.GetGlobalData(CF_TEXT);
            CMemFile sf((BYTE*) ::GlobalLock(hmem),(UINT) ::GlobalSize(hmem));
            CString buffer;

            LPSTR str = buffer.GetBufferSetLength((int)::GlobalSize(hmem));
            sf.Read(str,(UINT) ::GlobalSize(hmem));
            ::GlobalUnlock(hmem);

            //this is my string class
            s->SetEncoding(ENCODING_8BIT);
            s->SetString(buffer);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-03T14:05:59.180

[在这个 Microsoft 页面上](http://msdn.microsoft.com/en-us/library/ms649013(VS.85).aspx)查看 CF_LOCALE 的定义。它告诉您剪贴板中文本的语言环境。更好的是，如果您改用 CF_UNICODETEXT，Windows 将为您转换为 UTF-16。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-03T03:21:50.747

UTF-8 为非 ASCII 字节定义了结构。您可以扫描 >= 128 的字节，如果检测到任何字节，请检查它们是否形成有效的 UTF-8 字符串。

可以在[Wikipedia](http://en.wikipedia.org/wiki/UTF-8)上找到有效的 UTF-8 字节格式：

```
Unicode             Byte1           Byte2           Byte3           Byte4
U+000000-U+00007F   0xxxxxxx
U+000080-U+0007FF   110xxxxx        10xxxxxx
U+000800-U+00FFFF   1110xxxx        10xxxxxx        10xxxxxx
U+010000-U+10FFFF   11110xxx        10xxxxxx        10xxxxxx        10xxxxxx 
```

* * *

旧答案：

您不必 - 所有 ASCII 文本都是有效的 UTF-8，因此您可以将其解码为 UTF-8，它会按预期工作。

要测试它是否包含非 ASCII 字符，您可以扫描 >= 128 的字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T05:31:36.303

我可能会弄错，但我认为你不能：如果我在编辑器中打开一个没有 Bom 的 UTF-8 文件，它默认显示为 ISO-8859-1（我的语言环境），并且除了一些奇怪的外文用法（对于我）重音字符，我没有强烈的视觉暗示它是 UTF-8（除非它在其他地方以另一种方式编码，例如 HTML 或 XML 中的字符集声明）：它是完全有效的 Ansi 文本。

John 写道“所有 ASCII 文本都是有效的 UTF-8”，但反过来也是如此。

Windows XP+ 自然使用 UTF-16，并有一个剪贴板格式，但 AFAIK 它只是忽略 UTF-8，没有对其进行特殊处理。
（嗯，实际上有一个 API 可以将 UTF-8 转换为 UTF-16（或 Ansi 等））。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T03:20:51.530

您可以查看 obj.IsDataAvailable(CF_UNICODETEXT) 以查看剪贴板上的 unicode 版本是否可用。

-亚当

# c# - 如何获取 Vista Media Center 中当前正在播放的文件的文件名？

> ID：165556
> 
> 赞同：2
> 
> 时间：2008-10-03T03:15:48.080
> 
> 标签：c#, .net, mcml

我有 Windows Vista MCML 应用程序，我需要找出正在播放的文件的当前名称。

Media Center SDK 暗示使用 MediaMetadata["Title"] 来获取此信息，不幸的是，这不适用于播放列表 (.wpl) 文件，因为没有获取播放列表中位置的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-13T22:00:44.213

事实证明，这[并非易事](http://discuss.mediacentersandbox.com/forums/thread/8436.aspx)。

有 4 个选项。

1.  永远不要使用播放列表，在这种情况下 MediaMetadata["Title"] 就足够了。
2.  检查 ehshell.exe 中的远程文件句柄。
3.  在ehshell.exe中注入一个远程线程，建立通信并使用反射读取它。
4.  编写一个 DirectShow 过滤器并与之通信。

**更新：这在**[Windows 7](http://blog.retrosight.com/CommentView,guid,5D241B55-68E8-44FA-B64C-4E031CE053E3.aspx#f64ba952-da91-4240-b7bd-f29fdc51887c)中已修复。目前还不清楚它是否会重新移植到 Vista MCE。

**第二次更新**：看起来微软在最近的修补程序中改变了 MediaMetadata["Title"] 的行为，它现在返回不带扩展名的文件名和播放列表名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-13T13:46:12.887

你有没有尝试过：

```
MediaContext.GetProperty(TrackTitle) 
```

我还看到了在媒体显示布局文件的标记中指定一个元素的示例，例如：

```
<music-title duration = "2000" x="69" y="29" width="187" height="20"/> 
```

祝你好运！

# windows - 如何在 Windows 中控制打印机的打印机托盘选择

> ID：165567
> 
> 赞同：5
> 
> 时间：2008-10-03T03:19:29.553
> 
> 标签：windows, visual-c++, printing

我们需要能够更改给定打印机的默认选择打印托盘。有没有人有 VC++/win32 代码来做这件事？

万一这很重要，我相信我们必须更改打印机的默认设置。我们的打印作业由我们以外的应用程序执行，因此我们不能在源自我们应用程序内部的打印操作的上下文中进行这些类型的更改。除非有某种方法可以在不同的应用程序中修改默认打印设置，否则我认为我们无法更改用户对打印机的默认设置，启动我们的打印作业，然后将默认设置恢复为原始值。

我们真的更希望只为当前用户更改默认值，而不需要任何特殊的 UAC 提升等...

我怀疑它将使用类似于[此 MSDN 文章](http://support.microsoft.com/kb/140285)中所示的内容，并涉及在 DEVMODE 结构中设置字段（dmDefaultSource 或 dmFormName 或两者）。

有接盘侠吗？或者有没有人有任何他们想分享的问题？

编辑：这是 DEVMODE 文档的链接[DEVMODE 文档](http://msdn.microsoft.com/en-us/library/ms535771.aspx)

编辑：我还应该指出，我们正在寻找一个通用的解决方案 - 不是特定于特定打印机的东西（我们部署在很多很多环境中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T03:25:02.830

仅供参考 - 我们最终使用的解决方案是捕获 DEVMODE 结构。我们有一个小型 win32 应用程序，它显示打印机设置对话框（通过[DocumentProperties](http://msdn.microsoft.com/en-us/library/dd183576.aspx)，fMode 设置为 DM_IN_PROMPT）。然后将生成的 DEVMODE 保存到磁盘。当我们进行打印时，我们捕获当前的 DEVMODE，设置存储的 DEVMODE，启动打印，然后恢复原始的 DEVMODE。

这实际上工作得很好。有时，打印驱动程序会更新并导致存储的 DEVMODE 中断，但这并不经常发生，用户很容易修复。

作为额外的奖励，这种方法允许我们捕获所有打印机设置（不仅仅是输出托盘） - 因此我们能够支持高级设置，如装订、分页等......

提示：如果您尝试这样做，请确保将其作为二进制输出流写入磁盘。在我对这种方法的初步评估中，我不小心将输出流设置为文本输出流。在许多情况下事情会正常工作，然后突然中断某些打印机（在其 DEVMODE 私有数据中使用高位字节）。一个愚蠢但容易犯的错误 - 并且在一段时间内放弃了一个非常好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T13:58:13.047

设置这样的功能可能很棘手，特别是如果驱动程序不遵循 Microsoft 的打印指南。话虽如此，我们在 System.Drawing.Printing.PrinterSettings 方面取得了一些成功。您可以设置 PaperSource，但我不确定您是否可以设置默认值。

如果你还没有看过这个例子，你可能想进一步看看它。它描述了一种存储和重新加载打印机设置的方法。我的一个人向我指出： [PrinterSettings - 更改、存储和加载打印机设置](http://www.codeguru.com/cpp/w-p/printing/article.php/c2961)

另一种可能有效但可能不适合您的方法是确定您需要的少数设置。安装具有这些（即：纸盘 1、纸盘 2）设置的打印机。然后只需在打印时切换默认打印机。不是您要找的东西，但它可能会有所帮助。

在这些情况下，我们通常做的是让第 3 方应用程序将数据写入我们正在监控的文件夹，然后我们自己提取文件并解析 Postscript 或 PCL，并更改纸盘，然后发送到目标设备。听起来要简单得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-26T19:20:36.503

dmDefaultSource 控制托盘。不幸的是，您要设置的值因驱动程序而异，因为这是一个 bin 编号，不一定与打印机上打印的托盘编号相同。

以下链接提供了一些 VB6 代码，用于收集有关您的打印机纸盒/纸盒分配的信息。您可以使用该信息以编程方式将 dmDefaultSource 分配给托盘的相应 bin #。您基本上需要使用 DeviceCapabilities 返回有关您的打印机的信息，然后搜索一个字符串（如“Tray 1”）以获取相关的 bin 编号。

[http://support.microsoft.com/kb/194789](http://support.microsoft.com/kb/194789)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T06:49:40.950

我最近不得不在[特定的打印机驱动程序](http://www.zan1011.com/)上做一些非常相似的事情，它需要一个供应商特定的 SDK。托盘似乎没有出现在 DEVMODE 或任何其他 PRINTINFO_* 结构中，所以我想我会向打印机供应商发送一封电子邮件。

作为最后的手段，我可​​以想到两种可能的黑客攻击。一种是使用脚本工具（如[AutoIT](http://www.autoitscript.com/autoit3/) ）在 GUI 级别自动化驱动程序。其次是将注册表转储到文件，更改驱动程序设置，再次转储注册表，并比较差异（可能有效，也可能无效）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T11:05:02.660

据我所知，打印机是由打印机驱动程序通过发送 SNMP 或 PJL 命令来控制的。但并非所有打印机都能完全实现这些命令集。

对于 HP 打印机，我在以下网址找到：[http](http://h20000.www2.hp.com/bizsupport/TechSupport/Document.jsp?lang=en&cc=us&objectID=bpl07282&jumpid=reg_R1002_USEN) ://h20000.www2.hp.com/bizsupport/TechSupport/Document.jsp?lang=en&cc=us&objectID=bpl07282&jumpid=reg_R1002_USEN一些 PJL 命令（也有一些与托盘相关的命令）。

我不确定这是否有帮助，但将其作为未来搜索的提示......

# sql - SQL查询日期时间列表的累积频率

> ID：165571
> 
> 赞同：4
> 
> 时间：2008-10-03T03:21:55.223
> 
> 标签：sql, cumulative-sum, cumulative-frequency

我在数据库列中有一个时间列表（代表对网站的访问）。

我需要按时间间隔对它们进行分组，然后得到这些日期的“累积频率”表。

例如我可能有：

```
9:01
9:04
9:11
9:13
9:22
9:24
9:28 
```

我想把它转换成

```
9:05 - 2
9:15 - 4
9:25 - 6
9:30 - 7 
```

我怎样才能做到这一点？我什至可以在 SQL 中轻松实现这一点吗？我可以很容易地在 C# 中做到这一点

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-03T03:56:28.403

```
create table accu_times (time_val datetime not null, constraint pk_accu_times primary key (time_val));
go

insert into accu_times values ('9:01');
insert into accu_times values ('9:05');
insert into accu_times values ('9:11');
insert into accu_times values ('9:13');
insert into accu_times values ('9:22');
insert into accu_times values ('9:24');
insert into accu_times values ('9:28'); 
go

select rounded_time,
    (
    select count(*)
    from accu_times as at2
    where at2.time_val <= rt.rounded_time
    ) as accu_count
from (
select distinct
  dateadd(minute, round((datepart(minute, at.time_val) + 2)*2, -1)/2,
    dateadd(hour, datepart(hour, at.time_val), 0)
  ) as rounded_time
from accu_times as at
) as rt
go

drop table accu_times 
```

结果是：

```
rounded_time            accu_count
----------------------- -----------
1900-01-01 09:05:00.000 2
1900-01-01 09:15:00.000 4
1900-01-01 09:25:00.000 6
1900-01-01 09:30:00.000 7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-03T03:45:50.160

我应该指出，基于问题的陈述“意图”，对访问者流量进行分析 - 我写了这个声明来总结统一组的计数。

否则（如在“示例”组中）会将 5 分钟间隔内的计数与 10 分钟间隔内的计数进行比较 - 这是没有意义的。

您必须了解用户需求的“意图”，而不是字面意义上的“阅读”。:-)

```
 create table #myDates
       (
       myDate       datetime
       );
    go

    insert into #myDates values ('10/02/2008 09:01:23');
    insert into #myDates values ('10/02/2008 09:03:23');
    insert into #myDates values ('10/02/2008 09:05:23');
    insert into #myDates values ('10/02/2008 09:07:23');
    insert into #myDates values ('10/02/2008 09:11:23');
    insert into #myDates values ('10/02/2008 09:14:23');
    insert into #myDates values ('10/02/2008 09:19:23');
    insert into #myDates values ('10/02/2008 09:21:23');
    insert into #myDates values ('10/02/2008 09:21:23');
    insert into #myDates values ('10/02/2008 09:21:23');
    insert into #myDates values ('10/02/2008 09:21:23');
    insert into #myDates values ('10/02/2008 09:21:23');
    insert into #myDates values ('10/02/2008 09:26:23');
    insert into #myDates values ('10/02/2008 09:27:23');
    insert into #myDates values ('10/02/2008 09:29:23');
    go

    declare @interval int;
    set @interval = 10;

    select
       convert(varchar(5), dateadd(minute,@interval - datepart(minute, myDate) % @interval, myDate), 108) timeGroup,
       count(*)
    from
       #myDates
    group by
       convert(varchar(5), dateadd(minute,@interval - datepart(minute, myDate) % @interval, myDate), 108)

retuns:

timeGroup             
--------- ----------- 
09:10     4           
09:20     3           
09:30     8 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-03T12:13:32.107

哦，所有这些东西都太复杂了。

标准化为秒，除以您的存储桶间隔，截断并重新乘法：

```
select sec_to_time(floor(time_to_sec(d)/300)*300), count(*)
from d
group by sec_to_time(floor(time_to_sec(d)/300)*300) 
```

使用 Ron Savage 的数据，我得到

```
+----------+----------+
| i        | count(*) |
+----------+----------+
| 09:00:00 |        1 |
| 09:05:00 |        3 |
| 09:10:00 |        1 |
| 09:15:00 |        1 |
| 09:20:00 |        6 |
| 09:25:00 |        2 |
| 09:30:00 |        1 |
+----------+----------+ 
```

您可能希望使用 ceil() 或 round() 而不是 floor()。

更新：对于使用创建的表

```
create table d (
    d datetime
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T03:44:26.840

创建一个表格`periods`，描述您希望将一天分成的时段。

```
SELECT periods.name, count(time)
  FROM periods, times
 WHERE period.start <= times.time
   AND                 times.time < period.end
 GROUP BY periods.name 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-03T03:54:07.097

创建一个表格，其中包含您想要获得总计的间隔，然后将两个表格连接在一起。

如：

```
time_entry.time_entry
-----------------------
2008-10-02 09:01:00.000
2008-10-02 09:04:00.000
2008-10-02 09:11:00.000
2008-10-02 09:13:00.000
2008-10-02 09:22:00.000
2008-10-02 09:24:00.000
2008-10-02 09:28:00.000

time_interval.time_end
-----------------------
2008-10-02 09:05:00.000
2008-10-02 09:15:00.000
2008-10-02 09:25:00.000
2008-10-02 09:30:00.000

SELECT 
    ti.time_end, 
    COUNT(*) AS 'interval_total' 
FROM time_interval ti
INNER JOIN time_entry te
    ON te.time_entry < ti.time_end
GROUP BY ti.time_end;

time_end                interval_total
----------------------- -------------
2008-10-02 09:05:00.000 2
2008-10-02 09:15:00.000 4
2008-10-02 09:25:00.000 6
2008-10-02 09:30:00.000 7 
```

如果您不想要累积总计，而是想要某个范围内的总计，那么您将 time_start 列添加到 time_interval 表并将查询更改为

```
SELECT 
    ti.time_end, 
    COUNT(*) AS 'interval_total' 
FROM time_interval ti
INNER JOIN time_entry te
    ON te.time_entry >= ti.time_start
            AND te.time_entry < ti.time_end
GROUP BY ti.time_end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T03:47:10.360

这使用了很多 SQL 技巧（SQL Server 2005）：

```
CREATE TABLE [dbo].[stackoverflow_165571](
    [visit] [datetime] NOT NULL
) ON [PRIMARY]
GO

;WITH buckets AS (
    SELECT dateadd(mi, (1 + datediff(mi, 0, visit - 1 - dateadd(dd, 0, datediff(dd, 0, visit))) / 5) * 5, 0) AS visit_bucket
            ,COUNT(*) AS visit_count
    FROM stackoverflow_165571
    GROUP BY dateadd(mi, (1 + datediff(mi, 0, visit - 1 - dateadd(dd, 0, datediff(dd, 0, visit))) / 5) * 5, 0)
)
SELECT LEFT(CONVERT(varchar, l.visit_bucket, 8), 5) + ' - ' + CONVERT(varchar, SUM(r.visit_count))
FROM buckets l
LEFT JOIN buckets r
    ON r.visit_bucket <= l.visit_bucket
GROUP BY l.visit_bucket
ORDER BY l.visit_bucket 
```

请注意，它将所有时间都放在同一天，并假设它们在日期时间列中。唯一不像您的示例那样做的是从时间表示中去除前导零。

# c# - 了解自动实现的属性

> ID：165575
> 
> 赞同：4
> 
> 时间：2008-10-03T03:24:29.227
> 
> 标签：c#, .net-3.5, properties, automatic-properties

我有一个使用自动实现属性的简单类：

```
Public Class foo
{
    public foo() { }  

    public string BarName {get; set;}
} 
```

我显然在整个班级中都使用了变量 BarName，现在需要在设置属性值时添加逻辑（它必须全部为大写，看图）。这是否意味着我现在需要为 BarName 创建一个私有变量，例如 _BarName，并将整个班级使用的当前 BarName 变量更改为 _BarName？

```
Public Class foo
{
    public foo() {}  

    private string _BarName = "";
    public string BarName 
    { 
        get {return _BarName;}
        set {_BarName = Value.ToString().ToUpper();}
    }
} 
```

我试图确保我了解使用自动实现的属性的含义，以及当/如果我需要更改某些内容时它将带来什么。我假设重构（如上所示）不是[重大](http://blogs.msdn.com/abhinaba/archive/2006/04/11/572694.aspx)更改，因为属性基本保持不变；只需要在类中做一些工作就可以保持这种状态并添加所需的逻辑。

另一个可能更有意义的例子是，我需要在使用 setter 或 getter 时调用一些方法；更多然后改变价值。

这似乎是对设置属性的代码行和代码行的公平权衡。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-03T03:41:23.180

> 这是否意味着我现在需要为 BarName 创建一个私有变量

是的

> 并更改整个班级使用的当前 BarName 变量

不要更改类中的其余代码以使用您创建的新私有变量。*BarName*作为一个属性，旨在隐藏私有变量（除其他外），以​​避免您考虑对其余代码进行彻底更改。

> 我假设重构（如上所示）不是重大更改，因为属性基本保持不变；只需要做一些工作就可以保持这种状态并添加所需的逻辑。

正确的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-03T03:27:46.757

你不需要改变任何东西。自动实现的属性只是语法糖。编译器在幕后为您生成私有变量和获取/设置逻辑。如果您添加自己的 getter/setter 逻辑，编译器将使用您的代码而不是其自动生成的代码，但就该属性的*用户*而言，没有任何改变；任何引用您的财产的代码都将继续有效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-03T03:33:03.340

使用自动属性时，您无法直接访问底层的“支持”变量，也无法访问在属性 getter 和 setter 中实现的实际逻辑。您只能访问该属性（因此在整个代码中使用 BarName）。

如果现在需要在 setter 中实现特定的逻辑，就不能再使用自动属性，需要以“老式”的方式实现属性。在这种情况下，您需要实现自己的私有支持变量（至少对我而言，首选方法是将私有支持变量命名为与属性相同的名称，但初始小写（在这种情况下，支持变量将命名为 barName)。然后您将在 getter/setter 中实现适当的逻辑。

在您的示例中，您是正确的，这不是一个重大更改。这种类型的重构（从自动属性移动到“普通”属性不应该是一个重大更改，因为您没有更改公共接口（公共属性的名称或可访问性）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T04:42:08.730

如果您知道要验证该对象，请不要使用自动属性。这些对象可以是域对象等。例如，如果您有一个 Customer 类，则使用私有变量，因为您可能需要验证姓名、出生日期等。但是如果您使用的是 Rss 类，那么只使用自动属性就可以了因为没有执行验证，并且该类仅用于保存一些数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T03:32:38.740

你对重构是正确的，它真的不应该破坏任何东西。

您是否真的需要通过类中对属性名称的引用并将其更改为引用私有字段将取决于内部代码是否需要访问数据的底层表示，而不是如何呈现给类的消费者。在大多数情况下，您可以独自离开。

在您的简单示例中，明智的做法是保持足够好，并确保类内部的任何代码都不会破坏 setter 中正在执行的转换/格式化。

另一方面，如果 getter 正在做一些魔术来将字段的内部表示更改为消费者查看数据所需的方式，那么（在某些情况下）类中的内部代码可能需要访问该字段。

您需要查看对类中自动属性的每次访问，并决定它是应该触摸该字段还是使用该属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T03:34:55.583

自动属性只是语法糖，编译器实际上为它创建了私有成员，但由于它是在编译时生成的，因此您无法访问它。

稍后，如果您想为该属性实现 getter 和 setter，那么您只需为它创建一个显式的私有成员并添加逻辑。

# apache-flex - 从 file:/// 运行 SWF，无需用户更改其 Flash Player 安全设置

> ID：165595
> 
> 赞同：3
> 
> 时间：2008-10-03T03:35:30.980
> 
> 标签：apache-flex, flash, actionscript-3

我有一个 Flex 应用程序，它处理相当多的网络流量，它使用 ExternalInterface 进行一些 javascript 调用（用于 SCORM），它加载 XML 文件、图像、视频、音频，它有一系列可以加载的模块某点...

所以问题是 - 我们现在有一个要求，用户需要在未连接到 Internet 的机器上本地运行此内容（这意味着他们无法连接到 Adob​​e 的站点来更改其安全设置。）你可以想象一下，当用户双击 html 页面来启动这个东西时，他们会收到一个安全警告，即 swf 正在尝试与它所在的域之外的另一个域进行通信。我们不能将它包装在一个 exe 或一个 AIR 应用程序，所以除非有某种方法可以调整一些模糊的安全设置，否则我们可能会被淹没。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-13T15:43:06.113

您正在尝试做的正是 AIR 解决的问题。你真的应该试一试，它并不难拿起。如果你真的不能使用AIR（你没有说明原因，所以我认为只是因为你不想学习一个新系统），那么修改安全配置文件就可以解决问题。

基本上，您需要做的是在“Global FlashPlayerTrust”目录中创建一个“信任”文件。这可以由您的安装程序完成（它将所有 javascript、SWF、html 等文件安装到本地计算机上）。如果该目录不存在，则应创建该目录。每个操作系统的目录是：

*   Windows - %WINDIR%\System32\Macromed\Flash\FlashPlayerTrust
*   Mac - /库/应用程序支持/Macromedia/FlashPlayerTrust
*   Linux - /etc/adobe/FlashPlayerTrust

接下来，您需要创建信任文件。您可以将其命名为任何名称，因此请选择一个不太可能与其他名称发生冲突的唯一名称。像 CompanyName.cfg 之类的东西。这是一个文本文件，每行一个路径。您可以一次信任一个 SWF，也可以信任整个目录。例子：

```
C:\Program Files\MyCompany\CoolApp
C:\Program Files\MyCompany\OtherApp\Main.swf 
```

要测试它是否正常工作，您可以在 Flash 电影中检查`System.security.sandboxType`（ActionScript 1 或 2）或`Security.sandboxType`（ActionScript 3）。它的值应该是 " `localTrusted`"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-03T10:21:20.237

我犹豫说“你做不到”，但根据我的经验，没有办法做到你所描述的。任何人，如果我错了，我很想知道诀窍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-04T15:00:18.557

抱歉，我还没有真正尝试过这个，看看它是否有效......但是......

[本](http://www.adobe.com/devnet/flashplayer/articles/flash_player_9_security.pdf)文档的第 20 页（和/或第 26 页）可能会有所帮助。[此处](http://livedocs.adobe.com/flex/3/html/help.html?content=security2_25.html)引用了该文档。简而言之，它描述了包含 cfg 文件的目录，这些文件又包含磁盘上应被视为受信任的位置列表。然后，应用程序的安装程序将负责在所需位置（全局或安装用户）创建适当的 .cfg 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-06T18:22:03.187

简短的回答是，如果你的 swf 使用 use-network 编译为 true，它就不会工作。

是否可以将 use-network 的版本编译为 false？还是它运行在与 Internet 隔离的 Intranet 上，但仍与 LMS 通信？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-24T10:14:23.920

有可能的。请检查您从主 swf 调用的 swf 是否启用了“仅访问本地文件”属性。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-10-03T04:21:20.823

您是否尝试使用以下命令指定授权域：

```
System.security.allowDomain("www.yourdomain.com"); 
```

# php - 如何使用 PHP/apache 访问原始 HTTP 请求数据？

> ID：165603
> 
> 赞同：16
> 
> 时间：2008-10-03T03:41:22.370
> 
> 标签：php, apache

我想知道是否有一种方法可以获取在 apache 上运行的 PHP 中的原始 HTTP 请求数据，而无需使用任何额外的扩展。我在手册中看到了[HTTP](http://au2.php.net/http)函数，但我没有在我的环境中安装扩展的选项。

虽然我可以从 $_SERVER 访问信息，但我希望看到原始请求与发送到服务器时完全相同。PHP 修改标题名称以适应其自己的数组键样式，例如。Some-Test-Header 变为 HTTP_X_SOME_TEST_HEADER。这不是我需要的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-03T03:59:01.937

使用以下 php 包装器：

```
$raw_post = file_get_contents("php://input"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-03T03:49:25.703

你的意思是包含的信息`$_SERVER`？

```
print_r($_SERVER); 
```

编辑：

那会这样吗？

```
foreach(getallheaders() as $key=>$value)  {
    print $key.': '.$value."<br />";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-28T23:03:07.557

试试这个：

```
 $request = $_SERVER['SERVER_PROTOCOL'] .' '. $_SERVER['REQUEST_METHOD'] .' '. $_SERVER['REQUEST_URI'] . PHP_EOL;

  foreach (getallheaders() as $key => $value) {
    $request .= trim($key) .': '. trim($value) . PHP_EOL;
  }

  $request .= PHP_EOL . file_get_contents('php://input');

  echo $request; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-11T18:11:50.347

```
GET /
host: domain.com;
all-other-headers: <its-value>;
request-content: <as-per-content-type> 
```

# c++ - 如何在 qt4 设计器中创建自定义插槽？

> ID：165637
> 
> 赞同：21
> 
> 时间：2008-10-03T03:56:18.357
> 
> 标签：c++, qt, qt4, qt-creator, qt-designer

每当我使用信号/槽编辑器对话框时，我都必须从现有的槽列表中进行选择。所以问题是如何创建自定义命名插槽？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-09-06T19:22:55.817

这在 Qt Designer 4.5.2 版本中似乎是可能的，但*不能*从主窗口中的 Signal/Slot Editor 停靠小部件中完成。

这对我有用

1.  切换到[编辑信号/槽](http://doc.qt.io/qt-4.8/designer-connection-mode.html)模式 (F4)
2.  从要发出信号的小部件拖放到要接收信号的小部件上。
3.  出现一个*配置连接*对话框，显示发射小部件的信号和接收小部件的插槽。单击右侧插槽列下方的*编辑...。*
4.  将出现一个*Signals/Slots of ReceivingWidget*对话框。在这里，可以单击插槽下方的加号图标以添加任何名称的新插槽。
5.  然后，您可以返回并在“*配置连接*”对话框中连接到您的新插槽，或者实际上在主窗口中的“信号/插槽编辑器”停靠小部件中连接到您的新插槽。

警告：我正在使用 PyQt，我只尝试使用从 Python 而不是 C++ 以这种方式添加的插槽，所以你的里程可能会有所不同......

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-01-22T02:08:21.557

右键单击主窗口并选择“更改信号和插槽”并添加一个新插槽。它将出现在您的信号槽编辑器中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-03T04:55:20.303

不幸的是，这在 Qt4 中是不可能的。

在 Qt3 中，您可以创建自定义插槽，然后在 ui.h 文件中实现这些插槽。但是，Qt4 不使用此文件，因此不支持自定义插槽。

[QtForum](http://www.qtforum.org/article/11096/qt4-custom-slots.html)上有一些关于这个问题的讨论

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-09T06:43:45.947

我可以通过以下方式做到这一点：

在 MainWindow.h 中，添加以下行：

```
public slots:
     void example(); 
```

在 MainWindow 类中。

在 MainWindow.cpp

```
void MainWindow::example() {
     <code>
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-03T04:55:22.240

这似乎不可能以简单的方式实现。

设计器仅允许您将现有小部件提升为您自己的自定义小部件。但是它不允许您连接提升的小部件类的信号和插槽。

可行的方法是为设计器创建一个插件，如此处[和](https://doc.qt.io/qt-4.8/designer-creating-custom-widgets.html)其后的页面中所述。

正常的做法是将小部件提升到您自己的类，然后在您自己的代码中手动连接它。[这里](https://doc.qt.io/qt-4.8/designer-using-custom-widgets.html)描述了这个过程

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-03T06:40:10.850

这是不可能的，因为这意味着您将向现有的 Qt 类添加一个插槽，`QPushButton`这并不是真正的方法。

`QWidget`您最终应该通过继承现有的子类来创建自己的。然后按照建议将其作为插件集成到 Qt Designer 中。拥有自己的类允许您根据需要添加/修改可用的信号/插槽。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-03T16:28:07.320

不要忘记插槽自动连接功能。有一些缺点，比如如果你重命名你的小部件就必须重命名你的函数，但我们在我的公司经常使用这些。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-14T20:51:31.667

您可以使用魔术插槽格式

```
void on_objectName_signal() {
// slot code here, where objectname is the Qt Designer object name
// and the signal is the emission
} 
```

与此方法的连接由方法[connectSlotsByName](https://doc.qt.io/archives/qt-4.8/qmetaobject.html#connectSlotsByName)建立，并且每当发出信号时，都会调用此插槽。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-04-09T11:45:34.010

也许会有所帮助。

默认情况下，您必须从现有的插槽列表中进行选择。但是您可以通过右键单击设计器右侧列表中的对象来添加插槽，然后选择“插槽/信号”并添加您的自定义插槽/信号。之后，您可以在信号/槽编辑器中选择它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-12-31T11:05:07.067

通过右键单击小部件

将小部件提升为您定义的类

再次通过右键单击小部件

你会看到信号和槽是可编辑的

# oracleforms - 如何在 Oracle 表单 9/10 中显示日历控件（日期选择器）？

> ID：165648
> 
> 赞同：1
> 
> 时间：2008-10-03T03:59:53.433
> 
> 标签：oracleforms

如何在 Oracle 表单 9/10 中显示日历控件（日期选择器）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T06:19:50.983

我工作过的大多数表单项目已经有一个日期选择器，作为一个单独的表单实现 - 例如，我认为一个由 HeadStart 生成。我认为它也是使用标准表单模板中的单独画布实现的。

但是，这个问题也在 ittoolbox 上提出并在这里回答：

[在 Oracle Forms 中创建日期选择器日历控件](http://oracle.ittoolbox.com/groups/technical-functional/oracle-forms-l/creating-date-picker-calender-control-in-oracle-form-2187294)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-24T17:32:02.467

这是一个指向日历的 Java Swing 解决方案的链接。该站点非常适合 Java 的所有内容以及如何在 Oracle Forms 中实现。

[http://forms.pjc.bean.over-blog.com/article-14848846.html](http://forms.pjc.bean.over-blog.com/article-14848846.html)

我们 PITSS 在与数百名客户打交道时经常使用该网站。 [http://pitss.com](http://pitss.com)

# jquery - 如何使用 jquery 将工具提示添加到“td”？

> ID：165650
> 
> 赞同：8
> 
> 时间：2008-10-03T04:00:48.593
> 
> 标签：jquery, html

我需要使用 jquery 在我的表内的“td”元素中添加一个工具提示/alt。

有人可以帮我吗？

我试过：

```
var tTip ="Hello world";
$(this).attr("onmouseover", tip(tTip)); 
```

我已经验证我使用“td”作为“this”。

**编辑：**我能够通过使用“alert”命令捕获“td”元素并且它有效。所以由于某种原因，“提示”功能不起作用。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-10-03T04:03:12.940

```
$(this).mouseover(function() {
    tip(tTip);
}); 
```

更好的方法可能是将`title`属性放在 HTML 中。这样，如果有人关闭了 javascript，他们仍然会得到一个工具提示（尽管它不像 jQuery 那样漂亮/灵活）。

```
<table id="myTable">
    <tbody>
        <tr>
            <td title="Tip 1">Cell 1</td>
            <td title="Tip 2">Cell 2</td>
        </tr>
    </tbody>
</table> 
```

然后使用此代码：

```
$('#myTable td[title]')
    .hover(function() {
        showTooltip($(this));
    }, function() {
        hideTooltip();
    })
;

function showTooltip($el) {
    // insert code here to position your tooltip element (which i'll call $tip)
    $tip.html($el.attr('title'));
}
function hideTooltip() {
    $tip.hide();
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-03T04:13:33.650

你可能想看看[http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-04-14T07:31:25.407

```
$('#grdList tr td:nth-child(5)').each(function(i) {
    if (i > 0) { //skip header
        var sContent = $(this).text();
        $(this).attr("title", $(this).html());
        if (sContent.length > 20) {
            $(this).text(sContent.substring(0,20) + '...');
        }
    }
}); 
```

grdList - 表 ID

td:nth-child(5) - 第 5 列

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T04:05:17.460

```
var tTip ="Hello world";
$(this).mouseover( function() { tip(tTip); }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-14T07:25:26.620

# grdList - 表 ID

td:nth-child(5) - 列

```
$('#grdList tr td:nth-child(5)').each(function(i) {
    if (i > 0) { //skip header
        var sContent = $(this).text();
        $(this).attr("title", $(this).html());
        if (sContent.length > 20) {
            $(this).text(sContent.substring(0,20) + '...');
        }
    }
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-10-03T04:20:12.573

如果您确实想将这些工具提示放在表格单元格而不是表格标题上（它们会更有意义），请考虑将它们放在表格单元格内部的内容中，这样更有意义。

# regex - 为什么我的 Perl 正则表达式使用这么多内存？

> ID：165660
> 
> 赞同：5
> 
> 时间：2008-10-03T04:10:22.427
> 
> 标签：regex, perl, memory-management

我正在对一个大标量运行正则表达式。虽然这场比赛没有捕捉到任何东西，但我的进程在这场比赛之后增长了 30M：

```
# A
if (${$c} =~ m/\G<<\s*/cgs)
{
    #B
    ...
} 
```

`$c`是对一个相当大的标量（大约 21M）的引用，但我已经验证它`pos(${$c})`在正确的位置，并且表达式在第一个字符处匹配，并在匹配`pos(${$c})`后更新到正确的位置。但正如我所提到的，这个过程在#A 和#B 之间增长了大约 30M，即使我没有用这场比赛捕捉到任何东西。我的记忆去哪儿了？

编辑：是的，使用`$&`是罪魁祸首。我们使用的是 Perl 5.8.8，而我的脚本使用的是[Getopt::Declare](http://search.cpan.org/dist/Getopt-Declare)，它使用内置的[Text::Balanced](http://search.cpan.org/dist/Text::Balanced)。该模块的 1.95 版本使用`$&`. Perl 5.10 附带的 2.0.0 版本删除了对的引用`$&`并缓解了该问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-10-03T04:21:32.680

只是快速检查一下，您是否在代码中的任何位置提到了 $&、$` 或 $'（有时称为 $MATCH、$PREMATCH 和 $POSTMATCH）？如果是这样，Perl 将为*每个*正则表达式匹配复制整个字符串，以防万一你想检查这些变量。

在这种情况下，“在您的代码中”意味着间接，包括使用引用这些变量的模块，或编写`use English`而不是`use English qw( -no_match_vars )`.

如果您不确定，可以使用[Devel::SawAmpersand](http://search.cpan.org/perldoc?Devel::SawAmpersand)模块来确定它们是否已被使用，并使用[Devel::FindAmpersand](http://search.cpan.org/perldoc?Devel::FindAmpersand)来确定*它们*的使用位置。

内存增加可能还有其他原因（您使用的是哪个版本的 Perl？），但是如果使用匹配变量，它们肯定会破坏您的内存，因此可能是罪魁祸首。

干杯，

*保罗*

# j# - J#代码可以在JVM上运行吗

> ID：165690
> 
> 赞同：1
> 
> 时间：2008-10-03T04:27:35.160
> 
> 标签：j#

如果我创建一个 J# 应用程序，有什么方法可以在 JVM 上执行它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T04:28:50.417

不，J# 程序设计为在 .NET 平台上运行。请参阅[J# 常见问题解答](http://msdn.microsoft.com/en-nz/vjsharp/bb188604.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-17T02:03:38.983

是的 - 有点。如果您编写的 Java 将使用 javac 进行编译，那么您可以拥有一个源代码库并针对 J# 和 Java 进行编译。我们为我们的报告引擎这样做。如果在 .net 40 上执行此操作，则需要[从 .NET 4.0 调用 J# 代码。](http://blogs.windwardreports.com/davidt/2011/02/calling-j-code-from-net-40.html)

但是您不能在 JVM 上运行 J# 二进制文件。

# c++ - 查看内存转储的调用堆栈时，如何在 VS 中指定源代码目录？

> ID：165699
> 
> 赞同：6
> 
> 时间：2008-10-03T04:35:21.977
> 
> 标签：c++, visual-studio, crash-reports, memory-dump

我正在分析一个已创建的 .dmp 文件，并且我有一个调用堆栈，它为我提供了很多信息。但我想双击调用堆栈，让它把我带到源代码。

我可以右键单击调用堆栈并选择符号设置。我可以将位置放入 PDB。但是源代码目录没有选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T06:01:30.303

不幸的是，源代码目录被硬编码到 pdb 中，但是如果您知道所需的文件夹，您可以使用 windows 的符号链接、连接概念。

我使用工具[Junction Link Magic](http://www.rekenwonder.com/linkmagic.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-04T03:34:48.440

阅读[这篇文章](http://msdn.microsoft.com/en-us/magazine/cc163563.aspx)，了解如何在您的站点上设置源服务器（又名 SrcSrv）集成。

我花时间为我们的代码库执行这些步骤，现在我们可以从过去 6 个月内我们软件的任何版本中获取一个 .dmp 文件......获取带有符号的堆栈跟踪......并查看确切的调试器中的源代码行。由于这些步骤已集成到我们的自动化构建中，因此现在开​​销很小。

我确实需要为 ClearCase 编写一个自定义索引器，但他们已经为 Perforce、TFS 和其他人编写了预先存在的索引器。

值得注意的是，VS2005 中对 .dmp 的支持有点不稳定。在 VS2008 中它更稳定一些。

除了您自己的符号服务器之外，您还需要配置 Visual Studio 以从此处获取 MS 产品的符号：

```
http://msdl.microsoft.com/download/symbols 
```

这在一些地方进行了描述，例如[Windows 调试工具](http://www.microsoft.com/whdc/DevTools/Debugging/debugstart.mspx)站点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-12T09:16:05.550

Windbg 允许您设置与 PDB 路径相同的源路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T05:59:29.433

加载 PDB 后，手动导航到与当前执行位置匹配的源文件。PDB 包含构建其关联二进制文件的源文件的路径和文件名，我怀疑调试器足够聪明，当它注意到正在显示的文件名和与当前二进制位置关联的文件名匹配时，它可以连接起来。

# asp.net - 如何在 ASP.Net 中使用 SQL Server 2008 的数据挖掘功能

> ID：165703
> 
> 赞同：0
> 
> 时间：2008-10-03T04:36:49.630
> 
> 标签：asp.net, sql-server, sql-server-2008, data-mining, ssas

如何在 ASP.Net 中使用 SQL Server 2008 的数据挖掘功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T04:45:09.783

查看[SqlServerDataMining.com](http://www.sqlserverdatamining.com/ssdm/)，这是一个由 Microsoft 的 SQL Server 数据挖掘团队运营的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-13T01:35:07.533

简而言之，您想要：

*   构建多维数据集来为您的数据建模
*   构建一个预测计算器（或您要使用的任何类型的计算器）
*   通过网络服务公开它
*   在您的应用程序中调用 Web 服务

例如，如果您想对客户是否有可能放弃他们的购物卡进行建模，您需要弄清楚您想要捕捉和分析购物者的哪些特征。您设置了您的多维数据集来模拟哪些特征表明即将救助的购物者。在购物过程中，您的 Web 应用程序会将购物者的特征发送到 SSAS 服务器，该服务器将返回有关购物者是否会放弃购物车的猜测。然后，您的 Web 应用程序可以在它们离开之前采取主动措施。

这里的所有步骤都有点复杂——你最好的办法可能是细化你的问题，把重点放在你负责的领域。

# c - 如何为月份中的天数提供后缀？

> ID：165713
> 
> 赞同：4
> 
> 时间：2008-10-03T04:43:07.480
> 
> 标签：c, date

`th`在显示“ ”中的“”等文本时，我需要一个函数来返回几天的后缀`Wednesday June 5th, 2008`。

它只需要处理数字 1 到 31（不需要错误检查）和英语。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-03T04:58:56.880

这是一个替代方案，它也适用于更大的数字：

```
static const char *daySuffixLookup[] = { "th","st","nd","rd","th",
                           "th","th","th","th","th" };

const char *daySuffix(int n)
{
    if(n % 100 >= 11 && n % 100 <= 13)
        return "th";

    return daySuffixLookup[n % 10];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-03T04:43:17.977

以下函数适用于 C：

```
char *makeDaySuffix (unsigned int day) {
    //if ((day < 1) || (day > 31)) return "";
    switch (day) {
        case 1: case 21: case 31: return "st";
        case 2: case 22:          return "nd";
        case 3: case 23:          return "rd";
    }
    return "th";
} 
```

根据要求，它仅适用于数字 1 到 31（含）。如果您想要（可能但不一定）原始速度，您可以尝试：

```
char *makeDaySuffix (unsigned int day) {
    static const char * const suffix[] = {
        "st","nd","rd","th","th","th","th","th","th","th",
        "th","th","th","th","th","th","th","th","th","th"
        "st","nd","rd","th","th","th","th","th","th","th"
        "st"
    };
    //if ((day < 1) || (day > 31)) return "";
    return suffix[day-1];
} 
```

您会注意到，尽管已注释掉，但我有边界检查。如果传入一个意外值的*可能性*很小，您可能需要取消注释这些行。

请记住，对于当今的编译器，关于在高级语言中什么是更快的天真假设可能是不正确的：*测量，不要猜测。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-03T06:18:05.677

```
const char *getDaySuffix(int day) {
    if (day%100 > 10 && day%100 < 14)
        return "th";
    switch (day%10) {
        case 1:  return "st";
        case 2:  return "nd";
        case 3:  return "rd";
        default: return "th";
    };
} 
```

这个适用于任何数字，而不仅仅是 1-31。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T10:19:08.540

在这里查看我的问题：[如何将基数转换为序数](https://stackoverflow.com/questions/135946/i18n-able-way-to-get-number-ordinal-in-cmfc-on-windows-1-1st-2-2nd-etc)（它不是 C# 的）。

摘要：看起来还没有办法，由于您的要求有限，您可以使用像发布的那样的简单功能。

# c# - C# 中“internal”关键字的实际用途

> ID：165719
> 
> 赞同：462
> 
> 时间：2008-10-03T04:46:50.310
> 
> 标签：c#, .net-assembly, access-modifiers, internals

你能解释一下`internal`C#中关键字的实际用法吗？

我知道`internal`修饰符限制了对当前程序集的访问，但是我应该在什么时候以及在什么情况下使用它？

* * *

## 回答 #1

> 赞同：405
> 
> 时间：2008-10-03T04:51:48.363

您希望从同一程序集中的许多其他类访问的实用程序或帮助程序类/方法，但您希望确保其他程序集中的代码无法访问。

从[MSDN](https://web.archive.org/web/20130305112130/http://msdn.microsoft.com/en-us/library/7c5ka91b(v=vs.80).aspx)（通过 archive.org）：

> 内部访问的一个常见用途是在基于组件的开发中，因为它使一组组件能够以私有方式协作，而不会暴露给应用程序的其余代码。例如，用于构建图形用户界面的框架可以提供 Control 和 Form 类，它们使用具有内部访问权限的成员进行协作。由于这些成员是内部成员，因此它们不会暴露于使用框架的代码。

您还可以使用 internal 修饰符和[`InternalsVisibleTo`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)程序集级别属性来创建“朋友”程序集，这些程序集被授予对目标程序集内部类的特殊访问权限。

这对于创建单元测试程序集很有用，然后允许调用要测试的程序集的内部成员。当然，没有其他程序集被授予此级别的访问权限，因此当您发布系统时，将保持封装。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2010-06-10T16:05:49.367

如果 Bob 需要 BigImportantClass，那么 Bob 需要让拥有项目 A 的人注册，以保证 BigImportantClass 将被编写以满足他的需求，经过测试以确保它满足他的需求，被记录为满足他的需求，并且一个过程将到位，以确保它永远不会改变，以不再满足他的需要。

如果一个类是内部的，那么它就不必经过那个过程，这节省了项目 A 的预算，他们可以花在其他事情上。

内部的意义不是它让鲍勃生活困难。正是因为它允许您控制项目 A 对特性、生命周期、兼容性等做出的昂贵承诺。

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2008-10-04T03:08:37.730

使用 internal 的另一个原因是如果你混淆了你的二进制文件。混淆器知道打乱任何内部类的类名是安全的，而公共类的名称不能打乱，因为这可能会破坏现有的引用。

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2008-10-03T13:19:27.857

如果您正在编写一个将大量复杂功能封装到一个简单的公共 API 中的 DLL，那么“内部”用于不公开公开的类成员。

隐藏复杂性（又名封装）是质量软件工程的主要概念。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2008-10-04T03:31:37.870

当您在非托管代码上构建包装器时，会大量使用 internal 关键字。

当您有一个要 DllImport 的基于 C/C++ 的库时，您可以将这些函数作为类的静态函数导入，并使其成为内部函数，因此您的用户只能访问您的包装器而不是原始 API，因此它不能乱七八糟。对于您需要的多个包装类，您可以在程序集中的任何地方使用静态函数。

您可以查看 Mono.Cairo，它是使用这种方法的 cairo 库的包装器。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2008-10-03T10:51:38.007

在“尽可能使用严​​格的修饰符”规则的驱动下，我在需要访问另一个类的方法（例如，在我明确需要从另一个程序集访问它之前）的任何地方都使用内部。

由于汇编接口通常比其类接口的总和更窄，所以我使用它的地方很多。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2008-10-03T04:56:00.083

我发现内部被过度使用了。你真的不应该只将某些功能暴露给某些你不会暴露给其他消费者的类。

在我看来，这破坏了接口，破坏了抽象。这并不是说永远不应该使用它，但更好的解决方案是重构为不同的类或尽可能以不同的方式使用。然而，这可能并不总是可能的。

它可能导致问题的原因是另一个开发人员可能负责在与您相同的程序集中构建另一个类。拥有内部会降低抽象的清晰度，并且如果被滥用可能会导致问题。如果您将其公开，这将是相同的问题。其他开发人员正在构建的其他类仍然是消费者，就像任何外部类一样。类抽象和封装不仅仅是为了保护/免受外部类的影响，而是为了任何和所有类。

另一个问题是许多开发人员会*认为*他们可能需要在程序集的其他地方使用它并将其标记为内部，即使他们当时不需要它。另一位开发人员可能会认为它在那里可供使用。通常，您希望将其标记为私有，直到您有明确的需求。

但是其中一些可能是主观的，我并不是说永远不应该使用它。只需在需要时使用。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2008-10-03T13:12:14.687

前几天，也许是一周，在一个我不记得的博客上看到了一个有趣的东西。基本上我不能对此表示赞赏，但我认为它可能有一些有用的应用程序。

假设您希望另一个程序集可以看到一个抽象类，但您不希望有人能够从它继承。Sealed 不起作用，因为它是抽象的，该程序集中的其他类确实从它继承。Private 不起作用，因为您可能想在另一个程序集中的某个地方声明一个 Parent 类。

```
命名空间 Base.Assembly
{
  公共抽象类父
  {
    内部抽象 void SomeMethod();
  }

  //这很好用，因为它在同一个程序集中。
  公共类 ChildWithin : 父级
  {
    内部覆盖 void SomeMethod()
    {
    }
  }
}

命名空间另一个.Assembly
{
  //Kaboom，因为你不能覆盖一个内部方法
  公共类 ChildOutside ：父
  {
  }

  公开课测试
  {

    //正好
    私人父母_parent；

    公共测试（）
    {
      //还是可以的
      _parent = new ChildWithin();
    }
  }
}

```

如您所见，它有效地允许某人使用 Parent 类而不能继承。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2008-10-03T04:52:57.657

当您有方法、类等需要在当前程序集范围内访问时，永远不能在它之外访问。

例如，一个 DAL 可能有一个 ORM，但对象不应暴露给业务层，所有交互都应通过静态方法完成并传入所需的参数。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2010-06-11T00:52:35.957

此示例包含两个文件：Assembly1.cs 和 Assembly2.cs。第一个文件包含一个内部基类 BaseClass。在第二个文件中，尝试实例化 BaseClass 将产生错误。

```
// Assembly1.cs
// compile with: /target:library
internal class BaseClass 
{
   public static int intM = 0;
}

// Assembly1_a.cs
// compile with: /reference:Assembly1.dll
class TestAccess 
{
   static void Main()
   {  
      BaseClass myBase = new BaseClass();   // CS0122
   }
} 
```

在此示例中，使用您在示例 1 中使用的相同文件，并将 BaseClass 的可访问性级别更改为**public**。还将成员 IntM 的可访问性级别更改为**internal**。在这种情况下，您可以实例化类，但不能访问内部成员。

```
// Assembly2.cs
// compile with: /target:library
public class BaseClass 
{
   internal static int intM = 0;
}

// Assembly2_a.cs
// compile with: /reference:Assembly1.dll
public class TestAccess 
{
   static void Main() 
   {      
      BaseClass myBase = new BaseClass();   // Ok.
      BaseClass.intM = 444;    // CS0117
   }
} 
```

**来源**： http: [//msdn.microsoft.com/en-us/library/7c5ka91b (VS.80).aspx](http://msdn.microsoft.com/en-us/library/7c5ka91b(VS.80).aspx)

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2008-10-03T10:59:11.160

根据经验，有两种成员：

*   **公共表面**：从外部程序集中可见（公共、受保护和内部受保护）：调用者不受信任，因此需要参数验证、方法文档等。
*   **私有表面**：从外部程序集中不可见（私有和内部，或内部类）：调用者通常是受信任的，因此可以省略参数验证、方法文档等。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2008-10-03T11:39:05.413

internal 的一个非常有趣的用途——当然，内部成员仅限于声明它的程序集——在某种程度上从中获得“朋友”功能。朋友成员是仅对声明它的程序集之外的某些其他程序集可见的东西。C# 没有对朋友的内置支持，但 CLR 有。

您可以使用[InternalsVisibleToAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)来声明友元程序集，并且友元程序集中的所有引用都将声明程序集的内部成员视为友元程序集范围内的公共成员。这样做的一个问题是所有内部成员都是可见的。你不能挑挑拣拣。

InternalsVisibleTo 的一个很好的用途是将各种内部成员公开给单元测试程序集，从而消除了对复杂反射工作的需要来测试这些成员。所有内部成员都是可见的并不是什么大问题，但是采用这种方法确实会严重破坏您的类接口，并且可能会破坏声明程序集中的封装。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2008-10-03T11:02:13.070

降噪，你暴露的类型越少，你的库就越简单。防篡改/安全性是另一个（尽管反射可以战胜它）。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2010-06-10T16:17:51.943

内部类使您能够限制程序集的 API。这有一些好处，比如让您的 API 更易于理解。

此外，如果您的程序集中存在错误，则修复引入重大更改的可能性较小。如果没有内部类，您将不得不假设更改任何类的公共成员将是一个重大更改。对于内部类，您可以假设修改其公共成员只会破坏程序集的内部 API（以及 InternalsVisibleTo 属性中引用的任何程序集）。

我喜欢在类级别和程序集级别进行封装。有些人不同意这一点，但很高兴知道该功能可用。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-10-03T05:37:46.520

internal 关键字的一种用途是限制程序集用户对具体实现的访问。

如果您有一个工厂或其他一些用于构造对象的中心位置，那么您的程序集的用户只需要处理公共接口或抽象基类。

此外，内部构造函数允许您控制实例化其他公共类的位置和时间。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-10-03T12:52:08.223

我有一个项目使用 LINQ-to-SQL 作为数据后端。我有两个主要的命名空间：Biz 和 Data。LINQ 数据模型位于 Data 中并标记为“内部”；Biz 命名空间有围绕 LINQ 数据类的公共类。

所以有`Data.Client`, 和`Biz.Client`; 后者公开了数据对象的所有相关属性，例如：

```
private Data.Client _client;
public int Id { get { return _client.Id; } set { _client.Id = value; } } 
```

Biz 对象有一个私有构造函数（强制使用工厂方法）和一个内部构造函数，如下所示：

```
internal Client(Data.Client client) {
    this._client = client;
} 
```

库中的任何业务类都可以使用它，但前端 (UI) 无法直接访问数据模型，从而确保业务层始终充当中介。

这是我第一次真正使用`internal`很多，并且证明它非常有用。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2010-06-10T16:01:59.377

在某些情况下，使成员成为类是有意义的`internal`。例如，如果您想控制类的实例化方式；假设您提供了某种工厂来创建类的实例。您可以创建构造函数`internal`，以便工厂（位于同一程序集中）可以创建类的实例，但该程序集之外的代码不能。

但是，我看不出没有特定原因创建类或成员有任何意义，就像创建它们或没有特定原因`internal`一样有意义。`public``private`

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-10-03T05:32:13.087

我唯一使用过 internal 关键字的是我的产品中的许可证检查代码；-)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-12-30T19:18:14.377

这个怎么样：通常建议您不要将 List 对象公开给程序集的外部用户，而是公开一个 IEnumerable。但是在程序集中使用 List 对象要容易得多，因为您可以获得数组语法和所有其他 List 方法。因此，我通常有一个内部属性公开要在程序集中使用的列表。

欢迎对这种方法发表评论。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2010-06-10T16:04:34.410

请记住，`public`当有人查看您的项目命名空间时，任何定义为的类都会自动显示在智能感知中。从 API 的角度来看，重要的是只向项目的用户显示他们可以使用的类。使用`internal`关键字隐藏他们不应该看到的东西。

如果您的`Big_Important_Class`for Project A 打算在您的项目之外使用，那么您不应该标记它`internal`。

但是，在许多项目中，您通常会拥有实际上只打算在项目内部使用的类。例如，您可能有一个将参数保存到参数化线程调用的类。在这些情况下，您应该将它们标记`internal`为没有其他原因，只是为了保护自己免受意外的 API 更改的影响。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2010-06-10T16:06:53.360

这个想法是，当您设计一个库时，只有打算从外部（由您的库的客户）使用的类应该是公共的。这样你就可以隐藏类

1.  在未来的版本中可能会发生变化（如果它们是公开的，你会破坏客户端代码）
2.  对客户无用，并可能引起混乱
3.  不安全（因此使用不当可能会严重破坏您的图书馆）

等等

如果您正在开发内部解决方案而不是使用内部元素，我猜这并不重要，因为通常客户会不断与您联系和/或访问代码。不过，它们对于库开发人员来说相当重要。

* * *

## 回答 #22

> 赞同：-7
> 
> 时间：2008-10-03T04:49:17.683

当您的类或方法不完全适合面向对象范式时，它们会做危险的事情，需要从您控制下的其他类和方法调用，并且您不想让其他人使用.

```
public class DangerousClass {
    public void SafeMethod() { }
    internal void UpdateGlobalStateInSomeBizarreWay() { }
} 
```

# debugging - 如何调试 RESTful 服务？

> ID：165720
> 
> 赞同：58
> 
> 时间：2008-10-03T04:47:58.980
> 
> 标签：debugging, http, rest

我正在寻找一种简单的方法来调试 RESTful 服务。例如，大多数 Web 应用程序都可以使用您的普通 Web 浏览器进行调试。不幸的是，同一个浏览器不允许我测试 HTTP PUT、DELETE，在某种程度上甚至是 HTTP POST。

我不希望自动化测试。我想通过快速的健全性检查来运行新服务，理想情况下不必编写我自己的客户端。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-10-03T06:29:04.307

使用现有的“REST 客户端”工具，可以轻松检查请求和响应，例如[RESTClient](https://github.com/wiztools/rest-client)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-10-03T13:28:42.033

在我的公司，我们使用各种不同的工具和方法来测试 RESTful 服务：

*   我们编写[cURL](http://curl.haxx.se/)脚本 - 本质上是保存在文件中的单个命令。每个方法每个资源一个文件。对于 PUT 和 POST，我们通常会将包含表示的文件与 cURL 脚本一起发送。例如，对于邮箱资源，我们可能有一个名为 的文件`mailbox_post.cmd`，其中可能包含行`curl -v -X POST -u username -H 'Content-Type:application/xml' -d @mailbox_post.xml http://service/mailbox`。我们喜欢这种方法，因为我们最终构建了一个可以批量运行的测试集合，或者至少在测试人员之间传递，并用于回归测试。

*   我们使用 cURL 和[RESTClient](http://code.google.com/p/rest-client/)进行临时测试

*   我们的服务默认为 XHTML，因此它是可浏览的，并添加了表单资源，因此该服务实际上可以使用浏览器进行部分或全部测试。这部分受到[RESTful Web 服务](http://oreilly.com/catalog/9780596529260/)的某些部分的启发，其中作者表明，Web 服务和 Web 应用程序之间的界线可能不需要像通常假设的那样牢固和严格。

*   我们使用[Restlet](http://www.restlet.org)框架将功能测试编写为[Groovy](http://groovy.codehaus.org/)闭包，并使用测试运行程序 Groovy 脚本运行测试。这很有用，因为测试可以是有状态的，可以相互构建，并在适当的时候共享变量。我们发现 Restlet 的 API 简单直观，可以轻松编写快速 HTTP 请求和测试响应，并且在 Groovy 中使用时更容易。[（我希望尽快在我们的博客](http://blog.arc90.com)上分享这项技术，包括测试运行脚本。）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-29T14:31:49.693

[Postman](https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop)是一个 Google Chrome 扩展程序，可能会有所帮助。

多年后编辑：如果 Chrome 扩展链接被更改，URL 的网站也是：[www.postman.com](https://www.postman.com)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-02-03T20:38:01.533

我发现 RequestBin 对于调试 REST 请求很有用。发布到唯一的 URL 并更新/显示请求数据。当其他工具不可用时，可以在紧要关头提供帮助。

[https://requestbin.com/](https://requestbin.com/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-05T20:31:19.947

如果您运行的是 OS X Leopard，我发现这个工具很有用：

[HTTP 客户端](http://ditchnet.org/httpclient/)

这是一个非常简单的 GUI 程序，可让您制作对资源的 http 请求并查看响应。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-03T04:50:05.730

您可以使用 fiddler 的[Composer](http://www.fiddlerbook.com/fiddler/help/composer.asp)来调试[restful 服务](http://dotnetninja.wordpress.com/2008/05/02/rest-service-with-wcf-and-json/)..

2013 年 9 月 12 日更新 JD：*Rest Builder*现在称为*Composer*。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-03T09:47:38.120

`cURL`工作得很好。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-11-06T17:44:45.883

我最终选择了[POSTMAN](http://www.getpostman.com/)

它支持我能想到的所有 REST 功能，而且 UI 绝对出色。唯一的缺点是它需要 Chrome。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-05T20:45:22.817

[RESTTest](https://addons.mozilla.org/en-US/firefox/addon/5946) for Firefox（一个附加组件）。[IE 的提琴手](http://www.fiddler2.com/fiddler2/)。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-11-06T09:33:02.367

我正在使用 Soap UI 来测试我的 REST API。

它比任何其他工具都更完整：

*   精细调试请求和响应
*   自动化测试
*   所有基于 GUI
*   属性和属性转移以参数化您的测试
*   条件测试
*   性能测试

我不为 SmartBear 工作。在将它用于 SOAP WebServices 时，我已经是 SoapUI 的忠实粉丝了。

![我的 SoapUI REST 项目](https://i.stack.imgur.com/AEX58.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-03T09:07:57.733

除了在 Peter Hilton 的回复中使用其中一种工具之外，我不得不说，使用 LWP 或其他类似工具编写测试脚本可能是您唯一的选择。您*可以*通过打开一个套接字、发送一个原始 HTTP 请求并检查您得到的回报来绕过 LWP 的使用。但据我所知，这类领域缺乏测试工具——大多数人主要从网站开发人员的角度看待这个问题空间，对他们来说，浏览器就足够了一个测试平台.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-03T10:06:59.470

我使用 restclient，可从[Google Code](http://code.google.com/p/rest-client/)获得。这是一个简单的 Java Swing 应用程序，它支持所有 HTTP 方法，并允许您完全控制 HTTP 标头、连接等。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-03T10:37:05.540

我倾向于使用带有一个不错的 REST 客户端的[Jersey来为 RESTful 资源编写单元测试。](http://jersey.java.net/)好消息是，如果您使用 JAX-RS 实现 RESTful 资源，那么 Jersey 客户端可以重用实体提供程序，例如 JAXB/XML/JSON/Atom 等 - 因此您可以在服务器端重用与您相同的对象在客户端单元测试中使用。

例如，这里有一个来自[Apache Camel 项目](http://activemq.apache.org/camel/)[的单元测试用例](http://svn.apache.org/viewvc/activemq/camel/trunk/components/camel-rest/src/test/java/org/apache/camel/rest/resources/EndpointsTest.java?revision=700513&view=markup)，它从 RESTful 资源中查找 XML 有效负载（使用 JAXB 对象端点）。resource(uri) 方法在[这个基类](http://svn.apache.org/viewvc/activemq/camel/trunk/components/camel-rest/src/test/java/org/apache/camel/rest/resources/TestSupport.java?revision=700513&view=markup)中定义，它只使用 Jersey 客户端 API。

例如

```
clientConfig = new DefaultClientConfig();
client = Client.create(clientConfig);

resource = client.resource("http://localhost:8080");
// lets get the XML as a String
String text = resource("foo").accept("application/xml").get(String.class); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2010-06-23T14:45:21.133

如果您想要具有相同目的的免费工具并具有多部分表单数据提交的附加功能，请访问[http://code.google.com/a/eclipselabs.org/p/restclient-tool/](http://code.google.com/a/eclipselabs.org/p/restclient-tool/)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-05-12T05:33:19.190

Firefox 的[RESTClient](https://addons.mozilla.org/en-US/firefox/addon/restclient/)插件可以使用方法、参数、标头等发送不同的请求。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-10-23T17:35:08.107

你们应该检查firefox 的[海报](https://addons.mozilla.org/en-US/firefox/addon/poster/)扩展，它足够简单和有用:)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-01-07T12:10:51.330

因为它在这里完全消失了： [https ://luckymarmot.com/paw](https://luckymarmot.com/paw)

一分钱一分货...

# c++ - 除了 C++ 之外，其他语言的程序员是否使用、了解或理解 RAII？

> ID：165723
> 
> 赞同：33
> 
> 时间：2008-10-03T04:48:44.563
> 
> 标签：c++, language-agnostic, raii

我注意到 RAII 在 Stackoverflow 上引起了很多关注，但在我的圈子（主要是 C++）中，RAII 非常明显，就像问什么是类或析构函数一样。

所以我真的很好奇这是因为我每天都被铁杆 C++ 程序员包围，而 RAII 通常并不为人所知（包括 C++），或者是否所有对 Stackoverflow 的质疑都是由于事实我现在接触的程序员不是用 C++ 长大的，而在其他语言中，人们只是不使用/不了解 RAII？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-12-28T16:47:06.867

RAII 不为人所知的原因有很多。首先，名字不是特别明显。如果我还不知道 RAII 是什么，我肯定永远不会从名字中猜到它。（资源获取是初始化？这与析构函数或清理有什么关系，这才是RAII的*真正特征？）*

另一个是它在没有确定性清理的语言中效果不佳。

在 C++ 中，我们确切地知道何时调用析构函数，知道调用析构函数的顺序，我们可以定义它们来做任何我们喜欢的事情。

在大多数现代语言中，一切都是垃圾收集的，这使得 RAII 实现起来更加棘手。没有理由不能将 RAII 扩展添加到 C# 中，但它不像 C++ 中那样明显。但正如其他人所提到的，Perl 和其他语言尽管被垃圾收集，但仍支持 RAII。

也就是说，仍然可以使用 C# 或其他语言创建自己的 RAII 样式的包装器。我不久前在 C# 中做过。我必须写一些东西来确保数据库连接在使用后立即关闭，这是任何 C++ 程序员都会认为是 RAII 的明显候选者的任务。当然，`using`每当我们使用数据库连接时，我们都可以将所有内容都包装在 -statements 中，但这只是混乱且容易出错。

我的解决方案是编写一个以委托为参数的辅助函数，然后在调用时打开数据库连接，并在 using 语句中将其传递给委托函数，伪代码：

```
T RAIIWrapper<T>(Func<DbConnection, T> f){
  using (var db = new DbConnection()){
    return f(db);
  }
} 
```

仍然不如 C++-RAII 好或明显，但它实现了大致相同的目标。每当我们需要一个 DbConnection 时，我们都必须调用这个帮助函数来保证它之后会被关闭。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-10-03T11:44:58.343

我一直使用 C++ RAII，但我也在 Visual Basic 6 中开发了很长时间，并且 RAII 一直是那里广泛使用的概念（尽管我从未听过有人这么称呼它）。

事实上，许多 VB6 程序都非常依赖 RAII。我反复看到的比较奇怪的用途之一是以下小班：

```
' WaitCursor.cls '
Private m_OldCursor As MousePointerConstants

Public Sub Class_Inititialize()
    m_OldCursor = Screen.MousePointer
    Screen.MousePointer = vbHourGlass
End Sub

Public Sub Class_Terminate()
    Screen.MousePointer = m_OldCursor
End Sub 
```

用法：

```
Public Sub MyButton_Click()
    Dim WC As New WaitCursor

    ' … Time-consuming operation. '
End Sub 
```

一旦耗时的操作终止，原始游标会自动恢复。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-10-03T05:10:38.880

RAII 代表[Resource Acquisition Is Initialization](http://en.wikipedia.org/wiki/Resource_acquisition_is_initialization)。这根本不是语言无关的。这个口头禅在这里是因为 C++ 以它的工作方式工作。在 C++ 中，对象在其构造函数完成之前不会被构造。如果对象未成功构造，则不会调用析构函数。

翻译成实用语言，构造函数应该确保它涵盖了它无法彻底完成其工作的情况。例如，如果在构造过程中发生异常，那么构造函数必须优雅地处理它，因为析构函数不会提供帮助。这通常通过覆盖构造函数中的异常或将此麻烦转发给其他对象来完成。例如：

```
class OhMy {
public:
    OhMy() { p_ = new int[42];  jump(); } 
    ~OhMy() { delete[] p_; }

private:
    int* p_;

    void jump();
}; 
```

如果`jump()`构造函数中的调用抛出我们有麻烦，因为`p_`会泄漏。我们可以这样解决这个问题：

```
class Few {
public:
    Few() : v_(42) { jump(); } 
    ~Few();

private:
    std::vector<int> v_;

    void jump();
}; 
```

如果人们没有意识到这一点，那是因为以下两件事之一：

*   他们不太了解 C++。在这种情况下，他们应该在编写下一个类之前再次打开[TCPPPL 。](http://www.research.att.com/~bs/3rd.html)具体来说，本书第三版的 14.4.1 节讨论了这种技术。
*   他们根本不懂 C++。没关系。这个成语非常 C++y。要么学习 C++，要么忘记这一切，继续你的生活。最好学习C++。;)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-10-03T04:58:38.707

对于在此线程中评论 RAII（资源获取是初始化）的人，这是一个励志示例。

```
class StdioFile {
    FILE* file_;
    std::string mode_;

    static FILE* fcheck(FILE* stream) {
        if (!stream)
            throw std::runtime_error("Cannot open file");
        return stream;
    }

    FILE* fdup() const {
        int dupfd(dup(fileno(file_)));
        if (dupfd == -1)
            throw std::runtime_error("Cannot dup file descriptor");
        return fdopen(dupfd, mode_.c_str());
    }

public:
    StdioFile(char const* name, char const* mode)
        : file_(fcheck(fopen(name, mode))), mode_(mode)
    {
    }

    StdioFile(StdioFile const& rhs)
        : file_(fcheck(rhs.fdup())), mode_(rhs.mode_)
    {
    }

    ~StdioFile()
    {
        fclose(file_);
    }

    StdioFile& operator=(StdioFile const& rhs) {
        FILE* dupstr = fcheck(rhs.fdup());
        if (fclose(file_) == EOF) {
            fclose(dupstr); // XXX ignore failed close
            throw std::runtime_error("Cannot close stream");
        }
        file_ = dupstr;
        return *this;
    }

    int
    read(std::vector<char>& buffer)
    {
        int result(fread(&buffer[0], 1, buffer.size(), file_));
        if (ferror(file_))
            throw std::runtime_error(strerror(errno));
        return result;
    }

    int
    write(std::vector<char> const& buffer)
    {
        int result(fwrite(&buffer[0], 1, buffer.size(), file_));
        if (ferror(file_))
            throw std::runtime_error(strerror(errno));
        return result;
    }
};

int
main(int argc, char** argv)
{
    StdioFile file(argv[1], "r");
    std::vector<char> buffer(1024);
    while (int hasRead = file.read(buffer)) {
        // process hasRead bytes, then shift them off the buffer
    }
} 
```

这里，当`StdioFile`创建实例时，获取资源（本例中为文件流）；当它被销毁时，资源被释放。不需要`try`或`finally`阻止；如果读取导致异常，`fclose`则自动调用，因为它在析构函数中。

析构函数保证在函数离开时被调用`main`，无论是正常还是异常。在这种情况下，文件流被清理。世界再次安全。:-D

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-10-03T05:16:22.423

RAII。

它从构造函数和析构函数开始，但不仅如此。
这一切都是为了在出现异常的情况下安全地控制资源。

使 RAII 优于 finally 和此类机制的原因在于它使代码使用起来更安全，因为它将正确使用对象的责任从对象的用户转移到了对象的设计者身上。

[读这个](https://stackoverflow.com/questions/161177/does-c-support-finally-blocks-and-whats-this-raii-i-keep-hearing-about#161247)

[使用 RAII 正确使用StdioFile](https://stackoverflow.com/questions/165723/do-programmers-of-other-languages-besides-c-use-know-or-understand-raii#165743)的示例。

```
void someFunc()
{
    StdioFile    file("Plop","r");

    // use file
}
// File closed automatically even if this function exits via an exception. 
```

使用 finally 获得相同的功能。

```
void someFunc()
{
      // Assuming Java Like syntax;
    StdioFile     file = new StdioFile("Plop","r");
    try
    {
       // use file
    }
    finally
    {
       // close file.
       file.close(); // 
       // Using the finaliser is not enough as we can not garantee when
       // it will be called.
    }
} 
```

因为您必须显式添加 try{} finally{} 块，这使得这种编码方法更容易出错（**即**需要考虑异常的是对象的用户）。通过使用 RAII，必须在实现对象时对异常安全进行一次编码。

问题是这个 C++ 特定的。
简短的回答：没有。

更长的答案：
它需要构造函数/析构函数/异常和具有定义生命周期的对象。

从技术上讲，它不需要例外。当可能使用异常时，它变得更加有用，因为它使得在存在异常的情况下控制资源变得非常容易。
但它在控制可以提前离开函数而不执行所有代码的所有情况下都很有用（**例如**，从函数提前返回。这就是为什么 C 中的多个返回点是不好的代码气味，而 C++ 中的多个返回点不是代码气味[因为我们可以使用 RAII 进行清理]）。

在 C++ 中，受控生命周期是通过堆栈变量或智能指针来实现的。但这并不是我们唯一一次可以严格控制寿命。例如，Perl 对象不是基于堆栈的，但由于引用计数而具有非常可控的生命周期。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-12-28T16:07:58.863

RAII 的问题是首字母缩写词。它与概念没有明显的相关性。这与堆栈分配有什么关系？这就是归结为。C++ 使您能够在堆栈上分配对象并保证在堆栈展开时调用它们的析构函数。鉴于此，RAII 听起来像是一种有意义的封装方式吗？不。直到几周前我来到这里之前，我才听说过 RAII，当我读到有人发帖说他们永远不会雇用一个不知道 RAII 是什么的 C++ 程序员时，我什至不得不大笑。当然，大多数有能力的专业 C++ 开发人员都知道这个概念。只是首字母缩写词构思不佳。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-10-03T17:54:54.633

[@Pierre 的答案](https://stackoverflow.com/questions/165723/do-programmers-of-other-languages-besides-c-use-know-or-understand-raii#165991)的修改：

在 Python 中：

```
with open("foo.txt", "w") as f:
    f.write("abc") 
```

`f.close()`无论是否引发异常，都会自动调用。

一般来说，可以使用来自文档的[contextlib.closure](http://www.python.org/doc/2.5.2/lib/module-contextlib.html)来完成：

> `closing(thing)`：返回一个上下文管理器，它在块完成时关闭事物。这基本上相当于：
> 
> ```
> from contextlib import contextmanager
> 
> @contextmanager
> def closing(thing):
>     try:
>         yield thing
>     finally:
>         thing.close() 
> ```
> 
> 并让您编写如下代码：
> 
> ```
> from __future__ import with_statement # required for python version < 2.6
> from contextlib import closing
> import urllib
> 
> with closing(urllib.urlopen('http://www.python.org')) as page:
>     for line in page:
>         print line 
> ```
> 
> 无需显式关闭页面。即使发生错误，退出 with 块时也会调用 page.close()。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-02-27T20:36:26.890

Common Lisp 有 RAII：

```
(with-open-file (stream "file.ext" :direction :input)
    (do-something-with-stream stream)) 
```

见：[http ://www.psg.com/~dlamkins/sl/chapter09.html](http://www.psg.com/~dlamkins/sl/chapter09.html)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-10-03T05:02:31.207

首先，我很惊讶它并不为人所知！我完全认为 RAII 至少对 C++ 程序员来说是显而易见的。但是现在我想我可以理解为什么人们实际上会问这个问题。我被包围了，我自己一定是，C++ 怪胎......

所以我的秘密.. 我想那就是，我曾经读过 Meyers、Sutter [EDIT:] 和 Andrei 几年前一直到我只是摸索它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-03T05:34:01.413

RAII 的问题在于它需要确定性的终结，这对于 C++ 中基于堆栈的对象是有保证的。依赖垃圾回收的 C# 和 Java 等语言没有这种保证，因此必须以某种方式“固定”它。在 C# 中，这是通过实现 IDisposable 来完成的，然后基本上会出现许多相同的使用模式，这是“使用”语句的动机之一，它确保了 Disposal 并且非常知名和使用。

所以基本上成语就在那里，只是没有一个花哨的名字。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-03T07:24:34.283

RAII 是 C++ 中的一种方法，用于确保在代码块之后执行清理过程，而不管代码中发生了什么：代码正确执行到最后或引发异常。一个已经引用的示例是在处理文件后自动关闭文件，请参阅[此处的答案](https://stackoverflow.com/questions/165723/do-programmers-of-other-languages-besides-c-use-know-or-understand-raii#165743)。

在其他语言中，您使用其他机制来实现这一点。

在 Java 中，您有 try { } finally {} 构造：

```
try {
  BufferedReader file = new BufferedReader(new FileReader("infilename"));
  // do something with file
}
finally {
    file.close();
} 
```

在 Ruby 中，您有自动块参数：

```
File.open("foo.txt") do | file |
  # do something with file
end 
```

在 Lisp 中，你有`unwind-protect`和预定义的`with-XXX`

```
(with-open-file (file "foo.txt")
  ;; do something with file
) 
```

在 Scheme 中，您拥有`dynamic-wind`和预定义的`with-XXXXX`：

```
(with-input-from-file "foo.txt"
  (lambda ()
    ;; do something 
) 
```

在 Python 中你终于可以尝试了

```
try
  file = open("foo.txt")
  # do something with file
finally:
  file.close() 
```

作为 RAII 的 C++ 解决方案相当笨拙，因为它迫使您为必须执行的各种清理创建一个类。这可能会迫使你编写很多愚蠢的小类。

RAII 的其他示例是：

*   获取后解锁互斥锁
*   打开后关闭数据库连接
*   分配后释放内存
*   登录和退出代码块
*   ...

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-03T04:52:26.410

这与知道何时调用您的析构函数有关，对吗？所以它并不完全与语言无关，因为这在许多 GC 语言中都没有。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-03T04:54:22.570

我认为许多其他语言（`delete`例如没有 的语言）并没有给程序员对对象生命周期的完全相同的控制，因此必须有其他方法来提供资源的确定性处置。例如，在 C# 中，使用`using`with`IDisposable`很常见。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-03T04:58:19.563

RAII 在 C++ 中很受欢迎，因为它是少数（唯一？）可以分配复杂范围局部变量但没有`finally`子句的语言之一。C#、Java、Python、Ruby 都有`finally`或等效的。`finally`当变量超出范围时，C 没有，但也无法执行代码。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-11T18:00:59.800

我的同事是铁杆的，“阅读规范”C++ 类型。他们中的许多人都知道 RAII，但我从未真正听说过在那个场景之外使用它。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2008-10-11T17:39:50.340

CPython（用 C 编写的官方 Python）支持 RAII，因为它使用引用计数的对象和基于范围的立即销毁（而不是在收集垃圾时）。不幸的是，Jython（Java 中的 Python）和 PyPy 不支持这个非常有用的 RAII 习惯用法，并且它破坏了很多遗留的 Python 代码。因此，对于可移植的 python，您必须像 Java 一样手动处理所有异常。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2008-10-03T04:58:40.920

RAII 特定于 C++。C++ 具有堆栈分配对象、非托管对象生命周期和异常处理的必要组合。

# jquery - 结束（）函数

> ID：165729
> 
> 赞同：4
> 
> 时间：2008-10-03T04:52:00.233
> 
> 标签：jquery

jQuery 中的`end()`函数将元素集恢复为上次破坏性更改之前的状态，所以我可以看到它应该如何使用，但我已经看到了一些代码示例，例如：[在 alistapart 上](http://alistapart.com/articles/prettyaccessibleforms) *（可能来自旧版本jQuery 的 - 这篇文章来自 2006 年）*，它用`.end()`. 例如：

```
$( 'form.cmxform' ).hide().end(); 
```

*   这有什么影响吗？
*   这也是我应该做的事情吗？
*   上面的代码甚至返回了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T05:01:45.470

那`end()`没有任何作用。这样编码是没有意义的。它会返回`$('#myBox')`——这个例子很糟糕。更有趣的是这样的：

```
$('#myBox').show ().children ('.myClass').hide ().end ().blink (); 
```

这将显示`myBox`，隐藏指定的子项，然后使框闪烁。这里还有更多有趣的例子：

[http://simonwillison.net/2007/Aug/15/jquery/](http://simonwillison.net/2007/Aug/15/jquery/)

如：

```
$('form#login')
    // hide all the labels inside the form with the 'optional' class
    .find('label.optional').hide().end()
    // add a red border to any password fields in the form
    .find('input:password').css('border', '1px solid red').end()
    // add a submit handler to the form
    .submit(function(){
        return confirm('Are you sure you want to submit?');
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:44:03.727

从[jquery doc](http://api.jquery.com/end/)有一个例子：

```
$('ul.first').find('.foo')
  .css('background-color', 'red')
.end().find('.bar')
  .css('background-color', 'green')
.end(); 
```

之后进行澄清：

> 最后一个 end() 是不必要的，因为我们随后会立即丢弃 jQuery 对象。然而，当代码以这种形式编写时，end() 提供了视觉上的对称性和完成感——至少在一些开发人员的眼中，使程序更具可读性，但代价是对性能的轻微影响这是一个额外的函数调用。

# c# - 你如何在 Windows 窗体上显示动画 GIF (c#)

> ID：165735
> 
> 赞同：151
> 
> 时间：2008-10-03T04:54:22.273
> 
> 标签：c#, winforms, animated-gif

我有一个表格显示进度消息，因为进程运行时间相当长。这是对 Web 服务的调用，所以我无法在进度条上有意义地显示完成百分比。（我不是特别喜欢进度条的 Marquee 属性）

我想展示一个动画 GIF 以使该过程具有某种活动的感觉（例如文件从一台计算机飞到另一台计算机，如 Windows 复制过程）。

你怎么做到这一点？

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2008-10-03T04:59:05.147

这不是太难。

1.  将图片框拖放到您的表单上。
2.  将 .gif 文件添加为图片框中的图像
3.  加载时显示图片框。

**需要考虑的事项：**

*   禁用图片框将阻止 gif 动画。

**动画 GIF：**

如果您正在寻找动画 gif，您可以生成它们：

[AjaxLoad - Ajax 加载 gif 生成器](http://ajaxload.info/)

**另一种方法：**

我发现效果很好的另一种方法是我在[代码项目中找到的异步对话框控件](http://www.codeproject.com/KB/dialog/asyncdialog.aspx)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2010-12-19T14:48:40.930

我有同样的问题。由于在后台工作的长时间操作，整个表单（包括 gif）停止重绘自身。这是我解决这个问题的方法。

```
 private void MyThreadRoutine()
  {
   this.Invoke(this.ShowProgressGifDelegate);
   //your long running process
   System.Threading.Thread.Sleep(5000);
   this.Invoke(this.HideProgressGifDelegate);
  }

  private void button1_Click(object sender, EventArgs e)
  {
   ThreadStart myThreadStart = new ThreadStart(MyThreadRoutine);
   Thread myThread = new Thread(myThreadStart);
   myThread.Start(); 
  } 
```

我只是创建了另一个线程来负责这个操作。多亏了这个初始形式，继续重绘没有问题（包括我的 gif 工作）。ShowProgressGifDelegate 和 HideProgressGifDelegate 是表单中的代表，将带有 gif 的图片框的可见属性设置为真/假。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-10-03T05:16:41.890

请注意，在 Windows 中，您通常不使用动画 Gif，而是使用少量 AVI 动画：有一个 Windows 本机控件来显示它们。甚至还有将动画 Gif 转换为 AVI 的工具（反之亦然）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-03T04:58:17.520

如果你把它放在 PictureBox 控件中，它应该可以工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-17T13:57:12.500

当您在后面开始长时间的操作时不会这样做，因为因为您在同一个线程中，所以一切都停止了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-01T06:15:14.427

```
Public Class Form1

    Private animatedimage As New Bitmap("C:\MyData\Search.gif")
    Private currentlyanimating As Boolean = False

    Private Sub OnFrameChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)

        Me.Invalidate()

    End Sub

    Private Sub AnimateImage()

        If currentlyanimating = True Then
            ImageAnimator.Animate(animatedimage, AddressOf Me.OnFrameChanged)
            currentlyanimating = False
        End If

    End Sub

    Protected Overrides Sub OnPaint(ByVal e As System.Windows.Forms.PaintEventArgs)

        AnimateImage()
        ImageAnimator.UpdateFrames(animatedimage)
        e.Graphics.DrawImage(animatedimage, New Point((Me.Width / 4) + 40, (Me.Height / 4) + 40))

    End Sub

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        BtnStop.Enabled = False

    End Sub

    Private Sub BtnStop_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnStop.Click

        currentlyanimating = False
        ImageAnimator.StopAnimate(animatedimage, AddressOf Me.OnFrameChanged)
        BtnStart.Enabled = True
        BtnStop.Enabled = False

    End Sub

    Private Sub BtnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnStart.Click

        currentlyanimating = True
        AnimateImage()
        BtnStart.Enabled = False
        BtnStop.Enabled = True

    End Sub

End Class 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-08T01:06:59.140

我遇到了同样的问题，并且通过实施我曾经面临几个不同问题的解决方案遇到了不同的解决方案。最后，下面是我将来自不同帖子的一些片段放在一起的内容，它们对我来说是预期的。

```
private void btnCompare_Click(object sender, EventArgs e)
{
    ThreadStart threadStart = new ThreadStart(Execution);
    Thread thread = new Thread(threadStart);
    thread.SetApartmentState(ApartmentState.STA);
    thread.Start();
} 
```

下面是同样携带调用 PictureBox 控件的 Execution 方法：

```
private void Execution()
{
    btnCompare.Invoke((MethodInvoker)delegate { pictureBox1.Visible = true; });
    Application.DoEvents();

    // Your main code comes here . . .

    btnCompare.Invoke((MethodInvoker)delegate { pictureBox1.Visible = false; });
} 
```

请记住，图片框在属性窗口中是不可见的，或者执行以下操作：

```
private void ComparerForm_Load(object sender, EventArgs e)
{
    pictureBox1.Visible = false;
} 
```

# wcf - 是否建议在其他 Web 服务之上构建 Web 服务？

> ID：165747
> 
> 赞同：2
> 
> 时间：2008-10-03T05:00:03.617
> 
> 标签：wcf, web-services, wsdl, design-patterns, gateway

我继承了这个非常奇怪的代码库，他们在一堆**内部Web 服务上构建了一个****外部Web 服务，只是为了使用***WS-Security*、*WS-Encryption*等添加身份验证/授权。参与此活动不到一个月，我已经感受到通过严格的 WSDL 耦合易失性组件的痛苦，尤其是考虑到其中一些使用 WCF 而其他选择首先使用 WSDL。在各个级别管理各种版本的生成代理和包装器是一场噩梦！

 ****我承认设计过于复杂，本来可以更好，但我的问题本质上是：

*   您是否曾经构建一个 Web 服务只是为了提供对一堆服务的横切关注点？
*   这会更好地实现为 Web 服务处理程序吗？

最后...

*   您会将其归类为 Web 服务网关模式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T05:10:14.433

一年前我看到了那个东西正在建造。当团队花费数月时间构建 4 个 Web 服务时，我几乎哭了，其中 2 个只是简单地包装了其他内部服务，使用 WCF 和一些严重的加密。他们包装内部错误的唯一原因是更改返回的潜在错误编号。

那么，我会故意这样做吗？没有。

将它作为几乎其他任何东西实施会更好吗？是的。

我会将其归类为 WTF 模式吗？绝对地。

**更新：**

我刚刚记得的一件事是，有一种称为“企业服务总线”的架构，它的目的是为其他 SOA 系统提供一个通用接口。这样，不同的应用程序使用什么来实现其端点机制（WCF、WSE 1/2/3、RESTful 等）并不重要。

BizTalk 是 ESB 的一个示例，还有许多其他现成的程序可供使用。基本上，您的应用程序将一条消息传递给 ESB，它会以可靠的方式处理将该消息发送到其他系统以及编组返回的任何响应。

这也意味着您可以将其他应用程序与端点的多种类型的更改隔离开来。当然，如果新的端点需要额外的信息，那么你就必须修改调用者。但是，如果他们所改变的只是机制，那么一个好的 ESB 将能够处理这些更改而不会影响您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-03T05:04:15.010

如果您将服务暴露给外部世界并且需要加强安全性，我已经看到了类似的实现......请查看此[MSDN 专栏](http://msdn.microsoft.com/en-us/magazine/cc793961.aspx)..

# performance - 对于您复杂的算法，您如何衡量其性能？

> ID：165751
> 
> 赞同：4
> 
> 时间：2008-10-03T05:03:34.137
> 
> 标签：performance, language-agnostic, optimization

现在让我们假设您已经缩小了应用程序中典型瓶颈的位置。就您所知，这可能是您为重新索引表而运行的批处理过程；它可能是在您的有效日期树上运行的 SQL 查询；它可能是数百个复合对象的 XML 编组。换句话说，你可能有这样的事情：

```
public Result takeAnAnnoyingLongTime(Input in) {
   // impl of above
} 
```

不幸的是，即使在您确定了瓶颈之后，您所能做的也只是消除它。没有简单的解决方案可用。

您如何衡量瓶颈的性能，以便您知道您的修复正朝着正确的方向发展？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T05:33:47.373

两点：

1.  当心臭名昭著的“优化空闲循环”问题。（例如，请参阅标题“Porsche-in-the-parking-lot”下的[优化故事](http://c2.com/cgi/wiki/wiki?OptimizationStories)。）也就是说，仅仅因为例程需要大量时间（如您的分析所示），不要假设它是对用户感知的性能缓慢负责。

2.  最大的性能提升通常不是来自对算法实现的巧妙调整或优化，而是来自于意识到完全有更好的算法。一些改进相对明显，而另一些则需要对算法进行更详细的分析，并且可能对所涉及的数据结构进行重大更改。这可能包括用处理器时间换取 I/O 时间，在这种情况下，您需要确保不只优化其中一项措施。

回到所提出的问题，确保你所测量的任何东西都代表了用户的实际体验，否则你的努力可能完全是浪费时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-03T05:05:59.763

1.  剖析它
2.  在分析器中找到顶行，尝试使其更快。
3.  剖析它
4.  如果有效，转1。如果无效，转2。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-03T05:06:03.850

我会使用让我首先找到它们的相同工具/方法来测量它们。

即，在所有地方坚持计时和记录电话。如果数字开始下降，那么您可能正在做正确的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-03T05:09:47.463

正如这个[msdn 专栏](http://msdn.microsoft.com/en-us/magazine/cc500561.aspx)中提到的，性能调优比作画金门大桥的工作：一旦你完成了整个事情，是时候回到起点重新开始了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-05T00:45:34.123

这不是一个难题。您需要了解的第一件事是，衡量性能并不是您发现性能问题的方式。知道某事有多慢并不能帮助您找出原因。你需要一个诊断工具，而且是一个好的工具。我有很多这样做的经验，[这](http://www.wikihow.com/Optimize-Your-Program%27s-Performance)是最好的方法。它不是自动的，但它在大多数分析器周围运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-06T10:22:15.217

我会确定两件事：

1）它的复杂性是多少？最简单的方法是绘制耗时与输入大小的关系图。2）它是如何绑定的？是内存，还是磁盘，还是与其他进程或机器的IPC，或者..

现在第 (2) 点更容易解决和解释：如果你有更多的 RAM、更快的机器或更快的磁盘，或者转移到千兆以太网等，很多事情都会变得更快。如果你确定了你的痛苦，你可以在硬件上投入一些钱来让它变得可以忍受。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-03T05:52:47.810

这是一个有趣的问题。我想没有人知道答案。我认为问题的重要部分在于，对于更复杂的程序，没有人可以预测它们的复杂性。因此，即使您有分析器结果，根据应该对程序进行的更改来解释它也是非常复杂的，因为您没有关于最佳解决方案的理论基础。

我认为这就是为什么我们拥有如此臃肿的软件的一个原因。我们只进行优化，以便非常简单的案例可以在我们的快速机器上运行。但是一旦你将这些部分组合成一个大型系统，或者你使用更大数量级的输入，使用的错误算法（在此之前在理论上和实践上都是不可见的）将开始显示它们真正的复杂性。

示例：您创建一个处理 Unicode 的字符串类。您可以在计算机生成的 XML 处理之类的地方使用它，这并不重要。但是 Unicode 处理在那里，占用了部分资源。字符串类本身可以很快，但是调用百万次，程序就会很慢。

我相信大多数当前的软件膨胀都是这种性质的。有一种方法可以减少它，但它与 OOP 相矛盾。有一本有趣的书[有一本](http://www.cix.co.uk/~smallmemory/book.html)关于各种技术的有趣的书，它是面向内存的，但其中大部分都可以还原以获得更快的速度。

# macos - OSX Leopard 扩展坞的自定义堆栈的命令行语法是什么？

> ID：165765
> 
> 赞同：0
> 
> 时间：2008-10-03T05:16:24.670
> 
> 标签：macos, dock, stack

我知道除了默认提供的“下载”之外，还有一种用于将自定义堆栈添加到 OSX Leopard 扩展坞的命令行语法。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T05:47:44.797

[http://code.google.com/p/dockutil/](http://code.google.com/p/dockutil/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T17:37:51.763

虽然这并不能完全回答您的问题，[但此页面](http://www.tuaw.com/2008/09/16/terminal-tips-add-recent-applications-as-a-stack-on-dock/)提供了一些有关如何将“最近项目”堆栈添加到 Dock 的信息。也许这会帮助您弄清楚添加堆栈的通用语法是什么？

# java - Common Lisp 是否有类似 java 的 Set Interface/implementing classes 的东西？

> ID：165767
> 
> 赞同：9
> 
> 时间：2008-10-03T05:17:01.110
> 
> 标签：java, lisp, set, sbcl

我需要这样的东西[，](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Set.html)一个不包含任何元素重复的元素集合。Common Lisp，特别是 SBCL，有这样的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-03T07:51:11.897

为了快速解决，只需使用哈希表，如前所述。

但是，如果您更喜欢更有原则的方法，您可以查看[FSet](http://common-lisp.net/project/fset/)，它是“一个功能集合论集合库”。其中，它包含集合和包的类和操作。

（编辑：）最干净的方法可能是将面向集合的操作定义为通用函数。毕竟，一组泛型函数基本上相当于一个 Java 接口。您可以简单地在标准 HASH-TABLE 类上实现方法作为第一个原型，并允许其他实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-03T11:53:20.977

看看[cl-containers](http://common-lisp.net/project/cl-containers/)。有一个集合容器类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-03T10:38:19.717

您可以使用列表，尽管它们可能被证明在表示大型集合时效率低下。这是通过使用 ADJOIN 或[PUSHNEW](http://www.lispworks.com/documentation/HyperSpec/Body/m_pshnew.htm)将新元素添加到列表中来完成的，并使用[DELETE 或 REMOVE](http://www.lispworks.com/documentation/HyperSpec/Body/f_rm_rm.htm)来执行相反的操作。

```
(let ((set (list)))
  (pushnew 11 set)
  (pushnew 42 set)
  (pushnew 11 set) 
  (print set) ; set={42,11}
  (setq set (delete 42 set))
  (print set)) ; set={11} 
```

需要注意的一件事是，这些运算符默认使用[EQL](http://www.lispworks.com/documentation/HyperSpec/Body/f_eql.htm)来测试集合中的潜在重复项（就像 Java 使用 equals 方法一样）。这对于包含数字或字符的集合是可以的，但是对于其他对象的集合，应该将诸如[EQUAL之类的“更深”的相等测试指定为 :TEST 关键字参数，例如对于一组字符串：-](http://www.lispworks.com/documentation/HyperSpec/Body/f_equal.htm)

```
(let ((set (list)))
  (pushnew "foo" set :test #'equal)
  (pushnew "bar" set :test #'equal)
  (pushnew "foo" set :test #'equal) ; EQUAL decides that "foo"="foo"
  (print set)) ; set={"bar","foo"} 
```

Lisp 与 Java 的一些 Set 操作对应的是：

*   addAll -> [UNION 或NUNION](http://www.lispworks.com/documentation/HyperSpec/Body/f_unionc.htm)
*   containsAll -> [SUBSETP](http://www.lispworks.com/documentation/HyperSpec/Body/f_subset.htm#subsetp)
*   removeAll -> [SET-DIFFERENCE 或 NSET-DIFFERENCE](http://www.lispworks.com/documentation/HyperSpec/Body/f_set_di.htm)
*   retainAll -> [INTERSECTION 或 NINTERSECTION](http://www.lispworks.com/documentation/HyperSpec/Body/f_isec_.htm#intersection)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-03T13:29:56.477

是的，它有套装。请参阅*Practical Common Lisp中*[关于“Sets”](http://gigamonkeys.com/book/beyond-lists-other-uses-for-cons-cells.html)的这一部分。

 *基本上，您可以使用 和 创建一个集合，使用`pushnew`和`adjoin`查询它`member`，`member-if`并将`member-if-not`其与其他具有`intersection`、`union`、`set-difference`和`set-exclusive-or`等函数的集合组合`subsetp`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-05T04:50:27.897

使用哈希表可以轻松解决。

```
(let ((h (make-hash-table :test 'equalp))) ; if you're storing symbols
  (loop for i from 0 upto 20
        do (setf (gethash i h) (format nil "Value ~A" i)))
  (loop for i from 10 upto 30
        do (setf (gethash i h) (format nil "~A eulaV" i)))
  (loop for k being the hash-keys of h using (hash-value v)
        do (format t "~A => ~A~%" k v))) 
```

输出

```
0 => Value 0
1 => Value 1
...
9 => Value 9
10 => 10 eulaV
11 => 11 eulaV
...
29 => 29 eulaV
30 => 30 eulaV 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-03T05:27:37.997

不是我知道的，但是您可以将[哈希表](http://www.lispworks.com/documentation/HyperSpec/Body/18_.htm)用于非常相似的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-03T06:11:53.037

Lisp 哈希表是基于 CLOS 的。规格[在这里](http://clhs.lisp.se/Body/t_hash_t.htm)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-26T23:27:35.117

就个人而言，我只会实现一个函数，它接受一个列表并返回一个唯一的集合。我一起起草了一些对我有用的东西：

```
(defun make-set (list-in &optional (list-out '()))
  (if (endp list-in)
      (nreverse list-out)
      (make-set
        (cdr list-in)
        (adjoin (car list-in) list-out :test 'equal)))) 
```

基本上，`adjoin`当且仅当该项目尚未出现在列表中时，该函数才会非破坏性地将项目添加到列表中，接受可选的测试函数（Common Lisp“相等”函数之一）。你也可以`pushnew`破坏性地这样做，但我发现尾递归实现要优雅得多。因此，Lisp 确实导出了几个基本函数，允许您将列表用作集合；不需要内置数据类型，因为您可以使用不同的函数将内容添加到列表中。

我所有这些的数据源（不是函数，而是信息）是[Common Lisp HyperSpec](http://www.lispworks.com/documentation/common-lisp.html)和[Common Lisp the Language (2nd Edition)](http://www.cs.cmu.edu/Groups/AI/html/cltl/cltl2.html)的组合。

# c# - .Net 项目的程序集依赖项

> ID：165771
> 
> 赞同：1
> 
> 时间：2008-10-03T05:20:24.237
> 
> 标签：c#, .net, vb.net

如果我有一个引用另一个程序集 (B) 的程序集 (A)。我想在项目中引用 A，我添加引用并将 A 复制到我的 BIN 目录中。它也不会复制 B，即使 A 依赖于它，所以代码不会编译。如何设置以便每当我引用 A 时，A 和 B 都会被复制到我的 bin 目录中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-03T05:23:14.200

在 Visual Studio 中，将每个项目添加到同一个解决方案中。确保您使用项目引用而不是直接文件引用（即浏览程序集）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-03T05:29:13.657

除了明确添加两者之外，我认为没有任何方法可以解决您的要求。但是，我不认为为了复制参考而添加项目是解决该问题的可行解决方案。并非解决方案所依赖的所有项目都必须添加到解决方案中。这将完全取决于您的整体项目结构、流程、源代码控制、分工等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T05:23:17.740

参考 A 和 B。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T05:37:48.003

不幸的是，您必须手动添加两者。当我使用 3.5 之前的 NHibernate 版本时，我也会遇到这种情况：它需要 log4net 和 Iesi.Collections 程序集。所以我别无选择，只能在我所有实现 NHibernate 的解决方案中手动包含对这两者的引用。

当然，如果您只有 DLL，这将是一个更大的问题。如果它是一个项目，您拥有 Visual Studio 本身的代码库，则会事先警告您缺少引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T13:04:35.110

将它们添加到全局程序集缓存怎么样？

# http - 大多数 Web 浏览器中是否提供 PUT、DELETE、HEAD 等方法？

> ID：165779
> 
> 赞同：626
> 
> 时间：2008-10-03T05:26:59.697
> 
> 标签：http, cross-browser, browser, ajax

我在这里看到了几个问题，例如[How to debug RESTful services](https://stackoverflow.com/questions/165720/how-to-debug-restful-services)，其中提到：

> 不幸的是，同一个浏览器不允许我测试 HTTP PUT、DELETE，在某种程度上甚至是 HTTP POST。

我还听说浏览器仅支持 GET 和 POST，来自其他一些来源，例如：

*   [http://www.packetizer.com/ws/rest.html](http://www.packetizer.com/ws/rest.html)
*   [http://www.mail-archive.com/jmeter-user@jakarta.apache.org/msg13518.html](http://www.mail-archive.com/jmeter-user@jakarta.apache.org/msg13518.html)
*   [http://www.xml.com/cs/user/view/cs_msg/1098](http://www.xml.com/cs/user/view/cs_msg/1098)

但是，Firefox 中的一些快速测试表明发送`PUT`和`DELETE`请求按预期工作——`XMLHttpRequest`成功完成，并且请求以正确的方法显示在服务器日志中。我是否缺少某些方面，例如跨浏览器兼容性或不明显的限制？

* * *

## 回答 #1

> 赞同：472
> 
> 时间：2008-10-03T12:02:06.047

不，[HTML 5 规范](http://w3c.github.io/html/sec-forms.html#form-control-infrastructure-form-submission)提到：

> method 和 formmethod 内容属性是具有以下关键字和状态的枚举属性：
> 
> 关键字**get**，映射到状态 GET，表示 HTTP GET 方法。GET 方法应该只请求和检索数据，应该没有其他效果。
> 
> 关键字**post**，映射到状态 POST，表示 HTTP POST 方法。POST 方法请求服务器接受要处理的提交表单的数据，这可能导致将项目添加到数据库、创建新的网页资源、更新现有页面或所有提到的结果.
> 
> 关键字**dialog**，映射到状态对话框，表示提交表单的目的是关闭表单所在的对话框（如果有），否则不提交。
> 
> 这些属性的无效值默认值是 GET 状态

即 HTML 表单仅支持**GET**和**POST**作为 HTTP 请求方法。解决此问题的方法是使用隐藏的表单字段通过 POST 通过 POST 隧道传输其他方法，该字段由服务器读取并相应地分派请求。

然而，所有主要网络浏览器（IE、Firefox、Safari、Chrome、Opera）中的 XMLHttpRequest（即 AJAX 调用）的实现*都*支持**GET**、**POST**、**PUT**和**DELETE 。**

 ** * *

## 回答 #2

> 赞同：85
> 
> 时间：2008-10-05T13:40:40.760

[HTML 表单](https://developer.mozilla.org/en-US/docs/Learn/Forms/Sending_and_retrieving_form_data)支持 GET 和 POST。（HTML5 曾一度添加了 PUT/DELETE，但这些都被删除了。）

[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)支持包括 CHICKEN 在内的所有方法，尽管某些方法名称不区分大小写（每个 HTTP 方法都区分大小写），并且出于安全原因（例如 CONNECT）根本不支持某些方法名称。

[Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)还支持除 CONNECT、TRACE 和 TRACK 之外的任何方法，出于安全原因，这些方法是被[禁止的。](https://fetch.spec.whatwg.org/#methods)

浏览器正在慢慢融合 XMLHttpRequest 指定的规则，但正如其他评论指出的那样，仍然存在一些差异。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2008-10-03T09:59:29.517

`XMLHttpRequest`是 JavaScript 对象模型中的标准对象。

根据 Wikipedia 的说法，[`XMLHttpRequest`](http://en.wikipedia.org/wiki/XMLHttpRequest#History_and_support)最初作为 ActiveX 对象出现在 Internet Explorer 5 中，但此后已成为标准，并在 Mozilla 家族的 JavaScript 1.0、Apple Safari 1.2、Opera 7.60-p1 和 IE 7.0 中使用.

[对象上的`open()`方法](https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#the-open%28%29-method)将 HTTP 方法作为参数 - 并指定为采用任何有效的 HTTP 方法（请参阅链接的第 5 项） - 包括`GET`、`POST`、和`HEAD`，如[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-5.1.1)所指定。`PUT``DELETE`

作为旁注[，IE 7-8 只允许以下 HTTP 方法：“GET”、“POST”、“HEAD”、“PUT”、“DELETE”、“MOVE”、“PROPFIND”、“PROPPATCH”、“MKCOL” 、“复制”、“锁定”、“解锁”和“选项”](https://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx)。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-11-12T21:49:46.223

**`_method`隐藏字段解决方法**

在 Rails 中使用并且可以适应任何框架：

*   `_method`向任何不是 GET 或 POST 的表单添加隐藏参数：

    ```
    <input type="hidden" name="_method" value="DELETE"> 
    ```

    这可以通过 HTML 创建辅助方法在框架中自动完成（例如 Rails `form_tag`）

*   将实际表单方法修复为 POST ( `<form method="post"`)

*   处理`_method`服务器上的进程，并且就像发送该方法而不是实际的 POST 一样执行

为什么不可能的理由/历史：[https ://softwareengineering.stackexchange.com/questions/114156/why-there-are-no-put-and-delete-methods-in-html-forms](https://softwareengineering.stackexchange.com/questions/114156/why-there-are-no-put-and-delete-methods-in-html-forms)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-10-03T09:49:34.153

我相信这些评论专门针对浏览器，即点击链接和提交表单，而不是`XMLHttpRequest`. `XMLHttpRequest`只是*您*用 JavaScript 编写的一个自定义客户端，它使用浏览器作为运行时。

更新：澄清一下，我并不是说（虽然我确实写过）*你*写的`XMLHttpRequest`；我的意思是您编写的代码使用`XMLHttpRequest`. 浏览器本身不支持`XMLHttpRequest`. `XMLHttpRequest`来自 JavaScript 运行时，它可能由浏览器托管，尽管它不是必需的（请参阅[Rhino](http://www.mozilla.org/rhino/)）。这就是为什么人们说浏览器不支持`PUT`并且——`DELETE`因为实际上是 JavaScript 支持它们。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-07-21T20:52:42.173

**YES**、PUT、DELETE、HEAD 等 HTTP 方法在所有现代浏览器中都可用。

要与[XMLHttpRequest Level 2](http://www.w3.org/TR/2012/WD-XMLHttpRequest-20120117/#request-method)兼容，浏览器*必须*支持这些方法。要检查哪些浏览器支持 XMLHttpRequest Level 2，我推荐 CanIUse：

[http://caniuse.com/#feat=xhr2](http://caniuse.com/#feat=xhr2)

只有 Opera Mini 缺乏对 atm 的支持（juli '15），但 Opera Mini 缺乏对一切的支持。:)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-07-31T14:39:13.547

只是添加 - Safari 2 和更早版本绝对不支持 PUT 和 DELETE。我得到了印象 3，但我没有它来测试了。Safari 4 确实支持 PUT 和 DELETE。

# javascript - 意见：在 HTML 中，可能的重复 ID 或非标准属性？

> ID：165783
> 
> 赞同：9
> 
> 时间：2008-10-03T05:28:11.910
> 
> 标签：javascript, html, database

想让你的 javascript 知道一个特定的 dom 节点对应于数据库中的一条记录似乎很常见。你是怎么做到的？

我见过的一种很常见的方法是使用类作为类型，使用 id 作为 id：

```
<div class="thing" id="5">
<script> myThing = select(".thing#5") </script> 
```

不过，这有一个轻微的 html 标准问题——如果您在页面上有不止一种类型的记录，您最终可能会重复 ID。但这并没有什么坏处，不是吗？

另一种方法是使用数据属性：

```
<div data-thing-id="5">
<script> myThing = select("[data-thing-id=5]") </script> 
```

这解决了重复 ID 的问题，但这确实意味着您必须处理属性而不是 ID，这有时会更加困难。你们有什么感想？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-03T06:24:55.160

请注意，ID 不能以数字开头，因此：

```
<div class="thing" id="5"> 
```

是无效的 HTML。请参阅[HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-is-a-valid-value-for-id-attributes-in-html#70586)

在您的情况下，我会使用 ID 之类的`thing5`or `thing.5`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-10-03T05:31:33.540

```
<div class="thing" id="myapp-thing-5"/>

// Get thing on the page for a particular ID
var myThing = select("#myapp-thing-5");

// Get ID for the first thing on the page
var thing_id = /myapp-thing-(\d+)/.exec ($('.thing')[0].id)[1]; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-10-03T05:46:10.993

**你将放弃对 DOM 的一些控制**

没错，什么都不会爆炸，但这是不好的做法。如果您在页面上放置了重复的 id，那么当您尝试通过其 id 访问元素时，您基本上将**无法确定您将获得什么。**

```
var whoKnows = document.getElementById('duplicateId'); 
```

行为实际上是不同的，具体取决于浏览器。在任何情况下，您都可以将 classNames 用于重复值，并且您将完全**避免这个问题**。

浏览器会尝试忽略标记中的错误，但事情会变得**混乱和困难**。最好的办法是保持你的标记有效。您可以在 className 中描述元素的类型及其唯一的数据库 ID。您甚至可以使用**多个类名**来区分它们。有**很多有效的可能性**：

```
<div class="friend04"/>
<div class="featuredFriend04" /> 
```

或者

```
<div class="friend friend04" />
<div class="featuredFriend friend04" /> 
```

或者

```
<div class="friend objectId04" />
<div class="groupMember objectId04" /> 
```

或者

```
<div class="friend objectId04" />
<div class="friend objectId04" id="featured" /> 
```

这些都是完全合法且有效的 XHTML 片段。请注意，在最后一个片段中，我仍然有一个 id 为我工作，这很好。通过 id 访问元素非常快速和容易，因此您肯定希望能够在可能的情况下利用它。

您已经在 javascript 上花费了足够的时间，**以确保您拥有正确的值和类型**。在页面上放置重复的 id 只会让事情变得更难。如果你能找到编写符合标准的标记的方法，它会有很多**实际的好处**。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-03T07:37:03.067

根据标准，ID 应该是唯一的，虽然大多数浏览器在收到重复的 ID 时不会感到厌烦，但始终依赖这种情况并不是一个好主意。

通过向 ID 添加类型名称来使 ID 唯一是可行的，但您需要询问为什么需要它。当需要找到元素时，给元素一个 id 非常有用，getElementById 非常快。大多数浏览器会在加载 DOM 时构建 ID 索引的原因是它很快。但是，如果您有数以亿计的 ID，而您实际上不需要在 getElementById 之类的东西中使用，那么您就产生了永远无法偿还的成本。

我认为您可能会发现大多数时候您希望在由元素或其子元素之一触发的事件中使用对象 ID。在这种情况下，我会在元素上使用附加属性，而不是 ID 属性。

我会留下类属性来做它应该做的事情，而不是让识别职责超载它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-03T05:35:05.763

考虑到每个元素可以有多个类这一事实，您不能创建一个唯一标识符作为每个元素的附加类吗？这样，可能会有多个元素具有相同的“id”而不会发生 HTML ID 属性冲突。

```
<div class="thing myapp-thing-5" />
<div class="thing myapp-thing-668" />
<div class="thing myapp-thing-5" /> 
```

然后很容易找到这些节点，并通过一些字符串操作找到它们对应的数据库记录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-03T06:32:22.397

在 HTML5 中，您可以这样做：

```
 <!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <script>
            window.addEventListener("DOMContentLoaded", function() {
                var thing5 = document.evaluate('//*[@data-thing="5"]', 
                document, null, XPathResult.FIRST_ORDERED_NODE_TYPE ,null);
                alert(thing5.singleNodeValue.textContent);
            }, false);
        </script>
    </head>
    <body>
        <div data-thing="5">test</div>
    </body>
</html> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-03T09:31:57.573

如果您设置了非标准属性，请务必以编程方式设置它们（因为那样一切都是合法的）或者通过修改 dtd 的麻烦！-)

但是我会在 DB-id 前面使用一个有意义的词的 ID，然后使用 .getElementById，因为每个必要的信息都在手边......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-03T05:47:57.777

非标准属性很好，如果您使用 XHTML 并花时间扩展您使用的 DTD 以覆盖新属性。就个人而言，我只会使用更独特的 id，就像其他一些人建议的那样。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-03T09:23:38.107

我不喜欢[约翰米利金的](https://stackoverflow.com/users/3560/john-millikin)解决方案。在大型数据集上，这将是性能密集型的。

`substring()`由于 id 属性的前几个字符是常量，因此对他的代码的优化可能是用调用替换正则表达式。

我会先进行匹配`class`，然后再进行具体的匹配`id`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-03T16:51:41.297

通过 DOM 跟踪您的数据对我来说似乎很不稳定。请记住，这些 ID 是全局变量，因此如果其他人的脚本有任何机会进入您的页面，那么它很容易受到攻击。为获得最佳结果，请将您的数据加载到匿名函数中的对象中，然后写入表（或 DIV 的大嵌套列表）。

# iphone - 在objective-c（iphone版）中做观察者/可观察的最好方法是什么

> ID：165790
> 
> 赞同：14
> 
> 时间：2008-10-03T05:33:32.133
> 
> 标签：iphone, objective-c, cocoa

我习惯于编写 Java Swing UI，如果您有一些更改的属性，并且您希望您的 UI 更新，您将实现观察者/可观察模式。在 Java 中，您通常通过让您的类维护它通知不同事件的侦听器列表来执行此操作。

我在 Mac 上玩过 Objective-C，它有 KVC 和绑定，看起来工作得很好，并且需要更少的代码。iPhone SDK 似乎没有此功能，所以我的问题是：如果我有一个包含更改数据的类，那么我向该类注册 UI 组件以便通知它的最佳方法是什么它需要显示的数据的变化？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-10-03T09:16:51.380

在 Cocoa 中有两种内置的观察方式：键值观察和通知。在这两个系统中，您都不需要自己维护或通知一组观察者；该框架将为您处理。

Key-Value Observing (KVO) 允许您观察对象的属性——甚至包括表示集合的属性——并在该属性发生更改时收到通知。您只需发送对象`-addObserver:forKeyPath:options:context:`，传递您想要接收更新的对象、您想要接收更新的属性的关键路径（相对于接收者）以及您想要接收的更新类型。（如果您想观察表示集合的属性，可以使用类似的方法。）

通知较旧且较重。您在一个`NSNotificationCenter`（通常是默认中心）注册一个对象和选择器对，以便在事件发生时传递通知。通知对象本身可以通过其`userInfo`属性包含任意数据，您可以选择观察特定名称的所有通知，而不是适用于特定对象的通知。

在任何特定情况下您应该使用哪个？一般来说，如果您关心对特定对象的特定属性的更改，请使用 Key-Value Observing。这就是它的设计目的，而且它是故意轻量级的。（在其他用途​​中，它是构建 Cocoa 绑定的基础。）如果您关心不是由属性表示的状态更改，那么通知更合适。

例如，为了在用户更改模型对象的名称时保持同步，我会使用 KVO。要知道何时保存了整个对象图，我会使用通知。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-03T13:03:47.637

我还发现你可以这样做：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_handleWhateverChange) name:@"whateverChange" object:nil]; 
```

注册更改事件，以及

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"whateverChange" object:nil]; 
```

解雇他们。我可能是 N00b，但我无法让关键路径的观察者为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T06:04:50.793

这通常不是它的完成方式。看看[这里](https://stackoverflow.com/questions/95567/is-there-any-benefit-to-using-cocoas-version-of-mvc-with-net)的讨论，特别是 Apple 文档的链接。

如果您仍然想按照您所说的方式进行操作，那么“手动”实现诸如绑定之类的东西并不是特别难。您只需创建一个知道如何订阅更改并连接到视图属性的“绑定”对象。

要真正回答它是如何完成的 - 通常，您有一个控制器对象来监视模型的状态（充当类似于观察者的东西），并根据需要更新视图对象。

# vb6 - 在 VB 6.0 中使用 ini 文件

> ID：165796
> 
> 赞同：2
> 
> 时间：2008-10-03T05:34:26.200
> 
> 标签：vb6

我一定很傻，但我似乎找不到如何使用 VB 6.0 读取老式的 ini 文件。我似乎只能找到关于读取和写入注册表的信息。有人可以将我推向正确的方向吗？请注意，我不是程序员，只是一个试图用他的电脑获得一些无害乐趣的爱好者，所以当你指出明显的出血时请不要太苛刻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T05:35:59.613

请参阅[此线程](https://stackoverflow.com/questions/12633/what-is-the-easiest-way-to-parse-an-ini-file-in-c)上的最佳答案。不，在 VB 中没有什么不同！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T05:37:31.857

使用 GetPrivateProfile* 函数。下面是一些如何使用 Declare 语句执行此操作的示例：

*   [代码大师](http://www.codeguru.com/forum/archive/index.php/t-201546.html)
*   [论坛](http://www.vbforums.com/showthread.php?t=439267)

# database - 我实现记录锁定的最佳方式是什么？

> ID：165800
> 
> 赞同：2
> 
> 时间：2008-10-03T05:36:28.910
> 
> 标签：database, locking

我有一个关于锁定的问题。这不仅仅与记录锁定有关，但无论如何。

假设我正在编写一个可访问网络的 CMS。我正在为一些想法而苦苦挣扎。

当用户打开文章进行编辑时，我可以将文章标记为“正在使用”。到目前为止，一切都很好。

但是我什么时候删除标志？用户何时保存文章？但是如果用户不想再打字并决定关闭浏览器并上床睡觉怎么办？

想到了一个超时机制，但是写一篇文章需要多长时间？10分钟太短，30分钟太长。。

也许我过于复杂了。我想听听你对这个问题的看法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T05:48:57.947

为什么不使用时间戳？实际上不必担心锁定任何内容，只需对记录（文章）更改的事件做出反应。

基本上，在保存文章之前，请检查您的版本（时间戳）是否与磁盘上的相同。如果相同，那么您仍然有最新的副本，因此请编写它，如果没有，则...提议合并，提议另存为新副本，丢弃它-特定于应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-03T05:40:39.993

我的投票是尽可能地[乐观锁定。](http://www.15seconds.com/issue/030604.htm)

在我实施了实际锁的地方，我有一个管理页面来删除锁。服务器上还运行了一项服务来解锁任何没有相应活动会话的锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-01T00:22:55.513

对 mssql 2005 及更高版本使用 rowversion，对 mssql 2000 及更低版本使用时间戳。对 postgresql 使用隐藏的 xmin 字段。

让所有其他用户打开记​​录。除了保存记录，标记谁保存它，并在 rowversion 的帮助下，在 catch(DbConcurrencyException) 上重新抛出一个错误，指示在他们之前保存记录的其他用户，并请求他们重新打开记录查看首先保存记录的用户所做的更改。

# c# - 简单不安全的双向数据“混淆”？

> ID：165808
> 
> 赞同：439
> 
> 时间：2008-10-03T05:41:31.800
> 
> 标签：c#, obfuscation

我正在为某些数据寻找非常简单的混淆（如加密和解密但不一定安全）功能。这不是关键任务。我需要一些东西来让诚实的人保持诚实，但比[ROT13](http://en.wikipedia.org/wiki/ROT13)或[Base64](http://en.wikipedia.org/wiki/Base64)更强大一些。

我更喜欢[.NET](http://en.wikipedia.org/wiki/.NET_Framework)框架 2.0 中已经包含的东西，所以我不必担心任何外部依赖项。

我真的不想弄乱公钥/私钥等。我对加密知之甚少，但我确实知道我写的任何东西都不是毫无价值的......事实上，我可能会搞砸数学并使破解变得微不足道。

* * *

## 回答 #1

> 赞同：473
> 
> 时间：2008-10-17T15:45:38.273

这里的其他答案工作正常，但 AES 是一种更安全和最新的加密算法。这是我几年前获得的一个用于执行 AES 加密的类，我随着时间的推移对其进行了修改，以便对 Web 应用程序更友好（例如，我已经构建了适用于 URL 友好字符串的加密/解密方法）。它还具有处理字节数组的方法。

注意：您应该在 Key（32 字节）和 Vector（16 字节）数组中使用不同的值！您不希望有人通过假设您按原样使用此代码来找出您的密钥！您所要做的就是更改 Key 和 Vector 数组中的一些数字（必须 <= 255）（我在 Vector 数组中留下了一个无效值以确保您这样做......）。您可以使用[https://www.random.org/bytes/](https://www.random.org/bytes/)轻松生成新集合：

*   [产生`Key`](https://www.random.org/cgi-bin/randbyte?nbytes=32&format=d)
*   [产生`Vector`](https://www.random.org/cgi-bin/randbyte?nbytes=16&format=d)

使用它很简单：只需实例化类，然后（通常）调用 EncryptToString(string StringToEncrypt) 和 DecryptString(string StringToDecrypt) 作为方法。一旦你有了这个类，它就不会更容易（或更安全）了。

* * *

```
using System;
using System.Data;
using System.Security.Cryptography;
using System.IO;

public class SimpleAES
{
    // Change these keys
    private byte[] Key = __Replace_Me__({ 123, 217, 19, 11, 24, 26, 85, 45, 114, 184, 27, 162, 37, 112, 222, 209, 241, 24, 175, 144, 173, 53, 196, 29, 24, 26, 17, 218, 131, 236, 53, 209 });

    // a hardcoded IV should not be used for production AES-CBC code
    // IVs should be unpredictable per ciphertext
    private byte[] Vector = __Replace_Me__({ 146, 64, 191, 111, 23, 3, 113, 119, 231, 121, 2521, 112, 79, 32, 114, 156 });

    private ICryptoTransform EncryptorTransform, DecryptorTransform;
    private System.Text.UTF8Encoding UTFEncoder;

    public SimpleAES()
    {
        //This is our encryption method
        RijndaelManaged rm = new RijndaelManaged();

        //Create an encryptor and a decryptor using our encryption method, key, and vector.
        EncryptorTransform = rm.CreateEncryptor(this.Key, this.Vector);
        DecryptorTransform = rm.CreateDecryptor(this.Key, this.Vector);

        //Used to translate bytes to text and vice versa
        UTFEncoder = new System.Text.UTF8Encoding();
    }

    /// -------------- Two Utility Methods (not used but may be useful) -----------
    /// Generates an encryption key.
    static public byte[] GenerateEncryptionKey()
    {
        //Generate a Key.
        RijndaelManaged rm = new RijndaelManaged();
        rm.GenerateKey();
        return rm.Key;
    }

    /// Generates a unique encryption vector
    static public byte[] GenerateEncryptionVector()
    {
        //Generate a Vector
        RijndaelManaged rm = new RijndaelManaged();
        rm.GenerateIV();
        return rm.IV;
    }

    /// ----------- The commonly used methods ------------------------------    
    /// Encrypt some text and return a string suitable for passing in a URL.
    public string EncryptToString(string TextValue)
    {
        return ByteArrToString(Encrypt(TextValue));
    }

    /// Encrypt some text and return an encrypted byte array.
    public byte[] Encrypt(string TextValue)
    {
        //Translates our text value into a byte array.
        Byte[] bytes = UTFEncoder.GetBytes(TextValue);

        //Used to stream the data in and out of the CryptoStream.
        MemoryStream memoryStream = new MemoryStream();

        /*
         * We will have to write the unencrypted bytes to the stream,
         * then read the encrypted result back from the stream.
         */
        #region Write the decrypted value to the encryption stream
        CryptoStream cs = new CryptoStream(memoryStream, EncryptorTransform, CryptoStreamMode.Write);
        cs.Write(bytes, 0, bytes.Length);
        cs.FlushFinalBlock();
        #endregion

        #region Read encrypted value back out of the stream
        memoryStream.Position = 0;
        byte[] encrypted = new byte[memoryStream.Length];
        memoryStream.Read(encrypted, 0, encrypted.Length);
        #endregion

        //Clean up.
        cs.Close();
        memoryStream.Close();

        return encrypted;
    }

    /// The other side: Decryption methods
    public string DecryptString(string EncryptedString)
    {
        return Decrypt(StrToByteArray(EncryptedString));
    }

    /// Decryption when working with byte arrays.    
    public string Decrypt(byte[] EncryptedValue)
    {
        #region Write the encrypted value to the decryption stream
        MemoryStream encryptedStream = new MemoryStream();
        CryptoStream decryptStream = new CryptoStream(encryptedStream, DecryptorTransform, CryptoStreamMode.Write);
        decryptStream.Write(EncryptedValue, 0, EncryptedValue.Length);
        decryptStream.FlushFinalBlock();
        #endregion

        #region Read the decrypted value from the stream.
        encryptedStream.Position = 0;
        Byte[] decryptedBytes = new Byte[encryptedStream.Length];
        encryptedStream.Read(decryptedBytes, 0, decryptedBytes.Length);
        encryptedStream.Close();
        #endregion
        return UTFEncoder.GetString(decryptedBytes);
    }

    /// Convert a string to a byte array.  NOTE: Normally we'd create a Byte Array from a string using an ASCII encoding (like so).
    //      System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
    //      return encoding.GetBytes(str);
    // However, this results in character values that cannot be passed in a URL.  So, instead, I just
    // lay out all of the byte values in a long string of numbers (three per - must pad numbers less than 100).
    public byte[] StrToByteArray(string str)
    {
        if (str.Length == 0)
            throw new Exception("Invalid string value in StrToByteArray");

        byte val;
        byte[] byteArr = new byte[str.Length / 3];
        int i = 0;
        int j = 0;
        do
        {
            val = byte.Parse(str.Substring(i, 3));
            byteArr[j++] = val;
            i += 3;
        }
        while (i < str.Length);
        return byteArr;
    }

    // Same comment as above.  Normally the conversion would use an ASCII encoding in the other direction:
    //      System.Text.ASCIIEncoding enc = new System.Text.ASCIIEncoding();
    //      return enc.GetString(byteArr);    
    public string ByteArrToString(byte[] byteArr)
    {
        byte val;
        string tempStr = "";
        for (int i = 0; i <= byteArr.GetUpperBound(0); i++)
        {
            val = byteArr[i];
            if (val < (byte)10)
                tempStr += "00" + val.ToString();
            else if (val < (byte)100)
                tempStr += "0" + val.ToString();
            else
                tempStr += val.ToString();
        }
        return tempStr;
    }
} 
```

* * *

## 回答 #2

> 赞同：183
> 
> 时间：2011-04-01T19:44:39.813

我清理了 SimpleAES（上图）供我使用。修复了复杂的加密/解密方法；用于编码字节缓冲区、字符串和 URL 友好字符串的分离方法；利用现有的库进行 URL 编码。

代码更小，更简单，更快，输出更简洁。例如，`johnsmith@gmail.com`产生：

```
SimpleAES: "096114178117140150104121138042115022037019164188092040214235183167012211175176167001017163166152"
SimplerAES: "YHKydYyWaHmKKnMWJROkvFwo1uu3pwzTr7CnARGjppg%3d" 
```

代码：

```
public class SimplerAES
{
    private static byte[] key = __Replace_Me__({ 123, 217, 19, 11, 24, 26, 85, 45, 114, 184, 27, 162, 37, 112, 222, 209, 241, 24, 175, 144, 173, 53, 196, 29, 24, 26, 17, 218, 131, 236, 53, 209 });

    // a hardcoded IV should not be used for production AES-CBC code
    // IVs should be unpredictable per ciphertext
    private static byte[] vector = __Replace_Me_({ 146, 64, 191, 111, 23, 3, 113, 119, 231, 121, 221, 112, 79, 32, 114, 156 });

    private ICryptoTransform encryptor, decryptor;
    private UTF8Encoding encoder;

    public SimplerAES()
    {
        RijndaelManaged rm = new RijndaelManaged();
        encryptor = rm.CreateEncryptor(key, vector);
        decryptor = rm.CreateDecryptor(key, vector);
        encoder = new UTF8Encoding();
    }

    public string Encrypt(string unencrypted)
    {
        return Convert.ToBase64String(Encrypt(encoder.GetBytes(unencrypted)));
    }

    public string Decrypt(string encrypted)
    {
        return encoder.GetString(Decrypt(Convert.FromBase64String(encrypted)));
    }

    public byte[] Encrypt(byte[] buffer)
    {
        return Transform(buffer, encryptor);
    }

    public byte[] Decrypt(byte[] buffer)
    {
        return Transform(buffer, decryptor);
    }

    protected byte[] Transform(byte[] buffer, ICryptoTransform transform)
    {
        MemoryStream stream = new MemoryStream();
        using (CryptoStream cs = new CryptoStream(stream, transform, CryptoStreamMode.Write))
        {
            cs.Write(buffer, 0, buffer.Length);
        }
        return stream.ToArray();
    }
} 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2008-10-03T05:59:15.657

是的，添加`System.Security`程序集，导入`System.Security.Cryptography`命名空间。下面是一个对称 (DES) 算法加密的简单示例：

```
DESCryptoServiceProvider des = new DESCryptoServiceProvider();
des.GenerateKey();
byte[] key = des.Key; // save this!

ICryptoTransform encryptor = des.CreateEncryptor();
// encrypt
byte[] enc = encryptor.TransformFinalBlock(new byte[] { 1, 2, 3, 4 }, 0, 4);

ICryptoTransform decryptor = des.CreateDecryptor();

// decrypt
byte[] originalAgain = decryptor.TransformFinalBlock(enc, 0, enc.Length);
Debug.Assert(originalAgain[0] == 1); 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2014-10-03T10:06:06.423

只是想补充一点，我通过添加一个在加密字符串中传回的随机 IV 来改进 Mud 的 SimplerAES。这改进了加密，因为加密相同的字符串每次都会导致不同的输出。

```
public class StringEncryption
{
    private readonly Random random;
    private readonly byte[] key;
    private readonly RijndaelManaged rm;
    private readonly UTF8Encoding encoder;

    public StringEncryption()
    {
        this.random = new Random();
        this.rm = new RijndaelManaged();
        this.encoder = new UTF8Encoding();
        this.key = Convert.FromBase64String("Your+Secret+Static+Encryption+Key+Goes+Here=");
    }

    public string Encrypt(string unencrypted)
    {
        var vector = new byte[16];
        this.random.NextBytes(vector);
        var cryptogram = vector.Concat(this.Encrypt(this.encoder.GetBytes(unencrypted), vector));
        return Convert.ToBase64String(cryptogram.ToArray());
    }

    public string Decrypt(string encrypted)
    {
        var cryptogram = Convert.FromBase64String(encrypted);
        if (cryptogram.Length < 17)
        {
            throw new ArgumentException("Not a valid encrypted string", "encrypted");
        }

        var vector = cryptogram.Take(16).ToArray();
        var buffer = cryptogram.Skip(16).ToArray();
        return this.encoder.GetString(this.Decrypt(buffer, vector));
    }

    private byte[] Encrypt(byte[] buffer, byte[] vector)
    {
        var encryptor = this.rm.CreateEncryptor(this.key, vector);
        return this.Transform(buffer, encryptor);
    }

    private byte[] Decrypt(byte[] buffer, byte[] vector)
    {
        var decryptor = this.rm.CreateDecryptor(this.key, vector);
        return this.Transform(buffer, decryptor);
    }

    private byte[] Transform(byte[] buffer, ICryptoTransform transform)
    {
        var stream = new MemoryStream();
        using (var cs = new CryptoStream(stream, transform, CryptoStreamMode.Write))
        {
            cs.Write(buffer, 0, buffer.Length);
        }

        return stream.ToArray();
    }
} 
```

和奖金单元测试

```
[Test]
public void EncryptDecrypt()
{
    // Arrange
    var subject = new StringEncryption();
    var originalString = "Testing123!£$";

    // Act
    var encryptedString1 = subject.Encrypt(originalString);
    var encryptedString2 = subject.Encrypt(originalString);
    var decryptedString1 = subject.Decrypt(encryptedString1);
    var decryptedString2 = subject.Decrypt(encryptedString2);

    // Assert
    Assert.AreEqual(originalString, decryptedString1, "Decrypted string should match original string");
    Assert.AreEqual(originalString, decryptedString2, "Decrypted string should match original string");
    Assert.AreNotEqual(originalString, encryptedString1, "Encrypted string should not match original string");
    Assert.AreNotEqual(encryptedString1, encryptedString2, "String should never be encrypted the same twice");
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2011-09-06T02:38:04.857

分数（优秀）答案的变体

*   添加“使用”
*   使类 IDisposable
*   删除 URL 编码代码以使示例更简单。
*   添加一个简单的测试夹具来演示使用

希望这可以帮助

```
[TestFixture]
public class RijndaelHelperTests
{
    [Test]
    public void UseCase()
    {
        //These two values should not be hard coded in your code.
        byte[] key = {251, 9, 67, 117, 237, 158, 138, 150, 255, 97, 103, 128, 183, 65, 76, 161, 7, 79, 244, 225, 146, 180, 51, 123, 118, 167, 45, 10, 184, 181, 202, 190};
        byte[] vector = {214, 11, 221, 108, 210, 71, 14, 15, 151, 57, 241, 174, 177, 142, 115, 137};

        using (var rijndaelHelper = new RijndaelHelper(key, vector))
        {
            var encrypt = rijndaelHelper.Encrypt("StringToEncrypt");
            var decrypt = rijndaelHelper.Decrypt(encrypt);
            Assert.AreEqual("StringToEncrypt", decrypt);
        }
    }
}

public class RijndaelHelper : IDisposable
{
    Rijndael rijndael;
    UTF8Encoding encoding;

    public RijndaelHelper(byte[] key, byte[] vector)
    {
        encoding = new UTF8Encoding();
        rijndael = Rijndael.Create();
        rijndael.Key = key;
        rijndael.IV = vector;
    }

    public byte[] Encrypt(string valueToEncrypt)
    {
        var bytes = encoding.GetBytes(valueToEncrypt);
        using (var encryptor = rijndael.CreateEncryptor())
        using (var stream = new MemoryStream())
        using (var crypto = new CryptoStream(stream, encryptor, CryptoStreamMode.Write))
        {
            crypto.Write(bytes, 0, bytes.Length);
            crypto.FlushFinalBlock();
            stream.Position = 0;
            var encrypted = new byte[stream.Length];
            stream.Read(encrypted, 0, encrypted.Length);
            return encrypted;
        }
    }

    public string Decrypt(byte[] encryptedValue)
    {
        using (var decryptor = rijndael.CreateDecryptor())
        using (var stream = new MemoryStream())
        using (var crypto = new CryptoStream(stream, decryptor, CryptoStreamMode.Write))
        {
            crypto.Write(encryptedValue, 0, encryptedValue.Length);
            crypto.FlushFinalBlock();
            stream.Position = 0;
            var decryptedBytes = new Byte[stream.Length];
            stream.Read(decryptedBytes, 0, decryptedBytes.Length);
            return encoding.GetString(decryptedBytes);
        }
    }

    public void Dispose()
    {
        if (rijndael != null)
        {
            rijndael.Dispose();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-10-22T22:54:16.800

我结合了我从几个答案和评论中找到的最好的东西。

*   加密文本前面的随机初始化向量 (@jbtule)
*   使用 TransformFinalBlock() 而不是 MemoryStream (@RenniePet)
*   没有预先填写的密钥，以避免任何人复制和粘贴灾难
*   正确配置和使用模式

代码：

```
/// <summary>
/// Simple encryption/decryption using a random initialization vector
/// and prepending it to the crypto text.
/// </summary>
/// <remarks>Based on multiple answers in http://stackoverflow.com/questions/165808/simple-two-way-encryption-for-c-sharp </remarks>
public class SimpleAes : IDisposable
{
    /// <summary>
    ///     Initialization vector length in bytes.
    /// </summary>
    private const int IvBytes = 16;

    /// <summary>
    ///     Must be exactly 16, 24 or 32 bytes long.
    /// </summary>
    private static readonly byte[] Key = Convert.FromBase64String("FILL ME WITH 24 (2 pad chars), 32 OR 44 (1 pad char) RANDOM CHARS"); // Base64 has a blowup of four-thirds (33%)

    private readonly UTF8Encoding _encoder;
    private readonly ICryptoTransform _encryptor;
    private readonly RijndaelManaged _rijndael;

    public SimpleAes()
    {
        _rijndael = new RijndaelManaged {Key = Key};
        _rijndael.GenerateIV();
        _encryptor = _rijndael.CreateEncryptor();
        _encoder = new UTF8Encoding();
    }

    public string Decrypt(string encrypted)
    {
        return _encoder.GetString(Decrypt(Convert.FromBase64String(encrypted)));
    }

    public void Dispose()
    {
        _rijndael.Dispose();
        _encryptor.Dispose();
    }

    public string Encrypt(string unencrypted)
    {
        return Convert.ToBase64String(Encrypt(_encoder.GetBytes(unencrypted)));
    }

    private byte[] Decrypt(byte[] buffer)
    {
        // IV is prepended to cryptotext
        byte[] iv = buffer.Take(IvBytes).ToArray();
        using (ICryptoTransform decryptor = _rijndael.CreateDecryptor(_rijndael.Key, iv))
        {
            return decryptor.TransformFinalBlock(buffer, IvBytes, buffer.Length - IvBytes);
        }
    }

    private byte[] Encrypt(byte[] buffer)
    {
        // Prepend cryptotext with IV
        byte [] inputBuffer = _encryptor.TransformFinalBlock(buffer, 0, buffer.Length); 
        return _rijndael.IV.Concat(inputBuffer).ToArray();
    }
} 
```

2015-07-18 更新：通过 @bpsilver 和 @Evereq 的注释修复了私有 Encrypt() 方法中的错误。IV 被意外加密，现在按照 Decrypt() 的预期以明文形式添加。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-10-17T15:53:36.853

[编辑] 多年后，我回来说：**不要这样做！** 请参阅[XOR 加密有什么问题？](https://stackoverflow.com/questions/1135186/whats-wrong-with-xor-encryption)详情。

一个非常简单、容易的双向加密是 XOR 加密。

1.  想出一个密码。就这样吧`mypass`。

2.  将密码转换为二进制（根据 ASCII）。密码变为 01101101 01111001 01110000 01100001 01110011 01110011。

3.  获取要编码的消息。也将其转换为二进制。

4.  查看消息的长度。如果消息长度为 400 字节，则通过一遍又一遍地重复将密码变成 400 字节的字符串。这将成为01101101 01111001 01110000 01100001 01110011 01110011 01101101 01111001 01110000 01100001 01110011 01110011 01101101 01111001 01110000 01100001 01110011 01110011 ...（或`mypassmypassmypass...`）

5.  用长密码对消息进行异或。

6.  发送结果。

7.  另一次，用相同的密码对加密消息进行异或 ( `mypassmypassmypass...`)。

8.  你的消息来了！

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-10-12T13:46:07.753

**在System.Security.Cryptography**中使用 TripleDESCryptoServiceProvider ：

```
public static class CryptoHelper
{
    private const string Key = "MyHashString";
    private static TripleDESCryptoServiceProvider GetCryproProvider()
    {
        var md5 = new MD5CryptoServiceProvider();
        var key = md5.ComputeHash(Encoding.UTF8.GetBytes(Key));
        return new TripleDESCryptoServiceProvider() { Key = key, Mode = CipherMode.ECB, Padding = PaddingMode.PKCS7 };
    }

    public static string Encrypt(string plainString)
    {
        var data = Encoding.UTF8.GetBytes(plainString);
        var tripleDes = GetCryproProvider();
        var transform = tripleDes.CreateEncryptor();
        var resultsByteArray = transform.TransformFinalBlock(data, 0, data.Length);
        return Convert.ToBase64String(resultsByteArray);
    }

    public static string Decrypt(string encryptedString)
    {
        var data = Convert.FromBase64String(encryptedString);
        var tripleDes = GetCryproProvider();
        var transform = tripleDes.CreateDecryptor();
        var resultsByteArray = transform.TransformFinalBlock(data, 0, data.Length);
        return Encoding.UTF8.GetString(resultsByteArray);
    }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-10-03T06:08:34.513

如果您只想要简单的加密（即，一个确定的破解者可能会破解，但会锁定大多数临时用户），只需选择两个长度相等的密码，例如：

```
deoxyribonucleicacid
while (x>0) { x-- }; 
```

并用它们对您的数据进行异或运算（必要时循环密码）^((a))。例如：

```
1111-2222-3333-4444-5555-6666-7777
deoxyribonucleicaciddeoxyribonucle
while (x>0) { x-- };while (x>0) { 
```

搜索您的二进制文件的人可能会认为 DNA 字符串是一个键，但他们不太可能认为 C 代码是与您的二进制文件一起保存的未初始化内存之外的任何内容。

* * *

^((a))请记住，这是*非常*简单的加密，并且根据某些定义，可能根本不被视为加密（因为加密的目的是*防止*未经授权的访问，而不仅仅是使其更加困难）。当然，当有人拿着钢管站在钥匙持有人面前时，即使是最强大的加密也不安全。

如第一句话所述，这是一种使临时攻击者难以继续前进的方法。这类似于防止家中的入室盗窃 - 你不需要让它坚不可摧，你只需要让它比隔壁的房子更不易受攻击:-)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-10-03T11:42:46.460

加密很容易：正如其他人指出的那样，System.Security.Cryptography 命名空间中有一些类可以为您完成所有工作。使用它们而不是任何本土解决方案。

但解密也很容易。您遇到的问题不是加密算法，而是保护对用于解密的密钥的访问。

我会使用以下解决方案之一：

*   DPAPI 使用具有 CurrentUser 范围的 ProtectedData 类。这很容易，因为您无需担心密钥。数据只能由同一用户解密，因此不利于在用户或机器之间共享数据。

*   DPAPI 使用带有 LocalMachine 范围的 ProtectedData 类。例如，适用于保护单个安全服务器上的配置数据。但是任何可以登录机器的人都可以对其进行加密，所以除非服务器是安全的，否则没有任何好处。

*   任何对称算法。如果我不在乎使用什么算法（实际上默认情况下它是 Rijndael），我通常使用静态 SymmetricAlgorithm.Create() 方法。在这种情况下，您需要以某种方式保护您的密钥。例如，您可以以某种方式对其进行混淆并将其隐藏在您的代码中。但请注意，任何聪明到可以反编译您的代码的人都可能找到密钥。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-11-17T14:42:28.110

我想发布我的解决方案，因为上述解决方案都不像我的那么简单。让我知道你的想法：

```
 // This will return an encrypted string based on the unencrypted parameter
 public static string Encrypt(this string DecryptedValue)
 {
      HttpServerUtility.UrlTokenEncode(MachineKey.Protect(Encoding.UTF8.GetBytes(DecryptedValue.Trim())));
 }

 // This will return an unencrypted string based on the parameter
 public static string Decrypt(this string EncryptedValue)
 {
      Encoding.UTF8.GetString(MachineKey.Unprotect(HttpServerUtility.UrlTokenDecode(EncryptedValue)));
 } 
```

### 选修的

这假设用于加密该值的服务器的 MachineKey 与用于解密该值的相同。如果需要，您可以在 Web.config 中指定一个静态 MachineKey，以便您的应用程序可以解密/加密数据，而不管它在哪里运行（例如，开发服务器与生产服务器）。您可以[按照这些说明生成静态机器密钥](https://support.microsoft.com/en-us/kb/2915218#bookmark-appendixa)。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-03T05:49:57.537

命名空间`System.Security.Cryptography`包含`TripleDESCryptoServiceProvider`和`RijndaelManaged`类

不要忘记添加对`System.Security`程序集的引用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-02-22T17:08:17.663

我改变了[这个](https://stackoverflow.com/a/212707)：

```
public string ByteArrToString(byte[] byteArr)
{
    byte val;
    string tempStr = "";
    for (int i = 0; i <= byteArr.GetUpperBound(0); i++)
    {
        val = byteArr[i];
        if (val < (byte)10)
            tempStr += "00" + val.ToString();
        else if (val < (byte)100)
            tempStr += "0" + val.ToString();
        else
            tempStr += val.ToString();
    }
    return tempStr;
} 
```

对此：

```
 public string ByteArrToString(byte[] byteArr)
    {
        string temp = "";
        foreach (byte b in byteArr)
            temp += b.ToString().PadLeft(3, '0');
        return temp;
    } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-02-11T16:40:53.717

使用内置的 .Net Cryptography 库，此示例展示了如何使用高级加密标准 (AES)。

```
using System;
using System.IO;
using System.Security.Cryptography;

namespace Aes_Example
{
    class AesExample
    {
        public static void Main()
        {
            try
            {

                string original = "Here is some data to encrypt!";

                // Create a new instance of the Aes
                // class.  This generates a new key and initialization 
                // vector (IV).
                using (Aes myAes = Aes.Create())
                {

                    // Encrypt the string to an array of bytes.
                    byte[] encrypted = EncryptStringToBytes_Aes(original, myAes.Key, myAes.IV);

                    // Decrypt the bytes to a string.
                    string roundtrip = DecryptStringFromBytes_Aes(encrypted, myAes.Key, myAes.IV);

                    //Display the original data and the decrypted data.
                    Console.WriteLine("Original:   {0}", original);
                    Console.WriteLine("Round Trip: {0}", roundtrip);
                }

            }
            catch (Exception e)
            {
                Console.WriteLine("Error: {0}", e.Message);
            }
        }
        static byte[] EncryptStringToBytes_Aes(string plainText, byte[] Key,byte[] IV)
        {
            // Check arguments.
            if (plainText == null || plainText.Length <= 0)
                throw new ArgumentNullException("plainText");
            if (Key == null || Key.Length <= 0)
                throw new ArgumentNullException("Key");
            if (IV == null || IV.Length <= 0)
                throw new ArgumentNullException("Key");
            byte[] encrypted;
            // Create an Aes object
            // with the specified key and IV.
            using (Aes aesAlg = Aes.Create())
            {
                aesAlg.Key = Key;
                aesAlg.IV = IV;

                // Create a decrytor to perform the stream transform.
                ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

                // Create the streams used for encryption.
                using (MemoryStream msEncrypt = new MemoryStream())
                {
                    using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                    {
                        using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                        {

                            //Write all data to the stream.
                            swEncrypt.Write(plainText);
                        }
                        encrypted = msEncrypt.ToArray();
                    }
                }
            }

            // Return the encrypted bytes from the memory stream.
            return encrypted;

        }

        static string DecryptStringFromBytes_Aes(byte[] cipherText, byte[] Key, byte[] IV)
        {
            // Check arguments.
            if (cipherText == null || cipherText.Length <= 0)
                throw new ArgumentNullException("cipherText");
            if (Key == null || Key.Length <= 0)
                throw new ArgumentNullException("Key");
            if (IV == null || IV.Length <= 0)
                throw new ArgumentNullException("Key");

            // Declare the string used to hold
            // the decrypted text.
            string plaintext = null;

            // Create an Aes object
            // with the specified key and IV.
            using (Aes aesAlg = Aes.Create())
            {
                aesAlg.Key = Key;
                aesAlg.IV = IV;

                // Create a decrytor to perform the stream transform.
                ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);

                // Create the streams used for decryption.
                using (MemoryStream msDecrypt = new MemoryStream(cipherText))
                {
                    using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                    {
                        using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                        {

                            // Read the decrypted bytes from the decrypting stream
                            // and place them in a string.
                            plaintext = srDecrypt.ReadToEnd();
                        }
                    }
                }

            }

            return plaintext;

        }
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-03T10:10:19.337

我知道您说过您不关心它的安全性，但是如果您选择[DES](http://en.wikipedia.org/wiki/Data_Encryption_Standard)，您不妨采用[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)，它是更新的加密方法。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-02-22T17:55:57.003

我一直在使用[Mark Brittingham](https://stackoverflow.com/a/212707/1541224)接受的答案，它对我有很大帮助。最近我不得不将加密文本发送到不同的组织，这就是出现一些问题的地方。OP 不需要这些选项，但由于这是一个流行的问题，我发布了我的修改（`Encrypt`以及从[这里](https://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged(v=vs.110).aspx)`Decrypt`借用的功能）：

1.  每条消息都有不同的 IV - 在获取十六进制之前将 IV 字节连接到密码字节。**当然，这是一个约定，需要传达给接收密文的各方。**
2.  允许两个构造函数 - 一个用于默认`RijndaelManaged`值，一个用于指定属性值（基于加密和解密方之间的相互协议）

**这是课程（最后是测试样本）：**

```
/// <summary>
/// Based on https://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged(v=vs.110).aspx
/// Uses UTF8 Encoding
///  http://security.stackexchange.com/a/90850
/// </summary>
public class AnotherAES : IDisposable
{
    private RijndaelManaged rijn;

    /// <summary>
    /// Initialize algo with key, block size, key size, padding mode and cipher mode to be known.
    /// </summary>
    /// <param name="key">ASCII key to be used for encryption or decryption</param>
    /// <param name="blockSize">block size to use for AES algorithm. 128, 192 or 256 bits</param>
    /// <param name="keySize">key length to use for AES algorithm. 128, 192, or 256 bits</param>
    /// <param name="paddingMode"></param>
    /// <param name="cipherMode"></param>
    public AnotherAES(string key, int blockSize, int keySize, PaddingMode paddingMode, CipherMode cipherMode)
    {
        rijn = new RijndaelManaged();
        rijn.Key = Encoding.UTF8.GetBytes(key);
        rijn.BlockSize = blockSize;
        rijn.KeySize = keySize;
        rijn.Padding = paddingMode;
        rijn.Mode = cipherMode;
    }

    /// <summary>
    /// Initialize algo just with key
    /// Defaults for RijndaelManaged class: 
    /// Block Size: 256 bits (32 bytes)
    /// Key Size: 128 bits (16 bytes)
    /// Padding Mode: PKCS7
    /// Cipher Mode: CBC
    /// </summary>
    /// <param name="key"></param>
    public AnotherAES(string key)
    {
        rijn = new RijndaelManaged();
        byte[] keyArray = Encoding.UTF8.GetBytes(key);
        rijn.Key = keyArray;
    }

    /// <summary>
    /// Based on https://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged(v=vs.110).aspx
    /// Encrypt a string using RijndaelManaged encryptor.
    /// </summary>
    /// <param name="plainText">string to be encrypted</param>
    /// <param name="IV">initialization vector to be used by crypto algorithm</param>
    /// <returns></returns>
    public byte[] Encrypt(string plainText, byte[] IV)
    {
        if (rijn == null)
            throw new ArgumentNullException("Provider not initialized");

        // Check arguments.
        if (plainText == null || plainText.Length <= 0)
            throw new ArgumentNullException("plainText cannot be null or empty");
        if (IV == null || IV.Length <= 0)
            throw new ArgumentNullException("IV cannot be null or empty");
        byte[] encrypted;

        // Create a decrytor to perform the stream transform.
        using (ICryptoTransform encryptor = rijn.CreateEncryptor(rijn.Key, IV))
        {
            // Create the streams used for encryption.
            using (MemoryStream msEncrypt = new MemoryStream())
            {
                using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                {
                    using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                    {
                        //Write all data to the stream.
                        swEncrypt.Write(plainText);
                    }
                    encrypted = msEncrypt.ToArray();
                }
            }
        }
        // Return the encrypted bytes from the memory stream.
        return encrypted;
    }//end EncryptStringToBytes

    /// <summary>
    /// Based on https://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged(v=vs.110).aspx
    /// </summary>
    /// <param name="cipherText">bytes to be decrypted back to plaintext</param>
    /// <param name="IV">initialization vector used to encrypt the bytes</param>
    /// <returns></returns>
    public string Decrypt(byte[] cipherText, byte[] IV)
    {
        if (rijn == null)
            throw new ArgumentNullException("Provider not initialized");

        // Check arguments.
        if (cipherText == null || cipherText.Length <= 0)
            throw new ArgumentNullException("cipherText cannot be null or empty");
        if (IV == null || IV.Length <= 0)
            throw new ArgumentNullException("IV cannot be null or empty");

        // Declare the string used to hold the decrypted text.
        string plaintext = null;

        // Create a decrytor to perform the stream transform.
        using (ICryptoTransform decryptor = rijn.CreateDecryptor(rijn.Key, IV))
        {
            // Create the streams used for decryption.
            using (MemoryStream msDecrypt = new MemoryStream(cipherText))
            {
                using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                {
                    using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                    {
                        // Read the decrypted bytes from the decrypting stream and place them in a string.
                        plaintext = srDecrypt.ReadToEnd();
                    }
                }
            }
        }

        return plaintext;
    }//end DecryptStringFromBytes

    /// <summary>
    /// Generates a unique encryption vector using RijndaelManaged.GenerateIV() method
    /// </summary>
    /// <returns></returns>
    public byte[] GenerateEncryptionVector()
    {
        if (rijn == null)
            throw new ArgumentNullException("Provider not initialized");

        //Generate a Vector
        rijn.GenerateIV();
        return rijn.IV;
    }//end GenerateEncryptionVector

    /// <summary>
    /// Based on https://stackoverflow.com/a/1344255
    /// Generate a unique string given number of bytes required.
    /// This string can be used as IV. IV byte size should be equal to cipher-block byte size. 
    /// Allows seeing IV in plaintext so it can be passed along a url or some message.
    /// </summary>
    /// <param name="numBytes"></param>
    /// <returns></returns>
    public static string GetUniqueString(int numBytes)
    {
        char[] chars = new char[62];
        chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".ToCharArray();
        byte[] data = new byte[1];
        using (RNGCryptoServiceProvider crypto = new RNGCryptoServiceProvider())
        {
            data = new byte[numBytes];
            crypto.GetBytes(data);
        }
        StringBuilder result = new StringBuilder(numBytes);
        foreach (byte b in data)
        {
            result.Append(chars[b % (chars.Length)]);
        }
        return result.ToString();
    }//end GetUniqueKey()

    /// <summary>
    /// Converts a string to byte array. Useful when converting back hex string which was originally formed from bytes.
    /// </summary>
    /// <param name="hex"></param>
    /// <returns></returns>
    public static byte[] StringToByteArray(String hex)
    {
        int NumberChars = hex.Length;
        byte[] bytes = new byte[NumberChars / 2];
        for (int i = 0; i < NumberChars; i += 2)
            bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
        return bytes;
    }//end StringToByteArray

    /// <summary>
    /// Dispose RijndaelManaged object initialized in the constructor
    /// </summary>
    public void Dispose()
    {
        if (rijn != null)
            rijn.Dispose();
    }//end Dispose()
}//end class 
```

和..

**这是测试样本：**

```
class Program
{
    string key;
    static void Main(string[] args)
    {
        Program p = new Program();

        //get 16 byte key (just demo - typically you will have a predetermined key)
        p.key = AnotherAES.GetUniqueString(16);

        string plainText = "Hello World!";

        //encrypt
        string hex = p.Encrypt(plainText);

        //decrypt
        string roundTrip = p.Decrypt(hex);

        Console.WriteLine("Round Trip: {0}", roundTrip);
    }

    string Encrypt(string plainText)
    {
        Console.WriteLine("\nSending (encrypt side)...");
        Console.WriteLine("Plain Text: {0}", plainText);
        Console.WriteLine("Key: {0}", key);
        string hex = string.Empty;
        string ivString = AnotherAES.GetUniqueString(16);
        Console.WriteLine("IV: {0}", ivString);
        using (AnotherAES aes = new AnotherAES(key))
        {
            //encrypting side
            byte[] IV = Encoding.UTF8.GetBytes(ivString);

            //get encrypted bytes (IV bytes prepended to cipher bytes)
            byte[] encryptedBytes = aes.Encrypt(plainText, IV);
            byte[] encryptedBytesWithIV = IV.Concat(encryptedBytes).ToArray();

            //get hex string to send with url
            //this hex has both IV and ciphertext
            hex = BitConverter.ToString(encryptedBytesWithIV).Replace("-", "");
            Console.WriteLine("sending hex: {0}", hex);
        }

        return hex;
    }

    string Decrypt(string hex)
    {
        Console.WriteLine("\nReceiving (decrypt side)...");
        Console.WriteLine("received hex: {0}", hex);
        string roundTrip = string.Empty;
        Console.WriteLine("Key " + key);
        using (AnotherAES aes = new AnotherAES(key))
        {
            //get bytes from url
            byte[] encryptedBytesWithIV = AnotherAES.StringToByteArray(hex);

            byte[] IV = encryptedBytesWithIV.Take(16).ToArray();

            Console.WriteLine("IV: {0}", System.Text.Encoding.Default.GetString(IV));

            byte[] cipher = encryptedBytesWithIV.Skip(16).ToArray();

            roundTrip = aes.Decrypt(cipher, IV);
        }
        return roundTrip;
    }
} 
```

[![在此处输入图像描述](https://i.stack.imgur.com/BFsDZ.png)](https://i.stack.imgur.com/BFsDZ.png)

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2015-01-10T14:55:51.977

我认为这是世界上最简单的一个！

```
string encrypted = "Text".Aggregate("", (c, a) => c + (char) (a + 2)); 
```

测试

```
 Console.WriteLine(("Hello").Aggregate("", (c, a) => c + (char) (a + 1)));
            //Output is Ifmmp
 Console.WriteLine(("Ifmmp").Aggregate("", (c, a) => c + (char)(a - 1)));
            //Output is Hello 
```

# c# - 有没有办法计算执行的 IL 指令的数量？

> ID：165809
> 
> 赞同：4
> 
> 时间：2008-10-03T05:43:12.437
> 
> 标签：c#, .net, benchmarking, cil

我想对 C# 进程进行一些基准测试，但我不想将时间用作我的向量——我想计算在特定方法调用中执行的 IL 指令的数量。这可能吗？

**编辑**我不是指对方法体的静态分析——我指的是执行的实际指令数——因此，例如，如果方法体包括一个循环，则计数将增加多少指令up the loop * 循环迭代的次数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-03T15:02:28.850

我认为不可能做你想做的事。这是因为 IL 仅在 JIT（即时）编译期间使用。当方法运行时，IL 已被翻译成本地机器代码。因此，虽然可以静态计算给定方法/类型/程序集中的 IL 指令数量，但在运行时没有这个概念。

您还没有说明您打算知道将被解释的 IL 指令的数量。鉴于方法体的 IL 计数与机器代码指令的实际数量之间只有松散的相关性，我看不出知道这个数字会实现什么（除了满足您的好奇心）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T06:22:24.650

好吧，这并不容易。我*认为*您可以使用在 IL 块之后执行的性能计数器代码来检测您的程序集后编译。例如，如果您有一部分方法将 int 加载到堆栈上，然后在优化代码下使用该 int 执行静态方法，您可以记录 int 加载和调用的计数为 2。

即使使用现有的 IL/托管程序集读/写项目，这也是一项非常艰巨的任务。

当然，您的计数器记录的一些指令可能会在即时编译到 x86/ia64/x64 期间被优化掉，但这是您尝试基于像 IL 这样的抽象语言进行分析时必须承担的风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T06:25:05.957

您可以使用具有托管接口的[ICorDebug 。](http://blogs.msdn.com/jmstall/archive/2004/09/30/236281.aspx)在方法的开头设置一个断点，并以编程方式单步执行代码，直到它离开方法。

但是，我不确定该指标会有多大用处，人们倾向于将时间用于此类事情。一些 IL 指令比其他指令更昂贵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T07:08:41.467

我使用[Code Metrics](http://www.codeplex.com/reflectoraddins/Wiki/View.aspx?title=CodeMetrics&referringTitle=Home)添加到 Reflector

> CodeMetrics 加载项分析和计算程序集上的多个代码质量指标。此插件使用 Reflector 来计算经典指标，例如圈复杂度或更直接的指标，例如方法中的局部变量数量。所有结果都可以保存到文件中。

安装插件。选择程序集并加载方法指标。它将向您显示包含 CodeSize、CyclomaticComplexity、# of Instruction 等的网格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T15:14:06.890

我知道你不想要静态计数。但是，每条弧的静态 IL 计数加上弧一起执行的次数会为您提供 IL 计数。您需要为此检测每条弧线，这需要插入一个计数器。

（弧是一系列指令，你不能跳进或跳出。如果你执行第一条指令，你总是会执行最后一条，等等。）

# assertions - 性能断言检查系统的设计

> ID：165811
> 
> 赞同：2
> 
> 时间：2008-10-03T05:43:31.873
> 
> 标签：assertions

对“性能断言检查”系统的设计有何看法？

这个想法是开发人员对他/她的代码做出一些断言，并使用这些断言来测试代码**性能**的演变。使用这样的系统是什么体验？

我当前的块是“将这些以指定语言编写的断言（将根据指定的日志或运行时工具进行检查）翻译成可以执行的 CLR 或程序集或字节码的更好方法是什么？”

目前我已经编写了一个解析器来解析规范并将其保存在数据结构中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T05:54:43.127

我们是否在我们的应用程序中嵌入了性能检查？不会。原因是性能检查本身需要时间，而且我们的应用程序对性能非常敏感。

相反，我们将性能检查作为测试。为此，我们使用 NUnit。对于我们的夜间构建，我们运行测试，我们生成一个日志，其中包含详细的时间数据以及根据我们的要求的通过/失败指示。由于我们将日志保留一段时间——永远用于测试版和生产版本——我们也可以随着时间的推移跟踪性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T06:09:47.240

与 Kevin 类似，我将性能日志放在我的自动化回归测试中，这样我就可以有效地回归测试性能和功能。我们使用[TestComplete](http://www.automatedqa.com/products/testcomplete/)进行自动回归，它会自动完成很多工作。手动添加它的主要原因是在每个检查点比较本次运行与上次运行的结果。这有点像

```
StartTest
InitialiseCounter
'
'
Do some testing
'
'
CheckPoint
GetElapsedTime
Compare ElapsedTime with stored elapsed time from last run
If difference is outside tolerence log an error 
```

（请原谅我的伪代码上的狡猾突出显示）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T10:10:46.000

现在许多语言都有`assert`语句。可以利用它们来验证您生成的断言吗？它们易于编写且易于查找。问题是断言失败意味着您的程序停止。

如果您想在运行时提供断言失败的警告或日志条目，您可以尝试使用 if 语句。

对于这种代码生成，人们经常使用简单的模板工具来生成可以插入到应用程序中的适当源代码。您可以查看 Java 的 Velocity 或 Python 的 Mako 来为您的断言条件生成源代码。

# mono - Mono 的代码覆盖率？

> ID：165814
> 
> 赞同：4
> 
> 时间：2008-10-03T05:45:23.057
> 
> 标签：mono, code-coverage, ncover

当您使用 mcs 编译器时，mono 会创建自己的调试目标，称为 .mdb 文件。

有没有办法在 Mono 中使用 NCover 或其他代码覆盖工具？

一个命令行工具会更好，所以我可以将它添加到我们的持续集成服务器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-03T06:05:52.630

你调查[过monocov](http://www.mono-project.com/Code_Coverage)吗？

# php - 各种 PHP IDE 的优缺点是什么？

> ID：165817
> 
> 赞同：2
> 
> 时间：2008-10-03T05:46:03.647
> 
> 标签：php, ide

这不是“我应该使用哪个 IDE？” 问题，我对文本编辑器不感兴趣，不管它们有多棒（而且我不认为 vim 或 emacs 是一个 IDE，所以......除非你有几天时间来**准确**和血淋淋地解释详细说明如何完全配置，比如 vim，作为 PHP IDE 工作让我们坚持使用大型 GUI IDE）

我已经广泛使用 Zend Studio 和 Eclipse PDT，目前正在试用 NetBeans。我从未使用过 NuSphere。

作为我在这里寻找的那种反馈的一个例子是关于 NetBeans 的评论：我喜欢 NetBeans 的一个地方是它有一些很好的功能，比如“查找用法”，它可以让你突出显示某些东西（类、方法、变量、等）并查看它使用了多少次以及在哪些位置。

这是关于 Zend 的一个： 我不喜欢 Zend Studio 的一件事是它的价格。另一方面，它与 Zend Framework 的集成对于经常使用 ZF 的人来说非常有效。因为我使用这个工具赚了真钱，所以价格不是一个交易破坏者......只是不是首选。

那么，关于这些 IDE 的优缺点有什么好的情报吗？我在 Mac 和 Linux 上，所以在我的情况下，一些仅适用于 Windows 的好的选项不收费，尽管其他阅读本文的人可能想听听它们。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T06:32:13.737

我正在使用 netbeans PHP 6.5beta。它仍然是测试版，但确实令人印象深刻。

*   即时部署到本地测试站点
*   出色的代码完成和帮助
*   多次运行配置
*   轻松远程部署
*   html、css和javascript支持
*   调试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-03T13:00:49.657

我使用 NuSphere PHPEd [http://www.nusphere.com/](http://www.nusphere.com/)非常好（虽然它只是 windows - 他们的网站建议有 mac 和 linux 版本，但这些似乎是在某种 VM 上运行的 windows 版本） .

文本编辑器很好，有很多自定义/自动完成/语法着色等可用。

集成调试器运行良好，具有良好的整体 IDE。甚至还内置了数据库浏览器之类的东西，因此您可以直接从 IDE 处理大部分内容。

忽略他们声称他们的特别折扣价将于明天结束的说法。它已经在明天结束了至少2年了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-04T02:11:04.867

[我使用来自http://www.zend.com/en/community/pdt](http://www.zend.com/en/community/pdt)的 PDT

我的设置包括以下内容：

*   PDT ( [http://www.zend.com/en/community/pdt](http://www.zend.com/en/community/pdt) )
*   ZendDebugger.so 用于调试（来自[http://www.zend.com/en/community/pdt](http://www.zend.com/en/community/pdt)）
*   用于 JS、CSS、XML 等的 Aptana 插件（[来自 Aptana.com](http://www.aptana.com/docs/index.php/Plugging_Aptana_into_an_existing_Eclipse_configuration)）
*   SVN 插件

这就是我喜欢 IDE 而不是文本编辑器的原因

1.  代码导航。我希望能够使用击键进入我的光标所在的函数/方法/var 的定义
2.  代码完成
3.  docblock 完成（启动 /** 模式将触发插件存根 docblocks）
4.  漂亮的语法高亮
5.  项目和课程大纲
6.  快速文件启动器/搜索器
7.  快速“grep”的索引项目文本
8.  并且，当然，逐步调试

PDT + Aptana + Zend Debugger 为我提供了所有这些，并大大提高了我的工作效率

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-04T11:15:46.700

既然您确实建议我们可以谈论 Windows IDE 的...

我会建议[PHPEdit](http://www.phpedit.com/)。它是在 Delphi 中为最后 2 个版本开发的。然而，最新版本（3.0）已在 .NET 中重新编码，并将在 3.2 版左右的某个时候移植到 Mono。这意味着 Windows/Linux/MacOS 兼容性。

功能集，无耻地从网站复制：

*   [语法高亮](http://www.phpedit.com/Features/Better-code-understanding/Syntax-Highlighting)
*   [代码浏览器](http://www.phpedit.com/Features/Better-code-understanding/Code-Browser)

[代码浏览器 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code-browser/2607-1-fre-FR/code-browser.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code-browser/2607-1-fre-FR/code-browser.png)

*   [工具栏导航器](http://www.phpedit.com/Features/Better-code-understanding/Toolbar-Navigator)

[工具栏导航器 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/toolbar_navigator/2603-2-fre-FR/toolbar_navigator.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/toolbar_navigator/2603-2-fre-FR/toolbar_navigator.png)

*   [代码美化器](http://www.phpedit.com/Features/Better-code-understanding/Code-Beautifier)

[代码美化器 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code_beautifier/2683-1-fre-FR/code_beautifier.gif](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code_beautifier/2683-1-fre-FR/code_beautifier.gif)

*   [跳转到声明](http://www.phpedit.com/Features/Better-code-understanding/Jump-to-declaration)

[跳转到声明 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/jumptodeclaration/2687-2-fre-FR/JumpToDeclaration.gif](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/jumptodeclaration/2687-2-fre-FR/JumpToDeclaration.gif)

*   [统一码](http://www.phpedit.com/Features/Better-code-understanding/Unicode)

[Unicode http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/unicode/2611-1-fre-FR/unicode.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/unicode/2611-1-fre-FR/unicode.png)

*   [代码洞察](http://www.phpedit.com/Features/Write-code-faster/Code-Insight)

[代码洞察 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code_insight/2615-1-fre-FR/code_insight.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code_insight/2615-1-fre-FR/code_insight.png)

*   [代码提示](http://www.phpedit.com/Features/Write-code-faster/Code-Hint)

[代码提示 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code_hint/2619-1-fre-FR/code_hint.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code_hint/2619-1-fre-FR/code_hint.png)

*   [键盘模板](http://www.phpedit.com/Features/Write-code-faster/Keyboard-Templates)

[键盘模板 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/keyboardtemplate/2691-1-fre-FR/KeyboardTemplate.gif](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/keyboardtemplate/2691-1-fre-FR/KeyboardTemplate.gif)

*   [代码片段](http://www.phpedit.com/Features/Write-code-faster/Code-Snippets)

[代码片段 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code_snippets/2623-1-fre-FR/code_snippets.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/code_snippets/2623-1-fre-FR/code_snippets.png)

*   [自动完成](http://www.phpedit.com/Features/Write-code-faster/Auto-Complete)

[自动完成 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/autocomplete/2695-1-fre-FR/AutoComplete.gif](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/autocomplete/2695-1-fre-FR/AutoComplete.gif)

*   [调试器](http://www.phpedit.com/Features/Enhance-quality/Debuger)

[调试器 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/debug/2627-1-fre-FR/debug.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/debug/2627-1-fre-FR/debug.png)

*   [探查器](http://www.phpedit.com/Features/Enhance-quality/Profiler)

[探查器 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/profiler/2635-1-fre-FR/profiler.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/profiler/2635-1-fre-FR/profiler.png)

*   [使用 PHPUnit 进行单元测试](http://www.phpedit.com/Features/Enhance-quality/Unit-tests-with-PHPUnit)

[使用 PHPUnit 进行单元测试 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/phpunit2/2631-1-fre-FR/phpunit.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/phpunit2/2631-1-fre-FR/phpunit.png)

*   [语法检查器](http://www.phpedit.com/Features/Enhance-quality/Syntax-checker)

[语法检查器 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/syntaxchecker/2699-1-fre-FR/SyntaxChecker.gif](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/syntaxchecker/2699-1-fre-FR/SyntaxChecker.gif)

*   [可视化 SQL 查询生成器](http://www.phpedit.com/Features/Enhance-quality/Visual-SQL-query-builder)

[可视化 SQL 查询构建器 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/visual_query_builder/2639-1-fre-FR/visual_query_builder.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/visual_query_builder/2639-1-fre-FR/visual_query_builder.png)

*   [完全可定制](http://www.phpedit.com/Features/Work-your-way/Fully-customizeable)
*   [高级项目管理](http://www.phpedit.com/Features/Publish-your-projects/Advanced-project-management)

[高级项目管理 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/solution_explorer/2663-1-fre-FR/solution_explorer.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/solution_explorer/2663-1-fre-FR/solution_explorer.png)

*   [数据库管理](http://www.phpedit.com/Features/Publish-your-projects/Database-management)

[数据库管理 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/db/2667-1-fre-FR/db.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/db/2667-1-fre-FR/db.png)

*   [FTP-SFTP](http://www.phpedit.com/Features/Publish-your-projects/FTP-SFTP)

[FTP-SFTP http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/ftp2/2671-1-fre-FR/ftp.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/ftp2/2671-1-fre-FR/ftp.png)

*   [CVS 子版本](http://www.phpedit.com/Features/Publish-your-projects/CVS-SubVersion)

[CVS-SubVersion http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/cvs_svn/2675-1-fre-FR/cvs_svn.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/cvs_svn/2675-1-fre-FR/cvs_svn.png)

*   [PHP 文档](http://www.phpedit.com/Features/Publish-your-projects/PHP-Documentor)

[PHP 文档 http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/phpdoc/2679-1-fre-FR/phpdoc.png](http://www.phpedit.com/var/ezwebin_site/storage/images/media/images/phpdoc/2679-1-fre-FR/phpdoc.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-03T05:52:58.607

我喜欢 ZEND，显然他们在开发 PHP IDE 方面有很大的优势，因为 ZEND 是 PHP，但你说得对，价格很糟糕。我最喜欢 Zend 的功能之一是 F5，用于查看是否产生任何错误以及代码是否输出正确的输出。
我用PHPDesigner很久了，才买得起Zend，智能好，语法高亮略好，IMO，然后是Zend的，我喜欢它的打印功能，它会打印带有高亮的代码和行号, 和每页上的文件名，当您找不到该错误并拥有纸质副本时，这将非常有用。更不用说有免费版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-03T13:41:17.907

Zend Studio 的 PHP 代码完成和调试功能是目前最好的。如果您有在线分析和调试，它还可以与 Zend 平台交互。但是，版本 6（Eclipse 的工作室）至少可以说是不稳定的 - 我仍在使用工作室 5.5。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-03T15:22:58.917

1.  调试
2.  调试
3.  调试

任何人都可以在没有良好调试的情况下开发大型应用程序，这超出了我的理解。当您依赖第三方库等时，有时唯一的方法是逐行遍历它并查看它在哪里中断。我说这句话的感觉是昨晚刚刚花了 4.5 小时处理 CakePHP 中的代码更新，破坏了我已经工作了几个月的项目的所有单元测试。

所以，很抱歉对此很难，但我不会考虑任何没有出色远程调试的 IDE——可能是 XDebug。具有良好调试功能的 IDE 包括（据我所知）：

*   Komodo IDE - 我的个人选择
*   蚀
*   禅德工作室
*   玛古玛

哦，至于 IDE 的价格。我喜欢开源软件的自由和价格。我在 Linux 上开发，主要使用免费软件部署到 LAMP 堆栈。然而，作为一个以编写代码为生的人，我没有任何问题可以使用合适的工具来完成这项工作。如果可以节省几个月的时间，IDE 上的几百美元就是小啤酒。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-03T11:59:39.140

## 更新

我已经切换到[Netbeans](http://netbeans.org/)并且没有回头 :)

## 原来的

我使用[Komodo Edit](http://activestate.com/Products/komodo_ide/komodo_edit.mhtml)，原因如下：

*   免费/开源
*   自动完成和呼叫提示
*   项目管理
*   支持几乎所有主要（和一些非主要）语言
*   类似 Firefox 的插件/扩展
*   宏
*   Zend 框架集成
*   [查看完整的功能列表...](http://activestate.com/Products/komodo_ide/edit_features.mhtml)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-03T19:09:43.483

我最近开始使用[Aptana Studio](http://www.aptana.com/)社区版，主要原因是它在 Javascript、CSS、HTML 和 PHP 中的代码完整能力。在此之前，我使用[phpDesigner 2008](http://www.mpsoftware.dk/)。另一个原因是价格。 [Aptana](http://www.aptana.com/)在免费软件版本中有我需要的东西，如果我需要更多，我可以付费。

我使用 Zend 有一段时间，但价格让我窒息，而且试用期短得可笑。我发现[phpDesigner 2008](http://www.mpsoftware.dk/)相当不错，但是当我看到 Aptana 时，我质疑为什么我应该每年支付 40 美元来获得我在 Aptana 中可以免费拥有的东西。

我也是极简主义程序员之一，不关心庞大的功能集，但我确实喜欢语法高亮和智能代码完成。我对 Aptana 的唯一抱怨是它不支持 PHPTAL 模板，因此会破坏实体，而且它是用 Java 编写的。我更喜欢不是用解释语言编写的 IDE，因为它们的速度很快。但是，Aptana 非常高效，甚至可以在我的旧 1.6ghz 工作笔记本电脑上运行。

试试看。下载并免费测试它不会有什么坏处。集成调试是软件包的一部分。

对于喜欢 Eclipse 的人来说，Aptana 构建在 Eclipse 之上，实际上只是用于 Web 开发的专用 Eclipse 版本。我自己还没有尝试过完整的 Eclipse 工作室。

# architecture - 事务排队/出队

> ID：165828
> 
> 赞同：5
> 
> 时间：2008-10-03T05:50:11.437
> 
> 标签：architecture, transactional, queuing

我需要以可靠/事务的方式为外部系统排队事件和任务。使用 MSMQ 或 ActiveMQ 之类的东西看起来很诱人，但事务部分变得复杂（MSDTC 等）。

我们可以使用数据库（SQL Server 2005+、Oracle 9+）并实现更轻松的事务支持，但排队部分变得更丑陋。

这两条路线似乎都不是那么好，并且充满了令人讨厌的陷阱和极端情况。

有人可以在这件事上提供一些实用的指导吗？

想一想：E/C/A 或者一个定时任务引擎，每隔一段时间就会唤醒，看看此时是否有定时任务需要运行（即 next-run-date 已经过了，但是 expire-date 还没到到达）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-03T06:13:17.153

我们的系统有 60 台计算机，每台计算机运行 12 个任务（线程），需要“获得下一个工作”。总而言之，每天有 5 万个“工作”。计算每分钟有多少事务并意识到任务时间是可变的，因此可以同时获得多个“弹出”事件。

我们的第一个版本使用 MSMQ。结论：**远离**。虽然它在负载和同步问题上做得很好，但它有两个问题。一个烦人，一个破坏交易。

*烦人：*作为企业软件，MSMQ 具有安全需求，这使得设置和与客户网络管理员进行斗争成为另一件事。

*交易破坏者：*然后是我们想要接受下一份工作的时候了，但不是使用简单的流行音乐，而是使用“获得下一个蓝色工作”或“获得下一个黄色工作”之类的东西。做不到！

我们采用了 B 计划：使用单个 SQL 2005 表实现了我们自己的 Q。**不能更快乐**

我强调每天用 20 万条消息对其进行测试，成功了。我们可以根据需要使“下一个”逻辑变得复杂。

问题：您需要非常小心获取下一项的 SQL。因为您希望它快速且非锁定。根据一些研究，我们使用了2 个非常重要的 SQL**提示。**魔法是这样的：

```
SELECT TOP 1 @Id = callid
FROM callqtbl WITH (READPAST, XLOCK)
where 1=1 ORDER BY xx,yy 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-03T06:11:25.863

我已经看到 MSMQ 以事务方式使用，它似乎并不特别复杂 - 事务 SCope 将入队或出队调用与数据库访问一起包装，只要队列在创建后被定义为事务性，一切都很好。我认为 ActiveMQ 不是这样，它是一个消息代理，但 MSMQ 本地安装在每个端点机器上，因此将项目以事务方式放入队列不需要花哨的分布式事务。

您可能已经意识到这一点，但是在 .NET 上，有一些轻量级库提供了一些对 MSMQ 的很好的抽象（理论上还有其他传输）

nServiceBus : [www.nservicebus.com](http://www.nservicebus.com)

公共交通：[http ://code.google.com/p/masstransit/](http://code.google.com/p/masstransit/)

此外，Oren Eini 有一个有趣的基于实验性文件系统的事务队列。这个库的好处是，与 MSMQ 不同，它可以作为库部署，并且不需要部署 MSMQ 的维护头痛。

你可以在这里阅读：http: [//ayende.com/Blog/archive/2008/08/01/Rhino.Queues.Storage.Disk.aspx](http://ayende.com/Blog/archive/2008/08/01/Rhino.Queues.Storage.Disk.aspx)

此外，SQL Server 2005 确实使用 SQL Server Service Broker 相当优雅地处理队列，但您需要在每个端点上安装 SQL Server，而且我不知道 SSB 是否穿过防火墙。

最后，如果你在这里没有得到你想要的答案，我强烈推荐 nSERviceBus 讨论论坛。Udi Dahan 和他的一小群面向消息的追随者一起回答了这些问题，这是迄今为止我发现的最好的资源，可以快速有效地回答我的面向队列的问题。该论坛在这里：[http ://tech.groups.yahoo.com/group/nservicebus/](http://tech.groups.yahoo.com/group/nservicebus/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T05:52:15.830

[Quartz.Net](http://quartznet.sourceforge.net/)是一个开源的作业调度系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T07:40:27.740

这就是 MSMQ 的设计目的——事务排队。如果这对您不起作用，请查看 SQL Server 的“服务代理”功能 - 它是“csmba”在他的回答中描述的“SQL 表中的队列”，但它是一个集成的 SQL Server 组件，封装得很好并暴露给您使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T05:52:18.950

WebSphere MQ（MQ 系列）是一种选择吗？支持事务性消息传递。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-08T20:57:37.687

您可以查看名为[Advanced Queuing的 Oracle 功能](http://download-west.oracle.com/docs/cd/B10500_01/appdev.920/a96587/qintro.htm)

# continuous-integration - 每日构建与零缺陷

> ID：165831
> 
> 赞同：14
> 
> 时间：2008-10-03T05:51:09.873
> 
> 标签：continuous-integration, development-environment

您如何进行日常构建并努力实现零缺陷环境？这是否意味着在我杀死新代码中的所有错误之前，我永远无法回家？或者这是否意味着在我完全测试完代码之前我不会重新检查我的代码，这会使代码有效地分支更长的时间？

我是第一次与少数程序员一起工作（而不是独自工作，或者只与其他编码员一起工作），所以我只是第一次为这样的决定而苦苦挣扎。我们应该采用软件开发流程吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-03T05:56:10.253

简单：永远不要签入带有**（已知）**错误的代码。这并不意味着您每天签到一次。当您实施了有意义的更改时签入，以便其他开发人员可以访问它。

我们总是在本地集成，针对代码运行我们的测试，当一切都通过时，我们签入。我每天工作时签入大约 20-30 次。构建服务器获取更改并针对系统运行构建。持续集成 (CI) 是一件好事。:D

## 持续集成 - 自动化您的构建

从成功构建开始，并尽可能保持这种状态。这在团队环境中是必不可少的。请记住，构建会中断。预计它们每隔一段时间就会破裂。这表明您只是无意中签入了一些不好的东西，并且您停止了正在执行的操作以使构建再次变绿。从未破坏过构建的构建服务器是一个警告信号！

我也同意 chadmyers 的回答：无论您决定什么，都需要自动化和自动化。自动化工具为你做这类事情的最好的事情是你不再需要考虑或记住去做。或者就像乍得说的，你不要停止这样做。我可以推荐推荐 CI 工具，但请看这里：[您使用哪些工具进行自动构建/自动部署？为什么？](https://stackoverflow.com/questions/99535/what-tools-do-you-use-for-automated-builds-automated-deployments-why)

一旦你有了 CI，如果你可以通过引入一个损坏的构建令牌来注入一些幽默（和羞耻），你可以获得更高的质量！[http://ferventcoder.com/archive/2008/08/20/continuous-integration-enhancement--the-broken-build-token.aspx](http://ferventcoder.com/archive/2008/08/20/continuous-integration-enhancement--the-broken-build-token.aspx)

## 使用好的工具进行自动化构建

.NET 领域的大多数人使用 NAnt 或 MSBuild 脚本来进行自动化构建，以后可以连接到他们的 CI 服务器。如果你刚刚开始，我的建议是使用[UppercuT](http://code.google.com/p/uppercut/)，它是一个非常容易使用的使用 NAnt 的构建框架。这是第二个链接，有更深入的解释：[UppercuT](http://ferventcoder.com/category/10094.aspx)。

## 主动开发的分支与主干

除非您只为发布版本打开主干（这意味着其他所有人都与您在同一个分支中工作），否则您不必分支。但我会在主干和活动开发分支上都有 CI。

## 软件开发过程

同样要回答有关软件开发过程的问题，答案是肯定的。但是，除非需要进行剧烈的改变，否则不要急于求成。选择一个您想要迁移的流程，然后慢慢开始采用流程。评价，评价，评价。如果特定过程不适用于您的团队，请确定您是否做错了什么，或者您是否只需要消除它。然后做。无论您最终采用哪种流程，都需要为您工作，否则它将无法正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-03T06:03:18.427

是的，请采用软件开发流程。那里有很多种，我相信其中不止一种适合您的团队。即使是不完美的匹配也比没有过程要好得多。

那么，我的公司如何进行日常构建并努力实现零缺陷呢？我们在签入代码之前运行我们的测试套件。对我们来说唯一的问题是我们的测试套件的完整运行需要超过 72 小时，因此我们在签入代码之前运行了一组有限的单元测试。对于我们的每晚构建，我们运行了一组大约需要 8 小时才能运行的测试。然后在周末我们运行完整的测试套件。每个阶段都会发现越来越多的问题，但超过 90% 的问题是通过 5 分钟的开发人员测试发现的，而可能超过 98% 的问题是在夜间测试中发现的。这仍然会在问题出现给我们的客户之前很早就提醒我们，并且需要花费很多来解决问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-03T06:04:16.007

这意味着进行更小的提交。您提交工作修订的频率越高，您自己的工作副本被破坏的频率就越低。迭代开发从您开始。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-03T06:03:22.717

早整合、常整合、快整合。与其“每日构建”，不如在每次有人提交并经常提交时构建（每天至少一次，最好超过 2 次）。

重要提示：低缺陷需要快速反馈。如果你的构建需要几分钟甚至一个多小时，最终你会讨厌这个构建，学会避免它，尽可能少地运行它等等。它的价值迅速下降到毫无价值的地步，你的缺陷数将开始暴涨。

预先花一些时间让您的构建快速运行。如果有慢的东西，找出它慢的原因并消除它。如果你不能，那么至少设置一个级联构建，以便构建的其余部分快速进行（认为 <2-5 分钟）并且长时间运行的东西可以在之后立即跟进并花费尽可能长的时间（尽管尝试保持在 10m 以下）。

怎么说都不过分：关于变更的快速反馈周期非常重要！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-03T06:05:27.953

诀窍是尽可能多地签到，只是通过了一些测试，很好地签到！修复了一个错误，请检查！尝试找到可能的最小增量并检查它！这实际上使编写实际相关的签入评论成为可能和方便，这是一个不错的好处。

当然，这要求你有一个比每晚更频繁地构建的 CI 环境，尽可能多地构建确实是那里的最佳选择。

哦，记住，如果它*永远不会*破裂，那么你做错了。（即你过于保守，时不时地有点破损，这只是表明你希望推动它。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-03T05:58:52.383

如果你不回家，直到你所有的缺陷都消失了，那么你永远不会回家。

我对此的想法是，日常构建应该在某些时候自动化。在此之前未签入的任何代码都不会构建，如果连续 2 天（构建）没有某人签入，则构建系统应通知他们和技术负责人，因为这是一个警告信号。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-03T05:59:44.957

一种可能更实用的方法是在主干上实现零缺陷，并为所有开发分支，然后在主干和分支上都可以进行每日构建，但零缺陷不适用于开发分支。

虽然让您的分支破坏其构建可能仍然存在一定程度的耻辱，但它比破坏主干问题更小。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-21T14:26:28.557

关于零缺陷策略：如果您的代码中有已知的错误，您可以回家。更重要的是，在实现新功能之前应该修复缺陷。

这不一定适用于整个团队，但如果开发人员分配了一个错误，则该错误优先于该开发人员必须创建的新功能。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-09T08:16:18.223

浏览答案，我很惊讶没有人提到测试驱动开发。如果您的目标是零缺陷，那么这是最好的起点。

在那之后，我强烈推荐结对编程。

终于明白像 CruiseControl 这样的工具是有用的，但正如 Jim Shore 所说，[持续集成是一种态度，而不是一种工具](http://jamesshore.com/Blog/Continuous-Integration-is-an-Attitude.html)。保持代码正常工作的团队承诺是关键。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-03T07:01:11.703

根据您正在构建的内容，采用不允许缺陷的方法可能不合适。我个人的看法是，它很少，如果有的话。

缺陷管理系统的重点正是——允许您管理缺陷。如果缺陷是一个停止展示的缺陷，那么您可能不想检查它，但如果它是次要的或边缘情况，那么只要您检查它与已知缺陷一起检查它可能是有意义的重新跟踪它。

允许缺陷存在可以让您专注于更重要的事情 - 例如，如果您在发布中只有有限的时间，您可能没有时间修复所有内容以及获取所有功能，所以如果它是修复之间的选择十个极端情况的小错误，或者创建一个增值功能，那么务实的选择可能是附带已知的错误。

我并不是说零缺陷是一个坏主意——事实上，我们在每个发布周期结束时都在努力实现这一点——但就像软件开发中的许多事情一样，实用主义在现实世界中通常比清教主义更有效。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-03T07:01:55.647

我会在 CI 参数上使用@feverentcoder。CI是你的朋友，让他帮你！

至于 Branch/Trunk 点 - 每个人都应该始终在**主干**上工作，**分支**es 用于峰值和 POC，**标记**所有版本

在流程方面，找到与您相关的*实践*然后围绕它们构建微流程通常是有益的。此外，仅使用那些您认为可以提高生产力的做法/流程。最后，要勇敢——尝试一两个星期的练习，看看它是否适合你；如果没有，就把它扔掉。你刚刚又学会了一种**不**制作灯泡的方法！

# site-mining - 现场挖掘工具

> ID：165840
> 
> 赞同：2
> 
> 时间：2008-10-03T05:53:52.957
> 
> 标签：site-mining

这里提出的许多问题都与我正在进行的研究有关。这些问题和答案分布广泛，并不总是很容易找到，进行手动浏览，有时也会在不相关的主题中出现有见地的答案或评论。

我想根据关键字集自动查找这些相关的问答，然后将这些信息用作进一步深入研究的指针。

我可以使用哪些工具（最好是开源工具）来进行这种类型的站点挖掘？我不是网络专家，对我来说，尝试开发它们需要很长时间，而且还会影响我本可以花在研发上的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T06:28:33.577

另一种选择是使用[Yahoo! 管道](http://pipes.yahoo.com/pipes/)。（[演示](http://www.jumpcut.com/fullscreen?id=F4396574585311DC87A2000423CF0184&type=clip)）

您可以结合使用提要 url、过滤器等在线可视化地构建这样的系统...与编程相比，学习时间最短。[编辑：时态]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-04T07:37:28.763

从您的问题中不清楚您是否是程序员，所以我不确定您是否在追求您想要的应用程序或服务意义上的工具，或者一个使站点挖掘更容易的库。

如果是后者并且您使用 ruby​​，我可以彻底推荐[WWW::Mechanize](http://mechanize.rubyforge.org/)。它提供了一个很好的 API，用于编写脚本来搜索网页（通过 DOM 或文本）、跟踪链接和填写表单。我已经多次使用它来组织分布在站点内多个网页上的信息。

我相信 ruby​​ 版本是基于早期[的 perl 库，](http://search.cpan.org/dist/WWW-Mechanize/)但我不能保证我没有使用过的 perl 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T06:16:35.930

在这种情况下，人机交互工具可能很有用（没有开发成本，可能更一致的结果，以及不断变化的需求）。

想到了情侣：

*   [机械土耳其人](https://requester.mturk.com/mturk/welcome)。
*   [Time Svr](http://www.timesvr.com/)（更贵）-[实验/审查](http://sidsavara.com/personal-productivity/can-virtual-assistants-make-you-more-productive-an-experiment)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T06:20:27.713

所有基于关键字的标签都附有 RSS 提要，所以我会先订阅相关关键字并搜索数据。这似乎是查找相关概念和其他相关关键字的最简单方法。

# java - Maven 2 的最佳企业存储库工具？

> ID：165846
> 
> 赞同：16
> 
> 时间：2008-10-03T05:57:20.670
> 
> 标签：java, maven-2, build-automation, devtools

SO 上的其他一些问题和答案赞扬了使用企业存储库工具（如 Archiva、Artifactory 或 Nexus）的优点。各自的优缺点是什么？我如何在它们之间进行选择？

如果有帮助：

*   我们同时使用 Maven 1 和 Maven 2（至少有一段时间）
*   我们希望存储内部生成的工件、公开可用的工件（ibiblio、codehaus 等）和专有的工件（例如 Sun 的许可 JAR，如 Servlet API）。
*   我们想要在 Windows、Linux 或两者上运行的东西。
*   我们使用 Luntbuild 作为我们的 CI 服务器（但打算在一段时间内迁移到 Hudson）。

注意这个问题不是[这个](https://stackoverflow.com/questions/161819/what-are-mainbest-maven-respositories-to-use)或[这个](https://stackoverflow.com/questions/157463/host-maven-repository)的重复。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-03T11:40:33.313

我们使用 Archiva 已经有一段时间了，并且对它很满意。我们最近更换了硬件，并决定试用 Nexus，因为我们读到了一些关于它的好东西。我们不知道我们在 Archiva 中缺少什么，但 Nexus 要好得多。存储库方面更容易，因为它将所有存储库“分组”到一个 url 中，以便于 settings.xml 配置。此外，该网站非常棒——轻松搜索工件，甚至搜索全球中央存储库，而无需将其全部下载到您的代理。我强烈推荐 Nexus！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-13T22:19:01.900

我已经使用 Archiva 一年多了，发现它满足了所有基本要求，但是，我们仅限于 Windows 服务器，因此发现了一些限制并且内存占用很大。

然而，我们开始寻找替代方案的主要原因是将工件上传到 Web 上的 Maven 存储库中不存在的存储库（例如一些 Sun 或 IBM jar 文件）的痛苦过程。

大约两个月前，我们切换到了 Nexus，它干净的界面、易用性和一般的非侵入性给我们留下了深刻的印象。上传新工件轻而易举，而且我们没有遇到任何问题。我们一直在使用 Mule 和 CXF，因此我们不得不从旧版 (Maven1) 和标准 (Maven2) 存储库下载 - 这些存储库设置简单，几乎不需要（如果有的话）管理。

Nexus 网站上的免费 PDF 文档非常棒（如果您愿意，您也可以购买硬拷贝版本）。

我在 Windows（工作）和 Linux（在家）上都使用过它，没有任何问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-27T11:31:31.327

我们曾经使用 artifactory，但不久前改用了 nexus。主要问题是 Artifactory 使用的磁盘空间不断增长，我们无法找到阻止它的方法。我们现在对 nexus 感到非常满意。这是一个很棒的 UI，易于在 settings.xml 中配置，并且易于作为服务进行管理。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-03T06:05:50.713

我已经使用 Archiva 一年多了，对它的可靠性和性能非常满意。

Archiva 和 Artifactory 都以 .war 文件的形式提供，因此您可以将它们部署在应用程序服务器上。

与 Artifactory 相比，Archiva 的优势之一是它可以与 Continuum 共享其用户数据库。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-26T19:42:00.643

在我们公司，我们选择了 Maven 2 和 Nexus .. 太棒了 :) （和你的情况一样）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-28T09:43:55.197

我们从 Archiva 切换到 Nexus，因为我们在 SQL 支持方面遇到了太多问题。使用 MySQL，我们在关机后出现了数据库损坏 ;(

一旦 Nexus OSS 作为一个简单的战争可用（在我们的 Tomcat 农场上非常有用），我们就使用它并且对它非常满意。比 Archiva 可靠且速度更快。

# .net - C# 中的动态数据库绑定

> ID：165848
> 
> 赞同：3
> 
> 时间：2008-10-03T05:57:46.800
> 
> 标签：.net, database

我在这里有一个项目，它连接到生产中的数据库并获取表和视图。我继承的代码通过 SqlConnection 连接到 SQL Server 数据库，使用用户提供的凭据和他们提供的数据库位置。当需要数据时，它使用连接和 SQL 字符串创建一个 SqlDataAdapter，并填充一个全新的 DataSet。然后在处理数据后显示该数据，用适当的显示名称替换表列名称，诸如此类。

问题是，整个过程很慢，锦上添花的是它在ListViews中显示了大量的数据，对一万行数据不友好。出于设计原因，我们不会闯入页面 - 有一个搜索控件 - 我可以努力实现一个虚拟 ListView 以简单地回到我原来的位置。我只是认为这是 ListViews 的错误应用程序 - 我正在连接到数据库，并且正在显示记录。听起来像是 DataGridView 的工作。

可悲的是，它根本*行不通*。我正在尝试将 DataGridView 绑定到通过 DataBinder 从连接代码中获得的 DataSet，但是当我启动它以查看 DataGridView 完全为空时数据位于 DataSet 中时。

但是，如果我在我的测试数据库上使用 GUI 绑定，获取当前的数据库模式和我的凭据，你瞧，它是一种享受。但是我不能使用这些东西，因为它不够灵活——我不想在每次更新数据库时都必须更改的代码中定义一个模式，并且我需要访问连接字符串，并且我似乎没有从它创建的 TableAdapter 中得到它。

我是否在这里遗漏了一些简单的东西来使我的 DataSet/BindingSource 解决方案工作？我在吠叫错误的树吗？

无论如何，它甚至值得摆弄绑定吗？我能看到的所有绑定内容似乎让我完成了 90% 的工作，但是我无法修改连接字符串或按我想要的方式对特定列进行排序，而且似乎希望我给它一个定义的模式一旦数据库发生变化，它就会中断 - 而手写代码至少是防御性设计的并且非常灵活。我没有削减功能，而且缓慢的解决方案已经奏效——如果我必须放弃一些要求才能让它工作，我们将只处理我们所拥有的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T06:01:52.983

我不确定您是否根本无法更改查询，或者只是在您在帖子末尾提到的情况下。

但如果可以的话，我建议实现某种分页，并且只检索数据用户所在的特定页面的行。这会在性能上产生巨大的差异，特别是如果结果集和你说的一样大。在我看来，这可能是你可以做出的最大的性能提升改变。您可以保留当前工作的列表视图实现。此外，即使您有一个填充了自己的查询的网格，您仍然需要某种分页策略，否则也会很慢。

我刚刚抓了一篇关于实施的[随机文章](https://web.archive.org/web/1/http://blogs.techrepublic%2ecom%2ecom/programming-and-development/?p=638)，但你可以找到[很多其他的](http://www.google.ca/search?hl=en&q=SQL+implementing+paging&meta=)

编辑：关于您更新的问题，我回答的重点是，如果它没有损坏，请不要修复它。如果列表视图现在可以工作，为什么要更改它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T07:26:39.037

只要您指定了表名，它就应该可以正常工作（否则使用 IIRC 第一个表）。当然，您可以通过将适当的 DataTable（而不是 DataSet）提供给 DGV 来简化事情。您可能还想检查 DGV 上是否启用了自动列生成。但是绑定到 ad-hoc DataTable 可以正常工作；我一直将它用于示例等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T06:19:00.087

在设计器中打开您的数据集，单击适配器，并将连接更改为公共（默认为内部），然后您可以访问它

至于您的其他问题，请向我们展示 codez - datagridview 上的数据绑定工作正常 AFAIK...

# linux - Apache 配置帮助——为什么不同的进程“在”不同的时区？

> ID：165866
> 
> 赞同：2
> 
> 时间：2008-10-03T06:06:22.490
> 
> 标签：linux, apache, apache2, timezone, debian

我在 VPS 服务器（运行 Debian）上运行 Apache 2。我最近将服务器上的时区（使用 dpkg-reconfigure tzdata）从 America/New_York 更改为 America/Los_Angeles 以匹配我在全国范围内的移动。进行更改后，我还重新启动了虚拟机。

但是，Apache 进程似乎在时区之间来回移动。请参阅 access_log 中的此片段：

```
127.0.0.1 - - [02/Oct/2008:23:01:13 -0700] "GET /favicon.ico HTTP/1.0" 301 - "-" "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.0.3) Gecko/2008092414 Firefox/3.0.3"
127.0.0.1 - - [03/Oct/2008:02:01:25 -0400] "GET /tag/wikipedia/?page=1 HTTP/1.0" 200 5984 "-" "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"
127.0.0.1 - - [03/Oct/2008:02:01:36 -0400] "GET /index.atom HTTP/1.0" 200 7648 "-" "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.0.2) Gecko/2008091618 Firefox/3.0.2"
127.0.0.1 - - [03/Oct/2008:02:01:45 -0400] "GET /tag/moblog/ HTTP/1.0" 200 6563 "-" "msnbot/1.1 (+http://search.msn.com/msnbot.htm)"
127.0.0.1 - - [02/Oct/2008:23:01:46 -0700] "GET /tag/opensource/ HTTP/1.0" 200 5954 "-" "msnbot/1.1 (+http://search.msn.com/msnbot.htm)"
127.0.0.1 - - [03/Oct/2008:02:01:56 -0400] "GET /tag/dopplr/ HTTP/1.0" 200 3407 "-" "msnbot/1.1 (+http://search.msn.com/msnbot.htm)" 
```

它从 23:01 跳到 02:01 并返回。知道如何保持一致吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-02T04:50:13.820

事实证明，我在这个 Apache 实例上运行了两个 Django 项目，其中一个我固定指向 America/Los_Angeles，但另一个我留下了。根据创建新 Apache 进程时首先访问的应用程序，它会弄乱时区！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-03T06:41:52.280

您是否有任何机会使用 ntpd 并且您与之同步的对等点很不稳定？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T06:16:32.560

可能一些 Apache 工作进程是在您更改时区之前启动的，还有一些是在您更改时区之后启动的。自从更改系统时区设置后，您是否完全停止并重新启动了 Apache？

# python - Python 对象属性 - 访问方法

> ID：165883
> 
> 赞同：23
> 
> 时间：2008-10-03T06:18:37.250
> 
> 标签：python, oop, object, attributes

假设我有一个具有一些属性的类。如何最好（在 Pythonic-OOP 中）访问这些属性？就像`obj.attr`？或者也许写 get 访问器？这些东西的公认命名风格是什么？

**编辑：** 您能否详细说明使用单下划线或双下划线命名属性的最佳实践？我在大多数模块中看到使用单个下划线。

* * *

如果这个问题已经被问过（我有预感，虽然搜索没有带来结果），请指出它 - 我将关闭这个问题。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-10-03T09:37:51.120

关于单下划线和双下划线：两者都表示“隐私”的相同概念。也就是说，人们会知道属性（无论是方法还是“普通”数据属性或其他任何东西）不是对象的公共 API 的一部分。人们会知道，直接触摸它会招来灾难。

最重要的是，双前导下划线属性（但不是单前导下划线属性）经过*名称修改，以减少从子类或当前类之外的任何其他地方**意外*访问它们的可能性。您仍然可以访问它们，但不是那么简单。例如：

```
>>> class ClassA:
...     def __init__(self):
...         self._single = "Single"
...         self.__double = "Double"
...     def getSingle(self):
...         return self._single
...     def getDouble(self):
...         return self.__double
... 
>>> class ClassB(ClassA):
...     def getSingle_B(self):
...         return self._single
...     def getDouble_B(self):
...         return self.__double
... 
>>> a = ClassA()
>>> b = ClassB() 
```

您现在可以轻松访问`a._single`并`b._single`获取由以下内容`_single`创建的属性`ClassA`：

```
>>> a._single, b._single
('Single', 'Single')
>>> a.getSingle(), b.getSingle(), b.getSingle_B()
('Single', 'Single', 'Single') 
```

但是尝试直接访问or实例`__double`上的属性是行不通的：`a``b`

```
>>> a.__double
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: ClassA instance has no attribute '__double'
>>> b.__double
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: ClassB instance has no attribute '__double' 
```

尽管在中定义的方法`ClassA`可以直接获取它（在任一实例上调用时）：

```
>>> a.getDouble(), b.getDouble()
('Double', 'Double') 
```

上定义的方法`ClassB`不能：

```
>>> b.getDouble_B()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 5, in getDouble_B
AttributeError: ClassB instance has no attribute '_ClassB__double' 
```

就在那个错误中，您会得到有关正在发生的事情的提示。属性名称，当`__double`在一个类中访问时，被命名为包含它正在被访问的类的*名称*。当`ClassA`尝试访问`self.__double`时，它实际上在编译时变成了对 的访问`self._ClassA__double`，同样是 for `ClassB`。（如果一个方法`ClassB`要分配给`__double`，为简洁起见，没有包含在代码中，因此它不会触及`ClassA`，`__double`而是创建一个新属性。）这个属性没有其他保护，所以如果你仍然可以直接访问它知道正确的名字：

```
>>> a._ClassA__double, b._ClassA__double
('Double', 'Double') 
```

**那么为什么这是一个问题呢？**

好吧，任何时候你想继承和改变任何处理这个属性的代码的行为都是一个问题。您要么必须重新实现直接触及此双下划线属性的所有内容，要么必须猜测类名并手动修改名称。当这个双下划线属性实际上是一个方法时，问题会变得更糟：覆盖该方法*或在子类中调用该方法*意味着手动进行名称修改，或者重新实现调用该方法的所有代码以不使用双下划线名称. 更不用说动态访问属性了，使用`getattr()`: 你也必须在那里手动修改。

另一方面，因为属性只是简单地重写，它只提供表面的“保护”。任何代码仍然可以通过手动修改来获取属性，尽管这会使*它们的*代码依赖于*你的*类的名称，并且你会努力重构你的代码或重命名你的类（同时仍然保持相同的用户可见名称，Python 中的一种常见做法）会不必要地破坏他们的代码。他们还可以通过将它们的类命名为与您的相同来“欺骗”Python 为它们进行名称修改：注意在修改的属性名称中没有包含模块名称。最后，双下划线属性在所有属性列表和所有形式的内省中仍然可见*单*) 下划线。

因此，*如果*您使用双下划线名称，请非常谨慎地使用它们，因为它们会变得非常不方便，并且永远不要将它们用于方法**或子类可能想要重新实现、覆盖或直接访问的任何其他内容**。并意识到双前导下划线名称修饰*没有提供真正的保护*。最后，使用单个前导下划线会赢得同样多的收益，并减少（潜在的、未来的）痛苦。使用单个前导下划线。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-10-03T06:35:37.007

普遍接受的做事方式只是使用简单的属性，就像这样

```
>>> class MyClass:
...     myAttribute = 0
... 
>>> c = MyClass()
>>> c.myAttribute 
0
>>> c.myAttribute = 1
>>> c.myAttribute
1 
```

如果您确实发现自己需要能够编写 getter 和 setter，那么您要寻找的是“python 类属性”，[Ryan Tomayko 关于 Getters/Setters/Fuxors 的文章](http://tomayko.com/writings/getters-setters-fuxors)是一个很好的起点（虽然有点长）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-03T09:23:40.087

> 编辑：您能否详细说明使用单下划线或双下划线命名属性的最佳实践？我在大多数模块中看到使用单个下划线。

单下划线对 python 没有任何特殊意义，这只是最佳实践，告诉“嘿，除非你知道自己在做什么，否则你可能不想访问它”。然而，双下划线使 python 在内部修改名称，使其只能从定义它的类访问。

双前导和尾随下划线表示特殊函数，例如`__add__`在使用 + 运算符时调用。

阅读[PEP 8](http://www.python.org/dev/peps/pep-0008/)中的更多内容，尤其是“命名约定”部分。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-03T06:24:01.590

我认为大多数人只是直接访问它们，不需要 get/set 方法。

```
>>> class myclass:
...     x = 'hello'
...
>>>
>>> class_inst = myclass()
>>> class_inst.x
'hello'
>>> class_inst.x = 'world'
>>> class_inst.x
'world' 
```

顺便说一句，您可以使用 dir() 函数查看附加到您的实例的属性/方法：

```
>>> dir(class_inst)
['__doc__', '__module__', 'x'] 
```

两个前导下划线“__”用于将属性或函数设为私有。有关其他约定，请参阅 PEP 08： http: [//www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-03T06:26:39.477

Python 不需要从一开始就定义访问器，因为将属性转换为属性是快速而轻松的。请看以下生动的演示：

[从成瘾中恢复](http://www.archive.org/details/SeanKellyRecoveryfromAddiction)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T06:43:09.500

在 python 中做 getter/setter 并没有真正的意义，无论如何你都不能保护东西，如果你在获取/设置属性时需要执行一些额外的代码，请查看内置的 property() (python -c 'help(property )')

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2008-10-03T06:29:22.043

有些人使用 getter 和 setter。根据您使用的编码风格，您可以将它们命名为 getSpam 和 seteggs。但是您也可以使您的属性只读或仅分配。这样做有点尴尬。一种方法是覆盖

```
> __getattr__ 
```

和

```
> __setattr__ 
```

方法。

## 编辑：

虽然我的回答仍然正确，但我意识到这是不对的。在python中有更好的方法来制作访问器并且不是很尴尬。

# .net - .NET 日期比较：计算自某个日期以来的工作日数？

> ID：165887
> 
> 赞同：11
> 
> 时间：2008-10-03T06:21:12.720
> 
> 标签：.net, algorithm, comparison, date

计算自某个日期以来的工作日数的最简单方法是什么？VB.NET 首选，但 C# 没问题。

“工作日”是指除周六和周日之外的所有日子。如果该算法还可以考虑不应计为工作日的特定“排除”日期列表，那将是肉汁。

提前感谢贡献的天才。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-03T06:43:35.457

这会做你想做的事。转换为 VB.NET 应该很容易，但我无法做到这一点已经太久了。

```
DateTime start = DateTime.Now;
DateTime end = start.AddDays(9);
IEnumerable<DateTime> holidays = new DateTime[0];

// basic data
int days = (int)(end - start).TotalDays;
int weeks = days / 7;

// check for a weekend in a partial week from start.
if (7- (days % 7) <= (int)start.DayOfWeek)
    days--;
if (7- (days % 7) <= (int)start.DayOfWeek)
    days--;

// lose the weekends
days -= weeks * 2;

foreach (DateTime dt in holidays)
{
    if (dt > start && dt < end)
        days--;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-03T06:29:35.460

最简单的方法可能是

```
DateTime start = new DateTime(2008, 10, 3);
DateTime end = new DateTime(2008, 12, 31);
int workingDays = 0;
while( start < end ) {
  if( start.DayOfWeek != DayOfWeek.Saturday
   && start.DayOfWeek != DayOfWeek.Sunday ) {
      workingDays++;
  }
  start = start.AddDays(1);
} 
```

它可能不是最有效的，但它确实允许轻松检查假期列表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-08-02T15:22:15.370

以下是 VB 中史蒂夫公式的示例，不带假期减法：

```
Function CalcBusinessDays(ByVal DStart As Date, ByVal DEnd As Date) As Decimal

        Dim Days As Decimal = DateDiff(DateInterval.Day, DStart, DEnd)
        Dim Weeks As Integer = Days / 7
        Dim BusinessDays As Decimal = Days - (Weeks * 2)
        Return BusinessDays
        Days = Nothing
        Weeks = Nothing
        BusinessDays = Nothing

End Function 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-03T06:37:26.097

[DateDiff](http://msdn.microsoft.com/en-us/library/b5xbyt6f.aspx)以及[其他一些 Date* 函数](http://msdn.microsoft.com/en-us/library/2105eww7.aspx)是 VB.NET 所独有的，并且常常是 C# 开发人员羡慕的对象。不过，不确定它在这种情况下是否会很有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-03T06:40:35.170

一般来说（无代码） -

*   减去日期得到天数
*   除以 7 得到周数
*   减去周数乘以 2
*   计算日期范围内的假期日期数
*   减去那个数

摆弄开始/结束日期，使它们从星期一到星期一，然后加回差异

[为无代码的一般性道歉，为时已晚]

[cf endDate.Subtract(startDate).TotalDays]

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-03T06:27:56.807

[这是](http://classicasp.aspfaq.com/date-time-routines-manipulation/how-do-i-count-the-number-of-business-days-between-two-dates.html)SQL Server 的一种方法。页面上还有一个 vbscript 方法。不完全是你要求的，我知道。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-03T06:38:36.500

我们结合了两篇 CodeProject 文章，得出了一个完整的解决方案。我们的库不够简洁，无法作为源代码发布，但我可以向您指出我们用来实现所需功能的两个项目。与 CodeProject 文章一样，请阅读评论，其中可能包含重要信息。

计算工作日： http: [//www.codeproject.com/KB/cs/busdatescalculation.aspx](http://www.codeproject.com/KB/cs/busdatescalculation.aspx)

另一种工作日计算：http://www.codeproject.com/KB/cs/datetimelib.aspx

计算假期： http: [//www.codeproject.com/KB/dotnet/HolidayCalculator.aspx](http://www.codeproject.com/KB/dotnet/HolidayCalculator.aspx)

# multithreading - gcc 中的线程安全原子操作

> ID：165931
> 
> 赞同：17
> 
> 时间：2008-10-03T06:44:33.817
> 
> 标签：multithreading, gcc, atomic

在我处理的一个程序中，我有很多代码如下：

```
pthread_mutex_lock( &frame->mutex );
frame->variable = variable;
pthread_mutex_unlock( &frame->mutex ); 
```

如果中间指令可以用原子存储代替，这显然是对 CPU 周期的浪费。我知道 gcc 非常有能力做到这一点，但是我还没有找到很多关于这种简单的线程安全原子操作的文档。如何用原子操作替换这组代码？

（我知道简单的存储理论上应该是原子的，但我不想希望优化器不会在过程中的某个时刻搞砸它们的原子性。）

澄清：我不需要它们是严格原子的；这些变量仅用于线程同步。也就是说，线程 B 读取该值，检查它是否正确，如果不正确，它就休眠。所以即使线程 A 更新了值而线程 B 没有意识到它的更新，这也不是问题，因为这只是意味着线程 B 在它不需要的时候休眠了，当它醒来时，值会是正确的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-02-04T20:04:24.550

在某种程度上，C 中的原子操作是通过 atomic.h 头文件直接从内核源代码提供的。

但是，在用户空间代码中直接使用内核头文件是一种非常糟糕的做法，因此前一段时间删除了 atomic.h 头文件。相反，我们现在可以使用“GCC Atomic Builtins”，这是一种更好、更可靠的方法。

Tudor Golubenco 在他的博客上有一个[很好的解释](http://golubenco.org/?p=7)。他甚至为初始 atomic.h 文件提供了一个替代品，以防您有一些需要它的代码。

不幸的是，我是 stackoverflow 的新手，所以我只能在评论中使用一个链接，所以请查看 Tudor 的帖子并获得启发。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-10-03T06:53:18.913

您可以查看 gcc 文档。对于当前的 gcc 版本（4.3.2），它将是第 5.47 章[用于原子内存访问的内置函数](http://gcc.gnu.org/onlinedocs/gcc-4.3.2/gcc/Atomic-Builtins.html)- 对于其他 gcc 版本，请查看您的文档。它应该在第 5 章——C 语言家族的扩展中。

顺便说一句，C 编译器绝对不保证简单的存储操作是原子的。你不能依赖这个假设。为了以原子方式执行机器操作码，它需要 LOCK 前缀。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-04T22:17:32.043

在 x86 和大多数其他架构上，对齐的 4 字节读取和写入始终是原子的。不过，优化器可能会在单个线程中跳过/重新排序读取和写入。

您要做的是通知编译器其他线程可能已触及此内存位置。（一个副作用`pthread_mutex_lock`是告诉编译器其他线程可能已经触及内存的任何部分。）您可能会看到`volatile`推荐，但这不在 C 规范中，并且 GCC 不会以`volatile`这种方式解释。

```
asm("" : "=m" (variable));
frame->variable = variable; 
```

是一种 GCC 特有的机制，表示“`variable`已写入，重新加载”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T07:19:03.157

AFAIK，您不能在 MOV 指令前加上 LOCK；这仅适用于 RMW 操作。但是如果他*确实*使用了一个简单的存储，他可能还需要一个内存屏障，这对于互斥锁以及允许 LOCK 的指令都是隐含的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-04T20:27:09.900

正如我所看到的，您正在使用 gnu 平台进行开发，因此可以肯定地说 glic 提供了一个具有原子功能的数据类型 int `'sig_atomic_t'`，. 因此，这种方法可以确保您在内核级别进行原子操作。不是 gcc 级别。

# asp.net - 使用 ASP.NET MVC 检索会话信息

> ID：165937
> 
> 赞同：1
> 
> 时间：2008-10-03T06:45:35.127
> 
> 标签：asp.net

假设您有一个 ASP.NET MVC Web 应用程序，其页面可供应用程序的所有注册用户访问。现在这个页面主要是一般信息，但也有一个面板显示当前登录用户的个人信息。你如何去实施这个？

我最初的想法是让控制器从会话中读取当前登录用户的 ID，并提取必要的信息并将其传递到视图中。但这对我来说似乎有点尴尬，因为某种原因从控制器中提取会话信息。这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T06:57:17.080

使用 MVC preview 5，您可以获得授权控制器。它在用户登录时在 cookie 中设置用户名或 ID，您可以使用 User.Identity.Name 读取它（如果我没记错的话）现在，在一个组件（或以前版本中的前用户控件）中，您可以读取该 ID 或用户名，或从会话或数据库中获取数据，并显示其余用户信息。

# windows - 如何调试 .BAT 脚本？

> ID：165938
> 
> 赞同：105
> 
> 时间：2008-10-03T06:46:53.267
> 
> 标签：windows, batch-file, debugging, cmd, dos

有没有办法单步执行 .bat 脚本？问题是，我有一个构建脚本，它调用了很多其他脚本，我想看看它们被调用的顺序是什么，这样我就可以知道我必须去哪里并添加我的修改.

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2008-10-03T06:50:13.680

我不知道如何逐步执行 .bat 文件，但您可以使用`echo`并`pause`帮助调试。

> **ECHO**
> 将在批处理文件中回显一条消息。比如ECHO Hello World 执行时会在屏幕上打印Hello World。但是，如果在批处理文件的开头没有 @ECHO OFF，您还将获得“ECHO Hello World”和“Hello World”。最后，如果您只想创建一个空行，请键入 ECHO。在末尾添加句点会创建一个空行。
> 
> **PAUSE**
> 提示用户按任意键继续。

来源：[批处理文件帮助](http://www.computerhope.com/batch.htm)

@workmad3：答案有更多使用`echo`命令的好技巧。

另一个有用的资源... [DDB：DOS 批处理文件提示](http://www.chebucto.ns.ca/~ak621/DOS/Bat-Tips.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-10-03T06:52:03.910

确保脚本中没有“echo off”语句，并在调用每个脚本后调用“echo on”以重置您错过的任何内容。

原因是如果 echo 保持打开状态，那么命令解释器将在执行之前输出每个命令（在参数处理之后）。使它在生产中使用看起来非常糟糕，但对于调试目的非常有用，因为您可以看到输出出错的地方。

此外，请确保您正在检查由调用的批处理脚本和程序设置的 ErrorLevels。请记住，.bat 文件中为此使用了 2 种不同的方法。如果您调用程序，错误级别在 %ERRORLEVEL% 中，而从批处理文件中，错误级别在 ErrorLevel 变量中返回，并且不需要 % 围绕它。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-11-20T12:01:37.787

面对类似的担忧，我通过简单的 Google 搜索找到了以下工具：

JPSoft 的“ [**Take Command**](http://jpsoft.com/) ”包含一个批处理文件 IDE/调试器。他们的[简短演示视频](http://www.youtube.com/watch?v=IeAPFpFP3_k&feature=youtu.be)很好地展示了这一点。

几个小时以来，我一直在使用试用版。这是我的第一个拙见：

*   一方面，它确实允许调试 .bat 和 .cmd 脚本，我现在确信它在某些情况下会有所帮助
*   另一方面，它有时会阻塞，我不得不杀死它......特别是在调试下标时（并不总是系统地）......它没有显示“调用堆栈”或“退出”按钮。

它可以尝试一下。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2010-08-18T12:11:32.513

我发现“运行步骤”（win32）软件完全符合我的要求： http: [//www.steppingsoftware.com/](http://www.steppingsoftware.com/)

您可以在查看输出和环境变量的同时加载 bat 文件、放置断点/开始单步执行。

评估版只允许通过 50 行... 有没有人有类似功能的免费替代品？

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-08-22T16:01:53.093

rem out @ECHO OFF 并调用您的批处理文件将所有输出重定向到日志文件..

c:> yourbatch.bat（可选参数）> yourlogfile.txt **2>&1**

在[http://www.robvanderwoude.com/battech_debugging.php找到](http://www.robvanderwoude.com/battech_debugging.php)

有用！！不要忘记 2>&1...

威兹

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-03T06:49:13.697

我能想到的唯一方法是用`echo`s 和`pause`s 来添加代码。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-03T06:50:52.400

您是否尝试将结果重新路由到文件？喜欢whatever.bat >log.txt

您必须确保在这种情况下，所有其他调用的脚本也都记录到文件中，例如 >>log.txt

此外，如果您将日期 /T 和时间 /T 放在该批处理文件的开头和结尾，您将获得当时的时间，并且您可以映射脚本运行时间和顺序。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-08-11T17:47:52.303

您可以`cmd \k`在脚本末尾使用来查看错误。执行完成后它不会关闭您的命令提示符

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-27T16:29:29.383

或者.... 从另一个 .bat 文件调用您的主 .bat 文件并将结果输出到结果文件，即

runner.bat > mainresults.txt

runner.bat 调用主 .bat 文件的位置

您现在应该看到在主 .bat 文件中执行的所有操作

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-09T12:59:51.057

一个非常常见的问题是批处理脚本是通过双击其图标来运行的。由于托管命令提示符 ( `cmd.exe`) 实例也会在批处理脚本完成后立即终止，因此无法读取潜在的输出和错误消息。

要阅读此类消息，显式打开命令提示符窗口，移动到适用的工作目录并通过键入其路径/名称来运行批处理脚本非常重要。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2010-05-29T15:51:25.270

或者，打开一个 cmd 窗口，然后从那里调用批处理，输出将显示在屏幕上。

# java - Java 和 C++ 之间 IPC 的最佳方法是什么？

> ID：165945
> 
> 赞同：12
> 
> 时间：2008-10-03T06:52:01.897
> 
> 标签：java, c++, ipc

我想在单个 JVM 应用程序（一个进程，可能是多个线程）和链接到 C++ dll 的本机 C++ 应用程序之间实现一个强大的 IPC 解决方案。dll 可能在也可能不在同一台物理机器上。这样做的最佳方法是什么？

任何建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-03T06:59:14.577

我会使用标准的 TCP/IP 套接字，应用程序在其中侦听某个端口，并且库连接到它以报告它必须报告的内容并期待答案。

抽象是健壮的，得到很好的支持，并且不会有互操作问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-24T08:47:32.173

[Google 协议缓冲区](http://code.google.com/p/protobuf/)可以帮助您以与语言和平台无关的方式序列化数据。它还将生成 Java 和 C++ 代码来处理读取和写入序列化数据。然后，您可以使用任何您希望发送数据的通信机制。例如，您可以通过 TCP 套接字或共享内存 IPC 发送它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-03T06:59:51.380

你考虑过[Facebook 的 Thrift 框架](http://incubator.apache.org/thrift/)吗？

> Thrift 是一个用于可扩展的跨语言服务开发的软件框架。它将软件堆栈与代码生成引擎相结合，以构建在 C++、Java、Python、PHP、Ruby、Erlang、Perl、Haskell、C#、Cocoa、Smalltalk 和 OCaml 之间高效且无缝工作的服务。
> 
> Thrift 允许您在一个简单的定义文件中定义数据类型和服务接口。将该文件作为输入，编译器生成代码，用于轻松构建跨编程语言无缝通信的 RPC 客户端和服务器。

它可以在 TCP 套接字上工作，并且序列化/反序列化已经内置。

阅读[白皮书](http://incubator.apache.org/thrift/static/thrift-20070401.pdf)了解详情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-04T02:52:01.040

mmm - DLL 不是进程，所以我假设您的意思是您的 Java 应用程序和链接到 DLL 的其他一些本机应用程序之间的 IPC。可以肯定的是，套接字是这里的必经之路。它会让你的一切变得更容易。

另一种选择是使用 JNI 与 DCOM 实现对话，但我认为您不会获得太多收益（除了必须处理 COM 和 JNI 的令人头疼的问题 :-)）。

# .net - Mono 创建的功能可在 .NET 上使用？

> ID：165949
> 
> 赞同：18
> 
> 时间：2008-10-03T06:56:15.100
> 
> 标签：.net, mono, pdc

我今天注意到以下内容：[PDC 2008 上的 Mono](http://tirania.org/blog/archive/2008/Oct-01-1.html)？

> 我的演讲将涵盖我们作为 Mono 的一部分创建的新技术。其中一些可在 .NET 上重用（我们尝试使我们的代码跨平台），而另一些则是特定于 Mono 的 CLI 实现的功能。

由[Miguel de Icaza](http://tirania.org/blog/)于 2008 年 10 月 1 日发布

有人知道他指的是什么类型的新技术吗？

听起来很棒的演讲

[**更新**] [这](http://channel9.msdn.com/pdc2008/PC54/) 是米格尔演讲的视频

*   [Mono 的 SIMD 支持：让 Mono 对游戏安全](http://tirania.org/blog/archive/2008/Nov-03.html)
*   [Mono 中的静态编译](http://tirania.org/blog/archive/2008/Nov-05.html)
*   [Linux 上的 Unity，第一个屏幕截图](http://tirania.org/blog/archive/2008/Nov-14.html)

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2008-10-05T22:32:57.457

这些是您可以使用的一些主要[库](http://www.mono-project.com/Libraries)：

*   [Gtk#](http://www.mono-project.com/GtkSharp) , 跨平台 GUI API Unix, Windows, MacOS X,
    *   这是一整套库，包括小部件（使用 Gtk+）、可访问性和国际文本渲染（使用 PangoSharp）。
*   [Mono.DataConvert](http://www.mono-project.com/Mono_DataConvert) - System.BitConverter 实现正确，设计良好。
*   [Mono.Addins](http://www.mono-project.com/Mono.Addins) - 可扩展性框架，类似于 MEF。
*   [Mono.Cairo](http://www.mono-project.com/Mono.Cairo) - 开罗图形绑定。
*   [Mono.Cecil -ECMA](http://www.mono-project.com/Cecil) CIL 图像处理。
*   Xml.Relaxng [-RelaxNG](http://www.relaxng.org/)解析和验证。
*   [Novell.Directory.Ldap](http://www.novell.com/coolsolutions/feature/11204.html) - LDAP 库。
*   [Daap.Sharp](http://github.com/mono/daap-sharp) - DAAP 协议的实现
    *   （音乐交换协议，可以消费或暴露音乐源）
*   [Mono.Upnp](http://www.mono-project.com/Mono.Upnp) - 托管代码中的通用即插即用实现。
*   [Mono.ZeroConf](http://www.mono-project.com/Mono.Zeroconf) - 用于 .NET 应用程序的跨平台 ZeroConf/Bonjour API。
*   [BitSharp -Bittorrent](http://www.mono-project.com/Bitsharp)客户端/服务器库，现在称为[MonoTorrent](http://www.monotorrent.com/)
*   [Mono.Nat](http://monotorrent.blogspot.com/2006/12/on-yet-another-new-topic-im-proud-to.html) - 网络地址转换。
*   [Mono.Rocks](http://www.mono-project.com/Rocks) - C# 的有用扩展方法/功能特性，现在被[Cadenza取代](http://www.gitorious.org/cadenza)
*   SmugMugSharp - 与 SmugMug 对话的绑定
*   [Crimson](http://www.mono-project.com/Crimson) - .NET 之外的加密库
*   [Mono.WebBrowser](http://www.mono-project.com/WebBrowser) - Firefox 或 WebKit 的包装器。
*   WebkitSharp - 从 C# 使用 WebKit 的绑定
*   [GtkSharpRibbon](http://debackerl.wordpress.com/2008/08/26/summer-of-code-summary-gtk-sharp-ribbon/) - 功能区，在 Gtk# 中实现（跨平台）
*   iPodSharp - 用于通信和操作 iPod 的库。
*   TagLibSharp - 用于注释多媒体文件（标记）的库。
*   Exiv2Sharp - EXIF 读/写库。

Linux 特定：

*   [Mono.Posix](http://www.go-mono.com/docs/index.aspx?tlink=0@N%3AMono.Posix) / [Mono.Unix](http://www.go-mono.com/docs/index.aspx?tlink=0@N%3AMono.Posix)。
*   [NDesk.DBus](http://www.ndesk.org/DBusSharp)
*   [Mono.Fuse](http://www.jprl.com/Projects/mono-fuse.html) - 用户空间文件系统。

我确定我错过了许多其他库。

其中大部分（以及更多）都通过[库](http://www.mono-project.com/Libraries)页面链接到。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-03T07:05:40.583

也许像[Cecil](http://www.mono-project.com/Cecil)和[Monovation](http://tirania.org/blog/archive/2008/Sep-29.html)以及[交互式 shell](http://www.mono-project.com/CsharpRepl)之类的东西？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-03T07:15:49.763

查看[路线图](http://www.mono-project.com/Mono_Project_Roadmap)，可能是他们引以为豪的新 JIT/IL 实施；可能是 C# 评估 API / C# Shell。但是，我怀疑我们将不得不等待 PDC 发现......许多路线图项目（相当合理地）与 MS 等价物相当 - 但也许他们已经在安静;-p

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T07:06:31.160

还有目前仅适用于 Mono 2.2的[C# eval](http://tirania.org/blog/archive/2008/Sep-10.html)和[C# 脚本外壳...](http://tirania.org/blog/archive/2008/Sep-08.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-03T13:04:26.247

[米格尔](https://stackoverflow.com/users/16929/migueldeicaza)本人被发现堆栈溢出：也许你会直接从他那里得到答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-31T08:38:50.733

不要忘记[Mono.Options](http://tirania.org/blog/archive/2008/Oct-14.html)，一个非常有用的命令行选项解析库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-07T08:20:11.843

[这](http://www.mono-project.com/Release_Notes_Mono_2.0)是有关 Mono 2.0 的更多详细信息

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-07T18:54:39.813

如果您仍然以 1.1 为目标，那么 Mono.Data 是一个出色的抽象，类似于 DbProvider 在 2.0 ADO.NET 中所做的

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-07-04T20:19:18.180

[Telerik](http://www.telerik.com)宣布将在下一个版本中支持 Mono。也许第一家第三方组件商业公司会支持 Mono。这很棒。Windows 现在支持[MonoDevelop 。](http://www.MonoDevelop.com)我看到了 Mono 的美好未来。

# windows - 如何将 CLI 应用程序作为 Windows 服务运行？

> ID：165951
> 
> 赞同：7
> 
> 时间：2008-10-03T06:57:24.240
> 
> 标签：windows, windows-services

假设我有一个执行后台工作的第三方应用程序，但会将所有错误和消息打印到控制台。这意味着，目前，我们必须保持用户登录到服务器，并在每次重新启动时重新启动应用程序（双击）。

*不是很酷。*

我很确定，有一种简单的方法可以做到这一点 - 一个通用的服务包装器，可以为`stdout`和配置一个日志文件`stderr`。

我确实检查过`svchost.exe`，但[根据这个站点](http://www.google.ch/url?sa=t&source=web&ct=res&cd=2&url=http%3A%2F%2Fsupport.microsoft.com%2Fkb%2F314056&ei=38DlSPGDLYbS0gWaupyXCw&usg=AFQjCNFuvFUsrk_qf9ATt6N_Csh4dMJZnw&sig2=UZLsm65gFNCdsUqszVgHWQ)，它只适用于 DLL 的东西。遗憾。

**编辑：**应用程序需要从批处理文件启动。FireDaemon 似乎可以解决问题，但我认为这有点矫枉过正，因为可以在不到 10 行 python 代码中完成......哦，好吧，*这里没有发明*......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-03T06:59:33.190

[`srvany.exe`](http://support.microsoft.com/kb/137890)从[资源工具包](http://www.microsoft.com/downloads/details.aspx?familyid=9d467a69-57ff-4ae7-96ee-b18c4790cffd&displaylang=en)中查看。这将让任何东西作为服务运行。

您可以将服务定义中的参数传递给您的可执行文件，`srvany.exe`这样您就可以通过如下设置注册表来将批处理文件作为服务运行：

```
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\MyService\Parameters]
"Application"="C:\\Windows\\System32\\cmd.exe"
"AppParameters"="/C C:\\My\\Batch\\Script.cmd"
"AppDirectory"="C:\\My\\Batch" 
```

注意：如果您设置这些键`RegEdit`而不是使用文件，则值中只需要单个反斜杠。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T02:55:03.070

我推荐[NSSM: The Non-Sucking Service Manager](https://nssm.cc/download/?page=download)。

*   32/64 位 EXE
*   公共区域 （！）
*   正确实现服务停止消息，并向您的应用程序发送正确的信号以进行正常关闭。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-03T07:15:18.580

为什么不简单地实现一个非常薄的服务包装器，这里有一个在 .NET 中编写服务的快速入门指南 在 .NET 中[编写一个有用的 Windows 服务在五分钟内](http://blogs.msdn.com/bclteam/archive/2005/03/15/396428.aspx)

当您开始运行时，您可以使用[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类来启动应用程序并对其进行配置，以便您可以自己处理 stdout/stderr（[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)是您的朋友）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T07:04:25.067

查看 FireDaemon。有一个免费版本（我认为是 FireDaemon lite），一次只允许安装一个服务，但这是一个非常有用的设置服务的工具。如果需要，它还可以正确环绕批处理文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-10T04:27:48.033

我支持firedaemon选项。您可能还想设置允许服务与桌面交互的选项，以允许它显示 cli 输出窗口。他们不再提供免费版本，但如果您在网上搜索 firedaemon lite，您可以找到较旧的免费 lite 版本，或者选择付费路线。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-26T16:48:35.360

NSSM 早已死去。建议在 Windows 10 或 Windows 11 上使用[WinSW](https://github.com/winsw/winsw)

# asp.net - 什么是 ASP.net 中的代码编译单元

> ID：165971
> 
> 赞同：1
> 
> 时间：2008-10-03T07:14:31.420
> 
> 标签：asp.net

我需要知道.net 中的代码编译单元是什么。它位于此路径 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\App_folders

我需要知道为什么它创建的 ccu 文件也是一个带有应用程序扩展名 dll 的编译文件。

这样做从这里获取任何参考。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T07:25:50.257

我建议你看看这篇文章：http: [//msdn.microsoft.com/en-us/magazine/cc163496.aspx](http://msdn.microsoft.com/en-us/magazine/cc163496.aspx)

“默认情况下，当您编译 Web 应用程序时，已编译的代码放置在 Temporary ASP.NET Files 文件夹中。此文件夹是您安装 .NET 框架的位置的子目录。通常，该位置是以下 %FrameworkInstallLocation% \临时 ASP.NET 文件”。
[http://msdn.microsoft.com/en-us/library/ms366723.aspx](http://msdn.microsoft.com/en-us/library/ms366723.aspx)

“CCU 代表 Code Compile Unit，指的是为生成动态页面类的源代码而创建的 CodeDOM 树。CCU 文件是一个二进制文件，其中包含页面的 CodeDOM 树的序列化版本。”

“CCU 文件维护页面的 CodeDOM 结构的最新副本，准备为这些请求提供服务。”

[http://msdn.microsoft.com/en-us/magazine/cc163496.aspx](http://msdn.microsoft.com/en-us/magazine/cc163496.aspx)

# php - 在 PHP 中确定引用者

> ID：165975
> 
> 赞同：104
> 
> 时间：2008-10-03T07:17:41.837
> 
> 标签：php, http-referer

确定当前页面发送或调用（通过 AJAX）哪个页面的最可靠和最安全的方法是什么。由于（缺乏）可靠性，我不想使用`$_SERVER['HTTP_REFERER']`，并且我需要调用的页面仅来自源自我网站的请求。

编辑：我希望验证是否正在从我网站上的页面调用执行一系列操作的脚本。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2008-10-03T07:33:54.463

REFERER 作为 HTTP 协议的一部分由客户端的浏览器发送，因此确实不可靠。它可能不存在，它可能是伪造的，如果出于安全原因，您就不能信任它。

如果您想验证请求是否来自您的站点，那么您不能，但您可以验证用户是否访问过您的站点和/或已通过身份验证。Cookie 是在 AJAX 请求中发送的，因此您可以依赖它。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-04T13:19:28.617

我发现最好的是一个 CSRF 令牌，并将其保存在会话中，以便您需要验证引用者的链接。

因此，如果您正在生成一个 FB 回调，那么它看起来像这样：

```
$token = uniqid(mt_rand(), TRUE);
$_SESSION['token'] = $token;
$url = "http://example.com/index.php?token={$token}"; 
```

然后 index.php 将如下所示：

```
if(empty($_GET['token']) || $_GET['token'] !== $_SESSION['token'])
{
    show_404();
} 

//Continue with the rest of code 
```

我确实知道一些安全网站对其所有安全页面都做了同样的事情。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-09-26T20:12:00.497

使用[$_SERVER](http://php.net/manual/en/reserved.variables.server.php) ['HTTP_REFERER']

> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

```
if (!empty($_SERVER['HTTP_REFERER'])) {
    header("Location: " . $_SERVER['HTTP_REFERER']);
} else {
    header("Location: index.php");
}
exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-03T07:36:25.783

没有可靠的方法来检查这一点。它真的在客户的手下告诉你它来自哪里。您可以想象仅在您网站的某些页面上使用 cookie 或会话信息，但这样做会破坏用户对书签的体验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-06-23T06:35:01.037

在阅读了所有虚假的引荐来源网址问题后，我们只剩下一个选项：即我们希望作为引荐来源网址跟踪的页面应该保留在会话中，并且作为 ajax 调用然后检查会话是否具有引荐来源页面值并执行其他明智的操作不行动。

另一方面，当他请求任何不同的页面时，将引荐来源会话值设为空。

请记住，会话变量仅在期望页面请求上设置。

# c++ - 在没有 Tab 键的情况下在 Windows Mobile 中的对话框控件之间移动

> ID：165984
> 
> 赞同：0
> 
> 时间：2008-10-03T07:22:23.167
> 
> 标签：c++, windows-mobile, mfc, windows-ce

我有一个 Windows Mobile 5.0 应用程序，用 C++ MFC 编写，有很多对话框。我目前的目标设备之一没有 Tab 键，所以我想使用另一个键在控件之间移动。这适用于按钮，但不适用于编辑控件或组合框。我看过一个[类似的问题](https://stackoverflow.com/questions/52098/how-do-you-navigate-out-of-a-combobox-on-a-windows-mobile-device-without-a-tab)，但答案并不适合。我尝试覆盖 CDialog::OnKeyDown 无济于事，并且宁愿不必覆盖每个对话框中每个控件的击键功能。到目前为止，我的想法是编写新的类来替换 CEdit 和 CComboBox，但一如既往地只是检查是否有更简单的方法，例如临时重新编程另一个键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-03T12:49:49.537

我不知道 MFC 有多**好**，但也许你可以通过将所有这些控件的窗口过程子类化为一个类来实现它，这只会处理按下光标键的情况并将其余事件传递给原始过程。

您必须提供自己的机制来移动到适当的控件，具体取决于按下的光标键，但它可能值得可用性增益。

如果可行，您可以枚举所有对话框控件并自动将它们子类化。

默认情况下，Windows Mobile 6 允许使用光标在对话框控件之间切换 - 这是一种新的、更“智能”的 UI 移动方式，而且非常方便。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-10-03T18:50:54.940

您不能使用方向键在字段之间导航吗？

# windows - 自动启动 Windows 录音机

> ID：165987
> 
> 赞同：2
> 
> 时间：2008-10-03T07:22:54.227
> 
> 标签：windows, automation, scheduled-tasks

我的部门的任务是使用内置的 Windows 录音机录制早间演示音频以供将来使用。由于人性，我们并不总是记得按时启动它。

Windows 没有与 Unix **cron**函数等效的内置函数。除了安装一个新的软件程序（这需要时间、可能要花钱并需要 IA 认证）之外，还有没有一种简单的方法可以自动进行记录？

我并不反对为它编写一个简单的 Python 脚本，但我以前没有为 Windows 编程过；我不知道此类程序所需的 API 或任何东西。

* * *

**编辑** 感谢您的回复。我觉得自己像个白痴。我通常不使用 Windows 计算机，所以我不知道 Windows 有任务计划程序。

但是，当我用记录器程序对其进行测试时，它所做的只是打开程序；它实际上并没有开始录制。如何让它在打开时真正开始录制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T12:22:46.300

```
set WshShell = WScript.CreateObject("WScript.Shell") 
WScript.Sleep(100)
WshShell.Run "%SystemRoot%\system32\sndrec32.exe" 
WScript.Sleep(100)
WshShell.AppActivate "Sound - Sound Recorder" 
WScript.Sleep(100)
WshShell.SendKeys " " 
WScript.Sleep(100) 
```

将上述文本另存为 RunSoundRecorder.vbs。这将启动录音应用程序并开始录音。只需将任务调度程序指向此文件即可。

如果您想进行更改：
第三行是要运行的 exe，
第五行是应用程序标题栏中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-04T02:00:58.083

使用[AutoIt3](http://www.autoitscript.com/autoit3/)

```
Run ( @SystemDir + "\sndrec32.exe", "workingdir" )
Sleep(5000) ;five seconds
WinActivate( "Sound - Sound Recorder" )
Sleep(100)
Send( " " ) 
```

*注意：我没有对此进行测试，因为我不再经常使用 Windows。*

如果您想自动化任何 Win32 Gui，绝对值得一试。实际上，自从我上次使用它以来，它似乎已经获得了更多的功能。

特点：（取自[www.autoitscript.com/autoit3/](http://www.autoitscript.com/autoit3/)）

*   易于学习的类似 BASIC 的语法
*   模拟击键和鼠标移动
*   操作窗口和进程
*   与所有标准窗口控件交互
*   脚本可以编译成独立的可执行文件
*   创建图形用户界面 (GUI)
*   COM 支持
*   常用表达
*   直接调用外部DLL和Windows API函数
*   可编写脚本的 RunAs 函数
*   详细的帮助文件和大型社区支持论坛
*   兼容Windows 95 / 98 / ME / NT4 / 2000 / XP / 2003 / Vista / 2008
*   Unicode 和 x64 支持
*   数字签名让您高枕无忧
*   适用于 Windows Vista 的用户帐户控制 (UAC)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-03T09:57:23.280

没有命令行参数可以在录制模式下启动。您必须手动开始录制！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-10-03T07:30:23.660

开始-程序-附件-系统工具-计划任务******`