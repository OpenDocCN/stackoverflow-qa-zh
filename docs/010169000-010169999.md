# StackOverflow 问答 10169000-10169999

# css - 如何在保留 webkit-box-shadow 的同时使图像具有填充？

> ID：10169006
> 
> 赞同：7
> 
> 时间：2012-04-16T05:14:49.020
> 
> 标签：css, webkit

我想对我网站上的所有图像进行样式设置，使其具有 10 像素的框阴影和填充，这样文本就不会被它们弄脏。但是，当我使用 CSS 将任何填充分配给“img”时，框阴影会绘制在填充的边缘，从而在图像周围留下 10px 的空白空间。

```
#content img {
    -moz-box-shadow: 0 0 5px 2px #282a2d;
    -webkit-box-shadow: 0 0 5px 2px #282a2d;
    padding:10px
} 
```

此特定图像在段落内向左浮动。这是我的问题的一个例子 -

[![在此处输入图像描述](../Images/3630f44f70852bd3b16e885715a1f6d5.png)](https://i.stack.imgur.com/vLsId.png)

有任何想法吗？

**编辑：**我不想要填充。我只想要盒子阴影，然后是空格，这样文本就不会在盒子阴影旁边混在一起。原来我想要的是边距，而不是填充。愚蠢的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T05:17:02.710

`margin`除了使用`padding`

```
#content img {
    box-shadow: 0 0 5px 2px #282a2d;
    padding: 10px;
    margin-right: 10px;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:17:48.350

给背景颜色一样

```
#content img {
    -moz-box-shadow: 0 0 5px 2px #282a2d;
    -webkit-box-shadow: 0 0 5px 2px #282a2d;
    background: #282a2d;
    padding:10px;
} 
```

[演示](http://jsfiddle.net/4UrPW/)

* * *

**更新：**

正如评论中提到的，OP 似乎也没有填充也可以。所以，我将完成我的答案。

```
#content img {
    -moz-box-shadow: 0 0 5px 2px #282a2d;
    -webkit-box-shadow: 0 0 5px 2px #282a2d;
    margin:10px
} 
```

# javascript - 在 CkEditor 中输入焦点

> ID：10169007
> 
> 赞同：1
> 
> 时间：2012-04-16T05:14:56.397
> 
> 标签：javascript, ckeditor

如何在 CkEditor 的内容区域中聚焦文本输入字段？打电话`$(inputselector).focus()`好像没用。光标停留在原来的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:40:55.097

1.  获取谷歌浏览器（仅用于此测试）
2.  打开[http://ckeditor.com/demo](http://ckeditor.com/demo)
3.  点击`Ctrl+Shift+I`调试器
4.  单击“控制台”（最后一个选项卡 - 它有一个小 Schweitzer 和一个番茄）
5.  复制并粘贴下面的所有行，然后按 Enter

    ```
    var tgbody = $('iframe')[0].contentDocument.getElementsByTagName('body')[0];
    var target = $(tgbody).find('> *')[0];
    var wildin = $("<input type='text' name='cfld' id='cfld' value='some text' />");

    $(tgbody).removeAttr('contenteditable');
    $($('iframe')[0].contentDocument.getElementsByTagName('body')[0]).removeAttr('contenteditable');
    wildin.appendTo(target);

    /// O.o 0.º

    wildin.focus(); 
    ```

6.  再打`Ctrl+Shift+I`一次；您会注意到内容区域内有一个新输入，并且您的光标在其中。

7.  ？？？
8.  利润

# image - 使用VBA改变图片

> ID：10169011
> 
> 赞同：16
> 
> 时间：2012-04-16T05:16:02.573
> 
> 标签：image, vba, ms-office, excel-2007

当您右键单击 Excel/Word/Powerpoint 中的形状时，我正在尝试使用 VBA 自动更改图片功能。

但是，我找不到任何参考，你能帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T06:47:53.820

据我所知图片的来源是不能*改*的，需要删除旧的，插入新的

这是一个开始

```
strPic ="Picture Name"
Set shp = ws.Shapes(strPic)

'Capture properties of exisitng picture such as location and size
With shp
    t = .Top
    l = .Left
    h = .Height
    w = .Width
End With

ws.Shapes(strPic).Delete

Set shp = ws.Shapes.AddPicture("Y:\our\Picture\Path\And\File.Name", msoFalse, msoTrue, l, t, w, h)
shp.Name = strPic
shp.ScaleHeight Factor:=1, RelativeToOriginalSize:=msoTrue
shp.ScaleWidth Factor:=1, RelativeToOriginalSize:=msoTrue 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-06T14:38:32.003

您可以使用应用于矩形形状的[UserPicture方法更改图片的来源。](http://msdn.microsoft.com/en-us/library/office/aa213644%28v=office.11%29.aspx)但是，如果您希望保持图片的原始纵横比，则需要相应地调整矩形的大小，因为图片将采用矩形的尺寸。

举个例子：

```
 ActivePresentation.Slides(2).Shapes(shapeId).Fill.UserPicture ("C:\image.png") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-21T04:34:13.290

```
'change picture without change image size
Sub change_picture()
strPic = "Picture 1"
Set shp = Worksheets(1).Shapes(strPic)

'Capture properties of exisitng picture such as location and size
With shp
    t = .Top
    l = .Left
    h = .Height
    w = .Width
End With

Worksheets(1).Shapes(strPic).Delete

Set shp = Worksheets(1).Shapes.AddPicture("d:\pic\1.png", msoFalse, msoTrue, l, t, w, h)
shp.Name = strPic

End Sub 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-27T16:48:07.940

我所做的是将两个图像放在彼此的顶部，并将下面的宏分配给两个图像。显然，我已将图像命名为“lighton”和“lightoff”，因此请确保将其更改为图像。

```
Sub lightonoff()

If ActiveSheet.Shapes.Range(Array("lighton")).Visible = False Then
    ActiveSheet.Shapes.Range(Array("lighton")).Visible = True
        Else
    ActiveSheet.Shapes.Range(Array("lighton")).Visible = False
    End If

End Sub 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-09T22:16:29.930

我过去所做的是在表单上创建几个图像控件并将它们放在一起。然后您以编程方式设置所有图像 .visible = false 除了您要显示的图像。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-12T16:10:22.143

我试图在PowerPoinT(PPT)中用VBA模仿“换图”的原始功能

下面的代码尝试恢复原始图片的以下属性： - .Left、.Top、.Width、.Height - zOrder - 形状名称 - 超链接/动作设置 - 动画效果

```
Option Explicit

Sub ChangePicture()

    Dim sld As Slide
    Dim pic As Shape, shp As Shape
    Dim x As Single, y As Single, w As Single, h As Single
    Dim PrevName As String
    Dim z As Long
    Dim actions As ActionSettings
    Dim HasAnim As Boolean
    Dim PictureFile As String
    Dim i As Long

    On Error GoTo ErrExit:
    If ActiveWindow.Selection.Type <> ppSelectionShapes Then MsgBox "Select a picture first": Exit Sub
    Set pic = ActiveWindow.Selection.ShapeRange(1)
    On Error GoTo 0

    'Open FileDialog
    With Application.FileDialog(msoFileDialogFilePicker)
        .AllowMultiSelect = False
        .Filters.Clear
        .Filters.Add "Picture File", "*.emf;*.jpg;*.png;*.gif;*.bmp"
        .InitialFileName = ActivePresentation.Path & "\"
        If .Show Then PictureFile = .SelectedItems(1) Else Exit Sub
    End With

    'save some properties of the original picture
    x = pic.Left
    y = pic.Top
    w = pic.Width
    h = pic.Height
    PrevName = pic.Name
    z = pic.ZOrderPosition
    Set actions = pic.ActionSettings    'Hyperlink and action settings
    Set sld = pic.Parent
    If Not sld.TimeLine.MainSequence.FindFirstAnimationFor(pic) Is Nothing Then
        pic.PickupAnimation 'animation effect <- only supported in ver 2010 above
        HasAnim = True
    End If

    'insert new picture on the slide
    Set shp = sld.Shapes.AddPicture(PictureFile, False, True, x, y)

    'recover original property
    With shp
        .Name = "Copied_ " & PrevName

        .LockAspectRatio = False
        .Width = w
        .Height = h

        If HasAnim Then .ApplyAnimation 'recover animation effects

        'recover shape order
        .ZOrder msoSendToBack
        While .ZOrderPosition < z
            .ZOrder msoBringForward
        Wend

        'recover actions
        For i = 1 To actions.Count
            .ActionSettings(i).action = actions(i).action
            .ActionSettings(i).Run = actions(i).Run
            .ActionSettings(i).Hyperlink.Address = actions(i).Hyperlink.Address
            .ActionSettings(i).Hyperlink.SubAddress = actions(i).Hyperlink.SubAddress
        Next i

    End With

    'delete the old one
    pic.Delete
    shp.Name = Mid(shp.Name, 8)  'recover name

ErrExit:
    Set shp = Nothing
    Set pic = Nothing
    Set sld = Nothing

End Sub 
```

使用方法：建议您将此宏添加到快速访问工具栏列表中。（转到选项或右键单击功能区菜单））首先，在幻灯片上选择要更改的图片。然后，如果 FileDialog 窗口打开，请选择一张新图片。完成。通过使用此方法，您可以在要更改图片时绕过 2016 版中的“必应搜索和 One-Drive 窗口”。

在代码中，可能（或应该）有一些错误或遗漏。如果有人或任何版主纠正代码中的这些错误，我将不胜感激。但大多数情况下，我发现它工作正常。另外，我承认还有更多原始形状的属性需要恢复——比如形状的线条属性、透明度、图片格式等。我认为这对于想要复制形状的太多属性的人来说可能是一个开始。我希望这对某人有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-11T17:34:53.880

在 Word 2010 VBA 中，更改要更改的图片元素的 .visible 选项会有所帮助。

1.  将 .visible 设置为 false
2.  改变图片
3.  将 .visilbe 设置为 true

这对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-31T16:23:59.037

[![请查找附件代码。首先在PPT中创建一个形状并运行代码]](https://i.stack.imgur.com/Vp3Cg.png) [1](https://i.stack.imgur.com/Vp3Cg.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-26T19:00:11.533

我正在使用 Excel 和 VBA。我无法叠加图像，因为我有多个可变编号的工作表，并且每张工作表都有图像，所以如果 20 张工作表包含我想要制作动画的所有 5 个图像，文件会变得很大。

所以我使用了这里列出的这些技巧的组合：1）我在我想要的位置和大小处插入了一个矩形形状：

```
ActiveSheet.Shapes.AddShape(msoShapeRectangle, 1024#, 512#, 186#, 130#).Select
Selection.Name = "SCOTS_WIZARD"
With Selection.ShapeRange.Fill
  .Visible = msoTrue
  .UserPicture "G:\Users\ScotLouis\Documents\My Spreadsheets\WordFind Wizard\WordFind Wizard 1.jpg"
  .TextureTile = msoFalse
End With 
```

2）现在动画（改变）图片，我只需要改变Shape.Fill.UserPicture：

```
ActiveSheet.Shapes("SCOTS_WIZARD").Fill.UserPicture _
    "G:\Users\ScotLouis\Documents\My Spreadsheets\WordFind Wizard\WordFind Wizard 2.jpg" 
```

所以我已经实现了每张只有 1 张图片（而不是我的动画中的 5 张）的目标，并且复制工作表只会复制活动图片，因此动画与下一张图片无缝衔接。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-11T13:42:15.623

我使用此代码：

```
Sub changePic(oshp As shape)
    Dim osld As Slide
    Set osld = oshp.Parent
    osld.Shapes("ltkGambar").Fill.UserPicture (ActivePresentation.Path & "\" & oshp.Name & ".png")
End Sub 
```

# java - 如何使用 JAI 库在 java 中使直方图标准化和均衡化？

> ID：10169014
> 
> 赞同：3
> 
> 时间：2012-04-16T05:16:29.290
> 
> 标签：java, histogram, jai, normalize

我正在使用 Swing 组件和 JAI 库在 java 中制作应用程序。我制作黑白或灰度图像的直方图。这种制作直方图的方法正确吗？如果它是正确的，那么我如何使用 JAI 库在我的应用程序中对直方图进行标准化和均衡化？我的代码如下。在我的代码中，我制作了 BufferedImage 对象，然后制作并绘制了该图像的直方图。 `enter code here`

```
 import java.awt.Color;
    import java.awt.Graphics;
    import java.awt.image.BufferedImage;
    import java.io.IOException;
    import javax.media.jai.JAI;
    import javax.media.jai.PlanarImage;
    import javax.swing.*;

    public class FinalHistogram extends JPanel {

   static int[] bins = new int[256];
   static int[] newBins = new int[256];
   static int x1 = 0, y1 = 0;
   static PlanarImage image = JAI.create("fileload", "alp_finger.tiff");                      
   static BufferedImage bi = image.getAsBufferedImage();

   FinalHistogram(int[] pbins) {
    for (int i = 0; i < 256; i++) {
        bins[i] = pbins[i];
        newBins[i] = 0;
    }

    repaint();
   }

   @Override
   protected void paintComponent(Graphics g) {

    for (int i = 0; i < 256; i++) {

        g.drawLine(150 + i, 300, 150 + i, 300 - (bins[i] / 300));

        if (i == 0 || i == 255) {
            String sr = new Integer((i)).toString();
            g.drawString(sr, 150 + i, 305);
        }

        System.out.println("bin[" + i + "]===" + bins[i]);
    }
  }

  public static void main(String[] args) throws IOException {

    int[] sbins = new int[256];
    int pixel = 0;
    int k = 0;

     for (int x = 0; x < bi.getWidth(); x++) {
        for (int y = 0; y < bi.getHeight(); y++) {
            pixel = bi.getRaster().getSample(x, y, 0);
             k = (int) (pixel / 256);
            sbins[k]++;  

       //pixel = bi.getRGB(x, y) & 0x000000ff;
       //k=pixel;

       //int[] pixels = m_image.getRGB(0, 0, m_image.getWidth(), m_image.getHeight(),     null, 0, m_image.getWidth());
      //short currentValue = 0;
      //int red,green,blue;
      //for(int i = 0; i<pixels.length; i++){           
            //red = (pixels[i] >> 16) & 0x000000FF;
            //green = (pixels[i] >>8 ) & 0x000000FF;
            //blue = pixels[i] & 0x000000FF;
            //currentValue = (short)((red + green + blue) / 3); //Current value gives            the average //Disregard the alpha
            //assert(currentValue >= 0 && currentValue <= 255);   //Something is awfully wrong if this goes off...
            //m_histogramArray[currentValue] += 1;    //Increment the specific value of the array
    //}

        }
     }

    JTabbedPane jtp = new JTabbedPane();
    jtp.addTab("Histogram", new JScrollPane(new FinalHistogram(sbins)));

    JFrame frame = new JFrame();
    frame.setSize(500, 500);
    frame.add(new JScrollPane(jtp));
    frame.setVisible(true);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
   } 
```

# scala - 使用 bufferedInputStream 作为 Scala 中的特征时的 Stackoverflow

> ID：10169016
> 
> 赞同：4
> 
> 时间：2012-04-16T05:16:34.447
> 
> 标签：scala, traits

我正在尝试解决“不耐烦的 Scala”一书给出的问题，该书要求将 java 的 BufferedInputStream 实现为特征。这是我的实现，

```
trait Buffering {           
    this:InputStream =>
        private[this] val bis = {
            new JavaBufferedInputStream(this)
        }
        override def read = bis.read
        override def read(byte:Array[Byte], off:Int, len:Int) = bis.read(byte, off, len)
        override def available = bis.available
        override def close() {
            bis.close
        }
        override def skip(n:Long) = bis.skip(n)
}

def main(args:Array[String]) {
    val bfis = new FileInputStream(new File("foo.txt")) with Buffering
    println(bfis.read)
    bfis.close
} 
```

但这给了我一个 java stackoverflow 错误，那么它有什么问题呢？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T06:22:24.243

看起来您正在意外地发生堆栈溢出。解决这些问题的关键是查看堆栈跟踪的重复周期。它通常指向重复分配帧的内容。在这里它将显示类似的内容：

```
at C.Buffering$class.read(C.scala:12)
at C.C$$anon$1.read(C.scala:23)
at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
at C.Buffering$class.read(C.scala:12)
at C.C$$anon$1.read(C.scala:23)
at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
at C.Buffering$class.read(C.scala:12) 
```

所以从下往上看，看起来你`read(byte, ...)`在打电话`bis.read(byte, ...)`，哪个在打电话`BufferedInputStream.read`，然后又在打电话给你`read(byte, ...)`。

看起来它`new BufferedInputStream(this)`正在调用`read`底层`InputStream`，但由于底层`this`是您的对象，然后委托调用`bis`我们有无限递归。

我猜作者希望您使用`abstract override`可堆叠的修改模式，您可以在其中`super`引用正确的`read`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-24T14:05:30.597

也许这就是答案。只是也许从我的理解。

```
trait Buffering extends InputStream{
abstract override def read()=
{
    println("Hello");
    super.read()
}
}
val t = new ByteArrayInputStream("hello".getBytes()) with Buffering 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-12T09:30:25.150

我一直在经历“不耐烦的Scala”。以下是我对第 10 章练习 8 的解决方案：

```
import java.io._

object BufferedInputStream extends App {

  trait Buffering {
    this: FileInputStream =>
    val br = new BufferedInputStream(this)
  }

  def bufferedReader(f: String): Unit = {
    val fis = new FileInputStream(f) with Buffering
    var c = 0
    var blen = 8192
    var len = 0
    var b = new Array[Byte](blen)
    while (fis.br.available > 0) {
      if (fis.br.available > blen) len = blen
      else len = fis.br.available
      c = fis.br.read(b, 0, len)
      if (c == -1) return
      print((for (i <- 0 to (c - 1)) yield b(i).toChar).mkString)
    }
    fis.br.close
    fis.close
  }

  bufferedReader("webpagexample")

} 
```

# c# - NHibernate 本机 SQL 中的多个 SELECT

> ID：10169017
> 
> 赞同：1
> 
> 时间：2012-04-16T05:16:38.963
> 
> 标签：c#, sql, nhibernate

我在本机 SQL 中创建了一个复杂的搜索查询。基本上是这样的：

```
SELECT ID FROM t_Product WHERE Name LIKE @criteria
SELECT publisher, count(*) as number FROM t_Product GROUP BY publisher 
```

它有 2`SELECT`条语句，我希望它在一次往返中发送到数据库服务器。

但我不知道如何在 Nhibernate 中实现这一点。

我考虑了以下选项，但似乎没有一个有效

1.  使用`CreateMultiQuery`，但这只接受 HQL，不接受原生 SQL
2.  使用`CreateSQLQuery`，但调用 List() 仅返回第一`SELECT`条语句的结果
3.  迁移到存储过程不是一种选择，因为整个 SQL 是非常动态的。
4.  我们仍然使用 Nhibernate 1.2，因此以后版本中的新功能也无法使用。

欢迎咨询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:04:58.443

无法使用 NH 版本 1.2

Futures 是在 2.1 版中发布的，它允许您完全做到这一点。

例如

```
var blogs = s.CreateCriteria<Invoice>()
  .SetMaxResults(30)
  .Future<Invoice>();
var countOfInvoices = s.CreateCriteria<Invoice>()
  .SetProjection(Projections.Count(Projections.Id()))
  .FutureValue<int>(); 
```

因此，您要么升级，要么回退到 ADO.NET 并使用多个记录集，要么继续使用现有的！对不起！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:31:05.083

这确实是特定于场景的，但是如果您坚持使用 NH 版本 1.2，并且您的目标是消除往返，您可以考虑使用子选择将其重写为单个查询。

类似于以下内容：

```
SELECT publisher, count(*) as number, 
(SELECT ID FROM t_Product WHERE Name LIKE @criteria) As theId 
FROM t_Product GROUP BY publisher 
```

如果您的子查询仅返回一个值，则可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:24:41.410

我不认为这是可能的，因为这两个查询都是 SELECT。

您可以在第一个查询之后尝试分号，并且它们之间有两个换行符，这对于某些数据库是必需的。我成功地运行了这样的查询脚本。如果它运行，请使用调试器查看返回的内容...

如果这不起作用，您需要单独的往返行程或切换到 HQL / Criteria。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-29T13:51:40.497

您可以像这样使用 MultiQuery “Hack”：

程序：

```
CREATE PROCEDURE [dbo].[proc_Name]
AS BEGIN
    SELECT * FROM t_Question where ...
    SELECT * FROM t_Question where ........
END 
```

NHibernate 查询代码：

```
public void ProcdureMultiTableQuery()
{
    var session = Session;
    var procSQLQuery = session.CreateSQLQuery("exec [proc_Name] ?,?");// prcodure returns two table
    procSQLQuery.SetParameter(0, userId);
    procSQLQuery.SetParameter(1, page);
    procSQLQuery.AddEntity(typeof(Question));

    var multiResults = session.CreateMultiQuery()
        .Add(procSQLQuery)
        // More table your procedure returns,more empty SQL query you should add
        .Add(session.CreateSQLQuery(" ").AddEntity(typeof(Question))) // the second table returns Question Model
        .List();
    if (multiResults == null || multiResults.Count == 0)
    {
        return;
    }
    if (multiResults.Count != 2)
    {
        return;
    }
    var questions1 = ConvertObjectsToArray<Question>((System.Collections.IList)multiResults[0]);
    var questions2 = ConvertObjectsToArray<Question>((System.Collections.IList)multiResults[1]);
}

static T[] ConvertObjectsToArray<T>(System.Collections.IList objects)
{
    if (objects == null || objects.Count == 0)
    {
        return null;
    }
    var array = new T[objects.Count];
    for (int i = 0; i < array.Length; i++)
    {
        array[i] = (T)objects[i];
    }
    return array;
} 
```

# xcode - Xcode 中的部分完成？

> ID：10169019
> 
> 赞同：0
> 
> 时间：2012-04-16T05:16:59.450
> 
> 标签：xcode, xcode4

是否可以在 Xcode 中进行部分完成？我的意思是如果我们在字符串上调用方法

例如。

```
[string <some method here method>] 
```

在 XCode 上，目前如果你输入

`[string`

并点击转义，您将看到可以在对象上调用的方法的建议。如果我想找到检查相等性的方法，`isEqualToString`如果我开始输入，我只会得到建议`isE...`，但是如果我输入“equal”，代码完成是否仍然会给出`isEqualToString`建议，即。它与方法的任何部分匹配？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:20:20.330

很抱歉，但没有办法，实际上没有任何方法可以改变 Xcode 处理代码完成的方式，你所能做的就是打开或关闭它。您最好的选择可能是向 Apple 提出功能请求。

# java - JComboBox 的行为与 JTextField 不同。我怎样才能让它看起来相似？

> ID：10169022
> 
> 赞同：2
> 
> 时间：2012-04-16T05:17:10.537
> 
> 标签：java, swing, user-interface, jcombobox, jtextfield

我有以下组合框，我可以在其中创建包含项目等的组合框，但外观与 JTextField 不同。我怎样才能让 JCombobox 看起来像 JTextField？

![在此处输入图像描述](../Images/ee8ae74adc1dd04e7f4f73f8eaecde05.png)

MyComboBox.java：

```
import java.awt.Color;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.LineBorder;
import javax.swing.plaf.basic.BasicComboBoxUI;

public class MyComboBox extends JComboBox {
  public MyComboBox(String[] name) {
    Border border = BorderFactory.createEmptyBorder(11, 11, 11, 11);
    JComboBox cb = new JComboBox(name);
    cb.setUI(new BasicComboBoxUI() {
        @Override
        protected JButton createArrowButton() {
            return new JButton() {
                    @Override
                    public int getWidth() {
                            return 0;
                    }
            };
        }
    });

    setModel(cb.getModel());    
    setOpaque(false);
    setBorder(new LineBorder(Color.black, 1, true));
    //setBackground(Color.white);
    setVisible(true); 

  }
//  public void paintComponent(Graphics g) {
//      super.paintComponent(g);                
//      g.setColor(new Color(red, green, blue) );
//      g.fillOval(125, 125, 50, 50);
//  }  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:02:36.370

*   最重要的是可以使用[外观和感觉](https://stackoverflow.com/a/3954646/714968)

*   `JComboBox`有两种状态，`JComboBox`可以`Editable`和`Non_Editable`（默认）

*   没有`CustomUI`（例如@aterai），但`Look and Feel`敏感，仅适用于`Metal Look and Feel`

![在此处输入图像描述](../Images/35ce28940b76e4b0fe2aa2541e8bb86b.png)

```
import java.awt.*;
import java.util.Vector;
import javax.swing.*;
import javax.swing.UIManager;
import javax.swing.plaf.ColorUIResource;
import javax.swing.plaf.metal.MetalComboBoxButton;

public class MyComboBox {

    private Vector<String> listSomeString = new Vector<String>();
    private JComboBox someComboBox = new JComboBox(listSomeString);
    private JComboBox editableComboBox = new JComboBox(listSomeString);
    private JComboBox non_EditableComboBox = new JComboBox(listSomeString);
    private JFrame frame;

    public MyComboBox() {
        listSomeString.add("-");
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
//
        someComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        someComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        someComboBox.setEditable(true);
        someComboBox.getEditor().getEditorComponent().setBackground(Color.YELLOW);
        ((JTextField) someComboBox.getEditor().getEditorComponent()).setBackground(Color.YELLOW);
//        
        editableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        editableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        editableComboBox.setEditable(true);
        JTextField text = ((JTextField) editableComboBox.getEditor().getEditorComponent());
        text.setBackground(Color.YELLOW);
        JComboBox coloredArrowsCombo = editableComboBox;
        Component[] comp = coloredArrowsCombo.getComponents();
        for (int i = 0; i < comp.length; i++) {
            if (comp[i] instanceof MetalComboBoxButton) {
                MetalComboBoxButton coloredArrowsButton = (MetalComboBoxButton) comp[i];
                coloredArrowsButton.setBackground(null);
                break;
            }
        }
//        
        non_EditableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        non_EditableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
//
        frame = new JFrame();
        frame.setLayout(new GridLayout(0, 1, 10, 10));
        frame.add(someComboBox);
        frame.add(editableComboBox);
        frame.add(non_EditableComboBox);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        UIManager.put("ComboBox.background", new ColorUIResource(Color.yellow));
        UIManager.put("JTextField.background", new ColorUIResource(Color.yellow));
        UIManager.put("ComboBox.selectionBackground", new ColorUIResource(Color.magenta));
        UIManager.put("ComboBox.selectionForeground", new ColorUIResource(Color.blue));
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyComboBox aCTF = new MyComboBox();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T07:57:05.103

我猜你的意思是 RoundedCornerBorder：

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.plaf.basic.*;

public class RoundedComboBoxTest {
  public JComponent makeUI() {
    UIManager.put("Panel.background", Color.GRAY);
    UIManager.put("ComboBox.foreground", Color.BLACK);
    UIManager.put("ComboBox.background", Color.GRAY);
    UIManager.put("ComboBox.selectionForeground", Color.WHITE);
    UIManager.put("ComboBox.selectionBackground", Color.GRAY);
    UIManager.put("ComboBox.buttonDarkShadow", Color.BLACK);
    UIManager.put("ComboBox.border", new RoundedCornerBorder());

    DefaultComboBoxModel<String> m = new DefaultComboBoxModel<>();
    m.addElement("1234");
    m.addElement("5555555555555555555555");
    m.addElement("6789000000000");
    JComboBox<String> combo = new JComboBox<>(m);
    combo.setUI(new BasicComboBoxUI() {
      @Override protected JButton createArrowButton() {
        JButton b = super.createArrowButton();
        b.setContentAreaFilled(false);
        b.setBackground(Color.GRAY);
        b.setBorder(BorderFactory.createEmptyBorder());
        return b;
      }
    });
    Object o = combo.getAccessibleContext().getAccessibleChild(0);
    ((JComponent)o).setBorder(
        BorderFactory.createMatteBorder(0,1,1,1,Color.BLACK));
    JPanel p = new JPanel(new BorderLayout());
    p.add(combo, BorderLayout.NORTH);
    p.setOpaque(true);
    p.setBackground(Color.GRAY);
    p.setBorder(BorderFactory.createEmptyBorder(15,15,15,15));
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new RoundedComboBoxTest().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
}
class RoundedCornerBorder extends AbstractBorder {
  @Override public void paintBorder(
      Component c, Graphics g, int x, int y, int width, int height) {
    Graphics2D g2 = (Graphics2D)g.create();
    g2.setRenderingHint(
        RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    int r = 12;
    Area round = new Area(
        new RoundRectangle2D.Float(x, y, width-1, height-1, r, r));
    Rectangle b = round.getBounds();
    b.setBounds(b.x, b.y + r, b.width, b.height - r);
    round.add(new Area(b));

    Container parent = c.getParent();
    if(parent!=null) {
      g2.setColor(parent.getBackground());
      Area corner = new Area(new Rectangle2D.Float(x, y, width, height));
      corner.subtract(round);
      g2.fill(corner);
    }
    g2.setColor(Color.BLACK);
    g2.draw(round);
    g2.dispose();
  }
  @Override public Insets getBorderInsets(Component c) {
    return new Insets(4, 8, 4, 8);
  }
  @Override public Insets getBorderInsets(Component c, Insets insets) {
    insets.left = insets.right = 8;
    insets.top = insets.bottom = 4;
    return insets;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T05:30:53.763

您将必须定义自己的自定义渲染器，查看本[教程](http://java.sun.com/docs/books/tutorial/uiswing/components/combobox.html#renderer)了解如何定义一个。

您还可以在 MyComboBox.java 中设置背景和前景，但这不会影响所选项目的前景、背景。

# vb.net - vb.net 从现在倒计时到预定义的时间跨度？

> ID：10169032
> 
> 赞同：0
> 
> 时间：2012-04-16T05:18:34.127
> 
> 标签：vb.net, windows-phone-7, timer, countdown, timespan

我希望能够（单击按钮）从当前时间开始倒计时（以分钟为间隔，也每分钟更新一次）到已经存在的时间跨度。我怎样才能做到这一点？

我在某处读到有几个不同的计时器，我需要一个可以在 windows phone 7 以及 windows 窗体应用程序中使用的解决方案。

我知道有很多现有的问题，我似乎无法找到一个能做这件事的人——如果有人能指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:53:43.090

您可以计算两个时间跨度之间的分钟数和秒数，然后您可以每秒从这个新的时间跨度中减去一个秒数或分钟数以确定一个新的时间跨度，这个新的时间跨度将在每次减法时减少。一旦这个新的时间跨度减少到 0，您就知道时间到了或倒计时已经完成。

# c# - 为什么 String.Equals(Object obj) 检查 this == null？

> ID：10169035
> 
> 赞同：6
> 
> 时间：2012-04-16T05:19:00.080
> 
> 标签：c#, .net, string, pinvoke, null-check

> **可能重复：**
> [为什么要检查这个！= null？](https://stackoverflow.com/questions/3143498/why-check-this-null)

```
// Determines whether two strings match. 
[ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)] 
public override bool Equals(Object obj)
{
    //this is necessary to guard against reverse-pinvokes and
    //other callers who do not use the callvirt instruction
    if (this == null)
        throw new NullReferenceException();

    String str = obj as String;
    if (str == null) 
        return false;

    if (Object.ReferenceEquals(this, obj)) 
        return true;

    return EqualsHelper(this, str);
} 
```

* * *

我不明白的部分是它正在检查当前实例，`this`，反对空值。该评论有点令人困惑，所以我想知道该评论实际上是什么意思？

任何人都可以举一个例子来说明如果该检查不存在，这将如何中断，这是否意味着我也应该将该检查放在我的课程中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T05:33:26.853

该检查是为了防止本机代码使用空`this`指针调用函数。这在 C# 中不会发生，因此您不必在代码中放置类似的保护措施。很有可能这个`String`类是在 C# 完成之前编写的，作者可能认为防止空值很重要，或者`String`从本机代码和其他地方调用方法很常见，这样可以很容易地在空值上调用方法。

请注意，即使您确实设法用 null 调用`this`并且您没有警卫，所发生的只是异常会略有不同。它可能是一个不同的异常，它可能会被不同的成员抛出，但否则它不太可能产生影响。

换句话说，如果不存在 null 检查，则`EqualsHelper`(或其被调用者之一) 将抛出异常而不是`Equals`. 由于希望隐藏用户可见函数的内部结构，因此将检查放在开头是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T06:33:40.937

*   C# 和 VB.NET 等语言使用 callvirt 在输入实例方法之前抛出 NullReference（this == null）检查是不必要的。
*   像 F# 和托管 C++（大部分时间）这样的语言使用 call 指令，您可以在其中使用 null this 指针进入实例方法。(this == null) 确实有效果。

添加的空检查不仅适用于后一种语言，而且还有助于在发生错误的位置（调用空对象的实例方法）进行调试。如果它不存在，您可以调用类中的任何方法而不会出现任何错误，只要它永远不会取消引用（访问成员变量）。这可能会导致在您的空对象上，几个方法调用确实有效，然后您突然得到一个空引用异常（访问实例数据的方法）。

If you look at the checks inside the .NET classes it is clear that only on some prominent classes like string do contain such guards. Other methods like IndexOf do not guard against this. This is inconsistent but I do think the performance penalty for such double null checks were not worth the effort because most users of the BCL are languages which uses the callvirt instruction where a second null check does not help.

# android - 将文本水平显示到具有多个垂直对齐的图像的图像

> ID：10169038
> 
> 赞同：0
> 
> 时间：2012-04-16T05:19:15.837
> 
> 标签：android

我想将文本水平显示为多个图像垂直对齐的图像。Thislayout 没有抛出任何异常，但只有一个图像出现..其他两个图像没有出现在我的布局中。

我的布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

     >
<ScrollView  android:id="@+id/scrollviewmotherregister" android:layout_width="fill_parent" android:layout_height="fill_parent" 
android:layout_marginTop="2dip"  android:layout_marginBottom="2dip">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
 >
    <ImageView
        android:id="@+id/icon"
        android:layout_width="90dip"
        android:layout_height="90dip"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="10dip"
        android:layout_marginTop="20dip"
        android:src="@drawable/icici"
         >
    </ImageView>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     android:orientation="vertical"
     >

     <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    </TextView>
      <TextView
        android:id="@+id/label2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="ICICI Bank"
        android:textSize="20dip" >
    </TextView>

      <TextView
        android:id="@+id/label3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Timings : 9 AM to 5 PM"
        android:textSize="20dip" >
    </TextView>

     <TextView
        android:id="@+id/label5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:text="Contact Number : 9894198941"
        android:textSize="20dip" >
    </TextView>

    </LinearLayout>

    <ImageView
        android:id="@+id/indianbank"
        android:layout_width="90dip"
        android:layout_height="90dip"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="10dip"
        android:layout_marginTop="20dip"
        android:src="@drawable/hdfc"
         >
    </ImageView>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     android:orientation="vertical"
     >

     <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    </TextView>
      <TextView
        android:id="@+id/label2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="HDFC Bank "
        android:textSize="20dip" >
    </TextView>

      <TextView
        android:id="@+id/label3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Timings : 10 AM to 6 PM"
        android:textSize="20dip" >
    </TextView>

     <TextView
        android:id="@+id/label5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:text="Contact Number : 9740999443"
        android:textSize="20dip" >
    </TextView>

    </LinearLayout>

     <ImageView
        android:id="@+id/axisbank"
        android:layout_width="90dip"
        android:layout_height="90dip"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="10dip"
        android:layout_marginTop="20dip"
        android:src="@drawable/axis"
         >
    </ImageView>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     android:orientation="vertical"
     >

     <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    </TextView>
      <TextView
        android:id="@+id/label2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Axis Bank"
        android:textSize="20dip" >
    </TextView>

      <TextView
        android:id="@+id/label3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Timings : 9:30 AM to 5:30 PM"
        android:textSize="20dip" >
    </TextView>

     <TextView
        android:id="@+id/label5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Contact Number : 9003245643"
        android:textSize="20dip" >
    </TextView>

    </LinearLayout>

</LinearLayout>
</ScrollView>
</LinearLayout> 
```

问题 ：

```
I am getting first images but other two images are not showing up . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:52:15.903

每个`LinearLayout` **包含 TextViews**将每个布局的宽度设置`WRAP_CONTENT`为`FILL_PARENT`

原因是第一个带有 TextViews 的 LinearLayout 出现了。之后，第一个 LinearLayout 占据了整个空间 - 这就是 Fill_Parent 所以..需要将其更改为 Wrap-Content。

在我看来，这就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:36:57.237

试试 LinearLayout 下的 RelativeLayout。RelativeLayout 具有所有对齐的属性，这将有助于您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:41:57.227

在滚动视图的线性布局中采用滚动视图采用不同的线性水平布局，,,, 而不是在每个水平布局上采用一个图像+文本视图...

# php - 肥皂 php 中发生日期时间错误

> ID：10169041
> 
> 赞同：1
> 
> 时间：2012-04-16T05:19:42.750
> 
> 标签：php, soap

我现在在php中使用soap方法创建redbus api。

现在我的编码有一些日期时间问题。这些是代码

```
$c = new soapclient('...wsdl....',
 array('Authentication' => array('LoginID' =>'x','Password'=>'x')));

$timezone = new DateTimeZone('UTC');
 $time='2012-04-17T16:50:45';
$date = new DateTime($time,$timezone);
$sourceid=array('SourceID'=>'244','DestinationID'=>'477','DateOfJourney' =>$date); 
```

它显示错误为致命错误：未捕获的 SoapFault 异常：[soap:Client] 服务器无法读取请求。---> XML 文档中存在错误 (2, 252)。---> 字符串 '' 不是有效的 AllXsd 值

我这应该是日期问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:50:52.057

好的，如果你在 PHP 中需要它，这里是：

代替

```
$sourceid=array('SourceID'=>'244','DestinationID'=>'477','DateOfJourney' =>$date); 
```

和

```
$sourceid=array('SourceID'=>'244','DestinationID'=>'477','DateOfJourney' =>str_replace($date->format( 'P' ), '', $date->format( 'c' ))); 
```

希望这可以帮助。

# ubuntu - 无法以网络用户身份运行 oowriter

> ID：10169042
> 
> 赞同：10
> 
> 时间：2012-04-16T05:19:49.650
> 
> 标签：ubuntu, openjdk, webusercontrol, libreoffice

我在笔记本电脑上设置了一个 Web 服务器。我正在构建一个通过本地网络访问的 Web 应用程序。我有一个 php 文件，其中包含以下几行：

```
$command = "/usr/bin/oowriter --invisible --convert-to pdf /var/www/hackathon/document/gaurav.doc -outdir /var/www/hackathon/pdf/"
exec($command, $output, $return_var);
print_r($output); 
```

所以，问题是当我在终端运行上面的代码时，php 运行得很好。但是当通过网络浏览器访问时，输出只是空的，并且没有按预期进行转换。

Apache 错误日志显示以下几行：

> [Java 框架] 函数 createSettingsDocument (elements.cxx) 出错。
> javaldx 失败！
> 警告：无法从 javaldx 读取路径

我已经尝试了[https://wiki.archlinux.org/index.php/Libreoffice#Fixing_Java_Framework_Error](https://wiki.archlinux.org/index.php/Libreoffice#Fixing_Java_Framework_Error)的解决方案。但它没有用。

我正在使用 OpenJDK 7。

有人对如何使这项工作有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-27T10:00:08.103

不能投票，不能评论（还）......所以......

蒂姆-欧文说的是真的。

该错误实际上表明**函数 createSettingsDocument**中的错误，这暗示某些名为 createSettingsDocument 的函数（注意：创建设置文档）失败....

**以下是你**（或至少我）如何**让它工作：**

1.  以普通用户身份运行一次 libre office 并记下它创建的目录名称。
2.  检查服务器正在运行哪个用户（或者 PHP 正在以哪个用户身份运行，如果您使用 FPM 等，这可能与 www-data 不同......）。
3.  检查为该用户设置的主目录（例如来自 /etc/passwd）
4.  在步骤 3 的目录中创建步骤 1 中记下的目录
5.  从步骤 2 将创建目录的所有者更改为用户

在我的服务器上，所需的目录实际上是**/var/www/libreoffice**，而在我的台式机上，该目录应该是**/var/www/.config/libreoffice**所以你需要确定。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-06T21:00:12.717

弗雷伯的回答为我解决了问题！

用过的：

```
$cmd = 'HOME='.getCWD().' && export HOME && libreoffice --headless ....';
exec($cmd); 
```

libreoffice 然后在 php 脚本目录中创建了 '.config' 和 'libreoffice' 目录。显然它必须可以被 webserver 进程写入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T16:12:14.277

OpenOffice 需要一个用户目录。由于您尝试使用 Web 服务器调用 OpenOffice，因此您必须授予相应用户对 is 的写入权限。例如，在 Debian 上，这意味着允许*www-data*写入*/var/www/.openoffice.org/*：

```
mkdir /var/www/.openoffice.org
chown www-data /var/www/.openoffice.org 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-02T16:59:29.223

我从 Web 服务器（实际上是“NaviServer”4.99）运行“ooffice --headless --convert-to pptx 文件名”时收到相同的错误消息。上面的解决方案并没有解决我的问题，但他们让我走上了正轨。事实证明，NaviServer 将“HOME”环境变量更改为它的安装目录 /usr/local/ns，以便 LibreOffice 尝试访问并在该目录中创建一个 .config 文件夹。我是通过从 Web 服务器执行 BASH “set”命令并检查环境变量来发现的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-18T07:17:03.160

我在 Debian 10（buster）中使用 php 文件通过 apache2 在 doc 到 odf 转换中遇到了这个问题。

在浏览器和 apche 日志中显示

```
"Array ( [0] => javaldx failed! [1] => Warning: failed to read path from javaldx )" 
```

我在 /var/log/syslog 检查 syslog 并收到以下错误。这会导致 apache 的主目录中出现一些权限和目录问题。

```
Apr 18 02:44:53 siptrunkbgp kernel: [744789.941286] audit: type=1400 audit(1587192293.959:70491): apparmor="ALLOWED" operation="mkdir" profile="libreoffice-oopslash" name="/var/www/.config/" pid=9835 comm="oosplash" requested_mask="c" denied_mask="c" fsuid=33 ouid=33
Apr 18 02:44:54 siptrunkbgp kernel: [744789.995119] audit: type=1400 audit(1587192294.015:70492): apparmor="ALLOWED" operation="mkdir" profile="libreoffice-soffice" name="/var/www/.config/" pid=9852 comm="soffice.bin" requested_mask="c" denied_mask="c" fsuid=33 ouid=33 
```

因此，我只需创建 .config 目录并使用以下命令在我的 apache 根位置 (/var/www) 中授予适当的权限。

> mkdir -p /var/www/.config/libreoffice
> 
> chown -Rf www-data.www-data /var/www/.config/

这将允许 apache 用户使用 libreoffice 创建转换所需的文件。

# apache-flex - Flex 自定义组件、事件和范围

> ID：10169044
> 
> 赞同：1
> 
> 时间：2012-04-16T05:20:04.520
> 
> 标签：apache-flex, events, scope

我开始放弃 Flex 论坛，所以我会在这里重新发帖，看看情况如何。长期潜伏者，第一次海报;-)

我在舞台上捕获键盘事件并通过框架调度自定义事件（伙伴，虽然我不知道这是一个重要问题），但我对范围很困惑。结构是：

--application（捕获键盘事件并调度自定义事件

```
 --  mainPanel (receives dispatched events but mainCalendar (a child element) 
     is null on debugging. Obviously if I try to call a public method on 
     mainCalendar it errors out, even though it's a child of mainPanel. 
     However, mainCalendar is NOT null IF I use 
     FlexGlobals.topLevelApplication.mainPanel.mainCalendar.
     Outerdocument and parentDocument do not expose mainCalendar either, BTW

     --  mainCalendar (a custom component inside mainPanel with public methods. 
         Creation policy is 'all' and it's visible and exists long before I 
         trap any keystrokes at the top level) 
```

有人可以花一点时间解释为什么 mainPanel 收到自定义事件时 mainCalendar 超出范围，即使 mainCalendar 是 mainPanel 的子项。有没有更好的方法来管理事件，所以我不必总是通过 topLevelApplication 处理组件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:49:01.420

*（创建答案，以便可以将此问题标记为已回答）*
通常，当对组件的引用为 null 且不应为 null 时，这意味着尚未创建组件。这可能在应用程序`initialize`事件之前或如果组件的父级不可见且未验证。

# recursion - 复发的限制有多大？

> ID：10169047
> 
> 赞同：5
> 
> 时间：2012-04-16T05:21:06.433
> 
> 标签：recursion, clojure, tail-call-optimization

据我所知，Clojure`recur`由编译器支持，而在其他 lisps 中，它是在较低级别实现的。

正如我所读到的，这不是“一般”的 TCO。除了显而易见的（需要关键字+检查）之外，还有什么`recur`不那么强大的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:49:14.643

`recur`仅支持尾递归优化，它是通用 TCO 的子类。Clojure 还支持通过`trampoline`.

**编辑** ~~另外，我认为一般 TCO 预计将在 Java 7 中登陆 JVM，并`recur`作为临时解决方案。然后甲骨文发生了。~~我已经将它与 Project Lambda 的（在 Java 中添加闭包）时间表混合在一起

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:58:18.007

recur 与完整的 TCO 略有不同，因为它**`recur`同时适用于循环和函数**，并且不做完全实现 TCO 会做的一些事情。对此的哲学支持是**使特殊部分看起来很特别**，而不是默默地优化统一的语法。

# sprite - 制作精灵拍摄

> ID：10169050
> 
> 赞同：0
> 
> 时间：2012-04-16T05:21:39.957
> 
> 标签：sprite, xna-4.0

如果您按下左右键，我有一个精灵会在屏幕底部从左向右移动。

我希望能够从屏幕底部移动的精灵中拍摄一些东西（我想要的任何精灵），并让该精灵直接向上。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:19:19.780

不要完全复制和粘贴它，但是当你拆分这些类时它会看起来像这样：

```
namespace SpaceInvadersGame 
{ 
    class Player : Microsoft.Xna.Framework.Game 
    { 
        Texture2D PlayerTexture; 
        Vector2 PlayerPosition; 

        public Player() 
        { 

        } 

        protected override void LoadContent() 
        { 
            PlayerTexture = Content.Load<Texture2D>(@"Images/freshman2");; 
            PlayerPosition = Vector2.Zero; 
            base.LoadContent(); 
        }

        public Vector2 GetPosition()
        {
            return this.PlayerPosition;
        }

        public void Update() 
        { 
            KeyboardState keyboardState = Keyboard.GetState(); 
            if (keyboardState.IsKeyDown(Keys.Left)) 
                freshamPos.X -= freshmanSpeed; 
            if (keyboardState.IsKeyDown(Keys.Right)) 
                freshamPos.X += freshmanSpeed;
            if(keyboardState.IsKeyDown(Keys.Space)) 
                theBullet = new Bullet(this);
        } 

        public void Draw(SpriteBatch SpriteBatch) 
        { 

        } 
    } 
}

namespace SpaceInvadersGame
{
    class Bullet : Microsoft.Xna.Framework.Game
    {
        Texture2D BulletTexture;
        Vector2 BulletPosition;
        Player thePlayer;

        public Bullet(Player player)
        {
            this.thePlayer = player;
        }

        protected override void LoadContent()
        {
            BulletTexture = Content.Load<Texture2D>(@"Images/bullet");;
            BulletPosition = thePlayer.GetPosition();
            base.LoadContent();
        }

        public void Update()
        {
            //in here is where you would just do something like:
            //BulletPosition.Y += 1;
        }

        public void Draw(SpriteBatch SpriteBatch)
        {

        }
    }
} 
```

# c# - 具有多个控件的列表框

> ID：10169053
> 
> 赞同：2
> 
> 时间：2012-04-16T05:21:57.523
> 
> 标签：c#, windows-phone-7, xaml

有人可以帮我创建一个带有复选框和星级控件水平对齐的列表框吗？我希望它用于使用 C# 和 XAML 的 WP7。

![在此处输入图像描述](../Images/6c4697e1a15f2b81054e4f0c66ddf405.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:41:05.743

您需要编写一个自定义列表，这是一个示例：

您需要包含 ControlToolkit：

```
xmlns:ControlsToolkit="clr-namespace:System.Windows.Controls" 
```

这是代码：

```
<ListBox x:Name="listBox" SelectionMode="Multiple" 
    ItemContainerStyle="StaticResource  ListBoxCheckedStyle}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                 <CheckBox Checked="{Binding YourPropertyPath}"/>               
                 <TextBlock Text="{Binding Name}" Width="150" VerticalAlignment="Center"/>
                  <ControlsToolkit:Rating Height="50" Grid.Row="0" x:Name="rating" ItemCount="5">
            <ControlsToolkit:Rating.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
                </ItemsPanelTemplate>
            </ControlsToolkit:Rating.ItemsPanel>
        </ControlsToolkit:Rating>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
    </ListBox> 
```

您可以从这里下载示例： [DownloadSample](https://github.com/matthieugd/WP7Samples/tree/master/RatingControlSample)

或在此处查看详细信息： [示例站点](http://wp7wonders.wordpress.com/2010/10/15/use-the-rating-control-in-windows-phone-7/)

您可以获得更多详细信息： [CustomDataTemplateSelector](http://www.windowsphonegeek.com/articles/Implementing-Windows-Phone-7-DataTemplateSelector-and-CustomDataTemplateSelector) [WP7 Checked ListBox in different ways](http://www.windowsphonegeek.com/articles/Implementing-a-WP7-Checked-ListBox-in-different-ways)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:24:30.460

设置`ItemTemplate`：

```
<ListBox>
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Horizontal">
        <CheckBox Checked="{Binding YourPropertyPath}"/>
        <ns:StarControl/>
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

# pointers - 指针可以做什么，否则无法实现？

> ID：10169058
> 
> 赞同：1
> 
> 时间：2012-04-16T05:22:52.270
> 
> 标签：pointers

所以我很难理解指针和所有内存分配背后的想法。

我现在在想，现在计算机如此强大，为什么我们必须使用指针？

在没有指针帮助的情况下，不是总有一种解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:28:42.627

指针是一种间接方式：您不是在使用数据本身，而是在使用指向数据的（某物）。根据语言的语义，这允许做很多事情：便宜地切换到另一个数据实例（通过将指针设置为指向另一个实例），传递指针允许访问原始数据而无需进行（可能很昂贵）复制， ETC。

内存分配与指针有关，但又是分开的：您可以在不分配内存的情况下拥有指针。您需要指针进行内存分配的原因是，分配的内存块所在的实际地址在编译时是未知的，因此您只能通过间接级别（即指针）访问它——编译器为指向动态分配内存的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:31:01.507

指针非常强大。仅仅因为当今计算机的处理时间更快，并不意味着有任何理由放弃像指针这样重要的东西。在堆栈上传递巨大的内存块充其量是低效的，最坏的情况是灾难性的。使用指针，您只需要维护对数据所在位置的引用，而不是每次调用函数时都复制大量内存。

另外，如果你每次都复制所有数据，你如何修改原始数据？除了在每次调用中返回结构的副本之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:50:01.337

我记得在某处读到 Dijkstra 正在评估一个学生的编程课程。这个学生很聪明，但他/她无法解决问题，因为有某种心理障碍。

所有的代码都还可以，但所需要的只是使用表达式

```
a[a[i+1]] = j; 
```

即使如此接近解决方案，目标似乎仍然遥遥无期。

“没有指针”的语言已经存在……例如 BASIC。没有**明确**的指针，就是这样。但是间接的想法......你可以让数据意味着在哪里可以找到其他数据的想法是编程的核心。

数组的真正想法是能够使用计算值来查找其他值。

试图隐藏这个想法是一个可怕的计划。根据 Dijkstra 的说法，任何接触过 BASIC 语言的人都已经受到了这样的精神伤害，作为一个优秀的程序员是不可能恢复的（可能缺乏显式间接是问题之一）。

我觉得他夸大了。

一点点。

# python - 如何通过 python 连接到以太网打印机？

> ID：10169059
> 
> 赞同：1
> 
> 时间：2012-04-16T05:23:29.397
> 
> 标签：python, printing, python-2.7, receipt

如何通过python2.7连接并发送数据到以太网收据打印机Epson-T88V，我已经手动设置了以太网打印机的IP地址并且实用软件通信也成功。我如何检测并连接到这些打印机并发送数据进行打印。python中是否有用于以太网连接的模块。使用多个以太网打印机和从单个系统同时打印的单独数据，我使用的是 windows xp 和 python 2.7 我已将打印机添加为我的默认打印机，我如何访问此 TCP/IP 打印机希望我很清楚谢谢.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:27:32.587

您应该考虑使用[pkipplib](http://pypi.python.org/pypi/pkipplib/0.07)或[wxpython](http://wiki.wxpython.org/index.cgi/Printing)库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:21:25.250

```
import usb
from PIL import Image
import time
import os, sys
import win32print
from constants import *
from exceptions import *
class Escpos:
    """ ESC/POS Printer object """
    handle    = None
    device    = None

    def __init__(self,interface=0, in_ep=0x100, out_ep=0x01) :
        self.interface = interface
        self.in_ep     = in_ep
        self.out_ep    = out_ep
        if sys.version_info >= (3,):
            raw_data = bytes ("This is a test\n", "utf-8")
        else:
            raw_data = "This is Shiva's test\n\n\n\n\n\n\n\n\n\n"

        self.hPrinter = win32print.OpenPrinter ("Auto EPSON TM-T88V ReceiptE4 on SYSTEM")
        self.handle = win32print.OpenPrinter ("EPSON TM-T88V")
    def _raw(self, msg):
        try:
            self.hJob = win32print.StartDocPrinter (self.hPrinter, 1, ("test of raw data", None, "RAW"))
            self.hJob = win32print.StartDocPrinter (self.handle, 1, ("test of raw data", None, "RAW"))
            try:
                win32print.WritePrinter(self.handle, msg)
                win32print.WritePrinter(self.hPrinter, msg)
                win32print.EndDocPrinter (self.handle)
                win32print.EndDocPrinter (self.hPrinter)
            finally:
                print self.hJob
        finally:
            print self.hJob

    def _check_image_size(self, size):
        """Check and fix the size of the image to 32 bits"""
        if size % 32 == 0:
            return (0, 0)
        else:
            image_border = 32 - (size % 32)
            if (image_border % 2) == 0:
                return (image_border / 2, image_border / 2)
            else:
                return (image_border / 2, (image_border / 2) + 1)

    def _print_image(self, line, size):
        i = 0
        cont = 0
        buffer = ""

        self._raw(S_RASTER_N)
        buffer = "%02X%02X%02X%02X" % (((size[0]/size[1])/8), 0, size[1], 0)
        self._raw(buffer.decode('hex'))
        buffer = ""

        while i < len(line):
            hex_string = int(line[i:i+8],2)
            buffer += "%02X" % hex_string
            i += 8
            cont += 1
            if cont % 4 == 0:
                self._raw(buffer.decode("hex"))
                buffer = ""
                cont = 0

    def image(self, img):
        """Parse image and then print it"""
        pixels   = []
        pix_line = ""
        im_left  = ""
        im_right = ""
        switch   = 0
        img_size = [ 0, 0 ]

        im_open = Image.open(img)
        im = im_open.convert("RGB")

        if im.size[0] > 512:
            print  "WARNING: Image is wider than 512 and could be truncated at print time "
        if im.size[1] > 255:
            raise ImageSizeError()

        im_border = self._check_image_size(im.size[0])
        for i in range(im_border[0]):
            im_left += "0"
        for i in range(im_border[1]):
            im_right += "0"

        for y in range(im.size[1]):
            img_size[1] += 1
            pix_line += im_left
            img_size[0] += im_border[0]
            for x in range(im.size[0]):
                img_size[0] += 1
                RGB = im.getpixel((x, y))
                im_color = (RGB[0] + RGB[1] + RGB[2])
                im_pattern = "1X0"
                pattern_len = len(im_pattern)
                switch = (switch - 1 ) * (-1)
                for x in range(pattern_len):
                    if im_color <= (255 * 3 / pattern_len * (x+1)):
                        if im_pattern[x] == "X":
                            pix_line += "%d" % switch
                        else:
                            pix_line += im_pattern[x]
                        break
                    elif im_color > (255 * 3 / pattern_len * pattern_len) and im_color <= (255 * 3):
                        pix_line += im_pattern[-1]
                        break 
            pix_line += im_right
            img_size[0] += im_border[1]

        self._print_image(pix_line, img_size)

    def barcode(self, code, bc, width, height, pos, font):
        """ Print Barcode """
        # Align Bar Code()
        self._raw(TXT_ALIGN_CT)
        # Height
        if height >=2 or height <=6:
            self._raw(BARCODE_HEIGHT)
        else:
            raise BarcodeSizeError()
        # Width
        if width >= 1 or width <=255:
            self._raw(BARCODE_WIDTH)
        else:
            raise BarcodeSizeError()
        # Font
        if font.upper() == "B":
            self._raw(BARCODE_FONT_B)
        else: # DEFAULT FONT: A
            self._raw(BARCODE_FONT_A)
        # Position
        if pos.upper() == "OFF":
            self._raw(BARCODE_TXT_OFF)
        elif pos.upper() == "BOTH":
            self._raw(BARCODE_TXT_BTH)
        elif pos.upper() == "ABOVE":
            self._raw(BARCODE_TXT_ABV)
        else:  # DEFAULT POSITION: BELOW 
            self._raw(BARCODE_TXT_BLW)
        # Type 
        if bc.upper() == "UPC-A":
            self._raw(BARCODE_UPC_A)
        elif bc.upper() == "UPC-E":
            self._raw(BARCODE_UPC_E)
        elif bc.upper() == "EAN13":
            self._raw(BARCODE_EAN13)
        elif bc.upper() == "EAN8":
            self._raw(BARCODE_EAN8)
        elif bc.upper() == "CODE39":
            self._raw(BARCODE_CODE39)
        elif bc.upper() == "ITF":
            self._raw(BARCODE_ITF)
        elif bc.upper() == "NW7":
            self._raw(BARCODE_NW7)
        else:
            raise BarcodeTypeError()
        # Print Code
        if code:
            self._raw(code)
        else:
            raise exception.BarcodeCodeError()

    def text(self, txt):
        """ Print alpha-numeric text """
        if txt:
            self._raw(txt)
        else:
            raise TextError()

    def set(self, align='left', font='a', type='normal', width=1, height=1):
        """ Set text properties """
        # Align
        if align.upper() == "CENTER":
            self._raw(TXT_ALIGN_CT)
        elif align.upper() == "RIGHT":
            self._raw(TXT_ALIGN_RT)
        elif align.upper() == "LEFT":
            self._raw(TXT_ALIGN_LT)
        # Font
        if font.upper() == "B":
            self._raw(TXT_FONT_B)
        else:  # DEFAULT FONT: A
            self._raw(TXT_FONT_A)
        # Type
        if type.upper() == "B":
            self._raw(TXT_BOLD_ON)
            self._raw(TXT_UNDERL_OFF)
        elif type.upper() == "U":
            self._raw(TXT_BOLD_OFF)
            self._raw(TXT_UNDERL_ON)
        elif type.upper() == "U2":
            self._raw(TXT_BOLD_OFF)
            self._raw(TXT_UNDERL2_ON)
        elif type.upper() == "BU":
            self._raw(TXT_BOLD_ON)
            self._raw(TXT_UNDERL_ON)
        elif type.upper() == "BU2":
            self._raw(TXT_BOLD_ON)
            self._raw(TXT_UNDERL2_ON)
        elif type.upper == "NORMAL":
            self._raw(TXT_BOLD_OFF)
            self._raw(TXT_UNDERL_OFF)
        # Width
        if width == 2 and height != 2:
            self._raw(TXT_NORMAL)
            self._raw(TXT_2WIDTH)
        elif height == 2 and width != 2:
            self._raw(TXT_NORMAL)
            self._raw(TXT_2HEIGHT)
        elif height == 2 and width == 2:
            self._raw(TXT_2WIDTH)
            self._raw(TXT_2HEIGHT)
        else: # DEFAULT SIZE: NORMAL
            self._raw(TXT_NORMAL)

    def cut(self, mode=''):
        """ Cut paper """
        # Fix the size between last line and cut
        # TODO: handle this with a line feed
        print "The Cut mode is",mode
        self._raw("\n\n\n\n\n\n")
        if mode.upper() == "PART":
            print "The Cut mode PartCut is true"
            self._raw(PAPER_PART_CUT)
        else: # DEFAULT MODE: FULL CUT
            self._raw(PAPER_FULL_CUT)

    def cashdraw(self, pin):
        """ Send pulse to kick the cash drawer """
        if pin == 2:
            self._raw(CD_KICK_2)
        elif pin == 5:
            self._raw(CD_KICK_5)
        else:
            raise CashDrawerError()

    def hw(self, hw):
        """ Hardware operations """
        if hw.upper() == "INIT":
            self._raw(HW_INIT)
        elif hw.upper() == "SELECT":
            self._raw(HW_SELECT)
        elif hw.upper() == "RESET":
            self._raw(HW_RESET)
        else: # DEFAULT: DOES NOTHING
            pass

    def control(self, ctl):
        """ Feed control sequences """
        if ctl.upper() == "LF":
            self._raw(CTL_LF)
        elif ctl.upper() == "FF":
            self._raw(CTL_FF)
        elif ctl.upper() == "CR":
            self._raw(CTL_CR)
        elif ctl.upper() == "HT":
            self._raw(CTL_HT)
        elif ctl.upper() == "VT":
            self._raw(CTL_VT) 
```

# java - 线程中没有调用 Repaint()

> ID：10169061
> 
> 赞同：0
> 
> 时间：2012-04-16T05:23:47.213
> 
> 标签：java, swing

我有一个实现扑克游戏的 jFrame。我有一个线程，以便计算机对手花时间处理他们的动作。我试图实现它，以便线程在有人轮到时等待。不过，在我将人类玩家放入之前，框架并没有调用`repaint()`. 我已经使用 Netbeans 中的调试器来检查这一点：它确实到达了框架调用的行`repaint()`，但由于某种原因它实际上并没有这样做。这是代码：

```
public void run() {

    for (int i = 0; i < 2; i++) {
        for (int j = 0; j < players.size(); j++) {
            Card card = deck.draw();
            players.get(i).addToHand(card);
            output.append("Player " + players.get(i).getName() + " got a " + card + ".\n");
            System.out.println("Player " + players.get(i).getName() + " got a " + card + ".\n");
        }
    }

    while (true) {

        if (!players.isEmpty() && players.get(0) instanceof HumanPlayer)
            humansTurn = true;

        if (humansTurn) {
            synchronized (this) {
                try {
                    this.wait();
                } catch (InterruptedException e) {
                }
            }
        } else if (humanMoveMade) {
            playMove(humanMove, players.remove(0));
            humanMoveMade = false;
        }else {
            //unrelated code, then:

            debug.update();

            repaint();

            try {
                Thread.sleep(3000);
            } catch (InterruptedException e) {
            }
        }
    }
} 
```

基本上，`else`只要人类玩家不采取行动，它就应该达到那个目标，它确实达到了那个目标`repaint`，但由于某种原因它永远不会通过。窗口出现，但没有任何组件。

编辑：我还应该提到，`debug.update()`之前的方法调用`repaint()`应该更新另一帧上的信息，但该窗口中也没有显示任何内容......

我需要尽快准备好这个，所以我真的需要一些帮助。到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:32:36.663

呃……对不起，虚惊一场。我忘记检查何时创建此框架。原来我不小心调用了该`run()`方法，而不是像往常一样运行线程（我曾尝试过事先实现一些不同的东西）。在返回创建一个新线程并调用`start()`之后，它现在可以工作了。

# asp.net - 使用asp.net连接水晶报表时数据库登录失败

> ID：10169062
> 
> 赞同：0
> 
> 时间：2012-04-16T05:23:54.810
> 
> 标签：asp.net

我在 asp.net 中做了一个水晶报告。我的数据库是 MS-Access 2007。我使用数据集将报表与数据库连接起来。现在，当我执行程序时，它会给出错误“数据库登录失败”。

如何解决这个问题呢 ...

请帮忙..

问候阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:36:00.797

我不知道你如何连接数据集。从您的帖子中，我假设您可能正在填充数据集并使用此数据集与报告进行数据绑定。

在这种情况下，您应该为数据集中的表提供名称。

数据集中表的名称必须与设计报表的表或视图完全匹配。否则水晶报表将无法找到它。

```
ds.Tables[0].Name="yourTableorViewNameHere"; 
```

您还需要为您的报告提供登录信息。

```
private void myLogonInfo(CrystalDecisions.CrystalReports.Engine.ReportDocument myReport)
{
    TableLogOnInfo logOnInfo = new TableLogOnInfo();

    string server = "MyServer";
    string userID = "User1";
    string passwd = "MyPw";
    string DBNAME = "MyDB";

    int i = 0;
    for (i = 0; i <= myReport.Database.Tables.Count - 1; i++)
    {
        logOnInfo.ConnectionInfo.ServerName = server;
        logOnInfo.ConnectionInfo.UserID = userID;
        logOnInfo.ConnectionInfo.Password = passwd;
        logOnInfo.ConnectionInfo.DatabaseName = DBNAME;
        myReport.Database.Tables[i].ApplyLogOnInfo(logOnInfo);
    }
} 
```

**编辑**

这是初始化报告的代码

```
private void ShowRep(dataset ds)
{
ReportDocument rptDoc = new ReportDocument();
rptDoc.Load(Server.MapPath("MyReport.rpt"));

//either assign the dataset to the report here
rptDoc.SetDataSource(ds);

//or provide the login details
//myLogonInfo(rptDoc);

//assign record filtering here
//rptDoc.RecordSelectionFormula = "{RDNewCollections.tdate}>=" + GetCrystalDate(ffdt.Text) ;

// set some report parameters
rptDoc.SetParameterValue(0, ffdt.Text);
rptDoc.SetParameterValue(1, tdt.Text);

//finally assign the report to the reportviewer
Crv.ReportSource = rptDoc;

} 
```

您可以从页面加载中调用它。

如果您使用的是数据集，则无需传递 logonifo。如果您不使用数据集，则必须调用 logoninfo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-06T16:57:35.823

```
ReportDocument rptDoc = new ReportDocument();

rptDoc.Load(Server.MapPath("~/Report/[your-report].rpt"));
rptDoc.SetParameterValue(0, [your-param]);
rptDoc.SetDatabaseLogon(username, password); --> this will solve your issue 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-31T18:27:39.883

![](../Images/31e337d987460b815c55c556a852bfc4.png)

使用 Access 打开您的 db 文件，然后转到选项，然后转到客户端。

之后它将起作用。

# c# - 带有连接字符串的 mongodb 身份验证

> ID：10169064
> 
> 赞同：3
> 
> 时间：2012-04-16T05:23:58.160
> 
> 标签：c#, mongodb

Mongo 进程的连接字符串有 /database 选项。这是什么意思？这是否意味着它对 mongo 服务器上的特定数据库进行身份验证。在此先感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:36:31.397

使用 C# 驱动程序，您通常不会使用将数据库名称放在连接字符串上的选项。部分支持以提供与其他驱动程序的某种程度的兼容性。

MongoServer.Create 忽略数据库名称。连接字符串上的任何凭据（用户名/密码）都用作所有数据库的默认凭据。

数据库名称仅供 MongoDatabase.Create 使用，它调用 MongoServer.Create，然后只为您调用 GetDatabase。

所以：

```
var connectionString = "mongodb://localhost/database";
var database = MongoDatabase.Create(connectionString); 
```

只是一个捷径：

```
var connectionString = "mongodb://localhost";
var server = MongoServer.Create(connectionString);
var database = server.GetDatabase("database"); 
```

在您第一次尝试使用数据库之前，实际上不会发生任何身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-23T22:42:32.230

像这样：

```
var cliente = new MongoClient("mongodb://usuariocualquiera:tuclave@localhost:27017/BASEDEDATOS"); 
```

可以打电话

```
var collection = database.GetCollection<BsonDocument>("CUALQUIERCOLECCION"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:38:53.060

它将连接到命名数据库。如果数据库不存在，它将建立连接，并在创建新对象时实例化数据库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:28:54.860

您将使用在 admin 数据库中创建的用户 mongodb 和 localhost:27017 上的密码 mongodb 创建/返回 mongod 进程的现有实例。您不需要调用 Connect() - 驱动程序将根据需要自动执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-25T17:23:56.427

假设用户帐户是在 admin 数据库中创建的，并且假设您使用的是名为“mongo”的命令行界面 (CLI) 程序，您可以使用以下用户名和密码连接到 3 节点副本集：

**句法：**

```
mongo --host "<replicaset name>/<host 1 resolvable name>:<host 1 port>,<host 2 resolvable name>:<host 2 port>,<host 3 resolvable name>:<host 3 port>" --username <username> --password <password> --authenticationDatabase <database name> 
```

**例子：**

```
mongo --host "replset1/ip-172-31-48-110.eu-west-1.compute.internal:27017,ip-172-31-116-186.eu-west-1.compute.internal:27017,ip-172-31-29-140.eu-west-1.compute.internal:27017" --username barry --password supersecretpassword --authenticationDatabase admin 
```

# c++ - 提升侵入式哈希表

> ID：10169068
> 
> 赞同：1
> 
> 时间：2012-04-16T05:24:09.160
> 
> 标签：c++, boost, hashtable, boost-intrusive

谁能提供一个简单的例子来说明如何使用 Boost Intrusive Hashtable？我试图实现它，但我运气不好。

到目前为止我有这个

```
void HashTableIndex::addToIndex(Message* message)
{
hashtable<MyMessageVector>::bucket_type base_buckets[10000];
hashtable<MyMessageVector> htable(hashtable<MyMessageVector>::bucket_traits(base_buckets, 10000));
boost::array<MyMessageVector,10000> items; 
htable.insert_unique(items[0]); 
```

但由于某种原因，它没有像这样调用上面定义的我的哈希函数

```
size_t HashTableIndex::hash_value(MyMessageVector& b)
{
    boost::hash<string> hasher;
    return hasher(b.getKey());
}; 
```

由于某种原因，它不会调用我的 hash_value 函数。对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:03:34.097

您可以使用选项列表向哈希表提供哈希函数`boost::intrusive::hash`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-07T21:37:58.323

您正在使用成员函数，而 boost::hash 需要一个自由函数。[请参阅 boost::hash 文档：](http://www.boost.org/doc/libs/1_61_0/doc/html/hash/custom.html)

```
namespace library
{
    std::size_t hash_value(book const& b)
    {
        boost::hash<int> hasher;
        return hasher(b.id);
    }
} 
```

您还可以使用类中声明的“朋友”函数，如[Boost.Intrusive unordered_set 文档中所示：](http://www.boost.org/doc/libs/master/doc/html/intrusive/unordered_set_unordered_multiset.html#intrusive.unordered_set_unordered_multiset.unordered_set_unordered_multiset_example)

```
class MyClass
{
   //...
   public:
   friend bool operator== (const MyClass &a, const MyClass &b)
   {  return a.int_ == b.int_;  }

   friend std::size_t hash_value(const MyClass &value)
   {  return std::size_t(value.int_); }
}; 
```

# java - jax-ws/wsimport 生成带有 void 返回的 WebMethod - 相同的 Request/ResponseWrapper

> ID：10169072
> 
> 赞同：17
> 
> 时间：2012-04-16T05:24:59.363
> 
> 标签：java, soap, jax-ws, wsimport

我正在使用客户端的 WSDL 文件，该文件对输入和输出消息使用相同的元素定义，但我无法让 JAX-WS/JAXB 解组响应。

```
<wsdl:message name="invokeServiceRequest">
    <wsdl:part element="impl:requests" name="multiRequestWrapper"/>
</wsdl:message>
<wsdl:message name="invokeServiceResponse">
    <wsdl:part element="impl:requests" name="result"/>
</wsdl:message>
<wsdl:portType name="GCGatewayPortType">
    <wsdl:operation name="requests">
        <wsdl:input message="impl:invokeServiceRequest" name="invokeServiceRequest"/>
        <wsdl:output message="impl:invokeServiceResponse" name="invokeServiceResponse"/>
    </wsdl:operation>
</wsdl:portType> 
```

出于某种原因，由 wsimport 生成的代码返回 void，并且在收到响应时似乎没有更新 INOUT 参数。

```
/**
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.1.7-b01-
 * Generated source version: 2.1
 */
...
@WebMethod
@RequestWrapper(localName = "requests", targetNamespace = "http://cg.test.com/", className = "com.test.cg.RequestsType")
@ResponseWrapper(localName = "requests", targetNamespace = "http://cg.test.com/", className = "com.test.cg.RequestsType")
public void requests(
    @WebParam(name = "paramOne", targetNamespace = "http://cg.test.com/", mode = WebParam.Mode.INOUT)
    Holder<String> paramOne,
    @WebParam(name = "paramTwo", targetNamespace = "http://cg.test.com/", mode = WebParam.Mode.INOUT)
    Holder<String> paramTwo,
    @WebParam(name = "requestList", targetNamespace = "http://cg.test.com/", mode = WebParam.Mode.INOUT)
    Holder<List<RequestType>> requestList); 
```

当我调用 时`port.request( paramOne, paramTwo, requestList )`，我可以看到 SOAP 请求已发送到服务器，该服务器以有效的 SOAP 响应进行响应：

```
<soapenv:Envelope ...>
    <soapenv:Header />
    <soapenv:Body>
        <requests ...>
            <paramOne>1</paramOne>
            <paramTwo>2</paramTwo>
            <requestList>
                <!-- various elements that JAXB has generated code for --> 
```

但是，当我在调试模式下运行我的应用程序时，我可以`RequestType`在调试器变量视图中看到每个实例，但是因为`RequestsType`有一个`<xsd:choice>`with `RequestData`or `ResponseData`，后者是 null 并且`RequestData`我提供了。

我已经在其他项目中成功使用了 JAX-WS，但在这些情况下，它生成的代码具有以`@WebResult`WebResult 命名的非 void 返回类型。在这个项目中，我认为我没有得到 WebResult，因为 JAX-WS 已经决定请求和响应类型是相同的，并且它可以重用相同的对象 - 但是我如何让它使用来自回复？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-10-03T12:30:13.680

您可以通过指示 JAX-WS 禁用包装来解决此问题。这是通过 JAX-WS 绑定文件完成的。

```
<jaxws:bindings xmlns:jaxws="http://java.sun.com/xml/ns/jaxws">
    <jaxws:enableWrapperStyle>false</jaxws:enableWrapperStyle>
</jaxws:bindings> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-23T16:52:09.493

我遇到了完全相同的问题。我尝试了用于各种类型、元素、消息名称、操作名称等的名称。我终于找到了关键，您在问题中所说的话实际上让我接近答案：

> 在这个项目中，我认为我没有得到 WebResult，因为 JAX-WS 已经决定请求和响应类型是相同的，并且它可以重用相同的对象 - 但是我如何让它使用来自回复？

我查看了我的 wsdl，它正在生成类似的 java 代码（使用 void 返回和参数列表而不是单个对象参数）。但我有不同的输入和输出类型。我的wsdl和你的相似吗？

操作的名称与为输入类型定义的元素的名称相同。我建议您将操作名称从“requests”更改为“processRequests”之类的名称，或者保留操作名称，并更改用于消息定义的元素的名称。

```
<wsdl:operation name="requests"> 
```

变成

```
<wsdl:operation name="processRequests"> 
```

我很想知道这是否适合你。

# django - django-haystack urlpatterns include('haystack.urls') 它通向哪里？

> ID：10169079
> 
> 赞同：1
> 
> 时间：2012-04-16T05:25:51.450
> 
> 标签：django, django-haystack, url-pattern

我最近开始学习/安装 django/haystack/solr。

按照 haystack 网站中给出的教程，

```
I have urlpatterns = pattern('', r'^search/', include('haystack.urls')) 
```

我发现 haystack 安装在 /usr/local/lib/python2.6/dist-packages/haystack 并在那里找到 urls.py。

它有

```
urlpatterns=patterns('haystack.views', url(r'^$', SearchView(), name='haystack_search'),) 
```

我认为 url() 的第二个参数应该是可调用对象。
我查看了views.py，SearchView 是一个类。
这里发生了什么？
最终叫什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:37:29.033

不能完全回答您的问题，但类可以是可调用的：

```
>>> class Foo(object):
...     def __call__(self):
...             print "Called me"
... 
>>> 
>>> foo = Foo()
>>> foo()
Called me 
```

# android - 使用 AndroidPlot 在图形上自定义点

> ID：10169080
> 
> 赞同：3
> 
> 时间：2012-04-16T05:25:56.977
> 
> 标签：android, graph, androidplot

任何使用过 AndroidPlot 库的人都会告诉我如何在图表上绘制自定义点。到目前为止，我正在使用 LineAndPointRenderer 类并将行设置为透明。我想至少改变点的大小，但如果可能的话有一个自定义图像。

PS 有 1500 个代表的人需要创建一个“AndroidPlot”标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T02:34:11.883

通过创建我自己的渲染器解决了这个问题。

```
import android.graphics.*;

import com.androidplot.series.XYSeries;
import com.androidplot.exception.PlotRenderException;
import com.androidplot.util.ValPixConverter;
import com.androidplot.xy.LineAndPointFormatter;
import com.androidplot.xy.XYPlot;
import com.androidplot.xy.XYSeriesRenderer;

public class CustomPointRenderer<FormatterType extends LineAndPointFormatter> extends XYSeriesRenderer<FormatterType> {

    private float circleWidth = 1;

    public CustomPointRenderer(XYPlot plot) {
        super(plot);
    }

    @Override
    public void onRender(Canvas canvas, RectF plotArea) throws PlotRenderException {
        for(XYSeries series : getPlot().getSeriesListForRenderer(this.getClass())) {
            drawSeries(canvas, plotArea, series, getFormatter(series));
        }
    }
    @Override
    protected void doDrawLegendIcon(Canvas canvas, RectF rect, FormatterType formatter) {
        // horizontal icon:
        float centerY = rect.centerY();
        float centerX = rect.centerX();

        if(formatter.getFillPaint() != null) {
            canvas.drawRect(rect, formatter.getFillPaint());
        }
        if(formatter.getLinePaint() != null) {
            canvas.drawLine(rect.left, rect.bottom, rect.right, rect.top, formatter.getLinePaint());
        }

        if(formatter.getVertexPaint() != null) {
            canvas.drawPoint(centerX, centerY, formatter.getVertexPaint());
        }
    }

    private void drawSeries(Canvas canvas, RectF plotArea, XYSeries series, LineAndPointFormatter formatter) throws PlotRenderException {
        PointF p = null;
        XYPlot plot = getPlot();
        int size = series.size();

        for (int i = 0; i < size; i++) {
            Number y = series.getY(i);
            Number x = series.getX(i);

            if (y != null && x != null) {
                p = ValPixConverter.valToPix(x, y, plotArea,
                            plot.getCalculatedMinX(),
                            plot.getCalculatedMaxX(),
                            plot.getCalculatedMinY(),
                            plot.getCalculatedMaxY());

                if (formatter.getVertexPaint() != null) {
                    boolean offScreen = p.x > plotArea.right || p.y > plotArea.bottom || p.x < plotArea.left || p.y < plotArea.top; 
                    if(!offScreen)
                        canvas.drawCircle(p.x, p.y - circleWidth, circleWidth, formatter.getVertexPaint());
                }               
            }
        } 
    }

    public void setWidth(float width){
        circleWidth = width;
    }
} 
```

# xcode - 如何在 Xcode 上打开 .pbproj？

> ID：10169081
> 
> 赞同：4
> 
> 时间：2012-04-16T05:26:06.007
> 
> 标签：xcode, xcode4.2, osx-lion

我从 MAC OSX 开发人员库下载了一个示例代码，该代码是 .pbproj（项目生成器）的格式，我无法在 xcode 上打开它。

我已经尝试了以下没有任何运气： -

1) 将 FancyAbout.pbproj 重命名为 Old.xcodeproj

2) 打开 Old.xcodeproj。Xcode 会要求你升级它。将其保存为
FancyAbout.xcodeproj。

3) 项目打开后，选择Project > Upgrade All Targets in
Project to Native... 升级到Xcode构建系统

4）构建并运行。

我在 4.3.2 上运行带有 Xcode 的 Mac 10.7.3

有人对我如何在 xcode 中运行它有任何建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T21:15:25.843

据我所知，较旧的 Project Builder，甚至较旧的 Xcode 项目都无法直接打开或升级。您可以升级的唯一真正方法是找到能够打开和升级旧项目的先前版本的 Xcode，然后使用旧 Xcode 保存项目，然后查看最新的 Xcode 是否能够打开升级后的项目。

或者，只需创建一个新的 Xcode 项目并将旧项目中的所有源文件复制到新项目中，然后从那里开始。与尝试查找旧版本的 Xcode 进行升级相比，此选项可能要容易得多。

# ios - 在常规应用程序中使用报亭

> ID：10169082
> 
> 赞同：1
> 
> 时间：2012-04-16T05:26:22.097
> 
> 标签：ios, newsstand-kit

我可以在常规应用程序中使用 NewsStandKit 吗？我需要在我的常规应用程序中使用 NKLibrary、NKIssue 和 NKAssetDownload 类，你认为苹果会通过吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:19:28.780

除非您的应用程序是报亭应用程序，否则您将无法使用它们。苹果会拒绝它。

# asp.net-mvc - 全局使用 BindAttribute

> ID：10169088
> 
> 赞同：0
> 
> 时间：2012-04-16T05:27:54.627
> 
> 标签：asp.net-mvc, asp.net-mvc-4

在 ASP.NET MVC (4) 应用程序中，我使用了一个 3rd 方 Javascript 库，该库会自动神奇地发回一个名称不佳 (IMO) 的查询字符串参数。我可以使用以下方法在模型绑定中截取此值：

```
public ActionResult MyAction([Bind(Prefix="rp")] int pageSize = 50) 
{
} 
```

但是，在我使用分页的所有地方中的这段代码很快就会变得令人厌烦。

**是否可以在 ASP.NET MVC 中全局设置具有特定前缀/替换组合的 [BindAttribute]？**

一种解决方法是修改 Javascript 库（不受欢迎）；或`Request.QueryString`手动从属性中获取参数；但我希望保持清洁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:06:44.203

您可以使用视图模型：

```
public class MyViewModel
{
    public int PageSize { get; set; }
} 
```

在您的控制器操作中：

```
public ActionResult MyAction(MyViewModel model) 
{
    ...
} 
```

然后为此视图模型编写一个自定义模型绑定器：

```
public class MyViewModelBinder: DefaultModelBinder
{
    protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
    {
        bindingContext.ModelName = "rp";
        base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
    }
} 
```

将在以下位置注册`Application_Start`：

```
ModelBinders.Binders.Add(typeof(MyViewModel), new MyViewModelBinder()); 
```

# c# - 在 WP7 上用 C# 解析 Web 浏览器数据

> ID：10169091
> 
> 赞同：0
> 
> 时间：2012-04-16T05:28:11.767
> 
> 标签：c#, windows-phone-7, browser

我正在为 Windows Phone 7 开发应用程序，但遇到了一个奇怪的问题。我有以下代码：

```
 void webBrowser1_Navigated(object sender,System.Windows.Navigation.NavigationEventArgs e)
   {
    update_goals(e.Uri.OriginalString, webBrowser1.SaveToString()); 
```

它调用一个函数来检查 webBrowser1.SaveToString() 中的所有数据。我的问题是，update_goals 函数并不总是正确解析数据。我尝试过调试，但每次我下断点时，代码都可以正常工作。此外，如果我似乎在 update_goals 函数中完全暂停（例如；显示一个消息框），它也可以正常工作。有没有人知道是什么导致了这种行为？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:45:25.700

您是否尝试过将 update_goals 方法调用放在 LoadCompleted 事件处理程序中：-

[http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser.loadcompleted(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser.loadcompleted(v=vs.92).aspx)

# c# - 使用正则表达式将多语言字符串拆分为单语言标记

> ID：10169092
> 
> 赞同：5
> 
> 时间：2012-04-16T05:28:19.460
> 
> 标签：c#, regex

我想使用正则表达式将多语言字符串拆分为单语言标记。

例如对于这个英语-阿拉伯语字符串：

> “他的名字是محمد，他的母亲名字是آمنه。”

结果必须如下：

1.  '他以前的名字是 '
2.  '重要的，'
3.  '而他母亲的名字是'
4.  'آمنه.'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T05:45:27.630

它并不完美（你肯定需要在一些真实世界的例子中尝试一下，看看它是否合适），但这是一个开始：

```
splitArray = Regex.Split(subjectString, 
    @"(?<=\p{IsArabic})    # (if the previous character is Arabic)
    [\p{Zs}\p{P}]+         # split on whitespace/punctuation
    (?=\p{IsBasicLatin})   # (if the following character is Latin)
    |                      # or
    (?<=\p{IsBasicLatin})  # vice versa
    [\s\p{P}]+
    (?=\p{IsArabic})", 
    RegexOptions.IgnorePatternWhitespace); 
```

如果前面的字符来自阿拉伯语块并且后面的字符来自基本拉丁块（反之亦然），则会在空格/标点符号上进行拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:56:08.030

```
System.Text.RegularExpressions.Regex regx = new System.Text.RegularExpressions.Regex(@"([\s\(\:]*[a-zA-Z]+[\s\)\:]*)+");
var matchs = regx.Matches(input).Cast<System.Text.RegularExpressions.Match>().ToList(); 
```

# c++ - wxWIDGETS IN C++ Errors In The Program-Edited

> ID：10169095
> 
> 赞同：0
> 
> 时间：2012-04-16T05:28:23.390
> 
> 标签：c++, compiler-errors, wxwidgets

我有以下代码，我正在用 C++ 编程：- 我按照成员在此处给出的说明将代码更改为：-

```
 #include <iostream>
 #include <cstdlib>
 #include <cstdio>
 #include <wx/thread.h>
 #include <wx/log.h>
 #include <wx/app.h>

 using namespace std;

 class MyThread;

 class MyThread : public wxThread {
 public:

 MyThread(unsigned int& c);

 virtual ~MyThread();

 wxThreadError Create(unsigned int stackSize = 0);
 wxThreadError Run();
 wxThreadError Delete(ExitCode* rc = NULL, wxThreadWait waitMode =    
 wxTHREAD_WAIT_BLOCK);
 virtual ExitCode Entry();

 private:

 unsigned int& counter;
 };
 MyThread::MyThread(unsigned int& c)
 {
 counter = c;
 }
 MyThread::~MyThread()
 {

 }

 wxThread::ExitCode MyThread::Entry()
 {
 while(counter < 0xFFFFFFFF)
    ++counter;
 return 0;

 }
 int main(int argc, char** argv) {
 unsigned int uiCounter = 0;

 MyThread *mt = new MyThread(unsigned int&);
 if (mt) {
     if (mt->MyThread::Create() == wxTHREAD_NO_ERROR) {
        if (mt->MyThread::Run() == wxTHREAD_NO_ERROR) {

        }
    }
    mt->Delete();
 }
 char cChar = ' ';
 while (cChar != 'q') {
    cout << uiCounter<< endl;
    cChar = (char) getchar();
  }
 return 0;
  } 
```

现在面临着令人沮丧的错误

```
 newmain.cpp: In constructor 'MyThread::MyThread(unsigned int&)':
 newmain.cpp:38:1: error: uninitialized reference member 'MyThread::counter' [-   
 fpermissive]

 newmain.cpp: In function 'int main(int, char**)':
 newmain.cpp:57:33: error: expected primary-expression before 'unsigned' 
```

在这个问题中，我正在做的是我有两个线程，一个是 main()，另一个是我从 wxthread 派生的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:47:09.043

编译器消息告诉您如何删除错误。从顶部开始，一一解决。

```
newmain.cpp:23:25: error: 'Entry' declared as a 'virtual' field 
```

所以错误就在这一行

```
virtual void *Entry(LPVOID param); 
```

看看 wxThread::Entry() 的定义，可以在这里找到[http://docs.wxwidgets.org/2.8/wx_wxthread.html#wxthreadentry](http://docs.wxwidgets.org/2.8/wx_wxthread.html#wxthreadentry)

您将立即看到基本方法有一个返回值并且没有参数。您创建的用于覆盖基本方法的函数必须执行相同的操作。

# java - 制作具有活动渲染的屏幕管理器类

> ID：10169097
> 
> 赞同：1
> 
> 时间：2012-04-16T05:28:40.410
> 
> 标签：java, swing

我正计划制作一个游戏，并希望窗口具有 3 种不同的模式：一个 800 x 500 的小窗口、一个最大化的窗口和一个全屏窗口。我计划使用主动渲染将图形绘制`jframe`到. 我正在使用带有 2 个缓冲区的 a。为了解决将已经可见的屏幕设置为全屏的问题，每次窗口的尺寸都发生变化（它不能由窗口本身调整大小，只能通过程序中的按钮调整），给定适当的大小，创建一个新的，并且将包含组件的a添加到. 出于某种原因，每次我用来自`paint``components``layeredpane``bufferstrategy``jframe``jpanel``paint``frame``bufferstrategy`，有一个偏移量（在 0,0 处绘制一些东西，会显示在 -3、-20 左右，我不知道为什么。当我只是用图形绘制或用图形调用绘制组件时会发生这种情况（在当前jframe的分层面板）。您可以提供的任何帮助将不胜感激。`enter code here`

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ScreenManager {

private GraphicsDevice device;
private JFrame window;
private int sizeState;
private JPanel contentPane;
private String title;
private Rectangle maxBounds;    

public static final int SMALL_WINDOW = 1;
public static final int MAXIMIZED_WINDOW = 2;
public static final int FULLSCREEN_WINDOW = 3;

private static final int SMALL_WIDTH = 800;
private static final int SMALL_HEIGHT = 500;

public ScreenManager(String s){     
    NullRepaintManager.install();
    title = s;      
    GraphicsEnvironment environment = GraphicsEnvironment.getLocalGraphicsEnvironment();        
    maxBounds = environment.getMaximumWindowBounds();
    device = environment.getDefaultScreenDevice();  
    contentPane = new JPanel();             
    resetJFrame();      
    setSmallWindow();       
}

public JPanel getPanel(){
    return contentPane;
}

public Graphics2D getGraphics(){
    while(true){
        if(window != null){     
    try{
    return (Graphics2D) window.getBufferStrategy().getDrawGraphics();
    }catch(Exception e){}
    }       
}
}
public void update(){
    if(window != null && !window.getBufferStrategy().contentsLost()){
        window.getBufferStrategy().show();
    }

    Toolkit.getDefaultToolkit().sync();
}

public int getWidth(){
    if(window != null){
        return contentPane.getWidth();
    }
    return 0;
}

public int getHeight(){
    if(window != null){
        return contentPane.getHeight();
    }
    return 0;
}

public void paintComponents(Graphics2D g){      
        if(window != null){
            contentPane.paintComponents(g);
                }
        }

public void closeWindow(){          
    System.exit(0);
}

public void setSmallWindow(){
    if(window != null && sizeState != ScreenManager.SMALL_WINDOW){
    resetJFrame();      
    window.setSize(ScreenManager.SMALL_WIDTH, ScreenManager.SMALL_HEIGHT);      
    contentPane.setSize(ScreenManager.SMALL_WIDTH, ScreenManager.SMALL_HEIGHT);
    window.setLocationRelativeTo(null);         
    window.setVisible(true);        
    window.createBufferStrategy(2);         
    sizeState = ScreenManager.SMALL_WINDOW;     
}
}

public void setMaximizedWindow(){
    if(window != null && sizeState != ScreenManager.MAXIMIZED_WINDOW){
    resetJFrame();
    window.setSize((int) maxBounds.getWidth(), (int) maxBounds.getHeight());    
    contentPane.setSize(window.getWidth(), window.getHeight());
    window.setLocation(0,0);
    window.setVisible(true);        
    window.createBufferStrategy(2);     
    sizeState = ScreenManager.MAXIMIZED_WINDOW;     
}
}

public void setFullScreenWindow(){
    if(window != null && sizeState != ScreenManager.FULLSCREEN_WINDOW){
        resetJFrame();      
        window.setUndecorated(true);
        device.setFullScreenWindow(window);
        contentPane.setSize(window.getWidth(), window.getHeight());
        window.createBufferStrategy(2);
        sizeState = ScreenManager.FULLSCREEN_WINDOW;            
    }
}

private void resetJFrame(){
    if(sizeState == ScreenManager.FULLSCREEN_WINDOW){
        device.setFullScreenWindow(null);
    }

    if(window != null){
        window.dispose();
        window = null;
    }

    window = new JFrame(title);         
    window.setResizable(false);         
    window.setIgnoreRepaint(true);
    window.addWindowListener(new WindowExitAdapter());
    window.add(contentPane);            
    contentPane.setOpaque(false);       
}

private class WindowExitAdapter extends WindowAdapter{

    public void windowClosing(WindowEvent 
e){                     
        closeWindow();
    }               
}
 }

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class ScreenManagerTest implements ActionListener{

private ScreenManager sm;
private JButton fullscreenButton;
private JButton smallScreenButton;
private JButton maxScreenButton;
private JButton quitButton;
private boolean isRunning = true;

private int sizeState = 1;

public static void main(String[] args) {
    new ScreenManagerTest().go();       
}

public void go(){
    sm = new ScreenManager("Nertz! Solitaire");
    sm.getPanel().setLayout(new BorderLayout());
    fullscreenButton = new JButton("Set Fullscreen");       
    sm.getPanel().add(fullscreenButton, BorderLayout.CENTER);
    smallScreenButton = new JButton("Set Small Screen");        
    sm.getPanel().add(smallScreenButton, BorderLayout.WEST);
    maxScreenButton = new JButton("Set Max Screen");        
    sm.getPanel().add(maxScreenButton, BorderLayout.EAST);
    quitButton = new JButton("Exit Program");       
    sm.getPanel().add(quitButton, BorderLayout.SOUTH);
    fullscreenButton.addActionListener(this);
    smallScreenButton.addActionListener(this);
    maxScreenButton.addActionListener(this);
    quitButton.addActionListener(this);

    while(isRunning == true){           
        switch(sizeState){

        case ScreenManager.FULLSCREEN_WINDOW:
            sm.setFullScreenWindow();
            break;
        case ScreenManager.MAXIMIZED_WINDOW:
            sm.setMaximizedWindow();
            break;
        case ScreenManager.SMALL_WINDOW:
            sm.setSmallWindow();
            break;
        }
        draw(sm.getGraphics());         
        try{
            Thread.sleep(20);
        }catch(Exception e){}
    }
    sm.closeWindow();
}

public void draw(Graphics2D g){ 
    sm.paintComponents(g);
    sm.update();

    g.dispose();
}

public void actionPerformed(ActionEvent event){
    if(event.getSource() == fullscreenButton){
        sm.setFullScreenWindow();
        sizeState = ScreenManager.FULLSCREEN_WINDOW;
    }
    if(event.getSource() == smallScreenButton){
        sm.setSmallWindow();
        sizeState = ScreenManager.SMALL_WINDOW;
    }
    if(event.getSource() == maxScreenButton){
        sm.setMaximizedWindow();    
        sizeState = ScreenManager.MAXIMIZED_WINDOW;
    }
    if(event.getSource() == quitButton){
        isRunning = false;  
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:58:47.417

> 出于某种原因，每次我用缓冲区策略中的图形绘制一些东西时，都会有一个偏移量（在 0,0 处绘制一些东西，会出现在 -3、-20 左右，我不知道为什么。

只是一个疯狂的猜测......也许你不是从 (0,0) 而是从零帧开始绘画，因为 (-3, -20) 点似乎是窗口零坐标（小边框@左和 ~20px 窗口标题） ?

如果您实际上是从 (0,0) 绘制但坐标移动到 (-3, -20) 并且这实际上是一个窗口边框 - 您可以在绘制方法的开始处添加一个小补丁：

```
protected void paintComponent ( Graphics g )
{
    Point wl = SwingUtilities.getWindowAncestor ( this ).getLocationOnScreen ();
    Point los = this.getLocationOnScreen ();
    Point zero = new Point ( los.x-wl.x, los.y-wl.y );
    g.translate ( zero.x, zero.y );

    // ...
} 
```

但我仍然无法解释为什么会发生这种情况。也许你在窗口和全屏模式之间切换时保存了零坐标，这会导致这样的问题......

# asp.net - 如何重新编译上传的 ASP.NET 网站的 DLL？

> ID：10169099
> 
> 赞同：0
> 
> 时间：2012-04-16T05:28:43.997
> 
> 标签：asp.net

大家好，我只需要你的一点帮助，关于重新编译 ASP 网站 DLL。

我是一名业余 Web 开发人员，我知道你们中的一些人也遇到过这种情况，当我们通过 Internet 上传我们的 ASP 网站时，有时，我们忘记了一些需要服务器端代码的重要功能，对我来说，我的编辑方式ASP .cs 文件或 .config 文件使用 FileZilla，我只需选择要编辑的特定文件并查看/编辑它。现在的问题是，每次我对此类文件进行一些更改时，当我重新上传它时，我添加的代码将无法再读取。所以我认为这是一个DLL问题，所以为了解决它，我再次下载了整个网站并重新编译它，我再次删除了服务器上的那个并上传了更新的那个。总是需要一个多小时才能完成上传/下载，真的很累很耗时，只需编辑数千个文件中的一个文件。那么任何人都可以提出一种更简单的方法吗？任何有关此问题的答复将不胜感激....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:38:16.117

您应该考虑设置本地（开发）和生产环境。然后您将在本地测试您的更改，然后将您的 ASP.NET 文件部署到您的生产环境。根据您使用的 VS.NET 版本，您可以使用不同的方法进行部署。有关详细信息，请参阅以下链接：

[VS.NET 2005 ASP.NET 部署](http://msdn.microsoft.com/en-us/library/ms178610%28v=vs.80%29.aspx)

[VS.NET 2010 网络部署](http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx)

# google-app-engine - 如何在 Google App Engine 中编辑使用 Django 表单提交的信息

> ID：10169102
> 
> 赞同：2
> 
> 时间：2012-04-16T05:29:45.897
> 
> 标签：google-app-engine, django-models

感谢您的小费。也许我可以编辑它以更好地解释它......

我正在为 Google App Engine 编写一个应用程序，我想在其中执行 GQL 查询以获取已提交的每种类型的所有评估。我希望允许用户单击链接来编辑每个单独的评估，然后提交更改。这是我发现的最好的方法......

```
class EvaluationApproval(webapp.RequestHandler):
   def get(self):
      #search for unapproved general evaluations
      query = db.GqlQuery("SELECT * FROM GeneralAssessmentReport WHERE Approved = False")

      if query.count() != 0:
         for item in query:
            #create a link to edit that item
            self.response.out.write('<a href="generalFromApprove?key=%s">%s</a>' % (item.key(), item.Name))

    #do this for each type of evaluation...

    query = db.GqlQuery("SELECT * FROM HeadNeck WHERE Approved = False")
    if query.count() != 0:
        for item in query:
            self.response.out.write('<a href="headNeckApprove?key=%s">%s</a>' % (item.key(), item.Name))

    query = db.GqlQuery("SELECT * FROM lowerExtremity WHERE Approved = False")
    if query.count() != 0:
        for item in query:
            self.response.out.write('<a href="lowerApprove?key=%s">%s</a>' % (item.key(), item.Name)) 
```

所以，当用户点击他们被定向到的链接时......

```
class GeneralFormApprove(webapp.RequestHandler):
   def get(self):
      # get the correct evaluation to approve
      key = self.request.get('key')
      item = GeneralAssessmentReport.get(key)

      #write out the form with key in the form action!
      self.response.out.write('<form method="POST" action="/generalFormApprove?key=%s">' % key)
      self.response.out.write(GeneralAssessmentReportForm(instance=item))

   def post(self):
      # get the key once more
      key = self.request.get('key')

      data = GeneralAssessmentReportForm(data=self.request.POST,instance=GeneralAssessmentReport.get(key))
      if data.is_valid():
         # save the edited evaluation
         entity = data.save(commit=False)
         entity.put() 
```

然后为每种类型的评估创建一个 WhatFormApprove 类。这有意义吗？您还有其他想法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:46:30.883

对于编辑现有实体，一个好方法是使用包含实体 id 的 url 模式。发布后，您可以使用 id 加载实体，然后在表单的实例参数中使用它。

url 模式类似于：

```
r'^evaluationapproval/(?P<item_id>[\d]+)/$'

def post(self,item_id=None):
    item = None
    if item_id:
        item = db.get(db.Key.from_path('MyModelKind',int(item_id)))
        #... 
```

# c# - 如果我有多个具有不同属性值的文件，如何设置复选框的不确定状态？

> ID：10169103
> 
> 赞同：0
> 
> 时间：2012-04-16T05:29:58.033
> 
> 标签：c#, winforms, wcf, checkbox

我正在尝试从我的小文件资源管理器 [ListView]
[就像在 Windows 中右键单击某些选定的文件/文件夹并选择属性时一样，为选定的项目创建一个属性表单。]

表单显示名称、位置、类型、大小和**属性**

它是一个 [WCF 服务] 服务器客户端应用程序，因此我从一个名为**Multi**的方法从服务器获取属性，该方法在其自己的线程中启动。

**问题是：**如果多个文件具有 [Hidden] 和 [Readonly] 的不同属性值，我该如何设置 CheckState.Indeterminate。

![在此处输入图像描述](../Images/70c0a1a4111962fc0fd763b662c23472.png)

```
WCF_Client.FM_ServiceReference.FileManagerClient client;

private void Form_MultiProp_Load(object sender, EventArgs e)
    {
        Thread th = new Thread(Multi);
        th.Start();
    }

private void GetAttributes(FileAttributes fAttributes)
    {
        this.Invoke((MethodInvoker)delegate
        {
            if (fAttributes != 0)
            {
                if ((fAttributes & FileAttributes.Hidden) == FileAttributes.Hidden)
                    Hidden.Checked = true;
                if ((fAttributes & FileAttributes.ReadOnly) == FileAttributes.ReadOnly)
                    ReadOnly.Checked = true;
            }
        });
    }

    public void Multi()
    {
        foreach (Item item in itemCollection)
        {
            GetAttributes(client.GetAttributeOfPath(item.Path));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:51:10.857

您应该为第一个文件设置 Hidden 和 ReadOnly 复选框，然后在找到具有不同属性的文件时将它们设置为 Indeterminate：

```
private void GetAttributes(FileAttributes fAttributes)
{
    this.Invoke((MethodInvoker)delegate
    {
        if (fAttributes != 0)
        {
            bool hidden = (fAttributes & FileAttributes.Hidden) == FileAttributes.Hidden;
            if (Hidden.Checked != hidden)
                Hidden.CheckState = CheckState.Indeterminate;
            bool readOnly = (fAttributes & FileAttributes.ReadOnly) == FileAttributes.ReadOnly;
            if (ReadOnly.Checked != readOnly)
                ReadOnly.CheckState = CheckState.Indeterminate;
        }
    });
}

public void Multi()
{
    FileAttributes fAttributes = client.GetAttributeOfPath(item[0].Path)
    this.Invoke((MethodInvoker)delegate
    {
        if (fAttributes != 0)
        {
            Hidden.Checked = (fAttributes & FileAttributes.Hidden) == FileAttributes.Hidden;
            ReadOnly.Checked = (fAttributes & FileAttributes.ReadOnly) == FileAttributes.ReadOnly;
        }
    });
    for (int i = 1; i < itemCollection.Count; i++)
    {
        Item item = itemCollection[i];
        GetAttributes(client.GetAttributeOfPath(item.Path));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:20:10.000

我在一个列表中添加了所有属性，然后调用 Checking 方法来确定 ReadonlyCheckBox 和 HiddenCheckBox 中的 CheckState 应该是什么，**Checking**方法检查是否`prev attribute == next attribute`设置 CheckState。

```
List<FileAttributes> listAttributes = new List<FileAttributes>();

private void HiddenInvoke(CheckState HiddenState)
    {
        this.Invoke((MethodInvoker)delegate
        {
            Hidden.CheckState = HiddenState;
        });
    }
    private void ReadOnlyInvoke(CheckState ReadOnlyState)
    {
        this.Invoke((MethodInvoker)delegate
        {
            ReadOnly.CheckState = ReadOnlyState;
        });
    }
    private void HiddenCheck(bool check)
    {
        this.Invoke((MethodInvoker)delegate
        {
            Hidden.Checked = check;
        });
    }
    private void ReadOnlyCheck(bool check)
    {
        this.Invoke((MethodInvoker)delegate
        {
            ReadOnly.Checked = check;
        });
    }

public void Multi()
    {
        try
        {
            long SizeAll = 0;
            int fileCount = 0, folderCount = 0;
            LocInvoke(Loc);
            foreach (ListViewItem item in SelectedItems)
            {
               // some other calculations..
                if (client.IsFile(item.ToolTipText))
                    TypeInvoke(++fileCount, folderCount);
                else if (client.IsFolder(item.ToolTipText))
                    TypeInvoke(fileCount, ++folderCount);
               // Adding Attributes to a list
                listAttributes.Add(client.GetAttributeOfPath(item.ToolTipText));
               //Size Calculation
                SizeInvoke(CnvrtUnit(SizeAll += client.GetSizeOfPath(item.ToolTipText)));
            }
            Checking();
            Finished("OK", true);
        }
        catch { } //in case user closes the form before it finishes
    }

private void Checking()
    {
        bool hiddenSet = false;
        bool readonlySet = false;
        for (int i = 1; i < listAttributes.Count; i++)
        {
            if (hiddenSet && readonlySet)   //checks if they already different then there's no need to check again
                return;
            if (!hiddenSet)
            {
                if ((listAttributes[i - 1] & FileAttributes.Hidden) == (listAttributes[i] & FileAttributes.Hidden))
                {
                    HiddenCheck((listAttributes[i] & FileAttributes.Hidden) == FileAttributes.Hidden);
                }
                else
                {
                    HiddenInvoke(CheckState.Indeterminate);
                    hiddenSet = true;
                }
            }
            if (!readonlySet)
            {
                if ((listAttributes[i - 1] & FileAttributes.ReadOnly) == (listAttributes[i] & FileAttributes.ReadOnly))
                {
                    ReadOnlyCheck((listAttributes[i] & FileAttributes.ReadOnly) == FileAttributes.ReadOnly);
                }
                else
                {
                    ReadOnlyInvoke(CheckState.Indeterminate);
                    readonlySet = true;
                }
            }
        }
    } 
```

![在此处输入图像描述](../Images/8b9bd6fa9a7b2496546535e2fc88bbcc.png)

# javascript - Jquery/JavaScript 字符串匹配

> ID：10169104
> 
> 赞同：1
> 
> 时间：2012-04-16T05:30:03.980
> 
> 标签：javascript, jquery

我比较了两个字符串。如果 str1 匹配 str2 的 80%，那么它应该返回 true。否则它应该返回false。请帮助我找到解决方案。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:43:03.903

您可以使用[`similar_text()`](http://phpjs.org/functions/similar_text:902)which 的行为几乎类似于[PHP 的等价 similar_text()](http://www.php.net/manual/en/function.similar-text.php)

# mysql - 可以使这个 SQL 查询更快吗？

> ID：10169111
> 
> 赞同：3
> 
> 时间：2012-04-16T05:30:57.980
> 
> 标签：mysql

只是好奇是否有可能使这个查询更快？或者是否有任何其他类似的查询会更好？

```
SELECT id,source FROM posts
WHERE id = ANY(SELECT image_id FROM `post_tags` WHERE tag_id = (SELECT id FROM `tags` WHERE tag = _utf8 '$TAG' collate utf8_bin))
  AND posts.exists = 'n'
ORDER BY posts.ratecount DESC
LIMIT 0,100 
```

不使用：

```
 AND posts.exists = 'n'
ORDER BY posts.ratecount
DESC LIMIT 0,100 
```

它可以加快查询到可用级别，但对于我正在做的事情有点需要这个。

*   Tags 表具有“tag”和“id”的唯一索引。
*   标签有 83K 行。
*   Post_tags 具有“image_id”、“tag_id”的唯一索引。也是每个的正常索引。
*   Post_tags 有 471K 行。
*   帖子具有“id”的唯一索引。'exists' 和 'ratecount' 的正常索引也是如此。
*   Posts 表有大约 110 万行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:22:13.367

你的 TAG 表是什么样子的？它是否仅包含 ID 和 TAG 字段？我会创建一个唯一索引，`TAG(TAG, ID)`因此最里面的查询只是搜索索引。

POST_TAGS 表呢？它只是 TAG_ID 和 IMAGE_ID 的组合吗？同样，我会在`POST_TAGS(IMAGE_ID, TAG_ID)`.

请注意，索引中字段的顺序很重要，并且索引与解析计划中使用`POST_TAGS(TAG_ID, IMAGE_ID)`的索引有很大不同。`POST_TAGS(IMAGE_ID, TAG_ID)`

并且在 POSTS 表中具有唯一索引`POSTS(ID, POSTS, RATEACCOUNT)`会有所帮助（我知道它是一个冗余索引，并且会在 INSERT、UPDATE 和 DELETE 上产生额外的成本，但它会在此查询中为您提供帮助）。

顺便说一句，在内部查询中使用 JOIN 可能会给您带来性能提升，只需检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:30:41.683

正如有人建议的那样，设法使用 JOIN 使其工作。

```
SELECT * FROM posts
LEFT JOIN post_tags ON post_tags.image_id = posts.id
JOIN tags ON post_tags.tag_id = tags.id
WHERE tags.tag = _utf8 '$tag' collate utf8_bin
  AND posts.exists = 'n'
ORDER BY posts.ratecount DESC
LIMIT 0,100 
```

所需时间从 22 秒 > 0.26 秒减少。

# javascript - 沙盒保护允许用户上传样式的网站

> ID：10169113
> 
> 赞同：2
> 
> 时间：2012-04-16T05:31:03.920
> 
> 标签：javascript, security, sandbox

Tumblr、Posterous 等很多网站都允许用户上传自己的风格。个人样式可能包含 HTML、Javascript 和服务器代码。所以我的问题是

1.  如何防止用户上传恶意服务器代码。

2.  如何防止用户上传恶意客户端代码（Javascript）。

我相当了解如何通过限制要使用的函数集来解决（1）。我更关心（2），因为过滤不良代码非常困难。这些样式可能包含恶意代码，这些代码将用户会话发送到某些外部来源，然后伪造他们的身份。我注意到上传的样式不在外部框架中，因此窃取用户会话似乎是一个明显的问题。

有没有人对上述问题有更好的了解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:00:46.993

1.  不允许用户上传服务器代码。
2.  不允许用户上传客户端代码。

过滤所有恶意代码是不可能的。谷歌正试图在 Play 商店中这样做，并定期证明这一点。

# c# - 在c#中将大字符串拆分成更小的块

> ID：10169117
> 
> 赞同：0
> 
> 时间：2012-04-16T05:32:15.350
> 
> 标签：c#, .net

我有一个由换行符分隔的大字符串。该字符串包含 100 行。我想将这些行分成小块，比如 20 块也基于换行符。

假设字符串变量是这样的，

> Line1
> 这是 line2
> Line3 在这里
> 我是 Line4

现在我想把这个大字符串变量分成2个小块。结果应该是2个字符串，

> 线路 1
> 这是线路 2
> 
> * * *
> 
> Line3 来了
> 我是 Line4

使用拆分功能，我没有得到预期的结果。请帮助我实现这一目标。

在此先感谢，
维杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:08:12.457

简单的方法（在 Environment.NewLine 上拆分，然后循环并附加）：

```
public static List<string> GetStringSegments(string originalString, int linesPerSegment)
{

    List<string> segments = new List<string>();
    string[] allLines = originalString.Split(new string[] {Environment.NewLine}, StringSplitOptions.RemoveEmptyEntries); 
    StringBuilder sb = new StringBuilder();

    int linesProcessed = 0;
    for (int i = 0; i < allLines.Length; i++)
    {
        sb.AppendLine(allLines[i]);
        linesProcessed++;

        if (linesProcessed == linesPerSegment
            || i == allLines.Length-1)
        {
            segments.Add(sb.ToString());
            sb.Clear();
            inesProcessed = 0;
        }
    }

    return segments;
} 
```

上述方法效率稍低，因为它需要首先将字符串拆分为单独的行，这会创建不必要的字符串。一个 1000 行的字符串将创建一个包含 1000 个字符串的数组。如果我们只扫描字符串并搜索，我们可以改进这一点`\n`：

```
public static List<string> GetStringSegments(string original, int linesPerSegment)
{
    List<string> segments = new List<string>();

    int startIndex = 0;
    int newLinesEncountered = 0;

    for (int i = 0; i < original.Length; i++)
    {
        if (original[i] == '\n')
        {
            newLinesEncountered++;
        }

        if (newLinesEncountered == linesPerSegment
            || i == original.Length - 1)
        {
            segments.Add(original.Substring(startIndex, (i - startIndex + 1)));
            startIndex = i + 1;
            newLinesEncountered = 0;
        }
    }

    return segments;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T05:51:34.867

您可以使用[http://www.make-awesome.com/2010/08/batch-or-partition-a-collection-with-linq中的批处理运算符之类的东西](http://www.make-awesome.com/2010/08/batch-or-partition-a-collection-with-linq)

```
string s = "[YOUR DATA]";
var lines = s.Split(new[]{Environment.NewLine}, StringSplitOptions.RemoveEmptyEntries);
foreach(var batch in lines.Batch(20))
{
  foreach(batchLine in batch)
  {
    Console.Writeline(batchLine);
  }
}

static class LinqEx
{
  // from http://www.make-awesome.com/2010/08/batch-or-partition-a-collection-with-linq
  public static IEnumerable<IEnumerable<T>> Batch<T>(this IEnumerable<T> collection,
                int batchSize)
  {
    List<T> nextbatch = new List<T>(batchSize);
    foreach (T item in collection)
    {
      nextbatch.Add(item);
      if (nextbatch.Count == batchSize)
      {
        yield return nextbatch;
        nextbatch = new List<T>(batchSize);
      }
    }
    if (nextbatch.Count > 0)
      yield return nextbatch;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T06:30:48.433

正如一些人提到的， using`string.Split`会将整个字符串拆分到内存中，这可能是一个分配繁重的操作。这就是为什么我们有这个`TextReader`类及其后代，它们*应该*提供更好的内存性能，并且在逻辑上也可能更清晰：

```
using (var reader = new StringReader(myString))
{
    do
    {
        StringBuilder newString = null;
        StringWriter newStringWriter = null;
        if (lineCounter % 20 == 0)
        {
             newString = new StringBuilder();
             newStringWriter = new StringWriter(newString);
             newStringCollection.Add(newString);
        } 
        string line = reader.ReadLine();
        if (!string.isNullOrEmpty(line))
        {
             newStringWriter.WriteLine(line);
             lineCounter++;
        }
    }
    while (line != null)
} 
```

我们使用`StringReader`来读取我们的大字符串，一次一行。相应的`StringWriter`将这些行写入新字符串，一次一行。每 20 行之后，我们开始一个新的`StringBuilder`（和适当的`StringWriter`包装器）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T05:44:14.760

用换行符分割字符串。然后在使用字符串时将字符串的数量合并/获取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T05:58:20.863

```
string s = "Line1\nThis is line2 \nLine3 is here\nI am Line4";

string [] str = s.split('\n');

List<String> str1 = new List<String>();

for(int i=0; i<str.Length; i+=2)
{
    string ss = str[i];

    if(i+1 <str.Length)
        ss += '\n' + str[i+1];

    str1.Add(ss);
}

str = str1.ToArray(); 
```

如果在循环内检查了条件，因为 str 的长度可能是奇数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T06:05:20.790

```
var strAray = myLongString.Split('\n').ToList();
var skip=0;
var take=20;

var chunk = strAray.Skip(skip).Take(take).ToList();

While(chunk.Count >0)
{
foreach(var line in chunk)
{
// use line string
}
skip++;
chunk = strAray.Skip(skip).Take(take).ToList()
} 
```

# android - 在android中使用cocos2d时如何刷新页面

> ID：10169120
> 
> 赞同：0
> 
> 时间：2012-04-16T05:32:57.257
> 
> 标签：android, sprite, page-refresh, cocos2d-android

我已经向页面添加了一些精灵，并且我正在向同一页面添加新的精灵，基于触摸操作删除所有以前的精灵。每次触摸后都需要刷新。那么，这个提神任务怎么做呢？蒂亚...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:29:11.953

我刚刚使用 removeAllChildren(true) 删除了所有精灵，并使用 CCDirector.sharedDirector().runWithScene(scene) 重新加载了页面。现在，它工作正常

# javascript - kendo 移动 JSON 数据调用

> ID：10169122
> 
> 赞同：0
> 
> 时间：2012-04-16T05:32:58.217
> 
> 标签：javascript, jquery, kendo-ui, jquery-events

我已经编写了一个从 PHP 获取 JSON 数据并将其放入 listview 的代码，它在 localhost 中运行良好。当我将 PHP 文件放入 Web 服务器并在 Javascript 中调用时，它显示错误并且没有获取数据。

这个方法我用过：

```
 var dataSource = new kendo.data.DataSource({
                transport: {
                    read: {

                       //url: "userchk.php",    //this works in localhost  
                       url: "http://example.com/web/userchk.php",  this is not working in localhost 

                        dataType: "json", // JSONP (JSON with padding) is required for cross-domain AJAX
                        data: { //additional parameters sent to the remote service
                            q: "javascript"
                        }
                    }
                }, 
```

第一个 url 数据进入 localhost 并且运行良好，第二个 url 不工作（但数据显示我们是否在浏览器中运行 url）。

它显示如下错误：

> XMLHttpRequest 无法加载[http://example.com/web/userchk.php?q=javascript](http://example.com/web/userchk.php?q=javascript)。Access-Control-Allow-Origin 不允许来源 http://localhost。
> 
> 等待好的回应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:10:33.007

This is related to the same origin policy that most web browsers implement. It seems like the php file you are trying to access is in another server other than your current one (localhost).

**If you are tyring to access local:**

> I suggest you change the url to /web/userchk.php

**If you are are trying to access another site**

> I suggest you change the dataType to "jsonp"

Try looking at the kendoUI datasource [example](http://demos.kendoui.com/web/datasource/remote-data.html) with twitter. They try to access twitter (a different origin) using jsonp.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T07:50:06.643

这可能是由于跨域问题。您需要使用 datatype:jsonp .. 从 ODATA 版本 2.0 提要读取数据的示例代码如下，

```
 studentsData = new kendo.data.DataSource(
            {
                type: "odata",
                transport: {
                    read: {

                        url: "http://server/Service.svc/Students",
                        dataType: "jsonp",

                        data: {
                            Accept: "application/json"
                        }
                    }
                },
                serverfiltering: false,
                serverPaging: true,
                batch: false,
                pageSize: 10

            }); 
```

您可以[阅读完整的“Windows Phone 应用程序中的 Kendo UI ListView 控件和 OData”帖子](http://debugmode.net/2012/05/16/kendo-ui-listview-control-and-odata-in-windows-phone-application/ "Windows Phone 应用程序中的 Kendo UI ListView 控件和 OData")。

谢谢@debug_mode

# spotify - 删除 Spotify 应用的 IndexDB

> ID：10169124
> 
> 赞同：1
> 
> 时间：2012-04-16T05:33:07.593
> 
> 标签：spotify

我正在使用 spotify Apps api，并尝试使用 IndexedDB api。我的数据库处于错误状态，我想删除它并重新开始，但我想不出任何方法来删除它。

**检查器中资源中的数据库部分是空**的，我在 ~/Library/Application Support/Spotify 文件夹中看不到任何 indexedDB 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:02:21.203

如果您使用的是本地存储 API，则应该只能使用本地存储 API 来删除文件。如果这不起作用，请退出 Spotify 并删除以下文件夹：

*   ~/图书馆/应用程序支持/Spotify
*   ~/Library/Caches/com.spotify.client

Spotify 将在下次启动时处于干净状态。

# sql - 将 SQL 查询中的日期字段从 00:00 GMT 修改为 12:00 GMT

> ID：10169125
> 
> 赞同：1
> 
> 时间：2012-04-16T05:33:24.943
> 
> 标签：sql, sql-server-2008, datetime, timezone

我需要针对特定​​日期调整三个查询以适应不同的时区。这些查询从前一天、日期范围和当天提取交易数据。服务器时间是格林威治标准时间，查询目前可以正常工作，以根据格林威治标准时间服务器时间提取交易数据。这一天从格林威治标准时间 00:00 开始，当然是基于服务器时间的日历日。但是，我需要查询从格林威治标准时间 12:00 开始，而不是格林威治标准时间 00:00。查询如下（TransactionDate 字段的数据类型是日期时间）：

查询 1 该查询从前一天提取特定客户的交易摘要，查询的 WHERE 子句如下：

```
WHERE TransactionDate >= DateAdd(DD, DateDiff(DD, 0, GETDATE())-1, 0) AND TransactionDate < DateAdd(DD, DateDiff(DD, 0, GETDATE()), 0) 
```

查询 2 此查询有两个日期参数，并为所提供的日期范围提供相同的交易数据。查询的 WHERE 子句如下：

```
WHERE TransactionDate BETWEEN @StartDateParam AND @EndDateParam 
```

查询 3 最后一个查询拉取特定客户当天的交易摘要，查询的 WHERE 子句如下：

```
WHERE TransactionDate >= CONVERT(CHAR(10),GETDATE(),120) 
```

同样，这些查询适用于当前的 GMT 服务器时间。有人可以为我提供正确的方法来调整每个查询中的日期时间字段的时间元素，以便时段从格林威治标准时间 15:00 开始，而不是当前格林威治标准时间 00:00 开始时间。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:15:24.983

（根据评论改写。）

我建议您*仅*使用开始部分或第二个版本进行查询。

只需确保传入适合您感兴趣的时区的正确值`StartDateParam`。`EndDateParam`您不需要在查询中进行所有转换，对吗？

另请注意，“介于”令人讨厌地包含终点……对于您真正想说的 DATETIME 字段之类的内容来说，这很痛苦`start <= datetime < end`……

# c++ - 热键、快捷键和加速键有什么区别？

> ID：10169132
> 
> 赞同：26
> 
> 时间：2012-04-16T05:34:27.737
> 
> 标签：c++, windows, qt

1.  他们有什么区别？

2.  在 Qt 中，如果我有 QPushButton 的热键，我可以按“Alt + ？”，但如果是 qaction，我可以按“？” 只要

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-16T06:04:10.307

在 Windows 中，**加速键**是应用程序全局的；例如`Alt`+ `F4`。

**快捷键**是菜单项或按钮名称的一部分，可以在其中添加下划线，并且在该菜单项或按钮直接可用时可用（不带修饰符）。

来自微软：

> **热键**是用户可以按下以快速执行操作的组合键。例如，用户可以创建一个热键来激活给定窗口并将其带到 z 顺序的顶部。

这似乎表明热键是系统全局的。

总结一下：

*   快捷键 = 无修饰符，菜单中的本地或窗口中的（按钮）
*   加速键 = 通常带有修饰符，应用程序全局
*   热键 = 显然系统全局

我不知道 Qt 中的具体含义；为此，请参阅 Qt 文档。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-16T07:59:17.490

[Alf 的回答](https://stackoverflow.com/a/10169360/594137)对于 Windows 的适用性是正确的。从纯 Qt 的角度来看，您提到的术语（热键/快捷方式/加速器）听起来并不熟悉。

在 Qt 中，您可以选择自己处理键序列，也可以使用 Qt 自己的简化方法。无论哪种方式，您都必须记住，Qt 本身针对许多平台，在这些平台上，组合键可能有意义，也可能没有意义。经典的`Alt`+`F4`在键盘上是有意义的，但在移动设备上你没有`Alt`修饰符或`F4`键。您真正想要的是一种指定通用*关闭应用程序*快捷方式的方法。这个问题成倍增加，因为该符号可能可用，但到达它的按键顺序在其他键盘布局上可能不同。[文档的这一部分](http://qt-project.org/doc/qt-4.8/qkeysequence.html#keyboard-layout-issues)提供了一个很好的示例。

Qt 用[`class QKeySequence`](http://qt-project.org/doc/qt-4.8/qkeysequence.html). 非常聪明的 Qt 开发人员提供了一种定义常见用户操作的简单方法，这些操作将使用目标平台默认的组合键。它使用[`enum QKeySequence::StandardKey`](http://qt-project.org/doc/qt-4.8/qkeysequence.html#StandardKey-enum)并在*关闭应用程序*示例中执行此操作，您可以像这样使用它：

```
QAction exitAction;
exitAction.setShortcut(QKeySequence(QKeySequence::Quit)); 
```

这在[文档](http://qt-project.org/doc/qt-4.8/qkeysequence.html#details)中都有解释。还有另外两个修饰符 ([`shortcutContext()`](http://qt-project.org/doc/qt-4.8/qaction.html#shortcutContext-prop)和[`softKeyRole()`](http://qt-project.org/doc/qt-4.8/qaction.html#softKeyRole-prop)) 可以应用于 QAction，它们以更高级的方式影响它们的应用。

您还可以使用以下方式自由分配自己的快捷方式：

```
QAction helpAction(tr("&?"));
helpAction.setShortcut(QKeySequence(tr("ALT+?"))); 
```

第一行应用（翻译的）文本“？” 到将作为其文本出现在菜单或按钮上的操作。请注意，问号符号可能不是所有语言中的正确符号，因此 translate 方法允许翻译者在需要时分配更合适的符号。& 符号表示菜单激活时紧随其后的字符将成为快捷键。

第二行指定`Alt`+的（翻译的）快捷方式，`?`在此示例中，`Shift`如果需要，平台将处理修饰符。同样，该`tr()`方法允许翻译者指定更合适的快捷方式（如果可用）。

* * *

*回应 teukkam 的评论：*

如果您的意思是您只是希望您的按钮可以通过击键触发，无论它是否被修改，`Alt`那么您可以执行以下操作：

```
QPushButton* yourButton; // assign this pointer yourself
yourButton->setText(tr("&Process"));
yourButton->setShortcut(tr("p")); 
```

在本例中，与号 in`setText()`的作用与上例相同，translate 函数的使用方式相同。

该`setShortcut()`方法仅使用字母“p”，因此现在可以使用或不使用`Alt`修饰符。快速浏览一下文档表明，无论有没有`Shift`修饰符，这都可以使用，因为键序列中的字母显然不区分大小写。

此外， P 将是一个糟糕的选择，因为它通常被认为是*打印*命令。

最后一点，如果您要定义硬编码的快捷方式，请确保它们适用于您的所有目标平台！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-04T08:49:53.853

在 Windows 中：

# 热键

**在给定上下文中执行命令的**键盘键或键组合。****

 **## 捷径

**多键热键**，没有菜单导航限制，也不需要 gui 元素。

### 访问密钥

**单键 HotKey**哪个命令用于激活**可见的命令控件** （需要 gui 元素），该控件带有相应的热键字母加下划线的标题/标签。

### 加速键

**多键 HotKey**哪个命令用于激活**命令控件**（需要 gui 元素），无论其可见性如何。**

# java - 将数组一分为二，找到两个 Max 值，然后合并这两个值

> ID：10169134
> 
> 赞同：1
> 
> 时间：2012-04-16T05:35:24.790
> 
> 标签：java, arrays

我正在上在线课程，所以没有老师或其他同学的任何帮助。我们的任务是我们需要找到一个随机数数组的最大值和索引。我们需要通过两种方式来做到这一点。一个常规循环（蛮力）和分而治之。在分而治之中，我们需要将数组拆分为两个较小的数组并找到两者的最大值然后合并。

我得到了蛮力的工作，我得到了分而治之，也找到了最大值。但我似乎无法获得两个较小数组的最大值并将两者合并。我们还需要检查两种方法进行了多少比较并打印输出。

这是我到目前为止所拥有的：

```
 public class MinMaxValues{  

 // Find maxiumum (largest) value in array using Divide and Conquer

 public static int findMax( int[]numbers, int left, int right )
 {
 int middle;
 int max_l, max_r, max_m;

 if ( left == right )    // Only one element...
 {  
    // Base case: solved easily...

    return numbers[left];
 }
 else
 {

    // Solve smaller problems

    middle = (left+right)/2;   // Divide into 2 halves

    max_l = findMax( numbers, left, middle);  
               // Find max in first half 

    max_r = findMax( numbers, middle+1, right);  
               // Find max in second half
      //System.out.println("Maximum Value = " + max_r);   
    max_m = max_l+ max_r;

    // Use the solutions to solve original problem

    if ( max_l > max_r )
       return(max_l);
    else
       return(max_r);
          //return(max_m);

  }
  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T23:16:28.177

您需要更仔细地处理程序中要比较索引或该索引值的点。例如`max_l > max_r`，我相信您的意思不是检查是否，而是检查是否`numbers[max_l] > numbers[max_r]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:28:50.273

你永远不会返回一个数组。

此外，您无需对数组进行任何更改。

找到最大值后，您必须以某种方式更改数组。

尝试用一种方法包装它。

```
 public static int[] maxSort(int[] array,int length){
   int[] sorted = new int[array.length];
   sorted[arrayLength]=findmax(array,0,sorted,arrayLength);//assumes find max returns                         maximum value of entire array.
   while(length>0){
   sorted=maxsort(array,length--);
   }
   return sorted;
   } 
```

我不是 100% 确定它是否有效，我认为这是朝着正确方向迈出的一步。

# php - 浏览器忽略来自 ajax 响应的标头刷新

> ID：10169135
> 
> 赞同：1
> 
> 时间：2012-04-16T05:35:29.623
> 
> 标签：php, javascript, html, ajax, http

在我的 javascript 中，我有一些`$.getJSON({...})`针对各种操作的 ajax 请求。我有一个处理这些 ajax 请求的 php 应用程序。在处理实际请求之前，我的应用程序首先检查会话，如果用户尚未登录，它会发回刷新信号。就像是：

```
if (not logged in) {
header('Refresh: 0;');
}
else {
//process request
} 
```

但是客户端实际上并没有刷新。当涉及到 AJAX 请求和 http 刷新标头时，我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T05:39:09.647

在被告知之前，AJAX 请求不会影响浏览器。意思是，如果我使用 AJAX 获取页面，它会被返回，可能存储在一个变量中，仅此而已。之后它什么也不做。您需要解析返回数据并采取相应措施。

在您的情况下，您可能宁愿返回 JSON 之类的内容，让客户端解析返回数据的含义，然后采取相应措施。

我倾向于做类似的事情：

```
{
    "directives": {
        //contains directives what to do first before parsing the data
        "whatToDo" : "redirect" 
    },
    "payload" : {
        //actual page data
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:41:26.830

因此，您在请求中调用的文件包含 header('Refresh: 0;'); ? 因为这根本没有效果，所以我会做的是，如果用户未登录，则返回一个唯一的字符串，如下所示：

```
if (not logged in) {
    echo "NOTLOGGEDIN";
}
else {
    //process request
} 
```

然后在您的 AJAX 请求中检查他们是否已登录：

```
$.get("someURL", function(data) {
    if(data == "NOTLOGGEDIN"){
        //Do something
    } else{
        //Display data
    }
}); 
```

# c# - SQL Server 2005 在代码隐藏中访问 FileUpload 控件

> ID：10169137
> 
> 赞同：0
> 
> 时间：2012-04-16T05:35:48.737
> 
> 标签：c#, .net

我想在代码隐藏中访问 FileUpload 控件。这是我的代码： FileUpload file = (FileUpload)this.FindControl("FleUpload");

并且控件位于 FormView 中。但是在我运行项目后“文件”的值为空。我应该怎么做才能访问 formview 中的 FileUpload 控件？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:42:11.300

我试过这段代码：

```
if(FormView1.CurrentMode == FormViewMode.Edit){
  FileUpload f = (FileUpload) FormView1.FindControl("FleUpload");
  .... then rest of code
} 
```

它奏效了。

# c# - Office 365：使用 Power Shell 脚本问题连接到 Office Online 365 服务

> ID：10169140
> 
> 赞同：3
> 
> 时间：2012-04-16T05:36:08.597
> 
> 标签：c#, sharepoint, powershell, cmdlets

我有 Windows Server 2008 R2 机器，它有 Power Shell v1.0。我想使用带有 C# 的 Power Shell 连接到 MS 365 在线服务。我已安装 Office 365 cmdlet 和 Microsoft Online Services 登录助手。（参考： http: [//onlinehelp.microsoft.com/en-us/office365-enterprises/hh124998.aspx#BKMK_install](http://onlinehelp.microsoft.com/en-us/office365-enterprises/hh124998.aspx#BKMK_install) ）

我的脚本是：

```
$password = ConvertTo-SecureString "xxxxx" -AsPlainText –Force

$credential = New-Object System.Management.Automation.PsCredential("xxxx@xxxx.onmicrosoft.com",$password)

$cred = Get-Credential -cred $credential

Import-Module MSOnline

Connect-Msolservice -cred $cred 
```

我可以在 Power Shell 命令窗口中成功运行此脚本。但是我在 c# 应用程序中运行这个脚本时遇到问题。

这是我的 C# 代码：

```
 public void RunScript()
    {
        StringBuilder ss = new StringBuilder();
        ss.AppendLine("$password = ConvertTo-SecureString \"" + pwd + "\" -AsPlainText –Force");
        ss.AppendLine("$credential = New-Object  System.Management.Automation.PsCredential(\"" + userName + "\",$password)");
        ss.AppendLine("$cred = Get-Credential -cred $credential");
        ss.AppendLine("Import-Module MSOnline");
        ss.AppendLine("Connect-Msolservice -cred $cred");

        using (Runspace runspace = RunspaceFactory.CreateRunspace())
        {
            Collection<PSObject> results = null;
            try
            {
                runspace.Open();
                Pipeline pipeline = runspace.CreatePipeline();
                pipeline.Commands.AddScript(ss.toString());

                results = pipeline.Invoke();
            }
            finally
            {
                runspace.Close();
            }                
        }
    } 
```

我得到以下异常：

术语“Connect-Msolservice”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

有什么遗漏吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:22:57.310

```
InitialSessionState iss = InitialSessionState.CreateDefault();
iss.ImportPSModule(new string[] { "MSOnline" });

using (Runspace runspace = RunspaceFactory.CreateRunspace(iss))
{
// blah
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T14:01:40.180

请确保您已安装以下内容：

```
 1\. SharePoint Online Management Shell
 2\. Microsoft Online Services Sign-In Assistant version 7.0 or greater version
 3\. Windows Azure Active Directory Module 
```

# sql-server - 引用技术密钥的外键

> ID：10169141
> 
> 赞同：1
> 
> 时间：2012-04-16T05:36:26.850
> 
> 标签：sql-server

所以，我有一个像这样创建的表：

```
create table CharacterSavingThrow
(
    CharacterCode int not null,
    constraint FK_CharacterSavingThrowCharacterID foreign key (CharacterCode) references Character(CharacterCode),
    FortitudeSaveCode int not null,
    constraint FK_CharacterSavingThrowFortitudeSaveCode foreign key (FortitudeSaveCode) references SavingThrow(SavingThrowCode),
    ReflexSaveCode int not null,
    constraint FK_CharacterSavingThrowReflexSaveCode foreign key (ReflexSaveCode) references SavingThrow(SavingThrowCode),
    WillSaveCode int not null,
    constraint FK_CharacterSavingThrowWillSaveCode foreign key (WillSaveCode) references SavingThrow(SavingThrowCode),
    constraint PK_CharacterSavingThrow primary key clustered (CharacterCode, FortitudeSaveCode, ReflexSaveCode, WilSaveCode)

) 
```

我需要知道如何从另一个表的约束中引用该表的主键？似乎是一个非常简单的问题，有没有可能，对吧？谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:51:52.053

是的 - 非常简单 - 您只需要指定完整的复合索引，例如，您的其他表也需要在此处具有构成 PK 的那四列，然后 FK 约束将是：

```
ALTER TABLE dbo.YourOtherTable
ADD CONSTRAINT FK_YourOtherTable_CharacterSavingThrow
FOREIGN KEY(CharacterCode, FortitudeSaveCode, ReflexSaveCode, WilSaveCode)
REFERENCES dbo.CharacterSavingThrow(CharacterCode, FortitudeSaveCode, ReflexSaveCode, WilSaveCode) 
```

关键是：如果您有一个**复合主键**（由多个列组成），任何其他想要引用该表的表也必须具有所有这些列并将所有这些列用于 FK 关系。

此外，如果您正在编写将连接这两个表的查询 - 您将必须使用**复合 PK 中包含的所有列**进行连接。

这是使用四列作为 PK 的主要缺点之一 - 它使 FK 关系和 JOIN 查询非常麻烦，并且编写和使用起来非常烦人。出于这个原因，在这种情况下，我可能会选择在表中使用单独的**代理**`INT IDENTITY`键 - 例如在您的表上引入一个新的`dbo.CharacterSavingThrow`作为主键，这将使引用该表和编写 JOIN**变得更加容易**使用该表的查询。

# c - 在 c 中处理字符串

> ID：10169143
> 
> 赞同：4
> 
> 时间：2012-04-16T05:36:31.077
> 
> 标签：c

有人可以帮我理解这个程序下面程序中的这些代码行，根据作者它写一个hello world字符串然后里面有一个函数也可以将字符串反转为world hello，我的任务是这段代码做什么?

```
char * p_divs = divs; //what does divs do
    char tmp;
    while(tmp = *p_divs++)
        if (tmp == c) return 1 
```

;

void函数中的这段代码

```
*dest = '\0';//what does this pointer do?
    int source_len = strlen(source); //what is source
    if (source_len == 0) return;
    char * p_source = source + source_len - 1;
    char * p_dest = dest;
    while(p_source >= source){
        while((p_source >= source) && (inDiv(*p_source, divs))) p_source--; 
```

这是主程序

```
#include <stdio.h>
#include <string.h>

int inDiv(char c, char * divs){
    char * p_divs = divs;
    char tmp;
    while(tmp = *p_divs++)
        if (tmp == c) return 1;
    return 0;
}

void reverse(char * source, char * dest, char * divs){
    *dest = '\0';
    int source_len = strlen(source);
    if (source_len == 0) return;
    char * p_source = source + source_len - 1;
    char * p_dest = dest;
    while(p_source >= source){
        while((p_source >= source) && (inDiv(*p_source, divs))) p_source--;
        if (p_source < source) break;
        char * w_end = p_source;
        while((p_source >= source) && (!inDiv(*p_source, divs))) p_source--;
        char * w_beg = p_source + 1;
        for(char * p = w_beg; p <= w_end; p++) *p_dest++ = *p;
        *p_dest++ = ' ';
    }
    *p_dest = '\0';
}

#define MAS_SIZE 100

int main(){
    char source[MAS_SIZE], dest[MAS_SIZE], divs[MAS_SIZE];
    printf("String          : "); gets(source);
    printf("Dividers        : "); gets(divs);
    reverse(source, dest, divs);
    printf("Reversed string : %s", dest);
    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:21:59.463

这里可以调用 inDiv 来搜索`c`字符串中的字符`divs`，例如：

```
inDiv('x', "is there an x character in here somewhere?') will return 1
inDiv('x', "ahhh... not this time') will return 0 
```

通过它工作：

```
int inDiv(char c, char * divs)
{
    char * p_divs = divs;    // remember which character we're considering
    char tmp;
    while(tmp = *p_divs++)   // copy that character into tmp, and move p_divs to the next character
                             // but if tmp is then 0/false, break out of the while loop
         if (tmp == c) return 1;  // if tmp is the character we're searching for, return "1" meaning found
    return 0;   // must be here because tmp == 0 indicating end-of-string - return "0" meaning not-found
} 
```

`reverse`我们可以通过查看调用站点来推断：

```
int main()
{
    char source[MAS_SIZE], dest[MAS_SIZE], divs[MAS_SIZE];
    printf("String          : ");
    gets(source);
    printf("Dividers        : ");
    gets(divs);
    reverse(source, dest, divs);
    printf("Reversed string : %s", dest); 
```

我们可以看到`gets()`从标准输入读取到字符数组的调用，`source`然后`divs`-> 将这些输入提供给`reverse()`. 打印出来的方式`dest`，显然是要作为字符串反转的目的地`source`。在这个阶段，没有洞察力的相关性`divs`。

让我们看看源...

```
void reverse(char * source, char * dest, char * divs)
{
    *dest = '\0'; //what does this pointer do?
    int source_len = strlen(source); //what is source
    if (source_len == 0) return;
    char* p_source = source + source_len - 1;
    char* p_dest = dest;
    while(p_source >= source)
    {
        while((p_source >= source) && (inDiv(*p_source, divs))) p_source--; 
```

在这里，`*dest = '\0'`将一个 NUL 字符写入字符数组`dest`- 这是编码字符串结尾位置的正常标记值 - 将它放在第一个字符处`*dest`意味着我们希望清除目标。我们知道`source`我们将要反转的文本输入 -`strlen()`将设置`source_len`为其中的字符数。如果没有字符，那么`return`因为没有工作要做并且输出已经以 NUL 终止。否则，将`p_source`创建一个新指针并将其初始化为`source + source_len - 1`->，这意味着它指向源代码中的*最后一个*非 NUL 字符。 `p_dest`指向目标缓冲区开头的 NUL 字符。

然后循环说：`while (p_source >= source)`- 为此做任何事情`p_source`必须首先是- 作为最后一个字符的点并且是缓冲区中的第一个字符地址是`>= source`有意义的；比较意味着我们将一个或两个移向另一个，直到它们交叉 - 每次都做一些工作。这使我们：`p_source``source`

```
while((p_source >= source) && (inDiv(*p_source, divs))) p_source--; 
```

这是我们刚刚看到的相同测试 - 但这次我们只是`p_source`向后移动到字符串的开头，而`inDiv(*p_source, divs)`这也是正确的......这意味着字符 at`*p_source`是字符串中的字符之一`divs`。它的意思基本上是：向后移动，直到你超过了字符串的开头（尽管这个测试有未定义的行为，正如 Michael Burr 在评论中指出的那样，如果字符串恰好被分配在地址 0 上，真的可能不起作用 -即使相对于某些特定的数据段，因为指针可以从 0 变为类似于 FFFFFFFF 十六进制的值，而不会看起来小于 0），或者直到您找到一个不是“分隔符”字符之一的字符。

在这里，我们对代码的作用有了一些真正的了解......将输入分成由输入中的任何一组字符分隔的“单词” `divs`，然后将它们以相反的顺序用空格分隔符写入目标缓冲区。这有点超前了 - 但让我们跟踪一下：

下一行是...

```
if (p_source < source) break; 
```

...这意味着如果循环退出时已超过源字符串的前面，则退出所有循环（向前看，我们看到代码只是在已经生成的输出的末尾放置了一个新的 NUL 并返回- 但这是我们所期望的吗？ - 如果我们一直通过“hello world”中的“hello”支持，那么我们会点击字符串的开头并终止循环，而不会将最后一个“hello”单词复制到输出！输出将始终是输入中的所有单词 - 除了第一个单词 - 反转 - 这不是作者描述的行为）。

否则：

```
char* w_end = p_source;  // remember where the non-divider character "word" ends

// move backwards until there are no more characters (p_source < source) or you find a non-divider character
while((p_source >= source) && (!inDiv(*p_source, divs))) p_source--;

// either way that loop exited, the "word" begins at p_source + 1
char * w_beg = p_source + 1;

// append the word between w_beg and w_end to the destination buffer
for(char* p = w_beg; p <= w_end; p++) *p_dest++ = *p;

// also add a space...
*p_dest++ = ' '; 
```

输入中的每个“单词”都会发生这种情况，然后最后一行将 NUL 终止符添加到目的地。

```
*p_dest = '\0'; 
```

现在，你说：

> 根据 [to] 作者，它写了一个 hello world 字符串，然后其中有一个函数，它也将字符串反转为 world hello

好吧，给定输入“hello world”和包含空格的分隔符（但输入中没有其他字符），那么输出将是“hello world”（注意末尾的空格）。

对于它的价值 - 这段代码还不错......对于 ASCIIZ 缓冲区的 C 处理来说是很正常的，尽管关于输入长度的假设是危险的并且它丢失了第一个单词......

** 如何修复未定义的行为 **

关于未定义的行为 - 对地址的最小更改是更改循环，以便它们在缓冲区开始时终止，并让下一行明确检查它终止的原因并确定需要什么行为。那会有点难看，但不是火箭科学……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T05:41:45.680

```
char * p_divs = divs; //what does divs do
char tmp;
while(tmp = *p_divs++)
    if (tmp == c) return 1 
```

`divs`是指向 char 数组（当然是字符串）的指针。`p_divs`只是指向同一个字符串，并且在 while 循环中提取单个字符并将其写入`tmp`，然后指针递增，这意味着下一个字符将在下一个迭代器中提取。如果`tmp`匹配`c`，则函数返回。

**编辑：**您应该了解有关指针的更多信息，请查看[Pointer Arithmetic](https://stackoverflow.com/questions/394767/pointer-arithmetic)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:43:12.557

正如我在评论中指出的那样，我不认为 C 真的是完成这项任务的理想工具（如果可以选择，我会毫不犹豫地使用 C++）。

但是，我想如果我要谈论代码有多糟糕，反驳意见确实是正确的：我应该发布更好的东西。然而，与有问题的评论相反，我认为这并不代表优雅、简洁或性能方面的妥协。

唯一可能对真正争论开放的部分是优雅，但认为这足够简单和直接，在这方面几乎没有真正的问题。它显然更简洁——使用与原始格式大致相同的格式约定，我的 rev_words 是 14 行而不是 17 行。大多数人会格式化它们，我的是 17 行，他是 21 行。

对于性能，我希望在大多数情况下两者*大致相当。*我的避免了从数组的开头跑掉，这节省了一点时间。原版包含一个提前退出，这将节省一点点反转空字符串的时间。不过，我认为两者都微不足道。

我认为还有一点更重要：我有理由确定我的不会像原来那样使用/调用/依赖未定义的行为。我想有些人可能会认为如果它在另一个领域提供了*巨大*的优势是合理的，但鉴于它在其他领域大致并列或逊色，我无法想象在这种情况下谁会认为它（甚至接近）是合理的.

```
#include <string.h>
#include <stdlib.h>

#include <stdio.h>

int contains(char const *input, char val) {
    while (*input != val && *input != '\0')
        ++input;
    return *input == val;
}

void rev_words(char *dest, size_t max_len, char const *input, char const *delims) {
    char const *end = input + strlen(input);
    char const *start;
    char const *pos;

    do {
        for (; end>input && contains(delims, end[-1]); --end);
        for (start=end; start>input && !contains(delims,start[-1]); --start);
        for (pos=start; pos<end && max_len>1; --max_len) 
            *dest++=*pos++;
        if (max_len > 1) { --max_len; *dest++ = ' '; }
        end=start;
    } while (max_len > 1 && start > input);
    *dest++ = '\0';
}

int main(){ 
    char reversed[100];

    rev_words(reversed, sizeof(reversed), "This is an\tinput\nstring with\tseveral words in\n     it.", " \t\n.");
    printf("%s\n", reversed);
    return 0;
} 
```

编辑：该：

```
if (max_len > 1) { --max_len; *dest++ = ' '; } 
```

真的应该是：

```
if (max_len > 1 && end-start > 0) { --max_len; *dest++ = ' '; } 
```

如果你想允许 max_len < 1，你可以改变：

```
*dest++ = '\0'; 
```

至：

```
if (max_len > 0) *dest++ = '\0'; 
```

如果缓冲区长度可以通过来自（可能是敌对的）用户的输入以某种方式设置，那可能是值得的。对于许多目的，只需要一个正缓冲区大小就足够了。

# wordpress - Wordpress 自定义表单高级

> ID：10169145
> 
> 赞同：0
> 
> 时间：2012-04-16T05:36:34.477
> 
> 标签：wordpress

只是一个快速的，你知道任何允许我创建表单的 wordpress 表单插件，并且根据他们选择的选项，它会显示一些提交到所选电子邮件的信息。

我试图为客户实现一个网络请求表，并希望他们能够填写信息以及为一定数量的问题选择一个复选框。例如，“您想更新自己的内容吗？”

如果他们选中此框，我希望表单呈现表单中的所有信息，然后根据选中的复选框，它会给我一些不同的内容。我正在尝试自动化提案模板，以便它将所有这些内容写入电子邮件中，以便我可以快速为网站等做提案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:25:38.723

是的，重力形式就是这样做的。这也很容易。

[http://www.gravityforms.com/](http://www.gravityforms.com/)

它被称为“条件逻辑”。您在一个字段上启用此功能，该字段将显示条件下拉列表，您可以选择以前的“多项选择”问题作为您的条件的基础。

认为您必须为此插件付费，但您可能会在购买前在某处下载第 4 版以进行演示。

你不会失望的。

# azure-sql-database - 如何增加 SQL Azure 存储过程的超时时间

> ID：10169146
> 
> 赞同：2
> 
> 时间：2012-04-16T05:36:58.957
> 
> 标签：azure-sql-database

我在 SQl Azure 中有一个存储过程，它每 5 分钟定期调用一次并处理大量数据，根据我的日志，它有时会给出如下所示的超时错误。

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

**如何增加此查询或整个数据库的超时？什么是默认超时？**

**更新**

根据@Ming 和@Ruchit 的回答，我认为超时不是由于此处连接到sql azure，因为当我检查了日志然后出现以下错误时，它将显示如下消息

> 警告：空值被聚合或其他 SET 操作消除。

这意味着查询正在执行，上面的消息是因为我在 NULL 值上使用了一些聚合函数。我想对了吗？应该是什么其他可能的原因？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:11:06.360

根据[http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/7070c2f9-07d1-4935-82c2-b74a196908ee/](http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/7070c2f9-07d1-4935-82c2-b74a196908ee/)，SQL Azure 将关闭超过 5 分钟的空闲连接。正如您提到的，您每 5 分钟调用一次存储过程，因此您可能处于超时边缘。我建议您更改为每 4 分钟一次，看看是否有效。

此外，在使用 SQL Azure 时，重试非常重要。当查询失败时，请关闭连接，等待几秒钟，然后创建一个新的连接，再次尝试查询。通常第二次会正常工作。

此致，

明旭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:53:16.653

明旭是对的。错误的原因很可能是 5 分钟超时。如果您无法更改调用存储过程的时间段，一种选择是每 3 或 4 分钟对 SQL Azure 进行一次虚拟调用。这将防止连接被关闭。

# regex - 正则表达式允许小数，但没有逗号

> ID：10169147
> 
> 赞同：0
> 
> 时间：2012-04-16T05:37:03.620
> 
> 标签：regex, numbers

我需要一个允许小数但不允许逗号的正则表达式。例如：1200.00 或 50.00
或 40 或 1 该表达式用于验证以确保人们将价格作为数字输入，但没有逗号。我目前有一个允许逗号、数字和小数的正则表达式，但我似乎无法取出逗号。

这是我当前的正则表达式，它不允许逗号或小数，但我想要小数

```
/^[0-9\ ]+$/, 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T05:40:21.143

像这样的东西应该工作：`^\d+(\.\d{2})?$`

这基本上说明了以下内容：

*   `^\d+`: 从字符串的开头 ( `^`) 开始并匹配一个或多个数字 ( `\d+`)。
*   `(\.\d{2})?`: 匹配句点字符 ( `\.`) 后跟正好 2 位数字 ( `\d{2}`)。问号表示括号内的值可以存在也可以不存在，这意味着它将匹配模式的 1 个或 0 个实例。
*   `$`: 字符串必须在这里结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:38:49.173

要匹配货币，您可以使用此正则表达式

```
^(?:[1-9]\d+|\d)(?:\.\d\d)?$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:51:00.410

允许 0 或 1 个点，前后只有数字...

```
/^\d*\.{0,1}\d*$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T05:38:58.940

您可能忘记转义正则表达式`.`运算符（这意味着匹配任何字符）。只是猜测，因为您忘记了问题中的一条重要信息：您已经尝试过的失败正则表达式！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-20T08:59:11.960

检查双/整数类型的价格。（不能输入逗号，只能输入一位小数）

```
 r'^(?:[1-9]\d+|\d)(?:\.\d*)?$'; 
```

# python - 尝试使用 Python 或 ImageMagick 提取字体

> ID：10169149
> 
> 赞同：1
> 
> 时间：2012-04-16T05:37:34.307
> 
> 标签：python, fonts, imagemagick, cjk, rasterizing

我有一个项目，它将中文文本转换为位图以进行远程 LCD 显示。因为它在服务器中运行，所以首选命令行工具。

我正在尝试使用 Python/PIL 和 ImageMagick 来实现这样的系统。ImageMagick 用于在 Python/PIL 将文本转换为用于远程显示的特殊数据包格式之前从文本生成位图。

从 IM 网站阅读 IM6 示例后：

我发现抗锯齿在这个过程中会造成麻烦。例如，它适用于以下命令：

`C:\ImageMagick-6.6.6-6\convert -background lightblue -fill blue -pointsize 48 -font "SimSun-&-NSimSun" label:@chinese_words.utf8 label_utf8_simsun.gif`

[生成](http://www.flickr.com/photos/47372045@N02/6936866806/in/photostream)的图像 新手不允许发布图像。

它看起来很棒，因为它具有高分辨率的抗锯齿功能。LCD 只有黑白，没有消除锯齿，而且必须是低分辨率，例如 12x12 像素。我尝试了以下脚本。

`C:\ImageMagick-6.5.6-Q16\convert -pointsize 16 -font "SimSun-&-NSimSun" +antialias -strokewidth 0.4 -threshold 50%% label:@chinese_words.utf8 label_utf8_simsun_16_bw_strokewid1.gif`

结果看起来很糟糕，并且缺少位图像素。

[生成图片](http://www.flickr.com/photos/47372045@N02/6936866850/in/photostream)新手不允许发布图片。

有谁知道如何使用适用于 LCD 的 Python/ImageMagick 提取 truetype 字体（无抗锯齿、双色、小尺寸/低分辨率）？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:46:24.063

SimSun 似乎得到了[很好的暗示](http://en.wikipedia.org/wiki/Font_hinting)，因此它在小像素尺寸下清晰易读。下面的屏幕截图是从一个字符放大的（我不知道它是什么，所以如果它是……粗鲁，那不是我的意图:)）我在 Windows 7 中以 10 pt 字体大小粘贴到写字板中。

![SimSun 截图](../Images/aba11db30468b604baafa69d35425919.png)

所以：您可能想研究使用正确支持字体提示的库来呈现字形的替代方案。FreeType 会这样做（当编译为具有提示支持时——如果我没记错的话，该算法仍受专利保护），如果您的服务器平台也是 Windows，那么编写 C#/GDIPlus 应用程序将相当容易为您呈现文本。

**编辑：**出于好奇和无聊，我实际上实现了与 Freetype2 的廉价 Python`ctypes`绑定，并在 Freetype2 教程之后添加了同样廉价的渲染代码。即使在小尺寸下似乎也做得不错——并且提示等是可调整的，我只是在我的代码中使用默认值。

![在此处输入图像描述](../Images/935044d6a43fd80cd5902e8b72ff9c29.png)

该代码可在[https://bitbucket.org/akx/python-minift/src](https://bitbucket.org/akx/python-minift/src)获得——我不保证它会正常工作，但它是一个不错的起点。

# mysql - 限制对 MySQL 中行子集的访问

> ID：10169157
> 
> 赞同：1
> 
> 时间：2012-04-16T05:38:47.397
> 
> 标签：mysql, security

我是数据库菜鸟:-(如果我有一个这样设计的简单表：

```
CREATE TABLE IF NOT EXISTS picture
(
ID INT NOT NULL AUTO_INCREMENT,
userID INT NOT NULL,
name VARCHAR(150),

PRIMARY KEY(ID),
FOREIGN KEY (userID) REFERENCES user(ID)
)ENGINE=InnoDB 
```

并描述，例如，像这样：

```
+----+--------+------+
| ID | userID | name |
+----+--------+------+
|  1 |      1 | john |
|  2 |      1 | jack |
|  3 |      2 | amir |
|  4 |      2 | chan |
|  5 |      2 | jose |
|  6 |      3 | jane |
|  7 |      3 | buba |
+----+--------+------+ 
```

我将如何设计一个满足以下两个约束的数据库：

1.  用户`1`，`2`并且`3`可以向`pictures`表中添加新条目。
2.  用户`1`,`2`和`3`只能修改**那些**分别有,和`userID`的行`1``2``3`

我知道这可能不是微不足道的，所以请随时提出任何其他问题，我会相应地编辑这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:55:10.910

根据[这个答案](https://stackoverflow.com/questions/229765/triggers-that-cause-inserts-to-fail-possible)，我把它放在一起：

```
delimiter //
CREATE TRIGGER trig_picture BEFORE UPDATE ON picture
FOR EACH ROW
BEGIN
    DECLARE dummy INT;
    IF NOT EXISTS (select ID from users where ID = OLD.userID and name = (SELECT SUBSTRING_INDEX(USER(), '@', 1))) THEN
        SET NEW=(SELECT CONCAT("Access Denied for user ", SUBSTRING_INDEX(USER(), '@', 1), "; uid ", OLD.userID));
    END IF;
END;//
delimiter ; 
```

这假设您有一个`users`包含一些条目的表：

```
CREATE TABLE IF NOT EXISTS users ( ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY, name VARCHAR(150) );
insert into users values (1, 'adam');
insert into users values (2, 'bob');
insert into users values (3, 'clark'); 
```

这假定`users`表中的名称与返回的数据库用户名匹配`SELECT SUBSTRING_INDEX(USER(), '@', 1)`。

另外，请注意，这只会阻止更新发生。您还必须创建额外的插入/删除触发器以防止创建/删除条目。

最后，这不会阻止某人更改他们在图片表中的条目的用户 ID，实际上将他们锁定在进一步的编辑之外。如果这对您很重要，您可以在触发器中为此添加额外的检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:51:00.507

对于第一项，您可以只授予用户 1、2 和 3 对图片表的 INSERT 权限。

对于第二项，您可以执行以下操作：

A. 创建一个附加表 (db_logins)，其中包含用户 ID 和数据库登录之间的映射。

```
+----+--------+--------------+
| ID | userID | db_loginname |
+----+--------+--------------+
|  1 |      1 | dbLogin1     |
|  2 |      2 | dbLogin2     |
|  3 |      3 | dbLogin3     |
+----+--------+--------------+ 
```

B. 每当您进行更新时，将 db_loginname 的检查添加到 WHERE 子句。UPDATE 语句看起来像这样（我目前无权访问 MySQL 实例，因此无法验证语法）：

```
UPDATE pictures
SET name = 'new name'
FROM pictures
INNER JOIN db_logins 
    ON pictures.userID = db_logins.userID
WHERE name = 'buba' 
   AND db_loginname = user() 
```

# c - 使用 CodeBlocks IDE 的 C 中未定义的引用错误

> ID：10169162
> 
> 赞同：1
> 
> 时间：2012-04-16T05:39:18.147
> 
> 标签：c, codeblocks

我只是在玩代码块并编写一个非常简单的程序，但我得到了未定义的引用错误......我将完全相同的代码复制到其他地方并在终端中编译它并且工作正常，但就是不起作用在代码块中。

我的 main.c 是：

```
#include <stdio.h>
#include "subfunc.h"

int main()
{
    printhello();
    return 0;
} 
```

然后我的 subfunc.c 是：

```
#include <stdio.h>
#include "subfunc.h"

void printhello(void)
{
    printf("hello world in function\n");
} 
```

然后我的 subfunc.h 是：

```
void printhello(void); 
```

谢谢

## 更新

其实..我想通了。我右键单击文件 subfunc.c 和 subfunc.h 并选择属性并转到构建选项卡，我发现编译文件和链接文件的选项没有勾选。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:52:13.533

![在此处输入图像描述](../Images/5b451888136c44a86527df45517f56e3.png)
请参阅上图并与您的项目进行比较。仅与红色圆圈进行比较。忽略剩余的（剩余的都是我的项目/作业）在 my_subfunction.h 中写

```
 #ifndef __MY_SUBFUNC_H__
    #define __MY_SUBFUNC_H__

    #include<stdio.h>
    void printhello(void);
    #endif 
```

在 main.c

```
#include <stdio.h>
#include "my_subfunc.h"

int main()
{
    printhello();
    return 0;
} 
```

和 my_subfun.c:-

```
#include <stdio.h>
#include "my_subfunc.h"

void printhello(void)
{
    printf("hello world in function\n");
} 
```

我希望这会有所帮助。因为这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:15:05.473

You didn't state exactly what the undefined error was but I'm betting it has something to do with either your `main()` or `printhello()` function.

Make sure you're linking *both* object files main.obj and subfunc.obj in your project after compiling your main.c and subfunc.c. This should automatically happen in codeblocks assuming you included both main.c and subfunc.c for the current project you're building.

# asp.net - NUget 包管理器更改目录

> ID：10169163
> 
> 赞同：3
> 
> 时间：2012-04-16T05:39:25.897
> 
> 标签：asp.net, asp.net-mvc, visual-studio, visual-studio-2010, nuget

我正在尝试使用以下命令使用 NUget 包管理器安装实体框架

```
Install-Package EntityFramework -Pre 
```

但它给了我以下错误

> 术语“Install-Package”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

我注意到的是在控制台上我得到了

```
PS C:\Users\tz>  Install-Package EntityFramework -Pre 
```

我认为应该是

```
PM  Install-Package EntityFramework -Pre 
```

如果我是对的如何改变它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:16:08.373

这是控制台初始化的罕见问题（ NuGet 问题跟踪器中的[Issue #1953](http://nuget.codeplex.com/workitem/1953)），应该在下一版本的 Nuget (1.8) 中修复。

作为解决重新启动VS的工作应该修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:54:10.863

升级到 NuGet 1.7 后，我得到了同样的行为。

```
PS C:\Users\tz> 
```

它在重新启动机器后自行修复。

# ms-word - 如何从 Microsoft Word 中删除分页符？

> ID：10169166
> 
> 赞同：21
> 
> 时间：2012-04-16T05:39:53.703
> 
> 标签：ms-word

Word 文档默认分为页面。如何删除分页符并使我的文档 1 连续页面？

分页符示例（圈 1）：

[![在此处输入图像描述](../Images/1cdf060844c79dee7da1f0f196da62b8.png)](https://i.stack.imgur.com/Le7kG.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-14T13:14:50.850

取决于你的确切意思：

- 如果您不想在屏幕上出现分页符，请选择“查看”-->“Web 布局”。分页符仍然存在，但您再也看不到它们了。

- 如果您想“删除”文档中的所有“手动分页符”（通常通过按“Ctrl+Enter”添加分页符），请将“^12”替换为“”（空字符串）。

因此，按 Ctrl+H，在“查找内容”中键入 ^12，将“替换为”留空，然后单击“全部替换”。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-11-22T15:14:31.063

如果你想要一个连续的打印视图，你可以双击两个页面之间的空间，页面之间的空间在所有文档中变为一行。

# xml - F# windows phone 隔离存储和 XML

> ID：10169167
> 
> 赞同：2
> 
> 时间：2012-04-16T05:40:01.900
> 
> 标签：xml, windows-phone-7, f#, isolatedstoragefile

我有一个跟踪用户位置的 WP7 应用程序。一切正常，除了我想在 GeoCoordinate 观察者的位置更改事件上将位置写入隔离存储，并且我不断收到“Operation Not Permitted on IsolatedStorageFileStream”消息。任何人都可以帮助让它工作吗？

将坐标保存到文件的成员是：

```
let xname n = XName.op_Implicit(n)
let xdoc (el: seq<XElement>) = new XDocument(Array.map box (Array.ofSeq el))
let xelem s el = new XElement(xname s, box el)
let xstr s = box s

member this.createLocationsFile latitude longitude =
   try
                let doc : XDocument =
                        xdoc
                            [xelem "root"
                                [xelem "location"
                                    [(xelem "latitude" (xstr latitude))
                                     (xelem "longitude" (xstr longitude))
                                    ]
                                ]
                            ]                    
                use store = IsolatedStorageFile.GetUserStoreForApplication()                   
                if not (store.FileExists("locations.xml")) then
                     let file = new IsolatedStorageFileStream("locations.xml", IO.FileMode.Create, store)                   
                     doc.Save(file)
                else
                    let file = new IsolatedStorageFileStream("locations.xml", IO.FileMode.Open, store)
                    let docAmended : XDocument = XDocument.Load(file)
                    let elementToAdd =
                        docAmended.Element(xname "root").Add(
                            [xelem "location"
                                [(xelem "latitude" (xstr latitude))
                                 (xelem "longitude" (xstr longitude))
                                ]
                            ])
                    docAmended.Save(file)
    with
        | :? IsolatedStorageException as ex -> MessageBox.Show("Error saving file: " + ex.Message) |> ignore
            | _ -> MessageBox.Show("Unable to open file") |> ignore 
```

PositionChangedEventHandler 是：

```
let MyPositionChanged(e : GeoPositionChangedEventArgs<GeoCoordinate>, map : Map, ellipse : Ellipse) =
    let ppLoc = new GeoCoordinate(e.Position.Location.Latitude, e.Position.Location.Longitude)
    map.SetView(ppLoc, 10.0)
    //do layer.AddChild(ellipse, ppLoc)
    ellipse.Visibility <- System.Windows.Visibility.Visible
    let iso = new IsolatedStorageHelper()
    let lat = ppLoc.Latitude.ToString()
    let lon = ppLoc.Longitude.ToString()
    do iso.createLocationsFile lat lon 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:29:15.917

正如我在评论中提到的，我不是 F#er，但我在使用 C# 时曾多次看到此错误。“使用”块很好地解决了它。即使您使用的是“使用”块，文档说最好使用“使用”块来处理类似的事情，因为听起来“locations.xml”仍然被某些东西打开。

当您运行以下代码时，请尝试使用“使用”一词而不是“使用”：

```
 ...
            ]                    
            use store = IsolatedStorageFile.GetUserStoreForApplication()                   
            if not (store.FileExists("locations.xml")) then
            ... 
```

[来源](http://msdn.microsoft.com/en-us/library/dd233240%28VS.100%29.aspx)。

这是为什么（来自上面的链接）的重要亮点：

using 函数和 use 绑定是完成同一件事的几乎等效的方法。using 关键字提供了对何时调用 Dispose 的更多控制。使用 using 时，会在函数或 lambda 表达式的末尾调用 Dispose；当您使用 use 关键字时，会在包含代码块的末尾调用 Dispose。通常，您应该更喜欢使用 use 而不是 using 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:33:50.660

我想通了，并认为我会为遇到同样问题的其他人提出解决方案。我需要从存储中加载 XML，删除文件并关闭“使用”块，修改 XML，在 FileMode.Create 中再次打开文件存储并将修改后的 XML 保存回存储。这是解决方案，感谢所有帮助我解决问题的人！：

```
let xname n = XName.op_Implicit(n)
let xdoc (el: seq<XElement>) = new XDocument(Array.map box (Array.ofSeq el))
let xelem s el = new XElement(xname s, box el)
let xstr s = box s

member this.createLocationsFile latitude longitude =
   try                                      
                use store = IsolatedStorageFile.GetUserStoreForApplication()                   
                if not (store.FileExists("locations.xml")) then
                     use file = new IsolatedStorageFileStream("locations.xml", IO.FileMode.OpenOrCreate, store) 
                     let doc =
                        xdoc
                            [xelem "root"
                                [xelem "location"
                                    [(xelem "latitude" (xstr latitude))
                                     (xelem "longitude" (xstr longitude))
                                    ]
                                ]
                            ]                   
                     doc.Save(file)

                else
                    use store = IsolatedStorageFile.GetUserStoreForApplication()
                    use file = new IsolatedStorageFileStream("locations.xml", IO.FileMode.Open, store)
                    let docAmended : XDocument = XDocument.Load(file) 
                    file.Close()
                    store.DeleteFile("locations.xml")
                    use file = new IsolatedStorageFileStream("locations.xml", IO.FileMode.Create, store)
                    do
                        docAmended.Element(xname "root").Add(
                            [xelem "location"
                                [(xelem "latitude" (xstr latitude))
                                 (xelem "longitude" (xstr longitude))
                                ]
                            ])

                    docAmended.Save(file)

    with
        | :? IsolatedStorageException as ex -> MessageBox.Show("Error saving file: " + ex.Message) |> ignore 
```

# c# - 我可以使用 WinCE 5.0 从其他存储读取数据吗？

> ID：10169169
> 
> 赞同：0
> 
> 时间：2012-04-16T05:40:06.570
> 
> 标签：c#, windows-mobile, windows-ce, .net-1.1

我将 wince 5.0 用于 logicpd pxa270 som 卡和 dotnet 1.1 sp1。当映像文件 (NK.bin) 形成并刻录到设备时，它可以与 SOM 卡的内置内存正常工作。假设我在闪存中有一些数据并使用设备中的应用程序，我想读取这些数据。我应该怎么办？我需要使用什么 API？我需要在操作系统目录视图中进行一些更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:34:13.403

好的，我得到了答案。以下代码片段工作正常。假设您使用的是移动设备和 SOM 卡的内存。如果您在设备的外部闪存中有一个文件，并且该文件位于名为“myFolder”的文件夹中，则以下代码片段将返回“\myFolder”

```
 public static string GetStorageCard()
    {
        //initialize the path as an empty string
        string firstCard = "";

        System.IO.DirectoryInfo di = new System.IO.DirectoryInfo("\\");
        System.IO.FileSystemInfo[] fsi = di.GetFileSystemInfos();

        //iterate through them
        for (int x = 0; x < fsi.Length; x++)
        {
            //check to see if this is a temporary storage card (e.g. SD card)
            if ((fsi[x].Attributes & System.IO.FileAttributes.Temporary) == System.IO.FileAttributes.Temporary)
            {
                //if so, return the path
                firstCard = fsi[x].FullName;
            }
        }

        return firstCard;
    } 
```

# java - 如何将 int[] 转换为 typedarray Android

> ID：10169170
> 
> 赞同：4
> 
> 时间：2012-04-16T05:40:15.790
> 
> 标签：java, android, int, typedarray

```
int[] imageIds = { R.drawable.image1, R.drawable.image2, R.drawable.image3, R.drawable.image4};

TypedArray icons = res.obtainTypedArray(int[]); /* this is not Working. */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:47:41.380

您正在传递一个 id 数组，其中只需要一个可绘制数组的 id ..

看这个例子..

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <array name="icons">
        <item>@drawable/home</item>
        <item>@drawable/settings</item>
        <item>@drawable/logout</item>
    </array>
    <array name="colors">
        <item>#FFFF0000</item>
        <item>#FF00FF00</item>
        <item>#FF0000FF</item>
    </array>
</resources>
This application code retrieves each array and then obtains the first entry in each array:
Resources res = getResources();
TypedArray icons = res.obtainTypedArray(R.array.icons);
Drawable drawable = icons.getDrawable(0);

TypedArray colors = res.obtainTypedArray(R.array.colors);
int color = colors.getColor(0,0); 
```

# android - 如何在启动服务时将数据从活动传递到服务？

> ID：10169174
> 
> 赞同：3
> 
> 时间：2012-04-16T05:40:40.237
> 
> 标签：android, android-service

我正在android中创建一个应用程序。

如何在启动服务和访问服务时将ArrayList的对象传递给服务？？？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:46:36.210

您必须在 service.OnStart 方法中覆盖 onStart 方法，您可以获得 Activity 的意图。如果您想将 ArrayList 从活动传递到服务，您可以将您的 ArrayList 转换为数组。

在你的活动中

```
Intent intent=new Intent(ServicesActivity.this,FileManagerRequest.class);         
Bundle b=new Bundle()
b.putStringArray("Array", your_array)
intent.putExtras(b);
startService(intent); 
```

为您服务

```
public void onStart(Intent intent, int startid){
    super.onStart(intent, startid);
    Bundle b=intent.getExtras();
    String[] Array = b.getStringArray("Array");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:46:19.567

两种选择：

1.  如果服务是本地的，那么您可以绑定到它并直接调用方法
2.  如果服务是远程的，那么您可以使用它[`Bundle`](http://developer.android.com/reference/android/os/Bundle.html)来传递一些数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-10T22:17:28.670

最后我得到了答案，它对我有用，试试吧。

`ArrayList<String> names`1）同时从 Activity发送对象喜欢发送到这种方式示例。`names.add("kdblue");`

```
Intent startIntent = new Intent(CuurentActivity.this, UploadService.class);
startIntent.putStringArrayListExtra("data",names);
startService(startIntent); 
```

2）现在从服务接收这个`ArrayList<String>`对象

```
@Override
    public int onStartCommand(Intent intent, int flags, int startId) {
       ArrayList<String> transferData = intent.getStringArrayListExtra("data");
      return START_STICKY;
    } 
```

注意：`transferData`对象包含所有`ArrayList<String> names`属性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-23T11:15:48.467

/ *****在你的活动中****** /

```
startbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Bundle b=new Bundle();
            b.putString("id", id);
            Intent in=new Intent(create.this,myservice.class);

            in.putExtras(b);
            //Toast.makeText(getBaseContext(), "Service Started", Toast.LENGTH_LONG).show();
            startService(in);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-23T11:18:52.913

/ *******为您服务****** ***** /

```
public int onStartCommand(Intent intent, int flags, int startId) {
// We want this service to continue running until it is explicitly
// stopped, so return sticky.
       super.onStart(intent, startId);
     id=intent.getExtras();
     value=id.getString("id");

Toast.makeText(this, "Service Started "+value, Toast.LENGTH_LONG).show(); 
```

# android - 如何在 Unity 应用程序和常规 Android 应用程序之间进行通信？

> ID：10169175
> 
> 赞同：2
> 
> 时间：2012-04-16T05:40:43.900
> 
> 标签：android, android-ndk, unity3d, native-code, native-methods

我是一名 Android 开发人员，正在与 Unity 开发人员合作。我们的目标是以某种方式创建一个“桥梁”通信，以便在我的 Android 后台服务/线程与 Unity 导出的游戏之间发送消息（两者都在同一设备上运行......）

目前，我们发现实现此类通信的唯一解决方案是直接通过基于 localhost 在两个应用程序之间打开 TCP 套接字。

我也知道应该有可能以某种方式在 Unity 中创建可以从我的 Android 应用程序访问的本机 C 函数，但我还没有找到任何关于如何做到这一点的好的解释。

有没有办法开发 Unity 游戏以某种方式公开 Android API？除了我提到的解决方案之外，还有其他方法可以创建这种通信吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T02:15:44.430

您可以查看我的教程以了解您的问题，可能会对您有所帮助！;)

[http://jeanmeyblum.weebly.com/1/post/2014/02/communication-between-an-android-app-and-unity.html](http://jeanmeyblum.weebly.com/1/post/2014/02/communication-between-an-android-app-and-unity.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:50:59.643

检查[适用于 Android 的 Unity Building 插件](http://panther.unity3d.com/support/documentation/Manual/PluginsForAndroid.html)

# algorithm - 如何在时间序列中找到顶部和底部？

> ID：10169176
> 
> 赞同：6
> 
> 时间：2012-04-16T05:41:02.337
> 
> 标签：algorithm, time-series, transform, signal-processing

起初，这个问题听起来很愚蠢，但这不是根本问题。也许，任何算法似乎都无法完全解决，但我假装是这样。

所以问。我有图表，例如黄金。我需要找到时间轴上的顶部和底部在哪里。问题是我需要找到主要好转和主要低迷的开始。问题是有很多不相关的小涨和跌。

这是为了更好地理解的图片 - 红点是我想要找到的（不完全是，但在某种程度上像这样）。

![在此处输入图像描述](../Images/1a8977c1ca5b20006398648ba1e5a4a5.png)

所以我可能需要过滤掉小的翻页和翻页，但不知道该怎么做。我会对任何想法感到高兴。我不需要java等中的算法，只要用文字就足够了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T05:49:02.643

1.  您可以先执行**平滑**或**低通滤波**操作，然后从平滑数据中找到局部最小值/最大值的位置。然后从原始数据中获取最小值和最大值的值。

2.  您可以使用正常的最大/最小过滤器来查找*所有*转折点，然后按阈值过滤转折点列表。

3.  我认为您**真正**想要做的是从信号中删除“长期变化”，而只查看“短期变化”。这可以使用**经验模式分解**来完成。[请参阅我论文](http://www.penwatch.net/files/thesis/Online_Empirical_Mode_Decomposition_Li-aung_Yip_2010.pdf)的第 2.3.2 节。（或者，谷歌搜索“经验模式分解”、“EMD”或“Hilbert-Huang 变换”。）

下面是 EMD 的实际应用：

![在此处输入图像描述](../Images/4c18cd8b3eea68911e02089ec48bc410.png)

请注意，随着 EMD 算法从“最详细”开始到“最一般趋势”结束，随着 EMD 算法提取信号分量，通用性越来越高。（注意显然有九个组件 - 只显示了几个。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:53:05.177

您通常会从移动平均线开始——也就是说，平均 N 个最近的点，其中平滑程度大致与 N 成正比（即，随着年平均点越多，您的结果就越平滑）。

然后，您可以获取每个平均点与下一个平均点之间的差异。当差异改变符号时，你有一个最小值或最大值（从正到负，你有一个最大值，从负到正，一个最小值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:55:32.223

我可能不完全理解，但你为什么不能只取特定时间范围内的最低点？大多数数据提供者确实提供了当天的最高价/最低价，你能不能只存储它然后简单地获取时间范围 x 的最低值？

通过扩展你的学习范围，你可以消除小的起伏。这是我通常做的。另一种方法是，您可以使用过去 X 天的平均值来平滑结果（移动平均线），但随后您将失去准确性（程度取决于范围......如果它是 2-3 天的移动平均线而不是糟糕的 2 年移动平均线）。

编辑：对不起，我想念明白，您正在尝试找到范围。好吧，如果您有数据，那么为什么不先找到最低点，然后再去第二天计算百分比变化，然后再计算下一个，等等……并覆盖找到更高范围的那一天。稍后您将需要添加更多逻辑（例如从该峰值下跌的百分比或其他内容），否则您会报告通常会采用股票的首次公开募股并将其所有高点并说这是一个时期。

# ajax - Sencha Touch 2 - 使用代理从 json 存储值不适合我

> ID：10169181
> 
> 赞同：0
> 
> 时间：2012-04-16T05:41:21.347
> 
> 标签：ajax, model, proxy, extjs, store

我是 Sencha Touch 2 的新手，我试图通过代理使用 store 和模型存储来自 json 的值，但不要在我错的地方

**我的模型**

```
Ext.regModel('Product', {
    fields: [
        {name: 'name',        type: 'string'},
        {name: 'description', type: 'string'},
        {name: 'price',       type: 'float'},
        {name: 'image_url',   type: 'string'},
        {name: 'in_stock',    type: 'boolean'}
    ]

}); 
```

**我的店铺**

```
Dzineapp.BlogStore = new Ext.data.Store({
model: 'Product',
autoLoad: false,
proxy: new Ext.data.AjaxProxy({
    type: 'ajax',
    url: 'http://localhost/products.json',
    reader: {
        type: 'json',
        root: 'products'
    },
    writer: {
        encode: true,
        type: 'json'
    }
    })
}); 
```

**产品.json**

```
{
    "products": [
        {"name": "Some Product",    "price": 9.99, "image_url": "product1.jpg", "in_stock": true},
        {"name": "Another Product", "price": 7.50, "image_url": "product2.jpg", "in_stock": true},
        {"name": "A third product", "price": 2.35, "image_url": "product3.jpg", "in_stock": false}

    ]
} 
```

**我的观点**

```
 Dzineapp.blogPanel = new Ext.List({
            id: 'bloglist',
            store: Dzineapp.BlogStore,
            itemTpl: '<div class="contact">{name}</div>'
        }); 
```

但是我的应用程序没有显示任何值，任何人都可以在我犯错的地方帮助我.. 我只是 sencha 的初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:57:44.040

1）您应该使用 Ext.create() 而不是 new ... （但这应该可以正常工作）

2）您应该在列表配置中的存储值周围添加 '

3) 检查您是否将您的商店添加到您的 app.js 中的 stores[] 或在您的列表中添加一个需求。

4）使用 firebug/chrome 开发工具检查您的请求是否正常（HTTP：200）并且您是否获得了 json。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:05:02.337

在您的商店配置中，而不是使用

```
root: 'products' 
```

尝试使用

```
rootProperty: 'products' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:04:45.763

您可以按以下方式更新您的商店吗

```
Dzineapp.BlogStore = new Ext.data.Store({
   model: 'Product',
   autoLoad: true,
   proxy: {
     type: 'ajax',
     url: 'http://localhost/products.json',
     reader: {
       type: 'json',
       root: 'products'
     }
   }
}); 
```

我希望它有效。

我们必须加载商店以显示数据。

谢谢，斯瓦蒂。

# java - 通用参数从一个 obj 传递到另一个

> ID：10169190
> 
> 赞同：0
> 
> 时间：2012-04-16T05:42:02.517
> 
> 标签：java, generics, design-patterns

我的情况是：保存方法`ResourceService<T , ID >`

```
public interface IResourceService<T,ID>

public class ResourceService<T , ID> implement IResourceService<T,ID>
{
   public void save(T entity) throws RuntimeException {

    try {
        AsyncServiceSaveRunable<T> task = new
AsyncServiceSaveRunable<T>(getService(),entity);

        this.treadPoolExcutor.submitTask(task);
    } catch (NoSuchMethodException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

   }
} 
```

并且在

```
public class AsyncServiceSaveRunable<T> implements Runnable  {
private IResourceService<?,?> service; //----> this is 
private Method serviceMethod;
private List<T> parameters;

public AsyncServiceSaveRunable(IResourceService<?,?> service,  List<T> parameters){ 
}

public AsyncServiceSaveRunable(IResourceService<?,?> service, T parameter)
                            throws NoSuchMethodException, SecurityException{

    this.service         = service;

    this.parameters = new ArrayList<T>();
    this.parameters.add(parameter);
}
@Override
public void run() {
    try {
        if(this.parameters.size()>1)
            service.saveList(this.parameters);
        else
            service.save( this.parameters.get(0));
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

  }
 } 
```

问题是 service.saveList(this.parameters); 和 service.save(...); 错了

无论如何要传递该参数还是我需要不同的结构来处理这种情况？

谢谢

------------------ 来自 Eclipse 的错误消息 ------------------------

```
The method save(capture#7-of ?) in the type IResourceService<capture#7-of ?,capture#8-of ?>
 is not applicable for the arguments (T) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T05:52:28.750

在`ResourceService<T extends BaseEntity, ...>`你需要`T`被驱赶`BaseEntity`。

在`public class AsyncServiceSaveRunable<T>` `T`没有限制。

然后，`service.save(this.parameters.get(0));`您尝试将（无界）泛型类型传递给需要`BaseEntity`对象（或从它派生的对象）的函数。

`AsyncServiceSaveRunable`您也可以要求从 BaseEntity 派生的类型参数：

```
public class AsyncServiceSaveRunable<T extends BaseEntity> 
```

更新：错误消息是第一个类型参数对于 .`IResourceService`所需的类型无效`save()`。以前您的类型参数以 为界`BaseEntry`，但现在缺少此限制。也许你想写：`IResourceService<? extends BaseEntity, ? extends Serializable>`？

# c# - ASP.Net C# web 表单中的 SOLID 原则示例

> ID：10169191
> 
> 赞同：3
> 
> 时间：2012-04-16T05:42:12.920
> 
> 标签：c#, webforms, code-behind, solid-principles

我正在学习 SOLID 原理，发现很多以商务课程为例的文章。

SOLID 原则是解耦作为 ASP.NET（主要是基于事件的 ASP.NET Web 表单开发）Web 表单代码背后与控件紧密耦合的类。所以我想在 web 表单代码隐藏文件中看到 SOLID 原则的实际示例。

请注意，我不想要 MVC。

任何详细解释的网站/书籍的链接也将有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:15:03.437

If you don't want to use MVC and still want to have separation in layers then you should try considering MVP pattern this is a very good article showing how to use it in asp.net [http://www.codeproject.com/Articles/14642/Model-View-Presenter-with-ASP-NET](http://www.codeproject.com/Articles/14642/Model-View-Presenter-with-ASP-NET)

also have a look at [http://webformsmvp.com/](http://webformsmvp.com/)

Regards.

# android - 如何自定义android的视频视图

> ID：10169192
> 
> 赞同：1
> 
> 时间：2012-04-16T05:42:13.823
> 
> 标签：android, android-video-player

我想自定义 android 的视频视图，自定义视频视图应该看起来像给定的图片。![视频观看](../Images/85df43adc7bf14fc1f0a8cf3734e5e35.png)

搜索栏看起来像

![搜索栏](../Images/bb57a8cc90fa767c8f16bf3560569076.png)

请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:39:57.523

逐帧显示。你可以做其他的事情，比如搜索栏、视频布局、视频叠加等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:32:44.587

如果你想更多地自定义视频，你必须编写自己的原生库。否则，您可以使用 MediaMetadataRetriver 类逐帧提取。 [看一看](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html)

# c# - 性能——对数据库的查询和对数据表的查询

> ID：10169195
> 
> 赞同：2
> 
> 时间：2012-04-16T05:42:51.687
> 
> 标签：c#, database, performance, datatable

我选择了过滤的数据数量。

根据结果​​，我必须进行多次查询迭代。

现在我可以选择 2 个选项：

1）。通过每次改进过滤查询来查询数据库

或者

2）。第一次将过滤后的数据带到 DataTable - 当查询时，然后对该 DataTable 执行更多过滤 - （无需在数据库上查询）。

什么情况下性能更高？

PS：我知道以前有人问过同样的问题。但没有得到正确的答案。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:56:46.183

如果您在内存中**已经有**更广泛的数据集，那么“2”几乎普遍会更快；没有网络跃点，没有带宽，没有服务器端时间。只是一个内存过滤器。即使在诸如 ASP.NET 之类的无状态环境中，通常也会缓存这样的查询（参数化）结果，以便您可以在页面之间重用结果。

当然，不要将“2”带到荒谬的水平......从整个表或大量行开始，在许多层面上都是不好的：

*   初始成本大
*   不/很少使用索引
*   在内存中处理很多

**但是**，在许多常见情况下，您通常只查询结果的*第一页*和*计数*，因此您实际上没有那组数据（您无法从 1 页和计数推断出过滤后的子集是多少）好像）。所以“1”成为更好的选择（但也保留分页结果的缓存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:56:53.477

正确答案：您需要确定预期/期望的性能，而不是**衡量**您感兴趣的方法并查看哪一种适合。

请注意，您需要在与真实数据非常接近的数据集上测量原型。由于您建议的 2 种方法是内存使用和 IO/网络访问之间的明确权衡，因此如果不尝试在性能上与您的生产系统相当接近的机器上的真实数据，就无法预测结果。

# jquery - 选项卡不会显示在 ie 6 和 7 中。是我的 jquery 还是 css？

> ID：10169196
> 
> 赞同：-1
> 
> 时间：2012-04-16T05:43:00.530
> 
> 标签：jquery

我使用 jquery 和 css 创建选项卡，但它们在 ie 6 和 7 中无法正常工作。选项卡不可点击，每个选项卡的内容只是显示在彼此下方。这是所有的代码。第 2 部分是 CSS。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Spencer's Portfolio-Home</title>
<link href="master.css" rel="stylesheet" type="text/css" />
<link href="css/lightbox.css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>
<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/lightbox.js"></script>
<script type="text/javascript" src="js/jquery.address-1.4.min.js"></script>     
<script type="text/javascript">
var QTABS = {

    init: function () {

        // attached onload and change event to address plugin
        $.address.init(function(event) {

            // first load, set panel
            QTABS.setPanel(event);

        }).change(function(event) {

            // if the url changes, set panel
            QTABS.setPanel(event);          

        });

    },

    // the core function to display correct panel
    setPanel: function (event) {

        // grab the hash tag from address plugin event
        var hashtag = event.pathNames[0];

        // get the correct tab item, if no hashtag, get the first tab item
        var tab = (hashtag) ? $('#tabs li a[href=#' + hashtag + ']') :     $('#tabs li:first a');

        // reset everything to default
        $('#tabs li').removeClass('active');
        $('#panels .panel').hide();

        // if hashtag is found
        if (hashtag) {

            // set current tab item active and display correct panel
            tab.parent().addClass('active');
            $('#panels .panel:eq(' + (tab.parent().index()) + ')').show();          

        } else {

            // set the first tab item and first panel               
            $('#tabs li:first').addClass('active');
            $('#panels .panel:first').show();           

        }

        // change the page title to current selected tab
        document.title = tab.attr('title');

    }

}

// Execute this script!
QTABS.init();
</script>
</head>

<body>
<div id="pageContainer">
<div id="header">  
<h3>Spencer K. Edwards</h3>  
</div>
<div id="allTabs">
<div id="tabs" class="clearfix">

    <ul>
        <li><a href="#site" title="Site Design">Site Design</a></li>
        <li><a href="#HCI" title="Human Computer Interaction">HCI/UX Documentation</a></li>
        <li><a href="#freeD" title="Free Designs">Free Designs</a></li>
    </ul>

</div>  

<div id="panels">
    <div class="panel-wrapper">
        <div class="panel">
            <h2>Website Design Works</h2>
            <p>Below you will find various website designs I put together to this point.  Each of these models were created following a strict design process.  The software used for these prototypes was Adobe Photoshop. Click the images to enlarge.</p><p>
        <table cellspacing="10" cellpadding="20">   
            <tr><td><a href="images/design1.jpg" rel="lightbox[web]" title="Personal site prototype for Professor John H. Cushman"><img src="images/cushThumb.jpg" height="174" width="250" alt="cushsite"/></a></td>
            <td><a href="images/personal site.png" rel="lightbox[web]" title="First prototype for my Portfolio site"><img src="images/persThumb.png" height="158" width="250" alt="perssite"/></a></td>
            <td><a href="images/recent site.png" rel="lightbox[web]" title="Site prototype for Authority Automotive Detailing"><img src="images/recentThumb.png" height="116" width="250" alt="recsite"/></a></td></tr>
           <tr><td><a href="images/canwear3.jpg" rel="lightbox[web]" title="Site prototype for Canwear Apparel"><img src="images/canThumb.jpg" height="187" width="250" alt="cansite"/></a></td>
            </tr>
        </table>
                    </div>
        <div class="panel">
            <h2>Panel 2</h2>
            <p>Nullam in dui mauris. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor. Suspendisse dictum feugiat nisl ut dapibus. Mauris iaculis porttitor posuere. Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam at risus et justo dignissim congue. Donec congue lacinia dui, a porttitor lectus condimentum laoreet. Nunc eu ullamcorper orci. Quisque eget odio ac lectus vestibulum faucibus eget in metus. In pellentesque faucibus vestibulum. Nulla at nulla justo, eget luctus tortor. Nulla facilisi. Duis aliquet egestas purus in blandit. Curabitur vulputate, ligula lacinia scelerisque tempor, lacus lacus.</p><p><a href="#tab3">Go to Tab3</a></p>      
        </div>
        <div class="panel">
            <h2>Panel 3</h2>
            <p>Nullam in dui mauris. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor. Suspendisse dictum feugiat nisl ut dapibus. Mauris iaculis porttitor posuere. Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam at risus et justo dignissim congue. Donec congue lacinia dui, a porttitor lectus condimentum laoreet. Nunc eu ullamcorper orci. Quisque eget odio ac lectus vestibulum faucibus eget in metus. In pellentesque faucibus vestibulum. Nulla at nulla justo, eget luctus tortor. Nulla facilisi. Duis aliquet egestas purus in blandit. Curabitur vulputate, ligula lacinia scelerisque tempor, lacus lacus.</p><p><a href="#tab1">Back to Tab1</a></p>        
        </div>
    </div>
</div> <!-- //#panels -->
  </div>
</div> 

</body>
</html> 
```

第 2 部分---->css

```
 ul { list-style:none;
                }
        #tabs {
        margin-top:200px;
    }
    #tabs ul {
        list-style:none;
        margin:0; 
        padding:0;
    }

    #tabs ul li {
        float:left;
    }

    #tabs ul li a {
        display:block;
        padding:5px 10px;
        font-weight:bold;
        color:#0C0;
        text-decoration:none;
        font-size:120%;
    }       
    #tabs ul li.active a {
        background:#000;
        color:#fff;
    }               

#panels {
    width:100%;
    background:#000;
    opacity:.7;

}
    #panels .panel-wrapper {
        padding:10px;
    }

    #panels .panel {
        color:#CCC;

    }

    #panels .panel h2 {
        margin:0 0 10px 0;  
    }       

.clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
    }
* html .clearfix             { zoom: 1; } /* IE6 */
*:first-child+html .clearfix { zoom: 1; } /* IE7 */     

/*
* CSS3 Styling
*/

#tabs ul li a { 
    border-top-left-radius : 5px;      
    border-top-right-radius : 5px;              
}
#panels {
    border-bottom-left-radius : 5px;      
    border-bottom-right-radius : 5px;       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:08:28.623

您需要选择一个 jQuery 库或另一个。通过在页面上运行这两个版本，您将面临两个版本可能相互冲突的风险。

如果是标签显示不正确，去掉你的代码，看看它是否在 jQuery 之前的浏览器中正确显示。如果 CSS 全部正确，则将 jQuery 放回原处。稍微清理一下 CSS 可能是一个聪明的主意。虽然你所拥有的不一定是错误的，但它有点混乱。

乍一看，我在您的 jQuery 中看不到任何错误。它可能只是重复的版本条目。通过错误控制台运行它以确保没有语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:51:52.547

如果您的页面在某些浏览器中*呈现不同，请先查看 CSS。*

考虑取出所有 javascript 并努力让 CSS 在各种浏览器中正确显示选项卡。然后添加 JS。

# php - 静态类与单例类如何工作（数据库）

> ID：10169198
> 
> 赞同：3
> 
> 时间：2012-04-16T05:43:04.647
> 
> 标签：php, mysql, database, static, singleton

我对单例模型与静态模型如何用于数据库连接感到困惑。我的朋友创建了一个“静态”类并向我展示了它，但它对它的静态没有任何意义。我有点了解如何创建数据库连接的单例方法，但我不确定它是否符合我的目标。

我想做的主要事情是减少打开到 MYSQL 的连接数。我有一个类，它的函数经常调用数据库安静，每次有人请求需要数据库的东西时，它没有理由建立新的连接。有人可以提供一个小的示例类来使用连接到数据库并显示一个小示例查询的单例或静态方法（以正确的方法为准）吗？我将不胜感激。

哦，是的，我使用的是 PHP 5.3 :) 请随时询问更多详细信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T05:48:45.530

考虑以下示例，它使用单例设计模式访问数据库对象的实例。（这样做的目的是在整个应用程序中一次又一次地重用相同的连接）

```
class Database {

    protected static $_dbh;
    const HOST = 'localhost';
    const DATABASE = 'dbname';
    const USERNAME = 'username';
    const PASSWORD = 'password';

    //declare the constructor as private to avoid direct instantiation.   
    private function __construct() { }

    //access the database object through the getInstance method.
    public static function getInstance() {
        if(!isset($_dbh)) {
            #Connection String.
            self::$_dbh = new PDO('mysql:host='.self::HOST.';dbname='.self::DATABASE,self::USERNAME,self::PASSWORD);
            self::$_dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }
        return self::$_dbh;
    }
} 
```

现在，如果我必须在应用程序的任何地方使用该类，我会简单地这样做。

```
require_once('database.php');
$dbh = Database::getInstance();
$sth = $dbh->query('SELECT * FROM sometable');
$result = $sth->fetchAll(PDO::FETCH_ASSOC); 
```

调用`Database::getInstance();`使用静态方法。这基本上是通过将构造函数声明为私有来限制您直接实例化对象，而是检查对象是否已经实例化。如果为真则返回已经实例化的对象。否则创建新的并返回新创建的对象。这确保在整个应用程序中重用相同的数据库连接。

# extjs - 带有过滤器的 beforequery 在 IE6 extjs 中不起作用

> ID：10169200
> 
> 赞同：0
> 
> 时间：2012-04-16T05:43:25.667
> 
> 标签：extjs, extjs3

在 extjs 3.4 中使用带有 beforequery 函数的过滤器时，我遇到了 IE6 的问题，这是我的代码。

```
this.findById('field1').addListener({
        beforequery: function(e) {
            var metadataStep = Ext.getCmp('step2');
            if (e.query && e.query.indexOf('?') != -1) {
                var temp = '';
                for(var i=0;i<e.query.length;i++){
                    temp = temp + '['+e.query[i]+ ']';
                }
                e.cancel = true;
                var query = new RegExp(String.format('^{0}',temp.replace(/\?/g, 'a-zA-Z0-9\-\.,:\+\*\(\)=\'&_')));
                if (combo.store.getCount() > 0 || combo.listEmptyText) {
                    combo.expand();
                    combo.restrictHeight();
                }
                this.store.clearFilter(true);
                this.store.filter(this.displayField, query);
            }
        }
    }); 
```

注意：它在 ff 和 Chrome 中工作

1.我在 IE6 中查询为/^[undefined]/。

2.但在Chrome和FF查询= /^[a-zA-Z0-9-.,:+*()='&_]/

非常感谢任何帮助。

提前致谢，

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:12:52.417

```
if (e.query && e.query.indexOf('?') != -1) {
    e.query = String.format('^{0}', e.query.replace(/\+/g, '[\+]'));
    e.query = String.format('^{0}', e.query.replace(/\(/g, '[\\(]'));
    e.query = String.format('^{0}', e.query.replace(/\)/g, '[\\)]'));
    e.query = String.format('^{0}', e.query.replace(/\*/g, '[\*]'));
    e.query = String.format('^{0}', e.query.replace(/\./g, '[.]'));
    e.cancel = true;
    var query = new RegExp(String.format('^{0}',e.query.replace(/\?/g, '[a-zA-Z0-9\-\.,:\+\*\(\)=\'&_]')));
    if (combo.store.getCount() > 0 || combo.listEmptyText) {
        combo.expand();
        combo.restrictHeight();
    }
    combo.store.clearFilter(true);
    combo.store.filter(combo.displayField, query);
   } 
```

此代码工作正常。在 IE6 中，数组不起作用。

# postgresql - 关于 PLPGSQL 的 PostgreSQL 9.1 pg_restore 错误

> ID：10169203
> 
> 赞同：79
> 
> 时间：2012-04-16T05:44:11.093
> 
> 标签：postgresql, plpgsql, database-restore

我正在将 Postgres 用于 django 项目，并且我目前正在实现一个数据库备份/恢复系统，该系统尽可能简单地在用户单击备份时执行 pg_dump，然后在单击恢复备份时执行 pg_restore。

一切看起来都很好，直到它实际尝试执行 pg_restore 时它给出了这个错误：

> pg_restore: [archiver (db)] 来自 TOC 条目 3206 的错误；0 0 COMMENT EXTENSION plpgsql pg_restore: [archiver (db)] 无法执行查询: 错误: must be owner of extension plpgsql 命令是: COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';

我已经研究了 plpgsql 是什么等，我明白了，关于错误，我尝试手动将“扩展的所有者”设置为执行脚本并拥有数据库本身的用户，但没有任何改变，这真的很烦人尝试设置所有事物的评论时出错

这一切都是由 pg_dump 自动创建的，因此无法删除注释行，并且没有禁用注释的标志（我知道关闭），所以我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-08-02T11:00:00.970

似乎 pg_restore 试图恢复一些您不拥有的额外数据。尝试将`-n public`选项添加到您的 pg_restore 命令行。它会告诉 pg_restore 只恢复公共模式的内容。你的命令行应该看起来像

```
pg_restore -U username -c -n public -d database_name 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-04T17:04:24.230

我在此页面上找到了以下解决方法：

[http://archives.postgresql.org/pgsql-general/2011-10/msg00826.php](http://archives.postgresql.org/pgsql-general/2011-10/msg00826.php)

这个想法是使用 pg_restore -l 列出存档的内容，grep 出用户无权恢复的扩展名，并在恢复时使用 pg_restore -L 使用这个省略的列表。

例如：

```
pg_restore -l ~/database.dump | grep -v "EXTENSION - plpgsql" > ~/restore_elements
pg_restore -L ~/restore_elements ~/database.dump 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-10-17T12:00:00.967

If you're running [Postgres 11's (or higher) version of `pg_dump`](https://www.postgresql.org/docs/11/app-pgdump.html) then you can take advantage of the new `--no-comments` flag.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-03-11T17:12:11.583

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-16T05:47:20.640

您是否加载到由其他用户创建的数据库中？如果可能，请尝试使用创建数据库及其现有对象的同一用户进行还原。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-10T11:25:59.223

在这个命令之后为我工作 -

```
Deepak@deepak:~$ sudo -i -u postgres
postgres@deepak:~$ psql 
psql (9.3.5)
Type "help" for help.

postgres=# GRANT ALL PRIVILEGES ON DATABASE database_name TO user;
postgres=# GRANT 
```

# jquery-validate - jQuery Validate 插件未在成功远程验证的输入元素上设置有效类

> ID：10169205
> 
> 赞同：0
> 
> 时间：2012-04-16T05:44:31.870
> 
> 标签：jquery-validate

所以这就是问题所在。我有一个使用 Jörn Zaefferer 的 jQuery Validation 插件进行验证的表单。我的验证工作正常，除了一个组件，即远程验证。实际上，远程验证确实有效，但未达到预期。当我在用户名输入中输入一些数据并“关注”时，数据会在服务器上进行验证，并且根据用户名的可用性，服务器会以字符串 true 或 false 进行响应。现在，在客户端，我希望验证插件根据服务器的响应将“错误”或“有效”类添加到输入元素。当插件从服务器接收到错误的响应字符串时，它确实添加了“错误”类，但在接收到真实的响应字符串时未能添加“有效”类。

如果在用户名输入内部单击并第二次聚焦，则更加神秘，瞧！添加了有效的类。需要注意的一点：由于输入字段数据没有更改，因此远程 Ajax 验证不会在第二个焦点上运行。该插件只是根据从服务器收到的最后一个响应（我认为）添加类。诡异的。

最初，我认为问题可能是由于异步 Ajax 造成的。但我将其更改为同步。问题依然存在。我已经在 Firebug 控制台中彻底检查了服务器的响应。我可以看到“真”或“假”字符串（不带引号）作为响应。

我还添加了 errorLabelContainer （虽然我不需要它）来检查它是否收到任何东西。同样，在错误时，errorLabelContainer 选择器会收到错误消息，但在成功时它保持空白。

我需要设置有效的类，因为我使用它来更改 CSS 中的输入背景，以便向用户提供视觉指示。

这是我拥有的验证代码：

```
$('.registration-form').validate({
    debug           : true,
    onkeyup         : false,
    errorLabelContainer: '.message-box',
    onfocusout      : function(element) { var isvalid = $(element).valid(); console.log(isvalid); },
    rules           : { username                    : { required: true, alphanumeric: true, minlength: 3, remote: { url     : ajaxVars.ajaxurl,
                                                                                                                    type    :'POST',
                                                                                                                    async   : false,
                                                                                                                    cache   : false,
                                                                                                                    timeout : 5000,
                                                                                                                    data    : { action: 'check_username',
                                                                                                                                username: function() { return $('input[name="username"]').val(); },
                                                                                                                                _ajax_nonce: ajaxVars._ajax_nonce
                                                                                                                    }
                                                                                                        }
                                                    },
                        email                       : { required: true, email: true, remote: {  url     : ajaxVars.ajaxurl,
                                                                                                type    :'POST',
                                                                                                async   : false,
                                                                                                cache   : false,
                                                                                                timeout : 5000,
                                                                                                data    : { action: 'check_email',
                                                                                                            email: function() { return $('input[name="email"]').val(); },
                                                                                                            _ajax_nonce: ajaxVars._ajax_nonce
                                                                                                        }
                                                                                                }
                                                    },
                        password                    : { required: true, minlength: 5 },
    }, // end rules
    messages        : { username                    : { required        : 'Please enter a username.',
                                                        alphanumeric    : 'Your username must be atleast 3 characters long and must only include alphabets, numbers or an underscore.',
                                                        minlength       : 'Your username must be atleast 3 characters long and must only include alphabets, numbers or an underscore.',
                                                        remote          : 'This username is already taken!'
                        },
                        email                       : { required        : 'Please enter an email address.',
                                                        email           : 'Please enter a valid email address.',
                                                        remote          : 'This email is already registered!'
                        },
                        password                    : 'Please provide a password for your new account. The password must be atleast 5 characters long.',
    }, // end messages
    submitHandler   : function(form) {
                        $(form).ajaxSubmit({
                            success                 : show_reg_response,
                            url                     : ajaxVars.ajaxurl,
                            type                    : 'POST',
                            timeout                 : 10000,
                            clearForm               : true,
                            resetForm               : true
                        });
    } // end submitHandler
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T02:54:33.027

我遇到了和你一样的问题，我目前的解决方案是用单独的 ajax.call 替换远程验证来执行我的验证逻辑（有点不方便，因为我应该在适当的时候实现 show/hide 方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T18:03:26.847

只是为了咯咯笑，在你的遥控器上添加一个完整的回调

```
 complete: function(data){
      $("#field_id").valid();                         
    } 
```

这为我解决了这个问题，不确定它是否适合您，具体取决于您的其余代码。我正在使用与您类似的一组代码。

希望有帮助

吨

# jquery - 平板电脑中出现 jquery 应用程序的空白屏幕：

> ID：10169210
> 
> 赞同：-1
> 
> 时间：2012-04-16T05:44:49.817
> 
> 标签：jquery, android

最近我使用 jquery 创建了一个应用程序 RSS 阅读器，与 android 集成，在手机上运行应用程序时它可以工作，但在平板电脑上它随机显示空白屏幕（7/10）。这是因为代码中的错误吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:51:16.377

我认为您必须逐步调试它并输入一些代码，以便我们可以找到发生了什么。

先去：

```
$(document).ready(function(){
    //render some debug text on main window
}); 
```

# php - 使用 PHP 的 XMLReader、DOM 和 SimpleXML 强制 UTF8 格式

> ID：10169211
> 
> 赞同：2
> 
> 时间：2012-04-16T05:45:02.593
> 
> 标签：php, xml, xmlreader

我们有一个脚本，可以解析来自用户生成的源的 XML 提要，这些提要不时包含格式不正确的带有特殊字符的条目。

虽然我通常只在线运行 utf8_encode() ，但我不确定如何执行此操作，因为 DOM 正在逐步读取文件并在执行扩展命令时引发错误。

由于 simple_xml 阻塞了代码，后续行也关闭了。

这是代码。

```
$z = new XMLReader; 
$z->open($filename); $doc = new DOMDocument('1.0','UTF-8');         
while ($z->read() && $z->name !== 'product');   
while ($z->nodeType == XMLReader::ELEMENT AND $z->name === 'product'){
$producti = simplexml_import_dom($doc->importNode($z->expand(), true));
print_r($producti);
} 
```

错误：

> 消息：XMLReader::expand(): foo.xml:29081: 解析器错误：输入不正确的 UTF-8，指示编码！字节：0x05 0x20 0x2D 0x35
> 
> 严重性：警告
> 
> 消息：XMLReader::expand(): 展开时发生错误
> 
> 文件名：控制器/feeds.php
> 
> 行号：106
> 
> 消息：传递给 DOMDocument::importNode() 的参数 1 必须是 DOMNode 的实例，给定的布尔值
> 
> 文件名：控制器/feeds.php
> 
> 行号：106

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:11:47.017

首先使用 HTML Tidy 库来清理你的字符串。

另外我最好使用 DOMDocument 而不是 XMLReader。

像这样的东西：

```
 $tidy = new Tidy;

        $config = array(
                'drop-font-tags' => true,
                'drop-proprietary-attributes' => true,
                'hide-comments' => true,
                'indent' => true,
                'logical-emphasis' => true,
                'numeric-entities' => true,
                'output-xhtml' => true,
                'wrap' => 0
        );

        $tidy->parseString($html, $config, 'utf8');

        $tidy->cleanRepair();

        $xml = $tidy->value; // Get clear string

        $dom = new DOMDocument;

        $dom->loadXML($xml);

        ... 
```

# meteor - nowjs和meteor有什么区别？

> ID：10169213
> 
> 赞同：0
> 
> 时间：2012-04-16T05:45:04.483
> 
> 标签：meteor, nowjs-sockets

我看到它们都是这样的：您编写一个代码然后可以在客户端和服务器中运行，那么有人可以告诉我它们之间的主要区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:55:43.910

我建议查看他们网站上的一些示例，但 Meteor 的主要优点/额外功能是： - 代码似乎更加模块化，带有智能包 - 您的网站将完全响应数据库的更改，代码将刷新客户端自动查看 - 现在似乎不清楚 NowJS 如何将数据存储在服务器上，在 Meteor 上与 MongoDB 一起使用，未来可以换出不同的数据库类型

还有更多优点，可能还有一些缺点，但我猜这些将被消除，因为 Meteor 正在获得相当多的贡献。

# java - gwt中的ant脚本问题

> ID：10169219
> 
> 赞同：0
> 
> 时间：2012-04-16T05:45:36.357
> 
> 标签：java, gwt, ant

我创建了一个简单的 GWT 应用程序。我创建了 build.xml。但是当我运行它时，它给了我以下异常：- [无法在您的类路径上找到“com/google/gwt/user/User.gwt.xml”；可能是拼写错误，或者您忘记包含源的类路径条目？]。

请指导我，如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:20:07.723

GWT 编译器（或开发模式）的类路径缺少 gwt-user.jar。

# cocoa - 在 Cocoa 中存储下载的文件

> ID：10169223
> 
> 赞同：1
> 
> 时间：2012-04-16T05:46:10.620
> 
> 标签：cocoa, persistence, sandbox, appkit

我正在开发一个 Cocoa 应用程序，它需要 10.7+。所以，我很乐意使用新的闪亮 API。

我想做的是从我们的后端服务器下载一些 MP3 和可能的一些 XML 数据，并将其存储在用户的 Mac 上。我很想将它存储**在**“application.app”目录中，以及与应用程序捆绑在一起的初始资源。

我可以这样做吗？在 application.app 中存储文件？

如果不是，存储附加数据的首选目录在哪里？

**注意：**它必须支持苹果的新沙盒东西。

* * *

（这是个好主意吗：[参考](http://cocoadevcentral.com/articles/000059.php)）

```
// save our buddy list to the user's home directory/Library/Preferences.
    [prefs writeToFile:[@"~/Library/Preferences/MiniMessage Client.plist"
                    stringByExpandingTildeInPath] atomically: TRUE]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:31:58.763

这是 Apple 的[App Sandbox Design Guide](http://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxDesignGuide.pdf)并阅读“容器目录和文件系统访问”。目录“~/Library/Container/com.yourcompany.yourappname/”及其子目录将仅是您的应用程序，因此在我看来，该目录将是您保存将从网络下载的内容的最佳位置。

# php - fileatime() 是否“访问”该文件？

> ID：10169229
> 
> 赞同：4
> 
> 时间：2012-04-16T05:46:43.633
> 
> 标签：php, file

我想知道 fileatime 是否算作已访问该文件？

我假设不是因为该函数实际上只需要访问文件的文件系统元数据而不是文件本身 - 这是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T05:48:43.467

那是对的。底层`stat()`调用不会修改文件元数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T05:49:41.947

是的，它必须访问文件系统，因为只有文件系统保存了 modtime、creationtime 和 accesstime。

# java - NetBeans - 使用不同的 lib 文件夹

> ID：10169232
> 
> 赞同：0
> 
> 时间：2012-04-16T05:47:26.337
> 
> 标签：java, netbeans

我只是想组织我的 Java lib 文件夹（使用 NetBeans）。

我想要的是这样的：

```
unknownNetworkDriveOrUncPath:\java\commonlib\
                                   |-- fileio.jar
                                   |-- ...

unknownNetworkDriveOrUncPath:\java\program1\
                                   |-- lib\
                                   |-- program1.jar

unknownNetworkDriveOrUncPath:\java\program2\
                                   |-- lib\
                                   |-- program2.jar 
```

程序文件夹内的 lib 文件夹包含特定的 jar。commonlib 文件夹包含每个程序可能使用的 jar。所以 program1 应该可以访问它自己的 lib 文件夹和公共 lib 文件夹。程序 2 也是如此。

最好的方法是编译后在 dist 文件夹中具有相同的结构。然后就可以将文件复制到所需的位置。但我不知道该怎么做。

是否有关于如何配置 NetBeans 的“最佳实践”解决方案？我不能使用绝对路径或 UNC 路径，因为网络驱动器可能不同。

提前致谢。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T07:28:36.750

您可能需要修改项目目录中的 build.xml 文件。Netbeans 使用 Apache Ant 作为执行构建过程的工具。Ant 是一个基于 XML 的脚本。它在 Netbeans 中被拆分为多个文件，但您应该修改的唯一一个是 build.xml。

阅读此文件中的注释。他们建议您应该覆盖某些目标以调整构建过程以满足您的需求。例如，我们使用“-post-jar”目标在“dist”目录中创建我们产品的整个安装目录。至于非绝对路径，我认为您无法实现，但您可以将内容复制到相对于项目目录的位置。我完全有可能为多个 Netbeans 项目提供一个通用的 dist 目录。

以下可能（尚未测试）将您的项目的 JAR 复制到“commonBuildDir”目录，该目录应与您的项目目录位于同一级别。

```
<target name="-post-jar">
    <property name="common.build.dir" location="${build.dir}/../../commonBuildDir"/>    
    <copy todir="${common.build.dir}" preservelastmodified="true">
            <fileset file="${dist.jar}"/>
    </copy>
</target> 
```

`${build.dir}`引用一个 Ant 属性，在本例中是一个预定义的属性，它指向项目的构建目录。`${dist.jar}`引用项目 JAR 文件的位置也是如此。如果我没记错的话，在幕后这些都是绝对路径。

[自定义 Netbeans 构建脚本](http://netbeans.org/kb/docs/java/project-setup.html#build-script)

[蚂蚁教程](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)

我认为这应该让您开始按照您希望的方式自定义构建过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:36:52.517

您可以创建一个`commonslib`库 ( `Tools -> Libraries`)，然后在您的项目中使用。

然后在您的项目中手动添加 jar 的路径。

# java - 从文件中读取序列化对象

> ID：10169233
> 
> 赞同：0
> 
> 时间：2012-04-16T05:47:34.237
> 
> 标签：java, serialization

我正在编写一个程序，该程序需要我写并读回我创建的对象。当我试图读回对象并对其进行反序列化时，我收到了*Ilegal start of expression*错误。我想知道是否有人可以告诉我这是什么以及如何解决它。

```
 RandomAccessFile temp = new RandomAccessFile(fileSystemName,"r");
        this.numberOfDirectories= temp.readInt();
        this.fileSystemSize = temp.readInt();
        this.numberOfBlocks = temp.readInt();
        //Prepares and loads the bitMap
        numberOfBytes = (numberOfBlocks/8)+1;
        //directory = new Directory(numberOfDirectories);
        bitMap = new byte[numberOfBytes];
        for(int i=0;i<numberOfBytes;i++)bitMap[i]=temp.readByte();
        temp.close();
        FileInputStream fin = new FileInputStream(fileSystemName);
        ObjectInputStream ois = new ObjectInputStream(fin);

        //File file = new File(fileSystemName);
        System.out.println(bitMap.length);
        offset = 12 + numberOfBytes;
        //ois.skipBytes(offset);
        //Read Directories
        directory = <Directory> ois.readObject(); 
```

偏移量是因为我首先使用 RandomAccessFile 对象首先读取一些整数和字符。我很感激帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:12:41.860

我会使用一个流，然后您就不必担心偏移量，并确保您正在阅读您正在写的内容。例如以下工作正常：

```
final String name = "tmp.data";
int numberOfDirectories = 2;
int fileSystemSize = 4;
byte[] bitMap = new byte[] { 0, 1, 0 };
File someObject = new File(".");
ObjectOutputStream outputStream = new ObjectOutputStream(new FileOutputStream(name));
outputStream.write(numberOfDirectories);
outputStream.write(fileSystemSize);
outputStream.write(bitMap.length);
outputStream.write(bitMap);
outputStream.writeObject(someObject);
outputStream.close();
// ....
ObjectInputStream inputStream = new ObjectInputStream(new FileInputStream(name));
System.out.println("numberOfDirectories:" + inputStream.read());
System.out.println("fileSystemSize:" + inputStream.read());
final int size = inputStream.read();
byte[] readBitMap = new byte[size];
inputStream.read(readBitMap);
System.out.println("bitMap:" + readBitMap);
System.out.println("someObject:" + inputStream.readObject());
inputStream.close(); 
```

此外，为了让生活更轻松，我很想创建一个代表您要存储在文件中的所有数据的类，然后 Object 流会为您处理所有事情：

```
public static class Data {
    private int numberOfDirectories;
    private int fileSystemSize;
    private byte[] bitMap;
    private File someObject;
    // getters and setters .... 
}

final String name = "tmp.data";
Data data = new Data();
data.setNumberOfDirectories(2);
data.setFileSystemSize(4);
data.setBitMap(new byte[] { 0, 1, 0 });
data.setSomeObject(new File("."));
ObjectOutputStream outputStream = new ObjectOutputStream(new FileOutputStream(name));
outputStream.writeObject(data);
outputStream.close();
// ....
ObjectInputStream inputStream = new ObjectInputStream(new FileInputStream(name));
Data readData = (Data) inputStream.readObject();
System.out.println("numberOfDirectories:" + readData.getNumberOfDirectories());
System.out.println("fileSystemSize:" + readData.getFileSystemSize());
System.out.println("bitMap:" + readData.getBitMap());
System.out.println("someObject:" + readData.getSomeObject());
inputStream.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:37:55.753

您必须以与您编写数据的方式兼容的方式读取数据。

对象流具有特定格式。它有一个标头，并且丢失了您感兴趣的字节周围的字节。例如，如果您写一个`Integer`，它将占用 88 个字节。您不能只在对象流中读取并随机访问它的位或跳过字节期望它可以工作。

你是怎么写数据的？

# javascript - 有哪些在线 Javascript 工具可以逐步显示执行和流程/控制流程

> ID：10169234
> 
> 赞同：2
> 
> 时间：2012-04-16T05:47:35.880
> 
> 标签：javascript

有一个在线工具，您可以在其中发布 javascript 代码，程序会根据控制流跳转和执行顺序自动突出显示行。

这不是错误控制台。

我不记得 URL 的名称，我想要它。我敢肯定，可能不止一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:53:26.887

[http://ajax.dynatrace.com/ajax/en/](http://ajax.dynatrace.com/ajax/en/)是一个被认为很好并且可以在很多浏览器上工作的网站。John Resig 对此的看法[http://ejohn.org/blog/deep-tracing-of-internet-explorer/](http://ejohn.org/blog/deep-tracing-of-internet-explorer/)

github 上还有一个 javascript 项目可以跟踪[https://github.com/eriwen/javascript-stacktrace](https://github.com/eriwen/javascript-stacktrace)，但它在跨浏览器方面并不友好。

# ios - 数组中的 UIImage

> ID：10169237
> 
> 赞同：0
> 
> 时间：2012-04-16T05:47:46.133
> 
> 标签：ios, iphone, uiimage

我正在使用一个 API，它为我提供了一个图像，如下例所示。我不确定如何将这个值数组转换为图像。我以前没见过这个。

有谁知道我如何将以下值数组转换为 UIImage？

`[255,216,255,224,0,16,74,70,73,70,0,1,1,1,0,96,...]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:52:03.853

这看起来像是直接的像素缓冲区数据，因此您必须猜测格式（可能是 RBGA？）和图像尺寸（希望它是固定的/可猜测的/包含在格式中）。如果你猜对了，你应该可以用 CGDataProviderCreateWithData 创建一个 CIImage；

```
CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer, bufferLength, NULL);
//a reasonable guess
CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
int bitsPerComponent = 8;
int bitsPerPixel = 32;
int bytesPerRow = 4 * width;

CGImageRef imageRef = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, kCGBitmapByteOrderDefault, provider, NULL, NO, kCGRenderingIntentDefault);
UIImage *newUIImage = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef); 
CGDataProviderRelease(provider); 
```

# iphone - 我们可以用什么来代替 nstimer？

> ID：10169241
> 
> 赞同：5
> 
> 时间：2012-04-16T05:48:33.500
> 
> 标签：iphone, ios, xcode, gps, cllocationmanager

我可以在后台使用 获取 GPS 位置`[locationManager startUpdatingLocation]`，但我不知道如何安排它。我已经使用 NSTimer 进行调度，但其中许多人说如果应用程序进入后台，NSTimer 将过期。

如果我们不使用 NSTimers，我想知道如何安排调用该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:24:38.117

我们可以使用 Push Notification 而不是 NSTimer 进行调度，如下所示：-

[http://developer.apple.com/iphone/library/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html](http://developer.apple.com/iphone/library/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

希望它有所帮助。谢谢:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:44:02.260

Apple 提供了 5 种 app 任务在后台运行：

> *   在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
> *   让用户随时了解其位置的应用程序，例如导航应用程序
> *   支持互联网协议语音 (VoIP) 的应用程序
> *   需要下载和处理新内容的报亭应用
> *   从外部配件接收定期更新的应用程序

[当应用程序处于后台时，请参阅此链接以获取位置更新](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html)

[另请参阅本教程以获得更多帮助](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:46:50.097

我认为你可以使用这个：

```
[self performSelector:@selector(_yourMethod) withObject:nil afterDelay:delay_in_milliseconds]; 
```

# eclipse - Eclipse 无法识别环境变量

> ID：10169242
> 
> 赞同：3
> 
> 时间：2012-04-16T05:48:37.607
> 
> 标签：eclipse, shell, .bash-profile, .profile

Eclipse 完全忽略了我所有的环境变量，例如它是我的路径变量的版本：

蚀：
`ANDROID_NDK=`
`PATH=[/usr/bin:/bin:/usr/sbin:/sbin]`

壳：
`ANDROID_NDK=/Users/myname/SDKs/AndroidSDK/NDK/android-ndk-r7c`
`PATH=/Users/myname/local/node/bin:/opt/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/myname/SDKs/andoird-sdks/tools:/Users/myname/SDKs/andoird-sdks/platform-tools:/Users/myname/SDKs/AndroidSDK/tools:/Users/myname/SDKs/AndroidSDK/platform-tools:/Users/myname/SDKs/AndroidSDK/NDK/android-ndk-r7c`

* * *

我尝试将我的环境变量从 .bash_profile 放到 .profile，但没有运气。eclips 从哪里得到它的环境变量？我该如何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-16T12:24:17.587

要使环境变量在 GUI 应用程序中可见，您需要将其放入 /etc/launchd.conf。输入终端：

```
sudo nano /etc/launchd.conf 
```

然后将变量添加到launchd.conf：

```
setenv VARIABLE_NAME variable_value 
```

按**Ctrl+O**、**Enter**、**Ctrl+X**，然后重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T20:28:23.950

注意：我刚刚发现项目属性窗格不能以这种方式正确加载。更多关于如何启动的研究...

这可能是 Eclipse 的 Juno (4.2) 版本（以及 3.x 前身）中的一个错误......这篇[stackoverflow 文章](https://askubuntu.com/questions/222192/missed-environment-variables-in-eclipse-juno)暗示了两件事

1.  让 Eclipse 了解您的 shell 环境变量的一种方法是从 bash shell / 命令行启动 Eclipse（它将因此从 shell 继承环境。

2.  另一种方式似乎暗示了 Kepler (4.3) 之前的 Eclipse 中的一个错误：如果您升级到 Kepler (4.3)，OP 的问题就消失了。

[这篇文章](https://askubuntu.com/questions/114705/setting-environment-variables-when-executing-eclipse-via-unity-launcher-icon)以及[如何从命令行启动应用程序](https://stackoverflow.com/questions/1308755/launch-an-app-on-os-x-with-command-line)对于让它在 OS X 上运行也很有用

这是使用 QuickSilver 作为启动器的 OS X 的分步说明。我在 ~/Applications/ 文件夹中创建了一个 .sh 文件，现在我从 QuickSilver 运行它（我认为 Spotlight 也可以进行相同的基本过程）。

1.  我用这一行创建了 eclipse.sh 来调用 .app“文件”。对我来说，这是 ADT Bundle 的一部分，但只需将下面的路径替换为 .app 文件的路径（这是您从 Applications 文件夹或 Eclipse 安装所在的任何位置运行的图标）

开始编辑

```
My originally-posted line

/Users/mike/DevInstalls/adt-bundle-mac-x86_64-20140702/eclipse/Eclipse.app/Contents/MacOS/eclipse

works until I try to open the properties panels in Project Properties.  The panels won't open, so I tried the following change to fix it

/Users/mike/DevInstalls/adt-bundle-mac-x86_64-20140702/eclipse/Eclipse.app/Contents/MacOS/eclipse &

but this won't work when launched from Quicksilver.

Either way, launching gracefully via QuickSilver has nothing to do with the OP, so I'm going to stop pulling my hair out over it. :-/ 
```

结束编辑

```
Then, back at the command line run "sudo chmod 755 ./eclipse.sh" to set the permission properly so it can be executed. 
```

2.a. 接下来，我必须配置 QuickSilver 才能找到这个 shell 命令。为此，我按下 QuickSilver 击键，单击右上角的三角形打开其首选项，然后选择目录...，然后单击左侧的自定义，右侧添加条目的加号，然后选择文件＆文件夹扫描仪，然后选择shell脚本所在的文件夹，然后单击右下角的小“i”按钮，在窗口中向右扩展，在“包含内容”下单击“文件夹内容”。

2.b。或者，在 Quicksilver 首选项中，您可以在“目录”下启用“Bash 命令历史记录”。我选择不使用这种方法，因此我的 QuickSilver 历史不会被命令历史噪音淹没。

# javascript - javascript中（字符空格字符）或（空格字符空格）的表达式是什么

> ID：10169249
> 
> 赞同：-1
> 
> 时间：2012-04-16T05:49:30.657
> 
> 标签：javascript, regex

在这里我只检查空间

```
if (/^\s*$/.test(txtSSAETitle.value) || /[\s]/.test(txtSSAETitle.value)){
    txtSSAETitle.focus();
    alert("AE title should not be blank.");
    return false;              
} 
```

但是应该允许 [spacesjohnspacesHenry] 或 [johnspacesHenry]。（不会为此生成警报）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:55:18.573

如果您想检查输入是否仅包含空格，请[修剪](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim)输入并检查结果的长度，我会说。像：

```
if ( txtSSAETitle.value.replace(/^\s+|\s+$/,'').length<1 )  {  /* etc */ } 
```

# java - Eclipse 3.7 的 JProbe 插件

> ID：10169250
> 
> 赞同：1
> 
> 时间：2012-04-16T05:49:34.783
> 
> 标签：java, eclipse, jprobe

如何将 jprobe 插件添加到 Eclipse 3.7 中，我也下载了“Quest_Eclipse-Plug-in_901”，但现在不知道该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:00:53.903

也许[如何安装 JProbe Eclipse 插件](http://jprobe.inside.quest.com/pageloader.jspa?sbinPageName=install_jprobe_eclipse.htm&sbinPageTitle=JProbe%20Plugin%20for%20Eclipse%20Installation)或[JProbe Eclipse 插件安装](http://www.quest.com/Quest_Site_Assets/PDF/JProbev9_EclipsePlug-in_Instructions.pdf)会有所帮助

***编辑***：

似乎第一个链接不再重定向到正确的文档。[JProbe 帮助](http://us-downloads.quest.com/Repository/support.quest.com/JProbe/9.0.1/Documentation/JProbe.pdf)仍然可用，它有一个部分*Installation the JProbe Plug-in in Eclipse*。以防万一，我也会在此处包含详细信息。本质上，您使用***Install new software...***选项来安装插件：

*   单击*帮助 -> 安装新软件*
*   *输入JProbe*更新站点的路径并选择*JProbe*项。该网站是： `http://www.quest.com/jprobe/Eclipseupdate/`

![在此处输入图像描述](../Images/9491bdf0f79534fd8549fe2bad65f02a.png)

# php - PHP - 这是在类中正确使用异常处理错误吗？

> ID：10169256
> 
> 赞同：0
> 
> 时间：2012-04-16T05:50:38.417
> 
> 标签：php, class, exception, error-handling, design-principles

我在这个主题上搜索了很多，并得到了很多好的（但不同的）结果。有些结果并不完全相关，最终似乎是一个偏好问题，但**我感兴趣的是我是否遵循良好的设计原则**。

**如果这个问题太模糊，请随意删除它，但你能推荐我在哪里发布它吗？**

此外，这**只是一个示例**。这里有很多事情我通常会做不同的事情，但为了简单起见，我这样做了。

**代码很长，但您应该可以直接将其复制并粘贴到一个新的 PHP 文件中并在您的环境中运行它；无需设置。**

# 具体问题

*   这是使用异常并在调用方处理它们的正确方法吗？
*   我什至应该为此使用例外吗？
*   我的骨架自定义异常是否正确？

# 代码

[您可以在此处](http://codepad.org/tjNTj84i)在单独的窗口中查看副本。我会把它贴在这里。保存它并在您的环境中运行它，它应该可以按原样工作，无需任何修改：

## 当心：前面的代码很长

```
<?php

    error_reporting ( E_ALL | E_STRICT );

    class MemberLoginException extends Exception
    {

        public function __construct ( $message = null, $code = 0, Exception $previous = null )
        {
            parent::__construct ( $message, $code, $previous );
        }

    }

    class AccountsInsertException extends Exception
    {

        public function __construct ( $message = null, $code = 0, Exception $previous = null )
        {
            parent::__construct ( $message, $code, $previous );
        }

    }

    class AccountsManager
    {

        protected $_accounts = array ();
        protected $_lcUsernames = array ();     # all usernames in lowercase for checking if username is taken

        public function __construct ( array $accounts = null )
        {
            $this->setAllAccounts ( $accounts );
        }

        public function __destruct ()
        {
            unset ( $this->_accounts, $this->_lcUsernames );
        }

        public function __toString ()
        {
            $return = '';

            if ( count ( $this->_accounts ) > 0 ) :

                $return = '<table>';
                $return .= '<tr><th>Username</th><th>Password</th></tr>';

                foreach ( $this->_accounts as $account ) :

                    $return .= 
                    '<tr>
                        <td>'. htmlentities ( $account['username'], ENT_QUOTES, 'UTF-8' ) . '</td>
                        <td>'. htmlentities ( $account['password'], ENT_QUOTES, 'UTF-8' ) . '</td>
                    </tr>';

                endforeach;

                $return .= '</table>';

                return $return;
            endif;
        }

        public function Clear ()
        {
            $this->_accounts = array ();
            $this->_lcUsernames = array ();
        }

        public function Authenticate ( Member $member )
        {
            $username = strtolower ( $member->getUsername () );

            if ( count ( $this->_accounts ) ) :

                foreach ( $this->_accounts as $account ) :

                    if ( strtolower ( $account['username'] ) == $username )
                        return ( bool ) ( $account['password'] == $member->getPassword () );

                endforeach;

            else :
                return false;
            endif;
        }

        public function getAllAccounts ()
        {
            return $this->_accounts;
        }

        public function setAllAccounts ( array $newValue = null )
        {
            if ( is_null ( $newValue ) )
                $this->_accounts = array ();
            else
                $this->_accounts = $newValue;
                $this->_lcUsernames = array ();

                foreach ( $this->_accounts as $account )
                    $this->_lcUsernames[] = strtolower ( $account['username'] );

            return $this;
        }

        public function hasAccount ( $username )
        {
            return in_array ( strtolower ( $username ), $this->_lcUsernames, false );
        }

        public function AddAccount ( $username, $password )
        {

            /*
            Faster to be redundant by storing a lowercase copy of the username for comparison

            if ( array_key_exists ( strtolower ( $username ), array_change_key_case ( $this->_accounts ) ) )
                throw new AccountsInsertException ( 'Unable to create account; account already exists.' );
            */

            if ( $this->hasAccount ( $username ) )
                throw new AccountsInsertException ( 'Unable to create account; account already exists.' );

            $this->_accounts[] = array (
                'username' => $username,
                'password' => $password,
            );

            $this->_lcUsernames[] = strtolower ( $username );
            return $this;
        }

        public function RemoveAccount ( $username )
        {
            if ( $this->hasAccount ( $username ) ) :
                unset ( $this->_accounts[$username] );
                unset ( $this->_lcUsernames [ strtolower ( $username ) ] );
            endif;

            return $this;
        }

        public function __Debug ()
        {
            echo "\r<pre>\r";
            print_r ( $this->_accounts );
            echo "\r</pre>\r\r\r<pre>\r";
            print_r ( $this->_lcUsernames );
            echo "\r</pre>\r\r";
        }

    }

    class Member
    {

        protected $_username = '';
        protected $_password = '';

        public function __construct ( $username, $password )
        {
            $this->setUsername ( $username );
            $this->setPassword ( $password );
        }

        public function getUsername ()
        {
            return $this->_username;
        }

        public function setUsername ( $newValue )
        {
            $this->_username = ( string ) $newValue;
            return $this;
        }

        public function getPassword ()
        {
            return $this->_password;
        }

        public function setPassword ( $newValue )
        {
            $this->_password = ( string ) $newValue;
            return $this;
        }

    }

    # create a new accounts manager which stores all accounts and handles authentication
    # the Member class would be responsible for setting session variables, etc. Manager just checks user/pass.
    $manager = new AccountsManager ();

?><!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />

        <style>

            *
            {
                font-family: "Segoe UI", "Trebuchet MS", Tahoma, Arial, Helvetica, sans-serif;
            }

            body
            {
                margin: 4em 6em;
                line-height: 1.6em;
                font-size: smaller;
            }

            header
            {
                border-bottom: 2px solid #efefef;
                margin-bottom: 3em;
                padding-bottom: 1em;
            }

            h1, h2, h3, h4, h5, h6
            {
                font-weight: normal;
                letter-spacing: 1px;
                color: royalblue;
            }

            h5, h6
            {
                font-weight: bold;
            }

            header h1 sub, header h1 sup
            {
                font-size: small;
                color: #FF4400;
                letter-spacing: 2px;
            }

            section
            {
                border-bottom: 1px dotted #ccc;
                padding-bottom: 2em;
                margin-bottom: 3em;
            }

            table
            {
                border: 1px solid #eee;
                padding: 1em;
                border-right-width: 2px;
                border-bottom-width: 2px;
            }

            th
            {
                text-align: left;
                font-variant: small-caps;
                border-bottom: 1px dotted #ccc;
                padding-bottom: .75em;
                margin-bottom: .75em;
                letter-spacing: 1px;
                color: #FF4400;
            }

            td:hover
            {
                background-color: skyblue;
            }

            td
            {
                margin: 0;
                display: table-cell;
                padding: .5em;
            }

            pre
            {
                font-family: "Droid Sans Mono", Consolas, "Courier New", Courier, monospaced;
                border: 1px solid #E4E4E4;
                padding: 1em;
                line-height: 1em;
            }

            .error
            {
                color: red;
                border: 1px dotted #ccc;
            }

            .success
            {
                color: forestgreen;
                border: 1px dotted #e0e0e0;
            }

            .error, .success
            {
                padding: .75em;
                background-color: #FFFFCC;
                border: 1px solid #E4E4E4;
            }

        </style>

        <title>Sample Login System - Test Exceptions</title>
    </head>

    <body>

        <header>
            <h1>Simple Login System <sup>demonstrating exceptions&hellip;</sup></h1>
        </header>

        <section>
            <h2>No database required</h2>

            <p>To avoid time setting up your environment, this test simply uses a class that stores an array of accounts.
            Obviously, this isn't persistent (at this time) and it doesn't actually save anything anywhere except in the
            array during the script's lifetime. Upon the next request, the previous accounts will be erased.</p>
        </section>

        <section>
            <h2>Creating accounts...</h2>

            <?php

                $createList =
                    array (

                        array (
                            'username' => 'Daniel Elkins',
                            'password' => 'delkins[not-pass-for-anything]',
                        ),

                        array (
                            'username' => 'Jennifer Lynn',
                            'password' => 'lilJenn',
                        ),

                        array (
                            'username'=> 'Charlie Dog',
                            'password'=> 'grrrrr',
                        ),

                    );

                if ( $manager->setAllAccounts ( $createList ) instanceof AccountsManager ) : ?>

                    <p><strong>Accounts were created successfully!</strong> They should be listed in
                    a table below.</p>

                <?php

                else :

                ?>

                    <p class="error">There was an error creating your accounts...</p>

                <?php

                endif;

            ?>

        </section>

        <section>
            <h2>List of accounts</h2>

            <?php echo $manager; ?>

        </section>

        <section>
            <h2>Trying to create one that already exists...</h2>

            <?php

            try
            {
                $manager->AddAccount ( 'Daniel Elkins', 'delkins[not-pass-for-anything]'); ?>

                <p class="success">Account created successfully!</p>

                <?php

            }
            catch ( AccountsInsertException $exception )
            {
                ?>

                <p class="error"><?= $exception->getMessage (); ?></p>

                <?php

            }

            ?>

        </section>

        <section>
            <h2>Showing accounts again</h2>

            <?php echo $manager; ?>

        </section>

        <section>
            <h2>Valid login test</h2>

            <p>Logging in user `Daniel Elkins`&hellip;</p>

            <?php

            if ( $manager->Authenticate ( new Member ( 'Daniel Elkins', 'delkins[not-pass-for-anything]' ) ) ) : ?>

                <p class="success">Authentication successful!</p>

                <?php

            else :

            ?>

                <p class="error">Unable to login; invalid username or password!</p>

                <?php

            endif;

            ?>

        </section>

        <section>
            <h2><strong>Invalid</strong> login test</h2>

            <p>Logging in user `Doesnt_Exist`&hellip;</p>

            <?php

            if ( $manager->Authenticate ( new Member ( 'Doesnt_Exist', '1234' ) ) ) : ?>

                <p class="success">Authentication successful!</p>

                <?php

            else :

            ?>

                <p class="error">Unable to login; invalid username or password!</p>

                <?php

            endif;

            ?>

        </section>

        <section>
            <h2>Debug information</h2>

            <?php $manager->__Debug (); ?>

        </section>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:08:46.127

> 这是使用异常并在调用方处理它们的正确方法吗？

对我来说似乎是一个合理的方法。您正在抛出特定于类的异常，因此很容易捕获或传播它们，并且只抛出特定的异常，而不必捕获所有内容并进行过滤。

> 我什至应该为此使用例外吗？

如果您认为帐户存在的特殊情况，是的。

> 我的骨架自定义异常是否正确？

是的，尽管您可以考虑将元数据添加到其中，例如正在创建的帐户名称`AccountInsertException`。这可能没有必要，但如果您发现自己处于有用的情况，这只是需要考虑的事情。

否则代码在某些地方有点乱，但我假设它部分是因为这个例子。

# jquery - 如何使用 jQuery 获取不断变化的类名

> ID：10169258
> 
> 赞同：-1
> 
> 时间：2012-04-16T05:50:48.757
> 
> 标签：jquery, selector

如何获得一个不断变化的元素： `<li class="tab-li tab-error tab-active" bpm-tab="bpm-tab-event-mapping">` 和 `<li class="tab-li tab-active" bpm-tab="bpm-tab-event-mapping">`

无论如何使用jQuery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:55:24.677

假设它总是有课`tab-li`。您可以使用

```
$('.tab-li').attr('class'); 
```

它将返回应用到它的所有类。
或者正如@Hassan 提到的那样使用一些`id`（假设 li_id 在这里是 id）

```
$('#li_id').attr('class'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:36:09.740

`bpm-tab`是的，您可以使用以下代码按属性找到它：

```
$("li[bpm-tab = bpm-tab-event-mapping]") 
```

但我建议您`id`向此元素添加一个属性并按 id 搜索

```
<li class="tab-li tab-error tab-active" bpm-tab="bpm-tab-event-mapping" id="anyId"> 
```

搜索代码：

```
$("#anyId"); 
```

按 id 搜索更快。

# objective-c - |NSArray objectEnumerator| 中的内存泄漏？

> ID：10169263
> 
> 赞同：2
> 
> 时间：2012-04-16T05:51:16.293
> 
> 标签：objective-c, xcode, cocoa, memory-management

以下线程解释了如何找到当前包含鼠标光标的屏幕：

[http://www.cocoabuilder.com/archive/cocoa/104529-current-mouse-screen.html](http://www.cocoabuilder.com/archive/cocoa/104529-current-mouse-screen.html)

```
- (NSScreen *)currentScreenForPointUsingEnumeration:(NSPoint)aPoint
{
    NSEnumerator *screenEnumerator = [[NSScreen screens] objectEnumerator];
    NSScreen *screen;
    while ((screen = [screenEnumerator nextObject]) && !NSMouseInRect(aPoint, screen.frame, NO));

    return screen;
} 
```

我在每次鼠标移动时都会运行它。

不幸的是，使用 Xcode 的 Instruments 工具中的“分配”功能，上面的代码显示了许多`NSFastEnumeration`.

分析器中没有出现“泄漏”，但分配计数不断增加并且从未减少。该应用程序的整体内存使用量也继续上升。

使用`for(...)`循环的类似函数没有相同的问题。

我能做些什么来提高这里的性能吗？还是我不应该担心的事情？

编辑：

顺便说一句，尝试`[[[NSScreen screens] objectEnumerator] autorelease]`使应用程序崩溃并完全锁定我的鼠标。无法单击或以其他方式找出退出应用程序或 Xcode 的方法。需要重新启动 OS X。所以不要那样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:55:04.977

> 我能做些什么来提高这里的性能吗？

我不确定您为什么认为存在性能问题。分析仪显示没有泄漏，所以除非它是错误的（不幸的是，这些天并非不可能），否则可能没有泄漏。

如果您将代码包装在自动释放池中，则`NSFastEnumerations`应该被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:15:02.093

You could try using blocks, and/or wrap it up in autorelease pool eg :

```
__block NSScreen *retVal = nil;
[[NSScreen screens] enumerateObjectsWithOptions:NSEnumerationConcurrent 
     usingBlock:^(Screen *scrn, NSUInteger idx, BOOL *stop) {
         if (NSMouseInRect(aPoint, scrn.frame, NO)) {
           retVal = scrn;
           *stop = YES;
     }];
return retVal; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:08:52.253

您可以尝试两件事；不确定哪个会有所帮助，或者他们是否会有所帮助。

一、使用实际的快速枚举语法：

```
for( NSScreen * screen in [NSScreen screens] ){
    if( NSMouseInRect(aPoint, screen.frame, NO) ){
        return screen;
    }
} 
```

或者将其包装在您自己的自动释放池中，以帮助创建的数组和枚举器对象尽快释放。

```
NSScreen *screen = nil;
@autoreleasepool{
    NSEnumerator *screenEnumerator = [[NSScreen screens] objectEnumerator];
    while ((screen = [screenEnumerator nextObject]) && !NSMouseInRect(aPoint, screen.frame, NO));
    [screen retain];    // Ensure screen sticks around past return; only under MRR
}
return [screen autorelease]; 
```

# java - Hibernate：Criteria 按实体（不是 Id）查询子对象（关联）

> ID：10169267
> 
> 赞同：1
> 
> 时间：2012-04-16T05:51:38.913
> 
> 标签：java, hibernate, jpa, criteria-api

我想使用 Hibernate Criteria Query 通过子对象列表来查询父对象。我知道如何使用孩子的 ID，但不直接使用实体。

这有效：

```
List<Long>  listOfChildLongChildIds = new ArrayList<Long>();
listOfChildLongChildIds.add(new Long(1));
listOfChildLongChildIds.add(new Long(2));

Criteria criteria = getSession().createCriteria(Parent.class);
Criteria criteriaChilds = criteria.createCriteria("childs");
criteriaChilds.add(Restrictions.in("id", listOfChildLongChildIds)); 
```

但是如何做到这一点，当列表包含这样的子对象/实体时：

```
List<Child>  listOfChildEntities = new ArrayList<Child>();
listOfChildEntities.add(QueryChildFromDatabse);
listOfChildEntities.add(QueryChildFromDatabse); 
```

（这意味着我不使用孩子的 ID，而只使用实体本身。原因是否则我将不得不遍历我的孩子列表并提取所有 Id 并将它们放入我认为最有可能不必要的列表中。但我无法找到如何通过实体列表本身查询的任何信息）：

然后上面的代码使用

```
criteriaChilds.add(Restrictions.in("id",listOfChildEntities)); 
```

会抛出异常：

> 不能将子级强制转换为 java.lang.Long

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T12:54:05.647

我认为您应该能够执行以下操作：

```
Criteria criteria = getSession().createCriteria(Parent.class);
criteria.createCriteria("childs","childs");
criteria.add(Restrictions.in("childs.id", listOfChildLongChildIds)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:28:42.443

您应该能够将对象传递给**Restrictions.in**方法。

```
Restrictions.in("childs", <childObjectslist>) 
```

# android - 如何在不重新启动的情况下在活动之间共享服务？

> ID：10169268
> 
> 赞同：6
> 
> 时间：2012-04-16T05:51:40.690
> 
> 标签：android, android-service, android-activity

我正在使用 SDK 编写 SIP 应用程序。我的应用程序有许多活动，因此我使用服务的 onCreate 和 onDestroy 方法初始化和关闭 SDK，以便我可以在我的应用程序期间运行它（而不仅仅是单个活动）。

我正在使用的示例应用程序调用 startService，然后只是泄漏了服务 - 我不想这样做，但我不确定我是否有替代方案。

我*想做*的是在我的 Activity 基类的 OnCreate 方法中使用 Context.BIND_AUTO_CREATE 绑定到服务，并在 OnDestroy 中取消绑定。我的所有活动都由此扩展，因此我的所有活动中都可以使用该服务。

但是，当配置更改或我切换活动时会发生什么？*服务是否会在活动之间*的短暂时间内被主动终止，或者是否可以保证不会？如果是前者，这不会稍微削弱服务的使用吗？我应该使用什么设计模式来使某些东西在我的应用程序的生命周期内持续*存在*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:12:00.057

我意识到我问错了问题。我假设应用程序将在用户完成它时被销毁，它可能不会，它只会坐在后台，我的服务也是如此。我想我需要重新设计。

此外，如果我真的想继续走这条路（我现在不想），我可以将服务绑定到我的应用程序，然后它会在应用程序的整个生命周期内存在（我记得，除非用户杀死它或Android回收它）。在这种情况下，我不需要专门调用 unbind，因为绑定将与应用程序一起被销毁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T06:13:48.623

在活动中，*使用服务***启动**服务`startService()`并绑定到服务。如果有配置更改，这将使您的服务保持活力。

 **`onDestroy()`在您的活动中解除与服务的*绑定。*该服务将在您启动时仍在运行，而不仅仅是绑定到它。*

 *在您的启动器活动中保留一个静态计数器变量。其 中的其他活动启动将其增加 1，并在其 中将其`onCreate()`减少 1 `onDestroy()`。因此，如果已打开 3 个活动并假设您将另外 2 个活动保留在后台，则静态计数器为 3。现在`onDestroy()`每次减少计数器并检查它是否为零，停止服务。

在我的 FirstActivity ( **Launcher** ) 中，我有`public static int counter = 0;`

然后在每个活动中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    FirstActivity.counter++;
}

@Override
protected void onDestroy() {
    super.onDestroy();

    if (--FirstActivity.counter == 0) {
        stopService(new Intent(this, MyService.class));
    }
} 
```**

# playframework - 如何使用 Play 1.2.4 指定 Ehcache 设置

> ID：10169271
> 
> 赞同：3
> 
> 时间：2012-04-16T05:51:54.197
> 
> 标签：playframework, ehcache, playframework-1.x

是否可以使用 Play 框架从 application.conf 设置 Ehcache 属性？

即在 application.conf 中我可以指定如下内容：

```
timeToLiveSeconds=36000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T11:19:15.567

[https://gist.github.com/oscarrenalias/5063249](https://gist.github.com/oscarrenalias/5063249)的要点建议将 ehcache.xml 放在 conf/ 文件夹中，但我不知道这是否适用于 Play 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:39:33.917

据我所知，这是不支持的。[此处](http://www.playframework.org/documentation/1.2.4/configuration)记录了 Play 1.2.4 支持的配置选项，列表中没有类似的内容。也无法从 Play 的 Cache API 中找到 Ehcache 特定选项，因为它应该为缓存功能提供通用接口，独立于实际实现（Ehcache、Memcached）。

# android - 关于 Android 中 C2DM 服务器中的 Gmail Id 使用情况？

> ID：10169278
> 
> 赞同：1
> 
> 时间：2012-04-16T05:52:29.023
> 
> 标签：android, android-c2dm

在我的应用程序中，我使用推送通知，为此我打算使用 android C2DM。

但是我在谷歌上搜索了几次，在为此设置 gmail 帐户时更加困惑。

以下是我遵循的步骤

第 1 步：使用“mynewapp@gmail.com”之类的邮件 ID 注册 Google C2DM 服务器

在此之后，当我尝试在 android 中实现它时，出现了一些混乱，即

```
 Intent rI = new Intent ("com.google.android.c2dm.intent.REGISTER");
 rI.putExtra("app",PendingIntent.getBroadcast(this, 0, new Intent(), 0));
 rI.putExtra("sender", "Gmail Id");
 this.startService(rI); 
```

在这个

```
 rI.putExtra("sender", "Gmail Id"); 
```

实际上我必须使用哪个 gmail id？是我在 C2DM 服务器中注册的还是用户 gmail id（使用设备中的帐户）。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:56:58.260

不是用户ID，是您注册C2DM服务器时使用的G邮件ID

表示它是发件人的 G 邮件 ID

# c++ - 使用 NULL 初始化 std::queue

> ID：10169283
> 
> 赞同：2
> 
> 时间：2012-04-16T05:53:20.660
> 
> 标签：c++, initialization, queue

是否可以使用像其他变量一样`std::queue`的值来初始化 C++ ？`NULL`

像这样：

```
HANDLE variable = NULL; 

class Test
{
} 
```

IE

```
std::queue<Test*> testQueue = NULL; 
```

或者

```
testQueue.empty(); 
```

或类似的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T05:55:49.367

如果你这样写：

```
std::queue<Test*> testQueue; //it is default initialized 
```

那么这就足够了；无需将其设为指针并使用 NULL 对其进行初始化。

此外，您可以这样做：

```
if ( testQueue.empty()) 
{
    //testQueue is empty
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T05:56:23.367

如果您使用指向队列的指针，您当然可以将其初始化为空指针（但如果可能，您可能希望避免这种情况）。

如果您只是定义一个队列，您可以测试它是否为空（正如您所建议的，使用`.empty()`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T06:18:50.123

要直接回答您的问题，请不要使用空指针对其进行初始化。默认情况下，队列是空的，这就是您测试的内容（正如其他答案所建议的那样）。但是，我认为这里有一个比这更深的潜在问题，那就是在指针方面考虑太多了。

由于您使用的是容器，因此我建议您不要使用`std::queue<Object *>`. 相反，我建议尽可能使用`std::queue<Object>`（存储对象，而不是指针）。与其使用任何类型的空值来指示对象不处于有效状态，不如在构造函数中初始化值（因此所有对象都处于有效状态），然后您的所有对象`std::queue`都是有效的。在 C++ 中，这应该是您对如何使用对象的偏好：

1.  如果需要处理对象的集合，直接在堆栈上创建对象或存储在容器中（最好是 STL 容器）
2.  引用（例如，如果您将对象传递给函数并希望避免复制，但这里引用指的是通过创建的对象`1`）
3.  智能指针（这应该是代码中唯一`new`出现的时间）。这些应该谨慎使用，并且只有在您确定通过创建对象`1`不起作用时才使用。
4.  一个普通的指针。这几乎不应该被使用。在我的大多数项目中，我不使用任何原始指针。在其余部分，我只将它们用作一种缓存机制，其中长时间计算确定我正在操作的对象，而空指针表示我尚未确定它。但是，我仍然没有使用“主”句柄作为指针来创建对象；指针指向我通过创建的对象`1`。

When determining what to store in your containers, you should also follow the above (prefer collections of objects first, then references, then smart pointers, then finally raw pointers).

Pointers may be common in Java, where most variables are created on the heap (or in C++ parlance, from the free store), and they may be somewhat common in C, where the STL, references, and smart pointers don't exist, but they do not have very much place in modern C++.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T05:59:46.637

队列是具有构造函数的 C++ 对象。您不需要将其初始化为默认值。它总是从一个空队列开始。`.empty()`只是检查它是否为空。`.clear()`如果需要，会删除其内容，但在新建的内容中，这是没有必要的。

# android - 在Android系统中，hasNextLine()读取第一行后返回false

> ID：10169288
> 
> 赞同：0
> 
> 时间：2012-04-16T05:54:39.257
> 
> 标签：android, java.util.scanner

在Android系统中，我想读取文件“/proc/net/xt_qtaguid/stats”。但是，如果未能阅读第二行。读取第一行就成功了。但是，hasNextLine() 返回 false，这使得无法读取下一行。

代码如下：

```
 File statsFile = new File("/proc/net/xt_qtaguid/stats");
    Scanner scanner = null;
    try {
        scanner = new Scanner(statsFile);
        while (scanner.hasNextLine()) {
            String line = scanner.nextLine();
            Log.d(TAG, "hasNextLine(): " + scanner.hasNextLine()); 
```

这是我试图阅读的统计文件。该文件在这篇文章中看起来像一行。但是，每行以“0x0A”结尾，并显示为 3 行。

idx iface acct_tag_hex uid_tag_int cnt_set rx_bytes rx_packets tx_bytes tx_packets rx_tcp_bytes rx_tcp_packets rx_udp_bytes rx_udp_packets rx_other_bytes rx_other_packets tx_tcp_bytes tx_tcp_packets tx_udp_bytes tx_udp_packets tx_other_bytes tx_other_packets 2 wlan0 0x0 0 0 1129 10 2066 32 80 2 1049 8 0 0 0 0 530 8 1536 24 3 wlan0 0x0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:02:27.923

尝试使用良好的旧阅读器类：

```
try {
    File statsFile = new File("/proc/net/xt_qtaguid/stats");
    BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(statsFile)));

    String line;
    while((line = br.readLine()) != null){
        Log.d(TAG, "readline(): " + line);
    }

    br.close();
} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# python - 如何让 buildbot GitPoller 更改源监视所有分支？

> ID：10169290
> 
> 赞同：6
> 
> 时间：2012-04-16T05:55:09.693
> 
> 标签：python, git, continuous-integration, buildbot

我正在寻找一种方法让 GitPoller`changesource`监视所有分支，而不仅仅是一个。

现在，要么我`branch='some branch'`在 GitPoller 构造函数中指定，要么默认为`master`.

更好的是能够指定一些`ref`要观察的模式。

有人已经这样做了吗？还是需要编写另一种 GitPoller ？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-08T16:44:03.177

这终于实现了：[https](https://github.com/buildbot/buildbot/pull/1010) ://github.com/buildbot/buildbot/pull/1010 。

应该是即将发布的 buildbot 0.8.9 的一部分。

那你就可以用`branches=True`了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T13:02:13.660

目前`GitPoller`一次只能观看一个分支。但是，您可以拥有任意数量的`GitPoller`s。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:49:16.967

这似乎已在最新版本的 buildbot 8.8.8 中得到修复

[https://github.com/buildbot/buildbot/blob/master/master/buildbot/changes/gitpoller.py](https://github.com/buildbot/buildbot/blob/master/master/buildbot/changes/gitpoller.py)

编辑：

您可以使用`branches=[ 'development', 'other' ]`代替`branch='development'`

# bash - ZSH 在 linux bash 中的“compadd”等价物是什么？

> ID：10169296
> 
> 赞同：0
> 
> 时间：2012-04-16T05:55:41.223
> 
> 标签：bash, ubuntu, zsh

ZSH 在 linux bash 中的“compadd”等效项是什么？我应该改用什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:49:30.440

我猜不，没有直接的等价物。与 Bash 相比，ZSH 更具可扩展性，并且更注重搜索和补全。

`compadd`是一个 zsh `completion builtin`，记录在`man zshcompwid`. 据我所知，bash 没有与完成小部件等效的功能，尽管您也许可以自己扩展 bash 的功能。

`compadd`文档链接在[这里](http://linux.die.net/man/1/zshcompwid)。

快速搜索后，我可以看到描述 bash 完成内置函数的[这个页面](http://www.gnu.org/software/bash/manual/html_node/Programmable-Completion-Builtins.html)，它们似乎都没有与`compadd`. 如果您有兴趣了解 bash 如何使用补全，那么[此页面](http://www.gnu.org/software/bash/manual/html_node/Programmable-Completion.html#Programmable-Completion)可能值得一读。

不过，我个人的建议是，如果您对自定义 shell 完全感兴趣，可以通过 Bash 转向 ZSH。如果您不自定义，则几乎没有区别，但如果您这样做，ZSH 有更多的旋钮和转盘供您调音，默认情况下还有一些我在 Bash 中非常想念的漂亮功能（会话之间共享的历史来自心，例如）。

一句警告：为复杂性做好准备。[ZSH 手册](http://zsh.sourceforge.net/Doc/zsh_a4.pdf)也很好读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:14:19.863

做什么`compadd`？我只能从谷歌搜索中猜测，但它似乎与完成有关。所以谷歌搜索`bash completion`。

# c# - 有没有办法用 resourceID 初始化 Document 对象

> ID：10169297
> 
> 赞同：1
> 
> 时间：2012-04-16T05:55:47.540
> 
> 标签：c#, .net, google-docs, google-docs-api

我想知道是否有任何方法可以使用资源 ID 初始化文档对象，以便我可以在我为操作文档所做的各种函数中传递该文档对象。现在我必须在函数中传递文档的 eTag 和 resourceId。我正在使用 C#.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:36:35.320

当您通过 API 或 Google Docs 用户界面创建新文档时，Google Docs 会生成资源 ID。您不能设置自己的 ID。

# svn - 如何修复 SVN 提交“文件丢失”错误？

> ID：10169298
> 
> 赞同：3
> 
> 时间：2012-04-16T05:55:47.617
> 
> 标签：svn, svncommit

我有一个名为“Experiments”的工作副本，我必须添加一个名为“Blue Print”的项目。

我已经完成了`svn add *`，后来我出于某种原因删除了“Blue Print”项目文件夹。然后我添加了另一个名为“MyProj”的项目并使用了`svn add`.

现在，当我尝试提交时，我收到“Blue Print”丢失的错误。

我已经尝试过`svn revert "Blue Print"`，`svn delete "Blue Print"`但无法解决问题。我可以做些什么来修复我的工作副本和/或回购？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:16:29.287

尝试清洁 SVN，然后更新 SVN。Blue Print 文件夹应该通过 SVN 更新放回到您的工作副本中（这就是您想要的） - 这将是 SVN 存储库中内容的精确副本。然后，并且只有在那时，您的工作副本中的 Blue Print 文件夹与 SVN 存储库中的完全一样，从您的工作副本中删除 Blue Print 文件夹，然后将删除提交到 SVN 存储库。

# java - Hibernate session.load() 不能与 Java 反射 getDeclaredFields 一起使用？

> ID：10169301
> 
> 赞同：0
> 
> 时间：2012-04-16T05:56:06.497
> 
> 标签：java, hibernate, reflection

我正在运行一个函数，它遍历声明的字段，找到一个对象的 2 个实例之间的差异并将其输出（用于审计跟踪）。但是，如果我使用从休眠会话加载的对象，IE：

```
HazardSubmission hs = (HazardSubmission)s.load(HazardSubmission.class, id); 
```

该对象的声明字段出现在：default_interceptor,handler,_filter,methods 如果我在不使用 session.load 的情况下加载相同类型的对象，它会发现 ACTUAL 声明的字段很好。如果我在这个 hs 对象上运行 getClass().toString()，它会返回：

```
class nz.co.g.hs.stripes.model.HazardSubmission_$$_javassist_1 
```

据我所知，javaasssist_1 是问题所在，由于某种原因，它没有找到实际的类。

知道我能做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:35:12.780

`session.load(HazardSubmission.class, 1)``HazardSubmission.class`将首先检查当前会话中是否可以找到 ID 为 1的类型的实例。如果是，则返回该实例。否则，将返回一个代理。

代理是通过子类化动态创建的`HazardSubmission.class`。它们不是`HazardSubmission.class`，这就是为什么`getDeclaredFields()`返回的实例不是实际`Field`的`HazardSubmission.class`

要从生成的代理实例中获取实际`Class`值，可以使用[Hibernate.getClass()](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Hibernate.html#getClass%28java.lang.Object%29)

```
HazardSubmission hs = (HazardSubmission)s.load(HazardSubmission.class, id);

System.out.println(Hibernate.getClass(hs).toString());
for (Field field : Hibernate.getClass(hs).getDeclaredFields()) {
    System.out.println(field .toString());
} 
```

# bash - 使用shell脚本计算进程数

> ID：10169304
> 
> 赞同：0
> 
> 时间：2012-04-16T05:56:30.300
> 
> 标签：bash, shell

我正在尝试编写一个 shell 脚本来查看特定程序是否正在运行，如果没有，它会重新启动服务。它还检查接口是否处于混杂模式。如果不是，则将其置于该模式。

要检查 prog`xyz`是否正在运行，我可以在命令行上执行以下操作

```
ps -ef | grep -v grep | grep xyz | wc -l 
```

如果它返回 0，则程序没有运行，否则它正在运行

类似地检查接口是否处于混杂模式，我可以在命令行上执行以下操作

```
ip link show eth0 | grep -i promisc | wc -l 
```

同样，如果返回为 1，则接口处于混杂模式。

当我尝试将它全部捆绑在一个 shell 脚本中时，问题就来了。

```
#!/bin/bash
SERVICE="daemonlogger"
x=$(ps -ef|grep -v grep|grep $SERVICE|wc -l)
if [ "$x" -eq 1 ]; then
 run=0
 else
 run=1
fi
IF_NAME="eth0"
y=$(ip link show $IF_NAME|grep -i promisc|wc -l)
if [ "$y" -eq 1 ]; then
 :
 else
 ifconfig $IF_NAME promisc up
fi
if [ "$run" -eq 1 ]; then
 service $SERVICE restart > /dev/NULL 2>&1
fi
echo $run 
```

如果从命令行运行，命令的输出是

```
[root@dheerajpc Desktop]# ps -ef | grep -v grep | grep daemonlogger | wc -l
0
[root@dheerajpc Desktop]# ip link show eth0 | grep -i promisc | wc -l
0 
```

这是在调试模式下运行它的输出

```
[root@dheerajpc Desktop]# bash -x check_daemonlogger 
+ SERVICE=daemonlogger
++ ps -ef
++ wc -l
++ grep daemonlogger
++ grep -v grep
+ x=2
+ '[' 2 -eq 1 ']'
+ run=1
+ IF_NAME=eth0
++ grep -i promisc
++ ip link show eth0
++ wc -l
+ y=0
+ '[' 0 -eq 1 ']'
+ ifconfig eth0 promisc up
+ '[' 1 -eq 1 ']'
+ service daemonlogger restart
+ echo 1
1 
```

可以看出，第一个命令的输出不是预期的，而第二个命令的输出是正确的。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:00:57.887

提示：你的脚本叫什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:02:18.913

不完全是答案，而是一堆评论。

1.  您应该考虑使用 a`pidfile`而不是依赖 ps、grep、wc 等来跟踪进程。将 pid 写入文件并使用它来检查进程是否正在运行。您已经使用当前方法遇到了错误。

2.  为什么要检查接口的状态？你不能把它切换到混杂模式吗？我没有玩过这个，但这是我想到的第一件事。

# sql - 在 PostgreSQL 查询中获取大对象的大小？

> ID：10169309
> 
> 赞同：19
> 
> 时间：2012-04-16T05:57:24.833
> 
> 标签：sql, postgresql, blob

我想获得一个 blob 的字节大小。

我正在使用 Postgresql，并希望使用 SQL 查询来获取大小。像这样的东西：

```
SELECT sizeof(field) FROM table; 
```

这在 Postgresql 中可能吗？

更新：我已阅读 postgresql 手册，找不到合适的函数来计算文件大小。此外，blob 存储为一个大对象。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-16T09:04:17.170

并不是说我使用过大型对象，而是查看文档：[http ://www.postgresql.org/docs/current/interactive/lo-interfaces.html#LO-TELL](http://www.postgresql.org/docs/current/interactive/lo-interfaces.html#LO-TELL)

我认为您必须使用与某些文件系统 API 所需的技术相同的技术：寻找到最后，然后告诉位置。PostgreSQL 具有似乎包装内部 C 函数的 SQL 函数。我找不到太多文档，但这有效：

```
CREATE OR REPLACE FUNCTION get_lo_size(oid) RETURNS bigint
VOLATILE STRICT
LANGUAGE 'plpgsql'
AS $$
DECLARE
    fd integer;
    sz bigint;
BEGIN
    -- Open the LO; N.B. it needs to be in a transaction otherwise it will close immediately.
    -- Luckily a function invocation makes its own transaction if necessary.
    -- The mode x'40000'::int corresponds to the PostgreSQL LO mode INV_READ = 0x40000.
    fd := lo_open($1, x'40000'::int);
    -- Seek to the end.  2 = SEEK_END.
    PERFORM lo_lseek(fd, 0, 2);
    -- Fetch the current file position; since we're at the end, this is the size.
    sz := lo_tell(fd);
    -- Remember to close it, since the function may be called as part of a larger transaction.
    PERFORM lo_close(fd);
    -- Return the size.
    RETURN sz;
END;
$$; 
```

测试它：

```
-- Make a new LO, returns an OID e.g. 1234567
SELECT lo_create(0);

-- Populate it with data somehow
...

-- Get the length.
SELECT get_lo_size(1234567); 
```

看起来 LO 功能被设计为主要通过客户端或通过低级服务器编程使用，但至少他们为它提供了一些 SQL 可见函数，这使得上述成为可能。我做了一个查询`SELECT relname FROM pg_proc where relname LIKE 'lo%'`让自己开始。剩下的需要对C 编程的模糊记忆以及对模式`x'40000'::int`和值的一些研究！`SEEK_END = 2`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-24T19:12:36.410

创建大对象时，您可以更改应用程序以存储大小。否则，您可以使用以下查询：

```
select sum(length(lo.data)) from pg_largeobject lo
where lo.loid=XXXXXX 
```

您也可以使用大对象 API 函数，如前一篇文章中所建议的那样，它们工作正常，但比上面建议的 select 方法慢一个数量级。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-05T10:41:40.843

```
select pg_column_size(lo_get(lo_oid)) from table; 
```

为您提供以字节为单位的大小。

如果你想要漂亮的打印：

```
select pg_size_pretty(pg_column_size(lo_get(lo_oid))::numeric) from table; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-16T06:06:17.867

尝试`length()`或`octet_length()`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-31T16:05:24.357

这是我的解决方案：

```
select
lo.loid,
pg_size_pretty(sum(octet_length(lo.data)))
from pg_largeobject lo
where lo.loid in (select pg_largeobject.loid from pg_largeobject)
group by lo.loid; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-23T17:57:50.323

如果 blob 列的类型是`oid`

```
SELECT length(lo_get(blob_column)) FROM table; 
```

> lo_get ( loid oid [, offset bigint, length integer ] ) → bytea
> 
> 提取大对象的内容或其子字符串。
> 
> – [https://www.postgresql.org/docs/current/lo-funcs.html](https://www.postgresql.org/docs/current/lo-funcs.html)

> 长度 ( bytea ) → 整数
> 
> 返回二进制字符串中的字节数。
> 
> – [https://www.postgresql.org/docs/current/functions-binarystring.html](https://www.postgresql.org/docs/current/functions-binarystring.html)

# php - 我想在 PHP 中使用不同的页面类型生成 PDF

> ID：10169311
> 
> 赞同：0
> 
> 时间：2012-04-16T05:57:51.323
> 
> 标签：php, pdf-generation

我正在使用 dompdf 生成 PDF 文件（数据来自数据库）。

```
 $dompdf = new DOMPDF();
    $dompdf->load_html($strHtml); // here $strHtml is the containt which I want to write in pdf
    $dompdf->set_paper( array(0,0, 12 * 108, 12 * 72), "portrait" ); // 12" x 12"

    $dompdf->render();

    // The next call will store the entire PDF as a string in $pdf

    $pdf = $dompdf->output();

    // You can now write $pdf to disk, store it in a database or stream it
    // to the client.

    $pdfname = 'PDFNAME'
    file_put_contents('pdf/'.$pdfname.'.pdf', $pdf); 
```

现在在 $strHtml 变量中有许多 PDF 页面，并且所有页面都以页面类型 portait 生成。

现在我想创建所有不同类型的页面，例如第 1 页为纵向，第 2 页为横向，第 3 页为横向等。

我怎么解决这个问题？

# doctrine - 在 symfony1.4 和学说中检查 NULL 值的多个 where 条件

> ID：10169315
> 
> 赞同：0
> 
> 时间：2012-04-16T05:58:29.927
> 
> 标签：doctrine, symfony-1.4, dql

我正在使用 symfony1.4 和学说。我需要检查值为 的条件`NULL`。我需要写一个查询 where `status = 1`and `start=NULL`and `end= NULL`and `estimated_time != NULL`。我已经尝试过了，但我无法得到结果。

```
 $tickets = Doctrine_Core::getTable('table')
              ->createQuery('a')
              ->where('status=?','1')
              ->andWhere('start=?', '')
                              ->andWhere('end=?', '')
              ->andWhere('estimated_time!=?','')
              ->orderBy('id DESC'); 
```

任何帮助将不胜感激。谢谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:01:57.913

尝试使用`IS NOT NULL`：

```
$tickets = Doctrine_Core::getTable('table')
    ->createQuery('a')
    ->where('status=?','1')
    ->andWhere('start IS NOT NULL')
    ->andWhere('end IS NOT NULL')
    ->andWhere('estimated_time IS NOT NULL')
    ->orderBy('id DESC'); 
```

# mysql - Mysql查询每日点击量

> ID：10169316
> 
> 赞同：1
> 
> 时间：2012-04-16T05:58:42.570
> 
> 标签：mysql, timestamp

我正在监视带有时间戳的网站上的点击量。如何在 MySQL 中获得一整天的点击量？结果应如下所示：今天 => 10 次点击。命中存储如下：

```
id|created
3|2012-04-14 23:23:19
4|2012-04-14 23:04:31
5|2012-04-14 23:19:21 
```

对于 2012 年 4 月 14 日，这将构成三个命中。在此先感谢，所以！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:02:26.920

以下查询将按单个日期分组并给出日期计数：

```
SELECT count(id), DATE(created) FROM a_table GROUP BY DATE(a_table.created); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:01:46.430

```
SELECT  String
FROM    TableName
WHERE   CURTIME() BETWEEN lowerlimit AND upperlimit
        OR CURTIME() BETWEEN SUBTIME(upperlimit, '24:00:00') AND lowerlimit
        OR SUBTIME(CURTIME(), '24:00:00') BETWEEN SUBTIME(upperlimit, '24:00:00') AND lowerlimit 
```

见[S/O](https://stackoverflow.com/questions/4758095/mysql-select-where-time-now-between-tablevalue-and-tablevalue)

# javascript - 如何获取 Backbone.Collection.remove 以从服务器中删除实例？

> ID：10169318
> 
> 赞同：2
> 
> 时间：2012-04-16T05:59:03.093
> 
> 标签：javascript, backbone.js

Backbone.Collection.remove 从前端的集合中删除模型。有没有办法让更改持续到后端？IE。我想对集合的 URL 执行 DELETE 请求并传入模型。我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T06:06:06.163

`model.destroy();`将从集合中删除模型`DELETE`并向服务器发出请求。

[http://backbonejs.org/#Model-destroy](http://backbonejs.org/#Model-destroy)

# mysql - 如何修改此 SQL 查询

> ID：10169319
> 
> 赞同：0
> 
> 时间：2012-04-16T05:59:03.343
> 
> 标签：mysql, sql

我有一个不完整的查询，需要一些帮助。它目前使用效率低下的子选择运行，我很确定使用连接会使其稍后更快。此外，查询中有一个元素需要添加，我不太确定该怎么做。细节：

我有 3 张桌子

```
- album
 * albumId
 * albumName

- objectTag
 * objectTagObjectId (FK reference to albumId)
 * objectTabTagId (FK reference to tagId)

- tag
 * tagId
 * tagName 
```

我要做的是根据链接到传递给查询的另一个专辑的标签生成一个随机专辑列表（比如说 50 个）。

例如，我有一张名为“Britney Spears Greatest Hits”的专辑，该专辑带有“pop”和“cheese”的标签。然后，我将查询传递给该 Britney 专辑的 id，并希望查询生成一个包含 50 个随机其他专辑的列表，这些专辑标记为“pop”和“cheese”。

如果只有 20 个带有这些标签的专辑，则查询应使用任何随机专辑填充其他 30 条记录，而不管标签如何。

到目前为止，我可以根据标签获取随机专辑：

```
SELECT albumId, albumName, objectTagTagId
FROM album
LEFT JOIN objectTag
  ON objectTagObjectId = albumId
WHERE objectTagTagId IN
(
  SELECT objectTagTagId
  FROM album
  LEFT JOIN objectTag
    ON objectTagObjectId = albumId
  WHERE albumId = 2471
)
ORDER BY RAND()
LIMIT 0,50 
```

然而，如前所述，这是低效且不完整的：

a）如何使用连接而不是子选择来提高效率？那可能吗？

b）如何修改此查询，以便如果只有 x 条记录与标签匹配（比如说 20 条），则其余部分填充随机记录而与标签无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:29:51.267

我不能保证效率，但这是一个想法......

```
SELECT * FROM (
  SELECT albumId, albumName, objectTagTagId FROM (
    (
    SELECT count(*) AS cnt, Out.albumId, Out.albumName, objectTagTagId
    FROM album Src
    JOIN objectTag sT
      ON (Src.ablumId = sT.objectTagObjectId)
    JOIN objectTag oT
      USING (objectTabTagId)
    JOIN album Out
    ON (Out.albumId = oT.objectTagObjectId)
    WHERE Src.albumId = 2471
        AND Out.albumId != 2471
    GROUP BY albumId, albumName, objectTagTagId
    )
    UNION     
    (
    SELECT 0 AS cnt, albumId, albumName, null AS objectTagTagId
    FROM album
    ORDER BY RAND()
    LIMIT 50
    )

  ) foo ORDER BY cnt DESC LIMIT 50
) goo ORDER BY RAND() 
```

count(*) / group by 将计算专辑与 src 专辑共有的标签数量。

工会将给我们 50 张填充专辑，cnt 为零，按 ORDER BY 和 LIMIT 排序到 foo 的底部。

goo 上的 ORDER BY RAND() 将使订单随机化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:28:53.690

您无法在没有嵌套且仅通过简单连接的情况下编写预期查询，因为您需要专辑 2471 的所有标签都存在于您想要返回的专辑中。当然，您可以将 IN-nesting 替换为 EXISTS-nesting 等。

# sockets - UDP套接字编程中不同语言的客户端和服务器

> ID：10169322
> 
> 赞同：2
> 
> 时间：2012-04-16T05:59:24.390
> 
> 标签：sockets, udp, client-server

在 UDP 套接字编程中，发送方程序是用 C 编写的，而接收方程序是用 Python 编写的，这有关系吗？我的意思是问发送者或接收者程序是否用相同或不同的语言编写有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:03:03.637

UDP 只是一种协议，就像 HTTP 一样，只要您的应用程序符合该协议，它们就没有理由不能以这种方式进行通信。

当然，如果消息的内容需要解释特定的库/方法，那就是另一个问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:02:56.070

不，应该没关系。有一些更高级别的协议依赖于 UDP，并且使用这些协议可能依赖于库（仅作为示例）。但 UDP 本身与您使用的语言无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:30:35.857

不，这应该不是问题。我自己测试了它以确保那件事。我用 C 写了一个服务器，用 Java 做了一个客户端。有效。

此外，我制作了一个在生产服务器上运行的服务器程序，它与基于 Symbian、Java 和 Objective-C 的客户端交互。所以，真的没关系。

同样，参考协议层次结构，您可以认为当网络层和传输层信息与数据断开时，它确实是原始数据。并且客户端具有处理此类原始数据的机制。如果程序写得好，就不会有这样的问题。

# c# - 远程服务器返回错误：227进入被动模式（）

> ID：10169325
> 
> 赞同：0
> 
> 时间：2012-04-16T06:00:08.180
> 
> 标签：c#, asp.net

我正在做将文件从一台服务器上传到另一台服务器的代码，以下是我的代码：

```
 string CompleteDPath = "ftp://ExampleURL/photos/";
        string UName = "USerName";
        string PWD = "Password";
        WebRequest reqObj = WebRequest.Create(CompleteDPath + fileName);
        reqObj.Method = WebRequestMethods.Ftp.UploadFile;
        reqObj.Credentials = new NetworkCredential(UName, PWD);
        FileStream streamObj = System.IO.File.OpenRead(Server.MapPath(path));
        byte[] buffer = new byte[streamObj.Length + 1];
        streamObj.Read(buffer, 0, buffer.Length);
        streamObj.Close();
        streamObj = null;
        reqObj.GetRequestStream().Write(buffer, 0, buffer.Length);
        reqObj = null; 
```

但第一次它工作正常，但下一次它抛出错误如下：远程服务器返回错误：227进入被动模式（）

你能告诉我这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:28:56.577

利用

reqObj.UsePassive = false;

# c# - 通过 monotouch 播放 .m3u8 音频流文件

> ID：10169326
> 
> 赞同：0
> 
> 时间：2012-04-16T06:00:30.570
> 
> 标签：c#, iphone, ios, xamarin.ios, audio-streaming

我目前正在开发一个流式传输音频的 iPhone 应用程序。我希望流式传输的 URL 是以下链接中的 m3u8 文件：

[http://216.246.37.52:1935/highveld/highveld.stream/playlist.m3u8](http://216.246.37.52:1935/highveld/highveld.stream/playlist.m3u8)

我可以在将打开流的 web 视图上加载 NSRequest，但这会将我的应用程序推到后台，当它打开流时，返回应用程序的唯一方法是关闭流。

我希望我的视图上有一个播放按钮，当它被点击时它将开始播放流，并且用户应该能够在应用程序中切换选项卡而不停止流。

本质上，流应该继续播放，直到用户故意停止它。如果有人能给我任何关于如何在 MonoTouch 和 C# 中为 iPhone 应用程序执行此操作的任何想法，或者向我指出一个教程，那就太好了。我已经搜索了谷歌，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:51:11.310

@约阿希姆。我还构建了一个流解决方案，并以不同的方式完成了这一点。经过一番探索，我在[http://216.246.37.52:8028/](http://216.246.37.52:8028/)找到了实际的 Shoutcast 流。不确定这是否会对您的情况有所帮助。也许您可以生成自己的播放列表。祝你好运！。瑞安

# java - 查找当前用户的路径

> ID：10169327
> 
> 赞同：0
> 
> 时间：2012-04-16T06:00:35.823
> 
> 标签：java, ubuntu

我正在尝试使用 FileInputStream 从 Ubuntu 中的 Java 打开一个文件。现在我的问题是，我怎样才能找到当前用户的路径`/home/"currentuser"/myfile.xxx`？通常我使用路径作为字符串，因为我知道当前用户。问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T06:05:09.853

可以通过以下方式检索用户的主目录

```
String userHomeDir = System.getProperty("user.home"); 
```

请参阅[系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

# git - git - 您的分支领先于 'origin/master' 1 次提交

> ID：10169328
> 
> 赞同：136
> 
> 时间：2012-04-16T06:00:39.050
> 
> 标签：git, push, commit

我是 git 的新手，我正在研究 git。

我在 git 中添加了一些文件：

```
git add <file1>
git add <file2> 
```

然后我想推它进行审查，但我错误地做了

```
git commit 
```

所以我改变的文件不去审查。
现在，如果我输入命令：

```
git status 
```

它说

```
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
nothing to commit (working directory clean) 
```

我想恢复该提交，并且我想推送这些文件以供审查而不是提交。谁能让我知道我该怎么做？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-04-16T06:06:24.647

您无法推送尚未提交的任何内容。操作顺序为：

1.  做出改变。
2.  `git add`- 这会分阶段提交您的更改
3.  `git commit`- 这会在本地提交您的分阶段更改
4.  `git push`- 这会将您提交的更改推送到远程

如果您不提交就推送，则不会推送任何内容。如果您不添加就提交，则不会提交任何内容。如果你在没有提交的情况下添加，什么都不会发生，git 只会记住你添加的更改应该被考虑用于下一次提交。

您看到的消息（您的分支领先 1 个提交）意味着您的本地存储库有一个尚未推送的提交。

换句话说：`add`和`commit`是本地操作，`push`和`pull`是`fetch`与远程交互的操作。

由于您工作的地方似乎有一个官方的源代码控制工作流程，您应该在内部询问应该如何处理它。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-04-16T06:06:44.657

`git reset HEAD^ --soft`（保存您的更改，回到上次提交）

`git reset HEAD^ --hard`（放弃更改，返回上一次提交）

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-04-16T06:04:23.433

如果您只是想丢弃更改并恢复到最后一次提交（您想分享的那个）：

```
git reset --hard HEAD~ 
```

您可能需要检查以确保您需要此 ( `git log`)，因为您将丢失所有更改。

一个更安全的选择是运行

```
git reset --soft HEAD~ # reset to the last commit
git stash              # stash all the changes in the working tree 
git push               # push changes 
git stash pop          # get your changes back 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2013-07-31T21:44:35.080

我通过运行一个简单的方法解决了这个问题：

```
git pull 
```

而已。现在它显示：

```
# On branch master
nothing to commit, working directory clean 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-01-19T09:28:32.563

git重置头^

然后应该显示修改后的文件。

您可以将修改后的文件移动到新分支中

利用，

`git checkout -b newbranch`

`git checkout commit -m "files modified"`

`git push origin newbranch`

`git checkout master`

那么你应该在一个干净的分支上，你的更改应该存储在 newbranch 中。您可以稍后将此更改合并到主分支

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-16T06:03:57.067

```
git reset HEAD <file1> <file2> ... 
```

从下一次提交中删除指定的文件

# javascript - 如何在js中将字符串日期转换为GMT日期，

> ID：10169331
> 
> 赞同：-1
> 
> 时间：2012-04-16T06:01:00.663
> 
> 标签：javascript

考虑我有字符串日期和时间。说

```
var selfwDepDate    = document.forms[0].fwDepartureDate.value;
var selfwDepTime    = document.forms[0].fwDepartureTime.value; 
```

并且时区为

```
var orgTimeZone = document.getElementById('orginTimeZone').value;
var descTimeZone = document.getElementById('descTimeZone').value; 
```

任何人都可以如何将字符串日期转换为 GMT 日期.. orgTimeZone 的值 = 亚洲/迪拜 descTimeZone 的值 = America/New_York

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:09:00.463

我认为您可以使用[timezone-js](https://github.com/mde/timezone-js)。

创建 timezoneJS.Date 的方式与普通 JavaScript Date 相同，但在末尾附加一个 timezone 参数：

```
var dt = new timezoneJS.Date('10/31/2008',
  'America/New_York');
var dt = new timezoneJS.Date(2008, 9, 31, 11, 45,
  'America/Los_Angeles'); 
```

或者

你可以这样接近： -

```
var now = new Date();

var utc = new Date(Date.UTC(
    now.getFullYear(),
    now.getMonth(),
    now.getDate(),
    now.getHours(),
    now.getMinutes()
)); 
```

现在对于不同的时区，您需要添加或减去它们与 GMT 不同的时间。
**注意**：-Date.UTC() 返回自纪元 UTC 以来的毫秒数。

# java - 安卓 TCP 客户端。服务器只在进程停止后接收消息

> ID：10169333
> 
> 赞同：2
> 
> 时间：2012-04-16T06:01:08.567
> 
> 标签：java, android, tcp, android-asynctask

我有一个用 Java 编写的简单 TCP 服务器，我正在尝试为 Android 编写一个简单的 TCP 客户端，它将与本地计算机上运行的 TCP 服务器通信。

我可以让服务器接收消息，但奇怪的是它只是在我通过 Eclipse 中的“设备”窗口停止应用程序进程之后才接收消息。

在 Android 客户端上，我有一个主 UI 线程，其中包含输入 IP 地址和端口号的字段（这一切都很好，所以我不包括它的代码）。单击连接按钮时，它会启动一个新的 ASyncTask 来执行 TCP 套接字工作。

下面是 ConnectionTask 类的 doInBackground 方法的代码：

```
 protected Void doInBackground(Void... params) 
    {   
    String authMessage = "Authorize";
    boolean connected=false;
    try 
    {           
        Socket clientSocket = new Socket();
        SocketAddress serverAddress = new InetSocketAddress(address,port);
        Log.v("Connection Thread", serverAddress.toString());
        clientSocket.connect(serverAddress, 15);
        if(clientSocket.isConnected())
        {
            connected = true;
            Log.v("Connection Thread", "Connection Successful");
            DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
            BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            outToServer.writeBytes(authMessage);
            Log.v("Connection Thread", "Sent Auth Message");
            String response = inFromServer.readLine();

            Log.v("TCP Client", "Response: " + response);
            hash = computeHash(response.getBytes());
            //send the computed hash to the server
            outToServer.writeBytes(hash);
            outToServer.close();
            inFromServer.close();
            clientSocket.close();
        }
        else
        {
            Log.v("Connection Thread", "Not Connected yet...");
        }
    } 
    catch (Exception e) 
    {
        Log.v("Connection Thread", e.getMessage());
    }   
    return null;
} 
```

当我按下连接按钮时，在模拟器中我看到“发送身份验证消息”的日志，但我的服务器没有收到“授权”消息，直到我通过 DDMS 终止进程。

这是服务器代码：

```
 public class Server
{
       private static SecureRandom random = new SecureRandom();
       public static void main(String argv[]) throws Exception
       {
             String rawClientMessage,lcClientMessage;
             ServerSocket welcomeSocket = new ServerSocket(5000);
             System.out.println("Starting Server...");
             while(true)
             {
                Socket connectionSocket = welcomeSocket.accept();
                BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
                DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
                rawClientMessage = inFromClient.readLine();
                if(rawClientMessage!=null)
                {
                    lcClientMessage = rawClientMessage.toLowerCase() + '\n';
                    System.out.println("Received Message! Contents: " + rawClientMessage);
                    if(lcClientMessage=="authorize")
                    {
                        System.out.println("Received auth request message, generating key...");
                        String key = generateKey();
                        //send key back
                        outToClient.writeBytes(key);
                        System.out.println("Key sent!");
                    }
                }
                try
                {
                    inFromClient.close();
                    outToClient.close();
                    connectionSocket.close();
                }
                catch(Exception e)
                {
                    System.out.println(e.getMessage());
                }
             }
       }

       private static String generateKey()
       {
             return new BigInteger(130, random).toString(32);
       }
} 
```

编辑：

以下是所发生情况的逐步摘要：

1.  我启动服务器（它阻止等待连接并读取“服务器启动...”）
2.  我在 android 客户端中输入 192.168.0.100 端口 5000 并点击“连接”按钮
3.  ASyncTask 是在单击时创建的，上面列出了我的套接字代码
4.  服务器控制台上还没有收到任何东西......
5.  （我可以再次按下连接，什么都不会发生）（LogCat 还读取“发送验证消息”日志）
6.  我通过 Eclipse 设备窗口杀死模拟器上的进程
7.  服务器控制台打印：收到消息！内容：授权（如果我单击连接两次，则消息显示两次）

基本上，它似乎正在存储消息，并在程序关闭后将它们全部发送到线路上。

任何帮助表示赞赏，谢谢！可以发布更多代码，包括主 UI 线程和扩展 ASyncTask 的 ConnectionTask 类的其余部分（如果需要）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:18:47.083

你在读台词，但你不是在写台词。`readLine()`将阻塞，直到它收到一个行终止符，并且您永远不会发送一个。`readLine()`而且由于您收到的数据是二进制的，因此您无论如何都不应该尝试读取它。重新考虑您的数据流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T06:07:27.263

`writeBytes(message)`将字节写入输出流，但在流被刷新之前它们不会沿管道发送。当您终止应用程序时，流将关闭，并且在流关闭之前它会自行刷新。

我想如果你在你`outToClient.flush()`之后添加`outToClient.writeBytes(authMessage)`你会摇滚的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T06:27:19.490

如果您在模拟器中运行您的应用程序，则必须重定向您的端口。否则你不能与服务器通信客户端。 [看一看](http://www.coderanch.com/t/434412/Android/Mobile/Android-Emulator-as-server-Socket)

# android - 我可以在我的 NDK 应用程序中使用本机库（安装在 android 堆栈中）吗？

> ID：10169336
> 
> 赞同：2
> 
> 时间：2012-04-16T06:01:34.563
> 
> 标签：android, c++, c, android-ndk

从这篇文章

[http://marakana.com/forums/android/examples/49.html](http://marakana.com/forums/android/examples/49.html)

我已经看到在 NDK 的帮助下构建的应用程序做了以下事情

1>它编译所有c代码（在jni文件夹内）并制作留在`libs`文件夹中的库

2> 在 .apk 包内，该库也位于`lib`文件夹内

在java文件中，我可以使用以下代码加载该库

```
 static {
    System.loadLibrary("ndk_demo");
  } 
```

**问题 1：** 那么现在有可能不是将该库作为 .apk 的一部分，我可以将其安装在 android 系统中并从系统加载我的应用程序？

**问题2：** 我可以用同样的方式使用其他已经安装在android中的库`open GL`吗`sqLite`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:01:00.567

这两个问题的答案都是肯定的，你可以。

Q1：如果你想测试它，你可以按照这种方式。

1）使用NDK编译源代码。

2）复制（adb push）你的android设备的/system/lib中的库。运行应用程序。

当您加载库时，它会从 apk 文件的 lib 文件夹或系统的 /system/lib 文件夹中进行检查。但是要复制到 /system/lib，你应该重新挂载文件系统。为此，您必须具有 root 权限。

Q2：

对 Q1 的回答也回答了这个问题。如果库存在于 /system/lib 中，您也可以调用现有库。但是有一个小问题。由于 jni 接口要遵循命名约定，因此您不能直接调用库中的函数。所以最终“**您必须使用现有库创建自己的库**”。

步骤如下：

拉取库（adb pull）

编写将调用现有库的例程的本机代码（例如 OpenGL）

通过将代码与预构建库链接来编译您的代码（请参阅 NDK 文档文件。它非常清楚地写了如何执行此操作。您需要在编译时在 Android.mk 文件中提及它）。

您最终将获得一个内部包含现有库的共享库。

我对现有的库之一 libsqlite 做了同样的事情。如果你被困在某个地方，请告诉我。谢谢

# android - 如何在 Android GL10 中获取 GL_VIEWPORT 尺寸？

> ID：10169337
> 
> 赞同：0
> 
> 时间：2012-04-16T06:01:41.657
> 
> 标签：android, opengl-es

我想在 Android 中使用 API Level 7 完成以下任务：

```
glGet(GL_VIEWPORT, someBuffer) 
```

[OpenGL ES 1.1 的文档将](http://www.khronos.org/opengles/sdk/1.1/docs/man/glGet.xml)其显示为 C API 的一部分。

我尝试使用以下代码：

```
 int[] results = new int[4];
    gl.glGetIntegerv(GL10.GL_MAX_VIEWPORT_DIMS, results, 0);
    for (int i = 0; i < results.length; i++) {
        Log.e(TAG, "results[" + i + "]: " + results[i]);
    } 
```

我在表面的各个阶段得到输出，如下所示：

```
onSurfaceCreated called
    results[0]: 4096
    results[1]: 4096
    results[2]: 0
    results[3]: 0
onSurfaceChanged called with height: 800 and width: 480
  //NOTE: gl.glViewport(0, 0, width, height); is called here
    results[0]: 4096
    results[1]: 4096
    results[2]: 0
    results[3]: 0
onDrawFrame called
    results[0]: 4096
    results[1]: 4096
    results[2]: 0
    results[3]: 0 
```

使用 Android 的 kronos GLES 如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T22:03:07.277

我发现 Android 可以保护您免受自己的伤害。`onSurfaceChanged`在任何调用之前`onDrawFrame`调用。我们有责任捕获和保存这些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:44:29.443

常量`GL_VIEWPORT`不是 interface 的一部分[`GL10`](http://developer.android.com/reference/javax/microedition/khronos/opengles/GL10.html)，而是[`GL11`](http://developer.android.com/reference/javax/microedition/khronos/opengles/GL11.html). 尝试`GL11.GL_VIEWPORT`改用。如果您认为这不合适，您可以将实例强制转换为`GL11`之前，但这没有任何区别。

# css - What particular way is this font styling?

> ID：10169343
> 
> 赞同：2
> 
> 时间：2012-04-16T06:02:03.327
> 
> 标签：css

I see this particular font css applied to

```
 font: 400 50px/60px "minion-pro",times,serif; 

```

an element. I want to understand what is 400 whats meaning of 50px/60px and which of the three fonts "minion",times or serif gets applied.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T06:04:49.027

you can write like this:

```
div{
 font-weight:400;
 font-size:50px;
 line-height:60px;
 font-family:"minion-pro",times,serif;
} 
```

In the **font-family** they are `fall back` fonts . fallBack fonts means if `"minion-pro"` is not in user computer then it's pick `times` instead of `"minion-pro"` & if there `times` is not in the user computer then it's pick `serif` font-family.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:10:40.310

It can be rewritten like this:

```
font-weight: 400;
font-size: 50px;
line-height: 60px;
font-family: "minion-pro",times,serif; 
```

So `400` is the weight of the font, `50px/60px` means `50px` font size, with `60px` line-height. The first available font will be applied which exists on the computer which is displaying the webpage.

[http://www.w3.org/TR/CSS21/fonts.html#propdef-font](http://www.w3.org/TR/CSS21/fonts.html#propdef-font)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T06:10:53.847

This is the [shorthand `font` property](http://www.w3.org/TR/CSS2/fonts.html#font-shorthand).

```
font: style variant weight size / height family1, family2,...; 
```

is short for

```
font-style : style;
font-variant: variant;
font-weight: weight;
font-size: size;
line-height: height;
font-family: family1, family2,...; 
```

The [`font-family`](http://www.w3.org/TR/CSS2/fonts.html#propdef-font-family) property takes a prioritized list:

> The property value is a prioritized list of font family names and/or generic family names

The browser will use the first font-family that's available. There are some generic names like `sans-serif`, `serif` and `monospace`.

**EDIT**: Also note that `font-weight:400` is the same as `font-weight: normal`.

See also:

*   [W3C: CSS2.1: Fonts](http://www.w3.org/TR/CSS2/fonts.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T06:06:10.540

I can answer for the font, they'll be used by order of availability (some browser might not render them or know them) so 1st minion then times then serif. For the 400 I don't know at the moment

# javascript - 当通过javascript更改选择框时如何触发新功能？

> ID：10169344
> 
> 赞同：0
> 
> 时间：2012-04-16T06:02:12.810
> 
> 标签：javascript, jquery

我有 2 个名为“primaryTag”和“primaryCategory”的选择框

primaryCategory 依赖于 primaryTag

还有 2 个称为“标签”和“类别”的多选选项。

当 'primaryTag' 改变时，'tags' 应该被取消选择。

当 'primaryCategory' 改变时，'categories' 多选选项应该被取消选择。**即使在primaryTags上的更改事件之后“primaryCategory”发生了变化，也应该重置“categories”多选。**

我有以下代码：

```
$('document').ready(function(){
    $("#primaryTag").change(function () {
        tagId = $("#{{ admin.uniqId }}_primaryTag option:selected").val();
        $("#primaryCategory").val("option:first");
        $("#tags *").attr("selected", false);
    });

    $("#primaryCategory").change(function () {
        $("#categories *").attr("selected", false);
    });

}); 
```

`primaryTag`并且`primaryCategory`是选择框。 `tags`并且`categories`是多选框。

当我更改 primaryTag 时，primaryCategory 选择框会根据需要填充第一个选项的默认值。但是，我还希望重置类别多选框（取消选择所有选项）。而这并没有发生。我怎样才能做到这一点？

这是HTML

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:26:27.277

`$('document')`必须是`$(document)`。之后记住默认的主要类别。在*主要标签*更改时设置默认主要类别并重置标签选项。在*主要类别*更改时重置类别选项。

```
$(document).ready(function() {
    var iDefault = $("#primaryCategory").val();

    $("#primaryTag").change(function () {
        $("#primaryCategory").val(iDefault);
        $("#tags option").attr("selected", false);
    });

    $("#primaryCategory").change(function () {
        $("#categories option").attr("selected", false);
    });
}); 
```

另请参阅[此示例](http://jsfiddle.net/cXqxZ/)。

=== 更新 ===

如果要设置*主要类别*的第一个选项，请替换为：

```
$(document).ready(function() {
    $("#primaryTag").change(function () {
        $("#primaryCategory option:first").attr("selected", true);
        $("#tags option").attr("selected", false);
    });

    $("#primaryCategory").change(function () {
        $("#categories option").attr("selected", false);
    });
}); 
```

另请参阅[此示例](http://jsfiddle.net/cXqxZ/1/)。

=== 更新 ===

如果您希望在重置*主要类别*后重置类别，请将第一个版本替换为：

```
$(document).ready(function() {
    var iDefault = $("#primaryCategory").val();

    $("#primaryTag").change(function () {
        $("#primaryCategory").val(iDefault);
        $("#primaryCategory").change();
        $("#tags option").attr("selected", false);
    });

    $("#primaryCategory").change(function () {
        $("#categories option").attr("selected", false);
    });
}); 
```

另请参阅此[更新示例](http://jsfiddle.net/r9d2f/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:13:15.170

您可以使用 onclick 功能。

```
<element onclick="newfunction()"></element> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:30:52.560

使用 jQuery 清除多选框基本上有两种方法：

```
$("#my_select_box").val(null); 
```

或者

```
$("#my_select_box option").attr("selected",false); 
```

第一个将选择元素的值更改为空。第二个删除 select 元素中所有选项的 selected 属性。

我猜你的代码的效果是：

```
$("#my_select_box").attr("selected",false); 
```

这不起作用，因为`#my_select_box`它是实际的选择元素。删除`selected`select 元素本身的属性没有任何效果，因为该属性仅对其中的选项有意义。

您真的必须尝试[Firebug](http://getfirebug.com/)或 chrome 内置的开发人员工具。它们可以极大地帮助调试 javascript 和 jQuery 代码。

# java - 如何在按钮上获得鼠标悬停/弹出效果？

> ID：10169351
> 
> 赞同：3
> 
> 时间：2012-04-16T06:02:46.133
> 
> 标签：java, swing, mouseover, jbutton

如何获得与**Stackoveflow 中标签**`JButton`的鼠标悬停效果相似的鼠标悬停效果？**例如**

![弹出帮助](../Images/5739874ca459ab269d6dcf3e4e94138a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T10:06:23.137

见[`JComponent.setToolTipText(String)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setToolTipText%28java.lang.String%29)。工具提示在一定程度上支持 HTML，但不支持在 SO 标记弹出窗口底部提供链接的功能。

为此，您需要将工具提示换成`JWindow`/`JEditorPane`您需要自己将其“连接在一起”的位置。这是[一个](https://stackoverflow.com/a/10093168/418556)使用`JWindow`（显示`BufferedImage`实例）的示例。

![](../Images/d9c80aeed1c3cf42a252608a21cabc1b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T06:13:33.563

您可以使用[setRolloverIcon](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#setRolloverIcon%28javax.swing.Icon%29)。这是一个[例子](http://www.exampledepot.com/egs/javax.swing/button_OtherIcon.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T06:35:34.963

```
Icon normalIcon = new ImageIcon("normal-icon.png"); // Icon for normal situations
JButton button = new JButton(); // initialize the button
button.setIcon(normalIcon); // set the normal situation icon

Icon rollOverIcon = new ImageIcon("roll-over.png"); // Icon for roll over (hovering effect)
button.setRolloverIcon(rollOverIcon); // Set the icon attaching with the roll-over event 
```

# php - 数据库设计和图像文件系统管理？

> ID：10169352
> 
> 赞同：1
> 
> 时间：2012-04-16T06:02:50.127
> 
> 标签：php, mysql, image-processing, image-management

我正在寻找一个后端来接受用户上传的图像，重命名它们并将它们存储在文件系统中（不，它不是 Instagram）

我正在考虑简单地重命名图像并存储在用户文件夹中：

图片/{userid}/{userid}_{md5(timestamp)}.jpg

关联也将包含在数据库中。

这是一个好的/足够的模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:16:29.653

基本上你的方法很好，但这里是我给你的建议：

*   不要在文件名中使用时间戳，因为您已经将文件名存储在数据库中，只需为时间戳 <-> 文件关系创建额外的列。这样可以更轻松地管理原始创建、上次修改甚至到期日期等内容。
*   确保您存储的文件名的列是唯一的。您不想意外存储重复的文件名
*   对文件的接受情况进行交叉检查。如果文件成功保存到服务器但查询失败，请确保在失败时删除文件。或者，如果您的操作顺序颠倒了，如果文件无法保存到服务器，请删除数据库中的条目。
*   如果不允许公开访问图像，您可以拒绝正常查看图像，而是将用户引导至文件名作为 GET 变量的链接（PHP 文件）。然后您可以检查 SESSIONS 和/或 COOKIES 以确定他们是否有权查看它。如果是，您可以将输出的标题设置为 jpeg 或他们正在查看的任何类型的文件的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:41:16.197

为什么不使用数据库中的唯一 id，这样可以更容易地找到文件。

此外，它不会限制您构建文件的方式，也许您不会总是希望通过用户名保存，如果每个文件都有一个与数据库相关联的 ID，这可能会简单得多。

```
user/{database_id}.jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:09:06.033

有点取决于：

*   每个用户有多少张图片？
*   每张图片的大约尺寸范围？
*   有多少用户？
*   你期望什么样的并发？

如果上述大多数数字都很小，那么您的方法可能会持续足够长的时间，让您走得更远，并且至少可以让您开始。

我知道使用 MySQL blob 存储会受到[负面](https://stackoverflow.com/questions/6313969/phpstore-image-into-mysql-blob-good-or-bad)影响，但这也是一种简单的入门方式，您可以对数据库进行分片以实现一些横向扩展，而无需进行任何巧妙的编码。

那就是说...

如果在您的系统中，您希望用户上传大量文件，您可能会遇到文件系统的[限制或性能问题](https://stackoverflow.com/questions/466521/how-many-files-in-a-directory-is-too-many)。

如果您在 Windows 上托管，请注意[8.3 文件名问题](http://support.microsoft.com/kb/121007)（当目录变大时*非常*慢），因为您的文件名肯定会比 8.3 长:)

如果很多人将同时上传/下载——比如在使用高峰期——你将不得不注意 I/O 争用。如果您使用的是 RAID 10 卷，您会走得更远，使用 SSD 会更好（但您可能会遇到存储容量问题）。

如果有可能由不同的人上传相同的图像（跨多个文件夹重复），您建议的方法将不是最节省空间的方法，在这种情况下，您最好通过数据的功能进行键控（例如md5sum）并仅存储一份副本（是的，然后删除存在管理问题）。

如果您期望来自许多人的大量大图像，您最终将不得不考虑扩展底层存储。您可以通过 {userid} 的某些功能对数据进行分区，并在不同的卷或机器上进行分片。这也会为您带来更好的并发吞吐量。

Another question: will you always be serving out only the original image, or you'll send back re-scaled copies sometimes? You'd probably want to scale once and return the pre-scaled version always, in which case you'd need to take storage of those scaled copies into account too.

# javascript - 从 Xcode 项目中的 Javascript 读取写入文件

> ID：10169357
> 
> 赞同：2
> 
> 时间：2012-04-16T06:03:11.467
> 
> 标签：javascript, iphone, xcode, file

我正在使用 JavaScript 制作 iPhone 应用程序。我想打开一个文件作为结果文件，我需要从 javascript 编写一些结果日志和数据。使用 iphone，我使用 filesDirectory 打开文件并进行读/写操作。但现在我想在 javascript 中执行此操作。现在我如何使用这个文档目录来编写文件并稍后从 Xcode 访问它。有什么建议么？

谢谢阿坎莎

我正在使用以下 youtube api 代码。我制作了一个名为 youtubeAPI.html 的文件，并从 Objective-C 代码中调用了该文件。它成功打开页面。现在我想打开一个文件并在每次更改状态时写入内容，然后需要在 obejective-c 的最终结果中显示该文件。请告诉我我该怎么做。

```
<!DOCTYPE HTML>
<html>
<body>
<div id="player"></div>
<script>
    //Load player api asynchronously.
    var tag = document.createElement('script');
    tag.src = "http://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    var done = false;
    var player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'JW5meKfy3fY',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
    }
    function onPlayerReady(evt) {
        evt.target.playVideo();
    }
    function onPlayerStateChange(evt) {
        if (evt.data == YT.PlayerState.PLAYING && !done) { // NEED TO ADD FILE OPERATION HERE
            setTimeout(stopVideo, 6000);
            done = true;
        }
    }
    function stopVideo() {
        player.stopVideo();
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:39:07.567

我已经在 PhoneGap 中编写了文件，但从未从目标 c 访问过它。但我很确定，无论是用 JS 还是 Obj-C 编写的任何文件都写在文档目录中。如需帮助，您可以查看这些链接[PhoneGap file writing](http://docs.phonegap.com/en/1.6.0/cordova_file_file.md.html#File)和[W3 File api](http://www.w3.org/TR/FileAPI/)。PhoneGap 中的示例很容易理解，我认为它应该可以工作，因为它使用了 W3 JS 文件 api。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:03:49.870

这是我编写的一些代码，用于读取和写入适用于我的文件系统。请注意，fileWriter 将传回文件的绝对路径，但文件读取器需要相对路径，因此底部的 getRelativePathToFile 方法。

```
function onPlayerStateChange(evt) {
 if (evt.data == YT.PlayerState.PLAYING && !done) { // NEED TO ADD FILE OPERATION HERE

 PG.saveToDisk('youTubeStateChange.txt', 'on player state change', 
  function (pathToFile){
   alert('file written to ' + pathToFile);
  }
 ); 

 setTimeout(stopVideo, 6000);
   done = true;
 }
}

// make error codes meaningful
PG.FileErrors = {
 1:     'File not found',
 2:     'Security error',
 3:     'Action Aborted',
 4:     'File not readable',
 5:     'Encoding error',
 6:     'No modification allowed',
 7:     'Invalid state error',
 8:     'Syntax error',
 9:     'Invalid modification error',
 10:    'Quota Exceeded',
 11:    'Type mismatch',
 12:    'Path exists' 
};

// writes a file to the fileSystem 
// and sets the path to the file
// which can be used in the callback
// @param {} fileContent  
// @param {string} fileName  
// @param {function} callback
PG.saveToDisk = function (fileContent, fileName, callback){
 var    pathToFile, 
    accessFileSystem = window.requestFileSystem; 

 // something went wrong..
 function fail (error){
  console.log('-- saveToDisk: error ' + error + ' '  + PG.FileErrors[error.code]); 
 }

// finally write to a file
 function gotFileWriter (writer){
  console.log('-- saveToDisk: gotFileWriter');

  // ..yaay! it worked
  writer.onwrite = function (event){
   if(typeof callback == 'function'){
    console.log('-- saveToDisk: calling back');

    callback.call(this, pathToFile);
   }
  }; 

  // working it..
  writer.write(fileContent);

  delete gotFileWriter;
 }

 // now that we have a location
 // on disk we can write to it..
 function gotFileEntry (fileEntry){
  console.log('-- saveToDisk: gotFileEntry');

  pathToFile = fileEntry.toURI();

  // ..not quite 
  fileEntry.createWriter(gotFileWriter, fail);

  delete gotFileEntry;
 }

 // get file for writing
 function getFileSystem (fileSystem){
  console.log('-- saveToDisk: getFileSystem');

  fileSystem.root.getFile(fileName, {create: true, exclusive: false}, gotFileEntry, fail);

  delete getFileSystem;
 }

 if(typeof accessFileSystem != 'undefined'){
  console.log('-- saveToDisk: accessed file system');

  accessFileSystem(LocalFileSystem.PERSISTENT, 0, getFileSystem, fail);

  // clean up as we go to save space in
  // call stack and prevent 'call stack
  // size exceeded' error
  delete accessFileSystem;
 } else {
  console.log('-- saveToDisk: no requestFileSystem so exiting');
 }

};

// get a file at a source from
// disk and pass it to callback
// @param {function} callback
PG.getFromDisk = function (source, callback){
 var    accessFileSystem = window.requestFileSystem;

 // something went wrong..
 function fail (error){
  console.log('-- getFromDisk: error ' + PG.FileErrors[error.code]); 
 }

 //we read it
 // @param {string} method
 //  defaults to text unless image is specified
 function readData (file, method){
  console.log('readDataUrl');

  var   reader = new FileReader(),
    method = method == 'image' ? 'readAsDataURL' : 'readAsText';

  reader.onloadend = function (event){
   if(typeof callback == 'function'){
    console.log('-- getFromDisk: calling back');

    callback.call(this, event.target.result); 
   }
  };

  reader[method](file);
 }

 // what do we do with the file?
 function gotFile (file){
  console.log('-- gotFile');

  readData(file);
 }

 // get the file
 function gotFileEntry (fileEntry){
  console.log('-- gotFileEntry');

  fileEntry.file(gotFile, fail);
 }

 // get file reader
 function getFileSystem (fileSystem){  
  console.log('-- getFileSystem: ' + source);

  fileSystem.root.getFile(source, null, gotFileEntry, fail);
 }

  // why did the fileSystem cross the road?
  // so it could callback 4 times!
 if(typeof accessFileSystem != 'undefined'){
  accessFileSystem(LocalFileSystem.PERSISTENT, 0, getFileSystem, fail);
 } else {
  console.log('-- getFromDisk: no requestFileSystem so exiting');
 }

};

// get relative path to saved file
// because that is what the file 
// reader needs
// @param {string} pathToFile
PG.getRelativePathToFile = function (pathToFile){
 if(/localhost|mnt/.exec(pathToFile)){  
  var root = /localhost|mnt/.exec(pathToFile)[0];

  pathToFile = pathToFile.substring(pathToFile.indexOf(root));
  pathToFile = pathToFile.substring(pathToFile.indexOf('/'));
 }

 console.log('-- getRelativePathToFile: pathToFile = ' + pathToFile);

 return pathToFile; 
}; 
```

# javascript - 通过正则表达式验证

> ID：10169364
> 
> 赞同：0
> 
> 时间：2012-04-16T06:04:47.707
> 
> 标签：javascript

我正在使用正则表达式通过 javascript 函数验证网页。这是我的变量：

```
var RE_phone = /^[\d\+]{3,4}([\- ]?)\d{1,3}([\- ]?)\d{3}([\- ]?)\d{4}$/; 
```

我需要验证国内和国际号码。到目前为止，它对国际号码正常工作。

以下是我希望能够接受为有效号码的国家号码示例：04 4784897 或 044784897。

我可以帮忙修改我的正则表达式变量以接受上述格式的国家电话号码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:00:12.493

首先从等式中删除所有非数字然后测试长度（如果您的 04 4784897 号码应该是 9）和/或其他标准不是更容易吗？

```
'04 9876543'.replace(/[^\d]/g,'').length === 9;
//other examples
'050 4312345'.replace(/[^\d]/g,'').length == 10; //=>true
var intnr = '+31 0610-752-772'.replace(/[^\d]/g,'');
intnr.length >= 10; //=>true
//etc... 
```

# ruby-on-rails - 詹金斯的结果不同

> ID：10169365
> 
> 赞同：0
> 
> 时间：2012-04-16T06:04:48.970
> 
> 标签：ruby-on-rails, ruby, continuous-integration, jenkins

我们正在寻找设置 Jenkins 并已部署。奇怪的是，单元测试的结果显示 7 次失败，而在我们的本地机器上，我们没有遇到任何失败。

为什么测试服务器上的结果会不同？

我已经验证他们正在使用适当的数据库和环境......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:11:48.783

您可能有以下情况之一：

--你在后台运行Jenkins，测试需要在前台运行。看到[这个答案](https://stackoverflow.com/a/9716473/1178189)。

--您正在以不同的用户身份运行 Jenkins，因此您的测试没有所有必要的权限。检查用户的 Jenkins 进程（例如`ps`在类 Unix 系统上）。

# c++ - STL 的 std::set 容器参数给重载的操作符 << ()

> ID：10169376
> 
> 赞同：0
> 
> 时间：2012-04-16T06:05:44.637
> 
> 标签：c++, set

我有以下代码，它在编译时给了我错误。问题发生在我在重载的插入运算符（即）运算符<<（）函数中创建一个 const_iterator 的地方。我猜 set 的模板参数版本不正确。任何人都可以请投入并使这段代码工作吗？

```
#include <iostream>
#include <set>

using namespace std;

class A {
public:
    int _i;
    A(int i) : _i(i) {}
    bool operator < (A a) const { return _i < a._i; }
};

class compA {
public:
    bool operator()(A a1, A a2) const { return (a1._i > a2._i); }
};

template<class T, class C>
std::ostream& operator << (std::ostream& os, const set<T, C>& s) {
    std::set<T, C>::const_iterator itr = s.begin();

    for (int i = 0; i < s.size(); i++) {
        os << *itr++ << " ";
    }

    return os;
}

int main() {
    set<A, less<A> > s1;
    set<A, compA> s2;

    s1.insert(A(9)); s1.insert(A(3)); s1.insert(A(-5)); s1.insert(A(3));
    s2.insert(A(2)); s2.insert(A(1)); s2.insert(A(7));

    cout << s1;
    cout << s2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:14:13.190

You forgot to declare and implement

```
std::ostream& operator << (std::ostream& os, const A& s)
{
    return os;
} 
```

Also, the signature of the method in your comparison class should be:

```
bool operator()(const A& a1, const A& a2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:16:04.777

`*itr`将是 type `const A&`，因此当您`os<<*itr++`编译器不知道如何打印对象`A`时，您还需要提供`operator <<`for `A`。

# java - Android - 按钮上的文字

> ID：10169377
> 
> 赞同：1
> 
> 时间：2012-04-16T06:05:50.297
> 
> 标签：java, android

我需要**在按钮的左侧和右侧显示文本**，每当我触摸应该调用意图的左侧时，以及当我触摸应该调用单独意图的右侧时。有可能这样做吗？请任何人建议我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T06:08:50.200

```
<LinearLayout
android:background="button's">

<TextView
android:id = "@+id/left"
android:clickable="true"
android:text="left"
/>

<TextView
android:id = "@+id/right"
android:clickable="true"
android:text="right"
/>
</LinearLayout> 
```

并在运行时..当这两个文本视图被点击时做两件不同的事情......

这将具有类似的效果...

# c# - 使用 C# 来自控制台应用程序的 Google Analytics（分析）数据

> ID：10169380
> 
> 赞同：0
> 
> 时间：2012-04-16T06:06:14.927
> 
> 标签：c#, dotnetopenauth, google-analytics-api

我正在尝试编写一项服务，该服务将通过 Windows 服务或控制台应用程序提取 Google Analytics 数据。

无论我尝试什么，我都无法使用 oAuth 授权我的应用

我可以做这样的事情

```
 var analyticsService = new AnalyticsService("MyApp");
 const string baseUrl = "https://www.google.com/analytics/feeds/data";

 var dataQuery = new DataQuery(baseUrl);

 dataQuery.Ids = TableId;
 dataQuery.Dimensions = "ga:pagePath,ga:date";
 dataQuery.Metrics = "ga:avgTimeOnPage,ga:pageviews,ga:uniquePageviews";
 dataQuery.Sort = "ga:date";
 dataQuery.GAStartDate = "2012-03-01";
 dataQuery.GAEndDate = "2012-04-15";

 Feed = analyticsService.Query(dataQuery); 
```

如果我将 GDataCredentials 与我的帐户用户名/密码一起使用，这可以正常工作。我的印象是，这每天只给我 200 个请求。我真的需要一些示例代码的帮助，以使其与 oAuth 一起使用以允许 50K 请求。我在这里完全撞墙了。

**只是为了澄清：**

我的网站只有一个 GoogleAnalytics 帐户。我将永远从那个帐户中提取。在不达到 API 低限制的情况下，最简单的方法是什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:23:42.663

经过进一步研究，我正在寻找的选项似乎是服务帐户，它对谷歌分析不可用（还没有？）

[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:29:48.297

答案可以在[这里找到。](https://stackoverflow.com/questions/5005665/how-to-get-google-analytics-data-using-oauth)

原作者引述：

> 要使其正常工作，您需要来自 http://www.dotnetopenauth.net/ 的 DotNetOpenAuth [和来自](http://www.dotnetopenauth.net/)[http://code.google.com/p/google-gdata/](http://code.google.com/p/google-gdata/)的gdata
> 
> 在 DotNetOpenAuth 中，您需要一个名为 OAuthConsumer 的示例项目。将其更改为请求 Analytics 授权：

```
GoogleConsumer.RequestAuthorization(google, GoogleConsumer.Applications.Analytics); 
```

> 这将为您提供令牌和令牌秘密。你可以像这样使用它们：

```
 GOAuthRequestFactory requestFactory = new GOAuthRequestFactory("cp", TokenManager.ConsumerKey); //ConsumerKey actually is the name of web application
    requestFactory.ConsumerKey = TokenManager.ConsumerKey;
    requestFactory.ConsumerSecret = TokenManager.ConsumerSecret;
    requestFactory.Token = AccessToken;
    requestFactory.TokenSecret = TokenManager.GetTokenSecret(AccessToken);
    requestFactory.UseSSL = true;
    AnalyticsService service = new AnalyticsService(requestFactory.ApplicationName); // acually the same as ConsumerKey
    service.RequestFactory = requestFactory;

    const string dataFeedUrl = "https://www.google.com/analytics/feeds/data";

    DataQuery query1 = new DataQuery(dataFeedUrl); 
```

# flex4 - RadioButton 作为 ItemRenderer 允许在 mx Datagrid 中进行超过 1 个选择

> ID：10169383
> 
> 赞同：0
> 
> 时间：2012-04-16T06:06:28.363
> 
> 标签：flex4, radio-button, itemrenderer

我需要单选按钮作为 mx 数据网格中的 itemRenderer 的帮助。我想成为在给定时间仅选择 1 个单选按钮的表格，但我的数据网格允许选择超过 1 个单选按钮。我不想要这种行为。

```
I have also included a groupName to the radioButtons in the itemRenderer but still it doe4s not work.

Please have a look at my codes below and help me with this.

<mx:DataGrid id="myGrid" showHeaders="false" headerHeight="0"
                                 fontSize="9" x="20" y="20" width="217" height="30">
                        <mx:columns>
                            <mx:DataGridColumn width="20" headerText="isDefault" dataField="@IS_DEFAULT">
                                <mx:itemRenderer>
                                    <fx:Component>
                                        <mx:HBox horizontalAlign="left">
                                            <s:RadioButton selected="@{data.isDefault}" group="{outerDocument.rbg1}" horizontalCenter="0"/>
                                        </mx:HBox>
                                    </fx:Component>
                                </mx:itemRenderer>
                            </mx:DataGridColumn>    
                        </mx:columns>
                    </mx:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:00:48.327

检查以确保 rbg1 是公共而非私有 var。此外，我从不使用 outerDocument。我总是坚持使用 parentApplication。有些人不同意，但它从来没有让我失望过。试一试。

# iphone - 如何使用 iphone SDK 检测动物面部？

> ID：10169393
> 
> 赞同：3
> 
> 时间：2012-04-16T06:07:23.347
> 
> 标签：iphone

我正在实现一个 iPhone 动物应用程序。我想在其中使用 iPhone sdk 添加动物面部的面部检测。我已经检查过 OpenCV，但只有人脸检测是可能的。是否可以使用 iOS sdk 检测动物面部。

请给我有关此查询的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:14:22.147

对此进行了研究，并预测了各种带有算法的论文。阅读以下有关动物面部检测的论文。
[http://www.eng.auburn.edu/~troppel/internal/sparc/TourBot/TourBot%20References/Haar/2000186.pdf](http://www.eng.auburn.edu/~troppel/internal/sparc/TourBot/TourBot%20References/Haar/2000186.pdf)
[http://www.cs.bris.ac.uk/Publications/Papers/2000483。 pdf](http://www.cs.bris.ac.uk/Publications/Papers/2000483.pdf)

# linux - 生成新外壳后别名丢失

> ID：10169396
> 
> 赞同：0
> 
> 时间：2012-04-16T06:07:49.400
> 
> 标签：linux, bash

在 linux 中登录我的帐户后 - 我可以使用我在 .bash_profile 文件中创建的所有别名。

但是在我使用以下命令执行一个简单的脚本（setter.sh）之后：cleartool setview view_name

所有别名都丢失了 - 这可能是因为 cleartool 产生了一个新的 shell 查询是：

1.  如何确定当前产生了多少个 shell - 我可以知道我当前处于哪个嵌套级别 - 如果脚本以产生新 shell 的方式工作？

2.  启动新外壳后如何保留别名值 - 就像上述情况一样？

3.  如果我尝试通过添加源 .bash_profile 来确保 .bash_profile get 作为脚本的一部分重新执行 - 即使那样 - 别名设置没有发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T06:40:01.887

你应该在谷歌上搜索过`.bash_profile`，你会[发现](http://hacktux.com/bash/bashrc/bash_profile)那`.bash_profile`是用于*登录*shell，`.bashrc`用于*交互式*shell，并且 shell 脚本不使用它们。

在 shell 脚本中，使用函数（必须定义）比使用别名更好。

[子](http://tldp.org/LDP/abs/html/subshells.html)外壳的外壳级别可通过`SHLVL`变量获得。

花时间阅读[Advanced Bash-Scripting Guide](http://tldp.org/LDP/abs/html/)。

# android - 如何使用 zxing 条码读取应用程序实现缩放功能？

> ID：10169398
> 
> 赞同：3
> 
> 时间：2012-04-16T06:08:04.600
> 
> 标签：android, zxing

我正在使用 zxing 条码读取应用程序。我需要在应用程序中添加缩放功能，以便我可以从更远的距离扫描条形码。

即在扫描条码期间，它应该能够缩放相机预览。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:18:04.067

变焦并没有真正的帮助，因为它是数码变焦。事实上，它往往会伤害扫描。它只能通过让用户进一步阻止来帮助，但您可以通过其他 UI 提示来做到这一点。但是，设置缩放并不难。你设置你想要的任何`Camera.Parameters`缩放`CameraConfigurationManager`。

# android - Android：如何解决位图 java.lang.OutOfMemoryError？

> ID：10169399
> 
> 赞同：6
> 
> 时间：2012-04-16T06:08:09.200
> 
> 标签：android, bitmap, out-of-memory

我`java.lang.OutOfMemoryError`在使用位图显示大图像时得到了。
为了调整位图的大小，我参考了以下链接[Save Bitmap 和 BitmapFactory.decodeFile](http://www.java2s.com/Code/Android/2D-Graphics/SaveBitmapandBitmapFactorydecodeFile.htm)。

我的logcat如下：

```
FATAL EXCEPTION: main
java.lang.OutOfMemoryError
    at     android.graphics.Bitmap.nativeCreate(Native Method)
    at     android.graphics.Bitmap.createBitmap(Bitmap.java:604)
    at     android.graphics.Bitmap.createBitmap(Bitmap.java:551)
    at     com.android.restaurant.DescriptionPage.getResizedBitmap(DescriptionPage.java:327)
    at         com.android.restaurant.DescriptionPage.setDetailsIntoLayout(DescriptionPage.java:172)
    at com.android.restaurant.DescriptionPage.onCreate(DescriptionPage.java:101)
    at android.app.Activity.performCreate(Activity.java:4397)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
    at android.app.ActivityThread.access$500(ActivityThread.java:125)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:132)
    at android.app.ActivityThread.main(ActivityThread.java:4135)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:491)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T06:14:56.843

Since you have not posted your code it is hard to know whether there is a bug or probably ineffective code that can be improved.

But generally the JVM memory is limited, so loading of big image can cause `OutOfMemoryError`. You can try to increase the JVM memory using `-Xmx` option. This is the first and the simplest way.

Other way is to decrease your image (if it is possible). Or probably use format other than BMP (e.g. JPG). It guarantees good quality and requires less memory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:32:27.880

开发移动应用程序的挑战是您的内存有限。

我想到的第一件事是尝试使用 PNG（便携式网络图形）而不是位图（如果可能的话）。

除此之外，这似乎是现有问题，请检查：- [http://code.google.com/p/android/issues/detail?id=8488](http://code.google.com/p/android/issues/detail?id=8488)

# liferay-6 - Liferay 6：Alloy UI 的 JavaScript 的 Eqvalinet 代码

> ID：10169407
> 
> 赞同：0
> 
> 时间：2012-04-16T06:08:59.340
> 
> 标签：liferay-6

```
<portlet:actionURL  name="addBook" var="addBookURL" />

public void addBook(ActionRequest request, ActionResponse response) throws IOException, PortletException {

} 
```

嗨，这是我的 Alloy UI 代码，用于调用我的 MVCPortlet 的 Action 类 addBook 方法。

我的问题是，我不想在我的 UI 中使用 Alloy UI，而是使用纯 JavaScript/Jquery。

那么是否有可能在纯 JavaScript 中有 equaveleint 代码？

```
<aui:form action="<%= addBookURL.toString() %>" method="post">

    <aui:input type="text" name="name"></aui:input>
    <aui:input type="password" name="pwd"></aui:input>
    <aui:button type="submit"></aui:button>
</aui:form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:28:13.913

对于此功能，您可以使用纯 html，如下所示：

```
<form name="<%= addBookURL.toString() %>" action="<%= addBookURL.toString() %>" method="post">

    <input type="text" name="name"></input>
    <input type="password" name="pwd"></input>
    <input type="submit"></input>
</form> 
```

# iphone - 我可以接收另一个应用程序的信息吗？

> ID：10169413
> 
> 赞同：0
> 
> 时间：2012-04-16T06:09:46.937
> 
> 标签：iphone, objective-c, ios, xcode

我正在学习iOS编程。

我有一个程序，我会称这个程序为`aProgram`。

而且我没有任何关于 的消息来源`aProgram`，但我的 iphone 安装了这个应用程序。

我制作了一个名为`myProgram`.

中有一个按钮`myProgram`。当我单击按钮时，将启动一个程序。

是的，我用`[[UIApplication sharedApplication] openURL: url];`

url 由 json 代码解析。

反正我点击了按钮，`aProgram`就启动了。

`aProgram`有一个功能，就是写邮件。

`aProgram`的那个按钮被点击，它发送到服务器信息（我听说这也是一个json代码）

我的问题是

当我点击那个写邮件按钮时`aProgram`，

可以`myProgram`从中捕获任何数据`aProgram`吗？

如果可以，请告诉我该怎么做。帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:37:56.297

不，你不能。苹果可以，但你不能。

# python - how to achieve this result

> ID：10169414
> 
> 赞同：-4
> 
> 时间：2012-04-16T06:09:51.140
> 
> 标签：python, list

I am working on small project using Python 2.6\. Finally my list is like this.

```
data = ['1:Rammmm,mmmm', '2:surr.rrrrr', '3:Sam ttttt',
'1:qqqq qqqqqqq', '2:wwwwwwwwwww', '3:eeeeeeeee','4:tttttttt',
'1:zzzzzzzzzzzzz', '2:xxxxxxxxx'] 
```

Here, I want to display all 1's in one line, all 2's in one line, etc., with pipe"|" as separator. It should be like this, sorting only by the number.

```
{Rammmm,mmmm|qqqq qqqqqqq|zzzzzzzzzzzzz}
{surr.rrrrr|wwwwwwwwwww|xxxxxxxxx}
{Sam ttttt|eeeeeeeee}
{tttttttt} 
```

How can this be achieved in Python?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:23:45.477

请参阅我的其他解决方案，因为我认为它比这个更好： [https ://stackoverflow.com/a/10173807/1219006](https://stackoverflow.com/a/10173807/1219006)

```
>>> from operator import itemgetter
>>> from itertools import groupby
>>> data = ['1:Rammmm,mmmm', '2:surr.rrrrr', '3:Sam ttttt',
'1:qqqq qqqqqqq', '2:wwwwwwwwwww', '3:eeeeeeeee','4:tttttttt',
'1:zzzzzzzzzzzzz', '2:xxxxxxxxx']
>>> sorted_data = sorted(((int(x),y) for x,y in (el.split(':') for el in data)),key=itemgetter(0))
>>> for k,v in groupby(sorted_data,key=itemgetter(0)):
        print '{' + '|'.join(text for num,text in v) + '}'

{Rammmm,mmmm|qqqq qqqqqqq|zzzzzzzzzzzzz}
{surr.rrrrr|wwwwwwwwwww|xxxxxxxxx}
{Sam ttttt|eeeeeeeee}
{tttttttt} 
```

测试

```
>>> data = ['1:Rameshrrrrrrr', '2:Sureshmmmmmm', '3:Samkkkkkkkk', '1:tttttttttt', '2:wwwwwwwwwwwwwwwww', '3:yyyyyyyyy', '4:gggggggggg', '1:qqqqqqqqqqq', '2:hhhhhhhhh']
>>> sorted_data = sorted(((int(x),y) for x,y in (el.split(':') for el in data)),key=itemgetter(0))
>>> for k,v in groupby(sorted_data,key=itemgetter(0)):
        print '{' + '|'.join(text for num,text in v) + '}'

{Rameshrrrrrrr|tttttttttt|qqqqqqqqqqq}
{Sureshmmmmmm|wwwwwwwwwwwwwwwww|hhhhhhhhh}
{Samkkkkkkkk|yyyyyyyyy}
{gggggggggg} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:25:43.440

你会需要：

*   一种将每个字符串拆分为数字部分和另一部分的方法

*   一种将数字部分转换为整数的方法

*   一种收集所有不同部分的方法。您需要具有相同编号部分的所有其他部分的列表。

*   遍历列表中的所有字符串并收集所有内容。

*   一种将其他部分连接在一起以形成最终结果的方法。

找出可以在 Python 中执行的操作的一个好方法是转到 Python 提示符并键入`help(something)`. 将“某事”替换为您需要帮助的内容。试试这些：

`help(str.split)`

`help(str.join)`

我建议您通过调用转换为整数`int()`。像这样：

```
x = "3"
n = int(x)  # n is now the integer value 3 
```

而且我建议你考虑用a`dict`来收集东西。每个 dict 键将有多个值...您需要将它们连接在一起，`dict`或者为`dict`.

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:09:23.517

我认为这是一种更好的方法

```
>>> from collections import defaultdict
>>> data = ['1:Rammmm,mmmm', '2:surr.rrrrr', '3:Sam ttttt',
'1:qqqq qqqqqqq', '2:wwwwwwwwwww', '3:eeeeeeeee','4:tttttttt',
'1:zzzzzzzzzzzzz', '2:xxxxxxxxx']
>>> d = defaultdict(list)
>>> for num, text in (el.split(':') for el in data):
        d[int(num)].append(text)

>>> for key in sorted(d):
        print '{' + '|'.join(d[key]) + '}'

{Rammmm,mmmm|qqqq qqqqqqq|zzzzzzzzzzzzz}
{surr.rrrrr|wwwwwwwwwww|xxxxxxxxx}
{Sam ttttt|eeeeeeeee}
{tttttttt} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T06:44:59.767

```
#!/usr/bin/python

l = ['1:Rammmm,mmmm', '2:surr.rrrrr', '3:Sam ttttt', '1:qqqq qqqqqqq', '2:wwwwwwwwwww', 3:eeeeeeeee','4:tttttttt', '1:zzzzzzzzzzzzz', '2:xxxxxxxxx']

l = [ x.split(':') for x in l ]

d ={}
for k, v in l:
  try: 
    d[k]
  except:
    d[k] = []
  d[k].append(v)

l = d.values()
l = [ "|".join(x) for x in l ] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T13:30:23.947

我们可以这样做来获得欲望输出：

```
l=[]
for ls in data:
    l.append(ls[:1])
m=set(l)
for i in m:
    str=''
    for ls in data:
        if i==ls[:1]:
            str=str+ls[3:]+"|"
    print '{'+str+'}' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T01:49:14.400

可能这个变体会更简单：

```
data = ['1:Rammmm,mmmm', '2:surr.rrrrr', '3:Sam ttttt',
        '1:qqqq qqqqqqq', '2:wwwwwwwwwww', '3:eeeeeeeee','4:tttttttt',
        '1:zzzzzzzzzzzzz', '2:xxxxxxxxx']

d = dict()
for item in data:
    k, v = item.split(':')
    # if d already has list at key 'k', append to it; 
    # otherwise, create list, and append to newly created
    d.setdefault(k,list()).append(v)

# now print formatted list in order of sorted keys (1,2,3,4)
for k in sorted(d.keys()):
    print '{' + '|'.join(d[k]) + '}' 
```

# svn - TortoiseSVN folder did not auto refresh

> ID：10169417
> 
> 赞同：2
> 
> 时间：2012-04-16T06:10:33.477
> 
> 标签：svn, tortoisesvn

I'm currently using Collabnet Subversion Edge (v2.3.0) as my Subversion server and using TortoiseSVN 1.7.6 as my Subversion client on WindowXP.

Strangely, I encountered the following issue:

*   Using the 'SVN Repo-browser' in TortoiseSVN, I access to my project repository.
*   I created a new subfolder via right-click 'Create folder...', e.g. 'test', enter log message, and the subfolder 'test' appeared on the Repository Browser right away
*   However, when I try to delete that subfolder via right-click 'Delete', e.g. 'test' and enter log message, the 'test folder still remain on the repository browser until I do a refresh, i.e. click 'F5' function key.

Why is it so? Is it a bug in TortoiseSVN?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:15:42.750

I worked with TortoiseSVN for like 6 month and I had this "issue" on a regular basis too, it's like soemtimes when filezilla won't refresh directory either.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T18:39:08.873

我知道这是一个老问题，但对于那些发现自己在这里的人......

此问题已[在修订版 r23379 中报告并修复](http://marc.info/?l=tortoisesvn-issues&m=135049991420481)。如果你遇到这个问题，你可能需要更新你的 Tortoise。

# java - heroku sample application error

> ID：10169419
> 
> 赞同：1
> 
> 时间：2012-04-16T06:10:36.230
> 
> 标签：java, deployment, heroku

I am doing the sample application here [https://github.com/heroku/devcenter-embedded-tomcat](https://github.com/heroku/devcenter-embedded-tomcat)

I have run the application using 'mvn package' and the build is success..but when am running the script using "sh target/bin/webapp" then am getting the below error.Sir please help..thanks

> C:\Documents and Settings\srinivasa\Documents\workspace-sts-2.9.0.RELEASE\sriniv as>sh target/bin/webapp Exception in thread "main" java.lang.NoClassDefFoundError: launch/Main Caused by: java.lang.ClassNotFoundException: launch.Main at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) at java.lang.ClassLoader.loadClass(ClassLoader.java:247) Could not find the main class: launch.Main. Program will exit.

@james sir please do help am getting this error

```
C:\Documents and Settings\srinivasa\Documents\workspace-sts-2.9.0.RELEASE\testhe
roku\target\bin>webapp.bat
configuring app with basedir: C:\Documents and Settings\srinivasa\Documents\work
space-sts-2.9.0.RELEASE\testheroku\target\bin\.\src\main\webapp
Apr 16, 2012 8:12:01 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Apr 16, 2012 8:12:01 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Tomcat
Apr 16, 2012 8:12:01 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.22
Apr 16, 2012 8:12:01 PM org.apache.catalina.core.StandardContext resourcesStart
SEVERE: Error starting static Resources
java.lang.IllegalArgumentException: Document base C:\Documents and Settings\srin
ivasa\Documents\workspace-sts-2.9.0.RELEASE\testheroku\target\bin\src\main\webap
p does not exist or is not a readable directory
        at org.apache.naming.resources.FileDirContext.setDocBase(FileDirContext.
java:140) 
```

sir my pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.heroku.sample</groupId>
  <artifactId>embeddedTomcatSample</artifactId>
  <version>1.0-SNAPSHOT</version>
  <name>embeddedTomcatSample Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-core</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-logging-juli</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-jasper</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-jasper</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-jasper-el</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-jsp-api</artifactId>
        <version>7.0.22</version>
    </dependency>
  </dependencies>
  <build>
    <finalName>embeddedTomcatSample</finalName>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>appassembler-maven-plugin</artifactId>
            <version>1.1.1</version>
            <configuration>
                <assembleDirectory>target</assembleDirectory>
                <programs>
                    <program>
                        <mainClass>main.java.launch.Main</mainClass>
                        <name>webapp</name>
                    </program>
                </programs>
            </configuration>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>assemble</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
  </build>
</project> 
```

and am using same Main.java,HelloServlet.java,index.jsp

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:00:08.190

在 Windows 上，您需要运行：

```
target\bin\webapp.bat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:23:47.347

JVM 告诉您它找不到类launch.Main。您需要设置 JVM 的类路径才能找到它：

```
java -cp <f> launch.Main 
```

`<f>`包含启动目录的文件夹的路径在哪里（例如 target/bin）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:36:25.460

不知道你是否还关心这个，但你有没有这样做：

```
set REPO=%UserProfile%\.m2\repository 
```

? appassembler 生成的 target/bin/webapp 脚本依赖于该环境变量。

# makefile - C Makefile undefined reference

> ID：10169423
> 
> 赞同：0
> 
> 时间：2012-04-16T06:10:54.440
> 
> 标签：makefile

I have this project with the following file structure :

```
|-- CG.cu  
|-- Makefile  
|-- examples  
| |-- ex2.h  
|   |-- ex3.h  
|   |-- mmio.c  
|   |-- mmio.h  
|   |-- nos4.mtx  
|-- util.h  

```

**CG.cu** is my main program (A Conjugate Gradient solver) i have some help functions in **util.h** and then i have some hardcoded examples in **ex2.h** and **ex3.h** (I know it's bad practice, but it's okay for now) the problem is that **ex3.h** need mmio.c,mmio.h and nos4.mtx to load in the example.

So basically the flow is : CG.cu -> ex3.h -> mmio.h (mmio.c) The compiler (NVCC : later being ported for cuda) complains about undefined references for the mmio functions.

Currently my Makefile looks like this:

```
main: CG.cu util.h
      NVCC -o main CG.cu 
```

and GC.cu uses `#include "examples/ex3.h"`, and ex3.h uses `#include "mmio.h"`

Can you help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:20:01.373

您需要先编译 mmio.c，然后将 CG.cu 与生成的目标文件链接。您也可以一步完成：

```
mian: CG.cu util.h NVCC -o main CG.cu mmio.c 
```

# postgresql - how to compile the dblink module on centOS server(64-bit)

> ID：10169425
> 
> 赞同：0
> 
> 时间：2012-04-16T06:11:06.687
> 
> 标签：postgresql

I have compiled the dblink module ubder postgresql 8.2.19/contrib/dblink in my PC(fedora 16) but when I turn to the CentOS,it doesn't work,hints the message below:

```
gcc -m64 -O3 -funroll-loops -fargument-noalias-global -fno-omit-frame-pointer -g -finline-limit=1800 -std=gnu99  -Wall -Wmissing-prototypes -Wpointer-arith  -Wendif-labels -fno-strict-aliasing -fwrapv -I/home/build/builds/greenplum-db/Release-4_1_1_1-build-1_ce_051211-1820/Release-4_1_1_1-build-1_src/ext/rhel5_x86_64/include -Werror -fpic -I/home/gpadmin/greenplum-db/include -w -I. -I/home/gpadmin/greenplum-db/include/postgresql/server -I/home/gpadmin/greenplum-db/include/postgresql/internal -D_GNU_SOURCE  -I/home/build/builds/greenplum-db/Release-4_1_1_1-build-1_ce_051211-1820/Release-4_1_1_1-build-1_src/ext/rhel5_x86_64/include  -c -o dblink.o dblink.c
dblink.c:1: sorry, unimplemented: 64-bit mode not compiled in
make: *** [dblink.o] error 1 
```

can anyone give some proposal? run "which postgres"

on CentOS get: *~/greenplum-db/bin/postgres* on Fedora get:*/usr/local/greenplum-db/bin/postgres*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:56:18.593

首先，8.2.19 似乎是 PostgreSQL 的非常过时的版本，目前是 9.1.3，考虑使用更新的版本。

将目标文件从 32 位系统复制到 64 位系统并期望它们能够正常工作是不安全的。我建议你应该运行：

```
make clean
make 
```

在`dblink`源文件夹中。此外，您可能需要重新配置源代码，以便 Makefile 指向正确的库，以防您安装了多个 PostgreSQL 版本。

# javascript - 不同包含的 JavaScript 文件之间的冲突

> ID：10169426
> 
> 赞同：2
> 
> 时间：2012-04-16T06:11:17.157
> 
> 标签：javascript, jquery

当我包含[enhance.js](http://filamentgroup.github.com/EnhanceJS/enhance.js)插件时，它会与其他 jquery 插件发生冲突，例如 UI jquery 插件

例如，我不能使用日期选择器功能。

什么是可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:16:30.120

来自文档：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  // Code that uses other library's $ can follow here.
</script> 
```

和/或您可以在此处使用别名：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

# asp.net - ASP.NET - RequiredFieldValidator 仅验证特定控件

> ID：10169427
> 
> 赞同：6
> 
> 时间：2012-04-16T06:11:32.383
> 
> 标签：asp.net, requiredfieldvalidator

我有一个网络表格。有许多不同的部分。我可以说每个部分都显示一个数据表的数据。在每个部分我都有确定和取消按钮。当我按 OK 时，数据库中的表会发生任何更改。我还放了一些Requiredfieldvalidators。假设我在第一节中插入一条新记录，并且字段输入正确。当我按 OK 时，我收到其他部分的其他验证器引发的错误消息。当我按下特定部分的确定按钮以获取同一区域的验证错误时，是否有任何方法？所以我可能需要一个按钮，它不会作为漏洞页面提交者，而是特定部分的提交者。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T06:13:25.253

将 a`ValidationGroup`放在`RequiredFieldValidator`'s 上。然后将其`ValidationGroup`放在正确的提交按钮上。单击它时，仅验证属​​于该组的验证控件。

[http://msdn.microsoft.com/en-us/library/ms227424.aspx](http://msdn.microsoft.com/en-us/library/ms227424.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:16:46.437

我认为 janhartmann 是正确的 ValidationGroup 可以帮助您解决问题。看看[这篇文章](http://www.codeproject.com/Articles/1368/ASP-NET-validation-in-groups)

# javascript - Ruby on Rails (3.2): every request tries to load /[timestamp]?_[timestamp]

> ID：10169431
> 
> 赞同：0
> 
> 时间：2012-04-16T06:11:52.527
> 
> 标签：javascript, ruby-on-rails, ruby, nginx

As the title says, every request in my Rails Production environment performs a request to the same page with ?_[timestamp] after it. It expects javascript, because that is what the headers say.

It seems this request slows down my page-loading, because every page now does two requests instead of one.

Does anybody know what is going on and whether it can be fixed?

I'm using Ruby on Rails 3.2 with NGINX.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:31:55.680

您可能处于开发模式？！然后是防止在网络浏览器中缓存。更改为生产模式，如果您想在生产中运行它，它就消失了。

# javascript - 如何更改 Twitter Bootstrap 模态框的默认宽度？

> ID：10169432
> 
> 赞同：373
> 
> 时间：2012-04-16T06:12:02.083
> 
> 标签：javascript, jquery, twitter-bootstrap-2

我尝试了以下方法：

```
 <div class="modal hide fade modal-admin" id="testModal" style="display: none;">
        <div class="modal-header">
          <a data-dismiss="modal" class="close">×</a>
          <h3 id='dialog-heading'></h3>
        </div>
        <div class="modal-body">
            <div id="dialog-data"></div>
        </div>
        <div class="modal-footer">
          <a data-dismiss="modal" class="btn" >Close</a>
          <a class="btn btn-primary" id="btnSaveChanges">Save changes</a>
        </div>
    </div> 
```

而这个Javascript：

```
 $('.modal-admin').css('width', '750px');
    $('.modal-admin').css('margin', '100px auto 100px auto');
    $('.modal-admin').modal('show') 
```

结果不是我所期望的。模态左上角位于屏幕中央。

谁能帮我。有没有其他人试过这个。我想这不是一件不寻常的事情。

* * *

## 回答 #1

> 赞同：373
> 
> 时间：2012-04-16T06:27:54.653

**更新：**

在`bootstrap 3`您需要更改模态对话框。所以在这种情况下，您可以在站立`modal-admin`的地方添加类。`modal-dialog`

**原始答案（引导程序 < 3）**

您尝试使用 JS/jQuery 更改它是否有某种原因？

您只需使用 CSS 即可轻松完成，这意味着您不必在文档中进行样式设置。在您自己的自定义 CSS 文件中，添加：

```
body .modal {
    /* new custom width */
    width: 560px;
    /* must be half of the width, minus scrollbar on the left (30px) */
    margin-left: -280px;
} 
```

在你的情况下：

```
body .modal-admin {
    /* new custom width */
    width: 750px;
    /* must be half of the width, minus scrollbar on the left (30px) */
    margin-left: -375px;
} 
```

我将 body 放在选择器之前的原因是它的优先级高于默认值。通过这种方式，您可以将其添加到自定义 CSS 文件中，并且无需担心更新 Bootstrap。

* * *

## 回答 #2

> 赞同：271
> 
> 时间：2013-04-18T18:28:42.137

如果你想让它只用 CSS 做出响应，使用这个：

```
.modal.large {
    width: 80%; /* respsonsive width */
    margin-left:-40%; /* width/2) */ 
} 
```

*注1：我使用了一个`.large`类，你也可以在正常情况下这样做`.modal`*

*注 2：在 Bootstrap 3 中，负边距左可能不再需要* **（未经个人确认）**

```
/*Bootstrap 3*/
.modal.large {
     width: 80%;
} 
```

*注 3：在 Bootstrap 3 和 4 中，有一个 `modal-lg`类。所以这可能就足够了，但如果你想让它响应，你仍然需要我为 Bootstrap 3 提供的修复。*

在某些应用程序`fixed`中使用了模态，在这种情况下您可以尝试`width:80%; left:10%;`（公式：left = 100 - width / 2）

* * *

## 回答 #3

> 赞同：107
> 
> 时间：2013-08-01T17:02:50.553

如果您使用的是 Bootstrap 3，则需要更改模态对话框 div，而不是像已接受答案中显示的模态 div。此外，为了保持 Bootstrap 3 的响应特性，使用媒体查询编写覆盖 CSS 很重要，这样模式在较小的设备上将是全宽的。

请参阅[此 JSFiddle](http://jsfiddle.net/devincollier/tgkzK/2/)以尝试不同的宽度。

**HTML**

```
<div class="modal fade">
    <div class="modal-dialog custom-class">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 class="modal-header-text">Text</h3>
            </div>
            <div class="modal-body">
                This is some text.
            </div>
            <div class="modal-footer">
                This is some text.
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal --> 
```

**CSS**

```
@media screen and (min-width: 768px) {
    .custom-class {
        width: 70%; /* either % (e.g. 60%) or px (400px) */
    }
} 
```

* * *

## 回答 #4

> 赞同：80
> 
> 时间：2012-05-09T09:49:46.583

如果你想要一些不破坏相关设计的东西，试试这个：

```
body .modal {
  width: 90%; /* desired relative width */
  left: 5%; /* (100%-width)/2 */
  /* place center */
  margin-left:auto;
  margin-right:auto; 
} 
```

正如@Marco Johannesen 所说，选择器之前的“主体”的优先级高于默认值。

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2014-04-29T10:08:03.727

在 Bootstrap 3+ 中，更改模式对话框大小的最合适方法是使用 size 属性。下面是一个例子，注意`modal-sm`沿着`modal-dialog`类，表示一个小模态。它可以包含`sm`小型、`md`中型和`lg`大型的值。

```
<div class="modal fade" id="ww_vergeten" tabindex="-1" role="dialog" aria-labelledby="modal_title" aria-hidden="true">
  <div class="modal-dialog modal-sm"> <!-- property to determine size -->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="modal_title">Some modal</h4>
      </div>
      <div class="modal-body">

        <!-- modal content -->

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="some_button" data-loading-text="Loading...">Send</button>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #6

> 赞同：34
> 
> 时间：2013-09-04T01:00:16.763

因为`Bootstrap 3`这里是如何做到的。

`modal-wide`为您的 HTML 标记添加样式（改编自[Bootstrap 3 文档中的示例](http://getbootstrap.com/javascript/#modals)）

```
<div class="modal fade modal-wide" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 id="myModalLabel" class="modal-title">Modal title</h4>
      </div>
      <div class="modal-body">
        <p>One fine body&hellip;</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal --> 
```

并添加以下 CSS

```
.modal-wide .modal-dialog {
  width: 80%; /* or whatever you wish */
} 
```

现在无需覆盖`margin-left`即可`Bootstrap 3`使其居中。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2015-04-15T16:14:50.440

在**Bootstrap 3**中，您只需要这个

```
<style>
    .modal .modal-dialog { width: 80%; }
</style> 
```

上面的大多数答案都对我不起作用！！！

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" />

<style>
  #myModal1 .modal-dialog {
    width: 80%;
  }
  #myModal2 .modal-dialog {
    width: 50%;
  }
</style>

<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal1">
  80%
</button>

<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal2">
  50%
</button>
<center>
  <!-- Modal -->
  <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title" id="myModalLabel">Modal title</h4>
        </div>
        <div class="modal-body">
          custom width : 80%
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title" id="myModalLabel">Modal title</h4>
        </div>
        <div class="modal-body">
          custom width : 50%
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

</center>
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2012-07-05T11:03:22.160

解决方案取自[此](https://github.com/twitter/bootstrap/issues/675#issuecomment-3664958)页面

```
$('#feedback-modal').modal({
    backdrop: true,
    keyboard: true
}).css({
    width: 'auto',
    'margin-left': function () {
        return -($(this).width() / 2);
    }
}); 
```

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2016-08-23T07:11:20.893

在 Bootstrap 的 v3 中，有一种简单的方法可以使模态变大。只需在modal-dialog 旁边添加类**modal-lg 。**

```
<!-- My Modal Popup -->
<div id="MyWidePopup" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg"> <---------------------RIGHT HERE!!
        <!-- Modal content-->
        <div class="modal-content"> 
```

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2013-09-27T11:37:58.800

Bootstrap 3：为了保持小型和超小型设备的响应功能，我执行了以下操作：

```
@media (min-width: 768px) {
.modal-dialog-wide
{ width: 750px;/* your width */ }
} 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2014-06-22T14:09:55.873

这就是我所做的，在我的 custom.css 中添加了这些行，仅此而已。

```
.modal-lg {
    width: 600px!important;
    margin: 0 auto;
} 
```

显然，您可以更改宽度的大小。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2016-06-13T05:43:06.763

如果 Bootstrap>3，只需将样式添加到您的模态。

```
<div class="modal-dialog" style="width:80%;">
  <div class="modal-content">
  </div>
</div> 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2013-02-08T01:56:04.463

我发现这个解决方案对我来说效果更好。你可以使用这个：

```
$('.modal').css({
  'width': function () { 
    return ($(document).width() * .9) + 'px';  
  },
  'margin-left': function () { 
    return -($(this).width() / 2); 
  }
}); 
```

或者这取决于您的要求：

```
$('.modal').css({
  width: 'auto',
  'margin-left': function () {
     return -($(this).width() / 2);
  }
}); 
```

请参阅我发现的帖子： [https ://github.com/twitter/bootstrap/issues/675](https://github.com/twitter/bootstrap/issues/675)

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2013-09-09T08:15:37.083

仅供参考，Bootstrap 3 会自动处理 left 属性。因此，只需添加此 CSS 即可更改宽度并使其居中：

```
.modal .modal-dialog { width: 800px; } 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2014-02-19T13:09:13.853

保留响应式设计，将宽度设置为您想要的。

```
.modal-content {
  margin-left: auto;
  margin-right: auto;
  max-width: 360px;
} 
```

把事情简单化。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2017-03-15T06:47:43.313

改变类`model-dialog`你可以达到预期的结果。这些小技巧对我有用。希望它能帮助您解决这个问题。

```
.modal-dialog {
    width: 70%;
} 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2013-10-16T22:38:50.323

我结合使用了 CSS 和 jQuery，以及此页面上的提示，使用 Bootstrap 3 创建了流畅的宽度和高度。

首先，一些 CSS 来处理内容区域的宽度和可选滚动条

```
.modal.modal-wide .modal-dialog {
  width: 90%;
}
.modal-wide .modal-body {
  overflow-y: auto;
} 
```

如果需要，然后一些 jQuery 来调整内容区域的高度

```
$(".modal-wide").on("show.bs.modal", function() {
  var height = $(window).height() - 200;
  $(this).find(".modal-body").css("max-height", height);
}); 
```

完整的文章和代码在 [http://scottpdawson.com/development/creating-a-variable-width-modal-dialog-using-bootstrap-3/](http://scottpdawson.com/development/creating-a-variable-width-modal-dialog-using-bootstrap-3/)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2013-11-01T05:03:33.917

使用 Bootstrap 3，所需要的只是通过 CSS 为模态对话框提供的百分比值

# CSS

```
#alertModal .modal-dialog{
     width: 20%;
} 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2015-07-09T18:28:16.773

在带有 CSS 的**Bootstrap 3**中，您可以简单地使用：

```
body .modal-dialog {
    /* percentage of page width */
    width: 40%;
} 
```

这可以确保您不会破坏页面的设计，因为我们正在使用`.modal-dialog`而不是`.modal`将其应用于阴影。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2012-04-16T06:22:20.380

尝试以下类似的操作（请参阅此处的实时 jsfiddle 示例：http: [//jsfiddle.net/periklis/hEThw/1/](http://jsfiddle.net/periklis/hEThw/1/)）

```
<a class="btn" onclick = "$('#myModal').modal('show');$('#myModal').css('width', '100px').css('margin-left','auto').css('margin-right','auto');" ref="#myModal" >Launch Modal</a>
<div class="modal" id="myModal" style = "display:none">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
  </div>
</div>​ 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-01-15T11:50:38.673

与其使用百分比来使模态响应，我发现使用引导程序中已经内置的列和其他响应元素可以进行更多控制。

* * *

**要使模态响应/任何数量的列的大小：**

1）在模态对话框 div 周围添加一个额外的 div 类 .container -

```
<div class="container">
    <div class="modal-dialog">
    </div>
</div> 
```

2）添加一点 CSS 使模态全宽 -

```
.modal-dialog {
    width: 100% } 
```

3）如果您有其他模态，或者添加一个额外的类 -

```
<div class="container">
    <div class="modal-dialog modal-responsive">
    </div>
</div>

.modal-responsive.modal-dialog {
    width: 100% } 
```

4）如果您想要各种大小的模态，请添加一行/列 -

```
<div class="container">
  <div class="row">
    <div class="col-md-4">
      <div class="modal-dialog modal-responsive">
       ...
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2014-12-05T04:36:17.080

在您的 css 文件中添加以下内容

```
.popover{
         width:auto !important; 
         max-width:445px !important; 
         min-width:200px !important;
       } 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2018-06-20T12:10:02.307

使用下面的脚本：

```
.modal {
  --widthOfModal: 98%;
  width: var(--widthOfModal) !important;
  margin-left: calc(calc(var(--widthOfModal) / 2) * (-1)) !important;
  height: 92%;

  overflow-y: scroll;
} 
```

**演示**：

![在 gif 上演示](../Images/0463a02e9805fe3fcba1bf45e02b6de5.png)

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2018-10-10T20:18:59.933

我为 Bootstrap 4.1 解决了它

混合以前发布的解决方案

```
.modal-lg {
  max-width: 90% !important; /* desired relative width */
  margin-left:auto !important;
  margin-right:auto !important;
}
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2016-08-05T14:16:00.900

使用达到预期结果，

```
.modal-dialog {
    width: 41% !important;
} 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2017-08-04T03:34:21.020

**引导程序 3.xx**

```
 <!-- Modal -->
<div class="modal fade" id="employeeBasicDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-sm employeeModal" role="document">

        <form>

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Modal Title</h4>
            </div>

            <div class="modal-body row">
                Modal Body...
            </div>

            <div class="modal-footer"> 
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

        </form>

    </div>
</div> 
```

请注意，我在第二个 div 中添加了 .employeeModal 类。然后设置该类的样式。

```
.employeeModal{
        width: 700px;
    } 
```

[![代码片段截图](../Images/561e147d9ab22b081566b1ab2e5680a6.png)](https://i.stack.imgur.com/nz6qy.jpg)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2013-09-02T14:49:37.843

我用这种方式，它对我来说很完美

```
$("#my-modal")
.modal("toggle")
.css({'width': '80%', 'margin-left':'auto', 'margin-right':'auto', 'left':'10%'}); 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2013-11-25T23:41:09.890

Bootstrap 2 的基于较少的解决方案（无 js）：

```
.modal-width(@modalWidth) {
    width: @modalWidth;
    margin-left: -@modalWidth/2;

    @media (max-width: @modalWidth) {
        position: fixed;
        top:   20px;
        left:  20px;
        right: 20px;
        width: auto;
        margin: 0;
        &.fade  { top: -100px; }
        &.fade.in { top: 20px; }
    }
} 
```

然后无论您想指定模态宽度：

```
#myModal {
    .modal-width(700px);
} 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2014-08-02T17:10:34.803

我使用了 SCSS 和完全响应的模式：

```
.modal-dialog.large {
    @media (min-width: $screen-sm-min) { width:500px; }
    @media (min-width: $screen-md-min) { width:700px; }
    @media (min-width: $screen-lg-min) { width:850px; }
} 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-05-18T11:17:19.910

```
you can use any prefix or postfix name for modal. but you need to make sure that's should use everywhere with same prefix/postfix name.    

body .modal-nk {
        /* new custom width */
        width: 560px;
        /* must be half of the width, minus scrollbar on the left (30px) */
        margin-left: -280px;
    } 
```

或者

```
body .nk-modal {
            /* new custom width */
            width: 560px;
            /* must be half of the width, minus scrollbar on the left (30px) */
            margin-left: -280px;
        } 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2017-05-24T07:28:38.843

**下面是通过javascript设置模式弹出宽度和屏幕左侧位置的代码。**

$('#openModalPopupId').css({ "width": "80%", "left": "30%"});

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2017-08-08T16:31:39.820

```
.Size(ModalSize.Large)

sample:
 using (var modal = Html.Bootstrap().Begin(new Modal().Id("modalProject_" + modelItem.id).Closeable().Size(ModalSize.Large)))
                {
} 
```

# haskell - Haskell：原子 IO 包装器/惰性？

> ID：10169434
> 
> 赞同：4
> 
> 时间：2012-04-16T06:12:09.480
> 
> 标签：haskell, concurrency

我编写了以下函数，我认为应该以原子方式执行 IO（只要其他人都使用相同的函数`MVar`）。

```
atomicIO :: MVar () -> IO a -> IO a
atomicIO mvar io =
  do
    takeMVar mvar
    result <- io
    putMVar mvar ()
    return result 
```

另外，据我了解，Haskell IO 的某些部分是惰性的（例如`IORef`s），因此无需实际执行本节中的操作。它可以只返回一个“thunk”（这是正确的词吗？），其中列出了需要完成的任务。

这个想法是，关键部分（即单线程部分）应该很快。

但是，假设我正在写信给`IORef`s，并且我希望 Haskell 立即开始计算结果，所以它可以在需要时执行。但是就像我之前说的，当我们持有锁时，我不想被锁在关键部分`MVar`。

所以我想过这样做：

```
 result <- io `par` io 
```

或这个

```
 return result `par` result 
```

或这个

```
 result `par` return result 
```

但我不确定这是否有效。其中一个是正确的方法，还是有另一种方法？（我对后两者的担忧是`IO ()`行动，因为我认为并行评估`()`实际上并没有做任何工作）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:25:32.890

你在哪里

```
writeIORef myRef newValue 
```

将其替换为

```
newValue `par` writeIORef myRef newValue 
```

这将引发一个线程`newValue`在后台进行评估......

...但需要注意的是，它只会将其评估为 WHNF（基本上，只会评估数据结构的第一级）。所以 an`Int`将被完全评估，但 a`String`不会。一个`Maybe a`值将被完全评估为`Nothing`或部分评估为`Just _`。

因此，如果您使用的是更复杂的数据结构，则需要使用[`force`](http://hackage.haskell.org/packages/archive/deepseq/1.3.0.0/doc/html/Control-DeepSeq.html#v%3aforce)deepseq 包中的 from Control.DeepSeq，这将完全评估值。

```
force newValue `par` writeIORef myRef newValue 
```

* * *

如果你想用`modifyIORef`，我觉得不能`modifyIORef`直接复用，但是你当然可以定义一个类似的函数[（](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Data-IORef.html#modifyIORef)[无论如何定义`modifyIORef`）`readIORef``writeIORef`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Data-IORef.html#modifyIORef)：

```
modifyIORefInParallel :: NFData a => IORef a -> (a -> a) -> IO ()
modifyIORefInParallel ref f
   = do old <- readIORef ref
        let new = f old
        force new `par` writeIORef ref new 
```

（请注意，如果最后一行是`force (f old) `par` writeIORef ref (f old)`行不通的：并行强制的值不会是存储在 ref 中的值。）

（`NFData a`限制来自使用`force`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:13:49.563

获得快速关键部分的唯一方法是将自己限制在快速 IO 操作上。我看不出试图在内部强制进行严格的评估`atomicIO`会如何加快速度。此外，请注意，`atomicIO`它本身可能没有被严格评估，在这种情况下，内部的严格评估`atomicIO`没有任何效果。

在任何情况下，您都可以使用`seq`而不是`par`进行严格评估，因为您不会尝试触发并行计算。

# codeigniter - CodeIgniter 连接数据库自定义错误

> ID：10169435
> 
> 赞同：0
> 
> 时间：2012-04-16T06:12:16.750
> 
> 标签：codeigniter, codeigniter-2

我有这个代码

```
 $specific['hostname'] = "localhost";
    $specific['username'] = "root";
    $specific['password'] = "";
    $specific['database'] = "ci_forsyria";
    $specific['dbdriver'] = "mysql";
    $specific['dbprefix'] = "";
    $specific['pconnect'] = FALSE;
    $specific['db_debug'] = FALSE;
    $specific['cache_on'] = FALSE;
    $specific['cachedir'] = "";
    $specific['char_set'] = "utf8";
    $specific['dbcollat'] = "utf8_general_ci";

$specific_db = $this->load->database($specific, TRUE); 
```

我使用这个参数“FALSE”来隐藏连接错误！

```
$specific['db_debug'] = FALSE; 
```

但是如果连接字段，我如何创建自定义错误消息

像

$connect = $this->db->connect; if(!$connect) { // 打印错误信息 .. }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:56:01.450

DB_Debug 旨在显示数据库错误消息。

您已使用 "$specific['db_debug'] = FALSE;" 关闭了该功能

因此，您需要重新打开它，并在 error_db.php 文件中过滤 $error 消息。

即在error_db.php里面

```
 <? php if ($message === 'Database connection error')
         {
               echo $message;
         }
         else
         {
               echo "error - sorry";
         } ?> 
```

或类似的东西

# c# - uploading SIte On server

> ID：10169436
> 
> 赞同：1
> 
> 时间：2012-04-16T06:12:30.147
> 
> 标签：c#, asp.net, web-config

Im developing software with user module so in my web.config file there is

`<authentication mode="Forms">`

tag

but while uploading site im getting error : It is an error to use a section registered as

`allowDefinition='MachineToApplication' beyond application level.`

This error can be caused by a virtual directory not being configured as an application in IIS.

my web.config is at root of site please sugeest me something wht should i do??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:24:20.390

联系您尝试上传站点的服务器管理员，查看是否允许您使用正在使用的所有功能。

您可能需要

*   要求启用站点所需的功能或使用其他方式上传服务器支持的站点。
*   找到另一台支持您需要的所有功能的服务器
*   重新设计您的网站。

# list - How to add element to existing list without creating new variable in erlang?

> ID：10169441
> 
> 赞同：5
> 
> 时间：2012-04-16T06:13:22.770
> 
> 标签：list, foreach, erlang, append

I have a list contains some elements and now with the help of `lists:foreach` I am fetching some more records and I want to append each value to my existing list elements without creating new variable as doing in other languages with help of array.

Here is my sample code which I am getting:

```
exception error: no match of right hand side value [6,7,1]. 
```

Sample Code:

```
listappend() ->
    A = [1,2,3,4,5],
    B = [6,7],
    lists:foreach(fun (ListA) ->
        B = lists:append(B, [ListA])                       
        end, A),
    B. 
```

I want output like,

```
B = [6,7,1,2,3,4,5]. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T07:46:39.093

首先，这个特性已经存在，所以你不需要自己实现它。实际上，列表可以接受两个列表作为参数：

```
1> lists:append([1,2,3,4,5], [6,7]).
[1,2,3,4,5,6,7] 
```

这实际上实现为：

```
2> [1,2,3,4,5] ++ [6,7]. 
[1,2,3,4,5,6,7] 
```

请记住，++ 运算符将复制左操作数，因此此操作很容易导致二次复杂度。就是说，您可能想使用“cons”运算符构建列表（最终在计算结束时反转列表）：

```
3> [1|[2,3,4,5,6,7]].
[1,2,3,4,5,6,7] 
```

在任何情况下，您的函数中都可以有两个参数，它们是要附加的两个列表，而不是在函数体中定义它们。这样，每次调用`my_append/2`函数时 A 和 B 的值都会改变。

```
my_append(A, B) ->
  YOUR_CODE_GOES_HERE 
```

作为一个注释，关于你得到的实际错误，这是由于以下行：

```
B = lists:append(B, [ListA]) 
```

在每次迭代期间，您将一个新值`B`绑定到已绑定到该值的变量`[6,7]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-01T15:45:24.950

Erlang 中的变量是不可变的。这意味着一旦绑定变量，您就无法为其分配新值，这就是您收到“不匹配”错误的原因。旧值根本不匹配您尝试分配给变量的新值。相反，您可以使用例如 list:append 基于旧列表创建一个新列表。您可能应该从查看递归以及如何使用它来操作列表开始。

# html - CSS/HTML 加载网页时出现水平滚动条

> ID：10169446
> 
> 赞同：0
> 
> 时间：2012-04-16T06:13:59.007
> 
> 标签：html, css

所以我弄乱了我的网站 CSS，突然间总是有一个水平滚动条，我的导航栏并没有一直走到尽头，即使它的宽度设置为 100%。这是个常见的问题吗？我查看了我的 CSS 值，没有一个足以使页面需要扩展。

编辑：代码

```
html {
 height:100%; 
}

.content {
    width:269px;
    margin-left: auto;
    margin-right: auto;
    }
.home {
    width:100%;
    margin-left: auto;
    margin-right: auto;
    text-align:center;
    font: bold x-large verdana, arial, helvetica, sans-serif;
    padding-top:10px;
    }
.home a:visited {
    color: blue;
    }

.head {
    width:100%;
    text-align:center;
    padding: 15px; 
    font: bold x-large verdana, arial, helvetica, sans-serif;
    }

.foot {
    width:100%;
    text-align:center;
    padding: 20px; 
    font: normal medium verdana, arial, helvetica, sans-serif;
    }
body { 
    background-color: #FFF; 
    margin: 0px; 
    padding: 0px; 
    font: normal medium verdana, arial, helvetica, sans-serif;
}

div#navbar2 {
    height: 50px;
    width: 100%;
    border-top: solid #000 1px;
    border-bottom: solid #000 1px;
    background-color: #336699;
    text-align:center;
}
div#navbar2 ul {
    margin: 10px;
    padding: 0px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: x-large;
    color: #000;
    line-height: 30px;
    white-space: nowrap;
}
div#navbar2 li {
    list-style-type: none;
    display: inline;
}
div#navbar2 li a {
    text-decoration: none;
    padding: 11px 20px;
    color: #FFF;
}
div#navbar2 li a:link {
    color: #FFF:
}
div#navbar2 li a:visited {
    color: #FFF;
}
div#navbar2 li a:hover {
    color: #FFF;
    background-color: #3366FF;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:43:34.770

你的页脚有宽度：100%；但也有左右填充

你总是需要计算填充和宽度。

编辑：与您的 .head 相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:22:40.843

隐藏溢出使用的东西：溢出：隐藏；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T09:28:50.980

只需将此 css 属性添加到您的 body 元素样式中。

```
overflow-x:hidden 
```

它将删除水平滚动条并肯定会防止右侧出现额外的空白。

# filter - Gant：带过滤的复制

> ID：10169449
> 
> 赞同：0
> 
> 时间：2012-04-16T06:14:20.323
> 
> 标签：filter, copy, gant

我有一个包含 HTML 文档的“doc”目录，每个 HTML 都包含应用程序版本和 SVN 修订版的占位符：

`Welcome to the ... V${version} r${buildNumber}`

在我的 Grails/Gant 构建脚本中，我们创建了一个 doc 包，我们首先将 doc 目录复制到暂存区，然后再将其压缩。我现在想用这样的值替换这些占位符（假设变量`appVersion`并`svnRevision`正确设置：

```
ant.mkdir(dir: "${baseDocDir}")
ant.copy(todir: "${baseDocDir}") {
   fileset(dir: "./src/main/doc", includes: '*.html')
   filterset {
     filter ( token : 'version' , value: appVersion )
     filter ( token : 'buildNumber' , value : svnRevision )
   }
} 
```

副本有效，但不知何故过滤器不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:11:15.473

我现在可以自己回答这个问题了。以下代码有效：

```
ant.copy(todir: "${baseDocDir}") {
  filterset(begintoken: "\${", endtoken: "}") {
    filter(token: "version", value: appVersion)
    filter(token: "buildNumber", value: svnRevision)
  }
  fileset(dir: "./src/main/doc/", includes: "**/*.html")
} 
```

# mysql - Recommendations for tuning my.cnf / php.ini and Partitioning for a dataset with poor indices, a lack of PKs

> ID：10169452
> 
> 赞同：1
> 
> 时间：2012-04-16T06:14:52.600
> 
> 标签：mysql, query-optimization, indexing, my.cnf

We have been experimenting a while now with a particularly challenging and very large dataset we came upon with which there are very few ways I have found to create effective indices and primary keys (barring a wholly radical redesign of the database which is not an economical option at this point). I am looking for suggestions on how to alter either queries or table structure (partitioning etc) - long story short we end up with a lot of time consuming cartesian joins.

Here is the nitty gritty:

I have 3 key example tables here but sometimes join 2-3 similar to **result** to these:

If I indicated a (??) I am scratching my head as to (was this really the best way to set this up? please chime in)

**samples** - our main table of concern as it handles all our sample case demographics Fields:

*   sampleid (NOT PK but is UNIQUE ??) varchar (255) - most data are 10 digit integer (??), this is a unique ID through out the database for a certain report.
*   case - varchar (255) - again most are 10-12 digit integers (??), this is a second form of unique id, BUT a case value of 1000001 may have 1-20 sampleid associated with it in other tables (more later) to provide sequential/chronological information. (like a journal)

**adj_samples**

Contains expanded/annotated data beyond samples, is linked to samples by SampleID

Fields:

*   RecordID (PK) just an autonum keeping count on records (??).

*   SampleID linked to to the **samples** table in one sample id-> to many adj_case records -- as a sample may have several annotations notes, or other minuatie associated with it which is the purpose of the **adj_case** table.

*   ProbableID - int, just an internal code info code for us.

**result** Fields:

*   SampleID varchar 255 (again probably can be int)
*   result (from what I have seen to be limited to 100 len char fields, but field len set at 255 varchar)

Basically linked to adj_samples by SampleID one DISTINCT(SampleID) to many result, result fields indicating different levels of information more detailed than others, varchar 50-100 char in len (NOT 255 varchar?)

**Table Sizes**

```
samples 2,946,614 rows, MyISAM - 384MB
adj_samples 12,098,910 rows, myISAM, 1.3 GB
result 13,011,880 rows 428,508 KB 
```

A sample query would be to give us all of the case counts for a given internal ID (probableID)

```
SELECT r.result as result
, COUNT(DISTINCT p.`case`) as ResultCount
FROM Adj_Samples as
LEFT JOIN samples s
ON as.SampleID = s.SampleID
LEFT JOIN results r
ON as.SampleID = r.SampleID
WHERE ProbableID = '101'
AND ProbableID NOT IN #(subquery to table of banned codes we dont want to see)
GROUP BY r.result
ORDER BY COUNT(DISTINCT p.`case`) 
```

We sometimes have to join on several tables similar to **results** afterwards as there are other tables containing pertinent information - not uncommon to find 5-6 stacked up and it goes totally cartesian. We've indexed the best we could, but we are dealing with so many varchars that could be keys (results.result is an index but is 100-255 chars long!).

I wonder about the strange unused field in samples being the PK, seems to me SampleID ought to be the PK as they supposed to be unique but perhaps duplicates were introduced by error?

I am looking for something like a partioning strategy and just generally thinking outside the box to get this going. This information doesn't have much in the way of numeric codes and one-to-one tables to use as intermediate index tables.

So here is my my.cnf if it is at all helpful as we have major performance problems, the box is an 8 core intel dedicated centos5.5 with 16GB of RAM. I find that is often times has to write to disk on these large joins. Again first thing I think I should deal with is proper field sizes for the data we are storing, var 255 for a 10 digit integer seems like a waste

**Will excessive field lengths beyond what you really need affect performance via table size?**

Picture of db schema is also attached ![Demo table schema](../Images/de4ad89b7771474f19a02d15bb4bf3d7.png)

With explain: I really bite the bullet on the initial Adj_Samples in the explaination - it goes to Using where; Using temporary; Using Filesort then another where on result using where on 4 rows. all are of type ref.

**Here is some my.cnf:**

```
[mysqld]
socket          = /var/lib/mysql/mysql.sock
key_buffer = 2048MB
max_allowed_packet = 16MB
group_concat_max_len = 16MB
table_cache = 1024MB
sort_buffer_size = 4MB
read_buffer_size = 4MB
read_rnd_buffer_size = 16MB
myisam_sort_buffer_size = 128MB
thread_cache_size = 16
thread_concurrency = 16
query_cache_type = 1
query_cache_size = 512MB
tmpdir = /home/tmp
join_buffer_size = 4MB
max_heap_table_size = 3GB
tmp_table_size = 512MB
log-slow-queries
long_query_time = 20
no-auto-rehash
[isamchk]
key_buffer =1024M
sort_buffer_size = 256M
read_buffer = 2M
write_buffer = 2M

[myisamchk]
key_buffer = 4096M
sort_buffer_size = 256M
read_buffer = 2M
write_buffer = 2M

**This part strikes me as odd as I don't believe we are using any innodb tables**
innodb_data_home_dir = /var/lib/mysql/
innodb_data_file_path = ibdata1:2000M;ibdata2:10M:autoextend
innodb_log_group_home_dir = /var/lib/mysql/
innodb_log_arch_dir = /var/lib/mysql/
innodb_buffer_pool_size = 1024M
innodb_additional_mem_pool_size = 20M
**comment form whoever:** Set .._log_file_size to 25 % of buffer pool size
innodb_log_file_size = 100M
innodb_log_buffer_size = 8M
innodb_flush_log_at_trx_commit = 1
innodb_lock_wait_timeout = 50 
```

Thanks for all your help all, I am 6 months into learning mysql and have learned a lot but am looking forward to learning more from you all on this exercise.

**In bash: top I am seeing my mysql process hit 30% memory only but rack out at 200-400% of CPU is this normal or is my my.cnf screwy to top all this off?**

# php - 如何在 MySQL 中显示一列或另一列

> ID：10169457
> 
> 赞同：0
> 
> 时间：2012-04-16T06:15:11.617
> 
> 标签：php, mysql

在我的表中，我正在存储所有者的信息。所有者可以有姓名或国籍或两者兼有。

我必须查询数据库，它检查名称是否存在，然后取名字或国籍。

目前我正在使用以下查询：

```
SELECT id,name,nationality FROM owners 
```

没关系，但我想在单列下输入姓名或国籍。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T06:17:57.953

您所谓的“自定义列”的一般语法是`*expression* AS *column_name*`. 例如`1 AS one`，将为您提供一个名为“one”的列，其值始终为整数“1”。您需要做的是创建一个计算结果为`name`or的表达式`nationality`，并为该表达式指定一个列名。

假设您将空名称存储为`NULL`，您可以使用：

```
SELECT id, COALESCE(name, nationality) AS name_or_nationality FROM owners 
```

如果空名称存储为空字符串，则需要使用其他构造：

```
SELECT id, CASE WHEN name THEN name ELSE nationality END AS name_or_nationality FROM owners
SELECT id, IF(name, name, nationality) AS name_or_nationality FROM owners 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:18:26.640

您可以`if /else`在查询中使用简单条件。

如下所示：

```
SELECT id,if(name='',nationality,name) as ownerinfo FROM owners 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:18:46.457

如果 name 为 null，则此 SQL select 语句将返回一个值：

```
SELECT id,
       case when ifnull(name,'') = '' 
       then nationality 
       else name 
       end as name_equiv
FROM owners; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T06:24:03.523

假设您的值设置为 NULL 而不仅仅是空白：

```
SELECT IF(name IS NULL, nationality, name) AS name_or_nationality FROM owners 
```

有关 MySQL 中条件语句的解释：http: [//timmurphy.org/2009/08/13/inline-if-and-case-statements-in-mysql/](http://timmurphy.org/2009/08/13/inline-if-and-case-statements-in-mysql/)

# c - C 编程，导致未处理的 win32 异常，可能在 strlen 函数中。

> ID：10169458
> 
> 赞同：0
> 
> 时间：2012-04-16T06:15:29.973
> 
> 标签：c, visual-studio-2010, unhandled-exception

我在visual-studio 2010 中编写的c 程序抛出了一个未处理的win32 异常。

我认为它在一个 strlen 函数中，基于调试器输出，但我不确定。我正在阅读的文件是多行，带有 ; 用作分隔符，当我到达第一个链表的末尾时，错误似乎发生了，所以大概在 readFile 或 insertNode 中。

该文件的第一行类似于：

```
blah division;first department;second department 
```

任何帮助，将不胜感激。我在 StackOverflow 搜索的前几页中搜索了未处理的 win32 异常，它们似乎与访问冲突或内存溢出问题有关

```
#define _CRT_SECURE_NO_WARNINGS 1
#define FLUSH while (getchar () != '\n')
#define DEFAULT "dept.txt"
#define LENGTH 50
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>

//Structures
 typedef struct DEPT {
char * DeptName;
struct DEPT * link;  
} DEPT;

typedef struct {
char divisionName[LENGTH];
DEPT * first;
} DIVISION;

//Function Declarations
int ReadFile (DIVISION DivArr [], int * lastDiv);
FILE * getFileName (void); 
DEPT * insertNODE (DEPT * pList, char * string);

int main (void) {
//Local Declarations
//Create the array of the DIVISION Structure
DIVISION DivArr[20];
int i;
int lastDiv;
//Statements
//Read in File
if  (ReadFile (DivArr, &lastDiv)) {
    return 1;
}
for (i = 0; i < lastDiv; i++) {
    printf ("%s\n",DivArr[i].divisionName);
}
return 0;
}
/*==================================ReadFile==================================
Calls getFileName to get the file name to open, then reads the file's data into 
DivArr, parsing them appropriately, returning 1 if the file can't be opened */
int ReadFile (DIVISION DivArr [], int * lastDiv){
//Local Declarations
FILE * datafile;
char tempstring[300], *Ptoken;
int linenum = 0;
//Statements
datafile = getFileName();

//return from function with 1 if file can't be opened
//go through file line by line
while (fgets(tempstring, sizeof(tempstring), datafile)) {
    //tokenize string
    Ptoken = strtok (tempstring , ";");
    //first part of string is assigned to divisionName
    strncpy(DivArr[linenum].divisionName,  Ptoken, LENGTH - 1); 
    DivArr[linenum].first = NULL;

    //subsequent parts are assigned to linked list
    while(Ptoken) {
        Ptoken = strtok (NULL, ";\n");
        DivArr[linenum].first = insertNODE (DivArr[linenum].first, Ptoken);
    }
    linenum++;
}
*lastDiv = linenum;
fclose(datafile);
return 0;
} //ReadFile
/* =================================getFileName===============================
Gets input from the keyboard and if enter is pressed, returns default, otherwise                             returns specified filename */
FILE * getFileName (void){ 
//local declarations
int open = 1;
char read[LENGTH];
FILE * datafile = NULL;
//Statements
//open file
do{
    printf ("Enter a filename to open, or press enter for default:");
    fgets (read, LENGTH - 1, stdin);
    if ('\n' == read[0]) { 
        strncpy (read , DEFAULT, LENGTH - 1);
    }
    else
    read[strlen(read) - 1] = '\0';
    if((datafile  = fopen(read, "r")) == NULL)
        printf ("Error opening %s\n", read);
    else 
        open = 0;
} while (open == 1);
return datafile;
} //getFileName
/* =================================insertNODE================================
Gets the address of the beginning of the list for the structure, then
allocates memory for nodes, then allocates memory for string, then passes
string to allocated memory, then links node
*/
DEPT * insertNODE (DEPT * pList, char * string)
{
//Local Declarations
DEPT * pNew;
DEPT * pWalker = pList;
DEPT * pPre;
//Statements
if ( !(pNew = (DEPT*)malloc(sizeof(DEPT)))) 
        printf ("\nMemory overflow in insert\n"),
            exit (100);
printf ("size of string + null = %d\n",strlen(string) + 1);

    if(!(pNew->DeptName =(char*)calloc(strlen(string) + 1, sizeof(char))))
    {
        printf ("\nMemory overflow in string creation\n");
        exit (100);
    }
    strncpy(pNew->DeptName, string, strlen(string)); 
    printf("%s is %d long", pNew->DeptName, strlen(pNew->DeptName));

if (pWalker == NULL) //first node in list
{
    pNew->link = pList;
    pList = pNew;
}
else { 
    while (pWalker){
        pPre = pWalker;
        pWalker = pWalker->link;
    }
    pPre->link = pNew;
    pNew->link = NULL;
}
return pList;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:24:44.827

此循环可能是您的错误的原因：

```
//subsequent parts are assigned to linked list
while(Ptoken) {
    Ptoken = strtok (NULL, ";\n");
    DivArr[linenum].first = insertNODE (DivArr[linenum].first, Ptoken);
} 
```

`strtok`返回时会发生什么`NULL`？在和*之间* 添加一个检查。`strtok``insertNODE`

# jakarta-ee - Cannot call methods remotely

> ID：10169462
> 
> 赞同：2
> 
> 时间：2012-04-16T06:16:01.277
> 
> 标签：jakarta-ee, glassfish, rmi, jndi

Hello I am new to RMI and Glassfish and needs help with this.

My sample code:

```
package test.JNDITest;

import javax.ejb.Remote;
import java.io.Serializable;

@Remote
public interface Foo extends Serializable {

    public int testMethod(int number);
    public MyNewObject createMyNewObject();
}

package test.JNDITest;

import java.io.Serializable;

public interface MyNewObject extends Serializable{
    public void testMethod2();
}

package test.JNDITest;

import javax.ejb.Singleton;

@Singleton
public class FooImpl implements Foo{
    @Override
    public int testMethod(int number) {
        return number + 1000;
    }

    @Override
    public MyNewObject createMyNewObject() {
        return new MyNewObjectImpl();
    }
}

package test.JNDITest;

public class MyNewObjectImpl implements MyNewObject {

    @Override
    public void testMethod2() {
    }
} 
```

I package this and deploy on Glassfish 3\. Now I try to test it:

```
import test.JNDITest.Foo;
import test.JNDITest.MyNewObject;

import javax.naming.Context;
import javax.naming.InitialContext;
import java.util.Properties;

public class TestMath {
    public static void main(String[] args) throws Exception {

        Properties properties = new Properties();
        properties.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");

        Context context = new InitialContext(properties);

        Foo x = (Foo) context.lookup("java:global/JNDITest-ear-1.0-SNAPSHOT/JNDITest-ejb-1.0-SNAPSHOT/FooImpl!test.JNDITest.Foo");
        System.out.println(x.testMethod(42));

        MyNewObject x2 = x.createMyNewObject();
    }
} 
```

testMethod works fine but when I use createMyNewObject I have:

```
Exception in thread "main" javax.ejb.EJBException: java.rmi.RemoteException: CORBA NO_IMPLEMENT 1398079489 Maybe; nested exception is: 
    org.omg.CORBA.NO_IMPLEMENT: ----------BEGIN server-side stack trace----------
org.omg.CORBA.NO_IMPLEMENT: WARNING: IOP01000001: Missing local value implementation  vmcid: SUN  minor code: 1 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy134.missingLocalValueImpl(Unknown Source)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:113)
    at com.sun.org.omg.SendingContext._CodeBaseImplBase._invoke(_CodeBaseImplBase.java:99)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.ClassNotFoundException: test.JNDITest.MyNewObjectImpl (no security manager: RMI class loader disabled)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:375)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:165)
    at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:202)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:135)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClassM(JDKBridge.java:319)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClass(JDKBridge.java:228)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.loadClass(Util.java:640)
    at com.sun.corba.ee.impl.util.RepositoryId.getClassFromType(RepositoryId.java:577)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.getClassFromType(ValueHandlerImpl.java:373)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:105)
    ... 12 more

----------END server-side stack trace----------  vmcid: SUN  minor code: 1 completed: Maybe
    at test.JNDITest._Foo_Wrapper.createMyNewObject(test/JNDITest/_Foo_Wrapper.java)
    at TestMath.main(TestMath.java:19)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.rmi.RemoteException: CORBA NO_IMPLEMENT 1398079489 Maybe; nested exception is: 
    org.omg.CORBA.NO_IMPLEMENT: ----------BEGIN server-side stack trace----------
org.omg.CORBA.NO_IMPLEMENT: WARNING: IOP01000001: Missing local value implementation  vmcid: SUN  minor code: 1 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy134.missingLocalValueImpl(Unknown Source)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:113)
    at com.sun.org.omg.SendingContext._CodeBaseImplBase._invoke(_CodeBaseImplBase.java:99)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.ClassNotFoundException: test.JNDITest.MyNewObjectImpl (no security manager: RMI class loader disabled)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:375)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:165)
    at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:202)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:135)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClassM(JDKBridge.java:319)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClass(JDKBridge.java:228)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.loadClass(Util.java:640)
    at com.sun.corba.ee.impl.util.RepositoryId.getClassFromType(RepositoryId.java:577)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.getClassFromType(ValueHandlerImpl.java:373)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:105)
    ... 12 more

----------END server-side stack trace----------  vmcid: SUN  minor code: 1 completed: Maybe
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.mapSystemException(Util.java:311)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:213)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
    at test.JNDITest.__Foo_Remote_DynamicStub.createMyNewObject(test/JNDITest/__Foo_Remote_DynamicStub.java)
    ... 7 more
Caused by: org.omg.CORBA.NO_IMPLEMENT: ----------BEGIN server-side stack trace----------
org.omg.CORBA.NO_IMPLEMENT: WARNING: IOP01000001: Missing local value implementation  vmcid: SUN  minor code: 1 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy134.missingLocalValueImpl(Unknown Source)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:113)
    at com.sun.org.omg.SendingContext._CodeBaseImplBase._invoke(_CodeBaseImplBase.java:99)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.ClassNotFoundException: test.JNDITest.MyNewObjectImpl (no security manager: RMI class loader disabled)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:375)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:165)
    at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:202)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:135)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClassM(JDKBridge.java:319)
    at com.sun.corba.ee.impl.util.JDKBridge.loadClass(JDKBridge.java:228)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.loadClass(Util.java:640)
    at com.sun.corba.ee.impl.util.RepositoryId.getClassFromType(RepositoryId.java:577)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.getClassFromType(ValueHandlerImpl.java:373)
    at com.sun.corba.ee.impl.io.FVDCodeBaseImpl.implementation(FVDCodeBaseImpl.java:105)
    ... 12 more

----------END server-side stack trace----------  vmcid: SUN  minor code: 1 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.MessageBase.getSystemException(MessageBase.java:900)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.ReplyMessage_1_2.getSystemException(ReplyMessage_1_2.java:131)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.getSystemExceptionReply(CorbaMessageMediatorImpl.java:637)
    at com.sun.corba.ee.impl.protocol.CorbaClientRequestDispatcherImpl.processResponse(CorbaClientRequestDispatcherImpl.java:499)
    at com.sun.corba.ee.impl.protocol.CorbaClientRequestDispatcherImpl.marshalingComplete(CorbaClientRequestDispatcherImpl.java:373)
    at com.sun.corba.ee.impl.protocol.CorbaClientDelegateImpl.invoke(CorbaClientDelegateImpl.java:273)
    at org.omg.CORBA.portable.ObjectImpl._invoke(ObjectImpl.java:457)
    at com.sun.org.omg.SendingContext._CodeBaseStub.implementation(_CodeBaseStub.java:63)
    at com.sun.corba.ee.impl.encoding.CachedCodeBase.implementation(CachedCodeBase.java:119)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.getClassFromString(CDRInputStream_1_0.java:2292)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1095)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl$14.read(DynamicMethodMarshallerImpl.java:384)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl.readResult(DynamicMethodMarshallerImpl.java:483)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:203)
    ... 10 more 
```

This is my first post please be gentle :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:11:17.477

您的`MyNewObjectImpl`课程需要扩展`UnicastRemoteObject`，或以其他方式导出。目前它根本不是一个远程对象，因为它没有被导出，所以它被序列化到注册表和客户端，这根本不是你想要的。

# ruby-on-rails-3 - 网络::SMTPSyntaxError

> ID：10169465
> 
> 赞同：2
> 
> 时间：2012-04-16T06:16:17.000
> 
> 标签：ruby-on-rails-3, smtp

我正在使用 rails3.0.6 和 ruby​​ 1.8.7，我可以轻松地从我的应用程序开发模式发送电子邮件。但是昨晚我尝试向我的客户电子邮件发送邮件时看到一个新错误，该邮件与我的发票模型相关联。错误是：

```
Net::SMTPSyntaxError in InvoicesController#email_invoice 
501 < @invoice.account.accountable.email >: missing or malformed local part 
```

我的 email.rb 文件代码是：

```
 def send_invoice(invoice)
   email = '@invoice.account.accountable.email'
   mail(:to => email, :from => "support@thenextwave.in", :subject=>"Invoice, check it.") 
 end 
```

在我的`invoice controller`我做了：

```
def email_invoice
  @company = Company.find(User.find(session[:current_user_id]))
  @invoice = Invoice.find(params[:id])
  @invoice_line_items = @invoice.invoice_line_items
  @receipt_vouchers = @invoice.receipt_vouchers
  #email = @invoice.account.accountable.email
  Email.send_invoice(@invoice).deliver
  redirect_to invoice_path(@invoice)
  flash[:success] = 'Email has been sent successfully.'
end 
```

我仔细检查了这个错误，发现它是由于电子邮件地址错误或 SMTP 设置错误引起的，但我的 SMTP 设置没问题，因为我可以从我的应用程序发送电子邮件，但下面一行有问题：

```
@invoice.account.accountable.email 
```

任何帮助都会非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:54:42.633

我想出了一个解决方案，我`email.rb`在邮件中的文件中犯了错误：

```
def send_invoice(invoice)
  email = '@invoice.account.accountable.email'
  mail(:to => email, :from => "support@thenextwave.in", :subject=>"Invoice, check it.") 
end 
```

它应该是：

```
def send_invoice(invoice)
  email = invoice.account.accountable.email 
  mail(:to => email, :from => "support@thenextwave.in", :subject=>"Invoice, check it.") 
end 
```

现在我可以轻松发送电子邮件了..

# php - 如何在 kohana 3.1 中调用程序

> ID：10169472
> 
> 赞同：0
> 
> 时间：2012-04-16T06:16:36.920
> 
> 标签：php, mysql, kohana, producer

Kohana 是一个 php 框架。这是文档。如何在这个框架中调用过程。我已经搜索过这个问题并提出了问题。喜欢： [Kohana 3 中的 insert_id](https://stackoverflow.com/questions/4250621/insert-id-in-kohana-3)

这是我的代码：

```
$conn = Database::instance();       
$queryStr = "call sp_createUser('$nick_name','$email','$password','127.0.0.1')";
$query = DB::query(Database::SELECT, $queryStr);
$query->execute($conn); 
```

但有一些例外..

```
Database_Exception [ 1312 ]: PROCEDURE sp_createUser can't return a result set in the given context [ call sp_createUser('1','1','1','127.0.0.1') ] 
```

似乎db连接有问题..

我该如何解决它...寻求帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:30:03.667

在查询之前使用`$query->compile(Database::instance);`来检查您的查询字符串并找到它的错误。

还给我们您的 PROCEDURE 正文。它看起来像 PROCEDURE 以不兼容的格式将数据返回给 Kohana。

你的`$query->compile(Database::instance);`返回字符串是直接在mysql中执行的吗？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-16T06:42:21.183

尝试用 SELECT 替换呼叫...

```
$queryStr = "SELECT sp_createUser('$nick_name','$email','$password','127.0.0.1')"; 
```

# android - Android Parcelable 问题

> ID：10169479
> 
> 赞同：4
> 
> 时间：2012-04-16T06:17:31.633
> 
> 标签：android, object, parcelable

我必须将数据对象从一个活动传递到另一个活动。最好的方法是使用 Parcelable。数据对象有一些带有 setter 和 getter 方法的字段。在设置一些字段并将对象传递给另一个活动后，我观察到字段值与其他字段值互换。写入包裹和读取包裹的字段顺序是相同的。

```
public void writeToParcel(Parcel out, int flags) {
    out.writeInt(id);
    out.writeString(appNo);
    out.writeString(this.policyNo);
    out.writeInt((int)this.AppRcptDt.getTime());
    out.writeString(this.currentStatus);
    out.writeString(this.productCd);
    out.writeDouble(this.sumAssured);
    out.writeDouble(this.modalPremium);
    out.writeDouble(this.annualPremium);
    out.writeString(this.paymentMode);
    out.writeString(this.branchCd);
    out.writeString(this.branchName);
    out.writeString(this.insuredName);
    out.writeString(this.auraStatus);
    out.writeString(this.ownerName);
    out.writeString(this.agentCd);
    out.writeString(this.billingMode);
}

private ApplicationTrackerDO(Parcel in) {
    id=in.readInt();
    this.appNo = in.readString();
    this.policyNo = in.readString();
    this.AppRcptDt = new Date(in.readLong());
    this.currentStatus = in.readString();
    this.productCd = in.readString();
    this.sumAssured = in.readDouble();
    this.modalPremium = in.readDouble();
    this.annualPremium = in.readDouble();
    this.paymentMode = in.readString();
    this.branchCd = in.readString();
    this.branchName = in.readString();
    this.insuredName = in.readString();
    this.auraStatus = in.readString();
    this.ownerName = in.readString();
    this.agentCd = in.readString();
    this.billingMode = in.readString();
} 
```

![字段值的差异](../Images/e7b6e22109ea82a2208bde463b3d733a.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T06:21:27.113

不同的不是顺序而是数据类型，从前 4 行开始，你写的是 int、string、string、int，然后你读的是 int、string、string、long。我没有进一步检查，您必须匹配读写操作的顺序和数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:21:50.327

你正在写**int**

```
out.writeInt((int)this.AppRcptDt.getTime()); 
```

但是阅读**时间长**

```
this.AppRcptDt = new Date(in.readLong()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T14:02:57.080

我为日期对象提供 null 的解决方案

```
@Override
    public void writeToParcel ( Parcel dest, int flags ) {
        dest.writeInt((birthday != null) ? 1 : 0); // is birthday set?
        dest.writeLong((birthday != null) ? birthday.getTime() : 0);
    }

    public void readFromParcel ( Parcel in ) {
        if(in.readInt() == 1) {
            birthday = new Date(in.readLong());
        } else {
            in.readLong(); // ignore stored value
            birthday = null;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T16:35:23.857

java.util.Date 实现可序列化：

```
public class Date implements Serializable, Cloneable, Comparable<Date> {

    private static final long serialVersionUID = 7523967970034938905L;

    // Used by parse()
    private static final int CREATION_YEAR = new Date().getYear();

    private transient long milliseconds; 
```

采用：

```
@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeSerializable(myDateField);
}
private MyClass(Parcel in) {
    myDateField = (Date)in.readSerializable();
} 
```

# android - 应用小部件安卓

> ID：10169483
> 
> 赞同：1
> 
> 时间：2012-04-16T06:17:44.163
> 
> 标签：android, android-appwidget, appwidgetprovider

我创建了一个应用小部件演示，我想知道的是：是否可以将其设置在主屏幕的顶部或底部？

![在此处输入图像描述](../Images/63d8386be04d518a1491fbb44c3bc1da.png)

设置为底部时，无法单击 Android 应用程序菜单拨号器快捷方式和联系人。如果屏幕是空的，那么它被设置为顶部，但是底部呢？

如果屏幕不是空的（假设顶部有谷歌搜索标签栏）并且我想在谷歌搜索栏上方显示我的小部件？

有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:08:32.500

你不能以编程方式做到这一点。用户决定将您的小部件放在哪里，以及是否将其放在屏幕上。您只需提供小部件尺寸，启动器将允许用户将您的小部件放在合适的位置。

# c# - htmlagilitypack 和动态内容问题

> ID：10169484
> 
> 赞同：15
> 
> 时间：2012-04-16T06:17:45.777
> 
> 标签：c#, html-agility-pack, dynamic-content

我想创建一个 web __scraper__ 应用程序，我想用 webbrowser 控件、htmlagilitypack 和 xpath 来完成它。

现在我设法创建了 xpath 生成器（为此我使用了 webbrowser），它工作正常，但有时我无法动态（通过 javascript 或 ajax）获取生成的内容。我还发现，当 webbrowser 控件（实际上是 IE 浏览器）生成一些额外的标签（如“tbody”）时，htmlagilitypack `htmlWeb.Load(webBrowser.DocumentStream);` 又没有看到它。

另一个注意事项。我发现以下代码实际上获取了当前网页源，但我无法提供 htmlagilitypack `(mshtml.IHTMLDocument3)webBrowser.Document.DomDocument;`

你能帮我吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-22T14:58:58.147

我只是花了几个小时试图让 HtmlAgilityPack 从网页呈现一些 ajax 动态内容，我从一个无用的帖子转到另一个帖子，直到找到这个。

答案隐藏在最初帖子下的评论中，我想我应该把它理顺。

这是我最初使用但不起作用的方法：

```
private void LoadTraditionalWay(String url)
{
    WebRequest myWebRequest = WebRequest.Create(url);
    WebResponse myWebResponse = myWebRequest.GetResponse();
    Stream ReceiveStream = myWebResponse.GetResponseStream();
    Encoding encode = System.Text.Encoding.GetEncoding("utf-8");
    TextReader reader = new StreamReader(ReceiveStream, encode);
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.Load(reader);
    reader.Close();
} 
```

WebRequest 不会呈现或执行呈现缺失内容的 ajax 查询。

这是有效的解决方案：

```
private void LoadHtmlWithBrowser(String url)
{
    webBrowser1.ScriptErrorsSuppressed = true;
    webBrowser1.Navigate(url);

    waitTillLoad(this.webBrowser1);

    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    var documentAsIHtmlDocument3 = (mshtml.IHTMLDocument3)webBrowser1.Document.DomDocument; 
    StringReader sr = new StringReader(documentAsIHtmlDocument3.documentElement.outerHTML); 
    doc.Load(sr);
}

private void waitTillLoad(WebBrowser webBrControl)
{
    WebBrowserReadyState loadStatus;
    int waittime = 100000;
    int counter = 0;
    while (true)
    {
        loadStatus = webBrControl.ReadyState;
        Application.DoEvents();
        if ((counter > waittime) || (loadStatus == WebBrowserReadyState.Uninitialized) || (loadStatus == WebBrowserReadyState.Loading) || (loadStatus == WebBrowserReadyState.Interactive))
        {
            break;
        }
        counter++;
    }

    counter = 0;
    while (true)
    {
        loadStatus = webBrControl.ReadyState;
        Application.DoEvents();
        if (loadStatus == WebBrowserReadyState.Complete && webBrControl.IsBusy != true)
        {
            break;
        }
        counter++;
    }
} 
```

这个想法是使用能够呈现 ajax 内容的 WebBrowser 加载，然后等到页面完全呈现，然后再使用 Microsoft.mshtml 库将 HTML 重新解析到敏捷包中。

这是我可以访问动态数据的唯一方法。

希望它可以帮助某人

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-06T17:39:27.467

[Selenium](http://james-prescott.com/2014/02/01/tutorial-setting-up-selenium-webdriver-visual-studio/)能解决问题吗？据我所知，它创建了浏览器引擎的实例......有点并且应该允许执行 js 并允许您获得操作 DOM 的结果。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2013-03-12T08:48:33.970

使用 HTML Agility 打包文件的以下方法。

```
htmlAgilityPackDocument.LoadHtml(this.browser.DocumentText); 
```

或者

```
if (this.browser.Document.GetElementsByTagName("html")[0] != null)
    _htmlAgilityPackDocument.LoadHtml(this.browser.Document.GetElementsByTagName("html")[0].OuterHtml); 
```

# wordpress - 自定义帖子类型的菜单图像

> ID：10169491
> 
> 赞同：1
> 
> 时间：2012-04-16T06:18:29.700
> 
> 标签：wordpress, custom-post-type

我正在使用自定义帖子类型。我想为帖子类型使用自定义菜单图像。我知道**'menu_icon' => ''**应该可以工作，但无法识别应该如何指定图像路径。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:20:18.717

最好给出图像的完整路径。像这样的东西

```
'menu_icon' => get_bloginfo('template_directory') . '/images/portfolio-icon.png' 
```

**编辑**：如果要包含插件目录中的图像，则可以使用[plugin_url()](http://codex.wordpress.org/Function_Reference/plugins_url)函数。这也将使其与 WPMU 兼容。

```
'menu_icon' => plugins_url('path/to/image',  __FILE__); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T13:21:34.003

如果要添加的图像位于主题目录中，则其他方法是：

```
'menu_icon' => get_template_directory_uri() . '/images/your_custom_icon.png', 
```

# linux - 如何使用 linux 在 svnserver 中添加文件

> ID：10169495
> 
> 赞同：0
> 
> 时间：2012-04-16T06:18:55.003
> 
> 标签：linux, svn, tortoisesvn

我正在使用 svnadmin create svndump 创建一个 svnrepository

在 svnsump 中，我正在创建一个名为 trunk 的文件夹并导入一些现有文件。

svn import /home/somefiles/ file:///home/svndump/trunk/

但是当我看到主干文件夹时，它不包含从 somefiles 文件夹导入的任何文件夹。

但是当我使用 svn log file:///home/svnadump/trunk/ 查看文件时，我可以看到这些文件。

似乎文件正在复制，但它们没有添加到存储库中。

如何将文件添加到存储库？？？

请帮我..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:21:41.223

您应该使用[svn ls](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.list.html)来查看存储库的内容。

要在导入后将文件添加到存储库，标准方法是签出副本，使用“svn add”添加一些文件，然后将它们提交到存储库。

# java - 如何减少数据库连接？

> ID：10169497
> 
> 赞同：0
> 
> 时间：2012-04-16T06:19:03.003
> 
> 标签：java, sql-server-2005, jdbc, jndi, connection-pooling

嗨，任何人都可以向我解释如何减少数据库连接。我在 java 和 jdbc 中使用连接池概念开发了一个应用程序。但在我的应用程序中，我只为这个开放的 200 连接提供 MaxActive=200 。但在我的情况下，一旦应用程序启动，它将打开 1400 个数据库连接..请帮助我如何处理。

```
 <Resource
            name="jdbc/tm4u"
            auth="Container"
            type="javax.sql.DataSource"
            driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
            url="jdbc:sqlserver://192.168.1.230:1433;databaseName=XX;User=abc;Password=****;selectMethod=cursor"
        username="abc"
        password="******"
                maxActive="200"
      maxWait ="100"

       maxIdle="10"
            /> 
```

上面的代码是 JNDI 配置文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:01:56.030

基本上你需要在连接对象上调用 close 方法。

1.  最好的答案是打开一次连接并保存 Connection 对象。当您第一次从驱动程序管理器 (DriverManager.getConnection) 或从 JDBC 驱动程序特定类 (SQLConnect.getConnection()) 获取 Connection 对象时，您将打开连接。如有必要，将此对象保存在类中的实例变量或静态变量中。在结束应用程序之前关闭连接（connection.close()）。

2.  使用单例模式实现类的静态实例。在单例的构造函数中打开连接，并将其保存为实例变量。每当您需要连接时，请在单例对象上调用方法。在单例的析构函数中调用 connection.close() 方法。

3.  每当您打开连接时，请在完成所有语句后调用 close() 。

# asp.net - 为什么我们在 WCF 中使用“代码隐藏”？

> ID：10169498
> 
> 赞同：0
> 
> 时间：2012-04-16T06:19:09.447
> 
> 标签：asp.net, wcf, code-behind, codebeside

首先，CodeBehind和CodeBeside的优势是什么？我在互联网上搜索，发现我们在创建 WCF 时在网站和 ASP 中使用 Code Beside 和 Code Behind。这背后的原因是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:01:09.487

因为 WCF 服务不是网页。在 ASP.NET WebForms 中，您可以在网页中定义标记以及与标记相关的代码。当页面被编译时，与标记相关的初始化代码被生成并与您的代码合并以形成处理网页的单个类。

在 WCF 中，“标记”只包含声明。它只是 IIS 处理的支持文件，它将告诉 Web 服务器必须使用哪个服务工厂和服务类型来处理传入呼叫。来自标记的信息与您的服务类无关，并且没有代码合并 - 服务类背后的代码是服务的完整实现，即使没有标记文件也可以使用，这对于网页旁边的代码是不正确的。

# java - Struts2 和 Spring3 中的异常处理

> ID：10169499
> 
> 赞同：1
> 
> 时间：2012-04-16T06:19:11.563
> 
> 标签：java, spring, struts2

我是这些技术的新手，我正在使用以下框架来开发应用程序：

*   支柱 2
*   春天 3

我在 Spring 中实现所有业务逻辑，因此如果发生任何异常，我将向最终用户显示自定义消息。

您能否解释一下如何在这些技术中开发异常处理功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:39:41.760

根据我的理解，最好的方法是为您的业务层定义一些预定义的异常并将这些异常抛出回您的操作类。

S2 提供了许多方法来处理这些异常并将它们显示给用户，这里是其中的几个

## 全局异常处理

使用 Struts 2 框架，您可以在 struts.xml 中指定框架应如何处理未捕获的异常。处理逻辑可以应用于所有动作（全局异常处理）或特定动作。我们首先讨论如何启用全局异常处理。

```
 <global-exception-mappings>
    <exception-mapping exception="org.apache.struts.register.exceptions.SecurityBreachException" result="securityerror" />
     <exception-mapping exception="java.lang.Exception" result="error" />
   </global-exception-mappings>

  <global-results>
        <result name="securityerror">/securityerror.jsp</result>
    <result name="error">/error.jsp</result>
   </global-results> 
```

即使您想要精细级别的控制，您也可以在每个操作基础上自由配置异常处理

```
 <action name="actionspecificexception" class="org.apache.struts.register.action.Register" method="throwSecurityException">
     <exception-mapping exception="org.apache.struts.register.exceptions.SecurityBreachException" 
          result="login" />
      <result>/register.jsp</result>
      <result name="login">/login.jsp</result>
   </action> 
```

这是您的偏好，您希望如何配置它们。有关详细信息，请参阅文档

*   [异常处理](http://struts.apache.org/2.3.1/docs/exception-handling.html)

您甚至可以选择从值堆栈访问异常详细信息。默认情况下，`ExceptionMappingInterceptor`将以下值添加到值堆栈：

*   exception 异常对象本身
*   exceptionStack 来自堆栈跟踪的值

这是在 JSP 中访问这些对象的方法

```
 <s:property value="%{exception.message}"/>
 <s:property value="%{exceptionStack}"/> 
```

有关详细信息，请参阅详细信息

*   [异常配置](http://struts.apache.org/2.2.3/docs/exception-configuration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:34:14.737

你可以选择那些

[支柱 2](http://struts.apache.org/2.3.1/docs/exception-handling.html)

[春天 3](http://java.dzone.com/articles/spring-3-mvc-exception)

# python - 使用 Python/urllib 通过“siteminder”身份验证访问网站？

> ID：10169500
> 
> 赞同：3
> 
> 时间：2012-04-16T06:19:16.297
> 
> 标签：python, url, web, siteminder

我正在尝试使用 Python 访问和解析工作中的网站。站点授权是通过 siteminder 完成的，因此通常的 urllib/urllib2 用户密码不起作用。有谁知道如何做到这一点？谢谢诺姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-06T22:32:07.067

只是这样做了 - 我知道它是一个老歌 - 但如果其他人想要这样做 - 使用请求库。我之前在 C# 中做过这个，并且使用了大量的代码——但这就是登录我的公司站点管理员系统所需要的全部内容——很好。request.session() 对象将保留重定向、标头和 cookie - 所以您需要担心的只是发布登录表单。我确信变量在您的环境中会有所不同，但过程将是相同的。

output.text 将是您要解析的目标页面的正文，然后您可以使用 xpath 或其他任何内容。

```
import requests
r = requests.session()
postUrl = "https://loginUrl"
params = {  'USER': 'user',
            'PASSWORD': 'pass',
            'SMENC': 'ISO-8859-1',
            'SMLOCALE': 'US-EN',
            'target': '/redir.shtml?GOTO=redirecturl}',
            'smauthreason': '0' }

r.post(postUrl, data=params)

getUrl = "http://urlFromBehindLogInYouWantDataFrom"
output = r.get(getUrl)
print(output.text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:01:49.720

首先，您应该了解通过站点管理员进行身份验证时发生的情况。也许有它的文档，但如果没有的话，也不难找到：Chrome 或 Safari 的开发者工具中的网络选项卡包含您需要的所有信息：每个网络请求的 HTTP 标头和 Cookie。[Firebug](http://getfirebug.com/)也可以为您提供。

一旦您清楚地了解身份验证过程的每个步骤发生了什么，只需在脚本中复制相同的行为即可。[urllib2](http://docs.python.org/library/urllib2.html)支持[cookie](http://docs.python.org/library/cookielib.html#cookielib.CookieJar)和[headers](http://docs.python.org/library/urllib2.html#urllib2.Request.add_header)。如果你需要一些 urllib2 没有提供的东西，[PycURL](http://pycurl.sourceforge.net/)可能会做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T07:23:42.890

同意 Martin - 您只需复制浏览器的功能即可。一旦成功通过身份验证，Siteminder 将向您传递一个令牌。我也必须这样做，一旦找到好方法就会发布。

# asp.net - 定位 .NET 控件

> ID：10169503
> 
> 赞同：2
> 
> 时间：2012-04-16T06:19:55.453
> 
> 标签：asp.net, .net, css, positioning, asp.net-controls

我希望我的标签“The Top Row”位于我的 gridview 的第一行附近，如下面的黄色所示，

![在此处输入图像描述](../Images/9f537cbdd4607abaadf3b85abcd9daea.png)

我尝试绝对定位标签，但显示时，它有问题。做这个的最好方式是什么 ？（右浮动就像左对齐一样工作，这没用，我试过显示块但也找不到方法）

这是一个基本问题，但找不到解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T19:10:04.137

您只需要同时`float: left`添加`<asp:GridView />`和`<asp:Label />`：

## HTML 标记：

```
<asp:GridView ID="GridView1" runat="server" CellPadding="10" 
    ForeColor="#333333" style="float: left;" AutoGenerateColumns="False">
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <Columns>
        <asp:ButtonField ButtonType="Button" Text="Info File" />
        <asp:ButtonField ButtonType="Button" Text="Get Contact" />
        <asp:BoundField DataField="Column0" HeaderText="Column0" />
        <asp:BoundField DataField="Column1" HeaderText="Column1" />
        <asp:BoundField DataField="Column2" HeaderText="Column2" />
    </Columns>
    <EditRowStyle BackColor="#999999" />
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#E9E7E2" />
    <SortedAscendingHeaderStyle BackColor="#506C8C" />
    <SortedDescendingCellStyle BackColor="#FFFDF8" />
    <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
</asp:GridView>
<asp:Label ID="TopRowLabel" runat="server" style="float: left;" /> 
```

## 输出：

![在此处输入图像描述](../Images/1e01733ea6e844807f443cbfc5f15de9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:26:05.090

也许您可以尝试添加样式`float: left`或类似于网格的东西？

还尝试尝试`display: block`显示其他值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:37:24.560

尝试使用 Jquery 查找 Header Row 并可能使用 .Append （附加元素）。

如果标签/元素的值来自服务器，那么您可以在后面的代码中设置隐藏变量（runat="server"），然后再次使用 Jquery 设置标签的值（可能呈现为跨度）

# android - 如何在 android 的 videoview url 中播放 RTMP 直播

> ID：10169505
> 
> 赞同：1
> 
> 时间：2012-04-16T06:20:01.910
> 
> 标签：android, streaming

我正在尝试在 android 中播放 rtmp 直播 url。怎么能这样。我知道 rtsp，但我该如何处理 rtmp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:47:20.007

使用 Webview 播放该类型的视频，因为该类型的视频无法在 mediaplayer 中播放。

# c++ - 如何使用 Win32 句柄在 C++ 中获取文件名？

> ID：10169507
> 
> 赞同：-2
> 
> 时间：2012-04-16T06:20:08.067
> 
> 标签：c++, file, winapi

我正在尝试使用 C++ 中的 Win32 句柄获取文件的名称。

我还有两个担心，文件可能是空的（打开文件可能不起作用），并且我不能使用 Windows Vista 及更高版本支持的所有花哨的功能（例如 GetFinalPathNameByHandle）。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:50:08.747

我不知道win32，但我知道sysinternals 进程资源管理器。Google 提出了一个开源替代方案：http: [//processhacker.sourceforge.net/](http://processhacker.sourceforge.net/)

也许研究该代码将使您能够做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:52:55.313

对于 XP+，您可以映射文件然后调用`GetMappedFileName`它将返回名称（尽管不是目录）。请参阅[从文件句柄获取文件名](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366789%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T23:30:59.527

`GetMappedFilename()`尽管在 MSDN 中推荐，但这并不是最好的解决方案。

我已经发布了完全符合您想要复制和粘贴的代码： [How to get name associated with open HANDLE](https://stackoverflow.com/questions/65170/how-to-get-name-associated-with-open-handle/18792477#18792477)

# ios - 以编程方式注册星号

> ID：10169510
> 
> 赞同：0
> 
> 时间：2012-04-16T06:20:31.680
> 
> 标签：ios, asterisk

我正在尝试在 iPhone 应用程序中为 VOIP 实现 Asterisk 服务器。

我可以通过手动注册用户，但我想以编程方式做同样的事情。我不确定，但可能有一些想法，比如通过 HTTP 请求发送。

如果您有任何想法或指针，请与我分享。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:35:32.837

我认为您正在寻找的东西称为*SIP 客户端*。您在 iPhone 上安装客户端，它将注册到您的 SIP 服务器（让它成为 Asterix 或其他任何东西）。然后，您可以在注册的客户端之间进行 VoIP 呼叫、发送即时消息、交换文件，甚至通过 SIP 实现一些自定义协议以交换其他类型的数据。

iPhone 有很多 SIP 客户端应用程序，甚至还有几个*SIP 堆栈*，它是一个框架，允许您通过其 API 调用构建自己的 SIP 客户端应用程序，因此您可以完全控制一切。其中最成熟的 iPhone 支持之一是[pjsip](http://www.pjsip.org/)。查看他们的网站，看看这是否是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:51:01.580

这很难，因为必须修改拨号计划才能添加 sip 帐户。但是您可以编写一个 Web 服务，从您的手机中读取带有扩展名的文本文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T06:59:22.120

从您的描述中无法完全清楚您到底想要什么，但可能这个会有所帮助

[http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out](http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out)

# css - 如何使用 HTML 锚标记进入其他文件中的 DIV

> ID：10169515
> 
> 赞同：-1
> 
> 时间：2012-04-16T06:21:26.413
> 
> 标签：css, html, anchor

我想使用 Anchor 标签在另一个文件中使用不同的 DIV。喜欢->

```
 Click <a href = "Different_File.aspx/#thisDiv"> Here to go to another div </a>

     And Different_File.aspx will have some div as <div id = "thisDiv"> </div> 
```

我展示的方式不起作用:(有什么问题？？我知道它很简单，但我做不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:34:54.330

嗨检查现场演示

[http://jsfiddle.net/rohitazad/WNzfT/4/](http://jsfiddle.net/rohitazad/WNzfT/4/)

如果您将下一个锚链接放在您的网页中

比

像这样

```
<a href="http://jsfiddle.net/rohitazad/WNzfT/4/#ok"> click here </a> 
```

# arrays - 在 Clojure 中优化数组突变

> ID：10169518
> 
> 赞同：6
> 
> 时间：2012-04-16T06:21:29.470
> 
> 标签：arrays, optimization, clojure

在阅读了一些关于该主题的博客文章后，我发现在 Clojure 中对数组进行变异是这样的：

```
(defn m [xs ys] 
  (dotimes [i (count xs)] 
    (aset #^ints ys (int i) 
    (int (* (int 3) (int (aget #^ints xs (int i)))))))) 
```

在哪里`(def xs (into-array Integer/TYPE (range 1000000)))`和`(def ys (into-array Integer/TYPE (range 1000000)))`

根据 Criterium，平均需要 14 毫秒，而 Java 也是如此，

```
public static int[] m(int[] x, int[] y)
{
  for(int i=0; i<x.length; i++)
    y[i] = 3*x[i];
  return y;
} 
```

平均需要800us。**

我是否正在尽我所能让事情进展得更快，我还有什么可以沿着优化路径走下去的吗？

** 我使用 Criterium`(report-result (bench (m xs ys )) :verbose)`和`(report-result (bench (. Test m xs ys)) :verbose)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T08:04:45.873

如果你想要速度，你需要进入原始世界，在完成之前不要离开它。从盒装开始`Integer i`，然后在每个使用站点将其转换为原语是没有用的。也许您可以`dotimes`制作整数（类型提示 的声明`i`），但不确定。我所知道的是一个`loop-recur`带有循环变量原始初始化器的构造：`(loop [i (int 0)] ... (recur (unchecked-inc i))`. 此外，在您的示例中，您有`(int 3)`. 您需要`let`提前这样做，以免在每次迭代中重复拆箱。

顺便说一句，您可以使用`(int-array (range 1000000))`创建初始化数组并仅`(int-array 1000000)`用于空数组。

**更新**

从 Clojure 1.3 开始，由于对原语的支持得到了增强，我上面写的大部分内容都不再适用了。`dotimes`已经使用了原始算术，因此您需要编写的所有内容才能获得完整的性能

```
(dotimes [i (alength ^ints xs)] 
  (aset ^ints ys i (unchecked-multiply (aget ^ints xs i) 3) 
```

基本上，不需要`int`构造函数，并且使用`unchecked-multiply`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T15:39:40.047

在 Clojure 1.3 上试试这个：

```
(set! *unchecked-math* true)

(defn m [^longs xs ^longs ys]
  (dotimes [i (count xs)]
    (aset ys i
      (* 3 (aget xs i))))) 
```

# android - 如果视图超出窗口，如何强制启动动画

> ID：10169524
> 
> 赞同：2
> 
> 时间：2012-04-16T06:22:01.100
> 
> 标签：android, android-animation

我有一个带有多个视图的滚动视图，并且只能扩展一个视图。当另一个视图展开时，已经展开的视图会缩小。但是屏幕上不可见项目的动画仅在视图可见时才开始。

那么有没有办法强制启动动画？

如果视图在顶部并且底部视图被扩展，则设置不可见项目的高度会导致滚动 Y 的不必要的跳跃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:36:01.237

我遇到了完全相同的问题并且很高兴，我在 SO 上找到了这个问题，却发现没有人回答它。我环顾四周寻找解决方案，但没有真正找到。所以我最后做的是检查项目是否在可见区域（对我来说很容易，因为我使用了自定义寻呼机）并将不可见项目的动画时间设置为 0。对我有用，但我不知道这是否会为您工作/工作。

PS：我会发表评论而不是答案，但我认为我还不允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:42:37.820

由于没有人知道这一点，我必须假设这无法完成。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-08-06T07:54:28.547

您只需通过 invalidate() 方法使不可见视图无效。

# android - 禁用 CoverFlow 滚动直到弹出窗口出现

> ID：10169527
> 
> 赞同：0
> 
> 时间：2012-04-16T06:22:16.030
> 
> 标签：android, coverflow

我在我的项目中使用封面流，而在按钮单击上显示封面流时，我正在显示弹出窗口。

（Android 中的 Coverflow 是一种在触摸时滚动显示图像的样式，就像我们通常在媒体播放器中看到的那样，可以选择；它基于 Android Gallery 小部件，并以相同的方式使用 ViewAdapter。我的主要编写此coverflow小部件时的目标是使用标准的Android 2D库参考创建一个易于重用的组件：- [http://www.inter-fuser.com/2010/01/android-coverflow-widget.html](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)）

s - 现在当显示弹出窗口时，我不希望我的coverflow在触摸时滚动/导航，即我想禁用coverflow，直到显示弹出窗口

*   我已经尝试了下面的所有代码，但是禁用coverflow并没有帮助。

    ```
     coverFlow.clearFocus();
            Popup.setFocusable(true);
            coverFlow.setClickable(false);
            coverFlow.setFocusable(false);
            coverFlow.setEnabled(false);
            coverFlow.setSelected(false); 
    ```

    任何人都可以在这件事上帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:38:20.270

我不知道您使用的是什么 CoverFlow 源代码。但是你可以自定义它。

扩展 CoverFlow（我认为它已经扩展了 Gallery），如果您不希望 CoverFlow 滚动，则使用 return false 覆盖 onTouchEvent 和 onInterceptTouchEvent 方法，并添加设置此属性的方法。

代码可能看起来像：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onTouchEvent(event);
    }

    return false;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onInterceptTouchEvent(event);
    }

    return false;
}

public void setScrollEnabled(boolean enabled) {
    this.enabled = enabled;
} 
```

然后你可以通过使用`setScrollEnabled`方法设置CoverFlow滚动或不滚动

# entity-framework-4.1 - .包括部分类的派生属性？

> ID：10169528
> 
> 赞同：1
> 
> 时间：2012-04-16T06:22:19.123
> 
> 标签：entity-framework-4.1, dbcontext

我有一个返回派生属性的部分类：

```
public partial class Consultation
{
    public string Name
    {
        get
        {
            string n = string.Empty;
            n += employee.FirstName;
            n += " " + employee.LastName;
            return n;
        }
    } 
} 
```

在业务逻辑层函数中，我返回这些实体的列表：

```
using (var Context = new MMEntities())
{

   var cons = Context.Consultations;
   return cons.ToList();

} 
```

在 .aspx 页面中，我有一个使用实体的派生属性的数据绑定控件：

```
DataTextField="Name" 
```

但是，在编译时我得到：

```
The ObjectContext instance has been disposed and can no longer be used for operations that require a connection. 
```

我了解我的 ObjectContext 已被处置，因为我已将其包装在“使用”语句中。

我的问题是：如何在返回方法中包含（急切加载）派生的 Name 属性？.Include 方法仅适用于导航属性，我不想拥有长寿命的 ObjectContexts。

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:44:04.003

您不急切该`Name`属性，但您必须急切加载其依赖的导航属性以使其工作。因此，如果`employee`在您的示例中是导航属性，您必须预先加载它，否则您的`Name`属性将依赖于延迟加载和生活上下文。

# python - 在函数内的函数中使用 lambda

> ID：10169532
> 
> 赞同：0
> 
> 时间：2012-04-16T06:22:42.457
> 
> 标签：python, python-3.x

我有一个任务要求我修改一些代码。原来的功能是这样的：

```
def selectivelyCopy(inputFile,outputFile,predicate):
  linesCopied = 0
  for line in inputFile:
    if predicate(line):#test the line with the predicate
        outputFile.write(line)
        linesCopied+=1
inputFile.close()
return linesCopied 
```

现在我想添加参数*transform*，一个将字符串作为参数的函数，并根据用户指定的转换返回一个字符串。如果函数调用中省略了*转换，则输入文件中的行将保持不变。*

这是我到目前为止所拥有的：

```
def selectivelyCopy2(inputFile,outputFile,predicate, transform):
    def transform(x = lambda x: x):
        return(x) 

    linesCopied = 0
    for line in inputFile:
        if predicate(line): #test the line with the predicate
            outputFile.write(line)
            linesCopied+=1
    inputFile.close()
    return linesCopied 
```

我不知道从哪里开始。我想我想读取输入文件行，但写转换后的行......还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:37:52.280

*现在我想添加参数transform，一个函数，它的参数是一个字符串，并根据用户指定的转换返回一个字符串。如果函数调用中省略了转换，则输入文件中的行将保持不变。*

这对我来说听起来很简单：你应该接受一个名为 的函数参数`transform`，如果提供了它，你就调用它。如果没有提供，您要么不调用它，要么调用一个简单的函数，该函数返回其输入不变。

我建议您使用`None`for的默认参数`transform`。然后检查是否`transform is None`。如果不是，则尝试调用它，传递当前行，并将输出收集为新的当前行。如果`transform is None`那么您只需将当前行保持不变。

或者，您可以声明这个简单的函数：

```
def nop(x):
    return x 
```

然后指定参数的默认值`transform`是函数`nop`。哪个更好，测试`None`和调用什么，或者有一个明智的无操作默认函数并总是调用它？我认为这主要是个人喜好问题。测试`None`避免了函数调用的开销，因此它可能会稍微快一些，但无论哪种方式都可能没什么大不了的。

没有理由声明一个名为 的私有函数`transform`，这样做会使您无法检查参数`transform`是什么。

# django - 我应该如何为 django-haystack 建模我的数据（多类别、多层次）？

> ID：10169533
> 
> 赞同：2
> 
> 时间：2012-04-16T06:22:43.963
> 
> 标签：django, database-design, solr, schema, django-haystack

我举一个数据的例子。（纯粹为了演示，我对汽车了解不多）

顶级类别，

```
Car, Computer, Shoes, .. 
```

汽车有很多方面。（子类别）

```
Car - 2 door/4 door  
Car - Audi/Bmw/.. 
```

子类别可以有另一个子类别。

```
Audi - A series/S series/R series 
```

现在，产品可以有多个父级。

```
Audi A4 -child of- A series - Audi - Car 
Audi A4 -child of- 4 door  - Car (one shorter depth) 
```

我将如何在数据库中对此建模？

我已经查看了一些仅用于搜索功能的 RDBMS 方法，而且维护起来看起来很糟糕。
我在看 django-haystack，solr 方法。
但我仍然需要在 django 的 models.py 中对此进行建模。

我将如何做到这一点并为干草堆建立搜索索引？

我是整个 django/haystack/solr 的新手。
我查看了 solr 的示例文档。
看起来每个项目都包含所有必要的数据。（我猜人们称之为扁平数据？）

我可以以某种方式将元数据（类别树）与数据库中的数据（实际产品项）分开吗？
我只是觉得这是正确的方法，我错了吗？

*   编辑

我忘了提到我想使用 solr 的分面搜索功能。
因此，在 DB 中对其进行建模后，我的 search_indexes.py 看起来会如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:40:43.843

这是两个不同的东西。

一个是您想为一个项目存储多个属性。为此，如果您想使用关系数据库，请使用[实体属性值模式](http://en.wikipedia.org/wiki/Entity-attribute-value_model)。[eav-django](http://pypi.python.org/pypi/eav-django/1.0.2)为 django提供了这个实现。

然而，一种更灵活（且不那么繁琐）的方法是使用文档数据库（如沙发）或其他 NoSQL 解决方案。这些提供了一个灵活的模式，因此您不必担心必须存储多少关于特定对象/项目的“属性”或“元数据”。

您问题的另一部分是维护具有*n*深度的关系树。这是使用[嵌套集模型](http://en.wikipedia.org/wiki/MPTT)（也称为修改的前序树遍历）实现的。像 eav 一样，有[django-mptt](http://django-mptt.github.com/django-mptt/)。

# java - 选项卡和片段例外

> ID：10169534
> 
> 赞同：0
> 
> 时间：2012-04-16T06:22:50.360
> 
> 标签：java, android, android-fragments, actionbarsherlock

我想实现我的每个选项卡都有一个单独的活动的想法。这是我创建标签的代码：

```
public class MainTabActivity extends SherlockFragmentActivity {

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_tab_activity);

        try {
            TabHost mTabHost = (TabHost) findViewById(android.R.id.tabhost);

            mTabHost.setup();

            Resources res = getResources();

            TabHost.TabSpec spec;
            Intent intent;

            intent = new Intent().setClass(this, stackA.class);

            spec = mTabHost
                    .newTabSpec("tab1")
                    .setIndicator("Tab 1",
                            res.getDrawable(R.drawable.ic_launcher))
                    .setContent(intent);
            mTabHost.addTab(spec);

            intent = new Intent().setClass(this, stackB.class);

            spec = mTabHost
                    .newTabSpec("tab2")
                    .setIndicator("Tab 2",
                            res.getDrawable(R.drawable.ic_launcher))
                    .setContent(intent);
            mTabHost.addTab(spec);
            mTabHost.setCurrentTab(0);
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }

    }

} 
```

我遇到了一个例外：

```
java.lang.IllegalStateException: Did you forget to call 'public void setup(LocalActivityManager activityGroup)'? 
```

因此，如果我想扩展 FragmentsActivity 因为 TabActivity 被贬低，也许有人知道解决方案。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:27:10.810

扩展`ActivityGroup`代替`Activity`和代替`mTabHost.setup()`使用`mTabHost.setup(getLocalActivityManager());`

# actionscript-3 - flex 网络应用程序中的谷歌地图集成

> ID：10169536
> 
> 赞同：-1
> 
> 时间：2012-04-16T06:23:08.510
> 
> 标签：actionscript-3, apache-flex, google-maps, flex3

如何在 Flex Web 应用程序中实现谷歌地图？有没有在 flex 中实现谷歌地图的库？我正在使用 Flex3.6 sdk。

任何网络链接或代码将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:25:51.823

尽管已弃用，但请使用 Google Maps for Flash。

[https://developers.google.com/maps/documentation/flash/](https://developers.google.com/maps/documentation/flash/)

[https://developers.google.com/maps/documentation/flash/tutorial-flex](https://developers.google.com/maps/documentation/flash/tutorial-flex)

提供 Flash 和 Flex SWC 库。

# java - 寻找可扩展的“at”实现

> ID：10169537
> 
> 赞同：14
> 
> 时间：2012-04-16T06:23:16.700
> 
> 标签：java, quartz-scheduler, high-availability, scheduled-tasks

我正在寻找具有高可用性的可扩展“at”替代品。它必须支持在运行时添加和删除作业。

一些背景：我有一个应用程序触发数百万个事件，每个事件只发生一次。我不需要类似 cron 的机制（每月的第一个星期日等），只需要日期、时间和上下文。

目前我正在使用[Quartz 调度程序](http://quartz-scheduler.org/)，虽然它是一个非常好的项目，但即使经过大量调整（分片、增加轮询间隔等），也很难处理我们向其抛出的事件数量。它在下划线数据库上执行的基本锁定。此外，这对我们来说有点矫枉过正，因为基本上我们有数百万个一次性触发器，而且工作数量相对较少。

我会很感激任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:28:27.447

如果我面临同样的情况，我会做以下事情......

在几个盒子上使用队列复制设置来设置 JMS 队列集群（例如 RabbitMQ 或 ActiveMQ）。

在我漂亮的高可用 JMS 队列中触发所有事件。

然后我会编写一个代理应用程序，根据需要弹出 JMS 队列的事件，我可以在多个盒子上运行多个代理，并将其与正确的 JMS 故障转移 URL 等结合起来。

如果您的工作正在触发事件，您也可以使用相同类型的模型......

仅供参考，在核心 Java 中一种更好的调度方式如下：

```
ScheduledExecutorService threadPool = Executors.newScheduledThreadPool(sensibleThreadCount);
    threadPool.scheduleAtFixedRate(new Runnable() {

    @Override
    public void run() {
       //Pop events from event queue.
       //Do some stuff with them.
    }

    }, initialDelay, period, TimeUnit.X); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:16:34.363

也许只是将[JGroups](http://www.jgroups.org) [共享树](http://www.jgroups.org/javadoc-3.x/org/jgroups/blocks/ReplicatedTree.html)与按执行时间排序的任务一起使用。节点将接受第一个任务并安排计时器，该计时器将在给定时间执行。可以取消任务删除计时器。所以基本上你可以只使用 JGroups 和简单的 java Timers/Executors。

我没有完整阅读它，但这里有一些[概念证明，甚至可能是解决方案](http://www.jgroups.org/taskdistribution/TaskDistribution.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T13:55:42.043

java定时器怎么样？

```
import java.util.*;

public class MyTask extends TimerTask{
   public void run(){
       System.out.println( "do it!" );
   }
} 
```

接着

```
Timer timer = new Timer();

MyTask job1 = new MyTask();
// once after 2 seconds
timer.schedule( job1, 2000 );

job1.cancel();

MyTask job2 = new MyTask(); 
// nach each 5 seconds after 1 second
timer.schedule  ( job2, 1000, 5000 ); 
```

# javascript - 简单的jquery modal插件，如何处理html内容

> ID：10169539
> 
> 赞同：0
> 
> 时间：2012-04-16T06:23:18.813
> 
> 标签：javascript, jquery

基本上，我正在构建一个基本的 jquery 模态插件作为练习，尽管野外的许多品种都有助于参考，但我不确定将 html 推入正在构建的模态的最佳方法在我的 jQuery 中。

**这段代码正在构建我的弹出窗口：**

```
 var container = $('<div class="container"></div>');
        var header = $('<div class="modal"><div class="modal-header"></div></div>');
        var content = $('<div class="modal-body"></div>');
        var footer = $('<div class="modal-footer"><a class="secondary" href="#">Cancel</a><span id = "button-secondary-label">or</span><span class="green_btn"></span></div>');

        $(".popup").append(container);
        $(".container").append(header);
        $(".modal").append(content);
        $(".modal").append(footer); 
```

在使用上述代码调用 javascript 文件的 html 文件中，我想将 html 传递给 modal-body。我知道我可以写以下内容：

```
$(".modal-body").html("html goes here") 
```

但我想让插件尽可能多地处理，那么执行以下操作的最佳方法是什么：

**在 example.html 中：**

```
 ...
<script type="text/javascript">
$(.popup).modal();
</script>
</head>
<body>
<div class="popup"><div class="body-text">I want this text in the .modal-body</div></div> 
```

**在js文件中：**

我想把 .body-text 中的 html 移到 .modal-body 类中，或者可以得到类似结果的东西。

同样，尝试在外部 js 文件中完成此操作，而不是在 example.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:30:45.040

在尝试从模态框中定位 DOm 元素时，通常使用 ID（因为它可以设置为 href 并且可以用来指向链接的给定内容）。所以你可以做

模态中的一些内容

然后抓住它并将其附加到 cmodal

```
$('#boo').appendTo(content); 
```

您还可以选择克隆它并将原始副本留在后面

```
$('#boo').clone().appendTo(content); 
```

您也可以在技术上处理类，但之后取决于您的插件是如何构建的。因为您可以抓取所有内容并生成单个模态内容或创建多个内容以在使用它们之间进行浏览。

```
$('.popup').each(function() {
    $(this).appendTo(content);
});

var items = $('.popup'),
len = items.length,
cur = 0;

$next.click(function() {
    cur++;
    if (cur === len) cur = 0;
    items.eq(cur).show();
}); 
```

# c# - MVC3 通过元素 ID 检索部分视图值。解决方案是什么？

> ID：10169540
> 
> 赞同：0
> 
> 时间：2012-04-16T06:23:19.267
> 
> 标签：c#, asp.net, asp.net-mvc-3

抱歉打扰，我对 MVC3 还很陌生，我一直在寻找 3 天但没有解决方案。

问题看起来像这样。我有一个视图，其中使用`@html.Partial`.

在局部视图中，我有一个双选框，允许我将用户从一侧移动到另一侧。

我的问题是，当我发布我的主表单时，我如何也发布我的部分表单中的信息，更准确地说是第二个选择框数据，因为我已经尝试了一切但没有成功。这里也是代码，非常感谢您的帮助。

主视图：（没有从一开始就复制，因为我认为它没有帮助）

```
<div class="editor-field">
        @Html.TextBoxFor(v => v.Voyage.DateOfArrival, new { @class = "date", id = "arrival" })
    </div>
    <div class="editor-label">
        @Html.LabelFor(v => v.Voyage.MarginOfErrorTime, "Allowed margin of error")
    </div>
    <div class="editor-field">
        @Html.EditorFor(v => v.Voyage.MarginOfErrorTime)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
    </div>
    <div class="partial-view">
        @Html.Partial("_UserAddingOptions", Model)
    </div>
</fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

这是部分视图：

```
<script language="javascript" type="text/javascript">
$(function () {
    $.configureBoxes();
});
</script>
@using (Html.BeginForm())
{
<table>
    <tr>
        <td>
            Filter:<br />
            <input type="text" id="box1Filter" style="width: 160px;" />
            <button type="button" id="box1Clear">
                X</button><br />
            <select id="box1View" multiple="multiple" style="height: 240px; width: 200px;">
                @foreach (var user in Model.Users)
                {
                    <option>@user.FirstName @user.LastName</option>
                }
            </select><br />
            <span id="box1Counter" class="countLabel"></span>
            <select id="box1Storage">
            </select>
        </td>
        <td style="width: 28px; vertical-align: middle;">
            <button id="to2" type="button">
                ></button>
            <button id="to1" type="button">
                <</button>
        </td>
        <td>
            Filter:<br />
            <input type="text" id="box2Filter" style="width: 160px;" />
            <button type="button" id="box2Clear">
                X</button><br />
            <select id="box2View" multiple="multiple" style="height: 240px; width: 200px;">
            </select><br />
            <span id="box2Counter" class="countLabel"></span>
            <select id="box2Storage">
            </select>
        </td>
    </tr>
</table>
} 
```

我只有一个用于主视图的控制器，当我提交主表单时，我必须将部分视图信息从（id = box2View）发布到控制器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:49:58.263

您在表单外有 submot 按钮，您可以将其移动到代码块内部分视图内的表单中，`@Html.BeginForm()`或者在单击表单时使用 javascript 发布表单。

```
<input type="button" onclick="$('#someForm').submit();" /> //someForm is id of the form. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:37:45.247

我可以看到两个错误和一个建议：

1）您在那里有一个嵌套表单 - 除非有其他视图在其上部分用于提交自己的东西（可能不是，因为您使用`BeginForm`它总是回发到当前的控制器/视图）。去掉部分视图上的表单标签。

2) ...这是主要问题 - 您对部分的输入都没有`name`s。如果他们没有`name`s 那么他们就不会提交任何东西：

```
<select id="box2View" name="box2View" ... 
```

3) 你是一个自认是初学者，我知道 - 所以你会从我建议你查看一些关于模型绑定的演练指南中受益。手动写出所有表单元素，手动吐出`option`标签等是不必要的。简单的 MSDN 主题[Asp.Net MVC](http://msdn.microsoft.com/en-us/library/dd410405.aspx)中的模型和验证值得一看 - 特别注意那里的视图代码 - 一切都是从模型完成的，没有显式`<input type="textbox"`等。

# c# - 获取功能区对象

> ID：10169541
> 
> 赞同：0
> 
> 时间：2012-04-16T06:23:21.730
> 
> 标签：c#, excel, ribbon

是否可以在不使用 C# 中的任何插件或基于模板的项目的情况下获取功能区中存在的项目

我通过[一个](http://social.msdn.microsoft.com/Forums/da-DK/vsto/thread/a12d3e02-4e19-4a16-aa7c-b866b922adb0)用户想要自定义它的帖子来。我只想让项目出现在功能区中

这可能是一个重复的问题，但我不知道这方面的任何事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-08T18:32:07.240

如果您想添加选项卡、组或按钮等项目，那么您可以从 openXMLdeveloper.org 获得一个名为自定义 UI 编辑器工具的实用程序。它是官方工具，因为它在 Microsoft 帮助中有所提及。安装该工具后，您可以在“file -open”下打开您的 excel 文件，然后您在此编辑器中编写的 XML 代码将链接到该 excel 文件。在您编写 XML 代码以在您自己的选项卡下添加按钮、下拉列表、组（这些都非常容易用 XML 编写）后，您保存 XML 文件并打开您的 excel 文件。您将在新选项卡下的功能区中找到您在 XML 文件中添加的项目。还可以在 microsoft excel 帮助“fluent ribbon excel 2007”中搜索一些示例 XML 代码。或在 Google 下搜索“为开发人员定制 2007 office fluent 功能区（第 1 部分，共 3 部分）。

如果您想让一些内置项目出现在功能区或选项卡上，请转到“文件选项”。勾选您想要显示的项目，例如。“开发人员”选项卡。

# ruby-on-rails - 关于 has_and_belongs_to_many 问题的 Rails 功能测试

> ID：10169544
> 
> 赞同：0
> 
> 时间：2012-04-16T06:23:42.683
> 
> 标签：ruby-on-rails, ruby, functional-testing

我对 Ruby 和 rails 比较陌生，并且被困在一个我无法理解的问题上。我有两个模型 PricingRuleType 和 PricingRule 设置如下所示。

```
class PricingRuleType < ActiveRecord::Base
  attr_accessible :type_of_rule
  has_and_belongs_to_many :product_rules
  validates :type_of_rule, :presence => true
end

class ProductRule < ActiveRecord::Base
  has_and_belongs_to_many :pricing_rule_types
  validates :pricing_rule_type, :discount_per_unit, :number_of_units, :presence => true
  validates :discount_per_unit, :numericality => {:greater_than_or_equal_to => 0.01}
end 
```

create 和 update 方法的功能测试如下所示：

```
1) Error:
test_should_create_product_rule(ProductRulesControllerTest):
NoMethodError: undefined method `stringify_keys' for "revoo_rule":String
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/attribute_assignment.rb:69:in `assign_attributes'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/base.rb:495:in `initialize'
    /Users/kushaldsouza/Documents/Client Projects/Revoo/app/controllers/product_rules_controller.rb:44:in `new'
    /Users/kushaldsouza/Documents/Client Projects/Revoo/app/controllers/product_rules_controller.rb:44:in `create'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/base.rb:167:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/rendering.rb:10:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:414:in `_run__580034481047679801__process_action__1008436725406406543__callbacks'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/callbacks.rb:17:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/rescue.rb:29:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/notifications.rb:123:in `block in instrument'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/notifications.rb:123:in `instrument'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/base.rb:121:in `process'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/rendering.rb:45:in `process'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/test_case.rb:464:in `process'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/test_case.rb:49:in `process'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/test_case.rb:385:in `post'
    /Users/kushaldsouza/Documents/Client Projects/Revoo/test/functional/product_rules_controller_test.rb:27:in `block (2 levels) in <class:ProductRulesControllerTest>'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/testing/assertions.rb:55:in `assert_difference'
    /Users/kushaldsouza/Documents/Client Projects/Revoo/test/functional/product_rules_controller_test.rb:26:in `block in <class:ProductRulesControllerTest>'

2) Error:
test_should_update_product_rule(ProductRulesControllerTest):
NoMethodError: undefined method `each' for "1":String
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/associations/collection_association.rb:308:in `replace'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/associations/collection_association.rb:41:in `writer'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/associations/builder/association.rb:51:in `block in define_writers'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/attribute_assignment.rb:78:in `each'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/persistence.rb:212:in `block in update_attributes'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/database_statements.rb:190:in `transaction'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/transactions.rb:208:in `transaction'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/persistence.rb:211:in `update_attributes'
    /Users/kushaldsouza/Documents/Client Projects/Revoo/app/controllers/product_rules_controller.rb:63:in `block in update'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/mime_responds.rb:269:in `call'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/mime_responds.rb:269:in `retrieve_response_from_mimes'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/mime_responds.rb:194:in `respond_to'
    /Users/kushaldsouza/Documents/Client Projects/Revoo/app/controllers/product_rules_controller.rb:62:in `update'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/base.rb:167:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/rendering.rb:10:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:414:in `_run__580034481047679801__process_action__1983642789249364420__callbacks'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/callbacks.rb:17:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/rescue.rb:29:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/notifications.rb:123:in `block in instrument'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.1/lib/active_support/notifications.rb:123:in `instrument'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/base.rb:121:in `process'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/abstract_controller/rendering.rb:45:in `process'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/test_case.rb:464:in `process'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/test_case.rb:49:in `process'
    /Users/kushaldsouza/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.1/lib/action_controller/test_case.rb:390:in `put'
    /Users/kushaldsouza/Documents/Client Projects/Revoo/test/functional/product_rules_controller_test.rb:44:in `block in <class:ProductRulesControllerTest>' 
```

我的测试控制器如下所示：

```
require 'test_helper'

class ProductRulesControllerTest < ActionController::TestCase
  fixtures :product_rules
  setup do
    @product_rule = product_rules(:one)
    @update = {
      :number_of_units => 3, 
      :discount_per_unit => 2.3,
      :pricing_rule_type => pricing_rule_types(:revoo_pricing_rule)
    }
  end

  test "should get index" do
    get :index
    assert_response :success
    assert_not_nil assigns(:product_rules)
  end

  test "should get new" do
    get :new
    assert_response :success
  end

  test "should create product_rule" do
    assert_difference('ProductRule.count') do
      post :create, :product_rule => :revoo_rule
    end

    assert_redirected_to product_rule_path(assigns(:product_rule))
  end

  test "should show product_rule" do
    get :show, id: @product_rule
    assert_response :success
  end

  test "should get edit" do
    get :edit, id: @product_rule
    assert_response :success
  end

  test "should update product_rule" do
    put :update, id: @product_rule.to_param, :product_rule => @update
    assert_redirected_to product_rule_path(assigns(:product_rule))
  end

  test "should destroy product_rule" do
    assert_difference('ProductRule.count', -1) do
      delete :destroy, id: @product_rule
    end

    assert_redirected_to product_rules_path
  end
end 
```

我不完全确定为什么我会收到这个错误并且已经坚持了一段时间。出于任何原因，这可能是由于我包含了 has_and_belongs_to_many 关系这一事实。我有其他模型以与上述两个类似的方式设置，但没有这种关系，它们似乎没有抛出任何错误。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:39:28.507

在测试中“应该创建 product_rule” :revoo_rule 是什么？应该是：

```
post :create, :product_rule => @product_rule.to_param 
```

在测试“应该更新product_rule”中，你有：product_rule => @update 在设置中它应该被定义为：

```
:pricing_rule_type_ids => pricing_rule_types(:revoo_pricing_rule).id 
```

# jquery - jQ的链接'Out'

> ID：10169554
> 
> 赞同：0
> 
> 时间：2012-04-16T06:24:43.847
> 
> 标签：jquery, hyperlink, external, jquery-easing

从顶部：

我正在为我的投资组合使用阴阳 WP 主题（' [http://onioneyethemes.com/yin-and-yang/](http://onioneyethemes.com/yin-and-yang/) '），我在 jQ 方面遇到了一些障碍事物。我已将代码复制到一个单独的模板中，以便以相同的方式使用，但我希望缩略图链接能够打开外部页面。如果链接是内部的 - 这太棒了。外部..不是那么多。它挂起。

你可以在这里看到一个“工作”[不是真的]版本：http: [//ii.colorspace.am/events](http://ii.colorspace.am/events)

我翻阅了代码并系统地提取了 js 引用以找到违规者。

这似乎是罪魁祸首： http: [//ii.colorspace.am/wp/wp-content/themes/yin_and_yang/js/jquery.easing.1.3.js](http://ii.colorspace.am/wp/wp-content/themes/yin_and_yang/js/jquery.easing.1.3.js?ver=3.3.1) ?ver=3.3.1但我可能完全不合时宜.

不幸的是，它似乎也可以控制滑块功能（在缩略图/下拉联系人上）。

如果有人能告诉我我需要做什么才能允许我进行外部链接（无论是调整一些代码还是复制缓动文件并进行一些修改），那将不胜感激。

我猜可以在这里找到解决方案[http://css-tricks.com/snippets/jquery/smooth-scrolling/](http://css-tricks.com/snippets/jquery/smooth-scrolling/)但这对我来说都是希腊语，所以我一点也不知道该怎么做:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:06:20.620

这是因为跨域策略。除非主机、端口和协议匹配，否则无法通过 ajax 打开内容。如果你不能让**events.colorspace.am**成为**ii.colorspace.am**你可以尝试两件事：

1.  在**ii.colorspace.am**上托管一个充当代理的 .php 文件。基本上它只会包含`<?php die(file_get_contents($_GET['url'])); ?>`一些基本验证，以确保它`$_GET['url']`实际上是**events.colorspace.am**中的有效地址。放置此文件后，您必须更新图库上的链接，以便将http://events.colorspace.am/g/20120331*改为**http://ii.colorspace.am/file.php ?url=http://events.colorspace.am/g/20120331*。所以要么这个，要么：

2.  重定向用户。如果图库链接允许您输入，`javascript:window.open('http://events.colorspace.am/g/20120331')`这将很容易。但实际上，一些弹出窗口阻止程序可能会取消它，并且您使用方法 1 会更安全，但是用`die(file_get_contents(...))`这个替换代码

    ```
    <script> window.location.href=<?php echo json_encode($_GET['url']); ?>; </script> Please wait you will be redirected... 
    ```

    基本上应该重定向用户。

**/编辑：**

终于明白了这个问题。这是您需要做的：

1.  在`<a class="project-link" href="http://events.colorspace.am/...>`添加`target="_blank"`属性。
2.  在记事本或其他任何地方打开`/wp-content/themes/yin_and_yang/js/jquery.quicksand.init.js`
3.  在文件的开头找到一行说

    ```
    eQgetProjectViaAjax = function(e) { 
    ```

4.  在它的正下方，添加以下行：

    ```
    var href = $(this).attr('href');
    if(href.indexOf('://')!==-1){
        href = href.split('://');
        host = window.location.href.split('://');
        if(href[0]!==host[0]) return setTimeout(function(){ $('#overlay').hide(); },500);

        href = href[1].split('/');
        host = host[1].split('/');
        if(href[0]!==host[0]) return setTimeout(function(){ $('#overlay').hide(); },500);
    } 
    ```

5.  保存所有内容并重试。这次它会起作用。

# c# - 使用 LINQ 将 C# MultiSelectList 拆分为较小的

> ID：10169557
> 
> 赞同：0
> 
> 时间：2012-04-16T06:25:00.180
> 
> 标签：c#, asp.net

嗨，我有一个 MultiSelectList，我想根据值（不是 selectedValues）将它拆分为几个较小的 MultiSelectList，我想使用 LINQ 来实现这一点......当然可以，但我不能削减它..有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:39:12.260

这是你想要的吗：

```
var multiSelectList= new MultiSelectList(new List<string>()); //your mutli-select list
var multiSelectListGroupedByValue=ms.GroupBy(x => x.Value)
                                  .Select(x=>new MultiSelectList(x.Select(y=>y.Value))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:39:49.203

使用此代码（从此处获取[使用 LINQ 将集合拆分为“n”部分？](https://stackoverflow.com/questions/438188/split-a-collection-into-n-parts-with-linq)）

```
static class LinqExtensions
{
 public static IEnumerable<IEnumerable<T>> Split<T>(this IEnumerable<T> list, int parts)
 {
     int i = 0;
     var splits = from item in list
                  group item by i++ % parts into part
                  select part.AsEnumerable();
     return splits;
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:43:54.490

我希望这是你需要的

```
@{
    var array = new int[] { 1,2,3,4,5,6,7,8,9,10 };
}

@Html.ListBox("lstBoxLessThan5",new MultiSelectList(array.Where(a => a < 5).ToArray()));
<br />
@Html.ListBox("lstBoxMorethan5",new MultiSelectList(array.Where(a => a > 5).ToArray())); 
```

将任何业务逻辑放在临时数据结构“数组”的位置

# zend-framework - 无法访问资源插件

> ID：10169559
> 
> 赞同：1
> 
> 时间：2012-04-16T06:25:17.173
> 
> 标签：zend-framework

我已经包含了插件 `SecurityCheck.php (Login_Plugin_SecurityCheck) in bootstrap.php`。它在第 9 行给出错误-> `Call to undefined method Zend_Application::getResource() in Bootstrap.php`。下面是我的代码。

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
 protected function _initPlugins()
    {

       $bootstrap = $this->getApplication();

        $bootstrap->bootstrap('frontcontroller');

        $front = $bootstrap->getResource('frontcontroller');

        $front->registerPlugin(new Login_Plugin_SecurityCheck());
    }
} 
```

如何解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:29:47.993

试试这个

```
protected function _initPlugins() {
    $this->bootstrap('frontController')->getResource('frontController')->registerPlugin(new Login_Plugin_SecurityCheck());

} 
```

前端控制器的 C 应该是大写的。

# android - 关于android意图动作

> ID：10169560
> 
> 赞同：0
> 
> 时间：2012-04-16T06:25:23.397
> 
> 标签：android, android-intent

目前我有意向工作；但是，我遇到了一些问题。

问题是，我有两个应用程序，A 和 B。B 的午餐模式是 android:launchMode="singleTop"。

现在，我想将一个意图从 A 传递到 B，例如“sdcard/Android”（目录路径）。之后，A 将完成，B 将被创建/恢复/onNewintent。第一次，B 会收到一个意图字符串“sdcard/Android”，这正是我想要的。

然后我按下启动器的主页​​按钮并再次打开A，然后将一个新数据“sdcard/Music”传递给B。但是，问题发生了，B不会得到字符串“sdcard/Music”，而是， B 的意图数据仍然是“sdcard/Android”。

我预计A第二次将数据传递给B时，会在B中调用onNewintent方法。有什么错误吗？如何在第二次将正确的数据传递给 B？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    onNewIntent(getIntent());
}

@Override
public void onNewIntent(Intent intent)
{
    Log.i("TAG", intent.getStringExtra("path"));
} 
```

我知道我应该覆盖 onNewIntent。第一次，B 会进入 onCreate 方法。第二次，我希望它进入 onNewIntent 方法；但是，它进入了 onResumed 方法..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:38:49.847

该方法`onNewIntent(...)`不是第一次为您`Activity B`调用，它只会在第二次和更多次`Activity B`启动时调用。

`Intent`您可以通过执行以下操作来“重新编写”原件......

```
@Override
protected void onNewIntent(Intent intent) {
    setIntent(intent);
}

@Override
protected void onResume() {
    super.onResume();
    handleIntent(getIntent());
}

private void handleIntent(Intent intent) {
    // The intent parameter here will be the original `Intent` the first
    // time Activity B is started. It will be the new Intent after that
    // as onNewIntent(...) re-writes it with the call to setIntent(...)
} 
```

# wcf - 10 分钟后具有 netTcp 绑定超时的 WCF 回调服务

> ID：10169569
> 
> 赞同：5
> 
> 时间：2012-04-16T06:25:53.533
> 
> 标签：wcf, wcf-callbacks

我正在使用 WCF（使用回调合同）和 netTcpBinding 创建一个聊天应用程序。我将该服务作为 Windows 服务托管，并通过客户端应用程序从其他计算机访问它。

我现在面临的问题是客户端连接在 10 分钟后进入故障状态，这似乎是发生了某种超时。我已经尝试在服务和客户端中增加接收超时和发送超时，但没有奏效。

我应该更改哪个设置以增加此超时期限以及在哪个应用程序、服务或客户端中？

以下是我的配置文件，

**服务**

```
 <system.serviceModel>
    <services>
      <service behaviorConfiguration="PeerTalk.Service.ChatServiceBehavior"
        name="PeerTalk.Service.ChatService">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
          contract="PeerTalk.Service.ServiceContracts.IChat">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:7920/ChatService" />
            <add baseAddress="net.tcp://localhost:7921/ChatService" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="PeerTalk.Service.ChatServiceBehavior">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <netTcpBinding>
        <binding name="tcpBinding"
                 maxBufferSize="67108864"
           maxReceivedMessageSize="67108864"
           maxBufferPoolSize="67108864"
           transferMode="Buffered"
           closeTimeout="00:01:00"
           openTimeout="00:01:00"
           receiveTimeout="00:00:10"
           sendTimeout="00:00:10"
           maxConnections="100">
          <readerQuotas maxDepth="64"
                        maxStringContentLength="67108864"
                        maxArrayLength="67108864"
                        maxBytesPerRead="67108864"
                        maxNameTableCharCount="16384"/>
          <security mode="Transport">
            <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
            <message clientCredentialType="Windows"/>
          </security>
          <reliableSession enabled="false" inactivityTimeout="00:01:00"/>

        </binding>
      </netTcpBinding>
    </bindings>
  </system.serviceModel> 
```

**客户**

```
<system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="NetTcpBinding_IChat" closeTimeout="00:01:00" openTimeout="00:01:00"
          receiveTimeout="00:10:00" sendTimeout="00:00:10" transactionFlow="false"
          transferMode="Buffered" transactionProtocol="OleTransactions"
          hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="67108864"
          maxBufferSize="67108864" maxConnections="10" maxReceivedMessageSize="67108864">
          <readerQuotas maxDepth="32" maxStringContentLength="67108864"
            maxArrayLength="67108864" maxBytesPerRead="67108864" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:01:00"
            enabled="false" />
          <security mode="Transport">
            <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
            <message clientCredentialType="Windows" />
          </security>
        </binding>
      </netTcpBinding>
    </bindings>
    <client>     
          <endpoint address="net.tcp://10.10.10.45:7921/ChatService" binding="netTcpBinding"
               bindingConfiguration="NetTcpBinding_IChat" contract="PeerTalkService.IChat"
               name="NetTcpBinding_IChat">
          </endpoint>
    </client>
  </system.serviceModel> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:06:26.193

在这种情况下，超时由`receiveTimeout`绑定和`inactivityTimeout`用于双工消息传递的可靠会话中定义。正确的解决方案不是增加超时，而是实施一些 ping / keep alive 消息。原因是增加超时将使失败的客户端保持连接打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:14:11.327

您可以发布客户呼叫示例（服务呼叫示例）。这里可能发生的情况是您没有正确关闭客户端，并且您在服务端达到了最大会话数。
您必须知道使用 net.tcp 绑定与 http 不同。

您可以使用 System.ServiceModel 性能计数器 (http://msdn.microsoft.com/en-us/library/ms750527.aspx) 并在 10 分钟后查看发生了什么（未完成的调用数、服务实例数等）。 .)

[http://dkochnev.blogspot.com/2011/06/wcf-framework-40-monitoring-service.html](http://dkochnev.blogspot.com/2011/06/wcf-framework-40-monitoring-service.html)

# java - 如何通过 Apache Camel 调用 RESTful 服务？

> ID：10169570
> 
> 赞同：11
> 
> 时间：2012-04-16T06:25:57.330
> 
> 标签：java, rest, jira, apache-camel

我目前正在使用 HTTP 方法来调用一些会创建 JIRA 问题的 URL。

现在我想使用 Apache Camel，我该如何使用呢？

我需要通过 Camel 调用以下链接：

```
http://localhost:8080/rest/api/2/project/" + key + /components 
```

由于我是骆驼的新手，请也提出一些解决方案和示例。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T13:12:36.007

另请参阅有关在 Camel [http://camel.apache.org/how-do-i-use-dynamic-uri-in-to.html中使用动态端点的常见问题解答](http://camel.apache.org/how-do-i-use-dynamic-uri-in-to.html)

本质上，EIP 模式就是收件人列表。

因此，在您的情况下，它也可以简化为一个 EIP

```
<recipientList>
  <simple>http://localhost:8080/rest/api/2/project/${header.myKey}/components</simple>
</recipientList> 
```

注意 Camel 中的 http 组件是完全同步的。如果您想通过 HTTP 进行请求/回复并避免在等待回复消息时让调用者阻塞，那么您可以使用 Camel 的其他一些 HTTP 组件，例如：

*   骆驼-ahc
*   骆驼-http4
*   骆驼码头

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-16T06:38:10.743

您可以轻松使用[CXFRS 组件](http://camel.apache.org/cxfrs.html)；如果您出于某种原因需要使用[HTTP 组件](http://camel.apache.org/http.html)来执行此操作，您也可以轻松地使用它：

```
<setHeader headerName="CamelHttpUri">
      <simple>http://localhost:8080/rest/api/2/project/${header.myKey}/components</simple>
</setHeader>
<inOut uri="http://doesnt.matter.we/override/it/anyways" /> 
```

当然，`myKey`在到达这部分路线之前，您需要使用标题丰富您的消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-25T14:35:32.047

我正在使用 apache 骆驼码头

```
CamelContext context = new DefaultCamelContext();
    public void configure(){
           context.addRoutes(new RouteBuilder(){
           from("jetty:localhost:9000/offers")
           .to("direct:getOffers")
           .end();

    }

}); 
```

因此，当用户点击[http://localhost:9000/offers](http://localhost:9000/offers)时，将调用端点 direct:getOffers

所以现在定义 getOffers 端点

```
context.addRoutes(new RouteBuilder(){
     public void configure(){
          from("direct:getOffers")
          .to("jetty:http://localhost:9008/api/v2.0/offers?  
          bridgeEndpoint=true")
         .end();

     }

}); 
```

这里另一个服务在 9008 运行，其休息资源为 [http://localhost:9008/api/v2.0/offers](http://localhost:9008/api/v2.0/offers)，这是我试图使用的资源。

因此，当骆驼实例启动时，它会注册两条路由，然后按上述方式进行处理

注意添加 ?bridgeEndpoint=true 选项以使其正常工作很重要

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T06:34:38.067

您可以使用骆驼使用 REST 服务`CXFRS Component`。Apache camel 对此有足够的信息。

[http://camel.apache.org/cxfrs.html](http://camel.apache.org/cxfrs.html)

# python - 完整的原型太大而无法保存，已清除变量

> ID：10169574
> 
> 赞同：9
> 
> 时间：2012-04-16T06:26:16.810
> 
> 标签：python, django, google-app-engine

我在渲染谷歌应用引擎代码时遇到了这个错误。

有没有人知道这个错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T13:40:39.317

你在用appstats吗？当 appstats 记录有关您的应用程序的状态时，似乎会发生这种情况，尤其是当您在堆栈上存储大量数据时。它无害，但在 appstats 中检查调用时您将无法看到所有内容。

# r - 如何在 R 中打开 WinBUGS odc 文件？

> ID：10169575
> 
> 赞同：2
> 
> 时间：2012-04-16T06:26:19.077
> 
> 标签：r

我目前正在使用 Ubuntu、R 和 JAGS。我想探索一些 Web 上可用的 WinBUGS 示例，例如[随书《*使用 WinBUGS 进行贝叶斯建模：介绍*](http://stat-athens.aueb.gr/~jbn/winbugs_book/)》所附网站上的示例。

但是，分析以 odc 格式存储，例如[this one](http://stat-athens.aueb.gr/~jbn/winbugs_book/files/chap03/chap03_ex1.odc)。我可以使用文本编辑器打开文件，它确实以纯文本形式显示模型语法，在某些情况下还显示数据等等。但是，我想知道：

**是否存在提取 WinBUGS odc 文件的重要元素的现有 R 函数？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-15T18:37:39.450

我建议编译[odcread](https://github.com/gertvv/odcread)并使用它将 .odc 文件转换为文本文件并使用任何文本编辑器读取它。

`for f in *.odc; do odcread ./"$f" > ./"${f%.odc}.txt" done`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T20:28:00.047

The best way is to go and install WinBUGS.

See [http://www.mrc-bsu.cam.ac.uk/bugs/winbugs/contents.shtml](http://www.mrc-bsu.cam.ac.uk/bugs/winbugs/contents.shtml)

You can then open any of these directly there, and copy them for use wherever you want.

# c# - 如何在更改 DependencyProperty 后调用方法

> ID：10169576
> 
> 赞同：1
> 
> 时间：2012-04-16T06:26:20.367
> 
> 标签：c#, wpf, mvvm, custom-controls, dependency-properties

我有一个`WPF`使用`MVVM`模式的应用程序。我的项目中有一个窗口，并`CustomControl`在我的窗口中使用了一个。我的 Window 中需要两个命令来启动和停止`CustomControl`. 所以我使用`bool DependencyProperty`这样的：

```
public static readonly DependencyProperty IsStartModeProperty = DependencyProperty.Register(
    "IsStartMode", typeof(bool), typeof(RadarView), new FrameworkPropertyMetadata(false, OnCurrentReadingChanged));

public bool IsStartMode {
    get { return (bool)GetValue(IsStartModeProperty); }
    set { SetValue(IsStartModeProperty, value); }
} 
```

以下方法也用于我的依赖属性中的回调委托：

```
public static void OnCurrentReadingChanged(DependencyObject doj, DependencyPropertyChangedEventArgs dp) {
    if (IsStartMode)
        Start();
    else
        Stop();
} 
```

我的问题是在 up 方法中使用`IsStartMode`属性，因为这不是静态的。它有一个构建错误。

是正确的我的解决方案吗？如果是正确的，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T06:34:14.520

您需要将第一个方法参数转换为 Dependency Object 类：

```
public static void OnCurrentReadingChanged(DependencyObject doj, DependencyPropertyChangedEventArgs dp) 
{ 
    var myObject = (RadarView)doj;

    if (myObject.IsStartMode) 
        myObject.Start(); 
    else 
        myObject.Stop(); 
} 
```

（作为旁注，我会调用该属性`IsRunning`。）

# c++ - 如何将 24 位（整数值）转换为字符串，反之亦然？

> ID：10169580
> 
> 赞同：0
> 
> 时间：2012-04-16T06:26:23.173
> 
> 标签：c++, string, casting, int

我需要读取前 3 字节数据（24 位）并将其转换为十进制值。例如。我的前三个字节是 0x00 0x00 0x0A 。我需要阅读并获得 10 作为值。我将输入作为字符串（c++ 字符串类）。我怎么能在 C++ 中做到这一点？

注意：需要遵循整数值的大端表示。我也无法生成输入。

编辑我的代码
生成：

```
 stringstream lss ;
   int lNo =32 ;     // I know its 32 bit integer value
   lss<<lNo ;   //string to int  
   // got output  in  lss.str()       as 32       . size of the string is 2 .
    // Expected out put is  0x00000020          size of the string should be 4 .. 
```

所以我也尝试了下面的代码

```
 stringstream lss ;
  char a[3] ={0x00,0x00,0x0A} ;
  lss<<a ;
 // this time output is empty string  ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:50:15.987

我想你想要的是这样的：

```
unsigned char a[3] = { 0x00, 0x00, 0x0A };
int x = ((int)(char)a[0] << 16) | ((int)a[1] << 8) | a[2];`. 
```

a 数组必须是无符号字符，这样在将它们向左移动之前将它们转换为整数时，它们不会被符号扩展。这不适用于第一个，因为它可能有一个有效的符号位。祝你好运。

# git - 在bash中创建多字别名？

> ID：10169582
> 
> 赞同：17
> 
> 时间：2012-04-16T06:26:40.050
> 
> 标签：git, bash

我想在 bash 中创建一个别名，这样

```
git diff somefile 
```

变成

```
git diff --color somefile 
```

但我不想定义自己的自定义别名

```
alias gitd = "git diff --color" 
```

因为如果我习惯了这些自定义别名，那么我就会失去在没有这些映射的机器上工作的能力。

**编辑**：似乎 bash 不允许多字别名。除了创建别名之外，还有其他替代解决方案吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-16T06:56:18.690

要为命令创建更智能的别名，您必须编写一个与该命令同名的包装函数，它分析参数、转换它们，然后使用转换后的参数调用真正的命令。

例如，您的`git`函数可以识别`diff`正在被调用的，并在那里插入`--color`参数。

代码：

```
# in your ~/.bash_profile

git()
{
  if [ $# -gt 0 ] && [ "$1" == "diff" ] ; then
     shift
     command git diff --color "$@"
  else
     command git "$@"
  fi
} 
```

如果你想支持之前的任何选项`diff`并且仍然让它 add `--color`，你必须使这个解析更聪明，很明显。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-16T07:10:01.707

更好的答案（对于这种特定情况）。

从`git-config`手册页：

```
 color.diff
       When set to always, always use colors in patch. When false (or
       never), never. When set to true or auto, use colors only when the
       output is to the terminal. Defaults to false. 
```

不需要函数或别名。但是函数包装器方法对于任何命令都是通用的；把那张卡塞进你的袖子里。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-02T21:15:58.263

Git 有自己的方式来指定别名（[http://git-scm.com/book/en/Git-Basics-Tips-and-Tricks#Git-Aliases](http://git-scm.com/book/en/Git-Basics-Tips-and-Tricks#Git-Aliases)）。例如：

```
git config --global alias.d 'diff --color' 
```

然后你可以使用`git d`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T06:44:16.323

避免在 bash 中的赋值符号周围出现空格：

```
alias gitd="git diff --color" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T06:59:53.863

你找错树了。将`color.diff`配置选项设置为`auto`.

# vspackage - 如何使用 VS Package 在解决方案资源管理器中获取选定项目的项目类型 Guid

> ID：10169583
> 
> 赞同：3
> 
> 时间：2012-04-16T06:26:45.380
> 
> 标签：vspackage, vs-extensibility

我创建了简单的 VS 包，用于在解决方案资源管理器的上下文菜单中添加新项目。我需要检查选定项目的项目类型 GUID。我怎么能得到这个。

例如，One Solution 包含三种不同类型的项目，如 WindowFormsApplication、MVC Projects、WebApplication。在选择 MVC 项目时，我们需要获取该 ProjectType GUID。

我在我的 Package.cs 中尝试了以下内容，

```
IVsMonitorSelection monitorSelection = (IVsMonitorSelection)Package.GetGlobalService(typeof(SVsShellMonitorSelection));

monitorSelection.GetCurrentSelection(out hierarchyPtr, out projectItemId, out mis, out selectionContainerPtr);

IVsHierarchy hierarchy = Marshal.GetTypedObjectForIUnknown(hierarchyPtr, typeof(IVsHierarchy)) as IVsHierarchy;

if (hierarchy != null)
{
     object prjItemObject;
     hierarchy.GetProperty(projectItemId, (int)__VSHPROPID.VSHPROPID_ExtObject, out    prjItemObject);
     string projectTypeGuid;
      Project prjItem = prjItemObject as Project;
      projectTypeGuid = prjItem.Kind;
} 
```

对于所有选定的项目，我将 GUID 设为“FAE04EC0-301F-11D3-BF4B-00C04F79EFBC”。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T05:11:38.907

我已经找到了答案，

参考：[https ://www.mztools.com/articles/2007/MZ2007016.aspx](https://www.mztools.com/articles/2007/MZ2007016.aspx)

```
public string GetProjectTypeGuids(EnvDTE.Project proj)
        {
            string projectTypeGuids = "";
            object service = null;
            Microsoft.VisualStudio.Shell.Interop.IVsSolution solution = null;
            Microsoft.VisualStudio.Shell.Interop.IVsHierarchy hierarchy = null;
            Microsoft.VisualStudio.Shell.Interop.IVsAggregatableProject aggregatableProject = null;
            int result = 0;
            service = GetService(proj.DTE, typeof(Microsoft.VisualStudio.Shell.Interop.IVsSolution));
            solution = (Microsoft.VisualStudio.Shell.Interop.IVsSolution)service;

            result = solution.GetProjectOfUniqueName(proj.UniqueName, out hierarchy);

            if (result == 0)
            {
                aggregatableProject = (Microsoft.VisualStudio.Shell.Interop.IVsAggregatableProject)hierarchy;
                result = aggregatableProject.GetAggregateProjectTypeGuids(out projectTypeGuids);
            }

            return projectTypeGuids;
        }

        public object GetService(object serviceProvider, System.Type type)
        {
            return GetService(serviceProvider, type.GUID);
        }

        public object GetService(object serviceProviderObject, System.Guid guid)
        {
            object service = null;
            Microsoft.VisualStudio.OLE.Interop.IServiceProvider serviceProvider = null;
            IntPtr serviceIntPtr;
            int hr = 0;
            Guid SIDGuid;
            Guid IIDGuid;

            SIDGuid = guid;
            IIDGuid = SIDGuid;
            serviceProvider = (Microsoft.VisualStudio.OLE.Interop.IServiceProvider)serviceProviderObject;
            hr = serviceProvider.QueryService(ref SIDGuid, ref IIDGuid, out serviceIntPtr);

            if (hr != 0)
            {
                System.Runtime.InteropServices.Marshal.ThrowExceptionForHR(hr);
            }
            else if (!serviceIntPtr.Equals(IntPtr.Zero))
            {
                service = System.Runtime.InteropServices.Marshal.GetObjectForIUnknown(serviceIntPtr);
                System.Runtime.InteropServices.Marshal.Release(serviceIntPtr);
            }

            return service;
        }
    } 
```

它可以很好地满足我的要求。

# java - Java 批量插入循环需要附加时间码吗？

> ID：10169585
> 
> 赞同：0
> 
> 时间：2012-04-16T06:26:52.797
> 
> 标签：java, database, netbeans, bulkinsert

嗨，我是 java 新手，我正在使用来自数组的循环插入到数据库中，这需要时间我将如何在 DB 中插入数据作为批量插入我的代码，

```
 if(con != null)
            { 

                    rs = dboperation.DBselectstatement(con,"select host_object_id from nagios_hosts where address='"+ip+"'");

                    if (rs != null)
                    { 
                       rs.next();
                       String id = rs.getString(1);
                       for(int i= 0;i<serviceArray.length;i++)
                       {         
                         status.append(serviceArray[i]+"\n");
                         dboperation.DbupdateStatement(DbAcess.getNagios_connection(),"insert into nagios_servicelist(service_name,host_object_id) values('"+serviceArray[i]+"','"+id+"')");
                       }
                    }

            } 
```

不要详细介绍这段代码在数据库中批量插入？

希望很快能听到你的声音

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:37:56.483

您应该为您的目的使用 JDBC 批量插入 -

```
//Create a new statement
Statement st = con.createStatement();

//Add SQL statements to be executed
st.addBatch("insert into nagios_servicelist(service_name,host_object_id)    values('"+serviceArray[0]+"','"+id+"')");
st.addBatch("insert into nagios_servicelist(service_name,host_object_id)    values('"+serviceArray[1]+"','"+id+"')");
st.addBatch("insert into nagios_servicelist(service_name,host_object_id)    values('"+serviceArray[2]+"','"+id+"')");

// Execute the statements in batch
 st.executeBatch(); 
```

您可以在此处插入自己的逻辑。但这是如何完成的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:10:32.313

以下代码避免了内存不足错误以及 SQL 注入

```
String sql = "insert into employee (name, city, phone) values (?, ?, ?)";
Connection connection = new getConnection();
PreparedStatement ps = connection.prepareStatement(sql);

final int batchSize = 1000;
int count = 0;

for (Employee employee: employees) {

    ps.setString(1, employee.getName());
    ps.setString(2, employee.getCity());
    ps.setString(3, employee.getPhone());
    ps.addBatch();

    if(++count % batchSize == 0) {
        ps.executeBatch();
    }
}
ps.executeBatch(); // insert remaining records
ps.close();
connection.close(); 
```

# xml - XML：SVG - 如何将文本块包装在矩形中

> ID：10169590
> 
> 赞同：1
> 
> 时间：2012-04-16T06:27:12.737
> 
> 标签：xml, svg

例如，我想在矩形顶部放置一些文本。

```
<rect x="0" y="0" width="800" height="600" />
<text x="0" y="0">
    text text text text text text text text text text text text ... so on
</text> 
```

但问题是当文本越来越长时，会超过矩形的原始宽度。

在 HTML 中我们可以使用 div 来包裹文本，在 SVG 中我们如何处理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T10:37:28.600

您可能想要使用 svg1.2 草案规范的 flow* 部分。

[http://www.w3.org/TR/2004/WD-SVG12-20041027/flow.html](http://www.w3.org/TR/2004/WD-SVG12-20041027/flow.html)

例如 ：

```
<flowRoot>
<flowRegion>
<rect x="0" y="0" width="800" height="600" />
</flowRegion>
<flowDiv>
<flowPara>text text text text text text text text text text text text ... so on</flowPara>
</flowDiv>
</flowRoot> 
```

今天，只要正确设置了 svg 版本，它就可以与inkscape 和蜡染一起使用。

**编辑**：@Robert Longson 它可能不是标准的，但它可以节省你的时间（等待一个体面的 svg 2.0 实现），因为事实上 inkscape 和 batik 在 Windows 和 linux 上都可用，并且能够从 CLI 转换/光栅化...

# android - 权限拒绝：无法访问 SurfaceFlinger

> ID：10169591
> 
> 赞同：2
> 
> 时间：2012-04-16T06:27:14.513
> 
> 标签：android

运行我的应用程序时出现此错误。我还在 manifest.xml 中包含了 surfaceFlinger 的权限

```
"uses-permission android:name="android.permission.ACCESS_SURFACE_FLINGER" 
```

但它仍然`" can't access the SurfaceFlinger"` 在 LogCat 中给出相同的错误。

基本上我想在开发工具中运行开发设置代码。

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    try {
        Class partypes[] = new Class[1];
        partypes[0] = String.class;
        Method getService= ServiceManager.getMethod("getService", partypes );
        Object arglist[] = new Object[1];
        arglist[0] = "SurfaceFlinger";
        IBinder flinger= (IBinder)getService.invoke(smObject, arglist );

  //    IBinder flinger = ServiceManager.getService("SurfaceFlinger");
        if (flinger != null) {
            Parcel data = Parcel.obtain();
            data.writeInterfaceToken("android.ui.ISurfaceComposer");
            data.writeInt(isChecked ? 1 : 0);
            flinger.transact(mCode, data, null, 0);
            data.recycle();

            updateFlingerOptions();
        }
    } catch (RemoteException ex) {
    } 
**catch (SecurityException e) {
        // TODO Auto-generated catch block
        String err=e.toString();
        Toast.makeText(DevelopmentSetting.this, err, Toast.LENGTH_SHORT).show();
    }**

    catch (NoSuchMethodException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
} 
```

在 catch SecurityException 中它给出了错误 java.lang.securityException 但 logcat 它说权限被拒绝：无法访问 surfaceFlinger。

manifest.xml 在这里

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.nustian.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.ACCESS_SURFACE_FLINGER"/>

    <uses-permission android:name="android.permission.SET_WALLPAPER"   />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/> 

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".DevelopmentSetting"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

来人帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-20T13:59:12.767

您的应用需要使用平台证书签名才能访问此权限。只有系统应用程序通常有这个。更多信息在这里：

[https://groups.google.com/forum/#!topic/android-porting/aN6D_vL9xxE](https://groups.google.com/forum/#!topic/android-porting/aN6D_vL9xxE)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-13T05:28:59.900

作为一种解决方法，将其添加到您的清单文件中。UID 媒体能够使用 Surface Flinger API，因此与其共享 UID 将允许您的应用程序也可以使用它。

```
 coreApp="true"
  android:sharedUserId="android.uid.media" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:51:38.180

不要忘记添加它的相对权限：

```
<uses-permission android:name="android.permission.ACCESS_SURFACE_FLINGER" /> 
```

# mysql - 具有许多子数组和mysql的多维数组-如何处理？

> ID：10169594
> 
> 赞同：0
> 
> 时间：2012-04-16T06:27:33.047
> 
> 标签：mysql, arrays, insert, multidimensional-array

我有很长的多维数组，其中包含许多子数组。我想从它们中插入一些值到 mysql 中。我会很感激一些提示如何处理它。我想使用一个循环，只为数据库中的一个或不同的表添加一些值。例如，我如何从 [Things][Thing][k][value] 中获取价值？感谢您的任何建议。

```
Array
(
[Data] => Array
    (
        [A] => Array
            (
                [B] => Array
                    (
                        [0] => Array
                            (
                                [C] => Array
                                    (
                                        [value] => some value1
                                    )
                                [D] => Array
                                    (
                                        [value] => some value2
                                    )
                                [E] => some value3
                            )
                        [1] => Array
                            (
                                [C] => Array
                                    (
                                        [value] => some value4
                                    )
                                [D] => Array
                                    (
                                        [value] => some value5
                                    )
                                [E] => 5
                            )
                    )
                [value] => 
            )
[Things] => Array
            (
                [Thing] => Array
                    (
                        [F] => Array
                            (
                                [value] => some value6
                            )
                        [G] => Array
                            (
                                [H] => Array
                                    (
                                        [0] => Array
                                            (
                                                [i] => Array
                                                    (
                                                        [value] => some value7
                                                    )
                                                [j] => Array
                                                    (
                                                        [value] => some value8
                                                        [value] => some value8
                                                    )
                                                [k] => Array
                                                    (
                                                        [value] => some value9
                                                    )
                                                [l] => Array
                                                    (
                                                        [value] => some value10
                                                    )
                                                [m] => some value11
                                                [n] => 
                                            )
                                        [1] => Array
                                            (
                                                [o] => Array
                                                    (
                                                        [value] => some value12
                                                    )
                                                [p] => Array
                                                    (
                                                        [value] => some value13
                                                    )
                                                [r] => Array
                                                    (
                                                        [value] => some value14
                                                    )
                                                [d] => Array
                                                    (
                                                        [value] => some value15
                                                    )
                                                [t] => some value16
                                                [u] => 
                                            )
                                    )
                                [value] => 
                            )
                            )
                            )           
                    [Thing2] => Array       
                    (

                            (...)

                            and so on... 
```

在我的数据库中，我从上面的数组中有这些东西的表格。其中当然有 id 以及与其他表相关的一些其他字段。正如您在下面看到的，我想从数组中获取一些值，将其插入到 Table Thing 中，其中一些放入 Table 中的字段 4 和 Table 中的字段 5 并获取它们的 id 并将其放入 Table Thing 中。我将使用存储过程。我想从php中调用它（我希望这个概念是好的？）。我在获取我想从这个数组中获取的值时遇到问题，所以 David Chan 我正在寻找有关数组和循环的帮助。我尝试了 Starx 所写的，但我什么也没得到（白屏）。我还在学习，所以我知道我必须做错事。

```
............          .................       ..................
Table Thing           Table for field 4       Table for field 5

id int                id int                  id int
field 1 varchar       value varchar           value varchar
field 2 varchar
field 3 varchar       ................        ................
field 4 int
field 5 int
(...)
........... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:31:00.983

每当您尝试访问多维数组时，都必须使用索引来指向特定字段。

例如：

`$data['A']['B'][0]['C']['VALUE']`会给你价值`some value1`

使用类似的方式获取值并插入到数据库中。

# ruby-on-rails - 好的 Ruby on Rails 3.2.1 库

> ID：10169596
> 
> 赞同：0
> 
> 时间：2012-04-16T06:27:39.707
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

我正在为小学制作网页。现在我需要实现画廊。我是 ruby​​ on rails 的新手，所以我想问你们，伙计们，哪个是好画廊。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-09T13:42:18.473

看来我来晚了。无论如何，我可以建议您将我的宝石[隐居](https://github.com/ImmaculatePine/hermitage)用于前端。正如 gayavat 所说，[回形针](https://github.com/thoughtbot/paperclip)非常适合后端。

所以，你需要

宝石文件：

```
gem 'hermitage' 
```

然后

```
bundle install
rails g hermitage:install 
```

带回形针附件的型号：

```
class Image < ActiveRecord::Base
  attr_accessible :file
  has_attached_file :file, styles: { thumbnail: '100x100>' }
end 
```

在您看来：

```
render_gallery_for @images 
```

这将生成画廊标记并添加 javascript 图像查看器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:03:59.163

我同意 masterkrang，你需要使用 jquery 库，（我喜欢[http://fancybox.net/](http://fancybox.net/)）。从后端 - 使用[回形针](https://github.com/thoughtbot/paperclip)宝石

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:52:58.213

据我所知，在 Rails 生态系统中没有像“画廊实现”这样的东西。您必须同时选择后端 gem（库）和前端库（可能是 jQuery 插件）。然后，您可以根据需要将它们连接起来。

至于后端选择，您可能需要查看此 gem 列表：

[https://www.ruby-toolbox.com/categories/rails_file_uploads](https://www.ruby-toolbox.com/categories/rails_file_uploads)

# jquery - 我如何在if条件下查找ul是否包含带有id的li

> ID：10169601
> 
> 赞同：11
> 
> 时间：2012-04-16T06:28:28.493
> 
> 标签：jquery

我如何在jquery的if条件中查找ul是否包含id为'liSubTask1'的li

 `````
 <ul id='ulTask'>
   <li id='liSubTask1'>subTask1</li>
   <li id='liSubTask2'>subTask2</li>
   <li id='liSubTask3'>subTask3</li>
   <li id='liSubTask4'>subTask4</li>
   <li id='liSubTask5'>subTask5</li>
 </ul> 
````  `我想知道 ul 中是否存在“li with id”然后做一些事情

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-16T06:30:42.407

```
if($("#ulTask #liSubTask1").length)
{
   //your code here
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T06:31:22.587

">" 符号将选择器限制为第一个选择器的直接后代：http: [//api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

```
if ($('#ulTask > li#liSubTask4').length) {
   //...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T06:41:33.330

这听起来很熟悉这些问题“[是否有 jQuery 的“存在​​”函数](https://stackoverflow.com/questions/31044/is-there-an-exists-function-for-jquery)”和“[如何检查 jQuery 中是否存在选择器？](https://stackoverflow.com/questions/299802/how-do-you-check-if-a-selector-exists-in-jquery) ”

```
jQuery.fn.exists = function(){return this.length>0;}

if ($(selector).exists()) {
    // Do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T06:31:14.573

```
if($('ul#ulTask li#liSubTask1').length) {
   // do stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T06:41:46.713

如果您也想检查所有内部子元素，请使用以下代码..

```
if($('#ulId').find('#liId').length > 0) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T06:31:44.733

```
var nextli = $("#ulTask").next(li);
var id = nextli.attr('id'); 
`````

# ios - 没有动画的 deleteRowsAtIndexPaths

> ID：10169604
> 
> 赞同：1
> 
> 时间：2012-04-16T06:29:21.670
> 
> 标签：ios, xcode, uitableview, animation

我有一个带有`UITTableView`. 该表是可更新的。当在下一次更新中行数少于以前的版本时，我实现了`UITableView's`方法 - deleteRowsAtIndexPaths。

我这样做：

```
[table beginUpdates];
[table deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationNone];
[table reloadRowsAtIndexPaths:indexPathsReload withRowAnimation:UITableViewRowAnimationNone];
[table endUpdates]; 
```

但是当我实现这段代码时，会有动画。而且这部动画真的很烂。大量的黑色泄漏。但我确实写了 -`withRowAnimation:UITableViewRowAnimationNone`在两种方法中：删除和重新加载。

为什么？如何在没有动画的情况下重新加载和删除行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:25:23.760

通常这样做的方法是修改表的数据源，并调用`reloadData`表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:32:15.737

您可以尝试使该“手势”脱离表格，然后尝试重新加载表格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T07:12:31.060

也许您尝试在 TableView 中使用 NSMutableArray（通过 removeObjectAtIndex:indexPath.row 删除行）并使用 [tableView reloadData] 重新加载整个 tableview？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T07:12:35.807

不像名字所暗示的那样*`*UITableViewRowAnimationNone*`*根本没有帮助。也许按照这里的建议设置单元格上的 alpha。不过不确定。 [在ios7中删除TableView的最后一行时出现动画问题](https://stackoverflow.com/questions/20976700/problems-with-animation-when-deleting-the-last-row-of-tableview-ios7)

# ruby-on-rails - Creating an image_tag link to user_path in Ruby on Rails

> ID：10169609
> 
> 赞同：0
> 
> 时间：2012-04-16T06:29:57.420
> 
> 标签：ruby-on-rails

Why do I keep getting an error here:

```
 <%= link_to image_tag user.photo.url(:watch), user_path(user) %> 
```

Error: undefined method `symbolize_keys!' for "/users/4":String

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:34:36.647

Try:

```
<%= link_to image_tag(user.photo.url(:watch)), user_path(user) %> 
```

# c++ - cin 不将输入作为 ENTER

> ID：10169611
> 
> 赞同：0
> 
> 时间：2012-04-16T06:30:15.260
> 
> 标签：c++, cin

```
char ch[4];  
char* ptr;  
ptr = ch;  
while(1)  
{  
  cin >> *ptr;  
if(*ptr == '\n')  
break;  
ptr++;  
} 
```

在这里，我只是写了一些示例代码，当用户输入 ENTER 时，我试图摆脱一个 while 循环，但它不起作用。请帮我。先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T06:39:19.750

要获取单个字符，请使用[`std::istream::get`](http://en.cppreference.com/w/cpp/io/basic_istream/get). 这也适用于获取换行符。

但是，不要在循环中获取字符，直到你得到一个换行符，为什么不使用类似的东西[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

```
std::string str;
std::getline(cin, str); 
```

或者，如果您只想获得最多三个字符，您可以使用[`std::istream::getline`](http://en.cppreference.com/w/cpp/io/basic_istream/getline)：

```
char ch[4];
cin.getline(ch, 4, '\n'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:39:32.357

您正在读取字符值的输入。就是这个`*ptr`意思。我想你只想要普通的 ptr，它是一个指向字符数组的指针，它是用来接收数据的东西。你写的基本上是这样的：

```
char c;
cin >> c; 
```

我认为这不是您的意思，即使是这样，它也不会起作用，因为正如 Joachim Pileborg 上面指出的那样，`>>`操作员会像换行符一样跳过空格。一般来说，在读取输入时，最好是非常健壮。提供足够的空间，或者使用可以自动增长的变量（如`std::string`）或告诉系统你有多少空间（如`fgets()`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T06:42:45.147

以下将读取一行：

```
istream& getline (char* s, streamsize n ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-05T08:50:02.000

提取运算符将跳过前导空白并在遇到任何后续空白时停止执行。所以，当你想做这样的事情时，使用 std::istream::get() 或 std::istream::getline()。

# jquery - 在 JavaScript 中计算字符串距离/差异？

> ID：10169612
> 
> 赞同：0
> 
> 时间：2012-04-16T06:30:17.117
> 
> 标签：jquery

我必须比较两个字符串，因为 str1 包含多少百分比 str2。

```
str1="Hello wolrd"
str2="hello" 
```

意味着`distance(str1, str2)`应该返回 50% .. 就像那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:32:20.047

我不是数学家，无法为您展示这样的神奇公式，但是这个示例将让您开始使用递归 - 请仔细查看代码注释：

```
/* same_words array should hold the following:
   ["john", "bbc", "hot", "red,", "xyz,", "apples,", "and", "likes"]

   NOTES:
    - The more words you add, the less the percentage will be... that's how percent works.
    - milk and MILK are the same word, but:  MILK and MILK, aren't the same because of the comma (same goes for periods).
*/

var  jSmith =  'JOHN smith LIKES bananas, HOT chocolate, AND APPLES, nonsense, RED, 321, XYZ, BBC or npr',
jSmithArray =  jSmith.trim().toLowerCase().split(' '); //Makes an array of words for jSmith

var  jDoe =  'JOHN doe LIKES oranges, milk, AND APPLES, XYZ, 123, RED, green, HOT and... cnn sucks, BBC rocks',
jDoeArray =  jDoe.trim().toLowerCase().split(' '); //Makes an array of words for jDoe

var bothJohns = jSmithArray.concat(jDoeArray); //console.log(bothJohns);

var c = 0; //counter
var same_words = []; //collection container

//collects all the words that occur in both sentences
function collectSimilarWords(word) {
  same_words.push(word);
}

//The w parameter holds the word "john" for the 1st time.
//The fn parameter holds always the collectSimilarWords() function.
function recur(w, fn) {
  for (var p in jSmithArray) { //Every property of the jSmithArray Array holds a word string.
    if (w) {
       if (w == jSmithArray[p]) { //If the word we passed in as a parameter is the same word as one of the jSmithArray elements...
           fn( jSmithArray[p] ); //...then pass this word to the collectSimilarWords() function.
       }
       c += 1; //Increase c so we can move to...
       recur(jDoeArray[c], collectSimilarWords); //...the next word recursively.
    }
  }
}

//Call recur() and pass in the first word of the jDoeArray as the 1st param, and a function as the 2nd param.
recur(jDoeArray[c], collectSimilarWords);

function calcWhatever(samewords) { //Feel free to calculate however you want.
   var percent = ( (samewords.length * 100) / bothJohns.length ).toFixed(2);
   var msg = "Out of Smith\'s plus Doe's words (total: " + bothJohns.length + "), about " + percent + "% (or " + same_words.length + ") of them are found in both of their sentences!";
   return msg;
}

//Hopefuly setTimeout() will log the same_words array when the recursive function has finished.
window.setTimeout(function() {
    console.log(same_words);
    console.log(  calcWhatever(same_words)  );
}, 1000); 
```

代替`for in`循环，您可以像这样轻松地使用 for 循环：

```
for (var p = 0; p<jSmithArray.length; p++) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T06:50:40.447

请尝试以下代码。

```
<script>
var str1 = 'helloworld';
var str2 = 'hello';
var percent = 0;
var newstr = str1.search(str2);
if(newstr != -1){

    percent = (str2.length * 100)/str1.length;
   alert(percent+'%');

}else{
  alert(percent+'%');
}

</script> 
```

如果我理解你的问题，我相信这会对你有所帮助。

谢谢。

# c# - MVVM Light 绑定到 Observable 集合

> ID：10169613
> 
> 赞同：1
> 
> 时间：2012-04-16T06:30:21.157
> 
> 标签：c#, wpf, entity-framework, mvvm

我将 MVVM light 与 EF4 和 SQL CE 4 结合使用，但我的可观察集合存在问题。我的应用程序不一定需要使用 mvvm 模式，但由于我需要 observablecollection 的好处，我决定学习如何集成它。我可以成功地将我的属性实体数据库链接到我的列表框并显示它们，我还可以将这些实体的一些属性链接到文本框，但是当我尝试通过在文本框中键入来更新这些属性时，我遇到了困难。这是我的文本框和列表框的 xaml 代码：

```
 <TextBox Text="{Binding SaleTitle, ValidatesOnDataErrors=true, Mode=TwoWay}"
  <ListBox Height="424" 
        Margin="24,80,0,0"             
        x:Name="listBoxProperties"
        VerticalAlignment="Top" 
        ItemTemplate="{StaticResource propertySummaryTemplate}"
        IsSynchronizedWithCurrentItem="True"  
        Width="216" BorderThickness="0" Background="{x:Null}"
        FontFamily="Segoe UI" 
        ItemsSource="{Binding PropertyList}"
        SelectedItem="{Binding CurrentProperty, Mode=TwoWay}"
        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
        UseLayoutRounding="True" 
        HorizontalAlignment="Left" 
        ScrollViewer.VerticalScrollBarVisibility="Disabled" >          
    </ListBox> 
```

这是我的 MainViewModel 的一部分代码：

```
 private string _SaleTitle;
    public string SaleTitle
    {
        get
        {
            if (CurrentProperty != null)
                return CurrentProperty.SaleTitle;
            else
                return "";
        }
        set
        {
            _SaleTitle = value;
            RaisePropertyChanged("SaleTitle");
        }
    }

              private RelayCommand loadCommand;
    public ICommand LoadCommand
    {
        get
        {
            if (loadCommand == null)
                loadCommand = new RelayCommand(() => Load());
            return loadCommand;
        }
    }
    private void Load()
    {
        PropertyList = new ObservableCollection<Property>((from property in entities.Properties.Include("Images")
                                                          select property));
        propertyView = CollectionViewSource.GetDefaultView(PropertyList);
        if (propertyView != null)
            propertyView.CurrentChanged += new System.EventHandler(propertyView_CurrentChanged);
        RaisePropertyChanged("CurrentContact");
        RaisePropertyChanged("SaleTitle");
        RaisePropertyChanged("Address");
        RaisePropertyChanged("AuctioneerName");
        RaisePropertyChanged("AgentName");
        RaisePropertyChanged("Price");
        RaisePropertyChanged("NextBid");
        RaisePropertyChanged("Status");
    }

        void propertyView_CurrentChanged(object sender, System.EventArgs e)
    {
        RaisePropertyChanged("CurrentContact");
        RaisePropertyChanged("SaleTitle");
        RaisePropertyChanged("Address");
        RaisePropertyChanged("AuctioneerName");
        RaisePropertyChanged("AgentName");
        RaisePropertyChanged("Price");
        RaisePropertyChanged("NextBid");
        RaisePropertyChanged("Status");
    }

    private Property _CurrentProperty;
    public Property CurrentProperty
    {
        get
        {
            if (propertyView != null)
                return propertyView.CurrentItem as Property;
            return null;
        }

        set
        {
            _CurrentProperty = value;
            RaisePropertyChanged("CurrentProperty");
        }
    }

     public ObservableCollection<Property> PropertyList
    {
        get
        {
            return propertyList;
        }

        set
        {
            if (propertyList == value)
            {
                return;
            }

            var oldValue = propertyList;
            propertyList = value;

            // Update bindings, no broadcast
            RaisePropertyChanged(PropertiesPropertyName);
        }
    }

    public MainViewModel()
    {
        if (IsInDesignMode)
        {
            // Code runs in Blend --> create design time data.
        }
        else
        {
            // Code runs "for real"
            entities = new Model1Container1();
        }
    }

    ////public override void Cleanup()
    ////{
    ////    // Clean up if needed

    ////    base.Cleanup();
    ////}
} 
```

}

列表框已成功填充当前所选项目的内容，但是当我输入它并单击它或做任何事情以失去焦点时，它只会回到以前的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:35:56.553

查看您的 SaleTitle 属性定义。它从 CurrentProperty.Saletitle 读取值，但将值设置为未在任何地方使用的本地字段。

# jquery - jquery更改显示不起作用

> ID：10169614
> 
> 赞同：2
> 
> 时间：2012-04-16T06:30:22.010
> 
> 标签：jquery, html, css

当按下“按钮”时，我希望 div 变得可见。这是代表按钮的html：

```
<span id='dl' class='btn' data-app-id=''>DOWNLOAD<br/>FREE</span></div> 
```

这是按下按钮之前 div 初始阶段的 html。

```
<div class='box' id='dlbox' style='display:none'>
    <div class='title'>
        <span class='text'>Confirm install</span>
        <span id='x1' class='x'></span>
    </div>
    <p>Click to install </p>
    <p><?php echo "<span style='font-weight:bold'>$app->appName</span>"; ?></p>
</div>​ 
```

jquery是这样的：

```
$("#dl").live("click", function() {
    $("#dlblank").toggle();
    $("#dlbox").toggle();
});​ 
```

“切换”时 div 的 css：

```
.box {
    position: absolute;
    background: #4d0404;
    opacity: none;
    z-index: 9001;
    -webkit-box-shadow: 0 5px 7px black;
    text-align: center;
    color: white;
    top: 50px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:38:06.070

首先，您在`<div>`这里错过了开始标签

```
<div><span id='dl' class='btn' data-app-id=''>DOWNLOAD<br/>FREE</span></div> 
```

否则，您的代码运行良好，并且您的代码无法为您工作的唯一原因可能是您使用的是旧版本的 jQuery（例如 1.2.6）并且此处未定义实时函数。

我已经创建了 jsfiddle，你可以在这里看到它[http://jsfiddle.net/9wLjL/](http://jsfiddle.net/9wLjL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:40:58.163

你有一个标记错误。`</div>`没有打开的关闭。在第一行

接下来，您可能希望停止使用`.bind()`它已弃用。你应该`.on()`改用。

```
$("#dl").on("click", function(){
    $("#dlblank").toggle();
$("#dlbox").toggle();}); 
```

[演示](http://jsfiddle.net/3uEWr/) [没有`div`]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T06:37:06.040

我个人更喜欢使用显示和隐藏来代替切换，因为它更清楚发生了什么。我也会把 disply none 放在 jquery 中。

```
$('#dlbox').css('display':'none');   
$(document).ready(function() {   
       $("#dl").live("click", function(){
            $("#dlbox").show()
        });
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T06:43:05.717

确实`$('#dl').click(function(){ /*....*/ }`有效。

# javascript - Page_ClientValidate 返回 false 但没有一个验证器有错误

> ID：10169623
> 
> 赞同：3
> 
> 时间：2012-04-16T06:31:22.047
> 
> 标签：javascript, asp.net

我正在使用 Page_ClientValidate 进行验证。

即使没有无效输入，它也会返回 false。

```
 function PageValid() {

            var valid = Page_ClientValidate('save');

            alert(valid);

            if (valid == true) {

                $('.mydiv').hide();
            }

        } 
```

这里的“保存”是验证组。请帮帮我。

谢谢，拉杰比尔

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T07:01:20.090

[深入了解 ASP.NET 验证](http://msdn.microsoft.com/en-us/library/aa479045.aspx)和Java[脚本页面验证 Page_clientValidate()](http://weblogs.asp.net/pirabdulwakeel/archive/2010/09/02/java-script-page-validation-page-clientvalidate.aspx)

> 此函数的工作是检查页面是否有效，如果任何验证器无效，则此函数返回 false，否则返回 true。

```
if (Page_ClientValidate()) {

// Page is Ok

//Submit it To The Server

return true
} else {

//Page is Not Valid

//Return False

return false

} 
```

您可能缺少验证器上的验证设置或 js 上的其他错误。

您可以进行手动验证：

```
<script type="text/javascript" language="javascript">
    /* Manual client-side validation of Validator Groups */
    function fnJSOnFormSubmit() {
        var isGrpOneValid = Page_ClientValidate("valGrpOne");
        var isGrpTwoValid = Page_ClientValidate("valGrpTwo");

        var i;
        for (i = 0; i < Page_Validators.length; i++) { 
            ValidatorValidate(Page_Validators[i]); //this forces validation in all groups
        }

        //display all summaries.
        for (i = 0; i < Page_ValidationSummaries.length; i++) {
            summary = Page_ValidationSummaries[i];
            //does this summary need to be displayed?
            if (fnJSDisplaySummary(summary.validationGroup)) {
                summary.style.display = ""; //"none"; "inline";
            }
        }

        if (isGrpOneValid && isGrpTwoValid)
            return true; //postback only when BOTH validations pass.
        else
            return false;
    } 
```

参考：
[Page_ClientValidate() 与多个 ValidationGroups - 如何同时显示多个摘要？](https://stackoverflow.com/questions/1560812/page-clientvalidate-with-multiple-validationgroups-how-to-show-multiple-summ)
[Page_ClientValidate 正在验证多次。](https://stackoverflow.com/questions/969465/problem-with-page-clientvalidate)

# javascript - 使用 for..in 访问 JavaScript 属性

> ID：10169629
> 
> 赞同：0
> 
> 时间：2012-04-16T06:32:02.050
> 
> 标签：javascript, properties

问了一个[类似](https://stackoverflow.com/questions/4968406/javascript-property-access-dot-notation-vs-brackets)的问题，但它不符合我遇到的条件。

我知道要访问一个属性，我可以使用点表示法或括号表示法。[jibbering.com 上的一篇文章](http://www.jibbering.com/faq/faq_notes/square_brackets.html)也有同样的说法，这个[答案](https://stackoverflow.com/a/7083558/875968)也是如此。[规范也是这么](http://ecma262-5.com/ELS5_HTML.htm#Section_11.2.1)说的。

我有这个例子（[小提琴](http://jsfiddle.net/a45Se/)）并且有区别：

```
var utils = {
    myString: "boo",
    myNumber: 99,
    justNULL: null
};

for (var i in utils) {
    document.write ( i + " = " + utils.i + "<br/>" ); //result - undefined
    document.write ( i + " = " + utils[i] + "<br/>" );//result - the actual value
}​ 
```

我在这里缺少什么？是关于 for..in 的使用还是对象的定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:34:28.533

您需要在这里使用 utils[i] 格式，因为 i 是一个字符串，并且不能使用字符串引用来访问使用 use object.property 格式的属性。

```
var obj = {};
obj.foo = 'test';

obj.'foo' // doesn't work
obj['foo'] // works 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:34:52.953

不，问题在于点符号的使用。

You can't use a variable for the property name when you are using the point notation. The expression `utils.i` will access the property `i` in the object, it won't use the variable `i` for the name.

# aptana3 - Aptana Studio 3 中我的 CSS 文件图标上的红色 X 是什么？

> ID：10169630
> 
> 赞同：3
> 
> 时间：2012-04-16T06:32:15.720
> 
> 标签：aptana3

我有一个 Wordpress 主题的 CSS 文件，其图标覆盖有红色的“X”。我在文件中找不到任何错误。[CSS 在站点上正常工作，我尝试按照此处](https://stackoverflow.com/questions/6652793/how-can-i-suppress-certain-css-errors-in-aptana-studio-3)的建议关闭首选项中的 CSS 验证器。

这是图标上红色 X 的截图：

![](../Images/cffc7a0d6a8ab0c3a0de30eb4a19fab7.png)

这是我可以关闭的其他某种验证，还是我*必须*修复 CSS 中的某些内容才能让 Aptana 停止抱怨？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:45:55.240

是的，这表明文件存在验证问题。要禁用它，请执行以下操作：

打开您的项目并导航到 Window -> Preferences -> Aptana Studio -> Validation

取消选中 CSS 语法验证器中“构建”下的 grren 检查。

它应该提示您进行“完全重建”，选择“是”，之后您应该注意到“红色 X”消失了。

# perl - 如何在 perl 中访问 Expect 模块的缓冲区内容

> ID：10169631
> 
> 赞同：1
> 
> 时间：2012-04-16T06:32:17.907
> 
> 标签：perl, expect

我正在使用 expect 来自动化基于终端的应用程序。我将根据“expect”命令的结果发送数据。我知道期望，在进行字符串匹配时，会将所有不匹配的字符串模式存储在缓冲区中。例如$expect_out(0,string) 用于存储expect 实际等待的字符串，而$expect_out(buffer) 包含直到上一个命令出现的所有不匹配的字符串模式。

我想知道是否有任何方法可以访问这些期望缓冲区，例如将期望缓冲区内容复制到某个变量中，如下所示

```
$mybuffer = $expect_out(buffer); 
```

但上面的语句实际上是在 perl_app_hh.pl 第 72 行，靠近 "$expect_out(""

我只想将期望缓冲区的内容复制到变量中。所以请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:50:53.023

您将不得不阅读[Expect 模块的文档](http://search.cpan.org/~rgiersig/Expect-1.15/Expect.pod)。`$expect(buffer)`不是有效的 Perl。

```
$exp = Expect->spawn(...);
$exp->send(...);
$buffer = $exp->before(); 
```

# jquery - 结合 Twitter Bootstrap 组件：Dropdown 和 Accordion

> ID：10169636
> 
> 赞同：4
> 
> 时间：2012-04-16T06:33:05.933
> 
> 标签：jquery, twitter-bootstrap, drop-down-menu

我有一个全局导航元素，它是一个下拉菜单。但不是有一个，我想加入一个手风琴。我尝试将两者结合起来，但每次我单击手风琴中的元素时，它都会切换可见性并消失。虽然下次我打开它时，它会显示新的手风琴状态。所以手风琴正在工作，我只是无法让它保持可见。

有什么想法吗？

```
<div id="map" class="dropdown-menu" style="width:200px; position: absolute; top: 100%; left: 0; z-index: 1000; float: left; min-width: 200px;">
    <div class="accordion " id="accordion2">
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
              Collapsible Group Item #1
            </a>
          </div>
          <div id="collapseOne" class="accordion-body " style="height: 0px; ">
            <div class="accordion-inner">
              <a href="#" class="collapse ">Tester link</a>Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
            </div>
          </div>
        </div>
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
              Collapsible Group Item #2
            </a>
          </div>
          <div id="collapseTwo" class="accordion-body collapse" style="height: 0px; ">
            <div class="accordion-inner">
              Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
            </div>
          </div>
        </div>
        <div class="accordion-group">
          <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
              Collapsible Group Item #3
            </a>
          </div>
          <div id="collapseThree" class="accordion-body in" style="height: auto; ">
            <div class="accordion-inner">
              Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
            </div>
          </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:34:39.407

通过防止点击手风琴标题链接冒泡，我们可以保持下拉菜单打开：

[http://jsfiddle.net/JEHmK](http://jsfiddle.net/JEHmK)

希望这可以帮助。

# java - Java - glassfish - Web 服务 - 本地文件访问

> ID：10169637
> 
> 赞同：0
> 
> 时间：2012-04-16T06:33:16.793
> 
> 标签：java, web-services, glassfish-3, file-permissions, ubuntu-11.04

我在 Ubuntu 上使用 glassfish 服务器运行网络服务。问题是 - 它需要访问其共享资源之外的目录。目前它给出了一个错误，说“Permission Denied”。我也为 server.policy 设置了权限。

```
grant codeBase "/home/glassfish/glassfish/test/-" {
    permission java.security.AllPermission;
}; 
```

但它似乎不起作用。我试过`<property name="alternatedocroot_1" value="from=*.* dir=/home/glassfish/glassfish/test"/>`了，但似乎只授予阅读权限。我也需要写权限。所以我的问题是如何设置写权限？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:25:16.183

这不是 JavaSecurity 问题，因此您不需要在这方面进行任何调整。

FWIW 我们在各种风格的 Windows 上部署到 GF 的网络应用程序使用文件 API 写入“应用程序”目录之外的目录。Alternatedocroot 与 GF 使用 DefaultServlet 提供静态内容有关，而不是在应用程序部署目录之外写入。

在 Windows 上，当您作为服务运行时，您必须小心“运行方式”用户具有写入目标目录的适当权限，在 Unix 上，您需要确保由运行的 rc (init.d) 脚本设置的用户asadmin.sh 有权读取/写入目标目录。

我会仔细检查运行 GF 的 java 进程的用户是否对您尝试写入的目录具有 rwx 权限。确保用户可以写入目标文件夹。要对此进行测试，您可以向用户发送并使用“touch”命令，如下所示：touch /tmp/test 并以这种方式验证写入权限。通过运行“ls -l /tmp/test”类似地验证读取权限，以确保您可以读取它。

看看什么'ps -ef | grep java' 显示验证运行 GF java 进程的用户。此外，在您的代码中尝试指定测试文件的完整路径，例如。文件测试 = new File("/tmp/test");

您是从 rc 脚本运行 GF 还是从 shell 提示符使用 asadmin.sh 启动它？如果您正在运行 rc 脚本，请检查您的 rc 脚本是否真的以您期望的用户身份运行它。

# c# - 如何从 Json 序列化中排除属性

> ID：10169648
> 
> 赞同：290
> 
> 时间：2012-04-16T06:34:39.480
> 
> 标签：c#, json

我有一个我序列化的 DTO 类

```
Json.Serialize(MyClass) 
```

我怎样才能排除它的**公共**财产？

（它必须是公开的，因为我在其他地方的代码中使用它）

* * *

## 回答 #1

> 赞同：425
> 
> 时间：2014-08-29T10:24:54.740

**如果您使用 Json.Net**属性`[JsonIgnore]`，则在序列化或反序列化时将简单地忽略字段/属性。

```
public class Car
{
  // included in JSON
  public string Model { get; set; }
  public DateTime Year { get; set; }
  public List<string> Features { get; set; }

  // ignored
  [JsonIgnore]
  public DateTime LastModified { get; set; }
} 
```

或者您可以使用 DataContract 和 DataMember 属性来选择性地序列化/反序列化属性/字段。

```
[DataContract]
public class Computer
{
  // included in JSON
  [DataMember]
  public string Name { get; set; }
  [DataMember]
  public decimal SalePrice { get; set; }

  // ignored
  public string Manufacture { get; set; }
  public int StockCount { get; set; }
  public decimal WholeSalePrice { get; set; }
  public DateTime NextShipmentDate { get; set; }
} 
```

有关更多详细信息，请参阅[http://james.newtonking.com/archive/2009/10/23/efficient-json-with-json-net-reducing-serialized-json-size](http://james.newtonking.com/archive/2009/10/23/efficient-json-with-json-net-reducing-serialized-json-size)

* * *

## 回答 #2

> 赞同：158
> 
> 时间：2012-04-16T06:37:40.820

**如果您`System.Web.Script.Serialization`在 .NET 框架**[`ScriptIgnore`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.scriptignoreattribute.aspx)中使用，则可以在不应序列化的成员上放置一个属性。请参阅从[此处](http://www.creave.dk/post/2009/10/07/Excluding-properties-from-being-serialized-in-ASPNET-MVC-JsonResult.aspx)获取的示例：

> 考虑以下（简化的）案例：
> 
> ```
> public class User {
>     public int Id { get; set; }
>     public string Name { get; set; }
>     [ScriptIgnore]
>     public bool IsComplete
>     {
>         get { return Id > 0 && !string.IsNullOrEmpty(Name); }
>     } 
> } 
> ```
> 
> 在这种情况下，只有 Id 和 Name 属性将被序列化，因此生成的 JSON 对象将如下所示：
> 
> ```
> { Id: 3, Name: 'Test User' } 
> ```

**PS。**不要忘记添加对“ `System.Web.Extensions`”的引用以使其正常工作

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2019-12-07T15:09:27.117

抱歉，我决定写另一个答案，因为其他答案都不够可复制粘贴。

如果您不想使用某些属性来装饰属性，或者您无权访问该类，或者您想决定在运行时序列化什么等等等等。这就是您在 Newtonsoft.Json 中的操作方式

```
//short helper class to ignore some properties from serialization
public class IgnorePropertiesResolver : DefaultContractResolver
{
    private readonly HashSet<string> ignoreProps;
    public IgnorePropertiesResolver(IEnumerable<string> propNamesToIgnore)
    {
        this.ignoreProps = new HashSet<string>(propNamesToIgnore);
    }

    protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
    {
        JsonProperty property = base.CreateProperty(member, memberSerialization);
        if (this.ignoreProps.Contains(property.PropertyName))
        {
            property.ShouldSerialize = _ => false;
        }
        return property;
    }
} 
```

用法

```
JsonConvert.SerializeObject(YourObject, new JsonSerializerSettings()
        { ContractResolver = new IgnorePropertiesResolver(new[] { "Prop1", "Prop2" }) }); 
```

`ContractResolver`注意：如果您决定使用此答案，请确保缓存对象，否则性能可能会受到影响。

我已经在这里发布了代码，以防有人想添加任何东西

[https://github.com/jitbit/JsonIgnoreProps](https://github.com/jitbit/JsonIgnoreProps)

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2012-04-16T06:37:35.603

您可以使用`[ScriptIgnore]`：

```
public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
    [ScriptIgnore]
    public bool IsComplete
    {
        get { return Id > 0 && !string.IsNullOrEmpty(Name); }
    }
} 
```

在这种情况下，ID 和名称只会被序列化

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-07-29T07:01:02.747

如果您不像我那样热衷于使用属性来装饰代码，尤其是当您无法在编译时知道这里会发生什么时，这就是我的解决方案。

使用 Javascript 序列化器

```
 public static class JsonSerializerExtensions
    {
        public static string ToJsonString(this object target,bool ignoreNulls = true)
        {
            var javaScriptSerializer = new JavaScriptSerializer();
            if(ignoreNulls)
            {
                javaScriptSerializer.RegisterConverters(new[] { new PropertyExclusionConverter(target.GetType(), true) });
            }
            return javaScriptSerializer.Serialize(target);
        }

        public static string ToJsonString(this object target, Dictionary<Type, List<string>> ignore, bool ignoreNulls = true)
        {
            var javaScriptSerializer = new JavaScriptSerializer();
            foreach (var key in ignore.Keys)
            {
                javaScriptSerializer.RegisterConverters(new[] { new PropertyExclusionConverter(key, ignore[key], ignoreNulls) });
            }
            return javaScriptSerializer.Serialize(target);
        }
    }

public class PropertyExclusionConverter : JavaScriptConverter
    {
        private readonly List<string> propertiesToIgnore;
        private readonly Type type;
        private readonly bool ignoreNulls;

        public PropertyExclusionConverter(Type type, List<string> propertiesToIgnore, bool ignoreNulls)
        {
            this.ignoreNulls = ignoreNulls;
            this.type = type;
            this.propertiesToIgnore = propertiesToIgnore ?? new List<string>();
        }

        public PropertyExclusionConverter(Type type, bool ignoreNulls)
            : this(type, null, ignoreNulls){}

        public override IEnumerable<Type> SupportedTypes
        {
            get { return new ReadOnlyCollection<Type>(new List<Type>(new[] { this.type })); }
        }

        public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
        {
            var result = new Dictionary<string, object>();
            if (obj == null)
            {
                return result;
            }
            var properties = obj.GetType().GetProperties();
            foreach (var propertyInfo in properties)
            {
                if (!this.propertiesToIgnore.Contains(propertyInfo.Name))
                {
                    if(this.ignoreNulls && propertyInfo.GetValue(obj, null) == null)
                    {
                         continue;
                    }
                    result.Add(propertyInfo.Name, propertyInfo.GetValue(obj, null));
                }
            }
            return result;
        }

        public override object Deserialize(IDictionary<string, object> dictionary, Type type, JavaScriptSerializer serializer)
        {
            throw new NotImplementedException(); //Converter is currently only used for ignoring properties on serialization
        }
    } 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2019-11-21T18:08:27.377

如果您正在使用，`System.Text.Json`那么您可以使用`[JsonIgnore]`.
问答：`System.Text.Json.Serialization.JsonIgnoreAttribute`

微软官方文档：[JsonIgnoreAttribute](https://docs.microsoft.com/en-us/dotnet/api/system.text.json.serialization.jsonignoreattribute?view=netcore-3.0)

[如此处](https://docs.microsoft.com/en-us/dotnet/standard/serialization/system-text-json-overview)所述：

> 该库作为 .NET Core 3.0 共享框架的一部分内置。
> 对于其他目标框架，安装 System.Text.Json NuGet 包。该软件包支持：
> 
> *   .NET Standard 2.0 及更高版本
> *   .NET Framework 4.6.1 及更高版本
> *   .NET Core 2.0、2.1 和 2.2

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-20T15:09:14.290

你也可以使用`[NonSerialized]`属性

```
[Serializable]
public struct MySerializableStruct
{
    [NonSerialized]
    public string hiddenField;
    public string normalField;
} 
```

[来自 MS 文档](https://docs.microsoft.com/en-us/dotnet/api/system.nonserializedattribute?view=netframework-4.8)：

> 指示不应序列化可序列化类的字段。这个类不能被继承。

* * *

例如，如果您使用 Unity（**这不仅适用于 Unity**），那么它适用于`UnityEngine.JsonUtility`

```
using UnityEngine;

MySerializableStruct mss = new MySerializableStruct 
{ 
    hiddenField = "foo", 
    normalField = "bar" 
};
Debug.Log(JsonUtility.ToJson(mss)); // result: {"normalField":"bar"} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-07T13:23:37.327

为 dotnet core 添加 System.Text.Json 版本

对于编译时间，请按照上述答案中的建议添加 [JsonIgnore]。

对于运行时，需要将 JsonConverter 添加到选项中。

首先，为要排除的类型创建一个 JsonConverter，例如`ICollection<LabMethod>`下面

```
public class LabMethodConverter : JsonConverter<ICollection<LabMethod>>
{
    public override ICollection<LabMethod> Read(ref Utf8JsonReader reader, Type typeToConvert, JsonSerializerOptions options)
    {
        //deserialize JSON into a ICollection<LabMethod>
        return null;
    }

    public override void Write(Utf8JsonWriter writer, ICollection<LabMethod> value, JsonSerializerOptions options)
    {
        //serialize a ICollection<LabMethod> object
        writer.WriteNullValue();
    }
} 
```

然后在序列化 Json 时添加到选项

```
var options = new JsonSerializerOptions();
options.Converters.Add(new LabMethodConverter());
var new_obj = Json(new { rows = slice, total = count }, options); 
```

# java - 使用 j2me 通过蓝牙将短信从一部手机发送到另一部手机

> ID：10169651
> 
> 赞同：2
> 
> 时间：2012-04-16T06:34:53.713
> 
> 标签：java, java-me, bluetooth, sms

我需要使用蓝牙将短信（文本字符串）从一部手机发送到另一部手机。我正在使用 J2ME 开发它。

我了解 J2ME 和 midlets 的基础知识。并设法检测到附近的活动移动蓝牙设备。

我需要什么所有的 java 库文件和函数来发送短信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:32:57.190

您不能“通过蓝牙发送短信”。

如果您正在寻找一种将一段文本从一部手机发送到另一部手机的方法，最好创建一个 MIDlet 以使用 JSR 82 OBEX 发送带有 MIME 标头的字符串`text/plain`——在某些手机上，这将被解释作为传入的注释，然后可以读取。

对于完整的蓝牙聊天系统，您需要在另一端接收 MIDlet，并且可能在它们之间创建您自己的自定义协议。

[已经](http://sourceforge.net/projects/toothfairy/)有应用程序可以做到这一点。

# java - 为什么Java不允许接口中的私有成员？

> ID：10169654
> 
> 赞同：90
> 
> 时间：2012-04-16T06:35:12.873
> 
> 标签：java

为什么Java不允许接口中的私有成员？有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-16T06:38:17.723

来自[Java 语言规范，（访问控制）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)：

> “Java 编程语言提供了访问控制机制，以防止包或类的用户依赖于该包或类实现的不必要细节。”

访问控制就是隐藏实现细节。接口没有要隐藏的实现。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-03-22T14:07:41.387

在 Java 9 中，接口中的私有方法是可能的。

[Java 9 规范](http://mail.openjdk.java.net/pipermail/jdk9-dev/2015-March/001981.html)

> javac 编译器团队很高兴地宣布，从 JDK 的 9 b54 构建开始，接口中的私有方法的编译器支持可用。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-03-16T17:07:36.443

[作为JEP-213](http://openjdk.java.net/jeps/213)的一部分，私有接口方法是 Java 9 的一部分。由于 Java 8 中的接口可以有[默认方法](http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)，私有方法允许多个默认方法使用共享私有方法。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-06-18T08:23:25.497

从 Java 8 开始，接口可以有默认方法，从 Java 9 开始，一个接口允许有一个私有方法，这些私有方法只能通过同一接口中的默认方法访问。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-04-16T06:36:48.240

接口用于描述由任何实现该接口的类提供的 API。由于定义中的接口没有状态，因此无需在其中声明字段成员。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-04-16T07:02:11.813

没有办法实现这样的接口。 [对我提出的一个问题的回答](https://stackoverflow.com/a/6863600/348975)强烈表明，用私有方法实现接口是不可能的（如果不彻底改变规则）——这就留下了为什么不允许受保护和封装私有方法的问题。

```
class OuterClass
{
     void run ( MyInterface x )
     {
           x . publicMethod ( ) ;  // why not?
           x . protectedMethod ( ) ; // why not?
           x . packagePrivateMethod ( ) ; // why not?
           x . privateMethod ( ) ; // why not?
     }

     interface MyInterface
     {
           public abstract void publicMethod ( ) ; // OK

           protected abstract void protectedMethod ( ) ; // why not?

           abstract void packagePrivateMethod ( ) ; // in interface default is public, but why not package private

           private void privateMethod ( ) ; // impossible to implement
     }

     class MyImpl implements MyInterface
     {
           public void publicMethod ( ) { } // ok

           protected void protectedMethod ( ) { } // no sweat

           void packagePrivateMethod ( ) { } // no sweat

           private void privateMethod ( ) { } // not happening
     }
} 
```

下面的代码应该达到预期的结果。尽管所有方法都是公共的，但只有公共方法才是有效的公共方法。protected 方法得到有效保护。packagePrivateMethod 实际上是 packagePrivate。privateMethod 实际上是私有的。

```
class WorkAround
{
     void run ( MyPrivateInterface x )
     {
           x . publicMethod ( ) ;  
           x . protectedMethod ( ) ; 
           x . packagePrivateMethod ( ) ; 
           x . privateMethod ( ) ; 
     }

     public interface MyPublicInterface { void publicMethod ( ) ; }

     protected interface MyProtectedInterface extends MyPublicInterface { void protectedMethod ( ) ; }

     interface MyPackagePrivateInterface extends MyProtectedInterface { void packagePrivateMethod ( ) ; }

     private interface MyPrivateInterface extends MyPackagePrivateInterface { void privateMethod ( ) ; }
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-04-16T07:03:29.307

根据`Java`编程语言的范围`private members`仅限于`class`声明它的地方，并且只能通过 that 的方法访问`class`。但是`inteface`没有方法体，因此没有使用在`interface`.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-04-10T09:10:14.137

**Java 允许在 Java 9 的接口中使用私有方法**。[默认方法](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)是在 Java 8 中引入的。可能多个默认方法想要共享一些代码，然后可以将此代码移动到私有方法而不将其暴露给外部世界。此[错误](https://bugs.openjdk.java.net/browse/JDK-8071453)已得到修复，并从[JDK 9](https://jdk9.java.net/download/) build 54 开始，对私有接口方法的编译器支持已恢复。

```
public interface IData{
   default void processData(int data) {
      validate(data);
      // do some work with it
   }
   default void consumeData(int data) {
      validate(data);
      // do some work with it
   }
   private void validate(int data) {
     // validate data
   }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-04-16T06:37:11.117

这是因为它们将毫无用处。

没有办法调用私有方法。

私有成员是一个实现细节。接口是关于一个类可以承担的公共角色。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-04-16T07:32:44.757

私有字段不会完全没用，因为其他字段和内部类可以访问它们。

然而，即使在嵌套类中，私有方法也无法实现，这使得它们几乎毫无用处。您可以使用反射来阅读它们，但这是一个极端情况。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-04-16T06:37:32.693

私有成员在界面中没有意义。接口是一种使用已定义方法访问类的方法，您不需要查看该类的内部。

私人成员不同意这一点。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-07T17:09:04.343

> 声明为私有的类的成员不会被该类的子类继承。只有声明为protected 或public 的类的成员才能被声明在一个包中的子类继承，而不是声明该类的那个。

[源](https://stackoverflow.com/a/4716335/2703795)

所以你在一个接口中没有任何工作方法可以与那个私有的不可继承字段一起工作，那它为什么要存在呢？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-10T00:36:32.297

是的，不能那样做。对于所有评论为什么不应该这样做的人：

想象一下，我有 A 类，它使用接口 I。B 类扩展了 A 类，因此也继承了 A 中的所有接口方法。

现在，假设我想要 A 类中的私有方法，但也希望它以合同方式为其他类定义（可能是 C 类，它不一定扩展 B 类或 A 类）。

也许对于“初始化”方法，我想要所有使用 I 接口的类。但显然我不希望一个初始化方法是公开的......因为它应该只使用一次，或者类认为有必要，而不仅仅是因为你想随意使用它。

唯一的解决方案是一种解决方法，或者通过简单地将 init 方法强制到类本身而没有接口。

我当然不太了解原因，但有时它仍然可以派上用场。显然，Oracle 同意他们在 JDK 9 中允许私有接口方法。

无论如何，我所做的是放置一个简单的布尔变量，这样接口方法（应该是私有的）可以在设置一次后标记为真（初始化=真）。然后当再次调用该方法时，它什么也不做。这样接口方法可以实现为public，但是由于（我的类的）构造函数首先调用该方法，这将变量设置为true，因此不能再次调用它。

否则，如果您只希望类的内部工作来使用它，您将不得不尝试不同的解决方法......也许方法本身在使用它时会设置一个标志打开和关闭。当标志为假时，该方法什么也不做（这将是当有人从类外部调用它时）。但是，当类自己的方法调用它时，他们很快将标志设置为true，然后调用方法，然后将标志设置为false？？

到底是种哑巴。现在可能只是将私有类简单地放入类本身并完全删除接口更好。

# yii - yii-user 扩展 - 如何添加复选框配置文件字段？

> ID：10169658
> 
> 赞同：2
> 
> 时间：2012-04-16T06:35:56.867
> 
> 标签：yii, user-profile, user-registration

Yii 框架，yii [-user 扩展](http://www.yiiframework.com/extension/yii-user/ "http://www.yiiframework.com/extension/yii-user/")（迄今为止都使用最新版本）：如何为所有用户的个人资料添加一个简单的“复选框”字段？

我以管理员身份登录，然后转到**user/profileField/admin**。我可以添加新字段，但最接近的是添加一个呈现为下拉列表的“BOOL”字段，而我需要一个**复选框**...。当使用“BOOL”时，我无法指定小部件，即使可以，也没有关于这些 yii-user 小部件的文档。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:26:27.857

打开 modules/yii-user/views/user/registration.php。在第 40 行左右，添加如下内容：

```
else if ($field->field_type=='BINARY') echo $form->checkBox($profile,$field->varname,array()); 
```

现在，当您要创建复选框字段时，请选择 BINARY 字段类型。如果您想要求检查它，请将其添加到“其他验证器”字段：{“compare”：{“compareValue”：“1”}}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:26:38.750

我查看了该扩展的文档，实际上我在屏幕截图中的任何地方都没有看到一个复选框，也没有在 wiki 的任何地方提到。

你也许可以在你需要的地方潜入并添加对它的支持，Yii 很好地处理了所有的 HTML 元素，因此以原始形式添加该功能应该不会太难。`CHtml::checkBox()`或`CHtml::checkBoxList()`。

再说一次，如果您已经遇到了问题，从长远来看，您自己编写自己需要的东西可能会更容易。

# iis - 如何在组件中添加条件？

> ID：10169659
> 
> 赞同：0
> 
> 时间：2012-04-16T06:36:10.473
> 
> 标签：iis, installation, wix, conditional-statements

我的要求是在同一个安装程序中添加以下提到的场景。

1.  如果 IIS 版本为 5.1，则在默认网站下创建虚拟目录
2.  如果 IIS 版本等于或大于 6，则创建一个新网站。

我添加了如下给出的代码，但它不起作用。

```
 <DirectoryRef Id="ServDir">
   <Directory Id="ServerWebDIR" Name="$(var.Manufacturer_WWW_LONG_DIRNAME)">
   <Component Id="$(var.ServerWeb_Id)" Guid="$(var.ServerWeb_Component_GUID)">          
   <File Id="FLSW_admin.html" DiskId="1" Name="admin.html" Source="$(var.SERVER_wwwDir)admin.html" />
   <RemoveFolder Id="FLSW_admin.html On="uninstall" />             
  </Component>
  </Directory>

  <Component Id="TestWebVirtualDirComponent" Guid="{F509D5DC-3F13-4AAF-974E-0D7EF82EE4B2}">
    <Condition>IISMAJORVERSION = "#5"</Condition>
    <CreateFolder/>
    <iis:WebVirtualDir Id="WebDir" Alias="$(var.VirtualDirAlias)" Directory="ServerWebDIR" WebSite="DefaultWebSite" DirProperties="WebDirProperty">
    <iis:WebApplication Id="TestWebApplication" Name="$(var.VirtualDirAlias)"/>
    </iis:WebVirtualDir>
  </Component>

  <Component Id="WebSite" Guid="{F509D5DC-3F13-4AAF-974E-0D7EF82EE4B3}">
    <Condition>IISMAJORVERSION >= "#6"</Condition>
    <CreateFolder />
    <iis:WebSite Id="WebSiteFolder" Description="$(var.EnterpriseWebSiteDescription)" Directory='ServerWebDIR'>
    <iis:WebAddress Id="AllUnassigned" Port="80" />
    </iis:WebSite>
  </Component>
</DirectoryRef>

<iis:WebDirProperties Id="WebDirProperty" Execute="yes" Script="yes" Read="yes" />
<iis:WebDirProperties Id="WebDirPropertyForbidExecution" Execute="no" Script="yes" Read="yes" />
<iis:WebSite Id="DefaultWebSite" Description="Default Web Site" >
  <iis:WebAddress Id="AllUnassigned1" Port="80" />
</iis:WebSite> 
```

我的代码有什么问题。请任何人建议如何在同一安装程序中实现我的要求？

# json.net - 如何在 ASP.NET MVC 4 Beta 中使用 JSON.NET

> ID：10169660
> 
> 赞同：2
> 
> 时间：2012-04-16T06:36:22.963
> 
> 标签：json.net, asp.net-mvc-4, asp.net-web-api, upshot

为 JSON.NET 序列化程序交换标准序列化程序不是问题。下面的代码直接取自 Scott Hanselman 的博客

[http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)

```
JsonSerializerSettings serializerSettings = new JsonSerializerSettings() { ReferenceLoopHandling = ReferenceLoopHandling.Ignore };
serializerSettings.Converters.Add(new IsoDateTimeConverter());
GlobalConfiguration.Configuration.Formatters[0] = new JsonNetFormatter(serializerSettings); 
```

但是，这样做后我无法保存任何内容，ajax 调用失败。我回来的错误是：

此 DataController 不支持实体“JObject”的“插入”操作。

JObject 是从 JSON.NET 序列化程序返回的内容。它不尊重附加到实体的“__type”属性。

示例 JSON：

```
[{"Id":"0","Operation":1,"Entity":{"__type":"Product:#Catalog.Models","Sku":"adsfadsf"}}] 
```

除了深入 JSON.NET 源代码来解决这个问题，我还能做些什么吗？ASP.NET MVC 4 Beta 中是否有更新可以解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:42:14.620

这已经是 WebAPI 贡献的一部分。看看[这里](https://github.com/WebApiContrib/WebAPIContrib/blob/master/src/WebApiContrib.Formatting.JsonNet/JsonNetFormatter.cs)。代码实际上非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:20:37.970

ASP.NET MVC 4 仍处于测试阶段，有几个功能还不能 100% 工作。上次检查Newtonsoft.Json和JsonSerializer的集成是不完整的。在与 ASP.NET 团队的一些人交谈后，据我了解，它正在开发中，但没有完成的时间表。

# java - 是否可以使用 Java AWS API 更新 Route53 记录？

> ID：10169666
> 
> 赞同：4
> 
> 时间：2012-04-16T06:36:56.327
> 
> 标签：java, amazon-web-services, amazon-route53

我在 AWS Route53 上有一个托管域。在该域下，我有一个子域的“A”记录。

我希望能够使用 Java API 更新“A”记录的 IP 地址。但是，在查看类的`setAction`方法时`com.amazonaws.services.route53.model.Change`，它只接受`CREATE`or`DELETE`值。这似乎与 Java API 在后台发送的 XML 消息中的允许值相匹配。

有什么办法只更新IP地址，还是我必须删除原始记录然后重新创建？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-11T19:25:04.573

使用这段代码对我有用：

```
ResourceRecord record = new ResourceRecord(loadBalancer);
List<ResourceRecord> records = new ArrayList<ResourceRecord>();
records.add(record);
ResourceRecordSet recordsSet = new ResourceRecordSet();
recordsSet.setResourceRecords(records);
recordsSet.setType(RRType.CNAME);
recordsSet.setTTL(900L);
recordsSet.setName(subdomain + ".");
Change change = new Change(ChangeAction.CREATE, recordsSet);
List<Change> changes = new ArrayList<Change>();
changes.add(change);
ChangeBatch batch = new ChangeBatch(changes);
ChangeResourceRecordSetsRequest request = new ChangeResourceRecordSetsRequest();
request.setChangeBatch(batch);
request.setHostedZoneId(hostedZoneId);
ChangeResourceRecordSetsResult result = getRoute53Client().changeResourceRecordSets(request);
System.out.println(result); 
```

只需将我使用的变量替换为适当的数据即可。（子域、loadBalancer 和 hostsZoneId）。方法 getRoute53Client() 从 AWS API 返回 AmazonRoute53Client 类的实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-08T11:37:24.950

```
 ResourceRecord rr = new ResourceRecord(IPAdress); // IPAddress will be String variable that has IP value
        List<ResourceRecord> rrList = new ArrayList<ResourceRecord>();
        rrList.add(rr);

        // Create a ResourceRecordSet
        ResourceRecordSet resourceRecordSet = new ResourceRecordSet();
        resourceRecordSet.setName(domainName); //domainName is String value of your domain
        resourceRecordSet.setType(RRType.A); //type of ResourceRecordSet
        resourceRecordSet.setTTL(new Long(300));
        resourceRecordSet.setWeight(new Long(0));
        resourceRecordSet.setResourceRecords(rrList);

        // Create a change
        Change change = new Change(ChangeAction.CREATE, resourceRecordSet);
        List<Change> changesList = new ArrayList<Change>();
        changesList.add(change);

        // Create a change batch
        ChangeBatch changeBatch = new ChangeBatch(changesList);

        // Create ChangeResourceRecordSetRequest.
        ChangeResourceRecordSetsRequest request = new ChangeResourceRecordSetsRequest(hostedZoneID, changeBatch); //hostedZoneId is variable that is the id of HostedZone

        // Send the request and get the response.
        ChangeResourceRecordSetsResult result = amazonRoute53Client.changeResourceRecordSets(request);

        // Print the result
        System.out.println(result.getChangeInfo()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T06:51:29.977

[唯一的方法是使用这里](http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/RRSchanges.html)提到的 DELETE/CREATE 序列。

> 创建更改批次请求
> 
> 要创建更改批处理请求，请使用 ChangeResourceRecordSets 操作 ChangeBatch 元素。对于要更新的​​每条记录，您可以在 ChangeBatch 元素中使用 CREATE 和 DELETE 操作。如果您只创建记录，那么您将只使用 CREATE 操作。

# java - Java：输入/使用“try-catch”块的开销？

> ID：10169671
> 
> 赞同：3
> 
> 时间：2012-04-16T06:37:14.993
> 
> 标签：java, performance, jvm, try-catch

这个问题说明了一切。尽管命中不是很显着（我测量它慢了 1.5 倍到 2 倍），但带有 try-catch 的字节码和没有它的字节码之间没有区别。那么是什么让它通常变慢呢？

PL。请注意，问题不是关于抛出异常的开销，而是关于进入/离开 try 块的开销。

编辑：这是代码（在 Hotspot 1.6.0_31 服务器上运行）

```
static void tryCatch()
{
    int i = 0;
    long l1 = getTime();
    for(int j = 0; j < 100000; j++)
    {
        try
        {
            i++;                
        }
        catch(Exception e)
        {

        }
    }
    long l2 = getTime();
    System.out.println("with try-catch: " + (l2 - l1) + ": " + i);      
}

static void noTryCatch()
{
    int i = 0;
    long l1 = getTime();
    for(int j = 0; j < 100000; j++)
    {
        i++;
    }
    long l2 = getTime();
    System.out.println("w/o  try-catch: " + (l2 - l1) + ": " + i);
}

static long getTime()
{
    return System.nanoTime();       
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T07:19:38.787

由于您有一个微基准，因此您更有可能测试 try/catch 块对 JVM 编译器的混淆程度。例如，JVM 可以足够聪明地改变

```
for(int j = 0; j < 100000; j++) {
    i++;
} 
```

进入

```
i += 100000 * 1; 
```

使用 try/catch 块可能会阻止更积极的优化，但对于更现实的代码块可能没有任何区别。

* * *

无论如何，我通常会更改类似

```
for(int j = 0; j < 100000; j++) {
    try {
        // do something
    } catch(Exception e) {
        // break or return
    }
} 
```

.

```
try {
    for(int j = 0; j < 100000; j++) {
        // do something
    }
} catch(Exception e) {
    // continue or return
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-21T22:13:36.363

我对另一个问题的微[基准](https://stackoverflow.com/a/18938171/1851024)测试表明，使用/不使用 try-catch 块之间没有显着差异，无论是否在块中引发异常。

# node.js - Node.js 的非阻塞 ClientRequest.write()

> ID：10169672
> 
> 赞同：1
> 
> 时间：2012-04-16T06:37:17.503
> 
> 标签：node.js, nonblocking

根据[http.js](https://github.com/joyent/node/blob/master/lib/http.js#L470)`ClientRequest.write(chunk,encoding)`，节点模块的方法`http`是阻塞的：控制流暂停，直到所有数据（当前数据和所有缓冲数据）都发送完毕。

我想使用多个并行连接同时发送大量数据。是否有任何（直接）方法可以创建方法的非阻塞版本，就像`ClientRequest.write(chunk,encoding,callback)`“在后台”发送数据并在发送完成时触发回调处理程序（或事件）一样？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:26:50.087

使用 Node 的 Stream.pipe() 将数据流式传输到多个其他流中。例如：

```
var w1 = fs.createWriteStream('input-1');
var w2 = fs.createWriteStream('input-2');
request.pipe(w1);
request.pipe(w2); 
```

# javascript - jquery.js 是否缓存在浏览器中？

> ID：10169677
> 
> 赞同：1
> 
> 时间：2012-04-16T06:37:52.250
> 
> 标签：javascript, jquery

我正在使用 Jquery.js，我想知道浏览器是否为每个页面缓存 jquery 文件或此文件传输。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T06:39:23.383

缓存与特定文件无关，它与该文件的标题有关。

默认情况下，大多数文件将被缓存，但是缓存的持续时间取决于文件的标头设置。所以是的，它应该使用默认设置进行缓存。

这里有一点关于缓存的信息[http://www.web-caching.com/mnot_tutorial/how.html](http://www.web-caching.com/mnot_tutorial/how.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:50:13.497

它取决于服务器和客户端。一旦客户端有了文件，它就可以使用`If-Modified-Since`标头告诉服务器有关文件的缓存副本。然后，服务器可以`304`使用可选`Last-Modified`的`Expires`和`Cache-Control`标头响应状态，以指示缓存的状态以及客户端何时应请求新副本。如果缓存副本不可用，服务器可以正常响应。

您应该考虑使用公共托管的 jQuery 文件之一： http: [//docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)

这些更有可能缓存在客户端上。

# asp.net - 如何识别asp.net中doc文件的字体样式和大小？

> ID：10169684
> 
> 赞同：0
> 
> 时间：2012-04-16T06:38:34.853
> 
> 标签：asp.net

我正在开发一个特殊的工作门户网站`asp.net`。在这里，我想显示简历（`.doc`文件）预览，并且该简历中的一些内容显示在文本框中。

这里我的问题是，我可以根据简历上的字体样式和字体大小找到内容吗？

请回答任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:01:46.180

您可以使用 OpenXMl SDK 工具。它为您提供 xml 文件格式的文档，并且每个段落都有它的属性，包括字体名称和大小。例如：

```
 <w:p w:rsidR="00941A8B" w:rsidP="00941A8B" w:rsidRDefault="00941A8B" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
      <w:pPr>
         <w:jc w:val="center" />
         <w:rPr>
           <w:rFonts w:ascii="Arial" w:cs="Arial" />
           <w:sz w:val="24" />
           <w:szCs w:val="24" />
           <w:rtl />
        </w:rPr>
      </w:pPr>
   </w:p> 
```

你必须阅读更多关于它的信息。[你可以在这里](http://www.notesfor.net/post/2009/09/16/Add-and-update-custom-document-properties-in-a-docx-.aspx)看到更多信息。对不起，我不能给你具体的代码怎么做，但我可以说你**可以**通过这个工具来做

# jquery - 使用 JQuery 在按钮上添加 onclick 操作

> ID：10169685
> 
> 赞同：5
> 
> 时间：2012-04-16T06:38:45.413
> 
> 标签：jquery

我有一个按钮，它已经有一个 onclick 事件和一个分配的功能。我希望在它前面添加另一个函数调用。我可以想象应该可以摆弄 onclick 属性 ( `attr`)，但我认为这不是最佳实践。

您认为在现有 onclick 事件上添加函数调用的最佳实践是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T07:07:38.077

如果你不怕弄乱 jQuery 的胆量：

```
// "prepend event" functionality as a jQuery plugin
$.fn.extend({
  prependEvent: function (event, handler) {
    return this.each(function () {
      var events = $(this).data("events"), 
          currentHandler;

      if (events && events[event].length > 0) {
        currentHandler = events[event][0].handler;
        events[event][0].handler = function () {
          handler.apply(this, arguments);
          currentHandler.apply(this, arguments);
        }      
      }
    });
  }
});

$("#someElement").prependEvent("click", function () {
    whatever();
});​ 
```

现场观看：http: [//jsfiddle.net/Tomalak/JtY7H/1/](http://jsfiddle.net/Tomalak/JtY7H/1/)

请注意，必须已经存在 a `currentHandler`，否则该函数将不会执行任何操作。

***免责声明：****我认为这是一种黑客行为。这取决于可能在库的下一个版本中更改的 jQuery 内部结构。它现在可以工作（我测试了 jQuery 1.7.2），但如果它与 jQuery 的未来版本中断，请不要感到惊讶。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T06:52:18.693

我在这里写了一个简短的[例子](http://jsfiddle.net/n2eaq/)：

```
​$("button").click(function() { // this is already existing
    if ($("span").length) {
        alert("ok");
    }
});

var clicks = $("button").data("events").click.slice();
$("button")
    .unbind("click")
    .click(function() { // this is the new one which should be prepended
        $("body").append($("<span>"));
    });
$.each(clicks, function(i, v) {
    $("button").click(v);
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T06:43:53.490

我认为没有办法在现有的 onclick 事件上预先调用函数，但是你可以试试这个：

```
$('#foo').unbind('click');
$('#foo').click(function() { 
   // do new function call..
   // call original function again...
}); 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T06:41:59.273

您可以在单个事件上添加功能，但我尽量避免在 onclick 事件上使用两个功能。相反，您可以
1\. 在现有函数中添加新代码。
2.从现有函数中添加对新函数的调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-29T18:24:26.243

这似乎适用于 1.9.1 到 3.1.4。对于 1.9.1 之前的版本，请参阅[Tomalak 的精彩回答](https://stackoverflow.com/a/10169956/3917091)。

```
$(function() {
  $("input" ).mousedown( function() {
    console.log( "mousedown" );
  });

  $("input" ).click( function() {
    console.log( "click" );
  });

  $.fn.extend({exposeListeners: 
      function (fn) {
        return $._data( this[0], "events") || {};
      },
    prependListener: function (types, fn) {
      var elems = this;
      $(elems).each(function() {
        var elem = this;
        var $elem = $(elem)
        $elem.on(types, fn);

        var events = $._data( $elem[0], "events")[types];

        if (events.length > 1) { // its the only event, no reason to shift
            events.unshift(events.pop());  // put last as first
        }

        return this;
      });
    }
  })

  $("#prep").click(function () {
    console.log($("input").exposeListeners());
    $("input:not(:last)").prependListener("click", function () {
      console.log('click, prepended');
    })
    $("a").prependListener("click", function () {
      console.log('click event created');
    })
    console.log($("body").exposeListeners());
  })
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<input type="button" value="input, Will accept prepend"><br>
<input type="button" value="input, Will also accept prepend"><br>
<input type="button" value="input, Will not"><br>
<a href="#">Link with no pre-exting handlers</a><br><br>

<Button id="prep">Prepend an event</Button>
```

这是一个准系统版本

```
$(function() {
  $.fn.extend({prependListener: function (types, fn) {
      var elems = this;
      $(elems).each(function() {
        var elem = this;
        var $elem = $(elem)
        $elem.on(types, fn);

        var events = $._data( $elem[0], "events")[types];

        if (events.length > 1) {
          events.unshift(events[events.length-1]);
          events.pop();
        }

        return this;
      });
    }
  })
}) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-16T06:42:41.467

如果您已像这样绑定事件

```
$(elem).on('click', functionName); 
```

你可以这样修改：

```
$(elem).on('click', function(){

 anotherFunctionNameOrWhateverYouWant();

 functionName();
}); 
```

# facebook - 关于 Facebook 注册插件的建议

> ID：10169689
> 
> 赞同：0
> 
> 时间：2012-04-16T06:38:54.600
> 
> 标签：facebook, registration

好的，所以我想为用户添加使用他们的 facebook 帐户注册到站点的功能。我已经在线浏览了开发文件和各种教程。问题是，无论我采用什么方法，我都无法让它发挥作用。

我也尝试过使用这里的源代码：http: [//www.masteringapi.com/tutorials/how-to-use-facebook-registration-plugin-as-your-registration-system/15/](http://www.masteringapi.com/tutorials/how-to-use-facebook-registration-plugin-as-your-registration-system/15/)

该网站是否需要一些依赖项，是否需要一些其他系统才能加载 facebook？

这是该站点的测试版本：http: [//ohmsgaming.com/Misc/nstdt/v2/](http://ohmsgaming.com/Misc/nstdt/v2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:00:58.123

您的页面显示错误，例如“'redirect_uri' 应该是绝对网址。”

在请求查询的重定向 URL 字段中使用绝对 Uri 来解决问题。

您可以使用开放身份验证技术在您的站点中设置身份验证系统。一旦用户通过身份验证，您将获得用户的公开共享信息。该信息可以在首次登录时在网站上注册。

我在[http://www.nowrunning.com](http://www.nowrunning.com)中使用brickred 的社交身份验证代码成功地实现了相同的功能。

[http://code.google.com/p/socialauth/wiki/GettingStarted](http://code.google.com/p/socialauth/wiki/GettingStarted)

# c# - 使用 MailMessage 和 SmtpClient 或 MessageQueue 延迟发送电子邮件

> ID：10169690
> 
> 赞同：2
> 
> 时间：2012-04-16T06:38:55.817
> 
> 标签：c#, asp.net, email, message-queue

我正在使用`SmtpClient`并`MailMessage`从`ASP.Net`代码发送电子邮件。我希望能够根据业务逻辑**延迟发送电子邮件。**我将能够生成一个`DateTime`关于何时实际发送电子邮件的对象。

我知道我可以创建一个**Windows 服务**`Sql Server`来使用数据库作为电子邮件存储来安排电子邮件传递。但我不想在托管服务器上部署额外的服务。

我也知道我可以创造一个`SQL Server`工作来实现这一点，但我不想，直到和除非，这不能使用纯`ASP.NET`

需要注意的是，我的代码检查是否`MSMQ`在服务器上启用。如果是，则将`MessageQueue`类用于电子邮件传递。因此，任何有关使用队列实现此目的的指针都会有所帮助。

顺便说一句，解决方案应该在两种情况下都有效（即`SmtpClient`与`MessageQueue`.

我已经审查了[这个](https://stackoverflow.com/questions/5161247/c-net-best-way-to-queue-emails-with-attachments-for-sending)和[这个](https://stackoverflow.com/questions/4973976/good-examples-of-applications-using-message-queues)问题及其接受的答案。我不想使用 3rd 方产品，除非使用 pure 无法实现`ASP.NET`

PS .Net Framework 版本：3.5，IIS 7 和 Sql Server 2008 应该是环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:21:44.130

有关在 asp.net 中保持计时器运行的一些信息，包括关于始终在线场景的精彩评论：

[在 Web 应用程序启动时启动计时器](https://stackoverflow.com/questions/3000781/start-timer-on-web-application-start)

您可以使用以下方法来阻止 asp.net 关闭：

[你能阻止你的 ASP.NET 应用程序关闭吗？](https://stackoverflow.com/questions/1306380/can-you-prevent-your-asp-net-application-from-shutting-down)

您可以简单地使用计时器来检查数据库并发送所有待处理的邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:48:09.677

经过客户的一些研究和澄清，决定我应该创建一个长时间运行的后台线程，它将在预定时间处理电子邮件的发送，而不必担心应用程序池是否由于不活动而关闭。

# jsp - 在jsp页面中格式化字符串。

> ID：10169702
> 
> 赞同：1
> 
> 时间：2012-04-16T06:40:07.333
> 
> 标签：jsp

我被困在一种情况下。我正在使用带有 JDBC 模板的 spring。我正在显示一个 jsp 页面，我在其中发送模型属性对象，然后显示相应对象的内容。

```
 String test=request.getAttribute("question").toString();  
    String str2=test.substring(0, 124); 
    String str3=test.substring(125); 
```

这就是我要夹住整个字符串的内容。现在在 jsp 标签中我想同时显示 str2 然后 br 和 str3 下面是我的 jsp 标签

```
<input type="text"  style="width: 700px;" readonly="true" value="<%=str2 %> " id="subjectTitle"/> 
```

在此刻

```
 value="<%=str2 %> " 
```

我想连接 str2+ str3 但在 dis 两个之间我希望 str3 字符串应该转到下一行。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:37:05.383

你不能。唯一设计为多行的 HTML 表单元素是[textarea](https://developer.mozilla.org/en/HTML/Element/textarea)

input type text 创建单行文本输入控件。[使用 INPUT 创建的控件类型](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:58:15.293

在两个表达式之间使用 HTML 中断标记以在下一行显示您的答案

# php - 使用 XMLWriter 编写 XML 代码

> ID：10169703
> 
> 赞同：0
> 
> 时间：2012-04-16T06:40:22.877
> 
> 标签：php, xml

早安社区，

存在于 php 框架或特别是 XMLWriter 类中的一种编写纯 XML 代码的方法？

我的目标是将数据库中的 XML 数据嵌入到使用 XMLWriter 类创建的其他 XML 代码中。

例如我写过

```
<Data>
  <Element1 attribute="Value">

    <!-- 
         Write here XML code from DB,
         so following code retrieved from DB as text
    -->

    <strong>Bolded</strong> text and <em>italic</em> text....

  </Element1>
</Data> 
```

我知道存在 writeElement、startElement 和 endElement 函数，但这不能解决我的问题。

所以源必须看起来像这样：

```
// $sourceFromDB is a string as XML code got from the DB

$writer->startElement("Data");

$writer->startElement("Element1");
$writer->writeAttribute("attrbitue", "Value");

// The code to write XML code
// writeXML is a pseudo method
$writer->writeXML($sourceFromDB);

$writer->endElement();
$writer->endElement(); 
```

还是我必须编写一个算法来做到这一点？

任何人的想法？非常感谢。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:55:16.487

问题解决了。writeRaw($content) 将 XML 代码写入流。

# android - IOException BufferedInputStream 在 HTC 中关闭

> ID：10169705
> 
> 赞同：1
> 
> 时间：2012-04-16T06:40:25.867
> 
> 标签：android, exception, bufferedreader, ioexception, htc-android

`while ((line = br.readLine()) != null) {`当执行下面完整代码的BufferedReader.readLine() 时，我得到了一个 IOException 。`Exception.getMessage()`返回的*BufferedInputStream 是关闭*的。

它只发生在 HTC 设备中，当我使用索尼爱立信 XPERIA 时它不会发生。

我的完整代码：

```
public static String downloadString(String url) throws MalformedURLException, IOException {     
    InputStream is = downloadStream(url);

    //Convert stream into String
    String line;
    BufferedReader br = new BufferedReader(new InputStreamReader(is), 4096);            
    StringBuilder sb =  new StringBuilder();
    while ((line = br.readLine()) != null) {
        sb.append(line);
    }
    br.close();
    return sb.toString();
}

public static InputStream downloadStream(String url) throws MalformedURLException, IOException {
    return connection(url).getInputStream();
}

private static HttpURLConnection connection(String s_url) throws MalformedURLException, IOException {
    URL url = new URL(s_url);
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.setRequestMethod("GET");
    urlConnection.setDoOutput(true);
    urlConnection.connect();

    return urlConnection;
} 
```

如何制作适用于每台设备的更好的 downloadString 方法？

提前致谢。非常感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:50:17.670

尝试一下 -

```
public static String getContent(String url) throws Exception {
      return(new Scanner(new URL(url).openConnection().getInputStream()).useDelimiter("/z").next());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:19:02.490

尝试使用 HttpGet 处理 http GET 连接（和 HttpPost 处理 http POST）

并确保在不需要时始终关闭流。

这里使用 httpget 从服务器获取字符串的简单代码：

```
 private void executeRequest(HttpUriRequest request)
{
    HttpClient client = new DefaultHttpClient();

    HttpResponse httpResponse;
    try {
        httpResponse = client.execute(request);
        responseCode = httpResponse.getStatusLine().getStatusCode();
        message = httpResponse.getStatusLine().getReasonPhrase();

        System.out.println(responseCode + ":" +message);

        HttpEntity entity = httpResponse.getEntity();

        if (entity != null) {

            InputStream instream = entity.getContent();
            response = convertStreamToString(instream);

            // Closing the input stream will trigger connection release
            instream.close();
        }

    } catch (ClientProtocolException e)  {
        client.getConnectionManager().shutdown();
        Toast.makeText(null, "Error", Toast.LENGTH_LONG);
    } catch (IOException e) {
        client.getConnectionManager().shutdown();
        Toast.makeText(null, "Error", Toast.LENGTH_LONG);
    } catch (OAuthMessageSignerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthExpectationFailedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OAuthCommunicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

你可以这样调用函数：

```
HttpGet request = new HttpGet(url); 
```

执行请求（请求）；

# asp.net - 无法与 2 个应用程序共享会员用户

> ID：10169709
> 
> 赞同：1
> 
> 时间：2012-04-16T06:41:08.563
> 
> 标签：asp.net, .net, asp.net-2.0, asp.net-4.0

我有一个运行在 v2 框架中的 .net 网站。最近我们使用 vs 2010 在 v4 中创建了 1 个部分。我的新应用程序托管在 2.0 框架下。所以事情是父应用程序在 2.0 上，子应用程序在 4.0 上，在 2.0 下运行，具有相同的数据库。现在我的会员用户没有得到共享。使用 4.0 应用程序创建的用户无法登录 2.0 应用程序，反之亦然。请帮忙谢谢

# android - SonarSource for Android 项目在 Eclipse

> ID：10169716
> 
> 赞同：1
> 
> 时间：2012-04-16T06:42:11.497
> 
> 标签：android, eclipse, sonarqube

我正在尝试将 SonarSource 用于我的 Android 项目开发，我按照[此处](http://docs.codehaus.org/display/SONAR/Sonar+Eclipse)提供的步骤安装 Sonar Eclipse 插件，当我尝试将我的 android 项目与 Sonar 关联时，它要求提供 groupId 和 artifactId，我不知道这两个，经过一些冲浪后，似乎 groupId 只是我的项目包（但不确定），对于 artifactId，我给出了我的项目名称，在选择所需的声纳服务器并单击完成按钮后，我出现了未知错误发生在Associate with Sonar 窗口的左上角。所以有人可以指导我如何使用 SonarSource for Android 项目或分享相同的链接。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:58:04.157

您首先需要在 Sonar 服务器上成功分析您的项目，然后才能在 Eclipse 中将其与 Sonar Eclipse 关联。

见[http://docs.codehaus.org/display/SONAR/Sonar+Eclipse](http://docs.codehaus.org/display/SONAR/Sonar+Eclipse)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:48:54.527

如果人们对此线程感兴趣。我们最近推送了一个[GitHub 项目](https://github.com/stephanenicolas/Quality-Tools-for-Android)，该项目将 Android 平台的多种测试技术结合在一起，并强调 Sonar 集成。

我们结合（并且列表并不详尽）：

*   机器人电动
*   标准的junit测试
*   机器人
*   用户界面自动化
*   离线使用 emma、cobertura 和 jacoco 的代码覆盖率
*   模拟框架，例如 easy mock 和 mockito
*   等等

而且，对于他们中的大多数人，我们提出了一种解决方案，可以在 Sonar 中显示这一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:50:47.987

对于任何寻求相同的人，这就是我为使其工作所做的工作。我只是按照这个[链接](http://docs.codehaus.org/display/SONAR/Analyse+with+Ant+Task)为我的项目编写了 ant build 并在文件中进行了配置并将我的代码部署在 Sonar 中，一切正常。但供您参考，它不是特定于 Android 的，它只是特定于 POJO。

# plone - 如何一键列出 Plone 站点的所有内容

> ID：10169717
> 
> 赞同：0
> 
> 时间：2012-04-16T06:42:16.397
> 
> 标签：plone

如何列出 Plone 站点的所有内容。它应该以表格形式一次性显示所有文件夹和子文件夹及其内容，包括各种统计信息，如类型、工作流程状态、创建者、创建日期等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:46:06.837

您可以查看站点地图的工作原理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:22:36.627

您还可以使用与所有内容匹配的条件[创建主题/集合](http://plone.org/documentation/manual/plone-4-user-manual/using-collections/adding-collections)，并选择包含所有可用元数据的表格视图。不幸的是，这不会告诉任何关于层次结构的信息（就像站点地图一样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:06:30.183

站点页脚中的“站点地图”超链接提供了此信息。

# php - 为什么工厂不足以进行分拣？

> ID：10169726
> 
> 赞同：0
> 
> 时间：2012-04-16T06:43:31.220
> 
> 标签：php, design-patterns

我在一个论坛上找到了这个，它似乎解释得很好：

> 策略是一种模式，旨在允许您在不破坏算法客户端的情况下向您的软件添加新的（在您的情况下排序）算法。这是对设计复杂性的投资，如果您需要在不破坏客户的情况下添加新算法，它将获得回报。Factory 是一种补充 Strategy 的模式，因为算法实现的客户不应该具体知道他们正在使用哪个实现（就软件类而言）。工厂实例化算法的具体实现，因此客户端可以在不知道细节的情况下使用它们。
> 
> ![在此处输入图像描述](../Images/0e46857a4777a5817f7f0b1cbac82815.png)
> 
> ![在此处输入图像描述](../Images/f75679e47bd491cf9331777c38a1267f.png)

但是我无法理解 SortStrategtyInterface 的需要。我们不应该只要求工厂返回排序字符串吗？

另外，如果上面的事情是正确的，那么他们可以共享代码来调用它吗？还有一个例子，如果我删除 SortstrategyInterface，那么它会有什么缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:08:47.057

尽管该接口并非完全“必需”，但最好有一个接口来确保客户端与不同排序算法之间的合同。该合约只是向客户端保证方法“getSortString()”存在于从工厂返回的任何策略中。从 php5 开始，代码看起来像这样：

```
$sorting_obj = SortStrategyFactory::getSorterBy("demand");
if ( ! $sorting_obj instanceof SortStrategyInterface ) {
  throw new \exception('contract failed, the sorting algorithm must implement the SortStrategyInterface');
}
$sorting_obj->getSortString();

# or maybe:
try {
  $sorting_obj = (SortStrategyInterface)SortStrategyFactory::getSorterBy("date");
} catch ( \exception $e ) {
  # ...
}
$sorting_obj->getSortString(); 
```

从来没有“真正”需要接口，但它们的使用肯定有很多优点，没有真正的缺点。从长远来看，保持客户端和实现之间的合同使得扩展变得如此简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:23:46.020

策略模式（再一次）不是“必需的”，当它的使用符合您的需求时，它只是一个很好的选择。基本思想是一个通用概念（排序）可以有多种实现。从上面发布的相同示例开始，策略模式将允许您添加更多的“排序”实现，而无需更改现有客户端。

假设您收到一个新的“SortByUser”的新要求，这个新任务只需要使用方法 getSortString() 实现一个 SortStrategyInterface，以及在工厂中创建它的几行代码。从那里，旧客户端将不会有意外的副作用，而新/修改后的客户端将可以访问这种新的排序策略。根据我的经验，策略模式是最常自然出现的模式。每当您的原始需求要求对概念采用“替代”（关键字）方法时，您几乎可以立即想到策略模式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T06:47:38.850

策略允许您在运行时轻松添加算法。对我来说，工厂应该足够了，但是根据理论，战略+工厂应该适合你。

# c++ - 使用 openSSL 错误编译静态 Qt

> ID：10169730
> 
> 赞同：1
> 
> 时间：2012-04-16T06:43:42.680
> 
> 标签：c++, qt, compiler-errors, openssl, static-linking

我用mingw成功编译了win32下的OpenSSL 1.0.1。现在我正在尝试使用以下配置编译静态 Qt 4.8.1：

`configure -release -static -qt-zlib -nomake examples -nomake demos -no-qt3support -no-scripttools -no-opengl -no-webkit -no-phonon -no-style-motif -no-style-cde -no-style-cleanlooks -no-style-plastique -no-sql-sqlite -openssl-linked OPENSSL_LIBS="-lssl -lcrypto -lgdi32 -luser32" -I H:\Workplace\OpenSSL\include -L H:\Workplace\OpenSSL`

我得到了这些错误：

`H:\Workplace\OpenSSL/libssl.a(ssl_lib.o):ssl_lib.c:(.text+0x17be): undefined ref erence to '_time32'`（几次）

`H:\Workplace\OpenSSL/libcrypto.a(o_time.o):o_time.c:(.text+0x362): undefined ref erence to '_gmtime32'`

`H:\Workplace\OpenSSL/libcrypto.a(mem_dbg.o):mem_dbg.c:(.text+0x4c7): undefined r eference to '_localtime32'`

**已解决（见下文）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:49:15.197

最后我解决了所有问题，这里是使用**TDM-GCC**使用**静态 OpenSSL编译****静态 Qt**的完整解决方案。

 *****   下载最新 OpenSSL 的源代码并解压缩它们。

*   我使用TDM-GCC编译，所以下载安装。

*   安装 MSYS。

*   创建`../MsysInstallDir/etc/fstab`具有以下内容的文件：

`MyPathToMinGW /mingw`（如果您使用 tdm-gcc，则需要）

`MyPathToPerl /perl`（perl也需要安装）

*   要编译 OpenSSL，请在 OpenSSL 源文件夹（在 MSYS 中）中运行以下命令：

`./config`

`make`

*   下载 qt-everywhere（我使用 v.4.8.1）源并解压缩它们。

***更新：**最近我在另一台 windows7 计算机上构建了 4.8.2 并得到了编译错误（在构建我的应用程序时）：«找不到 -lQtCore4»，«找不到 -lQtGui4»。这是帮助我的解决方案 - 编辑文件“qt-sources-dir/mkspecs/win32-g++/qmake.conf”。放`QMAKE_LFLAGS = -static -static-libgcc`*

*   使用配置在 qt 源目录中创建 conf.bat 文件：

`configure -release -static -qt-zlib -nomake examples -nomake demos -no-qt3support -no-scripttools -no-opengl -no-webkit -no-phonon -no-style-motif -no-style-cde -no-sql-sqlite -openssl OPENSSL_LIBS="-lssl -lcrypto -lgdi32 -luser32" -I MyOpenSSLdir\include -L MyOpenSSLdir`

*   运行`cmd`。`mingwvars.bat`在mingw文件夹中运行。在 qt 源文件夹中运行`conf.bat`（或将源文件夹添加到 PATH 并从另一个目录运行它，以将安装与源分开）。编译 Qt 需要几个小时。

*   添加到项目的 .pro 文件中：`INCLUDEPATH += OpenSSLdir/include/`

我认为这可能对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:04:58.397

你确定你需要-openssl-linked？我们总是通过动态使用 openssl 来构建 Qt。(-openssl)****

# spring-mvc - 我们可以通过在 Spring 3.0 中扩展另一个控制器类来创建一个新的控制器吗？

> ID：10169733
> 
> 赞同：1
> 
> 时间：2012-04-16T06:44:02.407
> 
> 标签：spring-mvc

我的应用程序中有一个要求，我需要通过扩展另一个控制器类来扩展控制器类。

```
 @Controller
    @RequestMapping("/bulkTrade.htm")
    public class TradeController extends ApplicationObjectSupport {
    // methods and fields.
    } 
```

我需要创建一个应该扩展 TradeController 的新控制器。简单地使用 extends 关键字是行不通的。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:46:31.137

你还需要在你的类中添加 @Controller 和 @RequestMapping 注解。

@Controller 将您的类的实例作为应用程序上下文中的 bean

# php - 意外丢失会话数据

> ID：10169735
> 
> 赞同：2
> 
> 时间：2012-04-16T06:44:19.170
> 
> 标签：php, http, session, session-variables

所以，我想在用户注销后保留一个特定的会话变量。像这样：

```
// Save the session variable
$foo = $_SESSION["foo"];

// Terminate the session
//----------------------------------------------
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), "", time() - 3600,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

session_destroy();
session_regenerate_id();
//----------------------------------------------

// Restart the session
session_start();

// Store the variable in the session
$_SESSION["foo"] = $foo;

// Redirect the user to the same page, this time unauthenticated
header("Location: " . $_SERVER["REQUEST_URI"]); 
```

但它似乎没有被正确存储，因为在重定向之后，`$_SESSION["foo"]`它是空的。

谁能帮我这个？我在这里做一些“非法”的事情吗？

笔记：

如果我*在重定向之前*`var_dump($_SESSION["foo"])`这样做，它确实会返回变量。

 *当然，我总是`session_start()`在取回之前打电话`$_SESSION["foo"]`。

另外，我不知道这是否有关系，但`$foo`它是一个对象，所以我在做`$foo = unserialize($_SESSION["foo"])`and `$_SESSION["foo"] = serialize($foo);`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:53:56.857

根据您使用的 PHP 版本，这可能可以解释问题[https://bugs.php.net/bug.php?id=38042](https://bugs.php.net/bug.php?id=38042)。

> 会话销毁后跟会话开始似乎不再启动新会话。附加代码适用于 5.1.2，但在 5.1.4 上失败。

也许其他版本也可能受到影响。

这篇文章还描述了您遇到的行为：

*   [在 session_destroy() 之后保留会话变量](https://stackoverflow.com/questions/4632799/preserving-a-session-variable-after-session-destroy)

您可能的解决方法可能是将变量作为位置标头中`$foo`的参数传递给您的下一个脚本，如下所示：`$_GET`

```
header("Location: " . $_SERVER["REQUEST_URI"] . "?foo=" . $foo); 
```*

# android-layout - 模拟器不显示在设备中

> ID：10169740
> 
> 赞同：0
> 
> 时间：2012-04-16T06:44:54.663
> 
> 标签：android-layout, android-emulator

我有分辨率为 1024*720 的设备。我在创建模拟器时在模拟器中使用相同的分辨率，但模拟器仍然无法在设备中正确显示。模拟器从右侧剪切 UI 部分，但相同的应用程序将在设备中正常运行，而不会出现任何 UI 问题。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:51:37.293

将您的 UI 布局设置为[线性布局](http://developer.android.com/reference/android/widget/LinearLayout.html)。我想它会对你有所帮助。

# performance - 限制服务器上的下载

> ID：10169743
> 
> 赞同：0
> 
> 时间：2012-04-16T06:45:11.133
> 
> 标签：performance, web-services, download

我正在构建一个下载应用程序，它允许客户端从服务器下载数据（文档+图像），该服务器通过 Web 服务 api 公开了下载功能。每个客户端可能会在任何地方下载 1GB-10GB 的数据。我正在寻找的是一种可能的机制来限制下载，这样如果太多的客户端同时启动下载，那么服务器不应该因为负载而关闭。

服务器上限制下载的标准机制是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:19:33.883

我们最终决定采用一种下载速率的方法，在这种方法中，客户端 ping 服务器以获得下载速率，服务器发送客户端应该下载的速率。下载速率是根据活动客户端的数量在服务器上计算的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T15:53:16.680

几乎任何级别都可以进行限制：您可以将其添加到您的代码中，但也可以在任何体面的防火墙上进行。在这两者之间，您可以限制虚拟机，或者（如果您说的是 Linux）您可以使用 cgroups 限制应用程序。

# ruby-on-rails - ruby 在哪里查找文件？

> ID：10169744
> 
> 赞同：0
> 
> 时间：2012-04-16T06:45:22.693
> 
> 标签：ruby-on-rails, ruby

我正进入（状态

```
no such file to load -- bundler/setup 
```

当我尝试打电话时

```
require 'bundler/setup' 
```

从我的 boot.rb

原因是 ruby​​ 不知道捆绑程序库的位置，即

```
/Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler 
```

如何将此路径添加到 ruby​​？是通过附加 $Path 吗？如果是的话，将每个 gem 的库附加到路径是一个好习惯，因为每个 gem 都有自己的本地库结构！

PS 我将 $GEM_HOME 添加到指向 /Library/Ruby/Gems/1.8 的 env 变量中，但它没有解决问题

顺便说一句，红宝石是否理解 $GEM_HOME 环境变量？如果是，它会深入挖掘其目录吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-16T07:00:52.160

如果将捆绑器 gem 添加到 Gemfile 会怎样？

# javascript - 如何使用 Flexigrid 将页面重置为 1

> ID：10169745
> 
> 赞同：2
> 
> 时间：2012-04-16T06:45:42.890
> 
> 标签：javascript, jquery, flexigrid

我目前正在使用很棒的 Flexigrid。但是，当我在特定书籍列表的第 8 页上时，然后我更改为另一套少于 8 页的书籍，Flexigrid 加载第 8 页，上面什么都没有...

我只是想知道如何将“页面”值重置为 1。我尝试过：

```
$("#books").flexOptions({ url: '/books/list', params: [{ name:'bookId', value: $('#Books').val()}, {name:'fromDate', value: $('#fromDate').val()}, {name: 'toDate', value: $('#toDate').val()}]}).flexReload({ page: 1 }); 
```

和

```
$("#books").flexOptions({ page: 1, url: '/books/list', params: [{ name:'bookId', value: $('#Books').val()}, {name: 'fromDate', value: $('#fromDate').val()}, {name: 'toDate', value: $('#toDate').val()}]}).flexReload(); 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:59:48.773

`newp : 1`是这里的诀窍。

```
$('#MyFlex')
    .flexOptions({
        url: urlAction,
        newp: 1
    }).flexReload(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:58:52.500

您可以做的只是找到“第一个”按钮并在其上触发点击事件。因此，假设您的表包含在一个具有容器 id 的 div 中（如果您有多个表网格，最好定位一个上下文）

```
$('#container .pFirst').click(); 
```

# libsvm - 在 java 中使用 libsvm 进行预测

> ID：10169747
> 
> 赞同：1
> 
> 时间：2012-04-16T06:45:54.257
> 
> 标签：libsvm

我正在使用 libsvm(3.11) 工具在我的项目中实现 SVM 分类（使用多代理的文本分类）。***但是每次我预测结果时，它都会为所有测试文档提供相同的标签，即 +1 或 -1***，尽管我使用的是不同类型的数据。

我正在使用以下过程对纯文本文档执行 libsvm 分类：

-> 会有一套训练文本文件

-> 我正在使用 TF-IDF 权重将这些文本文档转换为 libsvm 支持的格式（我正在使用两个文件夹，代表两个类 .. 对于第一个文件夹，我分配了标签 -1，对于第二个文件夹，它是 +1 遵循 TF -该文本文档的 IDF 值）

-> 之后，我将这些词包放入一个纯文本文档中......然后通过使用这些词，我生成带有一些标签的测试文档向量（我只接受一个测试文档，所以 IDF 将始终为 1 并且将只有一个向量...我希望标签无关紧要）...

-> 之后，我使用默认选项应用 libsvm 函数 svm_train 和 svm_predict

我在做正确的程序吗？..如果有任何错误的程序请随时通知我..它真的会帮助我..

并且 Y 这个 libsvm 总是只给出一个标签的结果？..我的程序有什么问题吗？..还是工具有问题？？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:39:48.143

为什么要使用新的标准来制作*测试*文件？测试*和*培训文档集都应该来自您的原始“培训文本文档”集。我把这些放在引号中是因为你可以取其中的一个子集并将它们用于测试。最终，确保您的训练和测试文本文档集与原始文档集不同。

# c# - VSTO Word 加载项：内容控制嵌套

> ID：10169748
> 
> 赞同：1
> 
> 时间：2012-04-16T06:46:12.960
> 
> 标签：c#, ms-word, vsto, ribbonx, word-contentcontrol

我正在为我正在实习的公司构建一个 MS-Word 插件。

我已经创建了一个带有很多`SplitButtons`和的新功能区`Buttons`。现在我想做的是，当您单击其中一个按钮时，内容控件将添加到 word doc 中。这适用于普通内容控件。这些内容控件具有诸如“运动/篮球/球员/姓名”之类的标签，这些标签绑定到 XML 文件中的元素。

```
private void addSimpleContentControl(String tag, String placeholder)
{
    try
    {
        contentControlPlain = Globals.ThisAddIn.Application.ActiveDocument.ContentControls.Add(Microsoft.Office.Interop.Word.WdContentControlType.wdContentControlText);
        contentControlPlain.Tag = tag;
        contentControlPlain.SetPlaceholderText(null, null, placeholder);
    }
    catch (COMException) { }    
} 
```

现在让我们谈谈我的问题。我的一些元素可能会出现不止一次。所以我想要创建的是一个富内容控件，它包含多个纯内容控件。

所以我有一个`SplitButton`带有“名称”、“球衣号码”、“位置”等按钮的“播放器”……当单击其中一个底层按钮时，我首先检查是否已经存在具有特定名称的富文本控件. 如果不是，我制作一个并向其添加一个纯内容控件。

富内容控件->纯文本控件->富内容控件结束

到目前为止一切顺利，这一切都很好，但是从我想向富内容控件添加另一个普通内容控件的那一刻起，这会弹出：

> “不能在其他控件或 XML 元素周围插入纯文本控件”

这是我将纯内容控件添加到丰富内容控件的代码。

```
private void addContentControlToRich(String tag, String placeholder,String title) 
{
    Microsoft.Office.Interop.Word.Document doc = Globals.ThisAddIn.Application.ActiveDocument;

    foreach (Microsoft.Office.Interop.Word.ContentControl cc in doc.ContentControls)
    {
        if (cc.Title == title && cc.Type == Microsoft.Office.Interop.Word.WdContentControlType.wdContentControlRichText)
        {
            try
            {
                Microsoft.Office.Interop.Word.Range rng = cc.Range;
                object oRng = rng;
                contentControlPlain = doc.ContentControls.Add(Microsoft.Office.Interop.Word.WdContentControlType.wdContentControlText, ref oRng);
                contentControlPlain.Tag = tag;
                contentControlPlain.SetPlaceholderText(null, null, placeholder);
                contentControlPlain.LockContentControl = true;

                break;
            }
            catch (COMException) { }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:09:01.500

代替

```
contentControlPlain = doc.ContentControls.Add(Microsoft.Office.Interop.Word.WdContentControlType.wdContentControlText, ref oRng); 
```

利用

```
contentControlPlain = richTextControl.Range.ContentControls.Add(Microsoft.Office.Interop.Word.WdContentControlType.wdContentControlText, ref oRng); 
```

在使用上面的代码之前使用下面的代码

```
Application.Selection.Start = lastControlinRichTextControl.Range.End+1; 
```

并设置`oRng = Application.Selection.Range

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:32:48.947

根据消息，您的代码正在尝试在富文本控件（即现有的纯文本控件）中的所有内容周围包装一个纯文本控件。修复您的范围对象，使其不会这样做，例如将其折叠到富文本控件内的某个点。

# java - JDBC中的批量插入

> ID：10169750
> 
> 赞同：2
> 
> 时间：2012-04-16T06:46:19.000
> 
> 标签：java, jdbc

对于批量插入，我们通常更喜欢 BATCH 操作。它究竟是如何优化以更快地插入 jdbc 的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T06:54:50.680

通常，通过减少网络往返。例如，如果您要使用 100 组不同的绑定变量执行同一语句 100 次，那么一次将所有 100 组绑定变量发送到数据库并使用单个返回所有 100 个结果会更有效网络往返而不是产生 100 次单独的网络往返，以便按顺序执行每个查询。如果您告诉 JDBC 驱动程序您要创建一个批处理，驱动程序可以最大限度地减少它需要与数据库通信的次数。

# c# - 检查 fromdate 和 todate 之间的给定日期

> ID：10169754
> 
> 赞同：0
> 
> 时间：2012-04-16T06:47:05.557
> 
> 标签：c#, asp.net, dataview

我想使用 dataview 行过滤器表达式检查从 date 和 todate 中存在的给定日期。例如，输入日期是 04-13-2012，日期列的日期为 04-01-2012，对应的日期列的值为 04-14-2012。我想使用表达式检查两列之间存在的日期 04-13-2012。

我的代码在下面..

```
 employee = ListBox1.Items[i].Text;
  DataSet4TableAdapters.sp_getallattendancesetupTableAdapter TA1 = new
               DataSet4TableAdapters.sp_getallattendancesetupTableAdapter();
  DataSet4.sp_getallattendancesetupDataTable DS1 = TA1.GetData();
  DataView DV = new DataView();
  DV = DS1.DefaultView;
  DV.RowFilter = "fldemployee='" + 
  employee + 
  "' and fldfromdate >= #" + 
  txttdate.Text + 
  "#  and fldtodate =#" + 
  txttdate.Text + "#"; 
```

但它不起作用我该如何解决这个错误。请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:50:17.230

可能是错字。(<=)

```
DV.RowFilter = "fldemployee='" + employee + 
"' and fldfromdate >= #" + 
txttdate.Text + 
"#  and fldtodate <=#" + 
txttdate.Text + "#"; 
```

# facebook - 寻找登录按钮的 WP7 PhoneGap Facebook 插件的工作示例

> ID：10169755
> 
> 赞同：1
> 
> 时间：2012-04-16T06:47:08.187
> 
> 标签：facebook, windows-phone-7, cordova

我已经尝试了 phonegap 社区推荐的[https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect) 上的所有代码，但我一直在尝试让它工作时遇到错误。

如您所见，我使用的是cordova 1.6.0，这可能是问题所在？

我已将脚本文件添加到我的 html 页面中

```
 <script type="text/javascript" charset="utf-8" src="cordova-1.6.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="cdv-plugin-fb-connect.js">/script>
<script type="text/javascript" charset="utf-8" src="facebook_js_sdk.js"></script>
<script type="text/javascript" charset="utf-8" src="ChildBrowser.js"></script> 
```

我已将 ChildBrowserCommand.cs 添加到插件目录中。

然后，我使用我的真实应用程序 ID（此处未显示真实 ID）将其添加到设备就绪侦听器

```
 document.addEventListener("deviceready",onDeviceReady,false);
      // once the device ready event fires, you can safely do your thing! -jm
      function onDeviceReady() {
          //document.getElementById("welcomeMsg").innerHTML += "Cordova is ready! version=" + window.device.cordova;
          console.log("onDeviceReady. You should see this message in Visual Studio's output window.");

          //fb connect sign in
          try {
              //alert('Device is ready! Make sure you set your app_id below this alert.');
              console.log('Device is ready! Make sure you set your app_id below this alert.');

              FB.Cookie.setEnabled(true); // this seems to be duplicate to 'cookie: true' below, but it is IMPORTANT due to FB implementation logic.

              FB.init({ appId: "311961255484993", nativeInterface: CDV.FB, cookie: true });

              login();
          } catch (e) {
              //alert(e);
              console.log("Init error: " + e);
          }
      };

      function login() {
          FB.login(
                function (response) {
                    if (response.session) {
                        console.log('logged in');
                    } else {
                        console.log('not logged in');
                    }
                },
                { scope: 'email, read_stream, read_friendlists' }
            );
            } 
```

我得到的错误是

找不到命令 :: org.apache.cordova.facebook.Connect

有什么帮助吗？

编辑：我也意识到它来自这里的 cdv-plugin-fb-connect.js 但不知道为什么？

```
 cordova.exec(function () {
        var authResponse = JSON.parse(localStorage.getItem('cdv_fb_session') || '{"expiresIn":0}');
        if (authResponse && authResponse.expirationTime) {
            var nowTime = (new Date()).getTime();
            if (authResponse.expirationTime > nowTime) {
                // Update expires in information
                updatedExpiresIn = Math.floor((authResponse.expirationTime - nowTime) / 1000);
                authResponse.expiresIn = updatedExpiresIn;

                localStorage.setItem('cdv_fb_session', JSON.stringify(authResponse));
                FB.Auth.setAuthResponse(authResponse, 'connected');
            }
        }
        console.log('Cordova Facebook Connect plugin initialized successfully.');
    }, (fail ? fail : null), 'org.apache.cordova.facebook.Connect', 'init', [apiKey]);
}, 
```

# php - 在 PHP 中保存和恢复 error_reporting 级别

> ID：10169761
> 
> 赞同：0
> 
> 时间：2012-04-16T06:47:39.137
> 
> 标签：php, error-reporting

error_reporting 函数有一个奇怪的问题。

我想保存当前的 error_reporting 级别，禁用几行错误报告，然后将其恢复。所以我有以下代码：

```
$oldErrorReporting = error_reporting();
error_reporting(0);
//Some code, that will generate warning, or error, that I don't want to show
error_reporting(oldErrorReporting); 
```

所以，如果我删除最后一行，就没有错误，一切正常。但是，如果我添加最后一行，则会在关闭错误报告时在代码中发生错误。那么，有没有办法清除error_reporting级别为0时发生的错误，并恢复默认的错误报告级别，而不会出现关闭错误报告时发生的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:50:28.687

也许这只是一个错字（如果是这样，请*不要*为问题重写代码，只需复制和粘贴（并删除不必要的行）），但是您忘记了`$`最后一行中的 -sign：

```
error_reporting($oldErrorReporting); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:56:15.730

什么样的代码会产生警告？如果是函数尝试而不是降低调试级别，以抑制警告本身 - 在函数名称前写“@”

看一下：

[在 PHP 中使用 @ 运算符抑制错误](https://stackoverflow.com/questions/136899/suppress-error-with-operator-in-php)

# java - 使用java代码执行.vmx文件

> ID：10169767
> 
> 赞同：0
> 
> 时间：2012-04-16T06:48:28.803
> 
> 标签：java, vmware-workstation

我想使用 java 程序运行 .vmx 文件。基本上我想使用 java 代码在 vmware 工作站上启动我的虚拟机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:53:41.193

你有没有考虑过[http://labs.vmware.com/flings/vix-java-toolkit](http://labs.vmware.com/flings/vix-java-toolkit) 它声称

> VIX Java Toolkit 允许 Java 开发人员利用 VMware VIX API。这是一个强大的 API，允许在运行 vSphere、Workstation、Server 和 Player 的 VM 上执行来宾内部操作。使用 vSphere/VI API 编写代码的 Java 开发人员会发现这特别有用，因为 vSphere API 目前不提供与客户操作系统交互的任何功能。此外，这有助于软件测试和系统管理。

# database - 如何在 cassandra 中添加图像和视频（包含图像的查询）？

> ID：10169768
> 
> 赞同：0
> 
> 时间：2012-04-16T06:48:32.503
> 
> 标签：database, nosql, cassandra, pycassa

在 cassandra 中，如何在列族中为一行添加图像。下面我提到了一个示例表，它显示了 KEY、Name、Age 和 Cover_Image。 ![在此处输入图像描述](../Images/1da283b427d9423110d858e58d959601.png)

在这里，我们可以通过输入这样的查询来添加姓名、年龄

> 使用比较器=UTF8Type 和 column_metadata=[ {column_name:Name,validation_class:UTF8Type}, {column_name:Age,validation_class:LongType,index_type:KEYS}] 创建列族用户；
> 
> set users[babu][Name]='Babu Droid';
> 
> 设置用户[babu][年龄]=23；

像上面的查询一样，添加图像的查询是什么（查询创建（也验证类）和设置选项）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:31:20.517

对于图像，您可能希望将 BytesType 用于列验证器，并将图像的原始字节插入列中。不过，从命令行界面做类似的事情不会有好的方法。您需要使用客户端库编写一些自定义代码。

# c# - 例外：2年后无效的演员表

> ID：10169770
> 
> 赞同：0
> 
> 时间：2012-04-16T06:48:58.850
> 
> 标签：c#, asp.net, exception, casting, visual-studio-2005

在过去的两年里，我的 VS2005 Web 应用程序运行良好。但是今天它突然开始抛出 Invalid Cast 的异常。

我的代码是：

```
int DistID = (int) this.Session["DISTRIBUTOR_ID"]; 
```

这条线工作了两年多。

但现在它突然开始抛出无效演员表异常。我在调试模式下检查

```
this.Session["DISTRIBUTOR_ID"] 
```

有效的 int 值为 1234。

我通过将代码更改为：

```
int DistID = Convert.ToInt32(this.Session["DISTRIBUTOR_ID"]); 
```

但是我的老板问我为什么突然出现这个错误。

谁能回答这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T06:56:13.843

Convert.ToInt32() 函数在内部调用解析函数，但在第一个实现中，您使用的是装箱和拆箱。会话中的值在分配时应该是整数类型。

# sql-server - “DROP USER”最多需要 30 秒

> ID：10169773
> 
> 赞同：2
> 
> 时间：2012-04-16T06:49:05.380
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我们遇到了一个问题，即`DROP USER`在单个数据库 (SQL Server 2008 R2) 中执行操作需要很长时间。它似乎在波动，但需要 15 到 30 秒。没有任何 DDL 触发器作用于与用户相关的事件。

更奇怪的是，这只发生在服务器上的单个数据库中，在其他数据库（更大，具有相同的 DDL 触发器）上，`DROP USER`命令是即时的。

有没有其他人遇到过类似的事情，如果你遇到过，你能找到原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:00:04.277

复活一条古老的线；我的同事想通了。该问题与正在运行的服务代理有关。以下声明解决了该问题：

```
ALTER DATABASE dbName SET NEW_BROKER WITH ROLLBACK IMMEDIATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:47:20.163

您确定在 DROP_USER 事件上没有 DDL 触发器吗？

# macos - NSLocalizedString 不返回本地化文本 XCode4

> ID：10169775
> 
> 赞同：2
> 
> 时间：2012-04-16T06:49:18.107
> 
> 标签：macos, cocoa, localization, nslocalizedstring

创建新的可可应用程序后，我添加了本地化字符串文件 localizeFile.strings(English) 和 localizeFile.strings(Spanish)

在 localizeFile.strings(English) 文件中，我添加了 "TITLE" = "Hello!";

在 localizeFile.strings(Spanish) 文件中，我添加了 "TITLE" = "Hola!";

在我的课堂上，我试图通过以下语句访问本地化的英文文本

```
-(IBAction)english:(id)sender
{
   // NSString *engText = [[NSBundle mainBundle] localizedStringForKey:@"TITLE" value:@"" table:nil];
    NSString *engText = NSLocalizedString(@"TITLE", nil);
    NSLog(@"engText %@",engText);
    [displayText setStringValue:engText];
}

-(IBAction)spanish:(id)sender
{
    NSString *spanText = NSLocalizedString(@"TITLE", nil);
      NSLog(@"spanText %@",spanText);
    [displayText setStringValue:spanText];
} 
```

这里 displayText 是 NSTextField 和同一个窗口中的两个动作。

我在控制台中看到了 engText TITLE 而不是 engText Hello 点击按钮。

有人可以指导我如何获得本地化字符串吗？请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:57:37.043

听起来应用程序不知道 localizeFile.strings。您是否声明了应用程序的语言？您的创建配置文件中有复制规则吗？

**编辑**

您可以在此处添加语言（红色箭头）： ![在此处输入图像描述](../Images/2a169c68bdee2a47545ce4135dfca9e1.png)

**第二次编辑**

如果要使用未在系统级别设置的语言，可以执行以下操作：

```
 // Assume you have defined constants, e.g. 1 - English, 2 - Espanol, 3 - ....
    switch (language) {
        case kLangEn: // =1
            path = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
            break:
        case kLangEs: // =2
            path = [[NSBundle mainBundle] pathForResource:@"es" ofType:@"lproj"];
            break:
           // etc.
    }
    NSBundle *languageBundle = [NSBundle bundleWithPathath];
    NSString *str = [languageBundle localizedStringForKey:key value:@"" table:nil]; 
```

# c# - Griview 文本框 textchanged 事件未触发

> ID：10169785
> 
> 赞同：0
> 
> 时间：2012-04-16T06:50:13.930
> 
> 标签：c#

我有一个带有 id 为 gdtxtPayingamount 的文本框的 Gridview。我使用了 textchanged 事件。

在正常情况下，它工作正常。

但是我使用了一个javascript函数来检查文本框中的数字。Javascript工作正常，输入字符串时会显示警报。问题是输入数字时，textchanged事件没有触发

Javascript如下

```
function CheckNumbers(objRef)
{        
    if(isNaN(objRef.value))
    {
        alert('Enter number only');
        objRef.value="";
        return false;
    }
    else
    {
        return true;
    }

} 
```

我在 gridview rowcreated 事件中调用了这个 javascript

```
protected void gdMainDetails_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {

            TextBox txt = (TextBox)e.Row.FindControl("gdtxtPayingAmount");
            txt.Attributes.Add("onkeyup", "return CheckNumbers(" + txt.ClientID + ")");

    }
} 
```

Javascript 工作正常，输入字符串时会显示警报。问题是输入数字时 textchanged 事件未触发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:54:06.653

如果 isNaN(objRef.value) == false 在 JS functiob 中返回 true

# java - Nohup 附加输出和错误而不是覆盖

> ID：10169789
> 
> 赞同：2
> 
> 时间：2012-04-16T06:50:26.477
> 
> 标签：java, bash, logging, nohup

我正在使用 nohup 将 java 输出和错误附加到同一个日志文件中。问题是它写了一个输出，然后它覆盖了错误的日志文件，输出被删除了。

nohup 命令是

```
nohup java Daemon 1000 >logs/wrapper.log 2>logs/wrapper.log & 
```

这是我想从 Daemon.java 登录 wrapper.log 的消息

```
System.out.println("This is output that should go to the file");

System.err.println("This is error that should go to the file"); 
```

但只有最后一条消息写入文件。最合理的答案是知道如何为输出和错误附加 wrapper.log 而不是覆盖

有任何想法吗

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:22:40.090

最便携（也是我最喜欢的方法）是：

```
cmd >>logs/wrapper.log 2>&1 & 
```

重定向以`>>FD`O_APPEND 标志打开。大提琴的答案是一次重定向stdout和stderr的bashism（以及大多数kshes和zsh），但不能解决以附加模式打开的问题。

请参阅： http: [//mywiki.wooledge.org/BashPitfalls#somecmd_2.3E.261_.3Elogfile](http://mywiki.wooledge.org/BashPitfalls#somecmd_2.3E.261_.3Elogfile)和相关链接。

**编辑**：我看到这实际上并没有解决附加问题。我将编辑页面。链接仍然相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T07:05:29.807

最有可能的是，错误输出会覆盖标准输出，因为你们都写入同一个文件。尝试类似： `nohup java Daemon 1000 &> logs/wrapper.log &`

`&>`适用于某些 shell（无论如何都是 bash，不确定 tcsh/zsh/...），因此请尝试一下或让我们知道您使用的是哪个 shell。

# android - 自动发送电子邮件

> ID：10169793
> 
> 赞同：0
> 
> 时间：2012-04-16T06:50:43.247
> 
> 标签：android, email

我想在没有任何用户干预的情况下自动发送电子邮件到特定的 ID。要发送邮件，我发送的设备的用户名和密码必须经过身份验证。我可以使用我的手机获取注册的帐户名

```
Account[] accounts = AccountManager.get(this).getAccounts();
for (Account account : accounts) {
       String  possibleEmail = account.name;
} 
```

我知道我的密码，所以我发送硬编码密码进行身份验证。是否可以通过编程方式获取密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:58:59.287

没有。您无法从 AccountManager 获取密码。查看文档以了解它是如何工作的。

[http://developer.android.com/reference/android/accounts/AccountManager.html](http://developer.android.com/reference/android/accounts/AccountManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:30:33.373

不，它不可能得到密码

# iphone - MKMapView 问题

> ID：10169795
> 
> 赞同：1
> 
> 时间：2012-04-16T06:51:01.297
> 
> 标签：iphone, ios, google-maps, mkmapview

尝试使用 MKMapView 时遇到问题。这是我第一次尝试使用其中一个，但我无法弄清楚如何使用它。以下是我用来尝试使其工作的两段不同的示例代码，但都不工作：

```
mapView = [[MKMapView alloc] initWithFrame:CGRectMake( 0, 0, 320, 150 )];
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance( CLLocationCoordinate2DMake( latitude, longitude ), metersPerMile*0.5, metersPerMile*0.5 );
MKCoordinateRegion adjustedRegion = [mapView regionThatFits:region];
[mapView setRegion:adjustedRegion]; 
```

或者

```
mapView = [[MKMapView alloc] initWithFrame:CGRectMake( 0, 0, 320, 150 )];
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance( CLLocationCoordinate2DMake( latitude, longitude ), metersPerMile*0.5, metersPerMile*0.5 );
[mapView setRegion:region]; 
```

或者

```
mapView = [[MKMapView alloc] initWithFrame:CGRectMake( 0, 0, 320, 150 )];
[self.mapView setRegion:MKCoordinateRegionMake(CLLocationCoordinate2DMake( latitude, longitude ), MKCoordinateSpanMake( 0.01, 0.01 ))]; 
```

所有这些代码片段对 MKMapView 完全没有任何作用。每当视图最终加载时，它什么都不做，我只是看着整个北美，这不是很有帮助。

如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:02:28.930

您还没有将地图添加到您的视图中.. 喜欢`[self.view addSubView:mapView];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:10:49.310

我通过实现 – mapView:viewForAnnotation: from MKMapViewDelegate 向用户展示他在哪里。看看这个：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{   
    // If it's the user location, return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
    {
            MKCoordinateSpan coordinateSpan = MKCoordinateSpanMake(0.009, 0.009);
            [mapView setRegion:MKCoordinateRegionMake(annotation.coordinate, coordinateSpan) animated:YES];
    }
    return nil; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T03:59:43.923

如果您要加载 MapView，这将有所帮助

```
 - (void)mapViewWillStartLoadingMap:(MKMapView *)mapView
  {
     [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
     NSLog(@"map loading...");
  } 
```

# azure - 发布 Azure 应用程序时出错

> ID：10169800
> 
> 赞同：-3
> 
> 时间：2012-04-16T06:51:26.357
> 
> 标签：azure

当我尝试制作云应用程序代码包时，我的 Visual Studio 正在重新启动。我无法制作包，请尽快建议我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:20:31.633

如果您的意思是在构建 Windows Azure 应用程序时 Visual Studio 崩溃，请尝试重新安装 Windows Azure 工具。此外，您还可以使用 CSPack 手动创建包。我建议您查看[http://msdn.microsoft.com/en-us/library/gg432988.aspx](http://msdn.microsoft.com/en-us/library/gg432988.aspx)了解更多信息。

另外，如果仍然遇到问题，请提供更多信息，就像其他社区指出的那样，我们可以更方便地找到问题并为您提供进一步的建议。

此致，

明旭。

# html - 在网页中保持垂直菜单不变

> ID：10169805
> 
> 赞同：0
> 
> 时间：2012-04-16T06:51:53.063
> 
> 标签：html, css

我创建了一个网页，其中有垂直和水平菜单。我需要的是在网页中保持垂直菜单不变。

我应该在与水平菜单对应的垂直菜单中显示数据。这可能与单独的 HTML 有关吗？

我将不胜感激任何帮助。

[访问我的 jsfiddle。](http://jsfiddle.net/KyRus/20/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:57:21.537

在 div 容器中使用 Style。

```
<div style="position:absolute left:100px top:150px;">
MENU ITEMS
</div> 
```

或 CSS

```
menu
{
position:absolute;
left:100px;
top:150px;
} 
```

更多信息请访问。尝试静态 2\. 取决于您是否希望页面在您滚动时随之移动。

[http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:57:35.133

我认为 css 属性 position:absolute 应该做你需要的： [http ://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

# ruby - 安装后运行 padrinorb 说“找不到 padrino-core”

> ID：10169810
> 
> 赞同：1
> 
> 时间：2012-04-16T06:52:37.900
> 
> 标签：ruby, sinatra, padrino

**编辑：**
误报。

我能够解决这个问题。显然我很`sudo`高兴，这破坏了 gem 的安装。
我不得不`gem uninstall padrino`，然后`gem install padrino`。

现在它完美无缺。
顺便说一句，padrinorb 正在成为 Sinatra 和 Rails 之间的一个很好的平衡点。

//*原帖如下：*

不知道我做错了什么。
我正在尝试测试[Padrino](http://padrinorb.com)，但是我马上遇到了问题。

我正在按照从`sudo gem install padrino`添加 sudo 开始的步骤进行操作。
然后按照`padrino g project myapp -d datamapper -b`他们的网站状态进行操作。

问题是它返回一个错误，所以我决定`padrino`不带参数直接运行。
错误也（很长）：

```
$ padrino
/Users/viper1092/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find padrino-core (>= 0) amongst [RedCloth-4.2.9, RedCloth-4.2.8, actionmailer-3.2.3, actionpack-3.2.3, activemodel-3.2.3, activerecord-3.2.3, activeresource-3.2.3, activesupport-3.2.3, addressable-2.2.7, albino-1.3.3, arel-3.0.2, blankslate-2.1.2.4, builder-3.0.0, bundler-1.1.3, bundler-1.0.22, chunky_png-1.2.5, chunky_png-1.2.1, classifier-1.3.3, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.3.1, compass-0.12.1, compass-0.11.5, crack-0.1.8, daemons-1.1.3, directory_watcher-1.4.1, directory_watcher-1.4.0, erubis-2.7.0, eventmachine-0.12.10, execjs-1.3.0, faraday-0.7.6, fast-stemmer-1.0.1, fast-stemmer-1.0.0, ffi-1.0.11, ffi-1.0.9, fssm-0.2.9, fssm-0.2.7, haml-3.1.4, haml-3.1.2, heroku-2.24.1, heroku-2.20.1, hike-1.2.1, httparty-0.7.8, i18n-0.6.0, jekyll-0.11.2, jekyll-0.11.0, journey-1.0.3, jquery-rails-2.0.2, json-1.6.6, json-1.5.4, koala-1.3.0, kramdown-0.13.5, kramdown-0.13.3, launchy-2.1.0, launchy-2.0.5, liquid-2.3.0, liquid-2.2.2, mail-2.4.4, maruku-0.6.0, mime-types-1.18, mime-types-1.17.2, multi_json-1.2.0, multi_json-1.0.3, multipart-post-1.1.5, netrc-0.7.1, polyglot-0.3.3, posix-spawn-0.3.6, pygments.rb-0.2.11, pygments.rb-0.1.3, rack-1.4.1, rack-1.3.2, rack-cache-1.2, rack-protection-1.2.0, rack-ssl-1.3.2, rack-test-0.6.1, rails-3.2.3, railties-3.2.3, rake-0.9.2.2, rake-0.9.2, rb-fsevent-0.9.1, rb-fsevent-0.4.3.1, rdiscount-1.6.8, rdoc-3.12, rest-client-1.6.7, rubypants-0.2.0, rubypython-0.5.3, rubypython-0.5.1, rubyzip-0.9.7, rubyzip-0.9.6.1, sass-3.1.15, sass-3.1.5, sass-rails-3.2.5, sinatra-1.3.2, sinatra-1.2.6, sprockets-2.1.2, sqlite3-1.3.5, stringex-1.3.2, stringex-1.3.0, syntax-1.0.0, term-ansicolor-1.0.7, thin-1.2.11, thor-0.14.6, tilt-1.3.3, tilt-1.3.2, treetop-1.4.10, tzinfo-0.3.33, uglifier-1.2.4] (Gem::LoadError)
from /Users/viper1092/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
from /Users/viper1092/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems.rb:1210:in `gem'
from /Users/viper1092/.rvm/rubies/ruby-1.9.2-p290/bin/padrino:18:in `<main>' 
```

然后，如果我看一下`gem list`：

```
$ gem list

*** LOCAL GEMS ***

polyglot (0.3.3)
posix-spawn (0.3.6)
pygments.rb (0.2.11, 0.1.3) 
```

这些是我唯一的“p”。

当我`sudo gem install padrino`最初运行时：

```
Successfully installed padrino-mailer-0.10.6
Successfully installed bundler-1.1.3
Successfully installed padrino-gen-0.10.6
Successfully installed padrino-cache-0.10.6
Successfully installed padrino-admin-0.10.6
Successfully installed padrino-0.10.6
21 gems installed 
```

我在 Mac OS X 10.7.3 上运行 RVM 1.10.2 并选择了 ruby​​ 1.9.2。

我已经尝试过 3 次 gemming Padrino `gem install padrino`，而不`sudo`只是为了好玩，它报告它安装了，但是`padrino`（有或没有 args）失败并出现同样的错误。同样，运行`gem list`并没有提到`padrino`or `padrino-core`。

有什么建议吗？
（我有完整的冗长，而且很长）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:51:04.030

我能够解决这个问题。显然我很`sudo`高兴，这破坏了 gem 的安装。我不得不`gem uninstall padrino`，然后`gem install padrino`。
现在它完美无缺。

我想`sudo`安装会改变一些系统范围的 /usr 交易，idk。
感谢您查看我的问题。

顺便说一句，padrinorb 正在成为 Sinatra 和 Rails 之间的一个很好的平衡点。

# actionscript-3 - 将随机值从一个数组传递到另一个数组而不重复

> ID：10169811
> 
> 赞同：1
> 
> 时间：2012-04-16T06:52:53.080
> 
> 标签：actionscript-3

我有一个包含 20 个值的数组（比如“origA”）和另一个数组（比如“itemA”，其中只有 1 个值。我需要将“origA”的**任何 10 个随机值**推入“itemA”。但我不能推送已经推送到“itemA”中的相同值。

我们应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:14:14.430

您可以创建一个副本`origA`并从中删除您添加的项目`itemA`：

非优化版本：

```
var origA:Array = [1, 2, 3, 4, 5, 6, 7];
var itemA:Array = [0];

var copyA:Array = origA.concat();
var N:int = 10;
var n:int = Math.min(N, copyA.length);

for (var i:int = 0; i < n; i++) {
    // Get random value
    var index:int = Math.floor(Math.random() * copyA.length);
    var value:int = copyA[index];
    // Remove the selected value from copyA
    copyA.splice(index, 1);
    // Add the selected value to itemA
    itemA.push(value);
}

trace(itemA);
//0,1,7,2,6,4,3,5 
```

优化版本（不调用`length`, `indexOf`,`splice`或`push`循环内）：

```
var origA:Array = [1, 2, 3, 4, 5, 6, 7];
var itemA:Array = [0];

var copyA:Array = origA.concat();
var copyALength:int = copyA.length;
var itemALength:int = itemA.length;
var N:int = 10;
var n:int = Math.min(N, copyALength);
for (var i:int = 0; i < n; i++) {
    // Get random value
    var index:int = Math.floor(Math.random() * copyALength);
    var value:int = copyA[index];
    // Remove the selected value from copyA
    copyA[index] = copyA[--copyALength];
    // Add the selected value to itemA
    itemA[itemALength++] = value;
}

trace(itemA);
//0,2,5,7,4,1,3,6 
```

* * *

**Edit1：**如果您的原始数组只有几个项目，请使用我的第一个版本或其他答案中的任何其他解决方案。但如果它可能有数千个或更多项目，那么我建议你使用我的优化版本。

* * *

**编辑：2**`1,000`这是从包含项目的数组中复制随机选择的项目所花费的时间`1,000,000`：

*   所有其他版本：`2000ms`
*   优化版：`12ms`
*   不克隆原始数组的优化版本：`1ms`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T06:57:59.580

```
// Define how many random numbers are required.
const REQUIRED:int = 10;

// Loop until either the original array runs out of numbers,
// or the destination array reaches the required length.
while(origA.length > 0 && itemA.length < REQUIRED)
{
    // Decide on a random index and pull the value from there.
    var i:int = Math.random() * origA.length;
    var r:Number = origA[i];

    // Add the value to the destination array if it does not exist yet.
    if(itemA.indexOf(r) == -1)
    {
        itemA.push(r);
    }

    // Remove the value we looked at this iteration.
    origA.splice(i, 1);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T07:31:15.630

这是一个真正的短篇。从原始数组中删除随机项，直到达到 MAX，然后连接到目标数组：

```
const MAX:int = 10;
var orig:Array = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20];
var target:Array = [];
var tmp:Array = [];
var i : int = -1;
var len : int = orig.length;
while (++i < MAX && len > 0) {
    var index:int = int( Math.random()*len );
    tmp[i] = orig[index];
    orig[index] = orig[--len];
}
target = target.concat(tmp); 
```

**编辑**

采用@sch 的移除项目的方式。应该接受的是他的回答。我只是将这个保留在 while 循环中。

# c# - 消息框阻止 mouseLeftButtonUp 事件

> ID：10169812
> 
> 赞同：1
> 
> 时间：2012-04-16T06:53:03.890
> 
> 标签：c#, .net, messagebox

我在释放捕获的鼠标时遇到问题。我的应用程序要求我执行一系列操作（意味着它们将一个接一个地自动运行）。顺序是： _ 选择一个对象 _ 在消息框上输入一个值，让对象根据输入的值旋转。

在运行时：我单击对象，它会激活所选对象的 MouseLeftButtonDown 事件。然后出现消息框。此消息框阻止我的鼠标激活该对象的 MouseLeftButtonUp 事件。所以我必须再次单击该对象以激活 MouseLeftButtonUp 事件，否则我的应用程序将无法继续运行。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:13:38.293

这就是为什么很多控件只对 MouseUp 事件采取行动的原因。他们使用 MouseDown 事件来执行诸如指示状态或选择之类的操作。并使用鼠标捕获（Winforms 中的 Capture 属性）确保即使鼠标移出窗口，它们也会获得 MouseUp 事件。立即在浏览器中尝试，按住鼠标右键，没有任何反应，放手。左键单击链接或按钮时的行为完全相同。

听起来这也是你想做的。

# android - 如何在 android webview 中使用弹出窗口

> ID：10169821
> 
> 赞同：4
> 
> 时间：2012-04-16T06:54:10.110
> 
> 标签：android, webview, popup, android-webview, android-browser

为了我自己的理解，我正在使用 Webview 开发类似浏览器的应用程序。

我还不清楚如何在 android Webview 中使用弹出窗口。

我遇到了这些方法 `onJsAlert()`，`onJsBeforeUnload()`等`onJsConfirm()`来处理 java 脚本弹出窗口。从这个[链接](http://forum.xda-developers.com/showthread.php?t=877521)和[开发者链接](http://developer.android.com/reference/android/webkit/WebChromeClient.html)

当有 jsAlert 时这些工作但我如何处理在新窗口中打开的弹出窗口？

我只想知道是否有任何其他方法可以处理 android webview 中网站的弹出窗口，例如在新选项卡中打开或使用 webview 在新窗口中打开。

我也无法在普通浏览器中打开在新窗口中打开的 url。如果我从 twitter 打开一些链接，则此 url 未加载，但看到的 twitter 徽标类似于[此处的问题之一](https://stackoverflow.com/questions/8647383/open-pop-up-external-site-link-in-current-webview)

**这是来自普通 android 浏览器**的快照，但这是在我的 webview 中作为普通页面而不是弹出窗口加载的

![在此处输入图像描述](../Images/cea95f911ad02c068b107e9678b660de.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:48:21.483

尝试

```
 webViewObject.getSettings().setJavaScriptCanOpenWindowsAutomatically(true) 
```

如果你想打开窗口......像 window.open thn 它是必需的。对于 javascriptenable 应该设置为 true .. 希望我理解你的要求是正确的。

# c++ - 如何在 Visual Studio 中构建包含活动文件的项目？

> ID：10169823
> 
> 赞同：2
> 
> 时间：2012-04-16T06:54:14.477
> 
> 标签：c++, visual-studio, visual-studio-2010, build

我正在使用 Visual Studio 2010。我的代码是 C++，我的解决方案包含许多项目，并且每个项目下又包含多个文件夹。每当我更改文件时，它会在解决方案资源管理器中自动选择，因为我在工具->选项->项目和解决方案->常规中启用了“在解决方案资源管理器中跟踪活动项目”选项。但是在更改文件后，我必须手动选择项目（这可能很麻烦，因为我必须上下滚动，因为存在许多文件），然后右键单击它并选择“构建”。有没有其他简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T07:01:51.553

您可以分配一个快捷方式`Build.BuildSelection`或`Build.BuildOnlyProject`

转到`Tools`菜单，然后`Options`=> `Environment`=>并在搜索文本区域中`Keyboard`输入`Build.BuildSelection` 或。然后分配两个免费的快捷方式。用于构建当前文件；将建立它的项目。`Build.BuildOnlyProject``Show commands containing``Build.BuildSelection``Build.BuildOnlyProject`

我`ctrl-shift+b`用来构建所有解决方案。我讨厌将鼠标用于那些重复性的任务。

# java - JProfiler - 未检测到由不同用户运行的 jvm

> ID：10169826
> 
> 赞同：0
> 
> 时间：2012-04-16T06:54:28.323
> 
> 标签：java, profiling, jprofiler

我正在尝试分析（使用 jprofiler）在 linux 机器的 tomcat 中运行的应用程序。tomcat 使用不同的用户帐户运行，我无权访问该 tomcat 帐户。我正在尝试使用我的用户帐户运行 jprofiler。但是 Jprofiler 没有检测到 tomcat 使用的 jvm。

有没有办法检测使用与 jprofiler 不同的用户帐户运行的 jvm？

我很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:19:56.200

通常只有在其他进程使用相同的用户帐户运行时，才能附加到正在运行的进程。

JProfiler 具有分析使用本地系统帐户运行的 Windows 服务的功能，但在 Linux 上，唯一的选择是 su 到适当的用户。

当然你可以随时使用集成向导（Session->Integration Wizards->New Server integration）来修改Tomcat启动脚本。

# php - 如果在保存之前返回 false，则 cakephp saveall 中断

> ID：10169835
> 
> 赞同：0
> 
> 时间：2012-04-16T06:55:30.927
> 
> 标签：php, mysql, cakephp, model

所以也许我只是错过了一些东西。SaveAll 数据工作正常......如果我取出 beforeSave 或者无论保存什么都只返回 true。我要做的是检查 user_group_id/user_friend_id 的组合是否已经存在。如果不保存。

但是，如果您为一条记录返回 false，则似乎整个 saveAll 函数将退出运行。也许这是故意的？官方文档仅限于回答这个问题。

显然我可以将检查移至一个函数，但这似乎更好地涵盖了每个插入/更新。

```
function beforeSave($options) {
        //dont let any duplicates be saved
        $count = $this->find('count', array(
            'conditions' => array(
                'user_group_id' => $this->data['UserGroupFriend']['user_group_id'],
                'user_friend_id' => $this->data['UserGroupFriend']['user_friend_id'],
            )));
        if ($count)
            return false;
        else
            return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:25:36.797

`beforeSave()`您可以检查`$this->data`无效值，如果发现，修改以`$this->data`删除它们。然后返回 true，只保存仍然存在的数据`$this->data`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:27:40.240

一种侵入性较小（也许更可预测）的方法是让框架为您处理它。无需手动进行验证，只需让 Cake 为您完成即可。在您上创建[自定义验证规则](http://book.cakephp.org/1.3/view/1179/Custom-Validation-Rules)`UserFriendGroup`以验证这两个字段的唯一性，然后该`saveAll()`方法照常工作。这只是在正常验证执行期间要验证的其他内容。

因为您没有指定版本，所以我已经链接到 Cake 1.3 的自定义验证规则，但我确信 2.x 有一些非常相似的东西。

# ruby-on-rails - 显示来自 Rails 应用程序的 Twitter 提要

> ID：10169841
> 
> 赞同：6
> 
> 时间：2012-04-16T06:56:48.103
> 
> 标签：ruby-on-rails, twitter, omniauth, railscasts

我已经能够让用户通过 OmniAuth 使用 Twitter 登录（我遵循 Railscast #235-6 并制作了一个简单的应用程序）。现在我正在尝试显示登录用户的 Twitter 提要。谁能告诉我这是怎么做到的？如何初始化 Twitter？如何传入登录用户的用户名和密码？我是 Rails 的新手，所以如果我确切知道将代码放在哪里会很有帮助。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-16T07:32:21.953

首先，如果 Twitter 订阅是公开的，您不需要用户凭据来获取它。看看 [Twitter gem](http://twitter.rubyforge.org/)。安装 gem 后，您需要做的就是：

```
require 'twitter'
Twitter.user_timeline("icambron") 
```

在 IRB 中尝试一下以开始使用。很容易，对吧？

现在，您可能想要使用您的 API 密钥，因为 Twitter 限制匿名请求，并且共享服务器可能会出现问题。在[初始化程序](http://guides.rubyonrails.org/configuring.html#using-initializer-files)中执行此操作：

```
Twitter.configure do |config|
  config.consumer_key = YOUR_CONSUMER_KEY
  config.consumer_secret = YOUR_CONSUMER_SECRET
  config.oauth_token = YOUR_OAUTH_TOKEN
  config.oauth_token_secret = YOUR_OAUTH_TOKEN_SECRET
end 
```

从您的 Twitter 开发人员页面获取实际值。

最后，如果您想扩大规模，您可以使用从 OmniAuth 获得的 OAuth 凭据（不是他们的用户名和密码；您没有这些）代表用户提出请求。这将允许您每秒发出更多请求，因为它们来自不同的用户。只需使用设置为您从 OmniAuth 哈希中获得的内容的`consumer_key`和字段来初始化 Twitter （请参阅[此处](https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema)，查看“凭据”以了解如何从 OmniAuth 中获取它们）。`consumer_secret`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T07:50:31.310

类推文

```
 BASE_URL = "http://api.twitter.com/1.1/statuses/user_timeline.json"
    SCREEN_NAME = "OMGFacts"
    MAX_TWEETS = 10000

    CONSUMER_KEY = "PMiAyrY5cASMnmbd1tg"
    CONSUMER_SECRET = "0TYRYg0hrWBsr1YZrEJvS5txfA9O9aWhkEqcRaVtoA"

    class << self
      def base_url
        BASE_URL
      end

      def screen_name
        SCREEN_NAME
      end

      def url(count = MAX_TWEETS)
        params = {:screen_name => screen_name, :count => count}
        [base_url, params.to_param].join('?')
      end

      def prepare_access_token(oauth_token, oauth_token_secret)
        consumer = OAuth::Consumer.new(CONSUMER_KEY, CONSUMER_SECRET,
          { :site => "http://api.twitter.com",
            :scheme => :header,
          })
        # now create the access token object from passed values
        token_hash = { :oauth_token => oauth_token,
                       :oauth_token_secret => oauth_token_secret,
                       :open_timeout => 500000000
                     }
        access_token = OAuth::AccessToken.from_hash(consumer, token_hash )
        return access_token
      end

      def get(count = MAX_TWEETS)
        count = Preference.get(:2000).to_i
        access_token = prepare_access_token("178394859-cJlRaiQvqVusPAPjqC2Nn7r3Uc7wWsGua7sGHzs","3T8LCZTYXzuPLGzmWX1yRnKs1JFpfJLKemoo59Piyl8")
        response = JSON.parse access_token.request(:get, url).body

        response[0...count]
      end

    end

  end 
```

# xcode4 - 如何在 xcode 4 中创建一个新的 phone gap 项目

> ID：10169843
> 
> 赞同：0
> 
> 时间：2012-04-16T06:57:26.733
> 
> 标签：xcode4, cordova

我正在 xcode 4 中创建一个新项目，在只给出项目名称后我运行项目它给出了错误。如何添加 java 脚本文件和其他东西以及如何创建 www 文件夹我正在使用最新版本的 phongap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:15:12.977

当你第一次构建和运行 Xcode 项目时，你会得到一个错误，但会生成 www。如此处所述，将 www 文件夹添加到您的项目中 - [http://docs.phonegap.com/en/1.6.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/1.6.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

# c# - Linq OrderBy 不返回预期结果

> ID：10169846
> 
> 赞同：0
> 
> 时间：2012-04-16T06:57:42.887
> 
> 标签：c#, linq

这可能是一个微小的未注意问题：

```
 myColl.OrderByDescending(item => item.myCollItemCreationDate)
.GroupBy(item => new { item.Id, item.ItemType, item.ChannelName })
          .Select(res => new ChannelRowUi(res.ToList())
                  {
                      ChannelName = res.Key.ChannelName,
                      ItemType = res.Key.ItemType.ToString() 
                  }); 
```

但后来我明白我错了，因为分组弄乱了顺序。

我改为：

```
myColl.GroupBy(item => new { item.Id, item.ItemType, item.ChannelName })
      .Select(res => new ChannelRowUi(res.ToList())
              {
                  ChannelName = res.Key.ChannelName,
                  ItemType = res.Key.ItemType.ToString() 
              })
              .OrderByDescending(item => item.myCollItemCreationDate); 
```

但我仍然得到未按创建日期排序的最终结果。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:01:38.630

```
myColl
     .GroupBy(item => new { item.Id, item.ItemType, item.ChannelName })
     .OrderByDescending(item => item.CreationDate)
     .ToList() 
     .Select(res =>

            new ChannelRowUi(res.ToList())
            {
                ChannelName = res.Key.ChannelName,

                ItemType = res.Key.ItemType.ToString()
            }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:11:51.280

我认为您应该更改 select 和 OrderBy 的顺序。记住它是一个函数链，下一个函数总是对链中前一个函数的结果进行操作。当您最后有 orderBy 时，您正在订购 Select 的结果。在选择中，您正在构建新的 ChannelRowUi 对象，这些对象可能都获得相同的 CreationDate，不能肯定地说，因为您没有显示 ChannelRowUi 构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:01:00.120

我不认为你必须调用 ToList 命令

另外，请尽量避免 ToList。

如果您有大数据 - 使用 ToList 是错误的。

你应该使用延迟执行

首先你必须做 orderby 然后选择。

# linux - Linux shell awk：满足条件时显示不同的列值

> ID：10169849
> 
> 赞同：1
> 
> 时间：2012-04-16T06:57:54.050
> 
> 标签：linux, shell, awk

如何在 awk 命令中同时使用条件语句和循环语句将具有特殊值的文件转换为不同的值，如“Error”，而不做任何减法，而是只显示转换后的新值，如“Error”作为输出？

1.  如果没有一个列值（除了在最终输出中保持不变的第 1 列）等于“11111”之类的特殊值，我使用如下 awk 命令：

    ```
    awk -F, '{print $1,$2,($3-$2),($4-$2),($5-$2),($6-$2),($7-$2),($8-$2),($9-$2),($10-$2),($11-$2),($12-$2),($13-$2),($14-$1)} ' all.cvs 
    ```

2.  如果列值=特殊值，则不需要做“-$2”，只需显示一个新值，如“错误”

基本上我想要：x 表示列 #2 到 #14 的列值

*   如果 $2（第 2 列）= 11111

    ```
    set $2="Error" 
    ```

*   如果列值为 <> 11111，则为 $3 到 $14（列 #3 到 #14）

    ```
    $x=$x-$2 
    ```

*   如果列值 =11111

    ```
    $x=Error 
    ```

*   最后，输出仍将显示 14 列，包括原始的 #1 列值和列 #2 到 #14 的转换/计算的新值

我有一个文件（all.cvs），如下所示：

*   14 个字段

*   每行可能包含一个字段，其值类似于“11111”（或任何字符串值）

*   每列用“，”分隔

*   总行数为 90

* * *

```
$cat all.cvs

A,11111,2,3,4,5,6,7,8,9,10,11,12,13 

B,1,2,3,4,5,6,11111,8,9,10,11,12,13 

C,1,2,3,4,5,6,7,8,9,11111,11,12,13 
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:31:28.317

```
awk -F, -v OFS=, -v flag_value=11111 '
  {subtract = $2}
  $2 == flag_value {$2 = "Error"; subtract = 0}
  {
    for (i=3; i<=NF; i++) $i = ($i == flag_value ? "Error" : $i - subtract)
    print
  }
' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:23:53.827

您可以使用以下方法：

```
$ awk -F, '
{ 
  printf("%s", $1); 
  s=($2 != 11111 ? $2 : 0); 
  printf(", %s", ($2 != 11111 ? $2 : "Error")); 
  for (i=3; i<=NF; ++i) 
    printf (", %d", ($i != 11111 ? ($i - s) : "Error")); 
  printf("\n"); 
}' all.csv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:05:02.383

将条件块放在默认块之前。放在`next`每个末尾，以便继续处理下一行。

# java - 使用 web.xml 中的 org.springframework.web.util.Log4jConfigListener 条目进行初始化？

> ID：10169851
> 
> 赞同：2
> 
> 时间：2012-04-16T06:58:07.720
> 
> 标签：java, spring, log4j

在大多数使用 Spring 的 Java 项目中，我在 web.xml 中找到了这个在服务器启动时执行的条目：

```
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

目的是`Log4jConfigListener`什么？

在我的遗留项目中，我也可以看到这个设置。但是，当我深入研究代码时，我没有发现此类或此类内部调用的其他类中所做的任何特殊操作。我确信在上面的代码片段后面一定有一些好的目的，我错过了它。

在将日志放入文件的每个类中都是条目

```
private static final Log    log  = LogFactory.getLog(PoolManagerImpl.class);
log.debug("Number of connection pools to create = ["
    + connection.size() + "]"); 
```

即使我注释掉我的 web.xml 条目，日志记录也能正常工作。那么它的目的是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T08:15:38.517

`Log4jConfigListener`一旦 Web 应用程序启动，它就会初始化 Log4j“子系统”，而不是在需要时立即“懒惰地配置”它。

在我看来，通过 Log4JConfigListener 显式初始化 log4j 的主要优点是它允许您通过使用 servlet 上下文参数来配置 log4j 配置文件的位置；根据应用程序的部署方式，这可能使某种管理员用户可以在运行时更改配置，而无需在展开的 WAR 目录中四处寻找。

请参阅[Log4jConfigListener](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/util/Log4jConfigListener.html)的 javadoc ，更重要的是[Log4jWebConfigurer](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/util/Log4jWebConfigurer.html)，因为它完成了真正的工作。

# java - 有没有Spring，性能有没有提升

> ID：10169852
> 
> 赞同：7
> 
> 时间：2012-04-16T06:58:19.483
> 
> 标签：java, performance, spring

我的同行总是强迫我使用 Spring 来创建任何对象的新实例。据我了解，Spring 提供了一个更有效地管理业务对象的平台。Spring 使架构更加模块化和更加灵活。

在某些情况下，我觉得不使用 spring bean，而是使用创建新对象的通用方法。但是，我的同龄人总是以提高绩效的借口来强迫这样做。我从来没有找到任何与弹簧相关的文章提到性能因素。

问题：如果我使用 spring bean 来创建对象，与使用“new”运算符创建新实例相比，它是否提高了性能。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-16T17:48:26.220

Spring 与任何其他工具一样是一种工具 - 如果应用得当，它会带来好处。当应用不当时，它只不过是纯粹的开销。

这恰好是我在 Spring 中经常看到的常见情况——项目要求一切都必须是 Spring Bean。当一个人试图做一些简单的事情时，这会导致大量的开发工件开销。

我发现在许多使用 Spring 的应用程序中遗漏的关键点是设计师/架构师普遍缺乏面向对象的经验或知识。他们对 Spring 很满意，因此一切都必须是 Spring。这种情况通常可以通过查看应用程序的整体类层次结构来识别（如果可以的话——我不知道任何理解 Spring bean 的 UML 工具）——你通常会发现几乎是扁平的继承层次结构——几乎没有类将从基类继承功能。这反过来意味着很少甚至没有封装。这反过来将表现为解决方案中的大量类。最后，在我看到的大多数情况下，以这种方式使用 Spring 的应用程序也存在性能问题 - 不是因为使用 Spring，但更多的是缺乏全面的设计。Spring 是一个框架，而不是架构。

Spring 唯一有意义的领域是那些可能经常更改或与执行环境相关的类——即测试与生产。除了这些区域之外，问题域（现实）中存在的类之间的关系也应该存在于代码中——这些不会改变，使它们成为 Spring bean 只会增加性能和开发工件方面的开销。

如果您的应用程序架构良好，并且在大多数情况下可能不是，那么任何库或框架都将始终由问题域中的类封装。这特别意味着库或框架不是应用程序级别的可见组件。这对于任何具有任何 OOA/OOD 意识的人来说都应该是显而易见的——你能想到商业世界中的一个问题域，它正式包括从外部配置类之间关系的能力。如果您回答“是”，那么您不了解 OOA/OOD，您将成为到处使用 Spring 的人之一。

这是一个试金石，可以让您查看是否过度使用或错误地使用 Spring - 从理论上讲，您是否可以在无需更改代码的情况下将 Spring 换成类似的东西？如果不是，那么您的设计很弱，并且正在使用 Spring 来支持它。如果您的应用程序的每个版本都会增加您的责任（增加您的工作量），这通常是可以识别的。

最后，有人会在这里附和“Spring 使测试变得容易”的说法。大多数情况下都是如此 - 大多数情况是设计不佳的应用程序的一部分。唯一比基于 Spring 构建的应用程序更容易测试的是构建在设计良好的面向对象架构上的应用程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T07:20:37.497

如果你理性地思考，春天怎么会更快呢？它是您代码的包装器。它还通过适用的默认构造函数/重载构造函数。

例如导入demo.dependency.injection.IAAccount；

```
public class SavingAccount implements IAccount {
public static int SAVING_INT = 5;

public SavingAccount() {
    System.out.println("Default constructor invoked!!");
}

@Override
public int calculateInterest(int amount, int duration) {
    return (amount*duration*SAVING_INT)/100;
} 
```

}

豆配置：

```
<!-- Fixed Account -->
<bean id="FixedAccount" class="demo.dependency.injection.impl.FixedAccount">
</bean> 
```

当您使用应用程序上下文加载 bean 时，它将打印

```
ApplicationContext context = new FileSystemXmlApplicationContext("/Beans/SpringDemo.xml");
Account myAccount = (Account)context.getBean("FixedAccount");

Default constructor invoked!! 
```

但是，在这里我们需要了解除了性能之外还有其他优势。像 - DI - 可管理性

所以我认为性能原因是不合理的。

除此之外：Spring IOC 框架提供了使用 spring bean 配置创建实例的方法。但是，它不会阻止您使用 new 运算符创建实例。

我想举一个例子，你可以选择使用**new**而不是**spring bean**。

假设在您的 Web 应用程序中，您有单例 bean，它具有不同的业务逻辑方法，并且在每个操作中，您可能需要新的对象实例进行操作（方法级别变量是线程安全的）。

因为如果单例 bean 有原型 bean，那么它只会在单例 bean 被调用时被调用一次。请仔细阅读以获取完整的理解。

[http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T07:18:15.683

我认为唯一的性能*影响*（它可能是多么轻微或主要）将是在启动时，Spring 应用程序上下文的初始解释*可能会*减慢它的速度。但在那之后，由于 Spring 手头拥有所有元数据，因此在标准情况下现在应该是可测量的开销。

因此，如果您在通常启动性能也很重要的桌面上，它可能会影响大型复杂应用程序中的感知性能。对于服务器端应用程序，它几乎可以忽略不计，因为启动并不重要，更重要的是应用程序在负载下的行为方式。

Spring 和非 Spring 之间唯一的其他区别是对默认内存消耗的部分影响，因为 Spring 需要在内存中创建和缓存元数据和 AOP 内容。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-16T08:06:02.750

Spring 框架不是为了提高创建 bean 的性能，而是为了使应用程序松散耦合。它使用**依赖注入和控制反转**来实现它。

这里有一些文章告诉你**spring**可以做什么？

1.  [http://www.wrox.com/WileyCDA/Section/Why-Use-the-Spring-Framework-.id-130098.html](http://www.wrox.com/WileyCDA/Section/Why-Use-the-Spring-Framework-.id-130098.html)
2.  [http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/overview.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/overview.html)
3.  [http://orangeslate.com/2006/11/10/five-advantages-of-spring-framework/](http://orangeslate.com/2006/11/10/five-advantages-of-spring-framework/)

> 如果我使用 spring bean 来创建对象，与使用“new”运算符创建新实例相比，它是否会提高性能。

通常**不，它不会**。甚至 spring 也需要**构造函数或反射来创建 bean。**因为，默认情况下，spring bean 是单例的，所以它们只能被创建一次。所以第二次访问它可能会更快。但请确保您不只是为此使用弹簧。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-16T07:13:18.580

在使用 spring 时，在创建应用程序时不会想到原始性能。这是代码在增长时的可维护性。因此，建议您使用工厂方法来实例化对象，因为它们将您从创建和维护对象以执行业务代码的负担中分离出来。 [IOC](http://martinfowler.com/articles/injection.html)是 spring 的核心原则，可以帮助您在没有您参与的情况下创建对象。有关最佳实践文章，您可以查看此[博客文章](http://orangeslate.com/2007/09/27/spring-framework-best-programming-practices-part-1/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T07:08:26.763

使用 Spring 创建 bean 就是为了很好地管理对象。您可以通过使用 bean 来使用 IOC（控制反转）和 AOP 支持。

使用 new 或使用 spring 创建新对象是相同的。（我认为没有任何性能问题，但使用 spring 使其在以后更有条理和灵活。）。

另外一件事 Spring 还支持各种设计模式，如 Singleton、factory-method 等。

# php - 搜索在带有分页的 codeigniter 中不起作用

> ID：10169853
> 
> 赞同：0
> 
> 时间：2012-04-16T06:58:25.627
> 
> 标签：php, codeigniter, search, pagination

我正在尝试在我的列表中添加搜索。我正在使用 codeigniter 和分页进行列表。搜索只是作为示例 id 的数据库搜索。搜索在分页的第一页中完美运行。但是当涉及到其他页面时，它不起作用。

这是我的控制器的代码。

```
 $this->clear_sample_id_catche();
  $out=$this->Mgeneral->listData();
  $per_page = 10;
  $total = $this->Mgeneral->countData();
  $data = $this->Mgeneral->listData($per_page, $this->uri->segment(3));

   $base_url = site_url('general/listData');

   $config['base_url'] = $base_url;
   $config['total_rows'] = $total;
   $config['per_page'] = $per_page;
   $config['uri_segment'] = '3';

  $this->pagination->initialize($config); 
  $data=array('body'=>'list','out'=>$data);

  $this->load->view('template',$data); 
```

我在我的视图中添加了要搜索的表单。任何人都可以建议我的问题是什么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:33:48.367

您一定忘记传递分页的搜索查询。看到页码是查询字符串的第三段，我猜测搜索表单`POST`在用户提交时会执行操作。用户提交表单后，它当然会起作用。因为他们只是做了一个请求，而您通过 using或类似`POST`的方式从中获取搜索查询。但是，当他们尝试通过单击页码链接（这是一个请求）导航到另一个页面时，搜索会失败，因为超全局数组是空的。`$_POST``$this->input->post('user_input')``GET``$_POST`

解决此问题的一个解决方案是根据用户输入设置会话值（我建议您使用 CodeIgniter 的会话类），而不是使用来自的搜索查询，而是`$_POST`使用存储在会话中的那个。

您可以这样做的另一种方法是为搜索结果创建另一个页面（假设它当前与表单在同一页面中，即在同一控制器功能中）。然后让搜索表单`GET`向它自己的控制器函数发出请求，然后它将搜索查询编码为，并将编码字符串中的（等号）`base64`替换为。之后，将用户重定向到搜索结果页面，同时将编码的搜索查询作为 URL 查询字符串中的第三段传递（页码将是第四段）。并在该函数中替换back to并使用来获取搜索查询并将其传递给将生成搜索结果的函数。`=``.``.``=``base64_decode()`

当然，还有很多其他方法可以达到相同的效果。只是谷歌它。

# php - PHP + MYsql 新安全实践

> ID：10169854
> 
> 赞同：1
> 
> 时间：2012-04-16T06:58:28.877
> 
> 标签：php, mysql, security

我在每次提交时过滤来自用户的输入，或者我有创建函数来操作 get/post 值并在每次提交表单时调用它。

但是现在我将以下功能保留在主要包含文件中：

```
foreach ($_POST as $key => $value) {
    $_POST[$key] = mysql_real_escape_string(trim($value));
}

foreach ($_GET as $key => $value) {
    $_GET[$key] = mysql_real_escape_string(trim($value));
} 
```

它运作良好，但是对于每一个帖子/获取都这样做有什么缺点吗？PS 好吧，除了脚本的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:19:56.100

`mysql_real_escape_string`不能完全防止 SQL 注入。让我们看看下面的例子：

```
$input = mysql_real_escape_string($_POST['id']);
$query = "DELETE FROM user WHERE id={$input};"; 
```

可以说`$_POST['id']`等于`1 OR TRUE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:10:11.623

1.  验证用户输入而不是先转义，在验证之后和插入数据库之前，你可以转义。
2.  回答您的问题：以正确的方式执行此操作是使用函数并将这些函数放在单独的文件中，并在调用函数之前包含该文件。您的最简单的方式也可以，但如果表单及其字段的数量很大那么脚本会很混乱，并且其他开发人员很难维护，因此使用第二种方法来使用包含过滤功能的文件在任何情况下都是一个好主意......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:11:18.330

这不是解决这个问题的合乎逻辑的方法。如前所述，这不会处理多维数组，如果您突然可能需要使用原始值，这将是一件麻烦事。例如，有人可能想要保存一个 textarea 字段，并希望底部有几行以便以后继续工作。这些行将在保存后消失。
表单验证也可能会有点混乱。

您的解决方案也不是 100% 安全的方法。您仍然可以抵抗[XXS](http://en.wikipedia.org/wiki/Cross-site_scripting)。

除此之外，我不知道没有自动执行此操作的框架，而且他们可能没有这样做是有原因的。

# .net - 使用 p2p 的分布式解决方案

> ID：10169856
> 
> 赞同：0
> 
> 时间：2012-04-16T06:58:44.357
> 
> 标签：.net, distributed, p2p, distributed-transactions

我们正在开发一个独立的分布式（Web）应用程序框架。我们在每台机器上都有 sqlite dbs，框架在该机器上保存数据，但是如果机器在网络中，那么它们也需要将它们的数据同步到其他机器，并且数据应该是一致的。例如，用户可以在任何机器上注册，但该信息也应该复制到所有其他机器，用户可以登录到任何机器，然后移动到任何其他机器而无需重新验证（机器将显示所有在线机器的列表，用户可以单击其中任何一个以移动到该机器的 Web 应用程序）。

我们可以有主机的概念，但该机器也将是对等机而不是专用主机（服务器），该主机的目的是保持机器的单一参考点，而不是向对等机询问信息。

为了使数据一致，我们考虑的一种方法是首先在主计算机上创建数据，然后在本地计算机上制作副本以避免数据不一致。（例如，两个用户创建具有相同用户名的用户）。SO机器将有一个点来验证数据以避免重复和网络拥塞。

而且我们不需要复制/同步每个数据，只需要复制用户、会话等。

有许多查询。

在交易中如何处理？最好的方法是什么？

Guid 是标识符，我们应该在任何地方保持 id 相同还是每个数据源都可以有自己的 id？

我们需要将同步器作为一个单独的工具，以便其他服务也可以使用它来发送数据/文件和复制。

我们正在使用.net 技术。我们正在考虑将 pnrp 作为基础技术堆栈。

# android - 如何开发任务管理器应用程序

> ID：10169864
> 
> 赞同：0
> 
> 时间：2012-04-16T06:59:52.813
> 
> 标签：android

我想在 android 中开发一个任务管理器应用程序。我是android应用程序开发的新手，我不知道如何开发它。任何人都可以建议我或建议我使用 Android 构建任务管理器应用程序的任何教程吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T08:29:42.257

这里有一个参考链接： [http](http://android-task-manager.googlecode.com/svn/trunk/) ://android-task-manager.googlecode.com/svn/trunk/ 还有这个[http://www.anddev.org/advanced-tutorials-f21/android-taskmanager-simple -t315.html](http://www.anddev.org/advanced-tutorials-f21/android-taskmanager-simple-t315.html)您将了解如何在 android 中开发任务管理器。

**编辑：**

第一个链接已过期，但您可以在备用[链接上访问代码库](https://code.google.com/archive/p/android-task-manager/source/default/source?page=2)

# algorithm - 试图证明/反驳算法的复杂性分析

> ID：10169866
> 
> 赞同：2
> 
> 时间：2012-04-16T07:00:04.547
> 
> 标签：algorithm

我不是在寻找上述问题的算法。我只想有人评论我的答案。

我在一次采访中被问到以下问题：

> 如何从大量数字中获取前 100 个数字（无法放入内存）

这就是我所说的：

将数字分成每批 1000 个。在“O(1)”时间内对每个批次进行排序。到目前为止，总时间为 O(n)。现在从第一批和第二批（在 O(1) 中）中获取第 100 个数字。从上面计算的数字和第三批中取出第一个 100，依此类推。这总共需要 O(n) - 所以它是一个 O(n) 算法。

面试官回答说分批1000个。不会花费 O(1) 时间，因此不会从一批中挑选出第 100 个，经过大量讨论后他说，他对算法花费 O(n) 时间没有问题，他只是有我的一个问题是对批次进行排序需要 O(1) 时间。

我的解释是 1000 不依赖于输入 (n)。不管 n 是多少，我都会批量生产 1000 个。如果你必须计算，排序需要 O(1000*log 1000))，这本质上是 O(1)。

如果您必须进行适当的计算，那将是

**1000*log 1000 对一个批次进行排序排序 (n/1000) 这样的批次需要 1000 * log 1000 * n/1000 = O(n*log(1000)) 时间 = O(n) 时间**

我也向我的很多朋友询问过这个问题，虽然他们同意我的观点，但只是部分同意。所以我不知道我的推理是否100%正确（即使99%正确也请批评）。

*请记住，这篇文章并不是要回答上述问题。我已经在[从一亿个数字中检索前 100 个数字中找到了更好的答案](https://stackoverflow.com/questions/2550624/retrieving-the-top-100-numbers-from-one-hundred-million-of-numbers)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:18:47.767

确实如此`O(n)`- 但是常量非常高，特别是考虑到**您需要从文件系统中读取每个元素两次**[一次在排序中，一次在第二阶段]，并且文件系统访问*比*内存访问慢得多。由于这可能是算法的瓶颈，因此您的解决方案可能会比使用优先级队列**慢两倍。**

请注意，对于一个常数`top 100`，即使是天真的解决方案也是`O(n)`：

```
for each i in range(1,100):
   x <- find highest element
   remove x from the list
   append x to the solution 
```

这个解决方案也是`O(n)`，因为你有 100 次迭代，在每次迭代中你需要 2 次遍历列表 [通过一些优化，每次迭代可以完成 1 次遍历]。因此，遍历的总数严格小于 1000，并且没有更多取决于大小的因素，因此解决方案是`O(n)`- 但它绝对是一个糟糕的解决方案。

我*认为*面试官的意思是你的解决方案 - 虽然`O(n)`有很大的常数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:29:57.197

面试官是错的，但考虑原因是有用的。您所说的是正确的，但是您依赖于一个未说明的假设。可能，面试官做出了不同的假设。

如果我们说对 1000 个数字进行排序是 O(1)，我们有点不正式。具体来说，我们的意思是，在 N 趋于无穷大的极限中，有一个常数大于或等于对 1000 个数字进行排序的成本。由于对固定大小集进行排序的成本与 N 无关，因此限制也不取决于 N。因此，当 N 趋于无穷时，它是 O(1)。

一个慷慨的解释是，面试官希望你以不同的方式对待排序步骤。您可以更准确地说，它是 O(M*log(M))，因为 M 趋于无穷大（或者 M 趋于 N，如果你愿意的话），其中 M 代表数字批次的大小。这将使您的方法总体上为 O(N*log(M))，因为 N 和 M 都接近无穷大。当然，这不是你描述的限制。

严格来说，如果不指定限制就说某事 O(1) 是没有意义的。通常不需要为算法费心，因为从上下文中可以清楚地看出：通常采用的极限是单个参数接近无穷大。仅考虑 N 时，您的描述是正确的，但您可以考虑的不仅仅是 N。

# wcf - SoapUI 中的 WCF wsHttpBinding

> ID：10169871
> 
> 赞同：5
> 
> 时间：2012-04-16T07:00:19.890
> 
> 标签：wcf, soapui

我正在尝试将 WCF 服务添加`wsHttpBinding`到soapUI。

我正在使用消息安全性，它适用于测试客户端，但 SoapUI 返回

> 验证邮件的安全性时出错

这是服务配置：

```
<wsHttpBinding>
   <binding name="wsHttpSecure">
      <security mode="Message">
         <message clientCredentialType="UserName" negotiateServiceCredential="true"    
                  establishSecurityContext="false" algorithmSuite="Default" />
      </security>
   </binding>
</wsHttpBinding> 
```

这里[http://www.soapui.org/SOAP-and-WSDL/applying-ws-security.html](http://www.soapui.org/SOAP-and-WSDL/applying-ws-security.html)是一个文件，但他们说我需要 .jks 文件。我只在测试客户端配置文件中编码了 SvcUtil 生成的公钥值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-30T15:59:42.207

经过大量研究，我在博客上找到了解决方案。

您需要选中位于 WS-A 选项选项卡上的 WS-A:To 复选框。

![如何启用 wsa:To](../Images/11078466438292b098b94781e268a6c3.png)

这样做之后，我的问题就解决了。

[这是包含解决方案的博客。谢谢大卫！！](http://ddkonline.blogspot.com.br/2012/10/wcf-45-host-unreachable-when-calling.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T14:32:48.030

此设置不能与soapUI 互操作：

```
negotiateServiceCredential="true" 
```

将其更改为假

# c# - 如何使用 EF 和 LINQ 构建分层树

> ID：10169872
> 
> 赞同：0
> 
> 时间：2012-04-16T07:00:34.903
> 
> 标签：c#, recursion, ef-code-first

我有以下代码，我正在尝试使用 EF 构建分层/父子关系模型：

```
ICollection<Content> contentList = _dbset.Where(
                content =>
                content.CompanyId == companyId && content.ParentContentId == null && content.Deleted == false)
                .OrderBy(content => content.SortLevel)
                .Include(content => content.SubContent.Select(childContent => childContent.SubContent)).ToList(); 
```

在这种情况下，如何使用 EF 构建父子树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:28:02.060

由于 EF 跟踪加载到 db 上下文的所有对象，除非在实际查询中关闭跟踪，您可以将构建树所需的所有记录加载到上下文，然后在前一个结果集/集合上编写一个 linq 查询以过滤所有child->grandchild 记录通过在查询中指定父 id。例如

```
ICollection<object> treeList = <dbcontent>.<entity>.All().ToList();
treeList = treeList.Where(o => o.ParentId == 0).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:43:10.717

所以你基本上有n个有更多孩子的孩子？如果您不打算拥有*太多*它们，为什么不使用递归函数呢？

我问你是否没有*太多*的原因，如果你最终递归一个函数足够多次，你可能会得到一个例外。但是......这需要很多深度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:26:21.807

也许您可以通过定点运算符尝试递归操作：

```
// static fixpoint operator (highly reusable)
public static Action<T> ActionFix<T>(Func<Action<T>, Action<T>> f)
{
    return t => f(ActionFix(f))(t);
}

// your recursive ordering
foreach (var parentContent in contentList)
{

  ActionFix<Content>(
     actionContent => 
           content => 
                {
                 // ordering on the subContent of the node
                 content.SubContent = content.SubContent.OrderBy(sc => sc.SortLevel).ToList();  
                 // recursive ordering on each element on the subContent
                 content.SubContent.ToList().ForEach(actionContent);
                })
  (parentContent);
} 
```

# ios - IOS5中的Reminders.app

> ID：10169873
> 
> 赞同：0
> 
> 时间：2012-04-16T07:00:35.007
> 
> 标签：ios

我想在 Reminders.app (iOS 5+) 中添加提醒，但我找不到 API。我还想问一下 Reminders 和 iCal 的区别是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:23:24.057

据我所知，没有 API。

在 iOS 上，提醒存储待办事项，日历存储事件或约会。

在 Mac OS 上，iCal 两者兼而有之。或者至少，直到 Mountain Lion 出现（它将它们拆分为更像 iOS）。

# image-processing - 图像搜索中滑动窗口技术和扫描窗口技术的区别

> ID：10169876
> 
> 赞同：1
> 
> 时间：2012-04-16T07:00:52.580
> 
> 标签：image-processing, computer-vision

为了搜索图像，有时使用滑动窗口技术，有时使用扫描窗口技术。这两种技术有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:38:16.953

使用更广泛的术语是滑动窗口。许多目标检测方案使用滑动窗口方法，其中窗口由一些检测器（例如，SVM）处理。如果每个像素都需要密度，则 Parzen 窗口的密度估计也是一种滑动窗口方法。

我猜测两者之间的区别可能是基于与“前一个”窗口的部分重叠来处理当前窗口的能力。如果你的算子是线性的，有很多有效的方法可以利用重叠（例如增量增量/减量操作，或 FFT+卷积）。也许扫描被定义为一个覆盖图像的过程，但没有或不能利用窗口之间的重叠。

# linux - 根据 CreationTime 删除文件

> ID：10169881
> 
> 赞同：0
> 
> 时间：2012-04-16T07:01:01.253
> 
> 标签：linux, bash, unix, unix-timestamp

在一个目录中有每天生成的文件。2012 年 4 月 16 日生成的文件格式为 TEST_20120416。

所以我需要删除所有超过 7 天的文件。我试着这样做

```
#!/bin/ksh
find /data/Test/*.* -mtime -7 -exec rm -rf {} \;
exit 0 
```

现在的问题是上面的代码是根据修改时间删除但根据要求文件应该根据创建时间删除。请帮助我根据文件名删除文件（文件名有时间戳）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:18:10.047

幸运的是，您在文件名中编码了创建日期，这应该可以工作：

```
#!/bin/sh
REFDATE=$(date --date='-7 days' +%Y%m%d)
PREFIX=TEST_
find /data/Test/ -name $PREFIX\* | while read FNAME; do
   if [ ${FNAME#$PREFIX} -lt $REFDATE ]; then
       rm $FNAME
   fi
done 
```

如果您有其他一些名称以 TEST_ 开头的文件，它将打印警告，在这种情况下，可能需要进行更多过滤。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-18T11:00:57.533

```
find /data/Test/*.* -ctime -7 -delete 
```

'找到 /data/Test/ *。*' 将查找 /data/Test 文件夹中的所有文件，参数 '-ctime -7' 将搜索限制为持续 7 天的创建时间， -delete 选项将删除此类文件

# c# - 保持 FTP 连接打开直到工作完成

> ID：10169883
> 
> 赞同：1
> 
> 时间：2012-04-16T07:01:10.847
> 
> 标签：c#, ftp, keep-alive

我有一个程序，它不断地从 FTP 服务器下载相同的文件，比如说 3 个小时。每次使用新数据填充服务器文件时。所以我不想在这 3 个小时内连接和断开 ftp。我想打开该连接并使其保持活动状态，直到工作完成。请提出一些建议。

```
System.Net.FtpWebRequest tmpReq = (System.Net.FtpWebRequest)System.Net.FtpWebRequest.Create("ftp:MYURL");

tmpReq.Credentials = new System.Net.NetworkCredential("userid", "password");

using (System.Net.WebResponse tmpRes = tmpReq.GetResponse())
{
    using (System.IO.Stream tmpStream = tmpRes.GetResponseStream()) 
    {    
    using (System.IO.TextReader tmpReader = new System.IO.StreamReader(tmpStream))
                {
                    ServerFileContents = tmpReader.ReadToEnd();
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:05:35.150

您可以定期发送`NOOP`命令以避免远程计算机关闭您的连接。

为此，您需要一个实例或静态类，为您的程序提供 FTP 功能，它在程序启动时打开连接并在完成时关闭它，`NOOP`使用计时器或其他线程执行 ( ) 命令。

# c# - 如何配置 Facebook 点赞按钮和 LinkedIn 分享按钮

> ID：10169885
> 
> 赞同：2
> 
> 时间：2012-04-16T07:01:21.553
> 
> 标签：c#, asp.net, facebook, .net-4.0, linkedin

谁能告诉我如何在网站上配置 Facebook 喜欢按钮和 LinkedIn 分享按钮来喜欢页面上的特定链接。我不希望它喜欢整个页面，而是喜欢网页上的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:17:16.153

查看 Facebook Like Button 文档，您可以指定一个[“URL to Like”](http://developers.facebook.com/docs/reference/plugins/like/)。

与 LinkedIn[共享按钮](http://developer.linkedin.com/plugins/share-plugin-generator)类似，您可以指定 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-17T17:57:23.360

领英：

```
https://www.linkedin.com/sharing/share-offsite/?url={url} 
```

来源：**[Microsoft LinkedIn 共享 URL 文档](https://docs.microsoft.com/en-us/linkedin/consumer/integrations/self-serve/plugins/share-plugin)**。

Facebook：

```
https://www.facebook.com/sharer.php?u={url} 
```

来源：**[FaceBook 共享 URL 文档](https://developers.facebook.com/x/bugs/357750474364812/)**。

如果您对定期维护的 GitHub 项目感兴趣，该项目会跟踪这一点，因此您不必这样做，请查看！ [社交分享网址](https://github.com/bradvin/social-share-urls)

[![社交分享 URL 图片](../Images/80f76ec3827227f0c745b62a5b15dff5.png)](https://i.stack.imgur.com/8rEut.jpg)

# delphi - 到底有什么区别 和 delphi 7中的.items.clear？

> ID：10169896
> 
> 赞同：14
> 
> 时间：2012-04-16T07:02:18.957
> 
> 标签：delphi

我想知道为什么有两种不同的方式来清除列表视图。一种是通过调用`listview.clear`，另一种是`listview.items.clear`。实际上，这也扩展到许多其他 VCL 组件。必须使用哪种方法，为什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-16T07:17:43.250

`ListView.Clear`只是/`ListView.Items.Clear`的包装。看源码：`ListItems.BeginUpdate``ListItems.EndUpdate`

```
procedure TCustomListView.Clear;
begin
  FListItems.BeginUpdate;
  try
    FListItems.Clear;
  finally
    FListItems.EndUpdate;
  end;
end; 
```

从文档：

> BeginUpdate 方法暂停屏幕重绘，直到调用 EndUpdate 方法。使用 BeginUpdate 加快处理速度并避免在将项目添加到集合或从集合中删除时闪烁。

更好的做法是使用`BeginUpdate`/`EndUpdate`来提高速度并避免闪烁。
但使用的主要原因`ListView.Clear`是因为使用“高级 VCL 方法”（正如 @Arnaud 评论的那样）总是一个好主意，并且实现可能会改变（顺便说一句，该方法是在 D7 中引入的）。

* * *

**编辑：**我已经测试了`TListView`10k**项**（D7/WinXP）：

*   `ListView.Items.Clear`: ~5500 毫秒
*   `ListView.Clear`: ~330 毫秒

结论：`ListView.Clear`比不使用/`ListView.Items.Clear`时快大约 16 倍！`BeginUpdate``EndUpdate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:13:42.573

`ListView.Clear`是一种在内部调用的便捷方法`ListView.Items.Clear`。无论您调用两者中的哪一个，都没有语义差异。

我更喜欢第一个，因为它更短，而且它没有显示我目前不感兴趣的内部表示。

# php - 我的 Sql DATE_SUB() 和 codeigniter 活动记录问题？

> ID：10169897
> 
> 赞同：2
> 
> 时间：2012-04-16T07:02:21.423
> 
> 标签：php, mysql, codeigniter, datetime

我正在使用 codeigniter 活动记录来执行一个简单的 mysql 查询来选择过去一小时内的数据。

所以我的查询是：

```
SELECT * FROM tablename WHERE added_datetime >= DATE_SUB(NOW(),INTERVAL 1 HOUR) 
```

我形成这个查询的codeigniter代码是：

```
$data=array(
            'added_datetime >='=>'DATE_SUB(NOW(),INTERVAL 1 HOUR)',

            );
            $query=$this->db->get_where('tablename',$data); 
```

现在的问题是 codeigniter 在 DATE_SUB 函数周围添加了一个单引号，因此该查询在 mysql 服务器上不起作用。

codeigniter 产生：

```
SELECT * FROM (`tablename`) WHERE `added_datetime` >= 'DATE_SUB(NOW(),INTERVAL 1 HOUR)' 
```

我也尝试通过添加`FALSE`作为第三个参数`get_where`但仍然没有工作

```
$query=$this->db->get_where('tablename',$data,FALSE); 
```

它还产生了与上面相同的查询。所以请建议我如何解决这个问题。

-谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T07:12:38.540

尝试做这样的事情：

```
$this->db->where("added_datetime >= DATE_SUB(NOW(),INTERVAL 1 HOUR)", NULL, FALSE);
$query = $this->db->get('tablename'); 
```

`$this->db->get_where();`不提供取消转义 where 子句的功能。

# linux - 如何使用 Fedora16 用汇编语言测试 LIDT 指令？

> ID：10169902
> 
> 赞同：0
> 
> 时间：2012-04-16T07:02:32.187
> 
> 标签：linux, assembly

我正在使用 Fedora16，我想使用 LIDT 汇编指令在 IDT 寄存器中设置地址。所以，如果我在 Fedora16 的终端中测试这个，它会导致系统内部变化吗？？有没有其他方法可以测试？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:10:11.297

当另一个内核（在您的情况下为 Linux）正在运行时，您不应尝试更改 IDT 寄存器。我可以轻松地使系统挂起，需要重新启动。如果出于某种原因，您确实想使用 LIDT 指令，则只能在“环 0”中运行时这样做，因此，它需要您编写内核模块。

更多细节可以在这里找到：http: [//linux.die.net/lkmpg/index.html](http://linux.die.net/lkmpg/index.html)

# c++ - 使用 emacs 对 C++ 代码中的注释进行拼写检查

> ID：10169907
> 
> 赞同：16
> 
> 时间：2012-04-16T07:03:08.047
> 
> 标签：c++, emacs, spell-checking

有没有办法使用 emacs 对 C++ 代码中的注释进行拼写检查？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T07:09:23.153

.emacs 下面的 lisp-snippet 让它在 Ubuntu Linux 上为我工作

```
(add-hook 'c-mode-common-hook 'flyspell-prog-mode) 
```

存在替代设置。但我认为你可以通过谷歌搜索 flyspell-prog-mode 找到它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-31T18:26:53.387

要拼写检查文件中已有的注释：

```
M-x ispell-comments-and-strings 
```

要在键入时检查注释的拼写：

```
M-x flyspell-prog-mode 
```

和`.emacs`kindahero建议的钩子。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-16T07:33:43.687

正如米尔克所说`flyspell-prog-mode`，这是显而易见的方式。

分享我的配置，

```
;;; for prog modes turn on flyspell-prog-mode (checks spell only in comments)
(dolist (hook '(lisp-mode-hook
                emacs-lisp-mode-hook
                ruby-mode-hook
                yaml-mode
                python-mode-hook
                shell-mode-hook
                php-mode-hook
                css-mode-hook
                nxml-mode-hook
                crontab-mode-hook
                perl-mode-hook
                javascript-mode-hook
                LaTeX-mode-hook))
  (add-hook hook 'flyspell-prog-mode)) 
```

删除那些您不使用/不想要的模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T07:13:15.427

编辑 -> 拼写 -> Ispell -> 拼写检查注释

# java - Libgdx ParticleEffect：没有错误，但没有绘制任何内容

> ID：10169909
> 
> 赞同：1
> 
> 时间：2012-04-16T07:03:19.020
> 
> 标签：java, libgdx

为什么这段代码不起作用。没有错误，但没有绘制任何内容。

该`render`方法包含：

```
 effect = new ParticleEffect();
    effect.setPosition(200, 200);
    effect.start();

    float delta = Gdx.graphics.getDeltaTime();
    GL10 gl = Gdx.app.getGraphics().getGL10();
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    spriteBatch.begin();

    effect.draw(spriteBatch, delta);

    spriteBatch.end(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T05:02:36.430

我认为只为 ParticleEffect 创建构造函数是不够的，因此您必须使用您以下列方式创建的效果对象来加载粒子效果文件。你也必须把这件事排除在外。

effect.load(Gdx.files.internal("data/yellow_particle"), Gdx.files.internal("data"));

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T09:18:04.373

如果您每帧都创建一个新效果，它永远不会移动或做任何事情，因为它将在每帧重置。您应该在循环之外创建效果。

我不知道没有设置的粒子效果会如何。因此，您还应该尝试添加纹理并设置它的首选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-04T00:14:29.067

运行一次：

```
effect = new ParticleEffect();
effect.load(Gdx.files.internal("path/to/your/particle.p", "directory/with/your/particle/png"));
effect.setPosition(200, 200);
effect.start(); 
```

在渲染中运行：

```
spriteBatch.begin();

effect.draw(spriteBatch, delta);

spriteBatch.end(); 
```

并在处置：

```
effect.dispose(); 
```

Particle.png 可以从 libgdx 源复制，例如： [https ://github.com/libgdx/libgdx/blob/master/extensions/gdx-tools/assets/particle.png](https://github.com/libgdx/libgdx/blob/master/extensions/gdx-tools/assets/particle.png)

再看一遍视频教程——你搞砸了，错过了很多东西： [http ://www.youtube.com/watch?v=LCLa-rgR_MA](http://www.youtube.com/watch?v=LCLa-rgR_MA)

教程本身涵盖的内容比视频少，但粘贴在这里希望它会更新： [https ://github.com/libgdx/libgdx/wiki/2d-particle-effects](https://github.com/libgdx/libgdx/wiki/2d-particle-effects)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-07T19:01:07.040

在类的构造函数中制作粒子效果。不要每次在您的渲染方法中制作粒子效果对象。这就是为什么，你的粒子效果每次都在初始化，你什么都看不到。

# reporting-services - SSRS 动态改变数据源连接字符串

> ID：10169910
> 
> 赞同：0
> 
> 时间：2012-04-16T07:03:24.267
> 
> 标签：reporting-services

我想修改报表服务器上共享数据源的连接字符串。原因是，每周我们都会在服务器上部署新数据，所以我计划部署新数据库，对其进行测试并修改数据源，使其连接到新数据库，然后删除旧数据库。

任何人都可以在这方面帮助我。

我尝试使用这篇文章：[Updating Shared data source connection string programmatically](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/b9874ec7-f2da-40a1-9dc1-3523c0e81741)

但我无法创建 ReportingService2005 对象，因为缺少该对象指向的 dll。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:32:42.637

ReportingServices2005 不是 dll，而是 Web 服务

大多数 2005 实例的 URL 格式如下：

```
https://<<Report Server Name>>/ReportServer/ReportService2005.asmx 
```

如果您添加网络参考，您拥有的解决方案应该可以工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T22:03:42.687

创建自定义应用程序的替代方法是使用 rs.exe 实用程序将代码作为脚本执行。

[使用 rs 实用程序和 Web 服务编写脚本](http://msdn.microsoft.com/en-US/library/ms152874%28v=sql.90%29.aspx)

# php - 将 Array 的特定项放在它的末尾

> ID：10169911
> 
> 赞同：0
> 
> 时间：2012-04-16T07:03:25.487
> 
> 标签：php, arrays

我想选择 PHP 数组的特定项并将其放在数组的末尾。我的数组由未知数量的项目组成（也就是说，您事先不知道会有多少项目），我想选择一个带键的`Other`并将其放在数组的末尾。

我已经尝试了一些`array_diff()`，但我无法选择该`Other`项目。我能够`Other`在 foreach 循环中使用 -key 选择和取消设置项目，但无法将其放在数组的末尾。所以任何建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:07:52.513

```
$array = array(
    'one' => 'some value',
    'other' => 'some value',
    'two' => 'some value',
    'three' => 'some value',
);

$other = $array['other'];
unset($array['other']);
$array['other'] = $other; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T07:10:03.837

```
$arr = array( 'key' => 'test', 'other' => 'test2', 'key2' => 'test3' );

$arr_other = $arr['other']; 

unset( $arr['other'] );

$arr['other'] = $arr_other;

print_r($arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T07:07:13.760

```
$tmp = $array['Other'];
unset($array['Other']);
$array['Other'] = $tmp; 
```

# amazon-ec2 - EC2 中的 Elastic Load Balancing 有多好

> ID：10169912
> 
> 赞同：5
> 
> 时间：2012-04-16T07:03:25.713
> 
> 标签：amazon-ec2, load-balancing

我看过很多关于 SO 的旧文章。所以我再问一次。截至 2012 年 4 月，EC2 中的 Elastic Load Balancing (ELB) 有多好。EC2 服务器的 ELB 替代方案是什么。优缺点都有什么。

EBL 也是一把可以自行完成所有操作的魔法剑，即我不需要对我的应用程序进行任何更改

*PS：我对所有这些都是新手*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T05:35:11.293

我在 ELB 上遇到的最大问题是每个请求有 60 秒的硬性限制。如果您的用例需要任何连接持续超过 60 秒，ELB 将不适合您。附录：如果您的连接可以进行某种“保活”流量，那么 ELB 不会杀死它。对于一般的、长时间运行的 HTTP 响应，60 秒就可以了。

~~另一个问题是，如果 ELB 未能通过您在不健康阈值中设置的健康检查次数，ELB 会立即终止与实例的所有连接，因此如果不将不健康阈值保持在高于最长运行进程的水平，则在 apache 中进行优雅停止之类的事情是很困难的，或超过 60 秒，这两者似乎都是一生，具体取决于您的应用程序和预期的响应能力。~~

*编辑*：ELB 现在支持连接耗尽：[http ://aws.amazon.com/about-aws/whats-new/2014/03/20/elastic-load-balancing-supports-connection-draining/](http://aws.amazon.com/about-aws/whats-new/2014/03/20/elastic-load-balancing-supports-connection-draining/)

另一个常见错误是忘记将实例的可用区添加到 ELB 或错误配置运行状况检查。

从管理的角度来看，ELB 非常好，但肯定仍然缺少一些不错的功能。在 ELB 上终止 SSL 可能是最大的“杀手级功能”，相比之下，所有缺点都变得微不足道和不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:41:43.123

Elastic Load Balancing 可以检测 Amazon EC2 实例的运行状况。这是一个非常好的功能。我们将 ELB 与 Auto Scaling 结合使用，效果非常好。此外，ELB 会根据您的负载自动扩展。我们从来没有遇到过 ELB 的问题。[阅读此](http://aws.amazon.com/articles/1636185810492479)内容可能对您有用

# c# - 如何在 xna 程序中添加任意扩展文件？

> ID：10169913
> 
> 赞同：0
> 
> 时间：2012-04-16T07:03:27.030
> 
> 标签：c#, windows, visual-studio-2010, windows-phone-7

在 XNA 中，如何在我的程序中添加二进制文件或任何扩展文件？谁能给我例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:12:55.760

右键单击您的项目并单击“添加参考”以获取参考，然后单击“添加现有项目”/“添加新项目”以添加项目。 [有关如何添加引用的 MSDN 文档](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:17:14.400

使用鼠标将文件从资源管理器移动到解决方案资源管理器。

# iphone - 蓝色渐变图像被错误地拉 伸为 UIButton 的橙色渐变图像

> ID：10169916
> 
> 赞同：0
> 
> 时间：2012-04-16T07:03:45.837
> 
> 标签：iphone, ios, cocoa-touch, uibutton, background-image

我有一个蓝色的渐变图像。它是 100 像素（高度）x 1 像素（宽度）。现在我试图将它用作突出显示状态的背景图像。但不知何故，它在运行时变成了橙色。这里可能有什么问题？按钮的高度是 40px，所以我在设置它之前做了一个调整大小

```
UIImage *image = [UIImage imageNamed:@"pressed.png"];
UIImage *stretchedImage = [[UIImage imageWithImage:image scaledToSize:frame.size] stretchableImageWithLeftCapWidth:0 topCapHeight:0];
[button setBackgroundImage:stretchedImage forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:46:48.437

有一些可能的解释，大致按可能性降序排列：

1）您的 scaledToSize 类别代码中有一个错误，它正在反转图像中字节的 RGB 顺序，将蓝色变为橙色。尝试不缩放图像，看看它是否是正确的颜色。无论如何，您实际上并不需要对其进行缩放，按钮背景图像已经在运行时被拉伸以适应。

2）您的项目中有两个 press.png 图像，可能在不同的文件夹中，所以您没有注意到，但是由于编译器在构建时将所有图像转储到同一个文件夹中，因此您的蓝色 press.png 被覆盖橙色按下.png。在磁盘上搜索您的项目，看看是否是这种情况。

3) 您之前有一个名为pressed.png 的橙色图像，当您构建应用程序时，由于某些缓存问题，它使用的是旧图像。尝试干净的构建，重置您的模拟器并从设备上删除该应用程序。

4) 你有一个pressed@2x.png 版本的橙色图像。当您在设备上运行时，它使用的是视网膜版本，因此看起来有所不同。

5）您的 PNG 以某种方式损坏 - 将其删除并从头开始重新创建。我以前遇到过只有 1px 宽的图像的问题，所以如果是这样的话，试着把它变宽。

# python - python矩阵转置和压缩

> ID：10169919
> 
> 赞同：17
> 
> 时间：2012-04-16T07:03:54.027
> 
> 标签：python

如何获得这个矩阵的转置......任何更简单的算法方法来做到这一点......

第一个问题：

```
 Input  a=[[1,2,3],[4,5,6],[7,8,9]]
 Expected output a=[[1, 4, 7], [2, 5, 8], [3, 6, 9]] 
```

第二个问题：

Zip 给了我下面的输出，当我不知道数组中有多少个元素时，我如何压缩，在这种情况下，我知道 3 个元素 a[0]、a[1]、a[2]，但怎么能我压缩一个 [n] 个元素

```
 >>> zip(a[0],a[1],a[2])
 [(1, 4, 7), (2, 5, 8), (3, 6, 9)] 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-11-10T09:16:27.557

使用`zip(*a)`：

```
>>> zip(*a)
[(1, 4, 7), (2, 5, 8), (3, 6, 9)] 
```

它是如何工作的： zip(*a) 等于 zip(a[0], a[1], a[2])。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-16T07:06:09.830

问题答案：

```
>>> import numpy as np
>>> first_answer = np.transpose(a)
>>> second_answer = [list(i) for i in zip(*a)] 
```

感谢 afg 的帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T07:05:17.373

您可以使用 numpy.transpose

[numpy.转置](http://docs.scipy.org/doc/numpy/reference/generated/numpy.transpose.html)

```
>>> import numpy
>>> a = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
>>> numpy.transpose(a)
array([[1, 4, 7],
       [2, 5, 8],
       [3, 6, 9]]) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-04T06:41:54.590

解决方案是使用`tuple()`函数。

这是一个如何在您的情况下执行此操作的示例：

```
a      = [[1,2,3],[4,5,6],[7,8,9]]
output = tuple(zip(*a))

print(output) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-26T06:43:01.370

您可以使用`list(zip(*a))`.

通过使用`*a`，您的列表列表可以包含任意数量的条目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-08T22:50:34.863

试试这个替换适当的变量

```
import numpy as np

data = ((0, 1, 2), (3, 4, 5), (6, 7, 8), (9, 10, 11))

data_transpose = np.transpose(data) # replace with your code
print(data_transpose) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-13T13:11:12.883

1.  无拉链

    ```
     def transpose(A):
        res = []

        for col in range(len(A[0])):
            tmp = []
            for row in range(len(A)):
                tmp.append(A[row][col])

            res.append(tmp)

        return res 
    ```

2.  使用拉链

    ```
    def transpose(A):
        return map(list, zip(*A)) 
    ```

# asp.net-mvc - asp.net mvc 3：在序列化到 url 时反转 modelbinder

> ID：10169922
> 
> 赞同：2
> 
> 时间：2012-04-16T07:04:04.537
> 
> 标签：asp.net-mvc, t4mvc

在我们的应用程序中，我们有一个称为搜索描述符的对象。我们有一个自定义的模型绑定器，可以让它全部工作。它从 URL（或发布数据）读取某些已知属性，如 q oorsort 和 page。

现在在应用程序的其他地方，我们需要一个指向搜索页面的 URL。我们使用 searchdescriptor 类来模拟我们想要搜索的内容。

我需要一种方法将 searchdescriptor 中的所有内容转换为 routevaluedictionary，然后将其与操作名称和控制器名称合并。

没什么大不了的，我只是把它添加到课堂上。但是，modelbinders 让我在控制器启动之前扩展 mvc，我想要类似的东西来序列化到 URL。

我们也使用 T4mvc，但将复杂对象传递给操作方法只是将其序列化为 tostring。

这种机制是否已经存在？还是我们必须自己编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:39:10.723

目前该机制尚不存在。我们最终只需要几个模型，我们可以只使用自定义 toQueryString 代码和 t4mvc 的 0 参数操作方法。

# aloha-editor - 用于 aloha 编辑器图像存储库的自定义存储库浏览器

> ID：10169923
> 
> 赞同：0
> 
> 时间：2012-04-16T07:04:17.750
> 
> 标签：aloha-editor

我正在尝试实现一个存储库浏览器，以便将图像插入到 aloha-editor 的可编辑中。浏览器[插件文档](http://aloha-editor.org/guides/plugin_browser.html)目前没有指定如何自定义存储库浏览器的列和行。

任何人都知道如何自定义浏览器插件的行，以便我可以在存储库浏览器的每一行中显示多个缩略图 - 类似于 Windows 文件浏览器的缩略图视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:40:17.277

我可以给你一个提示。尝试在浏览器的实现中实现以下两种方法：

```
 renderRowCols: function (item) {
        var row  = {},
            host = this.host,
            url = '',
            objTypeId;

        if (idMatch) {
            objTypeId = idMatch[1];
        }

        jQuery.each(this.columns, function (colName, v) {
            switch (colName) {
            case 'icon':
                row.icon = '<img src="/test.jpg"/>';
                break;
            case 'name':
                row.name = 'test';
                break;  
            default:
                row[colName] = '--';
            }
        });

        return row;
    },

    rowClicked: function(event) {
        var target = jQuery(event.target);

            this._super(event);

    } 
```

这应该为您指明正确的方向。

# ruby-on-rails - Ruby Rails 2.3.x 如何加载部分点击事件

> ID：10169926
> 
> 赞同：1
> 
> 时间：2012-04-16T07:04:34.203
> 
> 标签：ruby-on-rails, partial-views

单击图像（category_icon）时，如何将部分（'reports/form'）加载到隐藏的div（report_mod）中？目前，页面加载时正在加载部分内容。

需要明确的是，目标是防止部分加载，直到单击图像图标。

如果需要使用 iframe 来执行此操作，那也可以。我只需要知道如何从部分引用路径，其中表单可能是新记录或现有记录的编辑。link_to_remote 是我要找的吗？如果是这样，我会怎么写？

```
$('#category_icon').click(function(){
    $('#report_mod').html("<%= escape_javascript(render(:partial => 'reports/form')) if current_user %>");
    $('#report_mod').toggle('medium');      
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:31:38.290

您可以使用 ajax 方法来执行此操作。例如：

```
#in your js file or view
$('#category_icon').click(function(){
    $.ajax(`{
        url: "/your/url/for/form",
        dataType: "html",
        type: "GET",
        success: function(html) {          
            $('#report_mod').html(html);
            $('#report_mod').show();
        }`
    }); 
}); 
```

```
#in your controller
def display_form
    @your_object = YourObject.new
    respond_with do |format|
        format.html { }
        format.js { 
            render :partial => "reports/form"
        }
    end
end 
```

并且您需要在 config/routes.rb 中为此操作添加一个路由作为集合。

我希望这会有所帮助。

# ruby-on-rails - 仅仅依靠后端验证来验证前端的表单是不是很疯狂？

> ID：10169927
> 
> 赞同：1
> 
> 时间：2012-04-16T07:04:38.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, html, validation

我正在我的 Rails 3 应用程序中编写一些表单视图，我想知道其他人可能会做些什么来以 DRY 方式验证前端和后端的表单。

当然，如果没有 Rails 验证，似乎没有办法绕过后端验证。知道这一点，在前端编写相同的验证似乎并不是很干。我已经阅读了一些关于在 2 个地方编写验证的其他线程，但除非有充分的理由这样做，否则我宁愿不这样做。

了解 Rails 的魔力后，可能有一种简单易用的方法可以以 DRY 方式验证前端和后端，但我还没有发现它。也许是验证宝石？

所以我认为在我的前端使用 ajax 来调用我的 User 模型上的验证器方法会很好。例如，我在客户端的用户名字段侦听 jquery 按键然后将字段内容发送到我的名为“checkuser”（或类似的东西）的用户控制器方法。鉴于每个模型有 5 个或更多字段，我最终可能会在我的控制器中使用许多额外的字段检查方法......太丑陋了？

这样做有什么我应该知道的警告吗？我真的应该关心那些禁用 javascript 的人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:14:29.190

我将在来自 ASP.NET 的背景下回答这个问题。因此，如果有错误，请原谅。

在 ASP.NET 中有一个 DataAnnotation 概念，简而言之就是这样：对于每个经过验证的类，元数据都是根据“Required”或“MinLength(8)”等属性指定的。这提供了 DRY 验证 - 在客户端，这些自动映射到 jquery 函数，在服务器上，这些由运行时使用。

顺便说一句，在大多数情况下都必须验证双方，因为这将防止服务器负载过大（在客户端验证时）并防止错误的数据插入数据库（在服务器端验证时）。

在简单的谷歌搜索之后，似乎在 rails 中存在类似的方法，如本文[所述](https://stackoverflow.com/questions/5384506/does-ruby-on-rails-have-client-side-validation-like-asp-net-mvc)。

# iphone - 单击标签栏项目时如何使用不同的标签栏？

> ID：10169941
> 
> 赞同：2
> 
> 时间：2012-04-16T07:05:51.773
> 
> 标签：iphone, uitabbarcontroller

我的 mainWindow.xib 中有一个 UITabBarController，当我单击 UITabBarController 中的标签栏项目时，我希望使用不同的 UITabBarController 出现一个新视图......所以请通过建议我的教程和示例来帮助我做到这一点......

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:08:33.813

你喜欢做的是反对[HIG](http://www.google.de/url?sa=t&rct=j&q=apple%20hig&source=web&cd=1&ved=0CCkQFjAA&url=http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html&ei=HcWLT4_XK8vDtAa47u3NCw&usg=AFQjCNE17Vky3OsDv6jcESIVf1Hu6qB8aw)并且会混淆使用你的应用程序的用户。将您的子标签栏导航放在 a 中`UITableView`然后使用 a`UINavigationController`导航怎么样？那将是苹果式的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T07:10:04.203

只需在与您的标签栏项目一起打开的新视图中添加新的标签栏并隐藏当前的标签栏

```
[[UITabBar appearance] setHidden:YES]; 
```

然后继续

# sencha-touch-2 - 如何在sencha touch 2.0.0中上传和存储图片

> ID：10169946
> 
> 赞同：0
> 
> 时间：2012-04-16T07:06:25.390
> 
> 标签：sencha-touch-2

我需要开发一个应用程序，在这个应用程序中我需要上传上传的图像并将其存储在服务器上。我在表单面板上看到我没有看到我在 html 中使用的上传字段。请尽快回复。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:02:22.627

我已经使用 ST1.1 中的以下示例成功上传了一个编码字符串。

```
Ext.Ajax.request({
    url: 'page.php',
    params: {
        id: 1
    },
    success: function(response){
        var text = response.responseText;
        // process server response here
    }
}); 
```

# android - 从android中的异步任务启动新线程

> ID：10169947
> 
> 赞同：0
> 
> 时间：2012-04-16T07:06:29.527
> 
> 标签：android

在我的应用程序中，我进行了服务调用以从服务器获取图像。为此，我使用了异步任务类。对于图像加载，我正在使用延迟加载。现在的问题是，当我调用从异步任务的后台方法加载图像时然后屏幕变为空白一段时间，然后我看到进度条。当我对其进行跟踪时，我发现我应该在新线程中开始图像加载。所以我想知道如何在异步任务中启动一个新线程背景方法。请帮助我..我是新手。下面是我的代码..

```
public class GetRestaurentDetails extends AsyncTask<Object, Object, Object>
{

    Context context;
    ProgressDialog progressDialog;

    public GetRestaurentDetails(Context c) {
        this.context=c;

    }
    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        this.progressDialog=ProgressDialog.show(context,"","Please wait...");

    }
    @Override
    protected Object doInBackground(Object... params) {

        onGetRestaurentDetails();
        listAdapter = new RestaurantLidtAdapter(arrImages);
        setListAdapter(listAdapter);

        return null;
    }

    @Override
    protected void onPostExecute(Object result) {
        super.onPostExecute(result);

        progressDialog.dismiss();

    }

} 
```

和适配器类

```
private class RestaurantLidtAdapter extends BaseAdapter{
    Holder holder = null;
    LayoutInflater inflater;
    ImageLoader imageLoader;
    public RestaurantLidtAdapter(ArrayList<String> arrImages){

        inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(RestaurantListActivity.this);
    }

    @Override
    public int getCount() {

        return arrPromotions.size();
    }

    @Override
    public Object getItem(int position) {

        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        if(convertView == null){

            holder = new Holder();
            convertView = (View)inflater.inflate(R.layout.restaurantlistrowlayout, parent, false);
            holder.imgArrowImage = (ImageView)convertView.findViewById(R.id.imgArrowInHotelList);
            holder.imgHotelImage = (ImageView)convertView.findViewById(R.id.rowHotelImage);
            holder.txtRestaurentPromotion = (TextView)convertView.findViewById(R.id.TextViewPromotions);
            holder.txtRestaurentName = (TextView)convertView.findViewById(R.id.TextViewRestaurentName);

            convertView.setTag(holder);
        }
        else
        {
            holder = (Holder)convertView.getTag();

        }

        //holder.imgHotelImage.setImageBitmap(loadBitmap(arrImages.get(position)));

        imageLoader.DisplayImage(arrImages.get(position), holder.imgHotelImage);
        holder.txtRestaurentPromotion.setText(arrPromotions.get(position));
        holder.txtRestaurentName.setText(arrRestaurentName.get(position));
        convertView.setTag(holder);
        return convertView;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:13:50.443

由于您已经使用延迟加载列表视图代码中的 ImageLoader 类，我认为您不需要实现 AsyncTask 因为您只是创建适配器并将其设置为 doInBackground() 方法内的 ListView 。

并且有一个明显的问题，因为您试图在后台进程中创建适配器，这是不可取的，您应该只在 onPostExecute() 内设置一次适配器，而不是 doInBackground()。

现在，我建议您的解决方案是从 AsyncTask 中删除这两行并将图像 URL 直接传递给适配器类。

# android - 我应该在新安装的姜饼模拟器中拥有 root 权限吗？

> ID：10169948
> 
> 赞同：0
> 
> 时间：2012-04-16T07:06:38.477
> 
> 标签：android, emulation, root

我想知道为什么我在新安装的具有 API 级别 10（姜饼）的模拟器中拥有 Root 权限。我下载了 API 并创建了一个新的模拟器设备。我曾经`adb shell`得到一个shell并输入`su`，我也可以访问所有只有root和系统权限的文件夹。

我一直认为我需要运行 root 漏洞利用才能在模拟器设备上获得 root 权限......

也许是因为我使用的是 Android Reverse VM？但是我从新的和新鲜的...下载了android-10平台...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:28:06.710

Android 内核可以通过 3 种方式构建：用户、用户调试和工程。模拟器内核似乎是一个工程内核，因为这主要是我想用 Emu 做的。

如果您不需要 root，则必须使用用户选项构建自己的内核，以拥有与智能手机上的内核相同的生产环境。

# python - python xlrd 从 xls 读取电话号码变成浮点数

> ID：10169949
> 
> 赞同：2
> 
> 时间：2012-04-16T07:06:54.217
> 
> 标签：python, string, floating-point, xls, xlrd

我正在尝试使用 xlrd (python) 从 xls 读取 phonenumber 字段。但是，我总是得到浮动没有。

例如，我得到的电话号码是 8889997777.0

如何摆脱浮动格式并将其转换为字符串以将其存储在 python 中的本地 mongodb 中，作为常规电话号码的字符串，例如 8889997777

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:37:28.687

你说：

> python xlrd 从 xls 读取电话号码变成浮点数

这是不正确的。它*已经*是您的 xls 文件中的浮点数。`xlrd`准确报告它的发现。

你可以`str(int(some_float_value))`用来做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:08:29.013

您是否尝试过使用`int(phoneNumberVar)`或在您的情况下`int(8889997777.0)`？

# jsf - JSF 没有匹配的导航案例

> ID：10169951
> 
> 赞同：0
> 
> 时间：2012-04-16T07:07:00.020
> 
> 标签：jsf, navigation

我想使用导航规则从一个网页导航到另一个网页并获取 facesmessage ：

```
No navigation case match for viewId /content/diagram.xhtml,  action null and outcome edit_weekedit 
```

我的面孔配置看起来像：

```
<navigation-rule>
        <from-view-id>/content/diagram.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>edit-weekedit</from-outcome>
            <to-view-id>/edit/editnotice.xhtml</to-view-id>
        </navigation-case>
</navigation-rule> 
```

我的导航方法是：

```
public void changeListener(AjaxBehaviorEvent event) {
        SelectOneMenu source = (SelectOneMenu) event.getSource();
        if (source.getValue().equals("number_of_node")) {
            FacesContext facesContext = FacesContext.getCurrentInstance();
            String outcome = "edit_weekedit"; // Do your thing?
            facesContext.getApplication().getNavigationHandler().handleNavigation(facesContext,null, outcome);
        }
    } 
```

我使用 apache myfaces 2.0。

这里有什么问题？

最好的问候投票

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:18:45.523

在您`changeListener`的结果中`edit_weekedit`带有**下划线**，但在您的配置中`edit-weekedit`带有**连字符**。因此出现错误，请使它们都相同并重新运行。

# iphone - 如何为 view 和 tabeview 设置单个背景图像

> ID：10169952
> 
> 赞同：0
> 
> 时间：2012-04-16T07:07:10.503
> 
> 标签：iphone

我正在开发一个应用程序。我将一个 tableview 添加到当前视图。我添加了当前视图的背景图像。每当 tableview 添加到视图时，tableview 都会覆盖视图并且没有出现该背景图像。但我只需要显示具有该背景的该视图上的表格单元内容。所以请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:12:12.503

通过 xib 或代码将表格视图的背景颜色设置为“清除颜色”。在你的**viewDidLoad**方法中写：

```
yourTableView.backgroundColor = [UIColor clearColor]; 
```

告诉我它是否有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:13:55.193

您是否尝试清除 UITableView 的背景颜色。

```
tableviewObj.backgroundColor = [UIColor clearColor]; 
```

如果这不起作用，请发布您的示例代码以供我们参考。谢谢。

# objective-c - 我需要帮助子类化 UIPinchGestureRecognizer 以在捏合期间找到触摸的位置

> ID：10169955
> 
> 赞同：1
> 
> 时间：2012-04-16T07:07:18.973
> 
> 标签：objective-c, cocos2d-iphone, box2d, uigesturerecognizer, uipinchgesturerecognizer

对于与缩放无关的游戏，我需要在用户捏捏做一些花哨的点点滴滴时跟踪触摸的位置。我可以检测到夹点，但在夹点期间我找不到水龙头的位置，只有中点（即使使用私有变量 touches 也不起作用）。

理想的结果是（其中 Box2DPinchRecognizer 是我的 UIPinchRecognizer 子类的名称）：

```
Box2DPinchRecognizer *pinchRecognizer = [[Box2DPinchRecognizer alloc] initWithTarget:self action:@selector(pinchGesture:) withObject:(NSArray*)touches]; 
```

Where touches 是一个由两个 CGPoints 组成的数组，表示你的手指在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:40:04.400

无需子类化任何东西。您应该能够`UIGestureRecognizer`在其操作方法中询问任何其当前触摸的位置：

```
- (void)pinchGesture:(UIGestureRecognizer *)recognizer
{
    NSUInteger numberOfTouches = recognizer.numberOfTouches;
    NSMutableArray *touchLocations = [NSMutableArray arrayWithCapacity:numberOfTouches];
    for (NSInteger touchIndex = 0; touchIndex < numberOfTouches; touchIndex++) {
        CGPoint location = [recognizer locationOfTouch:touchIndex inView:self.view];
        [touchLocations addObject:[NSValue valueWithCGPoint:location]];
    }
    ...
} 
```

**编辑：**
在代码末尾添加方括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T04:57:16.243

我的自定义 UIPinchGestureRecognizer 的第一部分为您提供了两个触摸的位置。也许它可以帮助： [https ://stackoverflow.com/a/17938469/1186235](https://stackoverflow.com/a/17938469/1186235)

# python - 如何检查 plone site plone 4.1 中每个用户的空间使用/分配

> ID：10169959
> 
> 赞同：0
> 
> 时间：2012-04-16T07:08:03.373
> 
> 标签：python, plone

如何检查是否可以为 Plone 中的每个用户分配一定数量的空间？他用了多少或有多少是免费的？有这样的产品吗？我们还可以将 Plone 4.1 中可用的 PloneLoginHistory 集成到一起。请指导所有步骤。我在 Linux 上使用 Plone 4.1。我想用一定的空间限制在 Plone 站点中创建的每个用户，他可以在 Plone 站点上创建内容。如果超过限制，他会在保存内容时被警告，不允许保存。

# mysql - MySQL 错误 1449：指定为定义者的用户不存在

> ID：10169960
> 
> 赞同：424
> 
> 时间：2012-04-16T07:08:05.337
> 
> 标签：mysql, permissions

当我运行以下查询时，出现错误：

```
SELECT
  `a`.`sl_id`                     AS `sl_id`,
  `a`.`quote_id`                  AS `quote_id`,
  `a`.`sl_date`                   AS `sl_date`,
  `a`.`sl_type`                   AS `sl_type`,
  `a`.`sl_status`                 AS `sl_status`,
  `b`.`client_id`                 AS `client_id`,
  `b`.`business`                  AS `business`,
  `b`.`affaire_type`              AS `affaire_type`,
  `b`.`quotation_date`            AS `quotation_date`,
  `b`.`total_sale_price_with_tax` AS `total_sale_price_with_tax`,
  `b`.`STATUS`                    AS `status`,
  `b`.`customer_name`             AS `customer_name`
FROM `tbl_supplier_list` `a`
  LEFT JOIN `view_quotes` `b`
    ON (`b`.`quote_id` = `a`.`quote_id`)
LIMIT 0, 30 
```

错误信息是：

```
#1449 - The user specified as a definer ('web2vi'@'%') does not exist 
```

为什么我会收到这个错误？我如何解决它？

* * *

## 回答 #1

> 赞同：671
> 
> 时间：2013-10-31T12:58:44.290

这通常发生在将视图/触发器/过程从一个数据库或服务器导出到另一个数据库或服务器时，因为创建该对象的用户不再存在。

你有两个选择：

## 1.更改定义器

在最初导入数据库对象时，这可能是最容易做到的，方法是`DEFINER`从转储中删除任何语句。

稍后更改定义器有点棘手：

### [如何更改视图的定义器](https://dba.stackexchange.com/questions/4129/modify-definer-on-many-views)

1.  运行此 SQL 以生成必要的 ALTER 语句

    ```
    SELECT CONCAT("ALTER DEFINER=`youruser`@`host` VIEW ", 
    table_name, " AS ", view_definition, ";") 
    FROM information_schema.views 
    WHERE table_schema='your-database-name'; 
    ```

2.  复制并运行 ALTER 语句

### [如何更改存储过程的定义器](https://stackoverflow.com/questions/3206820/change-the-stored-procedure-definer)

例子：

```
UPDATE `mysql`.`proc` p SET definer = 'user@%' WHERE definer='root@%' 
```

请小心，因为这将更改所有数据库的所有定义器。

## 2.创建缺失用户

> 如果您在使用 MySQL 数据库时发现以下错误：
> 
> ```
> The user specified as a definer ('someuser'@'%') does not exist` 
> ```
> 
> 然后您可以使用以下方法解决它：
> 
> ```
> GRANT ALL ON *.* TO 'someuser'@'%' IDENTIFIED BY 'complex-password';
> FLUSH PRIVILEGES; 
> ```

*来自[http://www.lynnnayko.com/2010/07/mysql-user-specified-as-definer-root.html](http://www.lynnnayko.com/2010/07/mysql-user-specified-as-definer-root.html)*

这就像一个魅力 - 您只需更改`someuser`为丢失用户的名称。在本地开发服务器上，您通常可能只使用`root`.

还要考虑您是否真的需要授予用户`ALL`权限，或者他们是否可以使用更少的权限。

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2012-05-01T17:08:02.347

The user who originally created the SQL view or procedure has been deleted. If you recreate that user, it should address your error.

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2018-07-23T20:06:55.573

更新mysql后出现同样的错误。

执行此命令后，错误已得到修复：

```
mysql_upgrade -u root 
```

> 每次升级 MySQL 时都应该执行 mysql_upgrade。它检查所有数据库中的所有表是否与当前版本的 MySQL 服务器不兼容。如果发现表可能存在不兼容，则对其进行检查。如果发现任何问题，则修复该表。mysql_upgrade 还升级系统表，以便您可以利用可能已添加的新特权或功能。

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2016-03-01T05:00:41.820

按着这些次序：

1.  转到 PHPMyAdmin
2.  选择您的数据库
3.  选择您的餐桌
4.  在顶部菜单上单击“触发器”
5.  单击“编辑”以编辑触发器
6.  将定义者从 [user@localhost] 更改为 root@localhost

希望能帮助到你

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2013-01-09T21:24:46.570

如果用户存在，则：

```
mysql> flush privileges; 
```

* * *

## 回答 #6

> 赞同：36
> 
> 时间：2014-05-18T12:44:58.770

像这样创建已删除的用户：

```
mysql> create user 'web2vi'; 
```

或者

```
mysql> create user 'web2vi'@'%'; 
```

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2016-09-26T11:27:51.477

解决方案只是单行查询，如下所示：

```
grant all on *.* to 'ROOT'@'%' identified by 'PASSWORD' with grant option; 
```

替换**`ROOT`**为您的 mysql 用户名。替换**`PASSWORD`**为您的 mysql 密码。

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2016-01-27T19:23:58.317

通过运行以下注释修复。

```
grant all on *.* to 'web2vi'@'%' identified by 'root' with grant option;
FLUSH PRIVILEGES; 
```

如果你得到`some_other`而不是`web2vi`那么你必须相应地更改名称。

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2014-11-27T07:31:52.483

对于未来的谷歌员工：我收到了类似的消息，试图更新数据库中不包含视图的表。经过一番挖掘，事实证明我已经在该表上导入了触发器，这些是不存在的用户定义的东西。删除触发器解决了这个问题。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2017-05-22T16:32:44.337

```
grant all on *.* to 'username'@'%' identified by 'password' with grant option; 
```

例子：

```
grant all on *.* to 'web2vi'@'%' identified by 'password' with grant option; 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2016-01-11T11:17:06.610

快速修复以解决和转储文件：

```
mysqldump --single-transaction -u root -p xyz_live_db > xyz_live_db_bkup110116.sql 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2013-10-09T18:52:45.170

我与root用户有同样的问题，当我更换它时它对我有用

```
root@% 
```

经过

```
root@localhost 
```

因此，如果允许用户 'web2vi' 从 'localhost' 连接，您可以尝试：

```
web2vi@localhost 
```

我远程连接到数据库。

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2012-04-16T07:27:28.387

您的 mysql 服务器上不存在用户“web2vi”。

请参阅[http://dev.mysql.com/doc/refman/5.1/en/error-messages-server.html#error_er_no_such_user](http://dev.mysql.com/doc/refman/5.1/en/error-messages-server.html#error_er_no_such_user)

如果该用户确实存在，请检查它可以访问哪些服务器，尽管我认为这将是一个不同的错误（例如，您可能有 web2vi@localhost，但您正在以 web2vi@% 的身份访问数据库（无论如何）

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2018-09-14T10:39:20.860

在将数据库从一台服务器移动到另一台服务器后，这发生在我身上。最初，定义者使用 localhost 和用户。在新服务器上，我们没有该用户，并且主机也已更改。我备份了那个特定的表，并**从 phpmyadmin 手动删除了所有触发器**。之后它对我来说一直很好。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2015-12-02T15:27:20.327

> 为什么我会收到这个错误？我如何解决它？

我花了一个小时才找到解决此类问题的决定。但是，就我而言，我运行了这个：

```
mysql> UPDATE `users` SET `somefield` = 1 WHERE `user_id` = 2;
ERROR 1449 (HY000): The user specified as a definer ('root'@'%') does not exist 
```

如果您真的想找到问题，只需一一运行此命令即可：

```
SHOW PROCEDURE STATUS;
SHOW FUNCTION STATUS;
SHOW TRIGGERS;
SHOW FULL TABLES IN database_name WHERE TABLE_TYPE LIKE 'VIEW'; 
```

...并且，在他们每个人之后，寻找“定义者”字段。

就我而言，它是有胡子的旧触发器，有些开发人员忘记删除了。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2015-04-28T13:16:03.180

尝试将您的程序设置为 `SECURITY INVOKER`

Mysql默认将程序安全设置为“DEFINER”（CREATOR OF）..您必须将安全设置为“调用者”。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2013-08-23T06:20:41.557

我的 5 美分。

当我尝试从视图中选择时，我遇到了同样的错误。

然而问题似乎是这个视图是从另一个从不同服务器的备份中恢复的视图中选择的。

事实上，是的，用户无效，但从第一眼看去并不明显。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2012-10-18T16:42:01.250

几分钟前我遇到了同样的问题，我在从 mysql.user 表中删除了一个未使用的用户后遇到了这个问题，但是做一个 alter view 修复了它，这里有一个方便的命令，使它变得非常简单：

```
SELECT CONCAT("ALTER DEFINER=`youruser`@`host` VIEW ",
table_name," AS ", view_definition,";") FROM 
information_schema.views WHERE table_schema='databasename' 
```

将其与 mysql 命令行混合（假设 *nix，不熟悉 windows）：

```
> echo above_query | mysql -uuser -p > alterView.sql
> mysql -uuser -ppass databasename < alterView.sql 
```

注意：该命令会在文件上生成额外的 SELECT CONCAT，`mysql -uuser -ppass databasename < alterView.sql`如果不删除它会失败。

来源：[https ://dba.stackexchange.com/questions/4129/modify-definer-on-many-views](https://dba.stackexchange.com/questions/4129/modify-definer-on-many-views)

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2015-02-25T07:41:04.447

在我的例子中，该表有一个带有不存在的 DEFINER 用户的触发器。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2013-07-31T15:32:48.043

您的视图“view_quotes”可能已从“web2vi”是有效用户的不同数据库复制到“web2vi”不是有效用户的数据库中。
将“web2vi”用户添加到数据库或更改视图（通常删除 DEFINER='web2vi'@'%' 部分并执行脚本即可）

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-04-21T04:05:08.620

你可以试试这个：

```
$ mysql -u root -p 
> grant all privileges on *.* to `root`@`%` identified by 'password'; 
> flush privileges; 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2012-12-25T15:04:53.060

问题很清楚 - MySQL 找不到指定为定义者的用户。

在从开发服务器同步数据库模型、将其应用到 localhost、对模型进行更改然后将其重新应用到 localhost 后，我​​遇到了这个问题。显然定义了一个视图（我修改过），所以我无法更新我的本地版本。

**如何修复**（轻松）**：**

*注意：它涉及删除，因此它适用于视图，但如果您在表上尝试此操作，请确保您已备份数据。*

1.  以 root 身份登录数据库（或任何有足够能力进行更改的人）。
2.  删除视图、表格或您遇到的任何问题。
3.  同步您的新模型 - 它不会抱怨现在不存在的东西。您可能希望从遇到问题的项目定义中删除*SQL SECURITY DEFINER*部分。

PS 这既不是一个合适的解决方案，也不是最全面的解决方案。我只是把它作为一个可能的（而且非常简单的）解决方案发布。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2012-04-16T07:28:54.360

来自[MySQL](http://dev.mysql.com/doc/refman/5.6/en/create-view.html)`CREATE VIEW`参考：

> DEFINER 和 SQL SECURITY 子句指定在视图调用时检查访问权限时要使用的安全上下文。

此用户必须存在，并且始终最好使用“localhost”作为主机名。所以我认为，如果您检查用户是否存在并在创建视图时将其更改为“localhost”，则不会出现此错误。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2021-06-22T11:07:15.097

您可以将特定数据库的定义者更改为现有用户：

```
UPDATE mysql.proc SET definer = 'existing_user@localhost' WHERE db = 'database_name'; 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2014-06-05T05:04:06.450

如果这是一个存储过程，您可以执行以下操作：

```
UPDATE `mysql`.`proc` SET definer = 'YournewDefiner' WHERE definer='OldDefinerShownBefore' 
```

但不建议这样做。

对我来说，更好的解决方案是创建定义器：

```
create user 'myuser' identified by 'mypass';
grant all on `mytable`.* to 'myuser' identified by 'mypass'; 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2012-04-30T19:00:35.473

进入编辑例程部分，在底部，将 Security Type 从 Definer 更改为 Invoker。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2013-08-07T19:53:14.573

您的一个或多个视图由其他用户创建/注册。您必须检查视图的所有者，并且：

1.  重新创建用户；正如其他答案所说。或者
2.  `'web2vi'`重新创建用户使用[ALTER VIEW](http://dev.mysql.com/doc/refman/5.1/en/alter-view.html)创建的视图

我曾经遇到过这个问题。

我试图使用 SQLYog 将视图从 BD1 迁移到 BD2。SQLYog 在另一个数据库 (DB2) 中重新创建了视图，但它保留了 BD1 的用户（它们在不同的地方）。后来我意识到我在查询中使用的视图与你有同样的错误，即使我没有创建任何视图。

希望这有帮助。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2020-10-28T19:02:34.497

就我而言，删除所有视图解决了这个问题。

```
DROP VIEW view_name; 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2016-12-05T06:51:21.247

这发生在我使用 MYSQL Workbench 6.3 Community 在 Windows 10 上导入转储后，“root@% 不存在”。即使用户存在。首先，我尝试注释掉 DEFINER，但是这不起作用。然后我用**“root@localhost”对****“root@%”**进行了字符串替换，并重新导入了转储。这对我有用。

 *** * *

## 回答 #30

> 赞同：1
> 
> 时间：2016-01-25T14:17:18.383

我来这里是为了同样的问题，我在我的代码中找不到某个用户正在执行操作的任何地方。显然它来自使用已被长期删除的用户的触发器（数据库是从旧版本恢复的）所以如果你像我一样感到困惑，请查看你的数据库事件/触发器/例程。希望这会对某人有所帮助。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2021-01-27T08:27:09.510

上面的方法我都试过了，但是在创建视图的时候感觉像是重复动作。我在更新导入数据库的视图时遇到了同样的问题。

您可以通过简单地创建具有创建权限的用户来简单地解决 LOCAL 中的问题。

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2021-08-29T09:26:23.597

对我来说，`''`从 DEFINER 中删除就可以了。
`DEFINER = user@localhost`

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2015-12-07T15:16:29.217

就我而言，我在该表上有一个触发器，我无法更新数据，得到相同的错误。

> MySQL 错误 1449：指定为定义者的用户不存在

解决方案是删除该表上的触发器并重新创建它们，这解决了问题，因为触发器是由另一台服务器的另一个用户创建的，并且在更改托管公司后新服务器上的用户名发生了更改。那是我的 2 美分

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2015-09-14T09:38:48.157

当 mysql.proc 为空时，但系统总是注意到 table_name 不存在“user@192.168.%”，你只需在 mysql 命令行中 root 并键入：

```
CHECK TABLE `database`.`table_name` QUICK FAST MEDIUM CHANGED;
flush privileges; 
```

超过！

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2016-02-12T18:45:13.007

尝试以下操作：

```
mysqldump --routines --single-transaction -u root -proot portalv3 > c:\portal.sql 
```

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2015-05-14T12:33:18.130

数据库用户似乎也区分大小写，所以虽然我有一个 root'@'% 用户，但我没有 ROOT'@'% 用户。我通过工作台将用户更改为大写，问题解决了！

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2019-05-18T13:19:15.477

试试这个这是简单的解决方案

```
mysql -u root -p
SET GLOBAL sql_mode=(SELECT REPLACE(@@sql_mode,'ONLY_FULL_GROUP_BY','')); 
```

更多在[https://stackoverflow.com/a/42183702/5407056](https://stackoverflow.com/a/42183702/5407056)

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2018-06-20T08:01:04.577

另外，要更改触发器的定义器（ALTER 不起作用），您可以这样做：

为每个触发器生成一个 DROP 和一个 CREATE 命令：

```
SELECT CONCAT("DROP TRIGGER ", trigger_name, ";", " CREATE TRIGGER ", TRIGGER_NAME, " AFTER ", EVENT_MANIPULATION, " ON ", EVENT_OBJECT_SCHEMA, ".", EVENT_OBJECT_TABLE, " FOR EACH ROW ", ACTION_STATEMENT, ";") AS sqlCommand FROM information_schema.triggers WHERE EVENT_OBJECT_SCHEMA = "yourdatabase"; 
```

在 foreach 中执行它。当我将生产数据库带到我的开发机器并使用 foreach 遍历所有命令并自动重新创建触发器时，我在我的应用程序中使用它。这让我可以选择自动化它。

PHP/Laravel 中的示例：

```
 $this->info('DROP and CREATE TRIGGERS');
    $pdo = DB::connection()->getPdo();
    $sql = 'SELECT CONCAT("DROP TRIGGER ", trigger_name, ";", " CREATE TRIGGER ", TRIGGER_NAME, " AFTER ", EVENT_MANIPULATION, " ON ", EVENT_OBJECT_SCHEMA, ".", EVENT_OBJECT_TABLE, " FOR EACH ROW ", ACTION_STATEMENT, ";") AS sqlCommand FROM information_schema.triggers WHERE EVENT_OBJECT_SCHEMA = "mydatabase";';
    $stmt = $pdo->prepare($sql, [PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => true]);
    $stmt->execute();
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
    $stmt->closeCursor();

    foreach($result as $rs){
        $pdo = DB::unprepared($rs['sqlCommand']);
        break;
    } 
```

提示：由于 mysql 缓冲区查询问题，我必须使用 pdo 执行此操作，[在此处描述](https://stackoverflow.com/questions/17434102/causes-of-mysql-error-2014-cannot-execute-queries-while-other-unbuffered-queries.)

* * *

## 回答 #39

> 赞同：-1
> 
> 时间：2019-07-08T21:49:23.460

// 将所有或特定程序更新为您想要的，使用现有用户（我的案例 -root）

1） `UPDATE mysql.proc p SET definer = 'root@%' WHERE 1=1 LIMIT 1000;` （限制子句是因为各种mysql版本在更新时抱怨不受限制或不使用where条件）

2) `FLUSH PRIVILEGES; // or restart the server`

* * *

## 回答 #40

> 赞同：-1
> 
> 时间：2016-09-24T14:37:53.500

您可以创建具有名称的用户`web2vi`并授予所有特权**

# java - 深度复制/克隆派生类到基类

> ID：10169967
> 
> 赞同：0
> 
> 时间：2012-04-16T07:09:00.353
> 
> 标签：java, serialization, clone

如何将派生类克隆（复制基类部分）到基类。

在我的例子中，基类是一个 JPA 实体，而派生类有一些用于 swing/ui 的东西。我认为通过 gson/json 序列化克隆应该可以工作，但有不同的问题。

```
Base d=new Derived();
Base b=(Base) SerializationUtils.clone(d);
System.out.println(b.getClass().getSimpleName());   //-->Derived
   //hibernateSession.save(b) -> refers to derived class 
```

除了手动将所有属性从派生复制到基础之外，还有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:57:29.980

确保继承树的所有级别都支持 Java Beans API。现在你可以像这样写一个特定级别的克隆器：

```
public <T> T specialClone( T obj, Class<T> type ) {
    T result = type.newInstance();
    Class<?> current = type;
    while( current != null ) {
        BeanInfo info = Introspector.getBeanInfo( current );
        for( PropertyDescriptor pd: info.getPropertyDescriptors() ) {
            Object value = pd.getReadMethod().invoke( obj );
            pd.getWriteMethod().invoke( result, value );
        }
        current = current.getSuperClass();
    }
    return result;
} 
```

请注意，您可能希望缓存读/写方法，因为方法调用是同步的。

当我做这样的事情时，我通常会检查一次 bean 并创建包装这两种方法的辅助对象，这样我就可以像这样工作：

```
for( Helper h : get( current ) ) {
    h.copy( obj, result );
}

public Helper[] get( Class<?> type ) {
    ... look in cache. If nothing there, create helper using  PropertyDescriptors.
} 
```

# wordpress - 在 magento 上的 Wordpress 帖子

> ID：10169968
> 
> 赞同：1
> 
> 时间：2012-04-16T07:09:00.433
> 
> 标签：wordpress, blogs, magento, fishpig

我有一家magento商店。我想使用 wordpress 在其上添加一个博客站点（www.example.com/blog）。为此，我正在使用 Fishpig 的 Wordpress Integration 2.2.7。我想为我的博客网站使用不同的模板。

所以，我为 wordpress 博客页面创建了一个单独的模板。在页面顶部，我想添加最近的帖子滑块，即，我想显示帖子的特色图片，其中包含几行内容并带有阅读更多选项。其他信息，如作者、发布日期也将与内容一起出现。我如何在博客页面模板上实现这一点？

我的博客网站菜单导航也将不同于商店的菜单导航。

我该如何实施？是否可以使用此插件或任何其他插件来做到这一点？请给我最好的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T02:04:01.827

需要获取图片资源，然后获取图片url

```
$_image = $_post->getFeaturedImage();

echo $_image->getAvailableImage(); 
```

查看`Fishpig/Wordpress/Model/Image.php`更多 url 方法：

```
public function getThumbnailImage()
public function getMediumImage()
public function getLargeImage()
public function getFullSizeImage()
public function getPostThumbnailImage()
public function getAvailableImage()
public function getImageByType($type = 'thumbnail') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:41:42.390

要获得特色帖子图片，您可以使用

```
$post->getFeaturedImage(); 
```

其中**$post**是 Fishpig Wordpress 帖子集合对象。这是获取 category_id = 3 的帖子的示例：

```
$col_posts = Mage::getResourceModel('wordpress/post_collection')
    ->addIsPublishedFilter()
    ->addCategoryIdFilter(3);
$col_posts->getSelect()->limit(1);
$post = $col_posts->getFirstItem(); 
```

您可以在上面的集合中使用 magento EAV 自定义您的选择，或者在 Fishpig/Wordpress/Model/Archive.php 中查看可用的方法。

如果您想放置最近的帖子块，请查看[http://fishpig.co.uk/wordpress-integration/docs/recent-posts-block.html](http://fishpig.co.uk/wordpress-integration/docs/recent-posts-block.html)。

# debugging - 在 Qt Creator 的 Locals and Expressions 调试窗口中看不到某些对象的内部结构

> ID：10169974
> 
> 赞同：2
> 
> 时间：2012-04-16T07:09:23.193
> 
> 标签：debugging, qt, qt-creator, watch

我想在 Qt Creator 中调试时查看对象的成员变量。例如，我可以看到自己对象的所有内部结构，但看不到 a 的成员`QGraphicsView`。

![qt 局部变量和表达式](../Images/bff72f83860aed0cf99c1e39c895f423.png)

我也很想知道为什么它说`<unavailable synchronous data>`for `std::map`。这是一个小例子：

```
#include <map>
#include <string>

int main(int argc, char *argv[])
{
    std::map<int, std::string> someMap;
    someMap.insert(std::make_pair(1, "cats"));
    someMap.insert(std::make_pair(2, "dogs"));
    someMap.insert(std::make_pair(3, "vlag"));
    return 0;
} 
```

我的构建设置如下：

![qt构建设置](../Images/cce9d864f1fd257063384fc8afabe70d.png) ![qt创作者版本](../Images/9f124c33d7e3d9dc0b8907b3780e71b4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:45:47.457

请参阅我对问题“[我可以自定义 autoexp.dat 以在 Visual Studio 2010 调试器中启用 QT QDomNode 的可视化吗？](https://stackoverflow.com/questions/5796361/can-i-customize-autoexp-dat-to-enable-visualization-of-a-qt-qdomnode-in-visual-s/5988529#5988529) ”的回答。Qt 使用 pimpl ideom 隐藏其类的私有数据并在主要版本中提供二进制兼容性。

# database-design - 我的数据库标准化了吗？

> ID：10169977
> 
> 赞同：1
> 
> 时间：2012-04-16T07:09:53.333
> 
> 标签：database-design

许多用户可以创建许多事件。用户可以向所有者发送请求以参与该活动（作为候选人、选民或两者兼而有之）。当它是候选人请求时，其他详细信息将存储在候选人详细信息表中。

```
User(u_id pk, username, password)

Event(e_id pk,u_id,e_name,e_date) 
```

`UserRequestPool(urp_id pk,u_id,e_id,request_type)`#如果请求类型为两者，则添加 2 个条目

```
CandidateDetails(id pk,u_id,e_id,candidate_image,candidate_promises) 
```

`Ballot(u_id,e_id,flag)`#确保重复投票

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:18:24.367

您应该将用户请求池 ID 存储在候选详细信息中，而不是事件 ID 和用户 ID：

```
CandidateDetails (id pk, urp_id, candidate_image, candidate_promises) 
```

选票表也一样：

```
Ballot (urp_id, flag) 
```

您可能希望将请求类型存储在表中：

```
UserRequestPool (urp_id pk, u_id, e_id, r_id)

RequestType (r_id, request_type) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:23:43.027

候选人可以是用户吗？您不想排除它，然后您可以阻止他们对自己的事件进行投票。用户参与上下文应该独立于主题名称（candidate_details 是一个不好的选择，并且可能会限制未来对数据库的增强），保持你的语义干净——这只是一个风格上的建议，但它有助于全面，用户对事件的参与应该是记录在链接表中 user_vote (u_id,e_id,vote) user_participant (u_id,e_id,status(accepted,denied))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:36:11.483

除了 userrequestpool 中的重复条目之外，您还可以再定义一个 request_type 或 r_id 对应于两者

# ruby-on-rails - Rails simple_fields_for

> ID：10169984
> 
> 赞同：0
> 
> 时间：2012-04-16T07:10:25.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我正在开发一个 rails 3.0.11 应用程序。`simple_fields_for`对于我在表格中使用的多对多关联。

```
simple_form_for @test do |f| 
  f.input :example 
  f.simple_fields_for :services do |builder| 
    render "services_partial", :f => builder
  end 
end 
```

现在这是主要表单，我`simple_fields_for`在表单中使用了渲染称为服务的多对多关联模型的部分在服务部分

```
f.input :example_service 
f.another_service 
```

我想要做的是将`example_service`属性的值分配给一个变量，例如

```
var = @test.services.example_service 
```

但这种方法是不正确的。任何人都可以帮助我了解如何为每项服务访问它。因为可能有多种服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:18:30.313

我不太明白你在做什么。但是，如果您想要给定@test 的所有服务的“example_service”的值，您可以试试这个

```
some_var = @test.services.collect(&:example_service) 
```

some_var 是所有服务的“example_service”值的数组

# ruby-on-rails - 从 git://github.com/pengwynn/linkedin.git 安装linkedin时如何解决git错误？

> ID：10169991
> 
> 赞同：5
> 
> 时间：2012-04-16T07:11:35.557
> 
> 标签：ruby-on-rails, git, linkedin

在 ROR 中使用 bundle install 时出现此错误。

获取 git://github.com/pengwynn/linkedin.git 致命：无法查找 github.com（端口 9418）（不知道这样的主机。） Git 错误：`git clone "git://github.com/pengwynn/linkedin.git" "C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/ca che/bundler/git/linkedin-3e3919d62b37a1f8879ade6b51b3eeb032fc8973" --bare --no-hardlinks`目录 C:/linkedin/linke dinfrongit 中的命令失败.

我正在使用窗户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T07:16:59.153

您是否在防火墙后面阻止端口 9418 上的连接？也许您可以尝试使用 http 协议？

```
git clone https://github.com/pengwynn/linkedin.git 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:14:59.813

```
Set proxy using git config command in the command prompt with
the following two commands: 
    git config --global http.proxy http://username:password@host:port 
    git config --global https.proxy http://username:password@host:port

In command like:
    git clone git://github.com/saasbook/hw2_rottenpotatoes.git
Replace replace git:// with https://.
    git clone https://github.com/saasbook/hw2_rottenpotatoes.git 
```

# blackberry - 如何在黑莓中使用 html 解析器？

> ID：10169992
> 
> 赞同：2
> 
> 时间：2012-04-16T07:11:43.930
> 
> 标签：blackberry

如何在黑莓中使用 html 解析器？

android中html解析器的任何示例

```
Html.fromHtml(tmpHtml).toString() 
```

如果我可以在黑莓中使用此方法，我该如何使用此方法并解析 html 字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:26:53.573

检查问题[Sax parser throwing fatal error on Blackberry的](https://stackoverflow.com/questions/7330050/sax-parser-throwing-fatal-error-on-blackberry)[答案](https://stackoverflow.com/a/7333512/431639)。

有一篇文章的链接，[Parsing HTML on Blackberry](http://www.hrbuckley.net/2011/08/parsing-html-on-blackberry.html)。这可能会有所帮助。

# postgresql - 从 SQL Server 2000 到 PostgreSQL 的数据库复制

> ID：10169993
> 
> 赞同：0
> 
> 时间：2012-04-16T07:11:47.833
> 
> 标签：postgresql, sql-server-2000, replication

我们是 SQL Server 用户，最近我们在 PostgreSQL 上有一个数据库。为了保持一致性，我们将 SQL Server 2000 上的数据库复制到 SQL Server 2000 上的其他数据库，现在我们还需要将它复制到 PostgreSQL 上的数据库。我们能够使用 ODBC 和链接服务器来做到这一点。我们为 PostgreSQL 上的数据库创建了一个 ODBC DSN，并使用该 DSN 在 SQL Server 上创建了一个链接服务器。我们能够将表从 SQL Server 数据库复制到该链接服务器，从而成功复制到 PostgreSQL 数据库。现在面临的问题是在复制时，数据类型位、数字（12,2）和小数（12,2）分别转换为字符（1）、字符（40）和字符（40）。有没有关于如何在 PostgreSQL 数据库中保留这些数据类型的解决方案？我的意思是这个位应该变成布尔值，并且数字和十进制数据类型应保持在 postgresql 的复制表中。我们正在使用 PostgreSQL 9.x

SQL Server 表，

```
CREATE TABLE tmtbl 
(
    id int IDENTITY (1, 1) NOT NULL PRIMARY KEY,
    Code varchar(15),
    booleancol bit,
    numericcol numeric(10, 2),
    decimalcol decimal(10, 2)
) 
```

在被复制到 PostgreSQL 之后，它变成了，

```
CREATE TABLE tmtbl
(
  id integer,
  "Code" character varying(15),
  booleancol character(1),
  numericcol character(40),
  decimalcol character(40),
) 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:04:12.037

Please, use:

1.  `boolean` type for `true`/`false` type of columns (there's no `bit` type in postgres);
2.  [`NUMERIC`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-NUMERIC-DECIMAL) type exists also in the PostgreSQL (according to the SQL standard). But I suggest you should better use `real` PostgreSQL type, as it will be working faster.

I recommend you to create target table on the PostgreSQL side manually, specifying proper field types, as ODBC+Linked Server combination is not doing it's job properly.

You can always consult [this part](http://www.postgresql.org/docs/current/interactive/datatype.html) of the official documentation for existing data types.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:58:13.157

你听说过外国数据包装器吗？ [http://wiki.postgresql.org/wiki/Foreign_data_wrappers](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)

# asp.net - 在 aspx 页面中显示 css 样式

> ID：10169995
> 
> 赞同：1
> 
> 时间：2012-04-16T07:11:49.417
> 
> 标签：asp.net, css

我有一个 apsx 页面，在那个页面中我有两个按钮叫做保存和取消，我需要用一些 css 样式显示它，我的脚本是

```
<table>
<tr>
    <td align="right" class="bar">
        <table>
            <tr>
                <td>
                    <asp:Button ID="btnSave" runat="server" Text="Save"/>
                </td>
                <td>
                    <asp:Button ID="btnCancel" runat="server" Text="Cancel" />
                </td>
            </tr>
        </table>
    </td>
</tr> 
```

我的CSS脚本是

```
.bar
{
background-position: center;
border-width: 1px;
border-color: #CCCCCC;
vertical-align: middle;
height: 30px;
border-top-style: solid;
} 
```

我得到了这样的风格

![在此处输入图像描述](../Images/c8c3a139dfbf87518892b44cdb83ca67.png)

我在这些保存和取消按钮上方还有几个控件......问题是这个带有条形样式的保存和取消按钮紧跟在它们上面的控件之后......

现在这些按钮显示在页面的中心，我需要在页面底部以条形样式显示这些保存和取消按钮..我该怎么做..

注意：我把位置：绝对，它会干扰其他表单的对齐方式，因为我在所有表单中都使用相同的条形样式......在其他表单中，我有填充页面并自动保存的控件取消按钮出现在底部，但这里我只有 4 个控件……所以保存和取消按钮位于中心，这就是我试图在底部显示的内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:26:59.767

这是 JSFiddle 中的解决方案：

[http://jsfiddle.net/SX7n3/6/](http://jsfiddle.net/SX7n3/6/)

一方面，失去桌子......

```
<div id="content">
    Hello World!
</div>

<div class="clear">&#160;</div>

<div class="bar">
    <div class="buttons">    
          <button type="button" id="submit">Submit</button>
          <button type="button" id="cancel">Cancel</button>
    </div>    
</div>    

.content
{
    min-height:800px;
    width: 100%;
}

.bar
{
    padding-top: 4px;
    border-width: 1px;
    border-color: #000;
    background-color: #ccc;
    height: 30px;
    border-style: solid;
}

.buttons
{
    float: right;        
}

.clear
{
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:18:33.547

你的问题不清楚，我得到你想要移动页面底部的按钮：

```
<div class="bottomBar">
<table>
<tr>
    <td align="right" class="bar">
        <table>
            <tr>
                <td>
                    <asp:Button ID="btnSave" runat="server" Text="Save"/>
                </td>
                <td>
                    <asp:Button ID="btnCancel" runat="server" Text="Cancel" />
                </td>
            </tr>
        </table>
    </td>
</tr>
</div> 
```

和CSS

```
.bottomBar
{
float :bottom;
}

.bar
{
background-position: center;
border-width: 1px;
border-color: #CCCCCC;
vertical-align: middle;
height: 30px;
border-top-style: solid;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T07:20:44.317

将这两行添加到您的 .bar 中：

```
.bar
{
position:absolute;
bottom:0;
/* the rest of your code */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T07:21:46.587

嗨，现在您可以定义表格右对齐并在 css 中创建两个类，就像这样的 **Css**

```
.bar
{
background-position: center;
border-width: 1px;
border-color: #CCCCCC;
vertical-align: middle;
height: 30px;
border-top-style: solid;
}

.save{width:100px;
height:20px;
background:green;
display: inline-block;}

.cancel{width:100px;
height:20px;
background:red;
display: inline-block;} 
```

**HTML**

```
<table align="right">
<tr>
    <td align="right" class="bar">
        <table>
            <tr>
                <td>
                    <asp:Button ID="btnSave" runat="server" Text="Save" class="save"/>
                </td>
                <td>
                    <asp:Button ID="btnCancel" runat="server" Text="Cancel"  class="cancel"/>
                </td>
            </tr>
        </table>
    </td>
    </tr>
</table>

​ 
```

现场演示[http://jsfiddle.net/rohitazad/a9uym/](http://jsfiddle.net/rohitazad/a9uym/)