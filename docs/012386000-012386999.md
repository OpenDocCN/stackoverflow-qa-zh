# StackOverflow 问答 12386000-12386999

# android - 单击 ListView 中的列表项不会在同一选项卡中打开活动

> ID：12386000
> 
> 赞同：0
> 
> 时间：2012-09-12T10:20:17.367
> 
> 标签：android

我有一个有四个选项卡的活动。第一个选项卡有列表视图和一些列表项。单击列表项后，我想在同一选项卡（第一个选项卡）上打开一个活动。我找不到任何解决方案。

帮我 ！！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:40:23.540

有一种方法可以使用 Intent 打开新活动，因此您可以执行以下操作：

```
Intent intent=new Intent(Activity.this or this,Activity2.class);
//here you can add the flags you might need
startActivity(intent); 
```

Activity.this 或 this 是启动新 Activity 的活动，因此代码必须在显示您正在使用的选项卡的 Activity 内。例如，如果您需要更改标题，您可以添加以下内容：

```
@Override
public void onResume()
{
    super.onResume();
    this.getParent().setTitle("Your title");
} 
```

# r - R 堆叠百分比条形图，带有二进制因子和标签的百分比（使用 ggplot）

> ID：12386005
> 
> 赞同：23
> 
> 时间：2012-09-12T10:20:27.763
> 
> 标签：r, ggplot2

我想生成一个看起来像这样的图形：

![在此处输入图像描述](../Images/8df33ad468bc7bd638884e1b0bbbb31a.png)

我的原始数据集如下所示：

```
> bb[sample(nrow(bb), 20), ]
      IMG QUANT FIX
25663   1     1   0
7936    2     2   0
23586   3     2   0
23017   2     2   1
31363   1     3   1
7886    2     2   0
23819   3     3   1
29838   2     2   1
8169    2     3   1
9870    2     3   0
31440   2     1   0
35564   3     1   0
24066   1     2   0
12020   3     2   0
6742    3     2   0
6189    2     3   0
26692   2     3   0
1387    3     2   0
31839   2     3   1
28637   3     2   0 
```

所以想法是条形显示 where `FIX = 1`per factor`QUANT`和 per factor `IMG`。

我已经将我的数据集聚合成百分比使用`plyr`

```
library(plyr)
bb.perc <- ddply(bb,.(QUANT,IMG),summarise,FIX.PROP = sum(FIX) / length(FIX)) 
```

它*几乎*做了正确的事情：

```
 QUANT IMG   FIX.PROP
1     1   1 0.52439024
2     1   2 0.19085366
3     1   3 0.13658537
4     2   1 0.20414201
5     2   2 0.53964497
6     2   3 0.09585799
7     3   1 0.29000000
8     3   2 0.13000000
9     3   3 0.40705882 
```

但是现在如果我制作一个图表，它并没有考虑到这些`FIX==0`情况，即所有条形都有相同的高度，即 100%，这不是我想要的。请注意各个 QUANT 子帧如何不等于 100%：

```
> sum(bb.perc[1:3,]$FIX.PROP)
[1] 0.8518293
> sum(bb.perc[4:6,]$FIX.PROP)
[1] 0.839645
> sum(bb.perc[7:9,]$FIX.PROP)
[1] 0.8270588 
```

我能用 R 做的最好的事情是显示计数：

```
# Take only the positive samples
bb.pos <- bb[bb$FIX == 1,]
# Plot the counts
ggplot(bb,aes(factor(QUANT),fill=factor(IMG))) + geom_bar() +
  scale_y_continuous(labels=percent) 
```

结果是： ![在此处输入图像描述](../Images/450e7674b31214a9c4a9a937cdf65ee9.png) 这也不是我想要的：

*   百分比比例太差了。我需要一种将 100% 点传递给 `percent`函数的方法，但我不知道如何。
*   它缺少标签。

已经有很多关于 SO 的*类似*问题，但我似乎缺乏足够的智慧（或对 R 的理解）来从它们推断出我的特定问题的解决方案。

感谢您的任何指点！

编辑：Sven Hohenstein 已经提供了答案，但我自己也是这样做的：

```
> ggplot(bb.perc,aes(x=factor(QUANT),y=FIX.PROP,label=paste(round(FIX.PROP*100),
     "%"),fill=factor(IMG)))+ geom_bar(stat="identity") + geom_text(position="stack",
     aes(ymax=1),vjust=5) + scale_y_continuous(labels = percent) 
```

使用`bb.perc`我进一步定义的`plyr`. 这个的优点是百分比是在每列本地计算的，而不是全局计算的。

感谢大家的帮助。以下两个问题及其各自的答案极大地帮助了我做对：

[使用 ggplot2 堆叠条形图标签](https://stackoverflow.com/questions/8243621/stacked-bar-graph-labels-with-ggplot2)

[向ggplot条形图添加标签](https://stackoverflow.com/questions/11653268/adding-labels-to-ggplot-bar-chart)

我最初做错的是将`position = "fill"`参数传递给 `geom_bar()`，由于某种原因，这使得所有条形都具有相同的高度！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-12T11:13:55.707

这是一种生成图的方法：

```
ggplot(bb[bb$FIX == 1, ],aes(x = factor(QUANT), fill = factor(IMG), 
                             y = (..count..)/sum(..count..))) +
 geom_bar() +
 stat_bin(geom = "text",
          aes(label = paste(round((..count..)/sum(..count..)*100), "%")),
          vjust = 5) +
 scale_y_continuous(labels = percent) 
```

更改`vjust`参数值以调整标签的垂直位置。

![在此处输入图像描述](../Images/c1237a9f047f4dbbd18d59d7d905e852.png)

# extjs4.1 - 具有特定 TreeStore 的 TreePanel

> ID：12386006
> 
> 赞同：0
> 
> 时间：2012-09-12T10:20:33.780
> 
> 标签：extjs4.1, treepanel

我有以下问题：

我正在用人的数据构建一个 TreePanel，但我不知道如何在不定义的情况下定义它的模型：叶子、cls 和文本属性。我不希望“名称”成为每个节点的节点文本。

我的模型定义如下：

```
Ext.define('People', {
     extend: 'Ext.data.Model',
     fields: [
         {name: 'Name', type: 'string'},
         {name: 'Surname',  type: 'string'},
         {name: 'Email',       type: 'string'}
         {name: 'BirthDate',  type: 'string'}
     ]
}); 
```

我的 TreeStore（目前使用静态数据，但它将从 ajax 调用加载到服务器，该服务器将返回服务器人员模型列表）。显然我不想在我的服务器模型中定义叶子、文本和 cls 属性：

```
Ext.create('Ext.data.TreeStore', {
    root: {
        expanded: true,
        children: [
            {
                "Name":"Juan", 
                "Surname":"Hoz", 
                "Email": "user@domain.com", 
                "BirthDate":"19801205"
            },
            {
                "Name":"Marta", 
                "Surname":"Hoz", 
                "Email": "user2@domain.com", 
                "BirthDate":"19831210"
            }
    }
}); 
```

我的 TreePanel 定义如下：

```
Ext.create('Ext.tree.Panel', {
    id: 'treePersonId',
    store: mystore,
    hideHeaders: true,
    rootVisible: false,
    title: 'Persons',
    collapsible: true,
    resizable:true
}); 
```

任何人都可以帮助我找到正确的方法吗？

非常感谢，

胡安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:32:56.233

```
Ext.define('Person', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'Name',
        type: 'string'
    }, {
        name: 'Surname',
        type: 'string'
    }, {
        name: 'Email',
        type: 'string'
    }, {
        name: 'BirthDate',
        type: 'string'
    }]
});

Ext.require('*');

Ext.onReady(function() {
    var store = Ext.create('Ext.data.TreeStore', {
        model: 'Person',
        root: {
            expanded: true,
            children: [{
                "Name": "Juan",
                "Surname": "Hoz",
                "Email": "user@domain.com",
                "BirthDate": "19801205"
            }, {
                "Name": "Marta",
                "Surname": "Hoz",
                "Email": "user2@domain.com",
                "BirthDate": "19831210"
            }]
        }
    });

    Ext.create('Ext.tree.Panel', {
        renderTo: document.body,
        store: store,
        hideHeaders: true,
        rootVisible: false,
        columns: [{
            xtype: 'treecolumn',
            dataIndex: 'Name',
            flex: 1
        }]
    });
}); 
```

# configuration - 我是否需要 Content Delivery 节点上的 LinkDatabase？

> ID：12386008
> 
> 赞同：2
> 
> 时间：2012-09-12T10:20:48.187
> 
> 标签：configuration, sitecore, sitecore6

我正在计划使用 SiteCore 6.5 进行企业部署......我正在考虑拥有一个 CMS（WebAuthoring）实例和多个服务器作为内容交付......我正在考虑在内容交付和 WebAuthoring 实例之间复制核心数据库...我无法理解 LinkDatabase 的作用...我需要 Content Delivery 上的链接数据库吗？！我也在考虑没有 CORE 数据库的替代方案用于内容交付，在这种情况下，我应该将 LinkDatabase 放在 Web 数据库中，我是否应该有一个重建 LinkDatabase 的程序，或者它在内容交付中完全没用设想？？？我真的无法从文档中理解链接数据库的用途和使用它的 API。请让我知道您对此的看法和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:42:13.350

据我所知，您不必在内容交付节点上拥有 LinkDatabase。然而，它非常方便，因为它是获取特定项目的参考和/或推荐人列表的最快方法之一。

您可以将 LinkdDatabase 指向 Web 数据库，Sitecore 将自动为您更新它，如扩展指南第 3.6.1 节所述：

> 您可以使用 Sitecore 链接数据库 API 访问由特定 Sitecore 项目引用或引用的所有项目。
> 
> 默认情况下，所有链接数据库信息都存储在 Core 数据库中，并汇总来自每个 Sitecore 内容数据库的项目数据。
> 
> 您可以在 connectionStringName 参数的链接数据库部分文件的 web.config 中配置链接数据库的位置：

```
<!-- LINK DATABASE --> 
<LinkDatabase type="Sitecore.Data.$(database).$(database)LinkDatabase, Sitecore.Kernel">    
    <param connectionStringName="core" />
</LinkDatabase> 
```

> 在单服务器 Sitecore 设置中，链接数据库会自动更新。
> 
> 在多服务器 Sitecore 设置中，仅针对从 CM 环境引用的数据库自动更新链接数据库。
> 
> 为确保 Sitecore 自动更新 CD 环境中的链接数据库：
> 
> *   CD 和 CM 实例必须使用相同的名称来引用跨环境（通常是 Web）的发布目标数据库。
> *   应满足下列条件之一：
>     *   核心数据库应该在 CM 和 CD 实例之间共享或复制。
>     *   链接数据库数据应配置为存储在 CM 和 CD 发布目标数据库（通常是 Web）之间共享的数据库中。

如果您想从内容交付节点中删除核心数据库，在[配置生产环境](http://sdn.sitecore.net/upload/sdn5/developer/configuring%20production%20environments/configuring%20production%20environments.pdf)(PDF) 文档中有一个名为“从内容交付环境中删除核心数据库”的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:35:19.587

Link 数据库跟踪项目之间的关系，例如项目 <-> 模板关系。Sitecore 和您的自定义组件都需要它，以便他们可以快速查找此类关系。

如果数据库实际上不在另一台机器上，我只会选择一个共享的 Core db，其中所有服务器都使用相同的核心。

如果它们在不同的机器上，那么就使用带有 SQL 复制的单独核心。

没有 Core 的场景是可能的，但不推荐，因为它更难以设置和维护。

# php - 动态 PHP 组合框

> ID：12386009
> 
> 赞同：0
> 
> 时间：2012-09-12T10:20:48.970
> 
> 标签：php, javascript, html, combobox

我在我的网站上有一个登记表，出生日期是使用 JavaScript 动态生成的，它会根据月份更改天数（即 2 月 28 日/29 日，1 月 31 日等）。现在下面的代码工作正常。

```
for (i=1; i <= 31; i++){
     var newOption = document.createElement('option');
     newOption.innerHTML=String(i);
     newOption.setAttribute('value',i);
     document.getElementById('DayOfBirth').appendChild(newOption);
} 
```

但是我如何实现它来支持这样布局的 PHP 数据

```
<select name="dobDay">
     <option value="1" <?php if (!(strcmp(1, htmlentities($row_LoggedOnUser['dobDay'], ENT_COMPAT, 'utf-8')))) {echo "selected=\"selected\"";} ?>>1</option>
     <option value="2" <?php if (!(strcmp(2, htmlentities($row_LoggedOnUser['dobDay'], ENT_COMPAT, 'utf-8')))) {echo "selected=\"selected\"";} ?>>2</option>
</select> 
```

# cuda - push_back 使用推力库

> ID：12386015
> 
> 赞同：6
> 
> 时间：2012-09-12T10:21:03.890
> 
> 标签：cuda, gpu, nvidia, thrust

是否可以将 push_back 与 Thrust 库一起使用？那么向量的向量呢？我想在 GPU 中使用 CPU 中的内容：

```
 vector< vector<int> > MyVector( 100 );
 ...
 MyVector[i].push_back(j); 
```

有没有办法使用它，例如：

```
thrust::device_vector<thrust::device_vector<int>> d_vec(4); 
```

那么创建一个 device_vectors 数组呢？可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:12:58.500

1.  是的，`thrust::device_vector`有一个`push_back`方法，就像`std::vector`.
2.  不，不可能有一个`device_vector`包含`device_vectors`. 如果您在推力中需要这种功能，我建议您查看`thrust::zip_iterator`哪些可以提供“结构数组”，例如访问一系列不同的向量或迭代器。

# android - 单击按钮时Android展开小部件并将按钮动态呈现到面板

> ID：12386017
> 
> 赞同：2
> 
> 时间：2012-09-12T10:21:08.190
> 
> 标签：android, android-widget

我有一个包含 5 个按钮的小部件。如何在单击按钮时为按钮实现这种行为，小部件下的可扩展面板会出现更多按钮？如果单击另一个按钮，则会出现另一个面板...

所以我的初始小部件布局如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" 
    android:background="@drawable/smc_icon"
    android:textColor="#FFFFFF"
    />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" 
    android:background="@drawable/smc_icon"
    android:textColor="#FFFFFF"
    />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" 
    android:background="@drawable/smc_icon"
    android:textColor="#FFFFFF"
    />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" 
    android:background="@drawable/smc_icon"
    android:textColor="#FFFFFF"
    />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" 
    android:background="@drawable/smc_icon"
    android:textColor="#FFFFFF"
    /> 
```

另一个问题：我可以实现这样一个活动，它呈现与我在资源 xml 文件中定义的一样多的按钮吗？

# css - css - 下拉列表 - z-index 不知何故仍然错误

> ID：12386027
> 
> 赞同：0
> 
> 时间：2012-09-12T10:21:39.120
> 
> 标签：css

更改 Oxid eshop 系统的模板，并以某种方式遇到了 z-index 问题。从理论上讲，所有内容都已定位（相对等），理论上下拉菜单具有 z-index，但实际上，我仍然遇到问题。

问题在此处可见，已使下拉菜单可见

[http://keith464.fahrradhamburg.de/Regale/Paletten-Regale/Einzelteile-Baukasten/](http://keith464.fahrradhamburg.de/Regale/Paletten-Regale/Einzelteile-Baukasten/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:24:51.873

..................................................... …………………………………………………………………………………………………………

嗨，现在定义 `z-index`属性是这样的

```
.listRefine.clear.bottomRound{
position:relative;
z-index:5;
} 
```

这样做你的结果是这样的

**或**------------------------------------------------ ---

![在此处输入图像描述](../Images/3145afa1c0cd91a6eddcf01365278a65.png)

***或者这样做*** --------------------------------------------------------

```
.infogridView > li, .infogridView:after{
overflow:hidden; // remove this line
z-index:1; // remove this line

}

.dropDown ul{
background:#fff; // add this line

} 
```

**比你的结果是这个**

![在此处输入图像描述](../Images/20c8b13b00eea2593cc3153fbfac3ffa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:38:17.910

.listRefine 类的 z-index 设置为 1。增加类的 z-index。

> .listRefine { z-index:5; }

我注意到这张图片也无法加载

> 背景图像：url（“/bg/svg/grad_grey-light.svg”）；

对于产品的下拉菜单，您需要添加背景颜色或背景图像。

# c# - 枚举的单独类？

> ID：12386029
> 
> 赞同：2
> 
> 时间：2012-09-12T10:21:44.310
> 
> 标签：c#, .net, enums, projects-and-solutions, class-structure

对于业务层中的单独类来存储枚举定义的普遍共识是什么？这是不好的做法吗？这是否符合良好的 n 层设计？目前，我的枚举定义散布在不同的、我认为是相关的类周围——但我觉得它们应该在一个地方。事实上，这是否是一个主观问题，并且与我如何构建解决方案的其余部分有关？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T10:28:35.870

我真的不明白为什么你会在一个*类*中放置一个枚举- 也许你的意思是文件？

*就个人而言，我为每个*枚举都有一个单独的文件，其中包含枚举的名称。

我将此文件放置在使用枚举的位置附近并相应地命名它。

如果要跨程序集/命名空间共享枚举，我将使用最低的共享命名空间，因此它对 using 命名空间可见。

将枚举靠近它们的使用位置将使将代码分离到项目中变得更容易（如果需要）。

我看不出将它们全部放在一个文件中的意义——导航方面，Visual Studio 有足够多的导航功能，这是不需要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T10:55:34.273

**将枚举保存在单独的类中**

在这种情况下，您将不相关的定义扔到一个类中，几乎没有任何好处。

**将枚举定义为与其相关的类的嵌套类型**

当你在一个类中保存枚举时，你可能会遇到命名问题：

```
class Foo
{
    public enum SomeType { /* ... */ }
    public SomeType SomeType { get; set; }
} 
```

这将给出 SomeType 已定义的错误。

它可能只是根据个人口味而沸腾，但最常见的是我将我的枚举与它们相关的类放在一起，而不是嵌套它们：

```
public enum SomeType { } 
public class Foo { } 
```

我多次尝试让它们嵌套（我们当然是在谈论公共枚举），但命名问题并不值得，例如：

```
class Foo
{
    public enum Enumeration { }
} 
```

然后我可以在类之外使用这样的枚举`Foo`，如：`Foo.Enumeration`，但遵循声明（在同一命名空间中）：

```
enum FooEnumeration { }
class Foo { } 
```

给出类似的结果，因为您不必键入“。” 当您引用枚举时：`FooEnumeration`. 此外，后者允许您这样做：

```
class Foo
{
    public FooEnumeration Enumeration { get; set; }
} 
```

这将在前一种情况下导致上述命名冲突。

**概括**

在使用具有强大 GoTo 功能的 IDE 时，在我看来，命名问题远比枚举定义的“物理”本地化重要得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:38:25.727

我希望在我的项目中为所有常量和枚举使用单独的类。它提高了代码的可读性。你应该这样做，特别是如果你有一个在你的业务层和其他层中引用的 Comman 项目。但是，如果您只是为了一个常量/枚举类而添加不必要的引用，那么将它们放在同一个项目中会更有意义。

```
public class Enumerations
{
 public enum Gender{
   Male = 0,
   Female = 1,
   Unknown = 2
 }
} 
```

当你消费时，你可以这样做

```
GetPerson(Enumeration.Gender gender)
{

} 
```

# javascript - .attr('src', url) 更改后如何强制浏览器仅刷新一张图像？

> ID：12386033
> 
> 赞同：2
> 
> 时间：2012-09-12T10:21:59.267
> 
> 标签：javascript, jquery, ajax

我有一个 ajax 上传脚本，它返回一个图像，该图像应该换出 dom 中现有的加载图像。

例如

```
<img src="http://site.com/user1-profile-pic.jpg" id="profile" /> 
```

并上传新图像返回 json

```
{"url": "http://site.com/user1-profile-pic.jpg" } 
```

然后我运行 jQuery

```
$("#profile").attr('src', myjson.url); 
```

但图像 url 总是相同的，所以我想破坏该图像的缓存以再次加载它。它可以像附加`?timestamp`到图像 URL 的末尾一样简单吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:25:34.063

它是相同的，因为它在您使用相同的名称时被缓存，诀窍是使用不同的名称。

由于您不能使用其他名称，因此我们在其上附加了一些内容：

```
var dt = new Date(); 
$("#profile").attr( 'src', myjson.url + '?dt=' + dt.getTime() ); 
```

只需一个电话（如[Sushil](https://stackoverflow.com/users/960713/sushil)所说）：

```
$("#profile").attr( 'src', myjson.url + '?dt=' + (+new Date()) ); 
```

这将输出为：

![在此处输入图像描述](../Images/e6bee971e74a1d5363e8cfcd67d459f3.png)

# javascript - 在 javascript 对象中添加变量名称而不是其值

> ID：12386037
> 
> 赞同：0
> 
> 时间：2012-09-12T10:22:13.540
> 
> 标签：javascript, json

> **可能重复：**
> [添加变量名称而不是其值，javascript](https://stackoverflow.com/questions/12386390/variable-name-getting-added-instead-of-its-value-javascript)

我在向 JavaScript 对象添加值时遇到问题，添加值是键，这里的值对是示例。

```
//JavaScript object

 var cart=new Object();
 function add()
 {
      var rating="1"
      var category="somecat";
      var user="user1";

       if(cart[user]==null)     
            cart[user]={category:rating};  
       else
             cart[user][category]=rating;
  } 
```

我所期待的是，如果用户存在于购物车对象中，那么他的特定值应该被替换，如果用户不存在，那么应该添加新用户和类别。

当用户已经存在时，代码工作正常。问题是，当 m 添加一个新元素时，`cart[user]={category:rating}`它会将变量名称添加为键，即 category ，而不是其中的值（“somecat”）。

有什么办法吗？使用 json 或 jquery 或 javascript 本身？请帮忙。谢谢！

有没有办法在变量内赋值

# regex - Perl：比较两个文件并打印匹配和不匹配的数据

> ID：12386039
> 
> 赞同：4
> 
> 时间：2012-09-12T10:22:16.157
> 
> 标签：regex, arrays, perl, grep

对于下面的 Perl 代码，我需要提高其效率，因为处理输入文件（包含数百万行数据）需要花费数小时。关于如何加快速度的任何想法？

给定两个文件，我想比较数据并打印匹配的行和不匹配的行。请注意，两列需要互换比较。

例如，

```
input1.txt
A B
C D

input2.txt
B A
C D
E F
G H 
```

请注意：第 1 行和第 2 行匹配（可互换）；第 3 行和第 4 行不匹配

```
Output:
B A match
C D match
E F don't match
G H don't match 
```

Perl代码：

```
#!/usr/bin/perl -w
use strict;
use warnings;

open INFH1, "<input1.txt" || die "Error\n";
open INFH2, "<input2.txt" || die "Error\n";
chomp (my @array=<INFH2>);

while (<INFH1>) 
{

  my @values = split;
  next if grep /\D/, @values or @values != 2;

  my $re = qr/\A$values[0]\s+$values[1]\z|\A$values[1]\s+$values[0]\z/;

    foreach my $temp (@array)
    {
    chomp $_;
    print "$_\n" if grep $_ =~ $re, $temp;                      
    }
}
close INFH1;
close INFH2;
1; 
```

非常感谢有关如何提高此代码效率的任何想法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:31:53.003

如果您有足够的内存，请使用哈希。如果符号在 input1.txt 中没有多次出现（即如果`A B`在文件中，`A X`则不在），以下应该有效：

```
#!/usr/bin/perl
use warnings;
use strict;

my %hash;

open my $F1, '<', 'input1.txt' or die $!;
while (<$F1>) {
    my @values = split / /;
    @hash{@values} = reverse @values;
}
close $F1;

open my $F2, '<', 'input2.txt' or die $!;
while (<$F2>) {
    my @values = split / /;
    my $value = $hash{$values[0]};
    if ($value and $value eq $values[1]) {
        print "Matches: $_";
    } else {
        print "Does not match: $_";
    }
}
close $F2; 
```

## 更新：

对于重复值，我会使用哈希值。只需对符号进行排序，第一个将是大哈希中的键，第二个将是子哈希中的键：

```
#!/usr/bin/perl
use warnings;
use strict;

my %hash;

open my $IN1, '<', 'input1.txt' or die $!;
while (<$IN1>) {
    my @values = sort split;
    undef $hash{$values[0]}{$values[1]};
}
close $IN1;

open my $IN2, '<', 'input2.txt' or die $!;
while (<$IN2>) {
    chomp;
    my @values = sort split;
    if (exists $hash{$values[0]}{$values[1]}) {
        print "$_ matches\n";
    } else {
        print "$_ doesn't match\n";
    }
}
close $IN2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:12:43.440

对于那些对独立于列数量的另一种解决方案感兴趣的人：

```
#!/usr/bin/perl -w

use strict;
use warnings;
use 5.010;

open INFH1, "<", input1.txt" || die "Error\n";
my @storage = map {[sort split]} <$IN1>; # store content as matrix (each row sorted)
close INFH1;

open INFH2, "<input2.txt" || die "Error\n";
while(<INFH2>) {
    chomp;
    if(@{$storage[$.]} ~~ sort split) { # if stored matrix row is elementwise-equal to current line (each row sorted)
        say "$_ matches";
    }
    else {
        say "$_ doesn't match";
    }
}
close INFH2; 
```

# kineticjs - 动力学如何设置可拖动（假）

> ID：12386045
> 
> 赞同：0
> 
> 时间：2012-09-12T10:22:24.197
> 
> 标签：kineticjs

基本上将我的脚趾浸入动力学 JS 并尝试创建一个简单的绘图应用程序，以允许用户创建非常基本的电子电路图。用户可以选择例如一个电阻器并单击舞台/画布来放置它。我的代码只是在一组中绘制电阻符号的线并将它们放置，除了电子符号的线之外，在组中，我在每一端都有一个红点，应该允许电子元件的互连。

现在有时我想让用户“拖动”符号之间的互连/线，有时移动整个符号，以便用户选择一种操作模式。如果用户选择“移动”模式，则在鼠标按下时，该组将“可拖动”设置为真。这很好用，但是当用户释放鼠标时，我想将“可拖动”设置回 false，以便用户可以选择其他可能的操作。我发现如果我将“draggable”设置为“true”，我就无法将 draggable 设置回 false。一旦我设置了“移动”模式并移动了组，那么无论当前的操作模式如何，该组都是永远可移动的。因此，当我选择互连模式时，组的可拖动状态超过规则互连。

API 文档声明 setDraggable() 接受字符串参数。我试过“”和“假”，但都没有阻止该组被拖动。

是否有另一种方法可以做到这一点，或者 setDraggable 是一种单向方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:28:02.457

最新的 4.0.1 版本中有一个错误。请参阅此[论坛帖子](http://www.kineticjs.com/forum/viewtopic.php?f=8&t=994&p=3175#p3175)和[git-hub 更改日志](https://github.com/ericdrowell/KineticJS/wiki/Change-Log)

但如果您使用的是 3.10.5 或稍旧的版本，它应该可以正常工作。尝试发布可以查看的部分代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:50:46.953

试试 this.setDraggable("false");

# jquery - HTML 表格 onChange

> ID：12386058
> 
> 赞同：3
> 
> 时间：2012-09-12T10:23:00.383
> 
> 标签：jquery, html, ajax, onchange

我有一个问题：我有一个不时由 AJAX 脚本更新的表。此更新是从我不想更改的 Chrome 插件调用的。所以我想添加某种 jQuery 触发器，在更改表格单元格时会调用我自己的函数。

是否可以？我尝试了事件 onChange 但它不起作用（如果我是对的，它是用于输入）

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:26:17.883

使用 setInterval() 您可以不断地监控您的表格的内容并将其与之前的内容进行比较。如果内容不同，则表已更改。

```
$(function() {
    var previous = $("#mytable").text();
    $check = function() {
        if ($("#mytable").text() != previous) {
            myOwnFunction();
        }
        previous = $("#mytable").text();        
    }
    setInterval(function() { $check(); }, 1000);
}

function myOwnFunction() {
    alert("CHANGED");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T10:28:05.427

`onchange`设计用于与输入类似`<select>`- 所以在这种情况下不会工作。您可以使用特定的 dom 相关事件*（例如`DOMSubtreeModified`）*，但这些不是跨浏览器并且具有不同的实现*（它们甚至现在可能已被弃用）*：

[http://en.wikipedia.org/wiki/DOM_events](http://en.wikipedia.org/wiki/DOM_events)

`MutationEvents`如上所述，似乎已经被`MutationObservers`我自己还没有使用过的东西所取代......但听起来它会满足你的需要：

[http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#mutation-observers](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#mutation-observers)

## 设置间隔

除此之外，您可以回退到一个`setInterval`处理程序，该处理程序将侦听目标元素中 HTML 的任何变化......当它发生变化时，您会触发一个函数。

```
function watch( targetElement, triggerFunction ){
  /// store the original html to compare with later
  var html = targetElement.innerHTML;
  /// start our constant checking function
  setInterval(function(){
    /// compare the previous html with the current
    if ( html != targetElement.innerHTML ) {
      /// trigger our function when a change occurs
      triggerFunction();
      /// update html so that this doesn't keep triggering
      html = targetElement.innerHTML;
    }
  },500);
}

function whenChangeHappens(){
  alert('this will trigger when the html changes in my_target');
}

watch( document.getElementById('my_target'), whenChangeHappens ); 
```

## jQuery插件

如果你想 jQueryify 上面的东西，你可以应用到任何元素上，它很容易修改：

```
/// set up the very simple jQuery plugin
(function($){
  $.fn.domChange = function( whenChanged ){
     /// we want to store our setInterval statically so that we
     /// only use one for all the listeners we might create in a page
     var _static = $.fn.domChange;
     _static.calls = [];
     _static.iid = setInterval( function(){
       var i = _static.calls.length;
       while ( i-- ) {
         if ( _static.calls[i] ) {
           _static.calls[i]();
         }
       }
     }, 500 );
     /// step each element in the jQuery collection and apply a
     /// logic block that checks for the change in html
     this.each (function(){
       var target = $(this), html = target.html();
       /// by adding the function to a list we can easily switch
       /// in extra checks to the main setInterval function
       _static.calls.push (function(){
         if ( html != target.html() ) {
           html = target.html();
           whenChanged();
         }
       });
     });
  }
})(typeof jQuery != undefined && jQuery);

/// example code to test this
(function($){
  $(function(){
    $('div').domChange( function(){
      alert('I was changed!');
    } );
  });
})(typeof jQuery != undefined && jQuery); 
```

显然上面是一个非常简单的版本，应该扩展它来处理监听器的添加和删除。

# javascript - 展开和折叠文件夹

> ID：12386060
> 
> 赞同：0
> 
> 时间：2012-09-12T10:23:09.537
> 
> 标签：javascript, toggle

我需要获得多个元素来切换打开和关闭。现在该功能只是选择ID，但我想知道如何让它选择一个类。我以为我可以更改为`document.getElementById`，`document.getElementByClass`但没有奏效。

我在搜索过程中选择了这段代码：

```
#ToggleTarget {display:hidden;}

<script type="text/javascript">
function Toggle() {
    var el = document.getElementById("ToggleTarget");
    if (el.style.display == "block") {
        el.style.display = "none";
    }
    else {
        el.style.display = "block";
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:28:12.830

```
var getElementsByClassName = function(node, classname) {
    if (document.getElementsByClassName) { 
        return document.getElementsByClassName(classname);
    }
    var a = [];
    var re = new RegExp('(^| )'+classname+'( |$)');
    var els = node.getElementsByTagName("*");
    for(var i=0,j=els.length; i<j; i++)
        if(re.test(els[i].className))a.push(els[i]);
    return a;
}

var Toggle = function(){
    var tp = getElementsByClassName(document.documentElement,'toggle');
        for(var i = 0; i < tp.length; i++){
            if(tp[i].style.display=='none')
                tp[i].style.display='block'
            else
                tp[i].style.display='none'
    }
} 
```

使用`getElementsByClassName`然后循环它们。

**编辑**

只要确保他们有`toggle`我上面代码中使用的类。

**更新**

添加了 IE 支持的功能（来自[https://stackoverflow.com/a/7410966/600101](https://stackoverflow.com/a/7410966/600101)）。

# ruby-on-rails - Ruby on Rails：SQLite3 到 PostgreSQL 空日期

> ID：12386061
> 
> 赞同：0
> 
> 时间：2012-09-12T10:23:13.047
> 
> 标签：ruby-on-rails, ruby, sqlite, postgresql, date

我正在开发中使用 SQLite3 数据库，现在已经开始使用 heroku 来托管我的应用程序。Heroku 仅支持我在 GEM 文件中修改过的 PostgreSQL

```
group :development, :test do
 gem 'sqlite3'
end
group :production do
  gem 'pg'
end 
```

现在，一切正常，除了当我查询日期时，我得到了这个错误

```
 ActionView::Template::Error (PG::Error: ERROR:  invalid input syntax for type date: ""
2012-09-12T10:03:03+00:00 app[web.1]: 
2012-09-12T10:03:03+00:00 app[web.1]: LINE 1: ...-12' AND '2012-09-12' OR DATE(start_date) BETWEEN '' AND '')...
2012-09-12T10:03:03+00:00 app[web.1]:                                                              ^
2012-09-12T10:03:03+00:00 app[web.1]:     137: <% if @project_search.total_entries > 0 %>
2012-09-12T10:03:03+00:00 app[web.1]:     136: 
2012-09-12T10:03:03+00:00 app[web.1]: : SELECT COUNT(*) FROM "projects"  WHERE (client LIKE '%%' AND industry LIKE '%%' AND role LIKE '%%' AND tech LIKE '%%' AND business_div LIKE '%%' AND project_owner LIKE '%%' AND exception_pm LIKE '%%' AND status LIKE '%%' AND (DATE(start_date) BETWEEN '2011-09-12' AND '2012-09-12' OR DATE(start_date) BETWEEN '' AND '') AND keywords LIKE '%%')):
2012-09-12T10:03:03+00:00 app[web.1]:     138: <% if @search_performed %>
2012-09-12T10:03:03+00:00 app[web.1]:     140: <style>
2012-09-12T10:03:03+00:00 app[web.1]:     139: 
```

这是我的 project.rb，因为我认为这是我需要更改的地方：

```
class Project < ActiveRecord::Base
  attr_accessible :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

#validates_presence_of :business_div, :client, :customer_benifits, :end_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

def self.search(search_client, search_industry, search_role, search_tech, search_business_div, search_project_owner, search_exception_pm, search_status, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords) 
  return scoped unless search_client.present? || search_industry.present? || search_role.present? || search_tech.present? || search_business_div.present? || search_project_owner.present? || search_exception_pm.present? || search_status.present? || search_start_date_dd.present?  || search_start_date_A.present?  || search_start_date_B.present?  || search_keywords.present?

todays_date = DateTime.now.to_date

if !search_start_date_A.blank? or !search_start_date_B.blank?
    search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
    search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
    todays_date = ""
    end

if search_start_date_dd.blank?
    todays_date = ""
end

if (search_start_date_A.blank? or search_start_date_B.blank?) and search_start_date_dd.blank?

where(['client LIKE ? AND industry LIKE ? AND role LIKE ? AND tech LIKE ? AND business_div LIKE ? AND project_owner LIKE ? AND exception_pm LIKE ? AND status LIKE ? AND keywords LIKE ?', 
      "%#{search_client}%", "%#{search_industry}%" , "%#{search_role}%" , "%#{search_tech}%" , "%#{search_business_div}%" , 
      "%#{search_project_owner}%" , "%#{search_exception_pm}%" , "%#{search_status}%", 
       "%#{search_keywords}%"
    ])

else

where(['client LIKE ? AND industry LIKE ? AND role LIKE ? AND tech LIKE ? AND business_div LIKE ? AND project_owner LIKE ? AND exception_pm LIKE ? AND status LIKE ? AND (DATE(start_date) BETWEEN ? AND ? OR DATE(start_date) BETWEEN ? AND ?) AND keywords LIKE ?', 
      "%#{search_client}%", "%#{search_industry}%" , "%#{search_role}%" , "%#{search_tech}%" , "%#{search_business_div}%" , 
      "%#{search_project_owner}%" , "%#{search_exception_pm}%" , "%#{search_status}%", 
      search_start_date_dd, todays_date , search_start_date_A, search_start_date_B, "%#{search_keywords}%"
    ])
end
end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

似乎 SQLite3 可以将 '' 作为空日期处理，但 PG 不能

有没有人对此有一些解决方案？

我是 Rails 新手，所以请在回答时记住这一点。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:34:27.947

`NULL`和`''`（空字符串）是不同的东西。一些数据库，比如 MySQL 和显然是 SQLite，允许您将它们视为同一事物，但事实并非如此。`''`不是有效日期。PostgreSQL 也不接受另一种常见的 MySQL 主义`0000-00-00`；请注意这一点，以防您习惯将其用作占位符或“无效”值。

您需要修复您的应用程序，以便它发送`NULL`空日期。我希望将日期设置为应用程序级别的 null/nil 值（Ruby 似乎`nil`用作它的 null 值）而不是 to`""`将起到作用。

# c# - 线程和网络浏览器控制

> ID：12386071
> 
> 赞同：2
> 
> 时间：2012-09-12T10:23:44.283
> 
> 标签：c#, multithreading, thread-safety, webbrowser-control

我对线程很陌生。我开始这样的线程：

```
Thread t_main;
t_main = new Thread(main_building_stuff);
t_main.Start(); 
```

在某些时候，我希望在 main_building_stuff 中从加载到主线程中的 webbrowser 控件中的网页中获取一些数据。

我正在用这段代码做到这一点：

```
HtmlElement lit = webBrowser1.Document.GetElementById("buildqueue"); 
```

但这会导致错误... InvalidCastException（指定的强制转换无效）

从网络浏览器接收数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:46:58.430

有人回答了这个问题，给出了正确的答案。但不知什么原因，他把它删了，所以谢谢你，但我不记得你的名字了……

这是一段有效的代码：

```
webBrowser1.Invoke(new Action(() => {
                    HtmlElement lit = webBrowser1.Document.GetElementById("buildqueue");
                    result = "whatever";
                })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:44:39.077

嗯。

`System.Windows.Forms.HtmlDocument.GetElementById()`肯定会返回一个`System.Windows.Forms.HtmlElement`.

如果你改变会发生什么

```
HtmlElement lit = webBrowser1.Document.GetElementById("buildqueue"); 
```

到

```
System.Windows.Forms.HtmlElement lit = webBrowser1.Document.GetElementById("buildqueue"); 
```

您仍然收到无效的转换错误吗？

我只是碰巧知道有多个常用的类被调用`HtmlElement`，我想知道你是否从另一个命名空间导入了一个。

# ajax - 在 ajax 中恢复 $_GET var

> ID：12386073
> 
> 赞同：0
> 
> 时间：2012-09-12T10:23:51.227
> 
> 标签：ajax

当 URL 中有一些 $_GET 信息时，例如：index.php?WhatIWant=1。我们如何使用 ajax 恢复该值？

我尝试在 php 部分使用 $_GET['WhatIwant'] 来恢复它，如下所示：

PHP：

```
<?php

echo $_GET['WhatIwant'];

?> 
```

jQuery：

```
$.post('functions/test.php',function(test)
{
    $('.value').text(test);
}); 
```

但我不断收到“未定义的索引：WhatIwant”，我认为这是有道理的。但那怎么恢复呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:30:26.627

它返回 undefined 的原因是因为您发布到未设置 $_GET var 的 functions/test.php 。

如果您无法在 javascript 中访问它，我会建议如下内容：

```
var randomGet = <?php echo(isset($_GET['random']) ? '"' .$_GET['random']. '"' : ''); ?>;
alert(randomGet); 
```

# facebook - 分享到 Facebook 时如何指定缩略图？

> ID：12386074
> 
> 赞同：0
> 
> 时间：2012-09-12T10:23:53.397
> 
> 标签：facebook, codeigniter

我在我的 CodeIgniter 页面上嵌入了 youtube 视频，我正在使用官方的 youtube 嵌入代码：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/msHFJhMqaKI" frameborder="0" allowfullscreen=""></iframe> 
```

但是当我尝试将我的页面分享到 Facebook 时，我没有缩略图，是否有标签或其他东西可以帮助我将我的视频签名为未来的 Facebook 缩略图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:30:22.987

是的，您应该在头部添加元标记

```
<meta property="og:image" content="http://siim.lepisk.com/wp-content/uploads/2011/01/siim-blog-fb.png" /> 
```

添加元标记后，您可以检查页面中的 Facebook 废品

[脸书短绒](https://developers.facebook.com/tools/debug)

这是其他一些有用的元标记

```
<meta property="og:title" content="The Rock"/>
<meta property="og:type" content="movie"/>
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
<meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/> 
```

**欲了解更多信息，**
[请访问此链接](http://davidwalsh.name/facebook-meta-tags)..

# java - compareTo 和 compare 是如何工作的？

> ID：12386075
> 
> 赞同：28
> 
> 时间：2012-09-12T10:23:59.697
> 
> 标签：java

我知道比较并`compareTo`返回一个`int`值。

例如：

```
Returns
0 if a equal b
-1 if a < b
+1 if a > b 
```

`sort`方法调用其中一个`compareTo`或`compare()`方法。但是`sort`方法如何安排`list`比较或`compareTo`返回`int`值。`compare`在 a或返回要排序的 int 值之后运行的后台场景是什么`compareTo`？`sort`方法如何使用从and返回给它的 int 值（`-1`或`0`或）`1``compare``compareTo`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-13T04:26:24.200

如果被比较的两个元素 (a,b) 的顺序已经正确，`compare(a, b)`并且`a.compareTo(b)`都返回一个值`<= 0`，那么就不必发生任何事情。

如果它们的顺序不正确，则返回值为`> 0`，表示它们必须互换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T10:31:00.820

一般案例排序算法基于比较。如果你比较`a`和`b`- 正好有 3 种可能性：`a == b`, `a > b`, `a < b`.

`compare()`or方法正好提供了这些`compareTo()`信息。

现在，为了使用这些信息，我们设计了许多[排序算法](http://en.wikipedia.org/wiki/Sorting_algorithm)，从简单的[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)开始，还有一些更先进的排序算法，例如[快速排序](http://en.wikipedia.org/wiki/Quicksort)。每个都为排序问题提供了不同的方法。

Java为其排序实现选择了[TimSort算法。](http://en.wikipedia.org/wiki/Timsort)

作为练习，您可以设计自己的¹排序算法。你能用这个`compare()`方法找到一个数组的最大元素吗？当你找到它时它应该在哪里？你接下来应该怎么做？

* * *

(1) 好吧，你自己想想，其实它已经存在了：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T10:27:39.117

阅读[本文档](http://leepoint.net/notes-java/data/expressions/22compareobjects.html)：

*   `a.compareTo(b)`:
    可比的界面。比较值并返回一个 int，它告诉值比较小于、等于还是大于。如果您的类对象具有自然顺序，请实现 Comparable 接口并定义此方法。所有具有自然排序的 Java 类都实现了这一点（String、Double、BigInteger，...）。

*   `compare(a, b)`：
    比较器接口。比较两个对象的值。这是作为 Comparator 接口的一部分实现的，典型用途是定义一个或多个实现此功能的小型实用程序类，以传递给诸如 sort() 之类的方法或用于对诸如 TreeMap 和 TreeSet 之类的数据结构进行排序。您可能希望为以下内容创建一个 Comparator 对象：

    *   多重比较。提供几种不同的排序方式。例如，您可能希望按名称、ID、年龄、身高等对 Person 类进行排序……您将为其中的每一个定义一个 Comparator 以传递给 sort() 方法。
    *   系统类 为您无法控制的类提供比较方法。例如，您可以为字符串定义一个比较器，按长度比较它们。
    *   策略模式 实现策略模式，在这种情况下，您希望将算法表示为可以作为参数传递、保存在数据结构中等的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-30T00:40:10.283

希望 compare() 方法的这些实现可以帮助您更好地理解它。

```
public int compare(Object obj1, Object obj2)
{
 Integer I1 = (Integer)obj1; // typecasting object type into integer type
 Integer I2 = (Integer)obj2; // same as above ..
 // 1.
 return I1.compareTo(I2); // ascending order [0, 5, 10, 15, 20]
 // 2.
 return -I1.compareTo(I2); // descending order [20, 15, 10, 5, 0]
 // 3.
 return I2.compareTo(I1); // descending order [20, 15, 10, 5, 0]
 // 4.
 return -I2.compareTo(I1); // ascending order [0, 5, 10, 15, 20]
 // 5.
 return +1; // insertion order [10, 0, 15, 5, 20, 20]
 // 6.
 return -1; // reverse of insertion order [20, 20, 5, 15, 0, 10]
 // 7.
 return 0; // only first element [10]
} 
```

[compare() 方法在 Java 中的工作原理](https://www.geeksforgeeks.org/how-compare-method-works-in-java/)

# blackberry - 如何在黑莓中实现增强现实？

> ID：12386076
> 
> 赞同：0
> 
> 时间：2012-09-12T10:24:05.823
> 
> 标签：blackberry, augmented-reality

实际上我有一个与增强现实相关的任务，它需要在黑莓上实现。

从哪里开始？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:38:49.757

[RIM OS 7 支持增强现实](http://www.rim.com/products/blackberry_os7.shtml)

查看此出版物：[创建您自己的增强现实世界：Wikitude 介绍 myWorld](http://blogs.blackberry.com/2012/03/myworld-wikitude-video/)

和这个线程：[黑莓的开源增强现实框架](https://stackoverflow.com/questions/7088977/open-source-augmented-reality-framework-for-blackberry)

# javascript - 关于通过 https 包含外部 javascript 文件和 css 的问题

> ID：12386080
> 
> 赞同：0
> 
> 时间：2012-09-12T10:24:19.953
> 
> 标签：javascript, https, stylesheet

我们的网站使用方 https 和 http 协议。但问题是，浏览器必须加载 css 和 js 文件两次（第一次 http:/....tld/style.css 和第二次 https:/....tld/style.css）。

我考虑过将这些文件始终绝对包含为 https:/....tld/style.css 。

对这个提议有任何顾虑（例如 ssl 加密性能？）。

我没有在任何其他网站上看到这个提议，所以我不太确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:31:09.453

通过 SSL，您将收到相同的文件，但已加密，这意味着它更大且更慢。这取决于服务器上使用的 SSL 密钥，但我猜它至少可能是数据大小的两倍。

# lua - Lua：嵌套 if 语句

> ID：12386085
> 
> 赞同：4
> 
> 时间：2012-09-12T10:24:36.570
> 
> 标签：lua

Lua 是一门轻巧而强大的语言，但有时感觉缺少一些我们在其他语言中习惯的非常方便的功能。我的问题是关于嵌套`if`条件。在 Perl、Python、C++ 中，我通常倾向于避免嵌套结构并尽可能编写纯代码，例如：

```
# Perl:
for (my $i = 0; $i < 10; ++$i) {
    next unless some_condition_1();
    next unless some_condition_2();
    next unless some_condition_3();
    ....
    the_core_logic_goes_here();        
} 
```

Lua 缺少那个`next`or`continue`语句，所以相同的代码看起来像：

```
-- Lua:
for i = 1, 5 do
    if some_condition_1() then
        if some_condition_2() then
            if some_condition_3() then
                the_core_logic_goes_here()
            end
        end
    end
end 
```

所以我想知道是否有标准方法可以避免`if`Lua 中的嵌套块？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T11:22:27.687

在 Lua 5.2 上，您可以使用[goto](http://lua-users.org/wiki/GotoStatement)语句（请小心）！

该关键字的典型用法之一是替换缺失的`continue`or`next`语句。

```
for i = 1, 5 do
  if not some_condition_1() then goto continue end
  if not some_condition_2() then goto continue end
  if not some_condition_3() then goto continue end
  the_core_logic_goes_here()
::continue::
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T10:49:28.003

我不知道这是否特别惯用，但您可以使用单个嵌套循环`break`来模拟`continue`

```
for i = 1, 5 do
    repeat
        if some_condition_1() then break end
        if some_condition_2() then break end
        if some_condition_3() then break end
        the_core_logic_goes_here()
    until true
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-12T16:00:05.947

> 有时感觉缺少一些我们在其他语言中习惯的非常方便的功能

权衡是概念的经济性，这导致了实现的简单性，这反过来又导致了 Lua 著名的速度和体积小。

至于您的代码，这不是最广泛的解决方案（请参阅其他受访者了解实现 continue 的两种方式），但对于您的特定代码，我只需编写：

```
for i = 1, 5 do
    if  some_condition_1() 
    and some_condition_2() 
    and some_condition_3() then
        the_core_logic_goes_here()
    end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T23:59:09.747

```
for v in pairs{condition1,condition2,condition3} do
    if  v() then
        the_core_logic_goes_here()
    end
end 
```

可能是你喜欢的？

“Lua 缺少下一个或继续语句” Lua 作为下一个语句和一个非常相似的函数“ipairs”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-06T22:47:05.577

## 解决方案 1。

您可以将所有条件添加到 if 语句并使用 else 语句，您应该这样做。所以是这样的：

```
if cond_1() and cond_2() and cond_n() then
  the_core_logic_goes_here()
else
  -- do something else here
end 
```

## 解决方案 2。

您可以使用类似但看起来更像其他语言的东西，您更喜欢使用这种语言，如果不满足`if cond_n() then else return end`，则只返回 nil 。`cond_n()`总而言之，它应该看起来像这样：

```
for idx=1, 5 do
  if cond_1() then else return end
  if cond_2() then else return end
  if cond_3() then else return end
  if cond_4() then else return end
  the_core_logic_goes_here()
end 
```

但是，我真的认为你应该使用前者，它是一个更好的解决方案，我很确定 lua 解决方案 1\. 将编译成更快的字节码。

# sql - SQL：在字符串中的数字前插入空格

> ID：12386091
> 
> 赞同：0
> 
> 时间：2012-09-12T10:24:51.980
> 
> 标签：sql, sql-server, string, nvarchar

我的表中有一个`nvarchar`字段，其中包含各种字符串。如果字符串包含非数字符号后面的数字，我想在该数字之前插入一个空格。

也就是说 - 如果该字段中的某个条目是`abc123`，它应该变成`abc 123`，或者`ab12.34`应该变成`ab 12\. 34`。我希望在整个表格中都这样做。

实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:43:01.407

你可以尝试这样的事情：

```
select left(col,PATINDEX('%[0-9]%',col)-1 )+space(1)+
       case
         when PATINDEX('%[.]%',col)<>0 
           then substring(col,PATINDEX('%[0-9]%',col),len(col)+1-PATINDEX('%[.]%',col))
                +space(1)+
                substring(col,PATINDEX('%[.]%',col)+1,len(col)+1-PATINDEX('%[.]%',col))
         else substring(col,PATINDEX('%[0-9]%',col),len(col)+1-PATINDEX('%[0-9]%',col))
       end       
from tab 
```

不简单，希望对你有帮助。

[SQL小提琴](http://sqlfiddle.com/#!3/a0897/2)

我使用了函数（链接到 MSDN）： [LEFT](http://msdn.microsoft.com/en-us/library/ms177601.aspx)、[PATINDEX](http://msdn.microsoft.com/en-us/library/ms188395.aspx)、[SPACE](http://msdn.microsoft.com/en-us/library/ms187950.aspx)、[SUBSTRING](http://msdn.microsoft.com/pl-pl/library/ms187748.aspx)、[LEN](http://msdn.microsoft.com/en-us/library/ms190329.aspx) 和[正则表达式](http://msdn.microsoft.com/en-us/library/ms174214.aspx)。

# windows-server-2003 - 无法在 Windows Server 2003 上打开 JPG 文件

> ID：12386093
> 
> 赞同：-1
> 
> 时间：2012-09-12T10:24:56.960
> 
> 标签：windows-server-2003, paint, tiff, jpeg, opentext

我在 Windows Server 2003 上打开 JPG（甚至 TIF）文件时遇到问题。没有程序想要打开图片。我尝试使用 Windows Preview、MS Paint 和事件 Paint.NET。

Thad“坏”文件由 OpenText OCR 软件生成。

当我将那个“坏”文件复制到我的机器上时，一切正常。然后我在我的计算机上重新保存图像并放回 Windows Server 2003 - 一切正常！

似乎 Windows Server 2003 不支持这种格式，但为什么呢？任何人都可以帮忙吗？

消息表单 MSPaint：

* * *

画

* * *

C:\Temp\output.jpg 画图无法读取此文件。这不是一个有效的位图文件，或者它的格式目前不受支持。

* * *

好的

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:27:41.427

最后我发现在JPEG内容之前在JPEG文件中添加了一些标题，在JPEG内容之后添加了终止符。通过使用 Hex 编辑器并与常规 JPEG 文件比较可以看出。

解决方案是将内容保持在两个 JPEG 标记 0xFFD8 和 0xFFD9 之间。

关于 JPEG 格式的有用资源： [http ://www.media.mit.edu/pia/Research/deepview/exif.html](http://www.media.mit.edu/pia/Research/deepview/exif.html)

# c1-cms - Composite C1 - 显示上传的 SWF 文件

> ID：12386104
> 
> 赞同：0
> 
> 时间：2012-09-12T10:25:25.403
> 
> 标签：c1-cms

我目前正在尝试使用以下语法显示 SWF 文件`src="@Html.C1().MediaUrl(b.SWFFile)"`

但输出的路径是

```
src="/media/0f923295-713b-418d-afbf-17675cdb6d9e/Banner Ads/Flash/728x90_swf" 
```

为什么 Composite C1 将文件扩展名更改为 _swf？我是否使用了不正确的函数来引用媒体文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:18:24.783

在内置媒体 url-s 中不使用扩展有两个原因：

1) 如果您运行的是 IIS6 或 IIS7 经典模式，IIS 可能无法将请求引导至 ASP.NET（由于扩展），因此 C1 将无法为其提供服务。

2）在IIS7的默认设置中有很多扩展名，这些扩展名的存在使得IIS返回404（如.config、.master和.cs）。

我猜你的 Flash 播放器没有播放文件的问题，这里报告了这个问题[http://compositec1.codeplex.com/workitem/1379](http://compositec1.codeplex.com/workitem/1379)，它可能会在下一个版本中得到解决。

现在，我建议使用以下代码生成 flash url 作为解决方法

```
protected string GetMediaUrl(string mediaPath)
{
    string[] parts = mediaPath.Split(new[] { ':' });

    string mediaStore = parts[0];
    Guid mediaId = new Guid(parts[1]);

    string mediaUrl = MediaUrls.BuildUrl(new MediaUrlData { MediaStore = mediaStore, MediaId = mediaId, QueryParameters = new NameValueCollection() },
                                         UrlKind.Public);

    // Temporary fix, allows media player to receive a nice url with an extension
    return mediaUrl.Replace("_jpg", ".jpg").Replace("_mov", ".mov").Replace("_m4v", ".m4v").Replace("_swf", ".swf");
} 
```

# xsd - 如何从一组 XSD 文件生成依赖关系图？

> ID：12386110
> 
> 赞同：3
> 
> 时间：2012-09-12T10:25:34.417
> 
> 标签：xsd, diagram, dependency-management, circular-dependency

见标题：我有大约 50 个 XSD 文件相互导入（带有标签），我需要分析它们的依赖关系。

您是否知道任何软件（最好是免费的）可以从这些文件中自动生成依赖关系图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-29T09:55:19.770

我没有找到任何现有的程序来做到这一点，所以......我开发了自己的！它被称为[**GraphVisu**](http://sourceforge.net/projects/graphvisu/)。

有第一个程序从种子 XSD 文件生成图形结构，另一个程序用于可视化图形。我还包括检测相互关联的节点集群（在图论中称为“[强连接组件”）。](https://en.wikipedia.org/wiki/Strongly_connected_components)

随意使用它！

![图形可视化程序 GraphVisu](../Images/457061572f347aa4bbcd88de67eb9fd1.png)

![图形可视化程序 GraphVisu](../Images/f4f866bc4129f1f588e0c67fad59ddb4.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:03:02.917

我不知道有任何专门为 XSD 量身定制的免费解决方案。如果我必须使用免费提供的组件来构建它，我可能会考虑[GraphViz](http://www.graphviz.org/)。您需要编写一个模块来生成 GraphViz 所需的数据，这些数据将来自解析 XSD 文件。如果您考虑到模式位置的工作原理和解析方式，并正确处理循环依赖关系，则后者是微不足道的。好消息是 GraphViz 在广泛的平台上得到支持，只要你能解析 XML，你就可以设置。

我还为[QTAssistant](http://www.paschidev.com)开发了自己的 XML Schema Refactoring (XSR) 插件。这个特殊的功能集自 2004 年以来就已经存在，所以它工作得非常好，包括 WSDL 和 XSD 文件。

我可以以不同的方式解释您的要求，因此我将参考您可以使用 XSR 做什么：

*   XSD 文件依赖项

![QTAssistant 显示 ACORD 2.21 XSD 文件布局](../Images/2ca3aa34b307748e00812a837bd10327.png)

这是一个简单的，显示分层布局。

![QTAssistant 显示 Orbitz XSD 文件布局](../Images/4274497fc16cb40178e97d8630bfecf0.png)

这是一个更复杂的，显示一个有机的布局。

*   内部 XSD 文件架构组件依赖项：可以根据任意标准进行过滤（不确定您的意思`with tags`）。

![QTAssistant 显示内部 XSD 文件依赖项](../Images/bc1c976f6b8d1fd2294f6af2436202c2.png)

*   XSD 文件集架构组件依赖项（与上述相同，但可以跨不同文件导航）

该工具带有一个自动化库，您可以在其中编写几行 C# 或 Java 脚本代码，然后您可以使用 QTAssistant shell 或命令行 shell 调用这些代码，以将其与自动构建过程集成。

[其他功能包括使用GraphML](http://graphml.graphdrawing.org/)导出基础数据的能力，即如果您希望进一步分析或处理图形（例如拓扑排序、循环等）

# perl - __LINE__ 在这个 Perl 单行代码中是恒定折叠的吗？

> ID：12386116
> 
> 赞同：0
> 
> 时间：2012-09-12T10:26:08.133
> 
> 标签：perl, constantfolding

在探索 sarathi 的[当前文件行号问题](https://stackoverflow.com/q/12384692/133939)的替代答案时，我写了这个单行代码，期望它会打印提供的所有文件的第一行：

```
$ perl -ne 'print "$ARGV : $_" if __LINE__ == 1;' *txt 
```

这没有按预期工作；所有的行都被打印出来了。

运行单行`-MO=Deparse`显示条件不存在。我认为这是因为它在编译时已被常量折叠：

```
$  perl -MO=Deparse -ne 'print "$ARGV : $_" if __LINE__ == 1;' *txt
LINE: while (defined($_ = <ARGV>)) {
    print "$ARGV : $_";
}
-e syntax OK 
```

但为什么？

在 Perl 5.8.8 下运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:33:39.327

`__LINE__`对应于 Perl 源代码中的行号，而不是输入文件中的行号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T10:40:46.513

`__LINE__`是源代码行号，即程序行号。 `$.`会给你输入文件的行号。

如果你想打印所有文件的所有第一行，那么你可以试试这个：

```
perl -lne '$.=0 if eof;print $_ if ($.==1)' *.txt 
```

# regex - 需要为格式示例 hours:minutes 示例 04:30 构建正则表达式

> ID：12386118
> 
> 赞同：0
> 
> 时间：2012-09-12T10:26:11.937
> 
> 标签：regex

我在文本中输入小时：分钟示例 04:30。在按钮上单击我需要检查它是否只有数字，没有特殊字符，没有字母，特别是中间的冒号。需要一个匹配的正则表达式。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:29:14.157

尝试这个：

```
^(([0-9])|([0-1][0-9])|([2][0-3])):(([0-9])|([0-5][0-9]))$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T13:17:30.357

`^(?:2[0-3]|[0-1]?\d):[0-5]\d$`将在有或没有前导零的情况下工作。

# objective-c - ios - 从手指触摸画笔移动

> ID：12386124
> 
> 赞同：4
> 
> 时间：2012-09-12T10:26:40.483
> 
> 标签：objective-c, ios, core-graphics, quartz-core

我想在我的 iPad 应用程序中绘制，如下图所示

![在此处输入图像描述](../Images/27b0f293b5ab35d5c338c2d50f66d705.png) 在我的应用程序中，我放置了一个图像，并且在移动手指（触摸移动）时我正在重复图像，但我的图像似乎如下。

![在此处输入图像描述](../Images/74b04e01f05ca0538f44674e6b493579.png)

以下是我绘制图像的代码

```
 CGBlendMode blendMode = kCGBlendModeColorDodge;
            UIGraphicsBeginImageContext(drawImage.frame.size);
            [drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)];
            CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);

////            NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"Watercolor-edge-45x45.png" ofType:nil];
            UIImage * textureColor;// = [UIImage imageWithContentsOfFile:imagePath];
            float angle = hypot(deltaX, deltaY);
            angle *= rand() % 180;//(M_PI / 180);
            CGPoint vector = CGPointMake(currentPoint.x - lastPoint.x, currentPoint.y - lastPoint.y);
            CGFloat distance = hypotf(vector.x, vector.y);
            vector.x /= distance;
            vector.y /= distance;
            for (CGFloat i = 0; i < distance; i += 1.0f) {
                textureColor = [UIImage imageWithCGImage:[self CGImageRotatedByAngle:image angle:angle * -1]];
                CGPoint p = CGPointMake(lastPoint.x + i * vector.x, lastPoint.y + i * vector.y);
                [textureColor drawAtPoint:p blendMode:blendMode alpha:0.1f];
            }
            CGContextBeginPath(UIGraphicsGetCurrentContext());
            CGContextStrokePath(UIGraphicsGetCurrentContext());
            UIImage *newimage = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext(); 
```

如何像第一张图片一样获取我的图片

实际上我有一个图像并将所选颜色填充到图像并开始在这里绘制我有一个图像 ![在此处输入图像描述](../Images/7791b281aaa138ab0a251c96c477027b.png)

# php - 将文档总数除以包含词干的文档数

> ID：12386129
> 
> 赞同：2
> 
> 时间：2012-09-12T10:27:14.783
> 
> 标签：php, mysql, sql

我有 2 张桌子：

`tb_sentence`：

```
================================
|id|doc_id|sentence_id|sentence|
================================
| 1|  1   |   0       |    AB  |
| 2|  1   |   1       |    CD  |
| 3|  2   |   0       |    EF  |
| 4|  2   |   1       |    GH  |
| 5|  2   |   2       |    IJ  |
| 6|  2   |   3       |    KL  |
================================ 
```

首先，我计算每个句子的数量`document_id`并将它们保存在一个变量`$total_sentence`中。所以`$total_sentence`变量的值为`Array ( [0] => 2 [1] => 4 )`

第二张表是`tb_stem`：

```
============================
|id|stem|doc_id|sentence_id|
============================
|1 | B  |  1   |     0     |
|2 | A  |  1   |     1     |
|3 | C  |  2   |     0     |
|4 | A  |  2   |     1     |
|5 | E  |  2   |     2     |
|6 | C  |  2   |     3     |
|7 | D  |  2   |     4     |
|8 | G  |  2   |     5     |
|9 | A  |  2   |     6     |
============================ 
```

其次，我需要对`stem`每个中的数据进行分组`doc_id`，然后计算由（ ）`sentence_id`之前的结果组成的数量。`$token`该概念是将文档总数除以包含词干的文档数。编码 ：

```
$query1 = mysql_query("SELECT DISTINCT(stem) AS unique FROM `tb_stem` group by stem,doc_id ");
while ($row = mysql_fetch_array($query1)) {
    $token = $row['unique']; //the result $token must be : ABACDEG
}

$query2 = mysql_query("SELECT stem, COUNT( DISTINCT sentence_id ) AS ndw FROM `tb_stem` WHERE stem = '$token' GROUP BY stem, doc_id");
    while ($row = mysql_fetch_array($query2)) {
        $ndw = $row['ndw']; //the result must be : 1122111
}

$idf = log($total_sentence / $ndw)+1; //$total_sentence for doc_id = 1 must be divide $ndw with the doc_id = 2, etc 
```

但结果在不同文档之间并不分开，如下表所示：

```
============================
|id|word|doc_id|  ndw |idf |
============================
|1 | A  |      |      |    |
|2 | B  |      |      |    |
|3 | C  |      |      |    |
|4 | D  |      |      |    |
|5 | E  |      |      |    |
|6 | G  |      |      |    |
============================ 
```

结果必须是：

```
 ============================
|id|word|doc_id|  ndw |idf |
============================
|1 | A  |   1  |      |    |
|2 | B  |   1  |      |    |
|3 | A  |   2  |      |    |
|4 | C  |   2  |      |    |
|5 | D  |   2  |      |    |
|6 | E  |   2  |      |    |
|7 | G  |   2  |      |    |
============================ 
```

请帮助我，谢谢:)

idf 的公式是`idf = log(N/df)`其中`N`是文档`df`的数量，是出现术语 (t) 的文档的数量。每个句子都被视为一个文档。这是 idf 计算的示例：文档：`Do you read poetry while flying. Many people find it relaxing to read on long flights`

```
=================================================
|     Term     | Document1(D1)| D2| df |   idf  |
=================================================
|     find     |     0        | 1 |  1 |log(2/1)|
|     fly      |     1        | 1 |  2 |log(2/2)|
|     long     |     0        | 1 |  1 |log(2/1)|
|    people    |     0        | 1 |  1 |log(2/1)|
|    poetry    |     1        | 0 |  1 |log(2/1)|
|     read     |     1        | 1 |  2 |log(2/2)|
|    relax     |     0        | 1 |  1 |log(2/1)|
================================================= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T20:46:52.490

此查询将为您提供您正在寻找的表：

```
SELECT t1.doc_id, t2.token as word, t2.token_freq as df, 
log(t1.docs/t2.token_freq) as idf
FROM 
(SELECT doc_id,count(sentence_id) as docs from tb_sentence group by doc_id) as t1,
(SELECT DISTINCT(stem) as token, doc_id, COUNT(sentence_id) as token_freq 
      FROM tb_stem GROUP BY doc_id, token) as t2
WHERE t1.doc_id = t2.doc_id 
```

*注意：原始查询中的唯一性是 MySQL 中的保留字，会给您错误。*

# java - 在 DataView 之间共享 Wicket DataProvider 时出现问题

> ID：12386131
> 
> 赞同：1
> 
> 时间：2012-09-12T10:27:18.420
> 
> 标签：java, wicket

我的网页显示了两个表格，它们显示了对相同数据的不同视图。

这些表由 Wicket DataView 对象支持，这些对象利用 DataProvider 为表提供数据。

现在因为这两个表显示相同数据的不同视图，所以我在两个 DataView 之间共享相同的 DataProvider。

但是在我的 DataProvider 中，我看不到确定哪个 DataView 正在请求数据的方法。有没有办法在我获取数据的时候区分这两者？需要某种方式知道我正在处理哪个表，以便我可以相应地过滤数据。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:20:34.193

在您的中定义一个可覆盖的方法，`DataProvider`该方法将执行特定的逻辑，或获取有关要执行的逻辑的信息，并通过实例化它的视图中的匿名子类来实现它。通过这种方式，您可以将一些逻辑（或执行它所需的数据）委托给使用`DataProvider`.

请注意，这是将 DataProvider 子类化为公共类并直接在视图中使用它们的惰性版本。

# jquery - 停止 Vimeo iframe + jQuery Cycle 插件

> ID：12386132
> 
> 赞同：1
> 
> 时间：2012-09-12T10:27:21.153
> 
> 标签：jquery, iframe, cycle, vimeo

虽然我在其他领域相当有成就，但在编程方面我是一个完全的菜鸟（请不要为此太讨厌我）。我正在使用 jQuery Cycle 插件（来自[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)）设计一个带有下一个/上一个按钮幻灯片的简单网站。这是我的javascript：

```
<script type="text/javascript">
$(document).ready(function() {
        $('#Slider').cycle({
        fx:     'scrollHorz',// choose your transition type, ex: fade, scrollUp, shuffle, etc...
        speed:  600, 
        timeout: 0, 
        easing: 'easeInOutBack',
        after:   onAfter,
        next:   '#Next',
        prev:   '#Previous',
    });
    $(function() {
    $('td pre code').each(function() {
    eval($(this).text());
    });
});
function onAfter(curr, next, opts) {
    var index = opts.currSlide;
    $('#Previous')[index == 0 ? 'hide' : 'show']();
    $('#Next')[index == opts.slideCount - 1 ? 'hide' : 'show']();
    }
}); 
```

具有图像和 iframe vimeo 剪辑的幻灯片效果非常好，除非我单击“上一个/下一个”按钮并且 vimeo 视频没有停止（但当我观看下一张幻灯片时会在后台继续播放）。我在其他帖子中读过我应该合并一个 window.postmessage 命令，但我不知道如何去做。当我按下上一个/下一个时，我将在上面的代码中的何处以及如何插入一个命令来停止播放我的 vimeo 视频？

# java - 如何解释我的 twitter4J 错误？

> ID：12386133
> 
> 赞同：0
> 
> 时间：2012-09-12T10:27:23.137
> 
> 标签：java, twitter4j

我正在尝试构建一个应用程序，以根据给出的示例自下而上查看趋势推文；到目前为止我的步骤：

*   下载相关文件
*   做一个新项目
*   [从此处](https://github.com/yusuke/twitter4j/blob/master/twitter4j-examples/src/main/java/twitter4j/examples/trends/GetDailyTrends.java)粘贴示例代码
*   设置外部库/存档的东西（我一开始就犯了[这个](https://stackoverflow.com/questions/4949040/eclipse-cannot-find-twitter-class-in-twitter4j)错误）
*   将我的属性放入`twitter4j.properties`页面
*   运行程序

正如你所看到的，我没有做太多，我希望其他人也做了同样的事情并遇到同样的问题：

这是我的错误/堆栈跟踪，我已将下半部分剪掉

```
connect timed outRelevant discussions can be found on the Internet at:
    http://www.google.co.jp/search?q=9a14e686 or
    http://www.google.co.jp/search?q=08e0e81f
TwitterException{exceptionCode=[9a14e686-08e0e81f 538e21cf-133c1788], 
statusCode=-1, retryAfter=-1, rateLimitStatus=null, featureSpecificRateLimitStatus=null,
version=2.2.6}
at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:200) 
```

我能找到的唯一讨论是[here](http://groups.google.com/group/twitter4j/tree/browse_frm/month/2011-07/21347d5480a07fca?rnum=71&_done=/group/twitter4j/browse_frm/month/2011-07?&pli=1)，它已经有一年了，似乎与我无关。但我不知道，也许我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:34:25.007

我也遇到过这个问题，然后用这种方式解决——

在您的 twitter 应用程序中添加回调 url，可能是错误的，或者现在仍然无法正常工作或完美，然后在您的类中添加该 url 作为回调 url，同时从 twitter 获取身份验证令牌，这将解决您现在面临的错误.

```
private static final String CALLBACK_URL = "http://chinu.talgol.com/"; 
```

此 url 也在应用程序的回调 url 中。

```
mTwitter.getOAuthRequestToken(CALLBACK_URL); 
```

我已经以这种方式解决了它，但我不确定这是正确的，但它在推特时对我的应用程序没有任何伤害。

# java - 忽略 Mercurial 子目录

> ID：12386140
> 
> 赞同：2
> 
> 时间：2012-09-12T10:27:50.630
> 
> 标签：java, maven, mercurial, ignore, hgignore

我有一个目录，`Maven`里面有我的项目。它看起来像这样：

```
.hg
.idea
parentProject
project1
   .idea
   docs
   src
   target   
   pom.xml 
project2
   .idea
   docs
   src
   target 
   pom.xml
target
pom.xml
.hgignore 
```

我想忽略我所有项目中的`.idea`and`target`目录。我已将`.idea`and`target`目录包含在其中，但它只会忽略 which文件所在`.hgignore`的那些目录。`.hgignore`这意味着仅在根目录中`.idea`并被`target`忽略。

如果我`.hgignore`在所有子项目中添加文件，这不会改变任何文件仍然不会被忽略。

我的忽略列表如下所示：

```
build
dist
target
faces-config.NavData
.idea
.iml 
```

我应该如何指定以从任何地方`.hgignore`获取`.idea`和`target`忽略？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:56:41.073

try [hgignore with regex](http://linux.die.net/man/5/hgignore)

```
syntax: regexp
^\.idea$
^target$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:55:54.817

`**/.idea`和之类的东西怎么样`**/target`？在这里查看[可能的模式](http://www.selenic.com/mercurial/hg.1.html#patterns)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T23:06:25.723

You should **not** need to explicitly ignore `target` directory.

This problem will come if you have added it by mistake to Mercurial. Let's say you have done the following:

1.  Created a project and compiled a few times (hence `target` directory exist)
2.  Decided to add source control to the project so you've initialized a Mercurial repository and executed `hg add` command (either implicitly or explicitly from the IDE). Bam! You have now told Mercurial that `target` is a directory that should be included.

Trust me. I've been there !

To fix: Do the following from the command line:

```
hg forget target 
```

当谈到`.idea`目录时，我认为除了使用该`.hgignore`文件之外别无他法，但我很困惑为什么 Intellij IDE 不会自动添加它。（我本人不是 Intellij IDE 用户）。这是真正要问的问题。

# html - 图像和表单元素自动消失？

> ID：12386142
> 
> 赞同：0
> 
> 时间：2012-09-12T10:27:52.190
> 
> 标签：html, css, html-rendering

我在 IE7 和 IE8 中遇到了一个相当奇怪的问题，当我加载我的一个网站时，各种项目按预期呈现，然后在大约 1 秒后它们全部消失。这包括表单元素、背景颜色和背景图像（通过 css 设置）

您可以自己查看 www.michaelmeahanjoinery.co.uk（假设您在 ie7/8 中查看）

我已经用尽了我的常用修复列表，所以我现在有点难过。我还应该提到它们都可以在我的开发机器上正确渲染，但是当查看实时站点时，它会出错。

**这是表单的代码。**

```
<form class="form" method="POST" action="index.php?module=contact">

<p class="name">
<input type="text" name="name" id="name" value="<?php echo $name; ?>"/>
<label for="name">Name</label>
</p>

<p class="email">
<input type="text" name="email" id="email" value="<?php echo $email; ?>"/>
<label for="email">E-mail</label>
</p>

<p class="phone">
<input type="text" name="phone" id="phone" value="<?php echo $phone; ?>"/>
<label for="web">Phone</label>
</p>

<p class="comments">
<textarea name="comments"></textarea>
</p>

<p class="submit">
<input type="submit" value="Send" />
</p>
<input type="hidden" id="send" name="send" value="1">
</form> 
```

**这是表单的 CSS。**

```
input, textarea { 
padding: 9px;
margin-top:0px;
margin-bottom:2px;
border: solid 1px #E5E5E5;
outline: 0;
width: 200px;
background: white;
background: #FFFFFF url('bg_form.png') left top repeat-x;
background: -webkit-gradient(linear, left top, left 25, from(#FFFFFF), color-stop(4%, #EEEEEE), to(#FFFFFF));
background: -moz-linear-gradient(top, #FFFFFF, #EEEEEE 1px, #FFFFFF 25px);
box-shadow: rgba(0,0,0, 0.1) 0px 0px 8px;
-moz-box-shadow: rgba(0,0,0, 0.1) 0px 0px 8px;
-webkit-box-shadow: rgba(0,0,0, 0.1) 0px 0px 8px;
border-radius: 3px;
-webkit-border-radius: 3px;
-moz-border-radius: 3px;
-ms-border-radius: 3px;
-o-border-radius: 3px;
}

textarea { 
width: 400px;
max-width: 400px;
height: 176px;
margin-bottom:0px;
}

input:hover, textarea:hover,
input:focus, textarea:focus { 
border-color: #C9C9C9; 
-webkit-box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 8px;
}

.form label { 
margin-left: 10px; 

}

.submit input {
width: auto;
padding: 9px 15px;
background: #582404;
border: 0;
font-size: 14px;
color: #FFFFFF;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
cursor:pointer;
} 
```

**更新** 我一直在玩它，并发现了一些不寻常的东西。首先，这仅发生在实时站点上，因此我没有在实时站点上玩耍，而是将网站按原样复制到子目录中。

我这样做是为了让我可以玩弄代码，看看它实际上会是什么样子，但是当我转到子目录时，它实际上显示得很好？

这可能是某种apache目录问题吗？

**无法正确显示。** [http://www.michaelmeahanjoinery.co.uk/index.php?module=contact](http://www.michaelmeahanjoinery.co.uk/index.php?module=contact)

**正确显示。** [http://www.michaelmeahanjoinery.co.uk/test/index.php?module=contact](http://www.michaelmeahanjoinery.co.uk/test/index.php?module=contact)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:59:21.120

是的，我验证了您的网站。您没有为 IE 添加单独的类来显示渐变，因此请在 css 中添加以下代码，之后它将在 IE7 和 IE 8 中正确显示

```
background: #ffffff; /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlZWVlZWUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  #ffffff 0%, #eeeeee 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#eeeeee)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #ffffff 0%,#eeeeee 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #ffffff 0%,#eeeeee 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #ffffff 0%,#eeeeee 100%); /* IE10+ */
background: linear-gradient(to bottom,  #ffffff 0%,#eeeeee 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eeeeee',GradientType=0 ); /* IE6-8 */ 
```

# sql - 从组中删除第一个条目

> ID：12386144
> 
> 赞同：1
> 
> 时间：2012-09-12T10:27:55.660
> 
> 标签：sql, group-by, teradata

我有一张这样的桌子

```
c_id           b_id
13              151
27              203
38              347
38              349
38              357
72              132
72              475
104             14
151             22
207             690
207             712 
```

如您所见，该表首先按 c_id 排序，然后按 b_id 排序。**我想删除每个 c_id 的第一个条目。**

所以我的输出表应该是这个

```
c_id            b_id
38              349 
38              357
72              475
207             712 
```

只有一个 b_id 与之关联的 c_ids 已被删除。其他 c_id 的第一个 b_id 已被删除。

可以使用多个查询。原始表中有数百万行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:47:56.830

```
SELECT cb.c_id, cb.b_id
  FROM cb
  LEFT JOIN (
    SELECT c_id, MIN(b_id) AS minb_id
      FROM cb
      GROUP BY c_id
    ) cbmin ON cb.c_id = cbmin.c_id AND cb.b_id = cbmin.minb_id
  WHERE cbmin.c_id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:31:36.500

```
SELECT * 
FROM 
(
    SELECT c_id, b_id, 
        ROW_NUMBER() OVER(PARTITION BY c_id ORDER BY c_id DESC) RowNum
    FROM TestTable
    WHERE c_id IN 
       (
           SELECT c_id 
           FROM TestTable 
           GROUP BY c_id
           HAVING COUNT(b_id) > 1
       )
) t WHERE RowNum > 1 
```

这应该为您提供以下信息：

```
c_id   b_id   RowNum
--------------------
38     349     2
38     357     3
72     475     2
207    712     2 
```

## [现场演示](https://data.stackexchange.com/stackoverflow/query/79751)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:45:55.603

首先选择 c_id 列表

按 c_id 从表组中选择 c_id

获取每个 c_id 的第一个元素并删除

```
DELETE FROM TABLE 
      WHERE ID = (SELECT ID
                    FROM (SELECT ROW_NUMBER () OVER (ORDER BY ID) row_no, a.*
                            FROM TABLE a
                           WHERE a.ID = 11)
                   WHERE row_no = 1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T10:49:49.607

```
SELECT cb.c_id, cb.b_id
  FROM cb
  LEFT JOIN cb cbmin ON cb.c_id = cbmin.c_id
  GROUP BY cb.c_id, cb.b_id
  HAVING cb.b_id > MIN(cbmin.b_id) 
```

# c# - 计时器在 Web 服务中 20 分钟后停止工作

> ID：12386151
> 
> 赞同：1
> 
> 时间：2012-09-12T10:28:06.537
> 
> 标签：c#, timer, garbage-collection

我认为我的计时器在一段时间后停止工作，我刚刚测量了 20 分钟，但到目前为止还没有发现任何其他导致停止的原因。如果它的垃圾被收集了，我应该如何声明它以便它不是？

```
[WebMethod, SoapHeader("spAuthenticationHeader")]
public void startStreaming()
{
    if (Globals._streamTimer == null)
        Globals._streamTimer = new System.Threading.Timer(handleStream, null, 0, 30000);
        return Globals._returnValue;
}

public static class Globals
{
    public static System.Threading.Timer _streamTimer = null;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:51:38.003

看看您的 IIS 设置 - 20 分钟？

Web 应用程序不应该长时间运行。无论你在做什么，你都应该以不同的方式去做。也许是 Windows 服务，或者持久存储和轮询......

或者，您可以将其混杂并增加超时值。

![IIS 空闲超时](../Images/1aafca12cee3bd82b4b988d47c7f4b98.png)

# cucumber - 必须在哪里输入电子邮件密码？

> ID：12386153
> 
> 赞同：0
> 
> 时间：2012-09-12T10:28:13.913
> 
> 标签：cucumber, watir-webdriver, email-spec

`example@example.com`除了第 32 行之外，我必须在 email_steps.rb 中更改什么？

这怎么能在没有密码的情况下查看我的电子邮件？

我不明白，我是否必须更改 hier（在**email_steps.rb**中）并像我的测试一样使用它（写我的测试 hier）？

或者我必须写一个新的测试，这将使用来自**email_steps.rb**的命令？？？

# hex - 8 位十六进制 rgba 值

> ID：12386156
> 
> 赞同：0
> 
> 时间：2012-09-12T10:28:17.773
> 
> 标签：hex, rgba

我正在使用一段代码，它要求我使用 8 位十六进制 rgba 值

```
-b [ --background-color ] arg (=efefefff) color of background in hex rgba
-f [ --foreground-color ] arg (=00000000) color of background in hex rgba 
```

我一辈子都想不通黑色的 8 位组合是什么

```
00000000 
```

完全透明不是黑色

可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:40:04.860

黑色没有红色、绿色或蓝色，但它不透明，所以 alpha 需要是`ff`。因此，您寻求的组合是

```
000000ff 
```

# javascript - 如何在 Firefox 浏览器中禁用 F5 和刷新？

> ID：12386158
> 
> 赞同：-11
> 
> 时间：2012-09-12T10:28:23.640
> 
> 标签：javascript, jquery, jsp

```
<Script language="javascript">
function checkKeyCode(evt)
{

var evt = (evt) ? evt : ((event) ? event : null);
var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
if(event.keyCode==116)
{
evt.keyCode=0;
return false
}
}
document.onkeydown=checkKeyCode;
</script> 
```

我试过了，它在 IE 中运行良好，但在 Firefox 中不起作用........请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:50:16.020

经典的[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。你要求一个问题的解决方案，而不是一个需要以完全不同的方式解决的问题的解决方案。

正确的模式称为 POST-redirect-GET。在每个 POST 请求（表单提交）之后，您将用户**重定向**到不同甚至相同的页面，这会导致常规 GET 请求。当用户然后刷新页面时，将发出一个常规的 GET 请求，而无需重新提交表单。

有关更多详细信息，请参阅[尝试了解 Post/Redirect/Get 设计模式（使用 PHP 实现）](https://stackoverflow.com/questions/3882149/trying-to-understand-the-post-redirect-get-design-pattern-implemented-with-php)和类似问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:06:33.440

用 jquery

```
$(document).keypress(function(e){
  if(e.keyCode==116){
    return false;
   }
} 
```

# winforms - 单击一次部署和 Unity 程序集

> ID：12386159
> 
> 赞同：0
> 
> 时间：2012-09-12T10:28:33.180
> 
> 标签：winforms, clickonce

我有“无法安装等等等等......必须先将 Unity 2.0.414.0 安装到 GAC 中”安装错误。

我已将所有与 Unity 相关的 dll 设置为“复制本地”我已将 dll 设置为“包含”我已卸载 Unity 2.1 和 Ent Lib 5.1（试图删除可能在 GAC 中的项目）我实际上是在引用 2.0.515.0而不是消息中提到的版本。

我究竟做错了什么！我知道我可以在 GAC 中安装 dll，但我想将它们与我的应用程序一起安装在私有位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:49:19.527

好的，
因此，如果您确保*所有*标记为先决条件的程序集都设置为包含/必需，那么您可以在部署设置检查 GAC 后停止单击。如果您想依赖 GAC 中的程序集，这并不理想，但至少您可以确定您的应用程序将使用哪些版本的程序集。如果现在包含的 pre-reqs 没有签名，那么你不能签署部署，这将是一个需要验证的问题。
我敢肯定，实际问题与我用于 Unity 的程序集的先前版本有关，但仍然存在于 GAC 中。

# django - 上传图片到模板目录

> ID：12386161
> 
> 赞同：0
> 
> 时间：2012-09-12T10:28:36.803
> 
> 标签：django

我有这个领域的模型：

```
image=models.ImageField(upload_to='company-category') 
```

`company-category`是文件夹中的一个文件`uploads`夹，但我想将图像上传到模板目录。我认为这种方式访问​​我网站的用户无法访问图像并下载它们。

在设置中：

```
TEMPLATE_DIRS = (
    "C:/ghoghnous/HubHub/Theme"
) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:20:06.590

这里我给出两个解决方案。你问的那个，然后是我的建议。

使用以下代码将上传位置设置为您的模板文件夹。

```
from django.conf import settings

image=models.ImageField(upload_to = settings.TEMPLATE_DIRS[0]) 
```

上面的代码会将图像上传到您的模板目录。

**我的建议：**

将图像上传到您的媒体文件夹。然后使用`MEDIA_URL`允许用户下载它们。使用以下代码定义它们。

**设置.py**

```
MEDIA_ROOT = 'C:/ghoghnous/HubHub/media'
MEDIA_URL  = 'site_media' 
```

**网址.py**

```
from django.conf import settings
urlpatterns += patterns('',
    url(r'^site_media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
) 
```

**模型.py**

```
class SampleModel(models.Model):
    image = models.ImageField(upload_to = 'images') 
```

如果您使用它，图像将被上传到文件夹`C:/ghoghnous/HubHub/media/images/`。然后使用`objects.get`或获取所需的图像`objects.filter`。

```
record = SampleModel.objects.get(id = 1) 
```

如果我`print record.image`，输出将是`images/filename.jpg`。将此传递给您的模板。然后您可以显示图像或提供下载链接，如下所示：

```
<a href="{{ record.image.url }}/" >Download</a>        #Download link
<img src="{{ record.image.url }}/" />                  #To display image
<a href="/site_media/images/file.jpg" >Download</a>    #Download static files 
```

我建议您使用第二种方法，因为不建议将图像保存在模板文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:05:02.853

根据 Django 的良好实践，模板目录不是存储媒体的首选位置。

此外，您在网页上显示的任何图像都将具有路径并且可以下载。有些人使用脚本来停止右键单击和类似的东西，但据我了解源代码总是给你图像路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T12:38:02.167

哦，我想你想把文件上传到一个临时文件夹，然后用它做点什么。正确的？

您需要覆盖`clean_image`. [然后您可以使用文件存储](https://docs.djangoproject.com/en/dev/topics/files/#file-storage)`forms`使用您想要的任何路径编写自己的代码

# c# - 母版页中的内容未显示在内容页中

> ID：12386165
> 
> 赞同：0
> 
> 时间：2012-09-12T10:28:46.143
> 
> 标签：c#, asp.net, html, master-pages

我正在使用母版页来创建我的网站。在母版页中，我使用页眉、左侧栏和页脚。奇怪的是，如果我将侧边栏 Div 放在 ContentPlaceHolder 上方，则侧边栏不可见，如果我将相同的 Div 放在 ContentPlaceHolder 下方，则侧边栏可见。

这是怎么回事？

这是母版页内容：

```
<div>
    <div id="maincontainer">
    <div id="wrap">

<div id="header">
<div id="topsection"><div class="innertube"><h1>maabookings.com</h1></div></div>
</div>
<div id="main">
<div id="leftcolumn" >
<asp:Menu ID="Menu1" runat="server" CssClass="Menu" RenderingMode="List">
<Items>
<asp:MenuItem NavigateUrl="~/Call_Center/Main.aspx" Text="Inbox" Value="inbox"></asp:MenuItem>
<asp:MenuItem Text="Processing"></asp:MenuItem>
<asp:MenuItem Text="aslkdjf"></asp:MenuItem>
<asp:MenuItem Text="aslkdjf"></asp:MenuItem>
<asp:MenuItem Text="aslkdjf"></asp:MenuItem>
</Items>
</asp:Menu>
</div>
<asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server"/>

</div>
</div>
</div>
<div id="footer"><a href="http://www.maabookings.com/" target="_blank">maabookings</a></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:03:31.187

为了解决这些问题，您可以使用 FireBug(Firefox Addon)，或者您可以在页面呈现后查看您的 View Source(HTML)。

一旦你看到这一点，你就会清楚地了解需要做什么。

# rad - 如何在 WAS.7 中将日志文件从 SystemOut.log 更改为其他

> ID：12386168
> 
> 赞同：0
> 
> 时间：2012-09-12T10:28:48.320
> 
> 标签：rad, websphere-7

在 websphere application server.7 (WAS/RAD) 中，如何将存储在 SystemOut.log 文件中的日志更改为其他文件？

是否有任何步骤可以更改日志记录和跟踪中的日志文件？

# java - 从 HttpRequest 获取内容

> ID：12386170
> 
> 赞同：0
> 
> 时间：2012-09-12T10:28:52.033
> 
> 标签：java, javascript, ajax, servlets

我正在jsp中上传一个.war文件，如下所示，

```
<input type="file" name="file1" id="file1" size="50"> 
```

例如：C:\1234\OnlineBookStore.war

并使用 ajax 上传表单，如下所示，

```
var fileValue = document.getElementById("file1").value; 
url=url+"&fileName="+fileValue;
loadPage('downloaddiv', url); 
```

当我在 java 中获取文件名时，我只是获取文件名（OnlineBookStore.war

) 没有其内容，

```
File uploadedFile = new File(request.getParameter("fileName")); 
```

如何获取带有内容表单请求的文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:33:05.397

如果要从文件中读取数据以通过 XMLHttpRequest 上传，则需要使用 File API。

MDN 上有一个[使用来自 Web 应用程序的文件的指南。](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

请注意，这需要支持此前沿功能的浏览器。

通过 Ajax 上传文件的经典方法是将表单提交到隐藏的 iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:35:39.743

也许你应该看看这个问题：[How to get the file path from HTML input form in Firefox 3](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3)

服务器几乎没有理由必须知道完整的文件路径。如果要上传文件，则需要使用适当的库，例如[Apache Commons FileUpload](http://commons.apache.org/fileupload)并使用传输文件。

```
<form action="upload-script-url" method="post" enctype="multipart/form-data">
  <input type="file" name="file">
  <input type="submit">
</form> 
```

然后，Apache Commons FileUpload 将接受编码文件并将其转换为可用的形式。

否则，您将需要使用 JavaScript 来获取该路径。

# ruby - 为什么带有无效参数的范围有时不会导致参数错误？

> ID：12386172
> 
> 赞同：9
> 
> 时间：2012-09-12T10:29:00.083
> 
> 标签：ruby, exception, range, ruby-1.9.3, argument-error

以下代码导致参数错误：

```
n = 15
(n % 4 == 0)..(n % 3 == 0)
# => bad value for range (ArgumentError) 
```

我认为这是因为它评估为：

```
false..true 
```

`TrueClass`并且在 range:和中使用了不同类型的类`FalseClass`。但是，以下代码不会引发错误。这是为什么？`Enumerable#collect`抓到了吗？

```
(11..20).collect { |i| (i % 4 == 0)..(i % 3 == 0) ? i : nil }
# => no error 
```

**稍后添加：** 如果**fcn**返回 15，则仅计算范围的前半部分

```
def fcn(x)
  puts x
  15
end

if  (fcn(1) % 4 == 0)..(fcn(2) % 3 == 0); end
# => 1 
```

但是如果我们将返回值更改为 16 那么输入将是

```
# => 1
# => 2 
```

这很奇怪，因为在这种情况下，表达式的计算结果为

```
true..false 
```

**根据下面sawa**的回答，这种范围是无效的。

那么在第一种情况下（使用***def***的返回值 15）我们只有部分范围而没有结束部分？太奇怪了：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T13:09:41.427

在 Ruby`if start..finish`中是一个触发器，一种用于编写快速而晦涩的脚本的特殊语法。它通常用于循环：

```
while input = gets
  puts "Processing #{input.inspect}" if input =~ /start/ .. input =~ /end/
end 
```

当第一个条件为真时，整个条件在每次连续执行时都被视为真，直到第二个条件评估为真。您可以使用上面的脚本来了解这个想法。这是我的输入和输出：

```
foo
start
Processing "start\n"
foo
Processing "foo\n"
bar
Processing "bar\n"
end
Processing "end\n"
foo
bar
start
Processing "start\n" 
```

请注意，如果条件未启动，Ruby 不会评估完成条件，因为这样做是没有用的。

尽管在循环之外使用它没有多大意义，但 Ruby 并没有限制它。

```
>> if nil..raise; :nothing_gonna_happen; end
=> nil 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:48:01.583

首先，请注意以下有效和无效的文字：

```
true..true # => valid
false..false # => valid
true..false # => invalid
false..true # => invalid 
```

因此，问题归结为为什么表达式在嵌入循环条件时计算为有效`false..true`。`true..false`根据[文档](http://doc.ruby-lang.org/ja/1.9.2/doc/spec=2foperator.html#range_cond)，循环条件中的范围文字实际上并没有创建范围。它具有类似于 sed 和 awk 的特殊含义。也就是说，范围开始的真值启动循环，范围结束的真值终止循环。[在这里](http://randomtype.ca/2011/range-conditions-in-ruby/)找到一些例子。

# matlab - Matlab中的双插值

> ID：12386174
> 
> 赞同：3
> 
> 时间：2012-09-12T10:29:03.733
> 
> 标签：matlab, interpolation

我想问你一些关于 Matlab 中插值的问题。我想知道是否可以在同一行中进行两种不同的插值。我的意思是，例如，在开始时进行线性插值，然后在中间大致进行另一种插值，例如样条。

主要问题是我做了一个线性插值，一开始它是完美的，但在某些时候，我认为另一种类型会更好。如果这是可能的，我如何编码我想改变它的地方？我试图检查有关 Matlab 的文档，但找不到任何有关修改插值的信息。

非常感谢提前和问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:52:52.740

请允许我详细说明我对您的帖子发表的评论。

如果要使用带有拆分的 2 个不同函数从输入数组创建输出数组，则可以使用数组索引范围，如下面的代码示例

```
x = randn(20,1); %//your input data - 20 random numbers for demonstration
threshold = 5; %//index where you want the change of algorithm
y = zeros(size(x)); %//output array of zeros the same size as input

y(1:threshold)     = fun1(x(1:threshold));
y(1+threshold:end) = fun2(x(1+threshold:end)); 
```

如果愿意，您可以跳过预分配，`y`只需将附加数据连接到输出的末尾。如果函数返回的输出元素数量与输入元素的数量不同，这将特别有用。其语法如下所示。

```
y = fun1(x(1:threshold));
y = [y; fun2(x(1+threshold:end))]; 
```

**编辑：**

为了回应您在下面的帖子，这里有一个完整的例子。. .

```
clc; close all

x = -5:5; %//your x-range
y = [1 1 0 -1 -1 0 1 1 1 1 1]; %//the function to interpolate
t = -5:.01:5; %//sampling interval for output

xIdx = 5; %//the index on the x-axis where you want the split to occur
tIdx = floor(numel(t)/numel(x)*xIdx);%//need to calculate as it is at a different sample rate

out = pchip(x(1:xIdx),y(1:xIdx),t(1:tIdx));
out = [out spline(x((1+xIdx):end),y((1+xIdx):end),t((1+tIdx):end))];

%//PLOTTING
plot(x,y,'o',t,out,'-',[x(xIdx) x(xIdx)], [-1.5 1.5], '-')
legend('data','output','split',4);
ylim ([-1.5 1.5]) 
```

哪个会给。. .

![在此处输入图像描述](../Images/cc554f8d75e4016b3fd2f8358707f499.png)

# android - ActionBarSherlock 布局膨胀错误

> ID：12386177
> 
> 赞同：2
> 
> 时间：2012-09-12T10:29:13.850
> 
> 标签：android, android-layout, actionbarsherlock

我在 onCreateView 的这一行使用 ActionBarSherlock 的对话框片段有一个奇怪的问题

```
LinearLayout root = (LinearLayout) inflater.inflate(com.example.R.layout.new_event_dialog_fragment, container, false); 
```

这是我的 ActionBarSherlock 项目清单：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/> 
```

这是我的应用程序目标：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15" /> 
```

在具有 api 级别 10 的模拟器上运行我的应用程序时出现此错误：

```
892: E/AndroidRuntime(645): FATAL EXCEPTION: main
09-12 10:00:38.892: E/AndroidRuntime(645): android.view.InflateException: Binary XML file line #26: Error inflating class android.view.View
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
09-12 10:00:38.892: E/AndroidRuntime(645):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-12 10:00:38.892: E/AndroidRuntime(645):  at com.example.gui.fragment.dialog.NewEventDialogFragment.onCreateView(NewEventDialogFragment.java:34)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.os.Handler.handleCallback(Handler.java:587)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.os.Looper.loop(Looper.java:123)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-12 10:00:38.892: E/AndroidRuntime(645):  at java.lang.reflect.Method.invokeNative(Native Method)
09-12 10:00:38.892: E/AndroidRuntime(645):  at java.lang.reflect.Method.invoke(Method.java:507)
09-12 10:00:38.892: E/AndroidRuntime(645):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-12 10:00:38.892: E/AndroidRuntime(645):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-12 10:00:38.892: E/AndroidRuntime(645):  at dalvik.system.NativeStart.main(Native Method)
09-12 10:00:38.892: E/AndroidRuntime(645): Caused by: java.lang.reflect.InvocationTargetException
09-12 10:00:38.892: E/AndroidRuntime(645):  at java.lang.reflect.Constructor.constructNative(Native Method)
09-12 10:00:38.892: E/AndroidRuntime(645):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
09-12 10:00:38.892: E/AndroidRuntime(645):  ... 21 more
09-12 10:00:38.892: E/AndroidRuntime(645): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x2/d=0x101030a a=-1}
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.content.res.Resources.loadDrawable(Resources.java:1681)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.view.View.<init>(View.java:1951)
09-12 10:00:38.892: E/AndroidRuntime(645):  at android.view.View.<init>(View.java:1899)
09-12 10:00:38.892: E/AndroidRuntime(645):  ... 24 more 
```

如果我在 api 级别 7 的模拟器上运行，我会得到这个不同的错误：

09-12 10:15:02.035：E/AndroidRuntime(220)：未捕获的 h

```
Handler: thread main exiting due to uncaught exception
09-12 10:15:02.067: E/AndroidRuntime(220): android.view.InflateException: Binary XML file line #26: Error inflating class android.view.View
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
09-12 10:15:02.067: E/AndroidRuntime(220):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-12 10:15:02.067: E/AndroidRuntime(220):  at com.example.gui.fragment.dialog.NewEventDialogFragment.onCreateView(NewEventDialogFragment.java:34)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.os.Handler.handleCallback(Handler.java:587)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.os.Looper.loop(Looper.java:123)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.app.ActivityThread.main(ActivityThread.java:4363)
09-12 10:15:02.067: E/AndroidRuntime(220):  at java.lang.reflect.Method.invokeNative(Native Method)
09-12 10:15:02.067: E/AndroidRuntime(220):  at java.lang.reflect.Method.invoke(Method.java:521)
09-12 10:15:02.067: E/AndroidRuntime(220):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-12 10:15:02.067: E/AndroidRuntime(220):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-12 10:15:02.067: E/AndroidRuntime(220):  at dalvik.system.NativeStart.main(Native Method)
09-12 10:15:02.067: E/AndroidRuntime(220): Caused by: java.lang.reflect.InvocationTargetException
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.view.View.<init>(View.java:1799)
09-12 10:15:02.067: E/AndroidRuntime(220):  at java.lang.reflect.Constructor.constructNative(Native Method)
09-12 10:15:02.067: E/AndroidRuntime(220):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
09-12 10:15:02.067: E/AndroidRuntime(220):  ... 21 more
09-12 10:15:02.067: E/AndroidRuntime(220): Caused by: android.content.res.Resources$NotFoundException: File res/drawable/btn_dropdown.xml from drawable resource ID #0x0
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.content.res.Resources.loadDrawable(Resources.java:1693)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.content.res.TypedArray.getDrawable(TypedArray.java:548)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.view.View.<init>(View.java:1850)
09-12 10:15:02.067: E/AndroidRuntime(220):  ... 25 more
09-12 10:15:02.067: E/AndroidRuntime(220): Caused by: android.content.res.Resources$NotFoundException: File res/drawable/btn_dropdown.xml from xml type drawable resource ID #0x0
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1920)
09-12 10:15:02.067: E/AndroidRuntime(220):  at android.content.res.Resources.loadDrawable(Resources.java:1688)
09-12 10:15:02.067: E/AndroidRuntime(220):  ... 27 more 
```

我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent" android:layout_height="wrap_content"
    android:orientation="vertical">
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" android:padding="8dp">
        <TextView android:id="@+id/textView1" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:paddingRight="5dp"
            android:text="@string/event_name" android:textAppearance="?android:attr/textAppearanceSmall" />
        <EditText android:id="@+id/editText1" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:layout_weight="1"
            android:ems="10" android:inputType="textCapWords">
            <requestFocus />
        </EditText>
    </LinearLayout>
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" android:padding="8dp">
        <TextView android:id="@+id/textView2" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:layout_gravity="center_vertical"
            android:gravity="center_vertical" android:paddingRight="5dp"
            android:text="@string/currency" android:textAppearance="?android:attr/textAppearanceSmall" />
        <Spinner android:id="@+id/spinner1" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:layout_gravity="center_vertical"
            android:layout_weight="1" />
    </LinearLayout>
    <View android:id="@+id/horizontal_divider_login"
        android:layout_width="match_parent" android:layout_height="1dp"
        android:layout_marginLeft="4dp" android:layout_marginRight="4dp"
        android:layout_weight="0.35" android:background="?android:attr/dividerVertical"
        android:orientation="horizontal" />
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="48dp" android:orientation="horizontal">
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:layout_weight="0.5"
            android:gravity="center" android:orientation="vertical">
            <Button android:id="@+id/btn_abort"
                style="@android:style/Widget.Holo.Button.Borderless.Small"
                android:layout_width="match_parent" android:layout_height="wrap_content"
                android:text="@android:string/cancel" android:textColor="?android:attr/textColorPrimary" />
        </LinearLayout>
        <LinearLayout android:id="@+id/vertical_divider"
            android:layout_width="1dip" android:layout_height="match_parent"
            android:layout_marginBottom="4dp" android:layout_marginTop="4dp"
            android:background="?android:attr/dividerVertical" />
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:layout_weight="0.5"
            android:gravity="center" android:orientation="vertical">
            <Button android:id="@+id/btn_ok"
                style="@android:style/Widget.Holo.Button.Borderless.Small"
                android:layout_width="match_parent" android:layout_height="wrap_content"
                android:layout_weight="0.5" android:text="@android:string/ok"
                android:textColor="?android:attr/textColorPrimary" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

在这两种情况下，这似乎都是资源错误（我认为微调器的资源），但我无法解决。我尝试更改 api 目标，完全干净.. 但没有。谢谢

PS：在我的真实设备（4.0.4）或模拟器（4.1.1）上运行一切正常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:59:08.900

抛出异常是因为一个或多个资源不是可绘制的。尝试从您的 xml 中删除它

```
android:background="?android:attr/dividerVertical" 
```

# javascript - 谷歌地图标记未居中

> ID：12386178
> 
> 赞同：0
> 
> 时间：2012-09-12T10:29:17.243
> 
> 标签：javascript, google-maps, google-maps-markers, google-maps-api-2

我正在使用 Google Maps 在隐藏的 div 下显示，该 div 在单击选项卡时会切换，我有两个问题，也许它们是相关的：

1.  地图没有完全显示
2.  标记不在地图的中心，它位于地图的左上角

我正在粘贴代码，请指导我哪里错了或有任何建议。

```
 var map = new GMap2(document.getElementById(mapid));
    if( maptype == 'G_NORMAL_MAP' )
    {

        map.setCenter(new GLatLng(startLatitude,startLongitude ), 6);
        map.addControl(new GLargeMapControl());     
    }
    else if( maptype == 'G_SATELLITE_MAP' )
    {
        map.setCenter(new GLatLng(startLatitude,startLongitude ), 18);
        map.addControl(new GLargeMapControl());
        map.setMapType(G_SATELLITE_MAP);
        map.setUIToDefault();
        map.enableRotation();
    }
    else if( maptype == 'G_AERIAL_MAP' )
    {
        map.setCenter(new GLatLng(startLatitude,startLongitude ), 18);
        map.addControl(new GLargeMapControl());
        map.setMapType(G_AERIAL_MAP);
        map.setUIToDefault();
        map.enableRotation();
    }
    else if( maptype == 'G_AERIAL_HYBRID_MAP' )
    {
        map.setCenter(new GLatLng(startLatitude,startLongitude ), 18);
        map.addControl(new GLargeMapControl());
        map.setMapType(G_AERIAL_HYBRID_MAP);
        map.setUIToDefault();
        map.enableRotation();
    }

    // Add 10 markers to the map at random locations
    var bounds = map.getBounds();
    var southWest = bounds.getSouthWest();
    var northEast = bounds.getNorthEast();
    var lngSpan = northEast.lng() - southWest.lng();
    var latSpan = northEast.lat() - southWest.lat();
    var point = new GLatLng(startLatitude, startLongitude);
    map.setCenter(bounds.getCenter());

    map.addOverlay(new GMarker(point)); 
```

![问题截图](../Images/18ca8bd5604ec308ffad7911848bf417.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-02T11:01:38.933

此代码每次都使用标记中心对齐来渲染谷歌地图。

```
 var lattitude = data.getLatitude ;
        var longitude = data.getLongitude;
        var pointLatLong = new google.maps.LatLng(lattitude,longitude);
        var pointOptions = {
            zoom: 10,
            center: pointLatLong,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById("map-canvas"), pointOptions);
        var pointMarker = new google.maps.Marker({
            position: pointLatLong,
            title: ""
        });
        pointMarker.setMap(map);
        google.maps.event.addListenerOnce(map, "idle", function () {
            google.maps.event.trigger(map, "resize");
            map.setCenter( pointLatLong );
        }); 
```

参考：[http ://www.onlinekurukshetra.com/google-map-not-loading-completely/](http://www.onlinekurukshetra.com/google-map-not-loading-completely/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:50:58.550

完全定义地图 div 的大小，或者使用构造函数的可选“size”参数：

```
map = new GMap2(document.getElementById(mapid),{size:new GSize(510,200)}); 
```

或打开选项卡后在地图对象上运行 checkResize() 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:02:03.713

尝试添加

```
var zoom = map.getZoom();
var center = map.getCenter();
map.checkResize();
map.setCenter(center,zoom); 
```

切换地图 div 后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T10:52:16.130

尝试添加：`position:map.getCenter()`为标记，使您的标记在地图上居中

# objective-c - 从应用程序上传照片到 Facebook

> ID：12386180
> 
> 赞同：-1
> 
> 时间：2012-09-12T10:29:25.153
> 
> 标签：objective-c, ios, facebook, cocoa-touch, facebook-graph-api

如何从应用程序内将照片上传到 Facebook 墙？我见过很多例子，但它们只给出了 url 的调用函数。我已经下载了 facebook 框架，但我不确定它是如何工作的。我已经看到了这个框架的示例代码，但是如何调用将图像发布到 Facebook 的方法？有人有完整的代码将照片上传到 FB 吗？

```
 -(void)postUserInformation:(id)sender
  {

    UIImage *tempImage = [UIImage imageNamed:@"house2.jpg"];

    NSData *data = UIImageJPEGRepresentation(tempImage, 1);

    NSMutableDictionary *params = 
    [NSMutableDictionary dictionaryWithObjectsAndKeys:
     @"Testing Feed Dialog", @"name",
     @"Feed Dialogs are Awesome.", @"caption",
     @"Check out how to use Facebook Dialogs.", @"description",
     @"http://www.example.com/", @"link",
     data, @"picture",
     nil];

    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    [[delegate facebook] dialog:@"feed"
           andParams:params
         andDelegate:self];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:52:10.453

您好，请查看以下 facebook 示例，您可以在其中了解如何在 facebook 上分享[图片](http://sourceforge.net/projects/facebookdemo/files/FacebookDemo.zip/download)

只需检查您在其中找到类 HomeViewController 的示例，其中的 find 方法`-(void)postUserInformation:(id)sender`注释方法将发布本地图像，运行代码将共享服务器图像。

如果您有任何疑问，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:35:44.523

你可以在这里找到相关信息

[脸书上传照片](https://developers.facebook.com/blog/post/498/)

# php - 用 PHP 插入 HTML 不适用于 JavaScript

> ID：12386181
> 
> 赞同：0
> 
> 时间：2012-09-12T10:29:26.773
> 
> 标签：php, javascript, html, insert

当使用 PHP 插入 HTML 代码时，尽管标签工作得很好，`<script>`但括号不会被解释。`<p>`

这是 PHP 摘录：

```
echo "<p>Test</p><script type='text/javascript'>document.getElementById('signalframe1').src = 'http://live.telldus.com/device/switch?mode=on&id=101443';</script>"; 
```

是我的语法错误还是后来插入的 JavaScript 没有被执行？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:38:31.733

您的 javascript 不知道**signalframe1**元素，因为此运行时（稍后添加）javascript 仅知道使用此 php 脚本添加的 html，因此您可以在 html 页面中添加脚本的一个副本，以便它在 html已加载，如果您想在 php 中添加一些 html 并且应该适用于该 html 文档，则如果您稍后需要 bcz 则在 php 中加载另一个。希望它会有所帮助。谢谢

# c# - 从存储过程返回值到c#

> ID：12386188
> 
> 赞同：1
> 
> 时间：2012-09-12T10:30:21.267
> 
> 标签：c#, asp.net, sql-server, sql-server-2008

我在另一个存储过程中遇到了同样的问题。我想将请假请求添加到 SQL Server 2008 数据库。我可以成功运行存储过程，但从页面我无法返回操作是否完成或不完整的状态。

我正在通过 SP 发送数据，但无法通过程序获取状态。

我的存储过程是：

```
ALTER Procedure [dbo].[Check_LeaveDays](
@EmpCode int,
@LV_Type int,
@Leave_AppDt DateTime,
@Leave_ToDate Datetime ,
@LV_Days int
,@Status_Id int Output
)

as
Begin 

    Declare @Dt_join datetime ,@LastDate Datetime
    Declare @Count int 
    Declare @Leave_Status_Id int 
    Declare @Leave_period int 
    Declare @Rule_id int 
    Declare @Leave_AllocatedDays int
    Declare @Leave_MaxDays int 
    Declare @Days_diff int
--  Declare @Status_Id int
--  Set @Status_Id= 0
        Select @Dt_Join =Emp_DOJ from LTS_Employee_Master where Emp_ID =4

        Select @LastDate= DATEADD(year, DATEDIFF(year, -1, getdate()), -1)
        Select @Days_diff=0

        If(YEAR(@Dt_Join) =  YEAR(GETDATE()))
        Begin 
            Select @Days_diff = DATEDIFF(D, @Dt_Join,@LastDate) 
        End 

    --Select @Leave_AppDt = dateadd(M, -2, getdate())

            Select @Rule_id = Case when @LV_Type =1 then ISNULL(Emp_Casual_rule,0)
            when @LV_Type =2 then ISNULL(Emp_Medical_rule,0)  
            when @LV_Type =3 then ISNULL(Emp_PL_rule,0)  
                    else 0 End 
                from LTS_Employee_Master where Emp_ID =@Empcode 

    If @LV_Type =1
    Begin 
                Select @Leave_AllocatedDays = LPM_Allocated_Days ,@Leave_MaxDays =LPM_Max_Days ,@Leave_period =LPM_Count 
                from LTS_Leave_Policy_Master where LPM_Id =@Rule_Id 
    If   @Days_diff <> 0
    Begin 
            Select @Leave_AllocatedDays = 365/@Leave_AllocatedDays
            Select @Leave_AllocatedDays = @Days_diff / @Leave_AllocatedDays
    End
                Select  @Count =Sum(Leave_Days)  
                from LTS_Emp_Leave_Requests where Leave_Emp_ID =@empcode and Leave_type_Id=1 and Leave_Status_ID=1 and YEAR(@Leave_ToDate) =YEAR(leave_to_Date) 

                    Select  @Count = ISNULL(@Count,0) + ISNULL(Sum(Leave_Days),0)  
                    from LTS_Emp_Leave_Requests where Leave_Emp_ID =@empcode and Leave_type_Id=1 and Leave_Status_ID=3 and YEAR(@Leave_ToDate) =YEAR(leave_to_Date) 
                    and Req_id not in(Select Req_id   from LTS_Emp_Leave_Requests where Leave_Emp_ID =@empcode and Leave_type_Id=1 and Leave_Status_ID=3 and YEAR(@Leave_ToDate) =YEAR(leave_to_Date)) 

                Select  @Count = ISNULL(@Count,0) + ISNULL(Sum(Leave_Days),0)  
                from LTS_Emp_Leave_Requests where Leave_Emp_ID =@empcode and Leave_type_Id=1 and Leave_Status_ID=3 and YEAR(@Leave_ToDate) =YEAR(leave_to_Date) 
                and Req_id not in(Select Req_id   from LTS_Emp_Leave_Requests where Leave_Emp_ID =@empcode and Leave_type_Id=1 and Leave_Status_ID=3 and YEAR(@Leave_ToDate) =YEAR(leave_to_Date)) 

                Select @count,@Leave_MaxDays 

    if(@LV_Days > @Leave_MaxDays)
    Begin  

                Set @Status_Id=1 -- Status appliation leave days is more than allowance max days at a time 

    End  

    If(@Count  > @Leave_AllocatedDays)
    Begin 
                Select @Status_Id =2 --Status 2 applies for numbers of maximum  days applied is more than actual allocated maximum number of days 

    End 

                Select  @Count =Sum(Leave_Days)  
                from
                (Select  top 1  *  from  LTS_Emp_Leave_Requests  order by Leave_ID desc) Temp
                where Leave_Emp_ID =@empcode and Leave_type_Id=1 and Leave_Status_ID =1   group by Leave_Emp_Id

                Declare @tbl table(Leave_Id int , Leave_Status_Id int , Leave_To_date datetime,leave_days int,
                Leave_Emp_Id int,Leave_off_Id int,Req_Id int,leave_LPM_ID int, leave_type_Id int)
                Insert into @tbl 
                Select top 1
                Leave_Id  , Leave_Status_Id , Leave_To_date ,
                Leave_days ,Leave_Emp_Id ,Leave_off_Id ,Req_Id ,leave_LPM_ID , Leave_type_Id 
                from LTS_Emp_Leave_Requests where Leave_Emp_ID =@empcode and Leave_Status_ID  in(1,3,5) order by Leave_ID desc

    Select @Leave_ToDate =Leave_To_date from @tbl 
    If( DATEDIFF(D,@Leave_ToDate, DATEADD(D,-1, @Leave_AppDt)) > @Leave_AllocatedDays)
    Begin
            Select @Status_Id =3
    End  
    End 
    Return @Status_Id 
```

结尾

我的存储过程调用函数：

```
public string SendRequestDataSql(int empid, int leavetype, DateTime fromdate, DateTime todate, int leavedays)
    {
        string retunvalue="0";
        DataTable dt = new DataTable();
        try
        {
            SqlConnection sqlConnection = new SqlConnection();
            string conString = Connection.GetConnection;

            using (SqlConnection con = new SqlConnection(conString))
            {
                //sqlConnection.Open();
                using (SqlCommand cmd = new SqlCommand("Check_LeaveDays", con))
                {      

                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.Add("@EmpCode", SqlDbType.VarChar, 10).Value = empid;
                    cmd.Parameters.Add("@LV_Type", SqlDbType.VarChar, 10).Value = leavetype;
                    cmd.Parameters.Add("@Leave_AppDt", SqlDbType.VarChar,15).Value = fromdate;
                    cmd.Parameters.Add("@Leave_ToDate", SqlDbType.VarChar,15).Value = todate;
                    cmd.Parameters.Add("@LV_Days", SqlDbType.VarChar,10).Value = leavedays;

                 SqlParameter returnParameter = cmd.Parameters.Add("RetVal", SqlDbType.Int); 
                    returnParameter.Direction = ParameterDirection.ReturnValue; 

                    con.Open();
                    int itrrr = Convert.ToInt32( cmd.ExecuteNonQuery());

                    int returnValue = (int)returnParameter.Value; 
                    //message = Convert.ToInt32(objparm.Value);

                    con.Close();

                    using (SqlDataAdapter da = new SqlDataAdapter(cmd))
                    {
                        DataSet ds = new DataSet();
                        da.Fill(ds);
                        dt = ds.Tables[0];
                    }
                }
            }
        }
        catch (SqlException ex)
        {

        }
        return retunvalue;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:39:08.657

请将您的代码编辑为：

删除这一行：

```
 cmd.Parameters.Add("@Status", SqlDbType.Int).Value = status; 
```

添加此代码：

```
 SqlParameter abc = cmd.Parameters.Add("@Status", SqlDbType.Int);
 abc.Direction = ParameterDirection.Output; 
```

然后您可以在 abc 中获取您的状态结果。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:40:05.330

**在存储过程中**

```
RETURN @status 
```

**在 C# 中**

```
string retunvalue = (string)sqlcomm.Parameters["@status"].Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:40:27.263

```
public int? AddNewDesigDataSql(string desig_name, string Details, int AddedBy)
    {
        int? status = 0;
        DataTable dt = new DataTable();
        try
        {
            SqlConnection sqlConnection = new SqlConnection();
            string conString = Connection.GetConnection;

            using (SqlConnection con = new SqlConnection(conString))
            {
                con.Open();

                using (SqlCommand cmd = new SqlCommand("SP_Dedignation_Add", con))
                {
                    cmd.CommandType = CommandType.StoredProcedure;

                    SqlParameter param1=cmd.Parameters.Add("@Desig_Name", SqlDbType.varchar,500).Value = desig_name;
 param1.Direction = ParameterDirection.Input;

                    SqlParameter param2=cmd.Parameters.Add("@Desig_Desc", SqlDbType.varchar,500).Value = Details;
param2.Direction = ParameterDirection.Input;

                    SqlParameter param3=cmd.Parameters.Add("@Desig_AddedBy", SqlDbType.int,8).Value = AddedBy;
param3.Direction = ParameterDirection.Input;

                    SqlParameter param4=cmd.Parameters.Add("@Status", SqlDbType.Int).Value = status;

param4.Direction = ParameterDirection.Output;

                    cmd.ExecuteNonQuery();
                    con.Close();

                    status = (int)param4.Value;

                    using (SqlDataAdapter da = new SqlDataAdapter(cmd))
                    {
                        DataSet ds = new DataSet();
                        da.Fill(ds);
                        dt = ds.Tables[0];
                    }
                }
            }
        }
        catch (SqlException ex)
        {

        }
        return status;
    } 
```

# objective-c - isKindOfClass 没有按预期工作

> ID：12386189
> 
> 赞同：9
> 
> 时间：2012-09-12T10:30:25.800
> 
> 标签：objective-c, ios, xcode, llvm, nsobject

我正在开发一个 iOS5+ 项目（xcode 4.4.1 SDK 5.1）

我在单元测试中有这段代码：

```
[_appDelegate application:nil didFinishLaunchingWithOptions:nil];

UITabBarController *tabBarController = (UITabBarController*)_appDelegate.window.rootViewController;

NSArray *viewControllers = [tabBarController viewControllers];

UINavigationController *nc_1 = [viewControllers objectAtIndex:0];
UIViewController *vc_1 = nc_1.topViewController;

STAssertTrue([vc_1 isKindOfClass:[ScheduleViewController class]]==YES, @"UITabBarController first tab should be a ScheduleViewController class"); 
```

如果我运行测试，则测试失败。

所以我用调试器检查：

```
(lldb) po [ScheduleViewController class]
(id) $1 = 0x00142b04 ScheduleViewController
(lldb) po vc_1
(UIViewController *) $2 = 0x11a32dc0 <ScheduleViewController: 0x11a32dc0>
(lldb) print (BOOL) [vc_1 isKindOfClass:(Class)[ScheduleViewController class]]
(BOOL) $4 = YES
(lldb) po [vc_1 class]
(id) $5 = 0x00142b04 ScheduleViewController
(lldb) 
```

在 application:didFinishLaunchingWithOptions: 我创建了一个 ScheduleViewController 并将其用作导航控制器的 rootController。调试器说它是正确的。我不明白上面的断言有什么问题。

有人对此有想法吗？

**更新**

断言的第一个实现是：

```
STAssertTrue([vc_1 isKindOfClass:[ScheduleViewController class]], @"UITabBarController first tab should be a ScheduleViewController class"); 
```

断言以同样的方式失败。

**更新 2**

正如评论中所建议的，我尝试在断言之前添加这段代码：

```
BOOL vcBool = [vc_1 isKindOfClass:[ScheduleViewController class]]; 
```

使用调试器，我看到：

```
(lldb) print (BOOL) [vc_1 isKindOfClass:(Class)[ScheduleViewController class]]
(BOOL) $1 = YES
(lldb) print (BOOL) vcBool
(BOOL) $2 = NO
(lldb) 
```

**更新 3**

按照评论中的建议，我在断言之前添加了这一行：

```
NSLog(@"vc_1=%@ class=%@", vc_1, NSStringFromClass([vc_1 class])); 
```

从调试控制台：

```
vc_1=<ScheduleViewController: 0x993bdb0> class=ScheduleViewController 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-13T19:28:43.647

我找到了解决方案。

这与@vacawama 在评论中链接的帖子中提出的解决方案相反。我在测试目标中也有应用程序目标的所有 *.m 源。当我在寻找 isKindOfClass 问题的解决方案时，我注意到在测试会话开始时控制台上有很多警告。警告是这样的：

```
Class AClass is implemented in both /Application Support/iPhone Simulator/5.0/Applications/7FC68A9C-4F2C-4A30-85AD-87D8ABA7A275/App.app/App and /Developer/Xcode/DerivedData/App-fvbgaqbdupuoodgquxhlwbudpsin/Build/Products/Debug-iphonesimulator/App.octest/AppTests. One of the two will be used. Which one is undefined. 
```

我从测试目标中删除了应用程序的所有 .m 文件。

现在 isKindOfClass 按预期工作。

感谢大家的支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T11:28:44.693

您不应该直接将 BOOL 值与 YES 进行比较。这可能会导致您的断言出现问题。这是有关该问题的背景参考：http: [//mobiledevelopertips.com/objective-c/of-bool-and-yes.html](http://mobiledevelopertips.com/objective-c/of-bool-and-yes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-08T08:42:19.770

使用 NSStringFromClass 将类名转换为字符串将避免 isKindOfClass 出现问题...例如：

```
if ([NSStringFromClass([AViewController class]) isEqualToString:NSStringFromClass([BViewController class])]) 
```

# javascript - 通过Firefox将图像复制粘贴到ckeditor中？

> ID：12386192
> 
> 赞同：0
> 
> 时间：2012-09-12T10:30:48.373
> 
> 标签：javascript, firefox, ckeditor

我的问题是，只需复制粘贴，我就可以在 Firefox 的 ckeditor 中复制图像，复制此图像后，它不会显示在其他浏览器中如何删除在 Firefox 中的图像粘贴![在此处输入图像描述](../Images/efe16380699568f5aa6408a327903c49.png)

图片网址看起来也不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:51:33.300

如果你已经在 CKEditor 中配置了文件上传器，你可以使用这个插件将粘贴的图片转换成真实文件并上传：

[http://ckeditor.com/forums/Plugins/ImagePaste-plugin-for-Firefox](http://ckeditor.com/forums/Plugins/ImagePaste-plugin-for-Firefox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T09:03:07.260

这称为[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme "数据 URI")，如果文件小于 32 KB ，IE8*可以实际显示它。*IE7不能显示，IE9没有问题。

如果要使用此功能，则必须添加一些代码服务器端来接收您提供的 HTML，然后在将其提交到数据库之前提取 base64 编码的数据 URI 并将它们保存为数据库中的“常规”附件. 您可以将数据 URI 替换为指向您存储位置上的图像资产的“常规”URI。

我们为 OTRS 项目做了类似的事情：http: [//blog.otrs.org/2012/02/06/pasting-images-using-firefox/](http://blog.otrs.org/2012/02/06/pasting-images-using-firefox/)

# macos - 在 Mac 上安装 Mondrian 时出现 NoClassDefFoundError

> ID：12386193
> 
> 赞同：2
> 
> 时间：2012-09-12T10:30:50.797
> 
> 标签：macos, mondrian

我正在尝试在我的 Mac OS X 上安装 Mondrian。我在[本指南的第 12 步遇到以下错误](http://tinyurl.com/9y4f8aa)

命令如下：-

```
java -cp “/usr/local/tomcat/webapps/mondrian/WEB-INF/lib/mondrian.jar: /usr/local/tomcat/webapps/mondrian/WEB-INF/lib/log4j-1.2.9.jar: /usr/local/tomcat/webapps/mondrian/WEB-INF/lib/eigenbase-xom.jar: /usr/local/tomcat/webapps/mondrian/WEB-INF/lib/eigenbase-resgen.jar: /usr/local/tomcat/webapps/mondrian/WEB-INF/lib/eigenbase-properties.jar: /usr/local/tomcat/webapps/mondrian/WEB-INF/lib/mysql-connector-java-5.1.5-bin.jar” mondrian.test.loader.MondrianFoodMartLoader -verbose -tables -data -indexes -jdbcDrivers=com.mysql.jdbc.Driver -inputFile=/usr/local/mondrian/demo/FoodMartCreateData.sql -outputJdbcURL=”jdbc:mysql://localhost/foodmart?user=foodmart&password=foodmart” 
```

错误如下：-

```
Exception in thread "main" java.lang.NoClassDefFoundError: /usr/local/tomcat/webapps/mondrian/WEB-INF/lib/log4j-1/2/9/jar:
Caused by: java.lang.ClassNotFoundException: .usr.local.tomcat.webapps.mondrian.WEB-INF.lib.log4j-1.2.9.jar:
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:34:57.823

你的 /usr/local/tomcat/webapps/mondrian/WEB-INF/lib/ 文件夹中有 log4j jar 吗？导致类加载器 id 无法找到您在类路径中提到的 log4j。

# android - 将设备定位到像 Android 中的全景图像应用程序这样的目标

> ID：12386195
> 
> 赞同：3
> 
> 时间：2012-09-12T10:30:52.110
> 
> 标签：android, android-camera, android-sensors, gyroscope, sensormanager

我希望你们中的大多数人都使用过相机应用程序中的全景图像选项。他们要求/强制用户向一个方向移动设备，例如，如果您拍摄第一张图像，那么您将移动到第二张图像，然后它会向您显示一个**目标框**，当您到达该框时，图像会再次被捕获，依此类推。

[三星 Galaxy s2 中的全景图像示例](http://www.youtube.com/watch?v=Tt67TdnNM9c)

我很想知道我们如何实现此功能，以便我们可以为用户设置目标以将设备朝某个方向移动。哪些传感器可以帮助实现这一功能，涉及的因素有哪些？

举个简单的例子，我们制作了一个简单的游戏，在游戏中我们得到一个指向目标框的箭头，当我们让目标框聚焦时，我们会得到一些分数等。

请指导我，谢谢。

# python - 在 python 中返回 1 而不是 true

> ID：12386196
> 
> 赞同：3
> 
> 时间：2012-09-12T10:30:56.990
> 
> 标签：python, python-2.7, boolean

我试图在 python 中返回一个而不是 true。

我正在处理的代码是：

```
delimiters = ( '()', '[]', '{}', "''", '""' )
esc = '\\'

def is_balanced(s, delimiters=delimiters, esc=esc):
    stack = []
    opening = tuple(str[0] for str in delimiters)
    closing = tuple(str[1] for str in delimiters)
    for i, c in enumerate(s):
        if len(stack) and stack[-1] == -1:
            stack.pop()
        elif c in esc:
            stack.append(-1)
        elif c in opening and (not len(stack) or opening[stack[-1]] != closing[stack[-1]]):
            stack.append(opening.index(c))
        elif c in closing:
            if len(stack) == 0 or closing.index(c) != stack[-1]:
                return False
            stack.pop()

    return len(stack) == 0

num_cases = raw_input()
num_cases = int(num_cases)
for num in range(num_cases):
    s = raw_input()
    print is_balanced(s) 
```

它基本上检查输入的字符串是否平衡。如果平衡，则应返回 1，否则应返回 0。

我试过这个：

```
1
Test string
True 
```

它返回真。我希望它返回 1\. 我该怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-12T10:37:36.437

或者，您可以将布尔值转换为 int：

```
>>>myBoolean = True
>>>int(myBoolean)
1
>>>myBoolean = False
>>>int(myBoolean)
0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T10:32:38.353

嗯？您更改代码：

代替

```
return False 
```

写

```
return 0 
```

而不是

```
return len(stack) == 0 
```

写

```
if len(stack) == 0:
  return 1
return 0 
```

后面的 3-liner 可以在一行上重写，但为了清楚起见，我选择了上面的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T10:31:37.367

```
return 1 if len(stack) == 0 else 0 
```

这简洁地改变了 , 的返回值`is_balanced`，相当于：

```
if len(stack) == 0:
    return 1
else:
    return 0 
```

当然，您可以保持`is_balanced`不变并打印（以类似的符号）：

```
1 if is_balanced(s) else 0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-12T10:37:16.950

只需使用

```
print +is_balanced(s) 
```

反而。

# python - 将多个过滤器应用于元组列表

> ID：12386199
> 
> 赞同：21
> 
> 时间：2012-09-12T10:31:14.520
> 
> 标签：python, filter, tuples

我正在寻找一种有效的 Pythonic 方式将多个过滤器应用于元组列表。

例如，假设过滤器是这样的：

```
def f1(t): return t[3]<10
def f2(t): return t[0]!=1
def f3(t): return t[1] in ("lisa","eric")
def f4(t): return t[3]>2 
```

和这样的 n 元组（即 db-records）：

```
tuples=[
(0,'tom','...',8),
(1,'john','...',17),
(2,'lisa','...',1),
(3,'eric','...',18)
] 
```

以下作品：

```
def nFilter(filters,tuples):
    if filters and tuples:
        return nFilter(filters,filter(filters.pop(),tuples))
    else: return tuples 
```

结果如下：

```
>>> nFilter([f1,f2,f3],tuples)
[(2, 'lisa', '...', 1)] 
```

和

```
>>> nFilter([f1,f2,f3,f4],tuples)
[] 
```

但我想知道是否有更直接的方法；我想到的是函数组合（即`f1(f2(...fn(tuples)...))`），用于任意函数列表。在文档中有对包含函数的[函数库](http://docs.python.org/release/3.1.5/howto/functional.html#the-functional-module)的引用`compose`，但链接都已失效。

此外，由于我计划在相当大的数据集上使用它，并且可能在生产 Web 服务中使用大量过滤器，它必须是高效的，我不能说这个解决方案是否有效。

欢迎任何建议或改进。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-12T10:43:23.813

## 改进：用迭代代替递归

没有真正的“任意函数列表的组合函数”；但是，使用简单的 for 循环构建过滤器链非常容易：

```
def nFilter(filters, tuples):
    for f in filters:
        tuples = filter(f, tuples)
    return tuples 
```

## 改进：按限制和速度排序过滤器

链式迭代器是如此之快，以至于总运行时间往往会被对谓词函数的调用所支配。

最好的结果可以通过对谓词进行排序以最小化总工作来获得。一般来说，最好将廉价的测试放在昂贵的测试之前，并将限制性更强的测试放在不能过滤掉很多情况的测试之前。

## 例子

在此示例中，谓词的成本大致相同（函数调用、元组索引和与常数的比较），但它们的限制性不同（`t[2]==4`过滤掉 80% 的情况，而`t[0]>1`and `t[1]<3`each 只过滤掉 40 % 的数据）。

```
>>> from itertools import product

>>> filters = [lambda t: t[2]==4, lambda t: t[0]>1, lambda t: t[1]<3]
>>> for tup in nFilter(filters, product(range(5), repeat=3)):
        print(tup)

(2, 0, 4)
(2, 1, 4)
(2, 2, 4)
(3, 0, 4)
(3, 1, 4)
(3, 2, 4)
(4, 0, 4)
(4, 1, 4)
(4, 2, 4) 
```

## 从评论中提升的注释

*   当输入迭代为空时，过滤器函数对谓词进行零应用。这就像在一个空列表上做一个 for 循环。

*   每个过滤器都会减少输入封闭过滤器的数据量。因此，每个过滤器仅应用于已通过先前过滤器的数据。

*   不要担心`lambda`示例中的 。它具有与常规相同的功能`def`。这只是编写过滤器列表的一种便捷方式。

*   在 Python 3 中，[*filter()*](https://docs.python.org/3.6/library/functions.html#filter)函数被更新为返回一个迭代器而不是一个列表。在 Python 2 中，您可以使用[*itertools.ifilter()*](http://docs.python.org/library/itertools.html#itertools.ifilter)而不是[*filter()*](https://docs.python.org/2.7/library/functions.html#filter)来实现相同的效果。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-12T10:43:52.390

你在寻找这样的东西吗？

```
filters = (f1,f2,f3,f4)
filtered_list = filter( lambda x: all(f(x) for f in filters), your_list ) 
```

这样做的好处是，一旦单个过滤器返回`False`，该列表元素就不会被包含在内。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-12T11:11:37.363

生成器表达式似乎是最惯用的方法（你可以免费获得懒惰）：

```
def nFilter(filters, tuples):
    return (t for t in tuples if all(f(t) for f in filters)) 
```

或等效的（并且可以说更具可读性）：

```
def nFilter(filters, tuples):
    for tuple in tuples:
        if all(filter(tuple) for filter in filters):
            yield tuple 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-12T11:11:58.233

好吧，这里没有花哨的 itertools 或类似的东西，只是使用简单的循环避免递归和生成器的开销：

```
def for_loop(filters, tuples):
    for f in filters:
        tuples = filter(f, tuples)
        if not tuples: 
            return tuples
    return tuples 
```

* * *

这是一个有点脏的基准：

```
import datetime
from itertools import ifilter
from timeit import Timer

def f1(t): return t[3]<10
def f2(t): return t[0]!=1
def f3(t): return t[1] in ("lisa","eric")
def f4(t): return t[3]>2

def original(filters,tuples):
    if filters and tuples:
        return original(filters,filter(filters.pop(),tuples))
    else: 
        return tuples

def filter_lambda_all(filters, tuples):
    return filter(lambda t: all(f(t) for f in filters), tuples)

def loop(filters, tuples):
    while filters and tuples:
        f = filters[0]
        del filters[0]
        tuples = filter(f, tuples)
    return tuples

def pop_loop(filters, tuples):
    while filters and tuples:
        tuples = filter(filters.pop(), tuples)
    return tuples

def for_loop(filters, tuples):
    for f in filters:
        tuples = filter(f, tuples)
        if not tuples: 
            return tuples
    return tuples

def with_ifilter(filters, tuples):
    for f in filters:
        tuples = ifilter(f, tuples)
    return tuples

_filters = [f1, f2, f3, f4]

def time(f):
    def t():
        return [    (0,'tom','...',8),
                    (1,'john','...',17),
                    (2,'lisa','...',1),
                    (3,'eric','...',18)
                ]*1000
    for i in xrange(4):
        list(f(_filters[i:] * 15,t()))

if __name__=='__main__':
    for f in (original,filter_lambda_all,loop,pop_loop,with_ifilter,for_loop):
        t = Timer(lambda: time(f))
        d = t.timeit(number=400)
        print f.__name__, d 
```

结果：

> 原始 7.23815271085
> filter_lambda_all 14.1629812265
> loop 7.23445844453
> pop_loop 7.3084566637
> with_ifilter 9.2767674205
> for_loop 7.02854999945

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-02-16T23:26:24.827

我建议使用以下模式在生成器上自由地应用一系列/过滤器链：

```
from functools import reduce, partial
from itertools import ifilter

filtered = reduce(lambda s,f: ifilter(f,s), filter_set, unfiltered) 
```

简而言之，它在生成器上从左到右设置了一个过滤器链，并返回将所有过滤器应用于原始生成器的生成器。

如果您正在寻找一份清单，以下内容就足够了：

```
[reduce(lambda s,f: ifilter(f,s), (f1,f2,f3,), tuples)] 
```

如果您希望获得一个功能，您可以将其定义为：

```
chain_filters = partial(reduce, lambda s,f: ifilter(f,s)) 
```

并用作：

```
[chain_filters((f1,f2,f3,), tuples)] 
```

请注意，此解决方案不组成过滤器（如`all()`），而是将它们链接起来。如果您正在使用一些繁重的计算，您可能希望将更激进的过滤器放在链的开头，例如在数据库查询过滤器之前放置一个布隆过滤器等。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-12T10:46:50.910

类似于*@Raymond Hettinger，*

虽然，我建议使用 itertools 中的 ifilter 作为生成器。

```
from itertools import ifilter

def nFilter(filters,tuples):
      return ifilter(lambda t: all(f(t) for f in filters), tuples) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-06T14:15:08.767

您可以定义@tokland 的替代方案

```
superFilter=lambda x:all(filter(x) for filter in filters)
newTuples=filter(superFilter,tuples) 
```

或者一个班轮

```
 newTuples=filter(lambda x:all(filter(x) for filter in filters),tuples) 
```

如果你只做这个超级过滤一次这是优越的。

# android - Phonegap - 本地文件在主视图中而不是在 iframe 中打开

> ID：12386204
> 
> 赞同：0
> 
> 时间：2012-09-12T10:31:24.617
> 
> 标签：android, iframe, cordova

我正在使用 PhoneGap 2.0 开发一个 Android 应用程序，该应用程序在 iframe 中打开本地存储的 Html。问题是，每当我尝试加载任何 Html 时，都会显示它，但应用程序会中断（不再执行 Javascript）。这是我在 logcat 中得到的：

```
09-12 12:14:43.374: D/CordovaWebView(19771): >>> loadUrlNow()
09-12 12:14:43.394: D/CordovaLog(19771): JSCallback Error: Request failed.
09-12 12:14:43.394: D/CordovaLog(19771): file:///android_asset/www/js/lib/cordova-2.0.0.js: Line 3698 : JSCallback Error: Request failed.
09-12 12:14:43.394: I/Web Console(19771): JSCallback Error: Request failed. at file:///android_asset/www/js/lib/cordova-2.0.0.js:3698
09-12 12:14:43.414: D/DroidGap(19771): onMessage(onPageStarted,file:///storage/sdcard0/file.html)
09-12 12:14:43.584: D/chromium(19771): Unknown chromium error: -6
09-12 12:14:43.704: D/Cordova(19771): onPageFinished(file:///storage/sdcard0/file.html)
09-12 12:14:43.704: D/CordovaWebView(19771): >>> loadUrlNow()
09-12 12:14:43.714: D/DroidGap(19771): onMessage(onNativeReady,null)
09-12 12:14:43.714: D/DroidGap(19771): onMessage(onPageFinished,file:///storage/sdcard0/file.html) 
```

编辑：

实际发生的情况是，整个应用程序 html 被文件替换。这就是 Javascript 没有执行的原因……没有 Javascript。这就是说，有谁知道如何避免这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:15:06.947

我找到了一个解决方案，虽然它不是最佳的......它包括更改 Cordova/PhoneGap 源代码并编译它。我不知道这些修改的后果，只是它似乎有效。要修改的文件是 org.apache.cordova.CordovaWebViewClient.java。需要注释一堆行并`false`在最后返回。这是片段：

```
 // All else 
    //        else { 
    // 
    //            // If our app or file:, then load into a new Cordova webview container by starting a new instance of our activity. 
    //            // Our app continues to run.  When BACK is pressed, our app is redisplayed. 
    //            if (url.startsWith("file://") || url.indexOf(this.ctx.baseUrl) == 0 || ctx.isUrlWhiteListed(url)) { 
    //                this.ctx.loadUrl(url); 
    //            } 
    // 
    //            // If not our application, let default viewer handle 
    //            else { 
    //                try { 
    //                    Intent intent = new Intent(Intent.ACTION_VIEW); 
    //                    intent.setData(Uri.parse(url)); 
    //                    ctx.startActivity(intent); 
    //                } catch (android.content.ActivityNotFoundException e) { 
    //                    LOG.e(TAG, "Error loading url "+url, e); 
    //                } 
    //            } 
    //        } 
    //        return true; 
    return false; 
```

我从[这里得到了解决方案](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/A2Ow3QSGhBE)

# openstreetmap - 从 OSM 地图中删除街道编号

> ID：12386205
> 
> 赞同：0
> 
> 时间：2012-09-12T10:31:25.600
> 
> 标签：openstreetmap, mapnik

我仍在研究我的地图项目。我使用 mapnik 工具来渲染我自己的地图。Mapnik 读取一个 xml 文件来设置每个图块的样式。

此刻，我设法删除了街道名称和所有对我的项目无用的东西。我唯一的问题是删除街道号码，即使所有无用的图层都关闭，它仍然会出现。

我给你一个指向我的 xml 文件的 pastebin 链接：http: [//pastebin.com/ZRtmYBRz](http://pastebin.com/ZRtmYBRz)。

你知道我怎样才能删除街道号码吗？谢谢。

前 ： ![我的瓷砖，以前](../Images/5aaa56a8857d232a876514104eef8757.png)

现在： ![我的瓷砖，现在](../Images/7897379cb1dd8eac93e121b70237b1c3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:09:47.823

`addr:housenumber`尝试对源文件中包含该信息的节点标签使用过滤器。获得这些后，您可以使用`TextSymbolizer`. [有关https://github.com/mapnik/mapnik/wiki/TextSymbolizer](https://github.com/mapnik/mapnik/wiki/TextSymbolizer)的更多信息

# mysql - MySql，在删除后更新一个计数器以不包含任何间隙

> ID：12386209
> 
> 赞同：3
> 
> 时间：2012-09-12T10:31:41.953
> 
> 标签：mysql, sql-update, delete-row

我有一个这样的 mySql 表（简化）

```
Id*| Text |  Pos (integer)
-----------
A  | foo  |  0
B  | bar  |  1
C  | baz  |  2
D  | qux  |  3 
```

现在，在我删除一行之后，我想更新剩余行的 Pos 值，这样就不会发现“洞”或间隙。

例如，如果删除了 Id='C' 的行，则剩余表应为：

```
Id*| Text |  Pos (integer)
-----------
A  | foo  |  0
B  | bar  |  1
D  | qux  |  2 
```

这可能在单个查询中吗？

**更新** 根据接受的答案，这是我的问题的解决方案：

```
START TRANSACTION;
SELECT @A:=pos FROM table_name WHERE Id= 'C';
DELETE FROM table_name WHERE Id = 'C';
UPDATE table_name SET Pos = Pos - 1 WHERE Pos > @A;
COMMIT; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:38:02.523

您可以通过在表上创建一个[AFTER DELETE TRIGGER来实现这一点，](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)

或通过使用交易：

```
START TRANSACTION;

SELECT Pos 
INTO @var_pos
FROM table_name
WHERE id = 'C';

DELETE 
FROM table_name
WHERE id = 'C';

UPDATE table_name
SET Pos = Pos - 1
WHERE Pos > @var_pos;

COMMIT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:41:45.563

我认为这应该可行，（我尚未测试过）您可以在任何删除后运行此语句

```
update t set t.Pos=a.iterator
from tablename t 
join(
     SELECT @i:=@i+1 AS iterator, t.id
     FROM tablename t,(SELECT @i:=0) r)a
on a.id=t.id 
```

# wix - LGHT0094：未解决对“产品：*”部分中符号“WixComponentGroup：Product.Generated”的引用

> ID：12386211
> 
> 赞同：21
> 
> 时间：2012-09-12T10:31:49.353
> 
> 标签：wix, windows-installer

我在其中一台构建服务器上遇到此错误。所有其他服务器都可以正常构建。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-05T07:29:23.267

它是一个wix 3.6问题。[在这里](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/How-to-get-heat-exe-to-harvest-td7473250.html)找到了解决方案。您需要做的就是在您的 wix 项目中添加以下属性*<EnableProjectHarvesting>True</EnableProjectHarvesting>*

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <EnableProjectHarvesting>True</EnableProjectHarvesting> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T11:03:54.670

我也遇到了这个错误，这似乎是创建新设置时从 Wix 自动生成的新事物。当我从 3.5 升级到 3.6 时，Wix 不喜欢它，我只是将其删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-29T05:19:25.540

就我而言，我应该使用`ComponentRef`而不是`ComponentGroupRef`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-16T17:16:17.700

从 升级`Wix 3.5`到 后`Wix 3.8`，我们遇到了同样的问题。但是，我们不希望项目收获，因此设置`EnableProjectHarvesting`为 true 不是一个好的解决方案。所以为了解决这个问题，我们不得不改变几件事：

在文件`Product.wxs`中，我们完全删除了以下行（从属性中`<Feature>`）：

```
<ComponentGroupRef Id="Product.Generated" /> 
```

之后，在我们的 中`.wixproj`，我们将 更新`LinkerBaseInputPaths`为`DefineConstants`.

所以这意味着改变

```
<LinkerBaseInputPaths>%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\</LinkerBaseInputPaths> 
```

到*（并且请注意添加`BasePath=%`）*

```
<DefineConstants>BasePath=%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\</DefineConstants> 
```

最后我们添加了

```
PreprocessorVariable="var.BasePath" 
```

到我们的`HeatDirectory`属性（就在我们在上一步中修改的 PropertyGroup 的下方）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-15T02:07:38.087

就我而言，我得到了相同的错误号：

*file_name.wxs(38): error LGHT0094: Unresolved reference to symbol 'WixComponentGroup:Name_of_the_ComponentGroup*

这是因为我已将 ComponentGroup 移动到不同的文件，并且调用candle.exe 的构建脚本（在我的情况下为 cmake，也许您使用 ant）尚未更新以包含现在包含 ComponentGroup 的 .wxs 文件。

更新 cmake 脚本以包含新文件修复了错误。并且错误消息实际上是有意义的，因为这是一个未解决的参考。

# html - 链接到当前页面中的元素

> ID：12386212
> 
> 赞同：45
> 
> 时间：2012-09-12T10:31:51.430
> 
> 标签：html

我创建了一个 HTML 页面，其中包含许多带有如下标题的表格：Content、Main_Page、Document、Expenses 等。

我想为页面顶部创建一个链接。当我单击该链接时，它应该转到特定部分。所以我使用下面的代码来映​​射内容。但这对我不起作用。

```
<a href="#Content">Content Section</a> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-12T10:34:13.673

您需要为链接创建一个锚点。这样做的现代方法是给适当的元素一个`id="Content"`属性。这样做的旧方法是使用`<a name="Content"></a>`.

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-09-12T10:39:26.720

将要“跳转”的元素指定为明确的 ID，如下所示：

```
<p id="idOfTag">Your content goes here</p> 
```

然后在页面顶部的链接中，使其引用该元素的 id（注意`#`）：

```
<a href="#idOfTag">Jump</a> 
```

具有多个链接的完整示例：

```
<ul>
  <li><a href="#contentParagraph">Content</a></li>
  <li><a href="#mainPageParagraph">Main page</a></li>
  <li><a href="#documentParagraph">Document</a></li>
  <li><a href="#expensesParagraph">Expenses</a></li>
</ul>
<p id="contentParagraph">
  <h4>Content</h4>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor
  in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</p>
<p id="mainPageParagraph">
  <h4>Main page</h4>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor
  in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</p>
<p id="documentParagraph">
  <h4>Document</h4>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor
  in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</p>
<p id="expensesParagraph">
  <h4>Expenses</h4>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor
  in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</p>
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-12T10:41:32.567

您可以使用标签的`name`属性`anchor`来实现这一点。

假设你有一个`div`带 id`content`

```
<div id="content">This is my div</div> 
```

接下来确保您有一个与 的属性相同的`anchor`标签`name``id``div` `content`

```
<a href="#" name="content">Click to go to the top</a> 
```

**[现场演示。](http://jsfiddle.net/u4uSW/)**

向下滚动以查看链接

另一种方法是

```
<div id="content">My div</div> 
```

那么你的锚标签的href应该是#content

```
<a href="#content">Click to go to top</a> 
```

**[现场演示。](http://jsfiddle.net/u4uSW/1/)**

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-12T12:53:37.850

看起来这个问题已经得到解答，但是如果你想在过渡到这些元素时使用滚动效果，这里有一点 JS 片段。$（函数（）{

```
 function filterPath(string) {
        return string
        .replace(/^\//,'')
        .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
        .replace(/\/$/,'');
    }

    var locationPath = filterPath(location.pathname);
    var scrollElem = scrollableElement('html', 'body');

    // Any links with hash tags in them (can't do ^= because of fully qualified URL potential)
    $('a[href*=#]').each(function() {

        // Ensure it's a same-page link
        var thisPath = filterPath(this.pathname) || locationPath;
        if (  locationPath == thisPath
            && (location.hostname == this.hostname || !this.hostname)
            && this.hash.replace(/#/,'') ) {

                // Ensure target exists
                var $target = $(this.hash), target = this.hash;
                if (target) {

                    // Find location of target
                    var targetOffset = $target.offset().top;
                    $(this).click(function(event) {

                        // Prevent jump-down
                        event.preventDefault();

                        // Animate to target
                        $(scrollElem).animate({scrollTop: targetOffset}, 2000, function() {

                            // Set hash in URL after animation successful
                            location.hash = target;

                        });
                    });
                }
        }

    });

    // Use the first element that is "scrollable"  (cross-browser fix?)
    function scrollableElement(els) {
        for (var i = 0, argLength = arguments.length; i <argLength; i++) {
            var el = arguments[i],
            $scrollElement = $(el);
            if ($scrollElement.scrollTop()> 0) {
                return el;
            } else {
                $scrollElement.scrollTop(1);
                var isScrollable = $scrollElement.scrollTop()> 0;
                $scrollElement.scrollTop(0);
                if (isScrollable) {
                    return el;
                }
            }
        }
        return [];
    }

}); 
```

# ruby-on-rails - 使用变量作为键在 MongoID 中搜索

> ID：12386215
> 
> 赞同：1
> 
> 时间：2012-09-12T10:31:55.260
> 
> 标签：ruby-on-rails, mongodb, mongoid

我在 Rails 应用程序中使用 Mongoid。假设有一个模型叫做`Product`. 每个`product`文档都有一些其他文档没有的字段。这里有2个例子。

```
{name: "Product A", color: "Yellow", discount: "0.9"}
{name: "Product B", color: "Blue", size: "XXL"} 
```

该字段`discount`或`size`可能会不时更改。假设我有一个表单可以让用户按字段名称（即`discount`）和值进行搜索。如何将包含字段名称的变量传递给 Mongoid Criteria？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:43:15.160

```
@return_value = Model.where("field_name"=>"value").all 
```

为您的问题使用

```
@value = Product.where("discount" => ".0.9").all 
```

# android - 在某些设备上返回 onActivityResult 时出现 NullPointerException

> ID：12386217
> 
> 赞同：1
> 
> 时间：2012-09-12T10:32:03.927
> 
> 标签：android

这是我的代码：

```
Intent pictureActionIntent = new Intent(Intent.ACTION_GET_CONTENT, null);
                pictureActionIntent.setType("image/*");
                pictureActionIntent.putExtra("return-data", true);
                startActivityForResult(pictureActionIntent, GALLERY_PICTURE); 
```

和：

```
if (resultCode == RESULT_OK) {            
            if (requestCode == GALLERY_PICTURE)
            {
                Uri selectedImageUri = data.getData();

                selectedPath = getPath(selectedImageUri); And...... 
```

对于大多数设备来说，这很好，它`data.getData()`会返回一些东西。
但是在摩托罗拉，一个设备会有 NullPointerException，我检查了它`data.getData()`是否为空。
有什么办法可以解决这个问题吗？？
PS此设备中的其他一些默认应用程序可以从图库中选择图片，所以我认为有一些方法可以解决。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:46:25.003

我认为你尝试错了`Intent`。试试这个：

`Intent i = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);`

# tomcat - 如何将 Tomcat 配置为不在 Tomcat 启动时自动启动某些应用程序？

> ID：12386218
> 
> 赞同：5
> 
> 时间：2012-09-12T10:32:10.093
> 
> 标签：tomcat, startup

我有一个 Web 应用程序部署到 Tomcat 的实例中。我希望能够将 Tomcat 配置为在 Tomcat 本身启动时不自动启动该应用程序。但是，我确实希望启动 Tomcat 管理器，以便根据需要手动启动和停止 Web 应用程序。

如何说服 Tomcat 以这种方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:10:38.650

我不认为这是可能的。

最接近的方法似乎是这样的：

[http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Deploy_A_New_Application_from_a_Local_Path](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Deploy_A_New_Application_from_a_Local_Path)

您可以设法让应用程序没有被部署，但已经存在于文件系统中，并且可以使用 Tomcat 管理器进行部署。

但如果我没记错的话，部署应用程序也会自动启动它。

# rest - 为 REST API 文档集成 enunciate 和 ant

> ID：12386219
> 
> 赞同：0
> 
> 时间：2012-09-12T10:32:16.867
> 
> 标签：rest, cxf, enunciate

我在为 CXF REST 服务 API 项目集成 enunciate 和 ant 时遇到错误。方法 getFeeItemsByCapID() 中存在错误。我试图在源代码中找到答案，但没有结果。谁对错误有任何想法？谢谢你的帮助。如果您有任何提示。

蚂蚁脚本

```
<path id="enunciate.classpath">
    <fileset dir="${enunciate.home}/lib">
        <include name="*.jar"/>
        </fileset>
        <!--include (optional) spring module-->
        <fileset dir="${enunciate.home}/lib/modules/cxf">
            <include name="*.jar"/>
        </fileset>
        <fileset dir="${java.home}">
            <include name="lib/tools.jar"/>
        </fileset>
    </path>

    <taskdef name="enunciate" classname="org.codehaus.enunciate.main.EnunciateTask">
        <classpath refid="enunciate.classpath"/>
    </taskdef>  

    <enunciate basedir="java/" configFile="enunciate.xml">
        <include name="**/*.java"/>
        <classpath refid="enunciate.classpath"/>
        <export artifactId="war.file" destination="d:/myapp.war"/>
        <javacArgument argument="-g"/>
    </enunciate> 
```

发音.xml

```
<?xml version="1.0"?>
<enunciate label="test" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://enunciate.codehaus.org/schemas/enunciate-1.26.xsd">
<namespaces>
    <namespace id="api" uri="http://api.example.com/" />
    <namespace id="link" uri="http://api.example.com/link" />
    <namespace id="persona" uri="http://api.example.com/persona" />
</namespaces>
<modules>
    <!-- Docs -->
    <docs splashPackage="org.codehaus.enunciate.api" title="test" copyright="test.com"/>
    <java-client disabled="false"/>
    <amf disabled="true"/>
    <c disabled="true"/>
    <obj-c disabled="true"/>
    <csharp disabled="true"/>
    <spring-app disabled="false"/>
    <cxf disabled="false"/>
    <gwt disabled="true"/>
    <jaxws-ri disabled="true"/>
    <jersey disabled="true"/>
</modules> 
```

Java 代码

```
@GET
@RecordDetailSecurity(RecordDetailSectionType.FEE)
@Path("/{recordIds}/fees/")
@Produces(MediaType.APPLICATION_JSON)
@JsonView(Views.PublicView.class)
public ResponseModel getFeeItemsByCapID(@PathParam("recordIds") String recordIds,
        @QueryParam("fields") @DefaultValue("") String fields) throws Exception
{ 
```

例外：

```
java.lang.IllegalStateException: D:\AA7.2.0\main-dev\biz\modules\rest-apis\java\com\accela\restapis\jaxrs\agency\service\FeeWebService.java:76: the element 'value' must have a value specified.
    at net.sf.jelly.apt.decorations.declaration.DecoratedAnnotationMirror.<init>(DecoratedAnnotationMirror.java:66)
    at net.sf.jelly.apt.decorations.DeclarationDecorator.decorate(DeclarationDecorator.java:362)
    at net.sf.jelly.apt.decorations.DeclarationDecorator.decorateAnnotationMirrors(DeclarationDecorator.java:113)
    at net.sf.jelly.apt.decorations.declaration.DecoratedDeclaration.getAnnotationMirrors(DecoratedDeclaration.java:213)
    at net.sf.jelly.apt.decorations.declaration.DecoratedDeclaration.getAnnotations(DecoratedDeclaration.java:195)
    at net.sf.jelly.apt.decorations.declaration.DecoratedDeclaration.getAnnotation(DecoratedDeclaration.java:225)
    at org.codehaus.enunciate.contract.jaxrs.ResourceMethod.<init>(ResourceMethod.java:130)
    at org.codehaus.enunciate.contract.jaxrs.Resource.getResourceMethods(Resource.java:143)
    at org.codehaus.enunciate.contract.jaxrs.Resource.<init>(Resource.java:69)
    at org.codehaus.enunciate.contract.jaxrs.RootResource.<init>(RootResource.java:34)
    at org.codehaus.enunciate.apt.EnunciateAnnotationProcessor.getRootModel(EnunciateAnnotationProcessor.java:214)
    at org.codehaus.enunciate.apt.EnunciateAnnotationProcessor.process(EnunciateAnnotationProcessor.java:103)
    at com.sun.mirror.apt.AnnotationProcessors$CompositeAnnotationProcessor.process(AnnotationProcessors.java:60)
    at com.sun.tools.apt.comp.Apt.main(Apt.java:454)
    at com.sun.tools.apt.main.JavaCompiler.compile(JavaCompiler.java:258)
    at com.sun.tools.apt.main.Main.compile(Main.java:1102)
    at com.sun.tools.apt.main.Main.compile(Main.java:964)
    at com.sun.tools.apt.Main.processing(Main.java:95)
    at com.sun.tools.apt.Main.process(Main.java:85)
    at com.sun.tools.apt.Main.process(Main.java:67)
    at org.codehaus.enunciate.main.Enunciate.invokeApt(Enunciate.java:777)
    at org.codehaus.enunciate.main.Enunciate.doGenerate(Enunciate.java:366)
    at org.codehaus.enunciate.main.Enunciate$Stepper.step(Enunciate.java:1735)
    at org.codehaus.enunciate.main.Enunciate$Stepper.stepTo(Enunciate.java:1767)
    at org.codehaus.enunciate.main.Enunciate.execute(Enunciate.java:174)
    at org.codehaus.enunciate.main.EnunciateTask.execute(EnunciateTask.java:156)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
    at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:357)
    at org.apache.tools.ant.Target.performTasks(Target.java:385)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
    at org.apache.tools.ant.Main.runBuild(Main.java:758)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104) 
```

源代码：

```
public DecoratedAnnotationMirror(AnnotationMirror delegate) {
if (delegate == null) {
  throw new IllegalArgumentException("A delegate must be provided.");
}

this.delegate = delegate;
AnnotationType annotationType = delegate.getAnnotationType();
Collection<AnnotationTypeElementDeclaration> allElements = annotationType.getDeclaration() != null? annotationType.getDeclaration().getMethods() : Collections.<AnnotationTypeElementDeclaration>emptyList();
Map<AnnotationTypeElementDeclaration, AnnotationValue> elementValues = getElementValues();

put("annotationType", annotationType);
put("position", delegate.getPosition());
put("elementValues", elementValues);
allElementValues = new HashMap<String, Object>();
for (AnnotationTypeElementDeclaration element : allElements) {
  if (elementValues.containsKey(element)) {
    Object value = elementValues.get(element).getValue();
    allElementValues.put(element.getSimpleName(), value);
    put(element.getSimpleName(), value);
  }
  else {
    AnnotationValue defaultValue = element.getDefaultValue();
    if (defaultValue == null) {
      throw new IllegalStateException(delegate.getPosition() + ": the element '" + element.getSimpleName() + "' must have a value specified.");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:11:11.087

我在自定义注释中找到了根本原因。似乎是因为注释没有默认值。当我删除方法的自定义注释或在注释定义中附加默认值时。异常将消失。但是注解接受一个枚举，在业务逻辑中注解没有默认值。我们总是需要设置枚举值以供使用。但是，为什么注解总是需要默认值呢？有人知道原因吗？

```
@Target( {ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface RecordDetailSecurity
{
    RecordDetailSectionType value(); //append default value such as "default RecordDetailSectionType.ADDITIONAL_INFORMATION;"
}

@RecordDetailSecurity(RecordDetailSectionType.FEE)
public ResponseModel getFeeItemsByCapID(@PathParam("recordIds") String recordIds,
    @QueryParam("fields") @DefaultValue("") String fields) throws Exception 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T11:19:08.170

关于注释默认值错误，我创建了一个示例项目再试一次。它运作良好。现在，我需要改变我原来的看法。我的错。:) 首先，我的项目编译成功，之前没有明确 ant 目标。然而枚举“RecordDetailSectionType”实际上属于另一个罐子。我没有将jar包含在阐明类路径中，因此无法识别自定义的注释类型值。很抱歉对于这个误会。

# c# - 将 GridView 列绑定到固定索引处的列表元素

> ID：12386221
> 
> 赞同：1
> 
> 时间：2012-09-12T10:32:19.450
> 
> 标签：c#, data-binding, gridview

我正在尝试将 GridView 列绑定到固定索引处的 List 元素，但执行时出现异常`Grid.DataBind();`：

> 无法从所选数据源中找到名为“Misure[0].ID”的字段或属性。

自定义类：

```
public partial class RowTabellaConcentrazioneGiornaliera
{
    public DateTime Data { get; set; }
    public string DataString { get; set; }
    public List<MisuraConcentrazione> Misure { get; set; }

}

public partial class MisuraConcentrazione
{
    public double MediaOraTQ { get; set; }
    public double MediaOraNorm { get; set; }
    public double ID { get; set; }
    public string IVTQ { get; set; }
    public string IVN { get; set; }
    public string MeasureCod { get; set; }
    public string DescrizioneParametro { get; set; }
} 
```

网格视图：

```
 <asp:GridView ID="GridDatiConcentrazione" runat="server" AutoGenerateColumns="false" >
        <Columns>
            <asp:BoundField  DataField="DataString" HeaderText="Ora" ItemStyle-Width="50px" ItemStyle-HorizontalAlign="Center" />
        </Columns>
    </asp:GridView> 
```

方法：

```
 protected void SetTabellaSintesiConcentrazioniGiornaliere(BFStat.BFStat _BFStat1, GridView Grid)
    {
        //Carica Griglia di sintesi concentrazione
        List<RowTabellaConcentrazioneGiornaliera> y = _BFStat1.GetConcentrazioniOrarie();

        int i = 0;
        foreach (MisuraConcentrazione riga in y[0].Misure)
        {
            BoundField NewColonnaID = new BoundField();
            NewColonnaID.HeaderText = "Ind. Disp.";
            NewColonnaID.DataField = "Misure[" + i + "].ID";
            Grid.Columns.Add(NewColonnaID);

            BoundField NewColonnaValueTQ = new BoundField();
            NewColonnaValueTQ.HeaderText = "Valore TQ";
            NewColonnaValueTQ.DataField = "Misure[" + i + "].MediaOraTQ";
            Grid.Columns.Add(NewColonnaValueTQ);

            BoundField NewColonnaIVTQ = new BoundField();
            NewColonnaIVTQ.HeaderText = "Validità TQ";
            NewColonnaIVTQ.DataField = "Misure[" + i + "].IVTQ";
            Grid.Columns.Add(NewColonnaIVTQ);

            BoundField NewColonnaValueN = new BoundField();
            NewColonnaValueN.HeaderText = "Valore N";
            NewColonnaValueN.DataField = "Misure[" + i + "].MediaOraNorm";
            Grid.Columns.Add(NewColonnaValueN);

            BoundField NewColonnaIVN = new BoundField();
            NewColonnaIVN.HeaderText = "Validità N";
            NewColonnaIVN.DataField = "Misure[" + i + "].IVN";
            Grid.Columns.Add(NewColonnaIVN);

            i++;
        }

        Grid.DataSource = y;
        Grid.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:39:08.550

我使用更多的网格和表格部分解决了我的问题。

我创建了一个主控件并通过代码添加了列。在这些列中，我放置了其他 GridView。我选择而不是 GridView 因为使用它的列更容易。

我不得不详细说明我的数据源将其拆分为更多列表，但从现在开始，我将选择另一种结构来将我的数据从 calc 方法传递到可视化方法。

感谢大家的帮助；）

# java - 附加来自另一个类的 Textarea 结果

> ID：12386224
> 
> 赞同：2
> 
> 时间：2012-09-12T10:32:27.030
> 
> 标签：java, swing

我有两个班 class`Game` 和 class `wampusGUI`。在`wampusGUI`课堂上，我有一个在方法下`textarea`命名。我正在努力从课堂上取得成果。但是当我试图从那个类访问时。运行良好，结果也出现在该类中（我只是通过简单的 方法测试），但它没有附加到. 这是我的代码。`displayTextArea``textarea1()``append``textarea``Game``function``System.out.print()``textarea`

```
// Code of wampusGUI  class
public class wampusGUI extends javax.swing.JFrame {

    /**
     * Creates new form wampusGUI
     */
    public wampusGUI() {
        initComponents();
    }

    public void textArea1(String text) {
        System.out.print(text);
        displayTextArea.append(text); // this is not appending to textarea.
    }

           /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {

                new wampusGUI().setVisible(true);
                   Game g = new Game();
                   g.testing();
            }
        });
    } 
```

//这里是Game类的代码

```
 private wampusGUI gui;

      public void testing () {         
          String welCome=welcome();
          gui= new wampusGUI();
          gui.textArea1(welCome);            
     } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T14:42:44.847

在您的代码中进行此更改

在你的头等舱 wampusGUI

```
public class wampusGUI extends javax.swing.JFrame {

    /**
     * Creates new form wampusGUI
     */
    public wampusGUI() {
        initComponents();
    }

    public void textArea1(String text) {
        System.out.print(text);
        displayTextArea.append(text); // this is not appending to textarea.
    }

           /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {

                wampusGUI w=new wampusGUI();
                w.setVisible(true);
                Game g = new Game(w);
                g.testing();
            }
        });
    } 
```

而对于二等游戏

```
private wampusGUI gui;

//Add Contructor with Parameter

     public Game(wampusGUI w){
      //put this line of code at the end  
      gui=w;
     }

      public void testing () {         
          String welCome=welcome();          
          gui.textArea1(welCome);            
     } 
```

这将工作......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T10:47:03.583

将文本附加到`TextArea`

```
String str = textarea.getText();
str+="appending text";
textarea.setText(str); 
```

它可能会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T13:32:04.450

您正在`run()`invokeLater 内创建一个wampusGUI 实例，并在`testing()`方法内创建一个wampusGUI 实例。

您实际上正在做的是将文本附加到您看不到的文本区域（可能），因为您有另一个 wampusGUI 实例可见。

# java - awt `Graphics` 对象的撤消和重做方法

> ID：12386226
> 
> 赞同：2
> 
> 时间：2012-09-12T10:32:36.193
> 
> 标签：java, swing, graphics, paintcomponent, undo-redo

我正在制作这个简单的画笔式绘画工具箱（我[之前](https://stackoverflow.com/questions/12208574/using-addmouselistener-and-paintcomponent-for-jpanel)的问题中有一些有趣的想法）

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JColorChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class MainClass2{
    static JLabel colorlabel = new JLabel(" Color ");
    public static JLabel xlab = new JLabel("0");
    public static JLabel ylab = new JLabel("0");

    static JFrame frame1 = new JFrame();
    static JButton quitbutton = new JButton("Quit");
    static JButton infobutton = new JButton("Info");
    static JButton clearbutton = new JButton("Clear");
    static JButton savebutton = new JButton("Save");
    private static int stroke1 = 4;
    static SpinnerNumberModel spinnervals = new SpinnerNumberModel(stroke1,1,15,1);

    static JSpinner spinnerbrush = new JSpinner(spinnervals);

    static JButton selectcolor = new JButton("Select Color");
    static JButton selectbg = new JButton("Select Background");
    public static Color col1 = Color.WHITE;
    private static Color col2 = Color.WHITE;

    static AuxClass4 panel1 = new AuxClass4(col1, col2, stroke1); 

    static JPanel panel2 = new JPanel();
    static JPanel panel3 = new JPanel();
    static JPanel panel4 = new JPanel();

    private static void addPanel1(){

        panel1.setPreferredSize(new Dimension(800,500));
    }
    private static void addPanel2(){
        ButtonAction inst1 = new ButtonAction();
        xlab.setMinimumSize(new Dimension(30,30));
        ylab.setMinimumSize(new Dimension(30,30));
        xlab.setBorder(BorderFactory.createLineBorder(Color.BLACK));
        ylab.setBorder(BorderFactory.createLineBorder(Color.BLACK));
        panel2.add(new JLabel(" X: "));
        panel2.add(xlab);
        panel2.add(new JLabel(" Y: "));
        panel2.add(ylab);

        panel2.add(savebutton);
        panel2.add(clearbutton);
        panel2.add(quitbutton);
        panel2.add(infobutton);
        panel2.setLayout(new FlowLayout());

        quitbutton.addActionListener(inst1);
        infobutton.addActionListener(inst1);
        clearbutton.addActionListener(inst1);
        savebutton.addActionListener(inst1);

        selectcolor.addActionListener(inst1);
        selectbg.addActionListener(inst1);
    }
    //add to panel3
    private static void addPanel3(){
        StrokeAction inst2 = new StrokeAction();
        spinnerbrush.addChangeListener(inst2);
        panel3.add(new JLabel("Stroke size"));
        panel3.add(spinnerbrush);
        panel3.add(selectcolor);
        panel3.add(new JLabel("Current color:"));
        colorlabel.setSize(20, 20);
        colorlabel.setBorder(BorderFactory.createLineBorder(Color.BLACK));
        colorlabel.setOpaque(true);
        colorlabel.setBackground(Color.WHITE);
        colorlabel.setForeground(Color.WHITE);
        panel3.add(colorlabel);
        panel3.add(selectbg);

    }

    private static class ButtonAction implements ActionListener{

        @Override
        public void actionPerformed(ActionEvent arg0) {
            if (arg0.getSource()==quitbutton){
                System.exit(0);
            }
            else if(arg0.getSource()==infobutton){
                JOptionPane.showMessageDialog(frame1, "Paint Toolbox designed in Java");
            }
            else if(arg0.getSource()==selectcolor){

                panel1.changeColor();

            }
            else if(arg0.getSource()==selectbg){
                panel1.changeBg();
            }
            else if(arg0.getSource()==clearbutton){
                panel1.colfg = panel1.colbg;
                colorlabel.setBackground(panel1.colfg);
                colorlabel.setForeground(panel1.colfg);
                panel1.setForeground(null);

            }
            else if(arg0.getSource()==savebutton){
                panel1.saveImage();
            }

        }

    }

    private static class StrokeAction implements ChangeListener{

        @Override
        public void stateChanged(ChangeEvent arg0) {
            if (arg0.getSource()==spinnerbrush){
                Object o1 = spinnervals.getValue();
                Integer int1 = (Integer) o1;
                stroke1 = int1.intValue();
                panel1.changeStroke(stroke1);
            }

            // TODO Auto-generated method stub      
        }

    }

    public static void main(String args[]){

        addPanel1();
        addPanel2();
        addPanel3();
        frame1.add(panel1, BorderLayout.NORTH);
        frame1.add(panel2, BorderLayout.SOUTH);
        frame1.add(panel3, BorderLayout.CENTER);
        frame1.setTitle("PaintBox v2.2");
        frame1.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame1.setSize(800,600);
        frame1.setResizable(false);
        frame1.setLocationRelativeTo(null);
        frame1.setVisible(true);

    }

}

class AuxClass4 extends JPanel implements MouseMotionListener{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private int xval;
    private int yval;
    public Color colfg;
    public Color colbg;
    public int strokesize;
    public int fileorder;

    public AuxClass4(Color input1, Color input2, int input3){
        colfg=input1;
        colbg=input2;
        strokesize = input3;
        this.setBorder(BorderFactory.createLineBorder(Color.CYAN, 10));
        this.setBackground(colbg);
        //this.setMaximumSize(new Dimension(500,380));
        this.addMouseMotionListener(this);

    }

    public void paintComponent(Graphics g1){
        super.paintComponent(g1);
        g1.setColor(colfg);
        g1.fillRect(xval, yval, strokesize, strokesize);

    }

    @Override
    public void mouseDragged(MouseEvent arg0) {
        xval = arg0.getX();
        yval = arg0.getY();
        repaint(xval, yval, strokesize,strokesize);

        // TODO Auto-generated method stub

    }

    @Override
    public void mouseMoved(MouseEvent arg0) {
        xval = arg0.getX();
        yval = arg0.getY();
        String xvalret = Integer.toString(xval);
        String yvalret = Integer.toString(yval);
        MainClass2.xlab.setText(" " + xvalret + " ");
        MainClass2.ylab.setText(" " + yvalret + " ");

    }
    public void changeColor(){
        colfg = JColorChooser.showDialog(this, "Select color", colfg);
        MainClass2.colorlabel.setBackground(colfg);
        MainClass2.colorlabel.setForeground(colfg); 
    }

    public void changeBg(){
        colbg=JColorChooser.showDialog(this, "Select color", Color.WHITE);
        colfg=colbg;
        this.setBackground(colbg);
        MainClass1.colorlabel.setBackground(colfg); 
        MainClass1.colorlabel.setForeground(colfg); 

    }

    public void changeStroke(int inputstroke){
        strokesize=inputstroke;
    }

    public void saveImage(){
        final String dir = System.getProperty("user.dir");
        JOptionPane.showMessageDialog(this, "File saved under " + dir + "/saveimage" + fileorder +".png");
        fileorder+=1;

    }

} 
```

现在它工作得很好，但我开始想知道是否可以为`Graphics`对象实现撤消和重做方法。直观地说，应该有某种方法可以按“历史”顺序将创建的对象添加到某个表中。然后用户应该能够在此表中导航。

不幸的是，我没有这种方法的经验，尤其是图形，所以任何建议都会受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:44:31.837

看看[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。我认为[这篇](http://www.javaworld.com/jw-06-1998/jw-06-undoredo.html)javaworld 文章很好地解释了它。

简而言之，您必须有一个包含撤消和重做的接口。实现这一点的对象将被添加到列表中。当您撤消和重做时，您可以浏览调用撤消和重做的列表。这意味着您可能必须编写更多代码，因为对于您实际绘制的每个事件，您都必须编写等效项来撤消它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T11:02:23.190

我会推荐 UndoManager [http://docs.oracle.com/javase/6/docs/api/javax/swing/undo/UndoManager.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/undo/UndoManager.html)

另请参阅示例 [http://www.java2s.com/Code/Java/Swing-JFC/Undomanager.htm](http://www.java2s.com/Code/Java/Swing-JFC/Undomanager.htm)

# javascript - 如何在 MVC 中使用 jQuery 在文本框旁边显示文本

> ID：12386232
> 
> 赞同：0
> 
> 时间：2012-09-12T10:33:03.143
> 
> 标签：javascript, jquery, ajax

我正在使用弹出窗口输入“主题”字段的值，该字段是强制性的，那么如何在不使用验证和仅使用简单 jQuery 的情况下在“主题”字段旁边显示文本，即“请输入主题”。下面的代码正在运行，但如果我想为某个任务添加另一个主题，那么弹出窗口上会显示文本“请输入主题”。那么如何去除它。

```
if ($("#subject").val().length > 0)
{
      $.ajax({
                    url: '/Task/QuickSave',
                    type: 'post',
                    dataType: 'json',
                    data: $('form#quickSaveTask').serialize(),
                    success: function (data) {
                        alert('data');
                    }
                });
                $('#Subject').val('');
                $('#lean_overlay').fadeOut();
                $('#Add').hide();
                if (refreshTaskGrid != '') refreshTaskGrid();
                return false;
}
else
{
          var msg = $('#subject-message');
            if (msg.length == 0) {
                msg = $('<div id="subject-message"></div>')
                $('#subject').after(msg);
            }
            $("#subject").focus();
            msg.html('Please enter the Subject !');   
            return false;
}
msg.html(''); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:52:19.793

可能是下面的代码会有所帮助

```
$('text-box').change(function(){
    var textEntered=$(this).val();

    if(textEntered.length>0){
        //construct logic to show message 
        if($('#msg-container').size()==0)
        {
             $('<div id="msg-container">Please enter message</div>').css('float','left').appendTo($(this));
        }
    }
    else
    {
        //remove the message div
        $('#msg-container').remove();
    }
}); 
```

# java - 使用 Hibernate 进行数据验证

> ID：12386235
> 
> 赞同：1
> 
> 时间：2012-09-12T10:33:12.553
> 
> 标签：java, hibernate, validation

我目前通过 Hibernate 进行数据验证。尤其是 @Pattern 注释

批发验证总是假的，无论我做什么，我都无法保存对象。

我试试这个，除其他外：

```
@NotNull
@Size(max=30)
@SafeHtml
@Pattern(regexp="[a-zA-Z]", messsage="the name can only contain letters")
private String name; 
```

等等：

```
@NotNull
@Size(max=30)
@SafeHtml
@Pattern(regexp="\\D", messsage="the name can only contain letters")
private String name; 
```

在这两种情况下，如果我写“toto”，我都会出现错误消息。

有人出主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:37:36.627

你有没有尝试过`[a-zA-Z]*`

您拥有的模式看起来只捕获一个字母。您需要一个 * 或一个 + 来建议多个字母。

# mysql - 如何记录mysql数据库结构变化

> ID：12386240
> 
> 赞同：0
> 
> 时间：2012-09-12T10:33:43.377
> 
> 标签：mysql, logging

我正在处理一个使用 mysql 作为数据库的项目。该应用程序由许多客户端托管，我们经常对当前的实时系统进行升级。

在某些情况下，客户端更改了数据库结构（添加新表）并导致一些意外的数据库崩溃。

我需要记录在该数据库中完成的所有结构更改，以便我们找到正确的根本原因。我们不能使用 diff 工具做到 100% 正确，因为它不会显示中间更改。

我找到了[http://www.liquibase.org/](http://www.liquibase.org/)工具，但似乎有点复杂。

是否有任何众所周知的技术或工具来仅跟踪数据库结构更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:36:29.033

如果您有一个应用程序供您的客户管理这些架构更改，您可以使用应用程序级别的机制。如果您有基于 Python 和 Django 的解决方案，您可能会使用提供模式更改跟踪和回滚的 South。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:38:34.867

来自mysql studio，您可以生成所有对象的架构定义并将它们与您的标准架构定义进行比较，这样您就可以比较两个数据库架构......

生成两个数据库的脚本（一个是客户的数据库，一个是主副本数据库），然后使用文件比较工具进行比较，这将是我认为的最佳做法，因为这样您可以跟踪添加了哪个列，删除了哪个列，哪个索引同样添加，无需任何工具下载。

[比较两个 MySQL 数据库](https://stackoverflow.com/questions/225772/compare-two-mysql-databases)的可能重复？希望这可以帮助。

# java - 从不同的类 Android 调用 Asynctask

> ID：12386243
> 
> 赞同：0
> 
> 时间：2012-09-12T10:33:47.217
> 
> 标签：java, android, android-asynctask

我有一个名为A的类，我的异步类被写为A的一个内部类。我有另一个名为B（Activity）的类。现在我在B班。我想要的是调用 A 的 asyncTask。

我对这个问题感到很困惑，如果有人能给我一个正确的答案，他将成为救生员。希望你们帮助我。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-20T12:32:34.503

它是如此简单，只需构建一个主类的对象，然后像这样调用内部类

```
 OuterMainClass outer = new OuterMainClass();
       outer.new InnerAsyncClass(param)
         .execute(); 
```

这个答案为时已晚，无法帮助您，但希望对其他人有所帮助。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:37:22.543

您需要将异步任务从匿名类移动到普通类，而不是在 A 类中。

创建一个扩展 Asynctask 的类，并在您的活动中都有该异步任务的两个实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:38:00.047

制作一个单独的`AsyncTask`. 并在两者中调用它`activities`就是答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T14:00:45.507

我也有同样的情况！看看这个答案......在一个服务类上处理你所有的线程......这里是完美的例子：

> GitHub [WebServiceAsyncTask](https://github.com/jbeerdev/BrightHubCode/blob/master/src/com/bright/hub/background/WebServiceAsyncTask.java)和[WebServiceBackgroundActivity](https://github.com/jbeerdev/BrightHubCode/blob/master/src/com/bright/hub/background/WebServiceBackgroundActivity.java)上的好例子。VIA [Android：如何从不同的类文件运行异步任务？](https://stackoverflow.com/questions/6119305/android-how-to-run-asynctask-from-different-class-file#comment7113760_6119456)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T15:19:13.100

您可以将 Async Task 声明为 A 类中的公共静态内部类。并从 B 类执行它。

# html - 使用嵌套列表元素的章节分段的灵活进度条在 Webkit 浏览器中不起作用

> ID：12386246
> 
> 赞同：1
> 
> 时间：2012-09-12T10:33:52.637
> 
> 标签：html, css, cross-browser, responsive-design

对于一个在线教育网站，我创建了一个灵活的进度条，它分为章节和章节段。它必须在现代浏览器中灵活，因为该项目将是响应式的。

这是一个小提琴：http: [//jsfiddle.net/zyCkW/7/](http://jsfiddle.net/zyCkW/7/)

我想要实现的是章节列表元素以 0 像素宽度折叠，而子`<li>`元素（章节段）使用整个#progressbar 的一定百分比向左浮动。如果我让章节`<li>`元素也浮动或给它们 25% 的宽度，则这些段将不会使用#progressbar 的宽度并变得更小。

**问题：**

我写的内容在 IE7-9、Firefox 和 Opera 中运行良好，但不幸的是在 Webkit 浏览器（Chrome/Safari）中不适用：章节描述全部位于左侧，而不是像预期的那样位于第一章部分的开头。我想 Webkit 是唯一能正确处理它的浏览器……即使我很欣赏其他浏览器的结果。

有没有可以在Webkit中解决这个问题的解决方案，最好不用Javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:17:20.630

`:nth-child`我通过使用伪选择器定位左侧的章节描述来解决这个问题。

```
#progressbar ol>li:nth-child(2) span { left: 23.076%; }
#progressbar ol>li:nth-child(3) span { left: 53.844%; }
#progressbar ol>li:nth-child(4) span { left: 76.92%; } 
```

如果可能的话，我仍然会感谢任何更好的解决方案。

# iphone - NSURLRequest 代表没有在设备上被调用 在模拟器上工作正常。

> ID：12386251
> 
> 赞同：0
> 
> 时间：2012-09-12T10:34:04.757
> 
> 标签：iphone, objective-c, ios, ios4, nsurlconnection

当我在设备上运行应用程序时，没有调用 NSURLRequest 委托方法。虽然它在模拟器上完美运行。在请求完成之前我的视图加载也不是这种情况，因为我只能在连接接收到数据后才能加载视图。

我的代码请求网址在这里。非常感谢任何帮助。

```
- (void)viewWillAppear:(BOOL)animated
{ 
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://-dev01x/content"]; cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:60];
    [request setHTTPMethod:@"GET"];
    _getData = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    NSLog(@"HELLO %@",_getData);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:37:11.037

您在此处提供的代码毫无意义：

```
_getData = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

该行返回一个指向 NSURLConnection 对象的指针，您的变量名具有误导性。如果您想在此时阻止（并且甚至可以工作），那么您似乎需要在此时使用 sendSynchronousRequest。

我做的事情与你想做的事情相似，但以更传统的方式。在 viewDidLoad 甚至 initWithFrame 中，我将启动一个异步连接，设置一个标志，并将视图背景颜色设置为黑色或白色（我也通常使用微调器）。当我得到 viewWillAppear 时，如果连接完成，一切都很好，我设置了各种 UI 元素。如果没有，则不要执行任何操作，稍后，当连接完成时，拉下微调器并更新 UI。

我能想到的在您尝试阻止主线程的唯一方法是使用该同步请求（恕我直言，这是处理此问题的一种非常糟糕的方法）。

在后台做事的美妙之处在于，如果花费的时间太长，用户可以点击后退按钮或转到应用程序中的其他位置[在这种情况下，您取消连接并关闭所有内容。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:43:58.563

检查您在浏览器中签入时提供给 NSMutableURLRequest 的 url 什么都没有

![在此处输入图像描述](../Images/ce55507a1faa521ca6f3853464605d63.png)

NSMutableURLRequest 需要有效的 url

# python - 从查询返回的列表到 Tornado 中的整数

> ID：12386256
> 
> 赞同：0
> 
> 时间：2012-09-12T10:34:15.360
> 
> 标签：python, list, variable-assignment, tornado

我有这些变量：

```
PERM_READ = 0x01
PERM_WRITE = 0x02
PERM_CMDS = 0x04 
```

以及检查网络或传感器权限的功能。确定用户权限的函数。

这是功能：

```
def check_network_access(self, network, access=None, raise_err=True):
    if access is None:
        access = PERM_READ
    else:
        assert(access > 0)
        assert(access <= (PERM_READ + PERM_WRITE + PERM_CMDS))
    usr = self.get_current_user()
    usr_id = usr['id']
    # Does the network exist?
    net = self.get_network(network)
    if not net:
        raise tornado.web.HTTPError(404, "not found")

    self.lock_tables('read', ['nets_permissions'])
    perms = self.db.get("SELECT * FROM nets_permissions WHERE network_id=%s AND \
                        user_id=%s", network, usr_id)
    self.unlock_tables()
    if (not perms) or ((perms['perm'] & access) != access):
        if (raise_err):
            raise tornado.web.HTTPError(403, "access forbidden %s %s", perms['perm'], access)
        else: 
            return False
    return True 
```

现在，例如，当我使用此处理程序调用页面时出现错误：

```
class NetworkStatusHandler(BaseHandler):
# Requires authentication 
@tornado.web.authenticated
def get(self, nid):

    # Retrieve the current user 
    usr = self.get_current_user()
    usr_id = usr['id']

    perm = self.db.query("SELECT n.perm FROM nets_permissions as n \
                          WHERE n.network_id=%s AND n.user_id=%s", nid, int(usr_id))

    # Check whether the user has access to the network 
    perms = self.check_network_access(nid, perm)
    net = self.get_network(nid)
    # Render the networks page
    self.render("networkstatus.html", net=net) 
```

我的错误是：

```
File "./wsn.py", line 264, in check_network_access
raise tornado.web.HTTPError(403, "access forbidden %s %s", perms['perm'], access)
HTTPError: HTTP 403: Forbidden (access forbidden 4 1) 
```

我认为这是传递 cariable perm/access to the function 的问题......我必须如何传递这个变量才能做到这一点是一个整数而不是一个列表？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:03:33.573

这是正确的方法：

```
class NetworkStatusHandler(BaseHandler):
# Requires authentication 
@tornado.web.authenticated
def get(self, nid):

    # Retrieve the current user 
    usr = self.get_current_user()
    usr_id = usr['id']

    self.lock_tables("read", ['nets_permissions as n'])
    perm = self.db.get("SELECT n.perm FROM nets_permissions as n \
                          WHERE n.network_id=%s AND n.user_id=%s", nid, int(usr_id))
    self.unlock_tables()

    # Check whether the user has access to the network
    perms = self.check_network_access(nid, perm['perm'])
    net = self.get_network(nid)
    # Render the networks page
    self.render("networkstatus.html", net=net) 
```

使用 self.db.get 和 perm['perm'] 。谢谢！！！！

# php - 数据库中所有记录的PHP下拉列表+选择当前设置的记录

> ID：12386257
> 
> 赞同：0
> 
> 时间：2012-09-12T10:34:23.073
> 
> 标签：php, html, select, drop-down-menu, menu

我有一个组名列表的 PHP 下拉列表（连同 id，因此可以更新）。在此 FORM 页面中，您可以通过从来自数据库的下拉列表中选择可能性来更改为项目指定的组名。我下面的代码有效，但必须有更好的方法，因为我将第一个字段作为当前设置，然后是所有可能性，所以我两次获得此记录。

示例：
- 键盘（当前设置）
- 扬声器（可以选择，直接来自 DBS）
- MIDI 控制器（可以选择，直接来自 DBS）
- 键盘（可以选择，直接来自 DBS）
- 鼓组（可以选择，直接来自星展银行）

如您所见，我再次获得了当前设置的记录。

我的代码：

```
echo "<select name='itemgroupid'>";
// CHOOSE CURRENT SET RECORD AS SELECTED ITEM
echo "<option value='" . $itemgroupid . "'>";
$selected="
SELECT item.itemid, itemgroup.itemgroupname, itemgroup.itemgroupid 
FROM item, itemgroup 
WHERE item.itemid=$itemid";
$selectedresult=mysql_query($query) or die("query fout " . mysql_error() );
while($record=mysql_fetch_array($selectedresult) ) {
echo "" . $itemgroupname . "</option>";
}
// QUERY TO SHOW ALL POSSIBLE CHOOSABLE RECORDS FROM DATABASE
$itemgroupquery="SELECT itemgroupname,itemgroupid FROM itemgroup";
$itemgroupqueryresult = mysql_query ($itemgroupquery);
while($nt=mysql_fetch_array($itemgroupqueryresult)){
    echo "<option value=$nt[itemgroupid]>$nt[itemgroupname]</option>";
}
echo "</select>"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:43:25.123

有两种方法可以实现您的目标：

1）在下拉列表顶部显示所选项目

```
echo "<select name='itemgroupid'>";
// CHOOSE CURRENT SET RECORD AS SELECTED ITEM
echo "<option value='" . $itemgroupid . "'>";
$selected="
SELECT item.itemid, itemgroup.itemgroupname, itemgroup.itemgroupid 
FROM item, itemgroup 
WHERE item.itemid=$itemid";
$selectedresult=mysql_query($query) or die("query fout " . mysql_error() );
while($record=mysql_fetch_array($selectedresult) ) {
echo "" . $itemgroupname . "</option>";
}
// QUERY TO SHOW ALL POSSIBLE CHOOSABLE RECORDS FROM DATABASE
$itemgroupquery="SELECT itemgroupname,itemgroupid FROM itemgroup WHERE item.itemid != $itemid";
$itemgroupqueryresult = mysql_query ($itemgroupquery);
while($nt=mysql_fetch_array($itemgroupqueryresult)){
    echo "<option value=$nt[itemgroupid]>$nt[itemgroupname]</option>";
}
echo "</select>"; 
```

2）在自然位置显示所选项目

```
echo "<select name='itemgroupid'>";
// QUERY TO SHOW ALL POSSIBLE CHOOSABLE RECORDS FROM DATABASE
$itemgroupquery="SELECT itemgroupname,itemgroupid FROM itemgroup";
$itemgroupqueryresult = mysql_query ($itemgroupquery);
while($nt=mysql_fetch_array($itemgroupqueryresult)){
    echo "<option value=$nt[itemgroupid]";
    if( $itemid == $nt['itemgroupid'] ) echo ' selected="selected"';
    echo ">$nt[itemgroupname]</option>";
}
echo "</select>"; 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:44:13.127

好的

在你的代码中。而不是在顶部输出您选择的值，而是以正确的方式进行:)

选择您当前的项目（例如记下 itemgroupid）

然后在你的输出中

```
while($nt=mysql_fetch_array($itemgroupqueryresult)){ 
    echo "<option ";
    if ($savedid==$nt[itemgroupid]) echo "selected ";
    echo "$nt[itemgroupid]>$nt[itemgroupname]</option>"; 
} 
echo "</select>"; 
```

这将产生 $savedid=1

```
<option value=0>group 0</option>
<option selected value=1>group 1</option>
<option value=2>group 2</option> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:17:10.797

首先将默认选择的记录添加到一个空数组中

```
toDisplay = array('selected_record'); 
```

然后，使用您的 sql 从数据库中获取数据并将其附加到该数组中。

稍后运行[`array_unique`](http://php.net/manual/en/function.array-unique.php)它，最后使用循环创建 html 输出字符串，就像你现在做的那样。

# oracle - 绑定 @NumberFormat ，设置逗号作为小数点分隔符？

> ID：12386258
> 
> 赞同：0
> 
> 时间：2012-09-12T10:34:23.860
> 
> 标签：oracle, hibernate, spring-mvc

我的问题是我从数据库中读取数字（BigDecimal），并用 DOT 作为小数点分隔符来查看它们，但我想用 COMMA 来查看它们。我使用了以下代码：
@ NumberFormat (style = Style.NUMBER, pattern = "##,###,###.##")
private BigDecimal number;

我的应用程序具有以下架构：
oracle db - hibernate - spring mvc

我需要自动转换，而无需使用 DecimalFormat 手动转换为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:38:41.607

BigDecimal 是 BigDecimal。它没有任何内在格式。

此外，绝对**不是**像 Hibernate 这样的 ORM 的工作来按照您希望的方式显示数据。将您的实体视为数据，并在需要显示数据时在表示层中使用适当的 NumberFormat。数字格式与持久层无关。

编辑：我误解了这个问题：

NumberFormat 取决于语言环境。这意味着`,`表示“与区域设置关联的组分隔符”，并`'.'`表示“与区域设置关联的小数分隔符”。

如果您想要一个点作为组分隔符和一个逗号作为小数分隔符，请使用默认情况下将它们作为分隔符的区域设置，或者使用 DecimalFormat 并将[DecimalFormatSymbols 设置](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html#setDecimalFormatSymbols%28java.text.DecimalFormatSymbols%29)为适当的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:20:19.163

我这样解决了：

```
@InitBinder
public void initBinder(HttpServletRequest request, ServletRequestDataBinder binder) throws Exception {  
    DecimalFormat df =new DecimalFormat();  
    DecimalFormatSymbols dfs = new DecimalFormatSymbols();  
    dfs.setDecimalSeparator(',');  
    df.setGroupingUsed(false);  
    df.setDecimalFormatSymbols(dfs);  
    df.setMaximumFractionDigits(32);  
    df.setMaximumIntegerDigits(32);  
    binder.registerCustomEditor(BigDecimal.class, new CustomNumberEditor(BigDecimal.class,df, true));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T21:39:47.047

类似于@Tostis 的解决方案，但使用全局应用的@InitBinder：

```
@ControllerAdvice
public class GlobalBindingInitializer {

  @InitBinder
  public void initBigDecimalBinder(WebDataBinder binder) throws Exception {
    DecimalFormat df = new DecimalFormat();
    DecimalFormatSymbols dfs = new DecimalFormatSymbols();
    dfs.setGroupingSeparator(',');
    df.setDecimalFormatSymbols(dfs);
    binder.registerCustomEditor(BigDecimal.class, new CustomNumberEditor(BigDecimal.class, df, true));
  }
} 
```

# php - 有效的 SQL 语法？

> ID：12386261
> 
> 赞同：0
> 
> 时间：2012-09-12T10:34:31.917
> 
> 标签：php, sql

我有一个包含三个选项值的选择框。当用户选择一个时，我想使用 ajax 自动更新数据库中的该值。这个 SQL 对我想要实现的目标有效吗？

```
UPDATE 
  Orders 
SET 
  status='".$_POST[order_status]['.$i.']."' 
WHERE 
  ID='".$_POST[order_no]      ['.$i.']."'; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:40:48.353

像这样试试

```
$sql ="UPDATE Orders SET
status='".$_POST['order_status'][$i]."' 
WHERE ID='".$_POST['order_no'][$i]."' "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:35:22.277

您错误地使用了字符串中的 concats：

```
UPDATE Orders 
    SET status='".$_POST['order_status'][$i]."' 
    WHERE ID='".$_POST['order_no'][$i]."'; 
```

原因是您已经在拆分字符串并且想要使用数组内部的值。

你有一个字符串：

```
UPDATE Orders SET status=' 
```

并且您正在将变量连接到它：

```
$_POST['order_status'][$i] 
```

等等...

您在字符串之间使用 concat，并且不需要在您包含的数组中使用它。

需要注意的是，`$_POST`在查询中使用数据是危险的。你真的应该使用准备好的语句——这意味着你可以安全地绑定变量。

# python - PySide “hello world”：py2exe/pyinstaller/cx_freeze 和访问冲突

> ID：12386263
> 
> 赞同：1
> 
> 时间：2012-09-12T10:34:35.703
> 
> 标签：python, py2exe, pyside, pyinstaller, cx-freeze

我正在尝试使用 PySide 构建一个非常基本的可执行文件（Windows）。以下脚本在解释器中正常运行（Python 2.7、PySide 1.1.2）

```
#!/usr/bin/python

import sys

sys.stdout = open("my_stdout.log", "w")
sys.stderr = open("my_stderr.log", "w")

import PySide.QtGui
from PySide.QtGui import QApplication
from PySide.QtGui import QMessageBox

# Create the application object
app = QApplication(sys.argv)

# Create a simple dialog box
msgBox = QMessageBox()
msgBox.setText("Hello World - using PySide version " + PySide.__version__)
msgBox.exec_() 
```

我尝试了 3 种方法（py2exe、pyinstaller 和 cx_freeze），所有 3 个生成的可执行文件都无法执行。出现了两个 stdout/stderr 文件，所以我发现第一个 PySide 导入使一切都失败了。（未处理的异常/访问冲突）

我用depends（[http://www.dependencywalker.com/](http://www.dependencywalker.com/)）分析了可执行文件，一切看起来都正确链接。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:12:46.420

您需要将 atexit 模块添加为包含。来源：http: [//qt-project.org/wiki/Packaging_PySide_applications_on_Windows](http://qt-project.org/wiki/Packaging_PySide_applications_on_Windows)

（顺便说一句，Linux 也是如此）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:33:58.620

感谢您的帮助。实际上，这并没有改变任何东西：/但是，我找到了解决问题的方法：如果添加`from PySide import QtCore, QtGui`，则可执行文件（使用 pyinstaller）确实可以工作！

# c++ - 检查两个 TDateTime 变量

> ID：12386266
> 
> 赞同：1
> 
> 时间：2012-09-12T10:34:51.583
> 
> 标签：c++, c++builder, vcl, datediff, tdatetime

我正在使用 C++ Builder 并有以下问题：

我想检测一个日期/时间是否晚于另一个日期/时间，以及晚了多少。

这是我当前的代码：

```
TDateTime testFirstDate("11/09/2012");
TDateTime testFirstTime("14:00");

TDateTime testSecondDate("12/09/2012");
TDateTime testSecondTime("16:00");

TDateTime testCombined1 = testFirstDate + testFirstTime;
TDateTime testCombined2 = testSecondDate + testSecondTime;

TDateTime testDateDifference = testSecondDate - testFirstDate;
std::cout << testDateDifference; 
```

在上面的示例中，打印出以下内容：31/12/1899

这两个值之间的差异只有 1 天。为什么要打印：31/12/1899，而不是类似：1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:08:48.327

差别是 1 天 22 小时。

`TDateTime`在 Delphi 和 C++ Builder 中是双精度数，其中整个部分（小数点左侧的部分）存储自 1899 年 12 月 30 日基准日期以来的天数（见下文注释），小数部分（小数点右边的部分）是时间。

您在减法后看到的 1899 是因为您只有不到一整天，因此数字的整个部分为零，正如我提到的，零日期是 1899 年 12 月的基准日期。因为你的日期比基准日期晚 1 天（当表示为 时`TDateTime`，日期解释为 1899 年 12 月 31 日。

22 小时的时间部分大约是`0.9167`（实际上是`0.916666666666667`），它代表一天的 22/24。

Delphi 的运行时库包含一个名为 的单元`DateUtils`，IIRC 也可用于 C++ Builder（它有一个头文件），其中包含可能对您有所帮助的函数，就像[`DaysBetween`](http://docwiki.embarcadero.com/Libraries/en/System.DateUtils.DaysBetween)您可能会发现有用的那样。[这里](http://docwiki.embarcadero.com/CodeExamples/en/DateTimeCompare_%28C++%29)有可用的 C++ 示例。

至于相等性（一个日期在另一个日期之后），您可以使用标准`>`、`<`、`>=`、`<=`、`!=`和`==`运算符。我也在下面证明了这一点。

这是一个可以解释的简单示例（在 Delphi 中，因为我没有在这台机器上安装 C++ Builder）：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils, DateUtils;

var
  StartDate, EndDate, Diff: TDateTime;
begin
  try
    { TODO -oUser -cConsole Main : Insert code here }
    // Base date, formatted in US date format
    WriteLn('BaseDate: ', FormatDateTime('mm/dd/yyyy hh:nn:ss', 0));

    StartDate := EncodeDateTime(2012, 9, 11, 14, 0, 0, 0);
    EndDate := EncodeDateTime(2012, 9, 12, 16, 0, 0, 0);
    Diff := EndDate - StartDate;

    WriteLn('Diff as String: ', DateToStr(Diff));
    WriteLn('Diff as Double: ', Diff);
    WriteLn('DaysBetween: ', DaysBetween(EndDate, StartDate));

    // Equality
    WriteLn('EndDate after StartDate`, EndDate > StartDate);
    RegEx.Free;
    ReadLn;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

这会产生以下输出：

```
BaseDate: 12/30/1899 00:00:00
Diff as String: 12/31/1899
Diff as Double:  1.08333333332848E+0000
DaysBetween: 1
EndDate after StartDate: TRUE 
```

注意：基准日期是由 Microsoft 为 COM 建立的，出于兼容性原因，Delphi/C++ Builder 采用了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:42:59.010

您可以使用正常的`-`, `+`, `<`,`>`和with 。`==``=``TDateTime`

因此，要查看一个日期是否领先于另一个日期，例如，您可以将它们相减并查看结果是大于还是小于零。

# php - PHP：“最大执行时间”立即

> ID：12386269
> 
> 赞同：0
> 
> 时间：2012-09-12T10:35:05.757
> 
> 标签：php, execution-time

我目前正在运行一个基于我们自己的框架的大型网站。上传图片时，我们偶尔会 `Maximum execution time of 30 seconds exceeded`在几分之一秒内得到一张。所以我不认为实际上超过了执行时间。

有谁知道可能导致这种情况的原因？

PHP版本：5.3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:24:10.250

增加 php.ini 文件中的执行时间。在 php.ini 文件中搜索“max_execution_time = 600”。默认值为 600。

如果您使用的是 linux/ubuntu，您的 php.ini 文件将位于 lampp/etc/php.ini

# php - 如何使用 phpUnit 对我的子类化 zend 框架请求和响应对象进行单元测试

> ID：12386270
> 
> 赞同：2
> 
> 时间：2012-09-12T10:35:07.190
> 
> 标签：php, zend-framework, phpunit

我正在开发一个允许用户通过 SMS 文本消息进行交互的项目。我对 Zend Framework 的请求和响应对象进行了子类化，以从 SMS API 获取请求，然后发回响应。当我通过开发环境“测试”它时它可以工作，但我真的很想进行单元测试。

但是在测试用例类中，它没有使用我的请求对象，而是使用 Zend_Controller_Request_HttpTestCase。我很确定我会对响应对象有同样的问题，只是我还没有到那个时候。

我的简化测试类：

```
class Sms_IndexControllerTest extends Zend_Test_PHPUnit_ControllerTestCase {

    ...

    public function testHelpMessage() {

        // will output "Zend_Controller_Request_HttpTestCase"
        print get_class($this->getRequest());

        ...

    }
} 
```

如果我在运行测试之前覆盖请求和响应对象，如下所示：

```
public function setUp()
{
    $this->bootstrap = new Zend_Application(APPLICATION_ENV, 
                      APPLICATION_PATH . '/configs/application.ini');
    parent::setUp();
    $this->_request = new Sms_Model_Request();
    $this->_response = new Sms_Model_Response();
} 
```

在调用前端控制器进行调度之前，我无法使用 Zend_Controller_Request_HttpTestCase 中的方法（如 setMethod 和 setRawBody）来设置我的测试。

在对请求和响应对象进行子类化后，如何对控制器进行单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:04:47.480

您可以尝试在 Sms_IndexControllerTest 中定义 getRequest 和 getResponse 方法，例如：

```
public function getRequest()
{
    if (null === $this->_request) {
        $this->_request = new Sms_Model_Request;
    }

    return $this->_request;
}

public function getResponse()
{
    if (null === $this->_response) {
        $this->_response = new Sms_Model_Response;
    }
    return $this->_response;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:03:57.467

我最终做的是将请求和响应测试用例对象的整个代码复制到我自己的请求和响应类的子类版本中。这是请求对象的要点：

子类化 Request 和 Response 对象并粘贴 RequestTestCase 的整个代码：

```
class MyApp_Controller_Request_SmsifiedTestCase 
                        extends MyApp_Controller_Request_Smsified {
   // pasted code content of RequestTestCase
} 
```

然后在 ControllerTest 的 setUp() 函数中设置它们：

```
 class Sms_IndexControllerTest extends Zend_Test_PHPUnit_ControllerTestCase {
    {

        ...

        public function setUp()
        {
            $this->bootstrap = 
                    new Zend_Application(APPLICATION_ENV, APPLICATION_PATH 
                                            . '/configs/application.ini');
            parent::setUp();

            $this->_request = 
                    new MyApp_Controller_Request_SmsifiedTestCase();
            $this->_response = 
                    new MyApp_Controller_Response_SmsifiedTestCase();
        }

        ...
     } 
```

然后它起作用了。

# ajax - AJAX 上的 301 重定向 - 重定向？

> ID：12386272
> 
> 赞同：5
> 
> 时间：2012-09-12T10:35:09.460
> 
> 标签：ajax, redirect

我有一个对服务器端点的 AJAX 调用，该端点执行 301 重定向到同一页面，但带有斜杠。

浏览器在使用 AJAX 调用时会遵循重定向还是忽略它们？就我而言，它不遵循它们，但我认为它可能来自服务器配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:47:34.590

如果您使用的是 jquery，您可以查看以下问题来实现它。默认情况下，jQuery（以及大多数带有 Ajax 的库）默认情况下**不遵循**重定向：

[如何在 jQuery Ajax 调用后管理重定向请求](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)

[如何使用 jQuery 防止 ajax 请求跟随重定向](https://stackoverflow.com/questions/8238727/how-to-prevent-ajax-requests-to-follow-redirects-using-jquery)

[处理 jquery ajax 重定向](https://stackoverflow.com/questions/1804928/handle-jquery-ajax-redirect)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-01T05:57:44.323

也许这个答案有点晚了，但我对 ajax 请求的 301 响应也有同样的问题。解决方案非常简单：

apache重写规则是这样的：

```
RewriteRule ^([^/]\w+)/?$ index.php?%{QUERY_STRING} [L,E=MODULE:$1] 
```

您的 XHR-Request 网址看起来像这样：

```
/this/is/a/canonical/url + '?param=1&param=2...' 
```

如果您不使用直接文件调用 (fi *.php) 并改写为规范 URL（看起来像没有 fi *.php 的目录路径），它将导致 301 永久移动。

要解决此问题，只需将 / 添加到您的 XHR-Request-URL 中，如下所示：

```
/this/is/a/canonical/url + '/' + '?param=1&param=2...' 
```

也许这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-31T02:11:59.757

我也遇到了这个问题，关于尾部斜杠的建议让我思考......我在我的 Web.Config 中有一个重写规则，使所有内容都小写，这就是我的 AJAX 调用搞砸的原因。我正在发布到 GetResults（显示为 301），而我的重写器（出于某种未知原因？）正在将其更改为小写的 getresults GET，从而导致 404。

希望这可能对其他人有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-28T09:23:35.897

根据 jQuery 的 API 文档（[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)），`async:false`（又名同步模式）不支持跨域和`dataType: "jsonp"`请求。

# database - 在本地计算机上创建 Godaddy DB 备份时出错

> ID：12386273
> 
> 赞同：1
> 
> 时间：2012-09-12T10:35:09.790
> 
> 标签：database, sql-server-2005, backup

我需要在 GoDaddy 上恢复我的更新数据库。

我有来自 Godaddy 的旧数据库备份（ypldb.bak）。备份（ypldb.bak）是从 Godaddy 主机帐户创建的。

我必须对此数据库备份文件进行一些更新。所以我在我的本地机器上恢复了这个备份文件 [SqlServer 2005]。并完成了更新。

现在我想在我的本地机器上创建这个更新的数据库的备份，这样我就可以在 go daddy 主机帐户上恢复新创建的备份文件。

但是在本地机器上创建备份的过程中会出错。错误是——</p>

```
TITLE: Microsoft SQL Server Management Studio Express
------------------------------

Backup failed for Server 'ARCHANA-PC'.  (Microsoft.SqlServer.Express.Smo)

For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=9.00.2047.00&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates.FailedOperationExceptionText&EvtID=Backup+Server&LinkId=20476

------------------------------
ADDITIONAL INFORMATION:

System.Data.SqlClient.SqlError: Failed to pause catalog for backup. Backup was aborted. (Microsoft.SqlServer.Express.Smo)

For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=9.00.2047.00&LinkId=20476

------------------------------
BUTTONS:

OK
------------------------------ 
```

我试图从以下链接中找到解决方案，但没有找到任何有用的解决方案 [http://social.msdn.microsoft.com/Forums/en-US/sqlkjmanageability/thread/77f9921d-338d-49f0-addb-5e11178f4ab9/](http://social.msdn.microsoft.com/Forums/en-US/sqlkjmanageability/thread/77f9921d-338d-49f0-addb-5e11178f4ab9/)

建议我一些有用的解决方案，以便我可以尝试尽快进行数据库备份

# ajax - 带有 ajax 的 commandLink 在 JSF2 中不起作用

> ID：12386279
> 
> 赞同：1
> 
> 时间：2012-09-12T10:35:37.643
> 
> 标签：ajax, jsf-2

我有 f:ajax 标签的问题。单击 commandLink 后，我想显示和隐藏一些数据，但出现错误：

![来自浏览器的错误](../Images/e30d7c37b9ca62889719425e1725b923.png)

我的代码：

```
<h:form prependId="false" id="contactDataForm">
    <h:commandLink value="Edit" action="#{cc.attrs.userBB.showHideEditForm()}">
        <f:ajax render="editableContactData notEditableContactData"/>
    </h:commandLink>
    <h:panelGroup id="notEditableContactData" rendered="#{cc.attrs.userBB.show == false}">
        test1
    </h:panelGroup>
        test2
    </h:panelGroup>
</h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:04:20.967

我认为你得到的错误是因为你试图引用不是从你的元素呈现的元素`f:ajax`，而是：参考`h:panelGroup`可能会或可能不会呈现的包装器

包装`notEditableContactData`，所以基本上：

尝试改变

```
<h:panelGroup id="notEditableContactData" rendered="#{cc.attrs.userBB.show == false}">
    test1
</h:panelGroup> 
```

进入

```
<h:panelGroup id="notEditableContactData" rendered="#{cc.attrs.userBB.show == false}">
   <h:panelGroup rendered="#{cc.attrs.userBB.show == false}">
        test1
    </h:panelGroup>
</h:panelGroup> 
```

`h:panelGroup`对另一个也做同样的事情

看看我的这个答案[你能从 ap:ajax 监听器更新一个 h:outputLabel 吗？](https://stackoverflow.com/a/10370268/617373)

# c# - 将 linq 查询另存为数据表

> ID：12386284
> 
> 赞同：0
> 
> 时间：2012-09-12T10:35:49.767
> 
> 标签：c#, asp.net-mvc, linq, datatable

在c#MVC中，我需要在数据表中得到如下的“结果”（var）。

```
var allCompanies = objentity.ExecuteFunction<SearchAvailEmployees_Result>("SearchAvailEmployees", lstParam.ToArray())
                            .ToList();

var result = from c in allCompanies select new[] { 
                            c.LastName, 
                            c.FirstName, 
                            c.Phone, 
                            c.City, 
                            c.PositionApplied, 
                            c.Status, 
                            Convert.ToString(c.CallDate.Value.ToShortDateString()), 
                            Convert.ToString(c.CellOrPager), 
                            c.Gender 
                        }; 
```

我尝试了以下代码，但它不起作用。它给出的错误为

> “无法将类型 'System.Collections.Generic.IEnumerable' 隐式转换为 'System.Collections.Generic.IEnumerable'。存在显式转换（您是否缺少演员表？）”

```
IEnumerable<DataRow> query = from c in allCompanies select new[] { 
                                            c.LastName, 
                                            c.FirstName, 
                                            c.Phone, 
                                            c.City, 
                                            c.PositionApplied, 
                                            c.Status, 
                                            Convert.ToString(c.CallDate.Value.ToShortDateString()), 
                                            Convert.ToString(c.CellOrPager), 
                                            c.Gender 
                                        };

DataTable boundTable = query.CopyToDataTable<DataRow>(); 
```

将 linq 查询结果保存在数据表中的任何替代解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:53:06.113

我就是这样做的：

首先我声明一个新的`DataTable`并添加列，在这个：

```
DataTable dt = new DataTable();
dt.Columns.Add("FirstName");
dt.Columns.Add("LastName");
DataRow row = null; 
```

现在我执行所需的查询：

```
var query = from c in allCompanies select { c.LastName, c.FirstName}; 
```

现在我只需遍历查询并填写一个`DataTable`：

```
foreach (var rowObj in query)
{
    row = dt.NewRow();
    dt.Rows.Add(rowObj.FirstName, rowObj.LastName);
}
return dt; 
```

仍然在我的查询中，我正在使用“加入”语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:57:23.987

首先，`DataTable`使用正确的模式创建：

```
var dataTable = new DataTable();
            dataTable.Columns.Add("LastName", typeof (string));
            dataTable.Columns.Add("FirstName", typeof(string));
            // Add more columns 
```

二、选择值对象数组：

```
var result = allCompanies.Select(c => new object[] {
                    c.LastName, 
                    c.FirstName, 
                    c.Phone, 
                    c.City, 
                    c.PositionApplied, 
                    c.Status, 
                    Convert.ToString(c.CallDate.Value.ToShortDateString()), 
                    Convert.ToString(c.CellOrPager), 
                    c.Gender 
                }).ToList(); 
```

第三，循环创建新行`DataTable`并为新行赋值：

```
result.Foreach(array => {
     var row = dataTable.NewRow();
     row.ItemArray = array;
     dataTable.Rows.Add(row);
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:41:49.540

你应该在 new 之后删除 [] ，就像

```
var result = from c in allCompanies 
             select new { c.LastName, c.FirstName, c.Phone, c.City, 
             c.PositionApplied, c.Status, 
             CallDate = Convert.ToString(c.CallDate.Value.ToShortDateString()), 
             CellOrPager = Convert.ToString(c.CellOrPager), c.Gender }; 
```

在此处创建数据表

```
var dataTable = new DataTable();
dataTable.Columns.AddRange( new DataColumn[]{ 
    new DataColumn("LastName" , typeof(string)),
    new DataColumn("FirstName" , typeof(string)),
    new DataColumn("Phone" , typeof(string)),
    new DataColumn("City" , typeof(string)),
    new DataColumn("PositionApplied" , typeof(string)),
    new DataColumn("Status" , typeof(string)),
    new DataColumn("CallDate" , typeof(string)),
    new DataColumn("CellOrPager" , typeof(string)),
    new DataColumn("Gender" , typeof(string))
}); 
```

使用此结果填充 DataTable

```
result.ToList().ForEach(x=>{
   var row = dataTable.NewRow();

   row.["LastName"] = x.LastName;
   row.["FirstName"] = x.FirstName;
   row.["Phone"] = x.Phone;
   row.["City"] = x.City;
   row.["PositionApplied"] = x.PositionApplied;
   row.["Status"] = x.Status;
   row.["CallDate"] = x.CallDate;
   row.["CellOrPager"] = x.CellOrPager;
   row.["Gender"] = x.Gender;

   dataTable.Rows.Add(row);
}); 
```

# firefox - HTML5 AppCache - 在 Firefox 中请求更多空间

> ID：12386286
> 
> 赞同：0
> 
> 时间：2012-09-12T10:36:05.890
> 
> 标签：firefox, offline-caching, html5-appcache

是否可以要求 Firefox（版本 15）用户为 AppCache 提供更多空间（> 5MB）？

我们计划为仅使用 Firefox 15（或 IE8）和整个产品数据库（带有一些属性和图像的 800 种产品）的用户和订单列表生成器开发一个 WebApp，该用户应该能够离线工作。

任何基于 Firefox 15 或 IE8 的帮助或其他解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:34:28.777

`browser.cache.offline.capacity`似乎是你想要的偏好。默认是500M，应该够了！

转到`about:config`并在搜索框中输入“离线”以访问首选项。

[http://www.tweakguides.com/Firefox_10.html](http://www.tweakguides.com/Firefox_10.html)

mozillazine 中有更多信息，但目前已关闭；使用谷歌的缓存： [http ://webcache.googleusercontent.com/search?q=cache:Y607-mxIMCEJ:kb.mozillazine.org/Browser.cache.offline.capacity+&cd=1&hl=en&ct=clnk&gl=us&client=firefox-测试版](http://webcache.googleusercontent.com/search?q=cache:Y607-mxIMCEJ:kb.mozillazine.org/Browser.cache.offline.capacity+&cd=1&hl=en&ct=clnk&gl=us&client=firefox-beta)

# svn - 本地文件无法从 SVN 还原为干净副本

> ID：12386287
> 
> 赞同：0
> 
> 时间：2012-09-12T10:36:13.830
> 
> 标签：svn

我的项目中的三个文件遇到了一个非常奇怪的问题。它们都是只包含两行的 PHP 文件：

```
<php
require_once 'other file'; 
```

这些文件以前是符号链接，但它们已在存储库中替换为真正的 PHP 文件，因为符号链接在 Windows 上不起作用，而我的工作站操作系统是 Windows 7（本地测试环境）。

奇怪的是，在 SVN 中，文件正是如此，但`svn status`它们显示为已修改 ( `~`)。如果我尝试`svn revert`它们，生成的文件只包含`<php`而不包含该`require_once`行！
如果我在本地删除文件并使用 svn update（也尝试过 --force）/revert/cleanup，也会发生同样的事情。似乎没有任何帮助。这可能是什么问题以及如何解决？

# azure-storage - Azure 云服务部署错误

> ID：12386290
> 
> 赞同：4
> 
> 时间：2012-09-12T10:36:24.593
> 
> 标签：azure-storage, azure-web-roles

我试图在云中部署一个适度规模的项目作为服务，

它给了我一个致命错误，我无法弄清楚错误和原因的含义是什么

**Azure 部署堆栈跟踪**：

```
在更新或升级操作期间，角色实例被回收了一定次数。
这表明您的服务的新版本或您提供的配置设置
配置服务时阻止角色实例运行。
最可能的原因是您的代码引发了未处理的异常。
请考虑修复您的服务或更改您的配置设置，以便
角色实例不会抛出未处理的异常。
然后开始另一个更新或升级操作。直到您开始另一次更新或升级
操作，Windows Azure 将继续尝试将您的服务更新到新版本或
您提供的配置
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:14:11.767

对于这种部署错误，您最好先尝试在 Azure Compute Emulator 中运行您的应用程序，然后再部署到云中。因此您可以获得未处理的异常信息，也不要忘记在您的代码中使用 try catch。

# java - 如何在 JNI 方法中创建 jcharArray？

> ID：12386293
> 
> 赞同：1
> 
> 时间：2012-09-12T10:36:29.993
> 
> 标签：java, android, c, java-native-interface

我想将`char`C 中的一个数组转换`jcharArray`为 JNI 接口以将此数组从 C 传递到 Java。

我找到了一个我目前正在使用的简短教程：http: [//joshuaoutwater.info/blog/ ?p=10](http://joshuaoutwater.info/blog/?p=10)

在本教程`jcharArray resultBuffer1`中作为参数从 Java 传递。`resultBuffer1`问题是我不知道在调用 JNI 方法时必须有多大。所以我需要在我的 JNI 方法中创建这个具有特定大小的 jcharArray。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:43:21.233

试试看：

```
jcharArray charArr = (*env)->NewCharArray(env, size); 
```

# r - R对聚合函数的帮助

> ID：12386295
> 
> 赞同：1
> 
> 时间：2012-09-12T10:36:42.767
> 
> 标签：r, dataframe, aggregate-functions, aggregate

对于我的问题，我创建了一个虚拟数据框：

```
 set.seed(007)
 DF <- data.frame(a = rep(LETTERS[1:5], each=2), b = sample(40:49), c = sample(1:10))
 DF
   a  b  c
1  A 49  2
2  A 43  3
3  B 40  7
4  B 47  1
5  C 41  9
6  C 48  8
7  D 45  6
8  D 42  5
9  E 46 10
10 E 44  4 
```

如何在列上使用聚合函数`a`，例如，对于“A”，计算以下值：49-43 / 2+3？

我开始喜欢：

```
aggregate(DF, by=list(DF$a), FUN=function(x) {

  ...

}) 
```

我遇到的问题是我不知道如何访问我尝试过的 4 个不同的单元格 49、43、2 和 3`x[[1]][1]`以及类似的东西，但没有让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:53:56.910

在内部`aggregate`，该函数`FUN`独立应用于数据的每一列。在这里，您想使用一个将两列作为输入的函数，因此，您不能先验地使用`aggregate`它。

相反，您可以`ddply`从`plyr`包中使用：

```
ddply(DF, "a", summarize, res = (b[1] - b[2]) / sum(c))
#   a        res
# 1 A  1.2000000
# 2 B -0.8750000
# 3 C -0.4117647
# 4 D  0.2727273
# 5 E  0.1428571 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T12:37:36.990

当您聚合时，`FUN`参数可以是您想要的任何东西。请记住，传递的值将是 a `vector`（如果 x 是一列）或一点点`data.frame`或`matrix`（如果 x 大于一）。但是，`aggregate`不允许您访问多列参数的列。例如。

```
aggregate( . ~ a, data = DF, FUN = function(x) diff(x[,1]) / sum(x[,2]) ) 
```

即使我使用了`.`（它采用了我在其他地方没有使用的所有 DF 列），它也会失败并出现错误。要查看`aggregate`在那里尝试做什么，请查看以下内容。

```
aggregate( . ~ a, data = DF, FUN = sum ) 
```

两列 b 和 c 是聚合的，但从第一次尝试中我们知道您不能执行单独访问每一列的操作。因此，严格遵守聚合需要两遍和三行代码。

```
diffb <- aggregate( b ~ a, data = DF, FUN = diff )
Y <- aggregate( c ~ a, data = DF, FUN = sum )
Y$c <- diffb$b / Y$c 
```

现在 Y 包含您想要的结果。

该`by`函数比它更简单`aggregate`，它所做的只是`data.frame`使用索引拆分原始文件，然后应用该`FUN`函数。

```
l <- by( data = DF, INDICES = DF$a, FUN = function(x) diff(x$b)/sum(x$c), simplify = FALSE )
unlist(l) 
```

`data.frame`如果你真的想要一个，你必须做一些事情才能将结果恢复到 a中。

```
data.frame(a = names(l), x = unlist(l)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T12:46:49.970

使用`data.table`可能更快更容易。

```
library(data.table)
DT <- data.table(DF)
DT[, (-1*diff(b))/sum(c), by=a]
  a         V1
1: A  1.2000000
2: B -0.8750000
3: C -0.4117647
4: D  0.2727273
5: E  0.1428571 
```

使用聚合，不太好。我没有更好的方法来使用`aggregate`:(但这是一个尝试。

```
B <- aggregate(DF$b, by=list(DF$a), diff)
C <- aggregate(DF$c, by=list(DF$a), sum)
data.frame(a=B[,1], Result=(-1*B[,2])/C[,2])
  a     Result
1 A  1.2000000
2 B -0.8750000
3 C -0.4117647
4 D  0.2727273
5 E  0.1428571 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T12:49:48.760

一个`data.table`解决方案 - 时间和内存的效率。

```
library(data.table)
DT <- as.data.table(DF)

DT[, list(calc = diff(b) / sum(c)), by = a] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T11:00:25.770

您可以使用基本[`by()`](http://stat.ethz.ch/R-manual/R-patched/library/base/html/by.html)功能：

```
listOfRows <- 
by(data=DF,
   INDICES=DF$a,
   FUN=function(x){data.frame(a=x$a[1],res=(x$b[1] - x$b[2])/(x$c[1] + x$c[2]))})

newDF <- do.call(rbind,listOfRows) 
```

# c# - 在浏览器窗口中显示 *doc,*xls,*pdf

> ID：12386299
> 
> 赞同：0
> 
> 时间：2012-09-12T10:36:59.500
> 
> 标签：c#, asp.net, .doc

我想在浏览器窗口中显示 *doc,*xls,*pdf 而不是他们尊敬的应用程序。我尝试了以下代码，但没有运气，它提示我保存/打开对话框，而不是在浏览器中显示

```
 //Set the appropriate ContentType.
    Response.ContentType = "Application/msword";
    //Get the physical path to the file.
    string FilePath = MapPath("wordfile.doc");
    //Write the file directly to the HTTP content output stream.
    Response.AppendHeader("Content-Disposition", "inline;filename=" + "wordfile.doc");
    Response.WriteFile(FilePath);
    Response.End(); 
```

请帮忙
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:47:48.377

对于任何这些专有格式，您需要浏览器插件/扩展或 IE 的 ActiveX
我不确定它是否适用于办公格式。
对于 PDF 设置`content type to "application/pdf"` 和`Content-Disposition to inline`应该工作。

# apache-flex - Flex & Maven：如何在 pom.xml 中升级 playerglobal 版本

> ID：12386300
> 
> 赞同：3
> 
> 时间：2012-09-12T10:37:00.203
> 
> 标签：apache-flex, maven, flexmojos

我目前正在开发一个 flex 应用程序，并且我已经使用本机光标支持在特定条件下动态更改光标。

我的应用程序使用 Flex Sdk 4.1.0.16076 运行，默认情况下使用 flash player 10.0。我已在项目首选项中将此版本升级到 10.2，以便使用 MouseCursorData 类。

它在 Eclipse 中工作正常，但我使用 maven 进行依赖，并且在进行 maven 构建时出现编译错误，说找不到 MouseCursorData 类。

这很正常，因为我在依赖项中使用了播放器 10。所以我尝试更新我的 pom.xml 文件以将播放器升级到 10.2：

```
 <plugin>
            <groupId>org.sonatype.flexmojos</groupId>
            <artifactId>flexmojos-maven-plugin</artifactId>
            <configuration>
                <targetPlayer>10.0</targetPlayer>
                <compiledLocales>
                    <locale>en_US</locale>
                    <locale>fr_FR</locale>
                </compiledLocales>
                <warnings>
                    <noConstructor>false</noConstructor>
                </warnings>
                <sourceFile>Opale.mxml</sourceFile>
                <generateHtmlWrapper>true</generateHtmlWrapper>
                <contextRoot>opale-web</contextRoot>
                <services>${basedir}/src/main/resources/services-config.xml</services>
                <output>target/opale-ui.swf</output>
            </configuration>
            <version>${flexmojos.version}</version>
            <extensions>true</extensions>
            <dependencies>
                <dependency>
                    <groupId>com.adobe.flex</groupId>
                    <artifactId>compiler</artifactId>
                    <version>${flex.sdk.version}</version>
                    <type>pom</type>
                </dependency>
            </dependencies>             
        </plugin> 
```

首先，我将 flex mojo 插件中的 targetPlayer 从 10.0 更改为 10.2。然后我得到编译错误：

[错误] 无法在项目 opale-ui 上执行目标 org.sonatype.flexmojos:flexmojos-maven-plugin:3.9:compile-swf (default-compile-swf)：TargetPlayer 和 playerglobal 依赖版本不匹配！目标玩家：10.2，玩家全局：10.0 -> [帮助 1]

所以，我有一个强制 playerglobal 版本的依赖：

```
<dependency>
    <groupId>com.adobe.flex.framework</groupId>
    <artifactId>playerglobal</artifactId>
    <version>${flex.sdk.version}</version>
    <classifier>10.2.0</classifier>
    <type>swc</type>
</dependency> 
```

然后，我有以下错误：

```
Downloading:     http://repo.maven.apache.org/maven2/com/adobe/flex/framework/playerglobal/4.1.0.16076/playerglobal-4.1.0.16076-10.2.0.swc
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 19.698s
[INFO] Finished at: Wed Sep 12 12:29:57 CEST 2012
[INFO] Final Memory: 9M/124M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project opale-ui: Could not resolve dependencies for     project com.igc.opale:opale-ui:swf:1.9-SNAPSHOT: Could not transfer artifact     com.adobe.flex.framework:playerglobal:swc:10.2.0:4.1.0.16076 from/to jboss     (http://repository.jboss.org/maven2/): Access denied to:     http://repository.jboss.org/maven2/com/adobe/flex/framework/playerglobal/4.1.0.16076/playerglobal-4.1.0.16076-10.2.0.swc, ReasonPhrase:Forbidden. -> [Help 1] 
```

我是 Maven 新手，所以也许我做得很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T12:27:49.293

您可以在插件中配置它

```
<plugins>
    <plugin>
        <groupId>org.sonatype.flexmojos</groupId>
        <artifactId>flexmojos-maven-plugin</artifactId>
        <extensions>true</extensions>
        <configuration>
            <headlessServer>true</headlessServer>
            <verboseStacktraces>true</verboseStacktraces>

            <swfVersion>11</swfVersion>
            <targetPlayer>10.2</targetPlayer>
        ...
        </configuration>
    </plugin>
</plugins> 
```

和依赖：

```
<dependency>
    <groupId>com.adobe.flex.framework</groupId>
    <artifactId>playerglobal</artifactId>
    <version>4.5.1.21328</version>
    <classifier>10.2</classifier>
    <type>swc</type>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:30:54.003

如果您搜索 sonatype 存储库，您会发现您正在寻找的实际依赖项是：

```
<dependency>
 <groupId>com.adobe.flex.framework</groupId>
 <artifactId>playerglobal</artifactId>
 <version>4.1.0.16076</version>
 <classifier>10</classifier>
 <type>1.swc</type>
</dependency> 
```

注意**类型**是**1.swc**，我相信这是为了弥补早期版本的 SDK 的不足。

# scala - 将对象添加到以这些对象的成员为键的映射中

> ID：12386301
> 
> 赞同：2
> 
> 时间：2012-09-12T10:37:02.463
> 
> 标签：scala, map

我正在尝试找到一种（功能性）方法将对象集合添加到以这些对象的成员为键的映射中。

假设我有以下对象（它们都是同一类 O 的所有实例）：

```
o1(a = 1, b = x)
o2(a = 1, b = y)
o3(a = 2, b = z) 
```

我想生成一个包含以下元组的`Map`键控成员：`a`

```
(1, List(o1, o2))
(2, List(o3)) 
```

现在我显然可以迭代地完成它，遍历我的初始列表中的每个对象并在我继续进行时添加它们。但我觉得我错过了一种轻松做到这一点的实用方法。我一直在努力使用地图、平面地图和过滤器来尝试实现这一目标，到目前为止还没有结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:43:41.310

`groupBy`是你想要的：

```
scala> val os = List(O(1,2), O(1,3), O(2,4))
os: List[O] = List(O(1,2), O(1,3), O(2,4))

scala> os.groupBy(_.a)
res3: scala.collection.immutable.Map[Int,List[O]] = Map(1 -> List(O(1,2), O(1,3)), 2 -> List(O(2,4))) 
```

# .net - Json.Net Compact Framework 反序列化性能

> ID：12386306
> 
> 赞同：1
> 
> 时间：2012-09-12T10:37:27.407
> 
> 标签：.net, vb.net, serialization, json.net

我正在测试[Json.Net](http://james.newtonking.com/projects/json-net.aspx)的最新版本，我正在序列化服务器上​​的集合并使用 WCF 代理传递字符串。

服务器调用需要不到一秒的时间来返回数据，但在 PDA 客户端，反序列化`JsonConvert.DeserializeObject(Of IList(Of BusinessUnitModel))(results)`需要 20-30 秒。

这种性能在 Json.Net 中很常见，还是我对对象或序列化/反序列化做错了什么？

我曾尝试降级到 Json.Net 的 3.5x 版本，并在服务器上使用适当的版本，在客户端使用 Compact 版本，但性能再次很差。

**共享模型**

```
Imports System.ComponentModel.DataAnnotations

Namespace Models

    Public Class BusinessUnitModel
        <Required>
        Public Property ID As Int32
        <Required>
        <StringLength(50)>
        Public Property Name As String
        <Required>
        Public Property IsInternalSupplier As Boolean
    End Class

End Namespace 
```

**服务器端序列化**

```
Imports Qsmart.DataProvider.Contracts
Imports System.ComponentModel.Composition
Imports Newtonsoft.Json

Namespace Serialiser

    <Export(GetType(IModelSerialiser))>
    Public Class JSonSerialiser
        Implements IModelSerialiser

        <Import(GetType(ILoggerHelper))>
        Private Property ExHelper As ILoggerHelper

        Friend Function Deserailse(Of TModel)(serialised As String) As TModel Implements IModelSerialiser.Deserailse

            If serialised Is Nothing Then Throw New ArgumentNullException("serialised")

            Try
                Return JsonConvert.DeserializeObject(serialised)
            Catch ex As JsonSerializationException
                ExHelper.Process(ex)
                Throw New ApplicationException("Could Not Deserialse The Model", ex)
            End Try

        End Function

        Friend Function Serailse(Of TModel)(model As TModel) As String Implements IModelSerialiser.Serailse

            If model Is Nothing Then Throw New ArgumentNullException("model")

            Try
                Return JsonConvert.SerializeObject(model)
            Catch ex As JsonSerializationException
                ExHelper.Process(ex)
                Throw New ApplicationException("Could Not Serialse The Model", ex)
            End Try

        End Function

    End Class

End Namespace 
```

**服务器端测试数据创建**

```
Public Function QSmartBusinessUnits() As String Implements IQSmartDataProvider.QSmartBusinessUnits

    Dim serialsedResult As String = String.Empty

    Try
        Dim tester As New List(Of BusinessUnitModel)
        tester.Add(New BusinessUnitModel With {.ID = 1, .Name = "Test1", .IsInternalSupplier = True})
        tester.Add(New BusinessUnitModel With {.ID = 2, .Name = "Test2", .IsInternalSupplier = True})
        tester.Add(New BusinessUnitModel With {.ID = 3, .Name = "Test3", .IsInternalSupplier = True})
        tester.Add(New BusinessUnitModel With {.ID = 4, .Name = "Test4", .IsInternalSupplier = True})
        tester.Add(New BusinessUnitModel With {.ID = 5, .Name = "Test5", .IsInternalSupplier = True})
        tester.Add(New BusinessUnitModel With {.ID = 6, .Name = "Test6", .IsInternalSupplier = True})

        serialsedResult = Serialiser.Serailse(tester)

    Catch ex As Exception
        ExHelper.Process(ex)
    End Try

    Return serialsedResult

End Function 
```

**紧凑框架反序列化**

```
Private Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
    Try
        Dim results As String = _proxy.QSmartBusinessUnits()
        Dim deserialise = JsonConvert.DeserializeObject(Of IList(Of BusinessUnitModel))(results)
        BusinessUnitModelBindingSource.DataSource = deserialise
    Catch ex As Exception
        Stop
    End Try

End Sub 
```

**更新**

如果我从模型中删除 DataAnnotations，性能会好得多，它会下降到大约 2 秒......知道为什么会这样吗？

```
Imports System.ComponentModel.DataAnnotations

    Namespace Models

        Public Class BusinessUnitModel
            Public Property ID As Int32
            Public Property Name As String
            Public Property IsInternalSupplier As Boolean
        End Class

    End Namespace 
```

# modelica - 在 OpenModelica 中为周期性时变实变量建模

> ID：12386310
> 
> 赞同：1
> 
> 时间：2012-09-12T10:37:34.210
> 
> 标签：modelica, openmodelica

我要建模的是一个周期性的时变实变量，下面的代码无法模拟。有人有建议吗？

```
class try
discrete Real x(start = 1);
algorithm
when sample(0,4) then 
   x :=  1; // reinit(x, 1) also does not work
end when;
equation
      der(x) = 1;
end try; 
```

所有错误信息如下：
Translation 18:32:29 0:0-0:0 Internal error Transformation Module failed！
翻译 18:32:29 0:0-0:0 内部错误 BackendDAETransform.reduceIndexDummyDer 失败！
翻译 18:32:29 0:0-0:0 内部错误 BackendDAETransform.selectDummyState: no state to select
Symbolic 18:32:29 10:3-10:13 模型结构奇异，错误发现排序方程 0.0 = 1.0; 对于变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:23:48.003

问题是，如果您希望变量 x 在采样时间间隔之间继续，您必须删除*离散*关键字，这将正常工作：

```
class try
 Real x(start = 1);
algorithm 
when sample(0,4) then
   reinit(x, 1);
end when;
equation 
      der(x) = 1;
end try; 
```

曹，马可

# android - 如何从 Facebook 用户那里获取用户 ID？

> ID：12386322
> 
> 赞同：0
> 
> 时间：2012-09-12T10:38:30.107
> 
> 标签：android, facebook, sdk

我想从 Facebook 用户那里获取 id，但到目前为止我尝试过的方法不起作用......

```
public class fbLogin extends Activity {

    public static final int LOGIN = Menu.FIRST;
    public static final int GET_EVENTS = Menu.FIRST + 1;
    public static final int GET_ID = Menu.FIRST + 2;

    public static final String APP_ID = "361579407254212";
    public static final String TAG = "FACEBOOK CONNECT";

    private Facebook mFacebook;
    private AsyncFacebookRunner mAsyncRunner;
    private Handler mHandler = new Handler();

    private static final String[] PERMS = new String[] { "user_events","email" };

    private TextView mText;

    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.onCreate(savedInstanceState);

            // setup the content view
            initLayout();

            // setup the facebook session
            mFacebook = new Facebook(APP_ID);
            mAsyncRunner = new AsyncFacebookRunner(mFacebook);

            if (mFacebook.isSessionValid()) {
                AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(mFacebook);
                asyncRunner.logout(this, new LogoutRequestListener());
            } else {
                mFacebook.authorize(this, PERMS, new LoginDialogListener());
            }

            mAsyncRunner.request("me", new IDRequestListener());    
    }

    protected void initLayout() {
        LinearLayout rootView = new LinearLayout(this.getApplicationContext());
        rootView.setOrientation(LinearLayout.VERTICAL);

        this.mText = new TextView(this.getApplicationContext());
        this.mText.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
        LayoutParams.WRAP_CONTENT));
        rootView.addView(this.mText);

        this.setContentView(rootView);

    }

    private class LoginDialogListener implements DialogListener {

        public void onComplete(Bundle values) {}    

        public void onFacebookError(FacebookError e) {}

        public void onError(DialogError e) {}

        public void onCancel() {}
    }

    private class LogoutRequestListener implements RequestListener {

        public void onComplete(String response, Object state) {
            // Dispatch on its own thread
            mHandler.post(new Runnable() {
                public void run() {
                    mText.setText("Logged out");
                }
            });
        }

        public void onIOException(IOException e, Object state) {}

        public void onFileNotFoundException(FileNotFoundException e, Object state) {}

        public void onMalformedURLException(MalformedURLException e, Object state) {}

        public void onFacebookError(FacebookError e, Object state) {}
    }

    private class IDRequestListener implements RequestListener {

        public void onComplete(String response, Object state) {
            try {
                // process the response here: executed in background thread
                Log.d(TAG, "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String id = json.getString("id");

                fbLogin.this.runOnUiThread(new Runnable() {
                    public void run() {
                        mText.setText("Hello there, " + id + "!");
                    }
                });
            } catch (JSONException e) {
                Log.w(TAG, "JSON Error in response");
                mText.setText("catch1...");
            } catch (FacebookError e) {
                mText.setText("catch2");
            }
        }

        public void onIOException(IOException e, Object state) {mText.setText("Logging out...1");}

        public void onFileNotFoundException(FileNotFoundException e, Object state) {mText.setText("Logging out...2");}

        public void onMalformedURLException(MalformedURLException e,Object state) {mText.setText("Logging out...3");}

        public void onFacebookError(FacebookError e, Object state) {mText.setText("Logging out...4");}
    }
} 
```

当我从课堂上转到该`OnComplete`方法时，它给出了一个 Facebook 错误......`IDRequestListener`

我该如何解决？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:41:38.237

您可以使用 socialauth android sdk。可以获取用户资料，发布消息，获取好友列表

[http://code.google.com/p/socialauth-android/](http://code.google.com/p/socialauth-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:01:52.627

`authorize()`不是同步的，会立即返回。在提交需要访问令牌的请求之前，您需要等待授权请求完成。基本上，仅当在侦听器中调用时才触发`me`请求。`onComplete()``authorize()`

此外，您的活动似乎缺少为`onActivityResult()`对象`Facebook`提供授权结果的实现，即

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
  mFacebook.authorizeCallback(requestCode, resultCode, data);
} 
```

# jquery - 为什么背景颜色没有变化？

> ID：12386325
> 
> 赞同：4
> 
> 时间：2012-09-12T10:38:44.967
> 
> 标签：jquery, html, css, background-color, oracle-apex

我有一个问题要突出显示由 apex 生成的表中的某些行。

使用动态操作和 jQuery，我能够突出显示单个列

jQuery：

```
$('tr td[headers="IDZ"]').each(function(){
  if(parseInt($(this).html()) == 12){
    $(this).attr('style','background-color:red');
  }
}); 
```

结果在 html 中：

```
<td align="right" headers="IDZ" style="background-color:red">12</td> 
```

工作正常，IDZ == 12 的列现在是红色的。

但我想突出显示整行，所以我想让我们获取父节点`<tr>`并添加一些“样式”。

jQuery：

```
$('tr td[headers="IDZ"]').each(function(){
  if(parseInt($(this).html()) == 12){
    $(this).parent().attr('style','background-color:red');
  }
}); 
```

结果：

```
<tr class="even" style="background-color:red"> 
```

Row 没有改变他们的背景颜色，我不知道为什么。用 Firefox 和 Chrome 测试。

我很感激任何提示或解决方案。

马里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:42:17.510

为 <tr> 设置背景并不总是可靠的，您最好为所有子 <td> 或 <th> 设置它。

一个很好的方法是替换你的

```
$(this).parent().attr('style','background-color:red'); 
```

和

```
$(this).parent().addClass('highlightit'); 
```

然后添加css

```
tr.highlightit td { background-color: red; } 
```

这将使该表行下的所有表数据元素都具有红色背景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:45:43.993

试试这个 JS 代码（[**jsFiddle**](http://jsfiddle.net/pBMjc/)）。为我工作

```
$('tr td[headers="IDZ"]').each(function(){
  if(parseInt($(this).html()) == 12){
    $(this).parent().css('background-color','red');
  }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:51:31.873

你也可以使用`.closest('tr')`和我用过`text`的来代替`html`

```
$('tr td[headers="IDZ"]').each(function(){
    if(parseInt($(this).text()) == 12){
        $(this).closest('tr').attr('style','background-color:red');
    }
});​ 
```

[**演示**](http://jsfiddle.net/dUgTz/3/)。

# facebook - 使用 Graph API 检索网站/应用 ID 的所有 Facebook 评论（即获取最新评论）

> ID：12386326
> 
> 赞同：1
> 
> 时间：2012-09-12T10:39:02.910
> 
> 标签：facebook, facebook-graph-api, facebook-comments

我正在尝试为网站创建最新评论的提要。我在每个帖子的基础上获得评论没有任何问题，但我似乎无法找到任何方法来获得**所有**评论，或者至少是整个网站的最后 10 条评论。

显然我想以最简单的方式做到这一点，我认为这将是通过 Graph API。

任何建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:05:35.620

我认为您可能必须输入所有 URL，但可以使用 comments 和 link_stat 表通过 FQL 完成。

```
SELECT xid, text, username, time
FROM comment
WHERE
object_id IN
(SELECT comments_fbid FROM link_stat WHERE url IN (All_your_URLs)) 
```

你可以试试上面的方法，看看它是否有效？

参考 -[评论](https://developers.facebook.com/docs/reference/fql/comment/)和[Link_Stat](https://developers.facebook.com/docs/reference/fql/link_stat/)

# android - Android：ListView选择后保持蓝色背景

> ID：12386333
> 
> 赞同：7
> 
> 时间：2012-09-12T10:39:36.660
> 
> 标签：android, listview, tablet

我有一个 ListView，它在手机上效果很好。现在我正在制作一个平板电脑 UI，左侧是 ListView，右侧是详细信息。

当我触摸一个项目时，只要按下它就会闪烁蓝色。我想保持这种蓝色，直到选择另一个项目，就像 Nexus 7 上的 Gmail 应用程序一样。

实现这一目标的最干净的方法是什么？我宁愿避免手动设置背景，我认为有一种方法可以将元素标记为“活动”元素并相应地为其设置主题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-12T11:25:36.600

> 实现这一目标的最干净的方法是什么？

您正在寻找的内容称为“激活”状态。为了使这项工作：

第 1 步：在`res/values-v11/`中，有一个实现`activated`. 例如，对于在`AppTheme`此处定义声明的新项目，请使用以下内容：

```
<resources>

    <style name="AppTheme" parent="android:Theme.Holo.Light"></style>

    <style name="activated" parent="AppTheme">
        <item name="android:background">?android:attr/activatedBackgroundIndicator</item>
    </style>

</resources> 
```

步骤#2：`res/values/`为任何旧设备定义相同的样式，就像存根样式资源一样，因此对它的引用继续有效：

```
<resources>

    <style name="AppTheme" parent="android:Theme.Light"/>

    <style name="activated" parent="AppTheme"/>

</resources> 
```

步骤#3：在您的布局 XML 资源中的行中`ListView`，添加`style="@style/activated"`到根元素的属性列表中

步骤#4：将 设置为`ListView`单选列表，例如 a 中的以下行`ListFragment`：

```
getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

[您可以在此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Animation/ThreePane)、[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Animation/ThreePaneBC)和[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/LargeScreen/EU4You)中看到这一点。有关前两个示例的更多背景信息，请参阅这个 SO 问题：[Gmail 三片段动画场景的完整工作示例？](https://stackoverflow.com/questions/12253965/complete-working-sample-of-the-gmail-three-fragment-animation-scenario)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T04:18:46.457

使用

`android.R.layout.simple_list_item_activated_1`

代替

`R.layout.simple_list_item_checkable_1`.

只是为了有一天有人检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T20:46:36.593

经过几天的搜索和拉扯我的头发后，我发现它`activatedBackgroundIndicator`也可以在 ActionBarSherlock 造型系统中使用。大多数开发向后兼容应用程序的开发人员都使用 ActionBarSherlock，因此在大多数情况下使用 ActionBarSherlock 是一个不错的选择。因此，不要使用`android:background="?android:attr/activatedBackgroundIndicator"`which 会在 11 之前的 android 版本中出现错误，只需使用：`android:background="?activatedBackgroundIndicator"`

这是示例行布局 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
   //note the activatedBackgroundIndicator
android:background="?activatedBackgroundIndicator"
android:minHeight="?android:attr/listPreferredItemHeight"
android:paddingBottom="2dip"
android:paddingTop="2dip" >

<TextView
    android:id="@+id/text1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:paddingLeft="6dip"
    android:paddingRight="6dip"
    android:textSize="15sp" />

<TextView
    android:id="@+id/text2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:paddingRight="5dip"
    android:textSize="20dip" />
  </LinearLayout> 
```

# android - 如何在 android 应用程序的任何活动中显示警报对话框？

> ID：12386334
> 
> 赞同：6
> 
> 时间：2012-09-12T10:39:37.783
> 
> 标签：android, android-alertdialog

在我的应用程序中，我想显示`AlertDialog`所有活动的共同点。
在我的后台线程中，服务器数据会定期到来。

现在，如果某些用户定义的标准与该数据匹配，我想`AlertDialog`在当前位于前面的任何活动中显示在屏幕上。

我怎样才能确定在哪里显示`AlertDialog`？
如果我的应用程序在后台，我想设置`Notifications`而不是`AlertDialog`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:44:51.153

您将需要在后台运行的服务。

所有需要的代码都在那里：

[http://www.websmithing.com/2011/02/01/how-to-update-the-ui-in-an-android-activity-using-data-from-a-background-service/](http://www.websmithing.com/2011/02/01/how-to-update-the-ui-in-an-android-activity-using-data-from-a-background-service/)

您的服务将向您的 Activity 发送广播。如果您的活动不在前台，则不会发生任何事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T10:51:49.763

您可以通过以下任何一种方式从后台显示警报对话框...

但是在您的显示对话框之前，您需要使用一个布尔标志来检查活动是否正在运行，如下所示，否则您将得到`WindowManager$BadTokenException`.

```
// Flag to check if activity is running or not
boolean isActivityRunning = false;

@Override
protected void onResume() {
    super.onResume();
    isActivityRunning = true;
}

@Override
protected void onPause() {
    super.onPause();
    isActivityRunning = false;
} 
```

**1.runOnUiThread**

您需要在 UI 线程上显示您的对话框，如下所示...

```
runOnUiThread(new Runnable() {
            @Override
            public void run() {
               if(isActivityRunning) {
                 // Your dialog code.
                 AlertDialog ActiveCallDialog = new AlertDialog.Builder(context)
                    .setMessage(R.string.message)                       
                    .setTitle(R.string.title)
                    .setIcon(android.R.drawable.ic_dialog_alert)
                    .show();
               }    
            }
        }); 
```

**2.处理程序**

您可以在 Activity 类中创建一个处理程序，并可以调用 sendMessage 到该处理程序对象。编写代码在Handler的handleMessage方法中显示alert，例如：

**活动课**

```
Handler mHandler = new Handler()
{
    public void handleMessage(Message msg)
    {
       if(isActivityRunning) {
          //Display Alert
          AlertDialog ActiveCallDialog = new AlertDialog.Builder(context)
                    .setMessage(R.string.message)                       
                    .setTitle(R.string.title)
                    .setIcon(android.R.drawable.ic_dialog_alert)
                    .show();             
        }            
    }
}; 
```

**线**

```
Thread thread= new Thread()
{
    public void run()
    {             
         mHandler.sendEmptyMessage(0);
    }
} 
```

# quickbooks - 我从哪里获得所有 Quickbooks XML 来交换数据？

> ID：12386336
> 
> 赞同：0
> 
> 时间：2012-09-12T10:39:41.837
> 
> 标签：quickbooks

在哪里可以找到所有受支持的快速书 xml 格式？基本上我正在尝试使用 Quickbook webconnector 在 quickbook 和我的业务应用程序之间交换数据。我想尽可能地做自动化。我正在使用 Quickbooks 2011 企业版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:09:52.293

好的，我有链接，我可以在其中找到基于 QB 版本的所有支持的格式。

[https://member.developer.intuit.com/qbSDK-current/Common/newOSR/index.html](https://member.developer.intuit.com/qbSDK-current/Common/newOSR/index.html)

发布为答案，希望对其他人有所帮助。

# objective-c - 如果ARC由编译器处理，为什么iOS 4和Mac OS X 10.6不支持weak？

> ID：12386340
> 
> 赞同：3
> 
> 时间：2012-09-12T10:39:57.043
> 
> 标签：objective-c, ios, automatic-ref-counting

假设`weak`类似于`assign`or `unsafe_unretained`，除了`weak`当它指向的对象被`dealloc`'ed 时，变量被“归零”。但是 ARC 是由编译器处理的，那为什么`weak`iOS 4 和 Mac OS X 10.6 不支持呢？

（对于这个问题，请不要猜测作为答案，但事实/参考/文档更支持的东西）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:43:16.330

由于`__weak`需要在当前对象以外的地方清零一个或多个指针，因此需要额外的数据结构来跟踪弱引用。这与不需要额外跟踪的`__strong`、`__unsafe_unretained`和形成对比。`__autoreleasing`跟踪结构和操作它们的程序内置在操作系统中；编译器插入代码来执行调用，但需要操作系统支持才能使编译后的代码工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:42:09.960

`__weak`引用需要运行时支持，这在较旧的 iOS 版本上不可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T11:03:42.450

10.6 不支持弱引用没有技术原因，而且确实至少有一个第三方实现可用（例如[这个](http://www.mikeash.com/pyblog/introducing-plweakcompatibility.html)）。Apple 决定支持 ARC，但没有弱引用。我怀疑任何知道Apple做出该选择的实际原因的人都可以将其发布在stackoverflow上……所以您所能做的就是推测。

# wcf - WCF 部署奇怪的合同行为

> ID：12386349
> 
> 赞同：0
> 
> 时间：2012-09-12T10:40:24.563
> 
> 标签：wcf

WCF 服务部署到位于 WinServer2008 Standard SP2 上的 IIS7 服务器。

DataContract int 成员正在“丢失”

即客户端发送的所有整数都以0出现在服务器上的Contract处理逻辑中

我制定了“反射”合同（将传入的 int 转换为字符串并返回）。当测试工具指向在 IDE 中运行的 WCF 合同时，int 反映正常。当它指向已部署的合约时，会反映零。

部署：在服务器上创建一个 IIS 应用程序并将文件部署到物理目录。

已部署的服务显示正常。即“真正的”客户端应用程序（正在开发的单独解决方案中的 VS2008 WinMobile 6.5 应用程序）有一个 WebService 参考，可以看到 Deployed WCF OK 。只是客户端生成的变量值在网络上丢失了。仅发生在客户端生成的变量上。客户端能够使用服务器生成的具有预期值的 DataContract 变量。这与基本类型有关。第一个受害者是客户生成的日期，所以我将这些日期移到了旅程的字符串中。Web.config 如下。谢谢鲍勃

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
   <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove     the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:07:28.803

从生产服务器中删除 Web 应用程序并重新制作它。问题部分解决。测试 Windows 应用程序现在可以看到反映的整数。但是 WinMobile 客户端仍然没有。使用合同的字符串值进行了测试，并且可以正常工作。生命太短暂了。我会将合同更改为字符串字符串字符串。强类型数据契约就这么多。

# vb.net - 开始接收尾随空字符/字符（0）

> ID：12386350
> 
> 赞同：0
> 
> 时间：2012-09-12T10:40:24.490
> 
> 标签：vb.net, sockets, null, beginreceive

我正在编写一个异步套接字客户端来传输文件（[在这篇 Microsoft 文章之后](http://msdn.microsoft.com/en-us/library/bew39x2a%28v=vs.90%29.aspx)），并注意到使用 BeginReceive 会破坏传输，因为它在每个数据包的末尾添加了一个 Null 字符/chr(0)。什么可能导致此问题？我认为它可能是发送方，但我用 SendFile 对其进行了测试并得到了相同的结果。

在 Microsoft 文章中，它将字节转换为 ASCII 字符串并将其附加到 StringBuilder。我想即时保存字节，所以我几乎没有像这样修改 ReceiveCallback：

```
Private Shared Sub ReceiveCallback(ByVal ar As IAsyncResult)
    Dim state As StateObject = CType(ar.AsyncState, StateObject)
    Dim client As Socket = state.workSocket
    Dim bytesRead As Integer = client.EndReceive(ar)
    If bytesRead > 0 Then
        FileIO.FileSystem.WriteAllBytes(Application.StartupPath & "\test.exe", state.buffer, True)
        client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0, New AsyncCallback(AddressOf ReceiveCallback), state)
    Else
        receiveDone.Set()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:48:26.487

问题是对`Receive`, or `BeginReceive`&`EndReceive`工作方式的误解。

当你调用`Receive`它并给它一个缓冲区和一个大小时，你正在指定要接收的**最大**数据量。它`bytesRead`告诉你你实际收到了多少。您只需将该数量的字节写入输出文件，因为只有缓冲区的那部分填充了数据。

有关更多详细信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/w3xtz6a5](http://msdn.microsoft.com/en-us/library/w3xtz6a5)

# c# - gacutil 不被识别为内部或外部命令？

> ID：12386352
> 
> 赞同：20
> 
> 时间：2012-09-12T10:40:28.080
> 
> 标签：c#, console

我创建了一个添加外部 Dll 引用的控制台应用程序。
现在我必须将我的外部 Dll 部署到我的程序集中。
当我试图在 GAC 中添加我的 dll 时。

```
 GACUTIL.EXE /i MyLibrary.dll 
```

将我的 dll 添加到程序集的命令，它向我显示错误

```
*gacutil is not recognized as an internal or external comma* 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-06-27T05:59:59.943

对于**Windows 10**路径是： `C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-08-19T05:35:26.570

如果您已经安装了 Visual Studio，那么您可以使用[Developer Command Prompt](https://docs.microsoft.com/en-us/dotnet/framework/tools/developer-command-prompt-for-vs)而不是普通`Command prompt`的直接访问`gacutil`。

你可以在`Developer Command Prompt`这里找到：

`Start Menu > Visual Studio 20XX > Developer Command Prompt for VS20XX`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T11:04:57.207

“但是我如何在客户端服务器上部署我的 dll，因为他可能没有 Visual Studio”

如果我没记错的话，gacutil 也存在于 C:\windows\Microsoft.Net\some folder\

另一种方式：如果使用原始 .cmd => 您可以将 gacutil.exe 和 gacutil.exe.config 与您的脚本捆绑在一起。

另一种方式：如果您使用的是 Windows 安装程序，那么它内置了对 GACing 程序集的支持。

另外，请注意 x86 和 x64 程序集有不同的 GAC（如果您的程序集是 MSIL，请忽略）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T11:31:12.477

可能重复：[GAC 32 位与 64 位](https://stackoverflow.com/questions/6507675/gac-32bit-vs-64bit) （至少从 .Net 3.0 开始，gacutil 不再是客户端操作系统的一部分，您需要使用正确的安装程序或安装 Windows SDK，这显然是矫枉过正）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-06T16:56:24.303

我们运行 Windows Server 2016 的 Production Box 没有用于 Global-Assembly 缓存 (GAC) 的 MS SDK 工具！！！所以我复制了整个目录

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.6.1 Tools\ 
```

从我的开发笔记本电脑（安装了 VS 2017 的 Windows 10）到我希望将我的 .dll 注册到我的生产服务器的全局程序集的生产服务器。
[![将 GACUtil.exe 从目录复制到另一台计算机](../Images/e92fc5ec1dd3b82e7542eac482573aeb.png)](https://i.stack.imgur.com/v4OBJ.jpg)

我需要注册的程序集是：_Net35scannersMonitor.dll，它是 x86 dotNet 2.0 和 _Net40scannersMonitor.dll，它是 x64 dotNet 4.x。

在我复制的 gacUtil 所在目录的提示下，我输入：

```
 gacutil -i D:\resource\Library\_Net35scannersMonitor.dll 
```

和

```
 gacutil -i D:\resource\Library\_Net40scannersMonitor.dll 
```

我使用相同的 gacUtil.exe（文件版本 4.6.1055.0）来完成这两项工作。他们最终都在正确的位置 dotnet2x86(C:\Windows\assembly) 和 dotnet4(C:\Windows\Microsoft.NET\assembly\GAC_MSIL) - 我不必使用 2 个不同的 gacUtil.exe。

结果：

[![x86 .dll 和 x64 .dll 分别去正确的程序集](../Images/e4789b1d378d40a7f824cc8babbcdf95.png)](https://i.stack.imgur.com/UOa6k.jpg)

结论：即使您的盒子没有安装 VS，您也可以从安装了 VS 的 PC 上复制您的 gacutil.exe 及其 bin。无需特殊下载/安装。然后您可以将复制的 gacutil 用于 x86 和 x64 程序集！！！

# jquery - css水平居中动态div（不工作）应该很简单

> ID：12386353
> 
> 赞同：0
> 
> 时间：2012-09-12T10:40:29.213
> 
> 标签：jquery, html, css

我有一个 div，它通过 jquery 被动态插入到另一个 div 中，就像这样

这是jQuery：

```
$('#portSecW div:not(".closeXbtn")').prepend('<div class="portSecRollOver"><div class="portSecInner"></div></div>'); 
```

这是常规的 HTML：

```
<div class="portThumbsL">
<a href="images/sitePortThumbs/2882.png"><img src="images/sitePortThumbs/2882.png" alt="2882films"/></a>
<div class="thumbTxtSmall">2882FILMS</div> 
```

最终输出是这个

```
<div class="portThumbsL">
<div class="portSecRollOver"><div class="portSecInner"></div></div>
<a href="images/sitePortThumbs/2882.png"><img src="images/sitePortThumbs/2882.png" alt="2882films"/></a>
<div class="thumbTxtSmall">2882FILMS</div> 
```

我这样做是为了让我拍摄的翻转效果动画等...在 portSecInner 的中间是插入其他动态内容的地方等...（只是文本） .portSecInner 的父级是 portSecRollOver 并且是绝对定位的。

所以我遇到的问题是在css中我有一个简单的

```
.portSecInner{ margin:0px auto !important;} 
```

但它不居中...甚至不移动它。现在，当我手动定位它时，例如（边距：10px 20px）等，它会移动，但很明显，它不会使所有内容居中。

关于我能做些什么来纠正这个问题并使这个婴儿居中的任何想法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:12:59.857

`margin: 0 auto``width`只有在为元素及其父元素设置 a 后才能工作，如下所示：

```
.portSecRollOver {
    width: 300px;
}
.portSecInner {
    width: 200px;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:43:06.230

`<div class="portThumbsL">`缺少结束标记。关闭它并尝试。

我猜 margin:0 auto 正在工作。检查这个演示[http://jsfiddle.net/85s4j/1/](http://jsfiddle.net/85s4j/1/)

如果您不想固定宽度，请`portSecInner`添加，`margin:0 25px;`以便您可以将 div 置于父 div 的中心

# mysql - MYSQL：一次从所有表中删除一条记录

> ID：12386361
> 
> 赞同：0
> 
> 时间：2012-09-12T10:41:05.867
> 
> 标签：mysql

我有一个`mysql`数据库，其中一个`table`我有`f_id` as `P_Key`，这`f_id`在多个`table`as中被引用`f_key`。我想一次性删除所有记录`f_id`（比如说 10 个）`table`。然后为此我需要`delete`在所有`table`具有`f_id`= 10 的内容中，因为`f_key`只有我才能从包含它`delete`的 main中获取它。是否有任何自动化过程可以通过自动查看来实现，我不想在查询中写下整个列表（因为列表非常大，超过 18 个表），因为这在许多.`table``P_Key``delete``table``table``p_key``tables`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:52:56.270

最简单的方法是在您的键上设置一个[ON DELETE CASCADE CONSTRAINT](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)以便在删除父表上的记录时将删除您的其他表中引用该行的所有子记录。请注意，如果它们没有 ON DELETE CASCADE 约束，您需要删除外键并再次添加它们。像这样的东西：

```
SHOW CREATE TABLE [table_name]

ALTER TABLE [table_name] DROP FOREIGN KEY [f_id];

ALTER TABLE [table_name]
ADD CONSTRAINT [f_id]
FOREIGN KEY (`[f_id]`) REFERENCES `[other_table]` (`[column_name]`)
ON DELETE CASCADE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:51:52.637

您应该能够查看`information_schema`表格以找出表格的名称。就像是：

```
SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = "database_name" 
```

替换`database_name`为您要检查的数据库的名称，它应该返回所有表名。你也许可以用那个列表做点什么。

# iphone - 无法在 iphone 中将数据从一个视图传递到另一个视图

> ID：12386369
> 
> 赞同：1
> 
> 时间：2012-09-12T10:41:36.363
> 
> 标签：iphone, ios5, uiviewcontroller, uiactionsheet

我在我的程序中包含了 UIActionSheet。它包含 2 个按钮，比如 A 和 B。当用户单击 A 按钮时，它会转到另一个视图。在该视图中，它包含 3 个文本字段。所以在主视图控制器中，我将值分配给这些文本字段。我将粘贴下面的代码：-

在 MainViewController.m

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex: (NSInteger)buttonIndex 
  {
         AnotherViewController *A = [[AnotherViewController alloc] init];

          if (buttonIndex == 1) 
          {

              A.newtask = name;
              A.newsubtask = sub1;
              A.newduedate = dateName;
              A.newtime = timeName;

     UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];                                                                    

     UpdateViewController   *viewController =[storyboard instantiateViewControllerWithIdentifier:@"update"];

     [self presentViewController:viewController animated:YES completion:NULL];

          }
   } 
```

而在另一个视图控制器.m

```
 - (void)viewDidLoad
   {

              task_update.text = newtask;
              subtask_update.text =newsubtask;
              duedate_update.text = newduedate;
              time_update.text = newtime;

           NSLog(@"The task is :%@",newtask);
              [super viewDidLoad];
// Do any additional setup after loading the view.
    } 
```

问题是我在新任务中得到了空值。谁能告诉我解决方案。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:56:50.170

在 AppDelegate 类中获取全局变量。像 AppDelegate .h

```
NSString *newtask,*newsubtask,*newduedate,*newtime;

@property(nonatomic,retain)NSString *newtask,*newsubtask,*newduedate,*newtime; 
```

应用委托。米

```
@synthesize newtask,newsubtask,newduedate,newtime; 
```

主视图控制器.h

# 导入“AppDelegate”

```
{
AppDelegate *appDelegate;
} 
```

主视图控制器.m

```
 (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex: (NSInteger)buttonIndex 
      {
appDelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];
             AnotherViewController *A = [[AnotherViewController alloc] init];

              if (buttonIndex == 1) 
              {

                  appDelegate.newtask = name;
                  appDelegate.newsubtask = sub1;
                  appDelegate.newduedate = dateName;
                  appDelegate.newtime = timeName;

         UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];                                                                    

         UpdateViewController   *viewController =[storyboard instantiateViewControllerWithIdentifier:@"update"];

         [self presentViewController:viewController animated:YES completion:NULL];

              }
       } 
```

另一个视图控制器.h

# 导入“AppDelegate”

```
{
AppDelegate *appDelegate;
} 
```

另一个视图控制器.m

```
- (void)viewDidLoad
   {
    appDelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];

              task_update.text = appDelegate.newtask;
              subtask_update.text =appDelegate.newsubtask;
              duedate_update.text = appDelegate.newduedate;
              time_update.text = appDelegate.newtime;

           NSLog(@"The task is :%@",newtask);
              [super viewDidLoad];
// Do any additional setup after loading the view.
    } 
```

# ruby-on-rails - RSpec 中的 stub_model 和 mock_model 有什么区别？

> ID：12386375
> 
> 赞同：13
> 
> 时间：2012-09-12T10:41:50.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

`stub_model`RSpec和`mock_model`in RSpec有什么区别？到目前为止，我知道存根仅用于防止调用真正的方法并返回预定义的值，而模拟实际上是期望并要求在接收者上调用该方法。

我也知道这些存根/模拟用于允许隔离测试，例如在不接触模型的控制器中。但是我仍然对这两种方法感到困惑，究竟是什么时候使用的？细节和例子将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-21T20:27:59.917

# 存根模型

> 该`stub_model`方法生成一个活动模型模型的实例。
> 
> 虽然您可以`stub_model`在任何示例（模型、视图、控制器、助手）中使用它，但它在视图示例中特别有用，因为它们本质上是基于状态而不是基于交互的。

# 模拟模型

> 该`mock_model`方法生成一个类似于活动模型模型的**测试替身。**`stub_model`这与生成真实 ActiveModel 类实例的方法不同。
> 
> `mock_model`over的好处`stub_model`是它是一个真正的双重，因此示例不依赖于行为（或错误行为），甚至不依赖于任何其他代码的存在。如果您正在处理控制器规范并且您需要一个不存在的模型，您可以传递`mock_model`一个字符串，生成的对象将充当该字符串命名的类的实例。

rspec 文档：[stub_model](https://www.relishapp.com/rspec/rspec-rails/v/2-4/docs/mocks/stub-model)和[mock_model](https://www.relishapp.com/rspec/rspec-rails/v/2-4/docs/mocks/mock-model)

# php - 如何跟踪收件人打开了哪些（或多少个）电子邮件？

> ID：12386378
> 
> 赞同：2
> 
> 时间：2012-09-12T10:41:56.140
> 
> 标签：php, email

我正在努力使我们的电子邮件发送工具变得更好、更完整，为有特殊要求的客户添加关于已成功发送、接收、打开多少已发送电子邮件的报告。我环顾四周，找不到任何可靠的方法来判断收件人是否打开了电子邮件，因为似乎大多数电子邮件客户端通常会忽略已读回执请求。

有什么方法可以可靠地做到这一点，还是我坚持使用不可靠的阅读回执请求方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:48:31.203

您可以在邮件中使用简单的图像（仅限 HTML 邮件）来做到这一点......

像这样的东西

```
<img src="http://domain.com/tracker.php?emailHash=xxx&emailID=99" width=1 height=1> 
```

`tracker.php`将包含一个可以跟踪用户信息的简单脚本

欲了解更多信息，请参阅

[跟踪电子邮件打开](http://www.voicent.com/email-marketing/track-email-open.php)

[如何使用 PHP 制作简单的跟踪图像](http://thatsmith.com/2008/11/how-to-make-tracking-images-with-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:53:40.293

感谢上帝，没有可靠的方法可以做到这一点。您可以使用 Baba 建议的“跟踪电子邮件打开”链接，但每个现代电子邮件客户端在用户允许之前不会加载远程图像。

这是不可能的，这很好，想象一下垃圾邮件发送者可以知道你是否打开了他们的邮件......

# jquery - jquery点击事件和按钮元素的问题

> ID：12386379
> 
> 赞同：2
> 
> 时间：2012-09-12T10:41:56.463
> 
> 标签：jquery

我已经搜索过这个主题，但找不到任何有用的东西。

就我而言，我有一个带有单击事件的 jQuery-ui 按钮。此单击事件工作正常，但它总是通过在文本输入字段中按 enter 来调用。

在这里演示：http: [//jsfiddle.net/vcfzJ/](http://jsfiddle.net/vcfzJ/)

希望有人可以提供帮助。我通过检查做了一个解决方法`event.target.nodeName`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:45:44.217

这是因为按钮默认是表单的提交元素，因此在文本框中按 enter 会提交表单。

```
<button>x</button> is equivalent to <button type="submit">x<button> 
```

使用它使按钮成为非提交元素：

```
<button type="button">x</button> 
```

然而，这会触发“点击”事件似乎很奇怪，因为按钮实际上并没有被点击，答案似乎是这样的：

[https://stackoverflow.com/a/4763911/1300235](https://stackoverflow.com/a/4763911/1300235)

# jquery - 为什么工作不转班？cnahge 课能更好吗？

> ID：12386380
> 
> 赞同：0
> 
> 时间：2012-09-12T10:41:57.653
> 
> 标签：jquery, class, addclass

请告诉我为什么我的代码不起作用？

```
$('.action').live('click',function(){
    var idn = this.id.split('+')[1];
    var id=$('#input'+idn);
    if(id.hasClass('class1')){id.removeClass('class1').addClass('class2');}
    else if(id.hasClass('class2')){id.removeClass('class2').addClass('class1');}
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:51:16.563

您发布的代码工作正常：请看[**这个小提琴**](http://jsfiddle.net/pSy5p/)

请注意，`live()`已弃用，取而代之的是`on()`or `delegate()`，具体取决于您的 jQuery 版本，您可以使用以下方式减少代码`toggleClass()`：

```
$('.action').live('click',function() {
    var idn = this.id.split('+')[1];
    var id = $('#input' + idn).toggleClass("class1 class2");
}); 
```

# iphone - 如何为我的第 6 个标签栏项目设置徽章值？

> ID：12386383
> 
> 赞同：0
> 
> 时间：2012-09-12T10:42:16.993
> 
> 标签：iphone, ios, ios5, ios4

我想在我的第 6 个 tabbaritem 上设置徽章值？？怎么做。我可以使用 self.tabbaritem.badgevalue=@"" 在第 4 个 tabbaritem 上设置徽章值

但是使用相同的原理，我无法将徽章设置为我的第 6 个 tabbaritem。请帮我？？？

以下代码包含我的徽章值。

```
 CustomBadge *customBadge1=[[CustomBadge alloc]init];

            customBadge1 = [CustomBadge customBadgeWithString:[self getBadges]
                                              withStringColor:[UIColor whiteColor] withInsetColor:[UIColor redColor] withBadgeFrame:YES withBadgeFrameColor:[UIColor whiteColor] 
                                                    withScale:1.0 withShining:YES];

            [customBadge1 setFrame:CGRectMake(self.view.frame.size.width/2-customBadge1.frame.size.width/4,20, customBadge1.frame.size.width, customBadge1.frame.size.height)];

            [self.view addSubview:customBadge1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:48:34.450

首先，您不应该在 Tabbar 中有第 6 个选项卡，因为它违反了 Apple 设定的设计规则。

因为这会导致更多按钮显示为第 5 个按钮。单击此按钮将重定向到表格视图，该视图将显示您无法将徽章设置到的第 5 个和第 6 个选项卡视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:28:14.317

有趣的问题——如果你的标签栏支持编辑，你可以在运行时重新排序标签，标签在前 4 个位置和“更多”控制器之间移动。（第 5 个位置是为“更多...”保留的）。

只有前 4 个项目有一个实际的 UITabBarItem ，这是徽章所在的位置。为了支持与第 6 件事关联的徽章，您可以覆盖选项卡编辑功能，调用它们的 [super] 方法，然后检查重新排序的项目是否应该有徽章。如果是这样，请设置它们的值。

当然，这需要您跟踪“更多”项目的徽章值，以便在显示时设置它们。

您还可以覆盖/扩展“更多”控制器行为以在表格行中显示徽章值，可能在附件指示器旁边。

See this answer for pointers: [Customizing the More menu on a Tab bar](https://stackoverflow.com/questions/438381/customizing-the-more-menu-on-a-tab-bar)

# c# - 在 Window.xaml.cs 中订阅 PropertyChanged 事件

> ID：12386385
> 
> 赞同：2
> 
> 时间：2012-09-12T10:42:20.613
> 
> 标签：c#, .net, wpf, inotifypropertychanged

我有一个要转换为实现 INotifyPropertyChanged 的​​模型的 DataTable。

这将绑定到一个带有复选框的列表框。当复选框被选中时，PropertyChanged 事件会触发。我想处理这个问题，因为我有一个绑定到 DataTable 的 DataGrid。我想根据选中的项目过滤该 DataTable。

我想订阅 MainWindow.xaml.cs 中的 PropertyChange 事件，但是我不确定如何做到这一点，因为当我假设我只需要一个时，在我的模型的构造函数中注册一个处理程序会创建 X 数量的处理程序？

这是我所拥有的：

```
var categoryModel = ds.Tables[1].Rows.Cast<DataRow>()
                                .Select(x => x["Category"].ToString())
                                .Distinct()
                                .Select(y => new LanguageCategory { CategoryName = y, IsChecked = true });

public class LanguageCategory : INotifyPropertyChanged
    {
        private string categoryName;
        private bool isChecked;
        public event PropertyChangedEventHandler PropertyChanged;

        public string CategoryName
        {
            get { return categoryName; }
            set
            {
                categoryName = value;
                NotifyPropertyChanged("CategoryName");
            }
        }

        public bool IsChecked
        {
            get { return isChecked; }

            set
            {
                isChecked = value;
                NotifyPropertyChanged("IsChecked");
            }
        }

        private void NotifyPropertyChanged(string info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:51:30.530

创建一个新类“Notifier”，它将具有公共事件，比如 DataChanged，以及一个引发 DataChanged 事件的公共方法。然后修改属性更改实现：

```
public bool IsChecked
        {
            get { return isChecked; }

            set
            {
                isChecked = value;
                NotifyPropertyChanged("IsChecked");
                Notifier.RaiseDataChanged();
            }
        } 
```

订阅 MainWindow.xaml 中的 Notifier.DataChanged 事件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T11:29:38.683

`LanguageCategory`您希望在选中其中一个 s 时通知 MainWindow 。你有两个选择。

1) 当您创建您的`LanguageCategory`s 列表时，订阅他们的每个 PropertyChanged 事件。重新创建列表时，您必须记住取消订阅它们。

2) 在 MainWindow 中创建一个回调方法，并在创建每个 LanguageCatagory 时将委托传递给它。LanguageCategory 可以在其 IsChecked 更改时调用它。这类似于 JesseJame 的回答，但不涉及其他课程。这优于 1 的优点是列表更改时不需要清理。

2) 的示例代码

```
var categoryModel = ds.Tables[1].Rows.Cast<DataRow>()
                      .Select(x => x["Category"].ToString())
                      .Distinct()
                      .Select(y => new LanguageCategory(OnChecked) { CategoryName = y, IsChecked = true });

public void OnChecked()
{
   //reload list or whatever
}

public class LanguageCategory : INotifyPropertyChanged
{
    private string _categoryName;
    private bool   _isChecked;
    private Action _checkedCallback;

    public event PropertyChangedEventHandler PropertyChanged;

    public LanguageCategory(Action checkedCallback)
    {
       _checkedCallback = checkedCallback;
    }

    public string CategoryName
    {
        get { return _categoryName; }
        set
        {
            _categoryName = value;
            NotifyPropertyChanged("CategoryName");
        }
    }

    public bool IsChecked
    {
        get { return _isChecked; }

        set
        {
            _isChecked = value;
            NotifyPropertyChanged("IsChecked");
            _checkedCallback();
        }
    }

    //snip rest of code
} 
```

# c# - 使用泛型类型进行强制转换

> ID：12386386
> 
> 赞同：4
> 
> 时间：2012-09-12T10:42:23.870
> 
> 标签：c#, generics, casting

我很确定有一个围绕协方差的简单答案，但我很难看到它！

我有这样的课：

```
internal sealed class GenericCallbackClass<T> : SomeBaseClass
    where T : ICallbackMessageBase
{
    public GenericCallbackClass(string activeId, T message)
        : base(activeId)
    {
        Message = message;
    }

    public T Message { get; private set; }
} 
```

然后，我创建了一个实现 ICallbackMessageBase 的类的实例，名为 Foo 并实例化一个新的 GenericCallbackClass，将其作为 T 的参数传入`var myCallback = new GenericCallback<Foo>("SomeID", new Foo())`

我现在想将它转换为更通用的 GenericCallbackClass 实例，因为我将有许多带有 Foo、Bar 等的实例，但都实现了 ICallbackMessageBase。

所以我想做类似的事情`var callback = myCallback as GenericCallbackClass<ICallbackMessageBase>`

看来我不能做这个演员......有什么想法我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:49:54.680

为什么`<T>`在这种情况下你需要 Generic 。您的 GenericCallback 类中是否还有其他代码可以利用`<T>`. 否则，您可以只依赖每个对象的接口实现，并确保接口定义了您可能需要在回调类中的任何公共属性或操作。

```
public class SomeBaseClass 
{
   public SomeBaseClass (string activeId) 
   {
       //Persist activeId
   }
}

public interface ICallbackMessageBase { /* implementation */ } 
public class Foo : ICallbackMessageBase { /* implementation */ } 

internal sealed class GenericCallbackClass : SomeBaseClass
{
    public GenericCallbackClass(string activeId, ICallbackMessageBase message)
        : base(activeId)
    {
        Message = message;
    }

    public ICallbackMessageBase Message { get; private set; }
}

void Main()
{
    var specific = new GenericCallbackClass("foo", new Foo());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:52:28.003

您是否考虑过使用中间基类？

```
internal class GenericCallbackClassBase
{
    public GenericCallbackClassBase(ICallbackMessageBase message)
    {
        Message = message;
    }

    public ICallbackMessageBase Message { get; private set; }
} 
```

然后，您可以从中派生通用版本：

```
internal sealed class GenericCallbackClass<T> : GenericCallbackClassBase
where T : ICallbackMessageBase
{
    public GenericCallbackClass(T message)
        : base(message) { }

    public new T Message
    {
        get { return (T)base.Message; }
    }
} 
```

它基本上只是一个为消息属性添加类型检查和自动转换的包装器。然后，您将能够执行此操作：

```
var g = new GenericCallbackClass<A>(a);
var g2 = g as GenericCallbackClassBase; 
```

属性将`g.Message`是 type `A`，而`g2.Message`属性将是 type `ICallbackMessageBase`。

# php - PHP MySQL 日期之间

> ID：12386387
> 
> 赞同：1
> 
> 时间：2012-09-12T10:42:26.533
> 
> 标签：php, mysql, datetime

该系统用于电话合同比较。最初我们可以按长度过滤结果，以月为单位。但是，我们选择将其作为`timestamp`合同*结束日期*存储在数据库中。

原来的PHP如下：

```
$min = min($_POST["length"])-6;
$max = max($_POST["length"]);
$query[] = "length BETWEEN $min AND $max"; 
```

总而言之，这就是我们目前所拥有的：

1.  在数据库中存储合同的结束日期（作为时间戳）

2.  帖子值包含从现在起应该持续多少个月（例如，7-12 个月的值为 7）

**我们如何更改 PHP 计算以从数据库中获取值之间的值？**

非常感谢，尼克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:04:46.287

```
<?php
    $diff = 7;     // This may be set to $_POST['length']
    $max = date("Y-m-d");
    $min = date("Y-m-d", strtotime("$diff months ago"));
    $query[] = "DATE(`timestamp_field`) BETWEEN CAST($min AS DATE) AND CAST($max AS DATE)";
?> 
```

# ios - TableView Cell 打开不同的视图

> ID：12386388
> 
> 赞同：-1
> 
> 时间：2012-09-12T10:42:27.283
> 
> 标签：ios

我有 3 行的 tableview，我有 3 个视图（xib）。我想单击第 1 行打开 View1，单击第 2 行打开 View2...

我是 iOS 新手。请帮忙，先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:46:16.237

。H

```
@class YourClass : ParentClass <UITableViewDataSource, UITableViewDelegate> 
```

.m

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    yourTableView.delegate = self;
    yourTableView.dataSource = self
}

-(void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath{
     switch (indexPath.row) {
        case 1:
        {
          //open view 1
        }
            break;
        case 2:
        {
          //open view 2
        }
            break;
        case 3:
        {
         //open view 3   
        }
            break;

        default:
            break;
    }
} 
```

# javascript - 添加变量名称而不是其值，javascript

> ID：12386390
> 
> 赞同：1
> 
> 时间：2012-09-12T10:42:33.640
> 
> 标签：javascript, jquery, json

向 JavaScript 对象添加值时遇到问题：要添加的值是一`key,value`对。这是示例：

```
//JavaScript object

var cart=new Object();

function add()
{
  var rating="1"
  var category="somecat";
  var user="user1";

   if(cart[user]==null)

        cart[user]={category:rating};

   else

         cart[user][category]=rating;
 } 
```

我所期待的是，如果`user`存在于购物车对象中，那么他的特定值应该被替换，如果`user`不存在，那么应该添加新的用户和类别。

该代码在`user`已经存在时工作正常。问题是，当我添加一个新元素时，`cart[user]={category:rating}`它会将变量名称添加为键，即类别，而不是其中的值（“somecat”）。

有没有办法使用 json、jquery 或 javascript 本身来做到这一点？

有没有办法在变量内部赋值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T10:44:44.797

无法使用变量在对象文字符号中定义属性名称。它接受标识符或字符串，但都标识属性名称，而不是变量。

您必须创建对象然后添加属性：

```
if(!cart[user]) { 
   cart[user] = {};
}
cart[user][category] = rating; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T13:55:08.750

您将需要更换

```
{category:rating} 
```

和

```
var obj = {};
obj[category] = rating; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:01:49.793

创建对象文字时，键必须是字符串，因此在您的代码中它将是“类别”。相反，如果您这样做：

```
 var rating="1"
  var category="somecat";
  var user="user1";

   if( !cart[user] ) {     
        cart[user]={};  
   }

   cart[user][category]=rating; 
```

这会将一个不存在的用户初始化为一个空对象，然后添加类别。

# python - 欧拉计划问题 18：在三角形网格中找到最佳路线

> ID：12386396
> 
> 赞同：1
> 
> 时间：2012-09-12T04:16:48.093
> 
> 标签：python

[欧拉计划问题 18](http://projecteuler.net/problem=18)要求我们找到一个三角形网格的从上到下的路线，并具有最大和。

我的程序应该能够接受如下所示的输入。测试用例的数量 (2) 出现在第一行，然后为每个测试用例给出行数 (4)，然后是测试用例的数据，每行一行。

```
2 
4 
3 
7 4
2 4 6
8 5 9 3
6
690
650 901
65 774 67
435 248 677 385
878 90 378 191 703
141 296 143 756 938 529 
```

程序应该为每个测试用例产生一行输出，给出最大和的路由：

```
23 
4176 
```

我尝试使用 python 来实现它。

代码如下：

```
def triangle(rows):
    PrintingList = list()
    for rownum in range (rows ):     
        PrintingList.append([])
        newValues = raw_input().strip().split()
        PrintingList[rownum] += newValues
    return PrintingList

def routes(rows,current_row=0,start=0): 
        for i,num in enumerate(rows[current_row]): 
            if abs(i-start) > 1:   
                continue
            if current_row == len(rows) - 1: 
                yield [num]
            else:
                for child in routes(rows,current_row+1,i):
                    yield [num] + child

testcases = int(raw_input())
for num in range(testcases):
    rows= int(raw_input())
    triangleinput = triangle(rows)
    max_route = max(routes(triangleinput),key=sum)
    sum(max_route) 
```

当我输入这个：

```
1
3
1
2 3
4 5 6 
```

我收到此错误：

```
Traceback (most recent call last):
  File "Maximum Route.py", line 23, in <module>
    max_route = max(routes(triangleinput),key=sum)
TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

需要一些指导..如果有其他错误请指出...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:44:46.417

这是问题所在：

```
newValues = raw_input().strip().split() 
```

您需要将输入转换为整数：

```
newValues = map(int, raw_input().split()) 
```

# qemu - libvirt 是否支持写入时复制的克隆 qcow2

> ID：12386398
> 
> 赞同：9
> 
> 时间：2012-09-12T10:42:59.193
> 
> 标签：qemu, kvm, libvirt

qcow2 格式支持写时复制。关于 qcow2 的详细信息[在这里](http://people.gnome.org/~markmc/qcow-image-format.html "关于 qcow2 的详细信息")。libvirt 是否支持使用写时复制克隆 qcow2 VM 映像。我没有找到关于：

> 虚拟克隆

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-14T20:42:56.220

至少从 RHEL 7 附带的 libvirt 开始***，***不，virt-manager GUI 和 virsh 命令行工具都没有执行您使用 qcow2 寻求的写时复制魔法。他们会将备份文件复制到一个新的、完全独立的、大小和内容相同的备份文件中。

你可以做的是：

```
qemu-img create -f qcow2 -o backing_file=master.qcow2 clone.qcow2 
```

然后在 virt-manager 中创建一个新的虚拟机，导入*clone.qcow2*作为它的备份文件。一旦您以您想要的方式拥有主映像，这在保留有限的存储空间以及非常快速地配置新 VM 方面非常有效。

警告：一旦您拥有将主映像用作写时复制后备存储的克隆，则***必须***将主映像视为只读。如果您启动 VM 并更改主映像，您将损坏所有引用它的克隆。如果您想进行更改，您要做的是将主映像克隆到一个新的独立映像（为了讨论，将其称为*new-master.qcow2*），然后将您的克隆重新指向新映像：

```
qemu-img rebase -f qcow2 -b new-master.qcow2 clone.qcow2 
```

*qemu-img*会将*master.qcow2*和*new-master.qcow2*之间的差异复制到*clone.qcow2*中，之后您可以安全地删除*master.qcow2*一旦所有写时复制克隆都已更新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-31T21:41:01.260

`virt-clone`现在有了`--reflink`它的帮助下实现了类似的东西`cp --reflink`。这需要文件系统中的写时复制支持，但也可以通过 libvirt 的支持链概念来实现。但是[，当格式为 qcow2 时，使用 --reflink 对 libvirt 中的磁盘映像进行卷克隆尚未以任何方式实现，](https://bugzilla.redhat.com/show_bug.cgi?id=1324006)即使它适用于存储在 btrfs 中的原始映像。

```
# virt-clone --reflink --auto-clone --original test
ERROR    Couldn't create storage volume 'test-clone.qcow2': 'unsupported  flags (0x2) in function virStorageBackendCreateQemuImg'`

# virsh
virsh # vol-clone --pool testpool test.qcow2 test-clone.qcow2 --reflink
error: Failed to clone vol from test.qcow2
error: unsupported flags (0x2) in function virStorageBackendCreateQemuImg 
```

然而，libvirt 的后备链概念（或后备存储）适用于 qcow2：

```
virsh # vol-create-as testpool test-clone.qcow2 20G --backing-vol-format qcow2 --format qcow2 --backing-vol test.qcow2

virsh # vol-dumpxml --pool testpool test-clone.qcow2
...
<backingStore>
  <path>/testpool/test.qcow2</path>
  <format type='qcow2'/>
...

virsh # domstats --backing testvm
block.0.name=vda
block.0.path=/testpool/test-clone.qcow2
...
block.1.name=vda
block.1.path=/testpool/test.qcow2
block.1.backingIndex=1 
```

这也适用于通过指定后备存储映像使用 virt-manager 创建新卷。

这样一个使用 qemu-imq 独立于 libvirt 创建的克隆：

```
qemu-img create -f qcow2 -o backing_file=test.qcow2 test-clone.qcow2 
```

然后在 libvirt 中使用的表示方式与上面使用 virsh vol-create-as 创建的方式相同。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-17T07:36:47.257

virt-clone 会将**您**的磁盘映像克隆为与原始文件格式相同的文件格式。

如果您的原始磁盘是 LVM 分区，那么您必须克隆到磁盘原始格式映像，因为 lvm 分区是原始设备

例如：

```
# virt-clone -d -o winxp -n winxpclone -f winxpclone.img

# qemu-img info winxpclone.img 
image: winxpclone.img
file format: raw
virtual size: 5.0G (5368709120 bytes)
disk size: 3.1G 
```

您可以将克隆的磁盘映像转换为 qcow2：

```
# qemu-img convert -f raw winxpclone.img -O qcow2 winxpclone.qcow2

# qemu-img info !$ 
qemu-img info winxpclone.qcow2 
image: winxpclone.qcow2
file format: qcow2
virtual size: 5.0G (5368709120 bytes)
disk size: 3.1G
cluster_size: 65536 
```

如果你的虚拟机有一个 qcow2 文件格式的磁盘映像，那么 virt-clone 会将你的磁盘映像克隆为一个 qcow2 文件格式

```
# virt-clone -d -o winxpclone -n winxpcloneclone -f winxpcloneclone.img

# qemu-img info winxpcloneclone.img 
image: winxpcloneclone.img
file format: qcow2
virtual size: 5.0G (5368709120 bytes)
disk size: 3.1G
cluster_size: 65536 
```

恢复：

virt-clone 将与原始磁盘保持相同的文件格式。

一个好的解决方案是使用 virt-sparsify

[http://libguestfs.org/virt-sparsify.1.html](http://libguestfs.org/virt-sparsify.1.html)

减小导出的磁盘映像大小

# android - 使用外部 Android 应用程序安全地打开文件，无需将文件复制到外部存储

> ID：12386399
> 
> 赞同：3
> 
> 时间：2012-09-12T10:43:02.303
> 
> 标签：android, security, file-io, android-sdcard

我正在做一个安全的应用程序，用户可以在其中浏览一些文件并使用手机上的应用程序打开它们。所以现在，我的应用程序非常安全，文件加密得很好，但我有一个重大突破。实际上，我正在使用我的应用程序打开不同类型的用户安全文件（pdf、doc、txt、jpg、...），因此我使用用户手机上的外部应用程序来打开它们。但我的问题就在这里，因为要让另一个应用程序打开这些文件，我需要为我要使用的应用程序提供一个 Android 存储位置。

这是我现在正在使用的代码：

```
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
File fileToOpen = new File(activity.getExternalCacheDir().getAbsolutePath() + 
    "/" + fileName);

MimeTypeMap mime = MimeTypeMap.getSingleton();
String extension = fileToOpen.getName().substring(
        fileToOpen.getName().lastIndexOf(".") + 1);
String type = mime.getMimeTypeFromExtension(extension);
intent.setAction(Intent.ACTION_VIEW);

intent.setDataAndType(Uri.fromFile(fileToOpen), type);

Manager.getActivity().startActivityForResult(intent,
        ExplorerActivity.FILE_CLOSED_SUCCESSFULLY); 
```

所以，正如你在我的代码中看到的，我需要将我的真实文件存储到缓存目录中才能打开它，所以如果小偷可以访问用户手机，它可以打开这个目录中的真实文件，所以我的应用程序是不再安全。当然，我会在用户关闭它并加密后立即删除这个普通文件，但删除并不意味着该文件已从手机中完全删除。在删除之前，我用一些空字节重写，但这还不足以安全地删除这个文件。

所以现在，我想从你那里得到一个实现我想做的想法：打开文件而不将其存储到 Android 硬盘中。

以下是我的一些线索：

*   用我自己的应用程序打开文件（但是实现起来很多，因为文件类型太多，我真的不喜欢开发已经存在的东西）
*   找到一个解决方案来打开文件而不将它存储在我的应用程序外部（我的意思是直接用这个文件的字节数组打开文件）
*   将文件存入手机内存（不知道有没有可能）

所以这是一个非详尽的列表，任何其他建议将不胜感激。如果您可以就我提出的解决方案之一提供任何帮助，请不要犹豫。如果我的某个想法完全不可能或错误，请不要犹豫告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:47:12.890

您是否尝试过自己的`contentProvider`覆盖`openFile`，因此您的应用程序私有的文件由您打开，您返回`filedescriptor`其他应用程序可以访问的文件

# mysql - 在 mysql 中动态引入记录

> ID：12386401
> 
> 赞同：1
> 
> 时间：2012-09-12T10:43:11.260
> 
> 标签：mysql, temp-tables

是否可以在 MySQL 中即时创建记录而无需先创建临时表然后填充它？

我正在考虑这样的事情（语法不正确）示例：

```
SELECT * FROM (`id`, `value`) VALUES
(1, "FOO"),
(2, "BAR"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:17:20.347

是的，你可以这样做——

```
SELECT 1 id, 'FOO' value
  UNION
SELECT 2 id, 'BAR' value 
```

# android - 更改首选项摘要

> ID：12386408
> 
> 赞同：4
> 
> 时间：2012-09-12T10:43:26.583
> 
> 标签：android, preferences, preferenceactivity, summary

我仍在寻找一种方法来根据 ListPreference 的当前值更改其摘要。经过一些研究，我设法让它（部分）工作：

```
 ListPreference pref = (ListPreference) findPreference("Repeat_PREFS");

    pref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

        public boolean onPreferenceChange(Preference preference, Object val) {

            ListPreference pref = (ListPreference) findPreference("Repeat_PREFS");

            pref.setSummary(pref.getEntry());
            return true;
        }

    }); 
```

问题是当我第一次选择一个值时，摘要会更改为其他值或根本不更改。当我第二次选择相同的值时，摘要设置正确。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T10:56:01.497

没有方法可以激活偏好的行为。您需要使用要设置为摘要的值调用 setSummary()，例如使用首选项侦听器。

编辑（更改问题后......）：不要使用`Preference.OnPreferenceChangeListener`，因为它在新值被持久化之前被调用（参见[http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html) ) 因此，您第一次更改偏好值的行为。

我建议`OnSharedPreferenceChangeListener`在你的`PreferenceFragment`or中实施`PreferenceActivity`。（不要忘记注册和取消注册监听器。）在对首选项的更改完成后调用此监听器。您还应该在 XML 中为首选项设置默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T18:04:02.343

SharedPreferences OnSharedPreferenceChangeListener 的替代方法，用于遗留代码（如果您无法更新所有侦听器，或者不想将 SharedPreferences 与 Preferences 混合使用）：

使用 Preference.OnPreferenceChangeListener 但不要使用将返回旧值的preference.getEntry()。相反，通过参数 newValue 获取它的新值，在 entryValues 数组中获取它的索引，并通过 entries 数组中的索引获取条目。

```
public OnPreferenceChangeListener prefListener = new OnPreferenceChangeListener() {

    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        //Do not use lp.getEntry(), as it returns the old preference value before being changed
        //Read entry corresponding to entryValue newValue.
        ListPreference lPref = (ListPreference)preference;
        String newEntry = (String) lPref.getEntries()[lPref.findIndexOfValue(newValue.toString())];
        //Compose your summary as you need
        preference.setSummary(
            getResources().getString(
                R.string.myPref_summary, newEntry)); 
        return true;    //Persist new value
    }
}; 
```

这当然对性能不友好，但只要它不会运行很多次，它就可以适合您。

# php - 使用键从数组中读取数据

> ID：12386409
> 
> 赞同：0
> 
> 时间：2012-09-12T10:43:27.653
> 
> 标签：php, arrays

这段代码：

```
$arr1 = array();

for ($i=0; $i<10; $i++)
{
  $arr1[] = array('A'=>rand(0,5), 'B'=>rand(0,4));
} 
```

生成这样的数组：

```
[0] array('A'=>0,[B]=>4)
[1] array('A'=>1,[B]=>3)
[2] array('A'=>3,[B]=>1)
//etc. 
```

我需要得到不同的结构，即：

```
$arr2 = array('A' => array(0,1,3),'B' => array(4,3,1)); 
```

以便以后我可以使用`$arr2['A']`. 如果数组的创建方式如第一个示例中所示，`$arr1['A']`则将无法正常工作。

我怎样才能`$arr2`使用 for 循环，如 for `$arr1`。希望我解释得足够清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:47:29.940

尝试：

```
$arr2 = array(
  'A' => array(),
  'B' => array()
);

for ($i=0; $i<10; $i++)
{
  $arr2['A'][] = rand(0,5);
  $arr2['B'][] = rand(0,4);
} 
```

如果要将现有转换`$arr1`为`$arr2`，请尝试：

```
$arr2 = array(
  'A' => array(),
  'B' => array()
);

foreach ( $arr1 as $value )
{
  $arr2['A'][] = $value['A'];
  $arr2['B'][] = $value['B'];
} 
```

# android - 使用 AsyncTask 下载图像时如何显示默认图像？

> ID：12386411
> 
> 赞同：2
> 
> 时间：2012-09-12T10:43:40.140
> 
> 标签：android, listview, android-asynctask

我正在使用`AsyncTask`从远程服务器下载图像并将它们显示在`ListView`. 我正在使用**[这个博客](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)**来完成它，并且一切正常。

此博客中唯一的问题是在下载图像时会显示 ColorDrawable。但我想在下载图像时显示默认图像。就像在下面的附图中一样：

![图像列表](../Images/71f80c011774cf425ce2109ad0b365e5.png)

在这里你可以看到：

1.  Taylor Loother 和 Oye Oye 的图片已经下载。
2.  服务器上没有 Gopala Govinda 的图像，所以我没有从服务器上为他下载图像并显示默认图像。
3.  对于 Hellboy，图像仍在下载中，因此彩色背景（细黑线）出现在他的名字旁边。**我不想显示这条黑线。我想像**在 Gopala Govinda 前面一样显示默认图像，直到图像没有从服务器加载到地狱男爵。

    有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:39:31.300

我认为您想要做的是让`DownloadedDrawable`类扩展`BitmapDrawable`而不是`Drawable`然后选择适当的超级构造函数之一来指定您的默认图像位图：

```
/**
 * A fake Drawable that will be attached to the imageView while the download is in progress.
 *
 * Contains a reference to the actual download task, so that a download task can be stopped
 * if a new binding is required, and makes sure that only the last started download process can
 * bind its result, independently of the download finish order.</p>
 */
private static class DownloadedDrawable extends BitmapDrawable {
    private final WeakReference<BitmapDownloaderTask> 
       bitmapDownloaderTaskReference;

    private DownloadedDrawable(BitmapDownloaderTask bitmapDownloaderTask,
       Resources resources, Bitmap bitmap) {
        super(resources, bitmap); // you'll have to provide these
        bitmapDownloaderTaskReference =
            new WeakReference<BitmapDownloaderTask>(bitmapDownloaderTask);
    }

    public BitmapDownloaderTask getBitmapDownloaderTask() {
        return bitmapDownloaderTaskReference.get();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:56:09.280

我使用以下开源库来管理 AsyncTasks 中的图像获取： [GitHub 上的 UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)

它具有在下载实际图像时显示“加载”图像的能力。

你可以使用这个库或者自己做类似的事情。

如果您是自己做的，那么当您`ImageView`最初充气时，请使用“加载”图像。然后在你的`AsyncTask`，一旦你的图像被下载，你可以通过覆盖的`onPostExecute`方法来修改这个视图`AsnycTask`（这个方法在 UI 线程上运行，所以你可以在这个方法中修改我们的视图）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:53:40.357

在`ListAdapter`您的活动中`ListView`，只需将默认图像放在`ImageView`.

例如，在 ListAdapter Activity 的 getView 中，您可以这样做：

```
public View getView(int position, View convertView, ViewGroup parent) {

    View vi=convertView;
    if(convertView==null)
    {
        vi = inflater.inflate(R.layout.productrow, null);
    }
    TextView text=(TextView)vi.findViewById(R.id.textViewRow);;
    ImageView imageView=(ImageView)vi.findViewById(R.id.productimage);
    TextView price=(TextView)vi.findViewById(R.id.price);

    ProductDetailModel model=productlist.get(position);

    String result=model.getp_Set();

    vi.setId(position);
    text.setText(Html.fromHtml(result));
    price.setText(" $ "+model.getp_R_Price());    

    // See here
    imageView.setImageResource(R.drawable.stub_id);

    return vi;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T10:48:33.530

或者，您可以从这里使用 RemoteImageView [https://github.com/kaeppler/ignition/wiki/Sample-applications](https://github.com/kaeppler/ignition/wiki/Sample-applications)

# c# - GridView（绑定到 ObjectDataSource）不显示字段对话框中选定字段区域中的字段

> ID：12386412
> 
> 赞同：0
> 
> 时间：2012-09-12T10:43:43.727
> 
> 标签：c#, asp.net, data-binding, gridview, objectdatasource

我有一个绑定到 ObjectDataSoure 的 Gridview。

ObjectDataSource 使用调用 DAL 方法的业务对象，该方法返回带有查询结果的 DataTable。

应用程序在运行时工作，**但在设计时**有一个问题：当我使用 GridView 的任务向导-> 编辑列时：在选定的字段文本区域中**没有出现任何字段**（所以我不能使用向导来编辑列） .

DAL 方法：

```
public override DataTable GetAllWorkers()
    {
        using (SqlConnection con = new SqlConnection(this.ConnectionString)) {
            SqlCommand cmd = new SqlCommand("t_Workers_GetAllWorkers", con);
            cmd.CommandType = CommandType.StoredProcedure;
            con.Open();
            return GetTable(cmd);
        } 

    }

    private DataTable GetTable(SqlCommand cmd)
    {

        SqlDataAdapter adp = new SqlDataAdapter();
        adp.SelectCommand = cmd;
        DataTable dt = new DataTable();
        adp.Fill(dt);
        return dt;

    } 
```

BLL 方法：

```
public static DataTable GetAllWorkers()
    {
        return DataProvider.Instance().GetAllWorkers();
    } 
```

ASPX 网页：

```
 <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
        SelectMethod="GetAllWorkers" TypeName="BLL.BizImpl"></asp:ObjectDataSource>

    <asp:GridView ID="GridView1" runat="server" DataSourceID="ObjectDataSource1" 
        EnableModelValidation="True" Height="156px" Width="270px">
    </asp:GridView> 
```

有人可以解释问题的原因吗？

```
 Thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:48:20.363

似乎因为您没有在您的 aspx 页面中明确声明您的列，您将无法在向导中看到它们。目前您的 GridView 填充了数据，因为

```
AutoGenerateColumns 
```

属性默认为真。您可以将 设置为 false 并自己定义列。然后，您可以更好地控制要在其中显示的内容等。

# string - Excel：使用超过 255 个字符的公式

> ID：12386414
> 
> 赞同：13
> 
> 时间：2012-09-12T10:43:45.090
> 
> 标签：string, excel, excel-formula

我在excel中有以下公式

```
=CONCATENATE("insert into #UpdateData (mondayopenhour, mondayopenmin,mondayclosehour, mondayclosemin,tuesdayopenhour, tuesdayopenmin,tuesdayclosehour, tuesdayclosemin,wednesdayopenhour, wednesdayopenmin, wednesdayclosehour, wednesdayclosemin,thursdayopenhour, thursdayopenmin,thursdayclosehour, thursdayclosemin, fridayopenhour, fridayopenmin, fridayclosehour, fridayclosemin, saturdayopenhour, saturdayopenmin, saturdayclosehour, saturdayclosemin, sundayopenhour, sundayopenmin, sundayclosehour, sundayclosemin values ('",TRIM(A2),"',",MID(B2,1,2),",",MID(B2,3,2),",",MID(C2,1,2),",",MID(C2,3,2),",",MID(D2,1,2),",",MID(D2,3,2),",",(MID(E2,1,2),",",MID(E2,3,2),",",MID(F2,1,2),",",MID(F2,3,2),",",MID(G2,1,2),",",MID(G2,3,2),",",MID(H2,1,2),",",MID(H2,3,2),",",MID(I2,1,2),",",MID(I2,3,2),",",MID(J2,1,2),",",MID(J2,3,2),",",MID(K2,1,2),",",MID(K2,3,2),",",MID(L2,1,2),",",MID(L2,3,2),",",MID(M2,1,2),",",MID(M2,3,2),",",MID(N2,1,2),",",MID(N2,3,2),",",MID(O2,1,2),",",MID(O2,3,2),")") 
```

当我尝试运行它时，出现以下错误

> 公式中的文本值限制为 255 个字符。要在公式中创建超过 255 个字符的文本值，请使用 CONCATENATE 函数或连接运算符 (&)。

我一直在网上寻找这个，但没有真正的解决方案！有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T15:27:39.700

我也遇到了这个问题......但这并不是一个真正的问题。一个单元格中只能有 255 个字符，但在公式中是无限的。您的公式将导致错误，因此 excel 将其作为文本而不是公式读取。找到你的错误，你的公式就会起作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T11:31:31.120

现在这是一个混乱的功能。您必须将输入分开`CONCATENATE`。

现在你只有一个非常大的字符串，从 "insert ..." 开始，以 "..MID(O2,3,2),")" 结束 - 或者至少，我认为这就是结束的地方，由于所有的“，”，要通过它真的很难。

以下是您应该如何使用`CONCATENATE`：

```
=CONCATENATE("insert into #UpdateData (mondayopenhour,","mondayopenmin,") 
```

您可以扩展它，因此您不会有一个长度超过 255 个字符的字符串。

编辑：顺便说一句-您当前的字符串大约有 972 个字符。

您可以使用以下公式简化分离：

```
=MID("insert into #UpdateData (mondayopenhour, mondayopenmin,mondayclosehour, mondayclosemin,tuesdayopenhour, tuesdayopenmin,tuesdayclosehour, tuesdayclosemin,wednesdayopenhour, wednesdayopenmin, wednesdayclosehour, wednesdayclosemin,thursdayopenhour, thursdayopenmin,thursdayclosehour, thursdayclosemin, fridayopenhour, fridayopenmin, fridayclosehour, fridayclosemin, saturdayopenhour, saturdayopenmin, saturdayclosehour, saturdayclosemin, sundayopenhour, sundayopenmin, sundayclosehour, sundayclosemin values ('",TRIM(A2),"',",MID(B2,1,2),",",MID(B2,3,2),",",MID(C2,1,2),",",MID(C2,3,2),",",MID(D2,1,2),",",MID(D2,3,2),",",(MID(E2,1,2),",",MID(E2,3,2),",",MID(F2,1,2),",",MID(F2,3,2),",",MID(G2,1,2),",",MID(G2,3,2),",",MID(H2,1,2),",",MID(H2,3,2),",",MID(I2,1,2),",",MID(I2,3,2),",",MID(J2,1,2),",",MID(J2,3,2),",",MID(K2,1,2),",",MID(K2,3,2),",",MID(L2,1,2),",",MID(L2,3,2),",",MID(M2,1,2),",",MID(M2,3,2),",",MID(N2,1,2),",",MID(N2,3,2),",",MID(O2,1,2),",",MID(O2,3,2),")",2,255) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-28T14:06:10.843

至于我对同一问题的解决方案，那些长文本我把它放在一个单独的单元格上，而不是我的公式本身的一部分。例子：

```
=CONCATENATE("INSERT INTO CAS_ACD (ACD_NUMBER, WAGON_WHEEL_INDEX, WAGON_WHEEL_COUNT, WAGON_WHEEL_COUNT_MAX, WAIT_TIME, MAX_WAIT_TIME,
MON_TIME, TUE_TIME, WED_TIME, THU_TIME, FRI_TIME, SAT_TIME, SUN_TIME, DATE_CLOSED1,
DATE_CLOSED2, DATE_CLOSED3, DATE_CLOSED4, DATE_CLOSED5, DATE_CLOSED6, DATE_CLOSED7, DATE_CLOSED8,
DATE_CLOSED9, DATE_CLOSED10, DATE_CLOSED11, DATE_CLOSED12, DATE_CLOSED13, DATE_CLOSED14,
DATE_CLOSED15, DATE_CLOSED16, DATE_CLOSED17, DATE_CLOSED18, DATE_CLOSED19, DATE_CLOSED20,
CTI_SERVER_ADDR, PROGRAM_NUM, VERSION_NUM, COMMENTS, TOD_VOICE_DIR, TOD_VS, ACD_NAME) 
VALUES ("B2, C2,");") 
```

相反，我将其存储到单元格 A2 之一

```
Cell A2 now contains=
INSERT INTO CAS_ACD (ACD_NUMBER, WAGON_WHEEL_INDEX, WAGON_WHEEL_COUNT, WAGON_WHEEL_COUNT_MAX, WAIT_TIME, MAX_WAIT_TIME,
MON_TIME, TUE_TIME, WED_TIME, THU_TIME, FRI_TIME, SAT_TIME, SUN_TIME, DATE_CLOSED1,
DATE_CLOSED2, DATE_CLOSED3, DATE_CLOSED4, DATE_CLOSED5, DATE_CLOSED6, DATE_CLOSED7, DATE_CLOSED8,
DATE_CLOSED9, DATE_CLOSED10, DATE_CLOSED11, DATE_CLOSED12, DATE_CLOSED13, DATE_CLOSED14,
DATE_CLOSED15, DATE_CLOSED16, DATE_CLOSED17, DATE_CLOSED18, DATE_CLOSED19, DATE_CLOSED20,
CTI_SERVER_ADDR, PROGRAM_NUM, VERSION_NUM, COMMENTS, TOD_VOICE_DIR, TOD_VS, ACD_NAME) 
VALUES (' 
```

所以我现在的公式是

```
=CONCATENATE( A2, B2, C2) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-12T11:28:55.647

解决此问题的最简单方法是使用一些单元格来构建字符串的单独元素，并使用 concetanate 将它们合并到一个单元格中。它为错误解决提供了更多空间——也许你的陈述有错误，但它们的长度几乎是不可见的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-08T14:46:32.830

我遇到了“超过 255 个字符”的问题，并且在没有 CONCATENATE 的情况下轻松解决了这个问题：

`T1`我将一长串值放入单元格中。然后我的公式如下：

```
="INSERT INTO sql_table_name ("&T1&") VALUES ('"&A40&"','"&B40&"','"&C40&"','"&D40&"','"&E40&"','"&F40&"','"&G40&"','"&H40&"','"&I40&"','"&J40&"','"&K40&"','"&L40&"','"&M40&"','"&N40&"','"&O40&"','"&P40&"','"&Q40&"','"&R40&"','"&S40&"');" 
```

# php - 无法在 MySQL 表中插入 ♥ 字符

> ID：12386415
> 
> 赞同：9
> 
> 时间：2012-09-12T10:43:45.567
> 
> 标签：php, mysql

我正在尝试使用 PHP 将 ♥ 插入 MySQL 表中。它来自输入字段。

该表的字符集是 utf8_general_ci，在 PHP 中我`mysql_query("SET NAMES 'utf8'");`在连接后立即使用。

但是 ♥ 只是变成了“？” 插入时。

我也尝试将 ♥ 从 phpMyAdmin 插入表中，但它返回此错误：

```
Warning: #1366 Incorrect string value: '\xE2\x99\xA5' for column 'subject' at row 1 
```

结果也是“？” 而不是♥。

关于是什么原因的任何想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-12T10:48:08.193

这是因为在表的列上定义的[字符集和排序规则不兼容。](http://dev.mysql.com/doc/refman/5.5/en/charset-column.html)

尝试将表或列的[字符集更改](http://dev.mysql.com/doc/refman/5.5/en/charset-conversion.html)`UTF8`为.

```
ALTER TABLE table_name CONVERT TO CHARACTER SET utf8; 
```

或者

```
ALTER TABLE table_name MODIFY col VARCHAR(255) CHARACTER SET utf8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:48:08.757

尝试这个：

```
ini_set('default_charset', 'utf-8'); 
```

在您的 php 文件中并设置：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

并检查您的数据库以 **整理到 utf8_general_ci**

# google-drive-api - Google Drive SDK 更新共享权限

> ID：12386416
> 
> 赞同：6
> 
> 时间：2012-09-12T10:43:46.343
> 
> 标签：google-drive-api

是否可以通过驱动 SDK 更改共享设置？

如果我使用电子邮件 ID 在用户级别添加权限。我可以看到 doc 的可见性权限为*Private*。如果我将权限设置为 { 'value': None, 'type': "anyone", 'role': "writer"}。我可以看到 doc 的可见性权限为“ *Public on the web* ”。

![在此处输入图像描述](../Images/79ed0ac70529819a3fa83272057e93ea.png)

任何帮助，哪些设置可以将共享设置设置为*任何有链接*的人。

public on web 的问题是我们可以看到匿名用户能够找到文档，并且我们可以在文档上看到未知的存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T12:16:18.643

尝试

```
'value' => 'me', 'type' => 'anyone', 'role' => 'reader', 'withLink' => true 
```

这会将共享设置更改为任何有链接的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T10:26:51.203

使用以下值尝试[此链接](https://developers.google.com/drive/v2/reference/permissions/insert)

> “价值”=“我”，“类型”=“任何人”，“角色”=“读者”

# regex - perl regex - 提取两个分隔符之间的单词

> ID：12386418
> 
> 赞同：1
> 
> 时间：2012-09-12T10:43:51.697
> 
> 标签：regex, perl, unix

我有一个看起来像这样的文本文件：

```
entrez*gene/locuslink:"BRCA2(IV)"|entrez*gene/locuslink:At4g00020@entrez*gene/locuslink:RAD51|entrez*gene /locuslink:At5g20850@
entrez*gene/locuslink:"BRCA2(IV)"|entrez*gene/locuslink:At4g00020@entrez*gene/locuslink:DMC1|entrez*gene/locuslink:At3g22880@ 
```

我希望在 unix 中使用 perl 提取 : 和 @ 分隔符之间的单词，输出应该是：

```
At4g00020  At5g20850
At4g00020  At3g22880 
```

我做了：

```
perl -l -ne '/:["At"]([^@]*)/ and print($1,"\t",$2) 
```

没有成功提前感谢您的帮助

汤姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:54:45.783

您的正则表达式存在一些问题。

首先， [...] 表示与括号内的字符之一匹配的字符类。这意味着将`["At"]`匹配字符 '"'、'A' 或 't' 之一。省略括号和双引号。

其次，您要收集多个匹配项。这可以通过在列表上下文中使用 /g 修饰符来完成：

```
perl -lne '@result = /:At([^@]*)/g; print join("\t", @result)' 
```

最后，根据预期的输出，您还需要捕获 At：

```
perl -lne '@result = /:(At[^@]*)/g; print join("\t", @result)' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:50:33.713

尝试这样的事情：

```
perl -l -ne '/:(?=At)([^@]*)/ and print($1,"\t",$2)' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:50:27.410

这对我有用：

```
perl -l -ne '/:([^:@]*)@.*:([^:@]*)@/ and print($1,"\t",$2)' 
```

搜索`:`，后面跟着一个不带分隔符的字符串，将其`@`关闭。

# iphone - 控制台窗口中的预期内容类型

> ID：12386422
> 
> 赞同：1
> 
> 时间：2012-09-12T10:44:00.520
> 
> 标签：iphone, ios, drupal

在尝试有关 Dupal 的[workhabitinc](http://www.google.co.in/url?sa=t&rct=j&q=workhabitinc%20%2b%20git%20%2b%20drupal%20examples&source=web&cd=2&cad=rja&ved=0CC0QFjAB&url=https://github.com/workhabitinc/drupal-ios-sdk-example&ei=G2FQUO6ELs_irAeF7oDgAQ&usg=AFQjCNGZOQyKrKicV8si46eq1dzC2ozKpw&sig2=n4uOFMcz8qf9kvEjLDbT9w)示例代码时，我在**控制台窗口中得到了以下信息**

```
 2012-09-12 15:00:36.751 Drupal Questions[3156:c07] Expected content type {(
        "text/json",
        "text/javascript",
        "application/json",
        "text/plain"
    )}, 
```

我是drupal的新手，无法理解这一点..这与**setting.h**（或任何配置）有关吗？

在 README 文件中有一点“**使用正确的 url 和端点更新 Settings.h）** ”这是什么意思？和

**除了drupal sdk**和**AFNetworking**文件之外，我应该向项目添加什么？

非常感谢任何帮助:)

# iphone - iphone中的iAd问题

> ID：12386424
> 
> 赞同：1
> 
> 时间：2012-09-12T10:44:11.043
> 
> 标签：iphone, ios

我刚刚使用 iAds 完成了我的应用程序，为了删除广告，我在我的应用程序中实现了应用内购买。

我想知道删除用户支付的广告是正确的，但是当用户删除应用程序并重新安装它时，iAds 再次显示（因为我没有使用网络服务）。

另一种方法是我制作两个具有相同功能的应用程序，一个有 iAds，一个没有 iAds。请建议我正确的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:53:47.220

是的，这是正确的功能。但是，如果用户想在删除/重新安装您的应用程序后再次删除广告，他们可以免费“重新购买”您的应用内购买以再次删除广告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:57:04.190

@MSB如果您在应用程序中实施以删除广告，这是一种正确的方法。如果用户删除应用程序并重新安装，尝试购买应用程序内应用程序，如果应用程序内应用程序在应用程序商店中是非消耗品，则应用程序商店将其显示为已购买。您可以维护应用内的 BOOL 值，以便您可以跟踪和隐藏您的广告。

# java - 将列表保存在文本文件中

> ID：12386429
> 
> 赞同：0
> 
> 时间：2012-09-12T10:44:20.977
> 
> 标签：java, file, text, text-files

我正在做一个简单的学习计划，我正在做一个简单的用户登录系统。到目前为止，我已经做到了，当用户注册时，它被保存在一个名为注册用户名的文本文件中。登录部分也有效。现在我希望当用户注册另一个框架（`subjectFrame`）时打开。在这个框架中，用户输入主题。

当他按下完成时，我想将列表保存在一个名为`username + "subjects"`.
如何获取之前注册的用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:49:23.760

`when the user registers it is saved in a textfile named as the username of whom registered`

在这种情况下，您如何获取用户名？与保存主题详细信息时获取用户名的方式相同。

当用户登录时，保存用户名以完成会话，直到用户注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:38:11.500

我假设您想将主题和用户名存储在同一个文件中。如果是这样，您可以做的就是等到程序输出到文本文件结束。只需将用户名存储在局部变量中，然后在主题框架中使用相同的想法。最后，在程序退出之前，只需将两个字段以您想要的任何格式输出到文本文件。

# vba - VBA：抑制“预期：表达式”Msgbox

> ID：12386430
> 
> 赞同：3
> 
> 时间：2012-09-12T10:44:23.280
> 
> 标签：vba

当我使用 VBA 时，有时我会留下不完整的一行代码来处理其他行。

然后我会得到Msgbox "Compile Error: Expected: expression"，我刚才留下的那行会是红色的。

如何抑制 MsgBox，但代码仍然变红？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T11:28:03.197

你只能在全局范围内这样做；

*工具*>*选项*>*编辑器*并取消选择*自动语法检查*

您将收到视觉警告，但没有消息框

# mocking - dart - 模拟，按名称调用的方法名，重构失败

> ID：12386432
> 
> 赞同：1
> 
> 时间：2012-09-12T10:44:25.570
> 
> 标签：mocking, dart, dart-mirrors

我已经使用了 dart unittest 框架和[所描述的包含的 Mock 类](http://www.dartlang.org/articles/mocking-with-dart/)

然而，模拟调用中存在依赖关系，即：

```
..store.when(callsTo('isLocked')).thenReturn(false); 
```

其中对`isLocked`方法的调用是按名称调用的。如果有人重命名该`isLocked`方法，重构框架将不会重命名该调用。

我想知道反射（镜子）是否可以以某种方式提供帮助，但我还没有找到解决方案。

干杯彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:15:30.740

作为一般规则，我尽量避免模拟类（除非它们使用外部资源，如 RESTful Web API），特别是因为这个问题。如果 A 类模拟了 B 类的 foo 方法，但 B 类实际上重命名了它的 foo 方法 fooBar，你的测试仍然会通过。但是，当 A 类尝试在运行时调用 B.foo 时，事情就会崩溃。因此，我避免嘲笑任何本地可用的东西。

幸运的是，在 Dart 中的情况比在其他动态语言中要好一些。例如，您可以创建一个实现另一个类的类。所以如果 FakeB 实现了 B，那么你可以在 FakeB 中添加可以在测试 A 时使用的函数。

自然，重构框架知道您的代码 callTo('isLocked') 实际上引用了一些名为 isLocked 的方法，而实际上该方法已重命名为 isReallyLocked，这有点过头了。但是，我认为您在查看镜像 API 时走在正确的道路上。例如，如果您可以编写 callTo(isLocked.name **)**，那就太好了。这样，VM 可以为您的模拟提供更多检查。

自然，真正的目标是在 API 不匹配时让测试失败。我玩了一些镜像 API，我能想到的最好的方法是：

```
#import('dart:io');
#import("dart:mirrors");

void a() {
  print("a");
}

void main() {
  String thisFile = "file://${new Directory.current().path}/${new Options().script}";
  print(currentMirrorSystem().libraries[thisFile].functions['a'].simpleName);
} 
```

这段代码仍然使用“a”作为字符串，但它的好处是如果“a”不作为函数存在，它会爆炸。这有点丑陋和骇人听闻，但它正朝着你所寻找的方向发展。

您可以做的另一件事是：

```
when(callsTo('isLocked')).alwaysCall(isLocked) 
```

在这种情况下，模拟系统只是在调用者和 isLocked 函数之间扮演一个中间人。这种方法有两个缺点：a) 大概您试图完全避免调用 isLocked，否则您将不会使用模拟框架 b) isLocked 是重复的，首先作为字符串，然后作为函数。但是，它确实有几个好处：a）它可以让您记录 isLocked 被调用的事实 b）如果 isLocked 被重命名，它将不起作用；即重命名 isLocked 的人将看到此代码，并希望更新这两个地方。

另一种“蛮力”方法如下：

```
void a() {
  print("a");
}

String makeSureItExists(obj, String name) {
  return obj != null ? name : "NoSuchMethod";   
}

void main() {
  print(makeSureItExists(a, "a"));
} 
```

这使您可以编写类似callsTo(makeSureItExists(login, "login")) 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:22:47.310

好吧，我最终使用的方法是一个带有方法名称的常量类。像这样：

```
class MethodNames{
  final String GET_ELEMENT = 'getElement';
  final String GET_CLASSES = 'get classes';
  final String SET_DISABLED = 'set:disabled';
  final String AS_INPUT = 'asInput';
  final String AS_BUTTON = 'asButton';
  final String SET_INNER_HTML = 'set:innerHTML';
  final String SET_VALUE = 'set:value';
...
  const MethodNames();
} 
```

我的优点是既漂亮又简单。我倾向于这样。

欢呼彼得

# c#-4.0 - 你能从方法中返回隐式类型吗？

> ID：12386437
> 
> 赞同：1
> 
> 时间：2012-09-12T10:44:39.033
> 
> 标签：c#-4.0, types, implicit

你能在 C# 中做这样的事情吗

```
var GetSomething()
{
    var x = new { a = "b", i = 1 };
    return x;
} 
```

或者也许我可以做任何其他选择？关于返回类型是的，我知道。我正在寻找更通用的东西：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:49:22.093

`var`是语法糖——它不是缺少类型。类型在编译时确定。

它只能在方法内部使用。

也许您正在寻找[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741.aspx)改用。

> 动态类型允许其发生的操作绕过编译时类型检查。相反，这些操作是在运行时解决的。

另请参阅[使用类型动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)。

```
dynamic GetSomething()
{
    dynamic x = new { a = "b", i = 1 };
    return x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:02:20.590

```
var a = GetSomething();

static   Object  GetSomething()
{
    var x = new { a = "b", i = 1 };
    return (Object)x;
} 
```

匿名类型可以从方法返回，但必须强制转换为对象，这违背了强类型的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:36:11.683

我设法返回匿名类型。我将它作为对象返回，然后将其转换。感谢任何回答的人：D

```
object GetSomething()
{
    var x = new { a = "b", i = 1 };
    return x;
} 
```

# hibernate - Struts2 Hibernate 在 maven 中

> ID：12386438
> 
> 赞同：1
> 
> 时间：2012-09-12T10:44:41.980
> 
> 标签：hibernate, maven, struts2

如何在maven中将hibernate集成到struts2。我知道要向 pom.xml 添加休眠依赖项，但我不知道需要哪些 jar 文件。我尝试了hibernate的所有jar文件，导致404 page not found错误。有人可以确切地告诉我 Struts2 hibernate 在 maven.an 中所需的 jar 文件是什么。一个示例将是可观的。

这是 pom.xml 的代码

```
<project xmlns="http://maven.apache.org/POM/4.0.0"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-   v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
 <groupId>org</groupId>
  <artifactId>Strurts2Hibernate</artifactId>
  <packaging>war</packaging>
 <version>1.0-SNAPSHOT</version>
 <name>Strurts2Hibernate Maven Webapp</name>
  <url>http://maven.apache.org</url>
 <profiles>
    <profile>
        <id>default-tools.jar</id>
        <activation>
            <property>
                <name>java.vendor</name>
                <value>Sun Microsystems Inc.</value>
            </property>
        </activation>
        <dependencies>
            <dependency>
                <groupId>com.sun</groupId>
                <artifactId>tools</artifactId>
                <version>1.6.0</version>
                <scope>system</scope>
                <systemPath>C:/Program Files/Java/jdk1.6.0_21/lib/tools.jar</systemPath>
            </dependency>
        </dependencies>
    </profile>
</profiles>
 <dependencies>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
</dependency>

<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-core</artifactId>
    <version>2.3.1.2</version>
</dependency>

<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.21</version>
</dependency>

<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.6.6</version>
</dependency>

<dependency>
    <groupId>antlr</groupId>
    <artifactId>antlr</artifactId>
    <version>2.7.7</version>
</dependency>

<dependency>
    <groupId>dom4j</groupId>
    <artifactId>dom4j</artifactId>
    <version>1.6.1</version>

</dependency>

<dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.1.1</version>
</dependency>

<dependency>
    <groupId>commons-collections</groupId>
    <artifactId>commons-collections</artifactId>
    <version>3.2.1</version>
</dependency>

<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.16</version>
</dependency>

<dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging-api</artifactId>
    <version>1.1</version>
</dependency>

<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator-annotation-processor</artifactId>
    <version>4.3.0.Final</version>
</dependency>

<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>4.3.0.Final</version>
    </dependency>

<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate</artifactId>
    <version>3.2.3.ga</version>

</dependency>

<dependency>
    <groupId>org.hibernate.javax.persistence</groupId>
    <artifactId>hibernate-jpa-2.0-api</artifactId>
    <version>1.0.1.Final</version>
</dependency>

<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-convention-plugin</artifactId>
    <version>2.3.4.1</version>
    <exclusions>
        <exclusion>
            <artifactId>commons-lang3</artifactId>
            <groupId>org.apache.commons</groupId>
        </exclusion>
    </exclusions>
</dependency>

<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4</version>

</dependency>

<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.6.4</version>
</dependency>

<dependency>
    <groupId>asm</groupId>
    <artifactId>asm-tree</artifactId>
    <version>1.5.3</version>
</dependency>

 </dependencies>

  <build>
<finalName>Strurts2Hibernate</finalName>
<plugins>
    <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
            <source>1.6</source>
            <target>1.6</target>
        </configuration>
    </plugin>
</plugins>
</build>
</project> 
```

Web.xml

```
 <web-app>
<display-name>Struts 2 Web Application</display-name>

<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

</web-app> 
```

Struts.xml

```
<struts>
  <constant name="struts.devMode" value="true" />

  <package name="myhibernate" extends="hibernate-default">

  <action name="addStudent" method="execute" class="com.in.AddStudentAction">
     <result name="success" type="redirect">
           listStudents
     </result>
  </action>

  <action name="listStudents" method="listStudents" class="com.in.AddStudentAction">
     <result name="success">/students.jsp</result>
  </action>

 </package>

 </struts> 
```

我谷歌它说一些 jar 冲突无法找到哪些 jar 文件....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:19:53.393

我不确定您到目前为止所做的一切，添加以下条目将为您完成大部分工作

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>3.x.x-Final</version>
</dependency> 
```

Struts2 独立于 hibernate，因此它与您向应用程序添加简单的 hibernate 依赖项相同

[从Maven 中央存储库](http://repo2.maven.org/maven2/)下载依赖项时，有时休眠依赖项会显示一些错误，因此在这种情况下，您需要在 pom.xml 中添加以下条目

```
<repositories>
  <repository>
    <id>jboss-public-repository-group</id>
    <name>JBoss Public Repository Group</name>
    <url>http://repository.jboss.org/nexus/content/groups/public</url>
  </repository>
  ...
</repositories> 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:23:22.140

这里最重要的是 Maven 会为你处理传递依赖。这意味着您只需选择“顶级”持久性依赖项，所有次要的东西（传递依赖项）都将由 Maven 为您拉入。许多开发人员在尝试填充他们的 POM 依赖项列表时仍然应用“我需要的所有 jar 是什么”逻辑。这是不必要且令人困惑的。您必须通过仔细阅读 Hibernate / JPA 文档来确定您自己真正需要的依赖项。

在我的例子中，我使用了一个使用 JPA Annotations 作为持久性方法的项目。在这种情况下，我们只需要 poms 中的单个跟随依赖项。

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
    </dependency> 
```

我看到你使用的是 hibernate 4.x，所以你必须弄清楚你正在使用哪一个，但我向你保证你的 pom.xml 中有太多。

作为另一个例子。您的 slf4j 依赖项可以使用相同的清理。如果您只是声明单曲：

```
 <dependency>
       <groupId>org.slf4j</groupId>
       <artifactId>slf4j-log4j12</artifactId>
       <version>1.6.4</version>
   </dependency> 
```

Maven 将为您获取所有其他（传递）依赖项，例如 slf4j-api 和 log4j12。

# sql-server - SQL Server 2000 - 从存储在 VARCHAR 中的 XML 中提取数据

> ID：12386447
> 
> 赞同：0
> 
> 时间：2012-09-12T10:45:14.287
> 
> 标签：sql-server, xml, tsql, sql-server-2000

类似于[从 SQL 中获取存储在 varchar 中的 xml 数据，](https://stackoverflow.com/questions/8254778/getting-xml-data-stored-in-a-varchar-out-of-sql)`VARCHAR`我需要从存储在列中的 XML 字符串中提取一个值。

但是，数据位于 SQL Server 2000 上，因此无法使用 XML 类型。

这在 SQL Server 2000 中可行吗？

例如对于以下 XML，我如何选择`<status>`节点中的值：

```
<entities>
    <entity>
        <name>foo</name>
        <status>1</status>
    </entity>
    <entity>
        <name>bar</name>
        <status>2</status>
    </entity>
</entities> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:54:43.803

试试这个：

```
declare @xml varchar(1000)
SET @xml='<entities>
    <entity>
        <name>foo</name>
        <status>1</status>
    </entity>
    <entity>
        <name>bar</name>
        <status>2</status>
    </entity>
</entities>'
select @xml,SUBSTRING(@xml,CHARINDEX('<status>',@xml)+LEN('<status>'),(CHARINDEX('</status>',@xml)-(CHARINDEX('<status>',@xml)+LEN('<status>')))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:49:09.097

您可以使用[OPENXML](http://msdn.microsoft.com/en-us/library/aa276847%28v=sql.80%29.aspx)；将文档中的示例适应您的特定情况应该不会太难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T11:34:19.930

我认为 openxml 是解决您问题的最佳方法。

```
DECLARE @xml VARCHAR(2000)
SET @xml = N'
<entities>
    <entity>
        <name statue="1">foo</name>
        <status>1</status>
    </entity>
    <entity>
        <name statue="2">bar</name>
        <status>2</status>
    </entity>
</entities>
'

DECLARE @docHandle int
EXEC sp_xml_preparedocument @docHandle OUTPUT, @xml

SELECT *
   FROM OPENXML(@docHandle, N'/entities/entity',2)
WITH (name VARCHAR(20), status INT) 
```

# excel - VBA 更改活动工作簿

> ID：12386448
> 
> 赞同：6
> 
> 时间：2012-09-12T10:45:17.213
> 
> 标签：excel, vba

我有一个电子表格，在 VBA 中它会打开其他电子表格并暂时将它们设置为活动的`worksheet`.

但是，我有一个循环，在第一次迭代结束时，我需要将活动工作表设置为启动 VBA 模块的原始工作表。我无法设置新`Workbook`对象来打开原件，因为原件仍在后台打开并且它说它已经打开。

我的问题是我需要将活动更改`Workbook`为原始活动，而我从来没有工作簿对象来引用它？？？

```
'Original workbook is active implicitly

'loop begins

'change active workbook to something else

'Need to change back to original workbook here- but don't have a VBA workbook object

'end of loop 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-12T11:15:29.713

使用`ThisWorkbook`which 将引用包含代码的原始工作簿。

或者在代码开始时

```
Dim Wb As Workbook
Set Wb = ActiveWorkbook 
```

*在返回之前激活所有打开的书籍的示例代码`ThisWorkbook`*

```
Sub Test()
Dim Wb As Workbook
Dim Wb2 As Workbook
Set Wb = ThisWorkbook
For Each Wb2 In Application.Workbooks
    Wb2.Activate
Next
Wb.Activate
End Sub 
```

# graphviz - DOT/graphviz 边缘标签中的下标

> ID：12386449
> 
> 赞同：20
> 
> 时间：2012-09-12T10:45:21.627
> 
> 标签：graphviz, dot

如何使用 Graphviz/DOT 的 HTML 功能将下标字符添加到边缘标签？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-12T12:00:50.663

像这样：

```
digraph g {
  1 -> 2 [label=<Regular<SUB>subscript</SUB>>];
} 
```

# javascript - 在 JavaScript 中使用对象作为属性键

> ID：12386450
> 
> 赞同：6
> 
> 时间：2012-09-12T10:45:26.043
> 
> 标签：javascript

这段代码发生了什么？

```
var a = {a:1};
var b = {b:2};
var c = {};

c[a] = 1;
c[b] === 1 // true!

c[b] = 2;
c[a] === 2 // true! 
```

具体来说，为什么使用查找返回存储在属性中的`b`值？`c``a`

在 JavaScript 中使用对象作为属性的键是什么意思？

我已经在 Chrome/Node 和 Firefox 中对此进行了测试。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T10:49:01.700

> 在 JavaScript 中使用对象作为属性的键是什么意思？

Javascript 对象只允许字符串键，因此您的对象将首先被强制转换为字符串。

> 具体来说，为什么在 c 中查找 b 会返回存储在 a 属性中的值？

`{a: 1}`和的字符串表示`{b: 2}`都是*，* `"[object Object]"`因此，该属性被覆盖。

**编辑：** *如果*你真的需要使用对象作为键（如果可能的话，我更喜欢另一种解决方案），你可以使用对象的 JSON 表示：

```
c[JSON.stringify(a)] = 1
c[JSON.stringify(b)] = 2 
```

但是，再次尝试考虑不同的方法。也许对象具有除对象本身之外的唯一标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:50:49.780

为什么你使用一个对象作为键，键正在成为`object.toString()`的结果，即`[Object Object]`,

所以你所做的就是为属性设置一个值`"[Object Object]"`，并通过属性获取值`"[Object Object]"`。

# android - 如何使用 Eclipse 在 Bluestack 应用程序播放器上运行 Android 应用程序？

> ID：12386453
> 
> 赞同：5
> 
> 时间：2012-09-12T10:45:31.583
> 
> 标签：android, eclipse, android-emulator

我正在使用 Eclipse 开发 Android 应用程序，现在我想使用 Bluestack 作为我的模拟器。我试过了

> 亚行连接 127.0.0.1:5555

成功，我可以在运行应用程序时在我的设备列表中找到 Bluestack。在控制台窗口中说

> 在设备 127.0.0.1:5555 上启动活动 example.com.SplashActivity

我的设备视图位于我的应用程序中。我什至在 Bluestack 上安装了 Launcher Pro，但在 Bluestack 中看不到我的应用程序。我该怎么做 ？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T10:55:25.520

据我所知，您需要在 Bluestack 应用程序播放器中安装 apk 文件，然后您才能在 bluestack 上运行您的应用程序。如果您已经安装了 bluestack，然后双击 apk 文件，它将自动安装在 bluestack 应用程序播放器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:05:37.757

I tried: adb connect 127.0.0.1 then, create simple project in Eclipse, then "run configuration" - "target" - "Always prompt to pick device" - "Run". End project automatically run in Bluestack simulator.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T15:52:03.887

更改与 bluestacks 相关的 google 帐户密码。没有密码确认，更新无法继续。永远不要更新 bluestacks 中的密码。将不再有自动应用程序安装。

# windows-phone-7 - XNA-WP7：制作小地球和大陆板块

> ID：12386455
> 
> 赞同：1
> 
> 时间：2012-09-12T10:45:39.697
> 
> 标签：windows-phone-7, xna, geometry

我想做的是地球。就像谷歌地图（缩小地图）一样，我想在中心显示地球球体。

然后，我想用随机大陆板块划分地球表面。

我的主要问题是，我怎样才能让地球和大陆板块像任天堂的动物森友会一样？

我刚刚完成了 3DMax 制作的 Sphere 的展示。（.fbx 文件）

# jquery - jQuery jqModal全窗口弹出浏览器滚动问题

> ID：12386464
> 
> 赞同：2
> 
> 时间：2012-09-12T10:46:00.967
> 
> 标签：jquery, jqmodal

抱歉缺少代码，但基本上我正在使用 jqModal 插件，它工作得很好，正如预期的那样，但是我只是一个关于它的问题，希望有人能阐明我如何解决我的问题。

基本上，我的弹出窗口是浏览器的 100% 宽度和高度，但是浏览器滚动条仍然反映我原始网页的高度，而不是 jqModal，关于如何更改它的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:39:41.097

打开对话框时更改滚动位置将解决您的问题

```
$('dailog-div').dialog(
    autoOpen: false,

        open: function () {
            var scrollPosition = [self.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft, self.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop];
            var html = jQuery('html'); // it would make more sense to apply this to body, but IE7 won't have that       
            html.data('scroll-position', scrollPosition);
            html.data('previous-overflow', html.css('overflow'));
            html.css('overflow', 'hidden');
            window.scrollTo(scrollPosition[0], scrollPosition[1]);
        },
        close: function () {
            var html = jQuery('html');
            var scrollPosition = html.data('scroll-position');
            html.css('overflow', html.data('previous-overflow'));
            window.scrollTo(scrollPosition[0], scrollPosition[1]);
            $(this).dialog('destroy').remove();

        }

    }).dialog('open'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:35:00.777

感谢您输入 Murali，但我找到了另一种解决方法。基本上，我决定在触发弹出窗口时隐藏正文滚动条，然后在弹出 div 中添加滚动条。关闭弹出窗口后，我重新应用正文滚动条，这是一种享受。感谢您花时间查看并回答我的问题。:)

# performance - g++ 编译选项 -g 调试和 -O 优化

> ID：12386467
> 
> 赞同：16
> 
> 时间：2012-09-12T10:46:10.133
> 
> 标签：performance, compilation, g++, options

我对 g++ 编译器不太熟悉，尤其是选项，例如 -s、-g 和 -O。

首先，请问这些选项什么时候生效？在编译或链接阶段？我通常把我需要的所有选项都放在两个阶段。

其次，是否有 -g1、-g2、-g3 选项？我知道 -g 在可执行文件中添加调试信息。其他人有何不同？

第三，-s有什么作用？-s、-g 和 -O3 可以一起工作吗？我的目标是使可执行文件 1）快速运行，2）尽可能小。你有什么建议？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-12T11:01:56.843

您不应该专注于选项，而应该专注于您想要实现的目标。我对您想要实现的目标的一般评论：

*   通常在快速和小型之间进行权衡。-O3 表示快。os 表示在不增加大小的情况下尽可能快。
*   您可以将调试信息 (-g) 与优化 (-O3) 一起使用，但有时信息很差，因为源代码和结果代码之间没有直接联系
*   如果您从可执行文件中删除调试信息 (-s)，您将无法轻松调试该可执行文件（您可以单独保存调试信息，但这是另一回事）

始终使用手册（通过在 shell 中键入“man g++”或通过在互联网上搜索“man g++”来访问）并搜索选项，如果您对它的作用感兴趣的话。如果你有更高级别的问题，那么你可以问（例如手册中解释了 -g1 和 -g3 之间的区别）

作为建议：使用-O3。如果您不断开发程序并使用 GDB 作为调试器，请使用：-ggdb -g3。

编辑：关于何时应用它们：通常你不用担心它是什么阶段，你只需发送选项，g++ 会处理它们。当你想要更具体的东西时，你可以检查更多。

# android - 如何在 android 中像 iPad 应用程序一样做 curl 页面？

> ID：12386481
> 
> 赞同：0
> 
> 时间：2012-09-12T10:47:06.743
> 
> 标签：android, android-layout, android-widget

在我的应用程序中，我正在使用地图视图和相应的应用程序，当我们想要更改卫星视图和普通视图时，curl 页面内部的这些设置可以帮助任何人如何做到这一点。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:05:08.033

See [http://code.google.com/p/android-page-curl/](http://code.google.com/p/android-page-curl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:24:02.913

下面的位置有一个很好的页面卷曲示例。这是基于 opengl 的，与其他可用的解决方案相比，在性能方面要好得多。项目中的代码有很好的文档记录，可以轻松修改以满足您的要求。

[https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl)

# spring-mvc - Spring Roo - 将实体绑定到控制器方法参数字段

> ID：12386484
> 
> 赞同：1
> 
> 时间：2012-09-12T10:47:26.100
> 
> 标签：spring-mvc, spring-roo

我有一个参考文件的 roo 实体：

```
@RooJavaBean
@RooToString
@RooJpaActiveRecord
public class ActivatedConfiguration {

  @NotNull
  @OneToOne
  @JoinColumn(unique = true, nullable = false)
  private Configuration configuration;

  ...
} 
```

在 Spring 控制器中，我使用该实体作为参数注释了 mathod：

```
@RequestMapping(value = "/")
public String startActivation(ActivatedConfiguration activatedConfiguration){
...
} 
```

当我准备 HTML GET 请求时：

```
http://localhost:8080/app?configuration=1&[...] 
```

spring 自动注入了该字段。

问题是：魔法从何而来？如何在我的 junit 测试中模拟数据库获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:10:55.593

这是由在 Spring MVC 中注册的[Converter](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/convert/converter/Converter.html)处理的——如果你查看你的 web 文件夹，你应该看到一个 ApplicationConversionServiceFactoryBean_Roo_ConversionService.aj 类，其中包含适用于你的应用程序的所有不同转换器——应该有一个接收字符串并将其转换为您的`Configuration`类，本质上所做的是将 id 作为字符串，将其转换为 long，然后在存储库中查找`Configuration`具有该 id 的实体，这就是 Spring MVC 绑定参数的方式。

# jqgrid - jqGrid - 动态启用字段

> ID：12386487
> 
> 赞同：1
> 
> 时间：2012-09-12T10:47:32.293
> 
> 标签：jqgrid

我有一种情况，当我进行内联编辑时，我喜欢将一个名为“服务”的字段设置为可编辑为假的位置。

当我单击添加新记录图标（jqGrid 附带的那个）时，我喜欢将“服务”字段的可编辑设置为是。我怎样才能动态地做到这一点？

我在网上查了一下，但找不到合适的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:25:55.073

[我在此处](https://stackoverflow.com/a/4308172/315935)和[此处](https://stackoverflow.com/a/7732536/315935)`editable`描述了动态更改属性的主要思想。重要的是要了解该属性仅适用于*整个列*，但您可以随时更改该值。因此，如果您要在初始化内联编辑**之前**更改某些列的属性值（在直接或间接调用[editRow之前）。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)您可以使用该方法来实现几乎任何动态场景。可能您将不得不使用[自定义导航器按钮](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_buttons)而不是添加的标准按钮（如果您使用该方法）。`editable`*`editable`**`inlineNav`***

 ***在[答案](https://stackoverflow.com/a/7057838/315935)和[另一个](https://stackoverflow.com/a/5376355/315935)中，我还展示了如何隐藏或禁用某些编辑按钮，具体取决于当前选择的行（或取决于行内容）。它可能是一种可以使编辑更加动态的选项。***

# javascript - 将事件处理程序绑定到任何可能的事件

> ID：12386502
> 
> 赞同：0
> 
> 时间：2012-09-12T10:48:25.793
> 
> 标签：javascript, jquery

我知道我可以将事件处理程序绑定到多个事件，但是无论特定元素上发生的事件类型如何，是否可以为所有事件触发事件处理程序？

我的意思是这样的：

```
 $("#myElement").bind(function(){

  //this will fire on any event
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:54:13.227

使用 jQuery，您可以通过调用以下方法获取附加到元素的事件：

```
$._data(element, 'events') 
```

有了这些信息，您可以依次手动触发每个参数，尽管您可能必须小心传入的参数。

# continuous-integration - 使用持续集成工具的经验

> ID：12386503
> 
> 赞同：0
> 
> 时间：2012-09-12T10:48:27.440
> 
> 标签：continuous-integration

我们正在尝试设置持续集成。我们的软件套件包含大约 20 个 C# 解决方案。对于某些项目，单元测试 (NUnit) 已经可用。我们希望自动化构建和测试过程，并尽早获取有关重大更改的信息。

最近，我尝试与 Hudson 一起这样做。有些问题可以通过网络进行密集搜索和一些试验和错误来解决。

现在一个错误阻止了我们前进：当然，我们的解决方案共享一些组件。当共享组件被更改时，我们不希望构建过程在第一次失败后停止——我们想知道所有被破坏的项目。Hudson 无法处理，在使用“参数化触发器插件 2.4 版”时也是如此（它应对第一个完美完成后启动下一个项目，并在构建失败后失败。然后，甚至没有发送电子邮件通知，并且之后，根本没有启动任何下游项目——即使上游项目成功！）。

到目前为止，与 Hudson 的经历相当令人失望，我们考虑采用不同的系统。

你能从你的积极经验中推荐一个持续集成工具，它可以：

*   与 Subversion 集成（用于获取源代码和触发构建）
*   启动 msbuild（例如 Windows 命令行）
*   触发进一步的项目，无论上游项目是否失败（必须这样做！）
*   构建失败时通过电子邮件通知
*   使用 NUnit 开始单元测试（例如命令行）
*   当单元测试失败时通过电子邮件通知
*   与构建/测试环境中的其他计算机合作，在其他系统上部署/测试
*   社区支持可用

更新：我试过詹金斯。无论上游项目是否失败，它都会触发进一步的构建。还没有测试最后两点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:18:31.407

[免责声明：为 CI 工具制造商工作的人的回应]

Bernhard，您的要求（尤其是管理解决方案间的依赖关系）非常适合我公司的[AnthillPro](http://www.urbancode.com/html/products/anthillpro)。

*   与 Subversion 集成（用于获取源代码和触发构建）
    *   是的。我们将使用轮询或 SVN 提交后触发器来检测源代码更改并立即触发构建。
*   启动 msbuild（例如 Windows 命令行）
    *   我们有一个开箱即用的 MS Build 构建类型。
*   触发进一步的项目，无论上游项目是否失败（必须这样做！）

    *   AnthillPro 中的触发非常棒。它可以处理大型构建图，并行构建任何依赖组件，同时不进行不必要的构建。自 2001 年首次引入触发以来，我们一直在改进此功能。
*   构建失败时通过电子邮件通知

    *   电子邮件和/或实例消息。
*   使用 NUnit 开始单元测试（例如命令行）

    *   支持 NUnit 测试结果解析。
*   当单元测试失败时通过电子邮件通知

    *   类似于构建失败的通知
*   与构建/测试环境中的其他计算机合作，在其他系统上部署/测试

    *   完全支持通过环境部署构建。环境是 AnthillPro 中的第一个概念。
*   社区支持可用

    *   这是可能的问题。我们的产品不是免费的。它是镀金的 CI/CD 工具。

# asp.net - 在工具提示中渲染 Html 字符串

> ID：12386504
> 
> 赞同：1
> 
> 时间：2012-09-12T10:48:30.173
> 
> 标签：asp.net, calendar, tooltip

我有一个 asp.net 日历。在日历的 DayRender 事件中，我想将 html 呈现为工具提示。

```
e.Cell.ToolTip= HttpUtility.HtmlEncode("add<BR>peek") 
```

但它不起作用。如何在浏览器中呈现为 html.But 它呈现为

```
"asdsa&lt;BR&gt;peek" 
```

编辑：我以另一种方式尝试过。

```
Label b = new Label();
b.Visible = false;
b.Text = "add<BR>peek";
e.Cell.Controls.Add(b); 
```

显示很好。但我想在日历日期上显示标签。我怎样才能做到这一点？谁能帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:48:10.980

实现这一点的最简单方法是使用 jQuery。您需要使用 css 类使包含单元格和标签可识别为不显眼的 javascript。然后你可以创建一个函数，当单元格悬停在它上面时，它将找到标签并显示它，然后在鼠标移开时隐藏：

将以下行附加到您已经拥有的服务器端逻辑中：

```
b.CssClass = "js-tooltip";
e.Cell.CssClass = "js-tooltip-container"; 
```

然后您的 html 应该看起来像（您不必编写这部分代码，它是您后面代码的结果）：

```
<td class="js-tooltip-container">
    <label class="js-tooltip" style="display:none;">add <br /> peek</label>
</td> 
```

然后你需要添加以下 jQuery：

```
<script type="text/javascript">
$(function(){
    $(".js-tooltip-container").hover(function(){
        $(this).find(".js-tooltip").show();
    }, function(){
        $(this).find(".js-tooltip").hide();
    });
});
</script> 
```

javascript 使用[jQuery 悬停功能](http://api.jquery.com/hover/)。这都是样板的东西，所以如果你想要更健壮和可定制的东西，我会考虑使用[这里](https://stackoverflow.com/a/484144/1048369)建议的插件之一。

# java - Java如何在建立TCP连接后处理HTTP GET请求

> ID：12386509
> 
> 赞同：4
> 
> 时间：2012-09-12T10:48:41.233
> 
> 标签：java, http-request

因此，在建立我的连接监听并接受一个连接之后：

```
ServerSocket serverSock = new ServerSocket(6789);
Socket sock = serverSock.accept(); 
```

当我在浏览器中输入内容时`localhost:6789/index.html`，如何处理传入的 GET 请求并返回`index.html`？`index.html`在同一目录中。

首先，我希望它`index.html`确实存在，如果不存在，我会返回 HTTP 404 消息。然后我将关闭连接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T11:21:47.290

处理 GET 和其他请求其实很简单，但是你必须知道[HTTP 协议](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)的规范。

首先要做的是获取`SocketInputStream`客户端的路径和要返回的文件的路径。HTTP 请求的第一行以这种形式出现： `GET /index.html HTTP/1.1`. 这是一个执行此操作的代码示例：

```
SocketInputStream sis = sock.getInputStream();
BufferedReader br = new BufferedReader(new InputStreamReader(sis));
String request = br.readLine(); // Now you get GET index.html HTTP/1.1
String[] requestParam = request.split(" ");
String path = requestParam[1]; 
```

您创建一个新`File`对象并检查该文件是否存在。如果文件不存在，则向客户端返回 404 响应。否则，您读取文件并将其内容发送回客户端：

```
PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true); 
File file = new File(path);
if( !file.exist()){
  out.write("HTTP 404") // the file does not exists  
}
FileReader fr = new FileReader(file);
BufferedReader bfr = new BufferedReader(fr);
String line;
while((line = bfr.readLine()) != null){
  out.write(line);
}

bfr.close();
br.close();
out.close(); 
```

以下是完整的代码摘要：

```
ServerSocket serverSock = new ServerSocket(6789);
Socket sock = serverSock.accept();

InputStream sis = sock.getInputStream();
BufferedReader br = new BufferedReader(new InputStreamReader(sis));
String request = br.readLine(); // Now you get GET index.html HTTP/1.1`
String[] requestParam = request.split(" ");
String path = requestParam[1];

PrintWriter out = new PrintWriter(sock.getOutputStream(), true);
File file = new File(path);
if (!file.exists()) {
     out.write("HTTP 404"); // the file does not exists
}
FileReader fr = new FileReader(file);
BufferedReader bfr = new BufferedReader(fr);
String line;
while ((line = bfr.readLine()) != null) {
    out.write(line);
}

bfr.close();
br.close();
out.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T11:05:17.237

如果您只想要一个为您处理 HTTP 请求的基于 Java 的 Web 服务器，那么您应该查看[Tomcat](http://tomcat.apache.org/)，它会处理诸如自动返回静态文件之类的事情，并且还允许您定义 Java 代码以提供对特定请求的自定义响应.

您应该阅读某种 Tomcat 快速入门指南，并对 Java Servlet 和 JSP 有基本的了解。

另一种更容易设置和配置的替代方法是[Jetty](http://jetty.codehaus.org/jetty/)，因此您可能也想看看那个。

# php - Facebook PHP SDK：发布对象/动作

> ID：12386510
> 
> 赞同：0
> 
> 时间：2012-09-12T10:48:42.250
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我想知道是否有人可以帮助我。

我正在尝试使用 PHP SDK 发布操作，但在发出请求后它似乎没有返回对象，也没有使用操作更新用户配置文件的活动部分。我在 JS 中可以正常工作，但似乎无法将其移至 php。

```
// include the FB SDK
require_once(APPLICATION_PATH . '/../library/facebook/facebook.php');

// create the application instance
$facebook = new Facebook(array(
    'appId'  => $this->facebookConfig->appid,
    'secret' => $this->facebookConfig->appsecret,
    'cookie' => true
));

// get the user id
$user = $facebook->getUser();
if(!empty($user)) {
    // We have a user ID, so probably a logged in user.
    // If not, we'll get an exception, which we handle below.
    try {

        // post og actions
        if(!empty($this->thanksData->ogobject) && !empty($this->thanksData->ogaction)){

            $method = '/me/' . $this->appData->namespace . ':' . $this->thanksData->ogaction;
            $params = array(
                        $this->thanksData->ogobject => 'http://mydomain.com/thanks', 
                        //'access_token' => $this->fbAuthToken
                    );

            $ret_obj = $facebook->api($method, 'POST', $params);

        }

        // wall post
        if(!empty($this->facebookConfig->wallmsg))
            $this->wallPost($facebook);

    } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $params = array(
            'scope'         => $this->permissions,
            'redirect_uri'  => $this->facebookConfig->applink
        );
        $loginUrl = $facebook->getLoginUrl($params);

        // log errors
        error_log($e->getType());
        error_log($e->getMessage());

        // redirect if not logged in or not enough permissions
        //echo "<script>top.location=\"".$loginUrl."\";</script>";die;
    }

    // Give the user a logout link 
    //echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
} 
```

**JS 中相同的示例** 此代码在我删除它以支持在 PHP 中执行任务之前工作

```
// initialise facebook
window.fbAsyncInit = function() {

    // get the data
    var data = $('body').data();

    FB.init({
        appId   : data.appid, // App ID
        status  : true, // check login status
        cookie  : true, // enable cookies to allow the server to access the session
        xfbml   : true, // parse XFBML
        oauth   : true  // oauth stuff
    });

    // enable actions on page visit
    if(data.object.length > 0 && data.action.length > 0){

        // check if we have permissions
        FB.login(function(loginResponse){

            FB.api('me/permissions','get',function(response){

                // get the data
                var data = $('body').data();

                if(data.ogactions == 1){
                    var params = {};
                    params[data.object] = data.url;

                    // post that we read the article
                    FB.api(
                        '/me/'+ data.appnamespace + ':' + data.action,
                        'post',
                        params,
                        function(response) {
                            if (!response || response.error) {
                                console.log(response);
                            } else {
                                console.log('Action successful! Action ID: ' + response.id);
                            }
                    });

                }

            });

        }, {scope: 'publish_actions,publish_stream'});

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:41:17.543

这是一个相当愚蠢的错误，我头部的 og 元字段有 name="" 而不是 property=""，这是我没有注意到的。

# android - Camera.PictureCallback 什么时候被调用？

> ID：12386513
> 
> 赞同：0
> 
> 时间：2012-09-12T10:48:51.230
> 
> 标签：android, nullpointerexception, android-camera

我在 Camera 对象的 jpeg PictureCallback 中设置成员变量，并在`onClick()`按下特定按钮时尝试在回调方法中使用它们。这个按钮在`takePicture()`被调用之前是不可见的。但是，每当按下按钮时，我在 PictureCallback 中设置的值都是***null***。

所以，我的估计是 Callback 没有被调用 after `takePicture()`。我已经放了断点，但似乎找不到调用它的点，`NullPointerException`首先抛出 a 。

有任何想法吗？

这是一些代码（另外，感谢您的编辑，点击）

```
 jpeg = new Camera.PictureCallback() {

        public void onPictureTaken(byte[] data, Camera camera) {
            FileOutputStream out = null;
            try {
                //create album
                String root = Environment.getExternalStorageDirectory().toString();
                myDir = new File(root + "/My Album");    
                myDir.mkdirs();

                //create naming mechanism
                Calendar c = Calendar.getInstance();
                Date d = c.getTime();
                String date = d.toGMTString().replace(" ", "");

                fname = date + ".png";
                File file = new File (myDir, fname);

                //create output stream to handle putting images to file
                out = new FileOutputStream(file);

                //get images from stream/resource - also create new bitmap to save results to
                Bitmap image = BitmapFactory.decodeByteArray(data, 0, data.length);

                //this resizes the frame to fit the photo because otherwise they are misaligned
                Bitmap tFrame = frameSelected;
                Bitmap frame = Bitmap.createScaledBitmap(tFrame, 640, 480, false);
                Bitmap completed = Bitmap.createBitmap(image.getWidth(), image.getHeight(), image.getConfig());

                //create a canvas for creating the new bitmap, and paint to use with it
                Canvas canvas = new Canvas(completed);
                Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);

                //add bitmaps to canvas
                canvas.drawBitmap(image, new Matrix(), paint); //image from camera
                canvas.drawBitmap(frame, new Matrix(), paint); //frame to be added

                //compress new bitmap to a stream
                ByteArrayOutputStream stream = new ByteArrayOutputStream();
                completed.compress(Bitmap.CompressFormat.PNG, 100, stream);
                byte[] byteArray = stream.toByteArray();

                //add stream to file
                out.write(byteArray);
                out.close();
                Log.d("CALLBACK", "onPictureTaken - wrote bytes: " + data.length);
            } catch (Exception e) {
                e.printStackTrace();
            }
            finally {
            }
            Log.d("CALLBACK", "onPictureTaken - jpeg");
        }
    };

public void onClick(View v) {
    //take photo

    if (v.getId() == R.id.take_photo_button){
        camera.takePicture(shutter, raw, null, jpeg);
        camera.stopPreview();

        s.setVisibility(View.VISIBLE);
        d.setVisibility(View.VISIBLE);
        b.setVisibility(View.INVISIBLE);
        framesSpinner.setVisibility(View.INVISIBLE);

    }
    else if (v.getId() == R.id.save_photo_button){
        Toast.makeText(this, "Photo saved to My Album", Toast.LENGTH_LONG).show();

        s.setVisibility(View.INVISIBLE);
        d.setVisibility(View.INVISIBLE);
        b.setVisibility(View.VISIBLE);
        framesSpinner.setVisibility(View.VISIBLE);

        camera.startPreview();

    }
    else if (v.getId() == R.id.delete_photo_button){
        File f = new File(myDir, fname);
        boolean isDeleted = f.delete();
        if (isDeleted){
            Toast.makeText(this, "Photo deleted", Toast.LENGTH_LONG).show();
        }
        else{
            Toast.makeText(this, "Error in deleting photo, photo not deleted", Toast.LENGTH_LONG).show();
        }
        s.setVisibility(View.INVISIBLE);
        d.setVisibility(View.INVISIBLE);
        b.setVisibility(View.VISIBLE);
        framesSpinner.setVisibility(View.VISIBLE);

        camera.startPreview();
    }
} 
```

按下 Delete 时的堆栈跟踪：

> 09-12 14:29:58.935：E/AndroidRuntime(25412)：致命异常：主要 09-12 14:29:58.935：E/AndroidRuntime(25412)：java.lang.NullPointerException 09-12 14:29:58.935： E/AndroidRuntime(25412): 在 java.io.File.(File.java:150) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在 java.io.File.(File.java:124 ) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在 com.example.cameraoverlay.CameraActivity.onClick(CameraActivity.java:228) 09-12 14:29:58.935: E/AndroidRuntime(25412):在 android.view.View.performClick(View.java:3644) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在 android.view.View$PerformClick.run(View.java:14313) 09- 12 14:29:58.935: E/AndroidRuntime(25412): 在 android.os.Handler.handleCallback(Handler.java:605) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在 android.os。 Handler.dispatchMessage(Handler.java:92) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在 android.os.Looper.loop(Looper.java:137) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在android.app.ActivityThread.main(ActivityThread.java:4517) 09-12 14:29:58.935: E/AndroidRuntime(25412): at java.lang.reflect.Method.invokeNative(Native Method) 09-12 14:29 :58.935: E/AndroidRuntime(25412): at java.lang.reflect.Method.invoke(Method.java:511) 09-12 14:29:58.935: E/AndroidRuntime(25412): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993) 09-12 14:29:58.935: E/AndroidRuntime(25412): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760) 09 -12 14:29:58.935：E/AndroidRuntime（25412）：在 dalvik.system.NativeStart.main（本机方法）137) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在 android.app.ActivityThread.main(ActivityThread.java:4517) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在java.lang.reflect.Method.invokeNative(Native Method) 09-12 14:29:58.935: E/AndroidRuntime(25412): at java.lang.reflect.Method.invoke(Method.java:511) 09-12 14 :29:58.935: E/AndroidRuntime(25412): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760) 09-12 14:29:58.935: E/AndroidRuntime(25412): at dalvik.system.NativeStart.main(Native Method)137) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在 android.app.ActivityThread.main(ActivityThread.java:4517) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在java.lang.reflect.Method.invokeNative(Native Method) 09-12 14:29:58.935: E/AndroidRuntime(25412): at java.lang.reflect.Method.invoke(Method.java:511) 09-12 14 :29:58.935: E/AndroidRuntime(25412): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760) 09-12 14:29:58.935: E/AndroidRuntime(25412): at dalvik.system.NativeStart.main(Native Method)Method.invokeNative(Native Method) 09-12 14:29:58.935: E/AndroidRuntime(25412): at java.lang.reflect.Method.invoke(Method.java:511) 09-12 14:29:58.935: E /AndroidRuntime(25412): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:760) 09-12 14:29:58.935: E/AndroidRuntime(25412): at dalvik.system.NativeStart.main(Native Method)Method.invokeNative(Native Method) 09-12 14:29:58.935: E/AndroidRuntime(25412): at java.lang.reflect.Method.invoke(Method.java:511) 09-12 14:29:58.935: E /AndroidRuntime(25412): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993) 09-12 14:29:58.935: E/AndroidRuntime(25412): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:760) 09-12 14:29:58.935: E/AndroidRuntime(25412): at dalvik.system.NativeStart.main(Native Method)main(ZygoteInit.java:760) 09-12 14:29:58.935: E/AndroidRuntime(25412): at dalvik.system.NativeStart.main(Native Method)main(ZygoteInit.java:760) 09-12 14:29:58.935: E/AndroidRuntime(25412): at dalvik.system.NativeStart.main(Native Method)

# .net - SSRS 使用日历选择日期参数

> ID：12386514
> 
> 赞同：2
> 
> 时间：2012-09-12T10:48:53.677
> 
> 标签：.net, sql, sql-server-2008, reporting-services, ssrs-2008

我有一个包含 7 个字段的基本报告。

我希望数据是参数驱动的。

StartDate 和 EndDate 是我希望用户在呈现报告之前选择的字段。

如果您看到第一张图片，我已经布置了报告并创建了 StartDate 和 EndDate 参数，以及以 [@START_DATE] 和 [@END_DATE] 作为值的 2 个文本框。我已将他们的字段类型设置为 Number>Date。我希望当我运行报告时，我会得到两个小的日历窗口，我可以在其中选择开始日期和结束日期。我在其他报告中看到过这样做，所以我知道这是可能的。但是我在运行报告时看到的是 image2。

我试过加入 Where 子句：

```
where (START_DATE IN (@START_DATE)) AND (END_DATE IN (@END_DATE)) 
```

但这只是允许我手动输入我想要的日期。我需要一个日历显示。

有任何想法吗？

![在此处输入图像描述](../Images/9d0c7d96dfb480cb7969e9db7061593f.png)

![在此处输入图像描述](../Images/41be22b4101e6f7a14767bcee1bc6e0d.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T10:58:18.970

您需要将参数的数据类型设置为日期/时间。在您的案例中右键单击 StartDate 的参数，您将看到如下属性

![在此处输入图像描述](../Images/7d66b412f73339b182216fa3a8943b8e.png)

# c# - Visual Studio 不从间接引用的项目中复制内容文件

> ID：12386523
> 
> 赞同：33
> 
> 时间：2012-09-12T10:49:33.430
> 
> 标签：c#, .net, visual-studio, projects-and-solutions

我有以下项目结构：

```
Library1 <--[project reference]-- Library2 <--[ref]-- Executable
--------                          --------            ----------
ContentFile                      .cs files           .cs files
.cs files 
```

所有项目引用都具有 CopyLocal = true。

当我构建项目时，`ContentFile`被复制到`Library2`的输出目录，而不是`Executable`的输出目录，这意味着`ContentFile`应用程序运行时缺少可执行文件。

为什么内容文件被复制到`Library2`'s 的输出目录，而不是`Executable`'s？有没有办法将它也复制到后者（我想在没有构建事件的情况下这样做，因为我相信人们会忘记这一点）？

我正在寻找一个合理且可*维护*的解决方案；*在添加新项目或*新的间接引用的内容文件时需要最少的努力，因此不太可能简单地忘记这样做。

使用构建后事件（如`xcopy ../Library/bin/Debug/SomeDll.dll bin/Debug`）；并手动将项目的输出目录设置为`$(SolutionDir)/bin/...`而不是默认（基于每个项目），都很快变得一团糟。在“主项目”中添加内容文件作为链接也太乏味了。如果 C# 的输出文件具有与 Visual C++ 相同的默认设置（即`$SolutionDir/$Platform/$Configuration`），那会很好，但事实并非如此。

我还考虑过根本不使用标准的 MSBuild 程序并编写自定义构建目标（例如在 Atmel Studio 中使用 gcc），但我并没有走多远。此外，我希望 Visual Studio 的标准“构建”和“调试”命令能够像往常一样工作。

* * *

## 更新：

这里有更多关于我在做什么的细节。

我有一个`Executable`项目的解决方案。此外，还有很多项目可以称为`Plugin`s。通过托管项目引用`Executable`引用所有这些。`Plugin`

由于插件项目是为可执行文件量身定制的，但可能具有可重用的组件，因此主要功能通常在`External`项目中实现，而`Plugin`项目只是一个包装器（尽管并非总是如此）。

所述`External`项目有时使用第三方提供的本地 DLL。然后将这些 DLL`External`作为内容文件添加到项目中并`Copy to output dir`设置为`Copy always`. 所以结构看起来像上图：

```
External <---------------[is not aware of]--------------------+
--------                                                      |
.cs files <--[reference]-- PluginWrapper <--[reference]-- Executable
"Native DLL"               -------------                  ----------
                           .cs files                      .cs files 
```

奇怪的是，“Native DLL”被复制到`External`'s 的输出目录（显然），**还有** `PluginWrapper`'s，*但不是* `Executable`'s。

然后，开发人员的工作流程将是编写一个`External`作为完全隔离的实体工作的一个（它们*经常*被重用），用 a 包装它`PluginWrapper`，然后只添加一个对 to 的项目`PluginWrapper`引用`Executable`。我觉得很奇怪，这显然是一件不寻常的事情。

我认为也许编辑`Executable`的 MSBuild 目标 XML（也包括间接引用的内容文件）可以解决问题。

我可能想考虑按照建议将 DLL 作为嵌入式资源添加到项目中，但是像这样嵌入本机 DLL 对我来说似乎很奇怪。最后，正如 Brenda Bell 建议的那样，通过从上图中删除“[不知道]”并添加对 的项目引用来更改开发人员的工作流程`External`可能是最明智的解决方案，即使不是理想的解决方案。

*更新 2*

请注意，嵌入式资源的想法可能不适用于所有情况。如果需要在可执行文件的目录中放置依赖项（不是 cwd 或任何东西），那么这可能无法正常工作，因为安装文件夹中缺少管理员权限（从嵌入式资源中解压缩文件）。听起来很奇怪，但这是我们使用的第 3 方库之一的严重问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-05T01:22:04.000

将 Library1 引用添加到 Executable 项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T15:58:43.527

编辑：

您可以将所有内容放在一个单独的项目中，将其所有条目设置为“内容”和“始终复制”，并从外部和可执行文件中引用该项目

-

IMO 您正在寻找嵌入式资源，而不是内容文件。

当您编译库 1 时，内容文件被放置在其 bin 文件夹中。编译库 2 时，编译器会识别引用的代码并包含它（库 1.dll），但无法识别内容文件，因为它们在库 2 中的任何地方都没有提及。将库 2 链接到可执行文件时也是如此。

如果您的内容文件相对较小（图标、模板等），并且您不希望在丢失源代码的情况下需要编辑它们，那么您可以将它们作为资源嵌入并提供一个公共方法来返回内容，例如：

```
 public static Stream GetResourceContent(string rName){
     string resName = System.Reflection.Assembly
         .GetExecutingAssembly().GetManifestResourceNames()
         .FirstOrDefault(rn => rn.EndsWith("."+rName));
    if(resName!=null)
        return System.Reflection.Assembly.GetExecutingAssembly().GetManifestResourceStream(resName);
    else
        return null;
} 
```

如果您的内容必然会更改，例如模板等，请考虑在可执行项目中包含一份副本

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T03:47:32.483

另一种选择是将 ContentFile 作为资源嵌入 Library1 程序集中并使用 Assembly.GetManifestResource() 提取它。

有关更多信息，请参阅这些链接：

[http://www.attilan.com/2006/08/accessing-embedded-resources-using.html](http://www.attilan.com/2006/08/accessing-embedded-resources-using.html)

[http://blogs.msdn.com/b/alexdan/archive/2007/12/19/loading-embedded-resources-in-c-using-getmanifestresourcestream.aspx](http://blogs.msdn.com/b/alexdan/archive/2007/12/19/loading-embedded-resources-in-c-using-getmanifestresourcestream.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-14T01:23:52.973

Brenda 回答的一种变体是将Library1 的内容文件作为链接添加到可执行项目中。您仍然拥有项目中的条目，但您不需要管理每个文件的多个副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-25T11:07:27.017

可能是您仅从 XAML 文件中引用 Library1，在这种情况下，Visual Studio 无法识别该用法。在代码中添加引用，例如通过应用 name 属性

# ios - 添加自定义推送通知声音 ios5 不起作用

> ID：12386526
> 
> 赞同：1
> 
> 时间：2012-09-12T10:49:39.737
> 
> 标签：ios, ios5, push-notification, apple-push-notifications

我试图让我的自定义通知声音正常工作，我尝试了一个 caf 文件、一个 aiff 文件和 m4r 文件，但似乎没有一个正在播放。

我的通知很好，但没有播放自定义声音，而是播放默认声音。我的有效载荷是：

```
{"aps":{"alert":"alert testing - hello!","sound":"testsound.aif"}} 
```

从我在其他线程中阅读的内容来看，如果默认正在播放，则找不到音频文件，但它位于 xcode 项目中，我已从设备中删除了该应用程序并再次运行它。

有没有我可能遗漏的问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T10:55:17.067

找到了答案：

当我将音频文件添加到 xcode 时，我没有确保我的应用程序的“目标成员资格”被选中。

一旦我选中该框，它就会按预期工作

# iphone - 更改 UIImageView 大小并使用触摸手势移动它

> ID：12386527
> 
> 赞同：1
> 
> 时间：2012-09-12T10:49:43.307
> 
> 标签：iphone, ios, cocoa-touch, uiimageview, resize

在我的应用程序中，我有一个 UIImageView 用户可以触摸和移动。当触摸开始改变图像的大小时，我需要它。为此我实现了这个方法

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event; 
```

并在其中更改大小，然后图像使用**UIPanGestureRecognizer**移动。

唯一的问题是，当触摸开始时，尺寸会发生变化，但是当图像移动时，它会调整为原始尺寸。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:05:01.177

只需使用 touchesMoved 移动图像。

```
@interface TTImageView : UIImageView
{
     CGPoint startLocation;
}
@end

@implementation TTImageView

- (id)init
{
    self = [super init];
    if (self) {
        [self setBackgroundColor:[UIColor redColor]];
        [self setUserInteractionEnabled:YES];
        [self setFrame:CGRectMake(0, 0, 100, 100)];
    }
    return self;
}
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint pt = [[touches anyObject] locationInView:self];
    startLocation = pt;
    [[self superview] bringSubviewToFront:self];

    //change the size of the image
    CGRect frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, 150, 150);
    [self setFrame:frame];
}

- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event

{
    CGPoint pt = [[touches anyObject] locationInView:self];
    CGRect frame = [self frame];
    frame.origin.x += pt.x - startLocation.x;
    frame.origin.y += pt.y - startLocation.y;
    [self setFrame:frame];

}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:58:09.420

我建议工作流程应该是：

1.  在touchesBegan中，记录当前图像大小和触摸位置
2.  在 touchesEnded 中，比较结束触摸位置的值和 touchesBegan 记录的触摸位置，以两个位置的比例刷新图像大小。

# c++ - 尝试在 Linux 上使用 Clang++ 编译 c++11 正则表达式教程时出错

> ID：12386531
> 
> 赞同：3
> 
> 时间：2012-09-12T10:49:50.607
> 
> 标签：c++, regex, c++11, clang++

我正在尝试按照[本教程](http://solarianprogrammer.com/2011/10/12/cpp-11-regex-tutorial/)了解 C++11 中的正则表达式。当我尝试编译这个小代码示例时，我得到了这些错误

```
clang++ -std=c++0x test.cpp -o test
In file included from test.cpp:3:
In file included from /usr/include/c++/4.6/regex:55:
/usr/include/c++/4.6/bits/regex_constants.h:196:36: error: constexpr variable
      'match_default' must be initialized by a constant expression
  static constexpr match_flag_type match_default     = 0;
                                   ^~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:203:36: error: constexpr variable
      'match_not_bol' must be initialized by a constant expression
  static constexpr match_flag_type match_not_bol     = 1 << _S_not_bol;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:210:36: error: constexpr variable
      'match_not_eol' must be initialized by a constant expression
  static constexpr match_flag_type match_not_eol     = 1 << _S_not_eol;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:216:36: error: constexpr variable
      'match_not_bow' must be initialized by a constant expression
  static constexpr match_flag_type match_not_bow     = 1 << _S_not_bow;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:222:36: error: constexpr variable
      'match_not_eow' must be initialized by a constant expression
  static constexpr match_flag_type match_not_eow     = 1 << _S_not_eow;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:228:36: error: constexpr variable
      'match_any' must be initialized by a constant expression
  static constexpr match_flag_type match_any         = 1 << _S_any;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:233:36: error: constexpr variable
      'match_not_null' must be initialized by a constant expression
  static constexpr match_flag_type match_not_null    = 1 << _S_not_null;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:238:36: error: constexpr variable
      'match_continuous' must be initialized by a constant expression
  static constexpr match_flag_type match_continuous  = 1 << _S_continuous;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:245:36: error: constexpr variable
      'match_prev_avail' must be initialized by a constant expression
  static constexpr match_flag_type match_prev_avail  = 1 << _S_prev_avail;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:273:36: error: constexpr variable
      'format_default' must be initialized by a constant expression
  static constexpr match_flag_type format_default    = 0;
                                   ^~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:281:36: error: constexpr variable
      'format_sed' must be initialized by a constant expression
  static constexpr match_flag_type format_sed        = 1 << _S_sed;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:288:36: error: constexpr variable
      'format_no_copy' must be initialized by a constant expression
  static constexpr match_flag_type format_no_copy    = 1 << _S_no_copy;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/4.6/bits/regex_constants.h:294:36: error: constexpr variable
      'format_first_only' must be initialized by a constant expression
  static constexpr match_flag_type format_first_only = 1 << _S_first_only;
                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
13 errors generated. 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T19:15:48.160

默认情况下，clang 使用 gcc 的标准 C++ 库 - libstdc++。它仍然不支持正则表达式。您可以尝试使用 libc++ - 另一个支持所有 C++11 的标准库实现。`clang++ -stdlib=libc++ source.cpp -o source`使用教程中的第一个示例代码对我来说非常适合。

但是，将 libc++ 和 libstdc++ 库/可执行文件链接在一起并不是一个好主意——它们是不兼容的。

# ruby-on-rails - 如何为完整的独立模型使用多个 Active Admin 实例

> ID：12386535
> 
> 赞同：10
> 
> 时间：2012-09-12T10:50:01.733
> 
> 标签：ruby-on-rails, devise, activeadmin, multiple-instances

我有 2 个模型：

*   用户
*   供应商

我想提供 2 个独立的 Active Admin 界面。他们都有设计路线：

```
devise_for :users, ActiveAdmin::Devise.config
devise_for :suppliers,   ActiveAdmin::Devise.config (can I somehow say ActiveAdmin2::Devise.config) 
```

用户将有权访问产品、订单，而供应商将只能访问产品。

理想情况下，我希望应用程序中有不同的文件夹并呈现不同的数据。

**用户/订单.rb**

```
ActiveAdmin.register Order do
  filter :email
  filter :created_at  , :label => "Order Creation Date"
  filter :order_created 
```

**供应商/订单.rb**

```
ActiveAdmin.register Order do
  filter :email 
```

有没有办法初始化 2 个 ActiveAdmin 类并并行运行它们？

还有其他更好的方法可以让它在同一个网站/应用程序下工作吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-12T16:03:40.540

您可以为此使用命名空间。

```
ActiveAdmin.register 顺序，命名空间: :supplier do
  # 将在 /supplier/orders 上提供
结尾

ActiveAdmin.register 命令，命名空间: :user do
  # 在 /user/orders 可用
结尾

```

您可以为每个命名空间自定义身份验证`config/initializers/active_admin.rb`

例如：

```
  config.default_namespace = :user

  config.namespace :supplier do |supplier|
    供应商.authentication_method = :authenticate_supplier_user！
    供应商.current_user_method = :current_supplier_user
    供应商.logout_link_path = :destroy_supplier_user_session_path
    供应商.root_to = '订单#index'
  结尾

  config.namespace :user do |user|
    user.authentication_method = false
    user.current_user_method = :current_user
    user.logout_link_path = false

```

更多信息：[http ://activeadmin.info/docs/1-general-configuration.html#namespaces](http://activeadmin.info/docs/1-general-configuration.html#namespaces)

# iphone - 调用 removeFromSuperview 后“interfacebuilded”对象不见了？

> ID：12386537
> 
> 赞同：0
> 
> 时间：2012-09-12T10:50:10.890
> 
> 标签：iphone, objective-c, xcode

我在界面生成器中有一个正常的交互（有 a`UILabel`和 a `UIButton`）。在代码中，我创建了`UIScrollView`一个（未知）数量的`UILabels`（取决于用户）。创建这些标签是`- (void)viewWillAppear`为了确保数据是最新的。要删除标签，在`viewWillDisappear`我打电话

```
for(UIView *subview in [scrollView  subviews])
{
    [subview removeFromSuperview];
} 
```

问题是，再次调用视图后，使用 interfacebuilder （`UILabel`& `UIButton`）创建的对象消失了。是否通过调用删除`[subview removeFromSuperview];`？如果是，如何再次添加它们？代码创造的一切都还在……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:56:59.640

您应该将标签添加到您动态添加的标签中。

```
for(int i = 0; i < n; i++){
  UILabel *label = [UILabel alloc...];
  label.tag = 999999;
} 
```

然后。

```
for(UIView *subview in [scrollView  subviews])
{
   if([subview isKindOfClass:[UILabel class]] && subview.tag == 999999){
    [subview removeFromSuperview];
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:52:04.037

不要删除所有子视图。仅删除您在 中添加的标签`viewWillAppear`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T12:51:44.983

UILabel、UIButton 和 UITextfields 基本上是 UIView 的子类。因此，如果您删除滚动视图下的所有 UIView，它也会将它们删除。

```
for (UIView *myView in [scrollView  subviews]) {
    if([myView isKindOfClass:[UILabel class]]){
        [myView removeFromSuperview];
    }
    if([myView isKindOfClass:[UIButton class]]){
        [myView removeFromSuperview];
    }
    if([myView isKindOfClass:[UITextField class]]){
        [myView removeFromSuperview];
    }
} 
```

# php - 在按钮上单击更改来自外部 div 的内容

> ID：12386546
> 
> 赞同：0
> 
> 时间：2012-09-12T10:50:38.987
> 
> 标签：php, html, ajax, wordpress

我在 wordpress 的后端有这个按钮，如果单击它，它应该从我的主题的一个文件中的一个 div 中更改内容。我的代码可能离我应该去的地方很远......

```
<input type="submit" value="load()" id="start_chat" /> //the button
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">

 $.ajaxSetup ({  
            cache: false  
        });  

    var loadUrl = "facut_mine3.php";  // the file where there is only a new content for the div #eu_la
    $("#start_chat").click(function(){  
        $("#eu_la").load('http://www.fattorefamiglia.com/wp-content/themes/child_care_creative/layout_home_page2.php').html(loadUrl);  //this is the file that I want to change, with the div #eu_la
    });  
</script> 
```

当然，当我单击按钮时，没有任何变化。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:21:30.143

要允许跨域 Ajax 请求，请在 ROOT 中设置一个**.htaccess文件，其中包含以下内容：**

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule> 
```

另见：

*   启用-cors.org
*   code.google.com/p/html5security/wiki/CrossOriginRequestSecurity

# mongodb - 从现有 MongoDB 创建可视化的工具

> ID：12386547
> 
> 赞同：12
> 
> 时间：2012-09-12T10:50:43.620
> 
> 标签：mongodb, visualization

我用现有的 MongoDB 接手了一个项目。我想获得现有数据的视觉图像（图表等）。显然 MongoDB 与 MySQL 相比是完全不同的情况，但我想还有一些可以可视化的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T15:07:10.220

这实际上取决于您对“可视化”的要求。通常，关系数据库图表中大多数更有趣的视觉方面是高级关系和完整性约束（1:1、1:many、主键、外键等）。

MongoDB 具有*灵活*的模式，即给定集合中的文档不必遵守预定格式。这并不意味着底层数据不能有某种组织......只是没有强加于集合的单一模式（就像传统关系数据库中的情况一样）。

在 MongoDB 中，许多要可视化的有趣细节需要通过检查集合中的部分或全部文档或查看代码来进行分析。

### 代码审查

如果您的应用程序使用 ODM（对象文档映射器），例如[Mongoose](http://mongoosejs.com/) (Node.js) 或[Morphia](https://github.com/mongodb/morphia) (Java)，则应用程序代码可能会提供预期模式的快速和描述性视图（或至少是预期模式的最新版本）架构）。适当的语言文档工具，例如`jsdoc`或`javadoc`可能有助于生成模型类的合理概述。您可能必须添加一些文档注释以获得最佳结果。

### 图式分析

模式分析是一种更暴力的方法，它涉及查看数据以推断观察到的模式。一种常见的方法是使用[Map/Reduce](http://docs.mongodb.org/manual/core/map-reduce/)。

有一些不同的[`mongo`shell](http://docs.mongodb.org/manual/reference/mongo-shell/)帮助程序可以让您了解集合的一般结构（例如，字段/数据类型及其在源文档中的覆盖范围）：

*   [schema.js](http://skratchdot.com/projects/mongodb-schema/)

*   [种类](https://github.com/variety/variety)

这些不是可视的（在图形意义上），但模式分析结果确实提供了对数据的预期形状和常见变化的洞察。

### 关系

MongoDB 服务器不支持外键关系，这会删除许多可能有趣的视觉注释。

[创建数据库引用 (DBRefs)](http://docs.mongodb.org/manual/reference/database-references/)有一些不同的客户端驱动程序方法，但这些方法遵循使用约定而不是服务器功能。为了使用 DBRefs 确定集合之间的关系，必须扫描集合中的部分或全部文档。两者都不支持关系`variety`推断`schema.js`。

### 内容

为了更好地了解实际内容，您可以尝试其中一个[Admin UI](http://docs.mongodb.org/ecosystem/tools/administration-interfaces/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T10:57:55.467

你可以使用[Mongo3](http://mongo3.com/)或[futon4mongo](https://github.com/sbellity/futon4mongo)，而[MogoVue](http://www.mongovue.com/) 最适合这个。

完整的工具文档列表都[在这里](http://www.mongodb.org/display/DOCS/Admin+UIs)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-12T08:17:24.857

我使用了 mViewer，我发现它非常简单而且很好。

一个简单的基于 Web 的 MongoDB 管理和管理工具是链接

[https://github.com/Imaginea/mViewer](https://github.com/Imaginea/mViewer)

# php - OpenCart - 你如何增加管理员会话超时？

> ID：12386548
> 
> 赞同：3
> 
> 时间：2012-09-12T10:50:43.870
> 
> 标签：php, session, opencart

目前 OpenCart 中的 Admin 会话大约需要 30 秒。我想知道是否有 PHP 文件或者有什么方法可以增加登录的超时会话？

目前我被告知这个解决方案有效，但它没有：

```
<script type="text/javascript">
function pingServer() {
    $.ajax({ url: location.href });
}
$(document).ready(function() {
    setInterval('pingServer()', 60000);
});
</script> 
```

该文件已放置在***admin/view/template/common/header.tpl***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T12:11:45.940

这很可能可以通过更改 的值来解决`session.gc_maxlifetime`。您可以通过 .htaccess、php.ini 甚至在您的脚本本身（在 .htaccess 之前`session_start()`）更改它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T09:51:57.380

我与客户遇到了同样的问题并使用了上述建议，因为更改 session.gc_maxlifetime 不起作用。如果用户使用上述方法打开管理页面，它永远不会超时，所以我建议添加一个超时来终止间隔：

```
(function($) {
  var interval = setInterval(pingServer, 60000);

  function pingServer() {
      $.ajax({ url: location.href });
  }

  setTimeout(function() {
    clearInterval(interval);
  }, 1440000);
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T11:04:17.427

我认为这会起作用，正如用户所说，这是您可以在 PHP 和 PHP.ini 中进行的正常设置

如果您不能使用它，请尝试编辑您调用的 URL

```
<script type="text/javascript">
function pingServer() {
    $.ajax({ url: "/ping.php" });
}
$(document).ready(function() {
    setInterval('pingServer()', 60000);
});
</script> 
```

在你拥有的文件 ping.php 中。

```
<?php
   session_start();
   $_SESSION['last_ping'] = time();
?> 
```

强制 PHP 更新您的服务器端会话 cookie。

这也可能是 OpenCart 设置中的缺失配置？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-06T10:38:34.207

对于 opencart 1.5.x 只需打开 /system/library/session.php 并添加这一行

```
ini_set('session.gc_maxlifetime',5400);//90 minute 
```

# c# - Webgrid：排序后维护过滤器

> ID：12386555
> 
> 赞同：4
> 
> 时间：2012-09-12T10:51:03.510
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, webgrid

我已经建立了一个 webgrid，它似乎工作正常，允许我进行排序和分页。我添加了一个过滤器选项，它也很有效，但是如果我过滤*然后*对结果进行排序，过滤器就会丢失并且所有记录都会显示出来。

这是我的 Razor 视图代码：

```
@using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "Get", InsertionMode = InsertionMode.Replace, UpdateTargetId = "myGrid" }))
{

@Html.ValidationSummary(true)
<fieldset>
    <legend>Document Search</legend>

    <div class="editor-label">
        @Html.Label("Enter a Document code:")
    </div>
    <div class="editor-field">
        @Html.Editor("search")
    </div>

    <p>
        <input type="submit" value="Search" />
    </p>
</fieldset>
}

@{
    WebGrid grid = new WebGrid(null, rowsPerPage: 10, canPage: true, canSort: true, ajaxUpdateContainerId: "myGrid");
    grid.Bind(Model, autoSortAndPage: true);
}

<div id="myGrid">

    @grid.GetHtml(mode: WebGridPagerModes.All, firstText: "First Page", nextText: "Next", previousText: "Previous", lastText: "Last Page", numericLinksCount: 10,
            columns: grid.Columns(
                grid.Column("DocumentID", "Document Code", canSort: true),
                grid.Column("Title", "Document Title", canSort: true)
        )
    )

</div> 
```

这是我的行动：

```
public ActionResult Index(string search)
    {
        List<DocumentIndexViewModel> viewModel = Mapper.Map<List<DocumentIndexViewModel>>(DocumentService.GetDocumentsBySearch(search));
        if (Request.IsAjaxRequest())
            return PartialView("_IndexGrid", viewModel);
        else
            return View(viewModel);
    } 
```

对显示的记录进行排序时如何维护过滤器？似乎我需要以某种方式将搜索字符串附加到排序链接上，但不确定如何继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:16:21.767

由于您使用 GET 作为过滤器，因此应该保留它。我无法重现该问题。这是我的完整工作测试用例。

模型：

```
public class CityViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index(string search)
    {
        using (var client = new WebClient())
        {
            var query = HttpUtility.ParseQueryString(string.Empty);
            query["q"] = search;
            var json = client.DownloadString("http://gd.geobytes.com/AutoCompleteCity?" + query.ToString());
            var serializer = new JavaScriptSerializer();
            var viewModel = serializer
                .Deserialize<string[]>(json)
                .Select((x, index) => new CityViewModel
                {
                    Id = index,
                    Name = x
                })
                .Where(x => x.Name.StartsWith(search ?? string.Empty, StringComparison.OrdinalIgnoreCase))
                .ToList();

            if (Request.IsAjaxRequest())
            {
                return PartialView("_IndexGrid", viewModel);
            }
            else
            {
                return View(viewModel);
            }
        }
    }
} 
```

主视图（`~/Views/Home/Index.cshtml`）：

```
@model IEnumerable<CityViewModel>

<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script type="text/javascript">
    $.ajaxSetup({
        cache: false
    });
</script>

@using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "GET", InsertionMode = InsertionMode.Replace, UpdateTargetId = "gridPartial" }))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Document Search</legend>

        <div class="editor-label">
            @Html.Label("Enter a Document code:")
        </div>
        <div class="editor-field">
            @Html.Editor("search")
        </div>

        <p>
            <input type="submit" value="Search" />
        </p>
    </fieldset>
}

<div id="gridPartial">
    @Html.Partial("_IndexGrid")
</div> 
```

`~/Views/Home/_IndexGrid.cshtml`部分的：

```
@model IEnumerable<CityViewModel>

@{
    WebGrid grid = new WebGrid(null, rowsPerPage: 10, canPage: true, canSort: true, ajaxUpdateContainerId: "myGrid");
    grid.Bind(Model, autoSortAndPage: true);
}

<div id="myGrid">
    @grid.GetHtml(mode: WebGridPagerModes.All, firstText: "First Page", nextText: "Next", previousText: "Previous", lastText: "Last Page", numericLinksCount: 10,
        columns: grid.Columns(
            grid.Column("Id", "City Id", canSort: true),
            grid.Column("Name", "City Name", canSort: true)
        )
    )
</div> 
```

排序和分页会保留输入的搜索过滤器，因为它位于查询字符串中。

# php - 如何使用 curl_post_async() 在后台运行 PHP 脚本？

> ID：12386557
> 
> 赞同：0
> 
> 时间：2012-09-12T10:51:10.297
> 
> 标签：php, asynchronous, background-process, fsockopen

我预计以下代码会在访问页面时在加载脚本的同一目录中创建一个文件 test.txt。但事实并非如此。什么都没发生。有人可以告诉这段代码有什么问题吗？它在您的环境中工作正常吗？

```
<?php

if (isset($_POST['cache']) && $_POST['cache'] === true) {
    $file = dirname(__FILE__) . '/test.txt';
    $current = time() . ": John Smith\r\n";
    file_put_contents($file, $current,FILE_APPEND);
    return;
} 

curl_post_async(selfurl(), array('cache' => true));
echo 'writing a log in the background.<br />';
return;

function curl_post_async($url, $params) {
    //http://stackoverflow.com/questions/124462/asynchronous-php-calls
    foreach ($params as $key => &$val) {
      if (is_array($val)) $val = implode(',', $val);
        $post_params[] = $key.'='.urlencode($val);
    }
    $post_string = implode('&', $post_params);

    $parts=parse_url($url);

    $fp = fsockopen($parts['host'],
        isset($parts['port'])?$parts['port']:80,
        $errno, $errstr, 30);

    $out = "POST ".$parts['path']." HTTP/1.1\r\n";
    $out.= "Host: ".$parts['host']."\r\n";
    $out.= "Content-Type: application/x-www-form-urlencoded\r\n";
    $out.= "Content-Length: ".strlen($post_string)."\r\n";
    $out.= "Connection: Close\r\n\r\n";
    if (isset($post_string)) $out.= $post_string;

    fwrite($fp, $out);
    fclose($fp);
}
function selfurl() {
    // http://www.weberdev.com/get_example.php3?ExampleID=4291
    $s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : "";
    $protocol = strleft(strtolower($_SERVER["SERVER_PROTOCOL"]), "/").$s;
    $port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]);
    return $protocol."://".$_SERVER['SERVER_NAME'].$port.$_SERVER['REQUEST_URI'];
}
function strleft($s1, $s2) {
    return substr($s1, 0, strpos($s1, $s2));
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:16:51.100

### 问题

您的脚本中的错误如下

```
if (isset($_POST['cache']) && $_POST['cache'] === true) {
    $file = dirname(__FILE__) . '/test.txt';
    $current = time() . ": John Smith\r\n";
    file_put_contents($file, $current,FILE_APPEND);
    return;
} 
```

`$_POST['cache'] === true`将尝试使用与当前方法`cache`相同的类型进行验证，`boolean`但实际上会在使用当前方法发布时`$_POST['cache']`输出`1``http`

### 解决方案

```
if (isset($_POST['cache'])) {
    if ($_POST['cache'] == true) {
        $file = dirname(__FILE__) . '/test.txt';
        $current = time() . ": John Smith\r\n";
        file_put_contents($file, $current, FILE_APPEND);
    }
    return ;
} 
```

# java - 黑莓java ListField

> ID：12386561
> 
> 赞同：0
> 
> 时间：2012-09-12T10:51:32.013
> 
> 标签：java, blackberry, java-me

我为黑莓（java）开发了一个 Rss 应用程序，并成功显示了来自 Rss 文件的标题（需要在线播放的广播频道列表）。我已经开发了播放这些广播频道列表的代码，但我的要求是播放第一个频道（第一个列表）当我的列表最初（频道列表）显示时，任何人都可以帮助我在哪里编写我的逻辑（**默认播放第一个频道**）以在我的频道立即显示后执行？

这是我的 Rss 代码：

```
public class RssScreen extends MainScreen implements ListFieldCallback,FieldChangeListener {
    Connection _connectionthread;     
    private static ListField _list;
    String image;
    String title;
    private static Vector listElements = new Vector();
    private static Vector listImage = new Vector();

    public long mycolor ;
    VerticalFieldManager mainManager;
    VerticalFieldManager subManager;
    int selectedList;
    Radio radio;

    public RssScreen(){
        final Bitmap backgroundBitmap = Bitmap.getBitmapResource("blackbackground.png");

         mainManager = new VerticalFieldManager(Manager.NO_VERTICAL_SCROLL | Manager.NO_VERTICAL_SCROLLBAR )
            {

             public void paint(Graphics graphics)
              {
                graphics.drawBitmap(0, 0, Display.getWidth(),Display.getHeight(),backgroundBitmap, 0, 0);

                super.paint(graphics);
              }

            };

            subManager = new VerticalFieldManager(Manager.VERTICAL_SCROLL | Manager.VERTICAL_SCROLLBAR )
            {
                protected void sublayout( int maxWidth, int maxHeight )
                {
                    int displayWidth = Display.getWidth();
                    int displayHeight = Display.getHeight();

                    super.sublayout( displayWidth, displayHeight);
                    setExtent( displayWidth, displayHeight);
                }
            };        

        add(mainManager);

        _list = new ListField()

        {
            protected boolean navigationClick(int status, int time)
            {
                            return true;
            }
        public void paint(Graphics graphics)

        {
            graphics.setColor((int) mycolor);
        super.paint(graphics);

        }

        };
        mycolor = 0x00FFFFFF;
            _list.invalidate();
            _list.setEmptyString("* Feeds Not Available *", DrawStyle.HCENTER);
        _list.setRowHeight(50);

        _list.setCallback(this);
        mainManager.add(subManager);    
       listElements.removeAllElements();
       _connectionthread = new Connection(); 
       _connectionthread.start();
     }

    private class Connection extends Thread
    { 
        public Connection()
        { 
           super(); 
        } 

        public void run() {  
            Document doc;  
            StreamConnection conn = null; 
            InputStream is = null;  
            try {           

                conn = (StreamConnection) Connector.open("http://toucheradio.com/toneradio/android/toriLite/toriplaylist.xml"+";deviceside=true");          

                DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();  
                docBuilderFactory.setIgnoringElementContentWhitespace(true);
                docBuilderFactory.setCoalescing(true);
                DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();    
                docBuilder.isValidating();      
                is = conn.openInputStream();    
                doc = docBuilder.parse(is);     
                doc.getDocumentElement().normalize();   
                NodeList listImg = doc.getElementsByTagName("title"); 
                for (int i = 0; i < listImg.getLength(); i++) {    
                Node textNode = listImg.item(i).getFirstChild();  
                listElements.addElement(textNode.getNodeValue());
                 image=textNode.getNodeValue();             
                }
                NodeList list = doc.getElementsByTagName("image"); 
                    for (int a = 0; a < list.getLength(); a++) {    
                    Node textNode1 = list.item(a).getFirstChild();  
                    listImage.addElement(textNode1.getNodeValue());
                                        }

            }
                     catch (Exception e) {   
                        System.out.println(e.toString());                     
                        } finally {   
                            if (is != null) {  
                            try { is.close(); 
                            } catch (IOException ignored) {}   
                            }        if (conn != null) {  
                                try { conn.close(); } 
                                catch (IOException ignored) {} 
                                }    } UiApplication.getUiApplication().invokeLater(new Runnable() { 
                                    public void run() {         
                                    _list.setSize(listElements.size()); 

                                    subManager.add(_list);

                                    invalidate();
                                    }   
                                    });
                                }

    }

    public void drawListRow(ListField list, Graphics g, int index, int y, int w) 
    {  
     String title=(String)listElements.elementAt(index);
     String image=(String)listImage.elementAt(index);
    // Bitmap image1= getBitmapFromUrl(image);

     System.out.println("Title"+title);
     System.out.println("Image"+image);
        int yPos = 0+y;
        g.drawLine(0, yPos, w, yPos);

        g.drawText(title, 0, y, 0, w);
       // g.drawBitmap(0,y,image1.getWidth(),image1.getHeight(),image1,0,0);

    }

    public Object get(ListField list, int index) 
    {
        return listElements.elementAt(index); 
    } 
    public int indexOfList(ListField list, String prefix, int string) 
    { 
        return listElements.indexOf(prefix, string); 
    } 
    public int getPreferredWidth(ListField list) 
    { 
     return Display.getWidth(); 
    } 
    public void insert(String toInsert, int index) {
        listElements.addElement(toInsert);
        }

    public void fieldChanged(Field field, int context) {

    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:24:24.113

检查类[Field](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Field.html)的以下方法：

*   [`protected void onDisplay()`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Field.html#onDisplay%28%29)
*   [`protected void onExposed()`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Field.html#onExposed%28%29)

也可以使用来自[Screen](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Screen.html)的类似方法。检查以下内容：

*   [`protected void onUiEngineAttached(boolean attached)`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Screen.html#onUiEngineAttached%28boolean%29)
*   [`protected void onExposed()`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Screen.html#onExposed%28%29)
*   [`protected void onDisplay()`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Screen.html#onDisplay%28%29)

# magento - 不希望magento左侧菜单中父类别中的锚标记？

> ID：12386562
> 
> 赞同：0
> 
> 时间：2012-09-12T10:51:32.467
> 
> 标签：magento, magento-1.4, magento-1.5

我面临一个问题；我有 2 个父类别 parent1 和 parent2 Parent1 包含 4 个子类别，而 parent2 没有任何子类别。

现在我想要的是当用户单击 parent1 时它不应该重定向到特定类别页面但是当用户单击 parent1 类别的子类别之一时它应该重定向到特定子类别页面但是当用户单击 parent2 时（这不会'不包含任何子类别）然后它应该重定向到特定的父类别页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:12:42.700

您将需要修改导航块。

复制代码/core/Catalog/Block/Navigation.php

至

代码/本地/目录/块/Navigation.php

修改此方法：_renderCategoryMenuItemHtml() 以满足您的需求。您将需要检查该类别是否有子类别并据此更改 HTML 标记。

然而，这将改变顶部和左侧导航。如果您只想更改左侧导航，您可以这样做：

a) 将 code/local/Catalog/Block/Navigation.php 重命名为其他名称（也将文件内的类名更改为 Mage_Catalog_Block_Navigationleft），例如

代码/本地/目录/块/Navigationleft.php

b) 更改 XML 配置以将我们的新块用于左侧导航：

```
<reference name="left">
    <block type="catalog/navigationleft" name="catalog.leftnav" after="currency" 
        template="catalog/navigation/left.phtml"/>
</reference> 
```

然后 Magento 将继续使用原始导航块作为顶部导航 :-)

# php - 使用 PHP SDK 登录 Facebook

> ID：12386563
> 
> 赞同：0
> 
> 时间：2012-09-12T10:51:32.730
> 
> 标签：php, facebook, codeigniter, facebook-php-sdk

我正在尝试使用 codeigniter 和 FB PHP SDK 登录 FB。

但它一直给我与facebook链接相同的登录信息，如果用户登录它并没有捕捉到，我是否错过了诸如会话之类的东西？

既然我们在这里，我如何才能获得扩展会话以及在用户离线时我应该保存哪些数据以发布到页面？

这是我的控制器：

```
function __construct () {
    parent::__construct();      
    $this->load->helper('url_helper');
    $this->load->add_package_path(APPPATH.'third_party/facebook/');
    $this->config->load('facebook', TRUE);
    $this->load->library('facebook', array( 'appId'  => $this->config->item('appId', 'facebook'), 'secret' => $this->config->item('secret', 'facebook') ) );
}

public function index() {
    $data['LoginURL']   = $this->facebook->getLoginUrl( array('scope' => 'manage_pages') );
    $data['user']       = $this->facebook->getUser();
    if ($data['user']) {
      try {
        $data['user_profile']   = $this->facebook->api('/me');
        $data['AccessToken']    = $this->facebook->getAccessToken();
      } catch (FacebookApiException $e) {
        // The access token we have is not valid
        $data['user'] = null;
      }
    }
    $this->load->view('fb_welcome', $data);
} 
```

这是视图：

```
<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<body>
<?php if ( $user ): ?>      
    User <em><?php echo $user ?></em> is Logged in, AccessToken is <?php echo $AccessToken; ?>
    <?php print_r($user_profile); ?>
<?php else: ?>
    <?php echo anchor($LoginURL, "Login with facebook"); ?>
<?php endif; ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:00:22.113

我不知道代码点火器，但希望这应该证明是一个很好的起点，只需在包含中链接到您的 fb sdk，用您自己的替换变量，当用户未登录时，它应该会给用户一个弹出窗口：

```
// include the FB SDK
require_once(APPLICATION_PATH . '/../library/facebook/facebook.php');

// create the application instance
$facebook = new Facebook(array(
    'appId'  => $this->facebookConfig->appid,
    'secret' => $this->facebookConfig->appsecret
));

// get the user id
$user = $facebook->getUser();
if(!empty($user)) {
    // We have a user ID, so probably a logged in user.
    // If not, we'll get an exception, which we handle below.
    try {

        // do something

    } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $params = array(
            'scope'         => $this->permissions,
            'redirect_uri'  => $this->facebookConfig->applink
        );
        $loginUrl = $facebook->getLoginUrl($params);

        // log errors
        error_log($e->getType());
        error_log($e->getMessage());

        // redirect if not logged in or not enough permissions
        //echo "<script>top.location=\"".$loginUrl."\";</script>";die;
    }

    // Give the user a logout link 
    //echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
} else {

    $params = array(
            'scope'         => $this->permissions,
            'redirect_uri'  => $this->facebookConfig->applink
        );
    $loginUrl = $facebook->getLoginUrl($params);

    // log errors
    error_log($e->getType());
    error_log($e->getMessage());

    // redirect if not logged in or not enough permissions
    echo "<script>top.location=\"".$loginUrl."\";</script>";die;

} 
```

# javascript - 从框架内的框架中从javascript调用actionscript函数

> ID：12386570
> 
> 赞同：0
> 
> 时间：2012-09-12T10:51:55.897
> 
> 标签：javascript, flash

这就是问题所在。我们有 3 个框架的网站。在 2 帧中，有 UI 元素会导致 swf 文件中的 javascript 调用函数。到目前为止，它的工作方式如下：

if (navigator.appName.indexOf("Microsoft") != -1) {

```
 parent.parent.document.getElementById("framename").contentWindow.document.getElementById("swf_name").function();

            } else {

                parent.parent.document.getElementById("framename").contentDocument["swf_name"]..function(); 
```

这行得通。耶。除了一个客户有一些更不寻常的系统，他们有自己的网页，其中包含指向他们工具的链接的框架。包括我们加载到其中一个框架中的网页。这会导致上述线路失败。

如何访问该 swf 文件？最好不必从我们的页面中知道框架的名称/ID。}

# perl - 给定这些字符串的任意顺序，如何对字符串数组进行排序？

> ID：12386571
> 
> 赞同：0
> 
> 时间：2012-09-12T10:51:56.753
> 
> 标签：perl, hash, sorting

我希望对字符串数组进行排序，以便字符串按以下顺序结束：

```
@set = ('oneM', 'twoM', 'threeM', 'sixM', 'oneY', 'twoY', 'oldest'); 
```

您可能会注意到，这些代表时间段`oneM`，第一个月也是如此。我的问题是我想按时间段排序，但是对于字符串，我不能只使用“排序”，所以我创建了这个散列来表达字符串应该如何排序：

```
my %comparison = (
    oneM    => 1,
    twoM    => 2,
    threeM  => 3,
    sixM    => 6,
    oneY    => 12,
    twoY    => 24,
    oldest  => 25,
); 
```

我希望这能让我的生活更轻松，我可以做一些事情，例如：

```
foreach my $s (@set) {
    foreach my $k (%comparison) {
        if ($s eq $k) {
            something something something 
```

我感觉这是一种冗长的做事方式，而且我实际上不确定一旦找到等效项后我将如何对其进行排序……我想我有点想念自己的情节所以任何帮助将不胜感激

根据要求，预期的输出将类似于上面@set 中的显示方式。我应该提到@set 中的值将是该集合的一部分，但不一定是所有这些值，而且顺序也不相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T11:01:41.160

举例说明输入和您预期的结果会有所帮助。我想这就是你要找的东西：

```
my @data = ( ... ); 
my %comparison = (
    oneM   =>  1, twoM =>  2, threeM =>  3, 
    sixM   =>  6, oneY => 12, twoY   => 24,
    oldest => 25,
);

my @sorted = sort { $comparison{$a} <=> $comaprison{$b} } @data; 
```

`sort`perlfunc 手册页中的函数文档中有大量示例。（“perldoc -f 排序”）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T11:07:58.873

您已经选择了预先计算数据以形成易于排序的良好策略。您可以在排序本身内部计算此数据，但是每次`sort`需要比较值时，您都会浪费时间进行重新计算，这在整个过程中会发生不止一次。另一方面，缓存的缺点显然是，您需要额外的内存来存储它，并且它可能会在内存不足的情况下减慢您的排序，尽管总体上进行的计算较少。

使用您当前的设置排序很简单：

```
my @sorted = sort { $comparison{$a} <=> $comaprison{$b} } @set; 
```

如果你想以 CPU 为代价来节省内存，那就是：

```
my @sorted = sort { calculate_integer_based_on_input{$a} <=> calculate_integer_based_on_input{$b} } @set; 
```

具有单独的`calculate_integer_based_on_input`函数，可以即时将`oneY`等转换为`12`或其他相应的值，或者只是将输入内联转换为适合排序的内容。

您可能还想查看使用缓存计算进行排序的常见习语，例如[Schwartzian transform](http://en.wikipedia.org/wiki/Schwartzian_transform)和[Guttman Rosler Transform](http://www.perlmonks.org/?node_id=145659)。

# java - 为什么类变量的运行时多态行为会发生变化

> ID：12386572
> 
> 赞同：3
> 
> 时间：2012-09-12T10:51:57.130
> 
> 标签：java, polymorphism

> **可能重复：**
> [隐藏类的实例变量](https://stackoverflow.com/questions/7794621/hiding-instance-variables-of-a-class)

我有以下课程

**抽象测试**

```
public abstract class AbstractTest {
 protected int testVar = 10;
} 
```

**测试**

```
public class Test extends AbstractTest {
int testVar = 5;

public static void main(String[] args) {
    AbstractTest test = new Test();
    System.out.println(test.testVar);//Prints 10

    Test secondTest = new Test();
    System.out.println(secondTest.testVar);//Prints 5
}
} 
```

为什么上面的程序打印`10`第一种情况和`5`第二种情况，尽管它是同一类的对象，即`Test()`？

**更新：**

`I am now confused about how memory is allocated to Object and its variables. As instance variable is getting changed based on Class which is behaviour of Static?`

**更新：1**

`Every object will have two variables so question of same memory allocation does not comes in to picture. Thanks.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:00:44.477

这在[JLS 15.11.1中定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.11.1-210)

> [在表达式中`Primary.Identifier`]，只有主表达式的类型，而不是在运行时引用的实际对象的类，用于确定使用哪个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:55:16.550

一条硬性规定：

**字段用于引用类型，而方法用于实际对象。**

`test`是 的引用`AbstractTest`，所以使用基类字段。

`secondTest`是 的引用`derive class`，因此使用派生类字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:54:54.397

**该变量是根据类的引用使用的。**因此，当`AbstractTest`使用参考时`testVar`，从`AbstractTest`类中使用。

# java - 求解圆方程

> ID：12386573
> 
> 赞同：-2
> 
> 时间：2012-09-12T10:51:57.863
> 
> 标签：java, geometry, quadratic, equation-solving

我正在寻求一些帮助来解决 Java 中的以下方程

```
(a-x1)^2 + (b-y1)^2 = r1^2 + r^2
(a-x2)^2 + (b-y2)^2 = r2^2 + r^2
(a-x3)^2 + (b-y3)^2 = r3^2 + r^2 
```

`x1`, `y1`, `r1`, `x2`, `y2`, `r2`& `x3`, `y3`,的值`r3`是已知的。我需要解决`a`, `b`,`r`

如何在 Java 中执行此操作？我检查了[Commons Maths 库](http://commons.apache.org/math/userguide/index.html)，但没有找到如何实现这一点。不过，它有助于线性方程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:31:12.880

我认为你需要线性方程来消除高斯。

如果您需要求解 a、b 和 r，那么很明显这些是非线性方程。

您将需要一个非线性求解器，例如 Newton-Raphson。

你必须线性化你的方程。计算微分 da、db 和 dr 的雅可豆。

您将从最初的猜测开始

```
a = a(old)
b = b(old)
r = r(old) 
```

使用方程的线性化版本来计算增量

```
2*(a(old)-x1)*da + 2*(b(old)-y1)*db = 2*r(old)*dr
2*(a(old)-x2)*da + 2*(b(old)-y2)*db = 2*r(old)*dr
2*(a(old)-x3)*da + 2*(b(old)-y3)*db = 2*r(old)*dr 
```

更新你的猜测

```
a(new) = a(old) + da
b(new) = b(old) + db
r(new) = r(old) + dr 
```

并重复直到它收敛（如果它收敛）。

您永远不应该使用高斯消元法求解线性方程：它存在许多问题。更好的想法是进行 LU 分解和前后替换。

如果我的线性化方程是正确的，它们会采用`A(dx) = 0`. 边界条件应该是什么？

`(a, b)`是圆心的坐标；`r`是半径。

你真的有三点`(x1, y1)`，，`(x2, y2)`和`(x3, y3)`？还是你有更多的积分？如果是后者，则需要最小二乘拟合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-09T10:05:16.980

希望这个方法能给你一些想法：

```
public int[] getCoordinates(float XR_1, float YR_1, float XR_2, float YR_2,
                             float XR_3, float YR_3, int R1, int R2, int R3) {
    //define the positions
    int XU_1 = 0, YU_1 = 0, XU_2 = 0, YU_2 = 0, XU, YU;
    //define variables and arrays that needed
    float D0[][] = new float[17][50];
    float D1[][] = new float[17][50];
    float f[][] = new float[17][50];
    float fmin_1 = 0;
    float fmin_2 = 0;
    //define columns and rows
    int i, j;
    //Y goes from 0 to 49
    for(j=0; j<=49; j++){
        //X goes from 0 to 16
        for(i=0; i<=16; i++){
            D0[i][j] = (float) (Math.pow((i-XR_1),2) + Math.pow((j-YR_1),2) - Math.pow(R1,2));
            D1[i][j] = (float) (Math.pow((i-XR_2),2) + Math.pow((j-YR_2),2) - Math.pow(R2,2));
            f[i][j] = (float) Math.sqrt(Math.pow(D0[i][j], 2) + Math.pow(D1[i][j], 2));
            //get two position where f[i][j] are the minimum
            //initialise the minimum two positions
            if(i==0 & j==0){
                fmin_1 = f[i][j];
                XU_1 = i;
                YU_1 = j;
            }
            else if(j==0 & i==1){
                if(f[i][j] < fmin_1){
                    fmin_2 = fmin_1;
                    fmin_1 = f[i][j];
                    XU_2 = XU_1;
                    XU_1 = i;
                    YU_2 = YU_1;
                    YU_1 = j;
                }
                else {
                    fmin_2 = f[i][j];
                    XU_2 = i;
                    YU_2 = j;
                }
            }
            else{
                if(f[i][j] < fmin_1){
                    fmin_2 = fmin_1;
                    fmin_1 = f[i][j];
                    XU_2 = XU_1;
                    XU_1 = i;
                    YU_2 = YU_1;
                    YU_1 = j;
                }
                else if(f[i][j] < fmin_2){
                    fmin_2 = f[i][j];
                    XU_2 = i;
                    YU_2 = j;
                }
            }
        }
    } 
```

这种方法给出了坐标系中最近的两个点，你可以用类似的方法得到最理想的一个。

# javascript - Html画布自由变换

> ID：12386580
> 
> 赞同：1
> 
> 时间：2012-09-12T10:52:29.670
> 
> 标签：javascript, html, canvas

我正在尝试将画布元素中图像的非均匀部分转换为适当的矩形（即，就像在 Photoshop 中获取图像的非矩形部分并使用 Distort 使其成为矩形），但我很难理解 Canvas矩阵变换。

我不是在追求代码，只是在正确方向上的一点，就理解我如何实现这一点而言。

干杯

更新 1：如果我解释得不够好[http://i.imgur.com/QTB6q.png](http://i.imgur.com/QTB6q.png)

更新 2：这些框是添加到画布上的照片内的一个区域，基本上我正在裁剪和拉直图像的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:03:39.580

在 html5 画布中，您只能使用or方法应用[仿射变换](http://en.wikipedia.org/wiki/Affine_transformation)，因此您需要知道已经应用的矩阵是什么，并使用逆矩阵使其看起来像一个正方形区域，对于其他变换（非仿射），它是必需的一些数学知识（我没有），创建或搜索 Canvas API 的实现（仅适用于仿射变换）。`transform``setTransform()`

# php - 如何一起使用验证码 ajax php 和验证？当我提交表单时，它不能刷新

> ID：12386581
> 
> 赞同：0
> 
> 时间：2012-09-12T10:52:38.703
> 
> 标签：php, ajax, captcha

我从表单标签开始，添加姓名年龄电话号码简历输入框和验证码，但无法通过 ajax 将表单发送到将邮寄的 php 文件。当我发送邮件时屏幕刷新**

```
 <form action="#" name="MYFORM" id="MYFORM">
          <label>Name</label>
**then i put other labels**
          <input name="name" size="30" type="text" id="name">
          <br clear="all" />
          <label>Email</label>
          <input name="email" size="30" type="text" id="email">
          <br clear="all" />
          <div id="wrap" align="center">
            <img src="get_captcha.php" alt="" id="captcha" />
            <br clear="all" />
            <input name="code" type="text" id="code">
          </div>
          <img src="refresh.jpg" width="25" alt="" id="refresh" />
          <label>&nbsp;</label>
          <input value="Send" type="submit" id="Send">
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:59:43.523

您可以在文件 get_captcha.php 中使用 SESSION 来存储验证码的值，并在提交代码时将用户输入的验证码的 post 值与保存在 SESSION 中的值相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:00:17.127

假设您正在寻找 ajax 表单提交

```
 $.ajax({  
  type:'POST', 
  url: 'yourphpfile.php', 
  data:$('#formid').serialize(), 
  success: function(response) 
  {
     // do what ever you want with the repose 
  }
}); 
```

在您的 php 文件中，您通过比较在会话中生成和存储的验证码值来指定验证码的验证。如果验证码失败，则根据您得到的响应使用 javascript 显示错误

# magento - 替换 Magento 分层导航下拉菜单中的默认“选择一个选项”文本

> ID：12386582
> 
> 赞同：3
> 
> 时间：2012-09-12T10:52:41.810
> 
> 标签：magento, layered-navigation

我正在使用下拉菜单来显示我的分层导航属性值。我有 3 个过滤器 - 价格、尺寸和颜色。这就是我想要做的： 1\. 获取分层导航过滤器的下拉菜单。2\. 获取属性标签/名称以显示为第一个选项。目前，我的代码为每个下拉菜单设置了一个默认的“选择一个选项”值，我想用“选择价格”、“选择尺寸”和“选择颜色”之类的东西来替换它。这是我当前的模板/目录/层/filter.phtml代码。下拉菜单有效，但我坚持获取属性标签而不是“选择一个选项”

```
<select onchange="setLocation(this.value)">
<option value='' disabled selected style='display:none;'>Choose an Option</option>
</option> 
<?php foreach ($this->getItems() as $_item): ?>
<option
    <?php if ($_item->getCount() > 0): ?>
    value="<?php echo $this->urlEscape($_item->getUrl()) ?>"><?php echo $_item->getLabel() ?>
    <?php else: echo '>' . $_item->getLabel() ?>
    <?php endif; ?>
    (<?php echo $_item->getCount() ?>)
</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:41:04.170

试试这个代码。它在所有浏览器中都经过测试。

```
<select onchange="setLocation(this.value)">
<?php $count = 0; ?>
 <?php foreach ($this->getItems() as $_item): ?> 
 <?php $count++; ?>
 <?php if($count == 1): ?>
<option value='' disabled selected style='display:none;'>Choose <?php echo $attribute_code = $_item->getFilter()->getName();?> </option> 
<?php endif; ?>
<option <?php if ($_item->getCount() > 0): ?> value="<?php echo $this->urlEscape($_item->getUrl()) ?>">
<?php echo $_item->getLabel() ?> <?php else: echo '>' . $_item->getLabel() ?> <?php endif; ?> (<?php echo $_item->getCount() ?>) </option>
<?php endforeach; ?> 
</select> 
```

# c#-4.0 - Outlook 中的模块顺序与浏览器不同

> ID：12386584
> 
> 赞同：1
> 
> 时间：2012-09-12T10:52:51.107
> 
> 标签：c#-4.0, dynamics-crm, dynamics-crm-2011, outlook-2010

![即模块](../Images/4cee489b0e804712f3ab363edbf1dd83.png)![展望模块](../Images/228b4f225ddd37082f3d81eeb4c10032.png)

从屏幕截图可以看出，Outlook 2010 中模块的显示顺序与浏览器不同。我希望 Outlook 也以与浏览器中显示的顺序相同的顺序显示模块。在 Outlook 业务中排名第一，但在浏览器中排名第二。我使用 pragma 工具包来更改模块的顺序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:59:24.757

您的屏幕截图显示了站点地图中的导航区域。

[来自 SDK：（](http://msdn.microsoft.com/en-gb/library/gg309259.aspx)我的重点）：

下图显示了 Microsoft Dynamics CRM for Outlook 导航。**Microsoft Outlook 在树视图中按字母顺序显示每个导航区域，而不是使用 SiteMap 中指定的顺序**。每个人都可以选择将阅读窗格放置在如图所示的底部或侧面。他们也可以选择不显示。每个实体都可以配置为确定它是否将显示阅读窗格...

如果你真的需要它是一个特定的顺序，你可以在每个导航部分前面加上一个数字。有点丑陋的解决方案，但我不确定还有其他选择。

# zend-framework - 为什么 nginx 在 js 文件的顶部添加一些字符

> ID：12386588
> 
> 赞同：0
> 
> 时间：2012-09-12T10:53:14.960
> 
> 标签：zend-framework, nginx, ckeditor

我有一个运行到 Nginx 服务器的 zend 应用程序。当我调用`ckeditor`js 时，我会得到这样的结果：

```
SyntaxError: illegal character
[Stopper sur une erreur]    

О╩©/*

ckeditor.js (line 1, col 1) 
```

知道该文件`ckeditor.js`是正确的，我将它用于运行到 Apache 服务器的另一个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:19:26.063

这可能是 BOM，字节顺序标记，请参阅[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)。

修复方法是从文件中删除它（假设文件采用 UTF-8 格式），或者，如果您的应用程序能够使用 BOM 处理 UTF-8，则要求 nginx 通过使用将响应标记为 UTF-8 格式[字符集](http://nginx.org/r/charset)指令：

```
charset utf-8; 
```

# java - 我怎样才能在摇摆中查看进度条

> ID：12386589
> 
> 赞同：-1
> 
> 时间：2012-09-12T10:53:18.733
> 
> 标签：java, swing, core

我想创建逐步运行的签出进度条，如下图所示。我怎么能在摇摆中做到这一点。请给我一些想法。

![在此处输入图像描述](../Images/839f4456699f49c85b6e460d6e5fb3f9.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:02:34.920

1.  这是关于[定制的 JTabbedPane](https://stackoverflow.com/questions/7054466/how-can-i-change-the-shape-of-a-jtabbedpane-tab/7056093#7056093)（不容易而且好工作）

    *   覆盖`JTabbedPanes`方法`paint()`并使用`paintBorder()`

    *   使用两个准备`Icons(ImageIcons)`为`JLabel`每个`tabs`，一个用于选中，第二个用于未选中

2.  使用两个准备好的布局，一个`Icons(ImageIcons)`用于选中，第二个用于未选中，注意 - 内容不适合可调整大小的内容，必须使用锚点通过 GridBagLayout 布局`JButtons``JPanels``CardLayout`

3.  `JLayeredPane`与`Icons(ImageIcons)`into `JButton`for`JPanels`一起使用`CardLayout`，注意 - 最多有 6 个成员`JLayeredPane`

# jquery - jQuery $.get() 某些元素，但删除任何不需要的元素，然后追加

> ID：12386590
> 
> 赞同：2
> 
> 时间：2012-09-12T10:53:37.583
> 
> 标签：jquery, jquery-selectors

我一直在创建一个 WordPress 主题，并且在将确切需要的新内容插入 DOM 时遇到了一些困难。

为了简化我的问题，我试图把这个例子放在一起，而不是为了证明我的目标。

考虑以下：

### 第一页html内容

```
<ul class="ordered-list">
    <li class="list-divider">
        First Result Page <span>A counter</span>
    </li>
    <li class="list-item">
        Result 1
    </li>
    <li class="list-item">
        Result 2
    </li>
</ul>
<div id="load-more">
    <a href="#">Load More</a>
</div> 
```

### 下一页 html 内容

```
<ul class="ordered-list">
    <li class="list-divider">
        Second Result Page <span>A counter</span>
    </li>
    <li class="list-item">
        Result 3
    </li>
    <li class="list-item">
        Result 4
    </li>
</ul>
<div id="load-more">
    <a href="#">Load More</a>
</div> 
```

### jQuery

```
$('#load-more a').click(function() {
    $.get('http://example.com/nextpage', function(data){
         $(".ordered-list").append(
             $(data).find('.ordered-list').html() // get the li's from data
         ); // append the new li's to the First page
    }); 
```

有了上面的内容，我能够成功地将新的列表项附加到无序列表中（如果我上面的示例已正确粘贴）。

我试图做的是`<li class="list-divider">`从接收到的数据中删除`$.get()`并仅附加这些`<li class="list-item">`项目。

尝试实现上述要求的非功能代码示例：

```
// get the li's from data but get rid of li.list-divider
$(data).find('.ordered-list').remove('.list-divider').html(); 
```

我假设我遗漏了一些东西，这可能有一个非常简单的解决方案。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:56:39.527

您非常接近，您只需要附加正确的 jQuery 元素，而不是尝试从 HTML 中删除错误的元素：

```
$.get('http://example.com/nextpage', function(data){
     $(".ordered-list").append(
         $(data).find('li.list-item') // append the actual li elements themselves
     ); 
}); 
```

示例 - [http://jsfiddle.net/ccGes/](http://jsfiddle.net/ccGes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:58:08.627

```
$(data).find('.list-divider').remove(); 
```

这将从响应中删除具有类 list-divider 的 li。

# python - 我怎么了？

> ID：12386593
> 
> 赞同：0
> 
> 时间：2012-09-12T10:53:41.073
> 
> 标签：python, django, decorator, python-decorators

我有装饰器的问题。我正在尝试使用可选参数编​​写自己的装饰器。

这就是它现在的完成方式：

```
def CheckPremissions(manager=1):
    def wrap(func):
        def wrapper(request, *args, **kwargs):
            if request.user.is_anonymous():
                return HttpResponseRedirect(reverse('login'))

            logged_user = getRelatedWorker(request.user)

            if (logged_user == None):
                return HttpResponseRedirect('accounts/no_worker_error.html')

            if self.manager != 0:
                try:
                    dzial = Dzial.objects.get(kierownik=logged_user)
                except Dzial.DoesNotExist:
                    isManager = False
                else:
                    isManager = True

                if not isManager:
                    return HttpResponseRedirect('accounts/denied_logged.html')

            return func(request, *args, **kwargs)
        return wrapper
    return wrap 
```

代码看起来不错（对我来说），但是当我使用装饰器时，出现以下错误：

```
Environment:

    Request Method: GET
    Request URL: http://127.0.0.1:8080/applications/show

    Django Version: 1.4.1
    Python Version: 2.7.3

Traceback:
    File "/home/marcin/projekt/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
      188\.                 response = middleware_method(request, response)
    File "/home/marcin/projekt/lib/python2.7/site-packages/django/middleware/common.py" in process_response
      94\.         if response.status_code == 404:

    Exception Type: AttributeError at /applications/show
    Exception Value: 'function' object has no attribute 'status_code' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T10:57:36.893

我怀疑您错误地*应用*了装饰器。您需要调用它来指定`manager`参数：

```
@CheckPremissions()
def someview(request):
    pass 
```

或明确指定它：

```
@CheckPremissions(manager=0)
def someview(request):
    pass 
```

你的装饰器也有不同的问题；`self.manager`你在代码中提到：

```
if self.manager != 0: 
```

但这不是实例，也没有`self`参数。我想你的意思是：

```
if manager: 
```

（您可以通过将其视为布尔值来测试变量是否为非零）。哦，你可能想修正装饰器的拼写；你可能的意思是`CheckPermissions`。:-)

# php - PHP：在 PSR-0 命名空间类中自动加载 PEAR 命名空间类冲突

> ID：12386594
> 
> 赞同：1
> 
> 时间：2012-09-12T10:53:41.260
> 
> 标签：php, namespaces, pear, autoloader, psr-0

对于我的应用程序，我使用 PSR-0 命名空间。一切都很漂亮！

在我想使用 Twig 作为模板解析器之前，Twig 使用 PEAR 伪命名空间。像 Twig_Loader_Filesystem。

问题是，当我想在我的命名空间应用程序中使用 Twig 时，如下所示：

```
<?php
namespace Tact\ViewManager;

class ViewManager {

    public function init()
    {
        $loader = new Twig_Loader_Filesystem($this->templatepath);
        $this->twig = new Twig_Environment($loader);
    }  
}
?> 
```

PHP 会告诉我的自动加载器寻找一个名为`Tact\ViewManager\Twig_Loader_Filesystem`

**如何在没有调用类的 PSR-0 命名空间的情况下自动加载 PEAR 命名空间样式类？**

我的自动装载机能够同时装载 PEAR 和 PSR-0..

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:56:07.190

这是因为您在`Tact\ViewManager`命名空间中。伪命名空间类实际上位于全局命名空间中，因此您应该在它们前面加上前缀`\`来调用它们：

```
$loader = new \Twig_Loader_Filesystem($this->templatepath); 
```

如果`\`前缀困扰您，您可以这样做：

```
namespace Tact\ViewManager;

use Twig_Loader_Filesystem;
use Twig_Environment;

class ViewManager {
    public function init()
    {
        $loader = new Twig_Loader_Filesystem($this->templatepath);
        $this->twig = new Twig_Environment($loader);
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:56:44.660

尝试这个：

```
 $loader = new \Twig_Loader_Filesystem($this->templatepath);
    $this->twig = new \Twig_Environment($loader); 
```

这将告诉 PHP 在“根”级别强制进行命名空间\类查找，如果您的自动加载器设置为同时加载命名空间和常规 PEAR 约定类名，它将起作用。

# iphone - ZXing 2.0 可以在 iPhone 上同时扫描选择的 2D(QRCode, DataMatrix) 和 1D Barcodes 吗？

> ID：12386596
> 
> 赞同：0
> 
> 时间：2012-09-12T10:53:51.217
> 
> 标签：iphone

我正在尝试初始化一个`ZXingWidgetController`可以同时适用于 2D（QRCode、DataMatrix）和 1D Barcodes（UPC、EAN）我的问题是这是否可能。

这是我使用的代码

```
ZXingWidgetController *widController = [[ZXingWidgetController alloc] initWithDelegate:self showCancel:YES OneDMode:NO];

QRCodeReader* qrcodeReader = [[QRCodeReader alloc] init];
DataMatrixReader* dmReader = [[DataMatrixReader alloc] init];

MultiFormatUPCEANReader* upceanReader = [[MultiFormatUPCEANReader alloc] init];
MultiFormatOneDReader* oneDReader = [[MultiFormatOneDReader alloc] init];

NSSet *readers = [[NSSet alloc ] initWithObjects:qrcodeReader,dmReader,upceanReader,oneDReader, nil];

[qrcodeReader release];
[dmReader release];
[upceanReader release];
[oneDReader release];

widController.readers = readers;
[readers release]; 
```

如果我`OneDMode:YES`进行初始化，则应用程序崩溃并出现以下错误

`-[Not A Type _cfTypeID]: message sent to deallocated instance 0xded0270`

但是，如果我`OneDMode:NO`进行初始化，该应用程序不会崩溃，但它也不适用于条形码，并且仅适用于 QRCodes 和 2D 数据矩阵代码。

你能告诉我这是否可能，如果是，怎么做？

提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:54:18.087

您应该使用 svn 中的中继代码。自 2.0 版本以来，已经有一些 1D 更改。

但另请参阅“为什么一维码在 iOS 设备上不起作用？”这个问题。在[ZXing FAQ](http://code.google.com/p/zxing/wiki/FrequentlyAskedQuestions)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:51:45.357

据我所知，需要告知 ZXing 是在寻找 1D 还是 2D 代码，这就是 OneDMode 变量存在的原因。

除此之外，看起来您遇到的真正问题在于内存管理。任何时候你看到一条消息被发送到一个释放的实例，这意味着你太早地释放了一些东西。我强烈建议使用 ARC 而不是手动内存管理。

您的特定错误通常是人们在转换为 ARC 后看到的，所以我不确定您实际处于什么状态。但是，您可能想看看这个其他问题，看看它是否可以帮助您找出真正的问题是。

[-[Not A Type retain]：消息发送到已释放的实例](https://stackoverflow.com/questions/7993516/not-a-type-retain-message-sent-to-deallocated-instance)

# java - 如何观察变量的变化

> ID：12386604
> 
> 赞同：7
> 
> 时间：2012-09-12T10:54:44.490
> 
> 标签：java, variables, reflection

我想知道是否有任何方法可以在程序运行时观察变量值的变化。当然不使用调试器我想以**编程**方式进行。例如：

```
class A
{
   public static int valueToBeWatched;
} 
```

所以在运行时，如果在我的项目中任何类的任何方法中修改了这个值`MyValueChangeListner`事件应该被调用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T11:00:04.883

你不能。Java 本身没有内置监视修改钩子。显然，您可以进行轮询。但那样它就不会是“活的”。

AspectJ*可能*允许这样的想法，但我不确定它是否适用于原始变量，或者仅当您使用 getter 和 setter 时。

干净的Java方式是制作变量`private`并使用getter和setter。

```
private valueToBeWatched;

public void setValue(int newval) {
  valueToBeWatched = newval;
  notifyWatchers();
}

public int getValue() {
  return valueToBeWatched;
} 
```

`static`附带说明一下，尽可能避免。特别是`public`但不是`final`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-12T10:59:33.977

您需要将类型替换为`int`一个类，该类将在值更改时调用您的侦听器。您可能希望在实际未更改时忽略设置该值。

例如

```
 private int value;
 private final MyValueChangeListener listener;

 public void setValue(int value) {
    if(this.value == value) return;
    listener.changed(this, this.value, value);
    this.value = value;
 } 
```

您可以使用字节码注入来执行此替换，但更改原始代码要简单得多。

另一种方法是监视值以定期查找更改。除非值变化非常缓慢，否则您可能看不到所有变化。您可以使用 Debugger API 来执行此操作，但它并不简单，除非您已经熟悉该 API，否则我不建议您使用它。

Java 调试器 API 链接

[http://java.sun.com/javase/technologies/core/toolsapis/jpda/](http://java.sun.com/javase/technologies/core/toolsapis/jpda/)

[http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/)

[http://docs.oracle.com/javase/6/docs/jdk/api/jpda/jdi/](http://docs.oracle.com/javase/6/docs/jdk/api/jpda/jdi/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-12T14:16:18.187

如果您可以使用 Oracle 的最新 Java SE JDK，那么我建议使用**javafx.beans.property**和**javafx.beans.value** API。

这是一些基本代码：

```
import javafx.beans.property.DoubleProperty;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;

public class ObservableValues
{        

    public static void main(String[] args) 
    {
        DoubleProperty dp = new SimpleDoubleProperty(9);
        dp.addListener( new DoubleChangeListener() );
        dp.setValue(3);
        dp.setValue(6);
    }

    static class DoubleChangeListener implements ChangeListener<Number>
    {
        @Override
        public void changed(ObservableValue<? extends Number> ov, Number oldValue, Number newValue) 
        {
            System.out.println("the value has changed from " + oldValue + " to " + newValue);
        }
    }

} 
```

这是输出：

该值已从 9.0 更改为 3.0

该值已从 3.0 更改为 6.0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T11:13:21.370

如前所述，这个问题可以通过编写一个代理来解决所提供的字段的变化（参见[fieldWatch](http://docs.oracle.com/javase/6/docs/platform/jvmti/jvmti.html#fieldWatch)）。代理必须使用与 C 调用兼容的语言进行编译，并在 VM 启动时通过`-agentpath:<path-to-agent>=<options>`开关调用。

[更高级别的选项是使用JPDA](http://docs.oracle.com/javase/6/docs/jdk/api/jpda/jdi/com/sun/jdi/event/ModificationWatchpointEvent.html) /JDI附加到正在运行的进程，它将上述调用包装在 (Java) [ModificationWatchpointEvent](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/jpda.html)中。

# sql-server - 从 SQL Server 测试链接的 Oracle 服务器上的行

> ID：12386607
> 
> 赞同：0
> 
> 时间：2012-09-12T10:54:54.070
> 
> 标签：sql-server, tsql

我收到此 TSQL 的语法错误：

```
if exists ( exec('select * from mytable') at LinkedOracleServer ) begin
    print 'rows exist'
end 
```

我不能在临时表中使用 INSERT EXEC，因为调用过程也使用 INSERT EXEC，并且我收到错误“无法嵌套 INSERT EXEC 语句”。

是否有另一种方法来测试链接服务器上的现有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:09:56.793

这只是一个建议。你不能这样试试吗

```
select @recod_count = count(*) from LinkedOracleServer.mytable
if @recod_count>1 begin
end 
```

# asana - 获取体式项目 ID

> ID：12386609
> 
> 赞同：8
> 
> 时间：2012-09-12T10:54:57.423
> 
> 标签：asana

我正在尝试找出如何从主 Web 应用程序获取工作区和项目 ID。我似乎无法在任何地方找到它们。

我正在尝试编写一个 VB.Net 应用程序，并试图从 API 中获取一些信息，而不是 400 Bad request。如果我有这些身份证，我可能会走得更远

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-14T07:58:34.533

我`app.asana.com/api/1.0/workspaces`进入浏览器（在我登录 Asana 之后），它给了我所有的工作区 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-15T03:18:43.700

使用 Web 界面时，最容易在项目的 URL 中找到项目 ID `https://app.asana.com/0/{PROJECT_ID}/...`：. 它适用于 API 调用，例如将浏览器指向`https://app.asana.com/api/1.0/projects/{PROJECT_ID}/tasks?assignee=me`

# android - 转换为 Dalvik 格式失败

> ID：12386611
> 
> 赞同：2
> 
> 时间：2012-09-12T10:55:04.863
> 
> 标签：android, xml, dalvik

当我尝试运行我的应用程序时——它是从我标记为 liberary 的 zxing 项目扩展而来的一个类——控制台给了我以下错误：

```
[2012-09-12 11:51:01 - QR00] Conversion to Dalvik format failed with error 1 
```

有什么建议可以解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:57:11.463

转到项目»属性»Java构建路径»库并删除除“Android XY”之外的所有内容（在我的情况下为Android 1.5）。单击确定。转到项目»清理»清理下面选择的项目»选择您的项目并单击确定。那应该行得通。

您也可能在项目文件夹中的某个位置有一个 JAR 文件（我已将 Admob JAR 文件复制到我的 src 文件夹中），然后将其添加为 Java 路径库。它不会出现在 Package Explorer 下，所以你不会注意到它，但它确实被计算了两次，导致可怕的 Dalvik 错误 1。

参考相关问题：

[外部 JAR 上的“转换为 Dalvik 格式失败，错误 1”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:58:14.313

你有没有试过在[这里](http://bimbim.in/post/2010/09/24/Reason-of-Conversion-to-dalvik-format-failed-with-error-1.aspx)和 [这里](http://android.foxykeep.com/dev/fix-the-conversion-to-dalvik-format-failed-with-error-1-with-adt-14)看。[这个话题也在这里](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)彻底讨论。在你提问之前尝试搜索一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:18:54.507

如果您使用的是 ActionBarSherlock，请注意 ADT 将兼容性库插入到您的项目中。ActionBarSherlock 嵌入了这个库，重复导致错误。

# c# - 获取用户想要上传的真实文件类型

> ID：12386613
> 
> 赞同：0
> 
> 时间：2012-09-12T10:55:05.020
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

在我的 ASP.Net MVC 3 应用程序中，我有上传图像的逻辑。我怎样才能找出用户尝试上传的某些文件是真正的图像？我需要在上传之前在客户端检查它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:58:34.143

如果您使用：

```
Image.FromStream(stream) 
```

如果它不是有效的图像，它将抛出 ArgumentException。

# javascript - updatePagePadding 和 updatedlayout 的区别

> ID：12386614
> 
> 赞同：1
> 
> 时间：2012-09-12T10:55:07.797
> 
> 标签：javascript, jquery, mobile, jquery-mobile

随着新的 jQuery Mobile 1.1.1 出现了一个新选项`updatePagePadding`。这个新属性和现有属性有什么区别`updatelayout`（在注入动态内容时可以触发工具栏重新定位）？是否`updatePagePadding`只适用于固定工具栏？

# java - Xcode 图像将 ImageView 链接到下一个 View Controller

> ID：12386624
> 
> 赞同：1
> 
> 时间：2012-09-12T10:55:55.503
> 
> 标签：java, iphone, ios, xcode, xcode4.3

我为一个选项卡式应用程序制作了一个 Xcode 项目，该应用程序在 Scrollview 中显示颜色样本的图像。如何链接我的滚动视图中的一个图像以转到下一个视图控制器？下面是我的代码和图片。因此，当您在滚动视图中单击其中一个图像或样本颜色时，它会链接到新控制器。

我有多个图像可以向下滚动 iPhone 的页面，我是否必须循环图像，因为有 24 个图像。我可以制作一个按钮并使用界面构建器将其链接到下一个场景，但我可以在屏幕上放置 5 张图像..

DecorsViewController_iPhone.h

```
 #import <UIKit/UIKit.h>

 @interface DecorsViewController_iPhone : UIViewController

 {
IBOutlet UIScrollView *scrollViewDecors;
 }

@property (nonatomic, retain) UIView *scrollViewDecors;

@end 
```

DecorsViewController_iPhone.m

```
#import "DecorsViewController_iPhone.h"

@interface DecorsViewController_iPhone ()

@end

@implementation DecorsViewController_iPhone

@synthesize scrollViewDecors;

const CGFloat kScrollObjHeight  = 81.5;
const CGFloat kScrollObjWidth   = 320.0;
const NSUInteger kNumImages     = 24;

- (void)layoutScrollImages
{
UIImageView *view = nil;
NSArray *subviews = [scrollViewDecors subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 0;
CGFloat curYLoc = 0;
CGFloat curYSpace = 1;

for (view in subviews)
{
    if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
    {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, curYLoc);
        view.frame = frame;

        curYLoc += (curYSpace + kScrollObjHeight);
    }
}

// set the content size so it can be scrollable
    [scrollViewDecors setContentSize:CGSizeMake(([scrollViewDecors bounds].size.width), (kNumImages * kScrollObjHeight))]; // Vertical Option
 }

- (void)viewDidLoad
{
self.view.backgroundColor = [UIColor viewFlipsideBackgroundColor];

// 1\. setup the scrollview for multiple images and add it to the view controller
//
// note: the following can be done in Interface Builder, but we show this in code for clarity
[scrollViewDecors setBackgroundColor:[UIColor blackColor]];
[scrollViewDecors setCanCancelContentTouches:NO];
scrollViewDecors.indicatorStyle = UIScrollViewIndicatorStyleWhite;
scrollViewDecors.clipsToBounds = YES;       // default is NO, we want to restrict drawing within our scrollview
scrollViewDecors.scrollEnabled = YES;

// pagingEnabled property default is NO, if set the scroller will stop or snap at each photo
// if you want free-flowing scroll, don't set this property.
// scrollView1.pagingEnabled = YES;

// load all the images from our bundle and add them to the scroll view
NSUInteger i;
for (i = 1; i <= kNumImages; i++)
{

    NSString *imageName = [NSString  stringWithFormat:@"Artwork_iPhone_Decors_Scrollview_%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
    CGRect rect = imageView.frame;
    rect.size.height = kScrollObjHeight;
    rect.size.width = kScrollObjWidth;
    imageView.frame = rect;
    imageView.tag = i;  // tag our images for later use when we place them in serial fashion
    [scrollViewDecors addSubview:imageView];
    //[imageView release];
}

[self layoutScrollImages];  // now place the photos in serial layout within the scrollview

}

//- (void)dealloc
//{ 
//  [scrollViewDecors release];
//  
//  [super dealloc];
//}

//- (void)viewDidLoad
//{
// [super viewDidLoad];
//  // Do any additional setup after loading the view, typically from a nib.
//}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}

@end 
```

![在此处输入图像描述](../Images/11cb7cfe044146cfad9a5be90517c9f7.png)

![在此处输入图像描述](../Images/9847442cbdcccad2b8e4f5c3e36af837.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:12:03.143

首先，您需要在视图中添加一个手势识别器，例如：

```
UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc]
                                                          initWithTarget:self
                                                          action:@selector(flipView:)];
    [singleTapGestureRecognizer setNumberOfTapsRequired:1];
    [self.view addGestureRecognizer:singleTapGestureRecognizer]; 
```

然后你需要实现'flipView'方法：

```
- (void)flipView:(UIPanGestureRecognizer *)recognizer {
    [self performSegueWithIdentifier:@"textView" sender:self];
} 
```

正如您在我的案例中看到的，当触发该方法时，我执行了一个 segue（见下文）：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"textView"])
    {
        //---Pass text to view
        CGRect visibleRect;
        visibleRect.origin = scrollView.contentOffset;
        visibleRect.size = scrollView.bounds.size;

        int number;

        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
            number = visibleRect.origin.x / 768;
        }
        else {
            number = visibleRect.origin.x / 320;
        }

        TextViewController *textViewController = segue.destinationViewController;
        AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
        textViewController.text = [appDelegate.textArray objectAtIndex:number];
    }
} 
```

“数字”变量用于确定单击了哪个图像，我将可见矩形原点除以屏幕宽度（以像素为单位），以计算哪个图像已被按下，因此将哪些数据发送到我的新视图。

在您的情况下，您将使用 Y 坐标来执行计算以确定已按下哪种颜色，可能类似于：

```
int number;

            if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
                number = visibleRect.origin.y / <height of each image on iPad in pixels>;
            }
            else {
                number = visibleRect.origin.y / <height of each image on iPhone in pixels>;
            } 
```

或者，您可以使用 UITableView 并使用适当的颜色填充单元格，然后根据按下的单元格显示新视图。

**编辑** 使用 UITableView，并使用自定义表格视图单元格用您的图像填充每个单元格。这是一种比您建议的方法更容易的方法。

请参阅这些链接： [将图像添加到 UItableView](https://stackoverflow.com/questions/4999017/adding-images-to-uitableview)

如果使用 iOS 5 - [http://kurrytran.blogspot.co.uk/2011/10/ios-5-storyboard-uitableview-tutorial.html](http://kurrytran.blogspot.co.uk/2011/10/ios-5-storyboard-uitableview-tutorial.html) 如果不是 - [http://www.iosdevnotes.com/2011/10/uitableview -教程/](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)

您使这项任务过于复杂，请按照上述教程进行操作，您将立即完成。如果此答案对您有所帮助，请将其标记为正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:08:10.813

你可以自定义你的 UIImageView。例如，MyImageView。将其委托设置为您的主 ScrollView 并添加`UITapGestureRecognizer`和 TapDetecting 委托方法。您可以在 MyImageView 中实现：

```
- (void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer {
// single tap 
if ([_delegate respondsToSelector:@selector(myImageViewWasSingleTapped:)])
    [_delegate myImageViewWasSingleTapped:self];
} 
```

然后在您的主 ScrollView（MyImageView 的代表）中：

```
- (void)myImageViewWasSingleTapped:(MyImageView *)miv {
    AnotherViewController *asv = [[AnotherViewController alloc] initWithImage: miv];
    [self.navigationController pushViewController: asv animated:YES];
    [asv release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:35:49.637

您可以使用按钮而不是 UIImageView，并将按钮的图像设置为您的图像。您在 viewDidLoad 中的循环将是这样的：

```
// load all the images from our bundle and add them to the scroll view
NSUInteger i;
for (i = 1; i <= kNumImages; i++)
{
    NSString *imageName = [NSString  stringWithFormat:@"Artwork_iPhone_Decors_Scrollview_%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIButton *imageButton = [[UIButton alloc] init];
    [imageButton setImage:image forState:UIControlStateNormal];
    [imageButton addTarget:self action:@selector(pushNextViewController:) forControlEvents:UIControlEventTouchUpInside];

    // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
    CGRect rect = CGRectMake(0, 0, kScrollObjWidth, kScrollObjHeight);
    imageButton.frame = rect;
    imageButton.tag = i;  // tag our images for later use when we place them in serial fashion
    [scrollViewDecors addSubview:imageButton];
    // Release imageButton unless you're using ARC
} 
```

然后你需要为 imageButton 定义一个动作，在这种情况下我称之为 pushNextViewController：

```
- (void)pushNextViewController:(id)sender
{
    UIViewController *yourNextViewController = // initialise your next view controller here
    [self.navigationController pushViewController:yourNextViewController animated:YES];
} 
```

# selecteditem - 在 ext.net 中默认选择一个 dataview 的值

> ID：12386639
> 
> 赞同：1
> 
> 时间：2012-09-12T10:56:45.007
> 
> 标签：selecteditem, dataview, ext.net, onload-event

我正在使用 Ext.Net 1.5。我正在使用 Ext:dataview。我想默认选择一个数据视图值。建议我怎么可能？

请看图片

![在此处输入图像描述](../Images/0cc70c5418dd9eab9dec3cc8d1403184.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:18:59.840

尝试添加以下JS代码：

```
if ({your_dataview_id}.store.data.length > 0) {
    {your_dataview_id}.select(0); // Selects first element in a dataview
} 
```

当您想要选择数据视图中的第一个元素时，在客户端。只需将 {your_dataview_id} 替换为您的数据视图的 ID

# sql - 使用存储过程在 SQL Server 中执行结果

> ID：12386646
> 
> 赞同：2
> 
> 时间：2012-09-12T10:57:12.070
> 
> 标签：sql, sql-server-2005, stored-procedures

我需要执行 SQL 查询的结果（已经以 SQL 的形式）来获得最终结果。

所以，应该是，在我执行的第一个查询中

```
Select Top(1) RequiredQuery as ReqQry from EPMaster 
```

我将在结果中获得另一个查询，`ReqQry`然后以另一个查询的形式执行该查询以获得最终结果。

第二个查询还需要在 where 子句中传递一些参数，就像我做的那样：

```
Select Top(1) RequiredQuery as ReqQry 
from EPMaster 
--ReqQry after its execution returns:
Select Top(1) (FirstName + ' ' + LastName) as FullName 
from DPMaster 
where DmID = @DomainID and PnID = @PersonID 
```

我将从我的 C# 项目的 DAL 层传递`@DomainID`参数`@PersonID`。

所以我想它应该在存储过程的帮助下完成。

-----------------更多解释----------

在这里，执行一条 SQL 语句以获取下一条 SQL 语句，该 SQL 语句将是前一条语句的结果。当您执行第一个查询时，您会在结果中获得第二个查询，您再次执行以获得最终结果

第二个查询需要 2 个参数来执行，这些参数`@DomainID`将由`@PersonID`我从我的 C# 项目传递。因此，如果我创建一个存储过程来处理所有这些并传递所需的参数，以及我项目中的第一个查询，它应该首先执行第一个查询，然后执行第二个查询（带有参数`PersonID`和`DomainID`）作为结果接收第一个查询，之后我得到最终结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:13:15.143

您应该使用**Dynamic SQL**来运行从第一个过程/查询返回的 nvarchar(max) 查询字符串。

**编辑：**

```
DECLARE @ResultOfTheFirstQuery nvarchar(max)

SELECT @ResultOfTheFirstQuery = (Select Top(1)RequiredQuery 
                                 as ReqQry from EPMaster)

exec sp_executeSql @ResultOfTheFirstQuery 
```

或者如果你需要一个复杂的逻辑，你可以写一个其他的 SP，它可以有一个返回值：

```
DECLARE @ResultOfTheFirstQuery nvarchar(max)

SELECT @ResultOfTheFirstQuery = FirstStoredprocedure @params

exec sp_executeSql @ResultOfTheFirstQuery 
```

这是一个已经[很好回答的问题](https://stackoverflow.com/questions/2881024/t-sql-get-selected-value-of-stored-procedure)，如何获得参数返回。您可以使用`RETURN`或`OUTPUT`参数。

这里是如何使用[sp_executeSql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:14:24.963

```
Declare @SQL as nvarchar(MAX);
SET @SQL = (Select Top(1)RequiredQuery as ReqQry from EPMaster);
EXEC (@SQL); 
```

# c# - 如何检查网址是否有效

> ID：12386651
> 
> 赞同：1
> 
> 时间：2012-09-12T10:57:22.600
> 
> 标签：c#, asp.net, .net, uri

我正在尝试使用 .NET 从有效网址中过滤掉无效网址。

我为此使用[Uri.TryCreate()](http://msdn.microsoft.com/en-us/library/ms131573.aspx)方法。

它具有以下语法

```
public static bool TryCreate(Uri baseUri,string relativeUri,out Uri result) 
```

现在我正在这样做......

```
Uri uri = null;

var domainList = new List<string>();
domainList.Add("asas");
domainList.Add("www.stackoverflow.com");
domainList.Add("www.codera.org");
domainList.Add("www.joker.testtest");
domainList.Add("about.me");
domainList.Add("www.ma.tt");

var correctList = new List<string>();

foreach (var item in domainList)
{
    if(Uri.TryCreate(item, UriKind.RelativeOrAbsolute, out uri))
    {    
        correctList.Add(item);
    }
} 
```

我正在尝试上面的代码，我希望它可以从列表中删除`asas`，`www.joker.testtest`但它没有。

有人可以帮我解决这个问题。

更新：刚刚尝试过`Uri.IsWellFormedUriString`这个也没有帮助。

**更多更新**

有效uri列表

*   [http://www.ggogle.com](http://www.ggogle.com)
*   www.abc.com
*   www.aa.org
*   www.aas.co
*   www.hhh.net
*   www.ma.tt

无效uri列表

*   阿萨斯
*   作为#@SAd
*   这无效
*   www.asa.toptoptop

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:15:12.287

您似乎对究竟是什么 URL（或 URI，这里的区别不显着）感到困惑。例如，`http://stackoverflow.com`是一个有效的绝对 URL。另一方面，`stackoverflow.com`从技术上讲，它是一个有效的相对 URL，但它会引用`stackoverflow.com`当前目录中命名的文件，而不是具有该名称的网站。不过`stackoverflow.com`是注册*域名*。

如果要检查域名是否有效，则需要定义“有效”的确切含义：

1.  它是一个有效的域名吗？检查字符串是否由点分隔的部分组成，每个部分可以包含字母、数字和连字符 ( `-`)。例如，`asas`和`this.not.valid`都是有效的域名。
2.  会不会是互联网域名？Internet 上的域名（与 Intranet 相对）的特定之处在于它们始终具有 TLD（顶级域）。所以，`asas`当然不是互联网域名，但`this.not.valid`可能是。
3.  它是现有 TLD 下的域名吗？您可以下载[所有 TLD 的列表](http://data.iana.org/TLD/tlds-alpha-by-domain.txt)并进行检查。例如，`this.not.valid`在此规则下不会被视为有效，但`thisisnotvalid.com`会。
4.  是注册域名吗？
5.  域名是否解析为 IP 地址？可以注册一个域名，但它的 DNS 记录中可能仍然没有 IP 地址。
6.  域名指向的计算机是否响应请求？最有意义的请求是简单的 HTTP 请求（例如尝试访问`http://domaininquestion/`）或 ping。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T11:01:00.833

试试这个：

公共静态布尔[IsWellFormedUriString](http://msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx) ( 字符串 uriString, UriKind uriKind )

或者，您可以使用 RegExp 来执行此操作，例如：

```
^http\://[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(/\S*)?$ 
```

看看这份[清单](http://regexlib.com/Search.aspx?k=url&c=-1&m=-1&ps=20)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T11:26:48.223

问题是您在此处添加的所有 url 都不会被归类为绝对 URL。为此，您必须为其添加 URL 协议的前缀。

你可以测试并发现

www.stackoverflow.com - 相对 URL
[http://www.stackoverflow.com](http://www.stackoverflow.com) - 绝对 URL
//www.stackoverflow.com - 绝对 URL（这并不奇怪。[请参阅 RFC 3986：“统一资源标识符（URI）：通用语法” ，第 4.2 节](http://www.ietf.org/rfc/rfc3986.txt)）

关键是您必须至少添加前缀`//`以表明它是绝对 URL。

因此，简而言之，由于您的所有 URL 都是相对 URL，因此它通过了您的所有测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T11:06:38.693

您所有的示例都是有效的，
有些是绝对 URL，有些是相对的，这就是为什么没有一个被删除。

否则，对于每个 Uri，您可能会尝试构建一个`HttpWebRequest`类，然后检查正确的响应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T11:16:03.260

在检查了其他人的答案后，我知道您不是在寻找域的存在并 ping 回您需要根据您的 GRAMMER ... 或域名语法来测试它们，对吗？

为此，您只需要依靠正则表达式测试......并制定适当的规则来评估域名，如果它们失败，则将它们从列表中排除。

您可以[采用](http://regexlib.com/Search.aspx?k=url)这些模式并对其进行修改以满足您的需要，然后使用列表中的每个元素对其进行测试。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-12T11:08:23.317

您所有的`URI`s 都是 Well-Formatted `URI`s，因此`TryCreate`不适`IsWellFormedUriString`用于您的情况。

从[这里开始](https://stackoverflow.com/questions/153451/c-how-to-check-if-system-net-webclient-downloaddata-is-downloading-a-binary-f#156750)，解决方案正在尝试打开 URI：

```
using(var client = new MyClient()) {
    client.HeadOnly = true;
    // fine, no content downloaded
    string s1 = client.DownloadString("www.stackoverflow.com");
    // throws 404
    string s2 = client.DownloadString("www.joker.testtest");
} 
```

# c++ - g3d和视觉工作室2010？

> ID：12386655
> 
> 赞同：0
> 
> 时间：2012-09-12T10:57:55.037
> 
> 标签：c++, visual-studio-2010, opengl

我刚刚在笔记本电脑上安装了 Visual Studio 2010 并设置了 g3d。然后我打开了一个 g3d 下载附带的示例项目，以测试我是否设置正确。构建成功，但是在执行项目时出现此错误![g3d 错误](../Images/7185f7de80ac5b892c89902c0dc2c2f2.png)

我的笔记本电脑是新的，g3d 在我的旧笔记本电脑上运行良好，所以我不明白这一点。然而，新的笔记本电脑具有可切换的图形。其中的芯片是：Radeon (TM) HD 7470M 和 Intel(R) HD Graphics Family

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:59:04.720

好吧，以防万一其他人想知道答案是什么，这是一个 hp 问题，我电脑中的双显卡没有被拿起。我必须下载 CCC Catalyst Control Center 并允许程序访问我笔记本电脑中的 radeon 图形芯片。

# css - IE在第一次加载时无法加载css

> ID：12386658
> 
> 赞同：3
> 
> 时间：2012-09-12T10:57:59.947
> 
> 标签：css, internet-explorer, position

好吧，我在 IE Compability View 和启用 View 时加载 IE7 样式表时遇到问题。

我已将样式表添加到每个资源管理器（不能针对 IE10）。在 IE10 F12 Developer 的工具中进行测试时，它似乎工作正常。

这是[链接](http://www.ebay.es/itm/Funda-Gel-PROTECTOR-CARGADOR-COCHE-HUAWEI-ASCEND-G300-U8818-U8815-/200818507423?pt=LH_DefaultDomain_186&hash=item2ec1b73e9f#ht_1948wt_1163)

但是...当我在第一次运行资源管理器时加载页面（列表）时，我得到了这个结果![浏览器错误](../Images/125d04979b4e77000845badf27ff13fe.png) 。在这种情况下，我在 IE 模式下测试它，但在 Compability 模式下也会发生同样的情况。

有趣的是，如果我点击刷新，那么正确的样式表加载，问题就消失了。

可能是因为我在代码中有这一行：

```
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><![endif]--> 
```

![在此处输入图像描述](../Images/fd55c27ceeab390ddd67343a01b40c5d.png)

我把它放在 if 语句中，因为它影响了我在 Chrome 中的默认样式表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:20:20.873

复制 CSS 导入，但第二个却在里面

```
 <!--[if IE]>   here    <![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:43:53.183

尝试 `content="chrome=1"`

您还应该研究一种叫做镀铬框架的东西，

[http://www.chromium.org/developers/how-tos/chrome-frame-getting-started](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started)

...

我真的认为这可能是因为您在 DOCTYPE 之前有一个空格，或者如果您使用 javascript 加载它，请确保您没有`console.log()`导致错误，（后者仅在通过 javascript 加载 css 文件时才会出现。

我希望这对您有所帮助或为您指明从那里去的方向。

# algorithm - 以最少的移动次数将集合划分为 k 个组

> ID：12386668
> 
> 赞同：7
> 
> 时间：2012-09-12T10:58:42.480
> 
> 标签：algorithm

您有一组*n 个*对象，其中给出了整数位置。一*组*对象是同一位置的一组对象（不一定是该位置的所有对象：单个位置可能有多个组）。对象可以向左或向右移动，目标是移动这些对象以形成*k*个组，并以移动的最小距离进行。

例如：

*   初始位置为 [4,4,7]，*k* = 3：最小成本为 0。
*   [4,4,7] 和*k* = 2：最小成本为 0
*   [1,2,5,7] 和*k* = 2：最小成本为 1 + 2 = 3

我一直在尝试使用贪婪的方法（通过计算哪个动作最短），但这不起作用，因为每一步都涉及两个可以以任一方式移动的元素。我还不能制定动态编程方法，但我正在努力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-05T21:30:55.457

[这个问题是k-medians 问题](http://en.wikipedia.org/wiki/K-medians_clustering)的一维实例，可以表述如下。给定一组点 x_1...x_n，将这些点划分为 k 个集合 S_1...S_k 并选择 k 个位置 y_1...y_k，以使 |x_i - y_f(i)| 的所有 x_i 的总和最小化。 ，其中 y_f(i) 是 x_i 被分配到的集合对应的位置。

由于中位数是[绝对距离的总体最小值（即 L_1 范数）](http://en.wikipedia.org/wiki/Median#An_optimality_property)，因此每个位置 y_j 将是相应集合 S_j 中元素 x 的中位数（因此称为 k-medians）。由于您正在查看整数值，因此如果 S_j 包含偶数个元素，则中位数可能不是整数，但在这种情况下，选择高于或低于中位数的下一个整数将给出相同的总和绝对距离。

解决 k 中位数（以及相关且更常见[的 k 均值](http://en.wikipedia.org/wiki/K-means_clustering)问题）的标准启发式方法是迭代的，但这并不能保证产生最佳或什至好的解决方案。解决一般度量空间的 k-median 问题是 NP-hard，找到 k-median 的有效近似是一个开放的研究问题。例如，谷歌搜索“k-medians approximation”会导致一堆给出近似方案的论文。 [http://www.cis.upenn.edu/~sudipto/mypapers/kmedian_jcss.pdf](http://www.cis.upenn.edu/~sudipto/mypapers/kmedian_jcss.pdf) [http://graphics.stanford.edu/courses/cs468-06-winter/Papers/arr-clustering.pdf](http://graphics.stanford.edu/courses/cs468-06-winter/Papers/arr-clustering.pdf)

在一维中，事情变得更容易，您可以使用动态编程方法。[本文](http://journal.r-project.org/archive/2011-2/RJournal_2011-2_Wang+Song.pdf)描述了相关一维 k-means 问题的 DP 解决方案，R 中的源代码可[在此处](http://cran.r-project.org/web/packages/Ckmeans.1d.dp/index.html)获得。有关详细信息，请参阅论文，但该想法与@SajalJain 提出的想法基本相同，并且可以很容易地适应解决 k-medians 问题而不是 k-means。对于 j<=k 和 m<=n，令 D(j,m) 表示 x_1...x_m 的最优 j 中位数解的成本，其中假设 x_i 是有序的。我们有复发

```
D(j,m) = min (D(j-1,q) + Cost(x_{q+1},...,x_m) 
```

其中 q 的范围从 j-1 到 m-1 并且`Cost`等于距中位数的绝对距离之和。对于 的天真 O(n) 实现`Cost`，这将产生整个问题的 O(n^3k) DP 解决方案。但是，这可以改进为 O(n^2k)，因为 Cost 可以在恒定时间内更新，而不是每次都从头开始计算，使用以下事实：对于排序序列：

```
Cost(x_1,...,x_h) = Cost(x_2,...,x_h) + median(x_1...x_h)-x_1   if h is odd
Cost(x_1,...,x_h) = Cost(x_2,...,x_h) + median(x_2...x_h)-x_1   if h is even 
```

有关更多详细信息，请参阅文章。除了 Cost 函数的更新不同之外，k-median 的实现与 k-means 的实现相同。 [http://journal.r-project.org/archive/2011-2/RJournal_2011-2_Wang+Song.pdf](http://journal.r-project.org/archive/2011-2/RJournal_2011-2_Wang+Song.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:00:06.330

据我了解，问题是：

我们在一条线上有 n 个点。我们想在线上放置 k 个位置。我称它们为目的地。将n个点中的每一个移动到k个目的地之一，使距离之和最小。我把这个总和称为总成本。目的地可以重叠。

一个明显的事实是，对于每个点，我们应该在左侧寻找最近的目的地，在右侧寻找最近的目的地并选择最近的目的地。

另一个重要的事实是所有目的地都应该在点上。因为我们可以在不增加总距离的情况下将它们在线上向右或向左移动以到达一个点。

通过这些事实考虑以下 DP 解决方案：

DP[i][j] 表示第一个 i 点所需的最小总成本，此时我们只能使用 j 个目的地，并且必须在第 i 个点上放置一个目的地。

计算 DP[i][j] 将目的地固定在第 i 个点之前（我们有 i 个选择），并为每个选择（例如第 k 个点）计算第 i 个点和点之间的点所需的距离添加的新点（第 k 个点）。将其与 DP[k][j - 1] 相加并找到所有 k 的最小值。

初始状态（例如 j = 1）和最终答案的计算留作练习！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T21:27:45.710

让我们看看k=1。

对于 k=1 和 n 奇数，所有点都应该移动到中心点。对于 k=1 和 n 偶数，所有点都应移动到中心点或它们之间的任何点。我所说的“中心”是指两侧的点数，即中位数。

您可以看到这一点，因为如果您选择一个目标点 x，其右侧的点多于左侧的点，那么 x 右侧的新目标 1 将导致成本降低（除非恰好多一个点）右比左，目标点是一个点，在这种情况下，n 是偶数，目标在两个中心点上/之间）。

如果您的点已经排序，这是一个 O(1) 操作。如果不是，我相信它是 O(n) （通过顺序统计算法）。

一旦你找到了所有点都移动到的位置，找到成本是 O(n)。

因此，无论这些点是否已排序，这都是 O(n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:05:04.510

任务 0 - 以非递减顺序对对象的位置进行排序

让我们定义`'center'`它所在的对象的位置`shifted to.`

现在我们有两个观察结果；

1.  `For N positions the 'center' would be the position which is nearest to the mean of these N positions.`例如，让 1,3,6,10 为位置。然后均值 = 5。最近的位置是 6。因此这些元素的中心是 6。这为我们提供了当所有元素需要分组为 1 组时移动成本最低的位置。

2.  让 N 个位置“最优地”分成 K 个组。`When N+1 th object is added`, 那么它只会干扰第 K 组，即`first K-1 groups will remain unchanged.`

根据这些观察，我们构建了一种动态规划方法。

```
Let Cost[i][k] and Center[i][k] be two 2D arrays. 
Cost[i][k] = minimum cost when first 'i' objects are partitioned into 'k' groups
Center[i][k] stores the center of the 'i-th' object when Cost[i][k] is computed. 
```

`Let {L} be the elements from i-L,i-L+1,..i-1 which have the same center.`
`(Center[i-L][k] = Center[i-L+1][k] = ... = Center[i-1][k])`
这些是在计算第 i 个元素时需要考虑的唯一对象（来自观察 2）

现在

```
Cost[i][k] will be 
min(Cost[i-1][k-1] , Cost[i-L-1][k-1] + computecost(i-L, i-L+1, ... ,i))
Update Center[i-L ... i][k] 
```

通过找到中心（来自观察 1）可以很容易地找到 computecost()

时间复杂度：

```
Sorting O(NlogN)
Total Cost Computation Matrix = Total elements * Computecost = O(NK * N)
Total = O(NlogN + N*NK) = O(N*NK) 
```

# fluent-nhibernate - 流畅的映射基类 - 已添加时尝试添加属性

> ID：12386670
> 
> 赞同：2
> 
> 时间：2012-09-12T10:58:57.000
> 
> 标签：fluent-nhibernate

我有一个看起来像这样的基类：

```
public abstract class MyBaseClass
{
    public virtual DateTime UpdatedOn { get; set; }
} 
```

然后我有一系列继承自此的其他实体：

```
public class User : MyBaseClass
{
    public virtual string UserName { get; set; }
    public virtual string Password { get; set; }
} 
```

我的映射`User`将是：

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Id(x => x.UserName);
        Map(x => x.Password);

        Map(x => x.UpdatedOn);
    }
} 
```

然后我有其他实体，以相同的方式映射。
我的问题是我收到以下错误：

> 已添加时尝试添加属性“UpdatedOn”。

我想这是因为我`UpdatedOn`在每个实体中映射列？
我的每个表都有这个 UpdatedOn 列，那么我应该如何映射它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:06:15.317

[在流利的 nHibernate 中使用派生类](https://stackoverflow.com/questions/12154583/use-a-derived-class-in-fluent-nhibernate/12160356#12160356)

这个问题应该可以帮助你。您基本上可以使用基本流畅的 nhibernate 映射类来映射您的`UpdatedOn`列并从该基类派生所有其他映射类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:43:49.270

我有类似的情况。我确实喜欢这个......它有效......
我应该将实体公开为接口......

```
public interface IEntity 
{              
    DateTime CreationDate { get; set; }               
    DateTime UpdationDate { get; set; }             
}

public interface IUser  : IEntity
{
    DateTime UserName { get; set; }
    DateTime Password { get; set; }
}

public interface IEmployee : IEntity
{
    DateTime Name { get; set; }
    DateTime Key { get; set; }
}

public abstract class Entity : IEntity
{               
    public virtual DateTime CreationDate { get; set; }

    public virtual DateTime UpdationDate { get; set; }
}

public class User : Entity, IUser
{
    public virtual string UserName { get; set; }
    public virtual string Password { get; set; }    
}

public class Employee : Entity, IEmployee
{
    public virtual string Name { get; set; }
    public virtual string Key { get; set; }
}

public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Id(x => x.UserName);
        Map(x => x.Password);

        Map(x => x.CreationDate);
        Map(x => x.UpdationDate);
    }
}

public class EmployeeMap : ClassMap<Employee>
{
    public EmployeeMap()
    {
        Id(x => x.Name);
        Map(x => x.Key);

        Map(x => x.UpdationDate);
        Map(x => x.CreationDate);
    }
} 
```

# python - 在 PySNMP 代理中实现表

> ID：12386675
> 
> 赞同：1
> 
> 时间：2012-09-12T10:59:29.390
> 
> 标签：python, snmp, pysnmp

我正在使用 PySNMP 作为 SNMP 代理来实现一个表。

我遵循使用自动生成的 TRS-MIB.py 文件和手动编写的 __TRS-MIB.py 文件的（PySNMP 源）架构，其中包含实现。

我做了一个工作（2行）表，但代码真的很难看，所以必须有更好的方法。（此外，两行将始终具有相同的值，这是一个错误。）

__TRS-MIB.py：

```
# Imported just in case new ASN.1 types would be created
from pyasn1.type import constraint, namedval
import time

# Imports

( Integer,
  ObjectIdentifier,
  OctetString, ) = mibBuilder.importSymbols(
  "ASN1",
  "Integer",
  "ObjectIdentifier",
  "OctetString"
  )
( Bits,
  Integer32,
  ModuleIdentity,
  MibIdentifier,
  MibScalar,
  MibScalarInstance,
  TimeTicks, ) = mibBuilder.importSymbols(
  "SNMPv2-SMI",
  "Bits",
  "Integer32",
  "ModuleIdentity",
  "MibIdentifier",
  "MibScalar",
  "MibScalarInstance",
  "TimeTicks"
  )

class TrsDeliveryTime(Integer32):
  def clone(self, **kwargs):
    if 'value' not in kwargs:
      kwargs['value'] = int(time.time())
    return Integer32.clone(self, **kwargs)

class TrsMessagesPerHour(Integer32):
  def clone(self, **kwargs):
    if 'value' not in kwargs:
      kwargs['value'] = -int(time.time())
    return Integer32.clone(self, **kwargs)

class TrsGatewayIndex(Integer32):
  def clone(self, **kwargs):
    if 'value' not in kwargs:
      kwargs['value'] = 0
    return Integer32.clone(self, **kwargs)

class TrsGatewayName(OctetString):
  def clone(self, **kwargs):
    if 'value' not in kwargs:
      kwargs['value'] = 'SMG0'
    return OctetString.clone(self, **kwargs)

class TrsGatewayState(OctetString):
  def clone(self, **kwargs):
    if 'value' not in kwargs:
      kwargs['value'] = 'UP' + str(int(time.time()))
    return OctetString.clone(self, **kwargs)

# Objects
( trsDeliveryTime,
  trsMessagesPerHour,
  trsGatewayTable,
  trsGatewayEntry,
  trsGatewayIndex,
  trsGatewayName,
  trsGatewayState, ) = mibBuilder.importSymbols(
  'TRS-MIB',
  'trsDeliveryTime',
  'trsMessagesPerHour',
  'trsGatewayTable',
  'trsGatewayEntry',
  'trsGatewayIndex',
  'trsGatewayName',
  'trsGatewayState', 
  )
__trsDeliveryTime = MibScalarInstance(trsDeliveryTime.name, (0,), TrsDeliveryTime(0))
__trsMessagesPerHour = MibScalarInstance(trsMessagesPerHour.name, (0,), TrsMessagesPerHour(0))
__trsGatewayIndex0 = MibScalarInstance(trsGatewayIndex.name, (0,), TrsGatewayIndex(0))
__trsGatewayName0 = MibScalarInstance(trsGatewayName.name, (0,), TrsGatewayName(0))
__trsGatewayState0 = MibScalarInstance(trsGatewayState.name, (0,), TrsGatewayState(0))
__trsGatewayIndex1 = MibScalarInstance(trsGatewayIndex.name, (1,), TrsGatewayIndex(0))
__trsGatewayName1 = MibScalarInstance(trsGatewayName.name, (1,), TrsGatewayName(0))
__trsGatewayState1 = MibScalarInstance(trsGatewayState.name, (1,), TrsGatewayState(0))

# Augmentions

# Exports

# Objects
mibBuilder.exportSymbols("__TRS-MIB",
                         trsDeliveryTime=__trsDeliveryTime,
                         trsMessagesPerHour=__trsMessagesPerHour,
                         trsGatewayTable=trsGatewayTable,
                         trsGatewayIndex0=__trsGatewayIndex0,
                         trsGatewayName0=__trsGatewayName0,
                         trsGatewayState0=__trsGatewayState0,
                         trsGatewayIndex1=__trsGatewayIndex1,
                         trsGatewayName1=__trsGatewayName1,
                         trsGatewayState1=__trsGatewayState1,
                         ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:02:20.427

不要假装这是一个漂亮的代码，这是对您的初始版本的一些优化。它没有经过测试，因为我手头没有您的 TRS-MIB 文件。

这个想法是通过覆盖其 readGet() 方法来专门化 MibScalarInstance 类（使其服务于不同的列），该方法返回一个 var-bind 对以报告回 SNMP 管理器。

您应该能够使用常用的[CommandResponder](http://pysnmp.sourceforge.net/examples/current/v3arch/agent/cmdrsp.html)运行此 MIB ，只需确保在启动时加载您的 MIB。

```
import time

# Import managed objects
( trsDeliveryTime,
  trsMessagesPerHour,
  trsGatewayIndex,
  trsGatewayName,
  trsGatewayState, ) = mibBuilder.importSymbols(
  'TRS-MIB',
  'trsDeliveryTime',
  'trsMessagesPerHour',
  'trsGatewayIndex',
  'trsGatewayName',
  'trsGatewayState', 
  )

# Columnar managed objects instances implementation

class TrsDeliveryTimeInstance(MibScalarInstance):
  def readGet(self, name, val, *args):
    if name[-1] == 0:  # Row #0
      return self.name, self.syntax(int(time.time()))
    elif name[-1] == 1: # Row #1
      return self.name, self.syntax(time.time()//2)
    else:
      MibScalarInstance.readGet(self, name, val, *args)

class TrsMessagesPerHourInstance(MibScalarInstance):
  def readGet(self, name, val, *args):
    if name[-1] == 0: # Row #0
      return self.name, self.syntax(-int(time.time()))
    elif name[-1] == 1: # Row #1
      return self.name, self.syntax(-time.time()//2)
    else:
      MibScalarInstance.readGet(self, name, val, *args)

class TrsGatewayIndexInstance(MibScalarInstance):
  def readGet(self, name, val, *args):
    if name[-1] == 0: # Row #0
      return self.name, self.syntax(0)
    elif name[-1] == 1: # Row #1
      return self.name, self.syntax(1)
    else:
      MibScalarInstance.readGet(self, name, val, *args)

class TrsGatewayNameInstance(MibScalarInstance):
  def readGet(self, name, val, *args):
    if name[-1] == 0: # Row #0
      return self.name, self.syntax('SMG0')
    elif name[-1] == 1: # Row #1
      return self.name, self.syntax('SMG1')
    else:
      MibScalarInstance.readGet(self, name, val, *args)

class TrsGatewayStateInstance(MibScalarInstance):
  def readGet(self, name, val, *args):
    if name[-1] == 0: # Row #0
      return self.name, self.syntax('UP' + str(time.time()))
    elif name[-1] == 1: # Row #1
      return self.name, self.syntax('DOWN' + str(time.time()))
    else:
      MibScalarInstance.readGet(self, name, val, *args)

# Instantiate and export managed objects instances
mibBuilder.exportSymbols(
  "__TRS-MIB",
  # Row #0
  TrsDeliveryTimeInstance(trsDeliveryTime.getName(), 0, trsDeliveryTime.getSyntax()),
  TrsMessagesPerHourInstance(trsMessagesPerHour.getName(), 0, trsMessagesPerHour.getSyntax()),
  TrsGatewayIndexInstance(trsGatewayIndex.getName(), 0, trsGatewayIndex.getSyntax()),
  TrsGatewayNameInstance(trsGatewayName.getName(), 0, trsGatewayName.getSyntax()),
  TrsGatewayStateInstance(trsGatewayState.getName(), 0, trsGatewayState.getSyntax()),
  # Row #1
  TrsDeliveryTimeInstance(trsDeliveryTime.getName(), 1, trsDeliveryTime.getSyntax()),
  TrsMessagesPerHourInstance(trsMessagesPerHour.getName(), 1, trsMessagesPerHour.getSyntax()),
  TrsGatewayIndexInstance(trsGatewayIndex.getName(), 1, trsGatewayIndex.getSyntax()),
  TrsGatewayNameInstance(trsGatewayName.getName(), 1, trsGatewayName.getSyntax()),
  TrsGatewayStateInstance(trsGatewayState.getName(), 1, trsGatewayState.getSyntax())
) 
```

# java - Liferay 挂钩输入帖子在同一页面上

> ID：12386679
> 
> 赞同：0
> 
> 时间：2012-09-12T10:59:44.220
> 
> 标签：java, forms, liferay, session-variables, posting

我正在尝试从同一页面上的挂钩中检索帖子值，因此当我的值正确时，会出现内容。

我在钩子中添加了这段代码以将其放在指定的页面上。

```
<portlet:actionURL secure="<%= PropsValues.COMPANY_SECURITY_AUTH_REQUIRES_HTTPS || request.isSecure() %>" var="SecondloginURL">
     <portlet:param name="saveLastPath" value="0" />
     <portlet:param name="struts_action" value="/journal_content/view" />
</portlet:actionURL>
<aui:form action="" name="auth" method="POST">
     <aui:input label="Second Password" type="password" name="password" />
     <aui:button type="submit" value="authenticate" />
</aui:form> 
```

我设法检索了该值，但是当它经过验证的会话开始时，它不会跨页移动。

这是代码：

```
<% String pass = request.getParameter("password"); %>
<c:if test="<%= pass.equals(\"1234\") %>">
   <% 
       HttpSession session1 = request.getSession();
       session1.setAttribute("pass","authenticated");
       String foo = (String) session1.getAttribute("pass");
       out.println(foo);
   %>
<h2>this is the second password and it's working</h2>
   <div class="journal-content-article" id="article_<%= articleDisplay.getCompanyId() %>_<%= articleDisplay.getGroupId() %>_<%= articleDisplay.getArticleId() %>_<%= articleDisplay.getVersion() %>">
   <%= RuntimePortletUtil.processXML(application, request, response, renderRequest, renderResponse, articleDisplay.getContent()) %>
</div>
</c:if> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:49:47.623

在 Liferay 挂钩中，您可以覆盖现有的 Liferay jsps，因此也可以添加表单。

您还可以覆盖 Liferay Actions 和其他 Liferay 类。您不清楚将上述代码放在哪里以及钩子中还有什么，也不清楚您要实现的目标。

首先：您应该将您的表单定向到某个`<portlet:actionURL/>`，然后，根据调用此 jsp 的 portlet，您必须实现或覆盖该 portlet 的操作处理程序。在那里，您将能够从`ActionRequest`

# xcode - 带有clang的间歇性链接器错误（XCode 4.3.3）

> ID：12386680
> 
> 赞同：0
> 
> 时间：2012-09-12T10:59:53.650
> 
> 标签：xcode, linker, clang

我遇到了一个奇怪的链接器问题，让我非常困惑：

我正在通过命令行构建一个测试应用程序（使用 jam）：

如果我从头开始重建：一切都很好。如果我然后触摸一个文件（添加空格等），编译单个文件的行为会引发丢失符号错误（通常的 ld ：架构中缺少符号......）

如果我然后强制重建，一切正常。

当我查看命令行时，一切看起来都很好（两个命令行中没有差异），符号包含在传入的库中，除非它在构建之间生成不同的损坏名称/链接，否则它没有任何意义。 ..

有人有想法么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:10:20.650

对于那些遇到类似情况的人来说还可以：

这是存档器的配置问题..它没有正确设置来更新存档，因此它没有修补更新的符号/代码，而是从唯一更新的符号/代码中生成一个新的库，将任何未更新的符号留在新库中.

# c# - .NET 2.0 的类 TPL 库

> ID：12386686
> 
> 赞同：3
> 
> 时间：2012-09-12T11:00:25.490
> 
> 标签：c#, .net, multithreading, task-parallel-library, parallels

在 .NET 4.0 中发现 Parallels 库后，我希望在我的 .NET 2.0 应用程序中有类似的东西。

.NET 2.0 是否有任何可简化常见任务的并行编程帮助程序库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:27:36.990

您可以尝试.NET Framework 2.0+ 中提供的[`BackgroundWorker`类。](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)在这个站点和 MSDN 上有很多关于如何使用这个类的信息。

您还可以查看.NET Framework 1.1+ 中提供的[`Thread`类。](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)这门课的资料也很丰富。我特别喜欢的一个资源是[J. Albahari 的 threading 页面](http://www.albahari.com/threading/)。这应该为您开始使用这些功能提供了一个很好的起点。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T11:30:16.473

[`Threadpool`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)将是 .NET 2.0 中的提名，这与 TPL 类似。

> 提供一个线程池，可用于执行任务、发布工作项、处理异步 I/O、代表其他线程等待以及处理计时器。

[`TPL`](http://msdn.microsoft.com/en-us/library/dd460717.aspx)实际上`Threadpool`在引擎盖下使用：

> TPL 处理工作的分区、线程池上的线程调度、取消支持、状态管理和其他低级细节。

# maven - Gradle 中的 pom 依赖失败（在 Maven 中可以）

> ID：12386690
> 
> 赞同：0
> 
> 时间：2012-09-12T11:00:52.383
> 
> 标签：maven, jboss, ejb, jboss7.x, gradle

我正在为 JBoss 7.1 编写一个独立的 EJB 客户端，并按照建议使用以下依赖项：

```
<dependency>
    <groupId>org.jboss.as</groupId>
    <artifactId>jboss-as-ejb-client-bom</artifactId>
    <type>pom</type>
    <version>7.1.1.Final</version>
</dependency> 
```

这在 Maven 中按预期工作，但是在 Gradle 中使用时如下所示：

```
dependencies {
    compile 'org.jboss.as:jboss-as-ejb-client-bom:7.1.1.Final'
} 
```

它失败了：

> 找不到组：org.jboss，模块：jboss-remote-naming，版本：1.0.2.Final。

Gradle 与 Maven 行为不同的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:28:56.617

那么你在 Maven 中声明的依赖指向一个 pom 打包组件，而 Gradle 中的那个指向一个 jar。但是这个项目没有 jar，因为它是一个 pom 打包组件，所以 Gradle 显然失败了。

[http://search.maven.org/#browse%7C351478366](http://search.maven.org/#browse%7C351478366)

使用 Gradle，您可能必须以某种方式声明对 pom 的依赖项（不确定是否可能），或者自己将 pom 中的依赖项添加到您的项目中。

[http://search.maven.org/remotecontent?filepath=org/jboss/as/jboss-as-ejb-client-bom/7.1.3.Final/jboss-as-ejb-client-bom-7.1.3。最终的.pom](http://search.maven.org/remotecontent?filepath=org/jboss/as/jboss-as-ejb-client-bom/7.1.3.Final/jboss-as-ejb-client-bom-7.1.3.Final.pom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T14:04:41.870

使用`@pom`类型：

```
dependencies {
    compile 'org.jboss.as:jboss-as-ejb-client-bom:7.1.1.Final@pom'
} 
```

# iphone - 当我开始使用 NsurlConnection 下载时，我的应用程序挂起

> ID：12386694
> 
> 赞同：0
> 
> 时间：2012-09-12T11:01:13.897
> 
> 标签：iphone, objective-c, nsurlconnection

我有一个应用程序需要下载声音文件才能正常工作。

我正在使用`NSURLConnection`异步下载超过 20Mb 的文件。我放置了一个`progressBarView`以跟踪下载百分比，并且我正在使用`NSUrlConnection`Apple 建议的委托方法。

```
NSURLRequest *theRequest=[NSURLRequest requestWithURL:soundFileURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:20.0];
// create the connection with the request
// and start loading the data
NSURLConnection *theConnection;

theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

//[theConnection cancel];
//[theConnection start];
if (theConnection) {
    // Create the NSMutableData that will hold
    // the received data
    // receivedData is declared as a method instance elsewhere
    receivedData=[[NSMutableData data] retain];
} else {
    // inform the user that the download could not be made
} 
```

和委托方法

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [receivedData appendData:data];
} 
```

所以 ...

当我开始下载时，界面不时`progressView`挂起，也挂起。

一件值得注意的事情，也许还有另一个问题：我禁用了用户界面，所以用户必须等到下载完成，当然，我给他一条消息告诉他。苹果会因此拒绝我的应用程序吗？我非常担心

感谢您阅读我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:36:36.220

`NSUrlConnection`默认情况下将事件发送`NSURLConnectionDelegate`到主线程。您应该为此连接创建新的池和运行循环，并确保它在后台处理。这是在后台下载图像的示例。它使用修改后的 NSOperationQueue 和 NSOperation 但您可以轻松修改它以下载文件。[developer.apple.com 上的 LinkedImageFetcher](http://developer.apple.com/library/mac/#samplecode/LinkedImageFetcher/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T10:46:57.347

```
 //1 First allocate NSOperationQueue object and set number of concurrent operations to execute at a time 

 NSOperationQueue *thumbnailQueue = [[NSOperationQueue alloc] init];
    thumbnailQueue.maxConcurrentOperationCount = 3;
// load photo images in the background
    __weak BHCollectionViewController *weakSelf = self;
    NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
        UIImage *image = [photo image];

        dispatch_async(dispatch_get_main_queue(), ^{
            // then set them via the main queue if the cell is still visible.

                cell.imageView.image = image;
            }
        });
    }];

    operation.queuePriority = (indexPath.item == 0) ?
        NSOperationQueuePriorityHigh : NSOperationQueuePriorityNormal;

    [thumbnailQueue addOperation:operation]; 
```

创建 NSObject 的 Photo 类并添加以下方法

```
- (UIImage *)image
{
    if (!_image && self.imageURL) {
        NSData *imageData = [NSData dataWithContentsOfURL:self.imageURL];
        UIImage *image = [UIImage imageWithData:imageData scale:[UIScreen mainScreen].scale];

        _image = image;
    }

    return _image;
} 
```

# c# - 读取内存流

> ID：12386698
> 
> 赞同：1
> 
> 时间：2012-09-12T11:01:38.950
> 
> 标签：c#, stream, epplus

我正在尝试创建一个 excel 文件并将其作为下载提供。但是我在下载部分遇到了一些麻烦。

我`EPPlus`用来创建一个xml文件。我有那个工作。但只是本地的。我不确定如何强制下载文件。

这是我的代码：

```
public Stream GetXlsxDocument(IQueryable data)
{
    const string sheetName = "Sheet1";
    var localFile = new FileInfo(@"C:\test2.xlsx");
    var file = new FileInfo("test2.xlsx");
    // Used for local creation
    //ExcelPackage p = new ExcelPackage();
    MemoryStream stream = new MemoryStream();
    using (ExcelPackage p = new ExcelPackage(stream))
    {
        p.Workbook.Worksheets.Add("Sheet1");
        ExcelWorksheet ws = p.Workbook.Worksheets[1];
        ws.Name = sheetName;
        ws.Cells.Style.Font.Size = 11;
        ws.Cells.Style.Font.Name = "Calibri";
        ws.SetValue(1, 1, "aaa"); // Test data
        // Used for local creation
        //p.SaveAs(localFile);
        p.SaveAs(stream);
    }
    return stream;
} 
```

就像我之前说的。`xlsx`在我的 C:\ 磁盘上本地创建文件有效。但是我怎样才能强制下载创建的`xlsx`文件呢？

现在它给了我一个`xlsx`0 字节的文件。我需要返回一个不为空的流。任何人都知道我怎么能做到这一点..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:07:37.967

倒带：

```
stream.Position = 0;
return stream; 
```

# windows-phone-7 - 将唯一的电话 ID 作为电子邮件发送

> ID：12386699
> 
> 赞同：1
> 
> 时间：2012-09-12T11:01:39.257
> 
> 标签：windows-phone-7

我尝试创建一个允许用户为我的服务注册自己的应用程序。问题是我可以将每个用户限制为一个非常重要的帐户我发现我可能可以使用电话唯一 ID 和 windows live id 来做到这一点我还想出了如何在应用程序中获取这些，但是现在我的问题是如何让他们给我！谁能帮助我如何将带有所需用户名的电话 ID 发送到我的电子邮件地址？谢谢

**编辑**

我使用此代码来获取所需的值

```
public static class ExtendedPropertyHelper  
{  
    private static readonly int ANIDLength = 32;  
    private static readonly int ANIDOffset = 2;  
    public static string GetManufacturer()  
    {  
        string result = string.Empty;  
        object manufacturer;  
        if (DeviceExtendedProperties.TryGetValue("DeviceManufacturer", out manufacturer))  
            result = manufacturer.ToString();  

        return result;  
    }  

    //Note: to get a result requires ID_CAP_IDENTITY_DEVICE  
    // to be added to the capabilities of the WMAppManifest  
    // this will then warn users in marketplace  
    public static byte[] GetDeviceUniqueID()  
    {  
        byte[] result = null;  
        object uniqueId;  
        if (DeviceExtendedProperties.TryGetValue("DeviceUniqueId", out uniqueId))  
            result = (byte[])uniqueId;  

        return result;  
    }  

    // NOTE: to get a result requires ID_CAP_IDENTITY_USER  
    //  to be added to the capabilities of the WMAppManifest  
    // this will then warn users in marketplace  
    public static string GetWindowsLiveAnonymousID()  
    {  
        string result = string.Empty;  
        object anid;  
        if (UserExtendedProperties.TryGetValue("ANID", out anid))  
        {  
            if (anid != null && anid.ToString().Length >= (ANIDLength + ANIDOffset))  
            {  
                result = anid.ToString().Substring(ANIDOffset, ANIDLength);  
            }  
        }  

        return result;  
    }  
} 
```

现在我需要将它们存储在变量中（我无法真正开始工作），然后将它们发送到我的 php 脚本中提取它们

除此之外，我需要要求用户输入他的电子邮件地址并将其也包含在 POST 中，你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:03:42.933

如果“我的服务”是 Web 服务，那么您可以使用 Web 服务而不是邮件系统。

无论哪种情况，您都可以使用 Convert.ToBase64String(phoneId) 将电话 id 转换为字符串。

要从 WP7 通过邮件发送字符串，您需要使用 EmailComposeTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:04:03.103

您可以`DeviceExtendedProperties.DeviceUniqueId` 从`Microsoft.Phone.Info`命名空间获取。不要忘记申报`WMAppManifest.xml`

像这样：

```
<Capabilities>
  <Capability Name="ID_CAP_IDENTITY_DEVICE"/>
  <Capability Name="ID_CAP_IDENTITY_USER"/>
</Capabilities> 
```

[在此处](http://msdn.microsoft.com/en-us/library/microsoft.phone.info.deviceextendedproperties%28v=vs.92%29)链接到 msdn

然后，您可以将此 ID 发送到您的电子邮件：

```
var emailComposeTask = new EmailComposeTask
{
    To = "your-email@domiain.com",
    Subject = "Test Message using EmailComposeTask",
    Body = deviceId
};
emailComposeTask.Show(); 
```

但这会打开一个电子邮件客户端，我不认为那个用户会这么好心给你发一封电子邮件。所以，你最好向你的服务器发送一个 POST 请求

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        //collect all data you need:
        var deviceId = Convert.ToBase64String(ExtendedPropertyHelper.GetDeviceUniqueID());
        var userName = ExtendedPropertyHelper.GetWindowsLiveAnonymousID();
        var manufatcurer = ExtendedPropertyHelper.GetManufacturer();
        //create request string
        //[see the explanation on MSDN][2]
        var requestUrl = string
  .Format("http://myPageUrlAddress.com/script.aspx?deviceid={0}&user={1}&manufacturer={2}",
   deviceId, userName, manufatcurer);

        System.Uri myUri = new System.Uri(requestUrl);
        //create a request instance
        HttpWebRequest myRequest = (HttpWebRequest)HttpWebRequest.Create(myUri);
        myRequest.Method = "POST";
        myRequest.ContentType = "application/x-www-form-urlencoded";
        //and it will be sent. 
        //Also you need to create GetRequestStreamCallback method to 
        //handle server responce.
        myRequest.BeginGetRequestStream(new
        AsyncCallback(GetRequestStreamCallback), myRequest);
    }
    //this method is empty. You can show tha dialog box about successful sending.
    public void GetRequestStreamCallback(IAsyncResult result) { ; } 
```

电子邮件呢？只需在同一页面上创建一个文本框，并将用户输入保存到一个变量中。

# c# - 在 C# WinForms 中预览文档（Word、Excel、PDF、文本文件等）？

> ID：12386701
> 
> 赞同：3
> 
> 时间：2012-09-12T11:01:48.830
> 
> 标签：c#, winforms, pdf, ms-word, activex

我正在开发一个 C# WinForms 应用程序，我希望能够在其中“预览”各种文档类型。也就是说，当用户从列表中选择一个文件名时，它会在同一个表单中显示所选文件的预览。这很像 Outlook 允许您在不双击的情况下预览所选邮件的方式。

有没有办法只取一个文件名并在我的 WinForms 应用程序中动态创建一个控件来显示该文件的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:33:56.733

如果您想提供文件类型的预览/只读版本，一个想法可能是首先实现 PDF 查看，这主要涉及将 PDF 页面转换为图像，然后为这些创建视图。一旦完成（使用 GhostScript 或其他商业组件），您就可以将其他格式转换为 PDF，并使用 PDF 查看选项，您可能可以通过文字自动化处理大多数办公文档，并且可以直接显示基于文本的文件（可能对格式化文本使用富文本编辑器）

高温高压

# java - 使用 CUDA 和 Java 分配大型固定内存块

> ID：12386708
> 
> 赞同：0
> 
> 时间：2012-09-12T11:01:56.600
> 
> 标签：java, memory-management, cuda, jcuda

我正在用 Java 编写的程序中实现 GPU 计算。为此，我正在使用[jcuda](http://www.jcuda.de/)绑定。我需要一个快速的主机到设备的内存传输，有时是相对较大的数组。如果我想使用流，我必须使用固定内存。问题是如果我想分配大于 cca 600 Mbs RAM 的主机固定内存，我会得到“CUDA_ERROR_OUT_OF_MEMORY”异常。这是我用来测试可用固定内存大小的代码：

```
 public static void main(String[] args) {
    //Init GPU
    JCudaDriver.setExceptionsEnabled(true);

    // Initialize the device and create device context
    cuInit(0);
    CUdevice device = new CUdevice();
    cuDeviceGet(device, 0);
    CUcontext context = new CUcontext();
    cuCtxCreate(context, 0, device);

    Pointer p = new Pointer();

    int Kb = 1024;
    int Mb = 1024 * Kb;
    int Gb = 1024 * Mb;
    int sequenceSize = 172*Mb; // times 4 for float
    float[] expecteds = new float[sequenceSize];
    float[] actuals = new float[sequenceSize];
    Arrays.fill(expecteds, 3.33f);
    int i = 0;
    try {
        JCudaDriver.cuMemAllocHost(p, sequenceSize* Sizeof.FLOAT);
        FloatBuffer fb = p.getByteBuffer(0, sequenceSize* Sizeof.FLOAT).
                order(ByteOrder.nativeOrder()).
                asFloatBuffer();

        fb.position(0);
        fb.put(expecteds);
        fb.position(0);
        fb.get(actuals);
        JCudaDriver.cuMemFreeHost(p);

    } catch (Exception e) {
        e.printStackTrace();
        JCudaDriver.cuMemFreeHost(p);
    }

} 
```

现在，我知道操作系统可以阻止我使用过多的固定内存，因为它是不可分页的。问题是我有 48Gb（45Gb 空闲）的物理内存，我需要一种强制操作系统给我更多的方法。有没有办法做到这一点（如果可能的话，优雅地）？

编辑：操作系统是 64 位 Windows 7 Professional SP1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:51:11.410

检查您是否在 64 位模式下运行 Java。[FAQ](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html)建议[默认为 32-bit](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#64bit_selection)，即使是 64 位下载。链接的常见问题解答还告诉您如何在 64 位模式下运行，您还需要使用 64 位 DLL 等。

@ArchaeSoftware 建议使用`cuMemHostRegister()`/`cuMemHostUnregister()`固定较小的内存部分是一个明智的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:05:51.360

这似乎是一个旧页面，但没有答案。我猜你没有正确利用你的 RAM，因为默认情况下 Java 本身不会为堆分配太多内存。您可以通过 -Xms 和 -Xmx 分别强制 JVM 使用最小和最大内存，并且在处理 64 位架构时，在“-Xms”或“-Xmx”之后使用“-d64”

# isolatedstorage - 从 IsolatedStorage 中读取文件为字节

> ID：12386710
> 
> 赞同：1
> 
> 时间：2012-09-12T11:02:06.607
> 
> 标签：isolatedstorage, windows-phone-7.1.1

我想以字节为单位获取隔离存储中文件的大小。还需要将该文件作为每个 1024 字节的块读取。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:12:24.657

```
public static IsolatedStorageFileStream OpenFile(string filePath)
    {
        IsolatedStorageFileStream fileStream = null;

        using (var store = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (!store.FileExists(filePath))
            {
                return fileStream;
            }
            else
            {
                fileStream = store.OpenFile(filePath, FileMode.Open,     FileAccess.ReadWrite, FileShare.ReadWrite);
        }
        return fileStream;
    }

void ReadFile()
 {
    using (var streamReader = OpenFile(filePath))
    {
      using (BinaryReader reader = new BinaryReader(streamReader))
      {
         byte[] buffer = new byte[1024];
         int fileLen = (int)reader.BaseStream.Length;
         int readCount=0;
         while (fileLen > 0)
         {
            readCount = reader.Read(buffer, 0, buffer.Length);
            fileLen = fileLen - readCount;
            //Do what ever with buffer
         }
       }}} 
```

# php - Twitter Bootstrap 导航栏 - 表单输入之间的空间

> ID：12386713
> 
> 赞同：1
> 
> 时间：2012-09-12T11:02:13.673
> 
> 标签：php, html, css, twitter-bootstrap

我正在使用带有 PHP 站点的 Twitter Bootstrap (v2.1.1)。我在 php 脚本中动态生成导航栏，因为如果用户登录或退出站点，导航栏将具有不同的内容。当我使用 PHP 生成网站时，登录表单输入字段之间的间距不正确，我遇到了问题。以下是登录表单的相关 PHP 代码：

```
$loginLink .= '<form class="navbar-form pull-right">';
$loginLink .= '<input class="span2" type="text" placeholder="Account Name">';
$loginLink .= '<input class="span2" type="password" placeholder="Password">';
$loginLink .= '<button type="submit" class="btn">Log in</button>';
$loginLink .= '</form>'; 
```

然后我将其回显-您可以在此 jsFiddle 中看到结果：

[http://jsfiddle.net/fmdataweb/PugbE/](http://jsfiddle.net/fmdataweb/PugbE/)

注意帐户名、密码和登录按钮之间没有空格。您可以看到这应该如何看待：

[http://twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)

我已经确定如果在这两行之前创建一个回车符：

```
<input class="span2" type="password" placeholder="Password">
<button type="submit" class="btn">Log in</button> 
```

然后它在浏览器中正确呈现。

您可以在此 jsFiddle 中查看具有这些返回的版本：

[http://jsfiddle.net/fmdataweb/CqAPr/](http://jsfiddle.net/fmdataweb/CqAPr/)

我不确定为什么返回在这里很重要，但考虑到它们（除非我遗漏了什么），任何人都可以推荐在 PHP 脚本中生成所需的换行符？

我试过添加一个
，但这让事情变得更糟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:05:47.797

回报不是重点，因为它实际上不是与渲染相关的回报。重要的是元素之间的空间，并且由返回“生成”。只需执行以下操作：

```
$loginLink .= '<form class="navbar-form pull-right">';
$loginLink .= '<input class="span2" type="text" placeholder="Account Name"> '; // notice space here
$loginLink .= '<input class="span2" type="password" placeholder="Password"> '; // and here
$loginLink .= '<button type="submit" class="btn">Log in</button>';
$loginLink .= '</form>'; 
```

……应该没问题。

# request - 从 Spotify API 查询特定数据

> ID：12386715
> 
> 赞同：0
> 
> 时间：2012-09-12T11:02:22.197
> 
> 标签：request, spotify

Spotify [Web API](https://developer.spotify.com/technologies/web-api/search/)没有很好的文档记录，或者至少我找不到我要找的东西。

我想得到所有以**“A”**开头的艺术家（例如）。

如果我这样做（node.js）：

```
 var options = {
        host: 'ws.spotify.com',
        port: 80,
        path: '/search/1/artist.json?q=a',
        headers: {
            'Content-Type': 'application/json'
        } 
```

我得到的艺术家*有*一个**“A”**而不是那些以**“A”**开头的艺术家。这只是一个基本示例，但我猜我稍后也会遇到这个问题。

这可以做到还是取决于他们的API？正则表达式是否适用于这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:02:12.377

正则表达式不适用于此 API。不过，[高级搜索语法](http://www.spotify.com/se/about/features/advanced-search-syntax/)确实如此。

# python - xaxis 数字未打印在对数刻度图上

> ID：12386718
> 
> 赞同：0
> 
> 时间：2012-09-12T11:02:24.933
> 
> 标签：python, matplotlib

打开“对数”刻度时，x 轴上的数字会消失。

```
import numpy as np
import matplotlib.pyplot as plt

plt.plot( range(1,10) , range(1,10) ,  color='#aaaaff')
plt.xscale('log')
plt.xticks(range(1,10) )
plt.show() 
```

如果我注释掉`xscale`x 轴上的数字，则会打印出来。有人可以阐明为什么这在比例轴上不起作用`log`以及如何实现？

编辑：

简化代码，使其可以在没有数据文件的情况下使用。同样的事情：没有数字！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:07:59.653

默认情况下，对数轴的刻度位置以 10 为底。因此在上述情况下，唯一可能`xtick`的位置是 1。

如果你`xticks`改变

```
plt.xticks([1,10]) 
```

你在`1`和得到刻度`10`。

您还可以使用`ticker`它来做很多事情。例如，

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.ticker import LogLocator

fig = plt.figure(1, [5,4])
ax = fig.add_subplot(111)

ax.plot( range(1,100) , range(1,100) ,  color='#aaaaff')
ax.set_xscale('log')
# This is default, so play with it
ax.xaxis.set_major_locator(LogLocator(base = 10.0))
plt.show() 
```

![在此处输入图像描述](../Images/4307518a77cbca656df1d8f49de036a8.png)

如果您使用：

```
ax.xaxis.set_major_locator(LogLocator(base = 100.0)) 
```

然后你得到

![在此处输入图像描述](../Images/c62a02b8de1fb84a6fff29f00aeb64a2.png)

# jsp - 找不到字节到十六进制数字的格式化程序符号

> ID：12386721
> 
> 赞同：0
> 
> 时间：2012-09-12T11:02:37.003
> 
> 标签：jsp, servlets, md5, jdk1.4

我在 jdk 1.4 而不是 jdk 1.6 中编译应用程序时遇到问题。

```
 String encryptedString = null;
            byte[] bytesToBeEncrypted;
            try {
                // convert string to bytes using a encoding scheme  
                bytesToBeEncrypted = ren_pass.getBytes("UTF-8");
                MessageDigest md = MessageDigest.getInstance("MD5");
                byte[] theDigest = md.digest(bytesToBeEncrypted);
                // convert each byte to a hexadecimal digit  
                Formatter formatter = new Formatter();

                for (int i = 0; i <= theDigest.length; i++) {
                    byte b = theDigest[i];                          
                    //for (byte b : theDigest) {  

     formatter.format("%02x", b); // error on this statement b cannot find symbol                       
                }
                encryptedString = formatter.toString().toLowerCase();
                System.out.print(encryptedString);

            } catch (UnsupportedEncodingException eq) {
                eq.printStackTrace();
            } catch (NoSuchAlgorithmException ew) {
                ew.printStackTrace();
            } 
```

上面的代码在 jdk 1.6 中可以正常工作...但在 jdk 1.4 中不行...

它显示错误符号 b 未找到...

请给我一些解决方案来纠正它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:15:53.593

jdk1.4 没有 java.util.Formatter ，你用 java.util.logging.Formatter 编译代码了吗？

请改用 Character.forDigit(byteValue, 16)

# c++ - 使用基于模板的构造函数构造 std::function

> ID：12386725
> 
> 赞同：5
> 
> 时间：2012-09-12T11:03:04.090
> 
> 标签：c++, templates, c++11, std-function

是否可以`std::function`使用模板参数定义的类型的构造函数来构造 a ？

例如：

```
template <typename T>
bool registerType()
{
    const std::function<T()> func = &T::T; //I know this doesn't work
    //...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T11:07:30.627

我不这么认为，因为构造函数没有名称，你不能对它们进行指针/引用，而且通常它们的行为不像函数。

您可以使用 lambda 来初始化`std::function`具有相同签名的 a：

```
const std::function<T()> func = [](void) { return T(); } // or something like that 
```

`T()`调用它会产生与使用表达式构造临时类型相同的结果`T`，但可能具有不同的副作用。在真正的函数调用的情况下，return 语句中有一个额外的临时变量，名义上它被复制/移动到返回值。实现可能会也可能不会忽略额外的临时性。

# firefox - 将选择从 Firefox 复制到系统剪贴板时是否可以包含背景颜色？

> ID：12386727
> 
> 赞同：0
> 
> 时间：2012-09-12T11:03:07.097
> 
> 标签：firefox, formatting, clipboard

我详尽的网络搜索不建议这样做，就像我在 about:config 中搜索“背景”、“剪贴板”、“颜色”和“复制”一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:58:21.957

如果数据以纯文本 (CF_TEXT) 形式发布到剪贴板，则不会。如果它是像 HTML 或 RTF 这样的丰富格式，那么是的，它应该是可能的。这假设这是一个编程问题，我对此的确定性正在减弱。

# jquery - 延迟对象在被拒绝或解决之前返回？

> ID：12386728
> 
> 赞同：0
> 
> 时间：2012-09-12T11:03:08.437
> 
> 标签：jquery, deferred

我有一个基本上看起来像这样的函数：

```
function defTest()
{
    var dfd = new jQuery.Deferred();
    $.ajax(
    {
        type: "GET",
        url: 'http://XXXX',
        cache: false,
        dataType: "json",
        success: function(data,status)
        {
            console.log('ajax done: success');
            dfd.resolve();
        },
        error: function(data,status)
        {
            console.log('ajax done: fail');
            dfd.reject();

        }
    });
    console.log('about to return dfd');
    return dfd;    
} 
```

我这样称呼它：

```
defTest().then(.....); 
```

控制台日志产生：即将返回 dfd code.js:106 ajax done:success code.js:96

让我感到困惑的是代码似乎有效。仍然在 ajax 完成之前返回 dfd。所以我删除了return dfd。并将它放在每个 ajax 处理函数的最后，以确保在 Ajax 完成之前不会返回它。：

```
success: function(data,status)
{
    console.log('ajax done: success');
    dfd.resolve();
    return dfd;
} 
```

然后它根本不起作用。我很困惑！有人可以向我解释为什么我的 deferred 不能在 ajax 成功和错误处理程序中，以及为什么即使我的 deferred 对象在 Ajax 完成然后被解决或拒绝之前被触发，它似乎也返回了？这怎么可能呢？

编辑：这个问题直接链接到我之前的未回答和更复杂的功能： [延迟对象的问题](https://stackoverflow.com/questions/12365568/problems-with-deferred-object)

这就是为什么我不能只“返回 ajax(...)”，因为我的真实函数包含其他 ajax 调用，这些调用将与返回给调用者的 ONE 结果分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:05:21.717

`$.ajax` returns a Deferred object, so you only need to return it.

`return $.ajax(...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T11:07:00.440

Your call to `defTest` will return as soon as your ajax call is **started**. It will not wait until deferred is resolved or not.

But you are perfectly able to do what you want:

```
defTest().then(function() { console.log("deferred done"); })

```

It will print `deferred done` when deferred is finally resolved.

By the way, as suggested by xdazz, `$.ajax` returns already a Deferred.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T11:07:15.603

there are many questions like this
the `AJAX` request is `async` in nature so in the first example when you were returning it in the last line.
it dosent wait for the `async ajax` to complete
and in the second case the function is already over and putting return in success would obviously not return anything as you are not calling the method assigned to `success` event directly
**UPDATE:- after the comment**
because after returning the `deffered` object you are doing `defTest().then(.....);`
so the function inside the then handler will obviously be fired when the `deffered` object is resolved.
probably you should check the value of the `deffered` object as soon as you return it and not using `.then()` and you will get what mistake you are making here
**Update 2 -**
have a look here [http://jsfiddle.net/BtEKa/](http://jsfiddle.net/BtEKa/) im getting predictable results

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T17:59:21.560

当然，它马上就回来了，这就是重点。通常情况下，一个会返回延迟对象的承诺成员——尽管您可以返回延迟对象并在调用此函数的代码中使用 returnedDeferredObject.promise().then()。

如果您有依赖于 AJAX 完成的处理，则该处理将在返回的 .promise() 的 .then() 函数中进行。美妙之处在于，在进行异步处理时，您可以执行不依赖于 AJAX 返回的其他事情。您可以将返回的 .promise() 传递给其他代码。

```
var mydata = somethingThatReturnsPromise(args);

// do a whole bunch of things

mydata.then(function (returnedReponse) {
    // do stuff with returnedResponse that doesn't require DOM ready
});

$(function () {
    mydata.then(function (returnedResponse) {
        // do DOM stuff with returnedPromise
    });
}); 
```

我希望我没有错过你的观点，但我喜欢将返回的承诺视为我以后可以一次又一次使用的数据源，并且我指定的 .then() 回调只有在返回响应时才会执行.

作为旁注，我很确定随着 jQuery 更接近承诺标准，.done()、.pipe()、.fail() 和 .progress() 应该替换为使用 .then(successCb, failCb , 进展Cb)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T18:41:51.577

我相信您的问题是您要返回整个延迟对象，而不是该对象的承诺。

承诺 afiak 总是在异步调用返回之前返回，所以虽然你的最后一个 console.log 将在返回 PROMISE 之前触发，但它会在 ajax 解决之前发生。

使用 .then() 也可能不是您想要的，因为无论延迟对象的状态如何，它都会触发：http: [//api.jquery.com/deferred.then/](http://api.jquery.com/deferred.then/)

你可能想要 .done()

尝试这个：

```
function defTest()
{
    var dfd = $.Deferred();
    $.getJSON("http://XXXX").done(function(data,success){
      console.log('ajax done: success');
      dfd.resolve(data);
    }).fail( function(data,status) {
      console.log('ajax done: fail');
      dfd.reject();
    });
    console.log('about to return dfds promise');
    return dfd.promise;    
}
defTest().done(function(data){ console.log(data); }); 
```

# perl - 转换 SQL 查询

> ID：12386732
> 
> 赞同：0
> 
> 时间：2012-09-12T11:03:30.323
> 
> 标签：perl, catalyst, dbix-class

我有一个 SQL 查询，它从 sqlplus 获取数据更正。当我尝试转换查询以便可以在催化剂控制器中实现时，我收到一条错误消息，指出表 Feature 和 Featurealias 之间没有关系。由于我是 Catalyst 和 DBIx::Class 的新手，所以我不是能够弄清楚可能是什么错误。任何机构都可以帮我解决这个问题。下面是我试图在催化剂控制器中实现的 SQL 查询和代码。

```
my@sourceid=$c->model('Gene::Featurealias')->search({
                        'feature.typeid'=>4,
        },
        {
                        join=>'feature',
                        distinct=>1,
                        columns=>[qw/sourceid/]

        }); 
```

SQL查询：

```
select distinct FeatureAlias.SourceID From FeatureAlias join Feature on FeatureAlias.FeatureID=Feature.FeatureID where Feature.TypeID=4; 
```

在 Feature.pm 中定义

```
__PACKAGE__->has_many( "featurealias",
  "...Result::Featurealias"); 
```

在 Featurealias.pm 中定义

```
__PACKAGE__->belongs_to("featureid",
  "...::Result::Feature"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:32:18.087

您在 Featurealias 类中创建了一个名为“featureid”的关系，但要求 DBIC 加入一个名为“feature”的关系。

# hibernate - 具有复合键的休眠 JPA 父子冲突

> ID：12386734
> 
> 赞同：2
> 
> 时间：2012-09-12T11:03:41.697
> 
> 标签：hibernate, jpa

我在创建父对象和子对象并使用 JPA 和休眠将它们一次性保存到数据库时遇到问题。父类如下所示：

```
@Entity
@Table(name = "PUser")
public final class User {

    @Id
    @Column(name = "ID", unique = true, nullable = false, updatable = false)
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

} 
```

子对象使用复合键，其中一个字段是父对象的 ID：

```
@Entity
@Table(name = "PAttribute")
public final class Attribute {

   @EmbeddedId
    @AttributeOverrides({
                    @AttributeOverride(name = "domain", column = @Column(name = "domain", nullable = false, length = 128)),
                    @AttributeOverride(name = "name", column = @Column(name = "name", nullable = false, length = 128)),
                    @AttributeOverride(name = "userid", column = @Column(name = "userid", nullable = false)) })
    private AttributePk pk;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "userid", nullable = false, insertable = false, updatable = false)
    private User user;

} 
```

复合键类是：

```
 @Embeddable
    public class AttributePk implements java.io.Serializable {

            private static final long serialVersionUID = -7003721226789641149L;

            @Column(nullable = false, length = 128)
            private String domain;

            @Column(nullable = false, length = 128)
            private String name;

            @Column(nullable = false)
            private long userid;

    } 
```

现在当我创建一个新用户并添加一个附件，然后尝试保存对象图

```
 User user = new User("joe1.bloggs@ft.com", "xyz");
    user.setScreenName("joe1bloggs");
    user.addAttribute("domain", "name", 212);

    target.saveAndFlush(user); 
```

我得到了例外

```
 Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`fta_portal_user/PAttribute`, CONSTRAINT `userId` FOREIGN KEY (`userid`) REFERENCES `PUser` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) 
```

显然 Attribute 子对象没有设置用户对象的 ID。

我知道我可以执行以下操作，但很奇怪，我不能只创建一个对象层次结构，而 Hibernate 会计算出如何相应地设置 ID。我怀疑没有办法解决这个问题，因为 saveAndFlush() 返回一个新实例，而不仅仅是更新输入参数版本。

```
 User user = new User("joe1.bloggs@ft.com", "xyz");
    user.setScreenName("joe1bloggs");

    // target is an JpaRepository intergafe
    user = target.saveAndFlush(user);

    user.addAttribute("domain", "name", 212);

    target.saveAndFlush(user); 
```

任何人都有任何想法，或者这只是一个与之共存的案例？

谢谢

缺口

**编辑：您可以通过将 @MapsId 注释添加到子类来使其工作（感谢 axtavt 的回复）。IE**

```
 @MapsId("userId")
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "userId", nullable = false, insertable = false, updatable = false)
    private User user; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:54:51.873

您是否尝试将其映射如下：

```
@ManyToOne(fetch = FetchType.LAZY)     
@MapsId("userid")
private User user; 
```

据我了解，在这种情况下`userid`，字段`AttributePk`应该自动填充 id `user`。

# asp.net - 不使用 FileUpload Control 将文件上传到 ASP.Net 服务器

> ID：12386737
> 
> 赞同：0
> 
> 时间：2012-09-12T11:03:48.930
> 
> 标签：asp.net, web, file-handling, savefiledialog

在我的 ASP.Net 网站中，我想上传一个文件 onClickEvent 的 LinkBut​​ton。我没有空间来显示 FileUpload 控件。但是如果我们使用 fileUpload 控件，很容易使用以下方法上传文件：

```
String filename = Path.GetFileName(FileUpload1.FileName);
FileUpload1.SaveAs(Server.MapPath("~/files/") + filename); 
```

如何在 LinkBut​​ton 的 onClick 事件上打开文件浏览器并将我的文件保存在服务器上的**Files 文件**夹中？

**编辑：**
我们可以使用 Windows.Forms 中的“OpenFileDialog”吗？如果是，如何？我只是问...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:48:54.267

您可以按照 Neil Thompson 的建议使用 javascript。**[但是，我对这个问题的首选解决方案是这篇文章](https://stackoverflow.com/questions/4532733/styling-input-type-file)**中描述的 CSS 方法。如果您愿意，您也可以使用 ASP 上传控件，它会以相同的方式隐藏，让您可以像往常一样在后面的代码中处理文件。

此外，据我所知，这适用于所有流行的浏览器。

# css - margin-top: auto 和 margin-bottom: auto 等于 0 保证金的原因是什么？

> ID：12386739
> 
> 赞同：2
> 
> 时间：2012-09-12T11:03:55.023
> 
> 标签：css, margin, vertical-alignment, w3c

由于元素`margin-right: auto`水平`margin-left: auto`居中，我希望它们的垂直对应物以相同的方式表现。

然而，根据 CSS 规范，我知道这不会发生：

> ### 10.6.2 内联替换元素、正常流程中的块级替换元素、正常流程中的“内联块”替换元素和浮动替换元素
> 
> 如果 'margin-top' 或 'margin-bottom' 为 'auto'，则它们的使用值为 0。

也适用于块元素：

> ### 10.6.3 当“溢出”计算为“可见”时，正常流中的块级非替换元素
> 
> 当“溢出”不计算为“可见”但已传播到视口时，本节也适用于正常流中的块级非替换元素。
> 
> 如果 'margin-top' 或 'margin-bottom' 为 'auto'，则它们的使用值为 0。

现在我想知道的是，这个决定/行为背后的基本原理。

我正在寻找的是理解和信念。我不认为一个模糊的解释会做到这一点，但任何贡献都是受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T00:26:13.237

如上所述：

> 啊哈......这不是那么模糊！我可以看到它很有用。感谢您在 jsfiddle 上提供的示例。
> 
> 因此，如果一个元素相对于父元素绝对定位，同时使用`top`and `bottom`，但它的`height`定义小于父元素的高度减去`top`和`bottom`偏移量，那么该`margin`属性将用于确定它的垂直对齐方式与父级的关系，`margin:auto`并将导致垂直居中的元素。
> 
> 的确，这听起来很复杂，但在[jsfiddle](http://jsfiddle.net/aVbyK/)上很清楚。

例如，这个 CSS：

```
.inner { 
  position:absolute; 
  top:0; bottom: 20px; left:0; right:0px;
  padding:0; border:0;
  margin:auto;
  height:20px; width:50px;
} 
```

这个HTML：

```
<div 类=外部>
    <div class=inner>文本</div>
</div>    

```

# ios - iOS - genstrings: couldn't connect to output directory en.lproj

> ID：12386746
> 
> 赞同：10
> 
> 时间：2012-09-12T11:04:32.277
> 
> 标签：ios, localization, terminal, genstrings

I searched for this error online and here. Online it shows me results in a different language then english nice Google. Here it has one post and a guy that never really answered the guys question.

I have my xcode project folder on my desktop. Inside the project folder I have an en.lproj folder that has both iPad and iPhone storyboards inside along with a localization.plist file. However when I launch the project in Xcode this en.lproj folder is nowhere to be found. So this might be the problem?

With the project folder on my desktop I launch terminal type in: cd

then drag my project folder into Terminal and it gives me the path. I then paste this line of code into the Terminal

find . -name *.m | xargs genstrings -o en.lproj

I get this error message in the Terminal:

genstrings: couldn't connect to output directory en.lproj

it prints this line multiple times and then says my project is a path to a directory?

No .strings file is made. Any thoughts on what I am doing wrong? I got UILabels that I dragged and dropped from inside Storyboards, but I also I strings that are coded with

NSLocalizedString(@"First Level Passed", @"This is a message displayed on screen to allow the user to know they have passed the first level!");

So the above Terminal code snippet should be finding those NSLocalizedStrings right? I think it isn't even getting to find the en.lproj folder in the first place but I don't know?

Any help would be great.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T13:25:27.407

迟到总比不好，

您正在文件夹 projectroot/en.lproj 中创建一个文件 (localizable.strings)。如果此文件夹不存在，您会收到此错误消息。只需在根目录中创建文件夹 en.lproj，该命令就可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-06-29T08:14:46.627

我得到了同样的错误，同时按照教程执行以下命令。

```
genstrings -o en.lproj *.swift 
```

上面的命令给了我以下错误：

> genstrings：无法连接到输出目录 en.lproj

**我的问题：**

*   我尝试在我自己的目录（即根项目目录的子目录）上实现上述命令，其中所有“.lproj”目录都在那里。- 这给了我以上错误。
*   然后我在子文件夹“Localization”中删除了旧的“Localizable.strings”。并在根目录中创建了新的“Localizable.strings”。- 这里我没有错误，但按照“genstrings”命令没有发生任何事情。

**解决方案：**

在命令行移动到项目的根目录，您可以获得所有“.lproj”目录。

添加文件路径，其中列出了所有“NSLocalizedString（“TEXT”，评论：“COMMENT”）” - 在我的情况下，我已经列出了“Constants.swift”文件中的所有内容。

所以，我已经执行了以下命令，它的工作就像魅力一样。

```
 genstrings -o en.lproj/ #ProjectPath#/Constants/Constants.swift 
```

注意：只需将文件从 Xcode 拖放到终端即可轻松获取文件路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-15T08:53:13.780

解决方案是手动**创建文件夹 en.lproj**，然后运行 ​​genstring 命令

```
cd {project folder}
mkdir Localization
cd Localization
mkdir en.lproj
genstrings -o en.lproj/ ../*.swift 
```

为法语等的每种语言重复（即：fr.lproj）。

# android - Extending Fragments with listactivity

> ID：12386748
> 
> 赞同：4
> 
> 时间：2012-09-12T11:04:34.527
> 
> 标签：android, android-fragments, listactivity

I am working with fragments in android,am extending android.app.ListFragment to display listview, but it takes only one item in a list view. I want to display 2 items in a list view ,its possible with extending ListActivity class, but i want to extend both fragment and listactivty.
[Refer this image](http://i.stack.imgur.com/udyo4.jpg)

```
public class ListFragmentnewforel extends android.app.ListFragment {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

  }

  @Override
  public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    ArrayList<HashMap<String, String>> list = buildData();
    String[] from = {  "purpose" , "name","desc", "num"};
    int[] to = { R.id.detailsText1, R.id.detailsText2, R.id.detailsText3,  };

    SimpleAdapter adapter = new SimpleAdapter(this, list,R.layout.mylistview,from,to);
    setListAdapter(adapter);
  }

  public void onListItemClick(ListView l, View v, int position, long id) {
      ArrayList<String>arr=new ArrayList<String>();
    String item = (String) getListAdapter().getItem(position);
    DetailFragment fragment = (DetailFragment) getFragmentManager()
        .findFragmentById(R.id.detailFragment);
 if (getResources().getConfiguration().orientation == 
            Configuration.ORIENTATION_LANDSCAPE) {
        fragment.setText(item);
    }
    else {
      Intent intent = new Intent(getActivity().getApplicationContext(),
          DetailActivity.class);
      Xmlparsingactiforele d=new Xmlparsingactiforele();
      arr=d.myelarraylist(item);
     // arr.get(0);
     intent.putExtra("value1", arr.get(0));
     intent.putExtra("value2", arr.get(1));
     intent.putExtra("value3", arr.get(2));
     intent.putExtra("value4", arr.get(3));
      startActivity(intent);

    }

  }
  private ArrayList<HashMap<String, String>> buildData() {
        ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
        list.add(putData("Android", "Mobile","two", "1"));
        list.add(putData("Windows7", "Windows7","one", "2"));
        list.add(putData("iPhone", "iPhone","three", "3"));
        return list;
      }

      private HashMap<String, String> putData(String name, String purpose,String a, String n) {
        HashMap<String, String> item = new HashMap<String, String>();
        item.put("name", name);
        item.put("purpose", purpose);
        item.put("desc", a);
        item.put("num", n);

        return item;
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:21:08.450

没有什么能阻止你在项目中展示你想要的任何东西`ListView`。请阅读 API 文档[`ListFragment`](http://developer.android.com/reference/android/app/ListFragment.html)。

您可以创建一个在其方法`ListAdapter`中返回所需类型的 。在这方面，和之间几乎没有任何区别。`View``getView``ListActivity``ListFragment`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:08:29.633

不可能将片段和活动类扩展到单个类。因此，将 Activity 扩展到主类并创建内部类并将 Fragment 类扩展到其中。

# javascript - Joomla still load CSS and Javascript from old domain when I change it

> ID：12386755
> 
> 赞同：0
> 
> 时间：2012-09-12T11:05:20.697
> 
> 标签：javascript, css, joomla, joomla2.5, base-url

I have a Joomla 2.5 project hosted on a domain mywebsite.com and all was working fine. But when I want to work on it in my local machine, Joomla keeps loading CSS and Javascript from mywebsite.com. I tried to clear the cache and make a global research on the project for something hard coded, but I haven't found the solution. This how I include Javascript:

```
$document->addScript('media/system/js/jquery.min.js'); 
```

Could someone tell me what is wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:08:23.060

Have you checked your config file and made sure your base path hasn't been hardcoded anywhere?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:20:16.897

Ryan 建议您查看 configuration.php，这是一个很好的建议。

# android - Give ALIGNMENT to the fields in relative layout at Runtime in android?

> ID：12386757
> 
> 赞同：0
> 
> 时间：2012-09-12T11:05:26.893
> 
> 标签：android, alignment

I am working to create fields at run time, like in a relative layout am adding one text field at right corner and one Check-box at the left corner. For this am getting problem, currently i am using the following code:

```
ViewGroup hori_layout=new RelativeLayout(getParent());
            hori_layout.setLayoutParams(new   ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT));

            TextView tv1=new TextView(getParent());
            tv1.setText(_medContactNames[i]);
            tv1.setTextColor(Color.BLACK);
            CheckBox cb = new CheckBox(getApplicationContext());

            hori_layout.addView(tv1);
            hori_layout.addView(cb);

            layout.addView(hori_layout); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:31:48.940

*

```
/**
     * GENERATING RELATIVE LAYOUT AT RUNTIME
     * */
    public class RL extends RelativeLayout {
        public RL(Context context,int i,String flag) {
            super(context);
            //FIRST FIELD OF THE LAYOUT
            TextView firstField = new TextView(context);
            firstField.setTextColor(Color.BLACK);
            if(flag.equalsIgnoreCase("LAW")){
                firstField.setText(_lawContactNames[i]);
            }else{
                firstField.setText(_medContactNames[i]);
            }
            firstField.setId(1);
            //SECOND FIELD OF THE LAYOUT
            CheckBox secondField = new CheckBox(context);
            secondField.setId(2);
            //FIRST LAYOUT WHICH MUST BE PRESENT AT LEFT END == TEXT FIELD
            RelativeLayout.LayoutParams lpSecond = new RelativeLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            addView(firstField, lpSecond);
            //SECOND LAYOUT AT RIGHT END == CHECK BOX
            RelativeLayout.LayoutParams lpFirst = new RelativeLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            lpFirst.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, secondField.getId());
            addView(secondField, lpFirst);
        }
    } 
```

*

# android - 通过 Android App 将数据发布到 URL

> ID：12386758
> 
> 赞同：2
> 
> 时间：2012-09-12T11:05:32.263
> 
> 标签：android, eclipse, url, post

我正在尝试使用 Android 应用程序将数据发布到 URL。

[网址](http://comparch2011.appspot.com/)：

参数：“名称”和“消息”

我使用以下代码，但它不起作用：

```
public void onClick(View v) {
    // Create a new HttpClient and Post Header

            // Create a new HttpClient and Post Header
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://comparch2011.appspot.com/");

            try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("name", "DEV"));
                nameValuePairs.add(new BasicNameValuePair("message", "AndDev is Cool!"));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:25:33.947

-第一件事：你应该使用[adb logcat](http://developer.android.com/tools/help/logcat.html)。它将在您的计算机上为您提供手机的实时日志，了解正在发生的事情非常有用。

-我怀疑您是在 Activity 中进行这些调用，在这种情况下，应用程序只是因此而崩溃：它们是防止您这样做的保障措施。必要时会引发错误“主线程上的网络”（如此处）。问题是活动在主线程上运行，主线程也用于 UI。所以当你进行这样的网络调用时，所有的 UI 都会被阻塞，直到函数返回（因为它正在等待网站响应，它可能需要几秒钟，这对你的应用程序的可用性非常不利）。

解决方案是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。这是一个易于使用的类，它允许您进行异步调用（即不阻塞 UI 的调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:30:34.257

正如您在 LogCat 中看到的，错误是 NetworkOnMainThreadException。

哪个Android在这里[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)声明为：

## 网络主线程异常：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常
> 不鼓励这样做。

因此，请查看[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)，并注意不应在 UI 线程上调用 getResponse。

或者，您可能只更改目标或更改严格策略，如下所示，但我不建议这样做......

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:55:35.967

您不应该在主线程上执行网络活动。因为它不允许用户在执行网络操作时响应视图。

使用 Asynctask，它会工作。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

尼廷

# c# - 细粒度的 CRUD 与 Subsonic 的 SimpleRepository

> ID：12386761
> 
> 赞同：0
> 
> 时间：2012-09-12T11:05:39.140
> 
> 标签：c#, .net, subsonic, simplerepository

假设我的 C# 应用程序中有一个带有属性**A**和属性**B的****TestClass**。我通过我的代码更改了**B**的值，我保持属性**A**不变。我通过 SimpleRepository 的 Update 方法更新数据库中的 TestClass。

 ******正如我所看到的，它还更新了数据库中的属性**A**值。

这很容易测试：我在我的应用程序外部（“手动”）更改我的数据库中的值**A**，然后我从我的应用程序进行更新。属性**A**的值根据我的应用程序中的 TestClass 状态更改回其值。

所以，我的问题是：是否可以只更新某些属性，而不是 SimpleRepository 的整个类？是否有一些“IgnoreFields”的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:19:04.470

您需要的是`optimistic concurrency`在您的`UPDATE`声明中，而不是排除某些字段。简而言之，这意味着在更新表时，`WHERE`会在语句中附加一个子句，以`UPDATE`确保行中字段的值实际上是上次`SELECT`运行时的值。

因此，让我们假设在您的示例中，我分别选择了一些数据`A`和值。现在假设我想更新（下面的语句只是一个例子）：`B``1``2``B`

```
UPDATE TestClass SET B = '3' WHERE Id = 1; 
```

但是，不要运行该语句（因为那里没有并发），让我们运行这个：

```
UPDATE TestClass SET B = '3' WHERE Id = 1 AND A = '1' AND B = '2'; 
```

该声明现在确保记录没有被任何人更改。

然而，目前看来 Subsonic 的 SimpleRepository 不支持任何类型的并发，所以这将是一个重大的失败。如果您正在寻找一个非常直接的存储库库，您可以在其中使用 POCO，我会推荐 Dapper。实际上，Stackoverflow 使用了 Dapper。它**非常**快，并且很容易让您在更新语句中构建并发，因为您发送参数化的 SQL 语句很简单。

1.  这篇[Stackoverflow 文章](https://stackoverflow.com/tags/dapper/info)是一篇关于如何将 Dapper 用于所有 CRUD 操作的整体文章。
2.  这篇[Stackoverflow 文章](https://stackoverflow.com/questions/5957774/performing-inserts-and-updates-with-dapper)展示了如何使用 Dapper 执行插入和更新。

**注意：**使用 Dapper，您实际上也可以做您想做的事情，因为您发送基本的 SQL 语句，但我不建议您不使用并发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T11:20:04.407

这种情况不要在DataObject上调用update方法，你基本上是在表明对象已经改变，需要在DB中更新。所以亚音速会生成一个查询

```
UPDATE TestClass SET A ='', B='', ModifiedOn = 'DateHere' WHERE PrimaryKey = ID 
```

要仅更改属性 B，您需要手动构造 UPDATE 查询。看看`Subsonic.Update`课堂。
理想情况下，您不应该手动形成数据对象的新实例，如果这样做，请确保从`Subsonic.Select`查询返回的对象中复制值。
因此，即使您只更新一个属性的值，所有其他属性都将保存自己的 DB 值，而不是默认值，具体取决于属性的类型。******

# magento - 如何将自定义选项插入 Magento 主题产品视图模板？

> ID：12386764
> 
> 赞同：0
> 
> 时间：2012-09-12T11:05:42.577
> 
> 标签：magento, view, themes, option

我为一家珠宝店创建了一个自定义 Magento 主题，并为作为示例产品添加的戒指创建了一个自定义选项，用于戒指尺寸（一个 SELECT 字段）。

如何在我的产品 view.phtml 模板文件中的“添加到购物车”按钮上方插入该自定义选项*？*

这是页面：[http ://s1.mynewsitereview.com/fire-opal-ring.html](http://s1.mynewsitereview.com/fire-opal-ring.html)

这是我的 view.phtml 代码：

```
<?php $_helper = $this->helper('catalog/output'); ?>
<?php $_product = $this->getProduct(); ?>
<script type="text/javascript">
    var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig() ?>);
</script>
<div id="messages_product_view"><?php echo $this->getMessagesBlock()->getGroupedHtml() ?></div>

<div class="product-view">
    <div class="product-essential">
    <form action="<?php echo $this->getSubmitUrl($_product) ?>" method="post" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?>>
        <div class="no-display">
            <input type="hidden" name="product" value="<?php echo $_product->getId() ?>" />
            <input type="hidden" name="related_product" id="related-products-field" value="" />
        </div>

        <div class="product-img-box">
            <?php echo $this->getChildHtml('media') ?>
        </div>      

        <div class="product-shop">
            <h1><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></h1>

            <?php if ($_product->getShortDescription()):?>
                    <p><?php echo $_helper->productAttribute($_product, nl2br($_product->getShortDescription()), 'short_description') ?></p>
            <?php endif;?>      

            <?php echo $this->getTierPriceHtml() ?> 

            <?php echo $this->getChildHtml('alert_urls') ?>
            <?php echo $this->getChildHtml('product_type_data') ?>
            <?php echo $this->getChildHtml('extrahint') ?>

            <p class="email-friend">
            <?php if ($this->canEmailToFriend()): ?>
                <a href="<?php echo $this->helper('catalog/product')->getEmailToFriendUrl($_product) ?>"><?php echo $this->__('Email to a Friend') ?></a><br>
            <?php endif; ?>

            <?php echo $this->getReviewsSummaryHtml($_product, false, true)?>
            </p>

                <div class="add-to-box">
                    <?php if($_product->isSaleable()): ?>
                        <?php echo $this->getChildHtml('addtocart') ?>
                        <div><?php if( $this->helper('wishlist')->isAllow() || $_compareUrl=$this->helper('catalog/product_compare')->getAddUrl($_product)): ?>
                        <?php endif; ?>
                    <?php endif; ?>             
                    <?php echo $this->getChildHtml('addto') ?>
                </div>

        </div>

    </form>
    <script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                // Remove custom datetime validators
                for (var methodName in Validation.methods) {
                    if (methodName.match(/^validate-datetime-.*/i)) {
                        delete Validation.methods[methodName];
                    }
                }

                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script>
    </div>

    <div class="product-collateral">
            <?php echo $this->getChildHtml('other');?>
            <?php if ($_product->isSaleable() && $this->hasOptions()):?>
                <?php echo $this->getChildChildHtml('container1', '', true, true) ?>
            <?php endif;?>
    </div>
</div> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:01:04.697

添加此代码

`<?php if ($_product->isSaleable() && $this->hasOptions()):?> <?php echo $this->getChildChildHtml('container2', '', true, true) ?> <?php endif;?>`

在您的 view.phtml 文件中

`<?php echo $this->getChildHtml('addtocart') ?>`

# android - 服务中的Android Jsoup - 获取span的文本

> ID：12386767
> 
> 赞同：1
> 
> 时间：2012-09-12T11:06:15.150
> 
> 标签：android, hyperlink, jsoup, title, html

我对 jsoup 很陌生。几天来，我现在试图从一个跨度中读出一个简单的数字，但没有任何成功。

我希望能在这里找到帮助。我的html：

```
<div class="navi">
<div class="tab mail">
<a href="/comm.php/indexNew/" accesskey="8" title="Messages">
<span class="tabCount">1 </span>
<img src="/b2/message.png" alt="Messages" class="moIcon i24" />
</a>
</div> 
```

尽管在整个文档中，tabCount 类存在 3 次，但我对这个类的第一个跨度感兴趣。现在我正在尝试在服务的 onCreate() 中创建一个线程：

```
Thread downloadThread = new Thread() {                     
            public void run() {                                    
                Document doc;                                      
            try {                                              
                doc = Jsoup.connect("https://www.bla.com").get();

                    String count = doc.select("div.navi").select("div.tab.mail").select("a[href]").first().select("tabCount").text();

                Log.d("SOMETHING", "test"+(count));

            } catch (IOException e) {                          
                e.printStackTrace();                           
            }                                                  
        }                                                      
    };                                                         
    downloadThread.start(); 
```

这迫使我的应用程序崩溃。如果我将 text() 更改为 ownText()，也是如此。如果我删除 text() 那么应用程序可以启动，但它给了我 null。

我究竟做错了什么？顺便说一句，除了服务之外，webview 正在加载相同的 url。这可能是个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:24:22.513

您只需要选择您感兴趣的元素，您不需要之前获取每个外部元素。在您的示例中，您可以尝试

```
String count = doc.select("span.tabCount").text(); 
```

在哪里定义元素“span”的类型和类名“.tabcount”

有关可能对您有所帮助的示例，请查看[此](https://stackoverflow.com/questions/9728854/jsoup-to-get-text-from-span-class)链接

**编辑：**

试试这个代码，这将得到第一个跨度的值。

```
Elements elements = doc.select("span.tabCount");
String count = elements.first().text(); 
```

如果你想打印所有元素，你可以这样做。

```
Elements elements = doc.select("span.tabCount");
for (Element e : elements) {
  Log.d("Something", e.text();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T11:16:59.760

你不是说`.select(".tabCount")`吗？

顺便说一句，在 Android 上，`AsyncTask`s 比`Thread`s 更方便。此外，空的 catch 块是一种不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:19:58.500

您的选择语句是错误的。您可以将整个选择字符串插入一行。此外，您必须在“tabCount”前面加上一个点，因为它是一个类。

```
String count = doc.select("div.navi div.tab.mail a").first().select(".tabCount").text(); 
```

# objective-c - 处理 iOS 崩溃报告 - EXC_CRASH (SIGSEGV)

> ID：12386769
> 
> 赞同：0
> 
> 时间：2012-09-12T11:06:25.567
> 
> 标签：objective-c, memory-management, cllocationmanager, crash-reports, symbolicatecrash

我的应用程序遇到问题，如果我让它运行 24 小时，返回它后，它会崩溃。它是一个基于位置的应用程序，应该在后台无限时间工作。如您所见，崩溃发生在某个“本机”线程中。是否暗示一些错误的内存访问？

崩溃报告是：

```
Incident Identifier: 37244DF8-8792-4686-9FB4-867559F8B520
CrashReporter Key:   07002531b592d4c6d047876998efef8745326d1e
Hardware Model:      iPhone3,1
Process:         Freight Alerts [2659]
Path:            /var/mobile/Applications/1AF70899-D23F-43E4-9398-4F206CD01325/Freight Alerts.app/Freight Alerts
Identifier:      Freight Alerts
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-09-12 10:29:08.076 +0100
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGSEGV)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  1

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x31301848 0x312f1000 + 67656
1   Freight Alerts                  0x0000c7f8 0x1000 + 47096
2   libsystem_c.dylib               0x33a097e6 0x339b2000 + 358374
3   UIKit                           0x30f78f0e 0x30e1c000 + 1429262
4   UIKit                           0x31171ac2 0x30e1c000 + 3496642
5   Foundation                      0x379bc92c 0x37921000 + 637228
6   CoreFoundation                  0x3711fa2c 0x37092000 + 580140
7   CoreFoundation                  0x3711f692 0x37092000 + 579218
8   CoreFoundation                  0x3711e268 0x37092000 + 574056
9   CoreFoundation                  0x370a149e 0x37092000 + 62622
10  CoreFoundation                  0x370a1366 0x37092000 + 62310
11  GraphicsServices                0x33860432 0x3385c000 + 17458
12  UIKit                           0x30e4dcce 0x30e1c000 + 203982
13  Freight Alerts                  -[SBJsonWriter appendString:into:] (in Freight Alerts) (SBJsonWriter.m:184)
14  Freight Alerts                  -[SBJsonWriter appendDictionary:into:] (in Freight Alerts) (SBJsonWriter.m:175)

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1 Crashed:
0   libsystem_kernel.dylib          0x312f23a8 0x312f1000 + 5032
1   libdispatch.dylib               0x30277ea4 0x3026b000 + 52900
2   libdispatch.dylib               0x30277bc2 0x3026b000 + 52162

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x312f2004 0x312f1000 + 4100
1   libsystem_kernel.dylib          0x312f21fa 0x312f1000 + 4602
2   CoreFoundation                  0x3711f3ec 0x37092000 + 578540
3   CoreFoundation                  0x3711e124 0x37092000 + 573732
4   CoreFoundation                  0x370a149e 0x37092000 + 62622
5   CoreFoundation                  0x370a1366 0x37092000 + 62310
6   WebCore                         0x32a4ac9c 0x329a1000 + 695452
7   libsystem_c.dylib               0x339c072e 0x339b2000 + 59182
8   libsystem_c.dylib               0x339c05e8 0x339b2000 + 58856

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x312f2004 0x312f1000 + 4100
1   libsystem_kernel.dylib          0x312f21fa 0x312f1000 + 4602
2   CoreFoundation                  0x3711f3ec 0x37092000 + 578540
3   CoreFoundation                  0x3711e124 0x37092000 + 573732
4   CoreFoundation                  0x370a149e 0x37092000 + 62622
5   CoreFoundation                  0x370a1366 0x37092000 + 62310
6   Foundation                      0x37931bb2 0x37921000 + 68530
7   Foundation                      0x37931a7a 0x37921000 + 68218
8   Foundation                      0x379c558a 0x37921000 + 673162
9   libsystem_c.dylib               0x339c072e 0x339b2000 + 59182
10  libsystem_c.dylib               0x339c05e8 0x339b2000 + 58856

Thread 4 name:  WebCore: CFNetwork Loader
Thread 4:
0   libsystem_kernel.dylib          0x312f2004 0x312f1000 + 4100
1   libsystem_kernel.dylib          0x312f21fa 0x312f1000 + 4602
2   CoreFoundation                  0x3711f3ec 0x37092000 + 578540
3   CoreFoundation                  0x3711e124 0x37092000 + 573732
4   CoreFoundation                  0x370a149e 0x37092000 + 62622
5   CoreFoundation                  0x370a1366 0x37092000 + 62310
6   WebCore                         0x32a740d2 0x329a1000 + 864466
7   libsystem_c.dylib               0x339c072e 0x339b2000 + 59182
8   libsystem_c.dylib               0x339c05e8 0x339b2000 + 58856

Thread 5 name:  com.apple.CFSocket.private
Thread 5:
0   libsystem_kernel.dylib          0x31302570 0x312f1000 + 71024
1   CoreFoundation                  0x3712363a 0x37092000 + 595514
2   libsystem_c.dylib               0x339c072e 0x339b2000 + 59182
3   libsystem_c.dylib               0x339c05e8 0x339b2000 + 58856

Thread 6:
0   libsystem_kernel.dylib          0x31302cd4 0x312f1000 + 72916
1   libsystem_c.dylib               0x339baf36 0x339b2000 + 36662
2   libsystem_c.dylib               0x339bacc8 0x339b2000 + 36040

Thread 1 crashed with ARM Thread State:
    r0: 0x00000004    r1: 0x00000000      r2: 0x00000000      r3: 0x2fe80630
    r4: 0x00000001    r5: 0x2fe8074c      r6: 0x2fe8074c      r7: 0x2fe8076c
    r8: 0x00000000    r9: 0x00000000     r10: 0x3e0b8060     r11: 0x00000000
    ip: 0x0000016b    sp: 0x2fe8061c      lr: 0x30277eab      pc: 0x312f23a8
  cpsr: 0x60000010

Binary Images:
    0x1000 -    0x1afff +Freight Alerts armv7  <6238e95d195a3818980dfcffdcbf9692> /var/mobile/Applications/1AF70899-D23F-43E4-9398-4F206CD01325/Freight Alerts.app/Freight Alerts
0x2fedf000 - 0x2ff00fff  dyld armv7  <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld
0x30073000 - 0x300bffff  CoreTelephony armv7  <b8f80d5d594c31d2b5d8fba9fdedb7e1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x3026b000 - 0x30281fff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x30282000 - 0x30298fff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x30299000 - 0x3029dfff  FTClientServices armv7  <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x302aa000 - 0x302b3fff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x30376000 - 0x30455fff  RawCamera armv7  <293f818ba6533dceae8b900b6ed3c887> /System/Library/CoreServices/RawCamera.bundle/RawCamera
0x30456000 - 0x30494fff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x30495000 - 0x3049bfff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x304c2000 - 0x304d9fff  WebBookmarks armv7  <696bb0630b19388da0d72e685bcf6e28> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x3050f000 - 0x3050ffff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x30532000 - 0x30538fff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x3055d000 - 0x3055efff  libsystem_sandbox.dylib armv7  <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x30711000 - 0x30715fff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x30716000 - 0x30756fff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x307c6000 - 0x30b35fff  TextInput armv7  <8d7f24642c7634cc8e3a6e65f1dcd98e> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x30d3c000 - 0x30d5ffff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x30d68000 - 0x30d7efff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x30db3000 - 0x30db4fff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x30db5000 - 0x30dcbfff  EAP8021X armv7  <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x30dce000 - 0x30dd1fff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x30ded000 - 0x30deefff  CoreSurface armv7  <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x30df8000 - 0x30e1bfff  MobileSync armv7  <e42604c550283f4aa517ae8f108b340f> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x30e1c000 - 0x312befff  UIKit armv7  <cd513a2f22f53d698c3e10f6fe48a63e> /System/Library/Frameworks/UIKit.framework/UIKit
0x312f1000 - 0x31307fff  libsystem_kernel.dylib armv7  <311f379a9fde305d80c1b22b7dd2e52a> /usr/lib/system/libsystem_kernel.dylib
0x31308000 - 0x3132cfff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x313b2000 - 0x313edfff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x313ee000 - 0x3141efff  ContentIndex armv7  <7a64670bb2ff3ee39ddee1dc1c72f92d> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x3141f000 - 0x31477fff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x31478000 - 0x3147cfff  Marco armv7  <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x31494000 - 0x314ddfff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x314e1000 - 0x314f9fff  Notes armv7  <724966ed5cd4395cb70f9c996b123f53> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x314fc000 - 0x31506fff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x31507000 - 0x3152cfff  OpenCL armv7  <f4b08361179a3f6bb033415b0d7c6251> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x31532000 - 0x31537fff  ApplePushService armv7  <f424c0340de637c08bbeb4f3bd8c6eaf> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x31538000 - 0x31539fff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x3153a000 - 0x315aafff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x315ab000 - 0x315f4fff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x315f5000 - 0x315f9fff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x316e1000 - 0x316edfff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x316ee000 - 0x3176dfff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x3187b000 - 0x3187ffff  CertUI armv7  <f503892ef60e36108d28d8f9d6144d2a> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x31880000 - 0x318bffff  QuickLook armv7  <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x3193d000 - 0x31943fff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x31944000 - 0x31995fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x31996000 - 0x3199afff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x319e9000 - 0x319f8fff  MobileDeviceLink armv7  <70ac33720f513f0f97ea2279260678ca> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x319f9000 - 0x31a08fff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x31a32000 - 0x31a38fff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x3227a000 - 0x3227ffff  CrashReporterSupport armv7  <dc11c5c2cbe73a6288a6094ebf5de673> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x3244d000 - 0x3244dfff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x327e8000 - 0x327e9fff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x32874000 - 0x32883fff  SpringBoardServices armv7  <a2363f8ed49932dba415d2d4cd32fb74> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x3293f000 - 0x32976fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x3297b000 - 0x3298efff  DataDetectorsCore armv7  <3f4596cbe1b13fdcb427d87de21df3f6> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore
0x3299a000 - 0x3299dfff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x329a1000 - 0x33160fff  WebCore armv7  <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x33163000 - 0x331adfff  ManagedConfiguration armv7  <f1fbb825def23043830a095b953a9c94> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x331ae000 - 0x331c3fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x33279000 - 0x33298fff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x33299000 - 0x3329cfff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x3329d000 - 0x332a0fff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x332b4000 - 0x33311fff  StoreServices armv7  <6ce256d3cf433e4aa1af8d696bf1f75d> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x335ac000 - 0x33684fff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x336f6000 - 0x33733fff  FTServices armv7  <3f23418319a03a589dd5cac7df20e238> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x33819000 - 0x3384dfff  MIME armv7  <d30292ea8f7e360fa5f5d5b1b62b602d> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x3385c000 - 0x33866fff  GraphicsServices armv7  <cb64e146a8ee3fda9e80ffae1ccc9c5a> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x3386e000 - 0x338a6fff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x338a7000 - 0x33900fff  IMAVCore armv7  <ce90304da959333d81a64171a6ac3ae8> /System/Library/PrivateFrameworks/IMAVCore.framework/IMAVCore
0x33901000 - 0x33909fff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x33928000 - 0x33964fff  iCalendar armv7  <f2836083051132d3aa40ad82d7f73aea> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x339b2000 - 0x33a3efff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x33a4c000 - 0x33a4efff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x33a59000 - 0x33a65fff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x33a66000 - 0x33ac9fff  IMCore armv7  <046b6b615a743057b59d4aaba8a91d61> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x33aca000 - 0x33acbfff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x33ae7000 - 0x33ae8fff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x33ae9000 - 0x33b93fff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x33f57000 - 0x33f5bfff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x33f5c000 - 0x34009fff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x3400a000 - 0x342cbfff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x34319000 - 0x344d6fff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x344d7000 - 0x34500fff  AppleAccount armv7  <2ba44023410231fcb3f72f762ea3ce6e> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x346a6000 - 0x346c6fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x346d8000 - 0x346eefff  VoiceServices armv7  <c5b98e94eff33bf49006ff157c819987> /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices
0x34835000 - 0x34839fff  IOSurface armv7  <443ac3aab9283da480dd9dcda3c5c88e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x3484b000 - 0x3484bfff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x3484c000 - 0x3485dfff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x3487e000 - 0x349c7fff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x34b9c000 - 0x34ce1fff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x34d39000 - 0x34d3dfff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x34d88000 - 0x34d8ffff  MailServices armv7  <ab2388ce733e38b7a261273a401bbbf1> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x34db7000 - 0x34e01fff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x34e02000 - 0x34e46fff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x34e47000 - 0x34f0dfff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x34f17000 - 0x34f4cfff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x3503e000 - 0x35040fff  libCoreFSCache.dylib armv7  <808518e0fbf539af8489f028ca5198c7> /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib
0x35042000 - 0x35047fff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x3504a000 - 0x3504ffff  libGPUSupportMercury.dylib armv7  <3c1cc3175c403ace8fcbd3826bd43807> /System/Library/PrivateFrameworks/GPUSupport.framework/libGPUSupportMercury.dylib
0x3509f000 - 0x350b2fff  AssistantServices armv7  <4a0843742f363a8885b8db13b44ae256> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x350de000 - 0x3530bfff  MediaToolbox armv7  <c3098478486032c6aff336fa711c4fc6> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x3530c000 - 0x353dbfff  libGLProgrammability.dylib armv7  <49607ffe4ee9389494285a213e392924> /System/Library/Frameworks/OpenGLES.framework/libGLProgrammability.dylib
0x353e7000 - 0x3550cfff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x35549000 - 0x35637fff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x3563b000 - 0x35643fff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x35644000 - 0x35714fff  WebKit armv7  <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x35715000 - 0x35874fff  libmecabra.dylib armv7  <06a0a1ee488030169bdfab11fc8d2c5c> /usr/lib/libmecabra.dylib
0x358a5000 - 0x3591efff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x35920000 - 0x35926fff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x35930000 - 0x35932fff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x35ccb000 - 0x35d00fff  DataAccess armv7  <89fd0c22338b37538cf61803a0bca9e2> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x35db9000 - 0x35dd6fff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x35ee5000 - 0x35f21fff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x35f22000 - 0x36466fff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x36467000 - 0x364b8fff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x364c5000 - 0x364d0fff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x364d1000 - 0x36577fff  AddressBookUI armv7  <da424fecc66e3628ab03378ae80b38fc> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x36582000 - 0x36594fff  DataDetectorsUI armv7  <50ea319aaeb7307e92719980dd4b2953> /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI
0x36596000 - 0x365defff  CoreMedia armv7  <e274e1b894753b2eb05cf7b22a36d0c1> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x3660a000 - 0x367eefff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x367f2000 - 0x367f5fff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x367f6000 - 0x36844fff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x36879000 - 0x3687efff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x3687f000 - 0x36886fff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x36887000 - 0x36a2dfff  CoreData armv7  <b0215b6d4d143859a2b313ecade095ec> /System/Library/Frameworks/CoreData.framework/CoreData
0x36bcb000 - 0x36bd5fff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x36be1000 - 0x36c0dfff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x36c0e000 - 0x36c0efff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x36c1d000 - 0x36c2efff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x36c52000 - 0x36d21fff  IMGSGX535GLDriver armv7  <fe4f330b9a433322844a0d87410b68f7> /System/Library/Extensions/IMGSGX535GLDriver.bundle/IMGSGX535GLDriver
0x36d7b000 - 0x36dc0fff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x36dd4000 - 0x36eabfff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x36edb000 - 0x36edbfff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x36edc000 - 0x36edcfff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x36edd000 - 0x36f76fff  EventKit armv7  <d67aa1508ee7306b8e2a45c76ffddff0> /System/Library/Frameworks/EventKit.framework/EventKit
0x3701e000 - 0x3702afff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x37092000 - 0x371a9fff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x371c8000 - 0x371cffff  AssetsLibraryServices armv7  <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x3726a000 - 0x3735bfff  QuartzCore armv7  <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x3735c000 - 0x3741efff  Celestial armv7  <19617260ee073e23b95e456d93930aea> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x3741f000 - 0x37438fff  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x37443000 - 0x374f1fff  Message armv7  <573d0118246d3d9d8aed17e7ee2faec7> /System/Library/PrivateFrameworks/Message.framework/Message
0x37511000 - 0x37597fff  CoreMotion armv7  <6a9355d5a8e238b5b8f193605d509e15> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x375b6000 - 0x3762afff  MediaControlSender armv7  <87315c54b2293ab589950341ff91b45d> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x3762b000 - 0x3768ffff  MessageUI armv7  <da7af4f9494b35558bf7892dfdb36ee3> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x37690000 - 0x376a4fff  PersistentConnection armv7  <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x376c0000 - 0x376c3fff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x376c6000 - 0x37709fff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x3770a000 - 0x37719fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x3771b000 - 0x3771bfff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x3771c000 - 0x37758fff  IMFoundation armv7  <253125b9103c3d13b66923ac6893c25b> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x37769000 - 0x3776cfff  ActorKit armv7  <434c756a6b053f4ba3c954cfccddbf59> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x3776d000 - 0x37833fff  GLEngine armv7  <6617f2b4ee283469a5595129889ff049> /System/Library/Frameworks/OpenGLES.framework/GLEngine.bundle/GLEngine
0x37834000 - 0x37841fff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x37921000 - 0x37a9ffff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation 
```

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:49:39.633

可能是内存错误。我想系统线程正在尝试调用委托方法，但委托不再存在。

# c++ - C++ 安全对象删除

> ID：12386771
> 
> 赞同：2
> 
> 时间：2012-09-12T11:06:48.317
> 
> 标签：c++, smart-pointers, delete-operator

我正在用 C++ 编写一个相对较大的项目，并且在删除对象时遇到了问题。该项目，准确地说是一个roguelike游戏。

我有一个类`Npc`是游戏中的每一个怪物。它们被创建并存储在一个单独的类中，该类`Storage<Npc>`负责管理它们（加载、保存、创建、删除等）。每当怪物死亡时，相应的对象`npc`必须被删除并完全销毁。删除对象本身不是问题，我只是从`Storage<NPC>`. 问题是代码包含很多指向这个已经死亡的指针，这些指针`npc`现在是无效的，尝试使用它们会导致很多问题。例如：

1.  在他死之前，他可能打算执行一项行动。
2.  他站立的瓷砖上记录着指向他的指针。
3.  他可能参与了一些持续的活动，比如与某人搏斗。

代码中有很多这样的指针，因此几乎不可能简单地跟踪它们。我需要的是某种方法来确定 an`npc`已经死了，并且该地址上没有存储任何实际对象，因此仍然具有该指针的代码部分可以对他的死做出充分的反应。

我自己提出了几个想法，但到目前为止，它们对我来说似乎都不是很好：

*   我可以问`Storage<NPC>`班级是否在这样的地址上有一个对象。潜在的问题是对象删除后，可能会在同一个地址上分配另一个对象，这将导致错误。
*   我可以通知所有可能使用无效指针的位置。这是一个坏主意，因为这样的位置的数量会随着时间的推移而增加，这样做很痛苦。
*   我可以实现一些版本的智能指针，但我不确定使用哪一个。

**tl；博士版本**：我需要一个解决方案，它会告诉我指针是否指向一个对象，或者它指向一个空闲的内存块，还是指向在原始对象删除后分配的某个其他对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:19:51.430

根据您提供的信息，我可以建议您实施[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。如果有代码需要对 NPC 的死亡做出反应，那么这种模式就是要走的路。具有指向您的 NPC 的指针引用的代码部分将在 NPC 死亡时收到通知，并使它们指向 NPC 的指针副本无效，并根据需要对 NPC 的死亡做出反应。`observers`在 NPC 实际被删除之前，会向所有人发送死亡通知。

使用这种模式，您可以实现诸如“英雄每杀死一个怪物获得 50 生命值”的机制，并且它很容易扩展。

也可以使用 Kevin Ballard 的建议，`shared_ptr`如果没有代码需要主动对 NPC 死亡做出反应，只需要处理 NPC 死亡的情况即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T11:10:49.343

使用弱指针怎么样？如果将 存储`Npc`在（C ++ `std::shared_ptr`11，`std::tr1::shared_ptr`用于 C++03）中，则可以创建引用. 当s实际删除它的对象时，所有的s 都将能够解决这个问题。`std::weak_ptr``std::tr1::weak_ptr``shared_ptr``shared_ptr``weak_ptr`

尽管我想知道为什么您要删除`Npc`仍在其他地方使用的 s（例如，仍然有操作）。如果不是试图让所有其他引用发现你已经删除了`Npc`，你只想在`Npc`所有引用消失后死掉，那么单独使用 a `shared_ptr`（没有`weak_ptr`）将正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:24:20.697

一种选择是在您的课程中包含参考计数。当其他对象（例如房间）要持有指向 npc 的指针时，房间有责任增加 npc 的引用计数。现在，不只是删除一个已死的 npc，而是将其标记为已死（如果您还没有正确的标记，则通过另一个新数据成员），并且仅在其引用计数为零时才删除。房间对象还负责定期检查该标志，如果它得知 npc 已死，它会减少其引用计数（如果计数现在为零，这将导致事后删除）。

# cmake - 设置外部库后强制 cmake 重新运行 CHECK_CXX_SOURCE_COMPILES

> ID：12386772
> 
> 赞同：3
> 
> 时间：2012-09-12T11:06:54.837
> 
> 标签：cmake

使用 CMake 我想检查 OpenCV 库中的特定函数（cv::getGaborKernel）是否可用（它仅在库的最新版本中可用）。如果是，我将在我的代码中使用它，如果不是，我在我的代码中重新定义它，顺便说一句#ifdefs。

这是我的 CMakeLists.txt 的片段：

```
FIND_PACKAGE(OpenCV REQUIRED)
include_directories(${OpenCV_INCLUDE_DIRS})

get_property(inc_dirs DIRECTORY PROPERTY INCLUDE_DIRECTORIES)
set(CMAKE_REQUIRED_INCLUDES ${OpenCV_INCLUDE_DIRS})
set(CMAKE_REQUIRED_LIBRARIES ${OpenCV_LIBS})
INCLUDE(CheckCXXSourceCompiles) 
CHECK_CXX_SOURCE_COMPILES(
"
#include <opencv2/imgproc/imgproc.hpp>
int
main()
{
cv::Mat toto = cv::getGaborKernel(cv::Size(11,11), 1,0,3,1,0, CV_64F);
}
" HAVE_OPENCV_GABOR)
if(HAVE_OPENCV_GABOR)
message("Using OpenCV Gabor implementation")
else(HAVE_OPENCV_GABOR)
message("Using custom Gabor implementation")
endif(HAVE_OPENCV_GABOR) 
```

在具有最新 OpenCV 版本（确实有 cv::getGaborKernel）的计算机上部署时，测试失败，迫使重新定义函数并出现一些编译错误。问题在于 OpenCV 没有安装在标准目录中，它首先无法找到库。因此无法构建示例程序。但是，在我正确设置 OpenCV 依赖项后，HAVE_OPENCV_GABOR 的测试不会再次运行，因为故障已在缓存中注册。在这种情况下，如何强制 CMake 重新运行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:20:30.650

只需`CHECK_CXX_SOURCE_COMPILES()`用

```
if(NOT OpenCV_INCLUDE_DIRS OR NOT OpenCV_LIBS)
...
endif() 
```

另一种解决方案 -`unset(HAVE_OPENCV_GABOR CACHE)`运行前添加`CHECK_CXX_SOURCE_COMPILES()`。

# hibernate - lazy="proxy" do not work in many-to-one mapping when use default-lazy=false in hibernate

> ID：12386773
> 
> 赞同：2
> 
> 时间：2012-09-12T11:06:54.363
> 
> 标签：hibernate, lazy-loading

I am using Hibernate in a project where we have bout 300 entities.

For many entities relation we need no lazy loading, so we have used `default-lazy=false` in the mapping, and where we need lazy loading, we have used `lazy=true` for collections and `lazy=proxy` for many to one relation.

`lazy=true` works fine for collections, but `lazy=proxy` is ignored in many-to-one case. When I query `Vehicle` entity which have many-to-one mapping with the User entity, Hibernate loads User entity as well, i.e ignoring `lazy=proxy`. Below is the short version of mapping file.

```
<hibernate-mapping package="com.test.bean" default-lazy="false">
<class name="Vehicle" table="tbl_vehicle" optimistic-lock="version" >
    <id name="vehicleNo" column="VEHICLE_NO" type="int" node="@id">
        <generator class="com.test.TestSequenceGenerator" />
    </id>
    <version name="version" column="version" type="integer" unsaved-value="undefined" generated="never"/>
    <property name="color" />
    <property name="wheel" />
    <property name="seat" />

    <many-to-one name="user" class="User" embed-xml="false" lazy="proxy" fetch="select">
        <column name="user_id" not-null="true" />
    </many-to-one>
</class>

<class name="User" table="tbl_user" optimistic-lock="version" >
    <id name="userId" column="user_id" type="int" node="@id">
        <generator class="com.test.TestSequenceGenerator" />
    </id>
    <version name="version" column="version" type="integer" unsaved-value="undefined" generated="never"/>

    <property name="name" />

    <set name="vehicles" table="tbl_vehicle" cascade="all"
            inverse="true" fetch="select" lazy="true">
              <key>
                  <column name="user_id" not-null="true" />
              </key>
              <one-to-many class="Vehicle" />
           </set>

</class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T13:13:00.023

我同意你们的看法。然而，在这里，类映射 User 不应该有一个 default-lazy="false" 来让一个lazy="proxy" 工作。

# ruby-on-rails - Rails：使用 UJS 时处理呈现的 JSON

> ID：12386777
> 
> 赞同：0
> 
> 时间：2012-09-12T11:07:10.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, ujs

我通过允许使用 UJS 提交 AJAX 表单来增强我的应用程序。这是我的 create#product 操作：

```
def create

    if Product.create params[:product]
        respond_to do |format|

            message = "New product created."
            format.html { redirect_to :back, :notice => message }
            format.js { render :json => { :status => true, :message => message } }

        end
    end

end 
```

但我正在弄清楚如何在我的`views/products/create.js.erb`文件中处理输出的 JSON？

我尝试了这个简单的 console.log 示例，但没有成功（我的意思是，没有控制台输出）：

```
$(function(){
    console.log(xhr.responseText);
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:34:20.993

你可以使用：

```
$('form.new_product').bind('ajax:success',function(event, data, status, xhr){

});

$('form.new_product').bind('ajax:error',function(event, xhr, status, error){

}); 
```

甚至`$('form.new_product').on(same_args)`。

只要确保`new_product`是您的表单的实际类。

# button - Ext-JS Html Editor 获取选定文本

> ID：12386778
> 
> 赞同：0
> 
> 时间：2012-09-12T11:07:11.530
> 
> 标签：button, extjs, toolbar, html-editor

我正在尝试在 HtmlEditor 的工具栏中插入一个按钮。按钮应通过鼠标或键盘获取所选文本，并在所选文本的开头添加“#”字符以将其定位为 url。

据我了解，最好的解决方案是创建一个插件，用于将按钮添加到 html 编辑器工具栏中。我找到了创建代码，但问题是；**我怎样才能获得选定的文本？**ext-js 2.2 版

并且有提供为 html 编辑器工具栏按钮创建插件的代码：

```
Ext.ns('Ext.ux.form.HtmlEditor');

    Ext.ux.form.HtmlEditor.NewLine = Ext.extend(Ext.util.Observable, {
        init:function (cmp) {
            this.cmp = cmp;
            this.cmp.on('render', this.onRender, this);
        },
        onRender:function () {
            this.cmp.getToolbar().addButton([
                {
                    iconCls:'newline', //your iconCls here
                    handler:function () {
                        this.cmp.insertAtCursor('<br>&nbsp;');

                    },
                    scope:this
                }
            ]);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:18:36.477

您可以像这样获取选定的文本：`window.getSelection()`

这为您提供了一个 Selection 对象。如果您只想获取文本：`window.getSelection().toString()`

但是如果你想让东西加粗或其他东西，你需要检查选择是否在编辑器内。您需要的一切都在选择对象内。

=> 更正：htmlEditor 使用 iframe，您可以通过[getWin](http://docs.sencha.com/ext-js/2-3/source/HtmlEditor.html#Ext-form-HtmlEditor-method-getWin)函数获取 iframe 窗口。

请注意，这仅适用于现代浏览器（而不是 < IE9），从您使用的旧 Ext 版本来看，这可能对您来说是个问题……但 IE 有一些解决方法。

[更多信息](http://help.dottoro.com/ljcvonpc.php)

# excel - How to compare only a part of strings in different excel sheets(columns)

> ID：12386784
> 
> 赞同：2
> 
> 时间：2012-09-12T11:07:31.510
> 
> 标签：excel, excel-2007

How to compare two sheet columns specied below, however only part of string in location(column)in sheet1 will matches only part of string with the Location(column) in sheet2?
1.only 1st two characters of location(column) in sheet1 and 1st two characters of location(column) in sheet2 should match.
2.only any two characters of location(column) in sheet1 and any two characters of location(column) in sheet2 should match. Please help

```
Location(sheet1)    Location(sheet2)     
____________________________________________
india- north        USxcs  
India-west          Indiaasd  
India- east         Indiaavvds  
India- south        Africassdcasv  
US- north           Africavasvdsa  
us-west             UKsacvavsdv  
uk- east            Indiacascsa  
uk- south           UScssca  
Africa-middle       Indiacsasca  
Africa-south        Africaccc  
Africa-east         UKcac 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T11:17:50.440

对于问题 1，您可以使用[MID](https://support.office.com/en-us/article/MID-MIDB-functions-d5f9e25c-d7d6-472e-b568-4ecb12433028)函数从每个单元格值中提取前两个字符并进行比较。

对于问题 2，如果您可以接受预定的最大字符串长度，则有一个解决方案。这不是一个*很好的*解决方案！您可以使用嵌套的 if 语句，基本上是“展开循环”。此示例比较单元格 A1 和 B1 的长度为 A1 最多 12 个字符：

```
=IF(IFERROR(FIND(MID(A1,1,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,2,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,3,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,4,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,5,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,6,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,7,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,8,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,9,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,10,2),B1,1),0)>0,TRUE,
IF(IFERROR(FIND(MID(A1,11,2),B1,1),0)>0,TRUE,
FALSE
)
)
)
)
)
)
)
)
)
)
) 
```

*感谢 James Jenkins 的这次更新*

似乎旧版本的 Excel 有 7 个嵌套函数的限制。您可以通过将相邻单元格中的公式链接在一起来解决此问题（如果您不介意使电子表格更加丑陋）。事实上，如果您想获得真正的创意，您可以使用列索引来计算搜索的偏移量，例如：

```
=IF(IFERROR(FIND(MID($A1,(COLUMN(C1) - 3) * 6 + 1, 2), $B1, 1),0)>0,TRUE,
...repeat with +2, +3, +4, +5
if(D2 = FALSE, FALSE, TRUE)
))))))) 
```

然后，如果您需要更多字符串长度，则可以正确复制该列。请注意，当相邻列为空白时，最里面的“if”应该强制一个 TRUE 或 FALSE 值。

# maven - 为什么 Maven 想从我的所有存储库中下载我所有的依赖项？

> ID：12386785
> 
> 赞同：1
> 
> 时间：2012-09-12T11:07:32.567
> 
> 标签：maven, repository, jackson

我的 pom.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<project
 xsi:schemaLocation=
 "http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
 xmlns=
 "http://maven.apache.org/POM/4.0.0" 
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <modelVersion>4.0.0</modelVersion>
 <groupId>com.pw</groupId>
 <artifactId>pocketwaitress-android</artifactId>
 <name>PocketWaitress Android</name>
 <packaging>apk</packaging>
 <version>1.0</version>
 <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
 </properties>
 <repositories>         
      <repository>
           <id>org.springframework.maven.snapshot</id>
           <name>Spring Maven Snapshot Repository</name>
           <url>http://maven.springframework.org/snapshot</url>
           <releases>
                <enabled>false</enabled>
           </releases>
           <snapshots>
                <enabled>true</enabled>
           </snapshots>
      </repository><!-- For developing against latest Spring milestones -->
      <repository>
           <id>org.springframework.maven.milestone</id>
           <name>Spring Maven Milestone Repository</name>
           <url>http://maven.springframework.org/milestone</url>
           <snapshots>
                <enabled>false</enabled>
           </snapshots>
      </repository>
    <repository>
          <id>central</id>
          <name>Maven Repository Switchboard</name>
          <layout>default</layout>
          <url>http://repo1.maven.org/maven2</url>
          <snapshots>
                <enabled>false</enabled>
          </snapshots>
    </repository>

 </repositories>
 <build>
      <sourceDirectory>src</sourceDirectory>
      <finalName>${project.artifactId}</finalName>
      <plugins>
           <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
           <artifactId>android-maven-plugin</artifactId>
           <version>3.3.2</version>
           <configuration>
                <sdk>
                     <platform>7</platform>
                     <path>D:/WorkFolder/Android-SDK2</path>
                </sdk>
                <emulator>
                     <avd>WVGA-2.1</avd>
                </emulator>
                <deleteConflictingFiles>true</deleteConflictingFiles>
                <undeployBeforeDeploy>false</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
           </plugin>
           <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
           </plugin>
      </plugins>
 </build>
 <dependencies>
      <dependency>
           <groupId>com.google.android</groupId>
           <artifactId>android</artifactId>
           <version>2.1.2</version>
           <scope>provided</scope>
      </dependency>
      <dependency>
           <groupId>org.springframework.android</groupId>
           <artifactId>spring-android-rest-template</artifactId>
           <version>1.0.0.BUILD-SNAPSHOT</version>
      </dependency>
      <dependency>
           <groupId>com.pw</groupId>
           <artifactId>model</artifactId>
           <version>1.0.0</version>
      </dependency>
      <dependency>
           <groupId>org.codehouse.jackson</groupId>
           <artifactId>jackson-core-asl</artifactId>
           <version>1.9.9</version>
      </dependency>
      <dependency>
           <groupId>org.codehouse.jackson</groupId>
           <artifactId>jackson-mapper-asl</artifactId>
           <version>1.9.9</version>
      </dependency>
      </dependencies> 
```

最新的插件是 Jackson 依赖项。

部署的输出是：

```
 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
    SLF4J: Defaulting to no-operation (NOP) logger implementation
    SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
    [INFO] Scanning for projects...
    [INFO]                                                                         
    [INFO] ------------------------------------------------------------------------
    [INFO] Building PocketWaitress Android 1.0
    [INFO] ------------------------------------------------------------------------
    Downloading: http://repo1.maven.org/maven2/org/codehouse/jackson/jackson-core-asl/1.9.9/jackson-core-asl-1.9.9.pom
    [WARNING] The POM for org.codehouse.jackson:jackson-core-asl:jar:1.9.9 is missing, no dependency information available
    Downloading: http://repo1.maven.org/maven2/org/codehouse/jackson/jackson-mapper-asl/1.9.9/jackson-mapper-asl-1.9.9.pom
    [WARNING] The POM for org.codehouse.jackson:jackson-mapper-asl:jar:1.9.9 is missing, no dependency information available
    Downloading: http://repo1.maven.org/maven2/org/codehouse/jackson/jackson-core-asl/1.9.9/jackson-core-asl-1.9.9.jar
    Downloading: http://repo1.maven.org/maven2/org/codehouse/jackson/jackson-mapper-asl/1.9.9/jackson-mapper-asl-1.9.9.jar
    [INFO]                                                                         
    [INFO] ------------------------------------------------------------------------
    [INFO] Skipping PocketWaitress Android
    [INFO] This project has been banned from the build due to previous failures.
    [INFO] ------------------------------------------------------------------------
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 3.313s
    [INFO] Finished at: Wed Sep 12 12:50:48 CEST 2012
    [INFO] Final Memory: 20M/174M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal on project pocketwaitress-android: Could not resolve dependencies for project com.pw:pocketwaitress-android:apk:1.0: The following artifacts could not be resolved: org.codehouse.jackson:jackson-core-asl:jar:1.9.9, org.codehouse.jackson:jackson-mapper-asl:jar:1.9.9: Failure to find org.codehouse.jackson:jackson-core-asl:jar:1.9.9 in http://maven.springframework.org/milestone was cached in the local repository, resolution will not be reattempted until the update interval of org.springframework.maven.milestone has elapsed or updates are forced -> [Help 1]
    [ERROR] 
    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
    [ERROR] Re-run Maven using the -X switch to enable full debug logging.
    [ERROR] 
    [ERROR] For more information about the errors and possible solutions, please read the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

显然，maven 设法从中央 maven 存储库下载 jackson 依赖项，但随后它也尝试从[http://maven.springframework.org/milestone](http://maven.springframework.org/milestone)下载它们！这是为什么？我是否需要以某种方式定义从哪个 repo 获取哪些依赖项？没有意义...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:55:13.267

我以前见过这样的时髦错误，我通常会做两件事：

首先，确保您的 Internet 连接正常工作 - 如果 Maven 无法连接到特定存储库，它将在其他存储库中搜索工件，并且可能会给出误导性错误消息（例如似乎搜索错误的存储库）。

接下来，使用标志再次运行您的构建`-U`以强制更新。

同样，不确定这是不是问题，但我已经看到上述步骤修复了类似的行为。可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:46:07.237

您的杰克逊依赖项未下载。下载成功后，您将看到类似
`Downloaded: xy`
Recheck your dependencies 的内容。

# asp-classic - how to insert images in sql server 2000 using classic asp.?

> ID：12386786
> 
> 赞同：0
> 
> 时间：2012-09-12T11:07:35.640
> 
> 标签：asp-classic, upload, sql-server-2000

I just came across with this project where I had to display some images in the back-end of a website for that I have used Classic Asp and SQL Server 2000, so far I can display most of the things from the database. I can't figure out about this image thing. I tried what I could understand so far I created a table in which there a **img** column with image data-type I don't know if its right. How should I go around scripting to fetch images.

```
<table border="1" cellpadding="0" cellspacing="0" width="100%">
                <tr height="25px">
                    <th width="25%">Cover Name</th>
                    <th width="25%">Category Name</th>
                    <th width="17%">Thumbs</th>
                    <th width="17%">&nbsp;</th>
                    <th width="17%">&nbsp;</th>
                </tr>
                <%
                    sql = "SELECT * from covers"
                    rs.open sql, con, 1, 2
                    do while not rs.eof
                %>
                <tr>
                    <td align="center"><%=rs("c_name")%></td>
                    <td align="center"><%=rs("category")%></td>
                    <td align="center"><%=rs("img")%></td>
                    <td align="center"><a href="edit.asp?cover=<%=rs("c_name")%>">Edit</a></td>
                    <td align="center"><a href="delete.asp?cover=<%=rs("c_name")%>" onclick="var r =confirm('This Cover details will be deleted permenantly . Are you sure you want to DELETE');
                {
                    if (r==true)
                    alert('record will be deleted');
                    if (r==false)
                    return false;
                }">Delete Info</a></td>
                </tr>
                <%
                    rs.movenext
                    loop
                    rs.close
                %>
                </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:59:08.270

将图像文件存储在磁盘上（大概在 Web 服务器上）并且只将它们的文件名存储在数据库的“封面”表中会更好吗？

很抱歉没有直接回答您的问题，但是在数据库中存储二进制文件的额外复杂性似乎并没有提供任何巨大的回报。

有关该主题的**更多**信息，请参阅此[SO Post 。](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

# php - 教义 2 关系用法

> ID：12386788
> 
> 赞同：0
> 
> 时间：2012-09-12T11:07:48.890
> 
> 标签：php, orm, doctrine-orm

我有两个数据库表

1.  文章
2.  档案

每篇文章在存档表中可以有多条记录。

这就是存档实体的样子（仅在理解问题时显示）

```
/**
 * Archive
 *
 * @ORM\Table(name="archive")
 * @ORM\Entity
 */
class Archive
{

   .....................................................

   /**
     * @var Articles
     *
     * @ORM\ManyToOne(targetEntity="Articles")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="article_id", referencedColumnName="id")
     * })
     */
     private $article;

   .....................................................

   /**
     * Set article
     *
     * @param Articles $article
     * @return Archive
     */
    public function setArticle(\Entities\Articles $article = null)
    {
        $this->article = $article;
        return $this;
    }

    /**
     * Get article
     *
     * @return Articles 
     */
    public function getArticle()
    {
        return $this->article;
    }

    ....................................................
} 
```

在这个实体中有对文章实体的引用，但在文章实体中没有对存档实体的引用。

所以问题是 - 我是否需要参考文章实体中的存档以及它有什么好处和缺点？据我了解，有很多参考资料是不好的（[http://docs.doctrine-project.org/en/latest/reference/best-practices.html#constrain-relationships-as-much-as-possible](http://docs.doctrine-project.org/en/latest/reference/best-practices.html#constrain-relationships-as-much-as-possible)）。那么我可以告诉我是否需要它的那个点在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:12:51.033

这主要是架构和便利性的决定。

*   文章是否需要了解存档条目？
*   我需要通过文章访问存档条目吗？

第一种情况主要是关于您希望如何表示您的数据模型。一篇文章是否应该知道它在存档中的项目？还是只有档案需要了解文章？它们在数据模型中的关系如何？

第二种情况更多的是关于编程的便利性：如果您需要经常访问一篇文章的归档项目，拥有`$article->getArchives()`（或其他）比通过存储库或查询获取它们更方便。这可能与数据模型背道而驰，因此您需要权衡这两种情况并自己决定如何对其建模以及最有意义的方法。

# java - instanceof 在现代 JVM 实现中是如何实现的？

> ID：12386789
> 
> 赞同：2
> 
> 时间：2012-09-12T11:07:56.700
> 
> 标签：java, jvm, implementation, instanceof

由于在其他线程中进行了基准测试（参见[https://stackoverflow.com/a/397617/1408611](https://stackoverflow.com/a/397617/1408611)），结果表明 Java 6 中的 instanceof 实际上非常快。这是如何实现的？

我知道对于单继承，最快的想法是有一些嵌套的区间编码，其中每个类都维护一个 [low,high] 区间，而 instanceof 只是一个区间包含测试，即 2 个整数比较。但是它是如何为接口制作的（因为间隔包含仅适用于单继承）？以及如何处理类加载？加载新的子类意味着必须调整很多间隔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T11:15:30.770

AFAIK 每个类都知道它扩展的所有类和它实现的接口。这些可以存储在一个哈希集中，给出 O(1) 查找时间。

当代码经常采用相同的分支时，几乎可以消除成本，因为 CPU 在确定是否应该采用分支之前就可以执行分支中的代码，从而使成本几乎为零。

由于微基准测试是在 4 年前执行的，我预计最新的 CPU 和 JVM 会更快。

```
public static void main(String... args) {
    Object[] doubles = new Object[100000];
    Arrays.fill(doubles, 0.0);
    doubles[100] = null;
    doubles[1000] = null;
    for (int i = 0; i < 6; i++) {
        testSameClass(doubles);
        testSuperClass(doubles);
        testInterface(doubles);
    }
}

private static int testSameClass(Object[] doubles) {
    long start = System.nanoTime();
    int count = 0;
    for (Object d : doubles) {
        if (d instanceof Double)
            count++;
    }
    long time = System.nanoTime() - start;
    System.out.printf("instanceof Double took an average of %.1f ns%n", 1.0 * time / doubles.length);
    return count;
}

private static int testSuperClass(Object[] doubles) {
    long start = System.nanoTime();
    int count = 0;
    for (Object d : doubles) {
        if (d instanceof Number)
            count++;
    }
    long time = System.nanoTime() - start;
    System.out.printf("instanceof Number took an average of %.1f ns%n", 1.0 * time / doubles.length);
    return count;
}

private static int testInterface(Object[] doubles) {
    long start = System.nanoTime();
    int count = 0;
    for (Object d : doubles) {
        if (d instanceof Serializable)
            count++;
    }
    long time = System.nanoTime() - start;
    System.out.printf("instanceof Serializable took an average of %.1f ns%n", 1.0 * time / doubles.length);
    return count;
} 
```

最后打印

```
instanceof Double took an average of 1.3 ns
instanceof Number took an average of 1.3 ns
instanceof Serializable took an average of 1.3 ns 
```

如果我改变“双打”

```
 for(int i=0;i<doubles.length;i+=2)
        doubles[i] = ""; 
```

我明白了

```
instanceof Double took an average of 1.3 ns
instanceof Number took an average of 1.6 ns
instanceof Serializable took an average of 2.2 ns 
```

注意：如果我改变

```
if (d instanceof Double) 
```

到

```
if (d != null && d.getClass() == Double.class) 
```

表现是一样的。

# ios - 有没有办法使用正则表达式或通配符从 NSUserDefaults 获取对象

> ID：12386798
> 
> 赞同：3
> 
> 时间：2012-09-12T11:08:35.003
> 
> 标签：ios, xcode

我`NSUserDefaults`在运行时添加值并将键设置为`[NSString stringWithFormat:@"decrement%@",course_id];`

我正在一一设置对象有什么方法可以获取所有以“递减”开头的 userdefaults 对象？

或者我必须进入一个循环并通过一个一个精确的键来获取对象？

注意：- 我接受反对票作为一种健康的批评方式，但请写下原因以便我改进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:16:52.773

您可以像这样获取 NSUserDefaults 的所有字典键：

```
 NSArray *arrKeys = [[[NSUserDefaults standardUserDefaults] dictionaryRepresentation] allKeys] 
```

现在使用 NSPredicate 查找 [NSString stringWithFormat:@"decrement%@",course_id]; arrKeys 中的值

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(SELF like %@)",@"decrement"];
NSArray *keysLikeDecrement =
[arrKeys filteredArrayUsingPredicate:predicate];

NSPredicate *aPredicate =
[NSPredicate predicateWithFormat:@"SELF beginswith 'decrement'"];
NSArray *beginWithDecrement =
[arrKeys filteredArrayUsingPredicate:aPredicate];

NSPredicate *bPredicate =
[NSPredicate predicateWithFormat:@"SELF contains 'decrement'"];
NSArray *containsWithDecrement =[arrKeys filterUsingPredicate:bPredicate]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T11:14:30.533

`NSArray *keys = [[[NSUserDefaults standardUserDefaults] dictionaryRepresentation] allKeys];`

`keys`然后，您可以使用`NSArray`s 方法进行过滤。

但听起来您应该使用不同的持久性机制，例如 Coredata。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T11:20:15.030

不是最好/最快的解决方案，但使用可用的内置块，您可以通过这种方式枚举所有条目：

```
NSArray *keys = [[NSUserDefaults standardUserDefaults] dictionaryRepresentation] allKeys];
[[keys objectsAtIndexes:[keys indexesOfObjectsPassingTest:^BOOL(NSString *key, NSUInteger idx, BOOL *stop) {
    return [obj hasPrefix:@"myPrefix"];
}]] enumerateObjectsUsingBlock:^(NSString *key, NSUInteger idx, BOOL *stop) {
    [[NSUserDefaults standardUserDefaults] objectForKey:key];
}]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-12T11:15:44.707

答案是“不”，这是没有办法的。用户默认值非常像具有键值对的字典。也就是说，您可以创建一个包含 1000 个数字的数组，从默认值中获取该数组，然后向它询问 900 的值。

# jekyll - Jekyll 不会从深度嵌套的文件夹中生成文件

> ID：12386800
> 
> 赞同：0
> 
> 时间：2012-09-12T11:08:47.003
> 
> 标签：jekyll, github-pages, static-site

我正在尝试生成一个包含 javadoc 的站点。

结构如下所示：

```
|
|--com
|   |--myproduct
|          |--mypackage
|               |--notgenerated.html
|--index.html 
```

在 _site 文件夹中，我只得到

```
|
|--index.html 
```

当我在 com 目录中添加一个虚拟文件时

```
|
|--com
|   |--myproduct
|   |       |--mypackage
|   |            |--notgenerated.html
|   |--generated.html
|--index.html 
```

_site 文件夹现在看起来像这样

```
|
|--com
|   |--generated.html
|--index.html 
```

如何让 Jekyll 将这些深度嵌套的文件复制到 _site 目录，而不必将虚拟文件放在中间目录中？

我在 Win7-x64 上使用 Ruby 1.9.1 和 Jekyll 0.11.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:08:25.320

Github 支持的好心人找到了原因。

事实证明，我在`_config.yml`.

我用了

```
exclude: dir1, dir2, file1 
```

代替

```
exclude: [dir1, dir2, file1] 
```

这导致站点生成失败。默默。

# java - 未检测到数据表所选行

> ID：12386801
> 
> 赞同：0
> 
> 时间：2012-09-12T11:08:47.403
> 
> 标签：java, datatable, primefaces

我需要在我的数据表中检索选定的行信息，但出现错误，我遵循了 primefaces 官方文档，但我不明白问题出在哪里，这是我的代码：

Xhtml页面：

```
<p:dataTable id="groups" var="group" value="#{projectAdminisrationMB.groupsList}" rowKey="#{group.name}" selection="#{projectAdminisrationMB.selectedGroup}" selectionMode="single">

    <f:facet name="header">
    </f:facet>

    <p:column id="column2">
        <f:facet name="header">
            <h:outputText value="Group Name"></h:outputText>
        </f:facet>
        <p:graphicImage value="/images/group/#{group.name}.gif" />
        <h:outputText value="#{group.name}"></h:outputText>
    </p:column>

    <p:column id="column3">
        <f:facet name="header">
            <h:outputText id="text3" value=" Group Description "></h:outputText>
        </f:facet>
        <h:outputText value="#{group.description}"></h:outputText>
    </p:column>

    <f:facet name="footer">
        <p:commandButton value="See Permession " icon="ui-icon-search" oncomplete="permessionDlg.show()" />
    </f:facet>
</p:dataTable>

<p:dialog header="Modify Group" widgetVar="modifyGoupDlg" width="750" showEffect="explode" hideEffect="explode">
    <br />
    <br />
    <h:outputText value="New Group :" />&nbsp;  
    <p:inputText id="updatedGroupName" value="#{projectAdminisrationMB.selectedGroup.name}" required="true"></p:inputText>
    <br />
    <br />
    <h:outputText value="Group Description :" />
    <br />
    <br />
    <p:editor id="updatedGroupDescription" value="#{projectAdminisrationMB.selectedGroup.description}" width="600" />
    <br />
    <br />
    <p:commandButton id="ValidateModif" value="Validate" actionListener="#{projectAdminisrationMB.modifyGoup}" onclick="modifyGoupDlg.hide()"></p:commandButton>
    <p:commandButton id="CancelModif" value=" Cancel " onclick="modifyGoupDlg.hide()"></p:commandButton>

</p:dialog> 
```

在我的托管 bean ProjectAdminisrationMB 中，我创建了一个属性私有组 selectedGroup；使用 getter 和 setter

错误 ：

```
Avertissement: /manage_Project_Groups.xhtml @96,133 value="#{projectAdminisrationMB.selectedGroup.name}": Target Unreachable, 'selectedGroup' returned null
javax.el.PropertyNotFoundException: /manage_Project_Groups.xhtml @96,133 value="#{projectAdminisrationMB.selectedGroup.name}": Target Unreachable, 'selectedGroup' returned null
at com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:97)
at org.primefaces.renderkit.InputRenderer.findImplicitConverter(InputRenderer.java:170) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:57:58.550

那么首先你放置了表单标签吗？从...开始：

```
 <h:form id="form">
     //datatable
     //dialog
 </h:form> 
```

你也有 oncomplete 正在调用 permessionDlg.show() 但这不在你的页面中（或者你没有发布整个页面）并且你没有调用更新所以你的弹出窗口永远不会更新。

改变：

```
<p:commandButton value="See Permession " icon="ui-icon-search" oncomplete="permessionDlg.show()" /> 
```

到

```
p:commandButton value="See Permession " update=":form:display" icon="ui-icon-search" oncomplete="modifyGoupDlg.show()" /> 
```

如果这不能解决问题，请发布您的 bean 代码和完整页面

# document - 回车、换行和换行

> ID：12386803
> 
> 赞同：30
> 
> 时间：2012-09-12T11:08:56.443
> 
> 标签：document, indentation, lf

回车、换行和换行有什么区别？它取决于操作系统吗？为什么我们需要使用所有这些来进入下一行？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-12T11:19:58.967

通常，“新行”是指通常被解释为表示新行的任何字符集，包括：

*   **DOS/Windows 上的**CR LF****
***   **旧 Mac 上的**CR*******   **Unix 变体上的**LF ，包括现代 Mac********

 ******CR**是回车 ASCII 字符（代码 0x0D），通常表示为 \r。 **LF**是换行符（代码 0x0A），通常表示为 \n。

最初的基于打字机的计算机需要这两个字符，它们完全按照他们所说的那样做：CR 将马车返回到纸的左侧，LF 将其通过一行。Windows 保持这个序列不变，而 Unix 变体选择更有效的字符使用，一旦它们只是象征性地需要。

如果需要在代码中表示此序列，请确保查找与平台无关的换行符或函数。如果没有，至少确保您考虑了上述三个变体。

有关历史的更多信息：http: [//www.codinghorror.com/blog/2010/01/the-great-newline-schism.html](http://www.codinghorror.com/blog/2010/01/the-great-newline-schism.html)****

# c++ - 复制构造函数的存在导致函数通过引用而不是值返回

> ID：12386805
> 
> 赞同：4
> 
> 时间：2012-09-12T11:08:59.767
> 
> 标签：c++

在下面的代码中，它打印出两个不同的内存位置。这对我来说很有意义，因为我是按价值返回的。

```
#include <iostream>

using namespace std;

class Foo {
public:
        Foo () {}
//      Foo (const Foo &) { cout << "Copy con" << endl; }
};

Foo test () {
        Foo foo;
        cout << &foo << endl;
        return foo;
}

int main () {
        Foo foo = test();
        cout << &foo << endl;
} 
```

但是，如果我在上面的代码中取消注释复制构造函数并再次运行它，它会输出相同的内存位置两次。为什么？它根本不会打印出“Copy con”，所以我知道复制构造函数没有被调用。似乎复制构造函数的存在会导致某种优化，即使它没有被调用。

我在 GCC 4.6.3 上使用“g++ -Wall test.cpp -o test”进行编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:11:58.533

这是[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)的结果。基本上，您的编译器忽略了 return 语句导致的昂贵的复制操作，即使复制构造函数有副作用。

这背后的原因是返回一个复杂的对象是昂贵的。*编译器不是在复制上浪费时间，而是在调用者的*堆栈帧中秘密地创建一个隐藏对象，并将对该隐藏对象的引用传递给被调用函数，并将函数的返回值直接复制到该隐藏对象中。

C++ 标准明确说明了这一点（ISO-IEC 14882:2011 12.8 第 31 段）：

> 当满足某些条件时，允许实现省略类对象的复制/移动构造，即使对象的复制/移动构造函数和/或析构函数具有副作用。

# java - 是否有现成的组件可以将 java *.properties 文件转换为相应的 json？

> ID：12386806
> 
> 赞同：3
> 
> 时间：2012-09-12T11:09:00.607
> 
> 标签：java, json, serialization, properties

我想写一个并不难，但我只是想知道有没有现成的东西，可以在一行中解决这个任务而无需额外的编码？

如果您想在 *.properties 文件中保留一些配置并且没有中间模型将其以 json 格式保存，这将特别有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T05:33:53.733

我发现了一个带有 Json 的 git 到其他格式，反之亦然。您可以检查此拉取请求，该请求将 java 属性添加到该项目的 JSON。

[https://github.com/douglascrockford/JSON-java/pull/82](https://github.com/douglascrockford/JSON-java/pull/82)

# c# - 基于文本的元素列表

> ID：12386807
> 
> 赞同：0
> 
> 时间：2012-09-12T11:09:04.417
> 
> 标签：c#, wpf

好的，假设我有一个名为 rectangle1 的矩形和两个名为 label1 和 label2 的标签

有什么方法可以让我得到从设计师那里选择的物品清单吗？

例如，当我选择了所有 3 个项目时，是否有一些隐藏按钮会给我一个类似的列表

矩形1，标签1，标签2

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:25:18.787

您可以在 xaml 代码中看到 wpf 设计器中选定的控件：

![选定的控件](../Images/3d25d9f5050e28dfeba504e03f7b5265.png)

但如果你仍然想要文本列表，我认为你需要创建你的 owen 插件

编辑：这篇文章可能会让你知道你想要什么

[A-Document-Outline-Window-for-C-Files-in-WPF](http://www.codeproject.com/Articles/96311/A-Document-Outline-Window-for-C-Files-in-WPF)

# maven - maven jboss tattletale 报告

> ID：12386810
> 
> 赞同：2
> 
> 时间：2012-09-12T11:09:11.233
> 
> 标签：maven, maven-2

我正在尝试向 Maven 2 主 POM 添加一个 tattletale 报告。

理想情况下，我只希望报告运行一次，但它似乎在每个模块编译时都运行。

是否可以将 tattletale 设置为主 POM，并且只在整个代码库上运行一次？如果是这样，有人可以提供 POM 文件的设置，以便我实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-16T05:57:07.283

执行您所描述的操作的一种方法是将配置放在父 pom.xml 中的 Maven 配置文件中。然后，您可以在构建任何子模块时按需激活该配置文件。例如，如果您想要一个可以在任何战争模块上使用的预定义配置，您可以执行以下操作：

```
<profile>
    <id>tattletale-war</id>
    <activation>
        <activeByDefault>false</activeByDefault>
    </activation>
    <build>
    <plugins>
        <plugin>
            <groupId>org.jboss.tattletale</groupId>
            <artifactId>tattletale-maven</artifactId>
            <version>1.2.0.Beta2</version>
            <executions>
                <execution>
                    <goals>
                        <goal>report</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <source>${project.build.directory}/${project.build.finalName}/WEB-INF/lib</source>
                <destination>${project.build.directory}/reports</destination>
            </configuration>
        </plugin>
    </plugins>
    </build>
</profile> 
```

然后在需要时在命令行激活它：

> mvn clean package -P tattletale-war

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T00:16:06.877

Tattletale 基于工件生成报告，那么这是否意味着需要在 Maven 模块级别生成报告？

我正在开发一个多模块 Maven 项目，我的计划是在顶部、下方声明插件，并为我要报告的每个模块声明它。

# java - 尽管 defaultIsFolder 设置为 false

> ID：12386811
> 
> 赞同：1
> 
> 时间：2012-09-12T11:09:41.173
> 
> 标签：java, json, tree, smartgwt, treegrid

我使用 smartgwt 2.5。我有一个数据绑定的treegrid，它从数据库中获取一个json并构建树。这很好用。问题是当我尝试重新做父母时

一开始，树看起来像：

![在此处输入图像描述](../Images/8ddf8c10900c5315b1ef86924525e5af.png)

我从数据库中获取的 json：

```
[{"id":"a","ReportsTo":"root","isFolder":"true","isOpen":"false"},{"id":"b","ReportsTo":"c","isFolder":"false", "isOpen":"false"},{"id":"c","ReportsTo":"root","isFolder":"true","isOpen":"true"},{"id":"d","ReportsTo":"a","isFolder":"false","isOpen":"false"}] 
```

在reparent b之后（将b拖到文件夹c并将其放入c）所有叶子都得到文件夹：

[http://i.stack.imgur.com/lLHdX.png](https://i.stack.imgur.com/lLHdX.png)

这是发送到服务器：

```
{
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)     "dataSource":"isc_RestDataSource_0", 
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)     "operationType":"update", 
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)     "data":{
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)         "id":"b", 
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)         "ReportsTo":"c", 
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)         "isFolder":false, 
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)         "isOpen":"false"
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)     }, 
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)     "oldValues":{
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)         "id":"b", 
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)         "ReportsTo":"a", 
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)         "isFolder":false, 
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)         "isOpen":"false"
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4)     }
12:46:52,773 INFO  [stdout] (http--127.0.0.1-7443-4) } 
```

站点刷新后，树正确显示：

```
a
c
-b
-d 
```

我的树形网格代码：

公共类 FavoritesGrid 扩展 TreeGrid {

```
public FavoritesGrid() {
    setWidth("12%");
    setShowConnectors(false);
    setShowResizeBar(true);
    setCanReorderRecords(true);
    setCanAcceptDroppedRecords(true);
    setCanDragRecordsOut(true);
    setCanReparentNodes(true);
    setDragDataAction(DragDataAction.MOVE);
    setAutoSaveEdits(false);
    setAutoFetchData(false);
    setLoadDataOnDemand(false); //load everything

    setHeight("50%");

    RestDataSource ds = new RestDataSource();
    ds.setRecordXPath("/");
    ds.setDataFormat(DSDataFormat.JSON);

    OperationBinding fetch = new OperationBinding();
    fetch.setOperationType(DSOperationType.FETCH);
    fetch.setDataProtocol(DSProtocol.POSTMESSAGE);
    fetch.setDataFormat(DSDataFormat.JSON);

    OperationBinding add = new OperationBinding();
    add.setOperationType(DSOperationType.ADD);
    add.setDataProtocol(DSProtocol.POSTMESSAGE);
    add.setDataFormat(DSDataFormat.JSON);

    OperationBinding update = new OperationBinding();
    update.setOperationType(DSOperationType.UPDATE);
    update.setDataProtocol(DSProtocol.POSTMESSAGE);
    update.setDataFormat(DSDataFormat.JSON);

    ds.setOperationBindings(fetch, update, add);

    ds.setDataURL("/Kronos/Favorites");

    DataSourceTextField key = new DataSourceTextField("id", "id");
    key.setPrimaryKey(true);
    key.setRequired(true);
    DataSourceTextField parent = new DataSourceTextField("ReportsTo",
            "ReportsTo");
    parent.setRequired(true);
    parent.setForeignKey("id");
    parent.setRootValue("root");

    ds.setFields(key, parent);

            //define properties
    Tree tree = new Tree();
    tree.setDefaultIsFolder(false); //default the nodes should be leafs
    tree.setRootValue("root");  
    tree.setNameProperty("id");  
    tree.setIdField("id");  
    tree.setParentIdField("ReportsTo");  
    //the setOpenProperty also doesn't work
    //if i set it smartgwt displays all folder opened
    tree.setOpenProperty("isOpen"); 
    //setIsFolderProperty is being ignored after reparent, need to refresh the site for correction
    tree.setIsFolderProperty("isFolder"); 

    setDataProperties(tree);

    setDataSource(ds);

    fetchData();
}
} 
```

有人可以帮我吗？

# wpf - 多个资源词典，选择一个

> ID：12386812
> 
> 赞同：3
> 
> 时间：2012-09-12T11:09:49.000
> 
> 标签：wpf, resourcedictionary

我正在开发一个使用资源字典进行样式设置的应用程序。我必须进行更改以启用配置设置来更改正在使用的字典。

我有三个字典：`Original.xaml`, `Neon.xaml`& `Graphite.xaml`。

`App.xaml`：

```
 <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Resources/Original.xaml"/>
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

我可以通过调用来更改正在使用的字典：

```
private void DynamicLoadStyles(string StyleToUse)
{
    string fileName = "C:\\Data\\Projects\\MyApp\\MyApp\\Resources\\" +
        StyleToUse + ".xaml";
    using (FileStream fs = new FileStream(fileName, FileMode.Open))
    {
        ResourceDictionary dic = (ResourceDictionary)XamlReader.Load(fs);
        Resources.MergedDictionaries.Clear();
        Resources.MergedDictionaries.Add(dic);
    }
 } 
```

一切都按预期工作（但是我不确定这是否是正确的方法）。问题是我宁愿嵌入文件，而不必从外部文件加载它们。

我已搜索信息以提供帮助，但找不到我要查找的内容。也就是说我是 WPF 的新手（3 周），还不确定我在做什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:49:56.640

我真的不喜欢回答我自己的问题，因为这表明我一开始就不应该问。但是我已经使用 .... 解决了这个问题。

```
 private void LoadDynamicResource(String StyleToUse)
    {

        ResourceDictionary dic = new ResourceDictionary { Source = new Uri(StyleToUse, UriKind.Relative) };
        Resources.MergedDictionaries.Clear();
        Resources.MergedDictionaries.Add(dic);

    } 
```

不过，我会对这方面的意见感兴趣。

# c - 矩形相交算法

> ID：12386818
> 
> 赞同：-4
> 
> 时间：2012-09-12T11:10:14.900
> 
> 标签：c, algorithm

嗨，我尝试了一个问题来检查两个矩形是否相交如果矩形平行于 x 轴，我已经编写了代码

```
struct point 
{
 int x;
 int y;
};

struct rect
{
 struct point left;
 struct point right;
};

//1 - intersection
// 0- no intersection
int rectintersectioncheck(struct rect r1,struct rect r2)
{
    int x_check = (r1.left.x > r2.right.x || r2.left.x > r1.right.x);
    int y_check = (r1.right.y > r2.left.y || r2.right.y > r1.left.y);

    if(x_check && y_check )
    {
               return 0;   
    }
    return 1;
} 
```

它在这种情况下工作正常，但我对算法感到困惑，因为矩形不平行于 x 轴，因为只有左上角，右下角点，请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:34:09.370

先澄清一下。如果 p1 和 p2 是矩形的左上角和右下角点，则矩形*必须*平行于 x 轴（和 y 轴）。所以只有一个矩形满足这些条件。如果矩形不平行于 x 轴，则底部不能同时成为右点。

由于我们谈论的是不完全平行于 x 轴的矩形，所以让我们放弃这个定义。让我们谈谈两个相对顶点是 p1 和 p2（不一定是左上角和右下角）的矩形。

让 p1 和 p2 定义第一个矩形， p3 和 p4 定义第二个矩形。

如果你取所有对角为 p1 和 p2 的矩形的并集，你会得到一个圆（以 (p1+p2)/2 为中心，|p1−p2| 为直径）。

有以下三种情况：

1.  如果 p1-p2 线段与 p3-p4 线段相交，则矩形始终相交。
2.  如果对应于 p1,p2 的圆与对应于 p3,p4 的圆相交，那么这些矩形*有时会*相交。
3.  否则这些矩形永远不会相交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:45:15.133

@ELKamina：您讨论的圆形方法非常好，但是在圆形相交但矩形不相交的情况下很难区分。

我已经想到了他的想法，很高兴分享。
为什么我们不在特定情况下在数组中构造我们的矩形以找出它们是否相交。

```
 eg.  rect 1- points (1,3)(3,1)(6,4)(4,6)     rect2 points- (4,0)(5,0)(5,1)(4,1)
array represntation                                      array representation
6 [F F F F # F F F]                                      6 [F F F F F F F F]
5 [F F F # # # F F]                                      5 [F F F F F F F F]
4 [F F # # # # # F]                                      4 [F F F F F F F F]
3 [F # # # # # F F]                                      3 [F F F F F F F F]
2 [F F # # # F F F]                                      2 [F F F F F F F F]
1 [F F F # F F F F]                                      1 [F F F F # # F F]
0 [F F F F F F F F]                                      0 [F F F F # # F F]
   0 1 2 3 4 5 6 7                                          0 1 2 3 4 5 6 7 
```

在上述情况下，圆圈相交，但矩形不相交。

```
eg
g. rect 1- points (1,3)(3,1)(6,4)(4,6)     rect2 points- (3,0)(4,0)(3,1)(4,1)
 array represntation                                      array representation
6 [F F F F # F F F]                                      6 [F F F F F F F F]
5 [F F F # # # F F]                                      5 [F F F F F F F F]
4 [F F # # # # # F]                                      4 [F F F F F F F F]
3 [F # # # # # F F]                                      3 [F F F F F F F F]
2 [F F # # # F F F]                                      2 [F F F F F F F F]
1 [F F F # F F F F]                                      1 [F F F # # F F F]
0 [F F F F F F F F]                                      0 [F F F # # F F F]
   0 1 2 3 4 5 6 7                                          0 1 2 3 4 5 6 7 
```

在上述情况下 (3,1) 具有相同的值，因此可以发现它们相交。
类似的表示可以用来检查三角形是否相交。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-12T11:29:15.643

我将勾勒出答案。

1.  旋转两个矩形，使一个与 x 轴对齐
2.  然后，您可以计算出边缘的公式 (y=mx+c)
3.  您还将知道另一个矩形的边的公式
4.  看看有没有相交。

可以使用先前设置的链接执行旋转。

**编辑**

忘记平移 - 移动一个矩形以将 0,0 作为一个坐标。

# json - Jackson 与 JAXB - 抽象类型实例化

> ID：12386819
> 
> 赞同：3
> 
> 时间：2012-09-12T11:10:19.280
> 
> 标签：json, jaxb, jackson

我在使用 JAXB 注释的杰克逊的 ObjectMapper 时遇到问题。具体来说，我正在收集带有接口通用信息的集合，虽然我可以反序列化来自 XML 的输入，但对于 Jackson（使用 JAXB 内省）来说这是不可能的。也许我只是缺少一些配置属性或 JAXB 注释？问题是“抽象类型只能用额外的类型信息来实例化”，我认为带有类型信息的@XmlElementRef（或@XmlElement）可以解决这个问题，但显然它没有。

请注意，如果可能，我只想保留 JAXB 注释。例如，使用@JsonTypeInfo 或@JsonDeserialize 将是最后要做的事情。

IEntry.java：

```
@XmlSeeAlso(Entry.class)
public interface IEntry {
    String getValue();
} 
```

入口.java：

```
@XmlRootElement(name = "entry")
public class Entry implements IEntry {

    @XmlElement(name = "value")
    String value;

    public Entry() {
    }

    public Entry(String value) {
        this.value = value;
    }

    public String getValue() {
        return value;
    }
} 
```

聚合器.java：

```
@XmlRootElement(name = "aggregator")
public class Aggregator {

    @XmlElementRef(type = Entry.class)
    private Set<IEntry> entries;

    public Aggregator() {
    }

    public Aggregator(Set<IEntry> entries) {
        this.entries = entries;
    }

    public Set<IEntry> getEntries() {
        return entries;
    }
} 
```

测试方法：

```
@Test
    public void testSerialization() throws Exception {
        ObjectMapper om = new ObjectMapper();
        AnnotationIntrospector intr = new JaxbAnnotationIntrospector();
        om.getDeserializationConfig().withAnnotationIntrospector(intr);

        String json = "{\"entries\":[{\"value\":\"X\"},{\"value\":\"Y\"},{\"value\":\"Z\"}]}\";\n}";
        Aggregator agr = om.readValue(json, Aggregator.class);
    } 
```

感谢所有回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:27:45.160

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

我不确定杰克逊是否支持这个用例，但你似乎使用`@XmlElementRef`不正确。当您使用`@XmlElementRef`与类关联的根元素名称时，用于确定要实例化的实例。如果您的示例节点与注释`entries`不匹配。`@XmlRootElement(name="entry")`

您可以尝试以下选项之一（它们都适用于 MOXy 的 JSON 绑定，请参阅： [http](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html) ://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html ）：

**`@XMLRootElement`选项1 - 更改`Entry`**

```
@XmlRootElement(name = "entries")
public class Entry implements IEntry {

    @XmlElement(name = "value")
    String value;

    public Entry() {
    }

    public Entry(String value) {
        this.value = value;
    }

    public String getValue() {
        return value;
    }
} 
```

**选项 #2 - 更改 JSON 文档**

```
{"entry":[{"value":"X"},{"value":"Y"},{"value":"Z"}]}} 
```

**选项 #3 - 使用`@XMLElement`而不是`@XMLElementRef`**

如果您使用`@XmlElement`注释，您可以在字段/属性上指定节点名称应该是什么，而不是依赖`@XmlRootElement`注释。此外，如果您注释应该`@XmlAccessorType(XmlAccessType.FIELD)`在类型级别指定的字段。

```
import java.util.Set;
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "aggregator")
@XmlAccessorType(XmlAccessType.FIELD)
public class Aggregator {

    @XmlElement(type = Entry.class)
    private Set<IEntry> entries;

    public Aggregator() {
    }

    public Aggregator(Set<IEntry> entries) {
        this.entries = entries;
    }

    public Set<IEntry> getEntries() {
        return entries;
    }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html)
*   [http://blog.bdoughan.com/2011/05/jaxb-and-interface-fronted-models.html](http://blog.bdoughan.com/2011/05/jaxb-and-interface-fronted-models.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T12:44:15.217

```
import org.codehaus.jackson.map.annotate.JsonDeserialize;  

@JsonDeserialize(as = Entry.class)
public interface IEntry {
   String getValue();
} 
```

# jquery - Jquery：计算多个选择元素的值

> ID：12386825
> 
> 赞同：1
> 
> 时间：2012-09-12T11:10:47.477
> 
> 标签：jquery, gridview, count

html中表格（mygrid）的代码：

```
<table cellspacing="0" border="1" style="border-collapse:collapse;" id="mygrid" 
                                                        rules="all">
        <tbody>
        <tr>
            <th scope="col">Nr de ord</th>
            <th scope="col" class="hideGridColumn">&nbsp;</th>
            <th scope="col" class="hideGridColumn">StudentId</th>
            <th scope="col">Numele Prenuele</th>
            <th scope="col">
                           <span id="mondayText">Luni<br></span>
            </th>
            <th scope="col">
                           <span id="thuesdayText">Marti<br></span>
                           <span id="thuesday">04.09.2012</span>
            </th>
            <th scope="col">
                           <span id="wednesdayText">Miercuri<br></span>
                           <span id="wednesday">05.09.2012</span>
            </th>
            <th scope="col">
                           <span id="thursdayText">Joi<br></span>
                           <span id="thursday">06.09.2012</span>
            </th>
            <th scope="col">
                           <span id="fridayText">Vineri<br></span>
                           <span id="friday">07.09.2012</span>
            </th>
            <th scope="col">
                           <span id="saturdayText">Simbata<br></span>
                           <span id="saturday">08.09.2012</span>
            </th>
            <th scope="col">
                           <span id="absM">Absente motivate</span>
            </th>
            <th scope="col">
                          <span id="absN">Absente nemotivate</span>
            </th>
        </tr>
        <tr>
            <td>1</td>
            <td class="hideGridColumn">9201001121311</td>
            <td class="hideGridColumn">120001</td>
            <td>asd asd asd</td>
            <td><select class="ddlJ" id="a1_0" 
                          name="ctl00$contentbody$mygrid$ctl02$a1">
                <option value="a">a</option>
                <option value="m" selected="selected">m</option>
                <option value="n">n</option>
                </select>
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>
                <span id="totalM">1</span>
            </td>
            <td>
                <span id="totalN">0</span>
            </td>
        </tr>
        <tr>
            <td>2</td>
            <td class="hideGridColumn">9201001121311</td>
            <td class="hideGridColumn">120002</td>
            <td>test1  </td>
            <td><select class="ddlJ" id="a1_1" 
                          name="ctl00$contentbody$mygrid$ctl03$a1">
                <option value="a">a</option>
                <option value="m">m</option>
                <option value="n" selected="selected">n</option>
                </select>
            </td>
            <td></td>
            <td><select class="ddlJ" id="a111_1" 
                            name="ctl00$contentbody$mygrid$ctl03$a111">
                <option value="a">a</option>
                <option value="m" selected="selected">m</option>
                <option value="n">n</option>
                </select>
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td><span id="totalM">1</span>
            </td>
            <td><span id="totalN">0</span>
            </td>
        </tr>
        <tr>
            <td>3</td>
            <td class="hideGridColumn">9201001121311</td>
            <td class="hideGridColumn">120003</td>
            <td>test3  </td>
            <td><select class="ddlJ" id="a1_2" 
                            name="ctl00$contentbody$mygrid$ctl04$a1">
                <option value="a">a</option>
                <option value="m" selected="selected">m</option>
                <option value="n">n</option>
                </select>
            </td>
            <td></td>
            <td><select class="ddlJ" id="a111_2" 
                          name="ctl00$contentbody$mygrid$ctl04$a111">
                <option value="a">a</option>
                <option value="m">m</option>
                <option value="n" selected="selected">n</option>
                </select>
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td><span id="totalM">0</span>
            </td>
            <td><span id="totalN">1</span>
            </td>
        </tr>
    </tbody></table> 
```

加载此表（网格）时，我有一个函数可以计算 selectedIndex=1 或 slectedIndex=2 的数量。

```
var collection = $('select.ddlJ');
console.log(collection);
            $.each(collection, function(key,value)

            {
                    console.log("key:"+key+"si value"+value);

                     var p = $(value).parent().parent();
                     p.find('td:last').prev().find('span').html(
                     p.find($(value)).filter(function () {
                     return $.trim($(value).get(0).selectedIndex) == 1;
                     }).length
                    );

                       p.find('td:last span').html(
                       p.find($(value)).filter(function () {
                       return $.trim($(value).get(0).selectedIndex) == 2;
                       }).length
                     );

      }); 
```

它有效，但计算错误，如果一行中有多个选择元素，则结果只是最后一个选择元素的一个数字，如下图所示：

![在此处输入图像描述](../Images/2b5b0eae106e5fecf301c019552a215b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:16:45.860

我猜你想对行中的所有选择元素求和。只是稍微不同地看待问题，循环遍历行而不是组合框：

```
$("tr").each(函数(i, tr) {
  $(".totalM", tr).text($("select.ddlJ", tr).filter(function() { return this.value == "m"; }).length);
  $(".totalN", tr).text($("select.ddlJ", tr).filter(function() { return this.value == "n"; }).length);
});

```

顺便说一句，您**必须**更改`totalM`和`totalN`类（因为 ID 在 HTML 页面中是唯一的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T11:59:26.123

或者你可以测试一下：

```
var row = $('tr').not(':first');

$.each(row, function(key,value){
      var ind = '';
      $(value).find('select option:selected').each(function(){
          ind += $(this).index() + ' for ' + $(this).text() + ' ';
      });
    console.log('The index selected for current row are: ' +ind);
}); 
```

* * *

编辑：

要更改跨度`totalM`和`totalN`文本，请更改`id="totalM"`和`id="totalN"`到`class="totalM"`和`class="totalN"`（id 是唯一的;-)）

这是一种方式：

```
var row = $('tr').not(':first');

$.each(row, function(key,value){
       var m = 0;
       var n = 0;
       $(value).find('select option:selected').each(function(){
           if($(this).index() == 1) {
              m += 1;
           }else if($(this).index() == 2){
              n += 1;
           }              
       });
       $(value).find('.totalM').text(m);
       $(value).find('.totalN').text(n);
}); 
```

但是您可以将上述索引存储在一个数组中并使用它来填充总数，或者以其他方式存储文本并查看有多少 m 或 n，等等...

[FIDDLE](http://jsfiddle.net/TzSZc/)示例

# vb.net - DataTable：如何使用行名和列名获取项目值？(五)

> ID：12386827
> 
> 赞同：34
> 
> 时间：2012-09-12T11:10:58.080
> 
> 标签：vb.net, datatable

我有一个简单`DataTable`的列，其中一列包含唯一值。例如：

```
ColumnName1   ColumnName2
value1        35
value2        44
value3        10 
```

因为我知道值 1、2 和 3 总是彼此不同，所以我想仅使用*ColumnName2*和ColumnName1*的值之一来获取该表的值*。例如：

```
searchedValue = DataTable.Rows("value3").Item("ColumnName2) 
'result would be 10 
```

我尝试了以下示例未成功：

*   [使用 DataTable.Select 方法](https://stackoverflow.com/questions/4525550/how-to-know-the-row-index-from-datatable-object)：返回一个行数组，但我只需要一个

*   [使用 DataTable.Rows.IndexOf 方法](http://forums.asp.net/t/1305442.aspx/1)：如果我理解得很好，我需要提供整行内容才能使用此方法找到它。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-12T11:17:13.770

```
Dim rows() AS DataRow = DataTable.Select("ColumnName1 = 'value3'")
If rows.Count > 0 Then
     searchedValue = rows(0).Item("ColumnName2") 
End If 
```

与`FirstOrDefault`：

```
Dim row AS DataRow = DataTable.Select("ColumnName1 = 'value3'").FirstOrDefault()
If Not row Is Nothing Then
     searchedValue = row.Item("ColumnName2") 
End If 
```

在 C# 中：

```
var row = DataTable.Select("ColumnName1 = 'value3'").FirstOrDefault();
if (row != null)
     searchedValue = row["ColumnName2"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T20:29:52.323

```
'Create a class to hold the pair...

        Public Class ColumnValue
            Public ColumnName As String
            Public ColumnValue As New Object
        End Class

    'Build the pair...

        For Each row In [YourDataTable].Rows

              For Each item As DataColumn In row.Table.Columns
                Dim rowValue As New ColumnValue
                rowValue.ColumnName = item.Caption
                rowValue.ColumnValue = row.item(item.Ordinal)
                RowValues.Add(rowValue)
                rowValue = Nothing
              Next

        ' Now you can grab the value by the column name...

        Dim results = (From p In RowValues Where p.ColumnName = "MyColumn" Select  p.ColumnValue).FirstOrDefault    

        Next 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-09-06T06:04:47.710

```
For i = 0 To dt.Rows.Count - 1

    ListV.Items.Add(dt.Rows(i).Item("STU_NUMBER").ToString)
    ListV.Items(i).SubItems.Add(dt.Rows(i).Item("FNAME").ToString & " " & dt.Rows(i).Item("MI").ToString & ". " & dt.Rows(i).Item("LNAME").ToString)
    ListV.Items(i).SubItems.Add(dt.Rows(i).Item("SEX").ToString)

Next 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-09-12T11:22:44.640

尝试：

```
DataTable.Rows[RowNo].ItemArray[columnIndex].ToString() 
```

（这是 C# 代码。将其更改为 VB 等效代码）

# java - 便携式运行时？

> ID：12386828
> 
> 赞同：0
> 
> 时间：2012-09-12T11:11:00.527
> 
> 标签：java, .net, ruby, runtime

## 介绍

Java 最酷的事情之一是 JRE 占用空间非常小，并且具有高度可移植性，因此我可以轻松地在几乎任何平台上运行我的应用程序，而无需集成到操作系统链接库或 C 中： \Windows\System 等 - 也就是说，JRE 可以从文件夹中运行。

.NET 在这方面遇到了困难——尤其是在大小方面。Mono 正在成为一种流行的选择，但操作系统需要的依赖项似乎太多了。

## 问题

他们是否有任何其他具有我上面提到的类似功能的运行时间/语言（Perl、Ruby）？

再次 (1) 可移植性 (2) 多操作系统支持（AIX、Solaris、Linux） (3) 通过网络重新分发的大小 (4) 易于安装和部署。

## 目标

我正在寻找一种轻量级的运行时或语言，可以像 JRE 一样轻松地部署在服务器上。例如：如果我必须使用 Python，那将需要在 OS 等上安装添加的库。Perl 将是一个很好的例子，在大多数 Linux 上都可以找到，但版本和获取第三方库的无休止的麻烦。

## 回答！！！！

这是关闭的，因为它被认为是不相关的。但是对于那些可能会有所帮助的人来说，仅供参考；在 JRE 之外，LUA 可能是最便携的，不需要依赖和编译或系统集成。Ruby 并不完全存在，尽管它在大多数 Linux（不是 BSD）上是默认的，但是 BSD 带有 Lua :) 最后，Jruby 不实用，因为它可能使用 JRE (20MB)，然后是 JRuby 本身 (16MB)。

对于考虑跨多种“操作系统”进行部署并且足够便携以在不消耗过多带宽的情况下进行分发的人的一些想法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:18:38.520

JVM 和 .NET 只是解释字节码的虚拟机。在它们之上还有很多语言。

**虚拟机**

*   爪哇
*   时髦的
*   斯卡拉
*   JRuby
*   杰通
*   JavaScript (犀牛)
*   Clojure
*   等等

**。网**

*   C＃
*   VB.NET
*   内梅尔
*   ##
*   嘘
*   铁红宝石
*   铁蟒
*   等等

还有另一种可以跨平台运行的VM 和脚本语言，即Perl 6 VM 的Parrot 或X 平台脚本语言的Lua（即WoW 使用它）。还有像 LLVM（低级虚拟机）这样的项目，但这仍然有点依赖于平台。

# multithreading - 线程同步

> ID：12386831
> 
> 赞同：0
> 
> 时间：2012-09-12T11:11:18.203
> 
> 标签：multithreading, pthreads

我有一个 .cpp 文件，其中除了 main() 之外，还定义了另外两个函数 - func1 和 func2。func2 是一个线程的函数，调用方式如下。

```
 void func1()
  {
       //code here

    pthread_create(&thread1, NULL, func2, (void*)arg);
  } 
```

因此，在退出函数 func1 之前调用 func2。现在，我想要的是**，一旦 func2 退出，应该自动调用 func1**。请注意，要实现这一点，我不能简单地在 func2 结束时调用 func1，因为这意味着在 func2 退出之前调用 func1。此外，我不能使用在线程退出之前调用的处理程序（通过使用 pthread_cleanup_push）然后在该处理程序中调用 func1，因为该处理程序将在线程（即 func2）终止之前执行。

# xml - 在apache camel的Xpath表达式中使用子字符串：错误

> ID：12386832
> 
> 赞同：0
> 
> 时间：2012-09-12T11:11:23.633
> 
> 标签：xml, xpath, substring, apache-camel

我想整理 SOAP 标头的某些节点以在 apache camel 中执行粘性负载平衡。为此，我正在使用 xpath，我的 xpath 表达式看起来像这样：

```
.loadBalance().sticky(xpath("substring(string(/*[local-name()='Envelope']/*[local-name()='Header']/*[local-name()='ReplyTo']/*[local-name()='ReferenceParameters']/*[local-name()='ServiceGroupId']/text()), 10)"))
.to(BE1,BE2); 
```

但是当我执行它时，我得到一个错误：`org.apache.camel.builder.xml.InvalidXPathExpression: Invalid xpath:`

所以我认为我的 xpath 表达式应该有问题，因此我创建了一个小型 java 程序，它会做同样的事情并执行相同的操作。使用 java，我从我的 xml 中获得了所需的元素。但是我在 apache camel 中遇到了这个错误。

我在这里做错什么了吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:12:44.287

我让它工作了！

代码如下：

```
.loadBalance().sticky(env.xpath("substring(string(/soapenv:Envelope/soapenv:Header/wsa:ReplyTo/wsa:ReferenceParameters/axis2:Serv‌​iceGroupId/text()), 10)", String.class)) 
          .to(BE1,BE2); 
```

其中 env 是我的命名空间，BE1 和 BE2 是后端服务器！

# ios - 单击操作表中的重叠取消按钮时，底部文本区域将获得焦点

> ID：12386835
> 
> 赞同：0
> 
> 时间：2012-09-12T11:11:40.490
> 
> 标签：ios, focus, textarea, touch, extjs

在我的 sencha touch 2 应用程序中，我有一个文本区域停靠在底部。我在同一页面上也有一个操作表。当动作表出现时，动作表中的“取消按钮”刚好重叠在文本区域的顶部。因此，每次单击“取消按钮”时，都会导致下方的文本区域收到“焦点”以调出软键盘。这很烦人……有人有解决这个问题的方法吗？

问候，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:33:49.430

您能否尝试以下代码行 -

```
Ext.getCmp('textAreaId').blur(); 
```

# mysql - MySQL双向关系和镜像外键的问题

> ID：12386842
> 
> 赞同：0
> 
> 时间：2012-09-12T11:12:21.270
> 
> 标签：mysql, replication, bidirectional

我必须创建两个具有双向关系的表，如下图所示。 ![在此处输入图像描述](../Images/78146323405b11733b0cea6f07fec9c5.png) 但它总是给出一个错误。我正在使用以下查询来创建表。

```
CREATE TABLE IF NOT EXISTS `rpt_operation` (
  `op_id` int(45) NOT NULL,
  `component` int(45) NOT NULL,
  `ideal_time` time NOT NULL,
  `handling_time` time NOT NULL,
  PRIMARY KEY (`op_id`),

  INDEX (component),
  FOREIGN KEY (component)
  REFERENCES rpt_component(comp_id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `rpt_component` (
  `comp_id` int(45) NOT NULL,
  `lot_code` int(60) NOT NULL,
  `lot_color` varchar(60) NOT NULL,
  `drawing_num` int(60) NOT NULL,
  `revision_num` int(60) NOT NULL,
  `operation` int(45) NOT NULL,
  PRIMARY KEY (`comp_id`),

  INDEX (operation),
  FOREIGN KEY (operation)
  REFERENCES rpt_operation(op_id)

) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

错误出现在`component int(45) NOT NULL`rpt_operation 表的行中。任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:26:28.120

你的表结构是不可能的。您不能插入任何记录，因为外键`rpt_operation`没有记录，也不能插入任何记录，因为外键没有记录。`rpt_component``component``rpt_component``rpt_operation``operation`

如果您使这些字段中的一个或两个都可以为空，则表结构仍然是递归的，因此您必须手动添加其中一个外键，例如：

```
ALTER TABLE rpt_operation
  ADD CONSTRAINT
  FOREIGN KEY (component)
  REFERENCES rpt_component(comp_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:46:44.097

我建议您使用链接表来解决此问题。这不是一个可行的解决方案，需要变通方法。

# javascript - 显示时间的脚本

> ID：12386847
> 
> 赞同：-2
> 
> 时间：2012-09-12T11:12:29.060
> 
> 标签：javascript

我想用javascript设计代码来识别我的当地时间。而关于显示美国、英国等国家/地区的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:16:07.017

也许您应该考虑使用 API 而不是编写它，这是一个很好的。 [https://github.com/mde/timezone-js](https://github.com/mde/timezone-js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:25:18.957

创建一个 Javascript 日期对象并使用`toLocaleTimeString` [MDN 日期参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString)

# jquery - 如何使用highchart在散点类型图表中动态添加系列？

> ID：12386850
> 
> 赞同：0
> 
> 时间：2012-09-12T11:12:41.537
> 
> 标签：jquery, highcharts

我已经使用 highcharts [Scatter Chart](http://jsfiddle.net/G9q8q/1/)创建了一个散点图。现在我想添加多个/动态系列，即。产品和系列名称（产品名称）的值。还应从数组中获取数据。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:39:16.923

你有没有通过API？您正在寻找[chart.addSeries()](http://api.highcharts.com/highstock#Chart.addSeries%28%29)
[jsFiddle 在按钮单击时添加系列](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/members/chart-addseries/)

# jquery - jQuery UI 滑块向前迈进了一步

> ID：12386852
> 
> 赞同：0
> 
> 时间：2012-09-12T11:12:55.263
> 
> 标签：jquery, jquery-ui, slider

我对 jQuery UI 有疑问
这里是示例： http: [//jsfiddle.net/zFsZV/7/](http://jsfiddle.net/zFsZV/7/) 当您移动滑块时，黑色的“进度条”移动完全相同（它们具有相同的宽度），但是当您向后移动滑块时，黑色 div 向前迈进了一步。有没有可能以某种方式修复它？我想像滑块一样在同一级别上有黑色 div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:57:26.037

我能看到如何让它工作的唯一方法是在javascript中设置一个超时，它根据`.ui-slider-range`宽度更新位置。

[**看看这个小提琴**](http://jsfiddle.net/zFsZV/38/)。

```
$(document).ready(function() {

    $('#slider').slider({
        range: "min",
        value: 1,
        min: 1,
        max: 10,
        step: 1,
        slide: function(event, ui){   
            console.log(ui);
            console.log(ui.handle.attributes[2].value);
            setTimeout(setPosition, 10);            
        }
    })
    $('#slider').slider('value');

});
function setPosition(){
    $('.color').css('width', $('.ui-slider-range').width());
} 
```

通过检查您可以在`slide`事件中访问的 ui 对象，元素的位置似乎总是在事件发生后设置，这意味着您实际上无法直接设置正确的宽度/左侧位置。但是，如果您查看我的示例，则设置超时意味着设置了正确的位置。

# android - phonegap - 允许在应用未运行时更新应用数据库

> ID：12386853
> 
> 赞同：1
> 
> 时间：2012-09-12T11:12:55.793
> 
> 标签：android, cordova

我正在 phonegap 中编写一个 Web 应用程序，并希望使用我的服务器中的最新数据更新应用程序数据库，但将此作为后台任务执行，无需用户交互。

Google Play 商店会这样做，因为它会在我有 wifi 连接时自动向我显示更新，而无需我打开 Play 商店应用程序。

任何关于如何实现这一目标的想法或帮助表示赞赏。

米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:18:15.930

我认为您想使用[适用于 Android 的 Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)

它允许您从服务器向您的手机发送消息，即使应用程序处于后台也是如此。如果您不想实现触发消息的服务器应用程序，您可以将后台任务作为[服务](http://developer.android.com/reference/android/app/Service.html)运行，但需要在手机启动后至少启动应用程序 1 次来初始化它。此外，它在运行过程中会消耗电池电量。我会说 Google Cloud Messaging 是一个更经典的解决方案。

# regex - .htaccess urlrewrite 删除号码

> ID：12386854
> 
> 赞同：0
> 
> 时间：2012-09-12T11:12:58.057
> 
> 标签：regex, .htaccess, url-rewriting

我需要编写一个正则表达式来从 URL 的末尾删除一个大数字。

这里有些例子：

```
/uk/futsal-cosmos-10-panel-match-football-white-purple-24100787502654/
/uk/escape-t400-individual-rubber-dumbbells-up-to-50kg-2289101502719397/
/uk/golds-gym-standard-hammertone-plate-25-4mm-1-25kg-x-12-1736702088365877/ 
```

所以基本上我需要删除最后的数字，包括破折号。

在第三个例子中，这应该变成：

```
/uk/golds-gym-standard-hammertone-plate-25-4mm-1-25kg-x-12/ 
```

即 12 应该保留。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:29:00.603

如果最后一个数字总是以 - 开头，试试这个

```
<IfModule mod_rewrite.c>
   RewriteEngine on

   RewriteRule ^(.*)-[0-9]+/$ /$1/ [L,QSA]
</IfModule> 
```

如果需要 301 重定向，请将 [L,QSA] 替换为 [R=301,L]

破折号后的 10 位数字

```
RewriteRule ^(.*)-[0-9]{10}/$ /$1/ [L,QSA] 
```

# visual-studio - 面部识别算法 Windows 形式到云上的 Web 表面 API？

> ID：12386859
> 
> 赞同：1
> 
> 时间：2012-09-12T11:13:17.010
> 
> 标签：visual-studio, cloud, emgucv, face-recognition

我已经使用 VC# 10 和 Emgucv 开发了一堆关于面部识别的算法，现在我应该通过 Web API 将其导出到云端。我真的不想重写整个代码，我希望有一种非常灵活的方法可以将我开发的所有模块合并到一个 Web api 中以部署在 azure 上。我尝试将它们转换为 dll 并在 xbap 下运行它们。这是我要避免的路线。如果您能回复我的询问，我们将不胜感激。

# jquery - 包含指定数字或更高数字的任何 div id 的 jQuery 选择器

> ID：12386862
> 
> 赞同：2
> 
> 时间：2012-09-12T11:13:21.313
> 
> 标签：jquery, html

我有一个问题，我无法弄清楚如何解决！如果您有任何想法，请协助:)

在我的 DOM 中有一堆对象，如下所示：

```
<div id=Line1>1</div>
<div id=Line2>2</div>
<div id=Line3>3</div>
<div id=Line4>4</div>
<div id=Line5>5</div>
<div id=Line6>6</div>
<div id=Line7>7</div>
<div id=Line8>8</div>
<div id=Line9>9</div>
<div id=Line10>10</div> 
```

我需要得到一个包含任何 div 的 jQuery 对象，它是 Line6-10（即包含 6 或更高）......我试过玩弄 .gt() 但无济于事。

帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T11:23:31.977

选择`<div>`以 'Line' 开头的 id，然后将匹配集减少到第 5 个之后的匹配集（索引从 0 开始）：

```
$('div[id^=Line]:gt(4)') 
```

[**演示**](http://jsfiddle.net/FpadN/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T11:18:20.867

这对于 jQuery 选择器是不可能的。最好的方法是`slice`方法：

```
$('div').slice(5); //select the sixth element and those after it 
```

或者，如果您必须进行计算（例如，如果不是所有元素都存在或它们不按顺序排列），您可以执行以下操作：

```
$('div').filter(function() {
    return (+this.id.slice(4) >= 6);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T11:20:06.683

您可以使用[**过滤器（）**](http://api.jquery.com/filter/)

```
var divs = $("div[id^='Line']").filter(function(){
    var text = "Line";
    var value = this.id.split(text)[1];

    return (value > 5);
}); 
```

### [演示](http://jsfiddle.net/4Zpcj/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T11:15:42.017

如果你特别`Line6`想`Line10`，你可以使用`,`运算符：

```
var q = $('#Line6,#Line7,#Line8,#Line9,#Line10'); 
```

您可以动态创建选择器，即项目 from `x`to `y`：

```
var s = [];
for (var i = x; i <= y; i++) s.push('#Line' + i);
var q = $(s.join(',')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T11:21:13.303

您错过了 ID 属性的引号。

```
<div id=Line1>1</div>
      --^ 
```

尝试使用`filter`方法。

```
$('div[id^="line"]').filter(function(){
   var = this.id.match(/\d+/g);
   return (id >= 6 && id <= 10)  
}) 
```

[http://jsfiddle.net/jWY3Q/](http://jsfiddle.net/jWY3Q/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T11:22:58.240

试试这个

**$("div[id^='Line5']").nextAll("div[id^='Line']")**

关于[nextAll() 的API](http://api.jquery.com/nextAll/)

关于属性的 API[以](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T11:39:34.160

我使用[Attribute Starts With Selector](http://api.jquery.com/attribute-starts-with-selector/)和[.filter()](http://api.jquery.com/filter/)的解决方案。

```
$(function() {
   $elems = $("div[id^='Line']");
    $elems.filter(function() {
        var matches = this.id.match(/\d+/);
        var numb = parseInt(matches[0]);
        return ((numb > 5) && (numb <= 10));                
    });
}); 
```

jsFiddle[在这里](http://jsfiddle.net/KzkDF/3/)。

# matlab - 在 Matlab 中添加向量

> ID：12386864
> 
> 赞同：0
> 
> 时间：2012-09-12T11:13:28.413
> 
> 标签：matlab, add

我是 Matlab 的新手。我有 4 个不同的向量，我需要像这样添加它们：

mod1+lan1= x1 mod2+lan2= x2

但是正如您在代码中看到的那样，数字是不同的。

```
mod1= [413 443 467 487  531 547 648 666 677 747 859 867 905 936 1388 1631 2121];
mod2= [mout8_c mout9_c mout3_c mout10_c mout11_c mout12_c mout1_c mout13_c mout14_c mout15_c mout2_c mout16_c mout17_c mout18_c mout26_c mout6_c mout7_c]

lan1= [485 560 660 815 1650 2215];
lan2=[out1_c out2_c out3_c out4_c out5_c out7_c] 
```

所以，我为 x1 所做的是：

```
x=[mod1 lan1];
x1= sort(x); 
```

但问题出在 y 上，因为我需要位置相同（例如，在位置 413=mout8_c 上），但数字完全不同。

总结一下（如果你看这张图可能会更好）。我有这些点，我需要按每个点的顺序添加它们。 [http://img88.imageshack.us/img88/4604/16620372.jpg](http://img88.imageshack.us/img88/4604/16620372.jpg)

非常感谢提前和问候，

艾玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:35:22.533

您不添加这些向量，而是将它们连接起来。您不能添加不同大小的向量。

在 x 上使用 sort 时，可以获得置换向量。获取它并在 y 上使用它，而不是单独排序

```
temp = [mod1 lan1];
[x1, perm] = sort(temp);
temp = [mod2 lan2];
x2 = temp(perm); 
```

我使用 x2 而不是 y - 这是您在问题开始时使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:53:19.213

最后，我使用了该代码：

```
mod1= [413 443 467 487  531 547 648 666 677 747 859 867 905 936 1388 1631 2121]';
lan1= [485 560 660 815 1650 2215]';
mod2 = { 'mout8_c'    'mout9_c'    'mout3_c'    'mout10_c'    'mout11_c'    'mout12_c' 'mout1_c'    'mout13_c'    'mout14_c'    'mout15_c' 'mout2_c'    'mout16_c'    'mout17_c'    'mout18_c'    'mout26_c'    'mout6_c'    'mout7_c'}';
lan2 = {'out1_c'    'out2_c'    'out3_c'    'out4_c'    'out5_c'    'out7_c'}';
[x1,i1] = sort([mod1;lan1]);
y = [mod2;lan2];
out = y(i1); 
```

非常感谢大家！

# android - android片段应用程序中的活动流序列

> ID：12386870
> 
> 赞同：0
> 
> 时间：2012-09-12T11:13:59.273
> 
> 标签：android, android-fragments, android-activity

以下是关于我的应用的一些事实，然后是一个问题

我的应用程序有两个片段。

我的应用程序在首次启动时会创建某些文件结构和文档，这需要时间，因此我在创建文件结构时使用`AsyncTask`类方法来显示`ProgressDialog`。这是在`onCreate`我的 MainActivity 的方法中完成的，如下所示：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        progress = new ProgressDialog(this);
        progress.setMessage("Loading...");

        File testFile = new File("/mnt/sdcard/myNewFolder");
        if (!testFile.exists()) {
            new MyTask(progress).execute();
            setContentView(R.layout.activity_main);
        } else
            setContentView(R.layout.activity_main);
    } 
```

问题是`onActivityCreated`我`Fragment`的一个方法在完成之前开始运行`new MyTask(progress).execute();`。这会导致错误和问题。

为什么`onActivityCreated`我的其中一个方法`Fragment`在之前运行
`new MyTask(progress).execute();`？？？

请不要假设有一些我没有考虑到的愚蠢错误 xx

这是我的 MyTask 课程

```
public class MyTask extends AsyncTask<Void, Void, Void> {
    public MyTask(ProgressDialog progress) {
        // this.progress = progress;
    }

    public void onPreExecute() {
        progress.show();
    }

    public void onPostExecute(Void unused) {
        progress.dismiss();
    }

    @Override
    protected Void doInBackground(Void... params) {
        CreateFileStructure();
        return null;
    }
} 
```

我需要在其他任何事情发生之前创建该文件结构——这就是我使用它的原因`ProgressDialog`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:23:54.707

如果您看到片段的生命周期，片段的视图将在包含片段的活动的 onCreate 方法上实例化。

因此，您会收到该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:01:00.060

这是对我有用的代码 - 在`ProgressDialog`创建文件结构和文件时显示对话框，之后发生其他一切（片段等）。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        progress = new ProgressDialog(this);
        progress.setMessage("Loading...");

        File testFile = new File("/mnt/sdcard/myNewFolder");
        if (!testFile.exists())
            new MyTask(progress).execute();
        else
            setContentView(R.layout.activity_main);
    }

    public class MyTask extends AsyncTask<Void, Void, Void> {
        public MyTask(ProgressDialog progress) {
            // this.progress = progress;
        }

        public void onPreExecute() {
            progress.show();
        }

        public void onPostExecute(Void unused) {

            progress.dismiss();
            setContentView(R.layout.activity_main);
        }

        @Override
        protected Void doInBackground(Void... params) {
            CreateFileStructure();
            return null;
        }
    } 
```

# string - 将字段值与字符串连接 - Lotus Notes

> ID：12386876
> 
> 赞同：0
> 
> 时间：2012-09-12T11:14:27.167
> 
> 标签：string, field, concatenation, lotus-notes

我有一个基于名为 text_TTArs 的字段值的公式（数据/时间字段-> 仅显示时间，例如： 15:31 ）。

公式是这样的：@Hour(text_TTArs)*60+@Minute(text_TTArs)。这将返回一个数字。

我想要做的是出现在这个数字之后：%。我试过了

(@Hour(text_TTArs)*60+@Minute(text_TTArs))&"%" 但它不起作用。我试过 + 而不是 & 但它是一样的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:34:10.337

您需要先将其转换为字符串：

```
@Text(@Hour(text_TTArs)*60+@Minute(text_TTArs)) + "%" 
```

（在@Formulas 中始终使用“+”连接。“&”是逻辑“AND”的符号）

# c# - 我需要使用和分配锁吗？

> ID：12386885
> 
> 赞同：1
> 
> 时间：2012-09-12T11:15:19.753
> 
> 标签：c#, .net, multithreading, linq

这可能是一个愚蠢的问题，但我是否需要使用和分配锁，或者我可以简单地返回结果。

例如：

我有一个私有帮助方法，它返回一个 IEnumerable 文件名列表。它使用锁来确保该方法在迭代 m_transfers 集合时是线程安全的。

需要任务吗...

```
IEnumerable<String> updated;
lock (m_transfers.Lock)
{
    updated = m_transfers.Values.Where(transfer => transfer.Updated)
                         .Select(transfer => transfer.Filename);
}
return updated; 
```

或者我可以做

```
lock (m_transfers.Lock)
{
    return updated = m_transfers.Values.Where(transfer => transfer.Updated)
                            .Select(transfer => transfer.Filename);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:18:26.083

不，您不需要添加额外的变量；无论哪种方式，语义都是相同的，因为在任何一种情况下，我们只有在放弃锁后才*真正返回值。*

由于该变量没有任何用途，因此我将其删除并使用第二个版本-尽管*从技术上讲*，编译器实际上还是将其放回原处（a`lock`涉及`try`/ `finally`，并且在 IL 级别，您不能`ret`从 a `try`;所以*编译器*实际上像你的第一个版本一样编写它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T11:18:17.510

就像在 , 的情况下您不必这样做一样`try`，`using`您不必在此处执行此操作。编译器在函数退出时为您放置所需的代码位。

检查此以获取更多信息：[监视器与锁定](https://stackoverflow.com/questions/4978850/monitor-vs-lock)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:18:05.937

两者都是有效的。
一旦你返回执行就会从块中出来。

# debugging - 调试 FiddlerScript

> ID：12386886
> 
> 赞同：6
> 
> 时间：2012-09-12T11:15:23.193
> 
> 标签：debugging, fiddler, jscript.net

有谁知道如何通过 FiddlerScript 进行调试？

我尝试了看似显而易见的事情：

1.  在 Fiddler CustomRules.js 中，插入以下代码：

    ```
    if (Debugger.IsAttached) 
        Debugger.Break(); 
    ```

（也在文件顶部：import System.Diagnostics;）

1.  在 Visual Studio 2010 中打开 CustomRules.js 文件，然后在 Visual Studio 中执行 Attach to Debugger，选择 Fiddler 进程作为调试目标。

2.  浏览到一个网站。

这一半有效：当 Debugger.Break() 语句被命中时，Visual Studio 停止，但问题是，它向我显示的只是反汇编窗口 - 不是很有用！VS 似乎没有提供任何选项来连接 CustomRules.js 中的源代码。我*猜*问题可能是它需要一个 pdb 文件并且没有，但我不清楚如何提供一个。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-05T19:39:44.573

转到“规则”菜单->“自动断点”单击“请求之前”与单击状态栏中的断点按钮一次相同，并为所有请求设置断点。单击“After Responses”与第二次单击状态栏中的断点按钮执行相同的操作，并删除请求的断点并设置响应的断点。单击“禁用”与第三次单击状态栏中的断点按钮相同，并禁用响应的断点。

你也可以参考这个：[http ://www.mehdi-khalili.com/fiddler-in-action/part-2](http://www.mehdi-khalili.com/fiddler-in-action/part-2)

# android - 我想要一个简单的代码来为我的 android 应用程序项目播放 rtmp 流中的视频

> ID：12386892
> 
> 赞同：3
> 
> 时间：2012-09-12T11:15:32.390
> 
> 标签：android, video-streaming, red5, rtmp

我有关于通过 Android TV Box 进行视频点播的项目。我有问题，我找不到 RTMP 播放器的开源。有人可以帮助我或指导我有关 rtmp 播放器源代码的信息吗？

我使用 red5 为 android 2.2(froyo) 流式传输和构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:40:21.147

使用 RTSP

```
 public class PlayVideoRemote extends Activity
 {
private VideoView vView;
private String vSource;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{ 
    //sets the Bundle
    super.onCreate(savedInstanceState);
    //sets the context 
    setContentView(R.layout.main);

    //get the VideoView from the layout file
    vView = (VideoView)findViewById(R.id.vview);

    //use this to get touch events
    vView.requestFocus();

    //loads video from remote server
    //set the video path
    vSource ="rtsp://v6.cache1.c.youtube.com/CjYLENy73wIaLQnF4qJzpSt4nhMYESARFEIJbXYtZ29vZ2xlSARSBXdhdGNoYMDFmvL1wMysTQw=/0/0/0/video.3gp";
    //set the video URI, passing the vSource as a URI
    vView.setVideoURI(Uri.parse(vSource));

    //enable this if you want to enable video controllers, such as pause and forward
    vView.setMediaController(new MediaController(this));

    //plays the movie
    vView.start();
}
} 
```

对于 RTMP，请参阅此[将视频输入流转换为 RTMP](https://stackoverflow.com/questions/10123498/streaming-rtmp-stream-live-from-android-camera-to-fms-or-wowza-or-red5-convert)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:22:03.483

rtmp 实时流可以在嵌入 Flash 播放器的 Android webview 中播放。下面给出播放 rtmp 的完整源代码。

尽管您必须通过此网址 [http://www.adobe.com/devnet-apps/flashruntimes/certified-devices.html](http://www.adobe.com/devnet-apps/flashruntimes/certified-devices.html) 此处列出了支持闪存的设备。所以在这种支持闪存的设备中测试代码。

```
public class WebViewPlayer extends Activity {

    WebView webView;

    Utils utils;
    String bodyHtml;
    String rtmpUrl;
    String fileName;
    String htmlVideoEmbedCode ;

    String htmlPost = "</body></html>";
    String htmlPre = "<!DOCTYPE html>" 
            + "<html lang=\"en\">"
            + "<head><meta charset=\"utf-8\">" 
            + "</head>"
            + "<body style='margin:0; pading:0;"
            + " background-color: #71D5CA;'>";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.flash_player);
        RegisterActivities.registerActivity(this);

        utils = new Utils(this);

        if(! utils.isConnectionPossible()){

            utils.getMessageDialogBox("Alert", "The Device cannot connect to the internet."
                    + "Please make sure internet is available.", "OK",
            true)
            .show();

        }

        rtmpUrl = YOUR_RTMP_URL);
        fileName = YOUR_FILE_NAME);

        htmlVideoEmbedCode = getVideoEmbedCode();

        webView = (WebView) findViewById(R.id.webView1);

        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setAllowFileAccess(true);
        webView.getSettings().setPluginsEnabled(true);
        webView.getSettings().setSupportZoom(true);
        webView.getSettings().setAppCacheEnabled(true);

        webView.setWebChromeClient(new WebChromeClient(){

             public void onProgressChanged(WebView view, int progress) {
                 if(progress == 100)
                     ((ProgressBar)findViewById(R.id.progressBarWebView))
                     .setVisibility(View.INVISIBLE);
             }
        });

        refreshFileName();
    }

    @Override
    protected void onResume() {
        super.onResume();
        webView.refreshPlugins(true);
    }

    private String getVideoEmbedCode() {
        return "<embed " 
                + "type=\"application/x-shockwave-flash\""
                + "id=\"player1\" " + "name=\"player1\" "
                + "src=\"http://www.c-span.org/"
                + "cspanVideoHD.swf\""
                + "width=\""+utils.getDisplayWidth()+"\""
                + "height=\""+(utils.getDisplayHeight()+40)+"\"" + " flashvars=@FILESRC@"
                + "allowfullscreen=\"true\"" 
                + "allowscripaccess=\"always\""
                + "/>";
    }

    private void refreshFileName() {

        if (fileName.endsWith(".flv")) {
            fileName = "flv:" + fileName;
        }

        bodyHtml = htmlVideoEmbedCode ;
        bodyHtml = bodyHtml.replaceAll("@FILESRC@", 
                "\"file=" + fileName
                + "&streamer=" + rtmpUrl + "\"");
        webView.loadDataWithBaseURL("http://127.0.0.1",
                htmlPre + bodyHtml
                + htmlPost, "text/html", "UTF-8", null);
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        webView.stopLoading();
        webView.destroy();
//      webView = null;
    }

} 
```

# android - 三星 Galaxy S2 AVD - 官方皮肤，如何渲染正确的尺寸

> ID：12386895
> 
> 赞同：5
> 
> 时间：2012-09-12T11:15:37.837
> 
> 标签：android, avd, galaxy

由于[另一个 stackoverflow 问题](https://stackoverflow.com/questions/10641744/samsung-galaxy-s-ii-avd-android-virtual-device-basic-settings)，我在 Eclipse 中安装了官方的三星 Galaxy S2 皮肤。

我遇到的问题是，在模拟器中运行时，它不会将我的应用程序呈现在接近实际设备分辨率的任何地方，这肯定是使用皮肤的重点。

请查看我正在使用的屏幕截图和设置，我哪里出错了？

**模拟器输出 - API 11**

![皮肤输出](../Images/3bdb2cafcefcf4772d4ce63f370476ed.png)

**模拟器输出 - API 15**

![在此处输入图像描述](../Images/1c45525dea1987002211896d59095f17.png)

**设备截图**

![实际设备输出](../Images/181540a73fef1908261990cbd914774c.png)

**AVD 设置 - 由皮肤自动生成**

![皮肤设置](../Images/a8c0c7b6682fe9607fc8084ed06f60fd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T18:42:34.883

尝试将抽象 LCD 密度硬件参数从 300 更改为 218 ppi。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:33:20.113

在 AVD Manager 中，选择您的 Galaxy SII 模拟器，单击“开始...”按钮，然后在“启动选项”对话框中配置显示如下：

![Galaxy SII 模拟器启动配置](../Images/82e71441e55826b9778c9c47fbc36e7f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T22:59:22.577

我看到您的 AVD 目标是 Android 3.0，但您的物理设备上的 GUI 看起来不同。确保使用与您的真实手机具有相同 Android 版本和主题的模拟器进行测试。

# html - CSS 链接在鼠标移出时保持突出显示

> ID：12386899
> 
> 赞同：1
> 
> 时间：2012-09-12T11:15:50.520
> 
> 标签：html, css, drop-down-menu

我在一个我正在工作的网站上有一个 CSS 下拉菜单，我遇到了一个小问题。下拉菜单工作正常，但在一个特定菜单上有分支到一侧的子类别，这些菜单工作正常，直到我将鼠标悬停在链接的最后一个子项上。一旦最后一个孩子被鼠标悬停，它就会保持突出显示，就好像鼠标仍然在它上面一样，然后该列表中的其余链接继续发生这种情况。任何帮助将不胜感激。

[http://andy-burns.co.uk/underconstruction](http://andy-burns.co.uk/underconstruction)查看问题和源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:31:35.720

它反映在（Windows NT 6.1；WOW64）-Chrome/21.0.1180.89

它与这个 CSS 有关：

```
li {
    display:inline;
    width:100px;
    height:50px;
} 
```

如果`inline`更改，则不会重现该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:24:49.600

您使用的是什么浏览器和操作系统，我刚刚在 Mac 上使用 Chrome、Safari 和 FF 进行了检查，但无法重现该问题

# java - 我可以在同一个项目中使用 JRuby on Rails 和 Java Servlet 吗？

> ID：12386901
> 
> 赞同：3
> 
> 时间：2012-09-12T11:15:57.640
> 
> 标签：java, ruby-on-rails, servlets, jruby, warbler

我的项目需要 Rails 和 Java 才能获得特殊的扩展能力。

我们首先启动了一个纯 JRuby on Rails 项目，并将其部署到 Tomcat。问题是我们的 Tomcat 服务器的资源非常有限，只有 20-30 个线程。这意味着我们的网络应用程序一次只能同时为 20-30 个用户提供服务。

我们计划通过使用 EventMachine 将一些繁重的同步代码转换为事件代码来提高吞吐量。使用事件代码，单个线程可以做更多的工作，而不是等待长时间的工作完成。

但是要使用 EventMachine，Web 服务器必须是基于事件的，而 Tomcat 则不是这样。

JRuby/Tomcat 中似乎没有混合多线程和事件解决方案，因此我们决定将 Servlet 3.0 中的异步支持与我们当前的 Rails 应用程序结合起来。部分代码将使用 Java 和 Servlet 库编写。这听起来很疯狂，但我们认为它最适合我们。

无论如何我可以用 JRuby Rails、Warbler 和 Java Servlet 3.0 做到这一点吗？

感谢您的所有兴趣。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:07:15.660

我自己没有尝试过，但我想您应该能够创建一个标准的 jruby+rails 应用程序，将其打包为一个 war 文件，然后配置 web.xml 以在某些 url 上使用 servlet。

此外，该基准表明混合 java 和 jruby 解决方案是优化瓶颈的好主意[http://www.techempower.com/blog/2013/03/28/framework-benchmarks/](http://www.techempower.com/blog/2013/03/28/framework-benchmarks/)

# pentaho - 需要 Pentaho Kettle 数据集成父子解决方案

> ID：12386905
> 
> 赞同：0
> 
> 时间：2012-09-12T11:16:08.040
> 
> 标签：pentaho, kettle

我有一个源表（来自 MS DB），其中包含一个字段“ParentID”，它引用了“ID”的 PK

目标 Postgres 表已填充（从序列中插入新的“ID”PK）并且“ParentID”设置为空。流中插入了一个新的 PK。

所以现在在这个阶段我有一个有效的流

```
"ID"  "ParentID"  "NewTargetID" 
100   NULL        1
101   100         2 
```

如何进行“流查找”（或其他）并查找值以创建新的流字段，从而为我提供“NewParentID”的新字段

```
"ID"  "ParentID"  "NewTargetID"  "NewParentID"
100   NULL        1              NULL -< (How do i generate this ?)
101   100         2              1 -< (How do i generate this ?) 
```

谢谢

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:22:09.957

大卫，

由于我是 StackOverflow 的新成员，我无法发布图片，所以我在我的博客上发布了一个解决方案：

[http://funpdi.blogspot.com/2012/09/parent-child-lookup.html](http://funpdi.blogspot.com/2012/09/parent-child-lookup.html)

我也把这个链接放在你的[Pentaho 论坛帖子](http://forums.pentaho.com/showthread.php?128895-Paent-Child-problem-How-do-i-solve-it)上，我的回复正在等待版主批准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:56:09.607

如果我正确理解您的用例，您可以为此使用“添加序列”步骤。它将向流中添加一个新字段。

这是文档： [http ://wiki.pentaho.com/display/EAI/Add+sequence](http://wiki.pentaho.com/display/EAI/Add+sequence)

# maven - Websphere 和 ibm-application-bnd.xmi 文件问题

> ID：12386906
> 
> 赞同：0
> 
> 时间：2012-09-12T11:16:19.730
> 
> 标签：maven, websphere-7, role, maven-ear-plugin

我的 web 应用程序（启用了基本的安全身份验证）通过 maven 构建并部署在 websphere 中。当我将安全用户角色映射到相应的组 websphere 服务器时，在内部使用我的角色组映射配置创建 ibm-application-bnd.xmi。为了在每次部署我的耳朵时最小化角色组的映射，我将 ibm-application-bnd.xmi 复制并包含在我的耳朵的 META-INF 文件夹中，该文件夹由服务器创建。我的耳朵结构（META-INF 文件夹，application.war文件）。但是 websphere 不认为 ibm-application-bnd.xmi 文件和我的角色组映射不是自动完成的。但是我尝试了示例动态 webproject（这里没有使用 maven 使用 RSA 手动构建 EAR）并做了同样的事情，它可以正常工作并且角色 - 使用该 ibm-application-bnd 自动完成组映射。

我不知道是什么导致了这个问题。我的耳朵结构是由 maven 构建的吗，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:37:23.613

我通过将 ibm-application-bnd.xml 放入 src/main/ **application** /META-INF 为 WAS 6.1 解决了这个问题。这被 maven-ear-plugin 拾取为 earSourceDirectory，因此它被捆绑在正确的位置。

如果你把它放在 src/main/ **resources**中，它不会被打包。

# ember.js - Ember-Data 夹具适配器

> ID：12386913
> 
> 赞同：2
> 
> 时间：2012-09-12T11:16:55.427
> 
> 标签：ember.js, ember-data

夹具适配器有提交方法吗？它有什么作用？据我了解，`store.commit()`与 REST 适配器一起使用时会调用 API。

我可以将`isLoaded`属性与夹具适配器一起使用吗？

基本上，我的控制器中有 2 条记录称为`x`和`y`一个属性内容，其中包含许多`y`类型的记录。咖啡代码如下：

```
someMethod: (->
  content.removeObject(y)
).('x.isLoaded')

anotherMethod: ->
  //modify x
  Application.store.commit() 
```

当我调用`anotherMethod`它时，它会更新`x`并在商店运行提交，因此`someMethod`会被调用。我的实际应用程序运行良好，但在测试的情况下会从内容和存储`someMethod`中删除记录。`y`是不是用于夹具数据存储`isLoaded`？`commit`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T16:48:17.337

是的，有一个提交方法，它可以通过[DS.Store](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/store.js#L829)或 DS.Transaction 访问。

这是一个[小提琴](http://jsfiddle.net/MikeAski/Adw4F/32/)，它有一些很好的代码，可以快速演示带有固定装置的 CRUD。

```
window.App = Ember.Application.create();

App.store = DS.Store.create({
    revision: 4,
    adapter: 'DS.fixtureAdapter'
});

App.Person = DS.Model.extend({
    id: DS.attr('number'),
    name: DS.attr('string')
})

App.Person.FIXTURES = [
    {id: 1, name: 'Fixture object 1'},
    {id: 2, name: 'Fixture object 2'}
];

App.people = App.store.findAll(App.Person);
App.store.createRecord(App.Person, {id: 1, name: 'Created person'});

App.personView = Em.View.extend({
    isVisibleBinding: 'notDeleted',
    notDeleted: function() {
        return !this.getPath('person.isDeleted');
    }.property('person.isDeleted').cacheable(),

    remove: function () {
      this.get('person').deleteRecord();
    }
}); 
```

# jquery - 构建进度条的 JQuery 问题

> ID：12386914
> 
> 赞同：0
> 
> 时间：2012-09-12T11:16:58.033
> 
> 标签：jquery, ajax

我正在尝试设置一个简单的进度条，但是执行“更新”，但仅在“所有”ajax 请求完成时？

请求开始；

```
 $(".cb-download").colorbox({
    opacity:.8,
    onComplete:function() {
        $.colorbox.resize();
        if (ERROR !== true) {
           // update Progress
           var progress = setInterval(updateProgress, 100);

           $.ajax({
                url: baseUrl + "/mail/do-download",
                async: true,
                success: function(data) {
                    $("#mail-download").html(data);
                    $.colorbox.resize();
                    clearInterval(progress);
                }
            });
        } else {
            $('#mail-download-success').hide();
            $('#mail-download-session-lost').show();
            $.colorbox.resize();
        }
    }
});

function updateProgress()
{
$.ajax({
    url: baseUrl + "/mail/get-progress",
    success: function(data) {
        console.log(data);
        $("#current-count").html(data);
    }
});
} 
```

updateProgess 只是调用一个回显数字的动作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:36:27.083

找到我的解决方案。

PHP Session 正在锁定 Session 文件，因此第二个请求正在等待第一个请求（文件锁定）。

没有我正在使用

```
session_write_close(); 
```

当长时间运行的脚本启动时。进度现在被写入数据库/文件而不是会话。效果很好。

# ios - MVC - 模型应该是与控制器不同的类吗？

> ID：12386917
> 
> 赞同：1
> 
> 时间：2012-09-12T11:17:07.563
> 
> 标签：ios, xcode, cocoa, xcode4

我正在学习 cocoa（不是 ios），我想在我创建的所有代码中理解和实现 MVC。我已经学习并理解了这种设计的逻辑，我正在尝试在我的应用程序中使用它（来自课程和教程等的非常小的应用程序）。

大多数教程仅在 2 个文件中显示 MVC 示例。模型和 appController 一起在一个类/文件（NSObject 的子类）中，然后视图显然在其自己的文件（NSView）中。但是当我想到 MVC 时，我总是想到 3 个文件中的 3 个类：

类/文件 1\. 模型，例如姓名、人、年龄、数组等。 类/文件 2\. appController - 大脑，例如给人一个名字和年龄等…… 类/文件 3\. 视图，例如显示人窗户。

那么模型是否应该始终位于与控制器不同的文件中？

另一个问题是关于通信的——在上面的例子中，Model 和 appController 将如何共享数据？模型会是 appController 的子类（appController 是 NSObject 的子类），所以两者都可以共享 ivars 吗？

感谢您阅读本文，希望您能消除我的困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:32:35.627

您对模型是正确的，这些可能是抽象数据类型，如人物、新闻等。您可以说您的业务对象形成了您的模型。视图是您如何表示您的数据，例如，我必须在 tableViewCell 中显示一个新闻项目，我将创建一个包含该新闻的标题、日期和时间的视图。但是这个视图不会直接与模型通信来获取数据。在这里，您的控制器（您称为大脑）进来了。您的控制器知道要显示此视图。在这种情况下，您的控制器具有模型对象 news 对象。因此，它会将模型对象中的数据提供给视图以填充视图。所以这是第二个问题的答案，您不需要将模型作为应用控制器的子类。但是您的控制器具有模型的对象。该对象处于使用的最后阶段。所以关键点是：模型与控制器是分开的，并查看两者。视图和模型不直接通信。控制器作为视图和模型之间的通信来源。model 不是 appcontroller 的子类。您的控制器可能必须对对象进行建模才能使用它。

希望它能澄清你的困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:48:23.470

确实，Model 比 View 和 ViewController 更抽象一些。

Model 可能是一个类，但如果它是一个简单的模型，（比如 ViewController 可以从其他 ViewController 获取的单个值）它可能只是在 ViewController 中。

关键是视图从不拥有自己的数据，它只是显示它。CS193P 中的第 1 课有很多很好的插图，并在[此处下载了 pdf 格式的讲座](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)

此外，虽然视图不应该拥有自己的数据，其中数据完全来自视图中的内容（例如视图中的框，其大小来自接收的数据量），但可以使用该框大小当它自己绘制时，由视图出来。

[此外，这里](https://github.com/i4-apps/Top-Places)还有本讲座引用的计算器示例。我在这些地方学到了很多关于这些概念的知识。我现在只是在语法上挣扎。

# android - 不会出现对话框

> ID：12386922
> 
> 赞同：0
> 
> 时间：2012-09-12T11:17:27.747
> 
> 标签：android, dictionary, dialog

我有一个字典应用程序的代码。如果用户单击搜索框中的列表项，我想显示带有两个按钮的对话框。但我在模拟器中测试它不会出现。我使用以下代码创建字典应用程序。这只是 MainActivity 类。

我的代码：

```
public class Shower extends Activity {
     private TextView mTextView;
        private ListView mListView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_shower);

        mTextView = (TextView) findViewById(R.id.text);
        mListView = (ListView) findViewById(R.id.list);

        handleIntent(getIntent());
    }

    @Override
    protected void onNewIntent(Intent intent) {
        // Because this activity has set launchMode="singleTop", the system calls this method
        // to deliver the intent if this actvity is currently the foreground activity when
        // invoked again (when the user executes a search from this activity, we don't create
        // a new instance of this activity, so the system delivers the search intent here)
        handleIntent(intent);
    }

    private void handleIntent(Intent intent) {
        if (Intent.ACTION_VIEW.equals(intent.getAction())) {
            // handles a click on a search suggestion; launches activity to show word
            Intent wordIntent = new Intent(this, WordActivity.class);
            wordIntent.setData(intent.getData());
            startActivity(wordIntent);
            finish();
        } else if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
            // handles a search query
            String query = intent.getStringExtra(SearchManager.QUERY);
            showResults(query);
        }
    }

    /**
     * Searches the dictionary and displays results for the given query.
     * @param query The search query
     */
    private void showResults(String query) {

        Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,
                                new String[] {query}, null);

        if (cursor == null) {
            // There are no results
            mTextView.setText(getString(R.string.no_results, new Object[] {query}));
        } else {
            // Display the number of results
            int count = cursor.getCount();
            String countString = getResources().getQuantityString(R.plurals.search_results,
                                    count, new Object[] {count, query});
            mTextView.setText(countString);

            // Specify the columns we want to display in the result
            String[] from = new String[] { DictionaryDatabase.KEY_WORD,
                                           DictionaryDatabase.KEY_DEFINITION };

            // Specify the corresponding layout elements where we want the columns to go
            int[] to = new int[] { R.id.word,
                                   R.id.definition };

            // Create a simple cursor adapter for the definitions and apply them to the ListView
            SimpleCursorAdapter words = new SimpleCursorAdapter(this,
                                          R.layout.result, cursor, from, to);
            mListView.setAdapter(words);

            // Define the on-click listener for the list items
            mListView.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                    // Build the Intent used to open WordActivity with a specific word Uri
                   // Intent wordIntent = new Intent(getApplicationContext(), WordActivity.class);
                    //Uri data = Uri.withAppendedPath(DictionaryProvider.CONTENT_URI,
                                                   // String.valueOf(id));
                   // wordIntent.setData(data);
                    //startActivity(wordIntent);

            String title="Dictionary";
            String message="definition";
            AlertDialog.Builder dialog = new AlertDialog.Builder(Shower.this);
               dialog.setTitle(title);
               dialog.setMessage(message);             

                 dialog.setCancelable(false);
                 dialog.setPositiveButton("Dictionary",
                  new DialogInterface.OnClickListener() {
                     public void onClick(DialogInterface dialog, int id) {

                         Intent wordIntent = new Intent(getApplicationContext(), WordActivity.class);
                         Uri data = Uri.withAppendedPath(DictionaryProvider.CONTENT_URI,
                                                         String.valueOf(id));
                         wordIntent.setData(data);
                         startActivity(wordIntent);

                     }
                 }) ;

                 dialog.setNegativeButton("definition", 
                  new DialogInterface.OnClickListener() {
                     public void onClick(DialogInterface dialog, int id) {
                         dialog.dismiss();
                     }
                 });
                 dialog.show();
                }

                });
        }
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        //getMenuInflater().inflate(R.menu.activity_shower, menu);
      //  return true;

        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_shower, menu);

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);

        return true;

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.search:
                onSearchRequested();
                return true;
            default:
                return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:26:24.987

您必须使用 alertdialog builder 创建 alertdialog..

```
AlertDialog alert=dialog.create();

alert.show(); 
```

在你的代码中。参考这个[链接](http://www.mkyong.com/android/android-alert-dialog-example/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T12:59:16.417

试试这个：

```
 AlertDialog dialog = new AlertDialog.Builder(YourClassName.context).create();
    dialog.setTitle("");
    dialog.setMessage("");

   dialog.setIcon("");
  dialog.setButton(DialogInterface.BUTTON_POSITIVE,"Open whatever", new DialogInterface.OnClickListener() {
 public void onClick(DialogInterface dialog, int which) {
                                // TODO Auto-generated method stub 
Intent intent = new Intent(YourClassName.context, OtherClassName.class);
        //your code ....
                }   
                });

           dialog.show();

     return true;

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:30:59.280

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Are you sure you want to exit?")
       .setCancelable(false)
       .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                MyActivity.this.finish();
           }
       })
       .setNegativeButton("No", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
           }
       });
AlertDialog alert = builder.create();
alert.show(); 
```

# spring - 为什么 Spring 允许在封闭的应用程序上下文中发布事件？

> ID：12386926
> 
> 赞同：3
> 
> 时间：2012-09-12T11:17:38.023
> 
> 标签：spring, grails

我在应用程序中注册了 HttpSessionListener（用 Grails 1.3.6 编写，使用 Spring 3.0.5）。我捕获 sessionDestroyed 事件，获取 Spring 的应用程序上下文并向其发布事件。

```
ApplicationContext getContext(ServletContext servletContext) {
    return WebApplicationContextUtils.getWebApplicationContext(servletContext);
}

public void sessionDestroyed(HttpSessionEvent event) {        
    HttpSessionDestroyedEvent e = new HttpSessionDestroyedEvent(event.getSession());
    ApplicationContext context = getContext(event.getSession().getServletContext());
    context.publishEvent(e);
} 
```

这段代码在大多数情况下都能正常工作。但不是所有的。如果我的应用程序在 Tomcat 6 下的生产环境中运行并且应用程序服务器关闭，则 sessionDestroyed 方法会在 spring 关闭上下文后接收 HttpSessionDestroyedEvent 事件，销毁所有 bean 并将上下文的关闭属性设置为 true。但是上下文仍然存在，它的发布方法获取 applicationEventMulticaster 并告诉他多播此事件。然后多播器获取其已注册侦听器的列表，执行 getBean（此时 BeanFactory 创建此 bean）并调用它们。

如果上下文已经关闭，多播器似乎不应该处理对事件侦听器的调用。这种行为使我的应用程序做了一些在关机步​​骤不应该做的工作。

上下文关闭后如何防止对侦听器的调用？在应用程序上下文中实现的事件发布者不检查当前上下文是否关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:30:38.533

在这个特定的示例中，您能否在发布事件之前检查自己是否关闭了上下文？

```
public void sessionDestroyed(HttpSessionEvent event) {        
    ApplicationContext context = getContext(event.getSession().getServletContext());
    if(((ConfigurableApplicationContext)context).isActive()) {
        HttpSessionDestroyedEvent e = new HttpSessionDestroyedEvent(event.getSession());
        context.publishEvent(e);
    }
} 
```

# vba - Byref 参数类型不匹配

> ID：12386935
> 
> 赞同：4
> 
> 时间：2012-09-12T11:18:04.060
> 
> 标签：vba

`=Test2(5)`将代码放入模块后，在 Excel 中键入。为什么这会给我一个`Byref argument type mismatch`错误？

如果在一开始`Test2`我做一行来创建我的数组：

`Dim X1(5), X2(5) As Double`，然后它会工作。但是当我`b`从函数的参数列表中使用时，我必须`ReDim`（因为`b`是变量，而不是常量），这会导致错误。

```
 Function Test1(a As Double)

 Test1 = a * 2

 End Function

 Function Test2(b As Integer)
 Dim X1(), X2() As Double
 ReDim X1(b), X2(b) As Double
 Dim i As Integer

 For i = 0 To b
     X1(i) = i
     X2(i) = Test1(X1(i))
 Next i

 Test2 = X2(1)
 End Function 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T11:22:02.203

这：

```
Dim X1(), X2() As Double 
```

仅声明`X2()`为双精度，`X1()`将存储`b`(integer) 的类型，而不是`b`转换为双精度（因此防止传递`As Double`）。

要使它们都加倍，您必须重复类型声明；

```
Dim X1() As Double, X2() As Double
ReDim X1(b), X2(b) 
```

这意味着正确的双精度类型被传递给`Test1`

# objective-c - 检测一个点是否在 SVG 路径内

> ID：12386938
> 
> 赞同：3
> 
> 时间：2012-09-12T11:18:15.637
> 
> 标签：objective-c, math, graphics, svg

我正在尝试检测给定点是否在 Objective-C 中的封闭 SVG 路径内。我很难弄清楚如何做数学。

我有一个路径的坐标，我想确定一个随机点是在路径内部还是外部。

这是路径坐标的示例：

```
"M673 460 c2 0 4 -1 5 -2 1 -1 2 -2 2 -4 0 -2 0 -3 0 -3 0 0 -3 1 -5 1 -3 1 -5 2 -5 3 0 1 0 3 0 4 1 0 2 1 3 1z:" 
```

我知道 CoreGraphics 的`containsPoint:`方法，但我想避免使用这种方法。

我怎样才能通过编写自己的方法来做到这一点？

**编辑：**

我试图避免`containsPoint:`，因为该函数在使用时似乎在某些坐标/路径上崩溃。当它崩溃和没有崩溃时，它看起来很随机。

以下是一些`containsPoint:`导致应用程序崩溃的路径示例：

```
"M661 446 c1 -1 3 -1 4 -1 1 -1 2 -2 2 -4 0 -2 0 -2 -2 -2 0 1 -2 1 -3 1 -2 0 -3 1 -3 2 0 1 0 2 0 3 0 0 1 1 2 1z" 
"M535 460 c0 0 1 -1 1 -2 1 -2 0 -3 -1 -3 0 0 -1 0 -2 1 0 1 0 2 0 3 1 0 1 1 2 1z" 
```

Xcode`EXC_BAD_ACCESS`通过以下两个函数在程序集中使用 和 中断：`get_y_inflections`和`get_cubic_coefficients`.

**编辑2：**

我发布了一个关于这个问题的[新](https://stackoverflow.com/questions/12489988/containspoint-for-uibezierpath-crashes)`containsPoint:`问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:21:15.567

所以，因为我自己需要一个曲线路径的多边形/插值，我可能也有一个解决你问题的方法：

两个“公共”功能：

`CGPathRef CGPathCreatePolygonPath(CGPathRef path, int quality);`

创建仅包含线元素的路径，质量是曲线分割成的段数

`BOOL CGPathContainsPointInterpolated(CGPathRef path, const CGAffineTransform *m, CGPoint point, bool eoFill, int quality);`

一步完成 CGPathContainsPoint 和插值，质量再次是曲线分割成的段数。

这是实现。

```
typedef struct {
    CGMutablePathRef path;
    int quality;
} InterpolationInfo;

static inline float cubeInterp(float t, float p0, float p1, float p2, float p3) {
    return powf(1-t, 3)*p0 + 3*powf(1-t, 2)*t*p1 + 3*(1-t)*powf(t, 2)*p2 + powf(t, 3)*p3;
}

static void pointsForCubeCurve(CGPoint cp0, CGPoint cp1, CGPoint cp2, CGPoint ep, CGPoint *buffer, int numberPoints) {
    for (int i = 0; i<numberPoints; i++) {
        float t = (i+1)/(float)numberPoints;
        buffer[i] = CGPointMake(cubeInterp(t, cp0.x, cp1.x, cp2.x, ep.x), cubeInterp(t, cp0.y, cp1.y, cp2.y, ep.y));
    }
}

static inline float quadInterp(float t, float p0, float p1, float p2) {
    return powf(1-t, 2)*p0 + 2*(1-t)*t*p1 + powf(t, 2)*p2;
}

static void pointsForQuadCurve(CGPoint cp0, CGPoint cp, CGPoint ep, CGPoint *buffer, int numberPoints) {
    for (int i = 0; i<numberPoints; i++) {
        float t = (i+1)/(float)numberPoints;
        buffer[i] = CGPointMake(quadInterp(t, cp0.x, cp.x, ep.x), quadInterp(t, cp0.x, cp.x, ep.x));
    }
}

static void CGPathElementConvertToPolygon(void *info, const CGPathElement *element) {
    InterpolationInfo *interpInfo = info;
    switch (element->type) {
        case kCGPathElementMoveToPoint:
            CGPathMoveToPoint(interpInfo->path, NULL, element->points[0].x, element->points[0].y);
            break;
        case kCGPathElementAddLineToPoint:
            CGPathAddLineToPoint(interpInfo->path, NULL, element->points[0].x, element->points[0].y);
            break;
        case kCGPathElementAddQuadCurveToPoint: {
            int nr = interpInfo->quality;
            CGPoint buffer[nr];
            pointsForQuadCurve(CGPathGetCurrentPoint(interpInfo->path), element->points[0], element->points[1], buffer, nr);
            for (int i = 0; i<nr; i++) {
                CGPathAddLineToPoint(interpInfo->path, NULL, buffer[i].x, buffer[i].y);
            }
            break;
        }
        case kCGPathElementAddCurveToPoint: {
            int nr = interpInfo->quality;
            CGPoint buffer[nr];
            pointsForCubeCurve(CGPathGetCurrentPoint(interpInfo->path), element->points[0], element->points[1], element->points[2], buffer, nr);
            for (int i = 0; i<nr; i++) {
                CGPathAddLineToPoint(interpInfo->path, NULL, buffer[i].x, buffer[i].y);
            }
            break;
        }
        case kCGPathElementCloseSubpath:
            CGPathCloseSubpath(interpInfo->path);
            break;
        default:
            break;
    }
}

static CGPathRef CGPathCreatePolygonPath(CGPathRef path, int quality) {
    CGMutablePathRef newPath = CGPathCreateMutable();
    InterpolationInfo info;
    info.path = newPath;
    info.quality = quality;
    CGPathApply(path, &info, CGPathElementConvertToPolygon);
    return newPath;
}

static BOOL CGPathContainsPointInterpolated(CGPathRef path, const CGAffineTransform *m, CGPoint point, bool eoFill, int quality) {
    CGPathRef polygon = CGPathCreatePolygonPath(path, quality);
    BOOL returnValue = CGPathContainsPoint(polygon, m, point, eoFill);
    CGPathRelease(polygon);
    return returnValue;
} 
```

# delphi - Delphi 2010中TFont.Charset的作用

> ID：12386945
> 
> 赞同：3
> 
> 时间：2012-09-12T11:18:36.887
> 
> 标签：delphi, delphi-2010

Delphi 2010中VCL控件的TFont.Charset属性有什么作用？既然所有 Delphi 2010 组件都支持 UNICODE，这个属性难道不是无关紧要吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T15:56:42.420

如果所讨论的字体支持这些字符集，则为属性设置不同的值`Charset`无效；但如果您设置了一个字体不支持的字符集，Windows 将使用字体替换来查找支持所选字符集的字体。尝试设置`SYMBOL_CHARSET`像 Tahoma 这样的文本字体并查看结果。

因此，尽管字体字符集在 Unicode Delphi 中是遗留的，但它们不能完全被忽略。

# java - 使用 Javascript 生成包含 JSP 的 HTML

> ID：12386947
> 
> 赞同：1
> 
> 时间：2012-09-12T11:18:39.890
> 
> 标签：java, javascript, html, jsp, view

我正在使用 jsp、javascript 和 html 制作网页视图。我有一个元素列表，当单击时调用 javascript 函数 generatePictureSlider。这个想法是一组图片与列表中的每个元素相关联，并在单击其中一个元素时创建一个滑块。

这是创建我的列表的代码：

```
<div class="valg">
    <ol id="selectable">
    <c:forEach items="${kandidatliste}" var="kjoretoy" varStatus="rowCounter">

        <li id="${rowCounter.index}" class="ui-widget-content">
            <c:choose>
               /*Some code that displays content based on a variable in the kjoretoy var */
            </c:choose>

            <c:out value="Reg nr: ${kjoretoy.kjennemerke} "/>
            <c:out value="Score: ${kjoretoy.score} "/>
            <c:out value="Passering: ${kjoretoy.passeringsString} "/>                       

            <input id="removeVehicle" type="submit" value="X" />
            <input id="checkVehicle" type="submit" value="Sjekk"/>
        </li>   
    </c:forEach>        
    </ol>
</div> 
```

#selectable ol 绑定到 javascript 中的 click 函数。这个点击函数是调用 generatePictureSlider 的函数。因此，当单击列表中的某个元素时，我想在滑块中显示与该元素关联的图片。

因此，我必须生成动态显示滑块的 html。

我的问题是我收到此错误：`java.lang.NumberFormatException: For input string: "+parseInt(index)+"`

这里的索引自然是被点击的元素的索引，它对应于该元素在视图从Java应用程序接收到的arraylist中的位置。这个数组列表称为“kandidatliste”，您将在下面的函数中看到。

```
function generatePictureSlider(index){
    $('div#switcher-panel').html('');

    var html = '<div id="container">'+
        '<div id="banner">'+
        '<ul class="bjqs">'+
        '<li><img src="/nonstop/bildekjennemerke=${kandidatliste['+parseInt(index)+'].kjennemerke}&bildeNr=${0}" title="${kandidatliste[0].kjennemerke}_${0}" width="350" height="220"/></li>'+
        '</ul></div></div>';

    $('div#switcher-panel').append(html);               
} 
```

如何使 javascript 变量索引为整数，以便 JSP 不会崩溃并显示与索引索引中的元素关联的图片。

我当然愿意接受有关如何解决它的其他建议。本质是基于用户点击的元素，我想在页面上显示与该元素相关的图像和其他数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:32:41.917

JSP 页面在服务器端运行，并打印可能包含 Javascript 的 HTML 文档，另一方面，Javascript 在客户端的浏览器中运行，使用 javascript 生成 JSP 没有意义，因为它将在客户端的浏览器上，并且它不起作用，因为 JSP 必须在服务器端解析，您需要在将其发送到客户端之前解决此问题，您可以使用 Scriptlet，但我不推荐它，我不知道您的应用程序到底如何工作，但我会使用ajax动态加载图片。

如果您提供更多信息，我可以改进答案。

# java - 如何从 Android 应用检测 WiFi 网络中连接的所有设备

> ID：12386948
> 
> 赞同：32
> 
> 时间：2012-09-12T11:18:40.833
> 
> 标签：java, android, networking, hardware, monitoring

我正在开发一个应用程序，我需要在其中扫描 WiFi 网络并显示所有连接设备的列表。

允许用户点击设备，应用程序应显示该特定设备的所有硬件信息。这里所说的硬件是指内存、存储介质、存储容量、设备名称、设备 IP 地址等。

现在这个设备可以是任何东西，比如 xbox、带有 Linux/Windows 的笔记本电脑、像 iPhone 这样的手机或任何基于 Andorid 的智能手机，甚至是打印机。

如何扫描 WiFi 网络并查询/检测连接到它的所有设备？

无论在其上运行的操作系统如何，我需要使用哪些协议来获取特定设备中的硬件列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-17T15:33:08.737

检查[WifiP2pManager](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html)的 [requestPeers](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestPeers(android.net.wifi.p2p.WifiP2pManager.Channel,%20android.net.wifi.p2p.WifiP2pManager.PeerListListener))

根据文档，它寻找 [PeerListListener](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.PeerListListener.html)，它返回[WifiP2pDeviceList](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pDeviceList.html)携带 WifiP2pDevice 列表，[该](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pDevice.html)列表携带 deviceAddress、deviceName、primaryDeviceType、secondaryDeviceType、status 和其他属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-10T10:42:19.987

也许[Network Discovery](https://github.com/rorist/android-network-discovery/) github 项目可以帮助您。它列出了所有使用 IP 和 MAC 地址连接到 WiFi 的用户，甚至收集了一些信息，例如开放端口、设备名称、ping 等。希望对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-27T06:00:54.690

在我看来，您可以使用 Wi-Fi Peer-to-Peer

[https://developer.android.com/guide/topics/connectivity/wifip2p.html](https://developer.android.com/guide/topics/connectivity/wifip2p.html)

> “Wi-Fi 点对点 (P2P) 允许具有适当硬件的 Android 4.0（API 级别 14）或更高版本的设备通过 Wi-Fi 直接相互连接，而无需中间接入点（Android 的 Wi-Fi P2P 框架符合Wi-Fi Alliance 的 Wi-Fi Direct™ 认证计划）。使用这些 API，您可以在每个设备支持 Wi-Fi P2P 时发现并连接到其他设备，然后通过比蓝牙连接更远的距离通过快速连接进行通信. 这对于在用户之间共享数据的应用程序很有用，例如多人游戏或照片共享应用程序。” 块引用

# web-services - 不使用 IIS（自定义 Web 服务器）的 asmx Web 服务（服务器端！）的独立实现

> ID：12386954
> 
> 赞同：0
> 
> 时间：2012-09-12T11:19:11.050
> 
> 标签：web-services, ssl, httprequest, httpresponse, httplistener

我必须使用从第三方获得的 WSDL 文件，通过 asmx Web 服务“发布”某些 SOAP/XML 功能。这意味着我必须托管一个 Web 服务，通常这可以通过使用 IIS 作为 Web 服务器来完成，但是我需要创建一个实现自己的 Web 服务器的项目来绕过对 IIS 的需求。

这是问题的第 1 部分，第 2 部分是 - 在 MONO 下的 Ubuntu 上运行生成的应用程序。

回到第 1 部分，经过几天的研究，我发现以下链接实际上是唯一有相关信息的链接（因为我不想使用 WCF）； [http://msdn.microsoft.com/en-us/magazine/cc163879.aspx](http://msdn.microsoft.com/en-us/magazine/cc163879.aspx)

在我潜入并承诺花费大量工时之前，我想知道上面提到的链接提供的数据是否仍然有效 - 以及是否有其他（更好的）选项来实现我需要实现的目标.

如果有人已经在他/她的开发人员中解决了这个问题。职业 - 请分享你的知识。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:28:59.477

对于 Web 服务器上的问题：您可以创建一个基于 PHP 的实现 NuSoap 的 Web 服务。

# objective-c - 二级 UINavigationBar 自定义标题视图

> ID：12386956
> 
> 赞同：0
> 
> 时间：2012-09-12T11:19:23.350
> 
> 标签：objective-c, uibutton, uinavigationbar, customization, uibuttonbaritem

我试图在 UINavigationBar 的中心（在 titleView 中）插入一个自定义按钮。这仍然适用于第一级，但是当我在此 TableView 中选择一个单元格并被推送到下一个控制器时，我也无法在第二个控制器上插入此按钮。显示 Right- 和 LeftBarButtonItem，但不显示 titleView。

当我使用默认设置并使用 viewController.title 时，它​​显示在此导航栏的 titleView 中，但未显示我的自定义视图。

我在两个控制器中的代码是

```
UIButton *centerNavigationButton = [UIButton buttonWithType:UIButtonTypeCustom];
[centerNavigationButton setBackgroundImage:[UIImage imageNamed: @"buttonImage.png"] forState:UIControlStateNormal];

centerNavigationButton.frame = (CGRect) {
  .size.width = 100,
  .size.height = 20,
};
[centerNavigationButton addTarget:self action:@selector(scrollToTop) forControlEvents:UIControlEventTouchUpInside];
[self.navigationController.navigationBar.topItem setTitleView:centerNavigationButton]; 
```

我搜索了一天多，但没有找到第二级的问题。

谢谢你的帮助。

* * *

编辑：

@Martin R 在我必须编写的第一个 TableViewController 中找到了解决方案

```
UIButton *centerNavigationButton = [UIButton buttonWithType:UIButtonTypeCustom];
[centerNavigationButton setBackgroundImage:[UIImage imageNamed: @"buttonImage.png"] forState:UIControlStateNormal];

centerNavigationButton.frame = (CGRect) {
  .size.width = 100,
  .size.height = 20,
};
[centerNavigationButton addTarget:self action:@selector(scrollToTop) forControlEvents:UIControlEventTouchUpInside];
[self.navigationController.navigationBar.topItem setTitleView:centerNavigationButton]; 
```

在第二级：

```
UIButton *centerNavigationButton = [UIButton buttonWithType:UIButtonTypeCustom];
[centerNavigationButton setBackgroundImage:[UIImage imageNamed: @"buttonImage.png"] forState:UIControlStateNormal];

centerNavigationButton.frame = (CGRect) {
  .size.width = 100,
  .size.height = 20,
};
[centerNavigationButton addTarget:self action:@selector(scrollToTop) forControlEvents:UIControlEventTouchUpInside];
[self.navigationItem setTitleView:centerNavigationButton]; 
```

问题可以关闭。

非常感谢！从写出问题到找到解决方案 25 分钟！愉快的时光！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:32:14.473

我认为您必须设置`titleView`视图控制器的`navigationItem`：

```
self.navigationItem.titleView = centerNavigationButton; 
```

# ios - iphone：这个错误是什么？

> ID：12386957
> 
> 赞同：0
> 
> 时间：2012-09-12T11:19:30.120
> 
> 标签：ios, objective-c, iphone, ipad, xcode4.2

我是 iphone 开发和通用应用程序的新手，我刚刚在 View 上创建了一些新字段，并使用 xCode 4.2 中的代码设置了它的出口。比我编译这个错误来了，不知道如何摆脱这个错误。

我还删除了一些对 Xib 字段的引用。

如何知道错误代码或错误在哪里。

请帮忙

![在此处输入图像描述](../Images/e8609d2ee04261ab6676ac547f24757f.png)

编辑：我只是在断点导航器中添加异常断点，它显示了这个错误的地方。

![在此处输入图像描述](../Images/c1b0c65456a69968ee84daa2502841ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:53:44.430

这不是错误，当您运行此应用程序时，它会使您的应用程序崩溃。确保您的所有连接都是正确的，或者您在您的应用程序中使用未定义的符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:15:47.427

它可能是由于错误引用导致的应用程序崩溃。按照 [这个链接](https://stackoverflow.com/questions/4961770/run-stop-on-objective-c-exception-in-xcode-4)，它会帮助你找到错误的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:22:09.980

You can refer to this very good article. Read it out, it will be helpful in the future.

This is a fantastic link, goto section "The Exception Breakpoint". This will answer your question.

[My app crashed, Now what?](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T11:28:20.467

可能是您将消息发送到已释放的对象。更有可能是您在 viewDidUnload 之前释放了控件或视图，或者可能是您使用了已从窗口中删除的 viewController 的某些属性或方法。这个错误有很多案例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T11:32:55.690

如果在出现异常之前没有出现任何窗口，请检查您的 xib 连接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T11:25:46.730

错误意味着很多`SIGABRT`事情之一。我建议在所有异常上都使用断点，如[本文所述](http://blog.manbolo.com/2012/01/23/xcode-tips-1-break-on-exceptions)

# java - 在使用 postgresql 的非常简单的 jsf 应用程序中“已经有太多客户”

> ID：12386959
> 
> 赞同：2
> 
> 时间：2012-09-12T11:19:38.310
> 
> 标签：java, sql, postgresql, jsf, jdbc

在我的网络应用程序上单击几下后，我得到了“致命：抱歉，已经有太多客户”了。该应用程序是使用 JSF 2 编写的。我完全不知道为什么会这样。我知道事实上我是唯一有联系的人。无论我是否也使用 pgadminIII 连接，都会发生这种情况。我的应用程序非常简单。

以下是一些可能有所帮助的相关位：

这是我用于连接的单例类：

```
public class ConnectionSingleton{

private static Connection con;

public static Connection getConnection() throws SQLException
{
    if (con == null || con.isClosed())
    {

        try
        {
            Class.forName("org.postgresql.Driver");

            con = DriverManager.getConnection(
                    "jdbc:postgresql://127.0.0.1:5432/sc_data", "postgres",
                    "password");
        } catch (SQLException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    return con;
}
} 
```

下面是一个典型用法的例子：

```
 try
    {
        Connection con = ConnectionSingleton.getConnection();

        PreparedStatement stat = con.prepareStatement("select * from song_song where id = ?");
        stat.setInt(1, id);
        ResultSet res = stat.executeQuery();

        if (res.next())
        {               
            id = res.getInt("id");
            name = res.getString("s_name");
            link = res.getString("s_link");
            owner = res.getInt("s_owner");
            critNumber = res.getInt("s_crit_number");

            retval="found";

        }
        else
        {
            retval = "no song";
        }

        res.close();
        con.close();
        stat.close();

    } catch (SQLException e)
    {
        retval = "no song";
        e.printStackTrace();
    } 
```

我想不出还有什么可以包括在这里的。差不多就是这样。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:50:39.257

通常，当您看到此内容时，您的应用程序/Web 服务器配置为具有比 postgresql 配置为允许后端连接更多的子节点。

# debugging - 在 Scintilla 项目中使用调试模式时如何获取 cxx 文件中的句子

> ID：12386960
> 
> 赞同：0
> 
> 时间：2012-09-12T11:19:42.020
> 
> 标签：debugging, mfc, scintilla

我遇到了闪烁的问题，我想用调试模式修复它，但是，我怎样才能追踪到 cxx 文件？vs 中的 f10 不起作用....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:16:20.830

F11 通常是步入。F10 会越过。只要您有闪烁的调试符号，它就可以毫无问题地工作。

# xml - 引用 XSD 架构中不同元素中的属性

> ID：12386963
> 
> 赞同：3
> 
> 时间：2012-09-12T11:19:47.243
> 
> 标签：xml, xsd, schema, bulk-load

我在 SQL Server 2008 中使用 XML 批量加载 (SQLXML 4.0)。这工作正常。我需要使用 XSD 在 SQL 表中创建 elementA 和 elementB 之间的关系。由于 elementA 中的 id 属性是唯一的，如何在 XSD 中将其添加（引用？）到 elementB 中？

**XML**

```
<?xml version="1.0" encoding="utf-8"?>

<root>

<xml>
 <elementA id="844356290610152557726" name="some name"/>
 <elementB d="some text"/>
 <elementB d="more text "/>
 <elementB d="random text "/>
 <elementB d="more text"/>
</xml>

<xml>
 <elementA id="844356300610162859021" name="some name"/>
 <elementB d="random text"/>
</xml>

<xml>
 <elementA id="844356300610163107380" name="some name"/>
 <elementB d="any text"/>
</xml>

<xml>
 <elementA id="844356300610161037523" name="some name"/>
 <elementB d="xyz text "/>
</xml>

<xml>
<elementA id="844356290610103116878" name="some name"/>
 <elementB d="some more text"/>
 <elementB d="text"/>
 <elementB d="random text"/>
 <elementB d="any text"/>
</xml>

</root> 
```

**架构**

```
<?xml version="1.0"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" maxOccurs="unbounded" name="xml">
          <xs:complexType>
            <xs:sequence>
              <xs:element minOccurs="0" name="elementA">
                <xs:complexType>
                  <xs:attribute name="id" type="xs:integer" use="optional" />
                  <xs:attribute name="name" type="xs:string" use="optional" />
                </xs:complexType>
              </xs:element>
              <xs:element minOccurs="0" maxOccurs="unbounded" name="elementB">
                <xs:complexType>
                  <xs:attribute name="d" type="xs:string" use="optional" />
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# python - MongoEngine 是否准备好使用多语言字符串字段？

> ID：12386964
> 
> 赞同：1
> 
> 时间：2012-09-12T11:19:48.743
> 
> 标签：python, mongodb, multilingual, mongoengine

我正在寻找 MongoEngine 的多语言 StringField 的任何开源实现。

我可以自己做，但如果有的话，我认为最好使用它并为它做出贡献。

我想要的是能够以多种语言了解同一属性的各种值的字段，例如

```
class MyDoc(Document):
    name = MultilingualString()

my_doc = MyDoc.objects.first()

# storing value
my_doc.name.en = 'My Document'

# outputs stored value 'Mein Dokument'
print(my_doc.name.de) 
```

我认为在内部使用 DictField 实现这样的字段非常容易。

PS：是的，它确实类似于 MongoKit 的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:49:45.233

目前没有我知道的实现，但是，在快速查看 MongoKit 之后 - 数据存储为字典，并且设置当前语言是最重要的语法糖。

很高兴在[http://github.com/mongoengine/mongoengine接受拉取请求](http://github.com/mongoengine/mongoengine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:27:42.230

现在就到这里。

[“mongoengine-多语言领域”项目](https://github.com/lig/mongoengine-multilingual-field)

用法：

```
from mongoengine import Document
from multilingual_field.fields import MultilingualStringField

class MyDoc(Document):
    name = MultilingualStringField()

doc = MyDoc(name={'en': 'Hermitage', 'ru': u'Эрмитаж'})
doc.translate('en')
doc.name  #  'Hermitage'
doc.translate('ru')
doc.name  #  u'Эрмитаж'
doc.translate('en')
doc.name = 'The Hermitage'
doc.name.translations  # {'en_US.ISO8859-1': 'The Hermitage', 'ru_RU.UTF-8': u'Эрмитаж'} 
```

这是它在 MongoDB 中的样子：

```
{
    "_cls" : "MyDoc",
    "_id" : ObjectId("5053ad4e3116b063001f6980"),
    "_types" : [
        "MyDoc"
    ],
    "name" : [
        {
            "lang" : "ru_RU.UTF-8",
            "value" : "Эрмитаж"
        },
        {
            "lang" : "en_US.ISO8859-1",
            "value" : "The Hermitage"
        }
    ]
} 
```

它允许`(value, lang)`为快速值搜索定义有效索引，并使用规范化的语言环境名称作为语言代码。

# jquery - Jeditable 不会在加载的 ajax 页面上更新新的输入数据

> ID：12386972
> 
> 赞同：2
> 
> 时间：2012-09-12T11:20:08.460
> 
> 标签：jquery, jquery-plugins, jeditable

我在 ajax 加载的内容上使用 Jeditable 扩展。当我使用静态内容时，更新新的输入数据没有问题。但是在 ajax 加载的内容中，它不会用新数据替换旧数据。这里有什么问题？

我在同一页面上使用这些 Jquery 插件：

1.  [可编辑](http://www.appelsiini.net/projects/jeditable)
2.  [阿贾克斯分页](http://www.9lessons.info/2010/10/pagination-with-jquery-php-ajax-and.html)

在 ajax.php

```
 $(function() {
                    $(".gsmDegistir").editable("'.$yazilimurl.'?sayfa=ajax;stil=smsRehber;islem=gsmDegistir", {
                        indicator : \'<img src="'.$resimurl.'/site/ajax-loader.gif">\',
                        tooltip : "'.T_('Düzenlemek için çift tıklayın...').'",
                        event : "dblclick",
                        style : "inherit",
                        cancel : "İptal",
                        submit : "OK",
                        placeholder : "",
                        id   : "trid",
                        name : "yeniGsm"
                    });}); 
```

在 page.php 中

```
 $(document).ready(function() {
                    function loading_show()
                {
                    $("#icerikYukleniyor").css("display","block");
                }

                function loading_hide()
                {
                    $("#icerikYukleniyor").css("display","none");
                }

                function loadData(page)
                {
                    loading_show();
                    var rgid = $("select#grupSec").val();
                    $.ajax({
                        type: "POST",
                        url: "'.$yazilimurl.'?sayfa=ajax;stil=smsRehber;islem=rehberListesi",
                        data: "p=" + page + "&rgid=" + rgid,
                        success: function(veri) {
                            $("#rehberTelefonListe").ajaxComplete(function(event, request, settings)
                            {
                                loading_hide();
                                $("#rehberTelefonListe").html(veri);
                            });
                        },
                        error: function() {
                            $("#rehberTelefonListe").html("'.T_('Bağlantı sorunu oluştu.').'");
                        }
                    });
                }

                loadData(1); // For first time page load default results
                $("#rehberTelefonListe .pagination li.active").live("click",function(){
                    var page = $(this).attr("p");
                    loadData(page);
                });
            });}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:55:22.900

我找到了 ajax 加载页面的解决方案。

听起来像我需要的

```
$('#go1').live('click', function() {}); 
```

`$.fn.live`，因为事件处理程序仅在初始 DOM 创建时注册，并且您正在重新填充 DOM 并且那些未附加。

更多信息@http [://docs.jquery.com/Events/live](http://docs.jquery.com/Events/live)

# .net - 与 ASP.Net MVC 持续集成

> ID：12386977
> 
> 赞同：10
> 
> 时间：2012-09-12T11:20:28.263
> 
> 标签：.net, asp.net-mvc, continuous-integration, nuget

因此，当您将 MVC 安装到 Visual Studio 时，它会将 MVC dll 放入 GAC。因此，它们不需要位于项目的文件系统中即可构建项目。

当我们将它部署到 live 和我们的持续集成服务器时，MVC 和 Razor 所需的依赖项不在版本控制中。微软把这件事弄得如此复杂的原因我无法理解。

我是自动化所有事情的人，所以我想知道解决丢失 dll 问题的最佳方法是什么。

现在对于 ASP.Net MVC 项目，我已经使用 bin 部署解决了这个问题，如Phil Haack 的[http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)所述博客。这工作正常，但我也有一些引用 System.Web.Mvc 的库项目不会在构建服务器上编译，并且 Visual Studio 中的 bin 部署选项不适用于库项目。

我认为正确的做法是使用 NuGet

```
Install-Package Microsoft.AspNet.Mvc -Version 3.0.20105.1 
```

但是，最佳做法是什么？以这种方式使用 NuGet 是否有任何陷阱？例如，我是否应该切换我所有的 ASP.Net MVC web 项目以利用 NuGet 中的这个包，而不是在 GAC 中部署 dll？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T11:35:15.253

我们在 MVC 4 项目中做了类似的事情。

我们使用 NuGet 安装 MVC，然后在项目上启用包还原，将 .nuget 文件夹提交到存储库。[http://blog.davidebbo.com/2011/08/easy-way-to-set-up-nuget-to-restore.html](http://blog.davidebbo.com/2011/08/easy-way-to-set-up-nuget-to-restore.html)

```
Install-Package Microsoft.AspNet.Mvc 
Install-Package NuGetPowerTools
Enable-PackageRestore 
```

在构建服务器上构建项目时，会从 nuget 下载缺少的包，部署时它们会自动包含在 bin 目录中。

我想说您的方法是正确的，而不是使用 bin deploy 方法并将所需的程序集提交到存储库。

# tcl - 如何在 Tcl/Tk 中将复选框添加到树视图？

> ID：12386978
> 
> 赞同：2
> 
> 时间：2012-09-12T11:20:29.240
> 
> 标签：tcl, tk

我想在 ttk::treeview 添加复选框？

我阅读了一些文档，发现无法添加复选框以添加到 ttk::treeview。还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:51:38.933

我确实在 ttk:treeview 中使用带有香草代码的复选框，但在第一列中。

在树视图的第一列（称为 #0 或“树”）中，您可以像指定标签一样指定图像（让我们说 icon_checked 和 icon_unchecked）。

```
$win.tv item $item -image icon_checked 
```

图形部分就这么多。对于不太脏的部分：

*   为树视图的每一行创建一个包含状态的列表（例如：“tvstatus”{0 0 0 1 0}）
*   创建一个过程“tv_refresh”，根据列表“tvstatus”更新每一行
*   在树视图上创建一个绑定： 1 更改列表“tvstatus”中一项的值 2 调用“tv_refresh”

准确地向用户询问您想要获得更具体答案的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T19:37:48.797

树视图小部件根本不够复杂，无法做到这一点，并非没有大量工作。（您*可以*通过定义已检查和未检查行的外观并使用绑定在它们之间切换的样式来对其进行近似计算……但这将非常可怕和脆弱。）是的，这意味着您可以t 用它做所有事情，但这反过来也使小部件的 API 更易于学习。这总是一个棘手的设计权衡。

你最好的选择可能是[TkTreeCtrl](http://tktreectrl.sourceforge.net/)，它以能够做任何你想用树（或表格或网格）小部件做的事情而闻名。曾经。据我了解（不是它的用户），使用起来相当棘手；我听说它向我推荐 TkTreeCtrl 总是用额外的代码包装，以将其 API 限制为您需要的特定目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T19:31:54.877

我在 comp.lang.tcl 上找到了解决方案。见[https://groups.google.com/d/msg/comp.lang.tcl/VwG4_7-1538/MWzhZiVcoecJ](https://groups.google.com/d/msg/comp.lang.tcl/VwG4_7-1538/MWzhZiVcoecJ)

# mysql - SQL 设置日期戳

> ID：12386983
> 
> 赞同：0
> 
> 时间：2012-09-12T11:20:40.473
> 
> 标签：mysql, sql, phpmyadmin

我现在在 phpmyadmin 中，我正在尝试设置一个字段来标记插入数据时的当前日期。

现在我尝试将其设置为`DATETIME`类型，但这包括时间。我只想约会。我还尝试将其设置为`DATETIME`默认值`GETDATE()`并保存，但它引发了错误：

```
#1067 - Invalid default value for 'upload_date' 
```

请问有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T11:23:28.477

不幸的是，您不能将`DEFAULT`值设置为函数，它必须是一个常量值。一个*例外*是`CURRENT_TIMESTAMP`，尽管它也将包括以下`time`部分：

```
column_name TIMESTAMP DEFAULT CURRENT_TIMESTAMP 
```

但是，您可以使用 a`TRIGGER`来设置列的默认值。例如：

```
CREATE TRIGGER trigger_name BEFORE INSERT ON your_table
  FOR EACH ROW SET NEW.date_column = DATE(NOW()); 
```

此外，用于`DATE()`截断`TIME`.`NOW()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:25:50.547

一个常见的错误，我只是把文档扔给你[http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)

> 数据类型规范中的 DEFAULT value 子句指示列的默认值。除了一个例外，默认值必须是一个常量；它不能是函数或表达式。**例如，这意味着您不能将日期列的默认值设置为 NOW() 或 CURRENT_DATE 等函数的值。**例外情况是您可以将 CURRENT_TIMESTAMP 指定为 TIMESTAMP 列的默认值。请参见第 11.1.5.5 节，“TIMESTAMP 的自动初始化和更新”。

文档中还有使用 current_timestamp 的例外情况 - 这要求您的列是 TIMESTAMP 列。

# git - GUI 在 bash 输入请求时挂起

> ID：12386984
> 
> 赞同：0
> 
> 时间：2012-09-12T11:20:42.477
> 
> 标签：git, bash, git-gui

我有一个用于检查一些条件的 git 钩子，如果出现问题，则写入“继续？[y/N]”并等待输入。当从控制台提交某些内容时，一切都会按预期进行。但是当我尝试使用某些 GUI 工具提交时，例如`git gui`，它会挂起。可能是因为它无法“输入”任何内容或检测到需要输入。我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:18:22.713

与其通过钩子请求确认，不如在不满足条件时拒绝提交可能是更好的设计，可能会产生一条解释原因的消息，然后让用户修复并重试。这肯定比试图弄清楚用户是否来自终端、`git gui`eclipse/egit、jgit 或许多其他可能的 git 接口并尝试单独调整每个接口要容易得多。

# javascript - Internet Explorer 缺乏占位符支持，特别是密码字段

> ID：12386987
> 
> 赞同：2
> 
> 时间：2012-09-12T11:20:49.667
> 
> 标签：javascript, html, internet-explorer, placeholder

好的，所以为了克服 IE 不支持 HTML5 的 Placeholder 属性，我编写了一些循环输入的 JS，并将输入的值设置为不支持它的浏览器的占位符属性值。现在这可以正常工作，但是在密码字段上，无论值是什么，都显示为点/项目符号以掩盖密码。

现在我可以采取什么措施和方法来解决这个问题？

在输入[type="password"] 上具有占位符样式效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:26:39.907

在查看[HTML5 Cross Browser Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)的“Web 表单：输入占位符”部分时，我看到的是[jQuery-html5-placeholder](https://github.com/miketaylr/jQuery-html5-placeholder/blob/master/html5placeholder.jquery.js)。

我用 IE9 试用了这个[演示](http://miketaylr.com/code/placeholder.html)，它看起来像是`<input>`用一个 span 包裹了你，并用占位符文本覆盖了一个标签。

```
<label>Text:
  <span style="position: relative;">
    <input id="placeholder1314588474481" name="text" maxLength="6" type="text" placeholder="Hi Mom">
    <label style="font: 0.75em/normal sans-serif; left: 5px; top: 3px; width: 147px; height: 15px; color: rgb(186, 186, 186); position: absolute; overflow-x: hidden; font-size-adjust: none; font-stretch: normal;" for="placeholder1314588474481">Hi Mom</label>
  </span>
</label> 
```

那里还有其他垫片，但我没有全部看。

引用自[Internet Explorer 的输入占位符](https://stackoverflow.com/questions/5522164/input-placeholders-for-internet-explorer)

# java - 在 JButtons 上绘制焦点

> ID：12386988
> 
> 赞同：2
> 
> 时间：2012-09-12T11:21:07.650
> 
> 标签：java, swing, jbutton, standard-library

我有一个程序，`JDialogs`其中`JFileChoosers`包含很多`JButtons`.

我知道我可以从`JButton`to`JButton`设置`.focusPainted(false)`为使焦点不可见，但问题是我有一堆“自动”创建的组件（预定义的 JDialogs、JFileChoosers），而且我无法访问他们的 JButton。我必须手动创建整个组件才能控制它们的子组件（并且从头开始创建 fileChooser 必须很困难）......

不过，我有个主意。每次创建 JButon时，默认`focusPainted`设置为`true`。有没有办法我可以找到包含原始 JButton 构造函数的 Java 库并将方法更改为`false`存在，使其成为默认值？

编辑：我找到了 src.zip 并提取了 AbstractButton.java。如何编辑和重新编译它？

实际上，问题是，如何编辑 Java 标准库？

PS你们所有人都说这不是一个好习惯，这个具体的例子可能会出现什么问题（我认为JSL中的任何内容都取决于焦点是否画在Jbutton上）？而且我总是可以同时处理两个项目，一个带有原始库，一个带有编辑，当我在一个中出错但在另一个中没有出错时，我知道问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:59:26.563

通过子类化您当前使用的外观来创建自定义外观。定义两个类就足够了：外观本身和按钮 UI 委托。外观应该将按钮委托放入公用表中，替换原来的按钮委托。委托应覆盖绘制焦点矩形的方法并使用一个空方法，以便不绘制焦点矩形。此外，有必要覆盖创建委托实例的委托中的静态方法。

```
public class MyLookAndFeel extends WindowsLookAndFeel {

    protected void initClassDefaults(UIDefaults table){
        super.initClassDefaults(table);
        table.put("ButtonUI","package1.package2.MyButtonUI");
    }

}

public class MyButtonUI extends WindowsButtonUI {

    private static MyButtonUI thiz;

    public static ComponentUI createUI(JComponent c) {
        if(thiz==null) thiz=new MyButtonUI();
        return thiz;
    }

    protected void paintFocus(Graphics g, AbstractButton b, Rectangle viewRect, Rectangle textRect, Rectangle iconRect){}

} 
```

当您的应用程序启动时，激活您的自定义外观：

```
UIManager.setLookAndFeel("package1.package2.MyLookAndFeel"); 
```

这不仅会从您手动创建的按钮中删除焦点矩形，还会从 JOptionPane 中的按钮、文件对话框等中删除焦点矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:27:20.797

如何继承并使用您在使用的构造函数中设置的`JButton`您自己的 Button 类。您不想更改标准 Java 代码。`focusPainted``false`

```
public class MyButton extends JButton{

  public MyButton() {
    super();
    setFocusPainted(false);
  }

} 
```

但我明白了，这不会改变对 FileChooser 按钮的关注。

# javascript - 在图表上打印文本

> ID：12386992
> 
> 赞同：0
> 
> 时间：2012-09-12T11:21:15.417
> 
> 标签：javascript, jquery, highcharts

我已经使用 High charts api 编写了一个 javascript 页面来绘制图表。

一切正常。但是当我试图在图表上打印文本时，我遇到了一些问题。

在下面的 URL 中，您可以查看代码和运行图。

[http://jsfiddle.net/uVTNU/14/](http://jsfiddle.net/uVTNU/14/)

我正在使用下面的代码片段来获取图表上的文本。

```
var text = chart.renderer.text(
                '500',
                57 ,                
                112.1
            ).css({
                color: '#F00',
                fontSize: '11px'                
            }).add(); 
```

在这里，我将 x 和 y 值设为 (57,112.1)，它取自检查元素。

“180”是我们要打印文字的地方。

我的要求是：我们要打印 180 以上的文本“500”。

这就是为什么我选择了上面提到的坐标。

但是文本“500”在“180”之后打印，即使 x 和 y 位置相同。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:29:13.097

[演示](http://jsfiddle.net/minagabriel/uVTNU/20/)

您需要更改中的`x`属性`tspan`，您的代码正在更改`text x-cord`没有做任何事情的标签

```
 $.each($('svg text tspan') , function(index, value){
    var myval = 500 ; // change this variable as required 
    if($(this).text() == myval){
       $(this).attr('x' , 40) ; // X-cord 
        $(this).parents('text').attr('y' ,100) ; //y-cord
    }

   }); 
```

# java - 使用 GAE sdk 或其他方式时 IP 地址的地理位置

> ID：12386995
> 
> 赞同：6
> 
> 时间：2012-09-12T11:21:24.577
> 
> 标签：java, google-app-engine, ip-geolocation

我在 google appengine (GAE) 上托管了我的网络应用程序。GAE sdk 是否提供任何方法来查找 IP 的地理位置？如果是，请建议我该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:09:09.370

是的，您可以使用请求标头来获取 IP 的地理位置。

[https://cloud.google.com/appengine/docs/standard/go/reference/request-response-headers#app_engine-specific_headers](https://cloud.google.com/appengine/docs/standard/go/reference/request-response-headers#app_engine-specific_headers)

> **X-AppEngine-Country**发出请求的国家/地区，采用 ISO 3166-1 alpha-2 国家/地区代码。App Engine 根据客户端的 IP 地址确定此代码。

其他对位置有用的标头是**X-AppEngine-Region**、**X-AppEngine-City**和**X-AppEngine-CityLatLong**

我认为在本地 sdk 上运行时这不会返回有效值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:51:52.153

从您的问题中不清楚您是要确定向 GAE 应用程序发出的 http 请求的位置，还是要在 GAE 上提供可以为您提供任何 IP 地址的地理位置的服务。

GAE 支持某些包含地理位置信息（如国家、城市、地区和 IP 地址）的 HTTP 标头。有关详细信息，请参阅此处的两篇文章：

*   [http://www.rominirani.com/2012/04/25/appengine-location-detection-update-x-appengine-country-and-more/](http://www.rominirani.com/2012/04/25/appengine-location-detection-update-x-appengine-country-and-more/)
*   [http://www.rominirani.com/2011/07/11/x-appengine-country-http-header-google-app-engine/](http://www.rominirani.com/2011/07/11/x-appengine-country-http-header-google-app-engine/)

上面的文章讨论了像这样的标题

*   X-AppEngine-国家
*   X-AppEngine-区域
*   X-AppEngine-City
*   X-AppEngine-CityLatLong

如果您只是在寻找一种服务来为您提供基于 IP 的地理位置详细信息，那么 GAE 不提供该服务。有各种可用的外部 Web 服务，如上述答案之一中提到的。

# jquery - 提交没有提交按钮且没有页面刷新的表单？

> ID：12386999
> 
> 赞同：5
> 
> 时间：2012-09-12T11:21:31.597
> 
> 标签：jquery, form-submit

我有一个无法更改的表单，我必须仅从 jquery 处理其提交功能。

该表单只有单选按钮。我想在选中单选按钮时提交没有页面引用的表单。

这是我尝试过的代码。

```
$('input[type="radio"]').click(function(){
    if ($(this).is(':checked'))
    {
      $('form#my-form').submit(function(){
        alert('form submitted');
      });
    }
}); 
```

它应该提醒“提交的表单”，但它没有。

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T11:33:15.940

如果您想在没有页面加载的情况下提交表单，那么您需要使用 ajax。

如果您希望在提交时发出警报，则需要稍微修改您的代码..

```
$('input[type="radio"]').click(function(){
    if ($(this).is(':checked'))
    {
      $('form#my-form').submit();
    }
});

$('form#my-form').submit(function(){
        alert('form submitted');
      }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T11:34:15.220

[**我在jsFiddle**](http://jsfiddle.net/S7V2U/)上试过这个例子。我的代码将在检查单选按钮时提交表单。

```
$('input[type="radio"]').click(function(){
    if ($(this).is(":checked"))
      $('form#my-form').submit();
});​ 
```

如果您想*在提交*表单时提醒任何内容，您必须添加此代码

```
$("#my-form").submit(function() {
    alert("submitting form ...");        
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T12:02:56.820

您的代码运行良好 - 只需确保将此代码放入 document.ready 事件中。

```
$(document).ready(function() {
    $('input[type="radio"]').click(function(){
        if ($(this).is(':checked'))
        {
          $('form#my-form').submit(function(){
            alert('form submitted');
          });
        }
    });
}) 
```

请注意，此选择器正在寻找所有单选按钮。此外，如果您不需要刷新页面 - 您应该添加 return false; 提交功能。

但请记住，这是您的情况，您需要先单击单选按钮才能使提交功能正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T11:28:04.633

IF 中的代码显示：“如果表单已提交，则提醒用户”。因此，您必须在检查无线电控制时手动提交表单。

在关闭 IF 之前，输入以下代码：

```
$('yourForm').submit(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T11:31:49.950

在这种情况下，您只需监听提交事件。如果要触发提交事件，请添加以下行：

`$('form#my-form').submit();`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T11:45:12.060

因为你希望你的页面不被刷新，所以使用 Ajax，这里是官方文档：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)