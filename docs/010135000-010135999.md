# StackOverflow 问答 10135000-10135999

# sharepoint - 用户代码未处理 NullReferenceException - 对象引用未设置为对象的实例

> ID：10135001
> 
> 赞同：-2
> 
> 时间：2012-04-13T03:52:00.937
> 
> 标签：sharepoint, sharepoint-2010

我得到下面代码中的用户代码未处理 NullReferenceException。

```
if (item["Area"] != null)
{
    drpArea.Items.FindByText(item["Area"].ToString()).Selected = true;//error occurs here.
} 
```

试图弄清楚一百万次。但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:49:28.867

可能是您应该首先获取`listitem`然后`Dropdownlist`设置选定的值

试试这个 ：

```
 ListItem li = drpArea.Items.FindByText(Convert.ToString(item["Area"]));
 if (li != null)
    drpArea.SelectedValue = li.Value; 
```

# jquery - JQuery 显示/隐藏全部（FAQ 页面）

> ID：10135002
> 
> 赞同：1
> 
> 时间：2012-04-13T03:52:07.160
> 
> 标签：jquery, css, show-hide

我在 FAQ 页面上使用了两个 jQuery 函数。每当单击问题标题 (h4) 时，都会激活第一个。它基本上以幻灯片形式显示该答案，但也确保所有其他答案均已关闭（即一次仅打开 1 个答案）。第二个功能是显示/隐藏页面上的所有问题。

每当用户打开常见问题解答（由第一个功能激活）然后尝试全部显示/隐藏时，就会出现我的问题。显示/隐藏功能使用切换系统，因此这会导致所有问题切换，包括已经显示的问题。结果是（使用说，全部显示）显示所有问题，除了已经显示的问题。该答案是隐藏的（因为它被切换了）。理想情况下，它会保持打开状态，因为它已经打开了。

这个问题的最佳解决方案是什么？两个jQuery函数如下：

```
<script>
// Clicking a question will show that answer and hide all others
$(function() {
  $('#faqQuestions h4').each(function() {
    var tis = $(this),
    state = false,
    answerNext = tis.next('div').hide().css('height','auto').slideUp();
    answerAll = $('#faqQuestions').children('div').hide().css('height','auto').slideUp();
    tis.click(function() {
        state = !state;
        answerAll.slideUp(state);
        $('#faqQuestions').children('h4').removeClass('active');
        answerNext.slideToggle(state);
        tis.addClass('active',state);
    });
  });
});
</script>

<script>
// Show/hide all questions
var toggle = false;
$(function() {
  $('a.toggle').click(function(e) {
      var $this = $(this);
      $('#faqQuestions div').toggle(300,function() {
          if(!toggle) {
              $this.text('Hide All Questions/Answers');
              toggle = !toggle;
          }else {
              $this.text('Show All Questions/Answers');
              toggle = !toggle;
          }
       });
      e.preventDefault();
  });
});
</script> 
```

出于演示目的，我正在处理的页面可在此处获得：[http ://r-8.us/~richard.r8us/faq](http://r-8.us/~richard.r8us/faq)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:57:31.660

代替

```
 $('#faqQuestions div').toggle(300,function() {
      if(!toggle) {
          $this.text('Hide All Questions/Answers');
          toggle = !toggle;
      }else {
          $this.text('Show All Questions/Answers');
          toggle = !toggle;
      }
   }); 
```

尝试

```
 if(!toggle) {
          $('#faqQuestions div').show(300);
          $this.text('Hide All Questions/Answers');
      }else {
          $('#faqQuestions div').hide(300);
          $this.text('Show All Questions/Answers');
      }
      toggle = !toggle; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:38:52.193

我认为这样的事情可能更符合你想要完成的事情：

```
$(function() {
    var allOpen = false;

    $("#faqQuestions h4").click(function() {
        var h4 = $(this);

        if(!h4.hasClass("active")) {
            h4.addClass("active").next("div").slideToggle();
        }
        else {
            h4.removeClass("active").next("div").slideToggle();
        }
    });
    $('a.toggle').click(function(e) {
        e.preventDefault();
        $("#faqQuestions h4").each(function() {
            var h4 = $(this);

            if(!allOpen && !h4.hasClass("active")) {        
                h4.addClass("active").next("div").slideToggle();
            }
            else if(allOpen) {
                h4.removeClass("active").next("div").slideToggle();
            }
        });
        if(!allOpen) {
            allOpen = true;
            $(this).text("Hide All Questions/Answers");
        }
        else {
            $(this).text("Show All Questions/Answers");
        }
  });
}); 
```

当显示已单击的新问题时，这不再折叠任何打开的常见问题解答部分（允许用户一次打开所有这些问题或一次只能阅读一个对我来说似乎很奇怪）。

# salesforce - vf页面上的相关列表以显示自定义对象的历史记录

> ID：10135006
> 
> 赞同：0
> 
> 时间：2012-04-13T03:52:26.350
> 
> 标签：salesforce, visualforce

我有 VF 页面，我需要在页面中显示相关列表。我知道我可以用这种方式显示 openactivities 相关列表。

```
<apex:relatedList list="OpenActivities"/> 
```

但我的问题是我如何显示其他相关列表。显示对象历史的关键词是什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:06:46.550

你可以用这个

```
<apex:detail relatedList="true"/> for all detail 
```

或者

```
<apex:relatedList list="ActivityHistories" subject="{!account}"></apex:relatedList> 
```

# java - 将 Servlet 过滤器添加到 WebLogic 上现有的已部署应用程序

> ID：10135008
> 
> 赞同：1
> 
> 时间：2012-04-13T03:52:54.587
> 
> 标签：java, jakarta-ee, weblogic, servlet-filters

我们将 Oracle EPM 作为 webLogic 下的应用程序运行，并正在寻找在特定时间限制访问的最佳方法（用于维护等）。我认为 servlet 过滤器将是一个很好的方法来做到这一点，但不确定我将如何在开发后部署它。

Oracle 安装工具已经自动部署了该应用程序。我发现使用了 EAR，但我认为更新并重新部署它会很麻烦。另一种选择是修改 temp 目录下的扩展 EAR，但我认为这更糟。

知道如何向这个预部署的应用程序添加 servlet 过滤器吗？

# c# - 无法取回任何东西，但默认构造函数给出了什么

> ID：10135009
> 
> 赞同：2
> 
> 时间：2012-04-13T03:52:55.193
> 
> 标签：c#, class, methods, constructor

我觉得我正在接近使用调试器，但仍然无法弄清楚这一点。

我正在浏览以下代码

```
namespace Taxes
{

public class Rates
{

    //A class constructor that assigns default values 
    public Rates()
    {
        incLimit = 30000;
        lowTaxRate = .15;
        highTaxRate = .28;
    }
    //A class constructor that takes three parameters to assign input values for limit, low rate and high rate.
    public Rates(int lim, double low, double high)
    {
        incLimit = lim;
        lowTaxRate = low;
        highTaxRate = high;
    }
    //  A CalculateTax method that takes an income parameter and computes the tax as follows:
    public int CalculateTax(int income)
    {
        //determine if the income is above or below the limit and calculate the tax owed based on the correct rate
        int taxOwed;

        if (income < incLimit)
            taxOwed = Convert.ToInt32(income * lowTaxRate); 
        else 
            taxOwed = Convert.ToInt32(income * highTaxRate);

        return taxOwed;
    }

} 

// The Taxpayer class is a comparable class
public class Taxpayer : IComparable
{
    //Use get and set accessors.

    private int taxOwed;

    string SSN
    { set; get; }
    int grossIncome
    { set; get; }
    int TaxOwed {
        get
        {
            return taxOwed;
        }
    }

    int IComparable.CompareTo(Object o)
    {
        int returnVal;
        Taxpayer temp = (Taxpayer)o;
        if (this.taxOwed > temp.taxOwed)
            returnVal = 1;
        else if (this.taxOwed < temp.taxOwed)
            returnVal = -1;
        else returnVal = 0;

        return returnVal;

    }  

    public static Rates GetRates()
    {
        //  Local method data members for income limit, low rate and high rate.
        int incLimit;
        double lowRate;
        double highRate;
        string userInput;
        //Rates myRates = new Rates(incLimit, lowRate, highRate);
        //Rates rates = new Rates();

        //  Prompt the user to enter a selection for either default settings or user input of settings.
        Console.Write("Would you like the default values (D) or would you like to enter the values (E)?:  ");

        // if they want the default values or enter their own
        userInput = (Console.ReadLine());
        if (userInput == "D" || userInput == "d")
        {
            Rates myRates = new Rates();
            return myRates;
            //Rates.Rates();
            //rates.CalculateTax(incLimit);
        }

        else if (userInput == "E" || userInput == "e")
        {
            Console.Write("Please enter the income limit: ");
            incLimit = Convert.ToInt32(Console.ReadLine());
            Console.Write("Please enter the low rate: ");
            lowRate = Convert.ToDouble(Console.ReadLine());
            Console.Write("Please enter the high rate: ");
            highRate = Convert.ToDouble(Console.ReadLine());

            Rates myRates = new Rates(incLimit, lowRate, highRate);
            return myRates;
            //rates.CalculateTax(incLimit);
        }
        else return null;
    }

    static void Main(string[] args)
    {

        Taxpayer[] taxArray = new Taxpayer[5];

        //Rates taxRates = new Rates();
        //  Implement a for-loop that will prompt the user to enter the Social Security Number and gross income.
        for (int x = 0; x < taxArray.Length; ++x)
        {
            taxArray[x] = new Taxpayer();
            Console.Write("Please enter the Social Security Number for taxpayer {0}:  ", x + 1);
            taxArray[x].SSN = Console.ReadLine();

            Console.Write("Please enter the gross income for taxpayer {0}:  ", x + 1);
            taxArray[x].grossIncome = Convert.ToInt32(Console.ReadLine());
            //taxArray[x].taxOwed = taxRates.CalculateTax(taxArray[x].grossIncome);

        }

        Rates myRate = Taxpayer.GetRates();
        //Taxpayer.GetRates();

        //  Implement a for-loop that will display each object as formatted taxpayer SSN, income and calculated tax.
        for (int i = 0; i < taxArray.Length; ++i)
        {
            Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, myRate.CalculateTax(taxArray[i].grossIncome));//taxArray[i].taxOwed);

        } 
        //  Implement a for-loop that will sort the five objects in order by the amount of tax owed 
        Array.Sort(taxArray);
        Console.WriteLine("Sorted by tax owed");
        for (int i = 0; i < taxArray.Length; ++i)
        {
            //double taxes = myTax.CalculateTax(taxArray[i].grossIncome);
            Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, myRate.CalculateTax(taxArray[i].grossIncome));

        }
    }  

} 

} 
```

我已经解决了所有问题，只是现在由于某种原因没有按欠税金额排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:18:23.383

关于`Taxpayer.GetRates()`：纳税人阶层不应该负责确定税率。如果纳税人可以确定税率，那么税率很可能为零。`Rates`将其移入课堂可能更有意义。

This answer to your question显示了一个示例，可以帮助您了解哪里出错了。如果您想要与您的代码相关的具体建议，请发布一个完整的编译程序。您发布的示例代码无法编译（错误：“名称 'taxRates' 在当前上下文中不存在”）。

要回答您的问题：

> 如何实例化一个类，这样我就可以在不调用默认构造函数的情况下使用它的方法？

正如其他人所指出的，您需要*保留对新实例化对象的引用，以便在从字段中读取值时使用该实例。*

考虑：

```
void SetRates()
{
    Rates rates = new Rates(10000, 0.3, 0.4);
}

void UseRates(Taxpayer taxpayer)
{
    taxpayer.Tax = new Rates().CalculateTax(taxpayer.Income);
}

void Main()
{
    SetRates();                              // creates an object and throws it away
    Taxpayer taxpayer = new Taxpayer(20000);
    UseRates(taxpayer);                      // creates a new object with default values
    Console.WriteLine(taxpayer.Tax);
} 
```

相反，返回您在 SetRates() 中创建的对象（并改为将其称为 GetRates()）。然后将其传递给 UseRates 方法：

```
Rates GetRates()
{
    return new Rates(10000, 0.3, 0.4);
}

void UseRates(Taxpayer taxpayer, Rates rates)
{
    taxpayer.Tax = rates.CalculateTax(taxpayer.Income);
}

void Main()
{
    Rates rates = GetRates();
    Taxpayer taxpayer = new Taxpayer(20000);
    UseRates(taxpayer, rates);
    Console.WriteLine(taxpayer.Tax);
} 
```

关于您编辑的代码，您有

```
Rates myTax = new Rates();
Taxpayer.GetRates(); 
```

现在`Taxpayer.GetRates()`将一些值分配给 Rates 实例，但*它与您使用语句创建的 Rates 实例不同`Rates myTax = new Rates()`。* 该语句`Rates myTax = new Rates()` *调用默认的 Rates 构造函数，这是您稍后在计算税款的方法中使用的实例！* 这解释了为什么您的税总是使用默认值计算。

GetRates 方法对*Rates 类的不同实例进行*操作。该不同实例是由`new Rates(...`GetRates 方法主体中的表达式之一创建的。该实例具有您想要使用的速率，但它基本上被困在方法中。为什么会被困？因为您只将实例分配给局部变量，而局部变量在声明它们的方法之外是不可访问的。

有点像这样：`Rates`我们有`Car`，而不是`GetRates`我们有`FillFuelTank`。然后，您的代码将执行以下操作：

```
Get a new car          //Rates myTax = new Rates();
Go to the gas station  //Taxpayer.GetRates(); 
```

现在，GetRates() 方法......我的意思是，FillFuelTank 方法......这样做：

```
Get a new car with fuel in it //Rates myRates = new Rates(incLimit, lowRate, highRate) 
```

你看到你做了什么吗？你开着新车开到加油站，又买了*第二辆车*，里面有燃料，然后你*又回到第一辆车上*，开车离开了——没有加任何燃料。

一种解决方案是`myTax`作为参数传递给`GetRates()`方法；`GetRates()`更好的解决方案是从该方法返回一个 Rates 实例。

你写了：

> 我需要费率 myTax = new Rates(); 主要是这样我就可以调用 calculateTax 方法来做到这一点。如果有另一种方法来调用该方法而不调用默认构造函数，我全是耳朵或手指。

表达式`new Rates()`调用默认构造函数。因此，`calculateTax`不调用默认构造函数的调用方式是调用参数化构造函数：

```
Rates rates = new Rates(limit, lowRate, highRate);
double tax = rates.CalculateTax(taxpayer.Income); 
```

您可能会说，“但我确实在 GetRates 方法中调用了参数化构造函数！” 还有一个问题，就是给错误的汽车加油，因为 GetRates 方法中的 Rates 对象*是一个不同的对象*。您在不使用的对象上调用参数化构造函数，并在确实使用的对象上调用默认构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:01:24.957

到达大括号时，myRates 对象将超出范围并不再存在。你的价值观来自其他地方。

```
 Rates myRates = new Rates(incLimit, lowRate, highRate);
    //rates.CalculateTax(incLimit);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T04:04:03.903

我*认为你的问题是这一行：

```
Taxpayer.GetRates(); 
```

这是一个静态方法，这意味着它不会设置任何类成员变量。我希望 GetRates() 返回一个 Rates 对象。

# c++ - 在向量上使用调整大小时，向量内部结构中的 unique_ptr 无法编译

> ID：10135017
> 
> 赞同：3
> 
> 时间：2012-04-13T03:53:58.453
> 
> 标签：c++, vector, c++11, visual-c++-2010, unique-ptr

VS2010

我有一个`unique_ptr`内部结构。然后我有一个`vector`这样的结构。如果我尝试调整向量的大小（或使用保留），我会收到编译错误。下面是一个仍然存在问题的精简示例。

```
struct Test
{
    unique_ptr<int> pValue;
};

void test()
{
    // this doesn't compile
    vector<Test> testVector;
    testVector.resize(5);

    // this also doesn't compile
    testVector.reserve(5);

    // this, of course, compiles
    vector<unique_ptr<int>> testVector2;
    testVector2.resize(5);
    testVector2.reserve(5);
} 
```

`unique_ptr`我得到的错误是关于访问（赋值运算符）的私有成员的抱怨。编译器正在尝试动态构造`Test &Test::operator =(const Test &)`和`Test::Test(const Test &)`。我不明白为什么调整大小操作需要调用这些函数中的任何一个（如果需要，它为什么不直接调用默认构造函数？）。它们都存在问题，因为`unique_ptr`由于`const`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T18:02:36.107

我讨厌打断你和自己的谈话。:-)

但答案是 VS2010 还没有完全实现 C++11 规范（这需要一些时间旅行）。 `Test`应该有一个默认的 noexcept 移动构造函数来调用`unique_ptr`移动构造函数。VS2010 没有实现这个隐式`Test`移动构造函数。如果是这样，您的完整示例将按预期编译和运行。 `vector`将使用 noexcept 移动构造函数在需要时移动东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:03:11.323

*（另一种写出并发布问题导致答案的情况）*

答案当然是`unique_ptr<>`没有复制语义。即便如此，在我需要打电话之前，我都可以使用上述安排`resize()`。我没有想到的是，`resize()`可能必须将块和其中的项目移动到另一个内存块。这就是复制发生的时候。虽然只是极其暂时的，但还是违反`unique_ptr<>`了复制过程中的唯一性。

更让我困惑的是，既然`unique_ptr<>`没有复制语义，`vector<unique_ptr<>>`也不应该工作。但答案肯定是已经为这种情况编写了模板特化。

我可能也可以编写一个模板专业化，`vector<Test>`以避免默认情况下对向量类进行延迟复制，从而避免上述编译器错误。但是我对这个结构的使用不需要性能，所以让它`shared_ptr<>`与它的复制语义一起使用可以完成我需要的一切。

# javascript - 在javascript中将图像添加到按钮

> ID：10135023
> 
> 赞同：0
> 
> 时间：2012-04-13T03:54:48.827
> 
> 标签：javascript, jquery, windows-phone-7

我在 javascript 中创建了一个按钮，我想为按钮使用图像而不是文本，但我还没有找到一种方法来做到这一点。到目前为止，由于某种原因，我引用的资源对我不起作用。到目前为止我所拥有的如下

**Javascript**

```
var sb=doc.createElement('input');              
sb.type='button';
//sb.value='Find';
sb.src = "url(/Resources/Icons/appbar.next.rest.png)";
sb.style.height='100%';
//sb.style.width='20%'; 
```

我的图像`/Resources/Icons/appbar.next.rest.png`位于我项目的目录中。有人可以为我指出如何正确使用按钮图像的正确方向吗？我是 javascript 新手，因此我们将不胜感激任何链接、代码或说明！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:59:40.073

```
Use input type="image", or use a button element with an <img> child. 
```

例如：

```
 <input type="image" src="art/clips/eightbll.gif" 
     name="input_img" width="63" height="64">

or

    <button type="button" id="input_img"> 
    <img src="art/clips/eightbll.gif" 
     alt="Image input control" width="63" height="64">
    </button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:01:38.217

要将图像添加到按钮，您可以将输入类型从按钮更改为图像：

```
var body = document.getElementsByTagName("body")[0];
var s = document.createElement("input");
s.src = "http://www.gravatar.com/avatar/a4d1ef03af32c9db6ee014c3eb11bdf6?s=32&d=identicon&r=PG";
s.type = "image";
body.appendChild(s); 
```

你可以修改它。

[http://jsfiddle.net/6HdnU/](http://jsfiddle.net/6HdnU/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T04:16:32.913

基于[此页面](http://blog.lexity.com/blog/2011/6/18/input-typeimage-considered-harmful.html)，如果您`input type="image"`打算`type="image"`对按钮执行任何操作（在服务器上*或*在 javascript.

基本上，您应该使用 CSS 的`background-image`属性，而不是使用按钮的纯 HTML 属性来显示输入。

js匹配你的：

```
var sb=doc.createElement('input');              
sb.type='button';
sb.class='myImageButton'; 
```

和这个CSS：

```
input.myImageButton {
  border: none;
  cursor: pointer;
  display: inline-block;
  text-indent: -3000px;
  background: url(/Resources/Icons/appbar.next.rest.png) no-repeat 50% 50%;
  /* width: 20%; */
  height: 100%;
} 
```

应该管用。

可能值得指出的是，如果你没有对这个按钮的价值做*任何事情*，那么这个答案并不值得你花时间。但你最好确定。

# webkit - 需要弄清楚 WebKit 把时间花在了哪里

> ID：10135025
> 
> 赞同：0
> 
> 时间：2012-04-13T03:54:54.210
> 
> 标签：webkit

我们目前使用的是 1.3.3 版的 WebKit。它在独立进程中运行，用于呈现网页。

我们遇到了一些性能问题，其中时间花在了 WebKit 层上。有没有一种方法可以让我们检测代码或使用一些工具来弄清楚内部发生了什么。

谢谢。

# asp.net - 从 ASP.NET 应用程序写入 IIS 日志

> ID：10135028
> 
> 赞同：11
> 
> 时间：2012-04-13T03:55:24.710
> 
> 标签：asp.net, iis, logging, iis-7, remote-debugging

我想让我的 ASP.NET 应用程序将行写入某处的日志。IIS 是否提供任何内置方式来记录 ASP.NET 日志消息？我在想可能有一种方法可以捕获对 System.Diagnostics.Debug.WriteLine() 的调用，但我找不到任何方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-21T00:44:48.590

尝试 Response.AppendToLog()，这将写入 IIS 日志文件。这很好，因为它不需要任何额外的软件。唯一的缺点是您的日志文件可能很大。我主要用它来识别 IIS 日志中记录的内容。例如。在他们登录时输入用户名，您可以跟踪他们的会话。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-13T04:05:31.347

[从 sysinternals](http://technet.microsoft.com/en-us/sysinternals/bb896647)捕获`Debug.Write`并`Debug.WriteLine`使用[**DebugView**](http://technet.microsoft.com/en-us/sysinternals/bb896647)。

[http://technet.microsoft.com/en-us/sysinternals/bb896647](http://technet.microsoft.com/en-us/sysinternals/bb896647)

当然你必须编译，`Debug=true`否则函数根本不会被调用。因此**Debug.Write 是一种仅用于实时测试和调试应用程序的好方法，而不是一般记录错误的解决方案**。对于您喜欢保存错误的情况，我认为您需要使用其他用户建议的一个库，或者直接在事件查看器上写下您的错误。

ps：*由于某种原因，4.78 版无法在我的 windows xp 上运行，我切换回 4.77*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T04:11:19.153

我通常做的是使用3rd-party logging框架，通过配置文件配置框架（即无需重新编译）。

我使用的框架是：

*   [log4net](http://logging.apache.org) – 它有很多所谓的“附加程序”来写入不同的目标，如 Windows 事件日志或数据库或日志文件。
*   [NLog](http://nlog-project.org/) – 一个比 log4net 更容易使用的日志框架。

您必须在应用程序中插入适当的日志函数调用才能真正触发正在创建的日志条目。

由于您的问题标题表明您要写入与 IIS 相同的日志（文件）；我不知道如何解决这个要求（独自一人我无法想象你会这样做的原因）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T04:05:55.693

据我所知 Debug.WriteLine 写入调试输出。您可以在调试器中看到它并从那里保存它。它不写日志文件..[调试类](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.aspx)

1.  调试类成员是条件属性[请参阅此答案以获取解释](https://stackoverflow.com/questions/1600985/system-diagnostics-debug-writeline-in-production-code)

你可以试试[ELMAH](http://code.google.com/p/elmah/)，

> 是一个完全可插拔的应用程序范围的错误记录工具。它可以动态添加到正在运行的 ASP.NET Web 应用程序，甚至是一台机器上的所有 ASP.NET Web 应用程序，无需重新编译或重新部署。

或者你可以试试[Log4Net](http://logging.apache.org/log4net/)

# javascript - javascript中的覆盖方法

> ID：10135029
> 
> 赞同：0
> 
> 时间：2012-04-13T03:55:33.267
> 
> 标签：javascript, overriding, prototype

我的问题是我不明白为什么这个覆盖在这里不起作用是源

```
window.onload=function()
{
   function Person(first,last)
   {
      this.First=first;
      this.Last = last;
      this.Full=function()
      {
         return this.First+" "+this.Last;
      };
   }

   Person.prototype.GetFullName=function()
   {
      return this.First + " " + this.Last;
   } ;

   function Employee(first,last,position)
   {
      Person.call(this,first,last);
      this.Position=position;
   }
   /* Employee.prototype = new Person();
   var t = new Employee("Mohamed","Zaki","Web Developer");

   alert(t.GetFullName());
    */
   Employee.prototype.GetFullName=function()
   {
      var x = Person.prototype.GetFullName.call(this);
      return x + " , " + this.Position ; 
   }
   var e = new Employee("Mohamed","Zaki","Web Developer");
   alert(e.GetFullName());
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:40:19.633

如果我理解您的问题，您注释掉的代码不起作用，因为它是在覆盖 GetFullName 之前执行的。

```
/* 
   **** this code is executed before GetFullName is overridden and will use
   **** original function 
   Employee.prototype = new Person();
   var t = new Employee("Mohamed","Zaki","Web Developer");

   alert(t.GetFullName());
    */

   Employee.prototype.GetFullName=function()
   {
      var x = Person.prototype.GetFullName.call(this);
      return x + " , " + this.Position ; 
   }

   /**** This code is executed after GetFullName is overridden uses the new version */
   var e = new Employee("Mohamed","Zaki","Web Developer");
   alert(e.GetFullName());
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:43:34.233

首先，删除 window.onload 包装器，因为它没有做任何有用的事情。解释如下：

```
 function Person(first,last) { 
    this.First = first; 
    this.Last = last; 
    this.Full = function() { 
      return this.First + " " + this.Last; 
    }; 
  } 

  Person.prototype.GetFullName = function() {  
    return this.First + " " + this.Last; 
  } ; 

  function Employee(first,last,position) { 
    Person.call(this,first,last); 
    this.Position = position; 
  } 
  Employee.prototype = new Person(); 

  var t = new Employee("Mohamed","Zaki","Web Developer"); 

  // Here getFullName is called before the new method is added
  // to Person.prototype so you only get first and last name
  alert(t.GetFullName()); 

  // Here is where the new method is added
  Employee.prototype.GetFullName=function() { 
    var x = Person.prototype.GetFullName.call(this); 
    return x + " , " + this.Position ; 
  }

  var e = new Employee("Mohamed","Zaki","Web Developer"); 

  // so here you get first, last and position
  alert(e.GetFullName()); 

  // And existing instances get the new method too
  alert(t.GetFullName()); 
```

# sql - 如何优化在 Oracle 数据库上运行的 SELECT 语句？

> ID：10135030
> 
> 赞同：1
> 
> 时间：2012-04-13T03:55:57.187
> 
> 标签：sql, oracle

我在 ORACLE 中有一个 SELECT 语句：

```
SELECT COUNT(DISTINCT ds1.endpoint_msisdn)                  multiple30,
       dss1.service,
       dss1.endpoint_provisioning_id,
       dss1.company_scope,
       Nvl(x.subscription_status, dss1.subscription_status) subscription_status
FROM   daily_summary ds1
       join daily_summary ds2
         ON ds1.endpoint_msisdn = ds2.endpoint_msisdn,
       daily_summary_static dss1,
       daily_summary_static dss2,
       (SELECT NULL subscription_status
        FROM   dual
        UNION ALL
        SELECT -2 subscription_status
        FROM   dual) x
WHERE  ds1.summary_ts >= To_date('10-04-2012', 'dd-mm-yyyy') - 30
       AND ds1.summary_ts <= To_date('10-04-2012', 'dd-mm-yyyy')
       AND dss1.last_active >= To_date('10-04-2012', 'dd-mm-yyyy') - 30
       AND dss1.last_active <= To_date('10-04-2012', 'dd-mm-yyyy')
       AND dss2.last_active >= To_date('10-04-2012', 'dd-mm-yyyy') - 30
       AND dss2.last_active <= To_date('10-04-2012', 'dd-mm-yyyy')
       AND dss1.service <> dss2.service
       AND ( dss1.company_scope = 2
              OR dss1.company_scope = 5 )
       AND ( dss2.company_scope = 2
              OR dss2.company_scope = 5 )
       AND dss1.company_scope = dss2.company_scope
       AND ds1.endpoint_noc_id = dss1.endpoint_noc_id
       AND ds1.endpoint_host_id = dss1.endpoint_host_id
       AND ds1.endpoint_instance_id = dss1.endpoint_instance_id
       AND ds2.endpoint_noc_id = dss2.endpoint_noc_id
       AND ds2.endpoint_host_id = dss2.endpoint_host_id
       AND ds2.endpoint_instance_id = dss2.endpoint_instance_id
       AND dss1.endpoint_provisioning_id = dss2.endpoint_provisioning_id
       AND Least(1, ds1.total_actions) = 1
       AND Least(1, ds2.total_actions) = 1
GROUP  BY dss1.service,
          dss1.endpoint_provisioning_id,
          dss1.company_scope,
          Nvl(x.subscription_status, dss1.subscription_status); 
```

此查询在我的环境中返回大约需要 26 分钟，但如果我删除该部分：

```
dss1.last_active >= to_date('10-04-2012','dd-mm-yyyy') - 30 AND
                   dss1.last_active <= to_date('10-04-2012','dd-mm-yyyy') AND
                    dss2.last_active >= to_date('10-04-2012','dd-mm-yyyy') - 30 AND
                   dss2.last_active <= to_date('10-04-2012','dd-mm-yyyy') AND 
```

运行只需要 20 秒。

我们在 last_active 列上有索引，我不知道为什么该部分会降低性能这么多？有任何想法吗？

* * *

如果我运行它，它会非常快。

`select * from daily_summary_static where last_active >= to_date('10-04-2012','dd-mm-yyyy') - 30 AND last_active <= to_date('10-04-2012','dd-mm-yyyy');`

* * *

解释语句的计划，我在这里没有看到任何全表扫描，不知道为什么它运行得这么慢：

```
----------------------------------------------------------------------------------------------------------------
| Id  | Operation                               | Name                 | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                        |                      |     1 |   119 |   204   (3)| 00:00:03 |
|   1 |  SORT GROUP BY                          |                      |     1 |   119 |   204   (3)| 00:00:03 |
|   2 |   MERGE JOIN CARTESIAN                  |                      |     1 |   119 |   203   (2)| 00:00:03 |
|*  3 |    TABLE ACCESS BY INDEX ROWID          | DAILY_SUMMARY        |     1 |    27 |    11   (0)| 00:00:01 |
|   4 |     NESTED LOOPS                        |                      |     1 |   116 |   199   (3)| 00:00:03 |
|*  5 |      HASH JOIN                          |                      |     3 |   267 |   178   (3)| 00:00:03 |
|*  6 |       HASH JOIN                         |                      |     1 |    65 |   140   (2)| 00:00:02 |
|   7 |        TABLE ACCESS BY INDEX ROWID      | DAILY_SUMMARY_STATIC |    61 |  1647 |    37   (3)| 00:00:01 |
|   8 |         BITMAP CONVERSION TO ROWIDS     |                      |       |       |            |          |
|   9 |          BITMAP AND                     |                      |       |       |            |          |
|  10 |           BITMAP CONVERSION FROM ROWIDS |                      |       |       |            |          |
|  11 |            SORT ORDER BY                |                      |       |       |            |          |
|* 12 |             INDEX RANGE SCAN            | DSS_LAST_ACTIVE      |   560 |       |     3   (0)| 00:00:01 |
|  13 |           BITMAP OR                     |                      |       |       |            |          |
|  14 |            BITMAP CONVERSION FROM ROWIDS|                      |       |       |            |          |
|* 15 |             INDEX RANGE SCAN            | DSS_C_SCOPE_IDX      |   560 |       |    18   (0)| 00:00:01 |
|  16 |            BITMAP CONVERSION FROM ROWIDS|                      |       |       |            |          |
|* 17 |             INDEX RANGE SCAN            | DSS_C_SCOPE_IDX      |   560 |       |     1   (0)| 00:00:01 |
|  18 |        TABLE ACCESS BY INDEX ROWID      | DAILY_SUMMARY        |  1773 | 67374 |   102   (0)| 00:00:02 |
|* 19 |         INDEX RANGE SCAN                | DS_DAILY_ACTIVE_IDX  |  1767 |       |    14   (0)| 00:00:01 |
|  20 |       TABLE ACCESS BY INDEX ROWID       | DAILY_SUMMARY_STATIC |    61 |  1464 |    37   (3)| 00:00:01 |
|  21 |        BITMAP CONVERSION TO ROWIDS      |                      |       |       |            |          |
|  22 |         BITMAP AND                      |                      |       |       |            |          |
|  23 |          BITMAP CONVERSION FROM ROWIDS  |                      |       |       |            |          |
|  24 |           SORT ORDER BY                 |                      |       |       |            |          |
|* 25 |            INDEX RANGE SCAN             | DSS_LAST_ACTIVE      |   560 |       |     3   (0)| 00:00:01 |
|  26 |          BITMAP OR                      |                      |       |       |            |          |
|  27 |           BITMAP CONVERSION FROM ROWIDS |                      |       |       |            |          |
|* 28 |            INDEX RANGE SCAN             | DSS_C_SCOPE_IDX      |   560 |       |    18   (0)| 00:00:01 |
|  29 |           BITMAP CONVERSION FROM ROWIDS |                      |       |       |            |          |
|* 30 |            INDEX RANGE SCAN             | DSS_C_SCOPE_IDX      |   560 |       |     1   (0)| 00:00:01 |
|* 31 |      INDEX RANGE SCAN                   | DS_PKEY              |     8 |       |     2   (0)| 00:00:01 |
|  32 |    BUFFER SORT                          |                      |     2 |     6 |   193   (3)| 00:00:03 |
|  33 |     VIEW                                |                      |     2 |     6 |     4   (0)| 00:00:01 |
|  34 |      UNION-ALL                          |                      |       |       |            |          |
|  35 |       FAST DUAL                         |                      |     1 |       |     2   (0)| 00:00:01 |
|  36 |       FAST DUAL                         |                      |     1 |       |     2   (0)| 00:00:01 |
---------------------------------------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:55:52.297

由于本节实际上使它变慢了：

```
AND dss1.last_active >= To_date('10-04-2012', 'dd-mm-yyyy') - 30
AND dss1.last_active <= To_date('10-04-2012', 'dd-mm-yyyy')
AND dss2.last_active >= To_date('10-04-2012', 'dd-mm-yyyy') - 30
AND dss2.last_active <= To_date('10-04-2012', 'dd-mm-yyyy') 
```

在我看来，索引 on`last_active`在不应该使用的情况下被使用，即它阻止使用另一个更有用的索引。我赌的是另一个用于连接 dss1 和 dss2 的索引，但实际上这并不重要。

因此，我建议通过故意更改块来禁用索引使用，这样查询优化器就不能再使用索引：

```
AND (dss1.last_active+0) >= To_date('10-04-2012', 'dd-mm-yyyy') - 30
AND (dss1.last_active+0) <= To_date('10-04-2012', 'dd-mm-yyyy')
AND (dss2.last_active+0) >= To_date('10-04-2012', 'dd-mm-yyyy') - 30
AND (dss2.last_active+0) <= To_date('10-04-2012', 'dd-mm-yyyy') 
```

# c# - 将 Linq2SQL 简单查询转换为 CompiledQueries 以提高应用程序性能

> ID：10135031
> 
> 赞同：1
> 
> 时间：2012-04-13T03:56:01.503
> 
> 标签：c#, silverlight, windows-phone-7, linq-to-sql, compiled-query

我正在编写适用于 Windows Phone (SDK 7.1) 的 Silverlight 应用程序，并在`LongListSelector`适用于 Windows Phone 的 Silverlight 工具包的控件中显示来自 CompactSQL DB 的数据。

一旦列表长到大约 150 个项目，该应用程序真的会减慢加载数据的速度，在页面之间导航和动画无法显示（我知道使用后台线程将有助于释放 UI 线程用于动画）。

我目前有三个经常使用的查询——每次更新 LongListSelector 中的数据或页面为 NavigatedTo 时。我已经转换`MoviesByTitle`成 a `CompiledQuery`，这有很大帮助，所以我希望对我的其他两个查询（`groupedMovies`和`LongListSelector.ItemSource`type `List<Group<Movie>>`）做同样的事情，但是我似乎无法弄清楚正确的语法。

关于如何使这些查询更有效的任何建议 - 通过使用`CompiledQuery`或其他方式？

`MoviesByTitle`在另一个名为`Queries`

```
public static Func<MovieDBContext, IOrderedQueryable<Movies>> MoviesByTitle = CompiledQuery.Compile((MovieDBContext db) => from m in db.Movies orderby m.Title,m.Year select m); 
```

MainPage 中的字段

```
private static List<String> characters = new List<String> { "#", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z" };
public static List<Group<Movies>> emptyGroups = new List<Group<Movies>>(); 
```

在 MainPage 的 LoadDB() 方法中 - 在更新 DB 时，在 OnNavigatedTo 和其他几个地方调用此方法。

```
//Populates the 'empty' Groups of Movies objects only once.
if (emptyGroups.Count < 1)
{
    characters.ForEach(x => emptyGroups.Add(new Group<Movies>(x, new List<Movies>())));
}

IEnumerable<Movies> query = Queries.MoviesByTitle(App.db);

//Groups the objects 
IEnumerable<Group<Movies>> groupedMovies = (from t in query
                                            group t by t.GroupHeader into grp
                                            orderby grp.Key
                                            select new Group<Movies>(grp.Key.ToString(), grp));

//Joins the 'empty' group and groupedMovies together for the LongListSelector control
moviesLongList.ItemsSource = (from t in groupedMovies.AsEnumerable().Union(emptyGroups)
                              orderby t.Title
                              select t).ToList(); 
```

`GroupHeader`是数据库中的一个属性`Movies`和一个实体

```
[Column(CanBeNull=true, UpdateCheck = UpdateCheck.Never)]
public char GroupHeader
    {
        get
        {
            char l;
            //For Alphabetized Grouping, titles do NOT start with "The ..."
            if (this.Title.ToLowerInvariant().StartsWith("the "))
            {
                l = this.Title.ToLowerInvariant()[4];
            }
            else
            {
                l = this.Title.ToLower()[0];
            }
            if (l >= 'a' && l <= 'z')
            {
                return l;
            }
            return '#';
        }
        set { }
    } 
```

班级`Group`如下

```
public class Group<T> : IEnumerable<T>
{
    public Group(string name, IEnumerable<T> items)
    {
        this.Title = name;
        this.Items = new List<T>(items);
    }

    public string Title
    {
        get;
        set;
    }

    public IList<T> Items
    {
        get;
        set;
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T12:26:58.793

I assume that `GroupHeader` is an entity stored in the DB with 1-n relationship to the `Movie` entity.

First of all, I don't see 3 DB queries here. A LINQ expression is not always a DB query (e.g. there's LINQ to Objects). Sometimes determining what really is going on is quite challenging. The best friend in such cases is a DB profiler tool or the IntelliTrace - they show what queries are being executed on the DB at run time.

As far as I understand the code, you actually have `1+N` queries: the first is `MoviesByTitle`, and then you have `N` queries in the expression that gets the movies grouped by their headers. It's `N` instead of `1` because you cast `query` to `IEnumerable<>` which **makes it no longer a query but a simple CLR object**, which is simply iterated in a `foreach`-like loop sending queries to the DB each time it needs a `GroupHeader` entity (it's an entity, isn't it?).

Try to combine 2 queries into one. You might even not need to use `CompiledQuery`. Here's an approximate code:

```
// I left this without changes
if (emptyGroups.Count < 1)           
{           
    characters.ForEach(x => emptyGroups.Add(new Group<Movies>(x, new List<Movies>())));           
} 

// I put var here, but it actually is an IQueryable<Movie>
var query = from m in App.db.Movies orderby m.Title, m.Year select m;

// Here var is IQueryable<anonymous type>, I just can't use anything else but var here
var groupedMoviesQuery = from t in query
                    group t by t.GroupHeader into grp 
                    orderby grp.Key 
                    select new
                    {
                       Movies = grp,
                       Header = grp.Key
                    }; 

// I use AsEnumerable to mark that what goes after AsEnumerable is to be executed on the client
IEnumerable<Group<Movie>> groupedMovies = groupedMoviesQuery.AsEnumerable()
                                            .Select(x => new Group<Movie>(x.Header, x.Movies))
                                            .ToList();

//No changes here
moviesLongList.ItemsSource = (from t in groupedMovies.AsEnumerable().Union(emptyGroups)            
                              orderby t.Title            
                              select t).ToList(); 
```

This code should work way better. What I actually did is that I turned your `query` from `IEnumerable` which is an iterate-only CLR object to an `IQueryable` which can be further wrapped into a more complex query. Now there's only one query which gets all movies grouped by headers. It should be fast.

I would introduce even more improvements to the code to make it work even faster:

1.  You use `Union` of entities read from the DB and of some default list. You order it afterwards. You can safely remove all other orderings from your Linq2Sql code ('query' and 'groupedMoviesQuery')
2.  Grouping seems to be not the most efficient here as compared to a join. Why don't you just query `GroupHeader`s including their related `Movie`s? That should produce a JOIN in the db query which should be more efficient than a GROUP BY.
3.  If you still have issues with performance, you can turn the query into a compiled query.

I'll show an example of a compiled query for you original logic with optimization of the first item of the list above:

```
class Result
{
  public GroupHeader Header {get;set;}
  public IEnumerable<Movie> Movies {get;set;}
}

public static Func<MovieDBContext, IQueryable<Result>> GetGroupHeadersWithMovies =
  CompiledQuery.Compile((MovieDBContext x) => 
      from m in x.Movies
      group m by m.GroupHeader into grp 
      select new Result
      {
        Movies = grp,
        Header = grp.Key
      }); 
```

# expect - 使用期望循环输出并发送到文件

> ID：10135032
> 
> 赞同：0
> 
> 时间：2012-04-13T03:56:16.830
> 
> 标签：expect

我正在尝试使用 expect 登录到设备，获取配置并将其写入文件（我不能使用 ssh 密钥，设备不支持它，并且该东西实际上有两个登录名）。

问题是当我使用它时，数据被截断（我只得到配置文件的最后约 100 行）：

```
...snip...
match_max 100000
set timeout 150
set output [open "outputfile.txt" "w"]
set config $expect_out(buffer)
puts $output $config
close $output
...snip... 
```

所以现在，根据我在某处读到的建议，我正在尝试使用 expect 来循环输出，一次一行，但我无法像没有循环那样让数据输出。这是不起作用的代码。配置约为 700 行。

```
#!/usr/bin/expect
match_max 50000
spawn ssh admin@192.168.1.10
expect "password"
send "password1\r"
expect "user"
send "root\r"
expect "password"
send "password2\r"

set outcome {}
set writeout [open "outputfile.txt" "w"]

expect "device"
exp_send "show running\r"
expect {
        -regexp {.*}{
        set outcome "${outcome}$expect_out(0,string)"
        exp_continue
        }
}
puts $writeout $outcome
close $writeout

expect "device"
send "exit\r"
send "yes\r" 
```

任何帮助将不胜感激。如果您需要更多信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:37:33.183

您提供的循环相当于等待超时（默认为 10 秒，因为脚本没有设置它）。

`show running`打印它的输出需要多长时间？等待命令完成后显示的某些模式可能值得等待（我认为它是`"device"`但可能更好地提供更具体的终端条件）。

```
exp_send "show running\n"
expect "show running" ;#don't want the command present in captured output
set timeout 60
expect {
   "device" { set raw_outcome $expect_out(0,string) }
   timeout { error "command didn't finish in 60 sec?' }
}
#now the raw_outcome contains everything what was displayed up-to the "device"
#including this string, so filter out the terminal condition:
regexp {(.*)device} $raw_outcome match outcome
puts $writeout $outcome
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T09:25:36.477

这个错误的根源是Expect的多线程：Expect在一个单独的线程中开始与远程系统通信，并且它的输出不与maint线程的输出同步。因此，如果您尝试在子线程完成之前向主线程的 sdtout 写入内容，您可能会在 Expect 中遇到死锁。

# ruby-on-rails-3 - Rails 3 命名路线，带有段键“无路线匹配”搜索表

> ID：10135034
> 
> 赞同：0
> 
> 时间：2012-04-13T03:56:49.803
> 
> 标签：ruby-on-rails-3, routes

在我的 search_field_tag 中调用 search_path 时出现“无路由匹配”错误。搜索表单在我的标题中，这个想法只是为了能够对事件进行搜索。

这是 routes.rb 中的路线：

```
match '/events/search/:query' => 'events#search', :as => "search" 
```

这是搜索表单的代码。

```
<%= form_tag search_path, :method => :get do %>
    <%= text_field_tag :query, params[:query] %>
    <%= submit_tag "search", :name => :nil %>
<% end %> 
```

（如何确保当我提交此表单时，它将提交到 /events/search/:query？：query 是 search_field_tag 中的值）

这是我的 events_controller 中的代码

```
def search 
      @search_q = params[:query]
      @events = Event.search @search_q #uses thinking sphinx

      respond_with @events
  end 
```

我还创建了 /views/events/search.html.erb

我很确定错误来自我说 search_path 的搜索表单中的行。其他一切似乎都完全按照我的预期工作，但是，例如，如果我访问 /events/search/someterm 它完全按照我的预期工作。只需插入搜索表单并提交到 events#search。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:29:14.277

我认为这里的问题是查询是作为发布请求传递的。您的路线正在寻找：

```
/events/search 
```

如您所定义的：

```
/events/search/:query 
```

因此，只需将 /:query 放在路线末尾即可。查询在 post 上作为参数传递。无需在路线中使用它。

# mysql - mysql排序顺序操作

> ID：10135037
> 
> 赞同：1
> 
> 时间：2012-04-13T03:57:12.370
> 
> 标签：mysql

我有一个与我目前正在从事的项目有关的问题。在我的脚本中，所有帖子当前都以这种方式显示：

```
 $sql = "SELECT * FROM posts" 
      . "\n WHERE page_slug = '" . $this->slug . "'" 
      . "\n AND active = '1'" 
      . "\n ORDER BY id DESC" . $pg->limit;
      $result = $db->fetch_all($sql); 
```

这很好，尽管现在的问题是，我希望某个项目首先显示在所有其他项目之前。我试图给这个特定项目一个非常高的 ID（例如 1000），尽管如果我创建一个新帖子，新帖子 ID 突然以 1001 开头并且它跳到第一个位置。

有没有人知道如何避免这种情况发生，或者至少我如何通过某种方式调整排序顺序来“欺骗”特定项目以使其处于第一个位置？

一些建议将不胜感激。

非常感谢，帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:00:34.003

```
$sql = "SELECT *, case when id = 1000 then 0 else 1 end as OrderMe  FROM posts" 
  . "\n WHERE page_slug = '" . $this->slug . "'" 
  . "\n AND active = '1'" 
  . "\n ORDER BY OrderMe, id DESC" . $pg->limit;
  $result = $db->fetch_all($sql); 
```

当然，您不必在 case 语句中使用 1000 作为 id，但您提到那是您想要在上面的那个的 id...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T04:09:34.000

`trick`正如您所说，您可以通过以下方式使用 DBMS：

```
SELECT * FROM posts
WHERE page_slug = @slug AND active = 1
ORDER BY (id != @yourID), id DESC, LIMIT @limit 
```

`@limit`和`@slug`是您当前的变量。`@yourID`变量是您想要在顶部的 ID 。如果不止一个，请使用`in()`从句。基本上，对于 ID 等于您要查找的帖子的帖子，这将返回`false`，或者实际上，对于其余帖子，这将返回，或者实际上。`0``true``1`

因此，对新生成的值应用第一个和升序将导致`0`顶部带有（相等的）的值:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T04:00:07.297

您可以添加一个名为`rank`（或其他有意义的东西）的新列，将其分配给更重要的行高于零的某个值。然后你会先订购`rank`，然后订购`id`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T04:01:13.673

如果它还不是某种模块，则将该代码转换为模块并且不要复制它 - 它应该很容易更改。然后，只需将一些`INT`字段添加到数据库（`priority`例如）和`ORDER BY`优先级，然后按 ID。

# python - 导入类全局名称未定义

> ID：10135039
> 
> 赞同：0
> 
> 时间：2012-04-13T03:57:37.293
> 
> 标签：python

样本1.py

```
class1:

    def function(self): 

        dbcursor.execute('UPDATE Table') 
```

主文件

```
from sample1 import class1

inventoryDb = inventory.connect('sample.db')

dbcursor = inventoryDb.cursor()

class = class1()

class.function() 
```

> > NameError：未定义全局名称“dbcursor”

# 是什么导致了这里的错误？还有，怎么修？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:02:13.457

`dbcursor`仅在 main.py 中定义。为什么不将它作为参数传递给 sample1.py 中的函数？就像是

```
def function(self, dbcursor):
    dbcursor.execute('UPDATE Table')

class_ = class1()
inventoryDb = inventory.connect('sample.db')
class_.function(inventoryDb.cursor()) 
```

# javascript - 客户端 ajaxComplete 调用生成无限 iframe

> ID：10135046
> 
> 赞同：2
> 
> 时间：2012-04-13T03:58:59.433
> 
> 标签：javascript, iframe, greasemonkey

好吧，这是我的问题。我正在编写一个 Greasemonkey 脚本以在 AJAXified 站点上插入两个 iframe，但 ajaxComplete 陷入循环并生成过多的 iframe（有时是一个，有时是五个等），gener。

我已经完成了我的研究，[我认为]我的问题是我没有正确地将调用绑定到文档，但对此我不确定。我不确定您将如何以与我已有的不同的方式进行操作。如果你们能指出我正确的方向，我将不胜感激。这是有问题的代码：

```
function OnLoadWidgets() {
    var tempSC = document.createElement("div");                                        
        tempSC.id = "SCWidget";
        tempSC.innerHTML = "..."
    document.getElementById("content-right").appendChild(tempSC);
    var tempMC = document.createElement("div");                                        
        tempMC.id = "MCWidget";
        tempMC.innerHTML = "..."
   document.getElementById("content-right").appendChild(tempMC);

}   

unsafeWindow.jQuery(document).ajaxComplete(function()
{   
    var existingSCPlayer = document.getElementById("SCWidget");                     
    if(typeof(existingPlayer) == "undefined")
    {
        OnLoadWidgets();
    }
}); 
```

您可以在此处查看其余代码：http: [//userscripts.org/scripts/show/127312](http://userscripts.org/scripts/show/127312)

也想借此机会感谢你们所有的辛勤工作。真是太感谢你了。堆栈 == 救生员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:28:32.183

(1) 目标站点[hypem.com](http://hypem.com/)使用自己的 iframe，您的 Greasemonkey 脚本也会在这些 iframe 上触发。

通过添加以下内容来防止这种情况：

```
if (window.top != window.self)  //-- Don't run on frames or iframes.
    return; 
```

靠近脚本顶部。

(2) 代码中有变量名拼写错误。`existingSCPlayer`与`existingPlayer`.

(3) 改进重复检查，使其更具包容性。使用此代码：

```
unsafeWindow.jQuery (document).ajaxComplete ( function () {
    var existingSCPlayer = document.getElementById ("SCWidget");
    var existingMCPlayer = document.getElementById ("MCWidget");
    if ( ! existingSCPlayer  &&  ! existingMCPlayer) {
        OnLoadWidgets();
    }
} ); 
```

# jakarta-ee - EJB 3 的先决条件

> ID：10135048
> 
> 赞同：0
> 
> 时间：2012-04-13T03:59:29.870
> 
> 标签：jakarta-ee, ejb-3.0

在开始 EJB 3 之前，我是否需要实践经验？

1.  RMI
2.  外观、依赖注入等设计模式
3.  JPA
4.  EJB 2（我阅读了一些教程并观察到他们都将 EJB 3 与 EJB 2 进行了比较。所以他们跳过了 EJB 的基本概念。）
5.  注释
6.  还有什么，我错过了

如果需要动手经验，请建议一些源/教程以便快速浏览。所以我可以尽快启动 EJB 3。

*   我很清楚依赖注入和外观模式和注释。
*   我了解 RMI 的基本知识。但我对他们没有信心。
*   我从未与 JPA 合作过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:28:16.647

理解注释绝对是必须的。但是，如果您具备这些和基本的 Java 编程技能，我建议您直接投入。

*   [@Stateless bean 教程](http://openejb.apache.org/examples-trunk/simple-stateless)
*   [@Stateful bean 教程](http://openejb.apache.org/examples-trunk/simple-stateful)
*   [@Singleton bean 教程](http://openejb.apache.org/examples-trunk/simple-singleton)

查看和运行代码绝对是最好的学习方式。

Stackoverflow 可以提供的好处越多，问题就越具体。所以至少，上面的代码可以被看作是获得更具体问题的一种方法:)

快乐学习！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:00:04.420

绝对不需要 Ejb2 知识。更好的是，甚至不推荐 EJB2 知识。

Home 接口、实体 Bean（不要与 JPA 实体混淆）和​​可移植远程对象是只会给您带来负担的东西，而在 EJB3 中了解这些并没有任何好处。

最好忘记 EJB2 的存在，直接以 EJB3 的方式学习。

RMI 也不是先决条件。对于 IFF 来说，这是一个特殊情况，您想使用远程 bean，即使那样，您也不必非常了解 RMI 就可以使用它。

# pointers - 如何区分指针与 C 中的普通变量，在引擎盖下

> ID：10135052
> 
> 赞同：0
> 
> 时间：2012-04-13T04:00:09.113
> 
> 标签：pointers, memory-management, virtual-memory, dereference

保存虚拟地址的指针如何指向数据？

处理器如何知道指针的内容是地址而不是数据本身？

有人可以给我一个逐步的过程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:08:44.293

简而言之，`C`处理指针的代码被编译为处理地址的 CPU 操作代码——因此，数字——对值执行操作的物理机器代码，只是与对地址执行操作的指令代码不同的指令代码（指针）。

现实当然比这更复杂。您可以`C`按照此堆栈溢出问题中的说明详细了解不同（小）程序 会发生什么情况[How do you get assembler output from C/C++ source in gcc?](https://stackoverflow.com/questions/137038/how-do-you-get-assembler-output-from-c-c-source-in-gcc)

在更深的层次上，操作系统和 CPU 虚拟化物理内存——因此，在硬件中请求地址 x 的内存的指令使用虚拟查找表从物理地址 y 获取内存——这是一种现代开发，它允许安全性和内存管理功能，例如内存随机化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:05:46.850

您是在询问有关已编写整本书的问题，但要点如下：

1.  通过取消引用指针。指针*是*内存中的地址，因此指针准确地描述了检索它指向的数据的位置。
2.  因为代码告诉编译器（通过`*`）一个变量持有一个指针。编译器将这些信息转换成代码，告诉处理器该做什么。处理器“不*知道指针的内容是地址而不是数据本身”；*它只是按照机器代码的指示进行。
3.  一步一步的过程是什么？

# android - 使用嵌套的 LinearLayout 时，Layout_weight 无法正常工作

> ID：10135053
> 
> 赞同：0
> 
> 时间：2012-04-13T04:00:11.837
> 
> 标签：android, android-layout, android-linearlayout, android-layout-weight

我想让我的 LinearLayout 以所需的比例显示视图。我已经阅读了大约 10 或 15 个关于 LinearLayout 和 layout_weight 的其他问题，但由于某种原因，似乎没有答案适用于我的案例。我正在创建一个自定义 AlertDialog 颜色选择器，其中创建了一个自定义视图，如下所示：

```
private LinearLayout createLayout() {
    //Create our top-level layout
    LinearLayout mainLayout = new LinearLayout(mContext);
    mainLayout.setOrientation(LinearLayout.VERTICAL);
    mainLayout.setPadding(15, 0, 15, 0);
    //Make the preset view at the top
    LinearLayout.LayoutParams presetViewParams = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 0, 0.2f);
    mainLayout.addView(new PresetView(mContext), presetViewParams);
        //Create another linear layout
        LinearLayout subLayout = new LinearLayout(mContext);
        subLayout.setOrientation(LinearLayout.HORIZONTAL);
        subLayout.setPadding(0, 15, 0, 15);
        //Add the Sat Lum View to the second layout
        LinearLayout.LayoutParams satLumViewParams = new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 0.60f);
        subLayout.addView(new SatLumView(mContext), satLumViewParams);
        //Add the divider between the sat lum view and the hue view
        LinearLayout.LayoutParams dividerViewParams = new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 0.1f);
        subLayout.addView(new DividerView(mContext), dividerViewParams);
        //Add the Hue View to the second layout
        LinearLayout.LayoutParams hueViewParams = new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 0.30f);
        subLayout.addView(new HueView(mContext), hueViewParams);
        //Add the second layout to the first layout
        LinearLayout.LayoutParams subLayoutParams = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 0, 0.7f);
        mainLayout.addView(subLayout, subLayoutParams);
    //Add the Line view at the bottom of the main layout
    LinearLayout.LayoutParams lineParams = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 0, 0.1f);
    mainLayout.addView(new LineView(mContext), lineParams);
    //Return our completed layout
    return mainLayout;
} 
```

我遇到的问题是，尽管将我的三个垂直元素（PresetView、subLayout 和 LineView）的 layout_height 设置为`0`，但权重仍然没有按照我想要的方式分配可用空间。subLayout 没有得到 70% 的空间，但总是更少。

据我所知，PresetView 总是获得尽可能多的垂直空间，而 subLayout 和 LineView 则保留了剩余的空间。这是我`onMeasure()`的 PresetView 方法：

```
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int width = resolveSize(250, widthMeasureSpec);
        int height = resolveSize(150, heightMeasureSpec);
        setMeasuredDimension(width, height);
    } 
```

250 和 150 是相当随意的值 - PresetView 旨在使用几乎任何尺寸集（因为我希望 LinearLayout 控制它的大小！）。

我的印象是使用 0 的 layout_height 并指定权重会使布局控制 View 占用的空间，而不是由 View 控制它。当我将它的 layout_height 设置为 0 时，为什么 PresetView 仍然占用完整的 150 像素？

其他 View的`onMeasure()`方法与 PresetView 的方法相同，只是值不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:11:55.933

看起来我不正确地覆盖了 onMeasure() 。如果视图具有预定义的测量值（您知道它将是 250 x 150 像素），我采用的路线很有用。但是，由于我希望我的视图可以缩放以适应任何屏幕尺寸并完全由它们的布局控制，所以我需要做的就是使用默认的 onMeasure() 实现：

```
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    } 
```

这允许 layout_weight 属性处理子视图的所有大小。

# entity-framework-4 - EF 4.3 代码优先 - 如何设置默认值

> ID：10135058
> 
> 赞同：0
> 
> 时间：2012-04-13T04:01:14.237
> 
> 标签：entity-framework-4, default-value

我有一个这样的实体：

```
public class Part : Entity
{
    public int Id { get; set; }

    public string Name { get; set; }

    public IEnumerable<VersionSection> VersionSections
    {
        get
        {
            return Sections.Where(s => s is VersionSection).Cast<VersionSection>();
        }
    }

    public virtual ICollection<Section> Sections { get; set; }      

    public Part()
    {
        this.Sections = new List<Section>();            
    }
} 
```

当我为该业务创建一个新的 Part 实例时，我想为 Sections 集合设置默认值：

*   创建零件时，应创建默认截面（名称 = “截面 1”）。这不能被删除。

创建一个新的没有问题，但是当从数据库中获取数据时，EF会创建一个默认的Section实例并将数据库中的数据添加到我的实体中，所以这是错误的。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:57:23.553

在创建实体时，没有万无一失的方法可以实现您所需要的。但是，您可以在实体保存之前执行此操作。

```
public class MyContextTest : DbContext
{
    public override int SaveChanges()
    {
        var parts = ChangeTracker.Entries<Part>()
            .Where(e => e.State == System.Data.EntityState.Added)
            .Select(e => e.Entity);

        foreach (var item in parts)
        {
             if (item.Sections == null)
                item.Sections = new List<Section>();

             item.Sections.Add(new Section { Name = "Section 1" });
        }

        return base.SaveChanges();
    }
} 
```

# android - 如何将 android 的 ImageButton 样式应用于我自己的按钮？

> ID：10135059
> 
> 赞同：2
> 
> 时间：2012-04-13T04:01:23.613
> 
> 标签：android

我创建了自己的按钮，它继承了android 的RelativeLayout。我的问题是如何将 android 的按钮样式（即背景可绘制、填充）应用于我自己的按钮？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:41:31.513

```
in your drawable folder - create this xml say custom_button.xml

<?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:state_pressed="true" >
            <shape>
                <solid
                    android:color="#E77A26" />
                <stroke
                    android:width="1dp"
                    android:color="#E77A26" />
                <corners
                    android:radius="3dp" />
                <padding
                    android:left="10dp"
                    android:top="10dp"
                    android:right="10dp"
                    android:bottom="10dp" />
            </shape>
        </item>
        <item>
            <shape>
                <gradient
                    android:startColor="#70c656"
                    android:endColor="#53933f"
                    android:angle="270" />
                <stroke
                    android:width="1dp"
                    android:color="#53933f" />
                <corners
                    android:radius="4dp" />
                <padding
                    android:left="10dp"
                    android:top="10dp"
                    android:right="10dp"
                    android:bottom="10dp" />
            </shape>
        </item>
    </selector>

And in your main layout - 

     <Button
            android:id="@+id/connect"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:background="@drawable/custom_button"
            android:layout_marginRight="10dp"
            android:text="@string/connect" />

if you want to put styles to your text in that button - add a style resource in your strings.xml - like below

    <style name="buttonText">
            <item name="android:layout_width">fill_parent</item>
            <item name="android:layout_height">wrap_content</item>
            <item name="android:textColor">#ffffff</item>
            <item name="android:gravity">center</item>
            <item name="android:textSize">15dp</item>
            <item name="android:textStyle">bold</item>
            <item name="android:shadowColor">#000000</item>
            <item name="android:shadowDx">1</item>
            <item name="android:shadowDy">1</item>
            <item name="android:shadowRadius">2</item>
        </style>

You can use this style in your button as below, 

    style="@style/buttonText"

Thats it... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:30:15.653

正如我得到你一样。你可能喜欢这样[实现](https://stackoverflow.com/questions/2410836/how-do-i-apply-a-style-to-all-buttons-of-an-android-application)。另请参阅[此](http://inphamousdevelopment.wordpress.com/2010/10/05/creating-easy-custom-buttons-in-android/)示例。

Button 有样式定义，您可以随时在按钮上使用该样式。

希望这就是你想要的。如果没有，请告诉我。

享受。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T04:24:44.650

我不完全确定你在问什么。但是，如果您只是在寻找默认按钮背景，只需使用

```
android:background="@android:drawable/btn_default_normal" 
```

填充可能需要手动完成。

这个[链接](http://androiddrawableexplorer.appspot.com/)给出了 android 资源的列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T04:25:52.133

为了澄清起见，为什么要继承相对布局来创建自定义按钮？如果您只需要更改按钮的外观，则可以通过指定一个可绘制的选择器来完成。

如果有继承RelativeLayout 的要求，那么您的代码会多一点，您需要处理按钮的状态。如果做得正确，您可以像 blessenm 提到的那样附加一个可绘制的背景选择器。

# php - PHP自动点击捕捉/停止

> ID：10135066
> 
> 赞同：1
> 
> 时间：2012-04-13T04:02:38.980
> 
> 标签：php

我想知道是否有可能从“自动点击”中捕捉/阻止某人

我正在考虑可以做到的方法。最好的方法是检查每次点击之间的点击时间差是否相同。

有人对我如何阻止某人自动点击我的网站有任何想法吗？

我使用验证码，但我觉得它对那些不自动点击的人来说很烦人/不公平。

如果有人有脚本，请随时分享！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:52:56.977

尝试找出人们通常点击按钮的哪个区域（您可以通过记录几百人的点击来做到这一点）。最有可能的是，您会发现它总是在同一个区域内（也许在中心的某个地方）。

获得此数据后，将其与当前用户单击的区域进行比较。如果它总是在完全相同的位置（像素）或太随机（与您的样本数据相比），它可能是一个机器人。在这种情况下，显示一个挑战 - 例如要求用户单击随机放置在屏幕上的某个按钮。如果他/它失败了，你就知道它是机器人。

当然，您也可以监控连续点击之间的间隔。如果它是一个简单实现的机器人并且间隔始终相同，您还可以显示挑战以捕捉它。

# c# - 如何从正在运行的应用程序中读取数据

> ID：10135067
> 
> 赞同：1
> 
> 时间：2012-04-13T04:02:42.343
> 
> 标签：c#, winforms

我想开发一个从另一个应用程序读取数据的应用程序。

在图像中，我想读取显示的列并将其保存在文本文件或数据库中。

![在此处输入图像描述](../Images/7c73c628ffd6fd28cafd0c1296a14e55.png)

任何人都可以在这方面帮助我！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:26:28.583

研究使用 Microsoft 可访问性层。MSAA（较旧）和 UIA（较新）是 Windows 提供的两个可访问性 API，可用于辅助工具（屏幕阅读器等）获取和修改屏幕上的 UI。这使得它们对其他事情非常有用，例如测试、屏幕抓取等。它们在 MSDN 上有很好的记录，对于 hwnd UI，一切都以 WM_GETOBJECT 开头。

# algorithm - 在哪里可以找到自然语言处理的维特比算法转换值？

> ID：10135068
> 
> 赞同：1
> 
> 时间：2012-04-13T04:02:48.287
> 
> 标签：algorithm, dataset, probability, viterbi

我刚刚看了一个视频，他们使用维特比算法来确定句子中的某些单词是否打算用作名词/动词/adjs 等，他们使用了转换和发射概率，例如“时间”这个词被用作动词是已知的（发射）和名词引导到动词的概率（过渡）。

[http://www.youtube.com/watch?v=O_q82UMtjoM&feature=relmfu](http://www.youtube.com/watch?v=O_q82UMtjoM&feature=relmfu)（视频）

我怎样才能为这个用例找到一个好的转换和发射概率数据集？

或者即使只是一个显示所有概率的示例，我也想在演示中使用真实的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:25:24.930

通常，**隐马尔可夫模型**(HMM) 的实现不仅执行用于标记的 Viterbi 算法，还执行用于*训练*模型的算法（例如 Baum-Welch 算法）。那么获得模型（即转移和发射概率的集合）的方法是在合适的训练语料库（例如[PennTreebank ）上](http://www.cis.upenn.edu/~treebank/)**运行训练算法**。

我不知道任何可免费获得的、现成的基于 HMM 的 POS 标记器实现，它带有一个易于检查的预训练模型。然而，在许多方面类似于 HMM 的方法是**条件随机场**(CRF)。日本东北大学创建的[CRFTagger](http://crftagger.sourceforge.net/)似乎带有预训练的英语模型（`model/model.txt`下载和解压缩后请参阅文件）。该文件是人类可读的，但要了解格式的详细信息，您可能需要联系作者。

# java - 事件方法中的线程对象：使用类成员还是创建本地对象？

> ID：10135069
> 
> 赞同：1
> 
> 时间：2012-04-13T04:03:09.860
> 
> 标签：java, android, memory, object

我有一个带有事件方法的类，它经常被调用。假设方法名称是：onClicked。在方法内部，我会创建一个线程来做一些事情。

首先，我尝试在事件方法中创建一个线程对象。代码是这样的：

```
public class MyService {

    //Event method
    public void onClick() {
        new Thread(new Runnable() {

            @Override
            public void run() {
                // do some stuff here
            }
        }).start();
    }
} 
```

但是由于经常会调用 onClick，所以我担心每次调用事件方法时创建的新线程对象是否会产生内存空间或性能问题？

或者，我可以像这样创建一个类成员线程解决方案：

```
public class MyService {
    private Thread myThread;

    //Event method
    public void onClick() {
        myThread = new Thread(new Runnable() {

            @Override
            public void run() {
                  // do some stuff here
            }
        });
        myThread.start();
    }
} 
```

那么哪个代码更好呢？第一还是第二？还是有其他更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:05:39.307

如果不重新初始化每个 Thread ，就不能使用第二个代码`OnClick()`。这是因为一旦线程完成运行，它就“死了”。因此，后续调用`start()`将失败并导致`IllegalThreadStateException`.

最好使用第一个代码，因为 GC 将在完成后删除线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:37:27.670

我认为这两种解决方案都是相同的，因为它们每次都在创建一个新线程`onclick`。第二个甚至可能会遇到创建新线程并将其分配给全局变量的情况`myThread`，在它调用之前`start`，另一个`onclick`事件进来并重新分配全局变量，而前一个线程永远不会启动。我建议你看看

[线程池执行器](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

控制此处允许的线程数以避免资源耗尽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:04:53.117

创建并初始化[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)然后 onClick 您可以创建您自己的实现 Runnable 接口的类的任何实例。它的要点是通过指定池的数量（大小）来避免创建过多的线程（ExecutorService：修复线程池）。这是一个更好的方法。

正如我所说，你也可以进行小的重构，创建自己的类事件并实现 Runnable，重点是定义构造函数，字段也可以是一些额外的方法。

# java - java：readLine 方法将字符串放入字符串文字池中？

> ID：10135071
> 
> 赞同：2
> 
> 时间：2012-04-13T04:03:26.540
> 
> 标签：java

我知道 String a = "hello"; 会将“hello”放入字符串文字池中。我的问题是：
1。

```
String a = "hello";
String b = "hell"+"o"; 
```

字符串文字池是否具有三个对象：“hello”、“hell”和“o”？

2.

```
String a = "hello";
String b = new String("hello"); 
```

那么字符串字面量池中会有一个“hello”对象，堆中会有一个字符串对象吗？

3.

```
BufferedReader br = new BufferedReader(new FileReader("names"));
String line = br.readLine(); //(the value of line is "hello" now, for example) 
```

那么字符串字面量池中会有一个“hello”对象，堆中会有一个字符串对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T04:07:55.577

3)`readLine()`不会使用字符串池中的值。您必须先调用[`intern()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)它。

```
line = br.readLine().intern(); 
```

从[`String`Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)：

> 所有文字字符串和字符串值的常量表达式都是实习的。字符串文字在[Java 语言规范的 §3.10.5](http://java.sun.com/docs/books/jls/html/)中定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T04:45:15.577

AFAIk，这些是正在发生的事情：

1.javac编译器遇到上面这行，会改成`StringBuffer`这样：

```
String b = new StringBuffer().append("hell").append("o").toString();

String a will be in pool with the value "hello". 
```

2 `String b will in the heap`.

3.这纯粹是内存中的操作，因为它是动态加载文件内容的。Java 编译器永远不会

有机会知道它的内存结构，因为它现在取决于文件大小。所以它不能被池化。但是当你执行 intern() 时，会发生这些事情：

如果你用方法 intern() 调用一个字符串，它肯定是现代 JVMS 中的垃圾收集器。如果许多字符串具有相同的内容，它可以用来节省内存。

这里有一个很好的讨论：

[使用 java.lang.String.intern() 是一种好习惯吗？](https://stackoverflow.com/questions/1091045/is-it-good-practice-to-use-java-lang-string-intern)

# php - MySQL 规范化 - 构建多表房地产列表数据库？

> ID：10135072
> 
> 赞同：1
> 
> 时间：2012-04-13T04:03:31.197
> 
> 标签：php, mysql, database, database-design, database-normalization

我正在尝试将纸质表单转换为 PHP 表单，以将属性列表信息保存到数据库中，但我无法将自己的想法围绕在执行此操作的最佳方法上。我对 PHP 很好，但对数据库结构和规范化有点生疏。

我需要一张表 (tblListing) 来提供房产详细信息（列表编号、价格、地址等）。

但是我需要另一个表（tblPropFeatures）来显示属性（中央空调、中央供暖、瓷砖等）

还有另一个 (tblLotFeatures) 用于地块功能（Corner Lot、Cul-de-sac 等）。

我试图替换的纸质表格有超过一百个用于属性特征和地段特征的复选框，所以我想确保我将它们分开，以便正确规范化数据库。

但是我不知道我是否需要某种链接表，或者我是否可以只使用常规连接。

我还希望能够从数据库表中包含的功能动态构建复选框列表。如果将来需要添加新功能，管理员可以登录 phpMyAdmin 并向 PropertyFeatures 表添加一列，PHP 表单将在刷新时动态更新，并在数据库中显示新功能的新复选框。

提前感谢您的帮助和建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:11:09.090

您需要一个将列表连接到 propFeatures 的“列表属性功能”表和一个将列表连接到 lotFeatures 的“列表地块功能”

这些被称为多对多关系。您有许多房地产清单，每个清单都可以有许多地段或许多房地产特征。

这也实现了您能够动态构建复选框的目标。您只需要从每个表中选择所有功能并循环它们以制作一个复选框。如果您将属性直接连接到功能，则必须复制每个功能条目。

只需确保使用主键创建每个表，然后在连接表中索引这些键。

希望有帮助！祝你好运！

# java - 使用 Java 从 HTTPS 服务器下载文件

> ID：10135074
> 
> 赞同：12
> 
> 时间：2012-04-13T04:03:40.477
> 
> 标签：java, network-programming

我想从使用安全连接协议 HTTPS 的服务器下载文件。我可以在普通服务器上做到这一点，但是，我如何使用 HTTPS 做到这一点。如果有人使用过示例 API，请帮助我找到有用的资源。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-13T04:34:02.663

使用 Java 访问 HTTPS url 与访问 HTTP url 相同。您可以随时使用

```
URL url = new URL("https://hostname:port/file.txt");
URLConnection connection = url.openConnection();
InputStream is = connection.getInputStream();
// .. then download the file 
```

但是，当无法验证服务器的证书链时，您可能会遇到一些问题。因此，出于测试目的，您可能需要禁用证书验证并信任所有证书。

要做到这一点，请写：

```
// Create a new trust manager that trust all certificates
TrustManager[] trustAllCerts = new TrustManager[]{
    new X509TrustManager() {
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return null;
        }
        public void checkClientTrusted(
            java.security.cert.X509Certificate[] certs, String authType) {
        }
        public void checkServerTrusted(
            java.security.cert.X509Certificate[] certs, String authType) {
        }
    }
};

// Activate the new trust manager
try {
    SSLContext sc = SSLContext.getInstance("SSL");
    sc.init(null, trustAllCerts, new java.security.SecureRandom());
    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
} catch (Exception e) {
}

// And as before now you can use URL and URLConnection
URL url = new URL("https://hostname:port/file.txt");
URLConnection connection = url.openConnection();
InputStream is = connection.getInputStream();
// .. then download the file 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-11T20:34:08.330

其实我也有类似的问题。我无法从 HTTPS 服务器下载文件。然后我用这个解决方案解决了这个问题：

```
// But are u denied access?
// well here is the solution.
public static void TheKing_DownloadFileFromURL(String search, String path) throws IOException {

    // This will get input data from the server
    InputStream inputStream = null;

    // This will read the data from the server;
    OutputStream outputStream = null;

    try {
        // This will open a socket from client to server
        URL url = new URL(search);

        // This user agent is for if the server wants real humans to visit
        String USER_AGENT = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36";

        // This socket type will allow to set user_agent
        URLConnection con = url.openConnection();

        // Setting the user agent
        con.setRequestProperty("User-Agent", USER_AGENT);

        //Getting content Length
        int contentLength = con.getContentLength();
        System.out.println("File contentLength = " + contentLength + " bytes");

        // Requesting input data from server
        inputStream = con.getInputStream();

        // Open local file writer
        outputStream = new FileOutputStream(path);

        // Limiting byte written to file per loop
        byte[] buffer = new byte[2048];

        // Increments file size
        int length;
        int downloaded = 0; 

        // Looping until server finishes
        while ((length = inputStream.read(buffer)) != -1) 
        {
            // Writing data
            outputStream.write(buffer, 0, length);
            downloaded+=length;
            //System.out.println("Downlad Status: " + (downloaded * 100) / (contentLength * 1.0) + "%");

        }
    } catch (Exception ex) {
        //Logger.getLogger(WebCrawler.class.getName()).log(Level.SEVERE, null, ex);
    }

    // closing used resources
    // The computer will not be able to use the image
    // This is a must
    outputStream.close();
    inputStream.close();
} 
```

使用此功能...希望您能从这个简单的解决方案中受益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T04:21:44.740

除非 SSL 证书未通过验证，否则您应该能够使用完全相同的代码来执行此操作。如果它是自签名证书，或者证书来自您的系统不知道的 CA，通常会发生这种情况。

在这种情况下，您应该在代码中处理证书验证。只有那部分代码会改变。其他一切都将保持不变。

首先尝试使用相同的代码，看看您是否得到证书异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T04:21:30.717

下载http和https没有区别。打开一个指向正确 URL 的 HttpURLConnection 并读取结果流。

# symfony-1.4 - sfDoctrineGuard default_from_email

> ID：10135076
> 
> 赞同：1
> 
> 时间：2012-04-13T04:04:12.783
> 
> 标签：symfony-1.4, forgot-password, sfdoctrineguard

我有一个 Symfony 1.4 系统，用于根据域名从单个 Symfony 项目动态加载不同的站点内容。该系统有一个后端，在后端我的“忘记密码”功能运行良好，有 1 个问题。它发送的电子邮件在 apps/backend/config/app.yml 中设置，设置如下：

```
all:
  sf_guard_plugin:
    routes_register: true
    default_from_email: noReply@domain.com 
```

但我有多个域，而不仅仅是一个。

在我的数据库中，我存储了域名，我的控制器具有获取当前域名的逻辑，查询数据库，然后保存 sid (site_id) 的会话属性，它是给定域的表 id。

我想要做的是能够将 default_from_email 设置为当前域。

```
i.e. noReply@domain1.com or noReply@domain2.com 
```

取决于最终用户用于访问该站点的域。我的问题是..有没有办法

```
app.yml file to put a variable %domain% 
```

然后在 sfDoctrineGuardPlugin 中填充与忘记密码功能相关的某处或是否有办法覆盖 sfDoctrineGuardPlugin sfGuardForgotPassword 模块以插入逻辑以使用当前域作为发件人电子邮件

目前我的解决方案是将逻辑插入到 BasesfGuardForgotPasswordActions.class.php 中，这不是正确的方法（尽管它有效），但我需要快速修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:26:52.757

当然，您可以覆盖 sfGuardForgotPassword 的默认处理：

*   创建一个名为的新模块`sfGuardForgotPassword`在您的应用程序/模块文件夹中
*   创建一个名为的新文件夹`actions`
*   `actions.class.php`在里面创建一个文件

`actions.class.php`

```
<?php 
require_once(sfConfig::get('sf_plugins_dir').'/sfDoctrineGuardPlugin/modules/sfGuardForgotPassword/lib/BasesfGuardForgotPasswordActions.class.php');

/**
 *
 * @package    symfony
 * @subpackage plugin
 * @author     Fabien Potencier <fabien.potencier@symfony-project.com>
 * @version    SVN: $Id: actions.class.php 23319 2009-10-25 12:22:23Z Kris.Wallsmith $
 */
class sfGuardForgotPasswordActions extends BasesfGuardForgotPasswordActions
{
  protected function sendRequestMail($user, $forgotPassword)
  {
    // send the mail as you want
  }

  protected function sendChangeMail($user, $password)
  {
    // send the mail as you want
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:22:02.013

不确定你是否知道，但你可以在 yaml 文件中包含 PHP 代码，symfony 会解析 php 代码，所以我想你可以这样做：

```
all:
  sf_guard_plugin:
    default_from_email: noreply@<?php echo sfConfig::get('domain') . PHP_EOL ?> 
```

但这在我的测试中似乎不起作用，因为我一直得到'noreply@'，即使我在`sfContext::getInstance()`创建后立即设置了值（但没有分派）。我什至尝试为它添加一个自定义过滤器，但看起来 Symfony 会在项目配置期间首先获取所有 yaml 文件，然后进行调度调用。

所以我认为 j0k 的答案是你最好的选择，尽管有一些开销。您必须将所有方法从原始版本复制到您的自定义版本。这意味着如果有升级，您将必须复制它们以确保您获得任何更改。

# html - 当浏览器窗口宽度减小时，页脚无法正确显示

> ID：10135079
> 
> 赞同：0
> 
> 时间：2012-04-13T04:04:49.840
> 
> 标签：html, css, footer

可能更容易链接到显示正在发生的事情的图像。

[http://imgur.com/a/EaCsO](http://imgur.com/a/EaCsO)

第一张图片显示了页脚的正常外观，然后第二张图片显示了我在减小窗口宽度时遇到的问题。

当我让我的窗口宽度变小时，页脚和页眉都消失了，相对于我让窗口变小了多少。当水平滚动条出现时，分散开始。

这是我的页脚元素的CSS。

```
.bottombar {
 height:220px;
 clear: both;   
 width:100%;
 background:-webkit-radial-gradient(black 15%,transparent 16%) 0 0,-webkit-radial-gradient(black    15%,transparent 16%) 8px 8px,-webkit-radial-gradient(rgba(255,255,255,.1) 15%,transparent 20%) 0 1px,-webkit-radial-gradient(rgba(255,255,255,.1) 15%,transparent 20%) 8px 9px;
 background:-moz-radial-gradient(black 15%,transparent 16%) 0 0,-moz-radial-gradient(black 15%,transparent 16%) 8px 8px,-moz-radial-gradient(rgba(255,255,255,.1) 15%,transparent 20%) 0 1px,-moz-radial-gradient(rgba(255,255,255,.1) 15%,transparent 20%) 8px 9px;
 background:radial-gradient(black 15%,transparent 16%) 0 0,radial-gradient(black 15%,transparent 16%) 8px 8px,radial-gradient(rgba(255,255,255,.1) 15%,transparent 20%) 0 1px,radial-gradient(rgba(255,255,255,.1) 15%,transparent 20%) 8px 9px;
 background-color:#282828;
 background-size:16px 16px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:07:28.267

定义`min-width`您的**页脚**。

例如：

```
.bottombar{
 min-width:1000px;
} 
```

# python - 有没有办法在 Python 的高级字符串格式“foo {}”.format(bar) 中添加条件字符串？

> ID：10135080
> 
> 赞同：2
> 
> 时间：2012-04-13T04:04:55.950
> 
> 标签：python, string

例如我有这样一行代码

```
if checked:
    checked_string = "check"
else:
    checked_string = "uncheck"

print "You can {} that step!".format(checked_string) 
```

有捷径吗？我只是好奇而已。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-13T04:10:42.377

```
print "You can {} that step!".format('check' if checked else 'uncheck') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T04:06:28.217

```
checkmap = {True: 'check', False: 'uncheck'}
print "You can {} that step!".format(checkmap[bool(checked)])) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-08T18:26:18.913

这可以通过 python 3.6+ 使用 f-strings 来处理

```
print(f"You can {'check' if checked else 'uncheck'} that step!") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-11T15:56:06.607

我知道，我已经很晚了。但是人们会搜索。

我在一种情况下使用它，格式字符串必须尽可能简单，因为它们是用户提供的配置的一部分，即由对Python一无所知的人编写。

在这种基本形式中，使用仅限于一个条件。

```
class FormatMap:
    def __init__(self, value):
        self._value = bool(value)

    def __getitem__(self, key):
        skey = str(key)
        if '/' not in skey:
            raise KeyError(key)
        return skey.split('/', 1)[self._value]

def format2(fmt, value):
    return fmt.format_map(FormatMap(value))

STR1="A valve is {open/closed}."
STR2="Light is {off/on}."
STR3="A motor {is not/is} running."
print(format2(STR1, True))
print(format2(STR2, True))
print(format2(STR3, True))
print(format2(STR3, False))

# A valve is closed.
# Light is on.
# A motor is running.
# A motor is not running. 
```

# iphone - 如何在用户输入上为 UITextView 设置光标位置？

> ID：10135086
> 
> 赞同：7
> 
> 时间：2012-04-13T04:05:33.203
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uitextview

*我正在为这个问题寻找一个简单的答案......*

我有一个`UITextView`用户可以在其中开始输入并单击完成并退出键盘。

当想要再次编辑它时，我希望光标（闪烁的线）位于 的第一个位置，而`textView`不是 textView 的末尾。**（充当占位符）**

我试过on `setSelectedRange`，但它不起作用。`NSMakeRange(0,0)``textViewDidBeginEditing`

### 更多信息：

可以看出..当用户点击 时出现在用户点击`textView`的`cursor`位置`textView`。

我希望它总是在起始位置闪烁`textViewDidBeginEditing`。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T08:39:05.523

属性 selectedRange 不能在“任何地方”分配，要使其工作，您必须实现该方法`- (void)textViewDidChangeSelection:(UITextView *)textView`，在您的情况下：

```
- (void)textViewDidChangeSelection:(UITextView *)textView
{
    [textView setSelectedRange:NSMakeRange(0, 0)];
} 
```

您必须检测用户何时开始编辑或选择文本

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-13T04:33:22.913

我的解决方案：

```
- (void) viewDidLoad {
    UITextView *textView = [[UITextView alloc] initWithFrame: CGRectMake(0, 0, 200, 200)];
    textView.text = @"This is a test";
    [self.view addSubview: textView];
    textView.delegate = self;
    [textView release];
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(tapped:)];
    [textView addGestureRecognizer: tap];
    [tap release];
}
- (void) tapped: (UITapGestureRecognizer *) tap {
    [textView becomeFirstResponder];
} 

- (void) textViewDidBeginEditing:(UITextView *)textView {
    textView.selectedRange = NSMakeRange(0, 0);
} 
```

我猜它是 UITextView 内部机制，当用户点击它时设置光标。我们需要通过附加轻击手势识别器来覆盖它并`becomeFirstResponder`改为调用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-21T06:11:40.137

我遇到了同样的问题 - 基本上在成为第一响应者时会有延迟，不允许你改变`selectedRange`任何`textView*BeginEditing:`方法。如果您尝试延迟`setSelectedRange:`（假设使用`performSelector:withObject:afterDelay:`），它会显示出丑陋的混蛋。

解决方案实际上非常简单 - 检查委托方法的顺序会给您提示：

1.  `textViewShouldBeginEditing:`
2.  `textViewDidBeginEditing:`
3.  `textViewDidChangeSelection:`

在最后一个方法 (3) 中设置`selectedRange`可以解决问题，您只需要确保仅在`UITextView`成为第一响应者时第一次重新定位光标，因为每次更新内容时都会调用方法 (3)。

`shouldChangeTextInRange:` ~~在方法 (1)、(2) 之一中~~设置的 BOOL 变量并检查 (3) 中的变量应该可以解决问题……只是不要忘记在重新定位后重置变量以避免常量光标重置： ）。

希望能帮助到你！

### 编辑

经过几轮测试后，我决定设置 BOOL 标志`shouldChangeTextInRange:`而不是 (2) 或 (3)，因为事实证明它更通用。查看我的代码：

```
@interface MyClass
{
    /** A flag to determine whether caret should be positioned (YES - don't position caret; NO - move caret to beginning). */
    BOOL _isContentGenerated;
}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    // deleting
    if([text length] == 0)
    {
        // deleting last character
        if(range.length == [[textView text] length])
        {
            // reached beginning
            /** 
             code to show placeholder and reset caret to the beginning 
            */
            _isContentGenerated = NO;
        }
    }
    else
    {
        // adding
        if(range.location == 0)
        {
            /** 
             code to hide placeholder
            */
            _isContentGenerated = YES;
        }
    }
    return YES;
}

- (void)textViewDidChangeSelection:(UITextView *)textView
{
    if(!_isContentGenerated)
    {
        [textView setSelectedRange:NSMakeRange(0, 0)];
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T04:17:44.293

我在这方面的工作还不足以完全帮助您，但是当您尝试使用不同`selectedRange`的 s 时会发生什么？说，如果你这样做`[... setSelectedRange:[NSMakeRange(0,1)]]`或`[... setSelectedRange:[NSMakeRange(1,0)]]`？它会将光标移动到任何地方吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T18:35:57.063

所以我最终添加了一个 UILabel`UITextView`作为 textView 的占位符。点击 UILabel 会将操作发送到 textView 和`becomeFirstResponder`. 开始输入后，将标签隐藏。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2015-12-21T10:54:43.537

```
[_detailAreaView setTextContainerInset:UIEdgeInsetsMake(8, 11, 8, 11)]; 
```

# node.js - 始终使用 IISNode 运行进程

> ID：10135089
> 
> 赞同：6
> 
> 时间：2012-04-13T04:05:46.433
> 
> 标签：node.js, iisnode

有谁知道无需客户端请求就可以让一个 JavaScript 文件或一组文件始终在 IISNode 下运行？这个想法是让脚本充当服务，但让它们在 IISNode 下运行。

谢谢！csh3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-14T16:14:07.633

[试试node-windows](https://github.com/coreybutler/node-windows)怎么样，它允许 Node.js 应用程序作为 Windows 服务运行。一个不错的功能是它还公开了一种写入 EventLog 的方法。

考虑到您需要任何 IIS 功能而不是它的长期运行方面，它可能更适合您的场景。

希望这可以为您指明更适用的方向。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T13:23:53.213

我想你有一些理由使用 iisnode，但是你试图在 iis 中运行一个服务，这不是一个好主意，如果你想作为服务运行，然后作为服务运行。[如何？](http://blog.tatham.oddie.com.au/2011/03/16/node-js-on-windows/)

如果你仍然坚持使用 iisnode 那么选项是

使用[IIS 的应用程序初始化](http://forums.iis.net/t/1176740.aspx)

或者编写一个 ping iisnode 页面的计划作业

或者使用类似[pingdom](http://pingdom.com)的服务来 ping 你的 iisnode 应用程序。

# ios - 使用 phonegap 探索 ios 目录

> ID：10135098
> 
> 赞同：0
> 
> 时间：2012-04-13T04:06:44.640
> 
> 标签：ios, html, jquery-mobile, cordova

我正在使用 jquery Mobile 和 Phonegap 1.6.0 创建应用程序，并且我想将文件上传到服务器，有没有办法探索/浏览 IOS 目录以选择文件并使用 Phonegap API 上传该文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:12:13.880

用 10 秒搜索文档找到了这个： [http](http://docs.phonegap.com/en/1.6.0/cordova_file_file.md.html#File) ://docs.phonegap.com/en/1.6.0/cordova_file_file.md.html#File这是你想要的吗？

# mysql - 为什么我可以使用外键约束自由输入值

> ID：10135103
> 
> 赞同：0
> 
> 时间：2012-04-13T04:07:37.823
> 
> 标签：mysql, sql

我创建了两个表并执行了以下操作：

表一：（学生）

```
CREATE TABLE student(s int, n int, d int, PRIMARY KEY(s), FOREIGN KEY(d) REFERENCES dep(d)); 
```

表 2：（深度）

```
CREATE TABLE dep(d int, n int, PRIMARY KEY(d)); 
```

所以，如果我理解正确，d 是表 1 的外键，它引用了部门的主键。因此，dep 的主键必须与学生中的 d 相匹配。但是，当我执行以下操作时

```
INSERT INTO dep (1,2); 
```

语句完成没有错误？学生表是空的，引用其主键时如何插入数据？

请帮忙，谢谢。

顺便说一句，即使 dep 没有相应的值，我也可以自由地插入到学生中。你们认为这是因为 mysql vs. oracle 吗？

```
mysql> select * from student;
+---+------+------+
| s | n    | d    |
+---+------+------+
| 5 |    5 | 5    |
+---+------+------+
1 row in set (0.00 sec)

mysql> select * from dep;
+---+------+
| d | n    |
+---+------+
| 1 |    2 |
+---+------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:11:12.077

学生表有外键 d，它是 dep 表的主键。学生表是依赖于 dep 表的表。dep 表对 student 表没有这种依赖。约束是在学生表上的值 d 应该始终在 dep 表中。

在 d 的值无效的学生表中插入一条记录将导致错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T04:12:01.400

你理解错了。您在 sql 中所做的是确保当您输入 a 时`Student`，值 for`d`必须作为值存在`dep.d`

如果你说

```
insert into student values (1, 2, 3) 
```

那么如果没有等于的行`dep`，这将失败`d``3`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T04:12:09.823

您可以插入到`department` 表中，因为该表没有约束。

如果您尝试在学生表中添加一行随机部门编号，而部门表中不存在该行，那么它将给您约束错误。

示例：如果你会尝试

```
insert into student values (1, 4, 1034); 
```

如果在部门表中没有主键值的行`1034`，那么它将给出外键约束。

您需要做的是从父级向下插入数据。

如果您需要删除数据，您实际上必须采取其他方式，请在删除父订单记录之前删除项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T05:44:18.260

像往常一样，当您将数据插入明细表并且主表没有对应的值时，您会收到错误 - '无法添加或更新子行：外键约束失败...'。

但是当`FOREIGN_KEY_CHECKS`变量设置为 0 时，MySQL 会忽略外键约束——

```
SET FOREIGN_KEY_CHECKS=0;
INSERT INTO student VALUES (5,5,5); -- no errors
SET FOREIGN_KEY_CHECKS=1; 
```

# javascript - 如何使用 javascript (magento go) 删除 onclick 并插入 rel="lightbox"

> ID：10135105
> 
> 赞同：0
> 
> 时间：2012-04-13T04:07:54.550
> 
> 标签：javascript, jquery, magento, onclick, lightbox2

我正在使用 magento go (SaaS) 商店，需要删除 onclick、插入 rel="lightbox" 以及将 href="#" 更改为 img src url。任何帮助表示赞赏。javascript 或 jQuery 可以做到这一点吗？我只能玩javascript，因为我无法访问应用程序代码。

```
<div class="more-views">
<h2>More Views</h2>
<ul>
  <li>
    <a href="#" onclick="popWin('http://101pareos.com.au/catalog/product/gallery/id/49/image/81/', 'gallery', 'width=300,height=300,left=0,top=0,location=no,status=yes,scrollbars=yes,resizable=yes'); return false;" title="Image 1">
                        <img src="http://s4f7e756057ed2.img.gostorego.com/802754/cdn/media/s4/f7/e7/56/05/7e/d2/catalog/product/cache/1/thumbnail/48x/9df78eab33525d08d6e5fb8d27136e95/b016.jpg" width="48" height="48" alt="Image 1" />
                    </a>
    </li>          
</div> 
```

提前谢谢各位！

瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:17:05.447

瞧：

```
$('.more-views a').each(function() {
    var $this = $(this);
    var image = $this.find('img');

    $this.attr({
        onclick: null,
        href: image.attr('src'),
        rel: 'lightbox'
    });
}); 
```

编辑：要提取 URL，您所要做的就是：

```
jQuery('.more-views a').each(function() {
    var $this = jQuery(this);

    $this.attr({
        onclick: null,
        href: /'(.+?)'/.exec($this.attr('onclick'))[1],
        rel: 'lightbox'
    });
}); 
```

编辑：要提取图像，它有点（好吧，很多）更复杂。

```
jQuery('.more-views a').each(function() {
    var $this = jQuery(this);

    jQuery.ajax({
        url: /'(.+?)'/.exec($this.attr('onclick'))[1],
        type: 'GET',
        dataType: 'text',
        success: function(data) {
            // Extract the image from the HTML:
            var url = /img src="(.+?)"/.exec(data)[1];

            // Set the new href, remove the old onclick handler, and make it a lightbox:
            $this.attr({
                onclick: null,
                href: url,
                rel: 'lightbox'
            });
        }
    });
}); 
```

# c - 如何将结构数组传递给函数并在其中正确存储值？

> ID：10135107
> 
> 赞同：0
> 
> 时间：2012-04-13T04:08:13.530
> 
> 标签：c

我想读取一个包含样本编号、值和状态（1.1、23,0）的文件。我使用 Struct 来保存该信息。我将传递函数结构数组和文件位置。

```
#include <stdio.h>

struct Data_point
{
    long sampleNumber;
    double value;
    int status;
};

int filldata(struct Data_point *a, const char *filelocation)
{
    FILE *f;
    if((f=fopen(filelocation,"r"))==NULL)
    {
        printf("You cannot open");
    }
    fscanf(f, "%ld%lf%d", a.sampleNumber, a.value, a.status);
}

int main(void)
{
    struct Data_point data[10];
    filldata(data, "/home/alexchan/IntrotoC/rec11/dataPoints.txt");
    return 0;
} 
```

但是，我收到一条错误消息，“请求成员而不是结构”......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:16:40.160

一个问题是，`filldata()`它采用了一个指针参数。所以你`->`用来称呼成员而不是“。”。例如`a.sampleNumber`应该如此。`a->sampleNumber`

另一个问题是`filldata()`读取单个结构，但您将指针传递给数组顶部，这与`&(data[0])`. 所以如果你重复调用它（你没有），这个函数只会覆盖第一个元素。如果您在循环中调用它，则需要将其传递给指向各个数组成员的指针：

`for(int i = 0; i < 10; ++i){ filldata(&(data[i]), "/home/alexchan/IntrotoC/rec11/dataPoints.txt"); }`

您实际上可以`data + i`用作第一个 arg 而不是，`&(data[i])`但我喜欢后者，因为我发现它更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:16:21.003

struct Data_point *a 是你的函数参数，你传递的是一个数组的数据。所以基本上你试图从一个不是结构的数组中访问成员。

或许

```
for( int i=0; i<10;++i)
    filldata(data[i],.....) 
```

和

```
int filldata( struct Data_point a,...) //as you are using a. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:06:01.443

fscanf 要求每个传递的参数都有一个指向数据的指针。使用`AddressOf`运算符`&`获取对每个结构成员的引用：

```
int filldata(const char *filelocation, struct Data_point *a, int nElements)
{
    int n = 0;
    FILE *f = fopen(filelocation, "r");
    if(f)
    {
        while (fscanf(f, "(%ld,%lf,%d)", &(a[n].sampleNumber), &(a[n].value), &(a[n].status)) == 3 && n < nElements)
             n++;
        fclose(f);
    } 
    else { printf("Unable to open '%s'\n", filelocation); }
    return n;
} 
```

现在，此功能与您的功能略有不同。您需要告诉它作为“a”参数传入的数组有多长。它将返回成功填写的条目数。

IE

```
int main(int argc, char **argv)
{
    struct Data_point data[10];
    int n = filldata("C:\\Users\\254288b\\temp.txt", data, sizeof(data) / sizeof(struct Data_point));
    printf("%d Data_point's were filled successfully.\n\n", n);
    for(int i = 0; i < n; i++)
    {
        printf("Sample Number: %ld\n", data[i].sampleNumber);
        printf("Value: %lf\n", data[i].value);
        printf("Status: %d\n", data[i].status);
        printf("----------------------------\n");
    }
    return 0;
} 
```

请注意，我的 fscanf 模式希望您的文件如下所示：

`(100,1.1,10)(200,2.2,20)(300,3.3,30)(400,4.4,40)`

每组都用括号括起来。

# asp.net-mvc-3 - 在 MVC3 中对 HMAC 进行身份验证

> ID：10135108
> 
> 赞同：1
> 
> 时间：2012-04-13T04:08:15.730
> 
> 标签：asp.net-mvc-3, web-services, authentication, hmac, 2-legged

我在 2-legged OAuth 的前提下构建自己的 Web 服务。

每个经过身份验证的请求都会包含一个 HMAC。

我知道可以这样做：

```
public ActionResult userInfoExample(string HMAC, string username)
    {
        MyMembership.checkHMAC(HMAC);
        //get user
        return View();
    } 
```

但这是相当讨厌的，因为 HMAC 需要包含在每个操作的参数中。它的弱类型和废话。

我想做这样的事情：

```
[AuthorizeHMAC]
    public ActionResult userInfoExample(string username)
    {
        //get user
        return View();
    } 
```

[我找到了这个](https://stackoverflow.com/questions/2717250/is-it-possible-to-use-data-annotations-to-validate-parameters-passed-to-an-actio)，它提到我应该看看自定义模态绑定器，所以[我发现了这个](http://buildstarted.com/2010/09/12/custom-model-binders-in-mvc-3-with-imodelbinder/)，读完后我不确定如何让它工作。

我的目标是使用（我假设）放置在 URL 参数中的 HMAC 进行身份验证（/授权），即：http://www.website.com/foo/bar?username=xxx&hmac=xxxxxxxxx

我想知道是否有人有任何我可以阅读的参考资料或直接解决方案。
我也欢迎批评我对 API 安全的基本理解，或者我是如何做事的，我对这个领域相当陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:01:22.837

[在http://mvcsecurity.codeplex.com/](http://mvcsecurity.codeplex.com/)查看我的代码

我做了类似验证页面上的参数的事情（虽然它不是 HMAC）。由于您将在我假设的视图上生成它（或将其传递给视图），因此您可以以与我在属性中检查它的类似方式相同的方式对其进行检查。

从：

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            //The hidden form field that contains our hash - for ex. CustomerId is rendered as a hidden input  id="_CustomerIdToken"
            string encryptedPropertyName = string.Format("_{0}Token", _propertyName);

            //grab the token
            string hashToken = filterContext.HttpContext.Request.Form[encryptedPropertyName];

            //The encrypted form data MUST be there. We do not allow empty strings otherwise this could give
            //an attack vector in our filter as a means to bypass checks by simply passing in an empty validation token.
            if (string.IsNullOrEmpty(hashToken))
            {
                throw new MissingFieldException(string.Format("The hidden form field named value {0} was missing. This is created by the Html.AntiModelInjection methods. Ensure the name used on your [ValidateAntiModelInjectionAttribute(\"!HERE!\")] matches the field name used in Html.AntiModelInjection method. If this attribute is used on a controller method that is meant for HttpGet, then the form value would not yet exist. This attribute is meant to be used on controller methods accessed via HttpPost.", encryptedPropertyName));
            }

            //Get the plain text value
            string formValue = filterContext.HttpContext.Request.Form[_propertyName];

            //Plain text must be available to compare.
            if (string.IsNullOrEmpty(formValue))
            {
                throw new MissingFieldException(string.Format("The form value {0} was missing. If this attribute is used on a controller method that is meant for HttpGet, then the form value would not yet exist. This attribute is meant to be used on controller methods accessed via HttpPost.", _propertyName));
            }

            //We cannot encrypt the form value and compare to the previously encrypted form token.
            //Each time you Encrypt() with the MachineKey class even using the same plain text, the end result is difference.
            byte[] plainTextBytes = MachineKey.Decode(hashToken, MachineKeyProtection.Encryption);

            string plainText = Encoding.Unicode.GetString(plainTextBytes);

            //And compare
            if (string.Compare(plainText, formValue , false, CultureInfo.InvariantCulture) != 0)
            {
                throw new HttpAntiModelInjectionException(string.Format("Failed security validation for {0}. It is possible the data was tampered with as the original value used to create the form field does not match the current property value for this field. Ensure if this is a web farm, the machine keys are the same.",_propertyName));
            }

            filterContext.HttpContext.Trace.Write("(Logging Filter)Action Executing: " +
                filterContext.ActionDescriptor.ActionName);

            base.OnActionExecuting(filterContext);
        } 

```

# android - 如何将存储在设备中的图像与使用相机扫描的帧值进行比较？

> ID：10135110
> 
> 赞同：2
> 
> 时间：2012-04-13T04:08:45.340
> 
> 标签：android

我将图像存储在 android 设备中。我需要将图像与使用其相机捕获的视频流进行比较。如果找到匹配项，我们需要显示一条消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:59:49.153

这可能不是那么微不足道的问题。肯定需要在线研究可用的图像处理库，否则提取DIB部分（图像的二进制数据，为RGB或ARGB），然后与可能的圆形百分比的流图像进行比较。

这只是想法，而不是那么真实的答案。

# ibm-midrange - 退出DSPF后去wrksplf？

> ID：10135112
> 
> 赞同：0
> 
> 时间：2012-04-13T04:09:28.633
> 
> 标签：ibm-midrange, rpgle

我正在 iSeries 400 [IBM] 上创建屏幕设计器

我创建的 RPGLE 程序我试图找出让用户在`wrksplf`退出程序后进入的命令（按我创建指示器的 F3）

在 CLLE 中，我`wrksplf`之前可以在程序结束时使用，`enddo`但我找不到任何信息如何在其他语言（如 RPGLE 或其他任何语言）中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T13:27:22.377

只要您处于交互式作业中，您就可以调用 QCMDEXC 来调用命令...

```
DQCMDEXC          PR                  EXTPGM('QCMDEXC')    
D prCmdStr                    4096A   CONST                
D prCmdLen                      15P 5 CONST                

 /free
  QCMDEXC('WRKSPLF':25);
 /end-free 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:19:18.140

ILE 程序/程序可以调用其他语言编写的 ILE 程序。调用包含命令的已编译 CLLE 过程比调用 QCMDEXC 解释器接口来解析和执行它更有效。它还使您能够在被调用的过程中封装更多功能，以备不时之需。

您可以创建一个简单的 CLLE 模块来执行 WRKSPLF 命令。您的 ILE RPG 可以 CALLP 到 CL 程序。您可以使用 RPG 和 CL 模块创建程序 [CRTPGM]。或者您可以使用 RPG 模块创建程序，并使用 CL 创建服务程序 [CRTSRVPGM]。如果将来您的 CL 可能被其他程序使用，则此方法可能更可取。

# android - 使用动态布局以编程方式将项目添加到列表视图

> ID：10135114
> 
> 赞同：1
> 
> 时间：2012-04-13T04:09:40.697
> 
> 标签：android, layout

我要开发一个像聊天信使一样的应用程序
每次我发送文本时，它都会出现在左侧，而回复将出现在列表视图的右侧
我已经通过使用奇数的自定义布局完成了和偶数位置
所以当项目是奇数位置时，它会出现在左边，偶数会出现在右边。
通过扩展 BaseAdapter

```
public View getView(int position, View convertView, ViewGroup parent) { 
        LayoutInflater inflater = getLayoutInflater();<br>
        View row;<br>

        if (position % 2 == 0) {<br>
            row = inflater.inflate(R.layout.list_row_layout_even,parent,false); 
            TextView textLabel = (TextView) row.findViewById(R.id.text);

            textLabel.setText(arraylist.get(position));

        } else {
            row = inflater.inflate(R.layout.list_row_layout_odd, parent,
                    false);
            TextView textLabel = (TextView) row.findViewById(R.id.text);

            textLabel.setText(arraylist.get(position));
        }

        return (row);
    } 
```

但是现在，我想把它放在我想要的一侧，我的意思是位置必须独立于项目的位置，因为有时，一个人可以继续发送消息，所以它必须出现在同一侧而不是每一侧旧的布局。

有可能这样做吗？任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:18:40.733

你正在使用什么样的数据结构？这是可能的。您可以在数据结构中添加一个字段来保存此信息。

例如：

from -> 可以是 1 或 2，具体取决于它的消息。

在 createView 方法中，您可以膨胀或显示正确的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:54:07.473

是的，这可以通过简单地维护一个变量来实现，无论消息是从一个人那里收到的，如果它不是从那个人那里收到的，则将相同的变量设置为 false。

然后只需检查该变量并根据需要执行您的任务，而不是奇数和偶数位置。

# linux - 如何在 Bash 中重定向输出

> ID：10135116
> 
> 赞同：0
> 
> 时间：2012-04-13T04:09:49.133
> 
> 标签：linux, bash

我使用的程序是“程序输入文件输出文件”。如何将结果写入 STDOUT 而不将其写入输出文件。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:11:33.570

把`/dev/stdout`作为输出文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T04:12:27.073

使用`/dev/fd/1`or`/dev/stdout`作为输出文件。如果输出文件被省略，一些程序会识别`-`到 mean `stdout`，甚至会自动使用它，但这取决于单个程序（与`/dev`系统服务不同，尽管有时在缺少它们的系统上由 shell 模拟）。

# asp.net-mvc - 在部分视图中绑定输入模型需要帮助

> ID：10135120
> 
> 赞同：1
> 
> 时间：2012-04-13T04:10:47.697
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想将输入模型从局部视图传递给控制器​​。我对 MVC 比较陌生，所以仍在尝试了解默认模型绑定器的工作原理。

通过 AJAX (listBox) 控制器将部分视图传回并插入到表 id=searchResults 中。

```
@model ViewModels.LocationViewModel
@using (Ajax.BeginForm("ProcessSearch", "SearchR", new AjaxOptions
{
    HttpMethod = "GET",
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "searchResults",
}))

{ 
    <div>@Html.ListBoxFor(xxx)</div>
    <input id="Search" type="submit" value="Search" />
} 
```

这是填充局部视图的控制器和 ViewModel

```
public class OrderViewModel
{
    public string Description       { get; set; }
    public string Status            { get; set; }     
}

public ActionResult ProcessSearch(SearchViewModel search)
{
     select new OrderViewModel{
                Status=f.STATUS,
                Description=f.DESCRIPTION}).ToList();
     return PartialView(model);
} 
```

在同一个主视图中，我有这个我想要绑定到另一个视图模型的表单。我根本不明白如何从局部视图的模型中实现默认活页夹。如果我没有正确解释这一点，我深表歉意。我希望这是有道理的。

```
@using (Html.BeginForm("Testing", "SearchR", FormMethod.Post))
{ 
    <div>@Html.DropDownListFor(yyy)</div>
    <input id="Reshop" type="submit" value="Reshop" />
}
<table id="searchResults"></table>

public ActionResult Testing(RSOrderViewModel rOrder)
{
    return Content("hey");
}

public class RSOrderViewModel 
{
    public string yyy { get; set; }
    public IEnumerable<OrderViewModel> sovm { get; set; }
}

@model List<ViewModels.OrderViewModel>

@{ViewData.TemplateInfo.HtmlFieldPrefix = "sovm";
   }

 <table id="searchResults">
    <tr>
        <th>Order Id</th>
        <th>Order Detail</tr>

@for (int i = 0; i < Model.Count; i++)
{
    <tr>
        <td>
         @Html.DisplayFor(x => x[i].OrderId)
        </td>
        <td>
         @Html.DisplayFor(x => x[i].OrderDetail)
        </td>
    </tr>
}

</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:54:25.987

该表在第二种形式之外。因此，当您发布到`Testing`操作时，发送到控制器的所有内容都是下拉列表的值。如果要发送存储在此表中的集合，则必须使用 AJAX 或将表放入表单中：

```
@using (Html.BeginForm("Testing", "SearchR", FormMethod.Post))
{ 
    <div>@Html.DropDownListFor(yyy)</div>
    <table id="searchResults"></table>
    <input id="Reshop" type="submit" value="Reshop" />
} 
```

当然，现在将表格放在表单中并不意味着它会在您提交表单时向服务器发送任何内容。您需要放置输入字段（如果您不希望它们对用户可见，则隐藏），其中将包含将被 POST 回的值。此外，这些输入字段名称必须遵循绑定到列表的[标准约定](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。

您实际上并没有展示局部视图的外观，但这里有一个示例说明它的外观以便遵守约定。例如，假设您在 OrderViewModel 中有 2 个要绑定的属性：OrderId 和 OrderDetail：

```
@model IEnumerable<OrderViewModel>
@{
    // We set the name prefix for input fields to "sovm"
    // because inside your RSOrderViewModel the collection 
    // property you want to bind to this table is called sovm
    // and in order to respect the convention the input names
    // must be in the following form "sovm[0].OrderId", "sovm[1].OrderId", ...
    ViewData.TemplateInfo.HtmlFieldPrefix = "sovm";
}
<thead>
    <tr>
        <th>Order Id</th>
        <th>Order detail</th>
    </tr>
</thead>
<tbody>
    @Html.EditorForModel()
</tbody> 
```

然后你可以有一个编辑器模板，它将为模型的每个元素（`~/Views/Shared/EditorTemplates/OrderViewModel.cshtml`）呈现：

```
@model OrderViewModel
<tr>
    <td>@Html.EditorFor(x => x.OrderId)</td>
    <td>@Html.EditorFor(x => x.OrderDetail)</td>
</tr> 
```

模板的名称是要绑定到的集合中使用的类型的名称 ( `IEnumerable<OrderViewModel> sovm { get; set; }`=> `OrderViewModel.cshtml`)。`~/Views/Shared/EditorTemplates`如果它可以在多个控制器之间重复使用，或者它特定于当前控制器，则它也必须放在文件`~/Views/XXX/EditorTemplates`夹中，其中 XXX 是当前控制器。

# wcf - 在 perl 中访问 wcf 服务响应

> ID：10135121
> 
> 赞同：0
> 
> 时间：2012-04-13T04:10:54.460
> 
> 标签：wcf, perl

我编写了一个 perl 脚本来访问返回复杂数据的 wcf 服务方法。我能够看到来自 wcf 服务的 xml 模式响应（在 perl 中使用 dumper）。但我无法访问架构中的值：

```
 $response1= $soap->GetAddress
(SOAP::Data->new(name=>'mailAddress',value=>[SOAP::Data->new (name=>'a:city'),
SOAP::Data->new (name=>'a:name'),SOAP::Data->new (name=>'a:streetaddress'),SOAP::Data->new 
(name=>'a:zipcode')])->attr({'xmlns:a'=>$xmlns}))->result; 
```

我正在使用它来访问服务中的方法。如何从 中读取值`$response1`？

$响应1：

```
 $VAR1 = {
      'city' => 'Hyd',
      'streetaddress' => 'ECIL',
      'name' => 'Avinash Patil',
      'zipcode' => '5000012',
      'state' => 'AP'
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T03:36:49.607

```
$response1=$soap->getCustomer(SOAP::Data->new(name => 'customerid', value =>$custid))->result;
print $response1->{'Email'};
print "\n";
print $response1->{'Mobile'};
print "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:11:44.490

尝试使用这个：

```
my @values;

my $value[0]= $soap->'Method-name'($header,$data)->valueof('//city');
my $value[1]= $soap->'Method-name'($header,$data)->valueof('//streetaddress');
my $value[2]= $soap->'Method-name'($header,$data)->valueof('//name');
my $value[3]= $soap->'Method-name'($header,$data)->valueof('//state'); 
```

# azure - 如何在 Azure Blob 存储中设置超过 1 年到期的共享访问签名

> ID：10135133
> 
> 赞同：1
> 
> 时间：2012-04-13T04:12:14.840
> 
> 标签：azure, blob

您可以设置超过 1 年到期的共享访问签名以避免在 Windows azure 中进行设置调用吗？

```
var signature = blob.GetSharedAccessSignature(new SharedAccessPolicy()
        {
            SharedAccessStartTime = null,
            SharedAccessExpiryTime =
               DateTime.Now.AddMinutes(expireMinutes), //expire time is restricted at azure to 1hr
            Permissions = SharedAccessPermissions.Read //readonly for now
        }); 
```

它不允许我设置超过 1 小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:35:12.790

这些类型的共享访问签名的最长持续时间为一小时，以最大限度地减少泄漏的影响（因为它们不能被撤销）。您需要一个“容器级访问策略”来设置更长（或无限）的过期时间，并且可以随时撤销这些过期时间。

# ruby-on-rails - 为什么在添加 Refinery CMS 后尝试播种时出现“未初始化的常量 RefineryPage”

> ID：10135137
> 
> 赞同：4
> 
> 时间：2012-04-13T04:12:49.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refinerycms

我已将 RefineryCMS 2.0.3 添加到现有（预启动，所以我可以抽 db）应用程序。我在升级到 Devise 2.0 和 rails 3.2 时遇到了很多问题，但我已经足够解决应用程序启动的问题了。不幸的是，我在炼油厂遇到了障碍。

如果我播种或尝试创建页面，我会遇到下面列出的错误。我已经仔细检查了所有迁移似乎都包含（附加）并且所有迁移都已启动。数据库模式（部分附加）似乎处于正常工作状态。

我唯一能想到的是宝石可能是相互矛盾的，但我不确定如何。我添加了我的 gemfile，以防任何更熟悉 Rails 的人都能发现它。

谢谢！

* * *

**尝试运行 rake db:seed 时出错**

```
rake db:seed --trace
** Invoke db:seed (first_time)
** Execute db:seed
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:abort_if_pending_migrations
rake aborted!
uninitialized constant RefineryPage
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:229:in `block in constantize'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `each'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `constantize'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/active_scaffold-3.2.3/lib/active_scaffold/extensions/reverse_associations.rb:34:in `block in autodetect_inverse'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/active_scaffold-3.2.3/lib/active_scaffold/extensions/reverse_associations.rb:26:in `each'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/active_scaffold-3.2.3/lib/active_scaffold/extensions/reverse_associations.rb:26:in `autodetect_inverse'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/active_scaffold-3.2.3/lib/active_scaffold/extensions/reverse_associations.rb:15:in `inverse_of_with_autodetect'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/associations/association.rb:212:in `inverse_reflection_for'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/associations/association.rb:217:in `invertible_for?'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/associations/association.rb:108:in `set_inverse_instance'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/associations/collection_association.rb:351:in `add_to_target'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/associations/collection_association.rb:112:in `build'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/associations/collection_proxy.rb:46:in `build'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/instance_methods.rb:134:in `translation_for'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/adapter.rb:77:in `fetch_attribute'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/adapter.rb:24:in `block in fetch'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/adapter.rb:23:in `each'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/adapter.rb:23:in `fetch'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/instance_methods.rb:67:in `read_attribute'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/class_methods.rb:114:in `block in translated_attr_accessor'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activemodel-3.2.3/lib/active_model/dirty.rb:154:in `attribute_will_change!'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/instance_methods.rb:49:in `write_attribute'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/class_methods.rb:111:in `block in translated_attr_accessor'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/attribute_assignment.rb:78:in `each'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
(eval):3:in `block in assign_attributes'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/globalize3-0.2.0/lib/globalize/active_record/instance_methods.rb:170:in `with_given_locale'
(eval):3:in `assign_attributes'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/base.rb:498:in `initialize'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/validations.rb:39:in `new'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/validations.rb:39:in `create!'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/refinerycms-pages-2.0.3/db/seeds.rb:2:in `<top (required)>'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:520:in `load_seed'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/chance/code/rails/nokr/db/seeds.rb:10:in `<top (required)>'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:520:in `load_seed'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/railties/databases.rake:309:in `block (2 levels) in <top (required)>'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/chance/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/bin/rake:19:in `load'
/Users/chance/code/rails/nokr/activesupport/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => db:seed 
```

* * *

**迁移**

```
up     20120409194703  Create refinerycms authentication schema.refinery authentication
up     20120409194704  Create refinerycms images schema.refinery images
up     20120409194705  Create refinerycms resources schema.refinery resources
up     20120409194706  Create refinerycms pages schema.refinery pages
up     20120409194707  Create seo meta.seo meta engine 
```

* * *

**宝石文件**

```
require 'rbconfig'
HOST_OS = Config::CONFIG['host_os']
source 'http://rubygems.org'
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier'
  gem 'compass'
end
gem 'rack'
gem 'rails', "~> 3.2"
group :development, :test do
  gem 'sqlite3'
end
gem "geocoder"
gem "geonames"
gem "devise", "~> 2.0"
gem "geocoder"
gem "geonames"
gem "paperclip", "~> 2.4"
gem 'transloadit-rails'
gem 'uuidtools' 
gem "friendly_id", "~> 4.0.0.beta14"
gem "squeel"
gem "pg"
gem "cancan"
gem 'kaminari'
#gem 'cantango'
gem "formtastic"
gem 'will_paginate'
gem "nested_form", :git => "git://github.com/ryanb/nested_form.git"
gem 'tire', :git => 'https://github.com/karmi/tire'
gem 'multi_json'
gem 'active_scaffold'
gem "meta_search"
gem 'newrelic_rpm'
gem 'paper_trail'
gem 'jquery-rails'
gem 'activeadmin', :git => "git://github.com/gregbell/active_admin.git"
gem 'refinerycms', '~> 2.0.0'
gem 'refinerycms-i18n',   '~> 2.0.0'
#  gem 'refinerycms-blog', '~> 2.0.0'
#  gem 'refinerycms-inquiries', '~> 2.0.0'
#  gem 'refinerycms-search', '~> 2.0.0'
#  gem 'refinerycms-page-images', '~> 2.0.0'
if HOST_OS =~ /linux/i
  gem 'therubyracer', '>= 0.8.2'
end
gem "haml", ">= 3.1.2"

group :development do
  gem "haml-rails", ">= 0.3.4"
  gem "rspec-rails", ">= 2.6.1"
  gem "guard", ">= 0.6.2"
  gem "rails-footnotes", ">= 3.7"
  gem 'rb-fsevent'
  gem 'growl'
  gem "guard-bundler", ">= 0.1.3"
  gem "guard-rails", ">= 0.0.3"
  gem "guard-livereload", ">= 0.3.0"
  gem "guard-rspec", ">= 0.4.3"
  gem "guard-cucumber", ">= 0.6.1"
end

group :test do
  gem "factory_girl_rails", ">= 1.2.0"
  gem "cucumber-rails", ">= 1.1.1"
  gem "capybara", ">= 1.1.1"
  gem "database_cleaner", ">= 0.6.7"
  gem "launchy", ">= 2.0.5"
  gem "rspec-rails", ">= 2.6.1"
  gem "guard", ">= 0.6.2"
  gem 'rb-fsevent'
  gem 'growl'
  gem "guard-bundler", ">= 0.1.3"
  gem "guard-rspec", ">= 0.4.3"
  gem "guard-cucumber", ">= 0.6.1"
end 
```

* * *

**部分模式**

```
 create_table "refinery_images", :force => true do |t|
    t.string   "image_mime_type"
    t.string   "image_name"
    t.integer  "image_size"
    t.integer  "image_width"
    t.integer  "image_height"
    t.string   "image_uid"
    t.string   "image_ext"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end

  create_table "refinery_page_part_translations", :force => true do |t|
    t.integer  "refinery_page_part_id"
    t.string   "locale"
    t.text     "body"
    t.datetime "created_at",            :null => false
    t.datetime "updated_at",            :null => false
  end

  add_index "refinery_page_part_translations", ["locale"], :name => "index_refinery_page_part_translations_on_locale"
  add_index "refinery_page_part_translations", ["refinery_page_part_id"], :name => "index_f9716c4215584edbca2557e32706a5ae084a15ef"

  create_table "refinery_page_parts", :force => true do |t|
    t.integer  "refinery_page_id"
    t.string   "title"
    t.text     "body"
    t.integer  "position"
    t.datetime "created_at",       :null => false
    t.datetime "updated_at",       :null => false
  end

  add_index "refinery_page_parts", ["id"], :name => "index_refinery_page_parts_on_id"
  add_index "refinery_page_parts", ["refinery_page_id"], :name => "index_refinery_page_parts_on_refinery_page_id"

  create_table "refinery_page_translations", :force => true do |t|
    t.integer  "refinery_page_id"
    t.string   "locale"
    t.string   "title"
    t.string   "custom_slug"
    t.string   "menu_title"
    t.string   "slug"
    t.datetime "created_at",       :null => false
    t.datetime "updated_at",       :null => false
  end

  add_index "refinery_page_translations", ["locale"], :name => "index_refinery_page_translations_on_locale"
  add_index "refinery_page_translations", ["refinery_page_id"], :name => "index_d079468f88bff1c6ea81573a0d019ba8bf5c2902"

  create_table "refinery_pages", :force => true do |t|
    t.integer  "parent_id"
    t.string   "path"
    t.string   "slug"
    t.boolean  "show_in_menu",        :default => true
    t.string   "link_url"
    t.string   "menu_match"
    t.boolean  "deletable",           :default => true
    t.boolean  "draft",               :default => false
    t.boolean  "skip_to_first_child", :default => false
    t.integer  "lft"
    t.integer  "rgt"
    t.integer  "depth"
    t.string   "view_template"
    t.string   "layout_template"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
  end

  add_index "refinery_pages", ["depth"], :name => "index_refinery_pages_on_depth"
  add_index "refinery_pages", ["id"], :name => "index_refinery_pages_on_id"
  add_index "refinery_pages", ["lft"], :name => "index_refinery_pages_on_lft"
  add_index "refinery_pages", ["parent_id"], :name => "index_refinery_pages_on_parent_id"
  add_index "refinery_pages", ["rgt"], :name => "index_refinery_pages_on_rgt"

  create_table "refinery_resources", :force => true do |t|
    t.string   "file_mime_type"
    t.string   "file_name"
    t.integer  "file_size"
    t.string   "file_uid"
    t.string   "file_ext"
    t.datetime "created_at",     :null => false
    t.datetime "updated_at",     :null => false
  end

  create_table "refinery_roles", :force => true do |t|
    t.string "title"
  end

  create_table "refinery_roles_users", :id => false, :force => true do |t|
    t.integer "user_id"
    t.integer "role_id"
  end

  add_index "refinery_roles_users", ["role_id", "user_id"], :name => "index_refinery_roles_users_on_role_id_and_user_id"
  add_index "refinery_roles_users", ["user_id", "role_id"], :name => "index_refinery_roles_users_on_user_id_and_role_id"

  create_table "refinery_user_plugins", :force => true do |t|
    t.integer "user_id"
    t.string  "name"
    t.integer "position"
  end

  add_index "refinery_user_plugins", ["name"], :name => "index_refinery_user_plugins_on_name"
  add_index "refinery_user_plugins", ["user_id", "name"], :name => "index_refinery_user_plugins_on_user_id_and_name", :unique => true

  create_table "refinery_users", :force => true do |t|
    t.string   "username",               :null => false
    t.string   "email",                  :null => false
    t.string   "encrypted_password",     :null => false
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.integer  "sign_in_count"
    t.datetime "remember_created_at"
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "created_at",             :null => false
    t.datetime "updated_at",             :null => false
  end

  add_index "refinery_users", ["id"], :name => "index_refinery_users_on_id"

  create_table "seo_meta", :force => true do |t|
    t.integer  "seo_meta_id"
    t.string   "seo_meta_type"
    t.string   "browser_title"
    t.string   "meta_keywords"
    t.text     "meta_description"
    t.datetime "created_at",       :null => false
    t.datetime "updated_at",       :null => false
  end

  add_index "seo_meta", ["id"], :name => "index_seo_meta_on_id"
  add_index "seo_meta", ["seo_meta_id", "seo_meta_type"], :name => "index_seo_meta_on_seo_meta_id_and_seo_meta_type"

  create_table "user_addresses", :force => true do |t|
    t.integer  "address_id"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end 
```

* * *

如果您更愿意在[那里回答，](http://groups.google.com/group/refinery-cms/browse_thread/thread/adf1c9a1955e5ddf)我之前在 Refinery CMS Google Groups 上问过这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:32:21.010

有趣的是，我认为如果您从 Gemfile 中删除“active_scaffold”，问题就会消失（至少，我能够以这种方式在本地实例化 Refinery::Page，否则我会遇到与您相同的错误）。但是，我敢打赌这个问题会再次出现。据我所知，问题源于炼油厂页面用于翻译的 globalize gem。Refinery::Page 模型调用此类宏：

```
translates :title, :menu_title, :custom_slug, :slug, :include => :seo_meta 
```

这会导致 globalize gem 自动设置几个模型关联。问题是，关联不适用于命名空间模型（Refinery::Page 是命名空间模型）。特别是，来自 Globalize::ActiveRecord::ActMacro 的这个方法用于设置 :"refinery/pages" 和 :"refinery/pages/translations" 之间关联的 class_name，并使用基本的 rails 约定从数据库表名：

```
 def class_name
    @class_name ||= begin
      class_name = table_name[table_name_prefix.length..-(table_name_suffix.length + 1)].downcase.camelize
      pluralize_table_names ? class_name.singularize : class_name
    end
  end 
```

我一直在研究 rails 源代码，看看我是否可以弄清楚 rails 是如何知道使用基于表名的命名空间模型的。还没有看到任何东西。可能是 globalize gem 需要支持在 translates 宏上传递一个额外的选项以允许命名空间模型，然后炼油厂 gem 需要传递它。仍在研究中。

有趣的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:57:18.540

squeel 是我在回答您在 Refinery CMS 上提交的问题时指出的罪魁祸首： [https ://github.com/refinery/refinerycms/issues/1679](https://github.com/refinery/refinerycms/issues/1679)

希望我充分回答了您的问题:-)

菲尔

[https://github.com/parndt](https://github.com/parndt)

# iphone - 构建错误 - 例如消息的接收器类型“ViewController”是前向声明

> ID：10135140
> 
> 赞同：1
> 
> 时间：2012-04-13T04:13:29.670
> 
> 标签：iphone, ios5, compiler-errors

构建时出现 2 个错误，它们位于 AppDelegatem 文件中

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**有两个错误：**

```
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
```

**错误1：**

```
Receiver type "ViewController" for instance messages is a forward declaration 
```

**错误2：**

```
Receiver "ViewController" for class messages is a forward declaration 
```

**符合警报：**

```
self.window.rootViewController = self.viewController; 
```

**警报：**

```
Incompatible pointer types assigning to 'UIViewController *' from 'ViewController*' 
```

如果需要，您可以在此处找到 ViewControllerm ViewControllerh AppDelegatem 的文本文件[http://ninjabreakbot.com/stack/](http://ninjabreakbot.com/stack/)

项目适用于 iOS5，我对此很陌生。请让我知道这样的问题有什么用处。或者，如果提供了足够多的解决方案！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T04:23:50.437

错误消息：`instance messages is a forward declaration`通常意味着您的编译器不知道类的声明，即您没有包含正确的标头。

在您的情况下`#import <ViewController.h>`，在 AppDelegate.m 的开头编写应该解决这个编译器问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T04:58:42.480

检查`initWithNibName`。是 nib 文件名`ViewController`还是其他名称？

在 AppDelegate.h 文件中写入`#import "ViewController.h"`和 `@property (strong, nonatomic) ViewController *viewController;`

写入`@synthesize viewController ;`AppDelegate.m 文件

.h 文件 ::

```
#import <UIKit/UIKit.h>
#import "ViewController.h"
@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *viewController;

@end 
```

.m 文件::

```
#import "AppDelegate.h"
#import "ViewController.h"

@implementation AppDelegate

@synthesize window;
@synthesize viewController ;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}
@end 
```

# jquery - 如何将数据从 MySQL 转换为 jQuery 变量？

> ID：10135142
> 
> 赞同：1
> 
> 时间：2012-04-13T04:13:52.180
> 
> 标签：jquery, mysql, ajax

jQuery 的新功能。这是我到目前为止所拥有的 - 基本上，我希望 jQuery+ajax 获取某个项目的最新日期。脚本每 1 秒刷新一次。

这是脚本：

```
<script>
var auto_refresh = setInterval(
function()
{
$.ajax({
    type: "POST",
    url: "gettime.php",
    data: ({i : <?=$itemid;?>}),
    function(data){
        var s = data;
    }
});
var t = s.split(/[- :]/); //split time from mysql
var d = new Date(t[0], t[1]-1, t[2], t[3], t[4], t[5]);
$('#defaultCountdown').countdown({until: d,compact: true, 
description: ''});
}, 1000);
</script> 
```

这是gettime.php

```
<?php 
include("inc/dblink.inc");
$itemid = intval($_POST['i']);
$row = mysql_fetch_array(mysql_query("SELECT * FROM test WHERE itemid='$itemid' ORDER BY bidid DESC LIMIT 0,1"));
$date = $row['date'];
echo $date; //sample date is 2012-04-13 10:03:37
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:18:03.367

您必须在 ajax 回调中执行所有操作，因为`data`and`s`仅在此处可用（以及*在*它运行时）：

```
var auto_refresh = setInterval(function(){
    $.ajax({
        type: "POST",
        url: "gettime.php",
        data: ({i : <?=$itemid;?>}),
        complete: function(data){
            var s = data;
            var t = s.split(/[- :]/); //split time from mysql
            var d = new Date(t[0], t[1]-1, t[2], t[3], t[4], t[5]);
            $('#defaultCountdown').countdown({until: d,compact: true, description: ''});
        }
    }); 
}, 1000); 
```

# jquery - 如何链接到页面并激活该页面上的选项卡内容？

> ID：10135143
> 
> 赞同：1
> 
> 时间：2012-04-13T04:14:28.867
> 
> 标签：jquery, ruby-on-rails, link-to

我正在尝试从一个页面直接链接到另一页面上的特定选项卡。我可以访问其他页面，但不知道如何访问特定选项卡。有人做过吗？

在我的 page1.html.haml 上，我有：

```
.content-box-header
  %li= link_to "tab1", "#tab1", :class => "default-tab"
  %li= link_to "tab2", "#tab2", :class => ""
.content-box-content
  #tab1.tab-content.default-tab
    = render :partial => 'base1_form'
  #tab2.tab-content
    = render :partial => 'base2_form' 
```

如果您点击此页面上的 tab2 链接，则 tab2 的内容将与 tab1 的内容重叠。

在我的 page2.html.haml 上，我有：

```
= link_to "link_me", some_path 
```

此链接显示 page1.html.haml 和 tab1。我怎样才能让这个链接激活#tab2呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:34:57.720

您可以在 page2 中的 page1 的 url 上放置一个额外的参数来激活 tab2 而不是默认选项卡。

所以在第2页：

```
= link_to "link_me", some_path(:tab2 => "") 
```

在 page1 中，您可以在 .content-box-content div 之后的底部添加它

```
- if params[:tab2]
  :javascript
    jQuery(document).ready(function(){
      jQuery("#tab2_link").click();
    }); 
```

并且，在您的链接上添加该 ID

```
.content-box-header
  %li= link_to "tab1", "#tab1", :class => "default-tab", :id => "tab1_link"
  %li= link_to "tab2", "#tab2", :class => "", :id => "tab2_link" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:02:34.070

查看[http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)，它很好地完成了这种深度链接。

# mysql - MySQL - 生成最“流行”记录的列表

> ID：10135144
> 
> 赞同：1
> 
> 时间：2012-04-13T04:14:42.890
> 
> 标签：mysql

我正在使用以下代码生成某个 release_id 在表中出现多少次的列表

所以 release_id 可以在我的表中出现多次。

```
SELECT release_id, COUNT( release_id ) 
FROM charts_extended
GROUP BY release_id
ORDER BY COUNT( release_id ) DESC 
LIMIT 0 , 30 
```

示例输出

```
release_id COUNT(release_id)
1231287 76
177617 73
12218 67 
```

例如 1231287 在表格中出现 76 次

我现在如何输出 release_id 出现的排名数字

例如

1231287 = #1 12218 = #3

'release_id 1231287 是最受欢迎的 '12218 是第二受欢迎的'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:17:05.050

使用 rownum 模拟。看到这个链接，它看起来是一篇好文章。 [http://craftycodeblog.com/2010/09/13/rownum-simulation-with-mysql/](http://craftycodeblog.com/2010/09/13/rownum-simulation-with-mysql/)

或者这个。

[MySQL 通过选择 rownum 作为起始值来限制选择](https://stackoverflow.com/questions/4584439/mysql-limit-selection-by-selecting-rownum-as-start-value)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T04:24:27.783

试试这个：

```
select release_id, cnt, @row := @row + 1 rank from (
  select release_id, count(release_id) cnt
  from releases
  group by release_id
  order by cnt desc
  limit 30
) final, (select @row := 0) init 
```

[在这里](http://sqlfiddle.com/#!2/eb4b6/1)拉小提琴。

您必须使用派生表。如果你不这样做，订单将被打乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T04:21:51.530

听起来@Steve 对在 MySQL 中实现这一点有一个很好的答案。我的 2 美分……我想这取决于应用程序，但我通常在业务逻辑中处理这种处理。在解析行时，您只需将行号添加到它们。其中一些将是性能问题，但是——对我来说——通常只是为了保持代码的清洁和可维护性。

根据您的`LIMIT 0,30`，我猜您一次只想显示 30 个？如果你想展示的不仅仅是前 30 名，我想你会发现在你的业务逻辑中的某个地方维护它肯定更容易。[这是](http://www.php-mysql-tutorial.com/wikis/php-tutorial/paging-using-php.aspx)在 PHP 中进行“分页”的一个示例。

# asp.net - 如何暂时关闭正在运行的网站并提示“此网站暂时不可用”

> ID：10135146
> 
> 赞同：2
> 
> 时间：2012-04-13T04:14:55.727
> 
> 标签：asp.net

我们如何暂时关闭正在运行的网站并给出一条消息“该网站暂时不可用”，实际上我想赋予管理员权力，他可以暂时打开/关闭网站...根据我的需要，我不想添加 web_offline .htm 页面。我只是通过按钮控制来完成，即活动网站和非活动网站（动态方法）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T04:20:19.550

将`app_offline.htm`页面**放在您的 asp.net 网站的根目录上**。

然后用户会看到你在这个`app_offline.htm`文件上写了什么。

更多详情[http://weblogs.asp.net/scottgu/archive/2005/10/06/426755.aspx](http://weblogs.asp.net/scottgu/archive/2005/10/06/426755.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T04:19:48.393

我想你可能正在寻找这个： [http ://weblogs.asp.net/scottgu/archive/2005/10/06/426755.aspx](http://weblogs.asp.net/scottgu/archive/2005/10/06/426755.aspx)

基本上只需创建一个 app_offline.htm 文件，您的应用程序将关闭，用户将获得该页面。

# ruby-on-rails - 为什么此方法无法检测 ActionView::Template :render？

> ID：10135147
> 
> 赞同：2
> 
> 时间：2012-04-13T04:15:09.043
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, metaprogramming, mvc-mini-profiler

我们正在将[MiniProfiler](http://miniprofiler.com)移植到 Ruby，并希望为 Rails 视图和局部视图添加自动检测。

我知道[现有的仪器](http://api.rubyonrails.org/classes/ActiveSupport/Notifications.html)支持，但理想情况下希望获得“开始”和“停止”事件。我们还希望支持不支持通知的早期版本的 Rails。

我破解了一个简短的仪器并测试了在调用*之前*和*之后*连接渲染：

```
def prof(klass, method)
  with_profiling = (method.to_s + "_with_profiling").intern
  without_profiling = (method.to_s + "_without_profiling").intern

  klass.send :alias_method, without_profiling, method
  klass.send :define_method, with_profiling do |*args, &orig|
    puts "before #{method} #{args}"
    self.send without_profiling, *args, &orig
    puts "after #{method}"
  end
  klass.send :alias_method, method, with_profiling
end

prof ActionView::Template, :render 
```

但是，一旦激活，`render`就没有正确检测。特别是这适用于某些部分，但会爆炸：

> ActionView::Template::Error（nil:NilClass 的未定义方法 `html_safe'）

这个方法钩子有什么问题？什么是挂钩方法的适当健壮方法，以便它们不会受到这个问题的影响（维护微不足道的 API `prof klass, method`：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:03:36.800

您已经重新定义了返回最终结果的方法，`puts`通常是`nil`. 修复可能是：

```
klass.send :define_method, with_profiling do |*args, &orig|
  puts "before #{method} #{args}"
  result = self.send without_profiling, *args, &rig
  puts "after #{method}"

  result
end 
```

# python - 浏览器、Safari 和 Opera 需要什么来理解 HTTP 响应？

> ID：10135150
> 
> 赞同：3
> 
> 时间：2012-04-13T04:15:37.693
> 
> 标签：python, http, httpresponse

我有一个 HTTP 响应

```
HTTP/1.0 200 OK\r\n\r\n
<!DOCTYPE html>... 
```

Firefox 和 Chrome 似乎都能很好地理解它并显示 HTML 内容 - 但是 Safari 和 Opera 只是以纯文本形式显示所有内容。添加“内容类型”字段会使所有浏览器的一切都变得混乱。

有什么问题？

我不打算发布完整的代码，因为有很多与问题无关的任意编程逻辑，但是，发生的事情是这样的：

我创建了一个套接字，然后发生所有相关的套接字操作 - 所有这些都像魔术一样工作，然后在所有处理之后 I .send(' response here ') 并且由于某种原因它只显示在 Firefox 和 Chrome 上。

响应字符串如下所示：

```
'''
HTTP/1.1 200 OK\r\n
<!DOCTYPE html>
...
...
</html>
''' 
```

这就是我所看到的： [http ://cl.ly/0y0U1s0G3X2v1C11282S](http://cl.ly/0y0U1s0G3X2v1C11282S)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:24:38.133

您声明您正在发送一个文字字符串，例如：

```
'''
HTTP/1.1 200 OK\r\n
<!DOCTYPE html>
...
''' 
```

`\n`但是，Python 仅在三引号字符串中添加一个对应于换行符的单个。所以发送的字节最终是

```
HTTP/1.1 200 OK\r\n\n<!DOCTYPE html>... 
```

如您所见，缺少`\r`. 我建议您使用如下代码：

```
sock.send("HTTP/1.1 200 OK\r\n\r\n") 
```

在上面，您可能想要添加一个`Content-type`标题：

```
sock.send("HTTP/1.1 200 OK\r\nContent-type: text/html\r\n\r\n") 
```

然后，在发送标头后，发送文档有效载荷：

```
sock.send('''
<!DOCTYPE html>
...
''') 
```

这将协议级标头与数据有效负载分开，并使您的代码更易于理解。在标题中获得正确的位置也更容易`\r\n`，因为这很重要。

# git - Git - 在错误的目录中进行了初始化

> ID：10135155
> 
> 赞同：11
> 
> 时间：2012-04-13T04:16:29.067
> 
> 标签：git, undo, git-bare

我`git --bare init`在错误的目录中运行（在服务器中）。我在该目录中看到文件分支、配置、deps 等。我该如何撤消它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-13T04:52:29.127

由于您执行了“--bare”初始化，因此没有 .git 目录 - 而 .git 目录的正常内容直接位于父目录中。例如，您执行 'git init --bare' 的地方如下所示：

```
$ git --bare init
Initialized empty Git repository in /Users/ebg/test/foo/
$ ls
HEAD        config      hooks/      objects/
branches/   description info/       refs/ 
```

要撤消此操作，只需执行：

```
rm -rf HEAD config hooks objects branches description info refs 
```

当然，如果您已经有具有这些名称的文件和目录，请小心。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T04:23:38.797

如果您在以前未设置为 git 存储库的目录上执行此操作，则只需删除 .git 文件夹（假设您使用的是 linux）：

```
rm -rf .git 
```

否则，如果目录已经包含存储库（.git 目录），那么 git init 将不起作用（即 git log 将在 git init 之前和之后显示相同的提交）。

# git - Git：合并分支并接受所有冲突的 HEAD

> ID：10135164
> 
> 赞同：3
> 
> 时间：2012-04-13T04:17:25.783
> 
> 标签：git, version-control

是否可以将分支合并到 git 中的当前分支并接受 HEAD 处理所有合并冲突？基本上这说明我知道我在做什么，而不关心我正在合并的另一个分支中的内容，接受来自当前分支的 HEAD 的所有内容，并且不要抱怨合并冲突。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T04:27:17.603

从git merge的[文档中：](http://schacon.github.com/git/git-merge.html)

```
$ git merge -s ours <branch name> 
```

# algorithm - 我真的对时间复杂性感到困惑

> ID：10135174
> 
> 赞同：2
> 
> 时间：2012-04-13T04:19:40.010
> 
> 标签：algorithm, time, time-complexity

我知道算法的时间`T(n)`可以`O(g(n))`受以下定义的限制：

```
T(n) is O(g(n)) iff there is a c > 0, n0 > 0, such that for all n >= n0: 
```

对于大小为`n,`A 的每个输入，最多需要`c * g(n)`步数。 `T(n)`是所有大小为 n 的输入中最长的时间。

但是我不明白的是`Ω(g(n))`. 定义是对于**一些**大小为 n 的输入，A 至少需要`c * g(n)`几步。

但是，如果这是定义，`Ω`那么我不能找到与上限相同的任何算法的下限吗？例如，如果在最坏的情况下进行排序，`O(nlogn)`那么我不能轻松地展示`Ω(nlogn)`以及看到对于任何尺寸 n 必须采取`nlogn`步骤的至少一个错误输入吗？让我们假设我们正在谈论`heapsort`. 我真的不确定我在这里遗漏了什么，因为每当我被教一种新算法时，某种方法的时间都是`Ɵ(g(n)) or O(g(n))`，但没有解释为什么会这样`Ɵ or O`。

我希望我说的足够清楚，如果不是然后问你误解了什么。我真的需要澄清这种困惑。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:03:58.703

`O`是一个上限，这意味着我们知道一个算法在最坏的情况下`O(n lg n)`渐近地最多采用恒定的时间`n lg n`步长。

`Ω`是一个下限，这意味着我们知道在最坏的情况下，`Ω(n lg n)`算法不可能渐进地小于步数。`n lg n`

`Ɵ`是一个紧密的界限：例如，如果一个算法是，`Ɵ(n lg n)`那么我们知道它既是`O(n lg n)`（所以至少和 一样快`n lg n`）和`Ω(n lg n)`（所以我们知道它不比 快`n lg n`）。

你的论点有缺陷的原因是你实际上假设你知道`Ɵ(n lg n)`，而不仅仅是`O(n lg n)`。

例如，我们知道`Ω(n lg n)`比较排序有一个普遍的界限。一旦我们证明`O(n lg n)`了归并排序，这意味着归并排序是`Ɵ(n lg n)`. 请注意，mergesort**也是***，* `O(n^2)`因为它不比. （人们通常不会这样描述它，但这就是正式符号的含义。）**`n^2`**

 **对于某些算法，我们不知道严格的界限；简单计算模型中的一般[3SUM 问题](http://en.wikipedia.org/wiki/3SUM)是众所周知的，`Ω(n lg n)`因为它可以用于执行排序，但我们只有`Ɵ(n^2)`算法。该问题的最佳算法在`n lg n`和之间`n^2`；我们可以说它是`O(n^2)`and `Ω(n lg n)`，但我们不知道`Ɵ`。

还有`o(f)`, 表示严格小于`f`, and `ω(f)`, 表示严格大于`f`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:03:48.810

我熟悉的定义是 T(n) 是 Ω(g(n)) if for some `n0`, for all `n>n0`, `T(n) >= g(n)*k`for some `k`。

然后某物是 Θ(n) 当且仅当它是 O(g(n)) 和 Ω(g(n))。**

# php - 将断线添加到 jQuery 每个结果

> ID：10135178
> 
> 赞同：0
> 
> 时间：2012-04-13T04:21:30.647
> 
> 标签：php, mysql, json, jquery

我有一个问题，我一直在尝试解决这个问题，我有一个搜索框，它使用 php+mysql+jquery+json 触发 GET 方法，在返回 json 结果后，我将其显示在 DOM 上，现在这是我的问题，我使用以下代码显示结果；

```
success:function(data){         
            $.each(data, function (index, item) {

            for( var item in data ) {
            //alert(data[key].category);
            }

            //cleanup();
                $("<a />", {
                    href: data[index].userid,
                    text: data[index].category
                })
                .appendTo("#divResultPlaceHolder")
                .css({
                    color: "red",
                    size: "35px",
                    display:"block"
                });

                //$("<br/>").appendTo("a");   <<<<<<<============does work but does not meet requirements
                $(":input[type='checkbox']").insertBefore("a");
            }); 
```

那么生成的 DOM 显示将是这样的；

```
SecretaryC# ProgrammerAccountantSr. AccountantVP for FinanceAccounting Manager 
```

以这种方式，我希望它为每个返回的结果换行；但是，添加`<br/>`根本没有帮助，因为它似乎添加了断线 (x) 编号。每次执行的元素数，

我希望有这样的显示；

```
Secretary
C# Programmer
Accountant
Sr. Accountant
VP for Finance
so on so forth.... 
```

我知道我只是在某个地方错过了一些东西，但也许我的眼睛已经疲倦地盯着宽大的白色屏幕看了几个小时。

磷

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T04:36:09.323

通常，如果您想用动态生成的 html 或普通字符串换行，只需使用 \n 代替
或其他任何东西。

别的

```
Secretary\n
C# Programmer\n
Accountant\n
Sr. Accountant\n
VP for Finance\n
etc 
```

# ruby - 在哈希中，如何为同一个键添加两个值而不是覆盖？

> ID：10135183
> 
> 赞同：2
> 
> 时间：2012-04-13T04:22:05.593
> 
> 标签：ruby, hash, ncbi

基本上我有这些文件（来自NCBI的medline）。每个都与一个期刊标题相关联。每个都有 0、1 个或多个 genbank 标识号 (GBID)。我可以将每个文件的 GBID 数量与每个期刊名称相关联。我的问题是我可能有多个文件与同一期刊关联，我不知道如何将每个文件的 GBID 数添加到每个期刊的 GBID 总数中。

我当前的代码：jt 代表期刊标题，从文件中正确提取。GBID 会在遇到时添加到计数中。

...到目前为止，执行了第一次搜索，您可以将每个“pmid”视为一个文件，因此每个“获取”一次遍历所有文件...

```
 pmid_list.each do |pmid|

   ncbi_fetch.pubmed(pmid, "medline").each do |pmid_line|

    if pmid_line =~ /JT.+- (.+)\n/
        jt = $1
        jt_count = 0
        jt_hash[jt] = jt_count

        ncbi_fetch.pubmed(pmid, "medline").each do |pmid_line_2|

            if pmid_line_2 =~ /SI.+- GENBANK\/(.+)\n/
                gbid = $1
                jt_count += 1
                gbid_hash["#{gbid}\n"] = nil
            end 
        end 

        if jt_count > 0
            puts "#{jt} = #{jt_count}"

        end
    end
  end
end 
```

我的结果：

```
 Your search returned 192 results.
 Virology journal = 8
 Archives of virology = 9
 Virus research = 1
 Archives of virology = 6
 Virology = 1 
```

基本上，我怎么才能说病毒学档案= 15，但是对于任何期刊标题？我尝试了一个哈希，但是第二个病毒学档案只是覆盖了第一个......有没有办法让两个键在哈希中添加它们的值？

完整代码：

```
 #!/usr/local/bin/ruby

 require 'rubygems'
 require 'bio'

Bio::NCBI.default_email = 'kepresto@uvm.edu'

ncbi_search = Bio::NCBI::REST::ESearch.new
ncbi_fetch = Bio::NCBI::REST::EFetch.new

print "\nQuery?\s" 

query_phrase = gets.chomp

"\nYou said \"#{query_phrase}\". Searching, please wait..."

pmid_list = ncbi_search.search("pubmed", "#{query_phrase}", 0)

puts "\nYour search returned #{pmid_list.count} results."

if pmid_list.count > 200
puts "\nToo big."
exit
end

gbid_hash = Hash.new
jt_hash = Hash.new(0)

pmid_list.each do |pmid|

ncbi_fetch.pubmed(pmid, "medline").each do |pmid_line|

    if pmid_line =~ /JT.+- (.+)\n/
        jt = $1
        jt_count = 0
        jt_hash[jt] = jt_count

        ncbi_fetch.pubmed(pmid, "medline").each do |pmid_line_2|

            if pmid_line_2 =~ /SI.+- GENBANK\/(.+)\n/
                gbid = $1
                jt_count += 1
                gbid_hash["#{gbid}\n"] = nil
            end 
        end 

        if jt_count > 0
            puts "#{jt} = #{jt_count}"

        end
        jt_hash[jt] += jt_count
    end
end
end

jt_hash.each do |key,value|
# if value > 0
    puts "Journal: #{key} has #{value} entries associtated with it. "
# end
end

# gbid_file = File.open("temp_*.txt","r").each do |gbid_count|
#   puts gbid_count
# end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:31:28.087

在顶部某处声明 jt_hash 以零开头：

`jt_hash = Hash.new(0)`

然后：

`puts "#{jt} = #{jt_count}"`

放：

`jt_hash[jt] += jt_count`

这使得 jt_count 在散列中递增，而不是被覆盖。这将在发生时打印出所有内容，因此您将得到如下信息：

```
Your search returned 192 results.
Virology journal = 8
Archives of virology = 9
Virus research = 1
Archives of virology = 15
Virology = 1 
```

然后，如果您希望所有内容都打印一次，只需将一些内容放在通过 jt_hash 并打印所有内容的末尾：

```
jt_hash.each { |elem|
  puts "#{elem[1]} = #{elem[0]}"
} 
```

# python - 停止 python 程序

> ID：10135184
> 
> 赞同：2
> 
> 时间：2012-04-13T04:22:08.050
> 
> 标签：python, interrupt, control-c

我有一个 python 程序，可以显示电动汽车的电池电压和温度。我通常从 Mac 上的命令行运行它，只需使用向上箭头查找更改目录的命令，然后使用向上箭头查找运行程序的命令。我们想出了如何编写一个自动执行此操作的脚本并将其保存为应用程序。它工作得很好，但不知道如何退出程序。我在使用命令行时使用控制 C。如何在脚本或应用程序中完成？我不想让我们的客户使用命令行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:48:46.443

```
import sys; sys.exit() 
```

将停止 Python 程序。何时调用该代码取决于您并取决于程序的详细信息（您可能会在按下某个按钮时发生这种情况，或者在一定时间后，或者在满足其他条件时）。如果您必须在程序结束前进行任何“清理”，也要小心——这也取决于应用程序的类型。

如果出于某种原因您想以与按 Control-C*完全相同的方式停止它，您可以这样做*

```
raise KeyboardInterrupt 
```

# vba - 如何在连字符上使用 Split()？

> ID：10135185
> 
> 赞同：2
> 
> 时间：2012-04-13T04:22:14.213
> 
> 标签：vba

我有一个字符串，在结尾附近包含“-”。我想将所有内容都返回到该连字符的左侧。

我不知道如何使用 Split() 或 Regex() 来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T05:50:13.453

处理删除连字符和非连字符大小写的两种方法

```
Sub Test1()
    Dim StrTest As String
    StrTest = "I have a hypen-somewhere"
    If InStr(StrTest, "-") > 0 Then
        MsgBox Left$(StrTest, InStr(StrTest, "-") - 1)
    Else
        MsgBox "Not found"
    End If
End Sub

Sub Test2()
    Dim StrTest As String
    Dim vString
    StrTest = "I have a hypen-somewhere"
    vString = Split(StrTest, "-")
    If UBound(vString) > 0 Then
        MsgBox vString(0)
    Else
        MsgBox "Not found"
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:27:12.020

[在此处](http://www.vb6.us/tutorials/vb6-string-functions)`Instr()`使用,`Mid()`和的组合`Len()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T04:38:59.633

您可以尝试以下方法：

```
Dim hyphenString As String = "hello-world"
Dim leftSide As String = Left(hyphenString, InStr(hyphenString, "-")) 
```

`leftSide`现在应该包含“你好”

# php - 将时间过长的实例替换为单个……实体

> ID：10135187
> 
> 赞同：0
> 
> 时间：2012-04-13T04:22:27.917
> 
> 标签：php, regex, replace

我正在尝试使用 PHP 过滤公开提交的内容，以防止人们在其内容的末尾添加太多句点。

提交的内容可能是这个 html 的形式：

```
<p>Hi Jummy. I haz the lolz...............</p>
<h3>Yeah.... <a href="/foo">dem lolz are funny</a>..</h3> 
```

理想情况下，我想用以下规则替换时间过长的实例

```
1 period = left alone
2 periods = 1 period
2+ periods = &hellip; 
```

所以上面的例子会变成：

```
<p>Hi Jummy. I haz the lolz&hellip;</p>
<h3>Yeah&hellip; <a href="/foo">dem lolz are funny</a>.</h3> 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:27:56.370

首先，替换三个或更多句点的所有实例

```
$content = preg_replace('/\.{3,}/', '&hellip;', $content); 
```

然后，替换两个时期的实例

```
$content = str_replace('..', '.', $content); 
```

# php - ATK4 - 自动完成显示字段

> ID：10135190
> 
> 赞同：2
> 
> 时间：2012-04-13T04:23:22.230
> 
> 标签：php, user-interface, frameworks, autocomplete, atk4

好的，所以我脸朝下躺在人行道上，看着 ATK4 的学习曲线……

我正在尝试设置一个简单的页面，就像这里的敏捷演示：http: [//codepad.agiletoolkit.org/autocomplete](http://codepad.agiletoolkit.org/autocomplete)使用我自己的数据库表。

所以，我遇到的问题是数据库记录主键“id”出现在自动完成框中。数据全部正确显示，但显然，我希望显示复杂名称 (complex_name) 列数据，而不是 id。我看不到任何地方可以定义要显示的列，而且敏捷似乎正在决定这一点？我可以设置吗？我究竟做错了什么？

如此简单的事情，但我一直在敲我的头，不知道如何在 ATK4 中设置它这么多小时，现在我可以扯掉我的头发了。我已经搜索并查看了代码示例。

这是我的代码：

```
<?php
class page_index extends Page {
    function init(){

        parent::init();
        $page=$this;

        $form=$this->add('Form');

        $name=$form->addField('autocomplete','complex_name','Complex Lookup/Add')->setModel('Complex');
        $form->getElement('complex_name')->js('change',$form->js()->submit());

        $form2=$this->add('MVCForm');
        $model = $form2->setModel('Complex');
        if($_GET['id'])$model->loadData($_GET['id']);
        $form2->addSubmit();
        if($form2->isSubmitted()){
            $form2->update();
            $form2->js()->reload()->execute();
        }

        if($form->isSubmitted()){
            $form2->js()->reload(array('id'=>$form->get('complex_name')))->execute();
        }
    }
}

<?php
class Model_Complex extends Model_Table {
    public $entity_code='condo_complexes';
    function init(){
        parent::init();

        $this->addField('complex_name');
        $this->addField('complex_address1');
        $this->addField('complex_city');
        $this->addField('complex_zip');

    }
} 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:46:57.697

查看这个附加组件：[https ://github.com/atk4/autocomplete](https://github.com/atk4/autocomplete)

它尚未完全完成，但处于开发阶段。

也许您也有兴趣关注 ATK4 视频群聊。访问 ATK4 主页并获取更多信息。

# php - PHP $_SESSION 数组在一个 div 中填充，在另一个 div 中为空

> ID：10135191
> 
> 赞同：0
> 
> 时间：2012-04-13T04:23:32.893
> 
> 标签：php, jquery, ajax, session

好的......我有一些没有逻辑意义的东西，我希望有人能指出我犯的愚蠢错误。我有一个页面，我希望菜单更改用户是否登录。我正在使用会话变量 $_SESSION['is_logged_in] 来存储登录状态。例如，如果注销，菜单应该显示登录。如果已登录，则相同的菜单应显示已注销。这是逻辑片段中的代码。我提前为所有代码片段道歉，但我想尽可能清楚。请帮忙！

首先，我有一个名为 index.php 的主页，其中有一些空的 div：

```
<div id="wrapper">
   <div id="header">
      <h1>My Page</h1>
      <div id="navigation">
      </div> <!-- end of navigation div -->
   </div> <!-- end if header div -->
   <p>&nbsp;</p>
   <div id="mainContent">
   </div><!-- end mainContent div -->
</div> <!-- end wrapper div --> 
```

在此页面（index.php）中，我在文档准备好导航 div 的 jquery 负载：

```
<script type="text/javascript">
  $(document).ready(function(e) {
      //load the default menu
      $('#navigation').load("menu.php");
   });
</script> 
```

好的...现在 menu.php 具有以下 html/php：

```
<?php 
   session_start();
   include 'php/functions.php';

   //following is for debugging, you will see later where this is useful
   if (is_logged_in())
   {     
     echo "logged in value: " . is_logged_in() . "<br />"; 
     print_r($_SESSION);
   }
   else
 echo "not sure what is going on</br >";
   echo "<br />"; 
?>
  <ul id="menu" class="DropdownMenu">
     <li class="sub"><a href="#">Account</a>
        <ul>
           <?php 
              //this is where it should show one link or the other based on the value in $_SESSION
              if (is_logged_in()) { 
                echo "<li><a href=\"#\" class=\"ClickLogout\">Log Out</a></li>\n";
              } else {
                echo "<li><a href=\"#\" class=\"ClickLogin\">Log In</a></li>\n";
              } 
           ?>
        </ul>
     </li>
  </ul> 
```

好的......此时，当页面加载时，在菜单顶部我看到调试消息“不确定这里发生了什么”，因为我还没有登录。然后我单击登录链接并通过 ajax 填充 index.php 中的 mainContent div：

这是在 menu.php 中：

```
$(document).ready(function(e) {
   var options = { 
      target:        '#mainContent',   // target element(s) to be updated with server response 
      success:       reloadMenu,  // post-submit callback 
      delegation:    true
   }; 

   // post-submit callback 
   function reloadMenu(responseText, statusText, xhr, $form)  { 
      $('#navigation').load("menu.php");
   }; 

   //set the jquery form plugin for the login form
   $('.ContentForm').ajaxForm(options);

   //load the login form in the mainContent div
   $('#wrapper').on("click", ".ClickLogin", function(e) {
      $('#mainContent').load("login.php");
   });

}); 
```

上面的代码表明，当表单提交成功时，post submit 回调应该重新加载菜单，就像 index.php 文档准备好的初始加载一样。通过调试，我确实看到它确实重新加载了它，但它从未在会话变量中看到任何内容，因此即使我已登录，它仍然显示登录链接而不是注销。

现在，把它们放在一起只是为了表明我没有疯，这是 login.php 中的内容：

```
<?php
   // start the session
   session_start();
   include 'php/functions.php';

   //this sections handles the post of the form
   $show_form = true;
   if($_SERVER['REQUEST_METHOD'] == "POST") 
   {
      $email = $_POST['email'];
      $password = $_POST['password'];

      if (authenticate_user($email, $password)) //this will set $_SESSION variables
      {
         $show_form = false;
         echo "Congratulations " . get_user_name() . ", you are logged in <br />";

         //following is for debugging, you will see later where this is useful
         if (is_logged_in())
         {   
            echo "logged in value: " . is_logged_in() . "<br />"; 
            print_r($_SESSION);
         }
         else
            echo "not sure what is going on</br >";
      }
      else
      {
         echo "Invalid email or password. Try again <br />";
      }
   }
?>

<?php if ($show_form) { ?>
<div id="formContent">
   <h2 class="ContentHeader">Log In</h2>
   <form id="contentForm" name="registration" class="ContentForm" method="post" action=<?php echo $_SERVER['PHP_SELF']?>>
      <p>
        <label for="email">Email:</label>
        <input type="email" name="email" id="email" required="required">
     </p>
     <p>
        <label for="password">Password:</label>
        <input type="password" name="password" id="password" required="required">
     </p>
     <p>
        <input type="submit" name="insert" id="insertLink" value="Submit It" /> 
        <input type="reset" name="cancel" id="cancel" value="Reset" />
     </p>
     <p>Forgot Password? Click <a href="#">here</a></p>
     <p>Need to Register? Click <a class="ClickRegister" href="#">here</a></p>
  </form> 
```

我知道这是很多代码，所以我想指出一件事。此时，提交表单时，在#navigation div 中重新加载menu.php，在#mainContent div 中重新加载login.php。两者都在执行完全相同的代码：

```
 //following is for debugging, you will see later where this is useful
 if (is_logged_in())
 {   
    echo "logged in value: " . is_logged_in() . "<br />"; 
    print_r($_SESSION);
 }
 else
    echo "not sure what is going on</br >"; 
```

当页面在登录表单提交后显示时，在菜单上方显示“不确定发生了什么”，然后是“Array()”，但是在 mainContent 中，它显示“登录值：1”并打印出所有会话值。

为了完整起见，is_logged_in() 函数如下所示：

```
//return true if the current session is logged in
function is_logged_in()
{
   if (array_key_exists('is_logged_in', $_SESSION))
      return $_SESSION['is_logged_in'];
} 
```

我在 menu.php 和 login.php 中都有 session_start()，如果我没有，它会在尝试访问 $_SESSION 数组时给我各种其他错误。

我真的希望有人能发现我的错误。请帮忙！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:03:48.050

正式回答问题以结束。正如上面评论中提到的，在将会话设置为登录的一部分之前，我正在销毁会话。我仍然不确定为什么会产生这样的效果，因为两个 div 都是在销毁/重新创建之后加载的，但可能存在一些 ajax 竞争条件。

我很高兴它解决了，我可以继续前进。感谢大家的意见。

# sencha-touch - 如何在 sencha-touch 中定义内部字段

> ID：10135193
> 
> 赞同：0
> 
> 时间：2012-04-13T04:23:43.320
> 
> 标签：sencha-touch, sencha-touch-2

```
items: [
         {
          xtype: 'textareafield',
           label: 'references',
           items: [{
                    xtype:'textareafield',
                      }
                 ]
                   }] 
```

我想在 textarea 中创建一个 textarea 字段，但它只显示一个 textareafield 而没有显示内部 textareafield。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:31:17.337

`items`config 在这里不起作用，因为它不可用`Ext.field`，请尝试`component`config 代替，如下所示：

```
{
    xtype: 'textfield',
    component: {
      xtype: 'container', 
      layout: 'vbox', 
      items: [
      {
        xtype: 'textareainput', 
        flex: 3,
      }, 
      {
        xtype: 'textareafield',
        flex: 1, 
      }
      ]},
}, 
```

P/S：幕后，Sencha Touch 2 默认设置`component`config 为`{xtype: "textareainput"}`，所以通过这个方法，你可以插入任何你想要的东西，比如按钮等等。

# sql-server-2012 - SSAS - 多维数据集浏览器 - SQL Server 2012 RTM

> ID：10135208
> 
> 赞同：6
> 
> 时间：2012-04-13T04:25:25.850
> 
> 标签：sql-server-2012, ssas-2012

只是在玩 SQL Server 2012 并尝试浏览多维数据集；看不到“在此处放置行字段”/“在此处放置列字段”或“在此处放置过滤器字段”的选项。是这个错误还是有任何其他设置可以更改视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:40:47.993

如果他们决定采用基于 OWC 的浏览器，那么他们至少可以为我们提供具有更好（而不是更差）功能的东西。每次在开发过程中需要验证多维数据集数据时，单击 Excel 按钮是一件多么痛苦的事情……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:00:47.897

是的，您不再拥有该功能，但另一方面，您可以拖放字段并单击“设计按钮”，您可以获得生成的 MDX，这在 2008 年是不可能的。

我认为这是一个公平的交易:)

# javascript - jquery 问题 - 它不会相应地改变它

> ID：10135209
> 
> 赞同：0
> 
> 时间：2012-04-13T04:25:27.963
> 
> 标签：javascript, jquery, html

我的编码没有正确链接，它的意思是使用 jquery 来检测操作系统并相应地更改链接，但事实并非如此。在我的 HTML 页面中，我将它链接在标题中

```
<script src="jsquery.js" type="text/javascript"></script> 
```

现在加载我的jsquery

```
$(document).ready(function() {
if (navigator.appVersion.indexOf("Win") != -1) {
    // Computers runs windows
    $("a[href$='.pdf']").each(function() {
        this.href = this.href.replace("Volumes", "KP01DS0194TG");
    });
}
if (navigator.appVersion.indexOf("Mac") != -1) {
    // computer is a Mac
    $("a[href$='.pdf']").each(function() {
        this.href = this.href.replace("KP01DS0194TG", "Volumes");
    });
} 
```

});

然而在 Mac 上，它仍然尝试连接到 KP01DS0194TG 而不是卷 - 它没有改变它 - 我怎样才能让它识别操作系统并相应地改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:25:03.053

我相信您不正确地链接到 jquery。我认为应该是 jquery.js 而不是 jsquery.js。尝试将标题中的链接更改为：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script> 
```

# java - java - 如何在java swing中的Key Event中删除JTable中的选定行

> ID：10135210
> 
> 赞同：-1
> 
> 时间：2012-04-13T04:25:28.587
> 
> 标签：java, swing, jtable, listselectionlistener

我必须使用键事件删除 JTable 中的选定行。当我选择一行并按 Delete 键时，应删除选定的行值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:54:44.237

您必须获取选定的行（即光标当前所在的位置），然后对该行调用 removeRow。

我建议您阅读[JTable 的 API。](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JTable.html)

试试这个（我在我使用它的代码中使用了多行，但你应该能够将它分解为一个。另外，我不确定 Arrays.sort 是否真的有必要）

```
int [] toDelete = dataTable.getSelectedRows();
Arrays.sort(toDelete); // be shure to have them in ascending order.
MyTableModel myTableModel = (MyTableModel)dataTable.getModel();
for(int ii = toDelete.length -1; ii >=0; ii--) {
    myTableModel.removeRow(toDelete[ii]); // beginning at the largest.
} 
```

# iphone - UIView autoResizing 有时有效

> ID：10135212
> 
> 赞同：0
> 
> 时间：2012-04-13T04:26:11.653
> 
> 标签：iphone, objective-c, ios

目前，这就是正在发生的事情。如果我处于纵向模式，并且我展示了一个新的 modalViewController，然后旋转到横向，那么 autoResizing 可以完美地工作并且一切看起来都很棒。但是，如果我在风景中，并且我展示了一个新的 modalViewController，autoResizing 不起作用，一切看起来都很时髦。谁能想到为什么会发生这种情况的任何可能的想法？我绝望了，我什么都试过了。

也许解决这个问题的一种方法是弄清楚当我处于纵向和横向时系统调用了哪些代码。如果我的 modalView 以横向显示，也许我可以调用那个确切的代码。我试过 layoutIfNeeded 和 setNeedsDisplay 但他们什么也没做。我也尝试将 contentMode 设置为 redraw-没有帮助。

我的 viewDidLoad 中有这个用于模态视图

```
if(UIInterfaceOrientationIsLandscape(self.interfaceOrientation))
{
    NSLog(@"is landscape, width:%f", self.view.frame.size.width);
} 
```

这输出 320，即使我在风景中，它应该是 480。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:42:45.397

UIViewAutoResizingMasks 就是我们所说的“struts”和“springs”。考虑一下：你有一个大正方形，里面有一个小正方形。为了使该正方形完全居中，您必须从大正方形的每个内侧边缘设置一个固定宽度，以对其进行约束。这些是支柱。

另一方面，弹簧的工作方式更像 UIView 在旋转期间所做的工作。假设我们的视图必须保持在屏幕底部，居中对齐。我们想让它的顶部弹簧保持灵活，这样当视图从 460 像素旋转到 320 像素时，它相对于屏幕现在更改的尺寸保持相同的位置。

牢记这一点，当视图以纵向加载时（就像所有 UIViewController 一样），但实际方向是横向时，视图可能会变得“混乱”并保持一种混乱的混合方向类型视图。如果您绝对必须（我不能强调这是最后的手段），请事先强制更改方向，请使用 iOS 5.x 的 +attemptRotationToDeviceOrientarion

# android - 是否有任何理由从资源中预加载可绘制对象？

> ID：10135216
> 
> 赞同：9
> 
> 时间：2012-04-13T04:26:38.890
> 
> 标签：android, caching, drawable

Android 是否维护应用程序可绘制资源的内存缓存并重用它们，或者预加载可能动态分配给不同小部件的所有可绘制资源是一种好习惯？

例如：

```
public static final int[] SETS = {
        R.drawable.set0, R.drawable.set1, R.drawable.set2,
        R.drawable.set3, R.drawable.set4, R.drawable.set5, R.drawable.set6,
        R.drawable.set7, R.drawable.set8, R.drawable.set9, R.drawable.set10};
public Drawable[] sets;

void init() {
    load(sets, SETS);
}

public void load(Drawable[] d, int[] ids) {
    for (int i = 0; i < ids.length; i++) {
        if (ids[i] == 0)
            d[i] = null;
        else
            d[i] = context.getResources().getDrawable(ids[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T04:40:13.560

这听起来像是不必要的预优化。但是，android 确实会缓存可绘制对象，因此您不必预先加载它们。相关代码来自`ApplicationContext`

```
 /*package*/ Drawable loadDrawable(TypedValue value, int id)
            throws NotFoundException {
        .
        .
        .

        final long key = (((long) value.assetCookie) << 32) | value.data;
        Drawable dr = getCachedDrawable(key);

        if (dr != null) {
            return dr;
        }

        .
        .
        .

        if (dr != null) {
            dr.setChangingConfigurations(value.changingConfigurations);
            cs = dr.getConstantState();
            if (cs != null) {
                if (mPreloading) {
                    sPreloadedDrawables.put(key, cs);
                } else {
                    synchronized (mTmpValue) {
                        //Log.i(TAG, "Saving cached drawable @ #" +
                        //        Integer.toHexString(key.intValue())
                        //        + " in " + this + ": " + cs);
                        mDrawableCache.put(key, new WeakReference<Drawable.ConstantState>(cs));
                    }
                }
            }
        }

        return dr;
    }

    private Drawable getCachedDrawable(long key) {
        synchronized (mTmpValue) {
            WeakReference<Drawable.ConstantState> wr = mDrawableCache.get(key);
            if (wr != null) {   // we have the key
                Drawable.ConstantState entry = wr.get();
                if (entry != null) {
                    //Log.i(TAG, "Returning cached drawable @ #" +
                    //        Integer.toHexString(((Integer)key).intValue())
                    //        + " in " + this + ": " + entry);
                    return entry.newDrawable(this);
                }
                else {  // our entry has been purged
                    mDrawableCache.delete(key);
                }
            }
        }
        return null;
    } 
```

# php - Mercury 邮件和 php 电子邮件创建脚本

> ID：10135223
> 
> 赞同：0
> 
> 时间：2012-04-13T04:27:47.563
> 
> 标签：php, html, email, wamp

我需要帮助创建一个脚本或程序，以便在用户注册表格时将其添加到我的 Merge 邮件服务器。我使用的是基本的 php 发布表单，它确实创建了运行帐户所需的所有文件，但是当我打开水银邮件时，新用户帐户尚未添加到帐户列表中。并且新帐户无法登录。

请协助我创建客户电子邮件注册脚本或程序，以便我的客户可以轻松地在我的服务器上免费创建电子邮件。

表格代码链接：http: [//pastebin.com/bEtv4eck](http://pastebin.com/bEtv4eck)

链接到 php 邮政编码： http: [//pastebin.com/rwBJatap](http://pastebin.com/rwBJatap)

PS我有脚本可以创建新用户和所有内容，但除非重新启动电子邮件服务器，否则它不允许登录。有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:00:30.303

您还需要在`PMAIL.USR`文件中添加用户

尝试

```
const MERCURY_PATH = 'C:\Apache\xampp\MercuryMail';
$userFile = MERCURY_PATH . DIRECTORY_SEPARATOR . "PMAIL.USR";
$mailDir = MERCURY_PATH . DIRECTORY_SEPARATOR . "MAIL";

$newName = "Baba Konko";
$newUsername = "baba";
$newPassword = "pass";
$host = "localhost";

if (! is_writeable ( $userFile )) {
    die ( "You don't have permission to  Create new User" );
}

if (! is_writeable ( $mailDir )) {
    die ( "You don't have permission to add mail folder" );
}

// Check if user exist

if (is_file ( $userFile )) {
    $users = file ( $userFile );

    foreach ( $users as $user ) {
        list ( $status, $username, $name ) = explode ( ";", strtolower ( $user ) );

        if (strtolower ( $newUsername ) == $username) {
            die ( "User Already Exist" );
        }
    }
}

$userData = "U;$newUsername;$newName";
$fp = fopen ( $userFile, "a" );

if ($fp) {
    fwrite ( $fp, $userData . chr ( 10 ) );
    fclose ( $fp );
}

$folder = $mailDir . DIRECTORY_SEPARATOR . $newUsername;
if (! mkdir ( $folder )) {
    die ( "Error Creating Folder" );
}

$pm = '# Mercury/32 User Information File' . chr ( 10 );
$pm .= 'POP3_access: ' . $newPassword . chr ( 10 );
$pm .= 'APOP_secret: ' . $newPassword . chr ( 10 );

$pmFile = $folder . DIRECTORY_SEPARATOR . 'PASSWD.PM';
file_put_contents ( $pmFile, $pm ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T05:09:10.033

在对 pmail.usr 和 mail, 目录进行更改后尝试使用 RELOAD USERS。

# php - 获取满足 WHERE 条件的总行数

> ID：10135228
> 
> 赞同：0
> 
> 时间：2012-04-13T04:29:23.953
> 
> 标签：php, mysql

我正在制作一个搜索应用程序，我想弄清楚某个查询获取了多少结果，以便计算有多少页结果。我基本上有：

```
mysql_query("SELECT * FROM table WHERE conditions LIMIT $page*$items, $items"); 
```

我是否必须进行不带限制子句的查询才能获得总数，还是有更好的方法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T04:31:36.490

```
SELECT COUNT (*) FROM table WHERE conditions 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T04:31:44.073

```
SELECT COUNT(*)
  FROM table
  WHERE conditions 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T04:35:43.490

我看到你正在使用 PHP。一旦你运行了查询，你为什么不在[`mysql_num_rows`](http://php.net/manual/en/function.mysql-num-rows.php)PHP 中呢？这样您就不需要运行两个查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T04:36:20.027

```
$page_count=10 // no of rows per page 
$record=mysql_query("select count(*) from table where conditions");
$row=mysql_fetch_row[0];

$no_of_pages = ceil($row/$page_count); 
```

# javascript - Facebook 和 Twitter 中的个人资料链接共享

> ID：10135229
> 
> 赞同：0
> 
> 时间：2012-04-13T04:29:27.920
> 
> 标签：javascript, dom-events, facebook-javascript-sdk

我有以下 JavaScript 代码用于在 Facebook 和 Twitter 中共享链接......

```
<script type="text/javascript">
 function show_fb(id)
 {

 alert('http://www.facebook.com/sharer.php?u=
 http://devel.testingsite.biz/testxxxxx.php?cmd=profile&id='+id+'');

 u=location.href;
 t=document.title;window.open('http://www.facebook.com/sharer.php?u={https_server}testxxxxx.php?cmd=profile&id='+id+'','sharer','toolbar=0,status=0,width=626,height=436');
return false;
}
 </script> 
```

在 HTML 端，它显示如下：

```
 <li><a href="javascript:void(0)" onclick="show_fb({uid});" class="icon_h3"></a></li> 
```

功能正常，它显示了共享窗口，但我要共享的链接是没有 id 的链接

[http://devel.testingsite.biz/testxxxxx.php?cmd=profile](http://devel.testingsite.biz/testxxxxx.php?cmd=profile)

但是在警报功能中打印的相同链接显示了id（如下所示）。我需要生成以下链接。

[http://devel.testingsite.biz/testxxxxx.php?cmd=profile&id=645](http://devel.testingsite.biz/testxxxxx.php?cmd=profile&id=645)

我的功能有什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:34:59.403

你能试试这个吗？

```
 <script type="text/javascript">
 function show_fb(id)
 {

 alert("http://www.facebook.com/sharer.php?u=
 http://devel.testingsite.biz/testxxxxx.php?cmd=profile&id='+id+'");

 u=location.href;
 t=document.title;
window.open("http://www.facebook.com/sharer.php?u={https_server}testxxxxx.php?cmd=profile&id='+id+'','sharer','toolbar=0,status=0,width=626,height=436");
return false;
}
 </script> 
```

# android - 带有 sectionHeader 和索引的 Android 列表视图

> ID：10135230
> 
> 赞同：4
> 
> 时间：2012-04-13T04:29:33.110
> 
> 标签：android, android-layout, android-listview

![在此处输入图像描述](../Images/4bae18d98a4722d1040320a065719426.png)

像 Iphone 中的这个视图一样，我需要为 android 设计视图。列表视图包含部分索引和部分标题。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:34:06.430

尝试安装这个应用程序，我很确定应用程序中存在一个库项目。 [https://play.google.com/store/apps/details?id=com.groidify.uipatterns](https://play.google.com/store/apps/details?id=com.groidify.uipatterns)

只是在 Android 的情况下的建议可以通过使用 commonsware 和 sectionIndexer 的合并适配器来完成。

最接近和最流畅的是 [https://github.com/woozzu/indexableListView](https://github.com/woozzu/indexableListView)

# debugging - 如何在powerpc（e300核心）上使用iabr寄存器

> ID：10135239
> 
> 赞同：0
> 
> 时间：2012-04-13T04:31:24.933
> 
> 标签：debugging, assembly, breakpoints, powerpc

我想知道如何使用 iabr 寄存器来设置断点。该手册说了一些关于 isync 指令的内容，但这似乎不起作用。有人可以帮忙吗？

我正在使用的代码：

```
asm ("isync");
asm volatile ("mtspr 1010,%0;" : : "r"(val));
asm ("isync");
asm ("isync"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:18:35.913

[MPC604](http://www.freescale.com/files/32bit/doc/data_sheet/MPC604.pdf)给出提示：

> 当 IABR 中的地址（位 0 到 29）与完成单元中要完成的下一条指令匹配，并且 IABR 启用位（位 30）设置为 1 时，会发生指令地址断点异常。

如果你要中断的指令的地址是`addr`，你需要做`val = addr | 2`。我不知道第 31 位是做什么的。

# firefox - 在 Firefox、Greasemonkey 脚本中使用时，console.log 不起作用

> ID：10135241
> 
> 赞同：14
> 
> 时间：2012-04-13T04:31:26.813
> 
> 标签：firefox, greasemonkey, userscripts

我的用户脚本使用`console.log()`.

这在 Chrome 中运行良好，但是当我在 Firefox (Greasemonkey) 中安装此用户脚本时，Firefox 中的 Web 控制台没有显示任何内容。

我搜索了一个解决方案，并建议使用一些解决方案，`unsafeWindow`但它也没有显示任何输出。而且`unsafeWindow`不能用于镀铬。我什至安装了 Firebug，但没有用。我该如何解决这个问题？

例如，我在 Firefox 中尝试了这个用户脚本：

```
// ==UserScript==
// @name        console
// ==UserScript==
console.log("hello"); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T05:53:40.157

你的意思是它在通过 Greasemonkey 安装时不起作用，对吧？
不久前，[Greasemonkey 破坏了 console.log](https://groups.google.com/forum/#!topic/greasemonkey-users/SGVLuV3H1UM/discussion)（新！[错误报告](https://github.com/greasemonkey/greasemonkey/issues/1540)）。现在，要查看来自 Greasemonkey 的普通`console.log()`调用的结果，您需要查看*Firefox 的*错误控制台，而不是 Firebug 的。

您可以通过按以下方式查看 FF 的错误控制台：`Ctrl``Shift``J`。

**但是**，您可以`unsafeWindow.console.log()`在 Chrome 和 Greasemonkey 脚本中使用。Chrome 现在对`unsafeWindow`.

如果您使用`unsafeWindow`，则可以从 Greasemonkey访问[Firebug 的全部日志功能。](http://getfirebug.com/wiki/index.php/Console_API)（必须安装 Firebug，但它们可能仍然无法在 Chrome 用户脚本中运行；我已经有一段时间没有测试过这种方式了。）

* * *

在 Firefox 中，**如果 Firebug 未安装，或者该页面未激活**，则`unsafeWindow.console.log()`调用将显示到新的“Web 控制台”( `Ctrl``Shift``K`)。
您需要`unsafeWindow`在 Greasemonkey 脚本中使用 when 。

请注意，Firefox 当前支持`console.log()`、`console.info()`、`console.warn()`和`console.error()`本机 - 不需要 Firebug。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T04:24:15.300

等一下：如果问题是关于使用 Greasemonkey 登录控制台（我可以发誓我看到了标签[greasemonkey](/questions/tagged/greasemonkey "显示标记为“greasemonkey”的问题")），为什么不使用该`GM_log`方法？

```
// ==UserScript==
// @name          GM_log Example
// @namespace     http://www.example.com/
// ==/UserScript==

GM_log("This is an example of GM_log"); 
```

还是我错过了什么？

PS：你也可以`javascript.options.showInConsole`在 about:config 中查看。它应该是`true`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-28T16:08:29.673

我发现（使用 Chrome/Tampermonkey 进行测试）您需要：

`window.log("<message goes here>");`, not `unsafeWindow.console.log("<msg>");`, as`unsafeWindow`和`console`undefined。

试试看，因为我很确定这是你在更高版本的浏览器等中应该这样做的方式。

# c++ - 如何修复 C++ 错误：预期的 unqualified-id

> ID：10135244
> 
> 赞同：49
> 
> 时间：2012-04-13T04:31:37.873
> 
> 标签：c++

我在第 6 行收到此错误：

> ```
> error: expected unqualified-id before '{' token 
> ```

我说不出有什么问题。

```
#include <iostream>

using namespace std;

class WordGame;
{               // <== error is here on line 6
public:

    void setWord( string word )
    {
        theWord = word;
    }
    string getWord()
    {
        return theWord;
    }
    void displayWord()
    {
        cout << "Your word is " << getWord() << endl;
    }
private:
    string theWord;
}

int main()
{
    string aWord;
    WordGame theGame;
    cin >> aWord;
    theGame.setWord(aWord);
    theGame.displaymessage();

} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-13T04:34:03.680

这里不应该有分号：

```
class WordGame; 
```

...但是在您的类定义的末尾应该有一个：

```
...
private:
    string theWord;
}; // <-- Semicolon should be at the end of your class definition 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-13T04:48:04.903

作为旁注，请考虑将 setWord() 中的字符串作为 const 引用传递，以避免过度复制。此外，在 displayWord 中，考虑将其设为 const 函数以遵循 const 正确性。

```
void setWord(const std::string& word) {
  theWord = word;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-13T04:33:51.687

去掉后面的分号`WordGame`。

当班级规模小得多时，你真的应该发现这个问题。当您编写代码时，您应该在每次添加六行代码时进行编译。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-02T09:33:32.173

分号应该在类定义的末尾而不是名称之后：

```
class WordGame
{
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-01T01:57:57.683

对于它的价值，我遇到了同样的问题，但这不是因为多了一个**分号**，而是因为我在前面的语句中忘记了一个分号。

我的情况是这样的

```
mynamespace::MyObject otherObject

for (const auto& element: otherObject.myVector) {
  // execute arbitrary code on element
  //...
  //...
} 
```

从这段代码中，我的编译器不断告诉我：

`error: expected unqualified-id before for (const auto& element: otherObject.myVector) { etc...` 我的意思是我写错了for循环。没有！我只是`;`在声明后忘记了 a `otherObject`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-07T02:19:13.337

# php - 在结帐时安排付款方式

> ID：10135248
> 
> 赞同：1
> 
> 时间：2012-04-13T04:32:39.090
> 
> 标签：php, magento

我正在尝试在 magento 中编辑付款选项的布局

路径：- **/template/checkout/onepage/payment/methods.phtml

```
<dl class="sp-methods" id="checkout-payment-method-load">
<?php foreach ($this->getMethods() as $_method): $_code = $_method->getCode(); ?>
    <dt class="p_method">
    <?php if( sizeof($this->getMethods()) > 1 ): ?>
        <input id="p_method_<?php echo $_code ?>" value="<?php echo $_code ?>" type="radio" name="payment[method]" title="<?php echo $this->htmlEscape($_method->getTitle()) ?>" onclick="payment.switchMethod('<?php echo $_code ?>')"<?php if($this->getSelectedMethodCode()==$_code): ?> checked="checked"<?php endif; ?> class="radio" />
    <?php else: ?>
        <span class="no-display"><input id="p_method_<?php echo $_code ?>" value="<?php echo $_code ?>" type="radio" name="payment[method]" checked="checked" class="radio" /></span>
    <?php endif; ?>
        <label for="p_method_<?php echo $_code ?>"><?php echo $this->getMethodTitle($_method) ?> <?php echo $this->getMethodLabelAfterHtml($_method) ?></label>
    </dt>
    <?php if ($html = $this->getPaymentMethodFormHtml($_method)): ?>
    <dd>
        <?php echo $html; ?>
    </dd>
    <?php endif; ?>
<?php endforeach; ?>
</dl> 
```

我怎么能改变`getMethods()`数组的顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:06:42.423

您可以直接从管理员设置付款方式的顺序，其中每种付款方式都有一个您可以设置的订单字段

```
system > configuration > sales > payment methos 
```

# json - highcharts 正确的 json 输入

> ID：10135249
> 
> 赞同：0
> 
> 时间：2012-04-13T04:32:39.083
> 
> 标签：json, highcharts

更新：现在使用下面的代码，json 解析正确，

但是这些列在初始加载时不显示，如果我将光标放在我可以看到显示系列名称和值的工具提示。但是，如果我重新调整浏览器窗口的大小，则会出现列。我尝试添加 chart.redraw(); 在updatedChart()之后；但它没有帮助我的 div 如下

```
<div id="container" style="min-width: 400px ; height: 650; margin:0 auto"></div> 
```

请问有什么想法吗？此外，我无法在 jsfiddle 上重现此问题，并已在 safari、chrome 和 firefox 上对此进行了测试（都显示出这种奇怪的行为）

```
 var chart;
            options = {
                chart: {
                    renderTo: 'container',
                    type: 'column',
                },
                title: {
                    text: 'Some title'
                },
                subtitle: {
                    text: 'subtitle'
                },
                xAxis: {
                    categories: [],
                    title: {
                        text: null
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'y-Axis',
                        align: 'high'
                    }
                },
                tooltip: {
                    formatter: function() {
                        return '' + this.series.name + ': ' + this.y + ' ';
                    }
                },
                plotOptions: {
                    bar: {
                        dataLabels: {
                            enabled: true
                        }
                    }
                },
                legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'top',
                    x: -100,
                    y: 100,
                    floating: true,
                    borderWidth: 1,
                    backgroundColor: '#FFFFFF',
                    shadow: true
                },
                credits: {
                    enabled: false
                },
                series: 
                []
            };
            $(document).ready(function() {
                chart= new Highcharts.Chart(options)
                console.log("calling update chart");    
                updateChart();
            });

            function updateChart() {
                $.ajax({
                    type: "GET",
                    url: "test.json",
                    async: false,
                    dataType: "json",
                    success: function(data){
                        console.log(data);

                        var i=0;
                        $.each(data,function(index,item){
                            console.log(data.Chart1[index]);
                            console.log("i value is "+i);
                            chart.addSeries(data.Chart1[index]);
                            i++;
                        });

                    }
                });
            }
            } 
```

我的json输入文件在下面

```
 [
                        {
                            name: 'name1',
                            y: [32.6,16.6,1.5]
                        }, {
                            name: 'name2',
                            y: [6.7,0.2,0.6]
                        }, {
                            name: 'name3',
                            y: [1,3.7,0.7]
                        }, {
                            name: 'name4',
                            y: [20.3,8.8,9.5]
                        },{
                            name: 'name5',
                            y: [21.5,10,7.2]
                        }, {
                            name: 'name6',
                            y: [1.4,1.8,3.7]
                        }, {
                            name: 'name7',
                            y: [8.1,0,0]
                        }, {
                            name: 'name8',
                            y: [28.9,8.9,6.6]
                        }
                    ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T04:46:25.003

**编辑：**

```
var chart = null,
    options = {
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        title: {
            text: 'Some title'
        },
        subtitle: {
            text: 'subtitle'
        },
        xAxis: {
            categories: [],
            title: {
                text: null
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'y-Axis',
                align: 'high'
            }
        },
        tooltip: {
            formatter: function() {
                return '' + this.series.name + ': ' + this.y + ' ';
            }
        },
        plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -100,
            y: 100,
            floating: true,
            borderWidth: 1,
            backgroundColor: '#FFFFFF',
            shadow: true
        },
        credits: {
            enabled: false
        },
        series: []
    };
$(document).ready(function() {
    updateChart();
});

function updateChart() {
    $.getJSON('test.json', function(data) {

        // check if the chart's already rendered
        if (!chart) {
            // if it's not rendered you have to update your options
            options.series = data;
            chart = new Highcharts.Chart(options);
        } else {
            // if it's rendered you have to update dinamically
            jQuery.each(data, function(seriePos, serie) {
                chart.series[seriePos].setData(serie, false);
            });
            chart.redraw();
        }
    });
} 
```

**小提琴：** [链接](http://jsfiddle.net/ricardolohmann/64WW4/)

# javascript - 悬停时的Jquery单选按钮值

> ID：10135251
> 
> 赞同：0
> 
> 时间：2012-04-13T04:33:03.030
> 
> 标签：javascript, jquery, jquery-ui, javascript-events

我有 10 个来自 jquery 的单选按钮/按钮集。当然，每个按钮都有自己的值，当按钮悬停时，我想在按钮旁边显示值。

我该如何处理？

插图

> row1 ：radio1.1 radio1.2 radio1.3**在radio悬停时在此处打印值radio**
> 
> row2 ：radio2.1 radio2.2 radio2.3**在radio悬停时在此处打印值radio**
> 
> row3 ：radio3.1 radio3.2 radio3.3**在radio悬停时在此处打印值radio**

我已经使用`live function`jquery 来获取事件鼠标悬停，但是如何将值具体放置到特定行中？

我怎样才能得到哪个收音机被过度使用，所以我可以得到它的价值？

```
<!DOCTYPE html>
    <html>
    <head>
        <link href="jslib/jquery_theme/jquery.ui.all.css" rel="stylesheet" type="text/css"/>
      <script src="jslib/jquery-1.7.1.min.js"></script>
      <script src="jslib/jquery-ui-1.8.18.custom.min.js"></script>

      <script>
      $(document).ready(function() {
        $(".ter").buttonset();
      });

      $('.ter > label').live('mouseover mouseout', function(event) {
      if (event.type == 'mouseover') {
        document.getElementById('mydiv').innerHTML = "Hello World";
      //this is when radio is hovered, it should show radio value beside the rwadio
      } else {
         document.getElementById('mydiv').innerHTML = "out";
         //this is when mouse is out from radio
      }
});

$(function() {
    $("#radio :radio").change(function(e) {
       alert(
           "run ok"
       );
    });
});

  </script>

</head>
<body style="font-size:62.5%;">

<div id="radio">
    <form name='tes' method='post' action='a.php'>
    <?php for($I=0;$I<10;$I++){ 

        echo"
        <div class='ter' style='border:1px solid; width:400px; margin-bottom:5px;'>

    <input type='radio' id='radio1.$I' name='radio.$I' value='4' /><label for='radio1.$I'>  </label>
    <input type='radio' id='radio2.$I' name='radio.$I' checked='checked' value='3' /><label for='radio2.$I'> </label>
    <input type='radio' id='radio3.$I' name='radio.$I' value='2' /><label for='radio3.$I'> </label>
        <input type='radio' id='radio4.$I' name='radio.$I' value='1'/><label for='radio4.$I'> </label>
        <span id='mydiv'>aaaaaaaaaa</span> 
        </div>  ";
         } ?>
        <div class='ter'>
        <input type='submit' value ='submit'>
        </div>
    </form> 

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:31:28.440

你可以在没有 javascript 的情况下实现这个效果，只使用 HTML 和 CSS：

**HTML**

```
​&lt;form>
   <label><input type="radio" name="Test" value="Something"/></label>
   <label><input type="radio" name="Test" value="Something else"/></label>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS**

```
input:hover:after,
input:focus:after {
    content: attr(value);
    padding-left: 2em;
}​ 
```

这利用 CSS`content`属性来提取和显示它所应用的元素的值。您可能需要使用 CSS 来设置您想要的样式 - 我正在考虑相对于每一行的绝对定位。

这在旧版本的 IE 中不起作用。8+ 肯定会起作用 - 我不确定 7 及以下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:40:02.957

```
$('.ter > label').live('mouseover mouseout', function(event) {
  if (event.type == 'mouseover') {
    document.getElementById('mydiv').innerHTML = $("#"+$(this).attr("for")).val();
  //this is when radio is hovered, it should show radio value beside the rwadio
  } else {
     document.getElementById('mydiv').innerHTML = "";
     //this is when mouse is out from radio
  } 
```

这将放置对应于标签的单选值，现在您可以相应地定位 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T04:49:56.560

我从你的话中了解到，活动将在单选按钮上

```
$('input[type=radio]').live({
   mouseover:function(){
      var value = $(this).attr('value');
      $(this).next().html(value);
   },
   mouseout:function(){
      $(this).next().html("");
   }
}); 
```

当单选按钮悬停时，获取它的值并将其打印在标签中（下一个）。

# iphone - MapVIew 崩溃

> ID：10135253
> 
> 赞同：0
> 
> 时间：2012-04-13T04:33:29.143
> 
> 标签：iphone, ios, crash, mkmapview

我正在加载`MKMapView`一些引脚，这些引脚会根据地址坐标下降。一切正常，直到我保持地图视图打开一段时间（2 分钟）。然后它崩溃了，没有实际发生的事件。这可能是什么原因。

在我的 viewDidLoad 中，我编写了以下代码

```
 mapView = [[MKMapView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    mapView.delegate=self; 

    [self.view addSubview:mapView]; 

    addressbook = ABAddressBookCreate();
    for (i = 0; i<[groupContentArray count]; i++) {
         NSLog(@"group content array %@", groupContentArray);
        person = ABAddressBookGetPersonWithRecordID(addressbook,[[groupContentArray objectAtIndex:i] intValue]);
        NSLog(@"Person %@", person);
        ABMultiValueRef addressProperty = ABRecordCopyValue(person, kABPersonAddressProperty);
        NSArray *address = (NSArray *)ABMultiValueCopyArrayOfAllValues(addressProperty);
        NSLog(@"Address %@", address);
        for (NSDictionary *addressDict in address) 
        {
            addAnnotation = nil;
            firstName = (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty); 
            lastName = (NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty); 

            NSString *country = [addressDict objectForKey:@"Country"];
            NSString *streetName = [addressDict objectForKey:@"Street"];
            NSString *cityName = [addressDict objectForKey:@"City"];
            NSString *stateName = [addressDict objectForKey:@"State"];

            if (streetName == (id)[NSNull null] || streetName.length == 0 ) streetName = @"";
            if (stateName == (id)[NSNull null] || stateName.length == 0 ) stateName = @"";
            if (cityName == (id)[NSNull null] || cityName.length == 0 ) cityName = @"";
            if (country == (id)[NSNull null] || country.length == 0 ) country = @"";

            NSString *fullAddress = [streetName stringByAppendingFormat:@"/%@/%@/%@", cityName, stateName, country];
            mapCenter = [self getLocationFromAddressString:fullAddress];
            if(stateName != NULL || country != NULL || streetName != NULL || cityName != NULL){

                if ((mapCenter.latitude == 0) && (mapCenter.longitude == 0))
                {
                    //Alert View                    
                }
                else{

                if(addAnnotation == nil){
                    addAnnotation = [[[MyAddressAnnotation alloc] initWithCoordinate:mapCenter title:firstName SubTitle:lastName Recordid:[groupContentArray objectAtIndex:i] ]autorelease];

                    [mapView addAnnotation:addAnnotation];}
                else{
                    //     ALert View                 

                }
                }
            }
        }
        CFRelease(addressProperty);

    }
    [self zoomToFitMapAnnotations:mapView];

    [self.navigationItem setHidesBackButton:YES animated:YES];
    NSString *mapTitle = localizedString(@"MAP_TITLE");
    [self setTitle:mapTitle];
    [segmentedControl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:03:37.670

试试这个： - (void)viewDidLoad { [super viewDidLoad];

```
UIImageView *topBar = [[UIImageView alloc] initWithImage:[UIImage    imageNamed:@"header1.png"]];
topBar.frame = CGRectMake(0, 0, 320, 44);
[self.navigationController.navigationBar insertSubview:topBar atIndex:0];
[topBar release];

self.navigationController.navigationBarHidden=YES;

[mapView setMapType:MKMapTypeStandard];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];
[mapView setShowsUserLocation:YES];
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
region.center.latitude = [strLat doubleValue];
region.center.longitude = [strLong doubleValue];
region.span.longitudeDelta = 0.01f;
region.span.latitudeDelta = 0.01f;
[mapView setRegion:region animated:YES]; 

[mapView setDelegate:self];

mapAnonotationView *ann = [[mapAnonotationView alloc] init]; 
ann.title = name;
ann.subtitle = Address; 
ann.coordinate = region.center; 
[mapView addAnnotation:ann];
[ann release];
ann = nil; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:44:04.203

在 dealloc 方法中将 mapview 委托设置为 nil 解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T03:53:09.097

我的 iPhone4S 崩溃了，控制台显示了区域的 nan 值。在尝试了来自 SO 的大约 7 种不同的解决方案以及来自 Apple DTS 的各种建议后，我通过消除 regionThatFits 调用来解决它。我只是使用：

```
CLLocationDistance visibleDistance = 100000; // 100 kilometers
MKCoordinateRegion adjustedRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, visibleDistance, visibleDistance);

[_mapView setRegion:adjustedRegion animated:YES]; 
```

显然，该 regionThatFits 方法存在问题。

# ios - 关于应用程序的内存布局和一些变量的逻辑地址

> ID：10135256
> 
> 赞同：1
> 
> 时间：2012-04-13T04:33:53.887
> 
> 标签：ios, linux, macos, memory

[与应用程序的内存布局](https://stackoverflow.com/questions/3676477/memory-layout-of-application)有点相似。

相同的硬件，相同的操作系统和相同的编译器，我可以确定应用程序**的虚拟内存空间**中的内存布局完全相同吗？我可以确定，同一个变量的逻辑地址是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:36:22.297

[不。](http://en.wikipedia.org/wiki/Address_space_layout_randomization)

^(因为地址空间布局随机化)

# ios5 - iPhone iOS 5 SDK 在应用程序短信错误

> ID：10135258
> 
> 赞同：0
> 
> 时间：2012-04-13T04:33:59.933
> 
> 标签：ios5, mfmessagecomposeview

预先感谢每次我打电话创建应用内短信时都会收到以下错误...

应用程序试图在 target 上推送一个 nil 视图控制器。

这是我在 OS 4 SDK 中工作的代码...

```
MFMailComposeViewController *MailController;
MFMessageComposeViewController *SMScontroller;
NSError *error;
NSString *EmailMessage;
NSString *SubjectMessage;

-(IBAction)sendInAppSMS
{

    if([MFMessageComposeViewController canSendText])
    {
        SMScontroller = [[MFMessageComposeViewController alloc] init];
        SMScontroller.messageComposeDelegate = self;

        NSString *MessageString = @"Hello";

        SMScontroller.body = MessageString;

        SMScontroller.navigationBar.tintColor = [UIColor blackColor];

        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque];

        [self presentModalViewController:SMScontroller animated:YES];

        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque];
    }
    else{
        // alertView to tell user to setup a mail account. 
        NSString *message = [[NSString alloc] initWithFormat:@"To use this feature, you need to have an iPhone with SMS abilities."];
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"SMS Account Not Detected" message:message delegate:nil cancelButtonTitle:@"Understood" otherButtonTitles:nil];
        [alert show];
    }

}

- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
    switch (result) {
        case MessageComposeResultCancelled:
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"I Like It" message:@"User cancelled sending the SMS"
                                                           delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alert show];
        }
            break;
        case MessageComposeResultFailed:
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"I Like It" message:@"Error occured while sending the SMS"
                                                           delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alert show];
        }
            break;
        case MessageComposeResultSent:
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"I Like It" message:@"SMS sent successfully..!"
                                                           delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alert show];
        }
            break;
        default:
            break;
    }

    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:20:12.280

我相信如果您在模拟器中运行它，您会收到错误消息，因为它没有短信。我在模拟器中遇到同样的错误，但如果我连接到我的手机，它工作正常。

# java - Android ImageDownloader 类中可能存在的 BUG：sHardBitmapCache 应该是静态的吗？

> ID：10135261
> 
> 赞同：6
> 
> 时间：2012-04-13T04:34:03.730
> 
> 标签：java, android, performance, caching, dalvik

我一直在尝试尽可能多地学习 Android 开发，特别关注性能，因为今天 Play 商店中的许多应用程序都很缓慢。我发现/被引导到许多文章/视频。

关于图像缓存的一篇具体文章位于：[http ://android-developers.blogspot.com/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)

作者的代码位于：[http ://code.google.com/p/android-imagedownloader/source/browse/trunk/src/com/example/android/imagedownloader/ImageDownloader.java](http://code.google.com/p/android-imagedownloader/source/browse/trunk/src/com/example/android/imagedownloader/ImageDownloader.java)

谷歌似乎采用了一个版本并将其放入他们的示例类中：http: [//developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/ImageDownloader.html](http://developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/ImageDownloader.html)

总的来说，它是可靠的，除了我认为缓存中的一个缺陷。它使用软/硬缓存将内容放入/获取硬缓存，因为 Android 系统经常重置软缓存。

但是，查看代码时，人们开始怀疑硬缓存是否会在每次父类实例化时意外重置。

首先是软缓存：

```
 // Soft cache for bitmaps kicked out of hard cache
    private final static ConcurrentHashMap<String, SoftReference<Bitmap>> sSoftBitmapCache =
        new ConcurrentHashMap<String, SoftReference<Bitmap>>(HARD_CACHE_CAPACITY / 2); 
```

现在看一下硬缓存：

```
 // Hard cache, with a fixed maximum capacity and a life duration
    private final HashMap<String, Bitmap> sHardBitmapCache =
        new LinkedHashMap<String, Bitmap>(HARD_CACHE_CAPACITY / 2, 0.75f, true) {
        @Override
        protected boolean removeEldestEntry(LinkedHashMap.Entry<String, Bitmap> eldest) {
            if (size() > HARD_CACHE_CAPACITY) {
                // Entries push-out of hard reference cache are transferred to soft reference cache
                sSoftBitmapCache.put(eldest.getKey(), new SoftReference<Bitmap>(eldest.getValue()));
                return true;
            } else
                return false;
        }
    }; 
```

硬**缓存**不是**静态的，***而* 软缓存是静态的。因此，硬缓存实例和项目都会随着类实例的生命周期而被清除。

 **我认为这是真的原因是我注意到我的应用程序带有 ListView/ImageView，每次都在下载图像并且从不缓存它。这一切都是异步完成的，但仍然每次都上网。我通过在我的方法中添加一个访问网络并查看它何时/多久调用一次的语句来**验证**这一点。`Log.d()`

**添加 static 关键字解决了这个问题，我的应用程序性能更高。**

我不确定为什么会这样，因为我的适配器中只有一个 ImageDownloader 类的实例，如示例所示：

```
private final ImageDownloader imageDownloader = new ImageDownloader(); 
```

* * *

问题

说了这么多，还有人经历过吗？？？或者我是某种疯狂/错误的组合。我不是 Java/Android/JVM/Dalvik/WeakReference/SoftReference 专家，但似乎有些不对劲。我不知道为什么`sHardBitmapCache`不是静态的，但是当我进行更改时，我的应用程序停止访问网络这么多**（节省数据成本/电池消耗/性能改进）**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T23:56:49.357

你是对的，这是我的一个错字。

我已经修复了 android 源代码树中的代码。感谢您的反馈。**

# php - 接受使用 cURL 的 cookie？

> ID：10135269
> 
> 赞同：3
> 
> 时间：2012-04-13T04:35:53.443
> 
> 标签：php, cookies, curl, file-get-contents

我一直在尝试使用 cURL 获取网页的内容，但无法让 cURL 接受 cookie。例如，在 Target.com 上，当我 cURL 时，它仍然说我必须启用 cookie。

这是我的代码：

```
$url = "http://www.target.com/p/Acer-Gateway-15-6-Laptop-PC-NV57H77u-with-320GB-Hard-Drive-4GB-Memory-Black/-/A-13996190#?lnk=sc_qi_detailbutton";
$ch = curl_init();    // initialize curl handle
curl_setopt($ch, CURLOPT_URL,$url); // set url to post to
curl_setopt($ch, CURLOPT_FAILONERROR, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);// allow redirects
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable
curl_setopt($ch, CURLOPT_TIMEOUT, 10); // times out after 4s
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20100101 Firefox/11.0"); 
$cookie_file = "cookie1.txt";
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file);
$result = curl_exec($ch); // run the whole process
curl_close($ch); 
echo $result; 
```

我还缺少什么？顺便说一下，cookie1.txt 文件是 077 权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T14:36:18.223

077 是格式错误的权限设置，这意味着所有者（可能是 apache）没有访问权限。尝试将其设置为 644（所有者具有读/写权限），因为它只是一个文件。

# c - SUN RPC (ONC/RPC)：使用 C 中的 null 过程计算往返时间（或 ping）

> ID：10135270
> 
> 赞同：0
> 
> 时间：2012-04-13T04:36:01.947
> 
> 标签：c, rpc, sun, roundtrip, sunrpc

如何计算或估计客户端和服务器之间的 RTT（往返时间）？

解决此问题的教程或示例也可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:44:29.507

我在这里做什么：

```
#include <rpc/rpc.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/times.h>
#include <fcntl.h>
#include <time.h>

int main(int argc, char *argv[]) {

    enum clnt_stat status;
    CLIENT *handle;
    struct timeval t;
    clock_t rtime;
    struct tms dumm;
    int count = 100000;
    int i;
    time_t now;
    char stamp[27];
    int programm;
    int version;

    if (argc != 4) {
        printf("Usage: rpcping <host> <program> <version>\n");
        exit(1);
    }

    /*
     *   Create Client Handle
     */
    programm = atoi(argv[2]);
    version = atoi(argv[3]);
    handle = clnt_create(argv[1], programm, version, "tcp");
    if (handle == NULL) {
        printf("clnt failed\n");
        exit(1);
    }

    /*
     *   use 30 seconds timeout
     */
    t.tv_sec = 30;
    t.tv_usec = 0;

    while (1) {
        rtime = times(&dumm);
        for (i = 0; i < count; i++) {
            status = clnt_call(handle, 0, (xdrproc_t) xdr_void,
                NULL, (xdrproc_t) xdr_void, NULL, t);

            if (status == RPC_SUCCESS) { /* NOP */ }
        }
        now = time(NULL);
        ctime_r(&now, stamp);
        stamp[strlen(stamp) - 1] = '\0';
        fprintf(stdout, "[%s]: Speed:  %2.4fs.\n", stamp,
            count / ((double) (times(&dumm) - rtime) / (double) sysconf(_SC_CLK_TCK)));
        fflush(stdout);
    }

    clnt_destroy(handle);
} 
```

我也有一个多线程版本

[https://gist.github.com/2401404](https://gist.github.com/2401404)

蒂格兰

# iphone - 围绕另一个图像旋转图像？

> ID：10135271
> 
> 赞同：0
> 
> 时间：2012-04-13T04:36:03.833
> 
> 标签：iphone, objective-c, rotation, trigonometry

我目前正在为 iphone 开发一个游戏，其中有一个旋转的小行星（它是圆形的）和一个围绕该小行星圆周旋转的物体。我使用 x = center.x + radius*cosf（弧度度数）和 y = center.y + radius*sinf（弧度度数）计算了物体绕小行星的圆周旋转。我唯一的问题有这个：我应该在围绕圆圈旋转的对象中更改每帧“度”的值多少以保持图像旋转，使其看起来围绕圆圈移动但没有旋转太多，我该如何计算类似的东西那？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:44:27.597

决定每分钟要转多少转，然后将示例中的“弧度度数”替换为“转数/分钟 * 分钟 * 2pi”。您可以将“分钟”替换为任何时间测量值。

# iphone - 如何使用 NSTimer 加载更多（例如：50）jpg 图像以快速制作动画？（Ipad）

> ID：10135277
> 
> 赞同：0
> 
> 时间：2012-04-13T04:36:40.510
> 
> 标签：iphone, objective-c, ipad, uiimageview

这是我的 NSTimer 代码

```
 myTimer = [NSTimer scheduledTimerWithTimeInterval: 0.1 target: self
                                             selector: @selector(callRightRotation:) userInfo: nil repeats: YES];

-(void) callRightRotation:(NSTimer*)myTimer 
  {
       ImageView.tag =[ImageView tag]+1;

           if ([ImageView tag]==50) 
                ImageView.tag=1;

     [ImageView setImage:[UIImage imageNamed:[NSString stringWithFormat:@"kisok01%i.png",[ImageView tag]]]];

      if ([ImageView tag]==1 || [ImageView tag]==50 )
       {
             [myTimer invalidate];
              myTimer= nil;

        }

   } 
```

**在ipad**中加载图像非常有效，但几乎没有......这里我使用**“.jpg”**格式图像，一张图像至少 300kb ......

## 我的问题是

```
 1\. Is it possible loading very fast and smoothly ?
     2\. if its not possible is there any alternative solution? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:55:21.723

您可以为此使用 ASIHTTPRequest 而不是 timmer，因此您的图像将在后台顺利加载。您可以使用相同视图的其他控件。

# 导入“ASIHTTPRequest.h”

//在一个方法中

[self performSelectorInBackground:@selector(DownLoadImageInBackground:) withObject:imgUrlArr];

-(void) DownLoadImageInBackground:(NSArray *)imgUrlArr1

{

```
NSURL * url = [Image URL];

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setDelegate:self];
[request startAsynchronous]; 
```

}

-(void)requestFailed:(ASIHTTPRequest *)request

{

```
NSLog(@"URL Fail : %@",request.url);

NSError *error = [request error];

   // you can give here alert too.. 
```

}

-(void)requestFinished:(ASIHTTPRequest *)request

{

```
NSData *responseData = [request responseData];
UIImage *imgInBackground = [[UIImage alloc]
                     initWithData:responseData];
[imageView setImage: imgInBackground]; 
```

}

# java - Joda DateTime 格式化程序出错

> ID：10135278
> 
> 赞同：0
> 
> 时间：2012-04-13T04:36:43.980
> 
> 标签：java, jodatime

我有一个类 DurationFormatter 如下：

```
import java.util.Date;
import org.joda.time.DateTime;
import org.joda.time.Period;
import org.joda.time.format.PeriodFormatter;
import org.joda.time.format.PeriodFormatterBuilder;

public class DurationFormatter {

  private final static PeriodFormatter DURATION_FORMATTER =
    new PeriodFormatterBuilder().appendYears()
                                .appendSuffix("year", "years")
                                .appendSeparator(" ")
                                .appendMonths()
                                .appendSuffix("month", "months")
                                .appendSeparator(" ")
                                .appendDays()
                                .appendSuffix("day", "days")
                                .appendSeparator(" ")
                                .appendHours()
                                .appendSuffix("hour", "hours")
                                .appendSeparator(" ")
                                .appendMinutes()
                                .appendSuffix("minute", "minutes")
                                .appendSeparator(" ")
                                .appendSeconds()
                                .appendSuffix("second", "seconds")
                                .toFormatter();

  public static String format(Date start) {
    StringBuffer result = new StringBuffer();
    DURATION_FORMATTER.printTo(result,
                               new Period(new DateTime(start), new DateTime()));
    return result.toString();
  }

  public static String format(Date start, Date end) {
    StringBuffer result = new StringBuffer();
    DURATION_FORMATTER.printTo(result,
                               new Period(new DateTime(start),
                                          end == null
                                          ? new DateTime()
                                          : new DateTime(end)));
    return result.toString();
  }

} 
```

这是我的单元测试：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import junit.framework.Assert;

import org.joda.time.DateTime;
import org.joda.time.Period;
import org.junit.Test;

public class DurationFormatterTest {

    @Test
    public void testFormatDate() throws ParseException {

        int years = 0;
        int months = 0;
        int weeks = 0;
        int days = 0;
        int hours = 0;
        int minutes = 0;
        int seconds = 0;
        SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
        String dateString = "07/27/2010 12:07:34";
        Date startDate = (Date) df.parse( dateString );

        // Find duration 1
        String duration1 = DurationFormatter.format(startDate);

        // Parse duration 1 and set values into new Period
        String[] tokens = duration1.split("[ ]");
        for( int index = 0; index < tokens.length; index++ ) {
            String token = tokens[index];
            if( token.contains("years") ) {
                years = Integer.valueOf(token.replace("years", ""));
                System.out.println("Years are: " + years);
            }
            else if( token.contains("months") ) {
                months = Integer.valueOf(token.replace("months", ""));
                System.out.println("Months are: " + months);
            }
            else if( token.contains("days") ) {
                days = Integer.valueOf(token.replace("days", ""));
                System.out.println("Days are: " + days);
            }
            else if( token.contains("hours") ) {
                hours = Integer.valueOf(token.replace("hours", ""));
            }
            else if( token.contains("minutes") ) {
                minutes = Integer.valueOf(token.replace("minutes", ""));
            }
            else if( token.contains("seconds") ) {
                seconds = Integer.valueOf(token.replace("seconds", ""));
            }
        }

        Period period = new Period( years,  months,  weeks,  days,  hours,  minutes,  seconds, 0);

        // User period to initialize new endDate
        DateTime endDate = new DateTime(startDate).plus(period);

        // Find duration 2 using new endDate
        String duration2 = DurationFormatter.format(startDate, endDate.toDate());

        // If the durations are the same, then success.
        Assert.assertEquals(
                "The date of " + duration2
                + " is equal to " + duration1,
                duration1, duration2);
    }
} 
```

结果总是输出错误：

junit.framework.ComparisonFailure：5 天 23 小时 5 分 23 秒的日期等于 1 个月 5 天 23 小时 5 分 23 秒预期：<[1 月 ]5 天 23 小时 5 分钟...> 但为：<[]5 天 23 小时 5 分钟...>

字符串 '[1month ]' 总是丢失。请检查我是否在代码中遗漏了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:53:25.147

在您的代码中，您有`.appendSuffix("month", "months")`where`"month"`是单数形式，`"months"`是复数形式。

您的测试仅解析复数形式：

```
else if( token.contains("months") ) {
    ...
} 
```

在这种情况下，测试失败，因为它只有 1 个月，因此是单数。

更新您的测试代码以解析单数和复数形式，它应该可以工作！

[文档](http://joda-time.sourceforge.net/api-release/org/joda/time/format/PeriodFormatterBuilder.html#appendSuffix%28java.lang.String,%20java.lang.String%29)

# android - 从单个活动打开多个 web 视图

> ID：10135279
> 
> 赞同：0
> 
> 时间：2012-04-13T04:36:54.750
> 
> 标签：android

我们有一个要求，我们希望从同一个应用程序中打开多个 webview 实例。

例如，Android app1 应该在第一个 webview 实例中打开 page1.html，在第二个 webview 实例中打开 page2.html。当 page2.html 启动时 page1.html webview 应该进入后台。

这在Android中可能吗？是的，您能否提供示例代码或链接，详细说明如何实现此要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:36:43.183

```
public void callwebtwo(){
            loadweb = (WebView) findViewById(R.id.loadweb);
            loadweb2 = (WebView) findViewById(R.id.loadweb2);
            loadweb2.getSettings().setJavaScriptEnabled(true);
            loadweb.getSettings().setJavaScriptEnabled(true);
            loadweb2.loadUrl("http://www.google.co.in/");
            loadweb.setWebViewClient(new WebViewClient() {
                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    Log.i("shouldOverrideUrlLoading", url.toString());
                    return super.shouldOverrideUrlLoading(view, url);
                }

                @Override
                public void onPageFinished(WebView view, String url) {
                    Log.i("onPageFinished", url.toString());
                    super.onPageFinished(view, url);
                }

                @Override
                public void onPageStarted(WebView view, String url, Bitmap favicon) {
                    Log.i("onPageStarted", url.toString());
                    super.onPageStarted(view, url, favicon);
                }

                }

            });
            loadweb2.setWebViewClient(new WebViewClient() {
                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    Log.i("shouldOverrideUrlLoading", url.toString());
                    return super.shouldOverrideUrlLoading(view, url);
                }

                @Override
                public void onPageFinished(WebView view, String url) {
                    Log.i("onPageFinished", url.toString());
                    super.onPageFinished(view, url);
                }

                @Override
                public void onPageStarted(WebView view, String url, Bitmap favicon) {
                    Log.i("onPageStarted", url.toString());
                    super.onPageStarted(view, url, favicon);
                }

            });

} 
```

这两个网络的实例是不同的，所以它会单独工作和执行。我知道无论我理解你的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:50:57.320

是的，你可以在安卓中做到这一点。

为两者创建单独的活动，当您在第二个 webview 实例中加载 page2 时，显然 page1 webview 实例将在第二个后面，当您从 page2 按下时，page1 将在前面。

# php - 会话重新生成 ID 超过最大执行时间？

> ID：10135282
> 
> 赞同：0
> 
> 时间：2012-04-13T04:37:22.140
> 
> 标签：php, session, fatal-error

出于某种原因，有时在共享服务器上运行时，我的 PHP 代码会出现以下致命错误：

> 致命错误：第 8 行 C:\HostingSpaces[username][subdomain]\wwwroot\index.php 中的最大执行时间超过 30 秒

那行就是：

```
session_regenerate_id(); 
```

这个问题可能来自托管在共享服务器上的代码并且资源不可用？或者这个问题还有其他原因吗？

由于它是共享服务器，我无法更改任何 PHP 设置。

**编辑：**

第 8 行之前的唯一一行是模型对象的几`require_once`行。唯一的另一行是`session_start()`.

我检查了我的 PHP 设置，它指出 session.save_handler 是本地和主值的文件。由于它正在使用文件，因此问题可能是尝试从磁盘读取和写入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:29:09.453

我认为您的问题可能是您所怀疑的性能和资源问题，但我觉得奇怪的是它只在第 8 行停止。我猜如果其余代码非常少，那么机会可能会很高。

您是否尝试过更改代码以使超时发生在不同的行上？例如，您可以尝试添加`sleep(25);`并查看致命超时是否发生在该行上。

另外，您确定不能设置最大执行时间限制吗？我怀疑即使您无法更改共享的 php.ini，您也可以`max_execution_time`通过以下其他选项之一进行设置：

*   [在.htaccess 文件](http://php.net/manual/en/configuration.changes.php)中设置`php_value max_execution_time`指令
*   [`set_time_limit`](http://php.net/manual/en/function.set-time-limit.php)在您的代码中使用
*   在您的代码中使用[`ini_set`和`max_execution_time`](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)

我相信 for 的值/参数以`max_execution_time`秒为单位，如果将其设置为 0（零），则将不使用执行时间限制。（您是否认为使用零安全取决于您。）

# haskell - 如何加速（或记忆）一系列相互递归的函数

> ID：10135287
> 
> 赞同：6
> 
> 时间：2012-04-13T04:37:53.487
> 
> 标签：haskell, memoization, mutual-recursion

我有一个程序，它产生一系列函数`f`，`g`如下所示：

```
step (f,g) = (newF f g, newG f g)

newF f g x = r (f x) (g x)
newG f g x = s (f x) (g x)

foo = iterate step (f0,g0) 
```

`f x`其中 r 和 s 是和的一些无趣的函数`g x`。我天真地希望拥有`foo`一个列表意味着当我调用第 n个时，如果它已经计算过它，它将不会重新计算第 (n-1) 个（如果不是函数就会发生这种情况`f`）。有没有办法在不将整个程序分开的情况下记住这一点（例如，评估所有相关参数，然后向上工作）？`f``f``g``f0``g0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:20:50.223

您可能会发现[Data.MemoCombinators](http://hackage.haskell.org/packages/archive/data-memocombinators/0.4.3/doc/html/Data-MemoCombinators.html)很有用（在 data-memocombinators 包中）。

你没有说你`f`和`g`采取什么参数类型——如果它们都采用整数值，那么你会像这样使用它：

```
import qualified Data.MemoCombinators as Memo

foo = iterate step (Memo.integral f0, Memo.integral g0) 
```

如果需要，您也可以记住每个步骤的输出

```
step (f,g) = (Memo.integral (newF f g), Memo.integral (newG f g)) 
```

我希望你不要把这看作是把整个程序撕成碎片。

* * *

回复您的评论：

这是我能想到的最好的。它未经测试，但应该沿着正确的路线工作。

我担心在 and 之间进行转换`Double`是`Rational`不必要的低效 --- 如果有一个我们可以使用的`Bits`实例。因此，这最终可能对您没有任何实际用途。`Double``Memo.bits`

```
import Control.Arrow ((&&&))
import Data.Ratio (numerator, denominator, (%))

memoV :: Memo.Memo a -> Memo.Memo (V a)
memoV m f = \(V x y z) -> table x y z
  where g x y z = f (V x y z)
        table = Memo.memo3 m m m g

memoRealFrac :: RealFrac a => Memo.Memo a
memoRealFrac f = Memo.wrap (fromRational . uncurry (%))
                           ((numerator &&& denominator) . toRational)
                           Memo.integral 
```

* * *

一种不同的方法。

你有

```
step :: (V Double -> V Double, V Double -> V Double)
     -> (V Double -> V Double, V Double -> V Double) 
```

你把它改成

```
step :: (V Double -> (V Double, V Double))
     -> (V Double -> (V Double, V Double))
step h x = (r fx gx, s fx gx)
  where (fx, gx) = h x 
```

也改变

```
foo = (fst . bar, snd . bar)
  where bar = iterate step (f0 &&& g0) 
```

希望共享`fx`并且`gx`应该会导致一些加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:03:10.493

> 有没有办法在不将整个程序分开的情况下记住这一点（例如，在所有相关参数上评估 f0 和 g0 然后向上工作）？

`fooX`这可能是您所说的“将整个程序分开”的意思，但这是一个可以共享的解决方案（我相信但无法测试 ATM） 。

```
nthFooOnX :: Integer -> Int -> (Integer, Integer)
nthFooOnX x = 
    let fooX = iterate step' (f0 x, g0 x)
     in \n-> fooX !! n

step' (fx,gx) = (r fx gx, s fx gx)

-- testing definitions:
r = (+)
s = (*)
f0 = (+1)
g0 = (+1) 
```

我不知道这是否保留了您最初实施的精神。

# asp.net - 是否可以有一个带有仅基于绑定到它的 GridView 的参数的 SQLDataSource？

> ID：10135289
> 
> 赞同：0
> 
> 时间：2012-04-13T04:38:20.393
> 
> 标签：asp.net, data-binding, gridview, sqldatasource

我有一个场景，我想在同一页面上放置四个相同的 Gridview。（它们将位于 Ajax TabControl 的不同选项卡上。）它们显示相同的源数据，但在一个公共基础表中有四组对应的源数据。所以我想在选项卡 1 上显示第 1 组，在选项卡 2 上显示第 2 组等。这些 Gridview 包含复杂的控件，因此我更愿意为所有这些控件使用相同的数据源以避免不必要的重复。插入和更新命令完全相同。

所以理论上我可以构建 Select 命令，这样我可以基于绑定到 SQLDataSource 的 GridView 过滤数据。问题是，如果我对所有 Gridview 使用相同的 SQLDataSource，我无法找到让每个 GridView 告诉 SQLDataSource 是哪个调用它的方法。我在想这可能是不可能的，因为 SQLDataSource 在它知道绑定到它之前先绑定，但我不确定。谁能想到一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:45:45.347

您可以使用 SQLDataSource 的 OnSelecting 事件动态更改参数值。这可以在服务器端代码中完成。

创建一个包含当前 gridview 唯一键的属性，这会导致 SQLDataSource 从 SQL 数据库中获取数据。

在 gridview 的 DataBinding 事件上分配此属性唯一的 gridview 键。

基于此属性更改 SQLDataSource 的 OnSelecting 事件中的参数。

如果我遗漏了什么，请告诉我。

# c# - 在实例中获取像素颜色

> ID：10135290
> 
> 赞同：3
> 
> 时间：2012-04-13T04:38:20.993
> 
> 标签：c#, .net, graphics, pixel

我正在搜索这个网站上的帖子，我遇到了这个问题： [如何使用 c# 获取 X、Y 像素的颜色？](https://stackoverflow.com/questions/753132/how-do-i-get-the-colour-of-a-pixel-at-x-y-using-c)

这种方法对于尝试获取表单内像素的颜色是否仍然有效？

如果不是，那将是一种在二维颜色值数组中“映射”表单的方法？

例如，我有一个 Tron 游戏，我想检查下一个 lightbike 的位置是否已经包含另一个 lightbike。

谢谢，伊恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:46:53.183

```
using System;
using System.Drawing;
using System.Runtime.InteropServices;

sealed class Win32
{
    [DllImport("user32.dll")]
    static extern IntPtr GetDC(IntPtr hwnd);

    [DllImport("user32.dll")]
    static extern Int32 ReleaseDC(IntPtr hwnd, IntPtr hdc);

    [DllImport("gdi32.dll")]
    static extern uint GetPixel(IntPtr hdc, int nXPos, int nYPos);

    static public System.Drawing.Color GetPixelColor(int x, int y)
    {
       IntPtr hdc = GetDC(IntPtr.Zero);
       uint pixel = GetPixel(hdc, x, y);
       ReleaseDC(IntPtr.Zero, hdc);
       Color color = Color.FromArgb((int)(pixel & 0x000000FF),
                    (int)(pixel & 0x0000FF00) >> 8,
                    (int)(pixel & 0x00FF0000) >> 16);
       return color;
    }
} 
```

使用它，您可以执行以下操作：

```
public static class ControlExts
{
    public static Color GetPixelColor(this Control c, int x, int y)
    {
        var screenCoords = c.PointToScreen(new Point(x, y));
        return Win32.GetPixelColor(screenCoords.X, screenCoords.Y);
    }
} 
```

因此，在您的情况下，您可以执行以下操作：

```
var desiredColor = myForm.GetPixelColor(10,10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:42:06.933

您可以使用 GetPixel 方法获取颜色。

例如

// 从图像文件创建位图对象。位图 myBitmap = new Bitmap("Grapes.jpg");

// 获取 myBitmap 中像素的颜色。颜色 pixelColor = myBitmap.GetPixel(50, 50);

这可能是针对不同情况的另一种方法，详情[请点击此处](https://stackoverflow.com/questions/753132/how-do-i-get-the-colour-of-a-pixel-at-x-y-using-c)

```
 using System;
  using System.Drawing;
  using System.Runtime.InteropServices;

 sealed class Win32
  {
      [DllImport("user32.dll")]
      static extern IntPtr GetDC(IntPtr hwnd);

      [DllImport("user32.dll")]
      static extern Int32 ReleaseDC(IntPtr hwnd, IntPtr hdc);

      [DllImport("gdi32.dll")]
      static extern uint GetPixel(IntPtr hdc, int nXPos, int nYPos);

      static public System.Drawing.Color GetPixelColor(int x, int y)
      {
       IntPtr hdc = GetDC(IntPtr.Zero);
       uint pixel = GetPixel(hdc, x, y);
       ReleaseDC(IntPtr.Zero, hdc);
       Color color = Color.FromArgb((int)(pixel & 0x000000FF),
                    (int)(pixel & 0x0000FF00) >> 8,
                    (int)(pixel & 0x00FF0000) >> 16);
       return color;
      }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T04:45:50.990

您可以使用您引用的问题中的方法从表单中获取像素的颜色，您只需要首先确定像素是否在表单的范围内，并且您需要从您的表单到屏幕的坐标，反之亦然。

编辑：经过一番思考，如果有人在您的表单顶部打开另一个窗口，这将是不好的！我认为最好找出一种不同的方法......

# php - 更新查询在数组中不起作用

> ID：10135291
> 
> 赞同：-3
> 
> 时间：2012-04-13T04:38:46.193
> 
> 标签：php, mysql, sql

这是我的代码：

我想`total_values`使用数组更新字段。我只是从表中获取数据然后我想更新同一个表的字段

```
// select query to get the value
    for($j=0;$j<count($capacity);$j++)
   {  
     $capaci=$capacity[$j];
    // select query to get the value
     $sql2=mysql_query("SELECT recieved-allocate*plate_quantity as ans from total_values where capacity='$capaci'"); 
     while($fetch=mysql_fetch_array($sql2)) 
     {
      $recieves=$fetch['ans'];
      $sql3="update total_values set recieved='$recieves' where capacity='$capaci' and month='$mon'";
      mysql_query($sql3);
     }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:47:29.800

如果我明白这是你想要做的：

```
for($j=0;$j<count($capacity);$j++)
       {  
         $capaci=$capacity[$j];
        // select query to get the value
         $sql2=mysql_query("SELECT recieved-allocate*plate_quantity as ans from total_values where capacity='$capaci'"); 
         while($fetch=mysql_fetch_array($sql2)) 
         {
          $recieves=$fetch['ans'];
          $sql3="update total_values set recieved='$recieves' where capacity='$capaci' and month='$mon'";
          mysql_query(sql3);
         }
        } 
```

并且正如idstam在评论中所说，学会使用PDO来防止SQL注入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:59:03.433

确保 MySQL 表中的`recieved`、`allocate`和`plate_quantity`字段都是数字类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T04:58:12.870

您的 SQL 非常混乱，但从功能上讲，问题可能只是您需要`mysql_query($sql3)`在定义`$sql3`. 此外，您可能希望`echo`在 set 之前删除该语句`$sql3`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T05:25:39.563

如果你没有得到你期望的数学结果，也许你的算术运算符序列中有一个简单的错误......？

`$sql2=mysql_query`在以...开头的代码行中

你目前在说：

```
SELECT recieved-allocate*plate_quantity as ans... 
```

...但也许您的意思是说以下内容？

```
SELECT (recieved-allocate)*plate_quantity as ans... 
```

或 [编辑：这是第三种选择：]

```
SELECT recieved-(allocate*plate_quantity) as ans... 
```

当然，这些陈述会产生不同的数学结果。

这是问题/解决方案吗？

# build - 从 Atlassian Jira 触发 hudson/cloudbees 构建？

> ID：10135294
> 
> 赞同：2
> 
> 时间：2012-04-13T04:38:59.050
> 
> 标签：build, hudson, jira, build-server, cloudbees

我正在寻找允许某些 Jira 项目的任何用户启动（触发）某些 Hudson 构建的可能性。是否可以不创建自己的 Jira 插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:23:50.660

我本来希望[Marvelution JIRA Hudson Integration可以使用此功能，它提供的功能与](https://plugins.atlassian.com/plugins/com.marvelution.jira.plugins.hudson)[JIRA Bamboo 插件](https://plugins.atlassian.com/plugins/com.atlassian.jira.plugin.ext.bamboo)提供的功能非常相似（例如构建状态报告） - 但令人惊讶的是，您希望触发构建似乎不可用在任何一个中，尽管确实有一个明显的功能（*JIRA Bamboo 插件*至少有相关/部分支持，请参阅[在发布版本时运行 Bamboo 构建](http://confluence.atlassian.com/display/JIRA/Running+a+Bamboo+Build+when+Releasing+a+Version)）。

因此，您可能希望首先提交*Marvelution JIRA Hudson 集成*[的功能请求](http://issues.marvelution.com/browse/MARVJIRAHUDSON)，而不是立即从头开始开发您自己的功能，也许会考虑这样做。

 *请注意，此插件尚不支持 JIRA 5.0，但相应的[5.0.0 版本](http://issues.marvelution.com/browse/MARVJIRAHUDSON/fixforversion/10990)计划于 2012 年 5 月 24 日发布。*

# recursion - 递归函数分析

> ID：10135296
> 
> 赞同：0
> 
> 时间：2012-04-13T04:39:03.353
> 
> 标签：recursion, recurrence

我正在尝试分析我编写的递归程序的性能。

基本代码是

```
Cost(x)
{
1 + MIN(Cost(x-1), Cost(x-2), Cost(x-3))
} 
```

我想为对 Cost() 的调用次数写一个递归关系。我该如何开始呢？

类似的东西`T(x) = T(x/2)`。但我不认为这是正确的

编辑：对于对 Cost() 的 3 个递归调用，我可以将其表示为分支因子为 3 的树。那么它会更准确`T(x) = T(x/3)`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:44:17.260

你真的写了一个递归解决方案吗？（我希望它是一个与线性迭代进行比较的任务）

我想

```
T(X) = T(X-1)+T(X-2)+T(X-3)+C
C is small constant 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:00:10.723

对 Cost() 的调用次数为：

```
C(x) = 1 + C(x-1) + C(x-2) + C(x-3) 
```

因此，对于输入`x`， Cost() 被调用一次加上它被调用的次数`x-1`、`x-2`和`x-3`。这是假设您的解决方案不使用记忆。递归关系并不漂亮：[http ://www.wolframalpha.com/input/?i=T(x)+%3D+1+%2B+T(x-1)+%2B+T(x-2 )+%2B+T(x-3)](http://www.wolframalpha.com/input/?i=T%28x%29%20=%201%20%2b%20T%28x-1%29%20%2b%20T%28x-2%29%20%2b%20T%28x-3%29)

然而，使用 memoization，你的“调用次数”变成了`C(x) = x`因为你只需要在and之间进行`C(i)`一次评估。（可能是，取决于您的初始条件）`i``0``x``C(x) = x + 1`

# jquery - Jquery 幻灯片放映不能处理超过 15 个图像

> ID：10135300
> 
> 赞同：0
> 
> 时间：2012-04-13T04:39:31.093
> 
> 标签：jquery, jquery-plugins

嗨，我刚在 jquery 中醒来。我在 jquery 中遇到问题。当我放置超过 15 张图像时，它在 15 张图像之后显示为空白。

这是我的代码。

.html

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <!--  <link href="css/default.css" rel="stylesheet" type="text/css" media="screen,projection" />-->
    <link href="css/jquery.ennui.contentslider.css" rel="stylesheet" type="text/css"
        media="screen,projection" />
    <title></title>
</head>
<body>
    <div id="one" class="contentslider">
        <div class="cs_wrapper">
            <div class="cs_slider">
                <div class="cs_article">
                    <img src="images/11.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/12.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/13.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/14.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/15.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/11.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/12.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/13.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/14.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/15.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/11.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/12.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/13.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/14.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/15.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/11.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/12.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/13.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/14.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/15.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/16.jpg" alt="Artist's interpretation of article headline" />
                </div>
                <div class="cs_article">
                    <img src="images/17.jpg" alt="Artist's interpretation of article headline" />
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="js/jquery.min.js"></script>

    <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>

    <script type="text/javascript" src="js/jquery.ennui.contentslider.js"></script>

    <script type="text/javascript">
        $(function () {
            $('#one').ContentSlider({
                width: '700px',
                height: '530px',
                speed: 500,
                easing: 'easeInOutBack'
            });
        });
    </script>

</body>
</html> 
```

.js 文件

```
(function($) {
  $.fn.ContentSlider = function(options)
  {
    var defaults = {
      leftBtn : 'images/cs_leftImg.png',
      rightBtn : 'images/cs_rightImg.png',
      width : '700px',
      height : '530px',
      speed : 400,
      easing : 'easeOutQuad',
      textResize : false,
      IE_h2 : '26px',
      IE_p : '11px'
    }
    var defaultWidth = defaults.width;
    var o = $.extend(defaults, options);
    var w = parseInt(o.width);
    var n = this.children('.cs_wrapper').children('.cs_slider').children('.cs_article').length;
    var x = -1*w*n+w; // Minimum left value
    var p = parseInt(o.width)/parseInt(defaultWidth);
    var thisInstance = this.attr('id');
    var inuse = false; // Prevents colliding animations

    function moveSlider(d, b)
    {
      var l = parseInt(b.siblings('.cs_wrapper').children('.cs_slider').css('left'));
      if(isNaN(l)) {
        var l = 0;
      }
      var m = (d=='left') ? l-w : l+w;
      if(m<=0&&m>=x) {
        b
          .siblings('.cs_wrapper')
            .children('.cs_slider')
              .animate({ 'left':m+'px' }, o.speed, o.easing, function() {
                inuse=false;
              });

        if(b.attr('class')=='cs_leftBtn') {
          var thisBtn = $('#'+thisInstance+' .cs_leftBtn');
          var otherBtn = $('#'+thisInstance+' .cs_rightBtn');
        } else {
          var thisBtn = $('#'+thisInstance+' .cs_rightBtn');
          var otherBtn = $('#'+thisInstance+' .cs_leftBtn');
        }
        if(m==0||m==x) {
          thisBtn.animate({ 'opacity':'0' }, o.speed, o.easing, function() { thisBtn.hide(); });
        }
        if(otherBtn.css('opacity')=='0') {
          otherBtn.show().animate({ 'opacity':'1' }, { duration:o.speed, easing:o.easing });
        }
      }
    }

    function vCenterBtns(b)
    {
      // Safari and IE don't seem to like the CSS used to vertically center
      // the buttons, so we'll force it with this function
      var mid = parseInt(o.height)/2;
      b
        .find('.cs_leftBtn img').css({ 'top':mid+'px', 'padding':0 }).end()
        .find('.cs_rightBtn img').css({ 'top':mid+'px', 'padding':0 });
    }

    return this.each(function() {
      $(this)
        // Set the width and height of the div to the defined size
        .css({
          width:o.width,
          height:o.height
        })
        // Add the buttons to move left and right
        .prepend('<a href="#" class="cs_leftBtn"><img src="'+o.leftBtn+'" /></a>')
        .append('<a href="#" class="cs_rightBtn"><img src="'+o.rightBtn+'" /></a>')
        // Dig down to the article div elements
        .find('.cs_article')
          // Set the width and height of the div to the defined size
          .css({
            width:o.width,
            height:o.height
          })
          .end()
        // Animate the entrance of the buttons
        .find('.cs_leftBtn')
          .css('opacity','0')
          .hide()
          .end()
        .find('.cs_rightBtn')
          .hide()
          .animate({ 'width':'show' });

      // Resize the font to match the bounding box
      if(o.textResize===true) {
        var h2FontSize = $(this).find('h2').css('font-size');
        var pFontSize = $(this).find('p').css('font-size');
        $.each(jQuery.browser, function(i) {
          if($.browser.msie) {
             h2FontSize = o.IE_h2;
             pFontSize = o.IE_p;
          }
        });
        $(this).find('h2').css({ 'font-size' : parseFloat(h2FontSize)*p+'px', 'margin-left' : '66%' });
        $(this).find('p').css({ 'font-size' : parseFloat(pFontSize)*p+'px', 'margin-left' : '66%' });
        $(this).find('.readmore').css({ 'font-size' : parseFloat(pFontSize)*p+'px', 'margin-left' : '66%' });
      }

      // Store a copy of the button in a variable to pass to moveSlider()
      var leftBtn = $(this).children('.cs_leftBtn');
      leftBtn.bind('click', function() {
        if(inuse===false) {
          inuse = true;
          moveSlider('right', leftBtn);
        }
        return false; // Keep the link from firing
      });

      // Store a copy of the button in a variable to pass to moveSlider()
      var rightBtn = $(this).children('.cs_rightBtn');
      rightBtn.bind('click', function() {
        if(inuse===false) {
          inuse=true;
          moveSlider('left', rightBtn);
        }
        return false; // Keep the link from firing
      });

      vCenterBtns($(this)); // This is a CSS fix function.
    });
  }
})(jQuery) 
```

如果有人对此有解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T08:55:17.140

在您运行第 22 行后添加这 2 行

```
var newSb = parseInt(defaultWidth)*n+"px";  
$(".cs_slider").css("width", newSb); 
```

这会奏效！

# python - Apache服务器上的Python cgi

> ID：10135302
> 
> 赞同：1
> 
> 时间：2012-04-13T04:39:47.543
> 
> 标签：python, apache, cgi

我是 python cgi 编程的新手。我已经在 linux mint 上安装了 apache 2.2 服务器，并且在 var/www 文件夹中有我的 html 表单，该文件夹正在正确显示。表单的操作是我放在文件夹 /usr/lib/cgi-bin 中的 cgi 脚本。但是在提交时，它显示“在此服务器上找不到请求的 URL /usr/lib/cgi-bin/file.cgi”。有谁知道解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:53:34.213

1.  你的 Python 程序的名称是什么？是`/usr/lib/cgi-bin/file.cgi`吗？
2.  该文件的权限是什么？apache可以读取吗？可以执行吗？
3.  一线`#!/usr/bin/env python`或类似的好吗？确保这个文件可以从命令行运行（即shebang很好）
4.  apache 是否收到带有该文件的请求？查看 apache 日志，尤其是`error.log`和`access.log`（可能在`/var/log/apache`）
5.  确保您已在 Apache 配置中启用目录`ExecCGI`。`/usr/lib/cgi-bin/`有关示例，请参见： http: [//opensuse.swerdna.org/suseapache.html](http://opensuse.swerdna.org/suseapache.html)。您也可以使用`ScriptAlias`指令。

# java - 如何动态显示多个Tiles Android

> ID：10135303
> 
> 赞同：-5
> 
> 时间：2012-04-13T04:39:51.410
> 
> 标签：java, android, user-interface

我必须在同一屏幕上显示多个图块。每个 Tile 包含可以动态设置的页眉、内容和页脚。因此，每个 Tile 都将显示动态数据。如何在 android SDK 中为平板电脑开发程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:05:16.393

只是为了让您入门，您可以看看[Fragments](http://developer.android.com/guide/topics/fundamentals/fragments.html)（和[Activity](http://developer.android.com/reference/android/app/Activity.html)的）甚至是[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。

不过，所有这些技巧都需要一定的 Android 基础知识，正如@aneal 对您的问题所评论的那样。

# java - 注销旧会话并在 Java Web 应用程序中使用相同的用户 ID 和密码继续新会话

> ID：10135308
> 
> 赞同：2
> 
> 时间：2012-04-13T04:40:26.130
> 
> 标签：java, session, jakarta-ee, web-applications

假设一个人在应用程序中使用用户 ID 和密码登录。现在，他使用相同的用户 ID 和密码尝试登录而不从第一个会话中退出。我想让它从第一个会话中注销并自动继续新的会话。

Struts2、JSP、Java 是技术，我用于我的应用程序。

面临的问题

1.  如果我们在新选项卡或窗口中打开，IE 8 会在同一台机器上提供相同的会话 ID。无法区分来自同一台机器的不同登录。如何设置自己的会话ID？
2.  像 SBI 网站这样的银行应用程序都只能这样工作，它是如何实时工作的？
3.  我想复制与 SBI 银行网站在在线交易上工作相同的东西。如果您在新窗口中再次打开，则在第一个窗口中发送消息会话

请让我知道此日志记录的详细信息。谢谢。

这是我的过滤器

```
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {
    System.out.println("FirstFilter : In filter doFilter before doFilter...");
    HttpServletRequest req = (HttpServletRequest) request ;
    HttpServletResponse res = (HttpServletResponse) response ;

    HttpSession session = req.getSession(false);

    String userId=req.getParameter("username");
    String password=req.getParameter("password");
    System.out.println(" : : " + req.getParameter("username")) ;
    System.out.println(" : " + req.getServletPath());

    LoggedInUserVO userProfVOSession = null ;
    if(session != null) {
    String  sessionId=session.getId();
        userProfVOSession = (LoggedInUserVO)session.getAttribute("LoggedInUser") ;
        //check for login id password and session for single user sign in
        if(null!=userProfVOSession){
        if(userProfVOSession.getUserName().equalsIgnoreCase(userId) && userProfVOSession.getUserPassword().equals(password) && userProfVOSession.getSessionId().equals(sessionId)){
            //do nothing
        }
        else{
            System.out.println("in duplicate");
        }
        }
    }       

    if(userProfVOSession == null) {
        if("/populatelogin.action".equals(req.getServletPath()) || "/login.action".equals(req.getServletPath())||"/images/Twalk-Logo-4-green.png".equals (req.getServletPath())||"css/twalk.css".equals( req.getServletPath() )) {
            chain.doFilter(req, res) ;
        } else {
            req.getRequestDispatcher("Entryindex.jsp").forward(req, res) ;
        }
    } else {
        chain.doFilter(req, res) ;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:30:55.617

基本上你的要求会导致网络安全漏洞。如果一个人已经登录，那么他的会话必须是活动的。现在场景是这样的：

如果您尝试使用相同的凭据再次登录，他将自动登录。如果您想在每次登录时终止旧会话，那么您需要做的是，每次登录时都需要获取一个新会话，因此您的旧会话将过期。您只需编写一个过滤器即可实现此目的。在此过滤器中检查用户是否已与会话关联，如果是，则使他的当前会话无效并开始新会话。这将解决多次登录尝试的问题。

请记住，当会话启动时，服务器会将 cookie 发送回用户。从今以后，对于每个后续请求，此 cookie 将被传输到服务器。即使您在浏览器中打开多个选项卡，也只会将相同的 cookie 发送回服务器。

希望我明白这一点。

# ios - 如何在不使用果酱中的 s3eImagePicker 的情况下从图库中获取所有文件？

> ID：10135313
> 
> 赞同：1
> 
> 时间：2012-04-13T04:41:06.527
> 
> 标签：ios, marmalade

我需要从图库中获取所有文件并在网格布局中显示实际图像文件的缩略图以供选择。在这种情况下，我无法使用 s3eImagePicker，因为它会打开我无法在其中添加按钮的 Gallery 应用程序。基本上我的应用程序要求是以缩略图形式向用户显示图库中的所有图像。当用户选择任何缩略图并按下上传按钮时，我需要将实际图像从图库复制到用户选择的应用程序文件夹。所以我的用户界面包含缩略图的网格布局、目标文件夹列表和两个按钮，即取消和上传。s3eImagePicket 无法实现这种 UI。所以我正在寻找其他可以提供图库中所有文件的路径信息的解决方案。

请注意，我正在为 iPad 和 Android 开发应用程序。

果酱团队成员：你能回答一下吗？对于联系人，我可以在不使用默认联系人应用程序的情况下从设备读取，但对于图库则不可能。如果可能并且没有解决方案，您能否将其作为新功能提出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-16T16:17:27.103

在 marmalade 中，如果您正在搜索目录（例如画廊目录）中所有文件的路径，这是一种获取方法：

```
std::string strDirectory = "[GALLERY PATH HERE]";
s3eFileList *pFileList = s3eFileListDirectory( strDirectory.c_str() );
if( pFileList == NULL )
{
    return;
}
char pFileName[255];
int32 iFileNameLen( 255 );
while( s3eFileListNext( pFileList,
                        pFileName,
                        iFileNameLen ) == S3E_RESULT_SUCCESS )
{
    s3eDeviceYield(); // use this yield if there are potentially many files

    std::string strImagePath = strDirectory + pFileName;

    ...
    do whatever you want now with your paths for files in gallery
    ...
}

s3eFileListClose( pFileList ); 
```

# php - 如何在没有打印对话框的情况下从 Web 浏览器打印？

> ID：10135315
> 
> 赞同：1
> 
> 时间：2012-04-13T04:41:30.833
> 
> 标签：php, javascript, printing, lamp

我正在构建一个 LAMP 销售点 (PoS) 系统。在每笔交易结束时，我想打印一张收据。但是，我不想被打印对话框提示。有没有办法禁用打印对话框？我将可以直接访问每台使用 PoS 的计算机，因此我可以对操作系统、浏览器等进行任何更改。我正在寻找一种跨平台、跨浏览器的解决方案。

建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T04:43:29.303

使每个 PoS 站成为打印服务器。让 Web 服务器打印到请求来自的同一站点。

# file - 使用 Matlab 随机访问文件夹中的文件

> ID：10135322
> 
> 赞同：0
> 
> 时间：2012-04-13T04:42:15.967
> 
> 标签：file, matlab, random-access

我正在尝试使用 matlab 从文件夹中随机访问文件。你能建议如何去做吗？我打算使用`randn`功能，但我不明白如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:58:29.877

我认为你需要一个分布均匀的随机数，而不是正常的。所以给你..

```
Files = dir('MyFolder');
N = size(Files,1) - 2;
rand = randi(N,1);
Random_filename = Files(rand+2,1).name; 
```

# php - facebook 开放图元属性 og：“网站”类型。属性 'object-name' 需要 og:type 'object-name' 的对象

> ID：10135323
> 
> 赞同：1
> 
> 时间：2012-04-13T04:42:36.810
> 
> 标签：php, facebook, cakephp-1.3, facebook-opengraph

在视图 ctp 中的 cake php 1.3 中，我有以下代码：

```
$url = 'http://example.com/exmp/explus/books/view/'.$book['Book']['id'];

echo $this->Html->meta(array('property' => 'fb:app_id', 'content' => '*******'),'',array('inline'=>false));

echo $this->Html->meta(array('property' => 'og:type', 'content' => 'book'),'',array('inline'=>false));

echo $this->Html->meta(array('property' => 'og:url', 'content' => $url ),'',array('inline'=>false));

echo $this->Html->meta(array('property' => 'og:title', 'content' => $book['Book']['title']),'',array('inline'=>false));

echo $this->Html->meta(array('property' => 'og:description', 'content' => $book['Book']['title']),'',array('inline'=>false));

$imgurl = '../image/'.$book['Book']['id'];

echo $this->Html->meta(array('property' => 'og:image', 'content' => $imgurl ),'',array('inline'=>false)); ?> 
```

当我发布它时它会给出以下错误'

```
{
   "error": {
      "message": "(#3502) Object at URL http://example.com/exmp/explus/books/view/234'   has   og:type of 'website'. The property 'book' requires an object of og:type 'book'. ",
      "type": "OAuthException",
      "code": 3502
   }
} 
```

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T05:25:30.067

如果您的页面仅限于登录用户或具有某种会话逻辑，则可能会出现此问题。

您可以从此链接使用调试工具：

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

在该链接中，您可以在字段中提供您的网址（[http://example.com/exmp/explus/books/view/234](http://example.com/exmp/explus/books/view/234)） 。`"Input URL, Access Token, or Open Graph Action ID"`

之后单击调试按钮，如果您能够看到 的值`fb:app_id,og:url,og:type,og:title`，则不会发生此问题。

否则，您可以查看`"URLs"`页面底部的部分并单击`"See exactly what our scraper sees for your URL"`链接。单击链接后，您可以在浏览器中看到您网站的 html 代码。这将帮助您调试问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:32:09.127

BP RAM是对的，如果你按照他的步骤你应该能够找到问题所在。（如果可以的话，我会投票；没有足够的声誉。）

我想分享我的经验来详细说明。我最近遇到了同样的问题。Facebook 继续忽略所有元标记，我得到相同的 #3502 错误。

我终于使用 Facebook Debug Tool > "Scraped URL" 来检查我的代码。 **这个工具可以准确地向您展示 Facebook 爬虫所看到的内容。**

我注意到我的 HTML 代码中混有 php 错误。这些错误从未出现在 IE、FF 或 Chrome 的源代码中。就我而言，这与我的浏览器检测代码有关。Facebook 的爬虫的 user_agent 不在我的列表中，并导致我的检测代码生成破坏 HTML 标记的错误消息。我修复了我的功能，一切又开始工作了！

我建议您检查您的网站：http: [//developers.facebook.com/tools/debug/og/echo ?q=YOUR_WEBSITE_URL_HERE](http://developers.facebook.com/tools/debug/og/echo?q=YOUR_WEBSITE_URL_HERE)

*（或使用[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)，输入您的 URL 并按页面底部的“Scraped URL”。）*

检查<head></head>部分是否混入了垃圾代码。如果有，Facebook 将无法解析元标记。

# racket - 球拍交互与编译性能

> ID：10135327
> 
> 赞同：25
> 
> 时间：2012-04-13T04:42:51.620
> 
> 标签：racket

我是否编译 Racket 程序似乎对运行时性能没有影响。

最初只是通过编译改进了文件的加载吗？换句话说，运行`racket src.rkt`是否会即时进行 jit 编译，这就是为什么我认为编译与交互式没有区别？

即使对于整数算术的紧密循环，我认为会出现一些差异，无论我之前是否执行过`raco make`.

我错过了一些简单的东西吗？

PS，我注意到我可以对源文件（`.rkt`）或`.zo`文件运行球拍。球拍会自动使用`.zo`if one is found 对应的`.rkt`文件，还是`.zo`需要显式使用文件？无论哪种方式，这对我看到的性能数字都没有影响。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-13T05:03:28.153

你是对的。

Racket 分两个阶段编译代码：首先，将代码编译成字节码形式，然后在运行时将其 jit 为机器码。当你编译一个文件时，你基本上是在创建字节码，以便以后重新编译它。由于这通常不会花费大量时间来处理小段代码，因此您不会在运行时看到任何明显的差异。举个极端的例子，你可以删除`*.zo`集合树中的所有文件并启动 DrRacket——这需要*很多*由于有大量代码，因此需要开始时间，但是一旦开始，它将几乎像往常一样运行。（单击“运行”也会很慢，因为这会重新加载并重新编译一些文件。）对于较大的代码段的另一个问题是编译过程可能会使内存消耗更高，但这对于较小的代码段也不是问题.

有关如何提高性能的提示，另请参阅指南中的“[性能”一章。](http://docs.racket-lang.org/guide/performance.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-13T05:03:28.933

Racket 将始终编译您的代码，无论它是在 REPL 上以交互方式运行还是从命令行运行。[这](http://docs.racket-lang.org/guide/performance.html?q=compiler#%28part._.J.I.T%29)是指南中解释它的部分。在交互模式下，编译器将每个表达式/定义转换为内存中的字节码并执行。否则，编译器将字节码输出到 zo 文件。

注意：Eli 和我同时回复了。有关更多详细信息，请参阅他的回复。

# android - 在 Java 代码中获取自定义属性的值

> ID：10135329
> 
> 赞同：3
> 
> 时间：2012-04-13T04:42:57.913
> 
> 标签：android

我在 attrs.xml 文件中创建一个属性：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="Custom">
        <attr name="src" format="integer" />
    </declare-styleable>
</resource> 
```

在我的代码中，我得到这样的属性值： attrs.getAttributeIntValue("mynamespace", "src", -1);

有用。我从布局 xml 文件中获取 'src' 的值。但我的问题是为什么 android 不会在 R 类中生成一个值，这样我就不需要在我的 java 代码中再次使用字符串 'src' 了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T04:48:11.880

而是使用[`TypedArray`](http://developer.android.com/reference/android/content/res/TypedArray.html)

```
public CustomView(final Context context) {
    this(context, null);
}

public CustomView(final Context context,
            final AttributeSet attrs) {
    this(context, attrs, 0);
}

public CustomView(final Context context,
            final AttributeSet attrs, final int defStyle) {
        super(context, attrs, defStyle);

    final TypedArray a = context.obtainStyledAttributes(attrs,
                R.styleable.Custom, defStyle, 0);

    int src = a.getInt(R.styleable.Custom_src, 0);

    a.recycle();
} 
```

# php - Ajax 幻灯片不显示任何内容

> ID：10135330
> 
> 赞同：1
> 
> 时间：2012-04-13T04:43:00.473
> 
> 标签：php, jquery, ajax, slideshow

嗨，我正在使用此代码从文件夹中获取新图像以填充幻灯片。

在每个循环之后，ajax 应该检查文件夹的内容，看看是否有任何

更改（添加或删除图片）然后在下一个周期它应该对

幻灯片

```
<html>
<meta http-equiv="refresh" content="1000"/> 
<head>
<title>Slideshow</title>
<style type="text/css">
    #slideshow
    #slideshow img { padding: 15px; border: 1px solid #ccc; background-color: #eee; }
    #slide {width: 370px; height: 220px; padding: 0;  margin:  0 auto; }

    #myslides {
    width: 370px;
    height: 220px;
    padding: 0;  
    margin:  0 auto;  
} 

#myslides img {  
    padding: 10px;  
    border:  1px solid rgb(100,100,100);  
    background-color: rgb(230,230,230);
    width: 350px;
    height: 200px;
    top:  0; 
    left: 0 
}

</style>
</head>
<!-- include jQuery library -->

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

<!-- include Cycle plugin -->
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>

<script type="text/javascript">
$(document).ready(function(){
$('#slideshow').cycle({
               fx: 'fade',
                speed: 700,
                timeout: 8000
        });
});
</script>

<body>

<div id="slideshow">

</body>

</html>

<script>
    $(function(){
        window.onload("fetchImages()", 2);

        function fetchImages() {
            $.ajax({
                type: "GET",
                url: "load.php"
            }).done(function(response){
                var curImgCount = $('#slideshow img').length;
                if (response.length > curImgCount) {
                    for (var i = curImgCount; i < response.length; i++) {
                        $('#slideshow').append('<img src="images/' + response[i] + '"');    
                    }
                }
            });
        }
    });
</script> 
```

和php的内容：

```
<?php

    function returnimages($dirname="./images") {
         $pattern="([^\s]+(\.(?i)(jpg|png|gif|bmp))$)";     
         $files = array();
         if($handle = opendir($dirname)) {
            while(false !== ($file = readdir($handle))){
                if(preg_match($pattern, $file)){ //if this file is a valid image 
                    $files[] = $file;
                } 
            }

            closedir($handle);
        }
        //sort($files);         
        natcasesort($files);   

        return($files);
    }

   $images = returnimages();
    foreach($images as $img)
    {
      echo json_encode($images);
    }

   ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:47:52.747

将您的 PHP 更改为：

```
<?php

function returnimages($dirname="./images") {
  $pattern="([^\s]+(\.(?i)(jpg|png|gif|bmp))$)";
  $files = array();
  if($handle = opendir($dirname)) {
    while(false !== ($file = readdir($handle))){
      if(preg_match($pattern, $file)){ //if this file is a valid image
        $files[] = $file;
      }
    }
    closedir($handle);
  }
  //sort($files);
  natcasesort($files);

  return($files);
}

$images = returnimages();
echo json_encode($images);

?> 
```

和您的 HTML 到：

```
<html>
  <head>
    <meta http-equiv="refresh" content="1000"/>
    <title>Slideshow</title>
    <style type="text/css">
      #slideshow {
        position: relative;
      }
      #slideshow,
      #slideshow img {
        position: absolute;
        top: 0px;
        left: 0px;
        padding: 15px;
        border: 1px solid #ccc;
        background-color: #eee;
      }
      #slide {
        width: 370px;
        height: 220px;
        padding: 0;
        margin: 0 auto;
      }
      #myslides {
        width: 370px;
        height: 220px;
        padding: 0;
        margin: 0 auto;
      }

      #myslides img {
        padding: 10px;
        border:  1px solid rgb(100,100,100);
        background-color: rgb(230,230,230);
        width: 350px;
        height: 200px;
        top:  0;
        left: 0
      }

    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>

    <script type="text/javascript">
      function loadSlides() {
        $.ajax({
          type: "GET",
          url: "load.php"
        }).done(function(response) {
          var temp_images = eval("(" + response + ")");
          for(ti in temp_images)
          {
            //alert(temp_images[ti]);
            $('#slideshow').append('<img src="images/' + temp_images[ti] + '" alt="">');
          }
          startSlideshow();
        });
      }

      function startSlideshow()
      {
        $('#slideshow').cycle({
          fx: 'fade',
          speed: 700,
          timeout: 800
        });
      }

      $(document).ready(function(){
        loadSlides();
      });
    </script>
  </head>
  <body>
    <div id="slideshow" />
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:40:51.573

我正在测试这段代码，它工作正常，但为什么刷新元标记？AJAX 的目的不是防止这种情况发生并使其动态化吗？此外，最大的问题是您需要设置一个不太长的元刷新时间，以便图像在添加或删除时不会花费太长时间来反映，并且不会太短以防止某些图像完全显示（不可避免在一点）。

# google-app-engine - GAE Java Facebook 服务器认证双重调用

> ID：10135331
> 
> 赞同：2
> 
> 时间：2012-04-13T04:43:07.947
> 
> 标签：google-app-engine, facebook-graph-api

我有一个奇怪的问题。我在 Google App Engine 上创建了一个应用程序，并在其上有一个 Login with Facebook 按钮，我正在为此进行服务器端身份验证。

我给出了redirect_url，Facebook 正确调用了该URL，没有任何问题。我设置的会话参数正在重定向调用中检索，一切正常。

昨天，我在godaddy 上获得了一个域，并使用谷歌应用程序将其映射到我的appspot 帐户。现在，当我单击 Facebook 登录时，我在重定向 uri 上收到了两个调用，第一个带有会话变量，而会话一个没有。我对域映射不是很熟悉，并按照 Google Apps 上的步骤进行操作。

任何人都可以在正确的方向上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:54:40.247

感谢 bsautner 和 Michele 的回答。我终于弄清楚了这个问题。我的网站上有谷歌广告。谷歌广告试图解析 URL 内容并为我创建的每个请求创建第二个请求。删除谷歌广告后，我得到一个保留会话值的回调。现在一切正常。最终输出是这个网站 - [www.imagecrashers.com](http://www.imagecrashers.com)。我会很高兴从这里的专家那里得到任何关于布局或 api 调用简化的建议。再次感谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:49:19.410

它有点过时了，但我在这里记录了一些对 Facebook 陷阱的 GAE：http: [//javagwt.blogspot.com/2010/08/facebook-apps-on-app-engine-without-any.html](http://javagwt.blogspot.com/2010/08/facebook-apps-on-app-engine-without-any.html)

阅读有关使用 godaddy 进行的裸域映射也可能会有所帮助，以确保您不会被弹跳。即使您通过 google 应用程序映射到您的域，您也可以尝试将 facebook 的重定向 URL 设置为 yourappid.appspot.com - 您提供的重定向 URL 和您的 facebook 应用程序设置中的一个必须匹配。

我的应用程序 nimbits.com 一直从 GAE 写入 facebook - 代码在 github 上的 server/facebook 下

[https://github.com/bsautner/com.nimbits/tree/master/nimbits-tds/src/com/nimbits/server](https://github.com/bsautner/com.nimbits/tree/master/nimbits-tds/src/com/nimbits/server)

# objective-c - 我正在尝试复制一个数组，但没有填充新的（可变）数组

> ID：10135334
> 
> 赞同：0
> 
> 时间：2012-04-13T04:43:30.350
> 
> 标签：objective-c, xcode

由 iTunes U 提供的斯坦福 193 课程。我正在尝试复制带有字符串和数字的 NSArray。我想用 NSDictionary 对象替换某些字符串。我的理解是这种方法会比“replaceObjectAtIndex”更快

我遇到的问题是似乎没有任何东西被复制到堆栈中。这些值存在于“程序”中。被复制到项目。但是堆栈中的所有值都是空的。这个问题与检索字典项目无关。无论是否有要替换的变量，都不会将任何内容复制到 NSMutable 数组堆栈中。我插入了一个断点并监视所有变量（程序：索引，项目，堆栈：索引），因为它通过循环。

尤其令人抓狂的是，这个功能曾经有效，而现在却不行。

```
+(double)runProgram:(id) program
usingVariableValues:(NSDictionary *)variableValues;
{
    NSMutableArray *stack;

        for (id item in program)
        {
            if ([item isKindOfClass:[NSNumber class]]) [stack addObject:item];
            //above line because comparing numbers to strings throws exception
            else if  ( ([item isEqualToString:@"x"]) ||
                       ([item isEqualToString:@"a"]) ||
                       ([item isEqualToString:@"b"]) )  
                {
                    //if a variable is used, copy the value to program instead of the key
                    id replacement =[variableValues objectForKey:item];
                    if (!replacement) replacement = [NSNumber numberWithDouble:0.0];
                    [stack addObject:replacement];
                }
            else [stack addObject:item]; //if not a variable, just copy the item
        }
    //stack should now be a mutable copy of program, but with variables replaced

    return [self popOperandOffStack:stack];
} //runProgram 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:46:43.547

你需要`alloc`和`init`你的堆栈变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:47:56.527

您没有为堆栈变量分配任何内存，您正在尝试将对象添加到 nil 指针。

```
NSMutableArray* stack = [[NSMutableArray alloc] init]; 
```

# python - Django urls.py 给出问题

> ID：10135342
> 
> 赞同：-1
> 
> 时间：2012-04-13T04:45:06.180
> 
> 标签：python, django, apache

我有一个在 Django 上运行的应用程序。我们的 urls.py 有以下条目 -

```
url(r'^$', 'web.views.index', name='index'),
url(r'^g$', 'web.views.getpost', name='getpost'),

url(r'^p$', 'web.views.postarticle', name='postarticle'), 
```

这些 url 模式运行良好。但是，我添加了另外两个 url 模式 -

```
url(r'^d$', 'web.views.delete', name='delete'),

url(r'^u$', 'web.views.update', name='update'), 
```

当我击球时

```
http://127.0.0.1:8000/d 
```

它给出了 - 当前 URL d 与其中任何一个都不匹配。

我不知道为什么它不能识别新添加的 url 模式。知道为什么它不起作用吗？

编辑：正如韦斯利提到的，它显示：

请求 URL： http: [//127.0.0.1](http://127.0.0.1:8000/d) :8000/d Django 尝试了这些 URL 模式，顺序如下：

```
^$ [name='index']
^g$ [name='getpost']
^p$ [name='postarticle'] 
```

它不显示 ^d 或 ^u url 模式。

这是我的 urls.py

```
from django.conf.urls.defaults import patterns, url
from django.conf import settings

urlpatterns = patterns('',
    url(r'^$', 'web.views.index', name='index'),
    url(r'^g$', 'web.views.getpost', name='getpost'),

    url(r'^p$', 'web.views.postarticle', name='postarticle'),
url(r'^d$', 'web.views.delete', name='delete'),

    url(r'^u$', 'web.views.update', name='update'),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:06:06.830

问题不在于您提供给我们的信息。url 模式和您尝试访问的 url 看起来都不错。

-> 调试视图究竟返回了什么？是否显示：

> 请求 URL： http: [//127.0.0.1](http://127.0.0.1:8000/d) :8000/d Django 尝试了这些 URL 模式，顺序如下：
> 
> ```
> ^ ^$ [name='index']
> ^ ^g$ [name='getpost']
> ^ ^p$ [name='postarticle']
> ^ ^d$ [name='delete']
> ^ ^u$ [name='update'] 
> ```

可能调试视图没有列出删除 url，它显示有错字，或者请求 url 有点不同。如果您仍然无法解决问题，请尝试向我们提供更多信息！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:39:24.967

如对问题的评论所示，问题是一个陈旧的 .pyc 文件。这已通过删除 .pyc 文件并重新启动服务器来解决。

为了防止将来出现此问题，您应该在启动开发服务器之前删除 .pyc 文件。您可以使用以下命令快速删除当前目录和所有子目录中的所有 pyc 文件（确保在杀死它们之前检查 find 返回正确的文件）。

```
find . -name "*.pyc" #Find all pyc files and list them to console
find . -name "*.pyc" -exec rm '{}' ';' #Run command rm on each file found 
```

# php - 如何在 Symfony2 中停止对约束失败的验证

> ID：10135345
> 
> 赞同：7
> 
> 时间：2012-04-13T04:45:18.540
> 
> 标签：php, validation, symfony, chain

如果我有许多针对我的实体的验证器，我能否以某种方式指定一个验证器，如果它失败则停止其余验证器？IE：如果 NotBlank 失败，则没有必要检查权限。

或者，如果它不是内置的，也许有一种方法可以指示图遍历器停止，我可以放入一个验证器来检查先前的故障并停止通过图的传播。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-25T08:50:24.627

尽管这已经很老了，但从 5.1 开始，有一种方法可以通过使用[`Sequentially`](https://symfony.com/doc/current/reference/constraints/Sequentially.html)约束来做到这一点。

> 此约束允许您应用一组应逐步验证的规则，允许在引发第一次违规时中断验证。

您只需传递一组约束来验证：

```
/**
 * @Assert\Sequentially({ @Assert\NotBlank(), @Permissions() })
 */ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-07T07:42:36.717

如果您在其中设置验证，`./app/config/validation.yml`则 SF2 将按照文件中的验证顺序进行验证。一旦验证失败，它将忽略其他验证。

# java - 我的代码有什么问题，所以它不能播放 wav 文件？

> ID：10135350
> 
> 赞同：1
> 
> 时间：2012-04-13T04:45:52.157
> 
> 标签：java, audio, wav

我正在尝试使用可用的代码：[如何在 Java 中播放声音？](https://stackoverflow.com/questions/26305/how-can-i-play-sound-in-java) 但我不能在那里发布问题，因为这是一个新帐户并且只有 1 个声誉。

原始代码：

```
 public static synchronized void playSound(final String url) {
  new Thread(new Runnable() { // the wrapper thread is unnecessary, unless it blocks on the Clip finishing, see comments
  public void run() {
    try {
      Clip clip = AudioSystem.getClip();
      AudioInputStream inputStream = AudioSystem.getAudioInputStream(Main.class.getResourceAsStream("/path/to/sounds/" + url));
      clip.open(inputStream);
      clip.start(); 
    } catch (Exception e) {
      System.err.println(e.getMessage());
    }
  }
}).start();
} 
```

这是我的代码：

```
package sound_test;
import javax.sound.sampled.*;

public class Main {

public static synchronized void playSound(final String url) {
new Thread(new Runnable() {
  public void run() {
    try {
      Clip clip = AudioSystem.getClip();
      AudioInputStream inputStream = AudioSystem.getAudioInputStream(Main.class.getResourceAsStream("/path/to/sounds/" + url));
      clip.open(inputStream);
      clip.start();
    } catch (Exception e) {
      System.err.println(e.getMessage());
    }
  }
}).start();
}

public static void main(String[] args) {
    // TODO code application logic here
    playSound("C:\\warning_test.wav");
}

} 
```

当我运行代码时，我收到“null”作为输出并且没有声音出来。我检查了文件名和路径，它是正确的。

截图：

[http://puu.sh/pkYo](http://puu.sh/pkYo)

[http://puu.sh/pkZl](http://puu.sh/pkZl)

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:00:13.053

你可以做

```
AudioInputStream inputStream=AudioSystem.getAudioInputStream(new File(url)); 
```

之后还要添加延迟`click.start(); i.e Thread.Sleep(4000);`

或者，如果您想确保它播放整个音频样本，您可以使用一个简单的片段，例如

```
import javax.sound.sampled.*;
import java.io.File;

public class Main  implements LineListener {
private boolean done = false;
public  void update(LineEvent event) {
    if(event.getType() == LineEvent.Type.STOP || event.getType() == LineEvent.Type.CLOSE) {
      done = true;
    }
}

public void waitonfinish() throws InterruptedException {
   while(!done) {
       Thread.sleep(1000);
   } 
}
public static  void playSound(final String url) {

    try {
      Clip clip = AudioSystem.getClip();
      AudioInputStream inputStream = AudioSystem.getAudioInputStream(new File(url));
      Main control = new Main();
      clip.addLineListener(control);
      clip.open(inputStream);
      clip.start();
      control.waitonfinish();

    } catch (Exception e) {
      System.err.println(e.getMessage());
    }
  }

public static void main(String[] args) {
    // TODO code application logic here
    playSound("C:\\warning_test.wav");   
 }
} 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:23:12.170

您完全复制了代码而没有注意到原始代码，它指向

```
path/to/sounds 
```

既然你给了它完整的路径，你应该用 url 替换它：

```
 AudioInputStream inputStream = AudioSystem.getAudioInputStream(Main.class.getResourceAsStream(url)); 
```

编辑：我在这里试过，也得到了空值。我将其更改为从文件创建 audioInput：

```
import java.io.File;

import javax.sound.sampled.*;

public class Main {

    public static synchronized void playSound(final File file) {
        new Thread(new Runnable() {
            public void run() {
                try {
                    Clip clip = AudioSystem.getClip();
                    AudioInputStream inputStream = AudioSystem.getAudioInputStream(file);
                    clip.open(inputStream);
                    clip.start();
                } catch (Exception e) {
                    e.printStackTrace();
                    System.err.println(e.getMessage());
                }
            }
        }).start();
    }

    public static void main(String[] args) {
        // TODO code application logic here
        File file = new File("C:\\warning_test.wav");
        playSound(file);
    } 
```

# .net - 是否可以将 v8 编译为托管程序集？

> ID：10135351
> 
> 赞同：1
> 
> 时间：2012-04-13T04:45:55.437
> 
> 标签：.net, clr, mozilla, v8

其原因是 .net 平台上缺乏优质、快速的 JavaScript 引擎。想象一下，您需要能够在运行脚本中访问许多 .net 对象（例如 ORM 模型），以便最终用户可以自定义它们。

我可以看到几个选项：

*   使用现有的 .net 实现之一。令人惊讶的是，只有少数可行的选择：[jurassic](http://jurassic.codeplex.com/)和[ironjs](https://github.com/fholm/IronJS)。Jurassic 非常好，稳定，支持 Ecma5，但与原生引擎（mozilla，v8）相比速度较慢。IronJS 很有希望，但它不正式支持 Ecma5，而且它的开发似乎已经放缓。
*   将托管代码与混合应用程序中的本机引擎链接。它确实有效，我以前用 mozilla 引擎做过。问题是，如果您有很多应该在脚本中可见的 .net 对象，您将不得不为原生/托管转换付出高昂的代价，这可能会影响性能。
*   将本机引擎（v8 是更好的候选者）编译为托管程序集并直接在 .net 中使用。基本上，这是一种消除上述权衡的尝试。

我的问题是第三种方法是否值得尝试？有人已经试过了吗？

谢谢！

更新（2012 年 7 月 2 日）：如果有人感兴趣，我们已经在 mozilla jseng 上做了这样的实验。我的一位同事花了很多时间试图让它发挥作用。最后，当我们达到所有 mozilla jseng 代码都被托管并且代码中几乎没有本机/托管转换的地步时，结果出乎意料 - 性能是相同的。因此，万一原生/托管转换不是主要问题。

# java - 我们什么时候需要在android应用程序中使用runOnUiThread？

> ID：10135353
> 
> 赞同：18
> 
> 时间：2012-04-13T04:46:06.730
> 
> 标签：java, android, multithreading

我有一个使用此函数运行线程的代码示例`runOnUiThread`。为什么以及何时需要使用它？

## 编辑

什么是使用`AsyncTask`类，什么是`pros`和`cons`？？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-13T04:48:35.120

`runOnUiThread()`当你想从非 UI 线程更新你的 UI 时，你必须使用它。例如，如果您想从后台线程更新您的 UI。你也可以`Handler`用于同样的事情。

**从文档 -**

> 在 UI 线程上运行指定的操作。如果当前线程是 UI 线程，则立即执行该操作。如果当前线程不是 UI 线程，则将动作发布到 UI 线程的事件队列中。

**句法 -**

```
 Activity_Name.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                // your stuff to update the UI

            }
        }); 
```

**更新 -**

```
AsyncTask - 
```

> 如果你想做一些`Network operation`或任何事情来阻止你的 UI 在这种情况下 AsyncTask 是最好的选择。还有其他几种方法可以执行与您可以使用的相同的后台操作`Service`，`IntentService`也可以执行后台操作。使用 AsyncTask 将帮助您完成 UI 工作，并且在您的后台操作正在进行之前不会阻塞您的 UI。

**从文档 -**

> AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:58:52.010

要从线程更新`userinterface`，您需要使用`runOnUiThread`. 但是使用`asynctask`比使用更好`runonuithread`。[android-runonuithread-vs-asynctask](https://stackoverflow.com/questions/9296539/android-runonuithread-vs-asynctask)这个链接可以帮助你

# http - 在谈论 URL 参数（矩阵、请求或路径）时，缓存或非缓存是什么意思

> ID：10135357
> 
> 赞同：1
> 
> 时间：2012-04-13T04:46:31.670
> 
> 标签：http, jakarta-ee

我在了解有关“缓存”一词的 http 请求时阅读了几篇文章，我知道这意味着更快的访问，但是如何以及在哪里？

1.  矩阵参数被缓存，模式：[http://some.where/thing;paramA=1;paramB=6542](http://some.where/thing;paramA=1;paramB=6542)
2.  请求/查询参数未缓存，模式： [http://some.where/thing?paramA=1¶mB=6542](http://some.where/thing?paramA=1&paramB=6542)
3.  路径参数被缓存，模式： [http ://www.rest.services.com/item/b](http://www.rest.services.com/item/b)

那么缓存在这个范围内意味着什么？我用谷歌搜索但没有运气。

还有其他 URL 模式吗？

参考：1,2 从[这里](https://stackoverflow.com/questions/2048121/url-matrix-parameters-vs-request-parameters)和 3 从[这里](https://stackoverflow.com/questions/3198492/rest-standard-path-parameters-or-request-parameters)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:22:44.947

所有这些*都*可以缓存。

您可能想阅读

[http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)

# c# - 将数据转换为 ToList()

> ID：10135360
> 
> 赞同：0
> 
> 时间：2012-04-13T04:47:00.600
> 
> 标签：c#, linq, linq-to-sql

我有一个名为 Company 的表，我正在尝试使用 linq Query 访问该表的数据并转换为公司 Calss

```
List<Company> companyData = (from c in dataContext.Companies 
       select new 
       {
           CompanyName =c.CompanyName,
           Address1 =c.Address1,
           Addredd2 =c.Address2,
           city=c.City.CityName,
           state =c.State.StateName,
           country =c.Country.CountryName,
           Telephone1 =c.Telephone1,
           Telephone2 =c.Telephone2,
           Mobile1 =c.Mobile1,
           Mobile2=c.Mobile2,
           Email1 =c.Email1,
           Email2 = c.Mobile2,
           Fax1=c.Fax1,
           Fax2=c.Fax2,
           TinNo=c.TinNo,
           IsGroupCompany=c.IsGroupCompany 
       }).ToList<Company>(); 
```

但它给出了像 ToList() 这样的错误有一些无效的参数如何给列名获取列表格式的数据

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:51:07.403

我想你正在寻找这个：

```
List<Company> companyData = (from c in dataContext.Companies select new Company {
  CompanyName = c.CompanyName,
  Address1 = c.Address1,
  Address2 = c.Address2,
  City = c.City,
  State = c.State,
  Country = c.Country,
  Telephone1 = c.Telephone1,
  Telephone2 = c.Telephone2,
  Mobile1 = c.Mobile1,
  Mobile2 = c.Mobile2,
  Email1 = c.Email1,
  Email2 = c.Email2,
  Fax1 = c.Fax1,
  Fax2 = c.Fax2,
  TinNo = c.TinNo,
  IsGroupCompany = c.IsGroupCompany }
  ).ToList(); 
```

换句话说，您的代码正在实例化一个[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)，但您正在尝试创建一个 Company 对象列表。因此，请实例化一个 Company 对象。

但是，您可能不需要创建一组新的 Company 对象，其属性从另一组 Company 对象中复制而来。如果这是真的，你可以这样做：

```
List<Company> companyData = dataContext.Companies.ToList(); 
```

如果您需要以不同的方式命名属性，那么使用匿名类型是正确的。在这种情况下，您必须使用`var`关键字，因为对象不再是`Company`类的实例：

```
 var companyData = (from c in dataContext.Companies   
   select new   
   {  
       CompanyName =c.CompanyName,  
       Address1 =c.Address1,  
       Addredd2 =c.Address2,  
       city=c.City.CityName,  
       state =c.State.StateName,  
       country =c.Country.CountryName,  
       Telephone1 =c.Telephone1,  
       Telephone2 =c.Telephone2,  
       Mobile1 =c.Mobile1,  
       Mobile2=c.Mobile2,  
       Email1 =c.Email1,  
       Email2 = c.Mobile2,  
       Fax1=c.Fax1,  
       Fax2=c.Fax2,  
       TinNo=c.TinNo,  
       IsGroupCompany=c.IsGroupCompany   
   }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:50:02.557

```
List<Company> companyData = (from c in dataContext.Companies 
           select new Company() { ... }).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T04:54:44.667

如果你的意思是DataTable，那么你可以这样做：

```
class Program
{
    static void Main(string[] args)
    {
        DataTable table = new DataTable();
        table.Columns.Add("name", typeof(string));
        table.Columns.Add("address", typeof(string));
        table.Rows.Add("name 1", "address 1");
        table.Rows.Add("name 1", "address 1");

        var query = table.AsEnumerable().Select(s => new Company { Name = (string)s["name"], Address = (string)s["address"] }).ToList();
    }
}

class Company
{
    public string Name { get; set; }
    public string Address { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T11:23:02.560

```
try this :-
List<Company> companyData = (from c in dataContext.Companies 
select new Company
{
       CompanyName =c.CompanyName,
       Address1 =c.Address1,
       Addredd2 =c.Address2,
       city=c.City.CityName,
       state =c.State.StateName,
       country =c.Country.CountryName,
       Telephone1 =c.Telephone1,
       Telephone2 =c.Telephone2,
       Mobile1 =c.Mobile1,
       Mobile2=c.Mobile2,
       Email1 =c.Email1,
       Email2 = c.Mobile2,
       Fax1=c.Fax1,
       Fax2=c.Fax2,
       TinNo=c.TinNo,
       IsGroupCompany=c.IsGroupCompany 
   }).ToList(); 
```

# php - 对 mysqldump 使用 gzip 压缩

> ID：10135364
> 
> 赞同：3
> 
> 时间：2012-04-13T04:47:24.040
> 
> 标签：php, mysql, gzip, mysqldump

谁能提供一个示例，说明如何在以下 php 代码中包含我的 zip 压缩软件的路径？该代码在转储到一个简单的 sql 文件时有效，但是，gzip 压缩显然依赖于包含正确的路径。

```
$dumpfile = $dbname . ".sql.gz"; 

passthru("c:\\xampp\\mysql\\bin\\mysqldump.exe --opt --host=$dbhost --user=$dbuser --password=$dbpwd $dbname | gzip -v -9 > $dumpfile"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:19:57.883

您缺少`-c`gzip 的选项，该选项告诉它输出到标准输出。否则，它希望对文件进行操作。

采用`... | gzip -9 -c > $dumpfile`

# c++ - 是否有任何标准的 Visual Studio 2008 插件可用于跟踪/记录 C++ 项目的构造函数和析构函数调用

> ID：10135367
> 
> 赞同：1
> 
> 时间：2012-04-13T04:47:47.273
> 
> 标签：c++, visual-studio

我正在做一个 c++ 项目。我试图从 RC Purify 中找出内存泄漏，但没有得到令人满意的输出。我计划要么在所有构造函数和析构函数中写入日志以验证内存泄漏，要么尝试找出一些可以这样做的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:07:11.400

不是真正的插件，但您可以通过添加基础对象计数器来检测您的类：

```
template <typename T>
struct Counter {
   static atomic_int alive;
   Counter() {
      ++alive;
   }
   ~Counter() {
      --alive;
   }
};
template <typename T>
atomic_int Counter::alive = 0; 
```

然后对于每个检测类：

```
class Instrumented : Counter<Instrumented>   // CRTP
{ ... }; 
```

在代码中，您可以使用：

```
std::cout << Counter<Instrumented>::alive << std::endl; 
```

查看有多少类型的对象`Instrumented`已创建但未销毁。

请注意，这是一个穷人的选择，它会产生比 Purify 或 valgrind 之类的工具更差的结果（即它只跟踪被检测的对象，并且不会检测由于错误编写的析构函数或内部指针的错误重置而丢失的内存，它是侵入性，您必须显式添加代码才能获得结果-或使用调试器...）但我过去曾使用它来帮助理解某些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:43:04.863

您可以使用 WinDbg 尝试查找内存泄漏，从此处下载：http: [//msdn.microsoft.com/en-us/windows/hardware/gg463009](http://msdn.microsoft.com/en-us/windows/hardware/gg463009)，在命令提示符或调试中为泄漏的应用程序打开 gflags 用户堆栈跟踪工具命令提示符：

`gflags /i MyApp.exe +ust`

然后，您可以从 WinDbg 附加或启动您的应用程序，在 WinDbg 的命令提示符处输入：

`.symfix;.reload;g`

然后，当您的应用程序运行到足以发生泄漏时，请返回 WinDbg 按`ctrl+break`然后输入`!heap -l`，它会尝试为您查找泄漏。这里有一个很好的演练：http: [//www.codeproject.com/Articles/31382/Memory-Leak-Detection-Using-Windbg](http://www.codeproject.com/Articles/31382/Memory-Leak-Detection-Using-Windbg)和[http://cprogrammers.blogspot.co.uk/2006/09/windows-memory -leak-analysis-using.html](http://cprogrammers.blogspot.co.uk/2006/09/windows-memory-leak-analysis-using.html)。

也可能是句柄泄漏，在这种情况下，当 WinDbg 附加时输入：

`!htrace -enable`这将启用句柄跟踪并拍摄快照，然后在您的应用程序中执行一些操作，在 WinDbg 中中断`ctrl+Break`并输入`!htrace -snapshot`，然后`!htrace -diff`它将列出自上次快照以来尚未释放的所有句柄。祝你好运。

# entity-framework - 如何拒绝某些表的数据库中的 EF 更新模型？

> ID：10135368
> 
> 赞同：2
> 
> 时间：2012-04-13T04:47:47.703
> 
> 标签：entity-framework, ef-database-first

有没有办法告诉 EF 在执行时不要更新单个表的 SSDL `Update Model From Database`？

更多细节：
我们使用 EF 4.3 和 Db-first 方法（因此，edmx 和从数据库更新模型）。

我们有一个表，由于某些原因在 SQL Server 中没有设置主键，但有一个自动递增的`Identity`列，我们可以告诉 EF 将其用作主键。

由于 EF 没有在表本身中找到任何主键，因此它会在 SSDL 中为该表生成一个 DefiningQuery（并防止更新/插入）。

我可以轻松地删除该 DefiningQuery（并修改其他 EntitySet 属性）并且一切正常。

除非我再做一次`Update Model From Database`，DefiningQuery 又回来了。

有没有办法告诉 EF 不要为该单个表更新 SSDL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:11:03.933

> Is there a way to tell EF not to update SSDL for the single table when doing Update Model From Database?

Not with default designer provided in Visual Studio. Once you modify SSDL part of your EDMX file you should maintain it manually or write a script which will fix it every time you run Update from database.

Alternatively you can buy more powerful designer or [extension to Visual Studio](http://www.huagati.com/dbmltools/) which will offer you selective update.

Anyway what you are trying to do should be avoided. If the database is owned by ERP you should do the access only through ERP programming API (real ERP has some). Otherwise you can break functionality of your ERP, corrupt ERP data, cause performance issues or even cause deadlocks.

# c++ - 如何使用 Enterprise Architect(EA) 生成 QT 项目的类图？

> ID：10135369
> 
> 赞同：2
> 
> 时间：2012-04-13T04:47:49.653
> 
> 标签：c++, qt, class-diagram, enterprise-architect

我总是使用 Enterprise Architect 从源文件生成 C++ 项目的类图。现在，我有一个 QT 项目。有没有办法从 QT 源文件生成类图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:45:50.157

是的，但您可能需要先运行 qmake 并包含元对象源。

另一种可能性（或者您可能需要这样做）是将特定于 Qt 的预处理器宏（`SIGNAL()`以及`SLOT()`QObject 定义的宏）添加到 EA。我目前没有方便的安装，所以我无法确切地告诉你它是如何完成的。

# python-2.x - virtualenvwrapper.sh 中的 `which python` 在 Arch linux 中搞砸了

> ID：10135383
> 
> 赞同：3
> 
> 时间：2012-04-13T04:49:11.243
> 
> 标签：python-2.x, archlinux, virtualenvwrapper

在 Arch linux 上，在系统范围内安装 virtualenvwrapper 后，通过`sudo pip2 install virtualenvwrapper`并将其添加到我的用户的 .bash_profile 中，

```
 export WORKON_HOME=/home/myuser/.virtualenvs
 export PROJECT_HOME=/home/myuser/work
 source /usr/bin/virtualenvwrapper.sh 
```

每当我启动一个新的 shell 窗口时都会出现一个错误：-

```
which: no python in (/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/bin/core_perl)
-bash: : command not found
virtualenvwrapper.sh: There was a problem running the initialization hooks. If Python could not import the module virtualenvwrapper.hook_loader, check that virtualenv has been installed for VIRTUALENVWRAPPER_PYTHON= and that PATH is set properly. 
```

这可以追溯到 virtualenvwrapper.sh 脚本中的第 50 行：-

```
 47 # Locate the global Python where virtualenvwrapper is installed. 
 48 if [ "$VIRTUALENVWRAPPER_PYTHON" = "" ] 
 49 then 
 50     VIRTUALENVWRAPPER_PYTHON="$(\which python)" 
 51 fi 
```

并且是与 Arch linux 使用 python2 安装 python 2.7 的约定冲突的结果。

如果我将第 50 行修改为`which python2`，则一切正常，每当我启动新的 shell 时，我都不会看到错误消息。

解决此问题的适当方法是什么？我是否写了一个明确的检查当前操作系统是arch linux并引入一个if-else条件来使用virtualenvwrapper.sh中的哪个python2并将补丁发送给virtualenvwrapper作者？或者我可以在我的 Arch linux 机器中使用我的配置做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:00:16.477

Virtualenvwrapper 有变量`VIRTUALENVWRAPPER_PYTHON`，`VIRTUALENVWRAPPER_VIRTUALENV`它们指向你的 python 和 virtualenv 可执行文件。所以，在你的`.bash_profile`你可以写这样的东西：

```
export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python2
export VIRTUALENVWRAPPER_VIRTUALENV=/usr/bin/virtualenv2
source /usr/bin/virtualenvwrapper.sh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:46:14.307

为了回答这个特定于拱门的 python 怪癖（使用约定`python2`），我专门创建了一个这样的软链接：-

```
ln -s /usr/bin/python2 /usr/local/bin/python 
```

由于在`/usr/local/bin`bash`/usr/bin`系统 PATH 环境变量中有前置，当我键入`python`时，或者当 virtualenvwrapper.sh 脚本`which python`在第 50 行引用时，我们将不再遇到上面提到的 virtualenvwrapper 冲突，一切都按预期工作。

这样做的缺点是它可能会弄乱 Arch linux 设计的“python 3”（被认为是默认的 python 命令）约定。所以必须注意不要在我的目标框中使用与 python 3 相关的库或与 python 3 相关的包安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-18T09:06:24.610

我发现无需编辑`/usr/bin/virtualenvwrapper.sh`脚本或创建新的符号链接。我只是错过了`virtualenvwrapper`python2 的模块。我安装它如下：

```
pip2 install virtualenvwrapper 
```

并保留出口，这样魔术就完成了。

# javascript - 另一个图像预加载问题

> ID：10135385
> 
> 赞同：0
> 
> 时间：2012-04-13T04:49:38.000
> 
> 标签：javascript, jquery, image-preloader

我有一个脚本可以手动预加载所有需要的图像。它看起来像这样：

```
<script type="text/javascript">
(new Image()).src = "/images/buttonpinkpressed.png";
(new Image()).src = "/images/smallbuttonpinkpressed.png";
</script> 
```

实际上，每种类型的按钮和其他元素都有很多这样的条目。最糟糕的是项目正在进行中并且每天都在添加新按钮，因此很容易忘记将它们添加到列表中。

现在我想使用一个通用脚本来预加载所有正在使用的东西。

它应该使用类似 jQuery 的选择器（例如，$('buttons') 以获取所有按钮）在文档中枚举所有元素，然后 - 这对我来说是最难的部分 - 找到作为元素的结果的样式class 和 'active' 类（不要与 :active 伪类混淆，但应该没有任何区别）。

例如，有一个按钮：

```
<button type="button" class="small pink"><p>Menu</p></button> 
```

并且有以下CSS：

```
button.pink.large
{
    background-image: url('buttonpinknormal.png');
}
button.pink.large.active
{
    background-image: url('buttonpinkpressed.png');
}
button.pink.small
{
    background-image: url('buttonpinksmallnormal.png');
}
button.pink.small.active
{
    background-image: url('buttonpinksmallpressed.png');
} 
```

显然，对于这个按钮，预加载的图像应该是最后一个，因为明确定义了“小”和“粉红色”，而“活动”是我们正在寻找的：

```
button.pink.small.active
{
    background-image: url('buttonpinksmallpressed.png');
} 
```

所以，问题是如何过滤样式。

问候，

**更新**

如您所见，最初该按钮没有“活动”样式。它被添加了一个关于触摸事件的脚本（因为 Android Webkit 不支持真正的 :active）。这就是为什么应该从另一个脚本预加载图像的原因。而且，是的，我在点击时看到运行时加载的活动状态图像，它看起来很丑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:07:39.533

使用精灵并只需更改`background-position`，这样浏览器只需执行 1 个请求，并且您不必执行预加载，因为正常状态应该是可见的。而且，状态之间的切换速度很快，因为它只是重新定位渲染图像（并不是说单独的图像很慢，只是效率较低）

# android - 在 android 中绘制大型数据集的标准实践

> ID：10135388
> 
> 赞同：3
> 
> 时间：2012-04-13T04:49:58.477
> 
> 标签：android, graphics, graph, android-canvas

我有一个收集数据的 android 应用程序，我需要绘制该数据的图表。数据集可能是几百个样本，也可能是数万个样本。X轴是时间。Y 轴可以有 1 到 15 组不同的数据。

我查看了一些图形库，例如 achartengine，但它们似乎都希望您的图形具有相当紧凑的数据集，可以很好地适应屏幕。如果有 20k 个样本，我的图表将比它的高度宽得多。实际上我从不希望 Y 轴比屏幕高，缩放应该只在 X 轴上缩放。

我理想的界面基本上就像一个横向列表视图，您可以向左或向右滑动来滚动真正宽的图形。缩放只会压缩或扩展时间尺度。

无论如何，我的问题是尝试做这样的事情时最好的做法是什么？我可以找到绘图教程，但没有专门解决这个问题的。尝试一次渲染整个图形似乎非常浪费。但我希望幻灯片导航流畅。一次在画布上绘制一个屏幕是否足够快以实现平滑滚动？还是我必须去openGL？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:33:24.047

我听到 AChartEngine 的用户提到他们在模型中添加了数万个数据值，而 AChartEngine 仍然可以很好地处理和显示它们。

# php - 内存缓存与 MySQL 的工作原理是什么？

> ID：10135391
> 
> 赞同：22
> 
> 时间：2012-04-13T04:50:19.983
> 
> 标签：php, mysql, memcached, apc

我试图了解（并且可能部署）我们环境中的 memcached。

我们在负载均衡器上有 4 个 Web 服务器，运行一个用 PHP 开发的大型 Web 应用程序。我们已经在使用 APC。我想看看 memcached 是如何工作的？至少，我可能不明白缓存是如何工作的。

我们有一些复杂的动态查询，它们组合了几个表来提取数据。每次，数据都将来自不同的客户端数据库，并且数据不断变化。据我了解，如果缓存中存储了一些数据，如果下次请求相同，则返回相同的数据。（或者我在这里可能完全错了）。

整个内存缓存（或者就此而言，任何缓存的工作）是如何工作的？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-13T05:09:10.150

缓存，一般来说，是一个非常快速的键/值存储引擎，您可以通过预定的键存储值（通常是序列化的），因此您可以通过相同的键检索存储的值。

对于 MySQL，您将编写应用程序代码，即在向数据库发出请求之前检查缓存中是否存在数据。如果找到匹配项（存在匹配键），您就可以访问与该键关联的数据。如果可以避免，目标是不向成本更高的数据库发出请求。

一个示例（仅用于演示）：

```
$cache = new Memcached();

$cache->addServer('servername', 11211);

$myCacheKey = 'my_cache_key';

$row = $cache->get($myCacheKey);

if (!$row) {

    // Issue painful query to mysql
    $sql = "SELECT * FROM table WHERE id = :id";

    $dbo->prepare($sql);
    $stmt->bindValue(':id', $someId, PDO::PARAM_INT);

    $row = $stmt->fetch(PDO::FETCH_OBJ);

    $cache->set($myCacheKey, serialize($row));
}

// Now I have access to $row, where I can do what I need to
// And for subsequent calls, the data will be pulled from cache and skip
// the query altogether
var_dump(unserialize($row)); 
```

查看[memcached](http://us.php.net/memcached)上的 PHP 文档以获取更多信息，这里有一些很好的示例和评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:37:44.803

如果您的数据不断变化（在请求之间），那么缓存是徒劳的，因为该数据将是陈旧的。但是大多数时候（我敢打赌，即使在你的缓存中）对数据库的多个请求都会产生相同的数据集，在这种情况下，缓存（在内存中）非常有用。

PS：我做了一个快速的谷歌搜索，发现这个关于 memcached 的视频质量相当好 => [http://www.bestechvideos.com/2009/03/21/railslab-scaling-rails-episode-8-memcached](http://www.bestechvideos.com/2009/03/21/railslab-scaling-rails-episode-8-memcached)。唯一的问题可能是它谈到了 Ruby On Rails（我也没有使用那么多，但很容易理解）。希望它能帮助您更好地掌握这个概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T04:55:01.803

有几个关于 memcache 如何工作的示例。[这](http://pureform.wordpress.com/2008/05/21/using-memcache-with-mysql-and-php/)是其中一个链接。

其次，Memcache 可以在有或没有 MySQL 的情况下工作。

它缓存您在 PHP 中的对象，现在无论它来自 MySQL 还是其他任何地方，如果它是 PHP 对象，它可以存储在 MemCache 中。

APC 为您提供了比 Memcache 更多的功能。除了存储/缓存 PHP 对象外，它还缓存 PHP-executable-machine-readable-opcodes，这样您的 PHP 文件就不会经历加载到内存中的过程-> 被编译，而是直接运行已经编译的操作码从记忆中。

# cluster-computing - 集群中的（前端节点）是什么意思？

> ID：10135394
> 
> 赞同：3
> 
> 时间：2012-04-13T04:50:41.877
> 
> 标签：cluster-computing, frontend

集群中的（前端节点）是什么意思？这个词没有维基百科页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T05:01:49.817

如果您将前端设置为与后端相关，那么谈论前端是最有意义的：

*   **前端节点**：接受请求并将它们路由到后端节点。
*   **后端节点**：执行实际计算并记录/中继结果。

这是分布式网络入侵检测领域 的[示例拓扑：（](https://web.archive.org/web/20170928114727/https://www.bro.org/sphinx/cluster/index.html)[来源：][[bro.org](https://www.bro.org/sphinx/_images/deployment.png)][）][![NIDS 集群](../Images/921edf3c7142f539efc11f3574916c53.png)](https://i.stack.imgur.com/WiXjR.png)

前端将流量拆分为流，并将属于同一流的数据包中继到同一后端（又名工作人员）。后端节点然后对网络流量进行实际昂贵的分析，例如重组 TCP 流和解析应用层协议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T04:53:57.450

它们是与用户/世界交互的节点，而不是简单地提供算法和数据进行处理的**计算节点。**

# forms - 使用 Oracle Forms 调用 Oracle Reports 时找不到报告无效 ID 错误

> ID：10135395
> 
> 赞同：1
> 
> 时间：2012-04-13T04:50:44.133
> 
> 标签：forms, plsql, oracle10g, oracleforms

当我使用 Oracle 表单调用报告时出现以下错误获取显示

> FRM-41219：找不到报告无效 ID

```
DECLARE 
rept REPORT_OBJECT; 
v_rep VARCHAR2(100); 
rep_status varchar2(200); 
BEGIN 

rept := find_report_object('EMP.RDF'); 

SET_REPORT_OBJECT_PROPERTY(rept ,REPORT_SERVER , 'repsrv'); 
SET_REPORT_OBJECT_PROPERTY(rept,REPORT_DESTYPE,CACHE); 
SET_REPORT_OBJECT_PROPERTY(rept,REPORT_DESFORMAT,' HTML');

v_rep := RUN_REPORT_OBJECT(rept); 
rep_status:=REPORT_OBJECT_STATUS(v_rep); 

WHILE rep_status in ('RUNNING','OPENING_REPORT','ENQUEUED') 
LOOP 
rep_status := report_object_status(v_rep); 
END LOOP; 
IF rep_status='FINISHED' THEN 
message('REPORT WAS CORRECTLY RUN'); 
ELSE 
message('REPORT FAILED WITH STATUS: '||rep_status); 
END IF;  
END; 
```

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:38:37.660

`find_report_object`需要一个报告 ID，而不是报告 RDF 的文件名。报告 ID 将是您在表单中创建的报告对象的名称。

# windows - 当我启动不同的应用程序时，已安装程序的“Windows 安装程序”出现

> ID：10135399
> 
> 赞同：2
> 
> 时间：2012-04-13T04:51:09.843
> 
> 标签：windows, installation, popup

当我启动一个应用程序时，来自以前安装的程序的 Windows 安装程序不断弹出。该程序仍然存在于服务器中，并且运行良好。单击“取消”后，安装程序弹出窗口最终会消失。

我对解决这个问题不感兴趣，我只是想知道 Windows 安装程序如何决定安装什么？我的意思是，机制是什么？如何以及由谁触发 Windows 安装程序？

感谢您的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T19:10:53.080

这是操作系统自动触发的自我修复机制。除了上述列举的原因，它也可以在以下情况下触发：

1.  首次使用/安装时已按广告宣传/安装的功能在需要时安装
2.  在组件、功能或产品之间不恰当地共享文件，这可能导致资源在产品仍在使用时被卸载
3.  具有每个用户数据的产品已由一个用户安装在多用户系统上，然后由另一个用户启动

要调查其缺失触发自我修复的资源，请查看系统事件日志的应用程序部分。自修复事件与源“MsiInstaller”一起显示。

如果安装程序确实试图添加另一个应用程序所需的资源，最好的解决方案是让它完成，之后它应该不再出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:04:15.323

通常，当以下情况之一为真时，会出现此行为：

*   安装过程未成功完成
*   该程序的注册表项已删除/损坏（未找到适当的注册表项是触发器）
*   安装程序的更新管理器在上次运行时损坏/取消配置/取消

解决方案通常是完全卸载程序，检查所有文件夹和注册表项是否确实已删除，然后重新安装程序。

# javascript - 为此的正则表达式？

> ID：10135400
> 
> 赞同：0
> 
> 时间：2012-04-13T04:51:11.173
> 
> 标签：javascript, regex

如何制作与此类匹配的正则表达式？

```
"Hi hello world" and "Hi world" 
```

我试过了

```
/^Hi (hello)? world$/i 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:54:11.607

```
/^Hi( hello)? world$/i 
```

之前（或之后）的空格`hello`也需要是可选的，否则匹配：

*   `hi__world`（下划线是“空格”）
*   `hi hello world`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T04:53:55.937

这应该这样做：

```
 /^Hi( | hello )world$/i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T04:54:29.410

试试看`/^Hi (hello )?world$/i`，你的代码只匹配“Hi hello world”和“Hi world”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T05:47:49.333

```
Hi (\hello |)world 
```

管道字符用作“或”。因此，括号内的表达式匹配“hello”或不匹配。您可以在这里测试您的 Javascript 正则表达式： [http ://rejex.heroku.com/](http://rejex.heroku.com/)

# java - Jboss 5 调试模式进入连续监听模式并且什么都不做

> ID：10135406
> 
> 赞同：0
> 
> 时间：2012-04-13T04:51:59.493
> 
> 标签：java, jboss, intellij-idea

我正在尝试在 IntelliJ 中调试 maven 项目，它给了我

1.  Jboss 服务器开始于`JAVA_OPTS = %JAVA_OPTS% -Xdebug -Xrunjdwp:transport=dt_socket,address=5005,server=y,suspend=y`

    Jboss 服务器进入listinini 模式

    在地址监听传输 dt_socket：5005 未创建日志、数据、tmp 和工作文件夹

2.  如何为 Jboss 调试配置 IntelliJ 11

# iphone - 检查是否为 iOS 5 连接了 Twitter

> ID：10135414
> 
> 赞同：0
> 
> 时间：2012-04-13T04:53:14.540
> 
> 标签：iphone, objective-c, ios, twitter

由于我没有访问令牌，我如何检查是否可以在 iOS5 的 Twitter 上发出 TWRequest？通过使用 MGTwitterEngine 等框架的常规 twitter REST API，我们可以检查访问令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:58:13.727

试试这个：）

```
-(IBAction)updateTwitter:(id)sender {

    [tweetTextField resignFirstResponder];

    if(![_engine isAuthorized]){ 
        UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate:self];
        if (controller) {
            [self presentModalViewController:controller  animated:YES];
        }
    }else
    {
        [_engine sendUpdate:tweetTextField.text];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:38:32.207

你不需要它。在 iOS5 中，您只需在 iOS 设置中输入用户名和密码即可。您只需要正确使用`TWTweetComposeViewController`并管理其回调块 ( `completitionHandler`)。在块中，您会收到有关操作的状态。

```
TWTweetComposeViewControllerResult Possible values for the result parameter of the completionHandler property.

enum TWTweetComposeViewControllerResult {
    TWTweetComposeViewControllerResultCancelled,
    TWTweetComposeViewControllerResultDone };
 typedef enum TWTweetComposeViewControllerResult TWTweetComposeViewControllerResult; 
```

如果需要知道是否可以发送推文，只需使用类的类方法`+ (BOOL)canSendTweet`即可`TWTweetComposeViewController`。
如果您需要更多控制，可以使用`TWRequest`代替`TWTweetComposeViewController`。
在这里查看：[https ://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html](https://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html)

# c++ - C++ .exe 忽略类，只运行 main（初学者）

> ID：10135423
> 
> 赞同：1
> 
> 时间：2012-04-13T04:54:19.017
> 
> 标签：c++

它只运行 main，输出“输入一个单词”，但完全忽略了对象/类

我是新手，抱歉，如果这是一个不恰当的简单问题。这在发布和调试模式下都会发生

```
#include <iostream>

using namespace std;

class WordGame
{
public:

    void setWord( string word )
    {
        theWord = word;
    }
    string getWord()
    {
        return theWord;
    }
    void displayWord()
    {
        cout << "Your word is " << getWord() << endl;
    }
private:
    string theWord;
};

int main()
{
    cout << "Enter a word" << endl;
    string aWord;
    WordGame theGame;
    cin >> aWord;
    theGame.setWord(aWord);
    theGame.displayWord();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T04:58:54.317

您需要输入一个单词，然后按回车键。你说“它退出了程序，什么也没有发生”，但确实发生了一些事情。它发生得如此之快，您可能确实看到它发生并且程序关闭。如果您处于调试模式并且想要“按键退出消息”，请执行

```
 system("PAUSE"); 
```

后

```
theGame.displayWord(); 
```

你会看到你的`cout`显示器。

此外，您的代码存在一些优化和错误。

1.  您缺少来自 的返回值`main`。
2.  因为`setWord`你应该通过 const 引用传递，所以函数就是这样。

`void setWord( const string& word )`

1.  因为`getWord`你应该通过 const 引用返回，所以函数是

`string getWord()`

有关通过 const 引用传递的更多信息，请查看[通过引用传递参数](http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T05:06:47.250

在 Visual Studio 中，如果您右键单击项目然后转到 Properties->Linker->System->SubSystem，您可以将其设置为 Console，这样它就不会立即退出并阻止您使用 System("pause") . System("pause") 是 Windows 的东西，并且妨碍了可移植性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:33:45.843

其他答案已经建议更改您的 IDE 属性以防止控制台立即退出，或使用 system("PAUSE"); 您也可以简单地加载自己的控制台，然后从那里手动运行可执行文件（既不依赖于 IDE，也不依赖于平台）。

但是，最终，您不知道您的用户将在什么环境中工作或他们将如何加载程序，因此更合适的解决方案是自己实现一些东西，以防止程序退出，直到您确定用户完成读取输出。例如：

```
WordGame theGame;
bool exit = false
while (!exit)
{
    cout << "Enter a word. Entering \"exit\" will terminate the program." << endl; 
    string aWord; 
    cin >> aWord;
    if (aWord == "exit") exit = true;
    else
    {
        theGame.setWord(aWord); 
        theGame.displayWord(); 
    }
} 
```

# nservicebus - NServiceBus 稍后处理消息

> ID：10135427
> 
> 赞同：2
> 
> 时间：2012-04-13T04:54:56.223
> 
> 标签：nservicebus, nservicebus3

我正在使用 NSerivceBus 构建一个系统，它应该只在特定的时间范围内将消息发送到远程处理程序。到目前为止，我设法将所有消息放在一个处理队列上，并从那里检查远程处理程序的可用性，如果处理程序不可用，我不会将消息发送到边界之外。为此，我正在使用

```
Bus.HandleCurrentMessageLater() 
```

但NSB会在之后继续尝试。它不像另一个监听器会在几分钟内启动并运行，但它可能有几个小时的中断窗口，所以这并不完全有效。

想知道是否有办法让总线稍后重试消息，或者不要继续重试并在下次重试之前等待一段时间。我将使用 Sagas，只是简单的命令/处理程序消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:06:15.067

在 3.0 版中，您可以使用 Bus.Defer 在特定时间跨度过去后取回消息。

# android - 更新：大多数三星安卓在软键盘上也有“设置”按钮。如何拦截或禁用它？

> ID：10135429
> 
> 赞同：3
> 
> 时间：2012-04-13T04:55:21.583
> 
> 标签：android

我有一个带有 ExitText 的全屏活动。单击编辑文本（获得焦点）时，会出现一个软键盘。

现在，在一些三星安卓手机（我用过至少两部）上，键盘还有一个小的“设置”按钮，它将关闭您的活动并带您进入手机的系统设置按钮。

我想在用户单击此“设置”软按钮时进行拦截，然后在我的活动被推回堆栈之前做出一些决定。

可能吗？如果是，如何？

**编辑**

我知道在正常情况下它的用户体验很差，应该避免。但是，我对解决方案（技术方面）更感兴趣。我不会在市场上为普通用户推出这样的应用程序，所以请不要评论说我不应该这样做。

我知道开发人员将这样的评论放在了仍在学习的用户的利益上，但在某些情况下，“它更多地是关于如何做到这一点？”。这种情况只是其中之一。希望没有人误解我所说的。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T07:52:08.340

在活动布局中使用 android:inputType="number" ，软键盘要么没有设置键，要么将被禁用。我在三星手机（2.3.6）上实现并测试了它，解决方案有效！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-13T12:35:30.947

> 可能吗？

可能不是。换句话说，如果可能的话，这将是键盘的一个缺陷。

# ruby-on-rails - 如何通过 Rails 中的聚合关联列出关联记录并对其进行排名？

> ID：10135432
> 
> 赞同：0
> 
> 时间：2012-04-13T04:55:50.243
> 
> 标签：ruby-on-rails

请原谅铁路菜鸟的问题。我正在尝试显示关联记录的列表，但在处理相反方向的关联时遇到了麻烦。

例如，我有

```
Country
  has_many :states
  has_many :users, :through => :events
  has_many :venues, :through => :events
  has_many :users
  has_many :venues
end

State
  belongs_to :country
  has_many :cities
end

City
  belongs_to :state
  has_many :events
end

Event
  belongs_to :city
  belongs_to :user
  belongs_to :venue
end

Venue
  has_many :events
  belongs_to :country
end

User
  has_many :events
  belongs_to :country
end 
```

在国家展示视图中，我试图列出所有事件、所有场地和所有用户。

事件是直截了当的

```
@country = Country.find(params[:id])
@events = @country.states.cities.events.find(:all) 
```

但我无法想象列出用户和场所的最佳方法。

要求是：

*   每个单独的用户/场地应列出一次，不得重复。
*   用户/场地应根据他们拥有的活动数量进行排序（针对当前国家，而不是总数）。

这似乎应该相当简单，但是在玩了 , 的各种排列之后，`events.includes(:user)`我一直无法生成我需要的查询。`.select("DISTINCT(ID)")``.order(user.events.length)`

我想我可能陷入了这种思维定势。我真的很感谢社区的一些想法和想法，以确认我是否在正确的机架上。

谢谢！

**编辑**

在我多想之后，我认为我的问题来自于 Country 和 User 之间的两个关联，一个通过 Event 的关联，以及一个作为地址一部分的直接关联。我已经更新了上面的模型描述。

因此，在我的国家显示页面上，如何确保我列出通过事件而不是通过地址与国家相关联的用户？

我也得到了重复的用户。我尝试过使用`.uniq?`，但在某些情况下会返回错误，`'nil' is not an ActiveModel-compatible object that returns a valid partial path.`我也尝试过使用`:select => "DISTINCT(ID)"`，到目前为止似乎更合适。但是，就它们与数据库交互的方式而言，这两种方法有什么区别呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:44:14.883

使用`:through`选项`:has_many`来快速访问您的深度关联记录：

```
Country
  has_many :states
  has_many :cities, through: :states # <-
  has_many :events, through: :cities # <-
  has_many :users, through: :events # <-
end

State
  belongs_to :country
  has_many :cities
  has_many :events, through: :cities # <-
  has_many :users, through: :events # <-
end

City
  belongs_to :state
  has_many :events
  has_many :users, through: :events # <-
end 
```

您可以简单地键入：`@country.users`.

**升级版：**

要获取国家/地区事件的所有用户，请尝试：

```
User.where(id: @country.events.uniq.pluck(:user_id)) 
```

# iphone - 协议链

> ID：10135434
> 
> 赞同：2
> 
> 时间：2012-04-13T04:56:00.123
> 
> 标签：iphone, objective-c, xcode, ios5

是否可以实现协议链接？

例如，我正在定义一个新协议（**ProtocolA**），并且我想确保它只能应用于符合**ProtocolB**的对象。所以像...

```
@protocol ProtocolA <NSObject<ProtocolB>>
@end 
```

**问题**

目标 C 允许这种行为吗？如果没有，是否有我应该注意的设计模式来达到类似的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T04:58:43.267

不要使用内嵌协议（格式不正确），只需用逗号分隔每个单独的协议，如下所示：

```
@protocol ProtocolA <NSObject, ProtocolB>
@end 
```

这是完全合法的。事实上，数百个 UIKit 协议都是按照这些思路声明的。

# css - 我应该使用 JPG 还是 PNG 作为平铺背景（背景重复）？

> ID：10135435
> 
> 赞同：2
> 
> 时间：2012-04-13T04:56:06.513
> 
> 标签：css, image, background-repeat, image-rendering

我阅读了有关该主题的几个问题，我看到的一般反馈是`JPG`s 用于照片，`PNG`s 用于其他所有内容：

> 在以下情况下应使用 PNG：
> 
> *   您需要透明度（1 位或 alpha 透明度）
> *   无损压缩效果很好（例如图表或徽标，或计算机生成的图像）
> 
> 在以下情况下应使用 JPEG：
> 
> *   无损压缩效果不好（比如照片）
> *   需要全彩
> 
> GIF 应该在以下情况下：
> 
> *   PNG 不可用，例如在非常旧的软件或浏览器上
> *   动画是必要的

但是，这些讨论似乎更适合图像下载。我的问题更适合图像渲染。我打算在 x 和 y 方向重复背景...

```
background-image: url("/path/to/image.jpg");    /* repeat-x & repeat-y */ 
```

...我可以将我的图像存储为`JPG`~13K 或`PNG`~50K。因此，尽管有大约 40K 的差异，但浏览器将能够非常快速地提取此图像，因为它相对较小。但是当浏览器在页面上呈现图像时，这种差异是否重要，尤其是因为它是重复的背景？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T05:46:48.253

**JPG**更适合低带宽图像 - 但是它不那么清晰，因此不太适合 GUI。

**JPG**文件可以保存为更小的文件大小，从而实现更快的交易和在线交付。

**JPG**可以以不同的压缩级别保存（通常从 1 到 12，12 是更高的质量）。

**PNG**更适合颜色数量较少的清晰图像，

**PNG**支持 100% 透明度。无需保存到 PSD（Photoshop 文档）以保持透明度。

**PNG**支持具有基本效果和格式的图层

您可以继续保存确切的**PNG**文件，并且不必担心每次都会丢失图像质量。

通常，JPG 用于照片和图片，而 PNG 适用于计算机生成的图形、徽标、网络图标等。

[查看有关 JPG 与 PNG 的更多详细信息](http://www.arecintophotography.com/blog/photoshop/raw-vs-jpg-vs-png-whats-best-for-me)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T05:01:49.443

首先，下载图像和在浏览器中渲染它没有区别。为了让浏览器呈现图像，必须完整下载它。

图像重复的事实不是很重要。与下载图像的时间相比，渲染图像所花费的时间是微不足道的。

图像越小越好。您引用的经验法则将有助于进行猜测，但您始终可以尝试两种选择，看看哪个更小，同时又不失质量。

# android - 番石榴事件总线不工作

> ID：10135437
> 
> 赞同：4
> 
> 时间：2012-04-13T04:56:30.383
> 
> 标签：android, guava, event-bus

我正在尝试在 Android 中使用 Guava 事件总线，但我订阅的事件似乎不起作用......我做错了什么？

这是我的活动：

```
package test.eventbus;

import com.google.common.eventbus.EventBus;
import com.google.common.eventbus.Subscribe;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class EventBusTestActivity extends Activity {

    EventBus eventbus = new EventBus();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        eventbus.register(this);
        eventbus.post("message");
    }

    @Subscribe
    void testEvent(Object bla) {
        Log.d("EventBus Event", bla.toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T07:54:40.747

订阅功能需要公开才能工作。哎呀

```
@Subscribe
public void testEvent(Object bla) {
    Log.d("EventBus Event", bla.toString());
} 
```

# matlab - 存储 Parfor 循环中计算的结构变量 - MATLAB

> ID：10135438
> 
> 赞同：1
> 
> 时间：2012-04-13T04:56:30.773
> 
> 标签：matlab, parallel-processing

目前我有一个 parfor 循环对 MATLAB 中的结构进行计算。虽然我的代码有点长，但可以使用以下示例对其进行模拟：

```
a.test = [1 2 3];
result = [];

parfor i = 1:3
  c = a;
  c.test(2) = round( rand() );

  if c.test(2) == 1
     %# Store c in result
  end
end

disp(result.test) %# Should show [1 1 3] 
```

a（因此 c）是一个非常大的结构，因此存储每次迭代对我来说是不可行的（由于内存限制）。

理想情况下，我希望能够将 c 直接存储到我在 parfor 循环之前初始化的变量中。查看 MATLAB 的[示例：使用自定义归约函数](http://www.mathworks.co.uk/help/toolbox/distcomp/brdqtjj-1.html)，我可以看到可以存储给定的迭代变量（无需存储每次迭代），但我并不完全理解他们的方法。我对它们的函数如何产生 2 个单独的输出变量（似乎）感到困惑，而该函数只定义了一个输出变量。

我确信这是一个非常常见的问题，但到目前为止，我的搜索都没有产生任何有效的结果。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:58:52.167

您链接到的示例不是您想要的。但是，可以只存储“好”的结果。这是一个简单的例子：

```
A=zeros(0,2); %# initialize A with no rows, two columns
parfor i=1:6
   tmp = rand(1); %# create some result
   if tmp > 0.5 %# store only part of the results
      A = [A;[tmp,i]]; %# store also the iteration number, in case it matters
   end
end
>> A

A =

    0.6497    2.0000
    0.5052    4.0000
    0.9993    5.0000 
```

# clojure - Lein Clojure 1.3 与 Clojure 1.2.1

> ID：10135440
> 
> 赞同：1
> 
> 时间：2012-04-13T04:56:52.573
> 
> 标签：clojure, leiningen

我承认这个问题措辞有点糟糕。请让我知道我应该运行哪些命令来提供更多信息，我会提供。

背景：我已经使用 Clojure 大约 1 年了。主要只是通过clojure repl。现在，我开始使用 Lein。

但是，它 leon 不喜欢我的一些代码。这是我掌握的信息：

```
$ lein version
Leiningen 1.7.1 on Java 1.6.0_29 Java HotSpot(TM) 64-Bit Server VM 
```

当我手动运行 clojure 时，我得到：

```
Clojure 1.3.0
user=> (clojure-version)
"1.3.0" 
```

当我跑

```
$ lein repl
REPL started; server listening on localhost port 12572
user=> (clojure-version)
"1.2.1" 
```

现在 - 我该如何解决这个问题？我希望 leon 使用 1.3.0，而不是 1.2.1

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:06:53.537

该`project.clj`文件列出了 lein 项目的依赖项，包括 clojure 的版本。所以只需放入`[org.clojure/clojure "1.3.0"]`依赖向量而不是`[org.clojure/clojure "1.2.1"]`. 这是一个准系统示例：

```
(defproject myproject "0.5.0-SNAPSHOT"
  :description "A project for doing things."
  :url "http://github.com/technomancy/myproject"
  :dependencies [[org.clojure/clojure "1.3.0"]]) 
```

[他们是 Leiningen 的github](https://github.com/technomancy/leiningen/blob/preview/sample.project.clj)上的一个更详细和带注释的示例

# git - git 错误：“远程端意外挂断，(..path..) 中的字符无效”

> ID：10135445
> 
> 赞同：5
> 
> 时间：2012-04-13T04:57:49.493
> 
> 标签：git, tortoisegit, git-bash

我在我的 Windows 机器上收到此错误，都来自 tortoiseGIT/GIT UI/命令行

```
fatal: invalid characters in /apps/saturn
fatal: The remote end hung up unexpectedly

git did not exit cleanly (exit code 128) 
```

有人可以建议它有什么问题，以及错误消息指的是哪些无效字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T21:52:32.277

我从来没有在Windows系统下使用过git，但是Linux perror说

```
> perror 128
OS error code 128:  Key has been revoked 
```

因此，也许您在登录到您已远程配置的外部主机时遇到了一些问题。

# c# - 无法将“System.Windows.Forms”引用添加到我的 WCF 服务库

> ID：10135447
> 
> 赞同：1
> 
> 时间：2012-04-13T04:58:09.470
> 
> 标签：c#, wcf, serialization

我无法添加`System.Windows.Forms`到我的 WCF 服务库。

我想`List<ListViewItem>`从我的方法中返回一个`GetItems(string path)`，我也尝试添加引用`System.Windows.Forms`但没有发现它看起来像 WCF 服务库不支持它。

有什么想法我该怎么做？

```
namespace WcfServiceLibrary1
{
    [ServiceContract]
    public interface IFileManager
    {
        [OperationContract]
        List<ListViewItem> collection(string path);
    }
} 
```

这是我的`Item.cs`课：

```
namespace WcfServiceLibrary1
{
  [DataContract]
  public class Item
  {
    [DataMember]
    public string name;
    [DataMember]
    public string path;
    [DataMember]
    public long size;
    [DataMember]
    public DateTime date;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T05:16:43.127

WCF 被设计成一个**可互操作**的服务平台，因此我建议**不要**使用 .NET 特定的数据类型，例如`ListViewItem`作为服务的返回类型。毕竟，PHP 或 Ruby 客户端将如何处理这样的对象？

相反：使用您的`Item`类，从您的 WCF 服务返回一个列表，然后将其留给调用应用程序`ListViewItem`根据需要将其转换为 s....

另外：`ListViewItem`从您的 WCF 服务返回会**严重**限制该服务的功能。如果某些客户想要获取该数据，但以其他方式（不是在 a 中`ListView`）呈现它，他们将无法再使用该服务调用.....通过**仅返回数据元素**（如您的`Item`）类，您离开由调用者决定如何处理该数据，以及如何在屏幕上显示它。我认为这是**一件好事**，不应该改变！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:20:03.200

您不应该从 WCF 服务返回表单控件或控件列表。返回类型可以是 Datacontract 、 Messagecontract 、 .NET 原始类型以及可以通过网络进行序列化的类型。

WCF 服务应该公开数据而不是 UI 控件。它依赖于客户端应用程序以任何形式显示该数据。您应该创建 Windows 客户端以在列表视图中显示数据。

# c# - 添加了 OracleCommand 参数但抛出异常

> ID：10135449
> 
> 赞同：2
> 
> 时间：2012-04-13T04:58:13.540
> 
> 标签：c#, oracle, parameters

请您耐心看一下我将在下面编写的代码。我有两种方法：

```
 public void AddInParameters(string parameterName, OracleDbType dbtype,
                                                                 object value)
    {
        OracleParameter myparameter = new OracleParameter();
        myparameter.ParameterName = parameterName;
        myparameter.OracleDbType = dbtype;
        myparameter.Value = value;
        myparameter.Direction = ParameterDirection.Input;
        this._parameters.Add(myparameter);
    } 
```

和

```
 public void AddOutParameter(string parameterName, OracleDbType dbType)
    {
        OracleParameter myparameter = new OracleParameter();
        myparameter.ParameterName = parameterName;
        myparameter.OracleDbType = dbType;
        myparameter.Direction = ParameterDirection.Output;
        this._parameters.Add(myparameter);
    } 
```

私有字段_parameters 是List 类型。如您所见，这些方法分别创建 Input 和 Output 参数并将它们添加到 _parameters 列表中。然后我有以下方法，它将采用 OracleCommand 并将列表中的所有参数添加到其中：

```
 private void ProcessParameters(OracleCommand command)
    {
        foreach (OracleParameter myparameter in this._parameters)
        {
            command.Parameters.Add(myparameter);
        }
    } 
```

这是我返回 OracleDataReader 的最终方法：

```
 public OracleDataReader ExecuteReader(string commandText, CommandType commandType)
    {
        OracleDataReader returnValue = null;
        OracleCommand myCommand = this.CreateCommand(commandText, commandType);
        this.ProcessParameters(myCommand);
        try
        {

            myCommand.Connection.Open();
            returnValue = myCommand.ExecuteReader(CommandBehavior.CloseConnection);
        }
        catch (Exception ex)
        {

            throw new DatabaseException(ex.Message);
        }

        return returnValue;

    } 
```

所有这些方法都在数据访问层类库中。在我想调用 ExcuteReader 方法的类中，我按顺序执行以下操作：

1.  我首先使用 AddInParameters 和 AddOutparameters 添加参数
2.  然后我调用 ExecuteReader 方法。

但我有时会得到“错误数量或类型的参数”Oracle 异常。如果我拒绝使用这些方法并继续使用标准方式（创建连接，然后是命令，然后逐个添加参数，打开连接并最后调用 OracleCommand.ExecuteReader 方法），我不会收到该错误。奇怪的是我在我的应用程序入口处使用了这些方法，但在那里我从来没有遇到任何异常。我在执行 ExecuteReader 方法之前设置了一个断点来检查参数列表，一切似乎都很好，我的意思是所有参数都设置正确。你能告诉我我在这里缺少什么吗？

PS 我使用 .NET 的 Oracle 数据提供程序（Oracle.Data.Access.dll）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:13:30.900

你试过用`OracleCommand.BindByName = true`吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T06:57:13.357

花了我 1.5 天的时间找到解决问题的方法真的感觉很好。正如我已经说过的，Oracle 确实令人头疼。这就像一个“我不要这个，我不要那个，我要这样”的女孩。这么多细节，这么多需要考虑的事情。那些为甲骨文疯狂的人说，这就是甲骨文强大的原因。

经过长时间的战斗和绝望的搜索，@Dummy01 建议我设置 OracleCommand.BindByName=true。我实际上并没有立即尝试。我在 ODP.NET 文档中查找了该属性并查看了我发现的内容：

***如果 OracleCommand BindByName 属性设置为 false（默认），则 ODP.NET 假定参数已根据其位置进行绑定，并且所有参数均已按正确顺序指定。***

所以这意味着，如果在存储过程中参数的顺序是 p1、p2、p3，则必须以相同的顺序将这些参数添加到 OracleCommand.Parameters。否则会发生两件坏事：

1.  更好的情况是你得到例外。假设您按 p1、p3、p2 的顺序传递它们，并且 p2 是 number 类型，而 p3 是 refcursor。数据库中的存储过程期望第二个参数是一个数字，第三个参数是 refcursor。但是由于参数传递的顺序与原始顺序不同，类型将不兼容，因此会引发异常。如果这些类型不同，那么您很幸运。

2.  第二种也是最坏的情况是 p2 和 p3 都是相同的数据类型。我相信你可以猜到会发生什么：是的，你会为参数输入错误的值，这将导致 99% 的结果与预期的不同。

    我希望任何处理 Oracle 存储过程的人都考虑到这一点，否则他们可能会失去工作。祝你好运

# php - Symfony 2 安全总是返回 Bad Credentials 错误

> ID：10135452
> 
> 赞同：5
> 
> 时间：2012-04-13T04:58:37.130
> 
> 标签：php, security, authentication, symfony, doctrine-orm

我已经按照[官方文档](http://symfony.com/doc/current/book/security.html)使用 symfony 2 标准发行版提供的安全性来验证我的用户，通过 Doctrine2 将它们持久保存在数据库中，关于配置似乎一切正常，但我总是得到同样的错误：`Bad Credentials`。

我已经使用 DoctrineFixturesBundle 加载了一些用户和角色，并且似乎可以完成加载。所以，我认为问题出在身份验证过程中的某个地方，这对我来说是透明的......我不知道如何调试它，希望有任何帮助......

谢谢！如果您需要任何其他代码片段，请告诉我，我将编辑问题。我没有在这里粘贴代码，以使问题更具可读性......

**编辑2**：正如[@Dieter](https://stackoverflow.com/users/707968/dieter)所建议的，我检查了日志，似乎没有数据传递给查询，这很奇怪，因为我遵循了他们在[食谱](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)中提到的每一个约定......这也是我的定义登录表格。对不起，很长的问题！任何帮助将不胜感激！

LoginType.php 的片段：

```
 public function buildForm(FormBuilder $builder, array $options) {
    $builder->add('_username', 'text', array(
        'label' => 'Email ',
        'required' => true,
    ));
    $builder->add('_password', 'password', array(
        'label' => 'Password ',
        'required' => true,
    ));
    $builder->add('_remember_me', 'checkbox', array(
        'label' => 'Remember me ',
        'required' => false,
    ));
  } 
```

app/logs/dev.log 输出：

```
[2012-04-17 03:43:01] event.DEBUG: Notified event "kernel.request" to listener
                      "Symfony\Component\Security\Http\Firewall::onKernelRequest".
                      [] []
[2012-04-17 03:43:01] doctrine.DEBUG: SET NAMES UTF8 ([]) [] []
[2012-04-17 03:43:01] doctrine.DEBUG: SELECT t0.id AS id1, t0.username AS
                      username2, t0.salt AS salt3, t0.password AS password4,
                      t0.is_active AS is_active5, t0.mailer_id AS mailer_id6
                      FROM SfUser t0 WHERE t0.username = ? (["NONE_PROVIDED"])
                      [] []
[2012-04-17 03:43:01] security.INFO: Authentication request failed: Bad
                      credentials [] []
[2012-04-17 03:43:01] security.DEBUG: Redirecting to / [] [] 
```

**编辑**：由于我的 pastebin 链接已过期，并且正如 Peter Polfey 所建议的，这是代码：

这是我的 security.yml

```
security:
    encoders:
        ElCuadre\AccountBundle\Entity\User: sha512

    role_hierarchy:
        ROLE_ADMIN:       [ROLE_USER, ROLE_PROVIDER]
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_PROVIDER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        user_db:
            entity: { class: ElCuadre\AccountBundle\Entity\User, property: username}

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        secured_area:
            pattern:  ^/
            anonymous: ~
            form_login:
                login_path: /
                check_path: /login_check
            logout:
                path:   /logout
                target: /
            remember_me:
              key:      %secret%
              lifetime: 3600
              path:     /
              domain:   ~ # Defaults to the current domain from $_SERVER

    access_control:
        - { path: ^/$, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

和我的控制器：

```
public function loginAction() {
    $request = $this->getRequest();
    $session = $request->getSession();

    // get the login error if there is one
    if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
      $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
    } else {
      $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
      $session->remove(SecurityContext::AUTHENTICATION_ERROR);
    }

    $form = $this->createForm(new LoginType());
    return $this->render(
                    'ElCuadreAccountBundle:Auth:login.html.twig',
                     array(
                         'form'         => $form->createView(),
                         'last_username' => $session->get(
                                              SecurityContext::LAST_USERNAME),
                         'error'       => $error,
                         )
    );
} 
```

这是夹具文件的代码：

```
<?php

namespace ElCuadre\AccountBundle\DataFixtures\ORM;

use Doctrine\Common\Persistence\ObjectManager;
use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\DataFixtures\AbstractFixture;
use ElCuadre\AccountBundle\Entity\User;
use ElCuadre\AccountBundle\Entity\Role;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

class LoadAccountData extends AbstractFixture implements FixtureInterface, ContainerAwareInterface {

  private $container;

  public function setContainer(ContainerInterface $container = null) {
    $this->container = $container;
  }

  private function loadRole($manager, $name, $roleName) {
    $role = new Role();
    $role->setName($name);
    $role->setRole($roleName);
    $manager->persist($role);
    $manager->flush();
    return $role;
  }

  private function loadUser($manager, $username, $password, $roles) {
    $user = new User();
    $user->setUsername($username);
    $encoder = $this->container->get('security.encoder_factory')->getEncoder($user);
    $user->setPassword($encoder->encodePassword($password, $user->getSalt()));
    foreach ($roles as $role) {
      $user->addRole($role);
    }
    $manager->persist($user);
    $manager->flush();
  }

  public function load(ObjectManager $manager) {
    // Roles:
    $roleUser = $this->loadRole($manager, 'user', 'ROLE_USER');
    $roleProvider = $this->loadRole($manager, 'provider', 'ROLE_PROVIDER');
    $roleAdmin = $this->loadRole($manager, 'admin', 'ROLE_ADMIN');
    $roleSuperAdmin = $this->loadRole($manager, 'superadmin', 'ROLE_SUPER_ADMIN');
    // Users:
    $this->loadUser($manager, 'user@elcuadre.com', 'userpass', $roleUser);
    $this->loadUser($manager, 'provider@elcuadre.com', 'providerpass', $roleProvider);
    $this->loadUser($manager, 'admin@elcuadre.com', 'adminpass', $roleAdmin);
    $this->loadUser($manager, 'superadmin@elcuadre.com', 'superadminpass', $roleSuperAdmin);
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T08:50:00.243

如果我发生类似的错误，那么 app/logs/dev.log 或 /var/log/apache2/error.log 等系统日志中总会显示某种问题。
你看到那里有什么弹出来的吗？

编辑：作为对您的新信息的反应

您自己构建该表单是否有原因？如您参考的文档中所述，您可以制作树枝模板并将字段命名为“_username”和“_password”。那么魔法应该为你完成。

# .htaccess - 没有 `www` 域无法工作

> ID：10135456
> 
> 赞同：33
> 
> 时间：2012-04-13T04:58:50.383
> 
> 标签：.htaccess, web, dns, subdomain

`www`当我在没有(like )的情况下输入我的域名时`http://example.com`，它不起作用并给出错误消息。但是，当我添加`www`到它（如`http://www.example.com`）时，它可以工作。

难道它不应该双向工作（有和没有`www`）？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-07-25T16:31:19.553

您只需将以下代码添加到您的根`.htaccess`文件中：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-18T10:42:42.613

使用当前版本的 apache，您需要执行以下操作，与以前的版本相比，它发生了变化：

```
cd /etc/apache2/sites-enabled 
```

现在找到你的域的配置文件并编辑它（后面的前三行`<VirtualHost *:80>`是我们需要的）：

```
<VirtualHost *:80>
        ServerName www.yourdomain.com
        ServerAlias yourdomain.com *.yourdomain.com
        ServerAdmin webmaster@localhost

        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>

</VirtualHost> 
```

现在保存对文件的更改后，您应该重新加载 Apache 我们的服务器配置：

```
service apache2 reload 
```

它会工作的！

PS您可能还不想添加`*.yourdomain.com`到`ServerAlias`行尾。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-18T14:42:48.750

解决这个问题

*   假设你想要 `mysubdomain.domain1.com`

*   转到您的网络面板（cpanel、vestapanel 等）中的 dns 记录设置`domain1.com`

*   添加新`A record`的并用 // @ 表示没有**www** 如果你也想要`ip`www**然后**添加另一个新的并用**www替换**`domain1.com``@`****`A record``@`****

*******   保存

    *   等待 dns 更改可能需要几个小时****** 

 ******* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T09:04:04.740

或者，如果您使用的是 GoDaddy 和 google 应用程序，您可以按照以下步骤解决此问题：

1.  转到 Google Apps 并登录到域管理。

2.  然后点击域设置。

3.  然后点击域名。

4.  然后单击突出显示的单词以通过谷歌应用程序设置重定向，您应该会在 3 小时或 MAX 2 天内看到它完成（尽管在最罕见的情况下通常不会超过一天）。只需按照简单的英文说明进行操作，然后你应该看到它完成了。

更多细节和参考：

[http://www.techproceed.com/2014/05/custom-domain-setup-on-blogger-with.html](http://www.techproceed.com/2014/05/custom-domain-setup-on-blogger-with.html)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-04-14T16:12:55.660

您需要将任何完整的 url 更改为路径。如果您的 php 包含或其他进程使用 url 链接，它只会以一种方式工作。

```
$.ajax(
{       
    url:'/LAYOUT/process.php'
} 
```

与完整网址相反

```
$.ajax(
{       
    url:'https://www.yourdomain.com/LAYOUT/process.php'
} 
```

使用简单的路径将允许它在有或没有 www 的情况下以两种方式工作。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-09-22T16:44:23.680

1st去你的域名提供商网站。第二次去dns记录。第三个添加A记录IP去这个[链接](https://support.google.com/blogger/answer/1233387)

并复制4A记录并添加dns。******

# android - Android SDK 替代版本

> ID：10135460
> 
> 赞同：0
> 
> 时间：2012-04-13T04:59:09.357
> 
> 标签：android, eclipse, sdk

我有一个正在处理的项目（[Py4a](http://code.google.com/p/python-for-android/)) 我已经到了我希望做两个版本的项目的地步……一个下载外部文件以运行，一个包含所有额外文件。这两种方法各有利弊，所以我想用大部分共享代码创建两个构建，我的第一次尝试是将一体化版本构建为一个单独的项目，它扩展了原始的一些类，并包含原始构建路径中的项目。可以编译，但是尝试运行它会导致 android 作为依赖项加载到原始项目中，然后在启动时找不到正确的类。我可以完全复制原始项目并进行修改，但这涉及维护两组通用代码，我不想这样做。有没有首选的方法或聪明的技巧来做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:59:41.660

对于您的情况，我可以想到两种明显的方法：

1.  将您的“核心”代码设置为[库项目](http://developer.android.com/guide/developing/projects/index.html)，并创建两个使用该库的 Android 项目。这将允许您维护一个单一的代码库，同时提供项目特定的资产。
2.  创建和`ant`任务将根据提供的配置文件交换特定的代码和/或资产。

第一个选项设置起来肯定更快，如果您只需要几个叉子，那将是我的首选。ant 方法可能更适合连续自动执行多个构建，并且如果您要使用一大堆不同但非常相似的分叉，它可能会更加灵活。

# javascript - 在配置使用 JavaScript 对象文字构建的小部件时，如何避免代码重复？

> ID：10135461
> 
> 赞同：0
> 
> 时间：2012-04-13T04:59:20.200
> 
> 标签：javascript, jquery, kendo-ui

我知道可能有一些非常小而简单的继承或扩展解决方案，但我希望这个问题不仅仅对我有益。而且更快。

我有例如以下代码来设置[Kendo UI 网格](http://www.kendoui.com/documentation/ui-widgets/grid/overview.aspx)。我需要对同一视图上的两个网格完全重复此代码，除了`transport.read.data`对象中的一个参数差异。我意识到我可以将`model`和`columns`定义分解为共享对象，但我想最终共享整个网格配置。也许一个叫做 jQuery 的扩展`myUserKendoGrid`？

```
 $("#availableUsersGrid").kendoGrid({
        dataSource: {
            transport: {
                read: {
                    url: "/Role/AvailableUsersJson",
                    data: { roleId: $("#Id").val() },
                    type: "GET"
                }
            },
            schema: {
                model: {
                    id: "Id",
                    fields: {
                        Id: { editable: false },
                        UserName: { editable: false },
                        EmployeeRefNum: { editable: false },
                        EmployeeSurname: { editable: false },
                        EmployeeFullNames: { editable: false }
                    }
                }
            }
        },
        columns: [
                { field: "UserName", title: "User Name" },
                { field: "EmployeeRefNum", title: "Emp. No." },
                { field: "EmployeeSurname", title: "Surname" },
                { field: "EmployeeFullNames", title: "Name" }
        ],
        selectable: "multiple, row",
        editable: false,
        sortable: true,
        pageable: true
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:18:17.610

**您可以通过jQuery**`.extend()`的方法简单地克隆您的配置。例如：

 **```
var superDuperAwesomeConfiguration = {
    // moar configs go here, yo!
};

var copyCatConfigs = jQuery.extend(true, {}, superDuperAwesomeConfiguration);

// modify copyCatConfigs properties here

$("#gridA").kendoGrid(superDuperAwesomeConfiguration);
$("#gridB").kendoGrid(copyCatConfigs); 
```**

# design-patterns - 控制反转的正式定义是什么？

> ID：10135464
> 
> 赞同：-2
> 
> 时间：2012-04-13T04:59:36.410
> 
> 标签：design-patterns, dependency-injection, inversion-of-control, object-oriented-analysis

> **可能重复：**
> [什么是控制反转？](https://stackoverflow.com/questions/3058/what-is-inversion-of-control)

我总是听到用模糊的术语描述的控制反转，而且几乎总是通过例子而不是正式的定义

一方面，我听说它是​​在对象编程到抽象方面描述的，并放弃了对显式实例化新对象及其对象图的控制权，而不是请求将其依赖项注入到运行时条件中的对象

然后我听到它在针对框架的编程方面进行了解释，其中程序员放弃了控制流以支持对扩展点进行编码（例如事件和回调）

在这两种情况下到底是什么被倒置了，它们有什么共同点，它们是 IoC 的等效示例。我发现很难找到一个普遍接受的定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:09:20.573

这当然是一个合理的解释：

[http://en.wikipedia.org/wiki/Inversion_of_control](http://en.wikipedia.org/wiki/Inversion_of_control)

我拥有这本书：我推荐它，因为它很好地涵盖了许多设计原则，包括 IoC：

[C# 中的敏捷原则、模式和实践：Martin Fowler、Micah Fowler](https://rads.stackoverflow.com/amzn/click/com/0131857258)

您可能还会发现这些链接很有帮助：

*   [简单 C# 中的 DI 和 IOC 示例](https://stackoverflow.com/questions/9219012/di-and-ioc-examples-in-simple-c-sharp)

*   [控制反转<依赖注入](https://stackoverflow.com/questions/3226605/inversion-of-control-dependency-injection)

两个精辟的“解释”：

*   国际奥委会有时被称为“好莱坞原则”：不要打电话给我们，我们会打电话给你

*   IoC = 婚姻；国际奥委会容器=妻子

# objective-c - 从 iphone SDK 中的 Hotmail、Yahoo、LinkedIn、MySpace API 导入联系人列表

> ID：10135465
> 
> 赞同：0
> 
> 时间：2012-04-13T04:59:40.733
> 
> 标签：objective-c, ios4, ios5, linkedin, myspace

任何人都可以帮助如何从 Hotmail、Yahoo、LinkedIn 和 Myspace API 导入联系人列表。

从前两天开始我一直在谷歌搜索，但没有运气。

我在网上找到了一些讨论，但这对我没有用。

[http://www.linkedin.com/answers/using-linkedIn/ULI/702062-20578814](http://www.linkedin.com/answers/using-linkedIn/ULI/702062-20578814) http://www.linkedin.com/answers/marketing-sales/sales/customer-relationship-management/MAR_SLS_CRM/645042-9410989

[http://www.linkedin.com/answers/using-linkedIn/ULI/929807-1834502](http://www.linkedin.com/answers/using-linkedIn/ULI/929807-1834502)

任何人都可以在这方面给出任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:00:39.583

**雅虎**

这是雅虎联系人 API：http: [//developer.yahoo.com/social/contacts/](http://developer.yahoo.com/social/contacts/)

您将调用他们的 REST API，并提供 YQL 查询。它返回 JSON。JSON 库内置于最新的 iOS SDK 中。

**领英**

同样，LinkedIn 有：developer.linkedin.com/documents/linkedin-api-resource-map

LinkedIn API 似乎正在返回 XML，因此您需要一个 XML 解析库。

这是对各种可用 XML 解析库的精彩描述和比较：raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project。如果您不确定，请使用 DOM 解析器——至少对我来说它更直观。我希望你记得如何遍历树。

**Hotmail、MySpace、其他**

寻找 REST API——这些是通用的基于 Web 的 API，适用于任何客户端。您可以进行服务器到服务器的通信，以及客户端与服务器的通信（浏览器内 (JS) 和本机应用程序）。

**现在您在内存中有这些数据**

您可以遍历它，并使用地址簿 API 将联系人添加到您的 iOS 设备：developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html

顺便问一下，什么是 MySpace？

# xml - 如何在 perl 中拆分字符串，保留分隔符，并在分隔符之间进行拆分？

> ID：10135466
> 
> 赞同：0
> 
> 时间：2012-04-13T04:59:46.483
> 
> 标签：xml, regex, perl, split

我的问题有点罗嗦，所以我会尝试用一个例子来解释。

我有一个有点类似于我需要解析的 XML 的文件，尽管不完全一样。文件中的元素通常显示为类似于 XML 格式，例如

```
<person><greeting>hello</greeting><goodbye>bye</goodbye></person> 
```

我想把文件分成单独的标签集，这样一个元素就是

```
<greeting>hello</greeting> 
```

另一个是

```
<goodbye>bye</goodbye> 
```

自然对于一个空元素，`<person>`并且`</person>`最终将成为它们自己的元素，我完全可以接受，因为我想如何解析整个文件。

我遇到的问题是如何最好地将整个文件拆分为一个数组，因为文件中根本没有换行符，它是如你所见的那样写出来的。我试着这样做

```
my @array = split(/(><)/, $file) 
```

但问题是它不会将尖括号保留为关联标签的一部分，而是将它们分开。有没有办法让我在 > 和 < 字符*之间分割文件？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:08:57.107

我不确定这是否是最佳解决方案，但要直接回答您的问题，您可以使用[lookbehind 和 lookahead assertions](http://www.regular-expressions.info/lookaround.html)在角度之间进行分割。

```
my @array = split(/(?<=>)(?=<)/, $file) 
```

不同的是。他们不消耗`><`零件，它们与两者之间的位置相匹配。

另一个想法是使用反向引用来匹配正确的（它匹配具有此名称的第一个结束标签，当嵌套相同的标签时这是错误的）结束标签，像这样

```
<([^>]*)>(.*?)</\1> 
```

[在 Regexr 上](http://regexr.com?30kki)查看

您在此正则表达式中有两个引用。第一个用于匹配结束标签，在第二个中您将找到标签的内容。

当然它首先会匹配“人”标签，但你会在`$2`. 您必须在 $2 上递归使用正则表达式，直到结果为空数组。

# zsh - 在循环中定义 zsh 函数会重新分配 pre

> ID：10135473
> 
> 赞同：1
> 
> 时间：2012-04-13T05:00:26.863
> 
> 标签：zsh, zshrc

我正在尝试制作一个工具，根据一些命名目录在 zsh 中定义函数。目前我有这个：

```
while read line; do
    p=( `echo $line | egrep -o -e "[^ ]+"` )
    alias go${p[1]}="cd ${p[2]}"
    put${p[1]}()
    {
        mv $1 ${p[2]}
    }
done < "$HOME/.pro_targets" 
```

这适用于别名，但在命令行上输入 put[target] 会给我

`mv: cannot mv 'wol.sh' to '$HOME/work/tagfs/fuse-tutorial/src': No such file or directory`

指的是 的最后一个值`$p`。我认为我需要该函数围绕变量关闭`${p[2]}`并根据它定义时的环境进行替换，以便它可以随每个定义而变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:09:36.580

除非您在当前工作目录中有一个字面名称为“$HOME”的目录，否则这听起来不像是一个真正的目录。

发生的事情是环境替换（即翻译$HOME-> /home/username）没有发生在文件的内容上。

尝试：

```
envsubst < "$HOME/.pro_targets" | \
  while read line; do
      p=( `echo $line | egrep -o -e "[^ ]+"` )
      alias go${p[1]}="cd ${p[2]}"
      put${p[1]}()
      {
          mv $1 ${p[2]}
      }
  done 
```

如果您只想 $HOME 工作，请尝试

```
env -i HOME="$HOME" envsubst < "$HOME/.pro_targets" | ... 
```

# ruby-on-rails - 如何覆盖 Rails 和 django 中的库

> ID：10135479
> 
> 赞同：1
> 
> 时间：2012-04-13T05:01:31.427
> 
> 标签：ruby-on-rails, django

如果当前的第三方库不能满足你的要求，如何覆盖它并做一些定制？

在rails中，库来自gem，只需要在配置文件中，如何将库的源代码移动到app文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:02:53.583

使用 Django，您可以将应用程序的副本放入项目目录并进行适当的修改。我将假设 Rails 可以类似地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:12:43.473

Rails：将修改后的版本放到`./vendor`. 它已经处于加载顺序，比系统范围内安装的库具有更高的优先级

Django（和一般的python）：为这些库创建一些子目录并将其添加到`PYTHONPATH`环境变量中，在其他值之前。

# android - Android 复选框样式

> ID：10135499
> 
> 赞同：48
> 
> 时间：2012-04-13T05:04:17.887
> 
> 标签：android, android-layout, checkbox, styles, themes

我是 android 新手，我正在尝试为我的应用程序中的所有复选框设置样式。我的应用程序样式设置为 Theme.Holo，它是深色的，我希望列表视图上的复选框的样式为 Theme.Holo.Light。我不是在尝试创建自定义样式。下面的代码似乎不起作用，根本没有任何反应。我需要这样做，因为我的列表视图具有浅色纸张纹理，并且复选框和复选框文本是白色的，我想要深色。

```
<style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
    <item name="android:checkboxStyle">@style/customCheckBoxStyle</item>
</style>

<style name="customCheckBoxStyle" parent="@android:style/Widget.Holo.Light.CompoundButton.CheckBox">
</style> 
```

如果您为应用程序设置样式，您还可以为单个小部件设置样式吗？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-04-13T11:15:58.773

**注意**：使用 Android 支持库 v22.1.0 并针对 API 级别 11 及更高版本？向下滚动到最后一次更新。

* * *

> 我的应用程序样式设置为 Theme.Holo，它是深色的，我希望列表视图上的复选框的样式为 Theme.Holo.Light。我不是在尝试创建自定义样式。下面的代码似乎不起作用，根本没有任何反应。

起初，系统为什么会表现出这种行为可能并不明显，但当你真正研究机制时，你可以很容易地推断出它。让我一步一步地带你过去。

首先，让我们看看`Widget.Holo.Light.CompoundButton.CheckBox`样式定义了什么。为了让事情更清楚，我还添加了“常规”（非灯光）样式定义。

```
<style name="Widget.Holo.Light.CompoundButton.CheckBox" parent="Widget.CompoundButton.CheckBox" />

<style name="Widget.Holo.CompoundButton.CheckBox" parent="Widget.CompoundButton.CheckBox" /> 
```

如您所见，两者都是空声明，只是简单地包装`Widget.CompoundButton.CheckBox`在不同的名称中。因此，让我们看一下父样式。

```
<style name="Widget.CompoundButton.CheckBox">
    <item name="android:background">@android:drawable/btn_check_label_background</item>
    <item name="android:button">?android:attr/listChoiceIndicatorMultiple</item>
</style> 
```

此样式同时引用背景和按钮可绘制对象。`btn_check_label_background`只是一个 9 补丁，因此在这个问题上不是很有趣。但是，`?android:attr/listChoiceIndicatorMultiple`表示基于**当前主题**的某些属性（这一点很重要）将决定`CheckBox`.

作为`listChoiceIndicatorMultiple`主题属性，您会发现它的多个声明 - 每个主题一个（或者如果它是从父主题继承的，则没有）。这将如下所示（为清楚起见省略了其他属性）：

```
<style name="Theme">
    <item name="listChoiceIndicatorMultiple">@android:drawable/btn_check</item>
    ...
</style>

<style name="Theme.Holo">
    <item name="listChoiceIndicatorMultiple">@android:drawable/btn_check_holo_dark</item>
    ...
</style>

<style name="Theme.Holo.Light" parent="Theme.Light">
    <item name="listChoiceIndicatorMultiple">@android:drawable/btn_check_holo_light</item>
    ...
</style> 
```

所以这才是真正神奇的地方：根据主题的`listChoiceIndicatorMultiple`属性，确定主题的实际外观`CheckBox`。您看到的现象现在很容易解释：由于外观是基于主题的（而**不是**基于样式的，因为这只是一个空定义）并且您继承自`Theme.Holo`，因此您将始终获得`CheckBox`与主题匹配的外观。

现在，如果您想将您`CheckBox`的外观更改为 Holo.Light 版本，您需要获取这些资源的副本，将它们添加到您的本地资产并使用自定义样式来应用它们。

至于你的第二个问题：

> 如果您为应用程序设置样式，您还可以为单个小部件设置样式吗？

当然，它们将覆盖任何活动或应用程序集样式。

> 有没有办法为复选框小部件设置主题（带图像的样式）。（...）反正有没有使用这个选择器：[链接](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable/btn_check_holo_light.xml)？

* * *

**更新：**

让我首先再说一遍，你不应该依赖 Android 的内部资源。您不能随意访问内部命名空间是有原因的。

然而，访问系统资源的方法毕竟是通过名称进行 id 查找。考虑以下代码片段：

```
int id = Resources.getSystem().getIdentifier("btn_check_holo_light", "drawable", "android");
((CheckBox) findViewById(R.id.checkbox)).setButtonDrawable(id); 
```

第一行实际上将返回`btn_check_holo_light`可绘制资源的资源 id。由于我们之前确定这是决定外观的按钮选择器`CheckBox`，我们可以在小部件上将其设置为“可绘制按钮”。结果是版本`CheckBox`的外观`Holo.Light`，无论您在 xml 中的应用程序、活动或小部件上设置什么主题/样式。由于这只设置了可绘制的按钮，因此您需要手动更改其他样式；例如关于文本外观。

下面是显示结果的屏幕截图。顶部复选框使用上述方法（我在 xml 中手动将文本颜色设置为黑色），而第二个复选框使用默认的基于主题的`Holo`样式（即非浅色）。

![显示结果的屏幕截图](../Images/0683bf1949e3b0e2376e6b45e2daeaf0.png)

* * *

**更新2：**

随着[支持库 v22.1.0 的引入](http://android-developers.blogspot.nl/2015/04/android-support-library-221.html)，事情变得简单多了！发行说明中的​​引用（我的重点）：

> Lollipop 添加了通过使用 XML 属性在逐个视图级别覆盖主题的功能`android:theme`- 对于诸如轻活动上的深色操作栏之类的东西非常有用。现在，AppCompat 允许您使用`android:theme`工具栏（弃用`app:theme`之前使用的工具栏），**甚至更好地`android:theme`支持 API 11+ 设备上的所有视图。**

换句话说：您现在可以在*每个视图的*基础上应用一个主题，这使得解决原始问题变得更加容易：只需指定您想为相关视图应用的主题。即在原始问题的上下文中，比较以下结果：

```
<CheckBox
    ...
    android:theme="@android:style/Theme.Holo" />

<CheckBox
    ...
    android:theme="@android:style/Theme.Holo.Light" /> 
```

第一个`CheckBox`的样式就像在深色主题中使用一样，第二个好像在浅色主题中使用，无论为您的活动或应用程序设置的实际主题如何。

当然，您不应再使用 Holo 主题，而应使用 Material。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-04-13T05:13:15.240

也许这会让你满意——

**东西.xml**

```
<CheckBox
    android:text="Custom CheckBox"
    android:button="@drawable/checkbox_selector"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

**选择器**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true" android:drawable="@drawable/star_down" />
    <item android:state_checked="false" android:drawable="@drawable/star" />
</selector> 
```

对于，参考只是参考[here](http://www.hrupin.com/2011/09/how-to-make-android-checkbox-and-radiobutton-custom-style)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-04-14T12:28:08.633

材料设计的正确方法是：

风格 ：

```
<style name="MyCheckBox" parent="Theme.AppCompat.Light">  
    <item name="colorControlNormal">@color/foo</item>
    <item name="colorControlActivated">@color/bar</item>
</style> 
```

布局 ：

```
<CheckBox  
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"
    android:text="Check Box"
    android:theme="@style/MyCheckBox"/> 
```

它将保留 Lollipop+ 上的 Material 动画。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-25T22:34:48.360

也许你想要类似的东西：

```
<style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
    <item name="android:checkboxStyle">@style/customCheckBoxStyle</item>
</style>

<style name="customCheckBoxStyle" parent="@android:style/Widget.CompoundButton.CheckBox">
    <item name="android:textColor">@android:color/black</item>
</style> 
```

注意，textColor 项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T08:35:47.310

在上一个答案中，`<selector>...</selector>`您可能还需要：

```
<item android:state_pressed="true" android:drawable="@drawable/checkbox_pressed" ></item> 
```

# apache - 总是在 URL 后面加上 /

> ID：10135501
> 
> 赞同：0
> 
> 时间：2012-04-13T05:04:31.157
> 
> 标签：apache, .htaccess, seo

我现在有：

```
 RewriteEngine On

    RewriteCond %{HTTP_HOST} !^domain.co.uk$ [NC]
    RewriteRule ^(.*)$ http://domain.co.uk/$1 [L,R=301]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !(.*)/$
    RewriteRule ^(.*)$ http://domain.co.uk/$1/ [L,R=301]

    RewriteRule ^fishing/([^/]*)/([^/]+) fishery.php?url=$2&region=$1 [L]
    RewriteRule ^fishing/([^/]*)/?$ region.php?region=$1 [L]      

    RewriteRule ^fishing?$ fishing.html [L] 
```

我已经添加了所有代码来改进 SEO。删除 www。总是添加尾随 / 等等。现在问题是当我做 domain.co.uk/fishing/ 它加载 region.php 文件而不是 fishing.html

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:05:53.257

好的，对于您的新扩展问题，只需移动

```
RewriteRule ^fishing?$ fishing.html [L] 
```

高于前两个规则，因此首先匹配。

并将其更改为

```
RewriteRule ^fishing/$ fishing.html [L] 
```

因为您正在强制使用斜杠。

您可以在fishing.html 上方添加类似的内容以用于css 等...

```
RewriteRule ^(css|js|images)/([^/]*)/?$ $1/$2 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:11:59.147

你的规则在到达那个位置之前就被其他东西匹配了。您需要重新订购它们。应该首先列出不太具体的内容，然后再列出更具体的内容。

```
RewriteEngine On

RewriteCond %{HTTP_HOST} !^domain.co.uk$ [NC]
RewriteRule ^(.*)$ http://domain.co.uk/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://domain.co.uk/$1/ [L,R=301]

RewriteRule ^fishing/$ fishing.html [L]

RewriteRule ^fishing/([^/]*)/?$ region.php?region=$1 [L]
RewriteRule ^fishing/([^/]*)/([^/]+) fishery.php?url=$2&region=$1 [L] 
```

您的路径`fishing/`实际上符合规则`^fishing/([^/]*)/?$`。因为它以 开头`fishing/`，那么有 0 个或多个不是 a 的字符`/`（有 0, *match*），最后有 0 或 1 `/`（有 0, *match*），到达路径的末尾。

* * *

请记住，通过强制使用斜杠，该路径将成为**工作目录**，因此相对路径将从该目录而不是根目录开始。确保您对 CSS、JS 和图像等内容使用**绝对路径**。

# algorithm - 真的很大的排列列表

> ID：10135509
> 
> 赞同：2
> 
> 时间：2012-04-13T05:05:20.700
> 
> 标签：algorithm, permutation

我的问题不是特定于语言的。我在让循环处理排列时遇到问题。我正在尝试编写一些代码来显示字符串长度的`26^x`所有值。`x`不会提供输入字符串，所以如果`x=1`它会显示*a*到*z*，如果它会`x=2`显示*aa*到*zz*。 *az*被视为与*za*不同。

更具体地说，我想为更长的字符串运行它，长度为 100 多个字符，以尝试查看有多少给定长度的字符串包含单词而不是随机字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:15:53.760

根据对该问题的评论，尝试枚举所有可能的 100 个字符的字符串有些不切实际。

我会建议生成给定长度的随机字符串的替代策略，而不是以结构化方式枚举。就像是：

```
count = 0
for i from 0 to simulation_length:
    random_string = ''
    for j from 0 to string_length:
        random_string += random_char()
    // containsWord(string) checks if the random string contains a word
    // this is tricky in and of itself
    if (containsWord(random_string)) count++
... 
```

只要simulation_length 足够，随机采样将为您提供整个空间的行为表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:17:51.923

> 26^x 其中 x 是字符串的长度...我想为更长的字符串运行它，长度为 100+ 个字符

你应该忘记它。

让我们正确看待事物。英文字母有26个字母，所以100个字符的字符串总数是...

```
3142930641582938830174357788501626427282669988762475256374173175398995908420104023465432599069702289330964075081611719197835869803511992549376 
```

那是十进制数。以每毫秒 1 个字符串的速度将它们全部打印出来需要 9.9*10^130 年。这比宇宙存在的时间长 7.3*10^120 倍。

获取一个单词列表或将字典加载到内存中并使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:42:25.810

这将取决于您对“单词”的定义。如果 'a' 是一个单词，那么很容易得到一个 100 个字符序列中的单词概率的下限（大约 1-1/e^4）。同样，您可以考虑 2 个字母词和 3 个字母词并细化概率。在 4 或 5 个字母之后，这个概率变得非常准确，因为较长的单词很少，而且它们随机出现的情况非常罕见。

# javascript - IE 中的数据格式 JavaScript 库

> ID：10135510
> 
> 赞同：0
> 
> 时间：2012-04-13T05:05:32.583
> 
> 标签：javascript, internet-explorer

我在 json 响应中接收日期并使用[日期格式的](http://blog.stevenlevithan.com/archives/date-time-format)javascript 库对其进行解析。它在 Firefox 中运行良好，但在 IE 中引发异常。

从 json response.actionDateTime 收到的日期：2012-04-12T18:23:49

这是我尝试过的

```
dateFormat(response.actionDateTime,"dd-mmm-yyyy HH:MM:ss") 
```

它在以下日期格式库行中引发异常

```
date = date ? new Date(date) : new Date;
if (isNaN(date)) throw SyntaxError("invalid date"); 
```

我还无法解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:24:45.437

最后，我想出了以下跨浏览器解决方案。只是解析了迄今为止的字符串。

```
/*
    returns date object from string in dd-mm-yyyy HH:MM:SS format
*/
function parseDate(string) {
    var dateTimeArr = string.split(" ");

    var date = dateTimeArr[0].split("-");
    var time = dateTimeArr[1].split(":");

    var day = parseFloat(date[0]);
    var month = parseFloat(date[1]) - 1;    //months : 0-11
    var year = parseFloat(date[2]);

    var hour = parseFloat(time[0]);
    var minute = parseFloat(time[1]);
    var second = parseFloat(time[2]);

    var dateObj = new Date(year, month, day, hour, minute, second);

    return dateObj; 
```

}

但我仍然缺少日期格式库。

# iphone - 使用 IAP 的每月订阅

> ID：10135512
> 
> 赞同：0
> 
> 时间：2012-04-13T05:05:43.467
> 
> 标签：iphone, objective-c, ios, in-app-purchase

我们正计划开发一个 iPhone 应用程序，我们的要求之一是我们希望每月通过该应用程序收取费用。我们希望通过应用内购买来实现这一目标。这在使用 IAP 的 iPhone 应用程序中是否可行？如果是，那么请您指导我们。这种应用程序在提交到 iTunes Store 时会被批准吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:44:30.883

您可以使用 Auto-Renewable Subscriptions 来实现它。这里是文档 [http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html)

如果您不想深入研究，可以使用 MKStoreKit，它还支持 Auto-Renewables。它只是让您的生活更轻松。

[http://blog.mugunthkumar.com/coding/mkstorekit-4-0-supporting-auto-renewable-subscriptions/](http://blog.mugunthkumar.com/coding/mkstorekit-4-0-supporting-auto-renewable-subscriptions/)

# php - 应该返回至少两天记录的 SQL 查询

> ID：10135515
> 
> 赞同：0
> 
> 时间：2012-04-13T05:05:53.583
> 
> 标签：php, mysql, sql

我有一个表“abc”，我在其中存储具有多条记录的时间戳让假设

```
1334034000  Date:10-April-2012
1334126289  Date:11-April-2012 
1334291399  Date:13-April-2012 
```

我想构建一个 sql 查询，我可以在第一次尝试找到具有最后两天值的记录，然后在接下来的两天第二次找到。. .

例子：

```
Select *,dayofmonth(FROM_UNIXTIME(i_created)) from notes
where dayofmonth(FROM_UNIXTIME(i_created)) > dayofmonth(FROM_UNIXTIME(i_created)) -2
order by dayofmonth(FROM_UNIXTIME(i_created)) 
```

此查询返回所有记录日期，但我们需要最多两天的记录。

请相应地提出建议。提前致谢

编辑：

如果今天是 4 月 13 日，并且我们的表有最大天数 10、9、8，. . . april 那么我们必须显示 10, 9 April 和他的最后日期记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:24:32.933

试试这个查询 -

```
SELECT t1.* FROM table t1
  JOIN (SELECT date FROM table GROUP BY date DESC LIMIT 2) t2
    ON t1.date = t2.date 
```

它将显示日期为“2012 年 4 月 11 日”和“2012 年 4 月 13 日”的所有记录。

这是你想要的吗？

* * *

**编辑：**

```
SELECT
  t1.*, t2.date
FROM
  notes t1
JOIN (SELECT
        DATE(FROM_UNIXTIME(i_created)) date
      FROM
        notes
      GROUP BY
        date DESC
      LIMIT
        2
  ) t2
ON
  DATE(FROM_UNIXTIME(t1.i_created)) = t2.date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:12:40.743

添加`limit 2`到查询的末尾

# c++ - 方法不可访问

> ID：10135521
> 
> 赞同：0
> 
> 时间：2012-04-13T05:06:46.493
> 
> 标签：c++, object

我目前正在开发一款游戏，目前遇到了一个小问题。这不是什么惊天动地的事情，但我最终需要弄清楚如何解决它，所以我想我会在继续敲定我的游戏外壳的同时从这里的好心人那里窥探一些信息。

无论如何，正在发生的事情是某些特定类中的函数被错误排列（MSVS2010）为无法访问。有问题的功能在公共范围内。完成函数调用的方式是通过封装了这些函数的对象数组。我现在使用数组而不是向量，因为我仍在学习是否可以将向量用于我正在做的事情。

我现在将发布特定的代码区域，但请意识到这比 alpha 代码更早，因此对于我正在尝试做的事情，结构或实际语法可能存在明显问题；解决这种问题不是我对这个问题的目标，所以如果你能仔细查看它，我将不胜感激，除非它是导致问题的原因。

船舶.h：

```
public:
...

//define bomb holds
Bomb bHolds[8];

//define heavy weapons hardpoints
Heavy hWBays[8];

//define laser hardpoints
Laser lBanks[8];

//define missile turret hardpoints
Missile mTurrets[8];

//define railgun hardpoints
Rail rMounts[8]; 
```

船舶.cpp：

```
//In Global Scope for cleanliness of the code later on
//Class references for weapon hardpoint initialization
Laser laser = Laser();
Missile missile = Missile();
Bomb bomb = Bomb();
Rail rail = Rail();
Heavy heavy = Heavy();

...

//Array initialization functions in case you need to see these

void Ship::initHPoints()
{
    for (i = 0; i <= sLB;i++)
    {
        lBanks[i] = laser;
    }

    for (i = 0; i <= sMT;i++)
    {
        mTurrets[i] = missile;
    }

    for (i = 0; i <= sBH;i++)
    {
        bHolds[i] = bomb;
    }

    for (i = 0; i <= sRM;i++)
    {
        rMounts[i] = rail;
    }

    for (i = 0; i <= sHWB;i++)
    {
        hWBays[i] = heavy;
    }
}

...

void Ship::disableShip(int time)
{
    //Disable shields
    disableShield(time);

    //Disable weapons
    for (i = 0; i <= sLB; i++)
    {
        lBanks[i].toggleWeapon(time); //This is the function that is inaccessible
    }
} 
```

Ship.cpp 顶部引用的每个类都是 Weapon 的子类，其中包含 toggleWeapon 函数。这是武器的头文件（包括子类）。

武器.h：

```
#ifndef WEAPON_H
#define WEAPON_H

#include "range.h"
#include <string>
using namespace std;

class Weapon
{

    /*
    All other weapon types inherit most of their functions and variables from this class.
    Where there are variables and by realtion functions for those variables they will be
    defined within the child classes where these variables and functions are only defined
    within those specific child classes.  If a certain variable/function combination is present
    in more then one child class it should be placed into Weapon to cut down on excess code lines where they are not needed.
    */

public:

    void setWDRange(int dLow, int dHigh, int dOLow, int dOHigh); //set weapon damage range
    void setWAcc(int aLow, int aHigh, int aOLow, int aOHigh); //set weapon accuracy range
    void setWName(string name); //set weapon name
    void setWDType(string dType); //set weapon damage type
    void setWTLevel(int tLevel); //set weapon tech level
    void setWType(int type); //set weapon type
    //void setWASpeed(int aSpeed); //set weapon attack speed

    int getWDRLow(); //get weapon damage range low
    int getWDRHigh(); //get weapon damage range high
    int getWDROLow(); //get weapon damage range optimum low
    int getWDROHigh(); // get weapon damage range optimum high
    int getWALow(); //get weapon accuracy range low
    int getWAHigh(); //get weapon accuracy range high
    int getWAOLow(); //get weapon accuracy range optimum low
    int getWAOHigh(); //get weapon accuracy range optimum high
    int getWTLevel(); //get weapon tech level
    int getWType(); //get weapon damage type
    //int getWASpeed(); //get weapon attack speed

    string getWName(); //get weapon name
    string getWDType(); //get weapon damage type

    void toggleWeapon(int time); //Disable weapon; #Here is the function that is inaccessible
    bool isWDisabled(); //Is this weapon disabled?

private:
    Range   wAcc; //accuracy
    Range   wDRange; //damage range
    string  wDType; //damage type
    string  wName; //name
    int wTLevel; //technology level
    int wType; //weapon type
    //int wASpeed; //weapon attack speed
    bool wStatus; //weapon activity status
    int wDTimer; //weapon disable timer
};

class Laser : Weapon
{
//class stuff
};

class Missile : Weapon
{
//class stuff
};

class Bomb : Weapon
{
//class stuff
};

class Heavy : Weapon
{
//class stuff
};

class Rail : Weapon
{
//class stuff
};  
#endif

/* Other Weapon's Information */

/*

There are several identifiers used above that need explaining.  Some will be covered     multiple times in different files depending on relevency.

Weapon Types:

1: Lasers
2: Missiles
3: Bombs
4: Defenses
5: Heavys
6: Rails 
```

我不确定这是否是我在 Ship 中设置阵列的方式的产物，还是我目前看不到的其他问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:27:51.573

要扩展 Jesse 的评论：

默认情况下，

```
class Laser : Weapon 
```

...引发成员的*私有*继承`Weapon`，因此在尝试在`Weapon`类本身之外访问它们时导致“不可访问的成员错误”。

将其更改为：

```
class Laser : public Weapon 
```

# objective-c - 将 C 指针添加到 NSMutableArray

> ID：10135528
> 
> 赞同：8
> 
> 时间：2012-04-13T05:07:22.410
> 
> 标签：objective-c, pointers, nsmutablearray

我正在编写一个处理低级图像内存的 Objective-C 程序。我正在使用 ANSI-C 结构来存储我的数据——因为我存储的数据是 100% 的数据，没有任何方法可以对这些数据进行操作，所以完整的对象似乎有点矫枉过正。具体来说，我正在编写一个依赖于一组颜色的可定制的后处理算法——这就是事情变得棘手的地方。我将我的颜色存储为三个浮点数的结构和一个整数标志（具体与后处理算法相关）。一切都很顺利，除了一件事......

**[实际问题]**

我不知道如何添加指向 NSMutableArray 的指针！我知道如何添加对象，但添加指向结构的指针似乎更困难——我不希望 NSMutableArray 取消引用我的指针并将结构视为某种奇怪的对象。我希望 NSMutableArray 将指针自身添加到其集合中。我该怎么做呢？

提前致谢，

G

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-13T05:14:47.393

有一个专门为此设计的类：`NSPointerArray`. [在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPointerArray_Class/Introduction/Introduction.html#//apple_ref/occ/cl/NSPointerArray)查看 Apple 的文档。对于任意指针，您可能需要使用`NSPointerFunctionsOpaqueMemory`and`NSPointerFunctionsOpaquePersonality`选项。

如果`NSPointerArray`不可用（例如，如果您正在为 iOS 开发），那么您可以使用 包装您的指针`-[NSValue valueWithPointer:]`，只要包装和展开的开销不会太慢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T05:16:48.973

您可以将指针包装在[`NSValue`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html)对象中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-11T10:48:40.923

例子：

```
int aa=99;
int *a=&aa;
char bb='a';
NSMutableArray *MS=[NSMutableArray new];
[MS addObject:[NSValue valueWithPointer:a]];
[MS addObject:[NSValue valueWithPointer:&bb]];
int *c=[[MS objectAtIndex:0] pointerValue];
char *d=[[MS objectAtIndex:1] pointerValue]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T05:18:32.813

如果 a`NSMutableArray`真的是你想要的，你可以使用这种方法：

```
NSMutableArray * NewNonRetainingArray() {
  CFAllocatorRef allocator = 0; /* << default */
  CFIndex capacity = 0; /* << no maximum */

  /*
    0 for the callbacks will result in elements which are not reference counted.
    you can write your own callbacks, if you like some extra diagnostics or
    special behavior. see the CFArrayCallBacks structure for a full description
    of all callbacks.
  */
  const CFArrayCallBacks* const callbacks = 0;
  return (NSMutableArray*)CFArrayCreateMutable(allocator, capacity, callbacks);
} 
```

但是，你不会想把`NSObject`s 塞进去——它们不会被保留。

使用这种方法，您的 CF/NS-Array 的元素可能是指针或大小等于指针的任何原始值。

# php - 从第一个的内容填充第二个下拉框

> ID：10135531
> 
> 赞同：0
> 
> 时间：2012-04-13T05:07:46.303
> 
> 标签：php

我终于从我的数据库中填充了我的第一个下拉框，但现在第二个下拉框甚至没有出现，我认为我的 if 语句调用第二个函数有问题，但不确定是什么也不确定我的“WHERE”是否我的查询中的语句是正确的 这是我的代码

```
echo "<tr>";
echo "<td>Department</td>";
echo "<td><div id=\"deptdiv\"><select name=\"department\">";
echo "<option>Select Department</option>";
echo "</td>";
while($row=mysql_fetch_array($result))
{
echo '<option value="'.$row['abbrev'].'">'.$row['abbrev'].'</option>';
}

if($_GET[department] == "department" && isset($_GET[department])) {
drop_2($_GET[department]);
}
function drop_2($id)
{
$query = mysql_query("SELECT courseno, name FROM course WHERE department=$id");

echo "<tr>";
echo "<td>Course</td>";
echo "<td><div id \"coursediv\"><select name=\"course\">";
echo "<option>Select Course</option>";
echo "</td>";
while($r=mysql_fetch_array($query))
{
echo '<option value="'.$r['courseno'].'">'.$r['name'].'</option>';
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:58:14.800

我很惊讶第一个下拉菜单显示，因为您在`<select>`元素中有表格标签，并且从未关闭该标签。我认为这是主要问题。试试看：

```
echo "<td><div id=\"deptdiv\"><select name=\"department\">";
echo "<option>Select Department</option>";
while($row=mysql_fetch_array($result))
{
  echo '<option value="'.$row['abbrev'].'">'.$row['abbrev'].'</option>';
}
echo "</select></div></td>"; 
```

此外，您需要在 GET 变量周围加上引号，以便 PHP 不会认为它们是常量，`$_GET['department']`并在 drop_2 函数的末尾关闭 select 标记。同样在函数中将`</td>`标签移动到关闭选择后。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:15:47.807

这是您更正的代码..

```
 echo "<tr>";
echo "<td>Department</td>";
echo "<td><div id=\"deptdiv\"><select name=\"department\">";
echo "<option>Select Department</option>";
while($row=mysql_fetch_array($result))
{
echo '<option value="'.$row['abbrev'].'">'.$row['abbrev'].'</option>';
}
echo "</div>";
echo "</td></tr>";
if($_GET['department'] == "department" && isset($_GET['department'])) {
drop_2($_GET['department']);
}
function drop_2($id)
{
$query = mysql_query("SELECT courseno, name FROM course WHERE department=$id");

echo "<tr>";
echo "<td>Course</td>";
echo "<td><div id \"coursediv\"><select name=\"course\">";
echo "<option>Select Course</option>";
while($r=mysql_fetch_array($query))
{
echo '<option value="'.$r['courseno'].'">'.$r['name'].'</option>';
}
echo "</div>";
echo "</td></tr>";
}
?> 
```

# android - 未调用 OnLocationChanged

> ID：10135532
> 
> 赞同：2
> 
> 时间：2012-04-13T05:07:46.920
> 
> 标签：android, android-mapview

`OnLocationChanged()`尽管添加了 requestLocationUpdates ，但未调用它，因此地图未显示其当前位置。
地图始终显示其默认模拟位置。请建议解决这个问题。我已经在清单文件中添加了所有必要的权限。
注意：我不想要使用 getLastKnownLocation 的最后一个位置，而是想要当前位置。我等待设备得到修复，有时 GPS 需要比平时更多的时间，但仍然没有改善。我也带着这个设备走了将近 10 公里。:-)。
这是我使用的代码。

```
public class TestingmapActivity extends MapActivity implements LocationListener {

private MapController myMapController;
private MapView mapView;
private LocationManager myLocationManager;
private double m_dLati = 12.913469, m_dLongi = 77.609761;
String provider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    mapView = (MapView) findViewById(R.id.mapview);
    myMapController = mapView.getController();
    provider = LocationManager.GPS_PROVIDER;
    mapView.setBuiltInZoomControls(true);
    mapView.setStreetView(true);
    myMapController.setZoom(14); // Zoon 1 is world view
    myLocationManager.requestLocationUpdates(provider, 0, 0,this);
    setMockLocation(m_dLati, m_dLongi, 500);
}

@Override
protected void onResume() {
    startListening();
    super.onResume();
}

@Override
protected void onPause() {
    stopListening();
    super.onResume();
}

@Override
protected void onStop() {
    stopListening();
    super.onStop();
}

private void startListening() {
    if (myLocationManager != null) {
        myLocationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 0, 0, this);
    }
}

private void stopListening() {
    if (myLocationManager != null)
        myLocationManager.removeUpdates(this);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

private void setMockLocation(double latitude, double longitude,
        float accuracy) {
    Log.v("", "provider name= " + provider);
    myLocationManager.addTestProvider(provider, "requiresNetwork" == "",
            "requiresSatellite" == "", "requiresCell" == "",
            "hasMonetaryCost" == "", "supportsAltitude" == "",
            "supportsSpeed" == "", "supportsBearing" == "",
            android.location.Criteria.POWER_LOW,
            android.location.Criteria.ACCURACY_FINE);
    Location newLocation = new Location(provider);
    newLocation.setLatitude(latitude);
    newLocation.setLongitude(longitude);
    newLocation.setAccuracy(accuracy);
    Toast.makeText(
            getApplicationContext(),
            "Mock: New Latitude = " + newLocation.getLatitude()
                    + " New Longitude = " + newLocation.getLongitude(),
            Toast.LENGTH_LONG).show();
    myLocationManager.setTestProviderEnabled(provider, true);
    myLocationManager.setTestProviderStatus(provider,
            LocationProvider.AVAILABLE, null, System.currentTimeMillis());
    myLocationManager.setTestProviderLocation(provider, newLocation);
}

@Override
public void onLocationChanged(Location location) {
    Log.v("LocationListener", "onLocationChanged " + location.getLatitude()
            + " , " + location.getLongitude());
    int lat = (int) (location.getLatitude() * 1E6);
    int lng = (int) (location.getLongitude() * 1E6);
    GeoPoint point = new GeoPoint(lat, lng);
    myMapController.animateTo(point);       
}

@Override
public void onProviderDisabled(String provider) {}

@Override
public void onProviderEnabled(String provider) {}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {}
} 
```

清单权限：

```
<uses-permission android:name="android.permission.ACCESS_GPS" />
<uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.LOCATION" /> 
```

谢谢， Biplab

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:12:50.253

您需要在您的`setMockLocation`方法中覆盖提供者。请再次检查该方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T06:06:47.373

尝试在房间外使用它。因为 GPS 在室内无法使用。取决于地点。它在室外可以完美运行。。

# javascript - Facebook 令牌何时过期？

> ID：10135535
> 
> 赞同：3
> 
> 时间：2012-04-13T05:08:36.600
> 
> 标签：javascript, facebook, facebook-graph-api

我知道 facebook 令牌现在将过期，因为如果`offline_access`已被删除。但是**这个令牌会过期多久？60天？**

“正常”令牌将过期多长时间？我在令牌返回中看到，过期是数字“5143”......这是第二个？或分钟？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:03:06.190

## 是的

长寿命**60 天**`access_token`到期，正常**2 小时**到期，**5143..**是秒，您还可以使用[Facebook 调试器查看详细信息](http://developers.facebook.com/tools/debug)**`access_token`****`access_token`******

 ******* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T05:11:09.390

应用高级设置中有一个新选项：deprecate offline_access

如果启用，应用程序将获得长期访问令牌，但您不能要求 offline_access。我相信在弃用过程完成后，到期时间将恢复正常，或者他们可能会将其保留为 60 天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:55:32.327

是的，访问令牌将在 60 天后过期，但您仍然需要处理另外两种情况（即使使用 offline_access）。

如果用户：

*   取消对应用程序的授权
*   更改他们的密码

...然后您将需要指导他们检索另一个客户端访问令牌，您可以用它来交换您的长期访问令牌。

但是请注意，即使用户从您的应用程序中注销，如果您请求了offline_access，您的access_token 仍然有效（假设其他情况都没有发生）。******

# javascript - 不是一个正确的命名约定，但它工作正常，如果它有效，命名约定如何以及需要什么？

> ID：10135538
> 
> 赞同：0
> 
> 时间：2012-04-13T05:08:59.800
> 
> 标签：javascript, html

我是 javascript 编程的新手。我在练习 javascript 时发现了以下示例。

```
<html>
<head>
<script type="text/javascript">
function changeTabIndex()
  {
  document.getElementById('1').tabIndex="3"
  document.getElementById('2').tabIndex="2"
  document.getElementById('3').tabIndex="1"
  }
</script>
</head>
<body>

<p><a id="1" href="http://www.w3schools.com">1</a></p>
<p><a id="2" href="http://www.w3schools.com">2</a></p>
<p><a id="3" href="http://www.w3schools.com">3</a></p>

<input type="button" onclick="changeTabIndex()"
value="Change TabIndex" />

</body>
</html> 
```

我的疑问是， id 属性的命名约定必须以字母开头，后跟数字和下划线。但在这个例子中，即使他们使用数字作为 id 的代码工作正常。那么需要遵循命名约定。这似乎很简单，但请任何人澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:13:28.090

大多数人会建议您不要依赖 www.w3schools.com 来获取有关 Javascript 的信息。他们的文档和示例中有很多错误。更好的信息来源是实际的 W3C 参考文档。可以在[http://www.w3.org/TR/html401/struct/global.html#h-7.5.2](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)找到有关 ID 的信息。在这种特殊情况下，您的浏览器实现根本不符合规范:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:13:29.767

根据这个[HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)在 HTML5 中，id 必须至少包含一个字符，并且不能包含任何空格字符。我猜您的示例可能不适用于旧版浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:37:45.080

getElementById() 在 ID 属性中查找标记值，它实际上可以是“ [NAME](http://www.w3.org/TR/html401/types.html#type-name) ”或“ [NUMBER](http://www.w3.org/TR/html401/types.html#type-number) ”。我还没有看到规范中确切说明这一点的部分，但这就是我根据像你这样的例子解释文档的方式。这两种约定在实践中都有效，但是，我从不喜欢只使用数字 ID。使用代码中编写的[$(#42)](http://api.jquery.com/id-selector/) ，诸如[jQuery](http://jquery.com)之类的东西在实用性上有所细分。

# javascript - 如何在不丢失变量值的情况下重新加载页面

> ID：10135542
> 
> 赞同：0
> 
> 时间：2012-04-13T05:09:25.143
> 
> 标签：javascript, jquery, html, jsp, struts2

我在simulation.jsp 中有以下代码，通过它我从struts2 操作接收一些模拟数据：

```
$(document).ready(function() {
var data='<s:property escape="false" value="simInfos" />';
} 
```

现在我用这些数据做一些模拟。模拟完成后，如何通过单击按钮重新加载/刷新此页面而不会丢失从 struts2 操作中收到的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T05:13:36.147

```
$(document).ready(function() {
    var data='<s:property escape="false" value="simInfos" />';
    localStorage["myData"] = data;

    // later on (maybe after page refresh, whatever)
    var myLoadedData = localStorage["myData"];
} 
```

您可以像对待任何其他对象一样对待 HTML5 的[localStorage](http://paperkilledrock.com/2010/05/html5-localstorage-part-one/)，尽管它具有特定的 setter 和 getter 函数并且只能存储字符串。不要把它当作永久缓存，只是一个存储一些数据的地方。[另一个参考](http://diveintohtml5.info/storage.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:20:32.953

您可能想要使用这个跨浏览器本地存储 API： http: [//www.jstorage.info/](http://www.jstorage.info/)

您可以像使用 HTM5 的 localStorage 一样使用它；D

```
$.jStorage.set("foo", "value");  //Set "value" in "foo"
var txt = $.jStorage.get("foo");  //"txt" is now "value" 
```

# c++ - 在 Windows 上的 c++ 中使用和在 wxwdigets 中创建线程

> ID：10135550
> 
> 赞同：0
> 
> 时间：2012-04-13T05:11:10.420
> 
> 标签：c++, multithreading, wxwidgets, mutex, locks

我正在阅读与在 Windows 上使用 c++ 中的 wxwidgets 进行线程创建相关的内容，但是我无法理解以下代码片段的含义：-

以下内容是该项目的一部分：-

```
 Myfirm.cpp
  My thread.h
  Mythread.cpp

  in Myfirm.cpp

  the following code is not understood by me:-

  BEGIN_EVENT_TABLE(MyFrm,wxFrame)
       EVT_COMMAND(wxID_ANY, wxEVT_MYTHREAD, MyFrm::OnMyThread)
  END_EVENT_TABLE()

  void MyFrm::PerformCalculation(int someParameter){//not sure what is it 
   MyThread *thread = new Mythread(this, someParameter);
   thread->Create();
   thread->Run();
   }

  void MyFrm::OnMyThread(wxCommandEvent& event)//here also the clarity is not good
  {
   unsigned char* temp = (unsigned char*)event.GetClientData();

   delete[] temp;  
  }    

  in this exampe what is even more confusing is that , it does not contain a main()     
  function

  in Mythread.h

  BEGIN_DECLARE_EVENT_TYPES()
       DECLARE_EVENT_TYPE(wxEVT_MYTHREAD, -1)
  END_DECLARE_EVENT_TYPES()

  in Mythread.cpp

  DEFINE_EVENT_TYPE(wxEVT_MYTHREAD)
  MyThread::MyThread(wxEvtHandler* pParent, int param) : wxThread(wxTHREAD_DETACHED),                      
  m_pParent(pParent)

  {
   m_param = param;
  }
  void* MyThread::Entry()
  {
  wxCommandEvent evt(wxEVT_MYTHREAD, GetId());
  evt.SetInt(r); 
  evt.SetClientData(data); 
  wxPostEvent(m_pParent, evt);
  return 0;
  }
  i am atill wondering how does the following code works and have no idea about where 
  where the main function is? 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:25:28.163

首先，我建议查看 wxWidgets 安装中的线程示例和[wxThread](http://docs.wxwidgets.org/trunk/classwx_thread.html)的文档页面，其中包含一个大示例。但是，让我分解您的代码并尝试解释它。

```
BEGIN_EVENT_TABLE(MyFrm,wxFrame)
       EVT_COMMAND(wxID_ANY, wxEVT_MYTHREAD, MyFrm::OnMyThread)
END_EVENT_TABLE() 
```

这是一个[事件表](http://docs.wxwidgets.org/trunk/overview_events.html#overview_events_eventtables)，它表示框架将处理`wxEVT_MYTHREAD`具有任何 ID 类型的事件，当它收到一个事件时，它将调用该`MyFrm::OnMyThread`方法。

```
void MyFrm::PerformCalculation(int someParameter){//not sure what is it 
   MyThread *thread = new Mythread(this, someParameter);
   thread->Create();
   thread->Run();
} 
```

此方法创建一个`MyThread`将整数参数传递给它的实例，大概是为了进行一些计算。然后它运行线程。

```
void MyFrm::OnMyThread(wxCommandEvent& event)//here also the clarity is not good
{
   unsigned char* temp = (unsigned char*)event.GetClientData();
   delete[] temp;  
} 
```

这是`wxEVT_MYTHREAD`触发事件时调用的方法。然后它从事件中获取数据（在我们的例子中是在线程中设置的）并且通常会用它做一些事情，在这种情况下它只是删除它。

> 在这个例子中更令人困惑的是，它不包含 main()
> 函数

我会看一下[wxApp 概述](http://docs.wxwidgets.org/trunk/overview_app.html)，它在 wxWidgets 中解释了这一点，以及仅显示 wxWidgets 程序基础知识的最小示例。

```
BEGIN_DECLARE_EVENT_TYPES()
       DECLARE_EVENT_TYPE(wxEVT_MYTHREAD, -1)
END_DECLARE_EVENT_TYPES() 
```

此代码声明了一个名为 的新事件类型`wxEVT_MYTHREAD`。

```
DEFINE_EVENT_TYPE(wxEVT_MYTHREAD) 
```

这定义了新的事件类型。

```
MyThread::MyThread(wxEvtHandler* pParent, int param) : wxThread(wxTHREAD_DETACHED), m_pParent(pParent)
{
    m_param = param;
} 
```

存储参数的线程类的构造函数。

```
void* MyThread::Entry()
{
    wxCommandEvent evt(wxEVT_MYTHREAD, GetId());
    evt.SetInt(r); 
    evt.SetClientData(data); 
    wxPostEvent(m_pParent, evt);
    return 0;
} 
```

Entry 方法在 wxThread 中执行实际工作，有关详细信息，请参阅[文档。](http://docs.wxwidgets.org/trunk/classwx_thread.html)在这种情况下，它会创建一个事件来设置参数，然后发布它。

# android - 与 android 中的 c2dm 消息传递混淆

> ID：10135553
> 
> 赞同：1
> 
> 时间：2012-04-13T05:11:42.317
> 
> 标签：android, android-c2dm

我已经实现了一个使用此 c2dm 代码[http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)的小演示。它可以工作。我正在从服务器获取推送通知，但问题是每当我从服务器发送通知时它发送旧通知。它只会在我注册我的 android 设备并将注册 ID 发送到服务器时发送当前的新通知。请建议我应该是什么问题。提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:39:42.590

据我记得，当我自己遵循 Lars Vogel 的教程时，我遇到了同样的问题。其实不是你说的问题。

尝试在 onReceive() 函数中放置一个断点，以手动查看您获得的有效负载。在我的情况下，消息是好的，但`MessageReceivedActivity`不是，它总是显示坏消息。

将`super.onCreate()`MessageReceivedActivity 中的方法放在方法之上。

**它是怎样的：**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.activity_result);
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        String message = extras.getString("payload");
        if (message != null && message.length() > 0) {
            TextView view = (TextView) findViewById(R.id.result);
            view.setText(message);
        }
    }

    super.onCreate(savedInstanceState);
} 
```

**应该如何：**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_result);
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        String message = extras.getString("payload");
        if (message != null && message.length() > 0) {
            TextView view = (TextView) findViewById(R.id.result);
            view.setText(message);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:32:36.377

@RaulGogo 的回答有点帮助，但没有为我解决问题。要在此处查看此解决方案 [https://stackoverflow.com/a/10079537/264618](https://stackoverflow.com/a/10079537/264618)并阅读下面的评论。

通常在 C2DMMessageReceiver 类中更改此代码：

```
int ukey = (int) System.currentTimeMillis();
PendingIntent pendingIntent = PendingIntent.getActivity(context, ukey,
            intent, 0); 
```

并将其添加到 MessageReceivedActivity 类中：

```
 @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        setIntent(intent);//important! 
```

注意： setIntent(intent) 调用使用当前数据刷新意图。

# python - 调试与 EC2、Ubuntu 和 Django 的断开连接

> ID：10135566
> 
> 赞同：1
> 
> 时间：2012-04-13T05:13:10.667
> 
> 标签：python, django, ubuntu, amazon-ec2, ubuntu-server

按照[本教程](http://ericwconner.com/?p=347)为 Django 应用程序设置 EC2 实例后，我无法连接到应用程序。任何帮助调试，将不胜感激。

设置 EC2 实例后执行的步骤：

1.  sudo aptitude 安装 python-django
2.  sudo aptitude install mysql-server
3.  sudo aptitude 安装 python-mysqldb
4.  sudo aptitude install libapache2-mod-wsgi
5.  mkdir srv
6.  光盘服务器
7.  django-admin startproject mysite
8.  须藤 vim /etc/apache2/sites-available/mysite.com

    ```
    NameVirtualHost *:80

    <VirtualHost *:80>

        ServerName mysite.com
        ServerAlias www.mysite.com
        WSGIScriptAlias / /home/demo/public_html/mysite.com/mysite.wsgi
    </VirtualHost> 
    ```

9.  sudo vim /home/demo/public_html/mysite.com/mysite.wsgi

    ```
    import os
    import sys

    sys.path.append('/home/demo/public_html/mysite.com/')

    os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

    import django.core.handlers.wsgi

    application = django.core.handlers.wsgi.WSGIHandler() 
    ```

10.  sudo a2ensite mysite.com

11.  sudo /etc/init.d/apache2 重新加载

对于我的 URL 上的主机记录：

```
 @  to the Private IP from Amazon as an A Record
    www to the Private IP from Amazon as an A record 
```

结果是当我输入IP地址时，myurl.com和www.myurl.com都无法连接到服务器。

关于如何调试的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:34:01.940

*不要为您的实例使用私有 IP，这仅在您从 EC2内*访问您的实例时才有用，而是在您的主机文件中使用公共 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:57:23.677

您应该使用附加到实例的弹性 IP 作为静态公共 IP 地址。然后你把它放在你的主机文件中。只要您将它们附加到*活动*实例，这些都是免费的。如果您终止或停止实例，您将为此付费。

# iphone - 如何在游戏应用程序中使用 NStimer

> ID：10135575
> 
> 赞同：-1
> 
> 时间：2012-04-13T05:13:48.247
> 
> 标签：iphone, objective-c, ios, xcode, nstimer

我是ios新手。我想做一个游戏应用程序。我需要一个计时器，它会以秒为单位显示时间。当用户点击开始按钮时，计时器应该在他完成第一级时开始和停止，并以秒为单位显示时间。有人可以帮忙吗？我不知道怎么用。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T05:30:49.000

使用 NSTimer 作为：-

```
-(ViewDidLoad)
{ 
NSTimer *updateTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateTime) userInfo:nil repeats:YES];
}

-(void)updateTime
{
NSLog(@"....Update Function Called....");

static int i = 1;

Label.text = [NSString stringWithFormat:@"%d",i];

i++;
} 
```

将此用于启动计时器。检查它希望它有帮助。谢谢:)

# iphone - NSURLConnection，使用错误的凭据登录成功

> ID：10135577
> 
> 赞同：2
> 
> 时间：2012-04-13T05:14:28.097
> 
> 标签：iphone, objective-c, cookies, login, nsurlconnection

我正在使用 NSURLConnection 与服务器连接，使用 GET 请求。要登录，我正在发送带有表单 url 的 GET 请求

```
http://<myUserName>:<myPassword>@my.serverurl.com/user/login 
```

一个示例 URL 将是

```
http://someusername:somepass@www.google.com/user/login 
```

当我第一次登录时，我传递了正确的用户名和密码，我能够成功登录，如果我传递了错误的用户名或密码，我会收到服务器的响应，说我的用户名和密码不正确.. 一切都很好然后

**但是当我使用正确的用户名/密码登录时，进入我的主页。在那里我注销返回登录屏幕。现在我输入了错误的用户名和密码并尝试登录，我得到响应登录成功..这是我的问题。**

这意味着我所有后续的登录请求都以错误的用户名和密码成功返回。我用浏览器检查了相同的 url（正确和不正确），一切正常。

这是我用来登录的代码

```
-(void)postRequest{
    NSMutableURLRequest *request    =   [[NSMutableURLRequest alloc] init] ; 
    [request setURL:[NSURL URLWithString:
              @"http://myusername:mypass@my.serverurl.com/user/login"]]; 
    [request setHTTPMethod:@"GET"];
//    [request setHTTPShouldHandleCookies:NO];   ==> I tried without this first

    loginRequestConnection  =   [[CustomURLConnection alloc]
                                      initCustomURLWithRequest:request 
                                      delegate:self 
                                      withTAG:LOGIN_REQUEST_CONNECTION];
    [request release];
} 
```

现在 CustomURLConnection 只不过是 NSURLConnection 的一个子类，并添加了一个标签来识别委托中的多个连接请求

```
@interface CustomURLConnection : NSURLConnection{
}
@property()NSInteger tag;
@property(nonatomic, retain) NSMutableData *receivedData;

-(id)initCustomURLWithRequest:(NSURLRequest *)request delegate:(id)delegate withTAG:(NSInteger)tagInt;
@end 
```

我认为问题是 NSURLConnection 请求将 cookie 存储在某处并将它们重用于后续请求。这就是我添加的原因

```
[request setHTTPShouldHandleCookies:NO]; 
```

到代码。但不管有没有这个问题都存在。那么对于导致此问题的原因还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:35:26.940

尝试使用它 `initWithURL:cachePolicy:timeoutInterval:`并设置`cache policy`为`NSURLRequestReloadIgnoringCacheData`

尝试添加此委托方法。

```
 - (NSCachedURLResponse *)connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse {   
return nil; 
} 
```

确保调用此方法。

使用`NSURLCredentialStorage` 和`removeCredential`擦除由 存储的凭据的缓存`NSURLConnection`。

[请也检查此答案。](https://stackoverflow.com/a/1536425/642375)

希望有效

# mongodb - 当其父元素和自身都是MongoDB中的数组时，如何对孙元素进行索引？

> ID：10135578
> 
> 赞同：0
> 
> 时间：2012-04-13T05:14:34.687
> 
> 标签：mongodb

我的文档格式如下：

```
{
    "_id":ObjectId("4fabcd13"),
    users:[
        {id:"001", tags:["friend", "buiz"]}, 
        {id:002, tags:["relationship"]}
    ]
},
{
    "_id":ObjectId("4fabcd14"),
    users:[
        {id:"003", tags:["buiz"]}, 
        {id:002, tags:["friend"]}
    ]
}, 
```

我可以让 MongoDB 索引 users.tags 元素吗？我曾尝试使用以下语句但失败了：

> db.invoices.ensureIndex({user.tags:1})

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:18:29.440

我认为您只是错过了引号（因为字段名称中的点），并且该字段称为“用户”，而不是“用户”：

```
db.invoices.ensureIndex({"users.tags":1}) 
```

# eclipse - Tomcat在eclipse中不工作

> ID：10135582
> 
> 赞同：1
> 
> 时间：2012-04-13T05:15:04.943
> 
> 标签：eclipse, tomcat6

我在 Eclipse 中启动我的 tomcat 服务器，我收到一条错误消息

本地主机上的服务器 Tomcat v6.0 服务器无法在 45 秒内启动。如果服务器需要更多时间，请尝试在服务器编辑器中增加超时。请帮忙。我尝试更改服务器超时但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:34:14.547

在 Eclipse 编辑器中转到`Servers view tab --> Double click on Tomcat Server`，
然后您可以看到 Tomcat 概述页面，在该页面中转到
`Timeouts tab --> click on the tab --> increase the start and stop time`.

**例如：**
开始（以秒为单位）：1000
停止（以秒为单位）：100

# ruby-on-rails - find_or_create_by_provider_and_uid 大喊 ActiveRecord 拥有“创建”

> ID：10135587
> 
> 赞同：0
> 
> 时间：2012-04-13T05:15:22.613
> 
> 标签：ruby-on-rails, activerecord, omniauth

我在这里通过这个 railscasts 剧集实现 twitter/facebook OAuth 登录：

[http://railscasts.com/episodes/235-omniauth-part-1](http://railscasts.com/episodes/235-omniauth-part-1)

我正在使用 github 上的 Omniauth README 中的代码：

```
 def oauthing
    auth = request.env['omniauth.auth']
    current_user.authentications.find_or_create_by_provider_and_uid(auth['provider'], auth['uid'])
    flash[:notice] = "Authentication Successful"
    redirect_to '/'
  end 
```

它会引发有关属于 ActiveRecord 的方法“create”的错误。现在，如果我删除“_or_create”，我可以让上面的代码工作，但现在我只能使用 Twitter/Facebook OAuth 来验证*现有*用户，而不能创建新用户。

我疯狂地用谷歌搜索，但没有成功。我怎样才能完成这项工作，以便我可以通过 Omniauth 创建帐户，而不仅仅是进行身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:31:39.673

拆分查询并尝试：

```
is_user = current_user.authentications.find_by_provider_and_uid(auth['provider'], auth['uid'])

current_user.authentications.create(:provider => auth['provider'], :uid => auth['uid']) if is_user.nil? 
```

# php - 如何将 ArrayIterator 一分为二？

> ID：10135591
> 
> 赞同：3
> 
> 时间：2012-04-13T05:15:55.137
> 
> 标签：php

我有这个代码

```
$second_half = $items; //ArrayIterator Object;
$first_half = array_slice($second_half ,0,ceil(count($second_half)/2)); 
```

这给出了警告**警告：array_slice() 期望参数 1 是数组，给定对象** 有没有办法将一个`ArrayIterator`对象一分为二？

基本上我想要一半的未知数量的项目`$first_half`和剩余的项目`$second_half`; 结果将是`ArrayIterator`具有两组不同项目的两个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:22:16.570

看来您可以使用[`getArrayCopy`](http://www.php.net/manual/en/arrayiterator.getarraycopy.php)ArrayIterator 的方法。这将返回一个您可以操作的数组。

至于将结果的一半分配给 new `ArrayIterator`，另一半分配给 another `ArrayIterator`，您不需要将其减少为数组。您可以简单地使用迭代器本身的`count`and方法：`append`

```
$group = new ArrayIterator;
$partA = new ArrayIterator;
$partB = new ArrayIterator;

$group->append( "Foo" );
$group->append( "Bar" );
$group->append( "Fiz" );
$group->append( "Buz" );
$group->append( "Tim" );

foreach ( $group as $key => $value ) {
  ( $key < ( $group->count() / 2 ) ) 
    ? $partA->append( $value ) 
    : $partB->append( $value );
} 
```

这导致`ArrayIterator`构建了两个新的：

```
ArrayIterator Object ( $partA )
(
    [0] => Foo
    [1] => Bar
    [2] => Fiz
)
ArrayIterator Object ( $partB )
(
    [0] => Buz
    [1] => Tim
) 
```

根据需要修改三元条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-12T12:07:41.947

```
$first_half = new LimitIterator($items, 0, ceil(count($items) / 2));
$second_half = new LimitIterator($items, iterator_count($first_half)); 
```

这将为您提供 2 个迭代器，这将允许您仅迭代原始`$items`.

# android - 将图库嵌入到 ListView 中？

> ID：10135593
> 
> 赞同：0
> 
> 时间：2012-04-13T05:16:45.527
> 
> 标签：android, listview, android-gallery

谁能告诉我如何将 a 嵌入`Gallery`到 a`ListVview`中，以便我可以在里面的图像上进行水平滚动`ListView`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:04:47.330

检查[这篇](https://stackoverflow.com/a/938657/1493173)文章，它对我有用。

我的设置如下：

*   我有一个`ListActivity`使用 an`ArrayAdapter`来填充数据的。
*   我的 XML 资源`list_item`包含一个 ImageView、TextView 和一个 Gallery。
*   我在行中添加了一个`OnClickListener`（就像您通常处理列表项点击一样。）
*   然后我为画廊设置适配器
*   `GestureListener`我在处理滑动的图库中添加了一个
*   我在图库中添加一个`OnItemClickListener`来处理单击图库中的图像

在我的`ArrayAdapter`我做以下：

```
private static final int SWIPE_MAX_OFF_PATH = 250;
private GestureDetector gestureDetector;
private OnTouchListener gestureListener;
private Gallery picGallery;

...

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;

    /* Holder pattern here, commented out for clarity */

    // We need to set the onClickListener here to make sure that
    // the row can also be clicked, in addition to the gallery photos
    row.setOnClickListener(new MyOnClickListener(context,position));

    // Set the adapter for the gallery
    picGallery = (Gallery) row.findViewById(R.id.gallery);
    picGallery.setAdapter(
               new MyGalleryAdapter(/* some input data here to populate the gallery */));

    // GestureDetector to detect swipes on the gallery
    gestureDetector = new GestureDetector(new MyGestureDetector());
    gestureListener = new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    };

    // Detect clicking an image
    picGallery.setOnItemClickListener(new MyOnItemClickListener(context));

    // Detect swipes
    picGallery.setOnTouchListener(gestureListener);

    return row;
 }

...

private class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
        } catch (Exception e) {
            // nothing
        }
        return false;
    }

}

...

private class MyOnItemClickListener implements OnItemClickListener{    
    private Context context;

    public MyOnItemClickListener(Context context){
        this.context = context;
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        Intent intent = new Intent(context, PhotoDetailActivity.class);
        intent.putExtra("id", id);
        context.startActivity(intent);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:11:20.273

您需要列表视图吗？也许您可以在 ScrollView 中放置一个 LinearLayout（垂直）？

# java - Java的内置库实现

> ID：10135600
> 
> 赞同：2
> 
> 时间：2012-04-13T05:17:53.653
> 
> 标签：java, shared-libraries, built-in

有没有人碰巧知道，如果可能的话，我可以在哪里看一下 java 内置库的代码？

我已经尝试`Ctrl + Shift + B`（这是 Netbeans 的 Eclipse 等效项`Ctrl + Shift T`）“转到源代码”，但我只能看到方法标题，并且正文始终是：

```
//compiled code
throw new RuntimeException("Compiled Code"); 
```

例如，如果我尝试查看 String.charAt(int)，我会看到以下内容

```
public char charAt(int i)
{
    //compiled code
    throw new RuntimeException("Compiled Code");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T05:22:04.857

jdk 提供了内置库源代码。例如，在 windows 盒子上，jdk 文件夹将包含 src.zip，其中包含内置库的源代码

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T05:21:24.027

当然，JDK 是随源码一起分发的，您可以在 IDE 中方便地打开它们。寻找“src.jar”。

它可能已经设置好了。在 Eclipse 中，只需尝试 Ctrl-Shift-T 类似“java.lang.String”的东西。

网络搜索也将出现链接良好且格式化的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:19:27.773

谷歌“java反编译器”并下载它。您可以查看库中任何类文件的源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T06:13:09.070

您还可以使用 jad 反编译任何 .class 文件

# .net - Array.Sort() 没有正确排序目标数组

> ID：10135601
> 
> 赞同：1
> 
> 时间：2012-04-13T05:18:26.590
> 
> 标签：.net, vb.net, visual-studio-2010, file-io

我正在使用以下代码读取高分文件，其中先写入分数，将玩家姓名写入下一行，然后如果没有写入文件的 3 个分数，则显示前 3 个或更少的分数。高分显示应该将分数按最高排序，这就是这个程序试图实现的。

Array.sort() 没有做任何该死的事情。事实上，该程序甚至没有像它应该的那样反转数组。我已经使用明确给出的名称和分数数组以这种方式测试了 array.sort() 并且它工作正常。我想它可能仍在以字符串形式读取数据，即使它被声明为其他方式，但是当我将数组类型更改为整数时它会四舍五入小数，所以我很确定不是这样。

我不知道为什么从文件中读取数据会改变它的排序方式。我的老师也不明白发生了什么。有谁知道这里发生了什么？

```
Imports System.IO

Public Class Form2

    Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim fileLines() = File.ReadAllLines(Application.StartupPath & "/../../Resources/highscores.txt")
        Dim highscores() As Double = {}
        Dim names() As String = {}
        'For some reason vb doesn't have a function to add items to arrays.
        'Lists have this capability, but if I used a list I couldn't use array.sort
        For i As Integer = 0 To fileLines.Length() - 1
            If (i Mod 2 = 0) Then
                'highscores.add(fileLines(i))
                Array.Resize(highscores, highscores.Length + 1)
                highscores(highscores.Length - 1) = fileLines(i)
            Else
                'names.add(fileLines(i))
                Array.Resize(names, names.Length + 1)
                names(names.Length - 1) = fileLines(i)
            End If
        Next
        Array.Sort(highscores, names)
        highscores.Reverse()
        names.Reverse()
        If highscores.Length() > 0 Then
            Label1.Text = Str(highscores(0)) + " " + names(0)
        End If
        If highscores.Length() > 1 Then
            Label2.Text = Str(highscores(1)) + " " + names(1)
        End If
        If highscores.Length() > 2 Then
            Label3.Text = Str(highscores(2)) + " " + names(2)
        End If
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:00:55.300

highscores.Reverse() 不起作用，因为它返回反转数组而不是反转现有数组。要反转数组，请使用 Array.Reverse(highscores)。

Array.Sort() 也适用于我的示例，因此很可能您的 highscores.txt 中有一些奇怪的东西。你能举一个这个文件的例子吗？

在每次迭代时调整数组大小也是一个坏主意，因为它很慢并且浪费了大量内存。你最好使用列表。列表可以很容易地用 linq 排序`highscores.OrderBy(i => i)`（c# 语法）。

# offline - Meteor 应用程序如何离线工作？

> ID：10135606
> 
> 赞同：52
> 
> 时间：2012-04-13T05:18:53.843
> 
> 标签：offline, meteor

这在以下情况下很有用：

*   服务器已关闭，客户端无法连接进行实时同步
*   没有互联网连接
*   用户不想上网但想使用应用程序；

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-13T08:57:05.977

是的！在大多数情况下，这已经在 Meteor 中实现了。

如果与服务器的连接丢失，客户端仍然可以在本地运行。数据库写入将在客户端上显示为成功并立即反映在屏幕上。一旦重新建立连接，Meteor 将重新发送所有挂起的方法请求到服务器，并使用来自服务器的结果更新客户端显示。这都是延迟补偿的结果，离线被视为服务器非常慢。

客户端可以监控响应式“Meteor.status()”输出以查看当前连接的状态。例如，您可以使用 Meteor.status 来驱动带有重新连接计时器和“立即连接”按钮的弹出窗口，例如 gmail。

编辑：当然，流星不是魔法。如果您点击“重新加载”，或离开页面等，离线时您将失去 Meteor 会话，并且在重新获得网络之前无法重新开始。但是，所有具有离线模式的 Web 应用程序都是如此，因此您的应用程序的用户应该不会感到惊讶。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-13T09:37:43.050

还有另外几个选项可以解决“如果您的标签关闭，或者您重新加载”问题。我还没有尝试过，但看起来很有趣。

[https://github.com/awwx/meteor-offline-data](https://github.com/awwx/meteor-offline-data)：

> 流星离线数据
> 
> Meteor 离线数据项目的主页，实现了一个包装 Meteor.Collection 的“离线集合”：
> 
> 来自服务器的数据永久存储在浏览器数据库中，即使应用程序脱机启动，它也可供应用程序使用。
> 
> 用户所做的更改也保存在浏览器数据库中，如果浏览器关闭并重新打开，它们会保留下来。下次应用程序上线时，更改将被发送到服务器。
> 
> 即使在离线时，更新也会在同一应用程序上打开的浏览器窗口之间进行响应式共享。

和 [https://github.com/GroundMeteor/Meteor-GroundDB](https://github.com/GroundMeteor/Meteor-GroundDB)：

> 特征：
> 
> 占地面积小
> 
> 广泛的浏览器支持 Chrome、Safari、Firefox 和 Internet Explorer 9 如果没有本地存储，则回退到正常 Meteor.Collection 恢复集合中的更改 恢复方法 离线更新跨窗口选项卡 支持 SmartCollection 支持仅离线客户端数据库 使用 EJSON.minify和 EJSON.maxify 来压缩 localstorage 中的数据 未来在服务器端会有一个可定制的冲突处理程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T17:12:12.520

行的底部：

1）浏览器可以完全保存实际会话（每隔多长时间？每次应用程序请求它，因为得到了更改。对于这样的应用程序，每 10 秒是不够的，我们需要每个事件）。我们可以在 Firefox 中对其进行编程吗？（但它需要保存所有内容（HTML、JS、MinoMongoDB 等），只需进行一次更改！）

2）或者我们有一个客户端完整的流星堆栈来处理本地内容（它自己的本地应用程序），但以某种方式将其 CRUD 操作传达给另一个选项卡或浏览器实例中的另一个在线应用程序。（第二个应用程序将由真正的远程服务器提供服务）问题是这样的两个应用程序是否可以通信。我想浏览器会出于安全原因禁止它）

另一个更有创意的想法可能是：在客户端堆栈上激活 oplog。然后，每次重新上线和在线时，实际客户端的 oplog 可以在主应用程序中导出/导入（这是另一个 oplog 日志），

3) 除非我们可以从客户端的流星全栈发送 call() 请求到服务器上的另一个流星栈。（有可能吗？meteor 中是否有一些关于 URL 域限制的规则）

但它并不能解决在平板电脑上拥有完整流星堆栈的可能性（我不知道这件事是可能的）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-31T19:45:39.500

我不是专家，但让我们想象一个解决方案：

不是在平板电脑/手机上（不确定我们是否可以在此类设备上安装流星堆栈），但在台式机上，用户需要离线可用性，例如销售点、一些交易记录、有限或不是最新的产品清单、定价和库存等（使用非本地库存的交易，应“待确认（离线订单）”（即使已通过离线订单预订，拥有该库存的地点也可能出售，但他们不知道的，因为他们或其他用户离线，特别是如果持有股票的用户是离线用户）

除此之外，某些功能只能在在线时使用（使用另一个 Meteor 网络应用程序）

当然，并非应用程序的所有部分都可以离线使用：敏感记录创建、一些交易、需要完整集合的搜索等。离线功能将通过本地机器网络服务器运行，并且已经安装了工作的本地完整堆栈 Meteor。

Oplog 会将这些离线数据库同步到集中式服务器上的镜像集合，每个用户一个特定的数据库，因此并非所有大数据都可以在用户机器上离线使用。这个想法是保持某些功能的可用性。否则我们可能只有一个 DB 用于所有用户的离线事务，但 oplog 会在所有用户的离线 DB 上同步所有这些事务。我们可以尽快发布并清除这些记录，但对隐私不利。最好的是客户端的离线数据库——并且在集中式服务器上镜像一个——将仅包括该用户创建的记录或用户可能需要的信息，因此每个用户都有一个特定的数据库。

中央服务器端功能将定期验证这些记录并将其发布到更大的包含所有用户的集中式数据库。

一个简单的方法：使用本地离线流星应用程序完成的所有事务，该应用程序将在可用时将事务发布到网络服务。（这样，用户不必管理使用 2 个应用程序，来回。）

我们可以使用 2 个发票编号的概念： 销售发票编号：在交易时生成（文档 ID？）

顺序发票编号：用于会计目的，稍后生成（在线时和 15 到 20 秒的文件。旧的。我们肯定知道在该期间创建的所有新发票）

这里的想法是让本地流星堆栈获取本地持久性，Oplog 与集中式持久性同步（除非我们发送异步 Web 服务调用以在在线时发布事务，但我们会使用更大的 DB 松散自动 sinc）

（毕竟，最好运行两个应用程序：在本地，一个中央服务和一种让这两个应用程序一起交谈的方法，或者一个在线和一个离线应用程序，以一种舒适的方式引导用户优先使用在线应用程序，并且如果离线则离线）

如果更多知识渊博的人社区评估和记录一种工作方式，那就太好了。我还没用Meteor，还在基本的学习过程中。

谢谢，

马克

# python - hasattr 函数

> ID：10135610
> 
> 赞同：2
> 
> 时间：2012-04-13T05:19:30.410
> 
> 标签：python, attributes, hasattr

如何使用`hasattr`（或不使用）检查函数或方法中的 attr 存在？当我尝试以任何方式检查它是否为 False 时：

```
>>> def f():
        at = True

>>> hasattr(f, 'at')
False
>>> hasattr(f(), 'at')
False 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T05:21:34.447

局部变量不是属性。你不能用任何`*attr()`来欺骗他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T19:02:37.963

它应该可以工作，请看下面的示例。

```
>>> def f():
...    f.at = True
...
>>> hasattr(f, 'at')
False
>>> f()
>>> hasattr(f, 'at')
True 
```

# java - 为一个线程设置名称和线程组有什么好处？

> ID：10135612
> 
> 赞同：1
> 
> 时间：2012-04-13T05:19:42.987
> 
> 标签：java, android, multithreading

在 java 中创建一个线程时，为一个线程设置一个`name`和有什么好处？`thread group`我可以在`LogCat`（在android中）监控它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:25:51.873

设置名称的好处主要是用于记录目的。

设置线程组的好处是你可以使用`ThreadGroup`它的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:48:37.590

我还要补充一点，除了日志记录之外，它还有助于调试 - 当您查看 jstack / jvisualvm 中的线程时，更容易看到每个线程是什么。

# cocos2d-iphone - Cocos2d 换场景：BAD_ACCESS 异常

> ID：10135615
> 
> 赞同：0
> 
> 时间：2012-04-13T05:19:57.243
> 
> 标签：cocos2d-iphone

我真诚地试图从我在这里看到的任何远程相关问题中理解错误。但是，我遇到的问题是，当我尝试从 level1 场景转换到 levelselector 场景时，游戏会因错误的访问异常而崩溃。当我在主菜单、积分、关卡选择器等中使用它们时，菜单和过渡效果完美无缺。现在我知道错误在主线程上。选择器显示它位于

```
 int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); 
```

现在在我的 level1 场景中，我确实有三个线程使用 [self schedule]，并且我已经放入了相应的 [self unschedule]；

我也有一个 NSMutableArray 我尝试释放并指向 nil 但我得到另一个错误。我把它放在场景的dealloc方法中。我也对 [self unschedule] 做了同样的事情。有更好的地方放吗？

这是它的样子，忘记保留东西了。release 现在工作正常，但在转换后仍然崩溃。场景加载就像我看到的那样，但它立即崩溃了。

```
[enemies release];
[player release];
[accel release];
[pausedLabel release];
[pausedLayer release];
[health release];
[score release];

enemies = nil;
player = nil;
accel = nil;
pausedLabel = nil;
pausedLayer = nil;
health = nil;
score = nil;

[self unschedule:@selector(updateGameLogic)];
[self unschedule:@selector(throwEnemey)];
[self unschedule:@selector(enemyShoot)];

[super dealloc]; 
```

这次我对上面的每个对象都使用了 [[Class init] alloc] retain]

# c# - 如何检测是否按下了刷新按钮（F5）

> ID：10135617
> 
> 赞同：0
> 
> 时间：2012-04-13T05:20:00.223
> 
> 标签：c#, asp.net

我有以下代码

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
           //do something 
        }
        else
        {
            // do something else
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        //do something       
    }
} 
```

关键是，如果我按 F5/刷新按钮或单击按钮，就会发生回发。如果单击 F5/刷新按钮，我将如何防止代码执行任何操作？

我已经检查过[按下检测 F5 并刷新](https://stackoverflow.com/questions/908075/detect-f5-being-pressed-and-refresh)，但我的解决方案会有所不同，因为我需要在 C# 代码中执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:02:22.690

您正在尝试在客户端捕获某些内容 - 因此它**必须**是客户端脚本（如链接中所述）。

这不是 ASP.Net 术语中的*回*发- 您的页面只是被再次请求（GET）。您无法阻止这一点 - 这就像转到您网站上的其他页面并通过某些导航单击返回一样。

如果您说要阻止运行某种类型的服务器端代码（超过 x 次），那么您可以考虑会话或 cookie 并在运行任何进程之前将它们读入。一个简单的示例：

*   访问第 1 页 - 设置会话或 cookie 标识第 1 页进程已运行
*   访问第 2 页 - 设置会话或 cookie 标识第 2 页进程已运行
*   返回第 1 页 - 检查会话或 cookie 变量是否存在，如果存在，则不要运行第 1 页进程。

如果可行，另一种选择是使用 ASP.Net 缓存。

# java - 在单选按钮而不是android中的按钮上设置文本

> ID：10135619
> 
> 赞同：1
> 
> 时间：2012-04-13T05:20:12.453
> 
> 标签：java, android, radio-button

我正在开发一个基于测验的应用程序，其中有 1 个任务和 4 个选项。对于我在按钮上显示它们的选项，我想在单选按钮上显示这些选项。我在我的应用程序中使用了 db。我做了这样的事情

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.akshara);

        getShuffledArray();// for the random questions

        Typeface tf = Typeface.createFromAsset(getBaseContext().getAssets(),
                "fonts/tunga.ttf");

        options[0] = (RadioButton) findViewById(R.id.radio1);
        options[0].setOnClickListener(this);
        options[0].setTypeface(tf);

        options[1] = (RadioButton) findViewById(R.id.radio2);
        options[1].setOnClickListener(this);
        options[1].setTypeface(tf);

        options[2] = (RadioButton) findViewById(R.id.radio3);
        options[2].setOnClickListener(this);
        options[2].setTypeface(tf);

        options[3] = (RadioButton) findViewById(R.id.radio4);
        options[3].setOnClickListener(this);
        options[3].setTypeface(tf);

        btn_next = (Button) findViewById(R.id.btn_next);
        btn_next.setOnClickListener(this);

        btn_bck = (Button) findViewById(R.id.btn_bck);
        btn_bck.setOnClickListener(this);

        getInfoFromDB(quizIndexList.get(counter));
        reLoad();
    }

    private void reLoad() {
        List<Integer> inList = new ArrayList<Integer>(Arrays.asList(0, 1, 2, 3));
        Collections.shuffle(inList);
        txtview = (TextView) findViewById(R.id.txt);
        txtview.setText(optionsNames[4]);
        Log.d("ERR", "List after shuffling: " + inList);

        options[inList.get(0)].setText(optionsNames[0]);
        options[inList.get(0)].setTag("right");
        options[inList.get(1)].setText(optionsNames[1]);
        options[inList.get(1)].setTag("wrong");
        options[inList.get(2)].setText(optionsNames[2]);
        options[inList.get(2)].setTag("wrong");
        options[inList.get(3)].setText(optionsNames[3]);
        options[inList.get(3)].setTag("wrong");
        // TODO Auto-generated method stub

    }

    private void getShuffledArray() {
        // TODO Auto-generated method stub
        for (int i = 1; i <= SIZE; i++) {
            quizIndexList.add(i);

        }
        Collections.shuffle(quizIndexList);
        Log.d("ERR", "List A shuffling" + quizIndexList);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.radio1:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) {
                displayAnswer();

            } else {
                errorAnswer();

            }

            break;
        case R.id.radio2:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) {
                displayAnswer();
            } else {
                errorAnswer();

            }
            break;

        case R.id.radio3:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) {
                displayAnswer();
            } else {
                errorAnswer();

            }
            break;

        case R.id.radio4:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) {
                displayAnswer();
            } else {
                errorAnswer();

            }
            break;

        case R.id.btn_next:
            // lyt_ans.setVisibility(View.GONE);
            // lyt_quest.setVisibility(View.VISIBLE);
            prev = counter;
            counter += 1;

            if (counter >= SIZE) {
                Collections.shuffle(quizIndexList);
                counter = 0;
            }
            getInfoFromDB(quizIndexList.get(counter));
            reLoad();

            break;

        case R.id.btn_bck:
            getInfoFromDB(quizIndexList.get(prev));
            reLoad();
            // counter --;

        }
    } 
```

但该应用程序正在强制关闭。我哪里出错了。有人可以帮我吗。在此先感谢。

```
04-13 11:43:19.928: DEBUG/AndroidRuntime(12149): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-13 11:43:19.928: DEBUG/AndroidRuntime(12149): CheckJNI is ON
04-13 11:43:20.518: DEBUG/AndroidRuntime(12149): --- registering native functions ---
04-13 11:43:21.867: DEBUG/AndroidRuntime(12149): Shutting down VM
04-13 11:43:21.878: DEBUG/dalvikvm(12149): Debugger has detached; object registry had 1 entries
04-13 11:43:21.918: INFO/AndroidRuntime(12149): NOTE: attach of thread 'Binder Thread #3' failed
04-13 11:43:22.798: DEBUG/AndroidRuntime(12175): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-13 11:43:22.798: DEBUG/AndroidRuntime(12175): CheckJNI is ON
04-13 11:43:23.088: DEBUG/AndroidRuntime(12175): --- registering native functions ---
04-13 11:43:24.208: INFO/ActivityManager(42): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.android.akshara/.MyActivity }
04-13 11:43:24.241: DEBUG/AndroidRuntime(12175): Shutting down VM
04-13 11:43:24.248: DEBUG/dalvikvm(12175): Debugger has detached; object registry had 1 entries
04-13 11:43:24.308: INFO/AndroidRuntime(12175): NOTE: attach of thread 'Binder Thread #3' failed
04-13 11:43:30.807: INFO/ActivityManager(42): Start proc com.android.settings for broadcast com.android.settings/.widget.SettingsAppWidgetProvider: pid=12214 uid=1000 gids={3002, 3001, 3003}
04-13 11:43:30.817: INFO/ActivityManager(42): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.android.launcher/com.android.launcher2.Launcher }
04-13 11:43:31.027: WARN/InputManagerService(42): Ignoring hideSoftInput of: com.android.internal.view.IInputMethodClient$Stub$Proxy@43ff0190
04-13 11:43:37.377: DEBUG/dalvikvm(11795): GC_EXPLICIT freed 1652 objects / 112968 bytes in 180ms
04-13 11:43:37.397: ERROR/Database(11795): close() was never explicitly called on database '/data/data/com.android.akshara/databases/akshara.db' 
04-13 11:43:37.397: ERROR/Database(11795): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
04-13 11:43:37.397: ERROR/Database(11795):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1810)
04-13 11:43:37.397: ERROR/Database(11795):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:817)
04-13 11:43:37.397: ERROR/Database(11795):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:851)
04-13 11:43:37.397: ERROR/Database(11795):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:844)
04-13 11:43:37.397: ERROR/Database(11795):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:540)
04-13 11:43:37.397: ERROR/Database(11795):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
04-13 11:43:37.397: ERROR/Database(11795):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
04-13 11:43:37.397: ERROR/Database(11795):     at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:158)
04-13 11:43:37.397: ERROR/Database(11795):     at com.android.akshara.Dbhelper.createDataBase(Dbhelper.java:42)
04-13 11:43:37.397: ERROR/Database(11795):     at com.android.akshara.MyActivity.setupDatabase(MyActivity.java:70)
04-13 11:43:37.397: ERROR/Database(11795):     at com.android.akshara.MyActivity.onCreate(MyActivity.java:24)
04-13 11:43:37.397: ERROR/Database(11795):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-13 11:43:37.397: ERROR/Database(11795):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-13 11:43:37.397: ERROR/Database(11795):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-13 11:43:37.397: ERROR/Database(11795):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-13 11:43:37.397: ERROR/Database(11795):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-13 11:43:37.397: ERROR/Database(11795):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 11:43:37.397: ERROR/Database(11795):     at android.os.Looper.loop(Looper.java:123)
04-13 11:43:37.397: ERROR/Database(11795):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-13 11:43:37.397: ERROR/Database(11795):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 11:43:37.397: ERROR/Database(11795):     at java.lang.reflect.Method.invoke(Method.java:521)
04-13 11:43:37.397: ERROR/Database(11795):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-13 11:43:37.397: ERROR/Database(11795):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-13 11:43:37.397: ERROR/Database(11795):     at dalvik.system.NativeStart.main(Native Method)
04-13 11:44:12.517: DEBUG/SntpClient(42): request time failed: java.net.SocketException: Address family not supported by protocol
04-13 11:49:12.530: DEBUG/SntpClient(42): request time failed: java.net.SocketException: Address family not supported by protocol
04-13 11:51:09.437: DEBUG/AndroidRuntime(13754): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-13 11:51:09.447: DEBUG/AndroidRuntime(13754): CheckJNI is ON
04-13 11:51:10.177: DEBUG/AndroidRuntime(13754): --- registering native functions ---
04-13 11:51:11.778: DEBUG/dalvikvm(237): GC_EXPLICIT freed 130 objects / 6888 bytes in 173ms
04-13 11:51:12.118: DEBUG/PackageParser(42): Scanning package: /data/app/vmdl15520.tmp
04-13 11:51:12.617: DEBUG/dalvikvm(42): GC_FOR_MALLOC freed 10372 objects / 539304 bytes in 179ms
04-13 11:51:12.888: INFO/PackageManager(42): Removing non-system package:com.android.akshara
04-13 11:51:12.897: INFO/ActivityManager(42): Force stopping package com.android.akshara uid=10037
04-13 11:51:12.897: INFO/Process(42): Sending signal. PID: 11795 SIG: 9
04-13 11:51:12.907: INFO/ActivityManager(42):   Force finishing activity HistoryRecord{440a9ae0 com.android.akshara/.Akshara}
04-13 11:51:12.907: INFO/ActivityManager(42):   Force finishing activity HistoryRecord{4409d0b8 com.android.akshara/.PartThree}
04-13 11:51:12.917: INFO/ActivityManager(42):   Force finishing activity HistoryRecord{43f007d8 com.android.akshara/.MyActivity}
04-13 11:51:12.977: INFO/WindowManager(42): WIN DEATH: Window{43fb37b8 com.android.akshara/com.android.akshara.MyActivity paused=true}
04-13 11:51:12.987: INFO/WindowManager(42): WIN DEATH: Window{43fff9d8 com.android.akshara/com.android.akshara.PartThree paused=true}
04-13 11:51:12.987: INFO/WindowManager(42): WIN DEATH: Window{43f46c80 com.android.akshara/com.android.akshara.Akshara paused=true}
04-13 11:51:13.267: DEBUG/PackageManager(42): Scanning package com.android.akshara
04-13 11:51:13.267: INFO/PackageManager(42): Package com.android.akshara codePath changed from /data/app/com.android.akshara-2.apk to /data/app/com.android.akshara-1.apk; Retaining data and using new
04-13 11:51:13.277: INFO/PackageManager(42): /data/app/com.android.akshara-1.apk changed; unpacking
04-13 11:51:13.307: DEBUG/installd(35): DexInv: --- BEGIN '/data/app/com.android.akshara-1.apk' ---
04-13 11:51:13.737: DEBUG/dalvikvm(13789): DexOpt: load 57ms, verify 167ms, opt 8ms
04-13 11:51:13.797: DEBUG/installd(35): DexInv: --- END '/data/app/com.android.akshara-1.apk' (success) ---
04-13 11:51:13.797: WARN/PackageManager(42): Code path for pkg : com.android.akshara changing from /data/app/com.android.akshara-2.apk to /data/app/com.android.akshara-1.apk
04-13 11:51:13.797: WARN/PackageManager(42): Resource path for pkg : com.android.akshara changing from /data/app/com.android.akshara-2.apk to /data/app/com.android.akshara-1.apk
04-13 11:51:13.807: DEBUG/PackageManager(42):   Activities: com.android.akshara.MyActivity com.android.akshara.PartThree com.android.akshara.Akshara com.android.akshara.MatchIt com.android.akshara.PartFour
04-13 11:51:13.817: INFO/ActivityManager(42): Force stopping package com.android.akshara uid=10037
04-13 11:51:13.977: INFO/installd(35): move /data/dalvik-cache/data@app@com.android.akshara-1.apk@classes.dex -> /data/dalvik-cache/data@app@com.android.akshara-1.apk@classes.dex
04-13 11:51:13.987: DEBUG/PackageManager(42): New package installed in /data/app/com.android.akshara-1.apk
04-13 11:51:14.237: INFO/ActivityManager(42): Force stopping package com.android.akshara uid=10037
04-13 11:51:14.397: DEBUG/dalvikvm(120): GC_EXPLICIT freed 428 objects / 29064 bytes in 118ms
04-13 11:51:14.927: DEBUG/dalvikvm(42): GC_EXPLICIT freed 6350 objects / 409384 bytes in 268ms
04-13 11:51:14.927: INFO/installd(35): unlink /data/dalvik-cache/data@app@com.android.akshara-2.apk@classes.dex
04-13 11:51:14.947: DEBUG/AndroidRuntime(13754): Shutting down VM
04-13 11:51:14.988: DEBUG/dalvikvm(13754): Debugger has detached; object registry had 1 entries
04-13 11:51:15.037: INFO/AndroidRuntime(13754): NOTE: attach of thread 'Binder Thread #3' failed
04-13 11:51:15.117: WARN/RecognitionManagerService(42): no available voice recognition services found
04-13 11:51:16.037: DEBUG/AndroidRuntime(13795): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-13 11:51:16.037: DEBUG/AndroidRuntime(13795): CheckJNI is ON
04-13 11:51:16.287: DEBUG/AndroidRuntime(13795): --- registering native functions ---
04-13 11:51:17.307: INFO/ActivityManager(42): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.android.akshara/.MyActivity }
04-13 11:51:17.387: DEBUG/AndroidRuntime(13795): Shutting down VM
04-13 11:51:17.407: DEBUG/dalvikvm(13795): Debugger has detached; object registry had 1 entries
04-13 11:51:17.477: INFO/AndroidRuntime(13795): NOTE: attach of thread 'Binder Thread #3' failed
04-13 11:51:17.487: INFO/ActivityManager(42): Start proc com.android.akshara for activity com.android.akshara/.MyActivity: pid=13802 uid=10037 gids={1015}
04-13 11:51:19.107: DEBUG/dalvikvm(13802): GC_EXTERNAL_ALLOC freed 713 objects / 53888 bytes in 172ms
04-13 11:51:19.417: INFO/Database(13802): sqlite returned: error code = 1, msg = no such table: android_metadata
04-13 11:51:19.417: ERROR/Database(13802): SELECT locale FROM android_metadata failed
04-13 11:51:19.447: ERROR/Database(13802): Failed to setLocale() when constructing, closing the database
04-13 11:51:19.447: ERROR/Database(13802): android.database.sqlite.SQLiteException: no such table: android_metadata
04-13 11:51:19.447: ERROR/Database(13802):     at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
04-13 11:51:19.447: ERROR/Database(13802):     at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:1950)
04-13 11:51:19.447: ERROR/Database(13802):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1818)
04-13 11:51:19.447: ERROR/Database(13802):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:817)
04-13 11:51:19.447: ERROR/Database(13802):     at com.android.akshara.Dbhelper.checkDatabase(Dbhelper.java:67)
04-13 11:51:19.447: ERROR/Database(13802):     at com.android.akshara.Dbhelper.createDataBase(Dbhelper.java:34)
04-13 11:51:19.447: ERROR/Database(13802):     at com.android.akshara.MyActivity.setupDatabase(MyActivity.java:70)
04-13 11:51:19.447: ERROR/Database(13802):     at com.android.akshara.MyActivity.onCreate(MyActivity.java:24)
04-13 11:51:19.447: ERROR/Database(13802):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-13 11:51:19.447: ERROR/Database(13802):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-13 11:51:19.447: ERROR/Database(13802):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-13 11:51:19.447: ERROR/Database(13802):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-13 11:51:19.447: ERROR/Database(13802):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-13 11:51:19.447: ERROR/Database(13802):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 11:51:19.447: ERROR/Database(13802):     at android.os.Looper.loop(Looper.java:123)
04-13 11:51:19.447: ERROR/Database(13802):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-13 11:51:19.447: ERROR/Database(13802):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 11:51:19.447: ERROR/Database(13802):     at java.lang.reflect.Method.invoke(Method.java:521)
04-13 11:51:19.447: ERROR/Database(13802):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-13 11:51:19.447: ERROR/Database(13802):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-13 11:51:19.447: ERROR/Database(13802):     at dalvik.system.NativeStart.main(Native Method)
04-13 11:51:19.857: ERROR/Dbhelper(13802): createDatabase database created
04-13 11:51:20.578: INFO/ActivityManager(42): Displayed activity com.android.akshara/.MyActivity: 3211 ms (total 3211 ms)
04-13 11:51:22.167: DEBUG/AudioSink(34): bufferCount (4) is too small and increased to 12
04-13 11:51:22.197: INFO/ActivityManager(42): Starting activity: Intent { cmp=com.android.akshara/.PartThree }
04-13 11:51:23.367: INFO/ActivityManager(42): Displayed activity com.android.akshara/.PartThree: 846 ms (total 846 ms)
04-13 11:51:24.098: INFO/ActivityManager(42): Starting activity: Intent { cmp=com.android.akshara/.Akshara }
04-13 11:51:24.317: DEBUG/ERR(13802): List A shuffling[10, 5, 4, 12, 2, 9, 11, 8, 6, 7, 1, 3]
04-13 11:51:24.387: DEBUG/ERR(13802): SIZE : 12
04-13 11:51:24.387: DEBUG/ERR(13802): RANDOM11
04-13 11:51:24.397: DEBUG/ERR(13802): RANDOM3
04-13 11:51:24.397: DEBUG/ERR(13802): RANDOM12
04-13 11:51:24.427: DEBUG/ERR(13802): List after shuffling: [1, 2, 3, 0]
04-13 11:51:25.027: INFO/ActivityManager(42): Displayed activity com.android.akshara/.Akshara: 792 ms (total 792 ms)
04-13 11:51:30.368: DEBUG/dalvikvm(237): GC_EXPLICIT freed 156 objects / 11208 bytes in 300ms
04-13 11:51:35.247: DEBUG/dalvikvm(261): GC_EXPLICIT freed 44 objects / 2072 bytes in 175ms
04-13 11:51:40.387: DEBUG/dalvikvm(120): GC_EXPLICIT freed 823 objects / 45520 bytes in 257ms
04-13 11:52:24.137: DEBUG/AndroidRuntime(14038): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-13 11:52:24.137: DEBUG/AndroidRuntime(14038): CheckJNI is ON
04-13 11:52:24.427: DEBUG/AndroidRuntime(14038): --- registering native functions ---
04-13 11:52:25.517: DEBUG/AndroidRuntime(14038): Shutting down VM
04-13 11:52:25.527: DEBUG/dalvikvm(14038): Debugger has detached; object registry had 1 entries
04-13 11:52:25.569: INFO/AndroidRuntime(14038): NOTE: attach of thread 'Binder Thread #3' failed
04-13 11:52:26.317: DEBUG/AndroidRuntime(14046): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-13 11:52:26.317: DEBUG/AndroidRuntime(14046): CheckJNI is ON
04-13 11:52:26.607: DEBUG/AndroidRuntime(14046): --- registering native functions ---
04-13 11:52:27.937: INFO/ActivityManager(42): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.android.akshara/.MyActivity }
04-13 11:52:27.997: DEBUG/AndroidRuntime(14046): Shutting down VM
04-13 11:52:28.007: DEBUG/dalvikvm(14046): Debugger has detached; object registry had 1 entries
04-13 11:52:28.047: INFO/AndroidRuntime(14046): NOTE: attach of thread 'Binder Thread #3' failed
04-13 11:52:31.938: INFO/ActivityManager(42): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.android.launcher/com.android.launcher2.Launcher }
04-13 11:52:31.988: WARN/InputManagerService(42): Ignoring hideSoftInput of: com.android.internal.view.IInputMethodClient$Stub$Proxy@43fdcda8
04-13 11:52:38.458: DEBUG/dalvikvm(12214): GC_EXPLICIT freed 1120 objects / 83648 bytes in 647ms
04-13 11:52:41.437: DEBUG/AndroidRuntime(14116): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-13 11:52:41.437: DEBUG/AndroidRuntime(14116): CheckJNI is ON
04-13 11:52:41.707: DEBUG/AndroidRuntime(14116): --- registering native functions ---
04-13 11:52:43.177: DEBUG/AndroidRuntime(14116): Shutting down VM
04-13 11:52:43.187: DEBUG/dalvikvm(14116): Debugger has detached; object registry had 1 entries
04-13 11:52:43.231: INFO/AndroidRuntime(14116): NOTE: attach of thread 'Binder Thread #3' failed
04-13 11:52:43.967: DEBUG/AndroidRuntime(14128): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-13 11:52:43.967: DEBUG/AndroidRuntime(14128): CheckJNI is ON
04-13 11:52:44.287: DEBUG/AndroidRuntime(14128): --- registering native functions ---
04-13 11:52:44.927: DEBUG/dalvikvm(13802): GC_EXPLICIT freed 1371 objects / 96560 bytes in 2143ms
04-13 11:52:45.187: ERROR/Database(13802): close() was never explicitly called on database '/data/data/com.android.akshara/databases/akshara.db' 
04-13 11:52:45.187: ERROR/Database(13802): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
04-13 11:52:45.187: ERROR/Database(13802):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1810)
04-13 11:52:45.187: ERROR/Database(13802):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:817)
04-13 11:52:45.187: ERROR/Database(13802):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:851)
04-13 11:52:45.187: ERROR/Database(13802):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:844)
04-13 11:52:45.187: ERROR/Database(13802):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:540)
04-13 11:52:45.187: ERROR/Database(13802):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
04-13 11:52:45.187: ERROR/Database(13802):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
04-13 11:52:45.187: ERROR/Database(13802):     at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:158)
04-13 11:52:45.187: ERROR/Database(13802):     at com.android.akshara.Dbhelper.createDataBase(Dbhelper.java:42)
04-13 11:52:45.187: ERROR/Database(13802):     at com.android.akshara.MyActivity.setupDatabase(MyActivity.java:70)
04-13 11:52:45.187: ERROR/Database(13802):     at com.android.akshara.MyActivity.onCreate(MyActivity.java:24)
04-13 11:52:45.187: ERROR/Database(13802):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-13 11:52:45.187: ERROR/Database(13802):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-13 11:52:45.187: ERROR/Database(13802):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-13 11:52:45.187: ERROR/Database(13802):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-13 11:52:45.187: ERROR/Database(13802):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-13 11:52:45.187: ERROR/Database(13802):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 11:52:45.187: ERROR/Database(13802):     at android.os.Looper.loop(Looper.java:123)
04-13 11:52:45.187: ERROR/Database(13802):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-13 11:52:45.187: ERROR/Database(13802):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 11:52:45.187: ERROR/Database(13802):     at java.lang.reflect.Method.invoke(Method.java:521)
04-13 11:52:45.187: ERROR/Database(13802):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-13 11:52:45.187: ERROR/Database(13802):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-13 11:52:45.187: ERROR/Database(13802):     at dalvik.system.NativeStart.main(Native Method)
04-13 11:52:45.477: INFO/ActivityManager(42): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.android.akshara/.MyActivity }
04-13 11:52:45.577: DEBUG/AndroidRuntime(14128): Shutting down VM
04-13 11:52:45.637: DEBUG/dalvikvm(14128): Debugger has detached; object registry had 1 entries
04-13 11:52:45.710: INFO/AndroidRuntime(14128): NOTE: attach of thread 'Binder Thread #3' failed
04-13 11:52:46.087: WARN/InputManagerService(42): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@43e71578
04-13 11:52:51.597: DEBUG/dalvikvm(120): GC_EXPLICIT freed 266 objects / 13832 bytes in 174ms
04-13 11:52:54.377: DEBUG/ERR(13802): SIZE : 12
04-13 11:52:54.387: DEBUG/ERR(13802): RANDOM9
04-13 11:52:54.387: DEBUG/ERR(13802): RANDOM11
04-13 11:52:54.397: DEBUG/ERR(13802): RANDOM2
04-13 11:52:54.417: DEBUG/ERR(13802): List after shuffling: [3, 1, 0, 2]
04-13 11:52:59.367: DEBUG/ERR(13802): SIZE : 12
04-13 11:52:59.367: DEBUG/ERR(13802): RANDOM1
04-13 11:52:59.377: DEBUG/ERR(13802): RANDOM5
04-13 11:52:59.377: DEBUG/ERR(13802): RANDOM12
04-13 11:52:59.417: DEBUG/ERR(13802): List after shuffling: [0, 3, 2, 1]
04-13 11:53:00.477: DEBUG/ERR(13802): SIZE : 12
04-13 11:53:00.507: DEBUG/ERR(13802): RANDOM5
04-13 11:53:00.507: DEBUG/ERR(13802): RANDOM6
04-13 11:53:00.517: DEBUG/ERR(13802): RANDOM8
04-13 11:53:00.547: DEBUG/ERR(13802): List after shuffling: [1, 3, 0, 2]
04-13 11:53:01.867: DEBUG/ERR(13802): SIZE : 12
04-13 11:53:01.867: DEBUG/ERR(13802): RANDOM3
04-13 11:53:01.867: DEBUG/ERR(13802): RANDOM9
04-13 11:53:01.877: DEBUG/ERR(13802): RANDOM7
04-13 11:53:01.897: DEBUG/ERR(13802): List after shuffling: [3, 1, 0, 2]
04-13 11:53:06.348: DEBUG/ERR(13802): right
04-13 11:53:11.678: DEBUG/ERR(13802): SIZE : 12
04-13 11:53:11.688: DEBUG/ERR(13802): RANDOM6
04-13 11:53:11.688: DEBUG/ERR(13802): RANDOM12
04-13 11:53:11.697: DEBUG/ERR(13802): RANDOM9
04-13 11:53:11.718: DEBUG/ERR(13802): List after shuffling: [1, 0, 3, 2] 
```

# c++ - 当基类和子类具有相同的对象名称但类型不同时，如何访问子类的数据成员。在 C++ 中

> ID：10135623
> 
> 赞同：-1
> 
> 时间：2012-04-13T05:20:45.260
> 
> 标签：c++, visual-c++, inheritance, parent-child

```
struct BaseType
{
    int x1;
    float x2;
};

struct ChildType
{
    int y1;
    float y2;
};

Class Base       
{             
    BaseType  obj;           

    void funcBase(BaseType **ptr)
    {

        *ptr = &obj;                   // When this assignment happens ofcourse obj is of the BaseType as the  LHS ptr is pointing to a BaseType                                            

  Now I want to write a C++ equivalent code of the following 2 algorithmic statements,                                       

        BaseType's obj.x1 = ChildTypes's obj.y1;                       
        BaseType's obj.x2 = ChildTypes's.obj.y1;                  

    }               
};

class Child :: public Base
{
    ChildType obj;  

}; 
```

我想从基地访问孩子的 obj.y1 并将其分配给基地的 obj.x1。

> 但是要记住基础和子对象中的对象名称是相同的“obj”的一件事。

任何人都可以在这方面帮助我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:48:29.917

你的问题有点含糊，但据我所知，你想要这样的东西：

```
ChildType* child = dynamic_cast<ChildType*>( &obj ); 
```

现在`child`指向`obj`，就好像它是 type 一样`ChildType`，假设转换成功。

在此处阅读有关类型转换的更多信息[。](http://www.cplusplus.com/doc/tutorial/typecasting/)

**编辑：**我应该提一下，如果更好的设计可以替代它，应该避免这样的类型转换。也许你应该在这里重新考虑一下你的整体设计。

**EDIT2：**鉴于您最近的编辑，这里有一个更具体的示例代码块：

```
ChildType* child = dynamic_cast<ChildType*>( &obj );
obj.x1 = child->y1;
obj.x2 = child->y2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:49:30.603

我*认为*你有一个 Child 类型的对象，它没有实现 funcBase()，并且你想在这个对象上调用 funcBase() 并让 funcBase() 访问 Child::obj 而不是 Base::obj。如果是这种情况，那么我*相信*您可以将 Child 定义为

```
class Child : virtual public Base
{
    ChildType obj;
    ...
} 
```

[虚拟继承](http://en.wikipedia.org/wiki/Virtual_inheritance)通常用于解决[菱形问题](http://en.wikipedia.org/wiki/Diamond_problem)，但我*认为*您也可以使用它来解决此问题。

如果我的假设不正确，请随意忽略我。

# java - 为什么我的 JComponent 没有显示在背景 JFrame 之上？

> ID：10135627
> 
> 赞同：3
> 
> 时间：2012-04-13T05:21:16.743
> 
> 标签：java, swing, jframe, awt, java-2d

为什么我的 JComponent 没有显示在背景 JFrame 之上？

请检查以下代码：

```
class CounterFrame extends JFrame {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private MyPanel myComponent = new MyPanel();
    private JLabel contentPane = new JLabel(new ImageIcon(getClass()
            .getResource("background/2.jpg")));

    CounterFrame() {
        contentPane.setLayout(new GridBagLayout());
        setContentPane(contentPane);
        add(myComponent);
    }

    }

    class MyPanel extends JPanel {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private Font myFont;
    private String target;
    private String raised = "200000";
    private Image background;

    public MyPanel() {

    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D twoD = (Graphics2D) g;

        RenderingHints rh = new RenderingHints(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        rh.put(RenderingHints.KEY_RENDERING,
                RenderingHints.VALUE_RENDER_QUALITY);
        twoD.setRenderingHints(rh);

        File f = new File("fonts/event.ttf");
        try {
            myFont = Font.createFont(Font.TRUETYPE_FONT, f);
            myFont = myFont.deriveFont(90f);
        } catch (FontFormatException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        twoD.setColor(Color.BLACK);
        twoD.setFont(myFont);

        twoD.drawString(raised,5, 90);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T08:01:18.740

似乎在这里工作正常（在代码的这个 SSCCE 变体中）。

![工作代码](../Images/1d292e140deec48586573ed7ad4bb31f.png)

```
import java.awt.*;
import javax.swing.*;
import java.net.URL;

class CounterFrame extends JFrame {

    private static final long serialVersionUID = 1L;
    private MyPanel myComponent = new MyPanel();
    private JLabel contentPane;

    CounterFrame() {
        try {
            URL url = new URL("http://pscode.org/media/stromlo2.jpg");
            contentPane = new JLabel(new ImageIcon(url));
        } catch(Throwable t) {
            t.printStackTrace();
        }
        contentPane.setLayout(new GridBagLayout());
        setContentPane(contentPane);
        add(myComponent);
    }

    public static void main(String[] args) {
        //Create the frame on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable(){

            @Override
            public void run() {
                CounterFrame rc = new CounterFrame();
                rc.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                rc.pack();
                rc.setVisible(true);
            }

        });
    }
    }

    class MyPanel extends JPanel {

    private static final long serialVersionUID = 1L;
    private String target;
    private String raised = "200000";
    private Image background;

    public MyPanel() {
        setPreferredSize(new Dimension(200,100));
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D twoD = (Graphics2D) g;

        RenderingHints rh = new RenderingHints(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        rh.put(RenderingHints.KEY_RENDERING,
                RenderingHints.VALUE_RENDER_QUALITY);
        twoD.setRenderingHints(rh);

        twoD.setColor(Color.BLACK);

        twoD.drawString(raised,5, 90);
    }
} 
```

我能从中得出的唯一结论是：

1.  找不到您的资源。
2.  您需要学习基本的调试技能。在这种情况下，特别是“检查每个步骤中发生的事情是否确实有效的假设”。如下所示的“三级”语句应分解为 3 个语句，您可以使用`System.out.println()`调试器或调试器检查 3 个结果中的每一个。

### 调试不友好！

```
new JLabel(new ImageIcon(getClass()
        .getResource("background/2.jpg"))); 
```

以及未来的笔记。为了尽快获得更好的帮助，请发布[SSCCE](http://sscce.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:05:03.740

尝试使用`contentPane.add(myComponent);`而不是`add(myComponent);`

# image - Dojo 1.7 localImage 插件问题

> ID：10135631
> 
> 赞同：0
> 
> 时间：2012-04-13T05:21:29.677
> 
> 标签：image, plugins, upload, dojo

我正在将 Dojo Editor 工具用于文章发布页面。我正在尝试测试 LocalImage 插件，但遇到了一些问题。该插件加载正常，但是当我尝试从我的计算机中选择一个图像上传到服务器时，它给了我一些问题。

首先：在我选择计算机上的本地映像后，它没有列出完整的文件路径。它只会列出文件名。因此，它只显示 pic.jpeg 而不是 C:\pic.jpeg。如果我单击插入 Firebug 会给出错误和警告。“NetworkError: 404 Not Found - [http://XXX.XXX.XXX.XXX/images/articles/uploads/test.jpeg](http://XXX.XXX.XXX.XXX/images/articles/uploads/test.jpeg) ” 不推荐使用属性的 nodeValue 属性。改为使用价值。

第二：然后我尝试自己输入本地路径 c:\pic.jpeg。这次没有错误。但是，只有描述标题带有锚点。上面也有同样的警告。 ![问题 1 和 2](../Images/acd950708618e8fe04f623ce48ee55e5.png)

如果我使用图片的 URL，它可以正常工作。

我尝试遵循此页面上的文档：http: [//dojotoolkit.org/reference-guide/1.7/dojox/editor/plugins/LocalImage.html](http://dojotoolkit.org/reference-guide/1.7/dojox/editor/plugins/LocalImage.html)

编辑文章.php

```
 <div data-dojo-type="dijit.Editor" id="editorContent" 
            data-dojo-props="extraPlugins:[{name: 'LocalImage', uploadable: true, uploadUrl: '../../../images/articles/UploadFile.php', baseImageUrl: '../../../images/articles/', fileMask: '*.jpg;*.jpeg;*.gif;*.png;*.bmp'}], 
            onChange:function(){dojo.byId('content').value = this.getValue();}" name="editorContent" placeholder="The HTML content of the article" required maxlength="100000" style="padding:0;"><?php echo $results['article']->content ?>
        </div> 
```

上传文件.php

```
 $upload_path = "../articles/uploads/"; 
$download_path = "../articles/uploads/";
require("JSON.php");
$json = new Services_JSON(); 
```

cLOG.php 正在工作，并在生成的 upload.txt 中显示。

```
[12.04.13 1.03.32]: POSTDATA: 1 FILES
[12.04.13 1.03.32]: 
[12.04.13 1.03.32]:    file: uploadedfile=Array
[12.04.13 1.03.32]: HTML single POST:
[12.04.13 1.03.32]: 
[12.04.13 1.03.32]: file: ../articles/uploads/test.jpeg
[12.04.13 1.03.32]: Json Data Returned:
[12.04.13 1.03.32]: {"file":"..\/articles\/uploads\/test.jpeg","name":"test.jpeg","width":null,"height":null,"type":"jpeg","size":false,"additionalParams":[]} 
```

请帮助一个菜鸟！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:35:19.850

通过更改服务器文件夹权限来修复它！

# c++ - 在模板类中使用向量迭代器

> ID：10135632
> 
> 赞同：3
> 
> 时间：2012-04-13T05:21:31.133
> 
> 标签：c++, templates, stl, iterator

我正在尝试在我正在创建的模板类中创建一个向量迭代器。以下是故障码。

```
void editor<T>::insert()
{   
        typedef typename std::vector<T>::const_iterator itr;
        itr it;
        it = this->buffer.begin();

        for(int i = 0; i < line_num -1; ++i)
        {   
            ++it;
        }

        this->buffer.insert(it, user_text);
        std::cout << "Cool, Your new line has been inserted." << '\n';
    }
    std::cout << '\n';
} 
```

我收到以下编译错误：

```
error: no match for ‘operator=’ in ‘it = ((editor<std::basic_string<char> >*)this)->editor<std::basic_string<char> >::buffer.std::vector<_Tp, _Alloc>::begin [with _Tp = std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > >, _Alloc = std::allocator<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > >, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > >*, std::vector<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > >, std::allocator<std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > > > > >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = std::vector<std::basic_string<char>, std::allocator<std::basic_string<char> > >*]()’ 
```

我感觉编译器对我`typedef`上面的陈述感到困惑，但这就是我所看到的声明正确迭代器的方式，但由于某种原因它无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T05:31:18.347

If `buffer`is a `std::vector< std::vector<T> >`then `buffer.begin()`is a `std::vector< std::vector<T> >::iterator`or `const_iterator`，所以你的`typedef`不匹配。

# java - 如何将多个命名参数传递给 Spring JdbcTemplate？

> ID：10135636
> 
> 赞同：11
> 
> 时间：2012-04-13T05:22:09.190
> 
> 标签：java, database, spring, jdbc

我在 Spring Dao 中有以下代码，它工作得很好 -

```
Object args[] = { userId, restaurantId };
int userOrderCount = getJdbcTemplate()
    .queryForInt(
         "SELECT COUNT(orderid) FROM orders WHERE useridfk_order = ? AND restaurantidfk_order = ?", 
         args
    ); 
```

但是，如果我决定对我的查询使用 NamedParameters，如下所示 -

```
int userOrderCount = getNamedParameterJdbcTemplate()
    .queryForInt(
         "SELECT COUNT(orderid) FROM orders WHERE useridfk_order = :userId AND restaurantidfk_order = :restaurantId", 
         new MapSqlParameterSource(":restaurantId", restaurantId)
             .addValue(":userId", userId)
    ); 
```

我得到了这个例外 -

```
org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'userId': No value registered for key 'userId'. 
```

我知道那句黄金格言“如果没有损坏就不要修复它”。

但是，我还是忍不住想知道为什么会这样？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-13T05:59:58.590

用这个。

```
new MapSqlParameterSource("restaurantId", restaurantId)
    .addValue("userId", userId); 
```

而不是这个。

```
new MapSqlParameterSource(":restaurantId", restaurantId)
    .addValue(":userId", userId); 
```

# linux - 将目录存储为变量以供以后在 linux 脚本中使用

> ID：10135639
> 
> 赞同：8
> 
> 时间：2012-04-13T05:22:30.343
> 
> 标签：linux, bash

在我的脚本中，我将文件的位置（路径）作为变量保存。

例如，文件 A

其内容的一个例子是

fileA=/usr/anotherfolder/somefold/"filenamehere"

但是，当我在脚本中对文件调用命令时，例如：

猫 $fileA

或者

猫“$fileA”

我收到一条错误消息，指出文件或目录不存在。如果我回显 $fileA 以查看输出是什么，然后从终端手动运行 cat，它工作正常，不知道出了什么问题。有什么帮助吗？

一些调试信息：

*   fileA='/home/jacob/Desktop/CS35L/WORK/2/hw/test3/"new"'
*   echo '/home/jacob/Desktop/CS35L/WORK/2/hw/test3/"new"' /home/jacob/Desktop/CS35L/WORK/2/hw/test3/"new"
*   '[''！' -r '/home/jacob/Desktop/CS35L/WORK/2/hw/test3/"new"' ']'

对于这些特定的行

# 检查可读文件

```
echo $fileA
if [ ! -r "$fileA" ]
then
    o=`expr $o + 1`
    echo "$fileA not readable."
    continue    
fi 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T05:41:45.763

如果文件名是`new`(not `"new"`)，则更改

```
fileA='/home/jacob/Desktop/CS35L/WORK/2/hw/test3/"new"' 
```

至

```
fileA=/home/jacob/Desktop/CS35L/WORK/2/hw/test3/new 
```

# perl - Perl在子例程中修改哈希引用

> ID：10135642
> 
> 赞同：12
> 
> 时间：2012-04-13T05:22:53.443
> 
> 标签：perl, hash, subroutine

我无法理解哈希引用和更改哈希，而不是返回它。我想编写一个子例程，它将从哈希返回一个值并修改哈希。我在为它编码时遇到了一些问题。因此，我编写了以下基本代码来理解就地修改哈希。

```
#!/usr/local/bin/perl
#Check hash and array references
#Author: Sidartha Karna
use warnings;
use strict;
use Data::Dumper;

sub checkHashRef{
   my ($hashRef, $arrVal) = @_;
   my %hashDeref = %{$hashRef};

   $hashDeref{'check'} = 2;           
   push(@{$arrVal}, 3);

   print "There:" ;
   print Dumper $hashRef;      
   print Dumper %hashDeref;           
   print Dumper $arrVal

}

my %hashVal = ('check', 1);
my @arrVal = (1, 2);

checkHashRef(\%hashVal, \@arrVal);

print "here\n";
print Dumper %hashVal;
print Dumper @arrVal; 
```

观察到的输出是：

```
 There:$VAR1 = {
          'check' => 1
        };
    $VAR1 = 'check';
    $VAR2 = 2;
    $VAR1 = [
          1,
          2,
          3
        ];
    here
    $VAR1 = 'check';
    $VAR2 = 1;
    $VAR1 = 1;
    $VAR2 = 2;
    $VAR3 = 3; 
```

从输出中，我推断，对 hashDeref 的更改不会修改引用中的数据。我的理解正确吗？有没有办法修改散列变量而不是返回它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-13T05:38:20.283

这是制作（浅）副本`%hashVal`：

```
my %hashDeref = %{$hashRef}; 
```

hash-ref`$hashRef`仍然指向`%hashVal`但`%hashDeref`不指向，它只是一个副本。如果要就地修改传递的 hash-ref，请使用传递的 hash-ref：

```
sub checkHashRef{
   my ($hashRef, $arrVal) = @_;
   $hashRef->{'check'} = 2;
   #... 
```

这将使您的更改保留在`%hashVal`. 在数组的情况下，你永远不会复制，你只是在原地取消引用它：

```
push(@{$arrVal}, 3); 
```

并且更改`$arrVal`显示在`@arrVal`.

# php - PHP 避免过长的 POST

> ID：10135646
> 
> 赞同：0
> 
> 时间：2012-04-13T05:23:11.033
> 
> 标签：php, html, post

这更像是一个技术问题，而不是代码。我有一个包含许多字段（要选择的项目）的 php 表单。自然地，有些项目可能会被选中，而有些则不会。当我将数据从第 1 页发布到第 2 页时，我如何知道选择了哪些？我想测试每个是否为空，但是字段太多，使用或编码感觉一点也不高效。谢谢，

更新编辑：我已经尝试了以下方法，也许它会让我在继续测试回复解决方案之前到达某个地方......

```
<html>
<body>
    <form name="test" id="name" action="testprocess.php" method="POST">
        <input type="text" name="choices[shirt]">
        <input type="text" name="choices[pants]">
        <input type="text" name="choices[tie]">
        <input type="text" name="choices[socks]">

        <input type="submit" value="submit data" />

    </form>
</body>
</html> 
```

然后是第二页：

```
<?php
$names = $_POST['choices'];
echo "Names are: <br>";
print_r($names);

?> 
```

这给出了以下内容：

> 名称为：数组（ [shirt] => sdjalskdjlk [pants] => lkjlkjlk [tie] => jlk [socks] => lkjlkjl ）

现在我要尝试做的是遍历数组，因为在我的例子中的值是数字，所以我将检查哪些字段> 0，因为默认值为 0。我希望这可行......如果不是那么我会让你知道:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:34:57.687

您应该发布您的代码，以便我们更好地了解您想要做什么。

但是据我了解，您正在制作带有复选框的表格。如果要查看复选框是否被选中，可以这样：

```
if(!$_POST['checkbox1'] && !$_POST['checkbox2'] && !$_POST['checkbox3']) 
```

这看起来是否所有三个复选框都为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:42:24.237

试试这个.....

```
 <?php
function checkvalue($val) {
    if($val != "") return true;
    else return false;
}
if(isset($_POST['submit'])) {
    $values = array_filter(($_POST), "checkvalue");
    $set_values = array_keys($values);        
}
?> 
```

通过这种方式，您可以获得已在数组中设置的所有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:43:16.950

只是一个想法：

在表单中创建一个没有值的隐藏输入字段。每当填写/选择任何表单字段时，您`name`都会在此隐藏字段中添加该字段的属性（字段名称使用逗号分隔符保存）。

在执行 a`POST`时，您可以读取此变量，并且只有其中存在的那些字段已被选择/填写在表单中。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T07:00:44.723

我*认为*您正在寻找的是：

```
<form action="submit.php" method="POST">
  <input type="checkbox" name="checkboxes[]" value="this" /> This
  <input type="checkbox" name="checkboxes[]" value="might" /> might
  <input type="checkbox" name="checkboxes[]" value="work" /> work
  <input type="submit" />
</form> 
```

然后在 中`submit.php`，您只需编写：

```
<?php
foreach($_POST['checkboxes'] as $value) { 
  echo "{$value} was checked!";
}
?> 
```

复选框元素名称中的方括号告诉 PHP 将所有具有此名称的元素放入同一个数组中，在本例`$_POST['checkboxes']`中，当然，您可以随意调用复选框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T07:03:00.650

我不确定你的意图。我假设您有多个表单字段，您想将它们分成不同的网页（例如典型的调查表）。

如果是这种情况，请使用会话来存储表单的不同数据，直到按下“最终提交按钮”（例如在最后一页上）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T09:03:57.917

> 当我将数据从第 1 页发布到第 2 页时，我如何知道选择了哪些？

与如何避免对 PHP 进行大型 POST 是一个不同的问题。

假设这是一个数据表...

无论如何都要更新所有内容（如果您正确设置了主键/唯一键）

使用 Ajax 更新单个行，因为它们在前端发生更改

修改该行中的数据时，使用 Javascript 在该行中设置一个标志

或者在提交时将每行的现有数据的表示存储为该行的隐藏字段，例如

```
print "<form....><table>\n";
foreach ($row as $id=>$r) {
  print "<tr><td><input type='hidden' name='prev[$id]' value='" 
     . md5(serialize($r)) . "'>...
} 
```

...在接收端...

```
 foreach ($_POST['prev'] as $id=>$prev) {
     $sent_back=array( /* the field values in the row */ );
     if (md5(serialize($sent_back)) != $prev) {
          // data has changed
          update_record($id, $sent_back);
     }
 } 
```

# python - Python - 执行一个实例？

> ID：10135653
> 
> 赞同：0
> 
> 时间：2012-04-13T05:24:10.750
> 
> 标签：python, class, function

是否可以执行类的实例？我不是说实例化一个类，或者执行一个方法。我的意思是类似于 __string__ 的兄弟，它会返回一个函数。我们称它为 __func__。

```
class ClassFunc (object):
    def __func__ (self):
        print "I'm a class!"

>>> myCF = ClassFunc()
>>> myCF()
I'm a class! 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T05:25:30.127

关闭。你想要[`__call__()`](http://docs.python.org/reference/datamodel.html#object.__call__)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T05:25:25.673

```
>>> class ClassFunc (object):
        def __call__ (self):
            print "I'm a class!"

>>> myCF = ClassFunc()
>>> myCF()
I'm a class! 
```

# android - 无法取消android中的通知

> ID：10135654
> 
> 赞同：0
> 
> 时间：2012-04-13T05:24:10.860
> 
> 标签：android, android-notifications

我有问题，当用户按下通知活动时，它会打开但无法关闭。

这是我的代码：

```
NotificationManager mNotificationManager = 
     (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    int icon = R.drawable.ic_launcher;
    CharSequence tickerText = "Good Morning";
    long time = System.currentTimeMillis();
    Notification notification = new Notification(icon, tickerText, time);
    Context context = getApplicationContext();
    CharSequence contentTitle = "Title";
    CharSequence contentText = "Text";
    Intent notificationIntent = new Intent(this, NotificationManagerDemoActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent,0);
    notification.flags = Notification.FLAG_AUTO_CANCEL;
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
    mNotificationManager.notify(1,notification); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:46:36.177

像这样尝试..希望它会起作用.. notification.flags |= Notification.FLAG_AUTO_CANCEL;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T20:59:09.207

在构建时将 Auto Cancel 设置为 true，`Notification`如下所示。

```
 notificationBuilder.setAutoCancel(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T14:06:28.193

您应该尝试编写如下代码

```
NotificationCompat.Builder mBuilder = 
     new NotificationCompat.Builder(getApplicationContext(), "Channel")
                .setLargeIcon(BitmapFactory.decodeResource(getResources(),
                     R.mipmap.ic_launcher_logo_round))
                .setAutoCancel(true)
                .setContentIntent(pendingIntent)
                .setSmallIcon(R.mipmap.ic_launcher_logo_round);
mNotificationManager.notify(id,mBuilder.build());
.setAutoCancel(true) 
```

# python - 在 Django 和 Heroku 中使用 South 时遇到问题

> ID：10135656
> 
> 赞同：4
> 
> 时间：2012-04-13T05:24:29.533
> 
> 标签：python, django, heroku

我有一个现有的 Django 项目，我刚刚将 South 添加到。

*   我在本地运行了syncdb。
*   `manage.py schemamigration app_name`我在本地跑
*   `manage.py migrate app_name --fake`我在本地跑
*   我提交并推送给heroku master
*   我在heroku上运行了syncdb
*   我`manage.py schemamigration app_name`在heroku上跑
*   我`manage.py migrate app_name`在heroku上跑

然后我收到这个：

```
$ heroku run python notecard/manage.py migrate notecards
Running python notecard/manage.py migrate notecards attached to terminal... up, run.1
Running migrations for notecards:
 - Migrating forwards to 0005_initial.
 > notecards:0003_initial
Traceback (most recent call last):
  File "notecard/manage.py", line 14, in <module>
    execute_manager(settings)
  File "/app/lib/python2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/app/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/app/lib/python2.7/site-packages/south/management/commands/migrate.py", line 105, in handle
    ignore_ghosts = ignore_ghosts,
  File "/app/lib/python2.7/site-packages/south/migration/__init__.py", line 191, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File "/app/lib/python2.7/site-packages/south/migration/migrators.py", line 221, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File "/app/lib/python2.7/site-packages/south/migration/migrators.py", line 292, in migrate_many
    result = self.migrate(migration, database)
  File "/app/lib/python2.7/site-packages/south/migration/migrators.py", line 125, in migrate
    result = self.run(migration)
  File "/app/lib/python2.7/site-packages/south/migration/migrators.py", line 99, in run
    return self.run_migration(migration)
  File "/app/lib/python2.7/site-packages/south/migration/migrators.py", line 81, in run_migration
    migration_function()
  File "/app/lib/python2.7/site-packages/south/migration/migrators.py", line 57, in <lambda>
    return (lambda: direction(orm))
  File "/app/notecard/notecards/migrations/0003_initial.py", line 15, in forwards
    ('user', self.gf('django.db.models.fields.related.ForeignKey')(to=orm['auth.User'])),
  File "/app/lib/python2.7/site-packages/south/db/generic.py", line 226, in create_table
    ', '.join([col for col in columns if col]),
  File "/app/lib/python2.7/site-packages/south/db/generic.py", line 150, in execute
    cursor.execute(sql, params)
  File "/app/lib/python2.7/site-packages/django/db/backends/util.py", line 34, in execute
    return self.cursor.execute(sql, params)
  File "/app/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 44, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: relation "notecards_semester" already exists 
```

我有 3 个模型。部分、学期和记事卡。我在 Notecards 模型中添加了一个字段，但无法在 Heroku 上添加它。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T05:48:22.427

您必须伪造创建表的迁移，然后照常运行其他迁移。

```
manage.py migrate app_name 000X --fake
manage.py migrate app_name 
```

000X 是您在其中创建表的迁移编号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:28:11.357

首先，从 0003_initial 和 0005_initial 的外观来看，您已经完成了多个`schemamigration myapp --initial`添加 create_table 语句的命令。拥有两组这些肯定会导致问题，因为一组将创建表，然后下一组将尝试创建现有表。

您的`migrations`文件夹可能完全被奇怪的迁移污染了。

无论如何，虽然我了解跑步的理论`schemamigration`本地机器和远程机器上运行的理论，但这可能是你问题的根源。Schemamigration 会生成一个新的迁移——如果你必须在你的开发服务器上运行它，提交它，推送它，然后在你的生产机器上再生成一个，你最终可能会得到重叠的迁移。

另一件事：如果您在远程计算机上运行 syncdb 并且它正在生成表，这意味着您的数据库是 100% 最新的——不需要迁移。你会做一个完整`migrate --fake`的匹配你的迁移到你的数据库。

```
I ran syncdb locally.
I ran manage.py schemamigration app_name locally
I ran manage.py migrate app_name --fake locally
I commit and pushed to heroku master 
I ran syncdb on heroku 

I ran manage.py schemamigration app_name on heroku
# if you ran syncdb, your DB would be in the final state.
I ran manage.py migrate app_name on heroku
# if you ran syncdb, your DB would be in the final state. Nothing to migrate. 
```

# sql - 设计关系调查问卷数据库

> ID：10135663
> 
> 赞同：1
> 
> 时间：2012-04-13T05:25:20.767
> 
> 标签：sql, sql-server, ms-access, database-design

我正在尝试为以下访问数据库构建一个简单的 sql 数据库。目前没有关系，我只有两张表，男性和女性，每种形式有 6 个部分。如何设计一种更好的方式，以便最终用户可以连接到数据库并使用 STATA 或 SPSS 进行分析？

![在此处输入图像描述](../Images/bbd9a1754c845a6f227c56f2c78c1cb7.png)

我真的很困惑是应该创建一个包含所有字段的表还是分解成不同的表。该数据库仅针对本研究，因此我不是在寻找通用调查数据库，用户可以在其中创建调查并捕获它们。非常感谢任何反馈或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:15:05.597

我认为将 Access 数据库移动到 SQL Server 中的正确方法是维护 Access 中定义的表结构。这将有助于加载和维护数据。据推测，有人考虑过表结构，您可以利用这些信息。

当然，也有例外，有时您确实想重新组织数据。我的偏好通常是先进行移植，确保可以正常工作，然后再进行任何重组。

我假设 MALE 和 FEMALE 的表格是分开的，因为这些问题取决于性别。

要访问 SPSS 或 STATA 中的数据，请使用视图而不是直接访问表。如果没有更多信息，我猜该视图将使用 UNION ALL 来组合两个表中的数据。

# c++ - 跨多个文件的命名空间出现“未定义的引用”错误

> ID：10135667
> 
> 赞同：1
> 
> 时间：2012-04-13T05:25:28.223
> 
> 标签：c++, reference, namespaces, undefined

我看过几个相关的帖子，但没有遇到这个错误。当我的命名空间存在于多个文件中时，我会在下面收到此未定义的引用错误消息。如果我只编译 ConsoleTest.cpp 并将 Console.cpp 的内容转储到其中，则源编译。

我将不胜感激有关此问题的任何反馈，在此先感谢。

```
g++ Console.cpp ConsoleTest.cpp  -o ConsoleTest.o -Wall

/tmp/cc8KfSLh.o: In function `getValueTest()':
 ConsoleTest.cpp:(.text+0x132): undefined reference to `void Console::getValue<unsigned int>(unsigned int&)'
collect2: ld returned 1 exit status 
```

控制台.h

```
#include <iostream>
#include <sstream>
#include <string>

namespace Console
{
    std::string getLine();

    template <typename T>
    void getValue(T &value);
} 
```

控制台.cpp

```
#include "Console.h"

using namespace std;

namespace Console
{
    string getLine()
    {
        string str;
        while (true)
        {
            cin.clear();
            if (cin.eof()) {
                break;  // handle eof (Ctrl-D) gracefully
            }

            if (cin.good()) {
                char next = cin.get();
                if (next == '\n')
                    break;
                str += next;    // add character to string
            } else {
                cin.clear(); // clear error state
                string badToken;
                cin >> badToken;
                cerr << "Bad input encountered: " << badToken << endl;
            }
        }
        return str;
    }               

    template <typename T>
    void getValue(T &value)
    {
        string inputStr = Console::getLine();
        istringstream strStream(inputStr);

        strStream >> value;
    }
} 
```

控制台测试.cpp

```
#include "Console.h"

void getLineTest()
{
    std::string str;

    std::cout << "getLinetest" << std::endl;

    while (str != "next")
    {
        str = Console::getLine();
        std::cout << "<string>" << str << "</string>"<< std::endl;
    }
}

void getValueTest()
{
    std::cout << "getValueTest" << std::endl;
    unsigned x = 0;
    while (x != 12345)
    {
        Console::getValue(x);
        std::cout << "x: " << x << std::endl;
    }
}

int main()
{
    getLineTest();
    getValueTest();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:28:35.993

模板函数需要在头文件中定义，而不仅仅是声明。编译器需要查看模板实现和模板参数以在 main.xml 中构建您需要的专业化。所以直接把定义放在头部：

```
namespace Console
{
    std::string getLine();

    template <typename T>
    inline void getValue(T &value) {
        string inputStr = Console::getLine();
        istringstream strStream(inputStr);
        strStream >> value;

    }
} 
```

# javascript - 了解控件在 JavaScript 中是否有效的更好选择？

> ID：10135671
> 
> 赞同：2
> 
> 时间：2012-04-13T05:25:46.800
> 
> 标签：javascript, jquery, asp.net

我想知道一个控件在 JavaScript 中是否有效。Asp.Net 中是否有可用的直接客户端 API 可以告诉我控件是否有效？

例如。如果我有 2 个验证器附加到一个文本框，我需要一个可以告诉我文本框是否有效的函数。如果甚至 1 个验证器都无效，那么它应该返回 false。

我似乎找不到可以给我这个的功能。这是我写的一个小帮手，它可以完成这项工作但效率低下：

```
function isControlValid(control) {
    for (i = 0; i < Page_Validators.length; i++) {
        var validator = Page_Validators[i];
        var controlId = validator.controltovalidate;
        if ($(control).attr('id') == controlId && validator.isvalid == false) {
            return false;
        }
    }
    return true;
} 
```

有人有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:32:20.030

下面的代码应该可以工作。

```
function isControlValid(control) {
    var validators = $(control).Validators;
    var isValid = true;
    Array.forEach(validtors, function(item) {
        isValid = isValid && (item.isvalid === true);
    });
    return isValid;
} 
```

**更新**

这比您建议的要好，因为没有迭代整个页面验证器。只有与控件关联的那些用于迭代。`$(control).Validators`用于检索与控件关联的验证器。

# jquery - 如何使圆圈悬停在图像上

> ID：10135674
> 
> 赞同：1
> 
> 时间：2012-04-13T05:26:53.510
> 
> 标签：jquery, css, hover

```
.ec-circle{
width: 420px;
height: 420px;
-webkit-border-radius: 210px;
-moz-border-radius: 210px;
border-radius: 50%;
text-align: center;
overflow: hidden;
font-family:'Kelly Slab', Georgia, serif;
background: #dda994 url(../images/1.jpg) no-repeat center center;
box-shadow:
    inset 0 0 1px 230px rgba(0,0,0,0.6),
    inset 0 0 0 7px #d5ad94;
transition: box-shadow 400ms ease-in-out;
display: block;
outline: none;
} 
```

上面的代码就像我想要的，但不能满足我的需要。

## 我想将圆圈悬停在我的图像上。

它是分辨率为 230 x 231 的图像。当悬停在图像上时，
它只会显示圆形部分。

会怎么样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T07:14:51.917

您只需要在悬停时更改图像的边框半径

```
img:hover{border-radius:50%} 
```

### 边注

而不是计算图像大小的一半并将其赋予图像边界半径值，只需赋予`50%`它！

[在这里查看演示](http://jsbin.com/iyutig)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:51:32.607

您说图像的大小约为 230px 正方形，但您的圆形类是 420px 正方形。我想如果我理解你的问题，你应该使用小于图像大小的圆圈的宽度和高度。

关于悬停，首先，我注意到您使用图像作为背景，所以我假设您拥有的 css 类用于 div。但是div没有`:hover`伪类，所以不能直接用css做hover。如果你想改变一个对象对另一个事件的样式，你必须使用js。

# php - 将 PHP 数组插入到两个 MySQL 表中

> ID：10135677
> 
> 赞同：0
> 
> 时间：2012-04-13T05:27:37.253
> 
> 标签：php, mysql, sql

我想知道将多维值数组插入数据库的最佳方法 - 特别是两个表？我创建了以下 foreach 循环，该循环创建了一个将所有记录插入到一​​个表中的查询：

```
foreach($newPosts as $value) {
            if(!isset($postQuery)) {
                $postQuery = "INSERT INTO posts (primay_key, col1, col2, col3, col4) VALUES ('$value[0]', FROM_UNIXTIME($value[4]), '$value[2]', '$value[1]', '$value[3]')";
            } else {
                $postQuery .= "('$value[0]', FROM_UNIXTIME($value[4]), '$value[2]', '$value[1]', '$value[3]')";
            }
    } 
```

我想将其中一个值存储在单独的表中，因为该值特别大，并且该行的格式为 Longtext。查询数据库时也很少调用此值。我假设将它移动到第二个表中会提高第一个表的查询速度？那是对的吗？

如果我将此值移动到第二个表中，我想将表与第一个表中的 primary_key 链接，这是一个自动增量值。如何遍历这个多维数组并将我的数据插入到两个表中，同时将第一个表的 primary_key 插入到第二个表中？我知道如果我一次运行每个查询，我可以使用 LAST_INSERT_ID() 。有些更新会插入数百行，所以我不想这样做。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:54:03.533

> 我假设将它移动到第二个表中会提高第一个表的查询速度？那是对的吗？

不必要。只会影响性能

*   如果大列被索引（这不太可能，因为 MySQL 限制了索引字段的大小）
*   如果您的查询经常进行全表扫描
*   如果值在大部分情况下为空（超过约三分之一）

正如您所说，通过将其拆分为 2 个表，您失去了多插入的好处。因此，正如您所建议的，您唯一的选择是一次插入一条记录并读回插入 id，或者（使用大量代码和复杂性）使用序列生成器并预分配多个记录 id。

# java - 如何从触摸屏获取输入并保存为位图格式？

> ID：10135678
> 
> 赞同：3
> 
> 时间：2012-04-13T05:27:37.670
> 
> 标签：java, android

我想从设备触摸屏获取签名输入并将该可绘制对象保存到位图中，以便稍后我可以将该位图上传到服务器。任何人都可以提供代码，因为它真的很紧急。

提前感谢每一位读者和帮助者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:31:38.400

您可能应该使用 APIDemos 中的 FingerPaint 应用程序的 TouchPaint。也通过[这个链接](http://blahti.wordpress.com/2010/11/18/how-to-save-jpeg-files-in-the-android-emulator/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:35:06.307

尝试使用 SVG 格式。您需要将所有触摸点 x,y 存储在一个数组中，将其转换为 svg 。通过 w3school 寻求帮助。

# css - 使用 z-index 的 div 中的空间

> ID：10135681
> 
> 赞同：0
> 
> 时间：2012-04-13T05:28:09.360
> 
> 标签：css, image, html, styles

```
 .games_box
    {
    width:575px;
    margin:8px auto;
    background:#f8f7f7;
    padding:8px;
    border-bottom:#000000 1px dotted;
    }

 <div class="games_box">
<a href='#'>
<img src='$host_name/staff/game-$row[0].gif' width='78' height='75'  alt='games' />
    <div id='staff' style='position:relative; top:-50px;z-index:1; left:29px'>
<img src='images/staff_picks.png' alt='staffpick' width='50' height='51' /></div>
</a>
</div> 
```

我把员工 div .. 游戏盒 div 很大.. 我使用'clear：both'.. 但没用..

第 1 次

![在此处输入图像描述](../Images/8c2f44d4f8bb35499ed99cea39066d6c.png)

第 2 次

地方员工挑选图片

![地方员工挑选图片](../Images/976fad967b3c5c27e93b9f0e113480df.png)

第 3 次

最后，z-index 使用了staffpick 图像，图像下有更多空间

![在此处输入图像描述](../Images/366a19de14cf898504f6f9a4798a0b7b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:32:46.200

嗨，您可以像这样给父位置相对，而子给绝对位置

**CSS**

```
.games_box
    {
    width:575px;
    margin:8px auto;
    background:#f8f7f7;
    padding:8px;
    border-bottom:#000000 1px dotted;
    position:relative;
    } 
```

**HTML**

```
<div class="games_box">
<a href='#'>
<img src='$host_name/staff/game-$row[0].gif' width='78' height='75'  alt='games' />
    <div id='staff' style='position:absolute; top:-5px;z-index:1; left:29px'>
<img src='images/staff_picks.png' alt='staffpick' width='50' height='51' /></div>
</a>
</div> 
```

现场演示[http://jsfiddle.net/rohitazad/grE5A/](http://jsfiddle.net/rohitazad/grE5A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:35:34.680

要“占用空间”，您可以使用`margin-top:-50px;`或`position:absolute`像本示例中那样使用[http://jsfiddle.net/grE5A/2/](http://jsfiddle.net/grE5A/2/)。

请注意，我已经为`<a>`标签指定了相对位置，因为它是#staff 需要绝对定位的“父级”。

您在图像下方留出空间的原因是因为`position:relative; top:-50px`工作人员相对于其原始位置拾取移动，但父级仍然表现得像元素处于其原始位置一样。（Z-index 对您尝试执行的操作没有影响。）

# ora-00917 - ORA-06550 和 ORA-00917：插入语句缺少逗号

> ID：10135687
> 
> 赞同：-2
> 
> 时间：2012-04-13T05:28:40.280
> 
> 标签：ora-00917

```
DECLARE 
REG_NO VARCHAR2(20) := & REG_NO;
cursor c1 is select Registration_No ,PROVISIONAL_DIGONOSIS, Remark , Medicine_No ,Dignosis_Date , Precaution Medicine ,No_of_Doses ,Injection_Date ,Status  from Patient_Diagnosis d, Patient_Medicine m , Patient_Injection_Dates  i where d.Registration_No = REG_NO and d.Dignosis_No = m.Dignosis_No  and m.dignosis_no = i.dignosis_no ;

BEGIN
FOR REC1 IN c1
loop
insert into D_DETAIL( reg_no, p_d, remark, m_no, d_date, p_med, doses, i_date, status) values  ( REC1.Registration_No , REC1.PROVISIONAL_DIGONOSIS, REC1.Remark , REC1.Medicine_No, REC1.Dignosis_Date, REC1.Precaution Medicine ,REC1.No_of_Doses , REC1.Injection_Date , REC1.Status );
end loop;
END;

ORA-06550 AND ORA-00917 : COMMA MISSING FOR INSERT STATEMENT IS THE ERROR ....WHAT SHOULD I CHANGE ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:36:35.097

```
insert into D_DETAIL( reg_no, p_d, remark, m_no, d_date, p_med, doses, i_date, status) values  ( REC1.Registration_No , REC1.PROVISIONAL_DIGONOSIS, REC1.Remark , REC1.Medicine_No, REC1.Dignosis_Date, REC1.Precaution Medicine ,REC1.No_of_Doses , REC1.Injection_Date , REC1.Status ); 
```

我会说

```
REC1.Precaution Medicine 
```

应该

```
REC1.Precaution_Medicine 
```

# meteor - Meteor 示例无法在 OS X 上运行：浏览器只需下载文件

> ID：10135688
> 
> 赞同：1
> 
> 时间：2012-04-13T05:28:42.323
> 
> 标签：meteor

每当我运行提供的示例时：排行榜、待办事项。输入地址：localhost:3000 后，浏览器只需下载一个名为“download”的文件。有任何想法吗？

终端说一切正常：

```
 $ meteor
    [[[[[ ~/Dropbox/Projects/JavaScript/meteor/todos ]]]]]
    Running on: http://localhost:3000/ 
```

Chrome 和 Safari 都给了我相同的结果：下载文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:59:22.040

这可能是因为您在 Dropbox 文件夹中运行它。将其移至其他位置，它应该可以工作。

我猜测问题在于 MIME 类型是由 Dropbox 程序设置的，而不是由您机器上的 node.js 服务器处理的。

# primefaces - 如何在 p:fileUpload 上使用 p:ajax oncomplete 事件。使用时出现错误

> ID：10135689
> 
> 赞同：0
> 
> 时间：2012-04-13T05:28:43.057
> 
> 标签：primefaces

我正在使用 PrimeFaces 2.2。我正在使用 p:fileuplaod，当 fileUploads 然后使用更新时，我更改了页面上的图像。这里是。

```
<p:fileUpload id="countryFlag" widgetVar="uploader" description="Image"
      update="Flag" allowTypes="*.jpg;*.png;*.gif;*.jpeg;" auto="true"
      fileUploadListener="#{countryPages_Detail.imageUpload}">

    <p:ajax oncomplete="test('Flag')" />

</p:fileUpload>

<p:graphicImage id="Flag" value="#{countryPages_Detail.imagePath}"
      width="80" height="50" cache="false">

    <f:event type="preRenderComponent" listener="#{countryPages_Detail.putImage}" />                                                 

</p:graphicImage> 
```

我想要使​​用脚本做的是，当上传完成时，当图像被更改时使用 ajax，然后我想检查图像 src 属性。这是我的 test() 函数，它不完整，但在这里

```
function test(imageId) {

    var imgId = imageId;
    var image =  $("#saarcImagesTable tr").find("img[id='imageId']")
    alert("Image change");
} 
```

但我收到错误

> 父级不是 ClientBehaviorHolder 的实例：org.primefaces.component.fileupload.FileUpload@e39f71

为什么我会收到此错误？我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:59:28.017

该`p:fileUpload`组件没有实现消息状态的 ClientBehaviorHolder 接口，因此它不是可以包含 ajax 标记的组件（请参阅[这篇文章](http://forum.primefaces.org/viewtopic.php?f=3&t=16260)）。

我不熟悉 fileUpload 组件，但我在 PF 3.2 的文档中看到它`p:fileUpload`有一个`oncomplete`属性。

# c++ - 编译期间链接到 boost 库失败

> ID：10135695
> 
> 赞同：2
> 
> 时间：2012-04-13T05:29:35.600
> 
> 标签：c++, boost, boost-asio, dynamic-linking

我有一个非常简单的示例程序，我正在尝试编译，但我遇到了链接错误。

## 程序

```
int main()
{
  boost::asio::io_service io;

  boost::asio::deadline_timer t(io, boost::posix_time::seconds(5));
  t.wait();

  std::cout << "Hello, world!\n";

  return 0;
} 
```

## 汇编

我正在使用以下编译选项：

```
g++ -L/usr/lib -lboost_system -lboost_filesystem -lboost_thread -pthread -I/usr/include timer.cpp -o timer 
```

## 输出

我检查了动态库是否存在并且位于 -L 路径中。以下是我得到的错误：

```
/tmp/cc3hJrVk.o: In function `__static_initialization_and_destruction_0(int, int)':
timer.cpp:(.text+0xf0): undefined reference to `boost::system::generic_category()'
timer.cpp:(.text+0xfc): undefined reference to `boost::system::generic_category()'
timer.cpp:(.text+0x108): undefined reference to `boost::system::system_category()'
/tmp/cc3hJrVk.o: In function `boost::system::error_code::error_code()':
timer.cpp:(.text._ZN5boost6system10error_codeC2Ev[_ZN5boost6system10error_codeC5Ev]+0x17): undefined reference to `boost::system::system_category()'
/tmp/cc3hJrVk.o: In function `boost::asio::error::get_system_category()':
timer.cpp:(.text._ZN5boost4asio5error19get_system_categoryEv[boost::asio::error::get_system_category()]+0x5): undefined reference to `boost::system::system_category()'
collect2: ld returned 1 exit status 
```

正如您所看到的，如果您不正确地链接到 libboost_system，似乎会出现这些错误。我已经测试过两次单独安装的 boost，但我已经束手无策了。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:19:09.097

您需要在命令末尾的文件名之后移动所有库。

另外：Boost::System 必须与普通的 boost 库分开构建。因此，如果您没有单独构建它们，它们将不存在。

请参阅此处的第 3 节：

[http://www.boost.org/doc/libs/1_49_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_49_0/more/getting_started/unix-variants.html)

# html - 已经实现时如何在鼠标悬停时更改 tr 颜色？

> ID：10135696
> 
> 赞同：0
> 
> 时间：2012-04-13T05:29:46.403
> 
> 标签：html, css, background, html-table

我正在处理现有项目。我创建了一个简单的表。

```
<table border='0' width='100%'>
  <tr>
    <td></td><td></td>
  </tr>    
  <tr>
    <td></td><td></td>
  </tr>
</table> 
```

我没有在表格上应用任何 CSS 类，但是当我将鼠标悬停在`tr`. 所以已经在`table`某个地方实现了一些 CSS。我想禁用此效果，但我无法更改现有的 CSS。

如何阻止此鼠标悬停在此特定表上的效果。我尝试了一些内联 CSS，但它还没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:32:20.943

只需`!important`在您的 css 上使用，它应该覆盖现有的 css

```
tr:hover {
  background:red !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:36:43.303

您可以尝试使用 "!important;" 重新分配 css 属性 关键词。只需使用此关键字创建新的 css 属性并将其绑定到必要的标记。我认为这是一个 hack，但无论如何它对我很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T05:50:28.677

如果您只想对这个表 tr 进行悬停更改，那么最好为表分配一个 ID 或类，然后编写 CSS。

```
.tableclass tr:hover{
            background:none !important;
 } 
```

# javascript - 正则表达式解析任何 css 字体

> ID：10135697
> 
> 赞同：3
> 
> 时间：2012-04-13T05:29:58.467
> 
> 标签：javascript, regex

只是想知道是否有人有一个久经考验的正则表达式来将一个 css 字体字符串解析成它的各个部分：

*   12px 宋体
*   斜体粗体无衬线
*   12 像素/50 像素绿地
*   ETC

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T06:07:29.510

回答我自己的问题：

```
/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\"\sa-z]+?)\s*$/i 
```

分为：

```
var       parts = rx.exec( str )
  , fontStyle   = parts[1] || 'normal'
  , fontVariant = parts[2] || 'normal'
  , fontWeight  = parts[3] || 'normal'
  , fontSize    = parts[4]
  , lineHeight  = parts[5]
  , fontFamily  = parts[6]
  ; 
```

是的，我意识到这太疯狂了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T05:38:03.763

你的意思是这样吗？

[如何解析 CSS 字体速记格式](https://stackoverflow.com/questions/5618676/how-to-parse-css-font-shorthand-format)

或者，还有[JCSSP](http://www.glazman.org/JSCSSP/index.html)，一个用于解析 CSS 的 JavaScript 库。

# math - 缩放至兴趣点

> ID：10135698
> 
> 赞同：2
> 
> 时间：2012-04-13T05:30:03.787
> 
> 标签：math, opengl, graphics

我有以下变量：

*   兴趣点，即要聚焦的位置（以像素为单位）的位置（x，y）。
*   屏幕宽度，高度是窗口的尺寸。
*   缩放级别，设置相机的缩放级别。

这是我到目前为止的代码。

```
void Zoom(int pointOfInterestX,int pointOfInterstY,int screenWidth,
   int screenHeight,int zoomLevel)
{   
glScalef(1,1,1);
glTranslatef( (pointOfInterestX/2) - (screenWidth/2), (pointOfInterestY/2) - (screenHeight/2),0);

glScalef(zoomLevel,zoomLevel,1);
} 
```

我想做放大/缩小，但将兴趣点保持在屏幕中间。但到目前为止，我所有的尝试都失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T06:27:13.650

您可以像这样开始渲染框架：

```
 glViewport(0, 0, w, h);
 glMatrixMode(GL_PROJECTION);
 glLoadIdentity();
 GLdouble left = (0 - pointOfInterestX) / zoomLevel + pointOfInterestX;
 GLdouble right = (WindowW - pointOfInterestX) / zoomLevel + pointOfInterestX;
 GLdouble bottom = (WindowH - pointOfInterestY) / zoomLevel + pointOfInterestY;
 GLdouble top = (0 - pointOfInterestY) / zoomLevel + pointOfInterestY;
 glOrtho(left, right, bottom, top, -1, 1);
 glMatrixMode(GL_MODELVIEW);
 glLoadIdentity(); 
```

# javascript - 滚动超过一组 div 的偏移量时，将选定的类添加到列表中

> ID：10135700
> 
> 赞同：0
> 
> 时间：2012-04-13T05:30:25.233
> 
> 标签：javascript, jquery, scroll, offset

我想我已经接近了，但我在尝试完成这一点时遇到了麻烦。基本上，当您向下滚动到每个图像时，包含该图像与窗口顶部的偏移量（-500 作为缓冲区）的 div 将向`.selected`左侧的列表元素添加一个类。

[http://jsfiddle.net/H6RTs/](http://jsfiddle.net/H6RTs/)是我的例子

这是基本上发生魔术的代码（有点）：

```
 $(window).bind('scroll', function() {
        // What the current px is from vertical scroll
        var scrollY = window.pageYOffset;
        // They scrolled more than the original offset
        if (scrollY > menuTop) {
            if (menuClone.parent().length === 0) {
                $('#js-current-products').each(function(index, value) {
                    var newIndex = index + 1;
                    var currentProduct = $('.js-current-product-' + newIndex).offset().top - 500;
                    if (scrollY > currentProduct) {
                        $('.js-product-' + newIndex).addClass('selected');
                    }
                });

                stickyDiv.addClass(posFixed).width(clonedWidth);
                menuClone.after(stickyDiv.parent());

            }
        } else {
            $('#js-product-menu li').first().removeClass('selected');
            stickyDiv.removeClass(posFixed);
            menuClone.remove();
        }

    }); 
```

它将类添加到第一个列表项，而不是其他列表项（所以我猜它会一直关注`$('.js-current-product-1')`而不是遍历所有列表项（这将是 3）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:11:29.950

2件事：

**#EDIT - Zeta 循环的方式要干净得多：D#**
1：

```
$('#js-current-products').each(function(index, value) {
    var newIndex = index + 1;
    var currentProduct = $('.js-current-product-' + newIndex).offset().top - 500;
    if (scrollY > currentProduct) {
        $('.js-product-' + newIndex).addClass('selected');
    }
}); 
```

你只是循环通过图像的容器，其中只有一个，所以你需要做的是循环图像本身。一种方法是在循环时将类添加`prod`到它们并给它们一个索引，即：

```
$('#js-current-products .js-current-product').each(function(index, value) {
    var newIndex = index + 1;
    $(this).removeClass('js-current-product').addClass('js-current-product-' + newIndex).addClass('prod');
}); 
```

**＃编辑＃**

2：当您向上滚动时，您还需要删除`selected`该类，这很容易通过在测试条件中添加一个 else 来完成，即：

```
if (scrollY > currentProduct) {
    $('.js-product-' + newIndex).addClass('selected');
    console.log(newIndex);
} else {
    $('.js-product-' + newIndex).removeClass('selected');
} 
```

我很确定就是这样，看看这里的小提琴：http: [//jsfiddle.net/H6RTs/3/](http://jsfiddle.net/H6RTs/3/)

干杯
查理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:10:34.133

您只需遍历所有由 标识的元素`id="js-current-products"`。只有一个元素匹配此选择器。所以

```
if (scrollY > menuTop) {
    if (menuClone.parent().length === 0) {
        $('#js-current-products').each(function(index, value) {
             // matches only one product .... 
```

应该

```
if (scrollY > menuTop) {
    if (menuClone.parent().length === 0) {
        $('#js-current-products div.border').each(function(index, value) {
             // matches all products, but has to use div.border, since 
             // you changed your class names.... 
```

或类似的东西。此外，您不应该更改类名来为每个元素创建唯一的类名。它们是*类名*，而不是*标识符*。

```
$('#js-current-products .js-current-product').each(function(index, value) {
    var newIndex = index + 1;
    $(this).attr('id','js-current-product-' + newIndex);
}); 
```

如果您不滥用课程，那么您也可以`.selected`很容易地删除您的课程：

```
if (scrollY > currentProduct) {
    $('#js-product-menu li').removeClass('selected');
    $('#js-product-' + newIndex).addClass('selected');     
} 
```

[示范](http://jsfiddle.net/H6RTs/1/)

# objective-c - Objective c - 你如何在 Mac OSX lion 中使用 resume 功能

> ID：10135701
> 
> 赞同：4
> 
> 时间：2012-04-13T05:30:25.513
> 
> 标签：objective-c, macos, osx-lion

在 mac OSX Lion 中，引入了一项新功能，用户可以在关闭时暂停所有应用程序，并在再次打开计算机时恢复它们。

我的问题是您需要做些什么来实现与简历的这种兼容性（例如，当您在文本编辑器中打开文件时），因为我已经看到 Photoshop CS5 与简历不兼容。

有没有关于如何做到这一点的指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:48:04.773

这是Apple 文档中[的高级指南](https://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/CoreAppDesign/CoreAppDesign.html#//apple_ref/doc/uid/TP40010543-CH3-SW26)。

（如果这是您所希望的，那不是您事后可以添加到其他人的应用程序中的那种东西。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:38:05.937

此外，请查看Lion WWDC 会话[中的 Resume 和 Automatic Termination 。](https://developer.apple.com/videos/wwdc/2011/?id=119)

# .htaccess - 301 从带有查询字符串的 URL 重定向到具有不同查询字符串的新域

> ID：10135702
> 
> 赞同：7
> 
> 时间：2012-04-13T05:30:37.187
> 
> 标签：.htaccess, redirect, query-string, http-status-code-301

我试图弄清楚如何在我的 htaccess 文件中进行 301 重定向，以将一些文件重定向到新域。这是我需要知道的：

旧网址：[http ://www.example.com/index.php?page=news&id=2366](http://www.example.com/index.php?page=news&id=2366)

新网址：[http ://www.example2.com/news.php?name=23546](http://www.example2.com/news.php?name=23546)

不必自动创建重定向。我可以在 htaccess 文件中对需要重定向的页面进行硬编码，但我只是不知道要使用的格式，因为我读过“标准”301 重定向不适用于查询字符串。

基本上这就是我想要做的，但从我目前的研究来看，这听起来不像可以这样做。

```
redirect 301 /index.php?page=news&id=2366 http://www.example2.com/news.php?name=23546 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T06:07:27.103

您可以使用带有查询字符串匹配条件的重写规则，例如：

```
RewriteEngine On
RewriteCond   %{REQUEST_URI}    ^/index.php$
RewriteCond   %{QUERY_STRING}   ^page=news&id=2366$
RewriteRule   ^(.*)$ http://www.example2.com/news.php?name=23546   [R=301,L] 
```

查看[此博客页面](http://www.simonecarletti.com/blog/2009/01/apache-query-string-redirects/)以获取有关其工作原理的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T11:11:08.097

我有同样的问题，但更复杂，因为我需要丢弃其他参数。

像这样：`my-old-page.php?a=1&b=2&c=3`

我需要使用其中一个字符串并丢弃其他字符串，但该解决方案仅在我想使用最后一个参数 (c=3) 时才有效。如果我想使用任何其他（a=1 或 b=2），它会运行到 404。经过多次努力和搜索，我找到了答案：

```
RewriteCond %{QUERY_STRING}  ^.* ?b=2.* ?$ (without space after the *)

RewriteRule (.*)  http://www.my-webpage.php/new-location-2?  [R=301,L] 
```

解决方法是`".*?"`在参数前后添加使用。

我不知道这是否是最好的解决方案，但它确实有效。

# c# - 二进制阅读器跳过指令

> ID：10135706
> 
> 赞同：1
> 
> 时间：2012-04-13T05:31:05.870
> 
> 标签：c#, breakpoints, binaryreader

我正在尝试从二进制文件中读取`BinaryReader`.

这就是我所说的阅读方法：

```
 foreach (Movie film in TreeBuilder.myMovies)
        {
            if (File.Exists(@"C:\Users\DaPhunk\Documents\Visual Studio 2010\Projects\YLK\Binary\" + film.MovieName + ".txt"))
            {
                string[] myArray = operationManager.BinaryReading(film.MovieName);
                if (myArray != null)
                {
                    this.textStarring.Text = myArray[1];
                    this.textProduced.Text = myArray[2];
                    this.textMusic.Text = myArray[3];
                    this.textYear.Text = myArray[4];
                    this.textTime.Text = myArray[5];
                }
                else
                {
                    MessageBox.Show("An error occured");
                }
            } 
```

这是我的阅读方法：

```
 public string[] BinaryReading(string name)
       {

            FileStream myStream = new FileStream(@"C:\Users\DaPhunk\Documents\Visual Studio 2010\Projects\YLK\Binary\" + name + ".txt", FileMode.Open);
            BinaryReader reader = new BinaryReader(myStream);

            string loadString = reader.ReadString();
            string[] loadArray = loadString.Split(',');

            reader.Close();
            myStream.Close();

            return loadArray;       

       } 
```

现在这些线中的某些东西不起作用。我的文件不是空的，因为它只是一个字符串，我可以读取文件中的内容。

我的问题是我试图找出断点有什么问题，但是一旦我越过这条线：

```
 string loadString = reader.ReadString(); 
```

我的程序再次开始运行。这怎么可能？这使我无法在方法调用后检查我的内容`String[]`以及我的值是什么。

知道为什么吗？提前致谢。

* * *

更新 ：

我试图把我的移到`breakpoint`这里

```
 string[] loadArray = loadString.Split(','); 
```

但是我的程序永远不会停止，所以它永远不会超过上一行。

这也是我的写作方法：

```
 foreach (Movie film in TreeBuilder.myMovies)
        {
            if (film.MovieName == name)
            {
                FileStream myStream = new FileStream(@"C:\Users\DaPhunk\Documents\Visual Studio 2010\Projects\YLK\Binary\" + film.MovieName + ".txt", FileMode.Create);
                BinaryWriter writer = new BinaryWriter(myStream);

                writer.Write(film.MovieName + "," + starring + "," + produced + "," + music + "," + year + "," + lenght);
                writer.Close();
                myStream.Close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:19:19.553

您的字符串将以长度字段为前缀。这使得`.txt`扩展名具有误导性。

由于它“突然重新开始工作”：您是否可以使用文本编辑器打开（并保存）其中一个文件？

此外，您当前的 Read 和 Write 方法不是线程安全的，您应该将 Stream 和 Reader/Writer 对象包含在`using() {}`语句中。

# javascript - jquery addclass 到单击的单选按钮范围

> ID：10135708
> 
> 赞同：1
> 
> 时间：2012-04-13T05:31:27.703
> 
> 标签：javascript, jquery, html, dom

我有以下html代码：

```
<div class="tests">
    <input name="premise" id="premise" type="radio" class="required" value="0"><span>0</span>
    <input name="premise" type="radio" class="required" value="1"><span>1</span>  
    <input name="premise" type="radio" class="required" value="2"><span>2</span>
    <input name="premise" type="radio" class="required" value="3"><span>3</span>
    <input name="premise" type="radio" class="required" value="4"><span>4</span>
    <input name="premise" type="radio" class="required" value="5"><span>5</span>      
    </div> 
```

这是我正在使用的 jquery，不幸的是它不起作用：`jQuery("#premise").children().addClass('redtext');`

我正在尝试将类 redtext 添加到单击的单选框中。因此，如果您单击 value=1 的 radio，则可以在 span 内找到的数字 1 将显示为红色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:34:38.153

好吧，在你的代码中`<span>`不是一个孩子`<input>`......你可以改变 这应该工作：`children``next`

```
$('#premise').next().addClass('redtext'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:39:05.963

您误用了 jQuery children() 运算符。children() 对 DOM 树中元素的子元素进行操作，但在这种情况下，您尝试向其中添加类的跨度是`<input>`标记的兄弟，而不是子元素。所以

```
$("#premise").next().addClass('redtext'); 
```

应该将类添加到`<input>`DOM 树中最近的兄弟，这是`<span>`您正在寻找的。

# iphone - 如果 userinteraction 在 3 秒内为 nil，则调用函数

> ID：10135710
> 
> 赞同：0
> 
> 时间：2012-04-13T05:31:32.453
> 
> 标签：iphone, ios, ios4, ios5

伙计们，我需要以这样的观点调用一个函数，如果三秒钟内没有用户交互，则应该调用该函数我该怎么办？

任何人都可以给出一个有助于这个的逻辑或链接吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:35:23.507

我的建议是覆盖 - (void)touchesBegan: withEvent: 在该视图上。

当您收到触摸事件时，设置一个计时器，并使其时间为 3 秒。如果您收到触摸并且有计时器，请将其触发日期更改为触摸时间后 3 秒。当计时器触发时，调用该函数，并将计时器设置为 nil。

您可以使用移动、移除和取消方法，以使您的计时器在所需活动的正确时间正确触发。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T05:51:57.600

使用 NSTimer 作为：-

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{ 
 UITouch *touch = [[event allTouches] anyObject];
 CGPoint location = [touch locationInView:self.view];
 if ([touch view] == self.view) 
  {
    NSTimer *updateTimer = [NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(updateTime) userInfo:nil repeats:YES];
  }
}

-(void)updateTime
{
NSLog(@"....Update Function Called....");
[self functionName];
} 
```

使用它来调用函数。检查它希望它有帮助。谢谢:)

# android - 单击按钮时显示随机图像

> ID：10135713
> 
> 赞同：1
> 
> 时间：2012-04-13T05:32:19.870
> 
> 标签：android, image, random

我早些时候尝试过，只是变得更加困惑，所以我会尝试更精确。我正在制作一个应用程序，其中有一副 7 张卡片。我想点击牌组并在屏幕上弹出 7 张牌中的一张。到目前为止我有

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final MediaPlayer mpClick = MediaPlayer.create(this, R.raw.click);
        randomM = (EditText) findViewById(R.id.randomM);

        //button 1 start        
        Button bMythos = (Button) findViewById(R.id.mythos);
        bMythos.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                mpClick.start();
                Random r = new Random();
                int n=r.nextInt(7) + 1;
                randomM.setText(String.valueOf(n));
            }
        });
        //button 1 end
    }

} 
```

到目前为止，这显示了我单击的卡片组并生成了一个随机数（文本框几乎让我知道随机数生成器正在工作；当我弄清楚显示时将被删除）。

**所以我的问题** 是如何让随机数与随机卡对应并显示卡？- 这些卡被标记为 mythos1、mythos2 等，所以我认为我可以用 mythos(String.valueOf(n)) 做一些事情，但这没有用（除非我做错了其他事情）[如果你不知道我不知道我在做什么]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T06:02:27.463

试试这个方法

```
 int[] cards={R.drawable.card1,R.drawable.card2,R.drawable.card3,R.drawable.card4,R.drawable.card5,R.drawable.card6,R.drawable.card7};
 Random r = new Random();
 int n=r.nextInt(7);
 imageview.setImageResource(cards[n]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:40:19.690

你的问题有点模棱两可，但无论我了解多少，我建议，如果你确定只有 7 个套牌，为什么不对它们进行硬编码并为每个套牌分配一个值。这样当你调用 random 函数时，它会检查哪个数字是结果，假设是 5，然后调用 setDrawableResource(R.drawable.img5) 等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:41:11.787

您应该将卡片保存在数组或`List`某种形式中。然后，您可以通过它们的编号来引用它们。例如：

```
ArrayList<Card> deck = new ArraList<Card>();

//Fill the ArrayList. Maybe shuffle it.

selectedCard = ArrayList.get(randomNumber); 
```

`Card`可能只是`String`或其他东西，而不是。我不知道你用的是什么类型的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T05:42:08.097

您应该使用 ImageView 而不是 MediaPlayer。您应该将 7 个图像（R.drawables.mythos1，...）分配给 1-7，并`imageView.setDrawableResource(R.drawable.myths1);`根据随机数将其设置为 ImageView。从这里查看示例[获取 ImageView 中可绘制对象的 ID](https://stackoverflow.com/questions/4526585/imageview-drawable-id-in-android)

# c# - 扩展方法的行为与方法中的新对象创建混淆

> ID：10135716
> 
> 赞同：2
> 
> 时间：2012-04-13T05:32:22.150
> 
> 标签：c#, extension-methods

我试图了解 c# 扩展方法的行为，并发现以下内容：

下面是类 Program 的扩展方法，它有一个名为 SeeIt 的字段。

```
public static void Prod(this Program p)
{
   Console.WriteLine("i am in ext- pro" );
   p = new Program();   // look out for this line (call this line as #@2)
   p.SeeIt = 100;
} 
```

现在当我这样调用这个方法时：

```
var pr = new Program();
pr.SeeIt = 200;

pr.Prod();

COnsole.WriteLine(pr.SeeIt); 
```

我看到以下内容：

1.  当我在扩展方法中注释#@2 行时，结果来自扩展方法，即 100。
2.  当我保留第 #@2 行时，结果为 200。

我想知道 ：

*   我在扩展方法中说 p = new Program() 到底发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T05:39:12.443

基本上，它的行为**与**没有`this`. 扩展方法只会使 API 变得方便——它们不会改变行为。

该参数`p`未传递`ref`，因此一旦`p = new Program();`您创建了一个单独且不相关的实例，该实例将**无法**返回给调用代码。因此，调用者将看不到您的更改，并且`100`只会在`Prod`.

或者更具体地说：

```
pr.Prod(); 
```

等同于

```
DeclaringType.Prod(pr); 
```

它将（引用）的值加载`pr`到堆栈上并`Prod`通过静态调用进行调用；

```
public static void Prod(this Program p) 
```

此时，`p`是在堆栈中的位置`arg0`。

```
p = new Program(); 
```

创建一个新对象并分配值**over** `arg0` - 请注意`pr`（引用）的值不受此影响，`arg0`引用的单独内存位置也是如此。

```
p.SeeIt = 100; 
```

通过取消引用将成员分配给对象新对象`arg0`- 同样，*末尾* `pr`的对象对此一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:41:02.497

它正在创建一个新实例，`Program`并且您正在更新该`SeeIt`实例的属性。

a) 当 #@2 被注释时，您正在更新 Program 的原始实例的值，因此设置了属性 100

b) 创建新实例时，旧实例不受影响，属性值不受影响

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:45:53.243

您正在将 p 的引用替换为另一个实例，这不会影响您传递给扩展方法的引用。我认为您要做的是使参数 pa ref 参数，在这种情况下，传递给方法的内容与在方法本身中使用的内容之间的引用是相同的。

不幸的是，您不能执行使用 ref 此参数的扩展方法。

请记住，引用基本上是指向实际类实例的指针。

# solr - solr 完全导入和 clean 完全导入有什么区别？

> ID：10135717
> 
> 赞同：2
> 
> 时间：2012-04-13T05:32:22.773
> 
> 标签：solr, lucene, dataimporthandler

在 solr 中完全导入有两种方法，一种是干净的，另一种是没有的，这两种方法有什么区别？谢谢。

张杰夫

# javascript - 切换背景位置两次

> ID：10135718
> 
> 赞同：0
> 
> 时间：2012-04-13T05:32:23.460
> 
> 标签：javascript, jquery, input, toggle, background-position

我想通过单击相同的按钮两次来取消选择该按钮。

单击女性或男性后，脚本会更改背景位置并将数据正确插入到性别输入中，但是如果再次单击（两次），我想将相同的按钮返回到其原始位置*并删除结果性别输入字段*。

任何人都可以建议修改我的脚本吗？

这应该是一个单独的脚本吗？

谢谢

[http://jsfiddle.net/B4XkL/5/](http://jsfiddle.net/B4XkL/5/)

```
 $(function(){
    $("input[type='button']").click(function() {
      $("input[type='button']").removeClass("button-toggle-on");
        $(this).addClass("button-toggle-on");
    if($(this).hasClass("gnF")) varval = 'female';
  else varval = 'male';
    $("#gender").val(varval);
   });
  }); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:51:49.100

这可以解决问题：

```
$(function(){
    $("input[type='button']").click(function() {

    if($(this).hasClass("button-toggle-on")) {
        $(this).removeClass("button-toggle-on");
        $("#gender").val("");                
    }
    else {
        $(".button-toggle-on").removeClass("button-toggle-on");                    
        $(this).addClass("button-toggle-on");
        $("#gender").val(($(this).hasClass("gnF"))? "female" : "male");    
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:40:17.710

像这样的东西：

```
$(function(){
    $("input[type='button']").click(function() {
        if ($(this).hasClass("button-toggle-on")) {
            $(this).removeClass("button-toggle-on");
            $("#gender").val('');
        } else {
            $("input[type='button']").removeClass("button-toggle-on");
            $(this).addClass("button-toggle-on");
            if($(this).hasClass("gnF")) varval = 'female';
            else varval = 'male';
            $("#gender").val(varval);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:41:41.687

看看这个[**演示**](http://jsfiddle.net/B4XkL/6/)。

```
var $buttons = $("input[type='button']");
$buttons.click(function() {
    $buttons.not(this).removeClass('button-toggle-on');
    $(this).toggleClass('button-toggle-on');

    var varval = '';
    if ($(this).hasClass('button-toggle-on')) {
        varval = $(this).hasClass('gnF') ? 'female' : 'male';
    }
    $("#gender").val(varval);
}); 
```

# jquery - 如何用 javascript 或 jquery 编写这个咖啡脚本？

> ID：10135725
> 
> 赞同：0
> 
> 时间：2012-04-13T05:33:14.820
> 
> 标签：jquery, backbone.js

我正在使用这个coffeescript 到javascript 转换器[http://coffeescript.org/](http://coffeescript.org/)来完成一个coffeescript 教程（以改进我的coffeescript 和jquery）。但是，当我尝试使用最初在 jst.eco 模板文件中找到的以下咖啡脚本时，它不起作用，即使我删除了`<% %>`类似地，我尝试在实时站点上运行代码并找到使用 Firebug 编译的 javascript 但它显示给我的唯一文件是 jquery 文件。

```
<% for entry in @entries.models: %>
  <li><%= entry.get('name') %></li>
<% end %> 
```

你会怎么用jquery写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:37:47.780

这不仅仅是Coffeescript，它是一个生态模板，即嵌入了coffeescript 代码的HTML 模板，类似于JSP 或PHP。它做类似的事情

```
var entry, x, _i, _len, _ref;

x = [];

_ref = this.entries.models;
for (_i = 0, _len = _ref.length; _i < _len; _i++) {
  entry = _ref[_i];
  x.push('<li>');
  x.push(entry.get('name'));
  x.push('</li>');
}

return x; 
```

您可能想看看使用等效的模板引擎。jQuery 本身显然[在 beta-testing 中有一个](http://api.jquery.com/jQuery.template/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:49:24.870

在 jQuery 中，您应该能够编写：

```
<% $.each(this.entries.models, function (key, entry) { %>
  <li><%= entry.get('name') %></li>
<% }) %> 
```

在香草Javascript中

```
<% this.entries.models.forEach(function (entry) { %>
  <li><%= entry.get('name') %></li>
<% }) %> 
```

如果`this.entries.models`是主干集合，则 forEach 方法由下划线提供。

# java - Oauth 刷新令牌 salesforce 流程简化

> ID：10135726
> 
> 赞同：0
> 
> 时间：2012-04-13T05:33:27.657
> 
> 标签：java, web-services, salesforce, oauth-2.0

我目前正在开发一个应用程序，该应用程序基本上从销售人员帐户执行后台获取报告并将它们保存到数据库中，流程或多或少是这样的：

- 用户登录我的应用程序。- 选择添加 salesforce 连接。- 向他展示了一个表单，用于提供消费者密钥（在某些文档中为 client_id）和 consumer_secret，如**开发-远程访问**（在 salesforce 帐户中）中所示。[- 然后应用程序按照此处](http://wiki.developerforce.com/page/Digging_Deeper_into_OAuth_2.0_at_Salesforce.com)所述启动 Web 服务器流程，并显示 Salesforce 登录表单，以便用户可以授权我的应用程序，应用程序获取访问令牌，然后请求刷新令牌。-一旦应用程序完成所有这些过程，它就会获取刷新令牌以在访问令牌过期时更新访问令牌，以便它可以对 API 函数进行后续调用。获取刷新令牌后，用户无需完成所有流程，只需登录我的应用程序并查看他的数据更新。

获取此刷新令牌以执行报告更新，即使用户未登录系统也是如此。

但是，在执行所有操作之前，该用户必须转到“**开发 - 远程访问”**部分以获取使用者和机密并将其提供给应用程序。普通用户不容易做到这一点，有没有办法简化这个？关于如何简化流程的任何经验，我是否看错了流程？顺便说一句，我正在使用 java。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:20:24.167

您可以在自己的开发人员组织中创建一个远程访问设置，然后重新使用它，它会自动共享，您不需要让您的客户创建自己的。

# jakarta-ee - 如何使 Web 服务线程安全？

> ID：10135727
> 
> 赞同：2
> 
> 时间：2012-04-13T05:33:42.960
> 
> 标签：jakarta-ee

Web 服务是 Servlet 的内部实现。并且 web/app 服务器将通过新线程为每个新请求提供服务。

这意味着内部 Web 服务的每个请求都将在新线程中提供服务。现在考虑这个服务有多个消费者。有可能所有消费者同时向提供者发送请求。这意味着这个 Web 服务实现需要是线程安全的才能克服这种情况。

已经知道，没有成员变量会使 Web 服务线程安全。但是，我需要使用成员变量，这些变量是通过 spring bean 注入的。

关于如何使它们线程安全的任何建议？

# 编辑：

根据定义，如果class1，一个线程安全的类正在使用另一个非线程安全的类的对象，那么class1 的线程安全性更高。

我的意思是在我的服务中已经使用了 spring bean，现在，想让它们成为线程安全的。对此有任何建议。

无法想到请求范围，因为在内部它使用的是 jms 消息而不是 http 请求和响应。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:32:25.813

由于您的调用是通过 Spring bean 发生的，因此您需要创建一个 Spring bean 来请求范围 bean。这就是您从 Spring API 中创建此类 bean 的方式。[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-scopes-request](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-scopes-request.The)。请求bean的实现是线程安全的，它使用ThreadLocal内部对象来实现它。

这里还有一个有趣的线程可以解决这个问题。

[我应该把我的 ThreadLocals 放在一个弹簧注入的单例中吗？](https://stackoverflow.com/questions/2218282/should-i-put-my-threadlocals-in-a-spring-injected-singleton)

希望这对您有所帮助。

# java-me - 使用 j2me 在游戏中的诺基亚设备振动

> ID：10135730
> 
> 赞同：4
> 
> 时间：2012-04-13T05:34:02.860
> 
> 标签：java-me, nokia, vibration

我想让我的手机在我的游戏结束时振动。我尝试使用

```
Display display = Display.getDisplay(midlet);
display.vibrate(2000); 
```

但 display.vibrate(2000) 返回 false 并且设备不振动。任何人都可以帮忙。我正在诺基亚 C7 设备上试用它。(塞班^3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:01:07.813

根据[Display](http://java.sun.com/javame/reference/apis/jsr118/javax/microedition/lcdui/Display.html) .vibrate 文档“返回值指示振动器是否可以由应用程序控制。” 如果您在 destroyApp 期间调用振动，则 VM 可能会忽略振动请求。

在调用 MIDlet.notifyDestroyed 之前尝试调用 Display.vibrate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:40:19.173

试试这个代码，看看它是否有效。它在诺基亚 e63 上对我有用

```
package ravi.vibrationClass;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.*;

public class Vibrate extends MIDlet implements CommandListener{
Form form;
Display disp;
Command vib,exit;
public void startApp() {
    form = new Form("Vibration");
    disp = Display.getDisplay(this);
    exit = new Command("Exit", Command.EXIT, 1);
    vib = new Command("Vibrate", Command.OK, 1);
    form.append("Press \"vibrate\" to make the phone vibrate");
    form.addCommand(vib);
    form.addCommand(exit);
    form.setCommandListener(this);
    disp.setCurrent(form);

}

public void pauseApp() {
}

public void destroyApp(boolean unconditional) {
    notifyDestroyed();
}

public void commandAction(Command c, Displayable arg1) {
    if(c == vib){
    disp.vibrate(125);
    }else if(c == exit){
    destroyApp(true);
    }

}
} 
```

# go - 在 Go 中更新日志文件时读取它们

> ID：10135738
> 
> 赞同：44
> 
> 时间：2012-04-13T05:35:10.300
> 
> 标签：go

我正在尝试解析一些日志文件，因为它们是用 Go 编写的，但我不确定如何在不检查更改时一次又一次地重新读取文件的情况下完成此操作。

我希望能够读取到 EOF，等到下一行被写入并再次读取到 EOF，等等。感觉有点像`tail -f`看起来。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-10T23:08:09.250

我已经编写了一个 Go 包[——github.com/hpcloud/tail——](https://github.com/hpcloud/tail)来做到这一点。

```
t, err := tail.TailFile("/var/log/nginx.log", tail.Config{Follow: true})
for line := range t.Lines {
    fmt.Println(line.Text)
} 
```

...

引用kostix的回答：

> 在现实生活中，文件可能会被截断、替换或重命名（因为这就是 logrotate 之类的工具应该做的事情）。

如果文件被截断，它将自动重新打开。要支持重新打开重命名的文件（由于 logrotate 等），您可以设置[Config.ReOpen](https://godoc.org/github.com/hpcloud/tail#Config)，即：

```
t, err := tail.TailFile("/var/log/nginx.log", tail.Config{
    Follow: true,
    ReOpen: true})
for line := range t.Lines {
    fmt.Println(line.Text)
} 
```

`Config.ReOpen`类似于`tail -F`（大写 F）：

```
 -F      The -F option implies the -f option, but tail will also check to see if the file being followed has been
         renamed or rotated.  The file is closed and reopened when tail detects that the filename being read from
         has a new inode number.  The -F option is ignored if reading from standard input rather than a file. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T07:56:30.733

您必须观察文件的更改（使用特定于操作系统的子系统来完成此操作）或定期轮询它以[查看其修改时间（和大小）是否已更改](http://golang.org/pkg/os/#FileInfo)。无论哪种情况，在读取另一块数据后，您会记住文件偏移量并在检测到更改后[读取另一块之前恢复它。](http://golang.org/pkg/os/#File.Seek)

但请注意，这似乎只在纸面上很容易：在现实生活中，文件可能会被截断、替换或重命名（因为这就是像这样的工具`logrotate`应该做的事情）。

有关[此问题](https://stackoverflow.com/q/8270441/720999)的更多讨论，请参阅此问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-01T13:21:45.527

一个简单的例子：

```
package main

import (
    "bufio"
    "fmt"
    "io"
    "os"
    "time"
)

func tail(filename string, out io.Writer) {
    f, err := os.Open(filename)
    if err != nil {
        panic(err)
    }
    defer f.Close()
    r := bufio.NewReader(f)
    info, err := f.Stat()
    if err != nil {
        panic(err)
    }
    oldSize := info.Size()
    for {
        for line, prefix, err := r.ReadLine(); err != io.EOF; line, prefix, err = r.ReadLine() {
            if prefix {
                fmt.Fprint(out, string(line))
            } else {
                fmt.Fprintln(out, string(line))
            }
        }
        pos, err := f.Seek(0, io.SeekCurrent)
        if err != nil {
            panic(err)
        }
        for {
            time.Sleep(time.Second)
            newinfo, err := f.Stat()
            if err != nil {
                panic(err)
            }
            newSize := newinfo.Size()
            if newSize != oldSize {
                if newSize < oldSize {
                    f.Seek(0, 0)
                } else {
                    f.Seek(pos, io.SeekStart)
                }
                r = bufio.NewReader(f)
                oldSize = newSize
                break
            }
        }
    }
}

func main() {
    tail("x.txt", os.Stdout)
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-13T15:06:09.800

我也有兴趣这样做，但还没有（还）有时间解决它。我想到的一种方法是让“尾巴”完成繁重的工作。它可能会使您的工具特定于平台，但这可能没问题。基本思想是使用“os/exec”包中的[Cmd](http://golang.org/pkg/os/exec/#Cmd)来跟踪文件。您可以分叉一个相当于“tail --retry --follow=name prog.log”的进程，然后使用 Cmd 对象上的标准输出读取器来收听它的标准输出。

对不起，我知道这只是一个草图，但也许它会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-20T09:15:47.357

有很多方法可以做到这一点。在现代基于 POSIX 的操作系统中，可以使用 inotify 接口来执行此操作。

可以使用这个包：[https ://github.com/fsnotify/fsnotify](https://github.com/fsnotify/fsnotify)

示例代码：

```
watcher, err := fsnotify.NewWatcher()
if err != nil {
    log.Fatal(err)
}

done := make(chan bool)

err = watcher.Add(fileName)
if err != nil {
    log.Fatal(err)
}
for {
    select {
    case event := <-watcher.Events:
        if event.Op&fsnotify.Write == fsnotify.Write {
            log.Println("modified file:", event.Name)

        }
} 
```

希望这可以帮助！

# css - SCSS/SASS @mixin $list @each 迭代问题

> ID：10135745
> 
> 赞同：2
> 
> 时间：2012-04-13T05:35:51.830
> 
> 标签：css, sass

鉴于我有一个清单：

```
$box-shadow-properties: -webkit-box-shadow, -moz-box-shadow, box-shadow; 
```

我希望能够遍历此列表以获取 mixin：

```
@mixin box-shadow-with-inset($box-shadow-params, $inset-params) {
  @each $property in $box-shadow-properties {
    $property: $box-shadow-params, $inset-params;
  }
} 
```

所以我可以这样称呼：

```
@include box-shadow-with-inset(0px 1px 3px rgba(0, 0, 0, 0.25), inset 0px -1px 0px rgba(0, 0, 0, 0.1)); 
```

没有编译错误，但它不会编译为 CSS 文件——就好像它被完全忽略了一样。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:49:48.290

弄清楚了。显然，当与这样的列表一起使用时，您必须插入属性名称。所以：

坏的：

```
$property: $box-shadow-params, $inset-params; 
```

好的：

```
#{$property}: $box-shadow-params, $inset-params; 
```

# sql - 如何在 PostgreSQL 中使用对引用表的约束来创建外键

> ID：10135754
> 
> 赞同：6
> 
> 时间：2012-04-13T05:36:53.180
> 
> 标签：sql, postgresql, constraints

假设我有以下表格

```
CREATE TABLE plugins (
id int primary key,
type text);

insert into plugins values (1,'matrix');
insert into plugins values (2,'matrix');
insert into plugins values (3,'function');
insert into plugins values (4,'function');

CREATE TABLE matrix_params (
id int primary key,
pluginid int references plugins (id)
); 
```

这一切都按预期工作，但我想添加一个额外的约束，matrix_param 只能引用类型为“matrix”的 pluginid。所以

```
insert into matrix_params values (1,1); 
```

应该成功但是

```
insert into matrix_params values (2,3); 
```

应该失败。

matrix_params 的简单约束不起作用，因为它无法知道 plugins 表中的相应类型是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:05:22.610

您可以为此使用 CHECK 约束。您不能将查询放在 CHECK 约束中，但可以调用函数；因此，我们构建了一个简单的函数来告诉我们 a`pluginid`是否为矩阵：

```
create or replace function is_matrix(int) returns boolean as $$
    select exists (
        select 1
        from plugins
        where id   = $1
          and type = 'matrix'
    );
$$ language sql; 
```

并将其包装在 CHECK 约束中：

```
alter table matrix_params add constraint chk_is_matrix check (is_matrix(pluginid)); 
```

然后：

```
=> insert into matrix_params values (1,1);
=> insert into matrix_params values (2,3);
ERROR:  new row for relation "matrix_params" violates check constraint "chk_is_matrix" 
```

FK 负责参照完整性和级联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T08:21:34.537

在引用表中使用复合键，在引用表中使用`CHECK`约束，例如

```
CREATE TABLE plugins (
id int primary key,
type text, 
UNIQUE (type, id)
);

CREATE TABLE matrix_params (
id int primary key,
plugintype text DEFAULT 'matrix' NOT NULL
   CHECK (plugintype = 'matrix'),
pluginid int NOT NULL,
FOREIGN KEY (plugintype, pluginid)
   references plugins (type, id)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:32:24.593

处理此问题的一种方法是使用可序列化事务。

[http://wiki.postgresql.org/wiki/SSI#FK-Like_Constraints](http://wiki.postgresql.org/wiki/SSI#FK-Like_Constraints)

# c - C、unix 和用 write()、open() 和 lseek() 覆盖字符

> ID：10135755
> 
> 赞同：5
> 
> 时间：2012-04-13T05:36:53.543
> 
> 标签：c, file, seek

我需要将文本文件中的 a 字符替换为“？”。它没有按预期工作。

该文件的内容为“abc”（不带引号），我必须使用 unix 系统调用：lseek()、open() 和 write()。我不能使用标准的 C 文件 I/O 函数。

该计划最终将其扩展为更通用的“查找和替换”实用程序。

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

int main(){

int file = open("data", O_RDWR); //open file with contents 'abc'
lseek(file,0,0); //positions at first char at beginnging of file. 
char buffer;
read(file,&buffer, sizeof(buffer));
printf("%c\n", buffer); // text file containing 'abc', it prints 'a'. 

if (buffer == 'a'){
    char copy = '?';
    write(file,&copy,1); //text file containing 'abc' puts '?' were 'b' is.
    }

close(file);
} 
```

文件“数据”包含**abc**，我想**用****？**并使其成为**？bc**，但我得到**了一个？c**

**read()**正在读取正确的字符，但**write()**正在写入下一个字符。为什么是这样？

一直在谷歌搜索几个小时。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T05:42:19.697

在某种程度上，答案实际上嵌入在您自己的代码中。

不需要您之后立即执行的`lseek`调用，`open`因为当您第`open`一个文件时，当前的查找偏移量为零。

每次成功`read`或`write`操作后，寻道偏移量向前移动读取/写入的字节数。（如果您添加`O_APPEND`到您`open`的查找偏移量也将在每次写入*之前*移动到当前文件末尾，但这与此时无​​关。）

由于您成功`read`了一个字节，因此您的查找偏移量从 0 移动到 1。如果要将其放回 0，则必须手动执行此操作。

（当然，您还应该检查每个操作是否确实成功，但我假设您在此处为简洁起见忽略了这一点。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:43:44.283

您对 read() 的调用将文件指针向前移动一个字节 - 即从 0 到 1。由于您使用相同的文件描述符（“int file = ...”）进行读取和写入，因此位置相同读写。

要覆盖刚刚读取的字节，您需要在 lseek() 之后返回一个字节

```
(buffer == 'a') 
```

成真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-14T08:12:20.253

lseek 放错地方了。一旦找到'a'，它就会写'?' 在下一个可用位置（恰好覆盖了“b”）。要修复，您需要在编写之前使用 lseek 更改当前位置。

```
if (buffer == 'a'){
char copy = '?';
lseek(file,0,SEEK_SET); //positions at first char at beginnging of file.
write(file,&copy,1); //text file containing 'abc' puts '?' were 'b' is.
} 
```

# javascript - 将 class="transition" 添加到网站上所有链接的脚本

> ID：10135756
> 
> 赞同：0
> 
> 时间：2012-04-13T05:37:02.080
> 
> 标签：javascript, jquery, class, add, transition

无论如何我可以使用javascript代码为网站上的每个链接添加一个类吗？

我这样做的原因是我为所有在我的网站上切换页面的链接添加了淡入和淡出，但是我必须将 class="transition" 添加到网站上的所有链接。

必须有比编辑所有链接更简单的方法。. .

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:38:57.760

在 jQuery 中，您只需这样做（这应该是不言自明的）：

```
$(document).ready( function() {
    $('a').addClass("transition");
}); 
```

虽然，如果你可以选择所有的链接来添加一个类，你不能只在链接标签而不是类上做淡入/淡出吗？我想我想了解你是如何淡入淡出的。

# javascript - AppendChild 和 for 循环问题

> ID：10135757
> 
> 赞同：0
> 
> 时间：2012-04-13T05:37:04.153
> 
> 标签：javascript, forms, function, for-loop, appendchild

我有两个我无法弄清楚的问题。我正在使用 javascript 来计算复利。我的计算利息的公式有效，但我需要在计算之后出现一个表格利率表（以逐期显示每次应计的金额），然后是最终的总利息金额和总利息金额。这就是我的代码的样子：

```
<head>
    <title></title>
<script type="text/javascript">
    function rateSched(amnt, prd, rte, namt) {
        for (i = 0; i < periods; i++) {
            if (!document.getElementsByTagName) return;
            tabBody = document.getElementsByTagName("tbody").item(0);
            row = document.createElement("tr");
            cell1 = document.createElement("td");
            cell2 = document.createElement("td");
            cell3 = document.createElement("td");
            cell4 = document.createElement("td");
            textnode1 = document.createTextNode(amnt);
            textnode2 = document.createTextNode(prd);
            textnode3 = document.createTextNode(rte);
            textnode4 = document.createTextNode(namt);
            cell1.appendChild(textnode1);
            cell2.appendChild(textnode2);
            cell3.appendChild(textnode3);
            cell4.appendChild(textnode4);
            row.appendChild(cell1);
            row.appendChild(cell2);
            row.appendChild(cell3);
            row.appendChild(cell4);
            tabBody.appendChild(row);
        } 
    }
    var deposit;
    var periods;
    var interest;
    var newamount = deposit * (Math.pow(1 + interest, periods) - 1) / interest;
    var i=0;

    function calcAmt(form1) {
        deposit = form1.dp.value;
        interest = form1.rt.value;
        periods = form1.pr.value;
        form1.amt.value = Math.round(deposit * (Math.pow((1 + interest / 100), periods)) * 100) / 100;
        form1.intr.value = Math.round((deposit * (Math.pow((1 + interest / 100), periods)) - deposit) * 100) / 100
    }
</script>
</head>
<body>
<center>
    <form method="get" name="form1" onreset="form1.dp.focus()">

    <table border="5" bgcolor="#BDBDBD" cellpadding="2" width="300px">
    <tr><td colspan="2" align="center">
    <b><font size="5" color="#4B088A">Compound Interest</font></b>
    </td></tr>

    <tr><td align="right">Initial Deposit</td><td>
    <input type="text" name="dp" value=""/></td></tr>

    <tr><td align="right">Interest Rate (% Value)</td><td>
    <input type="text" name="rt" value=""/></td></tr>

    <tr><td align="right">Periods</td><td>
    <input type="text" name="pr" value=""/></td></tr>

    <tr><td align="right">Final Amount</td><td>
    <input type="text" name="amt" value=""/></td></tr>

    <tr><td align="right">Total Interest</td><td>
    <input type="text" name="intr" value=""/></td></tr>

    <tr><td>
    <input type="button" name="calc" value="Calculate" size="13" onclick="calcAmt(form1);rateSched(deposit,interest,i,newamount);return false;"/></td>

    <td></td></tr>
    </table>
    </form>

    <br />

    <table border='1' width="300px">
    <tbody>
    <tr><td>Amount</td><td>Period</td><td>Rate</td><td>New Amount</td></tr>
    </tbody>
    </table>

    <br />

    <table>
    <tr><td align="right">Final Amount</td><td>
    <input type="text" name="amt" value="" size="13"/></td></tr>

    <tr><td align="right">Total Interest</td><td>
    <input type="text" name="intr" value="" size="13"/></td></tr>
    </table>

    </center>
</body>
</html> 
```

我的问题是新表格行应该附加到较低的四列表格而不是上部表格，它们应该显示每个时期而不是相同的列，底部的“最终金额”和“总利息”做不用onclick填写。

编辑：最新版本的代码有问题，如评论中所述：

```
function calcAmt(form1) { 
    var newamount = deposit * (Math.pow(1 + interest, periods) - 1) / interest; 
    deposit = form1.dp.value; 
    interest = form1.rt.value; 
    periods = form1.pr.value; 
    form1.amt.value = Math.round(deposit * (Math.pow((1 + interest / 100), periods)) * 100) / 100; 
    form1.intr.value = Math.round((deposit * (Math.pow((1 + interest / 100), periods)) - deposit) * 100) / 100 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:44:51.273

要定位正确的`tbody`标签，您应该在其上放置一个 ID 并使用它，`document.getElementById("xxx")`因为这将保证您获得正确的标签，而无需依赖 HTML 文档中的特定位置索引。

仅供参考，所有表格都有一个`tbody`标签，无论它是否在您的 HTML 中。

您可以在此处查看我如何`document.getElementById("results")`将结果放入正确的表格中：http: [//jsfiddle.net/jfriend00/MqMtd/](http://jsfiddle.net/jfriend00/MqMtd/)

此外，您打算成为局部变量（而不是全局变量）的函数内的所有变量都应该在它们前面有 var 。您正在使用很多隐式全局变量（从未明确声明的变量），这是一种非常糟糕的做法。

的值`newAmount`无效，因为初始化它的代码在填充它所依赖的变量之前运行。我建议您将值设置`newAmount`在`calcAmt()`它所依赖的其他值的设置位置。

# linux - GTK 和 Qt 的功能区界面

> ID：10135758
> 
> 赞同：8
> 
> 时间：2012-04-13T05:37:09.617
> 
> 标签：linux, qt, user-interface, gtk, ribbon

是否可以在 GTK 或 Qt 中的 Windows7 中实现功能区界面？如果是怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T06:21:07.767

是的，功能区小部件的一些库已经发布。

![功能区小部件它 GTK#](../Images/5c114cd8feea8be953076c4c39a46320.png)

[看到[这个](http://tirania.org/blog/archive/2007/Aug-30-1.html)帖子和[这个](http://qiacat.blogspot.com/2009/04/ribbon-ui-korat-ui.html)。]

还有[QtitanRibbon](http://qt-project.org/forums/viewthread/4214)，它是用于 QT 的 Microsoft 功能区 UI 的实现。

![Qtitan 丝带](../Images/0fd114afb53516da1f1a658254e6b6f4.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T23:07:29.067

我没有足够的代表投票或发表评论，但@Daniele Lupo 关于需要签署协议的评论并不完全正确。有足够多的现有技术表明微软不会获得该专利。

来源：[功能区（计算）](http://en.wikipedia.org/wiki/Ribbon_(computing))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T07:42:29.797

请注意，为了使用功能区，您必须接受[Office UI 许可](http://msdn.microsoft.com/en-US/office/aa973809.aspx)（参见第 3 部分），即使您不使用它的库而是创建自己的库来重新创建相同的外观和感觉，因为他们有一些关于这个界面。如果你接受它，你在它的实现上没有问题，否则我不知道。

# xml - 将存储在表中的数据插入 XMLspy？（稍后用于对数据进行诊断）

> ID：10135760
> 
> 赞同：1
> 
> 时间：2012-04-13T05:37:30.743
> 
> 标签：xml, xsd, dtd

我有很多数据表，我需要对表（它们的数据）运行诊断，所以我想将数据插入到`XMLspy`表中，并为表生成 xml 文件。可能吗 ？也许与`Oxygen`？

我试图寻找可以执行以下操作的特定教程，但是找不到：

以一个有几行和几列的简单表格为例，所以我想把它的值

在一个 XMLspy 中，然后生成一个 XML 文件。

是否可以使用该程序输入值并最终生成

一个 XML 文件？如果是这样，你能指导我到网站/教程吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:25:32.473

如今，许多 SQL 引擎能够自动生成格式为 XML 的查询结果。例如，Microsoft SQL Server 提供了一个非常简单的模式，下面是[在线书籍](http://msdn.microsoft.com/en-us/library/ms188273.aspx)的摘录。

```
SELECT Cust.CustomerID, 
       OrderHeader.CustomerID,
       OrderHeader.SalesOrderID, 
       OrderHeader.Status,
       Cust.CustomerType
FROM Sales.Customer Cust, Sales.SalesOrderHeader OrderHeader
WHERE Cust.CustomerID = OrderHeader.CustomerID
ORDER BY Cust.CustomerID
FOR XML AUTO 
```

生成的 XML 可能如下所示：

```
<Cust CustomerID="1" CustomerType="S">
  <OrderHeader CustomerID="1" SalesOrderID="43860" Status="5" />
  <OrderHeader CustomerID="1" SalesOrderID="44501" Status="5" />
  <OrderHeader CustomerID="1" SalesOrderID="45283" Status="5" />
  <OrderHeader CustomerID="1" SalesOrderID="46042" Status="5" />
</Cust>
... 
```

您可以为此编写脚本，以根据需要处理 XML 片段或任何其他附加逻辑。

如果您开始编写脚本，另一种涉及一些脚本（Windows 上的 C#）的简单方法是使用表示所需数据的某种查询来加载 ADO.NET 数据集，然后将 ADO.NET 序列化为 XML 文件.

这个脚本：

```
using System;
using System.Data;
using System.Data.OleDb;
class Script
{
    public static void Main()
    {
        using(OleDbConnection cn = new OleDbConnection("Provider=SQLOLEDB;Data Source=localhost;Initial Catalog=NORTHWIND;Integrated Security=SSPI"))
        {
            using (OleDbDataAdapter adapter = new OleDbDataAdapter("select EmployeeID, LastName, FirstName, Title from Employees", cn))
            {
                DataSet d = new DataSet("Customers");
                adapter.Fill(d, "Customer");
                d.WriteXml(@"c:\temp\MyXml.xml", XmlWriteMode.IgnoreSchema);
            }
        }
    }
} 
```

将产生一个具有这种结构的 XML：

![QTAsistant XML 图](../Images/710388bc5efa7aa5f57d75486b8a5df5.png)

如果您的数据库不支持此功能，或者您更喜欢不同的解决方案，并且**您的 XML 必须遵循规定的 XSD**，那么我可以代表[QTAssistant](http://paschidev.com)（我与它相关联）在相当长一段时间内具有此功能; 它被称为 XML Builder，它基本上使用 XSD 和一组 SQL 语句之间的 XML 映射，其结构与 XML 文档的层次结构相匹配。

如果您决定尝试一下，您必须先注册才能下载该工具；嵌入式帮助有一个关于如何设置演示的分步指南，因为它带有一个功能示例，位于 Modules > XML Builder > Samples > Recursive Sample 主题下。该示例需要 Microsoft SQL Server 版本，但它可以与您的计算机上安装了 OLEDB 提供程序的任何其他数据库一起使用，包括 Excel 或 Access。

交互时，加载的示例如下所示：

![QTAssistant XML 构建器模块](../Images/c3935cda450cc6645cb0498b5a667ba2.png)

# serial-port - 波特率的数据传输速度变化

> ID：10135765
> 
> 赞同：1
> 
> 时间：2012-04-13T05:37:59.853
> 
> 标签：serial-port, baud-rate

我想知道更改串行通道的波特率是否会显着增加数据传输（比如我将波特率从 9600 更改为 115200）？

由于串行数据传输协议，我感到困惑。我怀疑它会影响明显的传输速度。

PS：9600 * 12 = 115200

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:47:30.600

嗯，是的，它通常会。在所有其他条件相同且两端都能够以更高容量运行的情况下，更快的比特率将允许更快的传输速度。这就是 ADSL 优于 56K 调制解调器以及 100Mb/s LAN 优于 10Mb/s 的原因。

现在，只要比特率是瓶颈，这就是事实。在某些时候，它将不再是瓶颈，更高的比特率不会提高速度。这是否发生*在*115K 之前取决于很多事情。

# bash - 我可以使用文件作为 awk 从其他文件列表中删除的模式吗？

> ID：10135768
> 
> 赞同：4
> 
> 时间：2012-04-13T05:38:05.667
> 
> 标签：bash, shell, scripting, awk

我想使用 awk 替换文件列表中的文本。我认为这是适合这项工作的工具，因为：

“在处理文本文件时，有几种任务会重复发生。您可能想要提取某些行并丢弃其余的行。或者您可能需要在某些模式出现的地方进行更改，但不理会文件的其余部分。”

[http://www.gnu.org/software/gawk/manual/gawk.html](http://www.gnu.org/software/gawk/manual/gawk.html)

这正是我想做的。

awk 读取 filelist.txt（这是一个包含要修改的每个文件的路径的文件）匹配 pattern.txt（这是一个包含 javascript 的文件，并且是我希望从 filelist 中包含的所有 htm 文件中剔除的文件。文本）

我使用 filelist.txt 的原因是有几个文件要删除 javascript，它们位于多个位置。

我想使用 pattern.txt 的原因是 javascript 包含各种各样的东西，比如空格、特殊字符等。

如果我尝试为 awk 提供整个 javascript，我将不得不一个接一个地转义其中包含的所有特殊字符，这将非常耗时。（而且可能行不通，而且非常复杂！）

如果我尝试只放置 javascript 的开头和结尾，例如：

```
awk '/<\/SCRIPT>/{p=1;print}/<\/script>/{p=0}!p' 
```

我冒着删除所有嵌入式 javascript 实例的风险，而不仅仅是想要的。

我想用 awk 做的事情可行吗？

这取决于我的信念，即为它提供文件将使它将文件的全部内容解释为模式，而不是在遇到的第一个符号上窒息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:05:17.933

我不确定这`awk`是适合这项工作的工具。它通常打印到标准输出，而您似乎想要覆盖原始文件。

为此，Perl 有一个内置机制：`perl -i.bak`将覆盖文件，为每个文件创建一个带有可选后缀的备份副本`.bak`；如果省略后缀，则不会得到备份。

如果我正确理解了您的模式匹配方案，那么您需要从数据文件中删除一行相当多的 JavaScript 代码。但是，这些文件很可能包含 JavaScript 的其他片段，因此您不能简单地查找具有简单开头的行。同样，我认为 Perl 会更好。您可以将`pattern.txt`文件读入一个变量，然后从该变量创建一个带有适当修饰的正则表达式，以抑制元字符的所有特殊含义（[`\Q`并且`\E`](http://perldoc.perl.org/perlre.html#Regular-Expressions)；您的 JavaScript 会包含`\E`吗？）。Perl 允许您将整个文件 slurp 到内存中，然后将多行正则表达式应用于整个文件——这些属性可能在这段代码中很有用。我不确定是否（如何）啜饮与`-i`选项; 那将不得不检查。

这些特殊技巧中没有一个是现成的`awk`（甚至不是`gawk`），这让我认为这`awk`可能不是这项工作的最佳工具。我使用 Perl 是因为我很久以前就学会了它。我希望 Python 或 Ruby 或任何其他较新的脚本语言也可能能够管理它。

* * *

## Perl 演示

### slurper.pl

```
#!/usr/bin/perl -i.bak
use strict;
use warnings;

my $pattfile = shift;
my $pattern;
{
    open my $ph, '<', $pattfile or die "Failed to open $pattfile: $!";
    local $/;
    $pattern = <$ph>;
}

# chomp removes what's in $/ - don't chomp while $/ is undef!
chomp $pattern;

my $regex = qr{ \Q$pattern\E }mx;

# Slurp each file in turn
local $/;
while (<>)
{
    s/$regex//g;
    print;
} 
```

### 前

磷：

```
X ok X ok 
```

X：

```
abcXdef
X ok X ok 
```

是：

```
abcXdef
X ok X ok
no x's here 
```

z:

```
no x's here either
abcXdef
X ok X ok 
```

### 执行

```
$ perl slurper.pl p x y z
$ ls ? ?.bak
p     x     x.bak y     y.bak z     z.bak
$ 
```

### 后

磷：

```
X ok X ok 
```

X：

```
abcXdef 
```

是：

```
abcXdef

no x's here 
```

z:

```
no x's here either
abcXdef 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:19:24.790

[TXR](http://www.nongnu.org/txr/)执行整个文件模式匹配。在 TXR 模式中，您只需转义一个字符`@`。这有一个特殊的含义，所以要编码一个文字`@`，只需写`@@`。（多一个字符有特殊含义，实际上：一个空格（即不与另一个空格相邻）。这被视为正则表达式“匹配一个或多个空格”，这是您经常想要的一点松弛。

```
@(collect)
@  (cases)
text you want to
change to something
else
@    (output)
multi line
replacement
@    (end)
@  (or)
@line
@    (output)
@line
@    (end)
@  (end)
@(end) 
```

该语言不太适合文本过滤，您只需保持大量文本相同，并在几个地方替换，但它会通过一点编码来完成这项工作。在这里，我们有一个面向行的`@(collect)`情况，其中包含两种模式匹配情况：一个多行事物，以及一个仅抓取一行的后备情况。如果多行的东西匹配，输入会自动前进过去；这就像标记化，除了超过行而不是字符。

您可以将尾随上下文（未使用）与 匹配`@(trailer)`，例如

```
text you want to
change to something
else
@(trailer)
which must be followed by
this part that is not
consumed; and the match
continues within this part 
```

您要更改为其他内容的文本可以分解为位于单独文件中的模式函数：

```
@(define matchtext)
text you want to
change to something
else
@(end)
@(define replacement)
@  (output)
multi line
replacement
@  (end)    
@(end) 
```

然后只是：

```
@(load "text-and-replacement")
@(collect)
@  (cases)
@    (matchtext)
@    (replacement)
@  (or)
@line
@    (output)
@line
@    (end)
@  (end)
@(end) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:18:48.280

好吧，我在命令行上失败了，但我成功地完成了我的任务。

我使用了一个名为 easy find found @ [http://www.devon-technologies.com](http://www.devon-technologies.com)的程序，并使用变量 createDocumentFragm 来查找所有已更改的文档。

然后我使用 Search&Replace found @ [http://searchreplaceapp.com](http://searchreplaceapp.com)并粘贴了整个 JavaScript，不包括开始和结束处的脚本标签，第二遍手动取消隐藏文件，然后手动删除了 12 个 JavaScript 的 glob导致 find&replace 崩溃的 1050。我不得不手动编辑这些。

所以...在命令行上失败，传递 lame-o gui 工具。

非常感谢大家的回答。

:(

（我认为需要学习 Perl，这是一项值得的努力，因为我怀疑在不久的将来我会遇到类似的实例。）

# android - 在 google play 上发布付费应用

> ID：10135769
> 
> 赞同：-1
> 
> 时间：2012-04-13T05:38:07.303
> 
> 标签：android

我是一名澳大利亚的安卓开发者。我用我的澳大利亚信用卡支付了 25 美元购买了一个 google play 帐户。现在我可以发布免费应用程序，但不能发布付费应用程序。我也有 google checkout 帐户，其电子邮件 ID 相同，提供了我朋友的美国地址和电话号码，但我无法链接我的 google checkout 和 google play 帐户。此外，当我搜索此问题的解决方案时，他们说转到开发人员控制台上的“编辑个人资料”并“设置商家结帐帐户”，这在编辑个人资料部分不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:17:26.637

我猜在您购买帐户时，您所在的国家/地区并未列在[此列表中。](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=150324)

现在来自澳大利亚的开发者可以享受发布付费应用的自由。现在您应该能够在开发者控制台中看到该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T22:14:06.003

请参见下图并检查选项

![在此处输入图像描述](../Images/79c96d475e8ce517d53604ec15a84b94.png)

在控制台的同一屏幕中点击 Google Wallet Merchant center。

# javascript - Titan Studio 中的 JavaScript：对象中的“新”

> ID：10135776
> 
> 赞同：0
> 
> 时间：2012-04-13T05:38:49.790
> 
> 标签：javascript, titanium, new-operator

我在非浏览器环境（Titanium Studio）中有以下代码，我注意到 result1 和 result2 都可以工作，返回相同的结果，并且是相同的类型（对象）。

您能否解释一下它们是否有任何不同以及它们有何不同？

在我的情况下，在 name1 中没有对本地上下文的引用（那里没有“this”，只有局部变量），我试图弄清楚当我有一个像下面这样的情况。

```
var name1 = function(some_arg){
    // some stuff
    return result; // returns an object
}

var result1 = name1('some_value');
var result2 = new name1('some_value');

typeof(result1); // returns object
typeof(result2); // returns object 
```

谢谢！

**在下面编辑：原始问题已得到解答，我现在正在寻找相关内容的澄清。**

与以下评论相关的代码：

```
function Name1 (name){
    this.name = name;
}
var version1 = new Name1('joey');
version1.name;

var Name2 = function(name){
    this.name = name
}
var version2 = new Name2('joey');
version2.name; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:40:00.680

`this` is bound to a new object when using `new` while it is bound to the global object when not using `new`. If you do not use `this` in the constructor function or any methods you add to your object, it indeed does not really matter - however, you should use it anyway or you'll have a problem if you ever do use it.

# ruby-on-rails - 如何在 Ruby on Rails 中逐行获取文件之间的区别？

> ID：10135783
> 
> 赞同：0
> 
> 时间：2012-04-13T05:39:22.943
> 
> 标签：ruby-on-rails, ruby, gem

Ruby on Rails 中有没有办法比较文件并获取输出行 bcompare(comparing application) 除了`htmldiff gem`and `Diffy gem`。需要在两个窗口中输出，这将表明这是该文件中的添加和删除。

或者

我怎样才能使用`Diffy Gem`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:41:32.267

You might be interested in [http://en.wikipedia.org/wiki/Longest_common_subsequence_problem](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem), not really hard to implement.

# c# - 如何在休息时检索请求的域 URL？

> ID：10135784
> 
> 赞同：2
> 
> 时间：2012-04-13T05:39:24.333
> 
> 标签：c#, http, rest

在 Global.asax.cs 文件中，我有允许跨域访问的代码。

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        HttpContext.Current.Response.Cache.SetNoStore();

        if( // The requesting URL == "http://theproperdomain.com"){
            EnableCrossDmainAjaxCall();
        }
    }  

    private void EnableCrossDmainAjaxCall()
    {
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");

        if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
        {
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
            HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
            HttpContext.Current.Response.End();
        }
    } 
```

但是在我的其余项目允许跨域访问之前，它必须首先检查请求域是否等于正确的域。即：“http://theproperdomain.com”

我有这个代码：

```
string properdomain = HttpContext.Current.Request.Url.AbsoluteUri; 
```

但我不确定它是否最好用。
请提出你更好的主意。

**编辑**

我的域服务器是`http://theproperdomain.com`我的休息服务所在的地方。
我将从我的 webconfig 中获取此域名并与当前访问的客户端进行比较。我需要这样做，因为我只想允许一个域进行“跨域访问”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:56:51.797

您可以使用[HTTP/1.1 的 Host 标头来](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)标识当前请求发送到的域。根据规范，如果请求缺少此信息，您可以返回 400 Bad Request

要访问标题，您可以使用`HttpContext.Current.Request.Headers["HOST"]`

但是，如果您想知道从哪个应用程序发出请求，那么您需要维护一个应用程序机密，该机密对每个应用程序都是唯一的并且需要授权。只要应用程序机密保持安全，这就是安全的。避免使用引用标题，因为它是可选字段。

# c# - 从路由数据中获取动作名称

> ID：10135785
> 
> 赞同：2
> 
> 时间：2012-04-13T05:39:33.700
> 
> 标签：c#, asp.net-mvc-2

我知道我是否想获得我可以使用的当前操作；

```
ControllerContext.RouteData.GetRequiredString("action") 
```

但是，如果我的路线允许怎么办`http://mydomain/this has spaces`

我将如何获得“ `This Has Spaces`”而不是“ `ThisHasSpaces`”？

这是我的路由表中的一个片段

```
 routes.MapRoute(
            "ThisHasSpaces", // Route name
            "This Has Spaces", // URL with parameters
            new { controller = "Home", action = "ThisHasSpaces", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:51:58.910

如果您的路线看起来像这样，则没有什么可以为您提供原始字符串（除了 `Request.Uri`），因为您实际上并未将 uri 映射到路线参数。

由于您对路线进行了硬编码，因此您可以添加另一个值：

```
 routes.MapRoute(
        "ThisHasSpaces", // Route name
        "This Has Spaces", // URL with parameters
        new { controller = "Home", action = "ThisHasSpaces", orgstring = "This Has Spaces", id = UrlParameter.Optional } // Parameter defaults
    ); 
```

并获取它：

```
ControllerContext.RouteData.Values["orgstring"] 
```

# ssrs-2008 - 如何根据 SSRS 下拉列表中选择的参数重定向到特定报告？

> ID：10135789
> 
> 赞同：0
> 
> 时间：2012-04-13T05:40:07.073
> 
> 标签：ssrs-2008, reporting-services

我希望用户根据下拉列表中选择的参数重定向到特定报告。假设我有一个下拉列表，其中包含 4 个报告名称，例如 A、B、C、D。如果用户选择 A，则需要显示报告 A。除了这 3 个参数之外，所有报告都需要传递这些参数。可以这样做吗？感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:49:03.667

我不相信这可以*完全*按照您在 SSRS 中描述的那样完成，因为重定向到特定报告是一种“操作”——简单地运行一个报告并不是 SSRS 术语中的“操作”。

我想到以下可能性：

*   将所有四个现有报表合并为一个报表，并根据报表名称参数的值有条件地抑制显示的报表对象；或者
*   而不是报表名称的参数，而是具有其他三个参数的报表，这些参数显示报表对象以及链接到四个现有报表中的每一个的操作（本质上，此报表将是一个虚拟报表，其唯一目的是提供导航到其他报告）；或者
*   编写自定义 asp 代码来执行此操作，而不是尝试单独在 SSRS 中执行此操作。

# java - java : 如何查看易于理解而不是 WSDL 的 Web 服务描述？

> ID：10135790
> 
> 赞同：1
> 
> 时间：2012-04-13T05:40:07.540
> 
> 标签：java, web-services, wsdl

**我在.Net**中编写了一个 Web 服务，并从我的**Android**应用程序中调用它。下面是它的描述，它很容易理解，并提供了从 Android 调用服务的所有必要信息，特别是例如 SOAPACTION、内容类型等我可以通过链接看到它的内容看起来像这样，实际上 .Net 接口提供了这个

> [http://192.168.4.47:88/MRMSGlobalService.asmx?op=EstimateTripCost](http://192.168.4.47:88/MRMSGlobalService.asmx?op=EstimateTripCost)

现在我有另一个用**Java**编写的 Web 服务，它的描述在这个 .net 服务下面给出。我可以通过如下链接打开它的描述

> [http://localhost:8080/MusicAppService/MusicAppDataService?WSDL](http://localhost:8080/MusicAppService/MusicAppDataService?WSDL)

它的描述不像 .Net 那样容易理解，而且非常难以理解，实际上它的**WSDL**但我想要一个像 .Net 的接口。它是用 NetBeans 编写的。

我认为可能有一种方法可以让我们看到与 .net 服务相同的描述。对此，我无法理解如何操作数据。

我必须调用函数**getMusicFileData**但很难理解参数是什么以及返回数据可能是什么。

请帮忙。我想要与 .net 一样的 java web 服务的相同描述，这很容易理解。URL中应该有东西；什么，这是要找的。

**.Net 网络服务**

```
POST /SDApp/MRMSGlobalService.asmx HTTP/1.1
Host: 192.168.4.47
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://Itcurves.net/EstimateTripCost"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <EstimateTripCost xmlns="http://Itcurves.net/">
      <NoOfPassengers>int</NoOfPassengers>
      <NoOfWheelChairs>int</NoOfWheelChairs>
      <Distance>double</Distance>
      <Duration>double</Duration>
    </EstimateTripCost>
  </soap:Body>
</soap:Envelope> 
```

* * *

**Java 网络服务**

```
This document had no style information.
<!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2-b13 (branches/2.2-6964; 2012-01-09T18:04:18+0000) JAXWS-RI/2.2.6-promoted-b20 JAXWS/2.2 svn-revision#unknown. -->
<!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2-b13 (branches/2.2-6964; 2012-01-09T18:04:18+0000) JAXWS-RI/2.2.6-promoted-b20 JAXWS/2.2 svn-revision#unknown. -->
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://Musicpackage/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://Musicpackage/" name="MusicAppDataService">
<wsp:Policy xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702" xmlns:ssp="http://schemas.sun.com/2006/03/wss/server" xmlns:sunwsp="http://java.sun.com/xml/ns/wsit/policy" wsu:Id="MusicAppDataPortBindingPolicy">
<sp:SymmetricBinding>
<wsp:Policy>
<sp:AlgorithmSuite>
<wsp:Policy>
<sp:Basic128/>
</wsp:Policy>
</sp:AlgorithmSuite>
<sp:IncludeTimestamp/>
<sp:Layout>
<wsp:Policy>
<sp:Strict/>
</wsp:Policy>
</sp:Layout>
<sp:OnlySignEntireHeadersAndBody/>
<sp:ProtectionToken>
<wsp:Policy>
<sp:SecureConversationToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
<wsp:Policy>
<sp:BootstrapPolicy>
<wsp:Policy>
<sp:AsymmetricBinding>
<wsp:Policy>
<sp:AlgorithmSuite>
<wsp:Policy>
<sp:Basic128/>
</wsp:Policy>
</sp:AlgorithmSuite>
<sp:IncludeTimestamp/>
<sp:InitiatorToken>
<wsp:Policy>
<sp:X509Token sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
<wsp:Policy>
<sp:WssX509V3Token10/>
</wsp:Policy>
</sp:X509Token>
</wsp:Policy>
</sp:InitiatorToken>
<sp:Layout>
<wsp:Policy>
<sp:Strict/>
</wsp:Policy>
</sp:Layout>
<sp:OnlySignEntireHeadersAndBody/>
<sp:RecipientToken>
<wsp:Policy>
<sp:X509Token sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/Never">
<wsp:Policy>
<sp:RequireIssuerSerialReference/>
<sp:WssX509V3Token10/>
</wsp:Policy>
</sp:X509Token>
</wsp:Policy>
</sp:RecipientToken>
</wsp:Policy>
</sp:AsymmetricBinding>
<sp:EncryptedParts>
<sp:Body/>
</sp:EncryptedParts>
<sp:SignedParts>
<sp:Body/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="ReplyTo"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="To"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="From"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="AckRequested"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="CreateSequence"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="Sequence"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="MessageID"/>
<sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="SequenceAcknowledgement"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="Action"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="RelatesTo"/>
</sp:SignedParts>
<sp:Wss10>
<wsp:Policy>
<sp:MustSupportRefIssuerSerial/>
</wsp:Policy>
</sp:Wss10>
</wsp:Policy>
</sp:BootstrapPolicy>
<sp:RequireDerivedKeys/>
</wsp:Policy>
</sp:SecureConversationToken>
</wsp:Policy>
</sp:ProtectionToken>
</wsp:Policy>
</sp:SymmetricBinding>
<sp:Trust13>
<wsp:Policy>
<sp:MustSupportIssuedTokens/>
<sp:RequireClientEntropy/>
<sp:RequireServerEntropy/>
</wsp:Policy>
</sp:Trust13>
<sp:Wss11>
<wsp:Policy>
<sp:MustSupportRefEncryptedKey/>
<sp:MustSupportRefIssuerSerial/>
<sp:MustSupportRefThumbprint/>
</wsp:Policy>
</sp:Wss11>
<wsam:Addressing/>
</wsp:Policy>
<wsp:Policy xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702" wsu:Id="MusicAppDataPortBinding_getMusicFileData_Input_Policy">
<sp:EncryptedParts>
<sp:Body/>
</sp:EncryptedParts>
<sp:SignedParts>
<sp:Body/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="ReplyTo"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="To"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="From"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="AckRequested"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="CreateSequence"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="Sequence"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="MessageID"/>
<sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="SequenceAcknowledgement"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="Action"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="RelatesTo"/>
</sp:SignedParts>
</wsp:Policy>
<wsp:Policy xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702" wsu:Id="MusicAppDataPortBinding_getMusicFileData_Output_Policy">
<sp:EncryptedParts>
<sp:Body/>
</sp:EncryptedParts>
<sp:SignedParts>
<sp:Body/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="ReplyTo"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="To"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="From"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="AckRequested"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="CreateSequence"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="Sequence"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="MessageID"/>
<sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing"/>
<sp:Header Namespace="http://docs.oasis-open.org/ws-rx/wsrm/200702" Name="SequenceAcknowledgement"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="Action"/>
<sp:Header Namespace="http://www.w3.org/2005/08/addressing" Name="RelatesTo"/>
</sp:SignedParts>
</wsp:Policy>
<types>
<xsd:schema>
<xsd:import namespace="http://Musicpackage/" schemaLocation="http://localhost:8080/MusicAppService/MusicAppDataService?xsd=1"/>
</xsd:schema>
</types>
<message name="getMusicFileData">
<part name="parameters" element="tns:getMusicFileData"/>
</message>
<message name="getMusicFileDataResponse">
<part name="parameters" element="tns:getMusicFileDataResponse"/>
</message>
<portType name="MusicAppData">
<operation name="getMusicFileData">
<input wsam:Action="http://Musicpackage/MusicAppData/getMusicFileDataRequest" message="tns:getMusicFileData"/>
<output wsam:Action="http://Musicpackage/MusicAppData/getMusicFileDataResponse" message="tns:getMusicFileDataResponse"/>
</operation>
</portType>
<binding name="MusicAppDataPortBinding" type="tns:MusicAppData">
<wsp:PolicyReference URI="#MusicAppDataPortBindingPolicy"/>
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<operation name="getMusicFileData">
<soap:operation soapAction=""/>
<input>
<wsp:PolicyReference URI="#MusicAppDataPortBinding_getMusicFileData_Input_Policy"/>
<soap:body use="literal"/>
</input>
<output>
<wsp:PolicyReference URI="#MusicAppDataPortBinding_getMusicFileData_Output_Policy"/>
<soap:body use="literal"/>
</output>
</operation>
</binding>
<service name="MusicAppDataService">
<port name="MusicAppDataPort" binding="tns:MusicAppDataPortBinding">
<soap:address location="http://localhost:8080/MusicAppService/MusicAppDataService"/>
</port>
</service>
</definitions>**strong text****strong text** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:37:27.403

You must have checked (or you did not unchecked) "use WS-Security" checkbox in NetBeans web services generator. This additional stuff you see in Java web service SOAP envelope is connected with WS-Security information.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T11:56:31.327

在项目视图中，右键单击 Web 应用程序 -> Web 服务 -> WebServiceNode

和

从列表中选择“编辑 Web 服务属性”

取消选中**安全服务**复选框

单击确定，它应该可以工作。

查看[Glen Mazza 的博客](http://www.jroller.com/gmazza/entry/metro_usernametoken_profile)

# java - 如何从 Wicket 组件中删除 CSS 类？

> ID：10135791
> 
> 赞同：15
> 
> 时间：2012-04-13T05:40:09.277
> 
> 标签：java, css, wicket

使用[AttributeAppender](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/behavior/AttributeAppender.html)将 CSS 类动态**添加**到 Java 代码中的组件非常简单：

```
component.add(new AttributeAppender("class", true, new Model<String>("foo"), " ")); 
```

或者，如果您已将上述内容提取到适当的实用程序方法或类中，则只需：

```
component.add(WicketUtils.cssClassAppender("foo")); 
```

**但是如何删除 CSS 类？**

您可以通过完全清除 class 属性轻松删除*所有CSS 类：*

```
component.add(new SimpleAttributeModifier("class", "")); 
```

*...但如果组件有其他您不想*删除的 CSS 类，则这是不可接受的。

Wicket 1.4（但也可以随意发布针对更高版本的建议）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T05:45:14.157

这是我想出的一种方法：

```
public class CssClassRemover extends AttributeModifier {
    public CssClassRemover(String cssClass) {
        super("class", false, new Model<String>(cssClass));
    }

    @Override
    protected String newValue(String currentValue, String valueToRemove) {
        // NB: naive approach; breaks with e.g. "foo foo-bar" & "foo"
        return currentValue.replaceAll(valueToRemove, "");
    }
} 
```

使用上述帮助程序的代码将是：

```
component.add(new CssClassRemover("foo")) 
```

（当然，您也可以根据需要创建匿名 AttributeModifier 子类，但是将逻辑放在单独的实用程序类或方法中会清理很多。）

**编辑**：一个改进的版本`newValue()`可以更好地处理极端情况（参见 biziclop 的评论）。注意：使用[番石榴](http://code.google.com/p/guava-libraries/)。（欢迎您发布更简单的（正则表达式？）版本。）

```
@Override
protected String newValue(String currentValue, String valueToRemove) {
    if (currentValue == null) return "";

    Set<String> classes = Sets.newHashSet(Splitter.on(" ").split(currentValue));
    classes.remove(valueToRemove);
    return Joiner.on(" ").join(classes); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-08T13:28:41.653

在[Jonik 的回答](https://stackoverflow.com/a/10135837/168939)的基础上，以下添加了否定前瞻以忽略不同样式类中间的出现（并且不区分大小写）。

```
public class StyleClassRemover extends AttributeModifier {

    public StyleClassRemover(final String cssClass) {
        super("class", false, Model.of(cssClass));
    }

    @Override
    protected String newValue(final String currentValue, final String valueToRemove) {
        if (currentValue == null) {
            return "";
        }

        final String patternString = "(^|\\s+)" + Pattern.quote(valueToRemove) + "(?!\\S)";
        return Pattern.compile(patternString, Pattern.CASE_INSENSITIVE).matcher(currentValue).replaceAll("");
    }
} 
```

测试输入： http: [//fiddle.re/ah0ca6](http://fiddle.re/ah0ca6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:24:57.433

Wicket 1.5+ 有 org.apache.wicket.AttributeModifier#remove()

# cuda - 如何在 CMake 中更改 cuda_compile_ptx 的输出文件名？

> ID：10135795
> 
> 赞同：6
> 
> 时间：2012-04-13T05:40:48.617
> 
> 标签：cuda, cmake

在带有 FindCUDA 的 CMAKE 中，给定一个输入文件`filename.cu`，该`cuda_compile_ptx`命令生成格式`cuda_compile_ptx_generated_filename.cu.ptx`的输出文件名，但我需要输出文件名的格式为`filename.ptx`。

有没有一种简单的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-28T04:31:11.353

理想情况下，您应该能够指定`-o <outputName>`. 但是问题是`CUDA_COMPILE_PTX`宏实际上覆盖了该`-o`选项`cuda_compile_ptx_generated_${filename}.ptx`

这是将 CUDA 编译添加到项目的两种替代方法

1.  您仍然可以使用，但可以通过将其重命名为:并使用in`CUDA_COMPILE_PTX`来解决此问题`add_custom_command``add_custom_command(OUTPUT ${CMAKE_BINARY_DIR}/my_ptx.ptx COMMAND ${CMAKE_COMMAND} -E copy ${cuda_ptx_files} ${CMAKE_BINARY_DIR}/my_ptx.ptx DEPENDS ${cuda_ptx_files})``${CMAKE_BINARY_DIR}/my_ptx.ptx``add_custom_target`
2.  使用 CMake 编译 CUDA PTX 有更好的选择。一个非常好的宏示例可以做到这一点：[https](https://github.com/nvpro-samples/shared_sources/blob/master/cmake/private/FindCuda.cmake) ://github.com/nvpro-samples/shared_sources/blob/master/cmake/private/FindCuda.cmake 。可以在此处找到如何使用此宏的示例：[https](https://github.com/nvpro-samples/gl_cuda_interop_pingpong_st/blob/master/CMakeLists.txt) ://github.com/nvpro-samples/gl_cuda_interop_pingpong_st/blob/master/CMakeLists.txt 。

# ios - 在 UITextField 中从右到左为文本设置动画

> ID：10135796
> 
> 赞同：2
> 
> 时间：2012-04-13T05:40:49.570
> 
> 标签：ios

我有一个长文本，需要在一行中显示。文本太长，无法放入 UITextField 对象。我正在寻找一种从右到左为文本（或 uitextfield 对象本身）设置动画的方法。我在一些 iPhone 应用程序中看到过，但不知道该怎么做。

这个想法是，如果文本很大，可以慢慢向左滚动，以便用户阅读。

知道如何实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:43:57.173

您可以使用像 Brian Stormont 的[AutoScrollLabel这样的解决方案，并](http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html)[在此处](http://blog.stormyprods.com/2009/10/more-details-on-autoscrolllabel-usage.html)进行更多讨论。

包括之后，您需要大致执行以下操作：

```
AutoScrollLabel *marquee = [[AutoScrollLabel alloc] initWithFrame:marqueeFrame];
[view addSubview:marquee];
[marquee setScrollSpeed:16.8];
marquee.text = @"My long text";
[marquee readjustLabels];

[marquee scroll]; //This line is the one that actually starts the scrolling 
```

它已经很老了，但我现在正在运输应用程序中使用它。

[这个动画文本类AUIAnimatedText](https://github.com/adam-siton/AUIAnimatedText)与切线相关，但不是必需的，它允许您为文本的其他属性（如大小和颜色）设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-25T22:05:52.597

现在有一个替代品可以解决`UILabel`这个问题：

[https://github.com/cbpowell/MarqueeLabel](https://github.com/cbpowell/MarqueeLabel)

> **概述**： MarqueeLabel 是一个 UILabel 子类，当标签的文本超出可用宽度时添加滚动选取框效果。标签滚动方向和速度/速率也可以指定。所有标准的 UILabel 属性（有意义的地方）都可以在 MarqueeLabel 中使用，它的行为就像 UILabel。

*我不是 MarqueeLabel 的作者，也不是与作者有任何关系。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:51:04.210

我没有做过类似的事情，但我认为你可以覆盖**textRectForBounds:**方法（[UITextField 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)）并使用**NSTimer**。在计时器中，您应该只调用文本字段的**setNeedsDisplay**方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T11:00:58.190

有一种解决方案，但不是我最喜欢的。如果您的 viewController 中有**AutoScrollLabel *marqueeLabel**，则在 viewController 的 viewWillAppear 方法中将其文本设置为：-

```
marqueeLabel.text = marqueeLabel.text; 
```

除了这个，我还没有找到任何东西。此外，如果您遇到该问题，请尝试在您的 iphone/ipod 中使用多任务处理，当您再次打开您的应用程序时..您将找不到 marqueeLabel 动画..为此在 AutoScrollLabel 类的 commonInit 中添加一条语句：-

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(readjustLabels) name:UIApplicationWillEnterForegroundNotification object:nil]; 
```

并在该类的 dealloc 中再添加一条语句

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

# asp.net - 无法从数据表中填充列表框（自动完成文本框）

> ID：10135800
> 
> 赞同：0
> 
> 时间：2012-04-13T05:41:08.163
> 
> 标签：asp.net, ajax, ado.net, listbox, datatable

我是 ASP.NET 的新手，我正在使用 AJAX 在我的应用程序中创建一个搜索框。

例如：如果用户在文本框中输入“abc”，那么文本框将从以“abc”开头的数据库中获取数据。

然后我想显示所有以`abc`listBox开头的字符串，我在数据表中获取数据，并且数据在数据表中正确出现，

**如何从 Datatable 填充我的 ListBox ？**

这是我的代码片段，

**SecrchBox.aspx 中的代码** `onkeyup i am calling this getdata()`

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="SearchBox.aspx.cs" Inherits="SearchBox" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" language="javascript">
        function getdata() {

            var TextBox1 = document.getElementById("<%= TextBox1.ClientID %>");
            var ltrSearchResults = document.getElementById("<%= ltrSearchResults.ClientID %>");
            var str = TextBox1.value;
            var xmlhttp;
            if (str.length == 0) {
                ltrSearchResults.innerHTML = "";
                return;
            }
            if (window.XMLHttpRequest) {
                xmlhttp = new XMLHttpRequest();
            }
            else {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.open("GET", "Newpage.aspx?q=" + str, false);
            xmlhttp.send();
            ltrSearchResults.innerHTML = xmlhttp.responseText;

            return false;

        }

</script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="TextBox1" runat="server" ></asp:TextBox><br />
        <asp:Label runat="server" ID="Label1" ></asp:Label><br />
    </div>
    </form>
</body>
</html> 
```

**新闻页中的代码，aspx.cs**

```
public partial class Newpage : System.Web.UI.Page
{
    public string ConnectionString = "Data Source=ilsql;Initial Catalog=krunal_DB;User ID=krunaldbuser;Password=krunal@2012;";
    string[] symbol=new string[2170];

    protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
            GetData();           
        }
    }

    private void GetData()
    {
        if (Request.QueryString["q"] != null)
        {
            string Value = Convert.ToString(Request.QueryString["q"]);
            StringBuilder str = new StringBuilder();
           // string str;

            if (Value.Length > 0)
            {
                SqlConnection cn = new SqlConnection(ConnectionString);
                cn.Open();

                SqlCommand cmd = new SqlCommand("SELECT DISTINCT Scrip FROM dbo.SearchBoxData where Scrip Like '%" + Value + "%'", cn);
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                DataTable dt = new DataTable();
                da.Fill(dt);
                cn.Close();

                if (dt.Rows.Count > 0)
                {
                    foreach (DataRow dr in dt.Rows)
                    {                        
                        str.Append(Convert.ToString(dr["Scrip"]) + "<br>");
                    }

                    str = str.Remove(str.Length - 2, 2);
                }

                Response.Write(str.ToString());

            }
            else
            {
                Response.Write("No Result Found");
            }
        }
    }
} 
```

***任何帮助都会得到回报！***

**提前致谢。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:43:15.307

我建议使用 AjaxControlToolkit 中的 AutoCompleteExtender。它更容易实现并且已经过很好的测试。这是带有描述和代码的链接： [AutoCompleteExtender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

检查以下链接以获取将[AutoCompleteExtender 与数据库一起使用的教程](http://www.infinitezest.com/articles/using-autocompleteextender-with-results-from-database.aspx)

检查此代码项目[文章](http://www.codeproject.com/Articles/201099/AutoComplete-With-DataBase-and-AjaxControlToolkit)

# php - 通过网络服务多次更新数据

> ID：10135804
> 
> 赞同：0
> 
> 时间：2012-04-13T05:41:47.130
> 
> 标签：php, web-services, visual-foxpro

我想问一下网络服务。

考虑一个场景：

我在 vfp 桌面应用程序中输入我的数据。当我点击“保存”时，应用程序将我的数据保存在本地数据库中，并将其作为 xml 发送到远程位置的 Web 服务（一个 php 文件）。然后，Web 服务将我的数据插入到远程位置的 vfp 数据库中。例如，当我点击“保存”时，我意识到我犯了一个错误。我更改了我的条目并再次点击“保存”。数据将通过 web 服务再次发送以更新远程位置的数据。

问题是 ：

如何保证在第一次插入后将第二次更新插入远程位置？我的意思是操作的顺序会保证Web服务器中的操作顺序相同吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:55:29.037

它通常不会是相同的顺序，因为这两个请求彼此隔离，到达目的地的时间取决于所采用的路线。在大多数情况下，它会按预期工作。

您可以让您的客户等待更新，直到上一次更新完成。只需检查来自远程位置的响应。

在远程位置端您无能为力，因为即使您可以检测到丢失的更新请求，您也没有它并且它可能永远不会出现。有两种方法可以检测丢失的请求：给每个请求一个正在进行的编号，或者在更新中添加某种版本。

第一种方式，如果请求到达，检查它是否有 number `previousNumber + 1`。如果没有，要么报告错误，要么延迟它直到请求`previousNumber + 1`到达。

对于第二种方式，检查远程数据的当前版本是否与请求中的预期版本相同。如果不是，则报告错误。

此版本可能是您单击“保存”按钮的时间。如果第二次更新在第一次之前到达，第一次更新的时间戳将小于第二次请求使用的当前时间戳。

# android - 显示键盘时的文本视图和按钮收缩

> ID：10135807
> 
> 赞同：1
> 
> 时间：2012-04-13T05:42:00.360
> 
> 标签：android, layout

看看我正在使用两个文本视图和一个按钮的 xml 文件中的代码......问题是当我点击一个文本视图时，默认键盘出现并且第二个文本视图的一半和按钮隐藏......然后您必须手动关闭键盘，然后您才能单击发送按钮...

我的问题是如何在显示键盘时执行该操作，整个视图向上滑动或缩小以使按钮可见....

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/etRecieverNum"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="textNoSuggestions"
         >
    </EditText>

    <EditText
        android:id="@+id/etMessageToBeSent"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="0.82"
        android:gravity="top|left"
        android:inputType="textNoSuggestions"
         />

    <Button
        android:id="@+id/bSend"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Send" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:01:12.700

你可以把

```
 <activity
  android:name="yourActivity"
  android:windowSoftInputMode="adjustPan"/> 
```

在你的清单中..或放

```
 adjustResize instead of adjustPan 
```

**adjustResize** Activity 的主窗口总是调整大小，以便为屏幕上的软键盘腾出空间。

**adjustPan** Activity 的主窗口没有调整大小来为软键盘腾出空间。相反，窗口的内容会自动平移，因此当前焦点永远不会被键盘遮挡，用户始终可以看到他们正在输入的内容。这通常不如调整大小可取，因为用户可能需要关闭软键盘才能到达窗口的模糊部分并与之交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:09:47.337

在您的清单文件中，在活动下给出类似这样的内容

```
<activity android:windowSoftInputMode="adjustResize"/> 
```

您还可以参考此[链接](http://developer.android.com/guide/topics/manifest/activity-element.html)以获取有关 windowSoftInputMode 的更多详细信息

# c++ - 可以跨线程共享准备好的语句吗？

> ID：10135811
> 
> 赞同：0
> 
> 时间：2012-04-13T05:42:25.920
> 
> 标签：c++, c, multithreading, prepared-statement, libmysql

使用 libmysqlclient_r.so 即 c mysql 连接器。根据当前的拱门，在 thread1 中为 connection1 准备的 stmt 将被创建和缓存。接下来为 thread2 connection2 缓存准备好的 stmt 将被重用。

执行后，程序在随机位置抛出分段错误。

注意：如果我只保留一个线程并执行，那么它永远不会引发分段错误。

我没有在 mysql 文档中找到任何关于它的内容，即使我遵循了以下给出的所有必要步骤：http: [//dev.mysql.com/doc/refman/4.1/en/threaded-clients.html](http://dev.mysql.com/doc/refman/4.1/en/threaded-clients.html)

请建议跨线程共享prepare stmts是否有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:09:28.253

AFAIK，准备好的语句是创建/与连接上下文相关联的。原型函数需要连接作为输入参数，所以不能在connection_B中重用在connection_A上下文中准备好的prepared statement...

```
MYSQL_STMT *mysql_stmt_init(MYSQL *mysql) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-23T13:16:56.557

我个人的经验是，只要设置了某种锁定机制并且所有线程使用相同的连接，它们就可以共享。

我遇到了一些奇怪的双重释放和内存损坏，这可能是由两个线程为准备好的语句设置参数并大致同时启动它们引起的。一旦我使用互斥锁来防止线程这样做，崩溃就消失了。性能损失并没有那么高：在设置准备好的语句参数和查询本身上花费的时间很少，如果您的查询需要很长时间执行，您的里程可能会有所不同。

# java - JavaScript 与 Applet 通信

> ID：10135812
> 
> 赞同：-2
> 
> 时间：2012-04-13T05:42:37.720
> 
> 标签：java, javascript, variables

> **可能重复：**
> [在 javascript 和 java 小程序之间传递数据](https://stackoverflow.com/questions/10124758/passing-data-between-javascript-and-a-java-applet)

我在java小程序中有这个功能

```
public void receiveData(String DatafromJS){} 
```

和 JavaScript 中的这个函数

```
function printreceipt(tax,subtotal,total)
{
 subtotalElem=document.getElementById("total");
 taxElem=document.getElementById("tax");

 var myApp = document.applets['myApplet'];
 myApp.receiveData(taxElem.innerHTML + subtotalElem.innerHTML);
} 
```

我想传递 JavaScript 变量，例如字符串的税单。我希望在小程序中查看这些变量的值。有人可以帮助我如何传递数据。我希望小程序将该数据发送到另一个类，即 a `jni`，因为我想使用财务打印机打印此信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:06:58.060

我很确定这是不可能的，但显然不是！

[这是有关执行此操作的官方 Java 文档。](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)

# java - eclipse indigo 的 org.eclipse.ui.internal 包中不存在 MaximizePartAction 类

> ID：10135813
> 
> 赞同：0
> 
> 时间：2012-04-13T05:42:40.190
> 
> 标签：java, eclipse, plugins, eclipse-indigo, eclipse-europa

我们在 Eclipse Europa(3.3) 中实现了一个插件项目。现在我们将它移植到 Eclipse Indigo(3.7)。所以问题是“ `MaximizePartAction`”类存在于“ `org.eclipse.ui.internal`”Eclipse Europa 3.3 的包中没有 Eclipse Indigo 的同一包（ 3.7) 所以显示构建错误消息“ `import org.eclipse.ui.internal.MaximizePartAction cannot be resolved`”。

我怀疑它已移至任何插件的其他软件包或相同的软件包，因此请您对此进行澄清。如果有人提前告诉我答案并感谢，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:33:09.467

从 Eclipse 3.4 开始，有一个类`org.eclipse.ui.internal.handlers.MaximizePartHandler`. 我假设`MaximizePartAction`已经迁移到 3.4 中的命令框架。您可以考虑改用处理程序。

一般来说，您应该避免使用内部包中的类（即包含路径片段`internal`）。它们被视为非公共 API，可以在不另行通知的情况下进行更改（正如您刚刚经历的那样）。

# couchdb - 从每个用户数据库到主数据库的 CouchDB 复制

> ID：10135820
> 
> 赞同：2
> 
> 时间：2012-04-13T05:43:41.583
> 
> 标签：couchdb

我有那个系统架构：名为 master 的数据库和名为and的`master`用户数据库。我正在将文档从主数据库复制到数据库和数据库。然后用户在他们的数据库中单独修改该文档（例如 user1 添加和 user2 添加字段）。现在我想从用户数据库复制回 master 并将新添加的字段合并到. 此外，我可能需要在复制上运行一些逻辑，以使结果标签为.`user1``user2``user1``user2``tags:[1, 2]``tags:[3, 4]``tags``tags:[1,2,3,4]``tags:[1,2,4]`

什么是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:52:04.597

这可以通过复制+冲突简单地解决。有一个主外部进程来检查冲突、合并标签然后编写新文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:28:56.393

您没有说您可能希望如何在最终结果中删除标签“3”，因此很难给出完整的答案。

在 CouchDB 文档中有很多关于处理这种场景的各种方法的好信息。[设计如何存储数据](http://wiki.apache.org/couchdb/How_to_design_for_replication)以及如何[使用存储的数据来解决冲突](http://wiki.apache.org/couchdb/Replication_and_conflicts)，其中包括以下“获取具有冲突解决方案的文档的建议代码”

1.  获取 docid?conflicts=true
2.  对于 _conflicts 数组中的每个成员： GET docid?rev=xxx 如果在此阶段发生任何错误，请从步骤 1 重新开始。（可能存在其他人已经解决此冲突并删除该 rev 的竞赛）
3.  执行特定于应用程序的合并
4.  写入 _bulk_docs 并更新第一个 rev 并删除其他 revs。

它还指出“这可以在每次读取时完成（在这种情况下，您可以将应用程序中对 GET 的所有调用替换为对执行上述操作的库的调用），或者作为扫描程序代码的一部分。” 它继续给出了一个完整的 Ruby 示例。

这能回答你所有的问题吗？

# android - ImageDownloader 硬缓存的最大大小

> ID：10135824
> 
> 赞同：4
> 
> 时间：2012-04-13T05:43:53.883
> 
> 标签：android, caching, dalvik

我的问题是……在这个[ImageDownloader](http://code.google.com/p/android-imagedownloader/source/browse/trunk/src/com/example/android/imagedownloader/ImageDownloader.java?r=3)中，他们将缓存实现为硬缓存和软缓存……而对于硬缓存……这里

```
 // Hard cache, with a fixed maximum capacity and a life duration
private final HashMap<String, Bitmap> sHardBitmapCache =
    new LinkedHashMap<String, Bitmap>(HARD_CACHE_CAPACITY / 2, 0.75f, true) {
    @Override
    protected boolean removeEldestEntry(LinkedHashMap.Entry<String, Bitmap> eldest) {
        if (size() > HARD_CACHE_CAPACITY) {
            // Entries push-out of hard reference cache are transferred to soft reference cache
            sSoftBitmapCache.put(eldest.getKey(), new SoftReference<Bitmap>(eldest.getValue()));
            return true;
        } else
            return false;
    }
}; 
```

他们正在为硬缓存设置最大容量值..现在如果我选择一些较大的值作为最大容量会发生什么**......应用程序将在完全独立的 dalvik 实例中运行。它们不会在其中运行的应用程序中造成任何类型的内存压力..**这就是我所知道的..如果这是正确的..那么我可以声明任何大小的硬缓存？我对这个缓存了解不多..如果我错了，请纠正我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:43:16.447

您的设备具有固定数量的内存，在所有应用程序之间共享。为了给前台进程所需的内存，Android 将杀死缓存的后台进程。具有高内存占用的应用程序在处理多任务时会更慢，因为其他应用程序需要从头开始创建。

对称地，具有高内存占用的应用程序也将比不使用那么多内存的应用程序更早地被杀死。毕竟，杀死这些应用程序将释放更多内存。

**您应该选择产生良好性能的最小缓存大小。**任何更大的东西都会浪费内存并减慢设备速度。

# javascript - 如何在鼠标按下时永久执行功能，直到鼠标升起？

> ID：10135826
> 
> 赞同：0
> 
> 时间：2012-04-13T05:44:08.440
> 
> 标签：javascript, jquery

我有以下旋转图像的功能

```
function rotateImage(offsetSelector, xCoordinate, yCoordinate, imageSelector){

var x = xCoordinate - offsetSelector.offset().left - offsetSelector.width()/2;
var y = -1*(yCoordinate - offsetSelector.offset().top - offsetSelector.height()/2);
var theta = Math.atan2(y,x)*(180/Math.PI);        

var rotate = 'rotate(' + theta + 'deg)';
imageSelector.css('-moz-transform', rotate);
} 
```

但是，当我用以下方式调用它时，它只会在鼠标按下时执行一次。

```
$('#someImage').on('mousedown', function(event){
        rotateImage($(this).parent(), event.pageX,event.pageY, $(this));    
}); 
```

我的意图是让图像在被抓取时旋转，直到用户放开鼠标点击。有没有一种简单的方法可以在不使用外部库的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:51:34.747

例子：

```
var timer;
function rotateImageTimer(offsetSelector, xCoordinate, yCoordinate, imageSelector)
{
    timer = setInterval("rotateImage('"+offsetSelector+"', '"+xCoordinate+"', '"+yCoordinate+"', '"+imageSelector+"')", 100);
}

function rotateImage(offsetSelector, xCoordinate, yCoordinate, imageSelector){
    var x = xCoordinate - offsetSelector.offset().left - offsetSelector.width()/2;
    var y = -1*(yCoordinate - offsetSelector.offset().top - offsetSelector.height()/2);
    var theta = Math.atan2(y,x)*(180/Math.PI);        

    var rotate = 'rotate(' + theta + 'deg)';
    imageSelector.css('-moz-transform', rotate);      
}

$('#someImage').on('mousedown', function(event){
    rotateImageTimer($(this).parent(), event.pageX,event.pageY, $(this));  
});

$('#someImage').on('mouseup', function(event){
    clearIneterval(timer);   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:49:20.840

您需要在 mousedown 时使用 setInterval 重复调用某些代码，并在 mouseup 时取消它。

可以在这里找到一个例子：http: [//www.codingforums.com/showthread.php?t=166115](http://www.codingforums.com/showthread.php?t=166115)

关于 setInterval 和 setTimeout 的一些信息：[http ://www.elated.com/articles/javascript-timers-with-settimeout-and-setinterval/](http://www.elated.com/articles/javascript-timers-with-settimeout-and-setinterval/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:19:05.820

```
 var isMouseDown = false;

$('#someImage').on('mousedown', function(event){
isMouseDown = true;
        rotateImage($(this).parent(), event.pageX,event.pageY, $(this));    
});
$('#someImage').on('mouseup', function(event){
isMouseDown = false;

});

function rotateImage(offsetSelector, xCoordinate, yCoordinate, imageSelector){
   while(isMouseDown){
 var x = xCoordinate - offsetSelector.offset().left - offsetSelector.width()/2;
    var y = -1*(yCoordinate - offsetSelector.offset().top - offsetSelector.height()/2);
    var theta = Math.atan2(y,x)*(180/Math.PI);        

    var rotate = 'rotate(' + theta + 'deg)';
    imageSelector.css('-moz-transform', rotate);    
}// end of while  
} 
```

在上面的代码中，我有一个变量`isMouseDown`。当鼠标向下时，它设置为`true`. 虽然它是真实的，但您的图像应该旋转。我也在绑定事件`mouseup`。当它被调用时，`isMouseDown`被设置为`false`. 因此停止旋转。

当我需要在鼠标按下时在画布上绘图并在鼠标再次升起时停止时，我对我的绘图应用程序使用相同的技术。希望能帮助到你 ：）

# image - 图片站点地图。带有多个位置标签的图像是否有效？

> ID：10135828
> 
> 赞同：1
> 
> 时间：2012-04-13T05:44:12.377
> 
> 标签：image, syntax, sitemap

我有问题 ebout 生成图像 sitempap，如下所述：http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=178636](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=178636)

如果我有一些仅在图像大小上有所不同的图像（它们被称为）。我可以`<image:loc>`在 single 中有多个标签`<image:image>`吗？

```
<image:image>
     <image:loc>http://example.com/image_size1.jpg</image:loc>
     <image:loc>http://example.com/image_size2.jpg</image:loc>
     <image:loc>http://example.com/image_size3.jpg</image:loc>
     <image:caption>Sample caption</image:caption>
</image:image> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T23:02:38.677

您必须`<image:image> ... </image:image>`为每个图像创建一个单独的。（所以你的问题的答案是“不”）

# php - php重定向错误

> ID：10135829
> 
> 赞同：-1
> 
> 时间：2012-04-13T05:44:12.567
> 
> 标签：php, redirect

我试图在更新数据库后重定向页面，但出现错误。请帮忙。

```
Warning: Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\lucent\updatedb.php:1) in C:\xampp\htdocs\lucent\updatedb.php on line 18 
```

代码

```
<?php
$con = mysql_connect("localhost","root","") ;
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("pdk company", $con);
mysql_query("UPDATE servicetbl SET date_expiry='2012-06-13'
WHERE id =1");
mysql_close($con);
$URL="login_success.php";
header ("Location: $URL");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:48:20.097

已经有内容发送给客户端。但是，您的代码似乎没有输出任何内容，因此我认为文件开头可能有一些空格，或者您不小心将 PHP 文件保存为带有 BOM（字节顺序标记）的 UTF8。BOM（3 个字节）将被输出到客户端，从而强制发送标头。那时您不能再发送其他标头。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T05:54:44.097

两个提示

*   `ob_start()`之后在页面顶部使用`<?php`
*   `exit();`紧接着写`header();`

    [`ob_start()`](http://php.net/manual/en/function.ob-start.php)：此功能将打开输出缓冲。当输出缓冲处于活动状态时，不会从脚本发送输出（除了标题），而是将输出存储在内部缓冲区中。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-13T05:50:29.993

作为替代方案，我可以建议 HTML Meta-Refresh。您可以在代码中使用它：您不必确保 php-tag 之前没有其他代码或空格

```
<?php
    echo '<meta http-equiv="refresh" content="0; url='.$URL.'">';
    exit;
?> 
```

# ios - 如果在控件的上半部分点击，UITapGestureRecognizer 仅检测点击的控件

> ID：10135831
> 
> 赞同：1
> 
> 时间：2012-04-13T05:44:18.057
> 
> 标签：ios, hittest, uitapgesturerecognizer

我正在尝试在我的 iOS 应用程序上实现一种“帮助模式”。当用户点击帮助按钮时，UITapGestureRecognizer 会拦截对屏幕的触摸，如果它在控件上，则会出现一个带有帮助信息的小弹出窗口。

然而我的问题是，如果我点击控件的上半部分，应用程序只会检测到我已经点击了一个控件。我使用 hitTest:withEvent: 来确定触摸了哪个视图：

```
CGPoint touchPoint = [(UITapGestureRecognizer*)sender locationInView:nil];
UIView* touchedView = [self.view hitTest:touchPoint withEvent:nil]; 
```

UILabel 尤其难以成功命中。

视图在顶部包含一个导航栏，但相当标准。有没有人有类似的问题？有谁知道解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:52:28.657

您需要在视图中获取触摸的位置，而不是在窗口中（这是您指定`nil`为视图时得到的）。

```
CGPoint touchPoint = [(UITapGestureRecognizer*)sender locationInView:self.view];
UIView* touchedView = [self.view hitTest:touchPoint withEvent:nil]; 
```

# java - java：为什么一个char要花费这么多的记忆？

> ID：10135833
> 
> 赞同：-1
> 
> 时间：2012-04-13T05:44:35.733
> 
> 标签：java

我知道java中的一个字符是2字节。但是如果在列表中加载一些字符，它们将花费 87B 来保存一个字符。测试如下：

有一个文件“源”包含 995328 行。每一行都只是一个字符：'a'。（因此在java中保存所有字符将花费近2MB）。

我的源代码中调用了两个 sleep 方法，我使用 top 命令随时检查内存使用情况。

运行第一个 sleep(10000) 方法时的 RSIZE 值为 25M，运行第二个 sleep 方法时为 108M。所以每个字符串（这只是一个“a”）成本：（108MB-25MB）/995328=87B。我不知道为什么一个字符串“a”要花这么多内存！！！谁能告诉我为什么？

```
public static void main(String[] args) throws Exception{
    File file = new File("source");
    BufferedReader br = new BufferedReader(new FileReader(file));
    String line = null;
    List<String> list = new ArrayList<String>();
    Thread.sleep(10000); 
    while((line = br.readLine())!=null){
        list.add(line);
    }
    Thread.sleep(10000);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:56:34.137

@Amir 说得对，有比 top 更好的方法（例如， JDK 中包含[hprof](http://java.sun.com/developer/technicalArticles/Programming/HPROF.html)）来测量内存使用情况，但是有一些更深层次的问题会混淆您的内存数量。

1.  您没有关闭`file`或`br`。这是最大的。这些对象中的每一个都是围绕一堆本机代码的包装器，用于与操作系统的文件 I/O 库进行交互。这些资源包括文件句柄和缓存缓冲区，因此您从文件中读取的一些数据在内存使用中被计算两次——一次在附加到的缓存中`br`，一次在`list`.
2.  每个字符串实际上不仅仅是一个字符序列。JRE 维护一个指向字符数组的指针、一个起始索引和一个长度，以及其他数据。指向字符数组的指针为 8 个字节，起始索引为 4 个字节，长度为 4 个字节。我确定我遗漏了一些字段，但即使是这个保守的估计也会为字符串提供 16 个字节的开销，而忽略字符串中的实际字符。
3.  该`list`变量也有开销。有一个后备数组，其中每个插槽都是一个指针（多 8 个字节），并且有很多空插槽。随着后备数组的增长以容纳行，`ArrayList`该类会留下一些额外的空间，因为调整数组大小（即创建一个新数组并复制旧数组中的所有元素）很昂贵，并且每个空槽是 8 64 位系统上的字节数。
4.  top 返回的数字包括垃圾。垃圾收集器因 JVM 实现和版本而异，但通常它会快速收集新对象，并且仅在存在内存压力时才收集旧对象。因此，调整后备存储大小后剩下的所有额外数组`ArrayList`很可能仍在内存中，并计入最高数字。由于这些数组一开始就很大（很可能有一个至少有 500K 个插槽，每个插槽都有一个 8 字节的指针），这会增加程序的总内存使用量。

注意我在上面谈到了 8 字节指针，假设是 64 位系统。在 32 位系统上，我所说的一切都成立，除了指针只有 4 个字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T05:48:04.173

我不会依靠 top 来计算这些数字。你为什么不使用像[VisualVM](http://visualvm.java.net/)这样的东西——它会准确地告诉你数据结构占用了多少内存？

`RSIZE`我相信反映了总常驻内存，其中包括 JVM 本身使用的内存！除了这个问题，您的基准测试没有考虑 JVM 尚未收集的无法访问的对象。使用分析器的堆快照会触发 GC，它确实考虑到了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T05:56:43.417

您不仅在 arraylist 中保存字符，而且`String`在文件中每行存储一个实例。

我自己没有做过这些计算，但根据[Neil Coffeys 关于字符串内存利用率的教程](http://www.javamex.com/tutorials/memory/string_memory_usage.shtml)，每个字符串占用：

> 最小字符串内存使用量（字节）= 8 * (int) ((((无字符) * 2) + 45) / 8)

如果您的文件每行包含一个字符，则每个字符串将花费您至少`8*((2+45) / 8)`= 47 个字节。

再加上 arraylist 的成本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T05:54:00.097

您完全忽略了您正在创建的字符串和列表的成本，特别是它的增长策略。检查Javadoc。我在里面看到的 ArrayList 的实现在列表溢出时会增加 50%。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T06:06:04.333

Java 是一种垃圾收集语言，因此您无法查看外部测量的虚拟内存占用量在执行某些代码时的变化来估计数据结构的大小。您正在考虑堆中的增量，这可能是由于垃圾的积累以及垃圾的积累。如果给自己提供比表示活动对象集所需的空间多得多的空间，那么垃圾收集也会更好，这样收集就不会那么频繁。一般来说，如果闲置空间很少，垃圾收集会变慢。如果虚拟机将其内存占用量保持在表示所有对象所需的最低限度，它的性能将非常糟糕。

# c# - 单击网格视图中的一行时的回发

> ID：10135838
> 
> 赞同：2
> 
> 时间：2012-04-13T05:45:26.293
> 
> 标签：c#, asp.net, gridview, postback, web-controls

我正在使用[此处](https://stackoverflow.com/questions/6250545/how-to-implement-full-row-selecting-in-gridview-without-select-button)找到的代码使我的 gridview 具有可点击的行。代码是：

```
 protected void gvdownloadaccounts_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        e.Row.Cells[0].Visible = false; //hide the ID

        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';";
            e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
            e.Row.ToolTip = "Click to select row";
            e.Row.Attributes["onclick"] = this.Page.ClientScript.GetPostBackClientHyperlink(this.gvdownloadaccounts, "Select$" + e.Row.RowIndex);
        }
    } 
```

...效果很好！...除了我需要让它“onclick”在后面的代码中运行 C# 方法。该方法从数据库中获取数据并使用该数据填充一些 Web 控件（如文本框等）。这似乎不应该那么难，所以如果有人能在正确的方向上给我一脚，那就太棒了。

我正在玩弄只重定向到同一页面的想法，但是使用查询字符串，这样我就可以在 page_load 上捕获我的代码。但正如人们所预料的那样：

```
e.Row.Attributes["onclick"] = Response.Redirect("www.google.com"); 
```

...不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:30:26.450

## 标记

`<asp:Button ID="btn" runat="server" style="display:none;" OnClick="Btn_Click" OnClientClick="UpdateControl();"`/>

//这个按钮将被隐藏。执行单击并在后面的代码中调用其处理程序中的函数将很有用。现在在处理程序中编写代码来调用您的 c# 方法。

## Java 脚本

//执行隐藏按钮的点击。

```
<script language="javascript" type="text/javascript">
    function PerformClick() {
        document.getElementById('<%=btn.ClientID %>').click();
    }
</script> 
```

* * *

## 您将如何在每个单独的行单击时调用 C# 方法？

`e.Row.Attributes["onclick"] = "<script language='javascript' type='text/javascript'>function PerformClick() {document.getElementById('<%=btn.ClientID %>').click();</script>";`

# java - 在 Java 面板中包含命令提示符

> ID：10135844
> 
> 赞同：2
> 
> 时间：2012-04-13T05:45:54.157
> 
> 标签：java, swing, command

我有一个批处理文件，可以从 SVN 中签出代码并在上面调用一些命令。这发生在 windows 命令提示符下。我想从我的 java 程序中调用这个批处理文件，并且命令提示符必须出现在我的应用程序窗口的控制台中，而不是作为一个单独的窗口，这样我才能从我的应用程序中看到批处理的输出。

谁能告诉我如何在我的控制台中包含命令提示符？我正在使用摇摆。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T08:23:28.963

如果您只想查看输出，请忘记命令提示符。

1.  创建一个[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html).
2.  呼吁[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)。
3.  读取输出和错误流，并将它们发送到类似[`MessageConsole`](http://tips4java.wordpress.com/2008/11/08/message-console/).

![消息控制台](../Images/a65eb19261aee028de6e8d8e1f3b3966.png)

顺便说一句 - 当（不是如果）您使用 a 时遇到问题`Process`，请参阅[When Runtime.exec() won't](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html) & implementation**所有**建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T05:54:39.730

答案是“不，你不能那样做”。

Java 无法在 JFrame 中显示本机程序的 GUI，即使目标程序实际上被设计为允许其 GUI 显示在另一个程序的框架中。如果你使用 JNI 程序，你可能会成功。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T08:26:06.947

我自己没有尝试过，但是如果您从您的 java 代码启动程序并将该进程的 PrintStream 的结果打印到您的控制台（stdout），这还不够吗？

# optimization - 牛顿法分形生成的θ函数评估加速

> ID：10135845
> 
> 赞同：4
> 
> 时间：2012-04-13T05:45:59.337
> 
> 标签：optimization, fractals

我一直在尝试生成[Jacobi theta 函数](https://en.wikipedia.org/wiki/Theta_function)[的牛顿方法](https://en.wikipedia.org/wiki/Newton_fractal)分形——我对 mpmath 的尝试需要很长时间，所以我尝试用 C 对其进行编码。

用于生成以下图像的源在这里：[http://owen.maresh.info/allegra.c](http://owen.maresh.info/allegra.c)并将使用*gcc allegra.c -o allegra -lm*进行编译，然后应调用为 ./allegra > jacobi.pnm

[![](../Images/554efe583245ebd71c2ade7c84dad974.png)](https://i.stack.imgur.com/Kdu0r.png)
[（来源：[maresh.info](http://owen.maresh.info/jacobi.png)）]

所以：* 有什么方法可以加快评估速度——这需要半个多小时的时间来制作这张图片？（我希望能够使用不同的名称快速生成这些图像，以便制作电影） * 我知道我在 theta 函数定义中犯了一个错误，但我很难找到原因不连续性。

出于参考目的，此图像是通过对 ϑ [3] (z,0.001-0.3019*i)执行标准牛顿法生成的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T08:09:53.193

First try enabling compiler optimizations with `-O3` and/or `-fast`. A quick test on my system showed a factor or 3 performance improvement

Also, when experimenting with code changes to improve performance, it is beneficial to have a quicker runtime, perhaps by changing your main loop to `for(a=0;a<10 /* 512*/ ;a++)`

Also note: GCC supports [complex numbers](http://gcc.gnu.org/onlinedocs/gcc/Complex.html) and see man pages `complex`, `cpow`, and `cexp` and include file `/usr/include/complex.h`

I profiled the application, and saw it is spending most of the time in `powc()`. Unfortunately when I changed powc() to use `cpow()` from the math library, it ran slower than your implementation.

If the system you are running on has multiple cores, wall clock time could probably be brought down fairly easily by parallelizing the outer main-loop with OpenMP. However, when you are generating image frames for the animation, it will likely be most efficient to just have each frame being generated with a separate process (I like `xargs -P # -n 1` for this type of coarse grain parallelization.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T04:39:51.027

当你在 IRC 上提到这个时，我心情很奇怪，花了一段时间优化它。它现在在我的 Mac 上至少快 4 倍，不算编译器优化标志，在其他一些平台上更是如此。

我……对高等数学一无所知，但我确实知道一些关于优化的事情。我相信这里的计算与原始计算相同，除了用系统 cexp() 代替你在 expc() 中的实现，它会产生相同的输出。你可以决定它在数值上是否对你来说仍然足够稳定。

正如 Brian Swift 所指出的，powc() 很昂贵，这是因为 log() 和 pow() 函数

大获全胜的事情：

*   pjtheta() 和 pjtheta3() 中的计算可以合并
*   该计算可以在 newt() 中进行内部循环，其中一些可以移出内部循环或两个循环
*   cpow() 对于 Brian（和我）来说可能会慢一些，但是 cexp() 肯定比你的代码快，至少在我的机器上是这样。尝试两种方式
*   编译器标志中的 -ffast-math 删除了对符合不良数字的标准的支持并大大加快了速度

另一个重大胜利是将 cexp() 和 cpow() 中的算术转换为单精度，但这会产生略有不同的结果，您可能关心也可能不关心。

您可能不再认识该程序，但它位于：

[https://github.com/cgull/allegra.git](https://github.com/cgull/allegra.git)

我注意到了更多的东西，并从中剔除了 25%-33% （天哪，这是一个收敛的迭代函数！）

我敢肯定，比我更了解高等数学的人可以在那里找到另外 2-4 倍的性能......

# c# - DataGridView.SelectedItem[0] 到 GenericType

> ID：10135846
> 
> 赞同：1
> 
> 时间：2012-04-13T05:46:06.233
> 
> 标签：c#, wpf, datagridview, anonymous-types

首先，我将 DataGridView 的 datacontext 分配给从 Generic Class 获得的`Company`匿名类型 首选匿名类型以获得要在 DataGridView 中显示的所需列名。

```
 var companyData = (from c in dataContext.Companies 
           select new 
           {
               Company =c.CompanyName,
               City=c.City.CityName,

           });

    dataGridView.DataContext = companyData; 
```

现在我想在 MouseDoubleClick 事件时获取选择行值。但问题是我无法将匿名类型转换回我的泛型类型 Company。

```
void dataGridView_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
           var selectedRow = dataGridView.SelectedItem[0];
           // How to convert selectedRow back to Company ? 
           // Anonymous type have no implementation of AsEnumerable.
} 
```

我想要这样的东西：

```
Company company = selectedRow.Select(c=>new Company
                                    (CompanyName=selectedRow.Company,
                                     CityName=selectedRow.City); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:22:38.140

使用 Extension 方法将 DataGridViewRow 转换为 Any Type

```
 public static class DataGridViewRowWExtenstions
    {
        public static T GetObject<T>(this DataGridViewRow Row) where T : new()
        {
            List<PropertyInfo> properties = typeof(T).GetProperties().ToList();

            return CreateItemFromRow<T>(Row, properties);
        }

        private static T CreateItemFromRow<T>(DataGridViewRow row, List<PropertyInfo> properties) where T : new()
        {
            T item = new T();
            foreach (var property in properties)
            {
                if (row.DataGridView.Columns.Contains(property.Name))
                {
                    if (row.Cells[property.Name] != null)
                        property.SetValue(item, row.Cells[property.Name].Value, null);
                }
            }
            return item;
        }
    }

private void dataGridView2_CellMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e)
        {
            DataGridViewRow selectedRow = dataGridView2.SelectedRows[0];
            Company company = selectedRow.GetObject<Company>();
        } 
```

# c# - 在 MVVM (WPF) 应用程序中更改 ListView 上的过滤器后，如何 ScrollIntoView？

> ID：10135850
> 
> 赞同：4
> 
> 时间：2012-04-13T05:46:46.193
> 
> 标签：c#, wpf, listview, mvvm, filter

我在 VM 中有一个 ObservableCollection，它显示在 ListView 的视图中。当所选项目发生变化时，SelectionChanged 事件会很好地触发。以下是我配置 ListView 的方式：

```
<ListView Grid.Row="3" Margin="5" AlternationCount="2" Name="_lvSettings" 
          IsSynchronizedWithCurrentItem="True"
          ItemsSource="{Binding Path=CollectionView}" 
          SelectedIndex="{Binding Path=SelectedSettingIndex}"
          SelectionChanged="OnSelectionChanged"  >
    <ListView.View>
        <GridView>
            <GridViewColumn Width="170" 
                            Header="{Binding Path=ShowAllDisplay}"
                            x:Name="_colSettings"  
                            DisplayMemberBinding="{Binding Path=Setting}"/>
            <GridViewColumn Header="Old Value" Width="150" 
                            DisplayMemberBinding="{Binding Path=OldVal}"/>
            <GridViewColumn Header="New Value" 
                            DisplayMemberBinding="{Binding Path=NewVal}" />
        </GridView>
    </ListView.View>
</ListView> 
```

我遇到的问题是当我更改集合上的过滤器时。选中的项目保持不变，这很好，但是 ListView 从第一个项目变为显示，并且通常选中的项目不在视图中（但仍然是选中的项目）。

在 VM 中，我有属性“SelectedSettingIndex”，它在更改时引发 PropertyChanged 事件。即使我在过滤器更改时从 VM 自己手动引发事件 (base.OnPropertyChanged("SelectedSettingIndex");)，事件似乎并没有真正引发，因为属性并没有真正改变。在这种情况下，必须有一种方法可以调用 ScrollIntoView 或类似的东西，但我无法找出正确的事件或触发器来这样做。我错过了什么？

**编辑**

这是对我所关心的问题的描述，希望更好：

1) 我在 VM 中使用 CollectionViewSource 来过滤数据。

2）有一个按钮供用户在过滤器之间切换。

3) 假设 ListView 在任何给定时间都可以显示多达 10 个项目。

4) 用户在列表视图的索引 50 处的过滤视图中选择项目“A”。

5) 然后用户点击按钮关闭过滤。

预期结果：ListView 填充有未过滤的列表，项目“A”保持选中状态，ListView 被“滚动”，因此项目“A”仍然可见。

实际结果：ListView 填充有未过滤的列表，项目“A”保持选中状态，ListView 被“滚动”到顶部并显示前 10 个项目。项目“A”不在视图中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T07:59:07.730

如果您使用的是 MVVM，那么您需要确保已将绑定设置为 viewModel 中的选定项目，并且也使用`Mode=TwoWay`... 并且为了在选择上滚动，我们必须在 ListView 上使用行为（避免后面的代码）

您必须添加参考 `System.Windows.Interactivity`才能使用`Behavior<T> class`

# 行为

```
public class ScrollIntoViewForListView : Behavior<ListView>
{
    /// <summary>
    ///  When Beahvior is attached
    /// </summary>
    protected override void OnAttached()
    {
        base.OnAttached();
        this.AssociatedObject.SelectionChanged += AssociatedObject_SelectionChanged;
    }

    /// <summary>
    /// On Selection Changed
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void AssociatedObject_SelectionChanged(object sender,
                                           SelectionChangedEventArgs e)
    {
        if (sender is ListView)
        {
            ListView listview = (sender as ListView);
            if (listview.SelectedItem != null)
            {
                listview.Dispatcher.BeginInvoke(
                    (Action) (() =>
                                  {
                                      listview.UpdateLayout();
                                      if (listview.SelectedItem !=
                                          null)
                                          listview.ScrollIntoView(
                                              listview.SelectedItem);
                                  }));
            }
        }
    }
    /// <summary>
    /// When behavior is detached
    /// </summary>
    protected override void OnDetaching()
    {
        base.OnDetaching();
        this.AssociatedObject.SelectionChanged -=
            AssociatedObject_SelectionChanged;

    }
} 
```

# 用法

将别名添加到`XAML`as `xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"`

然后在你的`Control` DisplayMemberBinding="{Binding Path=Setting}"/>

现在，当在列表中设置“MySelectedItem”属性`ViewModel`时，将在重新反映更改时滚动。

# 变更通知

在 viewModel 中应该调用 INotifyProperty 在您绑定到 xaml 的属性设置器中更改，以便 viewModel 中的更改可以反映到 View ...

# 在 MVVM 中使用 SelectionChanged 事件

同样在 MVVM 中，您不必使用“SelectionChnaged 事件”，因为您可以调用 MySelectedItem 属性的 Setter 中的函数，或者您可以使用`EventToCommand`类进行显式事件调用。

# 过滤

谷歌使用 ColletionViewSource 进行排序、过滤等功能

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:18:42.507

将 ListView 的 SelectedItem 保存在属性中：

```
public MyTypeOfObject SelectedItem { get; set; } 
```

将绑定分配给 XAML：

```
<ListView Name="MyListView" SelectedItem="{Binding SelectedItem}"...></ListView> 
```

现在，每当您更改过滤器时，请执行以下操作：

```
if (SelectedItem != null)
    MyListView.ScrollIntoView(SelectedItem); 
```

**编辑：**

要在您的用户控件中执行此操作，为了让您从控件引用 (ListView) 中清除视图模型，请在此处捕获标准`CollectionView`事件或定义您自己的事件，该事件将在过滤器或其他工作发生后触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:55:05.207

好的 - 所以我找到了 2 个可行的解决方案，但不是 100% 满意：

1) 使用 ViewModel 的 Mediator 模式来通知视图过滤器已更改。然后视图将在当前选定的项目上调用 ScrollToView。虽然我喜欢用于 VM 到 VM 通知的中介器，但在 ViewModel 和它的匹配视图之间使用它会感觉很脏。

2) 在处理程序内的当前选定项上调用 ScrollToView 到 ListView 的 LayoutUpdated 事件。笨手笨脚，效率低下——就是不喜欢这样。

我不会将此标记为已回答，希望有更好的解决方案。把它放在这里是为了好奇或其他可能正在寻找类似问题的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-15T20:49:19.307

[从其他一些帖子(Credit)](https://stackoverflow.com/questions/18019425/scrollintoview-for-wpf-datagrid-mvvm "信用")中找到解决方案，将附加属性绑定到 collectionview 过滤器的计数：

附加属性：

```
public class SelectingItemAttachedProperty
{
    public static readonly DependencyProperty SelectingItemProperty = DependencyProperty.RegisterAttached(
        "SelectingItem",
        typeof(int),
        typeof(SelectingItemAttachedProperty),
        new PropertyMetadata(default(int), OnSelectingItemChanged));

    public static int GetSelectingItem(DependencyObject target)
    {
        return (int)target.GetValue(SelectingItemProperty);
    }

    public static void SetSelectingItem(DependencyObject target, int value)
    {
        target.SetValue(SelectingItemProperty, value);
    }

    static void OnSelectingItemChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var lb = sender as ListBox;
        if (lb?.SelectedItem == null)
            return;

        lb.Dispatcher.InvokeAsync(() =>
        {
            lb.UpdateLayout();
            lb.ScrollIntoView(lb.SelectedItem);
        });
    }
} 
```

看法：

```
<Listbox
    design:SelectingItemAttachedProperty.SelectingItem="{Binding CollectionViewFromVM.Count}"
   ...> 
```

在大多数情况下，这似乎工作正常 =)

# forms - Symfony2 中是否可以仅显示字段类型？

> ID：10135856
> 
> 赞同：4
> 
> 时间：2012-04-13T05:47:49.670
> 
> 标签：forms, symfony

我想要只显示字段来呈现永远不会更改或提交的数据。

类似于[bootstrap 的静态控件](http://getbootstrap.com/css/#forms-controls-static)。

我需要在不破坏表单结构或样式的情况下在表单中显示对象数据。我希望这些数据使用与所有其他输入相同的模板，但不将其呈现为动态输入。

我想了几种方法来实现这一点，有些是普通的黑客，有些似乎更合法，但我不知道是否有更标准的方法来做到这一点。

这是我想到的选项列表，没有特别的顺序：

1.  对字段使用只读属性：感觉不是很好，我不希望用户觉得他们可以更改某些内容，但出于某种原因不允许这样做。

2.  破解模板以输出除输入元素以外的其他内容：对我来说似乎很讨厌，此外还需要处理服务器端提交时丢失的字段。

3.  扩展字段类型以创建它们的仅显示版本。我不认为这会是安全的。

4.  编写自定义 fieldType 来完成这项工作。此选项可以很好地用作其他字段的基本类型。

我认为最好的解决方案是选项 3 或 4。我唯一还没有找到的是如何处理提交时丢失的字段。

我认为拥有这种类型的字段很重要，因为它允许重用表单类型逻辑。否则，我最终会编写如下所示的树枝模板：

```
<form>

    {# This is the average writtable field #}
    {{ form_row(form.field1) }} 

    {# This is the display-only field, notice I have to replicate
       markup. Even if I wrote a macro, which I did, I would still
       have to replicate markup in the macro.
    #}
    <label>Field 2</label>
    <div>{{ the_object.field2 }}</div>

</form> 
```

最后，有没有人有更好的想法或认为这种方法完全有缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:06:58.130

您可以使用以下`disabled`属性：

```
{{ form_row(form.field1, {'attr': {'disabled': 'disabled'}}) }} 
```

另请参阅[如何使用表单事件动态生成表单](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)手册条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T03:05:15.940

我最终使用 read_only 属性和自定义模板（选项 1 和 2 的组合）来更改启用 read_only 属性的字段的呈现。

不希望发送带有 readonly 属性的字段（它们使用 disabled 属性呈现，@elnur 指出相同）并且如果在 POST 上存在则被拒绝，所以我所要做的就是更改模板以不同方式呈现。

这是一个示例模板：

```
{% block field_widget %}
{% spaceless %}
    {% if read_only %}
        <span {{ block('widget_container_attributes') }} >
            {{ value|default('&nbsp')|raw }}
        </span>
    {% else %}
        {% set type = type|default('text') %}
        <input type="{{ type }}" {{ block('widget_attributes') }} value="{{ value }}" />
    {% endif %}
{% endspaceless %}
{% endblock field_widget %} 
```

另一种方法是使用表单扩展为所有字段创建一个新属性，但 read_only 属性适合我的需要。

# iphone - UIScrollView 未检测到 UITouch 事件

> ID：10135857
> 
> 赞同：0
> 
> 时间：2012-04-13T05:47:51.970
> 
> 标签：iphone, uiview, uiscrollview, touch

我有一个`UIScrollView`带有子视图的`UIView`，这里`UIView`也有类型的子视图`UIImageView`。

层次结构类似于`ViewController -> UIScrollView -> UIView -> UIImageView`.

全部，`UIScrollView, UIView, UIImageView`动态添加，全部启用`userInteractionEnabled=YES`，`UIScrollView`当用户滚动时，会立即看到六个视图，下一个六个视图`UIViews`将是可见的。

我正在实现 UITouch 事件来检测我的任何触摸`UIImageView`

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    //I want to detect particular UIImageView
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    //Here, user can move any UIImageView
} 
```

但是，我无法检测到触摸它。我尝试[这里](https://stackoverflow.com/questions/2397818/using-uitouch-inside-a-uiscrollview)说的其他一些方法。也尝试了一些我的想法建议我，但我发现并意识到下面的任何子视图`UIScrollView`都无法检测到任何对象。

我还尝试了另一件事，我在其中添加了一个`UIView`子视图`self.view`，任何有趣的事情都可以检测到`touch`！

有没有人遇到这种问题，有什么解决办法吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:11:15.330

试试这个：-

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
 UITouch *touch = [[event allTouches] anyObject];
 //sampleImageView is the imageView.
 CGPoint location = [touch locationInView:sampleImageView];
 if ([touch view] == sampleImageView) 
  {
    //.....    
  }
} 
```

将此用于触摸检测。检查它希望它有帮助。谢谢:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:24:42.953

你可以做一件事，

我已经遇到了同样的问题，所以在 UIscrollview 添加 Caustom UIButton 并设置图像并将所有按钮定义到 UIButton 中。这种方式工作非常顺利。

```
UIScrollView* scrForSubItem = [[UIScrollView alloc] initWithFrame:CGRectMake(10,2,1024,580)]; 
[scrForSubItem setAlwaysBounceVertical:YES];
scrForSubItem.minimumZoomScale = 1;
scrForSubItem.maximumZoomScale = 3;
scrForSubItem.scrollEnabled = YES;
scrForSubItem.pagingEnabled = NO;
scrForSubItem.directionalLockEnabled = YES;
scrForSubItem.showsVerticalScrollIndicator = YES;
scrForSubItem.backgroundColor = [UIColor clearColor];
scrForSubItem.delegate = self;

int xOffset = 0;
int yOffset = 0;
for (int i = 0; i < [currnetitem count]; i++) {

UIImageView* imgViewBtn=[[[UIImageView alloc]initWithFrame:CGRectMake(xOffset,yOffset,            246,170)] autorelease];

    [imgViewBtn setUserInteractionEnabled:YES];
    [imgViewBtn setContentMode:UIViewContentModeScaleAspectFit];
    imgViewBtn.image=btnImg;

    UIButton *btnSelectTile = [UIButton buttonWithType:UIButtonTypeCustom];
    [btnSelectTile setFrame:CGRectMake(0,0,246,170)];
    [btnSelectTile setTag:i];
    [btnSelectTile setBackgroundColor:[UIColor clearColor]];
    [btnSelectTile addTarget:self action:@selector(scrImagePressed:) forControlEvents:UIControlEventTouchUpInside];
    [imgViewBtn addSubview:btnSelectTile];

    [self.scrForSubItem addSubview:imgViewBtn];
   xOffset += btnSelectTile.frame.size.width+10;

    if(xOffset>scrollWidth)
    {
        xOffset=0;
        yOffset += btnSelectTile.frame.size.height+10;
        [scrForSubItem setContentSize:CGSizeMake(xOffset,yOffset)];
    }
    else{

        [scrForSubItem setContentSize:CGSizeMake(xOffset,170)];

    }

    [self.viewa ddSubview:scrForSubItem]; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:25:14.350

// 创建.h文件

@interface AppScrollView : UIScrollView {

}

*   (id)initWithFrame:(CGRect)frame;

@结尾

// 创建 .m 文件

# 导入“AppScrollView.h”

@implementation AppScrollView

*   (id)initWithFrame:(CGRect)frame { if ([super initWithFrame:frame]){ } return self; }

    *   (void) touchesEnded: (NSSet *) touches withEvent: (UIEvent *) event {

    // 如果不拖拽，发送事件给下一个响应者

    if (!self.dragging)

    ```
    [self.nextResponder touchesEnded: touches withEvent:event]; 
    ```

    别的

    ```
    [super touchesEnded: touches withEvent: event]; 
    ```

    }

    @结尾

现在在你的 UIViewController

// 为滚动视图创建对象

AppScrollView* 滚动视图；

# javascript - jQuery 按钮容器小部件

> ID：10135861
> 
> 赞同：1
> 
> 时间：2012-04-13T05:48:11.310
> 
> 标签：javascript, jquery, jquery-ui

小部件的行为方式如下：当我按下按钮时，它会出现一个“容器”，其中可以包含多个图标按钮。什么是合适的容器？

我曾尝试使用 jQuery 对话框，但似乎很难使用。我还有别的选择吗？还是只是我不知道如何使用 jQuery 对话框？

请给我一些指导，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:02:44.147

嗯，似乎 jQuery UI 对话框和按钮应该可以解决问题。

**见：http: [//jsfiddle.net/vQuGU/](http://jsfiddle.net/vQuGU/)**

或者你想要一些不同的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:59:45.783

尝试[jquery覆盖](http://jquerytools.org/demos/overlay/index.html)

# javascript - WordPress 主题在 IE 8 及以下版本中显示不正确

> ID：10135864
> 
> 赞同：0
> 
> 时间：2012-04-13T05:48:22.877
> 
> 标签：javascript, html, css, wordpress, wordpress-theming

我正在[http://chaseonthelake.com/](http://chaseonthelake.com/)上工作。该站点在 FireFox 中运行良好，但是在 Internet Explorer 中打开时，下拉菜单的透明度无法正确显示，导致下拉菜单无法读取，并且侧边栏项目周围有黑色边框。看看下面的图片，看看我在说什么。任何有关这些问题的帮助将不胜感激！![在此处输入图像描述](../Images/8a6f566937737617914101b0ba73b43c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:26:18.680

消除

`.class {filter:alpha(opacity=value);}`

对于您的 css 中的此图像。我希望它对你有用并使用 css

`a img {border:none 0;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:58:18.420

由于 IE 将默认 CSS 样式应用于某些元素，可能会出现黑色边框的问题。我建议在您的任何 CSS 之前使用像 Eric Meyer 的“CSS 重置”来标准化跨浏览器的基本样式。

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

至于菜单透明度，如果你使用`rgba`CSS 中的属性来做透明度，它在 IE 8 或更低版本中是行不通的。您可以将标准属性用作在支持它的浏览器中`rgb`被该属性覆盖的后备，如下所示：`rgba`

```
.menu{
  background-color: rgb(255, 255, 255) /*Fallback for non-rgba-supporting browsers*/
  background-color: rgba(255, 255, 255, 0.8);
} 
```

# javascript - 如何扩展或原型化 HTML 表格

> ID：10135865
> 
> 赞同：2
> 
> 时间：2012-04-13T05:48:23.197
> 
> 标签：javascript, inheritance, extend

是否可以扩展原生 HTML 表格？

C# 示例：`public class: htmltable{}`

或类似的东西：

```
HTMLTable.prototype.myType=function(){
 this.clss='myClass';
 this.setAttribute('class',this.clss);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:03:52.660

如果浏览器已经为 DOM 元素实现了继承方案，您通常可以根据该方案扩展它们。大多数现代浏览器都实现了与 ECMA-262 一致的原型继承，**但**不要使用它，因为：

1.  用户代理不需要实现继承，许多（大多数？）不需要。请注意，除了浏览器之外，还有许多用户代理
2.  即使浏览器确实实现了继承，也不需要它与 ECMA-262 一致（尽管这样做是明智的）
3.  您的扩展可能会与某些或所有浏览器中当前或未来的主机对象扩展发生冲突

Prototype.js 在支持它的 UA 中使用 DOM 元素继承，并在不支持的地方使用“扩展”DOM 元素本身的后备。由于上述原因，它最近放弃了该策略。它也容易出错且速度慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:33:45.317

我正在构建一个高程的在线 cad 程序。立面具有包含门、窗和水平线的隔间，这些隔间将隔间分开。使用表格非常适合这种情况，“直到浏览器开始实现工作人员和本地存储以及画布”。

我正在使用一个数组来存储每个托架，即：暗淡、水平计数、门或窗计数。因此，当调整大小或发生某些事情时，如果需要，我必须遍历托架数组并重置它们的所有属性。然后我必须更新实际的 td 才能查看。基本上，我在核心中更新它并将其传递回 UI，它会执行更新信息所需的任何操作。

我只是确保我无法扩展 htmltd，然后才走得更远。我在想取消数组会很好，也许这也不是最好的方法，但看起来我永远不会知道。;)

像下面的代码是我所追求的。

```
this.myWidth;

var bays = this.rows[0].cells, len=bays.length, bay;
for(i=0; i< len;i++){

    this.myWidth = someThingCalculated from a parameter;
    bay = bays[i];
    bay.style.width= ((this.myWidth / elevationWidth) * 100)) + %;
}; 
```

# c# - C# 类型转换为泛型接口

> ID：10135866
> 
> 赞同：7
> 
> 时间：2012-04-13T05:48:29.467
> 
> 标签：c#, generics

我正在编写一个将一堆*子*对象呈现到屏幕的库。子对象是抽象的，它旨在供该库的用户从该抽象类派生出他们自己的子对象。

```
public abstract class Child : IRenderable {}

public interface IParent<T> where T : Child
{
   IEnumerable<T> Children { get; }
} 
```

复杂之处在于我没有可以使用的 IParent 列表，相反，我有一堆 IRenderables。图书馆的用户应该写这样的东西：

```
public class Car : IRenderable { }
public class Cow : IRenderable, IParent<Calf> { }
public class Calf : Child { }

// note this is just an example to get the idea
public static class App
{
   public static void main()
   {
      MyLibraryNameSpace.App app = new MyLibraryNameSpace.App();
      app.AddRenderable(new Car()); // app holds a list of IRenderables
      app.AddRenderable(new Cow());
      app.Draw(); // app draws the IRenderables
   }
} 
```

在 Draw() 中，库*应该*强制转换并检查 IRenderable 是否也是 IParent。但是，由于我不了解小牛，所以我不知道将牛投进什么。

```
// In Draw()
foreach(var renderable in Renderables)
{
   if((parent = renderable as IParent<???>) != null) // what to do?
   {
      foreach(var child in parent.Children)
      {
          // do something to child here.
      }
   }
} 
```

我该如何克服这个问题？这与协方差泛型或其他任何事情有关吗（我不熟悉协方差概念）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T05:56:02.903

由于`IParent<T>`只*返回*type 的项目，您可以使用[修饰符](http://msdn.microsoft.com/en-us/library/dd469487.aspx)`T`使其协变：[`out`](http://msdn.microsoft.com/en-us/library/dd469487.aspx)

```
public interface IParent<out T> where T : Child
{
   IEnumerable<T> Children { get; }
} 
```

这将使`IParent<anything>`可转换为`IParent<Child>`：

```
IParent<Child> parent = renderable as IParent<Child>; // works for Cow 
```

* * *

请注意，协方差仅在您只*返回*类型的对象时才有效`T`（简单地说）。例如，一旦`AddChild(T)`向接口添加方法`IParent`，协方差就必须中断（= 编译器会抱怨），否则，可能会编写以下类型不安全的代码：

```
IParent<Child> parent = renderable as IParent<Child>;
parent.AddChild(new Kitten()); // can't work if parent is really a Cow. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:55:58.787

您可以实现中间非泛型接口IParent：

```
public interface IParent
{
    IEnumerable<Child> Children { get; }
}

public interface IParent<T> : IParent
  where T: Child
{
    IEnumerable<T> Children { get; }
} 
```

然后在你的函数中转换为 IParent。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T06:10:11.207

沿着以下几条线？

```
static void draw(List<IRenderable> renderables)
{
    foreach (IRenderable render in renderables)
    {
        if (render is IParent<Child>)
        {
            foreach (Child c in ((IParent<Child>)render).Children)
            {
                //do something with C?
            }
        } 
    }
} 
```

# vb.net - 将接收到的数据写回浏览器时，为什么我的 NetworkStream.Write() 很慢？

> ID：10135871
> 
> 赞同：1
> 
> 时间：2012-04-13T05:49:15.033
> 
> 标签：vb.net

我正在服务器 vb.NET 中构建一个简单的代理，到目前为止它已经成功，但是每当我从互联网接收数据并使用`NetworkStream.Write`接收到的数据将其写回浏览器的网络流时，我的浏览器往往会缓慢出现我不知道的原因。但是当我将我的应用程序链接到本地​​计算机上的另一个代理/侦听器（例如 Privoxy）时，数据似乎很快就会出现在我的浏览器中。如果有人对此有答案，我真的很想知道。谢谢

顺便说一句，这是我的代码 {subroutine} 的一部分，它接收数据并转发到我的浏览器。

```
 Public Sub ForwardRequest(ByVal Client As TcpClient, ByVal ClientMessage As String)

        Dim Browser As TcpClient = Client
        Dim BrowserStream As NetworkStream = Browser.GetStream
        Dim Server As TcpClient = New TcpClient(IPAddress.Parse("testwebsite.com").ToString, 80)
        Dim ServerStream As NetworkStream = Server.GetStream

        ServerStream.Write(Encoding.ASCII.GetBytes(ClientMessage), 0, Encoding.ASCII.GetBytes(ClientMessage).Length)

        Dim Buffer(1024) As Byte
        Dim ReceivedInt As Integer

        Do
            ReceivedInt = ServerStream.Read(Buffer, 0, Buffer.Length)
            BrowserStream.Write(Buffer, 0, ReceivedInt)
        Loop While (ReceivedInt > 0)

        BrowserStream.Flush() 'I read somewhere that this does nothing though
        BrowserStream.Close()
        Browser.Close()
        ServerStream.Close()
        Server.Close()

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:09:54.210

好的，我自己设法解决了“谜团”，我继续使用`Asynchronous Sockets`套接字，一切都开始运行良好。谢谢。

# android - ISO 8583 手机银行

> ID：10135877
> 
> 赞同：0
> 
> 时间：2012-04-13T05:49:32.527
> 
> 标签：android, banking, iso8583

请让我知道以下信息足以满足余额查询请求和响应..我使用 JPOS 库来构建..我在 android 中做手机银行。

余额查询请求的 ISO 8583 格式

```
—-ISO MESSAGE—–
MTI : 0100
Field-2 : 070116123456789
Field-3 : 301000
Field-11 : 000001
RESULT: 0100602000000000000015070116123456789301000000001
ISO 8583 Format for the Balance Query Successful Response

—-ISO MESSAGE—–
MTI : 0110
Field-2 : 070116123456789
Field-3 : 301000
Field-4 : 5000
Field-11 : 000001
Field-12 : 024100
Field-13 : 0411
Field-39 : 00
——————–
RESULT : 0110703800000200000015070116123456789301000000000005000000001024100041100 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:37:18.870

ISO 8583 定义了消息格式。在 ISO 8583 之上开发的服务是特定于实现的。您必须按照特定收单方的规格进行开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-09T10:12:02.430

ISO 8583 - 余额查询，处理代码 DE 03 = 310000 | MTI = 0100

# python - 在 Python 中运行时创建函数

> ID：10135878
> 
> 赞同：0
> 
> 时间：2012-04-13T05:49:35.313
> 
> 标签：python, metaprogramming

是否有可能做这样的事情：

```
def fns(Names, Args, Bodies):
    for i in range(len(Names)):
        exec("def " + Names[i] + "(" + Args + "): " + Bodies[i]) 
```

所有函数都应该在全局范围内，调用代码的数量不应该取决于函数的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:54:56.593

不是一个好主意..但是

```
for i in range(len(Names)):
    exec("def " + Names[i] + "(" + Args + "): " + Bodies[i]) #create locally
    globals()[Names[i]] = locals()[Names[i]]                           #assign to global space 
```

但我不建议这样做……那是未经测试的代码

# php - codeigniter 中的分页未按预期工作

> ID：10135882
> 
> 赞同：0
> 
> 时间：2012-04-13T05:50:01.567
> 
> 标签：php, codeigniter

我的控制器

```
function index()
{
    $this->load->library('pagination');
    $this->load->model('specialoffer_model');
    if($this->input->post('btnUpdate'))
    {
        $this->specialoffer_model->addoffer();
    }
    $data['addoffer']=$this->specialoffer_model->addoffer();
    $data1=array(
                'row'=>$data['addoffer']['row'],
                'result'=>$data['addoffer']['result'],
                );
     $config['base_url'] = site_url('specialoffer/index') . '/';
     $config['total_rows'] = $this->db->count_all('home');
     $config['per_page'] =2;
     $this->pagination->initialize($config);
     $data1['results'] =
                    $this->specialoffer_model->get_page (
                                $config['per_page'],
                                $this->uri->segment(3));
     $this->load->view('specialoffer',$data1);
} 
```

看法

```
 echo $this->pagination->create_links(); 
```

仅生成页面链接，单击它时页面会刷新，但会显示表中的所有记录，而我已指定要显示的表中的 2 条记录。简而言之，分页不起作用。帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:42:14.173

最好使用：

```
$this->db->limit($num,$offset);
$query = $this->db->get('home');
return $query->row_array(); 
```

# c - 读取的文件和写入的文件不相同

> ID：10135885
> 
> 赞同：0
> 
> 时间：2012-04-13T05:50:12.693
> 
> 标签：c, fflush

我正在尝试将大约 3KB 的文件的内容读入缓冲区，然后将缓冲区的内容写入另一个文件。写入数据的文件仅包含写入其中的一部分数据。它的大小约为 1KB。剩下的数据怎么写？

```
fp1 = fopen("a.txt","rb");
fp2 = fopen("b.txt","wb");

fread(buffer, 1, BUFFER_SIZE,fp1);//reading from file pointed to by fp1
//BUFFER_SIZE = 3KB
fwrite(buffer, 1, BUFFER_SIZE, fp2);//writing into a file pointed to by fp2 
```

fwrite 之后的 fflush 会为我这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T05:51:53.913

`fflush(fp2)`或`fclose(fp2)`将待处理的缓冲字节移动到磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:55:11.773

*无法*保证会为`fread`您提供您要求的所有字节。它可以给你更少的东西，这就是返回码的用途。

您需要使用返回码来确定要发送多少信息到`fwrite`.

并且对返回码的检查也延伸到了`fopen`调用——不能保证 open 会起作用。

例如，下面的完整程序将尝试将最多 3K 从一个文件复制到另一个文件：

```
#include <stdio.h>
#include <errno.h>

int main (void) {
    FILE *fp1, *fp2;
    char buff[3*1024];
    int bytesRead;

    // Open both files.

    if ((fp1 = fopen ("a.txt", "r")) == NULL) {
        printf ("Error %d opening a.txt\n", errno);
        return 1;
    }
    if ((fp2 = fopen ("b.txt", "w")) == NULL) {
        printf ("Error %d opening b.txt\n", errno);
        fclose (fp1);
        return 1;
    }

    // Transfer only up to buffer size.

    if ((bytesRead = fread (buff, 1, sizeof (buff), fp1)) == 0) {
        // Check error case.

        if (ferror (fp1)) {
            printf ("Error reading a.txt\n");
            fclose (fp1);
            fclose (fp2);
            return 1;
        }
    }

    // Attempt transfer to destination file.

    if (fwrite (buff, 1, bytesRead, fp2) != bytesRead) {
        printf ("Error writing b.txt\n");
        fclose (fp1);
        fclose (fp2);
        return 1;
    }

    // Close all files to finish up.

    fclose (fp1);
    fclose (fp2);
    return 0;
} 
```

# exchange-server - 从 Exchange 服务器检索所有帐户的所有电子邮件

> ID：10135896
> 
> 赞同：1
> 
> 时间：2012-04-13T05:51:09.893
> 
> 标签：exchange-server, imap

有没有办法从交换服务器检索/下载**所有**用户帐户的**所有**电子邮件？粗略的方法是遍历每个用户并使用 IMAP 分别检索那里的电子邮件。但是，我认为这将非常低效且耗时。

 **我知道，我们可以实时使用日记功能来获取所有电子邮件，但我如何才能访问服务器上**所有**帐户的**所有**现有电子邮件？

 **谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:20:49.953

我不确定它是否是你需要的。但是，如果您在本地连接到 Exchange 服务器，则导出也符合您的需要。使用 Exchange 2007，您就有了这样的要求，也许在 2010 年他们已经改变了其中的一些。

*   首先，您需要从 32 位 Windows 客户端执行导出脚本。
*   已安装 Exchange（32 位）工具
*   当然，Powershell。
*   已安装 Outlook。

### 导出所有用户邮箱的脚本

* * *

```
$users = Get-Mailbox | select alias

foreach ($user in $users)
{
# Just info
Get-MailboxStatistics -id $user.alias | select-object DisplayName,@{name='TotalItemSize(MB)';expression={$_.TotalItemSize/1MB}};
# Give rights to each mailbox, you can avoid this after first time
Add-MailboxPermission -Identity $user.alias -User "domain\adminuser" -AccessRights FullAccess;
# Export to the folder you want (should be mapped if remote)
Export-Mailbox -PSTFolderPath P:\psts\ -id $user.usuarios -Confirm:$False

} 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:07:15.270

没有本机功能可以做到这一点。IMAP 也不会为您提供完全保真度。您可以使用 Exchange Web 服务的模拟来单独访问每个邮箱。如果您需要 PST，请使用`Export-Mailbox`Exchange 2007 或`New-MailboxExportRequest`Exchange 2010 上提供的解决方案。****

# .net - 最佳 JIT 优化

> ID：10135900
> 
> 赞同：8
> 
> 时间：2012-04-13T05:51:35.000
> 
> 标签：.net, performance, compiler-construction, jvm, jit

我已经阅读并听到了很多关于 JIT 编译器如何进行原生代码编译器无法实现的优化以及这些优化可以带来巨大的性能提升的信息。

所以我想知道，有哪些最重要的优化是 .NET Framework 或 JVM 所做的，而原生编译器却无法做到？此外，这些如何提供巨大的性能提升？

[我不知道我是否正确地表达了这个问题，我想我可能在评论中有很多解释要做]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T08:22:11.740

我可以举一个优化的例子。假设你在某处有一个函数。（将其视为类似 C 的伪代码。）

```
void function(MyClass x)
{
    x.doSomething();
    for (obj in x.getWidgets())
        obj.doSomethingElse();
} 
```

这是适当的模糊。但是，假设您的整个图像中只有一个具体类继承自`MyClass`: `MyConcreteClass`。在这种情况下，JIT 可以内联`doSomething`和`getWidgets`. 如果它知道从 返回的类型`getWidgets`，那么它也可以内联`doSomethingElse`。

假设这里`MyClass`不是最终/密封类，提前编译器无法内联其方法（它不知道要内联哪些函数）；就编译器所知，有一百种不同的`MyClass`.

但是，JIT 可以针对*图像的当前状态进行优化。* 它可以在每次调用的开头安装一个检查以`function`确保它`x`是 a `MyConcreteClass`，然后运行内联版本。如果您动态加载具有另一个继承自 的具体类的模块`MyClass`，则检查将失败并且 JIT 将重新编译该函数以使其成为通用的。

**这些是**JIT 编译器唯一可用的优化类型，但提前编译器不可用：利用有关程序动态状态的信息并相应地重新编译程序的优化。

请注意，一些提前编译器能够执行通常归因于 JIT 编译器的技巧。例如，过程间优化（或全局优化）和配置文件驱动优化。GCC 和 Clang 可以同时使用这两种技巧，但大多数人不使用它们，因为打开它们需要额外的（人工）工作。JIT 编译器可以在不打扰最终用户的情况下启用这些选项。

**巨大的性能提升：**我还没有听说过 JIT 编译器有任何巨大的性能提升。C 和 C++ 程序在没有 JIT 的情况下仍然很快。许多人仍然更喜欢 Fortran 进行数值工作（有充分的理由）。

**脚注：**我不确定你的术语。大多数 JIT 不也是本机代码编译器吗？除了 JIT 之外的其他类型的编译器我会称之为“提前”或 AOT，或者可能是“静态”。（然后“编译”和“解释”之间的界限非常模糊。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:27:28.617

Javascript 是一个更好的例子，因为它不像 JVM 或 CLR 那样对编译器友好。

JIT 编译器可以为 Javascript 类生成具体的专门表示，这对于静态编译器来说很难，因为这些类可以在程序执行期间的任何时候修改。您还可以根据实际类型推测性地内联调用的函数（Dietrich Epp 已经在他的回答中解释了这一点）。

[http://code.google.com/p/v8/](http://code.google.com/p/v8/)上的视频很好地解释了这些优化。

# yii - Yii 客户端脚本

> ID：10135906
> 
> 赞同：0
> 
> 时间：2012-04-13T05:52:22.770
> 
> 标签：yii, clientscript

我想知道有没有办法检查 coreScript 是否已经注册？

例如 yiiactiveform

`Yii::app()->clientScript->registerCoreScript('yiiactiveform');`

如何检查这个corescript是否已经注册？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:07:54.010

为什么你需要知道这个？该框架足够智能，不会两次注册相同的脚本。

在我看来，你可以使用

```
if(Yii::app()->clientScript->getPackageBaseUrl('yiiactiveform') === false) {
  // core script 'yiiactiveform' has not been registered yet
} 
```

或扩展 CClientScript 并实现一个函数来回答这个问题，但这可能是矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:45:21.987

如果您正在处理页面内容，加载内容，您可能（取决于您的情况）最好使用 renderPartial() 而不是渲染，这不会渲染头部，因此包括任何注册的核心脚本。这是一个选择吗？

# sql - 在 VS 2010 中使用 VB 从组合框中选择值并添加到 Sql 数据库

> ID：10135909
> 
> 赞同：-6
> 
> 时间：2012-04-13T05:52:43.483
> 
> 标签：sql, vb.net, visual-studio-2010, combobox

我是 VB 和 VS 2010 的新手。我有一个问题。我已经创建了一个数据库。现在我创建了一个 Windows 窗体，在其中添加了一些组合框。我想选择组合框的值，当在表单上单击 ADD 时，它应该被添加到数据库中。在文本框中，我们执行 Textbox1.text 来选择值。我们将在 Combobox 中做什么 .????

请尽快帮助我...

先感谢您...！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:55:05.067

您还可以`comboBox`通过使用`.Text`属性获取内部选定项的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:56:35.877

[`ComboBox1.Text`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.text.aspx)将对组合框执行相同的工作，它与 Textbox1.Text 相同。它将获取或设置与此控件关联的文本。

# java - 是否有与嵌套类关联的构造函数

> ID：10135910
> 
> 赞同：11
> 
> 时间：2012-04-13T05:52:45.287
> 
> 标签：java, constructor, inner-classes

我想知道内部类是否涉及任何构造函数。例如考虑下面给出的代码片段

```
class MyOuter
{
   private int x= 10;

   class MyInner
   {
      void dostuff(){
         System.out.println("The value of x is "+x);
      }
   }
} 
```

在另一个 java 文件中，我为 MyOuter 和 MyInner 类创建实例，如下所示

```
Class Program
{
   public static void main(String [] args)
   {
      MyOuter mo = new MyOuter();
      MyOuter.MyInner mi = mo.new MyInner();
      mi.dostuff();
   }
} 
```

上面的代码片段编译得很好，并给出了“x 的值为 10”的输出。

我在这里想知道的是当 new() 与 MyInner 类和 MyOuter 类一起使用时是否调用了构造函数。如果是，那么是否有任何构造函数从内部类链接到外部类（例如子类调用超类的构造函数等）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T06:15:27.820

扩展内部类时，可以观察内部类的构造函数链。

举个例子：

```
public class MainClass {

    public MainClass(String value) {
        System.out.println("mainValue: " + value);
    }

    public class NestedClass {

        public NestedClass(String nestedValue) {
            System.out.println("nestedValue: " + nestedValue);
        }
    }

} 
```

然后像这样扩展 NestedClass

```
public class NestedClassExtension extends NestedClass {

    public NestedClassExtension(MainClass mainClass, String nestedValue) {
        mainClass.super(nestedValue);
    }
} 
```

因此您可以看到您可以调用嵌套类的超级构造函数，并将其传递给该构造函数，`MainClass`并调用对象实例。`.super``mainClass`

现在您可以通过这种方式创建 NestedClassExtension 实例：

```
NestedClassExtension extension = new NestedClassExtension(new MainClass("main"), "nested"); 
```

所以主类必须存在，它的构造函数首先被调用。然后是嵌套类的构造函数。

相反，如果您想在`NestedClass`之外创建一个实例，则`MainClass`必须编写：

```
MainClass mc = new MainClass("main");
mc.new NestedClass("nested"); 
```

还有一次，`MainClass`必须先创建，然后再创建嵌套类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T05:59:31.360

仅当您拥有内部构造函数时才会调用

```
MyOuter.MyInner mi = mo.new MyInner(); 
```

否则它甚至不会调用内部类构造函数，因为它没有被实例化，就像执行静态块一样，但是在创建对象之前不会调用实例块和构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T05:59:53.247

如果您不指定构造函数，则会创建一个不带参数的[默认构造函数。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)如果您声明任何其他构造函数说 MyInner(int i) ，则默认构造函数的创建被省略，您必须自己声明它（如果需要）。每个对象（没有任何例外）都是通过调用构造函数创建的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T06:00:59.487

它们都使用默认的无参数构造函数进行实例化。没有像继承的 super() 那样的链接。只是你不能在没有先实例化外部类的情况下实例化一个内部类。

[阅读静态和非静态内部类之间的区别。](https://stackoverflow.com/questions/1353309/java-static-vs-non-static-inner-class)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T06:21:35.960

如果您编译建议的代码，然后在其上运行 Java 反编译器

```
javap MyOuter$MyInner 
```

您将看到编译器实际上是如何为您的内部类声明构造函数的：

```
public class MyOuter$MyInner extends java.lang.Object{
    final MyOuter this$0;
    public MyOuter$MyInner(MyOuter);
    void dostuff();
} 
```

在这里，您可以看到编译器通过声明一个包含对封闭类的引用的最终字段成员来实现您的内部类。该字段被声明为 final，因此需要提供一个值来实例化您的`Inner`类。

当您这样做时`MyOuter.MyInner mi = mo.new MyInner()`，编译器会确保封闭实例作为参数传递。

这是由编译器自动完成的，因此，您不能仅仅因为在创建内部实例时外部实例必须已经存在，就将内部类的创建与外部类的创建链接起来。

但是，您可以在内部类的其他声明的构造函数之间进行构造函数链接。

例如，如果这样的代码：

```
public class MyOuter
{
   private int x= 10;

   public class MyInner
   {
        private int y = 0;

        public MyInner(){
            this(10);
        }

        public MyInner(int value){
            this.y = value;
        }

        void doStuff(){
            System.out.println("The value of x is "+x);
        }
   }
} 
```

在这里，我将构造函数与内部类链接起来。

同样，反编译器确保解释所有这些以确保将​​外部实例作为参数传递给内部实例：

```
public class MyOuter$MyInner extends java.lang.Object{
    final MyOuter this$0;
    public MyOuter$MyInner(MyOuter);
    public MyOuter$MyInner(MyOuter, int);
    void doStuff();
} 
```

# python - gerrit 错误：Nonetype 对象没有属性拆分

> ID：10135911
> 
> 赞同：2
> 
> 时间：2012-04-13T05:52:51.330
> 
> 标签：python, gerrit, attributeerror

我正在为 gerrit 创建本地存储库。

当我执行命令时：

```
git-review -s 
```

它给了我错误：

```
branch_parts = branch_name.split("/")
AttributeError: 'NoneType' object has no attribute 'split' 
```

谁能让我知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:59:05.993

如果您的值是`None`

```
In [119]: branch_name = None

In [120]: branch_parts = branch_name.split("/")
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/home/avasal/<ipython console> in <module>()

AttributeError: 'NoneType' object has no attribute 'split' 
```

确保值`branch_name`符合预期

# jquery - 如何在网格基础 jquery 中使用日期格式（dd.MM.yyyy）过滤日期？

> ID：10135913
> 
> 赞同：2
> 
> 时间：2012-04-13T05:53:10.153
> 
> 标签：jquery, date, grid, filtering, infragistics

我在 jquery 中有代码：

我使用json获取数据的来源。

这是示例[http://samples.infragistics.com/jquery/grid/advanced-filtering](http://samples.infragistics.com/jquery/grid/advanced-filtering)

```
 $("#tbl-visit-schedule").igGrid({
                   columns: [
            { headerText: "Date", key: "Date",dataType:"date",format:"dd.MM.yyyy" },
            { headerText: "Name", key: "Name", dataType: "string" },
            { headerText: "Siegle", key: "Siegle", dataType: "string" },
            { headerText: "Group", key: "Group", dataType: "string" },
            { headerText: "Status", key: "Status", dataType: "string" },         
            {headerText: "Action", key: "Action", dataType: "string" }
            ],
                   width: "550px",
                   height: "400px",
                   dataSource: jsonp,
                   features: [

             {
                 name: 'Filtering',
                 allowFiltering: true,                     
                 type: 'local' 

             }
        ]
               }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:14:25.880

日期格式实际上仅用于显示目的。无论应用的格式如何，过滤仍然相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:16:41.710

您可以查看控件的本地化。默认情况下，Infragistics 确实提供了一些语言环境，而保加利亚语的语言环境与您正在寻找的格式相似。[您可以在帮助](http://help.infragistics.com/NetAdvantage/jQuery/2012.1/CLR4.0?page=Customizing_the_localization_of_NetAdvantage_for_jQuery_controls.html)中查看更多关于本地化的信息。

# php - 如何在 PHP 中创建 Hashcash

> ID：10135914
> 
> 赞同：5
> 
> 时间：2012-04-13T05:53:14.380
> 
> 标签：php

在网上搜索后，我找不到关于如何在 php.ini 中创建哈希码的答案。

我正在写一个时事通讯工具，不想被列入黑名单，好吧，谁想要:-)

我已经检查了我的反向 DNS、SPF 和 spamhouse.org...

有人可以帮助我了解如何在 PHP 中创建 hashcash（例如）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-27T20:09:48.337

TheFox 已在 PHP 中实现了 Hashcash，可在[Github上获得](https://github.com/TheFox/hashcash)

### 安装

> 首选的安装方法是通过[Packagist](https://packagist.org/packages/thefox/hashcash)和[Composer](https://getcomposer.org/)。运行以下命令安装包并将其作为要求添加到 composer.json：

```
composer.phar require "thefox/hashcash=~1.0" 
```

### 例子

该实现的一个示例用法是：

```
<?php
require 'vendor/autoload.php';
use TheFox\Pow\Hashcash;
$hashcash = new Hashcash(20, 'example@example.com');
print "hashcash stamp: '".$hashcash->mint()."'\n";
?> 
```

* * *

此外，hashcash.org 网站上有关于如何[自己实现它](http://hashcash.org/dev/)的开发人员说明，以及可以通过PHP使用的[操作系统特定工具](http://hashcash.org/tool/)`shell_exec()`

# javascript - 100% 宽度图像

> ID：10135915
> 
> 赞同：3
> 
> 时间：2012-04-13T05:53:33.070
> 
> 标签：javascript, html, css, width

我有一个页脚，其中有一个圆形的左图像，然后是中间的重复，最后是圆形的右图像。

如何在不重叠的情况下实现完美的响应式缩放？类似于： `.paperBottom.middle {float:left; width: (100% -40px)}`（40px 是右图的宽度）

**设置：**

```
<div class="paperBottomWrapper"> 
   <div class="paperBottom left"> </div>
   <div class="paperBottom middle"> </div>
   <div class="paperBottom right"> </div>
</div> 
```

问题是，左边和右边有圆形图形，它们必须很好地结合在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:01:04.737

`display:table`您可以为此使用 css属性：

```
.paperBottomWrapper{
 width:100%;
 display:table;
}
.paperBottom{
 display:table-cell;
} 
```

检查这个[http://jsfiddle.net/A34pt/](http://jsfiddle.net/A34pt/)

**或者**

你也可以做到这一点`display:table`。

检查这个 [http://jsfiddle.net/A34pt/1/](http://jsfiddle.net/A34pt/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:04:36.423

[这是一个样本](http://jsfiddle.net/akF9h/1/)

```
<div class="paperBottomWrapper"> 
   <div class="paperBottom left"> </div>
   <div class="paperBottom right"> </div>
   <div class="paperBottom middle"> </div>
</div>​

/*the containing div*/
.paperBottomWrapper {
    overflow:hidden;
    zoom:1;        
}

/*putting height so we can see it in action*/
.paperBottomWrapper > * {
    height:50px;
}

/*middle repeating area*/
.middle{
    overflow:hidden;
    zoom:1;
    background:green;  
}

/*the edges*/
.left{
    float:left;
    background:red;  
    width:50px;    
}

.right{
    float:right;
    background:red;   
    width:50px;     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:04:24.693

如果您碰巧正在运行 jQuery UI，并且只是想将 div 的底角变圆，您可以简单地这样做：

```
<div class="paperBottomWrapper ui-corner-bottom" style="width:100%"> 
  Stuff  
</div> 
```

要使用 jQuery 方法获得您正在寻找的背景效果，只需将您的背景图像平铺在 paperBottomWrapper 背景中。圆角将适当调整。

还有很多其他方法可以解决这个问题。例如，将完整的背景放在包装器上，然后将角图像放入两个外部 div 并适当浮动它们。

[或者，您可以尝试此处](http://www.alistapart.com/articles/slidingdoors/)描述的标准滑动门技术

还有其他几个 javascript 圆角应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T06:05:22.580

在所有 3 个类中使用属​​性 float:left 并指定左右 div 的特定宽度，然后通过减去左右 div 宽度之和来指定中间 div 的宽度。3 个 div 的宽度之和必须与您的包装器宽度相同

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T06:05:39.623

### HTML

```
<div class="paperBottomWrapper"> 
   <div class="paperBottom left">Left </div>
   <div class="paperBottom middle">Middle</div>
   <div class="paperBottom right"> Right</div>
</div>​ 
```

### CSS

```
paperBottomWrapper { width:100%; }
.paperBottom { float:left; padding:1px }
.left { width :33%;background-color:red; }
.middle{ width :33%;background-color:green; }
.right { width :33%;background-color:blue; } 
```

看[`DEMO`](http://jsfiddle.net/2y35N/1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T06:08:43.593

您可以使用 position: absolute 到您的角落 div 放置在左侧和右侧，并使用与页面背景相同的背景颜色与角落 div 相同。当然，这仅在您仅使用颜色作为主要背景颜色时才有效。

如果背景颜色：#333

```
.paperBottomWrapper{
position: relative;
}

.paperBottom.left{
position: absolute;
left: 0;
top: 0;
background: #333 url(YOUR_IMAGE);
}

.paperBottom.right{
position: absolute;
right: 0;
top: 0;
background: #333 url(YOUR_IMAGE);
}

.paperBottom.middle{
width: 100%;
background: url(YOUR_IMAGE);
} 
```

# ruby-on-rails - Rails - 在行项目模型中的选项下分组选项值

> ID：10135919
> 
> 赞同：0
> 
> 时间：2012-04-13T05:53:48.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, rabl

我有一个`LineItem`模型，在哪里`LineItem habtm option_values`。

每个`Product has_many options`和`Option has_many option_values`。这个想法是用户可以选择不同的选项（复选框）并将它们添加到购物车，创建一个具有许多 option_values 的 LineItem。通过选项值，我应该知道谁是父母（即选项）

我在这里遇到了障碍。我正在尝试使用 RABL 编写 API。我想将数据表示为 JSON。

有没有一种 Rails 方法可以生成一个方法，将选项值分组到选项下？

IE

```
# LineItem Model

def some_magical_method
    # Gives me some Rails magic
    Options:
            Option 1
                Option_value id 9
                Option_value id 3
            Option 2
                Option_value id 2
                Option_value id 4
end 
```

我的本能是使用`@line_item.group_by(&option).map`，但它给了我

```
Options:
  Option 1
  Option_value id 9 
  Option_value id  3 
```

没有适当的嵌套。

对不起，糟糕的伪代表，谢谢。

# gmail - 使用 Gmail 帐户通过 Javamail 发送 120 封邮件，但在 80/90 封邮件后出现异常

> ID：10135927
> 
> 赞同：1
> 
> 时间：2012-04-13T05:54:46.133
> 
> 标签：gmail, jakarta-mail

在 120 的循环中发送邮件时出现以下异常。前 80/85 封邮件是成功的，但其余的则出现异常。

javax.mail.MessagingException：无法向 SMTP 主机发送命令；嵌套异常是： java.net.SocketException: Connection closed by remote host at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:1564) at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java :1551) 在 com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1489) 在 com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1054) 在 com.sun.mail.smtp。 SMTPTransport.sendMessage(SMTPTransport.java:634)

下面是我发送邮件的代码。所有 120 封邮件的发件人、收件人、主题、正文等都是相同的。

```
 try {
        Transport tr = session.getTransport("smtp");
        tr.connect(this.SMTPServer, this.UserName, this.Password);
        System.out.println("Successfully connected to the mail server.");
        tr.sendMessage(message, message.getAllRecipients());
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

# javascript - 将两个文档元素的数组合二为一的最佳方法是什么？

> ID：10135933
> 
> 赞同：0
> 
> 时间：2012-04-13T05:55:41.477
> 
> 标签：javascript, arrays, dom, getelementsbyname

```
var b = document.getElementsByName("button");
var l = document.getElementsByName("link"); 
```

将这两个数组的内容合二为一的最佳方法是什么？我不想使用 for 循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:30:51.613

您可以使用`Array.prototype.slice.call()`将`nodeLists`变成真正的数组，然后对它们使用数组操作来组合它们

```
var b = document.getElementsByName("button");
var l = document.getElementsByName("link");
// make both nodeLists into real arrays
var copyB = Array.prototype.slice.call(b, 0);
var copyL = Array.prototype.slice.call(l, 0);
var combined = copyB.concat(copyL); 
```

工作演示：http: [//jsfiddle.net/jfriend00/vZ5tb/](http://jsfiddle.net/jfriend00/vZ5tb/)

或者，更简短的版本：

```
var copyB = Array.prototype.slice.call(document.getElementsByName("button"), 0);
var copyL = Array.prototype.slice.call(document.getElementsByName("link"), 0);
var combined = copyB.concat(copyL); 
```

# iphone - 在 iPhone 视频应用程序上显示 UILabel

> ID：10135941
> 
> 赞同：0
> 
> 时间：2012-04-13T05:56:30.120
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我需要在我的 iPhone 应用程序的运行视频上显示一些文本。我正在使用`AVFOUNDATION.FRAMEWORK`流式传输我的视频。我真正需要的是，例如，如果我的视频长度约为 5 分钟，那么我想在视频的第 3 分钟到第 4 分钟之间显示文本，然后在视频结束时显示几秒钟。

我在视频视图上放置了一个带有 UILabel 的 UIView，它正确地显示了上面的文本，但它一直在那里。我想限制这个文本，以便每当我想在我的视频上显示它时它就会出现。

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:49:02.677

我认为你应该设置一个延迟的 NSTimer 并在你想显示标签时触发它，然后再次使用另一个计时器来隐藏它等等。即，根据设置计时器，您将不得不手动设置它。

# jsp - OutputStream 被重置

> ID：10135945
> 
> 赞同：2
> 
> 时间：2012-04-13T05:56:43.807
> 
> 标签：jsp, servlets, socketexception

在我从 MySql DB 流式传输 ogg/webm 视频的代码中：

```
OutputStream os = response.getOutputStream();
while (is.read(content) != -1) {  // reading a byte array.
  os.write(content);
} 
```

我收到以下异常。

```
ClientAbortException:  java.net.SocketException: Connection reset by peer: socket write error 
```

请建议我如何在嵌入 JSP 页面的 servlet 中播放流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:06:12.837

在写入输出流之前尝试添加。

```
response.addHeader("Cache-Control", "no-transform, max-age=0"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:20:29.603

> 对等方重置连接：套接字写入错误

意味着客户端在你写东西之前已经关闭了连接。这可能是因为您的数据库操作需要时间并且客户端正在超时。

*   如果您在不编写任何内容的情况下保持连接空闲一段时间，请检查您的代码。
*   也可能是在写入响应之前关闭了浏览器窗口。
*   当用户提出请求时，按下停止按钮。
*   *（我不确定也可以这样）*可能是服务器由于套接字空闲而关闭连接，增加套接字空闲超时值。

# java - java中的SQL server连接池超过600，导致数据库崩溃？

> ID：10135951
> 
> 赞同：0
> 
> 时间：2012-04-13T05:57:03.323
> 
> 标签：java, sql-server-2005, connection-pooling

我有一个需要连接池的应用程序，因为服务器有多个客户端同时与其通信，可能大约 10k。当我限制 maxActive =200 时，数据库的更新速度会变慢。

我在 Java 中做过的应用程序编程。我在 Tomcat Context.xml 的帮助下进行连接池。数据库我使用的是 SQL Server 2005。

请帮助我做正确的池化方式，这样我的应用程序就不会变慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:08:16.173

没有正确池化方式的概念，您必须通过检查能够获得最大吞吐量的活动连接数来找出答案。

```
1) Check any inactive connections which are not closed.
2) Do some analysis to find out the root causes or when it's eating up lot of connections. 
```

理想情况下，对于任何项目，我见过的最常见的参数是 200 - 300 个活动连接，如果超过这个值，则更有可能是企业应用程序，您必须依赖基础架构而不是编程方式。

在达到某个阈值后，您应该查看数据库的集群，因为一旦您确定程序中没有需要优化的地方，您就可以在一定程度上对其进行调整。

# actionscript-3 - 从 Document 类访问 MovieClip 上的函数

> ID：10135952
> 
> 赞同：0
> 
> 时间：2012-04-13T05:57:14.720
> 
> 标签：actionscript-3, flash, air, flash-cs5.5, document-class

> **[注意：马上，我已经知道关于“MovieClips 上没有代码”的流行理论，所以请不要回复（或因此而否决）。每个项目都是不同的。我只需要答案。]**

我有一个使用 Adob​​e Flash CS5.5、Adobe AIR 3 和 ActionScript 3 的项目。

我需要在文档类**从文档类内部**链接到**的项目的主时间轴上调用一个函数**。为了举例，我们称这个函数为“Ring()”。

 **如何从我的文档类中调用此函数“Ring()”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:22:18.710

将您要调用的函数放入您的文档类中，然后从对象的时间线分派一个自定义事件（或任何事件，如果代码可读），并在您的文档类上监听该事件。

所以代码分解看起来像这样：

在文档中时间线的某个框架上（应该适用于*任何*对象）：

```
var customEvent:Event = new Event(Event.COMPLETE);
this.dispatchEvent(customEvent); 
```

在您的文档类中：

```
public function DocumentClass()
{
    // get the reference to the object
    lolcats.objectThatDispatchesEvent.addEventListener(Event.COMPLETE, _customHandler);
}

protected function _customHandler(event:Event):void
{
    // FUNCTION NAMES SHOULD START WITH LOWERCASE! ^_^
    Ring();
} 
```

[http://www.adobe.com/devnet/actionscript/articles/event_handling_as3.html](http://www.adobe.com/devnet/actionscript/articles/event_handling_as3.html)

基本上你注册任何定义你的事件的字符串，`Event.COMPLETE`评估为`"complete"`，你可以注册任何你想要的，比如：

```
var custEvent = new Event("anyCustomString");
this.dispatchEvent(custEvent);

// catch it with
addEventListener("anyCustomString", _handler); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:51:30.333

好吧，既然你似乎在使用一些 oldskool ninja 技术，我建议你应该保持简单明了。

假设您在主时间线上有一些功能：

```
function Ring1():String
{
    return "Ring1() called!";
}
var Ring2:Function = function () : String
{
    return "Ring2() called!";
}; 
```

所述时间线的文档类的场景如下：

```
package  {
    import flash.display.MovieClip;
    import flash.events.MouseEvent;
    import flash.utils.getQualifiedClassName;
    import flash.utils.describeType;

    public class Test extends MovieClip 
    {
        public function Test() 
        {
            stage.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
        }
        private function onMouseDown(event:MouseEvent):void
        {
            trace(getQualifiedClassName(this)+".onMouseDown()");
            try {
                var ring1:Function = this["Ring1"] as Function;
                var ring2:Function = this["Ring2"] as Function;
            } catch (error:Error) {         
                // ignore
            }
            if (ring1 != null) {
                trace("\t", "Ring1", "=", ring1);
                trace("\t", ring1());
            } else {
                trace("\t", "Ring1() function not found in "+this+"!");
            }           
            if (ring2 != null) {
                trace("\t", "Ring2", "=", ring2);
                trace("\t", ring2());
            } else {
                trace("\t", "Ring2() function not found in "+this+"!");
            }

            // for your interest:
            var doc:XML = describeType(this);
            var ring1Node:XML = doc.descendants("method").(@name == "Ring1")[0];
            var ring2Node:XML = doc.descendants("variable").(@name == "Ring2")[0];
            trace("declaration of Ring1:", ring1Node.toXMLString());
            trace("declaration of Ring2:", ring2Node.toXMLString());
            // so, you may probably make use of reflection
            // unless you need to reference dynamic members on the main timeline
        }   
    }
} 
```

请参阅上面代码中的注释。**

# barcode - 如何获取“Code39”条码信息？

> ID：10135957
> 
> 赞同：1
> 
> 时间：2012-04-13T05:58:16.017
> 
> 标签：barcode, barcode-scanner, isbn, code39

我有一个“code39”条形码。如何从该条码中获取信息：产品名称、制造商和其他所有信息？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:38:03.210

Find a bar code scanner that reads code 39 encoding--which is just about all of them, and scan the bar code. That number will normally be a [GTIN - Global Trade Item Number](http://www.gtin.info/). You will have to use that number and query some kind of database or web api to get the rest of the product data.

# xamarin.android - Bin 中没有 apk 并且在更新 Mono for Android 4.1 时无法在 monodevelop 中构建应用程序

> ID：10135960
> 
> 赞同：0
> 
> 时间：2012-04-13T05:58:18.887
> 
> 标签：xamarin.android

从 4.0 -> 4.1 更新 Mono for Android 后，我遇到了问题：

1.  在 Visual Studio 中：当我启动应用程序时，它不会在模拟器中运行应用程序（我只在左角看到消息通知构建成功！）并且我在 Bin 中看不到 .apk 文件

2.  在 Mono 开发中：当我构建此应用程序时出现错误错误 MSB4019：未找到导入的项目“C:\Program Files (x86)\MonoDevelop\AddIns\BackendBindings\MSBuild\Novell\Novell.MonoDroid.CSharp.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。(MSB4019)

有谁知道什么可能会产生这些错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T14:33:13.997

在 VS 中，您可能需要为您的项目打开“部署”：

[http://docs.xamarin.com/android/Releases/Mono_For_Android_4/Mono_for_Android_4.1.0#Non-modal_Deployment](http://docs.xamarin.com/android/Releases/Mono_For_Android_4/Mono_for_Android_4.1.0#Non-modal_Deployment)

# php - 不显示 PHP 错误

> ID：10135966
> 
> 赞同：2
> 
> 时间：2012-04-13T05:59:26.687
> 
> 标签：php, html

我有这个标记：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>
<body>

    <?php
      ini_set('display_errors', 1); 
        ini_set('log_errors', 1); 
      include_once('../API/session_management.php');
      //Checking session fixation:
      $sess=new session_management();
      $sess->set_session_configurations();
      $sess->prevent_session_hijacking();
    ?>
    sdfsd
    <a href=""></form>
    <form>
        <input type="text" name="test"/>
    </form>
</body> 
```

问题是当我运行代码时，出现错误。正在打印空白页。不显示错误。为什么会这样，如何启用错误？

这是我在 php ini 中将显示错误更改为 on 并重新启动 apache 之后和之前得到的输出：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T06:00:47.997

你需要的两条线是

```
ini_set('display_errors', 'On');
error_reporting(E_ALL); 
```

最好在`php.ini`文件中为您的开发环境设置这些。这会从您的项目中删除非生产代码并解决诸如语法错误导致您的`ini_set()`和`error_reporting()`调用不被执行的问题（感谢[Corbin](https://stackoverflow.com/users/567864/corbin)）。

另一个建议是，将您的 PHP 代码放在任何 HTML 开始之前（就在脚本的顶部）。看起来您正在处理应该在将任何内容添加到输出缓冲区之前完成的会话。

# mysql - 加入4张桌子

> ID：10135970
> 
> 赞同：1
> 
> 时间：2012-04-13T05:59:42.603
> 
> 标签：mysql, join, inner-join

我对这种关系类型的数据库设计很陌生。我只是以这种方式设计了数据库。但是，我`JOIN`对 MySQL 感到很困惑。加入所有这张表的查询应该是什么。如果你能看到表格`users`是所有表格的参考。

**用户**

```
+----------+----------------+-----------------+
| users_id | users_level_id | users_status_id |
+----------+----------------+-----------------+
|        1 |              1 |               1 |
|        2 |              2 |               1 |
+----------+----------------+-----------------+ 
```

**users_credentials**

```
+----------+---------------------------+-----------------------------+----------------------------+
| users_id | users_credential_username | users_credential_email      | users_credential_password  |
+----------+---------------------------+-----------------------------+----------------------------+
|        1 | super                     | super@gmail.com             | $5$e94e9e$vptscyHjm8rdX0j6 |
|        2 | admin                     | admin@gmail.com             | $5$fVuOmySyC0PttbiMn8in0k7 |
+----------+---------------------------+-----------------------------+----------------------------+ 
```

**用户级别**

```
+----------------+-------------------------+
| users_level_id | users_level_description |
+----------------+-------------------------+
|              1 | Super Administrator     |
|              2 | Administrator           |
+----------------+-------------------------+ 
```

**用户状态**

```
+-----------------+--------------------------+
| users_status_id | users_status_description |
+-----------------+--------------------------+
|               0 | Disabled                 |
|               1 | Enabled                  |
+-----------------+--------------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:03:36.487

试试这个

```
SELECT u.*, uc.*, ul.*, us.*
FROM users u 
INNER JOIN users_credentials uc
    ON u.users_id = uc.users_id
INNER JOIN users_level ul
    ON u.users_level_id = ul.users_level_id
INNER JOIN users_status us
    ON u.users_status_id = us.users_status_id 
```

注意使用`INNER JOIN`：这意味着如果用户在连接表上没有相应的记录，则不会显示；如果您需要返回每个用户，即使相关表上没有匹配记录，请更改`INNER JOIN`为`LEFT JOIN`.

**用户评论后编辑：**
如果您只想返回某些列，请将其定义为本示例

```
SELECT uc.users_credential_username AS username, 
       uc.users_credential_email AS email, 
       uc.users_credential_password AS pwd, 
       ul.users_level_description AS level, 
       us.users_status_description AS status 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:04:47.557

我认为这看起来像这样：

```
SELECT * FROM users
LEFT JOIN user_credentials ON users.user_id = user_credential.user_id
LEFT JOIN user_level ON users.users_level_id = users_level.users_level_id 
```

等等..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T06:06:10.817

这是一个简单的查询，它将加入所有这些

```
select *
from users
  left join users_credentials
    on users_credentials.users_id = users.users_id
  left join users_level
    on users_level.users_level_id = users.users_level_id
  left join users_status
    on users_status.users_status_id = users.users_status_id 
```

编辑

如果你想从不同的表中获取数据用户这个

```
select users.* , users_credentials.* , users_level.* , users_status.*
from users
  left join users_credentials
    on users_credentials.users_id = users.users_id
  left join users_level
    on users_level.users_level_id = users.users_level_id
  left join users_status
    on users_status.users_status_id = users.users_status_id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T06:07:41.793

使用这种类型的查询......

```
SELECT c.*, l.*, s.*
FROM users AS u
INNER JOIN users_credentials AS c ON (u.users_id = C.users_id)
INNER JOIN users_level AS l ON (u.users_level_id= l.users_level_id)
INNER JOIN users_status AS s ON (u.users_status_id= s.users_status_id) 
```

您可以在哪里指定您想要的字段。* ...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T06:21:43.950

连接用于从与引用表有外键关系的规范化表中获取数据。对于上面带有连接的表，您可以借助引用表在两个表之间获取数据。例如

```
Select * from users a JOIN users_credentials b 
ON a.user_id=b.user_id JOIN users_level c 
ON c.users_level_id=a.users_level_id 
where users_credential_username='super'; 
```

此查询的结果将为您提供有关 users_credential_username=super 的用户的详细信息，例如 users_level_description。

# java - 为什么 paintComponent 不能接受 Graphics2D 对象？

> ID：10135982
> 
> 赞同：0
> 
> 时间：2012-04-13T06:00:46.893
> 
> 标签：java, swing, api, awt, paintcomponent

```
public class MyDrawPanel extends JPanel {
    public void paintComponent(Graphics g){

        Graphics2D gd2 = (Graphics2D) g;
        GradientPaint gradient = new GradientPaint(70,70,Color.blue,150,150,Color.red);

    }
} 
```

为什么这是有效的，但不是这个：

```
public class MyDrawPanel extends JPanel {
    public void paintComponent(Graphics2D g){

        GradientPaint gradient = new GradientPaint(70,70,Color.blue,150,150,Color.red);

        g.setPaint(gradient);
        g.fillOval(70,70,100,100);
    }
} 
```

第一个渲染，但第二个渲染除了帧之外的任何图形。我注意到paintComponent() 需要一个Graphics 对象，但是如果Graphics2D 是Graphics 对象的子类，为什么我不能调用Graphics 的子类？

关于为什么会这样，有什么我没有理解的概念吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:05:43.103

它说你应该以这种方式实现它，因为 Graphics2D 是 Graphics，而 Graphics 不是 Graphics2D。

如果您发现铸造令人不安，您可以随时创建自己的例如。MyJPanel 扩展 JPanel，定义您自己的方法，并在将来对其进行子类化，覆盖您定义的方法。

```
public class MyJPanel extends JPanel {

    @Override
    protected void paintComponent(Graphics g) {
        paintComponent((Graphics2D) g);
    }

    protected void paintComponent(Graphics2D g) {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T06:14:11.750

基本上，当您覆盖一个方法时，您可以同样或更少具体。

想一想：

```
JPanel p = new MyPanel();
p.paintComponent(someGraphicsInstance); 
```

对 a 的引用`JPanel`应该能够接受 Graphics 引用作为该`paintComponent`方法的参数。但是，您的方法违反了该要求，因为它不接受`Graphics`实例，而只接受`Graphics2D`.

有关此的更多信息，请参见[https://stackoverflow.com/a/9950538/567864](https://stackoverflow.com/a/9950538/567864)

# xml - Windows Phone 7 动态列表框模板

> ID：10135984
> 
> 赞同：0
> 
> 时间：2012-04-13T06:00:54.510
> 
> 标签：xml, windows-phone-7

我最近刚刚开始开发一个在 listBox 中显示一堆 xml 数据的应用程序，但问题不是每个 xml 项目都有一个子值（在我的问题中，上传），所以它的 listBox 代码不应该显示.

例子：

```
<item>
     <id>1</id>
     <body>Some text</body>
     <upload></upload>
     <created>Some text</created>
</item> 
```

我正在获取数据并以这种方式填充我的列表：

```
var data = from query in loadedData.Descendants("item")
                   select new droppedItem
                   {
                       Id = (int)query.Element("id"),
                       Body = (string)query.Element("body"),
                       Upload = (string)query.Element("upload"),
                       Created = (DateTime)ConvertFromUnixTimestamp((double)query.Element("created"))
                   };
        userDrops.ItemsSource = data; 
```

我的 xaml 看起来像：

```
<ListBox Margin="0,0,-12,0" Name="userDrops">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="0,0,0,17" Width="432">
                            <RichTextBox>
                                <Paragraph>
                                    <Run Text="{Binding Body}" FontSize="25" FontFamily="Segoe WP"></Run>
                                </Paragraph>
                                <Paragraph>
                                    <Hyperlink NavigateUri="{Binding Upload}" TargetName="_blank" FontSize="25" FontFamily="Segoe WP">{Binding Upload}</Hyperlink>
                                </Paragraph>
                                <Paragraph>
                                    <Run Text="{Binding Created}" FontFamily="Segoe WP SemiLight"></Run>
                                </Paragraph>
                            </RichTextBox>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

如果 xml 上传子项持有值，我想要做的只是显示持有上传信息的段落。否则，只需将其从列表框中删除。我不知道如何更改基本的 listBox 模板。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:20:56.117

使用`TextBlocks`显示 Body 和 Created 怎么样？中间部分是 a `RichTextBox`，如果 Upload 为空，您可以使用 Visibility 转换器切换隐藏/显示。

您需要先将转换器包含在您的 xaml 页面中，

```
xmlns:converters="clr-namespace:xxx.Converters;assembly=xxx"

<converters:VisibilityConverter x:Key="visibilityConverter" /> 
```

然后在你的模板中使用它，

```
 <StackPanel Margin="40,237,8,326" Width="432" Grid.Row="1"> 
                    <RichTextBox> 
                        <Paragraph> 
                            <Run Text="{Binding Body}" FontSize="25" FontFamily="Segoe WP"></Run> 
                        </Paragraph>
                    </RichTextBox> 
                    <RichTextBox Visibility="{Binding Upload, Converter={StaticResource VisibilityConverter}}">
                        <Paragraph> 
                            <Hyperlink NavigateUri="{Binding Upload}" TargetName="_blank" FontSize="25" FontFamily="Segoe WP">{Binding Upload}</Hyperlink> 
                        </Paragraph>
                    </RichTextBox> 
                        <TextBlock Text="{Binding Created}" FontFamily="Segoe WP SemiLight"/>
                </StackPanel> 
```

转换器应该是这样的，

```
 public class VisibilityConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            bool visible = true;

            if (value is bool)
            {
                visible = (bool)value;
            }
            else if (value is int || value is short || value is long)
            {
                visible = 0 != (int)value;
            }
            else if (value is float || value is double)
            {
                visible = 0.0 != (double)value;
            }
            else if (value is string) {
                visible = ((string)value).Length > 0;
            }
            else if (value == null) {
                visible = false;
            }

            if ((string)parameter == "!")
            {
                visible = !visible;
            }

            return visible ? Visibility.Visible : Visibility.Collapsed;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

有关值转换器的更多信息，请参阅[此](http://weblogs.asp.net/psheriff/archive/2010/09/24/using-value-converters-in-silverlight.aspx)。

**更新**

在您的 App.xaml 中，执行此操作，

```
<Application xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:sg="http://schemas.stargategroup.com.au/2010/xaml/presentation" 
             xmlns:converters="clr-namespace:xxx.Converters"
             x:Class="xxx.Application.App">

    <Application.Resources>
        <ResourceDictionary>
            <converters:VisibilityConverter x:Key="VisibilityConverter" /> 
```

# c# - 如何设置 MVC 默认页面？

> ID：10135995
> 
> 赞同：0
> 
> 时间：2012-04-13T06:02:36.840
> 
> 标签：c#, asp.net, asp.net-mvc-3

获得了一个项目，其中包含与 MVC 3 Razor 控制器/视图一起运行的标准 Asp.Net (aspx) 页面。想将aspx页面设置为默认页面。目前，它在打开根目录时会选择以下路线

```
routes.MapRoute(
"MVCDefault", // Route name
"{controller}/{action}/{id}", // URL with parameters
new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

（它现在托管在 IIS7 中，它在 Visual Studio 中运行良好）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:06:51.730

正如您在此处看到的：[混合 ASP.NET / ASP.NET MVC 应用程序中的 Index.aspx](https://stackoverflow.com/questions/9727669/index-aspx-in-a-hybrid-asp-net-asp-net-mvc-application)

```
routes.MapPageRoute("DefaultPage", "", "~/Index.aspx"); 
routes.IgnoreRoute("{resource}.aspx/{*pathinfo}"); 
```