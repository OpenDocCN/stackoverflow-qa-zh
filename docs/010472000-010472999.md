# StackOverflow 问答 10472000-10472999

# r - 使用 r 在 ggplot2 中用点格式化圆形区域图

> ID：10472001
> 
> 赞同：2
> 
> 时间：2012-05-06T16:04:19.340
> 
> 标签：r, ggplot2, polar-coordinates

这是我的情节：

```
gr1 <- c(1, 5, 15, 20, 30, 40)
gr3 <- c(1, 5, 10, 25, 40, 60, 80)
gr2 <- c(1, 15, 25, 30, 40)

df2<- data.frame (pos = c(gr1, gr2, gr3), group = c(rep(1, length(gr1)),
 rep(2, length(gr2)), rep(3, length(gr3))))
df2$cpos <- cumsum (df2$pos)
df2$y <- rep(3, length (df2$cpos))
df2$y1 <- rep(0.35, length (df2$cpos))

df3 <- data.frame (cpos = rep(df2$cpos, 2), 
group = rep(df2$group,2), yd = c(df2$y, df2$y1),
x2 = c(rep(1, length (df2$y)),
rep(2, length (df2$y1))))

cx <- ggplot(df3, aes(y = yd, x = cpos, fill=factor(x2)))
cx1 <- cx + geom_area(aes(stat = "identity", position="fill" ))
cx1 +  geom_point(aes(color = factor(group)), pch = 19, size = 4) + 
scale_fill_manual(values=c("blue", "yellow", "green")) + coord_polar() 
```

![在此处输入图像描述](../Images/dced45ae7b74f4b16567abb23c9f5aaf.png)

我无法摆脱一些问题

(1) 我不能改变点的颜色，颜色改变只适用于圆圈。

(2) 在中心圆绘制附加点，我不想绘制。（它们是额外的 csum 点）

声明：本帖与上[一帖相关](https://stackoverflow.com/questions/10467988/modified-polar-plot-using-ggplots-or-other-alternative-packages-using-r)

# 额外的意外艺术

在努力解决问题时，我做了一个向日葵情节。

```
df2<- data.frame (pos = c(gr1, gr2, gr3), group = c(rep(1, length(gr1)),
 rep(2, length(gr2)), rep(3, length(gr3))))
df2$cpos <- cumsum (df2$pos)
df2$y <- rep(3, length (df2$cpos))
df2$y1 <- rep(0.01, length (df2$cpos))
df2$y3 <- rep(2, length (df2$cpos))

df3 <- data.frame (cpos = rep(df2$cpos, 3), group = c(rep(1, length (df2$y)),
 rep(2, length (df2$y)), rep(3, length (df2$y))),
 yd = c(df2$y, df2$y1, df2$y3), x3 = c(rep(1, length (df2$y)), 
 rep(2, length (df2$y1)),rep(2, length (df2$y1)) )) 
```

# 做花

```
cx <- ggplot(df3, aes(y = yd, x = cpos, fill=factor(x3)))
cx1 <- cx + geom_area(aes(stat = "identity", position="fill" ))
cx2 <- cx1 +  geom_point(aes(color = factor(group)), pch = 19, size = 4) + 
  scale_fill_manual(values=c("yellow", "pink")) + coord_polar()
cx2 + theme_bw()+ opts(axis.line=theme_blank(),axis.text.y=theme_blank(),
 axis.ticks = theme_blank(), axis.title.y=theme_blank(), 
 plot.background=theme_blank(), panel.border=theme_blank()) 
```

![在此处输入图像描述](../Images/175e1444dfa68c2c80f95b5804ee3f88.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:53:03.427

对于你的第二个问题，这是你想要的吗？点的内圈对应于 df3 数据帧`yd = 0.35`或`x2 = 2` 在 df3 数据帧中。因此，在`geom_point`调用中，从 df3 数据框中删除这些点。在这里，我使用了`subset`.

```
# Your data
gr1 <- c(1, 5, 15, 20, 30, 40)
gr3 <- c(1, 5, 10, 25, 40, 60, 80)
gr2 <- c(1, 15, 25, 30, 40)

df2<- data.frame (pos = c(gr1, gr2, gr3), group = c(rep(1, length(gr1)),
 rep(2, length(gr2)), rep(3, length(gr3))))
df2$cpos <- cumsum (df2$pos)
df2$y <- rep(3, length (df2$cpos))
df2$y1 <- rep(0.35, length (df2$cpos))

df3 <- data.frame (cpos = rep(df2$cpos, 2), 
  group = rep(df2$group,2), yd = c(df2$y, df2$y1),
  x2 = c(rep(1, length (df2$y)),
  rep(2, length (df2$y1))))

# The plot
library(ggplot2)
cx <- ggplot(df3, aes(y = yd, x = cpos, fill=factor(x2)))
cx1 <- cx + geom_area(aes(stat = "identity", position="fill" ))
cx1 +  geom_point(data = subset(df3, x2 == 1), aes(color = factor(group)), 
  pch = 19, size = 4) + 
  scale_color_manual(values=c("blue", "yellow", "green"))  + coord_polar() 
```

结果是：

![在此处输入图像描述](../Images/245527a3591831d4f18382fbd5d9fd45.png)

# android - mediaPlayer 准备播放时如何显示 ProgressBar

> ID：10472005
> 
> 赞同：2
> 
> 时间：2012-05-06T16:04:41.773
> 
> 标签：android, progress-bar, media-player

这是我的主要活动中的代码：

```
private void initControls()
 {
  streamButton = (Button) findViewById(R.id.button_stream);
  streamButton.setOnClickListener(new View.OnClickListener()
  {
   public void onClick(View view)
   {
        loading = (ProgressBar) findViewById(R.id.progressBar1);
    Toast
    .makeText(
      MyActivity.this,
       "The following stream is about to start" + station,   
      Toast.LENGTH_LONG).show();
    player.playAudioFile(urlstring2);
    streamButton.setEnabled(false);
    notificate();
   }
  });
 } 
```

这是我启动媒体播放器本身的代码：

```
public class player extends MyMainActivity{

static MediaPlayer player;
private static final String TAG = player.class.getSimpleName();

public static void playAudioFile(String urlstring2) {

    player = new MediaPlayer();
    try {
        player.setDataSource(urlstring2);
        loading.setVisibility(View.VISIBLE);
        player.prepareAsync();
        //player.start();

    } catch (Throwable thr) {
        Log.e(TAG, "could not play audio", thr);
        loading.setVisibility(View.INVISIBLE);
    }
    player.setOnPreparedListener(new OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer mp) {
            player.start();
            loading.setVisibility(View.INVISIBLE);
        }
    });

}

public static void releasePlayer() {
    if (player != null) {
        // Player-Ressourcen freigeben
        player.release();
        player = null;
    }
} 
```

}

我想要做的是在用户按下“播放”按钮时显示progressBar（cicling），并且当媒体播放器开始播放时我需要它消失。atm 我只是在玩家开始玩并且永远不会消失后显示圆圈...

**编辑：**我让它工作。我确实像这样启动播放器： player.prepare(); 代替 player.prepareAsync(); 所以进度条显示了一个视图毫秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:36:54.513

试试这个。

开始按钮中的进度条点击这里像这样，

```
 streamButton.setOnClickListener(new View.OnClickListener()
  {
   public void onClick(View view)
   { 
   ProgressDialog progressDialog=null;   
 progressDialog=ProgressDialog.show(context, "", "Playing..."); 
    Toast
    .makeText(
      MyActivity.this,
       "The following stream is about to start" + station,   
      Toast.LENGTH_LONG).show();
    player.playAudioFile(urlstring2);
    streamButton.setEnabled(false);
    notificate();
   }
  }); 
```

而且您必须覆盖媒体播放器的 Prepared 侦听器，以便您可以像这样停止其中的进度条，

```
Player.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                    progressDialog.cancel();

            }
        }); 
```

通过这个，您可以实现显示进度，直到您的 Mediaplayer 开始播放文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-15T17:37:01.120

回来最后将此问题标记为已解决，因此我将之前编辑的内容复制到了我的问题中。

> 我让它工作。我确实像这样启动播放器： player.prepare(); 代替 player.prepareAsync(); 所以进度条显示了一个视图毫秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T16:45:42.627

在此行之后添加代码以隐藏您的 ProgressBar：

```
player.start(); 
```

并且也在你的 catch 块中。一旦玩家正在玩，或者没有玩，这应该让它消失。

如果您现在添加用于显示 ProgressBar 的代码，我也可以帮助您如何隐藏它。

# android - 是否可以在 ListView / ListAdapter 顶部插入项目？

> ID：10472006
> 
> 赞同：1
> 
> 时间：2012-05-06T16:04:42.740
> 
> 标签：android, listview, listadapter

同时保持ListView中的当前位置？

我正在尝试创建一种从当月开始的“类似日历”的 ListView，并允许用户一次一个月地无限向上滚动。

我在 ListAdapter 中找到了 setStackFromBottom() 方法，但这仍然会创建具有从上到下的索引（位置）的视图。

我想我需要找到一种方法来创建一个使用某种队列而不是位置索引的 ListAdapter，或者创建一个从底部位置开始并向上工作的 ListAdapter。

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:10:28.387

如果您有一个 listadapter，那么您可能有一个用于保存基础数据的 java 集合。在这个集合（假设它是一个列表）中，您可以插入新的东西，`add(int position, object data)`因此您只需在适配器和所有内容中调用`notifyDataSetChanged()`（[http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged) ）应该可以正常工作。

# jakarta-ee - 编辑 EJB 实体

> ID：10472008
> 
> 赞同：0
> 
> 时间：2012-05-06T16:04:55.557
> 
> 标签：jakarta-ee, orm, ejb, entity

我在 ejb 部分有一个方法，它必须增加实体的简单整数值并将更改保存到 db 中。我无法让它工作，因为它总是打印相同的值！

这是代码：

```
public void incrementDownloads(Dispensa dispensa) {
    int dl = dispensa.getDownloads();
    System.out.println(dispensa.getTitolo() + " had " + dl + " downloads");
    dispensa.setDownloads(dl++);
    dispensaFacade.edit(dispensa);        
    dispensa = dispensaFacade.refresh(dispensa);
    System.out.println("now it has " + dispensa.getNumDownloads());
} 
```

其中`dispensaFacade`使用的方法是来自自动生成的方法`AbstractFacade`：

```
public void edit(T entity) {
    getEntityManager().merge(entity);
}

public T refresh(T entity){
    T res = getEntityManager().merge(entity);
    getEntityManager().refresh(res);
    return res;
} 
```

我的代码打印出来：

> 标题 1 有 0 次下载
> 
> 现在它有 0

这显然是错误的！

哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:05:32.447

单独使用时，即

```
++i;
// or
i++; 
```

前/后增量运算符在功能上是等效的。但是，在您的情况下，您将它们用作方法参数，并且差异变得明显。

这是一些我希望能说明问题的代码。

```
public static void main(String[] args) {
    int i = 0;
    printPassedValue(i++);
    System.out.println("i = " + i);
    printPassedValue(++i);
    System.out.println("i = " + i);
}

private static void printPassedValue(int value) {
    System.out.println("Passed value: " + value);
} 
```

运行此代码时会产生

```
Passed value: 0
i = 1
Passed value: 2
i = 2 
```

如您所见，当以这种方式使用后增量时（即 i++），i 的值在i 递增*之前传递给方法。*但是，当使用预增量 (++i) 时，i 会递增，然后将值传递给方法。后者显然是你想要的。

这是需要小心走捷径的领域之一；

如果你做了

```
dl++;  // or ++dl;
dispensa.setDownloads(dl); 
```

那么你就不会遇到这个问题了。

# jquery - jQuery UI：日期选择器麻烦？

> ID：10472009
> 
> 赞同：0
> 
> 时间：2012-05-06T16:05:10.650
> 
> 标签：jquery, html, jquery-ui, jquery-ui-datepicker

我为我的日期选择器制作了一个很酷的皮肤。不知什么原因，当你点击运行时，下面有一个黑条，但是当你点击输入，然后点击页面时，它就消失了。我可以摆脱黑条吗？[http://jsfiddle.net/Hunter4854/WMptu/](http://jsfiddle.net/Hunter4854/WMptu/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:10:51.723

试试这个[http://jsfiddle.net/bibin_v/WMptu/1/](http://jsfiddle.net/bibin_v/WMptu/1/)

# php - 无法通过 Hostgator 中的 Office365 使用 PHP (phpmailer) 发送邮件。如何解决这个问题？

> ID：10472010
> 
> 赞同：7
> 
> 时间：2012-05-06T16:05:14.253
> 
> 标签：php, smtp, phpmailer, office365

我希望能够通过 office365在[Hostgator中发送邮件。](http://www.hostgator.com/shared.shtml)我可以用 Gmail 做到这一点，但无法将其设置为与 office365 一起使用。

它适用于我的另外两台服务器。唯一的问题是 Hostgator。

我是否必须修复某些问题或 Hostgator 必须采取一些措施？

```
<?php
require_once('class.phpmailer.php');
$mail = new PHPMailer(true);

$mail->IsSMTP();

$mail->SMTPDebug = 2;
$mail->SMTPAuth = true;
$mail->SMTPSecure = "tls";
$mail->Host = "pod51014.outlook.com";
$mail->Port = 587;
$mail->Username = "usernamehere";
$mail->Password = "************";

/* ... addaddres, reply, subject, message -> the usual stuff you need ... */

$mail->Send();

?> 
```

我只是不断收到以下回复：

```
SMTP -> ERROR: Failed to connect to server: Connection refused (111) 
```

我正在与他们进行支持聊天，并且应该打开 587 端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T07:11:20.517

我认为 hostgator 正在阻止传出的电子邮件，但接受传入的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-28T10:33:58.893

如果您的托管服务提供商不允许出站 SMTP 邮件，我建议您查看[Microsoft Graph](http://graph.microsoft.io/en-us/docs/api-reference/v1.0/resources/message) - 一个 REST API，它还可以让您发送电子邮件并做更多事情。例如，您可以使用[oauth2-azure](https://github.com/TheNetworg/oauth2-azure)库从您的 PHP 代码中轻松地与之交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-12T12:48:05.190

试试这些东西。也许有些东西会起作用。

将主机设置为：

```
$mail->Host = 'smtp.office365.com'; 
```

根本不要设置端口：

```
//$mail->Port = 587; 
```

# php - 如何从 MySQL 数据库中的一行中选择数据

> ID：10472021
> 
> 赞同：0
> 
> 时间：2012-05-06T16:07:12.847
> 
> 标签：php, mysql, database

我要做的是仅在使用 PHP 的 MySQL 数据库中从特定行中选择数据。例如，假设 USER1 已登录，我想从数据库中的行中获取用户数据并使用 PHP 将其显示在 USER1 的配置文件中。我怎样才能用 PHP 做到这一点？请帮助我，因为我是 MySQL 新手！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:27:15.357

这应该可以满足您的需要。

```
$result = mysql_query("SELECT * FROM Persons WHERE user ='$user1'");

while($row = mysql_fetch_array($result))
  {
  echo $row['FirstName'] . " " . $row['LastName'];
  echo "<br />";
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:13:41.707

看这个教程：

[http://www.homeandlearn.co.uk/php/php13p2.html](http://www.homeandlearn.co.uk/php/php13p2.html)

[http://php.about.com/od/phpwithmysql/ss/mysql_php_2.htm](http://php.about.com/od/phpwithmysql/ss/mysql_php_2.htm)

# jquery - Jquery 类选择器和 hide()

> ID：10472022
> 
> 赞同：1
> 
> 时间：2012-05-06T16:07:31.183
> 
> 标签：jquery

```
$('.comment').hide(2000); 
```

这会在两秒钟后淡入淡出隐藏班级评论。有没有一种简单的方法可以通过添加额外的类来防止带有“评论”类的 div 褪色？

```
<div class="comment">This text hides</div>
<div class="comment nohide">This text should not hide</div> 
```

添加 nohide 类并不能阻止它隐藏。我可能最终会创建一个新课程，但我想我会问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:09:13.377

您可以使用`:not`选择器来过滤元素：

```
$('.comment:not(.nohide)').hide(2000);​ 
```

**演示：http:** [//jsfiddle.net/M6zgw/](http://jsfiddle.net/M6zgw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:18:18.350

我会用

```
$('.comment.fadeable').hide(2000) 
```

如果可能的话。因为它通常看起来比“不”选项更直接。`$(".x.y").hide()`仅适用`hide()`于具有“x”和“y”类的 div。

# ajax - 显示数据的 Ajax 代码

> ID：10472024
> 
> 赞同：0
> 
> 时间：2012-05-06T16:07:37.417
> 
> 标签：ajax

我在 javascript 中编写了这段代码以在此页面 (Normal_Info.php) 中显示信息，但不幸的是它不起作用。如果有人可以帮助我，我将不胜感激

```
<html>
    <head>
        <script language="javascript">
            function ajaxFunction()
            {
                return window.XMLHttpRequest ?
                    new window.XMLHttpRequest : 
                    new ActiveXObject("Microsoft.XMLHTTP");
            }

            function Go_there()
            {
                var httpObj = ajaxFunction();

                httpObj.open("GET","Normal_Info.php", true);
                httpObj.send();
                httpObj.onreadystatechange = ChangedState()
                {
                    if (httpObj.readyState == 4 && httpObj.status == 200)
                    {
                        document.getElementById("result").innerHTML=httpObj.responseText;
                    }
                }
            }
        </script>
    </head>
    <body>
        <form id=ff>
            <input type=button value=Hi OnClick=Go_there() />
        </form>
        <div id=result>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:28:33.000

我建议使用 jquery [http://jquery.com/](http://jquery.com/)

```
<script src="jquery.js"></script>
<script language="javascript">
$('#ff').submit(function() {
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
  $('#result').html(data);
  // alert('Load was performed.');
  }
 });
  });
  </script> 
```

无需点击事件

# ios - 使用 SIngle NavBar 在 App 中显示 Dashcode 浏览器

> ID：10472027
> 
> 赞同：0
> 
> 时间：2012-05-06T16:08:17.737
> 
> 标签：ios, uiwebview, uinavigationcontroller, navigationcontroller, dashcode

如何在 UIWebView 中显示 Dashcode 创建的浏览器模板，用户可以将其关闭，而无需两个导航栏？在下面的照片中，您会看到顶部栏是 Xcode 导航控制器的一部分，带有一个后退按钮，目的是让用户离开 Web 视图。下面的栏是 Dashcode 创建的堆栈和用户导航的内容层次结构的弹出。

据我所知，您不能在网页、Dashcode 或其他方式中放置一个按钮，这将关闭可可应用程序视图控制器。如果我隐藏了 Xcode 导航栏，用户在完成后就无法摆脱 web 视图。我无法隐藏 Dashcode 导航栏或用户无法浏览内容。

作为一些背景，我想要完成的是我在网络上托管的应用内文档。类似于 Apple iPhone Cards 应用程序的帮助视图。这将允许我通过我的网页更新文档，而无需更新应用程序本身。

![在此处输入图像描述](../Images/f3cdec33b064d805ff4e2e158153994a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:29:04.713

答案似乎是在一个透明视图中浮动一个完成按钮，该透明视图浮动在 Web 视图的顶部。从而给出完成按钮（来自 Xcode IB）是来自 Dashcode 浏览器模板的 NavBar 的一部分的效果。

# php - 使用 sha256 加密的 PHP 注册脚本

> ID：10472028
> 
> 赞同：-2
> 
> 时间：2012-05-06T16:08:20.537
> 
> 标签：php, sql, encryption, hash, passwords

我正在制作一个注册脚本，让用户在网站上注册一个帐户。我决定使用 sha256 来加密密码。

这是我的代码：

```
 // Set error message as blank upon arrival to page
$errorMsg = "";
// First we check to see if the form has been submitted 
if (isset($_POST['Submit'])){
    //Connect to the database through our include 
    require_once ('includes/connect.inc.php');
    // Filter the posted variables
    $forename = $_POST['forename'];
    $surname = $_POST['surname'];
    $email = stripslashes($_POST['email']);
    $password = preg_replace("[^A-Za-z0-9]", "", $_POST['password']); // filter everything but numbers and letters
    $email = strip_tags($email);
    $town = preg_replace("[^A-Z a-z0-9]", "", $_POST['town']); // filter everything but spaces, numbers, and letters

    // Check to see if the user filled all fields with
    // the "Required"(*) symbol next to them in the join form
    // and print out to them what they have forgotten to put in
    if((!$forename) || (!$surname) || (!$email) || (!$password) || (!$town)){

        $errorMsg = "You did not submit the following required information!<br /><br />";
        if(!$forename){
            $errorMsg .= "--- Forename";
        } else if(!$surname){
            $errorMsg .= "--- Surname"; 
        } else if(!$email){ 
            $errorMsg .= "--- email"; 
       } else if(!$password){ 
           $errorMsg .= "--- password"; 
       } else if(!$town){ 
           $errorMsg .= "--- town"; 
       }
    } else {

           $hash = hash("sha256", $password);

            $sql = "INSERT INTO customers (forename, surname, email, password, town, registeredDate, active) 
            VALUES('$forename','$surname','$email', '$hash', '$town', GETDATE(), 'True')" ;
            $stmt2 = sqlsrv_query($conn,$sql);

  } // Close else after missing vars check
} //Close if $_POST
?>

<form action="join_form.php" method="post" enctype="multipart/form-data">
    <tr>
      <td colspan="2"><font color="#FF0000"><?php echo "$errorMsg"; ?></font></td>
    </tr>

    <tr>
      <td width="163"><div align="right">Forename:</div></td>
      <td width="409"><input name="forename" type="text"/></td>
    </tr>

    <tr>
      <td width="163"><div align="right">Surname:</div></td>
      <td width="409"><input name="surname" type="text"/></td>
    </tr>

    <tr>
      <td><div align="right">Email: </div></td>
      <td><input name="email" type="text" /></td>
    </tr>

     <tr>
      <td><div align="right"> Password: </div></td>
      <td><input name="password" type="password" /> 
      <font size="-2" color="#006600">(letters or numbers only, no spaces no symbols)</font></td>
    </tr>

    <tr>
      <td><div align="right">Town: </div></td>
      <td>
        <input name="town" type="text" />
      </td>
    </tr>

    <tr>
      <td><div align="right"></div></td>
      <td><input type="submit" name="Submit" value="Submit Form" /></td>
    </tr>
  </form> 
```

当我按下提交按钮时，没有任何反应。我没有收到错误消息，但记录也没有添加到数据库中。

我知道这与我使用有关

```
$hash = hash("sha256", $password); 
```

也许我把它放在错误的地方或什么的？我对 PHP 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T23:50:46.890

我完全改变了我的代码并使用了参数来向数据库添加一条记录

```
<?php
require_once ('includes/connect.inc.php');

if ($_POST['Register'] == "register")
{

 $params = array($_POST['email']);

 $sql= "SELECT * FROM customers WHERE Email=?";
 $stmt = sqlsrv_query($conn,$sql,$params);

 if(sqlsrv_has_rows($stmt))
 {
// echo"<h2>You have already signed up with this email </h2>";
  header('Location: register_login_forms.php?error=2');
  die();
 } else if($_POST['password'] != $_POST['password2'])
 {
 // echo"<h2>Wrong Passwod</h2>";
  header('Location: register_login_forms.php?error=3');
  die();
 }

 $pass = hash("sha256", $_POST['password']);

 $params = array($_POST['forename'],$_POST['surname'],$_POST['email'],$pass, $_POST['phone'], $_POST['question'],
 $_POST['answer']);

 $sql="INSERT INTO customers (forename,surname,email,password,phone,secret_question, secret_answer,active,registeredDate)
 VALUES (?,?,?,?,?,?,?,'True',GETDATE())";
    $stmt=sqlsrv_query($conn,$sql,$params);
header('Location: registerSuccess.php');    

}

?> 
```

这是表格

```
<Form name = "Register" action="register.php" method="POST" >

                    <label>Forename</label><br />
                    <input required title="Please only use Letters"  type="text" pattern="\s*[A-z]+\s*" name="forename" /><br/>
                    <label>Surname</label><br />
                    <input required title="Please only use Letters"  type="text" pattern="\s*[A-z]+\s*" name="surname" /><br/>
                    <label>Email</label><br />
                    <input required title="Please enter a Valid Email Address"  type="email" name="email" /></br>
                    <label>Password</label><br />
                    <input required title="Please have a Password of Minimum of 6 Characters with Numbers"   type="password" pattern="[A-z0-9]{6,20}" name="password" /></br>
                    <label>Confirm Password</label><br />
                    <input required title="Confirm Password"   type="password" pattern="[A-z0-9]{6,20}" name="password2" /></br>
                    <label>Secret Question</label><br />
                    <input required  type="text" name="question" /></br>
                    <label>Secret Answer</label><br />
                    <input required  type="text" name="answer" /></br>
                    <label>Phone Number</label><br />
                    <input required title="Please only use numbers"  type="text" pattern="\d+" name="phone" /></br>

                    <input type="hidden" name="Register" value="register">
                    <input class="button" type = "submit"/>

            </Form> 
```

# php - 自定义 MVC 框架：如何在视图文件中设置链接

> ID：10472031
> 
> 赞同：-2
> 
> 时间：2012-05-06T16:08:41.613
> 
> 标签：php, model-view-controller, seo, url-routing

我正在创建一个自定义 MVC 框架，但我在视图文件中遇到了一些 URL 定义。我有这段代码可以让我使用 SEO 友好的链接：

```
$requestURI = explode('/', $_SERVER['REQUEST_URI']);
$scriptName = explode('/', $_SERVER['SCRIPT_NAME']);

for( $i = 0; $i < sizeof($scriptName); $i++) 
{
    if( $requestURI[$i] == $scriptName[$i]) 
    {
        unset($requestURI[$i]);
    }
}

$command = array_values($requestURI);

if( sizeof($command) === 0 OR sizeof($command) === 1)
{
    init_controller_class($config['default_controller'], $config['default_entry']);
}
elseif( sizeof($command) >= 2)
{
    init_controller_class($command[0], $command[1]);
} 
```

我的视图文件：

```
<div class="container">
     <div class="header">
          <ul class="menu">
              <li><a href="#">Home</a></li>
              <li><a href="#">News</a></li>
              <li><a href="#">Downloads</a></li>
              <li><a href="#">About µMVC</a></li>
          </ul>
     </div>
</div> 
```

登陆页面的 URL 是[http://mvc.localhost:8888/welcome/index](http://mvc.localhost:8888/welcome/index)。如何在此菜单中设置 URL？因为，如果我插入`<li><a href="welcome/about">About µMVC</a></li>`，它将重定向到[http://mvc.localhost:8888/welcome/welcome/about](http://mvc.localhost:8888/welcome/welcome/about)并且显然我的脚本将终止，因为控制器中不存在`welcome`具有参数值的函数。如何消除这个问题？`'about'``welcome`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:04:38.250

在链接中使用绝对路径，例如 /welcome/about

# php - 将 php 数组项传递到 javascript 弹出窗口中，以便在 mysql db 中进行编辑和更新

> ID：10472032
> 
> 赞同：0
> 
> 时间：2012-05-06T16:08:49.850
> 
> 标签：php, javascript, mysql, insert

我正在为一个大学项目创建一个糖尿病管理系统。该系统的特点之一是患者能够发送最新的葡萄糖读数，护士能够登录并评论这些读数。

我已经能够对患者功能进行编码，但是我希望在评论列中添加一个评论按钮，当点击该按钮时，会弹出一个弹出窗口或一个文本框，以便护士能够评论该特定记录。如果还没有输入评论，应该会出现一个空框，但是如果之前输入过评论，它应该显示在框中以进行更新并发送回 mysql 数据库。我想问是否有人可以给我一种方法来包含这个评论框和代码，以便在框中显示现有值，如果没有现有评论，则可以输入新评论并将其存储在数据库中。

下面是我的php代码。

```
 <?php//run query
    $result = mysql_query($GetReadings);
?>

<table>
    <tr>
    <th>Date</th>
    <th>Time</th>
    <th>Glucose Level</th>
    <th>SBP</th>
    <th>DBP</th>
    <th>Comments</th>
</tr>

<?php
    //display results
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
?>

<tr>
    <td><?php echo $row["Date"]; ?> </td>
    <td><?php echo $row["Time"]; ?> </td>
    <td><?php echo $row["GlucoseLevel"]; ?> </td>
    <td><?php echo $row["SBP"]; ?> </td>
    <td><?php echo $row["DBP"]; ?> </td>
    <td><?php echo $row["Comments"];
<?php
//if statement to add comment link if user is a nurse
if ($_SESSION['User_level'] == 2)
    {
     //code for comments
    }
 ?> </td>
</tr>

<?php
        //end of while loop
    }
?> 
```

希望我没有错过任何重要信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:43:02.800

使用 javascript 函数：

```
window.open(URL, windowName[, windowFeatures]) 
```

在哪里，`URL - desired URL to display a page containing Textbox`使用您想要的任何窗口名称。

Echo`<a>`或`button`带有 onclick 事件，例如：

```
<a href="#" onlick="window.open('somePage.php?id=<? echo $row['id']?>', 'Window Name')">Add Comment</a> 
```

**编辑**

最基本的实现方式是，echo a`<div></div>`包含过去的评论、新评论的文本框和发送/取消按钮。诀窍是设置该`display:none`div 的样式属性。您将以下代码作为准则：如果用户具有正确的用户级别，则回显以下代码。

```
<a href="#" onclick="showComment('<?php echo $row['id']?>')">Show Comments</a>

<div id="comment-<?php echo $row['id']?>" style="display:none">
    //display previous comments

    <form method="post" action="addComment.php?id=<?php echo $row['id']?>">
        <textarea name="comment"></textarea>
        <input type="submit" value="Add Comment" /><input type="button" onclick="hideComment('<?php echo $row['id']?>')">
    </form>
</div>

<script type="text/javascript">
    function hideComment(id) {
        document.getElementById('comment-' + id).style.display = 'none';
    }

    function showComment(id) {
        document.getElementById('comment-' + id).style.display = 'block';
    }
</script> 
```

# php - 使用 PHP 检查网站的链接

> ID：10472038
> 
> 赞同：1
> 
> 时间：2012-05-06T16:09:21.847
> 
> 标签：php, url, web-crawler

我正在我的网站上构建一个脚本，但发现自己有点困惑如何以最少的编码使其正常工作。

基本上所需要的就是我可以输入一个 URL，例如 domain.com，它应该扫描该主页以查找指向我的域的链接，并检查是否分配了 rel="nofollow" 并返回 true如果链接没有 rel="nofollow" 或 false 如果没有链接，或者链接上有 rel="nofollow" 。

我该怎么做，或者我会从哪里开始。

我已经用谷歌搜索了如何创建蜘蛛，但是对于我要创建的基本脚本来说，它的信息量很大而且很复杂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:14:46.827

你所要求的并不像你想象的那么简单。要正确执行此操作，您需要使用 DOM 解析器，例如`DOMDocument`.

[http://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)

您可以使用它的[loadHTML()](http://php.net/manual/en/domdocument.loadhtml.php)方法来解析您要扫描的网页。从那里，您可以使用它的各种功能来查找您正在寻找的特定链接，并检查其属性以确保 URL 正确，并且您`rel="nofollow"`在其中。

我向您保证，最后，这比您的 URL 的字符串搜索要容易得多。盲目搜索会导致结果不准确，而且比您意识到的要麻烦得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:15:41.353

take a look at [http://simplehtmldom.sourceforge.net/.](http://simplehtmldom.sourceforge.net/)

```
// Create DOM from URL or file
$html = file_get_html('http://www.google.com/');
// Find all links 
foreach($html->find('a') as $element) 
       echo $element->href . '<br>'; 
```

# javascript - jQuery Mobile，透明黑色叠加效果

> ID：10472040
> 
> 赞同：1
> 
> 时间：2012-05-06T16:09:41.697
> 
> 标签：javascript, jquery, css, jquery-mobile

我目前正在将 jQuery Mobile 用于 Phonegap 应用程序，我想知道如何添加一个仅对页面内容半透明的黑色叠加层。我不希望它覆盖顶部和底部的导航栏。这会在我向服务器发出 AJAX 调用时发生。

当您在搜索栏中键入时，此效果类似于 Twitter iOS 应用程序。

```
$('#search').ajaxStart(function() {
  // what do I put here?
}); 
```

谢谢大家的帮助！非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:41:13.000

我同意 meagar（谁应该让他的评论成为一个答案，以便它可以被接受！）但还要补充一点，如果您不希望覆盖 div 始终存在（但只是隐藏），您可以即时添加它反而：

```
$('#search').ajaxStart(function() {
  $('#content').wrap('<div class="overlay" />');
}); 
```

（`#content`代表您碰巧称呼您的内容包装器`.overlay`的任何名称，并且是我碰巧为我选择的名称；很容易更改！）

每当 Ajax 完成回调触发时（这也是`.hide()`meagar 建议中使用的地方），只需使用以下命令再次打开它：

```
$('#content').unwrap(); 
```

剩下的就是 CSS。

```
.overlay { 
    position: relative;
    height: 100%;
    width: 100%;
    background-color: rgba(0,0,0,0.7);
} 
```

请记住...这实际上可能不是正确的 CSS 方法，具体取决于您页面上已有的内容。基本想法是您希望它只跨越您的内容区域，但是有陷阱！浮动，某些东西的绝对定位......所有这些都使您的叠加层不仅仅覆盖内容区域。如果您遇到了麻烦，那是一个单独的 SO 问题。;-)

JSFiddle：http: [//jsfiddle.net/Ff5wV/](http://jsfiddle.net/Ff5wV/)

# java - 关于组布局

> ID：10472044
> 
> 赞同：0
> 
> 时间：2012-05-06T16:10:33.617
> 
> 标签：java, swing, grouplayout

嗨，我已尝试根据我的分配要求实现组布局，下面是我的代码片段，但是当我执行 pack() 时，我在此代码片段中遇到了一个问题；它给我抛出异常我也不知道如何让它可见请指导我哪里我错了代码建议会很有帮助

提前致谢

```
public class AMS_GUI extends JFrame
{
   private JFrame frame;

public AMS_GUI()
{
  makeFrame(); 
}

public void makeFrame()
{
   JLabel unitLabel = new JLabel("Units"); // units label
   JComboBox unitCombo = new JComboBox(); // units empty combo box
   JButton addUnit = new JButton("Add"); // add units button for adding units

   JLabel AssessmentLabel = new JLabel("Assessments"); // assessments Label
   JComboBox AssessmentCombo = new JComboBox(); // assessments empty combo box
   JButton addAssessment = new JButton("Add"); // assessments add button

   JLabel TasksLabel = new JLabel("Tasks"); // tasks Label
   JComboBox TasksCombo = new JComboBox(); // tasks empty combo box
   JButton addTasks = new JButton("Add"); // tasks add button
   JButton editTasks = new JButton("Edit");// tasks Edit button

   JLabel planLabel = new JLabel("Plans");
   JButton makePlan = new JButton("MakePlan");
   JButton showPlan = new JButton("ShowPlan");
   JButton savePlan = new JButton("SavePlan");

    //Set up the content pane.
    GroupLayout layout = new GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setAutoCreateGaps(true);
    layout.setAutoCreateContainerGaps(true);

    layout.setHorizontalGroup(layout.createSequentialGroup()
        .addComponent(unitLabel)
        .addComponent(AssessmentLabel)
        .addComponent(TasksLabel)
        .addComponent(planLabel)
        .addGroup(layout.createParallelGroup(LEADING)
        .addComponent(unitCombo)
        .addComponent(AssessmentCombo)
        .addComponent(TasksCombo)
        .addComponent(makePlan)
        .addComponent(showPlan)
        .addComponent(savePlan))
        .addGroup(layout.createParallelGroup(LEADING)
            .addComponent(addUnit)
            .addComponent(addAssessment)
            .addComponent(addTasks)
            .addComponent(editTasks)
            )
            );

        setTitle("AMS_GUI");
        pack(); 
```

## 例外

```
Exception in thread "main" java.lang.IllegalStateException: javax.swing.JButton
    [,0,0,0x0,invalid,alignmentX=0.0,alignmentY=0.5,
    border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@bb6ab6,flags=296,
    maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,
    margin=javax.swing.plaf.InsetsUIResource[top=2,left=14,bottom=2,right=14],paintBorder=true,
    paintFocus=true,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,
    selectedIcon=,text=Edit,defaultCapable=true] 
    is not attached to a vertical group 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:29:57.393

```
Exception in thread "main" java.lang.IllegalStateException: javax.swing.JButton
    [..] 
    is not attached to a vertical group 
```

添加一个垂直组并将组件添加到其中。

从[JavaDocs](http://docs.oracle.com/javase/7/docs/api/javax/swing/GroupLayout.html)：

> `GroupLayout`独立处理每个轴*。*即，有表示横轴的组和表示纵轴的组。水平组负责确定沿水平轴的最小、首选和最大尺寸，以及设置其中包含的组件的 x 和宽度。垂直组负责确定沿垂直轴的最小、首选和最大尺寸，以及设置其中包含的组件的 y 和高度。**每个都`Component`必须同时存在于水平和垂直组中，否则`IllegalStateException`**在布局期间或请求最小、首选或最大尺寸时**会抛出一个。**

# java - 从 HTMLDocument 获取所有 html 作为字符串

> ID：10472049
> 
> 赞同：8
> 
> 时间：2012-05-06T16:11:26.703
> 
> 标签：java, document

我用Java编码..

有谁知道我如何将 javax.swing.text.html.HTMLDocument 的内容作为字符串获取？这是我到目前为止所得到的......

```
URL url = new URL( "http://www.test.com" );

HTMLEditorKit kit = new HTMLEditorKit(); 
HTMLDocument doc = (HTMLDocument) kit.createDefaultDocument(); 
doc.putProperty("IgnoreCharsetDirective", Boolean.TRUE);
Reader HTMLReader = new InputStreamReader(url.openConnection().getInputStream()); 
kit.read(HTMLReader, doc, 0); 
```

我需要将 HTMLDocument 的内容作为字符串。

例子：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">    <html><head><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"> 
```

....... ETC。

任何帮助，将不胜感激。我需要使用 HTMLDocument 类才能正确处理 html :)

谢谢丹尼尔

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-06T16:25:24.920

```
StringWriter writer = new StringWriter();
kit.write(writer, doc, 0, doc.getLength());
String s = writer.toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:26:04.007

您根本不需要编辑器和阅读器 - 只需阅读输入流。例如，使用 commons-io`IOUtils.toString(inputStream)`

或者您可以使用：

```
Content content = document.getContent();
String str = content.getString(0, content.length() - 1); 
```

# mono - MonoDroid 使用 Beta，MonoTouch 使用 Release？

> ID：10472052
> 
> 赞同：2
> 
> 时间：2012-05-06T16:11:37.603
> 
> 标签：mono, xamarin.ios, monodevelop, xamarin.android

我们拥有 Xamarin 的 MonoDroid 和 MonoTouch 企业许可证。

我们的 MonoTouch 正在生产，因此我们无法安装 Beta 版本，但我们正在学习/测试 MonoDroid 并希望安装 Beta 版本。

当 MonoDevelop 中的更新通道只允许 1 种模式 (Release/Beta/Alpha) 时，我们如何进行此配置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:02:42.910

您可以在频道之间切换，而不必安装 MonoDevelop 提供的所有内容。这意味着您可以：

*   切换到稳定频道并安装 MonoTouch 更新（并忽略其他任何内容）
*   切换到 beta 频道并安装 Mono for Android 更新（忽略其他任何内容）

这当然不是最佳的，因为 MonoDevelop 不会为您当前未选择的频道提供更新，并且还会为您提供您可能不想要的更新。第一个问题可以通过定期切换频道（例如每周一次）来解决。

# xcode - 系统声音的 ARC 内存管理问题

> ID：10472056
> 
> 赞同：0
> 
> 时间：2012-05-06T16:12:36.143
> 
> 标签：xcode, memory, automatic-ref-counting, instruments

我正在使用...播放系统声音

```
 NSString *path = [NSString stringWithFormat:@"%@%@",
                      [[NSBundle mainBundle] resourcePath],
                      @"/heartbeat.wav"];

    //declare a system sound id
    SystemSoundID soundID4;

    //Get a URL for the sound file
     NSURL *filePath = [NSURL fileURLWithPath:path isDirectory:NO];

    //Use audio sevices to create the sound
    AudioServicesCreateSystemSoundID((__bridge_retained CFURLRef)filePath, &soundID4);

    //Use audio services to play the sound
    AudioServicesPlaySystemSound(soundID4);

    AudioServicesDisposeSystemSoundID(soundID4); 
```

我不确定这是否是问题所在。但如果它使用“分析”运行，它就会出现潜在的泄漏。随着我在模拟器中运行的次数越来越多，应用程序变得越来越慢，显然会发生某种泄漏。我找到了如何在不使用 arc 的情况下处理此问题的示例，但没有。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:05:42.727

“它是潜在的泄漏”。它是什么”？

其次，您不会通过观察程序变得越来越慢来分析内存泄漏。事实上，这不是内存泄漏的正常症状，除非您正在耗尽物理 RAM 并导致大量交换。您可以通过使用 Leaks 仪器等工具实际识别不再可访问的内存来诊断泄漏。

也就是说，你不想要`__bridge_retained`，你只是想要`__bridge`。我更喜欢`CFBridgingRetain()`and`CFBridgingRelease()`函数而不是`__bridge_retained`and`__bridge_transfer`强制转换的原因之一是你犯这种错误的可能性要小得多。例如，你永远不会写：

```
AudioServicesCreateSystemSoundID(CFBridgingRetain(filePath), &soundID4); 
```

首先，很明显没有必要只保留`filePath`将其传递给函数。其次，调用`CFRetain()`-style 函数还表明您有责任调用`CFRelease()`-style 函数来平衡它。

# php - php - 在文本中找到指向图像的链接并转换为链接

> ID：10472060
> 
> 赞同：0
> 
> 时间：2012-05-06T16:13:02.760
> 
> 标签：php, image, hyperlink

我想在我的网站上实现以下功能。当用户发布内容时，他还可以包含一个链接，即图片链接。想象一个用户发布这样的内容：

```
Hello look at this awesome picture. It is hilarious isn't it?
http://www.google.com/image.jpg 
```

然后该文本应转换为：

```
Hello look at this awesome picture. It is hilarious isn't it?
<a target="_blank" href="http://www.google.com/image.jpg">
    <img src="http://www.google.com/image.jpg" alt=""/>
</a> 
```

所以我需要一些 php 脚本来搜索文本中的链接，如果找到链接，检查它是否链接到图片。它还需要能够识别不以 http 开头的链接，以及以 https 开头的链接。

你会怎么做？

非常感谢 ：）

丹尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:20:19.543

这两个链接结合起来怎么样：

[确定 URL 是否是 PHP 中的图像的最佳方法](https://stackoverflow.com/questions/676949/best-way-to-determine-if-a-url-is-an-image-in-php)

[PHP 正则表达式文本 URL 到 HTML 链接](https://stackoverflow.com/questions/3982483/php-regular-expression-text-url-to-html-link)

```
$url="http://google.com/image.jpg";

function isImage( $url ){
  $pos = strrpos( $url, ".");
    if ($pos === false)
      return false;
    $ext = strtolower(trim(substr( $url, $pos)));
    $imgExts = array(".gif", ".jpg", ".jpeg", ".png", ".tiff", ".tif"); // this is far from complete but that's always going to be the case...
    if ( in_array($ext, $imgExts) )
      return true;
return false;
}

$test=isImage($url);
if($test){
  $pattern = '/((?:[\w\d]+\:\/\/)?(?:[\w\-\d]+\.)+[\w\-\d]+(?:\/[\w\-\d]+)*(?:\/|\.[\w\-\d]+)?(?:\?[\w\-\d]+\=[\w\-\d]+\&?)?(?:\#[\w\-\d]*)?)/';
  $replace = '<a href="$1">$1</a>';
  $msg = preg_replace( $pattern , $replace , $msg );
  return stripslashes( utf8_encode( $msg ) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-09T08:29:25.353

这是此的工作代码：

```
<?php

$sad222="somthing text bla bla bla ...... Https://cdn.fileinfo.com/img/ss/lg/jpg_44.JPG this is my picture.";
$d11="";$cs11 = array();$i=-1;
$sad111 = explode(" ",$sad222);
foreach ($sad111 as $sad)
{

if(strtolower(substr($sad,0,7))=="http://"||strtolower(substr($sad,0,7))=="ftps://"||strtolower(substr($sad,0,8))=="https://"||strtolower(substr($sad,0,6))=="ftp://"){
if(strtolower(substr($sad,strlen($sad)-4,4))==".jpg"||strtolower(substr($sad,strlen($sad)-4,4))==".jpe"||strtolower(substr($sad,strlen($sad)-4,4))==".jif"||strtolower(substr($sad,strlen($sad)-4,4))==".jfi"||strtolower(substr($sad,strlen($sad)-4,4))==".gif"||strtolower(substr($sad,strlen($sad)-4,4))==".png"||strtolower(substr($sad,strlen($sad)-4,4))==".bmp"||strtolower(substr($sad,strlen($sad)-4,4))==".dib"||strtolower(substr($sad,strlen($sad)-4,4))==".ico"||strtolower(substr($sad,strlen($sad)-5,5))==".jpeg"||strtolower(substr($sad,strlen($sad)-5,5))==".jfif"||strtolower(substr($sad,strlen($sad)-5,5))==".apng"||strtolower(substr($sad,strlen($sad)-5,5))==".tiff"||strtolower(substr($sad,strlen($sad)-4,4))==".tif"){
$d11="<img src='".$sad."' width='500' height='600'>";
$sad=$d11;}}$i++;
$cs11[$i]=$sad." ";
}

foreach ($cs11 as $dimz)
{  
echo $dimz;
}

?> 
```

# c++ - 这是将抽象类与 OO 方法一起使用的正确方法吗？

> ID：10472062
> 
> 赞同：1
> 
> 时间：2012-05-06T16:13:28.410
> 
> 标签：c++, design-patterns, subclass, superclass

假设我们有 2 个类 A 和 B。它们都是超类 C 的子类。现在让我们假设 C 定义了一个方法 areYouA()，这是一个询问对象是否是 A 类的对象的方法。

因此，在 c++ 中，可能的代码是：

```
C object1 = A()

C object2 = B()

if (object1.areYouA()==true){//crazy code here regarding if it's an A object}

if (object2.areYouA()==false){//crazy code here regarding if it's a B object} 
```

从 OO POV 向 B 和 C 类添加方法以询问它们各自的对象是否属于 A 类是否正确？？？如果它不正确，那么还有什么方法可以解决这个问题？？？？我的目标很明显，我需要 2 个 A 类和 B 类，在某些时候，我有部分二进制数据可能属于 A 类或 B 类，而且一个对象最初也属于 A 类，因为它得到完整的，它的结构需要改变，它的一些行为也需要改变，因此成为 B 类的对象。所以我的方法是将抽象类视为父类，最初声明一个 C 对象但存储一个 A 对象，然后在 B 对象更改时存储它。还有另一种方法吗，比如模式？？？

附加信息：

我想我对此不是很清楚。假设我想将来自 A 对象的信息存储在 file1 中，并将来自 B 对象的信息存储在 file2 中。如果将其母类用作接口，那么我如何判断它是存储在相应文件中的 A 对象还是 B 对象？我应该为每个对象添加一个属性，因为它们也属于它们的文件名吗？？？这意味着如果我需要更改文件名，那么每个对象也需要更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T16:18:46.563

The correct way is to use *virtual functions* to implement polymorphic behaviour:

```
struct C
{
    virtual void do_crazy_stuff() { } // (see text below)
    virtual ~C() { }                  // always have a virtual d'tor for polymorphic bases
};

struct A : C
{
    virtual void do_crazy_stuff() { /* your crazy code for A */ }
};

struct B : C
{
    virtual void do_crazy_stuff() { /* your crazy code for B */ }
}; 
```

Now you can use the same interface everywhere:

```
void process_data(C & x)  // <-- Note: take argument by reference!!
{
    x.do_crazy_stuff();
} 
```

This works on any object of a type derived from `C`:

```
int main()
{
    A x;
    B y;
    process_data(x);  // calls x.A::do_crazy_stuff
    process_data(y);  // calls x.B::do_crazy_stuff
} 
```

If you like, you can even declare the base function `C::do_crazy_stuff` as pure virtual; this makes the base class *abstract* (so it cannot be instantiated).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T16:18:59.280

First off,

```
C object1 = A();
C object2 = B(); 
```

slices the objects. They are no longer of type `A` or `B`, they are `C`.

You can use pointer for this:

```
C* object1 = new A();
C* object2 = new B(); 
```

Although `C` pointers, they point to instances of `A` and `B` respectively.

Second, your approach is wrong. It seems like you're not taking advantage of polymorphism. If you have functionality that is shared between the classes, it should be implemented in `C`. If it changes, you should have `virtual` methods.

Knowledge about the type of an object is usually at least a code smell. You can alter the behavior simply by using polymorphism. Although if it **really is necessary**, the correct way would be using `dynamic_cast`:

```
C* object1 = new A();
A* pA = dynamic_cast<A*>(object1); 
```

`pA` will be `NULL` if `object1` doesn't point to an object of type `A`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T16:18:42.467

This is a design issue in my opinion you have to analyze your problem better. Why do you need to know the type of your object? Why you don't implement the interface method in your A and B classes, which will do whatever you need with a binary data? Take a look on visitor design pattern to get an image of how to implement it in this way.

# php - 为什么我的 php/mysql 搜索字符串只匹配 LAST 关键字？

> ID：10472064
> 
> 赞同：1
> 
> 时间：2012-05-06T16:13:38.230
> 
> 标签：php, mysql, search, foreach

我有一个搜索函数，它应该从 $keywords_search 获取数组中的所有关键字，然后创建正确的 mySQL 语句来获取结果。问题是，当我搜索多个关键字时，似乎只找到与数组中的 LAST 关键字匹配的结果。我究竟做错了什么？

这是代码：

```
$sr='';
foreach(explode(" ",$keywords_search) as $value){

    $sr="a.name LIKE '%".$value."%' AND";

}
$query[] = substr($sr,0,-4); 
```

应该是搜索

```
a.name LIKE '%keyword1%' AND
a.name LIKE '%keyword2%' AND
a.name LIKE '%keyword3%' 
```

var_dump(); for $query 仅显示最后一个关键字的输出，而 var_dump(); $keywords_search 显示所有关键字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T16:15:09.203

让它像这样

```
$sr='';
foreach(explode(" ",$keywords_search) as $value){

    $sr .= " a.name LIKE '%".$value."%' AND";

}
$query[] = substr($sr,0,-4); 
```

你忘了把一个`.`追加。

# wpf - 在顶级范围的类库中设计模板

> ID：10472065
> 
> 赞同：0
> 
> 时间：2012-05-06T16:13:39.483
> 
> 标签：wpf, templates, xaml, resources

我使用类库（WPF 用户控件库）来托管项目解决方案中的其他（C#-）应用程序使用的一些用户控件。我希望这些控件使用位于类库顶部范围的 XAML ControlTemplates。ControlTemplates 不必在类库之外使用。

这里是一个模板声明：

```
<ControlTemplate TargetType="{x:Type Button}" x:Key="TemplateImageButtonSmall">
    <Grid>
        <Image Name="img" Source="/PSCommonUI;component/Images/Buttons/ButtonMinus_normal.png"/>
    </Grid>
</ControlTemplate> 
```

然后我在类库中有一个用户控件，包含：

```
<Button Height="57" Margin="10,0,6,5" Name="button3" Template="{StaticResource TemplateImageButtonSmall}" Width="82"> 
```

在应用程序中，我可以使用 App.xaml 文件来定义模板。但是，在类库中我没有这个选项。

我在网上搜索并找到了一些答案，包括使用 generic.xaml 文件、ComponentResourceKey、合并资源文件和其他我觉得过于复杂的东西。

我还读到主题定义（一般的资源）不应该驻留在类库中。

但是，如果我只需要在此类库中为托管控件提供一些主题，那么最佳实践如何？

提前致谢，

朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:20:14.427

我不确定您的意思，但是，如果您希望来自特定 UIElement 及以下的子 UIElement 使用控件模板，那么您可以在资源字典中定义模板并将字典合并到您希望字典的顶部控件中可见。

编辑：

该程序集仅包含其中的类和资源。它没有自己的事件（例如 OnApplicationLoaded）。

控件的 XAML 可以包含其自己的资源（例如控件模板）以供其自身和子控件使用，从而定义默认样式。

您的**应用程序**可以将资源字典合并到树的任何级别（应用程序、窗口、控件...），从而覆盖默认值。

如果您希望样式是动态的（可以通过导入资源字典来覆盖），那么请使用您的 XAML 中的*DynamicResource*关键字。如果您的资源在相同的 XAML 中定义并且不能被覆盖，则使用*StaticResource*关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:28:15.000

将资源字典添加到您的类库并在那里定义您的资源（模板）。它不必是 generic.xaml。

然后在每个用户控件或其他 .xaml 文件中引用您需要使用 Xaml 的资源字典，类似于：

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="... path to dictionary 1"/>
            <ResourceDictionary Source="... path to dictionary 2"/>        
            <ResourceDictionary Source="... etc"/>
        </ResourceDictionary.MergedDictionaries>                
    </ResourceDictionary>
</UserControl.Resources> 
```

然后，您可以使用合并字典中的资源键。

# ruby-on-rails - 使用 gmap4rails，您如何与 GMap 一起呈现特定于标记的辅助 HTML 内容？

> ID：10472067
> 
> 赞同：0
> 
> 时间：2012-05-06T16:13:50.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

[参考 https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Markers]

我按照说明创建 GMap 侧边栏。这不是我想要实现的。请记住，我的 GMap 包含异构标记，我想在 GMap 附近的辅助 HTML 内容中突出显示其中的一个子集（例如，在表格中或其他任何地方）：

问题 #1：你在哪里循环所有标记并只选择那些你想要辅助 HTML 内容的标记？（我知道你有块支持逻辑来补充每个标记的默认 JSON；我不确定这是我需要的。）

问题#2：我可以在javascript中实现一些回调，以便在渲染标记时，我可以检查它是哪种标记，然后适当地修改DOM（即辅助HTML内容）？

我的观点是，每个标记的 JSON 都应该有一个可以唯一标识该标记的属性。也许现在它只是“描述”属性。然后，如果我们在 javascript 中有一些回调，我们就可以只遵循那些属于某个“描述”类别的标记——例如，“红色、白色和蓝色”标记。然后，javascript 中的回调可以操作 DOM 中的相关元素，从而在 GMap 旁边创建辅助的自定义 HTML 内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:29:02.520

如果您想获得每个标记的唯一标识符，您应该使用每个对象 id：

```
your_objects.to_gmaps4rails do |obj, marker|
  marker.json({id: obj.id})
end 
```

答案1：

默认情况下，所有标记都存储在`Gmaps.map.markers`. 您可以通过以下方式获取第一个标记的 id：`Gmaps.map.markers[0].id`

因此，使用您的适当逻辑创建您自己的函数。

答案2：

要使用的回调是`Gmaps.map.callback`.

基本上，做：

```
<%= gmaps(your_options) %>

<% content_for :scripts do %>
<script type="text/javascript">
Gmaps.map.callback = function() {
  //your code
}
</script>
<% end %> 
```

# c# - C#绘制框设置光标

> ID：10472068
> 
> 赞同：0
> 
> 时间：2012-05-06T16:14:04.077
> 
> 标签：c#, console

我正在尝试在控制台中绘制一个框，但如果不输入新行，我无法弄清楚。

我做了这样的事情：

```
-----
|   |
_____ 
```

但是输入行直接位于它的下方，并删除了框的上排。

我试过了，`Console.setCursorPosition`但最后一行已经被填满，因此已经创建了一个新行。

如何防止创建新行？

提前致谢

**编辑** 可以将控制台窗口用作画布吗？让我们假设一个具有以下大小的窗口

高度：50 宽度：100

我可以在上面给定的控制台尺寸内的任何瓷砖上放置任何字符。

如果可以的话，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:17:51.557

I think that very similair task have guys in Microsoft. Have a look:

[http://msdn.microsoft.com/en-us/library/system.console.setcursorposition.aspx](http://msdn.microsoft.com/en-us/library/system.console.setcursorposition.aspx) There's something very similair. Hope this helps.

**EDIT:**

```
Console.Write("\b\b"); 
```

This should remove last '\r\n' characters for new line.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:41:21.560

如果您发布您为从 ASCII 字符创建此框而编写的代码，将会很有帮助。

如果您使用`Console.WriteLine()`，只需`Console.Write()`在最后一行使用方法即可。因此，对于您问题中的框，代码可能如下所示：

```
...
Console.WriteLine("-----");
Console.WriteLine("|   |");
Console.Write("-----");
... 
```

让我知道这是否有帮助。

我在示例应用程序中进行了测试，似乎没有创建额外的行。

**更新**

如果您想使用该框作为控制台窗口的边框，我想这将是***最简单的解决方案***（如果不是唯一的解决方案），不要在您正在绘制的框的底行添加最后一个***-字符。***

**更新二**

您可以尝试使用一个简单的技巧并在绘制最后一行之前动态更改控制台窗口的高度。这将防止窗口滚动。

试试这样的代码：

```
int width = Console.WindowWidth;
int height = Console.WindowHeight;
int i, j;
for (i = 0; i < width; ++i)
{
    Console.Write("-");
}

for (j = 0; j < height - 2; ++j)
{
    Console.Write("|");

    for (i = 0; i < width - 2; ++i)
    {
        Console.Write(" ");
    }

    Console.Write("|");
}

//enlarge window in order to prevent it from being scrolled
Console.WindowHeight += 1;

for (i = 0; i < width; ++i)
{
    Console.Write("-");
}
//restore window's original size
Console.WindowHeight -= 1;
//set cursor inside the border
Console.SetCursorPosition(1, 1); 
```

这应该允许您在窗口中看到整个边框。

**更新三**

**建议的解决方案**

使用上面的代码，但使用`Console.BufferWidth`而不是`Console.WindowHeight`. 它似乎工作正常，不需要修改窗口的尺寸。

# ruby-on-rails - 如何获取用户的所有帖子

> ID：10472070
> 
> 赞同：1
> 
> 时间：2012-05-06T16:14:22.490
> 
> 标签：ruby-on-rails

我的 Rails 应用程序中有一个 User 和 Post 脚手架。我想获取与用户关联的所有帖子。例如，我希望能够做这样的事情：

> 本地主机：3000/users/1/posts

它应该给我所有 user_id = 1 的帖子。我知道如何通过 rails 控制台为特定用户获取所有帖子。我只是想知道我如何才能完成像上面的例子这样的事情。我是否必须在用户控制器中添加另一种方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T16:15:55.980

You can do it without adding new action. Like this:

```
class PostsController < ApplicationController
  def index
    @user = User.find(params[:user_id])
    @posts = @user.posts
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-08T00:56:28.297

另一**行示例**如下，将其添加到您的索引中

```
@posts = User.find(params[:user_id]).posts 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-28T19:22:29.207

我为一个可能有帮助的相关问题写了一个冗长的答案：

[https://stackoverflow.com/a/17911920/321583](https://stackoverflow.com/a/17911920/321583)

# android - ViewFlipper 在 vi ewpager 中

> ID：10472072
> 
> 赞同：1
> 
> 时间：2012-05-06T16:14:39.387
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我想实现这样的东西：[http](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html) ://android-developers.blogspot.in/2011/08/horizo​​ntal-view-swiping-with-viewpager.html 。
我的主视图是一个 Viewflipper，在卡片的两侧有两个视图。如何在 viewflipper 布局上方实现一个 viewpager？我现在的布局是这样的：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout android:id="@id/FlashCardFront" android:background="#3500ffff style="@style/Fill"
xmlns:android="http://schemas.android.com/apk/res/android">
<ViewFlipper android:id="@+id/flipper" style="@style/Fill" android:layout_margin="8.0dip">       
<LinearLayout android:id="@+id/front" android:orientation="vertical" android:background="#ffffffff"  style="@style/Fill">
    <LinearLayout style="@style/FillWrap.LL.FlashCard_Header">

       <ImageButton 
 android:id="@+id/back"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:onClick="true"
 android:src="@drawable/left_arrow"
android:background="#00000000"
 />   

        <TextView android:id="@id/TV_CardNo" android:text="0000" android:layout_weight="1.0" style="@style/Wrap.Text_RightTop" />

        <ImageButton
            android:id="@+id/next"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.14"
            android:background="#00000000"
            android:onClick="true"
            android:src="@drawable/right_arrow" />

        </LinearLayout>

        <LinearLayout android:id="@id/LL_Card" style="@style/FillWrap.LL.FlashCard_Body">
        <TextView android:id="@id/TV_Word" android:text="Word" style="@style/FillWrap.Text_FlashCard_Word" />
        </LinearLayout>

        <LinearLayout style="@style/FillWrap.LL.FlashCard_Footer">
        <RatingBar android:id="@id/RB_Stars_Front" android:progressDrawable="@drawable/ratings_bar" android:numStars="1" android:stepSize="1.0" style="@style/Wrap" />
    </LinearLayout>
</LinearLayout>
<LinearLayout android:orientation="vertical" android:background="#ffffffff"  style="@style/Fill">

    <LinearLayout android:id="@id/RearHeader" style="@style/FillWrap.LL.FlashCard_Header">
          <ImageButton 
 android:id="@+id/rear_back"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:onClick="true"
 android:src="@drawable/left_arrow"
android:background="#00000000"
 />   
        <TextView android:id="@id/TV_CardNo" android:text="0000" android:layout_weight="1.0" style="@style/Wrap.Text_RightTop" />
        <ImageButton
            android:id="@+id/rear_next"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.14"
            android:background="#00000000"
            android:onClick="true"
            android:src="@drawable/right_arrow" />       
    </LinearLayout>
    <LinearLayout android:id="@id/LL_Card1" style="@style/FillWrap.LL.FlashCard_Body">
    <ImageView android:id="@+id/image"  android:layout_width="fill_parent" android:layout_height="fill_parent"></ImageView>        </LinearLayout>
    <LinearLayout style="@style/FillWrap.LL.FlashCard_Footer">
                <TextView android:id="@id/TV_Meaning" android:text="Meaning" style="@style/FillWrap.Text_FlashCard_Meaning" />
    </LinearLayout>
</LinearLayout>
</ViewFlipper> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:54:56.837

页面上的样式是使用名为 viewpagerindicator 的库完成的……由 Jake wharton 完成……检查它是如何工作的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T05:06:31.903

Simply create a `Linearlayout` with the `horizontal` orientation, then add dot image to the layout. And set the code for changing the position of the selected dot inside of the ViewPager pageChangedListner.

Thank you.

# android - android：提示被忽略

> ID：10472077
> 
> 赞同：0
> 
> 时间：2012-05-06T16:15:25.183
> 
> 标签：android, layout, spinner, prompt

我有一个 Spinner，但提示消息被忽略。我找不到原因。

我的布局：

```
<Spinner
       android:id="@+id/spinner"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_marginBottom="15dp"
       android:prompt="@string/age"
       android:drawSelectorOnTop="true"
       android:background="@drawable/spinner_bg" /> 
```

我的代码：

```
spinner = (Spinner) findViewById(R.id.spinner);
    SpinnerAdapter adapter = new SpinnerAdapter(this, R.layout.spinner_item, getApplicationContext().getResources().getStringArray(R.array.spinnerArray));
    spinner.setAdapter(adapter);
    adapter.setDropDownViewResource(R.layout.spinner_item); 
```

微调器适配器：

```
public class SpinnerAdapter extends ArrayAdapter<String>{

public SpinnerAdapter(Context context, int textViewResourceId,
        String[] objects) {
    super(context, textViewResourceId, objects);
}

public View getView(int position, View convertView, ViewGroup parent) {
    View v = super.getView(position, convertView, parent);

    Typeface externalFont=Typeface.createFromAsset(getContext().getAssets(), "fonts/PermanentMarker.ttf");
    ((TextView) v).setTypeface(externalFont);

    return v;
}

public View getDropDownView(int position,  View convertView,  ViewGroup parent) {
    View v =super.getDropDownView(position, convertView, parent);

    Typeface externalFont=Typeface.createFromAsset(getContext().getAssets(), "fonts/PermanentMarker.ttf");
    ((TextView) v).setTypeface(externalFont);

    return v;
} 
```

}

spinner_item 的布局：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
android:layout_width="fill_parent"
android:layout_height="38dp"
android:ellipsize="marquee"
android:gravity="center_vertical|left"
android:minHeight="38dp"
android:paddingLeft="5dp"
android:singleLine="true"
android:textSize="18sp" /> 
```

你有什么主意吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:53:19.507

我*认为*您误解了 android:prompt 的作用......它没有在关闭的微调器中设置文本，它设置了打开的微调器的标题/标题。

```
Closed spinner:     Spinner Item 1

Open Spinner:       Android Spinner Prompt
                    ----------------------
                    Spinner Item 1
                    Spinner Item 2 
```

有几种方法可以将提示放在关闭的微调器显示中。一种方法是在第一个位置插入将加载到您的微调器的虚拟数据，然后让您的听众忽略它（如果它被选中）（我不喜欢这样，因为它会将垃圾放入您的数据存储中）。

另一种选择是创建一个自定义微调器适配器，以将提示作为微调器的第一个条目插入（我喜欢这个，因为它在代码中保留了提示，并使您的数据保持应有的状态......数据）。

希望这可以帮助！祝你好运！

# delphi - How to grant elevation with Delphi

> ID：10472080
> 
> 赞同：6
> 
> 时间：2012-05-06T16:15:35.110
> 
> 标签：delphi, ms-access, delphi-xe2, elevated-privileges

I have written a database app that imports data from an excel file into a Access database.

I have never had trouble to run the app, to insert records into the database, but as soon as I run the function to import data from the Excel into the Access I get the following warning:

The requested operation requires elevation - by die code:

```
LAccess := CreateOleObject('Access.Application'); 
```

What is causing this and is there a way to get around it

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T22:10:44.647

[`CreateOleObject`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Win.ComObj.CreateOleObject)delphi 函数内部调用需要提升的CoCreateInstance [WinApi](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686615%28v=vs.85%29.aspx)方法。你有几个选择来处理这个问题。

1) 向您的应用添加清单，包括[请求的执行级别](http://msdn.microsoft.com/en-us/library/bb756929.aspx) *requireAdministrator*。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
<assemblyIdentity
    name="Your app name goes here"
    processorArchitecture="x86"
    version="5.1.0.0"
    type="win32"/>
<description>your app description goes here</description>
<dependency>
    <dependentAssembly>
        <assemblyIdentity
           type="win32"
           name="Microsoft.Windows.Common-Controls"
           version="6.0.0.0"
           processorArchitecture="x86"
           publicKeyToken="6595b64144ccf1df"
           language="*"
        />
     </dependentAssembly>
  </dependency>
   <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
      <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="requireAdministrator"
          uiAccess="false"/>
      </requestedPrivileges>
    </security>
   </trustInfo>
</assembly> 
```

2) 您可以启动一个提升的辅助进程来执行该任务或创建一个运行提升的 COM 对象，您可以在这些 MSDN 条目中找到更多信息

*   [`Redesign for UAC Compatibility`](http://msdn.microsoft.com/en-us/library/bb756922.aspx)
*   [COM 海拔名称](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679687%28v=vs.85%29.aspx)

# php - How to call a function in ajax to php function and wait for response

> ID：10472083
> 
> 赞同：1
> 
> 时间：2012-05-06T16:16:03.707
> 
> 标签：php, javascript, html, ajax

HTML :

```
<a href="/profile.php?user={$username}&action_request="friend_request">
Friend request
</a> 
```

PHP :

```
if(isset($_GET['user']) && isset($_GET['action_request'])) {
     if(strcmp($_GET['action_request'],"friend_request") == 0) {
        insert_friendship($id_user1,$id_user2);
   }
} 
```

and the function for insert is :

```
 //sql string
   if(sql_insert()) {
      return "Friendship request sent!";
      } else {
       return "Friendship request failed!"; } 
```

P.S I am using smarty engine for templating.

How do i take the url from `<a>` tag with ajax and send it to the php page to call the function then ajax to wait for the respond and send it to the html.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:32:09.240

在您的页面中包含 jquery。

```
<script type="text/javascript">
    document.getElementById("ajax_a").addEventListner("click", function(e){
        e.preventDefault();
        var uri = document.getElementById("ajax_a").getAttribute("href");
        $.ajax({
            url: uri,
            type: "GET",
            data: {},
            dataType: "html",
            success: function(data){
                // data is the value returned by server.
            },
            error : function(){
                alert("some error occured");
                // data is the value returned by server.
            }
        });
    });
</script>

<a id="ajax_a" href="/profile.php?user={$username}&action_request="friend_request">
Friend request
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:31:00.543

对于使用 ajax，您可以使用 jQuery.ajax() [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

并且使用 ajax，你必须在点击`<a>`标签时调用 ajax 函数，并且必须在 ajax 函数上指定 url。

或者

如果您想从`<a>`带有 ajax 的标签中获取 url 并将其发送到 php 页面，您将不得不阻止使用该`<a>`标签的默认点击`e.preventDefault();`并使用该 url 调用 ajax

尝试这样的事情并解决

```
$('selector').click(function(){
e.preventDefault();
var url = $(this).attr('href');
$.ajax({
  url: url,
  success: function(data) {
    //do something
  }
});
}) 
```

在 $(document).ready() 中调用这个函数。

# wpf - Observable Collection is not updating the datagrid

> ID：10472085
> 
> 赞同：3
> 
> 时间：2012-05-06T16:16:25.143
> 
> 标签：wpf, vb.net, observablecollection

I am using a `Dim All_PriceLists As System.Collections.ObjectModel.ObservableCollection(Of BSPLib.PriceLists.PriceListPrime)` where `PriceListPrime` implements Inotify for all properties in it.

I bound the `All_PriceList` to a datagrid as `DataGrid1.ItemsSource = All_PriceLists` but when I do `All_PriceLists=Getall()` where Getall reads and gets the data from the DB, the datagrid is not updating.

It updates only when I hack it this way:

```
DataGrid1.ItemsSource = Nothing
DataGrid1.ItemsSource = All_PriceLists 
```

Could you please tell me where I have gone wrong or what I should implement. Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:20:16.183

您有几种解决问题的方法

*   直接更新 ItemsSource（而不是替换本地成员变量）

    ```
    DataGrid1.ItemsSource = new ObservableCollection(Of PriceListPrime)(GetAll()) 
    ```

*   更新 ObservableCollection （如另一个答案中所述）

    ```
    All_PriceList.Clear(); 
    For Each item in Getall() 
        All_PriceList.Add(item) 
    Next 
    ```

*   将您的 DataContext 设置为视图模型并绑定到视图模型的属性

    ```
    Dim vm as new MyViewModel()
    DataContext = vm
    vm.Items = new ObservableCollection(Of PriceListPrime)(GetAll()) 
    ```

    `Items`视图模型将实现 INotifyPropertyChanged 并在属性更改时引发 PropertyChanged 事件。在 Xaml 中，您的 DataGrid`ItemsSource`将绑定到该`Items`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T16:59:29.630

如果您希望应用程序对您的更改做出反应，您应该更新 ObservableCollection 而不是创建新的。

因此，清除`All_PriceList`收藏并将新项目添加到其中。例子：

```
All_PriceList.Clear();
For Each item in Getall()
  All_PriceList.Add(item)
Next 
```

ObservableCollection 不支持 AddRange，所以你必须一个一个地添加项目或者`INotifyCollectionChanged`在你自己的集合中实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T16:33:34.770

问题是您不是在更新集合，而是在替换它，这是不同的。数据网格仍然绑定到旧列表，更新的数据存储在新的未绑定集合中。因此，您不是在破解解决方案，而是将数据网格绑定到新集合，这是正确的。

如果你想要一个更自动化的解决方案，你应该将你的数据网格绑定到一个数据集/数据表，这是完全不同的代码。

# php - Regex to match text inside HTML tags

> ID：10472087
> 
> 赞同：1
> 
> 时间：2012-05-06T16:16:26.810
> 
> 标签：php, regex, preg-replace

I'm trying to write a regex that will remove HTML tags around a placeholder text, so that this:

```
<p>
    Blah</p>
<p>
    {{{body}}}</p>
<p>
    Blah</p> 
```

Becomes this:

```
<p>
    Blah</p>
{{{body}}}
<p>
    Blah</p> 
```

My current regex is `/<.+>.*\{\{\{body\}\}\}<\/.+>/msU`. However, it will also remove the contents of the tag preceding the placeholder, resulting in:

```
{{{body}}}
<p>
    Blah</p> 
```

I can't assume the users will always place the placeholder inside `<p>`, so I would like it to remove any pair of tags immediately around the placeholder. I would appreciate some help with correcting my regex.

[EDIT]

I think it's important to note that the input may or may not be processed by CKEditor. It adds newlines and tabs to the opening tags, thus the regex needs to go with the `/sm` (dotall + multiline) modifiers.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T16:20:25.307

尝试这个：

```
<[^>]+>\s*\{{3}body\}{3}\s*<\/[^>]+> 
```

在此处查看实际操作：[http ://regexr.com?30s4o](http://regexr.com?30s4o)

这是细分：

*   `<[^>]+>`匹配一个开始的 HTML 标记，仅此而已。
*   `\s*`捕获任何空格（相当于`[ \t\r\n]*`）
*   `\{{3}``{`恰好匹配3 次
*   `body`从字面上匹配字符串
*   `\}{3}``}`恰好匹配3 次
*   `\s*`再次捕获任何空白
*   `<\/[^>]+>`匹配结束 HTML 标记

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:35:23.573

php strip_tags 不适用于您的情况吗？

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

```
<?php
$text = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>';
echo strip_tags($text);
echo "\n";

// Allow <p> and <a>
echo strip_tags($text, '<p><a>');
?> 
```

# objective-c - ios将objc指针转换为struct cgcolorref

> ID：10472088
> 
> 赞同：1
> 
> 时间：2012-05-06T16:16:27.283
> 
> 标签：objective-c, ios, pointers, automatic-ref-counting, cgcolor

我已`ARC`启用并且正在尝试执行以下操作：

```
CGColorRef outerColor = (id)[UIColor colorWithWhite:1.0 alpha:1.0].CGColor; 
```

我尝试的演员导致错误：

```
Implicit conversion of an Objective-C pointer to 'CGColorRef' (aka 'struct CGColor *') is disallowed with ARC 
```

我尝试了很多东西，但我不知道如何完成这个演员表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:27:18.237

您需要连接演员阵容，以便 ARC 了解您在做什么以及如何应对。检查这个问题的公认答案：[ARC and bridged cast](https://stackoverflow.com/questions/7036350/arc-and-bridged-cast)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-14T10:48:59.447

*（代表 OP 发布答案）*。

我正在添加`outerColor`一个数组，所以我这样做了：

```
CAGradientLayer *maskLayer = [CAGradientLayer layer];

CGColorRef outerColor = [UIColor colorWithWhite:1.0 alpha:1.0].CGColor;
CGColorRef innerColor = [UIColor colorWithWhite:1.0 alpha:0.0].CGColor;

maskLayer.colors = [NSArray arrayWithObjects:(__bridge id)outerColor, 
                    (__bridge id)innerColor, (__bridge id)innerColor, (__bridge id)outerColor, nil]; 
```

# android - Java MAT histogram class with "Unknown" tag

> ID：10472091
> 
> 赞同：0
> 
> 时间：2012-05-06T16:16:49.793
> 
> 标签：android, eclipse-memory-analyzer

What does the Unknown -tag mean when you open (Android) heap dump with MAT, go to histogram, the then select e.g. "merge shortest paths..." for your class of interest?

Like here:

```
 class android.view.inputmethod.InputMethodManager @ 0x40b083f8 Unknown 
```

There can be also other tags like Thread or System class with the Unknown.

I ask this as someone claimed that the Unknowns are subject to GC and could thus be ignored in memory leak analysis. I failed to find a reliable source for this. Can someone verify this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:10:51.913

来自[MAT 文档](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Fconcepts%2Fgcroots.html)；

**Unknown**
**未知根类型的对象。某些转储（例如 IBM 便携式堆转储文件）没有根信息。对于这些转储，MAT 解析器将没有入站引用或无法从任何其他根访问的对象标记为这种类型的根。这可确保 MAT 保留转储中的所有对象。**

所以我的假设是 Dalvik 没有某些对象的根信息，或者 MAT 不能完全识别 Dalvik 堆。“未知”类型不应该与 GC'ability 相关。

# c# - WCF - Works fine from a console-based app but fails from an asp.net page

> ID：10472092
> 
> 赞同：1
> 
> 时间：2012-05-06T16:17:20.737
> 
> 标签：c#, .net, wcf

I'm facing some problems with authentication in my WCF, if I consume the service from a console-based app it works fine but if I try from asp.net then I get:

```
The remote server returned an error: (401) Unauthorized.

[WebException: The remote server returned an error: (401) Unauthorized.]
System.Net.HttpWebRequest.GetResponse() +1126
System.ServiceModel.Channels.HttpChannelRequest.WaitForReply(TimeSpan timeout) +81

[MessageSecurityException: The HTTP request is unauthorized with client authentication    scheme 'Anonymous'. The authentication header received from the server was 'Negotiate,NTLM'.]
System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +10259322 
```

I guess I have to configure the IIS where ASP page is hosted, I tried disabling anonymous authentication and enabling Windows Authentication but it does not work.

I'm using BasicHttpBinding and this is my web.config on the server where my WCF is hosted.

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="basicBinding">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows" />
      </security>
    </binding>
  </basicHttpBinding>   
</bindings>
<services>
  <service name="Service1" behaviorConfiguration="ServiceBehavior" >
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="basicBinding" contract="Contract1"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="True"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

The ASP.net and console-based config files are the same so I think I should work on the IIS where the service is hosted.

Please let me know if I should post the code or more information about the config files.

Any advice is welcome.

**EDIT**

This is how I consuming the service on the ASP page,

```
 Client client = new Client("BasicBinding");
    try
    {
        string strResult = client.ProcessTransaction(strRequestDetails);
    }
    catch (FaultException ex)
    {
        lbMessage.Text = ex.Message;
    } 
```

On the server site, this is the line where the exception is being thrown, notice I isolated the authentication issue in this single line,

```
 public string ProcessTransaction(string strRequestDetails)
    {
        return OperationContext.Current.ServiceSecurityContext.WindowsIdentity.Name; 
```

Using asp.net 3.5 and IIS 7.5

# database - VBA：强大的数据库创建

> ID：10472093
> 
> 赞同：4
> 
> 时间：2012-05-06T16:17:23.637
> 
> 标签：database, vba, ms-access-2007

我在尝试使用 adodb 和 adox 创建数据库时找到了这段代码。

[在这里你可以检查原件，它是一样的。感谢作者](http://www.vb-helper.com/howto_ado_create_table.html)

```
Private Sub Command1_Click()
Dim db_file As String
Dim conn As ADODB.Connection
Dim rs As ADODB.Recordset
Dim num_records As Integer

' Get the database name.
db_file = App.Path
If Right$(db_file, 1) <> "\" Then db_file = db_file & _
    "\"
db_file = db_file & "People.mdb"

' Open a connection.
Set conn = New ADODB.Connection
conn.ConnectionString = _
    "Provider=Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=" & db_file & ";" & _
    "Persist Security Info=False"
conn.Open

' Drop the Employees table if it already exists.
On Error Resume Next
conn.Execute "DROP TABLE Employees"
On Error GoTo 0

' Create the Employees table.
conn.Execute _
    "CREATE TABLE Employees(" & _
        "EmployeeId INTEGER      NOT NULL," & _
        "LastName   VARCHAR(40)  NOT NULL," & _
        "FirstName  VARCHAR(40)  NOT NULL)"

' Populate the table.
conn.Execute "INSERT INTO Employees VALUES (1, " & _
    "'Anderson', 'Amy')"
conn.Execute "INSERT INTO Employees VALUES (1, 'Baker', " & _
    "   'Betty')"
conn.Execute "INSERT INTO Employees VALUES (1, 'Cover', " & _
    "   'Chauncey')"
' Add more records ...

' See how many records the table contains.
Set rs = conn.Execute("SELECT COUNT (*) FROM Employees")
num_records = rs.Fields(0)

conn.Close

MsgBox "Created " & num_records & " records", _
    vbInformation, "Done"
End Sub 
```

但是如何使它更健壮，所以，我不想删除 db.

如何检查 db 是否存在以及 db.tables 是否包含我的表？

附加问题：我是对的，这段代码为 ms-access 2007 创建数据库吗？

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:35:01.057

你的问题包括这两个：

1.  *如何检查 db 是否存在以及 db.tables 是否包含我的表？*
2.  *我是对的，这段代码为 ms-access 2007 创建了数据库吗？*

对于#1 的第一部分，使用 Dir() 函数。

```
If Len(Dir("C:\SomeFolder\YourDb.mdb")) > 0 Then
    Debug.Print "db exists"
Else
    Debug.Print "db not found"
End If 
```

对于#1 的第二部分，试试这个功能。 *pTable*是您要检查的表的名称。 *pDbPath*是要检查的 db 文件的完整路径，包括文件名。路径可以是以驱动器号开头的路径，也可以是 UNC 路径 (\\Server\Share\YourDb.mdb)。

```
Public Function TableExists(ByVal pTable As String, _
        Optional ByVal pDbPath As String) As Boolean
    'return True if pTable exists as either a native or linked table '
    'pass any error to caller '
    Dim blnReturn As Boolean
    Dim db As DAO.Database
    Dim tdf As DAO.TableDef

    If Len(Trim(pDbPath)) > 0 Then
        Set db = OpenDatabase(pDbPath)
    Else
        Set db = CurrentDb
    End If

    For Each tdf In db.TableDefs
        If tdf.Name = pTable Then
            blnReturn = True
            Exit For
        End If
    Next tdf

    Set tdf = Nothing
    If Len(Trim(pDbPath)) > 0 Then
        db.Close
    End If
    Set db = Nothing
    TableExists = blnReturn
End Function 
```

关于您的第二个问题，您向我们展示的代码不会为任何 Access 版本创建 db 文件。如果`db_file`不是现有 db 文件的路径，则该代码将在`conn.Open`. 它不会创建丢失的 db 文件。

但是，我怀疑代码是否会编译为 VBA，尽管您在标题中包含了 VBA 并将您的问题标记为 vba。确实，您至少应该先尝试一下，然后再将其包含在 Stack Overflow 上的问题中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T04:51:55.797

要从 VB6/VBA 代码创建 MDB 文件，您可以使用`ADOX`. 这是创建 MDB 文件的示例函数。

```
Public Function CreateMDB(strDBPath As String) As Boolean
'To make code compile add a reference to Microsoft ADO Ext 2.x for DDL and Security 
'(msADOX.dll)
Dim catDB As ADOX.Catalog
Dim tblNew As ADOX.Table
Dim keyPrim As New ADOX.Key

    Set catDB = New ADOX.Catalog

    If Dir(strDBPath) = "" Then
        CreateMDB = False
    End If

    With catDB
        .Create "Provider=Microsoft.Jet.OLEDB.4.0;Locale Identifier=" & _
            1033 & ";Data Source=" & strDBPath
        .ActiveConnection = "Provider=Microsoft.Jet.OLEDB.4.0;" & _
            "Data Source=" & strDBPath
    End With

    Set tblNew = New ADOX.Table
    With tblNew
        .Name = "data"
        With .Columns
            .Append "Field_0", adVarWChar
            .Append "Field_1", adVarWChar
            .Append "Field_2", adVarWChar
            .Append "Field_3", adVarWChar
        End With
    End With
    catDB.Tables.Append tblNew

    Set keyPrim = New ADOX.Key
    With keyPrim
        .Name = "Field_0"
        .Type = adKeyPrimary
        .RelatedTable = "data"
        .Columns.Append "Field_0"
    End With
    catDB.Tables("data").Keys.Append keyPrim

    Set catDB = Nothing
    Set tblNew = Nothing

End Function 
```

# regex - I'm trying to write a shell script to replace a few lines of text in a file with a new value

> ID：10472096
> 
> 赞同：-5
> 
> 时间：2012-05-06T16:17:55.890
> 
> 标签：regex, bash, shell, sed

The rules would be:

*   Delete all lines except the last line which contains: ***link*** and ***href=***
*   Replace the contents of whatever is after: ***href=*** and before: ***.css*** with: ***hello-world***
*   Must maintain no quotes, single quotes or double quotes around the file name

A few examples:

### This is a source file with quotes:

`<link rel="stylesheet" href="css/reset.css">`
`<link rel="stylesheet" href="css/master.css">`

### This is the new source file:

`<link rel="stylesheet" href="hello-world.css">`

### This is a source file without quotes:

`<link rel=stylesheet href=css/reset.css>`
`<link rel=stylesheet href=css/master.css>`

### This is the new source file:

`<link rel=stylesheet href=hello-world.css>`

It does not need to maintain the path of the file name. It however cannot use <> brackets or spaces to determine what needs to be edited because the template language which is writing that line might not use brackets or spaces. The only thing that would remain consistent is *href=[filename].css*.

My bash/sed/regex skills are awful but those tools seem like they will probably get the job done in a decent way? How would I go about doing this?

**EDIT**

To clarify, the end result would leave everything above and below the lines that contain link and href= alone. Imagine that the source file was an html file or any other template file like so:

```
<html>
  <head>
    <title>Hello</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/master.css">
  </head>

  <body><p>...</p></body>
</html> 
```

It would be changed to:

```
<html>
  <head>
    <title>Hello</title>
    <link rel="stylesheet" href="css/hello-world.css">
  </head>

  <body><p>...</p></body>
</html> 
```

The path of the CSS files might be anything too.

```
../foo/bar.css
http://www.hello.com/static/css/hi.css
/yep.css
ok.css 
```

The new file's path would be supplied as an argument of the bash script so the regex should remove the path.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:57:08.023

在[聊天讨论](https://chat.stackoverflow.com/transcript/10934/16-19)之后，使用 PHP 作为命令行脚本的一种解决方案如下所示 -

```
#! /usr/bin/php 
<?php

    $options = getopt("f:r:");
    $inputFile = $options['f'];
    $replacement = $options['r'];
    // read entire contents of input file 
    $inputFileContents = file_get_contents($inputFile);
    // setup the regex and execute the search
    $pattern = '/.*link.*href=["|\']?(.*[\\\|\/]?.*)\.css["|\']?.*/';
    preg_match_all($pattern, $inputFileContents, $matches);
    // remove last occurance of regex 
    // these are the lines we'll want to hang onto
    $matchedLines = $matches[0];
    array_pop($matchedLines);
    // isolate the last css file name
    $matchedFileName = array_pop($matches[1]);
    // first substitution replaces all lines with <link> with 
    // an empty string (deletes them)
    $inputFileContents = str_replace($matchedLines,'',$inputFileContents);
    // second substitution replaces the matched file name
    // with the desired string
    $inputFileContents = str_replace($matchedFileName,$replacement,$inputFileContents);
    //*/
      // save to new file for debugging
      $outputFileName = "output.html";
      $outputFile = fopen($outputFileName,'w+');
      fwrite($outputFile,$inputFileContents);
      fclose($outputFile);
    /*/
      // save changes to original file
      $origFile = fopen($inputFile,'w+');
      fwrite($origFile,$inputFileContents);
      fclose($origFile);
    //*/
    exit();
?> 
```

您可以像这样从命令行执行此脚本 -

```
$ php thisScript.php -f "input.html" -r "hello-world" 
```

*   `-f`是我们正在解析的输入文件。
*   `-r`是 css 文件名的替换字符串（在本例中为“hello-world”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:05:33.983

具体回答，对于这种情况：

如果您包含相同的 css 文件两次，就用户而言，它不会造成任何伤害。
因此，您可以将 css/reset.css 和 css/master.css 都替换为 css/hello-world.css。

可能有更好的方法，但我发现这是一种快速的方法。`<script>`如果您想替换或其他标签，它将专门用于这种情况而不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T20:24:53.090

尝试在 css 之前包含文件的第一部分，然后在 css 下方包含文件的其余部分，并在中间回显正确的 css 行

# jsf - 创建 RichFaces 弹出面板作为 Facelets 子视图/组合不可隐藏

> ID：10472097
> 
> 赞同：0
> 
> 时间：2012-05-06T16:18:15.733
> 
> 标签：jsf, popup, richfaces, facelets, el

说实话，RichFaces 中的弹出面板很难用。涉及到对一些 JavaScript 的多次调用，这使得派生一般工作的东西并不容易。无论如何，我正在尝试以下操作：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"            
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich">

  <h:commandLink>
    <h:graphicImage library="images/icons" name="#{buttonImageFileName}"  />
    <rich:tooltip value="#{buttonTooltipText}" direction="bottomRight" />
    <rich:componentControl target="#{popupId}" operation="show" />
  </h:commandLink>
  <rich:popupPanel modal="true"
                   height="#{popupHeight}"
                   resizeable="#{popupResizable}"
                   onmaskclick="#{componentCallToId}.hide(); return false;"
                   id="#{popupId}">
    <f:facet name="header">
      <h:outputText value="#{popupHeaderText}" />
    </f:facet>
    <f:facet name="controls">
      <h:outputLink value="#" onclick="#{componentCallToId}.hide(); return false;">
        <h:outputText value="X" />
      </h:outputLink>
    </f:facet>
    <p>#{popupSubject}</p>
    <p>
      <h:inputText value="#{inputTextBean[inputTextProperty]}" styleClass="full-width" id="#{inputTextId}" />
    </p>
    <h:panelGrid columns="2" style="margin: 0 auto;">
      <h:commandButton value="OK"
                       action="#{acceptButtonBean[acceptButtonMethod](acceptButtonMethodArg)}"
                       onclick="#{componentCallToId}.hide(); return true;">
        <a4j:ajax execute="@this #{inputTextId}" render="@form" />
      </h:commandButton>
      <h:commandButton value="Cancel" onclick="#{componentCallToId}.hide(); return false;" immediate="true" />
    </h:panelGrid>
  </rich:popupPanel>

</ui:composition> 
```

这将显示一个图像按钮，该按钮会弹出一个简单的输入对话框，该对话框**应该**通过单击弹出窗口外部（onmaskclick =“...”），通过右上角的弹出窗口（`<f:facet>`带有`onclick="..."`）来隐藏，或者按取消`<h:commandButton onclick="...">`。**在 OK 上，应该**提交AJAX 表单，并且弹出窗口也被隐藏。但没有任何反应（无法关闭）：

![在此处输入图像描述](../Images/3e5417bfd32db0f20710e985cbd986af.png)

EL 表达式`#{componentCallToId}.hide(); return false;`是上面的“问题孩子”。它不是那样工作的。

在其**原始的非 Facelets**变体 ( [http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=modalPopup&skin=classic](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=popup&sample=modalPopup&skin=classic) ) 中，控制组件的调用如下所示：

```
<h:commandButton value="Cancel" onclick="#{rich:component('add-root-chapter-popup')}.hide(); return false;" immediate="true" /> 
```

我将以下参数传递给`<ui:include>`：

```
<ui:include src="/subviews/add-node-clink-input-popup.xhtml">
  <ui:param name="buttonImageFileName" value="add.png" />
  ...
  <ui:param name="popupId" value="add-root-chapter-popup" />
  <ui:param name="componentControlCallToId" value="rich:component('add-root-chapter-popup')" />
  ...
</ui:include> 
```

注意长条目（其余部分似乎正在工作 - 甚至是 bean + 方法 + arg 的奇怪语法，但这不是这里的重点）。

**问：**

为什么不`<ui:param name="componentControlCallToId" value="rich:component('add-root-chapter-popup')" />`工作？目前，在弹出窗口之外单击、X'ing 或按 OK 或 Cancel（弹出窗口停留）时没有任何反应。

Firebug 仅显示：

```
syntax error
.hide(); return false; 
```

看起来表达式被评估为空/空字符串。

**怎么了？可以修复吗？**我的替代方案是什么？

* * *

PS：请注意，我之前曾尝试在 Facelets 表达式中使用“popupId”，例如

```
<h:commandButton value="Cancel" onclick="#{rich:component('popupId')}.hide(); return false;" immediate="true" /> 
```

但这具有相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:19:32.010

省略单引号就可以了：

```
<h:commandButton value="Cancel" onclick="#{rich:component(popupId)}.hide(); return false;" immediate="true" /> 
```

我以为它们是 JS 的一部分，但在这里它们似乎是 EL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:46:14.700

你也可以试试这个：- onmaskclick="#{rich:component('cc.attrs.popupId')}.hide()" 如果引号给你带来任何问题，请使用 **"** ; 而不是他们。

我相信您在这里尝试通过自定义组件公开的变量将 id 动态解析到弹出面板。您可能会将 id 的值解析为

popupId="xyz" 如果是这种情况，上述解决方案就可以了。

# gwt - Styling a GWT Button with CSS

> ID：10472098
> 
> 赞同：6
> 
> 时间：2012-05-06T16:18:16.570
> 
> 标签：gwt

I'm trying to apply css with GWT `Button` widget, however I can apply CSS gradient, the "embossed" style of the widget is still there. How can I remove that?

My gwt application is inherting from this theme:

```
<inherits name='com.google.gwt.user.theme.clean.Clean'/> 
```

Als have tried:

```
<inherits name='com.google.gwt.user.theme.standard.Standard'/> 
```

I also have tried adding:

```
.gwt-Button {} 
```

In the main css file that is loaded on the page however the embossed style is still there.

Anyone knows how to remove the embossed style?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T08:19:45.737

### 选项 1：根本不使用主题

如果您不需要默认样式，并且通常希望为页面提供您自己的样式，那么最简单的方法是完全省略`<inherits>`主题的声明。GWT 在不使用主题的情况下工作得很好。

^(（注意：如果您仍然需要主题中的（图像）资源，但没有将 CSS 样式表注入页面，您可以继承`com.google.gwt.user.theme.clean.CleanResources`而不是`com.google.gwt.user.theme.clean.Clean`. 这样它们仍然会自动复制到您的 war 文件夹中。）)

### 选项 2：有选择地关闭按钮主题

但是，如果您通常想使用主题，并且只需要给一些按钮您自己的风格，那么一个简单的解决方案是调用

```
button.removeStyleName("gwt-Button"); 
```

^(注意：`removeStyleName()`您也可以使用`setStyleName("my-Button")`.)

为了方便（并且为了在 UiBinder 中更容易使用），您可能希望派生自己的类，例如

```
package org.mypackage;

public class MyStyleButton extends Button {
    public MyStyleButton(final String html) {
        super(html);
        removeStyleName("gwt-Button");
    }

    /* ... override all the other Button constructors similarly ... */
} 
```

然后可以在 UiBinder 中导入和使用

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
             xmlns:g='urn:import:com.google.gwt.user.client.ui'
             xmlns:my='urn:import:org.mypackage'>

    ...

       <my:MyStyleButton>... 
```

### 选项 3：实际更改 gwt-Button 类属性

如果您想保持按钮的主题外观，并且只更改一些样式属性，那么也可以使用`!important`（如@bouhmid_tun 建议的那样）覆盖预定义样式类中的某些属性。但请注意：属性列表将来可能会发生变化。`.gwt-Button`为方便起见，以下是 GWT 2.4.0 的所有预定义样式类：

```
.gwt-Button {
  margin: 0;
  padding: 5px 7px;
  text-decoration: none;
  cursor: pointer;
  cursor: hand;
  font-size:small;
  background: url("images/hborder.png") repeat-x 0px -2077px;
  border:1px solid #bbb;
  border-bottom: 1px solid #a0a0a0;
  border-radius: 3px;
 -moz-border-radius: 3px;
}
.gwt-Button:active {
  border: 1px inset #ccc;
}
.gwt-Button:hover {
  border-color: #939393;
}
.gwt-Button[disabled] {
  cursor: default;
  color: #888;
}
.gwt-Button[disabled]:hover {
  border: 1px outset #ccc;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T16:34:59.760

为了避免使用 GWT 默认样式，我只`!important`在我的 CSS 文件中使用标签。您将在此处找到这样做的示例：[删除 GWT 生成的绝对位置](https://stackoverflow.com/questions/10096036/remove-absolute-position-generated-by-gwt)。祝你好运！

# vb.net - HOW TO Pass VB .NET Arrays Hashes to VBA via COM?

> ID：10472100
> 
> 赞同：1
> 
> 时间：2012-05-06T16:18:18.717
> 
> 标签：vb.net, vba, com

I am currently trying to pass an array of objects as a result to VBA but Excel is complaining the following:

'Function or interface marked as restricted, or the function uses an automation type not supported in Visual Basic.'

I have looked around on the internet and have seen similar issues but not to one I am trying to do.

My function is declared as follows:

```
<ComClass(Class1.ClassId, Class1.InterfaceId, Class1.EventsId)> _
Public Class Class1

#Region "COM GUIDs"
...
#End Region

Public Sub New()
    MyBase.New()
End Sub

Private Const AT_HOME As Boolean = True
Public Function hello() As System.String()
    Dim a(10) As String

    a(0) = "hello"
    a(1) = "Goodbye"

    Return a
End Function
Public Function CallArray(ByVal serviceName As String, _
                                    ByVal effectiveDate As String,
                                    ByVal serviceParams() As System.Object,
                                    ByRef ArrayRes() As System.Object) As System.Boolean 
```

VBA is complaining about the System.Objects my question is how the heck are you supposed to pass and return arrays from .NET to VBA. Also the data that will be in the ArrayRes() is mixed type, its not just strings etc, its an array of arrays that can contain strings, integers doubles etc.

I chose VB .NET because I assumed it would be possible to map to VBA easier.

One last thing, if System.Object and Arrays in VB .NET is not the way, ie maybe theres another way via collections or lists, then Im open to that. I just need to get this data into VBA. Also I could move over to C# if needs be.

Thanks for any help or recommendations

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:24:21.050

修复了传入的数据不是所需的格式，所以我创建了一个函数来格式化和处理数据

# sqlite - SQLite 查询以查找主键

> ID：10472103
> 
> 赞同：16
> 
> 时间：2012-05-06T16:18:56.923
> 
> 标签：sqlite, schema, primary-key

在 SQLite 中，我可以运行以下查询来获取表中的列列表：

```
PRAGMA table_info(myTable) 
```

这给了我列，但没有关于主键可能是什么的信息。此外，我可以运行以下两个查询来查找索引和外键：

```
PRAGMA index_list(myTable)
PRAGMA foreign_key_list(myTable) 
```

但我似乎无法弄清楚如何查看主键。有谁知道我该怎么做？

注意：我也知道我可以这样做：

```
select * from sqlite_master where type = 'table' and name ='myTable'; 
```

它将给出显示主键的创建表语句。但我正在寻找一种方法来做到这一点，而无需解析 create 语句。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-06T16:28:21.370

`table_info`DOES 给你一个名为 pk （最后一个）的列，指示它是否是主键（如果是主键，则它在键中的索引）或不是（零）。

为了澄清，从文档中：

> 对于不属于主键的列，结果集中的“pk”列为零，对于属于主键的列，它是主键中的列的索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-07-26T01:04:09.543

希望这对某人有所帮助：经过一些研究和痛苦，对我有用的命令是：

```
SELECT l.name FROM pragma_table_info("Table_Name") as l WHERE l.pk = 1; 
```

# html - 1st mobile site

> ID：10472105
> 
> 赞同：3
> 
> 时间：2012-05-06T16:19:08.303
> 
> 标签：html, css, mobile

I'm embarking on my first mobile site. Its a simple one and should be easy enough but I do have some questions:

Please answer any or all q's you can!

1) How do I tell the site to serve the "styles_mobile.css" sheet to mobile traffic? Is there a most commonly used piece of code for this?

2) I have an index page and am creating a new mobile one: "/index_mobile.htm" is that "wrong". Should the mobile page be it's own entity (e.g. /mobile.htm) or based of the existing index page? How do I redirect it? How do I create the address "m.mywebsiteaddress.com"

3) Currently I am making edits on my laptop and then to see what they look like am having to upload them to my ISP to see the effects of my edits on my iphone - how do I do this straight from my Mac?

4) s there a standard structure wrt html elements? E.g. a standard doc has html, head and body elements. HTML5 now has header, nav and footer elements - are there any mobi specific ones I should be aware off?

That's all for now but I can see myself adding to this over the next few days. Any pointers or ad hoc advice welcome

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:58:34.763

我对移动设备的经验是，您需要将其视为完全不同的网站。不同的html，不同的css，不同的js。我见过的许多实现只是将它标记到地址`m.site.com`或只是`www.site.com/m/`. 关键是要分别考虑它们。

关于您的问题：

1.  有各种框架可以帮助根据设备区分流量。诀窍是检查浏览器发送的用户代理来进行区分。根据用户代理，您将向您创建的两个站点中的每一个发送流量。Spring 有一些基本功能来完成这个[spring-mobile](http://www.springsource.org/spring-mobile)。

2.  这可以追溯到我回答的第一部分。我通常会创建一个名为的目录，`/m`其中包含`html`、`css`和`js`。您可以使用基于用户代理的[http 重定向将流量发送到每个站点。](http://en.wikipedia.org/wiki/URL_redirection)至于创建`m.site.com`，这取决于您的设置以及您是否可以创建子域。

3.  您可以直接在 Mac 上发布，具体取决于您使用的软件。在您的 Mac 中，您可以转到系统偏好设置/共享并启用网络共享。这实际上会在你的 mac 中激活一个 apache 服务器。如果您将文件放在 /Users/yourid/Sites/project 中，则可以通过点击[http://yourlocalip/~yourid/project](http://yourlocalip/~yourid/project)来访问它。我是凭记忆这样做的，所以我可能会在这里或那里离开。

4.  我建议您为您的移动网站查看 jquery + jquerymobile。它会在这个过程中带走很多悲伤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T17:03:51.177

1) 我如何告诉网站将“styles_mobile.css”表提供给移动流量？有没有最常用的代码？

**您可以使用其中包含媒体查询的链接样式表：**

```
<link rel="stylesheet" media="only screen and (max-width: 480px)" href="mobile.css"> 
```

2）我有一个索引页面，正在创建一个新的移动页面：“/index_mobile.htm”是“错误的”。移动页面应该是它自己的实体（例如/mobile.htm）还是基于现有的索引页面？我该如何重定向它？如何创建地址“m.mywebsiteaddress.com”

**另一种选择是提供一个页面（index.html），然后在查看区域缩小时开始将浮动元素堆叠在一起。在您的桌面和手机上查看[http://www.html5rocks.com/en/ 。](http://www.html5rocks.com/en/)或者，如果您的手机目前不在您附近，只需调整您的浏览器大小并观察网站开始摆脱多列并创建单列视图。它们只提供一个文件（即 index.html），而不会将移动用户重定向到移动页面（即 mobile.html）。**

3）目前我正在我的笔记本电脑上进行编辑，然后查看它们的外观，必须将它们上传到我的 ISP 以查看我的编辑在我的 iphone 上的效果 - 我如何直接从我的 Mac 上执行此操作？

**在您的 Mac 上安装 Apache 服务器，在正确的端口（端口 80 和 8080 IIRC）上进行端口转发，您将能够在手机上查看页面，而无需不断地将文件上传到 ISP。URL 将是 (http://xx.xxx.xx.xx) 或类似的东西。**

4) 是否有标准结构 wrt html 元素？例如，标准文档有 html、head 和 body 元素。HTML5 现在有页眉、导航和页脚元素 - 是否有任何我应该注意的特定于 mobi 的元素？

**不，移动浏览器呈现与桌面浏览器相同的 HTML 标记。您应该考虑做的一件事是使用 HTML5 doctype（移动浏览器支持），因为即使使用 viewport 元标记，我也很难让使用 XHTML 或 HTML4 doctypes 的“移动”网站在移动浏览器中看起来不错因为这些网站看起来非常缩小。**

这是迄今为止我偶然发现的关于移动 Web 开发的最佳资源。

[http://www.html5rocks.com/en/mobile/mobifying/](http://www.html5rocks.com/en/mobile/mobifying/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T17:10:16.880

前两个答案很好，但我并不完全同意。它们太复杂了。

1.  使用 CSS 媒体查询为不同的屏幕宽度和/或方向设置不同的内容样式。
2.  不要打扰。为了可维护性，您应该只创建一个与媒体查询样式不同的站点。
3.  再次，媒体查询。您可以直接在浏览器中使用和开发/调试，而不是使用`(max-device-width: 480px)`手机。`(max-width)`否则，如果你在 OS X 上，Xcode 附带的 iOS 模拟器可以很好地工作（包括 iPad！）
4.  不，这只是一个正常的网页。

作为旁注，我认为您不应该接受为移动设备加载另一个样式表的建议。加载另一个样式表意味着一个额外的 HTTP 请求。您可以将所有媒体查询样式保留在主样式表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T02:53:12.133

要在“常规”样式表（即桌面样式表）中使用媒体查询，请执行以下操作：

```
/* desktop */
body { background: #FFFFFF; }
header { width: 100%; }

/* queries for devices with a max viewing area of 480px */
@media only screen and (max-width: 480px) {
  body { background: #444444; }
} 
```

上面的 CSS 可以在桌面浏览器中测试。例如，将上面的样式放入样式标签中，然后在浏览器中以大于 480 像素的宽度查看页面（最大化窗口即可）。然后，调整窗口宽度，直到您看到背景变为深色（一旦窗口宽度小于 480 像素，就会发生这种情况）。

# javascript - 使用 jQuery .each() 读取 json 以创建对象数组

> ID：10472106
> 
> 赞同：0
> 
> 时间：2012-05-06T16:19:26.937
> 
> 标签：javascript, jquery, arrays, json

我正在尝试通过读取 json 来创建对象数组。这是相关代码：

```
//president object consctructor
function president(a_presName, a_presDates, a_presNick, a_presImage) {
    this.presName=a_presName;
    this.presDates=a_presDates;
    this.presNick=a_presNick;
    this.presImage=a_presImage;
}

var myPres = new Array();

$(document).ready(function() {

    $.getJSON('Presidents.json', function(data) {

        $.each(data.presidents, function (i, item) {
            myPres[i]=new president(item.presName, item.presDates, item.presNick, item.PresImage);
        });

    });  //end getJSON
    document.write(myPres[1].presName);
}); //end doc ready 
```

这是json：

```
{ "presidents": [ { "presName":"George Washington", "presDates":"1789-1797", "presNick":"Father of His Country", "presImage":"gwashington.gif" }, { "presName":"John Adams", "presDates":"1797-1801", "presNick":"Atlas of Independence", "presImage":"jadams.gif" }, { "presName":"Thomas Jefferson", "presDates":"1801-1809", "presNick":"Sage of Monticello", "presImage":"tjefferson.gif" }, { "presName":"James Madison", "presDates":"1809-1817", "presNick":"Father of the Constitution", "presImage":"jmadison.gif" }, { "presName":"James Monroe", "presDates":"1817-1825", "presNick":"Era-of-Good-Feeling President", "presImage":"jmonroe.gif" }, { "presName":"John Quincy Adams", "presDates":"1825-1829", "presNick":"Old Man Eloquent", "presImage":"jqadams.gif" }, { "presName":"Andrew Jackson", "presDates":"1829-1837", "presNick":"Old Hickory", "presImage":"ajackson.gif" }, { "presName":"Martin Van Buren", "presDates":"1837-1841", "presNick":"The Little Magician", "presImage":"mvanburen.gif" }, { "presName":"William Henry Harrison", "presDates":"1841", "presNick":"Old Tippecanoe", "presImage":"whharrison.gif" }, { "presName":"John Tyler", "presDates":"1841-1845", "presNick":"Accidental President", "presImage":"jtyler.gif" }, { "presName":"James Knox Polk", "presDates":"1845-1849", "presNick":"Young Hickory", "presImage":"jkpolk.gif" }, { "presName":"Zachary Taylor", "presDates":"1849-1850", "presNick":"Old Rough and Ready", "presImage":"ztaylor.gif" }, { "presName":"Millard Fillmore", "presDates":"1850-1853", "presNick":"The American Louis Philippe", "presImage":"mfillmore.gif" }, { "presName":"Franklin Pierce", "presDates":"1853-1857", "presNick":"Young Hickory of the Granite Hills", "presImage":"fpierce.gif" }, { "presName":"James Buchanan", "presDates":"1857-1861", "presNick":"Old Buck", "presImage":"jbuchanan.gif" }, { "presName":"Abraham Lincoln", "presDates":"1861-1865", "presNick":"Honest Abe", "presImage":"alincoln.gif" }, { "presName":"Andrew Johnson", "presDates":"1865-1869", "presNick":"None", "presImage":"ajohnson.gif" }, { "presName":"Ulysses Simpson Grant", "presDates":"1869-1877", "presNick":"Hero of Appomattox", "presImage":"usgrant.gif" }, { "presName":"Rutherford Birchard Hayes", "presDates":"1877-1881", "presNick":"Dark-Horse President", "presImage":"rbhayes.gif" }, { "presName":"James Abram Garfield", "presDates":"1881", "presNick":"None", "presImage":"jagarfield.gif" }, { "presName":"Chester Alan Arthur", "presDates":"1881-1885", "presNick":"The Gentleman Boss", "presImage":"caarthur.gif" }, { "presName":"Grover Cleveland", "presDates":"1885-1889", "presNick":"None", "presImage":"gcleveland.gif" }, { "presName":"Benjamin Harrison", "presDates":"1889-1893", "presNick":"Kid Gloves Harrison", "presImage":"bharrison.gif" }, { "presName":"Grover Cleveland", "presDates":"1893-1897", "presNick":"None", "presImage":"gcleveland.gif" }, { "presName":"William McKinley", "presDates":"1897-1901", "presNick":"Idol of Ohio", "presImage":"wmckinley.gif" }, { "presName":"Theodore Roosevelt", "presDates":"1901-1909", "presNick":"Trust-Buster", "presImage":"troosevelt.gif" }, { "presName":"William Howard Taft", "presDates":"1909-1913", "presNick":"None", "presImage":"whtaft.gif" }, { "presName":"Woodrow Wilson", "presDates":"1913-1921", "presNick":"Schoolmaster in Politics", "presImage":"wwilson.gif" }, { "presName":"Warren Gamaliel Harding", "presDates":"1921-1923", "presNick":"None", "presImage":"wgharding.gif" }, { "presName":"Calvin Coolidge", "presDates":"1923-1929", "presNick":"Silent Cal", "presImage":"ccoolidge.gif" }, { "presName":"Herbert Clark Hoover", "presDates":"1929-1933", "presNick":"None", "presImage":"hchoover.gif" }, { "presName":"Franklin Delano Roosevelt", "presDates":"1933-1945", "presNick":"FDR", "presImage":"fdroosevelt.gif" }, { "presName":"Harry S. Truman", "presDates":"1945-1953", "presNick":"Give 'Em Hell Harry", "presImage":"hstruman.gif" }, { "presName":"Dwight David Eisenhower", "presDates":"1953-1961", "presNick":"Ike", "presImage":"ddeisenhower.gif" }, { "presName":"John Fitzgerald Kennedy", "presDates":"1961-1963", "presNick":"JFK", "presImage":"jfkennedy.gif" }, { "presName":"Lyndon Baines Johnson", "presDates":"1963-1969", "presNick":"LBJ", "presImage":"lbjohnson.gif" }, { "presName":"Richard Milhous Nixon", "presDates":"1969-1974", "presNick":"None", "presImage":"rmnixon.gif" }, { "presName":"Gerald Rudolph Ford", "presDates":"1974-1977", "presNick":"Jerry", "presImage":"grford.gif" }, { "presName":"James Earl Carter Jr.", "presDates":"1977-1981", "presNick":"Jimmy", "presImage":"jecarter.gif" }, { "presName":"Ronald Wilson Reagan", "presDates":"1981-1989", "presNick":"The Gipper", "presImage":"rwreagan.gif" }, { "presName":"George Herbert Walker Bush", "presDates":"1989-1993", "presNick":"Poppy", "presImage":"ghwbush.gif" }, { "presName":"William Jefferson Clinton", "presDates":"1993-2001", "presNick":"Bill", "presImage":"wjclinton.gif" }, { "presName":"George Walker Bush", "presDates":"2001-2009", "presNick":"W", "presImage":"gwbush.gif" }, { "presName":"Barack Hussein Obama", "presDates":"2009-", "presNick":"None", "presImage":"bhobama.gif" } ] } 
```

当我使用 document.write 进行测试时，如果将其放置在之前，它可以正常工作`}); //end getJSON`，但如果在它为空之后立即放置。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:22:48.660

将 document.write 放在 //end getJSON 之后意味着它将在检索 JSON 之前运行。

当数据从服务器返回时，您传递给 .getJSON 的匿名函数会被调用。如果您在 //end getJSON 之后运行 document.write，它会在请求返回之前被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:57:33.593

我不喜欢 jQuery 的 $.each() 我会这样做：

```
function parseJSON(JSONObj){
    var array=new Array();
    var count=0;
    for(var Obj in JSONObj){
        array[count]=JSONObj[Obj];
        count++;
    }
} 
```

请告诉我是否还有其他您想要的

# asp.net-mvc-3 - 使用 ASP.NET MVC3 来自数据库的动态数据的图形图表

> ID：10472111
> 
> 赞同：0
> 
> 时间：2012-05-06T16:20:13.410
> 
> 标签：asp.net-mvc-3, graphael

我想了解如何从数据库中获取数据并在图形图表中显示该数据。
我在 ASP.NET MVC3 中工作，我真的不明白如何让这些东西正常工作。
非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:59:47.610

太好了，我解决了问题！我认为这对其他人也可能有用：

这是控制器代码：

```
 public ActionResult ActionName()
        {
            List<String> data = new List<String>();
            data.Add("legend0_4");
            data.Add("legend1_5");
            data.Add("legend2_8");
            data.Add("legend3_12");
            data.Add("legend4_8");

            return Json(data, JsonRequestBehavior.AllowGet);
        } 
```

这里也是创建饼图的 ajax 端：

jQuery.getJSON("/ControllerName/ActionName", function (data) {

```
// # Init
var levels = [], values = [];

for (var id in data) {
    var compo = data[id].split("_");
    levels.push("%%.%% " + compo[0]);
    values.push(parseInt(compo[1]));
}

var r = Raphael("accountCharts"),
            pie = r.piechart(320, 240, 100, values, { legend: levels, legendpos: "west", href: ["http://raphaeljs.com", "http://g.raphaeljs.com"] });

r.text(320, 100, "Interactive Pie Chart").attr({ font: "20px sans-serif" });
pie.hover(function () {
    this.sector.stop();
    this.sector.scale(1.1, 1.1, this.cx, this.cy);

    if (this.label) {
        this.label[0].stop();
        this.label[0].attr({ r: 7.5 });
        this.label[1].attr({ "font-weight": 800 });
    }
}, function () {
    this.sector.animate({ transform: 's1 1 ' + this.cx + ' ' + this.cy }, 500, "bounce");

    if (this.label) {
        this.label[0].animate({ r: 5 }, 500, "bounce");
        this.label[1].attr({ "font-weight": 400 });
    }
}); 
```

});

# c# - 如何在运行时创建变量以及它在 c# 中的作用域

> ID：10472115
> 
> 赞同：-5
> 
> 时间：2012-05-06T16:20:28.987
> 
> 标签：c#, sql-server-2008

我从数据库中获取字符串`('1','2','7','12')`，我想查询 sqlserve 即

`select subject_nme from subject where subjid=1 && subjid=2 && subjid=7`

使用字符串中的整数。对于查询，我需要创建动态变量以将 subjid 存储到其中并使用它们。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T16:23:20.070

```
Select subject_nme from subject where subjid in ('1','2','7','12') 
```

# ios - iOS 实现“联系人视图控制器”

> ID：10472116
> 
> 赞同：0
> 
> 时间：2012-05-06T16:21:05.307
> 
> 标签：ios, nsfetchedresultscontroller

我想实现类似于 iPhone 的联系人列表的东西。我知道有一个地址簿框架允许我访问设备的联系人，但我想使用存储在我的核心数据数据库中的我自己的联系人。

我正在使用`NSFetchedResultsController`在表格视图中获取和列出我的联系人。

但是，我似乎找不到一种方法来`NSFetchedResultsController`显示按部分组织的联系人，每个部分都是每个联系人姓名的第一个字母。喜欢：

```
Section A: All contacts that start with the letter A
Section B: All contacts that start with the letter B
etc... 
```

我认为我可以使用for 方法中的`sectionNameKeyPath:`参数来做到这一点，但是我应该如何使用它来达到我的目的呢？`init``NSFetchedResultsController`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:48:25.353

您必须首先对数据进行排序并获取每个部分的“键”（A、B、C、D、E）列表。将这些保存为属性上的 NSArray。

实现这个：

```
// Function to load your data
-(void)dataDidLoad
{
// sort the keys
        self.sortedKeysForUsersWithApp = tSortedKeys;
//
        [self.tableView reloadData];
}
-(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
// add a UILabel
    headerLabel.text = [self.sortedKeysForUsersWithApp objectAtIndex:section];
// set the text to the section title
}

-(NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return [NSArray arrayWithObjects:@"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"W", @"X", @"Y", @"Z", @"#", nil];
}

-(NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index {
    //return [self.sortedKeys indexOfObject:title];
    return [self.sortedKeysForUsersWithApp indexOfObject:title];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    //return self.sortedKeys.count;
    return self.sortedKeysForUsersWithApp.count;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSDictionary *tDictionary = self.sortedUsersWithApp;

    //NSString *key = [self.sortedKeys objectAtIndex:section];
    NSString *key = [self.sortedKeysForUsersWithApp objectAtIndex:section];
    return ((NSArray*)[tDictionary objectForKey:key]).count;
} 
```

# entity-framework - 我可以通过 EF Code First 更改字符串列生成的约定吗？

> ID：10472119
> 
> 赞同：1
> 
> 时间：2012-05-06T16:21:11.337
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

最终使用一个非常具体的示例来解决更一般的问题：如何配置 Code First 列生成的列类型约定以使用`nvarchar(50)`而不是`nvarchar(MAX)`字符串列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:19:08.577

您可以通过两种方式更改默认数据库类型：

首先，您可以为属性添加适当的属性。的注释`[StringLength(50)]`指定长度为 50。

其次，您可以使用`StringPropertyConfiguration`方法配置属性。

```
var entityTypeConfiguration = modelBuilder.Entity<YourEntityType>;
entityTypeConfiguration.Property(t => t.StringProperty).HasMaxLength(50); 
```

您可以检查其他`StringPropertyConfiguration`方法以查看可用于配置的其他选项。

# php - 显示可能通过 HTTP POST (PHP + MySQL) 更改的项目列表的最佳做法是什么

> ID：10472127
> 
> 赞同：5
> 
> 时间：2012-05-06T16:22:25.233
> 
> 标签：php, mysql, html, forms

我正在为自己创建一个库存系统，其中包含一个项目列表（包括描述、计数、最后使用日期等），其中还包含项目的状态。在最基本的层面上，我列出了 MySQL 查询（SELECT * FROM Items）中的所有项目，以及它们在 SELECT HTML FORM 元素中的状态（int 数据类型，0/1/2 状态指示器）。

我希望能够更新此列表中的任何项目，而不必解析列出的每个项目并与 SQL 服务器的内容进行比较。我想这不是最佳实践，实现这一目标的更好方法是编译正在更改的项目列表并通过 HTTP POST 提交它们。这个对吗？实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:33:06.333

使用阿贾克斯。干净简单。快速实现的方法是使用 JQuery。

```
<select id="target">
    <option value="option1" selected="selected">Option 1</option>
    <option value="option2">Option 2</option>
  </select> 
```

javascript

```
$('#target').change(function () {
$.ajax({

    type: "POST",
    url: "page.php",
    data: 'id=something' ,
    success: function (msg) {
        //after php response
    }
}); 
```

});

查看[更改](http://api.jquery.com/change/)和[ajax](http://api.jquery.com/jQuery.ajax/)

# php - Facebook 应用程序获取用户信息

> ID：10472128
> 
> 赞同：1
> 
> 时间：2012-05-06T16:22:24.907
> 
> 标签：php, facebook, facebook-like

我正在尝试编写一个 Facebook 应用程序，一旦安装在页面上，该应用程序将提供一个简单的表单，一旦填充此表单，它将使用该用户的用户名或用户 ID 创建一个新表。

到目前为止，我已经使用外部 php 文件启动并运行 FBML 表单来处理它，我如何将用户名或用户 ID 获取到我的表单 php 操作文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:47:02.000

您使用的是 PHP SDK 还是 javascript SDK？如果您使用的是 PHP SDK，就这么简单：

```
require_once("facebook.php");

$facebook = new Facebook(array(
        'appId'  => 'YOUR_APP_ID',
        'secret' => 'YOUR_APP_SECRET',
));

$user = $facebook->getUser(); // This is the FB user ID
$username;
if ($user) {
    try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
        $username = $user_profile['username']; // this is the facebook username.
        // If the user hasn't set it manually, it will be something
        // like "john.doe.50"
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
} 
```

# c - 更改 Win32 窗口的父级时为什么要圆角？

> ID：10472129
> 
> 赞同：2
> 
> 时间：2012-05-06T16:22:25.653
> 
> 标签：c, windows, winapi, visual-c++, parent

我正在尝试学习如何使顶级 Win32 窗口成为另一个窗口的子窗口。

当我更改窗口的父级时，我仍然会得到难看的圆角，就好像它是一个带有圆形标题栏的顶级窗口一样。为什么？我该如何解决这个问题？（我无法`WM_UPDATEUISTATE`提供帮助，但我也不确定如何正确使用它。）

![截屏](../Images/6193f795b96902cea7019de269429c5e.png)

```
#include <tchar.h>
#include <windows.h>
#include <commctrl.h>
int _tmain()
{
    WNDCLASS wndClass = {
        0, &DefWindowProc, 0, 0, NULL, NULL, LoadCursor(NULL, IDC_ARROW),
        GetSysColorBrush(COLOR_3DFACE), NULL, TEXT("MyWindowClass")
    };
    ATOM atom = RegisterClass(&wndClass);
    HWND hWnd = CreateWindow(MAKEINTATOM(atom), TEXT("Win"),
        WS_OVERLAPPEDWINDOW | WS_VISIBLE, CW_USEDEFAULT, CW_USEDEFAULT,
        CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, NULL, NULL);
    HWND hWndChild = CreateWindowEx(WS_EX_CLIENTEDGE,
        WC_EDIT, TEXT("Control"), WS_OVERLAPPEDWINDOW | WS_VISIBLE,
        10, 10, 86, 24, NULL, NULL, NULL, NULL);
    SetParent(hWndChild, hWnd);                     // Change the parent
    SetWindowLong(hWndChild, GWL_STYLE,             // Set child styles
        GetWindowLong(hWndChild, GWL_STYLE)
            & ~(WS_OVERLAPPED | WS_POPUP | WS_CAPTION | WS_SYSMENU |
                WS_THICKFRAME | WS_MINIMIZEBOX | WS_MAXIMIZEBOX)
            | WS_CHILDWINDOW);
    SetWindowPos(hWndChild, NULL, 0, 0, 0, 0,       // Refresh
        SWP_NOMOVE | SWP_NOZORDER | SWP_NOACTIVATE
            | SWP_NOOWNERZORDER | SWP_NOSIZE | SWP_FRAMECHANGED);
    BOOL bRet;
    MSG msg;
    while ((bRet = GetMessage(&msg, hWnd, 0, 0)) != 0 && bRet != -1)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:59:52.633

这似乎在原则上是可能的，但实际上很难做到“正确”（根据雷蒙德的评论）。

我发现这`SetWindowRgn(hWnd, NULL, TRUE);`可以解决问题，但我认为它不正确——可能还有其他我错过的东西。所以正确的解决方案可能是一开始就正确地构造对象。

# javascript - Facebook 应用程序出错

> ID：10472132
> 
> 赞同：0
> 
> 时间：2012-05-06T16:22:45.897
> 
> 标签：javascript, jquery, facebook

我不是 Facebook 应用专家。我从 FB 网站获取了这段代码，并对其进行了修改以使其与我的应用程序 ID 一起使用（这是我唯一更改的内容。我还添加了一些警报）。然后我尝试从本地网页使用此代码（即：该页面在我的桌面上，但我的笔记本电脑已连接到 Internet）。

每当我运行此代码时，都会弹出一个浏览器弹出窗口，显示此错误：“MyAppName 发生错误。请稍后再试。”

有人能告诉我这里发生了什么吗？似乎 FB.getLoginStatus 也从未被调用过。

任何帮助表示赞赏。

```
// initialize the library with the API key
FB.init({ appId: 'myAppID',frictionlessRequests:true });

// fetch the status on load
FB.getLoginStatus(function(response) {
if (response.status === 'connected') {
// the user is logged in and has authenticated your
// app, and response.authResponse supplies
// the user's ID, a valid access token, a signed
// request, and the time the access token 
// and signed request each expire
var uid = response.authResponse.userID;
var accessToken = response.authResponse.accessToken;
} else if (response.status === 'not_authorized') {
alert("1\. not");
// the user is logged in to Facebook, 
// but has not authenticated your app
} else {
alert("2\. alert");
// the user isn't logged in to Facebook.
}
});

$('#login').bind('click', function() {
FB.login(handleSessionResponse);
});

$('#logout').bind('click', function() {
FB.logout(handleSessionResponse);
});

$('#disconnect').bind('click', function() {
FB.api({ method: 'Auth.revokeAuthorization' }, function(response) {
clearDisplay();
});
});

// no user, clear display
function clearDisplay() {
$('#user-info').hide('fast');
}

// handle a session response from any of the auth related calls
function handleSessionResponse(response) {
// if we dont have a session, just hide the user info
alert("entered handleSessionResponse");
if (response.authResponse) {
alert('Welcome!  Fetching your information.... ');
FB.api('/me', function(response) {
alert('Good to see you, ' + response.name + '.');
});
} else {
alert('User cancelled login or did not fully authorize.');
}
if (!response.session) {
clearDisplay();
return;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:38:48.370

您是否将属性更改为`myAppID`您正在使用的 Facebook 应用程序的 ID？

```
FB.init({ appId: 'myAppID',frictionlessRequests:true }); 
```

`myAppID`应该包含一个唯一的 Facebook 应用 ID，您可以在 Facebook 应用页面上获取该 ID 。也许您只是复制了代码而没有更改它。

# three20 - 如何为 TTStyledTextLabel 设置链接字体

> ID：10472134
> 
> 赞同：2
> 
> 时间：2012-05-06T16:22:49.493
> 
> 标签：three20, uifont, ttstyledtextlabel

所以，我对 Three20 还很陌生，但到目前为止，收益已经超过了让事情正常进行所付出的痛苦。

我正在使用一些 TTStyledTextLabels，我需要为链接使用特定的字体。我已经覆盖了 TTDefaultStyleSheet 并添加了一个新样式，如下所示：

```
- (TTStyle*)futuraStyle {
    return [TTTextStyle styleWithFont:[UIFont fontWithName:@"Futura-CondensedMedium" size:20] color:kColorTextLink next:nil];
} 
```

我可以使用标签将此样式应用于普通文本，但它似乎不会影响链接。

我发现如果我将样式类直接添加到链接中，如

```
<a href="url" class="styleName">link!</a> 
```

然后链接确实以正确的字体显示。但是，它们不再是可点击的！怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:40:23.513

知道了！

用双破折号设置链接中的名称，然后使用 UIConstrolState 参数调用链接样式，一切都会正常工作：

```
- (TTStyle*)futuraStyle:(UIControlState)state{
 if(state==UIControlStateNormal){
    return [TTTextStyle styleWithFont:[UIFont fontWithName:@"Futura-CondensedMedium" size:20] color:kColorTextLink next:nil];
 }else{
    return [TTTextStyle styleWithFont:[UIFont fontWithName:@"Futura-CondensedMedium" size:20] color:kColorTextLinkHiglighted next:nil];
 }
} 
```

在你的文字中：

```
<a href="url" class="futuraStyle:">link!</a> 
```

# css - 为什么标题工具提示不适用于浮动元素？

> ID：10472139
> 
> 赞同：0
> 
> 时间：2012-05-06T16:23:39.057
> 
> 标签：css, css-float

我有一个浮动元素，其全部目的是显示一个“x”，表示您可以删除一些东西：

```
.remove_button{
background-color:#ff3300;
color:#ffffff;
font-family:Courier New,sans-serif;
font-weight:900;
font-size:20px;
float:right;
border-radius:5px;
padding:0px 6px 0px 6px;
margin-right:15px;
}

<div class="remove_button" title="Remove">x</div> 
```

它确实在红色背景上显示了一个整洁的小“x”（无需制作图片，我不擅长），但问题是当鼠标悬停在按钮上时，标题属性会显示在按钮内，并作为工具提示：

```
------xRemove------   one '-' is one pixel of padding 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:22:31.117

尝试这个，

```
.remove_button{
background-color:#ff3300;
color:#ffffff;
font-family:Courier New,sans-serif;
font-weight:900;
font-size:20px;
float:right;
border-radius:5px;
padding:0px 6px 0px 6px;
margin-right:15px;
position:relative;
} 
```

​ .tip{ 位置：绝对；显示：无；边框：1px 实心#aab; 背景：#eef; 填充：0 3px；左：15px；顶部：25px；}

```
.remove_button:hover .tip{
display:block;
} 
```

​​​​​​​​​​​​</p>

# ruby-on-rails - 在 Rails 中运行 ruby 脚本

> ID：10472141
> 
> 赞同：3
> 
> 时间：2012-05-06T16:23:46.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在ruby中做了一个脚本，现在我需要在一个rails应用程序中运行它。我有点迷茫，但我有一个控制器，并希望通过 GET /service /:id 返回此脚本的结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:30:07.933

根据评论，您似乎想将其变成可以从控制器调用的方法。

简单的。

在相应模型中为您调用它的控制器定义方法（或您希望在其中定义方法的任何模型），然后从控制器调用它。

假设您有一个 ScriptRunner 模型，并且您想从某个控制器的显示操作中调用它。

在您的 ScriptRunner 模型中，只需执行

```
def runscript(id)
...
end 
```

在你的控制器中，做

```
def show
  ScriptRunner.runscript(params[:id])
  @service = Service.find_by_id(params[:id])
end 
```

..或任何你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T17:21:13.507

Sergio Tulentsev 方法是正确的，只需从中创建一个模型类并从控制器调用模型方法。

或者，这是错误和hacky，您可以直接从控制器调用您的ruby脚本

```
def get
  @results = system "ruby your_ruby_script.rb" 
end 
```

# java - windows下如何获取特定文件的详细信息？

> ID：10472144
> 
> 赞同：2
> 
> 时间：2012-05-06T16:24:36.520
> 
> 标签：java, php, windows, vb.net, properties

我可以在 Windows 下获取文件详细信息/属性的最简单方法是什么？

我不是在谈论通用属性（例如文件大小，创建日期），而是由 variuos 软件编写的那些。在我的特殊情况下，我需要为 jpg 图像文件获取名为“拍摄日期”的详细信息。

我可以使用 PHP、Java 或 VB.NET，无论哪种更容易。

我的最终目标：我在手机上使用不同版本的 Android 拍摄了一堆图像。它们都以不同的命名约定命名，其中大多数只是 IMG_[consecutive_numbers].jpg 之类的名称。所以我想重命名它们，但为此我需要它们的原始创建日期，并且由于我已经将它们从我的电脑移动到手机并返回了很多次，我不能相信“创建日期”属性。我发现它们都有一个由相机设置的属性，称为“拍摄日期”，它仍然完好无损且有效。

提前致谢！

PS：

这就是我需要的：

![在此处输入图像描述](../Images/c9c0cc53403714a47a6ad2490699aa1e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:42:54.780

这是你想要的？ [http://php.net/manual/en/function.exif-read-data.php](http://php.net/manual/en/function.exif-read-data.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T16:43:04.047

我相信您发布的照片​​实际上显示了从 exif 数据中提取的内容。

了解这一点后，您可以使用任何能够提取 exif 数据的语言。

对于 Java，它们不是本地方式，因此您可以使用诸如[http://www.drewnoakes.com/code/exif/之类的库](http://www.drewnoakes.com/code/exif/)

我是 ava 开发人员，所以我提供了 Java 选项；但是，这可以用任何语言完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:00:25.690

```
Dim finfo As New System.IO.FileInfo(fdialog.FileName) 
```

现在您可以使用所有的文件信息属性。
问候 ...

# node.js - Expressjs 会话仅在本地主机上持续存在

> ID：10472148
> 
> 赞同：2
> 
> 时间：2012-05-06T16:24:50.873
> 
> 标签：node.js, express

我在 node/express 中创建了一个简单的网页，它有一个简单的登录系统。我测试用户是否登录的方式基本上是检查 req.session.user 是否存在，它是在登录时创建的，并且会话在注销时被销毁。

只要客户端连接到[http://localhost:8000](http://localhost:8000)就可以很好地工作，但是，如果我连接到[http://10.0.1.6:8000](http://10.0.1.6:8000) ，则会在每个请求上创建一个新的会话对象，这意味着我永远无法检查是否用户实际上已经登录。

为什么是这样？我需要连接到[http://10.0.1.6:8000](http://10.0.1.6:8000)，因为我正在从 android 测试我的客户端（其中 localhost 是 android 设备，而不是我的服务器/计算机）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:15:05.723

傻我，累了就停止编程。我在本地运行 index.html 文件，而不是从服务器运行（跨域 cookie？我在你面前笑！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:05:23.860

您可以尝试与您的应用建立会话。

```
var app = express.createServer();
app.use(express.cookieParser(...));
app.use(express.session(...)); 
```

根据文档，您还必须`cookieParser()`在设置会话之前使用。

[http://expressjs.com/guide.html](http://expressjs.com/guide.html) [http://www.senchalabs.org/connect/middleware-session.html](http://www.senchalabs.org/connect/middleware-session.html)

# gwt - 更改 TreeItem 的不透明度

> ID：10472149
> 
> 赞同：0
> 
> 时间：2012-05-06T16:24:56.677
> 
> 标签：gwt

我有一个使用 gwt 的服务器和客户端。在我的客户页面中，我显示了一个树项。

我想做以下其中一项： - 调用函数时禁用树项。- 在调用函数时使整个客户端页面或仅树项不透明。

通过变得不透明，我想做与使用 eclipse 调试项目时发生的相同的事情，然后我停止并且在客户端页面中得到以下信息

GWT Code Server Disconnected 很可能，您关闭了 GWT 开发模式。或者，您可能已经失去了网络连接。要解决此问题，请尝试重新启动 GWT 开发模式并刷新此页面。

请给我一些关于如何做以及是否可能的指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:56:47.573

您为函数调用创建一个处理程序，并在调用函数时添加样式。因为 GWT 与 javascript 一起工作，所以它会在运行时改变你的外观。

```
item.addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent event) {
             event.getItem().setStyleName("newStyle");
        }            
    }); 
```

并在 CSS 中定义你的风格：

```
newStyle: {
      ...
      your style definition
} 
```

# python - 如何在 GDK 中获取不包括 Unity 侧面板的屏幕大小

> ID：10472150
> 
> 赞同：10
> 
> 时间：2012-05-06T16:24:58.113
> 
> 标签：python, screen-size, gdk

我正在尝试让 Guake 终端在 Unity 中正常工作。它的窗口宽度等于屏幕宽度。但是由于 Unity 左栏窗口的右边框变得不可见。所以，我想为窗口设置适当的宽度。它必须小于实际窗口大小。并且代码必须在有或没有 Unity 的情况下都能正常工作。

这就是 Guake 如何确定其窗口的位置和大小：

```
def get_final_window_rect(self):

    """Gets the final size of the main window of guake. The height
    is the window_height property, width is window_width and the
    horizontal alignment is given by window_alignment.
    """
    screen = self.window.get_screen()
    height = self.client.get_int(KEY('/general/window_height'))
    width = 100
    halignment = self.client.get_int(KEY('/general/window_halignment'))

    # get the rectangle just from the first/default monitor in the
    # future we might create a field to select which monitor you
    # wanna use
    window_rect = screen.get_monitor_geometry(0)
    total_width = window_rect.width
    window_rect.height = window_rect.height * height / 100
    window_rect.width = window_rect.width * width / 100

    if width < total_width:
        if halignment == ALIGN_CENTER:
            window_rect.x = (total_width - window_rect.width) / 2
        elif halignment == ALIGN_LEFT:
            window_rect.x = 0
        elif halignment == ALIGN_RIGHT:
            window_rect.x = total_width - window_rect.width
    window_rect.y = 0
    window_rect.width = 250
    return window_rect 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:30:45.877

所以你想从你的总宽度中减去统一启动器的宽度。可以使用 gconf 确定此大小以获取启动器图标的值：

```
self.client.get_int('/apps/compiz-1/plugins/unityshell/screen0/options/icon_size') 
```

当然，您还想知道当前正在运行的会话是否确实是统一的：

```
os.environ.get('DESKTOP_SESSION')  == 'ubuntu' 
```

似乎是一个很好的解决方案。（http://stackoverflow.com/questions/2035657/what-is-my-current-desktop-environment）

# javascript - 独立的断言库？

> ID：10472152
> 
> 赞同：26
> 
> 时间：2012-05-06T16:25:15.940
> 
> 标签：javascript

当我突然想到我应该先在 StackOverflow 上询问是否有必要时，我几乎将 YUI 断言模块移植到独立库。但是我完成了库：

YUIPort：[https ://github.com/gso/YUIPort](https://github.com/gso/YUIPort)

但我想我也会适当地问。是否有任何高质量的断言函数独立库 - 这些可能非常有用，例如，检查传递给函数的参数的有效性（可以节省大量调用调试器的时间）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-07T10:34:11.030

*截至 2012 年 5 月 7 日*

经过一些简短的研究，从最简约的开始：

*   [assert.js](https://github.com/Jxck/assert) - 节点断言函数的端口
*   [jShould](https://github.com/eliperelman/jShould) - QUnit 扩展
*   [should.js](https://github.com/visionmedia/should.js) - 节点库
*   [expect.js](https://github.com/LearnBoost/expect.js) - 基于 should.js，独立
*   [YUIPort](https://github.com/gso/YUIPort) - YUI 库，但独立
*   [chai](https://github.com/logicalparadox/chai) - 节点和浏览器，插件公司。对于 jQuery
*   [expectThat](https://github.com/dmohl/expectThat) - CoffeeScript

我不得不承认我确实倾向于同意[DailyJS 上的评论](http://dailyjs.com/2012/02/23/chai/#comment-447866439)：

> 我不明白为什么每个人都喜欢这些冗长的断言库。

尽管我不是 CoffeeScript 用户，但我确实倾向于使用简单的 assert.js 样式语法，而不是所有这些链接。

这些库正在开发的功能包括：

*   可插入主要测试套件（无需在编码时在两个库之间切换）
*   在不更改库的情况下对服务器端（节点）和客户端进行编码
*   集成到主要的 Web 框架（例如 JQuery）中

一些主要的测试套件包括：

*   [jQuery 的 QUnit](http://docs.jquery.com/QUnit)
*   [摩卡](http://visionmedia.github.com/mocha/)
*   [茉莉花](http://pivotal.github.com/jasmine/)
*   [js-测试驱动程序](http://code.google.com/p/js-test-driver/)
*   [YUI 测试](http://yuilibrary.com/projects/yuitest/)
*   [Sinon.JS](http://sinonjs.org/)

主要的[Web 框架](https://web.archive.org/web/20140518164841/http://javascriptlibraries.com/)通常包含自己的测试套件。

日志记录方面，有[关于可用库的讨论](https://web.archive.org/web/20150810100502/http://ajaxpatterns.org/Logging#Tool_Support)。乍一看，它们似乎还没有赶上服务器端 JS。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-07T10:36:15.533

```
function assert(condition, message) {
    if (!condition) throw new Error(message)
} 
```

# algorithm - 排序一些节点的算法

> ID：10472155
> 
> 赞同：0
> 
> 时间：2012-05-06T16:25:25.570
> 
> 标签：algorithm, nodes

我正在尝试找到一个合适的算法来解决这个问题：假设我有一些（定向图）节点。每个节点可能有也可能没有父节点（意味着最多一个父节点）。假设一个节点的这个符号：(id, id_parent)。一些节点将是 (id_i, NULL) 而将有节点 (id_j, id_i) 作为 id_i 的“儿子”。按特定顺序排列这些节点的数组，我想让它们按以下顺序排序：儿子的儿子的儿子的儿子的儿子，等等。

示例：节点 (1, NULL), (2,NULL), (3,1), (4,3), (5,2), (6,3)

排序后的数组将是： (1,NULL), (3,1), (4,3), (6,3), (2, NULL), (5,2) 。一种深入的树探索。

哪种算法适合实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:28:06.143

如果该图没有循环 - 它是一个[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)，并且您正在寻找[拓扑排序](http://en.wikipedia.org/wiki/Topological_ordering)。

如果它有循环 - 没有这样的排序，因为在循环中，会有一个节点，它的儿子也是它的祖先。

编辑：如果图表是森林（树的不相交联合） - 那么来自源的简单[DFS](http://en.wikipedia.org/wiki/Depth-first_search)就可以了。只需构建图（就是`O(nlogn)`排序，如果还没有排序，或者`O(n)`使用[基数排序](http://en.wikipedia.org/wiki/Radix_sort)），找到源列表，对每个源做DFS，每次访问一个节点，将其存储在一个输出中大批。在有未发现的顶点时进行迭代。

# google-refine - Cell.cross() 在 Google Refine 项目中返回错误

> ID：10472156
> 
> 赞同：3
> 
> 时间：2012-05-06T16:25:31.363
> 
> 标签：google-refine

我正在尝试根据我的主要项目的 Date 列创建一个新列，该列从另一个 Google Refine 项目中提取时间线事件：

cell.cross("Clean5 Timeline", "TimelineDate").cells["TimelineEvent"].value[0]

两个 Google Refine 项目中的日期格式相同。但它不填充任何单元格，我收到此错误：

错误：无法从 null 检索字段

这 — cell.cross("Clean5 Timeline", "TimelineDate") — 为应该匹配的行返回 [ ]。

这 — cell.cross("Clean5 Timeline", "TimelineDate").cells["TimelineEvent"] — 为这些行返回 null。

我直接从 GREL 帮助文件中复制了语法：[http](http://code.google.com/p/google-refine/wiki/GRELOtherFunctions) ://code.google.com/p/google-refine/wiki/GRELOtherFunctions 。谁能建议我可能会忽略什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:46:10.103

如果无法访问您的项目，将很难回答这个问题，但我建议的第一件事是您缩减您的表达式以找出 null 的确切来源。

自从

```
cell.cross("Clean5 Timeline", "TimelineDate") 
```

正在返回一个空数组（[]），基于该结果的任何内容都不会起作用。

我可以想到三个可能的问题：1）项目名称错误，2）列名错误，3）数据值不匹配（或Refine认为它们不匹配），或4）您遇到了 Refine 2.5 中存在的 cross() [缓存错误。](https://github.com/OpenRefine/OpenRefine/issues/432)

如果您遇到错误，重新启动 Refine 服务器应该会清除缓存，并且它也在当前源存储库中修复。该修复程序将包含在 OpenRefine 2.6 中。

# html - Firefox 12，无法播放声音文件。不支持“音频/mp3”的指定“类型”

> ID：10472159
> 
> 赞同：4
> 
> 时间：2012-05-06T16:25:58.347
> 
> 标签：html, firefox, audio

这是HTML：

```
<audio controls="controls" tabindex="0">
    <source type="audio/ogg" src="/Public/audio/ding.ogg"></source>
    <source type="audio/mp3" src="/Public/audio/ding.mp3"></source>
    Your browser does not support the audio element.
</audio> 
```

播放器在最新版本的 Chrome ( *18* ) 中显示得很好。

而在 Firefox 12 中，播放器在初始页面加载时闪烁，然后逐渐淡出。

这是我通过 Firebug 检查时看到的错误消息：

> 不支持“application/octet-stream”的 HTTP“Content-Type”。加载媒体 > 资源[http://localhost:18214/Public/audio/ding.ogg](http://localhost:18214/Public/audio/ding.ogg)失败。
> 
> 不支持“音频/mp3”的指定“类型”。媒体资源 /Public/audio/ding.mp3 加载失败。
> 
> 未能加载所有候选资源。媒体加载暂停。

如何在 Firefox 12 中播放音频文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T16:30:55.893

确保您的服务器为 .ogg 文件发送正确的内容类型。根据您的服务器`application/octet-stream`在应该`application/ogg`（或可能`audio/ogg`）发送的错误。

由于您将 ASP.MVC3 与 IIS7 一起使用，因此不要忘记为 .ogg 文件添加 MIME 类型。 [http://technet.microsoft.com/en-us/library/cc725608%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc725608%28v=ws.10%29.aspx)

`application/ogg`

添加该 MIME 类型后，IIS 将正确地为您的 .ogg 文件提供服务，并且播放器将正常工作。

# wpf - Datagrid 列集合更改事件

> ID：10472161
> 
> 赞同：0
> 
> 时间：2012-05-06T16:26:16.417
> 
> 标签：wpf, datagrid, add

我使用此代码从数据网格中添加或删除列。每个列标题我都有鼠标进入和离开事件。对于新列，我还想在插入数据网格后添加相同的事件处理程序。

```
 private void Columns_CollectionChanged(object sender, System.ComponentModel.CollectionChangeEventArgs e)
     {
        if (e.Action == CollectionChangeAction.Add)
        {
            int columnPosition = (this.Columns.Count - 1);
            DataGridTextColumn column = new DataGridTextColumn();
            column.Header = (e.Element as DataColumn).ColumnName;
            column.Binding = new Binding(string.Format("[{0}]", column.Header.ToString()));
            this.Columns.Insert(columnPosition, column);

            DataGridColumnHeader columnHeader = DataGridHelper.GetColumnHeader(this, columnPosition);
            if (columnHeader != null)
            {
                columnHeader.MouseEnter += new MouseEventHandler(ColumnHeader_MouseEnter);
                columnHeader.MouseLeave += new MouseEventHandler(ColumnHeader_MouseLeave);
            }
            SetAutomappingOnOff = false;
        }
        else if (e.Action == CollectionChangeAction.Remove)
        {
            DataColumn column = e.Element as DataColumn;
            DataGridColumn toRemove = (from DataGridColumn dc in this.Columns
                                       where dc.Header != null && dc.Header.ToString() == column.ColumnName
                                       select dc).First();
            this.Columns.Remove(toRemove);
            SetAutomappingOnOff = false;
        }
    } 
```

**<编辑>**

数据网格助手

```
public static class DataGridHelper 
{ 
    public static DataGridColumnHeader GetColumnHeader(DataGrid dataGrid, int index) 
    { 
        DataGridColumnHeadersPresenter presenter = FindVisualChild<DataGridColumnHeadersPresenter>(dataGrid); 
        if (presenter != null) { 
             return (DataGridColumnHeader)presenter.ItemContainerGenerator.ContainerFromIndex(index)‌​; 
        } 
        return null; 
    }
} 
```

**</编辑>**

但是即使我可以看到该对象已创建并添加到数据网格中，columnHeader 始终返回 null。

请帮助我。

谢谢迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:41:35.280

虽然该列已添加到 DataGrid，但尚未添加到 VisualTree，因此您的 FindVisualChild 方法返回 null。我没有为列添加点击处理程序的好解决方案，但您可以将其添加到 DataGrid 并检查发送者以查看在何处应用点击处理逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:52:40.230

我建议`CollectionChanged`在`DataGrid`-s事件上注册`Loaded`事件。这样您就可以确保将`DataGridColumnHeader`其添加到可视化树中。它看起来像这样：

```
myDataGrid.Loaded += (s,e) => {
    myCollection.CollectionChanged += (se, ev) => {
        //do work here
    };
}; 
```

# objective-c - 确定是用户移动了子窗口还是因为父窗口移动了？

> ID：10472162
> 
> 赞同：1
> 
> 时间：2012-05-06T16:26:28.033
> 
> 标签：objective-c, macos, cocoa, nswindow

如何确定子窗口是否已由用户直接移动，而不是由于其父窗口被移动？

在这两种情况下我都会收到`NSWindowDidMoveNotification`通知。

我想我可以在处理程序中测试父框架原点，`NSWindowWillMoveNotification`并将其与处理程序中的原点进行比较`NSWindowDidMoveNotification`，但也许有更好的方法吗？

这是我目前的解决方案：

```
- (void)windowWillMove:(NSNotification *)notification
{
    NSWindow *window = [notification object];
    _parentOrigin = [[window parentWindow] frame].origin;
}

- (void)windowDidMove:(NSNotification *)notification
{
    NSWindow *window = [notification object];
    NSPoint newParentOrigin = [[window parentWindow] frame].origin;
    if (_parentOrigin.x == newParentOrigin.x &&
        _parentOrigin.y == newParentOrigin.y)
    {
        // The parent hasn't moved, therefore the user moved the window directly...
        [window doThing];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T21:50:08.173

您单击移动的窗口将成为关键窗口，而子窗口如果因移动父窗口而移动，则不会成为关键窗口。因此，如果您测试发送通知的窗口是否是关键窗口，您可以知道用户移动了哪个窗口。

```
- (void)windowDidMove:(NSNotification *)notification {
    NSWindow *movedWindow = notification.object;
    if ([movedWindow isKeyWindow]) {
        NSLog(@"%@",movedWindow);
        [movedWindow doThing];
    }
} 
```

# node.js - 正确处理 Mongoose 的获取错误？

> ID：10472164
> 
> 赞同：7
> 
> 时间：2012-05-06T16:26:59.507
> 
> 标签：node.js, mongodb, express, mongoose

这是一个纯粹的最佳实践问题。我对 Node 和 Mongoose 很陌生。我非常喜欢这项技术，并且一直在着手为我正在构建的应用程序构建一个 JSON 支持的 API 的项目。

我发现当我从数据库中获取对象时，我不断地重复代码。例如：

```
Playlist.findById(req.params.id, function(err,playlist){
  if (err)
    return res.json({error: "Error fetching playlist"});
  else if (!playlist)
    return res.json({error: "Error finding the playlist"});

  //Actual code being performed on the playlist that I'm fetching
}); 
```

函数调用顶部的错误处理很烦人，因为我必须为每次调用数据库重复该代码......或者我认为。

我考虑过使用如下回调：

```
var fetchCallback = function(err,objOrDoc,callback){
  //Handle the error messages
  callback(objOrDoc);
}; 
```

但是，这种方法会打乱我的顺序流程，因为我必须在执行获取之前定义回调函数。因此，如果我有很多链接在一起的数据库查询，我将不得不以相反的顺序放置回调，这从干净编码的角度来看远非理想。

我想知道是否有人遇到过这个问题并且有任何减少重复的最佳实践。

我也在使用 express 框架，所以如果有一种有用的方法可以在 express 中处理它，我也很想知道。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T18:19:41.097

您可以在这里尝试几种有趣的方法。

最简单的情况是，您可以简单地拥有一个加载对象并在错误条件下处理输出的函数。

```
fetchResource = function(model, req, res, callback) {
  model.findById(req.params.id, function(err, resource) {
    if (err)
      return res.json({error: "Error fetching " + model.toString()});
    else if (!playlist)
      return res.json({error: "Error finding the " + model.toString()});

    callback(resource);
  });
};

app.on('/playlists/1', function(req, res) {
  fetchResource(Playlist, req, res, function(playlist) {
    // code to deal with playlist.
  });
}); 
```

这仍然是相当多的重复，所以我可能会尝试将它移到一个[中间件](http://expressjs.com/guide.html#middleware)中。

> ## 路由中间件
> 
> 路由可以通过向方法传递一个或多个额外的回调（或数组）来利用特定于路由的中间件。此功能对于限制访问、加载路由使用的数据等非常有用。

现在我还没有测试过它，它有点手摇（阅读：伪代码），但我认为它应该作为一个体面的例子。

```
// assuming a URL of '/playlist/5' or '/user/10/edit', etc.

function loadResource(model) {
  return function(req, res, next) {
    model.findById(req.params.id, function(err, resource) {
      if (err)
        return res.json({error: "Error fetching " + model.toString()});
      else if (!resource)
        return res.json({error: "Error finding the " + model.toString()});

      req.resource = resource;
      next();
    });
  }
}

app.get('/playlist/:id', loadResource(Playlist), function(req, res) {
  var playlist = req.resource;
  ...
});

app.get('/user/:id', loadResource(User), function(req, res) {
  var user = req.resource;
  ...
}); 
```

express 源代码包含[此模式的一个很好的示例，](https://github.com/visionmedia/express/blob/master/examples/route-middleware/app.js)[文档中](http://expressjs.com/guide.html#middleware)的中间件部分（特别是在“路由中间件”下）进一步详细说明了它。

# javascript - 无法使用 javascript 在数组中获取选择查询的结果

> ID：10472165
> 
> 赞同：1
> 
> 时间：2012-05-06T16:27:10.567
> 
> 标签：javascript, arrays, sqlite

尝试使用 java script 将选择查询的结果存储到数组中时遇到问题。问题是，在函数内部，数组包含正确的值，但在外部是空的，即使我使用了全局变量，它仍然是空的！！！

```
db.transaction(function (transaction) {
    var sql = "SELECT * FROM Question where idEnq=" + idEn;

    transaction.executeSql(sql, undefined, function (transaction, result) {
        var res = document.getElementById('results');
        res.innerHTML = "<ul>";
        if (result.rows.length) {
            for (var i = 0; i < result.rows.length; i++) {
                var row = result.rows.item(i);
                ch[i] = new qu(row.id, row.text, row.type);
                res.innerHTML += '<li>' + row.id + '&nbsp;' + ch[i].text + '&nbsp;' + ch[i].type + '</li>';
            }
            tablo = ch;
        } else {
            alert("No choices");
            res.innerHTML += "<li> No choices </li>";
        }

        res.innerHTML += "</ul>";
    }, onError);
}); // here the ch and the tablo array are empty 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T16:29:22.680

您正在使用异步函数。任何想要使用这些函数“返回”的数据的东西都需要在回调中。当然，您可以将此数据分配给全局变量，但该变量仅在回调运行（异步）后才具有该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:37:54.800

你是新手，所以看看这里[http://pietschsoft.com/post/2008/02/JavaScript-Function-Tips-and-Tricks.aspx](http://pietschsoft.com/post/2008/02/JavaScript-Function-Tips-and-Tricks.aspx) 有一部分是在谈论异步调用 JavaScript 函数

# java - 有没有办法将调试器附加到 apt 或 javac？

> ID：10472168
> 
> 赞同：2
> 
> 时间：2012-05-06T16:27:29.657
> 
> 标签：java, apt

我正在编写一个注释处理器，并且在某个地方或其他地方我想像在每个 java 程序中一样附加一个调试器。通常

```
-agentlib:jdwp=transport=dt_socket,address=8787,server=y,suspend=n 
```

被拒绝。关于附加调试器的替代方法的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:34:44.143

查看以下资源： [http ://code.google.com/p/acris/wiki/AnnotationProcessing_DebuggingEclipse](http://code.google.com/p/acris/wiki/AnnotationProcessing_DebuggingEclipse)

[http://code.google.com/p/acris/wiki/AnnotationProcessing_DebuggingMaven](http://code.google.com/p/acris/wiki/AnnotationProcessing_DebuggingMaven)

尽管我曾经将处理器分层：一个不依赖于处理器的层，可以使用常规单元测试进行测试。我使用日志文件对整个系统进行了调试...

# asp.net - 在 ASP.NET 中固定时间后自动执行 SQL 查询

> ID：10472169
> 
> 赞同：0
> 
> 时间：2012-05-06T16:27:31.167
> 
> 标签：asp.net, sql-server-2008

我是这里的新人。我有这样的问题：我在 ASP.NET (C#) 中创建了一个注册页面，允许访客可以在我的网站上注册一个帐户。所有用户在使用我的网站之前必须激活他们的帐户，如果 15 分钟后，用户没有通过邮件激活帐户 => 从数据库中删除该用户，我的问题是如何自动执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:40:07.757

我不会使用计时器来删除用户，而是使用更传统的方法来为用户（或者可能是他们的密码）设置过期时间。也就是说，当他们第一次注册时，指定当前时间后 15 分钟的过期时间（例如，`ExpirationDate`在用户表的列中）。在您的身份验证过程中，逻辑应该验证用户的 ID 没有过期。

使用计时器的问题是很多事情都可能出错。例如，如果您的应用程序重新启动，任何活动的计时器都将丢失。它很脆。这也有点像用锤子杀死苍蝇。不必确保在 15 分钟后立即从数据库中删除某人的用户记录。只需要确保他们在那之后无法进行身份验证。因此，以最简单的方式使设计与业务目的相匹配。如果你真的想删除记录（而不是说，让他们有机会在重置密码或其他东西后重试），那么你可以通过一些外部维护过程来做到这一点。

# c# - 如何在不阻塞主线程的情况下返回异步 HttpWebResponse？

> ID：10472171
> 
> 赞同：1
> 
> 时间：2012-05-06T16:27:46.900
> 
> 标签：c#, windows-phone-7, httpwebrequest

我正在制作一个用于连接 Web 服务的简单应用程序，但在管理异步请求时遇到了问题。

问题在于函数 ProcessRequest，它基本上生成一个异步 HttpWebRequest，并返回 HttpWebResponse。由于请求是异步的，我遇到了返回值问题，以及调用 ProcessRequest 方法并等待 HttpWebResponse 对象的函数。

顺便说一句，请求本身可以完美运行，已经在函数内部进行了测试，所以我不需要返回 HttpWebResponse。

我希望我能说清楚，正如我所说，这是我第一次接触 c#、.NET 和 Windows Phone 开发。（和 WebRequests 相关的）

Visual Studio 抛出的错误是：

```
1: Since 'System.AsyncCallback' returns void, a return keyword must not be followed by an object expression
2: Cannot convert lambda expression to delegate type 'System.AsyncCallback' because some of the return types in the block are not implicitly convertible to the delegate return type 
```

这是代码：

```
namespace SimpleNoteConcept
{
public sealed class SimpleNote
{
    private static readonly SimpleNote _instance = new SimpleNote();
    private static string _authToken = string.Empty;
    private static string _email = string.Empty;
    private static string _authQsParams
    {
        get
        {
            if (string.IsNullOrEmpty(_authToken)) throw new SimpleNoteConceptAuthorisationException();
            return string.Format("auth={0}&email={1}", _authToken, _email);
        }
    }

    private SimpleNote() { }

    public static SimpleNote Instance
    {
        get { return _instance; }
    }

    public bool Connect(string email, string password)
    {
        try
        {
            StringParamCheck("email", email);
            StringParamCheck("password", password);

            var data = string.Format("email={0}&password={1}", email, password);
            var bytes = Encoding.GetEncoding("utf-8").GetBytes(data);
            data = Convert.ToBase64String(bytes);

            using (var resp = ProcessRequest( loginPath, "POST", content: data))
            {
                if (resp != null)
                {
                    _authToken = resp.Cookies["auth"].Value;
                    _email = email;
                    System.Diagnostics.Debug.WriteLine("Connection established! -> " + _authToken);
                    return true;
                }
                return false;
            }
        }
        catch (Exception)
        {
            throw;
        }

    }

    public void GetIndex(int length = 100, string mark = null, DateTimeOffset? since = null)
    {
        try
        {
            string sinceString = null;
            if (since.HasValue)
                sinceString = Json.DateTimeEpochConverter.DateToSeconds(since.Value);

            var queryParams = string.Format("{0}&length={1}&mark={2}&since={3}", _authQsParams, length, mark, sinceString);
            using (var resp = ProcessRequest( indexPath, "GET", queryParams))
            {
                var respContent = ReadResponseContent(resp);
                System.Diagnostics.Debug.WriteLine("GetIndex: " + respContent.ToString());
                //var notes = JsonConvert.DeserializeObject<Objects.NoteEnumerable<T>>(respContent);
                //return notes;
            }
        }
        catch (WebException ex)
        {
            var resp = (HttpWebResponse)ex.Response;
            switch (resp.StatusCode)
            {
                //401
                case HttpStatusCode.Unauthorized:
                    throw new SimpleNoteConceptAuthorisationException(ex);
                default:
                    throw;
            }
        }
        catch (Exception) { throw; }
    }

    /// <summary>
    /// Generic method to process a request to Simplenote.
    /// All publicly expose methods which interact with the store are processed though this.
    /// </summary>
    /// <param name="requestPath">The path to the request to be processed</param>
    /// <param name="method">The HTTP method for the request</param>
    /// <param name="content">The content to send in the request</param>
    /// <param name="queryParams">Queryparameters for the request</param>
    /// <returns>An HttpWebResponse continaing details returned from Simplenote</returns>
    private static HttpWebResponse ProcessRequest(string requestPath, string method,
                                                  string queryParams = null, string content = null)
    {
        try
        {
            var url = string.Format("{0}{1}{2}", "https://", domainPath, requestPath);
            if (!string.IsNullOrEmpty(queryParams)) url += "?" + queryParams;
            var request = WebRequest.Create(url) as HttpWebRequest;
            request.CookieContainer = new CookieContainer();
            request.Method = method;

            request.BeginGetRequestStream((e) =>
            {
                using (Stream stream = request.EndGetRequestStream(e))
                {
                    // Write data to the request stream
                    var bytesBody = Encoding.GetEncoding("utf-8").GetBytes(content);

                    stream.Write(bytesBody, 0, bytesBody.Length);
                    stream.Close();
                    stream.Dispose();
                }
                request.BeginGetResponse((callback) =>
                {
                    try
                    {
                        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(callback);
                        return response;

                    }
                    catch (WebException ex)
                    {
                        using (WebResponse Exresponse = ex.Response)
                        {
                            HttpWebResponse httpResponse = (HttpWebResponse)Exresponse;
                            System.Diagnostics.Debug.WriteLine("Error code: {0}", httpResponse.StatusCode);
                            using (Stream str = Exresponse.GetResponseStream())
                            {
                                string text = new StreamReader(str).ReadToEnd();
                                System.Diagnostics.Debug.WriteLine(text);
                            }
                        }
                    }
                    catch (Exception ex)
                    {
                        System.Diagnostics.Debug.WriteLine("Message: " + ex.Message);
                    }
                }, request);
            }, request);

        }
        catch (Exception)
        {
            throw;
        }
    }

    /// <summary>
    /// Reads the content from the response object
    /// </summary>
    /// <param name="resp">The response to be processed</param>
    /// <returns>A string of the response content</returns>
    private static string ReadResponseContent(HttpWebResponse resp)
    {
        if (resp == null) throw new ArgumentNullException("resp");
        using (var sr = new StreamReader(resp.GetResponseStream()))
        {
            return sr.ReadToEnd();
        }
    }

    /// <summary>
    /// String parameter helper method.
    /// Checks for null or empty, throws ArgumentNullException if true
    /// </summary>
    /// <param name="paramName">The name of the paramter being checked</param>
    /// <param name="value">The value to check</param>
    private void StringParamCheck(string paramName, string value)
    {
        if (string.IsNullOrEmpty(value)) throw new ArgumentNullException(paramName, "Value must not be null or string.Empty");
    }

} // Class End

} // Namespace End 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:11:47.787

您不能像平常一样进行异步编程。这里.Net在不同的线程中运行异步部分，它们如何通信？所以你可以做的是用你的 ProcessRequest 方法传递一个委托。它将采用 HttpWebResponse 的参数。

像这样调用你的方法：

```
Action<HttpWebResponse> actionDelegate = DoAfterGettingResponse;
ProcessRequest(indexPath, "GET", actionDelegate, queryParams); 
```

处理响应的函数

```
public static void DoAfterGettingResponse(HttpWebResponse resp)
{
    if (resp != null)
    {
        _authToken = resp.Cookies["auth"].Value;
        _email = email;
        System.Diagnostics.Debug.WriteLine("Connection established! -> " + _authToken);

    }

    //Do anything else with the response
} 
```

ProcessRequest 将具有新的签名。

```
private static HttpWebResponse ProcessRequest(
    string requestPath, string method, Action<HttpWebResponse> reponseDelegate,
    string queryParams = null, string content = null)
{
    //Do what you are already doing        
} 
```

而你返回响应的地方，就做

```
HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(callback);
responseDelegate(response); 
```

您可以这样做或使用事件，触发将 HttpWebResponse 作为参数传递的事件并在侦听器中处理响应。

# android - SharedPreference 在活动之间丢失

> ID：10472172
> 
> 赞同：0
> 
> 时间：2012-05-06T16:27:49.363
> 
> 标签：android, sharedpreferences

我在 1 个活动中有此代码：

```
 mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if(access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if(expires != 0) {
            facebook.setAccessExpires(expires);
        }

        if(!facebook.isSessionValid()) {
            Log.e("Facebook Session","Invalid");
                //do facebook authorize...
        }
        else
        {
            Log.e("Facebook Session","valid");
            Intent nextActivity = new Intent (MainActivity.this, FacebookFriendsListActivity.class);

            MainActivity.this.startActivity(nextActivity);
        } 
```

确实如此，将会话显示为“有效”并开始新活动，但在新活动中我使用完全相同的代码，尽管从 SharedPreferance 返回的数据为空。另一个活动是`ListActivity`如果它有什么不同的话。

这是第二个活动中的代码：

```
 Log.e("Login","entered func");
          mPrefs = getPreferences(MODE_PRIVATE);
            String access_token = mPrefs.getString("access_token", null);
            long expires = mPrefs.getLong("access_expires", 0);
            if(access_token != null) {
                Log.e("acces_token","Isn't null");
                facebook.setAccessToken(access_token);
            }
            if(expires != 0) {
                Log.e("expires","Isn't null");
                facebook.setAccessExpires(expires);
            } 
```

正如您可能猜到的那样，除了显示正在输入方法的日志之外，还没有创建任何日志。帮助任何人都可以帮助我解决这个奇怪的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:32:23.413

那是因为您正在使用**活动私人**偏好。请参阅您正在使用的方法的文档`getPreferences`。该活动专用！

改用这个：

```
getSharedPreferences("some_identifier", MODE_PRIVATE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T16:31:46.317

我没有文档链接，但我的经验是：

```
import android.preference.PreferenceManager;

...
mPrefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()); 
```

您可以`getApplicationContext()`在上下文中调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T16:31:03.337

每个活动都会保存首选项；如果您想在活动之间共享它们，则必须将 this-reference 从第一个活动传递到第二个活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T16:31:36.067

返回的首选项是被调用的`getPreferences`独有的。改为用于您的应用程序的全局首选项。`Activity`[`PreferenceManager.getDefaultSharedPreferences`](http://developer.android.com/reference/android/preference/PreferenceManager.html#getDefaultSharedPreferences%28android.content.Context%29)

# unix - 无法让 cron 在 Amazon EC2 上工作？

> ID：10472173
> 
> 赞同：24
> 
> 时间：2012-05-06T16:28:02.703
> 
> 标签：unix, ubuntu, amazon-ec2, cron

我花了两天时间试图理解为什么我不能让 cron 在我的 Ubuntu EC2 实例上工作。我已阅读[文档](https://help.ubuntu.com/community/CronHowto)。任何人都可以帮忙吗？我想要的只是获得一个有效的cronjob。

我正在使用一个简单的 wget 命令来测试 cron。我已经验证这可以从命令行手动工作：

`/usr/bin/wget -O /home/ubuntu/backups/testfile http://www.nytimes.com/`

我的 crontab 文件如下所示：

`02 * * * * /usr/bin/wget -O /home/ubuntu/backups/testfile http://www.nytimes.com/`

我在命令之间有一个空格，并且命令下方有一个空行。我也尝试从系统级别执行此命令`sudo crontab -e`。它仍然不起作用。

cron 守护进程正在运行：

```
ps aux | grep crond                                                                                                                   
ubuntu    2526  0.0  0.1   8096   928 pts/4    S+   10:37   0:00 grep crond 
```

cronjob 似乎正在运行：

```
$ crontab -l
02 * * * * /usr/bin/wget -O /home/ubuntu/backups/testfile http://www.nytimes.com/ 
```

有没有人有任何建议或可能的解决方案？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-06-07T14:23:54.983

Cron 可以像在任何其他 linux 服务器中一样在基于 Amazon 的 linux 服务器中运行。

1.  使用 SSH 登录到控制台。
2.  `crontab -e`在命令行上运行。
3.  您现在位于当前用户的 crontab 的 vi 编辑器中（默认情况下是控制台用户，具有 root 权限）
4.  要测试 cron，请添加以下行：`* * * * * /usr/bin/uptime > /tmp/uptime`
5.  现在保存文件并退出 vi（按 Esc 并输入 :wq）。
6.  一两分钟后，检查是否在 /tmp ( ) 中创建了正常运行时间文件`cat /tmp/uptime`。
7.  `uptime`通过在命令行上键入命令将其与当前系统正常运行时间进行比较。

上面的场景在安装了 Amazon Linux O/S 的服务器上成功运行，但它也应该在其他 linux 机器上运行。这会修改当前用户的 crontab，而无需触及系统的 crontab，并且不需要 crontab 条目中的用户，因为您是在自己的用户下运行的。更简单，更安全！

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-16T08:14:10.430

您的 cron 守护程序**没有**运行。当您运行时`ps aux | grep crond`，结果显示只有 grep 命令正在运行。每次运行时都要注意这一点`ps aux | grep blah`。

通过运行此命令检查 cron 服务的状态。

尝试：

```
sudo service crond status 
```

此处的其他信息：[http](http://www.cyberciti.biz/faq/howto-linux-unix-start-restart-cron/) ://www.cyberciti.biz/faq/howto-linux-unix-start-restart-cron/ 。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-04-02T16:09:15.870

在某些 AWS Ubuntu EC2 机器上，无法通过使用`crontab -e`或什至`sudo crontab -e`（无论出于何种原因）来编辑或运行 cron 作业。我能够通过以下方式获得 cron 工作：

1.  `touch /home/ubuntu/crontest.log`创建日志文件
2.  `sudo vim /etc/crontab`编辑系统范围的 crontab
3.  使用 root 用户在倒数第二行添加您自己的 cron 作业，例如`* * * * * root date && echo 'It works!'>> /home/ubuntu/crontest.log 2>&1`将 stdout 和 stderr 转储到您在步骤 1 中创建的日志文件中
4.  通过等待 1 分钟然后`cat /home/ubuntu/crontest.log`查看 cron 作业的输出来验证它是否正常工作

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T16:32:43.680

不要忘记指定运行它的用户。尝试在您的`/etc/cron.d`文件夹中创建一个以您想要做的事情命名的新文件`getnytimes`，并将该文件的内容设为：

02 * * * * root /usr/bin/wget -O /home/ubuntu/backups/testfile [http://www.nytimes.com/](http://www.nytimes.com/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-06T08:54:32.057

就我而言，cron 作业正在运行，但它正在运行的脚本失败。失败的原因是因为我在脚本内的包含行中使用了相对路径而不是绝对路径。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-15T19:07:00.443

对我来说诀窍是什么

1.  确保 crontab 处于活动状态：

```
 sudo service crond status 
```

2.  通过运行重新启动 crontab：

```
 sudo service crond restart 
```

3.  像往常一样重新安排 cron 作业：

```
 crontab -e 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-10T20:45:43.143

cronjob 未运行的可能原因之一：确保服务器时间和您的 cronjob 时间相同。为此，我浪费了很多时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-23T15:21:55.193

跑步

```
/usr/bin/wget -O /home/ubuntu/backups/testfile http://www.nytimes.com/ 
```

给我一个错误

```
/home/ubuntu/backups/testfile: No such file or directory 
```

这是你的问题吗？我猜 cron 不会将此错误写入任何您可以将 stderr 重定向到 stdout 并看到如下错误的地方：

```
02 * * * * /usr/bin/wget -O /home/ubuntu/backups/testfile http://www.nytimes.com/ > /home/ubuntu/error.log 2&>1 
```

# sql-server - 如何确定文本是否可以转换为日期？

> ID：10472174
> 
> 赞同：4
> 
> 时间：2012-05-06T16:28:04.537
> 
> 标签：sql-server, datetime

在将数据从 Access 数据库转换和规范化到 SQL Server 数据库时，我遇到了一个有趣的问题：ISDATE() 似乎无法成功预测文本是否可以转换为日期。

```
SELECT 'This will return an error' =
    CASE
    WHEN ISDATE('1/1-2010') = 1 THEN CAST('1/1-2010' AS date)
    ELSE NULL
    END 
```

我认为这有点奇怪，因为[ISDATE() MSDN 文章](http://msdn.microsoft.com/en-us/library/ms187347.aspx)指出该函数将返回“如果表达式是有效的日期、时间或日期时间值，则返回 1；否则返回 0”。

据我所知，使用 SET DATEFORMAT 或 SET LANGUAGE 并不能缓解此错误。

CONVERT() 似乎也没有与 CAST() 不同的结果。

幸运的是， ISDATE() 确实成功地预测了文本是否可以转换为*datetime*。

```
SELECT 'This will return a datetime' =
    CASE
    WHEN ISDATE('1/1-2010') = 1 THEN CAST('1/1-2010' AS datetime)
    ELSE NULL
    END 
```

因此，我*可以*使用转换为日期时间然后转换为日期的解决方法。

```
SELECT 'This will return a date' =
    CASE
    WHEN ISDATE('1/1-2010') = 1 THEN CAST(CAST('1/1-2010' AS datetime) as date)
    ELSE NULL
    END 
```

但是，我想知道我是否遗漏了什么。有没有更简洁的方式将文本转换为日期？作为推论，在 MSDN 上是否没有正确定义 ISDATE() 函数（因此实际上有点用词不当）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:00:52.787

IsDate 和 IsNumeric 实际上都没有尝试将您的值转换为相关类型。相反，他们会告诉你是否有问题的价值*看起来*可以转换为日期或数字。SQL Server 2012 使用 TRY_PARSE 函数解决了这个问题。在此期间，您需要对数据进行一些清理或创建一个执行该清理的函数。

# c++ - c++11最优参数传递

> ID：10472179
> 
> 赞同：8
> 
> 时间：2012-05-06T16:28:35.947
> 
> 标签：c++, c++11, parameter-passing, rvalue-reference

考虑这些类：

```
#include <iostream>
#include <string>

class A
{
    std::string test;
public:
    A (std::string t) : test(std::move(t)) {}
    A (const A & other) { *this = other; }
    A (A && other) { *this = std::move(other); }

    A & operator = (const A & other)
    {
        std::cerr<<"copying A"<<std::endl;
        test = other.test;
        return *this;
    }

    A & operator = (A && other)
    {
        std::cerr<<"move A"<<std::endl;
        test = other.test;
        return *this;
    }
};

class B
{
    A a;
public:   
    B (A && a) : a(std::move(a)) {}
    B (A const & a) : a(a) {}
}; 
```

创建 时`B`，我总是有一个最佳的正向路径`A`，一个右值的移动或一个左值的副本。

是否可以使用一个构造函数实现相同的结果？这种情况下问题不大，但是多参数呢？我需要参数列表中每个可能出现的左值和右值的组合。

这不仅限于构造函数，还适用于函数参数（例如 setter）。

注意：这个问题严格来说是关于**`class B`**; `class A`存在只是为了可视化复制/移动调用是如何执行的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T16:45:08.200

“按价值”方法是一种选择。它不像您所拥有的那样最佳，但只需要一个重载：

```
class B
{
    A a;
public:   
    B (A _a) : a(move(_a)) {}
}; 
```

左值和 xvalue 的成本都是 1 次额外的移动构造，但这对于纯右值（1 次移动）仍然是最佳的。“xvalue”是已使用 std::move 强制转换为右值的左值。

您还可以尝试“完美转发”解决方案：

```
class B
{
    A a;
public:   
    template <class T,
              class = typename std::enable_if
              <
                 std::is_constructible<A, T>::value
              >::type>
    B (T&& _a) : a(std::forward<T>(_a)) {}
}; 
```

这将使您回到最佳数量的复制/移动结构。但是您应该限制模板构造函数，使其不会过于通用。您可能更喜欢使用 is_convertible 而不是 is_constructible ，就像我在上面所做的那样。这也是一个单一的构造函数解决方案，但是随着您添加参数，您的约束变得越来越复杂。

*注意*：上面的约束是必要的，因为没有约束，客户端`B`在查询时会得到错误的答案`std::is_constructible<B, their_type>::value`。如果没有适当的约束，它会错误地回答 true `B`。

我会说这些解决方案中没有一个总是比其他解决方案更好。这里需要进行工程权衡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T16:38:00.030

为构造函数使用推导的参数类型`B`：

```
template <typename T> explicit B(T && x) : a(std::forward<T>(x) { } 
```

这适用于`A`可以构造对象的任何参数。

如果`A`有多个具有不同数量参数的构造函数，您可以通过`...`在任何地方添加来使整个事情变得可变。

不过，正如@Howard 所说，您应该添加一个约束，以便该类似乎不能从它实际上不是的参数构造。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T16:54:03.733

如果`string`您的示例中的 是`std::string`，则根本不关心：默认提供的 copy 和 move 调用它们各自的 in 成员。并`std::string`实现了复制和移动，因此临时对象被移动，变量被复制。

无需定义特定的复制和移动 ctor 和分配。你可以离开构造函数

```
A::A(string s) :test(std::move(s)) {} 
```

一般来说，复制和移动的简单实现可以如下

```
class A
{
public:
    A() :p() {}

    A(const A& a) :p(new data(*a.p)) {} //copy
    A(A&& a) :p(a.p) { a.p=0; }         //move

    A& operator=(A a) //note: pass by value
    { clear(); swap(a); return *this; }
    ~A() { clear(); }

    void swap(A& a) { std::swap(p,a.p); }
    void clear() { delete p; p=0; }

private:

    data* p;
}; 
```

`operator=`接受一个在内部移动的值。如果它来自一个临时的被移动，如果它来自一个变量被复制。复制和移动之间的区别需要不同的构造函数，但是，如果我们将 A 派生为

```
class B: public A
{
...
}; 
```

不需要覆盖任何东西，因为 B 的默认 copy-ctor 调用 A 的副本，B 的默认移动调用 A 的移动，并且 B 的所有默认分配运算符都调用为 A 定义的唯一一个（移动或复制取决于已转发的内容）。

# c++ - 在循环中调用递归函数

> ID：10472180
> 
> 赞同：2
> 
> 时间：2012-05-06T16:29:05.447
> 
> 标签：c++, recursion

当我在循环中调用递归函数时遇到两个问题。考虑以下示例代码：

```
int fact(int x)
{
    if(x == 1)
        return 1;
    return x*fact(x-1);
}

int main() { 
    int n = 2;
    for(int i = 0; i < n; i++);
        std::cout << fact(4) << std::endl; // 24 ??
    return 0;
} 
```

**问题1：**我对这个程序的预期结果是`24 24`（两次`24`是打印机），但实际结果我只得到了一个`24`。

**问题2：**`main()`即使我没有递归调用主函数，重复调用函数的原因是什么。

如果有人给我关于如何在循环内调用递归函数以获得多个输出的想法，那就太好了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T16:31:55.090

```
for(int i=0; i < n; i++); <---------------------- notice this
       std::cout << fact(4) << std::endl; // 24 ?? 
```

注意循环`;`之后。`for`这就是为什么你只得到一个输出的原因。`std::cout`循环退出后执行；它在循环*之外。*

这就是你第一个问题的答案。现在第二个问题：

> 重复调用 main() 函数的原因是什么，即使我没有递归地调用 main 函数。

我认为您发布的代码没有这个问题。您必须在未发布的代码中执行其他操作，因为这些代码会`main()`被递归调用。

请注意，C++ 语言规范**禁止**`main()`从*您的*代码调用（递归或其他方式） 。因此，如果您使用 GCC 选项编译它，那么如果您偶然从您的程序中调用它，它就不应该编译。**`-pedantic``main()`**

# cuda - cuda-gdb 在遇到内核调用时以“[1] 停止”退出

> ID：10472184
> 
> 赞同：0
> 
> 时间：2012-05-06T16:29:35.543
> 
> 标签：cuda, cuda-gdb

我对 CUDA 很陌生，在这里我的裤子座位上飞了一下......

我正在尝试在我没有管理员权限的远程计算机上调试我的 CUDA 程序。我用 cuda-gdb 编译我的程序，`nvcc -g -G`然后尝试调试它。但是，只要 gdb 调用内核（甚至不必输入它，并且它不会发生在主机代码中），我就会得到：

```
(cuda-gdb) run
Starting program: /path/to/my/binary/cuda_clustered_tree 
[Thread debugging using libthread_db enabled]

[1]+  Stopped                 cuda-gdb cuda_clustered_tree 
```

cuda-gdb 然后将我转储回我的终端。如果我再次尝试运行 cuda-gdb，我会得到

```
An instance of cuda-gdb (pid 4065) is already using device 0\. If you believe
you are seeing this message in error, try deleting /tmp/cuda-dbg/cuda-gdb.lock. 
```

恢复的唯一方法是`kill -9`cuda-gdb 和`cuda_clustered_`（我假设后者是我的二进制文件的一部分）。

这台机器有两个 GPU，正在运行 CUDA 4.1（我相信 - 安装了很多，但这是我设置的那个）`PATH`并且`LD_LIBRARY_PATH`编译 + 运行 deviceQuery 和 bandwidthTest 很好。

如果需要，我可以提供更多信息。我搜索了所有可以在网上找到的地方，但没有找到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:03:08.017

弄清楚了！事实证明，cuda-gdb 讨厌 csh。

如果您正在运行 csh，它将导致 cuda-gdb 出现上述异常行为。即使从 csh 中运行 bash，然后运行 ​​cuda-gdb，我仍然看到了这种行为。您需要以 bash 的形式启动您的 shell，并且只能以 bash 的形式启动。

在机器上，默认的 shell 是 csh，但我使用 bash。我不允许直接更改它，所以我在我的 .login 脚本中添加了 'exec /bin/bash --login'。

所以即使我在运行 bash，因为它是由 csh 启动的，cuda-gdb 也会出现上述异常行为。摆脱'exec'命令，所以我直接运行csh，上面什么都没有，仍然显示出这种行为。

最后，我不得不让 IT 将我的 shell 更改为直接 bash（经过他们耐心地排除故障之后）。现在它按预期工作。

# c# - 从 C# 中的 dll 中的进程读取内存

> ID：10472186
> 
> 赞同：1
> 
> 时间：2012-05-06T16:30:34.057
> 
> 标签：c#, memory

我正在尝试从 C# 中的进程读取内存。我发现了如何从特定地址读取：

```
 public static byte[] ReadMemory(Process process, int address, int numOfBytes, out int bytesRead)
    {
        IntPtr hProc = OpenProcess(ProcessAccessFlags.All, false, process.Id);
        byte[] buffer = new byte[numOfBytes];
        ReadProcessMemory(hProc, new IntPtr(address), buffer, numOfBytes, out bytesRead);
        return buffer;
    }
    private int getVal(Process proc, int address)
    {
        int bytesRead;
        byte[] value = ReadMemory(proc, address, 4, out bytesRead);
        int am = BitConverter.ToInt32(value, 0);
        return am;
    }
    public void threadFunction()
    {
        Process[] processes = Process.GetProcessesByName("gta_sa");
        foreach (Process process in processes)
        {
            int ServerPointer = getVal(process, 0xB6F5F0);//Its about this line
            MessageBox.Show(ServerPointer.ToString());
        }
    } 
```

但是当我在网上寻找时，我不断发现：

但是我实际上需要读取地址 samp.dll+2071C0 而不是 0xB6F5F0 （我在网上找到的这个地址）

有谁知道我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T16:43:13.453

您需要知道 DLL 的基地址。这很容易通过 Process.Modules 获得，您需要 ProcessModule.BaseAddress 属性值。一个例子：

```
using System;
using System.Diagnostics;

class Program {
    static void Main(string[] args) {
        var prc = Process.Start("notepad.exe");
        prc.WaitForInputIdle();
        foreach (ProcessModule module in prc.Modules) {
            if (string.Compare(module.ModuleName, "user32.dll", true) == 0) {
                Console.WriteLine("User32 loaded at 0x{0:X16}", (long)module.BaseAddress);
                break;
            }
        }
        prc.Kill();
        Console.ReadLine();
    }
} 
```

输出：

> User32 在 0x0000000076F20000 加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:40:04.103

如果您尝试从 dll 读取数据，为什么不...

一种。如果 dll 在内存中并且具有已知结构（例如 .NET），则从其中的数据结构中读取（例如 .NET 类的静态字段或通过标头的 C++）。

湾。如果没有，请像加载二进制文件一样加载 dll 并从文件中读取。

# c - 尝试使用 GNU Scientific Library，但出现奇怪的链接器错误

> ID：10472187
> 
> 赞同：0
> 
> 时间：2012-05-06T16:30:48.157
> 
> 标签：c, gsl

所以我用 Cygwin 从源代码编译了 GSL。一切顺利，我没有收到任何错误。但是当我尝试编译一些简单的代码时，我得到以下错误：

```
..\..\..\Programme\CodeBlocks\MinGW\lib\libgsl.a(error.o) In function `gsl_error':
\usr\include\gsl\err\error.c|43|undefined reference to `__getreent'
\usr\include\gsl\err\error.c|44|undefined reference to `__getreent'
\usr\include\gsl\err\error.c|45|undefined reference to `__getreent'
..\..\..\Programme\CodeBlocks\MinGW\lib\libgsl.a(stream.o) In function `gsl_stream_printf':
\usr\include\gsl\err\stream.c|37|undefined reference to `__getreent'
..\..\..\Programme\CodeBlocks\MinGW\lib\libgsl.a(stream.o) In function `gsl_set_stream':
\usr\include\gsl\err\stream.c|61|undefined reference to `__getreent' 
```

我链接了 libgsl.a 和 libgscblas.a 库，并且没有抱怨任何其他功能。

供将来参考：当您想在 code::blocks 中设置工具链时，不要按取消而不是确定

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:57:45.280

您看到的错误是由于默认情况下 MinGW 不链接 Cygwin DLL。

MinGW 和 Cygwin 编译的库不能很好地相互配合 - 虽然[可以让它工作](http://lucksus.eu/2009/02/12/cygwin-and-undefined-reference-to-__getreent/)，但这并不是一个好主意。

为您的项目选择*一个*工具链，在这种情况下，这意味着设置 Code::Blocks 以便它使用 Cygwin 工具链而不是捆绑的 MinGW 发行版，或者也使用 MinGW 编译 GSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T06:48:16.823

您可以在 Cygwin 中使用以下选项：

```
./configure CC=i686-w64-mingw32-gcc 
```

然后你可以在 CodeBlocks 中使用 GSL。

# glassfish-3 - 在 EJB 3.1 中缓存只读实体 bean

> ID：10472194
> 
> 赞同：0
> 
> 时间：2012-05-06T16:31:12.947
> 
> 标签：glassfish-3, ejb-3.1

如何在具有 EJB 3.1 的 Glassfish 3.1 上将实体 bean（假设我有一个“国家”实体 bean，它保存有关一个永不改变的国家的记录）标记为只读？

似乎有一种方法可以将列标记为不可变，但是信息非常稀缺，而且我尝试的任何方法都没有真正起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:32:13.730

使用 EclipseLink，您可以使用 EclipseLink 的 JPA 扩展并将其`@ReadOnly`放在实体上。对于查询，您可以将查询提示添加`READ_ONLY`到查询中：

```
query.setHint(QueryHints.READ_ONLY, HintValues.TRUE); 
```

有关这方面的详细信息，请参阅[http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_%28ELUG%29#Using_EclipseLink_JPA_Extensions_for_Declaration_of_Read-Only_Classes](http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_%28ELUG%29#Using_EclipseLink_JPA_Extensions_for_Declaration_of_Read-Only_Classes)

和

[http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_%28ELUG%29#Read_Only](http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_%28ELUG%29#Read_Only)

# java - Maven，休眠，弹簧问题

> ID：10472206
> 
> 赞同：1
> 
> 时间：2012-05-06T16:32:35.363
> 
> 标签：java, spring, hibernate, jakarta-ee, maven

我有一个我想用 maven 运行的项目的问题，我使用 spring 和 hibernate，顺便说一下，我是这些技术的新手。只是如果有人可以帮助我解决问题，请给我一个可以轻松运行出租车的示例，谢谢，这是我的例外：

`org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.viralpatel.contact.service.ContactService net.viralpatel.contact.controller.ContactController.contactService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.viralpatel.contact.dao.ContactDAO net.viralpatel.contact.service.ContactServiceImpl.contactDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactDAOImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory net.viralpatel.contact.dao.ContactDAOImpl.sessionFactory; nested exception is java.lang.NoClassDefFoundError: Lorg/hibernate/cache/CacheProvider; at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:286) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1064) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)`

它是由以下原因引起的：

`Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.viralpatel.contact.service.ContactService net.viralpatel.contact.controller.ContactController.contactService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.viralpatel.contact.dao.ContactDAO net.viralpatel.contact.service.ContactServiceImpl.contactDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactDAOImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory net.viralpatel.contact.dao.ContactDAOImpl.sessionFactory; nested exception is java.lang.NoClassDefFoundError: Lorg/hibernate/cache/CacheProvider;`

`Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.viralpatel.contact.dao.ContactDAO net.viralpatel.contact.service.ContactServiceImpl.contactDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactDAOImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory net.viralpatel.contact.dao.ContactDAOImpl.sessionFactory; nested exception is java.lang.NoClassDefFoundError: Lorg/hibernate/cache/CacheProvider;` ……

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:12:17.150

```
java.lang.NoClassDefFoundError: Lorg/hibernate/cache/CacheProvider; 
```

好像你[`hibernate-core.jar`](http://repo1.maven.org/maven2/org/hibernate/hibernate-core/3.6.1.Final/hibernate-core-3.6.1.Final.jar)在你的项目中失踪了。将其添加到您的 CLASSPATH。[选择](http://repo1.maven.org/maven2/org/hibernate/hibernate-core/)与堆栈的其余部分兼容的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:31:32.757

尝试将此添加到 pom.xml ：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.2.Final</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T13:03:26.770

我可以看到几个关于同一问题的帖子。您可以检查以下链接，如果这不能解决您的问题，则可以放置用于将 spring 与 hibernate 集成的配置 xml 文件。

[CacheProvider 的异常 NoClassDefFoundError](https://stackoverflow.com/questions/7528862/exception-noclassdeffounderror-for-cacheprovider)

[java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider 异常同时集成spring和hiberate](https://stackoverflow.com/questions/11978094/java-lang-classnotfoundexception-org-hibernate-cache-cacheprovider-exception-wh)

# facebook - 如何在 C# 中对 Facebook 帖子数据进行 URL 编码

> ID：10472210
> 
> 赞同：0
> 
> 时间：2012-05-06T16:33:05.617
> 
> 标签：facebook

我正在从[http://blog.blackballsoftware.com/2010/11/03/making-a-facebook-wall-post-using-the-new-graph-api-and-c/](http://blog.blackballsoftware.com/2010/11/03/making-a-facebook-wall-post-using-the-new-graph-api-and-c/)重写代码以创建一个类发布到 Facebook。只要我不对帖子数据进行 URLEncode，该代码就可以工作。例如：如果发布数据是“message=Test，请忽略”，那么它可以工作。如果我将相同的数据 URLEncode 到 "message%3dTest%2cplease+ignore" 中，那么我会收到错误 {"error":{"message":"(#100) Missing message or attachment","type":"OAuthException", “代码”：100}}。

Post 数据应该是 URLEncoded 吗？我认为应该是因为如果我发布这样的消息“Test&Message”，那么只会出现“Test”这个词。

相关代码如下。如果 postParams = HttpUtility.UrlEncode(postParams); 被注释掉，然后代码工作。如果没有，Facebook 会返回消息丢失的错误。

```
 postParams = HttpUtility.UrlEncode(postParams);
        byte[] bytes = System.Text.Encoding.ASCII.GetBytes(postParams);
        webRequest.ContentLength = bytes.Length;

        System.IO.Stream os = webRequest.GetRequestStream();
        os.Write(bytes, 0, bytes.Length);
        os.Close();

        try
        {
            var webResponse = webRequest.GetResponse();
        }

        catch (WebException ex)
        {
            StreamReader errorStream = null;

            errorStream = new StreamReader(ex.Response.GetResponseStream());
            error = errorStream.ReadToEnd() + postParams;

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:37:41.897

答案可以在 Stackoverflow 上的[C# Escape Plus Sign (+) in POST using HttpWebRequest](https://stackoverflow.com/questions/8517511/c-sharp-escape-plus-sign-in-post-using-httpwebrequest)中找到。使用 Uri.EscapeDataString 而不是 URLEncode。仅对参数值进行编码，而不对参数名称后的等号进行编码。示例：message=Test%2Cplease%26%20ignore 有效，但 message%3dTest%2Cplease%26%20ignore 无效，因为参数名称后面的等号被编码为 %3d。

# c# - 将客户端安装的 C# 应用程序连接到导出的 SQL Server 数据库

> ID：10472213
> 
> 赞同：0
> 
> 时间：2012-05-06T16:33:34.113
> 
> 标签：c#, sql-server

我对创建安装程序非常陌生。此应用程序需要连接到 SQL Server 数据库才能使用。该数据库的表具有应用程序所需的行，因此不需要重建数据库结构。

我可以将数据库导出为`.mdf`文件并从那里连接吗？

或者我是否需要在这些计算机上安装 SQL Server Express 作为先决条件并从那里附加数据库？如果是这样，我如何在安装时附加它？

或者是否有其他方法可以将 SQL Server 数据库包含在安装程序中并供已安装的应用程序使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:55:59.127

在目标机器上，您需要安装 SqlServer（快速或标准）。
您不需要任何管理应用程序，例如 Sql Server Management Studio。
然后你可以通过连接字符串将你的 MDF 附加到数据库引擎，就像这个一样

```
Server=.\SQLExpress;AttachDbFilename=c:\yourfolder\yourfile.mdf;Database=yourdatabase; Trusted_Connection=Yes; 
```

通过自定义安装程序安装 SqlServer 并不是一件容易的事。
如果您的应用程序不打算在本地机器之外使用，您可以使用[LocalDB](https://stackoverflow.com/questions/9655362/localdb-deployment-on-client-pc)。
这种风格的 sqlserver 的安装更容易。

其他替代方法是：
提取重建数据库的[sql 脚本](https://stackoverflow.com/questions/1695738/programmatically-generate-script-for-all-objects-in-a-database)。（并提供执行脚本的方法）
导出需要的数据并执行[批量插入](http://blogs.msdn.com/b/nikhilsi/archive/2008/06/11/bulk-insert-into-sql-from-c-app.aspx)，将数据重新插入重建的数据库中

# c++ - 如何将 boost::signal2::signal 连接到纯虚函数？

> ID：10472216
> 
> 赞同：2
> 
> 时间：2012-05-06T16:33:53.710
> 
> 标签：c++, qt, boost, architecture, signals

我`boost::signals2::signals`在一个组件中使用，`UpdateComponent`. 此组件的特定聚合类型为`Updateable`. 我希望`Updateable`能够连接到`UpdateComponent`. `boost::signals2::signal`我应该注意到`Updateable`'s`slot`是`pure-virtual`.

下面是代码的具体示例：

```
// This is the component that emits a boost::signals2::signal.
class UpdateComponent {
    public:
        UpdateComponent();
        boost::signals2::signal<void (float)> onUpdate; // boost::signals2::signal
} 
```

在`UpdateComponent`'s 代码中的某个时刻，我执行`onUpdate(myFloat)`; 我相信这类似于向`boost::signals2::signal`所有“听众”“开火”。

```
// The is the aggregate that should listen to UpdateComponent's boost::signals2::signal
class Updateable {
    public:
        Updateable();
    protected:
        virtual void onUpdate(float deltaTime) = 0; // This is the pure-virtual slot that listens to UpdateComponent.
        UpdateComponent* m_updateComponent;
} 
```

在`Updateable`的构造函数中，我执行以下操作：

```
Updateable::Updateable {
    m_updateComponent = new UpdateComponent();
    m_updateComponent->onUpdate.connect(&onUpdate);
} 
```

我收到以下两个错误：

1.  `...Updateable.cpp:8: error: ISO C++ forbids taking the address of an unqualified or parenthesized non-static member function to form a pointer to member function. Say '&BalaurEngine::Traits::Updateable::onUpdate' [-fpermissive]`
2.  `/usr/include/boost/function/function_template.hpp:225: error: no match for call to '(boost::_mfi::mf1<void, BalaurEngine::Traits::Updateable, float>) (float&)'`

我应该提到我将 Qt 与 boost 结合使用。但是，我已经添加`CONFIG += no_keywords`到我的`.pro`文件中，因此两者应该可以顺利协同工作，如 boost 网站上所述。我不使用 Qt`signals`和`slots`（效果很好）的原因是：我不想`Updateable`成为`QObject`.

如果有人可以帮助我弄清楚为什么会出错，将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T16:49:31.297

您传递到的插槽`connect`必须是函子。要连接到成员函数，您可以使用`boost::bind`或 C++11 `lambda`。例如使用 lambda：

```
Updateable::Updateable {
    m_updateComponent = new UpdateComponent();
    m_updateComponent->onUpdate.connect(
        [=](float deltaTime){ onUpdate(deltaTime); });
} 
```

或使用`bind`：

```
Updateable::Updateable {
    m_updateComponent = new UpdateComponent();
    m_updateComponent->onUpdate.connect(
        boost::bind(&Updateable::onUpdate, this, _1));
} 
```

# c++-cli - 如何在 C++/CLI 的引用类中使用“本机”指针？

> ID：10472217
> 
> 赞同：6
> 
> 时间：2012-05-06T16:34:01.153
> 
> 标签：c++-cli, clr

我正在尝试编写一个将使用 DirectShow 的小型库。该库将由 .NET 应用程序使用，因此我认为最好用 C++/CLI 编写它。

但是，我在这条线上遇到了麻烦：

```
 HRESULT hr = CoCreateInstance(  CLSID_FilterGraph,
                                    NULL,
                                    CLSCTX_INPROC_SERVER,
                                    IID_IGraphBuilder,
                                    (void**)(&graphBuilder) );  //error C2440: 
```

在哪里`graphBuilder`声明：

```
public ref class VideoPlayer
{
public:
    VideoPlayer();
    void Load(String^ filename);

    IGraphBuilder*  graphBuilder;

}; 
```

如果我正确理解[了这个页面](http://manski.net/2011/04/19/cpp-cli-cheat-sheet/)，我可以`*/&`像往常一样在我的 C++/CLI 库中使用指向非托管内存的“本机”指针；`^`用于表示指向托管对象的指针。但是，此代码产生：

> 错误 C2440：“类型转换”：无法从“cli::interior_ptr”转换为“void **”

该错误表明它`graphBuilder`被认为是一个`'cli::interior_ptr<Type>'`. 那是托管内存的指针/句柄，不是吗？但它是一个纯本机指针。我不想将指针传递给期望句柄的方法，反之亦然 - 我只是想将它存储在我的托管类中）如果是这样，我怎么说`graphBuilder`是“传统”指针？

（[这个问题](https://stackoverflow.com/questions/1271022/convert-from-c-cli-pointer-to-native-c-pointer)很相似，但答案是，要使用 pin_ptr，我看不到对我有帮助，因为它不能成为我班级的成员）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T18:03:00.777

错误消息有点神秘，但编译器试图提醒您不能将指向托管类成员的指针传递给非托管代码。这在设计上是行不通的，当垃圾收集器在函数执行时启动并移动托管对象时，灾难就会发生。在进程中使指向成员的指针无效并导致本机代码将字节喷射到错误地址的 gc 堆中。

解决方法很简单，只需声明一个局部变量并将指针传递给它。堆栈上的变量不能移动。像这样：

```
void init() {
    IGraphBuilder* builder;    // Local variable, okay to pass its address
    HRESULT hr = CoCreateInstance(CLSID_FilterGraph,
        NULL,
        CLSCTX_INPROC_SERVER,
        IID_IGraphBuilder,
        (void**)(&builder) );
    if (SUCCEEDED(hr)) {
        graphBuilder = builder;
        // etc...
    }
} 
```

# python - 在 Python 中使用正则表达式拆分差异文件

> ID：10472224
> 
> 赞同：2
> 
> 时间：2012-05-06T16:35:15.777
> 
> 标签：python, regex

我正在尝试使用 python 中的 re 模块将差异（统一格式）拆分为每个部分。diff的格式是这样的...

```
diff --git a/src/core.js b/src/core.js
index 9c8314c..4242903 100644
--- a/src/core.js
+++ b/src/core.js
@@ -801,7 +801,7 @@ jQuery.extend({
        return proxy;
    },

-   // Mutifunctional method to get and set values to a collection
+   // Multifunctional method to get and set values of a collection
    // The value/s can optionally be executed if it's a function
    access: function( elems, fn, key, value, chainable, emptyGet, pass ) {
        var exec,
diff --git a/src/sizzle b/src/sizzle
index fe2f618..feebbd7 160000
--- a/src/sizzle
+++ b/src/sizzle
@@ -1 +1 @@
-Subproject commit fe2f618106bb76857b229113d6d11653707d0b22
+Subproject commit feebbd7e053bff426444c7b348c776c99c7490ee
diff --git a/test/unit/manipulation.js b/test/unit/manipulation.js
index 18e1b8d..ff31c4d 100644
--- a/test/unit/manipulation.js
+++ b/test/unit/manipulation.js
@@ -7,7 +7,7 @@ var bareObj = function(value) { return value; };
 var functionReturningObj = function(value) { return (function() { return value; }); };

 test("text()", function() {
-   expect(4);
+   expect(5);
    var expected = "This link has class=\"blog\": Simon Willison's Weblog";
    equal( jQuery("#sap").text(), expected, "Check for merged text of more then one element." );

@@ -20,6 +20,10 @@ test("text()", function() {
        frag.appendChild( document.createTextNode("foo") );

    equal( jQuery( frag ).text(), "foo", "Document Fragment Text node was retreived from .text().");
+
+   var $newLineTest = jQuery("<div>test<br/>testy</div>").appendTo("#moretests");
+   $newLineTest.find("br").replaceWith("\n");
+   equal( $newLineTest.text(), "test\ntesty", "text() does not remove new lines (#11153)" );
 });

 test("text(undefined)", function() {
diff --git a/version.txt b/version.txt
index 0a182f2..0330b0e 100644
--- a/version.txt
+++ b/version.txt
@@ -1 +1 @@
-1.7.2
\ No newline at end of file
+1.7.3pre
\ No newline at end of file 
```

我已经尝试了以下模式组合，但不能完全正确。这是我迄今为止最接近的一次......

```
re.compile(r'(diff.*?[^\rdiff])', flags=re.S|re.M) 
```

但这会产生

```
['diff ', 'diff ', 'diff ', 'diff '] 
```

我将如何匹配此差异中的所有部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:55:36.187

您不需要使用正则表达式，只需拆分文件：

```
diff_file = open('diff.txt', 'r')
diff_str = diff_file.read()
diff_split = ['diff --git%s' % x for x in diff_str.split('diff --git') \
              if x.strip()]
print diff_split 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:00:56.940

这样做：

```
r=re.compile(r'^(diff.*?)(?=^diff|\Z)', re.M | re.S)
for m in re.findall(r, s):
    print '===='
    print m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T16:48:06.820

你为什么使用正则表达式？当一行以 开头时，只遍历这些行并开始一个新部分`diff`怎么样？

```
list_of_diffs = []
temp_diff = ''
for line in patch:
    if line.startswith('diff'):
        list_of_diffs.append(temp_diff)
        temp_diff = ''
    else: temp_diff.append(line) 
```

免责声明，以上代码仅应被视为说明性伪代码，预计不会实际运行。

正则表达式是一把锤子，但你的问题不是钉子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T17:17:12.790

只需拆分后跟单词的任何换行符`diff`：

```
result = re.split(r"\n(?=diff\b)", subject) 
```

虽然为了安全起见，您可能应该尝试匹配`\r`或`\r\n`：

```
result = re.split(r"(?:\r\n|[\r\n])(?=diff\b)", subject) 
```

# python - 如何使用 Homebrew 安装 Python 库，如 Py2Cairo

> ID：10472225
> 
> 赞同：9
> 
> 时间：2012-05-06T16:35:17.617
> 
> 标签：python, homebrew, cairo

这是我到目前为止所做的：

我已经安装了 Homebrew：

```
/usr/bin/ruby -e "$(/usr/bin/curl -fsSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)" 
```

然后是蟒蛇：`brew install python`

然后py2cairo：`brew install py2cairo`

这两个似乎都安装正确，当我输入时`which python`我得到：`usr/local/bin/python`我相信这是自制的版本。

正如许多 Homebrew 指南所建议的那样，我已经编辑了我的路径：

```
export PATH=/usr/local/bin:/usr/local/share/python:$PATH 
```

这是我从中得到的`echo $PATH`：`/usr/local/bin:/usr/local/share/python:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin`

我也可以输入`python --version`并获取`python 2.7.3`看起来正确的内容，因为如果我查看`/usr/local/Cellar/py2cairo/1.10.0/README`它会说：

```
Dependencies
------------
    cairo   >= 1.10.0
    Python  >= 2.6 
```

然而，毕竟这我仍然无法将 py2cairo 库导入 python。这是我尝试时得到的结果：

```
Sal:~ Lockyer$ python
Python 2.7.3 (default, May  6 2012, 13:47:31) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import cairo
Fatal Python error: Interpreter not initialized (version mismatch?)
Abort trap: 6 
```

我认为大多数人都使用`pip`or`easy_install`来做这种事情，但我认为 py2cairo 不受这些支持。这是我跑步时得到的`pip-2.7 install py2cairo`：

```
Downloading/unpacking py2cairo
  Could not find any downloads that satisfy the requirement py2cairo
No distributions at all found for py2cairo
Storing complete log in /Users/Lockyer/Library/Logs/pip.log 
```

我想我一定只是错过了最后一步，我以某种方式向 python 揭示了从哪里导入库......我忘记在我的路径中添加一些东西了吗？

这是我跑步时得到的`ls -l /usr/local/bin/python`

```
lrwxr-xr-x  1 Lockyer  admin  33  6 May 13:48 /usr/local/bin/python -> ../Cellar/python/2.7.3/bin/python 
```

这是我跑步时得到的`otool -L /usr/local/Cellar/py2cairo/1.10.0/lib/python2.7/site-packages/cairo/_cairo.so`：

```
/usr/local/Cellar/py2cairo/1.10.0/lib/python2.7/site-packages/cairo/_cairo.so:
    /private/tmp/homebrew-py2cairo-1.10.0-BtmY/py2cairo-1.10.0/build_directory/src/_cairo.so (compatibility version 0.0.0, current version 0.0.0)
    /usr/local/Cellar/cairo/1.10.2/lib/libcairo.2.dylib (compatibility version 11003.0.0, current version 11003.2.0)
    /System/Library/Frameworks/Python.framework/Versions/2.7/Python (compatibility version 2.7.0, current version 2.7.1)
    /usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1094.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
```

移动`/System/Library/Frameworks/Python.framework/Versions`到我的桌面并`brew install py2cairo`再次运行似乎已经修复了该错误。很高兴知道它为什么要针对 Lion 的 python 构建，因为它似乎不是第一个在路径上......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T00:43:06.397

我偶然发现了同样的错误。通过一些谷歌搜索，我发现[这个问题](https://github.com/mxcl/homebrew/issues/12893)已经[在 GitHub 上项目](https://github.com/mxcl/homebrew)的问题页面上检测到了。

这似乎是如何`waf`处理库导入的问题，我并不完全理解。已提交修复并等待批准。

如果有人在接受修复之前仍然遇到此问题，则可以按照[此答案](https://github.com/mxcl/homebrew/issues/12893#issuecomment-6696102)中提出的命令安装 py2cairo 的固定公式。

```
brew rm -f py2cairo
brew install  https://raw.githubusercontent.com/2bits/homebrew/15b3e67/Library/Formula/py2cairo.rb 
```

当修复被批准时，一个简单的`brew update`应该解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T18:46:39.410

根据您的其他评论，您已设法解决您的库路径问题，但您留下了“致命的 Python 错误：解释器未初始化（版本不匹配？）”。以下是如何解决它。

1.  确保你有 xcode 4.3
2.  确保您已安装 xcode 命令行工具
3.  `brew tap homebrew/dupes && brew install homebrew/dupes/apple-gcc42`
4.  `sudo ln -s /usr/local/bin/gcc-4.2 /usr/bin/gcc-4.2`
5.  确认所有这些`brew --config`（应该报告 GCC-4.2 已定位）
6.  `brew uninstall cairo py2cairo`
7.  `brew install py2cairo --use-gcc`

我有同样的问题，直到我用 gcc 构建它，这显然不再包含在 xcode 4.3 中。

另外，我没有使用自制 python 安装（如果你这样做了）。我正在使用标准的苹果 python 安装，只是`/usr/local/lib/python2.7/site-packages`在我的 PYTHONPATH 前面

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T17:02:33.937

似乎pycairo的`waf`安装程序文件在安装时发现了错误的python。你能跑吗

```
otool -L /usr/local/Cellar/py2cairo/1.10.0/lib/python2.7/site-packages/cairo/_cairo.so 
```

确定 C 扩展与哪个 python 链接？我的包括一条线

```
/System/Library/Frameworks/Python.framework/Versions/2.7/Python (compatibility version 2.7.0, current version 2.7.1) 
```

（但我使用的是系统 python，而不是 Homebrew python）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-08T09:38:04.960

对我来说也`brew rm -f py2cairo`和`brew install py2cairo`工作

代替

```
brew rm -f py2cairo 
```

尝试

```
brew install  https://raw.githubusercontent.com/2bits/homebrew/15b3e67/Library/Formula/py2cairo.rb 
```

# jquery - 如何强制一个 Jquery 函数只为选择器触发一次

> ID：10472228
> 
> 赞同：0
> 
> 时间：2012-05-06T16:35:39.213
> 
> 标签：jquery

一旦用户开始在任何输入字段文本字段中输入内容，我已经定义了以下脚本以启用“提交”按钮：-

```
<script type = "text/javascript">
    $("input[type= 'text']").change(function () {

        var $this = $("input[type='submit']");
        $this.prop('disabled', false);
    });
</script> 
```

但是我可以强制上面的脚本只触发一次吗，因为每次用户在文本字段中输入时启用提交按钮会浪费处理，而提交按钮在第一次之后就已经启用`.change`。BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:39:13.380

```
$("input[type='text']").one('change', function () { // fires only one time
        var $this = $("input[type='submit']");
        $this.prop('disabled', false);
        $("input[type='text']").off('change');
    }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T16:43:34.577

`$('<selector>').change(...)`会将事件处理程序绑定到每个元素，因此在这里简单地使用[`.one` *^([docs])*](http://api.jquery.com/one/)对您没有帮助。它仍然会为每个元素执行一次，尽管您只想执行一次，而不管它是由哪个元素触发的。

在每个元素执行一次后，您可以`unbind`（或`off`）从每个元素中获取事件处理程序：

```
var $elements = $("input[type= 'text']");
$("input[type= 'text']").change(function() {
    //...
    $elements.unbind('change');
}); 
```

这可以很容易地变成一个插件（简单版本，原始`.one()`方法的签名有点复杂）：

```
$.fn.one_all = function(event, handler) {
    var $elements = this;
    $elements.on(event, function() {
        $elements.off(event, handler);
        handler.apply(this, arguments);
    });
}; 
```

# java - Hello World 根本不会加载到 Android 虚拟设备上。为什么？

> ID：10472229
> 
> 赞同：2
> 
> 时间：2012-05-06T16:35:53.183
> 
> 标签：java, android, adt, avd

我正在使用 Eclipse 3.7.2 我有来自 Android 教程的标准 Hello World 应用程序。当我尝试在 AVD 上运行它时，Eclipse 会启动一个 AVD，但从不尝试将应用程序加载到它上面。日志内容如下：

```
[2012-05-06 11:23:01 - MyFirstAndroid] Android Launch!
[2012-05-06 11:23:01 - MyFirstAndroid] adb is running normally.
[2012-05-06 11:23:01 - MyFirstAndroid] Performing com.pack.myapp.MyFirstAndroidActivity activity launch
[2012-05-06 11:23:01 - MyFirstAndroid] Automatic Target Mode: launching new emulator with compatible AVD 'Device'
[2012-05-06 11:23:01 - MyFirstAndroid] Launching a new emulator with Virtual Device 'Device' 
```

就是这样。模拟器启动，启动，但我的应用程序从未加载到它上面。

此外，我进入应用程序的配置并尝试将“自动目标模式”更改为手动模式，在其中我选择启动应用程序的 AVD。它让我可以选择新的 AVD 或已经运行的 AVD，但是当我运行 AVD 时，它不会显示在“正在运行的 Android 设备”列表中。我不知道为什么它不承认这一点。

请帮帮我好吗？

设置：

Eclipse 版本 3.7.2

Windows Vista 32 位

Android SDK 平台 4.0.3 API 15

SDK 安装程序：installer_r18-windows.exe

Eclipse Android 开发工具包插件：18.0.0.v201203301601-306762

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:25:59.890

如果您在 DDMS 的“运行 Android 设备”列表中找不到模拟器，则需要重新启动您的 adb 服务器，您可以转到相机图标旁边的下拉列表和“重置 adb”，或者手动从命令行。

# c# - 并行执行多个对象方法

> ID：10472232
> 
> 赞同：0
> 
> 时间：2012-05-06T16:36:54.800
> 
> 标签：c#, parallel-processing

我想通过传递不同的参数并调用我想要获取返回值的方法来运行创建 4 个对象。我想并行执行这个方法。

```
Rank rg = new Rank(para);
Rank rb = new Rank(para);
Rank ry = new Rank(para);
Rank ra = new Rank(para);

sr.class1Rank = rg.GetPosition();
sr.class2Rank = rb.GetPosition();
sr.class3Rank = ry.GetPosition();
sr.class4Rank = ra.GetPosition(); 
```

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:42:12.753

你可以使用[任务并行](http://msdn.microsoft.com/en-us/library/dd537609.aspx)

```
Parallel.Invoke(() => DoSomeWork(), () => DoSomeOtherWork()); 
```

在你的情况下：

```
 Parallel.Invoke(
        () => rg.GetPosition(),
        () => rb.GetPosition(),
        () => ry.GetPosition()
        () => ra.GetPosition()); 
```

# regex - 列表中的变量

> ID：10472233
> 
> 赞同：1
> 
> 时间：2012-05-06T16:37:09.467
> 
> 标签：regex, string, list, vim, substitution

我想将一组变量放在一个列表中并替换它们中的每一个。
例子：

```
let mylist = ['var1','var2','var3']

for i in range(0,2)
 let mylist[i] = substitute(mylist[i], '\.', ',', 'g')
endfor 
```

这必须这样做：

```
let var1 = substitute(var1, '\.', ',', 'g')  
let var2 = substitute(var2, '\.', ',', 'g')  
let var3 = substitute(var3, '\.', ',', 'g') 
```

但它不起作用。

我做错了什么？

**编辑**
相同的变量 ['var1','var2','var3'] 必须做更多的替换，所以我决定将所有替换添加到列表中：

```
let mylist = ['var1','var2','var3']
let mySubst = [['\.', ','], ['\s*$', ''], ['[,.]0$', ''], ['^[.,]', '0&']]

for i in range(0,len(mylist)-1)
    for m in range(0,len(mySubst)-1)
      let mylist[i] = substitute(mylist[i] , mySubst [m][0],  mySubst [m][1], 'g')
    endfor
endfor 
```

这行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:33:04.940

试试这个：

```
let [var1, var2, var3] = map([var1, var2, var3], 'substitute(v:val, "\\.", ",", "g")') 
```

重新阅读问题后，也许这就是您要查找的内容：

```
let list = ['var1', 'var2', 'var3']
let [var1, var2, var3] = map(list, 'substitute({v:val}, "\\.", ",", "g")') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:41:10.827

您不应该在这一行的变量周围加上引号：`let mylist = ['var1','var2','var3']`. 这使它们成为字符串文字`var1`,`var2`和`var3`, 而不是这些变量的值。

# php - 如何找到对象中的最后一个链属性？

> ID：10472239
> 
> 赞同：0
> 
> 时间：2012-05-06T16:37:49.370
> 
> 标签：php, oop, multidimensional-array, null, php-5.3

为避免收到[上一个问题](https://stackoverflow.com/questions/10462234/how-to-use-get-to-return-null-in-multilevel-object-property-accessing)中的错误消息，我决定使用`__get()`如下所示更改类，

```
class property 
{

    public function __get($name)
    {
        return isset($this->$name) ? $this->$name : new property;
    }
}

class objectify
{

    public function array_to_object($array = array(), $property_overloading = false)
    {
        # if $array is not an array, let's make it array with one value of former $array.
        if (!is_array($array)) $array = array($array);

        # Use property overloading to handle inaccessible properties, if overloading is set to be true.
        # Else use std object.
        if($property_overloading === true) $object = new property();
            else $object = new stdClass();

        foreach($array as $key => $value)
        {
            $key = (string) $key ;
            $object->$key = is_array($value) ? self::array_to_object($value, $property_overloading) : $value;
        }

        return $object;

    }
}

$object = new objectify();
$type = null;
$type = $object->array_to_object($type,true);
var_dump($type->a->b->c); 
```

所以我最终得到了这个结果，

```
object(property)#3 (0) { } 
```

但它仍然不完美。据我了解，上述解决方案像这样处理**链中的对象，**

```
$type = object{}->object{}->object{} 
```

所以我想知道我是否可以找到它是否是**最后一个链**并且它是空的然后只输出一个`null`？

```
$type = object{}->object{}->NULL 
```

PHP可以吗？

**编辑：**

我想到了一个想法，就是计算属性类被实例化了多少次，

```
class property 
{
    public static $counter = 0;

    function __construct() {
        self::$counter++;
    }

    public function __get($name)
    {
        if(isset($this->$name))
        {   
            return $this->$name;
        }
        elseif(property::$counter < 3)
        {
            return new property;
        }
        else
        {
            return null;
        }

    }
} 
```

但我唯一的问题是如何使数字`3`动态化。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:27:03.720

听起来您正在寻找 Groovy`?.`运算符的 PHP 版本：http: [//groovy.codehaus.org/Null+Object+Pattern](http://groovy.codehaus.org/Null+Object+Pattern)

Afaik，您不能在 PHP 中重载或创建新运算符。您也许可以通过将所有嵌套调用传递给函数来模拟它，并且该函数知道何时返回 null。

编辑：此处发布的其他选项 - [http://justafewlines.com/2009/10/groovys-operator-in-php-sort-of/](http://justafewlines.com/2009/10/groovys-operator-in-php-sort-of/)

# asp.net - LINQ to SQL 以数组形式获取一对多表列结果

> ID：10472241
> 
> 赞同：1
> 
> 时间：2012-05-06T16:37:59.667
> 
> 标签：asp.net, sql, database, linq-to-sql

我有一张包含这些信息的表[T1]

1.  ID
2.  用户身份
3.  其他...

第二张桌子[T2]是

1.  ID
2.  用户身份
3.  姓名

关系是 T1 的一个用户可以有多个 T2

我想得到类似的结果

1.  ID = 号码
2.  用户 ID = 号码
3.  数组[t2.name,t2.name,t2.name]

我对 sql 的 ling 就像

```
 var result = (from t1 in context.t1
              join t2 in context.UserID on t1.ID equals t2.UserID 
              select new CLASS
              {
                  ID = t1.ID,
                  UserID = t1.UserID,
                  Names = t2.name
               }).Take(10).ToList(); 
```

但这给了我结果，因为每个 t2.name 作为单独的行。我如何收集数组中的所有名称？

LINQ to SQL , ASP.NET C# 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:52:37.037

我认为这样的事情应该有效

```
var result = (from t1 in context.t1
              join t2 in context.UserID on t1.ID equals t2.UserID 
              select new CLASS
              {
                  ID = t1.ID,
                  UserID = t1.UserID,
                  Names = (from t2 in context.t2
                           select t2.Name
                           where t2.userID = t1.userID).toArray(),
              }).Take(10).ToList(); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:48:01.930

您不需要使用联接。在 linq 设计器中创建两个 linq 实体之间的关系，然后您可以运行如下查询：

```
var q = from t in context.t1
        select new { id = t1.id, names = t1.t2s.Select(t => t.Name).ToArray() }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T16:48:54.703

您必须按 ID/UserID 对结果进行分组：

```
 var result = (from t1 in context.t1
              join t2 in context.UserID on t1.ID equals t2.UserID
              group by new { t1.ID, t1.UserID } into g
              select new CLASS
              {
                  ID = g.Key.ID,
                  UserID = g.Key.UserID,
                  Names = g.ToArray()
              }).Take(10).ToList(); 
```

但是，当正确准备好 LINQ to SQL 类时，可以进行如下查询：

```
var result = from t1 in context.t1 select new { id = t1.id, names = t1.t2s.ToArray() }; 
```

# java - 文件上传到 AppEngine Blobstore

> ID：10472244
> 
> 赞同：3
> 
> 时间：2012-05-06T16:38:17.590
> 
> 标签：java, google-app-engine, gwt

按照此[blobstore 文档](https://developers.google.com/appengine/docs/java/blobstore/overview)了解如何上传到 Blobstore。它显示了通过 JSP + Servlet 方法上传。

由于我的应用程序是基于 GWT 的，因此我需要为 GWT RPC（而不是 JSP）进行调整。

所以在我的应用 RPC 服务实现中：

```
public class MyServiceImpl extends RemoteServiceServlet implements
    MyService {

  public String getUploadUrl() {
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
    return blobstoreService.createUploadUrl("/upload")
  }
} 
```

这是正确的方法还是有其他方法可以正确地做到这一点？我还没有尝试过这段代码。

将要上传的二进制文件的范围从字节到最大 2MB。

按照此[blobstore 文档](https://developers.google.com/appengine/docs/java/blobstore/overview)了解如何上传到 Blobstore。它显示了通过 JSP + Servlet 方法上传。

由于我的应用程序是基于 GWT 的，因此我需要为 GWT RPC（而不是 JSP）进行调整。

所以在我的应用 RPC 服务实现中：

```
public class MyServiceImpl extends RemoteServiceServlet implements
    MyService {

  public String getUploadUrl() {
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
    return blobstoreService.createUploadUrl("/upload")
  }
} 
```

这是正确的方法还是有其他方法可以正确地做到这一点？我还没有尝试过这段代码。

将要上传的二进制文件的范围从字节到最大 2MB。

当我尝试这段代码时，这是服务器端控制台日志：

```
May 07, 2012 6:35:53 AM com.google.appengine.tools.development.LocalResourceFileServlet doGet
WARNING: No file found for: /crossdomain.xml 
```

然后在客户端 GWT.log 上，Rpc 能够生成一个 URL，但是它不起作用：

```
[INFO] [blobrpc] - Success fetch upload url: http://127.0.0.1:8888/_ah/upload/aglub19hcHBfaWRyGwsSFV9fQmxvYlVwbG9hZFNlc3Npb25fXxgDDA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:05:14.090

`createUploadUrl()`创建一个期望带有 Content-type header 的 HTTP POST 的 Url `multipart/form-data`。

如果您想使用 GWT-RPC，则需要使用[Blobstore FileService API](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)在服务器端创建文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T09:18:35.663

如果我们要将文件发布到该 URL，它将保存在 blobstore 中。但是请注意，本地开发 Web 服务器的默认 URL 是[http://127.0.0.1:8888/](http://127.0.0.1:8888/)，而 blobstore 生成的 URL 是 http://:8888/。这将在以后引起问题，因为出于安全原因，Plupload 将无法将文件 POST 到另一个域。这只发生在本地开发服务器上，发布的应用程序只有一个 URL。通过在 Eclipse 中编辑运行配置来修复它，将 -bindAddress 添加到参数中。这将导致本地开发服务器在 http://:8888/ 上托管 Web 应用程序。您可能需要在 GWT 浏览器插件中允许它在此更改后加载应用程序。

[使用 GWT 和 AppEngine Blobstore 上传多个文件？](https://stackoverflow.com/questions/14140483/multiple-file-upload-using-gwt-and-appengine-blobstore)

# php - JSON - 使用 PHP 的 push_array

> ID：10472246
> 
> 赞同：1
> 
> 时间：2012-05-06T16:38:28.567
> 
> 标签：php, json

有人可以向我解释为什么第一个有效而第二个无效？结果在第二个示例中只是“1”。

1.

```
 $c = 0;
    $list = array();
    foreach ($places as $place) {
        $arr = array();
        $arr[0] = get_object_vars($place);
        $list[$c] = $arr;
        $c++;
    }
    echo json_encode(array("status" => "true", "list" => $list)); 
```

2.

```
 $list = array();
    foreach ($places as $place) {
        array_push($list, get_object_vars($place));
    }
    echo json_encode(array("status" => "true", "list" => $list)); 
```

两个代码示例的示例数据：

```
$places = array();

$place = new StdClass;
$place->name = 'first';
$place->location = array('x' => 0.0, 'y' => 0.0);
$places[] = $place;

$place = new StdClass;
$place->name = 'Greenwich Observatory';
$place->location = array('x' => 51.4778, 'y' => 0.0017);
$place->elevation = '65.79m';
$places[] = $place; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:44:03.617

在第一种情况下，您将键值对添加到数组中，在第二种情况下只是值。我相信只是添加价值实际上应该有效，但也许

```
foreach ($places as $place) {
    array_push($list, array( 0 => get_object_vars($place) );
} 
```

会更好吗？

# ruby-on-rails-3 - Heroku 上的恒定 500 错误

> ID：10472247
> 
> 赞同：1
> 
> 时间：2012-05-06T16:38:28.673
> 
> 标签：ruby-on-rails-3, heroku

我最近从 Heroku 的 Bamboo 堆栈切换到 Cedar 堆栈（Rails 3.1.4、Ruby 1.9.2、Web 服务器的 Thin gem）。从那时起，我不断收到 500 个这样的错误，其中查询似乎不正确：

```
207 <13>1 2012-05-06T16:10:51+00:00 d. app web.1 - - ActiveRecord::StatementInvalid (Mysql::Error: : SELECT  `foos`.* FROM `foos`  WHERE `foos`.`id` = ? LIMIT 1) 
```

这不是代码中的错误，因为当我刷新页面时页面最终会成功呈现（即状态 200）。有时它是 1 次刷新，但在我获得 200 之前最多可以刷新 4 次。

我以为是数据库，因为我在 ClearDB 的免费计划中，但我升级到 ClearDB 的下一个计划，具有更好的 I/O 性能，它仍然发生

1.  当我在 Bamboo 时，这从未发生过
2.  它几乎发生在对数据库进行查询的每个页面上
3.  它并不总是发生，但我会说它发生在至少五分之一的页面视图中
4.  模型/查询无关紧要，会发生相同的错误（只是表示与上面的示例不同的模型/字段）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:29:07.437

如果你在控制台中，你会得到同样的错误`heroku run console`吗？我以前从未见过这种情况。尝试升级您的 Mysql gem，您使用的是哪一个[http://api.rubyonrails.org/classes/ActiveRecord/StatementInvalid.html](http://api.rubyonrails.org/classes/ActiveRecord/StatementInvalid.html)我认为正确的是 mysql2 [https://rubygems.org/gems/mysql2](https://rubygems.org/gems/mysql2)

# multithreading - 线程“Thread-4”java.lang.NullPointerException 中的异常？

> ID：10472248
> 
> 赞同：-1
> 
> 时间：2012-05-06T16:38:45.877
> 
> 标签：multithreading, swing, nullpointerexception

我有这个例外的问题。我正在尝试创建一个函数来在表上显示数据库中的数据，我在 jtextfield 所做的每一次击键。所以它就像每次我在 jtextfield 中键入时都会用新数据自动刷新表一样。

这是代码：

首先我有这个变量：

```
private Statement stmt;
List<Barang> dataSBarang =new LinkedList();
boolean searchBarang=true;
Searching sBarang; 
```

这就是我调用函数的方式：

```
private void inputkodeTFMouseClicked(java.awt.event.MouseEvent evt){                                         
    sBarang = new Searching( stmt, dataSBarang, modelDetail, tabelDetailBarang, inputkodeTF, searchBarang);
    sBarang.start();
} 
```

这是搜索对象

```
public class Searching extends Thread{
private Statement stmt;
private List<Barang> dataBarang;
private JTable jTabelBarang;
private JTextField tf;
private boolean cari;
private DefaultTableModel modelBarang;

public Searching(Statement stmt, List<Barang> dataBarang, DefaultTableModel tm, JTable jTabelBarang, JTextField tf, boolean cari){
   this.stmt=stmt;
   this.dataBarang=dataBarang;
   this.modelBarang=tm;
   this.jTabelBarang=jTabelBarang;
   this.tf=tf;
   this.cari=cari;

}

@Override
public void run(){
    String temp="";
    while(cari==true){
    //System.out.println("jalan");
    try{
        String masukan = tf.getText();
        System.out.println(masukan);
    if(!masukan.equals("")&&!masukan.equals(temp)){
        clearTableBarang();
        //System.out.println("Mencari "+ masukan);
        ResultSet rs = stmt.executeQuery("select kode_barang, nama_barang, jumlah_stok, " +
            "minimal_stok, harga_jual, deskripsi_barang from BARANG WHERE (kode_barang LIKE " +
            "'"+masukan+"%')");
        System.out.println(rs);

        while(rs.next()){
            String kode_barang = rs.getString ("kode_barang");
            String nama_barang = rs.getString ("nama_barang");
            int jumlah_stok = rs.getInt("jumlah_stok");
            int minimal_stok = rs.getInt("minimal_stok");
            int harga_jual = rs.getInt("harga_jual");
            String deskripsi_barang = rs.getString ("deskripsi_barang");
            //System.out.println(kode_barang+" "+deskripsi_barang);

            dataBarang.add(new Barang(kode_barang,nama_barang,jumlah_stok,minimal_stok,harga_jual,deskripsi_barang));

            ((DefaultTableModel) jTabelBarang.getModel()).insertRow(jTabelBarang.getRowCount(), new Object[]{kode_barang, nama_barang, jumlah_stok, minimal_stok, harga_jual, deskripsi_barang});

        }
        temp = masukan;
    }
    else if(masukan.equals("")&&!masukan.equals(temp)) {
        clearTableBarang();
        showTableBarang();
        temp = masukan;
    }
    } catch(SQLException s){s.printStackTrace();}
    catch(ArrayIndexOutOfBoundsException s){s.printStackTrace();}
    try {
        sleep(500);

} catch(InterruptedException e){}

    }
}
public void clearTableBarang(){
    int numrows = modelBarang.getRowCount();
    for(int i = numrows - 1; i >=0; i--){
        modelBarang.removeRow(i);
    }

    dataBarang.clear();

}
public void showTableBarang(){
    try{
    ResultSet rs = stmt.executeQuery("select kode_barang, nama_barang, jumlah_stok, minimal_stok, harga_jual, deskripsi_barang from barang");
    while(rs.next()){
            String kode_barang = rs.getString ("kode_barang");
            String nama_barang = rs.getString ("nama_barang");
            int jumlah_stok = rs.getInt("jumlah_stok");
            int minimal_stok = rs.getInt("minimal_stok");
            int harga_jual = rs.getInt("harga_jual");
            String deskripsi_barang = rs.getString ("deskripsi_barang");
            //System.out.println(kode_barang+" "+deskripsi_barang);

            dataBarang.add(new Barang(kode_barang,nama_barang,jumlah_stok,minimal_stok,harga_jual,deskripsi_barang));

            ((DefaultTableModel)jTabelBarang.getModel()).insertRow(jTabelBarang.getRowCount(), new Object[]{kode_barang, nama_barang, jumlah_stok, minimal_stok, harga_jual, deskripsi_barang});

    }
    } catch(SQLException s){s.printStackTrace();}
}
public void delay(){
    try {
        sleep(1000000000);

} catch(InterruptedException e){}
} 
```

}

这是错误：

```
Exception in thread "Thread-4" java.lang.NullPointerException
    at mypkg.Searching.run(Searching.java:47) 
```

仅供参考：第 47 行指向

```
ResultSet rs = stmt.executeQuery("select kode_barang, nama_barang, jumlah_stok, " +
"minimal_stok, harga_jual, deskripsi_barang from BARANG WHERE (kode_barang LIKE " +
"'"+masukan+"%')"); 
```

请帮我解决问题。非常感谢你。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:45:01.527

`NullPointerException`s 是最容易用调试器修复的。只需在该行上放置一个断点，看看是什么`null`。

如果您发布的行是正确的，您甚至不需要调试器，因为唯一可以引发异常的`stmt`是`null`.

*笔记：*

*   `Thread`单独运行数据库查询以避免阻塞 UI是一件好事。但是，在您的情况下，您正在从`Thread`不允许的 UI 更新 UI，这会导致奇怪的问题。所有 Swing 组件都必须在事件调度线程 (EDT) 上访问。有关更多信息，请参阅[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)
*   我确实希望您不会`Thread`像您在问题中指出的那样在文本字段中的每个按键上单独启动。查看 中的代码`Thread`，您从表中删除所有元素，然后重新添加行。因此，如果用户以正常的打字速度输入 5 个字符，您将启动 5 个线程，这些线程很可能同时运行（因为如果您的网络滞后，数据库连接可能不会那么快）。这意味着使用您当前的代码 5 个线程*同时*删除表模型并添加行。即使您将所有 Swing 代码都放在 EDT 上（请参阅我的第一点），您最终仍然会在 EDT 上发布可运行的 5 个线程，从而弄乱您的表模型。我不知道结果表模型是什么，但可能不是你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:08:19.237

显然`stmt`是空的。

你在这里声明它：

```
private Statement stmt;
List<Barang> dataSBarang =new LinkedList();
boolean searchBarang=true;
Searching sBarang; 
```

但是我在任何地方都看不到任何初始化代码，因此该方法调用很可能仍然为空：

```
private void inputkodeTFMouseClicked(java.awt.event.MouseEvent evt){                                         
    sBarang = new Searching( stmt, dataSBarang, modelDetail, tabelDetailBarang, inputkodeTF, searchBarang);
    sBarang.start();
} 
```

# fortran90 - 字符错误fortran 90

> ID：10472249
> 
> 赞同：1
> 
> 时间：2012-05-06T16:38:47.473
> 
> 标签：fortran90

我正在为一个小程序而苦苦挣扎，我找不到如何纠正一个错误。

我的程序：

```
program calcul

! ce programme permet d'effectuer des opérations mathématique de base

IMPLICIT NONE

REAL::x,y

character(len=1)::op

character(len=16)::op_msg

write(*,*)"entrer le type d'opération à effectuer(+,-,/,x,*)"       

read(*,*)op

write(*,*)"entrer le premier nombre de l'opération"

read(*,*)x

write(*,*)"entrer le deuxième nombre de l'opération"

read(*,*)y

if(op=="+") then

  write(*,*)x,"plus",y,"egale",x+y

    else if(op=="-")then

      write(*,*)x,"moin",y,"egale",x-y

    else if ((op==("*").or.("x")) then

      write(*,*)x,"multiplie par",y,"egale",x*y

        else if (op=="/")then

          write(*,*)x,"divise par",y,"egale",x/y

else

write(*,*)"erreur:operation incorrecte"

end if

end program calcul 
```

错误信息：

```
calculette.f90:21.26:

 else if ((op==("*").or.("x")) then

                                     1

Error: Invalid character in name at (1) 
```

任何想法？我不明白为什么“x”是无效字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:45:08.197

```
else if ((op==("*").or.op==("x")) then 
```

您正在评估两个单独的条件，因此每个条件都需要“左”和“右”侧。

# javascript - 我可以使用 OnClick 跳转到锚点/标签吗？

> ID：10472251
> 
> 赞同：0
> 
> 时间：2012-05-06T16:38:54.720
> 
> 标签：javascript, jquery, html

我认为这很容易，但我在跳跃的部分撞了我的头。我有一个页面，在这个页面上我有标签，我想点击“阅读”链接，以便 (1) 打开标签并 (2) 跳转到页面的该部分，以便用户继续阅读。我的代码：

```
<a onclick="$('a[href=#tab-read]').click();">Read</a> 
```

就像我说的，工作得很好，打开了我需要的标签，但实际上并没有跳转到它？我仍然需要向下滚动页面才能到达内容区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:55:44.413

试试这个，你可以强制窗口去锚标记，或者改变选择器去想要的元素:)

```
$(window).scrollTop($('a[href=#tab-read]').offset().top); 
```

# string - MATLAB 从字符串生成组合

> ID：10472254
> 
> 赞同：1
> 
> 时间：2012-05-06T16:39:37.687
> 
> 标签：string, matlab, permutation

我有一个像“FBECGHD”这样的字符串，我需要使用 MATLAB 并生成所有必需的可能排列？那里有一个执行此任务的特定 MATLAB 函数，还是我应该定义一个执行此任务的自定义 MATLAB 函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T17:07:43.123

使用[perms](http://www.mathworks.co.uk/help/techdoc/ref/perms.html)函数。matlab 中的字符串是一个字符列表，因此它将排列它们：

```
A = 'FBECGHD';
perms(A) 
```

您还可以存储输出（例如`P = perms(A)`），并且，如果 A 是 N 个字符的字符串，则 P 是一个 N!-by-N 数组，其中每一行对应一个排列。

如果您对独特的排列感兴趣，可以使用：

```
unique(perms(A), 'rows') 
```

删除重复项（否则 'ABB' 之类的结果会给出 6 个结果，而不是您可能期望的 3 个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-21T17:52:01.450

正如 Richante 回答的那样，`P = perms(A)`这非常方便。您可能还会注意到它`P`是类型`char`，并且不方便子集/选择单个排列。下面为我​​工作：

```
str = 'FBECGHD';
A = perms(str);
B = cellstr(reshape(A,7,[])');
C = unique(B); 
```

似乎也`unique(A, 'rows')`没有删除重复值：

```
>> A=[11, 11];
>> unique(A, 'rows')
ans =

    11    11 
```

但是，`unique(A)`会：

```
>> unique(A)

ans =

    11 
```

无论如何，我都不是 matlab 专业人士，我也没有对此进行详尽的调查，但至少在某些情况下，这似乎`reshape`不是您想要的。请注意，下面给出了`999`和`191`作为`199`其中不正确的排列。所写的 reshape 函数似乎在 上“按列”操作`A`：

```
>> str = '199';
A = perms(str);
B = cellstr(reshape(A,3,[])');
C = unique(B);
>> C

C = 

    '191'
    '199'
    '911'
    '919'
    '999' 
```

下面不产生`999`or `191`：

```
B = {};
index = 1;
while true
    try
        substring = A(index,:);
        B{index}=substring;
        index = index + 1;
    catch
        break
    end
end
C = unique(B)

C = 

    '199'    '919'    '991' 
```

# php - 在网页开始/结束时停止弹跳 (OS X)

> ID：10472255
> 
> 赞同：2
> 
> 时间：2012-05-06T16:40:00.477
> 
> 标签：php, javascript, jquery, bounce

当我在网页的开头或结尾滚动时，会出现反弹效果（仅在 OS X 上），但在例如[www.icloud.com/](https://www.icloud.com/)
上并非 如此“对于我的网站，比如在 iCloud 网站上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:31:45.433

[这为我做到了。](http://www.smilingsouls.net/Blog/20110804114957.html?hSearchCursor=1/2/1#hFileComments)秘密是“溢出：隐藏”。

# hibernate - Netbeans 和休眠

> ID：10472257
> 
> 赞同：0
> 
> 时间：2012-05-06T16:40:09.313
> 
> 标签：hibernate, netbeans, netbeans-7

我第一次安装了 Netbeans 7.1.2，它看起来像 Hibernate jars - 当我检查 hibernate3.jar 时，我看到它是 v3.2.5。看这里，看起来这是 2007 年的版本：http: [//sourceforge.net/projects/hibernate/files/hibernate3/](http://sourceforge.net/projects/hibernate/files/hibernate3/)

为什么 Netbeans 会附带这个旧版本？它不是被严重弃用了吗？我应该计划升级吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T19:49:53.700

我猜没有真正的答案 - 它就是这样！

# jquery - onChange="this.form.submit()" 用于下拉菜单

> ID：10472267
> 
> 赞同：1
> 
> 时间：2012-05-06T16:41:41.010
> 
> 标签：jquery

有没有我不应该使用的原因：

```
onChange="this.form.submit()" 
```

代替

```
$(function () {
        $("#dropdown").live("change keyup", function () {
            $("#theform").submit();
        });
    }); 
```

有人说不应该使用 onChange 方法。我试图找出它背后的逻辑。

该脚本基本上在下拉选项更改时提交表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:43:47.620

功能上，差别不大。

将事物移出内联`onChange=...`属性背后的想法是将 JavaScript 与标记分离。将 JavaScript 与您的标记内联混合会导致难以维护和调试的丑陋页面。

理想情况下，您应该明确区分 JavaScript、CSS 和 HTML。你的功能、风格和结构应该尽可能独立和解耦。

# variables - 动态变量创建语言

> ID：10472268
> 
> 赞同：1
> 
> 时间：2012-05-06T16:41:46.560
> 
> 标签：variables, dynamic, language-agnostic, programming-languages

哪些计算机语言将允许代码从字符串中动态提取变量名，例如用户键入参数“hhh”，然后代码知道使用标识符引用变量：hhh？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:53:58.660

不*完全是*“动态变量创建”，但您可以通过使用关联数组（也称为字典或映射）获得几乎相同的效果。例如，在 Python 中：

```
vars = {}
vars['x'] = 'hello'
vars['y'] = 10 
```

使用上面的代码，字典中的键`'x'`和`'y'`在所有实际用途中就像动态变量一样，例如：

```
print vars['x']
> hello

vars['y'] + 6
> 16 
```

事实上，许多编程语言（Python、JavaScript 等）在底层使用绑定字典来实现变量和范围规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T01:22:02.677

使用关联数组可能是一个更好的主意，但以防万一，php 支持这一点，而无需将代码放在 eval 函数中：

```
 <?php

 class ff {

 var $u = "aagg";
 }

 $y = new ff();
 $i = "u";
 echo $y->$i;

 ?> 
```

# php - 用于 GIFting 的 iTunes API，而不仅仅是搜索？

> ID：10472269
> 
> 赞同：1
> 
> 时间：2012-05-06T16:41:48.200
> 
> 标签：php, api, itunes

我正在努力通过在 Linux 上运行的基于 PHP 的传统网站自动执行应用程序的赠送过程来与 iTunes 交互。

他们的搜索 API 工作正常，我还下载并处理了 App Store 的完整 EPF，但现在需要向上游发送请求并针对 iTunes 提出请求。看起来这应该是一个定义明确的过程，但我遇到了困难，看到很多关于缺乏公共 API 的帖子。

我最接近的线索是这个 perl 模块： [http](http://linux.softpedia.com/get/Programming/Libraries/LWP-UserAgent-iTMS-Client-21878.shtml) ://linux.softpedia.com/get/Programming/Libraries/LWP-UserAgent-iTMS-Client-21878.shtml ，它最后一次更新是在 2008 年左右，所以不好那里。

如果有人可以帮助我直接了解这个主题，将不胜感激！谢谢，查理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T22:08:39.180

您是否试图将您的用户直接发送到“Gift this..”以获得歌曲或应用程序？iTunes 目前不支持应用程序开发人员或附属合作伙伴使用此功能，但您可以对商店进行反向工程以使用相同的 url：

赠送歌曲： [https ://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/giftSongsWizard?salableAdamId=516353670&productType=S](https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/giftSongsWizard?salableAdamId=516353670&productType=S)

赠送应用程序： [https ://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/giftSongsWizard?salableAdamId=479662730&productType=C](https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/giftSongsWizard?salableAdamId=479662730&productType=C)

如果 iTunes 将来更改 url 结构，我不会指望 iTunes 回复您遇到的问题或问题。

# java - swing - 让组件在 JPanel 上单击

> ID：10472271
> 
> 赞同：2
> 
> 时间：2012-05-06T16:42:22.050
> 
> 标签：java, swing, jpanel, mouselistener, grid-layout

好的，所以我有一个带有 GridLayout 的 JPanel。然后网格的每个单元格都包含另一个 JPanel。

我想做的是在“下方”JPanel 上有一个侦听器，然后告诉我点击了哪个“覆盖”的 JPanel - 这样我就可以对它和周围的 JPanel 做出反应，而无需制作覆盖 JPanel意识到他们的立场（他们改变了！！）

有没有办法做到这一点 - 类似于[在 MouseListener 中确定单击的 JPanel 组件。事件处理](https://stackoverflow.com/questions/7340001/determine-clicked-jpanel-component-in-the-mouselistener-event-handling)，但我找不到在顶部抓取组件的方法。

我可能可以抓住坐标并使用该信息来解决 - 但我宁愿不！

任何帮助/指针/提示将不胜感激：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:49:00.810

做同样的事情，但`getParent()`在源上使用。或者，如果层次结构更深，您可以搜索层次结构，甚至可以使用一些辅助方法： `javax.swing.SwingUtilities.getAncestorOfClass`和`getAncestorNamed`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T17:33:43.350

使用`putClientProperty`/ `getClientProperty`，没有什么最简单的......，您可以将无数个 ClientProperty 放入一个对象

```
import java.awt.Color;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.LineBorder;

public class MyGridLayout {

    public MyGridLayout() {
        JPanel bPanel = new JPanel();
        bPanel.setLayout(new GridLayout(10, 10, 2, 2));
        for (int row = 0; row < 10; row++) {
            for (int col = 0; col < 10; col++) {
                JPanel b = new JPanel();
                System.out.println("(" + row + ", " + col + ")");
                b.putClientProperty("column", row);
                b.putClientProperty("row", col);
                b.addMouseListener(new MouseAdapter() {

                    @Override
                    public void mouseClicked(MouseEvent e) {
                        JPanel btn = (JPanel) e.getSource();
                        System.out.println("clicked column " + btn.getClientProperty("column")
                                + ", row " + btn.getClientProperty("row"));
                    }
                });
                b.setBorder(new LineBorder(Color.blue, 1));
                bPanel.add(b);
            }
        }
        JFrame frame = new JFrame("PutClientProperty Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(bPanel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                MyGridLayout myGridLayout = new MyGridLayout();
            }
        });
    }
} 
```

# mongodb - 在文档数组中插入一个新文档

> ID：10472272
> 
> 赞同：-10
> 
> 时间：2012-05-06T16:42:23.417
> 
> 标签：mongodb

我想向以下具有外键“用户”的文档添加一个新文档

```
{
  name:himani,
  User:[
    {
      _id:e25ffgf627627,
      Name:User1
    },
    {
      _id:fri2i2jhjh9098,
      Name:User2
    }
  ]
}; 
```

下面是我尝试将新文档添加到现有文档的代码。我的代码是：

```
var server = MongoServer.Create("mongodb://username:password@localhost:27017/?safe=true");
SafeMode mode = new SafeMode(true);
SafeModeResult result = new SafeModeResult();
var db = server.GetDatabase("himani");
var coll = db.GetCollection("test");
BsonDocument document = new BsonDocument();
document.Add("name", "himani");
result = coll.Insert(document, mode);

BsonDocument nested = new BsonDocument();
nested.Add("1", "heena").Add("2", "divya");
BsonArray a = new BsonArray();
a.Add(2);
a.Add(5);
nested.Add("values", a);
document["3"] = new BsonArray().Add(BsonValue.Create(nested));
coll.Save(document);
var query = Query.And(
    Query.EQ("name", "himani"),
    Query.EQ("3.1", "heena")
);
var match = coll.FindOne(query);

var update = Update.AddToSet("3", new BsonDocument {{ "count", "2" }});
coll.Update(query, update); 
```

我想向 User 数组添加一个新文档。我正在通过上面的代码执行此操作，但它不起作用。请告诉我正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:22:09.743

I don't understand your document structure at all... and the only "user" array I could find in here was a field called "3". Your code does in fact work and appends a document into the "3" array. The below is the result after running your code. Perhaps you could be more clear as to what you want your document to look like after you have "appended" a user.

```
{
  "_id":ObjectId("4fa7d965ce48f3216c52c6c7"),
  "name":"himani",
  "3":[
    {
      "1":"heena",
      "2":"divya",
      "values":[ 2, 5 ]
    },
    {
      "count":"2"
    }
  ]
} 
```

# ios - 如何在触发 UIPopoverController 的 UISlider 上停止值更改

> ID：10472273
> 
> 赞同：0
> 
> 时间：2012-05-06T16:42:34.033
> 
> 标签：ios, ipad, uisplitviewcontroller, uipopovercontroller, uislider

我在情节提要中有一个标准的 iPad splitView 屏幕。在纵向中，masterViewController 显示在弹出框中，这是标准的。在 detailView 中，我添加了一个 UISlider（在 IB 中），它的操作（Sent Events -> Value Changed）连接到 detailViewController 上的 IBAction 方法。当我拖动滑块时，它会将事件发送到 IBAction 方法，这很好：问题是弹出框也会弹出。甚至当我拖到滑块外时也会发生这种情况：主弹出框像一只过度热情的小狗一样不断弹出。

我尝试将 UISlider 子类化以拦截 beginTrackingWithTouch 和 continueTrackingWithTouch 并尝试覆盖 hitTest: 以拦截源自滑块外部的触摸并阻止滑块内部的触摸渗透但无济于事：弹出框认为它是由滑块控制的。我已经下载了 Apple 的示例项目[Popovers](http://developer.apple.com/library/ios/#samplecode/Popovers/Introduction/Intro.html)，我可以在其中简单地复制此行为，但将 UISlider 添加到 DetailView.xib（非故事板）。我该如何驯服这个popover？

# python - 如何在 Amazon S3 上存储scrapy 图像？

> ID：10472274
> 
> 赞同：13
> 
> 时间：2012-05-06T16:42:36.887
> 
> 标签：python, amazon-s3, scrapy

我已经使用 Scrapy 大约 1 周了，想将图像存储到亚马逊 S3，他们提到他们支持将图像上传到亚马逊 S3，但没有记录。那么有人知道如何将 Amazon S3 与 Scrapy 一起使用吗？

[这是他们的媒体管道](https://doc.scrapy.org/en/latest/topics/media-pipeline.html)Scrapy 文档。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T14:17:14.343

您需要 3 个设置：

```
AWS_ACCESS_KEY_ID = "xxxxxx"
AWS_SECRET_ACCESS_KEY = "xxxxxx"
IMAGES_STORE = "s3://bucketname/base-key-dir-if-any/" 
```

就是这样，即。图像将使用[http://readthedocs.org/docs/scrapy/en/latest/topics/images.html#file-system-storage](http://readthedocs.org/docs/scrapy/en/latest/topics/images.html#file-system-storage)中描述的相同目录存储，即：

```
s3://bucketname/base-key-dir-if-any/full/3afec3b4765f8f0a07b78f98c07b83f013567a0a.jpg 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-17T10:32:22.143

自上次回答以来已经过去了几年，有些事情发生了变化（2015 年）。Nick Verwymeren 写了一篇博客文章，详细介绍了如何执行此操作的更新版本。他的博文在这里：[https ://www.nickv.codes/blog/scrapy-uploading-image-files-to-amazon-s3/](https://www.nickv.codes/blog/scrapy-uploading-image-files-to-amazon-s3/)

**在您的 settings.py 文件中：**

```
ITEM_PIPELINES = {
    'scrapy.contrib.pipeline.images.ImagesPipeline': 1
}

# This is going to be the amazon s3 bucket. 
# You need to use the below format so Scrapy 
# can parse it. !!Important don't forget to add 
# the trailing slash.
IMAGES_STORE = 's3://my-bucket-name/'

# The amount of days until we re-download the image
IMAGES_EXPIRES = 180     

# You can add as many of these as you want
IMAGES_THUMBS = {
    'small': (50, 50), 
    'big': (300, 300)
}

AWS_ACCESS_KEY_ID = 'your-access-key'
AWS_SECRET_ACCESS_KEY= 'your-secret-access-key' 
```

为了安全起见，我建议在 Amazon AWS 界面中创建一个新用户，并授予该用户对您的存储桶的只读/写入权限。

现在我们需要安装一些 Scrapy 没有默认提供的包：

```
pip install pillow
pip intall botocore 
```

Pillow 处理图像操作，boto 将提供连接到 S3 的库。

Scrapy 使用您项目中的 image_urls 键来查找它应该下载的图像。这应该是图像 url 的列表。下载后，Scrapy 会将图像位置的详细信息写入图像键。

不要忘记将这些添加到您的 items.py 文件中：

```
class MyItem(scrapy.Item):
    image_urls = scrapy.Field()
    images = scrapy.Field() 
```

现在不要忘记在抓取过程中实际填充 image_urls 键。爬取网站后，给定项目的最终输出将如下所示：

```
'image_urls': [u'http://example.com/images/tshirt.jpg'],
'images': [{ 'checksum': '264d3bbdffd4ab3dcb8f234c51329da8',
         'path': 'full/069f409fd4cdb02248d726a625fecd8299e6055e.jpg',
         'url': 'http://example.com/images/tshirt.jpg'}], 
```

现在前往您的亚马逊 S3 存储桶并查看。您的图像和缩略图都在那里！

再次非常感谢 Nick Verwymeren 的博文准确回答了这个问题！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-16T08:33:21.113

@ 2083 我遇到了同样的问题。没有错误，并且已经安装了 boto。您可以在这里找到答案：[https](https://doc.scrapy.org/en/latest/topics/feed-exports.html#topics-feed-storage-s3) ://doc.scrapy.org/en/latest/topics/feed-exports.html#topics-feed-storage-s3 “Scrapy 仅在 Python 2 上支持 boto”我认为您正在使用像我一样的 Python 3。然后，我安装了 botocore。它奏效了！

# jquery - Fittext 给了我奇怪大小的标题

> ID：10472280
> 
> 赞同：1
> 
> 时间：2012-05-06T16:43:31.553
> 
> 标签：jquery

我正在使用 Fittext 来调整网页上的文本大小，但是当我尝试在标题标签中选择 h1 选择器的两种不同用途和在 Flexslider 中使用另一种用途时，我得到了奇怪的结果。

在页面标题上：

```
<header><h1>A Main Heading</h1></header> 
```

在 Flexslider 设置中：

```
<ul class="slides">
<li>
    <article class="slide">
        <div>
            <a href="http://www.#.co.uk"><img src="_/images/thumb.jpg" alt="#" /></a>
        </div>
        <header><h1>Flexislide Heading</h1></header>
        <div class="slide-content">
            <p> some text </p>
        </div>
        <footer class="entry-meta">
            <p> some meta text </p>
        </footer>
    </article>
 </li>
</ul> 
```

Fittext 调用：

```
// Fit Text
$().ready(function() {
$("h1").fitText(0.9);
$("h2").fitText(1.2);
$("h3").fitText(1.2);
$(".slide header h1").fitText(2.2);
}); 
```

根据第二个 h1 中有多少个字母，单词以不同的大小出现，有些非常适合其他短单词显得很小？

我想知道是否有更好的方法来调用第二组 h1 标题，或者是否与它们在 Flexslider 中使用有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:07:22.460

也许考虑 h2-5 可能是更好的使用元素，因为看起来您在两种非常不同的情况下使用 h1。

# c# - Metro APP - BitmapImage to Byte[] or Download Image from Web and convert it to a Byte[] Array

> ID：10472282
> 
> 赞同：3
> 
> 时间：2012-05-06T16:43:37.843
> 
> 标签：c#, image, stream, windows-runtime, winrt-xaml

有没有办法将 BitmapImage (Windows.UI.Xaml.Media.BitmapImage) 转换为 Byte[] 数组？我没有尝试过任何工作......另一种可能的情况（如果 BitmapImage 无法转换为字节数组）是从网络下载图像，然后将其转换为数组......

但我不知道我该怎么做……如果有人有想法，那就太好了。

当前尝试：

```
 HttpClient http = new HttpClient();
        Stream resp = await http.GetStreamAsync("http://localhost/img/test.jpg");

        var ras = new InMemoryRandomAccessStream();
        await resp.CopyToAsync(ras.AsStreamForWrite());

        BitmapImage bi = new BitmapImage();
        bi.SetSource(ras);

        byte[] pixeBuffer = null;

        using (MemoryStream ms = new MemoryStream())
        {
            int i = bi.PixelHeight;
            int i2 = bi.PixelWidth;
            WriteableBitmap wb = new WriteableBitmap(bi.PixelWidth, bi.PixelHeight);

            Stream s1 = wb.PixelBuffer.AsStream();
            s1.CopyTo(ms);

            pixeBuffer = ms.ToArray();
        } 
```

但它不起作用... i & i2 始终设置为 0。所以 ras 无法正常工作...。这是怎么回事？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:46:09.687

在您的代码中，您永远不会等待 BitmapImage 从网络加载图像，因此当您访问它们时它不知道它的 PixelWidth/PixelHeight。您可以等待它加载 - 例如通过调用“await bi.WaitForLoadedAsync [() ”来使用](http://asyncui.codeplex.com/SourceControl/changeset/view/9678#184056)[AsyncUI](http://bit.ly/AsyncUI)库。如果您想访问解码的像素，这对您没有真正的帮助，因为 BitmapImage 不允许您访问像素，并且当前没有 API 可以将 BitmapImage 转换为 WriteableBitmap。

您可以查看有关该主题的[较早问题。](https://stackoverflow.com/questions/10197170/in-winrt-how-do-i-load-an-image-and-then-wait-only-as-long-as-is-needed-for-it)您需要使用诸如[HttpClient.GetAsync()之类的东西从网络上获取图像文件，然后使用诸如](http://msdn.microsoft.com/en-us/library/windows/apps/hh158912%28v=vs.110%29.aspx)[BitmapDecoder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.imaging.bitmapdecoder.aspx)之类的东西加载它。

# wpf - 在 WPF 项目中使用资源的最佳实践

> ID：10472284
> 
> 赞同：9
> 
> 时间：2012-05-06T16:43:43.490
> 
> 标签：wpf, resources

我知道并使用两种方法来存储和访问应用程序范围内的资源：

1.  属性\资源.resx
2.  创建一个文件夹并在其中放置例如图像，将它们的构建模式设置为 Resource

这两种方法在性能和复杂性方面有什么区别，何时应使用每种方法以及在 WPF 和 VB 或 C# 代码中以何种方式最好地消耗资源？

提前致谢，

朱利安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:13:45.900

在 WPF 项目中引用图像等资源的“自然”方式是您的第二个选择。您可以使用相对 URI 指向图像，WPF 将延迟加载它。[您可以使用pack URI 语法](https://msdn.microsoft.com/en-us/library/vstudio/aa970069(v=vs.100).aspx)引用其他程序集中的资源。

使用`Resources.resx`将代码生成在引用时加载资源的属性。资源可以是字符串、图像、图标或字节数组。在 XAML 中使用`{x:Static}`允许您引用由代码生成器生成的静态属性，但通常您需要一个转换器将资源类型转换为 WPF 可用的类型。

有一些本地化支持`Resources.resx`，如果您想提供多语言应用程序，您可以将翻译后的字符串存储在`Resources.resx`. 但是， Microsoft 描述的[WPF 本地化](http://msdn.microsoft.com/en-us/library/ms788718.aspx)不是基于`Resources.resx`.

对于图像，第二个选项要容易得多。对于字符串，第一个选项可能更容易，但您可以留在 XAML 中并创建一个`ResourceDictionary`.

# php - 如何在 php 会话中保存 css 样式表指针？

> ID：10472287
> 
> 赞同：1
> 
> 时间：2012-05-06T16:43:52.173
> 
> 标签：php, css

我想允许用户通过单击按钮更改我的网站主题颜色。目前我将css指针保存到url上。但是当跳转到其他页面时，css指针从新页面的url中消失了，所以主题颜色恢复为默认值。如何让每个页面都记住当前选中的css？我可以将 css 指针保存到 php 会话吗？怎么做？

代码：

```
<html>
<head>
    <link rel="stylesheet" href="css/theme-<?php if ($css=="blue" || $css == "") echo "blue"; else echo $css; ?>.css" type="text/css" media="screen" title="csstheme" /> 
    <?php require_once("session.php"); ?>       
</head>
    <body>
        <a href="<?php print $_SERVER['PHP_SELF'];?>?<?php print $querystring;?>&css=blue" ><img src="http://plekz.com/images/layouts/blue.jpg" /></a>
        <a href="<?php print $_SERVER['PHP_SELF'];?>?<?php print $querystring;?>&css=green" ><img src="http://plekz.com/images/layouts/green.jpg" /></a> 
        <a href="<?php print $_SERVER['PHP_SELF'];?>?<?php print $querystring;?>&css=pink" ><img src="http://plekz.com/images/layouts/pink.jpg" /></a>
        <a href="<?php print $_SERVER['PHP_SELF'];?>?<?php print $querystring;?>&css=white" ><img src="http://plekz.com/images/layouts/white.jpg" /></a>
        <a href="<?php print $_SERVER['PHP_SELF'];?>?<?php print $querystring;?>&css=red" ><img src="http://plekz.com/images/layouts/red.jpg" /></a>     
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:54:02.477

是的，会议将是一个不错的地方：

您可以创建一个被调用来设置主题会话的文件。例如，通过 QueryString 将所选主题传递给该文件。然后将用户返回到他们来自的页面。

这是未经测试的，但是是这样的：

```
if (isset($_GET["theme"]))
{
    session_start();
    $_SESSION["theme"] = $_GET["theme"];
}

header('Location: ' . $_SERVER['HTTP_REFERER']); 
```

*您也可以添加一个 switch 或 if 语句，以确保主题会话只能设置为几个预定义的值。*

然后你阅读每一页的会话。如果设置了主题变量，则使用该主题，否则将回退到默认主题。

为您提供更多信息：

*   [关于会话的 PHP 手册](http://www.php.net/manual/en/reserved.variables.session.php)

# security - su 在脚本中没有密码

> ID：10472290
> 
> 赞同：0
> 
> 时间：2012-05-06T16:44:10.007
> 
> 标签：security, unix, su

我确定这个问题以前已经回答过，但我找不到我喜欢的答案。我想编写一个 shell 脚本，以另一个用户的身份执行一个非常具体的脚本（我希望任何人都能够以 postgres 用户的身份启动 postgres）。该脚本将具有 710 个权限，因此它可以由某个组执行，但不能由该组读取或写入。

现在，我很确定没有交互式密码提示就无法使用“su”。这有很多很好的理由，我不需要相信这些理由的优点（有人告诉我，比我更精明的人可以从进程列表中获取密码，这很糟糕）。

问题是，更一般地说，我将如何在不滥用 unix 安全范式的情况下完成我想做的事情？有没有办法让用户以另一个用户的身份执行一个非常具体的过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:45:48.933

这种情况正是[`sudo`](http://www.gratisoft.us/sudo/)设计的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:57:15.373

您可以创建一个可执行文件（*不是*shell 脚本）来启动应该以 postgres 用户身份运行的脚本。将可执行文件的所有者更改为 postgres 用户，并设置[setuid](http://en.wikipedia.org/wiki/Setuid)位。

请参阅[以不同用户身份运行 Linux 服务的最佳实践，](https://stackoverflow.com/questions/394984/best-practice-to-run-linux-service-as-a-different-user)以解决 Celada 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-06T17:01:01.327

好吧，您可以使用一个简单的脚本来使用*sudo*以编程方式访问用户，然后执行您想要的所有代码。

这是一个简单的脚本：

```
if [ "$#" -ne 2 ]; then
    echo "Usage: "
    echo "  suprompt <user> <password>"
else
    echo $2 | sudo -sS su $1 
    sudo su $1
fi 
```

该脚本使用两个参数。第一个是您想成为的用户，第二个参数是密码。

它自动工作。

您可以更改最终声明并执行以下操作：`sudo su $1 -c <command>`

我希望这对你有用。

# actionscript-3 - 乘以 15.2 * 6 时，我得到 91.199999 而不是 91.2

> ID：10472291
> 
> 赞同：0
> 
> 时间：2012-05-06T16:44:14.073
> 
> 标签：actionscript-3, apache-flex, flex4.5, flash-builder

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)
> [轮数问题 flex](https://stackoverflow.com/questions/6910560/round-number-problem-flex)

我在使用 flex 4.5 时遇到问题。我想乘以 15.2*6，但不是得到 91.2，而是得到 91.1999999999999。这是我的代码，它非常简单，我尝试了所有变体。谢谢你的帮助。但是，由于我正在处理计费流程，因此我不想使用格式化程序。我不应该需要，我的意思是这是一个非常简单的操作。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955"   minHeight="600">
<fx:Script>
    <![CDATA[
        public var precio:Number = new Number();
        public var cantidad:Number=new Number();
        public var resultado:Number=new Number();
        [Bindable]
        public var numeroToString:String=new String();
        public var numeroToString2:String=new String();
        //public var numerox:num

        protected function button1_clickHandler(event:MouseEvent):void
        {
            precio=parseFloat(precioTxt.text);
            cantidad=parseInt(cantidadTxt.text);
            resultado=precio*cantidad;
            resLabel.text=resultado.toString();

        }

    ]]>
</fx:Script>
<fx:Declarations>
<mx:NumberFormatter id="formateo"
                    rounding="up"
                    precision="3"
                    />  <!-- Place non-visual       elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:TextInput id="cantidadTxt" x="136" y="77" prompt="introduce cantidad"/>
<s:TextInput id="precioTxt" x="136" y="107" prompt="introduce precio"/>
<s:Button x="176" y="155" label="calcular" click="button1_clickHandler(event)"/>
<s:Label id="resLabel" x="304" y="77" fontSize="20"/>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:03:26.837

问题源于浮点数只能表示所有实数的子集。因此，换句话说，对于浮点运算，结果是最接近用浮点数表示的正确结果的值。

如果您正在使用任何与金钱相关的系统，请不要使用浮点数。任何舍入误差很容易在多步计算中累积，这在处理金钱时非常糟糕。你应该只使用整数，那么这些舍入问题就不会发生——至少不会发生乘法。

我相信使用“。” 在 ActionScript 中`Number`生成一个浮点数。使用其中之一`int`或小心保留`Number`为整数。

# ruby-on-rails - 使用 javascript 变量分配参数哈希

> ID：10472292
> 
> 赞同：0
> 
> 时间：2012-05-06T16:44:19.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否可以在**视图侧**使用**javascript 变量**分配**参数哈希**。因为我会在我的参数哈希中做一个复杂的结构，其中涉及嵌套和数组。

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:23:56.243

我能想到的唯一方法是使用 JS 向您的表单添加新字段，为它们提供 ID 和名称，这些 ID 和名称遵循 Rails 在提交表单时如何将元素的名称解析为参数（类似于`id=model_assoc_attributes_N_attr`and `name=model[assoc_attributes][N][attr]`，其中我认为是`Model accepts_nested_attributes_for Assoc`) 时的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:00:43.123

您可以将 JSON 数据发布到 rails 服务器，Rails 将在 params 哈希中提供它，前提是 JSON 响应数据具有正确的标头。有关更多详细信息，请参阅[此线程](https://stackoverflow.com/questions/4914745/post-json-to-rails-server)和[此线程](https://stackoverflow.com/questions/9299604/how-to-save-values-of-a-json-response-in-a-rails-database)。****

# ruby-on-rails - 主干.js 和 gmaps4rails 映射初始化

> ID：10472293
> 
> 赞同：1
> 
> 时间：2012-05-06T16:44:37.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, gmaps4rails

我目前正在尝试将backbone.js 和gmaps4rails 放在我的rails 项目中，但我在地图初始化时遇到了问题。

我有日志消息可以看到我的路由器工作正常并且从主干端到达视图。现在我在我的视图主干文件中并尝试初始化 Gmaps4RailsGoogle 包装器。

在我的 rails 视图中，我正在为 gmaps4rails 生成 div，如下所示：

```
<%= content_tag "div", class: "map_container" do %>
    <%= content_tag "div", id: "map" do %>
    <% end %>
<% end %> 
```

我无法在我的视图中加载地图，这是代码：

```
 console.log "Loading map..."
  Gmaps.map = new Gmaps4RailsGoogle()
  Gmaps.load_map = ->
    Gmaps.map.map_options.auto_adjust = true
    Gmaps.map.initialize()
    Gmaps.map.markers markers
    Gmaps.map.markers_conf.do_clustering = true
    Gmaps.map.create_markers()
    Gmaps.map.adjustMapToBounds()
    Gmaps.map.callback()

  Gmaps.loadMaps() 
```

我知道 loadMaps() 调用应该是 onload，但这似乎已经发生了。那我应该把它放在哪里？

我看到了日志，但在控制台上它告诉我以下错误：

```
google is not defined
http://localhost:3000/assets/gmaps4rails/gmaps4rails.googlemaps.js?body=1
Line 74 
```

是否可以让 gmaps4rails 生成所有必要的脚本，然后访问从主干.js 中提供的变量？

如果这些信息还不够，请告诉我需要哪些信息。

谢谢， 凯尔斯基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:28:10.337

我已经找到了问题的答案，或者至少找到了部分答案。我现在从 rails 的视图`gmaps`中使用以下调用：`index.html.erb`

```
<%= gmaps({ "map_options" => { "zoom" => 15,
                               "auto_adjust" => true,
                               "detect_location" => true,
                               "center_on_user" => true }}, false, true) %> 
```

这将生成我现在从主干实际使用的所需 Gmaps 对象。我的主干视图模板现在是空的，感觉不对。要做到这一点，我需要在我的主干视图中设置 googlemaps。直到现在我还没有找到一个好的答案，但它是这样工作的。在我看来，我已经将初始化设置为监听集合重置，并告诉它调用我的函数来添加这样的标记：

```
initialize: ->
  @collection.on('reset', @loadMarkersOnMap, this)

render: ->
  ...

loadMarkersOnMap: ->
  Gmaps.map.addMarkers @collection.toJSON()
  Gmaps.map.showMarkers() 
```

如果有人尝试这样做，希望这会有所帮助。我还想添加一个解决方案，用于移动调用以在我的主干文件中正确初始化 Gmaps4RailsX。有什么建议么？

# java - 如何转换成韩文首字母

> ID：10472294
> 
> 赞同：3
> 
> 时间：2012-05-06T16:44:43.063
> 
> 标签：java, android, cjk

嗨，我正在开发一个韩国安卓应用程序。

在这里，我实现了一个带有字母部分标题的列表视图来显示联系人。我使用 String 类的 substring 方法来获取第一个字母作为节标题。对于韩国联系人，我也使用子字符串方法取第一个字母。这里我需要将韩国联系人的首字母显示为ㄱㄴㄷㄹㅁㅂㅅㅇㅈㅊㅋㅌㅍㅎ。我真的不知道韩国联系人列表的哪个首字母与这些韩国首字母匹配。

所以请帮助我如何做到这一点或给我参考以遵循...

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:41:07.813

我不认为在韩国应用程序中仅从初始字符获得智能感知是不正常的行为——它似乎通常是用完整的 Jamo 完成的。但是，我认为您没有理由不这样做 - 所以让我们这样做吧。

首先，你错过了双首字母。这些与单曲不同，因为它们确实需要不同的按键（通常是 shift+character）。无论如何，您的姓名缩写列表应该是：

```
ㄱㄲㄴㄷㄸㄹㅁㅂㅃㅅㅆㅇㅈㅉㅊㅋㅌㅍㅎ 
```

输入首字母时，您需要做的第一件事是获取以该特定首字母开头的字符范围。

通过查看 Windows 字符映射表，我可以看到第一个字母 Ka (가) 在 Unicode 点`0xAC00`（或小数点`44032`）处，因此要获得任何范围，必须将这个值添加到我们所做的任何计算中。所以你应该有一个叫`FirstLetter`什么的常量，它的值应该是`44032`.

까 是 at `0xAE4C`（或 decimal `44620`），所以我们现在有一个乘数（即以任何特定首字母开头的字符数 - 对于所有首字母都是相同的，所以`44620-44032`就是`588`。

我们现在有足够的信息来实现您的智能感知。如果您在数组中有首字母缩写词，我们可以使用该数组中键入字符的索引来查找以它开头的字符范围。

因此，如果我们以 ㄱ 开头，我们显然想要返回从 가 到 깋 的所有内容。全部 588 个。所以ㄱ给了我们一个'0'，所以我们有

```
startCodePoint = index * 588 + 44032
// = 0 * 588 + 44032 == 44032 == 가
endCodePoint = (index + 1) * 588 + 44032
// this will include 까 
```

然后您可以通过检查来检查特定字符是否以“ㄱ”开头

```
if(charcode >= startCodePoint && charcode < endCodePoint) { ... } 
```

`charcode`intellisense 列表中一个项目的第一个字符在哪里。

使用类似的方法来找出如何检查字符是否以say '가' 开头。Unicode 中的一切都井井有条，因此这是一项非常简单的任务。

* * *

要获取任何字符的首字母，可以反向使用上述公式。

IE

1.  获取第一个字符的unicode值（例如각）
2.  从此值中减去 44032。
3.  将此值除以 588。
4.  使用该值作为索引从首字母列表中检索首字母。

例如

```
String initials = "ㄱㄲㄴㄷㄸㄹㅁㅂㅃㅅㅆㅇㅈㅉㅊㅋㅌㅍㅎ";
int value = character.codePointAt(0);
value = (value - 44032) / 588;
String initial = initials.substring(value, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:17:52.627

国际化的方式是获取 Unicode int 代码。这通常可能不止一个 16 位字符。

```
int codePoint = strng.codePointAt(0);
int indexToRest = Character.charCount(codePoint); // For your information 
```

# php - mysql中每周的总和

> ID：10472296
> 
> 赞同：1
> 
> 时间：2012-05-06T16:45:04.550
> 
> 标签：php, mysql, database, datetime

我有一张每天页面浏览量的表格。像这样的东西：

```
+------+------------+------+----------+
|  id  | date       | hits | mangaID  |
+------+------------+------+----------+
| 4876 | 1331843400 | 132  |    13    |
+------+------------+------+----------+
| 4876 | 1331929800 | 24   |    236   |
+------+------------+------+----------+
| 7653 | 1331929800 | 324  |    13    |
+------+------------+------+----------+ 
```

我正在尝试使用以下代码从上周获得总和：

```
SELECT sum(hits) as hits FROM om_manga_views WHERE DATE_SUB(CURDATE(),INTERVAL 1 week) <= date and mangaID = '13' 
```

我的问题是我将日期存储为时间，`strtotime`在日期字段中使用 int 类型。

那么我怎样才能得到我想要的！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T16:59:04.513

试试这个：

```
select sum(hits) hitCount from t
where from_unixtime(date) >= current_date() - interval 1 week and mangaId = 11 
```

这是玩的[小提琴。](http://sqlfiddle.com/#!2/06a7c/2)

我稍微更改了您的数据，因为您提供的记录超过 7 天，所以`sum`会返回`0`.

# javascript - 尝试在javascript中使用innerHTML插入整个表格

> ID：10472300
> 
> 赞同：1
> 
> 时间：2012-05-06T16:45:16.873
> 
> 标签：javascript, checkbox, innerhtml

我有希望人们填写的表格，但如果他们已经是会员，我希望他们选中一个复选框和表格中的表格，以切换到表格中的登录表格。有没有办法解决这个问题？

这是一些代码：

```
function CheckMember() {
// Function to Check if Check box is Checked
    var ismember = document.getElementById('checkbox').value;

    // Check if ismember = 0
    if (ismember == '1') {
        document.getElementById("forms").innerHTML = "<table width='25%' border='0' cellpadding='5' cellspacing='5' bgcolor='#<?php echo $tablebg; ?>'>
            <tr><td align='center' colspan='3'>
                <span class='style1'>Already a Member?</span>
                <input id='checkbox' type='checkbox' value='1' name='ismemeber' class='style2' onclick='CheckMember()' /></td></tr>
            <tr><td nowrap='nowrap'><div align='center'><span class='style1'><h3>Please enter username and password</h3></span></div></td></tr>
            <tr><td align='center'><span class='style1'>Login:</span><br /><input type='input' name='access_login' class='style2' /><br /><span class='style1'>Password:</span><br /><input type='password' name='access_password' class='style2' /><p></p><input type='submit' name='Submit' value='Submit' class='style2' /></td></tr>
            </td></tr></table>";

    // If ismember is anything else
    else

        document.getElementById("forms").innerHTML = "<table width='25%' border='0' cellpadding='5' cellspacing='5' bgcolor='#<?php echo $tablebg; ?>'>
            <tr><td align='center'>Already a Member? <input id='checkbox' type='checkbox' name='ismemeber' onclick='CheckMember()' /></td></tr>
            <tr><td nowrap='nowrap'><div align='left'><span class='style1'>First Name</span></div></td><td><span class='style1'>:</span></td>
            <td><div align='left'><input type='text' name='ffname' class='style2' maxlength='25' /></div></td></tr>
            <tr><td nowrap='nowrap'><div align='left'><span class='style1'>Middle Initial</span></div></td><td><span class='style1'>:</span></td>
            <td><div align='left'><input name='fmname' type='text' class='style2' size='3' maxlength='1' /></div></td></tr>
            <tr><td nowrap='nowrap'><div align='left'><span class='style1'>Last Name</span></div></td><td><span class='style1'>:</span></td>
            <td><div align='left'><input type='text' name='flname' class='style2' maxlength='25'/></div></td></tr>
            <tr><td colspan='3'><input type='hidden' name='submitted' value='1' /><span class='style1'>Yes&nbsp;&nbsp;&nbsp;&nbsp;No</span></center></td></tr>
            <tr><td colspan='3'><center><input type='submit' value='Submit' />&nbsp;&nbsp;&nbsp;&nbsp;<input type='reset' value='Reset' /></center></td></tr>
            <tr><td colspan='3' nowrap='nowrap'><center><span class='style5'>All Fields are Required</span></center></td></tr></table>";

};

</script> 
```

HTML部分：

```
<div id="forms">CHANCE THIS</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:04:35.727

像用户 user1370958 所说的那样做，或者你可以把它放在一条线上，我会为生产做

在每个复选框中`onclick`添加

```
`onclick`='return CheckMember(0)' 
 onclick='return CheckMember(1)' 
```

对于 CheckMember 函数，请尝试

```
function CheckMember(isMember) { 

/*
if(document.getElementById('checkbox')){
var ismember = document.getElementById('checkbox').value;
}*/

// Check if ismember = 0
if (isMember == '1') {
    document.getElementById("forms").innerHTML = "<table width='25%' border='0' cellpadding='5' cellspacing='5' bgcolor='#<?php echo $tablebg; ?>'><tr><td align='center' colspan='3'><span class='style1'>Already a Member?</span><input id='checkbox' type='checkbox' value='1' name='ismemeber' class='style2' onclick='return CheckMember(0)'  checked /></td></tr><tr><td nowrap='nowrap'><div align='center'><span class='style1'><h3>Please enter username and password</h3></span></div></td></tr><tr><td align='center'><span class='style1'>Login:</span><br /><input type='input' name='access_login' class='style2' /><br /><span class='style1'>Password:</span><br /><input type='password' name='access_password' class='style2' /><p></p><input type='submit' name='Submit' value='Submit' class='style2' /></td></tr></td></tr></table>";

// If ismember is anything else
}    else {

    document.getElementById("forms").innerHTML = "<table width='25%' border='0' cellpadding='5' cellspacing='5' bgcolor='#<?php echo $tablebg; ?>'><tr><td align='center'>Already a Member? <input id='checkbox' type='checkbox' name='ismemeber' onclick='return CheckMember(1)' /></td></tr><tr><td nowrap='nowrap'><div align='left'><span class='style1'>First Name</span></div></td><td><span class='style1'>:</span></td><td><div align='left'><input type='text' name='ffname' class='style2' maxlength='25' /></div></td></tr><tr><td nowrap='nowrap'><div align='left'><span class='style1'>Middle Initial</span></div></td><td><span class='style1'>:</span></td><td><div align='left'><input name='fmname' type='text' class='style2' size='3' maxlength='1' /></div></td></tr><tr><td nowrap='nowrap'><div align='left'><span class='style1'>Last Name</span></div></td><td><span class='style1'>:</span></td><td><div align='left'><input type='text' name='flname' class='style2' maxlength='25'/></div></td></tr><tr><td colspan='3'><input type='hidden' name='submitted' value='1' /><span class='style1'>Yes&nbsp;&nbsp;&nbsp;&nbsp;No</span></center></td></tr><tr><td colspan='3'><center><input type='submit' value='Submit' />&nbsp;&nbsp;&nbsp;&nbsp;<input type='reset' value='Reset' /></center></td></tr><tr><td colspan='3' nowrap='nowrap'><center><span class='style5'>All Fields are Required</span></center></td></tr></table>";
}
}; 
```

.

```
<div id="forms"><script>CheckMember()</script></div> 
```

您需要调整复选框以保留选中的值，看看是否有帮助

# android - 添加多行文本时按钮移动

> ID：10472301
> 
> 赞同：12
> 
> 时间：2012-05-06T16:45:18.513
> 
> 标签：android, button, text, multiline

我正在尝试向按钮添加多行文本，但是在尝试此问题的答案时：

[“https://stackoverflow.com/questions/8103776/how-can-i-display-multiple-lines-of-text-on-a-button/8103880#8103880”](https://stackoverflow.com/questions/8103776/how-can-i-display-multiple-lines-of-text-on-a-button/8103880#8103880)

我的按钮向下移动，或在其自身上方添加一个边距。任何想法为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-24T16:03:41.260

尝试`android:baselineAligned="false"`在放置按钮的布局中进行设置。

还要检查这个主题：[两行按钮的对齐问题](https://stackoverflow.com/questions/6918138/alignment-issues-with-two-line-button)。

# c - c: 从文件中读取

> ID：10472302
> 
> 赞同：2
> 
> 时间：2012-05-06T16:45:19.340
> 
> 标签：c, file

在这个函数 findBookByTitle 中，应该发生的是 fp 打开，如果标题与给定的函数匹配，它将打印标题。假定标题是唯一的，因此一旦找到匹配项，它就可以停止搜索。我的问题是我不完全确定如何将标题与文件中的内容相匹配。这是我目前所拥有的......

```
 void findBookByTitle(FILE* fp, char title[])
    {
       FILE * fp = fopen(fp, "r");
       while(!EOF && *fp = title){
          printf("Title: <%c> \n", title);
       }
       if(EOF && *fp != title ){
          printf("No books match the title: <%c> ", title);
       }
    } 
```

同样，当我编译时，我得到了一些错误，解决这些错误可能毫无意义，因为我的函数仍然不完整，但其中一些确实让我感到困惑。

34：错误：“fp”重新声明为不同类型的符号 32：注意：“fp”的先前定义在这里 34：警告：从不兼容的指针类型 /usr/include/stdio.h:251 传递“fopen”的参数 1 ：注意：预期的'const char * **restrict** '但参数的类型是'struct FILE *' 35：错误：二进制&&的操作数无效（有'int'和'FILE'）38：错误：二进制操作数无效！=（有 'FILE' 和 'char *')

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T16:51:04.683

1.  您的函数被声明为将 a`FILE *`作为其第一个参数，但随后它继续将该参数视为文件名并尝试使用它打开*另一个* `FILE *`（同名！）。确定参数是 a`FILE *`还是 a `char *`，并相应地更改代码。

2.  您正在尝试`EOF`使用`fp`. 这不是那么简单。试试`feof(fp)`吧。

3.  `fp`您正在尝试使用`*fp = title`(and `*fp != title`)读取。这根本没有任何意义。您需要使用函数来读取文件指针，例如`fgets`or `fscanf`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:50:02.097

当您使用这样的赋值 ( `*fp = title`) 时，您正在用指向 char 的指针覆盖文件指针中的值。之后各种问题都会发生。

您可能还需要删除该行：

```
 FILE * fp = fopen(fp, "r"); 
```

由于您已经有一个`FILE *`fp 不是要打开的文件的名称。这是一个已经打开的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T18:12:23.957

1.  你有`FILE *pt`两次
2.  您不能将`FILE`指针与字符串 ( `char *`)进行比较
3.  您不能使用该选项输出字符串`%c`
4.  `EOF`is`-1`并且对于操作符`!`，如果`EOF`is是真的，`0`但`EOF`永远不会改变
5.  你的算法很奇怪

正确的代码应该是正确的（到目前为止，我已经了解您的问题）：

```
#include <stdio.h>
#include <string.h>

void findBookTitle(char *path, char **title, int titles) {
    FILE *fp = fopen(path, "r");
    char line[100];
    int i = 0, count = 0;
    while (fgets(line, 100, fp) != NULL) {
        while (i < titles)
            if (!strcmp(title[i], line)) {
                printf("Title: <%s>\n", line);
                count++;
            }
        i = 0;
    }
    if (!count)
        printf("No books found.\n");
} 
```

# gwt - 如何使用 RequestFactory 调用 JSON-RPC 服务

> ID：10472306
> 
> 赞同：0
> 
> 时间：2012-05-06T16:45:57.427
> 
> 标签：gwt, requestfactory, json-rpc

或者在 GWT 上存档的最佳方法是什么。

请发布一些如何使用 RequestFactory 调用带有参数的简单服务的代码。

更新：

托马斯，我已经用你的建议更新了我的代码。

```
public interface MyRequestFactory extends RequestFactory {
    MyRequestFactory INSTANCE = GWT.create(MyRequestFactory.class);

    MyRequestContext myRequestContest();
}

@JsonRpcService
public interface MyRequestContext extends RequestContext {

    UserFullFormattedName userFullFormattedName();

    @JsonRpcWireName(value = "GetUserFullFormattedName")
    public interface UserFullFormattedName extends Request<String> {
    }
}

public static EventBus EVENT_BUS = GWT.create(SimpleEventBus.class);

public void onModuleLoad() {

    DefaultRequestTransport requestTransport = new DefaultRequestTransport();
    requestTransport.setRequestUrl("../services/service.ashx");

    MyRequestFactory.INSTANCE.initialize(EVENT_BUS, requestTransport);

    MyRequestFactory.INSTANCE.myRequestContext().userFullFormattedName().fire(new Receiver<String>() {

        @Override
        public void onSuccess(String response) {
            System.out.println(response);

        }
    }); 
```

此代码失败：

```
11:37:49.722 [ERROR] [modules] Uncaught exception escaped
java.lang.AssertionError: java.lang.String is not an EntityProxy type
    at com.google.web.bindery.requestfactory.shared.impl.IdFactory.asEntityProxy(IdFactory.java:66)
    at com.google.web.bindery.requestfactory.shared.impl.IdFactory.createId(IdFactory.java:229)
    at com.google.web.bindery.requestfactory.shared.impl.IdFactory.allocateId(IdFactory.java:41)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$JsonRpcPayloadDialect.processPayload(AbstractRequestContext.java:251)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$5.onTransportSuccess(AbstractRequestContext.java:1108)
    at com.google.web.bindery.requestfactory.gwt.client.DefaultRequestTransport$1.onResponseReceived(DefaultRequestTransport.java:136)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:28:57.397

`Cat`应该用`ValueProxy`注释`@JsonRpcProxy`：

```
@JsonRpcProxy
interface Cat extends ValueProxy {
   String getName();
   String getId();
} 
```

另外，我不确定`@JsonRpcWireName`是否需要，因为它的值与方法名称相同。

# c# - c#中变量的递归扩展

> ID：10472308
> 
> 赞同：1
> 
> 时间：2012-05-06T16:46:27.430
> 
> 标签：c#, variables, implementation

我需要实现一个程序，其中我将有一个基本变量`x`及其扩展等`exp(x), ln(x), exp(5ln(x))`。我曾想过有一个 interface `IExtensible`，但我不确定如何实现这些变量。我考虑过的选项是使用一些列表来保持扩展的顺序和类型。但我不确定这种实现是否容易处理：我需要将这些扩展用作有理函数中的变量。

编辑：我添加了我最后需要的一个小样本：

> x^2 + 3exp(ln(2x)) - ln(x^4)

这种表达式被传递给`F`将执行一些计算的函数。该函数`F`需要确切地知道有哪些扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:04:59.537

您需要的是一个数学解析器，碰巧我为 .NET 创建了一个数学解析器，您可以[从这里](http://www.codeproject.com/Articles/274093/Math-Parser-NET)下载它。它具有完整的源代码，它允许您设置自定义委托函数来创建内置操作。此外，它具有变量支持，因此您可以定义一个变量（例如`x`在您的示例中），并且您可以使该变量等于您想要的任何内容。看看这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:04:27.867

您可能正在寻找类似[NCalc](http://ncalc.codeplex.com/)的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:35:48.740

很难收集你在这里问的到底是什么，但听起来你可能想使用一些匿名函数来定义你的“扩展”，然后你可以像你说的那样将它们存储在一个查找表中：

这是一些基本的示例代码，带有一个递归示例，以演示该想法：

```
Func<long,long> sqr = 
    ( x ) => 
    { 
        return x * x;
    };

Func<long,long> factoral = 
    ( n ) =>
    {
        return n > 1 ? 
            n * ( long )( MethodInfo.GetCurrentMethod().Invoke( null, new object[] { n - 1 } ) ) :
            n;
    };

var DataObjects = new []
{
    new { Name = "sqr(1)!", Value = factoral( sqr( 1 ) ) },
    new { Name = "sqr(2)!", Value = factoral( sqr( 2 ) ) },
    new { Name = "sqr(3)!", Value = factoral( sqr( 3 ) ) },
    new { Name = "sqr(4)!", Value = factoral( sqr( 4 ) ) },
    new { Name = "sqr(5)!", Value = factoral( sqr( 5 ) ) },
};

DataObjects.ToList().ForEach
(
    d =>
        Console.WriteLine( d )
); 
```

产生输出：

命名 sqr(1)！值 1

命名 sqr(2)！价值 24

命名 sqr(3)！价值 362880

命名 sqr(4)！价值 20922789888000

命名 sqr(5)！价值 7034535277573963776

希望这可以帮助，

# node.js - 从异常访问实例变量。咖啡脚本中的函数

> ID：10472316
> 
> 赞同：1
> 
> 时间：2012-05-06T16:47:30.377
> 
> 标签：node.js, coffeescript

我正在尝试从异常函数访问@cols，即使它已定义，它也未定义（在倒数第二行）。

```
csv = 需要'csv'

类库存

    构造函数：（@file）->
        @cols = {}      

        #读取文件并推送到cols
        .csv（）。
        从路径（@文件，列：真）。
        在“数据”上，（d，索引）->
            #推送到列
            控制台.log @cols

库存 = 新库存（__dirname + '/sample.csv'）

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:52:12.687

您需要使用粗箭头而不是细箭头。

```
(d, index)=> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T16:55:18.507

使用 => 而不是 -> 这样您就可以使用 @ 并获取对外部实例的引用

```
csv = require 'csv'

class Inventory

    constructor: (@file) ->
        @cols = {}      

        #Read the file and push to cols
        csv().
        fromPath(@file,columns: true).
        on 'data', (d,index) =>
            #push to cols
            console.log @cols

inventory = new Inventory(__dirname + '/sample.csv') 
```

# json - json 回调 flickr api

> ID：10472317
> 
> 赞同：2
> 
> 时间：2012-05-06T16:47:35.043
> 
> 标签：json, api, callback, flickr

我检查了我的 url 工作正常，但无法接听电话。有谁看到这里可能出了什么问题？谢谢。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $.getJSON("http://api.flickr.com/services/rest/?method=flickr.photos.search&
    api_key=e4a2bd36f274dc8cbec976f87d31ac91&text=dandy&format=json&jsoncallback=?", function(data)
    {
       $.each(data.items, function(i,item){
       $("<img/>").attr("src", item.media.m).appendTo("#images")
      .wrap("<a href='" + item.link + "'></a>");
     });
       $('#images').cycle({
         fx: 'fade',
         speed: 'fast',
         timeout: 0,
         next: '#next',
         prev: '#prev'
      });
    });
 }); 
```

I have also tried with the authorization token and api signature: [http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=e4a2bd36f274dc8cbec976f87d31ac91&text=dandy&format=json&auth_token=72157629614542470-3c6e999c34de2fef&api_sig=1ba75b356a910f6b2872f356153075bf](http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=e4a2bd36f274dc8cbec976f87d31ac91&text=dandy&format=json&auth_token=72157629614542470-3c6e999c34de2fef&api_sig=1ba75b356a910f6b2872f356153075bf)

在萤火虫中出现此错误：JSON.parse：JSON 数据后出现意外的非空白字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:58:02.460

您的脚本似乎期望其中的项目（data.item、item.media.m 等）具有类似 RSS 提要的结构。这不是从 Flickr API 返回的 JSON 数据的格式。

试试这个：

```
$(document).ready(function() {
    $.getJSON("http://api.flickr.com/services/rest/?method=flickr.photos.search&  api_key=3a68f22971d8d66b521b362c312c175c&text=dandy&extras=url_m&format=json&jsoncallback=?", function(data)
    {
       $.each(data.photos.photo, function(i,item){
       $("<img/>").attr("src", item.url_m).appendTo("#images")
      .wrap("<a href='" + item.url_m + "'></a>");
    });
    $('#images').cycle({
        fx: 'fade',
        speed: 'fast',
        timeout: 0,
        next: '#next',
        prev: '#prev'
    });
    });
});​ 
```

请注意 url 中包含“extras=url_m”，以及对 data.photos.photo 和 item.url_m 的更改。

# haskell - Foldr 将 acc 与空列表进行比较

> ID：10472318
> 
> 赞同：1
> 
> 时间：2012-05-06T16:47:40.550
> 
> 标签：haskell, fold

我正在尝试编写函数，但我不知道为什么我不能那样做

```
ssm'  = foldr (\x acc -> if acc == [] then [x]++acc else if (x > (maximum acc)) then [x]++acc else acc) [] 
```

请给我一个线索。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T19:25:07.377

顺便说一句，您的代码看起来太复杂了。你用错了`if`，`[x]++acc`只是`x:acc`。`acc`每一步扫描`maximum`都是浪费，因为它最大的元素*必须*是它的头部。总而言之，我会写：

```
ssm' :: Ord a => [a] -> [a]
ssm' = foldr go [] where
  go x [] = [x]
  go x ms@(m:_) 
    | x > m = x:ms
    | otherwise = ms 
```

如果你*真的*喜欢单线，试试

```
import Data.List
ssm' xs = reverse $ map head $ groupBy (>) (reverse xs) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T16:58:16.083

您遇到了[单态限制](http://www.haskell.org/haskellwiki/Monomorphism_restriction)。您可以通过添加类型签名来修复它。

```
ssm' :: Ord a => [a] -> [a]
ssm' = ... 
```

# c# - C# 中与 aspnet_users 的代码优先关系

> ID：10472324
> 
> 赞同：2
> 
> 时间：2012-05-06T16:48:10.517
> 
> 标签：c#, asp.net-mvc-3, ef-code-first, relation

如何将使用 Code-First 方法创建的表链接到 ASP.NET 的默认用户表？我正在使用 C# 中的 Entity Framework 4.3.1 和 MVC3。

我正在做的项目是为组织比赛的组织设计的。当他们创建锦标赛时，必须创建一个链接到该锦标赛的新用户，以便当该用户登录时，他只能使用该特定锦标赛。

知道如何与 Code-First 建立这种关系吗？

在此先感谢，巴特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:20:22.517

我会将这些表部署到您的数据库中以供参考，然后将它们复制到模型中。只需确保为 FK 等获得正确的所有关系。然后您应该能够让 EF 部署数据库并使用内置的成员资格表。

如果您曾经使用 SimpleMembership 升级到 MVC4，请查看以下示例：http: [//blog.spontaneouspublicity.com/includes-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)

# ios - iOS 陀螺仪制作虚拟地平线

> ID：10472327
> 
> 赞同：6
> 
> 时间：2012-05-06T16:48:30.923
> 
> 标签：ios, gyroscope

我希望使用陀螺仪为我的应用程序包含一个虚拟地平线，[就像这个](http://www.zone-numerique.com/uploads/Logiciels/ProCamera/Procamera3/procamera_horizon.jpg)

我在陀螺仪上找到了很多文档，我想我使用偏航，但我不知道如何用重力校准。

有人能帮助我吗 ？？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T14:36:34.177

我用这个解决了我的问题：

```
- (void)updateImage: (NSNumber *)rotNum
{
    self.image.transform = CGAffineTransformMakeRotation([rotNum floatValue]);
}

// call the above function to rotate the image in reference to the horizon
[motionManager startDeviceMotionUpdatesToQueue: gyroQueue
                                   withHandler: ^(CMDeviceMotion *motion, NSError *error) {
                                                       [self performSelectorOnMainThread: @selector(updateImage:)
                                                                              withObject: [NSNumber numberWithDouble: atan2(motion.gravity.x, motion.gravity.y)-M_PI]
                                                                           waitUntilDone: NO];
                                               }]; 
```

# android - 当使用多个 registerForContextMenu 调用时，菜单项信息为空

> ID：10472329
> 
> 赞同：0
> 
> 时间：2012-05-06T16:48:38.770
> 
> 标签：android, contextmenu

根据Android文档`registerForContextMenu`可以多次调用不同的视图：

> 为给定视图注册要**显示的上下文菜单（多个视图可以显示上下文菜单**）。

我尝试将此功能用于以下布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/host"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:longClickable="true" >
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/list"
android:layout_width="match_parent"
android:layout_height="wrap_content" >
</ListView> 
```

在源代码`registerForContextMenu`中，我同时调用主机和列表。不幸的是，这样的注册会导致一个问题：在`onContextItemSelected(MenuItem item)`我总是`null`通过`item.getMenuInfo()`. 当然，在这个用例中，长按是在列表视图项上进行的，因此菜单项通常不应为空。如果我删除`registerForContextMenu`主机布局，则菜单信息会在`onContextItemSelected`.

我需要上下文菜单的多次注册，以确保在屏幕上的任何位置显示它以进行触摸（可以在另一个问题中找到详细信息 -[此处](https://stackoverflow.com/q/10447676/1102014)）。简而言之，上下文菜单应该出现在项目和任何项目之外的触摸上，如果为项目调用它，我需要获取项目位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:38:00.177

这不是因为您使用了多个 registerForContextMenu，而是因为您在包含另一个的视图上设置了一个。所以它们都注册为来自主机而不是列表。

常规视图不会有额外的菜单信息。

尝试关闭主机的焦点，让它进入列表。它也应该仍然适用于主机，它只是不会在列表之前抓住焦点。

# android - 使用 Android NDK 实现 UVC 驱动程序和内核不支持的相机的原始 USB 连接

> ID：10472330
> 
> 赞同：5
> 
> 时间：2012-05-06T16:48:38.690
> 
> 标签：android, camera, android-ndk, usb, device-driver

我正在寻找一种方法来让兼容 UVC 的 USB 摄像头在默认情况下没有这些 UVC 摄像头的内核驱动程序的其他 Android 设备上工作。

我不想根植这些设备，也不想更改它们的图像/内核，因为普通客户以后应该能够在每台平板电脑上使用相机并且没有特殊要求（应用程序除外）。

您是否认为有可能在 Android 3.1 及更高版本 (http://developer.android.com/guide/topics/usb/host.html) 中使用 Android 的 USB 类与未知设备建立原始连接，或者我只能将它与内核支持和识别的设备一起使用？

如果可能的话，我会对使用 Java/NDK 集成 UVC 驱动程序以从中获取视频流感兴趣。至少这是我粗略的想法。

你认为这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T04:55:04.117

如果您在那个根深蒂固的部分上妥协，那绝对是可能的。我做了同样的项目并最终成功了。在 uvc 代码中，您将打开 /dev/video1 或 video0 节点，默认情况下，大多数设备上没有用户权限。

简单地说，

这取决于两件事：

1) 连接 USB 摄像头时，是否正在创建摄像头节点。它应该在主编号为 81 的 /dev 目录中（表示 V4l2 设备）

2）对于该设备节点，您是否拥有用户权限。

这是您将面临的两个障碍。

首先的解决方案不在我们手中，因为它取决于供应商。例如，Acer 选项卡是创建的，但在三星 Galaxy 中却没有。原因是内核中缺少对 V4L2 或 UVC 模块的支持。

第二个的解决方案是，如果您是 root 用户，您可以更改节点的权限。

这是一个相当大的项目，如果你从头开始，应该需要一些时间。祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:20:55.647

是的，最新版本的 Android 用户空间中支持 USB 主机的目的是允许您与没有内核驱动程序的 USB 设备通信。从概念上讲，它听起来有点类似于 libusb 的想法，尽管它不是 libusb。

[http://developer.android.com/guide/topics/usb/host.html](http://developer.android.com/guide/topics/usb/host.html)

在我看来（纯粹的、未经证实的推测）可能存在这样的情况，即对设备的部分内核驱动程序支持可能会干扰尝试以这种方式直接从用户空间与其对话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:08:54.277

> 我正在寻找一种方法来让兼容 UVC 的 USB 摄像头在默认情况下没有这些 UVC 摄像头的内核驱动程序的其他 Android 设备上工作。

这取决于内核，并且编译的驱动程序也会考虑硬件是否支持它。

从它的声音来看 - 它类似于 USB On-The-Go 机制......现在，如果你说你不希望设备被植根，不幸的是，对于 USB OTG 机制，你确实需要 root 才能利用它以及 ramdisk 内 /etc 目录中的脚本机制来处理插件事件。

# ios - iOS 中的 SOAP 请求

> ID：10472333
> 
> 赞同：2
> 
> 时间：2012-05-06T16:49:07.490
> 
> 标签：ios, soap

我有这个 SOAP 请求，我在 php 中使用它来获取一些信息，但我似乎无法弄清楚如何在 Xcode 中执行此操作，希望有人能指出我正确的方向

```
<?php
$wsdl_url = "https://www.service.com/mySoapService.wsdl";
$client = new SoapClient($wsdl_url);
var_dump($client->__getFunctions());

try {
    $userName = 'myUsername';
    $password = 'myPassword';
    $result = $client->retrieveUsage(new SoapParam(array("UserId" => $userName, "Password" => $password), "RetrieveUsageRequestType"));

    print '<pre>';
        print_r($result);
    print '</pre>';
} catch (Exception $e) {
    echo $e->getMessage();
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:55:22.327

添加您的 WSDL，创建存根，然后开始使用 iOS 应用程序中的 Web 服务。

[http://sudzc.com/](http://sudzc.com/)

我希望这就是你要找的。

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T18:39:56.993

我使用[http://easywsdl.com](http://easywsdl.com)生成类。与我的 WS 完美搭配

# webmatrix - 如何在 webmatrix webimage helper 上使用 ajax post，尤其是在 webimage.getImagerequest()

> ID：10472334
> 
> 赞同：0
> 
> 时间：2012-05-06T16:49:12.693
> 
> 标签：webmatrix

我一直在尝试使用 webmatrix 中的 webimage 助手使用 ajax 上传图像，但我不清楚如何将数据从 ajax 帖子传递给 webimage.getImageRequest("Image") 方法。这个助手似乎检索发布页面表单时，它的文件从浏览器上传数据。对我来说，我不想刷新表单...我只想让 ajax 处理进程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:24:11.123

这里的问题不是 WebHelper - 上传的文件没有与 ajax 请求一起发布：

[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

所以你可能得到一个文件名，但没有内容。上面的那个线程显示了一些可以与 WebHelper 一起正常工作的变通方法。我在uploadify方面也很幸运：

[http://www.uploadify.com/](http://www.uploadify.com/)

快乐编码！

# jquery-ui - jQuery UI 自动完成：当 Chrome 失去焦点时下拉菜单消失

> ID：10472335
> 
> 赞同：4
> 
> 时间：2012-05-06T16:49:13.277
> 
> 标签：jquery-ui, google-chrome, jquery-ui-autocomplete

（注意我还没有在 IE FF 或 Safari 中测试过这个，我希望在自动完成上有一些设置可以让这个工作......）

在 Chrome 中，当我在触发 jQuery UI 自动完成下拉菜单的框中键入一些文本时，当我将焦点切换到另一个应用程序（我的编程应用程序 Visual Studio）时，下拉菜单就会消失。

当浏览器在操作系统中失去焦点时，是否有设置使自动完成下拉菜单“粘住”并保持可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:12:21.763

当您切换到另一个应用程序`onblur`时，浏览器将触发一个事件，这就是隐藏自动完成菜单的原因。完成这种“粘性”行为的最佳选择是将`onfocus`事件处理程序附加到`window`然后打开自动完成菜单。

```
$(function() {
    var autocomplete = $( 'whatever' ).autocomplete();

    $( window ).on( 'focus', function() {
        autocomplete.autocomplete( 'search' );
    });
});​ 
```

我在这里有一个活生生的例子 - [http://jsfiddle.net/RmALY/1/show/](http://jsfiddle.net/RmALY/1/show/)。

# ruby-on-rails - ApplicationController 中的缓存方法

> ID：10472337
> 
> 赞同：1
> 
> 时间：2012-05-06T16:49:40.143
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 ApplicationController 中创建了一个辅助方法，允许访问所有页面上的最新帖子。

有什么办法可以缓存它以阻止我的应用程序经常访问数据库？

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  helper_method :recent_posts

  def recent_posts
    @recent_posts = Post.published.recent
  end
end 
```

我已经尝试过 cache_action :recent_posts 但是，从查看日志来看，应用程序似乎仍然命中了数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:59:44.300

听起来您正在寻找[片段缓存](http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching)。

试着把它放在一个部分并做这样的事情：

```
<% cache do %>
  <% Posts.published.recent.each do |p| %>
    <%= link_to p.name, post_url(p) %>
  <% end %>
<% end %> 
```

# php - 保存按钮不起作用 joomla

> ID：10472339
> 
> 赞同：1
> 
> 时间：2012-05-06T16:49:48.053
> 
> 标签：php, joomla

我有两种布局，一种是default.php，另一种是默认视图中的edit.php 我有一个编辑一个+插入ID的链接

```
<td><a href="index.php?option=com_searchtour&view=searchtour&layout=edit_one&cid=<?php echo $order['id'];?>"><?php echo $order['username'];?></a></td> 
```

一切正常，但保存按钮/删除按钮不起作用。我也无法在 default.php 的第二个视图（edit.php）中检索信息一切正常，也许我写了一个错误的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:45:29.303

信息不多，但您可能需要将链接替换为以下内容：

```
index.php?option=com_searchtour&task=searchtour.edit_one&cid=<?php echo $order['id'];?>"><?php echo $order['username'] 
```

即使 Joomla 将使用`task=`Joomla 中的运行附加方法重写您上面的内容，所以它知道该做什么。

# iphone - 设置者/获取者未设置/获取

> ID：10472344
> 
> 赞同：1
> 
> 时间：2012-05-06T16:50:26.330
> 
> 标签：iphone, objective-c, ios5

我有一个 model.h 和 model.m 来保存各种视图控制器访问数据的数据和变量（使用 MVC）。问题是，当我尝试设置并从中获取变量时，它们始终为 0。我显然做错了什么，但不知道。

这是我的 model.h 和 model.m（更改了名称，这样更容易。

模型.h

```
@interface modeler : NSObject
{
   int abc;
   int def;
}
@property (nonatomic,assign) int abc;
@property (nonatomic,assign) int def; 
```

模型.m

```
#import "modeler.h"
@interface modeler()
@end
@implementation modeler
@synthesize abc = _abc;
@synthesize def = _def; 
```

这就是我设置两个变量的方式，这里是视图控制器。vc.h

```
#import "modeler.h"
@interface vcViewController : UITableViewController
@property (nonatomic,strong) modeler *datas;
@end 
```

vc.m

```
@interface vcViewController ()
@end
@implementation vcViewController
@synthesize datas = _datas; 
```

这就是我尝试将它们设置为 vc.m 中的某些内容的方式

```
NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
NSLog(@"1-%i",selectedRowIndex.row);
_datas.abc = selectedRowIndex.row;
NSLog(@"2-%i",_datas.abc); 
```

选定的行打印出 2，但 _data.abc 始终为 0。我错过了什么？我猜它没有调用它，也许是因为它的一个实例？有什么快速提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:30:27.670

我看不到您在哪里将视图控制器的`datas`属性（或ivar）设置为您的类`_datas`的实例。`modeler`如果这没有发生，`_datas.abc`则向 nil 发送一条消息——因此将其用作 setter 不会执行任何操作，并将其用作 getter 返回 0。

此外，您在您的类上声明`abc`和`def`作为 ivars `modeler`，然后声明具有相同名称但不同 ivars (`_abc`和`_def`) 的属性。这几乎可以肯定不会导致您看到的问题，但以后肯定会导致混乱。最好不要声明 ivars（并让`@synthesize`指令负责）或不在`@synthesize`指令中指定 ivars（以便默认使用同名的 ivars。我更喜欢前者。

此外，它也可能与您的问题无关，但通常使用生成的访问器而不是 ivars 是一件好事，除非您有充分的理由不这样做。（也就是说，使用`self.datas`而不是`datas`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T16:52:49.290

您是在告诉编译器使用变量`_abc`并`_def`在 @synthesize 指令中，因此设置器不会触及实例变量`abc`和`def`. 我没有看到确切的问题，但是您肯定会混淆自己和/或编译器，因为属性和实例变量具有相同的名称，但使用不同的 ivars 来支持属性。此外，尽量不要直接访问 ivars，就像您`_datas`在最后一个片段中所做的那样。您已经创建了访问器，因此请使用它们。一旦你这样做了，我希望你的问题会消失。

# jquery - .ajax 没有调用 CFC 文件来发布数据

> ID：10472345
> 
> 赞同：2
> 
> 时间：2012-05-06T16:50:53.620
> 
> 标签：jquery, coldfusion, cfc

我无法获得 jQuery .ajax 调用来将数据发布到我的 CFC，不确定我缺少什么。尝试了许多不同的更正，没有任何效果。

```
$('.addItem').click(function(){

    //data from button clicked  

    var fType = $(this).attr('id');

    $.ajax({
        type: "post",
        url: "api.cfc",
        dataType: 'json',
        data: { method: "add", ID: fType }    
    });
)}; 
```

氟氯化碳

```
<cfcomponent >
      <cffunction name="add" access="remote " returntype="string">
      <cfargument name="ID" type="string" required="true" />

         <cfquery datasource="dev" name="formT">
            Insert into formMap (num, stuff)
            Values (1, #arguments.ID#)
         </cfquery>

  </cffunction>
 </cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:55:16.550

我相信您需要将方法名称添加到 URL：

```
$('.addItem').click(function(){ 

//data from button clicked   

var fType = $(this).attr('id'); 

$.ajax({ 
    type: "post", 
    url: "api.cfc?method=add", 
    dataType: 'json', 
    data: { ID: fType }      
)}; 
```

您还需要将 json 服务器端反序列化为 object/var 以读取值。

```
<cfcomponent >     
      <cffunction name="add" access="remote " returntype="string">     
      <cfargument name="theJson" required="true" />     

        <cfset json = deserializeJson(theJson)> 

         <cfquery datasource="dev" name="formT">     
            Insert into formMap (num, stuff)     
            Values (1, #json.ID#)     
         </cfquery>     

  </cffunction>     
 </cfcomponent> 
```

# java - 在 Java 中创建强大的多线程可扩展应用程序时要考虑哪些问题？

> ID：10472351
> 
> 赞同：0
> 
> 时间：2012-05-06T16:51:24.853
> 
> 标签：java, multithreading, network-programming, thread-safety, threadpool

我正计划构建一个独立的/基于 Web 的 Java 应用程序。它应该能够同时处理数千个请求。请求消息通过 TCP 端口（例如 6040）进入。我有一个专用线程来不断侦听来自客户端的消息。从套接字读取消息后，该线程将生成一个线程来服务请求。所以它基本上每个请求一个线程。

为请求提供服务涉及许多数据库操作，例如调用远程数据库中的存储过程、在本地数据库中执行更新/插入以及日志记录。服务请求后，应向客户端发送响应。

我希望情况很清楚。简而言之，我想构建一个强大的多线程可扩展应用程序（使用陈词滥调）。我的问题如下：

1.  监听传入请求的主线程应该为每个请求生成一个线程，还是应该只从线程池中获取一个。我要问的是我应该在我的应用程序中使用线程生成还是线程池。
2.  是否可以在集群上部署独立的 Java 应用程序？
3.  使用我打算为管理目的开发的 Web 应用程序（部署在 JBoss 7.1 服务器上）部署和运行它是一个好主意，还是应该是一个独立的应用程序？
4.  一般来说，在 Java 中构建强大的多线程可扩展应用程序时要考虑哪些问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:57:36.340

为确保您的 Java 应用程序能够扩展，基本上需要遵循一条简单的规则：不要共享状态。

所有状态都应该在线程本地或在后备数据存储中。这确保您可以启动完全独立的应用程序的无限副本（无论是否在同一台机器上），并在前面使用简单的负载均衡器。

要具体回答您的线程问题，使用适当配置的线程池几乎总是更好。您可以避免将线程内联到您的请求的开销，并且您可以配置合理的限制以避免资源争用/耗尽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T17:00:14.343

考虑使用线程池而不是在请求到达时生成线程以节省一些响应时间。此外，您可以使用非阻塞 IO（检查[New I/O](http://en.wikipedia.org/wiki/New_I/O)以使单个线程监视许多连接。此外，Steven Schlansker 所说：不要共享状态！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:43:54.823

我不确定它是否真的值得从头开始构建。从生产力的角度来看，重用现有的 Web 容器会快得多，比如 Jetty、Tomcat 等。如果你遵循 Servlet API，你只需要描述你的业务逻辑，容器会为你处理并发。

调整 Web 容器的性能需要花费大量时间。甚至大公司也选择Tomcat/Jetty，比如谷歌的App Engine。

# mysql - 使用 MySQL Workbench 插入 POINT

> ID：10472353
> 
> 赞同：5
> 
> 时间：2012-05-06T16:52:08.877
> 
> 标签：mysql, spatial, mysql-workbench

我有一个包含 POINT 列的表。我想知道是否可以使用 MySQL Workbench 中的 Inserts 选项卡插入一个点。我尝试了许多不同的组合都无济于事：

1 1

1,1

(1 1)

(1,1)

要点(1 1)

点（1,1）

GeomFromText('POINT(1 1)')

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:37:58.043

好吧，这不是您要寻找的确切答案，但是对于路过，您可以尝试一个浮点字段，并在以编程方式检索时计算“。”之前和之后的值。符号，考虑到 x 和 y 坐标，这对我有用，否则你可以有两个单独的列用于 x 和 y 坐标

# php - Mysql 自动更新事件

> ID：10472360
> 
> 赞同：3
> 
> 时间：2012-05-06T16:52:56.287
> 
> 标签：php, mysql, database, events

使用 php 和 MySql，是否有办法让数据库中的日期在日期过期时自行更新。即事件名称 x 的日期为 2012-05-12，2012-05-13 的日期应更改为 2012-05-19（距 2012-05-12 一周）

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:35:38.607

您可以使用 MySQL 的[事件调度程序](http://dev.mysql.com/doc/refman/5.1/en/events.html)：

```
CREATE EVENT update_date ON SCHEDULE EVERY 1 DAY STARTS CURDATE() DO
  UPDATE events_table
  SET    event_date = ADDDATE(event_date, INTERVAL 1 WEEK)
  WHERE  event_date < CURDATE(); 
```

为了使事件调度程序运行，您可以在 my.cnf 中添加：

```
[mysqld]
...
event_scheduler=开启

```

并且具有超级用户权限，您可以动态设置全局变量：

```
SET GLOBAL event_scheduler='ON'; 
```

# delphi - 动态过滤客户端数据集内容

> ID：10472362
> 
> 赞同：3
> 
> 时间：2012-05-06T16:53:14.787
> 
> 标签：delphi, n-tier-architecture, datasnap

我在问自己一个关于在 3 层数据快照架构中过滤客户端数据集内容的方法的问题：`Oracle DB <=> My Datasnap Server <=> My Datasnap clients`

我有一个通过 a[`TDSProviderConnection`](http://docwiki.embarcadero.com/Libraries/en/Datasnap.DSConnect.TDSProviderConnection)和 a访问的 Oracle 表[`TClientDataset`](http://docwiki.embarcadero.com/Libraries/en/Datasnap.DBClient.TClientDataSet)。

多个客户端正在使用该数据集，其中包含一个名为`"clientId"`. 我希望每个客户只请求他的行（就像`WHERE clientId = 'Client1'`在 sql 语句中一样）。

如果我理解正确，使用过滤器不会减少开销。

```
myclientdataset.Filter:= 'ClientId = Client1';
myclientdataset.Filtered:= true; 
```

因为这无论如何都会通过所有客户端。我希望服务器过滤发送的内容。

但我不知道如何使用这些组件来实现这一点。

任何想法将不胜感激。

问候，JP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:38:00.543

听起来像是[本教程](http://etutorials.org/Programming/mastering+delphi+7/Part+III+Delphi+Database-Oriented+Architectures/Chapter+16+Multitier+DataSnap+Applications/Advanced+DataSnap+Features/)中描述的参数化查询的任务。由于每个客户端都设置了自己的参数，因此只有请求的数据会传输到每个客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:03:06.083

Filter 属性过滤已加载到 ClientDataSet 中的内容。它对您从底层数据库检索的数据没有任何影响。

要让 ClientDataSet 影响从基础关系数据库检索的数据，您可以在 CommandText 属性中指定查询，或在 CommandText 属性中包含参数化查询（或存储过程调用），然后使用 Params 属性定义值你的参数。

# c# - 如何将远程代理添加到所有 WebClient 请求

> ID：10472367
> 
> 赞同：0
> 
> 时间：2012-05-06T16:53:46.660
> 
> 标签：c#, winforms, proxy, webclient

这是我的代码，确保这些请求通过远程代理传递的最佳方法是什么？

```
 String openUrl = @"www.site.com/page.html";
        WebClient myClient = new WebClient();

        myClient.UseDefaultCredentials = true;
        IWebProxy theProxy = myClient.Proxy;
        if (theProxy != null)
        {
            theProxy.Credentials = CredentialCache.DefaultCredentials;
        }

        myClient.Proxy = WebRequest.DefaultWebProxy;
        string webPageString = myClient.DownloadString(openUrl);
        HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
        doc.LoadHtml(webPageString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:00:42.120

我认为你的代码是错误的......
这是一个工作：

```
WebProxy p = null;
string proxyAddressAndPort ="I.P.ADD.RES:port";
string proxyUserName ="%username%";
string proxyPassword ="%password%";
ICredentials cred;
cred = new NetworkCredential(proxyUserName, proxyPassword);
p = new WebProxy(proxyAddressAndPort, true, null, cred);
WebRequest.DefaultWebProxy = p; 
```

作为使这些请求通过远程代理传递以使用 myip.net 之类的 smth 的一种方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T21:45:28.313

```
 HtmlWeb hw = new HtmlWeb();
        hw.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)";
        hw.PreRequest = new HtmlAgilityPack.HtmlWeb.PreRequestHandler(p.ProxyOnPreRequest); // this is proxy request
        HtmlAgilityPack.HtmlDocument doc = hw.Load(openUrl);

    public bool ProxyOnPreRequest(HttpWebRequest request)
    {
        WebProxy myProxy = new WebProxy("203.189.134.17:80");
        request.Proxy = myProxy;
        return true; // ok, go on
    } 
```

# ruby-on-rails - 搭建脚手架时生成的测试

> ID：10472375
> 
> 赞同：1
> 
> 时间：2012-05-06T16:54:32.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在制作了一个新的 rails 3.2.3 应用程序后，我生成了一个新的脚手架来玩一些代码。我后来运行了一些 rake 任务，不小心输入了“rake”，没有任何参数。令我惊讶的是，它运行了 7 次测试和 10 次断言，但失败了 0 次……为什么？我没有向应用程序添加任何测试。

这些测试是用脚手架生成的吗？测试似乎位于 /test 目录中。我想使用 rspec，而不是 test::unit 或类似的东西。如果这不是 rspec，那么删除 /test 目录是否安全，或者是否有更多的基础工作可以删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:59:31.843

是的！测试与脚手架一起生成。`assert`除了脚手架控制器正确路由之外，它们并没有做更多的事情，但是您可以安全地删除它们。最好删除测试文件本身而不是整个`test`目录（以防万一您最终对`Test::Unit`下线有任何用处），但是您可以在以下子目录中找到所有生成的测试：

```
test/functional
test/unit/
test/unit/helpers 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:00:50.893

是的，您可以安全地删除测试目录。如果您想告诉 Rails 使用 rspec 并且不再生成 test::unit，请将其添加到您的 config/application.rb

```
config.generators do |g|
  g.view_specs      false
  g.helper_specs    false
  g.orm             :active_record
  g.test_framework  :rspec
  g.helpers         false
end 
```

以上也不会生成视图规范、助手规范或助手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:10:08.240

是的，如果您想改用 RSpec，删除该目录是安全的。当您生成一个新应用程序时，将`-T`标志传递给`new`命令以使 Rails 不会为您自动设置测试。

```
rails new app_name -T 
```

# java - 我可以在一个类中使用多个 ActionListener 吗？

> ID：10472376
> 
> 赞同：2
> 
> 时间：2012-05-06T16:54:40.300
> 
> 标签：java, swing, awt, actionlistener

考虑下面过于简化的示例；为简洁起见，其中一些是用伪代码编写的。当我尝试按原样运行它时，我收到一个编译器错误，指出`actionPerformed`我的方法中已经找到了`main`。但是，如果我重命名它，说明`actionPerformed2`它不再被`ActionListener`.

我是否需要将`foo`and`foo2`方法的侦听器合并为一个`ActionListener`方法？在具有多个按钮对象的单个类中使用多个侦听器时，如何正确区分侦听器？

我刚开始使用挥杆组件，所以我怀疑我可能没有问正确的问题……但我总是可以随时编辑。:)

```
public class foo  {
    declare button1, button2, button3 and panel1
    public foo()  { 
        show panel1 with button1 and button2;
    }
    public foo2() {
        show panel1 with button3;
    }
    public void actionPerformed(ActionEvent e)  { 
        Object source1 = e.getSource();
        do some stuff when button1 is clicked
    }
    public void actionPerformed(ActionEvent f)  {
        Object source2 = f.getSource();
        do some other stuff when button2 is clicked
    }
    public static void main(String[] args)   {
        foo myFoo = new foo();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T16:57:02.580

为此使用匿名内部类。

例如，您永远不会编写但说明了一点的代码：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Foo  extends JPanel {
   private JButton btnA = new JButton("Button A");
   private JButton btnB = new JButton("Button B");
   private JButton btnC = new JButton("Button C");

   public Foo() {
      btnA.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            System.out.println("button A Action");
         }
      });
      btnB.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            System.out.println("button B Action");
         }
      });
      btnC.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            System.out.println("button C Action");
         }
      });

      add(btnA);
      add(btnB);
      add(btnC);
   }

   private static void createAndShowGui() {
      Foo mainPanel = new Foo();

      JFrame frame = new JFrame("Foo");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

我自己，我使用更多的 AbstractAction 和更少的 ActionListener，甚至已经开始使用命令设计模式与 PropertyChangeListener 一起使用。

例如，我最新的 GUI 的“视图”部分如下所示：

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.beans.PropertyChangeListener;
import java.util.HashMap;
import java.util.Map;

import javax.swing.*;
import javax.swing.event.SwingPropertyChangeSupport;

@SuppressWarnings("serial")
public class View {
   enum TextAreaDestination {
      EGD_IMPRESSION("EGD Impression"),
      EGD_RECOMMENDATIONS("EGD Recommendations"),
      COLON_IMPRESSION("Colon Impression"),
      COLON_RECOMMENDATIONS("Colon Recommendations"),
      ERROR_MESSAGES("Error Messages");

      private String text;
      private TextAreaDestination(String text) {
         this.text = text;
      }

      public String getText() {
         return text;
      }

      @Override
      public String toString() {
         return text;
      }
   }

   public enum GuiButtonText {
      GET_ONE_PROC("Get One Proc", KeyEvent.VK_O),
      GET_TWO_PROCs("Get Two Procs", KeyEvent.VK_T), 
      INTO_FLOW("Into Flow", KeyEvent.VK_F),
      CLEAR_ALL("Clear All", KeyEvent.VK_C),
      F_U_PROC_FLAG("F/U Proc Flag", KeyEvent.VK_U),
      SIGN_NEXT("Sign/Next", KeyEvent.VK_S),
      EXIT("Exit", KeyEvent.VK_X);
      private String text;
      private int mnemonic;
      private GuiButtonText(String text, int mnemonic) {
         this.text = text;
         this.mnemonic = mnemonic;
      }
      public String getText() {
         return text;
      }
      public int getMnemonic() {
         return mnemonic;
      }
   }

   public static final String BUTTON_PRESSED = "Button Pressed";

   private static final int TA_ROWS = 4;
   private static final int TA_COLS = 50;
   private JPanel mainPanel = new JPanel();
   private SwingPropertyChangeSupport spcSupport = new SwingPropertyChangeSupport(
         this);
   private Map<TextAreaDestination, JTextArea> impressionRecMap = new HashMap<TextAreaDestination, JTextArea>();

   public View() {
      JPanel textAreasPanel = createTextAreasPanel();
      JPanel buttonsPanel = createButtonsPanel();

      mainPanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
      mainPanel.setLayout(new BorderLayout(5, 5));
      mainPanel.add(textAreasPanel, BorderLayout.CENTER);
      mainPanel.add(buttonsPanel, BorderLayout.PAGE_END);
   }

   private JPanel createButtonsPanel() {
      JPanel buttonsPanel = new JPanel(new GridLayout(2, 0, 5, 5));
      for (final GuiButtonText guiBtnText : GuiButtonText.values()) {
         AbstractAction btnAction = new AbstractAction(guiBtnText.getText()) {
            {putValue(MNEMONIC_KEY, guiBtnText.getMnemonic()); }
            @Override
            public void actionPerformed(ActionEvent e) {
               spcSupport.firePropertyChange(BUTTON_PRESSED, null, guiBtnText);               
            }
         };
         JButton button = new JButton(btnAction);
         buttonsPanel.add(button);
      }
      return buttonsPanel;
   }

   private JPanel createTextAreasPanel() {
      JPanel textAreasPanel = new JPanel();
      textAreasPanel.setLayout(new BoxLayout(textAreasPanel,
            BoxLayout.PAGE_AXIS));
      for (TextAreaDestination textDest : TextAreaDestination.values()) {
         JTextArea tArea = new JTextArea(TA_ROWS, TA_COLS);
         tArea.setName(textDest.getText());
         tArea.setWrapStyleWord(true);
         tArea.setLineWrap(true);
         impressionRecMap.put(textDest, tArea);
         JScrollPane scrollPane = new JScrollPane(tArea);
         JPanel outerPanel = new JPanel(new BorderLayout());
         outerPanel.setBorder(BorderFactory.createTitledBorder(textDest.getText()));
         outerPanel.add(scrollPane);
         textAreasPanel.add(outerPanel);
      }
      return textAreasPanel;
   }

   public String textAreasGetText(TextAreaDestination key) {
      JTextArea textArea = impressionRecMap.get(key);
      if (textArea != null) {
         return textArea.getText();
      } else {
         return ""; // throw exception
      }
   }

   public void textAreasSetText(TextAreaDestination key, String text) {
      JTextArea textArea = impressionRecMap.get(key);
      if (textArea != null) {
         textArea.setText(text);
      } else {
         // throw exception?
      }
   }

   public void textAreaAppend(TextAreaDestination key, String text) {
      JTextArea textArea = impressionRecMap.get(key);
      textArea.append(text);
   }

   public void clearAllAreas() {
      for (TextAreaDestination taDest : TextAreaDestination.values()) {
         textAreasSetText(taDest, "");
      }
   }

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      spcSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      spcSupport.removePropertyChangeListener(listener);
   }

   public JPanel getMainPanel() {
      return mainPanel;
   }

   public static void main(String[] args) {
      Control.main(args);
   }
} 
```

“控制”部分的一部分如下所示：

```
import java.awt.Component;
import java.awt.Window;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.io.IOException;
import java.io.InputStream;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.concurrent.ExecutionException;
import javax.swing.*;
import procedure.findings4.View.TextAreaDestination;

public class Control {
   public static final boolean DEBUG = false;

   public static final String CENTRICITY_WINDOW_NAME = "Centricity EMR";
   private DriverModel driverModel = null;
   private View view;
   private Map<View.GuiButtonText, Runnable> runnableMap = new HashMap<View.GuiButtonText, Runnable>();

   public Control() {
      runnableMap.put(View.GuiButtonText.GET_ONE_PROC, new GetOneProcRunnable());
      runnableMap.put(View.GuiButtonText.GET_TWO_PROCs,
            new GetTwoProcsRunnable());
      runnableMap.put(View.GuiButtonText.INTO_FLOW, new IntoFlowRunnable());
      runnableMap.put(View.GuiButtonText.CLEAR_ALL, new ClearAllRunnable());
      runnableMap.put(View.GuiButtonText.SIGN_NEXT, new SignNextRunnable());
      runnableMap.put(View.GuiButtonText.EXIT, new ExitRunnable());
   }

   public void setView(View view) {
      this.view = view;
      view.addPropertyChangeListener(new ViewChangeListener());
   }

   //....

   private class ViewChangeListener implements PropertyChangeListener {
      @Override
      public void propertyChange(PropertyChangeEvent pcEvt) {
         if (pcEvt.getPropertyName().equals(View.BUTTON_PRESSED)) {
            Runnable run = runnableMap.get(pcEvt.getNewValue());
            if (run != null) {
               run.run();
            }
         }
      }
   }

   //.... 
```

请注意，我并不声称自己是这方面的专家，而只是尽我所能管理复杂性。可能有更好的方法给这只猫剥皮。

# iphone - 解析苹果 JSON

> ID：10472377
> 
> 赞同：2
> 
> 时间：2012-05-06T16:54:46.483
> 
> 标签：iphone, ios, cocoa-touch, cocoa

通常我正在解析 JSON 提要，例如 (EXAMPLE) ；

```
{
    "AppStore": [
        {
            "Application": "Game",
            "KeyID": "zero"
        }
    ]
} 
```

在我的 JSON 中，我正在做

```
NSArray* Parse = [json objectForKey:@"AppStore"]; 
```

但我现在想解析 AppStore 的 JSON 它有另一个结构

[http://itunes.apple.com/lookup?id=387633954](http://itunes.apple.com/lookup?id=387633954)

```
{
    "resultCount": 1,
    "results": [
        {
            "kind": "software",
            "features": [
                "gameCenter",
                "iosUniversal"
            ],
            "supportedDevices": [
                "all"
            ],
            "isGameCenterEnabled": true,
            "artistViewUrl": "http://itunes.apple.com/us/artist/mcsebi/id387633957?uo=4",
            "artworkUrl60": "http://a5.mzstatic.com/us/r1000/072/Purple/v4/98/a6/56/98a656e8-666a-89ab-c8f0-878b61b9f8f2/Icon.png",
            "screenshotUrls": [
                "http://a3.mzstatic.com/us/r1000/076/Purple/v4/fe/36/80/fe3680ae-5439-a2f1-6675-d3246b64f333/mza_11015238406403423.png",
                "http://a4.mzstatic.com/us/r1000/099/Purple/v4/73/98/1c/73981cbf-fb79-dc38-9dac-61ab46c2ac60/mzl.gzibbhfx.png",
                "http://a3.mzstatic.com/us/r1000/103/Purple/v4/72/b6/87/72b68713-7e5a-f675-83c3-85c2f0e96df1/mzl.gykakuht.png",
                "http://a1.mzstatic.com/us/r1000/113/Purple/v4/fa/d6/c4/fad6c453-9da5-2506-2b06-42ed5ff6bd63/mzl.hqbrlhog.png",
                "http://a2.mzstatic.com/us/r1000/120/Purple/v4/9e/7a/13/9e7a1388-5089-11e7-0c03-3d1868abbb82/mzl.jogfcyqv.png"
            ],
            "ipadScreenshotUrls": [
                "http://a1.mzstatic.com/us/r1000/096/Purple/v4/1f/5a/92/1f5a9249-03b8-90dc-8226-18b1785d5f7d/mzl.ilqgfose.1024x1024-65.jpg",
                "http://a5.mzstatic.com/us/r1000/070/Purple/v4/79/74/6b/79746ba8-7ea0-6e81-93d0-9e2493412e21/mzl.saleskru.1024x1024-65.jpg",
                "http://a1.mzstatic.com/us/r1000/068/Purple/v4/12/38/91/1238914f-7387-9c9e-06e4-11a55871b04a/mzl.qmiockwv.1024x1024-65.jpg",
                "http://a4.mzstatic.com/us/r1000/091/Purple/v4/3b/cf/62/3bcf62e6-4d84-4fc0-e721-c328361f5c95/mzl.somobtxy.1024x1024-65.jpg",
                "http://a1.mzstatic.com/us/r1000/074/Purple/v4/e9/d3/e7/e9d3e7b7-b52c-e204-e4b6-1ab5de79e85a/mzl.nedztyfk.1024x1024-65.jpg"
            ],
            "artworkUrl512": "http://a3.mzstatic.com/us/r1000/115/Purple/v4/0d/9c/ec/0d9cec04-91b3-5fe2-fa40-100660250f4a/mzl.kavmnegm.png",
            "artistId": 387633957,
            "artistName": "McSebi",
            "price": 0.99,
            "version": "1.2",
            "description": "Connect M is a simple, but very addictive puzzle game. Connect two tiles of the same color and try to remove all the tiles within a time limit. Connect M features:\n \n· 37 levels in 9 worlds. Each world has a new feature\n· High quality graphics\n· High quality sound effects and soundtrack\n\nFollow us on Twitter: http://twitter.com/qt_games\n\nMany customers demanded to save a game explicitely.\nNow you can do it by pressing the disk icon after pausing a game.",
            "genreIds": [
                "6014",
                "7003",
                "7012"
            ],
            "releaseDate": "2010-08-24T02:46:16Z",
            "sellerName": "Sebastian Wegner",
            "currency": "USD",
            "genres": [
                "Games",
                "Arcade",
                "Puzzle"
            ],
            "bundleId": "com.mcsebi.connectm",
            "trackId": 387633954,
            "trackName": "Connect M",
            "primaryGenreName": "Games",
            "primaryGenreId": 6014,
            "releaseNotes": "Level selection:\nYou can now choose to start the game in every world you completed at least once.",
            "wrapperType": "software",
            "trackCensoredName": "Connect M",
            "trackViewUrl": "http://itunes.apple.com/us/app/connect-m/id387633954?mt=8&uo=4",
            "contentAdvisoryRating": "4+",
            "artworkUrl100": "http://a3.mzstatic.com/us/r1000/115/Purple/v4/0d/9c/ec/0d9cec04-91b3-5fe2-fa40-100660250f4a/mzl.kavmnegm.png",
            "languageCodesISO2A": [
                "DE",
                "EN",
                "IT",
                "NL"
            ],
            "fileSizeBytes": "24434872",
            "sellerUrl": "http://www.mcsebi.com",
            "trackContentRating": "4+"
        }
    ]
} 
```

如果我做;

```
NSArray* Parse = [json objectForKey:@"resultCount"]; or 
NSArray* Parse = [json objectForKey:@"results"]; 
```

应用程序崩溃：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil'
*** First throw call stack:
(0x352b888f 0x366df259 0x352b8789 0x352b87ab 0x311c05b3 0x8c9e3 0x352171fb 0x3116e747 0x3528cad3 0x3528c29f 0x3528b045 0x3520e4a5 0x3520e36d 0x3650a439 0x32304e7d 0x807a5 0x80240)
terminate called throwing an exception(lldb) 
```

编辑：

```
@interface NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress;
-(NSData*)toJSON;
@end

@implementation NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress
{
    NSData* data = [NSData dataWithContentsOfURL: [NSURL URLWithString: urlAddress] ];
    __autoreleasing NSError* error = nil;
    id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    if (error != nil) return nil;
    return result;
}

-(NSData*)toJSON
{
    NSError* error = nil;
    id result = [NSJSONSerialization dataWithJSONObject:self options:kNilOptions error:&error];
    if (error != nil) return nil;
    return result;    
}
@end 
```

//

```
- (void)fetchedData:(NSData *)responseData {

    NSError* error;
        NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                             options:kNilOptions 
                                                               error:&error];
        NSArray* UrlParse = [json objectForKey:@"resultCount"]; 

        NSDictionary* SParse = [urlParse objectAtIndex:0];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T17:32:39.083

错误消息说`responseData`是`nil`，所以这不是真正的 JSON 解析问题。

由于您没有展示如何构造`responseData`，我不知道实际问题是什么，但它发生在您尝试解析它之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:56:20.907

> ```
> NSData* data = [NSData dataWithContentsOfURL: [NSURL URLWithString: urlAddress] ];
> __autoreleasing NSError* error = nil;
> id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
> ```

两件事情：

1.  确保它`urlAddress`真实地描述了 URL 而不是路径。如果是路径，则用于`fileURLWithPath:`创建 NSURL 对象。（您可能没有这个问题，因为您正在尝试从 App Store 获取信息，但未来尝试从本地文件读取 JSON 的读者可能会犯此错误。）
2.  确保 URL 或路径（无论是哪个）正确并描述了存在的事物。试图获取不存在的资源的内容可以解释为什么`data`是`nil`.

此外，您应该使用调试器来验证您的两个 JSON 到对象方法中的哪一个正在产生异常。其中任何一个都可能是它。以上是给你的`+[NSDictionary(JSONCategories) dictionaryWithContentsOfJSONURLString:]`；如果异常来自`fetchedData:`，那么这意味着您正在调用`fetchedData:`，`nil`并且您应该编辑您的问题以显示调用的代码`fetchedData:`以及该代码如何获取（或尝试获取）数据。

# jquery - jquery下拉自动提交除一个以外的所有选项

> ID：10472378
> 
> 赞同：0
> 
> 时间：2012-05-06T16:54:49.957
> 
> 标签：jquery

```
$(function () {
        $("#dropdown").live("change keyup", function () {
            $("#theform").submit();
        });
    });

<form method="GET" id="theform" action="">
            <select name="dropdown" id="dropdown">
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3" id="nosubmit">Three</option>
            </select>
        </form> 
```

如果选择了选项三，我想显示另一个下拉列表（不提交表单）：

```
<form method="GET" id="theform2" action="">
            <select name="dropdown2" id="dropdown2">
                <option value="4">Four</option>
                <option value="5">Five</option>
                <option value="6">Six</option>
            </select>
        </form> 
```

如果选择了一个特定选项，我该怎么做才能不让它自动提交？Also when that option is selected how would I know? 在这种情况下，我需要显示另一个下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:00:19.817

在您监视事件的 jQuery 中，您只需在继续使用 submit() 之前进行一些检查。

```
$(function () {
    $("#dropdown").live("change keyup", function () {
        if($(this).val() != 3)
        {
            $("#theform").submit();
        }
        else
        {
            $("#dropdown2").show();
        }
    });
}); 
```

请注意，您不应将#dropdown2 选择放入它自己的表单中，除非您只想提交一组数据或另一组数据。如果您希望将所有内容放在一起，请将其放在一个表单中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:05:57.740

```
$("body").on("change keyup", "#dropdown", function () {
            if(this.value == 3) {
               $('#theform2').show();
            } else {
               $('#theform2').hide();
               $("#theform").submit();
            }
}); 
```

并将css设置为`#theform2 {display: none}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T17:02:09.863

试试这个：http: [//jsfiddle.net/LYdat/](http://jsfiddle.net/LYdat/)

**HTML**

```
<form method="GET" id="theform" action="">
    <select name="dropdown" id="dropdown">
        <option value="1">One</option>
        <option value="2">Two</option>
        <option value="3" id="nosubmit">Three</option>
    </select>
</form>

<form method="GET" id="theform2" action="">
    <select name="dropdown2" id="dropdown2">
        <option value="4">Four</option>
        <option value="5">Five</option>
        <option value="6">Six</option>
    </select>
</form>​ 
```

**JS**

```
$(function () {
    $("#dropdown").live("change keyup", function () {
        if($(this).val() == '3') {
            $('#theform2').show();
        } else {
            $('#theform2').hide();
            $("#theform").submit();
        }
    });
}); 
```

​<strong>CSS

```
#theform2 {
    display: none;
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T17:04:25.743

如果您想在文本上执行此操作，即“三”

```
$(function () {
        $("#dropdown").live("change", function () {
            if($("#dropdown :selected").text() == "Three")
            {
                $("#dropdown2").hide();
                return false;
            }
            else
            {
               $("#theform").submit();
            }
        });
    }); 
```

如果您想按价值（即“3”）进行操作，请尝试此操作

```
 $(function () {
        $("#dropdown").live("change", function () { 
            if($(this).val() == "3")      
            {
                $("#dropdown2").hide();
                return false;
            }
            else
            {
               $("#theform").submit();
            }
        });
    }); 
```

# c++ - 如何检查元素是否在 C++ 的映射键中？

> ID：10472387
> 
> 赞同：0
> 
> 时间：2012-05-06T16:55:57.067
> 
> 标签：c++

我想知道是否有一种方法可以检查元素是否包含在地图键中。例如：

```
#include<iostream>
#include<map>

using namespace std;

int main()
{

map<char, int> mymap;

mymap['a'] = 1;
mymap['b'] = 2;
mymap['z'] = 26;

// I want to check if 'b' is one of the keys in map mymap.

    return 0;
} 
```

元素 'a'、'b' 和 'z' 是 map mymap 的键。`true`我想要一个命令，如果元素在地图的键中并且`false`元素不在地图的键中，则该命令将返回。我环顾四周，但可以找到一个快速的内置方法来做到这一点。我错过了什么吗？有没有这样的方法？

这是让我得到我想要的结果的很长的路要走：

```
#include<iostream>
#include<map>

using namespace std;

bool check_key(map<char, int> mymap, char key_val);

int main()
{

map<char, int> mymap;

mymap['a'] = 1;
mymap['b'] = 2;
mymap['z'] = 26;

char key_val = 'h';

cout<<mymap.find('z')->first<<endl;

cout<<"checking "<< check_key(mymap, 'h')<<endl;
cout<<"checking "<< check_key(mymap, 'b')<<endl;

    return 0;
}

bool check_key(map<char, int> mymap, char key_val){

    for (map<char, int>::const_iterator it = mymap.begin(); it != mymap.end(); ++it ){
        if (key_val == it->first){
            return true;
        }

    }
    return false;

} 
```

先感谢您

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T16:57:26.917

只需检查是否`mymap.find('b') != mymap.end()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T16:58:47.167

`find()`您可以通过将结果与返回的迭代器进行比较来检查键是否存在`end()`：

```
std::map<char, int> my_map;
// add items
std::map<char, int>::iterator found = my_map.find('b');
if (found == my_map.end())
{
  // 'b' is not in the map
} 
```

# php - PHP MYSQL在获取时获取数组编号

> ID：10472391
> 
> 赞同：0
> 
> 时间：2012-05-06T16:56:21.627
> 
> 标签：php, row, fetch

在查询之后， mysql_fetch_array 会生成一个结果数组，其中包含一个序列号，我相信你可以通过将 [] 放在字段的末尾来获得。

在获取时，我想为 div 设置顺序 ID，`<div id="row1">`以跟踪返回的行。行只是一个词，而不是变量。有没有一种简单的方法可以根据数组编号将数字附加到行 - 类似于 row[] 而无需设置计数器？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:09:21.983

如果您不想设置一个我不明白为什么的计数器，并且如果您有类似 id 作为从数据库中获取的表行（您的主键），那么您可以这样做。

```
while($row = mysql_fetch_array($res)) { 
    echo '<div id="row'.row['id'].'"> Row '.$row['id'].' text</div>';
} 
```

# rest - 如何在 Play 中调用非 GET/POST HTTP 方法？

> ID：10472392
> 
> 赞同：2
> 
> 时间：2012-05-06T16:56:33.283
> 
> 标签：rest, playframework, playframework-2.0

我有一个 RESTful Play 2.0 应用程序，我想`DELETE /sessions`从浏览器中的链接调用。

我该怎么做呢？Rails 有一个对非 GET/POST 请求使用`_method`查询参数的约定，但 Play 的文档没有提到这一点。

另外，我是否必须创建一个单独的表单或者`XMLHttpRequest`为了从链接调用该方法，`href`或者是否有类似 Rails 的`data-method`属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:00:21.667

您不会使用公共链接来执行此操作。

[引用 Google Groups 上的类似主题](https://groups.google.com/forum/?fromgroups#!topic/play-framework/Ttd7aFGCGpU)：

> 链接（A 标记）不适用于 DELETE 方法。链接的语义是“链接”到另一个资源，可以使用 GET 请求进行检索。您可以在 Ajax 中执行 DELETE 请求，或者在表单中使用 POST 方法并包含名称为“X-HTTP-Method-Override”和值为“DELETE”的隐藏输入。

那是什么意思：您需要使用 GET 删除该项目：

在`conf/routes`：

```
GET   /delete/:itemId    controllers.Application.deleteItem(itemid : Long) 
```

在你看来：

```
<a href="@routes.Application.deleteItem(item.id)">Delete @item.name</a> 
```

或者使用 AJAX 调用：

```
<script type="text/javascript">
    $.ajax({
        url:"@routes.Application.actionToDeleteSomething()",
        type:"DELETE"
    });
</script> 
```

# c++ - 由于未解析的外部因素，OpenCV 无法编译——LNK2019

> ID：10472393
> 
> 赞同：8
> 
> 时间：2012-05-06T16:56:38.503
> 
> 标签：c++, visual-studio-2010, opencv, unresolved-external, lnk2019

我是 OpenCV 的新手，一直在尝试在 Visual Studios 2010 Ultimate 中进行设置。我完全按照文档进行了操作，并按照说明链接了文件。以下是我正在使用的其他库：

```
opencv_core231d.lib
opencv_imgproc231d.lib
opencv_highgui231d.lib
opencv_ml231d.lib
opencv_video231d.lib
opencv_features2d231d.lib
opencv_calib3d231d.lib
opencv_objdetect231d.lib
opencv_contrib231d.lib
opencv_legacy231d.lib
opencv_flann231d.lib 
```

以及他们所有的 Release 对应物。但是，当我尝试调试和编译给我的示例代码时，我收到以下错误。（我在某处读到您必须编译和发布项目才能使其正常工作？这也是真的吗？）

```
1>------ Build started: Project: openCVTest, Configuration: Debug Win32 ------
1>Build started 5/6/2012 10:39:03 AM.
1>InitializeBuildStatus:
1>  Touching "Debug\openCVTest.unsuccessfulbuild".
1>ClCompile:
1>  All outputs are up-to-date.
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>openCVTest.obj : error LNK2019: unresolved external symbol _cvWaitKey referenced in function _main
1>openCVTest.obj : error LNK2019: unresolved external symbol "void __cdecl cv::imshow(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class cv::_InputArray const &)" (?imshow@cv@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV_InputArray@1@@Z) referenced in function _main
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: __thiscall cv::_InputArray::_InputArray(class cv::Mat const &)" (??0_InputArray@cv@@QAE@ABVMat@1@@Z) referenced in function _main
1>openCVTest.obj : error LNK2019: unresolved external symbol _cvMoveWindow referenced in function _main
1>openCVTest.obj : error LNK2019: unresolved external symbol "void __cdecl cv::namedWindow(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int)" (?namedWindow@cv@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z) referenced in function _main
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: virtual double __thiscall cv::VideoCapture::get(int)" (?get@VideoCapture@cv@@UAENH@Z) referenced in function _main
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall cv::VideoCapture::~VideoCapture(void)" (??1VideoCapture@cv@@UAE@XZ) referenced in function _main
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: virtual bool __thiscall cv::VideoCapture::isOpened(void)const " (?isOpened@VideoCapture@cv@@UBE_NXZ) referenced in function _main
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: __thiscall cv::VideoCapture::VideoCapture(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (??0VideoCapture@cv@@QAE@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function _main
1>openCVTest.obj : error LNK2019: unresolved external symbol "void __cdecl cv::fastFree(void *)" (?fastFree@cv@@YAXPAX@Z) referenced in function "public: __thiscall cv::Mat::~Mat(void)" (??1Mat@cv@@QAE@XZ)
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::Mat::deallocate(void)" (?deallocate@Mat@cv@@QAEXXZ) referenced in function "public: void __thiscall cv::Mat::release(void)" (?release@Mat@cv@@QAEXXZ)
1>openCVTest.obj : error LNK2019: unresolved external symbol "class cv::Scalar_<double> __cdecl cv::sum(class cv::_InputArray const &)" (?sum@cv@@YA?AV?$Scalar_@N@1@ABV_InputArray@1@@Z) referenced in function "double __cdecl getPSNR(class cv::Mat const &,class cv::Mat const &)" (?getPSNR@@YANABVMat@cv@@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: class cv::MatExpr __thiscall cv::Mat::mul(class cv::_InputArray const &,double)const " (?mul@Mat@cv@@QBE?AVMatExpr@2@ABV_InputArray@2@N@Z) referenced in function "double __cdecl getPSNR(class cv::Mat const &,class cv::Mat const &)" (?getPSNR@@YANABVMat@cv@@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::Mat::convertTo(class cv::_OutputArray const &,int,double,double)const " (?convertTo@Mat@cv@@QBEXABV_OutputArray@2@HNN@Z) referenced in function "double __cdecl getPSNR(class cv::Mat const &,class cv::Mat const &)" (?getPSNR@@YANABVMat@cv@@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "void __cdecl cv::absdiff(class cv::_InputArray const &,class cv::_InputArray const &,class cv::_OutputArray const &)" (?absdiff@cv@@YAXABV_InputArray@1@0ABV_OutputArray@1@@Z) referenced in function "double __cdecl getPSNR(class cv::Mat const &,class cv::Mat const &)" (?getPSNR@@YANABVMat@cv@@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: __thiscall cv::_OutputArray::_OutputArray(class cv::Mat &)" (??0_OutputArray@cv@@QAE@AAVMat@1@@Z) referenced in function "double __cdecl getPSNR(class cv::Mat const &,class cv::Mat const &)" (?getPSNR@@YANABVMat@cv@@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "class cv::Scalar_<double> __cdecl cv::mean(class cv::_InputArray const &,class cv::_InputArray const &)" (?mean@cv@@YA?AV?$Scalar_@N@1@ABV_InputArray@1@0@Z) referenced in function "class cv::Scalar_<double> __cdecl getMSSIM(class cv::Mat const &,class cv::Mat const &)" (?getMSSIM@@YA?AV?$Scalar_@N@cv@@ABVMat@2@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "class cv::_OutputArray const & __cdecl cv::noArray(void)" (?noArray@cv@@YAABV_OutputArray@1@XZ) referenced in function "class cv::Scalar_<double> __cdecl getMSSIM(class cv::Mat const &,class cv::Mat const &)" (?getMSSIM@@YA?AV?$Scalar_@N@cv@@ABVMat@2@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "void __cdecl cv::divide(class cv::_InputArray const &,class cv::_InputArray const &,class cv::_OutputArray const &,double,int)" (?divide@cv@@YAXABV_InputArray@1@0ABV_OutputArray@1@NH@Z) referenced in function "class cv::Scalar_<double> __cdecl getMSSIM(class cv::Mat const &,class cv::Mat const &)" (?getMSSIM@@YA?AV?$Scalar_@N@cv@@ABVMat@2@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "class cv::MatExpr __cdecl cv::operator+(class cv::Mat const &,class cv::Mat const &)" (??Hcv@@YA?AVMatExpr@0@ABVMat@0@0@Z) referenced in function "class cv::Scalar_<double> __cdecl getMSSIM(class cv::Mat const &,class cv::Mat const &)" (?getMSSIM@@YA?AV?$Scalar_@N@cv@@ABVMat@2@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "class cv::MatExpr __cdecl cv::operator+(class cv::MatExpr const &,class cv::Scalar_<double> const &)" (??Hcv@@YA?AVMatExpr@0@ABV10@ABV?$Scalar_@N@0@@Z) referenced in function "class cv::Scalar_<double> __cdecl getMSSIM(class cv::Mat const &,class cv::Mat const &)" (?getMSSIM@@YA?AV?$Scalar_@N@cv@@ABVMat@2@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "class cv::MatExpr __cdecl cv::operator*(double,class cv::Mat const &)" (??Dcv@@YA?AVMatExpr@0@NABVMat@0@@Z) referenced in function "class cv::Scalar_<double> __cdecl getMSSIM(class cv::Mat const &,class cv::Mat const &)" (?getMSSIM@@YA?AV?$Scalar_@N@cv@@ABVMat@2@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "void __cdecl cv::GaussianBlur(class cv::_InputArray const &,class cv::_OutputArray const &,class cv::Size_<int>,double,double,int)" (?GaussianBlur@cv@@YAXABV_InputArray@1@ABV_OutputArray@1@V?$Size_@H@1@NNH@Z) referenced in function "class cv::Scalar_<double> __cdecl getMSSIM(class cv::Mat const &,class cv::Mat const &)" (?getMSSIM@@YA?AV?$Scalar_@N@cv@@ABVMat@2@0@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::Mat::copySize(class cv::Mat const &)" (?copySize@Mat@cv@@QAEXABV12@@Z) referenced in function "public: __thiscall cv::Mat::Mat(class cv::Mat const &)" (??0Mat@cv@@QAE@ABV01@@Z)
1>openCVTest.obj : error LNK2019: unresolved external symbol "void __cdecl cv::subtract(class cv::_InputArray const &,class cv::_InputArray const &,class cv::_OutputArray const &,class cv::_InputArray const &,int)" (?subtract@cv@@YAXABV_InputArray@1@0ABV_OutputArray@1@0H@Z) referenced in function "class cv::Mat & __cdecl cv::operator-=(class cv::Mat const &,class cv::Mat const &)" (??Zcv@@YAAAVMat@0@ABV10@0@Z)
1>C:\Users\Logan\documents\visual studio 2010\Projects\openCVTest\Debug\openCVTest.exe : fatal error LNK1120: 25 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.40
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我浏览了所有目录并确保这些库实际上确实存在于我的 OpenCV 文件中，并且我的下载没有损坏或任何东西。任何帮助，将不胜感激！

-Logantf17

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-12T22:51:03.113

我遇到了同样的问题，发现我的目标是 32 位平台。答案是将我的项目更改为以 x64 为目标。说明位于：http: [//msdn.microsoft.com/en-us/library/vstudio/ms185328.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms185328.aspx)。

我还发现 chaiy 上面列出的参考资料非常有用。又来了： http: [//docs.opencv.org/trunk/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to](http://docs.opencv.org/trunk/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T21:55:29.183

[另一个线程](https://stackoverflow.com/questions/10474218/unresolved-external-symbol-error-when-importing-libraries-for-opencv2-3-in-visua)中的 shambool只是指出您应该阅读[此](http://docs.opencv.org/trunk/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to)内容。

# r - 链接两个表并查找关联表

> ID：10472396
> 
> 赞同：1
> 
> 时间：2012-05-06T16:57:08.750
> 
> 标签：r, data-analysis

我在 r-studio 工作，试图链接两个已经加载的表，然后查找关联规则。

## 设置：

我有两个数据表：

*   "uData" 字段 [user.id, rating, timestamp]
*   "uUser" 字段 [user.id, age, gender, 职业]

在 uData 中，每个用户可以出现多次，而在 uUser 中，每个用户只列出一次。我已经使用 r-studios 导入数据集加载了数据。我使用 arules、datasets、graphics、grDecies、lattice、Matrix、methods、stats 和 utils 包。

## 最终目标：

找出评分、年龄和性别之间的关联规则

## 第一季度

我相信我需要遍历我的 uData 表并从 uUser 中提取每一行的年龄和性别。我不确定如何制作新表，或者是否需要新表来实现我的最终目标。

## 第二季度

最终目标是尝试找到关联规则。我一直在尝试使用

> 规则 <- apriori( ***_* _** , 参数 = 列表(supp = .5, conf = .9, target = " **_** "))

在查看了一些教程后，我让它适用于虚拟数据，但不适用于我加载的数据。我不确定如何将每一行标记为事务。我努力了

> 交易 = 读取交易（uUser）

但这遭到了警告。任何帮助表示赞赏。

* * *

以下是来自 uData 的几行数据：

```
user.id rating  timestamp
1       4   878542420
1       3   888732928
4       4   878542699
1       4   875072547
5       3   875636053 
```

这是来自 uUser 的几行数据：

```
index   user.id age gender  occupation
1           1   24  M   technician
2           2   53  F   other     
3           3   23  M   writer    
4           4   24  M   technician
5           5   33  F   other 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:29:37.840

您可以使用 plyr::join 来匹配 user.id 字段，而不是显式循环，然后执行分析：

```
> library(plyr)
> join(uData, uUser, by='user.id')
  user.id rating timestamp index age gender occupation
1       1      4 878542420     1  24      M technician
2       1      3 888732928     1  24      M technician
3       4      4 878542699     4  24      M technician
4       1      4 875072547     1  24      M technician
5       5      3 875636053     5  33      F      other 
```

# java - 如何在 Maven 中整合来自子项目的构建工件？

> ID：10472406
> 
> 赞同：3
> 
> 时间：2012-05-06T16:58:00.163
> 
> 标签：java, maven

抱歉，如果这在其他地方有所涉及，恐怕我找不到这个特别琐碎问题的答案。

我有一个 Maven 项目，它引用并构建了 4 个子项目（作为捆绑包）。我已经正确设置了子项目之间的依赖关系，最终我构建了 4 个不同的 .jar 文件：

*   parentproj/sub1/target/sub1.jar
*   parentproj/sub2/target/sub2.jar
*   parentproj/sub3/target/sub3.jar
*   parentproj/sub4/target/sub4.jar

我的问题是，如何设置 mu 父构建，以便当我从主 .POM 文件构建时，所有 4 个 jar 都放在“/parentproj/target/...”中？

另一个问题是，我如何还构建一个 xxxx-ALL.jar（合并这 4 个包的内容）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:02:41.393

只需使用“dir”格式的[Maven Assembly 插件](http://maven.apache.org/plugins/maven-assembly-plugin/)将它们全部放在一个文件夹中，并使用“jar”格式将它们分组到一个 jar 中。

更多细节：

1.  您从您的 Maven 项目开始（我们称它们为子项目）
2.  创建一个新的maven项目（pom打包），使用<module>标签聚合所有子项目
3.  将程序集插件放入您的 pom.xml 文件中（见下文）
4.  创建正确的 assembly.xml 文件（见下文）

pom.xml 文件：

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.2.1</version>
    <executions>
        <execution>
                <id>distro-assembly</id>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
            <configuration>
                <appendAssemblyId>false</appendAssemblyId>
                    <finalName>somefolder</finalName>
                    <attach>false</attach>
                    <descriptors>
                    <descriptor>assembly.xml</descriptor>
                    </descriptors>
                <phase>package</phase>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

组装.xml 文件：

```
<assembly
xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
<id>SomeName</id>
<formats>
    <format>dir</format>
</formats>
<includeBaseDirectory>true</includeBaseDirectory>
<baseDirectory></baseDirectory>

<fileSets>
    <fileSet>
        <directory>appfiles</directory>
        <includes>
            <include>**</include>
        </includes>
        <outputDirectory>.</outputDirectory>
    </fileSet>
</fileSets>

<moduleSets>
    <moduleSet>
        <!-- useAllReactorProjects must be false if the assembly's run on the project with the module list -->
        <useAllReactorProjects>false</useAllReactorProjects>
        <includeSubModules>false</includeSubModules>

        <binaries>
            <includeDependencies>true</includeDependencies>
            <outputDirectory>bundle</outputDirectory>
            <unpack>false</unpack>
        </binaries>
    </moduleSet>
</moduleSets> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:40:36.820

> 另一个问题是，我如何还构建一个 xxxx-ALL.jar（合并这 4 个包的内容）？

[您可以使用Maven shade plugin](http://maven.apache.org/plugins/maven-shade-plugin/index.html)创建一个 uber-jar（一个包含项目所有依赖项的 jar）。只需使用这些作为依赖项创建另一个项目并生成这个 uber-jar。

# jquery - jQuery滑块在第一次加载网站时不加载图像

> ID：10472411
> 
> 赞同：1
> 
> 时间：2012-05-06T16:58:40.470
> 
> 标签：jquery, html, ajax

我正在使用 jquery load() 来显示我网站上的所有文档。我在 index.html 文件中的脚本如下所示

```
<script type="text/javascript">
  $(document).ready(function() {
    $('#main-wrap').load("home.html");

    $('#home').click(function() {
      $('#main-wrap').load("home.html");
      return false;
    });

    $('#wilgoc').click(function() {
      $('#main-wrap').load("wilgoc.html");
      return false;
    });
etc... 
```

在 home.html 中

```
$(document).ready(function() {
//$(window).load(function() {
    $('#slider').nivoSlider({effect:'fade', animSpeed:800, pauseTime:5000});
return false;
    }); 
```

nivoslider 的默认值为 (window).load，但是当我第二次加载 home.html 时它不起作用......有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:01:56.853

该页面已动态加载（**#slider**是一个新的 DOM 元素），因此无法正常工作

```
$('#home').click(function(e) {
    e.preventDefault();
    $('#main-wrap').load("home.html", function(){
        $('#slider').nivoSlider({effect:'fade', animSpeed:800, pauseTime:5000});
    });
}); 
```

**编辑：**

从 home.html 中删除 document.ready 并将其保存在 index html 文件中，并在每次加载 home.html 时调用回调函数中的插件，如下所示（您的 index.html）

```
$(document).ready(function() {

    $('#main-wrap').load("home.html", function(){
        $('#slider').nivoSlider({effect:'fade', animSpeed:800, pauseTime:5000});
    });

    $('#home').click(function(e) {
        e.preventDefault();
        $('#main-wrap').load("home.html", function(){
            $('#slider').nivoSlider({effect:'fade', animSpeed:800, pauseTime:5000});
        });
    });
    ...
    ...
}); 
```

**确保您没有在 div 中加载另一个完整的 html 文件（带有 html.head 等标签）。**

你可以试试这个（替换每一行）：

```
setTimeout(function(){
    $('#slider').nivoSlider({effect:'fade', animSpeed:800, pauseTime:5000});
}, 1000); 
```

# sql - 在 SQL 中使用 group by 对数据进行分类

> ID：10472416
> 
> 赞同：1
> 
> 时间：2012-05-06T16:59:42.257
> 
> 标签：sql

[我有一个与不同类别](https://stackoverflow.com/questions/3611542/sql-columns-for-different-categories)的链接 SQL 列中发布的问题类似的疑问。我有学生表，上面有学生姓名、期中成绩和期末成绩，如下面的成绩表所示。

```
StName  MidTermGrade    FinalGrade
St1         1               1
St2         2               1
St3         2               3
St4         1               3
St5         1               1
St6         2               3
St7         2               2
St8         1               1
St9         2               2
St10        2               3
St11        3               1
St12        2               1
St13        3               3
St14        3               2
St15        1               2 
```

需要使用 SQL 查询对这些数据进行分类以生成输出，以便所有评分和学生姓名都属于一个查询输出，我可以将其粘贴到 word/excel 中并将其作为报告提供。

```
FinalGrade  MidTermGrade1   MidTermGrade2   MidTermGrade3
   1        St1             St2             St11
   1        St5             St12    
   1        St8     
   2        St15            St7             St14
   2                        St9 
   3        St4             St3             St13
   3        St6 
   3                        St10 
```

请帮助并告知是否可以实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:00:10.493

不要认为得到你需要的东西很容易/可能，但也许这已经足够好了：

```
select FinalGrade, MidtermGrade, group_concat(StName) from GradeTable group by FinalGrade, MidtermGrade; 
```

然后你可以用代码轻松地完成剩下的工作..？

# php - mod_rewrite 添加另一个规则

> ID：10472419
> 
> 赞同：0
> 
> 时间：2012-05-06T16:59:46.873
> 
> 标签：php, mod-rewrite

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|css|robots\.txt)
RewriteRule ^(.*)$ index.php?p=$1 [L] 
```

我使用它将所有路由转发到 index.php，如果我想重写以下内容：

[http://localhost/文件夹/方法/值](http://localhost/folder/method/value)

那将是

[http://localhost/folder/method/?f=value](http://localhost/folder/method/?f=value)

我如何使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:11:50.343

请参阅[mod rewrite 标记 wiki](https://stackoverflow.com/tags/mod-rewrite/info)和示例 6。

对于您的具体情况，您可以在*前面添加*一条规则，例如

```
RewriteRule ^(\w+)/(\w+)/(\w+)$  $1/$2/?f=$3 [L] 
```

另请参阅[Serverfault：关于 Mod_Rewrite 规则您想知道但不敢问的一切？](https://serverfault.com/questions/214512/everything-you-ever-wanted-to-know-about-mod-rewrite-rules-but-were-afraid-to-as)了解规则排序。

# ruby-on-rails - ActiveAdmin 不在主菜单上进行模型翻译

> ID：10472420
> 
> 赞同：3
> 
> 时间：2012-05-06T16:59:57.713
> 
> 标签：ruby-on-rails, internationalization, activeadmin

我对 ActiveAdmin 0.4.3 有一个关于菜单翻译的奇怪错误。我有一个 models.es.yml，其中有所有 ActiveRecord 翻译。它在动作中运行良好，例如“广告”在显示或编辑视图中显示为“Anuncio”。

但在主菜单中仍然显示“广告”。

当我编辑文件 models.es.yml（例如添加一个空格）并重新加载菜单接受翻译的页面时，更奇怪的事情发生了，当然我不能在生产中这样做。

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:13:10.090

您可以通过以下过程强制将标签添加到菜单中：

```
ActiveAdmin.register Ad do
    menu :label => "Anuncios"
end 
```

# php - php脚本来检测jquery中需要的链接

> ID：10472423
> 
> 赞同：-1
> 
> 时间：2012-05-06T17:00:20.613
> 
> 标签：php, javascript, jquery, regex

我有以下 php 代码来检测和替换链接：

```
//Detect links
    $pattern_url='~(?>[a-z+]{2,}://|www\.)(?:[a-z0-9]+(?:\.[a-z0-9]+)?@)?(?:(?:[a-z](?:[a-z0-9]|(?<!-)-)*[a-z0-9])(?:\.[a-z](?:[a-z0-9]|(?<!-)-)*[a-z0-9])+|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))(?:/[^\\/:?*"<>|\n]*[a-z0-9])*/?(?:\?[a-z0-9_.%]+(?:=[a-z0-9_.%:/+-]*)?(?:&[a-z0-9_.%]+(?:=[a-z0-9_.%:/+-]*)?)*)?(?:#[a-z0-9_%.]+)?~i';
    preg_match_all($pattern_url, $post, $matches); 
    for ($i=0; $i < count($matches[0]); $i++)
    {
        if(substr($matches[0][$i],0,4)=='www.')
        $post = str_replace($matches[0][$i],'http://'.$matches[0][$i],$post);
    }
    $post = preg_replace($pattern_url,'<a target="_blank" href="\\0">\\0</a>', $post); 
```

我想在 javascript/jquery 中有相同的内容。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:04:36.187

```
function replaceURLWithHTMLLinks(text) {
   var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
   return text.replace(exp,"<a href='$1'>$1</a>"); 
} 
```

[如何用链接替换纯 URL？](https://stackoverflow.com/questions/37684/how-to-replace-plain-urls-with-links)

# php - 如何按唯一 IP 计算页面浏览量

> ID：10472425
> 
> 赞同：0
> 
> 时间：2012-05-06T17:00:38.347
> 
> 标签：php, pageviews

我有一个视频播放页面，我想在其中计算视频观看次数。目前我正在更新页面视图：

```
mysql_query("UPDATE video set views = views+1 where videokey = '$key'")or die(mysql_error()); 
```

但它从一个 IP 不断更新。我想通过每个唯一的 IP 创建一个视图，我不想将用户的 IP 放入数据库中，也不想从数据库中检查用户的 IP 然后更新视图。有没有办法在不查询现有当前 IP 的数据库的情况下计算视频观看次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:57:05.283

这得看情况。会可靠吗？不，但可以保护你免受感官增量的影响......

如果你想走这条路，我会建议[全球会议](http://php.net/manual/en/function.session-register.php)。这取决于您的会话将持续多长时间，但如果有人刷新等，它应该提供一些保护，防止重新计算相同的 ip。从长远来看，它仍然不是持久的（这是关键），大量的 ips 可能会杀死您的服务器。

请记住它已关闭，因此在开始之前请查看您的 php.ini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:50:40.437

给他们一个`$_COOKIE`使上述查询不会触发的。

它不是防弹的，但它是一些东西。

# c++ - 2003 年 c++ mfc 库问题

> ID：10472431
> 
> 赞同：0
> 
> 时间：2012-05-06T17:01:07.930
> 
> 标签：c++, visual-c++

我已经使用 microsoft visual 6.0 编译了一个程序，该程序正在使用 MFC 库，但我遇到的问题是它在我的系统（windows 7）上运行良好，但在我的其他系统（windows 2003）上运行良好。

弹出的错误是 Windows 2003 上的“无法加载 MFC42D 链接库”，我知道我可以下载该 dll 并将其与程序一起使用，但我不需要，因为我已将其包含在我的程序，我需要为 windows 2003 系统下载任何东西以便它可以运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:57:47.460

首先，您将应用程序与 MFC 库的调试版本链接起来。MFC 库的调试版本不可再分发（请参阅[http://msdn.microsoft.com/en-us/library/aa260978%28v=VS.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa260978%28v=VS.60%29.aspx)）。因此，请改为链接非调试版本。

其次，如果您与 MFC 动态链接，您还需要分发 MFC DLL。查看安装 Visual Studio 的文件夹。某处应该有 MFC 和 C 运行时的安装程序。

如果在客户的计算机上运行安装程序对您来说是个问题，您可能需要考虑使用 MFC 进行静态链接。在 Visual Studio 帮助中查找确切的编译器和链接器标志。

# android - Android：以编程方式从 XML 制作布局

> ID：10472432
> 
> 赞同：3
> 
> 时间：2012-05-06T17:01:10.753
> 
> 标签：android, android-layout

我有一个 XML 中的通用布局，我想在填充内容后以编程方式添加（即更改文本视图上的文本，设置按钮的侦听器等）多次到屏幕布局。我知道我可以使用 layout.addView(View V) 添加视图，但是

如何从 XML 文件构造新布局？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T17:05:20.477

您可以使用 LayoutInflater 服务来做到这一点。通过像这样加载它来获取对它的引用：

```
LayoutInflater inflater =
    (LayoutInflater)this.getSystemService( Context.LAYOUT_INFLATER_SERVICE ); 
```

然后，您可以从 XML 资源创建布局，如下所示：

```
View view = inflater.inflate( R.layout.layoutname, null ); 
```

这里`layoutname`只是您`res/layout`目录中 XML 文件的名称。

最后，您可以使用该功能将此视图添加到您的布局中`addView`。

# apache - tomcat 和 apache http 在一起

> ID：10472433
> 
> 赞同：0
> 
> 时间：2012-05-06T17:01:17.380
> 
> 标签：apache, tomcat6, ubuntu-11.10

我可以在同一台机器（Ubuntu 11.10）上安装 apache tomcat 6 和 apache http web 服务器没有问题吗？

Tomcat服务GeoServer

apache web serve 提供静态文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:40:12.270

在不同的 IP 或相同的 IP 但不同的端口上安装（绑定）每个。

在最后一种情况下，您可以让 Apache 在端口 80 上运行，而 Tomcat 的 ProxyPass URL 则在端口 8080 上运行。这样，Apache 就成为了前端。

# node.js - 在子目录中找不到 Jade 布局

> ID：10472437
> 
> 赞同：6
> 
> 时间：2012-05-06T17:02:05.170
> 
> 标签：node.js, express, pug

## 我的设置：

我的目录结构如下所示：

```
/views/
   |-- index.jade
   |-- layout.jade
   /account/
      |-- login.jade
      |-- register.jade 
```

我已将视图引擎配置如下：

```
app.set('view engine', 'jade'); 
```

*编辑：*我也有

```
app.set('views', __dirname + '/views'); 
```

我的控制器看起来像：

```
app.get('/login', redirectIfLogined, function(req, res){
    res.render('account/login', { title: "Login", redir: req.query.redir});
});

app.get('/register', redirectIfLogined, function(req, res) {
    res.render('account/register', { title: "Register"});
}); 
```

* * *

## 我的问题

使用所述设置，我收到 500 错误：

```
500 Error: failed to locate view "layout"
at Function.compile (D:\dev\Azznomad\express-template\node_modules\express\lib\view.js:58:15)
at ServerResponse._render (D:\dev\Azznomad\express-template\node_modules\express\lib\view.js:414:18)
at ServerResponse.render (D:\dev\Azznomad\express-template\node_modules\express\lib\view.js:315:17)
at ServerResponse._render (D:\dev\Azznomad\express-template\node_modules\express\lib\view.js:429:10)
at ServerResponse.render (D:\dev\Azznomad\express-template\node_modules\express\lib\view.js:315:17)
at D:\dev\Azznomad\express-template\controllers\accountController.js:6:13
at callbacks (D:\dev\Azznomad\express-template\node_modules\express\lib\router\index.js:272:11)
at D:\dev\Azznomad\express-template\modules\middleware\account.js:27:9
at callbacks (D:\dev\Azznomad\express-template\node_modules\express\lib\router\index.js:272:11)
at param (D:\dev\Azznomad\express-template\node_modules\express\lib\router\index.js:246:11) 
```

一旦我将`layout.jade`文件复制到`/account/`文件夹中，它就可以完美运行。不幸的是，这没有任何意义，因为它迫使我拥有多余的布局文件。

**我错过了什么？**

* * *

*顺便提一句。此代码片段来自 AzzNomad 的[express/mongoose 模板](https://github.com/AzzNomad/express-template)，该模板对学习 mongoose 的 express 非常有帮助。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T08:12:49.890

你需要把

`extends ../layout`

在帐户下的视图中，因为布局不在同一个文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:31:33.370

您还应该设置视图路径，因为它位于应用程序脚本之外的另一个目录中。

```
app.set('views', __dirname + '/views'); 
```

# php - 如何在没有对话框的情况下保存使用 PHPExcel 创建的 Excel 文件？

> ID：10472440
> 
> 赞同：5
> 
> 时间：2012-05-06T17:02:17.760
> 
> 标签：php, phpexcel

我正在尝试使用[PHPExcel](http://phpexcel.codeplex.com/)生成一个 Excel 文件（xls） ，但将其保存在服务器上，而不是在我的桌面上提示下载！

如何指示 PHPExcel 保存我的文件，而不是让浏览器显示对话框？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T17:04:55.323

好的我明白了：

我必须使用：

```
$objWriter->save('nameoffile.xls'); 
```

...而不是定义标题，因为标题“告诉”浏览器保存文件。

还是非常感谢！

# android - ActionBar Sherlock 菜单项 OnClick

> ID：10472443
> 
> 赞同：19
> 
> 时间：2012-05-06T17:02:47.570
> 
> 标签：android, menu, click, actionbarsherlock

我是使用 Sherlock ActionBar 的新手，我已经让它在我的应用程序中运行，并且我在操作栏中有一个项目，但我不知道如何让项目在单击时执行某些操作，我得到的就是这个。

```
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add("Folder")
        .setIcon(R.drawable.folder)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    return true;
}

public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        //What do i write here?
    return true; 
```

我希望你明白我的意思:)

**编辑**

[嘿，我在找到的这个线程](https://stackoverflow.com/questions/10278952/sherlockactionbar-adding-a-button-to-the-actionbar)的一些帮助下使它工作，我做了一些更改，这里是代码！:DDD

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
   inflater.inflate(R.menu.menu, menu);
   return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.search:
            finish();
            return true;
        case R.id.new_folder:
            finish();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-18T06:47:51.117

试试这个，它有效：

```
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
      com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
      inflater.inflate(R.layout.menu, menu);
}

public boolean onOptionsItemSelected(MenuItem item) {
      // Handle item selection
      switch (item.getItemId()) {
      case R.id.settings:
          Intent i=new Intent(class1.this, clas2.class);
          startActivity(i);
          return true;
      }
      return false;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-06T17:21:32.967

像这样的东西（取自我的一个应用程序）。 **本例中的活动扩展`SherlockFragmentActivity`。**

```
 @Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    menu.add(Menu.NONE, R.id.ID_ACTION_EXIT, Menu.NONE,R.string.action_label_exit)
    .setIcon(android.R.drawable.ic_menu_close_clear_cancel)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(
        com.actionbarsherlock.view.MenuItem item) {
    switch(item.getItemId()){
    case R.id.ID_ACTION_EXIT:
        Main.this.finish();
        return true;
    default:
        return false;
    }
} 
```

`R.id.ACTION_EXIT`放置在`res/values/ids.xml`

```
<resources><item name="ID_ACTION_EXIT" type="id"/></resources> 
```

[编辑] 然后试试这个（扩展 SherlockListActivity）。您必须先进行一些编辑。此代码来自 Sherlock 演示。你应该下载它们。

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    SubMenu sub = menu.addSubMenu("Theme");
    sub.add(0, R.style.Theme_Sherlock, 0, "Default");
    sub.add(0, R.style.Theme_Sherlock_Light, 0, "Light");
    sub.add(0, R.style.Theme_Sherlock_Light_DarkActionBar, 0, "Light (Dark Action Bar)");
    sub.getItem().setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == android.R.id.home || item.getItemId() == 0) {
        return false;
    }
    THEME = item.getItemId();
    Toast.makeText(this, "Theme changed to \"" + item.getTitle() + "\"", Toast.LENGTH_SHORT).show();
    return true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T21:06:11.817

请也试试这个。

```
import android.os.Bundle;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

public class ActionBarTestActivity extends SherlockActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_action_bar_test);
    }

    @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {

        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.activity_action_bar_test, menu);
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        super.onOptionsItemSelected(item);

        switch (item.getItemId()) {
        case R.id.phone:
            Toast.makeText(getBaseContext(), "You selected Phone",
                    Toast.LENGTH_SHORT).show();
            break;

        case R.id.computer:
            Toast.makeText(getBaseContext(), "You selected Computer",
                    Toast.LENGTH_SHORT).show();
            break;

        case R.id.gamepad:
            Toast.makeText(getBaseContext(), "You selected Gamepad",
                    Toast.LENGTH_SHORT).show();
            break;

        case R.id.camera:
            Toast.makeText(getBaseContext(), "You selected Camera",
                    Toast.LENGTH_SHORT).show();
            break;

        case R.id.video:
            Toast.makeText(getBaseContext(), "You selected Video",
                    Toast.LENGTH_SHORT).show();
            break;

        case R.id.email:
            Toast.makeText(getBaseContext(), "You selected EMail",
                    Toast.LENGTH_SHORT).show();
            break;

        }
        return true;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T10:32:37.210

```
You use this one 
```

```
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
      getSherlockActivity().getSupportMenuInflater().inflate(R.menu.settingmenu, menu);
    getSherlockActivity().getSupportMenuInflater().inflate(R.menu.menugridcalendar,me
} 
```

```
This will be added in your sherlockfragment activity:

public boolean onOptionsItemSelected(MenuItem item) {
      switch (item.getItemId()) {
      case R.id.settings:
          Intent intent=new Intent(currentclass.this, calledclass.class);
          startActivity(intent);
          return true;
      }
      return false;
} 
```

# php - 替换 $_GET 以使其从命令行工作

> ID：10472446
> 
> 赞同：1
> 
> 时间：2012-05-06T17:03:15.433
> 
> 标签：php, linux, command-line, get

目前我有这个小脚本，可以检查域名是否免费。它可以在浏览器中运行，当您键入 check.php?domain=xxxx.com 并查看它是否免费时。

由于使用了 $_GET，它只能在浏览器中使用，而不能在命令行中使用。

PHP 手册说我应该使用 $argv 或 getopt() 来实现这一点。我已经尝试过了，但是我的脚本停止工作。

如何使以下代码从命令行工作？

```
<?php
include_once('/home/xxx/API.php');  
$CClient = new XCApi();
$CClient->isAvailable();
$d = $_GET['domain'];
ob_implicit_flush(1);

for ($i = 0; $i < 60000; ++$i) {

$domainResult = $CClient->checkDomainAvailability( new XDomain( $d ) );

if ( $domainResult->getStatus() == "domain_available" ) {
    echo $i . ". Domain " . $d . " is free (checked: " . date("Y-m-d H:i:s") . ")<br />";

    $_GET['domain'] = $d;
    include_once('Register.php');
    exit;

} 
elseif ( $domainResult->getStatus() == "domain_unavailable" ) {
    echo $i . ". Domain " . $d . " is unavailable (checked: " . date("Y-m-d H:i:s") . ")<br />";
}
else {
    echo $i . ". Domain " . $d . " is unknown (checked: " . date("Y-m-d H:i:s") . ")<br />";
}
echo"<pre>";
print_r($domainResult);
echo"</pre>";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:06:07.063

编写另一个脚本来读取命令 args 并将它们放入 $_GET 数组中，然后包含此文件。

```
#!/...
<?php
$_GET = array(
'domain' => $argv[1]
);

include 'yourscript.php'; 
```

或者只是将那一点放在文件（副本）的顶部

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T17:07:03.997

改变

```
$d = $_GET['domain']; 
```

到：

```
$d = $argv[1]; 
```

...并在命令行中调用它，如下所示：

```
php /path/to/script.php "www.domaintocheck.com" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:06:10.173

代替...

```
$d = $_GET['domain']; 
```

和...

```
$d = $argv[1]; 
```

对于命令行版本。

[http://php.net/manual/en/reserved.variables.argv.php](http://php.net/manual/en/reserved.variables.argv.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T17:18:55.930

这是一个副本：[PHP在linux命令提示符中传递$_GET](https://stackoverflow.com/questions/4186392/php-passing-get-in-linux-command-prompt)

Linux 中另一种可能的方法是使用 curl（将 localhost 更改为服务器的域名）：

```
curl http://localhost/check.php?domain=xxxx.com 
```

最后，简单愚蠢的方法是检查是否设置了 $_GET['domain'] 或 $argv[1] 或 getopt('domain:') 。

这样，您的脚本既可以从 http 请求也可以从命令行运行。

# custom-fields - Virtuemart 2.0：如何从总价中排除底价

> ID：10472448
> 
> 赞同：0
> 
> 时间：2012-05-06T17:03:25.823
> 
> 标签：custom-fields, virtuemart

我有不同尺寸的产品。每个尺寸都有不同的价格。通过产品上的自定义字段设置不同的尺寸和价格。我在自定义字段值中填写了产品的总价格（因此不是增量值 +10，例如）。我还在产品详细信息中设置了产品的基本价格，因为这是强制性的。

产品 A 基本价格是 100 欧元 “尺寸 70x100 是 100 欧元” “尺寸 80x100 是 110 欧元” “尺寸 90x100 是 120 欧元”

现在，当我将 1 个尺寸为 80x100 的产品 A 放入购物车时，总价格错误地设置为 210 欧元（110 欧元基础加上 110 尺寸为 80x100）。

解决方案是从总价中排除基价。这个怎么做？

另一种解决方案是只使用+10 欧元、+20 欧元等。这对我来说意味着无法负担的工作量，所以我希望解决方案是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T22:56:11.910

也许这是自定义字段中的一个美德问题（尚未解决）。在我的测试网站：[http ://outros.net23.net/index.php?option=com_virtuemart&view=productdetails&virtuemart_product_id=8&virtuemart_category_id=2](http://outros.net23.net/index.php?option=com_virtuemart&view=productdetails&virtuemart_product_id=8&virtuemart_category_id=2)

您可以看到默认示例数据 vm2.0.6，没有模板覆盖。如果您尝试将圆锯的自定义字段大小更改为“50”，价格将增加到 261.60 和税：59.20 但是如果您将此自定义字段添加到购物车......那么我们可以看到价格不一样。 ..

尝试在您的 localhost 中测试一个 VM2 安装（使用 VM2 示例数据）并比较/检查结果是否与您相同。

此致

# arrays - MIPS addi 指令到数组基础

> ID：10472452
> 
> 赞同：2
> 
> 时间：2012-05-06T17:04:02.873
> 
> 标签：arrays, add, mips

我是 MIPS 的新手，很难弄清楚这段代码的含义......其中 $s6 是数组 A 的开头：

```
addi $t0,$s6,4 
```

我不确定这是否意味着 $t0 = A[4] -或者- 如果它意味着 $t0 = A[0] + 4，则取 A[0] 中的值并将其添加 4 将其保存回 A[ 0]

任何帮助将非常感激。

先感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:09:50.907

该指令意味着您将存储在 $s6 中的值加上 4 并将新值存储在 $t0 中。$s6 中的值保持不变。$s6 是一个保存的临时寄存器，因此任何时候您需要更改 $s_ 中的值时，都需要先将其保存到堆栈中。您没有更改 $s6 中的值，因此您不需要将其保存到堆栈中。您将它保存到一个临时寄存器中，您不必担心您覆盖了哪些内容。另外 $s6 实际上是 Regester 22 或 $R22 而 $t0 是 $r8....

您基本上是将数组增加一个 32 位字到下一个指令/数据字。

这是对您的评论的回应：

按照惯例，你说 A[0] = 7，你是说寄存器 $s6 的内容所引用的“内存地址”等于 7。 $s6 不等于 7，但它在主内存中指向的内容确实如此。s6 只保存一个我们解释或知道是地址的数字。我们将 4 添加到 $s6 是因为我们想要添加足够的字节来获取数组的下一个元素。一个字是 32 位是 4 个字节。按照惯例，我们要添加 4，它将以字节为单位到达下一个单词。一个字通常是 32 位或 4 个字节长。将 4 个字节添加到 s6 后，我们不知道结果，因为我们没有被告知 s6 最初是什么，但我们知道 t0 现在本质上指向 s6[1]。我不会说您正在向数组添加另一个索引。该数组可能已经设置好，或者您可能会读到最后，但我知道 mips 不会给您错误。它只会告诉你在你给它的地址所引用的主内存中的位置是什么。可以是空白、有效、stail 或您的程序数据的其他部分。需要了解更多程序的上下文才能了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:50:23.890

该行：

```
addi $t0,$s6,4 
```

其中 $s6 是数组的基数，取寄存器 $s6 的内容，向它们添加 4 并将结果放入 $t0。因此，如果 $s6 中的地址是 0x00400000，那么在 addi 指令之后，$t0 将包含 0x00400004。

addi 指令将立即数（即整数值）添加到源寄存器并将结果存储在目标寄存器中，在本例中为$t0。

所以如果 $s6 是 A[0]，那么 $t0 就变成 A[1]，假设你有一个整数数组。如果你有一个字符数组，即一个字符串，那么$t0 就变成了A[3]。$t0 不保存这些数组索引处的值，它保存了这些数组索引的地址，因为那是 $s6 最初保存的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:06:25.077

大多数 MIPS 指令是：

```
instruction $destination, $operands 
```

这个具体的指令，在$s6 上具有数组A[] 开头的*内存地址，将A[] 的第4 个字节的位置存储在$t0 上。*

据我了解，在 $s6 中，您的内存地址为 A[0]，而不是值 A[0]

也就是说，如果$s6 = @A[0]是地址值0x00，那么$t0 = $s6+4的值是0x04

根据数组 A[] 的类型（短、整数、长），这可能意味着您指向 $t0 中数组的不同位置。

在 4 字节长整数数组的正常情况下，$t0 现在将指向 A[1]

# date - 如何扩展基于日期的事件系统，例如在任何给定时间处理数百万个事件的 Google 日历

> ID：10472455
> 
> 赞同：1
> 
> 时间：2012-05-06T17:04:33.157
> 
> 标签：date, calendar, google-calendar-api, eventtrigger

我正在寻找架构或算法，通过这些架构或算法可以使用有效的模式来触发基于时间的事件。前的意思。当“Sun, 06 May 2012 23:54:11 +0300” 到达时，应该立即触发 n 个事件。（其中 N 可以介于 0 和 N 之间）。

问题不在于扩展交付的系统（无论是消息队列，还是 http get 或其他任何东西……），而是关于有效检测应该在给定时间触发的事件。或者更准确地说，我想我是在询问正确的数据结构以允许有效的 O(n) ？根据日期窗口轮询 n 个事件。

参考文献很有价值，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:29:07.020

堆可以让你保留一个项目的集合，在成本 O(log n) 的情况下执行以下操作： -- 插入任意项目 -- 弹出最小项目 如果我没记错的话，你可以在 O( 1）。

因此，我认为您应该将事件保存在堆中（按时间指定的顺序），并且： - 每当堆更改时，为最小（=下一个时间）项目的时间安排操作 - 对于复杂事件，使事件再次插入自身，与下一次调用的时间一致

这并不严格基于日期窗口，但我认为它可能对你更好。

# javascript - 如果一个数组中的值与另一个数组中的任何值匹配，则返回 true

> ID：10472457
> 
> 赞同：0
> 
> 时间：2012-05-06T17:04:50.593
> 
> 标签：javascript, jquery, arrays, match

我有下面的 jQuery，当输入值（在数组中）与 .adiv 的 html （在数组中）匹配时，我会收到一个警报，说是真的，但只有当两个数组中的所有值都匹配时才会发生这种情况。我想要做的是，如果临时数组中的所有值都与 divar 数组中的任何值匹配，则返回 true。所以例如。如果.adiv html 是`this is a div`并且输入值是`this div`返回true`is div`返回true 等，但是如果输入值是`thisisadiv`或例如`isa div`OR`random words`返回false。此外，如果临时数组包含一个不在 divar 数组中的单词，它应该返回**false**

## [http://jsfiddle.net/7Q4CJ/](http://jsfiddle.net/7Q4CJ/)

```
jQuery.fn.compare = function(t) {
    if (this.length != t.length) { return false; }
    var a = this.sort(),
        b = t.sort();
    for (var i = 0; t[i]; i++) {
        if (a[i] !== b[i]) { 
                return false;
        }
    }
    return true;
};
$("button").click(function() {

    var inputstr = $(".searchval").val().replace(/ /g, ",");
    var temp = new Array();
    temp = inputstr.split(",");

    var dival = $(".adiv").html().replace(/ /g, ",");
    var divar = new Array();
    divar = dival.split(",");

    alert($(temp).compare(divar)); 
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:08:56.260

*经过几次国内中断....*

jQuery 的`.each()`结合`.inArray()`可以帮助使代码合理简洁。

坚持`.compare()`插件的原始概念，我得到了这个：

```
jQuery.fn.compare = function(t) {
    var match = true;
    this.each(function(i, word) {
        if($.inArray(word, t) === -1) {
            match = false;
            return false;//equivalent to break
        }
    });
   return match;
}; 
```

这是一个[演示](http://jsfiddle.net/7Q4CJ/6/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:35:43.740

试试这个[http://jsfiddle.net/nandu8201/SsSna/1/](http://jsfiddle.net/nandu8201/SsSna/1/)

估计应该够了。如果为假，您将得到-1，如果为真，您将得到0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T01:02:57.987

或使用 underscore.js 的单行版本：

```
jQuery.fn.compare(t){
    _.any(this, function(item){ return _.indexOf(t, item) !== -1; });
} 
```

# html - Html 标题属性显示在流中，内部元素，当它在它上面时

> ID：10472471
> 
> 赞同：0
> 
> 时间：2012-05-06T17:06:16.510
> 
> 标签：html, css, tooltip, css-float

我正在使用 title 属性来显示工具提示：

```
.remove_button{
background-color:#ff3300;
color:#ffffff;
font-family:Courier New,sans-serif;
font-weight:900;
font-size:20px;
float:right;
border-radius:5px;
padding:0px 6px 0px 6px;
margin-right:15px;
}

<div class="remove_button" title="Remove">x</div> 
```

但是标题显示在元素内部

```
------x------          :When not hovering
------xRemove------    :When hovering

one '-' is one pixel of padding 
```

我上次问的时候被误解了，但要清楚地指出，“标题”没有显示在其余内容的上方，而是显示在实际按钮内的流入流中。这不是标题通常的工作方式。

编辑：我发现了问题，但是这段代码并没有影响我的任何其他“标题工具提示”，这怎么可能？

```
*[title]:hover:after{
content:attr(title);
background-color:#feeba6;
color:#333333;
} 
```

上面代码的目的是设置工具提示的样式，但这似乎没有发生。无论如何，我想这只是我在谷歌上发现的一些废话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:09:51.900

你确定，你没有其他任何东西，可以混淆浏览器。
您可以尝试仅使用该代码片段创建一个文件，然后查看该文件是否有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:39:14.823

如果您将鼠标悬停在具有标题属性的元素上足够长的时间，则本机浏览器会显示工具提示。

但是，我认为你的工具提示有一些你没有包含的 javascript 驱动它......？

# wpf - 使用 DataTemplate 和 DataTemplateSelector 通过 ContentControl 绑定到属性

> ID：10472473
> 
> 赞同：0
> 
> 时间：2012-05-06T17:06:21.337
> 
> 标签：wpf, data-binding, contentcontrol

这是我的 XAML

```
 <Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
xmlns:basic="clr-namespace:Emule.GUI.Design.Templates" 
xmlns:Search="clr-namespace:Emule.GUI.Features.Search" 
xmlns:Finder="clr-namespace:Emule.GUI.Util.Finder"mc:Ignorable="d"
x:Class="Emule.GUI.Features.Search.View" Title="View" Height="454" Width="696"> 
```

```
 <!-- Default DataTemplate --> 
<DataTemplate x:Key="DefaultDataTemplate"> 
   <TextBox Grid.Row="2"  Grid.Column="2" x:Name="joe"
          Visibility="{Binding OperatorValueVisibility, Mode=OneWay}"
          Text="{Binding OperatorValue, UpdateSourceTrigger=PropertyChanged}" /> 
</DataTemplate>

<!-- DataTemplate for string list --> 
<DataTemplate x:Key="ListStringDataTemplate"> 
  <basic:ListValuesSearch MinHeight ="740" x:Name="ListValues" /> 
</DataTemplate> 

<!-- DataTemplate Selector -->

<Search:PropertyDataTemplateSelector  x:Key="templateSelector" 
    DefaultDataTemplate="{StaticResource DefaultDataTemplate}" 
    BooleanDataTemplate="{StaticResource BooleanDataTemplate}" 
    EnumDataTemplate="{StaticResource EnumDataTemplate}"/> 
```

```
<StackPanel Grid.Row="2" Grid.Column="2" HorizontalAlignment="Left" >
    <ContentControl ContentTemplateSelector="{StaticResource templateSelector}" 
                    Content="{Binding Path=PoDFinder.CodicePod}" />
</StackPanel> 

</Window> 
```

这是我的控制（wpftoolkit 数据网格）

```
<UserControl x:Class="Emule.GUI.Design.Templates.ListValuesSearch" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:WpfToolkit="http://schemas.microsoft.com/wpf/2008/toolkit"

xmlns:Finder="clr-namespace:Emule.GUI.Util.Finder">

<UserControl.Resources> 
   <ResourceDictionary> 
     <ResourceDictionary.MergedDictionaries> 
       <ResourceDictionary Source="DataGrid.Generic.xaml"/> 
     </ResourceDictionary.MergedDictionaries> 
   </ResourceDictionary> 
</UserControl.Resources> 

<StackPanel> 
    <WpfToolkit:DataGrid ItemsSource= "{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContentControl}, 
    Path=OperatorValues, Mode=TwoWay}" x:Name="ListValuesSearchControl"> 

     <WpfToolkit:DataGrid.Columns > 
        <WpfToolkit:DataGridTextColumn Header="Lista valori" Width="Auto" Binding="{Binding Path=Item}"/> 
    </WpfToolkit:DataGrid.Columns> 
   </WpfToolkit:DataGrid> 
</StackPanel> 

</UserControl> 
```

我的数据模板`ListStringDataTemplate`不显示数据数据网格（显示类型名称），但请注意，如果我直接使用控件`<basic:ListValuesSearch MinHeight ="740" x:Name="ListValues" />`而没有数据模板选择器工作正常。

我认为问题是这条路`ItemsSource= "{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContentControl}, Path=OperatorValues, Mode=TwoWay}"`

我可以解决这个问题，我错了吗？

谢谢

吨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:28:17.003

为什么不摆脱 DataTemplateSelector 并在 DataTemplates 中指定 DataType？它更容易，几乎可以工作。

在您的用户控件中，您的绑定应该如下所示，但前提是 PoDFinder.CodicePod 是您的集合。如果不是，您必须添加属性的路径。

```
<StackPanel> 
 <WpfToolkit:DataGrid ItemsSource="{Binding}"> 
   <WpfToolkit:DataGrid.Columns> 
    <WpfToolkit:DataGridTextColumn Header="Lista valori" Width="Auto" Binding="{Binding Path=Item}"/> 
   </WpfToolkit:DataGrid.Columns> 
  </WpfToolkit:DataGrid> 
</StackPanel> 
```

# struts2 - (Struts2) 如何从拦截器向 Action 实例添加新参数？

> ID：10472475
> 
> 赞同：1
> 
> 时间：2012-05-06T17:06:38.910
> 
> 标签：struts2, interceptor, actioncontext, valuestack

我想**制作一个拦截器**来预处理 XML 请求。在这个拦截器中，它解析 XML 并将处理后的信息放入 ValueStack 中，以便它可以映射到操作中的实例。但是，我尝试了很多方法，但没有一个是有效的。任何人都可以帮助我并给我建议吗？谢谢！

> **In Interceptor**
> 
> //Get ValueStack
> ActionContext ctx = invocation.getInvocationContext();
> 映射 ctxMap = ctx.getValueStack().getContext();
> 
> //尝试了以下，但以下都不行
> ctxMap.get("com.opensymphony.xwork2.ActionContext.parameters")).put("data1", "1");
> ctxMap.get("参数")).put("data1", "1");
> ctxMap.get("request")).put("data1", "1");
> ctx.getParameters().put("data1",new String[]{"1"});

```
//Sample Action Class
public class TestAction extends ActionSupport {
     private String data1;
     public String execute() {  
         System.out.println("data1 value: " + data1);
         return SUCCESS;
     }
//Get Setter is omitted here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T14:55:53.817

您应该将处理后的值添加到拦截器内的值堆栈中

ActionContext.getContext().getValueStack().setValue("data1",yourdata);

如果您的操作实例已在拦截器调用时创建，则应添加该值。如果它不工作，你的拦截器堆栈的顺序应该有问题。尝试将你的拦截器放在堆栈的底部，这样我们就可以保证剩下的处理已经结束，并且绑定到你的动作属性是按要求工作的。

# java - 无法通过Java套接字发送消息而不关闭它

> ID：10472486
> 
> 赞同：0
> 
> 时间：2012-05-06T17:09:02.100
> 
> 标签：java, sockets

我正在编写一个大型 Java 应用程序的服务器部分，用于使用 Java 套接字通过 TCP/IP 与客户端通信。客户端（用 PHP 编写）连接到服务器，发送 XML 格式的查询，然后服务器发回响应。查询-响应可以在单个连接中重复多次。

服务器端非常简单。它应该允许多个客户端连接，因此有一个线程正在侦听并为每个接受的连接生成一个会话。会话由一个对象组成，该对象包含两个用于发送和接收的 LinkedBlockingQueue，两个用于使用这些队列发送和接收消息的线程以及一个处理线程。

问题是任何消息实际上只有在套接字关闭后才会传输。响应消息毫无问题地进入消息队列和 PrintStream.println() 方法，但仅当客户端关闭其一侧的连接时，wireshark 才会报告传输。在启用自动刷新或使用 flush() 的情况下创建 PrintStream 不起作用。关闭服务器端的套接字也不起作用，服务器仍然起作用并接收消息。

同样，在服务器端接收查询的客户端的当前实现工作正常，`echo -e "test" | socat - TCP4:192.168.37.1:1337`从本地 Linux 虚拟机也是如此，但是当我远程登录到服务器并尝试发送一些东西时，服务器不会收到任何东西，直到我关闭telnet 客户端，与上述相同的问题。

相关的服务器代码（整个应用程序太大而无法粘贴所有内容，我正在使用很多其他人的代码）：

```
package Logic.XMLInterfaceForClient;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.net.Socket;
import java.util.HashSet;
import java.util.concurrent.LinkedBlockingQueue;

import Data.Config;
import Logic.Log;

public class ClientSession {

    /**
     * @author McMonster
     * 
     */
    public class MessageTransmitter extends Thread {

        private final Socket socket;
        private final ClientSession parent;

        private PrintStream out;

        /**
         * @param socket
         * @param parent
         */
        public MessageTransmitter(Socket socket, ClientSession parent) {
            this.socket = socket;
            this.parent = parent;
        }

        /*
         * (non-Javadoc)
         * 
         * @see java.lang.Runnable#run()
         */
        @Override
        public void run() {
            try {
                out = new PrintStream(socket.getOutputStream(), true);

                while (!socket.isClosed()) {
                    try {
                        String msg = parent.transmit.take();
                        // System.out.println(msg);
                        out.println(msg);
                        out.flush();
                    }
                    catch(InterruptedException e) {
                        // INFO: purposefully left empty to suppress spurious
                        // wakeups
                    }
                }

            }
            catch(IOException e) {
                parent.fail(e);
            }

        }

    }

    /**
     * @author McMonster
     * 
     */
    public class MessageReceiver extends Thread {

        private final Socket socket;
        private final ClientSession parent;

        private BufferedReader in;

        /**
         * @param socket
         * @param parent
         */
        public MessageReceiver(Socket socket, ClientSession parent) {
            this.socket = socket;
            this.parent = parent;
        }

        /*
         * (non-Javadoc)
         * 
         * @see java.lang.Runnable#run()
         */
        @Override
        public void run() {
            try {
                in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

                while (!socket.isClosed()) {
                    String message = "";
                    String line;

                    while ((line = in.readLine()) != null) {
                        message = message + line + "\n";
                    }

                    if(message != "") {
                        parent.receive.offer(message.toString());
                    }
                }
            }
            catch(IOException e) {
                parent.fail(e);
            }

        }
    }

    public final LinkedBlockingQueue<String> transmit = new LinkedBlockingQueue<>();
    public final LinkedBlockingQueue<String> receive = new LinkedBlockingQueue<>();

    private final XMLQueryHandler xqh;
    private final Socket socket;

    private String user = null;
    private HashSet<String> privileges = null;

    /**
     * @param socket
     * @param config
     * @throws IOException
     * @throws IllegalArgumentException
     */
    public ClientSession(Socket socket, Config config)
            throws IOException,
            IllegalArgumentException {
        // to avoid client session without the client
        if(socket == null) throw new IllegalArgumentException("Socket can't be null.");

        this.socket = socket;

        // we do not need to keep track of the two following threads since I/O
        // operations are currently blocking, closing the sockets will cause
        // them to shut down
        new MessageReceiver(socket, this).start();
        new MessageTransmitter(socket, this).start();

        xqh = new XMLQueryHandler(config, this);
        xqh.start();
    }

    public void triggerTopologyRefresh() {
        xqh.setRefresh(true);
    }

    public void closeSession() {
        try {
            xqh.setFinished(true);
            socket.close();
        }
        catch(IOException e) {
            e.printStackTrace();
            Log.write(e.getMessage());
        }
    }

    /**
     * Used for reporting failures in any of the session processing threads.
     * Handles logging of what happened and shuts down all session threads.
     * 
     * @param t
     *            cause of the failure
     */
    synchronized void fail(Throwable t) {
        t.printStackTrace();
        Log.write(t.getMessage());
        closeSession();
    }

    synchronized boolean userLogin(String login, HashSet<String> privileges) {
        boolean success = false;

        if(!privileges.isEmpty()) {
            user = login;
            this.privileges = privileges;
            success = true;
        }

        return success;
    }

    public synchronized boolean isLoggedIn() {
        return user != null;
    }

    /**
     * @return the privileges
     */
    public HashSet<String> getPrivileges() {
        return privileges;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-29T08:28:05.650

它根本与*发送*无关。更准确地说，如果您正在*阅读*直到流结束，那么在对等方通过关闭套接字结束流之前，您不会得到流的结束。

这是一个重言式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:29:54.473

我可以理解为什么在套接字关闭之前服务器没有收到任何消息——这似乎是设计的。in.readLine() 只会在到达流的末尾时返回 null，对于 TCP 套接字流，这意味着当套接字关闭时。如果您希望您的 readLine() 循环在此之前返回，则循环中的代码必须使用您在 TCP 之上使用的任何协议来检测消息的结尾以定义消息。

# javascript - 如何在数组中的所有布尔值之间应用 OR？

> ID：10472490
> 
> 赞同：1
> 
> 时间：2012-05-06T17:09:27.053
> 
> 标签：javascript

我有

`x = [false, false, true, true, false]`

如果数组`true`中至少有一个，我想要一个返回的函数，如下所示：http: [//jsfiddle.net/7uVWk/](http://jsfiddle.net/7uVWk/)`true`

```
x = [false, false, true, true, false];

function hasTrue(x) {
  result = false;
  ​for (var i=0; i <​x.length; i++) {
    result = result || x[i];
  }
}  
document.write(hasTrue(result)); 
```

我怎样才能更简洁地实现这个结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T17:15:12.453

使用[`Array.prototype.some`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some)（我没有编写单独的函数，因为这种语法确实很有意义）：

```
var x = [false, false, true, true, false];
x.some(function(val) {
    return val === true;
}); // true or false. In this case, true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T17:12:07.177

好吧，当你发现你的第一个 true 时，你可以退出循环：

```
x = [false, false, true, true, false];

function hasTrue(x) {
  ​for (var i=0; i <​x.length; i++) {
    if(x[i]) return true;
  }
  return false;
}  
document.write(hasTrue(result)); 
```

够简洁了吧？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T17:13:48.453

对数组中的所有元素进行逻辑或运算等同于其中一个为真。以下功能会更有效：

```
function arrayHasTrue(x_)
{
    for(var i = 0; i < x_.length; ++i)
    {
        if(x_[ i ])
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T17:59:12.723

你可以使用递归：

```
function hasTrue(x) {
  return x.length == 1 ? x[0] : x[0] || hasTrue(x.slice(1));
} 
```

# mysql - 多查询mysql的问题

> ID：10472497
> 
> 赞同：-1
> 
> 时间：2012-05-06T17:10:02.960
> 
> 标签：mysql

我有两张桌子——一张叫做“朋友”，另一张叫做“活动”。

该表`friends`有列`id`、`user_id`和`friend_id`

该表`events`有列`id`、`user_id`和 `title_event`

我在“事件”中注册了六个事件：我的第二个、第二个和另一个朋友的朋友 2。

什么查询会返回我在“朋友”表中的朋友以及我的事件和我朋友的事件？

我正在使用下面的查询，它只返回我朋友的事件。如何更改它以返回我的活动和我的朋友呢？

询问：

```
SELECT *
 FROM (
       SELECT a.user_id, a.friend_id
         FROM tb_friend a
       WHERE a.user_id = 1
       ) friends, 
tb_events e
WHERE e.user_id = friends.friend_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:41:50.500

这是你要找的吗？

```
SELECT *
FROM (
    SELECT a.user_id, a.friend_id
    FROM tb_friend a
    WHERE a.user_id = 1
    ) friends, 
tb_events e
WHERE e.user_id = friends.friend_id OR e.user_id = 1; 
```

我在这里所做的唯一更改是添加`OR e.user_id = 1`应该让 MySQL 在结果集中包含您自己的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T01:41:43.697

您遇到的问题是原始“User_ID = 1”没有条目，只有朋友... Daan 提供的示例使用了 WHERE 子句，显然仍然不适合您。我建议您的内部查询是一个 UNION，将您和您的朋友作为一个结果包含在内...这样，您就有了一个合格的列表...如果这仍然不起作用，通过显示一些没有实际名称的示例数据（因为无论如何，您所有的样本基本上都是 ID，没有什么特别的隐藏），它可以帮助其他人更好地提供解决方案。如果您不能灵活地提供此类样本数据，那么您从这个和未来得到的响应可能非常有限......

```
SELECT *
   FROM 
      ( select 1 as User_ID
        UNION
        SELECT a.friend_id AS User_ID
           FROM tb_friend a
           WHERE a.user_id = 1
       ) QualifiedPeople
      join tb_events e
         on QualifiedPeople.User_ID = e.User_ID 
```

现在，如果您只想要不同的事件，请不要使用通配符来显示所有人，因为参加同一事件的多人实际上会显示每个人的事件，并且可以显示您的 8 对 6 记录......再次，没有看到样本数据，没有人能如实回答。

```
SELECT distinct e.id, e.title_event
   FROM ... same rest of query from above 
```

# ios - 我想将数据库表放在同一个数据库中。如何？

> ID：10472506
> 
> 赞同：0
> 
> 时间：2012-05-06T17:10:55.257
> 
> 标签：ios, database, join, sqlite

我的 iOS 程序在服务器中下载 [A.sqlite3] 文件。

我的 iOS 在本地已经有 [b.sqlite3] 文件

我想在本地 iOS 中加入 A.sqlite3 的表和 b.sqlite3 的表。

但是，由于表的数据库不同，我在加入表时遇到了问题。

如何将表放在同一个数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:20:48.047

您可以使用 sqlite **ATTACH**语法。假设您在数据库 A.sqlite3 中有一个表 A，在数据库 B.sqlite3 中有一个表 B，从命令行，步骤将是：

```
$ sqlite3 A.sqlite3
sqlite> ATTACH 'B.sqlite3' AS dbB;
sqlite> SELECT a.*,dbB.b.* FROM a,dbB.b WHERE (a.id = dbB.b.id); 
```

**ATTACH**为附加数据库文件提供了一个前缀，您可以在 sql 语句中使用该前缀。

在 iPhone 应用程序上，像以前一样打开 A.sqlite3 数据库，然后像传递其他 sql 命令一样将 sql ATTACH 命令传递给 sqlite 库，并记住将完整路径名作为 ATTACH 的第一个参数。

# java - 序列化 Path2D.Double 的子类时“没有有效的构造函数”

> ID：10472508
> 
> 赞同：0
> 
> 时间：2012-05-06T17:10:56.787
> 
> 标签：java, serialization, subclass, deserialization

我正在尝试序列化 Path2D.Double 的子类，序列化有效，但反序列化不是因为以下异常：

```
Exception in thread "main" java.io.InvalidClassException: CustomShape; no valid constructor
at java.io.ObjectStreamClass$ExceptionInfo.newInvalidClassException(ObjectStreamClass.java:147)
at java.io.ObjectStreamClass.checkDeserialize(ObjectStreamClass.java:755)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1751)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at CustomShape.main(CustomShape.java:38) 
```

这可能是因为超类 Path2D 没有实现 Serializable 吗？但是，Path2D.Double 本身也无法反序列化。

这是我的代码：

```
import java.awt.geom.Path2D;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

public class CustomShape extends Path2D.Double {
    private static final long serialVersionUID = 1L;

    public CustomShape() {
        super();
    }

    public static void main(String[] args) throws Exception {
        //Make Shape
        //Path2D shape = new Path2D.Double(); //works
        Path2D shape = new CustomShape(); //doesn't work 
        shape.moveTo(0, 0);
        shape.lineTo(0, 10);
        shape.lineTo(10, 10);
        shape.lineTo(10, 0);
        shape.closePath();

        File file = new File(System.getProperty("user.dir"), "shape");
        //Save Shape
        if (!file.exists()) {
            file.createNewFile();
        }
        ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(file));
        out.writeObject(shape);
        out.flush();
        out.close();

        //Load Shape
        ObjectInputStream in = new ObjectInputStream(new FileInputStream(file));
        Object obj = in.readObject();
        in.close();

        System.out.println(obj);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:11:40.453

我上周遇到了同样的问题，今天终于找到了答案。Path2D 对象将其构造函数声明为包私有。由于 java 序列化要求第一个不可序列化的父类有一个无参数的构造函数，并且它不可访问，因此任何不在 Path2D 自己的包中的 Path2D 扩展都不会反序列化。老实说，我认为这是 Java 方面的一个问题，因为所有其他使用 Float/Double 子类的 AWT 抽象形状都将它们的默认构造函数声明为受保护。

如果你很好奇，我通过追踪找到了根本原因`java.io.ObjectStreamClass.getSerializableConstructor(Class<?>)`。你会发现当它找到一个不可访问的构造函数时它会返回 null。

# json - 查找 CRM 2011 systemuserid 时 JSON“未定义”

> ID：10472510
> 
> 赞同：0
> 
> 时间：2012-05-06T17:11:27.307
> 
> 标签：json, dynamics-crm-2011

代码（在 JSON 下方）评估以下 JSON 数据并返回“未定义”，即使很明显 systemuserid 可用。提前感谢您的帮助。

```
 {
    "d" : {
    "results": [
    {
    "__metadata": {
    "uri": "http://dynamics/DynamicsCRM/xrmservices/2011/OrganizationData.svc/new_new_license_sys        temuserSet(guid'561d5751-0496-e111-84f8-0050561a2a63')", "type": "Microsoft.Crm.Sdk.Data.Services.new_new_license_systemuser"
    }, "new_new_license_systemuserId": "561d5751-0496-e111-84f8-0050561a2a63", "new_licenseid": "538e6567-8c95-e111-84f8-0050561a2a63", "systemuserid": "40dda08e-2ee5-e011-b843-0050561a2a63", "VersionNumber": null
    }
    ]
    }
    }

    $.ajax(
    {        type: "GET",
            contentType: "application/json; charset=utf-8",
            datatype: "json",
            url: odataSelect,
            beforeSend: function (XMLHttpRequest) 
                { XMLHttpRequest.setRequestHeader("Accept", "application/json"); },
            success: function (data, textStatus, XmlHttpRequest)
                    {            
                   ProcessReturnedEntity(data.d);
                    },
           error: function (XmlHttpRequest, textStatus, errorThrown)
                    { alert('OData Select Failed: ' + odataSelect); 
                    }
    });

    ProcessReturnedEntity = function(OneEntity)
    {
    var one = OneEntity;
    var Userid = one.systemuserid;
    alert(Userid);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:28:35.403

您是否使用[Internet Explorer F12 开发人员工具](http://msdn.microsoft.com/en-us/library/dd565625%28v=vs.85%29.aspx)进入该行并检查所涉及的变量？您提到“即使很明显 systemuserid 可用”，如果它未定义，则它在该对象上不可用，或者该对象本身可能出于某种原因为 null。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:05:31.953

从`json`发布的结果我相信你应该尝试访问`systemuserid`这样的：

```
 var Userid = one.results[0].systemuserid; 
```

# java - 缓慢的 Arduino 串行传输

> ID：10472514
> 
> 赞同：5
> 
> 时间：2012-05-06T17:12:06.037
> 
> 标签：java, serial-port, arduino, jssc

我正在测试我的 Arduino UNO 的串行传输速度。根据我的要求，我必须将 3KB/s 从主机 PC 传输到 Arduino。我编写了一个非常简单的程序，它回复结果，`Serial.available()`然后在 Arduino IDE 的串行监视器中对其进行测试。我已经开始发送字符，直到达到最大值，即 63 个字节。我对此感到非常惊讶，因为我在某处读到 Arduino 有一个 128 字节的串行缓冲区。

无论如何，我已经制定了一个非常简单的协议，它以 48 字节数据包（实际上是 49 字节，因为标题字符）传输数据。主机发送一个`d`字符，然后发送 48 个字节的数据。为了测试传输的有效性，我发送了一个从 0 到 47 的简单字节序列，该序列在 Arduino 端得到验证。如果验证失败，UNO 将开始闪烁 PIN13 上的板载 LED。一旦发送了字节，主机就会等待一个简单`k`字符的确认。一旦完成处理实际数据包，Arduino 就会发送此信息。

主机程序测量传输的数据包数量并在 1 秒后显示。波特率为 9600，PC 成功传输约 16 个数据包/秒（约 800 字节/秒），这还不错。我试图通过将双方的波特率提高到 57600 来改善这一点；但是，发送的数据包数量只增加了一点。我不知道问题是什么。也许我已经达到了 USB 串行转换器的某种限制？

* * *

这是我的代码。

**PC**（Java，我使用[jSSC](http://code.google.com/p/java-simple-serial-connector/)进行串口通信）

```
 package hu.inagy.tapduino.server;

  import jssc.SerialPort;
  import jssc.SerialPortException;

  /**
   * Test Arduino communication.
   */
  public class App
  {

    private static void testComm(SerialPort port) throws SerialPortException {
      long runningSeconds = 0;
      long time = System.currentTimeMillis();
      long numberOfPackets = 0;
      boolean packetSent = false;
      while (runningSeconds < 10) {
        long currentTime = System.currentTimeMillis();
        if (currentTime - time > 1000) {
          runningSeconds++;
          time = currentTime;
          System.out.println(numberOfPackets + " packets/s");
          numberOfPackets = 0;
        }

        if (!packetSent) {
          packetSent = true;
          port.writeByte((byte) 'd');
          for (int i = 0; i < 48; i++) {
            port.writeByte((byte) i);
          }
        } else {
          byte[] received = port.readBytes();
          if (received != null) {
            if (received.length > 1) {
              throw new IllegalStateException("One byte expected, instead got: " + received.length);
            }

            char cmd = (char) received[0];
            if ('k' != cmd) {
              throw new IllegalStateException("Expected response 'k', instead got: " + cmd);
            }
            packetSent = false;
            numberOfPackets++;
          }
        }

      }
    }

    public static void main(String[] args)
    {
      SerialPort port = new SerialPort("COM7");

      try {
        if (!port.openPort()) {
          throw new IllegalStateException("Failed to open port.");
        }
        port.setParams(57600, 8, 1, 0);
      } catch (SerialPortException e) {
        throw new IllegalStateException("Exception while setting up port.", e);
      }

      try {
        // Wait 1.5sec for Arduino to boot successfully.
        Thread.sleep(1500);
      } catch (InterruptedException e) {
        throw new IllegalStateException("Interrupt while waiting?", e);
      }

      try {
        testComm(port);
      } catch (SerialPortException exc) {
        throw new IllegalStateException("Failure while testing communication.", exc);
      } finally {
        try {
          if (!port.closePort()) {
            throw new IllegalStateException("Failed to close port.");
          }
        } catch (SerialPortException e) {
          throw new IllegalStateException("Exception while closing port.", e);
        }
      }
    }
  } 
```

**阿杜诺**

```
void setup() {
   pinMode(13, OUTPUT);
   Serial.begin(57600);
}

boolean error = false;

void loop() {
  if (error) {
      digitalWrite(13, HIGH);
      delay(1000);
      digitalWrite(13, LOW);
      delay(1000);
  } else {
    while (Serial.available()<49);
    char cmd = Serial.read();
    if ('d'!=cmd) {
       error=true;
       return;
    }

    for (int i=0; i<48; i++) {
       int r = Serial.read();
       if (r!=i) {
         error=true;
         return;
       } 
    }

    Serial.write('k');
  }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:09:44.457

NagyI，jSSC 方法 writeByte(byte b) 与 writeBytes(new byte[]{b}) 相同。例如：

```
serialPort.writeByte((byte)0xFF);
serialPort.writeBytes(new byte[]{(byte)0xFF}); 
```

这些字符串是等价的。writeByte() 方法为您要发送的每个字节创建一个新的字节数组。在 Java 中创建对象是一项昂贵的操作，这就是为什么如果您需要高速数据传输，请使用准备好的字节数组，如您的答案。问候，阿列克谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T19:12:54.067

我找到了解决方案。jSSC 的 writeByte 函数在这种情况下效率非常低。如果我在 Java 中预先制作了 49 字节的缓冲区，然后立即将其传递给 jSSC，我将获得非常大的速度提升。

```
 byte[] sendBuffer = new byte[49];
    sendBuffer[0] = 'd';

    for (byte i = 0; i < 48; i++) {
      sendBuffer[i + 1] = i;
    }
    port.writeBytes(sendBuffer); 
```

在 Arduino 论坛上，一位成员向我建议波特率 345600，它现在给了我 ~240 个数据包/秒（~12KB/秒）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-06T03:55:33.950

您是否尝试过将此行添加到您的 Arduino setup() 函数中？：

```
// this will make the Arduino wait a max of only 100ms per incoming 
// set of serial data, before moving on
Serial.setTimeout(100); 
```

在这里阅读：http: [//arduino.cc/en/Serial/SetTimeout](http://arduino.cc/en/Serial/SetTimeout)

默认情况下，Arduino 有 1 秒超时，如果您只是使用 Serial.read() 来读取新数据，则必须经过该超时。请参阅我的回复以获取更多信息和**更简洁的处理方式（而不是仅仅减少超时，我们可以搜索终止字符并完全停止需要超时）**：[Matlab serial interface with Arduino is very slow](https://stackoverflow.com/questions/26579577/matlab-serial-interface-with-arduino-is-very-slow/28888853#28888853)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T19:28:09.040

最近，我使用本教程通过电缆将 Arduino UNO 设备连接到 PC：[Arduino 和 Java](http://arduino.cc/playground/Interfacing/Java)。

# c# - C# 中的 Stimulsoft 报告部分控件

> ID：10472518
> 
> 赞同：2
> 
> 时间：2012-05-06T17:12:47.660
> 
> 标签：c#, report, stimulsoft

我使用 Stimulsoft Report 在我的程序（C# 程序）中制作报告。

我想从 C# 代码更改（或控制）报告中的一个部分（例如页脚带）的可见性。

这是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:23:31.910

我认为您应该在报告中创建一个变量并从 C# 传递一个值。
然后在报告中，您可以使用变量来决定是否打印您的部分。
例如：

```
 bool printFooterValue = false;
            using(StiReport rpt = new StiReport())
            {
                rpt.Load("your_report_file.mrt);
                rpt.Dictionary.Databases.Clear();
                rpt.Dictionary.Databases.Add(new StiOleDbDatabase("your_database", "your_connection_string"));
                rpt.Compile();
                rpt.CompiledReport["printFooter"] = printFooterValue;
                if(preview == true)
                    rpt.Show(true);
                else
                    rpt.Print(false, 1);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T08:14:14.523

您可以通过 GetComponents 获取 Footer，然后在代码中启用或禁用它。

例如

```
var myFooter = rpt.GetComponents()["FooterName"];
myFooter.Enabled = false; 
```

# objective-c - 来自javascript文件的目标c方法调用

> ID：10472523
> 
> 赞同：2
> 
> 时间：2012-05-06T17:13:57.820
> 
> 标签：objective-c, ios

我想知道如何从 javascript 调用一个客观的 c 方法。例如，我在 myFile.js 中定义了一个 javascript 函数，如下所示：

```
function() {
alert('test');
....          // How i can an objective c function here ???
} 
```

我还有一个 UIWebView ：

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
....
// what to do here ?????? 
} 
```

感谢您的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:21:29.843

只需将位置设置为您识别的位置并检查 request.URL 是否匹配。

```
function nav(f){
 location.href = "methodCall";
}

-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if([request.URL.relativeString isEqualToString:@"methodCall"]){
        //call method here
        return false; //so it doesn't navigate anywhere
    }
    return true; //if you want every other link to work normally.
} 
```

注意：我没有对此进行测试，但我想它会起作用，尽管 request.URL.relativeString 返回的 URL 可能有点不同，所以只需在此处设置一个断点并查看它是什么。

# facebook-graph-api - 照片未显示在 Facebook 的动态消息中

> ID：10472525
> 
> 赞同：2
> 
> 时间：2012-05-06T17:14:06.813
> 
> 标签：facebook-graph-api, photos, feed, facebook-timeline, facebook-ios-sdk

通过 Graph API“我/照片”上传的照片未显示在 Facebook 的新闻提要中。但照片已成功添加到相册中，并且仅显示在时间轴中。我确信它几个月前有效，但今天我发现它现在不起作用。不幸的是，我在 Facebook 开发者网站和任何有关 News Feed 的更改日志中没有找到任何线索。我是否必须调用另一个 Graph API 才能列出上传的照片？

```
NSArray *permissions =  [[NSArray arrayWithObjects:@"publish_stream", nil] retain];    
[facebook authorize:permissions delegate:self];
...
...
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               image, @"picture",
                               commentView.text, @"message",
                               nil];

[facebook requestWithGraphPath:@"me/photos"
                     andParams:params
                 andHttpMethod:@"POST"
                   andDelegate:self]; 
```

# dynamic - Deflate 上的动态霍夫曼编码 - RFC 1951

> ID：10472526
> 
> 赞同：2
> 
> 时间：2012-05-06T17:14:07.083
> 
> 标签：dynamic, encoding, compression, deflate, huffman-code

我正在开发一个文件压缩程序。我们目前正在实施 .ZIP 存档器标准，以便在生成压缩的 .ZIP 存档器时，任何其他有信誉的压缩器（例如 7zip）都可以完美地理解/解压缩它。

我们现在正在开发基于[RFC 1951](https://www.rfc-editor.org/rfc/rfc1951)
的 DEFLATE 算法 我们有 LZ77 的变体和带有固定代码的 Huffman 编码，可以完美地工作并与 RFC 兼容，因此可以使用 Literal-Length + Distance 值。

在动态霍夫曼编码中，我目前能够从一些压缩数据（通过另一个可靠的压缩器压缩）中提取霍夫曼树，但是当开始解压缩真实数据时，我得到的值不正确。
可能我以错误的方式阅读树木。

我还没有特别找到有人准确解释这些树的值存储在压缩数据上的方式的任何地方。

我假设编码数据遵循相同的文字长度值 (0~285) + 距离 (0~30) 以及其对应的每个文字/距离的额外位，如 RFC 中所解释的那样，与固定霍夫曼编码的方式相同。

将其存储在固定霍夫曼编码上的方式是，**霍夫曼代码**与代码的*最高*有效位一起存储在内存中的*最低有效位上。*这样，您就可以逐位向下浏览编码树。
**霍夫曼码的额外位**以另一种方式存储。

动态霍夫曼编码是否以相同的方式存储它们？

有什么我遗漏的或我应该注意的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T17:50:23.477

首先，您不需要做您正在做的事情，因为它已经在[zlib](http://zlib.net/)中为您完成，这是一个允许商业使用的免费压缩库。zlib 根据 RFC 1951 提供了 deflate 压缩和 inflate 解压缩的实现。您还可以使用 minizip，它作为第三方贡献包含在 zlib 源代码包或[libzip](http://www.nih.at/libzip/)中，以使用 zlib 处理 zip 文件。

如果您打算自己做，那么您可以查看 puff.c，也在 zlib 发行版中，它是为了补充 RFC 1951 的目的而编写的放气解码器。

RFC 1951 实际上确实准确地解释了格式。你只需要仔细阅读它。puff.c 可能有助于加速学习过程。

非固定霍夫曼编码的正确术语是“动态”。不是“自适应”的。原因是术语“自适应霍夫曼”指的是其他东西——一种在放气格式中没有使用的特殊技术——当你在数据中移动时，霍夫曼树实际上会变形。deflate 使用的动态霍夫曼编码将数据分解为块，并为每个块发送完整的霍夫曼代码，该代码在整个块中是恒定的。

是的，动态霍夫曼码和额外位的存储顺序与固定霍夫曼码相同。棘手的部分是了解 Huffman 码是如何在每个块的 deflate 流标头中传输的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T14:49:13.227

我认为您可能对霍夫曼代码额外位的存储方式有误。RFC1951 关于额外位的表示如下：

> 额外的位应解释为以最高有效位在前存储的机器整数，例如，位 1110 表示值 14。

额外的位是霍夫曼代码的*一部分，*因此以相同的顺序读取；除其他外，这意味着将有许多长度和距离值范围进行编码，这些值具有连续的霍夫曼代码（即，如果长度/文字字母表的代码 269 以位串“1010”结束，那么长度为 19-22将分别具有代码 101000、101001、101010 和 101011。）

# android - 相对布局中的奇怪按钮行为

> ID：10472527
> 
> 赞同：0
> 
> 时间：2012-05-06T17:14:08.943
> 
> 标签：android, layout, button, android-relativelayout

我的应用程序中有一个自定义对话框，它来自`Activity`并使用`RelativeLayout`，所有定位和属性都由 XML 文件处理，而代码中没有。我的布局完全符合我的要求，但由于对话框中某些项目的长度，一些信息行会换行到下一行。这不是问题，除了对话框中的关闭按钮在这些情况下看起来像是有人坐在上面。

这是来自模拟器的屏幕截图，显示按钮很好，但我希望在描述文本的右侧有一些填充，因此它不会与对话框的右侧对接：

![好的按钮，但需要右边距](../Images/48b6f7e7ab392ce537ac1080a5143680.png)

看到这一点，我添加`android:layout_marginRight="5dp"`到布局文件中，希望得到我的边距，这似乎是 - 我得到了我的包装 - 但按钮不正确。对话框的高度在我期望的时候没有改变，因为描述现在换行了。

![包装很好，但按钮被压扁](../Images/828f044dcf8dad5d6679d2f59634da43.png)

这是我的完整布局 XML。这是我第一次使用`RelativeLayout`，所以希望这是我忽略的简单内容。

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
        <ImageView
                android:id="@+id/achievement_icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="7dp"
                android:contentDescription="@string/achievement_icon" />
        <TextView
                android:id="@+id/achievement_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:textColor="#ffffff"
                android:textStyle="bold"
                android:layout_toRightOf="@+id/achievement_icon" />
        <TextView
                android:id="@+id/achievement_gamerscore"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#ffffff"
                android:textStyle="bold"
                android:layout_marginLeft="5dp"
                android:layout_below="@+id/achievement_name"
                android:layout_toRightOf="@+id/achievement_icon" />
        <TextView
                android:id="@+id/achievement_description"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="7dp"
                android:layout_marginRight="5dp"
                android:layout_alignLeft="@+id/achievement_icon"
                android:layout_below="@+id/achievement_icon" />
        <TextView
                android:id="@+id/achievement_earned"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="7dp"
                android:layout_marginRight="5dp"
                android:layout_alignLeft="@+id/achievement_description"
                android:layout_below="@+id/achievement_description" />
        <Button
                android:id="@+id/cancel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="7dp"
                android:layout_centerHorizontal="true"
                android:text="@string/button_close"
                android:layout_below="@+id/achievement_earned" />
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:38:59.893

问题是您的按钮空间不足。

为按钮腾出空间：

1.）您可以移动按钮，也许是右上角并将其显示为 x。

2.）您可以限制描述 TextView 的大小，并通过在滚动视图中包围 TextView 将其设置为垂直滚动（更简洁的方法也不需要 ScrollView，但您明白我的意思。

3.) 使按钮的高度变小。

此外，我会警惕应用程序手机在具有不同屏幕分辨率/密度的手机上的外观。所以在设计UI时请注意这一点。

我的意思的例子是：

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scrollbars="vertical"
    android:fillViewport="true">

     <TextView
            android:id="@+id/achievement_description"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="7dp"
            android:layout_marginRight="5dp"
            android:layout_alignLeft="@+id/achievement_icon"
            android:layout_below="@+id/achievement_icon" />

</ScrollView> 
```

但是，您需要将“achievement_description”文本视图的高度限制为某个值，而不是包装内容。

# ruby-on-rails-3 - 使用 gem 回形针时使用 cap deploy 进行部署时出错

> ID：10472528
> 
> 赞同：0
> 
> 时间：2012-05-06T17:14:09.813
> 
> 标签：ruby-on-rails-3, paperclip, capistrano

我正在使用 gem [Paperclip](https://github.com/thoughtbot/paperclip)，现在我想使用 capistrano 将我的应用程序部署到服务器，但是运行时`cap deploy`我在最后收到以下消息：

```
 * executing "cd /home/administrator/myApp/releases/20120506165329 && bundle install --gemfile /home/administrat
or/myApp/releases/20120506165329/Gemfile --path /home/administrator/myApp/shared/bundle --deployment --qui
et --without development test"
    servers: ["myserver.com"]
    [myserver.com] executing command
 ** [out :: myserver.com] Gem::InstallError: paperclip requires Ruby version >= 1.9.2.
 ** [out :: myserver.com] An error occured while installing paperclip (3.0.3), and Bundler cannot continue.
 ** [out :: myserver.com] Make sure that `gem install paperclip -v '3.0.3'` succeeds before bundling.
    command finished in 66362ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/administrator/myApp/releases/20120506165329; true"
    servers: ["myserver.com"]
    [myserver.com] executing command
    command finished in 66ms
failed: "sh -c 'cd /home/administrator/myApp/releases/20120506165329 && bundle install --gemfile /home/administra
tor/myApp/releases/20120506165329/Gemfile --path /home/administrator/myApp/shared/bundle --deployment --qu
iet --without development test'" on myserver.com 
```

我检查了我的服务器中的 Ruby 版本，我得到了：

```
$ruby -v
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux] 
```

我还通过运行在服务器中手动安装了 gem

```
gem install paperclip -v '3.0.3'
...
Successfully installed paperclip-3.0.3 
```

并`cap deploy`再次运行，但出现了相同的消息

如何部署我的应用程序？

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:35:17.930

[按照此处](https://stackoverflow.com/questions/1978797/how-do-i-configure-capistrano-to-use-my-rvm-version-of-ruby)接受的答案中的建议，通过设置 capistrano 的默认环境来修复它

我现在可以使用 capistrano 进行部署（虽然我的系统 ruby​​ 仍在使用 ruby​​ 1.8.7，所以 gem 回形针没有正确安装，你可以[在这里](https://stackoverflow.com/questions/10474854/setting-servers-system-ruby-version)找到这个问题）

# machine-learning - 如何解析具有任意数量邻居的 CFG？

> ID：10472530
> 
> 赞同：2
> 
> 时间：2012-05-06T17:14:16.387
> 
> 标签：machine-learning, svm, context-free-grammar, image-segmentation

我正在开发一个项目，该项目试图使用上下文无关语法来解析图像。我们正在尝试构建图像片段树，然后使用机器学习使用这些视觉语法来解析图像。

我发现[SVM-CFG](http://www.cs.cornell.edu/people/tj/svm_light/svm_cfg.html)看起来很理想，问题是它是为字符串解析而设计的，字符串中的每个终端最多有两个邻居（之前和之后的单词）。在我们的视觉语法中，每个片段可以紧挨着任意数量的其他片段。

解析这些视觉语法的最佳方法是什么？具体来说，我可以对我的数据进行编码以使用 SVM-CFG 吗？还是我必须编写自己的内核/解析库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:46:21.347

SVM-CFG 是 SVM-struct 中使用的切割平面优化算法的具体实现（在此处描述[http://www.cs.cornell.edu/People/tj/publications/tsochantaridis_etal_04a.pdf](http://www.cs.cornell.edu/People/tj/publications/tsochantaridis_etal_04a.pdf)，第 4 节）。

在每一步，切割平面算法都会调用一个函数来找到得分最高的结构化输出分配（在 SVM-CFG 中，这是得分最高的解析）。

对于一维字符串，SVM-CFG 运行动态规划算法以在多项式时间内找到得分最高的解析。

您可以扩展 SVM-struct 以返回图像的最高得分解析，但不存在多项式时间算法来执行此操作！

这是解析图像的最先进技术的参考：http: [//www.socher.org/uploads/Main/SocherLinNgManning_ICML2011.pdf](http://www.socher.org/uploads/Main/SocherLinNgManning_ICML2011.pdf)。他们在寻找图像分割的最高得分解析时遇到了同样的问题，因此他们使用贪婪算法来寻找近似解决方案（参见第 4.2 节）。您也许可以将类似的贪心算法合并到 SVM 结构中。

# ruby-on-rails - Rails 教程 3.2 没有咆哮通知

> ID：10472532
> 
> 赞同：2
> 
> 时间：2012-05-06T17:14:52.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, autotest, growl

Michael Hartl 的精彩[Rails 教程](http://ruby.railstutorial.org/)现在可用于 Rails 3.2。他继续使用 rspec 和 spork 概述 TDD 和 BDD，就像他在 3.0 版中所做的那样，并在 3.2 中添加了保护。在 3.0 版中，Hartl 包含有关自动测试的信息，我能够让美妙的咆哮通知正常工作。然而，在 3.2 中，他不再包含自动测试或大量咆哮信息。Guard 与 spork 配合得很好，但没有通知。在过去的几个小时里，我自己冒险使用了 Hartl 的 3.0 和一些博客文章，但试图让自动测试工作仍然会产生“LoadError”和“无法运行测试”的咆哮通知。非常感谢任何想法。我在 OS X 10.7.3 上。这是我所做的：

```
$ gem install autotest -v 4.4.6
$ gem install autotest-rails-pure -v 4.1.2
$ gem install autotest-fsevent -v 0.2.8
$ gem install autotest-growl -v 0.2.16 
```

# 宝石文件

```
source 'https://rubygems.org'
gem 'rails', '3.2.3'
gem 'pg', '0.12.2'
group :development, :test do 
    gem 'rspec-rails', '2.9.0'
    gem 'guard-rspec', '0.5.5'
end

group :assets do
    gem 'sass-rails','3.2.4' 
    gem 'coffee-rails', '3.2.2'
    gem 'uglifier', '1.2.3' 
end
gem 'jquery-rails', '2.0.0'
group :test do
    gem 'capybara', '1.1.2'
    gem 'rb-fsevent', '0.4.3.1', :require => false
    gem 'growl', '1.0.3'
    gem 'guard-spork', '0.3.2'
    gem 'spork', '0.9.0'
end 
```

# ~/.autotest

```
require 'autotest/growl'
require 'autotest/fsevent'
Autotest::Growl::show_modified_files = true
Autotest::Growl::one_notification_per_run = true
Autotest::Growl::clear_terminal = false
Autotest::Growl::hide_label = true

Autotest.add_hook :initialize do |autotest|
  autotest.add_mapping(/^spec\/requests\/.*_spec\.rb$/) do
    autotest.files_matching(/^spec\/requests\/.*_spec\.rb$/)
  end  
end 
```

# $自动测试

```
loading autotest/rails

      --------------------------------------------------------------------------------

/Users/[me]/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -I.:lib:test -rubygems -e "%w[test/unit spec/requests/static_pages_spec.rb].each { |f| require f }"
/Users/[me]/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- spec_helper (LoadError)
    from        /Users/[me]/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from    /Users/[me]/programing/rails/rdale_house/spec/requests/static_pages_spec.rb:1:in `<top (required)>'
    from /Users/[me]/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/[me]/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from -e:1:in `block in <main>'
    from -e:1:in `each'
    from -e:1:in `<main>' 
```

# 规范/spec_helper.rb

```
require 'rubygems'
require 'spork'
#uncomment the following line to use spork with the debugger
#require 'spork/ext/ruby-debug'

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However,
  # if you change any configuration or code from libraries loaded here, you'll
  # need to restart spork for it take effect.

  # This file is copied to spec/ when you run 'rails generate rspec:install'
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    # ## Mock Framework
    #
    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
    #
    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr
    config.mock_with :rspec

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false
  end
end

Spork.each_run do
  # This code will be run each time you run your specs.

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T22:26:11.897

我最终也只是使用 Sublime Text 2 适应了 Hartl 的工作流程，但是，我确实想确保如果我愿意的话，我可以切换到带有 Growl 通知的 Guard（据我所知，不需要自动测试，因为我相信这是 Guard 的工作），所以这就是我在个人环境设置指南中的做法。希望能对你有所帮助。我在 OSX 10.6.8 上，所以你可能需要在 10.7.3 上做一些不同的事情：

为 RSpec 测试通知设置 Growl（对于 Mac）：
系统上可能已经安装了 Growl，但可能没有安装 Growlnotify。

1.  [从这里](http://growl.info/downloads)下载 Growl-1.2.2.dmg 文件
2.  打开 dmg 文件并转到 Extras > growlnotify > growlnotify.pkg
3.  按照向导安装 growlnotify

配置应用程序进行测试（RSpec、Cucumber with Spork 和 Guard）：

```
$ rails generate rspec:install
$ rails generate cucumber:install 
```

配置 Spork（用于 RSpec 和 Cucumber）

```
$ spork --bootstrap
$ spork cucumber --bootstrap 
```

添加环境加载

```
$ subl spec/spec_helper.rb 
```

将 Instructions 下的全部内容移动到`Spork.prefork`块中以仅启用一次环境加载，并添加：

```
config.mock_with :rspec 
```

配置防护：

```
$ guard init rspec
$ guard init spork 
```

编辑生成的默认文件，以便 Guard 在失败的测试通过后不会运行所有测试；`drb`标志是让 Spork 在分布式 Ruby 中运行。

```
$ subl Guardfile
guard 'rspec', :version => 2, :all_after_pass => false, :cli => '--drb'  do 
```

配置在分布式 Ruby 中运行测试套件

```
$ subl .rspec
--drb 
```

用 Spork 开始 Guard

```
$ guard 
```

...并且您应该收到 Growl 通知。

我在**Gemfile**中的相关 gem 和你的几乎一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:17:49.887

该错误表明您缺少 spec_helper 文件。你能试着跑步`rails generate rspec:install`然后再试一次吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T19:24:22.263

我遇到了同样的问题，然后去 Guard 的 GitHub 页面查看他们的文档。相关部分在这里：[https ://github.com/guard/guard#growl](https://github.com/guard/guard#growl)

似乎简单的解决方案是将咆哮宝石包含在开发组中，而您只将它包含在测试组中。我做了以下工作来让它工作：

如另一个答案中所述，安装了 Growl Notify：

> 为 RSpec 测试通知设置 Growl（对于 Mac）：系统上可能已经安装了 Growl，但可能没有安装 Growlnotify。
> 
> 1.  [从这里](http://growl.info/downloads)下载 Growl-1.2.2.dmg 文件
> 2.  打开 dmg 文件并转到 Extras > growlnotify > growlnotify.pkg
> 3.  按照向导安装 growlnotify

更新了我的 Gemfile（仅相关部分，其余部分与 Rails 教程匹配）：

```
group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', '1.2.1'
  gem 'guard-spork', '1.2.0'
  gem 'childprocess', '0.3.6'
  gem 'spork', '0.9.2'
  gem 'growl', '1.0.3'
end 
```

在终端运行：

`bundle install`

打开一个新的终端窗口并运行：

`guard`

咆哮开始工作！

# php - 页面“模板”布局。HTML header.php 与 page.php

> ID：10472535
> 
> 赞同：0
> 
> 时间：2012-05-06T17:15:06.287
> 
> 标签：php, html

我之前问过一个类似的问题，但我对这种创建页面的“风格”有一个更具体的问题。
我有 3 页的模板，header.php、page.php 和 footer.php。我试图让自己在单个页面中轻松编辑网站的某些部分，但也能够在每页的基础上添加额外的内容。我目前的结构是：
header.php

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Website Name<? if ($title) echo ' &ndash; ' . $title; ?></title>
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="reset.css">
<link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

页面.php

```
<?
$title = 'Page Title';
require_once('includes/header.php');
?>
<!-- Any extra stuff for the header goes here -->
</head>
<body>
Page content goes here.
<? require_once('includes/footer.php'); ?> 
```

页脚.php

```
<footer>
I am a footer
</footer>
</body>
</html> 
```

虽然这可行，但我无法轻松地制作可公开编辑的标题（菜单等），因为我的 header.php 页面不包含`<body>`. 但是，关闭`<head>`header.php 将不允许我在每页的基础上添加额外的文件（例如特定于页面的 javascript）。据我所知，标签中包含 CSS 和 javascript`<body>`并不是一个好主意。
我猜想在每个页面的顶部，在`<head>`标签之后，还需要一个文件（比如 menu.php）吗？但是，这似乎并不容易阅读/自然，我觉得必须有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:22:12.923

一个简单的解决方案是在“header.php”中添加一行来回显 $extraHeaders 的内容：

```
<!DOCTYPE html>
<html>
<head>
<?php echo $extraHeaders ?>
... 
```

然后，您想要添加特定标题的任何页面（样式表、javascript 文件等），只需将其包含在 $extraHeaders 变量中：

```
$extraHeaders = '<script type="text/javascript" src="myscripts.js"></script>' 
```

它将自动包含在该页面的标题中。

* * *

为了解决语法高亮和避免必须转义引号的问题，您可以使用输出缓冲区语法：

```
ob_start();
?>
<your html goes here> Alternatively, you can include an html file here.
<?php
$extraHeaders = ob_get_contents();
ob_end_clean(); 
... 
```

如前所述，这将允许您使用变量，但具有语法突出显示，并且无需转义任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:17:36.620

您可以在加载“页面”结束时使用+ 正则表达式 (或之`ob_start`类的标签来访问。`{title}``{scripts}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:25:34.720

制作一个`_autoload()`脚本来预加载所有这些 php 文件。

这样，当有任何新内容要放置时，您总是可以转到包含该`_autoload()`函数的脚本并在那里更新它。

顺便说一句，将 javascript 放在`<body>`标签的最后实际上是一个好习惯。

# json - ServiceStack PUT 验证

> ID：10472536
> 
> 赞同：0
> 
> 时间：2012-05-06T17:15:09.983
> 
> 标签：json, rest, put, servicestack

我正在尝试使用 ServiceStack 进行 PUT 操作的验证，

这是我的客户代码

```
 var client = new JsonServiceClient();
    return client.Put<string>(url, content); 
```

我已经连接了验证并在服务器上工作，因为我可以看到断点命中和验证失败，但我在客户端上得到的只是

```
HTTP/1.1 400 NotEmpty
Cache-Control: private
Content-Type: application/json; charset=utf-8
Server: Microsoft-IIS/7.5
Date: Sun, 06 May 2012 17:08:44 GMT
Content-Length: 0 
```

当我成功 PUT 时也会发生同样的情况，我只是得到了纯字符串，这让我相信 ServiceStack 不想在 PUT 上返回 json。

# c# - 通过listview控件删除数据表中的数据行

> ID：10472544
> 
> 赞同：0
> 
> 时间：2012-05-06T17:16:45.207
> 
> 标签：c#, asp.net, listview, datatable, datarow

我在使用列表视图中的按钮从数据表中删除数据行时遇到问题。我正在尝试使用选中的按钮来删除该行。

```
protected void ShoppingCart_SelectedIndexChanged(object sender, EventArgs e)
{

     String title = ((Label)(ShoppingCart.Items[ShoppingCart.SelectedIndex].FindControl("Title"))).Text;
    DataTable shoppingcart = (DataTable)HttpContext.Current.Session["Cart"];
    DataRow[] rows = shoppingcart.Select("Title ='" + title + "'");

    for (int i = rows.Length - 1; i >= 0; i--)
    {
        shoppingcart.Rows.Remove(rows[i]);
    }

    shoppingcart.AcceptChanges();
    ShoppingCart.DataSource = shoppingcart;
    ShoppingCart.DataBind();
} 
```

购物车的列表视图::

```
 <asp:ListView ID="ShoppingCart" runat="server" onselectedindexchanged="ShoppingCart_SelectedIndexChanged" 
        >

<ItemTemplate>
<table>
<tr>
<td>
<asp:Label ID="idlabel1" runat="server" Text='<%#Eval("id") %>' />
</td>
<td>
<asp:Label ID="titlelabel" runat="server" Text='<%# Eval("Title")%>'></asp:Label>
</td>
<td>
<asp:Label ID="pricelabel" runat="server" Text='<%#Eval("Price") %>'></asp:Label>
</td>
<td>
    <asp:TextBox ID="quantitytb" runat="server" Width="50px" Text='<%#Eval("quantity") %>'></asp:TextBox>
</td>
<td>
    <asp:Label ID="subtotallabel" runat="server" Text='<%#getsubtotal(decimal.Parse(Eval("Price").ToString()), int.Parse(Eval("quantity").ToString())) %>'></asp:Label>
</td>
<td>
    <asp:Button ID="Button1" runat="server" Text="-" Font-Names="Web Symbols" CommandName="Select"/>
</td>
</tr>
</table>
</ItemTemplate>

</asp:ListView> 
```

班上：：

```
public DataTable shoppingCart()
{
    CartTable = new DataTable("cart");

    CartTable.Columns.Add("ID", typeof(Int32));
    CartTable.Columns["ID"].AutoIncrement = true;
    CartTable.Columns["ID"].AutoIncrementSeed = 1;

    CartTable.Columns.Add("Title",typeof(String));
    CartTable.Columns.Add("Price");
    CartTable.Columns.Add("quantity");
    CartTable.Columns["quantity"].DataType = typeof(Int32);

    tableRow = CartTable.NewRow();
    tableRow["Title"] = title;
    tableRow["Price"] = price;
    tableRow["quantity"] = quantity;
    CartTable.Rows.Add(tableRow);
    return CartTable;
} 
```

我尝试删除它，但它不起作用。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:31:09.250

如果要从列表视图中删除该行，则只需从列表视图中删除该项目，而不是找到数据表，然后删除并再次绑定它。

```
if (ListView1.SelectedItems.Count > 0)
      ListView1.SelectedItems[0].Remove(); 
```

正如我从您的代码中可以理解的那样，您将 DataTable 保持在会话中并在那里阅读表单并与 for 循环匹配

为什么不从列表视图中获取一个键值，然后使用 datatable.select("xxxxx == yyyyy") 找到该行，然后删除该行。

# php - JQuery Ajax 失败/取消

> ID：10472546
> 
> 赞同：1
> 
> 时间：2012-05-06T17:16:52.623
> 
> 标签：php, javascript, jquery, ajax

我一直在本地环境中创建我的网站，我没有遇到任何问题。我刚刚将文件上传到我的免费主机。当我访问该网站时，我查看了 Google Chrome 控制台并不断收到此错误：

> XMLHttpRequest 无法加载 [http://www.legobear154productions.byethost33.com/Javascript/main.json](http://www.legobear154productions.byethost33.com/Javascript/main.json)。Access-Control-Allow-Origin 不允许来源[http://legobear154productions.byethost33.com 。](http://legobear154productions.byethost33.com)

我正在使用 JQuery 执行 JavaScript Ajax 请求。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:19:18.447

就 HTTP 协议而言`http://www.legobear154productions.byethost33.com`，`http://legobear154productions.byethost33.com`是完全不同的领域。出于安全原因，Javascript 被禁止运行远程（不同域）脚本。

您必须将脚本移动到同一域才能使其正常工作。

**编辑**

还有其他方法，请参阅此处从最高投票答案链接的页面：[关于跨域（子域）ajax请求的问题](https://stackoverflow.com/questions/648899/a-question-about-cross-domain-subdomain-ajax-request)

# c# - 对 WPF 应用程序进行压力测试以发现线程问题

> ID：10472547
> 
> 赞同：1
> 
> 时间：2012-05-06T17:17:09.280
> 
> 标签：c#, wpf, task-parallel-library, stress-testing

如何对使用 TPL 的 WPF 应用程序进行压力测试？有没有可用的自动化工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:59:03.423

对于编写压力测试，您可以使用[White](http://white.codeplex.com/)编写您的自动化 ui 测试，然后运行它们，但不确定是否有任何工具会自动对您的应用程序进行压力测试。

更好的思考方式是对我猜的 API 函数/服务端点进行压力测试，并使用 osherove 线程测试器之类的东西轻松启动线程

为了监控压力测试的表现，我认为你应该看看这个

[http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)

我认为它可以免费下载和试用 30 天，它可以满足您的要求，您可以看到在哪个线程上发生了什么，每个任务和子任务花费了多长时间，它也很好地呈现了这一点.

我认为 jetbrains 有一个等价物，它的功能几乎是等价的。

如果您无法在使用 redgate 的 30 天试用版中解决您的问题，那么只需下载 jetbrains 一个并使用 30 天。

祝你好运

# javascript - 如何制作像 Google 新闻这样的简单 javascript 自动滚动小部件？

> ID：10472550
> 
> 赞同：1
> 
> 时间：2012-05-06T17:17:24.013
> 
> 标签：javascript, jquery

我想做一个像这样的真正简单的小部件：

[https://news.google.com/news/rtc?pz=1&cf=all&ncl=dgEurGFdFYAMclM_T4fKHKqMP6gwM&topic=h&ar=1336324205](https://news.google.com/news/rtc?pz=1&cf=all&ncl=dgEurGFdFYAMclM_T4fKHKqMP6gwM&topic=h&ar=1336324205)

它的宽度和高度是固定的，大约有五个左右的项目会随着新项目的添加而向下滚动。

我将使用数据源来绑定项目。

滚动条在那里，它是顶部的第一项 - 图片栏下方。

从本质上讲，新项目来自顶部，底部的项目滚动。看起来好像有什么东西从上面掉下来，把下面的东西弹出来——躲起来了。

# php - Mysql/PHP 从具有 post.postid 选择的行的列中获取 post.userid

> ID：10472551
> 
> 赞同：0
> 
> 时间：2012-05-06T17:17:28.133
> 
> 标签：php, mysql, database, phpmyadmin, mamp

我正在使用 Dreamweaver 和 MAMP 创建一个站点。我有一个名为帖子的表，里面有两列，postid 和 userid。我将所有帖子放在一个页面上，我想显示哪个用户发布了哪个帖子，并分别写在每个帖子上。例如，应该显示的第一个帖子的 postid 为 2，用户 ID 为 1。目前它正在显示登录所有帖子的用户的用户 ID，我正在使用：

```
mysql_select_db($database_akaearthdb, $akaearthdb);
$query_PostsUserid = "SELECT userid FROM posts WHERE posts.userid ORDER BY posts.postid";
$row_PostsUserid = mysql_fetch_assoc($PostsUserid); 
```

和

```
echo $row_PostsUserid['userid'] 
```

显示它。我希望 $row_PostsUserid['userid'] 成为发布者的用户 ID。

如果您需要更多信息，请告诉我，我是语言新手，如果我做错了一切，很抱歉，TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:23:22.707

您在“WHERE”子句中遗漏了一些东西：

WHERE posts.userid [ = something ]

这将是从数据库中获取所需数据的第一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:47:55.730

在从任何语言执行查询之前，

**在本地数据库命令行上测试查询。**

您的查询，

```
"SELECT userid FROM posts WHERE posts.userid ORDER BY posts.postid" 
```

将导致语法错误。

## 编辑：

请执行下列操作，

```
CREATE TABLE users (
         id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
         user_name VARCHAR(255),
         age INT,
         any_detail VARCHAR(255)
       );

CREATE TABLE posts (
         id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
         post TEXT,
         created_at TIMESTAMP(8),
         user_id INT,
         FOREIGN KEY (user_id) REFERENCES users(id)
       ); 
```

现在，

要显示帖子，

```
Array =  SELECT * FROM posts ORDER BY created_at DESC; 
```

*将上述查询的结果存储到您的语言数组/变量中。我是一名 Rails 开发人员，我不确定 PHP 的语法。（谷歌一下就知道了！）*

将结果存入数组后，

为数组中的每个元素显示以下内容，如下所示，

**帖子内容：
<< Array.post >>
撰写者：
<< Array.created_at >> 前
撰写者：
<< SELECT user_name FROM users WHERE user_id = Array.user_id >>**

这应该会帮助或带你去某个地方。

# php - 这两个正则表达式的区别？

> ID：10472553
> 
> 赞同：0
> 
> 时间：2012-05-06T17:17:39.800
> 
> 标签：php, regex, pcre

这两个正则表达式有什么区别？（使用php preg_match()）

`/^[0-9\x{06F0}-\x{06F9}]{1,}$/u`

`/^[0-9\x{06F0}-\x{06F9}\x]{1,}$/u`

`\x`第二种模式中的最后一个是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:22:01.290

它被解释为`\x00`（空字符），但几乎可以肯定它是由草率的编辑或复制和粘贴引起的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:26:14.207

[http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

> ...因为 \x 本身不是有效的正则表达式令牌...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:27:22.693

我认为第二种模式无效。

根据此页面[http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)， \x 仅在后跟 unicode 编号有用：

> 由于 \x 本身不是一个有效的正则表达式标记，\x{1234} 永远不会被混淆为匹配 \x 1234 次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T18:09:46.197

这很奇怪。unicode 字符的 PHP 表示法是 \x{}。在 perl 中，它是同样的事情。

但是 php 在正则表达式中有 //u 修饰符。我认为这意味着unicode。perl 中没有这样的修饰符。

在 perl 正则表达式中，\x## 被解析，其中 ## 需要表示一个 ascii 字符。如果它的 \x 或 \x#，它的非法十六进制数字被忽略的警告（因为它需要 2 个数字，不多不少）并且它只需要序列中的有效十六进制数字。如果您没有 \x 中的数字，则它使用 \0 ascii char 等。

但是，任何 \x{} 表示法都可以，并且 \x{0} 等价于 \x{}。并且 \x{0}-\x{ff} 被认为是 ascii，\x{100}- 被认为是 unicode。

因此，\x 是一个有效的十六进制/unicode 转义序列，但它本身是假定的十六进制并且不完整，可能不应该留给解析器默认机制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T18:51:09.303

据我所知，第二个`\x`实际上是一个无效字符。两种表达方式都有效吗？

# language-agnostic - 语言特征正交？

> ID：10472557
> 
> 赞同：0
> 
> 时间：2012-05-06T17:18:51.743
> 
> 标签：language-agnostic, assembly, programming-languages

我正在阅读《编程语言概念》（Sebesta 第 10 版），并在文本中将正交性定义为“可以以相对较少的方式组合一组相对较小的原始构造来构建控制和数据结构语言”。但我对是什么使某种语言特征正交感到困惑。因为我可能不会解释文本的全部荣耀:)，所以我在适当的文本下方包含了。

```
We can illustrate the use of orthogonality as a design concept by comparing
one aspect of the assembly languages of the IBM mainframe computers
and the VAX series of minicomputers. We consider a single simple situation:
adding two 32-bit integer values that reside in either memory or registers and
replacing one of the two values with the sum. The IBM mainframes have two
instructions for this purpose, which have the forms

A Reg1, memory_cell

AR Reg1, Reg2

where Reg1 and Reg2 represent registers. The semantics of these are:

Reg1 ← contents(Reg1) + contents(memory_cell)

Reg1 ← contents(Reg1) + contents(Reg2)

The VAX addition instruction for 32-bit integer values is

ADDL operand_1, operand_2

whose semantics is

operand_2 ← contents(operand_1) + contents(operand_2)

In this case, either operand can be a register or a memory cell.
The VAX instruction design is orthogonal in that a single instruction can
use either registers or memory cells as the operands. There are two ways to
specify operands, which can be combined in all possible ways. The IBM design
is not orthogonal. Only two out of four operand combinations possibilities are
legal, and the two require different instructions, A and AR.> 
```

所以我的主要问题是为什么 VAX 指令是正交的。仅仅是因为它的构造需要较少的指令，并且所有内容都可以在一行中完成吗？如果 VAX 系列计算机采用两条指令，IBM 采用三条指令，VAX 语言会不会更加正交？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:52:32.373

好。文本不决定它是关于正交语言还是指令集。指令集的显着特点是您可以使用（或不能使用）的寻址模式。如果您可以使用所有（或大多数）指令的所有寻址模式，则该指令集被称为正交（参见[http://en.m.wikipedia.org/wiki/Orthogonal_instruction_set#section_1](http://en.m.wikipedia.org/wiki/Orthogonal_instruction_set#section_1)）。

# php - SOA 和 Web 应用程序

> ID：10472564
> 
> 赞同：3
> 
> 时间：2012-05-06T17:19:22.320
> 
> 标签：php, asp.net, html, web, soa

我很困惑，我只知道 SOA 是一种哲学范式，就像 OOP 一样，我曾经很难真正理解什么是 OOP。现在我想也是 SOA 的时候了。您能给我提供一个 SOA 应用程序的简单具体的实际示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:46:28.767

面向服务的架构是企业中经常使用的一种范式。这个想法是创建可重用的服务组件（通常是在现有系统/应用程序中公开功能的接口）。Web 上有大量资源可用作在各种场景中何时以及如何使用 SOA 的起点。

在构建单个应用程序时使用 SOA 并不真正适用。单个应用程序的标准架构通常是 N 层方法（例如 UI、业务、服务、数据）。如果您正在构建一个新应用程序并希望为在 SOA 环境中使用它做好准备，您可以遵循一些准则，例如将应用程序功能公开为服务（SOAP over HTTP 很流行但不是必需的），考虑各种信息实体应用程序处理的内容以及是否公开这些操作，最后但最重要的是联系企业架构师以确定最有可能重用的应用程序的功能，并定义未来的可重用服务的外观和上的要求相同。

# asp.net - 在 ASP.Net 中生成动态复选框

> ID：10472567
> 
> 赞同：0
> 
> 时间：2012-05-06T17:19:45.550
> 
> 标签：asp.net, c#-4.0, sql-server-2008-r2

请告诉我代码 bcz 有什么问题，我无法在页面上添加控件。我得到了正确的值&如果我只是`CheckBoxList2.Items.Add(row["subj_nme"].ToString());`创建了复选框

```
if (ds.Tables.Count > 0)
            {
                foreach (DataRow row in ds.Tables[0].Rows)
                {
                    chkList1 = new CheckBox();
                    chkList1.Text = row["subj_nme"].ToString();
                    chkList1.ID = row["subjid"].ToString();
                    chkList1.Checked = true;
                    chkList1.Font.Name = "Verdana";
                    chkList1.Font.Size = 12;
                    CheckBoxList2.Controls.Add(chkList1);
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:42:43.150

我认为您可以使用此代码将您的绑定`CheckBoxList2`到 DataTable，如下所示。

```
CheckBoxList2.DataSource = ds.Tables[0];
CheckBoxList2.DataTextField = "subj_nme";
CheckBoxList2.DataValueField = "subjid";
CheckBoxList2.DataBind();
CheckBoxList2.Font.Name = "Verdana";
CheckBoxList2.Font.Size = 12; 
```

要检查它们，你可以这样做

```
for(int i=0;i<CheckBoxList2.Items.Count;i++)
{
CheckBoxList2.Items[i].Selected = true;
} 
```

# javascript - 回调的常见模式，但为什么呢？

> ID：10472568
> 
> 赞同：2
> 
> 时间：2012-05-06T17:19:52.397
> 
> 标签：javascript, callback

我从来没有真正使用过 JavaScript，但我大致知道它是关于什么的。现在我正在浏览一些 chrome 扩展的例子，我看到了很多这种“模式”。

```
var Main = {
    enable: function(){ window.addEventListener('mousemove', onMouseMove, false); },
    onMouseMove: function(event){ _onMouseMove(event) },
    _onMouseMove: function(event){
        ...lenghty implementation...
    }
} 
```

我的问题是，为什么？这是某种优化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:51:20.283

你的问题有点含糊；但我猜你是在问为什么开发人员有两种`onMouseMove`方法，而不是把所有的工作合二为一，即：

```
var Main = {
    onMouseMove: function(event) { 
        // Why not just have the implementation here?
        // Why are we delegating it to the other method?
        _onMouseMove(event) 
    },
    _onMouseMove: function(event){
        // ...length implementation...
    }
} 
```

答案是因为[JavaScript 是如何处理范围的](http://www.robertsosinski.com/2009/04/28/binding-scope-in-javascript/)。简而言之，`this`大多数经典 OOP 语言（如 Java）中的键始终是指`Main`Function 范围内的父类 ( ) - JavaScript 不是这样工作的。

由于 JavaScript 中没有经典的类，因此`this`关键字实际上是指调用它的函数；这就是为什么`new`关键字在通过其构造函数创建新对象时如此不同的原因；例如：

```
function MyConstructor = function () { 
    // Assign a member property
    this.aProperty = "An Example";
}

// Using the new keyword; a new scope is created for the call which refers to the
// object about to be created (and returned).
var withNew = new MyConstructor();
console.log(withNew.aProperty);  // 'An Example'

// Without the new keyword...
var withoutNew = MyConstructor();
console.log(withoutNew.aProperty);  // undefined

// Because we didn't use new, the calling function scope was applied, so 
// the `this` keyword resolves caller's scope.
console.log(this.aProperty)  // 'An Example' 
```

通过委派 from`onMouseMove`到`_onMouseMove`范围，仍然绑定到`Main`对象，而不是绑定到触发鼠标事件的对象。另一种更易读的方法是使用委托，或者如果你使用的是 ES5，[Function.bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

```
var Main = {
    enable: function() {
        window.addEventListener('mousemove', onMouseMove.bind(this), false); 
    },
    onMouseMove: function(event) { 
        // ...lengthy implementation...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:25:47.517

我不熟悉 chrome 扩展的一般实现方式，但是当我使用这种模式时，它专门用于保护我的实现。

通常，您的插件会公开某些属性和功能。该功能的用户可以轻松（甚至意外地）覆盖您公开的功能。在这种情况下，如果您在该函数中有实际实现，它就消失了。

更新：现在您已经更新了问题...

`onMouseMove`我个人认为暴露对象的一部分和作为对象没有多大价值`_onMouseMove`。我已经看到一些这样编写的 javascript 库是基于人们会“遵守约定”并将前缀`_`为私有的属性的假设。

可能，我会做这样的事情：

```
var Main = function(){
   var _onMouseMove = function(event){ ... do stuff...};
   return {
       enable: function(){...},
       onMouseMove: _onMouseMove
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T17:41:23.720

不，这不是任何优化（至少据我所知）。

我对chrome扩展了解不多，只是偶尔读一些代码，没什么大不了的。但是，正如 Brightgarden 所说，您所询问的模式是为了保护实施。在其他语言中，您具有用于封装私有数据的内置机制。不在js中。在我看来，这粗略，非常粗略，似乎是一种模块模式-brightgarden 的答案中已经给出了其中的示例。您可能想在这里阅读更多关于在 js 中实现的设计模式：http: [//addyosmani.com/resources/essentialjsdesignpatterns/book/](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)

具体在这里：[http](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript) ://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript 模块模式

实际的模块模式比您的示例更好且更容易混淆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T17:39:27.210

除了让读者感到困惑之外，这种“模式”没有任何好处。

# javascript - 在我无法控制的 HTML 页面上更改 Javascript

> ID：10472569
> 
> 赞同：4
> 
> 时间：2012-05-05T21:38:34.293
> 
> 标签：javascript, greasemonkey

我正在使用我无法控制的 HTML 页面。`<script>`它在内联标记中定义了一个 Javascript 函数并在以下位置调用它`<body onload="...">`：

```
<html>
...
<body onload="init()">
<script type="text/javascript" language="javascript">
    function init() {
        ...
    }
</script>
... 
```

如何在调用该函数之前更改它？我尝试使用 Greasemonkey 修改脚本或在其后插入另一个脚本以覆盖该函数，但它似乎没有任何效果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T05:39:35.287

[Greasemonkey](https://developer.mozilla.org/en/DOM/element.onbeforescriptexecute)现在*通常*可以通过利用[事件`beforescriptexecute`](https://developer.mozilla.org/en/DOM/element.onbeforescriptexecute)和`@run-at document-start`. 请注意，似乎只有 Firefox 支持该事件，因此这不适用于 Chrome。有关更繁琐的方法，请参见[此处](https://stackoverflow.com/q/7120626/331508)和[此处](https://stackoverflow.com/q/3972038/331508)。

`init()`要在调用之前更改该函数，请利用`checkForBadJavascripts()`下面定义的函数。

你可以这样称呼它：

```
//--- New "init" function to replace the bad one.
function init () {
    //... Do what you want here...
}

checkForBadJavascripts ( [
    [false, /function\s+init(/, function () {addJS_Node (init);} ]
] ); 
```

where`function\s+init(`必须是`<script>`您所定位的标签所独有的。（请注意，这`addJS_Node()`也在下面定义。）

* * *

例如，[在 jsBin 访问此页面](http://output.jsbin.com/tezoni/1)。您将看到 3 行文本，其中两行由 JS 添加。

现在，安装以下脚本并重新访问该页面。您会看到 GM 脚本删除了一个坏`<script>`标签，并用我们的“好”JS 替换了另一个标签。

```
// ==UserScript==
// @name        _Replace evil Javascript
// @include     http://output.jsbin.com/tezoni*
// @run-at      document-start
// @grant       none
// ==/UserScript==

/****** New "init" function that we will use
    instead of the old, bad "init" function.
*/
function init () {
    var newParagraph            = document.createElement ('p');
    newParagraph.textContent    = "I was added by the new, good init() function!";
    document.body.appendChild (newParagraph);
}

/*--- Check for bad scripts to intercept and specify any actions to take.
*/
checkForBadJavascripts ( [
    [false, /old, evil init()/, function () {addJS_Node (init);} ],
    [true,  /evilExternalJS/i,  null ]
] );

function checkForBadJavascripts (controlArray) {
    /*--- Note that this is a self-initializing function.  The controlArray
        parameter is only active for the FIRST call.  After that, it is an
        event listener.

        The control array row is  defines like so:
        [bSearchSrcAttr, identifyingRegex, callbackFunction]
        Where:
            bSearchSrcAttr      True to search the SRC attribute of a script tag
                                false to search the TEXT content of a script tag.
            identifyingRegex    A valid regular expression that should be unique
                                to that particular script tag.
            callbackFunction    An optional function to execute when the script is
                                found.  Use null if not needed.
    */
    if ( ! controlArray.length) return null;

    checkForBadJavascripts      = function (zEvent) {

        for (var J = controlArray.length - 1;  J >= 0;  --J) {
            var bSearchSrcAttr      = controlArray[J][0];
            var identifyingRegex    = controlArray[J][1];

            if (bSearchSrcAttr) {
                if (identifyingRegex.test (zEvent.target.src) ) {
                    stopBadJavascript (J);
                    return false;
                }
            }
            else {
                if (identifyingRegex.test (zEvent.target.textContent) ) {
                    stopBadJavascript (J);
                    return false;
                }
            }
        }

        function stopBadJavascript (controlIndex) {
            zEvent.stopPropagation ();
            zEvent.preventDefault ();

            var callbackFunction    = controlArray[J][2];
            if (typeof callbackFunction == "function")
                callbackFunction ();

            //--- Remove the node just to clear clutter from Firebug inspection.
            zEvent.target.parentNode.removeChild (zEvent.target);

            //--- Script is intercepted, remove it from the list.
            controlArray.splice (J, 1);
            if ( ! controlArray.length) {
                //--- All done, remove the listener.
                window.removeEventListener (
                    'beforescriptexecute', checkForBadJavascripts, true
                );
            }
        }
    }

    /*--- Use the "beforescriptexecute" event to monitor scipts as they are loaded.
        See https://developer.mozilla.org/en/DOM/element.onbeforescriptexecute
        Note that it does not work on acripts that are dynamically created.
    */
    window.addEventListener ('beforescriptexecute', checkForBadJavascripts, true);

    return checkForBadJavascripts;
}

function addJS_Node (text, s_URL, funcToRun) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    //--- Don't error check here. if DOM not available, should throw error.
    targ.appendChild (scriptNode);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T15:53:24.560

以下 Greasemonkey 用户脚本（基于[此源](http://www.squakmt.com/replacing_javascript/index.htm)）终于为我工作了。`script`它通过在现有标记之后的新标记中定义另一个具有相同名称的函数来覆盖现有函数`script`。没有`@run-at`或`beforescriptexecute`需要。

```
var firstScript = document.body.getElementsByTagName('script')[0];
var newScript = document.createElement('script');
var scriptArray = new Array();
scriptArray.push('function init() {');
scriptArray.push('    ...');
scriptArray.push('}');
newScript.innerHTML = scriptArray.join('\n');
scriptArray.length = 0; // free this memory
firstScript.parentNode.insertBefore(newScript, firstScript.nextSibling); 
```

我以前没有太多使用 Greasemonkey 甚至 Javascript 的经验，所以我发现 Firefox Web Developer 工具必不可少，特别是：

*   错误控制台以捕获您一定会犯的许多小错误。和
*   检查工具以查看生成的 HTML（因为常规查看源代码没有显示！）。

# javascript - 模仿黑色的谷歌菜单

> ID：10472573
> 
> 赞同：0
> 
> 时间：2012-05-06T17:20:33.487
> 
> 标签：javascript, jquery, html, css

我正在尝试将黑色 Google 菜单放在我的网站上。到目前为止，我成功地制作了这个菜单的精确复制品。但是，我似乎无法弄清楚一件事：如果您查看菜单（[链接）](http://www.google.nl/)，您会看到 ul 从左侧有一个填充（或边距）。如果你然后让你的浏览器窗口变小或变大，这个填充/边距似乎会改变。这发生在所有浏览器中。我一开始以为他们在用百分比做一些事情，但事实并非如此。

有人可以告诉我这个填充/边距是基于什么的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:02:33.973

我认为您正在寻找的是 CSS3 的 @media 查询。 [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# python - 如何将数据插入数据库？

> ID：10472576
> 
> 赞同：0
> 
> 时间：2012-05-06T17:20:49.620
> 
> 标签：python, mysql

在 test.txt 中，我有 2 行句子。

```
The heart was made to be broken.
There is no surprise more magical than the surprise of being loved. 
```

在代码中：

```
import MySQLdb, csv, sys
db = MySQLdb.connect("host","username","password","databasename" )
c = db.cursor()
sql_drop = "DROP TABLE IF EXISTS Sentence"
c.execute(sql_drop)
sql = """CREATE TABLE Sentence(
     No INT,
     Sentence CHAR(255) NOT NULL)"""
csv_data=csv.reader(file("/test.txt"))
for row in csv_data:
    print row
sql_insert = "INSERT INTO Sentence (Sentence) VALUES ('%s')" % row
c.execute(sql_insert)
db.close() 
```

我试图插入数据库，但出现错误。

```
"ProgrammingError: (1064, ""You have an error in your SQL syntax; check the manual that
 corresponds to your MySQL server version for the right syntax to use near 'There is no 
 surprise more magical than the surprise of being loved.']')' at line 1"")" 
```

有什么可能的解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:28:24.377

```
c.execute("INSERT INTO Sentence_Qaem (Sentence) VALUES (%s)", row) 
```

您的`INSERT`语句不会逃避输入什么是危险的（有 SQL 注入）。您收到错误，因为文件中的一行包含单引号 ( `'`) tat 也应该被转义。

# css - 如果它们是相对的孩子，如何在绝对值之上制作普通 div？

> ID：10472577
> 
> 赞同：0
> 
> 时间：2012-05-06T17:20:53.423
> 
> 标签：css, layout, html, position

所以我有一个具有相对位置的包装器 div，在它的底部有另一个绝对 div 应该在它的顶部，相对 div 包装器的另一个孩子是实际内容 div，它没有设置位置。现在发生的事情是绝对 div 位于内容之上。我不能使用 z 索引，因为内容 div 没有位置......有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:04:30.470

Z-index 可以应用于具有[相对、绝对或固定位置](http://www.w3.org/TR/CSS2/visuren.html#z-index)的任何元素。

将 div 的位置设置为相对（您不必设置顶部或左侧），然后设置 z-index。

# java - 由于名称冲突，无法覆盖方法

> ID：10472578
> 
> 赞同：4
> 
> 时间：2012-05-06T17:21:07.567
> 
> 标签：java, generics, name-clash

此代码无法编译：

```
import java.util.List;

class A {
  void foo(List l) { }
}

class B extends A {
  void foo(List<?> l) { }
} 
```

但是，以下代码可以编译（D 中的 foo 覆盖 C 中的 foo）。为什么？

```
class C {
  void foo(List<?> l) { }
}

class D extends C {
  void foo(List l) { }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:25:19.220

第二个示例可以编译，因为 List<> 派生自 List，但不是相反，这就是第一个示例无法编译的原因。

# java - 如何开发非 UI 客户端 GWT 库？

> ID：10472580
> 
> 赞同：0
> 
> 时间：2012-05-06T17:21:17.497
> 
> 标签：java, gwt, gwt-2.4

我希望编写一个用于各种 GWT 应用程序的共享库。共享库将利用 GWT API，并且不应使用非模拟 Java 类。

两个问题：

*   如果我使用非模拟类（但只会构建一个兼容的 jar 而不是战争），是否有一个 Eclipse 插件可以让我使用 GWT API 和标记？（*我知道标准插件在“客户”区域工作时会这样做，我只希望整个源代码树具有相同的行为）*
*   如果没有，是否有 Maven/Ant 插件可以提供帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:56:03.730

对于 GWT 库，您必须包含 GWT 模块（`*.gwt.xml`文件）和`*.java`文件`*.jar`（如果您愿意，也可以在不同的 JAR 中）。

AFAIK，Eclipse 的 Google 插件使用`*.gwt.xml`文件中的信息，`client`子包不是硬编码的；因此您应该能够像使用 GWT 应用程序一样使用它。

最后，您可以使用参数调用 GWT 编译器，`-validateOnly`以检查您的 GWT 模块是否仅使用可翻译类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-06T17:40:36.460

我很确定您不能开发 gwt 共享库并将其打包到 jar 文件中。Gwt 在编译文件时需要访问所有源代码。它根本无法读取类文件。还是我误解了您要做什么？

# scheme - 用于检测 Scheme 代码中的引号的函数

> ID：10472582
> 
> 赞同：1
> 
> 时间：2012-05-06T17:21:31.130
> 
> 标签：scheme, quote, syntax-checking

我正在尝试编写一个函数来检查某些输入是否是语法检查器的引用。

我有以下代码：

```
(define is-quote-expression?
  (lambda (v)
    (equal? (car v) 'quote)
    (is-quotation? (cdr v)))))

(define is-quotation?
  (lambda (v)
    (or (number? v)
        (boolean? v)
        (char? v)
        (string? v)
        (symbol? v)
        (null? v)
        (and (pair? v)
             (is-quotation? (car v))
             (is-quotation? (cdr v))))) 
```

当我尝试评估时，我得到以下信息：

```
 (is-quote-expression? '1)
 #f

 (is-quote-expression? (cons 'quote 1))
 #t 
```

我想我的 TA 告诉我，Scheme 环境用“'quote”替换了所有“'”，但是，情况似乎并非如此。我们正在运行 Petite Chez 计划。

我没看到什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:56:54.460

您的代码存在一些问题，对于初学者来说，其中的`(lambda (pair? v)`部分`is-quote-expression?`几乎可以肯定是一个错误（您正在定义一个带有两个参数的 lambda`pair?`和`v`）。

另外，我相信您打算仅在*不是*一对时才打电话`is-quotation?`，因此再次询问 if in是没有意义的。谁说只有当它的和都是引用时，一对才是引用？`is-quote-expression?``v` *`(pair? v)``is-quotation?``car``cdr`*

 *在这里，我相信这就是您的意图：

```
(define is-quote-expression?
  (lambda (v)
    (if (pair? v)
        (equal? (car v) 'quote)
        (is-quotation? v))))

(define is-quotation?
  (lambda (v)
    (or (number? v)
        (boolean? v)
        (char? v)
        (string? v)
        (symbol? v)
        (null? v)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:18:20.320

不过，我同意 Óscar 的帖子，它`is-quote-expression?`接受一个*列表*而不是一对，并返回它是否是一个引用。

```
(define is-quote-expression?
  (lambda (v)
    (and (proper-list-of-given-length? v 2)
         (equal? (car v) 'quote)
         (is-quotation? (cadr v))))) 
```

此外，您最初的问题对报价的实际作用有些困惑。这才是真正应该发生的：

```
> (is-quote-expression? '1)
#f
> (is-quote-expression? (cons 'quote 1))
#f
> (is-quote-expression? (quote 42))
#f
> (is-quote-expression? (quote (quote 42)))
#t 
```

请注意内置的报价过程如何简单地返回它传递的内容。在`(quote 42)`它只是返回的情况下`42`。但是`(quote (quote 42))`返回`(quote 42)`，这是您希望传递给 is-quote-expression? 的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T20:07:28.763

的行为`quote`在[R6RS](http://www.r6rs.org/final/html/r6rs/r6rs.html)附录[A.3](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-15.html#node_sec_A.3)中指定。对于`'1`，相关规则是***6sqv***：

> (存储 ( *sf* [1] ...) *S* [1] [ *'sqv* [1] ]) → (存储 ( *sf* [1] ...) *S* [1] [ *sqv* [1] ])

是时候打破这个了。

“S → T”表示法定义了评估术语的一个步骤，其中“S”评估为“T”。

由于`store`和[非终结](http://en.wikipedia.org/wiki/Terminal_and_nonterminal_symbols#Nonterminal_symbols)符在左侧和右侧看起来相同，因此您无需了解它们即可了解如何评估。如果您需要某些东西，请将其视为“存储环境”，并将其视为名称和值对；表示标识符与 value 相关联，并且在评估 term 时与之相关联。`*sf*[1]` `'1``store``*sf*[n]``(store ((x 1) (y 2)) *S*)``x``1``y``2``*S*`

如果你不熟悉这个符号，它指的是一个有一个“洞”（一个里面有 a 的词）填充的术语。有两个相关的语法元素：带有孔的术语 ( ) 和带有由值填充的孔的术语 ( )。孔有点（但只有一点）像未命名的变量。一个重要的区别是一个术语只允许一个洞。孔可能最好用例子来解释。以下是：`*S*[*e*]``[]``*e*``*S*[]``*S*[*e*]``*S*[]`

*   `(+ [] 1 2)`
*   `(list [] 'a "foo")`
*   ```
    (cond ((= x 0) [])
          ((> x 0) 1)
          (else   -1)) 
    ```

请注意，只有在子项在语法上有效时才会出现空洞；`[] 2)`不是一个有洞的术语。`*S*[0]`将是一个`0`代入洞中的术语：

*   `(+ 0 1 2)`
*   `(list 0 'a "foo")`
*   ````
    (cond ((= x 0) 0)  
          ((> x 0) 1)
          (else   -1)) 
    ```` 

 `当为孔指定值时，该术语`*S*[]`也称为“上下文”。这来自 term-with-holes 的主要用途之一：匹配包含给定值的任何术语。是任何包含有效子术语的术语，因此出现的上下文也是如此。简而言之，它是包含引用的任何术语的替代。`*S*[*e*]``e``*S*[]``*e*``*S*[1][*'sqv*[1]]`

*   `(+ 'foo 1 2)`
*   `(list 'bar 'a "foo")`
*   ```
    (cond ((= x 0) 'baz)
          ((> x 0) 1)
          (else   -1)) 
    ```

请注意，第二个术语为引用术语提供了两种不同的上下文：`(list [] 'a "foo")`, `(list 'bar [] "foo")`. 这表明您不应该过多地将漏洞视为未命名的变量。

如果您想知道为什么使用上下文术语和孔，它们是递归定义的替代方案。如果没有上下文，→ 必须在术语结构上递归定义（[Scheme 的语法](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-15.html#node_sec_A.2)定义了结构）。[lambda 演算中的替换](http://en.wikipedia.org/wiki/Lambda_calculus#Substitution)是结构递归的一个示例，您可能在 Scheme 中定义的任何树处理函数也是如此（尽管 Scheme 语法与用于定义 → 和 lambda 演算替换的语法完全不同）。

```
(define (tree-depth tree)
  (if (pair? tree) 
          (max (tree-depth (car tree)) 
               (tree-depth (cdr tree)))
          1
) ) 
```

接下来，让我们检查一下 的含义`*sqv*`，它是“自引用值”的缩写。这是附录 A.2 中给出的[Scheme 语法](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-15.html#node_sec_A.2)的非终结符。

> ```
> *平方*::= *n* | #t | #f
>  *n*    ::= [数字]
> 
> ```

*sqv*只是一个数字或布尔值。

总之，***6sqv***评估规则意味着引用的数字或布尔值评估为数字或布尔值；报价被简单地丢弃。

这对您的作业意味着您无法区分普通函数`1`和`'1`普通函数之间的区别，因为在调用函数之前会评估子项。你需要一个宏。

为什么要经历这一切只是为了说“[`'1`评估为`1`](http://en.wikipedia.org/wiki/Principia_Mathematica#Quotations)”？首先，回答“为什么”比回答“什么”更重要。此外，它有望帮助您超越问题，学习一点如何阅读 Scheme 的形式语义，让您体验计算理论概念并引发更多问题。`*

# c++ - 在没有设置对话框的情况下启动 Ogre BaseApplication

> ID：10472592
> 
> 赞同：1
> 
> 时间：2012-05-06T17:22:14.703
> 
> 标签：c++, installation, render, ogre

我正在编写自己的 Ogre 应用程序，基于基本的食人魔教程。

有谁知道在没有第一个设置对话框的情况下启动 OgreRenderWindow 的方法？

我知道[Ogre Basic tutorial 6](http://www.ogre3d.org/tikiwiki/Basic+Tutorial+6&structure=Tutorials)，但它不起作用。

感谢 4 帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-29T22:04:15.703

对于较新版本的 Ogre，上述解决方案将不起作用。

您可以执行以下操作....

```
 #if defined OIS_LINUX_PLATFORM
  mRoot->loadPlugin("/usr/lib/OGRE/Plugin_ParticleFX");
  mRoot->loadPlugin("/usr/lib/OGRE/Plugin_CgProgramManager");
  mRoot->loadPlugin("/usr/lib/OGRE/Plugin_OctreeSceneManager");
  mRoot->loadPlugin("/usr/lib/OGRE/Plugin_PCZSceneManager");
  mRoot->loadPlugin("/usr/lib/OGRE/Plugin_OctreeZone");
  mRoot->loadPlugin("/usr/lib/OGRE/Plugin_BSPSceneManager");
  mRoot->loadPlugin("/usr/lib/OGRE/RenderSystem_GL");
  #endif

  Ogre::RenderSystemList::const_iterator renderers = mRoot->getAvailableRenderers().begin();

  while(renderers != mRoot->getAvailableRenderers().end())
  {
    Ogre::String rName = (*renderers)->getName();

    if (rName == "OpenGL Rendering Subsystem")
      break;

    renderers++;
  }

  Ogre::RenderSystem *renderSystem = *renderers;
  renderSystem->setConfigOption("Full Screen","No");
  renderSystem->setConfigOption("Video Mode","1024 x 768 @ 32-bit colour");
  renderSystem->setConfigOption("Display Frequency","50 Hz");
  renderSystem->setConfigOption("FSAA","16");
  renderSystem->setConfigOption("Fixed Pipeline Enabled","Yes");
  renderSystem->setConfigOption("RTT Preferred Mode","FBO");
  renderSystem->setConfigOption("VSync","No");
  renderSystem->setConfigOption("sRGB Gamma Conversion","No");

  mRoot->setRenderSystem(renderSystem); 

  // Create a render window
  mWindow =  mRoot->initialise(true, "MyGame v0.0.1"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:49:33.400

[你可以在这里](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=MinimalPracticalApplication&structure=Cookbook)找到一个没有设置对话框的 Ogre init 示例。

对于 Ogre::Root 实例，您只需使用设置渲染系统`setRenderSystem`，然后您可以使用设置配置选项（如在设置配置对话框中）`setConfigOption()`

```
 Root* root = new Root; 
    root->loadPlugin("/usr/local/lib/OGRE/RenderSystem_GL");      
    RenderSystemList *rs = root->getAvailableRenderers(); 
    if(rs&&rs->size()&&rs->at(0)->getName().compare("RenderSystem_GL"))
    { 
             RenderSystem * r=rs->at(0); 
             root->setRenderSystem(r); 

             r->setConfigOption("Full Screen","No");  
             r->setConfigOption("Video Mode","800 x 600 @ 16-bit colour"); 
     }
     else
     { 
             // report error
     } 
```

# jplayer - jplayer 在一页中有多个 mp3 文件链接

> ID：10472594
> 
> 赞同：1
> 
> 时间：2012-05-06T17:22:25.547
> 
> 标签：jplayer

我在我的页面中使用 jplayer，当点击一个链接时，我想播放点击的链接。但是每次播放 test1.mp3。我该如何解决？代码如下：

如果需要，页面如下：

[http://www.dilyurdu.com/audio.htm](http://www.dilyurdu.com/audio.htm)

```
function listen(mp3_index){ 

    var mp3_file;
    mp3_file="test"+mp3_index+".mp3";

     $("#jquery_jplayer_1").jPlayer({ 
        ready: function(event) { 
            $(this).jPlayer("setMedia", { 
                mp3: mp3_file, 
        }); 
     }, 
    swfPath: "http://www.jplayer.org/2.1.0/js", 
    supplied: "mp3" 
  });   

} 
```

链接如下：

```
<div id="jquery_jplayer_1" class="jp-jplayer"></div>

<a href="javascript:listen(1);" class="jp-play" >play 1</a><br /><br />     

<a href="javascript:listen(2);" class="jp-play" >play 2</a><br /><br />

<a href="javascript:listen(3);" class="jp-play" >play 3</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:16:33.860

嘿，您可以执行以下操作。

我在页面加载时实例化播放器：

```
jQuery("#jquery_jplayer_1").jPlayer({
  swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
  supplied: "mp3",
  wmode: "window",
  preload:"auto",
  autoPlay: true,
  errorAlerts:false,
  warningAlerts:false
}); 
```

然后在每个项目都是唯一的侦听器中，您需要： A)**获取轨道名称/URL**，我想您应该能够弄清楚这一点。

B)**将轨道传递给 setMedia**

```
 jQuery("#jquery_jplayer_1").jPlayer("setMedia", {
    mp3: "http:xxxx.rackcdn.com/"+track+".MP3"
  }); 
```

C)**播放曲目**

```
 jQuery("#jquery_jplayer_1").jPlayer("play"); 
```

要获取曲目 ID，您需要在可播放项目上安装侦听器（可能是可播放类？）并从该项目中获取曲目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:49:15.183

我也在为此寻找解决方案。刚刚在 jsfiddle 中创建它访问[http://jsfiddle.net/vijayweb/A5LQF/2/](http://jsfiddle.net/vijayweb/A5LQF/2/)

它只播放一首歌。任何帮助将不胜感激。

* * *

我找到了一个相关的解决方案......仍然只播放第一首默认歌曲。 [带有 jplayer 的单个页面中的多个 mp3 链接](https://stackoverflow.com/questions/10471327/multiple-mp3-links-in-a-single-page-with-jplayer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T15:22:58.747

HTML：

```
<a class="ChangePath" data-key="1" href="javascript:void(0);">Song1</a>
<a class="ChangePath" data-key="2" href="javascript:void(0);">Song1</a>
<a class="ChangePath" data-key="3" href="javascript:void(0);">Song1</a> 
```

jQuery：

```
$(function () {
    $('.ChangePath').on('click', function () {

    $("#jquery_jplayer_1").jPlayer("destroy");

    var link = "test" + $(this).data('key') + ".mp3";

    $("#jquery_jplayer_1").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                mp3: link
            });
        },
        swfPath: "~/Scripts/jplayer",
        supplied: "mp3"
    });

    player.jPlayer("play", 0);

});
}); 
```

如果你使用 ajax：

```
$(function () {
    $('.ChangePath').on('click', function () {
   $.ajax({
    $("#jquery_jplayer_1").jPlayer("destroy");

    var link = "test" + $(this).data('key') + ".mp3";

    $("#jquery_jplayer_1").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                mp3: link
            });
        },
        swfPath: "~/Scripts/jplayer",
        supplied: "mp3"
    });

    player.jPlayer("play", 0);
});
});
}); 
```

根据您的项目，您可能需要将超链接更改为其他内容，但 jQuery 可以工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-06-29T07:28:27.327

```
$('.reproducirContenedor').on('click',function(e){// click en el elento a reproducir
    e.preventDefault();//para que cuando el usuario haga click en el icono de play no salte la pagina

    jQuery("#jquery_jplayer_1").jPlayer({
        swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
        supplied: "mp3",
        wmode: "window",
        preload:"auto",
        autoPlay: true,
        errorAlerts:false,
        warningAlerts:false
      });

    var url_destino=$(this).attr('data-demo');// obtengo la ubicacion del archivo de audio para reproducirlo

    jQuery("#jquery_jplayer_1").jPlayer("setMedia", {
        mp3:url_destino
      });

      jQuery("#jquery_jplayer_1").jPlayer("play");

}); 
```

# java - 如何获取基于 JScrollPane 的窗口可见部分的尺寸

> ID：10472597
> 
> 赞同：6
> 
> 时间：2012-05-06T17:22:57.737
> 
> 标签：java, swing, jscrollpane, viewport, jsplitpane

这个`JScrollPane`基于窗口是`JSplitPane`.

`getBounds()`, `getWidth()`,`getHeight()`都返回窗口的完整大小，包括不可见（可滚动）部分。

我只想知道可见部分的尺寸。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T17:37:46.467

这是一个仅打印*可见部分*的高度和宽度的示例，

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;

public class TestWidth {

    public static void main(String[] args) {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextPane newsTextPane = new JTextPane();
        newsTextPane.setEditable(false);

        JScrollPane scrollPane = new JScrollPane(newsTextPane);

        frame.add(scrollPane);
        frame.setSize(300, 250);
        frame.setVisible(true);

        System.out.println("Height : " + scrollPane.getViewport().getSize().height + "\nWidth :" + scrollPane.getViewport().getSize().width);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T17:26:28.907

你看看[JViewport](http://docs.oracle.com/javase/7/docs/api/javax/swing/JViewport.html)，你可以 从[JScrollPane派生](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)[JViewport](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#operation)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-06T17:37:32.103

我认为您正在寻找[JComponent#getVisibleRect()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getVisibleRect%28%29)。

> 返回 的`Component`“可见矩形” - 此组件的可见矩形`new Rectangle(0, 0, getWidth(), getHeight())`与其所有祖先的可见矩形的交集。

# c# - 在 IronPython 中创建 System.Windows.Media.Color

> ID：10472599
> 
> 赞同：2
> 
> 时间：2012-05-06T17:23:09.777
> 
> 标签：c#, ironpython

我使用 IronPython，我尝试从脚本中实例化一种颜色并返回它。我得到了这个方法并将这个字符串作为参数发送

```
@"
from System.Windows.Media import Color
c = Color()
c.A = 100
c.B = 200
c.R = 100
c.G = 150
c
");

_python = Python.CreateEngine();

public dynamic ExectureStatements(string expression)
{
    ScriptScope scope = _python.CreateScope();
    ScriptSource source = _python.CreateScriptSourceFromString(expression);
    return source.Execute(scope);
} 
```

当我运行此代码时，我得到

> $exception {System.InvalidOperationException：序列在 System.Linq.Enumerable.First[TSource](IEnumerable`1 源，Func`2 谓词)中不包含匹配元素.. 等等。

我不知道如何让它工作，所以请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:31:26.867

在我看到更多源代码或完整堆栈之前，我无法确定，但我猜你缺少让 python 引擎包含对必要 WPF 程序集的引用（System.Windows.Media.Color 的 PresentationCore AFAICT）。

根据您是否关心 C# 调用者需要对同一库的引用，您可以更改它获取对它的引用的方式，但只需添加 PresentationCore 就可以让我引用必要的程序集（不带字符串:)，然后将其添加到 IronPython运行。

下面的代码运行良好并打印出 #646496C8

```
using System;
using IronPython.Hosting;
using Microsoft.Scripting.Hosting;

class Program
{
    private static ScriptEngine _python;
    private static readonly string _script = @"
from System.Windows.Media import Color
c = Color()
c.A = 100
c.B = 200
c.R = 100
c.G = 150
c
";

    public static dynamic ExectureStatements(string expression)
    {
        var neededAssembly = typeof(System.Windows.Media.Color).Assembly;
        _python.Runtime.LoadAssembly(neededAssembly);
        ScriptScope scope = _python.CreateScope();
        ScriptSource source = _python.CreateScriptSourceFromString(expression);
        return source.Execute(scope);
    }

    static void Main(string[] args)
    {
        _python = Python.CreateEngine();
        var output = ExectureStatements(_script);
        Console.WriteLine(output);
    }
} 
```

# ruby-on-rails - 来自 Destroy 动作的 Redirect_to 总是得到 DELETE 动词，无论我声明什么：方法

> ID：10472600
> 
> 赞同：24
> 
> 时间：2012-05-06T17:23:10.833
> 
> 标签：ruby-on-rails, rest

我在名为的控制器中有以下方法`tareas_controller`

```
def destroy
  @tarea = Tarea.find(params[:id])
  @tarea.destroy

  respond_to do |format|
    format.html { redirect_to tareas_url }
    format.json { head :ok }
    format.js { redirect_to :controller => "clientes", :action =>"show", :id => @tarea.cliente, :format => :js, :method=>:get}
  end

end 
```

记录被删除了，之后我在服务器上得到以下代码：

> 重定向到[http://127.0.0.1:3000/clientes/12.js?method=get](http://127.0.0.1:3000/clientes/12.js?method=get) Completed 302 发现在 174ms
> 
> 2012-05-06 19:20:07 +0200 由 ClientesController#destroy 作为 JS 参数处理 127.0.0.1 开始 DELETE "/clientes/12.js?method=get": {"method"=>"get", "id"=>"12"} 客户负载 (0.0ms) SELECT "clientes".* FROM "clientes" WHERE "clientes"."id" = ? LIMIT 1 [["id", "12"]] SQL (2.0ms) DELETE FROM "clientes" WHERE "clientes"."id" = ? [["id", 12]] 完成 406 Not Acceptable in 131ms

似乎将带有 DELETE 动词的请求发送到新控制器，但我找不到将其更改为对新控制器的 GET 请求的方法。

有人可以给我建议如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-01-07T18:19:21.793

您应该使用状态 303 重定向。

> 如果您使用 GET 或 POST 以外的 XHR 请求并在请求之后进行重定向，则某些浏览器将使用原始请求方法跟随重定向。这可能会导致不良行为，例如双重删除。**要解决此问题，您可以返回一个`303 See Other`状态代码，随后将使用 GET 请求。**
> 
> ```
>  redirect_to posts_url, status: :see_other
>   redirect_to action: 'index', status: 303 
> ```

来源：[http ://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:47:08.057

解决了虽然不是很好的方式..

创建了以下路线：

```
match 'mostrar_cliente/:id' => 'clientes#show', :via => :delete 
```

然后我将重定向重写为：

```
redirect_to "/mostrar_cliente/#{@tarea.cliente}", :format => :js 
```

不是一个非常干净的解决方案，但按预期工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:25:53.050

您可以在日志中看到，在查询字符串中传递的参数是“方法”。

```
Parameters: {"method"=>"get", "id"=>"12"} 
```

Rails 期望一个名为“_method”的参数来确定动词，因此当您进行重定向时，您需要确保明确发生：

```
redirect_to :controller => "clientes", :action =>"show", :id => @tarea.cliente, :format => :js, '_method' =>:get 
```

# entity - 用于协调两个数据库中凌乱实体的 Google Refine 配方

> ID：10472601
> 
> 赞同：3
> 
> 时间：2012-05-06T17:23:16.153
> 
> 标签：entity, google-refine

我有两个混乱名称的数据库，例如：

*   金达尔，鲍比
*   佛罗里达州州长鲍比·金达尔
*   鲍比·金达尔
*   3M公司
*   3M 智能手机

我需要找到匹配项。谁能指出我或建议如何在 Google Refine 中执行此操作的好方法？

这个链接给了我一个起点，但我可以使用进一步的建议： [http ://blog.ouseful.info/2011/05/06/merging-datesets-with-common-columns-in-google-refine/](http://blog.ouseful.info/2011/05/06/merging-datesets-with-common-columns-in-google-refine/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:04:09.717

您可以尝试我们的 Refine[扩展](http://lab.linkeddata.deri.ie/2010/grefine-rdf-extension/)，特别是查看文档的[对帐](http://lab.linkeddata.deri.ie/2010/grefine-rdf-extension/reconciliationDocs)部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:31:16.860

cell.cross 函数类似于 Excel 中的 vlookup，只有当您的两个单元格相同时才会匹配。如果您想使用此方法，您将需要大量集群和清理您的数据。

我支持迈克尔的回答。尝试协调服务： rdf one 或[open reconcile](http://code.google.com/p/open-reconcile/)。

# html - Liferay Portlet 中从右到左

> ID：10472607
> 
> 赞同：0
> 
> 时间：2012-05-06T17:24:08.207
> 
> 标签：html, css, jsp, liferay

我想在我的 portlet 中从右到左对齐。在普通的 html 页面中测试它是可以的。但是当我将它放入 Liferay portlet 时，它不是从右到左，而是从左到右显示。这是我的代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
.patientInfo
{
    direction:rtl;
    border:2px solid;
    width: 100%;
}
.titile
{
    font-weight:bold;
    padding-right:5px;

}
p
{   
    display:inline; 
}
.patientName
{
    background-color:#0CF;
    direction:rtl;
}
.doctorName
{
    background-color:#0CF;
    direction:rtl;  
}
</style>
</head>
<body>
<div class="patientInfo">
<div class="patientName"><p class="titile">نام بیمار:</p><p> اکبر اسدی</p></div>
<div class="doctorName"><p class="titile">نام دکتر:</p><p>مریم اخیانی</p></div>
</div>
</body> 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:09:45.847

将样式表类放在单独的 css 文件中并将其注册到 中`liferay-portlet.xml`，以便 Liferay 加载它。这是更好的方法，因为 liferay 切断了头部标签。

liferay-portlet.xml：

```
<header-portlet-css>/css/main.css</header-portlet-css> 
```

# asp.net - Asp.net WebApi 支持json、xml、jsonp？

> ID：10472609
> 
> 赞同：0
> 
> 时间：2012-05-06T17:24:27.900
> 
> 标签：asp.net, asp.net-web-api, formatter, content-negotiation

这个问题是特定于**Asp.Net WebApi 的**。

在我的全局文件中，我放了：

```
GlobalConfiguration.Configuration.Formatters.Clear();
GlobalConfiguration.Configuration.Formatters.Add(new JsonpMediaTypeFormatter()); 
```

JsonpMediaTypeFormatter 是我拥有的自定义 Jsonp 格式化程序。

在此之后，当我打电话时，

```
function jsonpCallback(data) {
        alert('in' + data);
        var list = $('#courses');
        for (var i = 0; i < data.length; i++) {
            var course = data[i];
            list.append('<li>' + course.name + '</li>');
        }
    }
$.getJSON("http://localhost:64009/api/courses?callback=?", null, jsonpCallback); 
```

有效。

但是，从我的全局文件中，如果我删除

```
GlobalConfiguration.Configuration.Formatters.Clear(); 
```

然后它不起作用。

如果我想支持多种格式化程序怎么办？因为我可以将 HttpClient 用于 CORS 并要求 xml 或 json 或 jsop？

有人可以请教吗？

# php - JSONPath 查询以获取节点名称？

> ID：10472610
> 
> 赞同：11
> 
> 时间：2012-05-06T17:24:43.573
> 
> 标签：php, json, jsonpath

考虑以下 JSONPath：

```
{
   "result":[
      {
         "type":"Residence",
         "street":"Piazza di Spagna",
         "city":"-4:0"
      },
      {
         "type":"Residence",
         "street":"test",
         "city":"-4:1"
      }
   ]
} 
```

是否可以获得所有节点名称的列表？
例如，我想要一个列表，例如：类型、街道、城市。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-18T14:22:14.670

**尝试这个**

```
$arr = (json_decode($json)->result[0]);
 $array = get_object_vars($arr);
 $properties = array_keys($array);
 print_r($properties);` 
```

输出将是

```
Array
(
    [0] => type
    [1] => street
    [2] => city
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-19T01:37:26.673

在 PHP >= 5.4 上，您可以通过一行代码获取您的密钥：

```
$nodeNames = array_keys( json_decode( $jsonString, True )['result'][0] ); 
```

`**[eval.in demo](https://eval.in/521477)**`

在较低版本（PHP >= 5.2.16）上，您必须将上述代码分成两行：

```
$array = json_decode( $jsonString, True );
$nodeNames = array_keys( $array['result'][0] ); 
```

我使用第二个参数将 JSON 字符串解码为 True 以强制结果为数组，然后调用`array_keys`以获取`array['result'][0]`.

### 编辑：更灵活

您的示例可以如上处理没有问题，但如果原始 JSON 字符串具有不同的键会发生什么？`result`如果第一行中没有所有键，上述解决方案将失败。要获取**所有**密钥，您可以使用以下代码：

```
$array  = json_decode( $jsonString, True );
$nodeNames = array();
foreach( $array['result'] as $row )
{
    $nodeNames = array_unique( array_merge( $nodeNames, array_keys( $row ) ) );
} 
```

`**[eval.in demo](https://eval.in/521892)**`

或者，使用`array_filter`，使用此代码：

```
$array  = json_decode( $jsonString, True );
$nodeNames = array();
array_filter
(
    $array['result'], 
    function( $row )
    {
        global $nodeNames;
        $nodeNames = array_unique( array_merge( $nodeNames, array_keys( $row ) ) );
    }
); 
```

通过这两个等效示例，我处理每一`result`行，合并`$nodeNames`数组中的键并使用`array_unique`删除重复键。

* * *

*   阅读有关[array_keys()的更多信息](http://php.net/manual/en/function.array-keys.php)
*   阅读有关[array_unique()的更多信息](http://php.net/manual/en/function.array-unique.php)
*   阅读有关[array_filter()的更多信息](http://php.net/manual/en/function.array-filter.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-17T06:29:47.727

您可以使用以下函数以数组格式打印所有键

print_r(array_keys($array));

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-19T11:42:55.410

JSON 路径每次都**肯定会遵循该结构吗？**与 Result => Arrays 一样，它们都具有相同的节点。

如果是这样，那么以下将起作用：

```
function getJsonNodes($json) {
    $nodes   = array();
    $decoded = json_decode($json, true);

    if (json_last_error() !== JSON_ERROR_NONE) {
        throw new \InvalidArgumentException('Invalid JSON String passed to getJsonNodes()');
    }

    $result = $decoded['result'];
    if (is_array($result)) {
        $nodes = array_keys($result[0]);
    }

    return $nodes;
} 
```

用法类似于：

```
try {
    $nodes = getJsonNodes($json);
} catch (\InvalidArgumentException $e) {
    echo $e->getMessage();
} 
```

意味着您可以捕获任何可能被传递并与输出混淆的无效 JSON 字符串。

尽管正如我所说，上述解决方案仅在您的 JSON 路径遵循放入 OP 的结构时才有效。

你可以在这里看到它的使用：[https ://ideone.com/dlvdu2](https://ideone.com/dlvdu2)

希望它对任何一种方式都有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-20T09:29:08.447

是否有可能获得清单`all the node-names`？

```
$object = json_decode($json);
$json_array = $object->result;
foreach ($json_array as $key => $value) {
    $object_var = get_object_vars($value);
    $object_key = array_keys($object_var);
    var_dump($object_key);//will get all node_names!
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-18T07:26:50.913

尝试这个

```
$result[0].type , $result[0].street, $result[0].city 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-02-20T11:14:07.353

请检查下面的代码..希望会奏效

```
<?php
$text[]=array(
            result=>array(
                "type"=>"Residence",
                "street"=>"pizza",
                "city"=>"ini"
            ),
            array(
                "type"=>"Residence",
                "street"=>"pizza",
                "city"=>"ini"
            )
        );

echo json_encode($text);
?> 
```

# database - 什么是数据库模式分解，我们为什么需要它们？

> ID：10472611
> 
> 赞同：0
> 
> 时间：2012-05-06T17:24:44.553
> 
> 标签：database, normalization, decomposition

*   什么是数据库模式分解？
*   为什么我们需要分解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:29:59.453

这可能意味着您从数据库的一个通用模式开始，并将其分解为更具体的模式。

可以使用在模式上定义的 FK 约束来确定更具体的模式的良好选择，例如连接依赖项等。

你为什么需要它？我相信它对规范化和可管理性有很大帮助。

# ios - ios 5 中视图控制器上的简单“等待”动画

> ID：10472612
> 
> 赞同：3
> 
> 时间：2012-05-06T17:24:47.430
> 
> 标签：ios

我有一个简单的 ViewController，它有 5 个标签，由于正则表达式解析，每个标签都会在运行时动态填充数据。我想在标签获取数据时显示任何简单的“等待”动画，以告诉用户正在进行处理。

我阅读了很多 SO 解决方案，它们或多或少地尝试做类似的事情，但我无法获得最简单的工作代码。

首先，我不需要完成多少工作，即没有进度条。等一下就够了。稍后可能我想添加那个逻辑，我现在需要一个开始！

[这](https://stackoverflow.com/questions/9902496/how-can-i-display-a-waiting-progress-bar-before-the-application-started-on-an-ip)应该有效，但它没有:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:36:32.157

您是否尝试过添加[UIActivityIndi​​catorView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:46:46.820

非常好的加载指示器项目... [https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

如果您需要比以前关于 UIActivityIndi​​cator 的答案更简单的东西是正确的

# java - 在 Java 中为游戏制作 Overlay UI 的有效方法是什么？

> ID：10472616
> 
> 赞同：0
> 
> 时间：2012-05-06T17:25:05.673
> 
> 标签：java, user-interface, overlay

在java中为游戏制作Overlay UI的有效方法是什么？（什么样的面板，如果我应该使用面板..等）

我们会尝试 JPanel，但这没有用，因为我无法将面板放置在我想要的正确位置而不创建阻止主游戏屏幕的额外面板。例如：[http ://www.rubinary.com /wp-content/photos/wow_ui_labels.jpg](http://www.rubinary.com/wp-content/photos/wow_ui_labels.jpg)技能在哪里，在哪里显示HP，地图和东西，这就是我所说的UI

# ios - 如何解决 iOS 中的 AVCaptureSession v AVAudioSession 冲突？

> ID：10472618
> 
> 赞同：3
> 
> 时间：2012-05-06T17:25:13.690
> 
> 标签：ios, avcapturesession, avaudiosession

我正在尝试在视图控制器中运行 AVCaptureSession，但在同一时间内，我还从使用 AVAudioSession 的库中调用了一个函数。我似乎无法从调试器中获得太多信息，除了它在我调用这个特定库的函数时完全崩溃。该库是 libpd：

[https://github.com/libpd](https://github.com/libpd)

并将 AVAudioSession 称为 sharedInstance。我称 libpd 为：

```
[self.audioController configurePlaybackWithSampleRate:44100 numberChannels:2 inputEnabled:YES mixingEnabled:YES] 
```

所以启用了混合，但以防万一，我重新编译了它，以便在它初始化时，我这样做：

```
 UInt32 doSetProperty = 1;
    AudioSessionSetProperty (kAudioSessionProperty_OverrideCategoryMixWithOthers,  sizeof(doSetProperty), &doSetProperty); 
```

但是，没有运气。将 libpd 的调用移动到视图控制器中的 viewWillAppear 也不起作用。但是，如果我将调用 libpd 的代码从我的视图控制器中取出，并将其放入 didFinishLaunchingWithOptions 内的应用程序委托中，它就会启动得很好，并且这两个会话似乎可以共存而不会崩溃。

我错过了一些关于 AVCaptureSession 和混合的东西吗？如何让两个会话共存？我没有使用 AVCapture 来捕获音频，只有相机输入，所以我不应该能够以某种方式同时进行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T22:32:20.200

启动摄像头会话后，启动音频会话（可以设置为支持混音）。我试过了，您需要在开始音频会话之前等待相机设置好（例如等待几秒钟）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:42:04.217

图书馆是否有可能假设没有其他音频会话处于活动状态并调用`AudioSessionInitialize`？

根据[文档](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html)“您可以根据需要激活和停用音频会话（请参阅 AudioSessionSetActive），但应该只初始化一次。”

我猜这个库的作者没有包含正在进行的音频会话的功能......但是只要你的应用程序总是点击那个函数调用，潜入那里并注释掉初始化行就很容易了使用正在运行的音频会话（否则只需检查一个`if`语句以查看您是否有音频会话，如果没有，则初始化一个等）

# python - python的最佳树小波包

> ID：10472620
> 
> 赞同：0
> 
> 时间：2012-05-06T17:25:24.683
> 
> 标签：python, matlab, quadtree, wavelet

我有一个与小波包分解有关的问题。

我需要从完整（完整）树（四叉树）中计算出最佳树（基础）。这可以通过 MATLAB 的函数[besttree](http://www.mathworks.com/help/toolbox/wavelet/ref/besttree.html)来完成。不幸的是，我不能在我的程序中使用 m 文件。

我在 python 上编写程序，[pywt](http://www.pybytes.com/pywavelets/)引起了我的注意，但是在这个模块中没有计算最佳树的函数。是否有任何模块、库或一些示例在 C++/C 或 python 上计算出最佳树小波包分解（四叉树）？是否有可能将 m 文件转换为 C++/C 或 python？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:03:01.103

请检查此链接：

要将 Matlab 代码编译为 C++，请使用 mcc 命令： [http ://www.mathworks.de/help/toolbox/compiler/mcc.html;jsessionid=351100b26b237828d538922ffe69](http://www.mathworks.de/help/toolbox/compiler/mcc.html;jsessionid=351100b26b237828d538922ffe69)

要在 Matlab 中使用 c++ 库，请使用 Mex： http: [//www.mathworks.de/support/tech-notes/1600/1605.html](http://www.mathworks.de/support/tech-notes/1600/1605.html)

# c# - 亚马逊产品广告 API C#

> ID：10472622
> 
> 赞同：7
> 
> 时间：2012-05-06T17:25:40.533
> 
> 标签：c#, amazon, amazon-product-api

有人可以告诉我使用亚马逊产品广告 API 的 C# 示例，例如查找商品。由于更改，我发现的所有内容现在都无法正常工作。

谢谢！

编辑：

最常见的错误是“消息正文序列化失败：ItemSearchRequest1 无法创建临时类”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-22T08:17:55.307

您可以使用以下[nuget](https://www.nuget.org/packages/Nager.AmazonProductAdvertising/)包。

```
PM> Install-Package Nager.AmazonProductAdvertising 
```

**搜索示例**

```
var authentication = new AmazonAuthentication();
authentication.AccessKey = "accesskey";
authentication.SecretKey = "secretkey";

var client = new AmazonProductAdvertisingClient(authentication, AmazonEndpoint.DE);
var result = await client.SearchItemsAsync("canon eos"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T20:16:11.010

这里有一个 C# 示例：

[http://aws.amazon.com/code/Product-Advertising-API/3941](http://aws.amazon.com/code/Product-Advertising-API/3941)

FWIW，[我提到的 AWS 线程](https://forums.aws.amazon.com/thread.jspa?threadID=72429)包括以下解决方法：

> 以下是自 2012 年 1 月 31 日起在 Visual Studio for .Net 客户端中解决此问题的步骤：
> 
> 1) 单击解决方案资源管理器中包含亚马逊服务参考的项目的“显示所有文件”按钮。
> 
> 2) 展开引用并在编辑器中打开 AWSECommerceService.wsdl 文件
> 
> 3) 在第 584 行将“maxOccurs”更改为“1”。

```
<xs:element minOccurs="0" maxOccurs="1" name="ImageSets"> 
```

> 4) 保存 AWSECommerceService.wsdl 文件
> 
> 5）右键单击Reference.svcmap，然后单击“运行自定义工具”
> 
> 6) 展开 Reference.svcmap 并打开 Reference.cs 或 Reference.vb

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-29T10:15:36.793

如果你想使用 Html REST 而不是 Soap/Wsdl，我在我的博客上放了一个为 2011 API 和 Visual Studio 2012 更新的示例：[“最新的 CSharp REST 示例”](http://www.bgsoftfactory.net/index.php/how-to-send-an-authenticated-rest-request-to-the-amazon-product-advertising-api-using-c/)

# mysql - 使用 EJB 查询调用 MySql 例程/存储过程

> ID：10472623
> 
> 赞同：1
> 
> 时间：2012-05-06T17:25:41.960
> 
> 标签：mysql, stored-procedures, ejb, entitymanager

经过一番折腾，我的 webapp 已经接近最终版本了，但它仍然需要一些东西。

所以我需要使用“复杂”查询来获取一些结果。

此查询需要调用 MySql 例程并且必须返回 a`Map`而不是 a `List`。

这是查询：

```
SELECT d.id, contaOccorrenze(d.descrizione, '" + query + "') AS 'occorrenze' FROM Dispensa d WHERE d.tag LIKE '%" + query + "%' OR d.titolo LIKE '%" + query + "%' OR d.descrizione LIKE '%" + query + "%' 
```

`query`我正在寻找的词在哪里，并且`contaOccorrenze`是我需要调用的例程。

此查询在 Workbench 中运行良好，因此查询不是我的问题。

这是我尝试执行查询后出现的堆栈跟踪：

```
 Caused by: java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager: 
Exception Description: Syntax error parsing the query [SELECT d.id, contaOccorrenze(d.descrizione, 'lunga') AS 'occorrenze' FROM Dispensa d WHERE d.tag LIKE '%lunga%' OR d.titolo LIKE '%lunga%' OR d.descrizione LIKE '%lunga%'], line 1, column 28: unexpected token [(].
Internal Exception: NoViableAltException(83@[()* loopback of 383:9: (d= DOT right= attribute )*])
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1477)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.createQuery(EntityManagerWrapper.java:436)
    at facade.DispensaFacade.findLikeComplex(DispensaFacade.java:101)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.GeneratedMethodAccessor80.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    ... 77 more
Caused by: Exception [EclipseLink-8025] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Syntax error parsing the query [SELECT d.id, contaOccorrenze(d.descrizione, 'lunga') AS 'occorrenze' FROM Dispensa d WHERE d.tag LIKE '%lunga%' OR d.titolo LIKE '%lunga%' OR d.descrizione LIKE '%lunga%'], line 1, column 28: unexpected token [(].
Internal Exception: NoViableAltException(83@[()* loopback of 383:9: (d= DOT right= attribute )*])
    at org.eclipse.persistence.exceptions.JPQLException.unexpectedToken(JPQLException.java:372)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.handleRecognitionException(JPQLParser.java:320)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.addError(JPQLParser.java:246)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.reportError(JPQLParser.java:363)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.pathExprOrVariableAccess(JPQLParser.java:1436)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.arithmeticPrimary(JPQLParser.java:4720)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.arithmeticFactor(JPQLParser.java:4660)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.arithmeticTerm(JPQLParser.java:4546)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.simpleArithmeticExpression(JPQLParser.java:4462)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.scalarExpression(JPQLParser.java:4834)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.selectExpression(JPQLParser.java:1269)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.selectItem(JPQLParser.java:1169)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.selectClause(JPQLParser.java:1108)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.selectStatement(JPQLParser.java:359)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.document(JPQLParser.java:281)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.parse(JPQLParser.java:134)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.buildParseTree(JPQLParser.java:95)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:215)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:190)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:142)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:126)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1475)
    ... 100 more
Caused by: NoViableAltException(83@[()* loopback of 383:9: (d= DOT right= attribute )*])
    at org.eclipse.persistence.internal.libraries.antlr.runtime.DFA.noViableAlt(DFA.java:159)
    at org.eclipse.persistence.internal.libraries.antlr.runtime.DFA.predict(DFA.java:116)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.pathExprOrVariableAccess(JPQLParser.java:1408)
    ... 117 more 
```

这是我正在尝试使用的完整方法（将结果`List`转换为 a`HashMap`是我发现谷歌搜索的一种方式，但我很确定有更好的方法`HashMap`从我的查询中获取 a ）

```
public HashMap<Integer, Integer> findLikeComplex(String query) {
        String SQLquery = "SELECT d.id, contaOccorrenze(d.descrizione, '" + query + "') AS 'occorrenze' FROM Dispensa d WHERE d.tag LIKE '%" + query + "%' OR d.titolo LIKE '%" + query + "%' OR d.descrizione LIKE '%" + query + "%'";
        return (HashMap<Integer, Integer>) getEntityManager().createQuery(SQLquery).getResultList();        
    } 
```

我还想通过将查询语句更改为来更改我`HashMap`的 from 。`HashMap<Integer, Integer>``HashMap<Dispensa, Integer>``d.id``*`

它会起作用还是我要求太多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:08:15.417

你应该尝试 `getEntityManager().createNativeQuery()`

# ruby-on-rails - 在 Ruby on Rails 中共享权限（CanCan 还是 CanTango？）

> ID：10472626
> 
> 赞同：0
> 
> 时间：2012-05-06T17:25:50.060
> 
> 标签：ruby-on-rails, cancan

我正在开始我的第一次完全跳入 RoR 并且一直在寻找 CanCan 的权限。我对可以允许以下内容的东西感兴趣：

一个用户可以属于一个网络，或者只是一个单独的用户。用户可能是管理员或只是该网络中的用户。用户为自己或他们的网络创建事件。网络可以控制其用户可以读取/编辑的事件。

但是，如果我希望能够与不在我的网络中的另一个用户共享对单个事件的访问权限，那我无法弄清楚。每个事件是否应该有一个可接受的可以读取的用户/网络列表和另一个可以写入的用户/网络列表？具有用户/网络及其权限级别的哈希表会是最好的吗？

如果还有其他帖子，请随时指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:44:32.393

CanCan 绝对比 CanTango 好！

# vba - 擦除 PowerPoint 笔绘图和注释

> ID：10472627
> 
> 赞同：0
> 
> 时间：2012-05-06T17:25:50.717
> 
> 标签：vba, powerpoint

我想以编程方式擦除 PowerPoint 2003/2007/2010 中幻灯片上的用户笔画和注释，以替代发送“E”键击。

我发现`SlideShowView.EraseDrawing`只会擦除由`SlideShowView.DrawLine`.

示例代码：

`PowerPoint.Application.ActivePresentation.SlideShowSettings.Run.View.EraseDrawing`

感谢您的回答！**罗比东**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:54:02.917

这使用户可以选择保留或删除墨迹，然后在幻灯片放映视图中返回到原始幻灯片。仍然不是你所追求的，真的，但它是我迄今为止所能达到的最接近的：

```
Private Sub CommandButton1_Click()
    Dim x As Long
    x = SlideShowWindows(1).View.Slide.SlideIndex

    With SlideShowWindows(1)
        .View.Exit
    End With

    With ActivePresentation
        .SlideShowSettings.Run
    End With

    SlideShowWindows(1).View.GotoSlide (x)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:05:57.437

您是否要在他们停止幻灯片放映并选择保留绘图后删除笔绘图？在这种情况下，请在您要从中擦除绘图的任何幻灯片上调用下面的 EraseInkOnSlide 函数。

```
Sub TestMe()
    EraseInkOnSlide ActivePresentation.Slides(1)
End Sub

Sub EraseInkOnSlide(oSl As Slide)
' Erases any INK shapes drawn by the user and 
' retained when the user quits the slide show
    Dim oSh As Shape
    Dim x As Long
    With oSl.Shapes
    For x = .Count To 1 Step -1
        If .Item(x).Type = 23 Then
            .Item(x).Delete
        End If
    Next
    End With
End Sub 
```

我怀疑您必须暂时退出幻灯片放映模式，然后以 slideshwo 模式返回当前幻灯片，才能使其在幻灯片放映模式下工作；PPT 显然不考虑幻灯片形状集合中的墨水形状部分，直到用户结束显示并选择保留形状。诡异的。

# django - 模型表单工厂未正确显示

> ID：10472633
> 
> 赞同：0
> 
> 时间：2012-05-06T17:26:25.017
> 
> 标签：django, django-forms

我正在使用`model form set`. 如果我使用`formset_factory`它会显示这样的表单[，这](http://imgur.com/n8wWG)是正确的，但如果我使用`modelformset_factory`它会显示来自模型的所有对象，[就像这样](http://imgur.com/zX6v0)。[应该](http://imgur.com/n8wWG)是。我错过了什么吗？谢谢

形式

```
class MyImageForm(ModelForm):
  class Meta:
    model = MyImage
    exclude = ('test', 'user')

MyImageFormSet = modelformset_factory(MyImage, MyImageForm) 
```

模板

```
{% for form in formset %}
{{ form.non_field_errors }}
<tr>
    <td>{{ form.image }}</td>
    <td></td>
</tr>
{% endfor %} 
```

{{ formset.management_form }}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:15:02.950

根据[关于 modelformset 的 Django 文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#changing-the-queryset)，您可以像以前一样创建 MyImageFormSet，但之后只需对其进行过滤（并可能返回新的 modelformset）。

像往常一样创建模型表单集：

```
MyImageFormSet = modelformset_factory(MyImage, MyImageForm) 
```

但是使用带有空查询的模型集，如下所示：

```
MyImageFormSet(queryset=MyImage.objects.none()) 
```

# ruby-on-rails - Sqlite3 DB 仅存储 ID 而不是其他任何内容

> ID：10472639
> 
> 赞同：0
> 
> 时间：2012-05-06T17:27:11.860
> 
> 标签：ruby-on-rails, sqlite, ruby-on-rails-3.2

我的数据库有问题，因为它似乎只存储新条目的 id 并在我的表单中显示它们，而不是我要求的 :name 属性。如果我使用我的表单或通过 sqlite3 浏览器查看条目。只显示身份证。

这是我的迁移文件..

```
class CreateClients < ActiveRecord::Migration
  def change
    create_table :clients do |t|
      t.string :name
      t.string :detail
      t.string :more_detail
      t.string :more_details

      t.timestamps
    end
  end
end 
```

我的表格..

```
<%= form_for @client, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :name, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :name, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :detail, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :detail, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :more_detail, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :more_detail, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :more_details, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :more_details, :class => 'text_field' %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                clients_path, :class => 'btn' %>
  </div>
<% end %> 
```

还有我的看法。。

```
 ...
   <% @client.each do |client| %>
      <tr>
        <td><%= link_to client.name, client_path(client) %></td>
        <td>
      ... 
```

而不是显示名称（例如`foo`），然后是指向该客户详细信息的链接。它向我显示`/clients/3`，当我单击它时，它会将我带到一个名称和详细信息字段为空的页面，即使它们是在保存条目时指定的。

如果我使用 sqlite3 浏览器。我可以看到条目已保存，但每个条目都有一个`null`除 ID 之外的所有列的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:46:09.767

我想我知道你的问题是什么。最新的 Rails 版本默认具有防止批量分配的属性保护，因此您需要指定希望从模型外部访问哪些属性，如下所示：

```
class Client < ActiveRecord::Base 
  attr_accessible :name, :detail, :more_detail
end 
```

阅读安全指南的这一[部分](http://guides.rubyonrails.org/security.html#mass-assignment)。PS：创建新记录时控制台是否抛出任何错误？

# drag-and-drop - 在 ExtJS 4 的树形面板中创建拖放功能时“this.el is null”

> ID：10472640
> 
> 赞同：2
> 
> 时间：2012-05-06T17:27:20.087
> 
> 标签：drag-and-drop, extjs4, treepanel

我正在尝试在`treepanel`ExtJS 4 中实现拖放功能。基本上我想将一些节点从树形面板拖到文本框中。我对在 ExtJS 4 中实现拖放的方式感到非常困惑，但后来我也尝试编写一些代码。我不确定它是否正确。

我的代码如下：

`CustomChart.js`文件内容

```
Ext.define('dd.view.CustomChart', {
    extend : 'Ext.panel.Panel',
    alias : 'widget.customChart',
    layout : {
        type : 'vbox',
        align : 'stretch'
    },

    initComponent : function() {
        this.items = [
            {
                xtype : 'textfield',
                name : 'values',
                fieldLabel : 'Drop values here'
            }
        ];
        this.callParent(arguments);
    }
}); 
```

我`CustomChart`在文件中使用这个面板`AttritionViewer`如下：

```
Ext.define('dd.view.AttritionViewer', {
    extend : 'Ext.panel.Panel',
    alias : 'widget.attritionViewer',
    title : 'View attrition by dimensions',

    layout : 'border',

    initComponent : function() {
        this.items = [
            {
                xtype : 'treepanel',
                title : 'Select dimensions',
                store : 'Dimensions',
                rootVisible : false,
                region : 'west',
                height : '100%',
                width : '20%',
                viewConfig : {
                    plugins : {
                        ptype : 'treeviewdragdrop',
                        ddGroup: 'GridExample'
                    }
                }
            },
            {
                xtype : 'panel',
                region : 'center',
                    layout : {
                    type : 'vbox',
                    align : 'stretch'
                },
                items : [
                    {
                        xtype : 'customChart',
                        flex : 1
                    }
                ]
            }
        ];
        this.callParent(arguments);
    }
}); 
```

正如您在上面的代码中看到的，我已经为树面板设置了`ViewConfig`和`ddGroup`。现在我不确定将以下代码放在哪里，所以我把它放在`init()`控制器的方法中。`init()`我的控制器的方法如下所示：

```
var customChartEl =  Ext.widget('customChart');

var formPanelDropTarget = Ext.create('Ext.dd.DropTarget', customChartEl, {
    ddGroup: 'GridExample',

    notifyEnter: function(ddSource, e, data) {
        console.log('inside notifyEnter() method');
        //Add some flare to invite drop.
    /*    formPanel.body.stopAnimation();
        formPanel.body.highlight(); */
    },
    notifyDrop  : function(ddSource, e, data){
        console.log('inside notifyDrop() method');
        return true;
    }        
}); 
```

在这段代码之后，我`this.el is null`在`ext-debug.js (line 7859)`. 我不知道下一步该做什么。

请指导我如何从文本字段内的树形面板中拖动节点。

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:06:26.497

检查此链接， [http](http://examples.extjs.eu/?ex=tree2divdrag) ://examples.extjs.eu/?ex=tree2divdrag 我也在尝试一项类似的任务。如果我得到一些输出，我可以帮助你。如果您解决了您的问题，请在此处记下，这对我也有帮助。

也检查这个样本的来源。[http://docs.sencha.com/ext-js/4-0/#!/example/dd/dragdropzones.html](http://docs.sencha.com/ext-js/4-0/#!/example/dd/dragdropzones.html)。

最良好的祝愿。

# java - 在android中填充短信

> ID：10472643
> 
> 赞同：1
> 
> 时间：2012-05-06T17:27:22.740
> 
> 标签：java, android, sms

这是我们应用程序中的代码片段。

```
public void onClick(View v) {
    // TODO Auto-generated method stub

    Intent sms = new Intent(Intent.ACTION_VIEW, Uri.parse("sms:" ));
    sms.putExtra("sms_body", text);
    startActivity(sms);
} 
```

这适用于股票 SMS 应用程序，但是测试人员报告说，使用 handcent SMS 他们会收到一条空白消息。这促使我尝试使用谷歌语音，在那里也收到一条空白消息。

有什么方法可以让我的消息文本与所有这些其他 SMS 应用程序一起使用？

我们有剪贴板功能，所以一个糟糕的解决方法至少是让用户按下剪贴板按钮，然后使用他们选择的消息传递应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:22:46.980

Android 尝试尽可能多地重用 Intent。在某些情况下，当您启动一个意图时，android 不会创建新的意图并重用以前的意图。为避免这种情况，请设置此 Intent 标志：

```
smsIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

此标志强制 Android 在堆栈顶部使用 Intent 的 Activity 创建一个新任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:32:12.050

当您传递此意图时，它将被传递给所有已注册活动以接收它的应用程序。换句话说，您必须使用您打算处理您的意图的应用程序注册的意图

# google-app-engine - 如何按名称检索 blobstore 文件

> ID：10472644
> 
> 赞同：0
> 
> 时间：2012-05-06T17:27:36.020
> 
> 标签：google-app-engine, blobstore

我写了以下代码：

```
 FileService fileService = FileServiceFactory
                 .getFileService();

                 // Create a new Blob file with mime-type "text/plain"
                 AppEngineFile file = fileService.createNewBlobFile(
                 "image/jpeg", name);

                 if(null!=file)
                 log.warn(file.toString());

                 FileReadChannel readChannel =
                 fileService.openReadChannel(
                 file, true);

                 // Again, different standard Java ways of reading from
                 // the
                 // channel.
                 BufferedReader reader = new BufferedReader(Channels
                 .newReader(readChannel, "UTF8"));
                 String line = reader.readLine();

                 resp.setContentType("text/plain");
                 resp.getWriter().println(line);

                 readChannel.close(); 
```

但不幸的是，它给了我以下例外：

> 来自 com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:597) 的 com.google.appengine.api.files.FileServiceImpl.makeSyncCall 的 servlet com.google.appengine.api.files.FinalizationException 未捕获的异常(FileServiceImpl.java:574) 在 com.google.appengine.api.files.FileServiceImpl.open(FileServiceImpl.java:496) 在 com.google.appengine.api.files.FileServiceImpl.openForRead(FileServiceImpl.java:456) 在com.google.appengine.api.files.FileServiceImpl.openForRead(FileServiceImpl.java:447) 在 com.google.appengine.api.files.FileServiceImpl.openReadChannel(FileServiceImpl.java:202) 在 com.myfileshost.MyfileshostServlet.doGet( MyfileshostServlet.java:362) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:617) 在 javax.servlet.http.HttpServlet。service(HttpServlet.java:717) at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) at com .google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.apphosting.runtime.jetty .SaveSessionFilter.doFilter(SaveSessionFilter.java:35) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java :43) 在 org.mortbay.jetty.servlet 的 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)。ServletHandler.handle(ServletHandler.java:388) at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) at org .mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418) 在 com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle (AppVersionHandlerMap.java:249) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server.handle(Server.java:326) 在 org.mortbay.jetty。 com.google.apphosting.runtime.jetty.RpcRequestParser 的 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 的 HttpConnection.handleRequest(HttpConnection.java:542)。在 com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135) 在 com.google.org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 的 parseAvailable(RpcRequestParser.java:76) .apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:446) 在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) 在 com.google.tracing.TraceContext$TraceContextRunnable$1.run( TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext $AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google。tracking.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251) 在 java.lang.Thread.run(Thread.java:679)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:41:55.763

当一个文件通过 GAE FileService 创建时，它必须在被读取之前完成。

Javadoc[`openReadChannel(..)`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/files/FileService#openReadChannel%28com.google.appengine.api.files.AppEngineFile,%20boolean%29)明确指出，`FinalizationException`如果文件未最终确定，则此方法会抛出。

以下是有关如何创建文件、完成文件并从中读取的完整示例：[https ://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)

# delphi - Windows 7 上的 WIA 2 -- Delphi

> ID：10472647
> 
> 赞同：4
> 
> 时间：2012-05-06T17:28:16.577
> 
> 标签：delphi, windows-7, camera, wia, acquisition

Windows 7 上的 WIA 2 未检测到我的相机，而 Windows XP 上的 WIA 1 检测到它。

我尝试以管理员身份运行我的程序。

我的相机是：

华硕usb2网络摄像头。

德尔福返回消息：

> （像这样）没有指定类型的任何 wia 设备

或者

> 地址访问冲突......在模块......

我使用这段代码：

```
procedure TForm1.Button9Click(Sender: TObject);
Const
   wiaFormatBMP ='{B96B3CAB-0728-11D3-9D7B-0000F81EF32E}';
var
   CommonDlg: ICommonDialog;
   AImage: IImageFile;
   ImagePath: String;
   DeviceManager1 :iDeviceManager;
begin
   CommonDlg := createOleObject('WIA.CommonDialog') as ICommonDialog;
   DeviceManager1 := createOleObject('WIA.DeviceManager') as  iDeviceManager;
   edit1.Text:=  inttostr( DeviceManager1.DeviceInfos.Count);
   AImage := CommonDlg.ShowAcquireImage(UnspecifiedDeviceType,UnspecifiedIntent,
                                        MaximizeQuality,wiaFormatBMP,true,False,True);
   ImagePath := 'C:\temp\test.bmp';
   AImage.SaveFile(ImagePath);
end; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-14T15:46:44.287

我最近在使用 WIA 和 Win7 时也有类似的经历。

我最终使用的是 DirectX 解决方案。

[Delphi Basics - DirectX 网络摄像头捕获](http://www.delphibasics.info/home/delphibasicsprojects/directxdelphiwebcamcaptureexample)

我不记得我最初是如何找到这个项目的，但在 Win7 下，即使是我在办公室里发现的较旧的网络摄像头，它也能正常工作。

我建议您查看下载文件中的 Demo3，因为它有我需要的最好、最简单的示例。YMMV。

（编辑）我的 WIA 问题源于网络摄像头制造商在 Win7 下不支持 WIA 或 Twain。

# php - 在 Joomla 中成功注册后将用户重定向到自定义 URL

> ID：10472649
> 
> 赞同：2
> 
> 时间：2012-05-06T17:28:23.467
> 
> 标签：php, joomla, joomla1.5, joomla1.7

我希望我的用户在成功注册 Joomla 后重定向到自定义 URL。我找不到任何选择！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:15:01.147

如果您使用 Joomla! 的内置菜单来加载注册页面，或者从登录模块到达那里，则无法重定向（这很奇怪，因为您可以在登录模块中登录后设置重定向） .

最好的起点是查看[Joomla的“](http://extensions.joomla.org/)[身份验证](http://extensions.joomla.org/extensions/access-a-security/site-access/authentication)”部分中的现有解决方案！[扩展目录](http://extensions.joomla.org/)。似乎列出了几个既支持旧的 1.5 样式站点又支持新的 1.7/2.5 站点的列表。

*（顺便说一句，如果您仍在使用 1.7，您应该更新到最新的 2.5，因为 1.7 行中存在严重的安全问题。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T08:26:24.680

在您的代码集中执行以下操作；

```
$app=JFactory::getapplication();
$app->redirect('index.php?option=com_users&view=login')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T23:21:00.857

您可以使用插件来实现这一点（至少在 Joomla 3.x 中 - 不确定这将在多远的时候立即起作用）。这里的关键是 onUserAfterSave 事件，它告诉您用户是新用户还是现有用户。

我前段时间写了下面的代码，所以不记得重定向无法从 onUserAfterSave 事件处理程序中完成的确切原因，但我认为重定向随后会在核心 Joomla 用户管理代码的其他地方被覆盖，如果你尝试从那里开始，因此在会话中保存一个标志并在以后的事件处理程序中检查它。

```
class PlgUserSignupRedirect extends JPlugin
{
    public function onUserAfterSave($user, $isnew, $success, $msg)
    {
        $app = JFactory::getApplication();

        // If the user isn't new we don't act
        if (!$isnew) {
            return false;
        }

        $session = JFactory::getSession();
        $session->set('signupRedirect', 1);

        return true;
    }

    function onAfterRender() {
        $session = JFactory::getSession();
        if ($session->get('signupRedirect')) {
            JFactory::getApplication()->redirect('/my-post-signup-url');
            $session->clear('signupRedirect');
        }
    }
} 
```

# xcode - Xcode 4.3.2 错误信息

> ID：10472654
> 
> 赞同：0
> 
> 时间：2012-05-06T17:29:17.900
> 
> 标签：xcode

我的项目因以下消息而崩溃：clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我无法弄清楚我做错了什么。我已经删除了所有有问题的代码（我认为），我什至将所有内容都删除回原来的类，但我仍然收到消息。有什么建议么？谢谢。

这是整个日志：

```
Ld /Users/xxxx/Library/Developer/Xcode/DerivedData/NewTest-gwytsbxrryxjejdbvifxuyomdpug/Build/Products/Debug-iphonesimulator/NewTest.app/NewTest normal i386
    cd "/Users/xxxx/Desktop/NewTest copy"
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/xxxx/Library/Developer/Xcode/DerivedData/NewTest-gwytsbxrryxjejdbvifxuyomdpug/Build/Products/Debug-iphonesimulator -F/Users/xxxx/Library/Developer/Xcode/DerivedData/NewTest-gwytsbxrryxjejdbvifxuyomdpug/Build/Products/Debug-iphonesimulator -filelist /Users/xxxx/Library/Developer/Xcode/DerivedData/NewTest-gwytsbxrryxjejdbvifxuyomdpug/Build/Intermediates/NewTest.build/Debug-iphonesimulator/NewTest.build/Objects-normal/i386/NewTest.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/xxxx/Library/Developer/Xcode/DerivedData/NewTest-gwytsbxrryxjejdbvifxuyomdpug/Build/Products/Debug-iphonesimulator/NewTest.app/NewTest

ld: duplicate symbol _OBJC_IVAR_$_ViewController.testprop3 in /Users/xxxx/Library/Developer/Xcode/DerivedData/NewTest-gwytsbxrryxjejdbvifxuyomdpug/Build/Intermediates/NewTest.build/Debug-iphonesimulator/NewTest.build/Objects-normal/i386/OtherClass.o and /Users/xxxx/Library/Developer/Xcode/DerivedData/NewTest-gwytsbxrryxjejdbvifxuyomdpug/Build/Intermediates/NewTest.build/Debug-iphonesimulator/NewTest.build/Objects-normal/i386/ViewController.o for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)

Duplicate symbol _OBJC_IVAR_$_ViewController.testprop3 in /Users/xxxx/Library/Developer/Xcode/DerivedData/NewTest-gwytsbxrryxjejdbvifxuyomdpug/Build/Intermediates/NewTest.build/Debug-iphonesimulator/NewTest.build/Objects-normal/i386/OtherClass.o and /Users/xxxx/Library/Developer/Xcode/DerivedData/NewTest-gwytsbxrryxjejdbvifxuyomdpug/Build/Intermediates/NewTest.build/Debug-iphonesimulator/NewTest.build/Objects-normal/i386/ViewController.o for architecture i386 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:44:36.403

看来您已经双重定义了 testprop3。

# entity-framework-4 - 在我的 asp.net mvc 应用程序中将 Float 转换为 Double 是否有风险

> ID：10472655
> 
> 赞同：1
> 
> 时间：2012-05-06T17:29:19.103
> 
> 标签：entity-framework-4, sql-server-2008-r2, type-conversion

我在**Sql server 2008**`MedicalLabResult`上创建了一个表，其中有一个数据类型为.**`Result``Float`**

 **但是当我使用 Entity Framework 映射我的数据库时，DBContext 模板会自动将`Double`数据类型分配给我`Result`在模型类上的字段。所以如果我尝试写一些东西： -

```
float result = MedicalLabResult.Single().Result; 
```

然后visual studio会报错`that it can not implicitly convert float to double`，所以我不得不修改上面的：-

```
double result = MedicalLabResult.Single().Result; 
```

但是由于`Result`数据库中字段的数据类型是`Float`,那么转换**为****, 丢失任何数据****会有风险吗？`Float``Double`** BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:35:47.353

实体框架设计师做的一切都是正确的。Sql server`Float`数据类型实际上是 64 位双精度浮点数，它在 CLR 中的等价物是`System.Double`. 如果要存储单精度浮点数，则必须`real`在 sql 中使用。它被映射到 CLR `System.Single`。

有关 SQL Server 和 CLR 数据类型的进一步参考，您可以转到[此处](http://msdn.microsoft.com/en-us/library/bb386947.aspx)**

# java - 嵌套地图中的java迭代器（Map 2D）

> ID：10472656
> 
> 赞同：0
> 
> 时间：2012-05-06T17:29:25.660
> 
> 标签：java, map, iterator, nested

我想知道：如何遍历 2D 地图？我有一个中央地图：

```
private final Map<String, Map<String, String>> centralMap = 
    new HashMap<String, Map<String, String>>(); 
```

其中包含另一张地图：

```
Map<String,String> nestedMap = new HashMap<String, String>(); 
```

作为Value，第二个是在“put”方法中创建的，所以在构造函数中，我只有centralMap。现在我想重新定义这个方法并获得地图的完整条目（2个键和每个元素的值）

```
public Iterator<Entry> iterator() 
```

我应该如何进行？如果可能，如何通过迭代器删除元素而不会出现问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:36:44.247

迭代器旨在对集合进行操作，例如第一个映射的键集，或嵌套映射的值（映射的集合）。您不能期望迭代器 renove 方法能够理解您的复杂结构。

我建议您为此构建自己的类，并使用自己的便捷方法来执行您所描述的操作。

另外，在这里尝试一下：确保您不只是想要拥有多张地图。如果是这样，请看一下，例如，在[guava 的 HashMultimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashMultimap.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T17:40:43.097

您应用与迭代单个地图相同的过程，只需执行两次：

```
public void printNestedMap(Map<String, Map<String, String>> map)
  Iterator it = map.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry pairs = (Map.Entry)it.next(); // <- pairs.getValue() is a map
        System.out.println("Key1: " + pairs.getKey());
        //print the inner Map
        printMap((Map<String, String>)pairs.getValue());
        it.remove(); // avoids a ConcurrentModificationException
    }
} 
```

**编辑**

实际上，最好将单个映射上的迭代移动到在这种情况下要调用的不同方法。

```
public void printMap(Map<String, String>> map)
{
   Iterator it = map.entrySet().iterator();
   while(it.hasNext())
   {
      Map.Entry pairs = (Map.Entry)it.next(); // <- pairs.getValue() is a String
      System.out.println("Key2: " + pairs.getKey() + " Value2: " + pairs.getValue());
      it.remove();
   }
} 
```

**编辑 2：测试程序**

```
 import java.util.*;
   public class TestMap
   {
      public static void main(String[] args)
      {
         Map<String, String> innerMap              = new HashMap<>();
         Map<String, Map<String, String>> outerMap = new HashMap<>();

         innerMap.put("Key1", "Val1");
         innerMap.put("Key2", "Val2");
         innerMap.put("Key3", "Val3");
         innerMap.put("Key4", "Val4");

         outerMap.put("OuterKey1", innerMap);
         printNestedMap(outerMap);
      }

      public static void printNestedMap(Map<String, Map<String, String>> map)
      {
         Iterator it = map.entrySet().iterator();
         while (it.hasNext()) {
            Map.Entry pairs = (Map.Entry)it.next(); // <- pairs.getValue() is a map
            System.out.println("Key1: " + pairs.getKey());
            //print the inner Map
            printMap((Map<String, String>)pairs.getValue());
            it.remove(); // avoids a ConcurrentModificationException
         }
      }

      public static void printMap(Map<String, String> map)
      {
         Iterator it = map.entrySet().iterator();
         while(it.hasNext())
         {
            Map.Entry pairs = (Map.Entry)it.next(); // <- pairs.getValue() is a String
            System.out.println("Key2: " + pairs.getKey() + " Value2: " + pairs.getValue());
            it.remove();
         }
      }
   } 
```

输出：

```
Key1: OuterKey1
Key2: Key2 Value2: Val2
Key2: Key1 Value2: Val1
Key2: Key4 Value2: Val4
Key2: Key3 Value2: Val3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T18:06:45.597

如果您想获取包含两个键和值的元素，那么创建一个将两个键组合在一个元素中`Map.Entry`的类并将其用作单个映射中的键而不是嵌套映射实际上会更加自然。`Pair<String, String>`

如果这样做，您的主要结构将是 a`Map<Pair<String, String>, String>`并且使用该`Map.entrySet()`方法将为您提供 a `Set<Map.Entry<String, String>, String>`，您可以从中获得一个迭代器，该迭代器大致提供您所追求的内容。

如果您出于其他原因需要 a `Map<String, Map<String, String>>`，也可以通过相当简单的代码将其转换为上述结构，这可能是从中获取信息的最明智的方式。

**编辑说明：**

上面描述的`Pair`类本质上与 相同`Map.Entry`，因此您可以通过构建一个`Map<Map.Entry<String, String>, String>`. 我认为它使代码不太清晰，但它当然可以在功能上等效。

**示例代码**

在下面的代码中，我将`Pair`类定义为内部静态（对于实际使用，您可能希望提取为独立类），并编写了一个转换，它采用您描述的嵌套映射，将其转换为 I' ve 建议，并在转换后的映射的条目上使用迭代器来打印值。

迭代器当然可以用于其他事情，`convert`方法和`Pair`类是通用的。

```
import java.util.*;

public class TestMap
{
    public static void main(String[] args)
    {
        Map<String, String> innerMap1 = new HashMap<String, String>();
        Map<String, String> innerMap2 = new HashMap<String, String>();
        Map<String, Map<String, String>> outerMap = new HashMap<String, Map<String, String>>();

        innerMap1.put("InnerKey1", "Val1");
        innerMap1.put("InnerKey2", "Val2");
        innerMap1.put("InnerKey3", "Val3");
        innerMap1.put("InnerKey4", "Val4");

        innerMap2.put("InnerKey5", "Val5");
        innerMap2.put("InnerKey6", "Val6");
        innerMap2.put("InnerKey7", "Val7");
        innerMap2.put("InnerKey8", "Val8");

        outerMap.put("OuterKey1", innerMap1);
        outerMap.put("OuterKey2", innerMap2);

        Map<Pair<String, String>, String> convertedMap = convert(outerMap);
        for (Map.Entry<Pair<String, String>, String> entry: convertedMap.entrySet()) {
            System.out.println(String.format("OuterKey: %s, InnerKey: %s, Value: %s",
                    entry.getKey().getFirst(),
                    entry.getKey().getSecond(),
                    entry.getValue()
            ));
        }
    }

    private static <K1,K2,V> Map<Pair<K1, K2>,V> convert(Map<K1, Map<K2,V>> nestedMap) {
        Map<Pair<K1, K2>, V> result = new HashMap<Pair<K1, K2>, V>();
        for (Map.Entry<K1, Map<K2, V>> outerEntry: nestedMap.entrySet()) {
            final K1 outerKey = outerEntry.getKey();
            for (Map.Entry<K2, V> innerEntry: outerEntry.getValue().entrySet()) {
                final K2 innerKey = innerEntry.getKey();
                final V value = innerEntry.getValue();
                result.put(new Pair<K1, K2>(outerKey, innerKey), value);
            }
        }
        return result;
    }

    public static class Pair<T1, T2> {

        private T1 first;
        private T2 second;

        public Pair(T1 first, T2 second) {
            this.first = first;
            this.second = second;
        }

        public T1 getFirst() {
            return first;
        }

        public T2 getSecond() {
            return second;
        }

        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (o == null || getClass() != o.getClass()) return false;

            Pair pair = (Pair) o;

            if (first != null ? !first.equals(pair.first) : pair.first != null) return false;
            if (second != null ? !second.equals(pair.second) : pair.second != null) return false;

            return true;
        }

        @Override
        public int hashCode() {
            int result = first != null ? first.hashCode() : 0;
            result = 31 * result + (second != null ? second.hashCode() : 0);
            return result;
        }

    }
} 
```

**上下文中的用法说明：**

在您当前的代码中，您有一个类，其中包含一个字段，该字段`centralMap`是旧嵌套形式的地图，以及一个用于地图大小的整数计数器。

这个包含类有一个添加条目的方法，如下所示：

```
@Override
public String put(final String row, final String column, final String value) {
    /**
     * Second map which is contained by centralMap, that contain Strings as Keys
     * and Values.
     */
    Map<String, String> nestedMap;

    if (centralMap.containsKey(row))
        nestedMap = centralMap.get(row);
    else
        nestedMap = new HashMap<String, String>();
    if (!nestedMap.containsKey(column))
        counter++;
    centralMap.put(row, nestedMap);
    return nestedMap.put(column, value);
} 
```

如果根本不使用嵌套映射，而是将此字段更改为建议形式的映射，则此方法会变得更简单：

```
@Override
public String put(final String row, final String column, final String value) {
    Pair<String, String> key = new Pair(row, column);
    if (centralMap.contains(key)
        counter++;
    centralMap.put(key, value);
} 
```

而且您实际上不再需要计数器，因为它始终包含与`centralMap.size()`.

**更新：**

从昨天进行但现在被删除的编辑中，我现在很清楚（从编辑历史中）您想要构建一个迭代器，它以正确的顺序委托给映射的所有迭代器，并返回一个包含键和价值。

这当然是可能的，如果以后有时间，我可能会为其添加一些示例代码。正如另一个答复中指出的那样，该`iterator.remove()`方法可能是不可能的或不自然的。

同时，您的要求（如对同一其他回复的评论所述）与 guava's 提供的要求非常相似`Table`。那是开源的，看看它可能会给你一些想法。你可以[在这里下载番石榴的源代码](http://search.maven.org/remotecontent?filepath=com/google/guava/guava/11.0.2/guava-11.0.2-sources.jar)。

具体来说，在 guava 中`StandardTable`，有一个内部类`CellIterator`，如下所示：

```
 private class CellIterator implements Iterator<Cell<R, C, V>> {
    final Iterator<Entry<R, Map<C, V>>> rowIterator
        = backingMap.entrySet().iterator();
    Entry<R, Map<C, V>> rowEntry;
    Iterator<Entry<C, V>> columnIterator
        = Iterators.emptyModifiableIterator();

    @Override public boolean hasNext() {
      return rowIterator.hasNext() || columnIterator.hasNext();
    }

    @Override public Cell<R, C, V> next() {
      if (!columnIterator.hasNext()) {
        rowEntry = rowIterator.next();
        columnIterator = rowEntry.getValue().entrySet().iterator();
      }
      Entry<C, V> columnEntry = columnIterator.next();
      return Tables.immutableCell(
          rowEntry.getKey(), columnEntry.getKey(), columnEntry.getValue());
    }

    @Override public void remove() {
      columnIterator.remove();
      if (rowEntry.getValue().isEmpty()) {
        rowIterator.remove();
      }
    }
  } 
```

您不能只复制此代码，因为它依赖于番石榴中的其他内容，但它显示了您必须做的基本模式。

# sql - SQL server 2008 快速检索

> ID：10472666
> 
> 赞同：1
> 
> 时间：2012-05-06T17:31:28.913
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我必须快速准确地处理和检索大型数据集。性能是必须的。我尝试了很多技术，但速度不够快......

有任何想法吗？？

编辑：类似于[http://msdn.microsoft.com/en-us/library/ms188774.aspx](http://msdn.microsoft.com/en-us/library/ms188774.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:40:46.043

使用`SET ROW COUNT`只会限制返回的行而不提高性能，您可以通过`TOP`在查询中使用关键字来获得相同的结果。

由于您正在处理大量数据并试图提高性能，您可以尝试以下一些技术：

*   向查询中引用的列添加索引。

*   查看查询的执行计划并查看最昂贵的操作。

*   使用存储过程，如果数据库引擎检测到具有相同参数的查询，您将获得执行计划和缓存的好处。

*   对表进行分区，这可以通过根据日期范围将大量数据拆分为多个表来提高性能。

*   运行数据库调整向导。

# windows-8 - WinRT 中的 GridSplitter 在哪里？

> ID：10472669
> 
> 赞同：4
> 
> 时间：2012-05-06T17:31:45.003
> 
> 标签：windows-8, visual-studio-2012, winrt-xaml

我正在开发一个应用程序来尝试掌握 Windows 8。我想在`GridSplitter`我的 XAML 表单中添加一个，但该控件似乎不可用。

我拥有的 XAML 是

```
<Page
    x:Class="TweetiCon.BlankPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:TweetiCon">

    <Grid Background="{StaticResource ApplicationPageBackgroundBrush}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <GridSplitter Grid.Column="1" Orientation="Vertical"/>
    </Grid>
</Page> 
```

但该`GridSpliter`元素导致应用程序无法编译，因为

> 名称 GridSplitter 不存在于命名空间[http://schemas.microsoft.com/winfx/2006/xaml/presentation](http://schemas.microsoft.com/winfx/2006/xaml/presentation)

但我很确定确实如此。这就是它在普通 WPF 应用程序中的位置。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:59:11.363

RE：*在 Windows Phone 或 WinRT 中*

确实没有 GridSplitter，但直到现在……
如果您正在搜索 GridSplitter，您可以查看 CodePlex 上的 WinRT.Xaml.Toolkit。

[http://winrtxamltoolkit.codeplex.com/](http://winrtxamltoolkit.codeplex.com/)

并寻找**CustomGridSplitter**控件。

我已经在 WinRT [RP 和 RTM] 版本中测试了代码，它完成了这项工作。
你可以试一试；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:35:13.600

从这篇博[文](http://blog.xyzzer.me/2012/01/16/gridsplitters-part-3-limiting-the-range-of-a-gridsplitter/)

> Windows Phone 或 WinRT 中没有 GridSplitter。我检查了 MinWidth/MaxWidth 然后（在 Windows Phone 和 WinRT 中）在 Width=”Auto” 且内容可变大小的列上做了什么，看起来 MinWidth 确实可以使列保持给定大小 - 该列确实超出了MaxWidth，尽管文档说：“MinWidth 值优先于 MaxWidth 值，而 MaxWidth 值又优先于 Width 值”。

开始提到的“文档”是这个[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.controls.columndefinition.maxwidth%28v=vs.95%29.aspx)

# php - shell_exec 不在后台运行？

> ID：10472670
> 
> 赞同：6
> 
> 时间：2012-05-06T17:31:45.470
> 
> 标签：php, exec, background-process, shell-exec

我有以下完美执行但不在后台执行的操作？它实际上会停止页面加载，直到完成，这是不好的。

```
shell_exec("/usr/bin/php /home/public_html/pages/test/backg.php {$user_info} {$user_info2} {$user_info3} &"); 
```

我也试过

```
exec("/usr/bin/php /home/public_html/pages/test/backg.php {$user_info} {$user_info2} {$user_info3} &"); 
```

我以为

> &

意味着它会执行然后让保持页面继续进行吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T18:34:01.350

```
exec(sprintf("%s > %s 2>&1 & echo $! >> %s", $cmd, $outputfile, $pidfile)); 
```

[php执行一个后台进程](https://stackoverflow.com/questions/45953/php-execute-a-background-process)

```
exec("/usr/bin/php /path/background.php > /dev/null 2>&1 &"); 
```

# html - CSS文件没有被刷新

> ID：10472671
> 
> 赞同：0
> 
> 时间：2012-05-06T17:31:49.460
> 
> 标签：html, css, filezilla

所以我有了自己的网站，我只是对一个 HTML 文件和全局 CSS 样式表文件进行了一些调整。在我的电脑上，它看起来像我想要的那样。然而，在我的网站上，旧的设置仍然适用 - 新的 HTML 文件正确显示，但新的 CSS 设置没有被调整。我尝试了以下方法：

*   清除了我浏览器的缓存
*   检查我的缩放是否为 100%
*   从服务器上删除了我的 CSS 文件（奇怪的是，我的网站看起来与 CSS 文件仍在服务器上的情况完全相同）
*   在用旧文件替换新的 CSS 文件之前，在 FileZilla 中刷新我的地图

这里发生了什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:54:49.330

您可以在 css 链接后附加一个参数以使浏览器强制刷新。

每次你需要一个文件refresed add ?

```
"style.css?1"
"style.css?2"
"style.css?3" 
```

同样正如上面提到的 Edu，请确保您正在复制和链接正确的文件。

# cakephp - 在 CakePHP 中使用 AJAX 检索数据

> ID：10472672
> 
> 赞同：2
> 
> 时间：2012-05-06T17:32:05.457
> 
> 标签：cakephp

我正在尝试使用 jQuery 和 CakePHP 的组合来检索一些数据。

我有一个 feed() 方法，可以从数据库 JSON 编码发回数据。当我使用浏览器访问 URL 时，该方法运行良好。

```
function feed($id = null) {
    $this->layout = 'ajax';
    $data = array(
        'test' => true
    );
    echo (json_encode($data));
} 
```

我也有一个应该检索数据的方法，但由于某种原因它不是。

```
var address = '/person_availabilities/feed/1';

// JavaScript Document

$(document).ready(function() {
    var events = doAJAXcall(address);
    alert(events)
}

function doAJAXcall(url) {
    $.ajax({
        type : 'POST',
        url : url,
        dataType : 'json',
        data: {
        },
        success : function(data){
            return data;
        },
        error : function(XMLHttpRequest, textStatus, errorThrown) {
            //$('#login_error').show();
        }
    });
} 
```

我怀疑 URL 可能是错误的，因为 xdebug 没有接收到请求。

有人对我有什么建议吗？我已经找了四个多小时了。

编辑：这是页面 localhost/Testing/person_availabilities/feed 的地址

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:36:40.727

如果您能够使用浏览器查看它，则说明您使用的是 GET 请求：

尝试：

```
$.getJSON(url, function(data){
   alert(data);
}); 
```

编辑（附加信息）：

不确定您是否还有问题；但听起来您根据您的示例在 ajax 调用中使用了错误的 url（缺少 Controller 部分）：

```
var address = '/person_availabilities/feed/1'; 
```

代替：

```
var address = '/Testing/person_availabilities/feed/1'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:00:55.623

我看到您的 AJAX 请求存在两个问题。第一个需要了解 AJAX 请求本质上是异步的。因此，首字母缩写词 AJAX 代表异步 JavaScript 和 XML。异步组件是必须理解的关键。

您有一个向服务器发送 AJAX 请求的函数，但在您的成功回调函数中，您正在尝试返回一个值。您不能这样做，因为该函数实际上在触发成功回调之前很久就返回了。

```
function doAJAXcall(url, callback) {
    $.ajax({
        type : 'GET',
        url : url,
        success : function(data){
            // return data; // you cannot return data here
            alert(data);  // should print [ Object ]
            try {
                alert(JSON.stringify(data));  // should print JSON, assuming you're getting JSON
            } catch(e) {
                alert("Error trying to parse JSON. Is your server returning JSON? " + e.message);
            }
            if(callback) callback(data);  // fire a callback function to process the data            
        },
        error : function(XMLHttpRequest, textStatus, errorThrown) {
            //$('#login_error').show();
            alert("error :: " + textStatus + " : " + errorThrown);
        }
    });
} 
```

在上面的代码中，我首先创建了一个警报，以便您查看是否引发了任何错误。其次，我添加了一个回调函数，它会在调用成功后触发，以便您可以处理数据。

最后，您需要确保您使用的 URL 是正确的。您可以使用 Chrome 或 Firebug 调试器的 NET 选项卡来查看在 AJAX 请求触发时请求是否正在发送到服务器。查找 500 错误或 404 错误或告诉您请求不成功的内容。如果是这样，请检查 URL 以确保它与您在从 Web 浏览器的地址栏发出 GET 请求时使用的 URL 相同。

**什么是回调函数？**

这是一个作为参数传递给另一个函数的函数。然后，您可以调用该函数并确保它是动态的，这意味着您可以通过简单地将不同的函数作为回调传递来更改函数的行为。

在你的情况下：

```
doAJAXcall(url, function() { alert("I am a callback"); }); 
```

在警报之后，将导致在您的成功回调中触发此警报。JavaScript 中的函数被称为“一等对象”，这意味着它们可以通过引用作为参数传递给另一个函数！

有关回调函数的更多信息，请参阅此链接：

[https://stackoverflow.com/a/3616266/552792](https://stackoverflow.com/a/3616266/552792)

# html - IE7 按钮样式不正确，CSS 样式错误？

> ID：10472675
> 
> 赞同：0
> 
> 时间：2012-05-06T17:32:43.890
> 
> 标签：html, css, internet-explorer, testing, internet-explorer-7

您好，我正在 IE7 中测试我的网站，而用于**创建帐户**的橙色链接框未正确显示，橙色矩形的底部被切断。是否有针对此的 CSS 修复？如果您有 IE9，您可以在 F12 > 兼容模式设置为 IE7 中查看它，然后查看橙色按钮。

样式化 a 元素的规则在这里：

理想情况下，我需要一个 CSS 解决方案以及它出错的原因 -

```
#home-content a {

  padding:6px;
  color: #FFFFFF;
  text-decoration: none;
  background-color: #DA7700;
  height:40px;
    font-family: Verdana, Arial;
 font-size: 14px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T17:58:31.727

对于左键：“创建帐户”：再添加两个 att：

```
display: block;
text-align: center; 
```

删除这个：

```
height:40px; 
```

我认为这应该可以解决您的问题。右键也是一样（只有没有高度的填充，对齐中心并显示为块）

# opencl - 用于搜索集合的 OpenCL？

> ID：10472678
> 
> 赞同：0
> 
> 时间：2012-05-06T17:33:14.110
> 
> 标签：opencl, gpgpu

我有一组排序的无符号短裤数组，例如：

```
12, 222, 333, 444, 555
78, 456, 123, 987, 231 
```

我希望找到与一组给定谓词匹配的第一个或所有数组：例如：[idx[1] = 222, idx[3] = 444]，将匹配第一行，因为索引 1 处的值是222，索引 3 处的值为 444。

这是一项我会看到通过 OpenCL 在 GPU 上运行搜索的优势的任务吗？数据量为 1 到 2 亿条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:40:03.887

当然，如果您有足够的行使其值得并行化，则可以在单独的内核中测试每一行（因为它们是独立的），如果您有不错的 GPU，则可以获得很好的加速。

# javascript - 联系表格上的反机器人垃圾邮件保护

> ID：10472679
> 
> 赞同：0
> 
> 时间：2012-05-06T17:33:28.450
> 
> 标签：javascript, spam, bots

我在我的 antibot 联系表中使用它，但我仍然收到大量邮件：

```
<script type="text/javascript">
var a = Math.ceil(Math.random() * 10);
var b = Math.ceil(Math.random() * 10);      
var c = a + b 
function DrawBotBoot()
{
 document.write("Antibot "+ a + " + " + b +" = ");
 document.write("<input id='BotBootInput' type='text' maxlength='2' size='2'/>");
}    
function ValidBotBoot(){
    var d = document.getElementById('BotBootInput').value;
    if (d == c) return true;        
    return false;

}
</script> 
```

有人可以帮我做这个要求让我们说“今年是什么”或类似的东西吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:38:19.883

使用 CAPTCHA 保护自己免受机器人攻击。[reCaptcha 之](http://www.captcha.net/)类的东西将满足您的需求。这将大大减少表单中的垃圾邮件数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T18:01:47.500

对于出于任何原因不想使用 reCaptcha 并保留基本数学问题的人，这可能是限制机器人数量的解决方案： [http ://www.lateralcode.com/basic-math-security/](http://www.lateralcode.com/basic-math-security/)

# algorithm - 在 kNN 中处理不完整数据（数据稀疏性）

> ID：10472681
> 
> 赞同：7
> 
> 时间：2012-05-06T17:33:44.397
> 
> 标签：algorithm, machine-learning, classification, sparse-matrix, knn

我正在尝试使用 knn 创建一个简单的推荐系统。

假设我有一张桌子：

```
User | Book1 | Book2 | Book3 | Book4 | Book5 | Book6 | Book7 |
1    | 5     | ?     | 3     | ?     | 4     | 3     | 2     |
2    | 3     | 4     | ?     | 2     | 3     | 4     | 2     |
3    | 4     | 2     | 1     | ?     | ?     | 3     | 3     |
4    | 2     | 5     | 3     | ?     | 4     | 1     | 1     |
5    | 1     | 1     | 4     | 3     | 1     | ?     | 1     |
6    | 5     | 2     | 5     | 4     | 4     | 2     | ?     | 
```

因此，如果要找到用户 1 的可能分数，我想只取用户 1 与其他用户阅读的书籍的绝对差异。然后我将使用该差异来找出该列表中的哪个用户与用户 1“最接近”。但在现实世界中，会有更多的 ?/unknown 分数。那么**在使用knn的时候如何处理那些未知的分数呢？**

我没有任何代码，因为我还没有真正理解如何实现它。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T10:52:40.530

您没有“未知功能”，您有不完整的数据点。

这实际上是 kNN 中众所周知的问题，并且有一个经过彻底验证的模式来处理它。

尽管该问题实际上是一个“不完整数据”问题，但在 kNN 上下文中，它通常（*通常？*）被称为*稀疏*问题。

在实践中，构建 kNN 模型的稀疏性问题是 kNN 的症结所在，除了对构成模型的数据进行有效存储/检索的可能例外。

例如，考虑 Amazon.com 的*推荐引擎*，其中产品评级是由*列*组成的用户特征和由*行*组成的用户，为了使这个矩阵 100% 完整，每个亚马逊客户都必须购买和审查亚马逊销售的每一个产品. 该矩阵的实际稀疏度必须 > 95%。

最常见的技术（据我所知仍然是最先进的）被称为***NNMA***或非*负矩阵逼近*。这种技术也经常被*错误地*称为 NNMF，其中 F 代表*因式分解*。（NNMA 基于分解技术，但结果不是原始数据矩阵的因数。）我提到这一点是因为这个替代术语虽然不正确，但被广泛使用，所以我会将它包含在我的搜索引擎查询中。

从本质上讲，这种技术可以用来从矩阵中去除稀疏性，或者换一种说法，填充缺失的单元格（即，R 行的客户没有重新查看 C 列的产品）。

[您可以在Albert Au Yeung Ching-man 的博客](http://www.albertauyeung.com/mf.php)中找到完整的 nnma 实现，包括随附的教程（python + numpy 中）。

或者，有几个 python 包（可通过 PyPI 获得）包含 NNMA 的打包代码。我只使用了其中之一[PyMF](http://code.google.com/p/pymf/)，您可以在 Google Code 中找到它。

为了让您了解 NNMA 如何发挥其魔力，这是**我在 python + NumPy 中简单但完整的 NNMA 实现**：

```
import numpy as NP

def cf(q, v):
    """ the cost function """
    qv = (q - v)**2
    return NP.sum(NP.sum(qv, axis=0))

def nnma(d, max_iter=100):
    x, y = d.shape
    z = y
    w = NP.random.rand(x, y)
    h = NP.random.rand(y, z)
    for i in range(max_iter):
        wh = NP.dot(w, h)
        cost = cf(d, wh)
        if cost == 0: 
            break
        hn = NP.dot(w.T, d)
        hd = NP.dot(NP.dot(w.T, w), h)
        h *= hn/hd
        wn = NP.dot(d, h.T)
        wd = NP.dot(NP.dot(w, h), h.T)
        w *= wn/wd
    return NP.dot(w, h) 
```

要使用此***NNMA 函数，***只需为每个缺失的单元格传入一个带有“0”的二维数组（矩阵）（换句话说，您的数据矩阵，为每个缺失值插入一个“0”）：

```
>>> d    # the original (sparse) data matrix with missing cells denoted by "0"s

  array([[ 7.,  0.,  4.,  7.,  0.,  1.],
         [ 3.,  9.,  7.,  3.,  1.,  7.],
         [ 4.,  4.,  3.,  7.,  3.,  9.],
         [ 4.,  8.,  0.,  9.,  2.,  1.],
         [ 6.,  3.,  9.,  5.,  9.,  3.],
         [ 6.,  1.,  4.,  4.,  1.,  0.],
         [ 0.,  4.,  8.,  6.,  0.,  5.],
         [ 9.,  0.,  6.,  0.,  5.,  2.],
         [ 6.,  8.,  4.,  6.,  3.,  7.],
         [ 3.,  6.,  3.,  8.,  7.,  2.]])

>>> d1 = nnma(d)     # call nnma, passing in the original data matrix

>>> d1    # the approximated data matrix with all missing values populated

   array([[ 6.998,  0.29 ,  3.987,  7.008,  0.292,  0.796],
          [ 2.989,  8.92 ,  6.994,  3.02 ,  1.277,  7.053],
          [ 4.007,  4.496,  2.999,  7.01 ,  3.107,  8.695],
          [ 4.005,  8.019,  0.254,  9.002,  1.917,  0.89 ],
          [ 5.998,  3.014,  9.001,  4.991,  8.983,  3.052],
          [ 5.992,  1.077,  4.007,  3.976,  0.753,  0.464],
          [ 0.346,  3.436,  7.993,  5.988,  0.194,  5.355],
          [ 9.001,  0.124,  5.997,  0.375,  5.02 ,  1.867],
          [ 6\.   ,  7.994,  3.998,  6\.   ,  2.999,  7.009],
          [ 2.995,  6.022,  3.001,  7.987,  6.939,  2.185]]) 
```

如您所见，结果还不错，特别是对于非常简单的实现。所有缺失的项目都被填充，其余的值非常接近原始数据矩阵中的相应值，例如，第 0 列第 0 行在原始数据矩阵中是 7.0，在近似值中是 6.998。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T08:57:30.100

您缺少的是测量距离的方法。Pearson 相关是应用最广泛的方法之一。余弦距离是另一个。L1 距离（差异的绝对值之和）通常不会给出好的结果。

如果你用谷歌搜索，你会发现根据你使用的相似距离处理缺失值的推荐方法是什么。例如，在 Pearson 中，仅使用两个用户共同评分的书籍来衡量相关性，因此忽略了缺失值。这是有道理的，就好像两个用户阅读的一小部分书籍是共同的，这很可能意味着他们有不同的品味。在余弦距离中，缺失值可以假设为零。

另一种常用的方法是估算缺失值。例如，您可以首先使用 Pearson 查找书籍之间的相似性，然后为每个人预测缺失的评分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T17:45:34.383

KNN 通常对#features 很敏感。在现实生活中，我希望你会有更多的书。

我会尝试更改功能空间：与其为每个文档都设置一个功能，不如使用书籍列表作为功能进行研究。

```
Feature1 = { books with score 1 }
Feature2 = { books with score 2 }
... 
```

现在，您可以定义每个特征的距离 - 可能通过使用每两个 2 个用户列表之间的[召回率和精度。](http://en.wikipedia.org/wiki/Precision_and_recall)

这种方法的另一个优点是您可以轻松地赋予特征权重-也许排名为 5 的书籍列表比排名为 3 的书籍列表信息量更大？

缺点很明显，如果用户 A、B 将一本书评为 4,5，您将不会获得任何提升 - 但是也可以通过添加另一个功能来解决，比较两个用户之间的这些列表。

**免责声明**：我从未测试过这种方法，也不知道它会如何表现 - 但我认为这是一种值得研究的方法。我认为除了经验测试之外，没有什么好的方法可以确定这个建议是否会产生好的结果，这可以使用训练集中的[交叉验证来完成。](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)

# scala - Scala REPL 的选项卡补全在这里告诉我什么？

> ID：10472682
> 
> 赞同：10
> 
> 时间：2012-05-06T17:33:47.760
> 
> 标签：scala, read-eval-print-loop, tab-completion, scala-2.9

在阅读 Cay S. Horstmann 的“不耐烦的 Scala”时，我注意到第一章的第一个练习揭示了一些有趣的东西。

1.  在 Scala REPL 中，键入 3\. 后跟 Tab 键。可以应用哪些方法？

当我这样做时，我得到以下信息

```
斯卡拉> 3。
% & * + - /              
> >= >> >>> ^ asInstanceOf   
isInstanceOf toByte toChar toDouble toFloat toInt          
toLong toShort toString unary_+ unary_- unary_~        
|       

```

但我注意到，如果我第二次点击 Tab，我会得到一个稍微不同的列表。

```
斯卡拉> 3。
!= ## % & * +              
- / >= >> >>> ^ asInstanceOf   
等于 getClass hashCode isInstanceOf toByte toChar         
toDouble toFloat toInt toLong toShort toString       
一元_+ 一元_- 一元_~ |    

```

REPL 想在这里告诉我什么？第二次出现的不同方法有什么特别之处吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T18:14:42.363

在 REPL 中按两次制表符[会提高完成的详细程度](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/compiler/scala/tools/nsc/interpreter/CompletionAware.html)：

> 如果 "methodName" 在`z`的完成中，并且`verbosity > 0`指示选项卡已连续按下两次，则我们调用`alternativesFor` 并显示重载方法签名列表。

[解释器源](https://github.com/scala/scala/blob/master/src/compiler/scala/tools/nsc/interpreter/JLineCompletion.scala)中的以下方法指示在何时`verbosity == 0`（即，当您只点击一次选项卡并且没有获得`alternativesFor`版本时）过滤方法完成的内容：

```
def anyRefMethodsToShow = Set("isInstanceOf", "asInstanceOf", "toString")

def excludeEndsWith: List[String] = Nil

def excludeStartsWith: List[String] = List("<") // <byname>, <repeated>, etc.

def excludeNames: List[String] =
  (anyref.methodNames filterNot anyRefMethodsToShow) :+ "_root_"

def exclude(name: String): Boolean = (
  (name contains "$") ||
  (excludeNames contains name) ||
  (excludeEndsWith exists (name endsWith _)) ||
  (excludeStartsWith exists (name startsWith _))
) 
```

因此，通过一个选项卡，您将获得由解释器开发人员认为合理且有用的一些规则过滤的方法。两个选项卡为您提供未经过滤的版本。

# ios - iOS：如何指向当前 TableViewCell 上的当前控件

> ID：10472683
> 
> 赞同：1
> 
> 时间：2012-05-06T17:33:48.943
> 
> 标签：ios, cocoa-touch, uitableview

上周六我也在问类似的问题，但看起来聪明的人在烧烤派对上。没有得到答案。

我的问题是我需要在 UITableViewCell 上放置 UISwitch 和两个 UIButton，当 UISwitch 改变状态时，这些 UIButton 应该出现或消失。这些单元格不用于导航到任何地方，因此我仅将它们用于信息呈现，并且不使用

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

![在此处输入图像描述](../Images/8ec8d91fee550d43cd0097518903cc51.png)

在 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 方法中，我以编程方式创建了所需的控件，并为每个控件分配了标记值和操作：@selector。

现在在其他方法中，我管理了如何从当前行获取 itemID。就像在这个方法中一样：

```
-(void)setItem:(UISwitch*)sender
{
int n;
UITableViewCell *cell;
if(sender.tag==9001)
{
    cell=((UITableViewCell*)[sender superview]);
    n=([self.tableView indexPathForCell:cell].row);
}
item=[self.arr objectAtIndex:n];

NSDate *today=[NSDate date];
NSDateFormatter *formatter =[[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterMediumStyle];
NSString *now =[formatter stringFromDate:today];

if(sender.on)
{
    DBAccess *access=[[DBAccess alloc]init];
    [access setItemON:item.itemID date:now];
    //qualityBtn.hidden=NO;
    [qualityBtn setTitleColor:[UIColor blackColor] forState:normal];
    [qualityBtn setTitle:@"UNDEF" forState:normal];
}
else 
{
    DBAccess *access=[[DBAccess alloc]init];
    [access setItemOFF:item.itemID];
}
} 
```

所以，我的问题是当这种方法有效时，其他单元格上的 qualityBtn:s 也会获得标题等，但我需要当前控件上的当前按钮会由于方法的逻辑而改变。那么，如何指出它只会更改放置在当前单元格上的控件而忽略其他控件的方法。

先感谢您。

编辑：

@property(nonatomic,strong)UIButton *qualityBtn; 是的，它是全球性的。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
item=[self.arr objectAtIndex:[indexPath row]];

static NSString *CellIdentifier = @"Cell";
ItemCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

self.switchView = [[UISwitch alloc] initWithFrame:CGRectMake(7, 8, 79, 27)];
[switchView addTarget:self action:@selector(setItem:) forControlEvents:UIControlEventValueChanged];
[switchView setTag:9001];

qualityBtn=[UIButton buttonWithType:UIButtonTypeRoundedRect];
[qualityBtn addTarget:self 
               action:@selector(setQuality:)
 forControlEvents:UIControlEventTouchDown];

qualityBtn.frame = CGRectMake(236, 8, 72, 21);
qualityBtn.titleLabel.font = [UIFont systemFontOfSize:12];
[qualityBtn setTag:9002];

itemMemoBtn=[UIButton buttonWithType:UIButtonTypeCustom];
[itemMemoBtn addTarget:self 
                action:@selector(setItemMemo:)
      forControlEvents:UIControlEventTouchDown];
itemMemoBtn.frame = CGRectMake(274, 43, 34, 30);
[itemMemoBtn setTag:9003];
[itemMemoBtn setImage:[UIImage imageNamed:@"comment-icon"] forState:normal];

lblDate=[[UILabel alloc]initWithFrame:CGRectMake(14, 34, 72, 21)];
lblDate.font=[UIFont systemFontOfSize:9];
[lblDate setTag:9003];

[cell addSubview:switchView];
[cell addSubview:qualityBtn];
[cell addSubview:itemMemoBtn];
[cell addSubview:lblDate];
[cell setIndentationWidth:45];
[cell setIndentationLevel:1];

lblDate.text=item.date;
cell.lblKM.text=item.kmRef;
cell.lblInfo.text=item.info;
if(item.dateFrom.length>0 && item.dateUntil.length>0)
{
    cell.lblYears.text=[NSString stringWithFormat:@"%@ - %@",item.dateFrom,item.dateUntil];
}
if(item.dateUntil.length<1)
{
    cell.lblYears.text=item.dateFrom;
}

if(item.mintMark.length<1)
{
    //cell.mintmarksImageView.hidden=YES;
}
cell.lblMintmarks.text=item.mintMark;

if(item.memo.length>0)
{
    cell.lblMemoStatus.text=@"YES";
}
else 
{
    cell.lblMemoStatus.text=@"NO";
}

cell.lblRarity.text=item.rarity;

if(item.isAvailable==0)
{ 
    [switchView setOn:NO];
    //qualityBtn.hidden=YES;
    //lblDate.hidden=YES;
    qualityBtn.titleLabel.text=@"UNDEF";
}
else {
    [switchView setOn:YES];
   // lblDate.hidden=NO;
    NSString *quality=nil;
    switch(item.quality)
    {
        case 1:
        {
            quality=@"UNDEF";
            break;
        }
        case 2:
        {
            quality=@"G";
            break;
        }
        case 3:
        {
            quality=@"VG";
            break;
        }
        case 4:
        {
            quality=@"F";
            break;
        }
        case 5:
        {
            quality=@"VF";
            break;
        }
        case 6:
        {
            quality=@"XF";
            break;
        }
        case 7:
        {
            quality=@"UNC";
            break;
        }
        case 8:
        {
            quality=@"PROOF";
            break;
        }
    }
    [qualityBtn setTitleColor:[UIColor blackColor] forState:normal];
    [qualityBtn setTitle:quality forState:normal];
}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:55:47.343

不要在委托方法中向单元格添加子视图。您必须将 UITableViewCell 子类化（例如：MCMyCustomTableViewCell，在其中创建您的元素，以便它可以重用（通过 dequeue 方法）。完成后，在单元格中创建一个具有属性的变量（例如 @property（非原子，强) NSInteger cellIndex;) 在执行 cellForRowAtIndexPath: ... 添加目标到控制器中的按钮以及状态更改或按下按钮时必须填写：

```
- (void)didClickButton:(UIButton *)sender{
    NSInteger index = [(MCMyCustomTableViewCell *)sender.superview cellIndex];
    // Place for your code here
} 
```

和开关一样:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:03:42.633

我建议您扩展您的 UITableViewCell 子类并为您的开关和按钮设置属性。像这样的东西：

```
@interface YourCustomCell: UITableViewCell
@property(strong,nonatomic) UISwitch *switchView
@property(strong,nonatomic) UIBtton *qualityBtn
@property(strong,nonatomic) UIBtton *memoBtn
@end 
```

在 cellForRowAtIndexPath: 中，您将执行以下操作：

```
cell.switchView = [[UISwitch alloc] initWithFrame:CGRectMake(7, 8, 79, 27)];
[cell.switchView addTarget:self action:@selector(setItem:) forControlEvents:UIControlEventValueChanged];
[cell.switchView setTag:9001];
/* setting the other properties is not shown */ 
```

现在在您的 setItem: 方法中，您可以通过以下方式简单地访问正确的按钮

```
cell.qualityBtn
cell.memoBtn 
```

但是请记住，您应该更新某种模型，该模型跟踪开关状态，以便当用户滚动表格并且单元格被解除分配和重新分配时，单元格被分配正确的状态（显示或不显示按钮）。最简单的是 NSDictionary，它以单元格的 NSIndexPath 作为键。

我希望这有帮助。

# c++ - 组装拆卸

> ID：10472686
> 
> 赞同：0
> 
> 时间：2012-05-06T17:33:57.867
> 
> 标签：c++, assembly

请有人能解释一下为什么当我这样做的时候

dumpbin /disasm "C:\simple_Win32.exe" >> "C:\users\piter\myDump5.txt"

我看不到我的例程的名称，只能看到 eax、ebx、mov 和其他“不是我的”函数（预处理器宏等）。即在下面的例子中，我们有汇编代码和函数名：

```
.text:00403D89     lea eax, [ebp+SystemTimeAsFileTime]
.text:00403D8C     push eax
.text:00403D8D     call ds:__imp__GetSystemTimeAsFileTime@4
.text:00403D93     mov esi, [ebp+SystemTimeAsFileTime.dwHighDateTime]
.text:00403D96     xor esi, [ebp+SystemTimeAsFileTime.dwLowDateTime]
.text:00403D99     call ds:__imp__GetCurrentProcessId@0
.text:00403D9F     xor esi, eax
.text:00403DA1     call ds:__imp__GetCurrentThreadId@0
.text:00403DA7     xor esi, eax
.text:00403DA9     call ds:__imp__GetTickCount@0
.text:00403DAF     xor esi, eax
.text:00403DB1     lea eax, [ebp+PerformanceCount]
.text:00403DB4     push eax
.text:00403DB5     call ds:__imp__QueryPerformanceCounter@4
.text:00403DBB     mov eax, dword ptr [ebp+PerformanceCount+4]
.text:00403DBE     xor eax, dword ptr [ebp+PerformanceCount]
.text:00403DC1     xor esi, eax
.text:00403DC3     cmp esi, edi
.text:00403DC5     jnz short loc_403DCE 
```

那么如果我的代码是：

```
#include <iostream>

int Foo(int,int){return 4;}

int main(){
    //std::cout<<"\n\nHello.\n\n"<<std::endl;

    int i=Foo(2,4);
    int a=i;
    //system("pause");
return 0;
} 
```

为什么我在此代码 exe 产生的程序集中找不到 Foo？
我应该可以在那里找到名字 Foo 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:36:58.107

类似`Foo`的名称不需要并且不包含在生成的 EXE 中，因此在反汇编时不会显示 - 如果您使用调试信息进行编译，则 PDB 和/或 MAP 文件将包含此类信息。在处理内部函数（如从（系统）DLL 导入的函数）方面也存在差异`Foo`——反汇编程序通常能够通过名称解析这些函数，而它需要“内部函数”的调试信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T17:39:01.923

“汇编”意味着将一组人类可读的机器指令助记符转换为可以加载和执行的实际二进制数据。类似地，“反汇编”意味着将二进制代码转换为一组人类可读的机器指令助记符，熟练的程序员可以阅读并理解正在发生的事情。

也许您正在考虑将高级编程语言“编译”成机器代码；与之相反的是一个假设的魔法“反编译器”。确实可以进行一些反编译，并且存在工具，但是对于任何给定的高级语言，您可以从一组已编译的机器代码中恢复多少总是有限制的，而且如果不深入了解几层编程，这将很难在任何情况下都能理解结果。

有些语言（如C#或Java）只编译成比较高级的中间语言，比较容易反编译和阅读，但C++通常不这样使用，C++编译器通常产生最低级别的硬件机器代码。

# python - 为什么我每次使用 QPainter 都会清除小部件？

> ID：10472687
> 
> 赞同：0
> 
> 时间：2012-05-06T17:34:00.043
> 
> 标签：python, qt, pyqt, qpainter

我有这个代码：

```
def paintEvent(self, paintEvent):
    self._painter.begin(self)
    try:
        while True:
            color, rectangle = self._paint_queue.popleft()
            self._painter.fillRect(rectangle, color)
    except IndexError:
        pass
    finally:
        self._painter.end()

def drawInstruction(self, ptr, instruction):
    rectangle = QtCore.QRect(
             (ptr % self.cols)*CELL_SIZE,
             math.floor(ptr/float(self.cols))*CELL_SIZE,
             CELL_SIZE,
             CELL_SIZE)
    self._paint_queue.append((opcode2color[instruction.opcode],
        rectangle))
    self.update() 
```

每次我调用 drawInstruction() 时，已经绘制的所有内容都会被清除。只剩下新的矩形。

每次调用 drawInstruction() 时都重新绘制所有内容不是解决方案，因为 drawInstruction() 经常被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:47:47.410

您必须在每个 上重新绘制小部件内容`paintEvent`，没有其他办法。

也许在您的情况下，最好在其他绘画设备（`QImage`, `QPixmap`, `QPicture`, ...）上绘画，然后在每个绘画事件上绘画。

# android - 调用 onPause 方法时如何停止服务？

> ID：10472696
> 
> 赞同：0
> 
> 时间：2012-05-06T17:35:57.497
> 
> 标签：android, service, onpause

我有一个在活动的后台运行的服务，现在当用户按下主页按钮时，会为活动调用 onPause，我想要的是在调用 onPause 时停止在后台运行的服务，但随后我得到一个错误和强制关闭，有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:29:52.467

由于我们没有任何代码，我猜问题是您在尝试停止服务之前没有重新创建启动服务的意图。

例如，如果您以这种方式启动服务：

```
Intent serviceIntent = new Intent(this, myService.class);
startService(serviceIntent); 
```

你可以像这样停止它：

```
Intent serviceIntent = new Intent(this, myService.class);
stopService(serviceIntent); 
```

希望猜对了

# c - 如何在系统（openssl，c）上安全地保存加密密钥？

> ID：10472697
> 
> 赞同：4
> 
> 时间：2012-05-06T17:36:15.453
> 
> 标签：c, linux, encryption, openssl, aes

嗨，我正在使用 openssl evp api 使用 AES256CBC 加密/解密文件。

该文件使用**密钥'k'**和**iv'v'**加密（它们是使用`EVP_BytesToKey()`函数生成`RAND_bytes()`的并解密上下文。

初始化函数为：

```
int aes_init(unsigned char* pwd, unsigned int pwd_len,EVP_CIPHER_CTX *e_ctx, EVP_CIPHER_CTX *d_ctx)             /* return 0:SUCCESS 1: ERROR */
   {
    int i, rounds =5;                                       /* rounds */
    unsigned char key[32], iv[32], salt[8];

    if(!(RAND_bytes(salt,8))) //Writes cryptographically secure random bytes in salt[]
    {   
            perror("\n ERROR,SALT::");
            return 1;
    }   

    i = EVP_BytesToKey(EVP_aes_256_cbc(),EVP_sha1(),salt,pwd,pwd_len,rounds,key,iv);
   } 
```

**我打算实现的是这种情况：**

用户使用密钥 k 和 IV v 加密文件 A。程序正常退出 那么如果现在用户现在想要解密加密的文件 A，他/她将需要相同的密码上下文，即相同的密钥 k，相同的 IV。

**所以我的问题是如何安全地保存密钥和iv（用于加密的相同），以便以后可以使用它来解密文件。**

**注意：** *我已经看到一些商业加密产品为此创建了一种密钥库，不知道它是如何完成的。*

有没有为此遵循的任何指导方针？

任何建议将不胜感激..

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:43:05.293

如果我正确理解你的问题，你不能。

迟早有人必须解锁密钥库。那需要一把钥匙。您无法存储密钥库解锁密钥，因为需要以明文方式检索它，以便可以解锁密钥库。好的，您可以将密钥库解锁密钥存储在某个地方，但现在您又遇到了同样的问题。

“标准”解决方案要求您依靠操作系统安全性来使除密钥库所有者或超级用户（假设是类 UNIX 系统）之外的任何用户都无法访问密钥库解锁密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-01T17:23:31.577

这些“解决方案”都不是真正安全的。如果要在系统上安全地存储对称密钥，则必须将其存储在硬件安全模块 (HSM) 中。一种相对便宜的选择是 Apricorn Aegis 加密闪存驱动器，它已通过 FIPS 140-2 3 级验证。

有关详细信息，请参阅[http://www.apricorn.com/products/hardware-encrypted-drives/aegis-secure-key.html](http://www.apricorn.com/products/hardware-encrypted-drives/aegis-secure-key.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T22:22:26.077

存储密钥的另一种方法是要求用户输入密码。首先，您使用完全随机（会话）密钥加密文件。该密钥使用从密码派生的密钥进行加密，例如使用 PBKDF2 之类的函数（请参阅许多关于此的 stackoverflow 文章）。将加密的密钥与文件一起存储（可能在文件的前面，以便于解密，您也可以在加密文件之前加密和写入密钥）。

# django - Django：使文件字段仅对登录用户可用

> ID：10472698
> 
> 赞同：0
> 
> 时间：2012-05-06T17:36:17.577
> 
> 标签：django, django-file-upload

如何使 FileField 仅可供登录用户下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:04:14.467

如果您想向用户显示不同的表单，则需要不同的 ModelForm（或只是 Form）。此表单应如下所示：

```
class FormWithoutFormField(RegularForm):
    class Meta:
        exclude = ('field_name',) 
```

这进入您要显示的新表单内部。请注意，您正在扩展您正在使用的其他形式。这应该保持几乎所有内容不变，并且您可以简单地排除您不想要的字段。

然后，您需要检查用户是否在您的视图中的某个位置登录。也就是说，类似：

```
if request.user.is_authenticated():
    form_class = FormWithoutFileField
else:
    form_class = RegularForm
# Do whatever you did with the normal form, but now with the new form. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T00:02:52.673

您没有解释是否需要 django 管理员或自定义模板。如果它是用于自定义模板/视图，您不需要其他表单，只需在您的模板中执行此操作。

```
<div id="blah">
    {% if user.is_authenticated %}
        <a href="{{ somemodel.somefilefield.url }}">Download the file</a>
    {% else %}
        <p>No downloading for you!</p>
    {% endif %}
</div> 
```

前提是您已经阅读了有关在 django 中[处理静态文件的内容。](https://docs.djangoproject.com/en/1.4/howto/static-files/)

# php - PHP：类扩展抽象类并实现接口的奇怪行为

> ID：10472706
> 
> 赞同：1
> 
> 时间：2012-05-06T17:37:15.807
> 
> 标签：php, interface, abstract-class

我有一个具有以下结构的类。

```
abstract class ABS {}

interface INT {}

class SomeClass extends ABS implements INT
{
 //class implementation...
} 
```

我正在使用 PHP 5.3 开发我的开发环境，但是当我上传到 live (PHP 5.2.17) 时，它并没有到 SomeClass 类的声明结束。就停在那里，没有错误，什么都没有。当我用一些 echo 语句进行测试时（在类的开头（声明前）和类的末尾（声明后）），类声明末尾的 echo 语句没有出现在屏幕上。当我删除扩展或实现语句时，它会到达末尾。你能帮助我吗？

# ajax - YII - 如果在创建页面上找到一条记录

> ID：10472709
> 
> 赞同：0
> 
> 时间：2012-05-06T17:37:25.080
> 
> 标签：ajax, yii

我是 YII 框架的新手。我想知道如何在不提交表单的情况下使用 ajax 创建新客户时输入的电话号码获取客户信息。

如果我发现任何客户输入了电话，那么我们需要通过确认来提醒用户继续创建或输入新客户。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T05:52:02.667

为您的客户 AR 类使用唯一的验证器

```
class Customers extends CActiveRecord
{
.....................
    public function rules()
    {
        return array(
.........................
            array('phone', 'unique'),
.........................
        );
    }

.........................

} 
```

并在您的表单中启用 ajaxValidation

# jquery - 是否有任何可用的扩展 jQuery 效果？

> ID：10472715
> 
> 赞同：-2
> 
> 时间：2012-05-06T17:38:04.127
> 
> 标签：jquery

除了这些标准效果之外，还有其他可用的 jQuery 效果吗？ [http://docs.jquery.com/UI/Effects](http://docs.jquery.com/UI/Effects)

我对 jQuery 和第三方插件都感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:41:12.347

[http://www.webdesignerdepot.com/2010/07/20-demos-showing-advanced-jquery-effects/](http://www.webdesignerdepot.com/2010/07/20-demos-showing-advanced-jquery-effects/) http://www.1stwebdesigner.com/freebies/advanced-jquery-effects/ [http://devsnippets。 com/article/10-jquery-transition-effects.html](http://devsnippets.com/article/10-jquery-transition-effects.html)

我通过谷歌搜索“jQuery 效果”找到了一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:47:26.350

这个缓动插件与 jQuery 动画集成。 [http://gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)

# c++ - 如何允许移动构造并禁止分配和复制类的构造

> ID：10472718
> 
> 赞同：7
> 
> 时间：2012-05-06T17:38:35.873
> 
> 标签：c++, c++11, copy-constructor, assignment-operator

有没有办法允许移动构造函数并禁止复制构造和赋值。我可以想到几个具有文件指针和缓冲区指针（资源句柄等）的类，它们将从复制构造和分配中受益。

我正在使用 VC2010 和 GCC 4.5.2。我知道我必须在 VC2010 类头文件中声明空的私有赋值和复制构造函数，据我所知，GCC 允许在方法之后使用某种删除签名来做同样的事情。

如果有人有这样的骨架类的好例子和优点，我将不胜感激。提前感谢约翰

这是我想允许移动但我也想防止直接分配的类的示例。是否类似于使复制构造函数和 operator=private 的问题？

```
class LoadLumScanner_v8002 : public ILoadLumScanner { 
public:
// default constructor
LoadLumScanner_v8002();

// copy constructor
LoadLumScanner_v8002(const LoadLumScanner_v8002& rhs);

// move constructor
LoadLumScanner_v8002(LoadLumScanner_v8002&& rhs);

// non-throwing copy-and-swap idiom unified assignment
inline LoadLumScanner_v8002& operator=(LoadLumScanner_v8002 rhs) {
    rhs.swap(*this);
    return *this;
}

// non-throwing-swap idiom
inline void swap(LoadLumScanner_v8002& rhs) throw() {
    // enable ADL (not necessary in our case, but good practice)
    using std::swap;
    // swap base members
    // ... 
    // swap members
    swap(mValidatedOk, rhs.mValidatedOk);
    swap(mFile, rhs.mFile);
    swap(mPartNo, rhs.mPartNo);
    swap(mMediaSequenceNo, rhs.mMediaSequenceNo);
    swap(mMaxMediaSequenceNo, rhs.mMaxMediaSequenceNo);
    swap(mLoadListOffset, rhs.mLoadListOffset);
    swap(mFirstLoadOffset, rhs.mFirstLoadOffset);
    swap(mLoadCount, rhs.mLoadCount);
    swap(mLoadIndex, rhs.mLoadIndex);
    swap(mLoadMediaSequenceNo, rhs.mLoadMediaSequenceNo);
    swap(mLoadPartNo, rhs.mLoadPartNo);
    swap(mLoadFilePath, rhs.mLoadFilePath);
}

// destructor
virtual ~LoadLumScanner_v8002();
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T18:20:22.807

您提到的两种解决方案都可以正常工作。

1.

```
class MoveOnly
{
   MoveOnly(const MoveOnly&);
   MoveOnly& operator=(const MoveOnly&);
public:
   MoveOnly(MoveOnly&&);
   MoveOnly& operator=(MoveOnly&&);
}; 
```

```
class MoveOnly
{
public:
   MoveOnly(const MoveOnly&) = delete;
   MoveOnly& operator=(const MoveOnly&) = delete;
   MoveOnly(MoveOnly&&) = default;
   MoveOnly& operator=(MoveOnly&&) = default;
}; 
```

"= delete" 签名是 C++11 中新增的（右值引用也是如此），其含义与 C++03 技术基本相同（声明私有且不定义）。C++11 解决方案的优点是它肯定会在编译时捕获错误，而不是延迟到链接时。

您的编译器可能还不支持“= delete”，在这种情况下，您将不得不求助于第一个解决方案。

第三种解决方案是默认复制成员：

```
class MoveOnly
{
public:
   MoveOnly(MoveOnly&&);
   MoveOnly& operator=(MoveOnly&&);
}; 
```

声明移动特殊成员时，无论是否默认，如果您未声明它们，编译器将隐式添加已删除的副本成员。您的编译器可能会也可能不会实现此功能。

# sql-server - 针对两个表的 SQL Server 外键关系

> ID：10472719
> 
> 赞同：0
> 
> 时间：2012-05-06T17:38:45.650
> 
> 标签：sql-server, referential-integrity

我有一个数据库，其中 3 个表具有 FK 关系，因为：

表 A 有 2 个（相关）字段：
TypeId (int)
LinkId (int)

表 B 和 C 各有一个主键映射到表 A 中的 LinkId。如果表 A 中的 TypeId 为 1，则 LinkId 映射到表 B 中的主键。如果为 2，则映射到表中的主键C。

在这个设计糟糕的数据库中，无论如何都要在这些表之间强制执行参照完整性？即如果表B或C中不存在相应的记录，是否可以阻止SQL Server在表A中插入记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:44:21.153

`LinkId`您可以使用两个新的链接表并从表中删除`A`

```
AB (Aid, Bid)
AC (Aid, Cid) 
```

不过取决于您的应用程序以及您对插入的控制...

您不必使用内置约束 - 如果您想保留该结构，当然可以编写带有触发器的自定义约束。

就像是：

```
 CREATE TRIGGER trigger_name ON A
      FOR INSERT, UPDATE

      AS

     declare @err varchar(50)

     select @err = case 
       when inserted.typeid = 1 and not exists(select 0 from B where id=inserted.linkid) then
            @err = 'No link record exists in B.'
       when inserted.typeid = 2 and not exists(select 0 from C where id=inserted.linkid) then
            @err = 'No link record exists in C.'
       else @err = null     
      end
      from inserted

     if @err is not null RAISERROR (@err, 16, 1 ) 
```

# c# - Windows Phone 7.1 本地数据库示例

> ID：10472721
> 
> 赞同：0
> 
> 时间：2012-05-06T17:38:47.163
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

[我从http://code.msdn.microsoft.com/Windows-Phone-71-Local-da2fdf80/view/Discussions](http://code.msdn.microsoft.com/Windows-Phone-71-Local-da2fdf80/view/Discussions)下载了一个示例，然后导入到 Visual Studio 并在 WP7 模拟器中运行。当我想添加新任务时，我遇到了一个异常：*设置属性“Microsoft.Phone.Controls.ListPicker.ItemCountThreshold”引发了异常。[行：42 位置：63]*

有人可以解决这个问题吗？

# ruby-on-rails - heroku db：push 不工作，使用水龙头 gem

> ID：10472728
> 
> 赞同：4
> 
> 时间：2012-05-06T17:39:35.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, taps

我 `gem 'sqlite3', '1.3.5'`在开发和 `gem 'pg', '0.12.2'`产品上使用。红宝石版本`ruby 1.9.3p125 (2012-02-16) [i386-mingw32]`

对于正在开发的教程应用程序。

我安装了`taps`gem 并尝试了 heroku db:push[这](http://pastie.org/3869446)就是我得到的。

```
HTTP CODE: 500
Taps Server Error: PGError: ERROR:  time zone displacement out of range: "2012-0
5-06 12:00:00.000000+5894529600" 
```

这也是[heroku日志](http://pastie.org/3869462)。解决办法是什么？

仅供参考：db:pull 效果很好。我还检查了其他类似的帖子，但截至目前我在其中任何一个中都找不到解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T18:37:03.627

这是由于 Ruby 1.9.3 的一个水龙头错误。

我相信，解决方案是在推送 db 文件之前在*本地机器上切换到 Ruby 1.9.2。*像这样：

```
rvm use ruby-1.9.2
heroku db:push
rvm use ruby-1.9.3 
```

我这样做我的 db:pushs 对我有用。

请注意，您的 heroku 应用程序上的 ruby​​ 版本没有任何区别。当您在本地运行 1.9.3 时会出现问题。

这是github中问题的链接：

[https://github.com/ricardochimal/taps/issues/92](https://github.com/ricardochimal/taps/issues/92)

# silverlight - 在 MVVM Light 中将文本块绑定到文本框

> ID：10472730
> 
> 赞同：0
> 
> 时间：2012-05-06T17:40:01.483
> 
> 标签：silverlight, xaml, data-binding, mvvm, mvvm-light

我有一个非常简单的 MVVM Light 应用程序，它有一个文本块和一个文本框。我要做的是使用 MVVM Light Toolkit 和数据绑定将文本块值设置为文本框值。当我运行程序时，文本块文本不会更新。

```
private string _name = "Test Name";

public string Name
{                
    get
    {
        return _name;
    }
    set
    {
        _name = value;
        RaisePropertyChanged("NameChanged");
    }
} 
```

这是 XAML。“测试名称”看起来不错，但不会更改为文本框的值。文本块：

```
<TextBlock x:Name="NameTitle"
           Text="{Binding Name}"
           Margin="-3,-8,0,0"/> 
```

文本框：

```
<TextBox Text="{Binding Name, Mode="TwoWay"}" x:Name="tb"            
       HorizontalAlignment="Center"
       VerticalAlignment="Center"
       FontSize="40" >
       <i:Interaction.Triggers>
           <i:EventTrigger EventName="LostFocus">
             <commands:EventToCommand Command="{Binding Name}" 
                       CommandParameter="{Binding Text, ElementName=tb}" />
           </i:EventTrigger>
       </i:Interaction.Triggers>
</TextBox> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:46:10.153

您应该将“Name”传递给 RaisePropertyChanged 而不是“NameChanged”。另一种解决方案是使用 ElementName 将 TextBlock 直接绑定到 Textbox

XAML：

```
<TextBlock x:Name="NameTitle" Text="{Binding ElementName=tb, Path=Text}" Margin="-3,-8,0,0"/> 
```

# php - Yii 将过滤器添加到 CGridView 中的虚拟属性并使其可排序

> ID：10472732
> 
> 赞同：10
> 
> 时间：2012-05-06T17:40:06.887
> 
> 标签：php, yii, yii-components

我有以下型号：

`User`列 {id,user_name,password,user_type}

`Admin`列 {id,user_id,full_name,.....etc}

`Editor`列 {id, user_id,full_name,...等}

关系是 `User`：`'admin' => array(self::HAS_ONE, 'Admin', 'user_id'),'editor' => array(self::HAS_ONE, 'Editor', 'user_id'),`

`Admin`：`'user' => array(self::BELONGS_TO, 'User', 'user_id'),`

`Editor`：`'user' => array(self::BELONGS_TO, 'User', 'user_id'),`

`fullName`现在我在模型中设置了一个虚拟属性，`User`如下所示

```
public function getFullName()

{

    if($this->user_type=='admin')

        return $this->admin->full_name;

    else if($this->user_type=='editor')

        return $this->editor->full_name;

} 
```

我可以在 gridview 中显示虚拟属性 , `fullName`，但是如何向属性添加过滤器并使其在 gridview 中可排序？

**更新1：**

我根据@Jon 的回答更新了模型 search() 函数，如下所示

```
 public function search()
        {

            $criteria=new CDbCriteria;
            $criteria->select=array('*','COALESCE( editor.full_name,admin.first_name, \'\') AS calculatedName');
            $criteria->with=array('editor','admin');
            $criteria->compare('calculatedName',$this->calculatedName,true);
            $criteria->compare('email',$this->email,true);
            $criteria->compare('user_type',$this->user_type);

            return new CActiveDataProvider($this, array(
                'criteria'=>$criteria,

));
    } 
```

管理员和编辑者的姓名都正确显示在网格视图中。但是当我通过过滤器进行搜索时，会发生以下异常，

```
CDbCommand failed to execute the SQL statement: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'calculatedName' in 'where clause'. The SQL statement executed was: SELECT COUNT(DISTINCT `t`.`id`) FROM `user` `t`  LEFT OUTER JOIN `editor` `editor` ON (`editor`.`user_id`=`t`.`id`)  LEFT OUTER JOIN `admin` `admin` ON (`admin`.`user_id`=`t`.`id`)  WHERE (calculatedName LIKE :ycp0) (C:\xampplite\htdocs\yii\framework\db\CDbCommand.php:528)</p><pre>#0 C:\xampplite\htdocs\yii\framework\db\CDbCommand.php(425): 
```

我怎样才能摆脱这个？

更新2：我的错误。当我改变线路时它工作正常

```
$criteria->compare('calculatedName',$this->calculatedName,true); 
```

至

```
$criteria->compare('COALESCE( editor.full_name,admin.first_name, \'\')',$this->calculatedName,true); 
```

顺便说一句，谢谢@Jon。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T22:47:58.327

您在这里尝试做的是有效地将计算列添加到结果集中。想象一下，在用于获取结果的 SQL 查询中，您将连接`Admin`和`Editor`表，`Admin.full_name`以及`Editor.full_name`计算所需值所涉及的两列。

由于至少有一个`Admin.full_name`并且`Editor.full_name`总是会是`NULL`，因此计算最终值的公式将是

```
COALESCE(Admin.full_name, Editor.full_name, '') 
```

现在您已经有了计算公式，您需要执行以下步骤：

1.  向模型添加读写列以接收计算列
2.  创建一个`CDbCriteria`连接两个表并包含计算列的
3.  创建一个`CSort`描述计算列应如何影响记录顺序的
4.  创建一个`CActiveDataProvider`使用这些标准和排序选项的
5.  将数据提供者提供给您的`CGridView`

因此，首先向模型添加一个公共属性：

```
public $calculatedName; 
```

接着：

```
$criteria = new CDbCriteria(array(
    'select' => array(
        '*',
        'COALESCE(Admin.full_name, Editor.full_name, \'\') AS calculatedName',
    ),
    'with'   => array('Admin', 'Editor'),
    // other options here
));

$sort = new CSort;
$sort->attributes = array(
    'calculatedName' => array(
        'asc'  => 'COALESCE(Admin.full_name, Editor.full_name, \'\')',
        'desc' => 'COALESCE(Admin.full_name, Editor.full_name, \'\') DESC',
    ),
    // other sort order definitions here
);

$dataProvider = new CActiveDataProvider('User', array(
    'criteria' => $criteria,
    'sort'     => $sort,
)); 
```

最后，用于`$dataProvider`填充您的网格；用作`calculatedName`列名。

如果我弄错了一些细节，我深表歉意，因为我实际上并没有运行它。

**更新：**`CDbCriteria.select`事实证明，如果您指定为字符串并且该字符串包含任何不用于分隔列的逗号（例如用于分隔参数的逗号） ，Yii 不喜欢它`COALESCE`。值得庆幸的是`CDbCriteria`，它还允许将列作为数组传递，从而解决了这个问题。我更新了上面的代码以匹配。

对于任何好奇的人，有问题的代码是[this](http://code.google.com/p/yii/source/browse/tags/1.1.10/framework/db/ar/CActiveFinder.php#931)。

# c# - 自定义字体系列静态资源

> ID：10472737
> 
> 赞同：0
> 
> 时间：2012-05-06T17:41:08.260
> 
> 标签：c#, windows-phone-7, xaml, fonts

我有几个文本块，自定义字体系列可以正常工作：

```
FontFamily="{StaticResource CodeBold}" 
```

这是 XAML 方式（一种工作方式），但我想在 C# 中做同样的事情，我想我错过了一些大事。

```
TextBlock txTop = new TextBlock();
txTop.FontFamily = new FontFamily("CodeBold"); 
```

如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:47:15.863

CodeBold 是您的资源的名称，而不是字体系列的名称。这就是为什么那行不通。您需要做的是将资源分配给字体系列。以下代码应该适用于您的情况。

```
TextBlock txTop = new TextBlock();
txTop.FontFamily = (FontFamily)FindResource("CodeBold"); 
```

[有关 FindResource 的更多信息，请参见 MSDN。](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findresource.aspx)

# javascript - 滑动横幅 90% HTML+CSS3 10% JS

> ID：10472741
> 
> 赞同：1
> 
> 时间：2012-05-06T17:41:18.930
> 
> 标签：javascript, html, animation, css

我制作了一个脚本，使用 CSS3 在屏幕上滑动图像（进出）。当最后一个动画完成时，我找不到让 CSS 开始新动画的方法，而且 CSS 动画不允许更改背景图像（我试过了）。所以我不得不使用一点javascript来切换className，所以图像会改变。然而，这不是最好的解决方案，因为它有可能不同步。除此之外，它违背了拥有纯 CSS3 动画的目的。

**问：有没有办法可以减少 javascript（不混淆代码）或完全不使用 javascript？**

# 来源

* * *

```
/  
/index.html  
/scripts/slider.css  
/scripts/slider.js  
/img/layout/banner1.png  
/img/layout/banner2.png  
/img/layout/banner3.png 
```

# 滑块.css

```
.main {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 100;
    width: 100%;
    height: 100%; /* if there is no content you need this to show something */
    background-repeat: no-repeat;
    background-position: center 50%;
    animation-name: slideInOut;
    animation-duration: 8s;
    animation-delay: 0s;
    animation-timing-function: ease-out;
    animation-iteration-count: infinite;
    animation-direction: normal;
    -moz-animation-name: slideInOut;
    -moz-animation-duration: 8s;
    -moz-animation-delay: 0s;
    -moz-animation-timing-function: ease-out;
    -moz-animation-iteration-count: infinite;
    -moz-animation-direction: normal;
    -webkit-animation-name: slideInOut;
    -webkit-animation-duration: 8s;
    -webkit-animation-delay: 0s;
    -webkit-animation-timing-function: ease-out;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: normal;
    -o-animation-name: slideInOut;
    -o-animation-duration: 8s;
    -o-animation-delay: 0s;
    -o-animation-timing-function: ease-out;
    -o-animation-iteration-count: infinite;
    -o-animation-direction: normal;
}
.main.m1 {
    background-image: url("../img/layout/banner1.png");
}
.main.m2 {
    background-image: url("../img/layout/banner2.png");
}
.main.m3 {
    background-image: url("../img/layout/banner3.png");
}
@keyframes slideInOut {
      0% { background-position: 1600px 50%; }
     15% { background-position: center 50%; }
     80% { background-position: center 50%; }
    100% { background-position: -1600px 50%; }
}
@-moz-keyframes slideInOut {
      0% { background-position: 1600px 50%; }
     15% { background-position: center 50%; }
     80% { background-position: center 50%; }
    100% { background-position: -1600px 50%; }
}
@-webkit-keyframes slideInOut {
      0% { background-position: 1600px 50%; }
     15% { background-position: center 50%; }
     80% { background-position: center 50%; }
    100% { background-position: -1600px 50%; }
}
@-o-keyframes slideInOut {
      0% { background-position: 1600px 50%; }
     15% { background-position: center 50%; }
     80% { background-position: center 50%; }
    100% { background-position: -1600px 50%; }
} 
```

# 滑块.js

```
function startSlider() {
    var main = document.getElementById("main");
    var cArr = ["main m1","main m2","main m3"];
    var ntot = cArr.length;
    var npos = 0;
    setInterval(function() {
        main.className = cArr[npos++];
        if (npos == ntot) npos = 0;
    }, 8000);
} 
```

# 索引.html

```
<link rel="StyleSheet" href="scripts/slider.css"/>
<script type="text/javascript" src="scripts/slider.js"/>
<body onload="startSlider();">
<div id="main" class="main m3"></div> 
```

# 统计数据

```
*------------------------------------------*
|            | Chars (no spaces) | % total |
|------------|-------------------|---------|
| javascript |               210 |   9.95% |
| html+css3  |          165+1735 |  90.05% |
*------------------------------------------*
| total      |              2110 | 100.00% |
*------------------------------------------* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:51:13.467

```
setInterval(function() {
    main.className = cArr[npos=++npos%ntot];         
}, 8000); 
```

# c# - GSM Pdu 7Bit 的正确文本编码以避免像“

> ID：10472746
> 
> 赞同：0
> 
> 时间：2012-05-06T17:41:57.847
> 
> 标签：c#, asp.net, sms, gsm

我有一个发送短信的网站，当任何用户发送带有“或类似字符的消息时，它不接受它并产生问题，即在 GSM 7Bit 类中不允许使用此字符。您能否解释一下，如何在 c#.net 中删除或将此类字符转换为有效的 ascii 字符。例如“是”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:11:55.800

每当您将字符串编码为字节进行发送时，请使用[Encoding.ASCII](http://msdn.microsoft.com/en-us/library/system.text.encoding.ascii.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-10T19:52:03.527

我想目标是检查输入消息的所有字符是否都是 GSM 7 位编码表的成员。

```
public static boolean isGSM7Bit(String message)
{
Pattern pattern = Pattern.compile("^[A-Za-z0-9 \\r\\n@£$¥èéùìòÇØøÅåΔ_ΦΓΛΩΠΨΣΘΞÆæßÉ!\"#$%&'()*+,\\-./:;<=>?¡ÄÖÑÜ§¿äöñüà^{}\\\\\\[~\\]|€]*$");
Matcher matcher = pattern.matcher(message);
return matcher.matches();
} 
```

# javascript - 禁用提交按钮，直到所有输入正确

> ID：10472747
> 
> 赞同：0
> 
> 时间：2012-05-06T17:42:06.770
> 
> 标签：javascript, jquery, html

我已经成功地为我的注册页面实现了实时表单验证，这一切都很好，除了我希望表单禁用提交按钮，直到所有输入都正确并且用户选中了两个复选框（条款和条件和隐私政策）。我试过尝试一下，但我以前从未做过，所以不确定从哪里开始，我问了几个人，显然这与下面 javascript 底部的 return false 有关。任何帮助将不胜感激。谢谢

HTML 表格

```
<div id="overlay">

<div id="modal_wrapper">
      <div id="modal_content">

        <form id="jform" action="" method="post" enctype="multipart/form-data">
            <div id="modal_content_left">
            Register

            <ul>

                <li class="required" type="none">

                    <label>

                        <input type="text" class="reg_text tip" name="username" id="username" title="8 - 16 Characters" placeholder="Username*"/>

                    </label>

                    <label>
                         <br />
                        <input type="text" class="reg_text tip" name="email" id="email" title="Get Verified" placeholder="Email*"/>

                    </label>
                    <label>
                        <br />
                        <input type="password" class="reg_text tip" name="password" id="password" title="Min 8 Characters" placeholder="Password*"/>

                    </label>

                    <label>
                        <br />
                        <input type="password" class="reg_text tip" name="cpassword" id="cpassword" title="Min 8 Characters" placeholder="Verify Password*"/>
                    </label>
                </li>

            </ul>

            </div><!---end modal_content_left--->

            <div id="modal_content_right">

            <!--<li class="required double" type="none">-->

                <div id="payment_options">

                    <p>
                      <label><img src="images/index/images/paypal.png" width="78" height="38" alt="PayPal" />
                            <br />
                            <input type="radio" name="payment_selection" value="paypal" id="payment_selection_0" checked/>
                            </label>

                      <label><img src="images/index/images/alertpay.png" width="78" height="38" alt="Alertpay" />
                          <br />
                            <input type="radio" name="payment_selection" value="alertpay" id="payment_selection_1" />
                            </label>

                          <label><img src="images/index/images/check.png" width="78" height="38" alt="Check" /><br />
                            <input type="radio" name="payment_selection" value="check" id="payment_selection_2" />
                            </label>

          </p>
          <br /><br /><br /><br />
                    Account Type

                    <p>
                      <label><img src="images/index/images/demo.png" width="78" height="38" alt="Demo" />
                      <br />
                        <input type="radio" name="account_type" value="demo" class="demo_radio" id="account_type_0" />
                        </label>

                      <label><img src="images/index/images/real_account.png" width="78" height="38" alt="Real" /><br />
                        <input type="radio" name="account_type" value="real" id="account_type_1" checked/>
                      </label>

                    </p>
              </div><!---end payment_options---><br /><br /><br />

              <div id="final_reg">
              <div id="check_boxes">
              <p>
              <li class="required" type="none">
                <label>
                  <input type="checkbox" name="agree_cons" value="terms" id="agree_cons_0" />
                  I agree to Terms</label>
                <br /><br />
                <label>
                  <input type="checkbox" name="agree_cons" value="privacy" id="agree_cons_1" />
                  I agree to Privacy Policy</label>
                  </li>

                <br />
              </p></div><!---end check_boxes--->
              <div id="register_submit">
                <input name="submit" type="submit" class="register_submit"
                       id="register_submit" alt="Register" />
              </div><!---end register_submit--->
            </div><!---end final_reg--->
         </div><!---end mofal_content_right--->

        </form>
      </div><!---end modal_content--->
      <div id="error_display"></div><!---end error_display--->
 </div><!---end modal_wrapper---> 
```

Javascript代码

```
$(document).ready(function () {
jFunc={
    mustMatch:  function(el,pt){
            if (pt.test(el.val()))
                el.removeClass('error').addClass('correct')
            else{
                jVal.errors = true;
                el.removeClass('correct').addClass('error').effect("shake", { times:3, distance:5 }, 60);
            }
        },
    mustEqual:  function (el,val){
            if (el.val()==val)
                el.removeClass('error').addClass('correct')
            else{
                jVal.errors = true;
                el.removeClass('correct').addClass('error').effect("shake", { times:3, distance:5 }, 60);
            }
        }
    }
jVal = {
    'username': function () {
        jFunc.mustMatch($('#username'),/^(?=.*[a-z].*)\w{8,}$/i);
    },
    'email': function () {
        jFunc.mustMatch($('#email'),/^.+@.+[.].{2,}$/i);
    },
    'password': function () {
        jFunc.mustMatch($('#password'),/^.{8,}$/i);
    },
    'cpassword': function () {
        jFunc.mustEqual($('#cpassword'),$('#password').val());
    },
};
$('#username').change(jVal.username);
$('#email').change(jVal.email);
$('#password').change(jVal.password);
$('#cpassword').change(jVal.cpassword);
$('#jform').submit(function(){
    $.each(jVal,function(i,v){
        $.isFunction(v) && v()
    })
    return false // fix this when the code works.
}) 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:06:33.997

除了现有的事件处理程序之外，您还可以执行类似的操作

```
$('#username,#email,#password,#cpassword').change(function() {
    jVal.errors = false;
    $.each(jVal, function(i, validator) {
         if ($.isFunction(validator)) { validator(); }
    });
    $('#register_submit').prop('disabled', jVal.errors);
}); 
```

但是请注意，您可能希望您的提交处理程序检查提交按钮是否被禁用（`return false`如果是，则表单不会提交），而不是自己再次进行验证。这样，所有验证都在同一个地方进行。

（当然，正如人们所说的那样，这一切都不能消除对服务器端数据进行适当验证的需要。）

# drupal - Drupal 7 中的 theme_hook_suggestions // 无法让我的主题使用我的建议

> ID：10472750
> 
> 赞同：1
> 
> 时间：2012-05-06T17:42:13.500
> 
> 标签：drupal, drupal-7, drupal-theming

## 一般说明

我正在向`$variables['theme_hook_suggestions']`主题预处理函数内部添加值，但我的主题没有接受建议。我正在做一个健康的完全缓存清除，所以缓存不是问题。

我希望我的主题选择我的建议，但无论我尝试什么，它都不起作用。

以上是我的问题的抽象版本，它的解决方案可能对大多数人有用。下面是我的具体设置的详细描述，以及我的问题的更具体的陈述，以及我尝试的“解决方案”（它不起作用）。

您能给我的任何帮助都将是巨大的，非常感谢。谢谢！

## 设置

在我的`template.php`文件中，我有以下代码：

```
function MYTHEME_preprocess_user_profile(&$variables) {  
  $variables['profile'] = array(
    'top_section' => array(
      '#theme'  => 'profile_section',
      '#type' => 'top_section',
      'profile_section' => /* [several renderable elements] */,
    ),
    'bottom_section' => array(
      '#theme'  => 'profile_section',
      '#type' => 'bottom_section',
      'profile_section' => /* [several renderable elements] */,
    ),
  );
} 
```

因此，从本质上讲，该`MYTHEME_preprocess_user_profile()`函数创建了几个配置文件部分，分配给`$variables['profile']`.

然后我在我的主题中设置了一个`user-profile.tpl.php`模板文件。由于我正在使用 Zen 子主题，因此该文件位于我的主题目录中的“模板”目录中。它看起来像这样：

```
<h1 class="title">user-profile.tpl.php</h1>
<?php foreach(element_children($profile) as $section) {
  print render($profile[$section]);  
}
?> 
```

然后我设置了一个 MYTHEME_theme() 函数，如下所示：

```
function MYTHEME_theme($existing, $type, $theme, $path) {
  return array(
    'profile_section' => array(
      'render element' => 'profile_section',
      'template' => 'templates/profile-section',
    ),
  );
} 
```

最后，我`profile-section.tpl.php`在我的模板目录中设置了一个文件，如下所示：

```
<h2>profile-section.tpl.php</h2>
<p>Theming the profile section <strong><php print $profile_section['#type'] ?></strong> with the <strong>standard</strong> profile section template.</strong></p> 
```

有了这个，在大多数情况下，我得到了我希望主题如何对我的用户配置文件部分做出反应的所有所需行为。也就是说，对于我的每个个人资料部分，我可以将其主题化为“profile_section”。

## 问题

我还希望能够设置模板文件来处理特定配置文件部分的主题，基于我放入模板目录的新模板文件。所以，具体到这个例子，虽然我想`profile-section.tpl.php`处理大多数配置文件部分，但我还希望能够放入`profile-section--top-section.tpl.php`文件，清除缓存，并让主题将该文件用于“top_section”配置文件部分。

## 我的“解决方案”不起作用

我已经读到我的问题可以通过在适当的主题预处理函数中使用 theme_hook_suggestions 来解决。因此，就我而言，我编写了一个`MYTHEME_preprocess_profile_section()`函数，如下所示：

```
function MYTHEME_preprocess_profile_section(&$variables) {
  $variables['theme_hook_suggestions'][] = 'profile_section__' . $variables['profile_section']['#type'];
} 
```

然后我写了一个`profile-section--top-section.tpl.php`文件如下：

```
<h2>profile-section--top-section.tpl.php</h2>
<p>Theming the profile section <strong><php print $profile_section['#type'] ?></strong> with the <strong>top-sectoin</strong> profile section template.</strong></p> 
```

这完成了我的设置。我刷新缓存，但是...

主题仍然`profile-section.tpl.php`为我的 top_section profile_section 选择模板，而不是`profile_section__top_section.tpl.php`我写的更具体的模板。

我需要从这里做什么，或者我应该改变什么，以使这个设置从我的主题建议中获取`MYTHEME_preprocess_profile_section()`？

# c# - VS2010 显示隐式变量的类型为 'var' 而不是实际类型

> ID：10472753
> 
> 赞同：4
> 
> 时间：2012-05-06T17:43:01.047
> 
> 标签：c#, visual-studio-2010, c#-4.0, implicit-typing

我不确定这是一个错误还是其他什么。

我在 VS2010 中创建了一个新的 Web 应用程序项目。在项目中，我新建了一个类（Class1），内容如下：

```
public void Test()
{
    var s = "Hello";
    Console.WriteLine(s);
} 
```

当我将鼠标悬停`s`在 Console.WriteLine(s) 行上时，会出现一个显示 `(local variable) string s`. 太好了，正如我所料。

![正确显示 s 为字符串类型](../Images/8983581a6e102550189647aa9d74aa93.png)

现在，我将一个`App_Code`文件夹添加到项目中。在其中，我再次创建了一个新类（Class2），其内容完全相同（类名除外）。现在，当我悬停时`s`，它会显示`(local variable) var s`。

![错误地将 s 显示为 var 类型](../Images/21ad47d0d64189e4474327c67e360bdf.png)

为什么它显示`var`而不是`string`？这是一个错误吗？你能重现这种行为吗？

情况更糟。如果我将 Class2.cs 从 App_Code 文件夹移动到项目的根目录，VS2010 仍然不显示类型。即使重新启动 VS2010 并重新打开项目，VS2010 也会在 Class1 中显示正确的类型，但在 Class2 中不会。我也试过删除`.suo`和`.csproj.user`文件，但仍然没有区别。显然 VS2010 在某处缓存了这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:19:53.670

我认为这是由于`App_Code`文件夹而发生的。因为`App_Code`文件夹是在运行时编译的。正如 MSDN 在这里描述的那样。

> 在网站项目中，您可以将源代码存储在 App_Code 文件夹中，它会在运行时自动编译。Web 应用程序中的任何其他代码都可以访问生成的程序集。因此，App_Code 文件夹的工作方式与 Bin 文件夹非常相似，只是您可以在其中存储源代码而不是编译后的代码。App_Code 文件夹及其在 ASP.NET Web 应用程序中的特殊状态使得创建自定义类和其他仅源代码文件并在 Web 应用程序中使用它们成为可能，而无需单独编译它们。

[这是 MSDN 链接](http://msdn.microsoft.com/en-us/library/t990ks23.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:48:03.627

App_Code 目录是网站项目的特殊目录。

在 Web 应用程序项目中，放置在 App_Code 目录中的代码会被 VS 忽略。

在将网站迁移到 Web 应用程序项目时，[我注意到了这种行为。](http://devio.wordpress.com/2010/07/30/differences-between-web-site-project-and-web-application-project/)

# php - 是否可以获取包含在另一个域的文件夹的脚本中的脚本的域名？

> ID：10472755
> 
> 赞同：2
> 
> 时间：2012-05-06T17:43:37.567
> 
> 标签：php, include, dns

我的问题的一个例子：

我在域（例如）“root.co.uk”的文档根目录（htdocs 或其他任何内容）中有一个脚本，我想在其中生成指向“文件”域的链接：

/htdocs/include.file.php

```
<?php
  echo $_SERVER['HTTP_HOST']; // another.com -> but I like to have "root.co.uk" here :(
?> 
```

现在我有一个域（例如）“another.com”的子文件夹，它将通过浏览器加载：

/htdocs/another.com/index.php -> [http://www.another.com](http://www.another.com)

```
<?php
  include('/htdocs/include.file.php'); // Include file from "root.co.uk"
?> 
```

有没有办法传递域名？据我所知，唯一的解决方案是定义一个像 $maindomain = 'root.co.uk' 这样的变量。但这不是我喜欢的方式。:(

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:23:43.443

不，这是不可能的。

您的 PHP 文件中没有对 Web 服务器配置的引用，该配置指定了 docroot 中的哪些文件用于所服务的域。对于发出的一个请求，任何`$_SERVER`变量都会从 Web 服务器传递给 PHP。包含文件只不过是包含它们以执行，这意味着它们将在初始请求的上下文中运行。

# java - 客户端 GWT 中字符串和日期之间的转换

> ID：10472756
> 
> 赞同：1
> 
> 时间：2012-05-06T17:44:16.863
> 
> 标签：java, gwt, type-conversion

Using`SimpleDateFormat`是在 Java 中进行字符串 <-> 日期转换的标准方法。

但是这个类在 GWT [JRE Emulation 库](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation?hl=pl-PL)中不存在，所以我们不能在 GWT 客户端代码中使用它。

那么，进行这种转换的标准/推荐方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T18:07:55.073

如 中给出的示例[`Date Time Format`](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/i18n/client/DateTimeFormat.html)，这可能会有所帮助。

```
public class DateTimeFormatExample implements EntryPoint {

  public void onModuleLoad() {
    Date today = new Date();

    // prints Tue Dec 18 12:01:26 GMT-500 2007 in the default locale.
    GWT.log(today.toString(), null);

    // prints 12/18/07 in the default locale
    GWT.log(DateTimeFormat.getShortDateFormat().format(today), null);

    // prints December 18, 2007 in the default locale
    GWT.log(DateTimeFormat.getLongDateFormat().format(today), null);

    // prints 12:01 PM in the default locale
    GWT.log(DateTimeFormat.getShortTimeFormat().format(today), null);

    // prints 12:01:26 PM GMT-05:00 in the default locale
    GWT.log(DateTimeFormat.getLongTimeFormat().format(today), null);

    // prints Dec 18, 2007 12:01:26 PM in the default locale
    GWT.log(DateTimeFormat.getMediumDateTimeFormat().format(today), null);

    // A custom date format
    DateTimeFormat fmt = DateTimeFormat.getFormat("EEEE, MMMM dd, yyyy");
    // prints Monday, December 17, 2007 in the default locale
    GWT.log(fmt.format(today), null);
  }
} 
```

# scala - Scala：如何使用默认值初始化对象

> ID：10472758
> 
> 赞同：14
> 
> 时间：2012-05-06T17:44:30.747
> 
> 标签：scala, constructor, default-value

我认为这将通过一个例子更好地解释

我有以下案例类

```
case class Person(name: String = "no name", surname: String = "no surname") 
```

而且我想创建一个通用函数来填充它，例如，一个可能没有指定所有字段的 json 消息

我知道要使用默认值，简单的答案是不要将它们传递给构造函数，但是如果我有几个字段可能会或可能不会出现在 json 中，我应该使用一个巨大的 switch 语句来覆盖所有可能的组合缺少参数。在这种情况下，在阅读了 json 之后，我应该注意 name & surname present，no name，no surname and no name or surname case ...（哎呀，我希望我说清楚了）。

更准确地说，我正在尝试开发一个函数，允许我从以下 json 值创建一个人，当缺少某些参数时使用默认值

```
{ "name": "john", "surname": "doe" }
{ "surname": "doe" }
{ "name": "john" }
{ } 
```

这就是为什么我正在寻找一种更通用的方法来处理这个问题。

（我将展示一些伪代码来说明我想要实现的目标）

我在想类似的事情：

```
val p = Person(name= "new person name", surname= Unit) 
```

在这种情况下，姓氏应该获得默认值

或者类似的东西

```
val p = Person( Map( "name" -> "new person name" ) _* ) 
```

这样它也采用姓氏的默认值

或者也许在构造函数中这样做，如果我检测到一个空值（或无），我可以分配默认值。

事实上，我试图避免重复默认值的定义。

无论如何，实现这样的事情最惯用的方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-06T17:47:05.317

如果要使用默认值，通常只需省略该命名参数：

```
scala> val p = Person(name = "new person name")
p: Person = Person(new person name,no surname) 
```

但是，由于您想明确知道一个值是否应该被默认，您可以在构造函数中实现基于 Map 的想法。如果您不想重复默认设置，那么这两个选项如何：

## 选项 1：默认值的外部化常量

在外部设置默认值。在主构造函数和基于 Map 的构造函数中使用它们。

```
val nameDefault = "no name"
val surnameDefault = "no surname"

case class Person(name: String = nameDefault, surname: String = surnameDefault) {
  def this(m: Map[String, String]) =
    this(m.getOrElse("name", nameDefault), m.getOrElse("surname", surnameDefault))
} 
```

用法：

```
new Person(name = "new person name", surname = "new person surname")
new Person(Map("name" -> "new person name"))
new Person(name = "new person name") 
```

## 选项 2：可选的替代构造函数

您可能会发现这更简洁，因为它不依赖于外部常量。这里唯一的缺点是，如果你想只使用一些参数进行构造，你必须将每个参数都包装在`Some()`.

```
case class Person(name: String, surname: String) {
  def this(name: Option[String] = None, surname: Option[String] = None) =
    this(name.getOrElse("no name"), surname.getOrElse("no surname"))

  def this(m: Map[String, String]) = this(m.get("name"), m.get("surname"))
} 
```

用法：

```
new Person(name = "new person name", surname = "new person surname")
new Person(Map("name" -> "new person name"))
new Person(name = Some("new person name"))
new Person(name = "new person name") // can't do this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:58:40.317

我认为这可能是 Either 的一个用例。您可以指定具有两种类型的 Either。

```
val name: Eiter[String, Unit] = Left("name")
val surname: Either[String, Unit] = Right( () ) 
```

现在您可以检查您是否有一个 Left 或 Right 并使用您想要的参数调用构造函数。

# objective-c - 从另一个数组中减去一个 NSArray 中的对象

> ID：10472759
> 
> 赞同：32
> 
> 时间：2012-05-06T17:45:08.850
> 
> 标签：objective-c, cocoa, cocoa-touch, nsarray, subtraction

我有两个 NSArray：

```
NSArray *wants = [NSArray arrayWithObjects:
                  @"apples", 
                  @"oranges", 
                  @"pineapple", 
                  @"mango", 
                  @"strawberries", 
                  nil];
NSArray *needs = [NSArray arrayWithObjects:
                  @"apples", 
                  @"pineapple", 
                  @"strawberries", 
                  nil]; 
```

我想要`XOR`他们。像`wants - needs`这样的东西，我剩下的就是

```
[NSArray arrayWithObjects:
@"oranges", 
@"mango", 
nil]; 
```

我通常会经历一些繁重的循环，但我相信有一种更实用的方法。我应该怎么做？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-06T17:55:09.363

像这样的东西？

```
NSMutableArray *array = [NSMutableArray arrayWithArray:wants];
[array removeObjectsInArray:needs]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-18T19:28:52.923

使用谓词怎么样？

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"NOT (SELF IN %@)", needs];
NSArray *wants_needs = [wants filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-06T18:16:28.290

Kirby 的回答很好，但是：如果您不关心数组中元素的顺序，则应该使用集合。如果顺序很重要，您可以考虑`NSOrderedSet`. `-minusSet:`对于后者，您可以使用or`-minusOrderedSet:`方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T18:16:53.063

给定两个假设：顺序不重要（或可以恢复 - 例如，如果数组现在已排序）* 并且没有项目在任一数组中出现多次（尽管您可以为此使用计数集），a set 可能是一个不错的选择。

两个集合的 XOR（严格来说，对称差）是并集减去交集：

```
NSMutableSet * unioned = [NSMutableSet setWithArray:wants];
[unioned unionSet:[NSSet setWithArray:needs]];
NSMutableSet * intersection = [NSMutableSet setWithArray:needs];
[intersection intersectSet:[NSSet setWithArray:wants]];

[unioned minusSet:intersection]; 
```

* * *

*如果顺序很重要，您可以使用[`NSOrderedSet`](https://developer.apple.com/documentation/foundation/nsorderedset?language=objc).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T18:16:44.703

尝试这个：

```
NSArray *NSArray_XOR(NSArray *arr1, NSArray *arr2)
{
    NSMutableArray *results = [NSMutableArray array];

    for (int i = 0; i < arr1.count; i++) {
        id obj = [arr1 objectAtIndex:i];

        if (![arr2 containsObject:obj])
            [results addObject:obj];
    }

    for (int i = 0; i < arr2.count; i++) {
        id obj = [arr2 objectAtIndex:i];

        if (![arr1 containsObject:obj])
            [results addObject:obj];
    }

    // make a unmutable copy of the array.
    return [NSArray arrayWithArray:results];
} 
```

# javascript - 如何从 CanvasPixelArray 创建图像对象

> ID：10472762
> 
> 赞同：0
> 
> 时间：2012-05-06T17:45:42.440
> 
> 标签：javascript, image, canvas

我`<canvas>`在一个文档中有两个元素。

我想在 canvas1 上绘制一个形状，使用该`ctx1.getImageData()`方法复制该形状的部分并在 canvas2 上为这些部分设置动画。

我读到 using`ctx2.putImageData()`比 using 慢`ctx2.drawImage()`。

如何从JavaScript 中的 a （从调用返回）创建`Image`对象？`CanvasPixelArray``ctx1.getImageData()`

（注意：我不想复制整个 canvas1，而只是复制其中的一部分。另外，我不关心旧浏览器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:45:06.857

这应该做你想做的，除非我错过了什么：

`ctx2.drawImage(canvas1, source_x, source_y, source_width, source_height, dest_x, dest_y, dest_width, dest_height);`

该`drawImage()`函数适用于`image`和`canvas`元素，因此无需创建新`image`对象或临时对象，`canvas`除非您需要操作像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:01:58.020

我想我明白了。我必须创建一个临时画布元素，然后使用该`canvas.toDataURL()`方法。不过，我很想找到一个不使用临时画布的解决方案。

```
// ctx1 and ctx2 are the 2d context objects for canvas1 and canvas2

var image_data = ctx1.getImageData( 23, 43, 20, 20 );
var image = getImageObjectByImageData( image_data );

ctx2.drawImage( image, 20, 30 );

function getImageObjectByImageData( $image_data )
{
    var temp_canvas = document.createElement( 'canvas' );
        temp_canvas.height = $image_data.width;
        temp_canvas.width = $image_data.height;

    var temp_context = temp_canvas.getContext( '2d' );
        temp_context.putImageData( $image_data, 0, 0 );

    var img = new Image();
        img.width = $image_data.width;
        img.height = $image_data.height;
        img.src = temp_canvas.toDataURL();

    return img;
} 
```

# delphi - Delphi XE 中的无效指针操作 - 因为 IFTHEN？

> ID：10472764
> 
> 赞同：0
> 
> 时间：2012-05-06T17:45:54.577
> 
> 标签：delphi, pointers, delphi-xe, dynamic-arrays, if-statement

我已经阅读了这里关于 Delphi 中无效指针操作的大部分帖子，它们似乎不适用于这种情况......反复试验使我遇到了问题，但这对我来说没有任何意义。在此示例中，动态记录数组在解析文本文件时填充了文本文件的内容。除非分配给动态数组的内存被释放，否则一切正常 - 在这种情况下，我会收到“无效指针操作”。当我将有问题的行从 ifthen 语句更改为经典的 if-then 时，它可以工作。

我的问题很简单：为什么第一个导致它无法释放内存，而第二个却成功了？

第一个例子：

```
TempFTDB[ci].FTText := ifthen(TempHolder = '', '', TempHolder + #13#10) + lr; 
```

第二个例子：

```
if tempholder = '' then
    TempFTDB[ci].FTText := lr
else
    TempFTDB[ci].FTText := tempholder + #13#10 + lr; 
```

释放内存的行是：

```
TempFTDB := nil; 
```

进一步说明： TempFTDB 是一个局部变量，没有其他行可以释放它的内存。错误发生在“TempFTDB := nil”行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:38:16.457

好吧...事实证明，上面是一个红鲱鱼，有点。每当上述例程（上面摘录）第二次运行时，错误就会出现 - 当然听起来像未分配的内存......就在上面的代码之前是一个例程，用于重新编号临时记录数组中的项目，其中是问题......（一个令人尴尬的小错误......）

我有：

```
for i := 0 to length(FTDBFileBuffer_RTF) do
  begin
    FTDBFileBuffer_RTF[i].RecordNo := NewRecordNumber;
  end; 
```

代替

```
for i := 0 to length(FTDBFileBuffer_RTF) - 1 do //notice the - 1
  begin
    FTDBFileBuffer_RTF[i].RecordNo := NewRecordNumber;
  end; 
```

现在问题只是学术问题......*为什么*ifthen 命令的存在或不存在会强制显示错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:08:21.283

通常在使用 IfThen 时出现这种问题是因为 IfThen 方法需要 2 个字符串，如您在方法签名中所见：

```
function IfThen(AValue: Boolean; const ATrue: string; AFalse: string = ''): string; 
```

我不知道您发布的代码是否是实际代码，但我可以猜测“False”值处于错误状态，并且 IfThen 方法将始终执行**这两个**条件。

因此，如果您在“False”值中传递一个方法，并且此方法取决于您的条件为 false 才能执行，这可能会导致意外行为，因为它将**始终**被执行。

# javascript - jQuery.css('margin-left') 在移动 Webkit 上返回不正确的值

> ID：10472769
> 
> 赞同：1
> 
> 时间：2012-05-06T17:46:39.600
> 
> 标签：javascript, jquery, css, ios, mobile-safari

我正在使用 jQuery 从元素中获取一些 CSS 属性，使用`.css('prop')`.

在**iOS**上，jQuery`0px`在`margin-left`属性设置为时返回`auto`。这不会发生在我测试的其他任何地方，也不是由于应用了特定于设备的规则。

为了更加确定后者，我还检查了[WEINRE](http://phonegap.github.com/weinre/)中的代码，其中检查员显示了正确的`auto`值。

# 问：

知道为什么 jQuery 会返回`0px`而不是返回`auto`吗？

* * *

*用于访问有问题的 CSS 属性的代码（只是预缓存的东西）：*

```
this.data.marginRight = this.$el.css('margin-right')
// Firefox returns 'auto'
// Chrome returns 'auto'
// Safari returns 'auto'
// Mobile Safari returns '0px' 
```

# javascript - 如何使用 Flash 对象加载 div，但不显示它（元素已加载，未显示）

> ID：10472771
> 
> 赞同：0
> 
> 时间：2012-05-06T17:46:45.417
> 
> 标签：javascript, html, css, flash, swfobject

我正在寻找 和 之间的`display: none`东西`visibility: hidden`。换句话说，我希望加载 div 元素（带有 Flash 内容），但根本不显示。

更清楚地说：`swfobject.embedSWF`在 div 中嵌入了一个 flash 对象。当我`display`（通过javascript）从`block`to`none`再从`none`to 更改时`block`，它在不同的浏览器中的工作方式不同：

在 IE 中它就像我希望它工作一样工作 - 我将显示更改为`block`并且对象仍然存在，但在 Chrome 和 FF 中它再次加载，就像第一次`swfobject.embedSWF`被调用时一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:51:45.520

如何将其设置为

HTML（页面某处）

```
<body>
  <!-- other code -->
  <div id="my-div">
    <!-- your object / embed code -->
  </div>
</body> 
```

在 CSS

```
#my-div {
  left: -9999px;
  position: absolute;
} 
```

编辑：再次阅读您的问题时，我的理解有所不同...您想让 div 不在视线范围内...对吗？

所以你仍然可以使用下面提到的 jQuery 调用来显示它......但如果你想让它隐藏起来，上面的 CSS 应该足够了......仍然应该渲染和加载对象

```
$("#my-div").css({ position: "static" });

// or
$("#my-div").css({ left: 0 }); 
```

# java - 在每个 ' '-Tag处将字符串分解为数组

> ID：10472773
> 
> 赞同：0
> 
> 时间：2012-05-06T17:47:03.717
> 
> 标签：java, regex, oop, math

我有一个字符串是：

```
<p>1+: €0,09756<br>3.001+: €0,09338<br>
30.001+: €0,09338<br>150.001+: €0,09338<br>
750.001+: €0,09338<br>
</p> 
```

现在我想做的是我想调用`article.addPrice(new Integer(quantity), new Float(price));`这些由`<br>`. 意思是结果是：

```
article.addPrice(new Integer(1), new Float(0.09756));
article.addPrice(new Integer(3001), new Float(0.09338));
article.addPrice(new Integer(30001), new Float(0.09338));
article.addPrice(new Integer(150001), new Float(0.09338));
article.addPrice(new Integer(750001), new Float(0.09338)); 
```

整数被去除所有特殊字符，浮点数也是如此。货币符号将被忽略。如果下一行的价格与之前的价格相同，`article.addPrice`则不会执行。

这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:53:59.717

使用followig正则表达式怎么样？

```
(\d+(,\d+)?)\+: €(\d+(,\d+)?(\.\d+)?) 
```

编辑（由 abhusava 提供）：

```
String str = "<p>1+: €0.09756<br>3,001+: €0.09338<br>\n" + 
   "30,001+: €0.09338<br>150,001+: €0.09338<br>750,001+: €0.09338<br></p>";

Pattern pt = Pattern.compile("(\\d+(,\\d+)?)\\+: €(\\d+(,\\d+)?(\\.\\d+)?)");
Matcher m = pt.matcher(str);    
Float lastPrice = null;

while(m.find()) {
  Integer quantity = new Integer(m.group(1).replace(",",""));
  Float price = new Float(m.group(3).replace(",","").replace(".",","));

  // Only add price if different from last
  if (! price.equals(lastPrice))
    article.addPrice(quantity, price);
  lastPrice = price;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T17:54:21.640

对于初学者，用 . 分割字符串`s.split("<br>")`。这会根据要求为您提供一个字符串数组。你还需要消除启动`<p>`。然后，您可以使用 . 拆分数组中的每个条目`split("\\+: €")`。这为您留下了一个可解析为数字的字符串的二元素数组，除了逗号，您需要将其替换为点：`s.replace(',', '.')`。最后，使用`Integer.parseInt`和`Float.parseFloat`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T18:27:49.510

考虑这段代码：

```
String str = "<p>1+: €0,09756<br>3.001+: €0,09338<br>\n" + 
   "30.001+: €0,09338<br>150.001+: €0,09338<br>750.001+: €0,09338<br></p>";
Pattern pt = Pattern.compile("([^\\+]+)\\D+([\\d,]+)");
Matcher m = pt.matcher(str);
while(m.find()) {
    int quantity = Integer.parseInt(m.group(1).replaceAll("\\D+", ""));
    float price = Float.parseFloat(m.group(2).replace(',', '.'));
    System.out.printf("article.addPrice(new Integer(%d), new Float(%f));%n",
                       quantity, price);
} 
```

### 输出：

```
article.addPrice(new Integer(1), new Float(0.09756));
article.addPrice(new Integer(3001), new Float(0.09338));
article.addPrice(new Integer(30001), new Float(0.09338));
article.addPrice(new Integer(150001), new Float(0.09338));
article.addPrice(new Integer(750001), new Float(0.09338)); 
```

# python - 使用 Python 在 GoogleAppsEngine 中的文件上传和实时工作者

> ID：10472780
> 
> 赞同：0
> 
> 时间：2012-05-06T17:48:15.493
> 
> 标签：python, google-app-engine, blobstore

我对 pythonDev 和 GAE 还很陌生，只是从谷歌网站上运行“入门”，所以任何愚蠢的提示都会受到赞赏。

我想做以下事情：

1.  将文件上传到 BlobStore
2.  处理 blob 文件的“工作人员”。我所说的“工人”是指获取新添加文件的侦听器，这些文件可能是非常大的文本文件。
3.  保存进程日志并从 BlobStore 中删除文件
4.  然后，将处理后的数据保存到 bigTable

我正在使用此[视频](https://sites.google.com/site/io/rapid-development-with-python-django-and-google-app-engine)中提供的样板文件（可以在[此处](http://code.google.com/p/google-app-engine-django/downloads/detail?name=appengine_helper_for_django-r117.zip&can=2&q=)下载）

任何问题或进一步的解释，只要问。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:57:25.540

默认情况下，应用引擎是一个监听器。如果您已收到 blob，则可以启动一个任务来处理 blob。您可以在 GAE 文档中找到示例。

# symfony1 - 使用 ahDoctrineEasyEmbeddedRelationsPlugin 嵌入 i18n 翻译

> ID：10472782
> 
> 赞同：0
> 
> 时间：2012-05-06T17:48:31.890
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我正在使用 ahDoctrineEasyEmbeddedRelationsPlugin 向我的对象添加动态 i18n 翻译，所以我在我的对象 Form 类中写了这个

```
$this->embedRelations(array(
'Translation' => array( 
'considerNewFormEmptyFields' => array('content', 'lang')
)); 
```

我得到的结果是每条记录只有一个输入，“内容”。

我在 FormTranslation 类中试过这个，但没有运气：

```
$this->useFields(array('content', 'lang')); 
```

所以我所做的是与一个名为“translations”的 foreignAlias 创建一个手动学说关系，然后：

```
$this->embedRelations(array(
'translations' => array( 
'considerNewFormEmptyFields' => array('content', 'lang')
)); 
```

这几乎奏效了，我现在得到了 lang 字段，但只在现有翻译列表中，而不是在新翻译表单中

如果我可以归档这个有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:11:40.297

嗯，我总是使用例如“en”和“uk”文化：

```
 considerNewFormEmptyFields' => array('en','uk') 
```

# sql - 像 excel 一样在 SQL 中修改负数

> ID：10472783
> 
> 赞同：13
> 
> 时间：2012-05-06T17:48:36.067
> 
> 标签：sql, tsql

我在 SQL 服务器中复制 mod 函数时遇到问题。

在 excel 中，mod (-3, 7) = 4。但在 SQL 中，-3 % 7 = -3

我是在使用 % 错误，还是 SQL 做的 mod 不同？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-06T17:55:41.133

对于 x 的正值和负值，这将给出介于 0 和 n - 1 之间的结果：

```
((x % n) + n) % n 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T17:52:27.017

好吧，[模运算](http://en.wikipedia.org/wiki/Modular_arithmetic)是在整数的[等价类](http://en.wikipedia.org/wiki/Equivalence_class)上完成的，因此 Excel 和任何 RDBMS 都没有“`%`做错”。但是，如果您想要一个介于 0 和 6 之间的代表，您总是可以这样做

```
select (-3 % 7) + 7; 
```

# c# - C#实时生成声波

> ID：10472785
> 
> 赞同：1
> 
> 时间：2012-05-06T17:49:35.850
> 
> 标签：c#, audio

我想开始一些有趣的项目，并发现我对声音的兴趣。所以我想让一些东西有节奏地移动。但我不知道，例如，winamp（在图像中）如何生成值来绘制这些条。我怎么能在 C# 中实现它？有人可以给我一些提示吗？

编辑：我会弄清楚这个：[http ://wpfsvl.codeplex.com/](http://wpfsvl.codeplex.com/) ![红圈里的东西](../Images/03b33fa0dfc56bf619b1a01e5d0e6cd1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:47:53.227

您应该阅读[Fast Fourier Transforms](http://en.wikipedia.org/wiki/Fast_Fourier_transform)。

> 快速傅里叶变换 (FFT) 是一种计算离散傅里叶变换 (DFT) 及其逆变换的有效算法。

和

> DFT 将一系列值分解为不同频率的分量

使用 FFT，您可以将声波分解为其分量频率，即：您可以看到原始声波中不同频率的电平，然后将它们绘制成某种花哨的条形图，就像在您的图像中一样。

以下问题与 FFT 和 C# 有关： [An implementation of the fast Fourier transform (FFT) in C#](https://stackoverflow.com/questions/170394/fast-fourier-transform-in-c-sharp)

# c++ - 链表 C++，输出未显示在显示功能中

> ID：10472791
> 
> 赞同：-2
> 
> 时间：2012-05-06T17:50:44.180
> 
> 标签：c++

```
#include <string>

using namespace std;

class PersonList
{

private:
    char aName[7];
    int aBribe;
    PersonList *link;

public:
    void addNodes();
    void display();

};

#include <iostream>
#include <string>

using namespace std;

#include "mylink.h"

void PersonList::addNodes()
{

    PersonList *temp2;

    PersonList* startPtr = new PersonList();
    PersonList* current = new PersonList();

        PersonList *temp = new PersonList();//created the first node on the list
        cout<<"Enter the person's name: ";
        cin>>temp->aName;
        cout<<"Enter the person's contribution: ";
        cin>>temp->aBribe;
        temp->link=NULL;//when i get last node, link will point to null(where am i in list?)

        if(startPtr==NULL)
        {
            startPtr = temp;
            current = startPtr;
        }

        else
        {
            temp2 = startPtr;

            while(temp2->link!=NULL)
                temp2 = temp2->link;
            temp2->link=temp;
        }
    //}
}

void PersonList::display()
{
    PersonList *temp;
    PersonList *startPtr = this;

    temp=startPtr;

    while(temp != NULL)
    {
        cout<<temp->aName<<"\t\t"<<temp->aBribe<<endl;
        temp = temp->link;
    }

}

#include <iostream>
#include "mylink.h"

using namespace std;

int displayMenu (void);
void processChoice(int, PersonList&);

int main()
{
int num;

PersonList myList;

do 
{
num = displayMenu();
if (num != 3)
processChoice(num, myList);
} while (num != 3);

return 0;
}

int displayMenu(void)
{
int choice;
cout << "\nMenu\n";
cout << "==============================\n\n";
cout << "1\. Add student to waiting list\n";
cout << "2\. View waiting list\n";
cout << "3\. Exit program\n\n";
cout << "Please enter choice: ";
cin >> choice;

cin.ignore();
return choice;
}

void processChoice(int choice, PersonList& p)
{

switch(choice)
{
case 1: p.addNodes();
break;
case 2: p.display();
break;
}

} 
```

我的问题是显示功能不显示我输入的名称和贡献。我使用临时变量作为指针节点来调用 aName 和 aBribe。当它没有达到空值时，它会遍历列表。输出中没有显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:53:55.617

您正在创建一个新列表：

```
PersonList *startPtr = new PersonList(); 
```

然后展示出来。所以，自然是空的。

您的 addNodes 方法中有类似的问题。您正在将节点添加到新列表中，然后将其丢弃，这实际上是内存泄漏。

# cordova - 当代码进入“成功”或“失败”块时导航到另一个视图

> ID：10472794
> 
> 赞同：1
> 
> 时间：2012-05-06T17:51:32.870
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

以下代码来自我的 Controller 类；

1.) 当代码进入`Success`or`Failure`块时，我需要程序导航到另一个视图，该视图将显示`Registration View`or `Information View`。

```
 Ext.Ajax.request({
                        url: 'http://call.com/the_webservice',
                        params : values,

                        failure: function (response) {
                        var text = response.responseText;
                         // SHOW SIGN UP SCREEN

                        },                              success: function (response) {
                        var text = response.responseText;
                         // GO TO ANOTHER VIEW AND IT WILL SHOW THE USER WITH SOME INFORMATION

                        }

                        }); 
```

**更新**

在 app.js 中

```
views: ['Main','HomePage','Register'], 
```

和

```
launch: function() {

        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        // Initialize the main view
        Ext.Viewport.add(Ext.create('app.view.Main'));

                Ext.Viewport.add(app.view.Register);

    }, 
```

然后在 ControllerPage.js 中按下按钮...

```
success: function (response) {
                            var text = response.responseText;
                            var result = Ext.decode(response.responseText);
                            Ext.Viewport.setActiveItem(0);

                             console.log("success");

                            } 
```

控制台日志，`success`被打印，但视图没有导航到`Register`视图

**更新 2**

我没有使用过`tabPanel`，在我的代码中，我习惯于`tabBarPosition: 'bottom',`在屏幕底部显示选项卡。你能告诉我如何在视图之间导航，其中也包括 tabbarpanel。以下代码是我的 Main.js，这是我包含选项卡的地方。

```
Ext.define("app.view.Main", {
    extend: 'Ext.tab.Panel',

    config: {
        tabBarPosition: 'bottom',

        items: [
            {
                xtype:'formReq'

            }
        ]
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:26:46.133

你的问题不是很精确。不过，如果您询问如何在页面之间导航，这完全取决于它们的设置方式。假设您将两个视图（RegistrationView 和 InformationView）添加到应用视口（Ext.ViewPort）：

```
Ext.Viewport.add(MyApp.view.RegistrationView)
Ext.Viewport.add(MyApp.view.InformationView) 
```

那么你所要做的就是：

```
Ext.Ajax.request({
                    url: 'http://call.com/the_webservice',
                    params : values,

                    failure: function (response) {
                    var text = response.responseText;
                    Ext.ViewPort.setActiveItem(0);

                    },                              
                    success: function (response) {

                    var text = response.responseText;
                    Ext.ViewPort.setActiveItem(1);
}); 
```

这只是一种方法（也许不是最好的）。希望这可以帮助。

# c++ - 将原始数据写入文件并使用 bin2c

> ID：10472795
> 
> 赞同：0
> 
> 时间：2012-05-06T17:51:38.693
> 
> 标签：c++, binary

好的，所以我对 C++ 相当陌生，我遇到了一个程序，它可以获取 exe 或 bin 文件并将其放入 .h 文件中以与 C++ 一起使用。我遇到的问题是如何将 bin2c 生成的原始数据写入文件，然后重现相同的 exe。您可以在下面找到原始数据的代码。（使用 cygwin 编译。）我不在 PC 上，所以我无法使用代码标签来显示代码抱歉。

```
const unsigned char raw_data[] = {
    0x21, 0x20, 0xc2, 0xa6, 0xc3, 0xb4, 0xc2, 0xbf,
    0xc3, 0x82, 0xc3, 0x8b, 0xc2, 0xa4, 0x20, 0xc3,
    0x8d, 0xc3, 0x8c, 0x4c, 0x3f, 0x20, 0x20, 0xc3,
    0x80, 0xc3, 0xbf, 0x20, 0x20, 0xc3, 0x80, 0xc3,
    0xbf, 0xc2, 0xa5, 0x20, 0xc5, 0xa1, 0xe2, 0x84,
    0xa2, 0xc2, 0xa9, 0x40, 0x20, 0x20, 0xc3, 0x80,
    0xc3, 0xbf, 0x20, 0x20, 0xc3, 0x80, 0xc3, 0xbf,
    0x60, 0x20, 0x6f, 0x72, 0x20, 0x60, 0x21, 0x20,
    0x48, 0xc2, 0xb7, 0xc3, 0xb4, 0xc2, 0xbf, 0xc3,
    0x82, 0xc3, 0x8b, 0xc2, 0xa4, 0x20, 0xc3, 0x8d,
    0xc3, 0x8c, 0x4c, 0x3f, 0x20, 0x20, 0xc3, 0x80,
    0xc3, 0xbf, 0x33, 0x33, 0x33, 0x3f, 0xc2, 0xa5,
    0x20, 0xc5, 0xa1, 0xe2, 0x84, 0xa2, 0xc2, 0xa9,
    0x40, 0x20, 0x20, 0xc3, 0x80, 0xc3, 0xbf, 0x66,
    0x66, 0xc2, 0xa6, 0x40, 0x0a,
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:57:43.037

使用标准 C++ I/O 体操：

```
#include <fstream>

std::ofstream outfile("output.bin", std::ios::binary);

if (!outfile) { /* error, die! */ }

outfile.write(reinterpret_cast<char const *>(raw_data), sizeof raw_data); 
```

如果您愿意，您可以将数组声明为`const char`数组并取消强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T02:38:00.187

还有我用 C++ 14 制作的 bin2c 转换工具。最棒的是它是开源的，不仅适用于 Windows，而且适用于 OSX (MAC) 和 linux。

你可以在[https://www.github.com/AraHaan/bin2c](https://www.github.com/AraHaan/bin2c)找到它<-- 这个链接肯定不会移动，除非 github 改变了位置，很明显他们不应该。

我的工具最好的部分是它的速度取决于文件大小，但至少它可以工作。当我发现这里和那里是否存在错误时，我会经常更新它，但至少它可以完成工作。我还添加了一点编译时间技巧，如果当月的日期小于 10，它会去除其中的一个空格，以使处理后的文件看起来不错。当前版本是 v0.15.0 到。此外，如果您想知道为什么 1 构建失败，那是因为 travis 没有 clang 3.9 和 g++ 5.3+。但是，我建议在 g++ 6 或 clang 3.9 上构建它（由于实验性 C++ 14 文件系统头文件，它处理的最低版本）。

希望这有助于解决其他想要 bin2c 工具的人。我的也可以将文件制作成 C# 数组，以供那些想要这样做的人使用。

我的 bin2c 工具也有一个测试，它也提供了一个示例，该示例如下：

```
#include <string>
#include <iostream>
#include <fstream>
#include "VP.hpp"

int main()
{
    std::string created_msg = "Created ";
    created_msg += IMAGE_VP_NAME;
    created_msg += ".";
    std::string FILE_NAME = ".\\";
    FILE_NAME += IMAGE_VP_NAME;
    std::ofstream f(FILE_NAME, std::ios::out | std::ios::binary | std::ios::ate);
    f.write(reinterpret_cast<char const *>(IMAGE_VP), IMAGE_VP_SIZE);
    std::cout << created_msg << std::endl;
    std::cin.ignore();
    return 0;
} 
```

# python - 在 Python 上编写特定的 if else 语句

> ID：10472797
> 
> 赞同：-4
> 
> 时间：2012-05-06T17:51:42.637
> 
> 标签：python, if-statement

我正在用 Python 编写一个汇编程序，我只需要一些帮助来编写一个 if else 语句。我有以下要转换为二进制的机器语言指令。

```
@i

D=M // D=i

@100

D=D-A // D=i-100 
```

我将如何写一个语句，以便它删除/忽略评论和空格。在我看来，它将删除/忽略 / 之后的任何内容，并跳过该行直到它到达一个字母，但我不知道如何写这个。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:03:28.570

```
with open('in.txt') as f:
    lines=f.readlines()
for line in lines:
    line=line.strip()
    if line:
     if '//' in line:
         ind=line.find('//')
         print(line[:ind])
     else:
         print(line) 
```

**输出**：

```
@i
D=M 
@100
D=D-A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:57:38.753

请按照以下示例进行操作。

if-else 代码块：

```
#!/usr/bin/python

var1 = 100
if var1:
   print "1 - Got a true expression value"
   print var1
else:
   print "1 - Got a false expression value"
   print var1

var2 = 0
if var2:
   print "2 - Got a true expression value"
   print var2
else:
   print "2 - Got a false expression value"
   print var2

print "Good bye!" 
```

输出：

```
1 - Got a true expression value
100
2 - Got a false expression value
0
Good bye! 
```

if-elif-else 代码块：

```
#!/usr/bin/python

var = 100
if var == 200:
   print "1 - Got a true expression value"
   print var
elif var == 150:
   print "2 - Got a true expression value"
   print var2
elif var == 100:
   print "3 - Got a true expression value"
   print var
else:
   print "4 - Got a false expression value"
   print var

print "Good bye!" 
```

输出：

```
3 - Got a true expression value
100
Good bye! 
```

# architecture - CouchDB 中 _id 和 _rev 的数据安全性

> ID：10472799
> 
> 赞同：1
> 
> 时间：2012-05-06T17:52:06.503
> 
> 标签：architecture, nosql, couchdb

这几乎可以肯定是一个愚蠢的问题，但我想要安全，所以我认为它总是值得仔细检查。

只要我有适当的身份验证（在我的情况下，cookie 基于 1 个数据库到 1 个用户的基础），那么在与该文档相关的每个 GET/PUT中暴露完整的文档内容（即包括`_id`和）是否有任何风险？`_rev`

我的意思是，是否有任何可以想象的方式来提供*整个*文档，而不仅仅是它的核心数据可以导致更新更容易被篡改？

`_rev`将 暴露给客户端的唯一方法是`HEAD`在每个之前执行请求 [服务器端]`PUT`以获得最新的修订号 - 这看起来很疯狂！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T00:10:06.063

提供*整个*文档不会导致更新更容易被篡改。

如果您使用的是基于数据库的安全性，那么您就有了完美的基础。

强制读取安全的主要策略是`_security`对象。强制写入安全的主要策略是`validate_doc_update`函数。

所以我认为 _id 和 _rev 不会影响您的应用程序的安全评估。

# javascript - html5, javascript - 添加推特页面部分的功能

> ID：10472800
> 
> 赞同：0
> 
> 时间：2012-05-06T17:52:12.547
> 
> 标签：javascript, html, twitter

我一直在看一个名为 TwitThis 的插件，但它是用于在推特上发布您当前所在页面的地址/详细信息。

我想要实现的是相当于：

（显然这只是概念性的，在有人说“你不能像你那样编码！”之前）

```
<ul>
  <li>Short section of text <tweet button> </li>
  <repeat ad nauseum>
</ul> 
```

按下推文按钮将推文该 HTML 标记的内容

这有点奇怪，我知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:13:14.307

不需要 JS 库。使用[Twitter 意图](https://dev.twitter.com/docs/intents#tweet-intent)。

HTML：

```
<ul>
    <li><span>some text</span><button>Tweet</button></li>
    <li><span>some other text</span><button>Tweet</button></li>
</ul>​ 
```

JavaScript：

```
$('button').click(function() {
    window.open("https://twitter.com/intent/tweet?text="+$(this).parent().find('span').text());
});​ 
```

[小提琴](http://jsfiddle.net/FNDGw/1/)

# android - 遍历 ListView 时出现 NullPointerException

> ID：10472802
> 
> 赞同：0
> 
> 时间：2012-05-06T17:52:28.363
> 
> 标签：android, android-listview

代码：

```
SimpleCursorAdapter ada = new SimpleCursorAdapter(this,
                R.layout.custom_layout, ssCursor, new String[] {
                        "String" }, new int[] {
                        R.id.txt2 });
        lvSms.setAdapter(ada); 

  btnDel.setOnClickListener(new View.OnClickListener() {

            private ArrayList<String> msgArr;

            public void onClick(View v) {

                LinearLayout ly = (LinearLayout) findViewById(R.id.lv);
                ListView lvMsg = (ListView) ly.getChildAt(3);
                int listCount = lvSms.getCount();
                for (int a = 0 ; a < listCount ; a++)
                {

                    LinearLayout ll = (LinearLayout) lvMsg.getChildAt(a);
                    LinearLayout l2 = (LinearLayout) ll.getChildAt(0);
                    LinearLayout l3 = (LinearLayout) l2.getChildAt(0);
                    CheckBox chkBox =(CheckBox) l3.getChildAt(0);
                    boolean valueOfChkBox = chkBox.isChecked();
                    if (valueOfChkBox) {
                        LinearLayout l4 = (LinearLayout) l2.getChildAt(1);
                        TextView txt1 = (TextView) l4.getChildAt(0);
                        msgArr = new ArrayList<String>();
                        msgArr.add(txt1.getText().toString());
                        Log.i("hello", txt1.getText().toString());
                    }

                    } }); 
```

我得到一个`NullPointerException`, as`getChildAt`返回可见行，我还必须检查不可见行，无论它们是否被选中。那么我怎么能在单独的按钮上检查它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:57:21.927

`LinearLayout ly = (LinearLayout) findViewById(R.id.lv);`

上面的行 - 它是否尝试采用根布局？如果是这样，您不能使用`findViewById`. 而是使用：

`getLayoutInflater().inflate(R.layout.mylayout)`

`getLayoutInflater()`是Activity的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:19:03.497

我猜你想`TextView`从在`ListView`. 您不能使用`getChildAt()`并且只解析所有行，而是应该使用您在适配器中传递的数据，游标（并找出检查了哪些行）。因为您使用自定义行进行布局，所以您必须以某种方式维护`checked/unchecked`行的状态`CheckBoxes`（使用自定义适配器）。何时获取文本，单击`Button`，然后只需找出当前检查的行并直接从光标中提取您想要的文本。

存储状态的一种简单方法`CheckBoxes`是`ArrayList<Boolean>`根据`CheckBox`您的行为进行修改（可能效率不高）：

```
private class CustomAdapter extends SimpleCursorAdapter {
            // this will hold the status of the CheckBoxes
        private ArrayList<Boolean> checkItems = new ArrayList<Boolean>();

        public CustomAdapter(Context context, int layout, Cursor c,
                String[] from, int[] to) {
            super(context, layout, c, from, to);
            int count = c.getCount();
            for (int i = 0; i < count; i++) {
                checkItems.add(false);
            }

        }

            //this method returns the current status of the CheckBoxes
            //use this to see what CheckBoxes are currently checked
        public ArrayList<Boolean> getItemsThatAreChecked() {
            return checkItems;
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {
            super.bindView(view, context, cursor);
            int position = cursor.getPosition();
            CheckBox ckb = (CheckBox) view.findViewById(R.id.checkBox);
            ckb.setTag(new Integer(position));
            ckb.setChecked(checkItems.get(position));
            ckb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    Integer realPosition = (Integer) buttonView.getTag();
                    checkItems.set(realPosition, isChecked);
                }

            });
        }

    } 
```

然后解析`ArrayList`您从中`getItemsThatAreChecked()`获取的数据并从游标中提取数据。这里有一个小例子[http://pastebin.com/tsZ6mzt9](http://pastebin.com/tsZ6mzt9)（或这里 git://gist.github.com/2634525.git 与布局）

# asp.net-mvc-3 - 布局使用的 MVC3 参数

> ID：10472805
> 
> 赞同：0
> 
> 时间：2012-05-06T17:53:01.467
> 
> 标签：asp.net-mvc-3, navigation

我有一个使用自定义布局的自定义部分。此部分是动态的，所有操作都将收到 YEAR 参数。我不想通过视图内部的部分设置导航。在布局使用的导航操作中获取此参数的最佳方法是什么？如果年份在 URL 中为 ?year=2012 ，那么我可以通过查询字符串获取它。我的问题是这可能作为控制器/动作/2012 在那里。我如何在导航操作中获得现在的年份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:02:54.747

如果您将路线定义为，controller/action?year=2012 和 controller/action/2012 基本相同

```
{controller}/{action}/{year} 
```

在行动中

```
public class MyController:Controller
{
    public ActionResult MyAction(int year)
    {
     :
     :
     :
    }
} 
```

如果您已经定义了上述路由以及默认路由（ {controller}/{action}/{id} ）

url MyController/MyAction?year=2012 和 MyController/MyAction/2012 将被平等对待。

# visual-c++ - Eclipse Makefile 项目和 Visual C++ 编译器

> ID：10472813
> 
> 赞同：2
> 
> 时间：2012-05-06T17:54:56.673
> 
> 标签：visual-c++, makefile, eclipse-cdt

我正在尝试使用 Eclipse (CDT) 来制作一个可移植的 C++ makefile 项目，我可以在不同的平台上进行编译。我正在设置构建配置以使用每个平台的本机编译器。对于 Windows，这意味着 Visual C++。

目前，我遇到了两个不同的问题。第一个是我无法让 Eclipse 识别我正在尝试使用的包含路径。在我的计算机上，我的编译器位于`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include`. 我在特定于 Windows 的构建配置下进入我的项目设置，并将其添加到 C/C++ 常规 -> 路径和符号 -> 包含 -> C++ 源文件。Eclipse 仍然抱怨它找不到我要包含的文件。

我遇到的第二个问题是 make 找不到编译器可执行文件。我正在使用通过 Cygwin 安装的 make 副本，这可能是也可能不是问题。我想知道是否有一个类似于 make 的 Windows 程序，我可以使用它来构建我的 Windows 项目。

对不起，两个问题合二为一，我只是觉得用一块石头杀死两只鸟会更容易。

# javascript - 如何使用正则表达式替换所有 $#8211; 用 - 在 javascript 中？

> ID：10472814
> 
> 赞同：-6
> 
> 时间：2012-05-06T17:55:00.853
> 
> 标签：javascript, regex, replace

> **可能重复：**
> [替换字符串中的所有匹配项](https://stackoverflow.com/questions/6064956/replace-all-occurrences-in-a-string)

我找到了这个问题/答案：

[使用 JavaScript 正则表达式将数字 HTML 实体替换为其实际字符](https://stackoverflow.com/questions/4292320/use-javascript-regex-to-replace-numerical-html-entities-with-their-actual-charac)

我只需要替换一个实体。如何将特定模式与正则表达式匹配？

我对正则表达式了解不多，所以我这样做了：

```
.replace('&#8211;', '&ndash;') 
```

但它显然只取代了第一个实例。

谢谢，

托马斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T18:04:03.797

该`replace`方法仅在您使用字符串时替换第一次出现。使用正则表达式，以便您可以指定全局标志`g`：

```
.replace(/&#8211;/g, '&ndash;') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:03:22.040

```
.replace(/&#8211;/g, '&ndash;') 
```

该`g`标志表示全局，因此它替换所有实例。

# mongodb - 删除所有嵌入的文档

> ID：10472815
> 
> 赞同：0
> 
> 时间：2012-05-06T17:55:01.513
> 
> 标签：mongodb, mongodb-query

我想从集合中删除所有嵌入的文档，但我不知道该怎么做。

我尝试了几种方法，但我认为这个应该可行：

```
Products.update({_id: data._id}, { $pull : { orders : {$gte: 0} } }); 
```

Products 是集合，orders 是嵌入文档的数组。

删除所有`orders`索引大于或等于 0 的地方。

没运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:56:28.673

试试这个

```
db.products.update({_id: data._id},
                   {$unset: {orders: 1}}) 
```

或这个

```
db.products.update({_id: data._id},
                   {$set: {orders: []}}) 
```

# ruby-on-rails - Ubuntu：rails服务器无法执行

> ID：10472818
> 
> 赞同：0
> 
> 时间：2012-05-06T17:55:18.480
> 
> 标签：ruby-on-rails, ruby, ubuntu

Ubuntu 12.04

当我执行时：rails server

我得到一些似乎自相矛盾的信息（1.9.3 和 1.8.7？）

```
/home/byoung/.rvm/gems/ruby-1.9.3-p194/gems/pg-0.13.2/lib/pg_ext.so: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]

sudo ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

sudo rails 服务器启动得很好，但运行的是 1.8.7 版

**编辑**是的，我有 RVM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:06:23.810

当你切换到 sudo 时，你将离开你的 shell，RVM 在那里有设置商店。在你的 shell 中，它使用的是 1.9.3，但在 sudo 中，它使用的是默认的 1.8.7

一般来说：不要将 sudo 与 rvm 一起使用。

# c++ - cud（编译单元数据）数组值的意义是什么？

> ID：10472821
> 
> 赞同：0
> 
> 时间：2012-05-06T17:56:03.760
> 
> 标签：c++, oracle

（编译单元）数组值的意义是什么？

如何确定我的程序需要什么值？

我正在使用 Linux 5 和 Oracle 11g。

请解释以下内容：

```
/*  (compilation unit ) array */
static const short sql0[] =
{12,4130,1,0,0,
5,0,0,1,0,0,273,111,0,0,1,1,0,1,0,1,9,0,0,
24,0,0,2,0,0,273,136,0,0,1,1,0,1,0,1,9,0,0,
43,0,0,3,0,0,273,161,0,0,1,1,0,1,0,1,9,0,0,
62,0,0,4,0,0,273,184,0,0,1,1,0,1,0,1,9,0,0,
81,0,0,5,0,0,273,212,0,0,1,1,0,1,0,1,9,0,0,
100,0,0,6,0,0,273,238,0,0,1,1,0,1,0,1,9,0,0,
119,0,0,7,0,0,273,262,0,0,1,1,0,1,0,1,9,0,0,
138,0,0,1,0,0,301,302,0,0,2,2,0,1,0,1,9,0,0,1,9,0,0,
161,0,0,1,0,0,269,306,0,0,1,0,0,1,0,2,9,0,0,
180,0,0,2,0,0,301,343,0,0,1,1,0,1,0,1,9,0,0,
199,0,0,2,0,0,269,348,0,0,2,0,0,1,0,2,9,0,0,2,9,0,0,
222,0,0,3,0,0,277,394,0,0,2,2,0,1,0,1,9,0,0,1,9,0,0,
245,0,0,3,0,0,277,419,0,0,1,1,0,1,0,1,9,0,0,
264,0,0,5,0,0,277,455,0,0,3,3,0,1,0,1,9,0,0,1,9,0,0,1,9,0,0,
291,0,0,6,0,0,277,493,0,0,3,3,0,1,0,1,9,0,0,1,9,0,0,1,9,0,0,
318,0,0,7,0,0,301,524,0,0,1,1,0,1,0,1,9,0,0,
337,0,0,7,0,0,269,525,0,0,1,0,0,1,0,2,9,0,0,
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:08:29.320

该注释仅说明该数组具有内部链接（`static`在此上下文中表示内部链接），这意味着它只能在当前翻译（编译）单元中访问。从定义来看，这有点明显，但我想这意味着明确表示它是故意的。这是一个注释，所以它对编译器没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T17:43:46.483

我知道这是一篇旧文章，但我为我对 Oracle CUD 的分析感到自豪，但我没能过多地展示它！

CUD 是一个大整数数组，用于描述使用 Pro*C 编译的文件中嵌入式 SQL 语句的各个方面。通过实验，我对这些数据的结构及其使用方式做出了有根据的猜测。请记住，我已经使用 Oracle 11 对 Solaris 进行了研究，我使用的 CUD 数据看起来与您在此处的数据略有不同，因此数据值的位置可能不同。这是您数据中的随机行：

138,0,0,1,0,0,301,302,0,0,2,2,0,1,0,1,9,0,0,1,9,0,0,

CUD 的每一行（除了前 6 个值）都以全局偏移量开始。在这种情况下，它是 138（索引 0）。第一个 1（索引 3）可能代表查询的类型（选择、获取、打开游标、关闭游标、连接等）。301（索引 6）很可能是查询语句字符串本身的长度。302（索引 7）指的是 Pro*C 在代码中插入的 pragma 语句。在我的系统上，我会在我的代码中搜索“#line 302”以查看对 CUD 的这一行的查询。索引 10 指的是与此查询相关联的绑定变量的数量（在本例中只有 2 个）。绑定变量本身的数据从索引 15 开始，每个变量有 4 个数据元素（在本例中都有 1、9、0、0）。这些值中的第一个确定绑定变量的使用方式。值 1 表示变量用于 where 子句。2 表示正在选择/提取的变量。第二个值（本例中为 9）指的是变量的类型（整数、字符等）。

我决定了解有关 CUD 的这些信息，以便我可以放入一些自定义日志记录代码，这些代码将在我的应用程序发生查询时输出查询。

# button - 关闭 Like 按钮 - Soundcloud Widget 参数

> ID：10472828
> 
> 赞同：0
> 
> 时间：2012-05-06T17:57:32.187
> 
> 标签：button, soundcloud, social-media-like

我正在尝试关闭“赞”按钮，但参数“赞”不起作用并且仍然显示“赞”按钮（其他人喜欢：展示艺术，评论还可以）

我的 iframe：

```
<iframe width="100%"  height="450" scrolling="yes" frameborder="no" src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2F<?php echo $id; ?>&show_artwork=true&show_comments=false&show_playcount=false&liking=false></iframe> 
```

播放列表是私人的。

```
$id = "playlists%2F1234567%3Fsecret_token…" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:03:27.943

当您在末尾添加“&sharing=false&buying=false”时它有效 当“like=false”位于 iframe 末尾时它不起作用

# javascript - jquery点击播放视频

> ID：10472829
> 
> 赞同：1
> 
> 时间：2012-05-06T17:57:38.090
> 
> 标签：javascript, jquery, html, jquery-mobile

我从服务器获得了一个动态构建的 html 表。最终它给了我一张看起来像这样的表格：

```
<div id="player"></div>

<table id="webcam-table">
            <thead>
            <tr>
                <th>Camera Name</th>
                <th>Date Created</th>
            </tr>
            </thead>
            <tbody>             
            <tr >
                <td onclick="DoNav('http://myserver.com:1935/recordings/myfile1.mp4');">
                    Default camera 
                </td>
                <td onclick="DoNav('http://myserver:1935/recordings/myfile1.mp4');">
                    06 May 2012 07:25:01 
                </td>
                </tr>

            <tr >
                <td onclick="DoNav('http://myserver.com:1935/recordings/myfile2.mp4');">
                    Default camera 
                </td>
                <td onclick="DoNav('http://myserver.com:1935/recordings/myfile2.mp4');">
                    06 May 2012 07:24:47 
                </td>
                </tr>
</tbody></table> 
```

如果有人单击表格上的行，它会调用 DoNav 函数来插入视频。

```
function DoNav(theUrl)
{
   var mydiv = $("#player");
   var myvideo = $("<video id='myfileplayer' src='"+ theUrl +"' width='280' height='200' controls></video>");
   $mydiv.append($myvideo);
   $(myvideo).click(function(){
       $mydiv.show();
});
} 
```

如果我单击任何行，我目前没有视频。我正在为 iDevices 创建此代码，因此我很难获得任何调试信息。但它似乎没有显示任何 javascript 错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:03:19.660

看起来你正在引用你的变量`$`

```
var mydiv 
```

可以通过`mydiv.property`not访问`$mydiv.property`

您应该查看 jQuery`on`函数，而不是使用`onclick`标记中的每个表列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:58:55.917

而不是`$mydiv.append($myvideo);`尝试`mydiv.append($myvideo);` 也更改`$(myvideo).click`为`myvideo.click`和`$mydiv.show();``mydiv.show();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T18:01:31.323

```
function DoNav(theUrl)
{
   var mydiv = $("#player");
   var myvideo = $("<video id='myfileplayer' src='"+ theUrl +"' width='280' height='200' controls></video>");
   mydiv.append(myvideo);
   $("#myfileplayer").click(function(){
       //$(this).load(); //active this later
       $(this).play();
   });
} 
```

# php - 如何使用 preg_match 返回只需要的匹配

> ID：10472833
> 
> 赞同：3
> 
> 时间：2012-05-06T17:57:43.260
> 
> 标签：php, regex, pattern-matching, preg-match

我正在尝试从这样的uris列表中解析一个整数：

```
uri.com/upload/123456789_abc.ext 
```

我正在使用这种模式：

```
preg_match( "#uri\.com\/upload\/(.*?)_#is", $uri, $match ); 
```

哪个有效并返回：

```
Array
(
    [0] => uri.com/upload/123456789_
    [1] => 123456789
) 
```

但我想知道是否有办法让 $match == "123456789" 而不是返回具有多个值的数组。

**是否可以仅通过修改模式来做到这一点？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T20:20:11.413

它总是会返回一个数组，但您可以更改模式，使其只匹配您想要的。

```
$uri = "uri.com/upload/123456789_abc.ext";
preg_match('#(?<=uri\.com/upload/)\d+#is', $uri, $match );
print_r($match); 
```

返回

> 数组（ [0] => 123456789 ）

所以它仍然是一个数组，但它只包含整个匹配项，即你的号码。

`(?<=uri\\.com/upload/)`是一个lookbehind，它与那个部分不匹配，所以它不是结果的一部分。

`\d+`仅匹配数字，因此`_`不再需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:02:36.040

不在php中。另一方面，在 perl 中，您确实有自动变量，例如 $1、$2 引用最后一个匹配的正则表达式。也就是说，在您的示例中，执行匹配后， $1 变量将保存整数。

所以这个想法通常是可以的。你会喜欢 perl .. :-)

# ios - CCRenderTexture 吞噬了我的记忆

> ID：10472834
> 
> 赞同：1
> 
> 时间：2012-05-06T17:58:26.550
> 
> 标签：ios, memory, cocos2d-iphone, textures

我尝试在 cocos2d 的后台线程中渲染纹理，并且进展顺利，除了由于某种原因我无法在不再使用时释放纹理。

首先异步加载两个图像，然后我运行一个后台任务来渲染一个新图像。正如我所说的一切正常，问题是我的应用程序在调用这些函数几次后崩溃。我不知道如何做更多的清理工作。注销我的可用内存告诉我每次都会丢失 10-15 mb （gfx1 和 gfx2 是视网膜全屏背景）。

问题必须在这些代码行中，因为当我删除它们时，我不再有内存问题，并且分析我的应用程序说没有泄漏！

纹理是一个`NSMutableArray`. 我在索引 0 处有一个纹理，渲染一个新纹理并将其添加到位置 1。替换精灵后，我尝试在索引 0 处杀死我的（现在旧的）纹理，我的新纹理变为索引 0，所以我可以运行这个功能重新来过。

所以这里是代码

```
- (void) startBuildingTextureInBackground {
    [[CCTextureCache sharedTextureCache] addImageAsync:@"gfx1.png"
                                                target:self
                                              selector:@selector(imageLoaded:)];
}

- (void) imageLoaded: (id) obj {
    rtxTexture1 = [[CCTextureCache sharedTextureCache] textureForKey:@"gfx1.png"];
    [[CCTextureCache sharedTextureCache] addImageAsync:@"gfx2.png"
                                                target:self
                                              selector:@selector(imageLoaded2:)];
}

- (void) imageLoaded2: (id) obj {
    rtxTexture2 = [[CCTextureCache sharedTextureCache] textureForKey:@"gfx2.png"];
    [self performSelectorInBackground:@selector(buildRtxTexture) withObject:nil];
}

- (void) buildRtxTexture {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    EAGLSharegroup *sharegroup = [[[[CCDirector sharedDirector] openGLView] context] sharegroup];
    EAGLContext *k_context = [[[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1 sharegroup:sharegroup] autorelease];
    [EAGLContext setCurrentContext:k_context];
    [[CCDirector sharedDirector] setGLDefaultValues];

    CCSprite* gfx1 = [CCSprite spriteWithTexture:rtxTexture1];
    [rendernode addChild:gfx1];

    CCSprite* gfx2 = [CCSprite spriteWithTexture:rtxTexture2];
    [rendernode addChild:gfx2];

    CCRenderTexture* rtx = [CCRenderTexture renderTextureWithWidth:512
                                                            height:320
                                                       pixelFormat:kTexture2DPixelFormat_RGBA4444];

    [rtx beginWithClear:0 g:0 b:0 a:0];
    [rendernode visit];

    [rtx end];

    [rendernode removeChild:gfx1 cleanup:YES];
    [rendernode removeChild:gfx2 cleanup:YES]; 

    [[CCTextureCache sharedTextureCache] removeTexture:rtxTexture1];
    [[CCTextureCache sharedTextureCache] removeTexture:rtxTexture2];

    [EAGLContext setCurrentContext:nil];
    [self performSelectorOnMainThread:@selector(textureLoaded:) withObject:rtx.sprite.texture waitUntilDone:YES]; 

    [pool release];
}

- (void) textureLoaded:(CCTexture2D*) newTexture {
    [textures addObject:newTexture];
}

- (void) replaceTexture {
    if (rtxSprite != nil) {
        [spriteDisplay removeChild:rtxSprite cleanup:YES];
        [[CCTextureCache sharedTextureCache] removeTexture:[textures objectAtIndex:0]];
        [textures removeObjectAtIndex:0];
    }

    rtxSprite = [CCSprite spriteWithTexture:[textures objectAtIndex:0]];
    rtxSprite.scaleY = -1;
    [spriteDisplay addChild: rtxSprite];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:17:54.080

`[pool release]`在将上下文设置为 nil 之前调用可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:23:52.393

1.  尝试调试您的代码：添加断点或 NSLog/CCLOG 来跟踪 CCTexture2D/CCRenderTexture init/dealloc 方法的调用。

2.  您在后台线程中存在 CCRenderTexture 的潜在问题。当我尝试使用 CCRenderTexture 来操作纹理时，结果出乎意料（黑色纹理或崩溃）。这是因为在主循环中也调用了 OpenGL 函数，而 OpenGL 是状态机。解决方法是在主线程 (performSelectorOnMainThread) 中使用 CCRenderTexture 调用方法。

# javascript - 在android webview中使用javascript

> ID：10472839
> 
> 赞同：31
> 
> 时间：2012-05-06T17:59:32.557
> 
> 标签：javascript, android, webview

我正在尝试从我的 webview 中的 javascript 界面开始一项活动。该示例显示吐司。我怎么能叫一堂课而不是祝酒呢？

```
public class JavaScriptInterface {
Context mContext;

/** Instantiate the interface and set the context */
JavaScriptInterface(Context c) {
    mContext = c;
}

/** Show a toast from the web page */
public void showToast(String toast) {
    Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
}
} 
```

这是html页面。

```
<input type="button" value="Say hello" onClick="showAndroidToast('Hello Android!')" />

<script type="text/javascript">
function showAndroidToast(toast) {
    Android.showToast(toast);
} 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-07T11:15:56.070

你必须首先在你的 webview 上注册 JavaScriptInterface。JavaScriptInterFace 可以是一个内部类，如下所示。此类将具有一个您可以从 html 页面（通过 javaScript）调用的函数，并且在该函数中您可以编写代码来更改活动。

这是适合您的工作解决方案：

```
public class JavascriptInterfaceActivity extends Activity {
    /** Called when the activity is first created. */

    WebView wv;

    JavaScriptInterface JSInterface;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        wv = (WebView)findViewById(R.id.webView1);

        wv.getSettings().setJavaScriptEnabled(true);
        // register class containing methods to be exposed to JavaScript

        JSInterface = new JavaScriptInterface(this);
        wv.addJavascriptInterface(JSInterface, "JSInterface"); 

        wv.loadUrl("file:///android_asset/myPage.html");

    }

    public class JavaScriptInterface {
        Context mContext;

        /** Instantiate the interface and set the context */
        JavaScriptInterface(Context c) {
            mContext = c;
        }

        @android.webkit.JavascriptInterface
        public void changeActivity()
        {
            Intent i = new Intent(JavascriptInterfaceActivity.this, nextActivity.class);
            startActivity(i);
            finish();
        }
    }
} 
```

这是html页面

```
<html>
<head>
<script type="text/javascript">
function displaymessage()
{
JSInterface.changeActivity();
}
</script>
</head>

<body>
<form>
<input type="button" value="Click me!" onclick="displaymessage()" />
</form>
</body>
</html> 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-19T20:07:28.783

如果您在 Android 4.2 或更高版本上运行，您还需要在您的 android 代码中的方法顶部添加**@android.webkit.JavascriptInterface注释。**`changeActivity`有关更多信息，请参阅此[链接](https://stackoverflow.com/questions/14031635/android-4-2-1-webview-and-javascript-interface-breaks)。

# scala - 如何在 Scala IDE 中将源附加到 SBT 托管依赖项？

> ID：10472840
> 
> 赞同：28
> 
> 时间：2012-05-06T17:59:45.707
> 
> 标签：scala, sbt, ivy, scala-ide, ivyde

我使用 Scala IDE 2.0.1 和 SBT 0.11.2 从 Akka 2.0.1 开始。我的 build.sbt 看起来像这样：

```
name := "akka"

version := "0.1"

scalaVersion := "2.9.2"

resolvers += "Typesafe Repository" at "http://repo.typesafe.com/typesafe/releases/"

libraryDependencies += "com.typesafe.akka" % "akka-actor" % "2.0.1" 
```

如您所见，没有什么了不起的。

现在我如何告诉 Eclipse 将工件与 akka-actor 库的源分类器一起使用？

在 SBT 中，我可以使用 update-classifiers 将源代码和 Javadocs 下载到 Ivy 存储库，但即使我在从 sbteclipse 插件运行 eclipse 命令之前执行此操作，Eclipse 仍然不知道源代码。当然，我可以手动执行此操作，但这不适用于更多库。

我还尝试将 IvyDE 插件与 Delivery-local 命令一起使用。虽然这集成了依赖管理，但它似乎对源代码没有帮助。

有什么线索吗？

**编辑：**这是从本地交付生成的 ivy.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<ivy-module version="2.0" xmlns:e="http://ant.apache.org/ivy/extra">
<info organisation="default" module="akka_2.9.2" revision="0.1" status="release" publication="20120506225613">
    <description>
    akka
    </description>
</info>
<configurations>
    <conf name="compile" visibility="public" description=""/>
    <conf name="runtime" visibility="public" description="" extends="compile"/>
    <conf name="test" visibility="public" description="" extends="runtime"/>
    <conf name="provided" visibility="public" description=""/>
    <conf name="optional" visibility="public" description=""/>
    <conf name="sources" visibility="public" description=""/>
    <conf name="docs" visibility="public" description=""/>
    <conf name="pom" visibility="public" description=""/>
</configurations>
<publications>
    <artifact name="akka_2.9.2" type="pom" ext="pom" conf="pom"/>
    <artifact name="akka_2.9.2" type="jar" ext="jar" conf="compile"/>
    <artifact name="akka_2.9.2" type="src" ext="jar" conf="sources" e:classifier="sources"/>
    <artifact name="akka_2.9.2" type="doc" ext="jar" conf="docs" e:classifier="javadoc"/>
</publications>
<dependencies>
    <dependency org="org.scala-lang" name="scala-library" rev="2.9.2" conf="compile->default(compile)"/>
    <dependency org="com.typesafe.akka" name="akka-actor" rev="2.0.1" conf="compile->default(compile)"/>
    <exclude org="org.scala-lang" module="scala-library" artifact="*" type="jar" ext="*" matcher="exact"/>
    <exclude org="org.scala-lang" module="scala-compiler" artifact="*" type="jar" ext="*" matcher="exact"/>
    <override org="org.scala-lang" module="scala-library" matcher="exact" rev="2.9.2"/>
    <override org="org.scala-lang" module="scala-compiler" matcher="exact" rev="2.9.2"/>
</dependencies>
</ivy-module> 
```

我是常春藤的新手，所以这并不能告诉我太多。我只是认为它提到了源代码和 javadocs，但不知何故 IvyDE 没有选择它。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-27T07:59:08.423

你可以把

```
EclipseKeys.withSource := true 
```

到您的`build.sbt`，它允许 sbteclipse 下载所有源代码并使其在 Eclipse 中可访问。请注意，这将从所有已配置的依赖项中下载所有源。我不知道如何告诉 sbt 只下载单个依赖项的源。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-04T14:23:37.850

最后我找到了一个解决方案，让 sbt 下载源代码并告诉 Eclipse 在哪里可以找到它们。

在 build.sbt 中添加：

```
EclipseKeys.withSource := true 
```

然后运行：

```
rm -rf  ~/.ivy2/cache/

sbt update-classifiers

sbt eclipse 
```

奇怪的是，如果您已经在 ivy 中下载了依赖项，那么您会将它们保存在缓存中，并且您将无法下载它们的源代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T16:12:26.307

我终于设法让这个工作。

我不得不使用外部常春藤设置文件：

```
<ivysettings>
  <properties environment="env" />
  <settings defaultResolver="play" defaultResolveMode="dynamic" />
  <caches defaultCacheDir="${env.PLAY_HOME}/repository/cache" />
  <resolvers>
    <chain name="play">
      <ibiblio name="typesafe-releases" m2compatible="true" root="http://repo.typesafe.com/typesafe/releases" />
      <ibiblio name="sonatype-oss-releases" m2compatible="true" root="http://oss.sonatype.org/content/repositories/releases" />
      <filesystem name="local-filesystem">
        <ivy pattern="${env.PLAY_HOME}/repository/local/[organization]/[module]/[revision]/ivys/ivy.xml" />
        <artifact pattern="${env.PLAY_HOME}/repository/local/[organization]/[module]/[revision]/[type]s/[module](-[classifier]).[ext]" />
      </filesystem>
      <ibiblio name="central-uk" m2compatible="true" root="http://uk.maven.org/maven2" />
      <ibiblio name="typesafe-snapshots" m2compatible="true" root="http://repo.typesafe.com/typesafe/snapshots" />
      <ibiblio name="sonatype-oss-snapshots" m2compatible="true" root="http://oss.sonatype.org/content/repositories/snapshots" />
    </chain>
  </resolvers>
</ivysettings> 
```

并添加：

```
externalIvySettings(baseDirectory(_ / "ivysettings.xml")) 
```

到我的 Build.scala。

链中解析器的顺序被证明很重要，因为如果 Ivy 找到一个 jar 但没有源，它不会检查其他解析器的源/javadoc。本地 Play 安装中的存储库没有源代码或 javadoc。

当 IvyDE 在 Eclipse 中解析时，这为我的依赖项中的大多数 jar 提供了源附件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T16:27:23.350

我发现给 IvyDE 和 sbt 不同的 ivy 缓存目录更容易。是的，它需要更多空间，但默认情况下 sbt 不下载源代码。一旦 sbt 加载了没有源的缓存，IvyDE 就不会添加它们。您可以告诉 sbt 获取它们，但对我来说，使用更多磁盘空间并使用两个不同的缓存更容易。

为此，我将 sbt 保留为默认值，并在 Preferences > Ivy > Settings 选项卡 > Ivy 设置文件中设置 IvyDE 以使用此文件：

```
<ivysettings>

    <settings defaultResolver="nexus" />

    <property
        name="nexus-public"
        value="http://localhost:8081/nexus/content/groups/public" />

    <resolvers>

        <ibiblio
            name="nexus"
            m2compatible="true"
            root="${nexus-public}" />
    </resolvers>

    <caches defaultCacheDir="${user.home}/.ivy2eclipse" />

</ivysettings> 
```

这指向我的本地 nexus 服务器，因此您需要针对您的环境对其进行修改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T07:28:25.793

好吧，我已经放弃了，回到了 NetBeans 7.1.2 + Scala 插件 + Maven。这种组合更好地集成并且开箱即用，无需修补。

# xml - 如何防止在我的 C# TBB 中的 xml 文档中对字符 < > 进行编码？

> ID：10472844
> 
> 赞同：0
> 
> 时间：2012-05-06T18:00:04.070
> 
> 标签：xml, xml-parsing, tridion

我正在编写 C# TBB，它从组件源获取输入，`XmlElement`然后将其转换`XPathDocument`为便于遍历。然后使用 . 将获取的内容写入内存流`XmlWriter`。最后，我将它推到 output `XmlDocument`。在输出 xml 文档中，像 < > 这样的字符在编码格式中是可见的，比如`&lt;` `&gt;`. 如何防止对这些字符进行编码？

```
<%@Import NameSpace="System.IO"%>
<%@Import Namespace="System.Xml.XPath"%>
<%@Import nameSpace="Tridion.ContentManager.CommunicationManagement"%>
using (MemoryStream ms = new MemoryStream())

        {             

            TemplatingLogger log = TemplatingLogger.GetLogger(typeof(test)); 
            XmlTextWriter securboxXmlWriter = new XmlTextWriter(ms, new System.Text.UTF8Encoding(true));
            securboxXmlWriter.Indentation = 4;
            securboxXmlWriter.Formatting = Formatting.Indented;
            securboxXmlWriter.WriteStartDocument();
            securboxXmlWriter.WriteStartElement("comp");                
            securboxXmlWriter.WriteAttributeString("xmlns", "http://www.w3.org/1999/xhtml");
            securboxXmlWriter.WriteStartElement("con");
            securboxXmlWriter.WriteStartElement("wf:wf");
            securboxXmlWriter.WriteStartElement("wf:sI");                

            Component component=null;
            string componentId = string.Empty;
            try
            {
                component = engine.GetObject(package.GetByName(Package.ComponentName)) as Component;
                log.Debug("componentId:"+component.Id);
            }
            catch (Exception e)
            {
                throw new InvalidOperationException("Component not found:" + e);
            }
        XmlElement componentxml = component.Content; // - this will give the xml Source of the component.
        XmlDocument compXMLDoc = new XmlDocument();//-  Creating the xml document

        StringBuilder xmlTextBuilder = new StringBuilder();
        XmlWriter xmlWriter = new XmlTextWriter(new StringWriter(xmlTextBuilder));
        componentxml.WriteTo(xmlWriter);            
        compXMLDoc.Load(new StringReader(xmlTextBuilder.ToString())); 

        MemoryStream memStream = new MemoryStream();
        compXMLDoc.Save(memStream);
        memStream.Position = 0;
        XPathDocument xpathDoc = new XPathDocument(memStream);//creating xpath document            
        String groupBodyComponent = String.Empty;
        String gBCValue = String.Empty;
        XPathNavigator nav = xpathDoc.CreateNavigator();
        String value = string.Empty;
        test t = new test();
        // move to first  element
        nav.MoveToFirstChild();
        nav.MoveToFirstChild();            
            //begin looping through the nodes
        do
        {

            if (nav.Name.Equals("aH"))
            {                    
                 securboxXmlWriter.WriteStartElement("wg:" + nav.Name);
                if (nav.MoveToFirstChild())
                {
                    gBC = nav.InnerXml;                        
                    switch(gBC){
                        case "bPTt":
                            while (nav.MoveToNext())
                            {
                                log.Debug(nav.Name);
                                if (nav.Name.Equals("value"))
                                {
                                    gBCValue = nav.InnerXml;
                                }                                    
                                securboxXmlWriter.WriteStartElement("wg:" + gBC);
                                value = t.replaceDynamicVariable(gBCValue);//will have some html tags in it
                                securboxXmlWriter.WriteElementString("text", value);
                                securboxXmlWriter.WriteEndElement();
                            }
                            break;
                    }
                   }
                value = t.replaceDynamicVariable(nav.InnerXml);
                securboxXmlWriter.WriteElementString("text", value);                    
                securboxXmlWriter.WriteEndElement();
            }
          } while (nav.MoveToNext());

            securboxXmlWriter.WriteEndElement();
            securboxXmlWriter.WriteEndElement();
            securboxXmlWriter.WriteEndElement();
            securboxXmlWriter.WriteEndElement();
            securboxXmlWriter.WriteEndDocument();                
            securboxXmlWriter.Flush();
            securboxXmlWriter.Close();
            Item output = package.GetByName("Output");               
            if (output != null)
            {
                package.Remove(output);
            }

            package.PushItem("Output", package.CreateStringItem(ContentType.Xml, Encoding.UTF8.GetString(ms.ToArray())));                                

        } 
```

请检查代码片段并建议我解决问题的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T19:40:04.827

您可以简单地使用另一个 TBB 将所有内容解码回来，您应该将其作为模板中的最后一个 TBB 放置。

另请注意，如果您的模板中有 Dreamweaver TBB，它将创建所有编码的“输出”项目（与 Nuno 的答案内联，它将 ContentType 设为 HTML）。

只需将其解码回来。不要担心对不需要未编码的字符（例如百分号）进行未编码，因为它们将被双重编码，并且当您转换回来时，您会得到完全正确的那些。

这是您可以使用的 C# 片段 TBB：

```
<%@ Import Namespace="System.Web"%>

Item outputItem = package.GetByName("Output");
string outputText = outputItem.GetAsString();
outputText = HttpUtility.HtmlDecode(outputText);
outputItem.SetAsString(outputText);
package.Remove(outputItem);
package.PushItem("Output", outputItem); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T18:26:24.457

您是否将此内容推送到包中？如果是，请在`package.CreateStringItem`方法中使用不同的 ContentType 选项。

其中一种内容类型将“按原样”保留任何特殊字符，无论是 HTML 还是文本，现在还不能 100% 确定是哪一种。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:06:53.110

```
var a = HttpUtility.HtmlDecode(XmlizedString); 
```

这避免了特殊字符的编码。解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T00:09:59.130

如果您尝试编写 xml**而不**编码 '<'、'>'、'&' 字符，则可以使用 WriteRaw() 方法。

例如

```
 var xmlFile = "C:\Temp\Test.xml";
  var xmlstring = "<Nodes><Node>1</Node><Node>2</Node>><Node>3</Node></Nodes>";
  XmlTextWriter writer;
  writer = new XmlTextWriter(xmlFile, Encoding.UTF8);
  writer.WriteRaw(xmlstring);
  writer.Flush();
  writer.Close(); 
```

# php - 从电子邮件中删除不需要的标头（出于安全风险）

> ID：10472847
> 
> 赞同：2
> 
> 时间：2012-05-06T18:00:32.527
> 
> 标签：php, email

我刚刚注意到，使用 mail() 函数从我的主机发送的电子邮件也会在标题中发送内部数据。

例如，这是我在 Gmail 中找到的（通过点击**show original**），

```
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - abc.hostname.com
X-AntiAbuse: Original Domain - domainname.com
X-AntiAbuse: Sender Address Domain - abc.hostname.com
X-BWhitelist: no
X-Source: /usr/bin/php
X-Source-Args: /usr/bin/php /home/michael/mail/script.php 
X-Source-Dir: example.com:/michael/mail
X-Source-Sender: 
X-Source-Auth: michael
X-Email-Count: 0
X-Source-Cap: ZsiufdyrnciuyixcioobQ== 
```

如何从发送任何电子邮件标题中删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:09:55.443

你不能对它做太多的事情，因为邮件头是在邮件发出时添加的。只要没有你不想要这些额外标题的真正原因，你就必须忍受它。

# c++ - 从派生 * 到基 * 的转换存在但无法访问

> ID：10472848
> 
> 赞同：93
> 
> 时间：2012-05-06T18:00:38.843
> 
> 标签：c++, inheritance

为什么即使 c 是结构并且默认情况下具有公共继承，以下代码也会产生此错误？

```
struct c 
{
protected:
    int i;
public:
    c(int ii=0):i(ii){}
    virtual c *fun();
};

c* c::fun(){
    cout<<"in c";
    return &c();
}

class d : c
{
 public:
    d(){}
    d* fun()
    {
        i = 9;
        cout<<"in d"<<'\t'<<i;
        return &d();
    }
};

int main()
{
    c *cc;
    d dd;
    cc = &dd;
    cc->fun();
} 
```

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-05-06T18:02:09.693

你需要：

```
class d : public c 
```

`class`默认情况下是继承`private`。

当您从 a`class`或 a私下继承时`struct`，您明确地说，从派生类型直接转换为基类型是不可能的。

# c - 如何在 ruby c 扩展中覆盖 rb_ 函数？

> ID：10472850
> 
> 赞同：0
> 
> 时间：2012-05-06T18:00:54.700
> 
> 标签：c, ruby, ruby-c-extension

我无法弄清楚如何在 c 中覆盖 rb_ 函数（如 rb_ivar_get）。我有以下代码：

```
#include "ruby.h"

void Init_metaobject();
VALUE meta_cObject = Qnil;
VALUE meta_ivar_get(VALUE obj, VALUE mId, VALUE mWarn);
VALUE meta_ivar_set(VALUE obj, VALUE mId, VALUE val);

void Init_metaobject() {
    meta_cObject = rb_define_class("MetaObject", rb_cObject);
    rb_define_method(meta_cObject, "meta_ivar_get", meta_ivar_get, 2);
    rb_define_method(meta_cObject, "meta_ivar_set", meta_ivar_set, 2);
}

VALUE
rb_ivar_get(obj, id)
    VALUE obj;
    ID id;
{
    return meta_ivar_get(obj, ID2SYM(id), Qtrue);
}

VALUE
rb_attr_get(obj, id)
    VALUE obj;
    ID id;
{
    return meta_ivar_get(obj, ID2SYM(id), Qfalse);
}

VALUE
rb_ivar_set(obj, id, val)
    VALUE obj;
    ID id;
    VALUE val;
{
    return meta_ivar_set(obj, ID2SYM(id), val);
}

VALUE
meta_ivar_get(obj, mId, mWarn)
    VALUE obj;
    VALUE mId;
    VALUE mWarn;
{
    VALUE val;
    ID id = rb_to_id(id);
    int warn = RTEST(warn);

    switch (TYPE(obj)) {
      case T_OBJECT:
      case T_CLASS:
      case T_MODULE:
    if (ROBJECT(obj)->iv_tbl && st_lookup(ROBJECT(obj)->iv_tbl, id, &val))
        return val;
    break;
      default:
    if (FL_TEST(obj, FL_EXIVAR) || rb_special_const_p(obj))
        return generic_ivar_get(obj, id, warn);
    break;
    }
    if (warn) {
    rb_warning("instance variable %s not initialized", rb_id2name(id));
    }
    return Qnil;
}

VALUE
meta_ivar_set(obj, mId, val)
    VALUE obj;
    VALUE mId;
    VALUE val;
{
    ID id = rb_to_id(mId);  
    if (!OBJ_TAINTED(obj) && rb_safe_level() >= 4)
    rb_raise(rb_eSecurityError, "Insecure: can't modify instance variable");
    if (OBJ_FROZEN(obj)) rb_error_frozen("object");
    switch (TYPE(obj)) {
      case T_OBJECT:
      case T_CLASS:
      case T_MODULE:
    if (!ROBJECT(obj)->iv_tbl) ROBJECT(obj)->iv_tbl = st_init_numtable();
    st_insert(ROBJECT(obj)->iv_tbl, id, val);
    break;
      default:
    generic_ivar_set(obj, id, val);
    break;
    }
    return val;
} 
```

以及以下测试：

```
require 'metaobject'

class Tracker < MetaObject

  attr_accessor :ivar

  def initialize
    @ivar = nil
  end

  def meta_ivar_get(symbol, warn)
    puts "Instance variable, #{symbol}, retrieved"
    super(symbol, warn)
  end

  def meta_ivar_set(symbol, obj)
    puts "Instance variable, #{symbol}, changed to #{obj.inspect}"
    super(symbol, obj)
  end

end

obj = Tracker.new
obj.ivar = "Modified"
puts obj.ivar 
```

其输出仅为：

```
Modified 
```

我的想法是 ruby​​ 链接器掩盖了我对 rb_ivar_get、rb_attr_get 和 rb_ivar_set 的定义及其在 variables.c 中的定义。我对吗？如果是这样，我该如何改变它，使我的方法掩盖了红宝石，而不是相反。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:11:46.763

你不能用一个额外的 .so 文件来做到这一点。编辑内部 Ruby 函数的唯一方法是直接更改它。转到`variable.c`，编辑它并重新编译整个解释器。相反，您可以覆盖`attr_accessor`.

**编辑**

另一个解决方案`set_trace_func`。这很慢，我不厚这是正确的方法。无论如何，这里是：

```
$instance_variables_table = {}
$instance_variable_created_proc = proc do |var, value|
  puts "Instance variable #{var} created with #{value.inspect}."
end
$instance_variable_changed_proc = proc do |var, new, old|
  puts "Instance variable #{var} changed from #{old.inspect} to #{new.inspect}."
end

set_trace_func(proc {|type, file, line, func, binding, mod|
  unless type == "call"
    eval("instance_variables", binding).each do |iv|
      value = eval("instance_variable_get(:#{iv})", binding)
      if $instance_variables_table.has_key? iv
        if $instance_variables_table[iv] != value
          new = value
          old = $instance_variables_table[iv]
          $instance_variable_changed_proc[iv, new, old]
        end
      else
        $instance_variable_created_proc[iv, value]
      end
    end
  end
  $instance_variables_table = {}
  eval("instance_variables", binding).each do |iv|
    $instance_variables_table[iv] = eval("instance_variable_get(:#{iv})", binding)
  end
}) 
```

测试代码：

```
class A
  def initialize
    @test = 1
    @test = 2
  end
  def a
    @test = 3
  end
end
A.new.a 
```

输出：

```
Instance variable @test created with 1.
Instance variable @test changed from 1 to 2.
Instance variable @test changed from 2 to 3. 
```

我不确定它是否适用于所有情况，或者是否可以简化。如果您想在实际应用程序中执行此操作，请编辑`variable.c`.

# c - 变量值意外变化？

> ID：10472856
> 
> 赞同：1
> 
> 时间：2012-05-06T18:02:02.167
> 
> 标签：c, arduino, microcontroller

下面的程序使用键盘和 arduino 来测试输入是否等于密码。每当按下“#”时，都会检查输入，然后存储输入的变量将重置为空字符串（char input[257] = ""）。然后程序循环回到 void loop() 代码块的开头。当我的程序循环回到“void loop()”代码块的开头时，我遇到了问题。当我将输入重置为空字符串时，输入将重置为空字符串。但是，当程序循环时，输入的值会更改为之前的值。因此，如果我最初输入“123abc”并点击“#”，程序会告诉我输入不正确，然后程序会将变量重置为空字符串，但是当程序循环时，存储空字符串的变量会变回“123abc”。发生了什么？为什么变量不保持为空字符串？

```
#include <Keypad.h>

const byte ROWS = 4; //four rows
const byte COLS = 4; //three columns
char keys[ROWS][COLS] = {
  {'1','2','3','A'},
  {'4','5','6','B'},
  {'7','8','9','C'},
  {'*','0','#','D'}
};
byte rowPins[ROWS] = {5, 4, 3, 2}; //connect to the row pinouts of the keypad
byte colPins[COLS] = {9, 8, 7, 6}; //connect to the column pinouts of the keypad
char password[9] = "3994A", input[257]="";
Keypad keypad = Keypad( makeKeymap(keys), rowPins, colPins, ROWS, COLS );
int x;
void setup(){
  Serial.begin(9600);
}

void loop(){
  x = 0;
  Serial.println(input);
  while (1)
  {
    char key = keypad.getKey();
    if (key)
    {
    if (key == '#')
    {
      break;
    }
    input[x] = key;
    x+=1;
    }
  }
  if (strcmp(password,input) == 0)
  {Serial.println("Access Granted");
  }
  else
  {Serial.println("Access Denied");
  }
  char input[257] = "";
  Serial.println(input);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T17:09:43.127

在这里，我怎么能做到这一点：

去Arduino官方网站下载*Keypad.h* [http://playground.arduino.cc/Code/Keypad#Download](http://playground.arduino.cc/Code/Keypad#Download) (ctrl+f and type: download) 下载库放到**C:\Program Files (x86)\Arduino \libraries**关闭当前的 Arduino 屏幕，然后重新打开屏幕。重写你的代码，把代码放在第一位。我对这种方法很满意。

```
#include <Keypad.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:13:44.603

不是同一个变量。你有一个`input`在你的顶层，另一个在你的`loop`函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T18:13:54.433

这条线

```
char input[257] = ""; 
```

创建一个名为 input 的新局部变量，但您不希望这样。你已经在这里做了一个全球性的：

```
char password[9] = "3994A", input[257]=""; 
```

改变

```
 char input[257] = ""; 
```

至

```
 memset(input,0,257); 
```

因此，您不会从堆栈中丢失新变量，而是使用您之前声明的全局变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T18:14:43.143

第二个`char input[257] = "";`声明了一个名为 的新变量`input`。它不会更改名为 的现有变量的内容`input`。改为使用`memset()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T23:01:47.300

我同意再次声明输入变量的错误

```
char input[257] = ""; 
```

但我不会用 memset() 解决它，而是做

```
input[0]='\0'; 
```

因为这更快，并且不需要在代码中包含 memset() 函数。我们谈论的是微控制器，cpu和内存是宝贵的，编写快速和轻便的代码是一个好习惯。

# php - 使用 SQL Server 2008 进行 PHP 分页

> ID：10472860
> 
> 赞同：0
> 
> 时间：2012-05-06T18:02:15.597
> 
> 标签：php, sql, pagination

我正在尝试使用 php 和 sql server 2008 对我的产品进行分页。我按照此视频教程来帮助我了解分页的工作原理：

[http://www.youtube.com/watch?feature...&v=K8xYGnEOXYc](http://www.youtube.com/watch?feature...&v=K8xYGnEOXYc)

唯一的问题是本教程是关于 MySQL 而不是 SQL Server 2008

这是我到目前为止编写的代码：

```
$tsql = "SELECT * 
        FROM products INNER JOIN product_catalogue 
        ON products.catalogueID = product_catalogue.catalogueID 
        WHERE category1 = '1' 
        ORDER BY productID ASC"; 
$stmt = sqlsrv_query($conn,$tsql); 
$nr = sqlsrv_num_rows($stmt); // Get total of Num rows from the database query 
if (isset($_GET['pn'])) { // Get pn from URL vars if it is present 
    $pn = preg_replace('#[^0-9]#i', '', $_GET['pn']); // filter everything but numbers for security(new) 
} else { // If the pn URL variable is not present force it to be value of page number 1 
    $pn = 1; 
} 
//This is where we set how many database items to show on each page 
$itemsPerPage = 10; 
// Get the value of the last page in the pagination result set 
$lastPage = ceil($nr / $itemsPerPage); 
// Be sure URL variable $pn(page number) is no lower than page 1 and no higher than $lastpage 
if ($pn < 1) { // If it is less than 1 
    $pn = 1; // force it to be 1 
} else if ($pn > $lastPage) { // if it is greater than $lastpage 
    $pn = $lastPage; // force it to be $lastpage's value 
} 

// This creates the numbers to click in between the next and back buttons 
// This section is explained well in the video that accompanies this script 
$centerPages = ""; 
$sub1 = $pn - 1; 
$sub2 = $pn - 2; 
$add1 = $pn + 1; 
$add2 = $pn + 2; 
if ($pn == 1) { 
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;'; 
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;'; 
} else if ($pn == $lastPage) { 
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;'; 
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;'; 
} else if ($pn > 2 && $pn < ($lastPage - 1)) { 
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub2 . '">' . $sub2 . '</a> &nbsp;'; 
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;'; 
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;'; 
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;'; 
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add2 . '">' . $add2 . '</a> &nbsp;'; 
} else if ($pn > 1 && $pn < $lastPage) { 
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;'; 
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;'; 
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;'; 
} 

// This line sets the "LIMIT" range... the 2 values we place to choose a range of rows from database in our query 
$limit = 'LIMIT ' .($pn - 1) * $itemsPerPage .',' .$itemsPerPage; 

// Now we are going to run the same query as above but this time add $limit onto the end of the SQL syntax 
// $sql2 is what we will use to fuel our while loop statement below 
$tsql2 = "SELECT * 
        FROM products INNER JOIN product_catalogue 
        ON products.catalogueID = product_catalogue.catalogueID 
        WHERE category1 = '1' 
        ORDER BY productID ASC $limit"; 

$stmt2 = sqlsrv_query($conn,$tsql2); 

$paginationDisplay = ""; // Initialize the pagination output variable 
// This code runs only if the last page variable is not equal to 1, if it is only 1 page we require no paginated links to display 
if ($lastPage != "1"){ 
    // This shows the user what page they are on, and the total number of pages 
    $paginationDisplay .= 'Page <strong>' . $pn . '</strong> of ' . $lastPage. '&nbsp;  &nbsp;  &nbsp; '; 
    // If we are not on page 1 we can place the Back button 
    if ($pn != 1) { 
        $previous = $pn - 1; 
        $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $previous . '"> Back</a> '; 
    } 
    // Lay in the clickable numbers display here between the Back and Next links 
    $paginationDisplay .= '<span class="paginationNumbers">' . $centerPages . '</span>'; 
    // If we are not on the very last page we can place the Next button 
    if ($pn != $lastPage) { 
        $nextPage = $pn + 1; 
        $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $nextPage . '"> Next</a> '; 
    } 
} 

// Build the Output Section Here 
$outputList = ''; 
while($row = sqlsrv_fetch_array($stmt2)){ 
         $id = $row["productID"]; 
         $product_name = $row["product_name"]; 
         $product_price = $row["product_price"]; 
         $outputList .= '<h1>' . $product_name . '</h1><h2>' . $product_price . ' </h2><hr />'; 
} 
?> 
```

正如您在我的第二个查询上方看到的那样，我设置了 LIMIT 范围并尝试将 $limit 变量插入到 SELECT 查询中。不幸的是，这不适用于 SQL Server。

所以这是我不知道如何正确转换为 SQL Server 的代码：

```
$limit = 'LIMIT ' .($pn - 1) * $itemsPerPage .',' .$itemsPerPage; 
$tsql2 = "SELECT * 
        FROM products INNER JOIN product_catalogue 
        ON products.catalogueID = product_catalogue.catalogueID 
        WHERE category1 = '1' 
        ORDER BY productID ASC $limit"; 

$stmt2 = sqlsrv_query($conn,$tsql2); 
```

我尝试将其转换为 SQL Server 应该理解的格式，但由于我对 PHP 和一般编程非常陌生，我无法让它工作

```
$limit = ($pn - 1) * $itemsPerPage; 
$next_page = $itemsPerPage; 
$tsql2 = "SELECT TOP $next_page productID, product_name, product_price 
        FROM products INNER JOIN product_catalogue 
        ON products.catalogueID = product_catalogue.catalogueID 
        WHERE category1 = '1' AND productID NOT IN(SELECT TOP $limit productID FROM products INNER JOIN product_catalogue 
        ON products.catalogueID = product_catalogue.catalogueID 
        WHERE category1 = '1' 
        ORDER BY productID ASC)"; 
$stmt2 = sqlsrv_query($conn,$tsql2); 
```

期待你的答复

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:24:06.957

这是我们通常用来解决这个问题的解决方案：

```
/**
 * Constructs a offsetted query.
 *
 * Because of the major differences between MySQL (LIMIT) and 
 * SQL Server's cursor approach to offsetting queries, this method
 * allows an abstraction of this process at application level.
 *
 * @param int    $offset the offset point of the query
 * @param int    $limit  the limit of the query
 * @param string $select the fields we're selecting
 * @param string $tables the tables we're selecting from
 * @param string $order  the order by clause of the query
 * @param string $where  the conditions of the query
 *
 * @return string
 */
function offset($offset, $limit, $select, $tables, $order, $where='')
{
    $ret .= 'SELECT [outer].* FROM (
            SELECT ROW_NUMBER() OVER(ORDER BY ' . $order .') as ROW_NUMBER,
            ' . $select . '
            FROM ' . $tables . ($where ? ' WHERE ' . $where : '')
        .') AS [outer]
            WHERE [outer].[ROW_NUMBER] BETWEEN '
        . (intval($offset)+1).' AND '.intval($offset+$limit)
        . ' ORDER BY [outer].[ROW_NUMBER]';

    return $ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:02:04.820

虽然我在 PHP 方面没有任何好的经验。但我有使用 ASP.Net 的 MS SQL Server 的分页经验。我认为最好创建一个存储过程，该过程将在单个 SP 中完成所有分页工作并在 PHP 中获取结果集。这是可以帮助您的SP：

```
USE [your_db]
GO
CREATE PROCEDURE [dbo].[usp_product_paginate]
@page_number INT, @page_size INT
AS
BEGIN
    SELECT ROW_NUMBER() OVER (ORDER BY productID ASC) row_num,productId,productName
    INTO #temp
    FROM products INNER JOIN product_catalogue ON products.catalogueID = product_catalogue.catalogueID
    WHERE category1 = '1';

    SELECT productId,productName, 
    @page_size AS page_size,(SELECT Min(row_num) FROM #temp)AS first_row, (SELECT COUNT(*) FROM #temp) AS tot_row
    FROM #temp 
    WHERE row_num > (@page_number - 1) * @page_size and row_num <= @page_number * @page_size;   
END 
```

# c# - 需要一些关于如何在我的应用程序中管理角色的想法（ASP.NET MVC3）

> ID：10472863
> 
> 赞同：6
> 
> 时间：2012-05-06T18:02:35.950
> 
> 标签：c#, asp.net, asp.net-mvc-3, roles, roleprovider

我正在开发一些网站，它是一种在线工作场所，会有一些用户和一些正在进行的计算机编程项目，每个用户可以有多个角色，例如一个特定用户可以是项目的项目经理和开发人员对于另一个项目。自然，项目经理在项目中比开发者拥有更多的权力。我的问题是如何在我的代码中巧妙地管理这个？我打算使用我的自定义角色提供程序并使用 Authorize 属性，但这还不够，因为我需要项目 ID 加上用户 ID 才能在特定项目中查找用户的角色。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:10:39.070

首先，您必须为您的扩展角色管理创建额外的表，例如`projects`与`users`上下文中的关系`operations`，这可能是您的`controller's actions`.

一种方法是为`roles`. 在这种情况下，您将只使用 Asp net `membership users`，但这完全取决于您的要求。

其次，您必须在 中处理它`MVC`，在我看来，最好的方法是通过您自己的自定义`Authorization`属性来实现它，并使用您的自定义授权属性而不是属性来装饰控制器的操作`[Authorization]`。

它非常简单。

```
[CustomAuthorize]
//[Authorize]
public ActionResult GetProjectTasks(string projectname)
{

} 
```

为此，您必须继承您的类，`FilterAttribute`并且还必须实现`IAuthorizationFilter`接口。

```
 public void OnAuthorization(AuthorizationContext filterContext)
    {
        HttpCookie authCookie = filterContext.HttpContext.Request.Cookies[FormsAuthentication.FormsCookieName];

        if (authCookie != null)
        {
            FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
            var identity = new GenericIdentity(authTicket.Name, "Forms");
            var principal = new GenericPrincipal(identity, new string[] { authTicket.UserData });
            filterContext.HttpContext.User = principal;
        }

        var controller = filterContext.ActionDescriptor.ControllerDescriptor.ControllerName;
        var action = filterContext.ActionDescriptor.ActionName;
        var user = filterContext.HttpContext.User;
        var ip = filterContext.HttpContext.Request.UserHostAddress;

        var isAccessAllowed = CustomAuthenticationLogic.IsAccessAllowed(controller, action, user, ip);
        if (!isAccessAllowed)
        {
            // Code if user is authenticated
            FormsAuthentication.RedirectToLoginPage();
        }            
    } 
```

在该方法`OnAuthorization`中，您可以获取自定义授权逻辑中可能需要的所有信息，例如`HttpContext`姓名`Controller`、`Action`姓名。您只需从此方法调用您的自定义身份验证逻辑。您的自定义身份验证逻辑可能如下所示。

```
 public class CustomAuthenticationLogic
{
    public static bool IsAccessAllowed(string controller, string action, IPrincipal user, string ip)
    {
        //
        // Your custom logic here              
        //              
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T10:54:26.123

我不久前做了一些研究，可以向你保证：

1.  ASP.NET 内置功能很可能无济于事（没有办法考虑项目 ID 之类的东西）
2.  基于角色的访问模型是最合适的，有不同的实现方式。Rusted 建议的 AzMan 实际上很好，但是管理上下文相关的规则可能会很困难。例如：用户 A 在项目 C 中执行操作 B，而它可以说是星期天。看看阿兹曼。
3.  将您的访问规则与代码混合是非常糟糕的。您的安全模型不需要与它们的应用程序工作方式（ASP.NET MVC）相关，所以这个是错误的：

```
var isAllowed = AccessControl.IsAccessAllowed(controller, action, user, ip);
```

它必须看起来像：

```
var isAllowed = AccessControl.IsAccessAllowed(user, operation, context); 
```

然后您可以随时使用它，在每个动作中或将其包装为属性。

其中操作是“登录”、“发布回复”、“阅读主题”等。上下文就是其他内容，例如“项目 id”、“星期几”、“用户 ip”等

可以写很多东西，比如角色重叠、上下文等。简而言之：谷歌的“.NET 基于角色的访问模型”可能更容易编写小型自定义安全框架。使其与用户、角色、操作和项目 ID 一起使用

操作被分配给角色，角色被分配给具有定义项目ID的用户，您可以对操作和角色进行硬编码，因此在您的数据库中只有一个小改动：用户到角色映射

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T18:38:06.057

如果您有更复杂的规则并且属性不够，那么您可以在控制器中计算用户是否可以访问某些功能并在您的 ViewModel 中添加反映访问或不访问这些功能的属性。

这样，您的视图将非常纤细，它会根据那些 ViewModel 布尔属性显示内容。

因此，假设您的用户只能阅读，您可以拥有一个属性 bool IsReadOnly，它将根据授权规则填充到控制器中，并且将在视图中用于例如生成标签而不是文本框。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T19:21:44.513

我喜欢[AzMan](http://msdn.microsoft.com/en-us/library/bb897401.aspx)的主要思想是针对操作进行编程的概念。

[操作](http://technet.microsoft.com/en-us/library/cc725778%28v=ws.10%29.aspx)是非常细化的东西，在使用上应该没有重叠，并且只能由开发人员定义。通过将操作分组到任务中，将任务分组到角色中，然后将主体（用户和组）映射到角色，您拥有一个非常强大的模型来在您的应用程序中定义授权。由于您直接对操作进行编程，因此您的代码不需要知道用户具有哪些角色，并且管理员可以在运行时更改这些角色。事实上，有人可以定义一组完全不同的角色来使用您在代码中使用的操作，而您根本不需要更改任何代码。这才是真正的力量所在。

我的意思不是“在您的应用程序中使用 AzMan”（但也许您应该尝试）。它是一个强大的模型，但它也很复杂，对于简单的事情来说可能是多余的。如果您只有一个或两个角色，并且他们保护的操作不重叠或不太可能改变，那么这可能是没有保证的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-12T17:12:55.090

我建议您`Authorize`通过扩展内置`AuthorizeAttribute`过滤器而不是实现`IAuthorizationFilter`接口来创建自定义过滤器。内置的`AuthorizeAttribute`做很多管道工作来处理缓存问题和其他事情，如果你要实现接口，你必须做所有这些工作。

您必须重写该`AuthorizeCore`方法，并且您已经完成了所有角色检查逻辑。`user id`你必须存储在会话中，你`project id`必须弄清楚。

```
public override bool AuthorizeCore(HttpContextBase httpContext)
{

} 
```

AuthorizeAttribute 源代码 - [http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/913d37658a44#src%2fSystem.Web.Mvc%2fAuthorizeAttribute.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/913d37658a44#src%2fSystem.Web.Mvc%2fAuthorizeAttribute.cs)

自定义授权属性示例： http: [//msdn.microsoft.com/en-us/library/ee707357 (v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/ee707357(v=vs.91).aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-14T12:21:25.653

你可以有`groups`基于`roles`.

然后将不同的用户添加到特定的组。组可以 >

```
1) Admin Group  
2) Developer Group  
3) Project1-QA Group  
4) Project2-Manager Group 
```

保存 和 的映射`[user - group]`，`[group - projects]`具体取决于您的数据库设计。

您可以根据需要为一个用户拥有任意数量的角色（组）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-15T17:06:33.737

一种非常简单的方法 - 对于站点范围的访问控制，您可以将一个 INT 列添加到用户表并将该 INT 的每一位映射到一个`[flags]`Enum - 例如`[Flags] enum Access { UpdateProjects, AddProjects }`。

对于每个项目的访问控制，创建一个名为例如 ProjectAccessControl 的表，其中包含三列：ProjectID（Project 表的外键）、UserID（User 表的外键）和 Role (INT)。Role 列是一个 INT，它的每个位都应该表示不同的布尔标志（如前面的示例，您可以将其映射到 C# 中的枚举）并说如果第一个位打开，则用户有权更新描述，如果第二位打开，用户可以更改时间表等。

```
[Flags]
enum ProjectAccessRole
{
    UpdateDescription,
    ChangeSchedule,
    etc...
} 
```

在代码中，您可以测试用户的角色是否有权以这种方式更新计划：

```
if( (intUserRole & ProjectAccessRole.ChangeSchedule) 
     == ProjectAccessRole.ChangeSchedule)
{
    /*user has right*/
} 
```

然后您可以将此检查包装到一个简单的函数中，该函数采用两个参数，1) 如果角色具有 2) 角色，则要检查该角色。然后你只需调用`HasRights(intUserRole, ProjectAccessRole.ChangeSchedule);`.

# node.js - nodejs服务端模拟

> ID：10472867
> 
> 赞同：0
> 
> 时间：2012-05-06T18:02:59.117
> 
> 标签：node.js, box2d, simulation, server-side

我正在尝试创建一个 nodejs 服务器，在其中运行一个简单的 x/y 世界，客户端可以从中推送/拉取数据。如果我只想在客户端使用 box2d 或其他东西进行这样的世界模拟，我会使用 setTimeout 函数，该函数将调用一个步进函数。当我在 nodejs 中尝试时，这不起作用。服务器崩溃并出现错误“RangeError：超出最大调用堆栈大小”。

这是我的 server.js。world 参数是路由器可以操作的世界对象的一个​​实例。

```
var http = require("http");

function start(world, router, handlers) {

function onRequest(request, response) {
    router(world, handlers, request, response);

}

http.createServer(onRequest).listen(8888);
console.log("ServerStarted. Listens to 8888.");

step_world(world,0);
}

function step_world(world,step) {
world.update();
step++;
console.log("updating world: " + step);
step_world(world,step);
//setTimeout(step_world(world,step),1000/30);
}

exports.start = start; 
```

那么：如何使用 nodejs 运行模拟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:12:03.973

您不能像您尝试那样在循环中调用 setTimeout 的原因是因为您正在非常快速（并且递归地）创建数千个计时器，所有这些计时器都需要在堆栈中结束。如果要使用 setTimeout，只需将其放在`step_world`函数外部而不是内部。

像这样的东西应该工作。它将每 1000/30 毫秒调用一次 step_world 函数，而不会导致堆栈溢出。

```
function step_world(world,step) {
world.update();
step++;
console.log("updating world: " + step);
}

setTimeout(step_world(world,step),1000/30);
// or setInterval(...) 
```

测试 Node 的另一种方法是向您的服务器发出请求。您可以使用`curl`或使用像[http://visionmedia.github.com/mocha/](http://visionmedia.github.com/mocha/)这样的单元测试框架手动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:42:46.217

我阅读了对另一个答案的评论，但我相信您最初的想法是正确的。问题是您在 setTimeout 调用中立即调用该函数，从而导致无限递归。

发生这种情况是因为您像这样调用 step_world：

```
step_world(world, step) 
```

每次调用 setTimeout。试试这个

```
setTimeout(step_world, 1000/30, world, step) 
```

它使用参数 world 调用 step_world 并在交易之后执行 step。实现相同结果的另一种方法：

```
setTimeout(function() {
    step_world(world, step);
}, 1000/30); 
```

# php - Json 返回“空”

> ID：10472879
> 
> 赞同：3
> 
> 时间：2012-05-06T18:03:56.607
> 
> 标签：php, jquery, iphone, cordova

我目前正在使用 Phonegap 和 xcode 来制作 iPhone 应用程序。

我只是在尝试一个简单的 Json 调用来从数据库（php）获取查询，它返回 Null。

我已将 .plist 文件中的域列入 phonegap 的白名单。这是m代码：

```
 $.getJSON('"http://slc0013.pickaweb.co.uk/~bengeor1/fixtures.php",', function(data) {
        alert(data); //uncomment this for debug
        //alert (data.item1+" "+data.item2+" "+data.item3); //further debug
        $('#resultLog').html("<p>item1="+data.id+" item2="+data.home_team+" item3="+data.away_team+"</p>");
    }); 
```

PHP代码：

```
<?php
 header("Access-Control-Allow-Origin: *");
ini_set('display_errors',1); 
 error_reporting(E_ALL);

 // Set your return content type
header('Cache-Control: no-cache, must-revalidate');
header('Content-type: application/json');

$db = "localhost";
$db_name = "xxx";
$db_user = "xxx";
$db_pwd = "xxxx";

$con = mysql_connect($db, $db_user, $db_pwd);
if (!$con) {
     $status = 11; //database error
}

$db_selected = mysql_select_db($db_name, $con);
     if (!$db_selected) {

}

$query = "SELECT * FROM Fixtures";
$result = mysql_query($query);

mysql_close();

$num = mysql_numrows($result);

$rows = array();
while($r = mysql_fetch_assoc($result)) {
  $rows[] = $r;
}

echo json_encode($rows)

?> 
```

如果您只运行 php 文件，它会显示正确的结果。

感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:12:23.870

尝试替换第一行：

```
$.getJSON('"http://slc0013.pickaweb.co.uk/~bengeor1/fixtures.php",', function(data) { 
```

对此：

```
$.getJSON("http://slc0013.pickaweb.co.uk/~bengeor1/fixtures.php", function(data) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:06:55.170

看起来你的 url 有问题我猜`'"http://slc0013.pickaweb.co.uk/~bengeor1/fixtures.php",'`应该是`"http://slc0013.pickaweb.co.uk/~bengeor1/fixtures.php"`

# c# - 搜索列表 对于字符串 .StartsWith()

> ID：10472881
> 
> 赞同：6
> 
> 时间：2012-05-06T18:04:08.407
> 
> 标签：c#, string, performance, list

我有一个

```
List<string> 
```

有 1500 个字符串。我现在使用以下代码仅提取以字符串 prefixText 开头的字符串。

```
foreach(string a in <MYLIST>)
{            
    if(a.StartsWith(prefixText, true, null))
    {
        newlist.Add(a);                   
    }            
} 
```

这非常快，但我正在快速寻找谷歌。现在我的问题是，如果我按字母顺序排列列表，然后逐个字符比较，我可以让它更快吗？或者有什么其他让这个更快的建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-06T18:35:41.260

因此 1500 并不是一个非常大的数字，对排序列表进行二进制搜索可能就足够了。然而，最有效的前缀搜索算法是基于名为 Trie 或前缀树的数据结构。见：[http ://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

下图非常简要地展示了这个想法： ![在此处输入图像描述](../Images/122557829fea9dd6797ad5baea8d342a.png)

对于 c# 实现，请参见例如[.NET DATA STRUCTURES FOR PREFIX STRING SEARCH AND SUBSTRING (INFIX) Search 以实现自动完成和智能感知](http://gmamaladze.wordpress.com/2013/08/21/net-data-structures-for-prefix-string-search-and-substring-infix-infix-search-to-implement-auto-completion-and-intelli-sense/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T18:07:33.017

如果您有按字母顺序排列的列表，则可以使用[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)的变体使其更快。

作为起点，这将返回与前缀匹配的字符串之一的索引，因此您可以在列表中向前和向后查找以查找其余部分：

```
public static int BinarySearchStartsWith(List<string> words, string prefix, int min, int max) {
  while (max >= min) {
    int mid = (min + max) / 2;
    int comp = String.Compare(words[mid].Substring(0, prefix.Length), prefix);
    if (comp < 0) {
      min = mid + 1;
    } else if (comp > 0) {
      max = mid - 1;
    } else {
      return mid;
    }
  }
  return -1;
}

int index = BinarySearchStartsWith(theList, "pre", 0, theList.Count - 1);
if (index == -1) {
  // not found
} else{
  // found
} 
```

注意：如果您使用的前缀比所比较的任何字符串都长，它将中断，因此您可能需要弄清楚您想如何处理它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-06T18:31:40.667

您可以使用[PLINQ（并行 LINQ）](http://msdn.microsoft.com/en-us/library/dd460714.aspx)来加快执行速度：

```
var newList = list.AsParallel().Where(x => x.StartsWith(prefixText)).ToList() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-18T14:42:51.730

分析了如此多的方法以实现最小的数据容量和高性能。第一个地方是：所有前缀都存储在字典中：key - 前缀，values - 适合前缀的项目。

这里简单实现这个算法：

```
public class Trie<TItem>
{
    #region Constructors

    public Trie(
        IEnumerable<TItem> items,
        Func<TItem, string> keySelector,
        IComparer<TItem> comparer)
    {
        this.KeySelector = keySelector;
        this.Comparer = comparer;
        this.Items = (from item in items
                      from i in Enumerable.Range(1, this.KeySelector(item).Length)
                      let key = this.KeySelector(item).Substring(0, i)
                      group item by key)
                     .ToDictionary( group => group.Key, group => group.ToList());
    }

    #endregion

    #region Properties

    protected Dictionary<string, List<TItem>> Items { get; set; }

    protected Func<TItem, string> KeySelector { get; set; }

    protected IComparer<TItem> Comparer { get; set; }

    #endregion

    #region Methods

    public List<TItem> Retrieve(string prefix)
    {
        return  this.Items.ContainsKey(prefix)
            ? this.Items[prefix]
            : new List<TItem>();
    }

    public void Add(TItem item)
    {
        var keys = (from i in Enumerable.Range(1, this.KeySelector(item).Length)
                    let key = this.KeySelector(item).Substring(0, i)
                    select key).ToList();
        keys.ForEach(key =>
        {
            if (!this.Items.ContainsKey(key))
            {
                this.Items.Add(key, new List<TItem> { item });
            }
            else if (this.Items[key].All(x => this.Comparer.Compare(x, item) != 0))
            {
                this.Items[key].Add(item);
            }
        });
    }

    public void Remove(TItem item)
    {
        this.Items.Keys.ToList().ForEach(key =>
        {
            if (this.Items[key].Any(x => this.Comparer.Compare(x, item) == 0))
            {
                this.Items[key].RemoveAll(x => this.Comparer.Compare(x, item) == 0);
                if (this.Items[key].Count == 0)
                {
                    this.Items.Remove(key);
                }
            }
        });
    }

    #endregion
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-06T18:12:43.553

我认为真正最快的方法是从 1500 个字符串中生成一个包含所有可能前缀的字典，有效地为所有可能返回非空的搜索预先计算结果。然后，您的搜索将只是在 O(1) 时间内完成的字典查找。这是一个用内存（和初始化时间）换取速度的例子。

```
private IDictionary<string, string[]> prefixedStrings;

public void Construct(IEnumerable<string> strings)
{
    this.prefixedStrings =
        (
            from s in strings
            from i in Enumerable.Range(1, s.Length)
            let p = s.Substring(0, i)
            group s by p
        ).ToDictionary(
            g => g.Key,
            g => g.ToArray());
}

public string[] Search(string prefix)
{
    string[] result;
    if (this.prefixedStrings.TryGetValue(prefix, out result))
        return result;

    return new string[0];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-06T18:14:29.913

您可以通过在调用 StartsWith 之前比较第一个字符来加快速度：

```
char first = prefixText[0];

foreach(string a in <MYLIST>) 
    {    
         if (a[0]==first)
         {        
            if(a.StartsWith(prefixText, true, null)) 
            { 
                newlist.Add(a);                    
            }
         }             
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-06T18:21:18.583

1500 通常太少：

*   您可以通过对问题的简单分而治之来并行搜索它。在两个（或分成三个、四个、...、部分）不同的作业/线程中搜索列表的每一半。

*   或者将字符串存储在（不是二叉树）树中。将是 O(log n)。

*   按字母顺序排序，您可以进行二进制搜索（与前一个相同）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-06T18:04:59.067

您是否尝试过实施字典并比较结果？或者，如果您确实按字母顺序排列条目，请尝试二进制搜索。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-06T18:25:38.177

对我来说，问题是您是否需要这样做一次或多次。

如果您只找到一次 StartsWithPrefix 列表，那么您将无法更快地保留原始列表并执行`myList.Where(s => s.StartsWith(prefix))`. 这会查看每个字符串一次，所以它是`O(n)`

如果您需要多次查找 StartsWithPrefix 列表，或者您可能想要在原始列表中添加或删除字符串并更新 StartsWithPrefix 列表，那么您应该对原始列表进行排序并使用二进制搜索。但这将是`sort time + search time = O(n log n) + 2 * O(log n)`

如果您使用二进制搜索方法，您将通过搜索找到第一次出现的前缀和最后一次出现的索引。然后在`mySortedList.Skip(n).Take(m-n)`哪里 n 是第一个索引，m 是最后一个索引。

# 编辑：

等一下，我们使用了错误的工具来完成这项工作。使用[特里](http://en.wikipedia.org/wiki/Trie)！如果您将所有字符串放入 Trie 而不是列表，您所要做的就是沿着带有您的前缀的 trie 并获取该节点下的所有单词。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-05-06T18:21:07.767

我会使用 Linq：

```
 var query = list.Where(w => w.StartsWith("prefixText")).Select(s => s).ToList(); 
```

# java - Java.lang.NumberFormatException 错误

> ID：10472885
> 
> 赞同：-3
> 
> 时间：2012-05-06T18:04:16.713
> 
> 标签：java, serial-port

我有这个错误：

输出显示来自程序的 3 个 C。我自己输入了“12.34”。

预期的输出应该是：

```
C
C
C
12.34
12.34 is the first string
12.34 is the second string 
```

12.34 应该被转换为 double 但我得到了奇怪的字符。

![在此处输入图像描述](../Images/ff972ab2b8059580a9dccad9f9475f86.png)

我无法找到解决方案。我尝试了不同的方法，但仍然遇到同样的错误。

这是我的程序：

```
 int ch = 0;
    int i = 0;
    int counter = 0;
    int sum = 0;
    double[] conArray = new double[3];
    //string[] conArray = new string[3];
    double dataDbl;
    String dataStr = null;
    double data = 0;
    String s = "C";
    String t = "Hello";
    //StringBuffer sb = new StringBuffer();
    //String con = "C";
    ////System.out.println("Starting!");
    System.out.println("C");
    buffer.setLength(0);
    System.out.println("C");
    buffer.setLength(0);
    System.out.println("C");

    buffer.delete(0,buffer.length());

    while (i < 300) {
        ch = inStream.read();
        if ((ch == '\r') || (ch == '\n')) {
            i = 300;
        }
        buffer.append((char)ch);
        i++;
    }
    dataStr = buffer.toString();
    dataDbl = Double.parseDouble(dataStr.trim());

    conArray[counter] = dataDbl;

    outStream.writeChars(dataStr);
    System.out.println(" is the first string"); 

    outStream.writeDouble(conArray[counter]);
    System.out.println(" is the first data");  

    buffer.delete(0,buffer.length());
    counter++; 
```

我找到了修复，这里是：

```
 int trash = 0;
                trash = inStream.read();
                System.out.println("C");
                while (true) {
                    ch2 = inStream.read();
                    if ((ch2 == '\r') || (ch2 == '\n')) {
                        break;
                    }

                    if (ch2 != 32) {
                       sb.append((char)ch2);
                    } 
```

我在 inStream 之前放置了一个称为垃圾的整数来删除空格或不需要的字符。工作完美。问题是串行设备用 and 终止其输出。这两个留在缓冲区中未读，因此当读取下一个数据时，实际上什么都没有，因此在 Double.parseDouble(dataStr.trim()); 处发生错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:33:50.007

在解析之前，将您尝试解析的字符串以 double 形式打印到控制台：

```
System.out.println(dataStr.trim()); 
```

它应该显示一个可解析的双精度（在您的情况下为 12.34），否则您在从流中获取它时做错了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:10:46.593

退出循环的最简单方法是使用`break;`在您的情况下，您确保循环将退出，但您仍将添加`\r`或添加`\n`到不属于数字的缓冲区中。

单步调试器是找出代码在做什么的最快方法，尤其是当它没有按照您的预期执行时。在 IDE 中，它通常是 Run 旁边的按钮。

# performance - 简单的淡入淡出总是滞后

> ID：10472893
> 
> 赞同：0
> 
> 时间：2012-05-06T18:05:44.453
> 
> 标签：performance, animation, html, render

当我选择显示此图片时，我遇到了页面上所有动画滞后的问题。我试过用淡入淡出、可见性、动画：不透明度、显示：块来显示它，无论我以哪种方式显示它仍然会导致浏览器阻塞。必须有办法解决这个问题。（我也尝试过预加载图像，但没有区别！）它只是图像的大小吗？

[http://jsfiddle.net/ZJpmT/2/](http://jsfiddle.net/ZJpmT/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:22:50.783

我怀疑这是图像大小。做一个快速测试表明可以显示一个持续时间为 5 秒的淡入淡出，但使用 1 秒的持续时间根本不会显示任何淡入淡出效果，而只是立即显示图像。

对大小为 1MB 的图像进行动画处理并不是您想要做的。如果您确实需要此图像那么大，请尝试为每个框架添加背景，以匹配页面背景并将其保存为 JPG。这可能会稍微减小大小，但不能保证它会阻止浏览器阻塞。

# sql - 如何生成带有前缀、数字和后缀的 ID？

> ID：10472899
> 
> 赞同：1
> 
> 时间：2012-05-06T18:07:30.913
> 
> 标签：sql, sql-server, sql-server-2008

我想在 MSSQL Server 2008 中生成一个 ID。它将是前缀 + 数字 + 后缀，如“PV#000001#SV”。这将是用户定义的（取决于配置）前缀、数字长度、后缀和起始编号。数字每次都会增加。

我绑写这个：

> Blockquote ALTER PROCEDURE [dbo].[spACC_SELECT_VOUCHER_NUMBER]
> 
> ```
>  @COMPANY_ID uniqueidentifier,
>  @VOUCHER_TYPE INT 
> ```
> 
> 开始
> 
> DECLARE @IS_AUTOMETIC BIT =（从 ACC_VOUCHER_CONFIG 中选择 VOUCHER_CONFIG_NUMBERING_METHOD，其中 ACC_VOUCHER_CONFIG.VOUCHER_CONFIG_VALUE=@VOUCHER_TYPE）
> 
> ```
> IF(@IS_AUTOMETIC=1)
>     BEGIN
>         SELECT CASE WHEN SUBSTRING(V.VOUCHER_CODE, 7, 23) IS NULL  
>                     THEN CASE WHEN VC.VOUCHER_CONFIG_PREFIX IS NULL THEN '' ELSE VC.VOUCHER_CONFIG_PREFIX END + 
>                             RIGHT ('0000000000000'+ CAST( VC.VOUCHER_CONFIG_BEGINING_NUMBER AS VARCHAR), VC.VOUCHER_CONFIG_NUMERIC_WIDTH) + 
>                             CASE WHEN VC.VOUCHER_CONFIG_SUFFIX IS NULL THEN '' ELSE VC.VOUCHER_CONFIG_SUFFIX END
>                     ELSE CASE WHEN VC.VOUCHER_CONFIG_PREFIX IS NULL THEN '' ELSE VC.VOUCHER_CONFIG_PREFIX END + 
>                             RIGHT ('0000000000000'+ CAST((CAST( SUBSTRING(V.VOUCHER_CODE, 7, 23) AS INT)+1) AS VARCHAR), VC.VOUCHER_CONFIG_NUMERIC_WIDTH) +  
>                             CASE WHEN VC.VOUCHER_CONFIG_SUFFIX IS NULL THEN '' ELSE VC.VOUCHER_CONFIG_SUFFIX END
>                     END AS VOUCHER_CODE FROM  ACC_VOUCHER_CONFIG VC
>                     LEFT OUTER JOIN  ACC_VOUCHER V ON  VC.VOUCHER_CONFIG_VALUE =  V.VOUCHER_TYPE                        
>                     WHERE  VC.COMPANY_ID=@COMPANY_ID AND VC.VOUCHER_CONFIG_VALUE=@VOUCHER_TYPE      
> END 
> ```
> 
> 结尾

当我更改数字长度/后缀时，它不起作用。

谢谢纳希德
_

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T18:13:24.547

对于您遇到的六位数，添加前导零，如下所示：

```
SELECT RIGHT('00000'+ CONVERT(VARCHAR,Num),6) AS NUM FROM your_table 
```

`Num`你的序号在哪里。

这会在前面加上 5 个零，然后从结果字符串中取出正确的 6 个字符。

自定义 ID 生成的更详细说明如下：

*   [http://www.sqlteam.com/article/custom-auto-generated-sequences-with-sql-server](http://www.sqlteam.com/article/custom-auto-generated-sequences-with-sql-server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T22:18:48.097

我的建议是在数据库中只存储一个数字（即一个 int）并使用更适合它的工具（即具有 sprintf 或等效字符串格式的编程语言）格式化 ID 客户端。

# database-normalization - 规范化 - 识别传递依赖

> ID：10472905
> 
> 赞同：0
> 
> 时间：2012-05-06T18:08:46.363
> 
> 标签：database-normalization, functional-dependencies, transitive-dependency, 3nf

我在识别传递依赖项时遇到了麻烦。我理解它背后的概念，但是看着它们并将它们拉出来是我遇到问题的地方。

所以我知道

甲→乙

不是 B → A

B → C

那么 A → C 是一个传递依赖。

在这种情况下，我似乎无法识别传递依赖：

患者 ID (PK)

Insurance_Co_ID (PK)

Doctor_ID (PK)

名称

P_Lname

P_Street

P_城市

P_Zip

P_Phone

Ins_First_Contact

Ins_Second_Contact

Ins_Phone

Doc_Fname

Doc_Lname

Doc_Beeper

我了解如何制作 1NF、2NF 等图表，识别部分依赖关系和行列式，只是在这方面遇到了麻烦。在进行研究后，我对此的看法是只发现一个传递依赖，但即便如此我也不确定。(Doc_Fname) → (Doc_Lname) → (Doc_Beeper) 所以 (Doc_Fname) → (Doc_Beeper) 还是 (Doc_Fname, Doc_Lname) → (Doc_Beeper)？

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:44:47.410

您的示例看起来不正确。如果您知道 DOC_FNAME，您是否绝对知道 DOC_LNAME？如果两个文档具有相同的 DOC_FNAME 怎么办？

至于 3NF，保险公司的领域在我看来很可疑。什么是 INS_SECOND_CONTACT？这是否意味着您需要 FIRST_CONTACT 才能拥有 SECOND_CONTACT？对我来说，这似乎是标准化的主要候选人。

# android - 关于安卓短信端口

> ID：10472906
> 
> 赞同：3
> 
> 时间：2012-05-06T18:08:47.053
> 
> 标签：android, sms

我想实现一个在特定端口上接收 SMS 的应用程序。

清单代码：

```
<receiver android:name=".BinarySMSReceiver"> 
    <intent-filter> 
        <action android:name="android.intent.action.DATA_SMS_RECEIVED"/>
        <data android:port="8091"/>
        <data android:scheme="sms"/> 
    </intent-filter> 
</receiver> 
```

和下面的接收器类代码。

```
public class BinarySMSReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;

        if(null != bundle)
        {
            String info = "Binary SMS from ";
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            byte[] data = null;

            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                info += msgs[i].getOriginatingAddress();                     
                info += "\n*****BINARY MESSAGE*****\n";

                data = msgs[i].getUserData();

                for(int index=0; index<data.length; ++index)
                {
                    info += Character.toString((char)data[index]);
                }
            }

            Toast.makeText(context, info, Toast.LENGTH_SHORT).show();
        }
    }
} 
```

我收到所有是否在此 ( `8091`) 端口上的短信。我只想接收那些特定于端口的消息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-12T03:51:31.493

对于那些仍然想知道为什么应用程序正在接收定向到其他端口而不仅仅是端口 8091 的数据 SMS 的人。问题在于清单代码。我已经看到了许多发布的解决方案，其中大多数实际上是错误的。

清单应该是：

```
<receiver
    android:name = ".SmsReceiver">
    <intent-filter>
        <action android:name="android.intent.action.DATA_SMS_RECEIVED" />
        <data 
            android:scheme="sms"
            android:host="*"
            android:port="8095" />
        </intent-filter>
</receiver> 
```

**方案、主机和端口属性必须仅在意图过滤器的一个“数据”元素中定义，而不是在单独的“数据”元素中定义。**

也不是来自此[链接](http://developer.android.com/guide/components/intents-filters.html)，在“数据测试”部分下，它声明
“主机和端口共同构成 URI 权限；如果未指定主机，则忽略端口。”
**因此请记住，如果您希望应用程序仅接收特定端口的数据 SMS，则需要指定主机。**

“主机”元素是*（星号）是指定它接受来自所有主机/电话号码的数据短信

希望这可以帮助某人（：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:37:20.507

我有类似的问题，只需在“onReceive”代码的开头添加以下检查条件：

```
String dataStr = intent.getDataString();
if (dataStr.indexOf(":8888" ) == -1) {
    return;
} 
```

# python - 如何将字典转换为字符串

> ID：10472907
> 
> 赞同：15
> 
> 时间：2012-05-06T18:08:54.680
> 
> 标签：python, string

我正在尝试使用[此处提供的解决方案](https://stackoverflow.com/questions/5192753/how-to-get-the-number-of-occurrences-of-each-character-using-python)

除了获取字典，我如何获取具有相同输出的字符串，即字符后跟出现次数

示例：d2m2e2s3

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-06T18:26:59.653

要将 dict 转换为所需格式的字符串：

```
''.join('{}{}'.format(key, val) for key, val in adict.items()) 
```

如果您希望它们按字母顺序按键：

```
''.join('{}{}'.format(key, val) for key, val in sorted(adict.items())) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T18:32:02.900

这是你想要的？

```
#!/usr/bin/python

dt={'d': 2, 'f': 2, 'g': 2, 'q': 5, 'w': 3}
st=""
for key,val in dt.iteritems():
    st = st + key + str(val)

print st 
```

输出：`q5w3d2g2f2`

或这个？

```
#!/usr/bin/python

dt={'d': 2, 'f': 2, 'g': 2, 'q': 5, 'w': 3}
dt=sorted(dt.iteritems())
st=""

for key,val in dt:
    st = st + key + str(val)

print st 
```

输出：`d2f2g2q5w3`

示例`join`：

```
#!/usr/bin/python

adict=dt={'d': 2, 'f': 2, 'g': 2, 'q': 5, 'w': 3}
' '.join('{0}{1}'.format(key, val) for key, val in sorted(adict.items())) 
```

输出：`'d2 f2 g2 q5 w3'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T18:21:37.477

一旦你有了 dict 解决方案，只需使用 join 将它们加入一个字符串：

`''.join([k+str(v) for k,v in result.iteritems()])`

您可以用`''`数字之间的任何分隔符（包括无分隔符）替换

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T18:27:36.937

```
>>> result = {'d': 2, 'f': 2, 'g': 2, 'q': 5, 'w': 3}
>>> ''.join('%s%d' % (k,v) for k,v in result.iteritems())
'q5w3d2g2f2' 
```

或者如果你想要它们按字母顺序...

```
>>> ''.join('%s%d' % (k,v) for k,v in sorted(result.iteritems()))
'd2f2g2q5w3' 
```

或者，如果您希望它们按递增顺序排列...

```
>>> ''.join('%s%d' % (k,v) for k,v in sorted(result.iteritems(),key=lambda x:x[1]))
'd2g2f2w3q5' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-05T09:21:11.973

另一种方法，通过 仅使用避免`%`插值（或） ：`format()``join()`

```
''.join(''.join((k, str(v))) for k,v in mydict.items()) 
```

# javascript - 围绕某个字符分隔字符串

> ID：10472911
> 
> 赞同：0
> 
> 时间：2012-05-06T18:09:22.613
> 
> 标签：javascript, html, string

上下文：我的表单中有一个文本字段，用于输入金额。我想要美元和美分的变量。javascript可以找到小数点的位置，并将其分成两个整数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:12:12.007

`"$111.01".split('.');`产量`['$111', '01']`

然后是清理它（`.replace`）并将它们强制转换为整数（`parseInt`）的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:30:48.610

这是我这样的例子：

[http://jsfiddle.net/9FDrN/1/](http://jsfiddle.net/9FDrN/1/)

HTML：

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<input type="text" id="amount" value="$100.01">
<input type="text" id="dollars" value=""><br/>
<input type="text" id="cents" value=""><br/> 
```

​</p>

JS：

```
$(document).ready(function(){
    var amount_val = $("#amount").val();
    var out = amount_val.split(".");

    $("#dollars").val(out[0].replace("$",""));
    $("#cents").val(parseInt(out[1],10));                  
    });​ 
```

# salesforce - 如何根据每个客户的机会数量在 Salesforce 中重新分配机会？

> ID：10472917
> 
> 赞同：2
> 
> 时间：2012-05-06T18:10:00.850
> 
> 标签：salesforce

我创建了一个简单的类和视觉力页面，显示“分组依据”。输出是完美的，它将显示给定帐户的机会数量：

```
 lstAR = [ select Account.Name AccountName, AccountId, Count(CampaignID) CountResult from Opportunity where CampaignID != null group by Account.Name,AccountId having COUNT(CampaignID) > 0 LIMIT 500 ]; 
```

我想说，如果一个客户有超过 10 个机会，那么将机会分配给另一个少于 10 个的客户。

我使用以下代码在我的视觉力页面中获取结果：

```
public list<OppClass> getResults() {  
  list<OppClass> lstResult = new list<OppClass>();  
  for (AggregateResult ar: lstAR) {  
    oppClass objOppClass = new oppClass(ar);  

      lstResult.add(objOppClass);  
  }

  return lstResult;  
}  

class oppClass {  
  public Integer CountResult { get;set; }  

  public String AccountName { get;set; }  

  public String AccountID { get;set; }

  public oppClass(AggregateResult ar) {  
    //Note that ar returns objects as results, so you need type conversion here  
    CountResult = (Integer)ar.get('CountResult');  

    AccountName = (String)ar.get('AccountName');  
    AccountID = (String)ar.get('AccountID');
  } 
```

检查大于给定数字的计数然后为小于给定数字的帐户分配机会的最佳方法是什么？

正如我所说，代码方面我有一个不错的小控制器和 vf 页面，它将在网格中显示帐户和计数。只是不确定进行重新分配机会的好方法。

谢谢弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:11:33.183

我不确定您为什么要将机会转移到另一个帐户 b/c 通常该帐户是购买这些东西的组织/个人？但话虽如此，忽略原因并专注于如何......

在插入之前触发机会

遍历 trigger.new 并计算该批次中每个帐户（或所有者）有多少个 oppties，将其放入映射 accountId 中进行计数 [因为您可以为同一个帐户插入 10 个 oppties！]。如果您的计数大于 10，请使用您拥有的任何作业助手类更改作业。还填充一组 accountId。

然后为每个帐户运行聚合，其中 ID 在 accountIds 集中，您必须按 AccountId 分组。

循环遍历结果，并将 accountId 的映射更新为计数。

然后遍历 trigger.new 并且对于每个 oppty，通过 accountId 在地图中查找计数。如果计数 > 10，则使用您的助手类完成您的作业。

并做了。

当然，您的分配助手类是另一个需要解决的问题 - 您如何知道将机会分配给哪个帐户/用户，您是否要使用队列、自定义对象、自定义设置来管理规则等...

但是上面的概念应该有效......

# html - IE7 标题错误导航 3px

> ID：10472918
> 
> 赞同：0
> 
> 时间：2012-05-06T18:10:01.783
> 
> 标签：html, css, internet-explorer, internet-explorer-7

我的网站标题在大多数浏览器中显示良好，但在 IE7 中进行测试时。

在 IE7 中，您可以看到深蓝色#nav div 应该与浅蓝色标题对齐时突出的行。是否有一个原因？

要在 IE7 中查看，请转到 IE9 > F12 兼容模式

我的标题总体为 109 像素：

```
#header {
  height: 109px;
  width: 800px;
} 
```

上面徽标的 66 像素高度图像开始，然后是 43 像素高度 div #nav。为什么当 43 + 66 = 109px 时它会突出？

```
#nav {
  background-color: #0071A7;
  height: 43px;
  position: relative;
  width: 800px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:52:32.807

编辑：

您还可以将图像作为 CSS 背景图像放在#header 中，而不是元素....

* * *

一个快速的解决方法是，将 top: -3px 添加到目标 IE7。不是最佳实践。

```
#nav{
    position: relative;
    *top: -3px;
} 
```

# c# - Visual Studio 2010 仅 x86 构建选项？

> ID：10472919
> 
> 赞同：3
> 
> 时间：2012-05-06T18:10:19.177
> 
> 标签：c#, visual-studio-2010

我正在尝试将我的应用程序编译为 64 位，但在选项中我到处都只有 x86？我查看了所有地方，但只有 x86，根本没有 64 位。

这就是我的意思。

![在此处输入图像描述](../Images/1270f0f1920b04bd36466cc2237c4128.png)

我找不到配置管理器中的 64 位选项。请注意，这是 Express 版，而不是零售版。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T18:12:50.943

**要在 64 位平台上配置项目的目标，可以使用 Visual Studio 中的配置管理器。**

以下是步骤：

1.  *转到构建菜单*

2.  *选择配置管理器*

3.  *在活动解决方案平台列表中，选择 64 位平台作为目标解决方案。*

4.  *如果您没有看到该选项，请选择新建*

5.  *在“新建解决方案平台”对话框中，选择 64 位平台作为目标解决方案。*

6.  *现在项目的构建将针对 64 位平台进行优化。*

我取自博文*[Use Visual Studio to build 64-bit application](http://blogs.msdn.com/b/tolong/archive/2007/03/21/use-visual-studio-to-build-64-bit-application.aspx)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:15:10.047

只是为了让人们知道他们是否偶然发现了这一点，XNA 根本不支持 64 位，这就是我做不到的原因。

# oracle10g - 在另一个已经有其他模式的数据库中备份和恢复正在运行的模式

> ID：10472920
> 
> 赞同：0
> 
> 时间：2012-05-06T18:10:40.400
> 
> 标签：oracle10g, backup

我有一个正在运行的数据库，只有一个 dba（即除了 sys、system）“abc”。在这个 oracle 用户下，我有表、视图、序列、过程、函数等。现在我必须将数据和模式复制到另一台机器上的另一个数据库，该机器已经运行了十几个模式（每个单独的 dba 下一个）。我有以下顾虑：

(1) 在移动到新机器之前，我必须将旧机器上的模式从“abc”重命名为“pqr”。

(2) 在我的程序和函数中，我使用的是AUTHID CURRENT_USER，因此必须使用“abc”。表、视图、序列、过程、函数名称前的限定符。更改模式名称时，是否也有一些自动更改限定符的方法。

(3)为了复制数据，我只知道一种方法，就是只备份一个用户“abc”的数据库（即不备份sys、system）。然后将其还原到新数据库。无论如何，这是否会破坏其他模式或其数据。

(4) 在我的模式中，我正在使用过程创建具有有限权限的 oracle 用户。新用户名存储在用户表中。我还在创建数据库角色并将用户与角色相关联。角色名称存储在角色表中。在迁移到新机器时，我必须确保为我的用户和角色添加一些独特的前缀，这样我就不会打扰由其他模式创建的 oracle 用户。

(5) 我知道在新数据库中，必须有一个新的 dba 用户，名为“pqr”。我是否还必须拥有 sysdba 权限。我不对新机器上的整个数据库负责，我只对我的模式负责。作为一个 sysdba，我无论如何都可以伤害其他 dbas（比如删除它们，或者改变它们的模式）。如果我没有 sysdba 权限，我会受到什么限制。我正在使用 OracleText，所以必须使用一些内置包。我还必须在 Windows 的文件系统上创建物理目录。当使用“pqr”连接到数据库时，我还必须通过存储过程创建、更改（更改密码）、删除角色和用户。

新旧数据库都在不同的专用机器上运行。它的 windows server 2003 带有 oracle 10gr1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:19:58.563

最简单的选择是使用[Oracle 导出实用程序](http://docs.oracle.com/cd/B14117_01/server.101/b10825/dp_export.htm#i1007466)（经典或 DataPump）对`abc`第一个数据库中的模式进行逻辑备份，然后使用[Oracle 导入实用程序](http://docs.oracle.com/cd/B14117_01/server.101/b10825/dp_import.htm#i1007653)将备份导入新数据库。如果您使用的是经典版本，您将使用`FROMUSER`和`TOUSER`参数来指定您想要将数据导入到不同的架构中。如果您使用的是 DataPump 版本，您将使用该`REMAP_SCHEMA`参数。如果数据量比较大，DataPump 版本会更高效。

但不幸的是，没有办法更改显式模式限定符。在导入代码或从源代码控制系统中提取代码后，您需要对其进行编辑，编辑代码并将其部署到新数据库。

# php - zf- phpunit - 模拟/测试 $this->getRequest()->getParam('controller') 的最佳方法

> ID：10472922
> 
> 赞同：1
> 
> 时间：2012-05-06T18:10:42.860
> 
> 标签：php, unit-testing, zend-framework, phpunit

phpunit - zend 框架

在控制器动作助手中模拟/如何测试此代码 $this->getRequest()->getParam('controller') 的最佳方法是什么？

（或任何参数或所有相关的事项）

我猜我需要模拟请求对象并期望它至少会使用值控制器找到方法 getParam 一次。

有人可以给我看一个代码示例或让我知道最好的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:14:14.033

如果您的意思是如何使用某些参数测试您的控制器 - 您可以这样做

```
$this->request->setParam($paramName, $paramValue); 
```

# c++ - 列表迭代器未迭代所有元素

> ID：10472925
> 
> 赞同：0
> 
> 时间：2012-05-06T18:11:01.040
> 
> 标签：c++, list, iterator, listiterator

我有一个 TreeVertex 类：

```
// TreeVertex.h
#ifndef __TREEVERTEX__
#define __TREEVERTEX__

#include <list>

using namespace std;

class TreeVertex {
public:
    TreeVertex(list<int>, TreeVertex* = NULL);
    list<int> getItemset();
private:
    list<int> Itemset;

    TreeVertex * Parent;
    TreeVertex * LeftChild;
    TreeVertex * RightSibling;
};

#endif // __TREEVERTEX__

// TreeVertex.cpp

#include "TreeVertex.h"

TreeVertex::TreeVertex(list<int> Itemset, TreeVertex* Parent) : Itemset(Itemset),     Parent(Parent), LeftChild(NULL),
    RightSibling(NULL) { }

list<int>
TreeVertex::getItemset() {
    return Itemset;
} 
```

和这样的主要功能：

```
#include <iostream>
#include "TreeVertex.h"

using namespace std;

int main (int argc, const char ** const argv)
{    
    list<int> tmpList1;
    tmpList1.push_back(1);

    TreeVertex * tmpTreeVert1 = new TreeVertex(tmpList1);

    list<int> tmpList2;
    tmpList2.push_back(2);

    TreeVertex * tmpTreeVert2 = new TreeVertex(tmpList2);

    list<int> newVertItemset;

    newVertItemset.push_back(tmpTreeVert1->getItemset().front());
    newVertItemset.push_back(tmpTreeVert2->getItemset().front());

    cout << newVertItemset.front() << " " << newVertItemset.back() << endl;

    TreeVertex * newTreeVert = new TreeVertex(newVertItemset);

    cout << newTreeVert->getItemset().front() << " " << newTreeVert->getItemset().back() << endl;

    for (list<int>::iterator it = newTreeVert->getItemset().begin(); it != newTreeVert->getItemset().end(); ++it) {
        cout << (*it) << " ";
    }

    cout << endl;

    cout << newTreeVert->getItemset().size() << endl;
    return 0;
} 
```

输出如下所示：

1 2

1 2

2

2

最后一个输出（第一个“2”）的旁边应该是“1 2”，就像其他输出一样。

任何想法为什么迭代器不遍历第一个元素？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T18:15:32.997

这个问题：

```
list<int>
TreeVertex::getItemset() {
    return Itemset;
} 
```

每次调用此函数时，它都会返回对象的*副本*，这意味着以下循环不应该工作：

```
for (list<int>::iterator it = newTreeVert->getItemset().begin(); 
                         it != newTreeVert->getItemset().end(); ++it) { 
```

因为它比较来自两个不同对象的迭代器。一种解决方案是将*参考*返回为：

```
list<int> &   //<--- return reference, not copy
TreeVertex::getItemset() {
    return Itemset;
} 
```

但更好的解决方案是`getItemset`完全删除，而不是添加`begin()`和`end()`成员函数：

```
//define these typedefs first in the public section
typedef list<int>::iterator iterator;
typedef list<int>::const_iterator const_iterator;  

iterator begin() { return itemSet.begin(); }
iterator end() { return itemSet.end(); } 
```

然后将`for`循环写为：

```
for(TreeVertex::iterator it = newTreeVert->begin(); 
                         it != newTreeVert->end(); ++it) { 
```

如果你可以使用 C++11，那么你应该添加这些：

```
//note : the function names start with `c`
const_iterator cbegin() const { return itemSet.cbegin(); }
const_iterator cend() const { return itemSet.cend(); } 
```

或者，如果你使用 C++03（并且不能使用 C++11），那么添加这些：

```
const_iterator begin() const { return itemSet.begin(); }
const_iterator end() const { return itemSet.end(); } 
```

# javascript - 将内容添加到新打开的窗口

> ID：10472927
> 
> 赞同：43
> 
> 时间：2012-05-06T18:11:04.843
> 
> 标签：javascript, jquery, html

我不知道如何解决这个问题，我尝试阅读很多帖子，但没有一个答案。

我需要打开一个新窗口，其中包含已编码的页面（在同一域内）并添加一些内容。

问题是，如果我使用`OpenWindow.write()`的页面尚未加载，或者它会覆盖所有内容，并且只会出现通过 write 添加的代码。

```
var OpenWindow = window.open('mypage.html','_blank','width=335,height=330,resizable=1');
OpenWindow.document.write(output); 
```

`output`是我需要附加的代码。

我需要它至少在 Firefox、IE 和 GC 上工作。

提前致谢。如果我需要使用 JQuery，这不是问题。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-05-31T09:26:54.847

当您要打开新选项卡/窗口时（取决于您的浏览器配置默认值）：

```
output = 'Hello, World!';
window.open().document.write(output); 
```

例如，当输出是一个`Object`并且您想要获取 JSON 时（也可以生成任何类型的文档，甚至是使用 Base64 编码的图像）

```
output = ({a:1,b:'2'});
window.open('data:application/json;' + (window.btoa?'base64,'+btoa(JSON.stringify(output)):JSON.stringify(output))); 
```

> **更新**
> 
> 谷歌浏览器 (60.0.3112.90) 阻止此代码：
> 
> `Not allowed to navigate top frame to data URL: data:application/json;base64,eyJhIjoxLCJiIjoiMiJ9`

当您想将一些数据附加到现有页面时

```
output = '<h1>Hello, World!</h1>';
window.open('output.html').document.body.innerHTML += output;

output = 'Hello, World!';
window.open('about:blank').document.body.innerText += output; 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-06T19:15:08.630

在`parent`.html 中：

```
<script type="text/javascript">
    $(document).ready(function () {
        var output = "data";
        var OpenWindow = window.open("child.html", "mywin", '');
        OpenWindow.dataFromParent = output; // dataFromParent is a variable in child.html
        OpenWindow.init();
    });
</script> 
```

在`child.html`：

```
<script type="text/javascript">
    var dataFromParent;    
    function init() {
        document.write(dataFromParent);
    }
</script> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-06T18:16:16.920

这是您可以尝试的

*   在 mypage.html 中写一个函数说 init() 来做 html 的事情（追加或什么）
*   而不是在dom准备好时`OpenWindow.document.write(output);`调用`OpenWindow.init()`

所以父窗口会有

```
 OpenWindow.onload = function(){
       OpenWindow.init('test');
    } 
```

在孩子身上

```
 function init(txt){
        $('#test').text(txt);
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T18:50:18.173

当您`document.write`在页面加载后调用时，它将消除所有内容并将其替换为您提供的参数。而是使用 DOM 方法来添加内容，例如：

```
var OpenWindow = window.open('mypage.html','_blank','width=335,height=330,resizable=1');
var text = document.createTextNode('hi');
OpenWindow.document.body.appendChild(text); 
```

如果你想使用 jQuery，你会得到一些更好的 API 来处理。例如：

```
var OpenWindow = window.open('mypage.html','_blank','width=335,height=330,resizable=1');
$(OpenWindow.document.body).append('<p>hi</p>'); 
```

如果您需要在新窗口的 DOM 准备好后运行代码，请尝试：

```
var OpenWindow = window.open('mypage.html','_blank','width=335,height=330,resizable=1');
$(OpenWindow.document.body).ready(function() {
    $(OpenWindow.document.body).append('<p>hi</p>');
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-15T08:44:39.353

如果要使用发送数据 POST 或 GET 方法打开页面或窗口，可以使用如下代码：

```
$.ajax({
    type: "get",  // or post method, your choice
    url: yourFileForInclude.php, // any url in same origin
    data: data,  // data if you need send some data to page
    success: function(msg){
                console.log(msg); // for checking
                window.open('about:blank').document.body.innerHTML = msg;  
               }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-09T14:24:47.930

它更简单！

只需将下面的代码放在您的`<head> </head>`代码之间，您的所有链接都将在新窗口中打开：

```
<base target="_blank"> 
```

# scala - 使用包含范围名称的点来封装受保护的访问修饰符

> ID：10472928
> 
> 赞同：0
> 
> 时间：2012-05-06T18:11:13.903
> 
> 标签：scala

在 Scala 中，有一种特殊类型的访问修饰符：protected[enclosure_scope]。但是，一旦我尝试将它与包含点的包名称一起使用，例如 protected[framework.ui]，我就会得到“']' 预期但 '.' 发现”编译器错误。

这看起来真的很奇怪，因为在 java/.net 中的包/命名空间名称中使用点是惯例。我是否遗漏了某些内容，或者无法将此访问修饰符与这种类型的范围名称一起使用。

**更新**

我接受了一个相关的答案，尽管似乎不可能做出我想要的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:37:08.547

您只能将可见性限制在您所在的范围内，那么您需要点做什么？

如果你在

```
package foo.bar 
```

你可以做某事。

```
private[foo] 
```

和

```
private[bar] 
```

点的用例是什么？

# c - C中的GetTotalMemory分配

> ID：10472929
> 
> 赞同：3
> 
> 时间：2012-05-06T18:11:15.970
> 
> 标签：c, memory, memory-management, memory-leaks, malloc

我想在调用函数之前和之后获取分配的总内存，以确定我是否正确释放了所有内容。

我在 C 中做这个，我很生疏，如果这是一个幼稚的问题，请原谅我。我正在寻找类似于 C# GC.GetTotalMemory(true) 的东西，目前在 Windows 中。

现在我在调用函数之前和之后使用`PROCESS_MEMORY_COUNTERS_EX`and `GetProcessMemoryInfo(...)`，但我无法对输出做出正面或反面，因为如果我进入函数并注释掉一个调用，`free(...)`那么它会给我相同的结果（之后总是更大）。这是我现在所拥有的...

```
GetProcessMemoryInfo(hProc, &before, sizeof(before));
r = c->function();
GetProcessMemoryInfo(hProc, &after, sizeof(after));

if(r->result != 0) {
    printf("error: %s\r\n", c->name);
    printf("  %s\r\n", r->message);
    printf("  %s (%d)\r\n", r->file, r->line);
    failed++;
}
else if(after.PrivateUsage > before.PrivateUsage) {
    printf("memory leak: %s\r\n", c->name);
    printf("  %d kb\r\n", after.PrivateUsage - before.PrivateUsage);
    failed++;
}
else succeeded++; 
```

结果如下：

```
after.PrivateUsage - before.PrivateUsage = 12288 
```

如果我去注释掉一些免费电话，我会得到相同的结果。我如何才能真正确定我使用 malloc 分配的当前总内存大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T18:24:33.810

我不知道任何可以帮助您实现这一目标的 c 标准库函数。AFAIK，不存在任何。但是您可以使用某种 hack，不应在发布版本中使用它，而仅用于调试和诊断目的。

您可以在 c 中使用我所说**的 malloc 重载**。你可以在宏的帮助下做到这一点。
您可以在 上编写一个包装函数`malloc`，而无需修改代码中调用该函数的每个实例，然后一个简单的宏就足够了：

```
void* my_malloc(size_t size, const char *file, int line, const char *func)
{

    void *p = malloc(size);
    printf ("Allocated = %s, %i, %s, %p[%li]\n", file, line, func, p, size);

    /*Link List functionality goes in here*/

    return p;
}

#define malloc(X) my_malloc( X, __FILE__, __LINE__, __FUNCTION__) 
```

在您自己的函数中，您可以在一些全局数据结构中收集诊断信息，例如链表。例如：它可以维护返回的缓冲区地址、相应分配的大小等。
类似地，您重载`free()`并且可以在其中进行簿记，传递给函数的每个缓冲区地址都可以根据列表项进行检查并删除从列表中找到匹配项时。
在程序的末尾，列表包含已分配但从未释放的内存条目，即内存泄漏。您可以提供一些 api，以便在需要时从维护的列表中获取诊断详细信息。

您通常可以使用此技巧编写自己的内存泄漏检测器等，以进行调试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T18:31:51.913

几年前（在 Stack Overflow 的这些美好日子之前！）我做了类似的事情，使用我自己的`malloc`and函数在调用 real和函数`free`之前和之后记录了一些指标。`malloc``free`

你可以做这样的事情，这不依赖于平台：

```
// in some common header file, let's say mem_metrics.h
#define malloc malloc_with_metrics
#define free   free_with_metrics

extern size_t num_current_allocs;
void* malloc_with_metrics(size_t size);
void free_with_metrics(void* ptr);

// in mem_metrics.c
#undef malloc
#undef free

size_t num_current_allocs = 0;

void* malloc_with_metrics(size_t size)
{
    ++num_current_allocs;
    return malloc(size);
}

void free_with_metrics(void* ptr)
{
    --num_current_allocs;
    free(ptr);
} 
```

上面的示例记录了在任何给定时间存在多少分配，通过访问`num_current_allocs`. 您可以通过记录您认为有用的任何指标来扩展这个想法！我经常用它来确保`num_current_allocs`程序退出时为 0。

另一个例子：我曾经使用过这样的方法来查找一些未释放的字节，方法是保存一个指针表及其相应的字节大小，在调用时添加新指针及其大小，`malloc_with_metrics`并在调用时删除它们`free_with_metrics`。

如果您需要大量运行时指标，有更好、更全面的第三方库等可以提供更多信息；但是，当您需要在紧要关头检查某些东西时，这是一个快速的小技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T18:23:29.653

您可以使用[Valgrind](http://www.valgrind.org/)检查是否在进程退出时释放了所有动态分配的内存。

# php - 基于 Yaf 框架的应用程序不运行

> ID：10472939
> 
> 赞同：1
> 
> 时间：2012-05-06T18:12:13.173
> 
> 标签：php, model-view-controller, ubuntu

我正在为一个小型应用程序设置 YAF php。问题是我已经按照[文档](http://www.php.net/manual/en/yaf.examples.php)安装了它，但是示例应用程序没有运行并且我得到一个 Yaf_Application not found 错误。我想我已经正确安装了 yaf 运行：

```
php -m | grep yaf 
```

返回`yaf`

但是 phpinfo 不会在任何地方显示任何 YAF 列表。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:44:18.887

通过 Ubuntu 标签，我假设您使用的是 PHP5 的库存 Ubuntu 安装...仔细检查以确保您的 conf.d 目录中有一个 yaf.ini 文件：

> /etc/php5/conf.d/yaf.ini

或者

> /etc/php5/apache2/conf.d/yaf.ini

在该文件中，您至少应该具有：

> 扩展=yaf.so

如果您使用的是自定义安装，请仔细检查 phpinfo() 并验证 php.ini 文件的文件路径。

# java - 从浮点数检索到的值是 0.0 ？

> ID：10472944
> 
> 赞同：-1
> 
> 时间：2012-05-06T18:12:31.757
> 
> 标签：java, floating-point

此函数返回 0.0 尽管所有值都是浮动的并且从共享首选项中正确检索！可能是什么错误？

```
float BMR(){

    SharedPreferences customSharedPreference = getSharedPreferences(
                "myCustomSharedPrefs", Activity.MODE_PRIVATE);

    String  Weight =customSharedPreference.getString("weightpref", null);
    float weight = Float.valueOf(Weight);

    String  Height = customSharedPreference.getString("heightpref",null);
    float height = Float.valueOf(Height);
    String Age = customSharedPreference.getString("agepref", null);
    float age = Float.valueOf(Age);

    int gender = customSharedPreference.getInt("genderpref", 0);

    Toast.makeText(StatsActivity.this, Age, Toast.LENGTH_LONG).show();
    if ( gender == 0){
        bmr = (float) (10.0 *weight + 6.25 * height - 5.0 * age + 5.0);
    }
    if(gender == 1){
        bmr = (float) (10.0 * weight + 6.25 * height - 5.0 * age- 161.0);
    }

    String bmrtest = String.valueOf(bmr);
    Toast.makeText(StatsActivity.this, "bmr is "+bmrtest, Toast.LENGTH_LONG).show();
    return bmr;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:18:34.087

如果性别不是 0 或 1，会发生什么？您的 bmr 将保持未分配状态（至 0.0）。

如果这是问题所在，您可以考虑在未来：

*   在你的 if 后面加上一个 else 子句
*   将这两个 if 组合成一个 elseif（因为它们是独占的）
*   至少放入一个断言来检查性别确实是 1 或 0

# ruby-on-rails - 如何持久化对对象内的数组所做的更改？

> ID：10472957
> 
> 赞同：0
> 
> 时间：2012-05-06T18:13:27.200
> 
> 标签：ruby-on-rails, ruby, mongoid

我有一组位于产品对象内部的历史项目：

```
 class Product
    include Mongoid::Document
    include Mongoid::Paranoia
    include Mongoid::Timestamps

    ...
    embeds_many :modification_histories 
```

我的商业规则是只保存最后 120 条历史记录。因此，当添加新的时，我对旧的进行排序并弹出数组：

```
if self.modification_histories.size >= 120
   self.modification_histories.sort! { |x,y| y.date <=> x.date  }
  while self.modification_histories.size >= 120
     self.modification_histories.pop
  end
end 
```

这似乎工作正常，我在调用该方法后放置了一个断点，并且历史数组的大小正确。但是当我保存对象 ( `self.save!`) 然后重新加载它时，历史数组并没有改变。我看不出我做错了什么。

`gem "mongoid", "~> 2.4"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:26:19.940

简短的回答：将数组复制到另一个数组中。代替：

`self.modification_histories.sort! { |x,y| y.date <=> x.date }`

做

```
arr = self.modification_histories.sort { |x,y| y.date <=> x.date  }
while arr.size >= 120
    arr.pop
end
self.modification_histories = arr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:31:09.783

您也可以将其压缩为一行：

```
self.update_attribute(:modification_histories, self.modification_histories.sort{ |x,y| y.date <=> x.date }[0...120]) 
```

# javascript - 制作自动更新，facebook风格的时间格式

> ID：10472971
> 
> 赞同：1
> 
> 时间：2012-05-06T18:15:03.543
> 
> 标签：javascript, templates, jquery-templates, mustache

有人能帮我弄清楚为什么我的 javascript HTML 模板不会自动更新时间，但常规 HTML 会吗？这是我正在使用的模板库：[https ://github.com/blueimp/JavaScript-Templates](https://github.com/blueimp/JavaScript-Templates)

这是我的 JS（你可以在这里摆弄它：http: [//jsfiddle.net/trpeters1/SpYXM/76/](http://jsfiddle.net/trpeters1/SpYXM/76/)）：

```
$(document.body).on('click', 'button', function(){
   var id= $(this).data('id');
   var data={id:id, string: "just now...", fxn: nicetime()};       
   var result = tmpl('<div id="string" data-id="'+id+'">{%=o.string%}</div><div id="function" data-id="'+id+'">{%=o.fxn%}</div>', data);     
   $('div[data-id="'+id+'"]').html(result);   
   nicetime();
});

function nicetime(){
  var time =  new Date(),
  var comment_date = setInterval(function() { 
  var time2 = time_since(time.getTime()/1000);
  $('#time_since').html(time2); 
  return time2; 
    }, 
  1000);
} 
```

HTML：

```
<button data-id="1">1</button>
<div data-id="1"></div>  //tmpl output
<div id="time_since"></div>  //non-tmpl output 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:46:34.637

你想要这样的[东西](http://jsfiddle.net/SpYXM/89/)。

使用 JavaScript 模板，您通常希望模板**一次**，然后动态更新特定元素的值，而不是每秒重置整个元素的 innerHTML。

这是JavaScript：

```
$(document.body).on('click', 'button', function(){
    var id= $(this).val(),
        time = +new Date,
        data = {
            id: id,
            string: "just now..."
        },    
        result = tmpl('<span class="string">{%=o.string%}</span>', data),
        tgt = $('#'+id),
        str;
    tgt.html(result);    
    str = tgt.find('.string');
    window.setInterval(function() {
        str.html(time_since(time/1000));
    }, 1000);
}); 
```

# android - Android 微调器小部件

> ID：10472972
> 
> 赞同：1
> 
> 时间：2012-05-06T18:15:10.973
> 
> 标签：android

我正在为安卓手机开发一种新的应用程序。我的 Spinner 小部件有问题，我认为是因为类和 Vars，但我真的不知道真正的问题是什么......这是代码：

```
public class BHac extends Activity 
 {

String[] tzIDs = new String[10000];
String sText;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bhac);

    try
    {
        tzIDs = TimeZone.getAvailableIDs();

        Spinner spinner = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, tzIDs);
        spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setSelection(1);
        spinner.setAdapter(spinnerArrayAdapter);

        try 
        {

            spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() 
            {
                public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) 
                {

                    sText= tzIDs[pos];

                    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
                    formatter.setTimeZone(TimeZone.getTimeZone("UTC"));

                    String timestamp = formatter.format(TimeZone.getTimeZone(sText));

                    TextView t = (TextView)findViewById(R.id.textView2);
                    t.setText(timestamp);
                }

                public void onNothingSelected(AdapterView<?> parent) 
                {
                }
            });
        }
        catch (Exception x)
        {
            Context context = getApplicationContext();
            CharSequence text =  "Android Exception [BHAC]" + x;
            int duration = Toast.LENGTH_SHORT;

            Toast toast = Toast.makeText(context, text, duration);
            toast.show();
            Log.e ("WHWJDAKDJKAJKLDJSKKKKKK", "dadada" + x);
        } 
```

这是 LogCat：

```
05-06 19:53:50.950: E/global(334): Deprecated Thread methods are not supported.
05-06 19:53:50.950: E/global(334): java.lang.UnsupportedOperationException
05-06 19:53:50.950: E/global(334):  at java.lang.VMThread.stop(VMThread.java:85)
05-06 19:53:50.950: E/global(334):  at java.lang.Thread.stop(Thread.java:1280)
05-06 19:53:50.950: E/global(334):  at java.lang.Thread.stop(Thread.java:1247)
05-06 19:53:50.950: E/global(334):  at smale.app.dc.SmaleActivity$1.run(SmaleActivity.java:58)
05-06 19:53:51.748: D/dalvikvm(334): GC_EXTERNAL_ALLOC freed 62K, 53% free 2569K/5379K, external 2034K/2137K, paused 98ms
05-06 19:56:36.559: D/AndroidRuntime(334): Shutting down VM
05-06 19:56:36.559: W/dalvikvm(334): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-06 19:56:36.659: E/AndroidRuntime(334): FATAL EXCEPTION: main
05-06 19:56:36.659: E/AndroidRuntime(334): java.lang.IllegalArgumentException
05-06 19:56:36.659: E/AndroidRuntime(334):  at java.text.DateFormat.format(DateFormat.java:365)
05-06 19:56:36.659: E/AndroidRuntime(334):  at java.text.Format.format(Format.java:93)
05-06 19:56:36.659: E/AndroidRuntime(334):  at smale.app.dc.BHac$1.onItemSelected(BHac.java:62)
05-06 19:56:36.659: E/AndroidRuntime(334):  at android.widget.AdapterView.fireOnSelected(AdapterView.java:871)
05-06 19:56:36.659: E/AndroidRuntime(334):  at android.widget.AdapterView.access$200(AdapterView.java:42)
05-06 19:56:36.659: E/AndroidRuntime(334):  at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:837)
05-06 19:56:36.659: E/AndroidRuntime(334):  at android.os.Handler.handleCallback(Handler.java:587)
05-06 19:56:36.659: E/AndroidRuntime(334):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-06 19:56:36.659: E/AndroidRuntime(334):  at android.os.Looper.loop(Looper.java:123)
05-06 19:56:36.659: E/AndroidRuntime(334):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-06 19:56:36.659: E/AndroidRuntime(334):  at java.lang.reflect.Method.invokeNative(Native Method)
05-06 19:56:36.659: E/AndroidRuntime(334):  at java.lang.reflect.Method.invoke(Method.java:507)
05-06 19:56:36.659: E/AndroidRuntime(334):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-06 19:56:36.659: E/AndroidRuntime(334):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-06 19:56:36.659: E/AndroidRuntime(334):  at dalvik.system.NativeStart.main(Native Method) 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:23:21.920

发生这种情况是因为您 findViewById 返回 null 是我的猜测。

没有进一步的代码/布局 Indo 没有太多可以推断的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:43:50.930

好吧，这是引发异常的行：

```
String timestamp = formatter.format(TimeZone.getTimeZone(sText)); 
```

使用您的代码，我相信这就是您的意图：

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
formatter.setTimeZone(sText);

String timestamp = formatter.format(Calendar.getInstance().getTime()); 
```

# wpf - RelativeSource vs. ElementName

> ID：10472975
> 
> 赞同：2
> 
> 时间：2012-05-06T18:15:34.330
> 
> 标签：wpf, xaml, data-binding, binding

I have Hyperlink.Command within a GridColumn.CellTemplate that I bind via an ElementName. I'd like to do the binding using RelativeSource but I couldn't figure out how to do so. Any help in this regard would br greatly appreciated. Thanks....

```
<dxg:GridControl
    DataContext="{StaticResource viewModel}"
    Name="grid"
    ItemsSource="{Binding Details}"
    Grid.Row="1">
    <dxg:GridControl.View>
        <dxg:TableView
            ShowGroupPanel="False" />
    </dxg:GridControl.View>
    <dxg:GridControl.Columns>
        <dxg:GridColumn
            Header="Even or Odd"
            Width="200"
            FieldName="EvenOrOdd">
            <dxg:GridColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock
                        Padding="4,0">
                    <Hyperlink
                            Command="{Binding DataContext.ToggleCommand, ElementName=grid}"
                            CommandParameter="{Binding RowData.Row}">
                        <TextBlock
                                Text="{Binding Value}" />
                    </Hyperlink>
                </TextBlock>
                </DataTemplate>
            </dxg:GridColumn.CellTemplate>
        </dxg:GridColumn>
        <dxg:GridColumn
            FieldName="Number"
            Width="200" />
    </dxg:GridControl.Columns>
</dxg:GridControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:20:08.293

You have to specify the [AncestorType](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.ancestortype%28v=vs.100%29.aspx):

```
Command="{Binding DataContext.ToggleCommand,
                  RelativeSource={RelativeSource AncestorType=dxg:GridControl}}" 
```

# objective-c - 缩短代码以将可变数量的对象添加到 NSMutableArray

> ID：10472982
> 
> 赞同：0
> 
> 时间：2012-05-06T18:16:52.083
> 
> 标签：objective-c, nsarray

有没有办法缩短这段代码？

```
NSMutableArray *allobjects = [[NSMutableArray alloc] initWithCapacity:b];

    if (b == 1) {
        [allobjects addObject:object];
    }else if (b == 2){
        [allobjects addObject:object];   
        [allobjects addObject:object2];
    }else if (b == 3){

        [allobjects addObject:object];
        [allobjects addObject:object2];
        [allobjects addObject:object3];
    }else if (b == 4){

        [allobjects addObject:object];
        [allobjects addObject:object2];
        [allobjects addObject:object3];
        [allobjects addObject:object4];

    }else if (b == 5){

        [allobjects addObject:object];
        [allobjects addObject:object2];
        [allobjects addObject:object3];
        [allobjects addObject:object4];
        [allobjects addObject:object5];
    }else if (b == 6){

        [allobjects addObject:object];
        [allobjects addObject:object2];
        [allobjects addObject:object3];
        [allobjects addObject:object4];
        [allobjects addObject:object5];
        [allobjects addObject:object6];
    }else if (b == 7){

        [allobjects addObject:object];
        [allobjects addObject:object2];
        [allobjects addObject:object3];
        [allobjects addObject:object4];
        [allobjects addObject:object5];
        [allobjects addObject:object6];
        [allobjects addObject:object7];
    }else if (b == 8){

        [allobjects addObject:object];
        [allobjects addObject:object2];
        [allobjects addObject:object3];
        [allobjects addObject:object4];
        [allobjects addObject:object5];
        [allobjects addObject:object6];
        [allobjects addObject:object7];
        [allobjects addObject:object8];
    } 
```

如您所见，如果`b`等于 1，则添加`object1`，如果`b`为 2，则添加`object1`and `object2`，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:27:41.403

将所有这些字符串放入 C 数组中：

```
NSString * objects[] = { object1, object2, object3, object4, object5, object6, object7, object8, object9 }; 
```

一旦你知道`b`' 的价值是什么，然后迭代它：

```
allObjects = [NSMutableArray array];
for( int i = 0; i < b; i++ ){
    [allObjects addObject:objects[i]];
} 
```

或者，更好的是，这样做：

```
allObjects = [NSMutableArray arrayWithObjects:objects count:b]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:31:49.120

```
NSString* ojbs[] = { object1, object2, object3, object4, object5, object6, object7, object8, object9 };

int _count = 5; // for example

NSArray* arr = [NSArray arrayWithObjects: objs count: _count];
NSMutableArray* result = [NSMutableArray arrayWithCapacity: _count];
[resul addObjectsFromArray: arr]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T18:34:09.420

```
NSArray *allStrings = [NSArray arrayWithObjects:object, object2, object3, object4, object5, object6, object7, object8, object9, nil];

NSArray *objects = nil;
if (b <= [allStrings count])
    objects = [allStrings subarrayWithRange:NSMakeRange(0, b)]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T18:44:20.423

这是两个替代答案：

* * *

1.

动态地做它怎么样（假设你可以重命名`object`以`object0`适应模式！）

```
for (uint n = 0; n < b; ++n) {
    NSString *name = [NSString stringWithFormat:@"object%i], n];
    [allObjects addObject:[self performSelector:name]];
} 
```

但是，这在运行时比其他基于数组的答案要慢（每次可以创建它们的数组时，您都必须创建一个新字符串`viewDidLoad`）。

* * *

2.

另一种方法是使用`tag`视图的属性-然后您的循环将变为：

```
for (uint n = 0; n < b; ++n) 
    [allObjects addObject:[self.view viewWithTag:n]]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-06T18:45:50.247

叹！

```
switch (b) {
    case 8 :
        [allobjects insertObject:object8 atIndex:0];
    case 7 :
        [allobjects insertObject:object7 atIndex:0];
    case 6 : 
        [allobjects insertObject:object6 atIndex:0];
    case 5 :
        [allobjects insertObject:object5 atIndex:0];
    case 4 :
        [allobjects insertObject:object4 atIndex:0];
    case 3 :
        [allobjects insertObject:object3 atIndex:0];
    case 2 :
        [allobjects insertObject:object2 atIndex:0];
    case 1 :
        [allobjects insertObject:object atIndex:0];
        break;
    default :
        <Signal error or whatever>
} 
```

如果条目不需要按顺序排列，您可以使用`addObject`.

您还可以使用 OP 原始代码的变体：

```
if (b >= 1) [allobjects addObject:object];
if (b >= 2) [allobjects addObject:object2];
if (b >= 3) [allobjects addObject:object3];
if (b >= 4) [allobjects addObject:object4];
if (b >= 5) [allobjects addObject:object5];
if (b >= 6) [allobjects addObject:object6];
if (b >= 7) [allobjects addObject:object7];
if (b >= 8) [allobjects addObject:object8]; 
```

# gcc - 仅在一次发生时抑制警告

> ID：10472985
> 
> 赞同：0
> 
> 时间：2012-05-06T18:17:05.373
> 
> 标签：gcc

我正在编写一些编译器不理解的操作系统代码，并且在我的一个函数中我这样做：

```
void kernel_getpid()
{
        register unsigned int r0 asm("r0") = current_pid;
} 
```

所以编译器抱怨：

```
Warning: Variable "r0" is not used 
```

如何仅在文件中的这一点禁用警告？我通常希望收到这些警告，所以我不想在全局范围内关闭它们，但此时它变得很烦人，因为我对此无能为力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:52:26.737

从版本 4.2 到 4.6 之前，您可以使用以下内容。不幸的是，它会从文件中的那一点开始关闭警告。

```
#pragma GCC diagnostic ignored "-Wunused-variable"
void kernel_getpid()
{
  register unsigned int r0 asm("r0") = current_pid;
} 
```

对于 4.6 或更高版本，您可以推送和弹出诊断标志，因此您可以使用以下内容。

```
void kernel_getpid()
{
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wunused-variable"

  register unsigned int r0 asm("r0") = current_pid;
}
#pragma GCC diagnostic pop 
```

您可以在 GCC[文档](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)或有关抑制 GCC 警告的教程[中](http://dbp-consulting.com/tutorials/SuppressingGCCWarnings.html)阅读更多详细信息。

# c# - XML 和 Telerik RadTreeview - HierarchicalDataTemplate

> ID：10472988
> 
> 赞同：0
> 
> 时间：2012-05-06T18:17:31.440
> 
> 标签：c#, asp.net, xml, telerik, hierarchical-data

我正在为客户开发一个项目，我正在构建的应用程序将用于编辑实时应用程序使用的 XML 文件。该应用程序是用 Flash 编写的，而且非常不稳定，所以我有点卡在不太理想的 XML 设置上。

XML 的组成（简化）如下：

```
<MenuItem id="1" label="category1">
   <Description>Description for Category 1</Description>
   <Image>Image for category 1</Image>
   <Item label ="Category1Item1">
      <Price>12.99</Price>
      <Type>Wood</Type>
      <additionalElementsHere />
   </Item>
   <Item label ="Category1Item2">
      <Price>112.99</Price>
      <Type>Stone</Type>
      <additionalElementsHere />
   </Item>
   <AdditionalItemsHere />
</MenuItem>
<AdditionMenuITemsHere /> 
```

我一直在使用绑定到 XMLDataSource 的 Telerik 树视图来显示数据并允许用户与之交互（添加/删除节点，通过拖放移动节点，或复制节点和底层元素）。到目前为止，一切都很好。

现在我的客户想知道是否可以将 Item 元素的 Element 用作分组容器。

所以目前树视图看起来像这样：

```
category1
--Category1Item1
--Category1Item2 
```

理想情况下，它最终应该是这样的：

```
category1
--Wood
----Category1Item1
----Category1Item123
--Stone
----Category1Item2
----Category1Item456 
```

我阅读了 HierarchicalDataTemplates，但还没有弄清楚这些是否适用于 Telerik 提供的 ASP.NET 控件。我想尝试并坚持我目前所拥有的，因为到目前为止，该产品已经投入了许多小时的工作。

如果有人能指出如何解决这个特定问题的正确方向，我将不胜感激。

提前致谢 ：）

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:17:25.437

Telerik 的团队提供了以下解决方案来解决问题：

```
 protected void treeViewRearrange(RadTreeView tvw) {
        foreach (RadTreeNode menuItem in tvw.Nodes) {
            List<RadTreeNode> itemTypes = new List<RadTreeNode>();
            foreach (RadTreeNode item in menuItem.Nodes) {
                foreach (RadTreeNode typeElement in item.Nodes) {

                    var type = itemTypes.FirstOrDefault(x => x.Text == typeElement.Text);
                    if (type == null) {
                        type = new RadTreeNode(typeElement.Text);
                        itemTypes.Add(type);
                    }

                    RadTreeNode copyOfitem = item.Clone();

                    // Hide all existing sub types
                    for (int i = 0; i < copyOfitem.Nodes.Count; i++) {
                        copyOfitem.Nodes[i].Visible = false;
                    }

                    type.Nodes.Add(copyOfitem);
                }
            }
            menuItem.Nodes.Clear();
            menuItem.Nodes.AddRange(itemTypes);
            tvw.ExpandAllNodes();
        }
    } 
```

# shell - 从外部erlang文件获取shell中的返回值

> ID：10472989
> 
> 赞同：0
> 
> 时间：2012-05-06T18:17:38.447
> 
> 标签：shell, erlang

我在 erlang 中有一个启动一些模块的脚本文件。在 erlang shell 中，我想使用 start 函数返回的对象。

我有我的文件：

```
-module(myfile).
main() ->
    %% do some operations
    MyReturnVar. 
```

我想为最终用户提供最简单的方法来操纵`MyReturnVar`变量。在 shell 脚本中，我`$ erl -s myfile main`执行 shell 中的函数。

有没有办法在 shell 中获取 MyReturnVar ？

另一种方法是直接从外壳加载模块

```
$ erl
1> X = myfile:main(). 
```

但我不太喜欢这个解决方案，我想要一个更多的“一个命令”选项（或者我可以在 shell 脚本中连续执行几个）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:37:05.780

当您连续说几个时，听起来您想将一个命令的结果通过管道传递给另一个命令。为此，您不使用只能是 int 的返回值，而是使用标准输入和标准输出。这意味着您想要打印`MyReturnVar`到标准输出。为此，您有 io:format。根据什么类型的值`MyReturnVar`是你会做这样的事情：

```
-module(myfile).
main() ->
    %% do some operations
    io:format("~w", [MyReturnVar]),
    MyReturnVar. 
```

现在您应该能够将命令的结果通过管道传输到其他进程。前任：

```
$ erl -s myfile main | cat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:43:45.570

您可以（ab）使用该`.erlang`文件来实现这一点（参见`erl(1)`手册页）。或者在[erlang-history](https://github.com/ferd/erlang-history)中到处乱窜 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:28:31.527

如果可能，请使用 escript。

```
$cat test.escript
#!/usr/local/bin/escript 
main([]) ->
        MyReturnVar=1,
        io:format("~w", [MyReturnVar]),
        halt(MyReturnVar).
$escript test.escript 
1
$echo $?
1 
```

这将打印出 MyReturnVar 并返回 MyReturnVar，这样您就可以使用管道或只捕获 $? 来自 shell 脚本。

# asp.net - CSS 菜单水平对齐

> ID：10472991
> 
> 赞同：0
> 
> 时间：2012-05-06T18:18:19.577
> 
> 标签：asp.net, css, visual-studio, alignment

我试图让我的菜单在顶部水平对齐，但这样做之后它仍然在侧面。下面是我的 CSS 和母版页。笔记。我正在使用 .net 微软视觉工作室。

**CSS 页面..**

```
#title, #menu, #footer {
   background-color: #0174DF;
   color: #fff;
}

ul#menu
{
margin-left: 0;
padding-left: 0;
white-space: nowrap;
}

#menu li
{
display: inline;
list-style-type: none;
}

#menu a { padding: 3px 10px; }

#menu a:link, #menu a:visited
{
color: #fff;
background-color: #036;
text-decoration: none;
}

#menu a:hover
{
color: #fff;
background-color: #369;
text-decoration: none;
}

#footer {
    text-align: center; 
```

**母版...**

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="MasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Lottery Syndicate Web Site</title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
     <link href="css/css/reset.css" media="screen" rel="stylesheet" type="text/css" >
     <link href="css/css/960.css" media="screen" rel="stylesheet" type="text/css" >
     <link href="css/css/text.css" media="screen" rel="stylesheet" type="text/css" >
     <link href="css/style.css" media="screen" rel="stylesheet" type="text/css" >
</head>
<body>
    <form id="form1" runat="server">
    <div id="container" class="container_16"> 
            <div id="title" class="grid_16"> 
                <img src="images/bingo.png" alt="bingo header" />
            </div> 
            <div id="menu" class="grid_3">
                <ul>
                    <li><a href="index.aspx">Home</a></li>
                    <li><a href="exercise1.aspx">Exercise 1</a></li>
                    <li><a href="exercise2.aspx">Exercise 2</a></li>
                    <li><a href="exercise3.aspx">Exercise 3</a></li>
                    <li><a href="exercise4.aspx">Exercise 4</a></li>
                    <li><a href="#">Exercise 5</a></li>
                    <li><a href="exercise6.aspx">Exercise 6</a></li>
                    <li><a href="exercise7.aspx">Exercise 7</a></li>
                    <li><a href="exercise8.aspx">Exercise 8</a></li>
                </ul>
            </div>

            <div id="content" class="grid_13">
                <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

                </asp:ContentPlaceHolder>
            </div>

            <div id="footer" class="grid_16"> 
                <p>Footer here</p> 
            </div> 

    </div> 
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:28:28.907

您的 CSS 期望您的 ul 具有 menu 的 id...但是具有该 id 的元素是包含 div。我会先澄清这一点。

```
ul#menu 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:36:57.230

由于所有**li**元素都设置为**内联**在您的 css 中，您的问题可以这样解决：

```
#menu { text-align: center; } 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T18:46:47.537

我为您创建了一个 jsfiddle 来解决问题并将 div 水平居中[http://jsfiddle.net/trickeedickee/Wj6U9/](http://jsfiddle.net/trickeedickee/Wj6U9/)

# c# - 如何通过减少主控容器来获得更多的win7航空玻璃面积？（C＃）

> ID：10472995
> 
> 赞同：2
> 
> 时间：2012-05-06T18:18:35.807
> 
> 标签：c#, winforms, aero-glass

默认情况下，表单有一个有限大小的标题区域，用于应用航空玻璃效果。我想增加该区域，不仅在标题处，而且在表格的底部和侧面。 ![方案](../Images/ab3eebd6bd7f717d11aad79ba6ab5749.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:24:03.233

使用`DwmExtendFrameIntoClientArea`：

```
[StructLayout(LayoutKind.Sequential)]
struct MARGINS {
    int Left;
    int Right;
    int Top;
    int Bottom;
}

[DllImport("user32.dll")]
public static extern IntPtr DwmExtendFrameIntoClientArea(IntPtr hWnd, ref MARGINS pMarInset); 
```

`DwmExtendFrameIntoClientArea`用你的表格`Handle`和`MARGINS`结构打电话。只需将`Left`、`Right`和设置为您希望相应边框扩展的数量`Top`。`Bottom`

哦，并将`BackColor`您的表单设置为`Black`. （谢谢，@HansPassant！）

[对不起，如果我的`extern`语法错误。我从来没有在 C# 中这样做过......]

# javascript - HTML中的数字上下？

> ID：10472997
> 
> 赞同：26
> 
> 时间：2012-05-06T18:18:53.530
> 
> 标签：javascript, jquery, html

HTML中是否有数字上下？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-06T18:22:24.013

使用 HTML5 [`<input type="number"/>`](http://www.w3.org/TR/html5/forms.html#number-state-%28type=number%29)。

在[Dive Into HTML5](http://diveintohtml5.info/forms.html#type-number)中阅读更多内容。何时[可以使用数字输入类型？](http://caniuse.com/input-number)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T18:27:07.380

那里有很多数字步进器。寻找“数字步进器”或“数字微调器”。

[http://xflatlinex.github.io/Numeric-Stepper/](http://xflatlinex.github.io/Numeric-Stepper/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-14T20:38:08.573

使用`input`标签`type="number"`

```
<input type="number"> 
```

以下是有关如何使用 NumericUpDown 的用法示例：

```
document.getElementById("square").addEventListener("click", function() {
  var result = document.getElementById("result");
  var nudMax = document.getElementById("max").value;

  result.innerHTML = nudMax * nudMax;
});
```

```
<label for="max">Max</label>
<input id="max" type="number">

<button id="square">Square</button>

<br>

<label for="result">Result:</label>
<output id="result"></output>
```

# css - cakePHP 内联显示表单元素

> ID：10472998
> 
> 赞同：2
> 
> 时间：2012-05-06T18:19:01.013
> 
> 标签：css, cakephp, helper

我正在尝试显示使用 cakePHP 表单助手构建的内联表单元素。它似乎与它围绕元素创建的类有关。我确信这可以用 CSS 解决，但如果有另一种方法，我宁愿做对：

```
<?php
            echo $this->Form->create("users");
            echo $this->Form->input("username",array("label" => false, "class" => false, "value" => "Username", "class" => "loginCredentials"));
            echo $this->Form->input("password",array("label" => false, "class" => false, "value" => "Password", "class" => "loginCredentials"));
            echo $this->Form->input("loginBtn",array("label" => false, "class" => false, "value" => "LOGIN", "class" => "loginCredentials", "type" => "submit"));
            echo $this->Form->end();
            ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T19:12:35.203

默认情况下，CakePHP`<div>`在输入周围放置 s。您可以将`'div'=>false`选项添加到每个输入：

```
echo $this->Form->input("username",array("label" => false, "div"=>false, "class" => false, "value" => "Username", "class" => "loginCredentials")); 
```

或者，您可以为表单本身设置 inputDefaults：

```
echo $this->Form->create('whatever', array(
    'inputDefaults'=>array('div'=>'false', 'label'=>false))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T15:54:20.590

不要误会我的意思，我想你可以试试这个，这也应该有帮助

```
echo $form->create('Job',
        array(  'type'=>'file',
                'class' => 'form-horizontal',
                'inputDefaults' => array(
                    'div' => array('class' => 'form-group'),
                    //needs to be redefined due to restrictions of the text element we need to define for each input..
                    'label' => array('class' => 'col-sm-4 col-md-3 control-label'),
                    'class' => 'form-control',
                    'between' => '<div class="col-sm-8 col-md-9">',
                    'after' => '</div>'
                )
        )
    ); 
```

那么你可以简单地做：

```
echo $form->input('taskfield_id',
        array(  'label'=> array('text' => 'Aufgabenbereich&nbsp;*','class' => 'col-sm-4 col-md-3 control-label'),
                'empty'=>'Bitte wählen'
        )
    ); 
```

这将输出类似这样的内容

```
<div class="form-group required">
    <label for="JobTaskfieldId" class="col-sm-4 col-md-3 control-label">Aufgabenbereich&nbsp;*</label>
    <div class="col-sm-8 col-md-9">
        <select name="data[Job][taskfield_id]" class="form-control" id="JobTaskfieldId">
            <option value="">Bitte wählen</option>
        </select>
    </div>
</div> 
```

现在你有了一个表格，它总是给你这种形式的输入

```
<div> <label> </label> <div> <input /> </div> </div> 
```

因为我需要翻译一些标签，所以每个输入都需要一个 extea 标签数组，如果您将字段名称保持在数据库中，则不需要这些标签。

编辑：这是用引导程序和蛋糕制作的，您也可以自己设计样式，因为您可以完全控制类和标签或没有类

```
label{float:left;width:25%}
label+div input{float:left;width:75%} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T05:52:22.710

**我的表单只有 4 个必填字段，由以下视图生成：**

```
<div class="users form"> 
<?php echo $form->create('User', array('class'=>'form'));?>
<p class="formtitle">Sign Up</p>
<fieldset>
    <legend class="formtitle">Please complete the form below.</legend>
    <?php
        echo $form->input('username',  array(
            'label' => 'Login',
            'div'=>'formfield',
            'error' => array(
                'wrap' => 'div',
                'class' => 'formerror'
                )
            ));
        echo $form->input('password',  array(
            'label' => 'Password',
            'div'=>'formfield',
            'error' => array(
                'wrap' => 'div',
                'class' => 'formerror'
                )
            ));
        echo $form->input('password_confirm', array(
            'label' => 'Confirm password',
            'type'=>'password',
            'div'=>'formfield',
            'error' => array(
                'wrap' => 'div',
                'class' => 'formerror'
                )
            ));
        echo $form->input('name',  array(
            'label' => 'Name',
            'div'=>'formfield',
            'error' => array(
                'wrap' => 'div',
                'class' => 'formerror'
                )
            ));
        echo $form->input('surname',  array(
            'label' => 'Surname',
            'div'=>'formfield',
            'error' => array(
                'wrap' => 'div',
                'class' => 'formerror'
                )
            ));
        echo $form->input('email',  array(
            'label' => 'E-mail',
            'div'=>'formfield',
            'error' => array(
                'wrap' => 'div',
                'class' => 'formerror'
                )
            ));
        echo $form->input('city_id',  array(
            'label' => 'City',
            'div'=>'formfield',
            'error' => array(
                'wrap' => 'div',
                'class' => 'formerror')));
    ?>
</fieldset>  
<?php echo $form->end('Submit');?>
</div> 
```

**一些解释：**

将类添加到表单标签：

```
$form->create('User', array('class'=>'form'))
generates:

<form class="form" id="UserAddForm" method="post" action="/kultura/users/add"> 
```

将类添加到输入：

```
echo $form->input('username',  array(
            'label' => 'Login',
            'div'=>'formfield',
            'error' => array(
                'wrap' => 'div',
                'class' => 'formerror'
                )
            )); 
```

生成这个：

```
<div class="formfield required">
<label for="UserUsername">Login</label>
<input name="data[User][username]" type="text" maxlength="20" value="" id="UserUsername" />
</div> 
```

这种情况下会出现错误：

```
<div class=”formerror”&gt;</div> 
```

示例 css 样式可能如下所示：

```
.form{
    font-family: Verdana;   
    font-size:1em;
    margin:1em;
    padding:1em;   
}

.form p.formtitle{
    color: #026475;
    font-size:1.3em;
    font-weight: bold;
}

.form fieldset{
    width:40em;
    border:1px solid #FFE545;  
    background-image: url(../img/Contact.png);
    background-position: bottom right;
    background-repeat: no-repeat;
}

.form fieldset legend{
    color: #026475;
}

.formfield{
    width:30em;
    padding:5px;
}

.formfield label{
    display:block;
    float:left;
    width:12em;
    padding:1px;
    color:#C2A34F;
    text-align:right;
}

.formfield input, .formfield  select{
    padding:0.15em;
    width:14em;
    border:1px solid #ddd;
    background:#FEFBAF;

    font-family: Verdana;   
    font-size:1em;

    -moz-border-radius:0.4em;
    -khtml-border-radius:0.4em;
}

.formfield input:hover, input:focus {
    border-color:#c5c5c5;
    background:#f6f6f6;
}

.required input {
    border:1px solid #FBB829;
}

.form .submit input{
    font-family: Verdana;   
    font-size:1em;
    margin-top: 0.3em;
}

.formerror{
    position:relative;
    left:12.1em;
    color:#FBB829;
} 
```

结果：

![在此处输入图像描述](../Images/6f1248dc3fb52db27938106340b6a8c2.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-15T09:26:44.380

在 CakePHP4 中，我只是简单地添加了一个新的 CSS 文件，在其他文件之后加载它，然后将以下内容放入其中。这会覆盖原始 CSS 中的现有 display:block

```
label,
legend {
    display: inline; //change
    font-size: 2.0rem;
    /* font-weight: 700; */
    /* margin-bottom: 2.0rem */
} 
```