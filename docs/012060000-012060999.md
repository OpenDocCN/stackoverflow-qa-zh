# StackOverflow 问答 12060000-12060999

# sharepoint - 使用 .NET 自定义集合对象时如何编写功能代码

> ID：12060001
> 
> 赞同：1
> 
> 时间：2012-08-21T17:27:33.340
> 
> 标签：sharepoint, f#

我正在尝试使用 F# 处理 SharePoint 2010 对象（就像实验一样）。

所以我写了这段代码

```
let getSPDomainUsers (spWeb : SPWeb) =
seq {
  for r in spWeb.RoleAssignments do
    match r.Member with
    | :? SPUser as user ->        
      for b in r.RoleDefinitionBindings do
        if (user.IsDomainGroup) then yield (spWeb.Url.ToLower(), user, b.Name.ToLower())
    | :? SPGroup as group ->
      for u in group.Users do
        for b in r.RoleDefinitionBindings do
          if (u.IsDomainGroup) then yield (spWeb.Url.ToLower(), u, b.Name.ToLower())
    | _ -> ()
} 
```

但是，对于所有这些 for 循环和 if 条件，我的代码看起来非常必要。

而不是 for 循环，我想做一些类似 List.map 但是这些对象中的大多数，如 RoleDefinitionBindings 或 RoleAssignments 都返回给我不是列表、数组或序列的集合，所以我不得不编写循环。

当返回类型是自定义集合对象（如 SPRoleAssignmentCollection 和 SPRoleDefinitionBindingCollection）时，您能告诉我一种避免循环的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T17:44:10.567

[`SPRoleDefinitionBindingCollection`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.sproledefinitionbindingcollection.aspx)继承[`SPBaseCollection`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spbasecollection.aspx)which implements `IEnumerable`(但不是`IEnumerable<T>`, ie, `seq<'T>`)。您可以使用`Seq.cast`将 的实例`IEnumerable`转换为`seq<'T>`.

一旦你有了一个`seq<'T>`，你就可以使用 F#`Seq`模块中的常用函数。

这是您的代码的清理版本。我没有 SharePoint，所以我无法编译/测试它；您可能需要在将自定义集合类型显式`IEnumerable`转换为`Seq.cast`.

```
let userInfo (user : SPUser) =
    user.RoleDefinitionBindings
    |> Seq.cast<SPRoleDefinition>
    |> Seq.choose (fun b ->
        if user.IsDomainGroup then
            Some (spWeb.Url.ToLower(), user, b.Name.ToLower())
        else None)

let getSPDomainUsers (spWeb : SPWeb) =
    spWeb.RoleAssignments
    |> Seq.cast<SPRoleAssignment>
    |> Seq.collect (fun r ->
        match r.Member with
        | :? SPUser as user ->
            userInfo user
        | :? SPGroup as group ->
            Seq.collect userInfo group.Users
        | _ ->
            Seq.empty) 
```

# database - 限制redis中的列表长度

> ID：12060004
> 
> 赞同：37
> 
> 时间：2012-08-21T17:27:54.650
> 
> 标签：database, redis

我正在使用 redis 列表并将新项目推送到列表中。问题是我真的只需要列表中最近的 10 项。

我`lpush`用来将项目添加到列表并`lrange`获取最新的 10 个。

有没有在一定数量后丢弃物品？我最终会得到可能包含 1,000 个项目的列表，并且可能会导致延迟出现性能问题。

谢谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-21T17:33:06.070

在 every 之后`lpush`，调用`ltrim`将列表修剪为 10 个元素

见[http://redis.io/commands/ltrim](http://redis.io/commands/ltrim)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-06-17T06:56:15.090

您可以在任何 LPUSH 之后**间歇性地使用**[LTRIM ，](http://redis.io/commands/ltrim) **无需在每次 LPUSH 之后调用 LTRIM，因为这会增加应用程序的整体延迟**（虽然 redis 非常快，但您可以节省大量 LPUSH 操作）

 ****这是大约每 5 个 LPUSH 实现 LTRIM 的伪代码：

```
LPUSH mylist 1
random_int = some random number between 1-5
if random_int == 1:  # trim my list with 1/5 chance
   LTRIM mylist 0 10 
```

尽管您的列表有时可能会增长到超过 10 个元素的几个元素，但它肯定会定期被截断。这种方法适用于大多数实际目的，并且可以节省大量 LTRIM 操作，从而保持快速推送。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-09T10:22:57.680

以下代码，

*   将项目推送到列表中，
*   保持大小固定为 10，
*   并返回最近的 10 个元素

在一次**交易**中。

```
MULTI
LPUSH list "item1"
LTRIM list 0 9
LRANGE list 0 9
EXEC 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-09-03T17:32:03.763

从来没有人提到过**只存储最近 10 个项目**的真正解决方案。

让我们创建一个包含 15 个项目的示例列表（这里只是数字）：

```
RPUSH list 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 
```

现在指示从列表末尾的偏移量：

```
LTRIM list -10 -1 
```

显示列表

```
LRANGE list 0 -1

 1) "6"
 2) "7"
 3) "8"
 4) "9"
 5) "10"
 6) "11"
 7) "12"
 8) "13"
 9) "14"
10) "15" 
```

现在您可以添加新项目并运行修剪：

```
RPUSH list 16
LTRIM list -10 -1

 1) "7"
 2) "8"
 3) "9"
 4) "10"
 5) "11"
 6) "12"
 7) "13"
 8) "14"
 9) "15"
10) "16" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-11-28T07:02:46.823

只是一种选择。根据[官方文档](https://redis.io/commands/lpush)，`LPUSH`它在推送操作后返回列表的长度。您可以设置阈值长度，例如`k`（在您的情况下 k > 10）并`LTRIM`在返回的长度大于时调用`k`。示例伪代码如下：

```
len = LPUSH mylist xxx 
if len > k:   
  LTRIM mylist 0 9
LRANGE mylist 0 9 
```

它比随机方法更可控。更大的`k`触发器更少`LTRIM`，但内存成本更高。您可以`k`根据要调用的频率进行调整，`LTRIM`因为调用额外的命令更昂贵。****

# singly-linked-list - 使用 C 的链表中的意外输出

> ID：12060009
> 
> 赞同：1
> 
> 时间：2012-08-21T17:28:09.087
> 
> 标签：singly-linked-list

我刚刚开始学习 C 并且是一个初学者。今天在学校，我们学习了链表，我能够编写一个代码......幸运的是它运行没有错误。

```
#include<stdio.h>
#include<stdlib.h>
struct node
{
    int data;
    struct node *next;
}*head;//*temp;
void create(struct node **h,int num)
{
    int i;
    struct node *temp=*h;
    for(i=0;;i++)
    {
        if(i>=num)
        break;
        temp->data=i;
        temp->next=malloc(sizeof(struct node));
        temp=temp->next;
    }
    temp->next=NULL;
}
    void display(struct node **h)
{   
    struct node *temp=*h;
    while(temp->next!=NULL)
    {
        printf("%d->",temp->data);
        temp=temp->next;
    }
    printf("\b\b  \b\b");
}
void append_end(struct node **h,int val)
{
    struct node *temp=*h,*temp1;
    //printf("'%d'",val);
    while(temp->next!=NULL)
    temp=temp->next;
    temp1=malloc(sizeof(struct node));
    temp1->data=val;
    temp1->next=NULL;
    temp->next=temp1;
}
void free_list(struct node **h)
{
    struct node *temp=*h,*tail;
    while(temp->next!=NULL)
    {
        tail=temp;
        temp=temp->next;
        free(tail);
    }
    h=NULL;
}
int main()
{
    head=malloc(sizeof(struct node));
    int i,num;
    scanf("%d",&num);
    create(&head,num);
    //display(&head);
    append_end(&head,5);
    append_end(&head,6);
    display(&head);
    /*temp=head;
    while(temp->next!=NULL)
    temp=temp->next;
    printf("%d",temp->data);*/
    free_list(&head);
    return 0;
} 
```

对于 4 的输入，预期的输出应该是 0->1->2->3->5->6

但相反，我得到 0->1->2->3->(一些垃圾值)->5

如果有人能指出我的错误和/或链接到任何可能有助于我清楚地理解该主题的文章，我会很高兴。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:13:04.880

我已经重构了你的代码。你可以在这里看到它：http: [//ideone.com/nZ55i](http://ideone.com/nZ55i)

1.  你的代码很丑，所以我把它调整成了我自己的风格。我建议你找一个你喜欢的风格，那是你容易阅读的。
2.  将 head 的声明移到 main 方法中（以前是全局变量）
3.  无缘无故采用指针对指针类型的函数已被修改为采用指针。
4.  您至少在 3 个地方使用了 malloc(sizeof(struct node))，所以我刚刚创建了一个函数来为您完成它。
5.  在节点结构的声明中添加了 typedef，您现在可以声明它的实例`node derp;`
6.  `create`函数使用带有空条件和中断的 for 循环，重构为使用没有中断的正确 for 循环
7.  垃圾值是由 create 函数中的错误引起的，该错误阻止它将值写入它创建的最后一个节点。为了解决这个问题，我移动了一些东西，所以它总是分配`data`字段，但如果它在末尾则不分配新节点
8.  未能写入列表中的最后一项是由于显示函数中的错误导致它在显示最后一个节点之前终止。

如果这是一个家庭作业问题并且你交出我的代码，我会找到你，开车到你家，用大炮从你卧室的窗户射出一个烂土豆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:12:20.147

好的，我开始将它放在评论中，但将代码放在评论中会得到砖块:)。这*未经测试*，并且有无数种方法可以解决它（假设我已经正确诊断出问题:)），但是提供了一种可能可以解决您的 create 方法的方法：（请注意，我已经简化了您的循环，仅使用“for”循环构造的正常终止条件，并消除循环中不再需要的“if..break”。“->next”成员将始终初始化为新成员，如果还有一个要创建，否则为 NULL，所以我们不需要结束赋值：

```
void create(struct node **h,int num)
{
    int i;
    struct node *temp=*h;
    for(i=0;i<num;i++)
    {
        temp->data=i;
        if (i==(num-1))
           temp->next=NULL;
        else
           temp->next=malloc(sizeof(struct node));

        temp=temp->next;
    }
} 
```

# testing - 在 Gherkin 中编写“Given When Then When Then”测试是否可以接受？

> ID：12060011
> 
> 赞同：24
> 
> 时间：2012-08-21T17:28:22.350
> 
> 标签：testing, bdd, gherkin

在 Gherkin 中编写“Given When Then When Then”测试是否可以接受？一个真实的例子如下 allPlayers.com

```
Scenario: Successfully register a user
  Given I am on homepage
    And I am not logged into an account
  When I follow "create a new account"
    And I fill in "First Name" with "Bobby"
    And I fill in "Last Name" with "Bricks"
    And I fill in "E-mail" with "bbricks@example.com"
    And I select "Jun" from "Birthday Month"
    And I select "22" from "Birthday Day"
    And I select "1985" form "Birthday Year"
    And I select "Male" from "Gender"
    And I fill in "Password" with "123testing"
    And I fill in "Confirm Password" with "123testing"
    And I solve the captcha math problem
    And I click "Create new account"
  Then I should see "the user dashboard"
    And I should see the Registration Wizard
  When I push "Proceed to next step"
  Then the "First Name" field should contain "Bobby"
    And the "Last Name" field should contain "Bricks". 
```

我知道它使用 behat 工作，所以解析它不是问题。我只是想编写更好的测试。我可以先写，`And the Registration Wizard should be filled out with data`但这似乎不够具体......

建议？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-22T08:43:57.493

这取决于所写功能的目标受众。您所获得的小黄瓜似乎极有可能不是与利益相关者（即非技术人员但对业务和网站有既得利益的人）一起编写的。BDD 实际上是关于需求和期望的***对话***——Gherkin 是一种工具，它提供了一种标准/公认的方式，每个人都应该能够阅读，你可以编写需求和期望；以某种方式为开发人员提供自动化测试，也可能为测试人员提供测试脚本。

现在试图脱下我的开发人员帽子 - 我会说业务利益相关者宁愿阅读并轻松理解......

```
Scenario: Should be able to successfully register on website
    Given I am new to the website
    And I want to register for a user account
    When I go to the registration form
    And I complete all the required registration details correctly
    Then I will be registered on the website
    And I will be automatically logged in 
```

您仍然可以在本规范的幕后构建相同的测试 - 但本规范具有更大的读者群，这是一个任何人都应该理解的更容易理解的要求。我并不是说你拥有的东西没有价值——远非如此。这将是一个非常有效的测试。但它是开发人员特定的，并且与 UI 实现高度耦合（如果您重构/重新设计 UI，您现在需要重构您的需求......）。

我一开始有很多像你一样的小黄瓜规格——我有时仍然使用它们。一旦你的测试框架建立起来，一个小黄瓜是编写数据驱动/可配置单元测试的一种非常好的方式；它们对我的开发过程仍然具有很大的价值。但我确实尝试将更“纯”的规范与我的“开发者”规范分开 - 但文件夹和标签/类别。

编辑：我想总而言之我得到的是......你所拥有的是一个很好的“测试”，但一个相当糟糕的“要求”。坚持下去！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-07-21T19:58:54.013

是的，当现实世界的场景需要它时，在 Gherkin 场景中不止一个`When`/循环是合适的。`Then`

[SaxonMatt 的回答](https://stackoverflow.com/a/12069351/634576)提出了一个很好的观点，即最好用利益相关者的语言而不是 UI 操作的语言编写场景，这样做通常会缩短场景的长度，但这错过了问题的确切要点。让我们抓住公牛的角。

Gherkin 是为验收测试而设计的：测试利益相关者级别的需求是否已完全实现，即软件是否确实为利益相关者提供了价值。有时提供价值需要不止一个行动-响应周期。考虑以下场景：

```
Scenario: Guest buys a product
  # This scenario starts with the user not logged in, which doesn't require a step
  Given there is a product named "Elliptical Juicer"

  When I go to the product page for "Elliptical Juicer"
  And I add the product to my shopping cart
  Then I should see 1 product in my shopping cart

  When I request to check out
  Then I should see the account creation form

  When I create an account
  Then I should see the checkout form with 1 product, "Elliptical Juicer"

  When I check out
  Then I should see the checkout success page with 1 product, "Elliptical Juicer"
  And I should receive a checkout confirmation email with 1 product, "Elliptical Juicer" 
```

（请注意，当我在一个场景中有多个`When`/`Then`循环时，我喜欢用空行分隔它们，以便它们脱颖而出。）

`When`最好使用多个/`Then`循环编写此方案有几个原因：

*   在用户结帐之前，他们应该在他们的购物车中看到一个产品（仅作为站点标题中的一个数字，因此该步骤没有提及产品名称）。在场景结束时无法测试此要求。（好吧，测试可以在用户将产品添加到他们的购物车后立即收集信息，并在场景结束时断言预期的计数，但这将毫无意义地偷偷摸摸和混淆。）相反，在自然状态下断言正确的计数放置在场景中，只要它对用户可见。

    类似地，`Then I should see the account creation form`并且`Then I should see the checkout form with 1 product, "Elliptical Juicer"`可以在场景中自然测试它们的点测试重要需求。

*   假设我们不关心用户在这个过程中看到了什么，只关心他们是否带着他们的产品到达场景的结尾。然后我们可以省略中间`Then`步骤：

    ```
    Given there is a product named "Elliptical Juicer"
    When I go to the product page for "Elliptical Juicer"
    And I add the product to my shopping cart
    And I request to check out
    And I create an account
    And I check out
    Then I should see the checkout success page with 1 product, "Elliptical Juicer"
    And I should receive a checkout confirmation email with 1 product, "Elliptical Juicer" 
    ```

    `And I create an account`出乎意料，不是吗？它要求读者推断访客用户在结账时被要求创建一个帐户。更明确地说，就像我给出的场景的第一个版本一样。

*   假设上述问题都没有说服我们，并且我们为整个场景中的每个点编写了一个单独的 Gherkin 场景，我们需要断言需求已经得到满足：

    ```
    Scenario: Guest adds a product to their shopping cart
      Given there is a product named "Elliptical Juicer"
      When I go to the product page for "Elliptical Juicer"
      And I add the product to my shopping cart
      Then I should see 1 product in my shopping cart

    Scenario: Guest with a product in their shopping cart attempts to check out
      Given I have a product in my shopping cart
      When I request to check out
      Then I should see the account creation form

    Scenario: Guest creates an account
      Given I have a product named "Elliptical Juicer" in my shopping cart
      And I am on the account creation form
      When I create an account
      Then I should see the checkout form with 1 product, "Elliptical Juicer"

    Scenario: Newly registered user checks out
      Given I am a user
      And I have a product named "Elliptical Juicer" in my shopping cart
      And I am on the checkout form
      When I check out
      Then I should see the checkout success page with 1 product, "Elliptical Juicer"
      And I should receive a checkout confirmation email with 1 product, "Elliptical Juicer" 
    ```

    那是糟糕的！首先，没有一个场景是利益相关者认为的场景。其次，当中间状态之一改变时，两个步骤将不得不改变：断言中间状态的`Given`步骤和为下一个场景设置中间状态的步骤。这些`Given`步骤中的每一个都是设置错误状态的机会，即产生集成错误。这组场景作为集成测试套件的价值远低于单一场景。您可能几乎已经编写了一系列单元测试。

确实，端到端编写每个场景可能会导致一些重复。正如您在单元测试中比在常规代码中更能容忍重复一样，在 Gherkin 场景中比在单元测试中更能容忍重复。不要在可理解性上妥协。分解场景并`Given`仅在关键点使用 s（例如在上面的示例中创建产品），并且知道您正在稀释场景的集成测试能力。

另外，请记住，验收测试应该只是自动化测试套件的一部分。只编写足够的验收测试来覆盖关键场景，并用单元测试覆盖细节。通常情况下，验收测试重复的解决方案是用单元测试替换一个。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-12T14:55:15.340

我也会说不。

在我的另一篇文章中，丹尼尔 F 发现了这篇精彩的文章。以下是相关部分：

> Given-When-Then 步骤必须按顺序出现，不能重复。Given 不能跟在 When 或 Then 后面，When 不能跟在 Then 后面。原因很简单：任何一个When-Then 对都表示一个单独的行为。这很容易看出，在上面的测试中，实际上涵盖了两种行为：(1) 从搜索栏搜索，以及 (2) 执行图像搜索。在 Gherkin 中，一种场景涵盖一种行为。因此，应该有两种情况而不是一种。任何时候您想编写多个When-Then 对时，请改为编写单独的场景。（注意：一些 BDD 框架可能允许无序的步骤，但它仍然是反行为的。）

[https://automationpanda.com/2017/01/30/bdd-101-writing-good-gherkin/](https://automationpanda.com/2017/01/30/bdd-101-writing-good-gherkin/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-18T15:42:16.803

我会说不。

当测试失败时，它应该告诉您系统中的哪个位置发生了故障。像您的示例中这样的长时间测试往往很脆弱，需要更高级别的维护。

您需要定义您的测试正在测试什么（这应该是一回事）阅读您的测试

*   它可能是一个表单验证测试。
*   这可能是一个注册测试。
*   它可能是用户仪表板测试。

需要花费大量时间来调查故障在哪里以及与代码中的哪个位置相关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-27T12:58:53.180

我也会说不。

Given 是设置的先决条件。When 是一个动作（可以是什么都不做） Then 形式断言。

如果您需要更多操作，请分解测试。

一旦第一个 Then 无法定位问题，这将变得更加有用。

# html - 向 HTML 页面添加比例

> ID：12060012
> 
> 赞同：0
> 
> 时间：2012-08-21T17:28:28.497
> 
> 标签：html

这是我的尝试。每列的宽度不一样，我该如何解决？

您对如何使用 div 而不是 table 进行缩放有更好的建议吗？

```
<TABLE BORDER=1 CELLSPACING=2 CELLPADDING=10 border-style=outset>
    <TR>
    <TD BGCOLOR="#ffffff">
    <TD BGCOLOR="#ffcccc">
    <TD BGCOLOR="#ff8888">
    <TD BGCOLOR="#ff4444">
    <TD BGCOLOR="#ff0000">
    </TR>
    <TR>
    <TD id="a">20</TD>
    <TD id="b">40</TD>
    <TD id="c">60</TD>
    <TD id="d">80</TD>
    <TD id="e">100</td>
    </TR>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:41:07.367

这个小提琴将向您展示一种创建缩放区域的方法：http: [//jsfiddle.net/aL2ME/](http://jsfiddle.net/aL2ME/)

您只需将嵌套 div 的宽度属性调整为适当的百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:32:11.677

您应该使用使用而不是实际值`<div>`定义其位置和大小的a。`%s`这将允许您的页面随着窗口大小的变化而缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:09:00.997

这个问题有点含糊，我不确定你所说的比例是什么意思，但是根据@Keith 的评论，你可以像这样做一个颜色渐变。在这里查看一个工作示例[（jsfiddle）](http://jsfiddle.net/yUsZC/4/)

HTML：

```
<div id="scale">
    <div>20</div>
    <div>40</div>
    <div>60</div>
    <div>80</div>
    <div>100</div>
</div>​ 
```

CSS：

```
#scale div {
    float: left;
    width: 50px;
    padding: 10px;
    border: 1px #333 solid;
} 
```

JavaScript (jQuery):

```
$(document).ready(function() {

    var scales = $('#scale').children('div');
    var length = scales.length;
    console.log(scales);
    // loop through all the scales
    scales.each(function(idx, scale) {
        var red = 255;
        var green = 255 - (idx / length) * 255;
        var blue = 255 - (idx / length) * 255;
        var rgb = 'rgb(' + red + ',' + green + ',' + blue + ')'
        $(scale).css('background-color', rgb);
    });

});​ 
```

调整 JavaScript 和 CSS 中的颜色以适应您的网站需求 - 到目前为止，它是红色的，就像您在问题中所说的那样。

* * *

编辑：如果这不会发生太大变化或者本质上不是动态的，那么使用静态解决方案可能会更好。您可以[在此处（jsfiddle）](http://jsfiddle.net/yUsZC/5/)查看我使用 CSS 并对每个“百分比”的颜色进行硬编码。

# vb.net - VS 2005 中引用的 VB6 Com dll(XYZ.dll) 重命名为 interop.XYZ.dll

> ID：12060017
> 
> 赞同：0
> 
> 时间：2012-08-21T17:29:01.257
> 
> 标签：vb.net, dll, com, com-interop

也许是一个简单的问题。该项目有一个 VB-COM Dll，在参考文献中被重命名为 interop.dllname.dll。现在，如果我尝试删除并包含一个新的引用（对同一个 dll），它不会被重命名，而是按原样添加。

知道为什么没有发生重命名吗？

# ruby-on-rails - Rails 范围 lambda 不包括具有空值的字段

> ID：12060024
> 
> 赞同：1
> 
> 时间：2012-08-21T17:29:32.553
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, join, scope

我有一个范围，用于查找 call_status 已打开且 unit_id 为 nil 的呼叫记录。

```
scope :unassigned_calls, where(:call_status => "open", :unit_id => nil).order("id ASC") 
```

我最近设置了一个 has_many 关系，其中 unit_id 不再在调用模型上使用，而是在 call_unit 模型连接表上使用了一个名为 unit_ids 的字段。

如何将范围或 lambda 表示到它包含连接表中的 unit_ids 的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:58:35.900

我不相信 AREL 允许您调用外部联接。尝试写出 SQL

```
scope :unassigned_calls, joins("left outer join call_unit on call.id=call_unit.call_id").where("call_unit.unit_id is null").order("id ASC") 
```

我在这里假设连接表有一个 call_id 列，这可能不准确，但希望它能为您提供必要的框架

# javascript - 试图触发一堆包含不同数字的点击

> ID：12060026
> 
> 赞同：1
> 
> 时间：2012-08-21T17:29:38.603
> 
> 标签：javascript, onclick

我可以访问一个页面，其中包含一堆这样的链接：

```
<a href="#" onclick="navigate(___VIEW_RAID_2, {raid_inst_id:556816});return false;"> 
```

raid_inst_id: 后面的数字总是不同的，同一页面上会有多个数字不同的数字。我正在尝试组合一个 javascript 来抓取这些链接的页面，将它们放在一个数组中，然后循环单击它们。

理想情况下，导致点击之间暂停的警报会很有帮助。到目前为止，我什至试图收集这些数字并只是将它们呼应出来，更不用说操纵它们了，但我一直没有成功。

任何提示或帮助将不胜感激！

下面是我尝试组合的一个函数，只是为了看看我是否可以捕获一些 onclick 值以进行进一步处理，但是，这不会产生任何结果......

```
function closeraids(){
        x=document.getElementsByTagName('a');
        for(i=0;i<x.length;i++)
        {
        attnode=x.item(i).getAttributeNode('onclick');
        alert("OnClick events are: " + attnode);
        }
} 
```

* * *

哇 - 4 个月后，同样的问题仍然存在。我决定再次调查这个问题，只是为了在我的谷歌搜索中找到我自己发布的问题！有人对这里可以做什么有任何想法吗？我试图提供的功能将是我已经提供给用户的 Chrome 扩展程序的一部分。它结合了我在网络服务器上托管的 .js 文件和注入的 html 内容。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:35:31.990

在制作这个 jsfiddle 时玩得很开心：http: [//jsfiddle.net/Ralt/ttkGG/](http://jsfiddle.net/Ralt/ttkGG/)

主要是因为我继续使用几乎功能齐全的风格......但是很好。关于你的问题。

我`getAttribute('onclick')`用来把字符串放在那里。它显示如下：

```
"navigate(___VIEW_RAID_2, {raid_inst_id:553516});return false;" 
```

所以我只是构建了必要的正则表达式来匹配它，并在之后捕获数字`raid_inst_id`：

```
var re = /navigate\(___VIEW_RAID_2, {raid_inst_id:(\d+)}\);return false;/; 
```

它主要是通过转义括号并将`(\d+)`其放在要捕获数字的位置来重写字符串。（`\d+`匹配一个数字，`()`正在捕获匹配的字符串。）

使用`match()`，我可以简单地将捕获的字符串作为最后一个元素。所以，用旧的 IE 方式重写代码：

```
var links = document.getElementsByTagName('a'),
    re = /navigate\(___VIEW_RAID_2, {raid_inst_id:(\d+)}\);return false;/;

for (var i = 0, l = links.length; i < l; i++) {
    var attribute = links[i].getAttribute('onclick'),
        nb;

    if (nb = attribute.match(re)) {
        alert(nb.pop());
    }
} 
```

# jquery - jsMovie：不播放序列

> ID：12060028
> 
> 赞同：0
> 
> 时间：2012-08-21T17:29:47.340
> 
> 标签：jquery

我正在尝试使用 jsMovie 序列播放器运行测试，这是一个 jQuery 插件，可以播放 jpeg 序列来模拟动画。但是虽然我可以设置选项并记录它们并且我没有收到任何错误，但我也没有得到任何动画。这是我的代码：

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> </script>
<script src="js/jquery.jsmovie.1.4.3b.js"></script>

<script language="javascript">

$(document).ready(function() { 

    $('.movie').jsMovie({
        sequence : '26_01_010_####.jpg',
        folder : 'images/animation/26_01_010/',
        width: 480,
        height : 350,
        grid : {width:480, height:350, rows:1, columns:1},
        loader : {path: 'images/loader2.png', width: 50, height: 50, rows: 4, columns: 4},
        from : 1,
        to : 20,
        playOnLoad : false
    });

    console.log(_settings);

});
</script>

 </head>

<body>

    <div class="movie" style="width: 480px; height: 350px;"></div>

</body>
</html> 
```

这是我的日志输出：

```
clipQueue : []
folder :"images/animation/26_01_010/"
fps : 12
from : 1
grid : Object { width=480, height=350, rows=1, more...}
height : 350
images : ["26_01_010_0001.jpg", "26_01_010_0002.jpg","26_01_010_0003.jpg", 17 more...]
loadParallel : 1
loader : Object { path="images/loader2.png", width=50, height=50, more...}
playBackwards : false
playOnLoad  : false
repeat : true
sequence : "26_01_010_####.jpg"
showPreLoader : false
step : 1
to :20
verbose : true
width : 480 
```

我是否错误地定位了 div？插件页面上没有很多文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:52:57.867

您需要添加一个调用来实际播放电影，因为您的 playOnLoad 设置为假...

在您的控制台调用上方添加以下行。

```
$('.movie').jsMovie('play'); 
```

# python - Python 线程 - 我如何使用它同时运行多个任务？

> ID：12060029
> 
> 赞同：0
> 
> 时间：2012-08-21T17:29:51.483
> 
> 标签：python, python-multithreading

我是 Python 新手，我从 stackoverflow 社区获得了很大的帮助，以便将我的 shellscript 迁移到 python。但是我再次在如何实现线程方面苦苦挣扎，因为这个脚本在 ax 结果上运行，让它运行起来会更快，例如，脚本返回 120 个服务器来运行，我想一次运行 5 个并有一个队列。

我想在线程上运行的方法是在以下条件之后：（我用注释标记）

```
if checkServer.checkit(host,port): 
```

Bellow，是 extract_adapter.py 文件内容：

```
import psycopg2
import urllib2
import base64
import sys
import re
import lxml.html as LH
import checkServer

def extractAdapter(env,family,iserver,login,password,prefix,proxyUser,proxyPass,proxyHost,service):

    print "Starting on \t"+iserver

    proxy_auth = "http://"+proxyUser+":"+proxyPass+"@"+proxyHost
    proxy_handler = urllib2.ProxyHandler({"http": proxy_auth})

    opener = urllib2.build_opener(proxy_handler)
    urllib2.install_opener(opener)
    request = urllib2.Request("http://"+iserver+"/invoke/listRegisteredAdapters")
    base64string = base64.encodestring('%s:%s' % (login, password)).replace('\n', '')
    request.add_header("Authorization", "Basic %s" % base64string)
    response = urllib2.urlopen(request)
    html = response.read()

    doc = LH.fromstring(html)
    tds = (td.text_content() for td in doc.xpath("//td[not(*)]"))

    for adapterType, adapterDescription in zip(*[tds]*2):

        proxy_auth = "http://"+proxyUser+":"+proxyPass+"@"+proxyHost
        proxy_handler = urllib2.ProxyHandler({"http": proxy_auth})
        opener = urllib2.build_opener(proxy_handler)
        opener = urllib2.build_opener()
        urllib2.install_opener(opener)
        request = urllib2.Request("http://"+iserver+service+""+adapterType)
        base64string = base64.encodestring('%s:%s' % (login, password)).replace('\n', '')
        request.add_header("Authorization", "Basic %s" % base64string)
        response = urllib2.urlopen(request)
        html2 = response.read()

        doc = LH.fromstring(html2)
        tds = (td.text_content() for td in doc.xpath("//td[not(*)]"))

        for connectionAlias,packageName,connectionFactoryType,mcfDisplayName,connectionState,hasError in zip(*[tds]*6):

            cur.execute("INSERT INTO wip.info_adapter (env,family,iserver,prefix,package,adapter_type,connection_name,status) values (%s,%s,%s,%s,%s,%s,%s,%s)",
            (env,family,iserver,prefix,packageName,adapterType,connectionAlias,connectionState))
            con.commit()

################################################################################

def extract(env):
    global cur,con
    con = None
    try:

        con = psycopg2.connect(database='xx', user='xx',password='xxx',host='localhost')
        cur = con.cursor()
        qry=" random non important query"

        cur.execute(qry)
        data = cur.fetchall()

        for result in data:

            family   = result[0]
            prefix   = result[1]
            iserver  = result[2]
            version  = result[3]
            login    = result[4]
            password = result[5]
            service  = result[6]
            proxyHost = result[7]
            proxyUser = result[8]
            proxyPass = result[9]

            parts=iserver.split(":")
            host=parts[0]
            port=parts[1]

            if checkServer.checkit(host,port):
            ##SUPOSE TO AS START THREAD 

                if version == '7' or version == '8':

                    extractAdapter(env,family,iserver,login,password,prefix,proxyUser,proxyPass,proxyHost,service)

                elif version == '60' or version == '61':
                    print "Version 6.0 and 6.1 not supported yet"
            else:
                print iserver+"is offline"
            #TO END  THREAD

    except psycopg2.DatabaseError, e:
        print 'Error %s' % e
        sys.exit(1)

    finally:

        if con:
            con.close() 
```

这就是我在 runme.py 上调用方法提取的方式

```
import extract_adapter_thread
from datetime import datetime

startTime = datetime.now()
print"------------------------------"
extract_adapter_thread.extract('TEST')
print"------------------------------"
print(datetime.now()-startTime) 
```

顺便说一句，代码工作得很好。没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:56:04.097

[由于Global Interpreter Lock](http://wiki.python.org/moin/GlobalInterpreterLock)，线程将在 Python 中严重阻塞非 IO 绑定问题。因此，您可能最好进行[多处理](http://docs.python.org/library/multiprocessing.html)——它带有一个 Queue 类（有关使用 mp 队列的示例，请参见此[SO Link ）。](https://stackoverflow.com/questions/5506227/python-multiprocessing-queue)

这应该让您可以同时处理许多单独的进程（例如一次批处理 120 个作业中的 5 个作业）。请注意，进程的开销高于线程的开销，因此对于小型任务，您将为使用多处理而不是线程付出代价。不过，您的任务听起来足够大，足以保证这样的成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:09:52.103

我真的不知道这是否会有很大帮助，但这是我在 HD 中拥有的一段代码，嗯……就这样。查看并行或顺序 ping 一些 ip 的区别是一件基本的事情（尽管需要 linux）。它非常简单，不是您特定问题的直接答案，但是……既然您说您是*Python 新手*，它可能会给您一些想法。

```
#!/usr/bin/env python

import datetime
import subprocess
import threading

ipsToPing = [
    "google.com",
    "stackoverflow.com",
    "yahoo.com",
    "terra.es", 
]

def nonThreadedPinger():
    start = datetime.datetime.now()
    for ipToPing in ipsToPing:
        print "Not-threaded ping to %s" % ipToPing
        subprocess.call(["/bin/ping", "-c", "3", "-W", "1.0", ipToPing], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    end = datetime.datetime.now()
    print ("Non threaded ping of %s ips took: %s." % (len(ipsToPing), end-start))

def _threadedPingerAux(ipToPing):
    print "Threaded ping to %s" % ipToPing
    subprocess.call(["/bin/ping", "-c", "3", "-W", "1.0", ipToPing], stdout=subprocess.PIPE, stderr=subprocess.PIPE)

def threadedPinger():
    retval = dict.fromkeys(ipsToPing, -1)
    threads = list()
    start = datetime.datetime.now()
    for ipToPing in ipsToPing:
        thread = threading.Thread(target=_threadedPingerAux, args=[ipToPing])
        thread.start()
        threads.append(thread)
    for thread in threads:
        thread.join()
    end = datetime.datetime.now()
    print ("Treaded ping of %s ips took: %s" % (len(ipsToPing), end-start))

if __name__ == "__main__":
    threadedPinger()
    nonThreadedPinger() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T17:46:16.003

如果一切都是线程安全的，您可以使用该`threading`模块：

```
import threading
starttime=datetime.now()
print "-"*10
code=threading.thread(target=extract_adapter_thread.extract,args=['TEST'])
code.daemon=True
code.start()
print "-"*10
print(datetime.now()-starttime) 
```

# actionscript-3 - 我如何编译这个 Flash 教程的代码？

> ID：12060031
> 
> 赞同：0
> 
> 时间：2012-08-21T17:29:57.807
> 
> 标签：actionscript-3, flash

我开始阅读本教程：[http ://active.tutsplus.com/tutorials/actionscript/creating-a-reusable-flash-uploader-with-actionscript-3-0-and-php/](http://active.tutsplus.com/tutorials/actionscript/creating-a-reusable-flash-uploader-with-actionscript-3-0-and-php/)

我正在使用 FlashDevelop，并将完整代码粘贴到 ActionScript 文件中。我收到的错误是这样的：

```
C:\Users\tempus\Documents\uploaderas\Uploader.as(30): col: 4 Error: Access of undefined property select_btn.
select_btn.addEventListener( MouseEvent.CLICK, browse );
^
C:\Users\tempus\Documents\uploaderas\Uploader.as(31): col: 4 Error: Access of undefined property progress_mc.
progress_mc.bar.scaleX = 0;

... 
```

我知道出现错误是因为尚未声明对象（并且它们似乎是从某处实例化的），但我不明白我应该如何/包含什么来声明它们。你能指出我的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:33:15.413

这是因为按钮是在 Flash IDE 中创建的（因为本教程是使用 Flash IDE 编译的）。由于按钮在代码方面不存在，因此您会收到该错误。

您可以通过代码自己创建元素，或者使用 Flash IDE 并导出必要 UI 元素的 swc/swf 并将其包含在您的 flashDevelop 项目中。我假设你会想做后者 -

在 Flash IDE 中，打开 .fla，打开库面板，找到进度资源，右键单击它并调出属性。选中“Export For ActionScript”选项，然后在“Class”字段中为其指定一个唯一名称，例如“SelectBtn”。对“progress”资产做同样的事情（只有一个不同的类名，比如“ProgressBar”）。转到 Flash 发布设置，然后在 Flash 选项卡上选择“导出 swc”。发布文件并将发布的 swc 放在您的 flash Develop 项目文件夹中（通常是项目的 lib 文件夹）。

在 Flash Develop 中，右键单击您的 swc 并选择“添加到库”。（您可能需要再次右键单击并转到选项并选择完全包含选项）。现在您可以访问您在 Flash 中设置的那些类。然后在您的代码中，声明并初始化显示资产：

```
public var select_btn:SelectBtn = new SelectBtn();
public var progress_mc:ProgressBar = new ProgressBar(); 
```

您还需要执行该 textField 。不过，在您的代码中执行此操作将是最简单的。

```
public var label_txt:TextField = new TextField(); 
```

请记住，您需要以这种方式在所有三个元素上手动定位和使用 addChild。如果您想保持在 Flash 中的定位，只需选择舞台上的所有元素并按 F8 将它们转换为 MovieClip。然后在库设置链接中与其他链接相同，并给它一个类似“DisplayAssets”的类名并导出一个新的 swc。然后您的代码将如下所示：

```
public var select_btn:Sprite;
public var progress_mc:Sprite;

public function Uploader(){
    var displayAssets:DisplayAssets = new DisplayAssets();
    addChild(displayAssets);

    select_btn = displayAssets.select_btn;
    progress_mc = displayAssets.progress_mc;

    //the rest of the code
} 
```

# python - 将值传递给 ftp.retrbinary 回调

> ID：12060033
> 
> 赞同：7
> 
> 时间：2012-08-21T17:30:01.333
> 
> 标签：python, ftp, ftplib

我正在编写一个使用 FTPLib 来获取文件的模块。我想找到一种将值（除了块之外）传递给回调的方法。本质上，我的回调是

```
 def handleDownload(block, fileToWrite):
    fileToWrite.write(block) 
```

我需要打电话

```
ftp.retrbinary('RETR somefile', handleDownload) 
```

并让它传递一个文件句柄。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T17:54:59.870

[您可以使用lambda](http://docs.python.org/reference/expressions.html#lambda)关闭`fileToWrite`变量：

```
fileToWrite = open("somefile", "wb")
ftp.retrbinary("RETR somefile", lambda block: handleDownload(block, fileToWrite)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-17T12:48:27.553

这段代码对我有用。

```
class File:

    cleared = False

    def __init__(self, filepath):
        self.filepath = filepath

    def write(self,block): 
        if not File.cleared:
            with open(f'{self.filepath}', 'wb') as f:
                File.cleared = True
                with open(f'{self.filepath}', 'ab') as f:
                f.write(block)
        else:
             with open(f'{self.filepath}', 'ab') as f:
                 f.write(block)

ftp.retrbinary("RETR somefile", File(filepath).write) 
```

# django - 为什么 Django 1.4 每站点缓存不能与 CACHE_MIDDLEWARE_ANONYMOUS_ONLY 一起正常工作？

> ID：12060036
> 
> 赞同：2
> 
> 时间：2012-08-21T17:30:10.830
> 
> 标签：django

我正在开发一个 Django 1.4 项目并使用每个站点缓存编写一个简单的应用程序，如下所述：

[https://docs.djangoproject.com/en/dev/topics/cache/#the-per-site-cache](https://docs.djangoproject.com/en/dev/topics/cache/#the-per-site-cache)

我已经正确设置了本地 Memcached 服务器并确认页面正在被缓存。

然后我设置 CACHE_MIDDLEWARE_ANONYMOUS_ONLY = True 因为我不想为经过身份验证的用户缓存页面。

我正在使用一个简单的视图进行测试，该视图返回一个带有 render_to_response 和 RequestContext 的模板，以便能够从模板访问用户信息，并且到目前为止缓存工作良好，这意味着它只为匿名用户缓存页面。

这是我的问题。我使用不访问用户信息的不同模板创建了另一个视图，并注意到即使用户已通过身份验证，该页面也正在被缓存。在测试了很多东西之后，我发现如果模板没有从用户上下文变量中打印一些东西，那么经过身份验证的用户会获得一个缓存页面。测试非常简单：在模板上打印用户，页面不会为经过身份验证的用户缓存，删除模板上的用户，在经过身份验证时刷新页面并检查 HTTP 标头，你会注意到你得到了一个缓存页面。您应该清除更改之间的缓存以更清楚地查看问题。

我进行了更多测试，发现我可以摆脱模板中的用户并在视图上打印 request.user（打印到开发服务器控制台），并且还解决了向经过身份验证的页面显示缓存页面的问题用户，但这是一个丑陋的黑客。

这里报告了一个类似的问题，但从未得到答案：

[https://groups.google.com/d/topic/django-users/FyWmz9csy5g/discussion](https://groups.google.com/d/topic/django-users/FyWmz9csy5g/discussion)

我可能可以编写一个条件装饰器来检查是否 user.is_authenticated() 并基于此使用 @never_cache 在我的视图中，但这似乎违背了使用每个站点缓存的目的，不是吗？

```
"""
A decorator to bypass per-site cache if the user is authenticated. Based on django.views.decorators.cache.never_cache.
See: http://stackoverflow.com/questions/12060036/why-django-1-4-per-site-cache-does-not-work-correctly-with-cache-middleware-anon
"""     

from django.utils.decorators import available_attrs
from django.utils.cache import add_never_cache_headers
from functools import wraps

def conditional_cache(view_func):
    """
    Checks the user and if it's authenticated pass it through never_cache.
    This version uses functools.wraps for the wrapper function.
    """ 
    @wraps(view_func, assigned=available_attrs(view_func))
    def _wrapped_view_func(request, *args, **kwargs):
        response = view_func(request, *args, **kwargs)
        if request.user.is_authenticated():
            add_never_cache_headers(response)
        return response
    return _wrapped_view_func 
```

任何避免需要额外装饰器的建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:21:02.597

好的，我刚刚确认我的“问题”是由 Django 延迟加载用户对象引起的。

为了确认这一点，我刚刚在我的视图中添加了这样的内容：

test_var = "一些文本" + request.user

我收到一条错误消息，告诉我无法将 str 连接到 SimpleLazyObject。此时延迟加载逻辑还没有真正的用户对象。

为了绕过延迟加载，从而为经过身份验证的用户返回一个非缓存视图，我只需要访问一些方法或属性来触发对 User 对象的实际查询。我最终得到了这个，我认为这是最简单的方法：

bypass_lazyload = request.user.is_authenticated()

不再需要我的 conditional_cache 装饰器，尽管这是一个有趣的练习。

当我完成对视图的处理时，我可能不需要这样做，因为无论如何我都会访问我的模板上的一些用户方法和属性，但很高兴知道发生了什么。

问候。

# sql - Crystal Reports：记录选择混乱

> ID：12060038
> 
> 赞同：0
> 
> 时间：2012-08-21T17:30:16.117
> 
> 标签：sql, parameters, crystal-reports, record

我之前得到了一些非常好的帮助，我很感激。我还有另一个唱片选择混乱。

1.  我有一个参数需要设置为结束日期。

2.  我需要从名为 state_change 的表中提取结束日期之前的最新状态。

3.  我需要从报告中排除在该时间段内未处于所需状态的任何记录。

state 当前设置为 state_change.new_state

```
( {@grouping} = "Orders" and rec_date < {?endDate} and {@state} in [0,2,5] )

OR

( {@grouping} = "Stock" and rec_date < {?endDate} and {@state} in [1,2,3,5,7] ) 
```

如果我可以运行 SQL 查询来提取这些信息，它可能会起作用，但我不知道该怎么做。

本质上，我需要 @state 是：

```
Select max(new_state)  
From state_change
where change_time < {?endDate} 
```

但在每个项目级别。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:06:30.853

您可能需要使用带有参数的命令对象作为结束日期，或者创建参数化存储过程。命令对象将允许您输入所需的所有 sql，例如在结束日期之前将结果与 max newState 值连接起来：

```
select itemID, new_state, rec_date, max_newState from
(select itemID, new_state, rec_date from table) t inner join
(Select itemID, max(new_state) as max_newState
    From state_change
    where change_time < {?endDate}  
    group by itemID) mx on t.itemid = mx.itemID and t.new_state = mx.max_newState 
```

我不知道您的订单和库存分组是否在同一个表中，所以我不确定您需要如何通过正确的状态值来限制您的集合。

# ruby-on-rails - 设置从浏览器下载的文件的名称

> ID：12060039
> 
> 赞同：2
> 
> 时间：2012-08-21T17:30:19.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, http-headers, httpresponse, content-disposition

**免责声明**我知道 Content-Disposition 标头要发送回客户端以设置下载的文件名-但是我的问题比这要复杂一些

我有一个应用程序（使用 rails 3.1.3 的 RubyOnRails），它本质上是一个文档搜索/查看应用程序（搜索文档，然后在浏览器中呈现它们）。这是使用 iframe 完成的。

```
<iframe src="<%= @frameURL %>" width="100%" height="100%"> 
```

`@frameURL`是`plugin`对我们 Documents 控制器函数的调用。插件函数对我们的后端 API 进行 RESTful 调用以检索引用的文档，然后将文档内容发送回浏览器以在 iframe 中呈现。

这对于 JPEG、PDF、TXT 等文档非常有效。但是，当浏览器不知道如何处理内容类型时（如 word 文档 - 我们运行 Mac OS-X） - 然后浏览器下载返回的文件如`plugin.doc` <- 注意这是没有设置 Content-Disposition 标头。

由于我们希望在需要下载文件时适当地命名文件，因此我们设置了 Content-Disposition 标头：

```
response.headers['Content-Disposition'] = "attachment; filename.extension" 
```

现在文件被下载为`filename.doc`- 但是，使用此标头集，即使是浏览器可以在内部呈现的 JPEG 等文件也会被下载。

**问题：**

1.  `plugin.extension`当我们不设置 Content-Disposition 标头时，有谁知道 rails 或浏览器在哪里获取名称？

2.  有没有办法设置 Content-Disposition 但只有在浏览器无法呈现文档时才应用它 - 所以默认应该是浏览器处理它可以处理的一切，作为后备，浏览器使用 Content-Disposition 内容来命名下载的文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:19:13.977

1.  如果您正在调用诸如“send_file”之类的 Rails 函数，则搜索您的 Rails 版本的源代码以找到该函数的源代码并查看它设置的标头。您必须将调用堆栈向下跟踪几级，但您应该能够找出它是如何设置标头的；我以前做过。至于浏览器，我认为如果它在 Content-Disposition 标头中找不到文件名，它将或多或少地使用 URL 的最后一部分作为文件名。
2.  尝试在标题中使用“内联”而不是“附件”。

# git - Github + Mediatemple 还是 Beanstalk？我应该如何使用 Github？

> ID：12060052
> 
> 赞同：1
> 
> 时间：2012-08-21T17:31:44.940
> 
> 标签：git, deployment, github, workflow

我一直在做很多关于如何设置 Git 并提出一个好的部署策略的研究。（作为背景，我以前一直在 GoDaddy 和 FTP 上。呸。）

几位成功的开发人员告诉我，我的 Github 帐户可能是一份非常强大的开发人员简历，我应该把自己的网站放在那里，并为开源项目做出贡献。所以我希望我的某些回购可以在那里使用。

我为我的设置选择的选项是：

A) 使用 Beanstalk 来托管我客户的网站并存储我所有的存储库。不知何故，还将某些 repos 推送到 Github，并将其仅用于我的网站、开源内容等（不知道如何做那部分）

B) 使用 Github 存储私有和公共存储库，并托管在像 MediaTemple 这样允许 SSH 访问和 Git 的公司（与 GoDaddy 不同）。

似乎 Beanstalk 方法最简单，并且具有非常好的文档。以这种方式做事有什么缺点吗？Github 应该如何融入工作流程？有人同时使用这两个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:49:32.880

我正在自己探索这些选项并寻找新的工作流程。我还在想办法。

我在 Media Temple 有一个 GS 帐户，我喜欢它的隐私。[MT 知识库有一篇](http://kb.mediatemple.net/questions/1594/Using+Git#gs)关于如何设置它的好文章。您最终会得到一个可以用作 Git 存储库的子域。我猜想通过终端或 FTP 部署是您必须自己完成的事情。也许 Git-Tower 有部署功能。我通过观看 CSS Tricks 上的视频了解到 Beanstalk 作为部署功能并且是私有的，GitHub 作为免费服务是公共/社交的，但您可以付费并获得私有设置。

看看这些视频（在我看到 Chris 也打过他的路后，我并没有感到那么无知）

[#101：让我们一起在 GitHub 上吸吮](http://css-tricks.com/video-screencasts/101-lets-suck-at-github-together/)

[#109：离开 FTP 并使用 Beanstalk GIT 进入 Git 部署](http://css-tricks.com/video-screencasts/109-getting-off-ftp-and-onto-git-deployment-with-beanstalk/)

这是我记得的一些内容（其中一些您已经知道，正如您在问题中详述的那样）。GitHub：社交、公共、协作、免费（无部署） Beanstalk：私有、可共享协作、付费（具有部署选项） Media Temple：私有，如果您已经托管，则付费 - 非常适合子域存储库。

我不像以前那么害怕终端了，我一直在使用 Cornerstone/SVN 作为我当前的本地开发版本工作流程，但[Git-Tower](http://www.git-tower.com/)看起来也很漂亮，有点像 Cornerstone。我不确定 Tower 是否有部署选项。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T17:40:52.470

Elastic Beanstalk 是一个 PaaS 框架，用于在 AWS 上构建持久的、自动扩展的应用程序。对于您提出的使用场景，这完全是错误的选择。这将是不必要的复杂和昂贵。你最好使用 VPS（甚至是共享主机帐户）。

# python - 执行语句python

> ID：12060055
> 
> 赞同：2
> 
> 时间：2012-08-21T17:31:56.790
> 
> 标签：python

如何在 Python 中动态执行语句？

例如：假设值 x 包含以下表达式 (a+b)/2，

```
a = 1
b = 3
x = (a+b)/2 
```

x 的值将来自表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:37:26.170

可能你想要`eval`

```
#!/usr/bin/env python

a = 1
b = 3
x = "(a+b)/2"
print eval(x) 
```

但这通常被认为是一种[不好的做法](https://stackoverflow.com/questions/1832940/is-using-eval-in-python-a-bad-practice)（单击[此处](http://me.veekun.com/blog/2012/03/24/on-principle/)以获得更详细和更有趣的解释）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:34:45.277

你可以做：

```
a = 1
b = 3
x = '(a+b)/2'

print eval(x) 
```

请注意，由于需要字符串或代码对象，因此将值`x`括在引号中。`eval`

此外，也许阅读[本文](http://lybniz2.sourceforge.net/safeeval.html)以确保您安全地使用它（因为这通常是一个问题，我不会假装是它的缺陷专家:)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T17:35:21.533

尽管 python 同时具有“exec()”和“eval()”，但我相信您希望在这种情况下使用后者：

```
>>> a = 1
>>> b = 3
>>> x = "(a + b)/2"
>>> eval(x)
2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T17:37:07.587

您可以使用 eval，如

```
eval(x) 
```

其实你可以使用

```
x=eval('(a+b)/2') 
```

获取结果（在这种情况下，eval 将返回计算结果）。

# iphone - 使用 GDataXML 解析包含的 XML 文件

> ID：12060056
> 
> 赞同：0
> 
> 时间：2012-08-21T17:32:01.157
> 
> 标签：iphone, xml, xcode, parsing, gdata

此 XML 将包含在应用程序中：

```
<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>

    <title>Directory</title>
    <description>Directory of Members</description>
    <language>en</language>
    <item>
        <LastName></LastName>
        <FirstName></FirstName>
        <Address></Address>
        <Phone></Phone>
        <Email></Email>
    </item>
    <item>
        <LastName></LastName>
        <FirstName></FirstName>
        <Address></Address>
        <Phone></Phone>
        <Email></Email>
    </item>
</channel>
</rss> 
```

我希望能够解析 XML 并将其存储到我之前使用其他 XML 完成的 RSSEntry 类中。问题是我使用过的唯一其他 XML 位于在线，并且我使用 ASIHttpRequest 类作为方法的一部分，并且不确定如何更改代码以使其适合。我目前使用此代码：

```
- (void)viewDidLoad {
[super viewDidLoad];   
self.allEntries = [NSMutableArray array];
self.queue = [[[NSOperationQueue alloc] init] autorelease];
self.feeds = [NSArray arrayWithObjects:@"http://316apps.com/LakesideNews/feed/",
              nil];   
NSLog(@"%@", self.feeds);

   [self refresh];    
}
- (void)refresh {

for (NSString *feed in _feeds) {
    NSURL *url = [NSURL URLWithString:feed];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setDelegate:self];
    [_queue addOperation:request];
}

}
- (void)parseRss:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

NSArray *channels = [rootElement elementsForName:@"channel"];
for (GDataXMLElement *channel in channels) {            

    NSString *blogTitle = [channel valueForChild:@"title"];                    

    NSArray *items = [channel elementsForName:@"item"];
    for (GDataXMLElement *item in items) {
        NSString *articleTitle = [item valueForChild:@"title"];
        NSString *articleUrl = [item valueForChild:@"guid"];            
        NSString *articleDateString = [item valueForChild:@"pubDate"];        
        NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC822];
        NSString *articleImage = [item valueForChild:@"content:encoded"];
        RSSEntry *entry = [[[RSSEntry alloc] initWithBlogTitle:blogTitle 
                                                  articleTitle:articleTitle 
                                                    articleUrl:articleUrl 
                                                   articleDate:articleDate
                                                  articleImage:articleImage] autorelease];

        [entries addObject:entry];
    }      
}

}
- (void)parseFeed:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

if ([rootElement.name compare:@"rss"] == NSOrderedSame) {
    [self parseRss:rootElement entries:entries];
} else if ([rootElement.name compare:@"feed"] == NSOrderedSame) {                       
    [self parseAtom:rootElement entries:entries];
} else {
    NSLog(@"Unsupported root element: %@", rootElement.name);
}    
}

- (void)requestFinished:(ASIHTTPRequest *)request {

[_queue addOperationWithBlock:^{

    NSError *error;
    GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:[request responseData] 
                                                           options:0 error:&error];
    if (doc == nil) { 
        NSLog(@"Failed to parse %@", request.url);
    } else {

        NSMutableArray *entries = [NSMutableArray array];
        [self parseFeed:doc.rootElement entries:entries];                

        [[NSOperationQueue mainQueue] addOperationWithBlock:^{

            for (RSSEntry *entry in entries) {

                int insertIdx = [_allEntries indexForInsertingObject:entry sortedUsingBlock:^(id a, id b) {
                    RSSEntry *entry1 = (RSSEntry *) a;
                    RSSEntry *entry2 = (RSSEntry *) b;
                    return [entry1.articleDate compare:entry2.articleDate];
                }];

                [_allEntries insertObject:entry atIndex:insertIdx];
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:insertIdx inSection:0]]
                                      withRowAnimation:UITableViewRowAnimationRight];

            }                            

        }];

    }        
}];

}

- (void)requestFailed:(ASIHTTPRequest *)request {
NSError *error = [request error];
NSLog(@"Error: %@", error);
[self refresh];
} 
```

我知道将标题的所有区域更改为姓氏等，我只是不知道如何让 GDataXML 开始解析嵌套的 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:50:13.663

Ray Wenderlich 有一个很棒的教程，涵盖了你在做什么。我会从那里开始。[这是链接](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)。

# xcode - 如何识别 Storyboard 中的 UITableView 行？

> ID：12060059
> 
> 赞同：0
> 
> 时间：2012-08-21T17:32:15.750
> 
> 标签：xcode, uitableview, storyboard, uistoryboard

我曾经能够使用 UITableViewCells，根据需要编辑它们，将它们链接到 .h 文件，然后我需要做的就是在代码中调用它们。但是现在，我将如何在故事板的表格中声明一个需要在代码中调用的单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T00:18:47.040

选择您感兴趣的单元格并显示属性检查器。有一个名为 Identifier 的字段。在此字段中放置一个独特的字符串，例如“CellSpecial”。

然后`cellForRowAtIndexPath:`像这样加载单元格：

```
UITableViewCell *pCell = [tableView dequeueReusableCellWithIdenitifier: @"CellSpecial"]; 
```

如果您是动态创建这些单元格（即，执行应用程序的单元格顺序与情节提要的顺序不同），那么您必须转到情节提要中的 TableView 并将 Content 属性设置为 Dynamic Prototypes（而不是 Static Content）。

# java - “”和“”有什么区别，我如何用字符来测试前者？

> ID：12060061
> 
> 赞同：3
> 
> 时间：2012-08-21T17:32:27.587
> 
> 标签：java, char, string

在 Java 中，“”（空引号）和“”（带有单个空格的引号）之间有什么区别，我如何根据 a 测试前者`char`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T17:33:44.050

`""`表示空字符串。`" "`不是空**的**，它包含一个空格字符。

您不能根据 a 测试前者`char`，因为没有字符：根据 a 测试它`String`：它`String`的长度为零，并`String.equals("")`返回`true`空字符串。

或者就`char` *数组*而言，空字符串对应`char`长度为零的数组，例如：

```
char noChars[] = new char[0];
String str = new String(noChars);
// now str is the empty String 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T17:36:27.947

`""`- 是一个空字符串，它的长度为零，尝试调用`length()`它的方法。

`" "`- 一个有 1 个空格的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T17:34:44.933

```
“” - Empty Sting - String with 0 length
“ ” - single space - String with 1 length 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T17:37:50.527

`""`和都是`" "`字符串对象，长度分别为 0 和 1。以下是它们以 char 原语表示的内容：

```
"" - empty char[] array
" " - char[] { ' ' } :- Char aray with single char entry 
```

最好`String.equals`在比较字符串的内容时使用。不过，这里只需要`length()`检查一下。

# sql - SQL加入查询与AND？

> ID：12060063
> 
> 赞同：1
> 
> 时间：2012-08-21T17:32:35.370
> 
> 标签：sql, relational-division

我有以下表格：

```
Option
-------
id - int
name - varchar

Product
---------
id - int
name -varchar

ProductOptions
------------------
id - int
product_id - int
option_id - int 
```

如果我有一个选项 id 列表，我如何检索所有具有我拥有的 id 列表的所有选项的产品？我知道 SQL“IN”将使用“OR”，我需要“AND”。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:44:43.033

如果您有 ID 列表，则基本上只有 2 个选项。
- 要么调用尽可能多的选择，
要么你必须使用 IN () 或 OR。

但是，建议使用 IN ，因为调用一个语句通常性能更高（此外，如果您对所有 id 列都有索引，则不需要进行表扫描）。

我会使用以下语句：

```
select Product.* from Product, Option, ProductOption where Option.id IN ( 1, 2, ... ) and option.id = ProductOption.option_id and Product.product_id = Product.id 
```

再说一句，为什么 ProductOptions 表中有 id 列？从我的角度来看，这没用，您应该从 product_id 和 option_id 列中获得复合主键（因为这对是唯一的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T17:40:13.670

如果 id 不重复，您可以检索您需要的选项的 id 并计算它们的数量。那么，你只要

```
SELECT product_id FROM ProductOptions
    WHERE option_id IN ( OPTIONS )
    GROUP BY product_id
    HAVING COUNT(product_id) = NEEDED; 
```

如果没有 GROUP BY，如果您有五个选项 ID，并且产品 27 有十五个选项，其中有五个选项，您将获得具有相同 product_id 的五行。GROUP BY 连接这些行。由于您想要所有选项，并且选项具有所有不同的 ID，因此询问“具有所有选项的行”等同于询问“具有与所需选项集大小一样多的选项的行”。

另外，您只在 ProductOptions 上运行大查询，这应该非常快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:40:24.537

处理此类查询的一种方法是使用 group by 和 having 子句。最好从列表中的必需选项列表开始：

```
with list as (
    select <optionname1> as optionname union all
    select <optionname2 union all . . .
   )
select ProductId
from list l left outer join
     Options o
     on l.optionname = o.name
     ProductOptions po join
     on po.option_id = o.option_id left outer join
group by ProductId
having count(distinct o.optionname) = count(distinct l.optionname) 
```

这保证了所有都在列表中。顺便说一句，我使用 SQL Server 语法来生成列表。

如果您有其他格式的列表，例如分隔字符串，还有其他选项。根据您使用的数据库，还有其他可能性。但是，上述想法应该适用于任何数据库，但有两个警告：

*   with 语句可能只是成为“list”所在的 FROM 子句中的子查询。
*   创建列表（常量表）的方法因数据库而异

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T17:40:48.523

Will this work?:

```
select p.id, p.name 
from Product as p inner join
 ProductOptions as po on p.id=po.product_id 
where po.option_id in (1,2,3,4) 
```

# ruby-on-rails - 我如何在关联上定义方法？

> ID：12060065
> 
> 赞同：2
> 
> 时间：2012-08-21T17:32:38.723
> 
> 标签：ruby-on-rails, ruby

**更新：**

我把这个放在我的`person`课堂上

```
 has_many :things, :dependent => :destroy do 
    def [](kind)
      where("kind = ?", kind.to_s)
    end
  end 
```

但是当我调用时`<Person Instance>.things[:table]`，我收到了这个错误：

```
undefined method `where' for #<Class:0x111dc3ba8> 
```

**原始问题：**

我有一个`person`，谁`has_many` `things`。我希望能够做类似的事情：

```
<Person Instance>.things[:table] 
```

这将被定义为

```
def things[](arg)
    self.things.find(:first, :conditions => ["kind = ?", arg.to_s])
end 
```

目前，该方法给了我这个错误：

```
syntax error, unexpected '[', expecting '\n' or ';' 
```

那么，我该如何正确定义事物[]？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T17:37:04.670

您正在寻找的东西称为 Rails 中的关联扩展。 [在这里阅读](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Association+extensions)

您的实现可能类似于：

```
has_many :things do
  def [](kind)
    where(:kind => kind)
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T17:41:12.453

我认为`[]`方法名称中不允许使用...您可以在方法名称中跳过它们，但是如果您正确设置了关联，您的关联方法将被覆盖/替换。

我会做这样的事情：

```
# in your Person model
def things_of_kind(kind)
  self.things.find(:first, :conditions => ["kind = ?", arg.to_s]
end

# then you could call
<PersonInstance>.things_of_kind(:table) 
```

Alternatively there are [association extensions](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Association+extensions) which use this technique but in the proper place. And there are also [scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes), which can be helpful.

# java - 使用图形界面（按钮）在 java 中停止循环

> ID：12060066
> 
> 赞同：0
> 
> 时间：2012-08-21T17:32:45.073
> 
> 标签：java, button, loops, graphical-interaction

我用java和2个按钮创建了一个图形界面。

**我的目标 ：**

1）当我点击第一个按钮时，有一个循环处理不同的任务（按钮“开始”）。每个循环之间有 10 秒的停止

2）当我点击第二个按钮时，循环最后一次*立即处理，但随后停止。*（我也想弹出一个窗口显示它已停止，但这不是主要问题，我想我可以做到。）

我尝试了以下代码，但首先我认为它们是解决问题的更简单方法。另外我可以编译但它不起作用，循环没有停止，窗口崩溃：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

    globalStop="Run";

    while (globalStop.equals("Run")) {

        System.out.println("GO");
        // Other stuff

        // For the break ? 
        try {
            Thread.sleep(10000);
          } catch (InterruptedException ex) {
               Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);
         }
    }
        System.out.println("done");
    }

}                                        

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    globalStop = "Stop";
    System.out.println("Bouton2");
} 
```

* * *

我希望我足够清楚，如果不是这样，请告诉我，我会改写。预先感谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:37:42.457

我想知道创建一个美国类型的交通信号 GUI 需要多长时间。花了75分钟。我能够快速创建 GUI，因为很多 Swing 都是样板文件。创建一个 GUI 后，您可以为下一个 GUI 复制一些类。

这是交通信号 GUI 的图像。

![交通信号图形用户界面](../Images/06703ef5f55c850a9d22cac7630f8dc1.png)

当您按下开始按钮时，交通信号灯将从绿色循环到黄色再到红色。交通信号灯将永远循环，直到您按下停止按钮。

当您按下停止按钮时，交通信号灯将变为红色。它将永远保持红色，直到您按下开始按钮。

当您在交通信号灯循环时按下开始按钮时，从绿色到黄色到红色的循环重新开始。

基本上，以下步骤向您展示了如何创建任何 Swing GUI。我没有按此顺序创建代码，但按逻辑顺序解释代码是有意义的。所以，让我们深入研究代码。

这是 GUI 的模型类。每个 GUI 都需要有自己的模型，与应用程序的模型分开。对于这个 GUI，模型很简单。

```
package com.ggl.traffic.signal.model;

import java.awt.Dimension;

public class TrafficSignalModel {

    public static final int RED_LIGHT_TIME = 15;
    public static final int YELLOW_LIGHT_TIME = 5;
    public static final int GREEN_LIGHT_TIME = 10;

    public static final Dimension LIGHT_SIZE = new Dimension(32, 32);
} 
```

我们在模型中设置信号灯时间，以及红绿灯的大小。

对于更复杂的 GUI，我们将跟踪模型中的字段值。

接下来，我们有交通信号 GUI 的主类。

```
package com.ggl.traffic.signal;

import javax.swing.SwingUtilities;

import com.ggl.traffic.signal.view.TrafficSignalFrame;

public class TrafficSignal implements Runnable {

    @Override
    public void run() {
        new TrafficSignalFrame();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new TrafficSignal());
    }

} 
```

此类确保交通信号 GUI 在 Swing 事件线程上。这就是这堂课所做的一切。您可以看到如何复制此类以启动任何 GUI。

接下来，我们有 GUI 的 Frame 类。

```
package com.ggl.traffic.signal.view;

import java.awt.FlowLayout;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JFrame;

public class TrafficSignalFrame {

    protected ButtonPanel bPanel;

    protected JFrame frame;

    protected TrafficSignalPanel tsPanel;

    public TrafficSignalFrame() {
        createPartControl();
    }

    protected void createPartControl() {
        tsPanel = new TrafficSignalPanel();
        bPanel = new ButtonPanel();

        bPanel.setTrafficSignalPanel(tsPanel);

        frame = new JFrame();
        frame.setTitle("Traffic Signal");
        frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        frame.addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent event) {
                exitProcedure();
            }
        });

        frame.setLayout(new FlowLayout());
        frame.add(bPanel.getPanel());
        frame.add(tsPanel.getPanel());
        frame.pack();
//      frame.setBounds(100, 100, 400, 200);
        frame.setVisible(true);
    }

    public void exitProcedure() {
        frame.dispose();
        System.exit(0);
    }

    public JFrame getFrame() {
        return frame;
    }

} 
```

这个类是样板文件，除了构成 GUI 的特定 JPanel。如果您的 JFrame 有一个 JMenu，那么这就是将您的 JMenu 附加到您的 JFrame 的地方。

请注意，我没有扩展 JFrame 来创建此类。唯一一次扩展 Swing 组件是在重写一个或多个组件的方法时。如果我需要实际的 JFrame，我调用 getFrame() 方法。使用 Swing 组件而不是扩展 Swing 组件使我的方法与 Swing 方法分开。

接下来，我们来看看交通信号灯面板。该面板构成交通信号灯中的 3 个灯之一。

```
package com.ggl.traffic.signal.view;

import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JPanel;

public class TrafficSignalLightPanel extends JPanel {

    private static final long serialVersionUID = 1L;

    protected boolean lightOn;

    protected Color lightColor;
    protected Color darkColor;

    public TrafficSignalLightPanel(Color lightColor) {
        this.lightColor = lightColor;
        this.darkColor = Color.WHITE;
        this.lightOn = false;
    }

    public void setLightOn(boolean lightOn) {
        this.lightOn = lightOn;
        this.repaint();
    }

    @Override
    public void paintComponent(Graphics g) {
        if (lightOn) {
            g.setColor(lightColor);
        } else {
            g.setColor(darkColor);
        }
        g.fillRect(0, 0, getWidth(), getHeight());
    }

} 
```

这个类扩展了 JPanel，因为我们想要重写paintComponent 方法。这是一个简单的类。它所做的只是将面板涂上颜色或白色。

接下来，我们将看看交通信号面板。此面板创建 3 个灯面板并将它们排列成垂直行。

```
package com.ggl.traffic.signal.view;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;

import javax.swing.BorderFactory;
import javax.swing.JPanel;
import javax.swing.border.Border;

import com.ggl.traffic.signal.model.TrafficSignalModel;

public class TrafficSignalPanel {

    protected JPanel panel;

    protected TrafficSignalLightPanel redLight;
    protected TrafficSignalLightPanel yellowLight;
    protected TrafficSignalLightPanel greenLight;

    public TrafficSignalPanel() {
        createPartControl();
    }

    protected void createPartControl() {
        Border border = BorderFactory.createLineBorder(Color.BLACK, 4);

        redLight = new TrafficSignalLightPanel(Color.RED);
        redLight.setBorder(border);
        redLight.setPreferredSize(TrafficSignalModel.LIGHT_SIZE);

        yellowLight = new TrafficSignalLightPanel(Color.YELLOW);
        yellowLight.setBorder(border);
        yellowLight.setPreferredSize(TrafficSignalModel.LIGHT_SIZE);

        greenLight = new TrafficSignalLightPanel(Color.GREEN);
        greenLight.setBorder(border);
        greenLight.setPreferredSize(TrafficSignalModel.LIGHT_SIZE);

        panel = new JPanel();
        panel.setLayout(new FlowLayout());
        panel.setPreferredSize(
                new Dimension(TrafficSignalModel.LIGHT_SIZE.width + 10, 
                        TrafficSignalModel.LIGHT_SIZE.height * 3 + 25));

        panel.add(redLight);
        panel.add(yellowLight);
        panel.add(greenLight);
    }

    public JPanel getPanel() {
        return panel;
    }

    public TrafficSignalLightPanel getRedLight() {
        return redLight;
    }

    public TrafficSignalLightPanel getYellowLight() {
        return yellowLight;
    }

    public TrafficSignalLightPanel getGreenLight() {
        return greenLight;
    }

} 
```

从 3 个 JPanel 创建一个 JPanel 相当简单。我设置了 JPanel 的首选大小，因此灯光将位于垂直行中。

接下来，我们来看看按钮面板。您几乎可以将此代码复制到任何具有按钮面板的 GUI 中。

```
package com.ggl.traffic.signal.view;

import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JPanel;

import com.ggl.traffic.signal.thread.TrafficSignalCycle;

public class ButtonPanel {

    protected JButton startButton;
    protected JButton stopButton;

    protected JPanel panel;

    protected TrafficSignalCycle thread;

    protected TrafficSignalPanel tsPanel;

    public ButtonPanel() {
        this.thread = null;
        createPartControl();
    }

    protected void createPartControl() {
        panel = new JPanel();
        panel.setLayout(new FlowLayout());

        startButton = new JButton("Start");
        startButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                if (thread != null) {
                    thread.stopRunning();
                }
                tsPanel.getRedLight().setLightOn(false);
                tsPanel.getYellowLight().setLightOn(false);
                tsPanel.getGreenLight().setLightOn(false);
                thread = new TrafficSignalCycle(tsPanel);
                thread.start();
            }
        });

        panel.add(startButton);

        stopButton = new JButton("Stop");
        stopButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                if (thread != null) {
                    thread.stopRunning();
                    thread = null;
                }
                tsPanel.getRedLight().setLightOn(true);
                tsPanel.getYellowLight().setLightOn(false);
                tsPanel.getGreenLight().setLightOn(false);
            }
        });

        panel.add(stopButton);

        setButtonSizes(startButton, stopButton);
    }

    protected void setButtonSizes(JButton ... buttons) {
        Dimension preferredSize = new Dimension();
        for (JButton button : buttons) {
            Dimension d = button.getPreferredSize();
            preferredSize = setLarger(preferredSize, d);
        }
        for (JButton button : buttons) {
            button.setPreferredSize(preferredSize);
        }
    }

    protected Dimension setLarger(Dimension a, Dimension b) {
        Dimension d = new Dimension();
        d.height = Math.max(a.height, b.height);
        d.width = Math.max(a.width, b.width);
        return d;
    }

    public void setTrafficSignalPanel(TrafficSignalPanel tsPanel) {
        this.tsPanel = tsPanel;
    }

    public JPanel getPanel() {
        return panel;
    }

} 
```

按钮操作非常简单，我可以将它们保留在按钮面板中。如果需要，您可以编写单独的操作类。

最后，这是运行红绿灯循环的代码。它是 Thread 类的扩展，因此可以在与 GUI 不同的线程中运行。在与 GUI 线程分开的线程中工作总是一个好主意。

```
package com.ggl.traffic.signal.thread;

import javax.swing.SwingUtilities;

import com.ggl.traffic.signal.model.TrafficSignalModel;
import com.ggl.traffic.signal.view.TrafficSignalLightPanel;
import com.ggl.traffic.signal.view.TrafficSignalPanel;

public class TrafficSignalCycle extends Thread {

    protected boolean isRunning;
    protected boolean isFinished;

    protected TrafficSignalPanel tsPanel;

    public TrafficSignalCycle(TrafficSignalPanel tsPanel) {
        this.tsPanel = tsPanel;
        this.isRunning = true;
        this.isFinished = false;
    }

    @Override
    public void run() {
        while (isRunning) {
            signalLightOn(tsPanel.getGreenLight(), TrafficSignalModel.GREEN_LIGHT_TIME);
            signalLightOn(tsPanel.getYellowLight(), TrafficSignalModel.YELLOW_LIGHT_TIME);
            signalLightOn(tsPanel.getRedLight(), TrafficSignalModel.RED_LIGHT_TIME);
        }
        this.isFinished = true;
    }

    protected void signalLightOn(TrafficSignalLightPanel light, int seconds) {
        if (isRunning) {
            setLightOn(light, true);
        }

        for (int i = 0; i < 1000 && isRunning; i++) {
            try {
                Thread.sleep(1L * seconds);
            } catch (InterruptedException e) {
            }
        }
        setLightOn(light, false);
    }

    protected void setLightOn(final TrafficSignalLightPanel light,
            final boolean isLightOn) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                light.setLightOn(isLightOn);

            }       
        });
    }

    public void stopRunning() {
        this.isRunning = false;
        while (!isFinished) {
            try {
                Thread.sleep(10L);
            } catch (InterruptedException e) {
            }
        }
    }

} 
```

真正改变信号灯颜色的方法必须在 Swing 事件线程中执行。这就是 setLightOn 方法通过调用 SwingUtilities 所做的。

定时循环有点复杂，因为我们希望能够在几毫秒内停止线程。isFinished 布尔值确保线程完全停止，以便可以设置灯光。

这是一个相当长的答案，但我希望它对任何创建 Swing GUI 的人都有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T17:37:34.480

您不应该*在*UI 线程中循环，也不应该让它进入睡眠状态。从根本上说，您应该尽可能保持 UI 线程自由。

如果您需要在 UI 线程中的 Swing UI 中定期发生某些事情，请[使用 Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。

但是，尚不清楚您在“其他内容”中正在做什么-您可能应该完全在不同的线程中执行此操作，并使用（例如） an`AtomicBoolean`来指示何时要停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:42:14.450

**1.** You should always keep the **UI thread for UI work and Non-UI thread for Non-UI work**.

**2.** In Java GUI, the `main()` is not Long lived, after assigning the construction of GUI to the `Event Dispatcher Thread`, the `main()` quits, and now its EDT's responsibility handle the GUI.

**3.** So when you click the buttons, and the work you are doing is doing some heavy process or its time consuming....then span a `Separate thread`.

**4.** You can use `Thread` or `SwingWorker`.

**Example:**

```
Button b = new Button("Click me");

b.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {

                              Thread t = new Thread(new Runnable(){

                                     public void run(){

                                           // Do the Heavy Processing work.....

                                       }

                                });

                t.start();
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T17:38:09.987

简单但肮脏的方式：

多线程你的程序，让一个线程做你的循环，第二个线程监控你的按钮。让按钮更改您的 globalStop 变量

不太容易但更清洁的方法：

使按钮引发中断以更改值。中断后for循环将继续到结束。

# ruby-on-rails-3 - 是否可以将 html 元素传递到部分？

> ID：12060071
> 
> 赞同：0
> 
> 时间：2012-08-21T17:33:09.820
> 
> 标签：ruby-on-rails-3, templates, view, partial, content-for

我有一个包含标题、子标题和可能的一个或多个按钮的部分。它用于许多不同的页面。通常页面不需要按钮，所以我只需将标题和可选的子标题传递给部分。然而，有时页面需要一个或多个按钮，而我设法允许传入任意数量的按钮的唯一方法是使用 content_for。我的部分看起来像这样：

```
<% if defined? page_title %>
    <header class="pageHeader">
        <div class="page-details">
            <h3><%= page_title %></h3>
            <% if defined? page_subtitle %>
                <p><%= page_subtitle %></p>
            <% end %>
        </div>
        <ul class="crud-menu nav-pills">
            <%= content_for :page_header_buttons %>
        </ul>
    </header>
<% end %> 
```

这个使用 content_for 很讨厌。有什么办法可以将列表项/按钮传递到这个部分？我还能如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:38:18.970

您可以将此部分转换为布局：

```
<% if defined? page_title %>
    <header class="pageHeader">
        <div class="page-details">
             <h3><%= page_title %></h3>
            <% if defined? page_subtitle %>
                 <p><%= page_subtitle %></p>
            <% end %>
        </div>
        <ul class="crud-menu nav-pills">
            <%= yield %>
        </ul>
    </header>
<% end %> 
```

你会这样渲染它：

```
<%= render layout: "your_partial_above", locals: { page_title: "page title } do %>
    <%= render "partial_with_your_buttons" %>
<% end %> 
```

# ruby - Ruby 中的终结器：是否有与 PHP 中的“__destruct”等价的东西？

> ID：12060073
> 
> 赞同：3
> 
> 时间：2012-08-21T17:33:17.133
> 
> 标签：ruby, destructor, finalizer

在 PHP 类中，解析器处理`__construct`和`__destruct`方法来实例化实例并在脚本退出或您使用 unset 时销毁它。当您扩展一个类时，您只需使用`parent::__construct`并`parent::__destruct`运行可能需要在扩展的类上运行的任何清理代码。

现在在代表数据库数据并帮助您操作该数据的类的上下文中，我认为`__destruct`可以使用一种方法将当前值与从数据库中获取的原始值进行比较，并在必要时进行更新（在某些情况下总是只要主键值不能更改，请执行 UPDATE）。在 PHP 中实现这一点非常简单。

这种方法的主要优点是根据需要简单地快速操作类变量，然后让类在最后执行一次大更新。在运行几分钟的长脚本中，最好在 __construct 期间创建数据库实例、获取数据、关闭数据库连接，然后仅在几分钟的执行期间操作类变量。在 __destruct 上，打开一个新的数据库连接进行更新，然后关闭数据库连接并清理任何其他需要清理的东西。

我很好奇人们对这是否是一个好主意/坏做法的想法，但我的主要问题是这在 Ruby 中是否可行。

在 Ruby 中，当您实例化该类的实例时，您会运行 initialize 方法。Ruby 的等价物`parent::__construct`是`super`在 Ruby 中。还有 Ruby 类的`ObjectSpace.define_finalize`and`finalize`方法。但是，据我了解， finalize 方法不应该能够引用调用它的实例。最重要的是，我找不到任何与`parent::__destruct`. 我怀疑那是因为没有等价物，因为似乎该`finalize`方法被明确设计为防止引用自身。

有没有人知道如何做到这一点？如果不是，那么转储 Ruby 类以取回资源并防止数据丢失的最佳实践是什么？是否每个人都在将类实例设置为 nil 之前调用了一个垃圾收集方法，还是有其他方法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-09-17T03:41:38.090

不，Ruby 没有 PHP 等价物`__destruct`，因为 PHP 会在其引用计数达到零时立即销毁对象，但 Ruby 销毁对象的速度很慢。Ruby 只是不时地标记和扫描对象。此外，Ruby 在扫描 C 代码的局部变量时是保守的。如果 C 本地可能指向某个对象，Ruby 拒绝销毁该对象。

Ruby 有`ObjectSpace.define_finalizer`，但很难用。一个对象可以有多个终结器。如果超类定义了终结器，您可以在同一对象上定义另一个终结器。问题是`ObjectSpace.undefine_finalizer`从对象中删除所有终结器。因此，如果超类删除了它的终结器，它也会删除你的终结器。

Ruby 仅在销毁对象后运行终结器。终结器不能引用对象。如果是这样，Ruby 永远不会破坏该对象，并且您会发生内存泄漏。终结器不得位于`self`或局部变量引用对象的范围内。

在下一个示例中，我将展示如何使用终结器来更新数据库。这是一个坏主意，因为 Ruby 运行终结器的速度很慢。数据库可能很长时间没有更新。我呼吁`GC.start`强制进行完整的垃圾收集。我计算机的 Ruby 拒绝销毁其中一个对象，因此还没有发生一次更新。

```
require 'forwardable'
require 'pstore'

# Create a database of people's ages.
People = PStore.new('people.pstore')
People.transaction do
  People['Alice'] = 20
  People['Bob'] = 30
  People['Carl'] = 40
  People['David'] = 50
  People['Eve'] = 60
end

# Shows people in database.  This can show old values if someone
# forgot to update the database!
def show_people(heading)
  People.transaction(true) do
    puts heading
    %w[Alice Bob Carl David Eve].each do |name|
      puts "  #{name} is #{People[name]} years old."
    end
  end
end

show_people("Before birthdays:")

# This is a person in the database.  You can change his or her age,
# but the database is only updated when you call #update or by this
# object's finalizer.
class Person
  # We need a PersonStruct for the finalizer, because Ruby destroys
  # the Person before calling the finalizer.
  PersonStruct = Struct.new(:name, :age, :oage)
  class PersonStruct
    def update(_)
      s = self
      if s.age != s.oage
        People.transaction { People[s.name] = s.oage = s.age }
      end
    end
  end
  private_constant :PersonStruct

  # Delegate name (r) and age (rw) to the PersonStruct.
  extend Forwardable
  def_delegators(:@struct, :name, :age, :age=)

  # Find a person in the database.
  def initialize(name)
    age = People.transaction(true) { People[name] }
    @struct = PersonStruct.new(name, age, age)
    ObjectSpace.define_finalizer(self, @struct.method(:update))
  end

  # Update this person in the database.
  def update
    @struct.update(nil)
  end
end

# Now give everyone some birthdays.
Person.new('Alice').age += 2
Person.new('Bob').age += 1
Person.new('Carl').age += 1
Person.new('David').age += 1
Person.new('Eve').age += 2

# I forgot to keep references to the Person objects and call
# Person#update.  Now I try to run the finalizers.
GC.start

# Did the database get updated?
show_people("After birthdays:") 
```

我的电脑给出了这个输出：

```
Before birthdays:
  Alice is 20 years old.
  Bob is 30 years old.
  Carl is 40 years old.
  David is 50 years old.
  Eve is 60 years old.
After birthdays:
  Alice is 22 years old.
  Bob is 31 years old.
  Carl is 41 years old.
  David is 51 years old.
  Eve is 60 years old. 
```

我在 Eve 的年龄上加了 2 岁，但在我检查数据库之前没有更新。解释 Ruby 的 C 代码可能`Person.new('Eve')`在某个局部变量中留下了对的引用，因此 Ruby 不会破坏该对象。如果您使用其他版本的 Ruby 或不同的 C 编译器，结果可能会发生变化。当程序退出时，Ruby 会运行任何剩余的终结器，所以更新确实发生了，但为时已晚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T17:41:03.843

as pst noted in his comment you don't need a destructor for ruby. Just set all referring variables to null ( ref = nil ) and the object will get deleted by garbage collection. You can not know exactly when its garbace collected (deleted). In addition you could ( not that I recommend ) write a proc that runs before actuall deletion of that object

```
ObjectSpace.define_finalizer(self, self.class.method(:finalize).to_proc) 
```

# mysql - cakephp 查找最近 24 小时的记录

> ID：12060078
> 
> 赞同：2
> 
> 时间：2012-08-21T17:33:37.133
> 
> 标签：mysql, timestamp, cakephp-2.2

如何找到过去 24 小时内“last_seen”的用户？

```
[User][last_seen] => 2012-08-18 08:10:31 
```

每次登录用户使用当前时间戳浏览网站时都会更新 last_seen

这是我到目前为止所尝试的：

```
$users = $this->User->find('all',array('conditions'=>array('User.last_seen >' =>'BETWEEN NOW() AND NOW()- INTERVAL 24 HOURS'),'recursive'=>-2)); 
```

但是我的数组是空的。

建议？？

一如既往！！你太棒了！谢谢你的时间！

-汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:44:44.260

**解决方案：**

```
$users = $this->User->find('all', [
    'conditions' => [
        'User.last_seen BETWEEN NOW() -INTERVAL 1 DAY AND NOW()'
    ]
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:24:02.030

尝试这个：

```
 $users = $this->User->find('all', array(
        'conditions' => array(
            'User.last_seen BETWEEN ? AND ?' => array(
                date('Y-m-d H:i:s'),
                date('Y-m-d H:i:s', strtotime('+24 hours'))
            )
        )
    )); 
```

# android - 尝试使用 baseadapter 在运行时创建视图

> ID：12060079
> 
> 赞同：0
> 
> 时间：2012-08-21T17:33:39.630
> 
> 标签：android, runtime-error, baseadapter

我正在使用 baseadapter 创建自己的 listview 适配器，并且我想在运行时动态创建视图而不使用充气器。当我不使用 baseadapter 执行此操作时，它可以正常工作，但当我将代码放入 baseadapter 时却不行。

```
public View getView(int position, View convertView, ViewGroup parent) {

        int type = getItemViewType(position);
        System.out.println("getView " + position + " " + convertView + " type = " + type);
        if (convertView == null) {

            switch (type) {
                case TYPE_ITEM:
                    //convertView = mInflater.inflate(R.layout.item1, null);
                    LinearLayout ll = new LinearLayout(MainActivity.this);
                    TextView question = new TextView(MainActivity.this);
                    question.setTextSize(1,14);
                    question.setText("This is question");

                    ll = new LinearLayout(MainActivity.this);
                            ll.setOrientation(android.widget.LinearLayout.VERTICAL);
                    ll.addView(question); 
                    convertView=ll;
                    break;
                case TYPE_SEPARATOR:
                    convertView = mInflater.inflate(R.layout.item2, null);
                    break;
            }
        } else {
        }
        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:40:49.657

You first check if convertView is null and then return null if type is TYPE_ITEM - you at least have to return ll.

BTW: you should try to recycle the convertView for performance reasons if its not null. See [http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html) for more information about ListAdapters

# html - 正确使用搜索引擎元标签

> ID：12060085
> 
> 赞同：1
> 
> 时间：2012-08-21T17:34:27.947
> 
> 标签：html, search-engine, meta-tags

我正处于紧要关头。

我最近（大约一个月前）试图让我的网站对谷歌等搜索引擎友好。但结果，我设法创建了完全相反的结果，似乎**我的网站在 ~1,5months 之后没有出现在谷歌搜索结果的任何地方**。我的标题部分如下所示：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Company title</title>
<meta name="description" content="Description of the site">
<meta name="author" content="My own name">
<meta name="keywords" content="keywordX, keywordY, keywordZ">
<meta name="robots" content="Index, NoFollow">
... code continues below ... 
```

后来我尝试通过更改`lang="en"`为`lang="fi"`（因为网站仅使用芬兰语）来更正我的标题，并在尝试在这里阅读更多关于它们的信息后删除了 robots 元标记：[https ://developers.google.com/webmasters/control-crawl-index/文档/robots_meta_tag](https://developers.google.com/webmasters/control-crawl-index/docs/robots_meta_tag)

如果有人见过类似的，我还有问题需要回答：

1.  `<meta name="robots" content="Index, NoFollow">`- 即使我有“索引”属性，这是否会阻止我的页面被索引？或者它`<html lang="en">`是用芬兰语写的网站时的用法。？我现在迫切希望正确获取我的网站标题，并希望或请求谷歌新一轮的索引？

提前谢谢。- 鬃毛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:52:25.360

*   保持语言就像`lang='fi'`您是芬兰语网站一样。

*   更改`<meta http-equiv="content-type" content="text/html; charset=UTF-8">`为`<meta charset="utf-8">`。

*   Drop `<meta name="keywords" content="keywordX, keywordY, keywordZ">`，它不再做任何事情，而且毫无用处。

*   `<meta name="robots" content="Index, NoFollow">`应该删除，它基本上是在告诉搜索引擎不要同时使用您页面上的任何链接，并且会产生有害影响。如果您不想删除它，可以将其设置为默认值，即`<meta name="robots" content="index, follow">`

其余的都很好。

要检查发生了什么，请在 google 中搜索`site:yourdomainname.com`，这将向您显示 Google 中已有的内容。

然后注册[Google 的网站管理员工具](https://www.google.com/webmasters/tools/home?hl=en)，并添加您的网站。这会深入告诉您 Google 对您的网站的看法，哪些页面在其索引中，以及大量非常有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:15:08.443

无论您的页面处理的真正问题是什么，它都可能与您披露的数据无关。但是，被误导的标签*可能*与它有关。不是直接的，而是间接的。当您说 时，您是在告诉搜索引擎忽略您页面上的链接，使其成为一个孤立的页面，其权重可能低于普通页面。`meta``Index, NoFollow``Nofollow`

然而，这种情况可以简单地解释为缺乏兴趣的结果。如果没有指向页面的重要链接，或者页面缺少相关的文本内容或存在一些标记问题，那么搜索引擎很可能永远找不到它，或者忽略它。

在技​​术方面，`<html lang="en">`除非语言是英语，否则当然是错误的，但没有证明通用搜索引擎会注意`lang`属性。

基本上，就搜索引擎可见性而言，通过“搜索引擎元标签”可以实现的目标不多，但也不会失去太多——除了通过机器人排除标签。

# mongodb - Grails MongoDB 插件未发布版本：1.0.1 或 1.1.0.GA

> ID：12060086
> 
> 赞同：0
> 
> 时间：2012-08-21T17:34:28.267
> 
> 标签：mongodb, grails, grails-orm, grails-plugin

我正在[使用 Grails Scaffolding 解决 MongoDB 问题](https://stackoverflow.com/questions/12012306/mongodb-issues-with-grails-scaffolding-do-not-occur-in-mysql)。

我想尝试更多当前版本，看看我遇到的问题是否在以后的版本中得到了解决。

从[Grails.org MongoDB Plugin Page](http://grails.org/plugin/mongodb)，我看到当前版本是 1.0.0.GA。

这就是我正在使用的：

```
plugins {
      compile ":mongodb:1.0.0.GA"
      build ":tomcat:$grailsVersion"
} 
```

但是，当我转到[Grails MongoDB Plugin 的 JIRA 页面](http://jira.grails.org/browse/GPMONGODB)时，我看到了 2 个未发布的版本：

*   1.0.1
*   1.1.0.GA

有谁知道我在哪里可以获得这些版本的 Grails MongoDB 插件？我不介意拆除夜间建筑和建筑，只是找不到在哪里得到它们。

我试图在[GitHub Grails-Plugin](https://github.com/grails-plugins)上找到它们，但没有看到。我找不到从 JIRA 页面下载的方法。

最后（作为最后的努力），我尝试修改 中的插件`BuildConfig.groovy`，以引用 1.0.1 和 1.1.0.GA 不起作用（可能是因为这些版本尚未发布）。

```
plugins {
      compile ":mongodb:1.1.0.GA"
      build ":tomcat:$grailsVersion"

} 
```

给我错误：

```
| Loading Grails 2.1.0
| Configuring classpath
| Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information):

- org.grails.plugins:mongodb:1.1.0.GA 
```

非常感谢，我很感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:10:03.383

grails.org 上的插件页面实际上确实引用了[grails-data-mapping 插件组 github 页面](https://github.com/SpringSource/grails-data-mapping)。其中有一个标签 1.0.1-RELEASE，但不是 1.1，它可能是 master。

[也许您可以使用grails install-plugin](http://grails.org/doc/latest/ref/Command%20Line/install-plugin.html)从源代码构建它并从本地文件安装。

# performance - 建立多个数据库连接后 REST 请求超时

> ID：12060090
> 
> 赞同：0
> 
> 时间：2012-08-21T17:35:02.547
> 
> 标签：performance, rest, database-connection, restlet

我有一个使用 RESTlet 的 REST 应用程序。我正在查询多个数据库以使用查询的数据创建响应。关闭和打开数据库连接的过程有时每个需要 20 秒。有时我的程序会建立 10 个不同的数据库连接（到不同的数据库）。浏览器在此时间之后超时，因为这对于客户端等待响应显然太长了。

我怎样才能在一个批次中从这些不同的数据库中检索数据而不会超时。如何加快此过程以低于浏览器的超时阈值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:38:00.833

我最终实现了长时间超时的 memcached。现在我只做一次这个广泛的查询，它被缓存了几个小时。

# vb.net - 为什么我的 DbContext 没有在我的 TransactionScope 中注册？

> ID：12060092
> 
> 赞同：1
> 
> 时间：2012-08-21T17:35:09.773
> 
> 标签：vb.net, transactionscope, dbcontext

我首先使用 EF 代码，但我似乎无法让我的查询在 TransactionScope 的上下文中运行。我已经看到了几十个这样做的例子，但是我的插入没有被事务处理；此测试失败，记录仍在数据库中，但未引发错误。

我在 SQL 2008 上，并且 MSDTC 已打开，但我的理解是它不需要，因为在此环境中不应将其升级为分布式事务。无论如何，我认为如果它尝试升级但失败了，我会得到一个例外。

```
<TestMethod()>
Public Sub CanEnrollInTransaction()
    Dim id = Guid.NewGuid().ToString()

    Using foo = New TransactionScope(
                TransactionScopeOption.Required,
                New TransactionOptions() With {.IsolationLevel = IsolationLevel.Serializable})

        Dim context = New WebPersistentDataContext()    'Subclass of DbContext

        context.WebsiteErrors.Add(New WebsiteError() With {
                                  .WebsiteId = 21,
                                  .AdditionalInformation = id,
                                  .BrowserInformation = "Unit test",
                                  .ErrorDateTime = DateTime.Now,
                                  .ErrorMessage = "Unit Test"})

        'No transaction in SQL Profiler
        context.SaveChanges()

        'Tried this too...
        'Dim objectContext = CType(context, IObjectContextAdapter).ObjectContext
        'objectContext.SaveChanges()

        'Not committing should roll back the transaction when scope is disposed
    End Using

    Dim newContext = New WebPersistentDataContext()

    If newContext.WebsiteErrors.Any(Function(e) e.AdditionalInformation = id) Then
        Assert.Fail("record is still there, transaction did not roll back")
    End If
End Sub 
```

谁能解释我在这里做错了什么？为什么没有事务，更不用说回滚了？

更新 - 上下文类：

```
Public Class WebPersistentDataContext
    Inherits DbContext

Public Property WebsiteErrors As DbSet(Of WebsiteError)

Public Property Websites As DbSet(Of Website)

Public Property WebSettings As DbSet(Of WebSetting)

Public Sub New()

End Sub

End Class 
```

# objective-c - 动态附加变量属性名称

> ID：12060093
> 
> 赞同：1
> 
> 时间：2012-08-21T17:35:10.800
> 
> 标签：objective-c, ios, core-data

我有一个带有多个按钮的自定义 UITableViewCell。我想记住按钮是处于选中状态还是未选中状态，并将其存储在自定义核心数据模型类的属性中。有多个自定义 UITableViewCell，每个都有不同数量的按钮。

这些按钮被巧妙地命名为一个字符串：1,2,3...

解释这个项目：想象一位老师想要跟踪学生阅读的章节数以获取书籍列表。目标是跟踪每个学生阅读的章节总数。每本书都是一个 UITableViewCell。每本书都有唯一数量的章节。阅读每一章时，教师（或学生）选择一个按钮。读取的章节将被保存为一个属性，以便下次 UITableViewCell 显示时可以这样显示。

```
#import "Student.h"

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    chaptersInBook = 16;
    self.dickensArray = [NSMutableArray array];

    // Book title
    UILabel *bookLabel = [[UILabel alloc]initWithFrame:CGRectMake(20, 10, 100, 30)];
    bookLabel.text = @"David Copperfield";

    for (NSInteger index = 0; index < chaptersInBook; index++) // for loop runs 16 times
    {
        // Need to make correct number of buttons based on the chapters in each book
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
        button.tag = index;
        //buttons in rows of seven
        button.frame = CGRectMake(40*(index%7) + 20,40 * (index/7) + 40, 30, 30);
        [button setTitle:[NSString stringWithFormat:@"%d", index+1] forState:UIControlStateNormal];

        [button setImage:[UIImage imageNamed:[NSString stringWithFormat:@"%d.png",index+1]] forState:UIControlStateNormal];
        [button setTitle:[NSString stringWithFormat:@"%d", index+1] forState:UIControlStateNormal];
        [button setImage:[UIImage imageNamed:@"check.png"] forState:UIControlStateSelected];
        [button addTarget:self action:@selector(toggleOnOff:) forControlEvents:UIControlEventTouchUpInside];
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];

        [self.contentView addSubview:button];
        [self.contentView addSubview:bookLabel];
    }
}
return self;
}

-(IBAction)toggleOnOff:(id)sender
{
UIButton *button = (UIButton *)sender;
button.selected = !button.selected; // In storyboard the default image and selected image are set
}

-(IBAction)buttonPressed:(id)sender {
    UIButton* button = (UIButton *)sender;
    if (button.selected) {
      int chapter = button.tag + 1;
      NSString *nameOfButton = [NSString stringWithFormat:@"%d",chapter];
      NSString *buttonIsSelected = @"YES";

//Now I want to set student.ch1 to yes but I want to set the '1' to 'chapter'
//Not sure how to do this: append the name of a property with a variable.

} 
```

所以，我的问题是，如何最好地将按钮状态存储到所选章节的学生属性中？我希望我可以将章节编号附加到“student.ch [在此处附加章节编号]”，但我认为这是不可能的。

```
//eg.
student.ch1 = [NSNumber numberWithBool:YES];//but replace '1' with the value in the int variable 'chapter' 
```

先感谢您。我想我找错树了。

库尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:44:34.153

由于按钮的数量很少（您在评论中指出 28），您可以使用 2 的幂作为按钮上的标签，并使用整数位掩码将所有 28 个按钮的状态存储在单个整数字段中。

考虑这个带有四个按钮的示例（您可以将其扩展为 32 个，而无需进行太多更改）。如下标记您的按钮：

```
button1.tag = 0x01; // Binary 0001
button2.tag = 0x02; // Binary 0010
button3.tag = 0x04; // Binary 0100
button4.tag = 0x08; // Binary 1000 
```

当一个按钮被选中时，`bitwise-OR`它的标签与当前状态：

```
NSUInteger currentState = 0;
...
currentState |= button.tag; 
```

当一个按钮未被选中时，`bitwise-AND`它的标签与当前状态相反：

```
currentState &= ~button.tag; 
```

要切换状态，您可以`XOR`使用当前状态标记：

```
currentState ^= button.tag; 
```

当您需要将选中/未选中状态重新应用到您的按钮时，您可以像这样在循环中执行此操作：

```
for (int i = 0 ; i != 28 ; i++) {
    NSUInteger tag = 1<<i;
    if (storedState & tag) {
        UIButton *btn = [myView viewWithTag:tag];
        // ... make the button selected ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:40:32.810

如果我的问题正确，很容易回答：看看 Key-Value-Coding - 这应该对你有帮助！

[http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)

# numerical-methods - 使用 odeint 函数定义

> ID：12060111
> 
> 赞同：3
> 
> 时间：2012-08-21T17:36:52.360
> 
> 标签：numerical-methods, differential-equations, numerical-integration

很菜鸟的问题，所以请多多包涵。

我正在按照此处给出的示例-> [http://www.codeproject.com/Articles/268589/odeint-v2-Solving-ordinary-differential-equations](http://www.codeproject.com/Articles/268589/odeint-v2-Solving-ordinary-differential-equations)

特别是，我正在研究这个函数：

```
void lorenz( state_type &x , state_type &dxdt , double t )
{                                                         
dxdt[0] = sigma * ( x[1] - x[0] );
dxdt[1] = R * x[0] - x[1] - x[0] * x[2];
dxdt[2] = x[0]*x[1] - b * x[2];
 } 
```

就我而言，R 采用一系列值（具有 100 个双精度值的向量）。

odeint 被称为：

```
integrate_const( runge_kutta4< state_type >() , lorenz , x , 0.0 , 10.0 , dt ); 
```

我想为每个 R 值执行此操作。我该如何完成此操作？我对 C++/OOP 的了解有限，但我愿意学习。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:02:47.017

您可以使用“类”版本，但对其进行修改，以便使用`R`您感兴趣的值对其进行初始化。

```
class lorenz_class {
    double R_;
public:
    lorenz_class (double r) : R_(r) {}
    void operator()( state_type &x , state_type &dxdt , double t ) {
        dxdt[0] = sigma * ( x[1] - x[0] );
        dxdt[1] = R_ * x[0] - x[1] - x[0] * x[2];
        dxdt[2] = x[0]*x[1] - b * x[2];
    }
}; 
```

然后，遍历您的向量`R`并将值`lorenz_class`传递给您传递给`integrate_const`模板函数的实例。

```
for (unsigned i = 0; i < myR.size(); ++i) {
    lorenz_class lorenz(myR[i]);
    integrate_const( runge_kutta4< state_type >() , lorenz , x , 0.0 , 10.0 , dt );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T05:45:36.357

只是一点点说明：本教程显示了一个非常相似的 Lorenz 系统参数研究示例：http: [//headmyshoulder.github.com/odeint-v2/doc/boost_numeric_odeint/tutorial.html](http://headmyshoulder.github.com/odeint-v2/doc/boost_numeric_odeint/tutorial.html)。它位于 Thrust 和 VexCL 部分，它展示了如何将这个问题并行化以在多个 CPU 或 GPU 上工作。

# c# - 不等待 messageBox 的结果

> ID：12060116
> 
> 赞同：4
> 
> 时间：2012-08-21T17:37:08.770
> 
> 标签：c#, .net, wpf, messagebox

在当前处于用户测试中的客户端应用程序中捕获未处理的异常时，我编写了这样的代码。

```
catch(Exception ex)
{
    var result = MessageBox.Show(ex.Message, "Error", MessageBoxButton.OK);
    Current.Shutdown();
} 
```

但是消息框只会很快出现，然后程序就会关闭。为什么代码不等待结果出现。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-02T09:46:49.727

我有一个类似的问题。问题是在显示主窗口之前抛出异常，因此没有窗口可以显示消息框。Swamy 的回答只是强制延迟时间，以便可以初始化窗口。IMO 不太优雅。找到了更好的解决方案 [这里] [WPF MessageBox not waiting for result [WPF NotifyIcon]](https://stackoverflow.com/questions/22403098/wpf-messagebox-not-waiting-for-result-wpf-notifyicon)。

只需`MessageBoxOptions.DefaultDesktopOnly`在`MessageBox.Show(....) method`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T19:55:09.647

从文档到[`MessageBox`](http://msdn.microsoft.com/en-us/library/system.windows.messagebox)课程：

> 消息框总是有一个所有者窗口。默认情况下，消息框的所有者是打开消息框时应用程序中当前处于活动状态的窗口。[`Window`](http://msdn.microsoft.com/en-us/library/system.windows.window)但是，您可以使用多个[`Show`](http://msdn.microsoft.com/en-us/library/system.windows.messagebox.show)重载之一为指定另一个所有者。有关所有者窗口的详细信息，请参阅[`Window.Owner`](http://msdn.microsoft.com/en-us/library/system.windows.window.owner)。

因此，您的问题与用户关闭消息框之前存在应用程序的[问题](https://stackoverflow.com/q/5923188/572834)非常相似。

首先要尝试的是`null`作为`Window`参数传递。

```
MessageBox.Show(null, ex.Message, "Error", MessageBoxButton.OK); 
```

如果您有一个`Window`类的实例，例如您的主窗口对象，请传递它而不是`null`：

```
MessageBox.Show(mainWindow, ex.Message, "Error", MessageBoxButton.OK); 
```

如果您当前处于任何主窗口方法中，则可以`this`作为 Window 传递：

```
MessageBox.Show(this, ex.Message, "Error", MessageBoxButton.OK); 
```

* * *

`null`仅在此时没有可用的主窗口对象的情况下使用。

查看[MessageBox 示例](http://go.microsoft.com/fwlink/?LinkID=160023)。您应该能够看到`this`作为所有者窗口传递的情况与传递的情况之间的区别`null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:47:11.920

您是在脚本还是实际的 .net 应用程序中使用此代码？您在消息框按钮中缺少“s”。你应该这样写代码：

```
try
{
    throw new Exception("My new exception");
}
catch (Exception ex)
{
    DialogResult result = MessageBox.Show(ex.Message, "Error",MessageBoxButtons.OK);
} 
```

如果这不起作用，您应该查看引发异常的代码以进行进一步调试...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T11:43:13.440

这是一个非常古老的问题，但可能下面的答案可能会帮助其他人，

我有同样的情况，我想在创建主窗口之前显示消息框，在我的情况下，消息框在我点击确定之前消失，应用程序将关闭。

我正在使用异步和等待并添加低至 10 毫秒的延迟为我解决了这个问题。（因为那时主窗口已加载）

```
await Task.Delay(10);
if (MessageBox.Show(MainWindow, "Message", "Error", MessageBoxButton.OK) == MessageBoxResult.OK)
{
    Current.Shutdown();
} 
```

可能对于非异步方法 Thread.Sleep 也可以工作（未尝试）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-27T13:25:33.290

在非异步方法中显示任何窗口之前，这为我解决了问题：

```
 if (Task.Run(() => MessageBox.Show("test", "Fehler", MessageBoxButton.OK, MessageBoxImage.Error)).Result == MessageBoxResult.OK)
 {
     Environment.Exit(1);
 } 
```

# c# - 我班级的实例不想正确地充当字典键与字符串互换

> ID：12060117
> 
> 赞同：0
> 
> 时间：2012-08-21T17:37:11.657
> 
> 标签：c#, dictionary, wrapper, equals, gethashcode

我创建了一种字符串包装类，并希望将其实例用作字典键，与常用字符串互换。我超越`GetHashCode`并`Equals`得到了看起来很奇怪的结果。我已经隔离了这个问题。请查看我的代码并解释为什么第二次查找返回 null。

```
void Main()
{
    var foo = new StringWrapper("foo");
    var h = new Hashtable {{ foo, "bar" }};
    Console.WriteLine(h["foo"]);
    Console.WriteLine(h[foo]); // null ??
}

public class StringWrapper
{
    readonly string wrapped;
    public StringWrapper(string s) {
        wrapped = s;
    }
    public override bool Equals(object obj) {
        return wrapped.Equals(obj);
    }
    public override int GetHashCode() {
        return wrapped.GetHashCode();
    }
    public override string ToString() {
        return wrapped;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T17:38:22.697

请记住， in `Equals(object obj)`，`obj`不会是 a `string`，而是 a `StringWrapper`- 并且 a`string`永远不会说它等于不是 a 的东西`string`。您需要从`obj`. 请记住，您应该检查`null`并考虑到如果有人使用`StringWrapper`其他东西而不是将其放入哈希表中，`obj`也可能是任何其他类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T17:41:11.190

您的平等实现不是对称的，也不是自反的：

```
StringWrapper wrapper = new StringWrapper("foo");

Console.WriteLine(wrapper.Equals(wrapper)); // False
Console.WriteLine(wrapper.Equals("foo")); // True
Console.WriteLine("foo".Equals(wrapper)); // False 
```

因此，您违反了[文档中为`Object.Equals`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx). `Hashtable`（和其他类）希望您*不要*违反这些规则，并且当您违反它们时将无法正常工作。

听起来您需要一个自定义集合，而不是一个*试图*假装包装器等于原始值的包装器。

（顺便说一句，你为什么还在使用非泛型`Hashtable`而不是`Dictionary<,>`？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:39:04.247

问题是您的 Equals 方法：

```
public override bool Equals(object obj) {
    // wrapped is a String, but obj is (usually) a StringWrapper
    return wrapped.Equals(obj);
} 
```

你需要这样的东西：

```
public override bool Equals(object obj) {
    var other = obj as StringWrapper;
    return other != null && wrapped.Equals(other.wrapped);
} 
```

编辑：根据乔恩的回答，您可能还希望能够与字符串进行比较：

```
public override bool Equals(object obj) {
    var other = obj as StringWrapper;
    return (other != null && wrapped.Equals(other.wrapped))
           || Object.Equals(wrapped, (obj as String));
} 
```

# excel - 将文本从一个工作簿复制到另一个工作簿

> ID：12060125
> 
> 赞同：0
> 
> 时间：2012-08-21T17:37:25.327
> 
> 标签：excel, vba

我有一个包含数据数组的 Excel 工作簿。

我想通过使用第一张表中可用的测试数据来创建另一张表的测试用例（软件测试）。

所以最终的表格将有句子和第一张测试数据的组合。

我会把句子放进去，但我需要基本的骨架代码逐行逐列地复制数据并粘贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:56:05.500

好吧，在 SO 上已经有与此相关的问题。例如，这里是[通过 VBA 从另一个工作簿复制数据中](https://stackoverflow.com/questions/7401967/copy-data-from-another-workbook-through-vba)无耻地窃取并自由改编的片段

```
Option Explicit
Sub test()
    Dim wb As Workbook

    'Set source workbook
    Set wb = ActiveWorkbook

    'For instance, copy data from a range in the first workbook to another range in the other workbook
    wb.Worksheets("Sheet2").Range("C3:D4").Value = wb.Worksheets("Sheet1").Range("A1:B2").Value
End Sub 
```

最初的答案来自用户 JMax

# python - 解析特定格式的列表

> ID：12060129
> 
> 赞同：0
> 
> 时间：2012-08-21T17:37:34.487
> 
> 标签：python

我有一个这种特定格式的列表。

```
[u' ', u'Address :',u'Sadar Bazaar',u'new Delhi,India',u' ',u'Name :',u'Saun-Jean',u' ',u'Occupation :',u'Developer',u'Hacker',u' '] 
```

我想将记录插入数据库。

这是我的想法，怎么做。

1）取两个之间的所有项目`u' '`

2）第二项`u'Address'`定义了数据库的字段，其余项`u' '`定义了数据。像

```
 'Address :','Sadar Bazaar','new Delhi,India' 
```

3) 对所有项目重复此过程。

可能还有其他好主意。

但我不知道如何在 Python 中做到这一点。有人可以帮我做吗？

编辑：这是我构建列表的方式：

```
for tr in browser.find_elements_by_xpath("//tbody//tbody//tr"):
 tds=tr.find_elements_by_tag_name('td')
 if tds:
  data.append([td.text for td in tds]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:45:45.170

这作为字典要好得多：

```
d={}
d['Address'] = ['sadar bazaar', ...]
d['Name'] = [ 'saun-jean', ... ]
... 
```

或者也许作为字典列表（或类实例）：

```
[ {'Address' : 'sadar bazaar', 'Name': 'saun-jean'}, { ... } ] 
```

要将您的列表转换为我上面的字典列表，您可以执行以下操作：

```
from collections import defaultdict
d = defaultdict(list)
a = iter(yourlist)
key = None
for elem in a:
   if elem == u' ':
      key = next(a)
   else:
      d[key].append(elem) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:06:55.250

```
lis=[u' ', u'Address :',u'Sadar Bazaar',u'new Delhi,India',u' ',u'Name :',u'Saun-Jean',u' ',u'Occupation :',u'Developer',u'Hacker',u' ']
strs=' '.join(str(x).strip() for x in lis if str(x).strip())
lis1=strs.split(':')
dic={}
for i,x in enumerate(lis1[:-1]):
    if x.strip():
        temp_lis=x.strip().split()
        if i+1 <len(lis1)-1:
            dic[temp_lis[-1]]=' '.join(lis1[i+1].split()[:-1])
        else:
            dic[temp_lis[-1]]=' '.join(lis1[i+1].split())

print dic 
```

**输出：**

```
{'Occupation': 'Developer Hacker', 'Name': 'Saun-Jean', 'Address': 'Sadar Bazaar new Delhi,India'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:04:34.923

您必须首先构建字典，这可以通过执行以下操作来完成（粗略代码）：

```
data = {'Adress' : '',
        'Name' : '',
        'Occupation' : ''}
for item in tds:
    data['Adress'] = item[0]
    data['Name'] = item[1]
    data['Occupation'] = item[2] 
```

当然，这是在 tds 中的 trs 总是在同一个地方的情况下。然后您可以使用“数据”字典按名称提取数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T18:12:25.270

按原样使用您的数据：

```
l = [u' ', u'Address :',u'Sadar Bazaar',u'new Delhi,India',u' ',u'Name :',u'Saun-Jean',u' ',u'Occupation :',u'Developer',u'Hacker',u' ']

entries = {}
key = ''
for i in range(len(l)):
    if l[i] == u' ' and i + 1 < len(l):
        key = l[i + 1].replace(':', '').strip()
        entries[key] = []
    elif entries.has_key(l[i].replace(':', '').strip()):
        continue
    else:
        # remove trailing space
        if l[i] != u' ':
            entries[key].append(l[i])

print entries 
```

输出为字典：

```
{u'Occupation': [u'Developer', u'Hacker'], u'Name': [u'Saun-Jean'], u'Address': [u'Sadar Bazaar', u'new Delhi,India']} 
```

# iphone - 有没有办法在不开始滚动的情况下显示 UITextView 的滚动指示器？

> ID：12060141
> 
> 赞同：13
> 
> 时间：2012-08-21T17:38:36.600
> 
> 标签：iphone, ios, uitextview

我有一个带有文本的 UITextView，需要滚动才能看到完整的文本。

但是文本块之间有段落，并且文本在没有开始滚动的情况下可滚动并不是很明显，因此滚动指示器变得可见。这是因为段落之间的空行就在文本视图中可见文本的底部。

虽然我可以插入一些空行，以便分解文本块并且用户可以看到文本继续，但问题是该应用程序将被翻译成多种语言，因此该解决方案不再可行。由于所有语言都必须单独测试，并且每个空行都将插入不同的位置。

这就是为什么我要问，是否有一种方法可以向用户指示如果他向下滚动显示的文本会继续 - 在视图打开时立即 - 所以无需用户点击屏幕。

非常感谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-21T17:47:32.177

由于 UITextView 是 UIScrollView 的子类，因此您可以使用该方法[`flashScrollIndicators`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instm/UIScrollView/flashScrollIndicators)。此方法闪烁滚动视图的滚动指示器，这是向用户显示内容可滚动的方式。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-21T17:47:53.150

你可以试试这个：

```
[yourTextView flashScrollIndicators]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:46:45.560

我会隐藏内置的滚动指示器并实现你自己的。只需创建一个看起来像滚动指示器的自定义视图，并`scrollOffset`通过`UITextView`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T17:55:10.650

该[站点](http://www.developers-life.com/scrollview-with-scrolls-indicators-which-are-shown-all-the-time.html)提供了一个解决方案，您可以在其中始终显示滚动条。基本上你要做的是为你的`UITextView`.

话虽如此，Apple 的人机界面指南不鼓励这样做，它们只提供了一种闪烁滚动指示器的方法。因此，您可以在合理的时刻调用该`flashScrollIndicators`方法，即当用户第一次看到包含您的 ViewController 时`UITextView`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-27T10:48:05.543

Swift 中的代码：

```
textView.flashScrollIndicators() 
```

# php - 像jquery验证这样好的php验证库在哪里

> ID：12060142
> 
> 赞同：1
> 
> 时间：2012-08-21T17:38:38.100
> 
> 标签：php, validation, codeigniter

我使用[jquery 验证](https://github.com/jzaefferer/jquery-validation)进行前端数据验证。但我也需要在服务器端进行验证。

我正在寻找一个好的 php 验证库，它具有与 jquery 验证一样多的功能，包括必填字段、检查电子邮件、检查号码、最小长度、最大长度、等于另一个字段和自定义验证方法。

我正在使用 codeigniter，我发现它有一个 form_validate 库，它具有 jquery 验证中的大部分功能，但没有 codeigniter 就不能使用它，它的错误报告是一个 html 片段而不是数组结构。我也想在安静的服务中使用它。

因此，如果有另一个库可以完成像 jquery 验证这样的工作，我将使用那个库，或者我可能需要做一些工作来自己修改 codeigniter 表单验证。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:44:14.363

下面是几个 php 验证类：

[http://codecanyon.net/item/easyvalidation-php-special-validation-class/521960](http://codecanyon.net/item/easyvalidation-php-special-validation-class/521960)

[http://taggedzi.com/articles/display/validation-class-for-php](http://taggedzi.com/articles/display/validation-class-for-php)

[http://www.phpclasses.org/package/7120-PHP-Validate-input-values-according-to-many-rules.html](http://www.phpclasses.org/package/7120-PHP-Validate-input-values-according-to-many-rules.html)

[http://www.jasonashdown.co.uk/2008/08/php-validation-class-for-forms/](http://www.jasonashdown.co.uk/2008/08/php-validation-class-for-forms/)

这是对 JQuery 的赞美。

[http://code.google.com/p/jquery-validation-php-plugin/](http://code.google.com/p/jquery-validation-php-plugin/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:14:24.770

如果您已经在使用 CodeIgniter，我会再给它一次表单验证机会。

它实际上确实将表单错误传递回数组中。您可以通过`validation_errors()`或获取更多详细信息`$this->form_validation->_field_data`。您可以使用自己的验证对其进行扩展。并且有一些方法可以封装它以在 CI 之外使用。

套用@ficuscr 最初所说的话，您应该使用框架，而不是反对它。

# wpf - 组合框的 Selecteditem 在数据网格中不起作用

> ID：12060143
> 
> 赞同：1
> 
> 时间：2012-08-21T17:38:41.627
> 
> 标签：wpf, combobox

我有一个 Datagrid，其中一列是 Combobox。问题是：如果 Combobox 位于 Datagrid 之外，SelectedItem 将运行良好，但如果组合框的相同代码位于网格内，则不会运行。这是代码。

```
<StackPanel x:Name="stackPanel" Grid.Row="2" Background="White" Width="{Binding Width, ElementName=lvwPPVEvents}" Margin="0,0,0,1.875" >
        <ComboBox ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}}, Path=DataContext.TestNumberofInstallments}" 
                  SelectedItem="{Binding Path=DataContext.TestInstall, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}},UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"/>
        <DataGrid ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" 
               ItemsSource="{Binding FilteredOrderedEvents,UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True}"
              SelectedItem="{Binding EventSelected}" CanUserReorderColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" 
              CellStyle="{StaticResource ClearlstItmContainerStyle}" AlternatingRowBackground="LightGray" MaxHeight="125"
              AlternationCount="2" SelectionMode="Single" Background="White"  AutoGenerateColumns="False" Margin="0,2"
                  HorizontalGridLinesBrush="White" Width="{Binding ActualWidth, ElementName=stackPanel}" HorizontalAlignment="Left" HorizontalContentAlignment="Stretch">
            <DataGrid.Columns>
                <DataGridTextColumn Width="50" Header="Status" Binding="{Binding Path= Status}" IsReadOnly="True"  />
                <DataGridTextColumn Width="60" Header="Order ID" Binding="{Binding Path= EventID}" IsReadOnly="True"/>
                <DataGridTextColumn Width="140" Header="Title" Binding="{Binding Path= Desc}" IsReadOnly="True"/>
                <DataGridTextColumn Width="120" Header="Date / Time" Binding="{Binding Path= StartDate}" IsReadOnly="True"/>
                <DataGridTextColumn Width="60" Header="Channel" Binding="{Binding Path= Channels}" IsReadOnly="True"/>
                <DataGridTextColumn Width="50" Header="Cost" Binding="{Binding Path= Cost,StringFormat=N2}" IsReadOnly="True"/>
                <!--<DataGridComboBoxColumn Header="Install" Width="Auto" ItemsSource="{Binding colNumberofInstallments}"/>-->
                <DataGridTemplateColumn Header="Install">
                    <!--<DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <wpf:IntegerUpDown Value="{Binding NumberOfInstallments}" FormatString="N0" Increment="1" Maximum="{Binding Max}" Minimum="1"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>-->

                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <!--<TextBlock Text="{Binding NumberOfInstallments}"/>-->
                            <ComboBox ItemsSource="{Binding Path=DataContext.TestNumberofInstallments,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}}}" 
                                      SelectedItem="{Binding Path=DataContext.TestInstall, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}},UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Width="37" Header="Max" Binding="{Binding Path= Max}" IsReadOnly="True"/>
            </DataGrid.Columns >
        </DataGrid>
    </StackPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:48:41.983

它不起作用，主要是因为 DataGridTemplateColumn 不是可视化树的一部分。因此，RelativeSource 在这种情况下并没有真正的意义。

但是，您可以做简单的骇客：

```
 <DataGrid.Resources>
    <TextBlock x:Key="TempHack" DataContext="{YOUR ACTUAL BINDING HERE}"/>
   </DataGrid.Resources> 
```

然后你可以像这样引用它：

```
 <DataGridTemplateColumn Header="{Binding Source={StaticResource TempHack}}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:21:38.240

有许多不同的控件可以被认为是 a ，所以我怀疑你的绑定`UserControl`没有正确`UserControl``RelativeSource`

我建议使用您的 UserControl 的完整类名，而不是仅仅尝试`UserControl`在 VisualTree中找到最接近的

```
<ComboBox 
    ItemsSource="{Binding DataContext.TestNumberofInstallments, 
        RelativeSource={RelativeSource AncestorType={x:Type local:MyUserControl}}}" 
    SelectedItem="{Binding DataContext.TestInstall, 
        RelativeSource={RelativeSource AncestorType={x:Type local:MyUserControl}}}" /> 
```

我做了一个快速测试，它似乎工作得很好，但令我惊讶的是我无法`ElementName`在我的绑定中使用。也许[ChrisDD](https://stackoverflow.com/a/12060285/302677)关于不能在 a 中使用是`ElementName`正确的，因为`DataGridTemplateColumn`它与`VisualTree``RelativeSource``DataGridTemplateColumn`

```
<StackPanel x:Name="RootPanel">

    <ComboBox ItemsSource="{Binding ElementName=RootPanel, Path=DataContext.Test}"
              SelectedItem="{Binding ElementName=RootPanel, Path=DataContext.SelectedTest}"
              DisplayMemberPath="TestValue"/>

    <DataGrid ItemsSource="{Binding Test}">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type StackPanel}}, Path=DataContext.Test}"
                                  SelectedItem="{Binding RelativeSource={RelativeSource AncestorType={x:Type StackPanel}}, Path=DataContext.SelectedTest}"
                                  DisplayMemberPath="TestValue"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
</StackPanel> 
```

您应该注意的一件事是 WPF 通过引用而不是值来比较对象，因此`SelectedItem`必须指向内存中与 中的项目完全相同的引用`ItemsSource`，否则它将不会被视为匹配并被选中。

例如，

```
ItemsSourceProperty = new ObservableCollection<SomeObject>()
{
    new SomeObject(1),
    new SomeObject(2),
    new SomeObject(3)
};

SelectedItemProperty = ItemsSourceProperty.FirstOrDefault(); // Works
SelectedItemProperty = new SomeObject(1); // Won't work 
```

# windows - 使用 KeSaveExtendedProcessorState 获得 BSOD

> ID：12060147
> 
> 赞同：3
> 
> 时间：2012-08-21T17:38:59.303
> 
> 标签：windows, device-driver

我之前在 Windows 7 64 位的设备驱动程序中使用[KeSaveExtendedProcessorState](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553238%28v=vs.85%29.aspx) / [KeRestoreExtendedProcessorState来保存和恢复扩展的处理器状态，我得到了 KeSaveExtendedProcessorState 的 BSOD，你能帮忙吗？](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553182%28v=vs.85%29.aspx)

我使用 [RtlGetEnabledExtendedFeatures](http://msdn.microsoft.com/en-us/library/windows/hardware/ff561905%28v=vs.85%29.aspx) ((ULONG64)(-1)) 来获取启用的扩展功能（返回值为 0x3），并将其用作[KeSaveExtendedProcessorState](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553238%28v=vs.85%29.aspx)的第一个参数，并使用[MmAllocateContiguousMemory](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554460%28v=vs.85%29.aspx) (sizeof(XSTATE_SAVE), highAddress) 和 highAddress = 0xbfffffff 分配用于保存扩展状态的非分页内存，并在 KeSaveExtendedProcessorState 之前将 IRQL 提升到 DISPATCH_LEVEL。我收到以下消息的 BSOD：

```
0: kd> !analyze -v
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

INVALID_EXTENDED_PROCESSOR_STATE (131)
Invalid combination of parameters was detected while saving or restoring
extended processor state.
Arguments:
Arg1: 0000000000000000, Invalid feature mask was passed or extended processor state is
                not enabled.
Arg2: 0000000000800000, Nonzero if extended state is enabled.
Arg3: 0000000000000003, The low 32 bits of the feature mask.
Arg4: 0000000000000000, The high 32 bits of the feature mask. 
```

我错过了什么？

谢谢。

问候，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-19T19:36:14.687

现在帮助您进行编程为时已晚，但您错过的是 KeSaveExtendedProcessorState 在 64 位 Windows 7（不是 32 位和 Windows 8 及更高版本）中的实现要求处理器支持扩展处理器状态，而您的处理器不支持. 无论如何，它认为 XSTATE_MASK_LEGACY 的两个位在 Mask 参数中都是无效的。

你错过这个的代价就是你的错误检查。不需要“多一点代码”。当然，你并不是唯一一个错过它的人。微软在文档中也错过了它，但对微软来说，这个代价几乎没有。

十年后，在我评估这个函数是否值得我费力记录下来时，我想知道是否有任何现实世界的程序员被抓住了。因此，堆栈溢出是否表明它最终有利于答案。

# html - CSS以背景颜色居中内联元素

> ID：12060154
> 
> 赞同：0
> 
> 时间：2012-08-21T17:39:34.637
> 
> 标签：html, css, text, inline

我一直在尝试在固定高度和宽度的 div 内获得水平和垂直居中的文本块。我还希望文本上有一个半透明的黑色背景，如果可能的话，它能够延伸到 2 行。

我遇到的问题是该行没有垂直居中，文本后面的黑色背景在新行的开头做了奇怪的事情。

我目前得到的代码是这样的：

**HTML**

```
<div class="description">
    <span>Welcome to the world of beautiful design, technology and music.</span>
</div> 
```

**CSS**

```
div.description {
    width: 645px;
    height: 200px;
    margin: 0 auto;
    text-align: center;
}
div.description span {
    background: rgba(0, 0, 0, 0.5);
    color: #FFFFFF;
    font-size: 28px;
    line-height: 60px;
    padding: 10px;
} 
```

我希望模仿这种外观[http://grab.by/fwNe](http://grab.by/fwNe)而不必使用任何奇怪的 javascript hack 将其分成 2 行。

谢谢，查理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T03:14:13.863

您还可以使用（或模仿）表格来允许使用`vertical-align: middle;`. [http://jsfiddle.net/LcBbc/](http://jsfiddle.net/LcBbc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T03:55:35.343

有一种最优雅的方式，使用`display:table-cell;`

CSS将是

```
div.description {
    width: 645px;
    height: 200px;
    margin: 0 auto;
    text-align: center;
    display:table-cell; 
    vertical-align : middle;
}
div.description span {
    background: rgba(0, 0, 0, 0.5);
    color: #FFFFFF;
    font-size: 28px;
    line-height: 60px;
    padding: 10px;
}​ 
```

**[演示](http://jsfiddle.net/thujeevan/EPYAn/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T17:49:17.997

您可以在 div.description 中根据窗口高度和宽度的百分比值指定 margin-top 和 margin-left。

例如替换

```
margin: 0 auto 
```

和

```
margin-top: 10%;
margin-left: 20%; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T18:12:23.953

如果你想让一个 div 垂直和水平居中，最好的方法是在 CSS 中使用绝对定位，如下所示：

```
<div class="description_container">
    <div class="description">
        Welcome to the world of beautiful design, technology and music.
    </div>
</body> 
```

然后是 CSS

```
.description_container {
    position: relative;
} 
.description {
    width: 640px;
    height: 200px;
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -320px; /* half the width of this div */
    margin-top: -100px; /* half the height of this div */
} 
```

现在我们已经创建了一个具有固定宽度和高度的 div 并将其垂直和水平放置。

但是，您希望能够换行超过 1 行，因此，我们不知道 div 的高度是多少。我会使用 JS 来查找 div 的高度，然后相应地更改 CSS 中的值，我不知道如何仅使用 CSS 来做到这一点 - 会看看并让你知道。

至于背景，我觉得最好用一个半透明的png那个平铺。我发现它的兼容性比直接在 CSS 中要广泛得多（IE6 是唯一不接受它的浏览器）。因此，最好在 Photoshop 中创建一个 5 x 5px 的图像，具有您想要的任何透明度，并将其导出为 PNG-64，这样您就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T03:54:59.237

这是一种“以未知为中心”的方法，我觉得这很有趣：http: [//jsfiddle.net/joplomacedo/ag5ea/](http://jsfiddle.net/joplomacedo/ag5ea/)

的HTML：

```
<div class="description">
    <span>
        Welcome to the world of beautiful design,<br />
        technology and music.
    </span>
</div>​ 
```

CSS：

```
.description {
    width: 645px; height: 200px;
    margin: 0 auto;
    text-align: center;
}

.description:before {
    content: "";
    display: inline-block;
    height: 100%;
    margin-right: -0.25em;
    vertical-align: middle;
}

.description span {
    display: inline-block;
    vertical-align: middle;
} 
```

我希望我自己想出了这种技术，但实际上我是在 css-tricks.com 上发现的。这是那个链接：[http](http://css-tricks.com/centering-in-the-unknown/) ://css-tricks.com/centering-in-the-unknown/ ​</p>

# php - joomla php mysql中的子查询

> ID：12060158
> 
> 赞同：1
> 
> 时间：2012-08-21T17:39:51.363
> 
> 标签：php, join, joomla, subquery

好的，我真的无法按照我需要的方式进行这项工作。我有 2 张桌子：

`gerencia_clientes`和`gerencia_vendas`

第一个保存我的客户，第二个保存发票

我需要使用这样的查询列出它们

```
$db = JFactory::getDBO();
$query = "select * from jos_gerencia_vendas where id_edicao = ".$iddaedicao." order by id_cliente";

$db->setQuery($query);
$list = $db->loadObjectList();
foreach ($list as $item) 
```

但不是按 id_cliente 排序，我需要正确的语法来使用另一个表中按字母顺序排列的客户进行排序，

例子

```
$query = "select * from jos_gerencia_vendas where id_edicao = ".$iddaedicao." order by (select nomecliente from jos_gerencia_clientes)"; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T00:18:03.840

```
$query = "select * from jos_gerencia_vendas AS a 
          LEFT JOIN jos_gerencia_clientes AS b ON b.id_cliente=a.id_cliente
          where a.id_edicao = ".$iddaedicao." 
          order by b.nome_cliente ASC" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-01T08:33:33.787

还有一种方法可以使用 Joomla 平台 API 执行包含子查询的查询。如何使用子查询的基本思想是基于[gunjanpatel](https://gist.github.com/gunjanpatel/8663333)。

这个答案也发布在[Stackexchange for Joomla](https://joomla.stackexchange.com/questions/1/method-for-creating-a-subquery-using-jdatabase/12404#12404)上。

[这是在嵌套集模型](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)上执行查询的示例：

SQL查询：

```
-- Find the Immediate Subordinates of a Node
SELECT node.title, (COUNT(parent.id) - (sub_tree.depth + 1)) AS depth
FROM lubd3_usergroups AS node,
        lubd3_usergroups AS parent,
        lubd3_usergroups AS sub_parent,
        (
                SELECT node.id, (COUNT(parent.id) - 1) AS depth
                FROM lubd3_usergroups AS node,
                        lubd3_usergroups AS parent
                WHERE node.lft BETWEEN parent.lft AND parent.rgt
                        AND node.id = 1
                GROUP BY node.id
                ORDER BY node.lft
        )AS sub_tree
WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND node.lft BETWEEN sub_parent.lft AND sub_parent.rgt
        AND sub_parent.id = sub_tree.id
GROUP BY node.id
-- not showing the parent node
HAVING depth = 1
-- showing the parent node
-- HAVING depth <= 1
ORDER BY node.lft; 
```

以及由 Joomla 执行的转换后的查询：

```
// Create the subQuery select statement.
// Nested Set Queries: http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/
// CROSS JOIN: http://www.informit.com/articles/article.aspx?p=30875&seqNum=5
$subQuery->select(array('node.id', '(COUNT(parent.id) - 1) AS depth'))
    ->from($db->quoteName('#__usergroups') . 'node')
    ->join('CROSS', $db->quoteName('#__usergroups', 'parent'))
    ->where($db->quoteName('node.lft') . ' BETWEEN  ' . $db->quoteName('parent.lft') . ' AND ' . $db->quoteName('parent.rgt') . ' AND ' . $db->quoteName('node.id') . ' = ' . $db->quote('1'))
    ->group($db->quoteName('node.id'))
    ->order($db->quoteName('node.lft'));

// Create the base select statement.
$query->select(array('node.title', '(COUNT(parent.id) - (sub_tree.depth + 1)) AS depth'))
    ->from($db->quoteName('#__usergroups') . 'node')
    ->join('CROSS', $db->quoteName('#__usergroups', 'parent'))
    ->join('CROSS', $db->quoteName('#__usergroups', 'sub_parent'))
    ->join('CROSS', '(' . $subQuery .') AS sub_tree')
    ->where($db->quoteName('node.lft') . ' BETWEEN  ' . $db->quoteName('parent.lft') . ' AND ' . $db->quoteName('parent.rgt')
    . ' AND ' . $db->quoteName('node.lft') . ' BETWEEN  ' . $db->quoteName('sub_parent.lft') . ' AND ' . $db->quoteName('sub_parent.rgt')
    . ' AND ' . $db->quoteName('sub_parent.id') . ' = ' . $db->quoteName('sub_tree.id'))
    ->group($db->quoteName('node.id'))
    ->having($db->quoteName('depth') . ' = ' . $db->quote('1'))
    ->order($db->quoteName('node.lft'));

// Set the query and load the result.
$db->setQuery($query);
$rowList = $db->loadAssocList();

echo "<pre>";
print_r($rowList);
echo "</pre>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:00:36.920

不确定您用于数据库表的列，但这可能有效：

```
$query = "select * from jos_gerencia_vendas where id_edicao = ".$iddaedicao." order by names ASC"; 
```

根据您的表格列更改“名称”。

希望这可以帮助

# python - Python中的多个for循环

> ID：12060161
> 
> 赞同：1
> 
> 时间：2012-08-21T17:40:08.990
> 
> 标签：python, loops, for-loop

我正在尝试编写一个程序来考虑任何形式为 ax^2+bx+c 的三项式，但我有点卡住了。我有 4 个 for 循环序列，如下所示：

```
print "Factoring...\n"

for i in range(low_value, high_value):
    for j in range(low_value, high_value):
        for k in range(low_value, high_value):
            for l in range(low_value, high_value):
                print "testing\n"
                if i*k==a & j*l==c & (i*l)+(j*k)==b:
                    print "Your factored Equation is: (" + i + "x + " + j + ")(" + k + "x + " + l + ")"
                else:
                    print "No solution found.\n"
print "testing...\n" 
```

无论如何，我知道代码远非最佳，但 for 循环内没有任何内容正在执行。显示最后的“测试...”消息，但在此之前没有打印任何内容（我的意思是“测试”、“您的因式方程是：”或“未找到解决方案”）。Python中是否存在某种限制，我不能一次使用这么多for循环？我的语法有什么问题，我只是看不到吗？任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:44:47.213

您必须使用`and`逻辑连接，而不是“&”符号。试试这个：

```
...
if (i*k==a) and (j*l==c) and ((i*l+j*k)==b):
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T17:55:09.730

除了所述的问题之外，代码还有一些问题：:-)

*   给定 -1000 的低值和 1000 的高值，“测试”和“未找到解决方案”将被打印约 16 万亿次。
*   找到解决方案后，执行不会停止。
*   `print`as语句将代码限制为Python2，建议改用该`print(stuff)`函数。
*   `print`自动插入换行符。`\n`不需要。

这是一个建议的重写：

```
def factor(a, b, c):
    low_value = min(a, b, c)
    high_value = max(a, b, c)
    for i in range(low_value, high_value):
        for j in range(low_value, high_value):
            for k in range(low_value, high_value):
                if i*k != a:
                    # check this clause earlier to improve speed a bit
                    continue
                for l in range(low_value, high_value):
                    if j*l != c:
                        continue
                    if (i*l) + (j*k) != b:
                        continue
                    return (i, j, k, l)
    return None

print("Factoring...")
solution = factor(1, 2, 4)
if solution:
    (i, j, k, l) = solution
    print("Your factored Equation is: (" + i + "x + " + j + ")" +
          "(" + k + "x + " + l + ")")
else:
    print("No solution can be found.") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T17:59:03.287

为了使它更pythonic：

```
from itertools import product

for i, j, k, l in product(range(low, high), repeat=4):
    print i, j, k, l 
```

# safari - 如何使用 AppleScript 获取 Safari 地址栏的当前地址

> ID：12060162
> 
> 赞同：0
> 
> 时间：2012-08-21T17:40:10.067
> 
> 标签：safari, applescript, address-bar

我想用 AppleScript 从 Safari 窗口的地址栏中读取地址。

可以使用 cmd+l、cmd+c 进行击键模拟，然后读出剪贴板。但这显然是一个非常丑陋的 hack。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:55:50.533

像这样的东西应该可以在最后使用的窗口中获取活动选项卡的 URL；

```
tell application "Safari"
    set w to first window
    set t to current tab of w
    display dialog (URL of t as string)
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:43:42.463

`tell application "Safari" to URL of document 1`如果最前面的窗口不是普通的浏览器窗口，也可以使用。

您可以`tell application "System Events" to tell process "Safari" to value of text field 1 of group 2 of tool bar 1 of window 1`在 Safari 6 中获取位置栏上的文本。

# html - CSS 多个最小高度：100% 部分，带有粘性页脚

> ID：12060164
> 
> 赞同：0
> 
> 时间：2012-08-21T17:40:15.607
> 
> 标签：html, css, height

我知道有很多问题询问如何制作粘性页脚和 100% 最小高度的主容器。但是我怎样才能有多个部分并让每个部分都达到 100% 的最小高度，同时仍然将页脚推到下面呢？

我有以下内容，部分很好，100%，但页脚没有被推下。

```
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>test</title>
    <style type="text/css" media="all">
      html, body, .main-container{height:100%;}
      section{min-height: 100%;}
      .footer-container{height: 100px;}
    </style>
  </head>
  <body>
    <div class="header-container">
      <header>
        header
      </header>
    </div>
    <div class="main-container">
      <section>
        section
      </section>
      <section>
        section2
      </section>
      <section>
        section3
      </section>
    </div>
    <div class="footer-container">
      <footer>
        footer
      </footer>
    </div>
  </body>
</html> 
```

对应的jsFiddle：http: [//jsfiddle.net/S7h8s/](http://jsfiddle.net/S7h8s/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:14:37.007

带有指南针 FTW 的粘性页脚！ [http://compass-style.org/reference/compass/layout/sticky_footer/](http://compass-style.org/reference/compass/layout/sticky_footer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T23:49:22.507

我得到了这个工作，但不得不改变布局：

```
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>test</title>
    <style type="text/css" media="all">
      html, body {height:100%;}
      section{min-height: 100%;}
      .footer-container{height: 100px;}
    </style>
  </head>
  <body>
      <header>
        header
      </header>
      <section>
        section
      </section>
      <section>
        section2
      </section>
      <section>
        section3
      </section>
      <footer>
        footer
      </footer>
  </body>
</html> 
```

jsFiddle：

[http://jsfiddle.net/S7h8s](http://jsfiddle.net/S7h8s)

# html - IE：兼容性视图中的损坏内容区域

> ID：12060166
> 
> 赞同：0
> 
> 时间：2012-08-21T17:40:24.803
> 
> 标签：html, internet-explorer, css, cross-browser

我讨厌 IE。话虽如此，我似乎无法解决一个难题。

[http://cypresshh2.cakuun.com/](http://cypresshh2.cakuun.com/)

在 IE9 的兼容模式下，内容会下降。退出CV模式，很好。有什么想法吗？

# php - Force download from string

> ID：12060168
> 
> 赞同：0
> 
> 时间：2012-08-21T17:40:35.463
> 
> 标签：php, file, download, generated

**SOLVED:** Look at [this](https://stackoverflow.com/posts/comments/16107323) comment!

I have this php page echoing some xml data, which the user should save. I want the page to automatically open the "Save as" window, since the page downloading the data is called "download.**php**" this won't start a "Save as" by it self. I read a lot of other threads here on stackoverflow by people asking the same question. None of those solves my problem. So yes, I am creating a duplicate by purpose.

This is my code:

```
$file.='<bpage>';
$file.='<title>'.$_POST["title"].'</title>';
$file.='<desc>'.$_POST["desc"].'</desc>';
$file.='<cont>'.$_POST["cont"].'</cont>';
$file.='<img>'.$_POST["img"].'</img>';
$file.='<tdata>'.$_POST["tdata"].'</tdata>';
$file.='<link>'.$_POST["link"].'</link>';
$file.='<writer>'.$_POST["writer"].'</writer>';
$file.='<date>'.$_POST["date"].'</date>';
$file.='</bpage>';

header("Content-Type: application/octet-stream");
header("Content-Disposition: attachment; filename=".$_POST["title"].'.bpage');
echo $file; 
```

I am not having any "Save as" dialog, simply the usual page, as if it ignored all my headers. I am using Chrome and the latest version of PHP.

--
Regards Locercus

Edit: I am using One.com for hosting. Could they possibly be blocking the header function?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:20:12.387

好像您的 chrome 设置为自动下载文件。在这种情况下，您将看不到任何保存对话框，但文件将下载到您的默认 chrome 下载位置。

要查看保存对话框，请执行以下操作：

*   转到 Chrome 扳手菜单 > 设置 > 高级设置 > 下载并选中显示的框`Ask where to save each file before downloading`

# pagination - Is there anything like top 100 or first 100 records in cakephp find?

> ID：12060169
> 
> 赞同：0
> 
> 时间：2012-08-21T17:40:43.547
> 
> 标签：pagination, find, cakephp-2.0, limit

Here's the code I'm using to get the records. I need to know is there any thing like find first 100 or top 100 records and then paginate it. the db will contain 1000's of records ;)

```
$options = array(
        'limit' => 10,
        'recursive' => 0
        );
$this->paginate = $options;
$this->set('movies',$this->paginate()); 
```

Everything working fine, But I need just top 100 records and pagination only for that 100 records. I searched in many places, I couldn't find. Hope someone will help me :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T04:04:01.200

尝试组合`limit`和`order`选项一起获得结果。

```
array(
    'order' => array('created' => 'desc')
    'limit' => 100,
) 
```

这里“创建”是时间戳表列。如果说“top”，您的意思是最新记录，那么您应该使用“desc”，否则使用“asc”。

**更新**

我之前的示例是针对`find`功能的，而不是针对分页的。似乎您正在寻找如何将分页用于记录子集。目前没有内置选项。你应该看看其他[答案](https://stackoverflow.com/a/6152847/516219)，看看解决方案是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:51:02.660

为前 100 名创建自定义查找方法，您可以将其与分页一起使用：

示例： [http ://book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-custom-find](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-custom-find)

# c# - jQuery DateTimePicker：使用 jQuery $.Post() 在 MVC3 操作中将日期时间数据发布到 ViewModel

> ID：12060179
> 
> 赞同：3
> 
> 时间：2012-08-21T17:41:11.550
> 
> 标签：c#, jquery, asp.net-mvc-3, jquery-ui, datetimepicker

我正在尝试将使用 jQuery DateTimePicker 选择的日期从输入字段发布到 ViewModel 中的 DateTime 属性。我不断得到 1/01/0001 0:00:00 的解析。让我们看看我的视图模型：

```
public class GameViewModel
{
    [Display(Name = "Home team")]
    public virtual String Home { get; set; }

    [Display(Name = "Away team")]
    public virtual String Away { get; set; }

    [Display(Name = "Kickoff time")]
    [DataType(DataType.DateTime)]
    public virtual DateTime GameTime { get; set; }

    [Display(Name = "Standard sharing on?")]
    public virtual Boolean IsStandardSharing { get; set; }

    //Hidden
    public virtual Guid PeriodId { get; set; }

} 
```

这是我的输入框剃刀：

```
@Html.EditorFor(m => m.GameTime) 
```

最后是我的 JavaScript

```
$('#GameTime').datetimepicker({
    constrainInput: true,
    firstDay: 1,
    monthNames: ['Januari', 'Februari', 'Maart', 'April', 'Mei', 'Juni', 'Juli', 'Augustus', 'September', 'Oktober', 'November', 'December'],
    monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec'],
    dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
    dayNamesMin: ['Zo', 'Ma', 'Di', 'Wo', 'Do', 'Vr', 'Za'],
    timeText: "Tijdstip",
    hourText: "Uur",
    minuteText: "Minuut",
    currentText: "Nu",
    closeText: "Klaar",
    stepMinute: 5,
    hour: 12

});

$('#btnAddGame').click(function () {
    var testPeriodId = "245f83a2-52b5-4a21-815e-a0b40020d7ff";
    var valDdlHome = $('#Home').val();
    var valDdlAway = $('#Away').val();
    var valTxtGameTime = Date($('#GameTime').val());

    var valRdnIsStandardSharing = $('#IsStandardSharing').val();
    var postUrl = "/period/saveperiodgame/";

    $.post(
        postUrl,
        { Home: valDdlHome, Away: valDdlAway, GameTime: valTxtGameTime, IsStandardSharing: valRdnIsStandardSharing, PeriodId: testPeriodId },
        function (data) {
            if (data.Status == 200) {
                console.log("Game added. Id:" + data.Data);
                if ($('#emptyText').length > 0) {
                    $('#emptyText').hide();
                }
                MijnProno.fn.BuildPeriodGameTableRow(valTxtGameTime, valDdlHome, valDdlAway, data.Data);
            } else if (data.Status == 500) {
                console.log("Failed to add game");
            } else {
                console.log("Fault with Javascript");
            }
        }, "json"
    );
}); 
```

整个下午都在阅读并尝试回答 SO，但没有设法让它发挥作用（由于可能重复，我总是等很久才问这样的问题）。

在阅读了一些高度评价的帖子后，我想我必须像 /Date(1224043200000)/ 格式一样发布我的日期，以让我的 ViewModel 理解它。这是正确的吗？如果是这样，我怎样才能让我的 mm/dd/yyyy hh:ss 格式转换为 json？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T21:38:28.800

最后，我找到了解决这个问题的方法。[Scott Hanselman 的一篇博](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)文促使我找到了解决方案。我想我一定已经尝试了各种方法来解析我的日期，除了这个

```
//JAVASCRIPT CODE
var valTxtGameTime = $('#GameTime').val();    
new Date(valTxtGameTime).toJSON() 
```

检查我的 HTTP Post，日期现在发布为...

```
2012-08-24T19:50:00.000Z 
```

...并在我的 ViewModel 中正确接收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:47:05.083

要扩展我的评论，请尝试以下操作：

```
$.post(
    postUrl,
    { Home: valDdlHome, Away: valDdlAway, GameTime: new Date(Date.parse(valTxtGameTime)), IsStandardSharing: valRdnIsStandardSharing, PeriodId: testPeriodId },
    function (data) {
        if (data.Status == 200) {
            console.log("Game added. Id:" + data.Data);
            if ($('#emptyText').length > 0) {
                $('#emptyText').hide();
            }
            MijnProno.fn.BuildPeriodGameTableRow(valTxtGameTime, valDdlHome, valDdlAway, data.Data);
        } else if (data.Status == 500) {
            console.log("Failed to add game");
        } else {
            console.log("Fault with Javascript");
        }
    }, "json"
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T17:50:43.777

您可以通过 datepicker 本身以不同的格式解析日期。例如

```
var valTxtGameTime =  $.datepicker.parseDate('dd/mm/yy', $('#GameTime').val()); 
```

**[这](http://docs.jquery.com/UI/Datepicker/parseDate)**是完整的参考。

希望对你有帮助 ！！

# php - Magento and Amazon RDS - timeouts

> ID：12060181
> 
> 赞同：0
> 
> 时间：2012-08-21T17:41:31.457
> 
> 标签：php, mysql, magento, pdo, rds

I have a Magento CE 1.7 installation on an Amazon EC2 instance with the Magento database on an Amazon RDS Large database instance. Generally things seems to be configured ok.

However, when performing bulk import operations I am hitting some sort of 120 second failure. I kick off the import process and exactly 120 seconds in Chrome tells me:

Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data

Sure enough the import has failed.

I have tried the often given advice of the php.ini settings:

`memory_limit = 256M`

`max_execution_time = 1800`

But they don't fix it. I have tuned a number of RDS Parameter Group settings as well:

`innodb_lock_wait_timeout=120`

for example - but again no success.

It is clear that there is some hard-coded 120 second limit somewhere (i've timed it many times!) but i cannot work out what parameter is causing the issue.

I have tried cutting up the import file into small sections and it runs just fine when i do that. So its not input data related either

Any help much appreciated - have pushed 2 days into this issue already :(

TIA!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:04:05.290

我相信 ELB 负载均衡器的超时有硬性限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:03:23.460

正如 sarcksoft 所建议的，问题与负载平衡器有关。ELB 丢弃空闲 60 秒的连接。不得不通过在单独的子域上直接对 EIP 执行批处理作业来解决问题。

# android - Mono for Android fails to re-install an app assemble

> ID：12060182
> 
> 赞同：2
> 
> 时间：2012-08-21T17:41:36.040
> 
> 标签：android, xamarin.android

I successfully install the app the first time but then deleted and tried to re-install (test and debug) an app to my nexus s 4.0 android phone. I now get a deployment error. IT fails during the Installing assemblies...:

Warning message 1:

> There is a shared runtime on the device whose version cannot be determined. A new runtime will not be deployed. If the runtime needs to be replaced, please manually remove it from the device.

Warning message 2:

> There is a platform support runtime on the device whose version cannot be determined. A new platform support runtime will not be deployed. If the platform support runtime needs to be replaced, please manually remove it from the device.

Error message 1:

```
An error occurred installing the package assemblies.

Error datails: Mono.AndroidTools.AdbException: No such file or directory--->

Output Window box: _GenerateJavaStubs: ResolvedAssemblies: C:\Users\King\Mono Andriod\My Territory\My Territory\bin\Debug\MyTerritory.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v2.3\Mono.Android.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\mscorlib.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.Core.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\Mono.Security.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.Xml.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\Mono.Data.Sqlite.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.Data.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\Mono.Data.Tds.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.Transactions.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.Xml.Linq.dll ResolvedUserAssemblies: C:\Users\King\Mono Andriod\My Territory\My Territory\bin\Debug\MyTerritory.dll _AddStaticResources: Resource obj\Debug\android\assets\machine.config is unchanged. Skipping. Resource obj\Debug\android\src\mono\MonoRuntimeProvider.java is unchanged. Skipping. Resource obj\Debug\android\src\mono\android\Seppuku.java is unchanged. Skipping. _GeneratePackageManagerJava: Skipping target "_GeneratePackageManagerJava" because all output files are up-to-date with respect to the input files. _CreateBaseApk: Skipping target "_CreateBaseApk" because all output files are up-to-date with respect to the input files. _CompileJava: Skipping target "_CompileJava" because all output files are up-to-date with respect to the input files. _CompileDex: Skipping target "_CompileDex" because all output files are up-to-date with respect to the input files. _BuildApkFastDev: Skipping target "_BuildApkFastDev" because all output files are up-to-date with respect to the input files. _Mandroid: Skipping target "_Mandroid" because all output files are up-to-date with respect to the input files. _Sign: Skipping target "_Sign" because all output files are up-to-date with respect to the input files. Done Building Project "C:\Users\King\Mono Andriod\My Territory\My Territory\MyTerritory.csproj" (SignAndroidPackage target(s)).

Build succeeded. 0 Warning(s) 0 Error(s)

Time Elapsed 00:00:00.69

Waiting for device.. Removing old runtime: Mono.Android.DebugRuntime [2147483647].. Removing old runtime: Mono.Android.Platform.ApiLevel_10 [2147483647].. Removing any previous version.. Copying application to device... Getting installation path... Installing assemblies... ========== Deploy: 0 succeeded, 1 failed, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T03:49:37.513

我有同样的问题。我能够通过以下方式部署应用程序：

*   转到项目属性
*   将“链接”更改为“SDK 和用户程序集”
*   取消选中“使用共享运行时”
*   取消选中“使用快速部署（仅限调试模式）”

我不确定为什么它不起作用。我有运行 Jelly Bean (Android 4.1) 的 Galaxy Nexus。

# php - signature_invalid when trying to get request_token (Yahoo)

> ID：12060183
> 
> 赞同：0
> 
> 时间：2012-08-21T17:41:53.053
> 
> 标签：php, oauth, yahoo, yahoo-api

I started to develop a script to get contacts from Yahoo's user. Before to get contacts, I am having problem to get request token, when I perform a request for a link like this:

```
<a class="yahoo" href="https://api.login.yahoo.com/oaut/v2/get_request_token?oauth_nonce=<?php echo uniqid() ?>&oauth_timestamp=<?php echo time() ?>&oauth_consumer_key=<?php echo $yahoo_consumer_key ?>&oauth_signature_method=plaintext&oauth_signature=<?php echo $yahoo_consumer_secret ?>&oauth_version=1.0&xoauth_lang_pref=en-us&oauth_callback=<?php echo urlencode('http://myfullurl.com') ?>">Get Contacts</a> 
```

I get an HTTP header 401 Forbidden with message: oauth_problem=signature_invalid

I do not know if I am setting the link correctly but It was what I have understand through [http://developer.yahoo.com/oauth/guide/oauth-sign-plaintext.html](http://developer.yahoo.com/oauth/guide/oauth-sign-plaintext.html)

Reference: [http://developer.yahoo.com/oauth/guide/oauth-requesttoken.html](http://developer.yahoo.com/oauth/guide/oauth-requesttoken.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:04:01.803

您的调用`https://api.login.yahoo.com/oaut/v2/get_request_token`必须是服务器端调用，而不是用户必须单击的链接。

如果您不知道该怎么做，您可能应该使用一些[PHP OAuth 库](https://code.google.com/p/oauth-php/)来为您处理这个问题。

然后，正如雅虎在[他们的文档](http://developer.yahoo.com/oauth/guide/oauth-sign-plaintext.html)中所说：

> 对于 get_request_token 的请求，Token Secret 不存在。仅包括 Consumer Secret，后跟“&”字符。

你`oauth_signature`应该是：

```
&oauth_signature=<?php echo $yahoo_consumer_secret . "&" ?> 
```

# mingw - libtool：存档中的对象名称冲突（NETCDF + MinGW）

> ID：12060186
> 
> 赞同：7
> 
> 时间：2012-08-21T17:42:21.483
> 
> 标签：mingw, conflict, libtool, netcdf

我将在 Windows 中使用 NetCDF，我认为它必须使用 MinGW 编译，因为我的主程序和所有其他库已经使用 MinGW 编译。

但是当我使用 MinGW（gcc 版本 4.6.2）时。我收到一些错误消息：

```
 Making all in liblib
    make[2]: Entering directory `/c/Users/ylylyl/Documents/CB/NETCDF/netcdf-4.2.1.1/liblib'
    /bin/sh ../libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..  -I../include  -DDLL_NETCDF   -DDLL_EXPORT   -g -O2 -MT libnetcdf_la-stub.lo -MD -MP -MF .deps/libnetcdf_la-stub.Tpo -c -o libnetcdf_la-stub.lo `test -f 'stub.c' ||echo './'`stub.c
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I.. -I../include -DDLL_NETCDF -DDLL_EXPORT -g -O2 -MT libnetcdf_la-stub.lo -MD -MP -MF .deps/libnetcdf_la-stub.Tpo -c stub.c  -DDLL_EXPORT -DPIC -o .libs/libnetcdf_la-stub.o
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I.. -I../include -DDLL_NETCDF -DDLL_EXPORT -g -O2 -MT libnetcdf_la-stub.lo -MD -MP -MF .deps/libnetcdf_la-stub.Tpo -c stub.c -o libnetcdf_la-stub.o >/dev/null 2>&1
    mv -f .deps/libnetcdf_la-stub.Tpo .deps/libnetcdf_la-stub.Plo
    /bin/sh ../libtool --tag=CC   --mode=link gcc  -g -O2 -version-info 9:0:2 -no-undefined -Wl,--output-def,netcdfdll.def  -o libnetcdf.la -rpath /usr/local/lib libnetcdf_la-stub.lo ../libdispatch/libnetcdf2.la ../libdispatch/libdispatch.la ../libsrc/libnetcdf3.la    -lm
    libtool: link: gcc -shared  .libs/libnetcdf_la-stub.o  -Wl,--whole-archive ../libdispatch/.libs/libnetcdf2.a ../libdispatch/.libs/libdispatch.a ../libsrc/.libs/libnetcdf3.a -Wl,--no-whole-archive   -O2 -Wl,--output-def -Wl,netcdfdll.def   -o .libs/libnetcdf-7.dll -Wl,--enable-auto-image-base -Xlinker --out-implib -Xlinker .libs/libnetcdf.dll.a
    Creating library file: .libs/libnetcdf.dll.a
    libtool: link: (cd .libs/libnetcdf.lax/libnetcdf2.a && ar x "/c/Users/ylylyl/Documents/CB/NETCDF/netcdf-4.2.1.1/liblib/../libdispatch/.libs/libnetcdf2.a")
    libtool: link: object name conflicts in archive: .libs/libnetcdf.lax/libnetcdf2.a//c/Users/ylylyl/Documents/CB/NETCDF/netcdf-4.2.1.1/liblib/../libdispatch/.libs/libnetcdf2.a
    make[2]: *** [libnetcdf.la] Error 1
    make[2]: Leaving directory `/c/Users/ylylyl/Documents/CB/NETCDF/netcdf-4.2.1.1/liblib'
    make[1]: *** [all-recursive] Error 1
    make[1]: Leaving directory `/c/Users/ylylyl/Documents/CB/NETCDF/netcdf-4.2.1.1'
    make: *** [all] Error 2 
```

我不知道 libtool 中的问题是什么。但我确实认为 ar 命令需要更多输入。生成 libtool 脚本时可能有问题？

我在网上搜索，但找不到任何带有 fortran 和 f90 接口的 MinGW 版本的 NetCDF。请帮我一把。非常感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-23T22:03:45.943

问题是“Windows 的路径列在 PATH 中 msys 的 bin 之前。因此，与 Windows 的内置实用程序同名的 unix 实用程序不会被调用。而是调用 Windows 的。” （[http://forum.world.st/The-old-quot-object-name-conflicts-in-archive-quot-problem-on-Windows-MSYS-MinGW-td3439428.html](http://forum.world.st/The-old-quot-object-name-conflicts-in-archive-quot-problem-on-Windows-MSYS-MinGW-td3439428.html)）。将 msys 二进制文件的路径放在 PATH 的开头应该会有所帮助。

# php - Find others pictures i may like based on votes

> ID：12060187
> 
> 赞同：-1
> 
> 时间：2012-08-21T17:42:33.683
> 
> 标签：php, mysql

I found something thats look like what i'm searching but it's not : [SQL selecting people you may know](https://stackoverflow.com/questions/10980112/sql-selecting-people-you-may-know)

I have a table of pictures, and a table of votes.

```
Votes (#id_pic, date, vote, ip, id_user)
Pic (#id, date ...) 
```

So i'm trying to find other pictures that i may also like based on others votes compared to my votes (optionnaly, if i can give a picture for reference to start with, it'll be great.)

We'll admit that my id_user is 1, and if possible by taking a Pic for reference.

I think all the queries will be based on the votes table. I really don't have an idea how to start or how to do it.. if someone can give me some help, i'll appreciate.

Thanks, really.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:58:31.757

您要做的是选择与 id_user 1 匹配的所有投票，然后获取这些记录的所有 id_pic。

现在您已经拥有了您投票的所有图片，请选择 id_user 不是 1 的所有 id_pics（这将为您提供对该图片投票的所有其他用户）。

最后抓取 id_user 为 2（或其他数字）的所有 id_pics。

这个过程会占用大量资源，因此您可以考虑只为一张照片执行此操作。

# c# - Backing up multiple files then clearing it

> ID：12060188
> 
> 赞同：-1
> 
> 时间：2012-08-21T17:42:43.153
> 
> 标签：c#, process, windows-services, filesystemwatcher

I already have a windows service with a filesystemwatcher that checks for any file that has been changed (e.g. size). If a logfile has reached 1mb, it will be copied into another folder and the original logfile will be cleared.

I made a windows form project that has a button that simulates what my windows service is doing. I tried creating a forloop that will check the size of multiple textfiles. I created 3 logfiles that exceeds 1mb and ran my project. It gave a "The device is not ready" error, it's with the StreamWriter. I think that all the files are being read and backed up at the same time.

To sum it all up: How can I make it not backup all the files simultaneously? I read about processes but I think its for executables only, am I right?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:46:28.173

您是否尝试过这种方式：

```
 if(!File.Exists(filename)) //No File? Create
{
    fs = File.Create(filename);
    fs.Close();
}
if(File.ReadAllBytes().Lenght >= 100*1024*1024) // (100mB) File to big? Create new
{
    string filenamebase = "myLogFile"; //Insert the base form of the log file, the same as the 1st filename without .log at the end
    if(filename.contains("-")) //Check if older log contained -x
    {
         int lognumber = Int32.Parse(filename.substring(filename.lastIndexOf("-")+1, filename.Length-4); //Get old number, Can cause exception if the last digits aren't numbers
         lognumber++; //Increment lognumber by 1
         filename = filenamebase + "-" + lognumber + ".log"; //Override filename
    }
    else 
    {
         filename = filenamebase + "-1.log"; //Override filename
    }
    fs = File.Create(filename);
    fs.Close();
} 
```

# php - php中的图像重命名功能

> ID：12060189
> 
> 赞同：1
> 
> 时间：2012-08-21T17:42:48.580
> 
> 标签：php, image, resize

我有这段代码，它生成了两个图像。

它的作用是生成带有名称`small_test.jpg.JPG`和`test.jpg.JPG`

我需要的是生成的第一个名字是`test_s.jpg`，而第二个名字是`test.jpg`。

这需要更改我需要帮助的功能。

```
function setFile($src = null) {
  $this->ext = strtoupper(pathinfo($src, PATHINFO_EXTENSION));
  if(is_file($src) && ($this->ext == "JPG" OR $this->ext == "JPEG")) {
    $this->img_r = ImageCreateFromJPEG($src);
  } elseif(is_file($src) && $this->ext == "PNG") {
    $this->img_r = ImageCreateFromPNG($src);
  } elseif(is_file($src) && $this->ext == "GIF") {
    $this->img_r = ImageCreateFromGIF($src);
  }
  $this->img_w = imagesx($this->img_r);
  $this->img_h = imagesy($this->img_r);
}

function resize($largestSide = 100) {
  $width = imagesx($this->img_r);
  $height = imagesy($this->img_r);
  $newWidth = 0;
  $newHeight = 0;

  if($width > $height){
    $newWidth = $largestSide;
    $newHeight = $height * ($newWidth / $width);
  } else {
    $newHeight = $largestSide;
    $newWidth = $width * ($newHeight / $height);
  }

  $this->dst_r = ImageCreateTrueColor($newWidth, $newHeight);
  imagecopyresampled( $this->dst_r, 
                      $this->img_r, 
                      0, 0, 0, 0, 
                      $newWidth, $newHeight, 
                      $width, $height);
  $this->img_r = $this->dst_r;
  $this->img_h = $newHeight;
  $this->img_w = $newWidth;
}

function createFile($output_filename = null) {
  if($this->ext == "JPG" OR $this->ext == "JPEG") {
    imageJPEG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext, $this->quality);
  } elseif($this->ext == "PNG") {
    imagePNG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
  } elseif($this->ext == "GIF") {
    imageGIF($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
  }
  return $output_filename;
}

function setUploadDir($dirname) {
  $this->uploaddir = $dirname;
}

function flush() {
  $tempFile = $_FILES['Filedata']['tmp_name'];
  $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
  $targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];
  $filename = $_FILES['Filedata']['name']; 
  $ext = pathinfo($filename, PATHINFO_EXTENSION);
  $thumbnail = basename($filename,'.' .$ext) . '_s.' . $ext;    

  imagedestroy($this->dst_r);
  unlink($targetFile);
  imagedestroy($this->img_r);
}

}

$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];
$filename = $_FILES['Filedata']['name']; 
$ext = pathinfo($FileName, PATHINFO_EXTENSION);
$thumbnail = basename($FileName,'.' .$ext) . '_s.' . $ext;  
move_uploaded_file ($tempFile, $targetFile);

$image = new Image();
$image->setFile($targetFile);
$image->setUploadDir($targetPath);
$image->resize(640);
$small_file = $image->createFile('small_'.$filename);
$image->resize(100);
$large_file = $image->createFile($filename);
$image->flush();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:51:36.780

您的代码非常错误，如果不完全重新编码，我无法修复它。

你应该试试：[http](http://phpthumb.gxdlabs.com) ://phpthumb.gxdlabs.com 。这是我使用的一个，它是高性能的、无错误的和安全意识的。

它可以做很多事情，我强烈建议使用它而不是尝试制作自己的库。

# c++ - How does the compiler know what the endianness will be?

> ID：12060190
> 
> 赞同：3
> 
> 时间：2012-08-21T17:42:53.940
> 
> 标签：c++, optimization, endianness, bit-shift

I thought of using tests at runtime to determine the endianness so that I can be sure of the behaviour of shifts, and noticed a somewhat peculiar optimization by my compiler. It would suggest that the endianness of the machine it will run on is known at compile time.

These are the two routines I timed. Routine 2, which makes use of const, was about 33% faster.

```
/* routine 1 */
int big_endian = 1 << 1;
for (register int i = 0; i < 1000000000; ++i) {
  int value = big_endian ? 5 << 2 : 5 >> 2;
  value = ~value;
}
/* routine 2 */
const int big_endian = 1 << 1;
for (register int i = 0; i < 1000000000; ++i) {
  int value = big_endian ? 5 << 2 : 5 >> 2;
  value = ~value;
} 
```

The speed of routine 2 matches that of using a constant expression computable at compile time. How is this possible, if the behaviour of shifts depends on the processor?

Also, on a side note, why do we call numbers that end with the *least* significant digit *big* endian numbers, and those that end with the *most* significant digit *little* endian numbers.

**Edit:**

Some people in the comments claim bitwise shifts have nothing to do with endianness. If this is true, does that mean that a number such as 3 is always stored as `00000011 (big endian)` and never as `11000000 (little endian)?` And if this is indeed the case, which actually does seem to make sense, wouldn't it act weird when using little endian, since `10000000 00000000 00000000 (128)` shifted to the left by one would become `00000000 00000001 00000000 (256)?` Thank you in advance.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T17:46:17.940

编译器总是将构建的目标作为指令知道，并且字节序是特定于体系结构的。

大多数情况下，目标是当前机器或更通用的机器，除非您正在交叉编译。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T17:47:36.367

编译器假定目标处理器的字节序。大多数情况下，这很明显，例如 x86 始终是 little-endian。对于两种可能的架构，如果默认设置不适合您，通常会有一个编译器开关。例如，gcc/arm 有`-mlittle-endian`（默认）和`-mbig-endian`标志。

# ruby-on-rails - Handling API model validation errors to send back to client

> ID：12060193
> 
> 赞同：2
> 
> 时间：2012-08-21T17:43:14.063
> 
> 标签：ruby-on-rails, api, node.js, backbone.js, express

I am currently writing a backend JSON API built with nodejs & express but this question can probably apply to any backend API's

What is the standard way of handling model validation errors when a bad or incomplete request is sent to the server and what response should be given to the client?

Currently, my application is sending status codes if something was to go wrong. Is this enough?

Edit: I have fully functioning validations on the client side app, so I am not overly fussed, but it would be nice to have all the angles covered.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:45:56.343

无论您是否也在客户端进行验证，都应该执行服务器端验证**。**

返回任何 4xx、5xx 错误都可以，选择描述您的情况的错误。

在这些情况下，有时在保存/添加模型之前传递或等待服务器响应`{wait: true}`的选项很有用。`save``create`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:42:02.840

这取决于您的应用程序以及您希望如何处理错误。如果你想给你的用户更多的反馈除了发生错误之外的错误，你可以创建你自己的错误对象。

我根据服务器上发生的情况发回 json 错误并向用户显示任何消息。例如，在登录页面时，如果验证失败，我将设置 HTTP 状态 401（未授权），响应文本为：

```
{errors: 
   {"username": "Incorrect username and or password" }
} 
```

# python - Python Paramiko, reading line(s) from file

> ID：12060194
> 
> 赞同：0
> 
> 时间：2012-08-21T17:43:33.870
> 
> 标签：python, paramiko

First of all, I'm a noob with Python so this is gonna seem like a really easy question probably.

I'm trying to figure out how to use Python Paramiko, and have succeeded in connecting to my remote server, so I've succeeded in the first respect. What I would like to do now is to read a particular line from a file.

I've looked through Paramiko and it looks like the BufferedFile class might be able to read lines from the file. However I can't figure out how I need to load the file within the class. There is no 'open file' method, with the other methods just stating that they do things to 'the file'. The constructer doesn't take a file, so how do I load a file which I use the methods on? Probably a big thing I've missed, but I'm learning, so please excuse me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:50:32.193

您可能想要使用 SFTP 子系统。

拥有`Transport`实例并成功通过身份验证后，获取`SFTP`客户端：

```
sftp_client = my_transport.open_sftp_client() 
```

一旦你有了它，你可以使用以下`open()`方法打开一个远程文件：

```
my_file = sftp_client.open('remote_file.txt', 'r')

# use my_file, it is a file-like object, for example:
print my_file.read(100)

my_file.close() 
```

# vim - How to uninstall Janus?

> ID：12060196
> 
> 赞同：20
> 
> 时间：2012-08-21T17:43:38.897
> 
> 标签：vim, plugins, janus

I can't figure out how to uninstall [Janus](https://github.com/carlhuda/janus). I'd really like to just go back to plain VIM and MacVim. I could try to just remove the ~/.janus directory, but since Janus took a while to install I imagine there are other things and places where it installed stuff. Does anyone know a complete way to install Janus?

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-21T18:45:17.750

Janus 只是存储在`~/.vim`目录中的 vim 设置和插件的集合。Janus 有一个[引导安装程序](https://github.com/carlhuda/janus/blob/master/bootstrap.sh)，它基本上将该目录中的任何内容重命名为`whatever.old`，然后将自身克隆到该目录中。因此，反作用是删除任何不以结尾的内容`.old`，然后`.old`取消所有内容。您可以使用这些命令完成此操作。

```
cd ~/.vim
find . -not -name \*.old -delete
find . -name \*.old | while read file; do mv "$file" "${file%%.old}"; done 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-21T18:48:43.340

要卸载 janus，您可以这样做：

*   删除 ~/.vim、~/.vimrc 和 ~/.gvimrc - 如果需要自定义，可以保留 rc 文件。
*   删除 ~/.vimrc.before 和 ~/.vimrc.after。
*   删除 ~/.janus/ 目录

这应该就是全部了。

上述过程将删除您的所有自定义等以及所有插件。所以，确保你只删除你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-07T23:16:08.593

实际上，安装这些文件`janus`会导致您拥有新`.vim`文件夹、新文件夹`.vimrc`和`.gvimrc`它们链接到的文件`/Users/amerllica/.vim/janus/vim/vimrc`和`/Users/amerllica/.vim/janus/vim/gvimrc`. 也许你有你的主目录`.vimrc.after`。`.vimrc.before`

**不用**担心，安装流程会保留您以前`.vim`的路径和`.vimrc`文件。**`.vim.old`****`.vimrc.old`**

因此，毫无疑问，请执行以下操作：

```
rm -rf .vim .vimrc .gvimrc 
```

然后：

```
mv .vim.old .vim
mv .vimrc.old .vimrc
mv .gvimrc.old .gvimrc // if you had installed Gvim 
```

如果您通过以下命令拥有`.vimrc.before`或删除它们：`.vimrc.after`

```
rm -rf .vimrc.before .vimrc.after 
```

另外，请不要忘记删除*janus*：

```
rm -rf ~/.janus 
```

我希望，这个答案可以帮助你。

# entity-framework - Entity Framework code first custom fieldd that I don't want to map to DB

> ID：12060197
> 
> 赞同：8
> 
> 时间：2012-08-21T17:43:41.953
> 
> 标签：entity-framework, code-first

I'm using EF5\. In my domain class I have a field that I do not want to map to the table. But I have to make it public so that other classes can access it:

```
public class Person
{
   // these are mapped fields
   public string FirstName {get;set;}
   public string LastName  {get;set;}

   // this is intended only for in-memory storage and not saved to DB
   public string LoginFromIP {get;set;}
} 
```

The above code will generated a 'invalid column LoginFromIP' error message when I try to save a new record, because there is NO LoginFromIP in my Person table.

When I remove the setter it works. I guess EF's auto mapping requires both getter and setter. How do I keep my LoginFromIP property to the domain class only without create the field in DB table?

Thanks!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T17:52:44.630

```
[NotMapped]
public string LoginFromIP {get;set;} 
```

# css - HtmlUnit 的两个部分不能共存

> ID：12060199
> 
> 赞同：1
> 
> 时间：2012-08-21T17:43:51.067
> 
> 标签：css, dom, groovy, htmlunit

我在 Groovy 脚本中使用 HtmlUnit 来解析网页。我也希望能够检索每个元素的最终样式。这是一个测试脚本，它遍历整个页面并转储元素和属性，希望还有样式。

经过一番挖掘，我找到了[http://old.nabble.com/Access-to-element-coputed-style-td24654513.html](http://old.nabble.com/Access-to-element-coputed-style-td24654513.html)，这让我发现基本的 htmlunit Grab 调用不包括他提到的类：`com.gargoylesoftware.htmlunit.javascript.host.ComputedCSSStyleDeclaration`.

但我确实`ComputedCSSStyleDeclaration`在[http://www.jarvana.com/jarvana/view/org/jvnet/hudson/htmlunit/2.2-hudson-9/htmlunit-2.2-hudson-9.jar!/com/gargoylesoftware/找到了有关信息htmlunit/javascript/host/ComputedCSSStyleDeclaration.class?classDetails=ok](http://www.jarvana.com/jarvana/view/org/jvnet/hudson/htmlunit/2.2-hudson-9/htmlunit-2.2-hudson-9.jar!/com/gargoylesoftware/htmlunit/javascript/host/ComputedCSSStyleDeclaration.class?classDetails=ok)。

我使用该页面顶部的 Ivy 信息来构建我需要的 Grab 语句。但是，这两个条目似乎相互冲突。这是我的代码：

```
@Grab('org.jvnet.hudson:htmlunit:2.2-hudson-9')
@Grab('net.sourceforge.htmlunit:htmlunit:2.10')

import com.gargoylesoftware.htmlunit.*
import com.gargoylesoftware.htmlunit.javascript.host.*

RefreshHandler rh = new RefreshHandler() {
    void handleRefresh( final Page page, final URL url, final int seconds ) {}
}

client = new WebClient(BrowserVersion.FIREFOX_10)
client.setRefreshHandler(rh)

client.javaScriptEnabled = false
client.appletEnabled = false
client.cssEnabled = true
page = client.getPage('http://www.google.com/')
parseChildren(page.documentElement)

def parseChildren(node) {
    println "open ${node.nodeName}"
    node.attributes.each { attr ->
        println "   ${attr.key}/${attr.value.name} = ${attr.value.value}"
    }
    //ComputedCSSStyleDeclaration style = ((HTMLElement)node.getScriptObject()).jsxGet_currentStyle()
    //println "       style: ${style.dump()}"
    node.childElements.each { child ->
        parseChildren(child)
    }
    println "close ${node.nodeName}"
} 
```

如果我按上面显示的顺序运行 Grab 语句，脚本运行完美，但没有样式信息。但是，如果我尝试取消注释与 CSS 样式相关的两行，我会收到以下错误：

> 捕获：java.lang.VerifyError：com.gargoylesoftware.htmlunit.javascript.host.HTMLElement 类覆盖最终方法 jsxGet_tagName.()Ljava/lang/String；java.lang.VerifyError：com.gargoylesoftware.htmlunit.javascript.host.HTMLElement 类覆盖最终方法 jsxGet_tagName.()Ljava/lang/String；

另一方面，如果我颠倒两个 Grab 语句的顺序，我会得到这个异常：

> 捕获：groovy.lang.MissingPropertyException：没有这样的属性：FIREFOX_10 类：com.gargoylesoftware.htmlunit.BrowserVersion groovy.lang.MissingPropertyException：没有这样的属性：FIREFOX_10 类：com.gargoylesoftware.htmlunit.BrowserVersion at testHtmlUnit.run(testHtmlUnit .groovy:13)

这两者之间显然存在某种互动。看起来 hudson jar 包含一个完整但旧的 HtmlUnit 实现，当它最后出现时会覆盖当前的 2.10 版本。但是当它首先出现时，如上所示，HTMLElement 似乎与 JavaScript 实现代码中的某些内容发生冲突。

底线是我想添加从 HtmlUnit 检索 CSS 样式的功能。如果这是正确的方法，我需要让这些罐子很好地协同工作。如果这是获取这些样式的错误方法，我将不胜感激有关如何完成它的帮助。不管怎样，谢谢！

# android - com.actionbarsherlock.app 包不存在

> ID：12060208
> 
> 赞同：7
> 
> 时间：2012-08-21T17:44:20.600
> 
> 标签：android, netbeans, actionbarsherlock

当我开始使用 actionbarsherlock 时它工作得很好，但是现在当我打开我的项目时，它似乎没有找到包（“package com.actionbarsherlock.app 不存在”），但它仍然可以编译并运行。这可能是什么原因造成的？我正在使用 NetBeans。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-21T12:04:43.400

我遇到了同样的错误，我通过添加来修复它

```
compile 'com.actionbarsherlock:actionbarsherlock:4.4.0@aar' 
```

到 SlidingMenu build.gradle 的依赖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T23:12:09.280

查看：

1.  验证您的 Android API，正确的是（Google API 4.0）
2.  验证您的支持库在您的项目 n actionbarsherlock 库中是否正确（Android 工具 > 添加支持库）。
3.  验证您的编译器级别，正确​​的是 1.6。
4.  重新启动 Java 编译器。

# java - java项目中声音文件放在哪里？

> ID：12060209
> 
> 赞同：3
> 
> 时间：2012-08-21T17:44:20.697
> 
> 标签：java, audio, netbeans

我正在向使用 NetBeans 制作的 java 项目添加声音。放置声音文件的最佳位置在哪里？在包裹里？源文件夹？图书馆？新建一个文件夹？放在哪里最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:56:20.403

取决于，如果您的应用程序是可移植的 - 就像在一个单独的 jar 文件中一样 - 可以执行而无需担心资源的位置，我建议将您的 jar 文件中的所有资源打包在一个单独的包中并然后使用`getResourceAsStream`. 有关提取主包中未包含的资源的信息，请参见我的答案：[Exporting jars with resources](https://stackoverflow.com/questions/12029412/exporting-jars-with-resources/12029583#12029583)。这也有助于最终用户不会意外删除资源或资源文件夹。

但是，如果您的应用程序*安装*在用户计算机上，即*Program Files*，那么最好将其保存在您的应用程序文件夹内的单独文件夹中，因为用户不会将您的应用程序从 PC 移动到 PC，因此不会忘记复制任何资源。

# iphone - 设备和模拟器上的调试工作时，临时 iPhone SIGSEGV 崩溃

> ID：12060211
> 
> 赞同：2
> 
> 时间：2012-08-21T17:44:31.410
> 
> 标签：iphone, ios-simulator, automatic-ref-counting, asihttprequest, segmentation-fault

尝试登录后应用程序立即崩溃，因此它不是看门狗内存问题

原因：_mh_execute_header 应用程序在尝试使用 ASIHTTPRequest 发出网络请求时崩溃。请求永远不会触及服务器。ASIHTTPRequest：我使用 -fno-objc-arc 从 ARC 中省略 ASIHTTPRequest。

我相信以下调用导致了我的问题，因为当我发出请求时，我的调用甚至从未触及服务器。任何帮助将不胜感激！

称呼：

```
NSDictionary *response = [[NetworkManager sharedManager] loginWithName:name password:pwd]; 
```

方法：

```
- (NSDictionary *)loginWithName:(NSString *)name password:(NSString *)pwd
{
    NSURL *url = [NSURL URLWithString:@"http://www.test.com/keys"];
    NSArray *values = [NSArray arrayWithObjects:@"iphone", @"iphone@test.com", name, pwd, nil];
    NSArray *keys = [NSArray arrayWithObjects:@"name", @"email", @"username", @"password", nil];
    NSDictionary *response = [self startNetworkPOSTRequestWithUrl:url 
                                                       postValues:values 
                                                          forKeys:keys];
    return response;
} 
```

堆栈跟踪：

```
 Thread: Unknown Name (Crashed)
    0     libobjc.A.dylib                     0x37b9ef7e objc_msgSend + 21
    1     Test                          0x000dcda5 _mh_execute_header + 126373
    2     Test                          0x000dc4b9 _mh_execute_header + 124089
    3     Test                          0x000cd801 _mh_execute_header + 63489
    4     Test                          0x000ce39d _mh_execute_header + 66461
    5     Test                          0x000cf561 _mh_execute_header + 71009
    6     Test                          0x000d3e3d _mh_execute_header + 89661
    7     UIKit                               0x3334ccbd -[UITextField keyboardInput:shouldInsertText:isMarkedText:] + 148
    8     UIKit                               0x3334cc1f -[UIFieldEditor keyboardInput:shouldInsertText:isMarkedText:] + 94
    9     UIKit                               0x3334cbb9 -[UIKeyboardImpl callShouldInsertText:] + 108
    10   UIKit                               0x3334bb5b -[UIKeyboardImpl addInputString:fromVariantKey:] + 114
    11   UIKit                               0x3334bae1 -[UIKeyboardImpl handleStringInput:fromVariantKey:] + 164
    12   UIKit                               0x3334a775 -[UIKeyboardImpl handleKeyEvent:] + 1320
    13   UIKit                               0x334e48a3 -[UIKeyboardLayoutStar sendStringAction:forKey:isPopupVariant:] + 486
    14   UIKit                               0x33348dcd -[UIKeyboardLayoutStar touchUp:] + 3196
    15   UIKit                               0x333480fd -[UIKeyboardLayout touchesEnded:withEvent:] + 380
    16   UIKit                               0x3324b92b -[UIWindow _sendTouchesForEvent:] + 318
    17   UIKit                               0x3324b319 -[UIWindow sendEvent:] + 380
    18   UIKit                               0x33231695 -[UIApplication sendEvent:] + 356
    19   UIKit                               0x33230f3b _UIApplicationHandleEvent + 5826
    20   GraphicsServices                    0x373f022b PurpleEventCallback + 882
    21   CoreFoundation                      0x357d1523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
    22   CoreFoundation                      0x357d14c5 __CFRunLoopDoSource1 + 140
    23   CoreFoundation                      0x357d0313 __CFRunLoopRun + 1370
    24   CoreFoundation                      0x357534a5 CFRunLoopRunSpecific + 300
    25   CoreFoundation                      0x3575336d CFRunLoopRunInMode + 104
    26   GraphicsServices                    0x373ef439 GSEventRunModal + 136
    27   UIKit                               0x3325fcd5 UIApplicationMain + 1080
    28   Test                          0x000bfc1b _mh_execute_header + 7195 
```

startNetworkPOSTRequestWithUrl 方法的内容：

```
- (NSDictionary *)startNetworkPOSTRequestWithUrl:(NSURL *)url
                                      postValues:(NSArray *)values
                                         forKeys:(NSArray *)keys
{
    NSLog(@"saved user info: %@", values);
    __unsafe_unretained __block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    __block NSDictionary *response;
    int num = [values count];
    __block BOOL success = YES;

    for (int i = 0; i < num; i++)
    {
        [request setPostValue:[values objectAtIndex:i] forKey:[keys objectAtIndex:i]];
    }

    [request setDelegate:self];
    [request setUseCookiePersistence:NO];
    [request setCompletionBlock:^{
        NSString *responseString = [request responseString];
        response = [responseString JSONValue];
    }];
    [request setFailedBlock:^{
        NSError *error = [request error];
        NSLog(@"\nError: %@", error.localizedDescription);
        NSString *responseString = [request responseString];
        NSLog(@"\nError Response: %@", responseString);
        NSLog(@"\nurl: %@",url);
        success = NO;
    }];
    [request startSynchronous];

    if (success == NO)
    {
        return nil;
    }

    if (![(NSString *)[response valueForKey:@"status"] isEqualToString:@"success"])
    {
        NSLog(@"response: %@",response);
        return nil;
    }

    return (NSDictionary *)[response valueForKey:@"response"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T02:15:44.210

我发现了另一个奇怪的解决方法，可以解决我的一些问题：

在`Target > Build Settings > Apple LLVM compiler 4.0 - Code Generation > Optimization Level`我将 Ad Hoc Optimization 更改为`None`- 远离默认值的情况下`Fastest, Smallest [-Os]`，这允许我创建一个工作 ipa。

虽然这确实提供了一种解决方法，但考虑到我不进行优化可能会产生其他后果，它并不理想。

但我确实认为这暗示我的一些潜在问题与记忆有关——任何人都可以对此提供任何见解吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:25:18.203

您正在执行同步请求，因此您不需要失败块或完成块。这将摆脱所有 __block 的东西，并使它不那么奇怪的记忆明智。

```
- (IBAction)grabURL:(id)sender
{
  NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
  ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
  [request startSynchronous];
  NSError *error = [request error];
  if (!error) {
    NSString *response = [request responseString];
  }
} 
```

我从[http://allseeing-i.com/ASIHTTPRequest/How-to-use顶部得到的](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:38:38.420

谢谢兰德尔。startSynchronous 可能有点用词不当。这是方法定义：

```
- (void)startSynchronous
{
#if DEBUG_REQUEST_STATUS || DEBUG_THROTTLING
    ASI_DEBUG_LOG(@"[STATUS] Starting synchronous request %@",self);
#endif
    [self setSynchronous:YES];
    [self setRunLoopMode:ASIHTTPRequestRunLoopMode];
    [self setInProgress:YES];

    if (![self isCancelled] && ![self complete]) {
        [self main];
        while (!complete) {
            [[NSRunLoop currentRunLoop] runMode:[self runLoopMode] beforeDate:[NSDate distantFuture]];
        }
    }

    [self setInProgress:NO];
} 
```

# php - 生产错误页面中的 Symfony2 内容编码错误

> ID：12060214
> 
> 赞同：2
> 
> 时间：2012-08-21T17:44:37.000
> 
> 标签：php, apache, encoding, symfony, http-headers

我只在特定主机上遇到此错误，并且仅在 symfony2 应用程序中出现。此错误出现在所有 s2 生成的错误页面上 - 404、500 等。我在另外两台生产服务器（和 3 台本地服务器）上使用 symfony2，而这个问题从未发生过。此外，我在这台服务器上托管了许多用其他框架（例如 CodeIgniter）编写的应用程序，我从来没有遇到过这样的问题。

此问题仅出现在浏览器中，例如当点击不存在的路由时：[example live s2 app hosting on this server](http://100nazorov.sk/non-existing-route/)

当我尝试[卷曲相同的 uri](https://gist.github.com/3417637)时，我得到了正确的输出 - 一个 HTML 格式的 404 错误页面。

当我检查 http 标头时，我发现常规页面和错误页面之间的唯一区别是常规页面上的请求标头：

```
Accept-Encoding:    gzip, deflate 
```

在错误页面上我读到：

```
Accept-Encoding:    gzip, deflate, sdch 
```

我咨询了服务器管理员，他确认他的 appache 服务器中没有出现 sdch 配置。我也找不到 symfony2 会根据配置在某些服务器上强制此编码的任何信息 -**因为我没有 sdch 出现在其他机器上的此请求标头中**。

这可能也不一定是原因，但现在我一无所知..

此服务器中是否可能加载了一个导致问题的模块？我应该如何继续调查？

# c - C用于带有8051微控制器的红外温度传感器？

> ID：12060217
> 
> 赞同：-1
> 
> 时间：2012-08-21T17:44:45.913
> 
> 标签：c, sensors, 8051, temperature

大家我需要大家的大力帮助我需要知道如何将红外温度传感器与8051微控制器一起使用如果你能分享C代码我非常感谢

我使用传感器编号 MLX90614ESF-BAA

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T01:55:38.783

这是一些[8051 C 代码](http://www.lynxmotion.net/viewtopic.php?f=4&t=6385&start=15)，它设置并从 MLX90614ESF-BAA 的输出读取 PWM 长度并转换为温度。它可能不是你所拥有的确切部分，但我猜芯片 PWM 输出对于所有 MLX90614 部分都是相同的。

# antlr - antlr 两个重写规则 ID INT 和 ^(INT ID) 之间的区别

> ID：12060219
> 
> 赞同：0
> 
> 时间：2012-08-21T17:44:46.137
> 
> 标签：antlr, antlr3

在 antlr 文档中，我看到了以下两条规则，但它们的描述听起来完全一样。这两个规则有什么区别...

```
a : INT ID -> ID INT ; // reorder nodes
a : ^(ID INT) -> ^(INT ID) ; // flip order of nodes in tree 
```

另外，为什么不这样写第二条规则，或者那会和第一条规则一样，所以规则之间没有区别？

```
a : ^(INT ID) -> ^(ID INT) ; 
```

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:18:25.930

*   `^(INT ID)`手段`INT`是根，`ID`子。
*   `INT ID`表示`INT`和`ID`都是子节点。

# c++ - 无法解决内存泄漏

> ID：12060224
> 
> 赞同：0
> 
> 时间：2012-08-21T17:45:01.987
> 
> 标签：c++, memory-leaks

我无法解决我的小程序中的内存泄漏问题。一些代码最初是用 Java 创建的，所以我将它“转换”为 C++（其中一些事情可能看起来很奇怪，所以如果你有更好的解决方案，请告诉我——我对 C++ 中的 OOP 很陌生）。我的目的是创建一个随机高度图生成器。有 2 个内存泄漏（使用 Visual Leak Detector 发现）：

第一个在这里触发：

```
-> Mountain* mount = new Mountain(size, Utils::powerOf2Log2(size) - 6, 0.5f, seed);
   ChannelClass* height = mount->toChannel(); 
```

因此在“Mountain”类构造函数中：

```
channel = new ChannelClass(size, size); 
```

我试图使用这样的关闭方法：

```
mount->ShutDown();
delete mount;
mount = 0; 
```

使用 Shutdown() 定义如下：

```
if(channel){
    channel->ShutDown();
    delete channel;
    channel = 0;
} 
```

“ChannelClass”的 ShutDown() 方法正在删除一个浮点数组。我最初的想法是，“ChannelClass* height = mount->toChannel()”可能会在那里引起问题。

如果您需要更多代码，请告诉我！提前感谢任何愿意提供帮助的人！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T18:33:58.603

好的，所以如果没有更多代码，这将是非常普遍的。这些是最优先的指南（不是规则）。

首先，关于 C++11 的快速说明：如果您没有它，请在`std::unique_ptr`下面替换为`std::auto_ptr`（尽管出于某种原因已弃用它，所以要小心），或者改用[boost::scoped_ptr](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/scoped_ptr.htm)。

## 1.不要使用`new`

如果您需要创建一个（单个）山并且*不需要*在声明它的范围之外使其保持活动状态，只需将其用作具有自动范围的常规变量：

```
void automatic_scope(int size, double seed)
{
    Mountain hill(size, Utils::powerOf2Log2(size) - 6, 0.5f, seed);
    // ... mountainous operations happen here ...
}   // hill is destroyed here - is that ok for you? 
```

同样，如果一座山*拥有*一个 ChannelClass，它的寿命应该与*拥有*它的山一样长，只需执行以下操作：

```
class Mountain
{
    ChannelClass channel;

public:
    Mountain(int size, int powerthing, double something, double seed)
    : channel(size, size) // initialize other members here
    {
        // any more initialization
    }

    ChannelClass& toChannel() { return channel; }
}; 
```

现在`ChannelClass`，只要`Mountain`，一切都会自动销毁，并且不需要显式关闭。

## 2.不要使用`new[]`

同样，如果您需要几座范围有限的山脉，只需使用

```
void automatic_scope_vector(int size, double seed)
{
    std::vector<Mountain> hills;
    hills.push_back(Mountain(size, Utils::powerOf2Log2(size) - 6, 0.5f, seed));
    // ... mountainous operations happen here ...
}   // hills are all destroyed here 
```

## 3.好的，`new`毕竟使用

显然有使用 new*的*正当理由：已经提到了一个（你需要让你的山脉比你创建它们的街区更长）。

另一个是如果您需要运行时多态性，例如，如果您有多个 or 的子类`Mountain`，`ChannelClass`但您想处理基类。

我们可以用多态工厂函数来说明两者：

```
class Molehill: public Mountain { ... };
class Volcano: public Mountain { ... };

std::unique_ptr<Mountain> make_mountain(int size, double seed, bool is_molehill)
{
    std::unique_ptr<Mountain> result;
    if (is_molehill)
        result.reset(new Molehill(size, size/2, 0.01f, seed));
    else
        result.reset(new Volcano(size, size*2, 0.5f, seed));
    return result;
}

void automatic_scope_polymorphic(int size, double seed, bool is_molehill)
{
    std::unique_ptr<Mountain> hill = make_mountain(size, seed, is_molehill);
    // ... polymorphic mountainous operations happen here ...
}   // hill is destroyed here unless we gave the unique_ptr to someone else 
```

同样，如果`ChannelClass` *需要*动态创建山，请将*其*存储在`unique_ptr`.

在您需要复制对象以传递它们的情况下，有时它也可能会有所帮助，复制非常昂贵，并且您不能依赖（或还没有）RVO 或移动语义。这是一个优化，所以不要担心它，除非分析表明这是一个问题。

* * *

## 哲学

这些 C++ 习惯用法都基于*确定性破坏*，其目标是完全避免编写显式清理代码*。*

将内存管理委托给容器（如`std::vector`）和智能指针（如`std::unique_ptr`）避免了 Java 通过垃圾收集处理的内存泄漏。然而，它有力地推广到[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)，其中类似的自动范围保护对象可以自动管理*所有*资源，而不仅仅是内存。例如，`std::lock_guard`确保即使一个函数有多个返回路径、可能抛出异常等，互斥锁也被正确释放。

如果您*确实*需要编写显式清理代码：不要编写必须调用的自定义关闭方法，只需将其放在*析构函数*中即可。如果可能，也将其推送到低级别的保护对象中。

# rest - Erlang YAWS：如何测试一个简单的 REST Web 服务？

> ID：12060231
> 
> 赞同：7
> 
> 时间：2012-08-21T17:45:29.517
> 
> 标签：rest, erlang, erlang-otp, yaws, eunit

在一个简单的基于 Erlang YAWS 的 RESTful 应用程序中，我希望有一组测试将 HTTP 请求发送到 RESTful API，从服务器获取响应，然后测试这些响应。

如果每个“send-request-get-request-test”测试都可以在 EUnit 中运行（可以使用测试生成器），那就太好了。

我还希望能够使用`rebar`( `make test`) 运行这组测试。

最近我在另一个应用程序（Mochiweb）中使用过，但我发现它使用起来很麻烦[。](https://stackoverflow.com/questions/10639051/mochiweb-include-and-compile-other-libraries) `ibrowse`

是否有任何其他选项可以编写可以将 HTTP 请求发送到 YAWS RESTful 应用程序的 Erlang/OTP 测试？最常见的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T22:47:10.670

您是否尝试[过 etest](https://github.com/wooga/etest)尤其是[etest_http](https://github.com/johannesh/etest_http)？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T08:59:34.760

我使用 common_test 和 ibrowse 来测试基于 REST 的服务。

1.  它是 erlang 发行版的一部分
2.  您可以从钢筋调用测试
3.  你可以配置你的测试，所以并行运行，顺序....

看看这个演示文稿：[http ://www.erlang-factory.com/upload/presentations/275/CommonTestPresentation.pdf](http://www.erlang-factory.com/upload/presentations/275/CommonTestPresentation.pdf)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T06:09:28.800

你可以使用[`Tsung`](http://tsung.erlang-projects.org/)，但这就是我要做的：我会使用一个好的`HTTP Client`like编写一个大规模线程测试器`curl`，或者`ibrowse`从不同的机器上运行。然后根据我想要的进行测试。

**编辑**

* * *

现在，在 erlang 库中拥有 ibrowse 库，重新编译并将其 ebin 放在代码路径中。

```
%% 确保 Ibrowse 已启动

确保ibrowse()->
    case whereis(ibrowse) 的
        未定义-> ibrowse:start();
        任何时候 is_pid(Any)-> ok
    结尾。

%% 发出获取请求

do_get(链接)->
    试试 ibrowse:send_req(Link,[],get) 的
        {ok,_,_,结果} ->
                %% 结果可能是 JSON 在这种情况下你会
                %% mochijson2:decode(结果)
        其他 -> {错误，其他}
    抓住
        E1:E2 -> {异常，{E1,E2}}
    结尾。

%% 保存对文件的响应

保存到文件（链接）->
    尝试 ibrowse:send_req(Link,[],get,[],[{save_response_to_file,true}]) 的
        {ok,_,_,{file,FilePath}} ->
            %% 对文件做任何事情，
            %%------------------------------------------------ --------
            %% 喜欢 {ok,FileHandle} = file:open(FilePath,[read])
            %%------------------------------------------------ -----
            %% OR {ok,Contents} = file:read_file(FilePath)
            %%------------------------------------------------ --------
            %% 或者如果响应是 .zip 文件
            %% {ok,FileList} = zip:unzip(FilePath),
            %% [开始 process_file_contents(element(2,file:read_file(F))) 结束 || F <- 文件列表]
            %%------------------------------------------------ --------------------------------
     其他 -> {错误，其他}
    抓住
        E1:E2 -> {异常，{E1,E2}}
    结尾。

%% 做一个 POST
%% 通常，如果你使用 mochijson 来编码 erlang 术语
%% 到 JSON，你将::
%% JSON = list:flatten(mochijson:encode({struct,[Terms]}))

发布（链接，JSON）->
    试试 ibrowse:send_req(Link,[],post,JSON,[]) 的
        {_,_,_,结果} ->
                尝试 mochijson2:decode(Result) of
                    {struct,[{<<"key1">>,<<"value1">>},...]} -> 
                      %% 继续
                    JSONOther -> {错误，JSONOther}
                抓住
                    R:R2 -> {异常，{R:R2}}
                结尾;
            任何 -> erlang:throw({write_failed,Link,Any})
        抓住
            E1:E2 -> {异常，{E1,E2}}
        结尾。

%% 发出 put 请求
%% 与 Post 相同，只需将原子 'post' 更改为 'put' 

%% 将标头添加到请求中

发布（链接，JSON）->
    标头 = [{"Content-Type","application/json"}],
    尝试 ibrowse:send_req(Link,Headers,post,JSON,[]) of 
      {_,_,_,Re​​sult} ->
                尝试 mochijson2:decode(Result) of
                    {struct,[{<<"key1">>,<<"value1">>},...]} -> 
                      %% 继续
                    JSONOther -> {错误，JSONOther}
                抓住
                    R:R2 -> {异常，{R:R2}}
                结尾;
            任何 -> erlang:throw({write_failed,Link,Any})
        抓住
            E1:E2 -> {异常，{E1,E2}}
        结尾。
```

如果您未能在代码路径中安装 ibrowse，请告诉我们

# eclipse - http 503 错误 gwt 码头服务器 SERVICE_UNAVAILABLE

> ID：12060233
> 
> 赞同：3
> 
> 时间：2012-08-21T17:45:46.350
> 
> 标签：eclipse, google-app-engine, gwt, jetty

在 Web 浏览器中运行项目时，我从 Eclipse 集成码头服务器收到 503 错误。我收到此错误，因为我更改了项目的 gae 应用程序 ID。

```
java.lang.ClassNotFoundException: com.google.api.server.spi.SystemServiceServlet
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.mortbay.util.Loader.loadClass(Loader.java:91)
at org.mortbay.util.Loader.loadClass(Loader.java:71)
at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:224)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:191)
at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
    21.08.2012 16:09:42 com.google.appengine.tools.development.ApiProxyLocalImpl log
    SCHWERWIEGEND: javax.servlet.ServletContext log: unavailable
    javax.servlet.UnavailableException: com.google.api.server.spi.SystemServiceServlet
at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:79)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:224)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at   com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerS ervice.java:191)
at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)

    21.08.2012 16:09:42 com.google.apphosting.utils.jetty.JettyLogger warn
    WARNUNG: failed SystemServiceServlet: java.lang.NullPointerException
    21.08.2012 16:09:43 com.google.apphosting.utils.jetty.JettyLogger warn
    WARNUNG: Failed startup of context    com.google.appengine.tools.development.DevAppEngineWebAppContext@9f4160a{/,C:\Users\dp\work        space\fooApp\war}
    java.lang.NullPointerException
     at java.lang.Class.isAssignableFrom(Native Method)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:224)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:191)
at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
    21.08.2012 16:09:46 com.google.appengine.tools.development.DevAppServerImpl start
    INFO: The server is running at http://localhost:8888/
    21.08.2012 16:09:46 com.google.appengine.tools.development.DevAppServerImpl start
    INFO: The admin console is running at http://localhost:8888/_ah/admin 
```

这是我的 web.xml 文件

```
<!-- Default page to serve -->
<welcome-file-list>
   <welcome-file>fooApp.html</welcome-file>
</welcome-file-list>
<servlet>
   <servlet-name>phonegapfileapi</servlet-name>
   <servlet           class>com.googlecode.gwtphonegap.server.file.FileRemoteServiceServlet</servlet-class>
   </servlet>
   <servlet-mapping>
      <servlet-name>phonegapfileapi</servlet-name>
      <url-pattern>/showcase/phonegapfileapi</url-pattern>
   </servlet-mapping>
   <servlet>
       <servlet-name>SystemServiceServlet</servlet-name>
       <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
       <init-param>
          <param-name>services</param-name>
       <param-value/>
     </init-param>
   </servlet>

   <servlet-mapping>
      <servlet-name>SystemServiceServlet</servlet-name>
      <url-pattern>/_ah/spi/*</url-pattern>
   </servlet-mapping> 
```

所有的罐子都在 fooApp/war/WEB-INF/lib 我怎么能解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:51:23.923

我遇到了同样的问题。只有当您想在码头中部署 Web 管理 servlet 时，似乎才需要 SystemServiceServlet。

在我的情况下，问题是 GAE eclipse 插件默认使用**GAE Java SDK 1.6**，并且包 com.google.api.server 甚至不存在。我通过手动将 SDK 设置为**GAE SDK 1.7**来修复它。

更改 SDK 时要小心，我尝试更改默认 SDK，但仍然遇到此问题，直到我选择指向 1.7 的“使用特定 SDK”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T23:52:57.420

我正在使用maven，但遇到了同样的问题。使用 maven，我们没有在项目属性中设置 SDK 版本，而是有这个插件：

```
<plugin>
    <groupId>com.google.appengine</groupId>
    <artifactId>appengine-maven-plugin</artifactId>
    <version>1.8.3</version> 
```

**解决异常**： `Window/Show View/Other... > Servers/Server`然后右键单击使用的AppEngine服务器然后单击`Clean...`。

*注意：这将擦除您的本地开发数据存储*，因此如果您想保留数据，请备份文件：

> .../workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp${SERVER_NUM}/${DEPLOYED_APP_NAME}/WEB-INF/appengine-generated/local_db.bin

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-03T10:47:47.863

在我的情况下的解决方案 - 只需在任务管理器中杀死所有 javaw.exe *32 进程。

# php - 缓存 PHP 内容的建议

> ID：12060240
> 
> 赞同：0
> 
> 时间：2012-08-21T17:45:58.353
> 
> 标签：php, caching

所以我的网站开始使用过多的资源。我网站的核心是一个编码错误的 vbulletin 插件。不幸的是，切换并不是那么容易，所以我只需要尝试重写一些东西，但最重要的是：附加不同参数的主页需要太多的处理能力，比如 ?image.php?id=1和 ?image.php?id=2.. 等等。

无论如何，我需要一些可以用来为每个 id 将这些页面缓存在 html 中的东西，它们并不会经常更改，只有在发布评论时才会更改，因此每次都加载它们是没用的。我以前从未使用过这样的东西，所以非常欢迎任何提示、提示、软件使用

编辑：我问的原因是因为我的主机上的处理器使用率开始达到高位，如果我有更多的访问者，我可能会被暂停。

编辑：我在想一个类似这样的系统：一个数据库，其中包含每个 ?id 以及上次修改的日期（如添加的评论或其他内容）如果日期早于保存为 html 的最后一个缓存版本，则加载 html , 否则运行 php 脚本并生成一个新的缓存 html。我想我可能不得不自己做这样的事情，只是不太清楚如何开始做这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:49:38.733

`image.php`您可以在最顶部添加这些

```
header("Cache-Control: private, max-age=10800, pre-check=10800");
header("Pragma: private");
header("Expires: " . date(DATE_RFC822, strtotime("2 day")));

if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE'])) {

    header('Last-Modified: ' . $_SERVER['HTTP_IF_MODIFIED_SINCE'], true, 304);
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:59:33.660

你现在真正的问题在哪里？数据库调用或提供静态内容？

在我看来，您应该从使用本地文件系统的简单缓存开始。你能缓存你提到的最慢的页面吗？如果是这样，您可以编写自己的简单缓存代码，只需将文件写入磁盘并在它尚未过期/无效时从那里加载它。

还有其他的东西，比如 APC、memcaced，它们也可能对你有帮助。快速的谷歌搜索将为您提供低谷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:02:35.647

您可以为客户端缓存实现上述代码，至于服务器端，您可以将处理后的图像（如果 vbulletin 对图像/调整大小/裁剪等导致高内存使用率）存储到文件中（在某些缓存目录中），所以 PHP每次调用脚本时都不必处理它们。

算法本身应该包括散列 vbulletin 所需的 $_GET 参数，例如`id=2`or `width=250`，`height=250`

所以代码看起来像......

```
$file = 'cache_dir/'.md5('file_cached_'.$_GET['id'].'_w'.$_GET['width'].'_h'.$_GET['height']).'.jpg';
if ( ! file_exists($file))
{

  $image = get_image_by_id($_GET['id']);

  // this is just example...
  $image_blob = vbulletin_heavy_image_processing($image);

  file_put_contents($file, $image_blob);
  echo $image_blob;
}
else 
{
  echo file_get_contents($file);
} 
```

# android - 在 Android 上删除重复事件的实例时更改列值

> ID：12060242
> 
> 赞同：0
> 
> 时间：2012-08-21T17:46:04.507
> 
> 标签：android, android-calendar, android-event

有谁知道当用户删除重复事件的一个实例时事件表上的哪些列值发生了变化？

我一直在阅读[CalendarContract.EventsColumns](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html)，他们在一开始就谈到了经常性事件，但我找不到比这更多的信息。

我也一直在对事件表进行查询，结果是：

- 当我创建一个事件（具有任意数量的实例）时，我可以在该事件的表上找到一个条目。- 当我删除一个实例（我一直在尝试事件的最后一个实例）时，我可以找到该事件的两个条目。第一个条目是我在开始时创建的事件，所有列的值都等于创建的事件，第二个条目是删除当天的新事件，删除的值为 false。

所以有人知道吗？干杯， Dporem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:19:30.707

所以估计没人知道...

我一直在调查更多，我发现了这些专栏：

在 Android SDK >= 14 上，我们有：

*   [ORIGINAL_ID](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#ORIGINAL_ID)
*   [ORIGINAL_SYNC_ID](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#ORIGINAL_SYNC_ID)
*   [ORIGINAL_INSTANCE_TIME](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#ORIGINAL_INSTANCE_TIME)
*   [ORIGINAL_ALL_DAY](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#ORIGINAL_ALL_DAY)

在 Android SDK < 14 上，我们有：

*   [ORIGINAL_ID](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#ORIGINAL_ID)
*   [ORIGINAL_INSTANCE_TIME](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#ORIGINAL_INSTANCE_TIME)
*   [ORIGINAL_ALL_DAY](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#ORIGINAL_ALL_DAY)

此列仅在第二个事件上更改（此事件是在您删除重复事件的实例/条目时创建的）。在第一个事件中，它们保持为空。

# asp.net-mvc - 一对一关系和删除记录

> ID：12060247
> 
> 赞同：0
> 
> 时间：2012-08-21T17:46:25.513
> 
> 标签：asp.net-mvc, entity-framework

我首先使用带有 ASP.NET MVC3 代码的实体框架。

我有一个这样的项目实体和徽标：

```
public class Project
{
    [Key]
    public int      ProjectID   { get; set; }
    public string   Name        { get; set; }
    public string   Description { get; set; }        

    public virtual  Logo Logo   { get; set; }
}

public class Logo
{
    [Key]
    public int    LogoID          { get; set; }
    public string LogoName        { get; set; }
    public byte[] LogoContent     { get; set; }
    public string LogoContentType { get; set; }
} 
```

每个项目可以附加 0 或 1 个徽标。

创建我的数据库（sql server）时，我看到在表 Project 中创建了一个字段用于引用徽标。

![在此处输入图像描述](../Images/cceb7a680f7a92a16d7962114f353845.png)

每当我的 Project 表中有一个项目引用徽标时，我都会在 Logo_LogoID 中填充徽标表中的相应键。没关系对我来说。对我来说似乎很奇怪的是，当我删除徽标时，sql server 向我显示以下错误：

![在此处输入图像描述](../Images/0466a6a9aa0a08dc7c77c8dab8d0cf95.png)

因此，为了能够从我的 Logo 表中删除徽标，我需要首先从 Project 表中断开引用（通过将 LogoID 替换为 NULL），然后从 Logo 中删除该行。

也许有更好的方式来引用事物？

这似乎是一个愚蠢的问题。

我认为更好的解决方案是具有反向关系：在 Logo 表中添加 ProjectID 字段。所以每当我需要删除一个标志时，我都可以轻松地删除这个标志。

你怎么看？

谢谢。

编辑

就像 Mark Oreta 建议的那样，我尝试过：

```
 modelBuilder.Entity<Project>()
            .HasOptional(p => p.Logo)
            .WithOptionalPrincipal(); 
```

但我得到了对 ProjectID 的双重引用：

![在此处输入图像描述](../Images/13e385db030e38f9a60643f418b1d102.png)

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:10:26.970

您可以通过在 DbContext 中覆盖 OnModelCreating 来更改映射：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Project>()
            .HasOptional(p => p.Logo)
            .WithOptionalPrincipal();
    } 
```

这将在您的 Logo 实体上创建一个 Project_ProjectID。

如果您想自定义名称 - 您说您可以接受，但您可能想稍后更改它，您可以将其添加到末尾：

```
.Map(m => m.MapKey("ProjectId") 
```

它将映射到您的 Logo 实体上的 ProjectId。

# java - 使用 Java 忽略 SSL 证书错误

> ID：12060250
> 
> 赞同：9
> 
> 时间：2012-08-21T17:46:38.180
> 
> 标签：java, jakarta-ee, ssl, ssl-certificate

Apache Http 客户端。[您可以在此处](https://gist.github.com/3417669)查看相关代码：

```
String url = "https://path/to/url/service";
HttpClient client = new HttpClient();
PostMethod method = new PostMethod(url);

// Test whether to ignore cert errors
if (ignoreCertErrors){
  TrustManager[] trustAllCerts = new TrustManager[]{
    new X509TrustManager(){
      public X509Certificate[] getAcceptedIssuers(){ return null; }
      public void checkClientTrusted(X509Certificate[] certs, String authType) {}
      public void checkServerTrusted(X509Certificate[] certs, String authType) {}
    }
  };

  try {
    SSLContext sslContext = SSLContext.getInstance("SSL");
    sslContext.init(null, trustAllCerts, new SecureRandom());
    HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());
  } catch (Exception e){
    e.printStackTrace();
  }
}

try {

  // Execute the method (Post) and set the results to the responseBodyAsString()
  int statusCode = client.executeMethod(method);
  resultsBody = method.getResponseBodyAsString();

} catch (HttpException e){
  e.printStackTrace();
} catch (IOException e){
  e.printStackTrace();
} finally {
  method.releaseConnection();
} 
```

这是每个人都说用来忽略 SSL 证书错误的方法（仅将其设置为暂存，不会在生产中使用）。但是，我仍然收到以下异常/堆栈跟踪：

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building unable to find valid certification path to requested target 
```

任何提示都会很棒。如果我做错了 TrustManager，或者我应该以不同的方式执行 HTTP Post 方法，无论哪种方式。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T18:28:49.893

首先，不要*忽略*证书错误。而是与他们打交道。忽略证书错误会打开与潜在 MITM 攻击的连接。这就像关闭烟雾报警器中的蜂鸣器一样，因为有时它会发出噪音......

当然，很容易说它仅用于测试代码，它不会最终投入生产，但我们都知道在截止日期临近时会发生什么：代码在测试时不会显示任何错误 -> 我们可以发布它照原样。如果需要，您应该设置一个测试 CA。制作起来并不难，整个过程肯定不比引入自定义代码进行开发并在生产中删除它更难。

您显然正在使用 Apache Http 客户端：

```
HttpClient client = new HttpClient();
int statusCode = client.executeMethod(method); 
```

然而，你正在`javax.net.ssl.HttpsURLConnection`用`SSLContext`你创建的初始化：

```
HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory()); 
```

这完全独立于 Apache Http Client 设置。

相反，您应该`SSLContext`为 Apache Http Client 库设置 ，如[本答案](https://stackoverflow.com/a/10406233/372643)中所述。如果您使用的是 Apache Http Client 3.x，则需要自行设置`SecureProtocolSocketFactory`以使用它（参见[此处](http://code.google.com/p/jsslutils/wiki/ApacheHttpClientUsage)`SSLContext`的示例）。不过值得升级到 Apache Http Client 4.x，它直接支持.`SSLContext`

您还可以使用[Pascal 的答案](https://stackoverflow.com/a/1828832/372643)正确导入证书。同样，如果您遵循该问题的公认答案（凯文），您确​​实会忽略该错误，但这会使连接容易受到 MITM 攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-02T09:41:07.130

HttpClient 4.3，很简单，

```
 HttpClientBuilder cb = HttpClientBuilder.create();
     SSLContextBuilder sslcb = new SSLContextBuilder();
     sslcb.loadTrustMaterial(KeyStore.getInstance(KeyStore.getDefaultType()), new TrustSelfSignedStrategy());
     cb.setSslcontext(sslcb.build());
     CloseableHttpClient httpclient = cb.build(); 
```

那应该可以解决您的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-28T12:40:29.397

如果你真的想忽略这对我有用的一切：

```
SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(new TrustStrategy() {
    @Override
    public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        return true;
    }
}).build();
HostnameVerifier hnv = new NoopHostnameVerifier();      
SSLConnectionSocketFactory sslcf = new SSLConnectionSocketFactory(sslContext, hnv);     
CloseableHttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslcf).build() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-16T01:53:31.790

忽略证书有其自身的危害，因为相同的代码可以在生产环境中移动，并可能造成严重破坏。

下面的例子是**Jersey Rest Client**

```
private static final com.sun.jersey.api.client.Client client = com.sun.jersey.api.client.Client.create(configureClient());
final com.sun.jersey.api.client.WebResource webResource = client.resource("url");
try {
    com.sun.jersey.api.client.ClientResponse response = webResource.type(MediaType.APPLICATION_JSON_TYPE)
                            .accept(MediaType.APPLICATION_JSON_TYPE)
                            .get(com.sun.jersey.api.client.ClientResponse.class);
}catch(com.sun.jersey.api.client.ClientHandlerException che){
    che.printStackTrace();  
} 
```

忽略证书可以如下：

```
public static ClientConfig configureClient() {
    TrustManager[ ] certs = new TrustManager[ ] {
            new X509TrustManager() {
                public X509Certificate[] getAcceptedIssuers() {
                    return null;
                }
                public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {}
                public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {}
            }
    };
    SSLContext ctx = null;
    try {
        ctx = SSLContext.getInstance("SSL");
        ctx.init(null, certs, new SecureRandom());
    } catch (java.security.GeneralSecurityException ex) {
    }
    HttpsURLConnection.setDefaultSSLSocketFactory(ctx.getSocketFactory());

    ClientConfig config = new DefaultClientConfig();
    try {
        config.getProperties().put(HTTPSProperties.PROPERTY_HTTPS_PROPERTIES, new HTTPSProperties(
                new HostnameVerifier() {
                    public boolean verify(String hostname, SSLSession session) {
                        return true;
                    }
                },
                ctx
        ));
    } catch(Exception e) {
    }

    return config;
} 
```

# javascript - 尝试通过带有 IE 的输入类型文件将 img 标记的来源设置为本地内容

> ID：12060254
> 
> 赞同：0
> 
> 时间：2012-08-21T17:46:45.463
> 
> 标签：javascript, jquery, internet-explorer

所以，我所做的是上传文件框，它允许您选择要上传的文件。然后，这将指向一个文件，例如：“C:\Users\Public\Pictures\Sample Pictures\Koala.jpg” 然后我想要做的是它有一个图像标签，它来自该文件。

```
var filepath = data.value;   //data is the file. returns above C:\\
var value = "file:\\\\" + filePath;
$imgTag.attr("src",value);
return; 
```

我相当肯定这会奏效，但似乎不行。你们都做什么？

这是需要在 IE7+ 中使用的东西，除非我弄错了，否则 HTML5 不适用于该浏览器类型。

**更新：它似乎在图像标签中显示了一个绿色的小图标，表明它现在被正确引用，但它似乎只是没有显示。是否有一些我没有正确显示图像的地方？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:50:50.523

Html5 允许您读取在文件元素中选择的文件。然后，您可以在 img 元素中显示该数据。但您不能直接引用用户系统上的图像。--找到的例子：[http ://www.xul.fr/en/html5/filereader.php](http://www.xul.fr/en/html5/filereader.php)

对于 IE，我唯一能想到的是将文件元素放在 iframe 中，在选择后立即上传并让服务器返回文件。

可能有更好的方法，但我不知道。我认为您需要闪存或具有更多权限的东西来执行此操作。

# search - 在进入我的网站之前如何找出在谷歌搜索的内容？

> ID：12060259
> 
> 赞同：1
> 
> 时间：2012-08-21T17:46:54.943
> 
> 标签：search

正如我所提到的，我想在谷歌搜索结果中点击我的网站之前得到谷歌搜索的确切内容

我的网站是 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:48:52.503

您想使用 HTTP_REFERER[服务器变量](http://php.net/manual/en/reserved.variables.server.php)来确定用户来自哪里：

```
$refererUrl = $_SERVER['HTTP_REFERER']; 
```

您还可以使用[Google Analytics](http://www.google.com/analytics/)之类的工具来为您执行跟踪。

# nosetests - 在多类 python 文件中为特定类运行测试的鼻子测试 -m 不起作用！！！！啊啊啊

> ID：12060266
> 
> 赞同：3
> 
> 时间：2012-08-21T17:47:31.073
> 
> 标签：nosetests

我已经解决这个问题一天了。:( 想不通。请帮忙。我有这个设置：

class Parent(object): pass # 常见的东西放在这里

class A(Parent, unittest.TestCase): pass # A stuff here

class B(Parent, unittest.TestCase): pass # B stuff here

我想使用鼻子测试只运行 B 类和父类的测试，因为 B 继承自父类。我以为我会使用 -m 或 --match 来放置类名，但它似乎不起作用。

默认匹配使用 --match is '(?:^|[\b_./-])[Tt]est'

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T00:12:36.993

首先，查看[Nose 关于测试选择的文档](https://nose.readthedocs.org/en/latest/usage.html#selecting-tests)。这比您尝试做的要容易得多！如果所有测试类`A`都`B`在一个名为 的文件中`mytests.py`，则此命令将只运行类的测试`A`：

```
nosetests mytests.py:A 
```

您可以进一步将执行限制为 class 的单个方法`A`：

```
nosetests mytests.py:A.testOne 
```

这些可以组合。要运行所有测试方法`A`并且只运行 的`testTwo`方法`B`，试试这个：

```
nosetests mytests.py:A mytests.py:B.testTwo 
```

# grails - Grails 从公司防火墙后面安装一个插件，阻止访问

> ID：12060268
> 
> 赞同：4
> 
> 时间：2012-08-21T17:47:31.920
> 
> 标签：grails, grails-plugin

Grails 插件的页面是可以访问的，但是当我尝试从命令提示符安装插件时，它被我们的公司防火墙阻止了。

我看到你可以下载插件（我要安装的是 spring-security-core）然后安装它。但是 spring-security 页面中提供的下载并没有下载所有内容。有没有可以下载整个插件然后手动安装的链接/地方？

**更新**
安装时遇到的错误示例。

```
 Server access Error: Connection refused: 
connect url=http://grails.org/plugins/grails-spring-security-core/tags/RELEASE_3_0_7_RELEASE/spring-security-core-3.0.7.RELEASE.pom 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:58:31.267

安倍，

这是 Spring Security Core 的 Grails.org 页面的链接：[Grails Spring Security Core](http://grails.org/plugin/spring-security-core)。

有一个下载按钮，可让您从 codehaus.org 下载最新发布的 Spring Security Core (1.2.7.3) 的 ZIP 文件。

此页面上还有指向 Spring Security 扩展插件的链接（Spring Security OpenID、Spring Security ACL 等）。

希望这可以帮助。

**更新**

在 Grails Spring Security Core 插件 1.2.7.3 中，`plugin.xml`列出了以下依赖项：

```
<dependencies>
    <compile>
      <dependency group='org.springframework.security' name='spring-security-core' version='3.0.7.RELEASE' />
      <dependency group='org.springframework.security' name='spring-security-web' version='3.0.7.RELEASE' />
    </compile>
</dependencies> 
```

您收到的错误消息是 Grails 插件尝试解决对 Spring Security Core 3.0.7 的依赖关系。

我相信你可以去下载 2 个依赖项：

`Spring Security Core 3.0.7.RELEASE`并将`Spring Security Web 3.0.7.RELEASE`它们安装到您当地的常春藤存储库。

这是关于安装到本地常春藤存储库的 Stackoverflow 帖子（请参阅已接受的答案）：[无法手动将 jar 文件添加到 .ivy 缓存](https://stackoverflow.com/questions/5314433/unable-to-add-jar-file-to-ivy-cache-manually)

这是一个额外的 Stackoverflow 链接：[本地存储库的好常春藤教程？](https://stackoverflow.com/questions/1200762/good-ivy-tutorial-for-local-repository)

**基于更多研究的额外更新**

`Grails Spring Security Core Plugin 1.2.7.3 dependencies.groovy`

如果最终将依赖项放在本地 Ivy 存储库中，则需要编辑`dependencies.groovy`并添加`mavenLocal()`到存储库中。

```
repositories {
    grailsPlugins()
    grailsHome()
    grailsCentral()

    mavenCentral()
    // Add mavenLocal if you have installed the dependencies to the local Ivy Repository
    mavenLocal()
} 
```

理想的情况是，如果您可以找到一个可以通过具有依赖项的防火墙访问的公共存储库，那么您将不需要尝试安装到本地 Ivy 存储库的步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T21:10:14.153

安装内部网依赖库，例如 Artifactory、Nexus 或 Archiva，并在防火墙内托管您的 jar 依赖项和插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:51:07.590

http代理也不能用了吧？

[http://grails.org/doc/2.1.0/ref/Command%20Line/set-proxy.html](http://grails.org/doc/2.1.0/ref/Command%20Line/set-proxy.html)

# sql-server - 2005 和 SQLSM2008 上的 XQuery

> ID：12060271
> 
> 赞同：0
> 
> 时间：2012-08-21T17:47:46.783
> 
> 标签：sql-server, sql-server-2005, xquery

如果您在 sql server 2008 上运行此脚本，则可以正常工作。

```
declare @tab table(
id_emp int,
FIL_ROT_WID xml
)

insert into @tab
select 0, '<xml></xml>'

declare @xml_rot_widget xml
set @xml_rot_widget = '<ati id="1123" val="new()" />'

update @tab
set FIL_ROT_WID.modify('insert sql:variable("@xml_rot_widget")
                    as last
                    into (/xml)[1]')
where id_emp = 0

select * from @tab 
```

但是我将 SQL Server 2005 与 SQLSMS2008 一起使用，并且此脚本也可以正常工作。但是使用相同级别的数据库 em SQLSMS2005 我收到以下错误：

```
XQuery: SQL type 'xml' is not supported in XQuery. 
```

我已经解决了这个问题，但我的问题是：如何配置 SQLSMS2008 来运行脚本并为 DB 2005 解析它们？

啊，**工具 > 选项 > SQL Server 对象资源管理器 > 脚本 > 服务器版本的脚本** 不起作用。它像2008年一样继续运行。

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:22:04.037

> Blockquote 但我使用 SQL Server 2005 和 SQLSMS2008

无论您使用什么版本的 Management Studio，此脚本都无法在 SQL 2005 上运行。您一定已经连接到 SQL 2008 服务器了吗？采用

```
SELECT @@VERSION 
```

如果您不确定版本，请仔细检查。

# c# - 以编程方式运行 winforms 应用程序在第二次运行时崩溃

> ID：12060277
> 
> 赞同：0
> 
> 时间：2012-08-21T17:48:05.827
> 
> 标签：c#, winforms

我有一个用于测试一些库的 winforms 应用程序。我设置了这个程序，所以所有的测试设置都可以作为命令行参数传入。我还制作了第二个控制台应用程序，它从文件中加载一组或多组这些测试设置，并为每组设置启动一次这个 winforms 测试应用程序。由于每次测试运行都会对 CPU 造成冲击，因此我按顺序而不是同时运行。我通过调用启动 winforms 应用程序：

```
WinFormAppNamespace.Program.Main(settings) 
```

这第一次运行良好，但在第二次运行时，我从 winform 应用程序的 Program.cs 中得到一个 InvaildOperationException ，上面写着：

> 在应用程序中创建第一个 IWin32Window 对象之前，必须调用 SetCompatibleTextRenderingDefault。

显然，在调用静态 main(...) 方法来启动应用程序时，会创建一些状态并且在运行后不会释放。

我看到了一些解决方案：

1）第一次运行后处理应用程序 - 不知道如何执行此操作。我调用了一个静态方法，但没有返回任何内容，因此我认为我无法访问通过运行 winforms 应用程序实例化的任何内容。

2) 在 Program.cs 中，检查 SetCompatibleTextRenderingDefault(false) 调用，以便它仅在没有创建窗口时运行。同样，我不确定我是否可以访问实例信息来检查这一点。

3）在自己的进程中运行应用程序。我试图避免这种情况，因为它需要复制其他 app.config 文件才能使其工作，但我开始认为这是唯一的选择。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:08:46.030

`Application.SetCompatibleTextRenderingDefault`创建并显示表单后，您无法调用。

这基本上意味着您不能`Main`在 WinForms 应用程序中多次直接调用自己。

您必须在`Main`再次调用之前终止该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:59:10.537

看到通过调用其静态 Main(...) 方法运行程序只能工作一次，我得出结论，实例化主窗体并调用 ShowDialog() 是可行的方法。只要确保您正在运行的程序不会通过调用 Application.Exit() 来终止，否则您可能会得到一些不可预知的结果。

# java - 是否可以中断 ExecutorService 的特定线程？

> ID：12060279
> 
> 赞同：6
> 
> 时间：2012-08-21T17:48:09.400
> 
> 标签：java, multithreading, executorservice

如果我有一个`ExecutorService`可以提供 Runnable 任务的任务，我可以选择一个并中断它吗？
我知道我可以取消返回的 Future （[这里也提到：how-to-interrupt-executors-thread](https://stackoverflow.com/questions/9280846/how-to-interrupt-executors-thread)），但我怎样才能提出`InterruptedException`. Cancel 似乎没有这样做（事件虽然应该通过查看源代码，但 OSX 实现可能不同）。至少这个片段不会打印“它！” 也许我误解了一些东西，而不是自定义可运行对象获得异常？

```
public class ITTest {
static class Sth {
    public void useless() throws InterruptedException {
            Thread.sleep(3000);
    }
}

static class Runner implements Runnable {
    Sth f;
    public Runner(Sth f) {
        super();
        this.f = f;
    }
    @Override
    public void run() {
        try {
            f.useless();
        } catch (InterruptedException e) {
            System.out.println("it!");
        }
    }
}
public static void main(String[] args) throws InterruptedException, ExecutionException {
    ExecutorService es = Executors.newCachedThreadPool();
    Sth f = new Sth();
    Future<?> lo = es.submit(new Runner(f));
    lo.cancel(true); 
    es.shutdown();
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T17:50:51.483

正确的做法是取消`Future`. 问题是这不一定会导致`InterruptedException`.

如果作业尚未运行，那么它将从可运行队列中删除——我认为这是你的问题。如果工作已经完成，那么它不会做任何事情（当然）。如果它仍在运行，那么它将*中断线程*。

中断一个线程只会导致`sleep()`,`wait()`和其他一些方法抛出`InterruptedException`。您还需要测试以查看线程是否已被中断：

```
if (Thread.currentThread().isInterrupted()) { 
```

此外，如果你抓住了，重新设置中断标志是一个很好的模式`InterruptedException`：

```
try {
   Thread.sleep(1000);
} catch (InterruptedException e) {
   // this is a good pattern otherwise the interrupt bit is cleared by the catch
   Thread.currentThread().interrupt();
   ...
} 
```

在您的代码中，我会尝试*在*您调用`lo.cancel(true)`. 可能是您在未来有机会执行*之前取消了它。*

# sql-server-2008 - 对象“sp_ssis_getfolder”、数据库“msdb”、模式“dbo”的执行权限被拒绝

> ID：12060282
> 
> 赞同：4
> 
> 时间：2012-08-21T17:48:36.100
> 
> 标签：sql-server-2008

伙计们。
我正在尝试使用复制向导将我的 SQL SERVER 2008 数据库从我的 Windows 7 Professional 32 位 Acer 笔记本电脑复制到我的 SQL SERVER 2008 Windows 7 家庭高级版 64 位三星笔记本电脑。
错误是：尝试在 SQL 上查找文件夹时遇到 OLE DB 错误，错误代码为 0x80040E09（对象“sp_ssis_getfolder”、数据库“msdb”、架构“dbo”的执行权限被拒绝。）。

问题已得到解答：您可以将 MSDB.DBO.sp_ssis_getfolder 上的执行权限授予 [proxy]

或者您可以尝试将该用户添加到 dts/ssis 操作员/执行者角色之一 - 从用户开始，然后是操作员，然后是管理员以查看它需要什么级别 - 或阅读文档。

db_ssisadmin db_ssisoperator db_ssisltduser

请参阅此处 msdb 下的部分：http: [//msdn.microsoft.com/en-us/library/ms189121.aspx](http://msdn.microsoft.com/en-us/library/ms189121.aspx)

请原谅我。我在 2010 年参加了这些课程。我正在做一个志愿者项目。我明白这个答案想让我做什么，但我不知道如何或在哪里做。

以下答案很棒，但是当我右键单击存储过程时，我没有选择“属性”。

检查以确保尝试运行存储过程的用户具有执行权限，您可以在 SQL Server Management Studio 中执行此操作，方法是转到数据库 -> 可编程性 -> 并右键单击存储过程并选择“属性”，然后转到到“权限”部分，查看您的用户是否存在，如果不存在，您可以添加用户并授予其执行权限，或者您可以在新查询中执行以下操作：GRANT EXECUTE T​​O ON

我正在连接两个数据库所有者的登录名。我假设执行权限将在目标服务器 msdb 数据库上。我正在使用连接到宏基上源数据库的目标（三星）笔记本电脑，右键单击源数据库并选择“任务”，复制数据库。在向导进入 CREATE 之前一切正常，然后它因错误而失败。

我希望有人可以帮助我解决这个问题。我一直试图让这个工作大约一个星期，我很沮丧。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T03:38:56.217

打开 Internet 信息服务管理器
检查您的 IIS 网站正在使用哪个应用
程序池 转到应用程序池
查看您的应用程序池在哪个身份下运行

打开 SQL Server Management Studio
连接到您的 SQL Server 实例
为您的数据库打开一个新查询
运行此脚本：

```
GRANT SELECT, EXECUTE, UPDATE, INSERT ON SCHEMA :: dbo TO
[NT AUTHORITY\NETWORK SERVICE] 
```

*替换`[NT AUTHORITY\NETWORK SERVICE]`为您的应用程序池运行的任何身份。

返回 IIS 管理器
回收您的应用程序池
浏览您的网站

# c# - 验证应用程序是否正在运行，如果没有则启动它

> ID：12060290
> 
> 赞同：6
> 
> 时间：2012-08-21T17:48:56.147
> 
> 标签：c#, .net, wpf, process

如果应用程序尚未运行，我需要打开它。

例如：我检查应用程序是否正在运行，如果没有，我应该运行它以使其保持运行。

我试过了：

```
System.Diagnostics.Process.Start ("location of the executable"); 
```

它会工作，但是，**没有应用程序的特定路径来打开**。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T18:15:25.960

根据您的评论，检测它非常简单。只需枚举 Process.GetProcesses() 或通过 Process.GetProcessByName() 显式查找它。[MSDN GetProcesses()](http://msdn.microsoft.com/en-us/library/1f3ys1f9.aspx)文档页面上有各种示例。

但是，启动任意应用程序并不那么简单。如果它在环境 PATH 变量中，您可以在不知道安装位置的情况下启动它 - 例如 Internet Explorer，您只需在计算机上的“开始”->“运行”对话框中键入 IExplore.exe 即可运行它。

如果您确定可执行文件将位于 PATH 中，并且您在帖子中暗示您已经可以通过 Process.Start() 启动它，那可能就足够了。在通过调用 GetProcessByName 调用 Process.Start() 之前，您可以简单地放入一个条件门以查看它是否存在于正在运行的进程中 - 类似于：

```
var runningProcessByName = Process.GetProcessesByName("iexplore");
if (runningProcessByName.Length == 0)
{
    Process.Start("iexplore.exe");
} 
```

您显然会使用您要检查/执行的应用程序的名称来代替“iexplore”。请注意，您在搜索进程时正在寻找不带扩展名的可执行文件名称，但在您尝试启动它时却包含它。

**更新**

这是一个很好的示例，可以轻松修改以在 C# 中查找任意文件或文件列表。请记住，如果您能够定位路径的任何部分（例如，在*Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles)*内部搜索，如果您可以确定它在 Program Files 变体中），则搜索会快很多。您可能还需要考虑在找到文件后将搜索结果存储在本地等：

[在 C# 中查找包含超过 20,000 个文件的目录中的文件的最快方法](https://stackoverflow.com/questions/714101/quickest-way-in-c-sharp-to-find-a-file-in-a-directory-with-over-20-000-files)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-03T19:58:32.560

尝试互斥锁：

```
bool Creatednew;
Mutex mut=new Mutex(true,"someuniqeid",out Creatednew);
if(Creatednew)//this app isn't already running
{
//run your app
}
else
Debug.WriteLine("new app was terminated"); 
```

# c# - Visual Studio 2010 IntelliSense 窗口文本输入字段

> ID：12060293
> 
> 赞同：1
> 
> 时间：2012-08-21T13:00:28.657
> 
> 标签：c#, visual-studio-2010, intellisense

最近，可能是在疯狂开发过程中的一些意外的组合键敲击，我的 IntelliSense 窗口上方有一个小文本输入字段，这真的很烦人，因为我不能再只是键入并按 Enter 来使用自动完成功能。

我该如何摆脱它？

![在此处输入图像描述](../Images/cc5e289a5825683934b5d7016b813676.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T17:59:16.220

您可能按下的组合键是 Ctrl + Alt + Space，它可以切换智能感知的完成方法。

可以通过以下方式切换回其他完成模式：编辑->智能感知->切换完成模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:59:25.643

这似乎是VS中的一个错误，请参见下文

[http://connect.microsoft.com/VisualStudio/feedback/details/587691/vs2010-bug-intellisense-shows-empty-text-field-and-stops-working-correctly](http://connect.microsoft.com/VisualStudio/feedback/details/587691/vs2010-bug-intellisense-shows-empty-text-field-and-stops-working-correctly)

并且这个错误被关闭为“不可重现”......

您是否尝试重新启动VS？可能，这应该可以解决您的问题。

如果是，您可以尝试重新启动机器吗？

# php - 获取输入文件类型属性 jquery

> ID：12060300
> 
> 赞同：0
> 
> 时间：2012-08-21T17:49:40.710
> 
> 标签：php, jquery

我有一个表单，它有一个输入字段，可以接收一个文件，我试图获取一个文件的输入，比如说一个图像。在此之后，我使用 php 检查文件类型并将其上传到数据库。我怎样才能让 jquery 将图像文件发布到 php 以便 php 可以执行其功能。我可以得到其他领域的属性，但不能得到图像。

html

```
<input type="file" name="upload" id="upload"/> 
```

jQuery

```
//how do get the file
var img = //left blank what should i get
var a = 'form1';
var url = "upload_data.php";
$.post(url, {a:a, file:img, other:fields}){
//success
} 
```

php

```
$p = $_POST['a'];
$file = $_POST['file'];

$iname = $_FILES['file']['name'];

$isize= $_FILES['file']['size'];

$itemp= $_FILES['file']['tmp_name'];

$otherfield = $_POST['other'];
if($p = 'form1'){

form1func($otherfield, $file, $iname, $itemp); // at this point will this work since i used jquery if wont what is the best solution at this point.

} 
```

可能不干净，但我希望有人能理解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:07:03.757

您可以在表单提交之前在上传按钮上使用以下代码。

```
var ext = $('#upload').val().split('.').pop().toLowerCase();
if($.inArray(ext, ['gif','png','jpg','jpeg']) == -1) {
    alert('invalid extension!');
} 
```

或者 ：

```
var filename = jQUery('#upload').val().trim();
var valid_extensions = /(\.jpg|\.jpeg|\.gif|\.png|\.bmp)$/i;   
if(valid_extensions.test(filename))
{ 
   alert('OK');
}
else
{
   alert('Invalid File');
} 
```

# android - 如何在android中单击按钮时短时间显示图像？

> ID：12060301
> 
> 赞同：-2
> 
> 时间：2012-08-21T17:49:55.560
> 
> 标签：android, android-button

*我正在开发一个安卓应用程序。*我需要做的是，当我单击一个按钮时，我想在短时间内显示图像，然后返回菜单。谁能指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:52:52.390

切换图像的可见性并启动一个线程并在线程结束时将其切换回。想要一些代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:59:29.870

一种方法是[创建自定义 Toast](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView)。

![吐司](../Images/c1085317e2f2ae050468afc4f27f3e1a.png)

# jquery - Facebook 消息中的消息滚动条

> ID：12060302
> 
> 赞同：0
> 
> 时间：2012-08-21T17:50:02.363
> 
> 标签：jquery, html, css, facebook

是否可以做这样的事情： ![http://img593.imageshack.us/img593/1167/unbenannt1kopiel.png](../Images/5fc6e14b9cc522f68d898e31425bfde9.png) 当使用滚动条时，只有来自消息所在的 div 的内容滚动。有人知道如何在css中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:59:27.420

当然你可以用纯 css 做到这一点；[位置属性](http://www.w3schools.com/cssref/pr_class_position.asp)，不需要 jQuery。

`position:fixed;`在您不想滚动的元素上使用 css ，并在您想要滚动`float:left;`的`position:relative;`内容区域上使用 css 值。

但是如果你想根据`scroll.top`值粘贴一些元素，你需要使用jQuery。我建议检查这些答案：[如何在页面底部构建简单的粘性导航？](https://stackoverflow.com/questions/11983294/make-div-stick-to-bottom-of-browser-then-top-of-browser-on-scroll/11983369#11983369) 和[设置窗口滚动动画的 CSS 值限制](https://stackoverflow.com/questions/11971475/setting-css-value-limits-of-the-window-scrolling-animation/11971912#11971912)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:59:30.043

是的，这是很有可能的。对于不应滚动的对象，请指定：

```
position: fixed; 
```

在其 CSS 选择器中。

# c# - 如何在主程序集中嵌入多语言 resx？

> ID：12060303
> 
> 赞同：1
> 
> 时间：2012-08-21T17:50:01.840
> 
> 标签：c#, resources, multilingual

我有一个包含多个 .resx 文件的多语言类库。它不是在主程序集中嵌入资源文件，而是为每种语言创建一个包含`assembly.resources.dll`程序集的文件夹

Resx 文件包含在一个名为的文件夹中`Resources`，它们被标记为嵌入式资源。

有没有什么简单的方法可以将所有 resx 文件嵌入到我的类库程序集中？

# java - 如果我从不实例化某些子数组，为 2D 数组分配多少空间？

> ID：12060305
> 
> 赞同：0
> 
> 时间：2012-08-21T17:50:02.060
> 
> 标签：java, arrays, multidimensional-array

因此，我正在开发一个每秒将多次更新二维数组的 Java 程序。最初，我使用 复制整个数组`System.arrayCopy()`，但这显然是个坏主意，因为我一次只更新一行。相反，我决定只使用一个指向数组的虚拟“零”的“指针”。无论如何，我也希望能够支持动态调整大小，我想到最简单的方法可能是让一个数组保持相同大小，然后有一个数字表示虚拟的最大长度大批。我发现自己认为这可能会浪费内存

以上信息只是为了有人可以告诉我我是否在做一些完全荒谬的事情。

TL;DR = 如果我执行以下操作...

```
int[][] data = new int[2000][]; // 2000 would be the max
for(int i=0; i<10; i++) {
    data[i] = new int[10];
} 
```

...除了我实际初始化的一百个整数之外，我还使用了多少内存？它只是每个空引用的 4 个字节吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:54:44.303

每个`null`引用的 4 个字节加上标头的 8-16 个字节。大多数 64 位 JVM 使用最多 30 GB 堆大小的 32 位引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:14:08.860

考虑使用包含其他列表作为元素的 java.util.List，而不是 2D 数组（这是一个包含 Java 中其他数组的数组）。

清单

*   开箱即用将更加智能
*   将自动支持动态大小调整（以性能优化的方式）
*   可以包含空值（如未初始化的子数组）
*   您可以根据您的要求调整它们的性能（ArrayList vs LinkedList vs CopyOnWriteArrayList）......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T17:53:29.343

是的，您将`2000*sizeof(ptr)`在第一行和`10*10*sizeof(int)`循环中使用字节（加上对象开销）。

# linux - 如何使用linux在每行的开头插入数字（连接）

> ID：12060308
> 
> 赞同：2
> 
> 时间：2012-08-21T17:50:06.503
> 
> 标签：linux

我有一个文件，其中包含一行中的每个数字。我想在每行的开头将“00”添加到文件中的现有值。例如：如果我每行有 22、33、44 个数字，我希望它们是：0022、0033、0044。即连接。

请问我怎样才能做到这一点？如果不可能，那么，如何从文件中的现有值中删除 00 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:53:47.700

如果要进行替换并将其保存在同一文件中，请尝试：

```
sed -i 's/^/00/' filename 
```

要使文件保持原样，请`-i`从命令中删除。

要删除零，请使用

```
sed -i 's/^00//' filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T17:54:01.043

使用 sed，而不是接触以 00 开头的数字：

```
sed -i '/^00/!{s/^\([0-9]*\)/00\1/}' input_file 
```

# rubymotion - 包括未找到模块 RubyMotion

> ID：12060309
> 
> 赞同：4
> 
> 时间：2012-08-21T17:50:13.377
> 
> 标签：rubymotion

RubyMotion 中是否允许使用 mixin？我有一个包含两个文件的目录。一个是类，另一个是模块。当我在课堂中包含模块（mixin）时，出现未找到错误。RM 中自动需要 app 下的所有内容，对吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:26:50.753

找到了！[http://dylanmarkow.com/blog/2012/05/06/load-order-with-rubymotion/](http://dylanmarkow.com/blog/2012/05/06/load-order-with-rubymotion/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T23:57:38.850

我正在使用 Bundler，所以我最终在`Motion::Project::App.setup do |app|`块中放置了这样的东西：

```
app_files = app.files.reverse.pop
app.files << Dir.glob(File.join(app.project_dir, 'lib/**/*.rb')) << app_files 
```

肯定有更好的方法来做到这一点。

# jquery-ui - 如何在 jQuery-UI 中初始化预先格式化的日期选择器？

> ID：12060314
> 
> 赞同：2
> 
> 时间：2012-08-21T17:50:48.877
> 
> 标签：jquery-ui, datepicker

我正在将日期选择器应用于具有此日期格式的表单字段：`'dd/mm/yy'`因此，当用户选择日期时，它将以该格式放置在字段中。

问题是该字段预先填充了 format 中的值`yy-mm-dd`，并且 datepicker 显示的是今天的日期。

如何使用字段值初始化日期选择器？

我以前使用过 jQuery Tools 中的 datepicker，它会自动从字段值初始化 datepicker，但是 jQuery UI 中的 datepicker 没有那个有用的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:06:54.617

这样做的方法是：

```
$('#activity_date').datepicker({ dateFormat: 'yy-mm-dd' })
$('#activity_date').datepicker("setDate", "2012-01-21")
$('#activity_date').datepicker("option", "dateFormat", "DD, d MM, yy") 
```

解释：

*   将 dateFormat 设置为数据库中的日期格式
*   设置日期
*   设置我们要在表单域中显示的 dateFormat

# sharepoint - 如何将子站点导出为具有母版和页面布局的 wsp？

> ID：12060316
> 
> 赞同：1
> 
> 时间：2012-08-21T17:50:49.923
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

当我尝试导出子站点时，wsp 文件不包含所需的页面布局和母版。有人可以指出我如何确保包含这些文件的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:14:08.450

开箱即用，母版页通过母版页库单独下载。

相同版本的所有 SharePoint 场都具有相同的可用布局页面，除非这些布局页面是自定义添加的。在这种情况下，应使用任何自定义代码/解决方案将自定义布局页面重新安装到新位置。有更多的方法可以解决这个问题，但这是你应该开始的方式。

# php - 需要将来自多个 MySql 表的信息组合到 html 表中

> ID：12060324
> 
> 赞同：1
> 
> 时间：2012-08-21T17:51:34.800
> 
> 标签：php, mysql

我很难找到做某事的最佳方法。我在 mysql 中有三个表，这与我正在构建的健身房应用程序有关，一个用于肌肉锻炼，一个用于有氧运动，另一个用于存储用户每天每次锻炼的结果。每天的锻炼是基于 0 到 1 的有氧运动和 0 - 无论私人教练决定多少肌肉锻炼。在锻炼结束时，用户将每次锻炼的结果放入表格并提交。结果只是一个文本字段。我有一个数据库，它为每个单独的结果创建一行，其中包括

```
username,exercise type (muscle,cardio),exercise name, exercise result, date 
```

所以一个例子是

```
John,muscle,bench press, 225lb max out, 2012-08-21
John,cardio,rowing,12 miles, 2012-08-21 
```

然后，我想获取此信息并根据所选日期将其显示在标准表格中。所以每个日期有多个用户，每个用户可以有多个答案。标题将是

`username,cardio, muscle 1, muscle 2 ect..`（显示当天的数量）然后将结果向下并填写在表格中。

除了打几十个选择电话外，我还试图找出一种方法来做到这一点。我正在考虑尝试创建某种排序或数组并使用它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:15:45.117

我会选择阵列。问题在于发送肌肉/心脏结果。

要以 HTML 格式格式化并获取标题，假设我们首先有有氧运动，然后是肌肉。

因此，您选择该日期的所有行，按用户名和有氧运动/肌肉排序。

然后：

```
$users = array();
$maxes = array('cardio' => 0, 'muscle' => 0);

foreach($row = ...)
{
    list($user, $com, $name, $result) = $row;
    if (!isset($users[$user]))
        $userData = array('cardio' => array(), 'muscle' => array());
    else
        $userData = $users[$user];
    $userData[$com][] = array($name, $result);
    if (count($userData[$com]) > $maxes[$com])
        $maxes[$com] = count($userData[$com]);
    $users[$user] = $userData;
} 
```

现在你有类似的东西：

```
'John': {
     'cardio': [
        [ 'rowing', '12 miles' ],
        [ 'running', '2 miles' ],
     ],
     'muscle': [ ]
},
'Jack': {
     'cardio': [ ],
     'muscle': [ 'bench', '300lbs' ],
} 
```

为了在 HTML 中格式化，我们保存了任何用户的最大有氧运动数量和最大肌肉数量。因此，1 + MaxC + MaxM 列的表将包含所有用户，按顺序排列：

```
Name  Cardio 1    Cardio 2   Muscle 1

John  Rowing      Running    -
      12 miles    2 miles
Jack  -           -          Bench
                             300lbs 
```

并构建它：

```
// First the header
print "<tr>";
print "<th>Name</th>";
for ($i = 0; $i < $maxes['cardio']; $i++)
    print "<th>Cardio " . ($i+1) . "</th>";
for ($i = 0; $i < $maxes['muscle']; $i++)
    print "<th>Muscle ($i+1)</th>";
print "</tr>";

foreach($users as $user => $info)
{
    print "<tr><td>$user</td>";
    foreach(array('cardio','muscle') as $key)
    {
        $data = $info[$key];
        for ($i = 0; $i < $maxes[$key]; $i++)
        {
            print "<td>";
            if (isset($data[$i]))
            {
                list($name, $result) = $data[$i];
                print "$name<br />$result";
            }
            else print '-';
            print "</td>";  
        } 
    }
    print "</tr>";
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:16:33.200

我会为 3NF 设置推荐 4 个表：

```
用户（用户名PK）
练习类型（PK 类型）
运动名称（名称PK）
练习条目（id PK，用户名 FK，日期，练习类型 FK，练习名称 FK，结果）
```

您将在其中生成练习条目`exercise_entry`并留下结果`NULL`。这样用户就知道有一个期望值。

在 PHP 端，您只需`exercise_entry`根据过滤器参数从表中获取数据。

**编辑 1**

如果练习类型和名称之间存在 1:1 的关系，则可以使用 3 表方法。

```
用户（用户名PK）
练习名称（名称PK，类型）
练习条目（id PK，用户名 FK，日期，练习名称 FK，结果）
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T18:26:06.473

首先，可能没有必要为三类运动中的每一种分别设置表格：也许一张`exercises`表格就足够了，用一列来指示每条记录是肌肉锻炼还是心血管锻炼？

关于您的问题：您要做的是对数据进行*透视*，这是 MySQL 开发人员故意不包含在本机中的功能（因为他们认为它更适合应用程序的表示层，而不是数据库层); 其他 RDBMS 可能对此类操作有更多的原生支持。但是，仍然可以通过对数据进行*分组*[`GROUP_CONCAT()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)并使用 MySQL 的函数聚合结果来实现您的目标：

```
SELECT   username,
         GROUP_CONCAT(IF(exercise='bench press',result,NULL)) AS `bench press`,
         GROUP_CONCAT(IF(exercise='rowing'     ,result,NULL)) AS `rowing`,
         -- etc.
FROM     results
WHERE    date = '2012-08-21'
GROUP BY username 
```

如果练习列表是动态的，您可以生成包含此 SQL 语句的字符串，然后根据该字符串[准备并执行](http://dev.mysql.com/doc/en/sql-syntax-prepared-statements.html)语句：

```
SELECT CONCAT('
   SELECT   username,
', GROUP_CONCAT(
     'GROUP_CONCAT(IF(exercise=',QUOTE(name),',result,NULL))'
   ,    ' AS `',REPLACE(name,'`','``'),'`'
   )
,' FROM     results
   WHERE    date = ?
   GROUP BY username
') FROM exercises INTO @sql;
PREPARE stmt FROM @sql;
EXECUTE stmt USING '2012-08-21';
DEALLOCATE PREPARE stmt; 
```

# javascript - 谷歌地图折线点击不会触发 PolyMouseEvent

> ID：12060327
> 
> 赞同：5
> 
> 时间：2012-08-21T17:51:40.900
> 
> 标签：javascript, google-maps-api-3

我正在尝试获取[文档](https://developers.google.com/maps/documentation/javascript/reference#PolyMouseEvent)中所写的折线路径中边缘的索引。但是，每当我触发折线上的点击事件时，我都会得到未定义的值。

这是我的代码：边缘、路径和顶点都是未定义的

```
route = new google.maps.Polyline({
path: polyLineArray,
strokeColor: "#FF0000",
strokeOpacity: 1.0,
strokeWeight: 5,
clickable: true,
editable: false
});

google.maps.event.addListener(route, 'click', function(evt) {           
  console.log("route click1: " + evt.edge);
  console.log("route click2: " + evt.path);
  console.log("route click2: " + evt.vertex);
  console.log("route click3: " + evt);
  for(var property in evt) {
   console.log("route click4: " + property + " - " + evt[property]);
  } 
```

} });

我在这里错过了什么吗？非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T18:29:42.757

[我在测试用例](http://www.geocodezip.com/v3_polyline_example_arc_click.html)上看到了相同的结果

进一步测试，看起来它们在“可编辑”折线上可用，如果单击白色方块，则顶点为真，如果编辑折线并单击“新”顶点之一，则路径为真。 [测试带有可编辑折线的案例](http://www.geocodezip.com/v3_polyline_example_arc_editable_click.html)

仔细查看[文档](https://developers.google.com/maps/documentation/javascript/reference#PolyMouseEvent)，很明显它只适用于可编辑的折线/多边形：

```
google.maps.PolyMouseEvent object
This object is returned from mouse events on polylines and polygons.

This object extends MouseEvent.
Properties
Properties | Type   | Description
edge       | number | The index of the edge within the path beneath the cursor when 
                    | the event occurred, if the event occurred on a mid-point on an 
                    | editable polygon.
path       | number | The index of the path beneath the cursor when the event 
                    | occurred, if the event occurred on a vertex and the polygon
                    | is editable. Otherwise undefined.
vertex     | number | The index of the vertex beneath the cursor when the event 
                    | occurred, if the event occurred on a vertex and the polyline or 
                    | polygon is editable. If the event does not occur on a vertex, 
                    | the value is undefined. 
```

更多信息。单击白色的小方块（“编辑手柄”）会给出顶点＃或边缘编号，没有找到使路径未定义的任何方法，但这可能是因为到目前为止我只玩过折线.

# android - Android：如何在 Activity 的 onResume() 中检查服务状态？

> ID：12060330
> 
> 赞同：0
> 
> 时间：2012-08-21T17:51:43.370
> 
> 标签：android, android-service, aidl

我正在创建一个媒体播放器应用程序。

当我启动或恢复应用程序时，我想检查媒体播放器是否已经在播放歌曲。

因此，如果是，我会将我的 Pause/Play 设置`ToggleButton`为**Pause**，否则它没有更早播放，那么按钮将设置为**Play**。

（例如，如果用户已经在使用媒体播放器并通过按主页或返回按钮离开应用程序，现在他恢复播放器。那么应该正确配置按钮。）

实际的 MediaPlayer 对象在`Service`& 所有通信都通过`AIDL interface`方法完成。

我打算实现一个方法：

```
public boolean isMediaPlaying() throws RemoteException {
    if (mediaPlayer != null) {
        if (mediaPlayer.isPlaying()) {
        return true;
    }
    return false;
} 
```

**问题：**但是`ServiceConnection's onServiceConnected`在恢复之后执行。

请建议我如何在活动简历上查看此状态？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:30:05.550

您可以在 Application 类中保留对您的服务的引用。例如

```
 public class App extends Application {

    private static PlayerService player;

    @Override
    public void onCreate() {
        super.onCreate();

        if (player == null)
            bindService(new Intent(App.this, PlayerService.class), connection, Context.BIND_AUTO_CREATE);

    }

    @Override
    public void onTerminate() {
        super.onTerminate();
        player.stop();
        player = null;
        getApplicationContext().unbindService(connection);
    }

    public static PlayerService getPlayer() {
        return player;
    }

    private ServiceConnection connection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className, IBinder service) {
            player = ((PlayerService.PlayerServiceListener) service).getService();
        }

        public void onServiceDisconnected(ComponentName className) {
            player = null;
        }
    };

} 
```

然后在activity onResume 中使用

```
App.getPlayer().isPlaying 
```

# msbuild - 如何使用 msbuild 控制兄弟依赖目标的构建顺序？

> ID：12060334
> 
> 赞同：0
> 
> 时间：2012-08-21T17:51:57.027
> 
> 标签：msbuild, msbuild-target

在我的项目中，我有两个导入语句：

```
<Import Project="<TransformConfigLocation>" />
<Import Project="<PackageLocation>" /> 
```

每个目标都有一个如下定义的属性组：

```
<PropertyGroup>
    <BuildDependsOn>
        $(BuildDependsOn);
        TransformConfig
    </BuildDependsOn>
</PropertyGroup>

<PropertyGroup>
    <BuildDependsOn>
        $(BuildDependsOn);
        Package
    </BuildDependsOn>
</PropertyGroup> 
```

我想保证 TransformConfig 总是在 Package 之前运行。我不控制任何一个依赖目标，并且不希望显式编辑它们，因为每当我通过 NuGet 更新这些目标时，这些编辑都会被擦除。Package 目标始终首先运行，这是不可取的。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:50:09.613

在项目中，构建顺序保证遵循 MSBuild[目标构建顺序规则](http://msdn.microsoft.com/en-us/library/ee216359.aspx)。这里没有竞争条件，一切都是序列化的。来自上面链接的引用：

> ```
> <Target Name="Serve" DependsOnTargets="Chop;Cook" /> 
> ```
> 
> 告诉 MSBuild Serve 目标取决于 Chop 目标和 Cook 目标。MSBuild 运行 Chop 目标，然后运行 ​​Cook 目标，然后再运行 Serve 目标。

请注意，如果在“Serve”之前执行的某些其他目标将任何 Chop/Cook 目标作为其依赖项，或者已将它们列在 BeforeTargets/AfterTargets 中，则可能会影响顺序。例如，如果您有这组目标：

```
 <Target Name="One" DependsOnTargets="Two;Three" />
 <Target Name="Two" DependsOnTargets="TargetB" />
 <Target Name="Three" DependsOnTargets="TargetA;TargetB;" /> 
```

并且您构建“One”，那么构建顺序如下：

```
TargetB
Two
TargetA
// skip TargetB because it was already run
Three
One 
```

因此，在您的情况下，假设 TargetB 未列为任何先前目标的依赖项，则 $(BuildDependsOn) list 将按照目标在此处列出的顺序执行，即 `...;TargetA;TargetB`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:19:58.817

简单的答案是 Imports 的顺序*确实*很重要。有关原因的更多详细信息，请参阅@Seva Titov 的回答和我们的后续对话。

我强烈推荐[http://amzn.com/0735645248](http://amzn.com/0735645248)对该主题进行全面分析。

# c# - 使用 Bouncy Castle 计算文件的哈希值

> ID：12060338
> 
> 赞同：2
> 
> 时间：2012-08-21T17:52:20.347
> 
> 标签：c#, .net, cryptography, bouncycastle

我正在查看 Bouncy Castle 以了解其哈希算法的性能与 .NET Framework 的性能相比如何，而且它看起来不太好；MD5 实现比 .NET 慢约 6 倍，SHA256 实现比 .NET 慢约 3 倍。

所以我想确保我正确使用了 Bouncy Castle，因为文档几乎不存在。这就是我正在做的事情：

```
using Org.BouncyCastle.Crypto;
using Org.BouncyCastle.Crypto.Digests;

public byte[] Hash(string filename)
{
  IDigest hash = new Sha256Digest();

  byte[] result = new byte[hash.GetDigestSize()];

  using (var fs = new FileStream(filename, FileMode.Open, FileAccess.Read, 
    FileShare.Delete | FileShare.ReadWrite))
  {
    byte[] buffer = new byte[4092];
    int bytesRead;

    while ((bytesRead = fs.Read(buffer, 0, buffer.Length)) > 0)
    {
      hash.BlockUpdate(buffer, 0, bytesRead);
    }

    hash.DoFinal(result, 0);
  }

  return result;
} 
```

***编辑***

为了比较，这是我使用 .NET 的方式：

```
public byte[] Hash(string filename)
{
  byte[] hashBytes;
  HashAlgorithm hash = new SHA256CryptoServiceProvider();

  using (var fs = new FileStream(filename, FileMode.Open, FileAccess.Read, 
    FileShare.Delete | FileShare.ReadWrite))
  {
    try
    {
      hashBytes = hash.ComputeHash(fs);
    }
    finally
    {
      hash.Clear();
    }
  }

  return hashBytes;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:57:50.307

您应该检查的第一件事是您是受 IO 限制还是受 CPU 限制。如果您受 CPU 限制，那么我怀疑那*是*Bouncy Castle。如果您受 IO 限制，则可能是 .NET 对 IO 更加智能。首先，您可能希望将缓冲区大小从 4K 增加到（例如）64K。试一试。这是一个非常容易的改变。一个更难的改变是使用异步 IO，以便您在对已经获得的数据进行哈希处理时读取下一个缓冲区的未哈希数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:09:07.140

虽然这两种算法可能存在很大差异，以至于您会遇到 3-6 倍的差异，但问题也很可能是 I/O 差异的结果。通过将 FileStream 传递给 .NET 实现，它可能会在内部做一些聪明的事情来获得更好的 I/O 性能（例如散列和同时读取），而您在 Bouncy Castle 示例中没有这样做。

要对此进行测试，您可以：

1.  使您的两个示例尽可能相似（这就是我要做的）。您可以在 .NET HashAlgorithm 中使用 TransformBlock 和 TransformFinalBlock，这将更类似于您的 Bouncy Castle 测试。

2.  尝试对您的 Bouncy Castle 代码进行 I/O 优化，看看您是否可以接近 .NET 实现的性能。

不过，这可能没有实际意义。如果 .NET 实现满足您的需求，它可能最适合您的应用程序。似乎它可能已经内置了一些性能特征，您必须手动添加到 Bouncy Castles 实现中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-12T10:52:43.117

1.  似乎您使用正确。

    *   如果您不确定，请通过将哈希值与 .NET 哈希值进行比较来测试您的代码。
    *   您还可以测试*不同的块大小*，看看它们是否能提高代码的性能。4092 可能不是较大流的最佳大小。另外，尝试采用 2 的倍数的块大小。
2.  您对两种实现之间的性能差异也是正确的。我的最新测试表明，c# nuget 上的 Bouncy Castle MD5 散列比 .NET 散列慢 ~X2。

[![MD5 哈希时间（毫秒）](../Images/fb1d2d2fc543eea036f4512e737200fd.png)](https://i.stack.imgur.com/pRHwS.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-27T23:28:27.963

我知道这个问题已经很老了，但目前我能够为 .NET 和 Bouncy Castle 的 MD5 算法实现获得相同的速度。

但是，我不是在读取文件时计算哈希值，而是在上一步中读取完整的文件内容，然后对其进行哈希处理：

```
 var md5Digest = new MD5Digest();
    var hash = new byte[md5Digest.GetDigestSize()];

    md5Digest.BlockUpdate(buffer, 0, buffer.Length);
    md5Digest.DoFinal(hash, 0);

    // Once used, mark buffer content to be garbage collected.
    buffer = null; 
```

（我很清楚将完整的文件内容存储在内存中可能不是很方便）。

# windows-phone-7 - LoopingSelector windows phone中的前导零

> ID：12060342
> 
> 赞同：0
> 
> 时间：2012-08-21T17:52:25.630
> 
> 标签：windows-phone-7, int

我创建了一个从 0 到 99 的数字循环选择器。我希望它显示，所有小于 10 的数字都带有前导 0，例如，我希望 1 显示为 01。我研究但找不到任何关于对此。

我走到这一步，

```
LoopingSelector1.DataSource = new IntLoopingDataSource()
            { 
                MinValue = 0,
                MaxValue = 10, 
                Increment = 1, 
                SelectedItem = 0 
            }; 
```

即使将 MinValue 更改为“00”，它也不显示前导零。

我欢迎任何想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:24:11.167

如果您不想像 Will 建议的那样使用基于字符串的数据源，您可以覆盖 itemtemplate 以按照您喜欢的方式显示数字：

```
 <toolkitPrimitives:LoopingSelector ItemSize="100,100">
        <toolkitPrimitives:LoopingSelector.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding StringFormat=\{0:d2\}}" />
            </DataTemplate>
        </toolkitPrimitives:LoopingSelector.ItemTemplate>
    </toolkitPrimitives:LoopingSelector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:52:36.287

Max Pawlowsky 做了一个带有固定位置整数的 DigitLoopingSelector 的好例子。我在我的 dfRandomWinner Windows Phone 应用程序中使用了它。

在这里讨论 - [http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/cfe453b1-defb-4715-a116-7525641e747c](http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/cfe453b1-defb-4715-a116-7525641e747c)。

不幸的是，看起来他的博客已经崩溃了，但你可以阅读这篇文章并下载他页面的谷歌缓存中的代码 - [http://webcache.googleusercontent.com/search?q=cache:34K8dvl1I28J:www.maxpaulousky.com /blog/archive/2011/01/31/windows-phone-looping-selector-for-digits.aspx+Digitloopingselector&cd=1&hl=en&ct=clnk&gl=us](http://webcache.googleusercontent.com/search?q=cache:34K8dvl1I28J%3awww.maxpaulousky.com/blog/archive/2011/01/31/windows-phone-looping-selector-for-digits.aspx%20Digitloopingselector&cd=1&hl=en&ct=clnk&gl=us)。

Max 代码的直接源代码链接 - [http://www.maxpaulousky.com/storage/20110108-Windows-Phone-7-Looping-Selector-for-Digits/DigitLoopingSelector.zip](http://www.maxpaulousky.com/storage/20110108-Windows-Phone-7-Looping-Selector-for-Digits/DigitLoopingSelector.zip)

# php - preg_replace 没有按预期工作

> ID：12060343
> 
> 赞同：3
> 
> 时间：2012-08-21T17:52:29.737
> 
> 标签：php, regex, preg-replace

`<a href>`我写了一个简单的函数，它接受一个文本块，从中提取 url，并用它们周围的标签替换所有 url 。

例如`http://site.com`应该成为`<a href="http://site.com">http://site.com</a>`

代码：

```
function parseUrls( $string )
{
    $string = trim($string);
    $pattern = '%\bhttp[s]?://[A-z0-9/\.\-_]+%i';
    $replacement = '<a href="$1">$1</a>';

    $string = preg_replace($pattern, $replacement, $string);

    return $string;
} 
```

但是，如果我将以下字符串作为输入传递：

你好[https://google.com](https://google.com)测试[http://test.com/something.html](http://test.com/something.html) abc [http://site.com](http://site.com)

我得到的输出是：

```
hello <a href=""></a> test <a href=""></a> abc <a href=""></a> 
```

即，网址正在匹配，但未`$replacement`正确应用。可能是我的用法`$1`是错误的？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T17:56:57.887

**您的表达式中没有定义捕获组**（通常由 完成`()`）。所以`$1`是空的。但是`$0`，在您的替换模式中保存完整的匹配字符串。

所以要么使用，

```
$replacement = '<a href="$0" target="_BLANK">$0</a>'; 
```

或者

```
$pattern = '%\b(http[s]?://[A-z0-9/\.\-_]+)%i';
//             ^                          ^
//             |                          |
//             +-----  Capture group -----+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T17:58:02.007

您没有`$1`可以引用的捕获组。

改为使用`$replacement = '<a href="$0" target="_BLANK">$0</a>';`。

另外，不要在你的字符类中使用（它比你想象的匹配更多：在 ASCII和`A-z`之间有一些非字母字符）。就足够了，因为无论如何你已经让它不区分大小写了。`Z``a``A-Z`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T18:00:07.530

您需要用方括号对表达式进行分组才能使用 $1。

> $pattern = '%\b(http[s]?://[A-z0-9/.-_]+)%i';

# jquery-mobile - jquery mobile中的自动javascript和css缓存？（初学者？）

> ID：12060344
> 
> 赞同：0
> 
> 时间：2012-08-21T17:52:37.173
> 
> 标签：jquery-mobile

我目前正在开发一个需要包含大量 js 文件的 webapp，例如 facebook sdk、jquery、jquery mobile 等。

我想知道如果你在一个页面上加载所有css和js文件，例如index.php，那么索引页面中链接的所有后续页面也可以使用已经下载的js和css文件。

对于如何管理 js 文件的缓存的任何建议，我也将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:14:39.640

是的，这是正确的，但如果用户登陆的不是第一个页面，他们将无法访问这些文件。这也仅适用于您不在任何点/页面/链接禁用 Ajax 导航

# sql - 如何从列表中填充链接表？

> ID：12060346
> 
> 赞同：0
> 
> 时间：2012-08-21T17:52:45.647
> 
> 标签：sql, sql-server, sql-server-2008

我有三个表，Country、Region 和 RegionCountry。我需要使用属于某个地区的国家/地区填充链接表。我想创建一些 sql，它采用国家代码列表（如英国、IE）和区域代码（如欧洲的 EUR）并将正确的 ID 插入 RegionCountry。我对 sql 数据传输的东西比较陌生，任何关于如何做到这一点的想法都将不胜感激。谢谢

**更新** 添加了示例数据。

```
Country
Id
Name
Code

Region
Id
Name
Code

RegionCountry
Region_Id
Countries_Id

Country
Id                                          Name                    Code
6CEBFBAC-F1F2-444C-88E9-8BC5A8040598    Uganda                  UG
19105690-9F78-4D00-9547-50E4820AB8B2    Ukraine                 UA
988C6645-7436-4369-807B-272E42C026CB    United Arab Emirates    AE
73ACCC38-43D2-4EE4-A59C-3759CE278C78    United Kingdom          GB
AC3B8FA7-B690-4E37-9DEF-FD73EDA69167    United States           US
A1394247-C785-41E0-8550-EB610A348F5E    United States Minor Outlying Islands    UM

Region
Id                                          Name            Code
4A7678AA-2109-4455-9F0F-0F16E02FC438    Europe          EUR
7B060367-0B86-4A57-9908-1C021F697FAA    Western Asia    WEA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:03:37.743

我想我理解得更好，您有一个要插入的数据列表，并且您在插入时已经知道区域代码。你将如何执行 SQL，谁有那个列表？

首先，在这种情况下没有必要使用链接表，因为一个国家只能位于一个地区。只需将区域 ID 作为字段放在国家/地区表上即可。

但是，如果一个国家可以属于多个地区，则需要链接表

最简单的事情就是对列表进行循环，并为每个条目插入两条记录（地区和国家）

但是，这可能会对性能产生影响，具体取决于您要添加的国家/地区数量，您可能希望在哪里进行批量插入。这一切都取决于您使用什么语言来完成这项工作

如果您尝试直接针对数据库执行此操作，则存储过程或其他内容可以获取列表，但其语法将根据您使用的数据库而有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:15:10.040

```
 DECLARE @RegionID INT  

 -- INPUT Data  
 DECLARE @RegionCode VARCHAR(50)  
 DECLARE @Countries VARCHAR(500)

 SET @RegionCode = 'EUR'  
 SET @Countries = 'UK,IE'

 SELECT @RegionID = Id  
 FROM dbo.Region  
 WHERE Code = @RegionCode  

 INSERT INTO dbo.RegionCountry  
 SELECT @RegionID,Id  
 FROM dbo.Country C  
 INNER JOIN dbo.Split(@Countries, ',') S  
 ON C.Code = S.items

 --Dependency:  
 -- Create this function to split the given string  
 CREATE FUNCTION dbo.Split (  
    @String VARCHAR(8000)  
    ,@Delimiter CHAR(1)
    )
 RETURNS @temptable TABLE (items VARCHAR(8000))
 AS
 BEGIN
    DECLARE @idx INT
    DECLARE @slice VARCHAR(8000)

    SELECT @idx = 1

    IF len(@String) < 1
        OR @String IS NULL
        RETURN

    WHILE @idx != 0
    BEGIN
        SET @idx = charindex(@Delimiter, @String)

        IF @idx != 0
            SET @slice = left(@String, @idx - 1)
        ELSE
            SET @slice = @String

        IF (len(@slice) > 0)
            INSERT INTO @temptable (Items)
            VALUES (@slice)

        SET @String = right(@String, len(@String) - @idx)

        IF len(@String) = 0
            BREAK
    END

    RETURN
 END
 -- Source for split function : http://blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:45:42.590

这就是我最终想出的。

```
IF OBJECT_ID('tempdb..#tempCountries') IS NOT NULL DROP TABLE #tempCountries
GO

  SELECT *
  INTO #tempCountries
  FROM Countries
  WHERE code IN ('AL','AD','AM','AT','AZ','BY','BE','BA','BG','HR','CY','CZ','DK','EE','FI','FR','GE','DE','GR','HU','IS','IE','IT','KZ','LV','LI','LT','LU','MK','MT','MD','MC','ME','NL','NO','PL','PT','RO','RU','SM','RS','SK','SI','ES','SE','CH','TR','UA','GB')

Declare @Id uniqueidentifier
Declare @RegionId uniqueidentifier

SET @RegionId = (SELECT TOP 1 Id FROM dbo.Regions WHERE Code = 'EUR')

While (Select Count(*) From #tempCountries) > 0
Begin

    Select Top 1 @Id = Id From #tempCountries

    INSERT INTO RegionCountry(Region_Id,Countries_Id)
    VALUES (@RegionId,@Id)

    Delete #tempCountries Where Id = @Id

End 
```

# string - 任何等效于 PadLeft/PadRight 的方法？

> ID：12060347
> 
> 赞同：46
> 
> 时间：2012-08-21T17:52:50.727
> 
> 标签：string, vba

只是想知道，VBA 中是否有与 VB .NET 的 PadLeft 和 PadRight 方法等效的方法？

截至目前，每当我想获取一个字符串并将其设置为带有前导空格的固定长度时，我都会根据字符串的长度执行 For...Next 循环。

例如，我将使用以下代码将字符串格式化为 8 个字符并带有前导空格：

```
intOrdNoLen = Len(strOrdNo)
For i = 1 To (8 - intOrdNoLen) Step 1
    strOrdNo = " " & strOrdNo
Next 
```

有没有办法在 VBA 中用更少的行来做同样的事情？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-21T17:56:11.290

我不相信有任何明确的`PADLEFT`or`PADRIGHT`函数，但是您可以使用`SPACE`and `LEFT`or的组合`RIGHT`在您的字符串前面加上空格，然后获取正确的 X 个字符。

**桨叶**

```
strOrdNo = RIGHT(Space(8) & strOrdNo, 8) 
```

如果您想要一个字符而不是空格，您可以使用`STRING`而不是空格（下面的示例左填充 X）：

```
strOrdNo = RIGHT(String(8, "X") & strOrdNo, 8) 
```

**焊盘**

```
strOrdNo = LEFT(strOrdNo & Space(8), 8)

strOrdNo = LEFT(strOrdNo & String(8, "X"), 8) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-21T17:58:54.573

你可以使用这些。将它们放在公共模块中

'NB 如果输入字符串长于总长度则失​​败

```
Function PadLeft(text As Variant, totalLength As Integer, padCharacter As String) As String
    PadLeft = String(totalLength - Len(CStr(text)), padCharacter) & CStr(text)
End Function

Function PadRight(text As Variant, totalLength As Integer, padCharacter As String) As String
    PadRight = CStr(text) & String(totalLength - Len(CStr(text)), padCharacter)
End Function 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-20T13:19:13.393

由于我们通常在左侧填充，因此 Format() 函数更短、更简单：

```
Format(number, "    ")

Format(number, "00") 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-02-08T03:53:42.667

```
Format("abc","!@@@@@@") ' width >= 6; pad right side with spaces
Format("abc","@@@@@@") ' width >= 6; pad left side with spaces 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-09T14:48:48.680

您还可以在 VBA 中使用固定长度的字符串：

```
Dim myString As String * 10
    myString = "test"
    Debug.Print myString, "(" & Len(myString) & ")" '// Prints "test          (10)" 
```

尽管这仅对右侧的填充有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-24T07:36:54.330

我通过重新分配变量解决了这个问题。
在我的代码中，我从工作簿单元格获取数据并将其限制为 5 个字符（如有必要，填充足够的 0..）：

```
MB = Right(String(5, "0") & Worksheets("HOME").Range("b3"), 5)
MB = Right(MB, 5) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-13T13:12:20.453

合并前两个答案（感谢**LittleBobbyTables**和**Brad**）并注意辅助函数**max**，我建议：

```
Function PadLeft(ByVal text As Variant, ByVal totalLength As Integer, ByVal padCharacter As String) As String
    PadLeft = Right(String(totalLength, padCharacter) & CStr(text), max(totalLength, Len(CStr(text))))
End Function

Function PadRight(ByVal text As Variant, ByVal totalLength As Integer, ByVal padCharacter As String) As String
    PadRight = Left(CStr(text) & String(totalLength, padCharacter), max(totalLength, Len(CStr(text))))
End Function

Public Function max(ByVal x As Variant, ByVal y As Variant) As Variant
  max = IIf(x > y, x, y)
End Function 
```

totalLength 最好命名为 minimumLength，因为始终返回整个原始字符串，可能导致结果比 minimumLength 长。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-13T19:26:37.287

我对这个答案采取了不同的方法。它不是最简单的，但可能是最通用的。我使用了 LittleBobbyTables 和 Brad 的一些代码来制作这个。以下是有关如何使用该功能的几个示例：

```
Sub test()
    Debug.Print PadStr("ABC", 6) 'returns "ABC   "
    Debug.Print PadStr("ABC", 6, "-") 'returns "ABC---"
    Debug.Print PadStr("ABC", 6, , xlHAlignRight) 'returns "   ABC"
    Debug.Print PadStr("ABC", 7, "*", xlHAlignCenter) 'returns "**ABC**"
    Debug.Print PadStr("ABC", 9, "*", xlHAlignDistributed) 'returns "**A**B*C*"
    Debug.Print PadStr("ABC", 7, "*", xlHAlignFill) 'returns "ABCABCA"
End Sub 
```

这是功能：

```
Function PadStr(Expression As Variant, length As Integer, Optional padChar As String = " ", Optional alignment As XlHAlign = xlHAlignGeneral) As String
'Pads a string with a given character.
'@Expression - the string to pad
'@length - the minimum length of the string (if @Expression is longer than @length, the original Expression will be returned)
'@padChar - the character to pad with (a space by default)
'@alignment - what type of alignment to use. Uses the XlAlign object for enumeration.
'   xlHAlignLeft            - (Default) Aligns input text to the left
'   xlHAlignGeneral         - Same as Default
'   xlHAlignRight           - Aligns input text to the right
'   xlHAlignCenter          - Center aligns text
'   xlHAlignCenterAcrossSelection       - Same as xlHAlignCenter
'   xlHAlignDistributed     - Distributes the text evenly within the length specified
'   xlHAlignJustify         - Same as xlHAlignDistributed
'   xlHAlignFill            - Fills the specified length with the text
'example: if input is "ABC", " ", "8", see code below for what the output will be given the different direction options
    If Len(Expression) >= length Or (padChar = "" And alignment <> xlHAlignFill) Then
        'if input is longer than pad-length padChar or no input given for padChar (note: padChar doesn't matter when
        'using xlHAlignFill) just return the input
        PadStr = Expression
    ElseIf Len(padChar) <> 1 And alignment <> xlHAlignFill Then
        'give error if padChar is not exactly 1 char in length (again, padChar doesn't matter when using xlHAlignFill)
        'padChar must be 1 char long because string() only accepts 1 char long input.
        Err.Raise vbObjectError + 513, , "input:'padChar' must have length 1." & vbNewLine & "SUB:PadStr"
    Else
        Dim pStr As String, i As Long
        Select Case alignment
            Case xlHAlignLeft, xlHAlignGeneral '(Default)
                '"ABC     "
                PadStr = CStr(Expression) & String(length - Len(CStr(Expression)), padChar)
            Case xlHAlignRight
                '"     ABC"
                PadStr = String(length - Len(CStr(Expression)), padChar) & CStr(Expression)
            Case xlHAlignCenter, xlHAlignCenterAcrossSelection
                '"   ABC  "
                pStr = String(Application.WorksheetFunction.RoundUp((length / 2) - (Len(Expression) / 2), 0), padChar)
                PadStr = pStr & Expression & pStr
            Case xlHAlignDistributed, xlHAlignJustify
                '"  A B C "       ("  A  B C " if lenth=9)
                Dim insPos As Long, loopCntr As Long: loopCntr = 1
                PadStr = Expression
                Do While Len(PadStr) < length
                    For i = 1 To Len(Expression)
                        PadStr = Left(PadStr, insPos) & padChar & Right(PadStr, Len(PadStr) - insPos)
                        insPos = insPos + 1 + loopCntr
                        If Len(PadStr) >= length Then Exit For
                    Next i
                    PadStr = PadStr & padChar
                    loopCntr = loopCntr + 1
                    insPos = 0
                Loop
            Case xlHAlignFill
                '"ABCABCAB"
                For i = 1 To Application.WorksheetFunction.RoundUp(length / Len(Expression), 0)
                    PadStr = PadStr & Expression
                Next i
            Case Else
                'error
                Err.Raise vbObjectError + 513, , "PadStr does not support the direction input ( " & direction & ")." & vbNewLine & "SUB:PadStr"
        End Select
        PadStr = Left(PadStr, length) 'output cannot be longer than the given length
    End If
End Function 
```

# sql - 插入时有超过 1 个项目

> ID：12060351
> 
> 赞同：0
> 
> 时间：2012-08-21T17:53:04.853
> 
> 标签：sql

有一个用户表。

```
Id    Name    Surname     Address     OID
1     n1      s1          a1          24
2     n2      s2          a2          24
3     n3      s3          a3          24
4     n4      s4          a4          12 
```

我想复制 OID = 24 的行。我在下面的查询中写了但是我得到了错误。

```
INSERT INTO [User] ([OID],[Name],[Surname],[Address]) SELECT * FROM [User] Where OID = 24 
```

**错误：**

> INSERT 语句的选择列表包含比插入列表更多的项目。SELECT 值的数量必须与 INSERT 列的数量相匹配。

如何在没有错误的情况下插入这些行？另外我不知道语句会返回多少条记录`SELECT`，有时可能是 1 有时是 5，有时是 15 等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T17:54:53.093

如果在select中不指定列，所有列都会出现，包括命令`Id`中没有指定的列`insert`。

这是你应该做的：

```
INSERT INTO [User] ([OID],[Name],[Surname],[Address]) 
SELECT              [OID],[Name],[Surname],[Address] 
FROM [User] Where OID = 24 
```

现在，请原谅我的坦率，但错误信息实际上是不言自明的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T17:55:18.740

```
 INSERT INTO [User] ([OID],[Name],[Surname],[Address])  
    SELECT [OID],[Name],[Surname],[Address] FROM [User] Where OID = 24 
```

您`select *` 正在检索 5 `fields`，但您只能检索`insert`4 。因此，您必须`fields`插入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:56:01.683

您的语句中有太多列`SELECT`，因为您使用的是`SELECT *`. 您应该指定要选择的列：

```
INSERT INTO [User] ([OID],[Name],[Surname],[Address]) 
SELECT OID, name, Surname, Address 
FROM [User] 
Where OID = 24 
```

这就是为什么指定您想要的列比使用更好的原因`SELECT *`

当您`SELECT *`还获得该`Id`字段但您没有将其包含在您`INSERT INTO`的查询部分中时。

# google-drive-api - 如何确定文件是否使用 Google Picker 上传或选取？

> ID：12060354
> 
> 赞同：0
> 
> 时间：2012-08-21T17:53:25.797
> 
> 标签：google-drive-api

如果我使用 Google Picker 上传文件，有没有办法确定文件是上传还是从选择器中的现有文件中选择的？

据我所知，我必须根据文件元数据进行猜测。如果返回文件 ID 的文件刚刚在 Drive 中创建，那么它可能已上传。虽然这在一个人上传一堆文件甚至将文件复制到他们的 Drive 文件夹（如果他们安装了 Google Drive for Windows）的情况下似乎是有问题的，但是他们使用选择器来选择他们刚刚上传的文件。如果本地时间和元数据时间未同步，则很难判断文件是在最后几秒还是一分钟前创建的，如果本地时间关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:06:06.377

显然，如果文件是通过选取器上传的，则传递给回调的 Document 对象（或者更确切地说是数组中传回的任何 Document 对象）的 isNew 属性设置为 true。如果不是通过选择器上传的，则该属性不存在。

这没有记录。

# python - 如何在 Python 中复制文件同时保持其目录结构？

> ID：12060358
> 
> 赞同：0
> 
> 时间：2012-08-21T17:53:44.563
> 
> 标签：python, copy, directory, file-copying

我有一个包含许多子目录的目录列表。

例如 C:\home\test\myfiles\myfile.txt

我想把它复制到我的`X:`驱动器上。`myfile.txt`如果`X:`驱动器仅包含，我该如何复制`X:\\home`？

我以为`shutil`在复制文件时会创建必要的目录，但我错了，我不确定该使用什么。

换一种说法...

我想复制`C:\\home\\test\\myfiles\\myfile.txt`到`X:\\home\\test\\myfiles\\myfile.txt`但`X:\\home\\test\\myfiles`不存在。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:34:45.247

所以这就是我最终要做的。mgilson 是对的，我需要使用 makedirs，但是我不需要复制树。

```
for filepath in myfilelist:
    try:
        with open(filepath) as f: pass
    except IOError as e:
        splitlocaldir = filepath.split(os.sep)
        splitlocaldir.remove(splitlocaldir[-1:][0])
        localdir = ""
        for item in splitlocaldir:
            localdir += item + os.sep
        if not os.path.exists(localdir):
            os.makedirs(localdir)
        shutil.copyfile(sourcefile, filepath) 
```

这会将目录分成一个列表，这样我就可以提取文件名，将路径变成一个目录。

然后我将它缝合在一起并检查目录是否存在。

如果不是，我使用 os.makedirs 创建目录。

然后我可以使用我原来的完整路径并在目录结构存在的情况下复制文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T18:00:26.437

您需要使用`os.makedirs`side `shutil.copytree`。

# iphone - 目标副本评估

> ID：12060364
> 
> 赞同：0
> 
> 时间：2012-08-21T17:54:05.157
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

我有一个场景，我正在为 iOS 构建一个框架，但是我试图通过更改专用文件中的端点来构建该文件的开发和 QA 版本。如果我可以为具有专用 url 的此类框架制作不同的目标并将其打包在一起，我会印象深刻吗？在这种情况下，我对前进有点困惑，并且不想弄乱我的项目架构，因此想知道什么是前进的更好选择？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:05:04.630

尝试使用预处理器宏功能，例如：

```
#define QA 1
#define DEV 0

#define ENV QA

#if (ENV == QA)
NSString *const url = @"http://example.com/qa";
#elif (ENV == DEV)
NSString *const url = @"http://example.com/dev";
#endif 
```

在我看来，这是处理多种环境的更简单方法

您可以更进一步，在构建设置中而不是在代码中定义 QA 和 DEV

# java - 双 SOA 客户端调用得到 SSL 握手错误

> ID：12060366
> 
> 赞同：0
> 
> 时间：2012-08-21T17:54:19.390
> 
> 标签：java, ssl

我有一个 Java 控制台应用程序，它遍历名称和帐号列表，并且将做两件事，我称之为 A 部分和 B 部分。

A 部分是使用 FedEx 公共 SOA 接口来创建运输标签。这是我编写的程序的第一部分，它运行良好。

B 部分使用我们的内部 SOA 接口将 FedEx 跟踪号写入客户帐户。这个接口基本上是

AddComment(String acctNum, 字符串注释)

我编写了一个独立的 Java 应用程序来测试 B 部分，它运行良好。

当我将 B 部分添加到原始程序中时，A 部分仍然有效，但是当我尝试执行 B 部分时出现 SSL 握手错误。

B 部分的 SOA 接口使用 SSL。

我什至设置了一个标志，以便我可以将程序作为“仅 A 部分”或“仅 B 部分”运行，并且再次，每个都单独工作，但是当一起运行时 B 部分失败。

这闻起来就像是 A 部分将某些东西留在了引擎盖下，以至于 B 部分不再像以前那样工作。

当您有两个不同的服务器时，这似乎是一个不常见的问题，这两个服务器可能都有不同的协议等。

所以我真正的问题是更笼统的，而不仅仅是编码问题。

有没有办法让我在开始 B 部分之前在我的代码中重置我的环境，以便它以独立运行的方式运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:37:12.863

我能够通过使用 SSL 上下文 setDefault 方法解决此问题，该方法似乎完全完成了我怀疑需要做的事情，即让我回到一个干净的环境。

```
sslCtx.setDefault(sslCtx); 
```

# javascript - Jquery在html()上添加换行符

> ID：12060368
> 
> 赞同：1
> 
> 时间：2012-08-21T17:54:38.870
> 
> 标签：javascript, html, css, line-breaks

```
success: function(usernames){
           //alert(usernames); ["adam","adam","adam","adam","adam"]
           //alert(usernames.length); 36
           var participants_list= eval(usernames); //adam,adam,adam,adam,adam
           //alert(participants_list.length);5
           var username= '';
           for(var i=0; i<participants_list.length; i++){

               username += participants_list[i] + "\n";

           }
           $("#usernames").html(username);
       }
    }); 
```

我正在尝试向#usernames 添加换行符，以便每个亚当将显示在新行上，但我不知道该怎么做。谢谢。

```
<td><div id="usernames">cindy</div></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:04:25.507

您需要将每个用户名包装在块级元素中，以将它们强制放在自己的单独行中。例如，

```
username = "<p>" + participants_list[i] + "</p>"; 
```

在你的情况下，也许更好的是

```
username = "<tr class='user'><td>" + participants_list[i] + "</td></tr>";

$("your table id or class").append(username); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T18:35:28.423

不是批评你，但请允许我稍微改进你的代码：
- 尽量避免使用 eval。评估是邪恶的！相反，您应该始终尝试通过在服务器端使用 jsonencode 或序列化来返回有效数据。
- 与其构建那个 for 循环，不如在 jQuery 中使用 .each() 函数会容易得多

你的代码会变成这样：

```
jQuery.each(usernames, function(index, value) {
  $('#usernames').append($('<tr><td>' + value + '</td></tr>'));   
}); 
```

我在这里为你设置了一个小例子：http: [//jsfiddle.net/YsrWs/](http://jsfiddle.net/YsrWs/)

希望这可以帮助！

# java - 如何从另一个应用程序调用 BlackBerry Traffic？

> ID：12060375
> 
> 赞同：1
> 
> 时间：2012-08-21T17:55:00.163
> 
> 标签：java, blackberry, invoke

我找到了许多关于如何从应用程序中调用应用程序的示例。我首先浏览了stackoverflow，看看是否有类似的问题，但没有我的那么具体。

有没有办法调用**黑莓交通应用程序** *并*像我目前看到的所有其他方法一样传递它的参数？（我在下面看到的方法）。它会期待什么论据？拉特，Lng？某种地图视图？我真的不确定。

目前这是我用于 Google Maps 应用程序调用的方法：效果很好：

[http://www.blackberryforums.com/developer-forum/143263-heres-how-start-google-maps-landmark.html](http://www.blackberryforums.com/developer-forum/143263-heres-how-start-google-maps-landmark.html)

这是我用于黑莓地图的方法：（我知道我也可以使用上面的方法）：

```
public void invokeBlackBerryMaps(double lat, double lng, AddressInfo addressInfo, String address)
{
    Landmark []landmarks = new Landmark[1];
    // PinPointing the exact location with lat,lng
    QualifiedCoordinates coordinates = new QualifiedCoordinates(lat, lng, 0, 0, 0);

    landmarks[0] = new Landmark(address,address,coordinates,addressInfo);
    MapsArguments mapsArgs = new MapsArguments(landmarks);
    Invoke.invokeApplication(Invoke.APP_TYPE_MAPS,mapsArgs);
} 
```

对此的任何帮助将不胜感激......

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:15:35.563

您可以调用的唯一黑莓应用程序如下，

*   地址簿
*   蓝牙配置
*   计算器
*   日历
*   相机
*   地图
*   记事簿
*   留言
*   电话
*   搜索
*   任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:57:37.763

您可以调用的核心应用程序！

[https://developer.blackberry.com/cascades/documentation/device_platform/invocation/invoking_core_apps.html](https://developer.blackberry.com/cascades/documentation/device_platform/invocation/invoking_core_apps.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:48:56.003

在 My Eclipse 中，如果您键入以下内容`Invoke.invokeApplication(Invoke.`，然后按 CTRL+空格，那么它会为您提供调用 bb 应用程序的所有可用功能。

# php - 合并具有匹配键php的数组

> ID：12060376
> 
> 赞同：0
> 
> 时间：2012-08-21T17:55:03.803
> 
> 标签：php, arrays, merge

好的，所以当他们读到这篇文章时可能有人会笑，但我无法让它发挥作用。我有两个数组。

数组 1 看起来像：

```
Array 
(

 [525133-004-TURQ/WHT-9] => Array
    (
        [classId] => 48
        [family] => Mens Shoes
        [onOrder] => 3.000
        [cost] => 45.000
        [sell] => 95.000
        [desc] => PAUL RODRIGUEZ 6, TURQ/WHT, 9
        [invStore] => 0.000
        [code] => 525133-004-TURQ/WHT-9
    )
) 
```

数组 2 看起来像：

```
Array
(

[525133-004-TURQ/WHT-9] => Array
    (
        [inv] => 0.000
    )
) 
```

需要的结果是：

```
Array 
(

 [525133-004-TURQ/WHT-9] => Array
    (
        [classId] => 48
        [family] => Mens Shoes
        [onOrder] => 3.000
        [cost] => 45.000
        [sell] => 95.000
        [desc] => PAUL RODRIGUEZ 6, TURQ/WHT, 9
        [invStore] => 0.000
        [code] => 525133-004-TURQ/WHT-9
        [inv] => 0.000
    )
) 
```

我尝试了合并，但它不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:00:58.130

使用[`array_merge_recursive`](http://php.net/manual/en/function.array-merge-recursive.php)：

```
$arr1 = array(
    '525133-004-TURQ/WHT-9' => array(
        'classId' => 48,
        'family' => 'Mens Shoes',
        'onOrder' => 3.000,
        'cost' => 45.000,
        'sell' => 95.000,
        'desc' => 'PAUL RODRIGUEZ 6, TURQ/WHT, 9',
        'invStore' => 0.000,
        'code' => '525133-004-TURQ/WHT-9'
    )
);

$arr2 = array(
    '525133-004-TURQ/WHT-9' => array(
        'inv' => 0.000
    )
);

$newArray = array_merge_recursive($arr1, $arr2); 
```

在此处查看实际操作：http: [//viper-7.com/jq8CgM](http://viper-7.com/jq8CgM)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:58:17.367

```
foreach ($arr1 as $key => $v1) {
    if (isset($arr2[$key])) {
        foreach ($arr2[$key] as $k => $v) {
            $arr1[$key][$k] = $v;
        }
    }
} 
```

如果我是正确的。

# html - 如何抓取特定的字符串

> ID：12060377
> 
> 赞同：-1
> 
> 时间：2012-08-21T17:55:03.800
> 
> 标签：html, css, ruby-on-rails, ruby, rubygems

我想抓取一个网站，对于术语（“猫”、“狗”、“斑马”），我该怎么做？我希望它的结果是给定字符串的所有实例，甚至可能是一个计数。我只能通过标签找到方法，而不是在标签内部。我应该使用什么程序或 gem？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:17:13.370

如果您为此使用 Ruby，那么 Nokogiri / Mechanize 应该是您应该使用的工具。使用这些工具进行网站抓取非常简单。

您也可以使用 javascript 来执行此操作，我认为这是最简单的方法。

检查此链接 - [http://blog.nodejitsu.com/jsdom-jquery-in-5-lines-on-nodejs/](http://blog.nodejitsu.com/jsdom-jquery-in-5-lines-on-nodejs/)

我已经使用它实现了一个简单的屏幕抓取，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:00:58.300

听起来你需要正则表达式。编写正则表达式以匹配给定的字符串。希望这会让你开始

[http://www.ruby-doc.org/core-1.9.3/Regexp.html](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:10:45.723

我发现易于使用的 PHP 库是[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

请参阅链接中的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T21:03:32.177

假设这是我们的文档：

```
doc = Nokogiri::HTML('<p>dogs</p><p>cats</p><p>zebra</p><p>bar</p><p>zebras</p><p>foo</p>') 
```

是`content`：

```
"dogscatszebrabarzebrasfoo" 
```

Using`scan`给了我们一个字符串出现的数组：

```
doc.content.scan('dogs')
[  
    [0] "dogs"
] 
```

结合所有这些：

```
doc = Nokogiri::HTML('<p>dogs</p><p>cats</p><p>zebra</p><p>bar</p><p>zebras</p><p>foo</p>')
%w[dogs cats zebra].each do |a|
  puts '%d %s' % [doc.content.scan(a).count, a]
end 
```

将输出：

```
1 dogs
1 cats
2 zebra 
```

虽然此示例看起来使用正则表达式针对原始 HTML 解析结果很容易，但该路径会导致疯狂。HTML 太不规则了，无法使用模式进行扫描，误报的机会也太高了。坚持使用解析器，使用它来提取内容，然后对其进行处理。

# ios - 如何获取布尔值 isTouching 或 touch iOS

> ID：12060385
> 
> 赞同：1
> 
> 时间：2012-08-21T17:55:25.580
> 
> 标签：ios, cocoa-touch

我正在尝试制作一个 iPhone 游戏，其设置使得基本游戏逻辑只是每 .02 触发一次的计时器

游戏的唯一控制是触摸屏幕（或不触摸屏幕），所以我想知道是否有任何简单的方法可以快速获取当前是否触摸屏幕的布尔值。

我试图避免必须输入一堆逻辑来`touchesBegan`查看`touchesEnded`当前是否有人按下了手指。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:38:33.670

您需要保持一个`NSMutableSet`正在进行的触摸，将触摸添加到集合中，`touchesBegan`并在您获得`touchesEnded`或`touchesCancelled:withEvent:`回调时从集合中删除触摸。要检查是否正在进行触摸，请检查集合中是否有任何触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:59:27.187

您可以在屏幕上放置一个按钮，并为 touchUpInside 和 touchDown 设置不同的 IBAction

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:01:34.317

如果您每 0.2 秒更新一次所有内容，并且不想在 and 中“放入一堆逻辑” `touchesBegan`，`touchesEnded`那么为什么不创建一个`BOOL`被调用的`isUserTouching`. 分别在和方法 中设置`isUserTouching = YES`或。`NO``touchesBegan``touchesEnded`

然而，简单地在游戏内容上放置一个按钮可能会导致一些奇怪的行为。

# jquery - 无法通过 jQuery 更新 Canvas

> ID：12060386
> 
> 赞同：1
> 
> 时间：2012-08-21T17:55:28.527
> 
> 标签：jquery, html, canvas

我正在尝试制作一个以零半径开始并最终变为全半径的圆形笔划动画。

我正在尝试使用 HTML5 Canvas 和 jQuery 来实现。圆圈被绘制一次，但没有动画。

**剧本：**

```
function calc(myVal) {
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    var radius = 70;

    ctx.beginPath();
    ctx.arc(140, 140, 100, myVal * Math.PI, 0, false);
    ctx.lineWidth = 10;
    ctx.stroke();
};
$(document).ready(function() {
    var count = 0;
    var parsedCount;
    function go(){  
        if (count <= 200) {
            parsedCount = count*.01
            $('#counter').html('<p>' + parsedCount + '</p>');
            calc(parsedCount);
            count++;
        }
    }
    setInterval(go, 100)
}); 
```

**的HTML：**

```
 <canvas id="myCanvas" width="400" height="400" style="border: 1px solid #000">

    </canvas>
    <div id="counter" class="" style="height: 100px; width: 100px; border: 1px solid #000">

    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:02:08.830

鉴于您提供的角度，您只是在错误的方向上绘制弧线。

做

```
ctx.arc(140, 140, 100, myVal * Math.PI, 0, true); 
```

代替

```
ctx.arc(140, 140, 100, myVal * Math.PI, 0, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:05:22.183

您的代码中有一些问题。

1.  您不应该每次都实例化上下文。
2.  你永远不会清理画布。
3.  你没有画出你想要的东西，就像@dystroy 提到的那样

[http://jsfiddle.net/lechevalierd3on/REqy6/](http://jsfiddle.net/lechevalierd3on/REqy6/)

1\. 将 canvas 和 ctx var 保持在“更高的范围”内。将它们放在全局中也不是一个好习惯。最好的办法是将所有东西包装成一个对象。

```
function Animation() {
  var canvas = document.getElementById("myCanvas");
  var ctx = canvas.getContext("2d");

  this.draw = function(val) {
   // content of calc
  }

}

var animation = new Animation();
$(function(){
  // what needs to be compute at ready
  // ...

  // setInterval a function that make the call to Animation.draw();

}) 
```

2\. 在这种情况下，您看不到它，因为您在彼此之上绘制弧线。但你实际上可以猜到混叠。

```
ctx.clearRect(0,0,canvas.width, canvas.height); 
```

# gtk - 将 GIcon 转换为 GdkPixbuf

> ID：12060387
> 
> 赞同：1
> 
> 时间：2012-08-21T17:55:35.003
> 
> 标签：gtk, gdk, gdkpixbuf

我正在使用 GAppInfo/GDesktopAppInfo。

`GIcon *icon = gtk_app_info_get_icon (G_APP_INFO(appinfo));`

现在我需要将它放在 GtkIconView 上，但我发现无法从 GIcon 创建 GdkPixbuf。有人知道吗？非常感谢！

**编辑 1：**实际上它是 GThemedIcon。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T22:02:35.360

从[文档](http://developer.gnome.org/gio/stable/GIcon.html)：

> GIcon 不提供图标的实际像素图，因为这超出了 GIO 的范围，但是 GIcon 的实现可能包含图标的名称（请参阅 GThemedIcon）或图标的路径（请参阅 GLoadableIcon）。

但是，知道图标名称可能有助于获得实际的像素图。例如，[file-roller](http://fileroller.sourceforge.net/)项目使用以下函数从*GtkIconTheme*和*GThemedIcon*获取 pixbuf ：

```
GdkPixbuf *
get_icon_pixbuf (GtkIconTheme *icon_theme,
         GThemedIcon  *icon,
         int           size) 
{
    char        **icon_names;
    GtkIconInfo  *icon_info;
    GdkPixbuf    *pixbuf;
    GError       *error = NULL;

    g_object_get (icon, "names", &icon_names, NULL);

    icon_info = gtk_icon_theme_choose_icon (icon_theme, (const char **)icon_names, size, 0);
    pixbuf = gtk_icon_info_load_icon (icon_info, &error);
    if (pixbuf == NULL) {
        g_warning ("could not load icon pixbuf: %s\n", error->message);
        g_clear_error (&error);
    }

    gtk_icon_info_free (icon_info);
    g_strfreev (icon_names);

    return pixbuf;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T16:29:31.217

请参阅以下代码了解如何从 GIcon 获取图标文件：

```
GtkIconInfo *pGtkIconInfo;
Gicon *pgIcon=gtk_app_info_get_icon (G_APP_INFO(appinfo));

GtkIconTheme *pGtkIconTheme= gtk_icon_theme_get_default();
pGtkIconInfo=gtk_icon_theme_lookup_by_gicon(pGtkIconTheme,pgIcon,256,GTK_ICON_LOOKUP_USE_BUILTIN);

//get icon filename if icone 256*256 exist.

printf("%s\n",gtk_icon_info_get_filename(pGtkIconInfo)); 
```

# linux - 如何让 Sublime Text 2 包管理器使用我的代理？

> ID：12060400
> 
> 赞同：14
> 
> 时间：2012-08-21T17:56:20.977
> 
> 标签：linux, proxy, sublimetext2, sublimetext, ubuntu-12.04

我必须通过办公室的代理工作，当我按 (Ctrl+Shift+P) 时，键入 Install 并尝试加载包列表，我收到错误“包控制：没有可安装的包”。

在我的“Package Control.sublime-settings”中，我有：

```
{
    "auto_upgrade_last_run": 1345569476,
    "http_proxy": "http://user_name:password@<proxy-name>:<proxy_port>"
} 
```

我错过了什么或者什么是我使用代理控制我的系统的更好选择。回到家后，我通常必须禁用这些代理。是否有一种真正的系统范围的方法可以使其使用代理，然后通过单个命令或单击禁用代理？

这也在 Ubuntu 12.04 中。

编辑：Sublime Text 包管理器已更新，包括通过代理工作的选项，您可以在包设置中找到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-25T08:59:22.130

您不需要该`http://`部件。例如：

```
"http_proxy": "proxy.my.net:8080",
"https_proxy": "proxy.my.net:8080", 
```

至少，这对我有用，在 Ubuntu 和 Windows 上也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:52:43.260

第一次，我能够通过使用 HTTP 而不是 HTTPS 来解决包管理器的问题，如

[http://alensiljak.blogspot.co.at/2012/11/setting-up-portable-sublime-text-2.html](http://alensiljak.blogspot.co.at/2012/11/setting-up-portable-sublime-text-2.html)

默认设置似乎尊重系统代理设置并通过代理工作，而无需明确设置“http_proxy”、“proxy_username”和“proxy_password”。

希望这会有所帮助。

有关各种设置的更多详细信息（作为记录，因为您已经提到了这些）：

[http://wbond.net/sublime_packages/package_control/settings](http://wbond.net/sublime_packages/package_control/settings)

注意：这适用于 Windows 版本。我将 Linux 版本保存在同一目录中，但目前无法确认行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T10:08:22.510

`Package Control.sublime.settings`在 Windows 7 上添加以下内容对我有用。

`{ "auto_upgrade_last_run": 1345569476, "http_proxy": "user_name:password@<proxy-name>:<proxy_port>" }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-09T13:52:17.190

我的解决方案是更改包控制设置中的 user_agent，默认情况下是特定于 sublime text 的 user_agent，但将其更改为（例如）Firefox user_agent，对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-15T18:30:59.303

如果上面的答案不起作用，我通过以下步骤修复它：

1.  打开你的 Internet Explorer
2.  工具→互联网选项→高级标签→安全性→取消复选框“检查服务器证书吊销”。
3.  重新启动你的崇高文本

希望它可以帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T12:08:21.057

也许这是您尝试过的显而易见的事情，但可能值得检查：您的操作系统环境中是否设置了 http_proxy？

# mongodb - 使用 pymongo 的 ReplicaSetConnection：有时会出现“IndexError: no such item for Cursor”

> ID：12060402
> 
> 赞同：2
> 
> 时间：2012-08-21T17:56:24.630
> 
> 标签：mongodb, replication, pymongo

我开始使用 pymongo 的（2.2.1 版）ReplicaSetConnection 对象而不是 pymongo.Connection 对象。现在，当我从数据库执行读取时，例如：

```
if cur.count() == 0:
    raise NoDocumentsFound(self.name, self.COLLECTION_NAME)
elif cur.count() > 1:
    raise TooManyDocumentsFound(self.name, self.COLLECTION_NAME)

cur.rewind()
rec = cur[0] 
```

我有时会在最后一行收到“ **IndexError: no such item for Cursor instance** ”。从我所能找到的关于这个错误的所有信息中，它应该只在您没有任何与您的查询匹配的记录时发生。但是，我已经清楚地检查了我的光标中是否有项目。ReplicaSetConnection 是否发生了一些奇怪的事情，这使得这些读取操作更加不稳定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T18:35:29.990

哦，我是个白痴。原来我有另一个线程同时运行一些测试代码。因此，有一个并发进程在我检查游标然后从中提取数据所花费的时间跨度内修改了数据库。

这是一个有趣的例子，说明游标是如何惰性的，并且游标对象本身不仅仅是一个简单的数组。

干杯，--彼得

# mysql - Perl + dbd/mysql 插入循环数据 + exp reg

> ID：12060403
> 
> 赞同：0
> 
> 时间：2012-08-21T17:56:28.017
> 
> 标签：mysql, perl

好吧，这是我的问题。

我需要在三个 tabblas nid、name、dir 中插入数据，这些都是使用正则表达式从文件中过滤出来的，并且有数千个，使用循环在三分之三中执行此操作。

文件 /home/lola/locatebookmarks 中的内容

```
"date_added": "12988591842733282",
"id": "1706",
"name": "Xenode Systems Blog: \u00BFQu\u00E9 Hacer despu\u00E9s de instalar Fedora 15?",
"type": "url",
"url": "http://otrolink.com.ar/lola.html"
"date_added": "12988591842733884",
"id": "1707",
"name": "Install Google Chrome in Fedora 16 / 15 / 14 using YUM | HowOpenSource",
"type": "url",
"url": "http://www.howopenlola.com/2011/11/"
"date_added": "12988591842734487",
"id": "1708",
"name": "Linuxant - Linux drivers for Conexant chipsets - ALSA driver with improved support for Conexant chipsets",
"type": "url",
"url": "http://urlllola.com/alsa-driver/" 
```

perl 中的这段代码。

```
use DBI;
use DBD::mysql;

$host = "localhost";
$database = "bookmarks";
$tablename = "test";
$user = "lola";
$pwd = "pass";
$connect = DBI->connect("DBI:mysql:$database:$host", $user, $pwd);

open(FILE, '/home/lola/locatebookmarks');
my @array;
my $var;
while ($i = <FILE>) {
    if ($i =~ /(id|name|http)/) {
        if ($i =~ s/("|:|,|name|id|url)//g) {
            ($key) = $i;
            push(@array, $var);
        }
    }
}
close(FILE);

$n=@array;
$n=($n/=3);
$count = 0;

for ($x = 0; $x < $n; $x++)  {
    while ($count <= 3) {
        $nid = pop(@array);
        $nombre = pop(@array);
        $dir = pop(@array);

        $query_insert = "INSERT INTO $tablename (nid, nombre, dir) 
        VALUES ('$nid', '$nombre', '$dir')";
        $query = $connect->prepare($query_insert);
        $query->execute();

    $count++;
    }
} 
```

在mysql中保存这个，但那个不好，因为保存“，”！

```
,                 Linuxant - Linux drivers for Conexant chipsets - ALSA driver with improved support for Conexant chipsets
,                 1708

,                 Install Google Chrome in Fedora 16 / 15 / 14 using YUM | HowOpenSource
,                 1707

,                 Xenode Systems Blog u00BFQuu00E9 Hacer despuu00E9s de instalar Fedora 15?
,                 1706

, , 
```

如果代码 perl 中的 VALUES 发生变化。

```
('$nid', '$nombre', '$dir')"; > VALUES ('$nid' '$nombre' '$dir')"; 
```

它的错误，在控制台中。

```
DBD::mysql::st execute failed: Column count doesn't match value count at row 1 at exp-b.pl line 38.
DBD::mysql::st execute failed: Column count doesn't match value count at row 1 at exp-b.pl line 38.
DBD::mysql::st execute failed: Column count doesn't match value count at row 1 at exp-b.pl line 38.
DBD::mysql::st execute failed: Column count doesn't match value count at row 1 at exp-b.pl line 38. 
```

我需要在mysql中。

```
 nid         nombre      dir

       1708         Linuxant - Linux drivers for Conexant chipsets - ALSA driver with improved support for Conexant chipsets    http://urlllola.com/alsa-driver/
       1707      Install Google Chrome in Fedora 16 / 15 / 14 using YUM | HowOpenSource     http://www.howopenlola.com/2011/11/
       1706         Xenode Systems Blog: \u00BFQu\u00E9 Hacer despu\u00E9s de instalar Fedora 15?       http://otrolink.com.ar/lola.html 
```

希望你能理解，问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:54:59.660

所以这：

```
open(FILE, '/home/lola/locatebookmarks');
my @array;
my $var;
while ($i = <FILE>) {
    if ($i =~ /(id|name|http)/) {
        if ($i =~ s/("|:|,|name|id|url)//g) {
            ($key) = $i;
            push(@array, $var);
        }
    }
} 
close(FILE); 
```

永远不要在 $var 中设置任何值，所以当你将它推送到 @array 时，你什么也没有推送。所以你可能想将 $i 推到 @array 上而忘记 $key。

这：

```
$n=($n/=3); 
```

应该是：

```
$n /= 3 
```

我第二个@TLP 关于在 SQL 中使用占位符而不是变量插值。

```
$query_insert = "INSERT INTO $tablename (nid, nombre, dir) 
VALUES ('$nid', '$nombre', '$dir')";
$query = $connect->prepare($query_insert);
$query->execute(); 
```

变成：

```
$query_insert = "INSERT INTO $tablename (nid, nombre, dir) VALUES (?, ?, ?)";
$query = $connect->prepare($query_insert);
$query->execute($nid, $nombre, $dir); 
```

# sql - 统计sql中每小时发生的总数或事情

> ID：12060407
> 
> 赞同：0
> 
> 时间：2012-08-21T17:56:42.723
> 
> 标签：sql, datetime

我有一个大约 3000 行的列表。每行都有不同的结束时间。见下文

```
Fund name | Fund ID   | RedeemTime  | PurchaseTime | LatestTime  |
__________  _________  ____________   ____________ | ___________ |
Title1    | IDnumber  |  4:00:00    | 14:30:00     |  14:30:00   |
Title2    | IDnumber2 | 13:30:00    | 12:00:00     |  13:30:00   |
Title3    | IDnumber3 | 10:00:00    | 14:00:00     |  14:00:00   |
Title4    | IDnumber4 | 10:00:00    | 10:30:00     |  10:30:00   | 
```

我目前正在使用第 5 列的 case 语句来查找两次中的后者。

我需要使用第 5 列并提供每小时发生的情况的计数。例如，在上面的表格中，结果将是

```
Hour     |  Count
_________ _______
10:00:00 |    1
13:00:00 |    1
14:00:00 |    2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:09:23.773

您可以在子查询中“标准化”两次。您可以使用 CTE 生成小时列表。例如，对于 2012 年 8 月的所有时间：

```
; with  HourList as
        (
        select  cast('2012-08-01' as datetime) as DateCol
        union all
        select  dateadd(hour, 1, DateCol)
        from    HourList
        where   dateadd(hour, 1, DateCol) < '2012-09-01'
        )
select  hr.DateCol
,       count(yt.StartTime)
from    HourList hr
left join
        (
        select  case when time1 > time2 then time1 else time2 end as EndTime
        from    YourTable
        ) yt
on      yt.EndTime <= hr.DateCol and hr.DateCol < dateadd(hour, 1, yt.EndTime)
group by
        hr.DateCol
option  (maxrecursion 0) 
```

如果您没有一个填满小时的表格，有办法生成它。它们都取决于您的数据库。因此，如果您需要帮助，请发布您正在使用的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:03:10.603

假设您仅使用时间字段...

首先，选择哪个时间更大：

```
(CASE WHEN time2 > time1 THEN time2
ELSE time1) as time 
```

然后你`SELECT`会`COUNT``GROUP BY HOUR(time)`

# html - 来自 HTML 表单的输入

> ID：12060412
> 
> 赞同：0
> 
> 时间：2012-08-21T17:57:12.427
> 
> 标签：html, perl

我无法找到答案，我也不确定 perl 是否可以做到这一点，但我相信我应该能够做到这一点。

我目前有一个脚本，用户提供如下参数：

```
perl X:\script.pl -ARG[0] "My Argument" -ARG[1] "Another Argument" 
```

我想在我的网站上托管它并允许查看者通过 HTML 表单给出他们的论点，我已经阅读了 CGI 的 Perl 文档，但是它似乎没有回答我的问题，或者我没有正确理解文档。为了让这个问题简单，这是我的脚本：

```
$name = "";
print "Hello $name"; 
```

如何设置我的 HTML 表单以将参数传递给 $name？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T18:53:46.563

要使用 Perl 进行 CGI，只需使用该[`CGI`模块](http://search.cpan.org/~markstos/CGI.pm-3.60/lib/CGI.pm)（预安装在 Perl 中）。它将*正确、安全地*解析表单字段，并同时处理 the`get`和`post`HTTP 方法。这比编码或复制和粘贴解决方案要容易得多。只需编写一个小 CGI 脚本来包装您的原始脚本或重写您的脚本以在 CGI 和命令行模式之间切换。

HTML：

```
<form method="post" action="myScript.pl">
  <input type="text" name="name" />
  <input type="submit" value="Submit /">
</form> 
```

珀尔：

```
#!/usr/bin/perl
use strict; use warnings;
use CGI::Carp; # send errors to the browser, not to the logfile
use CGI;

my $cgi = CGI->new(); # create new CGI object

my $name = $cgi->param('name');

print $cgi->header('text/html');

print "Hello, $name"; 
```

您使用该`param`方法获取数据字段。有关更多变体，请参阅文档。然后，您可以调用脚本并返回输出。您可能会使用`qx{…}`或`open`调用您的脚本并阅读输出。如果您想返回纯输出，您可以尝试`exec`. 请注意它不会返回（`Content-type`应该是`text/plain`）。

```
my $arg0 = $cgi->param('ARG[0]');
...;
my $output = qx{perl script.pl -ARG[0] "$arg0" -ARG[1] "$arg1"};

print $output; 
```

或者

```
my $arg0 = $cgi->param('ARG[0]');
...;

# prints directly back to the browser
exec 'perl', 'script.pl', '-ARG[0]', $arg0, '-ARG[1]', $arg1; 
```

The first form allows you prettify your ourput, our decorate it with HTML. The second form is more efficient, and the arguments can be passed safely. However, the raw output is returned.

You can use `system` instead of `exec` if the original script shall print directly to the browser, but you have to regain the control flow, e.g. to close a `<div>` or whatever.

# php - 将 URL 编码的字符串转换为希伯来语字符串

> ID：12060414
> 
> 赞同：1
> 
> 时间：2012-08-21T17:57:41.493
> 
> 标签：php

我正在尝试使用 PHP 转换这样的字符串：%D7%90%D7%93%D7%99。到希伯来语（所以我可以将它与 MySQL 查询一起使用）。

我已经在网络和 stackoverflow 上搜索了 4 个多小时，但一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:59:50.487

这是一个[URL 编码（又名百分比编码）](http://en.wikipedia.org/wiki/URL_encoding)字符串，而不是“八位字节字符串”。你只需要[`urldecode()`](http://php.net/manual/en/function.urldecode.php)它。

# php - Jenkins 的 PHP 构建失败并出现“无法运行程序“phploc””

> ID：12060422
> 
> 赞同：6
> 
> 时间：2012-08-21T17:58:15.727
> 
> 标签：php, jenkins, continuous-integration, centos

尝试运行我的构建脚本时出现以下错误。

```
/var/lib/jenkins/jobs/IPS (trunk)/workspace/build.xml:62: Execute failed: java.io.IOException:  
Cannot run program "phploc": java.io.IOException: error=2, No such file or directory 
```

我尝试切换到`jenkins`用户并且能够顺利运行脚本。我还检查了`$PATH`并尝试重新安装。没运气！

*   CentOS 5/6
*   PHP 5.4（Zend 服务器）
*   詹金斯 1.477
*   PHP QA 组件（最新）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T20:08:56.617

我终于想通了……`$PATH`在这种情况下，检查变量没有帮助。运行 Jenkins 作业时不执行各种 shell 启动文件，因此`$PATH`未正确填充变量。这可以通过以下三个步骤来解决：

1.  单击管理 Jenkins
2.  单击配置系统
3.  添加新的环境变量，其中名称为`PATH`，值为`$PATH:/usr/local/zend/bin`。

# java - 如何在 view.onClickListener 中实现方法

> ID：12060426
> 
> 赞同：-1
> 
> 时间：2012-08-21T17:58:35.110
> 
> 标签：java, android, eclipse

嗨，我为我的应用程序添加了一些检查，以检查服务器是否启动。所以我将一个方法放入 a 中`view.OnclickListener`，但出现了一些错误。我收到了这个错误

> 未定义类型 new View.OnClickListener(){} 的方法 serverRespond()

所以我想问我该如何解决这个问题？

编辑我不输入我的代码不好这是我的代码：

```
// save button click event
    btnSaveEvent.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            if ( serverRespond() == true) { 
```

我从上面得到错误。它是一个java语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:02:16.513

您可能需要引用`OnClickListener`定义您的外部类。例如，假设您的 Activity 被调用`MyActivity`。然后，像这样调用您的方法：

```
MyActivity.this.serverRespond(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:09:01.990

OnClickListener 是一个接口，你不能给它添加方法。

通常在创建实现此接口并将自身传递给视图的 Activity 时，如下所示：

```
public class MyActivity implements View.OnClickListener() {
    public void onCreate() {
        // ...
        View view = findViewById(R.id.my_view_id);
        view.setOnClickListener(this);
        //
    }

    public void onClick() {
        // do something
    }
} 
```

当然，这只是一种方法……当我们有很多回调时，创建专门的侦听器类是一种好习惯，因此活动代码不会太大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:02:05.357

在 Java 中，您不能在另一个方法中拥有一个方法。您可以在父类中实现该方法并在onClick中引用它。

# sql - 用户“sa”登录失败。错误

> ID：12060428
> 
> 赞同：-2
> 
> 时间：2012-08-21T17:58:53.693
> 
> 标签：sql, database-connection

我遇到了一个错误，我没有找到解决方案。

描述：

> 当前 Web 请求执行期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详情：

> System.Data.SqlClient.SqlException：无法打开登录请求的数据库“mcommon”。登录失败。用户“sa”登录失败。

我的 SQL 字符串：

```
PACKET SIZE=4096;USER ID=sa;PASSWORD=**hidden**;
DATA SOURCE=localhost;PERSIST SECURITY INFO=False;
INITIAL CATALOG=mcommon;CONNECTION TIMEOUT=60; 
```

我认为我的 SQL 字符串是正确的，因为我可以用这个字符串连接另一台服务器。我的 SQL 用户信息是真实的——我可以连接 SQL Management Studio。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:03:12.720

无论您是否认为，您的连接字符串都不正确。我的建议是这`Data Source`是不正确的，但确实无法判断。

不过，有一件事是肯定的。您**不**应该在您的应用程序中使用该`sa`帐户。

# java - 如何使用批处理脚本中的参数调用程序？

> ID：12060432
> 
> 赞同：2
> 
> 时间：2012-08-21T17:59:00.353
> 
> 标签：java, windows, batch-file

我喜欢确定哪些 Java 运行时环境可用并检查它们的版本。我的代码将输出正确的 jre 路径，但无法执行 java.exe。

当程序路径是变量时，使用批处理脚本中的参数调用程序的正确方法是什么？

**我的剧本**

```
@echo off

:findjres
for /d %%i in ("C:\Program Files\Java\jre*") do (
    set /a cpath+=1
    call :pushpath "%%i"
)
for /d %%i in ("C:\Program Files (x86)\Java\jre*") do (
    set /a cpath+=1
    call :pushpath "%%i"
)
goto :versjres

:pushpath
set tpath=%1
set xpath!%cpath%=%tpath:~1,-1%
goto :end

:versjres
for /f "usebackq delims==! tokens=1-3" %%i IN (`set xpath`) do (
    echo Array field number %%j have value %%k
    %%k\bin\java.exe --version
)

pause

:end 
```

**错误**

```
Exception in thread "main" java.lang.NoClassDefFoundError: Files
Caused by: java.lang.ClassNotFoundException: Files
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: Files.  Program will exit. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T18:07:29.543

换行

```
%%k\bin\java.exe --version 
```

到

```
"%%k\bin\java.exe" -version 
```

它对我有用。

# javascript - jQuery 列表过滤器不起作用（未捕获的类型错误：无法读取未定义的属性 '3'）

> ID：12060440
> 
> 赞同：0
> 
> 时间：2012-08-21T17:59:18.760
> 
> 标签：javascript, jquery

我正在运行 jQuery 1.8.0.min.js

当我开始在输入框中输入以过滤列表时，什么也没有发生，在 Chrome 调试器中，我收到以下错误：

未捕获的类型错误：无法读取未定义的属性“3”

指向线：

```
jQuery.expr[':'].Contains = function (a, i, m) {
            return (a.textContent || a.innerText || "").toLowerCase().indexOf(m[3].toLowerCase()) >= 0;
        }; 
```

代码：

```
(function ($) {
    jQuery.expr[':'].Contains = function (a, i, m) {
        return (a.textContent || a.innerText || "").toLowerCase().indexOf(m[3].toLowerCase()) >= 0;
    };
    function listFilter(list) {
        var input = $('#classroomSearch');
        $(input)
          .change(function () {
              var filter = $(this).val();
              if (filter) {
                  $(list).find("a:not(:Contains(" + filter + "))").parent().slideUp();
                  $(list).find("a:Contains(" + filter + ")").parent().slideDown();
              } else {
                  $(list).find("li").slideDown();
              }
              return false;
          })
        .keyup(function () {
            $(this).change();
        });
    }
    $(function () {
        listFilter($("#filterList"));
    });
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:58:04.343

```
jQuery.expr[":"].contains = jQuery.expr.createPseudo(function(arg) {
    return function( elem ) {
        return jQuery(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
    };
  }); 
```

我将其更改为上述内容，现在可以使用。

在这里找到它：[https ://github.com/nakajima/jquery-livesearch/issues/5](https://github.com/nakajima/jquery-livesearch/issues/5)

# python - 通过按下另一个 py 文件上的按钮打开一个 py 文件

> ID：12060442
> 
> 赞同：1
> 
> 时间：2012-08-21T17:59:20.677
> 
> 标签：python, wxpython

我正在使用带有多个 *.py 脚本的 wxpython 编写游戏，当我按下主脚本中的一个按钮时，我想启动另一个脚本。

示例：我为具有多个选项的游戏菜单窗口启动了一个 *.py 脚本。当我按下选项按钮时，它将启动分配给该按钮的另一个脚本并打开选项窗口

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:32:26.003

与其在单击按钮时启动另一个 *.py 文件，不如重新考虑如何组织代码。将每个窗口分成不同的 python 脚本可能不是要走的路。这需要你对子进程做一些混乱的事情，你最终可能会遇到大量的竞争条件。

更好的方法是将[代码组织成模块](http://docs.python.org/tutorial/modules.html)，将它们导入主程序，并在需要时调用它们。

例如，如果您将与游戏配置有关的所有内容都放在一个`settings`模块中并导入它，而不是告诉操作系统使用 Python 解释器运行脚本，您可以只`settings.show_window()`从主程序中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:48:02.943

启动一个新的 Python 脚本通常是使用 os.system 或 subprocess 完成的，但听起来你想要做的只是在 wxPython 中打开另一个框架或对话框。如果是这样，那么只需将所有辅助框架代码放入一个单独的文件中并将其导入主文件。然后在主框架的按钮事件处理程序中实例化框架并显示它。如果您正在显示一个对话框，这同样适用。您可以在这里看到显示辅助框架的一般想法：http: [//www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)（虽然它隐藏了主框架在那个例子中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:28:13.140

好吧，我建议`os`仅在您想在脚本关闭之前运行脚本的情况下才使用模块，或者换句话说，例如在地面上制作主脚本并专注于选项窗口

`os.system('script_name.py'`在 Windows 中使用) <

或`os.system('python script.py')`< 在 Linux 中授予权限后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T18:01:49.840

您是否尝试过使用子流程？

您可以将按钮事件分配给子进程以启动另一个 py 脚本。

# php - MySQL：SUBTIME() 没有负值？

> ID：12060450
> 
> 赞同：0
> 
> 时间：2012-08-21T17:59:31.507
> 
> 标签：php, mysql, sql, datetime

我需要比较两个时间间隔。问题是时间间隔可能从 09:00:00 到 02:00:00 不等。当您尝试获取此期间的行时，不会显示任何行，因为开始时间大于结束时间。

所以我想如果我从我使用的每个值中减去 3 小时，那么查询就会起作用。周期范围为 06:00:00 - 23:00:00，结束时间总是大于开始时间。

但是，我尝试使用 SUBTIME() 来执行此操作，但正如文档所述，02:00:00 - 03:00:00 是 -01:00:00，我需要它是 23:00:00。

这可能吗？如何实现？

我对任何其他解决方案持开放态度，所以这是“现实世界”问题：

我有一张保龄球预订的桌子，它们都在早上 9 点到午夜 2 点之间开始，在这段时间之间也有一个结束时间。我需要进行搜索并让客户说出他/她希望在哪个时间间隔内查看预订。因此，他/她应该能够搜索例如在 23:00 和 02:00 之间开始和结束的预订。所以我说预订开始时间应该>=比搜索开始时间，预订结束时间应该<=比搜索结束时间。这作为算法非常好，除了 MySQL 23:00 比 02:00 大。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:04:45.147

尝试将期间结束点存储为日期时间值（而不是时间）。

然后对结果使用 timediff 或 timestampdiff。

哇，主管应该雇佣有合适技能的人来设计软件，然后听取他们的意见，但这不是重点。

你仍然可以做你想做的事。作为子查询添加以下两个变量：

```
(case when start < '4:00:00' then dateadd('2000-01-02 00:00:00', start)
      else dateadd('1900-01-01 00:00:00', start
 end) as startwithday
(case when end < '4:00:00' then dateadd('2000-01-01 00:00:00', end )
      else dateadd('1900-01-01 00:00:00', end 
 end) as endwithday 
```

这些将时间转换为 2000 年 1 月 1 日或 1 月 2 日的时间。这是一个任意日期，但现在您可以对这些字段进行差异计算。

# .net - 当我在 .Net WCF Web 服务中创建 Oracle 连接时，为什么会收到“System.TypeInitializationException”？

> ID：12060453
> 
> 赞同：0
> 
> 时间：2012-08-21T17:59:40.133
> 
> 标签：.net, wpf, wcf, oracle, odac

我目前正在实施 WCF 服务，该服务与后端的 Oracle 10g 数据库通信。当我尝试从我的服务中连接到数据库时，出现以下异常：`System.TypeInitializationException`.

*   我在 Windows 7（64 位机器）上运行。

*   我正在使用 VS 2010。

*   我在后端使用 Oracle 10g。

*   我是来自以下已安装实例的 Oracle.DataAccess.dll (ODP.Net)

    ```
     c:\oracle\product\10.2.0\.....\ODP.NET\bin\1.x\Oracle.DataAccess.dll 
    ```

*   我已将此 DLL 包含在我的 WCF 服务的引用中。

*   我已将此服务作为一个项目包含在我的 VS WPF 解决方案中。

*   当我在 VS 2010 中启动 WPF 应用程序时，该服务会自动启动。

在运行时，我在调试输出窗口中看到以下输出：

> 'WcfSvcHost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC\Oracle.DataAccess\1.102.2.20__89b483f429c47342\Oracle.DataAccess.dll' 'System.TypeInitializationException 类型的第一次机会异常'发生在 Oracle.DataAccess.dll

果然，我在调试器中查看异常详细信息，看到以下信息（当我尝试创建新的 ORACLE 连接时会出现这种情况）：

> “'Oracle.DataAccess.Client.OracleConnection' 的类型初始化程序引发了异常。” InnerException {“提供程序与 Oracle 客户端版本不兼容”} System.Exception {Oracle.DataAccess.Client.OracleException}

### 一点背景：

我基本上是将我的数据层迁移到 WCF 服务。相同的服务层以前存在于 WinForm 应用程序中。在我的 WinForm 应用程序中一切正常。我包含对 Oracle.DataAccess.dll 的相同引用，并且我对数据库的所有读/写操作都可以正常工作。

WCF 和 WinForm 对 DLL 的访问/使用之间是否存在明显不同？有一些我不知道的限制吗？在调试器中通过 VS2010 运行这个有问题吗？

我完全不知道这里发生了什么。任何提示/方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:08:50.980

不，您需要注意的 .NET 方面没有什么特别之处。
此特定错误的一些原因是：

1.  您的应用程序以 .NET 4 为目标，但您只安装了用于 .NET 2 甚至 .NET 1 的 ODP.NET
2.  您正在使用本地 Oracle Instant 客户端，但缺少一些非托管 DLL。

* * *

实际上，您的异常消息表明它试图从 GAC 加载版本号为 1.102.2.20 的 Oracle.DataAccess.dll。这似乎是 ODP.NET 的**.NET 1**版本，因为 .NET 2 的版本号为**2** .102.2.20，而 .NET 4 的版本号为**4** .102.2.20。

也许您的 Winforms 应用程序在其 bin 文件夹中有一个版本的 Oracle.DataAccess.dll 并且正在使用它而不是 GAC 中的那个版本？

* * *

这些问题是我在项目中切换到本地 Oracle Instant 客户端的原因。这为我的部署增加了 130 MB，但这并不重要，因为它都是公司软件。

# css - 调整导航栏的大小以与内容框具有相同的宽度

> ID：12060454
> 
> 赞同：0
> 
> 时间：2012-08-21T17:59:47.437
> 
> 标签：css, html-table, row, cell

我正在尝试在主内容页面上方添加一个矩形图像（类似于添加导航栏）。主要内容页面可以通过 'mainContainer' 来识别，而矩形图像可以在 'navBar' 内部来识别。这里有一个问题：我希望导航栏（或矩形图像）与“mainContainer”或内容页面的宽度相同。CSS代码部分是：

```
#navBar
    {
        background-image:url('images/Register/navbar.jpg');
        opacity:0.8; filter: alpha(opacity=80);     
        height:38px;
        border:solid 1px black;
        background-repeat:repeat-x;

    } 
```

这是主页编码的一部分。

```
<body>      
    <table id="mainContainer" align="center"> 
    <tr>
        <td>
            <form action="Register.php" method="post" id="standardsize">
                <table>

                <tr>
                    <td colspan="2" id="largesize"><img src="images/Register/sign up today.png"/></td>
                </tr>

                <tr>
                    <td><input type="text" name="name" maxlength="30" value="<?php echo "$name";?>" /></td>
                    <td><img src="images/Register/whats your name.png"/></td>
                </tr>

                <tr>
                    <td><input type="text" name="newuser" maxlength="20" value="<?php echo "$newid";?>""/></td>
                    <td><img src="images/Register/username.png"/></td>
                </tr>

                <tr>
                    <td><input type="text" name="email" maxlength="20" /></td>
                    <td><img src="images/Register/email.png"/></td>
                </tr>

                <tr>
                    <td><input type="password" name="newpass" value="" maxlength="20"/></td>
                    <td><img src="images/Register/password.png" /></td>
                </tr>

                <tr>
                    <td><input type="password" name="verifynewpass" name="verifypass" value="" maxlength="20"/></td>
                    <td><img src="images/Register/retypepassword.png"/></td>
                </tr>

                <tr>
                    <td colspan="2">
                        <!--Signup submit button-->     
                        <input type="image" src="images/Register/sign up2.png" />
                    </td>
                </tr>
                </table>
            </form>
        </td>
        <td>
            <!--AFRICAN PIC-->
            <div class="rigthPanel">

            </div>
        </td>
        </tr>

    </table> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T03:00:42.353

窃取 Matthew 的小提琴，您只需要为容器设置一个大小，然后将左/右的边距设置为自动。

[http://jsfiddle.net/USWzB/3/](http://jsfiddle.net/USWzB/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:18:04.023

编辑：我很抱歉你想要相反的。我在下面修复了我的帖子：

如果您想要使用 Javascript 获取宽度的动态方式，您可以简单地调用 document.getElementById("mainContainer").style.width 或 document.getElementById("mainContainer").style.offsetWidth 如果第一个没有工作。并将导航栏的 style.width 设置为等于该值。

请注意，由于您使用 jpg 作为导航栏，它看起来会根据您的表格宽度而变形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:36:50.217

`navBar`将和都包裹`mainContainer`在 a 中`div`，然后将其浮动，`div`使其仅扩展至足以包含`mainContainer`.

（小提琴：http: [//jsfiddle.net/USWzB/2/](http://jsfiddle.net/USWzB/2/)）

标记：

```
<div id="wrap">
    <div id="navBar">Here's the nav</div>
    <div id="mainContainer">
        This content is wider than navBar's, so navBar will have to expand.
    </div>
</div> 
```

CSS：

```
#wrap { float: left; } /* so it is only as wide as mainContainer */ 
```

这假设`mainContainer`总是比 更宽`navBar`。

# spring - Spring @ResponseBody 和特定于版本的 Accept 标头

> ID：12060458
> 
> 赞同：1
> 
> 时间：2012-08-21T17:59:51.240
> 
> 标签：spring, rest

我想根据在`Accept`RESTful 端点收到的标头提供不同的内容类型。

```
application/myapp-v1.0+json
application/myapp-v1.0+xml 
```

有什么办法可以做到这一点`@ResponseBody`吗？通过允许我只返回一个对象并让句柄调用杰克逊，这似乎是一个方便的捷径，`HttpMessageConverter`但我就是无法让它工作。每当我连接多个 MimeType 时，都会出现 406 响应。

对于这次迭代，我最终自己查询了请求标头并自己返回了适当的视图处理程序，但我不介意将来重新访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:23:41.293

如果您使用的是 Spring 3.1，则可以使用[`@RequestMapping`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html). 注释3.1 的新`RequestMapping`成员是这些成员：

1.  [`consumes()`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#consumes%28%29)-- 允许您按`Content-type`请求标头过滤。
2.  [`produces()`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#produces%28%29)-- 允许您按`Accept`请求标头过滤。

还可以应用一些简单的表达式来使其更加健壮。

```
@RequestMapping(consumes = {"application/json", "application/xml"})

@RequestMapping(consumes = {"!text/plain"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:19:07.400

您可能可以按照这个 SO question 中的建议做一些事情：

[在 Spring MVC 中管理自定义 Accept 标头](https://stackoverflow.com/questions/12027668/managing-custom-acccept-header-in-spring-mvc/12030729#12030729)

```
class MyAppV1JsonConverter extends MappingJacksonHttpMessageConverter{
    public MyAppV1JsonConverter (){
        super(MediaType.valueOf("application/myapp-v1.0+json"));
        // OR setSupportedMediaTypes(Collections.singletonList(MediaType.valueOf("application‌​/myapp-v1.0+json")));
    }
} 
```

..

# powershell - 在 Windows 8 上使用 PowerShell 2 作为默认版本

> ID：12060460
> 
> 赞同：7
> 
> 时间：2012-08-21T17:59:56.060
> 
> 标签：powershell, powershell-3.0

我想在不指定`-Version`开关的情况下使用 PowerShell 2 作为 Windows 8 上的默认 PowerShell 版本。

我开始使用 PowerShell 3 附带的 Windows 8 RTM，并且我的脚本与 PowerShell 3 不兼容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T21:34:32.450

Powershell 使用[发布者策略](http://msdn.microsoft.com/en-us/library/dz32563a.aspx)（另请参见[此处](http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=VS.90%29.aspx)）自动将针对 Powershell 2 构建的主机重定向到 Powershell 3 运行时（如果可用）。

大多数情况下，这正是您想要的，但是如果您的应用需要，您可以明确禁用发布者策略。

将其放入您的 app.config 文件以禁用 System.Management.Automation（powershell 运行时）的发布者策略：

```
<configuration>
  <runtime>
     <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
       <dependentAssembly>
         <assemblyIdentity name="System.Management.Automation" publicKeyToken="31bf3856ad364e35" />
         <publisherPolicy apply="no" />
      </dependentAssembly>
     </assemblyBinding>
  </runtime>
</configuration> 
```

对其进行测试（针对 .NET 4.0 的控制台应用程序，明确引用 PS v2 运行时）：

```
PowerShell ps = PowerShell.Create();
ps.AddScript("$psversiontable");
var result = ps.Invoke()[0].BaseObject as Hashtable;

Console.WriteLine("Powershell version: {0}", result["PSVersion"]);
Console.WriteLine(".NET version: {0}", typeof(string).Assembly.GetName().Version); 
```

在我的 Win8 机器上运行这个（PSv3 肯定在那里），我得到了结果

```
Powershell version: 2.0
.NET version: 4.0.0.0 
```

如果我注释掉 app.config，PS 版本会变为 3.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:17:29.180

您说您有一个托管 PowerShell 的自定义应用程序，并且脚本嵌入在应用程序中。假设这个应用程序名为“MyApp.exe”。现在，PowerShell 3.0 需要 .NET 4.0 (CLR4)，因此强制应用程序使用 PowerShell 2.0 的方法是强制应用程序使用 .NET 3.5 (CLR2)。这将导致它加载 System.Management.Automation 的 1.0.0.0 版本，而不是仅适用于 CLR4 的 3.0.0.0 版本。在与应用程序相同的文件夹中创建一个“MyApp.exe.config”，内容如下：

```
<?xml version="1.0" encoding="utf-8" ?> 
<configuration>
 <startup>
  <supportedRuntime version="v2.0.50727"/>
 </startup>
</configuration> 
```

现在，如果您的应用程序是针对 CLR4 和 PowerShell 2.0 构建的，那么您的麻烦就更大了。希望不是这样。

# vim - :set 选项的显示值

> ID：12060462
> 
> 赞同：35
> 
> 时间：2012-08-21T18:00:01.967
> 
> 标签：vim, option

如果您不提供`:colorscheme`参数，那么它会显示 vim 当前使用的颜色方案的名称。vim 中是否有类似的方式来显示是否设置了选项，或者如果选项的值不是布尔值，则该选项的值设置为什么？例如，如果我想知道是否`autoindent`已设置或我想知道 的值`textwidth`，我将如何找到它？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-21T18:04:30.447

使用`:set`命令。

*   `:set autoindent?`打印选项及其值（如果有）。Vim*切换选项*（布尔值，打开/关闭的选项），例如`autoindent`，前缀`no`表示它们已关闭，因此`:set autoindent?`将显示`autoindent`或`noautoindent`。
*   `:set autoindent`打开`autoindent`。
    *   此表单打开切换*选项*
    *   对于数字或字符串选项，这会显示选项的值，因此`:set textwidth`也会打印选项的值。对于数字或字符串选项，`:set option`等效于`:set option?`.
*   `:set autoindent!`反转选项。`autoindent`变成`noautoindent`.
*   `:set autoindent&`恢复`autoindent`为默认值。
*   用 设置数字或字符串选项`:set option=value`，例如`set tabstop=3`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T18:03:43.437

用于`:set textwidth?`显示 的值`textwidth`。

用于`:verbose set textwidth?`显示上次设置此值的位置。

通常，您可以`?`在设置名称后添加以显示其当前值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T18:06:52.807

你可以从 vim-wiki学习[查询选项的方法。](http://vim.wikia.com/wiki/Displaying_the_current_Vim_environment)您可以使用 列出所有选项`:set all`。

# ios - 是否可以以编程方式将表行设置为删除模式？

> ID：12060465
> 
> 赞同：0
> 
> 时间：2012-08-21T18:00:20.920
> 
> 标签：ios

我有一个表格视图，如果用户长按一行会弹出一个菜单，菜单中的一个选项是删除该行。

如果用户选择删除选项，我想让删除按钮看起来就像用户侧滑了单元格一样。

是否可以将单个单元格设置为编辑/删除模式？我从 API 中看不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:19:57.717

您可以伪造在删除模式下仅显示一个单元格的效果。使用这种方法：

```
-(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == myEditableCellIndex)   // myEditableCellIndex would 
       return YES;                              // change based what cell you 
                                                // are editing.
    return NO;
} 
```

所以现在每当你进入编辑模式时，只有那个单元格会显示编辑控件。

希望这可以帮助。

# android - Phonegap + localStorage 引发错误

> ID：12060471
> 
> 赞同：0
> 
> 时间：2012-08-21T18:00:31.363
> 
> 标签：android, cordova

我正在尝试使用phonegap和localStorage创建一个应用程序，它在iOS上运行良好，但在Android上我收到以下错误：“返回的sqlite：错误代码= 14，msg =无法在[42537b6056]的第27205行打开文件”。

我正在寻找答案（谷歌搜索:)）但没有成功。

代码和堆栈跟踪如下。

先感谢您。

```
 // Wait for Cordova to load
        document.addEventListener("deviceready", onDeviceReady, false);

        function onDeviceReady() {
            customers = {
                "data" : [
                    {
                        "name" : "Myself"
                    }
                ]
            }
            navigator.notification.alert(customers.data[0].name);
            window.localStorage.setItem("customers", JSON.stringify(customers));

            var retrievedCustomers = window.localStorage.getItem("customers");
            c = JSON.parse(retrievedCustomers);
            console.log(c);
            navigator.notification.alert(c.data[0].name);

        } 
```

堆栈跟踪：

```
08-21 14:49:05.063: D/DroidGap(11816): DroidGap.onCreate()
08-21 14:49:05.223: D/CordovaWebView(11816): Origin to allow: http://127.0.0.1*
08-21 14:49:05.223: I/CordovaLog(11816): Found log level DEBUG
08-21 14:49:05.223: I/CordovaLog(11816): Changing log level to DEBUG(3)
08-21 14:49:05.223: I/CordovaLog(11816): Found preference for useBrowserHistory=false
08-21 14:49:05.223: D/CordovaLog(11816): Found preference for useBrowserHistory=false
08-21 14:49:05.233: D/DroidGap(11816): DroidGap.init()
08-21 14:49:05.253: D/CordovaWebView(11816): >>> loadUrl(file:///android_asset/www/index.html)
08-21 14:49:05.253: D/PluginManager(11816): init()
08-21 14:49:05.263: D/CordovaWebView(11816): >>> loadUrlNow()
08-21 14:49:05.273: D/SoftKeyboardDetect(11816): Ignore this event
08-21 14:49:05.303: D/SoftKeyboardDetect(11816): Ignore this event
08-21 14:49:05.353: D/SoftKeyboardDetect(11816): Ignore this event
08-21 14:49:05.413: D/DroidGap(11816): onMessage(onPageStarted,file:///android_asset/www/index.html)
08-21 14:49:05.463: D/szipinf(11816): Initializing inflate state
08-21 14:49:05.463: D/szipinf(11816): Initializing zlib to inflate
08-21 14:49:05.513: D/szipinf(11816): Initializing inflate state
08-21 14:49:05.513: D/szipinf(11816): Initializing inflate state
08-21 14:49:05.513: D/szipinf(11816): Initializing zlib to inflate
08-21 14:49:05.583: D/szipinf(11816): Initializing zlib to inflate
08-21 14:49:05.593: D/szipinf(11816): Initializing inflate state
08-21 14:49:05.603: D/szipinf(11816): Initializing zlib to inflate
08-21 14:49:05.813: D/dalvikvm(11816): GC_CONCURRENT freed 134K, 44% free 3390K/6023K, external 0K/0K, paused 4ms+9ms
08-21 14:49:09.143: D/Cordova(11816): onPageFinished(file:///android_asset/www/index.html)
08-21 14:49:09.143: D/CordovaWebView(11816): >>> loadUrlNow()
08-21 14:49:09.143: D/DroidGap(11816): onMessage(onNativeReady,null)
08-21 14:49:09.143: D/DroidGap(11816): onMessage(onPageFinished,file:///android_asset/www/index.html)
08-21 14:49:09.183: I/Database(11816): sqlite returned: error code = 14, msg = cannot open file at line 27205 of [42537b6056]
08-21 14:49:09.253: E/Cordova(11816): Error loading url gap://ready
08-21 14:49:09.253: E/Cordova(11816): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=gap://ready }
08-21 14:49:09.253: E/Cordova(11816):   at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
08-21 14:49:09.253: E/Cordova(11816):   at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
08-21 14:49:09.253: E/Cordova(11816):   at android.app.Activity.startActivityForResult(Activity.java:2827)
08-21 14:49:09.253: E/Cordova(11816):   at android.app.Activity.startActivity(Activity.java:2933)
08-21 14:49:09.253: E/Cordova(11816):   at org.apache.cordova.CordovaWebViewClient.shouldOverrideUrlLoading(CordovaWebViewClient.java:187)
08-21 14:49:09.253: E/Cordova(11816):   at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:216)
08-21 14:49:09.253: E/Cordova(11816):   at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:323)
08-21 14:49:09.253: E/Cordova(11816):   at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 14:49:09.253: E/Cordova(11816):   at android.os.Looper.loop(Looper.java:130)
08-21 14:49:09.253: E/Cordova(11816):   at android.app.ActivityThread.main(ActivityThread.java:3835)
08-21 14:49:09.253: E/Cordova(11816):   at java.lang.reflect.Method.invokeNative(Native Method)
08-21 14:49:09.253: E/Cordova(11816):   at java.lang.reflect.Method.invoke(Method.java:507)
08-21 14:49:09.253: E/Cordova(11816):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
08-21 14:49:09.253: E/Cordova(11816):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
08-21 14:49:09.253: E/Cordova(11816):   at dalvik.system.NativeStart.main(Native Method)
08-21 14:49:11.153: D/DroidGap(11816): onMessage(spinner,stop)
08-21 14:49:14.316: D/CordovaWebView(11816): KeyDown has been triggered on the view
08-21 14:49:14.323: D/CordovaWebView(11816): >>> loadUrlNow()
08-21 14:49:14.783: D/DroidGap(11816): onDestroy()
08-21 14:49:14.783: D/CordovaWebView(11816): >>> loadUrlNow()
08-21 14:49:14.783: D/CordovaWebView(11816): >>> loadUrlNow()
08-21 14:49:14.803: D/DroidGap(11816): onMessage(onPageStarted,about:blank)
08-21 14:49:14.863: D/Cordova(11816): onPageFinished(about:blank)
08-21 14:49:14.863: D/DroidGap(11816): onMessage(onPageFinished,about:blank)
08-21 14:49:14.863: D/DroidGap(11816): onMessage(exit,null)
08-21 14:49:19.843: D/dalvikvm(11816): GC_EXPLICIT freed 350K, 49% free 3118K/6023K, external 0K/0K, paused 61ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:24:57.243

您发布的代码看起来不错。我最近创建了一个带有 localstorage 选项的 phonegap 应用程序，我能看到的唯一区别是我使用`localStorage.setItem`了`window.localStorage.setItem`.

From the error message, you cannot guess what the exact error is. JavaScript is difficult language to debug especially with mobile apps. The approach that works for me mostly is by commenting out lines of code and see if the app works fine without some lines (actually it works the other way, comment out all the code you suspect first and verify the app is working, than start uncommenting lines, 2-3 at a time and see if the app is still working). Once you find out the exact culprit, it is easier to fix.

# javascript - 合并、缩小和替换对 JS 和 CSS 文件的引用

> ID：12060474
> 
> 赞同：8
> 
> 时间：2012-08-21T18:00:43.567
> 
> 标签：javascript, css, maven, minify

有没有一种解决方案可以合并和缩小 js 和 css 文件，然后在原始 html 文件中替换对它们的引用？我找到了许多可以缩小和合并的解决方案，但没有一个可以替换原始 html 文件中的引用。来自[http://mojo.codehaus.org/webminifier-maven-plugin/](http://mojo.codehaus.org/webminifier-maven-plugin/)的 Web Minifier Maven 插件完全符合我对 JS 文件的要求，但不处理 CSS 文件。有什么可以做的吗？我们的构建过程使用 Maven，因此解决方案需要是 Maven 插件或脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:59:40.210

Google Closure Tools provides all of this functionality.

# References

*   [Closure Tools Reference](https://developers.google.com/closure/) (includes compiler and HTML templates).
*   [Closure Stylesheets](http://code.google.com/p/closure-stylesheets/)

The Closure-compiler supports Maven integration.

# javascript - 在背景图像上添加文本并缩放图像

> ID：12060475
> 
> 赞同：0
> 
> 时间：2012-08-21T18:00:45.667
> 
> 标签：javascript, html, css

我是 HTML、CSS 和 Javascript 的新手。我想添加一些背景图片。添加图像后，我可以将该图像分解为小 div 并将文本添加到这些 div 中吗？是否可以。也请给我一些关于如何进行的指示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:06:34.180

查看我为您制作的这个演示：

*   [http://jsfiddle.net/bq6Ju/1/](http://jsfiddle.net/bq6Ju/1/)

每一个都是和`chunk`绝对定位`<div>`与[花卉背景](http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpghttp://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg)。为每个块移动背景位置。`z-index:0`

在顶部，您有`<div>`容器，绝对定位`z-index:1`（这就是为什么在顶部）带有一些文本。

希望这对你来说是一个开始。

# c# - 我怎样才能使这个查询列表更短？

> ID：12060479
> 
> 赞同：-4
> 
> 时间：2012-08-21T18:01:07.157
> 
> 标签：c#

我只是想听听是否有更简单的方法来做到这一点。

```
public void Model(string _model)
        { 
            var list =
                    from vehicle in vehiclesorted
                    where vehicle.Model == _model
                    orderby vehicle.Price
                    select vehicle;
            vehiclesorted = list.ToList();
        }

        public void Brand(string _brand)
        {
            var list =
                    from vehicle in vehiclesorted
                    where vehicle.Brand == _brand
                    orderby vehicle.Price
                    select vehicle;

            vehiclesorted = list.ToList();
        }

        public void Mph(int _mph)
        {
            var list =
                from vehicle in vehiclesorted
                where vehicle.Mph <= _mph
                orderby vehicle.Price
                select vehicle;

            vehiclesorted = list.ToList();
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T18:04:17.037

您可以将其重构为采用谓词进行过滤的方法：

```
private void CreateSortedList(Func<Vehicle, bool> predicate)
{
    vehiclesorted = vehiclesorted.Where(predicate).OrderBy(v => v.Price).ToList();
} 
```

然后调用变为：

```
public void Mph(int _mph)
{
    CreateSortedList(v => v.Mph <= _mph);
}
public void Brand(string _brand)
{
    CreateSortedList(v => v.Brand == _brand);
} 
```

话虽这么说，制作多个公共方法，每个过滤器在单个私有集合上看起来确实是一个奇怪的设计选择，特别是因为后续调用过滤了*先前过滤的结果*。您可能希望每次都过滤原始列表。

考虑返回过滤结果而不是在每次调用时改变内部列表通常也是一个好主意。这将在使用此类时提供更简洁的 API 并减少意外。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T18:07:05.433

我在您的代码中看到的问题：

*   方法应该被称为`FilterByModel`,`FilterByBrand`等。
*   为什么是`vehiclesorted`一个`List`？将其存储为 a `IEnumerable<Vehicle>`，并且仅`List`在需要读取其值时将其转换为 a 。
*   `vehiclesorted`不是一个很好的名字-怎么样`vehiclesSorted`？
*   您不需要在每次过滤列表时重新排序。
*   使用 lambda 的内联 LINQ 语法在这里可能更清楚。

所以这就是我将如何重构这些方法：

```
private IEnumerable<Vehicle> vehiclesSorted;

public void FilterByModel(string _model)
{ 
    vehiclesSorted = vehiclesSorted.Where(v => v.Model == _model);
}

public void FilterByBrand(string _brand)
{
    vehiclesSorted = vehiclesSorted.Where(v => v.Brand == _brand);
}

public void Mph(int _mph)
{
    vehiclesSorted = vehiclesSorted.Where(v => v.Mph <= _mph);
}

public List<Vehicle> Vehicles {
    get {
        return vehiclesSorted.ToList();
    }
} 
```

# websphere - 获取 websphere MQ 中队列管理器的所有配置

> ID：12060480
> 
> 赞同：1
> 
> 时间：2012-08-21T18:01:08.850
> 
> 标签：websphere, ibm-mq

有没有办法获取队列、通道等的所有属性。使用单个 mq 命令并将其存储在文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T01:42:16.940

我相信[MS03](http://www-01.ibm.com/support/docview.wss?rs=171&q1=mA1J&uid=swg24000673&loc=en_US&cs=utf-8&lang=en) SupportPac 会满足您的需求。引用...

**摘要** 此 SupportPac (saveqmgr) 将本地或远程队列管理器中定义的所有对象（例如队列、通道等）保存到文件中。

# objective-c - View 持有强引用？

> ID：12060483
> 
> 赞同：1
> 
> 时间：2012-08-21T18:01:33.610
> 
> 标签：objective-c, iphone, view, weak-references, strong-references

快速提问：我`ViewController`的`IBOutlet`for a`UILabel`会`ViewController's view`自动持有对标签的强引用吗？而且，如果我以编程方式创建一个`UIPopoverController ivar`输入`ViewController`并以`UIPopoverController ivar`编程方式将其放在屏幕上也会`ViewController's view`自动保持对它的强引用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T18:14:48.943

您应该对不属于视图层次结构的任何视图保持强引用。您的视图控制器已经对其`view`属性（主视图）具有强引用，并且所有子视图都将由其父视图保留，因此您实际上不需要对它们进行强引用，您可以对这些视图进行弱引用。

但是，如果您有任何不在主视图中的视图（例如，在 .xib 文件中定义的附加视图，您稍后可能会添加到主视图中，或者您想要删除的子视图之一并以编程方式重新添加），那么您应该对这些视图有强烈的参考。

另请注意，当您在视图控制器中持有对视图的强引用时，您应该设置它`self.strongViewRef = nil`，`viewDidUnload`因为在卸载视图时不需要它（例如，当视图控制器在后台时，例如被另一个完整的-屏幕视图）。再次加载视图时，该属性将自动重新设置为该视图的新实例。

关于弹出框，它会在呈现时保留（`window`我认为），但我建议您在需要时保持对它的强引用，然后`nil`在完成后将该指针设置为。通过这种方式，您可以保证您可以在需要时访问它，在某些情况下，这可能是在它呈现之前或在它被关闭之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:10:45.427

[苹果](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW6)现在建议保留对通过界面构建​​器创建的视图的弱引用，除了根单一视图层次结构将负责保留视图

但是，如果您手动创建它，您希望在将新创建的视图添加到视图层次结构之前至少具有局部强变量，然后您可以将其分配给弱 ivar，这样它就不会在分配给弱 ivar 后立即丢失，例如：

```
// Somewhere in .h
__weak UIView *_myView;

// Somewhere in .m
_myView = [[UIView alloc] init];
[self.view addSubview:_myView]; 
```

没有多大意义，`_myView`会立即丢失

```
// Somewhere in .h
__weak UIView *_myView;

// Somewhere in .m
UIView *myLocalView = [[UIView alloc] init];
[self.view addSubview:myLocalView];
_myView = myLocalView; 
```

非常安全，因为您分配了一个由视图层次结构本身管理的变量

`UIPopoverController`，另一方面，根据文档，您应该始终保留（例如 __strong ivar）。不仅如此，如果您不保留它，您将遇到一个令人讨厌的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:08:20.340

您不需要使出口变得强大，因为视图控制器应该被强烈持有，一旦它消失，就没有理由坚持出口，因为视图不再存在，所以出口弱就可以了。该视图本身具有指向它们的强指针。

编辑：抱歉忘了说是的，你应该保持指向popovercontroller的强指针

# gradle - 如何找出 Gradle 上次缓存依赖项的时间

> ID：12060490
> 
> 赞同：0
> 
> 时间：2012-08-21T18:01:56.937
> 
> 标签：gradle

在我的 Gradle 脚本中，我将 JavaCC 声明为它自己的自定义“javacc”配置中的依赖项。然后，我使用该配置找出 JavaCC JAR 的路径并将该路径写入属性文件，该文件稍后在 Gradle 之外由 Ant 使用。

现在，我`build.gradle`文件的相关部分如下所示：

```
configurations {
    javacc
}

repositories {
    mavenCentral()
}

dependencies {
    javacc group: 'net.java.dev.javacc', name: 'javacc', version: '5.0'
}

task cleanBuildHelpers(type: Delete) {
    delete '.buildHelpers/ant.properties'
}

task prepareBuildHelpers(dependsOn: cleanBuildHelpers) << {
    ant.propertyfile(file: '.buildHelpers/ant.properties') {
        entry(key: 'javacc_jar', value: configurations.javacc.files.iterator().next())
    }
} 
```

这就像我想要的那样工作，我可以这样离开它。但是，`prepareBuildHelpers`每当我运行依赖于它的其他任务时，该任务总是会执行。这没什么大不了的，但我想知道是否有办法让它只在 Gradle 更新 JavaCC JAR 时运行。

我正在考虑检查 JAR 的时间戳并将其与属性文件的时间戳进行比较，但我不知道这是否是正确的方法以及是否有更好、更优雅的方法来执行此操作。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:07:38.077

正确的解决方案是声明`prepareBuildHelpers`任务的输入和输出。假设您想在 Jar 文件的路径名（而不是其内容）更改时重新运行任务：

```
task prepareBuildHelpers(dependsOn: cleanBuildHelpers) {
    inputs.property "javaccJarPath", configurations.javacc.singleFile
    outputs.file '.buildHelpers/ant.properties'
    doLast {
        ant.propertyfile(file: '.buildHelpers/ant.properties') {
            entry(key: 'javacc_jar', value: configurations.javacc.singleFile
        }
    }
} 
```

由于该任务编辑现有文件，因此输出声明不太准确，并且该任务将在对该文件进行任何外部更改后重新运行。如果这是不可取的，请尝试`outputs.upToDateWhen { true }`。

PS：注意在文件集合中引用单个文件的简化方式。

# iphone - iPhone 滚轮选择器菜单 我正在开发一个 UIWebView iPhone 应用程序和移动网站，在应用程序中我有许多 <select>菜单，每个菜单包含 100 多个项目！我想知道是否有办法将</select> 菜单拆分为子菜单，以便 iPhone 用户更轻松地进行选择，例如：我有这个用于我的数据库设置：| 子类别 | 食品 | -------------------------------------------------- |鸡蛋和奶酪 |炒 | |早餐

> ID：12060498
> 
> 赞同：0
> 
> 时间：2012-08-21T18:02:21.370
> 
> 标签：iphone, xcode, uiwebview, menu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T23:01:21.120

我在这里解决了我的问题：[在 Xcode 中向 UIPickerView 添加搜索功能，或者在 UITableView 中打开 <select> 菜单](https://stackoverflow.com/questions/12061079/add-a-search-function-to-uipickerview-in-xcode-or-open-select-menu-in-uitable/12451423#12451423)

我使用 jQuery 通过网站过滤应用程序之外的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:04:30.477

看一下这个：

[https://github.com/arkichek/AFPickerView](https://github.com/arkichek/AFPickerView)

# jboss - Jboss 7.1.1、JDK1.6 和 drools 5.4 final，日志中出现异常

> ID：12060500
> 
> 赞同：1
> 
> 时间：2012-08-21T18:02:24.423
> 
> 标签：jboss, drools

我正在使用 Jboss 7.1.1、JDK1.6 和 drools 5.4 最终版本。

创建 KnowledgeBuilder 对象时，在 jboss 日志中不断出现异常。drools jar 位于 war 文件外部，并且路径已在 module.xml 中指定。任何想法如何解决此问题或导致此问题的原因是什么？请告诉我，

谢谢

-J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:57:59.060

> java.lang.ClassNotFoundException: org.drools.builder.impl.KnowledgeBuilderFactoryServiceImpl

看起来 drools-core 或 drools-compiler jar 不在类路径中。

# sql - SQL Server 2000 中的“，”附近出现不正确的语法错误

> ID：12060501
> 
> 赞同：-2
> 
> 时间：2012-08-21T18:02:26.737
> 
> 标签：sql, tsql, sql-server-2000

我正在使用 SQL Server 2000 中的 SQL 查询分析器运行此查询：

```
create table TABLENAME(
        DBID_ bigint not null,
        CLASS_ varchar(255) not null,
        DBVERSION_ integer not null,
        KEY_ varchar(255),
        CONVERTER_ varchar(255),
        HIST_ bit,
        EXECUTION_ bigint,
        TASK_ bigint,
        LOB_ bigint,
    DATE_VALUE_ timestamp,
        DOUBLE_VALUE_ double,
        CLASSNAME_ varchar(255),
        LONG_VALUE_ bigint,
        STRING_VALUE_ varchar(255),
        TEXT_VALUE_ longvarchar,
        EXESYS_ bigint,
        primary key (DBID_)
    ); 
```

但是会出现错误：

> 服务器：消息 170，级别 15，状态 1，第 12 行第 12 行：“，”附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:04:29.103

问题在于列`double`上的数据类型`DOUBLE_VALUE_`。您需要将其更改为不同的数据类型

您还使用了无效的`longvarchar`on 列数据类型：`TEXT_VALUE_`

您也很可能需要替换`timestamp`为`datetime`. 根据相应列的名称 ( `DATE_VALUE_`)，您似乎误`timestamp`认为是与时间戳有关的类型，而与时间戳[无关](http://msdn.microsoft.com/en-us/library/aa260631%28v=sql.80%29.aspx "时间戳（SQL Server 2000）")。

```
create table TABLENAME(
        DBID_ bigint not null,
        CLASS_ varchar(255) not null,
        DBVERSION_ integer not null,
        KEY_ varchar(255),
        CONVERTER_ varchar(255),
        HIST_ bit,
        EXECUTION_ bigint,
        TASK_ bigint,
        LOB_ bigint,
        DATE_VALUE_ timestamp, -- consider changing this to datetime
        DOUBLE_VALUE_ double, -- change this to another datatype -- use float
        CLASSNAME_ varchar(255),
        LONG_VALUE_ bigint,
        STRING_VALUE_ varchar(255),
        TEXT_VALUE_ longvarchar,  -- change this datatype -- varchar(8000) or text
        EXESYS_ bigint,
        primary key (DBID_)
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:04:22.793

`double`不是有效的日期类型。尝试`real`，或`float`。

> float：具有以下有效值的浮点精度数字数据：-1.79E + 308 到 -2.23E - 308、0 和 2.23E + 308 到 1.79E + 308。
> 
> real ：具有以下有效值的浮点精度数字数据：-3.40E + 38 到 -1.18E - 38、0 和 1.18E - 38 到 3.40E + 38。

[MSDN 页面。](http://msdn.microsoft.com/en-us/library/aa258271%28v=sql.80%29.aspx)

# dart - mod_dart 已经死了 - 帮我重建它

> ID：12060502
> 
> 赞同：2
> 
> 时间：2012-08-21T18:02:30.900
> 
> 标签：dart

自从我第一次听说飞镖以来，我一直在看和玩飞镖。这个想法很棒，但是语言的一个方面仍然无法实现。服务器端处理。我不是在谈论建立一个隔离来响应 http 请求，我对真正的马力感兴趣。

Sam McCall 几个月前创建了 mod_dart apache 模块 - 但似乎已经放弃了它。它不能与当前版本的 Dart 一起编译，他也没有回应报告的问题。我在 github 上分叉了他的代码，做了一些更改——但是虽然我能够编译它——但我仍然缺少一些东西，因为它不会加载到 apache 中。

这是 Sam McCalls mod_dart 网址： [https ://github.com/sam-mccall/mod_dart](https://github.com/sam-mccall/mod_dart)

这是我的： [https ://github.com/stutteringp0et/mod_dart](https://github.com/stutteringp0et/mod_dart)

我一直在向 Sams 项目上发布的问题添加更多信息，但没有任何回应 - 我正在转向这里寻找愿意帮助我实现这一目标的人。

我有一种感觉，当合适的人看到它时 - 解决方案将很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:16:35.190

我已经修复了编译错误（我认为；请检查！）。有关更多详细信息，请参阅问题：[https ://github.com/sam-mccall/mod_dart/issues/1](https://github.com/sam-mccall/mod_dart/issues/1)

# javascript - 如何将两个 JavaScript 语句合二为一

> ID：12060505
> 
> 赞同：5
> 
> 时间：2012-08-21T18:02:48.483
> 
> 标签：javascript

有时我想将两个语句合并为一个以省略条件中的花括号。例如，在 PHP 中，而不是写

```
if ($direction == 'south-east') {
    $x++;
    $y++;
    } 
```

我会写

```
if ($direction == 'south-east') $x++ and $y++; 
```

但是有没有办法在 JavaScript 中做到这一点？写作`x++ && y++`好像不行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T18:06:59.530

花括号并没有那么糟糕，但是——在非常特殊的情况下——你可以[使用逗号来增强你的代码](http://javascriptweblog.wordpress.com/2011/04/04/the-javascript-comma-operator/)：

```
if (direction == 'south-east') x++, y++; 
```

这是小提琴：http: [//jsfiddle.net/FY4Ld/](http://jsfiddle.net/FY4Ld/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:04:47.220

`{ }`您使用的就是这样做的 - 将语句组合在一个块中，可与任何流控制语句一起使用。您可以将整个块放在一行上 - 在这种情况下，JS 不关心空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T18:08:35.473

你可以这样做：

```
var x = 0,
    y = 0,
    cond = true;

if (cond) ++x && ++y; 
```

`-1`注意：如果 x 是;这不起作用

或没有`if`：

```
cond && ++x && ++y; 
```

* * *

所以你的代码看起来像这样：

```
if ($direction == 'south-east') $x++ && $y++; 
```

请注意，运算符位于变量之后，这意味着如果is `++`，这将不起作用。`$x``0`

`++x`如果 x 是则`-1`
`x++`返回 falsy 如果 x 是则返回 falsy`0`

# d3.js - 为每个轴标签创建具有不同颜色的径向图表

> ID：12060507
> 
> 赞同：2
> 
> 时间：2012-08-21T18:02:59.870
> 
> 标签：d3.js, label

是否可以为每个轴标签创建一个具有不同颜色的 d3.js 径向图表？我试过用下面的代码来做，但没有成功：

```
.style(function() {
    for (var i = 0; i < unhealthyArray.length; i++) {
        if ($.inArray(unhealthyArray[i], capitalMeta) != -1) {
             return "fill","red";
        }
        else {
            console.log("black ",capitalMeta);
            return "fill","black";
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:12:33.617

请记住，`.style`每个元素都会调用它，也就是说，您无需在其中放置循环。我认为你想要的类似于

```
.style("fill", function(d) {
      if ($.inArray(d, capitalMeta) != -1) {
           return "red";
      } else {
           return "black";
      }
  }); 
```

# php - PHP 会话在 IE 中不起作用

> ID：12060510
> 
> 赞同：0
> 
> 时间：2012-08-21T18:03:16.877
> 
> 标签：php, session

我想我已经正确地将数据设置为 Session，Firefox 可以正确获取会话数据，但 IE 无法获取会话数据并返回 bool(false)。这个错误可能是什么问题？

我是 PHP 新手，我想知道为什么 PHP 在客户端而不是服务器上设置会话（就像 Java 一样）。

设置会话数据：

```
 $queryuser = $this->user_model->getUser($username, sha1($password));
        if(!empty($queryuser) && count($queryuser) > 0) {
            $user = array('islogin'=>true, 'userid'=>$username, 'nickname'=>$queryuser['nickname'], 'status'=>$queryuser['status']);
            $this->session->set_userdata('user', $user); 
```

获取会话数据：

```
 $user = $this->session->userdata('user'); 
```

我知道会话的概念，我在两个浏览器上分别进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:17:23.183

回复：“我是 PHP 新手，我想知道为什么 PHP 在客户端而不是服务器上设置会话（就像 Java 一样）。”

HTTP 上下文中的会话由两部分组成：

1.  存储在服务器上的数据，浏览器无法访问。
2.  某种令牌或标识符，通过它可以唯一标识特定用户（即特定浏览器会话）。由于 HTTP 从根本上说是“无状态”协议，因此必须将此令牌提供给客户端，并在每次请求时由客户端发回。这通常采用 HTTP“cookie”的形式，这可能是您在这里遇到的问题，尽管它也可以通过其他（浏览器可见）方式传递，例如将其添加到所有 URL 的末尾。

无论您使用哪种语言编写 Web 应用程序，上述内容都是正确的。他们所能做的就是为了您的方便而隐藏它。

# javascript - Ember 在模型上找不到 find() 方法

> ID：12060512
> 
> 赞同：5
> 
> 时间：2012-08-21T18:03:19.297
> 
> 标签：javascript, ember.js

Ember 似乎找不到我在我的属性模型上实现的`findAll()`和方法。`find()`以下是我得到的错误：

```
TypeError: App.Property.findAll is not a function 
```

和

```
Error: assertion failed: Expected App.Property to implement `find` for use in 'root.property' `deserialize`. Please implement the `find` method or overwrite `deserialize`. 
```

我的路由器是这样设置的：

```
App.Router = Ember.Router.extend({
    showProperty: Ember.Route.transitionTo('property'),
    root: Ember.Route.extend({
        home: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                router.get('applicationController').connectOutlet('home', App.Property.findAll());
            }
        }),
        property: Ember.Route.extend({
            route: '/property/:property_id',
            connectOutlets: function(router, property) {
                router.get('applicationController').connectOutlet('property', property);
            },
        }),
    })
}); 
```

这是我的模型：

```
App.Property = Ember.Object.extend({
    id: null,
    address: null,
    address_2: null,
    city: null,
    state: null,
    zip_code: null,
    created_at: new Date(0),
    updated_at: new Date(0),
    find: function() {
        // ...
    },
    findAll: function() {
        // ...
    }
}); 
```

我究竟做错了什么？这些方法应该放在 Property 模型上还是应该放在其他地方？我应该重写`deserialize()`方法而不是使用`find()`吗？但即使我使用该解决方法`findAll()`仍然无法正常工作，我仍然会遇到第一个错误。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T18:22:12.497

`find`and`findAll`方法应该在 中声明，而`reopenClass`不是在 中`extend`，因为您要定义类方法，而不是实例方法。例如：

```
App.Property = Ember.Object.extend({
    id: null,
    address: null,
    address_2: null,
    city: null,
    state: null,
    zip_code: null,
    created_at: new Date(0),
    updated_at: new Date(0)
});

App.Property.reopenClass({
    find: function() {
        // ...
    },
    findAll: function() {
        // ...
    }
}); 
```

# c# - 在 C# 中将字符串转换为键

> ID：12060513
> 
> 赞同：3
> 
> 时间：2012-08-21T18:03:24.433
> 
> 标签：c#, key, keystroke, typeconverter

假设我们将 KeyCode 值存储为字符串。如何将其转换回 KeyCode？

例如，我在 keydown 事件中捕获了一个键：

```
string modifier = e.Modifiers.ToString(); // Control
string key_string = e.KeyCode.ToString(); // D1 
```

如何做到以下几点？

```
Keys old_key_restored = (Keys)key_string; 
```

上面的代码不起作用。

编辑：丹尼尔是救生员；）

```
Keys key_restored = (Keys) Enum.Parse(typeof(Keys), key_key); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T18:04:38.940

它只是一个枚举，因此您可以使用[`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/dd783499.aspx)

# android - ICS 的 HttpsURLConnection getContent nullpointerexception

> ID：12060514
> 
> 赞同：0
> 
> 时间：2012-08-21T18:03:25.547
> 
> 标签：android, widget, nullpointerexception, android-4.0-ice-cream-sandwich, httpsurlconnection

尝试从 HttpsURLConnection 读取数据时出现 java.lang.NullPointerException。

HttpsURLConnection.getContent() 为空

此问题仅发生在 4.0 (ICS) 及更高版本上。在 2.0、3.0 等上，代码工作正常。

我在 asyncTask 中进行网络操作。我可能应该提到这是一个小部件。

我已经阅读了很多关于 POST 转向 GET 并更改 setDoOutput 的内容，但这些内容似乎对我没有任何影响。帮助！

```
08-14 00:18:51.871: D/myWidget(757): http method:POST doOutput:true
08-14 00:18:53.871: D/myWidget(757): dies here. Null:true
08-14 00:18:53.871: W/System.err(757): java.lang.NullPointerException
08-14 00:18:53.871: W/System.err(757):  at com.james.myWidget.Widget.postSSL(Widget.java:587)
08-14 00:18:53.871: W/System.err(757):  at com.james.myWidget.Widget.access$4(Widget.java:540)
08-14 00:18:53.871: W/System.err(757):  at com.james.myWidget.Widget$asyncUpdate.doInBackground(Widget.java:251)
08-14 00:18:53.871: W/System.err(757):  at com.james.myWidget.Widget$asyncUpdate.doInBackground(Widget.java:1)
08-14 00:18:53.871: W/System.err(757):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
08-14 00:18:53.881: W/System.err(757):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-14 00:18:53.881: W/System.err(757):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-14 00:18:53.881: W/System.err(757):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-14 00:18:53.881: W/System.err(757):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-14 00:18:53.881: W/System.err(757):  at java.lang.Thread.run(Thread.java:856) 
```

这是我的代码，这都在 AsyncTask 的 doInBackground 中。

```
private Result postSSL(String urlString, String postParams, Cookie cookie){
    debugLog("postSSL: "+urlString);
    try {
        URL url = new URL( urlString );
        HttpURLConnection http = null; 

        if (url.getProtocol().toLowerCase().equals("https")) { 
            trustAllHosts(); 
            HttpsURLConnection https = (HttpsURLConnection) url.openConnection(); 
            https.setHostnameVerifier(DO_NOT_VERIFY); 
            http = https; 
        } else { 
            http = (HttpURLConnection) url.openConnection(); 
        }

        http.setRequestMethod("POST");
        http.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 

        http.setUseCaches(false);
        http.setDoInput(true);
        http.setDoOutput(true);

        debugLog("http method:"+http.getRequestMethod()+" doOutput:"+String.valueOf(http.getDoOutput()));

        //Set cookie

        if (cookie.hasCrumbs()){
            //debugLog("postSSL sending cookie :"+cookie.toString());
        http.setRequestProperty("Cookie", cookie.toString());                   
    } 

        //Send request
        if (postParams.length()>0){
            DataOutputStream ostream = new DataOutputStream( http.getOutputStream() );
            ostream.writeBytes(postParams);
            ostream.flush();
            ostream.close();
        }

        //Read response
        Object contents = http.getContent();
        InputStream is = (InputStream) contents;

        StringBuffer responseBuffer = new StringBuffer();
        debugLog("dies here. Null:"+String.valueOf(is==null));
        int c;
        while( ( c = is.read() ) != -1 ) {
            responseBuffer.append( (char) c );
        }
        is.close();        

        //Get the cookie 
    /*String cookie = http.getHeaderField("set-cookie"); 
    if(cookie!=null && cookie.length()>0){ 
        sCookie = cookie;               
    }*/

    // Multi cookie handling:                   
    String responseHeaderName = null;
    for (int i=1; (responseHeaderName = http.getHeaderFieldKey(i))!=null; i++) { 
        if (responseHeaderName.toLowerCase().equals("set-cookie")) {
            cookie.update(http.getHeaderField(i));
            //debugLog("postSSL cookie["+String.valueOf(i)+"] received :"+ http.getHeaderField(i));
        } 
    }

        http.disconnect();
        //debugLog("postSSL cookie received :"+cookie.toString());
        Result res = new Result(responseBuffer.toString(),cookie);
        return res;
    } catch (Exception e){
        e.printStackTrace();
        return new Result("postSSL Exception:"+e.getMessage());
    }
} 
```

要忽略 ssl 证书，我还有：

```
//SSL Cert workaround

// always verify the host - dont check for certificate 
final static HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() { 
    public boolean verify(String hostname, SSLSession session) { 
        return true; 
    } 
}; 

/** 
 * Trust every server - dont check for any certificate 
 */ 
private static void trustAllHosts() { 
        // Create a trust manager that does not validate certificate chains 
        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() { 
        public java.security.cert.X509Certificate[] getAcceptedIssuers() { 
            return new java.security.cert.X509Certificate[] {}; 
        } 

        public void checkClientTrusted(X509Certificate[] chain, 
            String authType) throws CertificateException { 
        } 

        public void checkServerTrusted(X509Certificate[] chain, 
            String authType) throws CertificateException { 
        } 
        } }; 

        // Install the all-trusting trust manager 
        try { 
        SSLContext sc = SSLContext.getInstance("TLS"); 
        sc.init(null, trustAllCerts, new java.security.SecureRandom()); 
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory()); 
        } catch (Exception e) { 
        e.printStackTrace(); 
        } 
} 
```

# java - 用于分析 Java 应用程序的 CPU 缓存性能的工具？

> ID：12060519
> 
> 赞同：7
> 
> 时间：2012-08-21T18:03:50.177
> 
> 标签：java, performance, metrics, cpu-cache

我对操作系统没有偏好；任何工具都可以，只要它允许我测量 Core 2 和 i7 架构上的缓存性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:10:25.437

该团队有一个产品[http://www.jclarity.com/](http://www.jclarity.com/)是新产品，但使用 CPU 性能计数器来提取缓存命中/未命中信息和其他低级内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T23:18:55.357

在我看来，目前唯一能做到这一点的工具是英特尔 VTune 性能分析器。它不是非常昂贵，但它也不便宜。

[英特尔的这篇文章](http://software.intel.com/en-us/system/files/article/149015/how-to-spice-up-java-with-the-vtune.pdf)概述了使用此工具提高 Java 应用程序性能的过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T18:26:19.843

我不确定这对您是否足够，但我多次使用**JVisualVM**（包含在 JDK 中，至少是 Sun 的）作为分析工具，我对它非常满意。

要找到它，请访问：`JAVA_HOME/bin/jvisualvm(.exe)`

# c# - 公共静态字典不保留价值

> ID：12060521
> 
> 赞同：0
> 
> 时间：2012-08-21T18:04:05.190
> 
> 标签：c#, wcf

我有一个代理 WCF 服务，它驻留在客户端的 IIS 中，并向下调用外部 WCF 服务（由 Windows 服务调用）。由于统计信息是从 Windows 服务收集的，因此它们存储在以下 m_statList 字典中。

```
public static Dictionary<int, LinkedList<StatValue>> m_statList = new Dictionary<int,    LinkedList<StatValue>>();
public static Dictionary<int, LinkedList<StatValue>> Stats
{
    get
    {
        return m_statList;
    }
} 
```

m_statList 会在服务运行时保留这些值，但是一旦代理在 m_statList 中进行调用，就会将计数设置为零。

以下是我从内部代理服务拨打电话的方式：

```
public Dictionary<int, List<StatValue>> GetStats(DateTime getFromDate, List<int> getValueList)
    {
        Dictionary<int, List<StatValue>> returnList = new Dictionary<int, List<StatValue>>();

        foreach (var stat in DashboardCollectorService.Stats.Where(k => getValueList.Contains(k.Key)))
        {
            returnList.Add(stat.Key, stat.Value.Where(s => s.StatDateTime > getFromDate).ToList<StatValue>());
        }

        return returnList;
    } 
```

当我从代理调用统计信息时，我不确定我的 m_statList 是否为空。

```
public class DashboardProxyService : IDashboardWCFService
{
    DashboardWCFService buffer = new DashboardWCFService();

    Dictionary<int, List<StatValue>> IDashboardWCFService.GetStats(DateTime getFromDate, List<int> getValueList)
    {
        return buffer.GetStats(getFromDate, getValueList);
    }

    List<StatType> IDashboardWCFService.GetStatTypes()
    {
        return buffer.GetStatTypes();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:17:09.983

您是否为应用程序池禁用了 IIS Web 园？

对于 IIS 6，请参阅[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/659f2e2c-a58b-4770-833b-df96cabe569e.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/659f2e2c-a58b-4770-833b-df96cabe569e.mspx?mfr=true)

对于 IIS 7，打开 IIS 控制面板。单击左侧树中的“应用程序池”节点。找到您的应用程序的应用程序池并右键单击。选择“高级设置...”的菜单选项。在“流程模型”标题下，您应该具有以下设置：

```
最大工作进程 = 1
空闲超时 = 0

```

其中第一个，“最大工作进程”控制网络花园，后者只是阻止 IIS 在空闲时卸载您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:18:57.963

静态数据一直`AppDomain`存在。默认情况下，IIS 可以重新启动应用程序池，并卸载您的`AppDomain`. 因此，下次您调用 IIS 托管服务时，将会有另一个域。

# listview - 在 listview scolling 期间 RadioButton 更改状态

> ID：12060522
> 
> 赞同：0
> 
> 时间：2012-08-21T18:04:10.343
> 
> 标签：listview, radio-button, radio-group

我有一个 ListView，它有一个 TextView 和一个 RadioGroup，每行有 2 个 RadioButtons 作为子项。现在我可以在每一行中选择一个 RadioButton。但是如果我滚动 ListView，我的选择就消失了，或者它不能正确显示。例如，我在第一行选择 RadioButton A，如果我滚动 ListView 然后再次返回第一行 B 被选中而不是 A。我该如何解决这个问题？有谁能够帮我？我会很感激的。

```
package com.rextart.org.mico.view.adapter;

import java.sql.SQLException;
import java.util.ArrayList;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ImageButton;
import android.widget.RadioButton;
import android.widget.TextView;

import com.rextart.org.mico.R;
import com.rextart.org.mico.dao.entity.TabNonConf;
import com.rextart.org.mico.dao.entity.TabSopralluoghi;
import com.rextart.org.mico.dao.service.TabNonConfService;
import com.rextart.org.mico.dao.service.TabSopralluoghiService;
import com.rextart.org.mico.utils.StoreForArrTabNonConf;

public class ListaNonConformitaAdapter extends ArrayAdapter<TabNonConf> {

    private ArrayList<TabNonConf> arrNonConf;
    private LayoutInflater mInflater;
private Context context;
private boolean visible;
private TabSopralluoghi objSop;
protected ViewHolder holder;

public ListaNonConformitaAdapter(Context context, TabSopralluoghi objSop, int resource, ArrayList<TabNonConf> arrNonConf,boolean visible) {
    super(context, resource, arrNonConf);
    this.context = context;
    this.arrNonConf = arrNonConf;
    this.visible = visible;
    this.objSop = objSop;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    final TabNonConf tab = arrNonConf.get(position);
    if (convertView == null){
        mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = mInflater.inflate(R.layout.adapter_item_non_conformita, null);
    }
    holder = new ViewHolder();
    holder.conforme = (RadioButton)convertView.findViewById(R.id.conf_si);
    holder.nonConforme = (RadioButton)convertView.findViewById(R.id.conf_no);
    holder.nomeNonConf = (TextView)convertView.findViewById(R.id.nome_non_conformita);
    holder.indice = (TextView)convertView.findViewById(R.id.numero_non_conformita);
    holder.elimina = (ImageButton)convertView.findViewById(R.id.elimina_non_conf);

    setclickableCheck(holder);

    if(visible){
        holder.elimina.setVisibility(View.VISIBLE);
    }else{
        holder.elimina.setVisibility(View.INVISIBLE);
    }

    if(tab.getDescNonConf().length()>25){
        holder.nomeNonConf.setText(tab.getDescNonConf().substring(0, 25)+" ...");
    }else{
        holder.nomeNonConf.setText(tab.getDescNonConf());
    }

    int posizione = position+1;
    holder.indice.setText(saveString(""+posizione));

    if(tab.getFlagOk()==1){
        holder.conforme.setChecked(true);
        holder.nonConforme.setChecked(false);
    }else{
        holder.conforme.setChecked(false);
        holder.nonConforme.setChecked(true);
    }

    holder.conforme.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if(isChecked){
                tab.setFlagOk(1);
            }else{
                tab.setFlagOk(0);
            }
            StoreForArrTabNonConf.getInstance().add(tab);
        }
    });

    holder.elimina.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            AlertDialog.Builder alert = new AlertDialog.Builder((Activity)context);
            alert.setTitle("");
            alert.setCancelable(true);
            alert.setMessage(R.string.eliminazione);
            alert.setPositiveButton(R.string.label_ok,new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {                   
                    try {
                        TabNonConfService objConfService = new TabNonConfService(((Activity)context).getApplication());
                        objConfService.delete(tab);
                        ArrayList<TabNonConf> arr = objConfService.getList(""+objSop.getId());
                        if(arr.isEmpty()){
                            TabSopralluoghiService objService = new TabSopralluoghiService(((Activity)context).getApplication());
                            objService.delete(objSop);
                        }
                        ListaNonConformitaAdapter.this.remove(ListaNonConformitaAdapter.this.getItem(position));
                        notifyDataSetChanged();
                    } catch (SQLException e) {}
                }
            });
            alert.setNegativeButton(R.string.label_annulla,new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {                   
                    dialog.cancel();
                }
            });
            alert.show();
        }
    });

    return convertView;
}

/**
 * @description method to set if the radiobuttons are clickable or not
 * @param holder
 */
protected void setclickableCheck(ViewHolder holder) {
    holder.conforme.setClickable(true);
    holder.nonConforme.setClickable(true);
}

/**
 * @description method to return the value of a object's field or an empty string
 * @param field
 * @return field from the object or space
 */
private String saveString(String field){
    if (field == null) 
        return "";
    else 
        return field;
}

static class ViewHolder{
    RadioButton conforme;
    RadioButton nonConforme;
    TextView nomeNonConf;
    TextView indice;
    ImageButton elimina;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:22:40.273

希望我的回复不会太晚。

我有几天同样的问题。具有文本视图和 2 个单选按钮的自定义适配器。

滚动后，所选状态出错。

在尝试了很多方法后，我解决了这个问题。

GIST：将 RadioGroup 对象添加到您的视图持有者。确保在加载单选按钮状态之前清除单选组。不用担心 item.getType()，这是我项目的自定义类。只需查看 ((OKFHolder)holder).radioGroup.clearCheck();

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View row = convertView;
    ChecklistItemHolder holder = null;

    ChecklistItem item = objects.get(position);

    if(row == null) {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(R.layout.temp_okf_listview_item, parent, false);

        holder = new OKFHolder();
        holder.position = position;
        ((OKFHolder)holder).radioGroup = (RadioGroup)row.findViewById(R.id.temp_okf_radio_group);
        ((OKFHolder)holder).okButton = (RadioButton)row.findViewById(R.id.temp_okf_radio_ok);
        ((OKFHolder)holder).okButton.setOnClickListener(this);
        ((OKFHolder)holder).failButton = (RadioButton)row.findViewById(R.id.temp_okf_radio_fail);
        ((OKFHolder)holder).failButton.setOnClickListener(this);
        holder.titleText = (TextView)row.findViewById(R.id.temp_okf_text);
        row.setTag(holder);
    }

    else {
        holder = (ChecklistItemHolder)row.getTag();
    }

    if(item.getType() == ChecklistItem.OKF_ONLY) {
        Option option = item.getOptions().get(0);

        ((OKFHolder)holder).radioGroup.clearCheck();

        if(option.getValue() == Integer.valueOf(Option.OKF_F)) {
            ((OKFHolder)holder).failButton.setChecked(true);
        }

        else if (option.getValue() == Integer.valueOf(Option.OKF_OK)) {
            ((OKFHolder)holder).okButton.setChecked(true);
        }
    }

    holder.titleText.setText(item.getTitle());

    return row;
}

static class ChecklistItemHolder {
    int position;
    TextView titleText;
}

static class OKFHolder extends ChecklistItemHolder {
    RadioGroup radioGroup;
    RadioButton okButton;
    RadioButton failButton;
} 
```

# facebook - facebook FB.ui 提要对话框在资源管理器和 Safari 中不起作用

> ID：12060533
> 
> 赞同：1
> 
> 时间：2012-08-21T18:04:38.243
> 
> 标签：facebook, internet-explorer, safari, feed, fb.ui

我在将提要发布到 Facebook 时遇到问题。以下代码在 Mozilla 和 Google Chrome 中运行良好，但弹出窗口不会出现在 Explorer 和 Safari 中。你知道为什么会这样吗？谢谢你的想法。

```
<html>
<head>
  <title>My Website</title>
</head>
<body>
  <div id="fb-root"></div>

  <script src="http://connect.facebook.net/en_US/all.js">
  </script>

  <script>
     FB.init(
{ 
        appId:'3716911111111111',
    cookie:true, 
        status:true, 
    xfbml:true
    });

     FB.ui({ method: 'feed',
    display:'touch',
    picture: 'http://nerdyparrot.com/pics/Spanish1.jpg',
    link: 'http://nerdyparrot.com/',
        name: 'Nerdy Parrot',   
    caption: 'Learn languages online',
        description: 'Nerdy Parrot offers interactive way of learning foreign languages online.',
    redirect_uri: 'http://nerdyparrot.com'
});

  </script>

 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:13:50.567

尝试替换`redirect_uri: 'http:// nerdyparrot.com'`为`redirect_uri: 'http:// nerdyparrot.com',`（末尾的额外逗号）。

# ios - iOS 6 中的模态视图控制器强制横向方向

> ID：12060534
> 
> 赞同：8
> 
> 时间：2012-08-21T18:04:39.740
> 
> 标签：ios, xcode, cocoa-touch, modalviewcontroller, uiinterfaceorientation

我有一个以纵向模式呈现的 UITabBarController。在其中一个选项卡上，我有一个以模态方式显示 UIViewController 的按钮（一个简单的故事板 segue 执行操作）。

我希望这个模态视图以横向模式显示，但我不能让它自动转动。

我在模态视图控制器中有这个

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

我已将 LandscapeLeft 添加到 .plist 支持的方向（尽管这也允许 TabBar 旋转，而我不想要）

我还将它添加到模态视图的 ViewDidLoad

```
[UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeLeft; 
```

但我就是不能让它自己旋转。

谢谢

编辑 - -

似乎 shouldAutoRotate 甚至没有被调用！

另外，我正在尝试检测方向，下面的代码始终显示 2，无论方向如何！

```
if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationPortrait) {
        NSLog(@"1");
        self.hostView.frame = CGRectMake(0, 60, 200, 255);
    } else {
        NSLog(@"2");
        self.hostView.frame = CGRectMake(0, 45, 480, 255);
    } 
```

编辑 2 ---

我的错。我想我应该提到我使用的是 iOS 6。显示器在 iOS 5 上自动旋转。不推荐使用 shouldAutorotateToInterfaceOrientation，所以我需要阅读新方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T20:24:51.470

> iOS 6.0 发行说明
> *“更多的责任转移到了应用程序和应用程序委托。现在，iOS 容器（例如 UINavigationController）不会咨询它们的子级来确定它们是否应该自动旋转。”*

`-(BOOL)shouldAutorotate`任何 Container（如 UINavigationController）下的 UIViewController 都不会从 IOS6 调用。

尝试使用 Category 将方法添加到现有 UINavigationController 类的解决方案。

在**shouldAutorotate**方法中，可以在 self.viewControllers 的每个视图控制器中调用 shouldAutorotate 方法。实际上，您可以传递给您的子视图控制器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T08:44:42.633

如果你想在 iOS6 中强制旋转，你的 rootviewController 应该实现这些方法：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotate {
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:07:27.613

在 iOS 6 中，这种方法似乎有助于强制 iOS 6 上的特定方向。

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
} 
```

我仍在努力让它发挥作用，并将更新任何发现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T18:14:16.977

我在我的应用程序中执行此操作，并通过 shouldAutoRotateToInterfaceOrientation 执行此操作，与您略有不同：

```
- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
 if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
  return (YES);
 return (NO);
} 
```

对于 iOS 6，您还必须设置 window.rootViewController = {your root view controller}; 在您的应用委托中。我希望这是你的问题

# linux - 将 node.js 套接字服务器作为服务启动的 BASH 脚本

> ID：12060538
> 
> 赞同：4
> 
> 时间：2012-08-21T18:05:03.257
> 
> 标签：linux, bash, node.js, ssh, debian

基本上我想要完成的是某种脚本或方法让我启动 node.js 套接字服务器脚本，作为服务。

这是为了让我不必在 SSH 中物理运行“node server.js”，也不必在它打开的情况下坐在那里。

任何帮助，将不胜感激。

谢谢斯科特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:42:35.907

我认为想要使用不同的东西除了`forever`. 在我的项目中，我也避免使用这种工具，更多地依赖系统功能。因为我也尽量避免以 root 身份运行我的应用程序，所以我不能使用 SystemV 或 Upstart。

强大的来了`shell scripting`！我创建了一些`bash`执行简单任务的脚本，例如`process watchdog`具有启动、停止、重新启动和查询状态的能力。

检查此代码。随意修改它。要使用它——把你的命令放在 COMMAND 参数中。并执行`./path_to_script.sh -start`. 这将创建看门狗进程，它将启动您的节点进程并观察它是否死亡，如果是，它将重新启动它。这远不是理想的，所以如果有人有什么要修复、添加、删除的，请随时在下面发表评论。

```
#!/bin/bash

CURRENT_PATH=$(pwd)

LOGFOLDER=$CURRENT_PATH"/logs/"
PIDFOLDER=$CURRENT_PATH"/pid/"

#PID file where the this script process ID is stored
WATCHDOGPIDFILE=$PIDFOLDER"watchdog-admin.pid"
#PID file where the node process ID is stored
NODEPIDFILE=$PIDFOLDER"node-admin.pid"
#Watchdog process error log file
WATCHDOGLOGFILE=$LOGFOLDER"admin-watchdog-error.log"
#Node process error log file
NODELOGFILE=$LOGFOLDER"admin-error.log"
#Command to be executed on daemon start
COMMAND="node ./admin/app.js 1> /dev/null 2>> $NODELOGFILE"

ARG_1=$1

start() {
    if [ -e $NODEPIDFILE ]; then
        PID=$(cat $NODEPIDFILE)
        if [ $(ps -o pid | grep $PID) ]; then
            return;
        else
            touch $NODEPIDFILE
            nohup $COMMAND &
            echo $! > $NODEPIDFILE
        fi
    else
        touch $NODEPIDFILE
        nohup $COMMAND &
        echo $! > $NODEPIDFILE
    fi
}

stop() {
    if [ -e $NODEPIDFILE ]; then
        PID=$(cat $NODEPIDFILE)
        if [ $(ps -o pid | grep $PID) ]; then
            kill -9 $PID
        fi
        rm $NODEPIDFILE
    fi
}

stopdaemon() {
    stop
    rm $WATCHDOGPIDFILE
    exit 0
}

log() {
    echo $1 >> $WATCHDOGLOGFILE
}

keep_alive() {
    if [ -e $NODEPIDFILE ]; then
        PID=$(cat $NODEPIDFILE)
        if [ $(ps -o pid | grep $PID) ]; then
            return;
        else
            log "Jim, he is dead!! Trying ressurection spell..."
            start
        fi
    else
        start
    fi
}

case x${ARG_1} in
    x-start )

        echo "Starting daemon watchdog"
        nohup "$0" -daemon &> /dev/null &

    ;;

    x-daemon )

        if [ -e $WATCHDOGPIDFILE ]; then
            PID=$(cat $WATCHDOGPIDFILE)
            if [ $(ps -o pid | grep $PID) ]; then
                exit 0;
            fi
        fi

        touch $WATCHDOGPIDFILE

        echo $$ > $WATCHDOGPIDFILE

        #trap the interruption or kill signal
        trap stopdaemon INT SIGINT TERM SIGTERM

        start

        while true; do
            keep_alive
            wait
            sleep 1
        done

    ;;

    x-stop )

        echo "Stopping daemon watchdog"
        PID=$(cat $WATCHDOGPIDFILE)
        kill $PID

    ;;

    x-status )
        #check if process is running and PID file exists, and report it back
    ;;
    x )
        echo "Usage {start|stop|status}"
esac

exit 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:12:53.180

听起来你想要一个像`forever`. [这里](http://blog.nodejitsu.com/keep-a-nodejs-server-up-with-forever)有一篇入门博客文章。

还有更通用的工具，例如[monit](http://mmonit.com/monit/)和[upstart](http://upstart.ubuntu.com/)。

我个人`forever`在我的业余项目中使用它，它工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:31:25.520

这很快就会变得复杂。您真正要求的是如何“守护”进程。它不仅仅是在后台运行它。理想情况下，您希望以不束缚可移动文件系统的方式运行它，并且您希望保留其日志输出并且不让它吐到您的旧终端。你不希望它在你的 shell 退出时被意外杀死，等等......

如果您使用的是 Ubuntu 等基于 Debian 的系统，那么`/sbin/start-stop-daemon`它可以满足您的大部分需求。提到了为其编写一个 Ubuntu Upstart 配置，这也是一个选项。在 Fedora 等其他发行版上，systemd 提供了通常被认为是这种自动守护程序服务的“镀金”版本。它基本上可以守护和管理任何非显式交互的程序。

# android - 我是否应该使用 XML 资源，即使是单次使用？

> ID：12060540
> 
> 赞同：1
> 
> 时间：2012-08-21T18:05:20.200
> 
> 标签：android, xml, android-resources

`dimens.xml`我有使用 XML 资源来处理所有事情的习惯……我的意思是，例如，我将每一个数值都放入. 但这明智吗？

**例子：**

我有这个布局用于广告横幅，我包含在其他布局中。横幅视图的 minHeight 关联为 50dp。这个特定的 50dp 不会在其他任何地方使用，它仅与横幅 minHeight 相关。我可能会在其他地方使用 50dp，但在完全不同的环境中。它们都是 50dp，但除了值本身之外，它们没有任何共同之处。

我的问题是，我应该将横幅 50dp 放在 dimens.xml 中并使用适当的参考，还是应该直接使用 50dp，因为我不会在任何地方重复此横幅 minHeight 值？

对于 Android 项目，这有什么约定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:09:32.803

我认为这是一个很好的实践。在这种情况下，您可能可以不使用数值，但按照您的方式使用 XML 会产生这样的情况，即如果您需要更新代码，您只需要去一个地方。现在可能是 1 个，但如果您扩展您的项目，它可能是 2 个或 3 个，依此类推。就像我说的，我认为这是一种很好的练习和一种很好的习惯。但是，您不必这样做。

这是你的电话。

# comments - Disqus `count.js` 在生产中显示“0 条评论”

> ID：12060541
> 
> 赞同：0
> 
> 时间：2012-08-21T18:05:21.667
> 
> 标签：comments, ruby-on-rails-3.2, disqus

我页面上的评论数`index`并不能反映`entry`我博客中每个评论的实际数。当在本地运行时，`development`它会反映实际计数，但是一旦我将它推送到`production`Heroku [，](http://www.heroku.com)它就会显示“0 条评论和 0 条反应”，即使至少有一条评论。我在底部添加了 Disqus 提供的 JS，`index.html.haml`并添加了评论计数的链接。这是我的审查代码：

```
%p
  = "* Comments - "
  = link_to e, entry_path(e, :anchor => "disqus_thread")
.date= e.updated_at.strftime('* %a, %b %-e, %Y @ %l:%M %p %Z') 
%br

:javascript
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'heneman'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }()); 
```

另外，[这里](http://kyleheneman.info)是我博客的链接。如果您查看第二个条目（标题为“将 Markdown 添加到 Rails 3.2 应用程序”），您会看到评论计数显示为“0”，但如果您单击标题并进入`show`该条目的页面，您会看到会看到有评论。

有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:17:06.207

尝试按照[此处](http://help.disqus.com/customer/portal/articles/565624-tightening-your-disqus-integration)所述在您的评论链接中添加`disqus-identifier`as 。查看起始页的首页 HTML 源代码。它对每一篇文章的渲染，我认为这不是一个标准。`data-disqus-identifier``<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body>`

# sql - 从 NOW() 中删除 TIMESTAMP 精度导致 PostgreSQL？

> ID：12060546
> 
> 赞同：12
> 
> 时间：2012-08-21T18:05:39.577
> 
> 标签：sql, postgresql, datetime, timestamp

有没有办法从 PostgreSQL 中的 NOW() 函数的结果中删除精度？

```
"2012-08-21 10:23:34.867502" 
```

我正在寻找格式为：

```
"2012-08-21 10:23:34" 
```

我正在尝试使用以下 SQL 更新“没有时区的时间戳”类型的列：

```
UPDATE table SET column = now(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-21T19:01:20.970

简单的答案是将其转换为零精度。

```
select now()::timestamptz(0); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T18:07:37.523

```
UPDATE tbl SET col = DATE_TRUNC('second', NOW()); 
```

请参阅[DATE_TRUNC](http://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC)的文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-23T15:45:49.243

您可以更改表的结构，如果您在 pgAdmin 3 中将列的长度移动到 0，或者如果您使用**timestamp(0)**像这样创建表：

```
CREATE TABLE public.users
(
    id integer serial,
    username character varying(255) NOT NULL,
    email character varying(255) NOT NULL,
    password character varying(255) NOT NULL,
    created_at timestamp(0) without time zone NOT NULL,
    updated_at timestamp(0) without time zone NOT NULL,

    CONSTRAINT users_pkey PRIMARY KEY (id)
); 
```

但是如果你这样做，如果你尝试插入一个毫秒的时间戳，就会发生错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-08T01:17:04.210

根据您的要求，另一个选项是调整时间戳列本身的精度 - 将其精度设置为 0。这在将 PostgreSQL 与不处理时间戳中小数秒的遗留程序一起使用时非常有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-01T18:12:26.630

```
select now()::timestamp(0); 
```

在上一个答案中，选择`now()::timestamptz(0);`仍然保留时区。

# php - 如何在 magento 中选择并创建 2 多个产品作为一个产品？

> ID：12060547
> 
> 赞同：-1
> 
> 时间：2012-08-21T18:05:39.557
> 
> 标签：php, jquery, magento

我正在使用 magento 并在此页面[http://www.kokoblack.com/shop/chocolate-picker.html](http://www.kokoblack.com/shop/chocolate-picker.html)上创建类似的功能，我的问题是我如何选择 2 种或更多产品以及选择的产品，我想要创建一个盒子或一个产品 ID 并发送到购物车。那可能吗？

或者如何实现上述链接的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:24:23.763

这将是一个捆绑产品。[http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product](http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:24:33.173

这称为“[分组](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_product/producttype#grouped)”或“[捆绑](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_product/producttype#bundle)”产品。单击[此处](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-grouped-product)查看如何创建分组产品，或单击[此处](http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product)了解如何创建捆绑产品。

# flash - 如何通过 Flash Actionscript 2.0 将影片剪辑链接到 URL？

> ID：12060551
> 
> 赞同：1
> 
> 时间：2012-08-21T18:05:58.030
> 
> 标签：flash, button, actionscript, mouse, movieclip

一旦图形抓住你的鼠标，我正试图将影片剪辑变成一个按钮，如下所示：

[http://www.kirupa.com/developer/mx/followease.htm](http://www.kirupa.com/developer/mx/followease.htm)

因此，当圆圈赶上您的鼠标时，您可以选择单击该圆圈并转到指定的 URL。这可能吗，如果可以，怎么办？

===============================

这些笔记来自迄今为止的各种回应。我仍然遇到错误，无法让剪辑正常工作。这是我应用于影片剪辑 (mc) 的确切代码：

```
onClipEvent (load) {
_x = 0;
_y = 0;
speed = 5;
}
onClipEvent (enterFrame) {
endX = _root._xmouse;
endY = _root._ymouse;
_x += (endX-_x)/speed;
_y += (endY-_y)/speed;

import flash.net.navigateToURL;
import flash.net.URLRequest;
import flash.events.MouseEvent;

// assuming the movie clip is called mc
mc.onRelease = function() {
getURL("http://www.google.com");
} 
```

非常感谢任何进一步的建议，并感谢迄今为止做出贡献的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:26:05.660

1.  `onClipEvent(enterframe)`无与伦比`}`
2.  这些导入语句适用于 AS3
3.  如果您要将脚本直接放在影片剪辑上（即用鼠标选择它并按 F9 调出脚本面板，然后将代码粘贴到上面），则不必使用它的名称（mc )

* * *

试着把它粘贴到影片剪辑上~

```
onClipEvent(load) {
    _x = 0;
    _y = 0;
    speed = 5;
}

onClipEvent(enterFrame) {
    endX = _root._xmouse;
    endY = _root._ymouse;
    _x += (endX-_x)/speed;
    _y += (endY-_y)/speed;
}

onClipEvent(mouseUp) {
    getUrl("http://www.google.com");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:33:13.110

您可以简单地将点击处理程序添加到您的影片剪辑并使用[flash.net.navigateToURL](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL%28%29)转到指定的 URL。

```
import flash.net.navigateToURL;
import flash.net.URLRequest;
import flash.events.MouseEvent;

// assuming the movie clip is called mc
mc.addEventListener(MouseEvent.CLICK, onClick);
var url: String = "http://www.google.com"
function onClick(event: MouseEvent): void {
    navigateToURL(new URLRequest(url))
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:51:31.407

跟进@Chris 提供的解决方案，但在 AS2 上下文中

在代码示例中，mc 是指向跟随鼠标的圆形影片剪辑的链接

```
mc.onRelease = function() {
    getURL("http://www.google.com");
} 
```

# javascript - KendoUI 柱形图在错误的列中分组数据

> ID：12060554
> 
> 赞同：3
> 
> 时间：2012-08-21T18:06:07.243
> 
> 标签：javascript, jquery, charts, kendo-ui

我对 KendoUI 柱形图有这个问题。我有一组从服务返回的 JSON 数据。JSON 非常简单明了。

当我将此数据绑定到剑道图表时，没有分组，它工作得很好。但是，当我使用分组绑定它时，它会将数据放在错误的列中。由于 JSON 的大小，我将首先向您展示屏幕截图，然后是带有工作示例的 JSFiddle 链接。

没有分组的示例 1：

![在此处输入图像描述](../Images/ddc48b146d780b72c2ecf77fc26c7107.png)

所有数据都显示正确，并且列显示了带有工具提示的正确类别。

示例 2 WITH 分组：

![在此处输入图像描述](../Images/51e5aec4c84b2a9757ab65a934ff245f.png)

如您所见，分组看起来正确，但事实并非如此。如果您将鼠标悬停在 CCLF 类别下的第 4 列（第 1 列是 0）上，您将看到它显示 GINN，它位于图表的第 3 个类别中。

这是问题的工作示例：

[http://jsfiddle.net/v8tsQ/2/](http://jsfiddle.net/v8tsQ/9/)

在 JSFiddle 上，如果您转到创建 kendo.data.DataSource() 的部分，您将看到“组”选项，您可以删除该选项以获得第一个图表结果。

对于我需要做些什么来确保列显示在正确的类别下有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:50:28.543

您的数据按照您在数据源中的顺序显示。如果您对 DataSource 进行排序，则图表应显示您想要的方式。

[http://jsfiddle.net/v8tsQ/10/](http://jsfiddle.net/v8tsQ/10/)

```
var ds = new kendo.data.DataSource({
    data: dr,
    group: { field: "FindingQuarter"},
    sort: [{field: "FindingQuarter", dir: "asc"}, 
    {field: "SectionName", dir: "asc"}]

}) 
```

x 轴的名称显示每组中的第一项。

# actionscript-3 - 没有类定义的 Flash 文件如何编译？

> ID：12060555
> 
> 赞同：2
> 
> 时间：2012-08-21T18:06:18.243
> 
> 标签：actionscript-3, flash

让我们使用[本](http://permadi.com/blog/2010/06/flash-as3-using-filereference-to-load-files-example-for-flash-cs4-and-above/)网站第一部分的代码。我没有看到类声明，并且我的程序无法在 FlashDevelop 中构建。我收到以下错误消息：

```
Error: A file found in a source-path must have an externally visible definition. If a definition in the file is meant to be externally visible, please put the definition in a package.
Build halted with errors (fcsh). 
```

为了能够构建和运行它，我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:13:00.400

如果您使用的是 flash 开发和纯 AS3（无 flex），那么一切都必须在一个类和包中。

只需将该代码包装在自定义类中即可在 flashDevelop 中使用它。如果您在 Flash 开发中创建一个新项目，大多数模板都会创建一个 Main.as 文件 - 这是在您加载项目时运行的根类，只需将代码转储到该 .AS 文件中定义的 Main 类中（除了导入，它们需要位于包和类声明之间）。

```
package {

    //imports here

    public class Main extends MovieClip {
       //put any vars that aren't in functions here  (eg. var mFileReference:FileReference)
       public function Main():void {
           //put anything not contained in a function here
       }

       //put the functions here

    }

} 
```

# bash - 使用 find -exec cp {} TARGET_DIR + 解决错误“find：缺少 -exec 的参数”

> ID：12060557
> 
> 赞同：10
> 
> 时间：2012-08-21T18:06:30.443
> 
> 标签：bash, find, arguments, exec, cp

我正准备将其作为一个问题发布，但在摆弄了一段时间之后，我找到了解决方案。所以我想我会继续把它贴在这里，以防它帮助别人。

我在 find -exec cmd + 时遇到了麻烦。我得到了错误：

```
$ find ./ -name "*JIM*" -exec cp {} $TARGET_DIR +
find: missing argument to `-exec' 
```

如果我使用它会起作用

```
$ find ./ -name "*JIM*" -exec cp {} $TARGET_DIR \; 
```

但我不想使用它，因为它为找到的每个文件创建一个新进程。

如果我使用它会起作用

```
$ find ./ -name "*JIM*" -exec ls {} + 
```

它列出了我要复制的所有文件。但是`-exec cp {} $TARGET_DIR +`没有用。

我找到的解决方案是：

```
$ find ./ -name "*JIM*" -exec cp --target-directory=$TARGET_DIR {} + 
```

哪里`--target-directory=`也可以换成`-t`

希望这可以帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T18:06:30.443

如开篇所述，我找到的解决方案是：

```
$ find ./ -name "*JIM*" -exec cp --target-directory=$TARGET_DIR {} + 
```

哪里`--target-directory=`也可以换成`-t`

# python - Python 使用 xml.dom.minidom 解析 XML - 提取列表中的项目

> ID：12060559
> 
> 赞同：0
> 
> 时间：2012-08-21T18:06:37.377
> 
> 标签：python, xml, dom, xml-parsing, parsexml

我有很长的 xml 这实际上是使用 ebay api 的 ebay 列表，我试图在该 xml dom 中提取以下结构：

我只放了我遇到问题的部分，如果您需要查看整个文件，请告诉我，我可以将其上传到某个位置或将附件作为图片。

```
<ItemSpecifics>
<NameValueList>
<Name>Room</Name>
<Value>Living Room</Value>
</NameValueList>
<NameValueList>
<Name>Type</Name>
<Value>Sofa Set</Value>
</NameValueList>
<NameValueList>...</NameValueList>
<NameValueList>
<Name>Upholstery Fabric</Name>
<Value>Microfiber</Value>
</NameValueList>
<NameValueList>
<Name>Color</Name>
<Value>Beiges</Value>
</NameValueList>
<NameValueList>
<Name>Style</Name>
<Value>Contemporary</Value>
</NameValueList>
<NameValueList>
<Name>MPN</Name>
<Value>F7615, F7616, F7617, F7618, F7619, F7620</Value>
</NameValueList>
</ItemSpecifics> 
```

这是另一个 ebay 项目的 dom 结构：

```
ItemSpecifics>
<NameValueList>
<Name>Brand</Name>
<Value>Nikon</Value>
</NameValueList>
<NameValueList>
<Name>Model</Name>
<Value>D3100</Value>
</NameValueList>
<NameValueList>
<Name>MPN</Name>
<Value>9798</Value>
</NameValueList>
<NameValueList>
<Name>Type</Name>
<Value>Digital SLR</Value>
</NameValueList>
<NameValueList>
<Name>Megapixels</Name>
<Value>14.2 MP</Value>
</NameValueList>
<NameValueList>
<Name>Optical Zoom</Name>
<Value>3.1x</Value>
</NameValueList>
<NameValueList>
<Name>Screen Size</Name>
<Value>3"</Value>
</NameValueList>
<NameValueList>
<Name>Color</Name>
<Value>Black</Value>
</NameValueList>
</ItemSpecifics> 
```

但是当我试图提取上述元素时，我最终得到以下错误：

```
 attID=att.attributes.getNamedItem('Name').nodeValue
AttributeError: 'NoneType' object has no attribute 'nodeValue' 
```

这是我在解析响应后得到的：

```
[<DOM Element: NameValueList at 0x103398878>, <DOM Element: NameValueList at 0x103398ab8>, <DOM Element: NameValueList at 0x103398cf8>, <DOM Element: NameValueList at 0x103398f38>, <DOM Element: NameValueList at 0x1033b31b8>, <DOM Element: NameValueList at 0x1033b33f8>, <DOM Element: NameValueList at 0x1033b3638>, <DOM Element: NameValueList at 0x1033b3878>] 
```

这就是我在收到错误之前在 for 循环中得到的内容：

```
<DOM Element: NameValueList at 0x103398878> 
```

这是我的代码：

```
 results = {}
  attributeSet=response.getElementsByTagName('NameValueList')
  print attributeSet
  attributes={}
  for att in attributeSet:
    print att
    attID=att.attributes.getNamedItem('Name').nodeValue
    attValue=getSingleValue(att,'Value')
    attributes[attID]=attValue
  result['attributes']=attributes
  return result 
```

这是我的 xml 请求方法：

```
def sendRequest(apicall,xmlparameters):
  connection = httplib.HTTPSConnection(serverUrl)
  connection.request("POST", '/ws/api.dll', xmlparameters, getHeaders(apicall))
  response = connection.getresponse()
  if response.status != 200:
    print "Error sending request:" + response.reason
  else: 
    data = response.read()
    connection.close()
  return data 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:14:52.183

`attributes.getNamedItem()`给你一个元素的属性，而不是它的子元素，一个`<NameValueList>`元素没有`Name`属性，只有`<Name>`元素。您必须遍历包含的元素`<NameValueList>`，或使用`.getElementsByTagName('Name')`and`.getElementsByTagName('Value')`来获取各个子节点。

不过，请帮自己一个大忙，改用[ElementTree API](http://docs.python.org/library/xml.etree.elementtree.html)；该 API 远比 XML DOM API 更 Pythononic 且更易于使用：

```
from xml.etree import ElementTree as ET

etree = ET.fromstring(data)
results = {}
for nvl in etree.findall('NameValueList'):
    name = nvl.find('Name').text
    value = nvl.find('Value').text
    results[name] = value 
```

# objective-c - 神秘的“未知类型名称”错误

> ID：12060568
> 
> 赞同：-2
> 
> 时间：2012-08-21T18:07:10.887
> 
> 标签：objective-c, xcode

我有一段非常简单的代码。我怀疑其中大部分是无关的，但是由于我对这个问题完全感到困惑，我决定按原样包含源。

GQEncounter.h：

```
#import <Foundation/Foundation.h>
#import "GQEncounterViewController.h"

@interface GQEncounter : NSObject {
    NSArray *roughOptions;
    NSString *roughText;
}

@property (readonly) NSArray *options;
@property (readonly) NSString *text;

- (id) initFromDictionary:(NSDictionary *) dict;
- (void) executeOption:(NSInteger) number;

@end 
```

GQEncounterViewController.h：

```
#import <UIKit/UIKit.h>
#import "GQEncounter.h"

@interface GQEncounterViewController : UIViewController {

    GQEncounter *_encounter;
    UILabel *encounterText;
    NSArray *encounterButtons;
    CGRect _rect;

}

- (id)initWithEncounter:(GQEncounter *)encounter
                   rect:(CGRect)rect;
- (void)chooseOption:(UIButton *)button;

@end 
```

如您所见，这真的很简单。但是，由于某些未知原因，xcode 在 GQEncounterViewController 文件中显示错误：_encounter 变量声明中的“未知类型名称 'GQEncounter'”，以及 initWithEncounter 声明中的“预期类型”。就好像 GQEncounter 根本不包含在文件中。我使用 xcode 4.4.1。我什至重新安装它试图摆脱这个问题，但它没有帮助。

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:19:41.593

我不确定为什么文件中有`GQEncounterViewController`import 语句，`GQEncounter.h`但尝试将其移出，如果你真的需要它，请`@class GQEncounterViewController;`改用

# c - getch(); 不暂停循环

> ID：12060572
> 
> 赞同：1
> 
> 时间：2012-08-21T18:07:32.540
> 
> 标签：c, getch

例如，我有这段代码：

```
while(true){
    printf("looping");
    getch();
} 
```

不是在每个循环上等待用户输入，而是在没有我的情况下继续循环；印刷

```
loop
loop
loop 
```

直到我关闭程序。

有没有更好的方法来读取单个字符？我真正想做的就是让用户输入“y”或“n”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:13:21.753

只需使用 fgetc。我假设您正在使用它来跳出循环，因此要更新您的示例：

```
#include <stdio.h>

char iput;

while(true){
    printf("looping");
    iput = fgetc(stdin);
    if(iput == 'n')
      break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:52:03.907

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
void main()
{
   while(1)
 {
   printf("\nlooping");
   char t=getch();
   if(t=='n')
   exit(0);
 }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T18:22:57.660

你也可以使用

```
fflush(stdin) 
```

在调用 getch 之前

问候

# javascript - Safari 5.1.7 flexslider/jquery 工具冲突 z-index 错误？

> ID：12060576
> 
> 赞同：0
> 
> 时间：2012-08-21T18:07:43.617
> 
> 标签：javascript, jquery, jquery-tools, flexslider

我在这里建立一个新网站：http: [//www.bigideaadv.com/wright/](http://www.bigideaadv.com/wright/)

在 IE 7-9、Firefox 和 Chrome 中运行良好。

Safari 与 Flexslider (http://www.woothemes.com/flexslider/) 和 jQuery Tools (http://jquerytools.org/) 有冲突

如果我删除该行：

```
 $jsk(".scrollable").scrollable({circular: true, speed: '1000'}); 
```

从我的 javascript 中，Safari 显示正确。但我需要这个模块之一。曾经有一个 TypeOf 错误：... is not a function 但我解决了这个问题。

有人有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:45:19.837

修复了问题。这是javascript中的语法问题。不过，Cufon 字体替换还有其他一些冲突。不得不选择另一种（更好的）方法。使用带有网络就绪字体的@font-face 似乎可以解决所有问题。

# c++ - 将最后一个字符发送到 std::cout

> ID：12060581
> 
> 赞同：1
> 
> 时间：2012-08-21T18:08:29.270
> 
> 标签：c++, iostream, cout

我需要在 main() 执行结束时检查发送到标准输出（通过`std::cout`）的最后一个字符是否是`'\n'`（或特定于平台的行尾）。如何对此进行测试？可以安全地假设没有使用 C 风格的 io（如 printf）。

程序是 C++ 的 REPL。它评估 C++ 表达式（或语句）并在标准输出上打印结果。希望输出总是以单个换行符终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:28:41.637

除了打印到之外`cout`，您还可以定义自己的类流对象，该对象接受标准`ostream`运算符/函数，但在将操作传递给真实的 . 时跟踪最近打印的字符`cout`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T18:42:10.193

@Kevin 给出的答案与此类似。但是我相信它更适合您的需求。而不是使用一些你的流来代替 cout - 你可以用你自己的替换 std::cout 中的 streambuf ：

```
int main() {
   std::streambuf* cbuf = std::cout.rdbuf(); // back up cout's streambuf
   std::cout.flush();
   keep_last_char_outbuf keep_last_buf(cbuf);
   std::cout.rdbuf(&keep_last_buf);          // assign your streambuf to cout

   std::cout << "ala ma kota\n";

   char last_char = keep_last_buf.get_last_char();
   if (last_char == '\r' || last_char == '\n')
      std::cout << "\nLast char was newline: " << int(last_char) << "\n";
   else
      std::cout << "\nLast char: '" << last_char << "'\n";

   std::cout << "ala ma kota";
   last_char = keep_last_buf.get_last_char();
   if (last_char == '\r' || last_char == '\n')
      std::cout << "\nLast char was newline: " << int(last_char) << "\n";
   else
      std::cout << "\nLast char: '" << last_char << "'\n";

   std::cout.rdbuf(cbuf); // restore cout's original streambuf
} 
```

和预期的输出：

```
ala ma kota

Last char was newline: 10
ala ma kota
Last char: 'a' 
```

写这样的任务`class keep_last_char_outbuf`不是很容易，寻找装饰器模式和[streambuf](http://www.cplusplus.com/reference/iostream/streambuf/)接口。

如果你没有时间玩这个 - 看看我的建议[ideone 链接](http://ideone.com/HbQ2r)

```
class keep_last_char_outbuf : public std::streambuf {
public:
    keep_last_char_outbuf(std::streambuf* buf) : buf(buf), last_char(traits_type::eof()) {
        // no buffering, overflow on every char
        setp(0, 0);
    }
    char get_last_char() const { return last_char; }

    virtual int_type overflow(int_type c) {
        buf->sputc(c);
        last_char = c;
        return c;
    }
private:
    std::streambuf* buf;
    char last_char;
}; 
```

# ios - ios - 当我尝试编辑方案时找不到我的 ProjectName.app 文件

> ID：12060583
> 
> 赞同：0
> 
> 时间：2012-08-21T18:08:36.627
> 
> 标签：ios, xcode, ios5, xcode4

我有一个问题，每次我尝试构建我的项目时，构建状态栏都会挂起“正在附加项目名称”

因此，我尝试按照此处的说明进行操作：[附加到 ProjectName](https://stackoverflow.com/questions/6186031/attaching-to-projectname)并直接设置项目文件。

但问题是我没有找到该目录“支持文件与文件 ProjectName.app

该文件确实出现在我的项目树中，但由于某种原因我在文件系统上找不到它。

有人可以建议如何最好地确保设置项目文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:19:49.627

当真正奇怪的事情发生时，您可以：

*   关闭 Xcode 并重新打开它，然后重试

*   删除项目的“派生数据”文件夹（组织者，项目窗格）

*   删除项目文件夹中以您的名字为前缀的每个文件夹（或重命名）

*   重新启动计算机（可能只是注销/重新登录）

# android - 活动意图未启动

> ID：12060585
> 
> 赞同：0
> 
> 时间：2012-08-21T18:08:44.110
> 
> 标签：android, android-intent, android-activity

在我的应用程序中，主要活动已启动，但在单击按钮时，第二个活动并未通过意图启动。

这是我的日志猫条目

```
08-21 23:29:35.568: D/dalvikvm(680): GC_EXTERNAL_ALLOC freed 47K, 53% free 2544K/5379K, external 716K/1038K, paused 272ms
08-21 23:29:36.319: D/TimesheetMgmt Log(680): -->Main activity launched. 
08-21 23:29:53.908: D/TimesheetMgmt Log(680): -->New Task button clicked. 
08-21 23:29:54.128: D/AndroidRuntime(680): Shutting down VM
08-21 23:29:54.128: W/dalvikvm(680): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-21 23:29:54.198: E/AndroidRuntime(680): FATAL EXCEPTION: main
08-21 23:29:54.198: E/AndroidRuntime(680): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.timesheetmgmt/com.timesheetmgmt.NewTaskActivity}: java.lang.NullPointerException
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.os.Looper.loop(Looper.java:123)
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-21 23:29:54.198: E/AndroidRuntime(680):  at java.lang.reflect.Method.invokeNative(Native Method)
08-21 23:29:54.198: E/AndroidRuntime(680):  at java.lang.reflect.Method.invoke(Method.java:507)
08-21 23:29:54.198: E/AndroidRuntime(680):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-21 23:29:54.198: E/AndroidRuntime(680):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-21 23:29:54.198: E/AndroidRuntime(680):  at dalvik.system.NativeStart.main(Native Method)
08-21 23:29:54.198: E/AndroidRuntime(680): Caused by: java.lang.NullPointerException
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.app.Activity.findViewById(Activity.java:1647)
08-21 23:29:54.198: E/AndroidRuntime(680):  at com.timesheetmgmt.NewTaskActivity.<init>(NewTaskActivity.java:16)
08-21 23:29:54.198: E/AndroidRuntime(680):  at java.lang.Class.newInstanceImpl(Native Method)
08-21 23:29:54.198: E/AndroidRuntime(680):  at java.lang.Class.newInstance(Class.java:1409)
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-21 23:29:54.198: E/AndroidRuntime(680):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
08-21 23:29:54.198: E/AndroidRuntime(680):  ... 11 more
08-21 23:29:58.879: I/Process(680): Sending signal. PID: 680 SIG: 9 
```

主要活动代码：

```
 package com.timesheetmgmt;
 import android.os.Bundle;
 import android.app.Activity;
 import android.content.Intent;
 import android.util.Log;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;

 public class MainActivity extends Activity implements OnClickListener{

private static final String DEBUG_TAG= "TimesheetMgmt Log";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.d(DEBUG_TAG, "-->Main activity launched. ");
    Button btnNewTask=(Button) findViewById(R.id.btnNewTask);
    btnNewTask.setOnClickListener((OnClickListener) this);

}

public void onClick(View v) {
    if(v.getId()==R.id.btnNewTask){
        try {
             Log.d(DEBUG_TAG, "-->New Task button clicked. ");
             Intent in=new Intent(this,NewTaskActivity.class);
             in.putExtra("str", "jjalj new task activity");
             startActivity(in);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

}

 } 
```

在 log cat 文件中，我可以看到主要活动已启动，当我单击新任务按钮时，log cat 中的错误和强制关闭按钮出现在模拟器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:20:12.830

问题出`NewActivity`在第 16 行。那是你的问题。`NullPointerException`你在那个位置得到一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:17:56.237

正如日志所说，您在 NewTaskActivity 的 findViewById 中有问题。也许您正在寻找一个不存在的视图，并且您正在对其进行一些操作，从而导致 NullPointerException。

确保在你的 NewTaskActivity 中你正在膨胀正确的布局，并检查你正在使用的 id 的视图是否存在于该布局中。

# java - 如何使用单个滚动条滚动两个或多个 JTable？

> ID：12060587
> 
> 赞同：3
> 
> 时间：2012-08-21T18:08:51.167
> 
> 标签：java, swing, jtable, jscrollpane

如何使用一个滚动条`JScrollPane`来移动另一个或多个滚动条`JScrollPane`？

例如：

我`JTable`在单独的 s 中有三个`JScrollPane`s。我想将滚动窗格相互*绑定。*

如果我使用一个 - 另一个将以相同的方式滚动。

某种`Listener`我找不到的s？

有什么建议吗？

此致。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T18:12:56.260

保留`JTables`' 标题的一种方法是`BoundedRangeModel`对每个`JScrollPane`' 的垂直滚动条使用相同的标题并将每个 ScrollPane 添加到单个`JPanel`.

```
class ParallelTables {
    static JScrollPane createTable() {
        DefaultTableModel model = new DefaultTableModel(100, 2);
        for (int row=model.getRowCount(); --row>=0;) {
            model.setValueAt(row, row, 0);
        }
        JTable table = new JTable(model);
        return new JScrollPane(table);
    }

    public static void main(String[] args) throws Exception {

        JScrollPane scrollerA = createTable();
        JScrollPane scrollerB = createTable();
        scrollerA.setVerticalScrollBarPolicy(
                JScrollPane.VERTICAL_SCROLLBAR_NEVER);
        // the following statement binds the same BoundedRangeModel to both vertical scrollbars.
        scrollerA.getVerticalScrollBar().setModel(
                scrollerB.getVerticalScrollBar().getModel());
        JPanel panel = new JPanel();
        panel.add(scrollerA);
        panel.add(scrollerB);
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

**参考：**

*   [https://forums.oracle.com/forums/thread.jspa?threadID=1348214](https://forums.oracle.com/forums/thread.jspa?threadID=1348214)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T18:11:59.370

> 我在单独的 JScrollPanes 中有三个 JTable。我想“绑定”滚动到彼此。

不要将 JTables 放在 JScrollPanes 中。将每个 JTable 放入一个 JPanel，将 3 个 JPanel 放入一个 JScrollPane。

将 3 个 JTable 组合成一个 JTable 可能会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-14T13:50:15.437

David Kroukamp 的建议是让滚动条共享一个模型，如下所示：

```
 scrollerA.getVerticalScrollBar().setModel(
            scrollerB.getVerticalScrollBar().getModel()); 
```

这当然可以，但是如果您想对所有表格使用单个滚动条，则将一个滚动条替换为另一个滚动条会更简单：

```
 scrollerA.setVerticalScrollBar(
            scrollerB.getVerticalScrollBar()); 
```

此方法只显示一个滚动条，并且滚动两个表。

# amazon-web-services - 亚马逊 MWS 价格馈送，覆盖运费

> ID：12060597
> 
> 赞同：0
> 
> 时间：2012-08-21T18:09:34.833
> 
> 标签：amazon-web-services, amazon-mws

我有一个提要，它在我的亚马逊库存中设定一本书的价格。

我可以设置这本书的标准价格，但我不知道如何设置运费，我想将运费设置为 ​​0，下面是我正在使用的当前提要。

```
<?xml version="1.0" encoding="utf-8"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
  <Header>
    <DocumentVersion>1.01</DocumentVersion>
    <MerchantIdentifier>xxxx</MerchantIdentifier>
  </Header>
  <MessageType>Price</MessageType>
  <Message>
    <MessageID>1</MessageID>
    <Price>
      <SKU>0115531310-New</SKU>
      <StandardPrice currency="GBP">50.01</StandardPrice>
    </Price>
  </Message>

</AmazonEnvelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:11:48.167

尚未尝试，但应该可以：

```
<?xml version="1.0" encoding="utf-8"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
  <Header>
    <DocumentVersion>1.01</DocumentVersion>
    <MerchantIdentifier>xxxx</MerchantIdentifier>
  </Header>
  <MessageType>Price</MessageType>
  <Message>
    <MessageID>1</MessageID>
    <Price>
      <SKU>0115531310-New</SKU>
      <StandardPrice currency="GBP">50.01</StandardPrice>
    </Price>
  </Message>
  <Message>
    <MessageID>2</MessageID>
    <OperationType>Update</OperationType>
    <Override>
      <SKU>0115531310-New</SKU>
      <ShippingOverride>
        <ShipAmouunt currency="GBP">0.00</ShipAmouunt>
      </ShippingOverride>
    </Override>
  </Message>
</AmazonEnvelope> 
```

也许您可以将第二个消息放入第一个消息中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T09:11:51.223

最好发送不同的饲料价格和运费

**饲料价格**

```
<?xml version="1.0" encoding="utf-8"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amznenvelope.xsd">
    <Header>
        <DocumentVersion>1.01</DocumentVersion>
        <MerchantIdentifier>M_SELLER_354577</MerchantIdentifier>
    </Header>
    <MessageType>Price</MessageType>
    <Message>
        <MessageID>1</MessageID>
        <Price>
            <SKU>ASUSVNA1</SKU>
            <StandardPrice currency="USD">10.99</StandardPrice>
        </Price>
    </Message>
    <Message>
        <MessageID>2</MessageID>
        <Price>
            <SKU>ASUSVNA1669</SKU>
            <StandardPrice currency="USD">204.99</StandardPrice>
            <Sale>
                <StartDate>2008-10-01T00:00:00Z</StartDate>
    Selling on Amazon – Guide to XML
    46
     <EndDate>2009-01-31T00:00:00Z</EndDate><SalePrice currency="USD">28.38</SalePrice></Sale>
        </Price>
    </Message>
</AmazonEnvelope> 
```

**对于运费覆盖**

```
<?xml version="1.0" encoding="utf-8"?>
<AmazonEnvelope xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
    <Header>
        <DocumentVersion>1.02</DocumentVersion>
        <MerchantIdentifier>M_SELLER_354577</MerchantIdentifier>
    </Header>
    <MessageType>Override</MessageType>
    <Message>
        <MessageID>1</MessageID>
        <OperationType>Update</OperationType>
        <Override>
Selling on Amazon – Guide to XML
53
 <SKU>487-6</SKU><ShippingOverride><ShipOption>Std Alaska Hawaii PO Box</ShipOption><Type>Additive</Type><ShipAmouunt currency="USD">20.00</ShipAmouunt></ShippingOverride><ShippingOverride><ShipOption>Exp Alaska Hawaii PO Box</ShipOption><IsShippingRestricted>false</IsShippingRestricted></ShippingOverride></Override>
    </Message>
    <Message>
        <MessageID>2</MessageID>
        <OperationType>Update</OperationType>
        <Override>
            <SKU>487-5</SKU>
            <ShippingOverride>
                <ShipOption>Exp Alaska Hawaii PO Box</ShipOption>
                <Type>Additive</Type>
                <ShipAmouunt currency="USD">20.00</ShipAmouunt>
            </ShippingOverride>
            <ShippingOverride>
                <ShipOption>Exp Alaska Hawaii PO Box</ShipOption>
                <IsShippingRestricted>false</IsShippingRestricted>
            </ShippingOverride>
        </Override>
    </Message>
</AmazonEnvelope> 
```

# delphi - 如何在 Delphi IDE 中组织大项目

> ID：12060603
> 
> 赞同：9
> 
> 时间：2012-08-21T18:09:54.367
> 
> 标签：delphi

我想在 IDE 中将我的大应用程序拆分为更小的部分。Corrently，我有一个包含很多文件的项目（MainApp.exe）。有这么多文件，我有时会困惑在哪里可以找到要修改的正确文件。
如果我可以将我的应用程序拆分为不同的部分，例如 InvoicePart、AnalysisPart、CustomerPart、ReportPart 等，那就太好了。编译这些部分时应该生成一个可执行文件。这意味着我不想在 DLL 或 runtiume 包中拆分正在运行的 *.exe 应用程序。它应该只是帮助我更轻松地编写代码。

Delphi XE有优雅的方式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T06:59:40.490

在文件夹中组织您的源文件，例如`(Invoice, Analysis, etc.)`. `Project Manager`通过菜单导航文件夹。

这是一种直接简单且灵活的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:39:34.593

这很容易，但远非优雅。

您所要做的就是将文件拆分到不同的目录中。说常见的，发票分析等。每个敲一个项目，把其他目录放在项目选项的搜索路径中。然而，这是我见过的最快的进入一团糟的方法。根据构建子项目的顺序，您可以轻松地得到不同的结果。

首先每个文件应该在哪个项目中？

您将如何停止在多个项目中拥有一个文件。

您是否要为 dcu 文件创建一个公用文件夹，几个或一个都没有？

你怎么知道所说的目标文件已经在“拥有”它的项目中编译？与代码不同步的目标文件是经典的挠头。

如果您使用集成源代码控制，您如何知道所有相关内容都是最新的？

您可以使用一个程序组来保持所有这些同步，但这并不能解决许多其他问题。

基本上，如果你的单个项目变得如此之大，你就会遇到这个问题，你就完全失去了对它的控制。上述内容不会重新获得控制权，它只会使您处于小费中的情况变得不那么明显。

使用 dll，这就是它们的用途。我知道这并不容易，而且会花费你，但有正确的方法来做，你当前的混乱，以及你提议的混乱。咬紧牙关，正确地做或不理会它是我唯一的选择。

我们最终到达了您打算去的地方，这不是一个快乐的地方。

# postgresql - 从 Hive 中的结果创建列

> ID：12060605
> 
> 赞同：0
> 
> 时间：2012-08-21T18:10:06.763
> 
> 标签：postgresql, hive

在 hive 中，我试图获取特定列中的数据，然后将其拆分为新列。然后我想移动一个包含一些值的列并将它们移动到这些新列中。如果不清楚，这就是我的意思

表名：table

前：

名称 日期 标签 值

* * *

名称 1 日期 1 标签 1 1

* * *

名称2 日期2 标签2 2

* * *

名称3 日期3 标签3 3

* * *

名称4 日期4 标签4 4

* * *

名称5 日期5 标签5 5

后：

名称 日期 标签1 标签2 标签3 标签4 标签5

* * *

姓名 1 日期 1 1

* * *

名称2 日期2* ***** ** *** ** *** ** *** *** 2

* * *

name3 date3* ***** ** *** ** *** ** *** ** *** ** *** ** *** *** 3

* * *

name4 date4* ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** ***** 4

* * *

name5 date5* ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ****** 5

* * *

值 1 将在列标签 1 中。值 2 将在列标签 2 中，等等......所有的空白显然都是空的。

此外，如果这太难或不是一个坏主意，我也在考虑将它们放入单独的表格中。在这些表中的每一个中，列将是名称、日期和标签列中的每个值。在最后一列下将是值。

我尝试过使用动态分区和加入，但它似乎不起作用请帮助！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:04:11.780

您是否正在尝试进行交叉制表？如果是这样，请参阅提供该[功能的](http://www.postgresql.org/docs/9.1/static/tablefunc.html#AEN138683)[PostgreSQL `tablefunc`contrib 模块](http://www.postgresql.org/docs/current/static/tablefunc.html)。请参阅那里的示例。[`crosstab`](http://www.postgresql.org/docs/9.1/static/tablefunc.html#AEN138683)

要使用它，您需要能够通过任何 Hive 调用本机 PostgreSQL 函数。

# design-patterns - 是适配器？请指教

> ID：12060606
> 
> 赞同：0
> 
> 时间：2012-08-21T18:10:07.647
> 
> 标签：design-patterns, adapter

我有一门课，那叫另一个课。喜欢：

```
class Caller
{
    public void LetsCall()
    {
        abstractA a = new ConcreteA();
        a.DoSomething();
    }

}
public abstract class abstractA
{
    public virtual void DoSomething()
    {
    }

}

class ConcreteA : abstractA
{
    public override void DoSomething()
    {
        base.DoSomething();
        Functions.Doit();
    }
}

class Functions
{
    public static void Doit()
    {
        //Some more work
    }
} 
```

想知道“ConcreteA”类在这里是一个适配器，而函数类是一个适配器？

任何人都可以解释适配器的特性。除了在适配器中调用方法的方法之外，是否可以使用其他方法。
谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:33:13.703

这看起来就像多态性和组合。适配器的想法是一个“包装器”，它分派给一些底层对象。拥有适配器的目的是允许现有代码符合特定接口。

我经常看到的一个例子是，我有一个我编写的形状库，并且我有以下界面。

```
 public interface Shape {
    double getArea();
 } 
```

现在我在另一个库中找到了一些很酷的 Circle 实现，我想在我的系统中使用它，但是没有 getArea() 方法。这里是：

```
public class SomeonesCircle {
   public double getRadius() { return radius; }
} 
```

所以为了让我在我的系统中让它成为一个“形状”，我​​可以引入一个适配器：

```
public class CircleAdapter implements Shape {

   private final SomeonesCircle theCircle;

   public CircleAdapter (SomeonesCircle theCircle) { this.theCircle = theCircle; }

   public double getArea() {
     return theCircle.getRadius() * theCircle.getRadius() * Math.PI;
   }
}

// Somewhere else I can now do
Shape shape = new CircleAdapter(new SomeonesCircle(radius)); 
```

所以现在我可以使用现有的代码作为一个形状——也就是说，我对其进行了调整。我在您的示例代码中没有看到同样的想法。也许，如果您使用实际的具体想法，它会更清楚。

# php - Bit.ly 喜欢简码算法

> ID：12060607
> 
> 赞同：0
> 
> 时间：2012-08-21T18:10:09.140
> 
> 标签：php, url-shortener

我正在尝试为客户制作网址缩短器。我现在有一个不错的算法，唯一的问题是，如果客户要为不同的促销缩短相同的 URL，它会创建相同的代码。

我能做些什么来防止这种情况发生？

```
$hash = sha1($this->data[$this->alias]['us_url']);
$this->data[$this->alias]['shortid'] = base_convert(hexdec($hash), 10, 32); 
```

我希望能够为同一个 url 创建多个短代码以不同地跟踪它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:11:46.643

与创建密码哈希时的过程相同：使用一些盐。

```
$hash = sha1($randomly_generated_salt . $my_url); 
```

因此，相同的输入字符串将创建不同的哈希。盐应该有合适的长度以提供足够的熵。

（尽管您不会使用 sha1 来散列密码！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:15:23.193

添加提供自定义网址的可能性。在伪代码中：

```
if(isset($customUrl) && isUniqueLabel($customUrl)) {
    createCustomUrl()
} else {
   createUsualUrl()
} 
```

给定自定义 URL，客户端可以手动定义 url（就像 is.gd 和许多其他服务所做的那样），这将增加自定义的可能性。

# iphone - 从 Web 应用程序在 iOS5 日历上创建事件

> ID：12060608
> 
> 赞同：1
> 
> 时间：2012-08-21T18:10:08.733
> 
> 标签：iphone, ipad, ios5, web-applications, iphone-web-app

我尝试了一些研究，但似乎一无所获。是否可以从 Web 应用程序访问 iPad/iPhone iOS5 上的日历？我的目标是为其添加一个事件，这可以实现吗？打开文件流是一种选择，以防万一。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:06:56.740

在[这个 SO question](https://stackoverflow.com/questions/11825221/add-calendar-event-to-android-from-web-vcs-download?lq=1)上，OP 提到他通过动态创建的 iCal 文件在 iOS 上添加日历事件没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:17:52.413

这不能通过网络应用程序获得。您唯一能做的就是在 Web 应用程序的文本中包含日期。iOS 会将其检测为一个事件（如果格式正确），并在用户单击时为用户提供创建日历事件的选项。

# javascript - jQuery GraphML 解析（清理导入的数据）

> ID：12060612
> 
> 赞同：1
> 
> 时间：2012-08-21T18:10:26.207
> 
> 标签：javascript, jquery, graphml

因此，我在我的一个脚本中切换了 graphML 导入方法，但在清理导入的数据时遇到了麻烦。目前，graphML 数据如下所示：

```
<node id="1">
  <data key="url">www.someURL.com</data> 
  <data key="label">Guy, This</data> 
  <data key="profile_url">/dir/uri=http...</data> 
  <data key="number_of_authored_works">x</data> 
  <data key="earliest_publication">y</data> 
  <data key="num_earliest_publication">z</data> 
  <data key="latest_publication">a</data> 
  <data key="num_latest_publication">b</data> 
  <data key="num_unknown_publication">c</data> 
```

这是我的代码：

```
function loadXML() {
$.ajax({
    type: "GET",
    url: "Scripts/coauthor4.xml",
    dataType: "xml",
    success: xmlParser
})}

var someVar= [];
function xmlParser(xml) {

$(xml).find('edge').each(function (i) {
    someVar[i] = $(this).find('data').siblings().text();
})} 
```

当我去控制台并请求一个节点（someVar [i]）时，我得到这样的东西：

```
www.someURL.comGuy, This/dir/uri=http...xyzabc 
```

所以我至少拥有所有必要的数据......很好。但我想从每个数据点制作键：值对。所以本质上， someVar[i][0] 应该是这样的：

```
someVar[i][0]
  url: 'www.someURL.com' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:17:09.750

除非我遗漏了什么，否则你只需要在那里再扔一个循环。遍历每个“数据”节点：

```
$(xml).find('edge').each(function (i) {
    $(this).find('data').each(function(j) {
        var key = $(this).attr('key');
        someVar[i] = someVar[i] || {};
        someVar[i][key] = $(this).text();
    });
}); 
```

现在`someVar[0]`看起来像：

```
{
    url: 'www.someURL.com',
    label: 'Guy, This'
    ...
} 
```

# wpf - 在不使用键的情况下将样式应用于多个控件

> ID：12060613
> 
> 赞同：1
> 
> 时间：2012-08-21T18:10:27.237
> 
> 标签：wpf, xaml, styles

在 .NET WPF 中，我有以下 XAML 代码：

```
<StackPanel>
    <StackPanel.Resources>
        <Style TargetType="FrameworkElement">
            <Setter Property="Margin" Value="5" />
        </Style>
    </StackPanel.Resources>

    <CheckBox>Check 1</CheckBox>
    <TextBox>Some text...</TextBox>
</StackPanel> 
```

控件**没有**应用任何边距。

**是否可以在不使用键**在每个控件上显式设置样式的情况下将样式应用于多个控件（不同类型的） ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:14:36.880

样式*不是*继承的，您可以使用`BasedOn`.

在这种情况下，另一种方法应该是使用[`ItemsControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)带有[`ItemContainerStyle`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyle.aspx)此样式的集合。

[这个答案](https://stackoverflow.com/a/11433552/546730)中有两种方法的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:15:07.397

**对不起，我在写这个之前误读了这个问题。** *如果您想在 StackPanel 中设置多个复选框的样式，我的回答很有用。*

通过将其放入 app.xaml 的合并字典中来隐式设置整个应用程序的样式。

```
<Style TargetType="CheckBox" BasedOn="{DynamicResource YourBaseStyle}"/> 
```

这也适用于更小的范围。将范围缩小到 StackPanel 只需要您将同一行代码添加到您的`StackPanel.Resources`标签中。

# dynamics-gp - Great Plains + Smartconnect 可以与 cXML 文件集成吗？

> ID：12060615
> 
> 赞同：0
> 
> 时间：2012-08-21T18:10:43.180
> 
> 标签：dynamics-gp, cxml

我需要将 cXML 文件中的数据上传到 Great Plains 系统。我们使用 SmartConnect for GP 工具将数据集成到 Dynamics GP。这种整合可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T21:23:09.333

像这样的集成通常是通过称为集成管理器的工具设计和安排的。此工具允许您通过类似 DTS 的例程将自定义 XML 或表映射到 GP。有关其用途的更多信息，您可以在此处找到用户手册：http: [//mbs.microsoft.com/downloads/public/GP90Docs/IMUsersGuide.pdf](http://mbs.microsoft.com/downloads/public/GP90Docs/IMUsersGuide.pdf)

# .net - 如何在 iText 中设置 PdfFormField 的字体？

> ID：12060618
> 
> 赞同：1
> 
> 时间：2012-08-21T18:10:56.333
> 
> 标签：.net, itextsharp

创建时如何使用 iText 为字段设置字体，如下所示：

```
PdfReader pdf = new PdfReader("C:\\foo.pdf");
FileStream outs = new FileStream("C:\\bar.pdf", FileMode.Create, 
                  FileAccess.Write);
PdfStamper stamps = new PdfStamper(pdf, outs);
PdfFormField field = PdfFormField.CreateTextField(stamps.Writer, 
                     false, false, 50);
field.SetWidget(new iTextSharp.text.Rectangle(50, 400, 500, 600),
      PdfAnnotation.HIGHLIGHT_INVERT);
field.SetFieldFlags(PdfAnnotation.FLAGS_PRINT);
field.FieldName = "my_field";
stamps.AddAnnotation(field, 1);
stamps.Close(); 
```

我已经有一个 BaseFont 的引用，并且想设置字段字体，以便当我打开 Acrobat 并检查表单字段时，外观属性将显示此字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:00:31.667

请看一下 TextField 类的代码，更具体地说是 getTextField() 方法。您会看到字体是在默认外观 (DA) 中定义的。许多事情都在这种方法中发生。创建外观，添加 BaseFont。

要么您必须编写自己的 TextField 类中的实现，要么您必须切换到使用 TextField 类。

您避免使用 TextField 是否有特定原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:01:04.503

您还有一个问题：

当我查看 Acrobat 时，我确实在字段中设置了字体，但我希望它说 Arial 而不是 SEBJIU+ArialMT

这是我使用的代码： BaseFont arial = BaseFont.CreateFont("c:\windows\fonts\arial.ttf", BaseFont.CP1252, BaseFont.NOT_EMBEDDED);

我有两点意见给你：

1.  ArialMT 是存储在 arial.ttf 文件中的字体名称。如果希望字体以不同的名称出现，则需要使用 BaseFont 类中的方法 setPostscriptFontName()。这是可能的，但我建议不要这样做，因为它具有误导性。

2.  SEBJIU+ 前缀意味着只使用字体的一个子集。如果您使用 setSubset(false) 前缀将消失。

我看到您没有嵌入字体，但前缀告诉我您正在嵌入一个子集。也许还有别的东西在起作用。在某些情况下，嵌入的参数会被忽略。这是记录在案的。例如，从不嵌入 Standard Type 1 字体（即使您使用 BaseFont.EMBEDDED）；始终嵌入使用编码 IDENTITY-H 或 IDENTITY-V 的字体。

# jquery - 使用 Cordova jquery ajax 调用未获得 401 未经授权，Upto Phonegap 1.4 工作正常

> ID：12060619
> 
> 赞同：4
> 
> 时间：2012-08-21T18:11:06.793
> 
> 标签：jquery, cordova, basic-authentication

我已将我的项目从 Phonegap 1.4 升级到 Cordova 1.8.1。当我在 Phonegap 1.4 中传递无效的用户名/密码时，对 web 服务的 Ajax 调用与 401 Unauthorized 一起工作正常。

升级后它不起作用，我没有得到任何响应并且网络服务留在那里。

如果将代码更改为 Phonegap 1.4 ，它就会开始工作。

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-19T20:26:06.237

在过去的几个月里，我遇到了这个问题，终于解决了。

首先，我们使用的临时解决方法是对请求实施超时期限。这行得通，但响应始终是 404。我们不知道它是否真的未能通过身份验证，或者我们的服务是否已关闭。对于我们的系统来说，这不是可接受的解决方法。

最后，经过大量谷歌搜索，我发现了实际问题。

当返回 401（这是基本身份验证，身份验证失败）时，它会在响应中添加一个标头，称为“WWW-Authenticate”。这告诉浏览器提示用户尝试登录。iOS webview 不知道该怎么做，所以这就是应用程序挂起的原因。

从您的服务中，您需要做的就是删除 WWW-Authenticate 标头，您应该开始在错误函数中看到 401。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T19:39:23.677

我只是有同样的问题。如果您传递不正确的凭据并使用

```
$.ajax({
    ...
    timeout: 5000, // Some timeout value that makes sense
    ...
}); 
```

然后使用 调用错误回调`{"readyState":0,"status":0,"statusText":"timeout"}`。在这种情况下，您将不得不猜测真正的错误是 HTTP 401。

或者，您可以使用

```
$.ajax({
    ...
    async: false, // :-(
    ...
}); 
```

你的错误回调会得到类似的东西`{"readyState":4,"responseText":"<html>...</html>","status":401,"statusText":"Unauthorized"}`。

# gmail - Gmail 中重要邮件的短信提醒

> ID：12060620
> 
> 赞同：0
> 
> 时间：2012-08-21T18:11:09.097
> 
> 标签：gmail, google-apps-script, google-calendar-api

我想做的是当我在 Gmail 中收到重要邮件时在我的手机上接收 SMS 警报（**通过 GMails Priority Inbox 功能过滤的重要邮件**- 在 Gmail 中搜索：“is:important”）。我在 techawakening.org (http://techawakening.org/free-sms-alerts-new-email-on-gmail-with -google-docs/1130/) 并试图以此为基础，但由于我没有技术背景，我没有成功（还）。我尝试在脚本中构建的另一件事是指定某个日历的选项（脚本使用谷歌日历来发送短信警报）提醒事件应该保存到（我不想让它们弄乱我的默认主日历） .

这是我想出的：

```
function sendsms() {
  var label = GmailApp.getUserLabelByName("sendsms");
  var firstThread = GmailApp.getInboxThreads(0,1)[0];
    var firstThread = firstThread.isImportant();
    var firstThread = firstThread.addLabel(label);

var threads = label.getThreads();
var now = new Date().getTime();
for(i in threads){
  var message = threads[0].getMessages()[0];
  var sender= message.getFrom();
  CalendarApp.getCalendarsByName('Invisible').createEvent(threads[0].getFirstMessageSubject() + " By: "+sender,new Date(now+60000),new Date(now+60000)).addSmsReminder(0);
  }
  label.removeFromThreads(threads);
} 
```

这里有人可以帮助我吗？

提前非常感谢。

菲尔

# xcode - 如何创建带有图像和页面的菜单，例如 iPod 菜单

> ID：12060621
> 
> 赞同：1
> 
> 时间：2012-08-21T18:11:14.030
> 
> 标签：xcode, menu, popover

我正在尝试寻找教程或书籍，解释谁来制作菜单应用程序，例如 iPod/iPad 菜单，图像作为按钮和页面。我要做的是一个菜单，带有弹出窗口的菜单，选择弹出窗口的选项，然后用按钮/图像填充菜单（用代码），该菜单可以位于页面上更多. 提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:25:16.647

好的，您可以在这里使用两件事：

Three20 库，它有几个额外的组件，您也可以使用：[repository here](https://github.com/facebook/three20)

如果您只想要一个类似的视图而不需要其他任何东西，您可以使用 myLauncher: [repository here](https://github.com/Jarada/myLauncher)

我知道可能还有更多，但这些是我在寻找类似视图时看到的主要两个。

# ios - 在 iOS 中指定默认通知样式

> ID：12060624
> 
> 赞同：0
> 
> 时间：2012-08-21T18:11:33.840
> 
> 标签：ios, cocoa-touch, apple-push-notifications, uilocalnotification, info.plist

Mountain Lion 中的新功能，Cocoa 应用程序包括对`NSUserNotificationAlertStyle`Info.plist 中的键的支持，它允许开发人员为其通知指定默认样式。

显然，用户可以更改这一点，但允许开发人员提供一个合理的默认值是有意义的。

iOS中是否存在与此相似的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:16:29.843

只有用户可以更改默认警报样式，可以在设置 > 通知 > [APP] 中找到

# ruby-on-rails - Rails：您如何为生产环境预编译自定义样式表？

> ID：12060626
> 
> 赞同：0
> 
> 时间：2012-08-21T18:11:41.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经尝试了许多修复和我在网上找到的那些修复的变体，但没有一个有效。我的问题是我有一个自定义样式表，如果浏览器是 IE (stylesheet-ie.css.scss)，就会调用它。我已经运行了以下但没有成功：

```
rake assets:precompile 
```

运行编译命令后，我在 production.log 中收到以下错误。

```
ActionView::Template::Error (stylesheet-ie.css isn't precompiled):
    14:     <title><%= full_title(yield(:title)) %></title>
    15:     <%= stylesheet_link_tag    "application", media: "all" %>
    16:     <!--[if IE]>
    17:       <%= stylesheet_link_tag("stylesheet-ie") %>
    18:     <![endif]-->
    19:     <%= javascript_include_tag "application" %>
    20:     <%= csrf_meta_tags %> 
```

在 production.rb 我有：

```
config.assets.precompile += ['stylesheet-ie.css'] 
```

该文件是assets/stylesheet/stylesheet-ie.css.scss ...我之前将它作为stylesheet.css，但为了让它工作而改变了它。两种方法都行不通。

在这一点上，我不知道还能做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:21:37.533

这在开发环境中有效吗？

在进行预编译时，您必须指定环境。你在任何地方都这样做吗？

```
RAILS_ENV=production rake assets:precompile 
```

如果您没有在其他地方提及您的环境，这应该编译您的资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:19:11.280

人力资源管理系统。

我的 config/application.rb 设置如下：

```
config.sass.load_paths << File.expand_path('../../lib/assets/stylesheets/')
config.assets.precompile += %w(jquery.animate-colors-min.js ie.js ie8.css) 
```

所以它非常相似，但你没有提到 load_paths。（另外，顺便说一句，我正在使用`.css.sass`，所以我不确定你是否需要摆弄`config.sass`or `config.scss`。）

—☈

# android - 当任何应用程序在 Android 中从后台移动到前台时如何发送通知，反之亦然

> ID：12060629
> 
> 赞同：0
> 
> 时间：2012-08-21T18:11:50.000
> 
> 标签：android

有什么方法可以知道任何应用程序何时从后台到前台，反之亦然？我需要某种机制让我自己的应用程序知道设备中安装的任何应用程序从后台转到前台（主屏幕）或从后台转到前台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:18:29.977

出于安全原因，我认为这在 Android 中是不可能的。如果您想查看应用程序何时启动，您必须创建一个自定义启动器。

即便如此，我一直在寻求这样做一段时间，而我最接近类似功能的方法是监控正在运行的应用程序，如下所示：

```
ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
List<RunningAppProcessInfo> runningTasks = activityManager.getRunningAppProcesses(); 
```

因此，如果

```
runningTasks.get(0).importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND 
```

那么该任务在前台（如果不是，那么它在后台）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:20:52.633

为了检查我的应用程序是否在前台，我使用了以下代码：

```
 public static boolean isAppInForeground(Context context) {
  List<RunningAppProcessInfo> appProcesses = ((ActivityManager) context
    .getSystemService(Context.ACTIVITY_SERVICE)).getRunningAppProcesses();
  if (appProcesses == null) {
  return false;
  }
  final String packageName = context.getPackageName();
  for (RunningAppProcessInfo appProcess : appProcesses) {
    if (appProcess.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND
        && appProcess.processName.equals(packageName)) {
      return true;
    }
  }
  return false;
} 
```

# javascript - 具有不透明度和模态行为的向导

> ID：12060641
> 
> 赞同：0
> 
> 时间：2012-08-21T18:12:49.593
> 
> 标签：javascript, jquery, css

我正在接管别人的代码...该功能有效，我可以单击 3 个不同的 div，编辑它们并即时保存它们。现在需要一些类似向导的用户指南，引导用户完成 3 个不同的步骤。

所以我需要突出显示有问题的 div，使其可编辑，而所有其他部分都被禁用和不透明 - 就像一个模态对话框。然而，需要有一个“跳过教程”链接，它完全跳过向导，允许用户自由编辑。“跳过教程”句柄让我感到困惑，因为它在突出显示的 div 之外，因此“模态”不再适用？

有人可以帮我找到如何做到这一点吗？使用 jQuery。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:14:31.807

我做了很多研究，最后采用了一种方法，即拥有一个覆盖 div 并手动将 z-indexes 分配给我在前景中需要的所有元素。我真的不喜欢这个，因为它需要大量的手工工作，但它正在工作，所以很好：

```
if (step == 1) {
    var next = document.createElement("div");
    next.id = "nextBtn";
    next.style.cssText= "position:absolute; top:420px;left:885px;background-image:url('/images/nextStep.png');width:68px;height:40px;z-index:99;cursor:pointer";
    document.getElementsByTagName("body")[0].appendChild(next);

    var overlayDiv = document.createElement("div");
    overlayDiv.id = "overlayDiv";
    overlayDiv.style.cssText = "position:absolute; top:0; right:0; width:" +    screen.width + "px; height:" + screen.height + "px; background-color: #000000; opacity:0.5";
    document.getElementsByTagName("body")[0].appendChild(overlayDiv);

    var skipDiv = document.createElement("div");
    skipDiv.id = 'skipDiv';
    skipDiv.style.cssText = "position:absolute; top:80px; left: 1060px;background- image:url('/images/skipTutorial.png');width:148px;height:39px;cursor:pointer";
    document.getElementsByTagName("body")[0].appendChild(skipDiv);

    //more stuff
 } else if (step == 2) {
   //step2 stuff
 } else if (step ==3) {
   //step3 stuff
 } 
```

# jquery - 选择用于表单的 jquery 插件 - 让它在最基本的情况下工作的问题

> ID：12060645
> 
> 赞同：0
> 
> 时间：2012-08-21T18:12:57.867
> 
> 标签：jquery, jquery-chosen

对于我的生活，我无法弄清楚为什么这不起作用。请参考jsfiddle：http: [//jsfiddle.net/4YEU2/](http://jsfiddle.net/4YEU2/)

这是文档和示例：[http ://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:16:54.360

你少了一个美元！！！

```
$(document).ready(function() {
    **$**(".chzn-select").chosen(); // Missing $ at the beginning of the line in your jsfiddle
});​ 
```

# javascript - Google Analytics - 升级到异步代码

> ID：12060649
> 
> 赞同：2
> 
> 时间：2012-08-21T18:13:09.043
> 
> 标签：javascript, cookies, asynchronous, google-analytics

我们有一个旧网站，它仍然使用古老的“gat”分析跟踪代码（预异步）；我们想将它升级到当前的“gaq”异步代码。

如果有人做过同样的切换，有几个问题......

1) 一旦我们进行切换，用户 cookie 是否会从旧代码中继承？或者，Google Analytics（分析）现在会“忘记”已经访问过我们网站的访问者，而将获得更新的异步代码片段的每个人都视为**全新的**访问者？

2) 网站相当复杂；我们可能不得不“寻找”网站上所有带有旧跟踪代码的部分。当我们进行代码清理时，旧的“gat”代码和新的“gaq”代码是否兼容？这意味着他们都会正确计算综合浏览量，不会丢失引荐来源信息，并且即使用户在访问期间同时点击了包含旧代码和包含新代码的页面，也只会计算一次访问？

谢谢！仅供参考，这是我们当前的（旧）代码：

```
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-#######-#");
pageTracker._trackPageview();
} catch(err) {}</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:26:12.493

如果您的实现就像跟踪浏览量一样简单——或者以其他方式，如果您没有大量使用已弃用的 GA 方法，对用户操作或浏览器功能或其他任何东西进行自定义跟踪，那么这里就是您的答案：

1.  GA 会记住来访者。
    这背后的原因很简单：页面上的代码不是 GA 用来跟踪人员的代码——他们在`document.write();`脚本部分中调用的 .js 文件是他们用来跟踪人员和设置 cookie 以及所有其余的。
    他们已经更新了该文件数十次，而您没有注意到，因为他们如何将逻辑（在该文件中）与您使用的跟踪界面（一直保持不变）分开。

2.  在旧代码上放置一些页面不会有任何问题（同样，只要您没有在页面之间进行任何高级跟踪，基于比跟踪更高级的非常新或非常旧的功能自定义变量、跟踪购买和跟踪页面浏览量）。
    这里的一个规定是你***不要把它们都放在同一页***上。
    这将导致两者都被解雇，并且都收集相同的数据，并且您基本上会将您的指标加倍。

# iphone - AF网络问题

> ID：12060650
> 
> 赞同：0
> 
> 时间：2012-08-21T18:13:18.107
> 
> 标签：iphone, ios, xcode, afnetworking

我有一个关于 AFNetworking 的问题..：

1.  我正在设置单元格的图像，`setImageWithURL:`但发现请求是以某种随机顺序发送的，即我正在为单元格#1、2、3、4 设置图像，而对图像#3 的请求将首先发送。

2.  同样的情况，我注意到有时会打开两个连接（通常其中一个在收到整个响应之前具有“客户端关闭连接”状态，但现在总是如此）。

这种行为有解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:41:00.463

如该方法的[文档](http://afnetworking.github.com/AFNetworking/Categories/UIImageView+AFNetworking.html#//api/name/setImageWithURL%3a)中所述，所有这些处理都是异步完成的。所以一些请求可能在不同的时间开始或结束。根据图像的文件大小或服务器延迟，它们可能会在不同的时间开始或结束。

如果您想设置图像以便您可以阻止设置单元格的图像，直到前一个单元格在[此处](http://afnetworking.github.com/AFNetworking/Categories/UIImageView+AFNetworking.html#//api/name/setImageWithURLRequest%3aplaceholderImage%3asuccess%3afailure%3a)`setImageWithURLRequest:placeholderImage:success:failure:`描述的成功块内完成。

`maxConcurrentOperationCount`您还可以使用 NSOperationQueue 的方法操作 AFHTTPClient 和 AFImageResquestOperation 一次只下载一个图像。

# delphi - Delphi 2010 - 如何复制和清除 TShape

> ID：12060651
> 
> 赞同：2
> 
> 时间：2012-08-21T18:13:18.830
> 
> 标签：delphi, canvas, delphi-2010, shape

好的，在使用 TShape 之后，我需要从线条和文本中清除我的“Shape1”。

以及如何将“Shape1”中的所有内容复制到“Shape2”中？

谢谢B4^o^

```
 type
      TShape = class(ExtCtrls.TShape); //interposer class

      TForm1 = class(TForm)
        Shape1: TShape;
        Shape2: TShape;
        Button1: TButton;
        Button2: TButton;
        procedure Button1Click(Sender: TObject);
        procedure Button2Click(Sender: TObject);
      private
      public
      end;

    var
      Form1: TForm1;

    implementation

    {$R *.dfm}

    procedure TForm1.Button1Click(Sender: TObject);
    begin
//        Draw some text on Shape1 := TShape 
        Shape1.Canvas.Font.Name :='Arial';// set the font 
        Shape1.Canvas.Font.Size  :=20;//set the size of the font
        Shape1.Canvas.Font.Color:=clBlue;//set the color of the text
        Shape1.Canvas.TextOut(10,10,'1999');
    end;

    procedure TForm1.Button2Click(Sender: TObject);
    begin
//        Copy everything from Shape1 to Shape2 (make a duplication)
//        How to do it ? 
        showmessage('copy Shape1 into Shape2');    
    end;

    End. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:21:48.660

以下伪代码将`SourceShape`画布内容复制到`TargetShape`画布，但仅在`TargetShape`刷新之前：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  TargetShape.Canvas.CopyRect(Rect(0, 0, TargetShape.ClientWidth,
    TargetShape.ClientHeight), SourceShape.Canvas, Rect(0, 0,
    SourceShape.ClientWidth, SourceShape.ClientHeight));
end; 
```

要*清除*之前复制的内容，您可以使用以下命令：

```
procedure TForm1.Button2Click(Sender: TObject);
begin
  TargetShape.Invalidate;
end; 
```

为了使您的绘图保持持久性，您需要实现自己的事件，在该事件中，每当它触发时，使用如上所示`OnPaint`的方法将当前画布内容从源复制到目标。[`CopyRect`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCanvas.CopyRect)

但问题是，为什么要使用`TShape`控件。最好自己使用`TPaintBox`和绘制你的东西，包括通过`TShape`控件绘制的形状。

# css - 媒体查询有什么问题？

> ID：12060657
> 
> 赞同：2
> 
> 时间：2012-08-21T18:13:41.970
> 
> 标签：css, media-queries

[W3C 标准文档](http://www.w3.org/TR/css3-mediaqueries/)说：

> 当指定的媒体特征之一未知时，用户代理将媒体查询表示为“不是全部”。

然后它给出了以下示例：

```
<link rel="stylesheet" media="screen and (max-weight: 3kg) and (color), (color)" href="example.css" /> 
```

然后它说第一个媒体查询将被表示为“不是全部”并评估为假，第二个媒体查询的评估就像第一个媒体查询没有被指定一样有效。

为什么会这样。我希望这是因为 max-weight 的 3kg 值不是有效值，文档中没有对此进行解释。但是，除了“未知媒体特征值”之外，我看不到任何未知的媒体特征，这在文档中的“未知媒体特征”之后单独讨论。我认为这个例子应该放在“未知媒体特征值”之下，而不是放在“未知媒体特征”之下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:52:09.780

The unknown media feature that the example is referring to is `max-weight`. Once that is encountered, the `3kg` value is no longer relevant since it will never be applicable anyway, because the browser won't know what to do with `max-weight` in the first place. So it skips that media query altogether, leaving you effectively with this:

```
<link rel="stylesheet" media="not all, (color)" href="example.css" /> 
```

Which is the same as this:

```
<link rel="stylesheet" media="(color)" href="example.css" /> 
```

Media features are described in [another section](http://www.w3.org/TR/css3-mediaqueries/#media1). The first sentence states:

> Syntactically, media features resemble CSS properties: they have names and accept certain values.

So it only makes sense to describe error handling of the media features themselves first, then handling of their values.

# java - 如何覆盖 ImageJ 中的现有插件？我有一个针对现有格式的自定义阅读器

> ID：12060658
> 
> 赞同：0
> 
> 时间：2012-08-21T18:13:47.617
> 
> 标签：java, plugins, imagej, overriding

我正在使用 CSI DM3 阅读器 ( [http://code.google.com/p/cornell-spectrum-imager/wiki/Home](http://code.google.com/p/cornell-spectrum-imager/wiki/Home) ) 来阅读我的 .dm3 文件。我想为此添加拖放功能，所以我更改了文件 HandleExtraFileTypes.java ( [http://rsbweb.nih.gov/ij/plugins/download/HandleExtraFileTypes.java](http://rsbweb.nih.gov/ij/plugins/download/HandleExtraFileTypes.java) ) 并在第 101 行更改了它的 .dm3 关联- 103 起

```
 if (name.endsWith(".dm3") && buf[0]==0 && buf[1]==0 && buf[2]==0 && buf[3]==3) {
        return tryPlugIn("DM3_Reader", path);
    } 
```

至

```
 if (name.endsWith(".dm3") && buf[0]==0 && buf[1]==0 && buf[2]==0 && buf[3]==3) {
        return tryPlugIn("CSI_DM3_Reader", path);
    } 
```

**这会在 CSI DM3 阅读器和标准 DM3 阅读器中打开文件，我希望它只在 CSI DM3 阅读器中打开。如何禁止 ImageJ 打开其常规 DM3 阅读器？**

注意：tryPlugIn 对象如下

```
/**
* Attempts to open the specified path with the given plugin. If the
* plugin extends the ImagePlus class (e.g., BioRad_Reader), set
* extendsImagePlus to true, otherwise (e.g., LSM_Reader) set it to false.
*
* @return A reference to the plugin, if it was successful.
*/
private Object tryPlugIn(String className, String path) {
    Object o = IJ.runPlugIn(className, path);
    if (o instanceof ImagePlus) {
        // plugin extends ImagePlus class
        ImagePlus imp = (ImagePlus)o;
            if (imp.getWidth()==0)
                o = null; // invalid image
            else
                width = IMAGE_OPENED; // success
    } else {
        // plugin does not extend ImagePlus; assume success
        width = IMAGE_OPENED;
    }
    return o;
} 
```

# sql-server - SQL Server 数据库中的列创建顺序

> ID：12060662
> 
> 赞同：1
> 
> 时间：2012-08-21T18:14:02.340
> 
> 标签：sql-server, multiple-columns

如果我在 SQL Server 数据库中的 B 列之前创建 A 列，出于任何原因是否重要？在这两者之间没有假定其他行动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:19:54.163

看到这个：

您的表结构：

```
create table test (id int, name varchar(100)); 
```

您的客户表：

```
create table test (name varchar(100), id int); 
```

如果您使用：

```
insert into test values (10, 'Roger') 
```

不指定表格中字段的顺序会导致您的客户转换错误。

# java - 远程控制 java webstart 应用程序 - 设计

> ID：12060663
> 
> 赞同：1
> 
> 时间：2012-08-21T18:14:05.387
> 
> 标签：java, http, rmi, java-web-start

一个 java 客户端通过 webstart 交付给客户，并报告给一个 servlet

1.  它已经开始了。
2.  并且它每秒执行 n 次任务。

可以访问 1 和 2 中信息的 servlet 端管理员决定客户端现在需要每秒执行 (n+x) 次任务。

最好的方法是什么？我不想在客户端中加入轮询机制。

当调用多个实例时，我能否使用 RMI 在客户端或客户端上设置值。

# asp.net - 脚本不在不可见的 asp:Panel 上运行后使其可见（ASP.Net）

> ID：12060669
> 
> 赞同：1
> 
> 时间：2012-08-21T18:14:22.280
> 
> 标签：asp.net

我有一个 asp:Panel，我只在完成调查后才显示它。我在面板中有一个显示 TripAdvisor 小部件的脚本。当面板可见时，小部件不会显示。如果我在加载调查时将面板设置为可见，则会出现小部件。使面板可见后如何让脚本运行？asp:Panel 代码如下。

非常感谢您的帮助。

```
 <asp:Panel ID="PanelReviewSite" runat="server" CssClass="Panel" Visible="false">
            <table>
                <tr>
                    <td align="center">
                        <div id="TA_sswidecollectreview991" class="TA_sswidecollectreview">
                            <ul id="8XReiUtFMK2" class="TA_links R9Huu5J0oLD">
                                <li id="6lsEHIwyG34" class="RywVDRO81a">Write a review of <a target="_blank" href="http://www.tripadvisor.com/Hotel_Review-......">My Hotel</a></li>
                            </ul>
                        </div>
                        <script src="http://www.jscache.com/wejs?wtype=sswidecollectreview&amp;uniq=991&amp;locationId=81234&amp;lang=en_US&amp;border=true"></script>
                    </td>
                </tr>
            </table>
        </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:02:21.887

`display:none`在定义中添加具有属性而不是使用属性的附加 css 类`Visible`。并将 CssClass 属性重置为`Panel`调查完成后。

# php - 当有人在 php 中看到用户的个人资料时，我想在 url 中添加用户名

> ID：12060680
> 
> 赞同：-1
> 
> 时间：2012-08-21T18:15:21.433
> 
> 标签：php, mysql, wordpress

我想建立一个系统，当有人想要搜索注册用户时，他/她只需从网站 url 搜索。它有点令人困惑..我举个例子：在 facebook.com 中，当输入[http://facebook.com/john_corner](http://facebook.com/john_corner)时，会显示注册用户 john_corner 的个人资料。我怎样才能在我的网站上得到这个？请给我一个方向怎么办？非常感谢任何帮助、代码、建议和有用的链接。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:20:50.953

您正在寻找的是 URL `rewriting`。

大多数网络服务器或多或少都支持它，但是 apache 和 nginx 支持它。

如果您使用的是 apache，请查看`mod_rewrite`文档：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

简短说明：您设置规则以映射`readable urls`到现有文件，例如，yoursite.com/(.*) 到 index.php?username=$1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:26:29.390

你可以通过重写来做到这一点

```
RewriteEngine       On
RewriteRule   ^(.*)?/([A-Za-z0-9-]+)   http://%{HTTP_HOST}/index.php?username=$1 [R] 
```

您也可以通过这种方式将短网址转换为完整网址。

对于 apache [mod_rewrite](http://httpd.apache.org/docs/2.2/rewrite/)

对于 IIS [URL 重写模块](http://learn.iis.net/page.aspx/460/using-the-url-rewrite-module/)

# javascript - 如何使页面在点击时向下滑动而不刷新

> ID：12060681
> 
> 赞同：1
> 
> 时间：2012-08-21T18:15:21.647
> 
> 标签：javascript, jquery, ajax, dynamic

基本上，我希望这个网站（[http://darynjohnson.com/Medical%20Futures/index.php](http://darynjohnson.com/Medical%20Futures/index.php)）页面在单击链接时从屏幕顶部向下滑动，并在再次单击时向上滑动（最好没有浏览器清爽）。

有谁知道实现这一目标的最简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:16:53.620

使用 JQuery 的 toggle() 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:41:38.697

为了顺利过渡，您确实应该执行 AJAX 请求。然后，使用 slideToggle 或仅使用 slideDown 向下滑动页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T05:10:47.800

您还可以使用此功能[http://www.greepit.com/notify/#](http://www.greepit.com/notify/#)只需在页面加载时调用它，而不是单击不同的按钮（如粘滞条、浮动条等）您还可以根据您的要求制作自定义 css 和设计。

希望这会有所帮助。

# javascript - JS 正则表达式跳过所有其他匹配

> ID：12060685
> 
> 赞同：4
> 
> 时间：2012-08-21T18:15:31.727
> 
> 标签：javascript, regex

我在 JS 中看到 RegExp 对象的一些奇怪行为。我正在尝试将查询字符串与搜索自动完成功能的单词开头进行匹配。在遍历名称数组并返回匹配项时，正则表达式仅命中所有其他预期匹配项。

```
var words = [
                "catherine",
                "caterpillar", 
                "nice catch", 
                "fat cat", 
                "catalina"
            ],
            re = new RegExp('\\bcat', 'gi'),
            matches = [],
            results, i;

for (i=0; i<words.length; i++) {
    if (re.exec(words[i])) {
        matches.push(words[i]);
    }
}

console.log(matches); 
```

此代码返回`["catherine", "nice catch", "catalina"]`. 无论元素的顺序如何，行为都是相同的。如果我在每次迭代中重新创建这个 RegExp 对象（例如`re = new RegExp('\\bcat', 'gi')`在 for 循环内），它会按预期工作并返回所有数组项，但我真的宁愿不每次通过都必须这样做。

我对正则表达式不太熟悉 - 这是我的正则表达式的问题吗？我忘记了分隔符还是什么？或者它只是另一个 JS 怪癖？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T18:23:01.393

当您调用`exec`RegExp 对象时，它会维护一个`lastIndex`属性，该属性包含您的正则表达式匹配字符串的先前索引。下次您尝试使用`exec`它进行匹配时，只会开始查看 index `lastIndex + 1`，即使您正在搜索不同的字符串。

为了防止这种情况，您可以在循环的每次迭代中设置`re.lastIndex`为`-1`，或者在创建 RegExp 时删除全局标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:19:01.537

Javascript 怪癖。:P

[http://www.w3schools.com/jsref/jsref_regexp_g.asp](http://www.w3schools.com/jsref/jsref_regexp_g.asp)

# facebook - 当我在状态中放置链接时放置的图像是什么？

> ID：12060687
> 
> 赞同：-1
> 
> 时间：2012-08-21T18:15:39.890
> 
> 标签：facebook

我有一个网站，想在我的 facebook 状态中添加一个链接。但是，不显示图像。

如何确定显示带有该链接的图像？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:27:24.007

的确。这就是答案。我必须指出我做的一切都很好，问题是我没有获取链接，因此 facebook 没有更新要显示的缩略图。所以最重要的阶段是获取链接 [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# javascript - 如何使公司内的其他人可以访问本地主机

> ID：12060691
> 
> 赞同：0
> 
> 时间：2012-08-21T18:15:55.703
> 
> 标签：javascript, iis

在 Windows 7 IIS 7.5 中创建和托管网站，还分配了 IP 地址。我希望在公司内部可以访问此 IP 地址，如何实现。如果公司内的任何用户访问此 IP 地址，他应该能够查看具有客户端 javascript 的网站。如何实现这一点，仅适用于 Intranet。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:17:15.757

您需要做的就是打开防火墙。

[http://technet.microsoft.com/en-us/network/bb545423.aspx](http://technet.microsoft.com/en-us/network/bb545423.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:17:27.753

我认为你应该在windows防火墙中设置它。选择*高级设置*、*入站规则*并双击*万维网服务*，标记*启用/允许连接*并使用“范围”选项卡将范围更改为您的 Intranet（您可以创建一系列允许的 IP 地址）。

# spring - 在Maven布局中使用spring或camel属性占位符覆盖junit测试的一些属性

> ID：12060692
> 
> 赞同：6
> 
> 时间：2012-08-21T18:16:24.497
> 
> 标签：spring, properties, junit, overriding

**我只想在src/test/resources**文件夹中的同名测试属性文件中指定要覆盖的属性。

再详细一点...

在 Maven 布局中，我有一个属性文件，其中包含要使用的部署值（例如*input.uri*）。

```
src/main/resources/app.properties: 
input.uri=jms:topic:in
app.name=foo_bar 
```

该文件的属性由属性占位符加载到**context.xml文件中：**

```
src/main/resources/META-INF/spring/context.xml:
<context:property-placeholder properties-ref="springProperties"/>
<util:properties id="springProperties" local-override="true" location="classpath:app.properties" /> 
```

我在**src/test/resources**文件夹中有同名的测试属性文件**app.properties ，并将***input.uri*定义覆盖为我的 junit 测试将使用的文件。（注意，*app.name*不会改变）。

 ****```
src/test/resources/app.properties: 
input.uri=seda:in 
```

您将如何编写 junit 测试和/或测试 context.xml 文件，以便从**src/main/resources/app.properties文件加载属性，但在****src/test/resources/app.properties**文件中定义任何属性覆盖**src/main/resources/app.properties**文件中的那些？如果您在**src/main**文件或**src/test** junit 测试文件中加载两个不同的文件并不明显 - 我希望属性占位符搜索类路径并选择正确的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:04:50.140

但是，您必须提供不同的名称 - 如果 main 和 test 中的属性都具有相同的名称，则其中一个或另一个中的整个属性将生效。

相反，这样的方法对我有用：

在你`src/main/resources/META-INF/spring/context.xml`这样做：

```
<context:property-placeholder location="classpath:app.properties" local-override="true" properties-ref="springProperties"/>
<util:properties id="springProperties">
</util:properties> 
```

在一个`test-context.xml`文件中：

```
<import resource="classpath:/META-INF/spring/context.xml">
<util:properties id="springProperties"> <!-- or refer to a overriding file -->
    <prop key="input.uri">seda.in</prop>
</util:properties> 
```

这将为您覆盖属性，同时保留原始文件中未覆盖的值。****

# c# - C#中的匹配模式

> ID：12060694
> 
> 赞同：-2
> 
> 时间：2012-08-21T18:16:26.530
> 
> 标签：c#, .net, regex

我对 C# 中的模式有这个问题。

我有这个模式：

```
1111100000000000000000000 
```

它是`row`25 个 1 或 0 的一个。

这`pattern`应该匹配在同一位置具有相同 1 的每个字符串，但它应该忽略`string`1 在`pattern`具有 0 的位置。唯一`pattern`应该检查的是 1 是否是正确的位置。

前任。

模式应匹配：

```
1111100000000000000000000

1111100000001000100010001

1111111110000111100111100 
```

但不是：

```
0111110000101110001011000

1011111010101010101000000 
```

我试过这个，用正则表达式：

```
 var orginal_pattern = "1111100000000000000000000";
       var match_pattern =   "1111100000000000010000000";

       var pattern = orginal_pattern.Replace("0", "[?]");
       Debug.WriteLine(pattern);

       var RegMatch = Regex.Match(match_pattern, pattern);

       Debug.WriteLine(RegMatch.Success); 
```

我希望有人能给我一个想法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:36:41.917

只需将您的字符串转换为 int 并使用`AND`运算符

```
int pattern = Convert.ToInt32("1111100000000000000000000", 2);
int[] nums = new int[]{
    Convert.ToInt32("1111100000000000000000000", 2),
    Convert.ToInt32("1111100000001000100010001", 2),
    Convert.ToInt32("1111111110000111100111100", 2),
    Convert.ToInt32("0111110000101110001011000", 2),
    Convert.ToInt32("1011111010101010101000000", 2),
};

foreach (var num in nums)
{
    bool b = (pattern & num)==pattern;
    Console.WriteLine(b);
} 
```

**输出：**

```
True
True
True
False
False 
```

# django - 新 Django 1.4 项目结构的用例？

> ID：12060698
> 
> 赞同：1
> 
> 时间：2012-08-21T18:16:47.597
> 
> 标签：django, project-structure

我想这是对我[应该在哪里创建 django 1.4 中的 django 应用程序的后续问题？](https://stackoverflow.com/questions/10888388/where-should-i-create-django-apps-in-django-1-4) 最终的答案似乎是“没有人知道为什么 Django 改变了项目结构”——这似乎有点不令人满意。

我们正在启动一个新的 Django 项目，目前我们遵循[http://www.deploydjango.com/django_project_structure/index.html](http://www.deploydjango.com/django_project_structure/index.html)中概述的基本结构：

```
├── project
│   ├── apps
│   │   ├── app1
│   │   └── app2
│   ├── libs
│   │   ├── lib1
│   │   └── lib2
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
└── manage.py 
```

但我认为我们也期待一个多开发人员环境，其中包括具有通用项目级组件的大部分独立应用程序，因此对我来说将项目和应用程序路径分开似乎更干净。

```
├── project
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── apps
│   ├── app1
│   └── app2
├── libs
│   ├── lib1
│   └── lib2
└── manage.py 
```

不过，很难为此提出任何具体的、非风格的理由。（在此之前，我主要只使用单应用程序项目，所以我可能在这里遗漏了一些东西。）

主要是，我的动机是 Django 1.4 似乎正朝着后一个方向发展。我认为有*一些*基本原理或预期的用例推动了这种变化，但我只看到了关于它可能是什么的猜测。

问题：

1.  1.4 项目结构变更的动机是什么？
2.  是否存在在项目内部/外部拥有应用程序会产生重大影响的用例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T18:36:33.783

1.  从项目中提取应用程序要容易得多，因为不再有这样的导入：

    ```
    from projectname.appname.models import MyModel 
    ```

    相反，您导入它们的方式与导入通过 python 包安装的应用程序相同

2.  如果您使用 i18n，那么这可能会产生影响，因为 makemessages 在当前目录中搜索翻译字符串。使用单个 .po 文件翻译应用程序和项目的一个好方法是在项目目录之外创建语言环境文件夹

    ```
    ├── project
    │   ├── settings.py
    │   ├── urls.py
    │   └── wsgi.py
    ├── app1
    ├── app2
    ├── locale
    │   ├── en
    │   └── de
    └── manage.py 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:48:58.250

我将较早的回复标记为答案，但我在 IRC 档案中遇到了这篇博客文章，其中似乎有一些额外的信息。

[http://blog.tinbrain.net/blog/2012/mar/15/django-vs-pythonpath/](http://blog.tinbrain.net/blog/2012/mar/15/django-vs-pythonpath/)

据我了解，要点是：

*   开发时，`manage.py` *隐式*设置`PYTHONPATH`以查看项目级代码，其结果`import myapp`适用于项目内定义的应用程序。
*   当你部署时，你通常不会运行`manage.py`，所以你不得不说`import myproject.myapp`，如果你不知道这一点，部署就会中断。
*   “标准”修复是将项目添加到`PYTHONPATH`，但这会导致双重导入（`myapp`和`myproject.myapp`），这可能会在信号等事物上产生奇怪的行为。

因此 1.4 项目结构似乎主要是为了消除开发人员依赖`manage.py`.

# xslt - 在 for-each 选择中设置 XSLT 变量

> ID：12060699
> 
> 赞同：0
> 
> 时间：2012-08-21T18:16:49.767
> 
> 标签：xslt

再会，

我有一个正在组装的 XSLT 模板，如下所示：

```
<xsl:for-each select="CarParts/Items">
<div class="columns"><xsl:value-of select="Quantity"/></div>
<div class="columns"><xsl:value-of select="Amount"/></div>
<div class="columns">[SUBTOTAL]</div><br />
</xsl:for-each> 
```

我知道我可以像这样定义一个 XSLT 变量：

```
<xsl:variable name="totalAmount" select="sum(CarParts/Items/Amount)" /> 
```

但我希望我的 XSLT 变量为 [SUBTOTAL]，它等于for-each 选择循环中的*Quantity * Amount。*这可能吗？如果这是 SQL，则相当于计算列。

有什么建议么？

TIA,

科森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:05:39.823

您想要做的是将值转换为数字，然后您可以根据需要将其相乘：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:template match="/">
        <results>
            <xsl:for-each select="CarParts/Items">
                <Item id="{position()}">
                    <q><xsl:value-of select="Quantity"/></q>
                    <a><xsl:value-of select="Amount"/></a>
                    <st><xsl:value-of select="number(Quantity)*number(Amount)"/></st>
                </Item>
            </xsl:for-each>
        </results>
    </xsl:template>
</xsl:stylesheet> 
```

由于没有提供输入/CSS，我稍微更改了格式，但你应该明白我想要什么。在我的示例输入上运行它

```
<CarParts>
  <Items>
    <Quantity>1</Quantity>
    <Amount>100.00</Amount>
  </Items>
  <Items>
    <Quantity>2</Quantity>
    <Amount>25.00</Amount>
  </Items>
  <Items>
    <Quantity>3</Quantity>
    <Amount>6</Amount>
  </Items>
</CarParts> 
```

我得到的结果

```
<?xml version="1.0" encoding="utf-8"?>
<results>
    <Item id="1">
        <q>1</q>
        <a>100.00</a>
        <st>100</st>
    </Item>
    <Item id="2">
        <q>2</q>
        <a>25.00</a>
        <st>50</st>
    </Item>
    <Item id="3">
        <q>3</q>
        <a>6</a>
        <st>18</st>
    </Item>
</results> 
```

# asp.net - ASP.NET Web 应用程序是否需要与其 IIS 虚拟路径匹配的物理目录？

> ID：12060704
> 
> 赞同：1
> 
> 时间：2012-08-21T18:16:58.050
> 
> 标签：asp.net, iis, web-config

这是 IIS7.5 和 .NET 4.0。这是场景：

1.  `localhost`在 path 处设置了一个网站`C:\wwwroot\`；它只包含一个`Default.html`文件。
2.  AC# Web 应用程序`MyWebApp`存储在`C:\MyWebApp\`（Web 根目录之外）
3.  `MyWebApp``localhost`在上注册为 Web 应用程序`/foo/bar/MyWebApp`
4.  `MyWebApp`在其根目录中有一个带有连接字符串等的 web.config

当我访问时`http://localhost/foo/bar/MyWebApp`，它会引发有关缺少连接字符串的异常。原来`ConfigurationManager`它不包含来自web.config 的*任何*配置。`MyWebApp`服务器**会解析 web.config**，因为如果我添加格式错误的 XML，它会引发异常。配置数据只是没有合并。

我发现`localhost`必须包含一个物理目录`C:\wwwroot\foo\bar\MyWebApp`才能`C:\MyWebApp\Web.config`被包含在内！

我一直无法找到记录此行为的任何地方。在虚拟路径中注册的 Web 应用程序是否需要存在物理路径？

# elasticsearch - 重命名弹性搜索响应中的字段

> ID：12060705
> 
> 赞同：2
> 
> 时间：2012-08-21T18:16:58.847
> 
> 标签：elasticsearch, pyes

我正在使用`PyES`库来查询`elastcsearch`. 假设我的查询如下所示：

```
query = MatchAllQuery()
query = query.search(
    fields=[
        "content.title",
        "content.description",
        "content.timestamp",
        "source.name",
        "source.url"
    ],
    count=10
)

result = es_conn.search(
             query=query,
             indices=['my'],
             sort="content.timestamp:desc"
         ) 
```

每个结果的项目都是一个以字段名称作为键的字典，所以 `item`= {" `content.title`": "bla bla", " `content.description`": "bla bla bla", ... }

我的脚本只是一个吸气剂，需要为第 3 方脚本保存结果而不进行处理，但该脚本需要特殊的键名：`item`= {“ `name`”：“bla bla”，“ `text`”：“bla bla bla”，...}

是否可以在 PyES 请求中指定用于在返回的对象中重命名字段名称（为“名称”、“标题”、“日期”等）的规则？

当然，在我得到响应后，我可以这样做，`elsticsearch`它需要遍历结果对象（我要避免什么），并且如果我在响应中有数千个项目，它看起来并不是那么理想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:32:59.747

您需要使用[部分字段](http://www.elasticsearch.org/guide/reference/api/search/fields.html)，但不确定是否可以将它们与 pyes 一起使用。我快速浏览了文档，但找不到。

您的 JSON 查询将如下所示：

```
{
    "query" : {
        "match_all" : {}
    },
    "partial_fields" : {
        "name" : {
            "include" : "content.title",
        },
        "text" : {
            "include" : "content.description",
        }
    }
} 
```

# php - php preg_match '/' 与正则表达式

> ID：12060706
> 
> 赞同：0
> 
> 时间：2012-08-21T18:17:03.863
> 
> 标签：php, regex, preg-match, routes

我正在匹配路线，所以如果我有一个字符串

`"/teacher/jkDfl"`

我想检查它是否以

`"/teacher/"`

我的新手方法是希望这评估为真

`preg_match("/^/teacher//", "/teacher/jkDfl")`

但我认为问题`'/'`出在所有角色上，环顾四周，我什么也没有出现。我可能需要在我的 google-fu 上工作，但我认为这对于使用正则表达式 xp 的人来说很简单。

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:20:57.053

定界符有些随意，因此，常用的`#`定界符会起作用：

```
preg_match("#^/teacher/#",.... 
```

如果你非常喜欢`/`'s，你可以用 's 来逃避它们`\`：

```
preg_match("/^\/teacher\//",.... 
```

... 或者让 PHP 为您执行此操作（适用于用户提供的文字字符串）：

```
preg_match("/^".preg_quote("/teacher/","/")."/",... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:19:36.053

您可以使用 # 作为正则表达式分隔符。

```
preg_match("#^/teacher/#", "/teacher/jkDfl") 
```

您还可以使用正则表达式捕获各种参数（例如 jkDfl），请参阅：

[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

在这种情况下：

```
if (preg_match("#^/teacher/([^?]*)#", $url, $gregs))
{
    $teacher = $gregs[1]; // "jkDfl"
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T18:22:20.983

您有两个选择：更改分隔符或转义文字。

不同的分隔符：

```
preg_match("%^/teacher/%", "/teacher/jkDfl"); 
```

转义文字：

```
preg_match("/^\/teacher\//", "/teacher/jkDfl");
//or
preg_match("/^" . preg_quote("/teacher/", "/") . "/", "/teacher/jkDfl"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T18:26:06.867

它应该是

```
preg_match("/^\/teacher\//", "/teacher/jkDfl") 
```

# javascript - 当 ajax 代码工作时，使用 javascript 禁用 html 中的链接

> ID：12060712
> 
> 赞同：0
> 
> 时间：2012-08-21T18:17:15.397
> 
> 标签：javascript, html, ajax

我在一个 html 页面中有大约 20 个链接，如下所示：

```
<a href="#" onclick="reserve_all(some parameters);"> <img  border="0" src="../images/shoping.gif"/></a> 
```

该`reserve_all`函数是一个 ajax 代码，它通过一个耗时的查询从数据库中获取数据。我希望当查询运行时所有 20 个链接都被禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:21:43.397

你可以做的是在reserve_all函数和ajax调用完成时

```
function reserve_all()
{
  //disable function for all link
   $('a').unbind('click', reserve_all);
   $('a').bind('click', disableLink);
   //ajax call to database 

}

//on complete ajax call -- than bind link again 
   $('a').unbind('click', disableLink);
   $('a').bind('click', reserve_all);

    function disableLink(e) {
        // cancels the event
        e.preventDefault();

        return false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:19:49.253

在您的全球范围内：

```
var aStandardAnchors = document.getElementsByTagName('a'); 
```

在您的 reserve_all 函数中：

```
reserve_all = function(params) {
  var aAnchors = document.getElementsByTagName('a');
  for(var i = 0; i < aAnchors.length; i++) 
    aAnchors[i].removeAttribute('onclick');

  // do the ajax call
} 
```

并在 ajax 调用的回调中（完成时）：

```
var aAnchors = document.getElementsByTagName('a');
for(var i = 0; i < aAnchors.length; i++) 
  aAnchors[i].setAttribute('href',aStandardAnchors[i].getAttribute('onclick')); 
```

# android - Google Play Developer Console 更新问题，正常吗？

> ID：12060715
> 
> 赞同：8
> 
> 时间：2012-08-21T18:17:30.267
> 
> 标签：android, google-play

一周前，我将我的应用程序部署到了 Google Play，并经常检查我的开发者控制台以分析统计数据。问题是，有时即使 24 小时后它也不会更新。例如，我的控制台中的任何数字都已经改变了两天，这变得非常令人沮丧。

这是正常的吗？有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-08T02:24:46.287

更新：最近（2015 年 9 月）统计数据有时会滞后三天以上。最近，有一条消息为延迟道歉，并说统计数据将很快更新；他们是，一天后。因此，如果您有一个新的应用程序并且想知道您的统计数据在哪里，请放松 - 正如他们在加勒比地区所说的“很快就来”。

可以想象这可能是什么原因。Google Play 商店中有超过一百万个应用程序，仔细研究所有这些数据可能需要相当长的时间。

上一个答案：

在发布此问题九个月后，我自己最近的经验是，统计信息实际上在太平洋标准时间上午 6:00 之前在我的开发人员仪表板上更新，并且更新的统计信息反映了当天午夜或晚些时候某个时间点的真实情况（即，在零到六个小时之前）。

我可以想象某个过程从午夜开始，遍历所有数十万个应用程序，并为每个应用程序拍摄快照并发布。因此，如果您的应用恰好位于该进程列表的前端，那么您可能会在接近午夜时获得更新，如果不是，则可能不会。我的总是在早上 6:00 之前进来。

我还注意到，在应用程序本身的公共页面上显示的关于我的应用程序安装了多少实例的报告似乎比我的开发人员仪表板中可用的统计数据滞后了多达五天（到目前为止）。也许这些是每周在某一天完成，或者可能有特定的延迟；我不知道，但肯定会有长达五天甚至更长的延迟。

我有一些间接证据表明详细信息页面每周更新一次，但我仍在监控这一点，并会在我的第二次更新发生时报告。截至目前，一个应用程序的页面落后了大约 5 天，所以当它再次更新时，我会在这里发回，并指出当时数据的最新情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T03:31:00.470

是的 - 在各种情况下似乎都是这种情况。尝试查看您报告的其他统计数据是否有任何变化，即每天活动设备安装/卸载的数量等。我相信统计数据的更新频率不会低于 24 小时。

有时，当您登录控制台时，您可能会看到来自 Play Market 的一些消息，告知更新的一些问题。我在去年见过几次。

# java - 如何在 Eclipse 调试器中查看 Java 字符串？

> ID：12060717
> 
> 赞同：1
> 
> 时间：2012-08-21T18:17:41.203
> 
> 标签：java, eclipse

在使用 Eclipse 进行 Java 开发时，我想在断点处查看字符串变量的值。

String 变量显示为`[47, 110, 109, 107, 111]`，这是有道理的，因为字符串实际上是一个 ASCII 字符数组。

但是，我希望不必在每次检查字符串时都将 ASCII 值转换为字符。如何让调试器显示字符串而不是 ASCII 值数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:53:15.727

如果你确定你的变量是一个字符串：

![我的字符串](../Images/98d44725988123f40040331aac26209a.png)

调试视图应自动将其显示为字符串。

![调试视图](../Images/086652c15df832a07bc0110a36c548bd.png)

确保您的变量确实是一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:19:14.247

`string`通过创建字符串对象的新实例，尝试将数组转换为具有正确编码的 a：

```
String s = new String(bytes,"ASCII");
System.out.println(s); 
```

这是一个简短的示例来演示：

```
 String example = "This is an example";
    byte[] bytes = example.getBytes();

    System.out.println("Text : " + example);
    System.out.println("Text [Byte Format] : " + bytes);
    System.out.println("Text [Byte Format] : " + bytes.toString());

    String s = null;
    try {
        s = new String(bytes, "ASCII");
    } catch (UnsupportedEncodingException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    System.out.println("Text from bytes: " + s); 
```

输出：

> 文字：这是一个例子
> 
> 文本[字节格式]：[B@187aeca
> 
> 文本[字节格式]：[B@187aeca
> 
> 来自字节的文本：这是一个示例

**参考：**

*   [http://www.mkyong.com/java/how-do-convert-byte-array-to-string-in-java/](http://www.mkyong.com/java/how-do-convert-byte-array-to-string-in-java/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-09-29T04:01:31.383

我以前也遇到过这种情况。我假设问题发生在您调试时的 eclipse 版本上。更改为旧版本的 eclipse 或 IntelliJ (2018) 和 jdk 8 => 问题解决了。

# c# - 优化许多小文件的流式传输

> ID：12060721
> 
> 赞同：3
> 
> 时间：2012-08-21T18:17:53.497
> 
> 标签：c#, windows, .net-4.0

我在 LAN 网络共享上有数十万个 0 到 8kb 的小文本文件。我可以使用一些互操作调用，`kernel32.dll`并`FindFileEx`递归地提取每个文件的完全限定 UNC 路径的列表，并将路径存储在内存中的集合类中，例如`List<string>`. 使用这种方法，我能够`List<string>`相当快地填充（每个 50k 文件名大约 30 秒，而 3 分钟`Directory.GetFiles`）。

不过，一旦我爬取了目录并将文件路径存储在其中，`List<string>`我现在想对存储在列表中的每个路径进行传递，并读取小文本文件的内容并根据读取的值执行一些操作。

作为测试平台，我遍历了`List<string>`存储 42,945 个文件路径到此 LAN 网络共享的每个文件路径，并在每个文件路径上执行了以下行`FileFullPath`：

```
 StreamReader file = new StreamReader(FileFullPath);
            file.ReadToEnd();
            file.Close(); 
```

因此，仅使用这些行，我的列表中存储的所有 42,945 个文件路径都需要 13-15 分钟的运行时间。

有没有更优化的方式通过 C# 加载许多小文本文件？我应该考虑一些互操作性吗？或者这几乎是我能期待的最好的？这似乎是一个非常长的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:23:03.267

我会考虑使用[`Directory.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefiles.aspx)，然后在您阅读文件时对其进行处理。

这将避免一次实际存储 42,945 个文件的列表的需要，并打开使用 PLINQ 并行执行某些处理的潜力（取决于文件的处理要求）。

如果处理在总时间中有相当大的 CPU 部分（并且它不是纯粹的 I/O 限制），那么这可能会在所需的完整时间方面提供很大的好处。

# c++ - 一个简单的 C++ 程序崩溃了？

> ID：12060723
> 
> 赞同：0
> 
> 时间：2012-08-21T18:17:55.150
> 
> 标签：c++, pointers

编写一个程序，要求用户输入他或她的名字，然后输入姓氏，然后构造、存储和显示第三个字符串，该字符串由用户的姓氏后跟逗号、空格和名字组成。使用 cstring 头文件中的 char 数组和函数。示例运行可能如下所示： 输入您的名字：Flip 输入您的姓氏：Fleming 以下是单个字符串中的信息：Fleming, Flip

```
int main()
{

    char * fName,*lName,*fullName;

    fName = new char;
    cin.getline(fName,100);

    lName=new char;
    cin.getline(lName,100);

    fullName=new char[strlen(lName)+strlen(fName)+3];

    strncpy(fullName,lName,strlen(lName));

    fullName[strlen(lName)]=',';
    fullName[strlen(lName)+1]=' ';

    char* dummy=(char*)fullName[strlen(lName)+2];//making a pointer to the char after the ' ' char to start copying the first name

    strncpy(dummy,fName,strlen(fName));

    dummy[strlen(fName)+strlen(lName)+2]='\0';

    cout<<endl<<endl<<dummy<<endl;

    delete fullName;
    delete lName;
    delete fName;
    return 0;
} 
```

为什么当我指向数组中间的一个字符并开始复制时它会崩溃？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T18:20:10.323

```
fName = new char; 
```

分配一个字符。

```
cin.getline(fName,100); 
```

远远不止于此。

改为使用`std::string`。您将看到用 C++ 而不是 C 编写 C++ 代码会使生活变得更轻松。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T18:21:24.440

的类型`fullName[strlen(lName)+2]`是 char，获取指针的方法是：

```
char* dummy=fullName + strlen(lName)+2; 
```

# c# - 自动递增作为 SQL Server 数据库中字符串值一部分的数字

> ID：12060725
> 
> 赞同：1
> 
> 时间：2012-08-21T18:17:55.047
> 
> 标签：c#, asp.net, sql

如何自动递增作为 SQL Server 数据库中字符串值一部分的数字？

例如，这是我的表：

```
EMP_ID  EMPNAME  EMPSECTION
EMP_1   ROSE     S-11
EMP_2   JANE     R-11 
```

当我添加一条新记录时，我想做的是自动增加后面的数字`EMP_`。例如, `EMP_3`,`EMP_4`等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:28:04.870

一种选择是拥有一个具有自动增量 id 字段的表。然后，您可以在此表上编写一个触发器，该触发器在插入时触发自动增量表上的插入并获取当前值。然后将该值连接到 EMP_ 的末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:49:10.887

您可以执行以下操作：

```
create table dbo.foo
(
  id int not null identity(1,1) , -- actual primary key
  .
  .
  .
  formatted_id as 'emp_' + convert(varchar,id) , -- surrogate/alternate key

  constraint foo_PK   primary key ( id           ) ,
  constraint foo_AK01 unique      ( formatted_id ) ,

) 
```

但我终其一生都想不通为什么要这么做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:35:20.603

您可以在表中添加标识列，并在用户界面中显示附加到其值的“EMP_”。如果您想以自定义方式进行操作，则需要一个序列表

创建序列表

```
Sequence
-------------------
Seq_Name  | Seq_Val
-------------------
EMPLOYEE  | 0 
```

然后你需要一个存储过程来执行这个

```
BEGIN
declare @curVal int

Select @curVal = Seq_Val+1 From Sequence Where Seq_Name='EMPLOYEE'

UPDATE Sequence SET Seq_Val = Seq_Val+1 Where Seq_Name='EMPLOYEE'

Insert into Employee Values ('EMP_'+Cast(@curVal As Varchar), 'Rose', 'S-11')
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T18:37:31.523

通过 C# 很容易做到，每次您想在插入该行之前插入一个新行时，您应该按照以下步骤生成密钥：

1-获取您的 ID 字段列表 2-为每个循环执行一次以找到最大键值，如下所示：

```
int maxID=1;
for each(var l in list)
{
if(int.Parse(l.ID.Replace("EMP_",""))>maxID)
{
maxID=int.Parse(l.ID.Replace("EMP_",""));
}
}
maxID=maxID+1;

string ID="EMP_"+maxID.Tostring(); 
```

ID是你的新ID！

但是如果您的应用程序被多个程序访问（例如：考虑它是一个网站），我真的不建议您这样做，原因是：1\. 这很耗时 2\. 在某些情况下，可能会生成来自多个客户端的相同键值插入时会出错。

# c - Nvidia CUDA - 通过指针传递结构

> ID：12060728
> 
> 赞同：3
> 
> 时间：2012-08-21T18:18:06.410
> 
> 标签：c, cuda, nvidia, memcheck, cuda-gdb

我在将指向结构的指针传递给设备函数时遇到问题。我想在本地内存中创建一个结构（我知道它很慢，这只是一个例子）并通过指针将它传递给另一个函数。问题是当我使用 memcheck 调试它时，我得到错误：

`Program received signal CUDA_EXCEPTION_1, Lane Illegal Address. Switching focus to CUDA kernel 0, grid 1, block (0,0,0), thread (0,0,0), device 0, sm 7, warp 0, lane 0 0x0000000000977608 in foo (st=0x3fffc38) at test.cu:15 15 st->m_tx = 99;`

如果我在没有 memcheck 的情况下调试它，它工作正常并给出预期的结果。我的操作系统是 RedHat 6.3 64 位内核 2.6.32-220。我使用 GTX680、CUDA 5.0 并使用 sm=30 编译程序。

我用于测试的代码如下：

```
typedef struct __align__(8) {
    int m_x0;
    int m_tx;
} myStruct;

__device__ void foo(myStruct *st) {
    st->m_tx = 99;
    st->m_x0 = 123;
}
__global__ void myKernel(){
    myStruct m_struct ;
    m_struct.m_tx = 45;
    m_struct.m_x0 = 90;
    foo(&m_struct);
}
int main(void) {
    myKernel  <<<1,1 >>>();
    cudaThreadSynchronize();
    return 0;
} 
```

有什么建议么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:01:16.147

您的示例代码已被编译器完全优化掉，因为没有任何代码有助于全局内存写入。这很容易通过将内核编译为 cubin 文件并使用以下命令反汇编结果来证明`cuobjdump`：

```
$ nvcc -arch=sm_20 -Xptxas="-v" -cubin struct.cu 
ptxas info    : Compiling entry function '_Z8myKernelv' for 'sm_20'
ptxas info    : Function properties for _Z8myKernelv
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 2 registers, 32 bytes cmem[0]

$ cuobjdump -sass struct_dumb.cubin 

    code for sm_20
        Function : _Z8myKernelv
    /*0000*/     /*0x00005de428004404*/     MOV R1, c [0x1] [0x100];
    /*0008*/     /*0x00001de780000000*/     EXIT;
        ............................. 
```

IE。内核完全是空的。调试器无法调试您要调查的代码，因为它在编译器/汇编器发出的内容中不存在。如果我们对您的代码有一些自由：

```
typedef struct __align__(8) {
    int m_x0;
    int m_tx;
} myStruct;
__device__ __noinline__ void foo(myStruct *st) {
    st->m_tx = 99;
    st->m_x0 = 123;
}
__global__ void myKernel(int dowrite, int *output){
    myStruct m_struct ;
    m_struct.m_tx = 45;
    m_struct.m_x0 = 90;
    if (dowrite) {
        foo(&m_struct);
        output[threadIdx.x] = m_struct.m_tx + m_struct.m_x0;
    }
}
int main(void) {
    int * output;
    cudaMalloc((void **)(&output), sizeof(int));
    myKernel  <<<1,1 >>>(1, output);
    cudaThreadSynchronize();
    return 0;
} 
```

并重复相同的编译和反汇编步骤，事情看起来有些不同：

```
$ nvcc -arch=sm_20 -Xptxas="-v" -cubin struct_dumb.cu 
ptxas info    : Compiling entry function '_Z8myKerneliPi' for 'sm_20'
ptxas info    : Function properties for _Z8myKerneliPi
    8 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Function properties for _Z3fooP8myStruct
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 5 registers, 40 bytes cmem[0]
$ /usr/local/cuda/bin/cuobjdump -sass struct_dumb.cubin 

    code for sm_20
        Function : _Z8myKerneliPi
    /*0000*/     /*0x00005de428004404*/     MOV R1, c [0x1] [0x100];
    /*0008*/     /*0x20105d034800c000*/     IADD R1, R1, -0x8;
    /*0010*/     /*0x68009de218000001*/     MOV32I R2, 0x5a;
    /*0018*/     /*0xb400dde218000000*/     MOV32I R3, 0x2d;
    /*0020*/     /*0x83f1dc23190e4000*/     ISETP.EQ.AND P0, pt, RZ, c [0x0] [0x20], pt;
    /*0028*/     /*0x00101c034800c000*/     IADD R0, R1, 0x0;
    /*0030*/     /*0x00109ca5c8000000*/     STL.64 [R1], R2;
    /*0038*/     /*0x000001e780000000*/     @P0 EXIT;
    /*0040*/     /*0x10011c0348004000*/     IADD R4, R0, c [0x0] [0x4];
    /*0048*/     /*0xc001000750000000*/     CAL 0x80;
    /*0050*/     /*0x00009ca5c0000000*/     LDL.64 R2, [R0];
    /*0058*/     /*0x84011c042c000000*/     S2R R4, SR_Tid_X;
    /*0060*/     /*0x90411c4340004000*/     ISCADD R4, R4, c [0x0] [0x24], 0x2;
    /*0068*/     /*0x0c201c0348000000*/     IADD R0, R2, R3;
    /*0070*/     /*0x00401c8590000000*/     ST [R4], R0;
    /*0078*/     /*0x00001de780000000*/     EXIT;
    /*0080*/     /*0x8c00dde218000001*/     MOV32I R3, 0x63;
    /*0088*/     /*0xec009de218000001*/     MOV32I R2, 0x7b;
    /*0090*/     /*0x1040dc8590000000*/     ST [R4+0x4], R3;
    /*0098*/     /*0x00409c8590000000*/     ST [R4], R2;
    /*00a0*/     /*0x00001de790000000*/     RET;
        ............................... 
```

我们在汇编器输出中得到实际代码。你可能在调试器中有更多的运气。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T01:46:36.783

我来自 CUDA 开发人员工具团队。当为设备端调试编译时（即-G），原始代码不会被优化出来。这个问题看起来像一个 memcheck 错误。谢谢你找到这个。我们会研究一下。

# c# - 从已使用 Remoting 运行的服务返回字符串

> ID：12060729
> 
> 赞同：0
> 
> 时间：2012-08-21T18:18:14.070
> 
> 标签：c#, windows-services, remoting

我试图使用 .Net Remoting 来获取我在 Windows 服务的线程中使用的变量的值。

```
TcpChannel tcpChannel = new TcpChannel(9998);
ChannelServices.RegisterChannel(tcpChannel, false);
Type commonInterfaceType = typeof(MyNameSpace.Core.Engine);
RemotingConfiguration.RegisterWellKnownServiceType(commonInterfaceType,
                                                                "CopyFilePercentage",
                                                                WellKnownObjectMode.SingleCall);
myEngine = Engine.EngineInstance;
myEngine.Start(); 
```

但似乎每次我使用客户端获取该值时，都会创建一个新线程，返回一个空字符串。

知道为什么会发生这种情况还是我做错了什么？

提前致谢，

米格尔·德索萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:20:31.053

`WellKnownObjectMode.SingleCall`为每个调用创建一个新的类实例。尝试`WellKnownObjectMode.Singleton`

**编辑**

也许您应该阅读有关[客户端激活对象](http://msdn.microsoft.com/en-us/library/ff650208.aspx)的信息。将您的单例对象转换为类工厂并返回一个真实工作类的新实例（当然继承自`MarshalByRefObject`），客户端将使用该实例。

所以你的客户会是这样的

```
var worker = client.GetWorkerClass();
worker.GetSomeData(); 
```

并且每个连接都有*一个服务器对象*（这可能不是正确的术语）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:56:02.253

好吧，我只是使用了一个[全局变量类](http://www.dotnetperls.com/global-variable)，这并不是我真正想要的，而是完成了这项工作。

```
/// <summary>
/// Contains global variables for project.
/// </summary>
public static class GlobalVar
{
    /// <summary>
    /// Global variable that is constant.
    /// </summary>
    public const string GlobalString = "Important Text";

    /// <summary>
    /// Static value protected by access routine.
    /// </summary>
    static int _globalValue;

    /// <summary>
    /// Access routine for global variable.
    /// </summary>
    public static int GlobalValue
    {
        get
        {
            return _globalValue;
        }
        set
        {
            _globalValue = value;
        }
    }

    /// <summary>
    /// Global static field.
    /// </summary>
    public static bool GlobalBoolean;
} 
```

# python - 如何使VPython中的对象自动通过相机？

> ID：12060730
> 
> 赞同：2
> 
> 时间：2012-08-21T18:18:17.393
> 
> 标签：python, python-2.7, vpython

我有这个杂货岛，我应该让它看起来好像这个人正在穿过小岛，但为了做到这一点，物体必须通过相机，每次它靠近时，它都会撞到窗户，它几乎看起来像是后退并朝相反的方向移动。但如果我放大一点，它就会通过，但会在中途放慢速度。有没有办法让物体自动通过相机？谢谢

```
from visual import *

sphere(pos=(0,0,0), radius = 0.5)
text(pos=(-2,1,0), text="Center")

rightside = box(pos=(10,0,-40), axis=(1,300,0), height=0.5, width=60, length=12, material=materials.emissive)
leftside = box(pos=(-10,0,-40), axis=(-1,300,0), height=0.5, width=60, length=12, material=materials.emissive)
bottomside = box(pos=(0,-5.8,-40), axis=(1,0,0), height=0.5, width=60, length=20, color=color.cyan, material=materials.emissive)

leftfirstshelf = box(pos=(8,0,-40), axis=(1,0,0), height=0.5, width=60, length=4, color=color.cyan, material=materials.emissive)
leftsecondshelf = box(pos=(-8,0,-40), axis=(1,0,0), height=0.5, width=60, length=4, color=color.white, material=materials.emissive)
leftthirdshelf = box(pos=(-8,-4,-40), axis=(1,0,0), height=0.5, width=60, length=4, color=color.cyan, material=materials.emissive)

rightfirstshelf = box(pos=(8,4,-40), axis=(1,0,0), height=0.5, width=60, length=4, color=color.white, material=materials.emissive)
rightsecondshelf = box(pos=(-8,4,-40), axis=(1,0,0), height=0.5, width=60, length=4, color=color.cyan, material=materials.emissive)
rightthirdshelf = box(pos=(8,-4,-40), axis=(1,0,0), height=0.5, width=60, length=4, color=color.white, material=materials.emissive)

cheeriosbox = box(pos=(8,6,-60), axis=(1,0,0), height=4, width=2.5, length=0.8, color=color.yellow, material=materials.emissive)
cheeriostext = text(pos=(7.7,7,-61), axis=(0,0,25), height=0.5, width=2.5, length=0.8, color=color.black, text='Cheerios')

watermelon = ellipsoid(pos=(8,2,-40), height=3, width=3.5, length=3, color=color.green, material=materials.emissive)

cokecan = cylinder(pos=(-8,-3.5,-60), height=0, width=0, length=3, color=color.red, material=materials.emissive, axis=(0,7,0))
cokecantext = text(pos=(-7.1,-2,-59), height=1, width=2, length=1, axis=(0,0,-25), color=color.black, text="Coke")

leftcarrotbody = cone(pos=(-8,0.5,-30), radius=0.2, color=color.orange, axis=(0,0,3), material=materials.emissive)
leftcarrottop = sphere(pos=(-8,0.5,-30),radius=0.3, color=color.green, material=materials.emissive)

middlecarrotbody = cone(pos=(-7.5,0.5,-30), radius=0.2, color=color.orange, axis=(0,0,3), material=materials.emissive)
middlecarrottop = sphere(pos=(-7.5,0.5,-30),radius=0.3, color=color.green, material=materials.emissive)

rightcarrotbody = cone(pos=(-7,0.5,-30), radius=0.2, color=color.orange, axis=(0,0,3), material=materials.emissive)
rightcarrottop = sphere(pos=(-7,0.5,-30),radius=0.3, color=color.green, material=materials.emissive)

orangefruit = sphere(pos=(-7.5,5.3,-15), radius=1, color=color.orange, material=materials.emissive)

bottomrowcupone = cylinder(pos=(8,-3.75,-15), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)
bottomrowcuptwo = cylinder(pos=(8,-3.75,-14), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)
bottomrowcupthree = cylinder(pos=(8,-3.75,-13), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)
bottomrowcupfour = cylinder(pos=(8,-3.75,-12), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)

thirdrowcupone = cylinder(pos=(8,-2.86,-14.5), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)
thirdrowcuptwo = cylinder(pos=(8,-2.86,-13.5), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)
thirdrowcupthree = cylinder(pos=(8,-2.86,-12.5), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)

secondrowcupone = cylinder(pos=(8,-1.97,-14), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)
secondrowcuptwo = cylinder(pos=(8,-1.97,-13), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)

topcup = cylinder(pos=(8,-1.08,-13.5), radius=0.5, height=2, axis=(0,0.9,0),color=color.blue, material=materials.emissive)

a = vector(10,0,-40)
b = vector(-10,0,-40)
c = vector(0,-5.8,-40)
d = vector(8,0,-40)
e = vector(-8,0,-40)
f = vector(-8,-4,-40)
g = vector(8,4,-40)
h = vector(-8,4,-40)
i = vector(8,-4,-40)
j = vector(8,6,-60)
k = vector(7.7,7,-61.15)
l = vector(8,2,-40)
m = vector(-8,-3.5,-60)
n = vector(-7.1,-2,-59)
o = vector(-8,0.5,-30)
p = vector(-8,0.5,-30)
q = vector(-7.5,0.5,-30)
r = vector(-7.5,0.5,-30)
s = vector(-7,0.5,-30)
t = vector(-7,0.5,-30)
u = vector(-7.5,5.3,-15)
v = vector(8,-3.75,-15)
w = vector(8,-3.75,-14)
x = vector(8,-3.75,-13)
y = vector(8,-3.75,-12)
z = vector(8,-2.86,-14.5)
aia = vector(8,-2.86,-13.5)
bib = vector(8,-2.86,-12.5)
cic = vector(8,-1.97,-14)
did = vector(8,-1.97,-13)
eie = vector(8,-1.08,-13.5)

while a.z < 100:

    rate(20)

    rightside.pos = a

    leftside.pos = b

    bottomside.pos = c

    leftfirstshelf.pos = d

    leftsecondshelf.pos = e

    leftthirdshelf.pos = f

    rightfirstshelf.pos = g

    rightsecondshelf.pos = h

    rightthirdshelf.pos = i

    cheeriosbox.pos = j

    cheeriostext.pos = k

    watermelon.pos = l

    cokecan.pos = m

    cokecantext.pos = n

    leftcarrotbody.pos = o

    leftcarrottop.pos = p

    middlecarrotbody.pos = q

    middlecarrottop.pos = r

    rightcarrotbody.pos = s

    rightcarrottop.pos = t

    orangefruit.pos = u

    bottomrowcupone.pos = v

    bottomrowcuptwo.pos = w

    bottomrowcupthree.pos = x

    bottomrowcupfour.pos = y

    thirdrowcupone.pos = z

    thirdrowcuptwo.pos = aia

    thirdrowcupthree.pos = bib

    secondrowcupone.pos = cic

    secondrowcuptwo.pos = did

    topcup.pos = eie

    a.z = a.z + 1

    b.z = b.z + 1

    c.z = c.z + 1

    d.z = d.z +1

    e.z = e.z + 1

    f.z = f.z + 1

    g.z = g.z + 1

    h.z = h.z + 1

    i.z = i.z + 1

    j.z = j.z + 1

    k.z = k.z + 1

    l.z = l.z + 1

    m.z = m.z + 1

    n.z = n.z + 1

    o.z = o.z + 1

    p.z = p.z + 1

    q.z = q.z + 1

    r.z = r.z + 1

    s.z = s.z + 1

    t.z = t.z + 1

    u.z = u.z + 1

    v.z = v.z + 1

    w.z = w.z + 1

    x.z = x.z + 1

    y.z = y.z + 1

    z.z = z.z + 1

    aia.z = aia.z + 1

    bib.z = bib.z + 1

    cic.z = cic.z + 1

    did.z = did.z + 1

    eie.z = eie.z + 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:58:51.233

我明白了，在 VPython 中有一个称为自动缩放的自动缩放功能，为了关闭它，代码是 `scene.autoscale = False`，你所做的就是将它放在 while 循环之前。它会阻止相机缩小以将所有对象保留在框架中。

# git - 保护 Github 上的信息

> ID：12060740
> 
> 赞同：1
> 
> 时间：2012-08-21T18:19:02.260
> 
> 标签：git, github

> **可能重复：**
> [在 github 中处理密码的最佳做法是什么？](https://stackoverflow.com/questions/2397822/what-is-the-best-practice-for-dealing-with-passwords-in-github)

我第一次在 Github 上放了一个项目，想知道保护敏感信息（如 API 访问令牌、SQL 登录或其他通常仅在源中的个人信息）的最佳方法是什么。我应该把这些都放在一个我不跟踪的单独文件中，并在需要的地方简单地包含它吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:37:36.823

将所有这些私有设置组织到一个文件中，并使该文件不受源代码控制。将其存放在其他安全的地方。您可以在 repo 上放置此文件的模型版本，以便愿意贡献的人只需签出 repo 并填写他们的私人信息。

如果出于某种原因您想将该文件保留在存储库中，您可以在 github 上注册一个付费帐户，该帐户会为您提供私人存储库，以便更安全地存储敏感信息。

# javascript - jQuery UI .buttonset() 太慢了

> ID：12060742
> 
> 赞同：6
> 
> 时间：2012-08-21T18:19:09.843
> 
> 标签：javascript, jquery, html, performance, jquery-ui

我在 HTML 页面上有几千个按钮。准备好文档需要超过 10 秒的时间`$(".buttonset").buttonset();`。有没有更快的方法来做到这一点，或者是我唯一以某种方式限制按钮数量的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:01:58.330

`buttonset`在第一次显示之前按需创建s。

我刚刚测试了 2400 个盒子，分成 12 个部分。它使用 Chrome 23、Firefox 17、IE9、Opera 12 在我的 i7 上流畅运行。

这可能会在您第一次打开复选框组时添加拆分加载时刻，但它确实通过在必要时不创建未使用的样式按钮来节省一些 RAM。

[**小提琴**](http://jsfiddle.net/ult_combo/MyYV4/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T18:35:46.310

对于设置数千个按钮所需的速度，您无能为力`buttonset()`，但如果 10 秒的问题是浏览器消息说页面已无响应，您可以将操作分解为异步操作setTimeout 调用。

```
$(".buttonset").buttonset(); 
```

会成为：

```
$(".buttonset").each(function(index, button) {
   setTimeout(function() {
       $(button).buttonset();
   }, 0);
}); 
```

我已经成功地将这种模式与数千个 jQuery UI 对象一起使用，虽然它不会加快操作速度，但它会阻止页面锁定，从而看起来它运行得更快。

# c# - 每 n 分钟分组一次

> ID：12060743
> 
> 赞同：12
> 
> 时间：2012-08-21T18:19:10.913
> 
> 标签：c#, linq

我在玩 LINQ，我想知道按分钟分组有多容易，但我不想每分钟分组一次，而是每 5 分钟分组一次。

例如，目前我有：

```
var q = (from cr in JK_ChallengeResponses
        where cr.Challenge_id == 114
        group cr.Challenge_id 
            by new { cr.Updated_date.Date, cr.Updated_date.Hour, cr.Updated_date.Minute } 
            into g 
        select new {
          Day = new DateTime(g.Key.Date.Year, g.Key.Date.Month, g.Key.Date.Day, g.Key.Hour, g.Key.Minute, 0),
          Total = g.Count()
        }).OrderBy(x => x.Day); 
```

![在此处输入图像描述](../Images/8f0632f5809cd0161d6860d5c1540a08.png)

**每5 分钟**对我的结果进行分组需要做什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T18:23:26.367

要`n`对某事物进行分组，您可以使用以下公式来创建“桶”：

```
((int)(total / bucket_size)) * bucket_size 
```

这将取总数，除以，转换为整数以去掉任何小数，然后再次相乘，最终得到`bucket_size`. 例如（`/`是整数除法，所以不需要强制转换）：

```
group cr.Challenge_id
    by new { cr.Updated_Date.Year, cr.Updated_Date.Month, 
             cr.Updated_Date.Day, cr.Updated_Date.Hour,
             Minute = (cr.Updated_Date.Minute / 5) * 5 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-09T14:51:02.913

//数据每 3 小时来一次

其中 (Convert.ToDateTime(capcityprogressrow["Data Captured Date"].ToString()).Date != DateTime.Now.Date || (Convert.ToDateTime(capcityprogressrow["Data Captured Date"].ToString()).Date == DateTime.Now.Date && (Convert.ToInt16(capcityprogressrow["Data Captured Time"])) % 3 == 0)) group capcityprogressrow by new { WCGID = Convert.ToInt32(Conversions.GetIntEntityValue("WCGID", capcityprogressrow )), WCGName = Conversions.GetEntityValue("WIRECENTERGROUPNAME", capcityprogressrow).ToString(), DueDate = Convert.ToDateTime(capcityprogressrow["Data Captured Date"]), DueTime = capcityprogressrow["Data Captured Time"].ToString() } 进入 WCGDateGroup

// 对于顺序递增的 orderby

```
.OrderBy(x => x.WcgName).ThenBy(x => x.DataCapturedDateTime).ThenBy(x => x.DataCapturedTime).ToList(); 
```

# e-commerce - 需要值得信赖的自助服务终端软件

> ID：12060744
> 
> 赞同：0
> 
> 时间：2012-08-21T18:19:10.877
> 
> 标签：e-commerce, kiosk

我不确定这最适合哪个 Stack Exchange 站点，所以如果需要，请移动我。

所以我的客户带着他们运行[Internet Kiosk Pro](http://www.emailarms.com/products/internet_kiosk.html)的电子商务信息亭来找我。售货亭访问了他们正常的 eComm 商店，这是一个非常糟糕的主意，我们现在正在开发一个对售货亭友好的商店。

在查看信息亭软件时，我发现它起源于俄罗斯并且（称我为偏执狂），但考虑到围绕俄罗斯暴民和信用卡诈骗的负面新闻数量，我有点担心。

有人对 Ixis Research LTD 有好的情报吗？

**任何人都知道一套他们认为被验证为安全并由有信誉的人制作的信息亭软件？**

我是不是偏执地担心这个？我强烈认为这个“黑匣子”可以成为收​​集有价值的私人信息的工具。

// 2012 年 8 月 24 日更新

对此的最后一条评论 - Authorize.net “认证” Provisio 的 SiteKiosk，但如果您向 Provisio 询问 PCI 合规性，您会收到一封股票信，说明这不是他们的问题，也与他们的产品无关。从他们的文档中粘贴的这个畸形句子：“PCI 合规性在很大程度上涉及存储和保护持卡人数据。SiteKiosk 不存储任何持卡人数据，这消除了存储和保护持卡人数据的需要。客户数据被存储、传输，并通过支付网关处理。” 他们继续说您应该获得自己的信息亭机器、网络硬件和配置以及机器上的软件的认证。他们不提供任何第三方分析或认证来证明他们的产品是安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:40:27.497

通常，任何处理信用卡账户数据的软件应用程序都应通过认证公司的 PCI-DSS 审计，该认证公司将对软件进行一系列测试，并提供有关软件未能通过审计的任何方式的报告。

这是[关于 PCI 标准的描述和文档](https://www.pcisecuritystandards.org/security_standards/documents.php)。我曾与[一家名为 Coalfire 的审计公司](http://www.coalfire.com/Home)合作，使用我所使用的销售点应用程序。

所以第一个问题是信息亭软件是否通过了 PCI-DSS 合规性审核。主要信用卡供应商在这一点上变得越来越粘。

在阅读了 STUXNET 和其他类型的恶意软件之后，我不太确定防火墙限制是否会产生很大的不同，因为毕竟您是按照供应商的说明安装和配置软件，包括供应商要求的任何防火墙配置更改。

# c# - C# 局部变量作用域

> ID：12060748
> 
> 赞同：6
> 
> 时间：2012-08-21T18:19:22.747
> 
> 标签：c#

> **可能重复：**
> [与 c# 中的范围混淆](https://stackoverflow.com/questions/1196941/confused-with-the-scope-in-c-sharp)

看来，在 C# 中，使用 if/else/loop 块的局部范围定义的变量与在该块之后定义的变量冲突 - 请参阅代码片段。等效代码在 C/C++ 和 Java 下编译得很好。这是 C# 中的预期行为吗？

```
public void f(){
  if (true) {
    /* local if scope */
    int a = 1;
    System.Console.WriteLine(a);
  } else {
    /* does not conflict with local from the same if/else */
    int a = 2;
    System.Console.WriteLine(a);
  }

  if (true) {
    /* does not conflict with local from the different if */
    int a = 3;
    System.Console.WriteLine(a);
  }

  /* doing this:
   * int a = 5;
   * results in: Error 1 A local variable named 'a' cannot be declared in this scope
   *  because it would give a different meaning to 'a', which is already used in a 
   *  'child' scope to denote something else
   * Which suggests (IMHO incorrectly) that variable 'a' is visible in this scope
   */

  /* doing this: 
   * System.Console.WriteLine(a);
   * results in: Error 1 The name 'a' does not exist in the current context..
   * Which correctly indicates that variable 'a' is not visible in this scope
   */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T18:20:53.620

是的，这就是 C# 的工作方式。

声明范围时，外部范围内的任何局部变量也是已知的——没有办法限定范围内的局部变量应该覆盖外部的局部变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T18:23:17.837

看起来您关心声明的顺序（在块`a` *之后*`if`重新声明）。

考虑在块*之前*声明它的情况。`if`然后你会期望它在这些块的范围内可用。

```
int a = 1;

if(true)
{
  var b = a + 1; // accessing a from outer scope
  int a = 2; // conflicts
} 
```

在编译时实际上并*没有*“不在范围内”的概念。

实际上，您可以只用裸花括号创建一个内部范围：

```
{
   int a = 1;
}

if(true)
{
   int a = 2; // works because the a above is not accessible in this scope
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T18:23:09.100

这是正常的行为。

Sam Ng 不久前写了一篇很好的博客文章：http: [//blogs.msdn.com/b/samng/archive/2007/11/09/local-variable-scoping-in-c.aspx](http://blogs.msdn.com/b/samng/archive/2007/11/09/local-variable-scoping-in-c.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T18:43:30.433

已经有一些很好的答案，但我查看了 C# 4 语言规范来澄清这一点。

我们可以在 §1.24 中阅读有关范围的信息：

> 范围可以嵌套，内部范围可以从外部范围重新声明名称的含义（但是，这并没有消除 §1.20 施加的限制，即在嵌套块中不能使用与封闭块中的局部变量同名）。

这是第 1.20 节中引用的部分：

> 声明在声明所属的声明空间中定义了一个名称。除了重载成员（第 1.23 节）外，如果有两个或多个声明在声明空间中引入具有相同名称的成员，则属于编译时错误。声明空间永远不可能包含具有相同名称的不同类型的成员
> 
> [...]
> 
> 请注意，作为函数成员或匿名函数的主体或在函数体中出现的块嵌套在这些函数为其参数声明的局部变量声明空间内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T18:21:24.563

是的。这是预期的，因为您在 local 语句中定义变量。如果您要在类级别定义变量，您会得到不同的结果。

# ruby-on-rails - 不使用对象提交表单

> ID：12060750
> 
> 赞同：0
> 
> 时间：2012-08-21T18:19:33.590
> 
> 标签：ruby-on-rails, methods, model

这是我在stackoverflow上的第一篇文章！我警告你，我刚开始学习 Ruby on Rails。

目前，我正在 Rails 中进行音乐扫描项目。我正在尝试处理硬盘上的所有音乐。为此，用户可以在应用程序的配置部分中添加要扫描的文件夹。所以我将我的应用程序的所有配置存储在一个 YAML 文件中。

我创建了一个“配置”控制器，目前包含 2 个视图：“adddir”和“index”。索引视图显示通过加载 YAML 配置文件（由控制器“配置”完成）收集的所有参数。

接下来，我想为用户提供添加新文件夹进行扫描的可能性。所以我做了一个到“adddir”视图的静态路由：

routes.rb 文件：

```
match "/config/adddir" => "config#adddir" 
```

现在，我想创建一个获取用户提供的路径的表单，并将其添加到 YAML 文件中。

所以我的问题是：如何创建一个能够使用我在用户单击提交按钮时创建的方法 config#addfolder 的表单？

我希望这足够清楚。最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:10:33.063

欢迎来到 SO。这是一个非常基本的问题。只需看一下截屏视频。先做一个简单的项目（带模型），然后你会看到 Rails 的基础知识。

[http://rubyonrails.org/screencasts/rails3/](http://rubyonrails.org/screencasts/rails3/)

基本上：

您生成控制器，如：

```
rails g controller config adddir 
```

这将设置控制器、视图和您的路线。

然后进入您的视图文件夹并查看配置。有**adddir.html.erb**。您需要以某种形式更改此文件。

您可以打开您的表格：

```
http://localhost:3000/config/adddir 
```

> 耙路线

将打印您可以使用的可用路线列表（在您的表格内）。

现在神奇的是 Rails 会生成你的**config_adddir_path**（观看**_path**）。您可以使用它来连接表单。

```
<%= form_tag(config_adddir_path, :method => "get") do %>
  <%= label_tag(:q, "Folder:") %>
  <%= text_field_tag(:q) %>
  <%= submit_tag("index") %>
<% end %> 
```

在您的控制器内部（def adddir）：

您可以访问参数：

```
def adddir
  logger.debug params.inspect
end 
```

看看这里：

[http://guides.rubyonrails.org/form_helpers.html](http://guides.rubyonrails.org/form_helpers.html)

# ios - 如何通过我的 Express.js 驱动的 API 将 GridFS 存储文件 (PDF) 提供给连接的客户端 (iOS)？

> ID：12060755
> 
> 赞同：3
> 
> 时间：2012-08-21T18:19:47.423
> 
> 标签：ios, node.js, mongodb, express, gridfs

我正在开发一个让 iOS 客户端连接到它的 REST HTTP API。它当前的设置方式（并使用 POSTman chrome ext 进行了测试）是我对资源发出请求，我必须等待整个内容被读入并吐出它以显示为响应。

这是 iOS 和 Mac 客户端消费的好方法，还是有更好的从 GridFS 提供服务的方法？

我正在执行以下操作：

```
 // Download a PDF
  app.get('/api/download-pdf/:pdf_id', function(req, res){
    var gfs = new mongodb.GridStore(mongoose.connection.db, ObjectID(req.params.pdf_id), "r");
    gfs.open(function(err,gs) {
      if (err){
        res.send(500);
      } 
      else{
        gs.read(function(err,data) {
          res.header('Content-type','application/pdf');
          res.send(data);
          gs.close(function(err) {});
          if (err) throw(err);
        });
      }
    });
  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:20:44.533

节点驱动程序现在支持流入/流出 GridFS [http://christiankvalheim.com/post/29753345741/new-features-in-the-driver-for-mongodb-2-2?8e43c3e0](http://christiankvalheim.com/post/29753345741/new-features-in-the-driver-for-mongodb-2-2?8e43c3e0)

`gs.pipe(anotherStream)`

见[流](http://nodejs.org/api/stream.html)

# wpf - 使用 IValueConverter 进行动态样式绑定

> ID：12060761
> 
> 赞同：5
> 
> 时间：2012-08-21T18:20:04.740
> 
> 标签：wpf, custom-controls

我正在尝试`App.xaml`在加载用户控件时动态设置在 中定义的样式，并且由于某种原因它只是没有应用样式（即没有发生错误，只是没有应用样式）。

我确定这是因为我定义了错误的绑定，但我无法弄清楚我需要做些什么不同的事情才能让它工作。

# App.xaml 样式

我所追求的风格是`RunningTitleBlock`，它由我在下面的代码示例中包含的其他几个风格组成。

```
<Style TargetType="Label">
    <Setter Property="Margin" Value="4"/>
</Style>

<Style TargetType="Label"
       BasedOn="{StaticResource {x:Type Label}}"
       x:Key="HeaderBlock">
    <Setter Property="FontSize" Value="16"/>
    <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="Foreground" Value="White"/>
</Style>

<Style TargetType="Label"
       BasedOn="{StaticResource ResourceKey=HeaderBlock}"
       x:Key="TitleBlock">
    <Setter Property="Foreground" Value="Black"/>
</Style>

<Style TargetType="Label"
       BasedOn="{StaticResource ResourceKey=TitleBlock}"
       x:Key="RunningTitleBlock">
    <Setter Property="Background">
        <Setter.Value>
            <LinearGradientBrush StartPoint="0.0, 0.5"
                                 EndPoint="1.0, 0.5">
                <GradientStop Color="White" Offset="0.0"/>
                <GradientStop Color="Green" Offset="1.0"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
</Style> 
```

# 绑定用户控件

我试图让`Binding`绑定到从值转换器返回的值。

```
Style="{DynamicResource ResourceKey={Binding Path=MonitoringType, Converter={StaticResource TSConverter}}}" 
```

# 代码

## 监控类型枚举

```
public enum MonitoringTypes
{
    Running,
    Failed,
    Paused,
    Favorites,
} 
```

## 用户控制

在这里，我要做的是将`MonitoringTypes`传入的枚举值的字符串值与一些众所周知的文本连接起来，以构建存在于`App.xaml`. 正在调用值转换器***并***返回正确的值，但由于某种原因，该样式不适用。

```
/// <summary>
/// Interaction logic for MonitorWorkflow.xaml
/// </summary>
public partial class MonitorWorkflow : UserControl
{
    public MonitorWorkflow(MonitoringTypes monitoringType)
    {
        InitializeComponent();

        this.DataContext = new MonitorWorkflowViewModel { MonitoringType = monitoringType };
    }
}

public class MonitorWorkflowViewModel
{
    public MonitoringTypes MonitoringType { get; set; }
}

public class TitleStyleValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var type = (MonitoringTypes)value;
        return string.Format("{0}TitleBlock", Enum.GetName(typeof(MonitoringTypes), type));
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return Enum.Parse(typeof(MonitoringTypes), value.ToString().Substring(0, value.ToString().IndexOf("TitleBlock")));
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T17:00:52.710

我的建议是跳过该`DynamicResource`语句并直接使用`Converter`提供`Style`。

```
Style="{Binding Path=MonitoringType, Converter={StaticResource TSConverter}}" 
```

在`TSConverter`中，您可以返回 a`Style`而不是字符串。有点像这样：

```
public class TitleStyleValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, 
        System.Globalization.CultureInfo culture)
    {
        var type = (MonitoringTypes)value;
        var styleToReturn = FindResource(
            string.Format("{0}TitleBlock", 
                Enum.GetName(typeof(MonitoringTypes), type)));
        if (styleToReturn != null)
            return (Style)styleToReturn;
        else 
            return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
        // not sure if you need this anymore... 
        return Enum.Parse(typeof(MonitoringTypes), value.ToString().Substring(0,
           value.ToString().IndexOf("TitleBlock")));
    }
} 
```

* * *

这就是我所做的，但使用了以下代码。我实际上只是回答了我自己的问题，而您也回答了它。好时机！

```
public class TitleStyleValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var type = (MonitoringTypes)value;
        return App.Current.Resources[string.Format("{0}TitleBlock", Enum.GetName(typeof(MonitoringTypes), type))];
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return Enum.Parse(typeof(MonitoringTypes), value.ToString().Substring(0, value.ToString().IndexOf("TitleBlock")));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:36:21.183

```
public static Style DayModeButton = null; 

void loadStyle() 
{
Uri uri1 = new Uri("/Resources/ButtonStyle.xaml", UriKind.Relative);
                ResourceDictionary resDict1 = Application.LoadComponent(uri1) as ResourceDictionary;

foreach (object obj in resDict1.Values) //Set explicit reference
     if (obj is Style) DayModeButton = (Style)obj;
}

[ValueConversion(typeof(object), typeof(Style))]
public class GetStyleConverter: IValueConverter
{
         public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
         {
               return DayModeButton ; 
         }
  public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
         {
             return 0;
         }
} 
```

# python - 使用长整数将两个多项式 mod n,x^r-1 相乘：正确的窗口大小是多少？

> ID：12060766
> 
> 赞同：1
> 
> 时间：2012-08-21T18:20:14.910
> 
> 标签：python, long-integer, multiplication, polynomial-math

使用窗口乘法算法使用长整数乘法将两个多项式[系数 in`Z/nZ`和整个多项式 mod`x^r-1`用于某些 r] 相乘，我应该给窗口多少大小？

其中“窗口”是指系数应在初始长整数中使用的位长，以便长整数乘法的结果包含正确的结果系数[系数的总和“不重叠"]。

一开始我认为`ceil(log(n**2,2)) + 1`这就足够了，因为每个系数最多是，`n-1`所以这些系数的乘积最多是`(n-1)**2`。然后我意识到，在进行长整数乘法时，这些系数可能会有一些总和，因此窗口应该是`ceil(log(number-of-additions * n**2,2)) + 1`.

我认为最多可能有两个多项式加法的次数之和，但是使用`ceil(log((deg_a + deg_b + 1) * n**2,2)) +1`了一段时间，但最终系数重叠并且我得到不正确的结果。

那么这个“窗口”应该有多大呢？

顺便说一下，这是当前的（python）代码：

```
def __mul__(self, other):
    new = ModPolynomial(self._mod_r, self._mod_n)
    #new = x mod self._mod_n,x^(self._mod_r -1)
    try:
        new_deg = self._degree + other.degree
        new_coefs = []
        # i've also tried with (new_deg + 1) ** 2 * ...
        window = int(math.ceil(math.log((new_deg + 1) * self._mod_n**2,2))) + 1
        A = 0
        for i,k in enumerate(self._coefs):
            A += k << (window * i)
        B = 0
        for i,k in enumerate(other.coefficients):
            B += k << (window * i)

        res = A * B
        mask = 2**window - 1
        while res:
            new_coefs.append((res & mask) % self._mod_n)
            res >>= window
        new._coefs = new_coefs
        new._degree = self._finddegree(new_coefs)
    except AttributeError:
        new._coefs = [(c * other) % self._mod_n for c in self._coefs]
        new._degree = self._finddegree(new._coefs)
    new._mod()
    return new 
```

**编辑1：** 我开始认为窗口大小可能不是问题。我试图将它增加到`ceil(log2((new_deg+1)**3 * self._mod_n ** 5))+1`并且这产生与 using 相同的结果`ceil(log2((new_deg+1) * self._mod_n**2))+1`，并且由于这两个大小之间的差异非常大[在我的测试中大约有 55-60 位差异，如果你认为这很多...... ]，这意味着如果已经可以，这可能是这些尺寸中最小的一个，但是在某个地方还有其他一些问题。

**编辑2：** 错误结果的一个例子是：

```
#ModPolynomial(r,n) = x mod n, x^r-1
>>> pol = polys.ModPolynomial(20,100)      # uses integer-multiplication
>>> pol += 2
>>> pol2 = polynomials.ModPolynomial(20,100)   #uses the naive algorithm
>>> pol2 += 2
>>> (pol2**52).coefficients      #should be the correct result[first is coef of x^0]
(76, 76, 44, 0, 0, 16, 16, 4, 0, 0, 24, 24, 81, 0, 0, 80, 80, 20)
>>> (pol**52).coefficients       #the wrong result
(12L, 52L, 8L, 20L, 60L, 12L, 92L, 28L, 60L, 80L, 68L, 48L, 22L, 0L, 0L, 20L, 20L, 80L) 
```

我将尝试找到一些较小的示例，以便我可以手动验证它。

**编辑3：** 好的，我发现学位有问题。我发现了一个度数变为负数的例子，这显然不应该。所以我会尝试更多地检查学位何时以及为什么会以这种意想不到的方式发生变化。

**编辑4：** 我发现了错误。创建整数时，我遍历了所有`_coefs`序列，但我的实现不能保证与多项式度数 > 的度数相对应的所有系数都为 0。这解决了问题。

**编辑 5：** 只是我在测试此实现时获得的一些性能结果。

*1）如果*系数大于整数，则使用长整数乘法比使用**快**。否则更快。`numpy.convolve` *`numpy.convolve`*

 *2) 大约 80% 的时间用于将系数列表转换为整数以及将整数转换为系数列表。您对此无能为力，因为这些操作是 O(n)。

现在我想知道是否有一种方法可以仅使用长整数以有效的方式实现“mod x^r-1”操作......这可能会大大加快速度，因为那时你不'不必再进行转换了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:53:30.123

正确的计算是

```
window = int(math.ceil(math.log((max(self._degree, other.degree) + 1) *
                                (self._mod_n - 1)**2, 2))) 
```

但是，这肯定会小于您计算的窗口，因此您得到不正确的结果肯定有其他原因。你确定学位计算正确吗？你能举一个计算不正确的多项式的例子吗？

除非有特别好的理由使用长整数乘法，否则我建议使用 NumPy：

```
new.coeffs = np.convolve(self.coeffs, other.coeffs) % self.mod 
```

这通常至少与长整数乘法（无论如何这是一种卷积形式）一样有效，并且您需要担心的 Python 代码要少得多。事实上 NumPy 有一个[多项式库](http://docs.scipy.org/doc/numpy/reference/routines.polynomials.polynomial.html)；尽管它是为浮点系数设计的，但您可以查看它以了解如何有效地实现您的代码。*

# iphone - 保存动态创建的像素并成功检索

> ID：12060783
> 
> 赞同：0
> 
> 时间：2012-08-21T18:21:05.493
> 
> 标签：iphone, ipad, png, pixels, cgimageref

我正在尝试将像素动态插入到 PNG 图像文件中，并尝试在不更改使用下面代码保存的像素的情况下将其取回。但我这样做并不成功。有人可以帮我指出问题出在哪里吗？谢谢。

```
// Original pixels for debugging only
NSString *sPixels = @"12345678";
const char *cpPixels8 = sPixels.UTF8String;

char *cpPixelsStore = calloc(sPixels.length + 1, 1);
strncpy(cpPixelsStore, cpPixels8, sPixels.length);

unsigned int r,g,b,a;
for(int j = 0; j < sPixels.length; j += 4)
{
    r = cpPixelsStore[j+0];
    g = cpPixelsStore[j+1];
    b = cpPixelsStore[j+2];
    a = cpPixelsStore[j+3];

    printf("r:0x%X g:0x%X b:0x%X a:0x%X\n", r, g, b, a);
}

int width = 2;
int height = 1;
int bytesPerRow = 4 * width;
int bitsPerComponent = 8;
int bitsPerPixel = 32;

CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
CGBitmapInfo bitmapInfo = kCGBitmapByteOrder32Host | kCGImageAlphaLast;
CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, cpPixelsStore, (bytesPerRow * height), NULL);

CGImageRef imRef = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

CGDataProviderRelease(provider);

UIImage *imNewTemp = [UIImage imageWithCGImage:imRef];
NSData *datPNG = UIImagePNGRepresentation(imNewTemp);

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *sFile = [documentsDirectory stringByAppendingPathComponent:@"Pic.png"];

[datPNG writeToFile:sFile atomically:YES];

CGImageRelease(imRef);

// Cross verify save
UIImage *imTemp = [UIImage imageWithContentsOfFile:sFile];
NSData *datImagePixels = (__bridge NSData *)CGDataProviderCopyData(CGImageGetDataProvider(imTemp.CGImage));
unsigned char *ucpPixelBytes = (unsigned char *)[datImagePixels bytes];

for(int j = 0; j < datImagePixels.length; j += 4)
{
    r = ucpPixelBytes[j+0];
    g = ucpPixelBytes[j+1];
    b = ucpPixelBytes[j+2];
    a = ucpPixelBytes[j+3];

    printf("r:0x%X g:0x%X b:0x%X a:0x%X\n", r, g, b, a);
} 
```

初始 printf 在创建过程中返回： r:0x31 g:0x32 b:0x33 a:0x34 r:0x35 g:0x36 b:0x37 a:0x38

保存和检索文件后的 printf 给出以下输出： r:0xA g:0xA b:0xA a:0x31 r:0xC g:0xB b:0xB a:0x35

我迷失在翻译中。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:06:47.050

NSData 是不可变的——你需要一个 NSMutableData 对象，然后你使用“mutableBytes”来获取指针。NSMutableData *nData = [NSMutableData dataWithData:datImagePixels];

现在您有了数据来创建带有修改的新图像。您可以使用 Quartz 方法 CGImageCreate() 来获取 CGImageRef，并从中获取 UIImage。

# asp.net-mvc - MultipartFormDataStreamProvider 的问题

> ID：12060785
> 
> 赞同：9
> 
> 时间：2012-08-21T18:21:16.533
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在尝试按照[本教程](http://www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload-with-asp-net-webapi/)进行操作，并且我意识到即使我复制并过去了他的代码，我的 ApiController 中也会出现两个编译错误。

```
IEnumerable<HttpContent> bodyparts = Request.Content.ReadAsMultipartAsync(streamProvider); 
```

这告诉我 ReadAsMultipartAsync 的返回不能转换为 HttpContent 的 IEnumerable。

```
IDictionary<string, string> bodypartFiles = streamProvider.BodyPartFileNames; 
```

这告诉我，streamProvider 中不存在 BodyPartFileNames，这似乎与本教程以及我见过的其他几篇博客文章和 StackOverflow 问题相反。

有人知道这笔交易是什么吗？

完整文件：

```
using AsyncFileUpload.Models;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Threading;
using System.Threading.Tasks;
using System.Web.Http;

namespace AsyncFileUpload.Controllers
{
    public class UploadingController : ApiController
    {
        private const string PATH = "C:\\_projects\\learning";

        [HttpPost]
        public async Task<IList<FileDesc>> Post()
        {
            List<FileDesc> result = new List<FileDesc>();
            if (Request.Content.IsMimeMultipartContent())
            {
                try
                {
                    if (!Directory.Exists(PATH))
                    {
                        Directory.CreateDirectory(PATH);
                    }

                    MultipartFormDataStreamProvider streamProvider =
                        new MultipartFormDataStreamProvider(PATH);

                    IEnumerable<HttpContent> bodyparts = Request.Content.ReadAsMultipartAsync(streamProvider);
                    IDictionary<string, string> bodypartFiles = streamProvider.BodyPartFileNames;
                    IList<string> newFiles = new List<string>();

                    foreach (var item in bodypartFiles)
                    {
                        var newName = string.Empty;
                        var file = new FileInfo(item.Value);

                        if (item.Key.Contains("\""))
                        {
                            newName = Path.Combine(file.Directory.ToString(),
                                item.Key.Substring(1, item.Key.Length - 2));
                        }
                        else
                        {
                            newName = Path.Combine(file.Directory.ToString(), item.Key);
                        }

                        File.Move(file.FullName, newName);
                        newFiles.Add(newName);
                    }

                    var uploadedFiles = newFiles.Select(i =>
                        {
                            var fi = new FileInfo(i);
                            return new FileDesc(fi.Name, fi.FullName, fi.Length);
                        }).ToList();

                    result.AddRange(uploadedFiles);
                }
                catch (Exception e)
                {
                    // NOOP
                }
            }
            return result;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T20:54:37.120

ReadAsMultipartAsync 返回一个 Task<> 对象。获取 .Result 属性（阻塞）或使用 await 关键字等待任务（首选）。

在 RTM 版本中更改了 BodyPartFileNames，现在使用 FileData 属性。

参见：[http ://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)

# tsql - 数据库鸡和蛋问题

> ID：12060797
> 
> 赞同：1
> 
> 时间：2012-08-21T18:21:45.587
> 
> 标签：tsql, stored-procedures, sybase

我正在使用带有 TSQL 的 Sybase DB。

我正在尝试在 2 个 SPROCS 之间工作，一个嵌套在另一个 SPROCS 中。

我的外部 SPROC 将创建一个临时表`#temp_table`并将其填充为 200 的值。一旦临时表填充了 200 个条目，内部 SPROC 将使用它来处理`JOIN`.

所以本质上，我的外部 SPROC 将具有以下（简化）：

```
CREATE TABLE #temp_table 
(
  ... columns ...
) 
```

我的内部 SPROC 将具有以下内容：

```
SELECT
  SOME_COLUMNS
FROM
  SOME_TABLE
INNER JOIN
  #temp_table
ON
  SOME_CONDITION 
```

当我尝试对此进行测试时，我为我的内部 SPROC 运行脚本，它抱怨`#temp_table`不存在，并且无法在数据库中创建 SPROC。因此，当我尝试运行外部 SPROC 时，它也会失败。

我可以请一些关于如何解决这个问题的指示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:24:52.297

不要在两个存储过程中执行此操作。一站式完成。一个存储过程可以有尽可能多的 SQL 语句来完成工作，并且临时表仅在创建它的存储过程的上下文中可用。

```
CREATE PROC DoItAll
AS

   CREATE TABLE #temp_table 
   (
     ... columns ...
   );

   SELECT
     SOME_COLUMNS
   FROM
     SOME_TABLE
   INNER JOIN
     #temp_table
   ON
     SOME_CONDITION; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:10:40.180

您可以在创建过程之前创建表：

```
CREATE TABLE #temp_table 
(
  ... columns ...
)
go

CREATE PROC DoItAll
AS

   SELECT
     SOME_COLUMNS
   FROM
     SOME_TABLE
   INNER JOIN
     #temp_table
   ON
     SOME_CONDITION
go 
```

我在工作中经常这样做，在程序之间发送多个数据。

# objective-c - 替换 NSString 中的 [ ] 括号？

> ID：12060799
> 
> 赞同：1
> 
> 时间：2012-08-21T18:21:49.107
> 
> 标签：objective-c, regex, cocoa, nsstring

我正在尝试查找并`[URL]`替换`NSString`. 这是我的方法：

```
NSString *test = @"Test [URL] 123";
test = [test stringByReplacingOccurrencesOfString:@"[URL]"
                                       withString:@"HERE"
                                          options:NSRegularExpressionSearch
                                            range:NSMakeRange(0, test.length)]; 
```

这样做的结果是`Test [HEREHEREHERE] 123`。我想这是因为`[URL]`意味着这 3 个字符中的任何一个，所以所有 3 个字符都将被`HERE`一个接一个地替换。

但是我也尝试`\[URL\]`了相同的结果。

那么，我如何实际搜索字符`[`和`]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T18:24:20.747

你诊断你的问题是绝对正确的：方括号是正则表达式语言中的元字符，所以它们被正则表达式引擎解释。

您需要对斜杠进行双重转义，因为它们在 Objective-C 和正则表达式语言中都是特殊字符：`@"\\[URL\\]"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:24:10.593

试试吧

```
test = [test stringByReplacingOccurrencesOfString:@"\\[URL\\]"
                                       withString:@"HERE"
                                          options:NSRegularExpressionSearch
                                            range:NSMakeRange(0, test.length)]; 
```

希望能帮助到你：）

# java - jtextarea 视口中的第一行和最后一行

> ID：12060804
> 
> 赞同：5
> 
> 时间：2012-08-21T18:22:17.350
> 
> 标签：java, swing

我正在寻找一个函数，它从 jtextarea 提供视口起始线和视口结束线。下面的代码工作正常。但是当 jtextarea 中的行数太大时，比如 10,000 行，光标的响应会变得很慢。我缩小了导致它的范围，它是，

```
 startLine = getRow(topLeft, editorTextArea) - 1; //editorTextArea is jtextarea name
 endLine = getRow(bottomRight, editorTextArea); 
```

我在每个 keyPressEvent 上调用 startAndEndLine()

有人可以建议我一个更好的代码，这是有效的吗？

```
private void startAndEndLine() {

    Rectangle r = editorTextArea.getVisibleRect();
    Point topLeft = new Point(r.x, r.y);
    Point bottomRight = new Point(r.x + r.width, r.y + r.height);

    try {
        startLine = getRow(topLeft, editorTextArea) - 1;
        endLine = getRow(bottomRight, editorTextArea);
    } catch (Exception ex) {
       // System.out.println(ex);
    }        
}

 public int getViewToModelPos(Point p, JTextComponent editor) {
    int pos = 0;
    try {
        pos = editor.viewToModel(p);
    } catch (Exception ex) {
    }
    return pos;
 }

public int getRow(Point point, JTextComponent editor) {
    int pos = getViewToModelPos(point, editor);
    int rn = (pos == 0) ? 1 : 0;
    try {
        int offs = pos;
        while (offs > 0) {
            offs = Utilities.getRowStart(editor, offs) - 1;
            rn++;
        }
    } catch (BadLocationException e) {
        System.out.println(e);
    }
    return rn;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:58:56.477

这是基于 JigarJoshi 从这个问题[Java 中的解决方案：光标当前位置的列号和行号](https://stackoverflow.com/questions/5139995/java-column-number-and-line-number-of-cursors-current-position)......你一定会喜欢这个网站；）

```
protected int getLineNumber(int modelPos) throws BadLocationException {

    return textArea.getLineOfOffset(modelPos) + 1;

}

Rectangle viewRect = scrollPane.getViewport().getViewRect();

Point startPoint = viewRect.getLocation();
int pos = textArea.viewToModel(startPoint);

try {

    int startLine = getLineNumber(pos);

    Point endPoint = startPoint;
    endPoint.y += viewRect.height;

    pos = textArea.viewToModel(endPoint);
    int endLine = getLineNumber(pos);

    System.out.println(startLine + " - " + endLine);

} catch (BadLocationException exp) {
} 
```

这并不完全准确，但为您提供了一个起点。

# ios - IOS时间，不能正常工作

> ID：12060809
> 
> 赞同：0
> 
> 时间：2012-08-21T18:22:50.890
> 
> 标签：ios, time

我有一个问题，我想从一个字符串中为本地通知指定一个日期。我做这个：

```
NSDateFormatter *dateForm = [[NSDateFormatter alloc] init];
[dateForm setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *dateSelected = [dateForm dateFromString:@"2012-09-01 08:00:00"];
NSLog(@"notify time: |%@| \n", dateSelected); 
```

但日志是：
通知时间：|2012-09-01 06:00:00 +0000|
时间不对！为什么？坦克寻求帮助！
我使用 iOS 5.1 和 xcode 4.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:38:41.473

尝试添加

```
[dateForm setTimeZone:[NSTimeZone defaultTimeZone]]; 
```

或者

```
[dateForm setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]]; 
```

并替换`GMT`为您的时区。

# c# - 使用 Interop 在 C# 中创建 Word 文档的更快方法

> ID：12060810
> 
> 赞同：3
> 
> 时间：2012-08-21T18:22:53.880
> 
> 标签：c#, performance, ms-word, interop

我对 C# word 文档有一点问题。我使用 Word.Interop 库来创建一个 .doc 文档。我在这个文档中放入了一个动态表，在最后一列中有一些文本和图片我的问题是保存/生成文档真的很慢（表中只有 30 行需要 4 秒，54 行需要 7 秒）。对我来说时间太多了。我需要在大约 1 秒或更短的时间内创建和保存文档。

有什么方法可以比 Word.Interop 更快地创建文档？也许模板文件？但是如何从模板文档中填充动态大小的表格呢？

```
Microsoft.Office.Interop.Word.Application WordApp = new Microsoft.Office.Interop.Word.Application();
Word.Document adoc;
Word.Range rng;
adoc = WordApp.Documents.Add(ref missing, ref missing, ref missing, ref missing);
rng = adoc.Range(ref start1, ref missing);

adoc.Tables.Add(rng, list.Count + 2, 4);
adoc.PageSetup.LeftMargin = 20.0f;
adoc.PageSetup.RightMargin = 20.0f;

adoc.Tables[1].Columns[2].Cells.PreferredWidth = 60;
adoc.Tables[1].Columns[1].Cells.PreferredWidth = 200;
adoc.Tables[1].Cell(1, 1).Range.Text = "Symbol";
adoc.Tables[1].Cell(1, 2).Range.Text = "Qnt";
adoc.Tables[1].Cell(1, 3).Range.Text = "Barcode";
adoc.Tables[1].Cell(1, 4).Range.Text = "Barcode Image";
adoc.Tables[1].Cell(1, 1).Range.ParagraphFormat.Alignment = Word.WdParagraphAlignment.wdAlignParagraphLeft;
adoc.Tables[1].Cell(1, 1).Range.Font.Bold = 1;
adoc.Tables[1].Cell(1, 2).Range.Font.Bold = 1;
adoc.Tables[1].Cell(1, 3).Range.Font.Bold = 1;
adoc.Tables[1].Cell(1, 4).Range.Font.Bold = 1;

for (int i = 0; i < list.Count; i++)
{

    adoc.Tables[1].Cell(i + 2, 1).Range.Text = list[i].symbol;
    adoc.Tables[1].Cell(i + 2, 2).Range.Text = list[i].qnt;
    adoc.Tables[1].Cell(i + 2, 3).Range.Text = list[i].code;
    adoc.Tables[1].Cell(i + 2, 4).Range.InlineShapes.AddPicture(list[i].code_picture, ref missing, ref missing, ref missing);
}

adoc.Tables[1].Range.Font.Size = 10;
adoc.Tables[1].Rows.Height = 2.0f;

#region Border
adoc.Tables[1].Borders[Word.WdBorderType.wdBorderLeft].LineStyle = Word.WdLineStyle.wdLineStyleSingle;
adoc.Tables[1].Borders[Word.WdBorderType.wdBorderTop].LineStyle = Word.WdLineStyle.wdLineStyleSingle;
adoc.Tables[1].Borders[Word.WdBorderType.wdBorderRight].LineStyle = Word.WdLineStyle.wdLineStyleSingle;
adoc.Tables[1].Borders[Word.WdBorderType.wdBorderBottom].LineStyle = Word.WdLineStyle.wdLineStyleSingle;
adoc.Tables[1].Borders[Word.WdBorderType.wdBorderHorizontal].LineStyle = Word.WdLineStyle.wdLineStyleSingle;
adoc.Tables[1].Borders[Word.WdBorderType.wdBorderVertical].LineStyle = Word.WdLineStyle.wdLineStyleSingle;
#endregion

try
{                       
    object filename = @"E:\Test.doc";
    adoc.SaveAs(ref filename, ref missing, ref missing, ref missing, ref missing, ref missing, 
        ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing);

    // Word.Table wt1 = WordApp.Selection.Tables.Add(WordApp.Selection.Range, 5, 2, ref missing, ref missing);
    //adoc.Tables[1].Rows.Add(adoc.Tables[1].Rows[1]);
    //WordApp.Visible = true;

    //adoc.Close();
    WordApp.Quit(ref missing, ref missing, ref missing);
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T18:30:51.937

假设您不介意将文档保存为 DOCX，您可以使用本文所述的[Open](http://msdn.microsoft.com/en-us/library/office/gg490656.aspx) XML [SDK 2.0](http://www.microsoft.com/en-us/download/details.aspx?id=5124)。然后，您可以使用自动化将文档转换为 DOC、PDF 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T05:34:53.313

根据您已经完成的工作量，您可以通过在 Word 运行时隐藏它来显着提高性能。花费的大部分时间可能是由于 Word 试图实时呈现您的更改（无论如何，这是我的经验）。实例化后在行中尝试`WordApp`：

```
WordApp.Visible = false; 
```

话虽如此，Office 互操作正在逐步淘汰，所以[Werner Strydom](https://stackoverflow.com/users/715978/werner-strydom)的解决方案可能是要走的路。

# android - 调用 Activity 时出现 NullPointerException

> ID：12060815
> 
> 赞同：0
> 
> 时间：2012-08-21T18:23:04.937
> 
> 标签：android, nullpointerexception, oncreate, onclicklistener

当我单击一个按钮将我带到另一个页面时，我的程序崩溃了。我的 OnClickListener 似乎是正确的，但我知道我错过了一些东西。谁能看到我哪里出错了？

错误：

```
 08-20 13:40:30.622: E/AndroidRuntime(1026): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.LoginScr.Example/com.LoginScr.Example.CredentialsActivity}: java.lang.NullPointerException 
```

从用于调用第二个活动的主要活动：

```
 lsRegstr.setOnClickListener (new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Intent i = new Intent(LoginScrExample.this, CredentialsActivity.class);
                    startActivity(i);       
            } 
```

凭证活动：

```
 protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.register);

rName = (EditText)findViewById(R.id.reg_uname);
rCode= (EditText)findViewById(R.id.reg_pswd);

bReg = (Button) findViewById(R.id.reg_button);
bReg.setOnClickListener(this);
bRtn = (Button) findViewById(R.id.rtn_button);
bRtn.setOnClickListener(this);

Bundle RegBundle = getIntent().getExtras();

bundleRegName = RegBundle.getString(rUsername);
bundleRegCode = RegBundle.getString(rPasscode);

rName.setText(bundleRegName);
rCode.setText(bundleRegCode);
    }

@Override
public void onClick (View v) {

    rUsername = rName.getText().toString();
    rPasscode = rCode.getText().toString();

    RegDetails regDetails = new RegDetails();
    regDetails.setlName(bundleRegName);
    regDetails.setlCode(bundleRegCode);
    if(v.getId()==R.id.rtn_button){
        finish();

    }else if(v.getId()==R.id.reg_button){
        insertCredentials(regDetails);
    }
}
    private void insertCredentials(RegDetails regDetails){

        LoginDB androidOpenDBHelper = new LoginDB(this);

        SQLiteDatabase sqliteDB = androidOpenDBHelper.getWritableDatabase();

        ContentValues contentValues = new ContentValues();

        contentValues.put(LoginDB.COLUMN_NAME_USERNAME, rUsername);
        contentValues.put(LoginDB.COLUMN_NAME_PASSWORD, rPasscode);

        String[] whereClauseArgument = new String[1];
        whereClauseArgument[0] = regDetails.getlName();

        System.out.println(" Credentials Saved!" + whereClauseArgument[0]);

        sqliteDB.close();
        finish();
    }   

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:10:24.780

信息非常有限（如堆栈跟踪）和错误的可能性太多。你得到 NullPointerException 这意味着在你的代码中你试图访问一个**空对象**的地方。
一种真正的可能性是在第二个活动的这部分代码中，您试图从意图中获取额外的数据。由于您没有在第一个活动中添加任何额外的数据，您将收到 null，然后您尝试从捆绑包中获取字符串。尝试在代码的这一点上检查字符串是否为空。

```
Bundle RegBundle = getIntent().getExtras();
if(RegBundle != null) {
    bundleRegName = RegBundle.getString(rUsername);
    bundleRegCode = RegBundle.getString(rPasscode);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:36:58.737

有了这些有限的信息，它可能是很多事情。最可能的原因之一是未在 androidmanifest.xml 中声明新活动。您是否在 androidmanifest.xml 中声明了要启动的活动？

# twitter - 推特 API 的变化

> ID：12060816
> 
> 赞同：2
> 
> 时间：2012-08-21T18:23:08.643
> 
> 标签：twitter

如果有人可以提供帮助，请寻找有关即将到来的新 Twitter API 更改的一些清晰信息-

API 更改是否会影响我如何将时间线中的前 5 条推文放置到我的网站上。我之前使用过一些快速的 javascript 技术来执行此操作，但是新的身份验证是否意味着我必须通过 PHP Oauth 或类似的方法才能执行相同的操作？它会破坏我之前所做的设置吗？

我之前使用过此代码： [http](http://pastebin.com/hFZhfavk) ://pastebin.com/hFZhfavk 然后在这里输入您的用户名：

```
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/USERNAME.json?callback=twitterCallback2&count=2"></script> 
```

浏览了一些有关更改的文档，但不确定它是否仅适用于应用程序，或者它是否会影响我正在做的事情。

非常感谢所有帮助！如果设置不同，如果有人能指出一些好的教程/信息的方向，那就太好了。

谢谢你的时间

/* ed */ 我已经使用@abraham 的设置在PHP 中设置了Twitter Oauth。每次我加载测试页面时，我都会被要求登录 Twitter——Twitter 提要现在必须以新规则出现在网站上吗？如果有人有任何见解，仍然有点困惑，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T10:18:07.973

我知道这是一个老问题，但答案是肯定的——所有 Twitter API 1.1 调用都必须经过身份验证。API 1.0 已永久关闭。|

这应该解释所有：[https ://dev.twitter.com/blog/api-v1-is-retired](https://dev.twitter.com/blog/api-v1-is-retired)

# ios - Jenkins 上的 iOS：找不到配置文件

> ID：12060820
> 
> 赞同：0
> 
> 时间：2012-08-21T18:23:22.140
> 
> 标签：ios, jenkins, provisioning-profile

我知道在这个网站上有很多与我类似的问题，但似乎没有一个是我在寻找一些环境变化的问题。

我正在运行使用 Java Web Start 设置的 osx Dumb Slave。我不是以 root 身份运行，也不是名为“jenkins”的特定用户，而是普通用户。我已经在 J​​enkins 上安装了 xcode 插件。一切似乎都启动得很好，它正在从服务器上加载文件，但是，一旦我开始构建（清理后），我遇到了这个错误：

```
Provisioning profile '<uuid>' can't be found 
```

我已将证书设置为登录和系统以及仅登录和系统。我复制了当前在另一台机器上使用的 .p12 证书。我不知所措。如果有人可以帮助甚至将我链接到我尚未尝试的一些 stackoverflow 问题，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:51:53.103

我必须在我的 project.pbxproj 中搜索所有配置文件。似乎有一个旧号码和一个新号码（用于不同的应用程序）。我不得不将供应编号重新调整到新的编号。

# wordpress - 本地主机上的 XAMPP wordpress

> ID：12060823
> 
> 赞同：0
> 
> 时间：2012-08-21T18:23:39.940
> 
> 标签：wordpress, xampp, localhost

我有这个站点，我需要在本地对其进行测试，以查看我的 php 设置是否存在问题，无论如何我尝试使用端口号导航到 localhost`localhost:portnumber` 并且效果很好，但随后我尝试导航到我的站点`localhost:portnumber/mysite`并我收到 404 错误，并且在我导航到的地址中更改为`localhost:portnumber/mysite`

为什么会发生这种情况，我能做些什么来解决它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:10:03.357

因为您收到 404 错误，您的服务器似乎正在运行，但请确保该服务器是您设置的服务器。

1st，您是否尝试过使用简单的 html 文件？示例：`blabla.html`在 root 上，然后键入：`localhost:portnumber/blabla.html`

如果这正常工作，则意味着您的服务器运行良好，如果您愿意，也可以尝试使用 Hello world php 文件。

在 wordpress 的情况下，有时一个`.htaccess`文件使用 url rewrite 并且它可能会删除您的端口号，您可以尝试先使用干净的 wordpress 安装进行测试。

# svn - 一个过滤/搜索 SVN subversion.tigris.org/issues 可以区分开放票和封闭票吗？

> ID：12060826
> 
> 赞同：0
> 
> 时间：2012-08-21T18:23:45.450
> 
> 标签：svn

好吧，要么这太愚蠢了，要么开源工具需要工具制造者的帮助。当我遇到 Subversion 问题时，我想搜索他们的票证存储库[http://subversion.tigris.org/issues/](http://subversion.tigris.org/issues/)。但是，即使使用高级搜索，我也无法对问题是否已经关闭进行子集或排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:29:08.553

在[问题跟踪查询](http://subversion.tigris.org/issues/query.cgi)网页上，我可以为查询设置的条件之一似乎是解决方案。

[Apache](http://subversion.apache.org/)早在 2009 年 11 月就接管了 Subversion 的支持和维护。这里是[Apache Subversion 问题](http://subversion.apache.org/reporting-issues.html)网页。

# streaming - 在 iTunes 中播放流而不将其添加到库/播放列表

> ID：12060827
> 
> 赞同：1
> 
> 时间：2012-08-21T18:23:53.723
> 
> 标签：streaming, applescript, itunes

我正在通过 AppleScript 控制 iTunes，并且正在播放来自 HTTP 服务器的流。我正在使用的代码如下所示：

```
tell application "iTunes"
  open location "your_url_here"
  play
end tell 
```

它工作正常，但我想避免这些 URL 出现在 iTunes 库或之后的任何播放列表中。有什么诀窍可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:53:55.797

您是否考虑过使用 QuickTimePlayer 来播放流？

```
tell application "QuickTime Player"
    open URL "http://www.a-1radio.com/listen.pls"
end tell 
```

它应该打开所有的 iTunes 格式，它是 OsX 的默认设置，它更“最小”，不会保存曲目。

（我知道您指定要使用 iTunes，因此这可能不是解决方案，但作为预装软件值得一试）

**编辑**要隐藏它，这似乎有效：

```
tell application "QuickTime Player"
    -- don't use launch or activate
    -- on my mac with launch I see a flicker of the window
    set numberOfWindows to (count windows)
    repeat with i from 1 to numberOfWindows
        close front window
    end repeat
end tell

-- may add some delay here if it still flickers the window
    -- delay 1

tell application "QuickTime Player"
    open URL "http://www.a-1radio.com/listen.pls"
    set visible of every window to false
end tell

tell application "System Events"
    set visible of process "QuickTime Player" to false
end tell

-- must be called after the open URL command or won't work (no idea why) 
```

要关闭流，请退出或关闭窗口（如果您打算重新打开，只需关闭）：

```
tell application "QuickTime Player"

    -- here you can either:

    -- close all (will leave app open and hidden)
    set numberOfWindows to (count windows)
    repeat with i from 1 to numberOfWindows
        close front window
    end repeat

    -- or:

    quit -- or just quit (will close app so will need to hide again next time)
end tell 
```

如果在打开 url 之前隐藏它，它就不起作用（不知道为什么）。当然，即使不可见，窗口仍然是打开的，所以如果有人点击停靠图标，它将显示所有打开的窗口。如果您不想停止以前的流，请删除`repeat -- end repeat`顶部的第一部分，但保留该`set numberOfWindows to (count windows)`部分无用，但无需激活/启动命令即可激活应用程序

# c# - 什么是 TargetedPachingOptOutAttribute？

> ID：12060839
> 
> 赞同：1
> 
> 时间：2012-08-21T18:24:36.813
> 
> 标签：c#

> **可能重复：**
> [TargetedPatchingOptOut：“性能对跨 NGen 图像边界内联至关重要”？](https://stackoverflow.com/questions/6109745/targetedpatchingoptout-performance-critical-to-inline-across-ngen-image-bounda)

在浏览 .NET 源代码时，我比较频繁地看到以下内容：

```
[TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")] 
```

这个是来做什么的？

# javascript - 高效移动 Redis 哈希字段

> ID：12060846
> 
> 赞同：0
> 
> 时间：2012-08-21T18:25:27.990
> 
> 标签：javascript, node.js, redis

我正在尝试从一个 Redis 哈希中删除多个值并将其移动到 Node.js 中的另一个 Redis 哈希。

基本上我设置了两个哈希值：当前和历史。

当我收到包含 1 的信息时，我将一些字符串数据存储到当前哈希中。我一直这样做，直到收到包含 0 或 2 的信息。

然后我想从当前哈希中删除与这个新消息的字符串匹配的所有值，并将它们放入历史哈希中。

我正在编写一个函数，它只从当前哈希中读取所有值，将它们的字符串与新的信息字符串进行比较，然后在匹配时删除并添加。但是我已经可以看到如果当前哈希中有很多项目，这将是多么低效。

有没有更好的方法来删除散列中的多个匹配值并轻松地将它们移动到不同的散列？

# html - 如何在不同的div中指定字体大小？

> ID：12060850
> 
> 赞同：0
> 
> 时间：2012-08-21T18:25:55.930
> 
> 标签：html, css

我正在尝试将我的`div`内部父级的字体大小指定为与父级的外部`div`相同..`div``div`

我有

html

```
<div id='parent' >
 <div class='testclass'><b>title</b><br> contents here</div>

</div>

 <div class='testclass'><b>title2</b><br> contents here</div>
 <div class='testclass'><b>title3</b><br> contents here</div>
 <div class='testclass'><b>title4</b><br> contents here</div> 
```

我的 CSS

```
parent{
font-size:.8em;font-weight:bold;
}

.testclass{
font-size:1.1em
} 
```

parent的`div`外部`div`具有正确的字体大小 ( `1.1em`)，但 parent 内部的字体大小`div`小于 outside `div`。但是，如果我在`testclass`. 一切正常。有什么办法可以解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:30:52.133

我假设您的父级 CSS 规则实际上是：

```
#parent {
    font-size:.8em;font-weight:bold;
} 
```

在这种情况下，这是有道理的。您有两种简单的方法来`.testclass`覆盖`#parent#' 选择器：

*   `testclass`为like制作另一个更具体的选择器`#parent .testclass, .testclass {...}`

*   **使用!important**标志在`.testclass`覆盖中声明字体大小：**`.testclass{ font-size:1.1em !important;}`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:48:55.853

+1 镇压。而且在IE7/FF3.6 上也可以使用`>`指定一个第一级子级。因此以下内容也将针对正确的 div

```
#parent > div {
    font-size:.8em;font-weight:bold;
} 
```

甚至

```
#parent > .testclass {
    font-size:.8em;font-weight:bold;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:50:24.730

`em`s 是相对的。我的意思是他们堆叠，有点像百分比。

如果你说：

```
body { font-size : 20px; }

#parent { font-size : 2em; }
#child  { font-size : 3em; } 
```

您实际上在说的是（请注意，ems 并不完全表示 px——它们表示 M 测量值，但出于所有意图和目的，这里实际上是相同的）：

```
Body = 20px;
Parent = Body * 2; //200% of the M-measurement of Body's font-size.
Child = Parent * 3; // 300% of the M-measurement of Parent's font-size,
                // which would be 600% of Body at this point 
```

相反，您可能正在寻找的是：

```
Body = 20px;
Parent = Body * X;
Child =  Parent * 1/X; 
```

前任：

```
Body = 20px;
Parent = 2em;  // 40px, effectively
Child = 0.5em; // This 0.5 is referring to half of Parent's em
               // As the parent was 2x body, this sets Child to body's height

Body = 15px;
Parent = 0.8em;  // 15 * 0.8 = 12
Child = 1.25em;  // 12 * 1.25 = 15 
```

CSS3 解决方案是使用`rem`s. 不是乐队。 `rem`s***总是***相对于根。

所以如果你设置：

```
Child = 1rem; 
```

它将等于文档基本大小的 100%，无论其父（或祖父母）设置为什么（然后您可以使用`em`相对大小的子元素下的元素）。

请注意，这是 CSS3，因此虽然 FireFox 和 Chrome 广泛支持`rem`，但它只是 IE9+。

这就是为什么我也建议使用数学入门。**

# vba - 遍历 Excel 工作表

> ID：12060855
> 
> 赞同：3
> 
> 时间：2012-08-21T18:26:17.677
> 
> 标签：vba, excel, excel-2010

这是我的代码。我是 VBA 新手，所以我不确定如何遍历多个页面。

这是我的代码：

```
Dim ws As Worksheet
Sub spellCheck()
For Each ws In ActiveWorkbook.Worksheets
Cells.CheckSpelling
Next
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T18:34:48.397

试试这个（这只会激活每张纸）：

```
Sub spellCheck()
Dim ws As Worksheet
For Each ws In ActiveWorkbook.Worksheets
    ws.Activate
    ' Do stuff...
Next
End Sub 
```

# windows - NPAPI Safari 窗口

> ID：12060858
> 
> 赞同：0
> 
> 时间：2012-08-21T18:26:25.370
> 
> 标签：windows, safari, npapi

我已经构建了 NPAPI 插件，它可以被 Windows 7 上的 Chrome、FF 和 Safari 浏览器很好地加载。但是，我需要复制该插件以使其成为不同的插件（名称）。到目前为止，我能够使 Chrome 和 Firefox 使用不同的名称和 mime 类型识别第二个插件（关于：插件），并测试了这两个插件按预期工作。但是，在 Safari (5.1.7) 上，它不能按预期工作。似乎只识别最后一个插件被安装。如果我卸载最后一个插件，它会使第一个插件（仍然安装）按预期工作。我使用 Process Monitor 进行监控，看到两个插件都被加载了。我的调试工作没有产生任何线索。Safari 如何识别 Windows 上安装的每个插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:22:43.097

Windows 上的 NPAPI 插件根据 .rc 文件中 STRINGS 资源的内容识别插件；确保你有一个唯一的插件名称和不同的 mimetype，你应该没问题。

# android - 多个 Android 布局和“Id”范围

> ID：12060859
> 
> 赞同：0
> 
> 时间：2012-08-21T18:26:26.853
> 
> 标签：android, layout

我有一个 TabView 在每个视图中有多个布局。我想我可以复制我的布局 XML 文件 (foo.xml)，重命名它 (bar.xml)，然后在新类中使用新布局 (bar.xml)。例如：Tab1 是执行 setContentView (R.layout.foo) 的 foo.java，Tab2 是执行 setContentView (R.layout.bar) 的 bar.java。

但这似乎是一个问题，因为当我在 Tab1 中更改按钮的文本时，它似乎也在 Tab2 中更改。我期望每个类仅限于在 setContentView() 中实现的 xml 中包含的小部件。小部件 ID 的范围真的这么广泛吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:30:47.553

不，范围不是那么广泛。如果您在 foo.xml 中有一个 id 为“fizz”的元素，则您无法从您的活动中获取元素 fizz 的句柄，除非您在同一活动中将 contentview 设置为 foo.xml。

创建 TabView 时，您确定没有添加两次 Tab1 吗？

# iphone - iPhone 上的音频硬件延迟

> ID：12060861
> 
> 赞同：1
> 
> 时间：2012-08-21T18:26:29.597
> 
> 标签：iphone, avfoundation, core-audio, audioqueue

我目前正在开发一个播放音频文件（mp3，但可以更改为 WAV 以减少解码时间）并同时录制音频的应用程序。
出于同步目的，我想估计音频开始播放的确切时间。

使用 AudioQueue 控制每个缓冲区，我可以估计第一个缓冲区被耗尽的时间。我的问题是：

1.  AudioQueue 缓冲区被耗尽和实际播放之间的硬件延迟是多少？
2.  是否有更低级别的 API（特别是 AudioUnit），具有更好的性能（在硬件延迟测量中）？
3.  是否可以使用 AudioQueue 对硬件延迟设置上限，w 或 w/o 解码缓冲区？5ms 似乎是我可以使用的，更多的是需要不同的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:48:56.503

音频队列 API 在音频单元之上运行，因此使用原始未压缩音频的 RemoteIO 音频单元将允许更低且更具确定性的延迟。可以在某些 iOS 设备（使用音频会话 API）上设置的最小 RemoteIO 缓冲区持续时间约为 6 到 24 毫秒，具体取决于应用程序状态。这可能会设置播放和录制延迟的下限，具体取决于您用于延迟测量点的事件。

解码压缩音频可能会从解码开始增加大约一个或两个数量级的延迟。

# php - 无法从 MySQL 数据库中获取信息，给出错误“为 foreach() 提供的参数无效”

> ID：12060862
> 
> 赞同：-1
> 
> 时间：2012-08-21T18:26:34.617
> 
> 标签：php, mysql

这是代码：

```
print_table.php:
----------------

<?php

function print_table($db)
{
    foreach ($db->query("SELECT * FROM name_of_db") as $row)
    {
        echo $row['title'];
    }
}

?>

mysql_connect.php:
------------------

<?php

class mysql_connection
{
    private $_dsn;
    private $_user;
    private $_pass;
    private $_db;

    public function __construct()
    {
        $this->_dsn = "mysql:dbname=nope;host=nope";
        $this->_user = "nope";
        $this->_pass = "nope";
        $this->_db = null;
    }

    public function connect()
    {
        try
        {
            $this->_db = new PDO($this->_dsn, $this->_user, $this->_pass);
        }
        catch (PDOException $e)
        {
            echo "Connection Failed: " . $e->getMessage();
        }
    }

    public function get_db()
    {
        return $this->_db;
    }
}

?>

init.php:
---------

<?php

include_once("mysql_connect.php");
include_once("print_table.php");

$con = new mysql_connection();
$con->connect();

?> 
```

init.php 在 index.php 的开头被调用。然后，稍后在 index.php 我有这一行：

`<?php print_table($con->get_db()); ?>`

为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:27:52.437

```
function print_table($db)
{
    $aRows = $db->query("SELECT * FROM name_of_db");
    foreach ($aRows as $row)
    {
        echo $row['title'];
    }
} 
```

这解决了问题。不要`mysql_query`在 foreach 中使用 IN，而是使用返回的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:51:54.517

我修好了它。问题是我使用的是 SELECT * FROM name_of_db，但它应该是表的名称..真是个愚蠢的错误..啊

# python - Python subprocess.call 一个 bash 别名

> ID：12060863
> 
> 赞同：35
> 
> 时间：2012-08-21T18:26:41.060
> 
> 标签：python, bash, subprocess

在工作中有一个列出已完成任务的脚本。这是由其他人编写的，并通过网络托管。我的 .bashrc 中有一个别名，它调用这个脚本，它有很多标志等，我想编写一个 python 脚本，每隔几分钟调用一次这个别名，这样我就可以打开一个带有更新统计信息的 shell。然而，`subprocess.call("myAlias")`失败。我对 python 还是很陌生，并且正在努力解决这个问题。

```
from subprocess import call

def callAlias():
    call("myAlias")

callAlias() 
```

我也计划添加更多，但我在第一步中遇到了障碍。:P

我会发布更多，但有很多敏感的机密内容我必须小心。很抱歉代码模糊，并且缺少错误输出。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2014-08-02T22:03:01.123

**更新：**感谢这个黑客解决问题的支持，我很高兴它很有用。但一个*更好*的答案是 Tripleee 的，在页面的下方很远......

如果您需要的别名是在 ~/.bashrc 中定义的，那么由于以下几个原因它不会运行：

1）你必须给'shell'关键字arg：

```
subprocess.call('command', shell=True) 
```

否则，您给定的命令用于查找可执行文件，而不是传递给 shell，它是扩展别名和函数等内容的 shell。

2) 默认情况下，subprocess.call 和朋友使用'/bin/sh' shell。如果这是您要调用的 Bash 别名，则需要使用“可执行”关键字 arg 告诉子进程使用 bash 而不是 sh：

```
subprocess.call('command', shell=True, executable='/bin/bash') 
```

3) 但是，/bin/bash 除非作为“交互式”shell（使用“-i”）启动，否则不会获取 ~/.bashrc。不幸的是，您不能传递 executable='/bin/bash -i'，因为它认为整个值是可执行文件的名称。因此，如果您的别名是在用户的正常交互式启动中定义的，例如在 .bashrc 中，那么您必须使用这种替代形式调用命令：

```
subprocess.call(['/bin/bash', '-i', '-c', command])
# i.e. shell=False (the default) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-21T18:28:36.633

您需要将`shell`关键字设置为 True：

```
call("myAlias", shell=True) 
```

从[相关文档](http://docs.python.org/library/subprocess.html#frequently-used-arguments)：

> 如果`shell`是`True`，指定的命令将通过 shell 执行。如果您将 Python 主要用于它在大多数系统 shell 上提供的增强控制流，并且仍然希望访问其他 shell 功能，例如文件名通配符、shell 管道和环境变量扩展，这将很有用。

别名是一个shell 特性（例如，它们由shell 定义和解释）。

但是，shell (/bin/sh) 以非交互方式执行，因此不会读取`.profile`或`.bashrc`读取文件，并且您的别名可能不可用。

如果您不愿意在 python 脚本中使用完整的扩展命令，则必须使用[`$ENV`环境变量](https://stackoverflow.com/a/9036123)让 shell 读取文件中定义的别名：

```
call("myAlias", shell=True, env=dict(ENV='/path/to/aliasfile')) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-03-10T12:46:01.283

推荐的解决方案是不*使用*别名来定义并非*专门*用于交互式使用的功能（即使这样，shell 函数在许多方面都更优越）。

将别名重构为独立脚本，并像任何其他外部命令一样调用它。

更详细地说，如果你有

```
alias myalias='for x in foo bar baz; do
    frobnicate "$x"; done' 
```

你可以改进它，这样它就不会通过把它变成一个函数来污染你的全局命名空间

```
myalias () {
    local x
    for x in foo bar baz; do
        frobnicate "$x"
    done
} 
```

或者只是将其另存为 `/usr/local/bin/myalias`并`chmod a+x /usr/local/bin/myalias`使其对所有人都可执行；

```
#!/bin/sh
for x in foo bar baz; do
    frobnicate "$x"
done 
```

（这在子进程中运行，因此`x`脚本完成后将消失；所以我们不需要制作它`local`。）

（当然，如果`frobnicate`完全写得好，也许你也可以简化为`frobnicate foo bar baz`一样。）

这是一个常见的常见问题解答。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-15T23:13:10.603

我稍微修改了乔纳森的理由 #2 来完成这项工作。制作一个`/usr/local/bin/interactive_bash`包含

```
#!/bin/bash
/bin/bash -i "$@" 
```

和`chmod +x`它。然后从 Python 你可以调用

```
subprocess.call('my_alias', shell=True, executable='/usr/local/bin/interactive_bash') 
```

# php - openssl_pkey_new() 抛出错误——为 php 正确设置 openssl.cnf

> ID：12060865
> 
> 赞同：12
> 
> 时间：2012-08-21T18:26:46.523
> 
> 标签：php, openssl, private-key

**好的，很明显这个问题与在 Linux 服务器上设置 openssl 以及如何正确设置自定义 openssl.cnf 文件有关。我不是在寻找任何复杂的东西，但我需要一个能够创建自签名客户端证书以对我的 web 服务进行身份验证的前端。因此，我需要能够使用我的 CA 为客户公司创建中间 CA，然后允许他们使用安全接口为他们的员工颁发客户证书。登录取决于您是否属于特定的中间 CA，以及您的证书或中间 CA 是否未被吊销。

*对于任何想知道的人，我们可以使用自签名证书，因为它们仅用于我们的服务器对用户进行身份验证，并且由于我们颁发了它们，因此我们信任它们。此外，对于初创公司来说，通过商业产品 AFAIK 将自己确立为中间 CA 的成本也太高了。微软可以做到，我们做不到。我们的网络服务器本身使用 CA 签名证书。*

我知道用于设置这种事情的 php 代码是直截了当的，但不是如何正确设置 openssl。我在网上尝试了几个不同的例子，但它们似乎都不适用于我的设置，而且它们似乎都不同。一盒是全新安装的 Centos 6.2，但我仍然遇到错误。

谁能指出我设置 openssl、apache2 和 php 的正确方向，以便我可以使用这些 php 库而不会出错？我们的虚拟服务器正在使用 debian 挤压，我可以完全控制安装的软件。

谢谢。

**open_pkey_new()**返回错误，例如 error:0E06D06C:configuration file routines:NCONF_get_string:no value。但是我正在传递一个到 openssl.cnf 文件的路径，所以我不知道为什么我仍然遇到这个问题。这是我的相关代码

```
<?php
$cwd=getcwd();
$distname= array(
    "countryName" => "CA",
    "stateOrProvinceName" => "Ontario",
    "localityName" => "Toronto",
    "organizationName" => "G4 Apps",
    "organizationalUnitName" => "Development",
    "commonName" => "Mark Lane",
    "emailAddress" => "nobody at gmail.com"
        );
$password = 'seanix';

$cacert_location=$cwd."/certs/CA/g4CA.crt";
$cakey_location=$cwd."/certs/CA/g4CA.key";
$cnf=$cwd.'/certs/myopenssl.cnf';
$configArgs = array(
        'config' =>$cnf
);
?> 
```

这是我制作钥匙的功能。

```
<?php
function makekey($password,$configArgs) {
    $key= openssl_pkey_new($configArgs);
    //print_r($configArgs);
    openssl_pkey_export($key, $pkeyout,$password);
    if (($e=openssl_error_string()) ==false) return $pkeyout;
    else {
        do {

            echo $e . "<BR>";
        } while($e=openssl_error_string());
        return -1;
    }
}
?> 
```

我也尝试过配置文件的相对路径，但它仍然无法正常工作。看起来可能是主机提供商 ssl 设置。我切换到本地虚拟机并获得了生成密钥，但现在在创建 csr 时遇到了同样的错误。

**错误：0E06D06C：配置文件例程：NCONF_get_string：无值**

```
<?php
function newcsr($distname,$key,$configArgs) {
    $csr=openssl_csr_new($distname,$key,$configArgs);
    openssl_csr_export($csr, $csrout);
    if (($e=openssl_error_string()) ==false) return $csrout;
    else {
        do {

            echo $e . "<BR>";
        } while($e=openssl_error_string());
        return -1;
    }
}
?> 
```

**openssl.conf**这看起来是 openssl.cnf 中的错误，所以我已包含该文件。

```
HOME            = .
RANDFILE        = $ENV::HOME/.rnd

oid_section     = new_oids

[ new_oids ]

tsa_policy1 = 1.2.3.4.1
tsa_policy2 = 1.2.3.4.5.6
tsa_policy3 = 1.2.3.4.5.7

####################################################################
[ ca ]
default_ca  = g4CA      

####################################################################
[ g4CA ]

dir     = /home/g4apps/secure.g4apps.com/generator/certs    
certs       = $dir/     
crl_dir     = $dir/crl      
database    = $dir/index.txt    

new_certs_dir   = $dir/newcerts     

certificate = $dir/CA/g4CA.crt  
serial      = $dir/serial       
crlnumber   = $dir/crlnumber    

crl     = $dir/CA/g4CA.crl  
private_key = $dir/CA/g4CA.key  
RANDFILE    = $dir/private/.rand    

x509_extensions = usr_cert      

name_opt    = ca_default        
cert_opt    = ca_default        

default_days    = 365           # how long to certify for
default_crl_days= 30            # how long before next CRL
default_md  = default       # use public key default MD
preserve    = no            # keep passed DN ordering

policy      = policy_match

[ policy_match ]
countryName     = match
stateOrProvinceName = match
organizationName    = match
organizationalUnitName  = optional
commonName      = supplied
emailAddress        = optional

[ policy_anything ]
countryName     = optional
stateOrProvinceName = optional
localityName        = optional
organizationName    = optional
organizationalUnitName  = optional
commonName      = supplied
emailAddress        = optional

####################################################################
[ req ]
default_bits        = 2048
default_md      = md5
default_keyfile     = privkey.pem
distinguished_name  = req_distinguished_name
attributes      = req_attributes
x509_extensions = v3_ca # The extentions to add to the self signed cert

string_mask = utf8only

[ req_distinguished_name ]
countryName         = Country Name (2 letter code)
countryName_default     = CA
countryName_min         = 2
countryName_max         = 2

stateOrProvinceName     = State or Province Name (full name)
stateOrProvinceName_default = ON

localityName            = Locality Name (eg, city)
localityName_default    = Toronto

0.organizationName      = Organization Name (eg, company)
0.organizationName_default  = G4 Apps

organizationalUnitName      = Organizational Unit Name (eg, section)

commonName          = Common Name (eg, your name or your server\'s hostname)
commonName_max          = 64

emailAddress            = Email Address
emailAddress_default        = lmlane@gmail.com
emailAddress_max        = 64

[ req_attributes ]
challengePassword       = A challenge password
challengePassword_min       = 4
challengePassword_max       = 20

unstructuredName        = An optional company name

[ usr_cert ]

nsComment           = "OpenSSL Generated Certificate"

subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer

[ v3_req ]

basicConstraints = CA:FALSE
keyUsage = nonRepudiation, digitalSignature, keyEncipherment

[ v3_ca ]

subjectKeyIdentifier=hash

authorityKeyIdentifier=keyid:always,issuer
basicConstraints = CA:true

[ crl_ext ]

authorityKeyIdentifier=keyid:always

[ proxy_cert_ext ]
basicConstraints=CA:FALSE

nsComment           = "OpenSSL Generated Certificate"

subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer

proxyCertInfo=critical,language:id-ppl-anyLanguage,pathlen:3,policy:foo

####################################################################
[ tsa ]

default_tsa = tsa_config1   

[ tsa_config1 ]

dir             = ./demoCA      
serial      = $dir/tsaserial    
crypto_device   = builtin       
signer_cert = $dir/tsacert.pem  

certs       = $dir/cacert.pem   
signer_key  = $dir/private/tsakey.pem 
default_policy  = tsa_policy1       
other_policies  = tsa_policy2, tsa_policy3
digests     = md5, sha1     
accuracy    = secs:1, millisecs:500, microsecs:100  
clock_precision_digits  = 0 
ordering        = yes   

tsa_name        = yes   
ess_cert_id_chain   = no 
```

堆栈跟踪`strace php getkeystore.php &> stack.trace`

[http://secure.g4apps.com/generator/stack.trace](http://secure.g4apps.com/generator/stack.trace)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T19:13:21.283

我在我的 Mac 和全新安装的 CentOS 6.3 上试过这个，我得到了同样的错误。我从 IUS 得到我的 CentOS 软件包。但这很奇怪，因为即使我收到了这条消息，实际上也正在生成密钥。

以下代码：

```
$res = openssl_pkey_new();
openssl_pkey_export($res, $privkey);
var_dump(openssl_error_string());
var_dump($privkey); 
```

给我以下输出：

```
string(68) "error:0E06D06C:configuration file routines:NCONF_get_string:no value"
string(887) "-----BEGIN RSA PRIVATE KEY-----
MIICXQIBAAKBgQDdh4FiOEtUZzvTSnlb/pJHjmsS9rOHQ7PU2WOO6ZHxYRIgK1NR
ReY7bBwEsT2ziUpx0b8K2Fx4m+XovzysB/lVrKbrdbHoVtGuJGZjYSXgFlCRTBu+
+TnAPUBF0LGJfxfVzjOkHzsh02lH3fvzFpFgRZRWs4za+vVzIweeOweYTwIDAQAB
AoGANZD5iS2BkZQw1COS+tqwtlrKq1g6CwAk8NfsCfeSkaJeRqcTS3iydjXrBHtz
JwGQnbsRDedJXOSdkE0Ft7dp44lijOAp1ngMDCKbabxVN2Go6b1d743HE0oIhFCC
Dv2B9kf9vzeYy+0/BVCs5i4iPoKXJJTSJrWoDxrFEJWSJIkCQQDwe39bOFHmQlxz
pbfT3DZ8Q311xFo6PewcAf7DTsikoPZANx0GQ41WdZj6/n4QVP4k+TnhZLiJzsH+
p3RUrx8tAkEA69LsgPrQMZ0YjsE2vjRLdJmp1916G1xqSLIVWDUPd9Ns+MA8YKTx
AQxC3dl3n+w24m7UlCThANlU/+2r0eoi6wJBAKIxGOdEJ/Cdp08UYNRR/Kl4t2A7
SwNnChylt9awByEJsqwCv9+epe+/Jqt6AzouqK31LXV4AgJn4W1IMWyAJA0CQCp0
6/2AqnD0PpKc+JUf5yHT9H8Xsb8xUTVLUopx6xoAp5LVUUl5CKbOpU85ss7JAUyc
9YrCZPv5JNN6379ILwcCQQDDcjtNnhQHukQQQ8iVL9YCrWzyCgplTz3uktueT+Dd
SDK1bCM4xDehfG3RKu1ZNx80Q0nzmi7FSPJ2md7qSIHc
-----END RSA PRIVATE KEY-----
" 
```

我怀疑这是PHP中的一个错误。某种 openssl 配置 PHP 被挂断了。我在 php.net 上找到了一个关于此的[错误报告](https://bugs.php.net/bug.php?id=33237&edit=1)，但它为用户“开始工作”，因此该错误已关闭。

作为替代方案，您可以查看[phpseclib](https://github.com/phpseclib/phpseclib)，这是一个纯粹用 PHP 编写的库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-16T10:11:30.293

使用 openssl_csr_new 时，请确保第一个参数 $dn 不包含具有空值的键。

例如，此调用`openssl_csr_new`将触发错误

`0E06D06C:configuration file routines:NCONF_get_string:no value`

```
<?php

$dn = [
    'CN' => 'example.com',
    'ST' => '',
    'C'  => '',
    'O'  => '',
];

openssl_csr_new($dn, $privKey); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T18:31:42.203

检查您的 openssl.cnf 是否有

```
default_md = md5 
```

在其中，否则将其添加到 cnf 文件中，如果有帮助，请重试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-26T13:00:11.123

根据[@Luke提到](https://stackoverflow.com/users/867760/)[的错误](https://bugs.php.net/bug.php?id=33237) ，我的结论是：

**openssl_pkey_new() 不返回值，因此为 "FALSE"**。

var_dump() 只是说它返回一个 OpenSSL 密钥。

**“所以它起作用了 - “NCONF_get_string:no value”只是某种通知。”** - [vrana@php.net](https://people.php.net/user.php?username=vrana)

openssl_csr_new() （也许更多）有类似的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-10T08:45:09.630

我已经打了这个问题十几次，所以是时候投入我的 2 美分了：由于（恕我直言）PHP 完成的一些向后配置解析，否则有效/超级复杂的 openssl.cnf 可能会导致多达 10 个警告。在将头撞到墙上后，我做了一个垫片，以便 OpenSSL 和 PHP 可以和平共存。

**与其弄乱您的 openssl.cnf，不如制作您自己的骨架 cnf 并在其中包含默认值，如下所示：**

```
#PHP shim for an otherwise beautiful openssl.cnf
#Notes:
# duplicate OID definitions fail
# duplicate OID usage generates a warning in most cases
# All duplicate sections/values are overlayed: PHP > shim > include > default
RANDFILE    = /dev/null #PHP warns if this doesn't exist
oid_file    = /dev/null #PHP warns if this doesn't exist
#PHP warns if oid_section isn't in the default section
#PHP warns if oid_section is used in another section (only on initialization)
oid_section = php_oids  #set an empty OID section
.include /etc/ssl/openssl.cnf    #include our working conf
[ req ]
  #included format differs from expected format
  attributes         = php_attr #openssl_csr_new()
  #not set in include
  encrypt_rsa_key    = yes #overriden by encrypt_key
  #uncomment to override include, or if otherwise unset
  #req_extensions     = php_req_extension #overridden by req_extensions
  #x509_extensions    = php_x509_extension #overridden by x509_extensions
  #default_bits       = 4096          #overridden by private_key_bits
  #default_md         = sha512        #overridden by digest_alg
  #string_mask        = utf8only      #overridden by string_mask
  #distinguished_name = php_distinguished_name #openssl_csr_new()
[ php_attr ] #empty attributes section
  #challengePassword = password
  #unstructuredName = i_prefer_structure
  ##NO *_min,*_max,*_default
  ##challengePassword         = A challenge password (6-20 characters)
  ##challengePassword_min     = 6
  ##challengePassword_max     = 20
  ##challengePassword_default = this_wont_work
[ php_oids ] #empty OID section (no duplicates in this section)
  #test_cert = 2.23.140.2.1
  ##NO short_id=long_id,id_num
  ##TEST = test_cert, 2.23.140.2.1
[ php_distinguished_name ] #empty DN section
  #commonName         = Common Name (CN)
  #commonName_min     = 1
  #commonName_max     = 63
  #commonName_default = this_works
  #streetAddress      = this_also_works
  #0.organizationalUnitName = this_actually_works
  #ONLY THE FIRST OID IS USED
  ##1.organizationalUnitName = this_is_silently_discarded
[ php_x509_extension ] #empty x509 extension section
  subjectKeyIdentifier   = hash #at least one value required
  #authorityKeyIdentifier = keyid:always
  #keyUsage               = critical, digitalSignature, cRLSign, keyCertSign
  #basicConstraints       = critical, CA:true, pathlen:0
  #certificatePolicies    = ia5org, test_cert
  #authorityInfoAccess    = @ocsp_ext
  #crlDistributionPoints  = @crl_ext
  #tlsfeature             = status_request_v2
[ php_req_extension ] #empty req extension section
  subjectKeyIdentifier   = hash #at least one value required
  #keyUsage               = critical, nonRepudiation, digitalSignature, keyEncipherment
  #extendedKeyUsage       = critical, clientAuth, emailProtection
  #basicConstraints       = critical, CA:FALSE
  #certificatePolicies    = ia5org, test_cert
  #authorityInfoAccess    = @ocsp_ext
  #crlDistributionPoints  = crl_ext
  #tlsfeature             = status_request_v2
  #nsComment              = "OpenSSL 1.1.1c Generated Client Certificate" 
```

除了 [req] 部分，请随意删除所有注释以缩小文件。

**这是相应的 PHP 文件来测试它：**

```
<?php
  //Serial can't be our desired 20 byte random hex:
  //  [bin2hex(random_bytes(20))] is ideal
  //  [8 bytes] PHP_INT_MAX
  //  file a bug report?
  //NO subjectAltName !!!!!
  //ini_set('openssl.cafile','/etc/ssl/certs/my-ca.crt');
  //ini_set('openssl.capath','/etc/ssl/certs/');
  $pass='password';
  $capass='capass';
  /* it's best to set all of these values in PHP to avoid confusion */
  $config=[
   /*'digest_alg'      =>'sha512',                     /*default_md*/ /*openssl_get_md_methods()*/
   /*'private_key_bits'=>8192,                         /*default_bits*/
   /*'encrypt_key'     =>true,                         /*encrypt_key,encrypt_rsa_key*/
   /*'string_mask'     =>'utf8only',                   /*string_mask - undocumented*/
   'x509_extensions' =>'x509_ext_orig',                /*x509_extensions*/
   'req_extensions'  =>'usr_cert_orig',                /*req_extensions*/
   'private_key_type'  =>OPENSSL_KEYTYPE_EC,
   'encrypt_key_cipher'=>OPENSSL_CIPHER_AES_256_CBC,
   'curve_name'        =>'secp384r1',                /*openssl_get_curve_names()*/
   'config'            =>'php-openssl.cnf'           /* export OPENSSL_CONF=php-openssl.cnf */
  ];
  /* all values here OVERWRITE any default DN value */
  $dn=[
   /*'name'=>'', //FAILS- NO EMPTY VALUES*/
   'OU'=>'override_original_OU',
   'surname'=>'new_surname'
  ];
  /* all values here ADD to the default. this array can be multi-dimensional */
  $csrargs=[
   'surname'=>'additional_surname',
   'OU'=>['second_OU','third_OU']
  ];
  $pkargs=[
   /*'extracerts'=>'',*/
   'friendly_name'=>'php-cert'
  ];
  while($err=openssl_error_string()) echo("openssl_init- {$err}\n");
  if($pkey=openssl_pkey_new($config)){ /* create a new private key */
    while($err=openssl_error_string()) echo("openssl_pkey_new- {$err}\n");
    $csr=openssl_csr_new($dn,$pkey,$config,$csrargs); /* generate a csr */
    while($err=openssl_error_string()) echo("openssl_csr_new- {$err}\n");
    print_r(openssl_csr_get_subject($csr,true)); /* show the dn */
    /* sign our CSR using the largest random serial we can */
    $x509=openssl_csr_sign($csr,'file:///etc/ssl/certs/int-ca.crt',['file:///etc/ssl/private/int-ca.key',$capass],30,$config,random_int(72057594037927936,PHP_INT_MAX));
    while($err=openssl_error_string()) echo("openssl_csr_sign- {$err}\n");
    if($x509!==false){
      openssl_pkcs12_export_to_file($x509 ,'/tmp/phpcert.pfx',$pkey,$pass,$pkargs); /* export the keypair as pfx */
      while($err=openssl_error_string()) echo("openssl_pkcs12_export_to_file- {$err}\n");
      openssl_pkey_export_to_file($pkey,'/tmp/phpcert.key',$pass,$config); /* export the private key */
      while($err=openssl_error_string()) echo("openssl_pkey_export_to_file- {$err}\n");
      openssl_pkey_free($pkey); /* free memory */
      openssl_x509_export_to_file($x509,'/tmp/phpcert.crt',true); /* export the signed certificate */
      openssl_x509_free($x509); /* free memory */
      while($err=openssl_error_string()) echo("openssl_x509_export_to_file- {$err}\n");
  }else{
    while($err=openssl_error_string()) echo("openssl_pkey_new- {$err}\n");
  }
?> 
```

希望这会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-03T21:14:15.243

在我的配置（FreeBSD、libressl 2.8、php 构建自端口）中，[req] 部分中的条目“default_bits”被注释掉了。

通过启用此配置条目，此问题已得到解决。

# node.js - 为什么 node.js 一次只处理六个请求？

> ID：12060869
> 
> 赞同：73
> 
> 时间：2012-08-21T18:27:09.380
> 
> 标签：node.js

我们有一个 node.js 服务器，它实现了一个 REST API 作为中央服务器的代理，它有一个稍微不同的，不幸的是不对称的 REST API。

我们的客户端在各种浏览器中运行，它要求节点服务器从中央服务器获取任务。节点服务器从中央服务器获取所有任务 ID 的列表并将它们返回给客户端。然后，客户端通过代理对每个 id 进行两次 REST API 调用。

据我所知，这些东西都是异步完成的。在控制台日志中，当我启动客户端时，它看起来像这样：

```
Requested GET URL under /api/v1/tasks/*: /api/v1/tasks/ 
```

这需要几秒钟才能从中央服务器获取列表。一旦它得到响应，服务器很快就会把它吐出来：

```
Requested GET URL under /api/v1/tasks/id/:id :/api/v1/tasks/id/438
Requested GET URL under /api/v1/workflow/id/:id :/api/v1/workflow/id/438
Requested GET URL under /api/v1/tasks/id/:id :/api/v1/tasks/id/439
Requested GET URL under /api/v1/workflow/id/:id :/api/v1/workflow/id/439
Requested GET URL under /api/v1/tasks/id/:id :/api/v1/tasks/id/441
Requested GET URL under /api/v1/workflow/id/:id :/api/v1/workflow/id/441 
```

然后，每次这些请求中的一对从中央服务器获得结果时，另外两行很快就会被吐出。

所以看起来我们的 node.js 服务器一次只愿意发出六个请求。

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-08-21T18:37:50.613

Node 本身没有 TCP 连接限制。（重点在于它是高度并发的，可以同时处理数千个连接。）您的操作系统*可能会*限制 TCP 连接。

更有可能您遇到了后端服务器的某种限制，或者您遇到了内置 HTTP 库的连接限制，但是如果没有有关该服务器或您的 Node 实现的更多详细信息，很难说。

Node 的内置[HTTP 库](http://nodejs.org/api/http.html)（显然是任何构建在它之上的库，大多数）维护一个连接池（通过[`Agent`](http://nodejs.org/api/http.html#http_class_http_agent)类），以便它可以利用 HTTP 保持活动。当您对同一服务器运行许多请求时，这有助于提高性能：而不是打开 TCP 连接、发出 HTTP 请求、获得响应、关闭 TCP 连接并重复；可以在重用的 TCP 连接上发出新请求。

在节点 0.10 和更早版本中，HTTP 代理默认只会打开 5 个同时连接到单个主机的连接。您可以轻松更改：（假设您已将`require`HTTP 模块设置为`http`）

```
http.globalAgent.maxSockets = 20; // or whatever 
```

节点[0.12](http://blog.nodejs.org/2015/02/06/node-v0-12-0-stable/)将默认设置`maxSockets`为`Infinity`.

您可能希望保持某种连接限制。您不想在一秒钟内用数百个 HTTP 请求完全压倒您的后端服务器 - 性能很可能比让代理的连接池做它的事情，限制请求以免使您的服务器过载。您最好的选择是进行一些实验，看看在您的情况下并发请求的最佳数量是多少。

但是，如果您真的不想要连接池，您可以完全绕过池 -在请求选项中发送`agent`到：`false`

```
http.get({host:'localhost', port:80, path:'/', agent:false}, callback); 
```

在这种情况下，并发 HTTP 请求绝对没有限制。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-21T19:24:19.073

这是浏览器中并发连接数的限制：

[流行的浏览器允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)

我赞成其他答案，因为它们帮助我诊断了问题。线索是节点的套接字限制是 5，而我一次得到 6 个。6 是 Chrome 中的限制，这是我用来测试服务器的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-21T20:53:13.553

您如何从中央服务器获取数据？`http`使用模块发出 HTTP 请求时，“节点不限制连接”并不完全准确。以这种方式发出的客户端请求使用 的`http.globalAgent`实例`http.Agent`，并且每个请求`http.Agent`都有一个调用设置，该设置`maxSockets`确定代理可以向任何给定主机打开多少个套接字；这默认为 5。

因此，如果您使用`http.request`or `http.get`（或依赖于这些方法的库）从中央服务器获取数据，您可以尝试更改 的值（或在您使用`http.globalAgent.maxSockets`的任何实例上修改该设置）。`http.Agent`

看：

*   [`http.Agent`文件](http://nodejs.org/docs/latest/api/http.html#http_class_http_agent)
*   [`agent.maxSockets`文件](http://nodejs.org/docs/latest/api/http.html#http_agent_maxsockets)
*   [`http.globalAgent`文件](http://nodejs.org/docs/latest/api/http.html#http_http_globalagent)
*   [您可以传递给的选项`http.request`，包括`agent`指定您自己的代理的参数](http://nodejs.org/docs/latest/api/http.html#http_http_request_options_callback)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-15T16:34:09.003

Node js 可以处理数以千计的传入请求——是的！

但是，当涉及到 ougoing 请求时，每个请求都必须处理 dns 查找和 dns 查找、磁盘读取等由用 C++ 编程的 libuv 处理。每个节点进程的线程默认值为 4x 线程。

如果所有 4x 线程都忙于 https 请求（dns 查找），其他请求将被排队。这就是为什么无论您的代码多么出色：有时每秒完成的并发传出请求数为 6 或有时更少。

了解 dns 缓存以减少 dns 查找量并增加 libuv 大小。如果您使用 PM2 来管理您的节点进程，他们确实有关于环境变量以及如何注入它们的良好文档。您正在寻找的是环境变量 UV_THREADPOOL_SIZE = 4

您可以将值设置为 1 或最大限制 1024 之间的任何值。但请记住，libuv 限制为 1024 是跨所有事件循环的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-05T03:59:56.497

我在我的服务器上看到了同样的问题。它只处理 4 个请求。正如已经从 0.12 开始解释的那样，maxsockets 默认为无穷大。这很容易使服务器不堪重负。将请求限制为 10

```
http.globalAgent.maxSockets = 20; 
```

解决了我的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T18:51:14.113

您确定它只是将结果返回给客户端吗？Node 在一个线程中处理所有内容。因此，如果您进行一些花哨的响应解析或其他任何无法产生的事情，那么它会阻止您的所有请求。

# android - 使用 ListView 作为 TextView 的背景

> ID：12060872
> 
> 赞同：0
> 
> 时间：2012-08-21T18:27:33.187
> 
> 标签：android, android-listview, textview

我有以下布局，主要包含：

相对布局，作为带有 Textview 和按钮的标题。

和列表视图。

我想让作为上述相对布局的“标题”透明，并在用户向下滚动列表视图时显示列表视图。

我知道如何使布局透明，但我不知道如何将列表视图显示为“标题”的背景。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/buttonlayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"

            android:orientation="horizontal"
           android:background="#FFDBE2ED"
             android:paddingBottom="0dp"
              android:paddingTop="0dp" 
             >
          <TextView
                android:id="@+id/txtTest"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"  
                android:gravity="center_vertical" 
                android:layout_centerVertical="true"
                android:paddingLeft="0dp"
                android:text="@string/list_header"
                android:textColor="#000000"
                android:textSize="25sp"
                 android:textStyle="bold">
            </TextView>

            <Button
                android:id="@+id/btnClear"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="0px"
                android:layout_marginLeft="10px"
                android:layout_marginRight="3px"
                android:layout_marginTop="6px"
                android:height="0dp"
                android:text="Clear"
                android:textSize="15sp"
                android:width="70dp"
                 android:layout_alignParentRight="true"
                  >
            </Button>
       </RelativeLayout>

    <ListView
        android:id="@+id/mylist1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/form"
        android:layout_alignParentTop="true" >
    </ListView>

</LinearLayout> 
```

![截屏](../Images/3334f682e87d9d4fbac6b45c75589825.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:18:42.663

您正在使用 LinearLayout 作为根容器，并且在线性布局中，视图被放置在另一个之上，因此您不能将一个视图重叠在另一个视图上。如果您想要重叠效果，您可以使用 FrameLayout 或 RelativeLayout 作为根容器。
使用 RelativeLayout 是一个更好的选择。
这是示例代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

    <Button
        android:id="@+id/view"
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:background="#00cc0000"
        android:layout_alignParentTop="true" />
</RelativeLayout> 
```

这里的按钮与列表视图重叠。

我希望这个能帮上忙 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:59:53.477

尝试将 ListView 作为第一个元素移动到 RelativeLayout 中（这样可以确保它位于后面）。这样，其他视图就在 ListView 之上，如果你让它们透明你应该得到想要的效果！哦，你应该让 ListView 然后填充RelativeLayout：

```
<ListView
    android:id="@+id/mylist1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentTop="true" >
</ListView> 
```

，并使 RelativeLayout 填满屏幕：

```
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/buttonlayout2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
... 
```

# gcc - GDB：如何获取执行历史

> ID：12060873
> 
> 赞同：1
> 
> 时间：2012-08-21T18:27:33.233
> 
> 标签：gcc, gdb

我对编译器领域很陌生。我正在使用 gcc，我想获取特定运行的程序的执行历史记录，即只有那些在上次运行中实际执行的语句。

gdb可以吗？我无法在 gdb 中获得可以输出已执行语句的相关选项。或者还有其他获取执行历史的方法吗？

问候，尼基尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T18:36:35.000

[过程记录](http://sourceware.org/gdb/wiki/ProcessRecord/Tutorial)可能是您正在寻找的。该链接有一个快速教程和功能概述。

从链接的 wiki 页面：

> 使用 -g 编译这个程序，并将其加载到 gdb 中，然后执行以下操作：
> 
> ```
>  (gdb) break main  
>  (gdb) run  
>  (gdb) record 
> ```
> 
> 这将打开进程记录，现在将记录被调试程序执行的所有后续指令。
> 
> 请注意，您可以在任何时候开始过程记录（不仅仅是在主要位置）。您可以选择稍后启动，甚至更早启动。唯一的限制是您的程序必须正在运行（因此您必须在“记录”之前键入“运行”）。如果您想从程序的第一条指令开始录制，您可以这样做：
> 
> ```
>  (gdb) break _start   
>  (gdb) run   
>  (gdb) record 
> ```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:36:47.213

您可以使用`set history save`命令开始记录历史记录。这可以写入`~/.gdbinit`文件中。[查看文档](http://sourceware.org/gdb/onlinedocs/gdb/Command-History.html)以获取更多信息。

# opencv - Emgu CV for Android 抛出异常 Java.Lang.UnsatisfiedLinkError

> ID：12060877
> 
> 赞同：2
> 
> 时间：2012-08-21T18:27:51.167
> 
> 标签：opencv, xamarin.android, emgucv

我正在使用 Mono for Android 并遵循此页面上提到的说明：http: [//file.emgu.com/wiki/index.php/Emgu_CV_for_Android](http://file.emgu.com/wiki/index.php/Emgu_CV_for_Android)但是当我在模拟器上运行应用程序时，它会引发以下异常：

> Java.Lang.UnsatisfiedLinkError has been throwed Cannot load library: find_library[1199]: 37 'libopencv_highgui.so' failed to load previously
> 
> Java.Lang.UnsatisfiedLinkError：无法加载库：find_library[1199]：37 'libopencv_highgui.so' 之前在 Android.Runtime.JNIEnv.CallStaticVoidMethod 加载失败（IntPtr jclass，IntPtr jmethod，Android.Runtime.JValue[] parms）[ 0x00023] 在 /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.4-branch/9f7cbd60/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.g.cs:973
> 
> 在 /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.4-branch/9f7cbd60/source/monodroid/src/Mono.Android 中的 Java.Lang.JavaSystem.LoadLibrary (System.String libName) [0x00034] /platforms/android-15/src/generated/Java.Lang.JavaSystem.cs:253
> 
> 在 Emgu.CV.CvInvoke..cctor () [0x00000] 中：0
> 
> --- 托管异常堆栈跟踪结束 ---
> 
> java.lang.UnsatisfiedLinkError: 无法加载库: find_library[1199]: 37 'libopencv_highgui.so' 之前加载失败
> 
> ```
>  at java.lang.Runtime.loadLibrary(Runtime.java:370)
> 
>   at java.lang.System.loadLibrary(System.java:535)
> 
>   at 
> ```
> 
> mono.android.view.View_OnClickListenerImplementor.n_onClick（本机方法）
> 
> ```
>  at 
> ```
> 
> mono.android.view.View_OnClickListenerImplementor.onClick(View_OnClickListenerImplementor.java:29)
> 
> ```
>  at android.view.View.performClick(View.java:3511)
> 
>   at android.view.View$PerformClick.run(View.java:14105)
> 
>   at android.os.Handler.handleCallback(Handler.java:605)
> 
>   at android.os.Handler.dispatchMessage(Handler.java:92)
> 
>   at android.os.Looper.loop(Looper.java:137)
> 
>   at android.app.ActivityThread.main(ActivityThread.java:4424)
> 
>   at java.lang.reflect.Method.invokeNative(Native Method)
> 
>   at java.lang.reflect.Method.invoke(Method.java:511)
> 
>   at 
> ```
> 
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
> 
> ```
>  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
> 
>   at dalvik.system.NativeStart.main(Native Method) 
> ```

这是 OpenCV-2.4.2 参考的截图
![参考截图](../Images/a417c7ab4865148de84d0f4a7d818b2c.png)

# r - 基于更大因素的水平

> ID：12060883
> 
> 赞同：-3
> 
> 时间：2012-08-21T18:28:14.493
> 
> 标签：r, dataframe, levels, factors

这是样本数据。

```
df1 <- data.frame(y = 1:5, x = c("s", "m", "l", "s", "m"))

df2 <- data.frame(y = 1:4, x = c("s", "l", "s", "l")) 
```

我希望 df2 具有基于 df1$x 的三个级别。

我试过了

```
df2$x <- factor(df1$x) 
```

然后我有

```
Error in `$<-.data.frame`(`*tmp*`, "x", value = c(3L, 2L, 1L, 3L, 2L)) : 
  replacement has 5 rows, data has 4 
```

或者

```
levels(df2$x) <- factor(df1$x) 
```

然后它改变了df2。

```
df2
  y x
1 1 m
2 2 s
3 3 m
4 4 s 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:37:14.757

我不确定我是否正确理解了您的目标。

```
df1 <- data.frame(y = 1:5, x = factor(c("s", "m", "l", "s", "m")))
df2 <- data.frame(y = 1:4, x = factor(c("s", "l", "s", "l")))
df2$x
#[1] s l s l
#Levels: l s
levels(df2$x)<-unique(c(levels(df2$x),levels(df1$x)))
df2$x
#[1] s l s l
#Levels: l s m 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:59:55.453

```
df1 <- data.frame(y = 1:5, x = c("s", "m", "l", "s", "m"))

df2 <- data.frame(y = 1:4, x = factor(c("s", "l", "s", "l"), levels=levels(df1$x)))

 str(df2)
'data.frame':   4 obs. of  2 variables:
 $ y: int  1 2 3 4
 $ x: Factor w/ 3 levels "l","m","s": 3 1 3 1 
```

# jquery - jquery ajax请求中的错误

> ID：12060885
> 
> 赞同：-1
> 
> 时间：2012-08-21T18:28:28.220
> 
> 标签：jquery

请帮我修复以下代码，它总是给出错误

```
 $.ajax({
 type: "GET",
     url: "http://herokory.herokuapp.com/autocomplete/jsonpCallback/a",
     dataType:"jsonp"
 }).error(alert('error')); 
```

网址[http://herokory.herokuapp.com/autocomplete/jsonpCallback/a](http://herokory.herokuapp.com/autocomplete/jsonpCallback/a)支持 jsonp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:31:08.007

您传递的将方法设置为 jsonp 的键`dataType`不是`datatype`. 对象键区分大小写

此外，在失败时，jquery 将发送 XHR、textStatus 和 errorThrown。为什么不看看那些？：

```
...
.done(function (XHR, textStatus, errorThrown) {
    console.log(XHR, textStatus, errorThrown);
}); 
```

您需要在 ajax 调用之外定义 jsonpCallback：

```
function jsonpCallback(data) {
    // do stuff with data
    console.log(data)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:32:23.343

使用 reponseText 获取有关错误的更多详细信息。你们在同一个域吗？

```
$.ajax({
 type: "GET",
 url: "http://herokory.herokuapp.com/autocomplete/jsonpCallback/a",
 datatype:"jsonp"
 }).responseText 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:56:36.840

使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，您需要设置一个回调函数来处理响应。在这种情况下：

```
http://herokory.herokuapp.com/autocomplete/jsonpCallback/a 
```

您`jsonpCallback`在 URL 中指定为函数的名称。因此，在发出 JSONP 请求之前，您需要有一个**在全局范围内可见的具有该名称的函数：**

```
function jsonpCallback(data) {
    console.log(data);
}

$.ajax({
type: "GET",
    url: "http://herokory.herokuapp.com/autocomplete/jsonpCallback/a",
    dataType:"jsonp"
}).error(alert('error')); 
```

# foursquare - Foursquare API 的 categoryId 参数是否有任何限制？

> ID：12060899
> 
> 赞同：0
> 
> 时间：2012-08-21T18:29:53.763
> 
> 标签：foursquare

使用 Foursquare API 时，如果我在 categoryId 参数中传递多达 6 个类别 id，它可以正常工作。但是，如果我通过 7 或更多，Foursquare 返回 500 内部服务器错误，表示他们的服务器已关闭（见下文）。事实是服务器已经启动，API 文档没有说明类别限制。我正在使用的具体查询是这样的：

```
https://api.foursquare.com/v2/venues/search?v=20120321&ll=-19.879190%2C-43.927068&limit=50&intent=checkin&radius=500&categoryId=4d4b7105d754a06374d81259%2C4d4b7104d754a06370d81259%2C4d4b7105d754a06377d81259%2C4d4b7105d754a06375d81259%2C4d4b7105d754a06378d81259%2C4d4b7105d754a06379d81259&client_id=[MY_CLIENT_ID]&client_secret=[MY_CLIENT_SECRET] 
```

如果我添加诸如`4d4b7105d754a06372d81259`和`4d4b7105d754a06376d81259`（所有有效类别）之类的类别，则服务器开始返回`500 Internal Server Error`. 这是一个错误，还是我错过了什么？

我不认为这是 URL 大小限制，因为在传递 6 个类别 ID 时，带有转义的整个 URL 正好是 410 个字符长。

错误响应如下：

```
HTTP/1.1 500 Internal Server Error
Date: Tue, 21 Aug 2012 18:19:48 GMT
Content-Length: 183
Content-Type: application/json
Connection: close
Server: nginx/1.2.1

{
  "meta":  {
    "code": 500,
    "errorType": "server_error",
    "errorDetail": "Foursquare servers are experiencing problems. Please retry and check status.foursquare.com for updates."
  },
  "response":  {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:18:20.900

我认为这已经解决了——我尝试了一个只有不到 30 个类别的搜索，它似乎有效。没有服务器错误，我从大多数类别中获得了很好的场地样本。

# c# - 无法克隆对象。序列化问题

> ID：12060900
> 
> 赞同：0
> 
> 时间：2012-08-21T18:30:05.053
> 
> 标签：c#, .net, linq-to-sql, serialization

我有一个由 Linq2Sql 生成的类：

```
public partial class BuyerOrder : INotifyPropertyChanging, INotifyPropertyChanged 
```

我想克隆这个类的对象，就像在[这篇](https://stackoverflow.com/questions/78536/cloning-objects-in-c-sharp)文章中所做的那样。为此，我在未生成的文件中定义了部分类，我将其标记为可序列化：

```
[Serializable]
public partial class BuyerOrder 
```

但是当我打电话时

```
formatter.Serialize(stream, source); 
```

我得到一个例外，说这个类没有被标记为可序列化。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:40:12.983

如果要序列化 ​​LINQ-to-SQL 类型，请告诉代码生成器发出可序列化的数据。您可以在 DBML 中执行此操作，或者更简单地在设计器中执行此操作 - 只需将序列化模式设置为单向（这是DBML`@Serialization`中根`<Database>`元素上的属性）。

这将生成适合与`DataContractSerializer`;一起使用的属性标记。LINQ-to-SQL*旨在*通过`DataContractSerializer`. 它*不是*设计为可序列化的`BinaryFormatter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:40:53.563

从 BuyerOrder 派生的每个类也必须装饰为 [Serializable]，以及序列化实例持有引用的所有对象（除非装饰为 NonSerializable）。

异常应该告诉您缺少可序列化属性的类型。如果你不能或不想装饰所有的课程，你将需要更多的创意。

——另一种可能——

一种选择是使用[为 C# 对象实现通用深度克隆中](http://csharptest.net/390/implementing-a-generic-deep-clone-for-c-objects/)描述的技术。由于这可以完全在内存中完成并且无需二进制格式化程序，因此它的执行速度将比基于序列化的克隆快很多倍。

源代码位于[http://csharptest.net/browse/src/Library/Cloning](http://csharptest.net/browse/src/Library/Cloning)

它只需要两行代码：

```
using (ObjectCloner cloner = new SerializerClone())
    fooCopy = cloner.Clone(foo); 
```

# sql - 我应该如何（如果我应该）在不陷入内部平台效应的情况下实现通用数据库表？

> ID：12060902
> 
> 赞同：2
> 
> 时间：2012-08-21T18:30:04.667
> 
> 标签：sql, database, generics, database-design, dynamic

我有一个这样的数据库模型：

```
tb_Computer (N - N) tb_Computer_Peripheral (N - 1) tb_Peripheral 
```

每台计算机都有 N 个外围设备。但是每个外设的性质不同，会有不同的领域。键盘有型号、语言等，网卡有速度等规格。

但我认为创建与外围设备一样多的表是不可行的。因为有一天有人会想出一个非常特定的外围设备，我不希望他仅仅因为它不是键盘也不是网卡而无法添加它。

`data`在 tb_Peripheral 中创建一个包含有关特定外围设备的 JSON 数据的字段是一种不好的做法吗？

我什至可以创建一个`tb_PeripheralType`包含特定类型外围设备具有哪些数据的特定信息。

我在很多地方都读到过这个，到处都发现这是一种不好的做法，但我想不出任何其他方式来按照我想要的方式实现它，完全动态的。

实现我想要的最佳方式是什么？现在的模型错了吗？你会怎么办 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:43:06.667

这不是“好做法”或“坏做法”的问题。使事物完全动态化有好处也有坏处。你已经很好地概述了上行空间。

完全动态设计的缺点是，将数据转化为有用信息的过程并不像在设计范围内确定数据语义的数据库那样例行公事。

当您开始添加有关一种新型外围设备的数据时，您能否构建一个报告和一个报告生成过程，使其适应新的数据结构？如果您最终在需求变化时坚持对应用程序进行维护，那么通过使数据库设计完全动态化，您获得了什么？

PS：如果对数据库设计的更改仅包括添加新表，则对现有应用程序的“涟漪效应”可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:49:04.983

我能想到四个选项。

首先是创建一个表外设，其中包含您可能想要的有关外设的所有信息。这将在字段不适合该类型的列中包含 NULL。添加新外围设备时，您必须添加描述性列。

第二种是为每个外围设备创建一个单独的表。

第三个是将信息编码为 JSON 之类的东西。

第四种是将数据成对存储。所以每个外围设备都会有许多不同的行。

这些方法也有混合体。例如，您可以将公共字段存储在单个表中（ala (1)），然后为其他值创建键值对。

问题是如何使用这些信息。我的大部分工作都是直接在 SQL 中完成的，所以对我来说最糟糕的选择是 (3)。我不想解析奇怪的信息格式来获得对 SQL 查询可能有用的东西。

选项 (4) 是最灵活的，但它也需要更多的工作才能全面了解所有可能的属性。

如果我从头开始，并且我非常清楚自己想要什么字段，那么我将从 (1) 开始，一个用于外围设备的表。如果我有外围设备和属性会定期更改的要求，那么我会认真考虑（4）。如果这些表*仅*由应用程序使用，那么我可能会考虑 (3)，但无论如何我可能会拒绝它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:04:00.387

当你做这种设计时，只有一个问题需要回答。JSON，一个序列化的对象，xml，或者天堂禁止 csv，并不重要。

你想在知道结构的 API 之外使用它们吗？

如果你想说使用 sql 来获取键盘类型的所有外围设备，其键数属性 >= 102 说。

If you do, it gets messy, much messier than extra tables. No different to say having a table of pdfs or docs and trying to find all the ones which have more than 10 pages.

Gets even funnier if you want to version the content as your application evolves.

Have a look at a Nosql back end, it's designed for stuff like this, a relational database is not.

# github - 安装 Octopress 时的 GitHub“错误：找不到存储库”

> ID：12060903
> 
> 赞同：2
> 
> 时间：2012-08-21T18:30:05.787
> 
> 标签：github, github-pages

我遵循了[http://octopress.org/docs/deploying/github/](http://octopress.org/docs/deploying/github/)上的指南，但是当我进入“rake deploy”部分时，我得到了这个：

```
## Deploying branch to Github Pages 
rm -rf _deploy/index.html

## copying public to _deploy
cp -r public/. _deploy
cd _deploy

## Commiting: Site updated at 2012-08-21 18:04:11 UTC
[master 84293e9] Site updated at 2012-08-21 18:04:11 UTC
 61 files changed, 2658 insertions(+), 1 deletion(-)
 create mode 100644 assets/jwplayer/glow/controlbar/background.png
 create mode 100644 assets/jwplayer/glow/controlbar/blankButton.png
 (...etc)

## Pushing generated _deploy website
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly

## Github Pages deploy complete
cd - 
```

有什么想法我出错了，或者如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:29:02.057

我设法消除了这个错误。

假设你已经安装了 ruby​​ 1.9.3

1.  在 github 上创建 repo 为`username.github.com`
2.  `cd your_working_dir`
3.  `rake install / rake install['theme_name']`
4.  rake setup_github_pages 这将询问存储库名称。不要附加“.git”
    ， 例如`git@github.com:username/username.github.com`完全没问题。
5.  现在添加您的远程仓库，使用检查可用的仓库
    `git remote -v`
    `octopress git://github.com/imathis/octopress.git (fetch)`
    `octopress git://github.com/imathis/octopress.git (push)`
6.  添加你的回购
    `git remote add origin git@github.com:username/username.github.com.git`
7.  将分支 master 重命名为 source，因为 github pages 只发布 source 分支 `git branch`
    `* master`
    `git branch -m master source`
    `git branch`
    `* source`
8.  预览时间
    `rake preview`
    打开的浏览器并转到 localhost:4000
9.  如果一切顺利，则推送到 github
10.  `rake generate`
    `git add .`
    `git commit -m "first blog"`
    `git push origin source` 耙部署

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:25:00.603

我刚刚遇到了同样的问题。

我猜在接下来的步骤中，你完全按照 shell 提示符告诉你的做： **chienlung@chienlung:~/octopress$** rake setup_github_pages

**输入存储库的读/写 URL**

**（例如，'git@github.com:your_username/your_username.github.com）**

**仓库地址：** *git@github.com:Chienlung/chienlung.github.com*

关于repo url的shell提示是错误的，如果你跟着它，你会遇到错误：

**## 推送生成的 _deploy 网站**

**错误：未找到存储库。**

**致命：远端意外挂断**

正确的“<strong>Repository url”应该是：*git@github.com:Chienlung/chienlung.github.com.git*

您应该在末尾添加“ **.git ”。**

使用该 URL 再试一次，希望这会有所帮助。

祝你好运！</p>

（另一个：在部署 octopress 之前，请确保您已经生成了 SSH KEY。关于生成 SSH 密钥，请参阅[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:06:55.663

as per your description, I think it's a git connection issue. Just refer to one of your successfully connected project, go to .git/config and see the value 'url' key.

I got the same issue while I tried the formal steps with octopress, it generated wrong url, so I updated it to

**url = ssh://git@github.com/AndyEverLie/andyeverlie.github.com.git**

in [remote "origin"] section, then run 'rake deploy', it works!

my env:

*   git version 1.7.0.4
*   ruby 1.9.3p194 (2012-04-20) [x86_64-linux]

Wish this helps :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T15:54:34.520

确保为 rake 任务提供正确的 url - 示例 url 有 .io 尾随，但 github 页面 url 可能有 .com。

我还发现 rake 任务会生成一个 .git/config，其中远程源分支 url 以 .io 结尾，应该将其更改为 .com.git 以允许您将源代码推送到 rake 的“源”分支上任务创建。

# python - 带参数的 Python 配置文件

> ID：12060906
> 
> 赞同：1
> 
> 时间：2012-08-21T18:30:13.430
> 
> 标签：python, config

我正在使用 python 配置文件。（具体来说，它是一个 YAML 格式的日志字典文件）。它将一个值定义为

```
handlers:  
  fileHandler:    
    class: logging.FileHandler   
    filename: a.txt
    mode: w    
    formatter: damiFormatter
    level: ERROR 
```

我想知道是否可以动态设置文件名。即从另一个配置文件中读取它？我可以在代码中执行此操作 - 使用 ConfigParser 读取一个值，然后将其设置为

```
configValues=ConfigParser.SafeConfigParser().read(configFile)
fName=configValues.get("NAMES","fileName")

dict=yaml.load(open('logging.config', 'r'))       
dict['handlers']['fileHandler']['filename']=fName 
```

但我想知道是否有更简单的方法，可以传递给字典配置文件的参数？

我想我可以使用默认值来做到这一点，但想知道是否有更清洁的实现

非常感谢。

# javascript - for in 循环和删除运算符

> ID：12060907
> 
> 赞同：10
> 
> 时间：2012-08-21T18:30:15.003
> 
> 标签：javascript

我注意到在枚举对象的属性时，似乎在循环开始时拍摄了当前属性的快照，然后迭代快照。我有这种感觉是因为以下内容不会造成无限循环：

```
var obj = {a:0,b:0}, i=0;
for (var k in obj) {
    obj[i++] = 0;
}
alert(i) // 2 
```

演示[http://jsfiddle.net/kqzLG/](http://jsfiddle.net/kqzLG/)

上面的代码演示了我正在添加新属性，但不会枚举新属性。

然而，删除操作符似乎违背了我的快照理论。这是相同的代码，但在枚举之前删除了一个属性。

```
var obj = {a:0,b:0}, i=0;
for (var k in obj) {
    i++;
    delete obj.b;
}
alert(i) // 1 
```

演示[http://jsfiddle.net/Gs2vh/](http://jsfiddle.net/Gs2vh/)

上面的代码演示了循环体只执行了一次。如果快照理论是真的，它会执行两次。

这里发生了什么？javascript 是否有某种类型的隐藏迭代器，它使用，并且删除操作员不知何故知道它？

——我意识到我假设了一些关于迭代顺序的东西——特别是迭代是基于属性插入时间发生的。我相信所有浏览器都使用这样的实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T18:34:11.360

有趣的问题。答案在于[规范](http://es5.github.com/#x12.6.4)（强调我的）：

> 枚举属性的机制和顺序（第一个算法中的步骤 6.a，第二个算法中的步骤 7.a）**未指定**。被枚举对象的属性可能在枚举过程中被删除。**如果在枚举期间还没有访问过的属性被删除，那么它就不会被访问。**如果在枚举过程中向正在枚举的对象添加了**新属性，则不保证**在活动枚举中访问新添加的属性。在任何枚举中不能多次访问属性名称。

因此明确规定不能再遍历已删除的属性。但是，添加新属性的行为取决于实现，很可能是因为它没有定义属性应如何在内部存储。

例如，在 Chrome 中，数字属性似乎存储在字母属性之前：

```
> Object.keys({a:0, 0:1});
  ["0", "a"] 
```

但是，即使您添加字母键：

```
var obj = {a:0,b:0};
for (var k in obj) {
    obj['c'] = 0;
    console.log(k);
} 
```

`c`似乎没有被遍历，输出是`a b`.

Firefox 显示相同的行为，尽管键是按插入顺序存储的：

```
> Object.keys({a:0, 0:1});
  ["a", "0"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:33:12.897

`obj[i++] = 0;`

第一次迭代：

*   进入：i = 0，退出，i = 1

    第二次迭代：

    *   入口：i = 1，出口，i = 2

    此外，在迭代对象时，不能保证 javascript`for in`循环按顺序完成。因此，`delete obj.b;`会产生不可预测的结果。

# java - jframe中的透明背景但带有窗口边框等

> ID：12060908
> 
> 赞同：2
> 
> 时间：2012-08-21T18:30:20.413
> 
> 标签：java, transparency, awtutilities

所以我可以试着问我的问题，但为了你和我的缘故，我在 Photoshop 中创建了一个简单的图像，试图告诉你我想要实现的目标：

![在此处输入图像描述](../Images/4218020734c552d062e0dfacbb55ad32.png)

我曾尝试在 AWTUtilities 中使用不透明的东西，但它似乎不起作用你们知道我怎么能做到这一点吗？

我确实需要原生窗口边框，所以我可以拖放窗口，还需要调整大小功能。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:32:48.263

有关透明/半透明的，`JFrame` 请参见此处：[http](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html) ://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shape_windows.html ，它解释了 Java 中的半透明 Windows。

你需要打电话`setOpacity()`。

这也是一个小例子：

![应用截图](../Images/7a021979036c47f6f7f510c2be87f8b6.png)

```
import java.awt.*;
import javax.swing.*;
import static java.awt.GraphicsDevice.WindowTranslucency.*;

public class TranslucentWindowDemo extends JFrame {

    public TranslucentWindowDemo() {
        super("TranslucentWindow");
        setLayout(new GridBagLayout());

        setSize(300, 200);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Add a sample button.
        add(new JButton("I am a Button"));
    }

    public static void main(String[] args) {
        // Determine if the GraphicsDevice supports translucency.
        GraphicsEnvironment ge =
                GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();

        //If translucent windows aren't supported, exit.
        if (!gd.isWindowTranslucencySupported(TRANSLUCENT)) {
            System.err.println(
                    "Translucency is not supported");
            System.exit(0);
        }

        JFrame.setDefaultLookAndFeelDecorated(true);

        // Create the GUI on the event-dispatching thread
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TranslucentWindowDemo tw = new TranslucentWindowDemo();

                // Set the window to 55% opaque (45% translucent).
                tw.setOpacity(0.55f);

                // Display the window.
                tw.setVisible(true);
            }
        });
    }
} 
```

# html - HTML & CSS：使用 CSS 正确对齐

> ID：12060909
> 
> 赞同：1
> 
> 时间：2012-08-21T18:30:22.560
> 
> 标签：html, css, dreamweaver

我对“div”标签有疑问——包括文本和标题。由于我还不能上传图片（因为我是这里的菜鸟），我会尽力解释。

*   一个“div”有一个“h1”，后跟一个“p”。整个“div”向左浮动。
*   另一个“div”有一个“h2”，后跟一个“p”。整个“div”向右浮动。

由于两个“text-divs”彼此相邻，我希望它们中的“p”能够完美地对齐和镜像。由于我的“h1”比我的“h2”大，第一个“div”中的“p”比另一侧的“p”被推得更远。

有没有聪明的方法来解决这个问题？我尝试过使用边距和填充，但让它适应似乎很复杂！

希望你能理解，

最佳 CSS_maniac

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:36:34.983

首先，我建议使用 CSS 重置脚本来限制您正在使用的变量（边距、填充、文本大小）的数量，并确保它在所有浏览器中都能正确呈现。 [Eric Meyer 的 CSS Reset](http://meyerweb.com/eric/tools/css/reset/)非常受欢迎。然后您可以调整`font-size`h1 和 h2 以使其显示为您喜欢的，并调整 h1 和 h2 上的`padding-bottom`or`margin-bottom`以使 p 正确对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:36:49.407

是的。至少有 10 种方法可以解决这个问题。

您可以将以下任何属性添加到任一 p 标签

`position: relative; top: (specify amount in px or em, without parentheses);`

`margin-top: 10px;`

`position: absolute; // Very similar to position: relative;`

祝你好运

-布赖恩

# android - 从另一个活动开始活动？

> ID：12060911
> 
> 赞同：0
> 
> 时间：2012-08-21T18:30:29.973
> 
> 标签：android, login, android-activity, android-dialog

我希望在我的应用程序中具有此功能：

当我启动我的应用程序时

```
-check if there is interne access : if yes {
                                        start LogInActivity { if login is succesfull
                                                              dialog:"synced!" for 3second
                                                             else
                                                               dialog:"no synced!" for 3second
                                                                  }
                                    }
                                        dialog:"no synced!"
                                        startMainActivity 
```

我希望第一个活动只是执行检查。不可见，如果有互联网，则转发到登录活动，否则登录到主要活动

这是因为我希望在没有内部人员的情况下使用我的应用程序。但是对于登录的用户，它将从 Web 服务下载一些信息以存储在共享首选项中。有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:32:01.020

最好的方法是创建一个小函数来检查 wifi 和移动网络，如下所示：-

```
/**
 * Function to check whether internet connection is available or not
 * 
 * @return true - if net is available
 */
public boolean haveNetworkConnection() {
    mHaveConnectedWifi = false;
    mHaveConnectedMobile = false;

    mConnectivityManager = (ConnectivityManager) mContext
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    mNetworkInfo = mConnectivityManager.getAllNetworkInfo();

    for (NetworkInfo mNetInfo : mNetworkInfo) {
        if (mNetInfo.getTypeName().equalsIgnoreCase("WIFI"))
            if (mNetInfo.isConnected())
                mHaveConnectedWifi = true;
        if (mNetInfo.getTypeName().equalsIgnoreCase("MOBILE"))
            if (mNetInfo.isConnected())
                mHaveConnectedMobile = true;
    }
    return mHaveConnectedWifi || mHaveConnectedMobile;
} 
```

现在在您的代码中执行以下操作：-

```
if(haveNetworkConnection){
// do something
}else{
    // no internet
} 
```

优点是我们正在检查wifi和移动网络......

希望解释是有用的....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:32:58.067

你会想要使用`startActivity()`或`startActivityForResult()`。

的优点`startActivityForResult()`是您可以在完成后从您开始的活动接收数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:44:12.820

只需创建首先启动的第三个活动，然后在该活动的 onCreate 上运行代码并调用其他活动。

您还可以在第三个活动上显示启动屏幕，同时决定要显示哪个活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T18:54:29.033

要启动您的其他活动：

```
if(connection/login fails){

                    Intent loginfailed = new Intent(MainActivity.this, loginfailedactivity.class);
                    startActivity(loginfailed);
      }

    else {.....} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T18:59:11.987

这是我为确保有wifi连接所做的工作：

```
private void checkWifiConnection(String menuUrl){

    ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
    NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    if(mWifi.isConnected()){
        LoadJSON lJs = new LoadJSON(); 
        lJs.execute(menuUrl); 
    } else {
        AlertDialog.Builder ab = new AlertDialog.Builder(context); 
        ab.setCancelable(true);
        ab.setTitle("No Connection"); 
        ab.setMessage("Your device is currently not connected to the Internet, please check your connection and launch the app again."); 
        ab.setInverseBackgroundForced(true); 
        ab.setPositiveButton("Okay", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss(); 
                MainActivity.this.finish(); 

            }
        }); 

        AlertDialog alert =  ab.create(); 
        alert.show(); 

    } 
```

您可以在启动您的语句的语句中插入一个`Intent`调用`if``Activity`

# iphone - xcode没有为通用应用程序创建不同的应用程序委托

> ID：12060914
> 
> 赞同：0
> 
> 时间：2012-08-21T18:30:51.250
> 
> 标签：iphone, objective-c, xcode, ipad

我是全新的`iphone`，我正在尝试创建一个通用应用程序。

现在我正在创建一个空应用程序。根据所有教程，通过检查`universal`选项，它应该`appdelegates`为 iphone 和 ipad 自动创建。

但我能看到的只是`one appdelegate`。请告诉我如何创建两者。

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:43:52.393

你真的应该只为通用应用程序使用一个 AppDelegate。您可以使用它来分享您将在那里做的常见事情。您究竟需要多个 AppDelegate 做什么？如果您需要执行特定于设备类型（即 iPhone 或 iPad）的操作，则可以执行如下三元表达式：

(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) ？NSLog(@"iPad") : NSLog(@"iPhone");

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T00:38:10.273

Brayden 正确地回答了您几乎*从*不需要多个应用程序代表。委托通常所做的只是处理应用程序启动、暂停或终止的时刻。在 iPhone 运行 iOS 4.0 和 iPad 运行 iOS 3.2 的时代，您可能需要在委托中使用非常不同的代码，因为只有 iOS 4.0 支持多任务处理。那些日子已经一去不复返了，您的代表可能应该在所有设备上采取相同的行动。

是的，您有时确实会达到您的程序在 iPhone 和 iPad 上的行为必须不同的地步。查当时的成语*并没有更早*。否则，您只是在毫无目的地复制代码。

我最近的应用程序几乎不包含针对 iPhone 或 iPad 的特殊检查。它甚至不使用不同的 XIB。相反，我的自定义视图实现`layoutSubviews`填充可用空间。

也就是说，一旦您了解了应用程序代表，也许您会发现需要它们与众不同的情况。如果您绝对确定您的 iPhone 和 iPad 行为会大相径庭，您将需要：

1.  手动新建类（最好继承现有`AppDelegate`类）
2.  在您的中，根据习语`main.m`将您的新代表的类名发送到。`UIApplicationMain`

请参阅“我可以在我的项目中创建 App Delegate 文件吗？”的[答案。](https://stackoverflow.com/a/11135796/1318452)查看对 的更改`main.m`。

# java - 在java中使用nested_tables

> ID：12060917
> 
> 赞同：0
> 
> 时间：2012-08-21T18:30:52.157
> 
> 标签：java, oracle, jakarta-ee, oracle11g

如何从 pl/sql 过程的 OUT 参数接收 java 中的嵌套表？这是我的示例代码。

```
Connection connection = utilities.getConnectionToDb();
CallableStatement callableStatement = connection.prepareCall("{call procedure_name(?,?)}");
callableStatement.setLong(1, 23456);
callableStatement.registerOutParameter(2, Types.ARRAY);
callableStatement.executeQuery(); 
```

但是当我尝试执行它时，我收到错误 PLS-00306: wrong number or types of arguments in call to 'procedure_name'

我确信参数的数量是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:15:41.073

这可能会回答你的问题

[http://asktom.oracle.com/pls/asktom/f?p=100:11:::::P11_QUESTION_ID:8908169959941](http://asktom.oracle.com/pls/asktom/f?p=100:11:::::P11_QUESTION_ID:8908169959941)

我从上面的网站引用这个-

```
SQL> create or replace type numArray as table of number;
  2  /

Type created.

SQL> create or replace type dateArray as table of date;
  2  /

Type created.

SQL> create or replace type strArray as table of varchar2(255);
  2  /

Type created.

SQL> create or replace package demo_passing_pkg
  2  as
  3      procedure pass( p_in in numArray, p_out out numArray )
  4      as language java
  5      name 'demo_passing_pkg.pass_num_array( oracle.sql.ARRAY,
  6                                             oracle.sql.ARRAY[] )';
  7
  8      procedure pass( p_in in dateArray, p_out out dateArray )
  9      as language java
 10      name 'demo_passing_pkg.pass_date_array( oracle.sql.ARRAY,
 11                                              oracle.sql.ARRAY[] )';
 12
 13
 14      procedure pass( p_in in strArray, p_out out strArray )
 15      as language java
 16      name 'demo_passing_pkg.pass_str_array( oracle.sql.ARRAY,
 17                                             oracle.sql.ARRAY[] )';
 18  end;
 19  /

Package created.

SQL> set define off
SQL>
SQL> create or replace and compile
  2  java source named "demo_passing_pkg"
  3  as
  4  import java.io.*;
  5  import java.sql.*;
  6  import java.math.*;
  7  import oracle.sql.*;
  8  import oracle.jdbc.driver.*;
  9
 10  public class demo_passing_pkg extends Object
 11  {
 12
 13  private static void show_array_info( oracle.sql.ARRAY p_in )
 14  throws SQLException
 15  {
 16      System.out.println( "Array is of type      " +
 17                           p_in.getSQLTypeName() );
 18      System.out.println( "Array is of type code " +
 19                           p_in.getBaseType() );
 20      System.out.println( "Array is of length    " +
 21                           p_in.length() );
 22  }
 23
 24  public static void pass_num_array( oracle.sql.ARRAY p_in,
 25                                     oracle.sql.ARRAY[] p_out )
 26  throws SQLException
 27  {
 28      show_array_info( p_in );
 29      java.math.BigDecimal[] values = (BigDecimal[])p_in.getArray();
 30
 31      for( int i = 0; i < p_in.length(); i++ )
 32          System.out.println( "p_in["+i+"] = " + values[i].toString() );
 33
 34      Connection conn = new OracleDriver().defaultConnection();
 35      ArrayDescriptor descriptor =
 36         ArrayDescriptor.createDescriptor( p_in.getSQLTypeName(), conn );
 37
 38      p_out[0] = new ARRAY( descriptor, conn, values );
 39
 40  }
 41
 42  public static void
 43  pass_date_array( oracle.sql.ARRAY p_in, oracle.sql.ARRAY[] p_out )
 44  throws SQLException
 45  {
 46      show_array_info( p_in );
 47      java.sql.Timestamp[] values = (Timestamp[])p_in.getArray();
 48
 49      for( int i = 0; i < p_in.length(); i++ )
 50          System.out.println( "p_in["+i+"] = " + values[i].toString() );
 51
 52      Connection conn = new OracleDriver().defaultConnection();
 53      ArrayDescriptor descriptor =
 54         ArrayDescriptor.createDescriptor( p_in.getSQLTypeName(), conn );
 55
 56      p_out[0] = new ARRAY( descriptor, conn, values );
 57
 58  }
 59
 60  public static void
 61  pass_str_array( oracle.sql.ARRAY p_in, oracle.sql.ARRAY[] p_out )
 62  throws java.sql.SQLException,IOException
 63  {
 64      show_array_info( p_in );
 65      String[] values = (String[])p_in.getArray();
 66
 67      for( int i = 0; i < p_in.length(); i++ )
 68          System.out.println( "p_in["+i+"] = " + values[i] );
 69
 70      Connection conn = new OracleDriver().defaultConnection();
 71      ArrayDescriptor descriptor =
 72         ArrayDescriptor.createDescriptor( p_in.getSQLTypeName(), conn );
 73
 74      p_out[0] = new ARRAY( descriptor, conn, values );
 75
 76  }
 77
 78  }
 79  /

Java created.

SQL> set serveroutput on size 1000000
SQL> exec dbms_java.set_output( 1000000 )

PL/SQL procedure successfully completed.

SQL>
SQL> declare
  2      l_in strArray := strArray();
  3      l_out strArray := strArray();
  4  begin
  5      for i in 1 .. 5 loop
  6          l_in.extend;
  7          l_in(i) := 'Element ' || i;
  8      end loop;
  9
 10      demo_passing_pkg.pass( l_in, l_out );
 11      for i in 1 .. l_out.count loop
 12          dbms_output.put_line( 'l_out(' || i || ') = ' || l_out(i) );
 13      end loop;
 14  end;
 15  /
Array is of type      OPS$TKYTE.STRARRAY
Array is of type code 12
Array is of length    5
p_in[0] = Element 1
p_in[1] = Element 2
p_in[2] = Element 3
p_in[3] = Element 4
p_in[4] = Element 5
l_out(1) = Element 1
l_out(2) = Element 2
l_out(3) = Element 3
l_out(4) = Element 4
l_out(5) = Element 5

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:14:38.070

从 OUT 参数接收嵌套表的方式取决于表的嵌套方式 考虑简单的数组类型

对象类型

```
CREATE OR REPLACE
TYPE HR.TNAME 
AS
OBJECT( NO1 NUMBER,
NAME VARCHAR2(10)
); 
```

表类型

```
CREATE OR REPLACE
TYPE HR.ITYPE_CUSTOM
IS TABLE OF tname; 
```

程序

```
CREATE OR REPLACE PROCEDURE HR.p_schema_level_out(IN1 IN varchar2,p_det OUT itype_custom)
AS
lc_var itype_custom := itype_custom();
BEGIN
lc_var.extend;
lc_var(1) := TNAME(NO1 => 1,NAME => 'TRAIL1');
lc_var(1).no1 :=  1;
lc_var(1).name := 'qwe';
p_det:= lc_var;
END;
/ 
```

上述返回自定义数组类型的过程可以通过

```
try {

        stmt = con.createStatement();

        // -----------------------------------------------------
        // Call PL/SQL Procedure
        // -----------------------------------------------------

        String s1 = "begin p_schema_level_out(?,?); end;";
        cstmt = (OracleCallableStatement) con.prepareCall(s1);
        cstmt.setString(1, "something");
        cstmt.registerOutParameter(2, Types.ARRAY, "ITYPE_CUSTOM");
        cstmt.execute();

        Object[] data = (Object[]) ((Array) cstmt.getObject(2)).getArray();
        for (Object tmp : data) {
            STRUCT row = (STRUCT) tmp;

            for (Object attribute : row.getAttributes()) {
                System.out.println(attribute);

            }

            cstmt.close();
            stmt.close();

        }
    } catch (SQLException e) {

        e.printStackTrace();

    } 
```

这可以作为您如何接收表格类型的基础，如果您可以发布嵌套表格类型，我仍然可以帮助您完成

# python - 为什么 Python datetime.date 与它允许的输入格式不一致？这是 datetime.date 中的错误吗？

> ID：12060920
> 
> 赞同：0
> 
> 时间：2012-08-21T18:30:57.180
> 
> 标签：python

为什么使用 date(2012,08,01) & date(2012,09,01) 失败但 date(2012,01,01) 到 date(2012,07,01) 成功？

我正在使用 Python v.2.6.6

这是我控制台的复制粘贴

```
In [2]: from datetime import date

In [6]: date(2012,01,01)
Out[6]: datetime.date(2012, 1, 1)

In [7]: date(2012,02,01)
Out[7]: datetime.date(2012, 2, 1)

In [8]: date(2012,03,01)
Out[8]: datetime.date(2012, 3, 1)

In [9]: date(2012,04,01)
Out[9]: datetime.date(2012, 4, 1)

In [10]: date(2012,05,01)
Out[10]: datetime.date(2012, 5, 1)

In [11]: date(2012,06,01)
Out[11]: datetime.date(2012, 6, 1)

In [12]: date(2012,07,01)
Out[12]: datetime.date(2012, 7, 1) 
```

到目前为止，一切正常，然后在我尝试在 8 月 / 9 月做同样的事情时观看

```
In [13]: date(2012,08,01)
  File "<ipython-input-13-765ad867a574>", line 1
    date(2012,08,01)
               ^
SyntaxError: invalid token

In [14]: date(2012,09,01)
  File "<ipython-input-14-f150aaea4c6c>", line 1
    date(2012,09,01)
               ^
SyntaxError: invalid token 
```

有谁知道这是否是一个错误，是否已在不是 python 3.0 的更新版本的 python 中解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T18:32:29.033

以 为前缀的数字`0`表示 Python 中的八进制数（在 Python 3 之前）。`08`并且`09`不是有效的八进制整数。

# php - 检测 php file_get_contents 中的远程解析错误

> ID：12060922
> 
> 赞同：2
> 
> 时间：2012-08-21T18:31:02.967
> 
> 标签：php, remote-access

我的问题与[此](https://stackoverflow.com/questions/4131607)类似，但不完全是。

如果我这样做`$string = @file_get_contents('http://www.somesite.com/script.php');`并且在 script.php 中存在解析错误，`$string`则获取解析错误的值，而不是 bool false。错误不在本地站点上，而是在远程站点上。

我想我必须进行字符串比较来检查这种情况，但是是否有我应该查找的某些字符串的列表，比如`'<b>Parse error</b>:'`and `'<b>Warning</b>:'`？有没有更好的方法来检查远程脚本上的错误？

（我可以控制这两个域，以防您的建议有所不同。）

这是我放在远程服务器上的代码：

```
 if(!$_SERVER['QUERY_STRING'])
    {
      echo('Can you get me?');
    }
  else
    {
      foreach ($imnotanarray as $fail) //intentionally cause an error
        {
          echo $fail;
        }
    } 
```

这是来自本地服务器的代码

```
$success=file_get_contents('http://www.tecbrat.com/fgc_responder.php');
$success_header=$http_response_header[0];

$failure=file_get_contents('http://www.tecbrat.com/fgc_responder.php?do=fail');
$failure_header=$http_response_header[0];

$failure2=@file_get_contents('http://www.tecbrat.com/fgc_responder.phxp');
$failure2_header=$http_response_header[0];

echo 'Success is '.$success.'and the header is '.$success_header."<br><br>\n\n";
echo 'Failure is '.$failure.'and the header is '.$failure_header."<br><br>\n\n";
echo 'Another Failure is ';
var_dump($failure2);
echo ' and the header is '.$failure2_header; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:56:42.107

使用该输出，使用子字符串匹配搜索解析错误确实是您最好的选择。

如果你觉得这很不优雅——而且你有这种感觉是绝对正确的——处理这个问题的正确方法是添加一些错误处理并以更集成的方式表示解析错误，所以如果你的服务通常返回一个 XML 对象或者它返回一个包含错误数据的 XML 对象。

# python - 跨多个 setup.py 脚本共享代码的最佳方式？

> ID：12060925
> 
> 赞同：4
> 
> 时间：2012-08-21T18:31:16.580
> 
> 标签：python, setuptools

我有几个正在处理的包，我想在它们的 setup.py 脚本之间共享代码。有什么好的方法可以做到这一点，或者代码重复是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T19:40:32.667

通常`setup.py`是分发不同包的入口点。因此，很难在这些包之间共享代码。

如果你在你的 中使用[`setuptools`](http://pypi.python.org/pypi/setuptools)（或者它的 fork，[`distribute`](http://pypi.python.org/pypi/distribute/)）`setup.py`，你*可以*指定在安装你的包时必须安装的包`setup_requires`。

不幸的是，你`setup.py`的先被执行；解析该`setup_requires`行后，将在本地安装列出的额外软件包，但这对于您的需求可能为时已晚。

解决方法是在调用定义条目`Distribution`之前创建一个单独的对象：`setup``setup_requires`

```
import setuptools

setuptools.dist.Distribution(dict(setup_requires='yoursharedsetuppackage'))
# `setup_requires` is parsed and acted upon immediately; from here on out
# the yoursharedsetuppackage is installed and importable.

import yoursharedsetuppackage

setup(...) 
```

# python - 无法在 Python 中加载以前转储的大尺寸泡菜文件

> ID：12060932
> 
> 赞同：9
> 
> 时间：2012-08-21T18:32:11.880
> 
> 标签：python, numpy, networkx, pickle

我使用 cPickle 和协议版本 2 来转储一些计算结果。代码如下所示：

```
> f = open('foo.pck', 'w')
> cPickle.dump(var, f, protocol=2)
> f.close() 
```

变量 var 是一个长度为 2 的元组。var[0] 的类型是一个列表，而 var[1] 是一个 numpy.ndarray。

上述代码段成功生成了一个大文件（~1.7G）。

但是，当我尝试从 foo.pck 加载变量时，出现以下错误。

```
ValueError                                Traceback (most recent call last)
/home/user_account/tmp/<ipython-input-3-fd3ecce18dcd> in <module>()
----> 1 v = cPickle.load(f)
ValueError: buffer size does not match array size 
```

加载代码如下所示。

```
> f= open('foo.pck', 'r')
> v = cPickle.load(f) 
```

我还尝试使用 pickle（而不是 cPickle）来加载变量，但得到了类似的错误消息，如下所示。

```
ValueError                                Traceback (most recent call last)
/home/user_account/tmp/<ipython-input-3-aa6586c8e4bf> in <module>()
----> 1 v = pickle.load(f)

/usr/lib64/python2.6/pickle.pyc in load(file)
   1368 
   1369 def load(file):
-> 1370     return Unpickler(file).load()
   1371 
   1372 def loads(str):

/usr/lib64/python2.6/pickle.pyc in load(self)
    856             while 1:
    857                 key = read(1)
--> 858                 dispatch[key](self)
    859         except _Stop, stopinst:
    860             return stopinst.value

/usr/lib64/python2.6/pickle.pyc in load_build(self)
   1215         setstate = getattr(inst, "__setstate__", None)
   1216         if setstate:
-> 1217             setstate(state)
   1218             return
   1219         slotstate = None

ValueError: buffer size does not match array size 
```

我尝试将相同的代码段用于更小的数据，并且效果很好。所以我最好的猜测是我达到了pickle（或cPickle）的加载大小限制。但是，成功转储（具有大尺寸变量）但无法加载是很奇怪的。

如果这确实是加载大小限制问题，我应该如何绕过它？如果不是，问题的可能原因是什么？

任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:37:45.123

如何通过`numpy.save()`&保存和加载 numpy 数组`np.load()`？

您可以将腌制列表和 numpy 数组保存到同一个文件中：

```
import numpy as np
import cPickle
data = np.random.rand(50000000)
f = open('foo.pck', 'wb')
cPickle.dump([1,2,3], f, protocol=2)
np.save(f, data)
f.close() 
```

读取数据：

```
import cPickle
import numpy as np
f= open('foo.pck', 'rb')
v = cPickle.load(f)
data = np.load(f)
print data.shape, data 
```

# java - Java ResourceBundle 更改为默认语言

> ID：12060936
> 
> 赞同：1
> 
> 时间：2012-08-21T18:32:31.233
> 
> 标签：java, internationalization, resourcebundle

我在 Java 中创建了以下[ResourceBundle](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html)，它从正确的 MessegesBundle_en_GB.properties 文件中读取：

```
ResourceBundle labels = 
        ResourceBundle.getBundle("MessegesBundle",new Locale( "en", "GB"));
labels.getString("Test"); 
```

但是，当我尝试使用另一种语言（苏格兰盖尔语）时，它只是默认回到 en_GB

```
ResourceBundle labels = 
        ResourceBundle.getBundle("MessegesBundle",new Locale( "gd", "GB"));
system.out.println(labels.getLocale()); // returns en-GB
labels.getString("Test"); 
```

浏览可用区域设置列表`Locale.getAvailableLocales();`并没有出现“gd”。

这是否意味着我不能`ResourceBundle`用于 I18N 或者有没有办法添加盖尔语或强制`ResourceBundle`使用正确的属性文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:44:08.590

返回的语言环境`getAvailableLocales()`不是很重要，因为您可以像以前那样创建新的语言环境：`new Locale( "gd", "GB")`.

如[Locale](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html) java docs 中所述，locale 的主要目的是识别资源：资源包、数字格式等。标识 的字符串`Locale`甚至在创建时都没有经过验证。

我的猜测是您在类路径中没有可用的 MessegesBundle_gd_GB.properties 资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:44:33.913

服务器需要安装该字符集语言才能加载它，我想您可以在提供页面时“强制”它，但是您需要专门从用户那里获取信息作为分配该页面语言的请求。

# ruby-on-rails - `friendly_id` 不允许删除

> ID：12060940
> 
> 赞同：1
> 
> 时间：2012-08-21T18:32:50.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, crud, friendly-id

我正在使用[friendly_id](https://github.com/norman/friendly_id)使我的URL 对用户更友好，但是自从实施了gem，我的`destroy`操作就直接进入了`show`操作。我目前正在使用：

```
= link_to 'Delete', entry_path(e), :method => :delete, :confirm => 'Really really?' 
```

并且还尝试过：

```
= link_to 'Delete', entry_path(e.id), :method => :delete, :confirm => 'Really really?' 
```

第一个被路由到`show`操作，`entries_controller`第二个只给我这个错误：

```
Routing Error

No route matches {:action=>"edit", :controller=>"entries", :id=>nil} 
```

如果其他人一直在使用`friendly_id`，您是如何处理的`Destroy`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:30:36.770

您是否已将 ujs（例如`jquery-rails`或`jquery-ujs`）js lib 集成到页面中？因为`:method => :delete`创建了一个`data-method`属性，然后它的点击由不显眼的 rails js 库处理。如果链接没有被处理，它要么是一个简单的显示，要么是一个简单的编辑链接，而不是一个指向实际删除方法的链接。

# c# - 在设计时访问 UserControl 的子项

> ID：12060942
> 
> 赞同：0
> 
> 时间：2012-08-21T18:32:55.860
> 
> 标签：c#, xaml, windows-8, microsoft-metro, visual-studio-2012

Windows 8 样式应用程序（例如“Metro”）、Visual Studio 2012、XAML。

我有一个从 Canvas 派生的 UserControl。它有一个子元素 - 一个多边形，其数据绑定到一个属性（实现了 INotifyPropertyChanged）：

```
<Canvas x:Name="MyPolygon">
    <Polygon Points="{Binding ElementName=MyPolygon,Path=MyPoints}" ... />
</Canvas> 
```

如果我在 XAML 中的其他地方实例化该控件，并传入一个字符串，则该属性已设置并且 Polygon 在设计时和运行时都正确呈现：

```
<local:MyPolygon MyPoints="..." /> 
```

但是，更改该字符串中的值是乏味的。设计师更愿意收集一些在设计时可见但在运行时不可见的 UI 结（如椭圆），以便他们可以将它们拖到设计器中并让 Polygon 动态重建其几何形状：

```
<local:MyPolygon>
    <Ellipse Canvas.Left="204" Canvas.Top="57" ... />
    <Ellipse Canvas.Left="166" Canvas.Top="30" ... />
    ...
</local:MyPolygon> 
```

基本上我想将几何信息保留在（扩展的）.Children 中。这可能吗？

（可能有一些事件/构造函数，控件可以在其中检查其 .Children（在插入这些椭圆之后）、检索它们的坐标并构建 MyPoints。设计者必须触发该事件才能使几何图形在设计时可见）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T02:32:58.510

所以，我最终在我拥有椭圆的同一级别上创建了一个多边形。

```
<Polygon Points="{Binding ElementName=MyPoints,Converter={StaticResource PolygonConverter}}" ... />
<Canvas x:Name="MyPoins">
    <Ellipse Canvas.Left="228" Canvas.Top="69" ... />
    <Ellipse Canvas.Left="166" Canvas.Top="30" ... />
    ...
</Canvas> 
```

绑定转换器将对象的所有 .Children 的坐标转换为字符串。

这在设计时和运行时都有效。

不幸的是，必须在移动椭圆后重新构建项目，以便 VS 设计器刷新视图并获取更改，这使得设计过程远不如原本的直观。：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:29:26.140

你有没有看过这样的设计[数据](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh758320.aspx#displaying_data_in_the_designer)。

```
if (Windows.ApplicationModel.DesignMode.DesignModeEnabled)
{
    GetSampleData();
}
else GetRealData(); 
```

或者

```
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"

<CollectionViewSource
  x:Name="groupedItemsViewSource"
  Source="{Binding Groups}"
  IsSourceGrouped="true"
  ItemsPath="Items"
  d:Source="{Binding ItemGroups, 
    Source={d:DesignInstance Type=data:SampleDataSource, 
      IsDesignTimeCreatable=True}}"/> 
```

# mongodb - 使用 pymongo 进行 map-reduce 时出错

> ID：12060945
> 
> 赞同：0
> 
> 时间：2012-08-21T18:33:04.497
> 
> 标签：mongodb, mapreduce, pymongo

> pymongo.errors.OperationFailure：数据库断言失败，断言：'无法在 system.indexes 上创建索引'，断言代码：13143

当我尝试使用 map-reduce 从文档中检索所有键时，我看到了这个错误。我正在使用的代码类似于： [mapreduceforgettingkeys(link)](https://stackoverflow.com/questions/2997004/using-map-reduce-for-mapping-the-properties-in-a-collection) 需要注意的一件有趣的事情是，当我运行相同的代码时，我在另一台服务器上没有看到相同的错误。

这两个服务器之间的唯一区别是一个是休眠的（没有新数据被复制），另一个是大量数据被转储。

# expression - 语句中货币的正则表达式

> ID：12060949
> 
> 赞同：0
> 
> 时间：2012-08-21T18:33:15.230
> 
> 标签：expression

我想为 123.45 美元这样的货币创建一个 RE。它应该匹配 $123.4, $123.45 它不应该匹配 $123.456 或 123.45 我在这个站点找到了解决方案，其中一个是

^[$][0-9]+(.[0-9]{1,2})?$

预期的模式匹配 123.4 美元和 123.45 美元。但是当我将货币作为语句的一部分时，例如......“一张票的成本是 123.45 美元，而 2 的成本是 246.90 美元”现在该模式找不到任何匹配项。我认为这是因为 ^ 和 $ 分别是行首和行尾字符。

如何获得 2 场比赛的结果？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:41:44.007

尝试从您的 RE 中删除 ^ 和 $。这个符号告诉搜索字符串应该以 $ 开头并以数字结尾？而不是他们使用括号来选择一个组（）。

# android - Android：日期选择器奇怪的显示

> ID：12060950
> 
> 赞同：1
> 
> 时间：2012-08-21T18:33:20.177
> 
> 标签：android, eclipse, datepicker, actionbarsherlock

我正在使用 Eclipse 开发一个使用 datepicker 的 Android 表单。我也使用actionbarsherlock。它显示错误的东西。另一个问题是微调器不显示像Ñ这样的特殊字符并隐藏整个单词。

下面的图像和 XML。

[https://dl.dropbox.com/u/6955865/picker.png](https://dl.dropbox.com/u/6955865/picker.png)

这是我的 xml 布局代码。

```
<LinearLayout xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    tools:context=".BuscarTarea" >

    <Spinner
        android:id="@+id/spvina"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <Spinner
        android:id="@+id/sptarea"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <Spinner
        android:id="@+id/spproducto"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <DatePicker
        android:id="@+id/datePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/buscar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="onClick"
        android:text="Buscar" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:44:23.453

尝试使用日期选择器对话框而不是将选择器嵌入到您的活动/片段布局中。 [http://developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)

你如何为你的微调器提供数据。也许你读错了这个数据？

# regex - BlueDragon 7.1 中的正则表达式允许 $ 符号

> ID：12060951
> 
> 赞同：0
> 
> 时间：2012-08-21T18:33:20.987
> 
> 标签：regex, coldfusion, cfml, cfform, bluedragon

我正在使用 BlueDragon 的 cfform 验证：

```
<cfinput validateat="onServer" validate="regex" pattern="^[a-zA-Z0-9 ]+$"  name="COMPANYDBA" /> 
```

但是这种模式并没有产生正确的结果。美元符号出了点问题： **`^[a-zA-Z0-9 ]+$`**

**预期结果：**没有特殊字符

**实际结果：**没有特殊字符，除了它允许 $ 符号

为什么这会允许在字符串中使用美元符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:39:17.597

尝试分别使用`\A`and`\Z`而不是`^`and `$`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T23:11:30.540

一个老问题，但它被列为未回答，所以这里有一个（过长的）答案来阻止这种情况（无论如何，只要有人支持它）。

在 BD7 和 OpenBD 之间，cfform 的来源不太可能发生显着变化——因为现在几乎*没有人*推荐使用 cfform——所以这里是生成 HTML 的 OBD 代码：

> [http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fsrc%2Fcom%2Fnaryx%2Ftagfusion%2Fcfm%2Fcfform%2FcfAbstractFormTag.java](http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fsrc%2Fcom%2Fnaryx%2Ftagfusion%2Fcfm%2Fcfform%2FcfAbstractFormTag.java)

这段代码告诉我们的是，通过提供的属性，一个以后缀命名的隐藏表单字段与`_CFFORMREGEX`要测试的模式一起输出。
*（这当然不是真正的服务器端验证，尽管有什么`validateat="onserver"`建议，因此是不使用 cfform 的另一个原因）。*

提交后，通过 cfFormData.java 文件获取并使用该表单字段：

> [http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fsrc%2Fcom%2Fnaryx%2Ftagfusion%2Fcfm%2Fengine%2FcfFormData.java](http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fsrc%2Fcom%2Fnaryx%2Ftagfusion%2Fcfm%2Fengine%2FcfFormData.java)

如果您遵循它，最终会运行`com.nary.util.string.regexMatches`使用 Apache ORO 来检查它是否匹配的模式：

> [http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fsrc%2Fcom%2Fnary%2Futil%2Fstring.java](http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fsrc%2Fcom%2Fnary%2Futil%2Fstring.java)

使用 SINGLELINE_MASK 意味着将执行它们通常`^`的`$`内容开始/结束匹配（不是行的开始/结束），并且`.`包括换行符。

综上所述，我们可以明确指出，如果提供的模式是不被接受的，`^[a-zA-Z0-9 ]+$`那么`$`原始问题肯定比所揭示的要多。

当然，**与其担心所有这些**，最合适的解决方案是： **停止使用 cfform**。

进行正确的表单验证有很多更好的选择，请参阅 Charlie Arehart 的列表：[cf411.com/form](http://cf411.com/form)

# java - 使用 2 个堆栈进行队列，在 O(1) 中删除

> ID：12060952
> 
> 赞同：2
> 
> 时间：2012-08-21T18:33:21.717
> 
> 标签：java, algorithm, data-structures

我在 Java 中使用 2 Stacks 实现了一个队列，我遵循这个算法：

> **enQueue(x)**
> 将 x 推入 stack1
> 
> **deQueue()**
> 1) 如果两个堆栈都是空的，则错误。
> 2) 如果 stack2 为空而 stack1 不为空，则将 stack1 中的所有内容推送到 stack2。
> 3）从stack2中弹出元素并返回它。

现在，这里的问题是第*一个`deQueue()`*操作非常慢（因为它将所有内容传输到`stack2`）。我们可以以某种方式修改算法，使其`deQueue`始终为 O(1) 吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:04:58.600

当我们说`first deQueue() operation is very slow (since it transfers everything to stack2).`

我假设我们正在谈论这个

> 2) 如果 stack2 为空而 stack1 不为空，则将 stack1 中的所有内容推送到 stack2。

我们是否只是以相同的顺序将 stack1 中的所有内容转移到 stack2 中。这将是简单的赋值 ( `stack2=stack1;`)，因此是 O(1)。

或者，如果我们说我们需要从 stack1 中逐一弹出所有内容，然后添加到 stack2。我们基本上是在讨论反转一个列表（stack1），并分配给 stack2（我们知道，分配是 O(1)）。有多种很好的算法可以反转列表[http://www.codeproject.com/Articles/27742/How-To-Reverse-a-Linked-List-3-Different-Ways](http://www.codeproject.com/Articles/27742/How-To-Reverse-a-Linked-List-3-Different-Ways)。

如果您使用 Java（根据标签），您可以简单地使用`Collections.reverse(arrayList);`来反转列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:41:23.917

我会咬：为什么不使用双向链表？这应该是 O(1) 推送和 O(1) 弹出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:38:28.523

您可以交换两个堆栈。

去队列（）

1.  如果两个堆栈都是空的，则错误。
2.  如果 stack2 为空，而 stack1 不为空，则交换两个堆栈。
3.  从 stack2 中弹出元素并返回它。

使用交换，操作总是 O(1)

如果您需要一个 FIFO 队列，请使用两个队列。仅当您需要 LIFO 行为时才使用堆栈。

如果是这种情况，使用一个队列或两个队列没有区别，所以你也可以只使用一个队列。如果您使用线程，请使用包装队列和线程池的 ExecutorService。

# c# - 推荐使用哪种 C# 通用结构将 PHP 数组转换为 C#？

> ID：12060954
> 
> 赞同：-1
> 
> 时间：2012-08-21T18:33:46.007
> 
> 标签：c#, php, arrays

我们正在使用 PHP Web 服务。我们已经使用 Visual Studio 中的添加 Web 服务引用生成了 WSDL。

getOurRequest 服务方法需要一个“对象”类型的输入参数。

此方法的 PHP 文档在 PHP 中声明了以下数组。

```
$getOurRequest =>array( 
    `aaaa`=> ‘1111’,
    `bbbb`=> ‘2222’,
    `ccccArray`=> array(
            ‘cccc3333’
                ,‘cccc4444‘
),
    `ddddArray`=>array(
            'dddd5555'
            ,'dddd6666'
            )
); 
```

我们如何将其转换为 C# 以用于调用 PHP Web 服务？

任何有助于解决方案或一般可序列化结构的想法都希望传递给 Web 服务，我们将不胜感激。

@quetzalcoatl 感谢您提供 var c# 声明示例。这很有帮助，但它不会通过服务调用进行序列化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:54:31.810

直接回答您的问题，C# 中最接近的可能结构是 a `Dictionary`，或者更确切地说，`Dictionary<string, object>`

```
$getOurRequest => array( 
  `aaaa`=> ‘1111’,
  `bbbb`=> ‘2222’,
  `ccccArray`=> array( ‘cccc3333’, ‘cccc4444‘ ),
  `ddddArray`=>array( 'dddd5555','dddd6666' )
); 
```

我其实不懂符号`$getOurRequest => array(...);`。这里不应该是普通的 = 而不是 => 吗？

无论哪种方式，在 C# 中类似的变量声明将是：

```
var getOurRequest = new Dictionary<string, object>
{ 
  {"aaaa", "1111"},
  {"bbbb", "2222"},
  {"ccccArray", new string[] { "cccc3333", "cccc4444" } },
  {"ddddArray", new string[] { "dddd5555", "dddd6666" } }
); 
```

但是，我认为这**不会解决**您发送 HTTP 请求的问题。为此，您将需要`HttpWebRequest`对象，就像 Jensen 回答的那样，并且需要提供来自上面的 hashmap/array/dictionary 的所有“键”和“值”作为查询参数。

@SOAP：如果您可以为 发出 WSDL `web service`，那么 VisualStudio/C#/svcutil 可以生成一系列代理类，这将大大简化对 Web 服务的调用。如果你能做到，请记下，我们会给你链接到如何做到这一点..或者只是在“C#调用网络服务”上搜索谷歌..

出于好奇 - 如果您不了解 C# 并且非常了解 PHP，为什么要询问 C# 代码？

编辑：
在评论中，您谈到了“对象参数”。在 PHP 或 JS 中，对象和键控数组之间有一点区别。在 C# 中，这是一个很大的区别，因为“字典”或任何其他哈希映射最有可能被序列化为“一系列键和值” - 而不是作为具有字段/键和值的对象。如果您确实需要传递“对象”，您实际上需要有一个类和对象实例。

```
//[DataContract] - pick one of them
//[Serializable] - they are required, but without seeing your code, it is hard to tell which one
public class MyWebServiceParameter
{
    public string aaaa {get;set;} // those must be properties, not fields
    public string bbbb {get;set;}
    public string[] ccccArray {get;set;}
    public string[] ddddArray {get;set;}
}

....
var tmp = new MyWebServiceParameter
{
     aaaa = "1111", bbbb = "2222",
     ccccArray = new string[] { "....", "...." },
     ddddArray = new string[] { "....", "...." }
}; 
```

只需确保取消注释“属性”之一 - datacontract/serializable。它们都告诉 C# 运行时允许对此类进行序列化，但它们中的每一个都来自不同的库，或者更确切地说，来自 .Net 中的网络方法时代。一般来说，它们中的每一个都可以，但是根据从 WSDL 生成的方式/内容、.Net 以及您正在使用的额外库，其中一个会更好。如果您使用的是“最先进的”.Net，请选择 DataContract。

现在，你说你有 WSDL？因此，右键单击您的项目并选择“添加服务引用”或“添加 Web 引用”，然后在弹出对话框中输入您的 WSDL 的 URL。创建者应该能够解析它，它将为该 Web 服务生成一系列支持类。假设他们被称为“MyPHPService”，它定义了一个名为“TheServiceMethodName”的操作：

```
var serv = new MyPHPService();
serv.TheServiceMethodName( tmp ); // just pass the object you have created earlier. Or a dictionary, or other.. 
```

如果您的 WSDL 没有问题并且创建者理解正确，那么对于 SOAP 服务的调用只需要这两行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:44:18.170

我不知道你是如何调用你的 PHP 服务的，所以我的回答是基于个人项目的。

我对创建 SOAP 服务之类的东西没有兴趣，因为 C# 不是我与之交流的唯一语言，我想让事情保持简单。只需使用 an`HttpWebRequest`调用网络服务器并分析页面输出。

所以，我使用了 JSON。[James Newton-King 有一个名为Json.NET](http://json.codeplex.com/)的强大库。它既可以将对象转换为 JSON 也可以从 JSON 转换。

在 PHP 方面，这些函数内置在 PHP 解释器中：[json_encode](http://php.net/manual/en/function.json-encode.php)和[json_decode](http://www.php.net/manual/en/function.json-decode.php)。

# java - 在运行时使用按钮更改 JPanel

> ID：12060956
> 
> 赞同：2
> 
> 时间：2012-08-21T18:34:08.923
> 
> 标签：java, swing, runtime, jpanel, jbutton

您好，我有一个以这种方式制作的主要布局：

* * *

```
 |         |
Main pane   |Menu pane|
            |         | 
```

现在，菜单窗格仅由按钮组成：单击一个按钮将主面板与另一个面板切换。点击事件是这样产生的：

```
public void actionPerformed(ActionEvent evt){
     mainPanel = new MyNewPanel();
     this.revalidate();
} 
```

但是，由于某种原因，主面板没有改变！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T18:40:04.573

您没有设置容器的主要组件。您需要添加新面板并调用`validate()`该容器。

请注意，根据您容器的布局，您可能需要先删除当前可见的组件。

[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)可以为您管理所有这些。

# javascript - 在外部 Javascript Asp.Net 中调用函数

> ID：12060961
> 
> 赞同：0
> 
> 时间：2012-08-21T18:34:36.163
> 
> 标签：javascript, asp.net

我无法从我的 asp.net 页面调用外部 javascript 函数

我有一个名为 user.js 的文件，我有这个..

```
 UseThisNewThing:function () {
 alert("In Function External");
 } 
```

我的 asp.net 页面在 head 标签中引用了这个文件。

```
<script src="Js/User.js" type="text/javascript"></script> 
```

现在我想通过 jquery 调用这个函数，所以在后面的代码中我有这个

```
 if (page != null && !string.IsNullOrWhiteSpace(scriptName) && !string.IsNullOrWhiteSpace(scriptCommands))
            {
                Type parentType = page.GetType();

                // Check to see if the include script exists already.
                if (!page.ClientScript.IsStartupScriptRegistered(parentType, scriptName))
                {
                    page.ClientScript.RegisterStartupScript(parentType, scriptName,
                        "<script type=\"text/javascript\">\njQuery(document).ready(function () {" + scriptCommands + "});</script>"); ;
                }
            } 
```

其中 parentType 是 this.Page，`scriptName="InitPage",`并且

```
scriptCommands=@"User.UseThisNewThing();" 
```

我必须在这个连接中丢失一些东西，因为我无法在页面加载时触发警报

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:41:16.757

如果用户是类的名称，那么您的脚本命令将是

```
scriptCommands=@"new User().UseThisNewThing();" 
```

您不能在不创建类实例的情况下直接调用该函数

# model-view-controller - MVC：我应该把这个数据访问逻辑放在哪里？

> ID：12060965
> 
> 赞同：6
> 
> 时间：2012-08-21T18:34:51.210
> 
> 标签：model-view-controller

我一直试图在家里重建个人 Web 应用程序时遵守对 MVC 的严格解释，但我遇到了一些问题。

该应用程序是一个财务跟踪应用程序。我被困在第一页，这只是本月银行账户交易的列表。交易清单是我的模型。在这一点上，控制器和视图很容易想象。

但是，我在页面顶部也有两个按钮。它们是箭头，一个对应上个月，另一个对应下个月的交易清单。如果上个月/下个月没有交易，我不希望启用这些按钮，因此我需要与数据库交谈以确定每个按钮是否应该实际链接到某个地方。

从我读过的大部分内容来看，尽可能将数据库访问封装在模型中，在控制器和视图中几乎没有数据库访问。

然而，这些按钮本质上需要询问数据库，“下个月/上个月是否有任何交易？” 答案将确定他们的链接是否被禁用，以及将用户发送到哪里。

严格来说，将它们的逻辑放入事务列表模型似乎并不合适，因为事务是否存在*于请求范围*之外，超出了事务列表模型的关注范围。

我想我还可以制作另一个模型，该模型将对应于存在交易的所有年月组合。然后我可以将此模型和事务列表传递给正确的视图。

或者我应该偏离模型外的无数据库访问范式，而只是将一些快速的数据库查询扔到视图中（因为结果本质上是一个 UI 问题，使导航更容易）？

对于这个概念问题，你们怎么看？

顺便说一句，我没有使用任何框架。这是一个宠物项目，旨在让我更熟悉 MVC 模式的具体细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:28:41.550

> ...我是否应该偏离模型外的无数据库访问范式，而只是将一些快速的数据库查询扔到视图中...

简短的回答是：**不**。如果你真的对学习 MVC 和更好的编码感兴趣，那么*“仅仅因为”*走捷径是一个非常糟糕的主意。领域逻辑分离是 MVC 的一个基本概念，违反它本质上就是从 MVC 转移到由糟糕的代码和“MVC 框架”主导的领域。如果您想了解“MVC 的基本要素”，您必须了解基本要素是关注点分离之类的东西，它们非常重要。

您问题中的很多文字都提出了一些关于模型应该是什么的混合想法，因此我将把您重定向到有关 MVC 模型[的最相关的答案。](https://stackoverflow.com/questions/5863870/how-should-a-model-be-structured-in-mvc/5864000#5864000)该答案包含您想了解的有关模型概念的所有信息。总结其中最重要的概念，**模型不是一个类，它是一个层**。模型层有许多组件，它们都做自己的事情，这为您留下了一个可测试、可扩展、语义和逻辑的领域逻辑层。

请记住要小心：关于 MVC 的错误信息比可靠信息要多得多。学习正确的 MVC 可以做的最糟糕的事情是查看一个声称是 MVC 的框架。

*编辑：我在响应时假设语言是 PHP，所以我的一些回答可能反映了这个假设。然而，这些概念几乎适用于所有语言*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:54:12.483

> 该应用程序是一个财务跟踪应用程序。我被困在第一页，这只是本月银行账户交易的列表。**交易清单是我的模型。**在这一点上，控制器和视图很容易想象。

您网页上的所有内容都归类在“查看”域中。“列表”是一个视觉对象。

对于 Web 应用程序/页面，模型存在于您的服务器上，在您的数据库中。网页上存在的所有内容（按钮、表单、列表框等）都是您的查看域。

> 从我读过的大部分内容来看，尽可能将数据库访问封装在模型中，在控制器和视图中几乎没有数据库访问。

View 对象传统上直接与您的 Model 对象对话。这意味着您必须为您的视图对象提供一种与数据库对话的方式。

一个例子，

*   http//server/transactions（获取所有交易）
*   http//server/transactions?from=x （从 x 获取交易）
*   http//server/transactions?from=x&to=y (获取从x到y的交易)

可以通过您的视图成为您的模型的接口。

# rspec - 如何使用 Rspec 和 Capybara 为外部链接创建测试？

> ID：12060968
> 
> 赞同：4
> 
> 时间：2012-08-21T18:34:56.207
> 
> 标签：rspec, capybara, rspec2, rspec-rails

我有一个 Ruby on Rails 3.2.6 应用程序，我使用如下代码为应用程序中的链接编写了测试：

```
visit about_path
click_link "Frequently Asked Questions (FAQ)"
page.should have_selector 'title', text: full_title('Frequently Asked Questions (FAQ)') 
```

我在整个应用程序中都有链接，人们可以在 Twitter 和 Facebook 上关注我们。当他们点击这些链接时，他们会在新窗口中打开。我想验证当他们单击链接时，他们将转到正确的页面。

我从 Amazon 购买了 The Rspec Book，因为我还在学习测试驱动开发、Rspec 和 Capybara。我检查了这本书的几个部分，但找不到任何解决这个问题的信息。

[http://www.amazon.com/The-RSpec-Book-Behaviour-Development/dp/1934356379](https://rads.stackoverflow.com/amzn/click/com/1934356379)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:03:47.680

如果您想检查自己的代码（生成的页面包含正确的链接） - 然后测试相关`href`链接的属性。像这样的东西：

```
href = "http://www.amazon.com/The-RSpec-Book-Behaviour-Development/dp/1934356379"
page.should have_selector "a[href='#{href}']", text: "The Rspec Book" 
```

如果您想检查 url 本身（您是否正确复制或该 url 仍然指向正确的页面） - 那么这里是相关的 Capybara 文档：[调用远程服务器](https://github.com/jnicklas/capybara#calling-remote-servers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-01T10:45:40.980

默认情况下，Capybara 使用 :rack_test 驱动程序，该驱动程序速度快但有限：它不支持 JavaScript，也无法访问 Rack 应用程序之外的 HTTP 资源，例如远程 API 和 OAuth 服务。要绕过这些限制，您可以为您的功能设置不同的默认驱动程序。例如，如果您希望在 Selenium 中运行所有内容，您可以这样做：

> Capybara.default_driver = :硒

[https://github.com/jnicklas/capybara](https://github.com/jnicklas/capybara)

# delphi - Gnostice PDFToolKit vcl - 填写数字签名表单字段

> ID：12060969
> 
> 赞同：0
> 
> 时间：2012-08-21T18:34:59.267
> 
> 标签：delphi, pdf, digital-signature, vcl

我们目前正在研究 Gnostice 产品，该产品提供了将数字签名填充到空的电子签名 pdf 表单字段的功能。

我们使用数字签名演示来测试使用我们的 PDF 表单的功能，但我们从输出中得到的只是空白签名表单。签名的属性表明它已正确签名，但在表单上是空白的。我们想知道是什么原因造成的。

此外，我们的 PDF 表单有 3 个数字签名表单域。其中2个由我们的客户填写，但第3个需要我们签字。通过数字签名演示处理的 2 个有效签名的电子签名，它们变得无效。我们也想知道是什么原因造成的。

我们需要这两个功能，因为我们每个月要处理数千个 PDF。

我们的IDE是Delphi 7，windows xp 32位，使用PDFToolKit VCL v4.0.1.145

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:47:44.810

似乎您已经使用添加签名选项填写了 PDF。您可以使用“填写空白签名字段”选项来填写已经存在的空白签名字段。

# javascript - 将链接显示为 contenteditable div 中的链接

> ID：12060970
> 
> 赞同：0
> 
> 时间：2012-08-21T18:35:05.563
> 
> 标签：javascript, html, contenteditable

我正在使用 js/jquery 在内容可编辑的 div 中进行查找和替换。我想替换`#hath`为`<a href="#" id="pid:00000" contenteditable="false">Hathaway</a>`

[http://jsfiddle.net/atlchris/VSJ6E/](http://jsfiddle.net/atlchris/VSJ6E/)

查找和替换所有工作都很好，但是如何使我插入的链接处于活动状态（可点击）而不是实际标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:23:44.907

代替

```
$('#field').text(newText); 
```

到：

```
$('#field').html(newText); 
```

[http://jsfiddle.net/ichr/u75hN/1/](http://jsfiddle.net/ichr/u75hN/1/)

# javascript - 如何将 4 个下拉列表选择保存到 cookie，并在 cookie 存在时设置 drop

> ID：12060976
> 
> 赞同：0
> 
> 时间：2012-08-21T18:35:30.707
> 
> 标签：javascript, jquery

所以我正在使用 jQuery 并设置了 jquery cookie 插件。

我的页面上有 4 个下拉列表，我想将用户的选择保存在 cookie 中，所以当他们返回页面时，我会自动预先选择他们之前的选择。

我在所有下拉列表“ddl-cookie”中添加了一个类，我只是在想是否可以使用该类以某种方式循环遍历所有下拉列表，并保存选择并在用户返回时循环设置选择到页面。

```
$(".ddl-cookie").each(function() {

}); 
```

似乎给定一个 cookie 名称，我可以在 cookie 中保存一个键/值。

所以我猜我这样做的唯一方法是使用逗号分隔的下拉列表名称和值（选择值）列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:48:54.530

你是对的。Cookie 旨在存储单个数据，因此处理此问题的最常见方法是将数据序列化为易于检索的格式。该格式取决于您，但您可能会使用以下内容：

```
field_1=value1&field_2=value&... 
```

您可能还想对这些数据进行编码——请记住，cookie 是作为请求标头的一部分传输的。伪代码会是这样的：

```
// Store the data, using your own defined methods
data = serialize_data(data);
data = encode_data(data);
cookie = data;

// Retrieve the data using your own defined methods
data = cookie;
data = unencode_data(data)
data = deserialize_data(data) 
```

# php - 在php中添加时间列表

> ID：12060979
> 
> 赞同：-1
> 
> 时间：2012-08-21T18:35:42.037
> 
> 标签：php, time

我正在做一些事情，我需要以以下格式添加时间列表 mm:ss 所以 3:10 将是 3 分 10 秒。

那么，例如，您将如何在 php 中进行以下总和？

```
2:10 + 3:15 + 6:59 + 2:22 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:46:10.070

使用以下代码：

```
$tarr = array('2:10', '3:15','6:59','2:22');
echo sum_the_time($tarr);  

function sum_the_time($times) {
  $seconds = 0;
  foreach ($times as $time)
  {
    list($hour,$minute) = explode(':', $time);
    $seconds += $hour*3600;
    $seconds += $minute*60;
  //  $seconds += $second;
  }
  $hours = floor($seconds/3600);
  $seconds -= $hours*3600;
  $minutes  = floor($seconds/60);
  $seconds -= $minutes*60;
  // return "{$hours}:{$minutes}:{$seconds}";
  return sprintf('%02d:%02d:%02d', $hours, $minutes, $seconds); 
} 
```

这是演示：[http ://codepad.org/dJBY78wZ](http://codepad.org/dJBY78wZ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:07:55.007

纯娱乐 ：）

```
function sumTime($times) {
    $min = $sec = 0;
    foreach($times as $time) {
        list($cmin, $csec) = explode(':', $time);
        $min += $cmin;
        $sec += $csec;
    }
    return sprintf('%02d:%02d', $min + floor($sec/60), $sec % 60);
} 
```

[http://viper-7.com/txkHAs](http://viper-7.com/txkHAs)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:11:17.717

```
<?php

function s($str) {
  list($minutes,$seconds) = explode(':',$str);
  return $minutes * 60 + $seconds;
}    
function ms($seconds) {
    return sprintf('%02d:%02d', $seconds/60, $seconds%60);
}    

$seconds = s('2:10') + s('3:15') + s('6:59') + s('2:22');    
echo ms($seconds); 
```

[http://codepad.viper-7.com/BUkRRM](http://codepad.viper-7.com/BUkRRM)

# coldfusion - 使用 CFHTTP 时出错

> ID：12060984
> 
> 赞同：3
> 
> 时间：2012-08-21T18:36:02.000
> 
> 标签：coldfusion, cfhttp, openbd

我已经使用 CFML 在 openBD 上构建了一个应用程序。在应用程序中，我使用 CFHTTP，如下所示：

```
<cfcomponent output="false">
<cfprocessingdirective pageencoding="utf-8">
<cfset setEncoding("URL", "utf-8")>

  <cffunction name="search" access="remote" returnType="any" returnFormat="plain">        
      <cfargument name="q" type="string" default="" required="yes">       
      <cfargument name="rows" type="string" default="&rows=120" required="yes">   
      <cfargument name="score" type="string" default="&sort=score%20desc" required="yes">
      <cfargument name="highlight" type="string" default="&hl=true" required="yes">      
      <cfargument name="json" type="string" default="&wt=json" required="yes">
      <cfargument name="phrasehighlighter" type="string" default="&hl.usePhraseHighlighter=true" required="yes">
      <cfargument name="filtr" type="string" default="&fq=model:*" required="yes">
      <cfargument name="callbackP" type="string" required="false">

      <cfset theUrl = 'http://localhost:8090/solr/ktimatologio/select/?hl.requireFieldMatch=true&hl.fl=*&q=' & #Arguments.q# & #ARGUMENTS.rows# & #ARGUMENTS.score# & #ARGUMENTS.highlight# & #ARGUMENTS.json# & #ARGUMENTS.phrasehighlighter#>

      <cfhttp url= "#theUrl#"  result="rs"></cfhttp>
…………………
…………………
…………………
…………………
</cfcomponent> 
```

当我运行它时，我收到错误：**'Failed to set URL: Invalid query'**。

我他妈卡住了！这个错误是什么意思？我认为 Adob​​e 的 CFML 引擎工作正常，但我不确定。我的“编程”箭袋用完了箭头！我需要在 openBD 上进行这项工作。

尊重地，

汤姆

希腊

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:53:28.583

您应该有一个`method`参数（`GET`或者`POST`，并且您应该删除端口。将端口作为`port`属性添加到标签中，如下所示：

```
<cfset theUrl = 'http://localhost:8090/solr/ktimatologio...' />
<cfhttp method="get" url="#theURL#" port="8090" result="rs> 
```

您最好将所有这些查询字符串值添加为`cfhttpparam`标签，而不是将它们附加到您的 URL 上，如下所示：

```
<cfset theUrl = 'http://localhost/solr/ktimatologio/select/>
<cfhttp method="get" url="#theURL#" port="8090" result="rs>
    <cfhttpparam type="URL" name="q" value="#Arguments.q#" />
    <cfhttpparam type="URL" name="wt" value="#Arguments.JSON" />
    .... more params ....
</cfhttp> 
```

我还*强烈*建议您从参数中删除查询字符串名称。如果您决定要更改您的实现，那么您将遇到麻烦......只需接受您要为每个查询字符串值提供的值，而不是值本身的名称。

# jquery-mobile - 使用 pushState/replaceState 更改 jQuery-Mobile 中的 url

> ID：12060990
> 
> 赞同：1
> 
> 时间：2012-08-21T18:36:26.540
> 
> 标签：jquery-mobile, pushstate

我想动态更改我的 jQM 页面的 URL（当用户执行某些操作时）以修改查询字符串。使用`history.pushState`工作正常，但是当 jQM 尝试向 URL 添加哈希时，例如导航到对话框时，事情不会按预期工作：URL 恢复到其原始值，并且 jQM 将哈希附加到那个（不是提到当我尝试关闭对话框时发生错误）。

我查看了 jQuery Mobile 文档，据我了解，页面的原始 URL 存储在元素的`data-url`属性中。`data-role="page"`因此，每当我需要更改 URL 时，我也尝试对其进行修改，但是当打开对话框时，它仍会恢复为原始 URL。

检查此 JS Bin 以获取示例：http: [//jsbin.com/egunif/5/edit](http://jsbin.com/egunif/5/edit)

单击“对话框”按钮时，URL 会更改（连同 data-url 属性），然后打开对话框。您可以看到 url`egunif/hashtest`在 jQM 将其更改为 之前短暂更改为`egunif/5#&ui-state=dialog`.

所以似乎原始 URL 存储在其他地方，问题是在哪里？是否可以更改此 URL，以便在 jQM 对其进行哈希更改时不会发生冲突？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:02:58.520

我最终所做的只是在我将页面更改为对话框（在`pagebeforechange`处理程序中）时将 url 设置回其原始值，然后在返回页面（在处理程序中）时将其重新替换为新值`pagechange`。

由于空的哈希值（可能与[此问题](https://github.com/jquery/jquery-mobile/issues/4595)有关），我仍然在浏览器的调试控制台中收到错误，但它不会影响网站的功能，所以我现在将其保留。不过，我仍然愿意接受更好的建议！

**更新：**

在 jQM 的 1.2.0 最终版本中，引入了弹出窗口，以及通过设置`data-history="false"`弹出窗口来禁用哈希更改的选项。通过用弹出窗口替换我的所有对话框，我可以操纵 url 而不必担心与 jQM 冲突。

# c# - 如何解决复杂计算中的最后一个“问”以符合“告诉！不要问！”？

> ID：12060993
> 
> 赞同：1
> 
> 时间：2012-08-21T18:36:33.930
> 
> 标签：c#, oop, tell-dont-ask

今天我在想“告诉！不要问！” 并尝试使用此代码。

接口：

```
interface IValidationContext
{
  void AddMessage(string text);   
  bool IsValid { set; }
}

interface IValidation
{
  void ValidateInput(Input input, IValidationContext context); 
  void ValidateOutput(Output output, IValidationContext context); 
}

interface ICalculator
{
  Output Calculate(Input input);
} 
```

实现：

```
class CalculationService
{
  private readonly ICalulator _calculator;
  private readonly IValidation _validation;

  public CalculationService(ICalculator calculator, IValidation validation)
  {
    _calculator = calculator;
    _validation = validation;
  }

  public Output Calculate(Input input)
  {
     var context = new CalculationContext();
     _validation.ValidateInput(input, context);

     if (context.IsValid)
     {
        var output = _calculator.Calculate(input);
        _validation.ValidateOutput(output, context);
        return output
     }
     return null;
  }
}

class CalculationContext : IValidationContext
{
  public CalculationContext()
  {
    Messages = new List<string>();
  }

  public IList<string> Messages { get; private set; }

  public void AddMessage(string text)
  {
    Messages.Add(text);
  }

  public bool IsValid { set; get; }
} 
```

我知道并不总是可能符合设计原则。但最后我坚持使用这段代码，我问一个对象：

```
 if (context.IsValid)
 {
   var output = _calculator.Calculate(input);
   _validation.ValidateOutput(output, context);
 } 
```

是否有可能解决它是否**实用**？

**编辑1：**
如果我修改我的`IValidationContext`并重命名它：

```
interface ICalculationContext
{
   void AddMessage(string text);   
   Output Calculate(ICalculator calculator, Input input);
   bool IsValid { set; }
} 
```

不需要询问上下文：

```
public Output Calculate(Input input)
{
  _validation.ValidateInput(input, context);        
  var output = context.Calculate(_calculator, input);
  _validation.ValidateOutput(output, context);
  return output;
} 
```

现在上下文负责根据其内部状态调用计算。……感觉不对……

**编辑2：**
我读了一篇关于“告诉！不要问！”的小文章。它指出：询问一个对象的内部状态，然后根据该状态告诉该对象一些事情，这将违反“告诉！不要问！” 但是可以告诉另一个对象一些事情。这适用于这里吗？

顺便提一句。`ValidateInput`为和引入一个布尔值有效结果`ValidateOutput`。可以将代码更改为此，这很好，没有人被“询问”一些东西：

```
public Output Calculate(Input input)
{
  var isValid = _validation.ValidateInput(input, context);

  if (isValid)
  {
    var output = _calculator.Calculate(input);
    _validation.ValidateOutput(output, context);
    return output
  }
  return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:41:40.143

这条线是问题的根源

```
var context = new CalculationContext(); 
```

您应该将其注入`CalculationContext`到，`CalculationService`以便您可以在课堂外审问它。该`Calculate`方法*告诉*验证器验证输入和输出。 *在这种情况下询问*将是这样的代码：

```
public Output Calculate(Input input)
{
   var validator = _context.Validator;
   if (validator.IsInputValid(input)) {
       // ... snip ...
   }
} 
```

在这里，我们询问验证器特定输入是否有效，而不是告诉它验证某些内容。此外，我们限制自己使用对象`IsValid`上的 getter 。`IValidationContext`这是一个有点模糊的情况，因为访问`_context.Validator`可以被视为违反了德墨忒耳法则，但是这个属性是在接口中定义的，并且只返回一个接口，所以我们不耦合到这些类的任何具体实现。

这是一个建议，假设对接口进行以下修改

```
interface IValidationContext
{
    void AddMessage(string text); 
    IValidation Validator { get; }
    bool IsValid { get; }
}

interface IValidation
{
    void ValidateInput(Input input); 
    void ValidateOutput(Output output); 
}

interface ICalculator
{
    Output Calculate(Input input);
}

class CalculationService
{
    private readonly ICalulator _calculator;
    private readonly IValidationContext _context;

    public CalculationService(ICalculator calculator, IValidationContext context)
    {
      _calculator = calculator;
      _context = context;
    }

    public Output Calculate(Input input)
    {
       _context.Validator.ValidateInput(input);

       if (_context.IsValid)
       {
          var output = _calculator.Calculate(input);
          _context.Validator.ValidateOutput(output);

          return output;
       }
       return null;
    }
} 
```