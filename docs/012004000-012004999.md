# StackOverflow 问答 12004000-12004999

# mysql - mysql加入逗号分隔值

> ID：12004003
> 
> 赞同：0
> 
> 时间：2012-08-17T10:21:58.443
> 
> 标签：mysql, join

我有一张桌子：

```
horse
    ->id
    ->course
    ->date 
```

另一个：

```
course
    ->title
    ->trackstyle 
```

还有第三个

```
trackstyle
    ->id
    ->style 
```

课程的样式可以有多种，所以我想我会创建一个字段并保存用逗号分隔的值。

IE：

```
trackstyle
id:1
style:galloping

id:2
style:flat

course
title:ascot
trackstyle:1,2    (as it's galloping and flat)

title=beverley
trackstyle:1      (as it's just flat) 
```

现在，我很难构建一个查询所有三个表的请求......

这是建立我的数据库的正确方法吗？或者我应该在我的课程表中添加一个新列，我将在其中将 trackstyle 设置为“hard”：

```
course
title: ascot
trackstyle: galloping, flat

title: beverley
trackstyle: flat 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:32:13.287

不，这不是构建数据库的好方法。相反，您必须执行以下操作

```
course
    ->title

trackstyle
    ->id
    ->style 
```

和一个连接表

```
 course_trackstyles
       ->course_id
       ->trackstyle_id 
```

您的查询将类似于以下内容

```
SELECT c.title, GROUP_CONCAT(t.style) 
FROM course c JOIN course_trackstyles ct ON ct.course_id = c.id
              JOIN trackstyles t ON ct.trackstyle_id = t.id
GROUP BY c.title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:32:22.637

这是一对多的关系，因为一门课程可以有多种曲目风格，因此：

```
course
title: ascot
trackstyle: 1
title: ascot
trackstyle: 2
title: beverley
trackstyle: 2

trackstyle
id: 1
style: galloping
id: 2
style: flat 
```

# php - 使用php将.net创建的二进制数据转换为字符串

> ID：12004020
> 
> 赞同：1
> 
> 时间：2012-08-17T10:23:05.020
> 
> 标签：php, .net

我有一个扩展名为 .log 的文件。他们使用此代码将日期转换为字节并将其写入文件。

```
System.Buffer.BlockCopy(BitConverter.GetBytes(this.EventDate), 0, data, 0, 8); 
```

我需要使用 PHP 从字节中检索日期。

# c# - 字符串实习

> ID：12004022
> 
> 赞同：11
> 
> 时间：2012-08-17T10:23:11.703
> 
> 标签：c#, .net, string

在下面的代码中，我正在检查对象引用的相等性。

```
string x = "Some Text";
string y = "Some Other Text";
string z = "Some Text";

Console.WriteLine(object.ReferenceEquals(x, y)); // False
Console.WriteLine(object.ReferenceEquals(x, z)); // True
Console.WriteLine(object.ReferenceEquals(y, z)); // False

y = "Some Text";

Console.WriteLine(object.ReferenceEquals(x, y)); // True
Console.WriteLine(object.ReferenceEquals(x, z)); // True
Console.WriteLine(object.ReferenceEquals(y, z)); // True 
```

这里：

*   `x`并且`z`指代同一个对象；我可以说那`x`是实习生并`z`使用了 taht 版本。好吧，我不确定这一点；请纠正我，如果我错了。
*   `y`我通过赋予它与 x 相同的值来更改它的值。我以为它会在这里创建一个新对象；但我错了，它使用了相同的参考。

我的问题是：

*   是否对我使用的每个字符串都`.net`使用[字符串实习生？](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)
*   如果是这样，是不是会影响性能？
*   如果不是，在上面的例子中引用是如何变得相同的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T10:25:41.230

是的，编译器中的常量字符串表达式用 处理`ldstr`，这保证了实习（通过[MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldstr.aspx)）：

> 公共语言基础结构 (CLI) 保证引用两个具有相同字符序列的元数据标记的两个 ldstr 指令的结果返回完全相同的字符串对象（称为“字符串实习”的过程）。

这不是**每个**字符串。它是代码中的**常量字符串表达式**。例如：

```
string s = "abc" + "def"; 
```

只有 1 个字符串表达式 - IL 将是“abcdef”上的 ldstr（编译器可以计算组合表达式）。

这不会影响性能。

*运行时*生成的字符串不会自动被实习，例如：

```
int i = GetValue();
string s = "abc" + i; 
```

在这里，“abc”是实习的，但“abc8”不是。另请注意：

```
char[] chars = {'a','b','c'};
string s = new string(chars);
string t = "abc"; 
```

请注意`s`和`t`是不同的引用（文字（分配给`t`）是实习的，但新字符串（分配给`s`）不是）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T11:10:45.567

> .net 是否对我使用的每个字符串都使用字符串实习生？

不，但它确实将它用于它在编译时知道的那些字符串，因为它们是代码中的常量。

```
string x = "abc"; //interned
string y = "ab" + "c"; //interned as the same string because the
                       //compiler can work out that it's the same as
                       //y = "abc" at compile time so there's no need
                       //to do that concatenation at run-time. There's
                       //also no need for "ab" or "c" to exist in your
                       //compiled application at all.
string z = new StreamReader(new FileStream(@"C:\myfile.text")).ReadToEnd();
                       //z isn't interned because it isn't known at compile
                       //time. Note that @"C:\myfile.text" is interned because
                       //while we don't have a variable we can access it by
                       //it is a string in the code. 
```

> 如果是这样，是不是会影响性能？

不，它有助于提高性能：

首先：所有这些字符串都将在应用程序的内存中某处。实习意味着我们没有不必要的副本，因此我们使用的内存更少。第二：它使我们知道来自实习字符串的字符串比较速度非常快。第三：这并没有太多，但它给其他比较带来的提升确实如此。考虑存在于其中一个内置比较器中的这段代码：

```
public override int Compare(string x, string y)
{
    if (object.ReferenceEquals(x, y))
    {
        return 0;
    }
    if (x == null)
    {
        return -1;
    }
    if (y == null)
    {
        return 1;
    }
    return this._compareInfo.Compare(x, y, this._ignoreCase ? CompareOptions.IgnoreCase : CompareOptions.None);
} 
```

这是为了排序，但同样适用于相等/不等式检查。要检查两个字符串是否相等或将它们按顺序排列，我们需要进行 O(n) 运算，其中 n 与字符串的长度成正比（即使在可以进行一些跳过和巧妙处理的情况下，它仍然是成正比的） . 这对于长字符串可能会很慢，并且比较字符串是很多应用程序在很多时候都会做的事情——这是一个提高速度的好地方。对于相等的情况，它也是最慢的（因为当我们发现差异时，我们可以返回一个值，但必须完全检查相等的字符串）。

即使您重新定义“等于”的含义（区分大小写、不区分大小写、不同的文化 - 一切仍然等于自身，并且如果您创建一个`Equals()`不遵循的覆盖，那么您将有一个错误）。一切总是在与它相等的东西相同的点上排序。这意味着两件事：

1.  我们总是可以在不做任何工作的情况下考虑与自身相等的事物。
2.  我们总是可以在`0`不做任何工作的情况下给出一个比较值来比较某物与它自己。

因此，上面的代码简化了这种情况，而无需进行更复杂和昂贵的比较。也没有不利的一面，因为如果我们不涵盖这种情况，我们将不得不添加一个测试，以测试两个值`null`无论如何都通过的情况。

现在，碰巧的是，某些算法的工作方式很自然地会自然而然地将某些事物与自身进行比较，所以它总是值得做的。但是，当我们具有不同值的两个字符串（例如`x`，`z`在您的问题的开头）实际上相同时，字符串实习会增加时间，因此它会增加快捷方式对我们起作用的频率。

大多数时候这是一个很小的优化，但我们免费获得它，而且我们经常获得它，拥有它真是太好了。实际的收获——如果你正在写一个`Equals`或一个`Compare`考虑你是否也应该使用这个快捷方式。

那么一个相关的问题是“我应该实习一切吗？”

但是，在这里，我们必须考虑编译字符串没有的缺点。用字符串编译永远不会浪费实习，因为它们必须在某个地方。但是，如果您从文件中读取一个字符串，将其实习，然后再也不使用它，那么它将存在很长时间，这很浪费。如果你一直这样做，你可能会削弱你的记忆力。

假设您经常阅读包含一些标识符的一堆项目。您经常使用这些标识符将项目与来自其他来源的数据进行匹配。有一小组可以看到的标识符（比如只有几百个可能的值）。然后因为相等性检查是这些字符串的全部内容，而且它们并不多，所以实习（在读入的数据和您与之比较的数据上 - 否则毫无意义）成为一个胜利。

或者，假设有几千个这样的对象，我们与之匹配的数据总是缓存在内存中——这意味着无论如何这些字符串总是会在内存中的某个地方，所以实习成为一个不费吹灰之力的胜利。（除非有很多“未找到”结果的可能性 - 实习这些标识符只是为了找不到匹配项是失败的）。

最后，同样的基本技术可以用不同的方式完成。`XmlReader`例如，将它正在比较的字符串存储在一个`NameTable`类似于私有实习生池的 a 中，但整个事情可以在完成后收集。您还可以将该技术应用于在池化期间不会更改的任何引用类型（保证这一点的最佳方法是使其不可变，因此它在任何时候都不会更改）。将此技术用于具有大量重复的非常大的集合可以大大减少内存使用（我最大的节省至少是 16GB - 它可能更多，但在应用该技术之前服务器一直在该点附近崩溃）和/或速度向上比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T10:25:18.893

字符串文字会自动被实习。

默认情况下，以编程方式创建的字符串不会被实习（用户输入的字符串也不会）。

在上面，“一些文本”和“一些其他文本”都已被实习，并且由于您在这些地方使用文字，您会看到实习版本是引用的版本。

在您的代码中，如果您有：

```
string.Format("{0} {1}", "Some", "Text") 
```

您将看到返回的引用与其他文字不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T10:45:26.763

我猜它又重复了

可能重复

[奇怪的字符串文字比较](https://stackoverflow.com/questions/8317054/strange-string-literal-comparison)

[两个不同的“字符串”是同一个对象实例？](https://stackoverflow.com/questions/10779422/two-different-strings-are-the-same-object-instance)

重复

```
The Common Language Infrastructure (CLI) guarantees that the result of two ldstr instructions referring to two metadata tokens that have the same sequence of characters return precisely the same string object (a process known as "string interning"). 
```

# java - DDMS java profiler 说：java/lang/StringBuilder。 - 它在我的代码中的什么位置？

> ID：12004029
> 
> 赞同：0
> 
> 时间：2012-08-17T10:23:47.143
> 
> 标签：java, android, string, optimization, ddms

我有以下为android应用程序编写的java方法。

```
private String removeWifiFudge(String message, String removedFudge)
{
    int find1 = 255;   //FF
    int find2 = 0;     //00
    int find3 = 204;   //CC
    int find4 = 36;    //24

    char[] charMessage = message.toCharArray();

    boolean find1True = false;

    for (char eachCharacter : charMessage)
    {
        if (find1True)
        {
            if ((int) eachCharacter == find2)
            {
                removedFudge = removedFudge + String.valueOf((char)find1);
            }
            else
            {
                if ((int) eachCharacter == find3)
                {
                    removedFudge = removedFudge + String.valueOf((char)find4);
                }
                else
                {
                    removedFudge = removedFudge + String.valueOf((char)find1);

                    removedFudge = removedFudge + String.valueOf(eachCharacter);
                }
            }

            find1True = false;
        }
        else 
        {
            if ((int) eachCharacter == find1)
            {
                find1True = true;
            }
            else
            {
                removedFudge = removedFudge + String.valueOf(eachCharacter);
            }
        }
    }   

    return removedFudge;
} 
```

简而言之，它接受一个字符串、**消息**并逐个字符地搜索 0xFF00 和 0xFFCC 的实例。在找到这些实例时，它分别将它们替换为 0xFF 和 0x24，将其放入新的字符串**removedFudge**中。

这种方法占用了大量的 CPU 时间，并且在使用嵌入在 Eclipse 中的 Java 分析器 DDMS 时，它告诉我 53% 的方法时间花费了：

java/lang/StringBuilder. (Ljava/lang/String;)V

这似乎是说它正在占用初始化字符串的时间，但是当我将已经初始化的字符串传递给它以放入新消息时，我看不到初始化字符串的来源。

有谁是 DDMS 方面的专家？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T10:28:26.683

字符串连接会导致在运行时使用 StringBuilder，因此它会出现在您的分析器中。

# php - htaccess 文件中的 301 重定向

> ID：12004037
> 
> 赞同：0
> 
> 时间：2012-08-17T10:24:35.973
> 
> 标签：php, .htaccess, redirect, query-string

在我的网站上创建 301 重定向时遇到问题。当我创建重定向时，浏览器显示完整的 qherysting 而不是指向页面。

**例如。我想直接 /contact 到 /contact-us**

我得到的是：

**/联系我们？页面=联系**

这是我的 .htaccess 中的代码：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www\. 
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 

RewriteBase /

redirect 301 /contact /contact-us 
RewriteRule ^([^/\.]+)/?$ index.php?page=$1 [L] 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T10:35:50.297

这是一个 mod_alias/mod_rewrite 冲突。路径处理管道分别处理这两件事。您可以坚持使用 mod_rewrite 并替换

```
redirect 301 /contact /contact-us 
```

和

```
RewriteRule ^contact$ /contact-us [L,R=301] 
```

因此，一旦到达此处，重写将**停止，并且永远不会应用最后一条规则。**否则，mod_alias 将重定向 URL，但直到它通过 mod_rewrite 运行 URI 时才会重定向，因此您会得到这个全局重定向。如果你不介意尾随**？**，您还可以将其添加到重定向目标的末尾：

```
redirect 301 /contact /contact-us? 
```

这样查询字符串就不会被附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:42:28.697

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^yoursite\.com [NC]
RewriteRule (.*) http://www.%{HTTP_HOST}%{REQUEST_URI}

RewriteRule ^contact[/]?$ /contact-us [R=301]
RewriteRule ^([^/\.]+)[/]?$ /index.php?page=$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:42:38.573

这样做：

> 重定向 301 /联系[http://www.domain.com/contact-us](http://www.domain.com/contact-us)

使用完整的网址。

# php - 如何在指定范围内使用请求参数获取数组元素

> ID：12004039
> 
> 赞同：0
> 
> 时间：2012-08-17T10:24:38.657
> 
> 标签：php, arrays, foreach, request

我有一个文件夹，其中有 12 个文件，在 php 中我发送两个请求参数是：

```
$from = $_REQUEST['from'];
$to = $_REQUEST['to']; 
```

意味着如果我从 1 写到 9，那么我将得到数组中的所有文件：

```
 $path = 'example/'
    $files = scandir($path);

    $fi = array();
    foreach ($files as $file) {
    $fi[] = $file; --> array
    } 
```

我使用请求参数指定的所有文件范围都是通过 echo 或explode 使用的显示文件，我正在尝试这个，如果有更有效的方法，请启发这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:27:53.177

您可以使用[array_slice](http://www.php.net/manual/en/function.array-slice.php)：

```
$fi = array_slice($files, $from, $to - $from); 
```

如果`$_REQUEST[from]`和`[to]`是 1-indexed，只需从两者中减去 1：

```
$from = $_REQUEST['from'] - 1;
$to = $_REQUEST['to'] - 1 
```

# fortran90 - 文凭论文需要帮助：计算梯度向量的首选方向

> ID：12004040
> 
> 赞同：1
> 
> 时间：2012-08-17T10:25:02.400
> 
> 标签：fortran90

我目前正在用 Fortran 90 写我的文凭论文。在我的代码的某个阶段，我只是想计算一个整数（结果应该在网格单元的笛卡尔网格中给出一个方向）。

没有错误信息，但结果是错误的。会是什么？我正在寻找的值是变量的值`idirhf`（见下文）。它应该始终是`1`,`2`或`3`。取决于计算的`preferred`方向。但是，它通常是`idirhf = 0`或什`idirhf = 1195`至或其他的……值`fcdx`，`fcdy`并且`fcdz`是`Real`值。它们代表梯度的组成部分。

所有变量都在前面的步骤中声明，未显示。

有人可以帮忙吗？我现在已经在那个小问题上花了几个小时......

这是代码的一部分：

```
 distz = ( dr ( k ) +  dr ( k - 1 ) + dr ( k + 1) ) / 2.

              fcdx = ( fv  ( i + 1, j, k ) - fv  ( i - 1, j ,k ) )      &
     &                / ( 2\. * dz )
              fcdy = ( fv  ( i, j + 1, k ) - fv  ( i, j - 1, k ) )      &
     &                / ( 2\. * dp )
              fcdz = ( fv  ( i, j, k + 1 ) - fv  ( i, j ,k - 1 ) )      &
     &                / ( distz )
              gradf ( 1 ) = ABS ( fcdx )
              gradf ( 2 ) = ABS ( fcdy )
              gradf ( 3 ) = ABS ( fcdz )
!
!             Prüfung in welche der 3 Kooridnatenrichtung x,y,z
!             die HF gebildet werden soll:
!
              IF ( gradf(1) > gradf(2) ) THEN
                 IF ( gradf(1) > gradf(3) ) THEN
                    idirhf = x
                    x = 1
                    ider1 = y
                    ider2 = z
                    nsten1 = 5
                    nsten2 = 5
                 END IF
              END IF
!
              IF ( gradf(2) > gradf(1) ) THEN
                 IF ( gradf(2) > gradf(3) ) THEN
                   idirhf = y
                    y = 2
                    ider1 = x
                    ider2 = z
                    nsten1 = 4
                    nsten2 = 5
                 END IF
              END IF
!
              IF ( gradf(3) > gradf(1) ) THEN
                 IF ( gradf(3) > gradf(2) ) THEN
                    idirhf = z
                    z = 3
                    ider1 = x
                    ider2 = y
                    nsten1 = 4
                    nsten2 = 5
                 END IF
              END IF
!              WRITE(*,*)'###Nach gradf-Vergleich.idirhf = ', idirhf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:47:12.247

您的帖子没有向我们展示在您的双重声明`x,y,z`中首次使用它们更新之前的值。应该序列`idirhf``IF`

```
 idirhf = x
                x = 1 
```

真的是

```
 x = 1
                idirhf = x 
```

*等*？

# android - 使用相机闪光灯是否需要 android.permissions.FLASHLIGHT？

> ID：12004053
> 
> 赞同：1
> 
> 时间：2012-08-17T10:25:46.850
> 
> 标签：android, permissions, camera, flashlight

例如，[有氧运动库](https://www.card.io/)库使用相机闪光灯，但不需要此权限。

我在 Galaxy S2 (4.03) 和 Nexus One (2.3.6) 上使用相机闪光灯测试了没有此权限的应用程序，并且运行顺利。

有人对需要**android.permissions.FLASHLIGHT**的情况有任何经验吗？它是干什么用的？

# objective-c - 从 iOS 设备上传图片到服务器

> ID：12004054
> 
> 赞同：3
> 
> 时间：2012-08-17T10:25:49.933
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试在远程服务器上上传图像。如果我从谷歌在我的手机上下载图片并上传它们，例如[http://www.mangauk.com/gallery/albums/album-11/lg/scooby.jpeg](http://www.mangauk.com/gallery/albums/album-11/lg/scooby.jpeg)它上传就好了。但是，如果我尝试上传我用相机拍摄的图像，它就不起作用。服务器只是挂起。

```
(IBAction)uploadImage {
    /*
     turning the image into a NSData object
     getting the image back out of the UIImageView
     setting the quality to 90
    */
    NSData *imageData = UIImageJPEGRepresentation(image.image, 90);
    // setting up the URL to post to
    NSString *urlString = @"http://iphone.zcentric.com/test-upload.php";

    // setting up the request object now
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    /*
     add some header info now
     we always need a boundary when we post a file
     also we need to set the content type

     You might want to generate a random boundary.. this is just the same 
     as my output from wireshark on a valid html post
    */
    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    /*
     now lets create the body of the post
    */
    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"rn--%@rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];    
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name="userfile"; filename="ipodfile.jpg"rn"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-streamrnrn"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"rn--%@--rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // now lets make the connection to the web
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(returnString);
} 
```

和php脚本

```
$uploaddir = './uploads/';
$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir . $file;

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
        echo "http://iphone.zcentric.com/uploads/{$file}";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T10:48:46.943

问题必须在您的 php 脚本中，因为必须将文件发送给它。

您应该在 php 中定义文件名，而不是信任原始文件名。

否则，有人可能会上传恶意的 .php 文件，而您的脚本会很高兴地上传它并将其命名为 .php，他们可能会接管您的服务器。

你应该做这样的事情：

```
$uploaddir = './uploads/';
$file = $uploaddir . 'filename_chosen_by_you.jpg'; 
```

这也可能会解决 jpeg / jpg 问题，因为您正在进行命名。

另一件事-您也在执行同​​步请求-这意味着您的应用程序将在执行请求时等待并冻结（如果文件很大，则可能需要几秒钟），请查看执行异步请求。这意味着它将在后台上传图像，然后在完成后调用一个函数，这样你就可以告诉用户一切都上传好了。

# c# - 如何一一调用多个invoke操作？

> ID：12004056
> 
> 赞同：1
> 
> 时间：2012-08-17T10:26:01.587
> 
> 标签：c#, silverlight, silverlight-5.0

我有一些调用操作（全部不同），我需要根据存储在 an 中`ObservableCollection`并返回字符串/int 值的用户选择的项目来调用它们。

Now when the selection is only one item it is straight forward, I can call and use the `Completed`event and get my return value.

我在列表中有大约 <= 8 个项目，我需要对其进行迭代并执行`invoke`操作。

我看到`foreach`不会真正等待`InvokeOperation`完成，而是不断迭代直到列表末尾，使它们并行运行......有点......

如何一次只执行一个操作并仅在前一个操作完成时迭代（无论结果如何）？

InvokeOperations 的 1 对 1 执行是我正在寻找的..任何线索，提示..？

如果我不清楚，请告诉我。

干杯。

编辑：`InvokeOperation`（s）彼此不同。他们每个人都在数据库上执行不同的操作，这可能很耗时。研究以 1-1 执行它们的主要原因是使用每个人的输出（成功/失败）更新用户屏幕，而不是一次完成所有操作.

```
//Pseudo-code
foreach (var item in SelectedItems) 
{

    var id = item.ID;

    switch(id) 
    {    
      case: 1
         InvokeOperataion<int> inv = context.PerformUpdateFor_1(item);
         inv.Completed += (s,a) => { 
         //get the value assign it to Textblock.
         };
         break;
      case: 2
         InvokeOperataion<int> inv = context.PerformUpdateFor_2(item);
         inv.Completed += (s,a) => { 
         //get the value assign it to Textblock.
         };
         break;
//Other cases similar to this    
   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:15:27.470

看看 Silverlight 的反应式扩展。您将能够轻松地将您的 RIA 服务包装`InvokeOperation`在一个`IObservable`代表其异步完成的文件中。做到这一点的一种方法涉及该`Observable.Create`方法。

之后，您将能够以`IObservables`多种方式组成集合：使用顺序`Observable.Concat`执行它们，使用并行执行它们`Observable.ForkJoin`，过滤它们，加入它们等。

我已经成功地将它用于 RIA 服务的加载操作，并在较小程度上调用操作。在我看来，observable 的可组合性比显式编写回调方法要好得多。

这是一篇博客文章，概述了加载操作的方法，但方法非常相似：[Linq Query Expression Syntax with RIA Domain Context](http://www.tonyabell.com/blog/2011/7/14/linq-query-expression-syntax-with-ria-domain-context.html)

# php - php。删除部分数组

> ID：12004057
> 
> 赞同：2
> 
> 时间：2012-08-17T10:26:05.067
> 
> 标签：php, arrays

有必要删除部分阵列。下面是一个数组的例子：

```
Array ( [0] => one [1] => two [2] => three [3] => four [4] => five ) 
```

该变量可以基于数组中的以下值之一。建议有“三”。需要采取一，二和其他一切删除。

是否有任何标准方法或不需要使用循环的好解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T10:28:17.227

你可以使用[array_splice](http://php.net/manual/en/function.array-splice.php)

```
$input = array("red", "green", "blue", "yellow");
array_splice($input, 1, -1);
// $input is now array("red", "yellow") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T10:37:31.577

这将使用@JeroenMoons array_splice，但也会执行我建议的 array_search

```
function reduce_my_array($array, $value)
{
    // look for location of $value in $array
    $offset=array_search($value, $array);

    // if not found return original
    if($offset===false) return $array;

    // remove from the found offset to the end of the array
    return array_splice($array, $offset+1);     
} 
```

注意： array_search
返回可以为 0 的 INDEX

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T10:29:20.700

如果不想使用循环，可以使用 array_splice。

```
$input = array("red", "green", "blue", "yellow");
array_splice($input, $varaible, -1);
// $input is now array("red", "yellow") 
```

# sql - 两个查询之间的减法

> ID：12004059
> 
> 赞同：3
> 
> 时间：2012-08-17T10:26:09.870
> 
> 标签：sql, postgresql

假设我有 2 个数据库表：

`table B`是一组人，`table A`是一组人从`table B`

```
Table A = (no, id, date) no is PK, id refer to table B

Table B = (id, name) id is PK 
```

我的目标是获取在给定日期（例如今天**）没有参加的人（身份证和姓名）的数据，**这个理论看起来很简单，一组 B 减去一组参加（今天）的 A，但怎么能我在 SQL 查询中这样做？我认为第一个查询被第二个查询减去但感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T10:29:42.077

```
select * from b where 
not exists (select no from A where A.id=B.id and date=@yourdate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:29:44.187

如果我理解正确，它将是这样的：

```
select b.id, b.name from tableB b where b.id not in (
   select b.id from tableA a
   inner join tableB b on a.id = p.id
   where a.date = CURRENT_DATE) 
```

# java - JTable：用户单选，编程多选

> ID：12004062
> 
> 赞同：1
> 
> 时间：2012-08-17T10:26:29.123
> 
> 标签：java, swing, jtable, selection, swingx

我有一个`JTable`用户应该只能选择一行的地方，但是每当用户选择一行时，也应该以编程方式选择其他一些行（根据某些逻辑相关）。问题是如果我将表格的选择模式设置为`ListSelectionModel.SINGLE_SELECTION`,`addRowSelectionInterval`也会只选择一行。有任何想法吗？

编辑：我认为所有想法（自定义选择模型，清除除最后一个用户选择之外的所有选择，自定义渲染器以突出显示）都很好，但最好是使用 SwingX，因为它不需要太多基础设施代码，只需巧妙地使用图书馆。（当 SwingX 专家提供帮助时，很容易变得聪明 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:26:21.617

有偏见的我会说：在 SwingX 中肯定容易得多 :-)

所有你需要的是

*   决定相关内容的自定义 HighlightPredicate
*   使用 selectionColors 配置的 ColorHighlighter
*   在从选择模型接收更改通知时设置自定义谓词

一些代码：

```
// the custom predicate
public static class RelatedHighlightPredicate implements HighlightPredicate {
    List<Integer> related;

    public RelatedHighlightPredicate(Integer... related) {
        this.related = Arrays.asList(related);

    }
    @Override
    public boolean isHighlighted(Component renderer,
            ComponentAdapter adapter) {
        int modelIndex = adapter.convertRowIndexToModel(adapter.row);
        return related.contains(modelIndex);
    }

}

// its usage
JXTable table = new JXTable(someModel);
table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
final ColorHighlighter hl = new ColorHighlighter(HighlightPredicate.NEVER, 
        table.getSelectionBackground(), table.getSelectionForeground());
table.addHighlighter(hl);
ListSelectionListener l = new ListSelectionListener() {

    @Override
    public void valueChanged(ListSelectionEvent e) {
        if (e.getValueIsAdjusting()) return;
        invokeUpdate((ListSelectionModel) e.getSource());
    }

    private void invokeUpdate(final ListSelectionModel source) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                int singleSelection = source.getMinSelectionIndex();
                if (singleSelection >= 0) {
                    int first = Math.max(0, singleSelection - 2);
                    int last = singleSelection + 2;
                    hl.setHighlightPredicate(new RelatedHighlightPredicate(first, last));
                } else {
                    hl.setHighlightPredicate(HighlightPredicate.NEVER);
                }
            }
        });

    }

};
table.getSelectionModel().addListSelectionListener(l); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T10:36:09.300

您可以为表格设置多选，但每次选择更改 - 只取 1（最后选择）行，清除其他选择并添加您自己的计算选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T10:52:23.420

1.  `The problem is that if I set the selection mode of the table`

    用于`ListSelectionModel.SINGLE_SELECTION`事件来自`mouse`和`keyborad`

2.  `some other rows (that are related according to some logic) should also be selected programmatically`

    查看[Renderer](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer) for [JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，然后需要的行、列或任何可以突出显示的内容，直到程序规则保持不变

3.  ...[也许会帮助你](https://stackoverflow.com/questions/7423533/jtable-with-jpopupmenu)

# php - Sugarcrm 日志记录

> ID：12004063
> 
> 赞同：0
> 
> 时间：2012-08-17T10:26:35.520
> 
> 标签：php, sugarcrm

我安装了 sugarcrm，即使日志级别设置为致命，我的日志也有调试条目。是什么导致记录器忽略设置？我搜索了覆盖日志记录级别的代码，但没有找到类似的东西。

似乎是仅在 REST api 调用上发生的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:19:27.477

答案就在 SugarCRM 版本中。我为此使用了 5.5.4，并且有*$GLOBALS['log']->setLevel('debug');* 在 service/core/webservice.php 的第 44 行。

至少从 6.2 版开始它就消失了.-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:24:08.003

您确定这里没有冲突的日志设置，可能在 config.php 或 config_override.php 文件中？

# html - 制作视频以与 html 元素交互

> ID：12004066
> 
> 赞同：2
> 
> 时间：2012-08-17T09:42:53.953
> 
> 标签：html, video

重点是创建一个介绍，其中视频字符与页面上呈现的 HTML 元素交互。

不确定这是否可以做到，如果可以，那么请放弃一些关于我们如何将视频文件与 html 元素集成的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:13:18.230

`JW Player`是的，例如，您可以这样做。当视频达到某些点时，您可以使用 html 进行操作。查看[文档](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12540/javascript-api-reference)`onTime`中的事件

# r - 'x' 是一个列表，但没有组件 'x' 和 'y'

> ID：12004068
> 
> 赞同：14
> 
> 时间：2012-08-17T10:26:44.227
> 
> 标签：r, plot

我正在尝试使用 pROC 包中的 multiclass.roc 函数为多类问题绘制 ROC 曲线，但出现此错误：

```
'x' is a list, but does not have components 'x' and 'y' 
```

这个错误是什么意思，因为在网络上搜索并没有帮助我找到答案。我可以打印 roc 对象，但不能绘制它。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T10:59:41.723

如果您调用`plot`列表`l`：`plot (l)`，x 坐标将从 中获取，`l$x`y 坐标将从 中获取`l$y`。您的列表没有元素 x 和 y。

你需要打电话`plot (l$your.x.coordinate, l$your.y.coordinate)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-04T21:59:57.463

另一种（懒惰的）方法是简单地使用`useful`库

```
install.packages('useful')
library(useful) 
```

**例子 -**

```
wineUrl <- 'http://archive.ics.uci.edu/ml/machine-learning-databases/wine/wine.data'
wine <- read.table(wineUrl, header=F, sep=',')
wine_kmeans <- wine[, which(names(wine) != "Cultivar")]
wine_cluster <- kmeans(x=wine_kmeans , centers=3)
plot(wine_cluster, data=wine_kmeans) 
```

[![在此处输入图像描述](../Images/e197f5d09091d8127d3a697104cbf588.png)](https://i.stack.imgur.com/KtvhE.png)

# c# - 单击网站上的课程按钮

> ID：12004072
> 
> 赞同：0
> 
> 时间：2012-08-17T10:26:59.123
> 
> 标签：c#

我有以下网页代码；

```
<div class="toolbox">
<div class="toolboxNest" align="left">
<div class="clear"> </div>
<div class="gap"> </div>
<label for="j_username">
<input id="j_username" type="text" name="j_username">
<div class="clear"> </div>
<div class="gap"> </div>
<label for="j_password">
<input id="j_password" type="password" name="j_password">
</div>
<div class="clear"></div>
<div class="gap"></div>
<div align="center">
<input class="formButtonGreen" type="submit" value="Login">
</div>
<div class="clear"></div>
<div class="gap"></div>
<div class="infoText"> 
```

我可以单击并输入用户名和密码的文本，但我不知道如何按下提交按钮，如果它只是一个元素，那很好，但它在一个类中，我不确定如何做。

这是我的代码...

```
var x = webBrowser1.Document.All.GetElementsByName("j_username");
  x[0].InnerText = "xxxxx";
  var y = webBrowser1.Document.All.GetElementsByName("j_password");
  y[0].InnerText = "xxxxxxxx";

//This part is not working....
 var s = webBrowser1.Document.GetElementById("formButtonGreen");
  s[0].InvokeMember("click"); 
```

有人有任何想法吗？

请注意：我不拥有该网站，因此无法更改网页后面的代码...

谢谢，

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:42:18.197

您应该尝试使用`.Document.Body.GetElementsByTagName("input")`which 应该可以帮助您获取按钮元素，稍后您可以`InvokeMember("click")`在该元素上使用。

这将返回一组匹配元素，因此如果有多个元素，则必须通过循环从属性中识别它，然后触发所需的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:32:02.480

无需单击按钮，只需提交表单本身。

jQuery明智的，这是：

```
$("#my_form").submit(); 
```

或者您可以使用任何其他方式来选择该表单。按类、父元素、标签名称...

# javascript - Google Chart - GeoChart“不兼容的数据表：错误：未知地址类型。”

> ID：12004074
> 
> 赞同：2
> 
> 时间：2012-08-17T10:27:14.370
> 
> 标签：javascript, json, google-visualization

我正在尝试使用从 mysql 检索并在 PHP 中解析的一组数据生成 GeoChart。但是，我很确定错误在于我的 JavaScript。我已经简化了数据以使其更易于理解。

这是我的 JavaScript：

```
// Load the Visualization API and the piechart package.
google.load('visualization', '1.0', {'packages':['geochart']});

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart);

// Callback that creates and populates a data table,
// instantiates the geo chart, passes in the data and
// draws it.

function drawChart() {

// Create the data table.
var data = new google.visualization.DataTable(
{
    cols: [
      {id: '0', label: 'Country'},
      {id: '1', label: 'Downloads'}
     ],
    rows: [
      {c:[{v: 'GB'}, {v: 166020}]}
     ]      
 }
);

// Set chart options
var options = {
    title:'Downloads in Last 30 Days',
    width:900,
    height:700,                 
};

// Create and draw the visualization.
visualization = new google.visualization.GeoChart(document.getElementById('chart_div1'));
visualization.draw(data, options);

} 
```

在页面中，我只收到红色文字，上面写着：

```
Incompatible data table: Error: Unknown address type. 
```

我有其他图表使用具有相同格式/布局的数据表工作正常。

任何帮助表示赞赏，

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:07:18.233

我修好了它。我只需要指定`column`was a`string`或 a的类型`number`。

例子：

```
cols: [
  {id: '0', label: 'Country', type: 'string'},
  {id: '1', label: 'Downloads', type: 'number'}
], 
```

# ruby - 使用 Ruby 转换字符串

> ID：12004077
> 
> 赞同：-2
> 
> 时间：2012-08-17T10:27:37.673
> 
> 标签：ruby

如何将字符串转换`russ(ai)(edocn)cup`为`russiancodecup`使用 Ruby？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T10:34:43.183

通过使用`gsub`with 块，您可以用该块的结果替换正则表达式的任何匹配项。

```
s = "russ(ai)(edocn)cup"
s.gsub(/\(([^)]*)\)/) {$1.reverse}  # => "russiancodecup" 
```

这里正则表达式将匹配`)`括号之间的任何非字符。然后它将发送`reverse`到`$1`哪个将是括号之间的内容。

`$0`将是完整的匹配，并且`$n`是第 n 个“子匹配”。（有人要正确的词吗？）

# php - 属性未定义 - 需要注意的通知

> ID：12004084
> 
> 赞同：0
> 
> 时间：2012-08-17T10:28:03.033
> 
> 标签：php, joomla, joomla1.5, joomla2.5, joomla-extensions

```
stdClass Object (
[id] => 105
[menutype] => englishmenu
[title] => Product Verification
[alias] => product-verification
[note] =>
[path] => software-outsourcing/product-verification
[link] => index.php?option=com_content&view=article&id=2
[type] => component
[published] => 1
[parent_id] => 103
[level] => 2
[component_id] => 22
[ordering] => 0
[checked_out] => 0
[checked_out_time] => 0000-00-00 00:00:00
[browserNav] => 0
[access] => 1
[img] =>
[template_style_id] => 0
[params] => {\"show_title\":\"\",\"link_titles\":\"\",\"show_intro\":\"\",\"show_category\":\"\",\"link_category\":\"\",\"show_parent_category\":\"\",\"link_parent_category\":\"\",\"show_author\":\"\",\"link_author\":\"\",\"show_create_date\":\"\",\"show_modify_date\":\"\",\"show_publish_date\":\"\",\"show_item_navigation\":\"\",\"show_vote\":\"\",\"show_icons\":\"\",\"show_print_icon\":\"\",\"show_email_icon\":\"\",\"show_hits\":\"\",\"show_noauth\":\"\",\"urls_position\":\"\",\"menu-anchor_title\":\"\",\"menu-anchor_css\":\"\",\"menu_image\":\"\",\"menu_text\":1,\"page_title\":\"\",\"show_page_heading\":0,\"page_heading\":\"\",\"pageclass_sfx\":\"\",\"menu-meta_description\":\"\",\"menu-meta_keywords\":\"\",\"robots\":\"\",\"secure\":0}
[lft] => 50
[rgt] => 51
[home] => 0
[language] => en-GB
[client_id] => 0
) 
```

那就是`$item`我 print_r 的变量内容，我正在使用 Joomla。显然有一个名为“menu_image”的属性，但是当我运行我的应用程序时，我总是会遇到未定义 stdclass::menu_image 属性的通知，我真的很困惑，只能从这个真正的魔术师网站寻求帮助。任何帮助将不胜感激，我非常感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:32:52.373

不，它不作为该对象的直接属性存在，而是一个 json 编码的字符串：

```
$params = $obj->params;
$params = json_decode($params);
echo $params->menu_image 
```

# rest - 几个 REST 和 EJB 问题

> ID：12004087
> 
> 赞同：1
> 
> 时间：2012-08-17T10:28:09.603
> 
> 标签：rest, jakarta-ee, ejb

我正在尝试使用 RESTful Web 服务和与另一个 Java EE 应用程序的 EJB 连接来部署 Java EE Web 应用程序。我遇到了几个问题，我没有写下每一个具体的问题，所以我别无选择，只能连续告诉你。

1) 首先，我正在使用 Tomcat 运行应用程序，但无法让 EJB 连接工作。无论如何，我都会收到 JNDI 错误：`NamingContextFactory class not found`。**为什么 ？** 我的 JNDI 连接如下：

```
String hostname = "localhost";
    String port = "1099";
    String url = "jnp://" + hostname + ":" + port + "/";
    Properties h = new Properties();
    h.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
    h.put(Context.PROVIDER_URL, url);
    h.put(Context.URL_PKG_PREFIXES, "org.jboss.naming.client");
    initialContext = new InitialContext(h); 
```

2）因此，由于使用的服务器不相关，并且我尝试连接的应用程序使用的是 JBoss（4.4.2.GA），因此我尝试将我的应用程序部署在同一个 JBoss 下。我无法部署它，我有一个 REST 问题：`ClassNotFoundException: javax.ws.rs.core.ApplicationConfig`在部署时。

2.1) 我正在使用 Netbeans 进行编译，`ApplicationConfig.class`它不是我在编译时使用的 1.1 版本的 JAX-RS api 的一部分`jsr311-api-1.1.jar`。库的实现自 0.8 版本以来发生了变化，我之前使用过，但我不得不升级 jar，因为它不包含`@FormParam`. 到目前为止，我已经找到了一种解决方法，`com.sun.jersey.api.representation.FormParam`但据我所知，Jersey 与 JBoss 不兼容。 **为什么**服务器在战争中没有使用 ApplicationConfig 时却在寻找它？

2.2) 我知道我必须使用 RESTEasy，而 JBoss 4 不包含它，所以必须手动安装它。但是 RESTEasy 文档建议我彻底修改我的项目，添加很多 jar、servlet 等。从我的角度来看，我只需要在我的 JAX-RS API 的服务器库上实现 RESTful 实现，这只是一个接口, 将在应用程序部署后引用。我可能对 Java EE 库链接的工作方式有一些严重的误解。**请帮忙。**

所以我知道这里有几个不同的问题，但我无法将它们分开。我为此浪费了太多时间，以至于我为我的项目感到担心。提前致谢。

# javascript - Javascript / JQuery 循环通过发布的 ajax 数据字符串来分配新值

> ID：12004093
> 
> 赞同：0
> 
> 时间：2012-08-17T10:28:39.453
> 
> 标签：javascript, jquery, ajax

我有一个通过 ajax 更新数据库的功能。然后我的问题是如何更新页面上显示的数据以显示更新的详细信息。POST 数据可能会有所不同，因此数据字符串将是这样的：

```
 var dataString = '[name resource we are editing]=1' + 
        '&para1='+ para1 + 
        '&para2=' + para2+
        '&para3=' + para3 
```

我希望下面的函数拆分或循环遍历数据字符串中的每个 POST 变量，以更新页面上元素的文本。我不知道怎么做。

```
function editAccount(dataString, details, form){
        status = $(".status");
        $.ajax({  
          type: "POST",  
          url: "<?php echo BASE_PATH; ?>/edit/",  
          data: dataString,  
            success: function(response) { 
                $.each(response, function(key, value) { 
                success_code = key;
                message = value;
               });

              if(success_code == 1){
                status.text(message).addClass("valid");
                //show details and hide form
                $("#" + details).show();
                $("#" + form).hide();   
                            //HOW to do below?
                //update details being displayed with datasource data 
                //loop through dataString to assign eg. $('#para1')text(para1);

              } else {
                status.text(message).addClass("invalid");
              }
            },
            error: function(response){ 
            status.text("There was a problem updating your details into our database.  Please contact us to report this error.").addClass("invalid");
          }  
        });  

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:00:36.017

正如之前的评论中提到的，我建议将`dataString`变量声明为对象：

```
var dataString = { '[name resource we are editing]' : 1, 
        'para1': para1, 
        'para2': para2,
        'para3': para3
        } 
```

现在循环参数会容易得多，只需使用`each`您已经在代码中使用的函数：

```
$.each(dataString, function(key, value) {
    // Do stuff with each param
}); 
```

编辑：

正如@Qpirate 建议的那样，您还可以使用 javascript`for`循环：

```
for(var key in dataString){
    // value => dataString[key]
} 
```

# android - 电子邮件问题（在电子邮件正文中发送超链接）android

> ID：12004097
> 
> 赞同：9
> 
> 时间：2012-08-17T10:28:47.630
> 
> 标签：android, android-intent, html-email

```
mIntent = new Intent(Intent.ACTION_SEND);
mIntent.putExtra(Intent.EXTRA_SUBJECT, getString(""));

mIntent.setType("text/html");  
Uri myUri = Uri.parse("http://www.Google.com/");
mIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml("<a href=\""+myUri+"\">Link</a>"));
startActivity(android.content.Intent.createChooser(mIntent, "Email:")); 
```

我尝试了上面的代码，但在接收方我无法获得链接。它转换为普通文本..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T11:14:38.433

试试这个..它对我有用..

```
String link_val = "www.google.com"
String body = "<a href=\"" + link_val + "\">" + link_val+ "</a>"

intent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(body)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-30T05:42:12.047

如果您通过将源文本包含在其中使 EXTRA_TEXT 成为完整的 html 文档，`<html><body>`它将`<\body><\html>`与 GMail 一起正常工作，也就是说，您可以对链接进行适当的描述。

不幸的是，它不适用于所有电子邮件应用程序。例如，它不适用于我的 Galaxy S3 上的三星电子邮件应用程序。我的结论是你不能安全地做到这一点，这很烦人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-29T12:34:13.350

根据 scottytab 的评论，CapDroid 的回答看起来并没有解决问题。

尝试;

```
yourIntent.setType("text/html");
yourIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(body)); 
```

如果这不起作用，请尝试添加；

```
yourIntent.putExtra(android.content.Intent.EXTRA_HTML_TEXT, Html.fromHtml(body)); 
```

参考; [fromHtml](http://developer.android.com/reference/android/text/Html.html#fromHtml(java.lang.String)) , [EXTRA_HTML_TEXT](http://developer.android.com/reference/android/content/Intent.html#EXTRA_HTML_TEXT)

# objective-c - 插入语句不适用于 sqlite3 iphone 中同一数据库上的第二个表

> ID：12004105
> 
> 赞同：1
> 
> 时间：2012-08-17T10:29:07.077
> 
> 标签：objective-c, ios, sqlite

我在同一个数据库上有 2 个表。

使用以下代码成功插入第一个表数据：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
       NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"test.sqlite"];
if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {

(sqlite3_exec(database, "BEGIN TRANSACTION", 0, 0, 0))==SQLITE_OK

   if ( sqlite3_exec(database, [insertStatement UTF8String], NULL, NULL, &error) == SQLITE_OK)
        {

            NSLog(@"------- inserted here ----");
        }
        else
        {
            NSLog(@"Error: %s", error);

     if(sqlite3_exec(database, "COMMIT", 0, 0, 0) ==SQLITE_OK){
           NSLog(@"-------data sucessfully inserted ");
      }
      else {
         NSLog(@"-------data insertion failed");
          sqlite3_exec(database, "ROLLBACK", 0, 0, 0);
      }

       (sqlite3_exec(database, "END TRANSACTION", 0, 0, 0));
        sqlite3_close(database);

}
else {
   NSLog(@"-------sqlite open error ");
} 
```

我登录时成功插入数据。

但是当我使用相同的代码插入第二个表时，没有插入数据我得到日志

```
NSLog(@"-------data insertion failed") 
```

我还在每次操作时打开和关闭数据库并释放句柄。

我认为 sqlite 不允许我在数据库上写，但不明白为什么？由于我已经关闭了早期操作的数据库。

有没有人遇到相同的问题，没有为同一数据库文件上的第二个表插入数据。

补充说明：没有语法错误，如果我不在第一个表上插入，那么插入是在第二个表上完成的，这很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:45:47.447

试试这个代码，

```
-(NSString*) GetDatabasePath
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
        NSUserDomainMask, YES) ;
    NSString *documentsDirectory = [paths objectAtIndex:0] ;
    return [documentsDirectory stringByAppendingPathComponent:@"test.sqlite"] ;
}

-(void)InsertPurchase 
{
        sqlite3_stmt *statement=nil;
        NSString *path = [self GetDatabasePath];
        NSString *query;

        if(sqlite3_open([path UTF8String],&db) == SQLITE_OK)
        {
            query = [NSString stringWithFormat: @"Your insert query"];

            if(sqlite3_prepare_v2(db, [query UTF8String], -1, &statement, NULL)
                        == SQLITE_OK)
            {
                sqlite3_step(statement);
            }
            sqlite3_finalize(statement);
        }
        sqlite3_close(db);
} 
```

# javascript - 与特定边距顶部和底部垂直对齐

> ID：12004106
> 
> 赞同：0
> 
> 时间：2012-08-17T10:29:10.600
> 
> 标签：javascript, alignment, margin, css-position, vertical-alignment

我有一个 div（绿色的）位于窗口的中间，但我希望在调整窗口大小时，这个 div 始终尊重边距（徽标和页脚的高度）。

我真的不明白。有人可以看看吗？项目是这个：[http ://sfrpsicologia.com/inicio.html](http://sfrpsicologia.com/inicio.html)

感谢一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:09:00.707

使用 % 给出 ol & li 宽度

# excel - 满足特定列和行参数时提取特定单元格

> ID：12004111
> 
> 赞同：0
> 
> 时间：2012-08-17T10:29:34.053
> 
> 标签：excel

我有一个包含 16 列和 100 行的 Excel 电子表格。每个单元格中都有一个特定的数字。

标题列与行标题一样包含指定的数字。

在工作簿的另一张纸上是一个计算器，人们可以输入数字来计算发动机性能数据。

我所追求的是，​​当输入与标题列中的数字相对应的特定数字以及行标题中的特定数字时，与这两个数字的兴趣相对应的数字将自动填充在计算器单元格表中。

我对 excel 非常陌生，并且在编写或输入代码方面经验很少。

对此的任何帮助将不胜感激。

干杯

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:02:40.097

“标准”方法是使用基于列和行标题`INDEX`的两个函数，例如`MATCH`

`=INDEX(Table_without_headers,MATCH(Z2,row_headers,0),MATCH(Z3,column_headers,0))`

其中 Z2 和 Z3 包含搜索值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:10:25.347

![在此处输入图像描述](../Images/81bda7953a8ddd983bdca99669a83911.png)

我假设您的数据表看起来像这样，但有更多的列和更多的行。您可以结合使用 VLOOKUP 和 HLOOKUP 来实现您想要的。

在我的示例中，D11 中的公式是：

```
=VLOOKUP(D9,A1:F6,(HLOOKUP(D10,A1:F6,1,TRUE) + 1),TRUE) 
```

您需要更改此参数以匹配您的数据集，用户在 D9 和 D10 中输入，产品显示在 D11 中。

# c++ - c++: 实例化对象

> ID：12004115
> 
> 赞同：2
> 
> 时间：2012-08-17T10:29:44.853
> 
> 标签：c++, object, instantiation

> **可能重复：**
> [C++ 对象实例化与赋值](https://stackoverflow.com/questions/11853700/c-object-instantiation-vs-assignment)

我对 C++ 很陌生，想知道将对象实例化为

```
int main () {
  vector< int > x(2);
} 
```

或者

```
int main () {    
  vector< int > x = vector< int > (2); 
} 
```

除了后者需要更长的时间来写。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T10:32:10.873

区别主要在于语法：

*   `vector<int> x(2);`是*直接初始化*。

*   `vector<int> x = vector<int>(2);`是*拷贝初始化*。

后者正式要求该类具有可访问的副本构造函数，但实际上副本将被省略，并且两个版本产生完全相同的代码。

您应该始终喜欢直接初始化。

你也可以发疯：

*   `vector<int> x = vector<int>(vector<int>(vector<int>(2)));`

# caching - 再次加载网站而不是从缓存中获取

> ID：12004123
> 
> 赞同：1
> 
> 时间：2012-08-17T10:30:48.680
> 
> 标签：caching, browser

我对我的浏览器感到非常恼火，当我在我的网站上做了一些新的东西（更改脚本等）时，保存文档并再次加载页面，我的浏览器每次大约需要 3 分钟了解我已经更改了脚本中的某些内容。有什么办法可以禁用数据存储（在缓存中）并再次加载页面？还是由其他原因引起的，例如我的网站需要大约 3 分钟才能将旧文件更新为新文件？我正在使用谷歌浏览器，有时使用 Safari，如果这可能有帮助的话。

编辑：我的浏览器甚至不明白样式代码中还有大约 20 行 css。

# perl - 从给定字符串中提取任意位置的可行性？

> ID：12004126
> 
> 赞同：0
> 
> 时间：2012-08-17T10:31:19.493
> 
> 标签：perl, dictionary, awk, machine-learning, nlp

我有许多包含旅行信息的电子表格。

我需要提取该行描述旅行的开始和结束位置，以及该行中的一两件事，但那些额外的字段应该不重要。

没有所有位置的已知列表，也没有固定的文本模式，我只能寻找位置名称。

我正在搜索的字段有 0-2 个位置，有时位置有别名。

### 问题

如果我们有这个：

```
00229 | 445 | RTF | Jan   |  trn_rtn_co  | Chicago to Base1 
00228 | 445 | RTF | Jan   |  train       | Metroline to home coming from Base1
00228 | 445 | RTF | Jan   |  train_s     | Standard train journey to Friends 
```

例如，我（尽管会有所不同）会想要这个：

```
RTF|Jan|Chicago   |Base1
RTF|Jan|Home      |Base1
RTF|Jan|NULL      |Friends 
```

然后继续，查找该人（其唯一 ID 为 RTF）的含义`Base1`和`Friends`含义，并将其替换为合理的位置（假设他们只有一组“朋友”）：

```
RTF|Jan|Chicago   |Rockford
RTF|Jan|Home      |Rockword
RTF|Jan|NULL      |Milwaukee 
```

### 我需要的

我需要一种从最后一列中挑选关键词的方法，例如：*Metroline to home come from Base1*。

我正在寻找三种类型的单词：

1.  **家庭位置**
    这些是已知且有限的，我可以从列表中获取这些
2.  **Home Aliases**
    这些是已知且有限的，我可以从列表中获取这些
3.  **离开地点**
    这些是*未知*的，但英国的城市/城镇/等我不知道如何在字符串中识别这些。这是我的主要问题

### 我的想法

我想到的程序是`awk`，但我不知道我是否可以可靠地搜索以找到将专有名词（即位置）用于位置名称的位置。

是否有标准位置的包、库或字典？

我可以得到一个程序来搜索电子表格并“学习”位置的名称吗？

这似乎是一个已经解决的问题（即在文本字符串中查找单词），但我不确定我在做什么，而且我只是一个新手程序员。

对我能做的任何帮助将不胜感激。

编辑：

任何答案，例如“US_Locations_Cities 是您可以检查的内容”、“使用...检查 awk 文件中提到的字符串”、“有一个语言 X 的库可以让程序学习识别位置名称，它是不是正则表达式，但它可能会起作用”，或者“这里有一个位置名称字典*”*就可以了。

最终，任何可以帮助我做我想做的事情（即*获取位置名称*！）的东西都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:04:49.447

很抱歉告诉你，但我认为这不是 100% 可编程的。最好的办法是定义一些标准搜索：

*   Chicago to Base1
    [WORD] to [WORD]：
    其中“to”是固定的，您可以在前后查找一个单词。之前的词是你的来源和目标之后的词

*   Metroline to home 从 Base1
    [WORD] 到 [WORD] 来自 [WORD]：
    其中“to”和“coming from”是固定的，您在适当的插槽中查找三个单词。

*   ETC

如果您可以匹配源和目标-> 好的
，如果您无法匹配某些内容，则为该行抛出错误并让用户决定甚至更好地实施适当的更正，并让程序自动重新评估该行。

这些都是不平凡的目标。考虑：

*   我们的城市
*   非英文文本条目
*   缩写

对于自动纠错，请尝试将找到的 [WORD] 与我们或其他城市的列表相匹配。如果未找到城市，则抛出错误。如果您发现该错误，请将未找到的城市包含在您的城市列表中，或者将城市名称翻译为公开（官方）名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:08:03.357

我可以建议的最好的方法是，只要您的位置都是美国城市，您就可以使用邮政编码数据库，例如[这个](http://www.zip-codes.com/)。

我不知道您希望任何程序如何获取诸如`Friends`或`Base1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T15:16:20.347

我必须同意 hacktick 的观点*，就目前*而言，它是不可编程的。似乎唯一的解决方案是发明一种语言或协议。

我认为一个简单的实现如下：

1.  在这种语言中，您有两个关键字：`to`and `from`（您也可以将其分配`at`为关键字同义词`from`）。
2.  这些关键字定义了字符串的一部分，作为识别名称的“扫描区域”

我只计划实施最简单的扫描，但如帖子末尾所示，您可以进行后备。

1.  在实现中，您有一个“首选名称”哈希，您可以在其中定义要为那里出现的事物显示的名称。

    ```
    { Base1   => 'Rockford'
    , Friends => 'Milwaukee'
    , ...
    } 
    ```

2.  您可以`split`使用以下规则通过关键字之间的文本块来造句：

    A. 第一个块，如果不是关键字，则作为 'from' 的值。A. 在这个或任何后续块上，如果关键字则保存该值
    之后*的*下一个块。A. 每个值在被存储为值之前都被“扫描”为首选短语。

    ```
    my @chunks 
        = grep {; defined and ( s/^\s+//, s/\s+$//, length ) } 
          split /\b(from|to)\s+/i, $note
        ;
    my %parts = ( to => '', from => '' );
    my $key;
    do { 
        last unless my $chunk = shift @chunks;
        if ( $key ) { 
            $parts{ $key } = $preferred_title{ $chunk } // $chunk;
            $key = '';
        }
        elsif ( exists $parts{ lc $chunk } ) { 
            $key = lc $chunk;
        }
        elsif ( !$parts{from} ) { 
            $parts{from} = $preferred_title{ $chunk } // $chunk;
        }
    } while ( @chunks );
    say join( '|', $note, @parts{ qw<from to> } ); 
    ```

至少，收集这些值并将它们打印出来可以给你一个筛子来决定进一步的行动方案。这将告诉您`'home coming`' 被视为 'from' 语句，以及`'Standard train journey'`.

您*可以`'home coming'`通过修改正则表达式来修复：

```
 /\b(?:(?:coming )?(from)|(to))\s+/i 
```

我们可以将以下键值对添加到我们的首选标题哈希中：

```
home => 'Home' 
```

我们可以简单地定义`'Standard train journey' => ''`，或者我们可以创建一个拒绝模式列表，在其中我们拒绝一个字符串作为一个有意义的值，如果它们符合一个模式。

但是它们允许您转储值列表并优化您的数据扫描。另一个想法是，您似乎与您对地方的大写字母（“家”除外）的使用非常一致。所以我们可以通过将块与

```
/\b(home|\p{Upper}.*)/ 
```

请注意，这仍然认为`'Standard train journey'`是一个合适的位置。所以这仍然需要通过拒绝规则来处理。

在这里我重申，这可能是一种扫描数据的最小方法，以便您可以理解该系统需要什么作为位置并将其“80/20”下来：也就是说，希望这些规则能够处理 80%这些情况，您可以调整算法以处理剩余 20 个中的 80%，并迭代到最坏情况下您只需更改少数条目即可。

然后，您有一个规范，从那时起您在创建旅行笔记时需要遵循该规范。您甚至可以在输入笔记时对其进行扫描并提醒类似“在笔记中未找到目的地！”之类的信息。

# c# - C#从截图图像中提取字符

> ID：12004127
> 
> 赞同：0
> 
> 时间：2012-08-17T10:31:23.453
> 
> 标签：c#, character, screenshot, extract

我正在寻找一些提示，如何设法从屏幕截图（来自 Flash 游戏）中获取单个字符（在本例中为数字）。我尝试了几乎所有最流行的商业/非商业软件，但没有一个可以处理单个字符。我一直在尝试 Office Document Imaging、LeadTools、Tesseract-OCR、Aspose.OCR。我附上了图片，一个给定数字的游戏截图：

[http://desmond.imageshack.us/Himg831/scaled.php?server=831&filename=44739012.png&res=landing](http://desmond.imageshack.us/Himg831/scaled.php?server=831&filename=44739012.png&res=landing)

对我来说，很明显 OCR 会起作用，但我很惊讶，OCR 无法处理这个问题。那么你认为不可能使用 OCR 来提取这个数字吗？也许你知道我的问题的一些解决方案？

另一种选择是使用图像比较方法，但这太慢了，我不想使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:36:39.080

Microsoft OneNote 会自动解析存储在其中的图像中的所有字符。只需粘贴图像（或使用 Windows-S 启动 OneNotes 屏幕抓取）。只需右键单击并使用从图片中获取文本。

尽管它认为您的图像包含

‚3

# javascript - jQuery根本没有加载

> ID：12004130
> 
> 赞同：0
> 
> 时间：2012-08-17T10:31:36.710
> 
> 标签：javascript, jquery, load, onload

我是第一次尝试 jQuery，但我不确定如何让它正常工作。我在开始`<head>`标签附近添加了以下代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script> 
```

后面跟着下面的 jQuery 代码：

```
<script>
    $('.darkmask > img').hover(function(){
             $(this).parent().toggleClass('darkmask-hover');
    })​
</script> 
```

不幸的是，当我在浏览器或 JSFiddle 中尝试时，此代码不起作用。但是，[当我将 JSFiddle 的框架设置为加载 jQuery 本身](http://jsfiddle.net/Verandaguy/AAXSX/6/)，而不是通过我自己的代码加载 jQuery 时，动画可以正常工作。

我加载 jQuery 错了吗？如果是这样，正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:35:27.800

问题是，您在 JSFiddle 中的代码是在页面加载时执行的。相反，在您的代码中，执行发生在 HTML 元素**尚未**加载时，因为它位于 中`HEAD`，所以选择器`.darkmask`实际上引用了......什么都没有。

解决方案是使用：

```
$(document).ready(
function()
{
 ... your code here
} 
```

为了确保在页面加载并准备好时执行它，所有的 HTML 元素都在那里，因此 JQuery 选择器可以对某些东西进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:32:28.407

将您的代码包装在：

```
$(function() {
    .... Your code here ...

}); 
```

这意味着您的代码在加载 DOM 树后执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:33:28.953

执行代码时是否有任何 HTML 元素？

尝试：

```
$(function () { // this function executes when the page loads
   alert(x);
   // put your code here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T10:33:38.753

将您的整个代码包装在以下内容中：

```
$(document).ready(function() {

    //ALL CODE GOES HERE

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T12:26:10.537

您确实需要将 jQuery 代码包装在 ready 函数中，如下所示：

```
$(document).ready(function(){
    // put your code here.
}); 
```

还要确保您的脚本标签具有 type="text/javascript" 作为属性，否则它不会作为 javascript 运行。

# command-line - vim，到特定行后做一个操作

> ID：12004132
> 
> 赞同：2
> 
> 时间：2012-08-17T10:31:40.610
> 
> 标签：command-line, line, vim

在 Vim 中，您可以通过进入 vim 的命令模式并在那里输入给定行的编号来移动到给定的行。

我希望在以这种方式移动到行号后始终进行特定操作。
我怎么做？

顺便说一下，这是为了调整屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T10:39:07.370

通常，您输入以下任一命令以在命令模式下跳转到第 123 行：

```
123G
123gg 
```

您只需要找到一个键来将您的新命令映射到（我建议使用[leader key](https://stackoverflow.com/a/1764336/44562)，它正是为此目的而创建的）：

```
noremap <LEADER>G G:YourCommand<CR>
noremap <LEADER>gg gg:YourCommand<CR>
" Now you can type 123\G instead (assuming you
" have not changed your default leader key) 
```

或者，您可以覆盖现有密钥（不推荐，因为它可能会弄乱其他脚本）：

```
noremap G G:YourCommand<CR>
noremap gg gg:YourCommand<CR> 
```

# junit - 如何将万无一失的报告分为 2 个或更多类别？

> ID：12004133
> 
> 赞同：0
> 
> 时间：2012-08-17T10:31:47.340
> 
> 标签：junit, maven-3, maven-surefire-plugin, maven-site-plugin, maven-failsafe-plugin

我想将测试分为 3 个不同的类别：

*   单元
*   组件
*   系统

然后我想在不同的阶段分别运行它们，并将这些测试的执行结果显示为 3 个不同的肯定报告，或者可能是一个，但测试结果分为 3 个不同的类别。

如何用maven实现它？

我知道我可以使用故障安全 Maven 插件单独运行测试。所以这不是问题。

唯一的问题是我可以将报告分为 3 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:10:40.263

我正在使用带有 junit 类别的 maven-surefire-plugin。

```
 <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.2</version>
            <executions>
                <execution>
                    <id>unit-tests</id>
                    <goals>
                        <goal>test</goal>
                    </goals>
                    <configuration>
                        <groups>com.mycompany.mavenproject2.UnitTest</groups> 
                        <reportsDirectory> ${project.build.directory}/surefire-reports/unit</reportsDirectory> 
                        <reportNameSuffix>UNIT</reportNameSuffix>      
                    </configuration>     
                </execution>
                <execution>
                    <id>comp-tests</id>
                    <goals>
                        <goal>test</goal>
                    </goals>
                    <configuration>
                        <groups>com.mycompany.mavenproject2.ComponentTest</groups>
                        <reportsDirectory> ${project.build.directory}/surefire-reports/comp</reportsDirectory> 
                        <reportNameSuffix>COMPONENT</reportNameSuffix>                
                    </configuration>     
                </execution>
                <execution>
                    <id>sys-tests</id>
                    <goals>
                        <goal>test</goal>
                    </goals>
                    <configuration>
                        <groups>com.mycompany.mavenproject2.SystemTest</groups>
                        <reportsDirectory> ${project.build.directory}/surefire-reports/sys</reportsDirectory>
                        <reportNameSuffix>SYSTEM</reportNameSuffix>                  
                    </configuration>     
                </execution>
            </executions>
        </plugin> 
```

*它工作正常，除了它首先运行所有测试而不是将它们分成类别。* **如何消除这种行为？**

## Build 产生了一个输出。

## 测试

运行 com.mycompany.mavenproject2.AppTest UnitTest ComponentTest SystemTest 测试运行：3，失败：0，错误：0，跳过：0，经过时间：0.031 秒

结果 ：

测试运行：3，失败：0，错误：0，跳过：0

[surefire:test] Surefire 报告目录：C:\Users\mz\Documents\NetBeansProjects\mavenproject2\target\surefire-reports\unit

* * *

## 测试

并发配置为 parallel='none', perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false Running com.mycompany.mavenproject2.AppTest UnitTest 测试运行：1，失败：0，错误：0，跳过：0，经过时间：0.003秒

结果 ：

测试运行：1，失败：0，错误：0，跳过：0

[surefire:test] Surefire 报告目录：C:\Users\mz\Documents\NetBeansProjects\mavenproject2\target\surefire-reports\comp

* * *

## 测试

并发配置为 parallel='none', perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false Running com.mycompany.mavenproject2.AppTest ComponentTest 测试运行：1，失败：0，错误：0，跳过：0，经过时间：0.003秒

结果 ：

测试运行：1，失败：0，错误：0，跳过：0

[surefire:test] Surefire 报告目录：C:\Users\mz\Documents\NetBeansProjects\mavenproject2\target\surefire-reports\sys

* * *

## 测试

并发配置为 parallel='none', perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false Running com.mycompany.mavenproject2.AppTest SystemTest 测试运行：1，失败：0，错误：0，跳过：0，经过时间：0.003秒

结果 ：

测试运行：1，失败：0，错误：0，跳过：0

# javascript - 使用 JQuery 检查随机复选框

> ID：12004134
> 
> 赞同：2
> 
> 时间：2012-08-17T10:32:01.130
> 
> 标签：javascript, jquery, html

我知道如何用 ID 和 CLASS 选中和取消选中特定的复选框。但我想使用 Jquery 随机选择 10 个复选框。

我每次都会有 100,40 或 XX 个复选框。（HTML Checkbox）可能是 100 个复选框或 50 个复选框或其他东西。每次都会不同。

我想在按下按钮时随机检查 10 个复选框。用户可以手动选择这 10 个复选框。或者他们可以只按随机按钮。

我正在使用 Jquery。

```
$(':checkbox:checked').length; 
```

但我想找到所有复选框的长度，我想检查 10 个随机复选框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:14:41.503

你在寻找这样的东西吗？

[http://jsfiddle.net/qXwD9/](http://jsfiddle.net/qXwD9/)

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

    <script>
        //Creating random numbers from an array
        function getRandomArrayElements(arr, count) {
            var randoms = [], clone = arr.slice(0);
            for (var i = 0, index; i < count; ++i) {
                index = Math.floor(Math.random() * clone.length);
                randoms.push(clone[index]);
                clone[index] = clone.pop();
            }
            return randoms;
        }

        //Dummy array
        function createArray(c) {
            var ar = [];
            for (var i = 0; i < c; i++) {
                ar.push(i);
            }
            return ar;
        }

        //check random checkboxes
        function checkRandom(r, nodeList) {
            for (var i = 0; i < r.length; i++) {
                nodeList.get(r[i]).checked = true;
            }
        }

        //console.log(getRandomArrayElements(a, 10));

        $(function() {

            var chkCount = 100;
            //this can be changed

            var numberOfChecked = 10;
            //this can be changed

            var docFrag = document.createElement("div");

            for (var i = 0; i <= chkCount; i++) {
                var chk = $("<input type='checkbox' />");
                $(docFrag).append(chk);
            }

            $("#chkContainer").append(docFrag);

            $("#btn").click(function(e) {

                var chks = $('input[type=checkbox]');

                chks.attr("checked", false);

                var a = createArray(chkCount);
                var r = getRandomArrayElements(a, numberOfChecked);

                //console.log(r);

                checkRandom(r, chks);
            });

        });
    </script>

</head>
<body>        

    <div id="chkContainer"></div>
    <div>
        <input type="button" id="btn" value="click" />
    </div>

</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:18:15.020

这个怎么样：

工作示例：http: [//jsfiddle.net/MxGPR/23/](http://jsfiddle.net/MxGPR/23/)

**HTML：**

```
<button>Press me</button>
<br/><br/>
<div class="checkboxes">
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
</div> 
```

**JAVASCRIPT（需要 JQuery）：**

```
$("button").click(function() {
    // How many to be checked?
    var must_check = 10;
    // Count checkboxes
    var checkboxes = $(".checkboxes input").size();
    // Check random checkboxes until "must_check" limit reached
    while ($(".checkboxes input:checked").size() < must_check) {
        // Pick random checkbox
        var random_checkbox = Math.floor(Math.random() * checkboxes) + 1;
        // Check it
        $(".checkboxes input:nth-child(" + random_checkbox + ")").prop("checked", true);
    }
}); 
```

# php - 允许多个单个单词的正则表达式

> ID：12004137
> 
> 赞同：0
> 
> 时间：2012-08-17T10:32:02.380
> 
> 标签：php, regex

当用户只能在文本框中输入 1 个单词时，我有一个有效的正则表达式。但是，我该如何调整它，以允许 2、3、4、5 个单词？有时，我可能需要更改代码以仅允许 3 个单词，例如。

这是我的正则表达式`^([a-zA-Z_\-\.]+)$`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:55:32.060

用于匹配 2,3,4,5 个单词

```
^(\b[a-zA-Z_\-\.]+?\b\s*){2,5}$ 
```

用于匹配 2 或 4 个单词

```
^(\b[a-zA-Z_\-\.]+?\b\s*){2}$|^(\b[a-zA-Z_\-\.]+?\b\s*){4}$
or
^((\b[a-zA-Z_\-\.]+?\b\s*){2}|(\b[a-zA-Z_\-\.]+?\b\s*){4})$ 
```

但它在测试中失败`abc.def`并且`abc_def`=（它找到了两个词。`\b`你的词汇表是错误的想法`[a-zA-Z_\-\.]+`......

* * *

好的，就是这样。

对于 2,3,4,5 字

```
^([a-zA-Z_\-\.]+[^a-zA-Z_\-\.]+){1,4}[a-zA-Z_\-\.]+$ 
```

请注意，现在最后不允许使用非字母符号。

# javascript - 如何给 HTML 标签编号？

> ID：12004145
> 
> 赞同：2
> 
> 时间：2012-08-17T10:32:21.910
> 
> 标签：javascript, html

有可能吗，如果可以，怎么办？为 HTML 标签编号，例如，如果有人按下一个调用 javascript 方法的按钮，该方法可以通过其编号识别哪个按钮被按下。然后我想通过将所有图像文件名放在一个数组中来更改按钮的图像，以便使用 1 行 JavaScript 轻松更改图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T10:54:09.713

在 HTML5 中，您可以使用[自定义属性](http://www.javascriptkit.com/dhtmltutors/customattributes.shtml)，它们的名称必须以“data-”开头。

```
<input type="button" data-index="1" /> 
```

不依赖于此，您可以添加一个包含数字的类名，例如

```
<input type="button" class="index-1" /> 
```

另一种方法是使用[不显眼的 javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)通过 Javascript 附加事件侦听器作为保持对按钮索引号的引用的闭包：

```
$('.buttonclass').each(function(index, button){
    button.click(function(){
        // event handling code that uses the index variable
    })
}); 
```

（上面的代码使用了 jQuery，这不是绝对必要的，但让事情变得更容易）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T10:43:31.160

您可以为此使用自定义属性：

```
<input type="button" data-sno="1"> 
```

# ruby-on-rails - 在 Rails 3 in Action 中，为什么 User 没有与 Projects 的 has_many 关联？

> ID：12004147
> 
> 赞同：2
> 
> 时间：2012-08-17T10:32:25.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, has-many

我一直在通过[Rails 3 In Action](http://manning.com/katz/)工作，其中一个元素让我感到困惑。

为什么用户没有与 Projects 声明的 has_many 关联？项目 has_many 门票。User 与 Project 的关系与 Project 与 Ticket 的关系有何不同？

我会发布代码，但我认为这个问题只对读过这本书的人有意义（因此有代码可以参考）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:57:20.133

用户永远不需要有很多项目，因为向用户显示项目的方式是通过`Project`模型上的范围。如果您想拥有这种关联，那么您将需要在实例上拥有一个`user_id`属性。`Project`

# objective-c - 即使删除后，已删除的 NSManagedObject 仍保留在内存中

> ID：12004149
> 
> 赞同：0
> 
> 时间：2012-08-17T10:32:28.347
> 
> 标签：objective-c, core-data, nsmanagedobject

我在 iPad 应用程序上遇到了一些与 CoreData 相关的问题。这次是关于删除对象。查看仪器（分配模板），我发现我删除的对象永远留在内存中，或者至少 7 小时，即我离开仪器的时间。泄漏仪器也没有显示任何内容。

在保存上下文后，我仔细检查了未在其行中显示对象的表视图以及物理上缺少行的数据库本身。

我无法通过工具来判断谁在保留对它的引用，从而阻止对象被释放。

我正在使用 ARC，并且 NSFetchedResultsController 正在管理 UITableView。

您对使用哪些工具有任何猜测或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:17:15.157

你不应该担心那个。如果您尝试访问该对象，核心数据会给您一个异常，告诉您它无法满足该对象的错误。该对象已从应用程序的数据库中消失。核心数据的内部工作可能会出于其他目的保留对其的引用，但该目的不在您的控制范围内。

# iphone - 如何使用私有 API 在 iOS 上运行后台进程以同步电子邮件项目而不越狱手机

> ID：12004150
> 
> 赞同：6
> 
> 时间：2012-08-17T10:32:29.750
> 
> 标签：iphone, ios, background-process, iphone-privateapi

我正在开发一个类似于联系人、日历的企业应用程序。即使我的应用程序在后台，我也想同步我的日历和联系人。我也很喜欢使用私有 API，因为我不会提交到应用商店。请注意，我想在不越狱设备的情况下完成这项工作。

[已经在这里](https://stackoverflow.com/questions/2258280/is-it-possible-to-run-a-background-process-on-the-iphone-using-private-apis)发布了一个类似的问题，我正在创建这个新线程，因为已经发布的一个已经为越狱设备建议了一个解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T09:11:02.550

我正在分享我自己问题的答案，因为这可能对其他人有所帮助

脚步：

# 1：在您的 application-info.plist 中添加“必需的后台模式”键，并将值分配为“应用程序提供 IP 语音服务”为其项目。

# 2：在您的 appdelegate.m 文件中，实现“applicationDidEnterBackground:”方法，如下面的代码片段。

```
static int counter;
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    //Minimun keepAliveTimeout is 600 seconds
    [[UIApplication sharedApplication] setKeepAliveTimeout:605 handler:^{ 
        //do your task
        counter ++;
        NSLog(@"Counter # %d", counter);
    }];
} 
```

例如，我在给定的时间间隔内打印计数器变量下面是输出日志消息：

```
2012-08-27 14:06:09.216 BackgroundApplicationForVOIP[1129:207] Counter # 1
2012-08-27 14:16:14.218 BackgroundApplicationForVOIP[1129:207] Counter # 2
2012-08-27 14:26:19.219 BackgroundApplicationForVOIP[1129:207] Counter # 3
2012-08-27 14:36:24.220 BackgroundApplicationForVOIP[1129:207] Counter # 4
2012-08-27 14:46:29.221 BackgroundApplicationForVOIP[1129:207] Counter # 5
2012-08-27 14:54:21.000 BackgroundApplicationForVOIP[1129:207] Counter # 6
2012-08-27 15:19:48.099 BackgroundApplicationForVOIP[1129:207] Counter # 7
2012-08-27 15:26:03.201 BackgroundApplicationForVOIP[1129:207] Counter # 8
2012-08-27 15:39:50.167 BackgroundApplicationForVOIP[1129:207] Counter # 9
2012-08-27 16:07:28.112 BackgroundApplicationForVOIP[1129:207] Counter # 10
2012-08-27 16:13:43.217 BackgroundApplicationForVOIP[1129:207] Counter # 11
2012-08-27 16:23:48.218 BackgroundApplicationForVOIP[1129:207] Counter # 12
2012-08-27 16:33:53.219 BackgroundApplicationForVOIP[1129:207] Counter # 13
2012-08-27 16:43:58.220 BackgroundApplicationForVOIP[1129:207] Counter # 14
2012-08-27 16:54:03.221 BackgroundApplicationForVOIP[1129:207] Counter # 15 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T13:50:36.737

If this is an enterprise app and you're not submitting to Apple then I would explore having your app identify itself as a VOIP app. Then you can set a keepAliveTimer and get get periodic processing time in the background to do what you need.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T18:55:49.813

如果你想连续运行，另一个想法是在 Info.plist 的所需背景模式中启用“音频”，并继续循环播放无声 mp3 直到你想继续运行。

# c# - 在沙箱中运行 IronRuby 代码

> ID：12004152
> 
> 赞同：2
> 
> 时间：2012-08-17T10:32:38.720
> 
> 标签：c#, .net, asp.net-mvc, ironruby

我有一个 Web 应用程序，它允许用户输入要使用 IronRuby 执行的 Ruby 程序，并将其结果输出到网页。

这是我用来创建 IronRuby 引擎并运行代码的代码：

```
var engine = Ruby.CreateEngine();

var source = engine.CreateScriptSourceFromString
                (sourceCodeSpecifiedByUser, SourceCodeKind.Statements);

source.ExecuteProgram(); 
```

这存在一个安全问题，因为任何用户都可以运行 Ruby 代码来执行不安全的任务（例如，枚举/修改文件）。

我想尝试将像`File.open`,`Dir`这样的字符串列入黑名单肯定会失败，所以我什至没有考虑过这种可能性。

有没有办法以较低的权限运行 IronRuby 引擎以避免安全问题？

# ios - performSelector afterDelay 带有多个参数错误

> ID：12004154
> 
> 赞同：1
> 
> 时间：2012-08-17T10:32:40.377
> 
> 标签：ios, ios5, xcode4, unrecognized-selector, performselector

我在此代码上的 performSelector 方法遇到了一些问题：

此方法在其他名为“JSONMethods”的类中：

```
+(void)sendPostMsgWithMultipleArguments:(NSArray *)myArgs {
[self sendPostMsg:[myArgs objectAtIndex:0]:[myArgs objectAtIndex:1]];
} 
```

然后，在另一堂课上，我接到了电话：

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.title = @"Loading...";

JSONMethods *methods = [[JSONMethods alloc]init];
NSArray *arguments = [[NSMutableArray alloc]initWithObjects:@"http://localhost/promos/txFirmas.php",[NSString stringWithFormat:@"sensor=%d",tableViewNumber], nil];
[methods performSelector:@selector(sendPostMsgWithMultipleArguments:)
           withObject:arguments
           afterDelay:3.0];

NSString *tit = [NSString stringWithFormat:@"Sign: %d",tableViewNumber];
self.title = tit;
} 
```

我想等到“sendPostMsgWithMultipleArguments：”完成更改标题，我该怎么做？当我对此进行测试时，mi app 崩溃并通过控制台向我显示：

```
2012-08-17 12:09:15.966 MapaProject[524:11603] -[JSONMethods sendPostMsgWithMultipleArguments:]: unrecognized selector sent to instance 0x7c85b70
2012-08-17 12:09:15.968 MapaProject[524:11603] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[JSONMethods sendPostMsgWithMultipleArguments:]: unrecognized selector sent to instance 0x7c85b70'
*** First throw call stack:
(0x133a022 0x2016cd6 0x133bcbd 0x12a0ed0 0x12a0cb2 0xa1c85d 0x130e936 0x130e3d7 0x1271790 0x1270d84 0x1270c9b 0x15db7d8 0x15db88a 0xf6626 0x236d 0x20c5)
terminate called throwing an exception 
```

你能帮助我吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:37:19.413

改变`+(void)sendPostMsgWithMultipleArguments:(NSArray *)myArgs`

至`-(void)sendPostMsgWithMultipleArguments:(NSArray *)myArgs`

甚至更好的改变

`[methods performSelector:@selector(sendPostMsgWithMultipleArguments:) withObject:arguments afterDelay:3.0];`

至`[[methods class] performSelector:@selector(sendPostMsgWithMultipleArguments:) withObject:arguments afterDelay:3.0];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T14:04:12.897

NSArray * mutArray = [NSArray arrayWithObjects:[NSNumber numberWithInt:0],[NSNumber numberWithInt:2], nil]

[self performSelector:@selector(loadMore:) withObject:mutArray afterDelay:1.9];

```
-(void)loadMore:(NSArray *)array
{
 NSNumber * myNumber = [array objectAtIndex:0];
 NSNumber * myNumber2 = [array objectAtIndex:1]; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T05:51:27.060

**在迅速 3**

您可以制作字典来保存多个参数并与选择器一起传递

```
let argumentsDict = ["arg1Key": arg1Value, "arg2Key": arg2Value] as [String : Any]

perform(#selector(selectorWithMultipleArg), with: argumentsDict, afterDelay: 3.0) 
```

在选择器函数内部，使用guard取出值并使用它们。我使用 2 个不同类型的参数来更好地解释 .ie Int 和 String

```
func selectorWithMultipleArg(_ arguments: [String: Any]) {

    guard let arg1Value = arguments["arg1Key"] as? Int else {
        fatalError("Invalid value 1")
    }

    guard let arg2Value = arguments["arg2Key"] as? String else {
        fatalError("Invalid value 2")
    }
    print("Value 1: \(arg1Value)")
    print("Value 2: \(arg2Value)")

} 
```

我希望这会对你有所帮助

# c# - 需要将 C# 字符串传递给 javascript 函数

> ID：12004159
> 
> 赞同：0
> 
> 时间：2012-08-17T10:32:54.930
> 
> 标签：c#, javascript, jquery, asp.net

> **可能重复：**
> [如何将变量从 c# 传递到 javascript？](https://stackoverflow.com/questions/3553680/how-do-you-pass-variables-from-c-sharp-to-javascript)

我有一个在登录期间验证用户凭据的 C# 方法。

```
public string CreateLoginjson(string strErrorType, bool blIsAuthenticated)
{
    StringBuilder sbLoginJson = new StringBuilder();
    if (blIsAuthenticated)
    {
        sbLoginJson.Append("{LoginSuccess:1");
    }
    else
    {
        sbLoginJson.Append("{LoginSuccess:0");
    }

    if (strErrorType != string.Empty)
    {
        if (strErrorType.TrimEnd(new char[] { ',' }) == "Token")
        {
            sbLoginJson.Append(",txtTestTokenNumber1:\"Error\"");
            sbLoginJson.Append(",txtTestTokenNumber2:\"Error\"");
            sbLoginJson.Append(",txtTestTokenNumber3:\"Error\"");
            sbLoginJson.Append(",txtTestTokenNumber4:\"Error\"");

        }
        else if (strErrorType.TrimEnd(new char[] { ',' }) == "Password")
        {
            sbLoginJson.Append(",txtPassword:\"Error\"");

        }
        else if (strErrorType.TrimEnd(new char[] { ',' }) == "UserName")
        {
            sbLoginJson.Append(",UserName:\"Error\"");

        }

    }
    sbLoginJson.Append("}");

    return sbLoginJson.ToString();

} 
```

我现在必须将字符串 sbLoginJson 传递给 Javascript 函数，该函数检查用户是否未能提供登录详细信息。

Java Script Function，到目前为止我已经写过。

```
function GetLoginJson(strLoginJson) {
    if (strLoginJson != "" && strLoginJson != undefined) {
        var objLoginJson = eval('"+strLoginJson+"');
    }
    if(objLoginJson.sbLoginJson())
    {

    }
    else
    {

    }
} 
```

有人可以告诉我如何传递字符串并使其工作吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:41:25.137

创建一个受保护的属性并将其设置在代码中的某个位置：

```
protected string LoginJson { get; set; } 
```

然后像这样使用它：

```
var strLoginJson = '<% =LoginJson %>'; 
```

您也可以直接调用您的公共方法，但是，考虑到您的方法与身份验证有关，我不建议这样做：

```
var strLoginJson = '<% = CreateLoginjson(a, b) %>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:24:57.977

你可以使用jquery。
单击登录时，您可以发出 ajax 请求并调用 CreateLoginjson() 方法并使用返回的字符串并传递给另一个 javascript 函数。

您调用的 C# 方法必须是公共的，并且应该使用 [WebMethod]

您可以在 jquery-ajax 请求的成功功能中执行此操作，例如..

```
$.ajax(
 {
   //other options, url,data etc.
   success: function(response) {
     GetLoginJson(response.d); // d holds your returned string.
   }
 }
); 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:51:10.970

将您的字符串放在标签中并设置这些属性（Enabled="false" style="display: none;"）。您可以在javascript中访问标签内容，并在函数执行后，从代码中调用javascript函数。请参阅下面的链接。

[注册启动脚本](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerstartupscript.aspx)或[从服务端执行 Javascript](http://blogs.telerik.com/blogs/posts/09-05-05/executing-javascript-function-from-server-side-code.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T10:56:21.330

将字符串放入 ViewData

# php - php mysql 连接三个数据库

> ID：12004160
> 
> 赞同：-1
> 
> 时间：2012-08-17T10:32:57.563
> 
> 标签：php, mysql

我为我的项目使用了 3 个不同的数据库。它包含相同的密码和用户名。代码是

```
$con = mysql_pconnect(hostname, username, password) or die("Connection     Error: " . mysql_error());
mysql_select_db(database_name, $con) or die("Error connecting to DB. " . mysql_error());

$con1 = mysql_pconnect(hostname, username, password) or die("Connection Error: " . mysql_error());
mysql_select_db(database_name, $con) or die("Error connecting to DB. " . mysql_error());

$con2 = mysql_pconnect(hostname, username, password) or die("Connection Error: " . mysql_error());
mysql_select_db(database_name, $con) or die("Error connecting to DB. " . mysql_error()); 
```

三个数据库没有正确连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:34:59.950

看起来您可能`$`在连接字符串的变量前面缺少任何一个：

```
$con = mysql_pconnect($hostname, $username, $password) or die("Connection     Error: " . mysql_error()); 
```

或者您需要确保在条目周围使用引号。

尽管如此，如果您正在编写新代码，您可能应该使用[PDO](http://au.php.net/manual/en/book.pdo.php)连接到数据库。

编辑：此外，即使您正在建立新的连接，您仍然会继续使用您在语句`$con`中定义的第一个连接（全部使用而不是, ）。`mysql_select_db``$con``$con1``$con2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:41:07.383

```
$con = mysql_pconnect($hostname, $username, $password) or die("Connection     Error: " . mysql_error());
mysql_select_db($database_name, $con) or die("Error connecting to DB. " . mysql_error());

$con1 = mysql_pconnect($hostname, $username, $password) or die("Connection Error: " . mysql_error());
mysql_select_db($database_name1, $con1) or die("Error connecting to DB. " . mysql_error());

$con2 = mysql_pconnect($hostname, $username, $password) or die("Connection Error: " . mysql_error());
mysql_select_db($database_name2, $con2) or die("Error connecting to DB. " . mysql_error()); 
```

您在每个选择中都选择了第一个 db。这是对的。另请注意，您必须在 3 个 diff 变量中具有 3 个不同的数据库名称，如下所示

```
$database_name="dbase";
$database_name1="dbase1";
$database_name2="dbase2"; 
```

现在它将连接到所有 3 个数据库，而不是像您的代码中那样只连接一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:40:01.607

如果那是您的代码，您将连续选择相同的数据库空闲时间。大概应该是这样的

```
 $con = mysql_pconnect(hostname, username, password) or die("Connection     Error: " . mysql_error());
        mysql_select_db(database_name, $con) or die("Error connecting to DB. " . mysql_error());

        $con1 = mysql_pconnect(hostname, username, password) or die("Connection Error: " . mysql_error());
        mysql_select_db(database_name1, $con1) or die("Error connecting to DB. " . mysql_error());

        $con2 = mysql_pconnect(hostname, username, password) or die("Connection Error: " . mysql_error());
       mysql_select_db(database_name2, $con2) or die("Error connecting to DB. " . mysql_error()); 
```

（更改了 mysql_select_db 中的数据库名称和连接）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T10:45:08.597

看这取决于..如果您连接到 3 个不同的主机，那么您的连接参数可能会更改，但数据库名称可以相同..但是如果您尝试连接到同一数据库服务器，则必须选择 3 个不同的数据库。很简单..为什么要选择同一个数据库 3 次？

# php - php getcwd() - 排除服务器目录

> ID：12004162
> 
> 赞同：0
> 
> 时间：2012-08-17T10:33:09.080
> 
> 标签：php, explode, getcwd

我有以下代码行可以在我的本地机器上运行，因为服务器的根目录与站点的根目录相同。

```
$directories = explode("/", str_replace($_SERVER['DOCUMENT_ROOT'] . "/", "",  getcwd())); 
```

我如何调整它以在我的删除服务器上工作，其中根目录低于站点的几个级别。我想我只需要包含站点目录而不是服务器目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:16:06.250

我的逻辑表明您需要将远程服务器地址放在这里：

```
$directories = explode("/here/", str_replace($_SERVER['DOCUMENT_ROOT'] . "/", "",  getcwd())); 
```

如果这不起作用，请检查这些线程，我认为您的解决方案在其中之一

SO 线程： [根路径不适用于 php include](https://stackoverflow.com/questions/1400795/root-path-doesnt-work-with-php-include)

Tech-Recipes-Thread： [PHP：确定服务器根目录路径](http://www.tech-recipes.com/rx/313/php-determine-the-directory-path-of-the-server-root/)

# php - SyntaxError：XML 源的意外结束

> ID：12004163
> 
> 赞同：1
> 
> 时间：2012-08-17T10:33:17.613
> 
> 标签：php, xml, salesforce

我有一个网站，我正在使用 saleforce.com 。

这是我的代码：

```
function salesforce() {
    var first_name = $("#first_name_new").val();
    var last_name = $("#last_name_new").val();
    var coupon_code = $("#coupon_code_new").val();
    var phone = $("#phone_new").val();
    var email = $("#email_new").val();
    var state = $("#state_new").val();
    var oid = "00DU0000000HB32";
    var retURL = "http://www.testsite.com";
    var debug = "1";
    var debugEmail = "arnold@gmail.com"; 
    //alert(first_name_new+"/"+last_name+"/"+coupon_code+"/"+phone+"/"+email+"/"+state);

    $.ajax({
        type: "POST",
        dataType: 'jsonp',
        url: "https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8",
        data: { first_name: first_name, last_name: last_name, phone: phone, email:email, state:state, oid:oid, debug:debug, debugEmail:debugEmail },
        success:function(data){
            contactSent = "true";

        },
        error:function(data){
            contactSent = "true";
        }   
    });
} 
```

我在点击按钮时调用了这个函数：

```
$(function(){
$('.next-product').click(function(){
                 salesforce();
 });
}); 
```

这是按钮：

```
 <button class="next-product">Next</button> 
```

当我单击按钮时，它会在错误中显示错误：

```
SyntaxError: unexpected end of XML source
<BR><BR>Your request has been queued.<BR><BR>Record Information:<BR><BR>_: 1345203119160<BR>callback: jQuery172007126272654237087_1345203087782<BR>debug: 1<BR>debugEmail: arnold@gmail.com<BR>email: mariya@galtech.org<BR>encoding: UTF-8<BR>first_name: ttt<BR>last_name: tttteee<BR>oid: 00DU0000000HB32<BR>phone: 1234567896<BR>state: kerala<BR> 
```

我该如何解决这个问题？

编辑：

这是我正在使用的页面中的整个代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>TradeYourWreck.com | Wrecked Car? Don&#039;t sell it&#8230; Fix it</title>
        <link href="tyw.css" rel="stylesheet" type="text/css" />
        <link type="text/css" href="css/redmond/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
        <script type="text/javascript" src="js/ajaxupload.3.5.js" ></script>
        <script type="text/javascript" src="http://www.carqueryapi.com/js/carquery.0.3.3.js"></script>
        <!--[if lte IE 7]>
<style>
.content { margin-right: -1px; } /* this 1px negative margin can be placed on any of the columns in this layout with the same corrective effect. */
ul.nav a { zoom: 1; }  /* the zoom property gives IE the hasLayout trigger it needs to correct extra whiltespace between the links */
</style>
<![endif]-->
        <script type="text/javascript">
$(document).ready(
function()
{
     //Create a variable for the CarQuery object.  You can call it whatever you like.
     var carquery = new CarQuery();

     //Run the carquery init function to get things started:
     carquery.init();

     //Optionally, you can pre-select a vehicle by passing year / make / model / trim to the init function:
     //carquery.init('2000', 'dodge', 'Viper', 11636);

     //Optional: Pass sold_in_us:true to the setFilters method to show only US models. 
     carquery.setFilters( {sold_in_us:true} );

     //Optional: initialize the year, make, model, and trim drop downs by providing their element IDs
     carquery.initYearMakeModelTrim('car-years', 'car-makes', 'car-models', 'car-model-trims');

     //Optional: set the onclick event for a button to show car data.
     $('#cq-show-data').click(  function(){ carquery.populateCarData('car-model-data'); } );

     //Optional: initialize the make, model, trim lists by providing their element IDs.
     carquery.initMakeModelTrimList('make-list', 'model-list', 'trim-list', 'trim-data-list');

     //Optional: set minimum and/or maximum year options.
     carquery.year_select_min=1980;
     carquery.year_select_max=2012;

     //Optional: initialize search interface elements.
     //The IDs provided below are the IDs of the text and select inputs that will be used to set the search criteria.
     //All values are optional, and will be set to the default values provided below if not specified.
     var searchArgs =
     ({
         body_id:                       "cq-body"
        ,default_search_text:           "Keyword Search"
        ,doors_id:                      "cq-doors"
        ,drive_id:                      "cq-drive"
        ,engine_position_id:            "cq-engine-position"
        ,engine_type_id:                "cq-engine-type"
        ,fuel_type_id:                  "cq-fuel-type"
        ,min_cylinders_id:              "cq-min-cylinders"
        ,min_mpg_hwy_id:                "cq-min-mpg-hwy"
        ,min_power_id:                  "cq-min-power"
        ,min_top_speed_id:              "cq-min-top-speed"
        ,min_torque_id:                 "cq-min-torque"
        ,min_weight_id:                 "cq-min-weight"
        ,min_year_id:                   "cq-min-year"
        ,max_cylinders_id:              "cq-max-cylinders"
        ,max_mpg_hwy_id:                "cq-max-mpg-hwy"
        ,max_power_id:                  "cq-max-power"
        ,max_top_speed_id:              "cq-max-top-speed"
        ,max_weight_id:                 "cq-max-weight"
        ,max_year_id:                   "cq-max-year"
        ,search_controls_id:            "cq-search-controls"
        ,search_input_id:               "cq-search-input"
        ,search_results_id:             "cq-search-results"
        ,search_result_id:              "cq-search-result"
        ,seats_id:                      "cq-seats"
        ,sold_in_us_id:                 "cq-sold-in-us"
     }); 
     carquery.initSearchInterface(searchArgs);

     //If creating a search interface, set onclick event for the search button.  Make sure the ID used matches your search button ID.
     $('#cq-search-btn').click( function(){ carquery.search(); } );
});
</script>
        <script type="text/javascript">
        var contactSent = "false";

    $(function(){
        //$("#tabVPhoto").hide();
        $("#tabPkg").hide();
        $('#tabs').tabs({
            fx: { 
                opacity: 'toggle' 
            }
        });
    });

    function lookupVIN() {
        //console.log("lookup vin");
        var car_vin = $("#car-vin").val();
        $.ajax({
            type: "GET",
            url: "vin.php",
            data: { car_vin: car_vin },
            success:function(data){
                //console.log(data);
                $("#vinDet").html(data);
                //vinDet
            },
            error:function(data){
            }   
        });

    }

    function salesforce() {
        var first_name = $("#first_name").val();
        var last_name = $("#last_name").val();
        var phone = $("#phone").val();
        var email = $("#email").val();
        var state = $("#state").val();
        var oid = "00DU0000000HB32";
        var retURL = "http://www.tradeyourwreck.com";
        var debug = "1";
        var debugEmail = "arnold@vemark.com"; 

        $.ajax({
            type: "POST",
            dataType: 'jsonp',
            url: "https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8",
            data: { first_name: first_name, last_name: last_name, phone: phone, email:email, state:state, oid:oid, debug:debug, debugEmail:debugEmail },
            success:function(data){
                contactSent = "true";
            },
            error:function(data){
                contactSent = "true";
            }   
        });
    }

    $(function(){
        $('.next-product').click(function(){
            var index = jQuery('#tabs').data('tabs').options.selected;
            //console.log(contactSent);
            var pkg = $('input:radio[name=pkg]:checked').val();
            /*
            if(pkg=="self") {
                $("#tabVPhoto").show();
                $("#tabVCond").show();
                $("#self").show();
                $("#inspect").hide();
            }else {
                $("#tabVPhoto").hide();
                $("#tabVCond").hide();
                $("#self").hide();
                $("#inspect").show();
                //alert('inspect');
            }
            */
            var $tabs = $('#tabs').tabs();
            var selected = $tabs.tabs('option', 'selected');
            $tabs.tabs('select', selected+1);

            if(index==0) {
             if(contactSent == "false"){
                 salesforce();
             }
            }

    })
    $('.previous-product').click(function(){ 
            var index = jQuery('#tabs').data('tabs').options.selected;
            //console.log(index);
                    var pkg = $('input:radio[name=pkg]:checked').val();
                    if(pkg=="self") {
                        $("#tabVPhoto").show();
                        $("#tabVCond").show();

                    }else {
                        $("#tabVPhoto").hide();
                        $("#tabVCond").hide();
                        //alert('inspect');
                    }

                    var $tabs = $('#tabs').tabs();
                    var selected = $tabs.tabs('option', 'selected');
                    $tabs.tabs('select', selected-1);
                })

                $( '.next-product').button({
                    text: true,
                    icons: {
                    primary: "ui-icon-seek-next"
                    }
                });

                $( '.previous-product' ).button({
                    text: true,
                    icons: {
                        primary: "ui-icon-seek-prev"
                    }
                });

            }); 

    $(function(){
        var cntUp = 0;

        var btnUpload=$('#upload');
        var status=$('#status');
        new AjaxUpload(btnUpload, {
            action: 'upload-file.php',
            name: 'uploadfile',
            onSubmit: function(file, ext){
                 if (! (ext && /^(jpg|png|jpeg|gif)$/.test(ext))){ 
                    // extension is not allowed 
                    alert('Only JPG, PNG or GIF files are allowed');
                    return false;
                }
                status.text('Uploading...');
            },
            onComplete: function(file, response){
                //On completion clear the status
                status.text('image uploaded');
                cntUp++;
                //console.log(cntUp);
                //Add uploaded file to list
                if (response.toLowerCase().indexOf("success") >= 0 ) {
                //alert('success');
                $('<li></li>').appendTo('#files').html('<img src="uploads/'+file+'" alt="" /><br />'+file).addClass('success');
                }  else{
                    $('<li></li>').appendTo('#files').text(file).addClass('error');
                    //alert('error');
                }
            }
        });

    });

        </script>
        </head>

        <body>
<div class="container">
          <div class="header">
    <nav id="access" role="navigation">
              <div class="menu-top-menu-container">
        <ul id="menu-top-menu" class="menu">
                  <li id="menu-item-30" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-25 current_page_item menu-item-30"><a href="index.php">Home</a></li>
                  <li id="menu-item-21" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-21"><a href="about.php">About TradeYourWreck.com</a></li>
                  <li id="menu-item-22" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-22"><a href="inquiries.php">Inquiries</a></li>
                </ul>
      </div>
            </nav>
    <a href="index.php"> <img src="images/header1.jpg" width="1000" height="163" alt=""> </a> </div>
          <?php include 'inc/sidebar.php'; ?>
          <div class="content">
    <div style="width:675px; margin: 0 auto; margin-top:10px; font-size:12px;" id="tabs">
              <ul>
        <!--<li id="tabPkg"><a href="#tabs-1">Select Your Package</a></li> -->
        <li id="tabVInfo"><a href="#tabs-2">Contact Information</a></li>
        <li id="tabVCond"><a href="#tabs-3">Vehicle Information</a></li>
        <li id="tabVPhoto"><a href="#tabs-4">Additional Vehicle Information</a></li>
        <li id="tabVCheck"><a href="#tabs-5">Check Out</a></li>
      </ul>
              <div id="tabs-2">
        <input type=hidden name="oid" value="00DU0000000HB32">
        <input type=hidden name="retURL" value="http://www.tradeyourwreck.com">
        <input type="hidden" name="debug" value=1>
        <input type="hidden" name="debugEmail" value="arnold@vemark.com">
        <!--<input type="hidden" name="debugEmail" value="jweeks@thoughtwm.com">-->
        <table cellpadding="3">
                  <tr>
            <td>First Name</td>
            <td><input  id="first_name" maxlength="40" name="first_name" size="20" type="text" /></td>
          </tr>
                  <tr>
            <td>Last Name</td>
            <td><input  id="last_name" maxlength="80" name="last_name" size="20" type="text" /></td>
          </tr>
                  <tr>
            <td>Phone</td>
            <td><input  id="phone" maxlength="40" name="phone" size="20" type="text" /></td>
          </tr>
                  <tr>
            <td>Email Address</td>
            <td><input  id="email" maxlength="80" name="email" size="30" type="text" /></td>
          </tr>
                  <tr>
            <td>State/Province</td>
            <td><input  id="state" maxlength="20" name="state" size="20" type="text" /></td>
          </tr>
                  <tr>
            <td>&nbsp;</td>
            <td><button class="previous-product">Previous</button>
                      <button class="next-product">Next</button></td>
          </tr>
                </table>
        ​ </div>
              <div id="tabs-3"> 

        <!--   -->

        <table cellpadding="3">
                  <tr>
            <td valign="top">VIN</td>
            <td>
<!-- test VINS:
 1GDGG31Z4RF513458<br/>
                      KMHCG45C31U211444<br/>
                      2MEFM75W7YX721741<br/>
-->
                      <input class="frmIn" size="30" value="" name="car-vin" id="car-vin" type="text" value="" />
                      <input onclick="lookupVIN()" name="btnVin" type="button" value="Lookup" />
                      <br/>
                      <div id="vinDet"></div></td>
          </tr>
                  <tr>
            <td>Year</td>
            <td><select name="car-years" id="car-years">
              </select></td>
          </tr>
                  <tr>
            <td>Make</td>
            <td><select name="car-makes" id="car-makes">
              </select></td>
          </tr>
                  <tr>
            <td>Model</td>
            <td><select name="car-models" id="car-models">
              </select></td>
          </tr>
                  <!--<tr>
                     <td>Trims</td>
                     <td><select name="car-model-trims" id="car-model-trims"></select></td>
                     </tr>
              <tr>
                <td>Color</td>
                <td><input class="frmIn" name="car-color" type="text" value="" /></td>
              </tr>
              <tr>
                <td>Mileage</td>
                <td><input class="frmIn" name="car-mileage" type="text" value="" /></td>
              </tr> 
              <tr>
                <td>Repair Estimate</td>
                <td><input class="frmIn" name="car-estimate" type="text" value="" /></td>
              </tr>
              <tr>
                <td>Reserve Price</td>
                <td><input class="frmIn" name="car-reserve" type="text" value="" /></td>
              </tr>
              <tr>
                <td>Secondary Damage</td>
                <td><input class="frmIn" name="car-damage" type="text" value="" /></td>
              </tr>
              <tr>
                <td>Comments</td>
                <td><textarea class="frmIn" name="car-comment" cols="20" rows="5"></textarea></td>
              </tr>-->
                  <tr>
            <td>&nbsp;</td>
            <td><button class="previous-product">Previous</button>
                      <button class="next-product">Next</button></td>
          </tr>
                </table>
        ​ </div>
              <div id="tabs-4">
        <table cellpadding="3">
                  <tr>
            <td>Repair Estimate</td>
            <td><input class="frmIn" name="car-estimate" type="text" value="" /></td>
          </tr>
                  <tr>
            <td>Reserve Price</td>
            <td><input class="frmIn" name="car-reserve" type="text" value="" /></td>
          </tr>
                  <tr>
            <td>Primary Damage</td>
            <td><select name="car-damage">
                <option value="Center Rear">Center Rear</option>
                <option value="Chemical Spill">Chemical Spill</option>
                <option value="Dash Fire">Dash Fire</option>
                <option value="Engine">Engine</option>
                <option value="Engine Fire">Engine Fire</option>
                <option value="Fallen Tree">Fallen Tree</option>
                <option value="Fresh Water">Fresh Water</option>
                <option value="Hail Damage">Hail Damage</option>
                <option value="Hard Roll">Hard Roll</option>
                <option value="Interior Fire">Interior Fire</option>
                <option value="Left Front">Left Front</option>
                <option value="Left Rear">Left Rear</option>
                <option value="Left Side">Left Side</option>
                <option value="Lite Fire Damage">Lite Fire Damage</option>
                <option value="Lite Roll">Lite Roll</option>
                <option value="Medium Roll">Medium Roll</option>
                <option value="None">None</option>
                <option value="Right Front">Right Front</option>
                <option value="Right Rear">Right Rear</option>
                <option value="Right Side">Right Side</option>
                <option value="Rolled">Rolled</option>
                <option value="Roof">Roof</option>
                <option value="Salt Water">Salt Water</option>
                <option value="Theft Heavy Strip">Theft Heavy Strip</option>
                <option value="Theft Lite Strip">Theft Lite Strip</option>
                <option value="Theft Recovery">Theft Recovery</option>
                <option value="Total Burn">Total Burn</option>
                <option value="Undercarriage">Undercarriage</option>
                <option value="Vandalized">Vandalized</option>
                <option value="Transmission">Transmission</option>
                <option value="Center Front">Center Front</option>
                <option value="Mechanical">Mechanical</option>
              </select></td>
          </tr>
                </table>
        <div style="margin-top:15px;" id="mainbody" >
                  <div id="upload" style="margin-bottom:10px;" ><span>Upload Photos<span></div>
                  <!--<span id="status" >status</span> -->

                  <ul id="files" >
          </ul>
                  <button class="previous-product">Previous</button>
                  <button class="next-product">Next</button>
                </div>
        ​ </div>
              <div id="tabs-5">
        <div id="self"> 
                  <!--              <table border="0">
                <tr>
                  <td><form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                      <input type="hidden" name="cmd" value="_s-xclick">
                      <input type="hidden" name="hosted_button_id" value="U3XMXN3S94BB6">
                      <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                      <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                    </form></td>
                </tr>
                <tr>
                  <td><img src="images/packages_img1.png" width="286" height="95" alt="Let us Do The work" /></td>
                </tr>

              </table> --> 
                </div>
        <div id="inspect">

                  <table border="0" cellpadding="0">
            <tr>
                      <td><form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                          <input type="hidden" name="cmd" value="_s-xclick">
                          <input type="hidden" name="hosted_button_id" value="U3XMXN3S94BB6">
                          <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                          <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                        </form></td>
                      <td><img src="images/packages_img1.png" width="286" height="95" alt="Let us Do The work" /></td>
                    </tr>
            <tr>
                      <td><form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                          <input type="hidden" name="cmd" value="_s-xclick">
                          <input type="hidden" name="hosted_button_id" value="XEEB6CNLRWJAJ">
                          <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                          <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                        </form></td>
                      <td><img src="images/packages_img2.png" width="286" height="95" alt="Let us Do The work" /></td>
                    </tr>
          </table>

                  <!--              <table border="0">

                <tr>
                  <td align="center"><form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                      <input type="hidden" name="cmd" value="_s-xclick">
                      <input type="hidden" name="hosted_button_id" value="XEEB6CNLRWJAJ">
                      <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                      <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                    </form></td>
                </tr>
                <tr>
                  <td><img src="images/packages_img2.png" width="286" height="95" alt="Let us Do The work" /></td>
                </tr>

              </table>
 --> </div>
      </div>
            </div>
  </div>
     <p>&nbsp;</p>   </div>
<?php include 'inc/footer.php'; ?>
</body>
</html> 
```

# facebook - 从个人资料中删除应用程序

> ID：12004166
> 
> 赞同：0
> 
> 时间：2012-08-17T10:33:44.133
> 
> 标签：facebook

我有一个很久以前在我的业务时间线配置文件中创建的旧应用程序 - 我找不到如何删除它 - 任何指针？

谢谢你。

乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:21:19.717

由于企业帐户无法管理应用程序，因此您似乎处于第 22 阶段，该应用程序仍与您的帐户相关联但无法访问。

通过 API 添加另一个（真实用户，通过短信或信用卡验证）并让该用户删除应用程序。如果您通过 Oauth 对话框使用企业帐户授权您的应用，则可以使用管理员的访问令牌添加其他管理员。

这样做的方法在[“应用程序”文档](https://developers.facebook.com/docs/reference/api/application/)中进行了概述——您使用参数 app_id、用户和“角色”向应用程序的“角色”连接发出 HTTP POST 请求——将“角色”设置为“管理员”以添加能够删除应用程序的管理员

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:43:42.210

您是指从您的个人资料中删除**facebook应用程序吗？**

*如果是：*

账户设置 > 应用 > 选择应用，点击旁边的 X 进行编辑，删除所有应用活动 > 点击移除

*如果不：*

编辑你的问题，不清楚

# iphone - 带有较旧蓝牙的蓝牙 4.0

> ID：12004171
> 
> 赞同：7
> 
> 时间：2012-08-17T10:34:29.143
> 
> 标签：iphone, bluetooth, core-bluetooth, bluetooth-lowenergy

我正在尝试使用蓝牙 4.0 模块来实现应用程序，我想知道是否将此应用程序与包含简单蓝牙 2.1 EDR 模块的 Iphone 3GS 一起使用是否可以让我利用 4.0 模块中的低能量。谢谢您的回答

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T12:41:15.123

蓝牙 4.0 是标准，包括经典的蓝牙基本速率/增强数据速率 (BR/EDR) 和蓝牙低功耗（BLE，或蓝牙智能，这是一个营销名称）。

兼容性取决于设备和蓝牙芯片，例如它是仅 BR/EDR 芯片（蓝牙 3.0）、仅 BLE 芯片还是能够同时支持 BR/EDR 和 BLE 的双模芯片。对于任何给定的连接，双模芯片（至少在 4.1 之前）只能在 BR/EDR 或 BLE 模式下运行。

经认证为蓝牙 4.0 的双模芯片可以而且应该能够在 BR/EDR 模式下连接到蓝牙 2.1 芯片。

蓝牙 BLE（蓝牙智能）芯片将无法做到。

首先，您必须清楚地确定您的蓝牙 4.0 模块是否仅支持 BLE。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-05T08:52:52.070

根据蓝牙 4.0（即 BLE），有两种设备 1）双模设备，支持 BR/EDR，即蓝牙 2.1 或 3.0，同时支持蓝牙 4.0 2）仅 BLE 设备，仅支持蓝牙4.0

一般来说，应该在纽扣电池中工作的传感器将采用 BLE 芯片组设计，而移动设备将采用双模芯片组设计。因此，移动设备可以与其他 BR/EDR 设备互操作，并且可以连接传感器并从传感器获取数据。

更多 BLE 设备无法与经典蓝牙设备通信[BR/EDR 或蓝牙 2.1 设备]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T11:37:25.110

当然不是，蓝牙 2.1 怎么能神奇地变成蓝牙 4 模块。

如果您的应用程序需要蓝牙 4.0，请将其添加`Required device capabilities`到`info.plist`. 添加`bluetooth-le`到`Required device capabilities`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T14:32:06.717

低功耗模式下的蓝牙 4.0 实际上与人们认为的经典蓝牙有很大不同。虽然 iPhone 中的蓝牙 4.0 向后兼容蓝牙 2.1，但一般来说，低功耗蓝牙（或众所周知的蓝牙智能）并不向后兼容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T20:42:00.903

corebluetooth 框架指定了低功耗蓝牙 (4.0) 的功能，并且仅适用于较新的 iPad 和 iPhone 4S。

无论如何，您都不能使用较旧的 iOS 设备来处理蓝牙 4.0 设备。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-14T15:21:48.303

*   仅低功耗蓝牙芯片无法与经典 BR/EDR 芯片通信。

*   4.0 蓝牙规范是包含 BLE 和 BR/EDR 的总括规范。

*   双模芯片包含 BLE 以及 BR/EDR 功能。当然，Host 严格来说也应该具备双模的能力。双模芯片，显然可以与两种芯片通信。

# java - 在 Linux 上使用 rt.exec（mysql 加载数据）执行命令

> ID：12004174
> 
> 赞同：0
> 
> 时间：2012-08-17T10:34:55.303
> 
> 标签：java, mysql, linux

我在执行以下代码时遇到问题：

```
 Process pr = rt.exec("mysql -uroot -pcdac123 -e \""
              + "use rrrlfdev;load data local infile '"
              + fpath
              + "' into table t_adm_despatch fields terminated by ',' enclosed by '\\\"' lines terminated by '\\n'  (dispatchno,dispatchdate,dispatchName, dispatchAddress, fileNo)"
              + "\""); 
```

同样在Windows上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:34:43.900

Java 需要分别了解命令和参数。你可以做两件事

1）您可以尝试使用 exec(String command, String[] arguments) 分别提供 cmd 和 args

2）您可以将mysql命令和每个参数括在双引号中。

在您的情况下，错误是引号开始的错位。没有这样的命令

mysql -uroot -pcdac123 -e \" .....

这就是它显示帮助文件的原因。双引号应该放在mysql命令之后，比如

mysql \" -uroot -pcdac123 -e .....

希望这会有所帮助

# c# - 无需 App ID 即可获取访问代码

> ID：12004176
> 
> 赞同：0
> 
> 时间：2012-08-17T10:35:14.000
> 
> 标签：c#, facebook-access-token, app-id

我需要从他们的 C# 应用程序发布到我客户的 facebook 墙上，他们没有 facebook 应用程序。

为此，我需要获得一个访问令牌，为此我需要一个 App ID。如何在没有 App ID 的情况下获取访问令牌，或者我需要创建一个“虚拟”facebook 应用程序来获取 appid？

谢谢，克里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:18:19.823

创建 Facebook 应用程序和页面管理访问令牌非常快速和简单。您需要做的就是以下几点：

1.  转到[http://developers.facebook.com/apps/](http://developers.facebook.com/apps/)上的开发者应用程序，然后单击“+ 创建新应用程序”。这将为您创建一个新应用程序。为应用程序命名，因为应用程序名称可能会在发布到页面时出现。
2.  然后，您可以转到 Graph Explorer ( [https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer) ) 从右上角的“应用程序”下拉列表中选择您的新应用程序，然后单击“获取访问令牌”按钮。现在单击“扩展权限”，然后选择“manage_pages”，现在单击“获取访问令牌”。现在，您和应用程序之间有了一个访问令牌。
3.  现在要获取页面访问令牌以允许您管理页面（您需要成为页面的管理员），只需转到图形资源管理器中的[https://graph.facebook.com/me/accounts](https://graph.facebook.com/me/accounts)。这为您提供了您作为管理员的所有页面和应用程序的访问令牌列表。然后，您可以使用此页面访问令牌作为页面发布。获取您要发布到的页面的页面访问令牌，并在发布到页面时在您的应用程序中使用它。

如果您需要一个持续时间超过 60 天的访问令牌，您需要在此处查看文档[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)以在上面的步骤 2 中获得一个长期有效的访问令牌。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:12:54.347

您可以使用 facebook 社交插件发送

示例代码

```
<div id="fb-root"></div>

<script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    </script>

<div class="fb-send" data-href="http://example.com"></div> 
```

# android - 仅在 Android 3.0 上例外

> ID：12004180
> 
> 赞同：1
> 
> 时间：2012-08-17T10:35:27.417
> 
> 标签：android, serialization, android-3.0-honeycomb, kryo

我正在将 Kryonet 用于 Android 应用程序，并且可以在除 3.0 版本之外的所有 Android 版本上完美运行。我收到以下异常：

```
E/AndroidRuntime(16861): FATAL EXCEPTION: Thread-30
E/AndroidRuntime(16861): com.esotericsoftware.kryo.KryoException: java.lang.StringIndexOutOfBoundsException: start=0 end=5 data.length=512 index=6 length=5
E/AndroidRuntime(16861): Serialization trace:
E/AndroidRuntime(16861): email (com.momasoft.sudokutournament.network.Network$Login)
E/AndroidRuntime(16861): at com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:203) 
```

为什么这种情况只发生在 Android 3.0 上？有没有办法解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:12:42.860

我找到了一个解决方案，调试 Kryo 库：我建议从 kryo 更改以下代码：

> com.esotericsoftware.kryo.io.Output.java:307

```
/***Change this: ***/
value.getBytes(0, charCount, buffer, position);
position += charCount;

/***for this: ***/
byte[] valueB = value.getBytes();
for (int j = 0; j < valueB.length; j++) {
   this.writeByte(valueB[j]);
} 
```

getBytes(int start, int end, byte[] elem, int offset) 已被弃用，并在 android 3.0 中出现问题。

# c# - c# events：在哪个线程上

> ID：12004189
> 
> 赞同：2
> 
> 时间：2012-08-17T10:36:13.480
> 
> 标签：c#, events, thread-safety

伪代码：

```
class A
{
    Dictionary<string, object> dic = new Dictionary<string, object>();
    public Do()
    {
        some_a.SomeEvent += (s, e) =>
                 {
                     dic["some_string"] = new object();
                 };   
         dic["some_other_string"] = new object();
    }
} 
```

这安全吗？如果两个字典操作都在同一个线程上，那将是。他们也是吗？

**编辑**在我的情况下，事件是在与 相同的线程中触发的`Do`，所以它是安全的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T10:39:11.577

事件处理程序中的代码将在引发事件的线程上执行。

```
class AsyncWorker
{
    public void BeginWork()
    {
        new TaskFactory().StartNew(() => RaiseMyEvent());
    }

    public event EventHandler MyEvent;

    private void RaiseMyEvent()
    {
        var myEvent = MyEvent;
        if(myEvent != null)
            myEvent(EventArgs.Empty);
    }
}

var worker = new AsyncWorker();
worker.MyEvent += (s, e) =>
                  {
                      /* I will be executed on the thread
                         started by the TaskFactory */
                  };
worker.BeginWork(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T10:39:14.503

一个事件（*通常*）在调用该事件的线程上发生。所以我们实际上不能完全评论，因为你没有显示导致事件被调用的代码！

严格来说，事件可能在任何线程上——要么是因为随机线程正在调用`OnSomeEvent`（或触发器是什么），要么是由于某种原因`OnSomeEvent`实现选择使用`BeginInvoke`，但这不太可能。

最终，归结为：是否有理由认为此代码中涉及多个线程。

但是：绝对**不是这种情况**：不，没有什么可以*使*该事件在订阅它的线程上自动发生。事件订阅只是一个对象+方法对；订阅中没有指定线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T10:39:05.273

除非您专门在不同的线程中启动事件处理程序，否则这两个操作确实会在同一个线程上运行（假设是单线程应用程序）。

# python - 运行`gunicorn_django`时不提供静态文件默认行为？

> ID：12004196
> 
> 赞同：0
> 
> 时间：2012-08-17T10:36:43.640
> 
> 标签：python, django, gunicorn, static-files

`myproject_django$ gunicorn_django`为我的网站提供服务，静态文件除外。任何想法为什么？我正在使用 django 1.3 从虚拟环境中运行它。

**项目树**

```
myproject_django
├── core
│   ├── admin.py
│   ├── __init__.py
│   ├── models.py
│   ├── tests.py
│   ├── views.py
├── __init__.py
├── manage.py
├── settings.py
├── static
│   ├── css
│   │   ├── base.css
│   │   ├── layout.css
│   │   └── skeleton.css
│   └── media
│       ├── pek.ico
│       ├── pek.png
│       └── pek_symbol.png
├── templates
│   └── core
│       ├── 404.html
│       ├── 500.html
│       ├── home.html
│       └── install.html
├── urls.py 
```

**settings.py 的潜在相关部分**

```
PROJECT_PATH = os.path.dirname(os.path.abspath(__file__))

MEDIA_ROOT = ''

MEDIA_URL = '/static/media'

STATIC_ROOT = os.path.join(PROJECT_PATH,'static')

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join(PROJECT_PATH, 'static'),
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'core',
    'gunicorn',
    'django.contrib.admin',
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:43:45.073

您可能需要配置 nginx 或 apache 来处理静态文件。现在尝试运行 python manage.py collectstatic 并将以下代码添加到 urls.py

`urls.py`

```
if settings.DEBUG:
    urlpatterns += patterns('',
            (r'^static/media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes':True}),
        )
    urlpatterns += patterns('',
                 (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT, 'show_indexes':True}),
            ) 
```

# android - 支持安卓多屏

> ID：12004197
> 
> 赞同：2
> 
> 时间：2012-08-17T10:36:46.460
> 
> 标签：android, android-layout, android-imageview, android-image

已阅读 冗长但仍不清楚的[文档。](http://developer.android.com/guide/practices/screens_support.html)

假设我有一张size = 120px * 80px的图片，在默认的mdpi/160密度下，我还需要准备

```
ldpi = 90 * 60
hdpi = 180 * 120
xhdpi = 240 * 160 
```

上面的计算对吗？假设我只有一个布局，那么我需要准备图像并将它们放在相应的可绘制文件夹下，对吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:19:26.813

[根据Google](http://developer.android.com/guide/practices/screens_support.html)的公式，您计算的图像尺寸是正确的：

```
pixels = dp * (density / 160) 
```

了解各种 DPI 的目标密度将使我们能够计算最终图像尺寸：

```
ldpi = 120 DPI
mdpi = 160 DPI
hdpi = 240 DPI
xhdpi = 320 DPI 
```

以下是宽度的正确计算，从 120 像素宽的中等密度资产开始：

```
ldpi  (120 DPI) = 120 * (120 / 160) == 90
mdpi  (160 DPI) = 120 * (160 / 160) == 120
hdpi  (240 DPI) = 120 * (240 / 160) == 180
xhdpi (320 DPI) = 120 * (320 / 160) == 240 
```

以下是高度的正确计算，从 80 像素高的中等密度资产开始：

```
ldpi  (120 DPI) = 80 * (120 / 160) == 60
mdpi  (160 DPI) = 80 * (160 / 160) == 80
hdpi  (240 DPI) = 80 * (240 / 160) == 120
xhdpi (320 DPI) = 80 * (320 / 160) == 160 
```

制作最终图像：

```
ldpi = 90 x 60
mdpi = 120 x 80
hdpi = 180 x 120
xhdpi = 240 x 160 
```

如果它们尚不存在，则在**res/**下创建以下文件夹并将正确的资产放入：

*   可绘制的 ldpi
*   可绘制的 mdpi
*   可绘制的 hdpi
*   可绘制的 xhdpi

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T17:40:19.853

是的，这些是正确的尺寸。

是的，只需将您的各种版本放在 res/drawable-ldpi、-mdpi、-hdpi 和 -xhdpi 文件夹中即可。

根据您的图像 - 特别是它是否仍然看起来很好自动缩小 - 您可以只提供 hdpi 和 xhdpi 版本，Android 将在运行时分别为 ldpi 和 mdpi 自动缩放它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T17:47:49.327

编辑：好的，计算是正确的。根据`px = dp * (dpi / 160)`来自[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)的公式，其中 mdpi 上的像素 = dp。

这里有一些额外的信息：

Dpi 告诉您 1 英寸中有多少点（像素）。但它并没有告诉你屏幕总共有多少像素。因此，您可以拥有一个设备，比方说，它的宽度和高度为 400 像素，屏幕的对角线为 5 英寸。有了这个，你就得到了 dpi 值。（例如使用[http://members.ping.de/~sven/dpi.html ）。](http://members.ping.de/~sven/dpi.html)

现在您有了另一个设备，它具有相同的 dpi 值，但分辨率更高且更大，例如 1000 x 1000 像素和大对角线。

如果您为第一种情况创建了一个图像，比如说 200 x 200 像素，它将占据屏幕的一半，但在第二种情况下，它将仅占屏幕的 1/5，尽管两个设备具有相同的 dpi，并且这可能不是你想要做的。

我通常做的是定位*通常*具有此 dpi 的设备的分辨率（如 hdpi -> 480x800、xhdpi -> 720x1280 等），并在布局中使用 dip 与 scaleType“fitStart”、“center”、等以保持图像比例。所以我将不同分辨率的图像放在 ldpi、hdpi 和 xhdpi 文件夹中，但我不使用公式。

如果有必要，也可以将屏幕尺寸与 dpi 结合使用/代替：

超大屏幕至少为 960dp x 720dp

大屏幕至少为 640dp x 480dp

普通屏幕至少为 470dp x 320dp

小屏幕至少为 426dp x 320dp

这适用于 dpi 等其他文件夹。

顺便提一句。目前可以为不同的分辨率/屏幕在 Google Play 中放置不同版本的应用程序，因此用户不必下载所有文件（巨大的应用程序大小、长时间下载等），只需下载必要的文件即可设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:02:27.663

ldpi、mdpi、hdpi、xhdpi 的图像缩放比例是 3:4:6:8 但你想一次 1) 如果有带有 ldpi 小屏幕的手机，那么它将适合屏幕。2）如果有带有 ldpi 中屏的手机，那么图像会显得更小 3）2）如果有带有 ldpi 大屏幕的手机，那么图像会显得更小。

对于所有 mdpi、hdpi 和 xhdpi 屏幕都是如此。

如果有机会在您的应用程序中使用九个补丁图像，请尝试这些图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T17:46:07.060

是的，您所做的尺寸计算是**正确的。**

现在，您需要将它们放在项目的*res/drawable中的**ldpi*、*mdpi*、*hdpi*和*xhdpi*各自的文件夹中。

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T17:58:22.370

如果您的目标是让您的图像在不同像素密度的设备上具有（大致）相同的物理尺寸，那么您的计算是正确的。图像将进入目录

> res/drawable-ldpi
> res/drawable-mdpi
> res/drawable-hdpi
> res/drawable-xhdpi

Android 将设备分为这些通用密度类别之一（即 120dpi、160dpi、240dpi 和 320dpi），并根据这些比率缩放图像。由于物理设备不一定是这些密度之一，因此图像的物理大小仍然会因设备而异。请注意，如果您不提供特定密度的图像，Android 将通过缩放默认/mdpi 图像来生成一个。通常，结果并不完全符合您通过提供自己的图像所获得的质量。

如果您运行 Android Lint，它会告诉您任何丢失的资源（例如忘记包含 xhdpi 图像），它还会告诉您缩放计算是否严重偏离。这是一个很好的功能。

*请注意，整个图像缩放方法与屏幕尺寸*无关，仅与像素*密度*有关。您还可以拥有不同屏幕尺寸甚至不同屏幕尺寸/密度组合的资源文件夹。

但是，如果您想要一个无论屏幕密度如何都以 120 x 80 像素显示的图像，则上述方案将不起作用。相反，您应该将图像放在文件夹中

> res/drawable-nodpi

Android 不会缩放从那里检索到的图像。结果是您的图像在 mdpi 设备上约为 3/4" x 1/2"，在 ldpi 设备上约为 1" x 3/4"，在 xhdpi 设备上约为 3/8" x 1/4"，等等.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-19T18:03:54.067

如果您知道设备的屏幕密度 (dpi)，则可以使用它来计算以像素为单位的等效大小：

等效像素 = sizeInDP*(screenDensity/160)

其中 sizeinDP 是要在其中显示图像的小部件的大小。计算各种屏幕密度的像素大小，并将它们放在相应的文件夹下。

因此，如果您`ImageView`的尺寸为 300dp X 200dp（宽 X 高），并且屏幕密度为 320dpi，则以像素为单位的图像尺寸应为：

宽度 = 300*(320/160) =
600 像素高度 = 200*(320/160) = 400 像素

希望这可以帮助！*

# iphone - xmlParser 中的 exc_bad_access (code=2, address=0x20)

> ID：12004203
> 
> 赞同：0
> 
> 时间：2012-08-17T10:37:22.140
> 
> 标签：iphone, objective-c, ios

我在我的应用程序中使用 xml 解析器。当我运行我的应用程序 10 到 15 次时，它工作正常，但突然它给了我带有上述代码的 bad_access。我的 xml 解析器代码如下：

```
 -(BOOL)getTheServerStatus:(NSData *)webData
{
    if (webData==NULL) 
    {
        return FALSE;
    }

    parser=[[NSXMLParser alloc]initWithData:webData];
    [parser setDelegate:self];

    [self performSelectorOnMainThread:@selector(parseData:)
                           withObject:webData
                        waitUntilDone:YES];

    if([strVal isEqualToString:@"ok"])
    {
        return TRUE;   
    }

    else 
    {
        return FALSE;

    }

}

- (void)parseData:(NSData *)webData
{
    if(webData==NULL)
    {
        NSLog(@"web data is NULL");
    }
    [parser parse];
} 
```

我正在使用自动引用计数。那么我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:19:50.447

I assume that getTheServerStatus is getting called on a thread which is NOT the main thread. Yet you do the parsing on the main thread. Is it possible a second thread us clobbering the parser?

EDIT: code changed

So what you should do is NOT block in getTheServerStatus:, but break your problem into two parts. The first is you want to get the status - so you are going to dispatch a block to do that work for you. While that is going on you can throw up a spinner, or just disable some of your UI. That is a design decision of course. When the background thread looking for status is done, it will message you back on the main thread with the result, and you can take whatever action you want then. I just [posted](https://stackoverflow.com/a/12014154/96716) an answer to a similar question that has even more code, which you might find helpful.

```
{ // ivars
    NSXMLParser *parser; // so you can send it abortParsing to cancel the background block
}

-(void)getTheServerStatus:(NSData *)webData
{
    if (webData==nil) // nil is for objects, NULL for pointers
    {
        dispatch_async(dispatch_get_main_queue(), ^{ [self parseResult:NO]; } );
    }

    parser=[[NSXMLParser alloc]initWithData:webData];
    [parser setDelegate:self];

    dispatch_async(dispatch_get_global_queue(0,0), ^
        {
            BOOL ret = [parser parse];
            parser = nil;
            if(ret == YES) {
                    ret = [strVal isEqualToString:@"ok"]; // EDIT
            }
            dispatch_async(dispatch_get_main_queue(), ^{ [self parseResult:ret]; } );
        } );
}

-(void)parserResult:(BOOL)retCode
{
    // now on main thread...
    if(retCode == YES) ....
    else .....
} 
```

# c++ - 循环初始化的 C++ 奇怪行为

> ID：12004206
> 
> 赞同：-2
> 
> 时间：2012-08-17T10:37:43.480
> 
> 标签：c++

我注意到一个 for 循环的奇怪行为......

**情况1：**

让我们对 i 变量进行内部初始化

```
for ( int i=10; i <=10; i++)
{
    std::cout << i;
}
return 0; 
```

输出：

```
10 
```

**案例二：**

现在我们在循环外初始化 i

```
int i = 10;

for ( ; i <=10; i++)
{
    std::cout << i;
}
return 0; 
```

输出：

```
Nothing will be print 
```

**案例3：**

初始化与 i 无关的任何变量：

```
int i = 10;

for ( int k = 0 ; i <=10; i++)
{
    std::cout << i;
}
return 0; 
```

输出：

```
10 
```

**问题**

循环条件的结果如何取决于我们初始化变量 i 的位置？

**更新结果**

我使用 degugger 跟踪代码，VS 2010 在案例 2 中确实跳过了一个循环。但是 g++ 运行良好。也许编译器中的错误？

**Fianal 结果** 重新启动后，它可以正常工作。天地之间的东西。对不起，无用的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:42:49.643

如果案例 2 未打印`10`，则说明您的编译器存在错误或未刷新输出。也将 a 添加`<< "\n"`到输出中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:48:12.513

第二个`10`也打印。如果没有，则编译器中存在错误，或者您使用了错误的编译器。

我已经在[`http://ideone.com/UB0V0`](http://ideone.com/UB0V0). 你可以看看它。它打印`10`

# database - DB 设计和性能：使用冗余 FK 来提高性能是否可行？

> ID：12004210
> 
> 赞同：3
> 
> 时间：2012-08-17T10:38:03.963
> 
> 标签：database, performance, foreign-keys, denormalization, database-indexes

假设我有以下数据库结构：
![标准化数据库结构](../Images/788fe0c8359567810035ee3fe4175c0c.png)
并且我的应用程序需要显示包含所有详细信息（型号、产品系列、品牌、生产商）的文章列表。为此，我需要进行更多的 JOIN 以获得所需的数据。

如果我通过为 Article 表创建冗余 FK 来提高应用程序的性能，是否可以，如下所示？它真的提高了性能吗？
![具有冗余 FK 的 DB 结构](../Images/d0a9c063429dfe75d850b7ec63a86f72.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T10:58:35.373

是的，如果您不想检索层次结构中“中间”对象的任何数据，您可以通过这种方式**提高性能。**这是一种常见的非规范化形式。请注意，您需要小心不要让不一致的地方溜进来。

我通常会设置一个**夜间任务来验证**非规范化数据，将错误发送给我并自动修复它们。这并不难做到，并且消除了一类令人讨厌的错误。

人们这样做的另一个原因是将所有表**分区**在同一个键上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:24:17.403

找出设计是否提高性能的最佳方法是尝试它；第二种最好的方法是仔细考虑您可能需要运行的查询，然后尝试在您的脑海中对它们进行建模。如果不知道您要运行什么查询，或者您的数据库有多大，就很难知道您是否会看到性能改进。

笼统地说，除非你有一个非常大的数据库（假设你在体面的硬件上运行它，并且你已经调整了索引），否则你不会看到对性能的可衡量的影响。通过“非常大”，我认为几个表中有数百万行。

如果你真的需要去规范化，我的建议是创建一个显式去规范化的表，而不是用冗余键“污染”你的常规设计。理解一个单独的“应该如何”和“妥协”的设计要容易得多，而不是将两者混合在一起。

为了实现这一点，我会创建一个单独的表 - 也许是“cached_articles”，其中包含列：

```
article_id
...(article data)
model_id
....(model data)
family_id
...(family data)
brand_id
....(brand data)
producer_id
....(producer data) 
```

您可以通过批处理作业或触发器来维护此表。您应该只让您的应用程序代码写入规范化表，并且只在需要时从缓存表中读取。

您还应该建立一个强大的“一致性检查”机制来识别可能导致应用程序崩溃的数据问题；一旦您的数据库增长到需要这种设计的大小，这些一致性检查就会变得很重要，因为它们会遇到相同的性能问题......

# android - 如何在android中将一个视图与其他三个视图重叠？

> ID：12004211
> 
> 赞同：0
> 
> 时间：2012-08-17T10:38:04.543
> 
> 标签：android, layout, view, overlap

我有一个问题：这个问题可以通过下面的例子来理解。

屏幕使用三个视图让我们说 A、B、C。A 设置为在 B 上拖放。我想要的是当 A 被拖动到 B 时，A 应该与 C 视图重叠，但 B 应该与 A 重叠。这使其三层 B 在顶部，A 在中间，C 在最低层。

我不知道如何做到这一点，有两个视图可以实现，但有三个如何解决这个问题。

如果有人不能理解我的问题，请告诉我？请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:42:40.853

您可以使用“相对布局”来做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:05:00.647

我认为您需要动态添加视图。试试这个。

```
 RelativeLayout rLayout = (RelativeLayout)findViewById(R.id.your_id);

   Button btn = new Button(this);
   btn.setText("Button Name"); // Similarly set different property for the button. 
```

最后，您必须将此按钮添加到相应的布局中。

```
 rLayout.addView(btn); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:05:57.077

解决了我自己的问题：

以相同的顺序使用了 bringToFront() 方法我想要视图

```
 A.bringToFront();
       B.bringToFront(); 
```

# php - 如何提高 Ajax-php-xml 聊天应用程序的速度？

> ID：12004212
> 
> 赞同：0
> 
> 时间：2012-08-17T10:38:08.927
> 
> 标签：php, xml, ajax

我使用 Ajax-php-xml 技术制作了聊天应用程序。如果用户数低于 50，它可以正常工作。否则应用程序的速度会大大降低。我想一次管理 200 个用户。

**我的 XML 格式是**

```
<?xml version="1.0" encoding="utf-8"?>
        <messageData>
        <message>
        <sender>user__5338</sender>
        <receiver>user__5339</receiver>
        <content>hello</content>
        <date_time>2012-08-17  09:24:57</date_time>
        <status>unread</status>
        </message>
        <message>
        <sender>user__5338</sender>
        <receiver>user__5339</receiver>
        <content>hello</content>
        <date_time>2012-08-17  09:26:21</date_time>
        <status>unread</status>
        </message>
        </messageData> 
```

在我的 php 中，我使用这种方法从 xml 文件中获取数据

```
$xml = simplexml_load_file($this->xml_file);
     foreach($xml->message as $chat_data){
         if($chat_data->status =='unread' && $chat_data->receiver ==$username){ 
          $chat_data->status = 'read';
          $xml->asXML($this->xml_file);
          $sender =(string)$chat_data->sender;
          $chat['message'] = (string)$chat_data->content;

          $chat['date'] = (string)$chat_data->date_time;
         }
     } 
```

如何提高聊天应用的速度？我可以通过使用node js来提高速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:42:59.437

为什么不使用 json 作为 ajax 传输数据类型？我相信它可能会更快，因为 php 不需要解析 xml。并使用 jQuery 作为 ajax 请求的 javascript 库，它是最好的之一。它支持json。并以[本教程](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-simple-web-based-chat-application/)为例。

还有一件事，将 ajax 请求之间的间隔设置为 1-3 秒。也许更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:48:27.847

使用套接字肯定可以提高您的通信速度，这听起来可能很复杂，但出于您的目的，这就是答案。插座是：

> WebSocket 规范定义了一个在 Web 浏览器和服务器之间建立“套接字”连接的 API。简单来说：客户端和服务器之间存在持久连接，双方可以随时开始发送数据。

简单的例子：

```
 var connection = new WebSocket('ws://html5rocks.websocket.org/echo', ['soap', 'xmpp']);
// When the connection is open, send some data to the server
connection.onopen = function () {
  connection.send('Ping'); // Send the message 'Ping' to the server
};

// Log errors
connection.onerror = function (error) {
  console.log('WebSocket Error ' + error);
};

// Log messages from the server
connection.onmessage = function (e) {
  console.log('Server: ' + e.data);
}; 
```

搜索会给你更多的例子

# c# - VS2012 安装后 System.Uri.ToString 行为变化

> ID：12004214
> 
> 赞同：18
> 
> 时间：2012-08-17T10:38:16.403
> 
> 标签：c#, .net, vb.net

在开发机器上安装 VS2012 Premium 后，单元测试失败，因此开发人员修复了该问题。当更改被推送到 TeamCity 时，单元测试失败了。除了解决方案文件正在升级以兼容VS2012之外，该项目没有变化。它仍然针对 .net 框架 4.0

我已将问题隔离为调用`Uri.ToString`. 以下代码复制了该行为。

```
Imports NUnit.Framework

<TestFixture()>
Public Class UriTest

   <Test()>
    Public Sub UriToStringUrlDecodes()
       Dim uri = New Uri("http://www.example.org/test?helloworld=foo%B6bar")

       Assert.AreEqual("http://www.example.org/test?helloworld=foo¶bar", uri.ToString())
    End Sub

End Class 
```

在没有安装 VS2012 的机器上在 VS2010 中运行它成功，在安装了 VS2012 的机器上在 VS2010 中运行它失败。两者都使用来自 NuGet 的最新版本的 NCrunch 和 NUnit。

![没有安装VS2012的机器](../Images/d283d0f28e4e844307573352cc5187df.png)

![安装VS2012的机器](../Images/264a952e99c7b97e50ec52c677c6a2f1.png)

来自失败断言的消息是

```
 Expected string length 46 but was 48\. Strings differ at index 42.
  Expected: "http://www.example.org/test?helloworld=foo¶bar"
  But was:  "http://www.example.org/test?helloworld=foo%B6bar"
  -----------------------------------------------------^ 
```

[.NET 4 和 .NET 4.5 的MSDN](http://msdn.microsoft.com/en-us/library/system.uri.tostring%28v=vs.100%29)文档显示`ToString`不应编码此字符，这意味着旧的行为应该是正确的。

```
A String instance that contains the unescaped canonical representation of the Uri instance. All characters are unescaped except #, ?, and %. 
```

安装 VS2012 后，该 unicode 字符被转义。

VS2012机器上System.dll文件版本为4.0.30319.17929

构建服务器上 System.dll 的文件版本为 4.0.30319.236

`uri.ToString()`忽略我们为什么使用，我们正在测试什么以及任何潜在的解决方法的优点。谁能解释为什么这种行为似乎已经改变，或者这是一个错误？

编辑，这里是 C# 版本

```
using System;
using NUnit.Framework;

namespace SystemUriCSharp 
{
    [TestFixture]
    public class UriTest
    {

        [Test]
        public void UriToStringDoesNotEscapeUnicodeCharacters()
        {
            var uri = new Uri(@"http://www.example.org/test?helloworld=foo%B6bar");

            Assert.AreEqual(@"http://www.example.org/test?helloworld=foo¶bar", uri.ToString());
        }

    }
} 
```

进一步调查，如果我以 .NET 4.0 或 .NET 4.5 为目标，则测试失败，如果我将其切换到 .NET 3.5，则测试成功。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T06:16:50.937

.NET Framework 4.5 中引入了一些更改，它与 VS2012 一起安装，并且（据我所知）也是所谓的“就地升级”。这意味着它实际上升级了 .NET Framework 4。

此外，[在 System.Uri 中记录了重大更改](http://msdn.microsoft.com/en-us/library/hh367887.aspx#core)。其中一位说*Unicode 规范化形式 C (NFC) 将不再在 URI 的非主机部分上执行*。我不确定这是否适用于您的案例，但它可以作为您调查错误的良好起点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T09:09:55.807

此更改与早期 .NET 版本的问题有关，现在已更改为更符合标准。`%B6`是 UTF-16，但根据标准 UTF-8 应该在 Uri 中使用，这意味着它应该是`%C2%B6`. 所以`%B6`不是 UTF-8，它现在被正确地忽略而不被解码。

下面逐字引用的[连接报告](https://connect.microsoft.com/VisualStudio/feedback/details/758479/system-uri-tostring-behaviour-change)中的更多详细信息。

> .NET 4.5 具有增强且更兼容的 RFC 3987 应用程序，它支持 URI 的 IRI 解析规则。IRI 是国际资源标识符。这允许在要解析的 URI/IRI 字符串中包含非 ASCII 字符。
> 
> 在 .NET 4.5 之前，我们对 IRI 有一些不一致的处理。我们有一个默认值为 false 的 app.config 条目，您可以打开它：
> 
> 它做了一些 IRI 处理/解析。但是，它有一些问题。特别是它允许不正确的百分比编码处理。根据 RFC 3987，URI/IRI 字符串中的百分比编码项应该是百分比编码的 UTF-8 八位字节。它们不会被解释为百分比编码的 UTF-16。因此，根据 UTF-8 处理“%B6”是不正确的，不会发生解码。¶ 的正确 UTF-8 编码实际上是“%C2%B6”。
> 
> 如果你的字符串是这样的：
> 
> ```
>  string strUri = @"http://www.example.com/test?helloworld=foo%C2%B6bar"; 
> ```
> 
> 然后它将在 ToString() 方法中标准化，并解码和删除百分比编码。
> 
> 您能否提供有关您的应用程序需求和 ToString() 方法使用的更多信息？通常，我们推荐 Uri 对象的 AbsoluteUri 属性来满足大多数规范化需求。
> 
> 如果此问题阻碍了您的应用程序开发和业务需求，请通过“netfx45compat at Microsoft dot com”电子邮件地址告知我们。
> 
> 谢谢，
> 
> 网络团队

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:04:40.427

在那种情况下，你不能那样做。主要问题是字符“¶”。

在 .Net 中，我们遇到了字符问题¶。你可以对此进行研究。

一一取uri'参数。将它们逐一添加并进行比较。也许您可以使用“¶”字符的方法来创建或替换它。

例如;

```
Dim uri = New Uri("http://www.example.org/test?helloworld=foo%B6bar")

Assert.AreEqual("http://www.example.org/test?helloworld=foo¶bar", uri.Host+uri.AbsolutePath+"?"+uri.Query) 
```

那行得通

uri.AbsolutePath: /test

url.Host：http://www.example.org [_](http://www.example.org)

uri.Query: helloworld=foo¶bar

# filesystems - 数据销毁

> ID：12004215
> 
> 赞同：-2
> 
> 时间：2012-08-17T10:38:26.443
> 
> 标签：filesystems, implementation, information-hiding

有许多文件粉碎程序可以用来永久删除一个文件。我想知道的是一些实现细节。例如，考虑到 Gutmann 算法，它应该如何处理文件和文件系统？应用程序是否应该遍历所有硬盘集群以覆盖它们？或者打开一个文件，以某种方式更改它的内容，然后删除它就足够了？

反之亦然，如何恢复已删除的文件？我没有找到很多关于这些主题的信息。

我将非常感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:52:10.590

您可以查看实用程序的[源代码](http://git.savannah.gnu.org/cgit/coreutils.git/tree/src/shred.c)，`shred`它是 Linux 上的 GNU 核心实用程序的一部分。基本思想是对磁盘块进行多次传递。还有一些关于底层文件系统提交方式的假设这些写道。有关`info coreutils 'shred invocation'`更多信息，请参阅。

当您了解相关文件系统的内部布局以及如何在其上实施删除操作时，最好恢复已删除的文件。例如，许多 FAT 文件系统的驱动程序只是将目录条目标记为已删除，但保持文件内容完整。（直到并且除非它被您创建的新文件覆盖）。因此，您可以转储磁盘并扫描原始数据以查找您想要的内容。

# soap - ZF2 PHP 警告：SoapServer::SoapServer()：I/O 警告：加载外部实体失败

> ID：12004217
> 
> 赞同：0
> 
> 时间：2012-08-17T10:38:37.850
> 
> 标签：soap, wsdl, entity, handle, zend-framework2

我目前正在使用 ZF2-RC2 并尝试在肥皂中做一个 web 服务我通过强制标头成功让我的 wsdl 工作，但对于服务器部分，它根本不工作，我收到一个错误 500 告诉我

> PHP 警告：SoapServer::SoapServer(): I/O 警告：加载外部实体失败

错误是当我在做 ->handle() 部分时。

```
if(isset($_GET['wsdl'])) {
    header ("Content-Type:text/xml"); 
    $autodiscover = new AutoDiscover();
    $autodiscover->setClass('WsClass')
                 ->setUri('http://adresse/ws/?wsdl');
    echo $autodiscover->toXml();
} else {

    // pointing to the current file here        
    $soap = new Server('http://adresse/ws/?wsdl');
    $soap->setClass('WsClass');
    $soap->handle();
}
exit; 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:51:05.410

您不应将 AutoDiscover 对象中的 URI 设置为 wsdl。尝试

```
$autodiscover->setClass('WsClass')
             ->setUri('http://adresse/ws'); 
```

此外，将 / 放在服务器的构造函数中：

```
$soap = new Server('http://adresse/ws?wsdl'); 
```

# objective-c - 在 Objective-C 中读取 .strings 文件？

> ID：12004222
> 
> 赞同：11
> 
> 时间：2012-08-17T10:39:02.863
> 
> 标签：objective-c

我正在创建一个 Mac 应用程序，我想本地化我的标签。我认为`.strings`文件会是更好的选择。`.strings`但我在 Objective-C 中读取文件时遇到问题。我正在寻找一种更简单的方法。

这是我的`.string`文件内容：

```
"LABEL_001" = "Start MyApp";
"LABEL_002" = "Stop MyApp";
"LABEL_003" = "My AppFolder";
... 
```

我已经看过[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/LoadingResources/Strings/Strings.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/LoadingResources/Strings/Strings.html)。

这是我的代码：

```
NSBundle *bundle = [NSBundle mainBundle];
NSString *strFilePath = [[NSBundle mainBundle] pathForResource:@"Labels" ofType:@"strings"];
NSString *tt =NSLocalizedStringFromTableInBundle(@"LABEL_001",strFilePath,bundle, nil);
NSLog(@"STRING ::: %@",tt); 
```

但是 tt 给出的字符串`"LABEL_001"`，我想要`"Start MyApp"`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-17T10:58:49.807

一。您必须在应用程序包`Localizable.strings`的目录中命名您的文件。`<LANGUAGENAME>.lproj`

二。使用`NSLocalizedString`宏：

```
NSString *loc = NSLocalizedString(@"LABEL_001", nil); 
```

三。如果没有任何效果，您可以使用字符串文件初始化 NSDictionary，因为字符串文件是 plist 的一种特殊类型：

```
NSString *fname = [[NSBundle mainBundle] pathForResource:@"whatever" ofType:@"strings"];
NSDictionary *d = [NSDictionary dictionaryWithContentsOfFile:fname];
NSString *loc = [d objectForKey:@"LABEL_001"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T11:12:38.973

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"Labels" ofType:@"strings"];
    NSData *plistData = [NSData dataWithContentsOfFile:path];
    NSString *error; NSPropertyListFormat format;

    NSDictionary *dictionary = [NSPropertyListSerialization propertyListFromData:plistData
                                                          mutabilityOption:NSPropertyListImmutable
                                                                    format:&format
                                                          errorDescription:&error];
    NSString *stringname = [dictionary objectForKey:@"LABEL_001"]; 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T06:01:48.243

这里是你的代码

```
NSBundle *bundle = [NSBundle mainBundle];
NSString *strFilePath = [[NSBundle mainBundle] pathForResource:@"Labels" ofType:@"strings"];
NSString *tt =NSLocalizedStringFromTableInBundle(@"LABEL_001",strFilePath,bundle, nil);
NSLog(@"STRING ::: %@",tt); 
```

这里的问题是第二个参数“strFilePath”，把它改成@“Labels”这样上面的代码就变成了，

```
NSString *tt =NSLocalizedStringFromTableInBundle(@"LABEL_001",@"Labels",bundle, nil); 
```

作为参考，从 Apple Docs 复制的有关表名的以下行，“指定此参数的值时，包括不带 .strings 扩展名的文件名。”

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T10:15:43.517

**简单代码**

只需创建一个方法如下

```
- (void)localisationStrings
{
    NSString* path = [[NSBundle mainBundle] pathForResource:@"localisation" ofType:@"strings"];
    NSDictionary *localisationDict = [NSDictionary dictionaryWithContentsOfFile:path];
    NSLog(@"\n %@",[localisationDict objectForKey:@"hello"]);
} 
```

# iis - 删除多个正斜杠

> ID：12004223
> 
> 赞同：9
> 
> 时间：2012-08-17T10:39:03.877
> 
> 标签：iis, url-rewriting, rewrite

我注意到，使用 .NET MVC 站点，您可以使用多个正斜杠点击 URL，例如：

```
http://www.example.com//category
http://www.example.com//category//product 
```

URL 加载正常，一切正常，但是，我被要求阻止这种情况发生。

我一直在尝试使用 IIS URL Rewrites 来让它工作：

```
<rewrite>
    <rules>
        <rule name="Remove multiple slashes" stopProcessing="true">
            <match url="(.*)" />
            <conditions>
                <add input="{UNENCODED_URL}" matchType="Pattern" pattern="^(.*)//(.*)$" />
            </conditions>
            <action type="Redirect" redirectType="Permanent" url="{C:1}/{C:2}" />
         </rule>
    </rules>
</rewrite> 
```

然而，结果似乎非常喜怒无常。有时产品 URL 会重定向，有时不会，并且类别也会发生同样的事情。这几乎就像应用程序正在缓存 URL。

有谁知道我是否可以禁用任何现有的缓存，或者是否有另一种方法来解决这个多斜杠问题？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T13:59:00.907

最后，我求助于使用重定向背后的代码来让它工作。

我在使用 IIS URL 重写时遇到的问题是由于 IIS 缓存重定向的方式。当我完全禁用缓存时，正如 WouterH 建议的那样，它起作用了。但是，我不喜欢以这种方式禁用缓存，因为它可能会引入性能问题。

我的解决方法是在 Global.asax.cs 文件中使用重定向背后的代码：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    string requestUrl = Request.ServerVariables["REQUEST_URI"];
    string rewriteUrl = Request.ServerVariables["UNENCODED_URL"];
    if (rewriteUrl.Contains("//") && !requestUrl.Contains("//"))
        Response.RedirectPermanent(requestUrl);
} 
```

我本来希望使用 IIS URL Rewrite 来完成这项工作，不幸的是我没有时间继续沿着这条线走下去。

有趣的是，下面的方法确实有效，但是，它`HTTP_X_REWRITE_URL`是由我在本地运行的 Helicon ISAPI Rewrite 添加的，但在我们的生产服务器上不可用。

```
<rewrite>
  <rules>
    <rule name="Remove multiple slashes" stopProcessing="true">
      <match url=".*" />
      <action type="Redirect" url="{REQUEST_URI}" />
      <conditions>
        <add input="{HTTP_X_REWRITE_URL}" pattern="([^/]*)/{2,}([^/]*)" />
      </conditions>
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T11:29:15.057

**URL重写模块**

由于 IIS 使用双斜杠自动规范化 url，您可以尝试重定向到规范化的 url，如下所示：

```
<rewrite>
  <rules>
    <rule name="Remove multiple slashes" stopProcessing="true">
      <match url=".*" />
      <action type="Redirect" url="{REQUEST_URI}" />
      <conditions>
        <add input="{UNENCODED_URL}" pattern="(.*?)[/]{2,}$" />
      </conditions>
    </rule>
  </rules>
</rewrite> 
```

您还可以尝试[禁用 URL 重写模块的缓存](http://staging.aa.werkbench.com/staging/Windows/System32/inetsrv/rewrite_readme.htm)：

> **禁用重写规则的内部缓存**
> 
> 要在 URL 重写模块中禁用入站重写规则的缓存，请从提升的命令提示符运行以下命令：
> 
> `reg add HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\InetStp\Rewrite /v RewriteCacheEnabled /t REG_DWORD /d 0`

我有一种小小的感觉，在此更改之后您必须重新启动网络服务器 :)

**其他选项 #1：不可缓存的服务器变量**

脑子里突然冒出这个想法：

*在规则中使用不可缓存的服务器变量，fe 尝试使用`HTTP_USER_AGENT`*

```
<rewrite>
  <rules>
    <rule name="Remove multiple slashes" stopProcessing="true">
      <match url=".*" />
      <action type="Redirect" url="{REQUEST_URI}" />
      <conditions>
        <add input="{UNENCODED_URL}" pattern="(.*?)[/]{2,}$" />
        <add input="{HTTP_USER_AGENT}" pattern=".*" />
      </conditions>
    </rule>
  </rules>
</rewrite> 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms524602%28v=vs.90%29.aspx)探索其他服务器变量

**其他选项#2：清除浏览器缓存**

在 Web 开发期间，请确保使用 Ctrl+F5 刷新页面，或在进行更新重写规则等更改后清除浏览器缓存。否则，您可能会花费数小时观察相同的问题，而只是您的浏览器需要刷新其缓存。

**其他选项#3：IIRF**

如果你真的不能让它与 IIS URL 重写模块一起工作，你可以试试开源的 ISAPI 模块[IIRF 。](http://iirf.codeplex.com/)它接受类似于`mod_rewrite`Apache 的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:43:49.810

尝试关注

```
 <rule name="RemoveMultipleSlashes" patternSyntax="ECMAScript" stopProcessing="true">
        <match url=".*" />
        <action type="Redirect" url="{REQUEST_URI}" />
        <conditions>
            <add input="{UNENCODED_URL}" pattern="([^/]*)/{2,}([^/]*)" />
        </conditions>
    </rule> 
```

# wpf - 所有实例都接收命令，而不是单个 MVVM 工具包

> ID：12004226
> 
> 赞同：0
> 
> 时间：2012-08-17T10:39:08.700
> 
> 标签：wpf, mvvm-light, mvvm-toolkit

我创建了一个 View 调用 PhotoView 与它绑定到的 PhotoviewModel。在视图模型中，我定义了一个命令如下：

```
 //Show info command
        ShowInfoCmd = new RelayCommand<RoutedEventArgs>(
        (e) =>
        {
            if (IsInfoOpen)
            {
                Messenger.Default.Send(new Knauf.Message.HidePhotoInfo(this));
                IsInfoOpen = !IsInfoOpen;
            }
            else
            {
                Messenger.Default.Send(new Knauf.Message.ShowPhotoInfo(this));
                IsInfoOpen = !IsInfoOpen;
            }
        },
        (e) => HasMoreInfo
        ); 
```

我发送的消息类型是自定义消息。

对于我拥有的每张照片，我都会创建一个新的 PhotoViewModel，然后创建一个 PhotoView 的实例。所以每个 PhotoView 都有一个绑定到 PhotoViewModel 中的 ShowInfoCmd 的按钮。

实际发生的情况是，如果我单击一个 PhotoView 实例上的按钮，则只有该实例应该接收命令。

实际上所有实例都收到命令。我怎样才能避免这种情况？

感谢关于哔叽的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T09:09:41.403

解决，它是在错误的实例上引发的

# php - PHP array_diff 怪异

> ID：12004231
> 
> 赞同：10
> 
> 时间：2012-08-17T10:39:15.623
> 
> 标签：php

这是一个如此简单的问题，但 PHP 文档没有解释它为什么会发生。

我有这个代码：

```
var_dump($newattributes); var_dump($oldattributes);
var_dump(array_diff($newattributes, $oldattributes)); 
```

为简单起见，我将省略我实际使用的大部分结构（因为每个结构都有 117 个元素长）并切入案例。

我有一个名为的数组`$newattributes`，如下所示：

```
array(117){
    // Lots of other attributes here
    ["deleted"] => int(1)
} 
```

另一个叫它`$oldattributes`看起来像：

```
array(117){
    // Lots of other attributes here
    ["deleted"] => string(1) "0"
} 
```

哪个看起来不一样？根据`array_diff`：没有。我得到的输出`array_diff`是：

```
array(0) { } 
```

我已经阅读了文档页面，但是它说：

> 当且仅当 (string) $elem1 === (string) $elem2 时，才认为两个元素相等。换句话说：当字符串表示相同时。

而且我不确定“1”如何反对等于“0”。

那么我是否看到了一些`array_diff`我没有考虑到的警告？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T10:53:49.713

问题可能在于您正在使用关联数组：您应该尝试将以下内容用于关联数组：[array_diff_assoc()](http://php.net/manual/en/function.array-diff-assoc.php)：

```
<?php 
    $newattributes = array(
       "deleted" => 1 
    );

    $oldattributes = array(
       "deleted" => "0" 
    );

    $result = array_diff_assoc($newattributes, $oldattributes);

    var_dump($result);
?> 
```

结果 ：

```
 array(1) {
       ["deleted"]=>
       int(1)
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T10:52:46.980

它*也确实*发生在我身上（当值多于一个时）

```
$new = array('test' => true, 'bla' => 'test' 'deleted' => 1);
$old = array('test' => true, 'deleted' => '0'); 
```

对于*完整*的array_diff，您需要做一些额外的工作，因为默认情况下它返回一个[相对补码](http://en.wikipedia.org/wiki/Complement_%28set_theory%29#Relative_complement)

试试这个：

```
array_diff(array_merge($new, $old), array_intersect($new, $old)) 
```

结果：

```
Array
(
    [bla] => test
    [deleted] => 0
) 
```

# c# - 使用 JavaScript 将可见属性设置为 false 时删除空格

> ID：12004234
> 
> 赞同：4
> 
> 时间：2012-08-17T10:39:44.567
> 
> 标签：c#, javascript, asp.net, html

我有一个 DropdownList，当它的 Selected Value 发生变化时（例如： 0 ），我需要将一个 Panel 的 visible 属性设置为 True，将另一个 Panel 的 visible 属性设置为 False。

and when another Value is selected I need to do Vice Versa Using JAVASCRIPT.

我目前正在实现这一点，但空间保持不变。我怎样才能删除空格。

谁能帮我？？

我也附上代码。

```
function visible(val) {

    var ddl = document.getElementById("ddl_IDProof");
    var selectedFilterType = drpFilterType.options[ddl.selectedIndex].value;

    if (selectedFilterType == "0") {

        document.getElementById("pnl1").style.visibility = "visible";
        document.getElementById("pnl2").style.visibility = "hidden";
    }

    else {
        document.getElementById("pnl1").style.visibility = "hidden";
        document.getElementById("pnl2").style.visibility = "visible";
    }  
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T10:43:03.680

使用`display`而不是`visibility`. 这将隐藏整个元素：

```
 // Show pnl1 (maybe you have to use inline or inline-block insdead of block)
    document.getElementById("pnl1").style.display = "block";
    // Hide pnl2
    document.getElementById("pnl2").style.display = "none"; 
```

# xml - 如何以编程方式在一行中获取xml的开始和结束标签？

> ID：12004236
> 
> 赞同：0
> 
> 时间：2012-08-17T10:39:54.880
> 
> 标签：xml, perl, shell

我有一个如下的xml文件：

```
<tr>
   <td>data1</td>
   <td>data2</td>
</tr> 
```

我想在一行中显示 tr 标签：

```
<tr><td>data1</td><td>data2</td></tr> 
```

我也希望这适用于 xml 文件中的每个 tr 标签。请帮忙。

编辑了原始问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:27:49.787

你可以用 XML::Twig 做到这一点：

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Twig;

XML::Twig->new( keep_spaces => 1,  # keep the original formating
                                   # but remove text in tr (ie whitespace)
                twig_handlers => { tr => sub { $_->cut_children( '#TEXT') } }
              )
         ->parse( \*DATA)
         ->print;

__DATA__
<html>
  <head><title>a title</title></head>
  <body>
    <h1>example data</h1>
    <table>
      <tr>
         <td>data1</td>
         <td>data2</td>
      </tr>
      <tr>
         <td>data1</td>
         <td>data2</td>
      </tr>
    </table>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:39:42.607

介于完全幼稚和真实解析器之间的解决方案：

```
$xmlConetnts =~ s/\>\s*\n\s*\</></g; 
```

这仅替换`> newline <`为`><`

由于 XML 不允许`<`在文本数据中使用，除非您有 CDATA 部分，否则您应该是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:40:37.427

很简单：不要在 HTML/输出中添加新行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:38:26.920

这个问题并不像看起来那么简单。执行此操作的简单程序可能如下所示：

```
use strict;
use warnings;

while ( my $line = <DATA> ) {
    if ( $line =~ /<tr>/ ) {
        while ( $line !~ /<\/tr>/ ) {
            chomp $line;
            $line =~ s/^\s+//;
            print $line;
            $line = <DATA>;
        }
        print "\n";
    }
    print $line;
}

__DATA__
<foo>
    foo
</foo>
<tr>
    <td>data1</td>
    <td>data2</td>
</tr>
<bar>
    bar
</bar> 
```

但这仅适用于文件的格式有利于程序并且有问题的标签没有嵌套。我建议您研究一个 XML 解析器并为此编写一个自定义的漂亮打印机。一个起点可以是学习该模块`XML::Parser`

# java - Java 仅重绘每隔一个猜测

> ID：12004237
> 
> 赞同：2
> 
> 时间：2012-08-17T10:39:59.390
> 
> 标签：java, swing, repaint, paintcomponent

我有一个函数可以打印玩家有多少猜测。
这是代码：

```
public void drawString(Graphics g){
    g.setColor(Color.RED);
    g.drawString("You have " + getN() + " guesses left", 400, 50);
    if (lastN != getN()){
        repaint();
        lastN = getN();
    }
} 
```

我的问题是它每隔一段时间就会重新粉刷一次。我是说：

**首先它打印：**你有 10 个猜测，
然后当只剩下 9 个猜测时它保持 10

**然后它打印：**你还有 8 个猜测
等。直到有 0...

如何让它每次都改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T10:46:38.803

所以你需要做：

```
if (lastN != getN()){        
    lastN = getN();
}
repaint(); 
```

`repaint`在`if`条件之外，现在在这种情况下`paint`每次都会被调用

# javascript - 如何组合标签，只要它们具有相同的类

> ID：12004239
> 
> 赞同：1
> 
> 时间：2012-08-17T10:40:03.917
> 
> 标签：javascript, jquery, html

我得到**理想**的 Html看起来像这样：

```
<span class="RapidLink1-H">See the more detailed areas of what not</span> 
```

接下来我的目标是将跨度标记更改为锚标记。使用理想的 Html，我是这样做的：

```
 // Walk through each link tag on this page and replace the content with an actual link
            thisLink.each(function() {

                linkRefTarget = '';

                // Get only the identifier number of the link
                linkId = ($(this).attr('class')).replace(/[A-Za-z$-]/g, '');

                // Match this link with the list of link references
                if (thisLinkRef) {
                    for (var key in thisLinkRef) {
                        if (key == 'link' + linkId) linkRefTarget = thisLinkRef[key];
                    }
                }

                output = '';
                output+= '<a href="#' + linkRefTarget + '" id="link' + linkId + '" class="rapidLink">';
                output+= $(this).html();
                output+= '</a>';

            }).replaceWith(output); 
```

现在，当我实际得到这种 Html 时，问题就来了（请注意，我无法更改 Html 输入）：

```
<span class="RapidLink1-H">See the</span><span class="RapidLink1-H">more detailed areas of</span><span class="RapidLink1-H">what not</span></span> 
```

问题是：

**我怎样才能让它与这样一组破碎的跨度一起工作？**

我在想以下几点：

*   找到预期的链接跨度
*   检查下一个元素是否也是同一个类的span
*   然后检查下一个元素是否也是...，
*   然后检查...
*   如果没有找到，将每个 span 的 innerHtml 组合成一个锚标记

我怎么能实现这样的循环？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T10:50:18.070

有`+`选择连续元素的选择器：http: [//jsfiddle.net/NWWYC/1/](http://jsfiddle.net/NWWYC/1/)。

```
$(".RapidLink1-H + .RapidLink1-H").each(function() {
    // move contents to previous span, remove this span afterwards
    $(this).prev(".RapidLink1-H").append(
        $(this).contents()
    ).end().remove();
}); 
```

# c++ - 制作解析器以提取函数名、参数、返回类型

> ID：12004242
> 
> 赞同：1
> 
> 时间：2012-08-17T10:40:25.320
> 
> 标签：c++, parsing

我需要解析一个 C++ 类文件 (.h) 并提取以下信息：

1.  函数名称
2.  返回类型
3.  每个函数的参数类型列表

假设有一个特殊的标签，我可以使用它来识别我是否需要解析一个函数。

例如。

```
#include <someHeader>  

class Test
{
    public:
    Test();

    void fun1();
    // *Expose* //
    void fun2();  

}; 
```

所以我只需要解析 fun2()。

[我在这里](http://homepages.e3.net.nz/~djm/cppgrammar.html#decl-specifier-seq)阅读了基本语法，但发现它太复杂而无法理解。

Q1。我无法弄清楚这项任务有多复杂。有人可以为函数声明提供*更简单*的语法来执行此解析吗？

Q2。我的方法是正确的还是我应该考虑使用一些库而不是重新发明？

* * *

编辑：澄清一下，我没有解析问题，问题更多是理解我需要解析的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:02:19.790

C++ 标头可能包含任意 C++ 代码。因此，解析标头可能与解析各种 C++ 代码一样难。

如果您可以对头文件做出某些假设，您的任务就会变得更容易。例如，如果你的函数前面总是有一个 EXPOSE-tag 并且函数总是在一行上，你可以先 grep 这些行：

```
grep -A1 EXPOSE <files> 
```

然后您可以应用正则表达式来过滤掉您需要的信息。

不过，我建议使用现有工具。[这似乎是一个](http://eli.thegreenplace.net/2011/07/03/parsing-c-in-python-with-clang/)关于如何使用 clang 和 Python 的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:20:33.137

[GCC XML](http://www.gccxml.org/HTML/Index.html)是一个发布 AST（抽象语法树）的开源工具。请参阅我发布的关于我使用它的其他答案[。](https://stackoverflow.com/a/9231426/874024)

仅当您精通（或类似学习）用于检查 AST 的 XML 分析器时，才应考虑使用。这是一个相当复杂的结构...

无论如何，您都需要“grep”用于标识所需片段的注释，因为注释在输出 XML 中丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:26:05.953

如果您这样做只是为了文档，[doxygen](http://www.doxygen.nl/)可能是一个不错的选择。

无论哪种方式，它都可以为您提供一些有关如何执行此操作的指示。

# sql-server - 如果 MS SQL preocedure 包含 CREATE TABLE 语句，则 callablestatement.execute() 返回一个空结果集

> ID：12004248
> 
> 赞同：0
> 
> 时间：2012-08-17T10:41:02.680
> 
> 标签：sql-server, jdbc

我使用 Callablestatement 类`execute()`方法来调用 MS SQL 过程。

我调用包含以下语句的 MS SQL 过程：

```
CREATE TABLE #PrevOver (ClCode char(6) NULL , 
ContrNum char(4) NULL , 
OverContr smallint NULL, 
GenerNum tinyint NULL ) 
```

表用作临时数据存储

如果我放弃上面的语句并重新编写过程，它只使用 select 语句返回数据 - 一切正常。问题是某些程序需要“CREATE TABLE”语句。

我使用“sa”许可连接，所以它不应该是许可问题。我用jtds

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:41:24.493

将以下参数添加到过程主体：

*设置NOCOUNT ON

设置 FMTONLY 关闭*

# c# - Linq to sql deleteAllOnSubmit 参照完整性

> ID：12004251
> 
> 赞同：0
> 
> 时间：2012-08-17T10:41:07.827
> 
> 标签：c#, .net, linq, linq-to-sql

假设我有以下课程：

```
 Module
    {
        long MID    // PK
        string Name
    }

    ModuleBlock
    {
        long MID      // FK
        long BID      // FK
    }

    Block
    {
        long BID      // PK
        string Info
    }

    BlockLanguage
    {
        long BID      // FK
        long LID      // FK
    }

    Language
    {
        long LID      // FK
        string Language
    } 
```

想象一下这些都充满了数据。现在，我想删除一组块。我该怎么做？我必须删除相应的 ModuleBlocks 和 BlockLanguages。

假设这是我要删除的块列表：

```
 var blocks = // blocks query here 
```

我可能不得不打电话：

```
 Context.Blocks.DeleteAllOnSubmit(blocks); 
```

但是我还需要调用什么来确保 ModuleBlock 和 BlockLanguage 中的数据也被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:43:58.087

您可能可以使用关联的对象来执行此操作。

```
Context.ModuleBlocks.DeleteAllOnSubmit(blocks.ModuleBlocks);
Context.BlockLanguages.DeleteAllOnSubmit(blocks.BlockLanguages);
Context.Blocks.DeleteAllOnSubmit(blocks); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:55:58.277

是的，您需要手动删除子对象。不过有一个技巧：`CASCADE`在 SQL Server 中设置外键。然后它将自动删除关联的对象。这是最快和最简单的解决方案。

# jquery - Facebook 喜欢自动完成文本框，每个标签中都有关闭按钮（在 ASP.NET 中）

> ID：12004254
> 
> 赞同：2
> 
> 时间：2012-08-17T10:41:16.510
> 
> 标签：jquery, asp.net

任何人都可以提供指向博客/教程的链接，这将帮助我构建 facebook，例如带有关闭按钮的自动完成文本框

这些家伙已经实现了我真正想要的那个。

[http://www.devthought.com/projects/mootools/textboxlist/](http://www.devthought.com/projects/mootools/textboxlist/)

这正是我需要的。但它是付费的。

任何人都可以帮助我吗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:58:19.690

[jQuery Tokeninput](http://loopj.com/jquery-tokeninput/)是我最喜欢的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:45:26.277

Ajax 控制工具包附带一个：

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

或者，如果您实现 JQuery，则有 JQuery UI 之一：

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

# iphone - iPhone：如何从通知中心删除通知

> ID：12004255
> 
> 赞同：0
> 
> 时间：2012-08-17T10:41:19.857
> 
> 标签：iphone, push-notification, apple-push-notifications

我有一个向我的 iPhone 发送推送通知的提供商。如果我在主屏幕上，我点击通知中心的推送通知，我的应用程序就会打开。然后我关闭了我的应用程序，但通知仍在通知中心...为什么？我已经读过了，为什么它不消失？关闭应用程序后如何删​​除此通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:46:15.873

当您想从应用程序中删除徽章时，只需将徽章编号的值分配为 0 就意味着自动删除徽章。

```
 - (void)applicationWillEnterForeground:(UIApplication *)application
    {
             [UIApplication sharedApplication].applicationIconBadgeNumber = 0;
             [[UIApplication sharedApplication] cancelAllLocalNotifications];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:45:53.063

您可以使用以下代码删除通知

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0];
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

这将从通知中心删除所有应用程序的通知。

# c++ - 堆栈上的对象被覆盖时不调用析构函数

> ID：12004258
> 
> 赞同：6
> 
> 时间：2012-08-17T10:41:35.563
> 
> 标签：c++, destructor

今天我想知道 C++ 的析构函数，所以我写了一个小测试程序。这回答了我最初的问题，但提出了一个新问题：
以下程序：

```
#include "stdafx.h"
#include <vector>
#include <iostream>
using namespace std;
class test
{
public:
    int id;
    vector<test> collection;
    test(){}
    test(int id_in){id = id_in;}
    ~test(){cout << "dying: " << id << "\n";}
};

int _tmain(int argc, _TCHAR* argv[])
{
    {
        test obj(1);
        obj.collection.push_back(test(2));
        obj.collection.push_back(test(3));
        cout << "before overwrite\n";
        obj = test(4);
        cout << "before scope exit\n";
    }
    int x;
    cin >> x;
} 
```

产生以下输出：

```
dying: 2
dying: 2
dying: 3
before overwrite
dying: 2
dying: 3
dying: 4
before scope exit
dying: 4 
```

为什么我看不到 id 为 1 的测试对象的析构函数？如果它的析构函数在被覆盖时没有被调用，那么在它的向量中调用实例的析构函数是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T10:44:42.697

那是因为您没有实现赋值运算符，因此改为进行成员赋值。所以这一行：

```
obj = test(4); 
```

导致`id`第一个对象 ( `test obj(1)`) 被覆盖到`4`. 最后一行`dying: 4`是销毁那个对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T10:47:48.530

您通过创建析构函数但没有赋值运算符违反了[三法则。](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

通过阅读，您可以如下解释您的代码：

当线

```
obj = test(4); 
```

`test`编译后，会创建一个 id 为 4的临时实例。

然后，调用赋值运算符。由于您没有提供，因此编译器为您生成了一个，如下所示：

```
test& operator=(const test& other)
{
    id = other.id;
    collection = other.collection;
    return *this;
} 
```

id 1 简单地被临时的 4 覆盖，对于集合赋值，`std::vector`调用赋值运算符 of。

`std::vector`的赋值运算符删除所有以前包含的元素，这就是您看到的原因

```
dying: 2
dying: 3 
```

在你的输出中。最后将临时创建的 id 为 4 的 obj 实例删除，导致

```
dying: 4 
```

第一次出现。当`obj`超出范围时，您会看到

```
dying: 4 
```

再次输出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T10:47:14.870

`obj`执行此操作时不会被破坏：

```
obj = test(4); 
```

所发生的只是 a`test(4)`被创建并分配给现有对象，因此`id`1 将被 4 覆盖，这就是为什么您将最后一个视为：

```
dying: 4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:30:06.713

关于**实践中的行为**，声明

```
 obj = test(4); 
```

`id`将成员的值更改为`4`。因此，当该对象被销毁时，它会报告具有 id 的对象`4`已被销毁。由于您尚未定义复制分配运算符，因此该分配执行按成员分配。

关于**正式保证的行为**`"stdafx.h"`，只有在代码中的非标准标头定义了宏`_tmain`并且`_TCHAR`预处理产生标准`main`要求的标准函数时，您才具有（对于托管实现） ：

> **C++11 §3.6.1/1**：
> “程序应包含一个名为 的全局函数`main`，它是程序的指定开始。是否需要独立环境中的程序来定义主要功能是由实现定义的。”

虽然不太可能，但这意味着如果标头没有*适当*地定义这些宏，那么原则上，*无论其余代码如何，您**都*可以获得您看到的输出。

 *确保不发生未定义行为的一种方法是简单地使用标准`main`.

毕竟，截至 2012 年，使用那些旨在支持 Windows 9x 的 Microsoft 宏绝对没有优势，尤其是考虑到 Microsoft 使用 Unicode 层，在 2001 年就已经*过时了这些宏。*

即，在 10 年后继续使用它们，只是毫无意义的混淆和额外的工作，包括你不能正式地说你的程序必须产生任何特定的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T10:47:19.693

你看不到 1 因为你在最后破坏了 obj 。在你用 test(4) 重写它之前。因此 1 被 4 重写。*

# c++ - 给定 QVariant，获取对某种类型的变量的引用

> ID：12004261
> 
> 赞同：1
> 
> 时间：2012-08-17T10:41:50.170
> 
> 标签：c++, qt

我有 QVariants 的 QVector。为了实现我的类的接口，我应该实现 getter，它将返回对数据的常量引用，存储在这个向量中。看起来像：

```
const QString& getSomeProperty()
{
    return value<QString>(0);
}

template <typename MyType>
const T& value (int index)
{
    const MyType* ptr = static_cast<const MyType*>(m_d.at(index).constData());
    if (ptr)
        return *ptr;
    else
        return static_cast<T>(QVariant());
}

QVector<QVariant> m_d; 
```

我不能使用非 QVariants 的向量，因为需要存储不同的类型。我不能使用 Qt3 方法（asString、asBool ...）。有没有更好的方法来做我正在做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:22:29.650

我不知道，如果我理解正确的话。但是，以下代码`index`将从您的向量中提取位置处的变量，并将其值作为 const 引用返回`T`。如果变体不存储 a `T`，您仍然必须返回 a `T`。因此，您需要一些默认值，在这种情况下您可以返回。

```
template <typename T>
const T& value(int index)
{
    // Some value to return, if the variant does not store a T.
    static T defaultValue;

    const QVariant& variant = m_d.at(index);

    // If the variant stores a T, return it.
    if (variant.userType() == qMetaTypeId<T>())
        return *reinterpret_cast<const T*>(variant.constData());

    // Return the default value. Or add an assertion here. Or throw
    // an exception etc.
    return defaultValue;
} 
```

这个简单的测试用例

```
m_d.push_back(10);
m_d.push_back(QString("Hello"));
m_d.push_back(3.14);

// This returns what is stored in the vector.
qDebug() << value<int>(0);
qDebug() << value<QString>(1);
qDebug() << value<double>(2);

// This returns the default value.
qDebug() << value<int>(1);
qDebug() << value<QString>(2);
qDebug() << value<double>(0); 
```

产生以下输出

```
10
"Hello"
3.14
0
""
0 
```

您可以在其中看到最后三个查询返回默认值。

**注意：**如果 Qt 容器找不到请求的元素，它们通常会将默认值传递给它们返回`T`的函数（例如）。`QMap::value()`您也可以尝试使用类似的东西

```
template <typename T>
T value(int index, const T& defaultValue = T())
{
    ...
} 
```

**编辑：**修复了从临时返回一个常量引用。

# c++ - 将 IloEnv 转换为 CPXENVptr

> ID：12004263
> 
> 赞同：1
> 
> 时间：2012-08-17T10:42:11.977
> 
> 标签：c++, cplex

我正在使用 Concert 技术使用 IloCplex 构建优化模型。在我的例程中，我需要调用我的教授几年前编写的子例程。此子例程需要一个“指向由 CPXopenCPLEX 返回的 CPLEX 环境的指针”作为参数。问题是，我不知道如何使用 Concert 技术制作这样的指针。“CPXopenCPLEX”似乎属于可调用库。到目前为止，我所做的是将模型中的 IloEnv 声明为

IloEnv 环境；

然后我尝试将其转换为指向 CPLEX 环境的指针，如下 CPXENVptr cpxenv; cpxenv = (CPXENVptr) &(env);

但它似乎不起作用。它会编译，但是当我运行代码时，我会看到消息

“分段错误（核心转储）”

我希望有一个人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:23:06.417

必须初始化环境，而不仅仅是简单地声明为局部变量。

```
int status;
CPXENVptr env;
env = CPXopenCPLEX (&status);
... 
```

# javascript - Zebra DatePicker 定位问题

> ID：12004267
> 
> 赞同：3
> 
> 时间：2012-08-17T10:42:24.140
> 
> 标签：javascript, jquery, asp.net, jquery-ui-datepicker

我正在使用 Jquery Zebra DatePicker 的 asp.net 中开发一个应用程序，但问题是，我在 Jquery dailog 中打开表单，日历将在对话框中打开，但 datepicker 在页面底部打开，[此处](https://stackoverflow.com/questions/11407719/jquery-ui-datepicker-position-bottom-or-top-but-not-both)报告了相同的问题，但我无法理解如何修改该功能。请告诉我解决方案或使用其他与 ajax 日历扩展器相同的插件。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:28:33.867

我最近有同样的问题。但是一点延迟（超时）为我解决了这个问题：

```
jQuery(document).ready(function($){
    window.setTimeout(function(){
        $('input.datepicker').Zebra_DatePicker();
    }, 100);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:43:52.677

抱歉延迟回复...无论如何我想改进这个答案。我遇到了同样的问题，但在我的情况下，它是由于图标在日期文本框中的位置而发生的。如果您只想更新图标的位置，只需调用不带任何参数的 update 方法：

var datepicker = $('element').data('Zebra_DatePicker'); datepicker.update();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T10:48:32.843

在您的 css 类中添加以下内容，因为它是 (Zebra_DatePicker)：

```
 .Zebra_DatePicker{
    position: absolute;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-05T10:02:33.280

**我们可以通过改变default_position**和**container**属性来控制 Zipra Datepicker 的位置

Zipra Datepicker 有**default_position**属性，我们可以使用该`default_position`属性在输入框的上方或下方显示日历。

*   默认位置 ->**上方/下方**

Zipra Datepicker 默认位置在上方，表示日历会显示在输入框的右上方。

* * *

第二个选项是容器，日历会相对于容器元素显示。

*   `container: $('body')`,

默认情况下，容器将是 ，`body`这意味着日期选择器将附加到主体，您可以`HTML code`在顶部看到日期选择器`DOM`

您可以通过在容器部分添加父类名称来更改容器相对于输入框父级的位置`div`。

```
$('#datepicker-on-change').Zebra_DatePicker({
        default_position: 'below',
        container : $('.datepicker-position')      
});
```

```
<div class="datepicker-position">
<input  id="datepicker-on-change" type="text" class="form-control" data-zdp_readonly_element="false">                                
</div>
```

# redis - 使用多个 JedisPool

> ID：12004268
> 
> 赞同：2
> 
> 时间：2012-08-17T10:42:24.070
> 
> 标签：redis, jedis

最初，当我使用 1 JedisPool 与 Redis 服务器（在服务器上运行的单个 redis 实例）通信时，我看到我的 200K 查询需要 15 秒才能完成。对于每个查询，我执行以下操作：

```
Jedis jedis = pool.getResource();
Pipeline p = jedis.pipelined();
p.multi();
for (String ViewId : ViewIds) { 
    for (Article aR : view.getEntriesList()) {
        p.rpush(ViewId, <article-in-json>);
    }
    p.ltrim(ViewId, -10, -1);
} 
p.exec();
p.sync();
pool.returnResource(jedis); 
```

JedisPool 创建使用：

```
JedisPool pool = new JedisPool(new JedisPoolConfig(), getHostName(), getPort(), 0, "foobared"); 
```

但是，当我将 8 个 JedisPools 用于同一台服务器（相同的 redis 实例）并以循环方式使用它们时，我看到 200K 查询在大约 8-10 秒内处理（之前使用 1 个 JedisPool 需要 15 秒）=> 相当大的改进.

这是什么原因？我们应该使用的最佳 JedisPool 数量是多少？

# php - Zend Framework 2：NotEmpty 验证器消息

> ID：12004270
> 
> 赞同：6
> 
> 时间：2012-08-17T10:42:37.220
> 
> 标签：php, forms, validation, zend-framework2

我有一个带有元素的表单`username`。有两个验证器：`NotEmpty`和`StringLength`。的自定义错误消息`StringLength`正在工作，但不知何故它不使用`NotEmpty`验证器的自定义错误消息。在 ZF1 中，当需要一个可以关闭的元素时，会自动添加 notEmpty 验证器。我在 ZF2 中找不到这样的选项，也许我的 NotEmpty 验证器没有被使用，因为它已经被所需的标志添加了！？

```
 $inputFilter->add($factory->createInput(array(
        'name'     => 'username',
        'required' => true,
        'filters'  => array(
            array(
                'name' => 'StringTrim'
            ),
        ),
        'validators' => array(
            array(
                'name' => 'NotEmpty',
                'options' => array(
                    'messages' => array(
                        NotEmpty::IS_EMPTY => 'Bitte geben Sie Ihren Benutzernamen ein.',
                    ),
                ),
            ),
            array(
                'name' => 'StringLength',
                'options' => array(
                    'min' => 3,
                    'max' => 45,
                    'messages' => array(
                        StringLength::TOO_SHORT => 'Der Benutzername muss mindestens 3 Zeichene lang sein.',
                        StringLength::TOO_LONG => 'Der Benutzername darf maximal 45 Zeichen lang sein.',
                    )
                ),
            ),
        ),
    ))); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:50:26.860

默认情况下，ZF2 表单会在创建不同表单元素时自动为它们添加验证器。为了防止添加默认值并且只存在您的验证器，您需要添加到表单构造函数：

$this->setUseInputFilterDefaults(false);

这将阻止 Form 对象添加那些默认验证器。现在，当您添加自己的 NotEmpty 或任何其他元素时，带有自定义消息的验证器，将使用该消息而不是默认消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T09:25:35.563

这是我使用的版本中的一个错误。在 GitHub 上更新到最新版本后，它工作正常。

# android - Android：你可以在 ListView 的 LinearLayout 中添加多个子元素吗？

> ID：12004273
> 
> 赞同：0
> 
> 时间：2012-08-17T10:42:41.293
> 
> 标签：android, listview, android-linearlayout

我正在创建一个`ListView`每个列表项都有一个`LinearLayout`我想用来动态添加多个输入组件的位置。我对列表项使用以下布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:orientation="vertical"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
>
  ...
  <LinearLayout
    android:id="@+id/input_container"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
  />
</LinearLayout> 
```

当我向其中添加多个复选框时，`input_container`我只看到第一个复选框。的`LinearLayout`高度似乎是正确的（缺少复选框的空间）。

结果看起来像：

```
--------------------------
List item 1
[_] Option 1

--------------------------
List item 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:51:22.827

请记住使用正确的方向。

默认情况下，LinearLayout 具有水平方向。

```
android:orientation="vertical" 
```

所以你的 xml 看起来像这样

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

    <LinearLayout
    android:id="@+id/input_container"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation:"vertical">

        <!-- Your stuff here -->

    </LinearLayout>
</LinearLayout> 
```

您可以在此处阅读有关`LinearLayout`其方向的更多信息：[Android 开发人员：LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android%3aorientation)

# android - 片段中的可滚动视图

> ID：12004275
> 
> 赞同：4
> 
> 时间：2012-08-17T10:42:58.563
> 
> 标签：android, scrollview, fragment, custom-component

我已经坚持了几天了，无法弄清楚我做错了什么（希望这不是我错过的愚蠢行为）。

**要求**

我有一个 FragmentPager，其中包含带有 LinearLayout 的片段。布局有一个按钮和一个可以根据用户导航更改的视图。

GridView 和 ListView 等所有视图都能完美运行。但我需要提出另一种适合在概念上略有不同的片段的视图。视图必须是可垂直滚动的，因为它的高度可以大于屏幕尺寸。我不在乎视图是以编程方式创建还是从 .xml 动态扩展。我尝试了这两种方法，都给出了相同的结果。

**解决方案1（更可取）**

我试图制作一个自定义视图并将其推送到 ScrollView 中。这是相关的.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >
    <com.myPackage.MyView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
</com.myPackage.MyView>
</ScrollView> 
```

我制作了自定义视图以显示一个非常大的矩形，因此它超出了屏幕尺寸。MyView 的代码：

```
package com.myPackage.MyView;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;

public class MyView extends View {
    public MyView(Context context) {
        super(context);
    }

    public MyView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        Paint paint = new Paint();
        paint.setColor(Color.RED);
        canvas.drawRect(0, 0, 100, 8000, paint);
    }
} 
```

问题在于 ScorllView 不滚动。

我尝试删除 fillViewport （正如我在另一个答案中看到的那样），这导致根本没有显示任何内容，我还尝试在 ScrollView 内部和外部添加布局，但什么也没有。尝试所有“fill_parent”/“wrap_content”组合也会导致非滚动 ScrollView。

我究竟做错了什么？

**解决方案2（不太可取）**

我可以（粗暴地）将视图的概念强制到 ListView 中，它可以很好地滚动，但我无法让列表中的视图显示我的自定义视图。调试时，我注意到从未调用过 onDraw。我是否需要在其他地方实现视图的绘制，以便在 ListView 中绘制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:46:38.313

Iain_b 是正确的，当一个视图被绘制时，它会剪裁任何不在其布局范围内的东西。对于自定义视图，这通常通过覆盖 OnMeasure 方法来完成。目前，您将自定义视图设置为 wrap_content 的高度，在您的情况下，这将导致高度为 0 的视图（它没有内容）。不幸的是，重写 OnMeasure 意味着您不能为自定义视图使用 height 和 width 属性，但是当 Android 完成布局传递时，您将在 OnMeasure 调用中获得更好的控制。

这一切都在此处的 Android 文档中进行了描述：[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html "自定义组件")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-16T12:34:49.133

```
<ScrollView>
//your textview goes here
</ScrollView> 
```

例如，如果您有一个 TextView 并且希望它是可滚动的，那么您可以使用上面给出的 ScrollView。

确保您在 ScrollView 中仅嵌套一个 TextView

# r - 简单的条形图 ggplot2 数字标签

> ID：12004283
> 
> 赞同：1
> 
> 时间：2012-08-17T10:43:45.493
> 
> 标签：r, ggplot2

我是 ggplot 新手，很难创建简单的条形图。我的数据已经分箱，我只想重新创建一个条形图

```
x freq
2   10
7   18 
9   10
18  90 
```

我希望 x 轴使用 x 数据作为标签而不“缩放”数据，本质上，我想我正在尝试做一个`scale_identity`但无法弄清楚。我做到了这一点：

```
qplot(x=V1, y=V2, data=test, geom="bar", stat="identity", color="red") 
```

# php - Vagrant 中的 PHP 和 Mongo，“未捕获的异常 'MongoException' 带有消息 'BSON doc 的大小为 x 字节，最大值为 0'”

> ID：12004284
> 
> 赞同：2
> 
> 时间：2012-08-17T10:43:45.647
> 
> 标签：php, mongodb, vagrant

我有一个带有 Mongo 和 PHP 的 Vagrant 设置，但是任何时候我尝试在 Mongo 集合中运行一个简单的插入，我都会收到上述错误，

```
Uncaught exception 'MongoException' with message 'size of BSON doc is 210 bytes, max is 0' 
```

实际代码是

```
$mongo = new Mongo();
$mongo->newdb->drop();
$db = $mongo->newdb;
$collection = $db->newcollection;
$collection->insert(array ( "_id" => new MongoId("4ec1019f87484465ae4d777e"), "id" => 1)); 
```

网上几乎没有关于这个错误的信息，而且我几乎所有的 Vagrant 设置都是网上所说的工作。有人知道为什么会失败吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:52:17.283

很抱歉，这是因为我安装了一个*非常*旧的 Mongo 版本，比如 1.4，因为 Vagrant 配置错误。一旦我把它整理出来并安装了最新的（MongoDB shell 版本：2.0.7），一切都像一个魅力。不过感谢您的帮助。

# c++ - 快速时间函数 C/C++

> ID：12004286
> 
> 赞同：5
> 
> 时间：2012-08-17T10:43:47.577
> 
> 标签：c++, c, performance, time

我目前正在使用 ctime 库中的时间。有没有更快的选择？

```
time_t start_time, elapsed_time;

for(int i = 0; i < n; i++) {
    start_time = time(NULL);
    /// optimized code
    if(condition_met())
    {
       elapsed_time = time(NULL) - start_time;
    } else continue;
} 
```

time(NULL) 还不够快。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T10:49:52.713

您似乎只想测量经过的时间（而不关心绝对时间）。测量经过时间的最快方法之一（如果您使用的是 x86）是读取[rdtsc 计数器](http://en.wikipedia.org/wiki/Time_Stamp_Counter)。在 mvsc++ 中，这可以通过以下方式实现：

```
#include <intrin.h>
unsigned __int64 rdtsc(void)
{
    return __rdtsc();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T10:52:14.357

我不确定，但我猜想，考虑到整秒，你可能会说这`time(NULL)`不够*细化*。换句话说，您*可能*希望降低到毫秒、微秒或纳秒。

如果是这样的话，看看[这个问题](https://stackoverflow.com/questions/275004/c-timer-function-to-provide-time-in-nano-seconds "这个问题")

# php - 如何将数据成员值传递给父对象内的私有对象？

> ID：12004288
> 
> 赞同：0
> 
> 时间：2012-08-17T10:43:47.383
> 
> 标签：php, class, object

这是我保存数据的类：

```
class AA{
    public $a
    public $b
    private $_obj;
    public function __constructor(){

           }
    public function populate(){
           $data = //a query to get all data I need at once including $b
           $this->a = $data->a;
           $this->b = $data->b;
           }
    public function save() {
           if ( $this->_obj instanceof BB ) {

            $this->_obj->save() // $b is a value need to be manipulated in $_obj, it's saved there.
           }

          $data=array();// save all date excluding $b
          update_data($data);

        }
} 
```

在填充 BB 类时，我不想对 $b 运行单独的查询，因为 AA 类中的查询已经获取了数据。如何将值传递给 BB 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:51:23.280

您必须以某种方式将数据传递给 $_obj 。首选方式取决于两个对象之间的关系。如果例如。AA 是类 BB 的扩展，您可以通过扩展类 BB ( `class AA extends BB { }`) 来共享变量数据。但是，如果 BB 是，另一个例子，某种接口（不是编程接口关键字），你应该将数据传递给 BB。比做这样的事情：

```
private $_data = null;

...

public function populate() {
    $data = //a query to get all data I need at once including $b
    $this->_data = $data;
    ...
}

public function save() {
    ...
    $this->_obj->save($this->_data); // function to process the data
    ...
} 
```

但再一次，这更像是一个设计问题，而不是一个实用问题。您的代码是抽象的以智能地回答这个问题。

# php - php exec() - mysqldump 创建一个空文件

> ID：12004292
> 
> 赞同：12
> 
> 时间：2012-08-17T10:44:01.503
> 
> 标签：php, mysql, exec, mysqldump

我想从数据库创建备份，但我只得到一个空白文件。

```
include('config.php');

$command = "mysqldump --opt -h ".$_host." -u ".$_user." -p ".$_pass." ".$_db." > test.sql";
exec($command);

echo "<br />".$command; 
```

test.sql 在 .php 文件所在的位置创建。

**编辑：**

笔记！我正在使用 XAMPP WINDOWS ！

**解决方案：**

因为我使用的是 Windows Web Server (XAMPP)，所以我需要指定路径：

```
$command = 'd:\xampp\mysql\bin\mysqldump --opt -u '.$_user.' -p'.$_pass.' '.$_db.' > test.sql'; 
```

1.  我删除了 -p 和 pass 之间的空格。看起来像：`-pMYPASSWORD`
2.  替换`"`为`'`

我认为如果您使用的是基于 Linux 的 Web 服务器，则不必指定 mysqldump 的路径。

干杯! :-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T10:51:14.390

这些是参数

-uROOT -pPASSWORD --databases DB --result-file=FILE.SQL

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-04T19:42:02.770

试试这个：

```
$command = 'd:\xampp\mysql\bin\mysqldump --opt -u '.$_user.' -p'.$_pass.' '.$_db.' > test.sql 2>&1'; 
```

-关于权限问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T07:38:23.843

**对于 Mac 上的用户**

我今天整个晚上都在与这个问题作斗争。愚蠢的错误：需要 chmod 将文件转储到的目录。

我运行了这个解决了这个问题：

```
chmod -R 777 your_dump_directory/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-12T17:26:57.537

从引号中取出变量并删除--opt。

还要确保您拥有唯一的文件名

`$backupfile = $dbname . date("Y-m-d-H-i-s") . '.sql';`

`$command = "D:\xampp\mysql\bin\mysqldump -u $_user -p$_pass $_db > $backupfile";`

`system($command);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T10:47:47.650

您应该删除 -p 和密码之间的空格。

`--opt`最新版本的 mysql 不需要。

除此之外，您的语法是正确的，因此如果它不适用于 -p 修复，您应该检查参数和生成的命令。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T10:58:34.337

如果您查看[exec](http://php.net/manual/en/function.exec.php)手册，输出将转到作为第二个参数的数组。这可能是问题的根源。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-26T09:35:07.623

尝试这个：

```
$DBUSER="user";
$DBPASSWD="password";
$DATABASE="DBname";

$filename = "backup-" . date("d-m-Y") . ".sql";

$command = '"C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqldump.exe" '.$DATABASE ." -u".$DBUSER ." -p".$DBPASSWD." > your_web_site/$filename";
passthru($command); 
```

*   将路由更改为您计算机的 mysqldump.exe 应用程序的方向。
*   尊重命令中的“”。

然后强制下载文件：

```
if (file_exists("your_web_site/".$filename)) {
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($filename).'"');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
readfile("your_web_site/".$filename);
exit;
} 
```

编辑：您必须授予保存副本的文件夹的权限。

# ios - phonegap ios加载网址

> ID：12004295
> 
> 赞同：1
> 
> 时间：2012-08-17T10:44:35.537
> 
> 标签：ios, cordova

我正在使用 phonegap 在 ios 上构建一个混合应用程序。当我运行它时，在模拟器屏幕上显示的默认文件是 www 文件夹中的 index.html 问题是，我可以在开始时加载外部页面，如“www.mysite.com/mobile”吗？

我试图改变“AppDelegate.m”的代码

从

```
 self.viewController.wwwFolderName = @"www";
   self.viewController.startPage = @"index.html"; 
```

至

```
 self.viewController.wwwFolderName = @"";
   self.viewController.startPage = @"www.mysite.com/mobile"; 
```

但是当我在设备上运行它时出现错误：

错误：找不到“/wwww.mysite.com/mobile”的起始页

# css - CSS 3 Column Divs 循环

> ID：12004298
> 
> 赞同：0
> 
> 时间：2012-08-17T10:44:44.820
> 
> 标签：css, drupal, html

我有一个 drupal 视图，它可以拉出项目屏幕截图并将它们放入 div 中，我想知道 CSS 中是否有一种聪明的方法可以将它们对齐成一行 3 列并留有边距，而无需单独设置每个框的样式。

第一行样式很容易，因为我可以给 div-even 左右边距，但是第 2 行我需要给 div-odd 一个边距，而偶数 div 没有边距

我已经创建了我所在位置的 J fiddle Mockup。我可以设置第一个和最后一个 div 的样式，也可以给奇数和偶数一个规则，但是因为我不知道它们的项目屏幕截图如何，我不想单独设置每个 div 框的样式

[http://jsfiddle.net/eGWY6/](http://jsfiddle.net/eGWY6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:03:06.523

你可以这样解决这个问题：

jQuery：

```
// Remove margin on third project screen shot
if($("#projects-wrapper div").length){
  $("#projects-wrapper div").each(function(i){
    var remainder = (i + 1) % 3; //3th change to your needs
    if(remainder === 0){
      $(this).addClass("last");
    }
  });
} 
```

CSS：

```
.last {margin-right: 0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:11:08.747

嘿，现在像这样定义 css

```
.view-last{
margin-right:0;
}
.view-4{
margin-left:0;
} 
```

***[演示](http://jsfiddle.net/eGWY6/3/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:12:27.670

看看这个小提琴，我认为这就是你要找的东西。如果你以百分比给出宽度，那么放置它们会很容易。

[http://jsfiddle.net/eGWY6/7/](http://jsfiddle.net/eGWY6/7/)

现在你可以用奇数或偶数命名备用 div 并设置它们的样式。就这么简单

# java - 如何创建这个类的对象？

> ID：12004300
> 
> 赞同：0
> 
> 时间：2012-08-17T10:44:51.390
> 
> 标签：java, android, class, object

我有以下带有构造函数的类：

```
public class TestAdapter {

    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private  SQLiteDatabase mDb;
    private  DatabaseHandler mDbHelper;

//  private static SQLiteDatabase mDb2;
//  private static DatabaseHandler mDbHelper2;

    public TestAdapter(Context context) {
        this.mContext = context;
        mDbHelper = new DatabaseHandler(mContext);
    } 
```

在这门课中，我有一个 `setFlag()`需要从以下方法调用的方法 -

```
@Override
        protected void onPostExecute(String result) {
            // tv.setText(result);
            Log.e("result", result);
            if (Integer.parseInt(result) == 1) {
                flagValue = 1;
                Log.e("my","flag value set");
                //TestAdapter t =new TestAdapter();
                //setFlag()

            } 
```

注释部分是我需要调用该方法的地方，但我不知道如何创建“TestAdapter”类的对象。如果我在该类中设置 setFlag() 为静态，则该方法中使用的其他实例将不起作用，因为它们不是静态的。F1 F1 F1

编辑：我被告知存在一个活动的上下文，但是我需要在其中创建对象的这个类不是一个活动..它只是一个 java 类，它具有将本地数据库与服务器数据库同步的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:47:20.897

简单的朋友，

在您的`AsyncTask`类的**构造函数**中，您有一个**调用 Activity 的上下文**。

比如，`mContext`..

现在将此上下文传递给您的**TestAdapter 的 Constructor**。

像，

```
@Override
    protected void onPostExecute(String result) {
        // tv.setText(result);
        Log.e("result", result);
        if (Integer.parseInt(result) == 1) {
            flagValue = 1;
            Log.e("my","flag value set");
            TestAdapter t =new TestAdapter(mContext);
            t.setFlag()
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:48:35.133

首先在您的活动中声明首先在顶部声明`Context context = null;`

然后在 onCreate `context = this;`。

现在您可以使用您的方法，例如：

`TestAdapter t = new TestAdapter(context); t.setFlag();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:47:39.423

制作方法**`TestAdapter adapter = new TestAdapter(YourCurrentActivityName.this)`**。然后在你想要的地方**`onCreate()`**调用**`adapter.setFlag();`**方法。**`onPostExecute()`**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T10:47:55.010

试试这个。

```
TestAdapter object = new TestAdapter(CurrentActivty.this); 
```

通过这种方式，您可以创建`TestAdapter`类的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T10:48:59.410

你可以这样做

```
TestAdapter t =new TestAdapter(getApplicationContext()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T10:49:07.267

如果您说出您的 IDE 或 LogCat 给您的错误，会更容易帮助您。根据构造函数的要求，使用 Context 进行实例化。

```
 TestAdapter t =new TestAdapter(ctx);
            t.setFlag() 
```

ctx 是您的上下文。

# python - lxml：就地修改树

> ID：12004306
> 
> 赞同：3
> 
> 时间：2012-08-17T10:45:26.980
> 
> 标签：python, lxml

我有这个简单的功能，如果它们丢失，它会添加新元素：

```
def add_missing(root):
    """ Add missing elements and return `root` """
    for tag, missing_el in missing_tags.items():
        for elem in root.iterfind(".//" + tag):
            if elem.find(missing_el.tag) is None:
                elem.append(missing_el)
                print tostring(elem)
    print tostring(root)
    return root 
```

但是，当我检查 root 是否包含缺少的元素时，我发现只有最后一个元素包含新附加的元素。

有人可以指出一种在迭代 etree 时修改它的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:25:39.990

在树的不同位置添加相同的元素只会移动该元素。使用 deepcopy 解决了这个问题：

```
from copy import deepcopy
def add_missing(root):
    """ Add missing elements and return `root` """
    for tag, missing_el in missing_tags.items():
        for elem in root.findall(".//" + tag):
            if elem.find(missing_el.tag) is None:
                elem.append(deepcopy(missing_el))
                print tostring(elem)
    print tostring(root)
    return root 
```

# oracle - PL/SQL 游标问题

> ID：12004310
> 
> 赞同：0
> 
> 时间：2012-08-17T10:46:07.683
> 
> 标签：oracle, plsql

`cur1`在以下过程中出现光标错误。我可以像这样创建第二个光标吗？如果没有，请提出建议。

```
procedure my_procedure as

cursor cur is     
select objects,un_fact,min__dt min, max_dt max   
  from table1 obj  
 where obj.o = 'SOMECONDITION';

-- below pat_key is a table type of varchar2
patkey_id  pat_key;    
var_attr number;    

begin    
   for x in cur loop
      begin
      patkey_id := null;    
      var_attr:=null;

      select t2.pat_key bulk collect into patkey_id 
        from table2 t2, table1 o   
       where t2.obj_id = x.objects 
         and t2.pat_key = o.key;

      if length(patkey_id) = 0 then    
         select t2.pat_key bulk collect into patkey_id  
           from table2 t2,table1 o
          where some other conditions;
      end if;

      for i in patkey_id.first..patkey_id.last loop
         if var_attr = null then    
            var_attr := patkey_id(0);
         else
            var_attr := var_attr||','||patkey_id(i);
         end if; 
      end loop;

      -- another cursor    
      cursor cur1 is    
       SELECT key_1,key_2  
         FROM table3 t3  
        WHERE t3.pat_key_id = x.min 
          and t3.some1= x.max 
          and t3.some2= var_attr;

     begin

        for y in cur1 loop
        begin
           if t3.key_1 = 'something1' then    
             --update or insert   
          elsif t3.key_1='something2' then
          --update or insert;
           end if;
     end loop;

  end loop;

end my_procedure; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:53:18.877

在变量声明区域中声明第二个游标，然后如图所示引用它。我使用了一个游标参数来帮助您传递给第二个游标的变量。

您的代码不完整，但这应该可以帮助您：

```
procedure my_procedure 
as  
   cursor cur is
      select objects,un_fact,min__dt min, max_dt max
        from table1 obj    
       where obj.o = 'SOMECONDITION';  -- below pat_key is a table type of varchar2  

   cursor cur1 is (
      cp_some2_param IN NUMBER
   )
      SELECT key_1,key_2
        FROM table3 t3
       WHERE t3.pat_key_id = x.min
         and t3.some1= x.max
         and t3.some2= cp_some2_param;  

   patkey_id  pat_key;     
   var_attr number;      
begin        
   for x in cur 
   loop            
      patkey_id := null;           
      var_attr := null;  

      select t2.pat_key 
        bulk collect into patkey_id          
        from table2 t2, table1 o           
       where t2.obj_id = x.objects           
         and t2.pat_key = o.key;        

      if length(patkey_id) = 0 
      then              
         select t2.pat_key 
           bulk collect into patkey_id              
           from table2 t2,table1 o           
          where some other conditions;        
      end if;        

      for i in patkey_id.first..patkey_id.last 
      loop           
         if var_attr = null 
         then                 
            var_attr := patkey_id(0);          
         else
            var_attr := var_attr||','||patkey_id(i);          
         end if;         
      end loop;     

      for y in cur1(var_attr) 
      loop
         if t3.key_1 = 'something1' 
         then
            --update or insert
         elsif t3.key_1='something2' 
         then
            --update or insert;
         end if;
      end loop;
   end loop; 
end my_procedure; 
```

希望能帮助到你...

**编辑：**

我稍微编辑了您的代码以使其更可行，只需将您注释掉的插入或更新语句替换为正确的代码，您就可以开始使用了。

**编辑2：**

如果您真的想在过程中间声明游标，请使用匿名 PL/SQL 块，如下所示：

```
procedure my_procedure 
as  
   cursor cur is
      select objects,un_fact,min__dt min, max_dt max
        from table1 obj    
       where obj.o = 'SOMECONDITION';  -- below pat_key is a table type of varchar2  

   patkey_id  pat_key;     
   var_attr number;      
begin        
   for x in cur 
   loop            
      patkey_id := null;           
      var_attr := null;  

      select t2.pat_key 
        bulk collect into patkey_id          
        from table2 t2, table1 o           
       where t2.obj_id = x.objects           
         and t2.pat_key = o.key;        

      if length(patkey_id) = 0 
      then              
         select t2.pat_key 
           bulk collect into patkey_id              
           from table2 t2,table1 o           
          where some other conditions;        
      end if;        

      for i in patkey_id.first..patkey_id.last 
      loop           
         if var_attr = null 
         then                 
            var_attr := patkey_id(0);          
         else
            var_attr := var_attr||','||patkey_id(i);          
         end if;         
      end loop;     

      DECLARE
         cursor cur1 is 
            SELECT key_1,key_2
              FROM table3 t3
             WHERE t3.pat_key_id = x.min
               and t3.some1= x.max
               and t3.some2= var_attr;  
      BEGIN
         for y in cur1 
         loop
            if t3.key_1 = 'something1' 
            then
               --update or insert
            elsif t3.key_1='something2' 
            then
               --update or insert;
            end if;
         end loop;
      END;
   end loop; 
end my_procedure; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:59:25.557

只需像这样使用第二个光标：

```
DECLARE
  -- cursor 1
  cursor c1 is
  select col1 from tab1;

BEGIN
  for rec in c1
  loop
    -- use tab1 data here

    -- cursor 2
    for rec2 in (select col2 from tab2 where col1=rec.col1)
    loop
      -- use tab2 data here

    end loop;

  end loop;

END; 
```

# authentication - 在 Yii 框架中使用远程服务器对用户进行身份验证

> ID：12004319
> 
> 赞同：0
> 
> 时间：2012-08-17T10:47:17.193
> 
> 标签：authentication, yii

我正在为应用程序使用 yii 框架，我需要一组用户通过远程服务器进行身份验证。

我的应用程序中的用户角色很少。例如：

*   超级管理员
*   品牌管理员
*   客户等...

所有客户记录都在远程 MySQL 数据库中。我必须通过我的 yii 应用程序对客户进行身份验证。我的 yii 应用程序将托管在不同的服务器上。

请假设我可以在远程服务器中放置一个 php 脚本来响应我的发布请求。

我是否需要编写自己的 UserIdentity 类来执行此操作？

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:51:01.203

我认为您不需要在远程服务器中放置任何脚本，您所需要的只是

```
1\. Access the remote Db, and Yii allows the use of [multiple-databases][1].
2\. Adjust the model(s) you are using for Authentication/Authorization (usually the User model) to load it's data from the remote database 
```

**对于第一个任务：**

```
// protected/main/config.php

return array(
...
'components' => array(
    'db' => array(
        'connectionString' => 'mysql:host=dbserver1;dbname=my1db',
        ...
    ),
    'remotedb' => array(
        'connectionString' => 'mysql:host=adserver2;dbname=advertisingDB',
        'username'         => 'username',
        'password'         => '***********',
        ...
        'class'            => 'CDbConnection'          // DO NOT FORGET THIS!
    ), 
```

**对于第二个任务：**

对于您用于**Authenticate** & **Authorize**的模型，您将需要重写该`getDbConnection()`函数以从远程服务器加载所需的数据。查看[Wiki](http://www.yiiframework.com/wiki/123/multiple-database-support-in-yii/)了解**如何**。

是的。您将需要编写自己的`UserIdentity`类，即使您没有使用远程 Db，这实际上也是一项常规任务，因为它的默认逻辑只是一个示例，不适用于实际生产站点。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:29:59.987

是的，您将不得不重写组件 UserIdentity 并创建自己的规则身份验证。

# android - Android CheckBoxPreference 标题颜色

> ID：12004326
> 
> 赞同：0
> 
> 时间：2012-08-17T10:47:50.003
> 
> 标签：android, checkbox, textcolor, preferencescreen

我正在使用此[答案](https://stackoverflow.com/a/6042324/1129612)中的代码。

但是我没有为我使用的文本视图设置*android:textColor*

> 样式="?background_text_color_theme"

它必须根据应用程序的主题设置文本颜色（黑色主题的白色文本颜色，反之亦然）。这适用于除 CheckBoxPreference 之外的所有其他地方。

我对给出的链接所做的更改：

```
 <TextView android:id="@+android:id/title"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:singleLine="true" 
        android:ellipsize="marquee" android:fadingEdge="horizontal"
        style="?background_text_color_theme" /> 
```

这是我的 style.xml：

```
 <style name="background_text_color_theme_bl">
    <item name="android:textColor">#ffffff</item>

</style>    

     <style name="background_text_color_theme_wh">
    <item name="android:textColor">#000000</item>

</style> 
```

主题.XML：

```
 <style name="Theme.White"  parent="@android:style/Theme.Holo.Light">
    <item name="background_text_color_theme">@style/background_text_color_theme_wh</item>
</style> 

   <style name="Theme.Black"  parent="@android:style/Theme.Holo">
    <item name="background_text_color_theme">@style/background_text_color_theme_bl</item>
</style> 
```

但是文字颜色好像不是按照样式来设置的。谁能告诉我为什么会这样？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T09:02:09.710

这就是我是如何做到的……以防万一将来有人需要它。

```
 public class CheckBoxPreferenceClass extends CheckBoxPreference {

    public CheckBoxPreferenceClass(Context context) {
        super(context);
    }

    public CheckBoxPreferenceClass(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public CheckBoxPreferenceClass(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onBindView(View view) {
        super.onBindView(view);
        TextView title = (TextView) view.findViewById(android.R.id.title);
        title.setTextColor(Color.BLACK);
    }

} 
```

在首选项 xml 中，将其用于复选框首选项：

```
 <packagename.CheckBoxPreferenceClass
        android:key="@string/imp"
        android:title="@string/title"/> 
```

# android - 出现带有裁剪标题文本的 Android Facebook 对话框

> ID：12004328
> 
> 赞同：0
> 
> 时间：2012-08-17T10:47:54.917
> 
> 标签：android, facebook

我已经按照 Android SDK 示例并按照说明集成了代码，它工作正常。但在某些设备中，对话框顶部的标题被裁剪。此问题发生在 Motorola Milestone，Android 固件版本 2.1 update1。如何解决这个问题呢？

![在此处输入图像描述](../Images/1e75ea21a8d2a86351c9e0d5c70a6165.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:33:58.233

我在 Facebook 工作，这可能是一个错误。这是本机 SSO 身份验证对话框还是 webview 弹出对话框？

目前在我们的 github repo 上有一个关于 webview 弹出对话框和何时显示键盘的[拉取请求。](https://github.com/facebook/facebook-android-sdk/pull/203)这可能与您在此处描述的问题相同。我会尝试将他的提交合并到您的 Facebook Android SDK 的本地副本中，看看它是否能解决您的问题。

# database - 提高内存和 CPU 使用效率的最佳方法

> ID：12004329
> 
> 赞同：0
> 
> 时间：2012-08-17T10:48:06.497
> 
> 标签：database, memory-management, cpu-usage, database-server

我的应用程序只是将表从本地数据库复制到分布式数据库服务器。要复制的数据相当大，大约有数千条记录，并且完成了大约 30 秒的工作（不确定需要多长时间）。此应用程序在预定或用户输入（强制方法）上运行。

数据库服务器使用 JHA（Jack Henry and Association）。

问题是，有时数据库服务器会遭受非常高的 CPU 和内存使用率，这会导致使用同一数据库服务器的其他一些应用程序无法从数据库中获取数据。在进行了一些跟踪之后，我们发现来自我的应用程序的操作正在使用非常高的 CPU 和内存使用率。

我的解决方案是在复制数据时，我一次复制 100 条记录，然后让我的应用程序休眠 100 毫秒，然后复制下 100 条记录，依此类推，直到复制所有数据。这够了吗？我的解决方案是否会产生重大影响？你的建议是什么？

仅供参考，我的应用程序是从多台计算机运行的，因此是多台客户端计算机和一台数据库服务器。我真的真的需要你的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:18:29.650

尽管此链接[http://msdn.microsoft.com/en-us/library/ff649152](http://msdn.microsoft.com/en-us/library/ff649152)已停用，但其一般流程指南对于解决性能问题仍然有用。

还投资一些工具。VS 自带一些性能分析工具，SDK 有一些，你可以使用 PerfView [http://www.microsoft.com/en-us/download/details.aspx?id=28567](http://www.microsoft.com/en-us/download/details.aspx?id=28567)。您还需要查看您的数据库平台。那里发生了什么？也许缺少索引？还是未使用的索引？

1.  你的绩效目标是什么？
2.  测量，有一个基线，
3.  调查，生成选项，
4.  实施一项（仅一项）
5.  再次测量。
6.  有所收获？不，回滚 3，选择下一个选项，如果没有选项，则执行 2
7.  达到绩效目标了吗？不，转到 3。

# ruby-on-rails - 如何在 Rails 中插入和获取 db 中的数据？

> ID：12004332
> 
> 赞同：-3
> 
> 时间：2012-08-17T10:48:14.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
@posts = Post.all 
```

Post.all 以 Post 记录数组的形式返回当前数据库中的所有帖子，我们将这些记录存储在名为 @posts 的实例变量中。我只想获取用户的特定数据。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:51:18.257

@posts = specific_user.posts.all

您需要确保帖子模型属于_用户模型并且用户模型有_许多帖子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:59:33.667

首先，您需要生成迁移。

```
rails g migration add_user_id_to_posts user_id:integer 
```

然后，运行`rake db:migrate`，使您的`posts`数据库表有一个`user_id`列。

现在，您需要修改`user.rb`和`post.rb`建模以反映关联

```
# app/models/post.rb
class Post < ActiveRecord::Base
  ...
  belongs_to :user
  ...
end

# app/models/user.rb
class User < ActiveRecord::Base
  ...
  has_many :posts
  ...
end 
```

在此之后，重新启动您的 Rails 服务器。现在，您将能够像这样访问特定于用户的帖子

```
# Let fetch User with ID 1
user = User.find(1)
# Now, we can fetch posts related to this user like
@posts = user.posts
# Or like this
@posts = Post.where(:user_id => 1).all 
```

我希望这很容易理解。了解[Rails ActiveRecord 关联](http://guides.rubyonrails.org/association_basics.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:36:02.537

如果要过滤结果，可以使用 'where' 方法。

例如，要按用户名过滤帖子，请尝试：

```
@posts = Posts.where(:username => "jondoe") 
```

您还可以在 'find' 方法上使用 :conditions 符号，在这种情况下传递 SQL。

例如，要按用户名和公共标志过滤，请尝试：

```
@posts = Posts.all(:conditions => "username='johndoe' AND public=1") 
```

# algorithm - 循环调度器中的小循环设计

> ID：12004333
> 
> 赞同：0
> 
> 时间：2012-08-17T10:48:25.213
> 
> 标签：algorithm, embedded, scheduled-tasks, constraints, scheduler

我目前正在为嵌入式系统设计一种循环调度算法。该系统将是一个嵌入式 Web 服务器，调度程序的设计将基于我在[上一个问题](https://stackoverflow.com/questions/11952109/looking-for-a-comparison-of-different-scheduling-algorithms-for-a-finite-state-m)中收到的建议。

在调度程序的次要周期内限制任务执行时，我应该注意哪些事项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:46:11.263

对于嵌入式系统，任务的执行时间相当静态（即低可变性）是很常见的。在这种情况下，通常更容易正确地分析每个任务的执行时间并相应地设计调度程序的周期时间。

如果您的任务确实具有高度可变的执行时间并且您想要合并约束，您仍然需要对系统进行概要分析以了解需要检查的内容。然后，您将创建在中断上下文中运行的单独进程以检查执行任务的状态。如果任务违反了约束，则该进程需要通知调度程序并执行适当的清理。

[从本模块](http://nptel.iitm.ac.in/courses/Webcourse-contents/IIT%20Kharagpur/Embedded%20systems/Pdf/Lesson-29.pdf)的第 1.5.3 节开始可以找到一些理论。[在这些注释](http://www.cs.fsu.edu/~baker/realtime/restricted/notes/staticscheduling.html)中可以找到一些代码示例。

如您所见，两者都来自有关该主题的完整课程，并且对此类主题的适当讨论确实需要整个多周的课程。但这些文件至少应该让你开始。

# java - 反序列化 json 时跳过根元素

> ID：12004338
> 
> 赞同：13
> 
> 时间：2012-08-17T10:48:35.797
> 
> 标签：java, json, gson

我应该如何反序列化以下 JSON 以跳过根元素并仅解析此 JSON 的内部部分。我想避免创建额外的 3rd class `Root`，它只包括`MapWrapper`字段。

```
{
    "root": {
        "language": "en",
        "map": {
            "k1": {
                "name": "n1",
            },
            "k2": {
                "name": "n2",
            }
        }
    }
} 
```

所以我只想有这两个类：

```
class MapWrapper {
    private String language;
    private Map<String, MyMapEntry> map;
}

class MyMapEntry {
    String name;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T11:16:02.683

您可以`GSON`为此使用库。

下面的代码将解决您的问题。

```
public class ConvertJsonToObject {

    private static Gson gson = new GsonBuilder().create();

    public static final <T> T getFromJSON(String json, Class<T> clazz) {
        return gson.fromJson(json, clazz);
    }

    public static final <T> String toJSON(T clazz) {
        return gson.toJson(clazz);
    }
}

String json; // your jsonString
Map<String,Object> r = ConvertJsonToObject.getFromJSON(json,Map.class);
String innerJson = ConvertJsonToObject.toJson(r.get("root"));
MapWrapper _r = ConvertJsonToObject.getFromJSON(innerJson,MapWrapper.class); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-13T19:49:49.017

考虑以下 JSON：

```
{"authorization":{"username":"userabc", "password":"passabc"}} 
```

此 JSON 的 DTO 没有根元素

```
public class Authorization {
    private String username;
    private String password;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    // Add a container for the root element
    public static class Container {
        public Authorization authorization;
    }
} 
```

使用以下方法从/到 JSON 转换（您可以将其保留在 DTO 或其他一些帮助类中）

```
public String toJson(Authorization authorization) {
    Gson gson = new Gson();
    Authorization.Container container = new Authorization.Container();
    container.authorization = authorization;
    return gson.toJson(container);
}

public Authorization fromJson(String json) {
    Gson gson = new Gson();
    Authorization.Container container = gson.fromJson(json, Authorization.Container.class);
    return container.authorization;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T11:51:56.740

这是一次完成的最佳代码。

`MapWrapper`班级

```
public class MapWrapper {
    private String language;
    private Map<String, MyMapEntry> map;

    public MapWrapper(String language, Map<String, MyMapEntry> map) {
        this.language = language;
        this.map = map;
    }
} 
```

`MyMapEntry`班级

```
public class MyMapEntry {

    String name;

    public MyMapEntry(String name) {
        this.name = name;
    }
} 
```

自定义反序列化器

```
public class MyDeserialiser  implements JsonDeserializer<MapWrapper>
{

    @Override
    public MapWrapper deserialize(JsonElement json, Type typeOfT,
        JsonDeserializationContext ctx) throws JsonParseException {

        JsonObject _global = json.getAsJsonObject();
        _global = _global.get("root").getAsJsonObject();

        JsonPrimitive lang = (JsonPrimitive) _global.get("language");
        JsonElement map = _global.get("map");
        Map<String, MyMapEntry> inMap = new LinkedHashMap<String, MyMapEntry>();
        for (Entry<String, JsonElement> entry : map.getAsJsonObject()
                .entrySet()) {
            MyMapEntry _m = new MyMapEntry(entry.getValue().toString());
            inMap.put(entry.getKey(), _m);
        }
        return new MapWrapper(lang.getAsString(), inMap);
    }   
} 
```

向 GSON 注册

```
new GsonBuilder().registerTypeAdapter(MapWrapper.class,new MyDeserialiser()).create() 
```

现在使用以下代码反序列化

```
String json; // your jsonString
MapWrapper result = ConvertJsonToObject.getFromJSON(json,MapWrapper.class); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-26T20:03:55.393

我的回答迟到了。

一旦我们解析了 Json，容器总是会成为 JsonElement 的 JsonObject 子类。因此，如果我们想跳过它，我们只需要将它转换为它的子类并获取包含我们内部类的字段。

```
 String response = ....;

    Gson gson = new Gson();

    JsonParser p = new JsonParser();
    JsonElement jsonContainer = p.parse(response);
    JsonElement jsonQuery = ((JsonObject) jsonContainer).get("query");

    MyQuery query = gson.fromJson(jsonQuery, MyQuery.class); 
```

注意：JsonObject 和 JSONObject 是不同的类（使用 com.google.Json 导入）。

您可以更概括这个答案，这样您就不需要知道内部类的名称。您可以通过简单地获取容器对象的唯一字段来做到这一点。但是，除了启动迭代器之外，我认为没有其他方法可以做到这一点，我看不到 getValue(atIndex) 方法，而且我认为启动迭代器可能比简单地按名称查找字段效率低（但可能是错误的）。

迭代器方法如下所示：

```
 JsonElement jsonQuery = ((JsonObject) jsonContainer).entrySet().iterator()
                            .next().getValue(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T10:53:44.823

您可以将其反序列化为`Map<String, MapWrapper>`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-26T08:07:12.870

受到 Gustav Carlson 想法的启发，我决定将其扩展为具体示例。这是一个测试将此 JSON 解析为 Map 的 junit 测试。

```
public static class MapWrapper {
    private String language;
    private Map<String, MyMapEntry> map;
}

public static class MyMapEntry {
    String name;
}

@Test
public void testParsing() {
    String json = "{\n" +
            "    \"root\": {\n" +
            "        \"language\": \"en\",\n" +
            "        \"map\": {\n" +
            "            \"k1\": {\n" +
            "                \"name\": \"n1\"\n" +
            "            },\n" +
            "            \"k2\": {\n" +
            "                \"name\": \"n2\"\n" +
            "            }\n" +
            "        }\n" +
            "    }\n" +
            "}";
    Gson gson = new GsonBuilder().setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES).create();
    Type type = new TypeToken<Map<String, MapWrapper>>(){}.getType();
    Map<String, MapWrapper> parsed = gson.fromJson(json, type);
    MapWrapper mapWrapper = parsed.get("root");
    Assert.assertEquals("en", mapWrapper.language);
    Assert.assertEquals("n2", mapWrapper.map.get("k2").name);
} 
```

# jquery - jQuery 解析 HTML 字符串并对其进行一些操作

> ID：12004340
> 
> 赞同：2
> 
> 时间：2012-08-17T10:48:44.047
> 
> 标签：jquery

我有一个动态创建的 HTML 字符串（表格行）。该字符串中的行数可以大于 1。

```
string myHtml = "
            <tr>
               <td class="text-left">
                  <label class="label-none">a.docx</label>
               </td>
               <td>
                  <label class="label-none">Manuscript </label>
               </td>
               <td>
                   <input class="del-file-cb" file-id="71" type="checkbox" />
               </td>
            </tr>" 
            etc... 
```

**在将**其插入到 DOM 元素（表）之前，我想检查它内部是否存在具有特定`file-id`属性值的复选框输入。如果是这样，我想将`text`第一个`label`（**在放置找到的复选框的行中**）更改为 eg `lorem`，并将第二个`label`更改`text`为 eg `ipsum`。怎么做 ？

## 编辑

这里还有一些有用的信息[stackoverflow.com/questions/704679/parse-html-string-with-jquery](https://stackoverflow.com/questions/704679/parse-html-string-with-jquery)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T10:51:31.033

```
var mYdomelement = $('
            <tr>
               <td class="text-left">
                  <label class="label-none">a.docx</label>
               </td>
               <td>
                  <label class="label-none">Manuscript </label>
               </td>
               <td>
                   <input class="del-file-cb" file-id="71" type="checkbox" />
               </td>
            </tr>');

if(mYdomelement.find(":checkbox").attr("file-id") == "Yourvalue"){
   $("label:first-child", mYdomelement).text('lorem');
   $("label:nth-child(2)", mYdomelement).text('ipsum');
} 
```

这是工作[演示](http://jsfiddle.net/govindmalviya/QaZYv/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T11:09:32.210

你可以这样做：

```
if($(#elementId + ' input[file-id|="YOUR_VALUE_HERE"]').length > 0)
{
    $(this).ancestors().eq(2).find('label').eq(0).val(FIRST_LABEL_VALUE_HERE);
    $(this).ancestors().eq(2).find('label').eq(0).val(SECOND_LABEL_VALUE_HERE);
} 
```

# widget - 具有可编辑字段的 FLTK 选择小部件

> ID：12004344
> 
> 赞同：0
> 
> 时间：2012-08-17T10:48:56.013
> 
> 标签：widget, choice, fltk

FL_Choise 小部件只允许选择下拉菜单中存在的项目。有没有办法让组合框具有可编辑字段，即允许指定列表中不存在的自定义值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:59:40.257

FL_Input_Choice 具有可编辑字段，具有可编辑字段和绑定到按钮的菜单，但 FL_Choice 小部件的下拉菜单看起来更好。

# ruby - 通过 ruby 套接字将十六进制值发送到客户端

> ID：12004348
> 
> 赞同：0
> 
> 时间：2012-08-17T10:49:10.973
> 
> 标签：ruby, sockets, hex

我正在创建一个套接字服务器。此服务器正在处理十六进制值。

我能够建立与服务器的连接。但无法读取客户端十六进制值，也无法将十六进制值发送到客户端。

```
require "socket"

def listenserver (server)
 @buff1 =[160, 124]
 client = server.accept
 puts  "#{client.inspect} is accepted"
 client.print "0x%02x" % @buff1[0]
 client.print"0x%02x" % @buff1[1]
 puts "#{@buff1.inspect}"
 puts "0x%02x" % @buff1[0]
 client.close
 puts "#{client} is gone"
end

server = TCPServer.new('x.x.x.x', 12345)
loop do
 puts "Started TCPServer"
 listenserver(server)

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:28:40.510

**您正在寻找的是[Array.pack](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-pack)和[String.unpack](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-unpack)**

来自 Ruby 文档的示例代码：

对于**Array.pack**：

```
a = [ "a", "b", "c" ]  
a.pack("A3A3A3")  
=> "a  b c " 
```

和**Sting.unpack**：

```
"\xfe\xff\xfe\xff".unpack('sS')
=> [-2, 65534]

"whole".unpack('xax2aX2aX1aX2a')
=> ["h", "e", "l", "l", "o"] 
```

# c# - 使用纹理作为渲染目标时的大小限制

> ID：12004350
> 
> 赞同：0
> 
> 时间：2012-08-17T10:49:20.313
> 
> 标签：c#, directx, slimdx

我想创建一个纹理并渲染到它的表面，但我有一个问题：当纹理尺寸太大（超过 263x263 像素 ARGB）时，表面中没有渲染图元（我只能看到在*清除*操作）。

这是我的代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        // Setting up DirectX
        PresentParameters pp = new PresentParameters()
        {
            BackBufferCount = 1,
            Windowed = true,
            SwapEffect = SwapEffect.Discard,
            BackBufferWidth = ClientSize.Width,
            BackBufferHeight = ClientSize.Height,
        };

        d3d = new Direct3D();
        device = new Device(d3d, 0, DeviceType.Hardware, Handle, CreateFlags.HardwareVertexProcessing, pp);

        TexturedVertex.SetVertexDeclaration(device);

        // Creating a triangle
        triangleBuffer = new VertexBuffer(device, 3 * Marshal.SizeOf(typeof(TexturedVertex)), Usage.WriteOnly, VertexFormat.None, Pool.Managed);

        var stream1 = triangleBuffer.Lock(0, 0, LockFlags.None);
        stream1.WriteRange(new[] {
                            new TexturedVertex( -2, -2, 0, 0, 0 ),
                            new TexturedVertex( 0, 2, 0, 1, 0),
                            new TexturedVertex( 2, -2, 0, 1, 1),
                    });

        triangleBuffer.Unlock();

        // Creating a rect
        rectBuffer = new VertexBuffer(device, 4 * Marshal.SizeOf(typeof(TexturedVertex)), Usage.WriteOnly, VertexFormat.None, Pool.Managed);

        var stream2 = rectBuffer.Lock(0, 0, LockFlags.None);
        stream2.WriteRange(new[] {
                            new TexturedVertex( -2, -2, 0, 0, 0 ),
                            new TexturedVertex( -2, 2, 0, 0, 1),
                            new TexturedVertex( 2, -2, 0, 1, 0),
                            new TexturedVertex( 2, 2, 0, 1, 1),
                    });

        TexturedVertex.SetVertexDeclaration(device);
        rectBuffer.Unlock();

        // Creating a render texture
        int w = 262;
        Texture texture = new Texture(device, w, w, 0, Usage.RenderTarget, Format.A8R8G8B8, Pool.Default);

        Surface surface = texture.GetSurfaceLevel(0);
        Surface buffer = device.GetRenderTarget(0);

        device.SetRenderTarget(0, surface);

        device.SetTransform(TransformState.Projection, Matrix.OrthoOffCenterLH(-4, 4, -4, 4, 0, 100));
        device.SetTransform(TransformState.View, Matrix.Identity);
        device.SetTransform(TransformState.World, Matrix.Identity);

        device.Clear(ClearFlags.Target, new Color4(Color.Green), 0, 0);

        device.BeginScene();

        device.SetStreamSource(0, triangleBuffer, 0, Marshal.SizeOf(typeof(TexturedVertex)));
        device.DrawPrimitives(PrimitiveType.TriangleStrip, 0, 3);

        device.EndScene();
        device.Present();

        device.SetRenderTarget(0, buffer);

        // Setting current texture and material
        device.SetTexture(0, texture);
        Material mat = new Material();
        mat.Ambient = mat.Diffuse = mat.Emissive = Color.White;
        device.Material = mat;

        // Setting the projection, view and transform matrix
        device.SetTransform(TransformState.Projection, Matrix.OrthoOffCenterLH(-4, 4, -4, 4, 0, 100));
        device.SetTransform(TransformState.View, Matrix.Identity);
        device.SetTransform(TransformState.World, Matrix.Identity);

        // Setting handler
        this.KeyDown += new KeyEventHandler(Form1_KeyDown);
        this.Paint += new PaintEventHandler(Form1_Paint);
    }

    void Form1_Paint(object sender, PaintEventArgs e)
    {
        device.Clear(ClearFlags.Target, new Color4(Color.Purple), 0, 0);

        device.BeginScene();

        device.SetStreamSource(0, rectBuffer, 0, Marshal.SizeOf(typeof(TexturedVertex)));
        //device.SetStreamSource(0, triangleBuffer, 0, Marshal.SizeOf(typeof(TexturedVertex)));

        device.DrawPrimitives(PrimitiveType.TriangleStrip, 0, 4);

        device.EndScene();

        device.Present();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:39:48.010

我猜您的表单的客户端大小是 262 像素宽或高。

在显示参数中，您将后备缓冲区和 z 缓冲区限制为该大小。您需要另一个 Z 缓冲区，与您要渲染的纹理大小相匹配，并且您需要将其设置为使用，然后切换回原来的。

```
Surface oldDepthBuffer = device.DepthStencilSurface;
Texture db = new Texture(device, w, w, 1, Usage.DepthStencil, oldDepthBuffer.Description.Format, Pool.Default);

Surface myDepthBuffer = db.GetSurfaceLevel(0);

device.SetRenderTarget(0, surface);
device.DepthStencilSurface = myDepthBuffer;

// RENDER to texture

device.DepthStencilSurface = oldDepthBuffer; 
```

# wpf - 使用工作流的基于页面的导航

> ID：12004355
> 
> 赞同：-2
> 
> 时间：2012-08-17T10:49:36.013
> 
> 标签：wpf, workflow-foundation

我想使用工作流开发和 WPF 导航应用程序。谁能给我一份关于它的教程列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:05:48.717

如果你能详细说明你的要求，我相信你会得到一些更好的答案。

这是关于在 WPF 中创建基于导航的应用程序的非常简单的教程

www.c-sharpcorner.com/uploadfile/kaps_deo/create-navigation-based-application-in-wpf/

至于 WF，就我个人而言，我更喜欢 msdn 上的教程和文章，这里有一些链接可以帮助您入门：

一般概述和一个很好的起点：

msdn.microsoft.com/en-us/library/ms735967(v=vs.90)

一些有趣的视频教程：

msdn.microsoft.com/en-us/vstudio/ff802403.aspx

这里还有一篇关于在您自己的应用程序中托管 WF 的文章：

msdn.microsoft.com/en-us/library/aa663362.aspx

至于两者如何交互，以下是我通过快速谷歌搜索找到的一些链接：http: [//code.msdn.microsoft.com/windowsdesktop/Windows-Workflow-eaa24bdb](http://code.msdn.microsoft.com/windowsdesktop/Windows-Workflow-eaa24bdb) http://www.codeproject.com/Articles /42505/WPF-WF-Data-Exchange-Direct-WPF-WF-Data 方法

希望这有帮助，

最大限度

PS对不起，我不能发布超过2个超链接，因为我是新来这里发帖的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:54:29.110

我建议您首先阅读 Navigation [http://msdn.microsoft.com/en-us/library/ms750478.aspx](http://msdn.microsoft.com/en-us/library/ms750478.aspx)和 MVVM [http://msdn.microsoft.com/en-us/magazine/dd419663 .aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)并从一个简单的框架演示样式应用程序开始。通过使用 DataType="{x:Type...}" 指定 DataTemplates，确保您正在导航到视图模型并让 Frame 显示正确的视图。

导航框架为您提供返回的控件，但不能向前（至少在您去过一次之前），因此您需要决定您的视图如何显示这些控件（例如，仅单个下一步按钮，或多个做出分支决定的页面上的链接）。让我们以多个链接的情况为例，因为它是最复杂的，当您创建视图模型时，您需要询问 WF 以获取其到当前节点之后的节点的链接，并创建映射到这些节点的视图模型命令。这为您提供了一个迭代过程（在整个导航的生命周期内）来导航穿过树的一条路径。

# django - Django - MongoDb - 我如何使用 ModelForms？

> ID：12004358
> 
> 赞同：1
> 
> 时间：2012-08-17T10:50:01.607
> 
> 标签：django, mongodb, django-forms

我将 Django 和 MongoDB 与 MongoEngine 一起使用。我正在创建一个定制的后端并喜欢使用 - 就像在普通的 Django 中一样 - ModelForms 来节省时间。

如果我可以使用什么插件，有什么想法吗？或者如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:52:35.170

看看[django-mongodbforms](https://github.com/jschrewe/django-mongodbforms)。`ModelForm`作者声称与 Django 的s或多或少 100% 兼容。

# java - Java：替代 LinkedList 或 int 指针数据结构

> ID：12004360
> 
> 赞同：1
> 
> 时间：2012-08-17T10:50:07.070
> 
> 标签：java, pointers, insert, linked-list

由于 LinkedList 在内存开销方面是一场噩梦，而且在迭代元素时速度也较慢，所以我希望有类似 int poiter 数据结构的东西。

所以我有一个整数列表，我通过在开头-中间插入元素来形成它。列表准备好后，我从左侧开始逐一迭代。那是我的问题约束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:56:04.950

我会分析并尝试不同的数据结构。

话虽如此，为什么不尝试使用`ArrayList`; 迭代甚至插入速度很快，而在*O(n)*中，速度很快，因为在缓存中移动连续数据的速度非常快。*（如果您在插入时还反转列表，它会更快！）*

* * *

**更新**，因为我的程序员同事不明白我为什么推荐`ArrayList`这个特殊问题：

问题**不在于**插入元素。在这种情况下，链表直接获胜（O(1) 与数组列表的 O(n) 相对）。**问题是要找到插入它们的地方**。在这种情况下，`LinkedList`速度真的很慢。找到插入位置的开销很大，因为它不会在“好事情”中分配内存。很多缓存未命中！

OP 没有发布任何代码，所以我们只知道 OP 想要什么，但这里是对这两种情况的算法分析（其中*C* * 是常量）：

`LinkedList`, 对于要插入的每个元素：

*   迭代**O(C1 * n)**
*   插入**O(1)**

`ArrayList`, 对于要插入的每个元素：

*   迭代**O(C2 * n)**
*   插入**O(C3 * n)**

因此，这两种算法都在*O(n)*中，但仔细观察常量：*C1*真的很大（如上所述）。另一方面，*C2*和*C3很小，因为在缓存中迭代和移动速度很快。*

所以，如果你有足够的内存试试`ArrayList`！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T10:59:14.200

`LinkedList`如果您经常使用，则确实具有糟糕的性能`list.get(index);`
使用 the `ListIterator`instead 以便每次您*不会一遍又一遍地遍历列表*。
而且，如果您需要在列表中间添加元素，它将比 an 具有更好的性能`ArrayList` `O(1)`（因为您不需要移动元素）

更新：
迭代列表的正确方法是使用迭代器（隐式或显式）。使用隐式迭代器的示例：

```
for(E e:list){  
} 
```

**永远**不要：

```
for(int i = 0; list.size(); i++{  
    E e = list.get(i);  
} 
```

如果列表是 a ，则`LinkedList`此操作与在循环的每次迭代中从头开始遍历列表`O(N^2)`一样。由于迭代器“记住”最后一个访问的元素并从那里开始，因此 将第一种形式与迭代器一起使用几乎与 an 相同`list.get(i)`
`O(N)``ArrayList`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T11:13:08.060

试试[Gaplist](http://java.dzone.com/articles/gaplist-lightning-fast-list)，它为许多用例提供类似 ArrayList 的性能和内存占用。如果插入主要是顺序的（在*任何*索引处），则插入接近 O(1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:00:57.667

第一步：插入元素`LinkedList`

第二步：复制元素以`ArrayList`进行迭代。

顺便说一句，“噩梦”有点夸张`LinkedList`:)

# delphi - 关闭应用程序时出现内存错误

> ID：12004364
> 
> 赞同：0
> 
> 时间：2012-08-17T10:50:12.953
> 
> 标签：delphi, delphi-7

在 Delphi 7 中关闭应用程序时，出现以下错误：

“0x011c34a6 处的指令引用了 0x018333f4 处的内存。无法读取内存。”

知道是什么导致了这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T11:02:32.643

那是访问冲突异常。当您的程序尝试访问无效的内存地址时会引发它。

最明显的原因是您正在访问已被释放并返回给系统的内存。我建议您在调试器下执行，并让调试器在引发异常的代码处中断。这将告诉您正在引用什么对象，然后您必须弄清楚为什么在对象被销毁后引用它。

话虽如此，0x011c34a6 的指令指针值看起来不像在您的 exe 中，它将基于 0x00400000。因此，可能在 DLL 中引发了异常，这可能会使故障的调试更加棘手。

我建议您使用带有完整调试选项的 FastMM 内存管理器，而不是 Delphi 7 中的默认 Borland MM。FastMM 有很多调试工具可以帮助定位和诊断此类故障。它可能有助于追查此故障，但如果不是，它肯定会帮助您在将来找到其他故障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:05:22.393

维沙尔。我可能是几件事。如果您试图释放或访问在您的代码中已经释放的东西，这将会发生。如果您逐步完成在应用程序关闭期间执行的代码，您可能会发现错误。你在使用线程吗？

# java - 如何让休眠打印出命名查询有什么问题？

> ID：12004365
> 
> 赞同：9
> 
> 时间：2012-08-17T10:50:13.977
> 
> 标签：java, spring, hibernate, jpa

在我的 Spring / Hibernate / JPA 应用程序中，我使用了很多命名查询，当我在其中一个查询中出现拼写错误时，会在我的应用程序启动日志文件中看到类似于下面的错误。

```
Caused by: org.hibernate.HibernateException: Errors in named queries: FindAllCompanyFileTypes
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:426)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906)
    ... 70 more 
```

如何配置休眠以打印出命名查询的问题，而不仅仅是命名查询有错误？

**UPDATE**例如，JPA 查询`SELECT f FROM Foo WHERE f.v := true`将失败，hibernate 抱怨查询无效。Hibernate 甚至没有尝试从中生成 SQL，查询不正确 JPQL。我想知道的是如何让休眠状态说查询是错误的，因为使用 := 而不是 = ？不确定这是否可以在休眠状态下打开。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-02T15:34:20.173

Hibernate 自定义查询加载器的东西位于`org.hibernate.loader.custom.sql`（对于 Hibernate 3，似乎[也是 Hibernate 4](http://docs.jboss.org/hibernate/orm/4.0/javadocs/org/hibernate/loader/custom/sql/package-summary.html)）。如果使用[log4j](http://logging.apache.org/log4j/2.x/)，只需将此包设置[为自己的类别](http://veerasundar.com/blog/2009/08/log4j-tutorial-how-to-send-log-messages-to-different-log-files/)即可打印日志（我建议您使用文件附加程序，因为如果使用控制台附加程序，之后的错误日志可能会与您感兴趣的内容重叠）。

```
<category name="org.hibernate.loader.custom.sql" additivity="false">
    <priority value="trace" />
    <appender-ref ref="fileAppender" />
</category> 
```

假设您的根记录器显示文件中的每个错误，这就是您在查询加载时得到的错误输出：

```
17:27:18,348 TRACE SQLCustomQuery:85 -     starting processing of sql query [SELECT equipment.*, det.*
        FROM tdetectable_equipment equipment JOIN
        tdetectable det
        ON det.id = equipment.id_detectable
        WHERE
        equipment.id_detectable=det.id and det.active=1 and
        equipment.id_warehouse_container = :_Id]
17:27:18,358 TRACE SQLCustomQuery:85 -     starting processing of sql query [select line.*  from tpacking_slip_line line  join tpacking_slip slip  on line.id_packing_slip = slip.id where line.id_detectable = :detectableId and line.id_related_packing_slip_line is null and slip.`type`= :slipType order by slip.date desc;]
17:27:18,359 TRACE SQLQueryReturnProcessor:387 -     mapping alias [line] to entity-suffix [0_]
17:27:18,364 TRACE SQLCustomQuery:85 -     starting processing of sql query [select res.* from tdetectable det  join tpacking_slip_line line on det.id=line.id_detectable  and line.id_related_packing_slip_line is null join tpacking_slip slip on line.id_packing_slip = slip.id  and slip.`type`='OUT' join vreservation res on slip.id_reservation=res.id where det.id in ( :detIds ) group by(res.id) order by count(res.id) desc;]
17:27:18,365 TRACE SQLQueryReturnProcessor:387 -     mapping alias [res] to entity-suffix [0_]
17:27:18,368 ERROR SessionFactoryImpl:424 -     Error in named query: equipmentWarehouseQuery
org.hibernate.MappingException: Unknown collection role: com.mycompany.model.container.Container.detectables
    at org.hibernate.impl.SessionFactoryImpl.getCollectionPersister(SessionFactoryImpl.java:701)
    at org.hibernate.loader.custom.sql.SQLQueryReturnProcessor.addCollection(SQLQueryReturnProcessor.java:393)
    at org.hibernate.loader.custom.sql.SQLQueryReturnProcessor.processCollectionReturn(SQLQueryReturnProcessor.java:428)
    at org.hibernate.loader.custom.sql.SQLQueryReturnProcessor.processReturn(SQLQueryReturnProcessor.java:358)
    at org.hibernate.loader.custom.sql.SQLQueryReturnProcessor.process(SQLQueryReturnProcessor.java:171)
    at org.hibernate.loader.custom.sql.SQLCustomQuery.<init>(SQLCustomQuery.java:87)
    at org.hibernate.engine.query.NativeSQLQueryPlan.<init>(NativeSQLQueryPlan.java:67)
    at org.hibernate.engine.query.QueryPlanCache.getNativeSQLQueryPlan(QueryPlanCache.java:166)
    at org.hibernate.impl.SessionFactoryImpl.checkNamedQueries(SessionFactoryImpl.java:589)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:413)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:863)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:782)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:188)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1541)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1479)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:521) 
```

该异常在加载时引发，但在执行代码时也可能出现查询错误。在这种情况下，会引发[HibernateException](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/HibernateException.html)或类似情况，您可以稍后对其进行检查。对于缺少冒号的情况，它实际上是[AbstractQueryImpl](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/impl/AbstractQueryImpl.html)类抛出的[IllegalArgumentException ：](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)

```
java.lang.IllegalArgumentException: No positional parameters in query: SELECT equipment.*, det.*
        FROM tdetectable_equipment equipment JOIN
        tdetectable det
        ON det.id = equipment.id_detectable
        WHERE
        equipment.id_detectable=det.id and det.active=1 and
        equipment.id_container = _Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T16:55:11.667

我正在处理类似的问题，我发现，如果您使用 Spring Data JPA，您可以在 DAO 接口中使用 @Query 而不是在实体对象中使用 @NamedQuery，您会收到更详细的错误消息。所以，而不是：

```
@Entity
@Table
@NamedQueries({@NamedQuery(name="MyEntity.myQuery" query="select blah blah blah")})
public class MyEntity
{
...
} 
```

你会说

```
@Entity
@Table
public class MyEntity
{
...
}

public interface MyEntityDao
    extends JpaRepository...
{
    @Query("select blah blah blah")
    MyEntity findByMyQuery();
} 
```

这使用相同的查询语言和表达式，但对于任何实现的怪癖，都会提供更具表现力的错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:21:49.373

如果我猜测你在问什么，我认为它不能告诉你什么是错误的。我在这方面取得成功的唯一方法是相当痛苦的，但至少它有效！

所以你需要数据库本身来告诉你查询出了什么问题。为此，您可以如上所述从休眠中启用 sql 输出。然后你通过你最喜欢的工具连接到数据库：squirrelSQL、toad、eclipse-plugin 等。现在如果你的 sql 中没有参数，那么你只需剪切并粘贴到那里，执行 sql，它应该会帮助你调试。

如果你有参数，过程是一样的，只是更乏味！然而，一旦你的 SQL 没问题，数据库就会告诉你它不喜欢什么。在大多数情况下，一旦你知道了这一点，你就会清楚在休眠端需要改变什么。虽然时不时地这可能是一个谜，但大多数情况都记录在这里！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:06:12.587

您可以尝试通过设置打印 HSQL

```
<property name="show_sql">true</property> 
```

然后在 log4j 中添加适当的日志级别以显示 org.hibernate 的 DEBUG 或 TRACE 级别日志记录。*

更多信息在这里：[http ://docs.jboss.org/hibernate/core/3.5/reference/en/html/session-configuration.html#configuration-logging](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/session-configuration.html#configuration-logging)

# servicestack - 我可以得到 400 错误，但没有带有 ServiceStack 流利验证的 json 对象

> ID：12004366
> 
> 赞同：1
> 
> 时间：2012-08-17T10:50:15.747
> 
> 标签：servicestack, fluentvalidation

检查清单：

*   Dto 是 X
*   响应对象是**XResult** :IHasResponseStatus 并且它与 X 在同一个命名空间中
*   XValidator:AbstractValidator 正在工作。发送无效对象时会出现 400 错误
*   Plugins.Add(new ValidationFeature());
*   container.RegisterValidators(typeof(X).Assembly);
*   接受 application/json, text/javascript, */* ; 请求标头中的 q=0.01。

我正在从 html 调用服务。验证框架正在运行，但响应不是 json 对象。它看起来像 firebug 中的 XML。

该部分（负责捕获错误并将其序列化为 json）似乎无法正常工作

有什么猜测吗？

**更新**

**XResult**必须是**XResponse** .. 谢谢 kampsj

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:59:54.817

在您的情况下，您的响应 DTO 应命名为**XResponse**而不是 XResult。您必须遵守以下响应 DTO 约定

> {请求 DTO 名称} + 响应

见[https://github.com/ServiceStack/ServiceStack/wiki/Your-first-webservice-explained](https://github.com/ServiceStack/ServiceStack/wiki/Your-first-webservice-explained)

# asp.net - 在 PostBack 期间保留动态创建的控件 - VB.net

> ID：12004368
> 
> 赞同：0
> 
> 时间：2012-08-17T10:50:25.340
> 
> 标签：asp.net, vb.net, postback

我有一个带有下拉列表的表单的面板，其值为 1-10。当按下面板上的按钮时，该面板将变为不可见，而第二个则变为可见。在第二个面板上，我动态生成了多行控件。行数由下拉列表中的选定项确定。

我的问题是，当我想执行验证然后存储动态创建的控件内容的值时，控件被删除。

我知道这与页面的生命周期和动态创建的控件的持久性有关，但我不知道要解决这个问题。我在这里阅读了许多其他类似的问题，并且很少有谁来解决这个问题的工作示例，所以我一点也不聪明。这包括需要在 pageload 或 pageinit 上创建动态创建的控件的建议，因为我们不知道要创建多少，这怎么可能？

一如既往，非常感谢任何帮助。

```
Imports DotNetNuke.Entities.Modules
Imports DotNetNuke
Imports System
Imports System.Web.UI
Imports System.Web.UI.WebControls
Imports System.Collections.Generic
Imports System.Reflection
Imports System.Web.Configuration
Imports System.Net.Mail
Imports System.Data.SqlClient

Partial Class View
Inherits SeatPlannerModuleBase
Implements IActionable
Dim valid As String = "success"

Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load, Me.Load
    Try

        If Not Page.IsPostBack Then

        End If

    Catch exc As Exception        'Module failed to load
        ProcessModuleLoadException(Me, exc)
    End Try
End Sub

Public ReadOnly Property ModuleActions() As Entities.Modules.Actions.ModuleActionCollection Implements Entities.Modules.IActionable.ModuleActions
    Get
        Dim Actions As New Entities.Modules.Actions.ModuleActionCollection
        Actions.Add(GetNextActionID, Localization.GetString(Entities.Modules.Actions.ModuleActionType.AddContent, LocalResourceFile), Entities.Modules.Actions.ModuleActionType.AddContent, "", "", EditUrl(), False, DotNetNuke.Security.SecurityAccessLevel.Edit, True, False)
        Return Actions
    End Get
End Property

Protected Sub Filldata()
    Dim conn As New SqlConnection()
    conn.ConnectionString = WebConfigurationManager.ConnectionStrings("Congress_SeatPlanner_ConnectionString").ConnectionString
    Dim Qstr As String = "select * From [Seat_planner_2013].[dbo].[booking]"
    Try
        Using connection As New SqlConnection(conn.ConnectionString)
            connection.Open()
            Dim command As New SqlCommand(Qstr, connection)
            Dim reader As SqlDataReader = command.ExecuteReader()
            If reader.Read() Then
                Try
                    Dim title As String

                    title = reader("title")
                    title = title.Trim
                    title_Txt.Text = title
                Catch
                    title_Txt.Text = ""
                End Try
                Try
                    first_name_Txt.Text = reader("first_name")
                Catch
                    first_name_Txt.Text = ""
                End Try
                Try
                    surname_Txt.Text = reader("surname")
                Catch
                    surname_Txt.Text = ""
                End Try
                Try
                    company_name_Txt.Text = reader("company_name")
                Catch
                    company_name_Txt.Text = ""
                End Try
                Try
                    contact_number_Txt.Text = reader("contact_phone")
                Catch
                    contact_number_Txt.Text = ""
                End Try
                Try
                    contact_email_Txt.Text = reader("contact_email")
                Catch
                    contact_email_Txt.Text = ""
                End Try
                Try
                    number_of_tickets_Ddl.SelectedValue = reader("number_of_tickets")
                Catch
                    number_of_tickets_Ddl.SelectedValue = ""
                End Try
                Try
                    purchase_date_Txt.Text = reader("date_of_purchase")
                Catch
                    purchase_date_Txt.Text = ""
                End Try
            End If
        End Using
    Catch ex As Exception
        ErrLabel_Lbl.Visible = True
        ErrLabel_Lbl.Text = ex.Message.ToString
    End Try
End Sub

Protected Sub validate()

    If title_Txt.Text.Length < 2 Then
        title_error_Lbl.Text = "Please enter a title"
        valid = "fail"
    Else
        title_error_Lbl.Text = "*"
    End If
    If first_name_Txt.Text.Length < 1 Then
        first_name_error_Lbl.Text = "Please enter a first name"
        valid = "fail"
    Else
        first_name_error_Lbl.Text = "*"
    End If
    If surname_Txt.Text.Length < 1 Then
        surname_error_Lbl.Text = "Please enter a surname"
        valid = "fail"
    Else
        surname_error_Lbl.Text = "*"
    End If
    If company_name_Txt.Text.Length < 1 Then
        comnpany_name_error_Lbl.Text = "Please enter a company name"
        valid = "fail"
    Else
        comnpany_name_error_Lbl.Text = "*"
    End If
    If contact_email_Txt.Text.Length < 1 Then
        contact_email_error_Lbl.Text = "Please enter a contact email address"
        valid = "fail"
    Else
        contact_email_error_Lbl.Text = "*"
    End If
    If contact_number_Txt.Text.Length < 1 Then
        contact_phone_error_Lbl.Text = "Please enter a contact phone number"
        valid = "fail"
    Else
        contact_phone_error_Lbl.Text = "*"
    End If
    If number_of_tickets_Ddl.SelectedValue = "Please select" Then
        number_of_tickets_error_Lbl.Text = "Please select a number of tickets to allocate"
        valid = "fail"
    Else
        number_of_tickets_error_Lbl.Text = "*"
    End If
    If purchase_date_Txt.Text.Length < 1 Then
        date_of_purchase_error_Lbl.Text = "Please enter the date you purchased the tickets"
        valid = "fail"
    Else
        date_of_purchase_error_Lbl.Text = "*"
    End If

    If valid = "fail" Then
        ErrLabel_Lbl.Text = "Failed validation"
    Else
        ErrLabel_Lbl.Text = "Validation succeeded"
    End If

End Sub

Protected Sub validate_step2()

'validation here that doesn't work due to the postback issue

End Sub

Protected Sub IterateThroughTitle(ByVal parent As Control)
    Dim count As Integer = 1

    For Each c As Control In title_Placeholder.Controls
        If c.[GetType]().ToString().Equals("System.Web.UI.WebControls.TextBox") AndAlso c.ID Is Nothing Then
            'DirectCast(c, TextBox).Text = "TextBox_Title " + count.ToString()
            DirectCast(c, TextBox).ID = "TextBox_Title_" + count.ToString()
            DirectCast(c, TextBox).CssClass = "DYN_TextBox"
            count += 1
        End If

        If c.Controls.Count > 0 Then
            IterateThroughTitle(c)
        End If
    Next
End Sub

Protected Sub IterateThroughFirstname(ByVal parent As Control)
    Dim count As Integer = 1

    For Each c As Control In firstname_Placeholder.Controls
        If c.[GetType]().ToString().Equals("System.Web.UI.WebControls.TextBox") AndAlso c.ID Is Nothing Then
            'DirectCast(c, TextBox).Text = "TextBox_Firstname " + count.ToString()
            DirectCast(c, TextBox).ID = "TextBox_Firstname_" + count.ToString()
            DirectCast(c, TextBox).CssClass = "DYN_TextBox"
            count += 1
        End If

        If c.Controls.Count > 0 Then
            IterateThroughFirstname(c)
        End If
    Next
End Sub

Protected Sub IterateThroughSurname(ByVal parent As Control)
    Dim count As Integer = 1

    For Each c As Control In surname_Placeholder.Controls
        If c.[GetType]().ToString().Equals("System.Web.UI.WebControls.TextBox") AndAlso c.ID Is Nothing Then
            'DirectCast(c, TextBox).Text = "TextBox_Surname " + count.ToString()
            DirectCast(c, TextBox).ID = "TextBox_Surname_" + count.ToString()
            DirectCast(c, TextBox).CssClass = "DYN_TextBox"
            count += 1
        End If

        If c.Controls.Count > 0 Then
            IterateThroughSurname(c)
        End If
    Next
End Sub

Protected Sub IterateThroughTicketNum(ByVal parent As Control)
    Dim count As Integer = 1

    For Each c As Control In ticketNum_Placeholder.Controls
        If c.[GetType]().ToString().Equals("System.Web.UI.WebControls.TextBox") AndAlso c.ID Is Nothing Then
            'DirectCast(c, TextBox).Text = "TextBox_TicketNum " + count.ToString()
            DirectCast(c, TextBox).ID = "TextBox_TicketNum_" + count.ToString()
            DirectCast(c, TextBox).CssClass = "DYN_TextBox"
            count += 1
        End If

        If c.Controls.Count > 0 Then
            IterateThroughTicketNum(c)
        End If
    Next
End Sub

Protected Sub IterateThroughBooking(ByVal parent As Control)
    Dim count As Integer = 1

    For Each c As Control In booking_Placeholder.Controls
        If c.[GetType]().ToString().Equals("System.Web.UI.WebControls.Label") AndAlso c.ID Is Nothing Then
            DirectCast(c, Label).Text = "Booking #" + count.ToString()
            DirectCast(c, Label).ID = "BookLabel_" + count.ToString()
            DirectCast(c, Label).CssClass = "DYN_Label"
            count += 1
        End If

        If c.Controls.Count > 0 Then
            IterateThroughBooking(c)
        End If
    Next
End Sub

Protected Sub IterateThroughReservation(ByVal parent As Control)
    Dim count As Integer = 1

    For Each c As Control In res_Placeholder.Controls
        If c.[GetType]().ToString().Equals("System.Web.UI.WebControls.Label") AndAlso c.ID Is Nothing Then
            DirectCast(c, Label).Text = "Guest"
            DirectCast(c, Label).ID = "ResLabel_" + count.ToString()
            DirectCast(c, Label).CssClass = "DYN_Label"
            count += 1
        End If

        If c.Controls.Count > 0 Then
            IterateThroughReservation(c)
        End If
    Next
End Sub

Protected Sub Retreive_first_row()

    CType(Me.FindControl("ResLabel_1"), Label).Text() = "You"
    CType(Me.FindControl("TextBox_Title_1"), TextBox).Text() = title_Txt.Text
    CType(Me.FindControl("TextBox_Title_1"), TextBox).Enabled() = False
    CType(Me.FindControl("TextBox_Firstname_1"), TextBox).Text() = first_name_Txt.Text
    CType(Me.FindControl("TextBox_Firstname_1"), TextBox).Enabled() = False
    CType(Me.FindControl("TextBox_Surname_1"), TextBox).Text() = surname_Txt.Text
    CType(Me.FindControl("TextBox_Surname_1"), TextBox).Enabled() = False

End Sub

Protected Sub CreateTextBoxes()

    If Not Page.IsValid Then
        Return
    End If

    Dim n As Integer = number_of_tickets_Ddl.SelectedValue

    For i As Integer = 0 To n - 1
        res_Placeholder.Controls.Add(New Label())
        booking_Placeholder.Controls.Add(New Label())

        title_Placeholder.Controls.Add(New TextBox())
        firstname_Placeholder.Controls.Add(New TextBox())
        surname_Placeholder.Controls.Add(New TextBox())
        ticketNum_Placeholder.Controls.Add(New TextBox())

    Next

    IterateThroughBooking(Me)
    IterateThroughReservation(Me)
    IterateThroughTitle(Me)
    IterateThroughFirstname(Me)
    IterateThroughSurname(Me)
    IterateThroughTicketNum(Me)

    Retreive_first_row()

End Sub

Protected Sub testconn_submit_Btn_Click(ByVal sender As Object, ByVal e As EventArgs) Handles testconn_submit_Btn.Click

    Filldata()

End Sub

Protected Sub next_submit_Btn_Click(ByVal sender As Object, ByVal e As EventArgs) Handles next_submit_Btn.Click

    validate()

    If valid = "fail" Then

    Else

        Step1_Pnl.Visible = False
        Step2_Pnl.Visible = True
        CreateTextBoxes()
        Button1.Attributes.Add("OnClick", "validate_step2(); return false;")
    End If

End Sub

Protected Sub clear_submit_Btn_Click(ByVal sender As Object, ByVal e As EventArgs) Handles clear_submit_Btn.Click

    title_Txt.Text = ""
    first_name_Txt.Text = ""
    surname_Txt.Text = ""
    company_name_Txt.Text = ""
    contact_number_Txt.Text = ""
    contact_email_Txt.Text = ""
    number_of_tickets_Ddl.SelectedValue = "Please select"
    purchase_date_Txt.Text = ""

    title_error_Lbl.Text = "*"
    first_name_error_Lbl.Text = "*"
    surname_error_Lbl.Text = "*"
    comnpany_name_error_Lbl.Text = "*"
    contact_phone_error_Lbl.Text = "*"
    contact_email_error_Lbl.Text = "*"
    number_of_tickets_error_Lbl.Text = "*"
    date_of_purchase_error_Lbl.Text = "*"

End Sub

Protected Sub back_Btn_Click(ByVal sender As Object, ByVal e As EventArgs) Handles back_Btn.Click

    Step1_Pnl.Visible = True
    Step2_Pnl.Visible = False

End Sub

Protected Sub next_submit2_Btn_Click(ByVal sender As Object, ByVal e As EventArgs) Handles next_submit2_Btn.Click

    validate_step2()

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:03:18.313

通常，在创建动态控件时，会在其中创建控件`Page_Init`并设置事件处理程序和所有初始属性（即 ID、名称、样式、文本等）。当回发发生时，ViewState 将在之后应用`Page_Init`（前提是 ViewState 已打开）。

在这种情况下，我将更改为中继器或某种数据网格控件并使用数据绑定来填充它。中继器控件本质上可以数据绑定到一个数字数组，重复您的模板 X 次。

可以在此处找到使用转发器执行此操作的完美示例： [VB.NET Repeater Simple Data Binding without Datasource](https://stackoverflow.com/questions/926619/vb-net-repeater-simple-data-binding-without-datasource)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:17:54.830

当您的用户第一次在下拉列表中选择一个项目时，您将获得计数并创建动态控件。诀窍在于记住下一个计数`PostBack`。

您可以为此使用会话来记住此计数。

现在，当您收到第二个时`PostBack`，您可以重新创建控件`Init`。如果你想让这些动态创建的控件接收事件，那就`Load`太迟了。

# ajax - 我对 jQuery 1.7.2 和使用 jsonp 传递的 ajax 参数对象有疑问

> ID：12004369
> 
> 赞同：-1
> 
> 时间：2012-08-17T10:50:52.660
> 
> 标签：ajax, json, jquery, object

我需要有关此代码的帮助：

我需要发送服务、数据和内容参数...但不起作用（（

```
var addons = {};
$.ajax({
    'url': 'http://site.com/index.php',
    dataType:'jsonp'
    success:function()
    {
        addons.name = 'Some name';
        addons.caption = 'Some caption';
        addons.description = 'Some description';
    }
});
var data = {
    'services'  :   1,
    'data'      :   addons,
    'content'   :   $(self).find('textarea').val()
};
$.ajax({
    'url'       :   'index.php',
    'dataType'  :   'json',
    'type'      :   'post',
    'data'      :   data,
    success:function(response){
        //...
    }
}); 
```

**发帖：**

> 服务=1&内容=嗨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:57:55.183

您需要在括号中定义对象的键和值，或者定义一个类似函数的类，然后保存值。但是对于您的目标，以下内容应该可以正常工作。

```
var addons = {
                 name: 'Some name', 
                 caption: 'Some caption',
                 description: 'Some description'
             }; 
```

亲切的问候

# objective-c - 当视图控制器由于内存警告而被卸载时如何保留状态？

> ID：12004379
> 
> 赞同：0
> 
> 时间：2012-08-17T10:51:27.073
> 
> 标签：objective-c, ios, cocoa-touch, automatic-ref-counting

我认为这可能归结为我没有完全理解当应用程序收到内存警告时应该做的正确事情（或者当你收到内存警告时，我可能不明白 iOS 自己会做什么）。

这是我的问题的简化版本：

我有一个`RootViewController`. 它推动了`TextViewController`我有一个`UITextField`. `TextViewController`可以推送一个`DetailViewController`显示一些细节的。

如果我一直推到`DetailsViewController`，那么我的导航视图控制器堆栈是`[RootVC, TextVC, DetailVC]`，然后模拟内存警告，`TextVC`iOS 会自动从内存中卸载。

**问题 1：** iOS 刚刚决定应该卸载我的视图控制器。当用户弹出`DetailVC`返回时`TextVC`，我应该在哪里保存状态信息（例如在文本字段中输入的文本）？现在，文本字段只是回到空白，因为视图控制器被卸载然后重新加载。

~~**问题 2：**当我弹回`TextVC`并点击文本字段时，我的应用程序崩溃了。打开僵尸显示当我点击文本字段时，有些`UIView`人正在从某个地方收到消息。`responderDidBecomeActive:`ARC怎么可能做到这一点？在我的`viewDidUnload`方法中，我将文本字段设置为 nil，甚至将其委托属性设置为 nil。~~

~~编辑。**新问题：**我只是通过覆盖`didReceiveMemoryWarning`for`TextVC`并让它不做任何事情来完全解决所有问题。从 1 到非常糟糕，这有多糟糕？~~

编辑 2.开个**玩笑，**我是个白痴，忘记在完全不同但相关的一段代码中删除通知的观察者。我仍然不明白当 iOS 扔掉你的废话时应该如何/在哪里保存状态信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:06:27.607

思考的方法如下。当您获得 viewDidUnload 时，系统已清除所有 UI 元素。当你弹回你的视图时，系统会重新加载笔尖，你会再次获得 viewDidLoad，显然所有的数据和设置都会丢失。

对此的解决方案是在任何可能被卸载的 viewConroller 中，您可以保存用户在 ivars 中输入或设置的任何数据 - 例如，您可以将文本保存在 NSString 中。在 viewDidLoad 中，您可以查看该字符串，如果其中有数据，则初始化文本字段。

我告诉你的所有内容都与 ios5 有关。Apple 将在未来改变它在这方面的做法，但我不能在这里真正谈论它，因为我在 WWDC 上学到的东西是保密的。也就是说，您可以通过查看一些 WWDC 视频或阅读私人开发者列表很快找到它。你应该对你将学到的东西感到非常高兴！

# c# - 在实体框架中加载子实体

> ID：12004381
> 
> 赞同：3
> 
> 时间：2012-08-17T10:51:31.577
> 
> 标签：c#, entity-framework, poco

我有这些 POCO 课程：

```
public class  Task
    {
        public int TaskId { get; set; }
        public int ProjectId { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public DateTime StartDate { get; set; }
        public DateTime? DueDate { get; set; }
        public int UserId { get; set; }
        public string Tags { get; set; }
        public string FileName { get; set; }
        public virtual Project Project { get; set; }
        public virtual List<TaskAssigned> TaskAssigns { get; set; }
        public virtual List<TaskComment> TaskComments { get; set; }
        public virtual User User { get; set; }
    }

 public class User
    {
        public int UserId { get; set; }
        public string Name { get; set; }
        public int AccountId { get; set; }
        public string Email { get; set; }
        public string Password { get; set; }
        public bool IsAdmin { get; set; }
        public virtual Account Account { get; set; }
    }

public class TaskComment
    {
        public int TaskCommentId { get; set; }
        public int TaskId { get; set; }
        public int UserId { get; set; }
        public string Comment { get; set; }
        public string FileName { get; set; }
        public virtual User User { get; set; }
    }

    public class TaskAssigned
    {
        public int TaskAssignedId { get; set; }
        public int TaskId { get; set; }
        public int UserId { get; set; }
        public virtual User User { get; set; }
    } 
```

我已尝试按 Id 获取任务并为此任务加载所有相关实体，但 TaskComment 和 TaskAssigned 的用户实体对于任务实体中的用户以外的其他用户为空：

```
public Task GetTaskById(int taskId)
    {
        return context.Tasks.Include("TaskAssigns").Include("TaskComments").Include("User").Where(t => t.TaskId == taskId).FirstOrDefault();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T10:59:02.927

中的“路径”`Include`是包罗万象的，这意味着您可以指定用`.`（点）分隔的多个属性，EF 将包括“属性路径”的所有部分。

在你的情况下，这应该工作：

```
public Task GetTaskById(int taskId)
{
    return context.Tasks
               .Include("TaskAssigns.User")
               .Include("TaskComments.User")
               .Include("User").Where(t => t.TaskId == taskId).FirstOrDefault();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:59:52.340

更改上下文属性如下

```
context.DataContext.ContextOptions.ProxyCreationEnabled = true; 
context.DataContext.ContextOptions.LazyLoadingEnabled = true; 
```

# android - 我们可以通过代码设置开发人员设置“不保留活动”的值吗？

> ID：12004382
> 
> 赞同：0
> 
> 时间：2012-08-17T10:51:52.457
> 
> 标签：android

我们可以通过代码设置开发者设置“不保留活动”的值吗？

我们可以通过

```
Settings.System.getInt(getContentResolver(), Settings.System.ALWAYS_FINISH_ACTIVITIES, 0); 
```

但是，我想通过代码在“设置>系统>开发人员选项>应用程序>>不保留活动”中设置复选框值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:12:31.333

你可以试试下面的代码：

```
 Settings.System.putInt(getContentResolver(),Settings.System.ALWAYS_FINISH_ACTIVITIES, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T07:31:02.503

用这个

```
Settings.System.putInt(getContentResolver(), Settings.System.ALWAYS_FINISH_ACTIVITIES, 0); 
```

并且还获得了这两个权限的权限 Write_setting Set_activity_finish

# asp.net - Visual Studio 10 中带有 aspx.net 的 ajax

> ID：12004383
> 
> 赞同：0
> 
> 时间：2012-08-17T10:51:55.417
> 
> 标签：asp.net, ajax

我正在编写一个 AJAX 项目，我想知道正确的方法，（不使用 Visual Studio 的内置 AJAX）

我正在使用带有 JQuery 的 AJAX 调用，这是我的问题：在服务器端，我创建了 AjaxProj.aspx，它不包含任何 html 代码，在这个 Page_load 函数中具有捕获 ajax 请求的所有代码，并且在代码的末尾拥有

```
response.end(); 
```

我真的很想知道我是否以正确的方式使用它（我再次不想使用工具箱中的 .net AJAX）

都...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:05:10.153

请向我们粘贴您的一些代码以正确使用 Ajax 您应该使用 webmethode 函数，并且您的函数应该是静态的，例如：

```
 $(document).ready(function () {
  var text = $("#<%=ApplicationSearchResult.ClientID %>").val(); 
  // Add the page method call as an onclick handler for the div.
  $("#<%=ApplicationSearchResult.ClientID %>").autocomplete({
   source: function (request, response) {
   $.ajax({
   type: "POST",
   url: "Dashboard.aspx/GetTreeNodesByText",
  data: "{'text': '" + request.term + "'}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
 success: function (data) {
  response(data.d);
   }
  });
  },
  minLength: 1
  });//end auto complete

  }); 
```

服务器端功能：

```
[WebMethod]
public static List<string> GetTreeNodesByText(string text)
{

    List<string> Nodes = new List<string>();
    if (HttpContext.Current.Session["SerialSearchDT"] != null)
    {

        DataTable DT = HttpContext.Current.Session["SerialSearchDT"] as DataTable;
        DataRow[] filteredDataTable = DT.Select("NODE_NAME LIKE '" + text + "%'");
        //  DT.DefaultView.ToTable(true, "NODE_NAME");

        for (int i = 0; i < filteredDataTable.Length; i++)
        {
            string res = filteredDataTable[i][2].ToString();

            Nodes.Add(res);

        }//end For

    }//endIF
    return Nodes.Distinct().ToList();
} 
```

这是一个例子，我希望它可以帮助你解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:13:26.220

首先编写您的服务器端代码：

```
[WebMethod()]
public static string GetData(int userid)
{
    /*do stuff*/
    return userId.ToString();
} 
```

重要说明：该方法必须是静态的，并且必须具有 WebMethod 属性，然后是 javascript 部分：

```
function asyncServerCall(userid) {
    jQuery.ajax({
 url: 'WebForm1.aspx/GetData',
 type: "POST",
 data: "{'userid':" + userid + "}",
 contentType: "application/json; charset=utf-8",
 dataType: "json",
 success: function (data) {
     alert(data.d);
 }

    });
} 
```

然后不要忘记传递js函数：

```
<input type="button" value="click me" onclick="asyncServerCall(1);" /> 
```

并且您必须在 ScriptManager 中启用PageMethods

# android - 带有 Ubuntu 12.04 恐慌的 Android SDK

> ID：12004395
> 
> 赞同：1
> 
> 时间：2012-08-17T10:52:47.553
> 
> 标签：android, sdk, panic

我尝试在 Ubuntu 12.04 上运行 Android SDK。我打开了 Android SDK 管理器并安装了“工具”和“Android 4.1”，但是在`Tools->Manage AVDs`创建新的 AVD 并启动它时出现错误`PANIC: Could not open: /home/.../.android/avd/AVD.ini`。Android SDK 位于`/opt/android/android-sdk-linux/tools/android`. 为什么找不到`.ini`文件？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:21:26.213

您可能想制作支持 sd 卡的 android avd。这就是为什么它给出错误的原因，因为您没有就此向您的 android sdk 管理器授予任何权限。

您所要做的就是在命令下运行：

打开终端->以root身份登录

并输入

chmod -R 777 'YOURPATH（只需将您的 Android sdk 文件夹拖放到此处）'

按回车。

就这样。

希望它会帮助你。

# opengl - OpenGL 调试上下文性能警告

> ID：12004396
> 
> 赞同：15
> 
> 时间：2012-08-17T10:52:49.300
> 
> 标签：opengl, opengl-3

我已经设法实现了 OpenGL 调试上下文（太棒了，终于！），大多数事情看起来都很好，但是我看到了一个性能警告，我无法找到很好的信息。

```
[   0.0330 - 388.6340] OpenGL Version: 4.2.0 Quadro 600/PCIe/SSE2 NVIDIA Corporation
[   0.0000 - 549.1920] OpenGL: Program/shader state performance warning: Fragment Shader is going to be recompiled because the shader key based on GL state mismatches. [source=API type=PERFORMANCE severity=MEDIUM id=131218] 
```

我确实明白，自从我上次编译着色器以来，它与 OpenGL 状态的变化有关。

我们有四个着色器，它们在上下文之间共享的纹理上运行，错误信息仅在创建新上下文后显示。因此，上下文创建可能会改变 OpenGL 状态机的状态。是否有可能甚至不可能解决它，因为每个上下文都以自己的“干净”状态机开始？

这可能没什么大不了的，因为它只发生在上下文创建时，但我们正在运行许多上下文（同时至少最多 15 个）所以看看我是否能够修复警告会很有趣并一劳永逸地摆脱它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T00:51:41.677

在完成绘制一些几何图形后，我通过调用 glUseProgram(0) 摆脱了该消息，否则下一个带有 programId 的 glUseProgram() 将触发该消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T18:27:36.803

从[我能找到的少量信息](https://www.opengl.org/discussion_boards/showthread.php/175944-NVidia-280-x-and-GeForce-4xx?p=1229120&viewfull=1#post1229120)来看，NVIDIA 希望在着色器编译时获得一些 OpenGL 状态，以匹配着色器绑定并用于渲染时的状态。

就个人而言，在我们获得更多信息之前，我只是在我的调试回调函数中过滤掉这个特定的消息：

```
static void CALLBACK DebugCallback(GLenum source, GLenum type, GLuint id, GLenum severity, GLsizei length, const GLchar *message, GLvoid *userParam)
{
    // Suppress some useless warnings
    switch(id)
    {
    case 131218: // NVIDIA: "shader will be recompiled due to GL state mismatches"
        return;
    default:
        break;
    }

    // Print/handle message as usual
} 
```

# .net - ArgumentException：连接字符串中无法识别的属性“用户 ID”

> ID：12004397
> 
> 赞同：3
> 
> 时间：2012-08-17T10:52:53.487
> 
> 标签：.net, connection-string, advantage-database-server

我正在使用：

*   优势数据库服务器 10
*   Advantage.Data.Provider.dll (v.9.10.2.9)

在大多数工作站上，一切都很稳定，但今天我们的一位新客户报告说他在使用我们的应用程序时遇到了问题。日志显示以下阶段异常：

> System.ArgumentException：连接字符串中无法识别的属性“用户 ID”。在 Advantage.Data.Provider.AdsConnectionStringHandler.ParseConnectionString(String strConnect) 在 Advantage.Data.Provider.AdsPoolManager.GetConnection(String strConnectionString, AdsInternalConnection& internalConnection, AdsConnectionPool& pool) 在 Advantage.Data.Provider.AdsConnection.Open()

一旦所有其他客户都可以正常使用相同的代码，我猜这个问题可能与运行环境有关，但我仍在试图找出究竟是什么导致了这个问题。

有任何想法吗？

**更新**

我刚刚浏览了`Advantage.Data.Provider.dll`代码，发现它们使用 a`Hashtable`来匹配连接字符串属性，而`Hashtable`' 的初始化对我来说看起来有点奇怪：

```
public static Hashtable CreateCaseInsensitiveHashtable()
{
  return new Hashtable((IEqualityComparer) StringComparer.CurrentCultureIgnoreCase);
} 
```

我想`StringComparer.CurrentCultureIgnoreCase`这可能是个麻烦，但我需要检查一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:48:08.583

这已在客户端的 9.10.0.21 及更高版本中得到修复。从[带有下载链接的页面](http://devzone.advantagedatabase.com/dz/content.aspx?key=20&Release=13&Product=4&Platform=11)：

> 2 - 修复了 Advantage .NET 数据提供程序中的一个错误，该错误导致某些语言环境（特别是 tr-TR）无法正确解析连接字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:18:50.753

哦，年，`StringComparer.CurrentCultureIgnoreCase`是个问题。它看起来像`Advantage.Data.Provider.dll`. `StringComparer.InvariantCultureIgnoreCase`应该改用。以下代码显示了该问题：

```
foreach (var culture in CultureInfo.GetCultures(CultureTypes.AllCultures))
{
    Thread.CurrentThread.CurrentCulture = culture;
    Thread.CurrentThread.CurrentUICulture = culture;

    var isEquals = StringComparer.CurrentCultureIgnoreCase
                                 .Compare("user id", "User ID") == 0;

    if (!isEquals)
        Console.WriteLine("culture: {0}; equals: {1}", culture.Name, isEquals);
} 
```

它给出了一个输出：

```
culture: tr; equals: False
culture: az; equals: False
culture: tr-TR; equals: False
culture: az-Latn-AZ; equals: False
culture: az-Latn; equals: False 
```

解决方法应该很简单 -`User ID`在连接字符串中使用。我会询问客户系统中当前设置了哪种文化。

**更新**

客户确认他有土耳其文化。

# ruby-on-rails - 多个heroku帐户无法正常工作

> ID：12004401
> 
> 赞同：4
> 
> 时间：2012-08-17T10:53:03.373
> 
> 标签：ruby-on-rails, git, heroku, ssh

我会非常详细，因为我遵循了[有关相关问题](https://stackoverflow.com/questions/8786564/cannot-push-to-heroku-because-key-fingerprint)的建议，但没有奏效。

我在 Mac OS X 10.7 上试图让两个 heroku 帐户工作。让我们称这些帐户`first`和`second`

要开始清理，我删除了 中的密钥`~.ssh/`， `heroku keys:remove`在两个帐户上运行以删除现有密钥，并运行 ssh-add -D 以删除现有条目（换句话说：~.ssh/ 为空，除了 known_hosts；`heroku keys`说我没有密钥，并且 ssh-add -L 表示没有条目。

我`heroku login`进入第一个帐户并运行这些：

```
ssh-keygen -t rsa -C "first@example.com" -f  ~/.ssh/id_rsa_first
ssh-add ~/.ssh/id_rsa_first
heroku keys:add ~/.ssh/id_rsa_first.pub 
```

然后我进入第二个帐户并运行这些`heroku logout`：`heroku login`

```
ssh-keygen -t rsa -C "second@example.com" -f  ~/.ssh/id_rsa_second
ssh-add ~/.ssh/id_rsa_second
heroku keys:add ~/.ssh/id_rsa_second.pub 
```

在这两种情况下，我都会记下关键指纹，我将其称为`fingerprint_first`和`fingerprint_second`。

现在我`heroku login`可以正常工作，然后`first`在第二个应用程序上失败，出现错误`git push heroku master``heroku login``second``git push heroku master`

```
!  Your key with fingerprint fingerprint_first is not authorized to access second-app-name. 
```

如果我用 将其从 ssh 列表中删除`ssh-add -d ~/.ssh/id_rsa_first`，则`git push heroku master`可以在第二个应用程序上使用，但现在如果我回到第一个应用程序和`heroku login`第一个帐户，`git push heroku master`当然会失败。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:05:25.217

最后，[这回答了它](https://getsatisfaction.com/heroku/topics/can_i_use_different_heroku_credentials_on_different_projects)。

我从头开始，删除了所有密钥，并添加了[David Dollar 的插件 heroku-accounts](https://github.com/ddollar/heroku-accounts)

现在它可以工作了，当我切换项目时我什至不需要注销/登录，因为我可以在每个项目目录上设置一个 Heroku 帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:28:08.953

另一个stackoverflow用户也有类似的问题；

[无法推送到 Heroku，因为密钥指纹](https://stackoverflow.com/questions/8786564/cannot-push-to-heroku-because-key-fingerprint)

也：

[当我尝试将最新更改推送到 Heroku 时，为什么我的带指纹的密钥未授权？](https://stackoverflow.com/questions/9049905/why-is-my-key-w-fingerprint-not-authorized-when-i-try-to-push-latest-changes-to)

# maven - Maven 发布基于版本创建标签

> ID：12004404
> 
> 赞同：0
> 
> 时间：2012-08-17T10:53:24.157
> 
> 标签：maven, release

使用 maven release:prepare 简化了部署工件的过程。可以用标签定义`tag`标签。该插件允许使用属性来构建自定义标签名。

但我需要一个更定制的版本，它在版本中使用“_”代替分界符。例如版本：1.0.1.2 => 标记名应该是 01_01_01 。

如果我可以访问 ${project.version} 的主要版本、次要版本，这也是一个解决方案。但似乎它们一般不可用。

[自从我打电话以来，build-helper 插件似乎没有解决方案`release:prepare`，因此该插件的任何设置都将丢失](https://stackoverflow.com/questions/12002033/create-property-with-string-format/12002359#12002359)。

任何想法如何以简单的方式实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:10:41.127

简单的方法是总是像这样运行 maven

```
mvn validate release:prepare 
```

当然，如果您忘记`validate`在 release:prepare 之前调用，您的 release 将会很糟糕......所以这不好。

下一个改进是拥有一个带有 defaultGoals 的配置文件

```
<profile>
  <id>prepare-release</id>
  <build>
    <defaultGoal>validate release:prepare</defaultGoal>
  </build>
</profile> 
```

然后你通过做*非标准来发布*

```
mvn -Pprepare-release 
```

真正的解决方法是向 maven 发布插件建议一个补丁，以允许在[tagNameFormat](http://maven.apache.org/plugins/maven-release-plugin/prepare-mojo.html#tagNameFormat)配置参数中进行类似正则表达式的替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:33:56.230

使用 Maven-Release Plugin，你可以指定你想要的标签格式。Maven Release Plugin 运行 2 个目标：release:prepare 和 release:perform。

在这里，您的根 pom 中有必要的目标： [http ://maven.apache.org/maven-release/maven-release-plugin/usage.html](http://maven.apache.org/maven-release/maven-release-plugin/usage.html)

如果你正在使用 Jenkins 工具，你可以使用 Maven Release Plugin 来运行它，或者只是手动运行它 mvn release:prepare 和 mvn release:perform

# spring - 如何在 Spring 的运行或启动时禁用服务？

> ID：12004405
> 
> 赞同：3
> 
> 时间：2012-08-17T10:53:28.777
> 
> 标签：spring

在我们独立的 Spring 3.1 应用程序中，我们严格地将业务逻辑与 Monitoring Swing 视图分开。视图通过实现一个`EventListener`接口来获取它的信息。

要禁用 UI，只需“删除”UI Bean 上的所有内容就足够了，`@Services`这样实现此 EventListner 的 UI 类就不会被业务逻辑注入。

但是如何做到这一点？

这个例子给出了我们类的一个小视图：

```
@Service
public class UI extends JFrame implements EventListener {
    @PostConstruct
    public void setup() {
        // Do all the Swing stuff
        setVisible(true);
    }

    @Override
    public void onBusinessLogicUpdate(final State state) {
        // Show the state on the ui
    }
}

@Service
public class Businesslogic {
    @Autowired
    public List<EventListener>  eventListeners;

    public void startCalculation() {

        do {
            // calculate ...
            for (final EventListener listener : this.eventListeners) {
                eventlistener.onBusinessLogicUpdate(currentState);
            }
        }
        while(/* do some times */);
    }
}

public class Starter {
    public static void main(final String[] args) {
        final ApplicationContext context = // ...;

        if(uiShouldBedisabled(args)) {
            // remove the UI Service Bean
        }

        context.getBean(Businesslogic.class).startCalculation();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T16:13:23.923

根据您的描述，您希望在启动时禁用这些 bean，而不是在任何任意时间点 - 这更难。

# `@Profile`

最简单的方法是使用[Spring `@Profile`（](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)从 3.1 开始可用），选择性地启用和禁用 bean：

```
@Service
@Profile("gui")
public class UI extends JFrame implements EventListener 
```

现在您需要告诉您的应用程序上下文您要使用哪个配置文件。如果`gui`配置文件被激活，`UI`bean 将被包括在内。如果没有 - Spring 将跳过该课程。有多种方法可以更改配置文件名称，例如：

```
AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();
if(!uiShouldBedisabled(args)) {
    ctx.getEnvironment().setActiveProfiles("gui");
}
ctx.scan("com.example");
ctx.refresh(); 
```

# 单独的 JAR

将您的应用程序拆分为两个 JAR - 您的业务逻辑和 GUI。如果您不想启动 GUI，只需`gui.jar`从 CLASSPATH 中删除（是的，这在运行时是不可能的，但在构建/部署期间是不可能的）。

# 两个`applicationContext.xml`文件

如果您的应用程序从 XML 开始，请创建`applicationContext.xml`和`applicationContext-gui.xml`. 显然所有的 GUI bean 都属于后者。您不必手动指定它们，只需将 GUI bean 放在不同的包中并添加聪明`<context:component-scan/>`的 .

# iphone - 收到节目信号“SIGTERM”

> ID：12004407
> 
> 赞同：0
> 
> 时间：2012-08-17T10:53:32.093
> 
> 标签：iphone

我`CoreData`在我的 iOS 应用程序中使用。当我杀死我的应用程序并重新启动它时，我有一个方法可以计算所有表中的记录总数。但它没有执行，我得到的信号是 `program signal received "SIGTERM"`

```
-(int)getAllCount{
         NSLog(@"start");

         int returnCount=0;

         NSMutableArray *tempArr=[[NSMutableArray alloc]initWithObjects:@"TempFirstAid",@"TempArticles",@"TempSymptom",@"TempIndexMaster",@"TempIndexSubMaster",@"TempIndexDetails", nil];

    for (int i=0; i<[tempArr count]; i++) {

         NSEntityDescription *entityDesc = [NSEntityDescription entityForName:[tempArr 
         objectAtIndex:i] inManagedObjectContext:[appDelegate managedObjectContext]];

         NSFetchRequest *request2 = [[NSFetchRequest alloc] init];

        [request2 setEntity:entityDesc];

        NSError *error;

        NSArray *objects = [[appDelegate managedObjectContext] executeFetchRequest:request2 
        error:&error];

        returnCount=returnCount+[objects count];
    } 
```

我在 View Did Load 中调用此方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:23:17.967

你应该使用：

```
- (NSUInteger)countForFetchRequest:(NSFetchRequest *)request error:(NSError **)error 
```

而不是获取所有对象只是为了获得计数。我猜您缺少部分代码，因为缺少返回。另一件事：您似乎是从主线程调用它。这可能会导致您的应用程序冻结并在一段时间内无响应（在大型数据库上）。

根据您对问题的描述，考虑到它实际上并没有执行这一事实，这种方法似乎甚至不是问题。

# javascript - 如何将整个 html 页面转换为带有填充控件的图像？

> ID：12004408
> 
> 赞同：0
> 
> 时间：2012-08-17T10:53:37.433
> 
> 标签：javascript, html5-canvas, webpage-screenshot

> 这里的困难是我还需要用户在 html 控件中填写的文本。

如果使用 HTML5 或 JavaScript 将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:58:29.273

这听起来很有趣！

我会研究类似flash的东西。

或者您可以将表单发回服务器并在服务器端对其进行处理以将图像发回。

看看这个答案：

[以编程方式从网页或单个 DIV 创建图像](https://stackoverflow.com/questions/8745467/programatically-create-image-from-web-page-or-a-single-div)

我只能假设您可以访问 PHP 或类似的东西。

# javascript - 对变量使用 math.max 并显示相应的变量

> ID：12004411
> 
> 赞同：0
> 
> 时间：2012-08-17T10:53:50.977
> 
> 标签：javascript, html, math

我对我的 JavaScript 代码有疑问（我对此很陌生……）。我正在做一个测试，我将使用他们的答案计算参与者的分数。我有多个变量来存储这些答案。并且分数的计算也正常。然后我有一个分数表。就是这样：

```
<script type="text/javascript">
var row1col1var="Fruit";
var rowicol2var="% of how much I love them";
var applep=34; //result from score calcultaion
var row2col1var="Apple";
var bananasp=65; //result from score calcultaion
var row3col1var="Bananas";
document.write('<center><table width="50%" border="0">');
document.write('<tr align="center"><td>' + row1col1var + '<\/td><td>' + rowicol2var + '<\/td><\/tr>');
document.write('<tr align="center"><td>' + row2col1var + '<\/td><td' + applep + "%" + '<\/td><\/tr>');
document.write('<tr align="center"><td>' + row3col1var + '<\/td><td' + bananasp + "%" +'<\/td><\/tr>'); 
document.write('<\/table><\/center>'); </script> 
```

在这里，我在表格中显示每个“水果”的结果。我无法开始工作的是：我想选出最好的分数（在本例中为 Bananas 为 65）并显示：“你最喜欢 Bananas。” （即链接 65 到 Bananas 并显示 Bananas）。我试图给单元格一个名为 Apples 或 Bananas 的 id 并调用 id 来显示它，但这不起作用。

我的问题分为两部分： 1\. 我无法让 math.max 处理变量。2.我不知道如何将最高分与它的“名称”联系起来（即65属于香蕉）。

我希望你能帮帮我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:28:04.170

您需要使用更合适的方式进行编码。对于存储数据，您可以使用对象或数组。我在这个例子中使用了一个数组。检查这个：

```
<html>
<head>
<script type="text/javascript">
function getScore(){
    var scoreArr = [];
    scoreArr.push(['apple', '35']);
    scoreArr.push(['apple', '65']);

    var maxPercentage = null;
    var lovedFruit = '';
    var finalScore = '<center><table width="50%" border="0"><tr align="center"><th>Fruits</th><th>% of how much I love them</th></tr>';

    for (var i = 0; i < scoreArr.length; i++) {
        finalScore += '<tr align="center"><td>' + scoreArr[i][0] + '</td><td>' + scoreArr[i][1] + "%" + '</td></tr>';
        if (maxPercentage === null) {
            lovedFruit = scoreArr[i][0];
            maxPercentage = parseInt(scoreArr[i][1]);
        } else {
            if (maxPercentage < parseInt(scoreArr[i][1])) {
                lovedFruit = scoreArr[i][0];
                maxPercentage = parseInt(scoreArr[i][1]);
            }
        }
    }
    finalScore += '</table><br>Result is : ' + maxPercentage + ' belongs to ' + lovedFruit + '</center>';

   // WITH JAVASCRIPT
    var container = document.createElement('div');
    container.innerHTML = finalScore;
    document.body.insertBefore(container, null); //append div to end

  // WITH JQUERY
      // $('body').append(finalScore); 

}
</script>
</head>
<body onLoad=getScore()>
</body>
</html> 
```

它将您的数据存储在数组中，然后您可以以更复杂的方式做任何您想做的事情。

# asp.net-mvc - 设置 Html.ActionLink 的可见性，最佳方法？

> ID：12004414
> 
> 赞同：3
> 
> 时间：2012-08-17T10:54:20.743
> 
> 标签：asp.net-mvc, visibility, actionlink

我的模型中有布尔值，我返回这个模型来查看。我想用这个值来控制 actionlink 的可见性。我发现了两个这样的例子：

第一的

```
@if (Model.UserCanCreate)
{
    @Html.ActionLink("Create New", "Create")
} 
```

第二

```
<li style="visibility: @Model.UserCanCreate">@Html.ActionLink("Create New", "Create")</li> 
```

显示/隐藏 htmlHelpers 的最佳方式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:10:42.627

第一个选项是正确的。

```
@if (Model.UserCanCreate)
{
    @Html.ActionLink("Create New", "Create")
} 
```

永远不要依赖浏览器的可见性，只给用户他被允许看到的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:13:07.000

第一个更适合您的情况。如果您使用第二个 - 页面上会有隐藏的链接来做某事，但在第一种情况下，不会有任何关于可能做的信息（“创建新”，“创建”）。

# c++ - opengGL画一条线

> ID：12004415
> 
> 赞同：1
> 
> 时间：2012-08-17T10:54:42.843
> 
> 标签：c++, opengl

到目前为止，这是我的代码：

```
#include <iostream>
#include <cstdlib>
#include <GL/glut.h>
#include <cmath>

void keyboard(unsigned char key, int x, int y);
void display(void);
void timer(int);
static float x=0.0f,y=0.0f;

int main(int argc, char** argv)
{
glutInit(&argc, argv);
glutInitWindowPosition(200,200);
glutInitWindowSize(640,480);
glutCreateWindow("draw a line");
glutKeyboardFunc(&keyboard);
glutDisplayFunc(&display);

glutTimerFunc(10,timer,0);

glutMainLoop();

return EXIT_SUCCESS;
}

void keyboard(unsigned char key, int x, int y)
{
switch (key)
 {
 case '\x1B':
  exit(EXIT_SUCCESS);
  break;
}
}

void timer(int value){
x+=0.001;
y+=0.0005;
glutPostRedisplay();
glutTimerFunc(10,timer,0);
 }

void display()
 {

glClear(GL_COLOR_BUFFER_BIT);
glLoadIdentity ();
 glColor3f(0.0f, 1.0f, 0.0f);

glBegin(GL_POINTS);
glVertex2f(x,y);
glEnd();

glFlush();
} 
```

这样做是它从点 (0,0) 到 (1,0.5) 每 10 毫秒点亮一个像素。我想要的是当一个像素点亮时它保持在那个状态，所以最终你会看到一条线。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:05:14.020

我不熟悉，`glut`但我猜`display`是每次重绘时调用的函数。此函数以 开头`glClear(GL_COLOR_BUFFER_BIT)`。此函数在每次重绘时清除您的颜色缓冲区。

您可能会发现删除`glClear`并不能完全解决您的问题。这很可能是因为您的图形上下文可能是双缓冲的，并且为了提高效率，在每次动画运行时不会将前缓冲区复制到后缓冲区。

获得所需效果的最佳选择可能是绘制一条在每次动画运行时都会增长的线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:05:31.123

为什么要艰难地做事？尽管旧的 OGL API 已被弃用，但您可以使用 GL_LINES 来执行此操作：

```
glBegin(GL_LINES);
glVertex2f(x_start,y_start);
glVertex2f(x_end,y_end);
glEnd(); 
```

这将一次性完全绘制线条，这更容易且更有效（它还允许您从线条抗锯齿提示中受益）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:33:12.683

每次调用时都会调用 display 函数`glutPostRedisplay()`。并且每次调用显示函数时，都会清屏。

您需要编写一个函数来遍历您要显示的所有点。每次迭代都会调用类似`drawPoint()`函数的东西。

也许是这样的：

```
void display()
{
  glClear(GL_COLOR_BUFFER_BIT);
  glColor3f(0.0f, 1.0f, 0.0f);
  for (int i = 0; i < num_points; i++)
  {
      drawPoint(points(i));
  }
  glFlush();
} 
```

或者，您可以跳过编写新函数并执行以下操作：

```
 glBegin(GL_POINTS);
 for (int i = 0; i < num_points; i++)
 {
     glVertex2f(points(i).getX(), points(i).getY());
 }
 glEnd(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T04:42:22.533

如果您使用，GL_LINES。一种方法是拥有一个要绘制的点数组 EG：p[0], p[1], p[2], p[3], p[4], p[5] ...然后使用一些 for 循环绘制它

```
glBegin(GL_LINES);
for(...) {
  glVertex2f(p[i  ]->x,p[i  ]->y);
  glVertex2f(p[i+1]->x,p[i+1]->y);
}
glEnd(); 
```

因此，使用这种方法，您可以将 p[] 替换为允许您制作漂亮形状的函数

```
glVertex2f(functionx(i  ),functiony(i  ));
glVertex2f(functionx(i+1),functiony(i+1)); 
```

注意：线条的工作方式很奇怪，它们没有连接起来，您需要有一个起点到终点之类的东西，因此 i+1

我猜你想用极坐标画心形的东西？

# c# - 是否可以从已经运行的进程构造 ProcessStartInfo ？

> ID：12004416
> 
> 赞同：1
> 
> 时间：2012-08-17T10:54:47.680
> 
> 标签：c#, .net

如果我通过使用提取来*连接*`Process.GetProcessesByName("Notepad");`到正在运行的进程，是否可以重建该进程的*ProcessStartInfo*？

例如，我希望能够附加到*记事本*，*杀死*它并*重新启动*它。如果没有有效的*ProcessStartInfo*，*Start*调用将失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:57:26.477

对此没有直接的支持。

您可以检查正在运行的进程的每个属性并`ProcessStartInfo`使用相应的值初始化一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:11:46.593

不，在某些情况下这是不可能的。一个简单的例子是：

```
 Process.Start("example.lnk"); 
```

以后无法发现使用 .lnk 文件来启动该过程。

WorkingDirectory 是一个棘手的问题，一个过程通常需要正确设置它，但以后可能会更改它。使用不同用户帐户启动的过程是不可克服的，您无法提供正确的帐户密码。自定义环境是另一种环境。

# requirejs - 使用 require.js 加载 i18next.js 时出现问题

> ID：12004417
> 
> 赞同：2
> 
> 时间：2012-08-17T10:54:50.160
> 
> 标签：requirejs

我对 require.js 很陌生，并且在加载 i18next.js 时遇到问题。

main.js

```
require(["lib/jquery", "lib/i18next", "config.i18next", "constants"],    
  function(util) {
     console.log("loaded javascript files");
}); 
```

和 config.i18next.js

```
var option = {resGetPath: '../translations/__lng__.json' };
i18n.init(option, function(t) { 
    console.log("Language initialization successfull");
}); 
```

我总是得到错误

```
Uncaught ReferenceError: i18n is not defined            config.i18next.js:2 
```

我知道谁使用 i18next，并且在传统上加载 javascript 文件时一切正常。

* * *

编辑：

同时，我让它像这样与垫片一起工作：

```
requirejs.config({
    shim: {
        'lib/i18next' : ['lib/jquery'],
    }
});

require(["lib/i18next"], function(i18n) {
    var options = {
        resGetPath: 'translations/__lng__.json',
        preload: ['de', 'en'] 
    };
    i18n.init(options, function(t) { 
    });
}); 
```

我可以用 翻译其他文件`$.t("key");`，但是现在我不能用编程方式更改语言，`i18n.setLng()`因为找不到变量`ReferenceError: Can't find variable: i18n`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T20:15:25.673

--- i18next 现在带有 amd build ---

这应该可以解决使用 i18next 和 amd 的所有问题。您可以在[http://i18next.com上获取它](http://i18next.com)

# iphone - 如何使用矩形裁剪图像？

> ID：12004419
> 
> 赞同：2
> 
> 时间：2012-08-17T10:54:53.483
> 
> 标签：iphone, ios, image-processing, uiimageview, uiimage

![用于裁剪的矩形](../Images/41a9c8605c53c29af21767b08be17137.png)

我正在尝试使用此矩形裁剪图像。但不知道如何拉伸矩形。我有一个`UIView`在显示的另一个视图的外部和内部`black border`。当我拉伸时，我需要更改两个`UIView`s 的框架吗？

应该使用`Pinchgesture`拉伸矩形或任何其他方法？

这里四个蓝色处理程序是`UIView`s。我将如何确定它们的拖动？如果有请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:58:27.140

以下代码用于选择框并裁剪图像。

```
-(IBAction) cropImage:(id) sender{
    // Create rectangle that represents a cropped image  
    // from the middle of the existing image
float xCo,yCo;
float width=bottomCornerPoint.x-topCornerPoint.x;
float height=bottomCornerPoint.y-topCornerPoint.y;
if(width<0)
width=-width;
if(height<0)
    height=-height;
         if(topCornerPoint.x <bottomCornerPoint.x)
         {
               xCo=topCornerPoint.x;
          }
         else 
         {
             xCo=bottomCornerPoint.x;
         } 
        if(topCornerPoint.y <bottomCornerPoint.y)
        {
             yCo=topCornerPoint.y;
         }
      else {
             yCo=bottomCornerPoint.y;
       }
    CGRect rect = CGRectMake(xCo,yCo,width,height);
    // Create bitmap image from original image data,
    // using rectangle to specify desired crop area
    UIImage *image = [UIImage imageNamed:@"abc.png"];
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], rect);
    UIImage *img = [UIImage imageWithCGImage:imageRef]; 
    CGImageRelease(imageRef);
    // Create and show the new image from bitmap data
    imageView = [[UIImageView alloc] initWithImage:img];
    [imageView setFrame:CGRectMake(110, 600, width, height)];
    imageView.image=img;
    [[self view] addSubview:imageView];
    [imageView release];
} 
```

希望这可能会有所帮助

# java - 打印机 Argox PPLA

> ID：12004420
> 
> 赞同：1
> 
> 时间：2012-08-17T10:54:55.370
> 
> 标签：java

我在吃 Argox 标签打印机时遇到问题，仍然无法向她发送任何内容。型号为 Argox OS214 tt、ANPP 并接受 PPLB。

使用通用类连接到串行设备，我用她的几个财务打印机和秤，附上。全部使用 rxtx 库。此类还可以读取设备的响应，因为它已经在秤上使用并且从未出现过问题，也可以在财务打印机上使用。

我观看了手动 PPLA 并或多或少地看到了它是如何工作的，但还不能测试任何东西。我无能为力，也无法阅读您的回复。

这是我的测试：

```
import javax.swing.JOptionPane;  
public class TestePPLA {  
public static void main(String[] args){  
    String porta="COM1";  
    int velocidade=9600;  
    int databits=8;  
    int stopbits=1;  
    int paridade=0;  
    int timeout=10;  
    try  
    {             
        String comando = "<STX>L<CR>121100001000050THIS LABEL IS MADE BY JIMMY<CR>E<CR>";  
        ComunicacaoSerial comunica = ComunicacaoSerial.getReference ();  
        comunica.conexao (porta,velocidade,databits,stopbits,paridade);  
        comunica.escritaPortaSerial (comando.getBytes());  

        Thread.sleep(timeout);  
        String resposta = new String (comunica.getDados());  

        comunica.fechaConexao();                  

        System.out.println(resposta);  
    }  
    catch(Exception ex)  
    {  
        ex.printStackTrace();  
        JOptionPane.showMessageDialog(null, "Erro de comunica\u00e7\u00e3o com a impressora", "Testador", JOptionPane.ERROR_MESSAGE);  
    }  

}  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:43:15.267

对于您所说的，问题在于您将 PPLA 代码发送到 PPLB 打印机，当您这样做时，打印机什么也不做。这是一个 PPLB 代码的示例：

```
N↵
A50,30,0,1,1,1,N,"This is font 1." ↵
A50,70,0,2,1,1,N,"This is font 2." ↵
A50,110,0,3,1,1,N,"This is font 3." ↵
A50,150,0,4,1,1,N,"This is font 4." ↵
A50,200,0,5,1,1,R,"FONT 5"↵
P1↵ 
```

# string - Emacs lisp：评估字符串列表

> ID：12004422
> 
> 赞同：4
> 
> 时间：2012-08-17T10:54:59.253
> 
> 标签：string, emacs, lisp, elisp, yasnippet

我是 elisp 的新手，但我正在尝试为我的 .emacs 增添一些趣味。

我正在尝试定义一些路径，但是在创建路径列表（以及更具体地为 YaSnippet 设置列表）时遇到问题。

当我评估列表时，我得到一个符号名称列表（而不是 yassnippet 想要的符号值）。

我得到了代码，但感觉有更好的方法来做到这一点？

这是工作代码：

```
;; some paths
(setq my-snippets-path "~/.emacs.d/snippets")
(setq default-snippets-path "~/.emacs.d/site-lisp/yasnippet/snippets")

;; set the yas/root-directory to a list of the paths
(setq yas/root-directory `(,my-snippets-path ,default-snippets-path))

;; load the directories
(mapc 'yas/load-directory yas/root-directory) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T11:26:49.013

如果您评估字符串列表，则结果取决于列表项的值。最好的测试方法是启动 ielm repl (Mx ielm)，然后输入：

```
ELISP> '("abc" "def" "ghi")
("abc" "def" "ghi") 
```

带引号的字符串列表计算为列表值。如果将列表的值存储在一个变量中，然后对变量求值，ELisp 会抱怨函数*abc*是未知的。

```
ELISP> (setq my-list '("abc" "def" "ghi"))
("abc" "def" "ghi")

ELISP> (eval my-list)
*** Eval error ***  Invalid function: "abc" 
```

对于 yasnippet 目录配置，您应该只设置*yas-snippet-dir*，例如

```
(add-to-list 'load-path
              "~/.emacs.d/plugins/yasnippet")
(require 'yasnippet)

(setq yas-snippet-dirs
      '("~/.emacs.d/snippets"            ;; personal snippets
        "/path/to/yasnippet/snippets"    ;; the default collection
        "/path/to/other/snippets"        ;; add any other folder with a snippet collection
        ))

(yas-global-mode 1) 
```

编辑：*yas/root-directory*
的使用已被弃用。来自[yasnippet.el的文档](https://github.com/capitaomorte/yasnippet/blob/master/yasnippet.el)

 *```
`yas-snippet-dirs'

The directory where user-created snippets are to be
stored. Can also be a list of directories. In that case,
when used for bulk (re)loading of snippets (at startup or
via `yas-reload-all'), directories appearing earlier in
the list shadow other dir's snippets. Also, the first
directory is taken as the default for storing the user's
new snippets.

The deprecated `yas/root-directory' aliases this variable
for backward-compatibility. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T15:59:28.477

我想你想要

```
(setq yas/root-directory (list my-snippets-path default-snippets-path)) 
```*

# shell - 何时在 shell 脚本的 if 条件中使用双引号

> ID：12004424
> 
> 赞同：0
> 
> 时间：2012-08-17T10:55:04.633
> 
> 标签：shell, unix

我正在为考试学习 shell 脚本，在我们的教师书中，他在一个地方写了以下示例：

```
# This script expects a folder path as an argument.
cd $1
if [ $? -ne 0 ]; then echo "Folder not found"; exit 1; fi 
```

然而，在另一个例子中，他写道：

```
# This script expects one argument
if [ "$#" -ne 1 ]; then echo "Missing Parameter"; exit 1; fi 
```

现在，我什么时候必须将经过测试的参数放在双引号中的方括号内，什么时候不需要？

我的意思是，美元？在这种情况下代表一个数字。但是，此示例中的 $# 也表示数字而不是字符串（尽管一切都是字符串）。但是为什么 $# 双引号和 $? 不是？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:04:25.957

没有区别，因为 Bash 保证两者都是数字。

如果变量可能是字符串，可能带有控制字符或空格，则有必要引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:57:06.593

他们的意思是一样的。$values 代表变量，将用作引号内外的变量。

# multithreading - sqlite 在 WAL 模式下返回 SQLITE_BUSY

> ID：12004426
> 
> 赞同：4
> 
> 时间：2012-08-17T10:55:12.713
> 
> 标签：multithreading, sqlite, transactions, mono

我有一个使用 sqlite 数据库的 Web 应用程序。我的 sqlite 版本是官方 windows 二进制发行版的最新版本 - 3.7.13。

问题是在数据库负载很重的情况下，sqlite API 函数（例如 sqlite3_step）正在返回 SQLITE_BUSY。

初始化连接时，我传递了以下编译指示：

```
journal_mode = WAL
page_size = 4096
synchronous = FULL
foreign_keys = on 
```

数据库是单文件数据库。我正在使用它提供的 Mono 2.10.8 和 Mono.Data.Sqlite 程序集来访问数据库。

我正在使用 50 个并行线程对其进行测试，这些线程分别向我的应用程序发送 50 个后续 http 请求。在每次请求时，都会对数据库进行一些读取和写入。每组 IO 操作都在事务内部执行。

一切顺利，直到接近第 400 - 700 个请求。在这个（随机）时刻，API 函数开始永久返回 SQLITE_BUSY（更准确地说 - 直到达到重试限制）。

据我所知，WAL 模式透明地支持并行读写。我猜这可能是因为在执行检查点操作时尝试读取数据库。但即使关闭自动检查点，情况仍然相同。

在这种情况下可能有什么问题？如何正确处理大量并行数据库 IO？

附言

假设每个请求只有一个连接。我使用配置了 WebSessionContext 的 nhibernate。

我像这样初始化我的 NHibernate 会话：

```
ISession session = null;

//factory variable is session factory
if (CurrentSessionContext.HasBind(factory))
{
  session = factory.GetCurrentSession();
  if (session == null)
    CurrentSessionContext.Unbind(factory);
}

if (session == null)
{
  session = factory.OpenSession();
  CurrentSessionContext.Bind(session);
}

return session; 
```

在 HttpApplication.EndRequest 我像这样发布它：

```
//factory variable is session factory
if (CurrentSessionContext.HasBind(factory))
{
  try
  {
    CurrentSessionContext.Unbind(factory)
      .Dispose();
  }
  catch (Exception ee)
  {
    Logr.Error("Error uninitializing session", ee);
  }
} 
```

据我所知，每个请求生命周期应该只有一个连接。在处理请求时，代码按顺序执行（ASP.NET MVC 3）。所以看起来这里不可能有任何并发​​性。我可以得出结论，在这种情况下没有共享连接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:00:29.900

我不清楚请求线程是否共享相同的连接。如果他们不这样做，那么您不应该遇到这些问题。

假设您确实在多个线程之间共享连接对象，您应该使用一些锁定机制，因为[SqliteConnection 不是线程安全](http://sqlite.phxsoftware.com/forums/t/56.aspx)的（一个旧帖子，但是作为 Mono 的一部分维护的 SQLite 库是从 System.Data.SQLite 演变而来的在[http://sqlite.phxsoftware.com](http://sqlite.phxsoftware.com)上找到）。

因此，假设您不使用 SqliteConnection 对象进行锁定，您可以尝试一下吗？实现此目的的简单方法如下所示：

```
static readonly object _locker = new object();

public void ProcessRequest()
{
    lock (_locker) {
        using (IDbCommand dbcmd = conn.CreateCommand()) {
            string sql = "INSERT INTO foo VALUES ('bar')";
            dbcmd.CommandText = sql;
            dbcmd.ExecuteNonQuery();
        }
    }
} 
```

但是，您可以选择与每个线程打开不同的连接，以确保您不再遇到 SQLite 库的线程问题。

**编辑**

跟进您发布的代码，您是否在提交事务后关闭会话？如果你不使用一些 ITransaction，你会刷新并关闭会话吗？我在问，因为我在您的代码中没有看到它，我在[https://stackoverflow.com/a/43567/610650中看到了它](https://stackoverflow.com/a/43567/610650)

我还在[http://nhibernate.info/doc/nh/en/index.html#session-configuration](http://nhibernate.info/doc/nh/en/index.html#session-configuration)上看到了它：

> 另请注意，您可以调用 NHibernateHelper.GetCurrentSession(); 只要你喜欢，你总是会得到这个 HTTP 请求的当前 ISession。您必须确保 ISession 在您的工作单元完成后关闭，无论是在应用程序类的 Application_EndRequest 事件处理程序中，还是在发送 HTTP 响应之前的 HttpModule 中。

# ios - IOS：我无法显示我的标签多行

> ID：12004427
> 
> 赞同：0
> 
> 时间：2012-08-17T10:55:15.593
> 
> 标签：ios, uilabel

我对 UILabel 有疑问。我想多行显示评论。但它们是单行的。这是我的代码：

```
CGRect currentFrame = comment.frame;
CGSize max = CGSizeMake(comment.frame.size.width,20000.0f);
CGSize expected = [comment.text sizeWithFont:[UIFont systemFontOfSize:10.0] constrainedToSize:max lineBreakMode:UILineBreakModeWordWrap];
currentFrame.size.height = expected.height;
comment.frame = currentFrame;
comment.numberOfLines = 0;
[comment sizeToFit]; 
```

但结果并不好。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:24:12.367

您的代码没问题，但您应该在代码中添加这一行以获得多行

```
comment.lineBreakMode = UILineBreakModeWordWrap; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T11:13:22.100

我认为你应该增加行数

```
comment.numberOfLines = 2  /* or more */ 
```

因此，当文本大小增加标签的宽度时，它将是多行，但请记住字体大小和标签大小比率

# javascript - 如何从输入中触发花哨的框（焦点输出）

> ID：12004428
> 
> 赞同：0
> 
> 时间：2012-08-17T10:55:16.040
> 
> 标签：javascript, jquery, fancybox

当用户从输入框中聚焦并且其中的值超过固定量（25）时，我试图触发 Fancybox。聚焦和检查值代码看起来不错，但 Fancy 框在触发时会引发以下错误：

`Node cannot be inserted at the specified point in the hierarchy`

我的 HTML 是：

`<input class='warning' type='text' name='cash' />`

和 th JS（准备好文档）是：

```
$(".warning").focusout(function() {
  if (Number(this.value) > 25)  {
    console.debug(this.value + " gt 25");
    $.fancybox({
      showCloseButton: false,
      href: 'warning.html'
    });
  }
}) 
```

我怀疑问题出在 $.fancybox 位，但我不知道应该是什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:14:27.083

您缺少 if() 子句上的右括号。

[http://jsfiddle.net/PxySJ/1/](http://jsfiddle.net/PxySJ/1/)可以正常工作。

# javascript - javascript 排序算法不起作用 - 有什么明显的我做错了吗？

> ID：12004429
> 
> 赞同：0
> 
> 时间：2012-08-17T10:55:18.460
> 
> 标签：javascript, sorting, angularjs

```
function MyController($scope) {
    var singleSort = [
        { "text": "Second", "a": 2 },
        { "text": "Fifth", "a": 5 },
        { "text": "First", "a": 1 },
        { "text": "Fourth", "a": 4 },
        { "text": "Third", "a": 3 }
    ];    

    var multipleSort = [
        { "text": "Second", "a": 1, "b": 2 },
        { "text": "Fifth", "a": 2, "b": 2 },
        { "text": "First", "a": 1, "b": 1 },
        { "text": "Fourth", "a": 2, "b": 1 },
        { "text": "Third", "a": 1, "b": 3 }
    ];

    var singleSortIterator = function(item) {
        return item.a;
    };    

    var multipleSortIterator = function(item) {
        return [item.a, item.b];
    };

    var singleSortReversedIterator = function(item) {
        return -item.a;
    };    

    var multipleSortReversedIterator = function(item) {
        return -[item.a, item.b];
    };    

    $scope.singleSort = _.sortBy(singleSort, singleSortIterator);     
    $scope.multipleSort = _.sortBy(multipleSort, multipleSortIterator);   
    $scope.singleSortReversed = _.sortBy(singleSort, singleSortReversedIterator);     
    $scope.multipleSortReversed = _.sortBy(multipleSort, multipleSortReversedIterator);   
} 
```

​​​

除了 multipleSortReversed 之外，排序算法都在工作。这里有什么明显的错误吗？

[http://jsfiddle.net/andybooth/QEBUx/](http://jsfiddle.net/andybooth/QEBUx/)

我得到的结果是

```
Single sort
First
Second
Third
Fourth
Fifth
Multiple sort
First
Second
Third
Fourth
Fifth
Single sort (reversed)
Fifth
Fourth
Third
Second
First
Multiple sort (reversed)
Second
Fifth
First
Fourth
Third 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:01:58.773

我不认为 udscore 可以按多个属性排序，但我已经使用普通的 javascript 排序函数实现了多重排序

```
var helper = function(x,y) {
  var r = 0;
  if(x.a > y.a) {r+=10;}
  if(x.a < y.a) {r-=10;}
  if(x.b > y.b) {r+=1;}
  if(x.b < y.b) {r-=1;}
  return r;
}

var asc = [{a:2,b:1},{a:1,b:2},{a:1,b:1},{a:2,b:2}].sort(function(x,y) {
  return helper(x,y);
});

var desc = [{a:2,b:1},{a:1,b:2},{a:1,b:1},{a:2,b:2}].sort(function(x,y) {
  return -1 * helper(x,y);
}); 
```

主要思想是在助手中。您需要根据属性优先级排序确保返回的值顺序正确。可能的值：11,10,1,0,-1,-10,-11。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:29:43.930

使用[http://linqjs.codeplex.com](http://linqjs.codeplex.com)似乎适用于多次订购[http://jsfiddle.net/andybooth/caQjf/](http://jsfiddle.net/andybooth/caQjf/)。

```
$scope.singleSortReversed = Enumerable.From(singleSort).OrderByDescending(orderByA).ToArray();   
$scope.multipleSortReversed = Enumerable.From(multipleSort).OrderByDescending(orderByA).ThenByDescending(orderByB).ToArray(); 
```

但是，使用 underscorejs 的解决方案仍然有用。我相信@cuzzae 建议的 [-item.a, -item.b] 仍然按错误的顺序返回项目，而不是按要求颠倒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T10:59:17.607

我一眼就能看到的是

```
var multipleSortReversedIterator = function(item) {
    return -[item.a, item.b]; // will return NaN
    // change to return [-item.a, -item.b];
}; 
```

# android - 从 android_main 退出的正确方法

> ID：12004430
> 
> 赞同：1
> 
> 时间：2012-08-17T10:55:28.613
> 
> 标签：android, android-ndk

退出本机活动的正确方法是什么？也就是说，我如何结束我的`android_main`功能。如果我什么都不做，程序就会挂起，最终设备会终止它。如果我打电话`exit(0)`，那么它确实会退出，但它会在日志文件中打印一个转储，表明它没有正确清理。

那么我应该如何正确退出应用程序呢？

**编辑**：我正在纯粹用 C++ 编写本机活动。我在问如何返回/完成我的`android_main`日常工作。我在这个项目中的 Java 代码*为零。*

日志失败的顶部片段：

```
V/threaded_app( 5419): NativeWindowDestroyed: 0x29c490 -- 0x29d788
I/DEBUG   ( 1055): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   ( 1055): Build fingerprint: 'LENOVO/IdeaPad_Tablet_A1_07/A1_07:2.3.4/GRJ22/eng.user.20120209.100319:user/release-keys'
I/DEBUG   ( 1055): pid: 5419, tid: 5427  >>> eu.eversystems.sample <<<
I/DEBUG   ( 1055): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000024
I/DEBUG   ( 1055):  r0 0029d788  r1 463ddb64  r2 5f776e64  r3 00000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:29:37.330

我没有尝试过，但我想调用`ANativeActivity_finish()`本机活动指针会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:14:06.120

如果您查看 NDK 中的 native-activity 示例，android_main 是一个 void 函数，因此当您想要“退出”时只需“返回”即可。

但是，您应该注意如何/何时从 android_main 返回。在正常情况下，Android 上的应用程序并不会真正“结束”。它们被带入和带出前台。自然，如果该进程在后台并且不再需要它的操作系统设备，它将如您所说的那样被终止。在这种情况下，我希望设置 android_native_app_glue 库中的“destroyRequested”字段，这应该会触发 android_main 的返回。这将允许您优雅地退出您的应用程序。

在所有其他情况下，您只是希望您的应用程序尊重它可能发现的各种状态。

即：

```
/**
 * Command from main thread: the AInputQueue has changed.  Upon processing
 * this command, android_app->inputQueue will be updated to the new queue
 * (or NULL).
 */
APP_CMD_INPUT_CHANGED,

/**
 * Command from main thread: a new ANativeWindow is ready for use.  Upon
 * receiving this command, android_app->window will contain the new window
 * surface.
 */
APP_CMD_INIT_WINDOW,

/**
 * Command from main thread: the existing ANativeWindow needs to be
 * terminated.  Upon receiving this command, android_app->window still
 * contains the existing window; after calling android_app_exec_cmd
 * it will be set to NULL.
 */
APP_CMD_TERM_WINDOW,

/**
 * Command from main thread: the current ANativeWindow has been resized.
 * Please redraw with its new size.
 */
APP_CMD_WINDOW_RESIZED,

/**
 * Command from main thread: the system needs that the current ANativeWindow
 * be redrawn.  You should redraw the window before handing this to
 * android_app_exec_cmd() in order to avoid transient drawing glitches.
 */
APP_CMD_WINDOW_REDRAW_NEEDED,

/**
 * Command from main thread: the content area of the window has changed,
 * such as from the soft input window being shown or hidden.  You can
 * find the new content rect in android_app::contentRect.
 */
APP_CMD_CONTENT_RECT_CHANGED,

/**
 * Command from main thread: the app's activity window has gained
 * input focus.
 */
APP_CMD_GAINED_FOCUS,

/**
 * Command from main thread: the app's activity window has lost
 * input focus.
 */
APP_CMD_LOST_FOCUS,

/**
 * Command from main thread: the current device configuration has changed.
 */
APP_CMD_CONFIG_CHANGED,

/**
 * Command from main thread: the system is running low on memory.
 * Try to reduce your memory use.
 */
APP_CMD_LOW_MEMORY,

/**
 * Command from main thread: the app's activity has been started.
 */
APP_CMD_START,

/**
 * Command from main thread: the app's activity has been resumed.
 */
APP_CMD_RESUME,

/**
 * Command from main thread: the app should generate a new saved state
 * for itself, to restore from later if needed.  If you have saved state,
 * allocate it with malloc and place it in android_app.savedState with
 * the size in android_app.savedStateSize.  The will be freed for you
 * later.
 */
APP_CMD_SAVE_STATE,

/**
 * Command from main thread: the app's activity has been paused.
 */
APP_CMD_PAUSE,

/**
 * Command from main thread: the app's activity has been stopped.
 */
APP_CMD_STOP,

/**
 * Command from main thread: the app's activity is being destroyed,
 * and waiting for the app thread to clean up and exit before proceeding.
 */
APP_CMD_DESTROY, 
```

示例代码在这里：

[http://developer.android.com/reference/android/app/NativeActivity.html](http://developer.android.com/reference/android/app/NativeActivity.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T11:05:21.160

你可以使用

```
android:noHistory="true" 
```

在您所有活动的清单中:) 然后

```
finish() 
```

你目前的活动..你完成了！:) 我希望它有所帮助

# jpa - 找不到刚刚使用 JPA 在不同线程中创建的记录

> ID：12004432
> 
> 赞同：1
> 
> 时间：2012-08-17T10:55:33.033
> 
> 标签：jpa, transactions, playframework, persistence

我正在使用游戏！框架，并在以下场景中遇到困难。我有一个具有“只读”事务的服务器进程。这是为了防止由于执行而导致任何可能的数据库锁定，因为这是一个复杂的过程。有一个或两个记录要存储，但我将其作为一项工作，因为我发现在主线程中执行它们可能会导致更高负载下的死锁。

但是，有一次我需要创建一个对象并随后使用它。但是，当我使用 Job 创建对象时，等待生成的 id（返回 Promise）然后在数据库中搜索它，但找不到它。

此时是否有一种简单的方法可以让 JPA 在数据库中“重新”搜索？我实施了 5 秒。暂停测试，所以我起诉这不是因为程序还没有完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:38:15.347

检查您周围是否有交易，`INSERT`以及是否有一项检查交易是否已`COMMIT`编辑。

# visual-c++ - 更快的组装优化方式在 RGB8 和 RGB32 图像之间进行转换

> ID：12004437
> 
> 赞同：8
> 
> 时间：2012-08-17T10:56:03.677
> 
> 标签：visual-c++, optimization, assembly, x86, sse

我正在尝试找到一种用于 RGB8 到 RGB32 图像转换的程序集优化方法。

源是 8 位灰度图像，目标应该是 32 位灰度图像 (​​BGRA)，第 4 通道 (alpha) 被忽略。源地址不保证 16 字节对齐，Count 是 16 的倍数，目标地址是 16 字节对齐。

*   输入：8位单通道灰度图像
*   输出：32 位 BGRA（忽略 alpha 通道）
*   COUNT：图像大小是 16 的倍数
*   CPU：x86-32（允许 SSE2/SSE3）

这是我优化的汇编代码。有没有更快的转换方式？

```
void ConvertGreyToRgb32Assembler(__m128i* Source, __m128i* Destination, unsigned int Count) {
    static unsigned int __declspec(align(64)) Masks[] = {
        0x80000000, 0x80010101, 0x80020202, 0x80030303,
        0x80040404, 0x80050505, 0x80060606, 0x80070707,
        0x80080808, 0x80090909, 0x800a0a0a, 0x800b0b0b,
        0x800c0c0c, 0x800d0d0d, 0x800e0e0e, 0x800f0f0f
    };

    __asm {
        mov esi, Source
        mov edi, Destination
        mov edx, Count
        xor ecx, ecx
        movdqa xmm4, xmmword ptr [Masks + 0]
        movdqa xmm5, xmmword ptr [Masks + 16]
        movdqa xmm6, xmmword ptr [Masks + 32]
        movdqa xmm7, xmmword ptr [Masks + 48]
l1:
        movdqu xmm0, xmmword ptr [esi + ecx]
        movdqa xmm1, xmm0
        movdqa xmm2, xmm0
        movdqa xmm3, xmm0
        pshufb xmm0, xmm4
        pshufb xmm1, xmm5
        pshufb xmm2, xmm6
        pshufb xmm3, xmm7
        movntdq [edi + 0], xmm0
        movntdq [edi + 16], xmm1
        movntdq [edi + 32], xmm2
        movntdq [edi + 48], xmm3
        add edi, 64
        add ecx, 16
        cmp ecx, edx
        jb l1
    }
} 
```

还有另一种使用几个 PUNPCKLBW 和 PUNPCKHBW 的方法，但这似乎有点慢。

**更新：**这是基本的非优化算法：

```
BGRA* Destination = ...
unsigned char* Source ...
for (unsigned int i = 0; i < Size; i++) {
    Destination[i].Blue = Source[i];
    Destination[i].Green = Source[i];
    Destination[i].Red = Source[i]; 
} 
```

**PS：**我还尝试将 C 代码与 MS VS2008 SSE 编译器内在函数一起使用。事实证明，编译器产生了大量不必要的内存移动，导致代码比纯汇编慢 10-20%。

**更新 2：**这是仅使用内部函数的相同代码。

```
void ConvertGreyToRgb32Assembler(__m128i* Source, __m128i* Destination, unsigned int Count) {
    static const unsigned int __declspec(align(64)) Masks[] = {
        0x80000000, 0x80010101, 0x80020202, 0x80030303,
        0x80040404, 0x80050505, 0x80060606, 0x80070707,
        0x80080808, 0x80090909, 0x800a0a0a, 0x800b0b0b,
        0x800c0c0c, 0x800d0d0d, 0x800e0e0e, 0x800f0f0f
    };

    register __m128i m0 = _mm_load_si128((__m128i*) (Masks + 0));
    register __m128i m1 = _mm_load_si128((__m128i*) (Masks + 4));
    register __m128i m2 = _mm_load_si128((__m128i*) (Masks + 8));
    register __m128i m3 = _mm_load_si128((__m128i*) (Masks + 12));

    for (unsigned int i = 0; i < Count / 16; i++) {
        __m128i r0 = _mm_load_si128(Source + i);

        _mm_stream_si128(Destination + (i * 4) + 0, _mm_shuffle_epi8(r0, m0));
        _mm_stream_si128(Destination + (i * 4) + 1, _mm_shuffle_epi8(r0, m1));
        _mm_stream_si128(Destination + (i * 4) + 2, _mm_shuffle_epi8(r0, m2));
        _mm_stream_si128(Destination + (i * 4) + 3, _mm_shuffle_epi8(r0, m3));
    }
} 
```

**更新3：**这是编译器生成的代码（美化）（Visual Studio 2012，所有优化）：

```
 push ebp 
    mov ebp, esp 
    mov edx, dword ptr [ebp+8]
    movdqa xmm1, xmmword ptr ds:[Masks + 0]
    movdqa xmm2, xmmword ptr ds:[Masks + 16]
    movdqa xmm3, xmmword ptr ds:[Masks + 32]
    movdqa xmm4, xmmword ptr ds:[Masks + 48]
    push esi 
    test ecx, ecx 
    je l2
    lea esi, [ecx-1] 
    shr esi, 4 
    inc esi
l1:
    mov ecx, edx 
    movdqu xmm0, xmmword ptr [ecx] 
    mov ecx, eax 
    movdqa xmm5, xmm0 
    pshufb xmm5, xmm1 
    movdqa xmmword ptr [ecx], xmm5 
    movdqa xmm5, xmm0 
    pshufb xmm5, xmm2 
    movdqa xmmword ptr [eax+10h], xmm5 
    movdqa xmm5, xmm0
    pshufb xmm5, xmm3
    movdqa xmmword ptr [eax+20h], xmm5 
    lea ecx, [eax+30h]
    add edx, 10h 
    add eax, 40h 
    dec esi 
    pshufb xmm0, xmm4 
    movdqa xmmword ptr [ecx], xmm0 
    jne l1
l2:
    pop esi
    pop ebp
    ret 
```

似乎交错`movdqa`与`pshufb`更快一些。

**更新 4：**这似乎是最佳的手动优化代码：

```
 __asm {
        mov esi, Source
        mov edi, Destination
        mov ecx, Count
        movdqu xmm0, xmmword ptr [esi]
        movdqa xmm4, xmmword ptr [Masks + 0]
        movdqa xmm5, xmmword ptr [Masks + 16]
        movdqa xmm6, xmmword ptr [Masks + 32]
        movdqa xmm7, xmmword ptr [Masks + 48]
l1:
        dec ecx
        lea edi, [ edi + 64 ]
        lea esi, [ esi + 16 ]
        movdqa xmm1, xmm0
        movdqa xmm2, xmm0
        movdqa xmm3, xmm0
        pshufb xmm0, xmm4
        movdqa [edi - 64], xmm0
        pshufb xmm1, xmm5
        movdqa [edi - 48], xmm1
        pshufb xmm2, xmm6
        movdqa [edi - 32], xmm2
        pshufb xmm3, xmm7
        movdqa [edi - 16], xmm3
        movdqu xmm0, xmmword ptr [esi]
        ja l1
    } 
```

**更新 5：**此转换算法使用`punpck`指令。但是，此转换例程比使用掩码和`pushfb`.

```
for (unsigned int i = 0; i < Count; i += 16) {
    register __m128i r0 = _mm_load_si128(Source++);
    register __m128i r1 = _mm_unpackhi_epi8(r0, r0);
    register __m128i r2 = _mm_unpacklo_epi8(r0, r0);
    register __m128i r3 = _mm_unpackhi_epi8(r1, r1);
    register __m128i r4 = _mm_unpacklo_epi8(r1, r1);
    register __m128i r5 = _mm_unpackhi_epi8(r2, r2);
    register __m128i r6 = _mm_unpacklo_epi8(r2, r2);

    _mm_store_si128(Destination++, r6);
    _mm_store_si128(Destination++, r5);
    _mm_store_si128(Destination++, r4);
    _mm_store_si128(Destination++, r3);
} 
```

**更新 6：**为了完整起见，这是从 32 位转换回 8 位灰度图像的逆方法。

```
static void ConvertRgb32ToGrey(const __m128i* Source, __m128i* Destination, unsigned int Count) {
    static const unsigned char __declspec(align(64)) Masks[] = {
        0x00, 0x04, 0x08, 0x0c, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
        0x80, 0x80, 0x80, 0x80, 0x00, 0x04, 0x08, 0x0c, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
        0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x04, 0x08, 0x0c, 0x80, 0x80, 0x80, 0x80,
        0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x04, 0x08, 0x0c,
    };

    register __m128i m0 = _mm_load_si128((__m128i*) (Masks + 0));
    register __m128i m1 = _mm_load_si128((__m128i*) (Masks + 16));
    register __m128i m2 = _mm_load_si128((__m128i*) (Masks + 32));
    register __m128i m3 = _mm_load_si128((__m128i*) (Masks + 48));

    for (unsigned int i = 0; i < Count / 64; i++) {
        __m128i a = _mm_load_si128(Source + (i * 4) + 0);
        __m128i b = _mm_load_si128(Source + (i * 4) + 1);
        __m128i c = _mm_load_si128(Source + (i * 4) + 2);
        __m128i d = _mm_load_si128(Source + (i * 4) + 3);

        a = _mm_shuffle_epi8(a, m0);
        b = _mm_shuffle_epi8(b, m1);
        c = _mm_shuffle_epi8(c, m2);
        d = _mm_shuffle_epi8(d, m3);

        __m128i e = _mm_or_si128(a, b);
        __m128i f = _mm_or_si128(c, d);
        __m128i g = _mm_or_si128(e, f);

        _mm_stream_si128(Destination + i, g);

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:29:51.197

会尝试：

```
    __asm {
        mov esi, 来源
        mov edi, 目的地
        mov ecx, 计数
        movdqu xmm0, xmmword ptr [esi]
        movdqa xmm4, xmmword ptr [掩码 + 0]
        movdqa xmm5, xmmword ptr [掩码 + 16]
        movdqa xmm6, xmmword ptr [掩码 + 32]
        movdqa xmm7, xmmword ptr [掩码 + 48]
l1：
        十二月
        lea edi, [ edi + 64 ]
        莉亚 esi，[ esi + 16 ]
        movdqa xmm1, xmm0
        movdqa xmm2, xmm0
        movdqa xmm3, xmm0
        pshufb xmm0, xmm4
        pshufb xmm1, xmm5
        pshufb xmm2, xmm6
        pshufb xmm3, xmm7
        movntdq [edi - 64], xmm0
        movntdq [edi - 48], xmm1
        movntdq [edi - 32], xmm2
        movntdq [edi - 16], xmm3
        movdqu xmm0, xmmword ptr [esi]
        ja l1
    }

```

虽然还没有对它进行基准测试；这些变化背后的假设：

1.  延迟可以在`movdqu xmm0,...`循环中稍微隐藏一些（您的代码的负载`xmm0`直接跟在使用该寄存器中的值的指令之后）
2.  `add`两个 regs 上的ops`cmp`并不是真的都是必要的；可以使用地址生成 ( ) 和/`lea`的隐式零测试。这样，就不会因为//上的操作而导致依赖关系，因为循环中唯一的 ALU 操作正在递减循环计数器。`dec``ja``EFLAGS``ecx``esi``edi`

最后，在任何情况下这都可能是加载/存储绑定，因此算术是“免费游戏”；因此，即使有给定的论点，我也预计不会有什么不同。

如果输入很大，那么去掉“未对齐的头/尾”是有意义的，即为第一个/最后一个`[0..15]`字节做一个 duff 的设备，主循环使用`movdqa`.

**编辑：**

通过（GCC 4.7.1）运行您的内在源代码`gcc -msse4.2 -O8 -c`会提供以下程序集：

```
部分.text的反汇编：

0000000000000000 <ConvertGreyToRgb32Assembler>:
   0: 85 d2 测试 edx,edx
   2: 74 76 je 7a <ConvertGreyToRgb32Assembler+0x7a>
   4: 66 0f 6f 2d 00 00 00 00 movdqa xmm5,XMMWORD PTR [rip+0x0]
        # c <ConvertGreyToRgb32Assembler+0xc>
   c: 48 89 f8 mov rax,rdi
   f: 66 0f 6f 25 00 00 00 00 movdqa xmm4,XMMWORD PTR [rip+0x0]
        # 17 <ConvertGreyToRgb32Assembler+0x17>
  17: 66 0f 6f 1d 00 00 00 00 movdqa xmm3,XMMWORD PTR [rip+0x0]
        # 1f <ConvertGreyToRgb32Assembler+0x1f>
  1f: 66 0f 6f 15 00 00 00 00 movdqa xmm2,XMMWORD PTR [rip+0x0]
        # 27 <ConvertGreyToRgb32Assembler+0x27>
  27: 66 0f 1f 84 00 00 00 00 00 nop WORD PTR [rax+rax*1+0x0]
  30: f3 0f 6f 00 movdqu xmm0,XMMWORD PTR [rax]
  34: 48 89 f1 mov rcx,rsi
  37: 48 83 c0 10 添加 rax,0x10
  3b: 66 0f 6f c8 movdqa xmm1,xmm0
  3f: 66 0f 38 00 cd pshufb xmm1,xmm5
  44: 66 0f e7 0e movntdq XMMWORD PTR [rsi],xmm1
  48: 66 0f 6f c8 movdqa xmm1,xmm0
  4c: 66 0f 38 00 cc pshufb xmm1,xmm4
  51: 66 0f e7 4e 10 movntdq XMMWORD PTR [rsi+0x10],xmm1
  56: 66 0f 6f c8 movdqa xmm1,xmm0
  5a: 66 0f 38 00 c2 pshufb xmm0,xm​​m2
  5f: 66 0f 38 00 cb pshufb xmm1,xmm3
  64: 66 0f e7 4e 20 movntdq XMMWORD PTR [rsi+0x20],xmm1
  69: 66 0f e7 41 30 movntdq XMMWORD PTR [rcx+0x30],xmm0
  6e: 89 c1 mov ecx,eax
  70: 29 f9 子 ecx,edi
  72: 48 83 c6 40 添加 rsi,0x40
  76: 39 ca cmp edx,ecx
  78: 77 b6 ja 30 <ConvertGreyToRgb32Assembler+0x30>
  7a: f3 c3 repz ret
```

这让我非常强烈地想起了你最初的汇编代码。如果 MSVC 创建的东西比这更糟糕，我会说这是您使用的编译器（版本）中的错误/限制。

# php - Magento - 全局消息从购物车页面消失，而是显示在 CMS 页面上

> ID：12004441
> 
> 赞同：2
> 
> 时间：2012-08-17T10:56:25.153
> 
> 标签：php, magento

所以在过去的几天里，在 Magento CE 的开发安装中出现了一个奇怪的错误。

全局消息（例如，将产品添加到购物车时）已从购物车页面中消失（尽管代码在模板中，并且在上周工作）并且现在显示在 CMS 页面和主页上（再次，上周情况并非如此，我已确保代码不在模板中）

我在购物车模板中尝试显示消息的代码：

```
// This code was in the file originally, worked, but no its broken
<?php echo $this->getMessagesBlock()->getGroupedHtml() ?>

// Added this in today to see if it worked, no dice
<?php echo $this->getChildHtml('global_messages') ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:54:21.447

消息出现在主页和 cms 页面上的原因是 Magento 会“保留”所有全局消息，直到它有机会将它们吐出给用户。

因此，由于您没有在此模板上输出它，它会在第一个机会（CMS 页面或主页）输出它。

您需要吐出消息的代码是：

```
Mage::app()->getLayout()->getMessagesBlock()->getMessages()->getGroupedHtml(); 
```

希望这会有所帮助。

逾越节

# symfony - 在另一个函数中使用模板

> ID：12004443
> 
> 赞同：0
> 
> 时间：2012-08-17T10:56:38.880
> 
> 标签：symfony

我创建了一个函数文件名

```
<?php

use Ens\NewBundle\Controller\Services\MyMailers as MyMailers;

    function NotificationOnSignUp($z)
    {
        $x=new MyMailers;
    $x->setToloc($z['to']);
    $x->setFromloc('ucerturohit@gmail.com');
    $x->setSubject('Wonderful world');
    $x->setBody('Hello world');

    $z=$x->mail();
      if($z==1)
       $name='success';
      else
       $name='failed';

        return $this->render('EnsNewBundle:Email:ind.html.twig',array('name'=>$name));
//   return $z;  

} 
```

此文件不在控制器中，但我想在此文件中呈现我的树枝文件，或者我想将此树枝文件设置为邮件正文。我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:03:30.147

创建[一个服务](http://symfony.com/doc/master/book/service_container.html)，将`templating`服务注入其中并使用它来呈现模板。

# jsp - response.sendredirect后如何保留文本框值

> ID：12004446
> 
> 赞同：0
> 
> 时间：2012-08-17T10:57:01.193
> 
> 标签：jsp

我正在尝试创建一个搜索过滤器，我将我的表单从一个 jsp 页面发布到一个 servlet，它包含文本框和下拉列表，我在同一个 jsp 页面上显示搜索结果，但我想保留我的文本中的值框和在 response.sendRedirect 到该 jsp 页面之后在下拉列表中选择的值。请帮助我只是一个java初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:15:25.477

我认为比使用标准表单提交和 response.sendRedirect 组合进行搜索并在同一页面上显示结果更好的解决方案是使用 AJAX 进行表单提交。AJAX 代表异步 Javascript 和 XML，因此要求您可以使用 javascript。网上有很多教程解释了如何进行基于 AJAX 的请求，而且使用 jQuery 之类的东西更容易。

话虽如此，通过重定向保留查询参数的唯一方法是将它们存储在请求之外。为您的问题执行此操作的最简单且可能是最好的方法是使用会话。下面是一个关于其基本用法的简短示例：

```
String myValue = "myValue";
HttpSession session = request.getSession();
session.setAttribute("myParameter", myValue);
String sameValue = session.getAttribute("myParameter"); 
```

# ruby-on-rails - 在 AWS 上部署 Rails 项目

> ID：12004447
> 
> 赞同：0
> 
> 时间：2012-08-17T10:57:01.853
> 
> 标签：ruby-on-rails, amazon-web-services

如何将我的 Ruby on Rails 项目部署到 EC2？我有一个 postgres 数据库，目前使用 Heroku，但我现在需要转移到 AWS。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:42:01.370

谷歌搜索它可能会有所帮助;o）

[https://www.google.fr/search?q=deploy+rails+on+EC2](https://www.google.fr/search?q=deploy+rails+on+EC2)

然后你有一个非常好的railscast，详细说明了使用橡胶宝石的步骤。

[http://railscasts.com/episodes/347-rubber-and-amazon-ec2/](http://railscasts.com/episodes/347-rubber-and-amazon-ec2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:01:34.603

我的偏好是默认的 AWS linux，然后使用一些基本库启动它：

```
sudo yum update
sudo yum groupinstall -y "Development Tools"
sudo yum groupinstall -y "Development Libraries"
sudo yum install -y httpd httpd-devel apr-devel libcurl-devel libxslt-devel libcurl-devel openssl-devel mysql mysql-devel ImageMagick ImageMagick-devel sqlite-devel
\curl -L https://get.rvm.io | bash -s stable --rails 
```

git 将您的 Rails 应用程序克隆到您的目录

捆绑安装--未经测试

然后不要忘记增加你的限制（如果你做了任何重要的文件 io）

将此添加到 /etc/security/limits.conf

```
root    soft  nofile   65535
root    hard  nofile   65535
*       soft  nofile   65535
*       hard  nofile   65535 
```

然后安装乘客或类似的东西并让它使用rvm 1.9.3。

# json - 未在 node.js 中解析的 JSON 数据在控制台中显示未定义

> ID：12004448
> 
> 赞同：1
> 
> 时间：2012-08-17T10:57:05.833
> 
> 标签：json, node.js, jquery, http-headers

未在 node.js 中解析的 JSON 数据在控制台中显示未定义..

这是HTML代码：

```
var jsonObjects = [{id:1, name:"amit"}];
jQuery.ajax({
      url: 'http://localhost:8081',
      type: "POST",
      data: {"id":"1", "name":"amit"},
      dataType: "json",
     success: function(result) {
    alert("done")
      }
}); 
```

这是Nodejs代码：

```
http.createServer(function (request, response)
{
response.writeHead(200, {"Content-Type":"text/plain"});
var urlObj = JSON.stringify(response.data, true);
console.log(urlObj)
response.end();
}).listen(8081); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:20:45.577

尝试使用 GET 方法而不是 Post。尝试这个

```
var jsonObjects = [{id:1, name:"amit"}];

$.ajax({
type: 'GET',
url: 'http://localhost:8081',
data: {
     jsonData: JSON.stringify(jsonObjects)
},
dataType: 'json',
complete: function(validationResponse) {
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:08:56.627

数据将保存在请求中，而不是来自客户端请求的响应。

如果您使用 express 来创建您的 http 服务器，您还需要告诉它使用 bodyParser 中间件。

# php - 单选按钮发布多个输入字段的数据

> ID：12004452
> 
> 赞同：0
> 
> 时间：2012-08-17T10:57:17.440
> 
> 标签：php, html, forms, post, radio-button

我的 PHP 页面中有一个表单，它是通过数组循环创建的。

```
echo '<form method="POST" name="add_to_cart_form">
        <div id="Product_add_sizes">
           <table border="0" cellpadding="2" class="product_txt_font" align="center">
              <input type="hidden" name="product_id" value="'.$arr_get_products[$c]['id'].'">';

                   for ($d = 0; $d < count($arr_get_product_details); $d++)
                   {
                      echo '<tr>
                              <td>
                                 <input type="radio" name="size[]" value="'.$arr_get_product_details[$d]['size'].'">
                              </td>
                              <td>
                                 <input class="qty" type="text" size="3" name="amount" value="1">
                              </td>
                            </tr>';
                   }

     echo '</table>
          <input type="submit" name="add_to_chart" value="Add Product" />
        </div>
      </form>'; 
```

现在，当我发布此表单时，我正在寻找一种方法来获取属于所选单选按钮的 qty 输入。我只需要所选单选按钮行中的数据。不需要其他数据，因为我想将此产品添加到购物车数组中。

```
if (isset($_POST['add_to_chart']))
{
    $product_id = $_POST['product_id'];
    $size = $_POST['size'][0];
    $qty = $_POST['amount'];
} 
```

发布页面时，我知道`size[]` 数组需要什么大小，但我无法获得与所选单选按钮匹配的相关 qty 值。

我试图通过将 qty 设为数组来将其视为与单选按钮相同的方式，`qty[]`但这将返回所有值。

我搜索了 SO 并用谷歌搜索了一堆，但没有找到一个像样的答案，但在我看来，这已经被大量使用了。请让我知道我在这里缺少什么。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:03:38.990

改变

```
<input class="qty" type="text" size="3" name="amount" value="1"> 
```

至

```
<input class="qty" type="text" size="3" name="amount[]" value="1"> 
```

然后你将有 2 个大小相同的数组。

```
<?php
    $size = $_POST['size'][0];
    $amount = $_POST['amount'][$size];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:02:21.067

单选按钮都应该使用相同的名称。仅提交选定的单选按钮值：

```
<input type="radio" name="Radiosize" value="'.$arr_get_product_details[$d]['size'].'"> 
```

然后：

```
$size = $_POST['Radiosize']; 
```

无需将其视为一个数组 - 它不会作为一个提交。单选按钮不像表单处理中的复选框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:09:47.577

表格代码：

```
 <input type="radio" name="size" value="'.$arr_get_product_details[$d]['size'].'">
    <input class="qty" type="text" size="3" name="amount['.$arr_get_product_details[$d]['size'].']" value="1"> 
```

然后你就会有大小的价值。以及带有大小键的数量数组。

```
 $size   = $_POST['size'];
    $amount = $_POST['amount'][$size]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:42:20.030

我通过执行以下操作解决了这个问题。

上面的人都让我走上了正轨，没有他们就不可能做到！

改变了

```
<input type="radio" name="size[]" value="'.$arr_get_product_details[$d]['size'].'">
<input class="qty" type="text" size="3" name="amount" value="1"> 
```

至

```
<input type="radio" name="size['.$d.']" value="'.$arr_get_product_details[$d]['size'].'">
<input class="qty" type="text" size="3" name="amount['.$d.']" value="1"> 
```

也变了

```
if (isset($_POST['add_to_chart']))
{
    $product_id = $_POST['product_id'];
    $size = $_POST['size'][0];
    $qty = $_POST['amount'];
} 
```

对此

```
if (isset($_POST['add_to_chart']))
{
    // Array ID key
    $key = key($_POST['size']);

    $product_id = $_POST['product_id'];
    $size = $_POST['size'][$key];
    $qty = $_POST['amount'][$key];
} 
```

奇迹般有效！谢谢大家非常有帮助的评论！

# android - 两个 ListFragments 同步

> ID：12004454
> 
> 赞同：0
> 
> 时间：2012-08-17T10:57:21.933
> 
> 标签：android, android-listview, android-fragments

我`ListFragment`的屏幕上有两个 s。左侧是一个文件结构 - 文件夹。在右侧有一个`ListFragment`，该列表的每个元素都是一段文本，顶部有一个标题。

现在，左边的文件结构是所有段落标题的有效副本，但考虑到层次结构，所以它不是平面的。

现在，当我单击左侧的文件夹时，我希望右侧的列表滚动到/显示以该文件夹名称为标题的段落。我可以尝试使用`setSelection(POSITION);`方法，但是我怎么才能找到该死的位置呢？左侧列表中的 POSITION 不等于右侧列表中的 POSITION。

亲爱的大家，对这个有什么想法吗？这更像是一个设计问题。

我会非常感谢任何帮助xxx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:44:31.387

Android 开发者指南指出：

> 所有 Fragment 到 Fragment 的通信都是通过关联的 Activity 完成的。两个 Fragment 永远不应该直接通信。

**情况**

FragmentA 中的 ListA 和 FragmentB 中的 ListB。单击 ListA 中的项目应将 ListB 滚动到正确的位置。

**（可能的）解决方案**

*   Fragment 之间的通信由 FragmentManager 完成。

*   为您的两个列表使用 ArrayAdapter。这意味着 ArrayList 将与构造函数一起作为数据源提供。我们称它们为 ArrayListA 和 ArrayListB

*   当您单击 ListA 中的项目时，您必须在 ArrayListB 中搜索标题并返回位置。一旦有了位置，就可以设置 ListB 的位置。

# java - 根据 int 数组显示 imageview

> ID：12004456
> 
> 赞同：0
> 
> 时间：2012-08-17T10:57:26.430
> 
> 标签：java, android

我正在尝试生成 5 个随机骰子，然后向它们显示相应的骰子图像，但我不确定如何循环执行。

```
p1Dice1 = (ImageView) findViewById(R.id.ivDice1);
p1Dice2 = (ImageView) findViewById(R.id.ivDice2);
p1Dice3 = (ImageView) findViewById(R.id.ivDice3);
p1Dice4 = (ImageView) findViewById(R.id.ivDice4);
p1Dice5 = (ImageView) findViewById(R.id.ivDice5);    

for (int i = 0; i < 5; i++) {
diceArray[i] = randomDice.nextInt(6) + 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:01:17.233

我希望您通过 HashMap，它是您类型的最佳示例。

[http://www.java-samples.com/showtutorial.php?tutorialid=369](http://www.java-samples.com/showtutorial.php?tutorialid=369)

# database - 通过在DB表的单列中存储值来实现三种状态

> ID：12004459
> 
> 赞同：1
> 
> 时间：2012-08-17T10:57:38.277
> 
> 标签：database, data-modeling

我有网页中显示的产品列表。

每个产品都由数据库中的唯一产品 ID 标识。

[![](../Images/e723152806bac5c77c8bdbbcfffb28e3.png)](https://i.stack.imgur.com/8xrDt.gif)

最初，当页面加载时，它会在每个产品下显示为勾选和交叉（图 1）

一旦用户单击特定产品的刻度符号，我会将其显示为感兴趣（图 2）

当用户单击特定产品的十字符号时，我会将其显示为不感兴趣（图 3）

每次页面加载时，我都应该通过存储用户感兴趣的用户名和 productId 来加载用户最后选择的首选项。

当只有两种状态用户可能感兴趣或不感兴趣时​​，这仍然很简单，因为我会将所有感兴趣的 ProductaId 存储在 DB 中并使用它们来加载用户首选项。也就是说，我将为所有 ProductId 应用感兴趣的类对于所有不在数据库中的 Id，在 DB 和 NotInterested 类中。

现在第三种状态是用户从未接触过的状态——Image1。

我已经有一个如下所示的数据库表

```
  创建表用户首选项（
      用户 ID INT，
      感兴趣的_ProductsId VARCHAR(150)
  );

```

我将 Interested_ProductsId 存储为 CSV 产品 ID（即）5、75、2、15 都是产品 ID

现在我的问题是是否可以在 CSV 中实现第三个状态（Image1）。我只存储客户感兴趣的 ProductsId。如何实现客户不感兴趣的 ProductsId（Image3）并且客户从未点击过（Image1）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:00:38.277

是的，这是可能的：引入一个新列：

```
Type tinyint not null
CHECK (Type in (1, 2, 3)) 
```

并将类型定义为您的三种状态之一。

您可以将任意数据与连接表项相关联。您基本上以这种方式将它们提升为“实体”。

# javascript - 如何在 jquery 中使用 datePicker() 插件

> ID：12004460
> 
> 赞同：-2
> 
> 时间：2012-08-17T10:57:37.757
> 
> 标签：javascript, jquery

参考网站“

*   [http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerClickInput.html](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerClickInput.html)

“，我使用了 jquery 的 datePicker() 插件。但它对我不起作用！！我已经更新了我的编码

*   [http://jsfiddle.net/9L7kE/7/](http://jsfiddle.net/9L7kE/7/)

. 请帮忙！！！！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:04:03.470

在 js fiddle 你有：

```
$(document).ready(function(){
    $(function() {
        $( "#date_picker" ).datePicker({clickInput:true});
        });
}); 
```

​</p>

**$(function_to_tun)**与**$(document).ready(function_to_tun)相同**

在事件触发后添加一个 onready 事件不会再次触发它，因此您只需要使用 2 个中的一个

```
$(document).ready(function(){
    $( "#date_picker" ).datePicker({clickInput:true});
}); 
```

或者

```
$(function() {
    $( "#date_picker" ).datePicker({clickInput:true});
}); 
```

并且不要忘记添加库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:16:56.207

使用这个。它非常易于使用。

[http://keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)

# git - Git Push Error 并非所有的 refs 都已被推送

> ID：12004461
> 
> 赞同：3
> 
> 时间：2012-08-17T10:57:38.847
> 
> 标签：git, git-push

我正在尝试将更改从我的开发克隆推送到我的源存储库我已经尝试清理源并获取然后推送......这些都没有奏效。

**错误：**

![智能输出](../Images/13d75af82dfe6c346bd66ea4de261fcc.png)

我的**.git 配置**看起来像：

```
[core]
      repositoryformatversion = 0
      filemode = false
      bare = false
      logallrefupdates = true
      symlinks = false
      ignorecase = true
      hideDotFiles = dotGitOnly
[remote "origin"]
      fetch = +refs/heads/*:refs/remotes/origin/*
      url = Z:\\_sandbox\\jacqui\\GitTest
[branch "HEAD"]
      remote = origin
      merge = refs/heads/HEAD
[branch "Released_V1"]
      remote = origin
      merge = refs/heads/Released_V1 
```

尽管它说不是所有的 refs 都被推送了，但我看不到任何被推送的

我已经阅读了很多关于用户权限是一个问题的文章，但我是唯一一个在这个项目上工作的人，而且两个存储库都在同一个驱动器上，那么接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:04:16.747

# jquery - 动画两个具有不同持续时间的 div

> ID：12004464
> 
> 赞同：1
> 
> 时间：2012-08-17T10:57:48.203
> 
> 标签：jquery

我想做一个模拟两名运动员互相比赛。我有他们的三个分段时间和两个过渡时间。

所以，比赛将是：分段 1，转换 1，分段 2，转换 2，分段 3

我试着用这种方式模拟它：

```
$(window).load(function(){
jQuery("#box1").animate({ width: "100%" }, {duration: 100}).animate({ width: "100%" }, 10>).animate({ width: "100%" }, 1000%>).animate({ width: "100%" }, 100%>).animate({ width: "100%" }, 50);
jQuery("#box2").animate({ width: "100%" }, {duration: 50}).animate({ width: "100%" }, 10).animate({ width: "100%" }, 2000).animate({ width: "100%" }, 100).animate({ width: "100%" }, 500);
}); 
```

如果 Athlet 1 (box1) 在所有分段中的速度都比它工作得快。但在上面的例子中，运动员 2 应该在第一个分段中更快，在第二个分段中更慢。但这不起作用。

HTML 代码：

```
<div id="box1">Athlet 1</div>
<div id="box2">Athlet 2</div> 
```

你能帮我么？

可以在此处找到德语示例：[http ://www.trinews.at/trimag/index.asp?f=head2head&VID=703&athlet1=117252&athlet2=117256](http://www.trinews.at/trimag/index.asp?f=head2head&VID=703&athlet1=117252&athlet2=117256)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:33:15.627

*检查这个小提琴： http:*
[//jsfiddle.net/ML3h6/](http://jsfiddle.net/ML3h6/)
不是你需要的吗？

或者这里是您可以在几秒钟内通过时间来运行的示例：http `race()`:
[//jsfiddle.net/nUBqk/](http://jsfiddle.net/nUBqk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:00:18.477

从@LLAlive 所做的，我已经开始并试图让它作为你的例子。

这是我到目前为止想出的

[http://jsfiddle.net/ML3h6/6/](http://jsfiddle.net/ML3h6/6/)

它将输入拆分为 3 个拆分，并在将输入转换为秒后根据输入进行动画处理。然后动画将分成3个分割，结果符合预期。

前任：

玩家1：5秒==> 6秒==> 7秒= **18秒**

玩家2：8秒==> 5秒==> 5秒= **18秒**

如果您尝试了这些数字，您会发现它们按预期工作，并且两者将在相同的总时间内完成，但会根据当前的拆分而有所不同。

试一试，让我知道这是否是你想要的。

再次感谢你“ **LLAlive** ”

* ***更新：**我已经更改了“Easing”以与您的示例相匹配，现在它作为真正运行的 div 更加自然：）查看：http: [//jsfiddle.net/ML3h6/7/](http://jsfiddle.net/ML3h6/7/)

# android - Android 正在跳过 startActivityForResult，抛出异常

> ID：12004466
> 
> 赞同：1
> 
> 时间：2012-08-17T10:57:52.470
> 
> 标签：android, android-intent, android-context

我的 Android 开发遇到了一个令人恼火的问题——每当我调用时`startActivityForResult(this, Notepadv3.class);`，我的应用程序都会直接跳过它，不会启动新的活动，也不会从中返回任何结果。就好像代码不存在一样！

当我更改`this`为`mContext`（我已在课程开头定义`mContext`）`Context mContext;`时，应用程序崩溃并带有`NullPointerException`.

我在不同的类中使用了完全相同的代码布局，它运行完美。我已经确认我在 Manifest 中正确声明了活动。

我花了几个小时在 stackoverflow 上搜索答案，以及查找无数关于如何执行此特定活动的示例，但无济于事。我正在学习如何编写 Android 应用程序，因此我使用 Google 的记事本教程作为我的应用程序的基础。感谢您提前提供的非常感谢的帮助！

代码和堆栈跟踪如下：

NoteEdit.java：（为了便于阅读，我略读了一些不相关的代码）

 `````
public class NoteEdit extends Activity implements OnClickListener {

Context mContext;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mDbHelper = new NotesDbAdapter(this);
    mDbHelper.open();

    setContentView(R.layout.note_edit);
    setTitle(R.string.edit_item);

    }

@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == REQUEST_BARCODE) {
        if (resultCode == RESULT_OK) {
            barcode = (intent.getStringExtra("SCAN_RESULT"));
            new updateBarcodeField().execute("");
        } else if (resultCode == RESULT_CANCELED) {
        }
    }else if (requestCode == REQUEST_NEW) {
        System.out.println("REQUEST_NEW onActivityResult().");
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    saveState();
    outState.putSerializable(NotesDbAdapter.KEY_ROWID, mRowId);
}

@Override
protected void onPause() {
    super.onPause();
    saveState();
}

private void saveState(){
    System.out.println("saveState()");
    doorCall();
    mDbHelper.open();
    String title = mTitleText.getText().toString();
    String barcode = mBarcodeText.getText().toString();
    String price = mPriceText.getText().toString();
    Intent requestNew = new Intent(mContext, Notepadv3.class);

    if (returnCode == 1){
        System.out.println("returnCode is 1\. Calling validateFields()...");
        String errors = validateFields(title);
        if (errors.length() > 0) {
            Toast.makeText(this, "Oops! Need a title!", duration).show();
            System.out.println("Calling Notepadv3...");
            startActivityForResult(requestNew, REQUEST_NEW);
        }
    }

    if (returnCode == 2){
        System.out.println("returnCode == 2 - Cancelling activity");

    }else{
        if (title.matches("")){
            System.out.println("Variable is null. Returning...");
            doorCall();
            mDbHelper.close();
            return;
        }else{
            System.out.println("Checking mRowId for null");
            if (mRowId == null) {

                Toast.makeText(this, "Success, product saved successfully", duration).show();
                System.out.println("Switching activity to 'NotesDbAdapter'");
                long id = mDbHelper.createNote(title, barcode, price);
                mRowId = id;
            }else{
                System.out.println("mRowId is not null. Calling updateNote");
                mDbHelper.updateNote(mRowId, title, barcode, price);
            }
        }
    }
    System.out.println("saveState() Finished");
    if (doorCall()==true){
        System.out.println("Database is Open");
    }else{
        System.out.println("Database is Closed");
    }
}

} 
```

Notepadv3.java:

```
public class Notepadv3 extends ListActivity implements OnClickListener {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.notes_list);
    mDbHelper = new NotesDbAdapter(this);
    mDbHelper.open();

    mAddButton = (Button) findViewById(R.id.addButton);
    mAddButton.setOnClickListener(this);
    mScanButton = (Button) findViewById(R.id.scanButtonList);
    mScanButton.setOnClickListener(this);

    fillData();
    registerForContextMenu(getListView());
}

@SuppressWarnings("deprecation")
private void fillData() {
    Cursor notesCursor = mDbHelper.fetchAllNotes();
    startManagingCursor(notesCursor);

    // Create an array to specify the fields we want to display in the list (only TITLE)
    String[] from = new String[]{NotesDbAdapter.KEY_TITLE, NotesDbAdapter.KEY_PRICE};

    // and an array of the fields we want to bind those fields to (in this case just text1)
    int[] to = new int[]{R.id.text1, R.id.text2};

    // Now create a simple cursor adapter and set it to display
    SimpleCursorAdapter notes = 
            new SimpleCursorAdapter(this, R.layout.notes_row, notesCursor, from, to);
    setListAdapter(notes);        
}

public void onClick(View v) {
    switch (v.getId()) {
    case R.id.addButton:
        createNote();
        break;

    case R.id.scanButtonList:
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("SCAN_MODE", "ONE_D_MODE");
        startActivityForResult(intent, REQUEST_BARCODE);        

    }
}
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add(0, DELETE_ID, 0, R.string.menu_delete);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    switch(item.getItemId()) {
    case DELETE_ID:
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        mDbHelper.deleteNote(info.id);
        fillData();
        return true;
    }
    return super.onContextItemSelected(item);
}

public void createNote() {
    Intent i = new Intent(this, NoteEdit.class);
    startActivityForResult(i, ACTIVITY_CREATE);
}

private void viewNote() {
    System.out.println("viewNote(). Starting NoteEdit...");
    Intent i = new Intent(this, NoteView.class);
    i.putExtra(NotesDbAdapter.KEY_BARCODE, barcode);
    startActivityForResult(i, ACTIVITY_EDIT);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, NoteEdit.class);
    i.putExtra(NotesDbAdapter.KEY_ROWID, id);
    startActivityForResult(i, ACTIVITY_EDIT);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
    System.out.println("Notepadv3\. requestCode is " + requestCode + ", and resultCode is " + resultCode);
    if (requestCode == REQUEST_BARCODE) {
        if (resultCode == RESULT_OK) {
            barcode = (intent.getStringExtra("SCAN_RESULT"));
            System.out.println("Calling viewNote()...");
            viewNote();
        } else if (resultCode == RESULT_CANCELED) {
        } else if (resultCode == RESULT_FIRST_USER) {
        }
    }else if (requestCode == REQUEST_NEW){
        System.out.println("Notepadv3\. requestCode is REQUEST_NEW. Calling createNote()...");
        createNote();
    }
    super.onActivityResult(requestCode, resultCode, intent);
    fillData();
}
} 
```

Stack trace:` 

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to pause activity {com.android.demo.notepad3/com.android.demo.notepad3.NoteEdit}: java.lang.NullPointerException
at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2706)
at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2662)
at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2640)
at android.app.ActivityThread.access$800(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at android.content.ComponentName.<init>(ComponentName.java:75)
at android.content.Intent.<init>(Intent.java:3148)
at com.android.demo.notepad3.NoteEdit.saveState(NoteEdit.java:206)
at com.android.demo.notepad3.NoteEdit.onPause(NoteEdit.java:187)
at android.app.Activity.performPause(Activity.java:4590)
at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1195)
at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2693) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:04:24.430

首先，如果你使用mContext，你应该在onCreate方法中初始化它：

```
mContext=getApplicationContext();
//I recommend using the application context for avoiding memory leaks 
```

不要从 onPause 方法启动 Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:42:44.260

我修好了它！！！

对于大多数正在寻找答案的人来说，这不是一个解决办法，但我希望我能指出你正确的方向。尽管我对 Android（和一般的 Java）还很陌生，但我仍然完全相信这种“跳过”代码实际上是一个错误。

然而！当我`saveState()`从另一个活动中调用时，我没有启动一个新的意图，该意图从一个单独的类中启动一个活动，然后从第一个意图所在的类中启动一个活动，我只是将其替换为`return;`. 是的-学习逻辑仍然很愚蠢，但确实如此。简单，优雅，解决方案（与之前存在的可怕代码相比，简单而优雅：P）`

# bash - bash - 可以“覆盖”测试 ([[)-builtin?

> ID：12004468
> 
> 赞同：0
> 
> 时间：2012-08-17T10:57:56.790
> 
> 标签：bash

是否可以覆盖 Bash 的内置测试？以便

```
[[ $1 = 'a' ]] 
```

不仅进行测试，还输出失败时预期的结果？就像是

```
echo "Expected $1 to be a.' 
```

**编辑**

我知道这很糟糕:-)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:36:28.620

测试表达式复合命令执行影响所有扩展的真正短路。

```
$ set -x
$ [[ 0 -gt x=1+1 || ++x -eq $(tee /dev/fd/3 <<<$x) && $(echo 'nope' >&3) ]] 3>&1
+ [[ 0 -gt x=1+1 ]]
++ tee /dev/fd/2
2
+ [[ ++x -eq 2 ]] 
```

所以是的，你*可以*在一个测试表达式中做任何事情。实际上，很少有测试产生副作用，并且几乎从未用于产生输出。

同样是的，保留字可以被覆盖。Bash 对 ksh 风格的函数定义比 POSIX 风格（仍然允许一些无效的名称）更宽松。

```
function [[ { [ "${@:1:${#@}-1}" ]; }; \[[ -a -o -a -o -a ]] || echo lulz 
```

* * *

又一个叉形炸弹。

```
if function function if function if if \function & then \if & fi && \if & then \function & fi && then \function fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:04:56.443

像这样的东西？

```
if [[ $1 == 'a' ]]; then
    echo "all right";
else
    echo 'Expected $1 to be "a"'
fi 
```

无论如何，如果您只期望一个答案，那么测试的意义何在？或者你的意思是为了调试目的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:09:31.677

```
[[ 'a' = 'a' ]] || echo "failed"
[[ 'b' = 'a' ]] || echo "failed"
failed 
```

# css - CSS 过渡持续时间的单位

> ID：12004480
> 
> 赞同：8
> 
> 时间：2012-08-17T10:58:35.403
> 
> 标签：css, css-transitions, css-animations

秒是`s`我可以在 CSS 过渡或动画中用于时间值的唯一单位。在规范中找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T19:49:09.997

您可以使用 s（秒）和 ms（毫秒）

**过渡持续时间属性**

> 句法
> 
> 过渡持续时间： [ , ] * 属性值
> 
> 一个或多个转换时间，以逗号分隔。
> 
> 时间
> 
> ```
> Floating-point number, followed by a time units designator (ms or s). 
> ```
> 
> 值和单位参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T11:03:40.710

`ms`你也可以使用毫秒

> 定义和使用
> 
> transition-duration 属性指定过渡效果需要多少秒 (s) 或毫秒 (ms) 才能完成。

[看看 w3schools](http://www.w3schools.com/cssref/css3_pr_transition-duration.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T14:04:57.063

转换中的持续时间和延迟属性用秒 (s) 或毫秒 (ms) 定义。

参考：[https ://kolosek.com/css-transition/](https://kolosek.com/css-transition/)

# ruby-on-rails - 拆分电子邮件 ID 并对其进行验证

> ID：12004485
> 
> 赞同：1
> 
> 时间：2012-08-17T10:59:03.603
> 
> 标签：ruby-on-rails, ruby, regex, string, split

我是 ruby​​ 新手，想问一下，如果我想验证电子邮件 ID 的格式 `x.y@xyz.com`是：- x 是 1 位或 2 位数字 y 是天、天、月、月、小时-- 除了这个@xyz.com 之外别无其他 -> 它只是 xyz.com

请为此提供一个逻辑

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:09:58.577

嗯...... RE 应该看起来像

```
^(\d|\d\d)\.(day|days|month|months|hour|hours)@xyz\.com 
```

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:37:30.280

您可以`validate_format_of`用于在 rails 中验证电子邮件。并且也可以对 ruby​​ 使用相同的正则表达式。

与 rails 一样，您可以在模型中编写：

```
format = /^(\d|\d\d).(hour|hours|day|days|month|months|year|years)@xyz.com/
validate_format_of :email, :with => format 
```

在上面给出的正则表达式中： `\d|\d\d`表示电子邮件应该从一位或两位整数开始，之后应该有一个点（。）然后`hour|hours|day|days|month|months|year|years`意味着在点之后，可以有小时、小时、天、天、月、月的任何值，年，年。在此之后@xyz.com 应该在电子邮件地址中。

一些有效的例子：

1.day@xyz.com

12.hours@xyz.com

4.months@xyz.com

1.year@xyz.com

# iphone - 在 iOS 上，为什么 iPhone 的 Launch Image 应该包含状态栏，而 iPad 的 Launch Image 不应该？

> ID：12004486
> 
> 赞同：8
> 
> 时间：2012-08-17T10:59:07.497
> 
> 标签：iphone, ios, ipad

Apple 人机界面指南 (HIG) 明确指出，对于 iPhone 启动图像，包括状态栏，但对于 iPad，不包括它。（请看问题末尾的图片）。（文件修订日期为 2012/3/07）。

所以我认为任何状态栏信息（运营商、时间、电池）都会由 Xcode 或 iPhone 本身自动裁剪，因此不会向用户显示。

但为什么 iPad 的不一致呢？一方面，Xcode 实际上可以接收一张图像，如果它看到它是 1024 x 768 的全尺寸，则裁剪掉状态栏区域。还有其他原因吗？比如 iPhone 或 iPad 启动一个应用程序时，状态栏总是显示在一个设备上，而另一台设备不总是显示，导致规则的差异？

* * *

引用：（显示为图像） ![在此处输入图像描述](../Images/2f01b6c3274bb3164c8f976a871a6907.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:08:36.877

在 iPhone/iPod 上，应用程序可以重叠状态栏。假设 iPad 有足够大的屏幕，应用程序不需要重叠状态栏。

# c# - GridTemplateColumn 中的访问控件 (Telerik)

> ID：12004492
> 
> 赞同：0
> 
> 时间：2012-08-17T10:59:20.263
> 
> 标签：c#, telerik, radgrid

是否可以以简单的方式访问 RadGrid 中 GridTemplateColumn 中的控件。我的解决方案适用于 RadGrids GridTemplateColumn 中每个组合框的单个回发，因此我需要单独访问它们。任何人都知道如何实现这一点？我尝试了 FindControl 方法，但我一直返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:44:07.873

```
<telerik:GridTemplateColumn HeaderText="Foobar">
     <ItemTemplate>
          <asp:DropDownList runat="server" ID="DropDownList1" AutoPostBack="true"
               OnSelectedIndexChanged="DropDownList1_OnSelectedIndexChanged">
               <asp:ListItem Text="First" Value="1" />
               <asp:ListItem Text="Second" Value="2" />
               <asp:ListItem Text="Third" Value="3" />
          </asp:DropDownList>
          <asp:HiddenField runat="server" ID="HiddenField1" />
     </ItemTemplate>
</telerik:GridTemplateColumn>

protected void DropDownList1_OnSelectedIndexChanged(object sender, EventArgs e)
{
    var gridDataItem  = ((Control)sender).BindingContainer as Telerik.Web.UI.GridDataItem;
    if (gridDataItem != null)
    {
        var hiddenField = gridDataItem.FindControl("HiddenField1") as HiddenField;
    }
} 
```

# html - 谷歌折线图中的图例图标宽度变化

> ID：12004498
> 
> 赞同：0
> 
> 时间：2012-08-17T10:59:50.727
> 
> 标签：html, css, google-visualization

我从这个位置使用了谷歌图表

`https://developers.google.com/chart/interactive/docs/gallery/linechart#Example`

![在此处输入图像描述](../Images/f97f8c4b9554c289a017c4322cce5805.png)

是否有可能更改图例图标的宽度和高度，即蓝色和红色矩形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:20:16.420

如文档中所示：

```
legend: {position: 'top', textStyle: {color: 'blue', fontSize: 16}}

legend.textStyle: {color: <string>, fontName: <string>, fontSize: <number>} 
```

是你要找的吗？

# objective-c - 通过 IKImage 视图预览图像

> ID：12004501
> 
> 赞同：0
> 
> 时间：2012-08-17T10:59:57.637
> 
> 标签：objective-c, cocoa, nstableview, nsfilemanager, ikimageview

我需要帮助，时间紧迫，我被阻止了。我有一个包含目录文件（图标、名称、大小、日期）的表格视图。Tha 表通过数组控制器填充。表格视图只显示图像文件和 pdf 文件。当我选择一行时，我想在表格下方的 IKImage 视图中预览内容。但我无法预览内容。你能帮我并给我一些关于如何预览它们以及如何使用 ikimage 视图的文档、教程或命令吗？我想 ikimage 视图是最好的解决方案。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:54:14.990

  我想您已经提出了解决方案，但推荐给其他可能来这里的人。
阅读[苹果示例](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/ImageKitProgrammingGuide/ImageViews/ImageViews.html#//apple_ref/doc/uid/TP40004907-CH4-SW9) ，它很容易上手。在您的情况下，您可以使用
`- (void)setImage:(CGImageRef)image imageProperties:(NSDictionary *)metaData`
文件属性可以作为字典对象进入的位置。
在苹果的示例中，您可以查看如何从文件路径获取 CGImageRef，或者您可以使用`setImageWithURL`.

# php - 使用嵌入式表单取消设置

> ID：12004502
> 
> 赞同：0
> 
> 时间：2012-08-17T10:59:58.800
> 
> 标签：php, symfony1, doctrine, symfony-1.4

我在我的 Form 课上：

```
public function configure()
{
        $emb = $this->getEmbeddedForms();
        foreach($emb as $key => $form)
        {
             unset($form['backup']);
        }
} 
```

但这不起作用 - 不是未设置。在 $emb 我有：

```
oneForm
twoForm 
```

在 oneForm 和 twoForm 我有小部件**备份**。我想用 getEmbeddedForms 取消设置。我无法在 oneForm.class 和 twoForm.class 中取消设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:57:27.057

您应该在`unset`.

```
public function configure()
{
  $emb = $this->getEmbeddedForms();

  foreach($emb as $key => $form)
  {
    unset($form['backup']);

    // re-embed the current form (it will override the previous one)
    $this->embedForm($key, $form);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:04:47.463

一点也不奇怪。您分配`$this->getEmbeddedForms()`局部变量的内容`$emb`；-))... 想想看。

所以：

```
<?php
// ...

public function configure() {
 foreach($this->getEmbeddedForms() as $key => &$form) {
  unset($form['backup']);
 }
}
?> 
```

# python - 有人可以解释一下这个代码的第二个版本是如何工作的吗？

> ID：12004503
> 
> 赞同：1
> 
> 时间：2012-08-17T11:00:00.173
> 
> 标签：python, oop, user-interface, constructor, superclass

我是 Python 的初学者，目前正在阅读我的书“绝对初学者的 Python 编程”的第 10/12 章。我了解 Python 中的 OOP，但由于一章（讨论了一些有关 OOP 的相关信息）是基于一个用于玩“纸牌”的程序，我不得不跳过该章的一部分（因为我不知道如何玩纸牌）和所以我错过了本书此时应该知道的重要信息。我这么说的原因是因为我需要一个简单的答案来回答我的问题，因为复杂的答案可能对我来说太难解释了。

但无论如何这是我的问题，我的书中有一段代码创建了一个简单的 GUI 程序（我完全理解），然后有一个我不理解的程序的面向对象版本（主要部分在 ' ## 的）。它包含一个叫做“超类构造函数”的东西，这完全让我感到困惑（我尝试对它进行一些研究，但它对我来说没有意义）。如果有人可以帮助向我解释第二版代码的工作原理（或提供有用的资源），那么我将不胜感激：

第一版代码：

```
from tkinter import *

# create a root window
root = Tk()
root.title("Lazy Buttons")
root.geometry("200x85")

app = Frame(root)
app.grid()

bttn1 = Button(app, text = "This is a button")
bttn1.grid()

root.mainloop() 
```

第二个版本：

```
from tkinter import *

class Application(Frame):

    def __init__(self, master): # Why is 'master' called?
        super(Application, self).__init__(master)    # ?
        self.grid()
        self.create_widgets()

    def create_widgets(self):
        self.bttn1 = Button(self, text = "This is a button")
        self.bttn1.grid()

root = Tk()
root.title("Lazy Buttons 2")
root.geometry("200x85")
app = Application(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:13:03.647

不要因为您不了解问题领域而跳过教程的某些部分——您不需要知道如何玩纸牌就可以了解纸牌游戏代码与程序*所做*的事情之间的关系。对于您的实际问题：

```
class Application(**Frame**): 
```

这将创建一个从类`Application`继承的类`Frame`。如果您不知道继承，您正在遵循的教程应该解释它，或者您可以尝试我刚刚搜索[的类和继承的介绍。](http://www.jesshamrick.com/2011/05/18/an-introduction-to-classes-and-inheritance-in-python/)

```
**def __init__(self, master): 
```

这将创建一个名为 的方法`__init__`。这是 Python 中的一种特殊方法，其行为类似于其他语言中的构造函数——本质上，每当`Application`创建 an 时，Python 将立即调用其`__init__`方法，然后将新对象返回给创建它的人。`master`只是一个参数，与任何其他函数的任何其他参数相同。

```
super(Application, self).__init__(master) 
```

这会调用超类的构造函数，让它初始化新对象。`super(Application, self)`弄清楚超类*是*什么（在这种情况下是`Frame`；在您最终会遇到的更复杂的情况下，这更难解决，并且`super`' 的魔法变得很重要）。

```
self.create_widgets()** 
```

这将调用`create_widgets`您在此下方定义的方法。之前的对象`.`作为第一个参数传递到方法中，`self`- 因此，这在调用您所在的方法的同一对象上调用不同的方法。

```
app = Application(root) 
```

这会创建一个`Application`- 通过调用类来创建对象，就像`list()`创建列表一样。您传入的参数`__init__`作为第二个参数传递（`Application`Python 在幕后创建的新参数作为第一个参数传递，`self`，如上）。Python 创建一个 new `Application`，为您调用它`__init__`，然后将新对象分配给名称“app”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:54:56.357

这里的“超级”部分只是为了正确调用基类（您继承的类）的构造函数。让我们考虑以下示例：

```
class Device():  # class representing some drawing device
    ...
    def fill(self, color)
        ...  # actual code for draw on this device

screen = Device()
WHITE_COLOR = (255, 255, 255)

class Window(object):
    def __init__(self, width, height):
        self.width  = width
        self.height = height

    def area(self):
        return self.width * self.height

class ColoredWindow(Window):
    def __init__(width, height, color):
        super(ColoredWindow, self).__init__(width, height)
        self.color = color

    def fill(self):
        screen.fill(self.width, self.height, self.color)

my_window = ColoredWindow(640, 480, WHITE_COLOR)
my_window.fill() 
```

这里的第一个类`Window`是一个通用窗口，它具有在构造函数中传递`width`的`height`属性。 `ColoredWindow`是 的子类`Window`，它具有附加属性`color`。当`ColoredWindow`被构造时，它需要以某种方式将参数传递给它的基`width`类。`height``Window`

这正是建筑`super(ColoredWindow, self).__init__(width, height)`的目的。第一部分，`super(ColoredWindow, self)`返回对基类的引用（`Window`在我们的例子中），第二部分，`__init__(width, height)`只是用正确的参数调用它的构造函数。

在你的例子`master`中没有被调用，它只是类`__init__`方法的参数`Application`。

# c - C: 什么时候使用栈分配数组，什么时候使用堆分配数组

> ID：12004506
> 
> 赞同：4
> 
> 时间：2012-08-17T11:00:13.083
> 
> 标签：c

我被告知不要使用堆栈分配的数组，因为堆栈是一种宝贵的资源。其他人向我建议，实际上使用堆栈分配的数组是完全可以的，只要数组相对较小。

我想有一个一般的经验法则：什么时候应该使用堆栈分配的数组？什么时候应该使用堆分配数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:07:01.307

虽然您的*所有*内存都是有限的，但即使在今天拥有大量 RAM 和虚拟内存的情况下，仍然存在限制。但是，它相当大，尤其是与堆栈相比，堆栈可以是从小型嵌入式系统上的几 kb 到 PC 上几兆字节的任何内容。

除此之外，还有一个关于您如何使用它以及用于什么的问题。例如，如果你想从一个函数返回一个“数组”，它不应该在堆栈上。

一般来说，如果可以的话，我会说尽量保持堆栈上的数组很小。如果您要在堆栈上创建一个包含数千个条目的数组，您应该停下来考虑一下您想要它做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T11:10:27.477

这取决于您的平台。

如今，如果在流行的 x64 平台上工作，您真的不必担心它。

根据您使用的操作系统，您可以检查允许用户态进程使用多少堆栈空间和多少堆空间。

例如，类 UNIX 系统具有软限制和硬限制。有些你可以加速，有些你不能。

底线是你通常不需要担心这些事情。当你需要知道的时候，你通常与你将要开发的平台紧密相连，以至于你知道所有这些细节。

希望我回答了你的问题。如果您需要特定值，请指定您的确切硬件、操作系统和用户权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:30:30.817

全局变量和静态变量的作用域将贯穿一个进程的整个生命周期。这些变量的内存将在进程启动时分配，并且仅在进程退出时才会释放。

但是局部变量（堆栈变量）仅对定义它的函数具有作用域。调用函数时将分配内存，一旦控制从函数退出，它将被释放。

动态内存的主要目的是创建用户定义范围的变量。如果你想控制变量的范围，你可以`x`在一个函数中为一个变量分配内存，然后将引用（地址）传递给你想要的多个函数，最后你可以释放它。

因此，借助动态分配的内存，我们可以创建一个范围高于局部变量但小于全局或静态变量的变量。

除此之外，如果大小非常高，最好选择动态内存，如果架构包含内存限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T11:14:38.820

这个问题的答案取决于上下文。例如，当您为操作系统内核编写代码时，堆栈可能非常有限，在堆栈帧中分配超过一千字节可能会导致问题。

在现代消费者系统中，可用于堆栈的空间通常非常大。过去的一个问题系统是地址空间是有限的，一旦堆栈被分配了一个地址，它就不能在堆栈增长方向上比地址空间中的下一个对象增长得更远，而不管物理内存的可用性如何或地址空间中其他地方的虚拟内存。对于今天的地址空间来说，这已经不是问题了。

通常，可以在堆栈帧中分配兆字节的空间，这样做既便宜又容易。但是，如果调用了许多分配大量空间的例程，或者递归调用了一个或几个分配大量空间的例程，则可能会出现问题，因为使用了太多空间，遇到了一些限制（例如地址空间或物理内存）。

当然，从堆中分配空间并不能缓解遇到物理内存限制的情况。所以只有消耗堆栈可用的地址空间的问题才与使用堆栈还是堆的问题有关。

`main`一个简单的测试这是否是一个问题是在您的例程中插入大量堆栈空间的使用。如果您使用额外的堆栈空间，并且您的应用程序在正常使用大量堆栈空间的负载下仍能正常运行，那么，当您在 中删除此人为保留时`main`，您将有足够的余量。

更好的方法是计算程序可以使用的最大值，并将其与系统可用的堆栈空间进行比较。但这对于今天的软件来说并不容易。

如果您遇到堆栈空间限制，您的链接器或操作系统可能会选择提供更多可用空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T11:06:14.303

使用堆分配内存的充分理由是将其所有权传递给其他一些函数/结构。另一方面，堆栈为您提供免费的内存管理，您不能忘记从堆栈中释放内存，而使用堆则存在泄漏风险。

如果您创建一个仅用于本地使用的数组，则使用的大小标准，但是很难给出确切的大小，超过该大小的内存应该在堆上分配。可以说几百字节足以移动到堆中，对于其他一些人来说，它会更少或更多。

# plone - 克隆内部链接 - 内容类型

> ID：12004507
> 
> 赞同：0
> 
> 时间：2012-08-17T11:00:13.410
> 
> 标签：plone

Plone 具有用于外部链接的开箱即用的内容类型。

内部链接是否存在此类内容类型、方式或附加组件？

真正的链接，而不是别名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:21:24.410

我们写了 vs.alias

[http://pypi.python.org/pypi/vs.alias](http://pypi.python.org/pypi/vs.alias)

它通过引用字段引用其他内部对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:58:22.583

智能链接？[http://plone.org/products/redturtle.smartlink](http://plone.org/products/redturtle.smartlink)

# php - 按名称搜索时无法在 FQL“Where”子句中使用希伯来语

> ID：12004509
> 
> 赞同：0
> 
> 时间：2012-08-17T11:00:19.360
> 
> 标签：php, facebook, facebook-fql

我有一个*有效*的PHP API 脚本，用它来用 FQL 提取数据。但是，当我向部分添加子句`WHERE`（例如专辑/人名）时，例如`name="שלום"`，其中包括希伯来语，我得到空结果。使用英文名称时，例如 name="hello" 我得到完整的数据。

我已经仔细检查过——我应该得到数据，因为我确实有带有这些希伯来语表达的相关专辑。

我真的不知道这是 FQL 还是 PHP 问题，但这似乎只是一个技术问题。

```
$fql = "SELECT aid,
       owner,
       link
FROM   album
WHERE  owner IN (SELECT uid
                 FROM   USER
                 WHERE  uid IN (SELECT uid2
                                FROM   friend
                                WHERE  uid1 = Me()))
       AND name = 'עברית'  
    ";
$param1 = array(
    'method' => 'fql.query',
    'query' => $fql,
    'callback' => ''
);
$fqlResult1 = $facebook->api($param1); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:32:44.933

按照@Adnan 的建议，我添加我的评论作为答案。

所以似乎主要问题是**字符编码**。

在这种特殊情况下，请确保当您键入外来符号时，您的**编辑器**（是的，您编写代码的那个）也设置为所需的编码。一个好的规则是确保您在以下位置使用相同的编码（我建议始终使用 UTF-8）：

*   您的**数据库**（如果您使用一个 - 这种情况与使用 FQL 不同），这将影响您的查询

*   您的**html**（通过标签），这将影响您的*输出*

*   您的**代码**（代码的源代码，许多面向程序员或 IDE 的严肃文本编辑器都有一个菜单选项来设置源代码的编码），这将确保使用正确的字节序列来构建字符串和查询

# arduino - Arduino板：两个gnd端口之间的区别

> ID：12004511
> 
> 赞同：3
> 
> 时间：2012-08-17T11:00:20.147
> 
> 标签：arduino, led

在`Arduino`船上，我看到两个端口 gnd：一个在电源线上（端口列表旁边有电源标签），我称之为 gnd(1)。一个在另一个上（端口从 0 --> 13 和 gnd 的线路），我称之为 gnd(2)。

我不知道两个端口之间的区别，但是当我在面包板上测试一个 LED 时，如果我连接到 gnd(1) 的一根线，LED 会比 gnd(2) 轻（gnd(2) 只是有一个小红灯）

请为我解释一下区别。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:06:02.080

![阿杜诺](../Images/b35d8793b9ccbec92f7c0c0c7df000e0.png)

通过阅读此页面：[http](http://arduino.cc/en/Main/ArduinoBoardUno/) ://arduino.cc/en/Main/ArduinoBoardUno/ （如果这是您的电路板）我看不出您的 gnd 端口应该有什么不同。也许你提供不同数量的力量？还是你一次有太多的抵抗力？

我几乎使用过 Arduino，即使我使用所有可用的 gnd 端口，我也从未遇到过你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T06:51:16.600

接地连接通常直接连接在板上。在我看来，这种设计至少有两个很好的理由：

1) 经常需要接地连接。因此，有尽可能多的接地连接是很方便的。特别是如果您正在尝试使用跳线。

2) 接地连接非常重要，应该可靠。因此，冗余连接将在振动和/或颠簸的情况下提高可靠性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-02T11:52:42.797

根据我的经验，在我的面包板上添加一个额外的 GND 可以大大提高可靠性和稳定性。我有同样的经验让 LED 变亮，但如果我只使用一个 GND，数字结果也会变得不可靠。

我尝试通过在面包板上添加电容器来解决稳定性问题，但添加额外的 GND 更​​有效。

# xml - 使用 xslt 进行位操作和字符串消息结构

> ID：12004513
> 
> 赞同：0
> 
> 时间：2012-08-17T11:00:22.783
> 
> 标签：xml, xslt, hex, bit-manipulation, xslt-1.0

我需要将变量中包含的文本字符串转换为 XML 节点。到输出 XML 的映射由名为“mapping.xml”的文件确定。它具有位操作（检查位是否为 1）。

```
mapping.xml

<Root>
  <field no="2" charlength="2">variable</field>
  <field no="3" total="4">fixed</field>
  <field no="21" charlength="2">
    <subfield no="1" total="3">fixed</subfield>
    <subfield no="2" charlength="2" idcode="ABC">variable</subfield>
  </field>
  <field no="63" charlength="2">
    <format1>
    <subfield no="1" total="3">fixed</subfield>
    </format1>
    <format2>
      <subfield no="1" total="3">fixed</subfield>
      <subfield no="2" total="7">fixed</subfield>
    </format2>
    <format3>
      <subfield no="1" total="3">fixed</subfield>
      <subfield no="2" total="7">fixed</subfield>
      <subfield no="3" total="6">fixed</subfield>
    </format3>
  </field>
</Root>

1) The xml will have 64 'field' elements. For a sample, i have included 3 to four fields here, in the mapping xml
2) Always the string will follow the order, fields 1 to 64 in ascending.
3) The fields can be fixed or variable. Fixed means the string will be of number of characters, determined by the charlength attribute corresponding to a field
4) Some fields can have subfields
5) The subfields can have fixed and variable. All fixed ones occur first, followed by the variable subfields.
6) A field which has subfields, fixed ones(subfields) always occur, fixed one does not have idcode attributes.
7) A Field which has subfields, variable ones(subfields), start with 'idcode' attribute, followed by the charlength(determined by the charlength attribute)
8) The subfield idcodes and lengths always occur, however the data may or may not be present, depending on char length(if characters determined by charlength is 0, then the data will not be there)
9) Field no 63 is an exception, where the character length determines the format of the field. If the character is 03(number of chars 2), it is format1\. If it is 10, format2, then if it is 16, format3.
9) The occurence of fields, determined by bit positions(0 means no occurence, 1 stands for occurence)
10)The bit positions is determined by another variable which holds a hex value(8 bytes - 64 bits) 
```

我的十六进制可能是：

```
<xsl:variable name="hex" select="'6000080000000000'"/><!--16 digits, each digit represents fourbits-->
as illustrated below
0110 0000 0000 0000 0000 1000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000

6     0    0    0    0    8    0    0    0    0    0    0    0     0    0   0 
```

这个十六进制表示存在字段 2、3 和 21，作为这些位置，我们有 1(set)

如果字符串变量是（我的输入）

```
<xsl:variable name="inputstring" select="'013112316145ABC0812345678'"/> 
```

上面的字符串 16（在 1123 之后），代表字段 21 的字符长度。

我想要的输出：

```
<Root>
  <field2>3</field2>
  <!--value is 3 as the charlength is 2(which is 01)-->
  <field3>1123</field3>
  <!--field3 value is 1123 as it is fixed, total length of 4-->
  <field21>
    <subfield1>145</subfield1>
    <!--subfield1 should be 145 as it is fixed length of total 3 chars-->
    <subfield2>12345678</subfield2>
    <!--subfield2 starts with 'ABC', has length 08 chars-->
  </field21>
</Root> 
```

最后，我们如何将 XML 节点转换回十六进制字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-10T14:59:22.683

使用以下模板将十六进制转换为十进制：

```
<xsl:template name="singleHexToDec">
  <xsl:param name="hex"/>
  <xsl:variable name="table" select="'0123456789ABCDEF'"/>
  <xsl:value-of select="string-length(substring-before($table,$hex))"/>
</xsl:template>

<xsl:template name="hexToDec">
    <xsl:param name="hexVal"/>
    <xsl:param name="decVal"/>
    <xsl:variable name="hexLength" select="string-length($hexVal)"/>
    <xsl:choose>
      <xsl:when test="$hexLength &gt; 0">
        <xsl:variable name="hexPos">
          <xsl:call-template name="singleHexToDec">
            <xsl:with-param name="hex" select="substring($hexVal,1,1)"/>
          </xsl:call-template>
        </xsl:variable>
        <xsl:variable name="addToDec">
          <xsl:call-template name="raiseToPower">
            <xsl:with-param name="number" select="16"/>
            <xsl:with-param name="power" select="$hexLength - 1"/>
          </xsl:call-template>
        </xsl:variable>
        <xsl:call-template name="hexToDec">
          <xsl:with-param name="hexVal" select="substring($hexVal,2)"/>
          <xsl:with-param name="decVal" 
     select="$decVal + ($addToDec * $hexPos)"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$decVal"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template> 
```

**参考**

*   [XSLT 常见问题解答：XSLT 中的十六进制算术](http://www.dpawson.co.uk/xsl/sect2/N5121.html#d6617e208)

*   [XSLT 位逻辑](https://stackoverflow.com/questions/1106044/1113772)

*   [万维网的字符模型](https://www.w3.org/TR/charmod/)

# asp.net - 如何绕过单个字段的请求验证？

> ID：12004522
> 
> 赞同：4
> 
> 时间：2012-08-17T11:00:50.490
> 
> 标签：asp.net

我可以看到在这个 XSS 和其他黑客时代需要验证请求。但这可能有点矫枉过正，就像切断孩子的腿以确保他不会跑到路上被杀。

我们收到投诉称无法设置像`<password>`. 据我所知，解决此问题的唯一方法是`ValidateRequest="false"`在一大堆页面上进行设置（例如注册、登录、重置密码）。而在使用.NET 4.0 时，还需要`<httpRuntime requestValidationMode="2.0" />`针对整个应用程序进行设置。

这真的是唯一的方法吗？有没有办法说只有密码字段不应该被验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:05:41.027

在 asp.net 4 中，您可以创建可能接受此类非典型请求的自定义服务器端请求验证器。写一个很容易，第一个谷歌示例应该让您开始编写自己的示例：

[http://jefferytay.wordpress.com/2010/04/15/creating-your-own-custom-request-validation/](http://jefferytay.wordpress.com/2010/04/15/creating-your-own-custom-request-validation/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-18T05:19:16.820

在 ASP.Net MVC 中，您现在可以[使用以下选项](http://msdn.microsoft.com/en-us/library/hh882339.aspx)来禁用请求验证：

禁用控制器操作的请求验证：

```
[ValidateInput(false)]
ActionResult SomeAction(string validationIgnored){...} 
```

在（视图）模型上的属性上：

```
[AllowHtml]
string SomeProperty {get; set;} 
```

或`Request.Unvalidated()`在已发布的表单字段上使用：

```
var rawField = Request.Unvalidated().Form["field"]; 
```

# objective-c - 使用 Google Directions API 计算两点之间的实际距离

> ID：12004527
> 
> 赞同：-1
> 
> 时间：2012-08-17T11:01:08.617
> 
> 标签：objective-c, mapkit

在我的 iphone 应用程序中，我正在创建两点之间的路线，并使用谷歌方向 api 来显示 html 指令，以文本格式显示每个转弯的步距。

在使用 Directions API 时，我观察到当用户从位置 A 移动到位置 D 并且在位置 B 处有转弯时，用户会收到关于转弯的通知（即在来自方向 api 的 json 响应的步骤中）在 A' 点（考虑 A 和 B 之间的 A'）。现在这一步的距离应该到位置 B，但我发现它直到位置 B'（出现在 B 之后），现在再次如果我在位置 C 转弯，那么步骤的开始位置应该从位置开始B，而是从 B' 开始。

所以我的问题是用户如何知道步骤的实际长度。请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:02:34.213

这并不能真正回答你的问题，但我想我还是应该提一下。

几个月后 iOS 6 推出后，您将无法使用 Google 的服务来执行此操作。不是出于任何技术原因，而是在他们的服务条款中，他们明确指出，如果您使用他们的地图服务，它们必须与他们的地图一起使用。由于 Apple 在 iOS 6 中使用了不同的地图提供商，因此您将违反他们的条款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:02:47.570

我已经解决了与计算步骤的实际长度相关的问题。实际上，我是通过获取虚假位置并对其进行测试来模拟当前位置。在实时模式下（即在路上测试应用程序时）它工作得非常好。

# javascript - BackboneJS 渲染问题

> ID：12004534
> 
> 赞同：33
> 
> 时间：2012-08-17T11:01:37.913
> 
> 标签：javascript, jquery, node.js, backbone.js, coffeescript

在过去的六个月里，我一直在与 Backbone 合作。前两个月是在搞乱，学习和弄清楚我想如何围绕它构建我的代码。在接下来的 4 个月里，我们正在敲定一个适合生产的应用程序。不要误会我的意思，Backbone 将我从之前标准的数千行客户端代码中解救出来，但它使我能够在更短的时间内完成更多宏伟的事情，从而引发了一系列全新的问题。对于我在这里提出的所有问题，都有一些简单的解决方案，感觉就像是 hacks 或者只是感觉*不对*。我承诺为一个很棒的解决方案提供 300 点赏金。开始：

1.  **加载**- 对于我们的用例（管理面板），悲观同步是不好的。对于某些事情，我需要在接受它们之前在服务器上验证它们。我们在 'sync' 事件被合并到 Backbone 之前就开始了，

我们使用这个小代码来模拟加载事件：

```
window.old_sync = Backbone.sync

# Add a loading event to backbone.sync
Backbone.sync = (method, model, options) ->
  old_sync(method, model, options)
  model.trigger("loading") 
```

伟大的。它按预期工作，但感觉不正确。我们将此事件绑定到所有相关视图并显示加载图标，直到我们从该模型接收到成功或错误事件。有没有更好、更理智的方法来做到这一点？

现在对于困难的人：

2.  **太多的东西使自己变得太多**——假设我们的应用程序有标签。每个选项卡控制一个集合。在左侧，您将获得收藏。单击模型以开始在中心进行编辑。您更改其名称并按 Tab 键进入下一个表单项。现在，您的应用程序是一个“实时的东西”，它注意到差异，运行验证，并自动将更改同步到服务器，不需要保存按钮！很好，但是表单开头的 H2 与输入中的名称相同 - 您需要更新它。哦，您需要将列表中的名称更新到一边。哦，列表按名称排序！

这是另一个示例：您想在集合中创建一个新项目。您按下“新建”按钮并开始填写表格。您是否立即将项目添加到集合中？但是，如果您决定丢弃它会怎样？或者，如果您将整个集合保存在另一个选项卡上？而且，还有一个文件上传 - 您需要先保存并同步模型，然后才能开始上传文件（以便您可以将文件附加到模型）。所以一切都开始呈现震颤：你保存模型和列表，表单再次呈现自己 - 它现在已经同步，所以你得到一个新的删除按钮，它显示在列表中 - 但现在文件上传完成上传，所以一切再次开始渲染。

将子视图添加到组合中，一切都开始看起来像费里尼电影。

3.  **一直是子视图**-[这是一篇关于这些东西的好文章](http://ianstormtaylor.com/rendering-views-in-backbonejs-isnt-always-simple/)。出于对神圣事物的热爱，我无法找到将 jQuery 插件或 DOM 事件附加到任何具有子视图的视图的正确方法。地狱很快就来了。工具提示听到渲染的时间很长并开始发疯，子视图变得像僵尸一样或没有响应。这是主要的痛点，因为这里有实际的错误，但我仍然没有一个包罗万象的解决方案。

4.  **闪烁**- 渲染速度很快。事实上，它是如此之快，以至于我的屏幕看起来像是癫痫发作了。有时它的图像必须再次加载（通过另一个服务器调用！），所以 html 最小化然后又突然最大化 - 该元素的 css 宽度+高度将解决这个问题。有时我们可以用fadeIn 和fadeOut 来解决这个问题——这写起来很麻烦，因为有时我们重用一个视图，有时又重新创建它。

**TL;DR** - 我在 Backbone 中的视图和子视图有问题 - 它渲染太多次，渲染时闪烁，子视图分离我的 DOM 事件并吃掉我的大脑。

谢谢！

更多细节：BackboneJS 与 Ruby on Rails Gem。使用 UnderscoreJS 模板的模板。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T12:49:38.193

## 视图的部分渲染

为了最小化 DOM 层次结构的完整呈现，您可以在 DOM 中设置特殊节点，以反映给定属性的更新。

让我们使用这个简单的下划线模板，一个名称列表：

```
<ul>
  <% _(children).each(function(model) { %>
    <li>
        <span class='model-<%= model.cid %>-name'><%= model.name %></span> :
        <span class='model-<%= model.cid %>-name'><%= model.name %></span>
    </li>
  <% }); %>
</ul> 
```

注意 class `model-<%= model.cid %>-name`，这将是我们的注入点。

然后，我们可以定义一个基本视图（或修改 Backbone.View），以便在更新这些节点时使用适当的值填充这些节点：

```
var V = Backbone.View.extend({
    initialize: function () {
        // bind all changes to the models in the collection
        this.collection.on('change', this.autoupdate, this);
    },

    // grab the changes and fill any zone set to receive the values
    autoupdate: function (model) {
        var _this = this,
            changes = model.changedAttributes(),
            attrs = _.keys(changes);

        _.each(attrs, function (attr) {
            _this.$('.model-' + model.cid + '-' + attr).html(model.get(attr));
        });
    },

    // render the complete template
    // should only happen when there really is a dramatic change to the view
    render: function () {
        var data, html;

        // build the data to render the template
        // this.collection.toJSON() with the cid added, in fact
        data = this.collection.map(function (model) {
            return _.extend(model.toJSON(), {cid: model.cid});
        });

        html = template({children: data});
        this.$el.html(html);

        return this;
    }
}); 
```

代码会有所不同以适应模型而不是集合。[与http://jsfiddle.net/nikoshr/cfcDX/](http://jsfiddle.net/nikoshr/cfcDX/)一起玩的小提琴

## 限制 DOM 操作

将渲染委托给子视图可能代价高昂，它们的 HTML 片段必须插入到父视图的 DOM 中。看看这个[jsperf 测试比较不同的渲染方法](http://jsperf.com/backbone-js-subviews-rendering)

它的要点是生成完整的 HTML 结构然后应用视图比构建视图和子视图然后级联渲染要快得多。例如，

```
<script id="tpl-table" type="text/template">
    <table>
        <thead>
            <tr>
                <th>Row</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>
        <% _(children).each(function(model) { %>
            <tr id='<%= model.cid %>'>
                <td><%= model.row %></td>
                <td><%= model.name %></td>
            </tr>
        <% }); %>
        </tbody>
     </table>
</script> 
```

```
var ItemView = Backbone.View.extend({
});

var ListView = Backbone.View.extend({
    render: function () {
        var data, html, $table, template = this.options.template;

        data = this.collection.map(function (model) {
            return _.extend(model.toJSON(), {
                cid: model.cid
            });
        });

        html = this.options.template({
            children: data
        });

        $table = $(html);

        this.collection.each(function (model) {
            var subview = new ItemView({
                el: $table.find("#" + model.cid),
                model: model
            });
        });

        this.$el.empty();
        this.$el.append($table);

        return this;
    }
});

var view = new ListView({
    template: _.template($('#tpl-table').html()),
    collection: new Backbone.Collection(data)
}); 
```

[http://jsfiddle.net/nikoshr/UeefE/](http://jsfiddle.net/nikoshr/UeefE/)

请注意，jsperf 显示模板可以拆分为子模板而不会造成太多损失，这将允许您为行提供部分呈现。

在相关说明中，不要在附加到 DOM 的节点上工作，这将导致不必要的回流。在操作之前创建一个新的 DOM 或分离节点。

## 压扁僵尸

Derick Bailey 写了一篇关于[消除僵尸观点的优秀文章](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

基本上，您必须记住，当您丢弃视图时，您必须取消绑定所有侦听器并执行任何其他清理操作，例如销毁 jQuery 插件实例。我使用的是类似于 Derick 在[Backbone.Marionette](https://github.com/derickbailey/backbone.marionette)中使用的方法的组合：

```
var BaseView = Backbone.View.extend({

    initialize: function () {
        // list of subviews
        this.views = [];
    },

    // handle the subviews
    // override to destroy jQuery plugin instances
    unstage: function () {
        if (!this.views) {
            return;
        }

        var i, l = this.views.length;

        for (i = 0; i < l; i = i + 1) {
            this.views[i].destroy();
        }
        this.views = [];
    },

    // override to setup jQuery plugin instances
    stage: function () {
    },

    // destroy the view
    destroy: function () {
        this.unstage();
        this.remove();
        this.off();

        if (this.collection) {
            this.collection.off(null, null, this);
        }
        if (this.model) {
            this.model.off(null, null, this);
        }
    }
}); 
```

更新我之前的示例以使行具有可拖动的行为，如下所示：

```
var ItemView = BaseView.extend({
    stage: function () {
        this.$el.draggable({
            revert: "invalid",
            helper: "clone"
        });
    },

    unstage: function () {
        this.$el.draggable('destroy');
        BaseView.prototype.unstage.call(this);
    }
});

var ListView = BaseView.extend({

    render: function () {
       //same as before

        this.unstage();
        this.collection.each(function (model) {
            var subview = new ItemView({
                el: $table.find("#" + model.cid),
                model: model
            });
            subview.stage();
            this.views.push(subview);
        }, this);
        this.stage();

        this.$el.empty();
        this.$el.append($table);

        return this;
    }
}); 
```

[http://jsfiddle.net/nikoshr/yL7g6/](http://jsfiddle.net/nikoshr/yL7g6/)

销毁根视图将遍历视图的层次结构并执行必要的清理。

注意：对 JS 代码感到抱歉，我对 Coffeescript 不够熟悉，无法提供准确的代码片段。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-21T19:19:01.047

好的，按顺序.. :)

> 1.  **正在加载...**

如果您想验证存储在服务器上的数据，最好在服务器端进行。如果服务器验证不成功，服务器不应该发送 200 HTTP 代码，因此 Backbone.Model 的保存方法会触发错误。

另一方面，对于验证数据主干有未实现的[验证](http://documentcloud.github.com/backbone/#Model-validate)方法。我猜这是实施和使用它的正确选择。但要记住，validate是在set和save之前调用的，如果validate返回错误，set和save就不会继续，模型属性也不会被修改。验证失败会触发“错误”事件。

另一种方式，当我们调用静默集（使用 {silent: true} 参数）时，我们应该手动调用 isValid 方法来验证数据。

> 2.  **太多的东西使自己变得太多..**

您必须根据其逻辑将您的视图分开。收集的良好做法是为每个模型提供单独的视图。在这种情况下，您可以独立渲染每个元素。甚至更多 - 当您初始化容器视图以进行集合时，您可以将集合中每个模型的任何事件绑定到适当的视图，它们将自动呈现。

> 很好，但是表单开头的 H2 与输入中的名称相同 - 您需要更新它。哦，您需要将列表中的名称更新到一边。

[您可以在](http://api.jquery.com/on/)方法上使用 JQuery来实现要显示的发送值的回调。例子：

```
//Container view
init: function() {
    this.collection = new Backbone.Collection({
        url: 'http://mybestpage.com/collection'
    });
    this.collection.bind('change', this.render, this);
    this.collection.fetch();
},
render: function() {

    _.each(this.collection.models, function(model) {
         var newView = new myItemView({
              model: model,
              name: 'view' + model.id
         });
         this.$('#my-collection').append(newView.render().$el);
         view.on('viewEdit', this.displayValue);
    }, this);
},
...
displayValue: function(value) {
    //method 1
    this.displayView.setText(value); //we can create little inner view before, 
                                     //for text displaying. Сonvenient at times.
    this.displayView.render();
    //method 2
    $(this.el).find('#display').html(value);
}

//View from collection
myItemView = Backbone.View.extend({
events: {
    'click #edit': 'edit'
},
init: function(options) {
    this.name = options.name;
},
...
edit: function() {
    this.trigger('viewEdit', this.name, this);
} 
```

> 哦，列表按名称排序！

您可以对主干集合使用[排序](http://documentcloud.github.com/backbone/#Collection-sort)方法。但是（！）调用 sort 会触发集合的“重置”事件。通过 {silent: true} 来避免这种情况。[如何](https://stackoverflow.com/questions/7005411/sorting-a-backbone-collection-after-initialization)

> 这是另一个示例：您想在集合中创建一个新项目...

当我们按下“New”按钮时，我们需要创建一个新模型，但只有当 .save() 方法触发成功时，我们才应该将该模型推送到集合中。在另一种情况下，我们应该显示错误消息。当然，我们没有理由将新模型添加到我们的集合中，直到它经过验证并保存在服务器上。

> 3.  **它的子视图一直向下......子视图变得像僵尸一样或没有响应。**

当您（或任何模型）调用渲染方法时，将重新创建其中的所有元素。因此，如果您有子视图，则应调用`subView.delegateEvents(subView.events);`所有子视图；可能这种方法是小技巧，但它有效。

> 4.  **闪烁..**

在很多情况下，对大中型图像使用缩略图可以最大限度地减少闪烁。其他方式，您可以将视图渲染分离为图像和其他内容。

例子：

```
var smartView = Backbone.View.extend({
  initialize: function(){
    this.model.on( "imageUpdate", this.imageUpdate, this );
    this.model.on( "contentUpdate", this.contentUpdate, this );
  },

  render: function(){
    this.$el.html(this.template(this.model.toJSON()));
  },

  imageUpdate: function(){
    this.$el.find('#image').attr('src', this.model.get('imageUrl'));
  },
  contentUpdate: function(){
    this.$el.find('#content').html(this.model.get('content'));
  }
}) 
```

我希望这对任何人都有帮助。抱歉语法错误，如果有的话:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T15:51:03.880

## 正在加载...

我是热切加载的忠实粉丝。我所有的服务器调用都是 JSON 响应，所以经常调用它们并不是什么大问题。我通常在每次视图需要时刷新集合。

我最喜欢的预加载方式是使用[Backbone-relational](https://github.com/PaulUithol/Backbone-relational/)。如果我以分层方式组织我的应用程序。考虑一下：

```
Organization model
|--> Event model
|--> News model
   |--> Comment model 
```

因此，当用户查看`organization`我可以急切地加载该组织的`events`和`news`. 当用户查看`news`一篇文章时，我渴望加载该文章的`comments`.

[Backbone-relational](https://github.com/PaulUithol/Backbone-relational/)为从服务器查询相关记录提供了一个很好的接口。

## 太多的东西让自己变得太多……

[骨干关系](https://github.com/PaulUithol/Backbone-relational/)在这里也有帮助！[Backbone-relational](https://github.com/PaulUithol/Backbone-relational/)提供了一个被证明非常有用的全局记录存储。这样，您可以传递 ID 并在其他地方检索相同的模型。如果您在一个地方更新它，它在另一个地方可用。

`a_model_instance = Model.findOrCreate({id: 1})`

这里的另一个工具是[Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)。[Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)让您可以构建模板而忘记附加到视图更改。因此，在您收集信息并将其显示在标题中的示例中，只需告诉[Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)监视这两个元素，并且在 input 上`change`，您的模型将被更新，并且`change`您查看的模型将被更新，所以现在标题将是更新。

## 一直是子视图……子视图变得像僵尸一样或没有响应……

我真的很喜欢[Backbone.Marionette](https://github.com/derickbailey/backbone.marionette)。它为您处理了大量的清理工作，并添加了一个`onShow`回调，在临时从 DOM 中删除视图时很有用。

这也有助于方便附加 jQuery 插件。onShow 方法在视图渲染并添加到 DOM 后调用，以便 jQuery 插件代码可以正常运行。

它还提供了一些很酷的视图模板，比如`CollectionView`在管理集合及其子视图方面做得很好。

## 闪烁

不幸的是，我对此没有太多经验，但您也可以尝试预加载图像。将它们呈现在隐藏视图中，然后将它们向前推进。

# gcc - 如何避免 g++ 链接器错误“未定义的引用”

> ID：12004535
> 
> 赞同：1
> 
> 时间：2012-08-17T11:01:49.477
> 
> 标签：gcc, g++, linker-errors, undefined-reference

如果函数定义不可用并且只有函数原型被外部化在头文件中，那么 g++ 编译器不会给出任何错误。但在链接期间，g++ 链接器将识别错误并对相应的 fn 说“未定义的引用”。我不在乎 abt fn 的定义。我只想获取二进制图像，并且每当从该图像调用相应的 fn 时，那一次我只想崩溃。我可以知道链接器标志来抑制这个“未定义的引用”链接器错误吗？在 VC++ 中，有一个名为 /FORCE 的选项。有没有类似的标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:04:10.533

这是完全未定义的行为，但如果你想要崩溃......

如果你有一个未定义的符号，比如一个函数，`void h()`那么它的错位名称将是`_Z1hv`，所以如果你定义了一个名称和外部链接的符号，即使类型错误，它也会被找到：

```
int _Z1hv = 0;
void h();

int main()
{
  h();
} 
```

这将链接，但在运行时崩溃，因为调用`h()`将尝试在整数变量的地址“运行”一个函数。

这样做是错误的，令人作呕的，会杀死小猫。

# python - 如何在从“tablib”生成的 XLS 文件中为每个数据表添加工作表名称？

> ID：12004536
> 
> 赞同：8
> 
> 时间：2012-08-17T11:01:50.043
> 
> 标签：python

我想将我数据库中的一些数据转换为 XLS (Excel) 格式。我曾经`tablib`这样做，并且可以获得正确格式的 Excel 工作表。

如何为我的 Excel 文件中的各个工作表指定名称？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-17T11:23:39.107

导出到 Excel 时，工作表具有来自`Dataset.title`属性的名称（[源代码](https://github.com/kennethreitz/tablib/blob/develop/tablib/formats/_xls.py#L53)）。

您可以在`Dataset`构造函数中设置标题：

```
dataset = Dataset(title="Sheet name") 
```

# oracle11g - jdk jdbc位问题

> ID：12004537
> 
> 赞同：0
> 
> 时间：2012-08-17T11:01:52.840
> 
> 标签：oracle11g, odbc, java

我正在尝试让 mapviewer 运行。无论我做什么，我都会收到以下错误消息之一：

```
Data source cannot be created : C:\oraclexe\app\oracle\product\11.2.0\server
\bin\ocijdbc10.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform 
```

* * *

```
Data source cannot be created : C:\oraclexe\app\oracle\product\11.2.0\server
\bin\ocijdbc10.dll: %1 is not a valid Win32 application 
```

我知道它与 jdk/dll 位版本有关。但是，当我尝试了所有可能性时，有人可以提出一个我可能忽略的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:08:48.403

看起来您正在使用 OCI 驱动程序。尝试改用瘦 JDBC 驱动程序。这是平台无关的。

[http://www.orafaq.com/wiki/JDBC](http://www.orafaq.com/wiki/JDBC)

OCI 驱动程序与已安装的 Oracle 客户端一起使用，因此需要本机 DLL。瘦驱动程序是纯Java。

# c# - 如何在 WCF 中启用和共享缓存项？

> ID：12004538
> 
> 赞同：1
> 
> 时间：2012-08-17T11:02:01.770
> 
> 标签：c#, asp.net, wcf, service, httpcontext

我有一个托管在我的 Web 应用程序中的 WCF 服务。两者都托管在同一个虚拟目录下。他们不是在同一个应用程序域下运行并共享 HttpContext 吗？

我从 WCF 服务中向我的缓存中添加了一个新项目：

```
HttpContext.Current.Cache["FirstName"] = "Will"; 
```

我怎样才能从网页访问这个值？

我在调用 WCF Web 服务后尝试了以下操作，但它为空：

```
HttpContext.Current.Cache["FirstName"] 
```

谢谢，

# ios - 应用程序不在后台时的PhoneGap iOS自定义URL方案？

> ID：12004539
> 
> 赞同：3
> 
> 时间：2012-08-17T11:02:02.330
> 
> 标签：ios, ipad, cordova

我这里有两种情况。

一是，我的应用程序在我的 iPad 上处于后台活动状态。如果我去 safari 并单击带有我的 URL 方案的链接，应用程序将打开并显示带有 URL 的警报。

这就是我要的！

第二种情况是应用程序处于非活动状态，而不是在后台。应用程序在此处启动，但从未显示警报。我可以从“didFinishLaunchingWithOptions”中提醒 URL，但我需要在我的 JavaScript 函数中使用它：handleOpenURL(url)。

在我看来，我的 AppDelegate.m 中的 handleOpenURL 仅在应用程序处于后台时才会触发。有没有办法让它在不在后台运行时做同样的事情？

这是我的 obj-c 句柄OpenUrl：

```
if (!url) { return NO; }

// calls into javascript global function 'handleOpenURL'
NSString* jsString = [NSString stringWithFormat:@"window.setTimeout(function(){ handleOpenURL(\"%@\"); }, 1)", url];
[self.viewController.webView stringByEvaluatingJavaScriptFromString:jsString];

// all plugins will get the notification, and their handlers will be called 
[[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:CDVPluginHandleOpenURLNotification object:url]];

return YES; 
```

它应该输出到这个 javascript 函数：

```
function handleOpenURL(url) { 
    alert('invoke: ' + url);
} 
```

现在，当 App 最初启动时，它会运行 didFinishLaunchingWithOptions：

```
NSURL* url = [launchOptions objectForKey:UIApplicationLaunchOptionsURLKey];
NSString* invokeString = nil;

if (url) {
    invokeString = [url absoluteString];
    NSLog(@"iPaperReeder launchOptions = %@", url);
}

self.viewController.invokeString = invokeString; 
```

我应该修改 didFinishLaunchingWithOptions 方法，使其运行 handleOpenURL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-19T09:29:49.107

您可以轻松解决这个问题。

在“CDVHandleOpenURL.m”文件中，您需要更改代码如下

NSString* jsString = [NSString stringWithFormat:@"document.addEventListener('deviceready',function(){if (typeof handleOpenURL === 'function') { handleOpenURL(\"%@\");}});",网址];

到

NSString* jsString = [NSString stringWithFormat:@"if (typeof handleOpenURL === 'function') { handleOpenURL(\"%@\");} else { window._savedOpenURL = \"%@\"; }", url , 网址];

这将完美地工作。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:51:06.743

我想到了。我错过了 onDeviceReady 函数中的一个调用：

```
if (invokeString) handleOpenURL(invokeString); 
```

# android - 通过 toucharea 限制移动精灵的区域

> ID：12004540
> 
> 赞同：1
> 
> 时间：2012-08-17T11:02:16.473
> 
> 标签：android, box2d, andengine

我想限制该区域以仅在该区域上移动精灵对象（例如，区域尺寸为 200x200）。

我会创建一个 box2D 200x200，其中精灵只能在这个区域上移动

请问你是怎么做的？

```
@Override
public Scene onCreateScene() {
    this.mEngine.registerUpdateHandler(new FPSLogger());

    final Scene scene = new Scene();
    scene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));

    final float centerX = (CAMERA_WIDTH - this.mFaceTextureRegionLetterOne
            .getWidth()) / 2;
    final float centerY = (CAMERA_HEIGHT - this.mFaceTextureRegionLetterOne
            .getHeight()) / 2;
    final Sprite letterOne = new Sprite(centerX - centerX / 2, centerY
            - centerY / 2, this.mFaceTextureRegionLetterOne,
            this.getVertexBufferObjectManager()) {
        @Override
        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            this.setPosition(pSceneTouchEvent.getX() - this.getWidth() / 2,
                    pSceneTouchEvent.getY() - this.getHeight() / 2);
            return true;
        }

    };

    final Sprite letterTwo = new Sprite(centerX - centerX / 2, centerY,
            this.mFaceTextureRegionLetterTwo,
            this.getVertexBufferObjectManager()) {
        @Override
        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            this.setPosition(pSceneTouchEvent.getX() - this.getWidth() / 2,
                    pSceneTouchEvent.getY() - this.getHeight() / 2);
            //int count = scene.getChildCount();
            //for(int i = 0; i < count; i++) {

            IEntity entity = scene.getChildByIndex(1);
            if (entity instanceof Sprite) {
                if (entity.getUserData().equals("sprite"))
                    if (((Sprite) entity).collidesWith(letterOne))
                        Log.v("colission", "face_box is collised on google plus -> letterTwo on letterOne");
            }
            //}
            return true;
        }
    };
    letterTwo.setUserData("sprite");

    final Sprite boxArea = new Sprite(centerX, centerY,
            this.mFaceTextureRegionBox, this.getVertexBufferObjectManager());
    letterOne.setScale(2);
    scene.attachChild(letterOne);
    scene.registerTouchArea(letterOne);

    letterTwo.setScale(2);
    scene.attachChild(letterTwo);

    scene.registerTouchArea(letterTwo);

    boxArea.setScale(2);
    scene.attachChild(boxArea);

    scene.setTouchAreaBindingOnActionDownEnabled(true);

    return scene;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:16:08.050

我不知道 box2D，但通常你会在每次移动时检查精灵的边缘，如果它们不与区域的边缘重叠。

如果你的精灵由一个矩形表示，并且你可以移动的区域也由一个矩形表示，这可以很容易地完成。

但首先，检查 box2D API，也许它已经有一些帮助方法来简化这个任务，比如：

```
obect.overlaps(object) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:26:45.533

使用您的代码，您似乎试图对您的精灵进行碰撞检查？！

当你试图在没有物理实体的情况下做事时，它会很复杂而且不好。因此，让我们将物理实体与您的精灵一起使用。

但请注意，不要为您的区域（包含您的精灵）创建一个实心的盒子体，让我们使用 4 个分离的体壁（左、上、右、下）来形成一个封闭的盒子；因为游戏引擎只能检查实体形状的碰撞。

以下是供参考的代码：

```
/**
 * @param pScene
 *      Sence of the game, get from class member
 * @param pWorld
 *      physics world of the game, get from class member
 */
public void CreateSprites(final Scene pScene, final PhysicsWorld pWorld)
{
    final FixtureDef mFixtureDef = PhysicsFactory.createFixtureDef(10, 1.1f, 0.0f);//should be placed as member of class
    final Sprite letterTwo = new Sprite(centerX - centerX / 2, centerY, 
            this.mFaceTextureRegionLetterTwo,
            this.getVertexBufferObjectManager());

    final Body letterTwoBody = PhysicsFactory.createBoxBody(pWorld, letterTwo, BodyType.DynamicBody, mFixtureDef);
    letterTwo.setUserData(letterTwoBody); // for later sprite-body attachment access

    pScene.attachChild(letterTwo);
    pWorld.registerPhysicsConnector(new PhysicsConnector(letterTwo, letterTwoBody, true, true));
}

/** Create the walls, in these boudaries sprites will move */
public void InitBoxWalls(Scene pScene, PhysicsWorld pWorld)
{
    final float WALL_MARGIN_WIDTH = 5f;
    final float WALL_MARGIN_HEIGHT = 10f;
    final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager();

    mWallGround = new Rectangle(-WALL_MARGIN_WIDTH, mCameraHeight + WALL_MARGIN_HEIGHT - 2, mCameraWidth + 2*WALL_MARGIN_WIDTH, 2, vertexBufferObjectManager);
    mWallRoof = new Rectangle(-WALL_MARGIN_WIDTH, -WALL_MARGIN_HEIGHT, mCameraWidth + 2*WALL_MARGIN_WIDTH, 2, vertexBufferObjectManager);
    mWallLeft = new Rectangle(-WALL_MARGIN_WIDTH, -WALL_MARGIN_HEIGHT, 2, mCameraHeight + 2*WALL_MARGIN_HEIGHT, vertexBufferObjectManager);
    mWallRight = new Rectangle(mCameraWidth + WALL_MARGIN_WIDTH - 2, -WALL_MARGIN_HEIGHT, 2, mCameraHeight + 2*WALL_MARGIN_HEIGHT, vertexBufferObjectManager);

    PhysicsFactory.createBoxBody(pWorld, mWallGround, BodyType.StaticBody, mWallFixtureDef);
    PhysicsFactory.createBoxBody(pWorld, mWallRoof, BodyType.StaticBody, mWallFixtureDef);
    PhysicsFactory.createBoxBody(pWorld, mWallLeft, BodyType.StaticBody, mWallFixtureDef);
    PhysicsFactory.createBoxBody(pWorld, mWallRight, BodyType.StaticBody, mWallFixtureDef);

    pScene.attachChild(mWallGround);
    pScene.attachChild(mWallRoof);
    pScene.attachChild(mWallLeft);
    pScene.attachChild(mWallRight);
} 
```

您应该做的最后一件事是在 AndEngine 示例中查找 Physics/MouseJoint 示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:20:44.680

您应该创建一个 200X200 的 Rectangle，然后您应该使用 Box2D Physics 创建一个矩形主体。对于矩形的夹具定义，您可以设置密度、弹性和摩擦力，以便您的精灵在与矩形的边界碰撞时得到相应的处理。

要创建一个矩形，您可以参考 Andengine 的示例。

# android - ActionBar 的 Android 自定义布局

> ID：12004545
> 
> 赞同：0
> 
> 时间：2012-08-17T11:02:53.840
> 
> 标签：android, android-layout, android-widget, android-actionbar

我创建了一个 action_bar.xml 布局文件。我在哪里实现了可扩展的列表视图和 2 个按钮。如图所示，但问题是整个可扩展列表视图都出现在 actionBar Side 中。我的布局文件

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="fill_vertical"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="Button" />

    <ExpandableListView
        android:id="@+id/expandableListView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </ExpandableListView>

</RelativeLayout> 
```

我想在完成屏幕上显示可扩展的列表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:08:16.947

出现`ExpandableListView`在 ActionBar 中是因为它是操作栏自定义布局的一部分，该布局使用 ActionBar 尺寸进行膨胀和显示。

另一种方法是为其中一个按钮设置单击侦听器，然后将 Listview 显示为[弹出控件。](http://androidresearch.wordpress.com/2012/05/06/how-to-create-popups-in-android/)

# gwt - 如何正确添加 RequestContexts

> ID：12004548
> 
> 赞同：3
> 
> 时间：2012-08-17T11:03:15.030
> 
> 标签：gwt, request

我想要做的是收集几个请求并在我的代码后触发它们：

```
RequestContext contextA =requestFactory
        .dataRequest().save(...).to(...);
RequestContext contextB =requestFactory
        .itemRequest().save(...).to(...);
requestA.append(requestB);
requestA.fire(); 
```

dataRequest 和 item request 都扩展了 RequestContext

当我试图这样做时，我得到了：

> 原因：java.lang.IllegalStateException：提供的 RequestContext 已
> 在 com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.append(AbstractRequestContext.java:484)更改

那么我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:17:30.120

to 的参数`append()`必须是*clean* `RequestContext`。

您可以将代码更改为：

```
ItemRequest contextB = requestFactory.itemRequest();
contextA.append(contextB);
contextB.save(...).to(...); 
```

或更简单地说：

```
requestA.append(requestFactory.itemRequest()).save(...).to(...); 
```

**基本原理**：在内部， appended`RequestContext`使用共享*状态*；调用时`append()`，附加的内部状态将`RequestContext`替换为您要附加的状态。如果它不是空的，你会丢失数据（没有合并），所以它只是失败了。

# google-maps-api-3 - 绘制后如何删除所有形状

> ID：12004550
> 
> 赞同：24
> 
> 时间：2012-08-17T11:03:17.527
> 
> 标签：google-maps-api-3

参考这个[来源谷歌地图绘图工具](http://code.google.com/p/gmaps-samples-v3/source/browse/trunk/drawing/drawing-tools.html?r=282)，如何一键删除所有绘图形状？

**代码片段：**

```
var drawingManager;
      var selectedShape;
      var colors = ['#1E90FF', '#FF1493', '#32CD32', '#FF8C00', '#4B0082'];
      var selectedColor;
      var colorButtons = {};

      function clearSelection() {
        if (selectedShape) {
          selectedShape.setEditable(false);
          selectedShape = null;
        }
      }

      function setSelection(shape) {
        clearSelection();
        selectedShape = shape;
        shape.setEditable(true);
        selectColor(shape.get('fillColor') || shape.get('strokeColor'));
      }

      function deleteSelectedShape() {
        if (selectedShape) {
          selectedShape.setMap(null);
        }
      }

      function selectColor(color) {
        selectedColor = color;
        for (var i = 0; i < colors.length; ++i) {
          var currColor = colors[i];
          colorButtons[currColor].style.border = currColor == color ? '2px solid #789' : '2px solid #fff';
        }

        // Retrieves the current options from the drawing manager and replaces the
        // stroke or fill color as appropriate.
        var polylineOptions = drawingManager.get('polylineOptions');
        polylineOptions.strokeColor = color;
        drawingManager.set('polylineOptions', polylineOptions);

        var rectangleOptions = drawingManager.get('rectangleOptions');
        rectangleOptions.fillColor = color;
        drawingManager.set('rectangleOptions', rectangleOptions);

        var circleOptions = drawingManager.get('circleOptions');
        circleOptions.fillColor = color;
        drawingManager.set('circleOptions', circleOptions);

        var polygonOptions = drawingManager.get('polygonOptions');
        polygonOptions.fillColor = color;
        drawingManager.set('polygonOptions', polygonOptions);
      }

      function setSelectedShapeColor(color) {
        if (selectedShape) {
          if (selectedShape.type == google.maps.drawing.OverlayType.POLYLINE) {
            selectedShape.set('strokeColor', color);
          } else {
            selectedShape.set('fillColor', color);
          }
        }
      }

      function makeColorButton(color) {
        var button = document.createElement('span');
        button.className = 'color-button';
        button.style.backgroundColor = color;
        google.maps.event.addDomListener(button, 'click', function() {
          selectColor(color);
          setSelectedShapeColor(color);
        });

        return button;
      }

       function buildColorPalette() {
         var colorPalette = document.getElementById('color-palette');
         for (var i = 0; i < colors.length; ++i) {
           var currColor = colors[i];
           var colorButton = makeColorButton(currColor);
           colorPalette.appendChild(colorButton);
           colorButtons[currColor] = colorButton;
         }
         selectColor(colors[0]);
       }

      function initialize() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: new google.maps.LatLng(22.344, 114.048),
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          disableDefaultUI: true,
          zoomControl: true
        });

        var polyOptions = {
          strokeWeight: 0,
          fillOpacity: 0.45,
          editable: true
        };
        // Creates a drawing manager attached to the map that allows the user to draw
        // markers, lines, and shapes.
        drawingManager = new google.maps.drawing.DrawingManager({
          drawingMode: google.maps.drawing.OverlayType.POLYGON,
          markerOptions: {
            draggable: true
          },
          polylineOptions: {
            editable: true
          },
          rectangleOptions: polyOptions,
          circleOptions: polyOptions,
          polygonOptions: polyOptions,
          map: map
        });

        google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
            if (e.type != google.maps.drawing.OverlayType.MARKER) {
            // Switch back to non-drawing mode after drawing a shape.
            drawingManager.setDrawingMode(null);

            // Add an event listener that selects the newly-drawn shape when the user
            // mouses down on it.
            var newShape = e.overlay;
            newShape.type = e.type;
            google.maps.event.addListener(newShape, 'click', function() {
              setSelection(newShape);
            });
            setSelection(newShape);
          }
        });

        // Clear the current selection when the drawing mode is changed, or when the
        // map is clicked.
        google.maps.event.addListener(drawingManager, 'drawingmode_changed', clearSelection);
        google.maps.event.addListener(map, 'click', clearSelection);
        google.maps.event.addDomListener(document.getElementById('delete-button'), 'click', deleteSelectedShape);

        buildColorPalette();
      }
      google.maps.event.addDomListener(window, 'load', initialize);
```

```
#map, html, body {
        padding: 0;
        margin: 0;
        height: 100%;
      }

      #panel {
        width: 200px;
        font-family: Arial, sans-serif;
        font-size: 13px;
        float: right;
        margin: 10px;
      }

      #color-palette {
        clear: both;
      }

      .color-button {
        width: 14px;
        height: 14px;
        font-size: 0;
        margin: 2px;
        float: left;
        cursor: pointer;
      }

      #delete-button {
        margin-top: 5px;
      }
```

```
<script src="http://maps.google.com/maps/api/js?libraries=drawing"></script>
    <div id="panel">
      <div id="color-palette"></div>
      <div>
        <button id="delete-button">Delete Selected Shape</button>
      </div>
    </div>
    <div id="map"></div>
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-17T13:27:44.603

如果您想删除（或处理）地图上的所有对象，您需要保留对它们的引用以供您使用。

1.  创建形状后，将其推送到数组中（需要在按钮单击处理程序中使用全局）。
2.  单击“全部删除”按钮时，遍历该数组，对每个对象调用 .setMap(null)。

[例子](http://www.geocodezip.com/v3_GoogleEx_DrawingTools_deleteAll.html)

将叠加层推送到数组（all_overlays）上：

```
google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
    all_overlays.push(e);
    if (e.type != google.maps.drawing.OverlayType.MARKER) {
    // Switch back to non-drawing mode after drawing a shape.
    drawingManager.setDrawingMode(null);
    // Add an event listener that selects the newly-drawn shape when the user
    // mouses down on it.
    var newShape = e.overlay;
    newShape.type = e.type;
    google.maps.event.addListener(newShape, 'click', function() {
      setSelection(newShape);
    });
    setSelection(newShape);
  }
}); 
```

删除所有形状：

```
function deleteAllShape() {
  for (var i=0; i < all_overlays.length; i++)
  {
    all_overlays[i].overlay.setMap(null);
  }
  all_overlays = [];
} 
```

代码片段：

```
var drawingManager;
var all_overlays = [];
var selectedShape;
var colors = ['#1E90FF', '#FF1493', '#32CD32', '#FF8C00', '#4B0082'];
var selectedColor;
var colorButtons = {};

function clearSelection() {
  if (selectedShape) {
    selectedShape.setEditable(false);
    selectedShape = null;
  }
}

function setSelection(shape) {
  clearSelection();
  selectedShape = shape;
  shape.setEditable(true);
  selectColor(shape.get('fillColor') || shape.get('strokeColor'));
}

function deleteSelectedShape() {
  if (selectedShape) {
    selectedShape.setMap(null);
  }
}

function deleteAllShape() {
  for (var i = 0; i < all_overlays.length; i++) {
    all_overlays[i].overlay.setMap(null);
  }
  all_overlays = [];
}

function selectColor(color) {
  selectedColor = color;
  for (var i = 0; i < colors.length; ++i) {
    var currColor = colors[i];
    colorButtons[currColor].style.border = currColor == color ? '2px solid #789' : '2px solid #fff';
  }

  // Retrieves the current options from the drawing manager and replaces the
  // stroke or fill color as appropriate.
  var polylineOptions = drawingManager.get('polylineOptions');
  polylineOptions.strokeColor = color;
  drawingManager.set('polylineOptions', polylineOptions);

  var rectangleOptions = drawingManager.get('rectangleOptions');
  rectangleOptions.fillColor = color;
  drawingManager.set('rectangleOptions', rectangleOptions);

  var circleOptions = drawingManager.get('circleOptions');
  circleOptions.fillColor = color;
  drawingManager.set('circleOptions', circleOptions);

  var polygonOptions = drawingManager.get('polygonOptions');
  polygonOptions.fillColor = color;
  drawingManager.set('polygonOptions', polygonOptions);
}

function setSelectedShapeColor(color) {
  if (selectedShape) {
    if (selectedShape.type == google.maps.drawing.OverlayType.POLYLINE) {
      selectedShape.set('strokeColor', color);
    } else {
      selectedShape.set('fillColor', color);
    }
  }
}

function makeColorButton(color) {
  var button = document.createElement('span');
  button.className = 'color-button';
  button.style.backgroundColor = color;
  google.maps.event.addDomListener(button, 'click', function() {
    selectColor(color);
    setSelectedShapeColor(color);
  });

  return button;
}

function buildColorPalette() {
  var colorPalette = document.getElementById('color-palette');
  for (var i = 0; i < colors.length; ++i) {
    var currColor = colors[i];
    var colorButton = makeColorButton(currColor);
    colorPalette.appendChild(colorButton);
    colorButtons[currColor] = colorButton;
  }
  selectColor(colors[0]);
}

function initialize() {
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 10,
    center: new google.maps.LatLng(22.344, 114.048),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    disableDefaultUI: true,
    zoomControl: true
  });

  var polyOptions = {
    strokeWeight: 0,
    fillOpacity: 0.45,
    editable: true
  };
  // Creates a drawing manager attached to the map that allows the user to draw
  // markers, lines, and shapes.
  drawingManager = new google.maps.drawing.DrawingManager({
    drawingMode: google.maps.drawing.OverlayType.POLYGON,
    markerOptions: {
      draggable: true
    },
    polylineOptions: {
      editable: true
    },
    rectangleOptions: polyOptions,
    circleOptions: polyOptions,
    polygonOptions: polyOptions,
    map: map
  });

  google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
    all_overlays.push(e);
    if (e.type != google.maps.drawing.OverlayType.MARKER) {
      // Switch back to non-drawing mode after drawing a shape.
      drawingManager.setDrawingMode(null);

      // Add an event listener that selects the newly-drawn shape when the user
      // mouses down on it.
      var newShape = e.overlay;
      newShape.type = e.type;
      google.maps.event.addListener(newShape, 'click', function() {
        setSelection(newShape);
      });
      setSelection(newShape);
    }
  });

  // Clear the current selection when the drawing mode is changed, or when the
  // map is clicked.
  google.maps.event.addListener(drawingManager, 'drawingmode_changed', clearSelection);
  google.maps.event.addListener(map, 'click', clearSelection);
  google.maps.event.addDomListener(document.getElementById('delete-button'), 'click', deleteSelectedShape);
  google.maps.event.addDomListener(document.getElementById('delete-all-button'), 'click', deleteAllShape);

  buildColorPalette();
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
#map,
html,
body {
  padding: 0;
  margin: 0;
  height: 100%;
}
#panel {
  width: 200px;
  font-family: Arial, sans-serif;
  font-size: 13px;
  float: right;
  margin: 10px;
}
#color-palette {
  clear: both;
}
.color-button {
  width: 14px;
  height: 14px;
  font-size: 0;
  margin: 2px;
  float: left;
  cursor: pointer;
}
#delete-button {
  margin-top: 5px;
}
```

```
<script src="http://maps.google.com/maps/api/js?libraries=drawing&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="panel">
  <div id="color-palette"></div>
  <div>
    <button id="delete-button">Delete Selected Shape</button>
    <button id="delete-all-button">Delete All Shapes</button>
  </div>
</div>
<div id="map"></div>
```

# vb.net - 在运行时将数据源绑定/重新绑定到 reportviewer vb.net

> ID：12004554
> 
> 赞同：1
> 
> 时间：2012-08-17T11:03:31.613
> 
> 标签：vb.net, data-binding, datasource, reportviewer, rdlc

我在 vb.net 中有一个 reportviewer，我有 2 个 .rdlc 文件，即 Report1 和 Report2。它们的设计与表格相同，但 Report1 具有参数和过滤器，Report2 仅显示我记录中的所有内容。

我知道如何在设计时将数据源绑定到reportviewer，但我不知道如何在运行时进行，我需要在第一次加载表单以及用户实际搜索某些内容时切换数据源。基本上这就是我的想法。

[http://imageshack.us/photo/my-images/407/reportzm.png/](http://imageshack.us/photo/my-images/407/reportzm.png/)

我需要在第一次加载表单时显示所有记录。所以我需要 Report2.rdlc 来处理没有过滤器的内容。

当我绑定 Report1.rdlc 时，这就是我们所看到的

[http://imageshack.us/photo/my-images/255/er11.png/](http://imageshack.us/photo/my-images/255/er11.png/)

***除了***我们在文本框中输入一些值并单击搜索之外，什么都没有显示，记录将根据我们正在搜索的内容加载。

这是代码。

```
Imports Microsoft.Reporting.WinForms

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'TODO: This line of code loads data into the 'houseDataSet.Table1' table. You can move, or remove it, as needed.

        Me.Table1TableAdapter.Fill(Me.houseDataSet.Table1)

        Me.ReportViewer1.RefreshReport()
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim a As New ReportParameter("ReportParameter1", TextBox1.Text)
        ReportViewer1.LocalReport.SetParameters(New ReportParameter() {a})
        ReportViewer1.RefreshReport()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:56:07.947

用过滤后的数据填充您的数据表。然后绑定它。

```
Me.Table1TableAdapter.Fill(Me.houseDataSet.Table1) 
```

类似于：

```
Table1 = FilteredQueryAsDataTable

Me.Table1TableAdapter.Fill(Me.houseDataSet.Table1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:55:07.517

此代码可能对您有所帮助:)（vb.net 2008 代码）我在按钮中使用此代码。所以当我按下它时；水晶报表将显示在水晶报表查看器上，并显示数据集中的数据。

```
 Dim rpt As New CrystalReport1() 'The report you created. 
    Dim myConnection As SqlConnection
    Dim MyCommand As New SqlCommand()
    Dim myDA As New SqlDataAdapter()
    Dim myDS As New Database1DataSet1() 'The DataSet you created. 
    Try
        myConnection = New SqlConnection("type here your connection string")
        MyCommand.Connection = myConnection
        MyCommand.CommandText = "Select  * from table"
        MyCommand.CommandType = CommandType.Text
        myDA.SelectCommand = MyCommand
        myDA.Fill(myDS, "type here table name")
        rpt.SetDataSource(myDS)
        rptViewer.ReportSource = rpt
    Catch Excep As Exception
        MessageBox.Show(Excep.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try 
```

# iphone - iphone sdk中带有分页的图像网格

> ID：12004555
> 
> 赞同：0
> 
> 时间：2012-08-17T11:03:33.343
> 
> 标签：iphone, gridview, scrollview, paging

我想在带有分页的滚动视图中显示图像网格。所有图像都来自服务器。我知道使用带有分页的滚动视图。但是我们如何在带有分页的滚动视图中显示图像。我可以知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:15:07.637

最好使用您自己的逻辑在滚动视图中排列图像

创建一个启用分页的 UiScrollView.. 要做到这一点，请参考[此链接](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)

**通过调整imageView**的**X 和 Y 坐标**创建一个 for 循环

 **从上面的链接，下面这两种方法将帮助您实现功能

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {
    // Update the page when more than 50% of the previous/next page is visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageControl.currentPage = page;
}

- (IBAction)changePage {
    // update the scroll view to the appropriate page
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;
    [self.scrollView scrollRectToVisible:frame animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T11:45:58.520

干得好：

```
// an array of uiimageviews (will be easier to deal with than UIImages
NSMutableArray * images = [[NSMutableArray alloc] init]; 

[images addObject:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.jpg"]]];
[images addObject:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.jpg"]]];
[images addObject:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.jpg"]]];
[images addObject:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.jpg"]]];
[images addObject:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.jpg"]]];
[images addObject:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.jpg"]]];
[images addObject:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.jpg"]]];
[images addObject:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.jpg"]]];
[images addObject:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.jpg"]]];

//we're going to split them into groups of four
NSMutableArray * groupsOfFour = [[NSMutableArray alloc] init];
for(NSInteger i = 0; i < [images count]; i+=4)
{

    NSRange theRange;
    theRange.location = i;
    theRange.length = 4;

    if( [images count] - i < 4)
    {
        theRange.length = [images count] - i;
    }

    if([images subarrayWithRange:theRange])
        [groupsOfFour addObject:[images subarrayWithRange:theRange]];

}

//groupsOfFour will now contain arrays of groups of 4 images

//from that we can work out the content width of out scrollview
float contentWidth = 320*[groupsOfFour count];

//make the scrollview
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,320,480)];
scroll.contentSize = CGSizeMake( contentWidth , 480);
scroll.showsHorizontalScrollIndicator = YES;
scroll.pagingEnabled = YES; //set paging enabled
[self.view addSubview:scroll];

//no we loop through the groups of 4 and add each image we find into a uiview
//this is important because then each group will be separate, 
//and so the paging will automatically lock to them

for(NSInteger i = 0; i < [groupsOfFour count]; i++)
{
    NSMutableArray * thisGroup = [groupsOfFour objectAtIndex:i];

    UIView * groupOfFourView = [[UIView alloc] initWithFrame:CGRectMake(i*320, 0, 320, 480)];

    UIImageView*topLeft = [thisGroup objectAtIndex:0];
    topLeft.frame = CGRectMake(0, 0, 160, 240);
    [groupOfFourView addSubview:topLeft];

    //these if statements check that there is an image for this position 
    //(the last page is likely to have only 1 or 2 images on it)

    if([thisGroup count] > 1)
    {
        UIImageView*topRight = [thisGroup objectAtIndex:1];
        topRight.frame = CGRectMake(160, 0, 160, 240);
        [groupOfFourView addSubview:topRight];
    }

    if([thisGroup count] > 2)
    {
        UIImageView*bottomLeft = [thisGroup objectAtIndex:2];
        bottomLeft.frame = CGRectMake(0, 240, 160, 240);
        [groupOfFourView addSubview:bottomLeft];
    }
    if([thisGroup count] > 3)
    {
        UIImageView*bottomRight = [thisGroup objectAtIndex:3];
        bottomRight.frame = CGRectMake(160, 240, 160, 240);
        [groupOfFourView addSubview:bottomRight];
    }

    //finally add the group of four to our scrollview
    [scroll addSubview:groupOfFourView];
} 
```**

# asp.net - ASP.Net Universal Membership RoleProvider 没有为角色缓存创建 cookie

> ID：12004559
> 
> 赞同：0
> 
> 时间：2012-08-17T11:03:48.240
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-membership, membership-provider

我的 ASP.net 通用成员的默认角色提供程序没有创建缓存角色的 cookie。有任何想法吗

```
<roleManager enabled="true" createPersistentCookie="true" cacheRolesInCookie="true" cookieTimeout="30" cookiePath="/" cookieRequireSSL="false" cookieSlidingExpiration="true" cookieProtection="All" defaultProvider="DefaultRoleProvider" >
  <providers>
    <clear />
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</roleManager> 
```

我正在使用带有 AuthorizeAttributes 的 MVC，并且每次检查角色级别时都会命中数据库。cookie .asproles 似乎没有被创建。

MiniProfiler 显示

```
ExecuteStoreCommands Execute GetResults System.Collections.Generic.IEnumerable<T>.GetEnumerator GetRolesNamesForUser GetRolesForUser
DECLARE @appName nvarchar = N'/',
        @userName nvarchar = N'TestUser'

SELECT 
[Project1].[RoleName] AS [RoleName]
FROM ( SELECT 
        [Extent2].[RoleName] AS [RoleName]
        FROM    [dbo].[Users] AS [Extent1]
        CROSS JOIN [dbo].[Roles] AS [Extent2]
        INNER JOIN [dbo].[Applications] AS [Extent3] ON [Extent3].[ApplicationId] = [Extent2].[ApplicationId]
        INNER JOIN [dbo].[UsersInRoles] AS [Extent4] ON ([Extent1].[UserId] = [Extent4].[UserId]) AND ([Extent4].[RoleId] = [Extent2].[RoleId])
        WHERE ((LOWER([Extent3].[ApplicationName])) = @appName) AND ((LOWER([Extent1].[UserName])) = @userName)
)  AS [Project1]
ORDER BY [Project1].[RoleName] ASC 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:55:55.520

它在实时服务器上工作，所以这很奇怪。估计解决了。

# c++ - 在线程上设置超时的任何体面的方法？

> ID：12004563
> 
> 赞同：0
> 
> 时间：2012-08-17T11:04:05.643
> 
> 标签：c++, windows, linux, multithreading, embedded

我们有一个解码函数，它在自己的线程中运行以执行其工作。执行时间通常远低于定义的超时值，但在某些情况下可能需要更长的时间才能完成。因此需要有一个超时，以确保这个函数不会对程序的其余部分造成额外的延迟。

这目前正在 Windows 操作系统上开发，但我也在寻找一种适用于 Linux 的便携式解决方案。

到目前为止，该实现在解码函数中进行了多次检查，以查看它是否还有时间继续或中止处理。这是定义。不是很好的做法，我正在考虑改进这一点。

我知道 boost 提供了这样的功能，但我们在这个项目中没有使用 boost。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:15:51.177

这是 Herb Sutter 关于这个主题的一篇优秀[文章](http://www.drdobbs.com/article/print?articleId=207100682&siteSectionName=parallele)。结论是：您当前的方法是可以的。只需让您的解码线程定期检查它们是否超时。重要的是要平衡检查的频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:02:07.667

一种方法是设置超时标志以指示线程实例不报告任何完成，不继续并尽快删除/终止自身。将其优先级降到最低，然后忘记它。立即创建另一个线程对象，覆盖旧的实例值，并使用新的线程实例进行后续解码。

最低优先级的孤立线程最终会在最终检查其自杀标志时自行消亡。

# javascript - pjax 仍然会重新加载整页

> ID：12004564
> 
> 赞同：15
> 
> 时间：2012-08-17T11:04:12.827
> 
> 标签：javascript, jquery, pjax

我在 chrome 和 firefox 中尝试过 pjax 示例，我将示例代码放入我自己的应用程序中，但它仍然会重新加载整个页面。AJAX 请求发生然后页面继续前进而不更新#main div

```
<html>
    <head>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery-1.8.0.min.js"></script>
        <script src="http://localhost:8888/jul/js/jquery.pjax.js"></script>

         <script type="text/javascript">
            // $(document).ready(function(){
            //   $('a[data-pjax]').pjax();
            // })

        // $(document).ready(function(){
        //     $('a').pjax({

        //    container: '#main'
        //  })
        $('document').ready(function(){
           $('ul a').pjax('#main')
        });

         </script>
    </head>
    <body>
        11:59:36        <div id="main">
             <div class='loader' style='display:none'><img src='http://localhost:8888/jul/imgs/spinner.gif'></div><ul>

  <li><a data-pjax='#main' href="/jul/stats/pjax_stats/index/">Index</a></li>
  <li><a data-pjax='#main' href="/jul/stats/pjax_stats/total_posts/">total_posts</a></li>

  <li><a data-pjax='#main' href="http://localhost:8888/jul/stats/pjax_stats/index">Index</a></li>
  <li><a data-pjax='#main' href="http://localhost:8888/jul/stats/pjax_stats/total_posts">total_posts</a></li>
  <li><a href="http://localhost:8888/jul/stats/pjax_stats/total_graph">total_graph</a></li>
  <li><a href="http://localhost:8888/jul/stats/pjax_stats/twitter_graph">twitter_graph</a></li>
  <li><a href="http://localhost:8888/jul/stats/pjax_stats/facebook_graph">facebook_graph</a></li>
</ul>index files

        </div>

    </body>
</html> 
```

我尝试了多种方法来调用 pjax，也许其他人可以指出我哪里出错了？Ajax/GET 似乎在 firebug 控制台中返回正常 - 这是我的 php 的一个示例，它产生 pjax 响应

```
public function total_posts(){
        // print_r($_SERVER);

        if (!isset($_SERVER["X_PJAX"])) {
            $this->load->view('stats/pjax_stats/header');
            $this->load->view('stats/pjax_stats/links');
        }else{
            echo "pjax";//add in for debug
        }

        echo "total posts";

        if (!isset($_SERVER['X-PJAX'])) {
            $this->load->view('stats/pjax_stats/footer');
        }

    } 
```

**一个错误？**

最新版本中似乎存在一个错误，其中附加变量到发出 ajax 请求的 url 的末尾是 _pjax=container 而不是 _pjax=true

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-28T12:54:07.127

您是否尝试将超时设置得更高（默认 < 1s ）？

例如：

```
$('document').ready(function(){
  $('ul a').pjax({
    container: '#main',
    timeout: 5000 #ms
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T12:31:35.373

我想我会添加一个答案，因为我今天遇到了这个问题，这是谷歌的第一个结果。

在您更改超时之前，请确保您的容器存在。这听起来很明显，但是如果您使用框架，比如 Yii2 (PHP)，您会发现您的容器 ID 在两次刷新之间可能不再存在，因此 pjax 正在刷新整个页面。

因此请注意：在使用超时进行调整之前，请确保您的容器存在。

# objective-c - 在 Objective-C 中获取方法参数的类

> ID：12004565
> 
> 赞同：2
> 
> 时间：2012-08-17T11:04:14.863
> 
> 标签：objective-c, ios, objective-c-runtime

我需要在运行时获取方法的参数类。

有一种方法

```
- (const char *)getArgumentTypeAtIndex:(NSUInteger)idx; 
```

在 NSMethodSignature 中，但它只返回 @ 如果它是对象。我需要获取这个对象的类，实际检测这个对象是否是 NSArray。实现这一目标的可能性有哪些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:24:28.480

很久以前我试过这个。所以花了一些时间回复搜索代码。无论如何，这里是信息。

NSMethodSignature 类的getArgumentTypeAtIndex 和methodReturnType 的返回数据将是“AC 字符串编码Objective-C 类型编码中方法的返回类型”。- 根据文档。

所以需要检查返回的char数据，通过下表找到合适的类型。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)

我想检查编码表会给你答案！

快乐编码:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T11:08:57.123

你试过这个吗？

```
if ([object_you_wanna_check isKindOfClass:([NSArray class])]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:14:22.443

尝试

```
if ([obj isKindOfClass:[MyMclass class]]) {
     //enter code here
} 
```

或者

```
if ([obj respondToSelector:@selector(myRequiredSelector)]) {
     //enter code here
} 
```

或使用[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html中描述的高级界面](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)

# php - 使用 UCLIBC 交叉编译 PHP

> ID：12004567
> 
> 赞同：9
> 
> 时间：2012-08-17T11:04:16.013
> 
> 标签：php, linux, arm, glibc, uclibc

***这是一个转发，以前的帖子已关闭，移至服务器故障并再次关闭。****我认为这篇文章是一个有效的 stackoverflow 问题，因为我认为它是由一些 automake/compile/linking 错误引起的。这是一个编程问题，而不是服务器管理问题。*

[交叉编译 PHP](https://stackoverflow.com/questions/11971527/cross-compile-php)

[https://serverfault.com/questions/418521/cross-compile-php](https://serverfault.com/questions/418521/cross-compile-php)

**帖子开始**

我已经下载了 PHP 5.4.0 源代码，将其解压缩并移到源文件夹中。

我做了一个配置：

```
./configure --build=x86_64-unknown-linux-gnu --host=arm-linux-uclibcgnueabi --prefix=/usr/arm/www CC="arm-linux-uclibcgnueabi-gcc --sysroot=/toolchains/gnu_cortex-a9_tools/"  --disable-libxml --disable-dom  --without-iconv --without-openssl --disable-simplexml --disable-xml --disable-xmlreader --disable-xmlwriter --without-pear --without-sqlite3 --disable-pdo --without-pdo-sqlite --disable-phar  --with-config-file-path=/etc/ 
```

其次是

```
make 
```

没有错误，一切运行良好。接下来我进行make安装。

```
make install 
```

再次一切正常。我将它移动到目标平台并运行

```
/usr/arm/www/bin/php -v
PHP 5.4.0 (cli) (built: Aug 15 2012 16:07:41) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies 
```

我用我的网络服务器直接用 php 测试了一个简单的主页。

```
<?php echo "hello" ?>
# php index.php
hello 
```

它按预期工作。接下来我测试：

```
<?php
$output = shell_exec('ls -lart');
echo "<pre>$output</pre>";
?> 
```

哦不~

```
# php shell.php 

Segmentation fault 
```

我测试了另一个脚本：

```
#!/bin/php
<?php

echo "hello";
$handle = fopen("info.txt", "r");
echo $handle;
?> 
```

结果相同：

```
# php index.php 
helloSegmentation fault 
```

我有 php.ini 吗？

```
# /usr/arm/www/bin/php --ini
Configuration File (php.ini) Path: /etc/
Loaded Configuration File:         /etc/php.ini 
```

是的，并且没有禁用的功能。测试 strace /usr/arm/www/bin/php index.php

```
lstat("/srv/www/info.txt", {st_mode=S_IFREG|0644, st_size=20, ...}) = 0
open("/srv/www/info.txt", O_RDONLY)     = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=20, ...}) = 0
lseek(3, 10, SEEK_CUR)                  = 0
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV +++ 
```

文件 info.txt 存在并且它有读/写的权限。

测试 strace /usr/arm/www/bin/php shell.php

```
fcntl64(3, F_GETFL)                     = 0 (flags O_RDONLY)
ioctl(3, SNDCTL_TMR_TIMEBASE or TCGETS, 0x7e31fddc) = -1 EINVAL (Invalid argument)
vfork()                                 = 3324
close(4)                                = 0
fstat(3, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
read(3, "total 24\n-rw-rw-r--    1 1001    "..., 8192) = 468
read(3, ""..., 8192)                    = 0
--- SIGCHLD (Child exited) @ 0 (0) ---
close(3)                                = 0
wait4(3324, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 3324
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV +++ 
```

如果我通过 gdb 运行 index.php，它会给我：

```
Starting program: /usr/arm/www/bin/php index.php
hello
Program received signal SIGSEGV, Segmentation fault.
zend_do_fcall_common_helper_SPEC (execute_data=0x2ac7a040) at /home/maiden/Downloads/php-5.4.0/Zend/zend.h:391
391 /home/maiden/Downloads/php-5.4.0/Zend/zend.h: No such file or directory.
    in /home/maiden/Downloads/php-5.4.0/Zend/zend.h 
```

gdb 从 shell.php 给我这个 启动程序：/usr/arm/www/bin/php shell.php

```
Program received signal SIGSEGV, Segmentation fault.

zend_do_fcall_common_helper_SPEC (execute_data=0x2ab76040) at /home/maiden/Downloads/php-5.4.0/Zend/zend.h:391
391 in /home/maiden/Downloads/php-5.4.0/Zend/zend.h 
```

zend.h 位于 /usr/arm/www/include/php/Zend/ 显然在交叉编译期间出现了问题。我错过了什么？我没有找到任何配置标志来纠正这个问题，并且创建到所需位置的符号链接会删除 gdb 输出，但 php 仍然存在段错误。

谢谢你的帮助！

**更新：**

```
# valgrind php test.php
==2181== Memcheck, a memory error detector
==2181== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==2181== Using Valgrind-3.8.0 and LibVEX; rerun with -h for copyright info
==2181== Command: php test.php
==2181==
==2181== Conditional jump or move depends on uninitialised value(s)
==2181==    at 0x4004EC8: ??? (in /lib/ld-uClibc-0.9.30-nptl.so)
==2181==
==2181== Invalid read of size 4
==2181==    at 0x4004D48: _dl_get_ready_to_run (in /lib/ld-uClibc-0.9.30-nptl.so)
==2181==  Address 0x7d4cc304 is just below the stack ptr.  To suppress, use: --workaround-gcc296-bugs=yes
==2181==
==2181== Invalid read of size 4
==2181==    at 0x48C348C: __uClibc_main (in /lib/libuClibc-0.9.30-nptl.so)
==2181==  Address 0x7d4cc554 is just below the stack ptr.  To suppress, use: --workaround-gcc296-bugs=yes
==2181==
==2181== Invalid write of size 4
==2181==    at 0x233010: __eqdf2 (ieee754-df.S:1120)
==2181==  Address 0x7d4cb0bc is just below the stack ptr.  To suppress, use: --workaround-gcc296-bugs=yes
==2181==
Warning: shell_exec(): Unable to execute 'ls -lart' in /test.php on line 3
==2181== Invalid read of size 4
==2181==    at 0x1FF1AC: zend_do_fcall_common_helper_SPEC (zend.h:391)
==2181==    by 0x1F3D17: execute (zend_vm_execute.h:410)
==2181==    by 0x18B217: zend_execute_scripts (zend.c:1279)
==2181==    by 0x1365BB: php_execute_script (main.c:2473)
==2181==    by 0x22B52B: do_cli (php_cli.c:988)
==2181==    by 0x22BD4B: main (php_cli.c:1364)
==2181==  Address 0x8 is not stack'd, malloc'd or (recently) free'd
==2181==
Segmentation fault 
```

**更新2**

使用 memcheck 重新运行 valgrind，得到的输出与以前大致相同，但这是新的：

```
php: can't resolve symbol '__libc_freeres' 
```

**更新3**

虽然 valgrind 让我失望了，但我继续使用 gdb，我在目标系统上创建了文件夹 /home/maiden/..etc 并复制了我的 php/include 文件夹的内容并重新运行 gdb。现在我收到此错误消息：

```
(gdb) run index.php 
Starting program: /bin/php index.php
hello
Program received signal SIGSEGV, Segmentation fault.
zend_do_fcall_common_helper_SPEC (execute_data=0x2ab34040) at /home/maiden/Downloads/php-5.4.5/Zend/zend.h:391
warning: Source file is more recent than executable.
391     return --pz->refcount__gc; 
```

这与 Sixeightzero 昨天在评论中所写的非常相似。我现在已经尝试过 PHP 版本 5.3.5、5.4.0、5.4.5 全部相同的错误。

**更新4**

我为 glibc 下载了一个新的工具链，用 glibc 交叉编译了一个新的 busybox，创建了一个 chroot jail，用 glibc 而不是 uclibc 交叉编译了 php，并在我的 uclibc 盒子上的 chroot jail 中对其进行了测试，它工作！但我仍然需要让 php 在我的 uclibc 环境中工作....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:06:29.360

我会检查 uClibc 的 configure.log 以查看**ARCH_USE_MMU**和 fork 是否已启用。如果不是，则 vfork 被替换为 shell_exec 可能使用的 fork。vfork 的主要问题是，父母和孩子使用相同的内存空间，这会导致奇怪的崩溃。

# yii - 我有两个模型 message 和 messageto 并且我在 messageto 表单页面中使用消息模型属性如何验证这些属性

> ID：12004569
> 
> 赞同：0
> 
> 时间：2012-08-17T11:04:16.627
> 
> 标签：yii, yii-extensions

> 我有两个模型 message 和 messageto，我在 messageto 表单页面中使用消息模型属性如何使用 ajax 验证来验证这些属性，我是 YII 的新手。

我正在使用 application.extensions.tokeninput.TokenInput 来显示字段，但我无法验证这些小部件上的字段。感谢您等待您的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:16:25.283

对[How-Yii-Ajax-Validation-Works 的](http://learnyii.blogspot.com/2010/12/yii.html)深入了解将极大地帮助您使用此功能并对其进行一些自定义。

恐怕我没有使用**tokeninput 扩展**，但关于您的两个模型 ajax 验证，以下*一般计划*应该有效：

在您的**View**中，确保您有：

```
 $form = $this->beginWidget('CActiveForm', array(
     'id'=>'some-id-for-your-form',
     'enableAjaxValidation'=>true //turn on ajax validation on the client side
)); 
```

此外，在**View**中，任何具有验证规则的字段都应具有：

```
<?php echo $form->textField($model, 'some_attribute'); ?>
<?php echo $form->error($model, 'some_attribute'); ?> // This is used to present validations error 
```

并在您的**Controller中，在通过 加载****View**输入之前的 create 或 update 操作中，输入`POST`以下行：

```
$messageModel = new Message;
$messageToModel = New MessageTo;

if(Yii::app()->getRequest()->getIsAjaxRequest()) 
{
  echo CActiveForm::validate( array( $messageModel,$messageToModel)); 
  Yii::app()->end(); 
}
/*
  The rest of your code goes here
*/ 
```

至于您正在使用的扩展，如果它自动生成视图代码，那么您需要知道如何配置它以放置所需`enableAjaxValidation => true`的`$form->error($model,'some_attribute')`部件。

希望这有帮助！

# html - 如何使 DIV 居中并具有几乎 100% 的宽度和 100% 的高度

> ID：12004571
> 
> 赞同：0
> 
> 时间：2012-08-17T11:04:20.827
> 
> 标签：html, css

```
 <div class="main"></div>
   <style>
        .main{ background-color:black;
               position:absolute;
               width:???;
               height:??;
   </style> 
```

如何使 div 居中`main`并使其高度和宽度几乎为 100%，并且与屏幕的每一侧有 20px 的间隙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:07:10.023

默认情况下，块元素的宽度已经是 100%。

您需要做的就是添加填充或边距来创建您的“间隙”。

```
<style>
    .main{ background-color:black;
           position:absolute;
           margin: 0 20px;
           height:100%;
      }
</style> 
```

## 编辑

我错过了你的绝对定位。
使用绝对定位，我会使用这个：

```
#main {
background: #a00;
position: absolute;
top: 0; 
left: 50px; 
right: 50px;
height: 100%;
} 
```

[演示小提琴](http://jsfiddle.net/NotInUse/Ch7FA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:12:59.043

嘿，现在定义这个 css

```
<style>
   .main{ 
       background-color:black;
       position:absolute;
       margin:20px;
       left:0;
       right:0;
       top:0;
       bottom:0;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:17:34.183

由于您使用的是绝对定位，您可以试试这个：

```
<div class="main"></div>

<style>
.main {
background-color: black;
position: absolute;
top: 0;
left: 20px;
right: 20px;
height: 100%;
}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:06:49.090

这将使`div`左侧和右侧的 50px 空间居中对齐。

```
.main {
    margin: 0 50px;  /* [top,bottom] [left,rigth] shorthand syntax */
    width : 100%;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T11:08:15.127

你可以做 ：

```
<style>
   .main{ background-color:black;
          position:absolute;
          width:100%;
          height:100%;
          margin:20px;
 </style> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T11:13:11.850

您可以使用`calc()`CSS3 中的新属性：

```
.main
{ 
    margin: 0 auto;
    background-color:black;
    color: #fff;
    position:absolute;
    width: -webkit-calc(100% - 20px);
    height: -webkit-calc(100% - 20px);  /*repeat with other browsers codes*/
} 
```

这告诉 div 为 100% 宽/高，但删除 20px，同时将其保持在中心。

IT 可以在 IE9（不低于）m Firefox 4.0、Chrome 19 和 Safari 6 中使用。所以它可能不是最好的解决方案。

[http://jsfiddle.net/Kyle_Sevenoaks/wVUat/](http://jsfiddle.net/Kyle_Sevenoaks/wVUat/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-17T11:17:51.150

下面的解决方案如何：

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <meta charset="utf-8">
    <style>
        #mask {
            background-color: rgba(0, 0, 0, .5);
            opacity: 0.5;
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="mask" />
</body>
</html> 
```

[请在http://jsfiddle.net/balkon_smoke/yPF8Y/2/](http://jsfiddle.net/balkon_smoke/yPF8Y/2/)找到它

# mysql - 如何在 mySQL 中删除特定数量的行

> ID：12004579
> 
> 赞同：1
> 
> 时间：2012-08-17T11:05:08.740
> 
> 标签：mysql

我在 mySQL 中有一个表，我在其中记录了在我的网站上完成的最后 20 个查询。我想删除第 20 行之后的行。我使用 id 但作为 Auto_Increment ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:07:27.027

尝试这样的事情：

```
delete from <table> where id not in
(select id from <table> order by <datecol> desc limit 20) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:27:44.940

```
DROP TEMPORARY TABLE IF EXISTS temp_ids;
CREATE TEMPORARY TABLE temp_ids(id INT);

INSERT INTO temp_ids (id) 
SELECT id FROM myTable ORDER BY id DESC LIMIT 20; 

DELETE FROM myTable 
WHERE
    id NOT IN (SELECT id FROM temp_ids); 
```

`TEMPORARY TABLE`因为你需要避免`Error Code: 1093\. You can't specify target table 'myTable' for update in FROM clause`而且`This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'`

**编辑**

@gaurav.mishra280295 - 你添加`Order By id`. 即使 id 是自动增量 PK，至少也不能 100% 保证它也是插入顺序。有些延迟是可能的，它不是 100% 可靠的。

仅作为信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:45:33.947

由于 id 是单调的并且每次增加一个，为什么不创建另外两个表。一个存储最旧的 id。另一个存储 id 的数量。然后使用这两个表，您可以确定何时开始删除行以及删除哪一个。删除时只需增加表中的 id 以记录下一个要删除的内容。

I would recommend doing this in a stored procedure.

# .net - “FontWeight”的 TypeConverter 不支持从字符串转换

> ID：12004592
> 
> 赞同：20
> 
> 时间：2012-08-17T11:05:48.297
> 
> 标签：.net, silverlight, xaml, visual-studio-2012, typeconverter

安装 Visual Studio 2012 并打开 Silverlight 5 项目后，我遇到了与 TypeConverter 相关的各种*设计时*错误，例如：

> “FontWeight”的 TypeConverter 不支持从字符串转换。
> 
> “Point”的 TypeConverter 不支持从字符串转换。
> 
> “Thickness”的 TypeConverter 不支持从字符串转换。

然而，这并不是一份详尽的清单。

这些例子是：

`<Setter Property="FontWeight" Value="Bold" />`

`<RadialGradientBrush GradientOrigin="0.5,0.5"> ...`

`<Setter Property="Padding" Value="0" />`

我在这里遗漏了一些明显的东西，还是这是一个错误？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T06:31:20.120

我有同样的问题：在资源部分定义

```
<UserControl.Resources>
  <local:MyConverter x:Key="myConverter"/>
</UserControl.Resources> 
```

在 XAML UE 中，我不得不改变

```
...Width="{Binding BindingProperty, Converter=myConverter}"... 
```

至

```
...Width="{Binding BindingProperty, Converter={StaticResource myConverter}..." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:21:57.723

有一个类似的问题：

`The TypeConverter for "Thickness" does not support converting from a string`

此 XAML 文件中未使用任何转换器

这是一个已从 SL4 转换为 SL5 的 Silverlight 项目（Prism）。但似乎还有更多的事情发生，我也收到这样的错误：

`The specified value cannot be assigned to the collection. The following type was expected: "Inline".`

当 TextBlock 像这样使用时：

`<TextBlock>Hello</TextBlock>`

要摆脱该错误：

`<TextBlock Text="Hello" />`

启动应用程序查看XAML更改的结果有点麻烦

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T10:21:43.237

我有同样的问题，它让我发疯！对我来说，这与 Silverlight 工具包有关，一旦我补充说我开始收到大量这些错误。

在我的项目文件（右键单击->编辑项目文件）中，我已经像这样引用了工具包 dll（在我的情况下，相对于源目录）：

```
<Reference Include="System.Windows.Controls.Toolkit">
    <HintPath>..\..\..\Bin\System.Windows.Controls.Toolkit.dll</HintPath>
</Reference> 
```

将其更改为此似乎可以对其进行排序（我不确定是否也需要内部组件，但添加了 SL5 和工具包的新项目似乎可以引用它）：

```
<Reference Include="system.windows.controls.toolkit, Version=5.0.5.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
<Reference Include="System.Windows.Controls.Toolkit.Internals, Version=4.0.5.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" /> 
```

希望有帮助，约翰

# objective-c - NSJSONSerialization 解析错误既不是字典也不是数组

> ID：12004596
> 
> 赞同：1
> 
> 时间：2012-08-17T11:06:17.550
> 
> 标签：objective-c, ios, nsarray, nsdictionary, nsjsonserialization

我成功地从我的服务器获取数据。得到它后，我将数据发送到函数进行解析；

```
- (void)readIn:(NSMutableData *)s {
    NSLog(@"Reading in the following:");
    NSString * prints = [[NSString alloc] initWithData:s  encoding:NSUTF8StringEncoding];
    NSLog(@"%@", prints);

    NSError *error = nil;
    NSData *jsonData = [[NSData alloc] initWithData:s];

    if (jsonData) {

        id jsonObjects = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

        if ([jsonObjects isKindOfClass: [NSArray class]])
            NSLog(@"yes we got an Array");
        else if ([jsonObjects isKindOfClass: [NSDictionary class]])
             NSLog(@"yes we got an dictionary");
        else
              NSLog(@"neither array nor dictionary!");

        if (error) {
            NSLog(@"error is %@", [error localizedDescription]);
            return;
        }

        NSArray *keys = [jsonObjects allKeys];
        for (NSString *key in keys) {
            NSLog(@"%@ is %@",key, [jsonObjects objectForKey:key]);
        }

    } else {

        // Handle Error
    } 
    } 
```

现在我在控制台上的打印是：

```
 2012-08-17 13:59:57.667 TaraftarlikOyunu[1157:c07] Reading in the following:
2012-08-17 13:59:57.667 TaraftarlikOyunu[1157:c07] {"uID":"5878341","tm":"fb","hh":122,"pt":75,"coin":500,"ll":1,"qlevel":1,"coect":true,"potWeekly":{"pts":75,"intval":604800000},"acent":{"chamunt":0},"mes":[]}
2012-08-17 13:59:57.668 TaraftarlikOyunu[1157:c07] neither array nor dictionary!
2012-08-17 13:59:57.670 TaraftarlikOyunu[1157:c07] error is The operation couldn’t be completed. (Cocoa error 3840.) 
```

对我来说，这似乎是合法的 json 对象。我在哪里做错了？

我正在使用 nsstream 从服务器获取数据；这是我获取数据的代码：

```
case NSStreamEventHasBytesAvailable: {
            if(stream == inputStream) {
                NSLog(@"inputStream is ready.");

                uint8_t buf[1024];
                unsigned int len = 0;

                len = [inputStream read:buf maxLength:1024];
            NSLog(@"length %i", len);
                if(len > 0) {

                    NSMutableData* data=[[NSMutableData alloc] initWithLength:0];
                    [data appendBytes: (const void *)buf length:len];
                    [self readIn:data];

                }
            }
            break;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:13:10.720

尝试将 jsonObjects 显式设置为数组：

```
NSError *myError = nil;

NSArray *jsonObjects= [NSJSONSerialization JSONObjectWithData:responseData   ptions:NSJSONReadingMutableLeaves error:&myError];

for (NSDictionary * dict in jsonObjects) {
    NSLog(@"Some data %@", [dict objectForKey:@"field"]);
    //replace this to access a valid field
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:54:45.070

失败的原因是原始数据中可能有一些 '\' 字符引用 '"' 字符。如果你搜索过“Cocoa error 3840”，你会得到一个提示。我建议你做的是打印出原始数据，一次一个字符（它的 ascii 所以不需要 UTF）并验证这一点。

char *ptr = [s 字节]; for(int i=0; i<[s 长度]; ++i) NSLog(@"%c", *ptr++);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:27:35.220

问题是，我得到的 json 字符串最后带有空终止，当我尝试反序列化它时，它无法转换为 NSDictionary 或 NSArray。对代码稍作改动会使一切变得完美。真正的代码应该是这样的

```
case NSStreamEventHasBytesAvailable: {
        if(stream == inputStream) {

            NSLog(@"inputStream is ready.");

            uint8_t buf[1024];
            unsigned int len = 0;

            len = [inputStream read:buf maxLength:1024];
            NSLog(@"length %i", len);
            if(len > 0) {

                datum =[[NSMutableData alloc] initWithLength:0];

                [datum appendBytes: (const void *)buf length:len-1];

                NSDictionary * jsondict = [NSJSONSerialization JSONObjectWithData:datum options:NSUTF8StringEncoding error:nil];

                NSLog(@"is valid json object %d",[NSJSONSerialization isValidJSONObject:jsondict]);

                [self readIn:datum];
                }
            }
             else {
                NSLog(@"no buffer!");
            }
            break;
            }

    default: {
        NSLog(@"Stream is sending an Event: %i", event);

        break;
    }
} 
```

与另一个的唯一区别是我扔了最后一个字节，它变成了有效的 json 字典。感谢对我的问题感兴趣的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T16:01:53.230

JSON 不接受JSON 文档中除制表符、换页符、回车符和换行符之外的*任何控制字符，因此您的代码工作得非常好，并且完全按照它应该做的事情不读取任何内容。*

那么那个 nul 字符是从哪里来的呢？您读取数据的代码是错误的，或者服务器是错误的。在我看来，问题出在服务器上。通过丢弃最后一个字符来“修复”是不好的 - 如果服务器曾经修复过，您将丢弃右括号。我会联系负责服务器的人并在那里解决问题。

# javascript - javascript 外部链接文件的可接受数量是多少

> ID：12004597
> 
> 赞同：1
> 
> 时间：2012-08-17T11:06:22.560
> 
> 标签：javascript, html

html 中可接受的 javascript 外部链接文件数量是多少。并且可能浏览器碰巧没有下载外部js文件。如果是，那么为什么会发生。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:30:17.200

这个问题的答案相当复杂。您必须考虑缓存、同时请求的数量以及身份验证等因素。

内联脚本的缺点是不能很好地利用缓存。如果您将脚本移动到外部文件，重新访问用户可能仍会将您的文件缓存在缓存中，并且页面将为他们加载更快。您应该拥有多少个脚本取决于浏览器将同时发出的请求数（通常为 4 个）、脚本的大小和执行复杂性。请记住，*同一域上的*CSS 文件或基本上任何资源也计入此限制。您可能会忽略样式表，`media="print"`因为现代浏览器会延迟加载。

如果您有超过 4 个脚本，则第 5 个脚本只会在其他 4 个脚本之一已加载时开始加载。如果此脚本包含一些`on dom ready`事件代码，它将被延迟。您可以考虑合并脚本或更改它们的加载顺序。

另一个需要注意的问题是更新。如果您更新脚本并且用户仍然缓存旧的脚本，您将遇到问题。一些用户甚至可能会得到一些较新的脚本和一些较旧的脚本。确保你有一个适当的机制来解决这个问题。我发现**指纹**在缓存管理中非常有用。

您可以考虑延迟加载原则，首先只加载最基本的脚本来显示用户绝对必须看到的内容。然后根据需要在后台加载其他脚本。

还有像谷歌地图这样的第三方服务，你实际上不能缓存这些文件，因为它们会随着时间的推移而变化，并且可能包含防止滥用等的身份验证步骤。您对这些脚本的控制有限。

总体而言，这取决于您正在制作的网站类型。如果您正在制作更多的业务应用程序，则相对较长的加载时间可能是可以接受的。如果您正在制作一个花哨的促销网站，加载时间绝对是关键，内联脚本可能适合您。

这是一个相当高级的话题，除非您遇到实际的性能问题，否则不要太担心它。[过早的优化是万恶之源](http://en.wikipedia.org/wiki/Tony_Hoare)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:15:35.287

考虑到每个外部脚本都需要时间来加载，并且为其提供服务的服务器可能处于脱机状态。

您应该考虑只包含您在当前页面上使用的脚本，而不是世界上所有用于小事的库。

可接受的外部文件数是**0**。在我看来。如果您希望您的网页顺利运行，则不应考虑加载任何外部内容。

当您不想将脚本保存在 localhost、css（例如：**jQuery**和**jQuery UI**）上时，通常会包含外部文件以用于测试目的。但是在现场制作中，您应该将它们放在您的主机/服务器上。也许将来外部服务器将不再可用。

浏览器不会选择下载什么，它会下载他被要求下载的内容。但是如果脚本失败，或者该脚本中有需要额外库的操作并且该库不可用，浏览器将停止加载并给出错误。

# css - 如何在 less mixin 中访问特定的类属性？

> ID：12004601
> 
> 赞同：2
> 
> 时间：2012-08-17T11:06:36.380
> 
> 标签：css, less, mixins, less-mixins

我有 .aClass

```
.aClass {
 width: 20px;
 height: 20px;
} 
```

在 .anotherClass 中，我想根据 .aClass 中的宽度属性值计算宽度值。

```
.anotherClass {
 width: .aClass.width
} 
```

上面的例子不起作用。

我在较少的文档中找不到任何东西。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:02:37.083

在代码顶部声明变量

```
@width: 10px 
```

然后，

```
.aClass {
 width: @width;
 height: 20px;
}

.anotherClass {
 width: @width;
} 
```

# mysql - MySQL将行转换为动态列数

> ID：12004603
> 
> 赞同：85
> 
> 时间：2012-08-17T11:06:46.473
> 
> 标签：mysql, sql, pivot

假设我有三个不同的 MySQL 表：

**表`products`：**

```
id | name
 1   Product A
 2   Product B 
```

**表`partners`：**

```
id | name
 1   Partner A
 2   Partner B 
```

**表`sales`：**

```
partners_id | products_id
          1             2
          2             5
          1             5
          1             3
          1             4
          1             5
          2             2
          2             4
          2             3
          1             1 
```

我想在行和产品作为列中获得一个包含合作伙伴的表。到目前为止，我能够得到这样的输出：

```
name      | name      | COUNT( * )
Partner A   Product A          1
Partner A   Product B          1
Partner A   Product C          1
Partner A   Product D          1
Partner A   Product E          2
Partner B   Product B          1
Partner B   Product C          1
Partner B   Product D          1
Partner B   Product E          1 
```

使用此查询：

```
SELECT partners.name, products.name, COUNT( * ) 
FROM sales
JOIN products ON sales.products_id = products.id
JOIN partners ON sales.partners_id = partners.id
GROUP BY sales.partners_id, sales.products_id
LIMIT 0 , 30 
```

但我想有类似的东西：

```
partner_name | Product A | Product B | Product C | Product D | Product E
Partner A              1           1           1           1           2
Partner B              0           1           1           1           1 
```

问题是我无法确定我将拥有多少产品，因此列号需要根据产品表中的行动态更改。

这个非常好的答案似乎不适用于mysql：[T-SQL Pivot？从行值创建表列的可能性](https://stackoverflow.com/questions/2922797/t-sql-pivot-possibility-of-creating-table-columns-from-row-values)

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-08-17T12:19:15.823

不幸的是 MySQL 没有一个`PIVOT`基本上是你想要做的功能。因此，您需要使用带有`CASE`语句的聚合函数：

```
select pt.partner_name,
  count(case when pd.product_name = 'Product A' THEN 1 END) ProductA,
  count(case when pd.product_name = 'Product B' THEN 1 END) ProductB,
  count(case when pd.product_name = 'Product C' THEN 1 END) ProductC,
  count(case when pd.product_name = 'Product D' THEN 1 END) ProductD,
  count(case when pd.product_name = 'Product E' THEN 1 END) ProductE
from partners pt
left join sales s
  on pt.part_id = s.partner_id
left join products pd
  on s.product_id = pd.prod_id
group by pt.partner_name 
```

查看[SQL 演示](https://www.db-fiddle.com/f/8SLRh8FtxC1KPbZUazt7TH/0)

由于您不知道产品，您可能希望动态执行此操作。这可以使用准备好的语句来完成。

使用动态数据透视表（将行转换为列），您的代码将如下所示：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'count(case when Product_Name = ''',
      Product_Name,
      ''' then 1 end) AS ',
      replace(Product_Name, ' ', '')
    )
  ) INTO @sql
from products;

SET @sql = CONCAT('SELECT pt.partner_name, ', @sql, ' from partners pt
left join sales s
  on pt.part_id = s.partner_id
left join products pd
  on s.product_id = pd.prod_id
group by pt.partner_name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

查看[SQL 演示](https://www.db-fiddle.com/f/nDe3oQ3VdtfS5QDokieHN4/0)

可能值得注意的`GROUP_CONCAT`是，默认情况下限制为 1024 字节。您可以通过在您的程序期间将其设置得更高来解决此问题，即。`SET @@group_concat_max_len = 32000;`

# php - 如何从数据库中的复选框列表中显示选中的值

> ID：12004604
> 
> 赞同：-1
> 
> 时间：2012-08-17T11:06:47.497
> 
> 标签：php, html

我有一个表单包含名为兴趣的复选框，我用逗号（eq 烹饪、阅读、播放）等将复选框值保存在数据库中。现在我想在我看到从数据库。

表单是编辑配置文件，当我看到编辑配置文件页面时，应该已经选择/检查了数据库中的值。

```
兴趣：- [checkbox1 value1] [checkbox2 value2] [checkbox3 value3] [checkbox4 value4]

```

我该怎么做..请指导我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:13:34.143

首先，将不同的值存储在数据库中的单个逗号分隔字符串中是一种不好的做法。您应该改用“兴趣表”。但是，如果您想按照自己的方式进行操作，则应该从数据库中获取数据并分解字符串：

```
$interests = explode(",", $db_stored_data); 
```

那里有一个具有不同兴趣的数组。之后，当您创建复选框时，您应该检查兴趣是否在此数组中，并根据您是否检查它。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:15:37.590

您需要的 HTML 是

```
<input type="checkbox" checked="checked" name="..." id="..." value="..."> 
```

`checked="checked"`是重要的一点。有关详细信息，请参阅[http://www.w3.org/TR/html-markup/input.checkbox.html#input.checkbox](http://www.w3.org/TR/html-markup/input.checkbox.html#input.checkbox)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:13:10.067

我html5，复选框中的属性是checked="checked"。但我认真建议您在提问之前先学习如何编码

# php - 无法 Json 解码

> ID：12004608
> 
> 赞同：0
> 
> 时间：2012-08-17T11:07:08.857
> 
> 标签：php, json

我似乎被 JSON 解码困住了，我不知道如何解码 json 对象，或者我做错了什么，我正在做：

```
$error_fields_structure['product_id'] = $this->input->post('product_id');
$error_fields_structure['main_product_quantity'] = $this->input->post('quantity');
$error_fields_structure = json_encode($error_fields_structure); 
```

我将 $error_fields_structure 传递给我的视图，并在我的 java 脚本中执行以下操作：

```
<?php print_r(json_decode($error_fields_structure)); ?>; 
```

我在萤火虫和以下输出中收到错误

```
 stdClass Object
(
[product_id] => 62
[product_quantity] => 65
); 
```

但如果我这样做

```
 <?php print_r(json_decode($error_fields_structure['product_id'])); ?>; 
```

它给了我一个空字符串和一个错误我如何从 json 对象 $error_fields_structure 获取特定的 product_id 和 product_quantity

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:09:44.770

您只能解码有效的 json 字符串。

```
<?php print_r(json_decode($error_fields_structure['product_id'])); ?>; 
```

不正确，因为 $error_fields_structure['product_id'] 不是 json 字符串。

试试这个 ：

```
<?php 
$errorFieldsArr = json_decode($error_fields_structure,true);  //convert json string to array
var_dump($errorFieldsArr['product_id']); // get element from array
 ?> 
```

或者

```
<?php 
$errorFieldsArr = json_decode($error_fields_structure);  //convert json string to stdobject
var_dump($errorFieldsArr->product_id ); // get element from object
 ?> 
```

# css - chrome BORDER 不带边框 RADIUS 舍入

> ID：12004612
> 
> 赞同：0
> 
> 时间：2012-08-17T11:07:19.353
> 
> 标签：css, google-chrome

我有一张图片

```
<img class="user-img" src="user_img/usr.jpg" alt="username" /> 
```

并添加 100px 的半径来创建一个圆。

```
.user-img {
  width: 170px;
  height: 170px;
  -moz-border-radius: 100px;
  -webkit-border-radius: 100px;
  -khtml-border-radius: 100px ;
  border-radius: 100px;
  -moz-box-shadow: 0px 10px 10px 0px #999999; /* Firefox */
  -webkit-box-shadow: 0px 10px 10px 0px #999999; /* Safari, Chrome */
  box-shadow: 0px 10px 10px 0px #999999; /* CSS3 */
} 
```

这工作正常，但后来我添加

```
 border: solid 7px white; 
```

这在 FF 中有效，但在 Chrome 中，边框不遵循圆形 img 的半径。

这是一个演示[http://jsfiddle.net/afro360/zcQ3G/2/](http://jsfiddle.net/afro360/zcQ3G/2/)

建议任何人？

谢谢

# javascript - JSLint 如何允许 `in` 运算符？

> ID：12004613
> 
> 赞同：2
> 
> 时间：2012-08-17T11:07:19.403
> 
> 标签：javascript, jslint

我正在尝试遵循 JSLint 约定，但在使用`in`运算符时遇到了一个奇怪的限制，就像在`if (a in b) { ... }`上下文中一样。

有没有办法允许这个特定的运营商？我可以忍受 ++ 被 += 1 取代，但没有任何类比`in`，并且通过禁止它，它使得对继承属性和自身属性的探测非常麻烦，绝对没有理由。

JSLint 本身建议使用`hasOwnProperty`或比较`undefined`- 但两者都做错了（可能存在属性，但值为`undefined`，可能在相关对象的原型上声明属性）。

解决方法是遍历对象的所有属性并将它们与有问题的属性进行比较，但这会立即将 O(1) 操作转换为 O(n)...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T01:57:59.217

对于那些在其他情况下使用 JSLint 的人，这里有一些潜在的解决方案：

1.  编写一个实用程序函数来将`in`运算符的使用本地化到该函数。然后从 linting 中排除该文件。
2.  使用 JSLint 的补丁版本（搜索`'infix_in'`- 我认为注释掉`warn()`调用会起作用）。
3.  在 JSLint 输出上运行脚本以过滤掉与 operator 相关的错误`in`。在这种情况下，字符串是唯一的，因此应该很容易可靠地过滤掉。

顺便说一句，这里提到的另一个烦恼——替换`++`为`+= 1`——*可以*关闭。只需使用该`plusplus: true`选项。

# html - 为 1027x768 屏幕调整现有标记

> ID：12004614
> 
> 赞同：0
> 
> 时间：2012-08-17T11:07:23.287
> 
> 标签：html, css, responsive-design, screen-resolution

有一个 HTML 页面[http://s2.ralfgroup.com在](http://s2.ralfgroup.com/)*1280x1024*上正确显示，但不幸的是超出了*1027x768*的屏幕。

实际上问题在于主页上的导航（房间图像）。*对于1027x768*分辨率的屏幕来说太大了。

任何人都可以提出一个更好的方法来解决这个问题。

在此先感谢您的帮助。

请在屏幕截图下方找到页面在*1027x768*屏幕上的外观： ![1024x768 屏幕分辨率的外观](../Images/cff34c609528d31afe0351957ac5b8bc.png)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:11:37.073

只需`min-width`在您的身体标签中定义如下所述`CSS`：-

我们正在`min-width`根据您的父`#block-views-categories-b-cat-menu`div 宽度定义...

```
body {
    color: #E9E6D9;
    font: 17px/1.3em "Myriad Pro","Trebuchet MS",sans-serif;
    min-width: 1220px;
} 
```

我希望这对你有用.......

# sql-server-2008 - 如何在 SQL Server 2008 上创建临时用户

> ID：12004620
> 
> 赞同：0
> 
> 时间：2012-08-17T11:08:11.913
> 
> 标签：sql-server-2008

我使用 SQL Server Management Studio 来管理我的 SQL Server。从 Excel 中的自动 vba 代码访问它时，我需要添加`genericReadOnly`和`genericReadWrite`使用。包含此代码的文件将分发给许多人，而不是我想单独添加到服务器。

我试过添加这个通用用户帐户，但被告知

> *genericReadOnly 不是有效的登录名或您没有权限。*

服务器管理员认为用户名必须存在于 Active Directory 中。

这是标准，还是可以改变的坐姿，如果可以，如何改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:11:25.847

如果您在 SQL Server 上使用混合身份验证，则可以创建 SQL Server 登录名（通过 SSMS 对象资源管理器上的 security\logins 树），然后在数据库上创建一个用户。

如果您仅使用 Windows 身份验证，那么是的，您需要映射到该用户的 Windows 登录帐户。

要更改身份验证模式... [http://msdn.microsoft.com/en-us/library/ms188670.aspx](http://msdn.microsoft.com/en-us/library/ms188670.aspx)

# iphone - iPhone 在重新连接时未发现蓝牙 LE 标签上的服务

> ID：12004623
> 
> 赞同：9
> 
> 时间：2012-08-17T11:08:25.720
> 
> 标签：iphone, xcode, ios5, bluetooth, core-bluetooth

我正在开发适用于 iOS 的蓝牙 LE 应用程序。我在 iOS 中使用 Core Bluetooth 框架来处理所有通信。

**问题与描述：**

当我使用单个标签时，尽管有许多连接和断开连接，但单个标签无缝连接并且手机发现它提供服务。

此外，当多个低功耗蓝牙标签首次连接时，它们会无缝连接，手机会发现它们的服务。

当标签断开连接然后重新连接到手机时，标签连接正常。但是两个标签之一（任何一个）似乎都没有宣传其服务。即当应用程序打开并且标签重新连接时，***DiscoverServices***方法不会调用***didDiscoverServices***委托。

为什么只有在与多个设备连接时才会发生这种情况。

我已经正确设置了***peripheral.delegate***。我已经尝试了一切，包括重复重新连接、重复对标签的 DiscoverServices 调用。似乎没有任何效果。

如何将多个标签重新连接到手机并仍然发现所有服务。

**请帮忙**

谢谢，
Manju

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-16T17:28:19.917

我遇到了同样的问题，但意识到我没有将其设置`delegate`为`CBPeripheral`after`didConnectPeripheral`被调用。

```
- (void) centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral
{
    NSLog(@"Peripheral Connected: %@", peripheral.name);

    peripheral.delegate = self;

    if (peripheral.services) {
        [self peripheral:peripheral didDiscoverServices:nil];
    } else {
        [peripheral discoverServices:@[[CBUUID UUIDWithString:CUSTOM_UUID]]];
    }  
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-03T14:58:12.527

我在使用 CoreBluetooth 连接到蓝牙 LE 设备时遇到了类似的问题，在我的情况下，我从我的 Mac（中央）连接到 iOS 设备（外围设备）。

如果我理解正确，模式非常一致，当我第一次运行我的 Mac 应用程序进行调试时，它总是检测到并连接到任何蓝牙 LE 设备（外围设备），最重要的是，它还可以很好地发现它们的服务/特性。问题从第二次运行开始（例如，更改一些代码，点击 cmd-R 重新启动调试）。中央仍然检测外围设备并连接到它们，但是它无法发现任何服务/特征。换句话说，委托`peripheral:didDiscoverServices:`永远`peripheral:didDiscoverCharacteristicsForService:error:`不会被调用。

经过大量试验和错误的解决方案非常简单。似乎 CoreBluetooth 缓存`services`和`characteristics`仍然连接的外围设备，虽然在本地看起来它已经与应用程序断开连接，但外围设备仍然保持与系统的蓝牙连接。对于这些类型的连接，不需要（重新）发现服务和特性，只需直接从外围对象访问它们，检查`nil`是否应该发现它们。此外，如前所述，由于外围设备处于连接之间的状态，因此最好`cancelPeripheralConnection:`在尝试连接之前立即调用。它的要点如下，假设我们已经发现了要连接的外围设备：

```
-(void) centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI
{
    [central cancelPeripheralConnection:peripheral]; //IMPORTANT, to clear off any pending connections    
    [central connectPeripheral:peripheral options:nil];
}

-(void) centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral
{
    peripheral.delegate = self;

    if(peripheral.services)
        [self peripheral:peripheral didDiscoverServices:nil]; //already discovered services, DO NOT re-discover. Just pass along the peripheral.
    else
        [peripheral discoverServices:nil]; //yet to discover, normal path. Discover your services needed
}

-(void) peripheral:(CBPeripheral *)peripheral didDiscoverServices:(NSError *)error
{
    for(CBService* svc in peripheral.services)
    {
        if(svc.characteristics)
            [self peripheral:peripheral didDiscoverCharacteristicsForService:svc error:nil]; //already discovered characteristic before, DO NOT do it again
        else
            [peripheral discoverCharacteristics:nil
                                     forService:svc]; //need to discover characteristics
    }
}

-(void) peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error
{
    for(CBCharacteristic* c in service.characteristics)
    {
        //Do some work with the characteristic...
    }
} 
```

这对我来说适用于 Mac 应用程序中的 CBCentralManager。从未在 iOS 中测试过，但我认为它应该非常相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T05:17:15.097

事实证明，我在“ ***didDiscovercharacteristicsForService*** ”委托方法中向设备发出了导致连接不稳定的命令。

如果您遇到类似问题，我建议您让委托方法在没有任何干预（**任何类型**）的情况下完成，并将 CBPeripheral 传递给您设计的另一个函数，以向设备传递任何值/发出命令。

无论如何，谢谢威廉森。

所以步骤如下..
1> 搜索标签，
2> 如果在范围内，连接到标签
3> 如果已连接，调用 DISCOVER 服务方法（不要中断）
4> 在 DidDiscoverServices，调用 DISCOVER 特征方法
..
在 DidDiscoverCharacteristics方法，等到发现所有特征。然后，最后，在代码中调用一个函数，该函数将进行必要的设置..
...
**代码示例**

```
-(void)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(NSError *)error
{

    for (int i=0; i < peripheral.services.count; i++) {
        CBService *s = [peripheral.services objectAtIndex:i];
        printf("Fetching characteristics for service with UUID : %s\r\n",[self CBUUIDToString:s.UUID]);
        [peripheral discoverCharacteristics:nil forService:s];
    }

}

- (void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error
{        
    if (!error)
    {
        CBService *s = [peripheral.services objectAtIndex:(peripheral.services.count - 1)];
        if([self compareCBUUID:service.UUID UUID2:s.UUID])
        {
           // This is when the **Tag** is completely connected to the Phone and is in a mode where it can accept Instructions from Device well.

            printf("Finished discovering characteristics");
           // Now Do the Setup of the Tag
            [self setupPeripheralForUse:peripheral];

        }
    }

    else
    {
        printf("Characteristic discorvery unsuccessfull !\r\n");
    }
}

-(void) setupPeripheralForUse:(CBPeripheral *)peripheral
{

    // DO all your setup in this function. Separate Perpiheral Setup from the process that synchronizes the tag and the phone. 

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-12T20:54:19.983

我一直有同样的问题。在我的情况下，它似乎发生了大约 1/3 的时间。我尝试了 PL 提供的解决方案，但在 iOS 上没有成功。这里可能有许多移动部件在起作用，这可能会导致这个问题（蓝牙设备固件、CoreBluetooth 等），但我通过简单地跟踪 NSMutableDictionary 中等待服务/特征发现的设备并使用 GCD 来解决它检查它是否在合理的时间内完成了它的发现，并在必要时重试。所以是这样的：

```
- (void)requestDiscoverServicesForPeripheral:(CBPeripheral *)peripheral 
{
      peripheral.delegate = self;
      NSString *uuid =[self stringUUIDForUUID:peripheral.UUID];
      NSLog(@"discovering %d services ", self.interestingServices.count);
      [peripheral discoverServices:self.interestingServices];
      [self.pendingConnectionDevices setObject:peripheral forKey:uuid];
       __weak typeof(self) weakSelf = self;
      dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 *NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
        if ([weakSelf.pendingConnectionDevices objectForKey:uuid]) {

               //request discover services again
               NSLog(@"services did not discover, requesting again!");
               [weakSelf.btManager cancelPeripheralConnection:peripheral];
               [weakSelf.btManager connectPeripheral:peripheral options:nil];
         }
    });
 } 
```

然后，当`peripheral:didDiscoverServices:error`回调时，我将它从我的 pendingConnectionDevices 字典中删除。这似乎工作得很好。我已经看到它在成功之前尝试发现服务多达 3 次。我希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-28T06:59:15.030

有时是硬件问题。我刚刚遇到一个情况，硬件将进入可扫描、可连接的睡眠模式，但根本不回调discoverServices。

还有一种情况发生在我整夜开发BLE时，突然，无论我做什么，设备都会对discoverServices保持沉默。最后我发现如果我重新启动我的 iPhone5s 就会变得正常。

有一天，蓝牙硬件工程师告诉我，BLE 的规范只说设备必须在 30 秒内再次连接。因此，如果我一遍又一遍地连接和断开连接，它可能无法按预期工作......我仍然对此表示怀疑。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-24T01:03:25.670

我试图应用上述所有答案，但它对我不起作用，因为我缺课`CBPeripheralDelegate`了。

```
class BLEHandler : NSObject, CBCentralManagerDelegate, CBPeripheralDelegate{

  func centralManager(_ central: CBCentralManager, didConnect peripheral: CBPeripheral) {

    peripheral.delegate = self

    peripheral.discoverServices(nil)

    print("Connected: \(peripheral.state == .connected ? "YES" : "NO")")
  }

  func peripheral(_ peripheral: CBPeripheral, didDiscoverServices error: Error?) {

    for service: CBService in peripheral.services! {
        peripheral.discoverCharacteristics(nil, for: service)
        print(service)
    }
  }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-20T16:05:34.463

我正在做你在回答中所说的一切，但我仍然不时看到这个问题。我的猜测是核心蓝牙进入一个奇怪的状态，可能是由于特定的连接、订阅和断开顺序。

我发现解决问题的唯一方法是重新启动 iOS 设备。这个问题可能会在 iOS 7.1 中得到修复。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-12T10:10:26.203

我的头痛是由于缺乏**对外围设备的强烈参考引起的**

所以我添加了参考，问题就消失了

```
private var activePeripheral: CBPeripheral?

func connect(_ peripheral: CBPeripheral) {
        disconnect(peripheral)
        activePeripheral = peripheral
        self.central.connect(peripheral, options: nil)
    } 
```

# c# - datagridview 文本框列的逗号分隔符

> ID：12004627
> 
> 赞同：2
> 
> 时间：2012-08-17T11:08:30.743
> 
> 标签：c#, .net, datagridview, controls

我需要 DataGridView 中的 Currency TextBox ，我搜索 Internet 并找到这个解决方案[[^]](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/9347456c-404d-45b4-8911-999419c94387) 但这在 dataGridView 单元离开事件时很有用，我需要在 textchange 中使用逗号分隔符，但是我为此目的编写了这个源：

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            TextBox txt_edit = e.Control as TextBox;
            if (txt_edit != null)
            {

                txt_edit.TextChanged += new EventHandler(txt_edit_TextChanged);
            }
        }

        private void txt_edit_TextChanged(object sender, EventArgs e)
        {
            TextBox txt = (TextBox) sender;

            string str = txt.Text;
            str = str.Replace(",", "");
            int len = str.Length;
            if (len > 3)
            {
                str = str.Insert(len - 3, ",");
                len = len - 3;
                while (len > 3)
                {
                    str = str.Insert(len - 3, ",");
                    len = len - 3;
                }
            }

            dataGridView1.EndEdit();
            dataGridView1.CurrentRow.Cells[0].Value = str;
            dataGridView1.BeginEdit(false);
        } 
```

当我运行我的程序并输入数字时，此源可正常工作 3 个第一位数字，直到键入第四个数字来显示此错误： ![在此处输入图像描述](../Images/ac86cf327c11de715aeb13c035944d1c.png)

为什么会出现这个错误？有没有更好的方法来解决问题？tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:57:07.543

替换这个：

```
dataGridView1.EndEdit();
dataGridView1.CurrentRow.Cells[0].Value = str;
dataGridView1.BeginEdit(false); 
```

和：

```
int selStartFromEnd = txt.Text.Length - txt.SelectionStart;
txt.TextChanged -= txt_edit_TextChanged;
txt.Text = str;
txt.TextChanged += txt_edit_TextChanged;
if (txt.Text.Length - selStartFromEnd >= 0)
    txt.SelectionStart = txt.Text.Length - selStartFromEnd;
dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:26:15.953

这应该有效....（不是 100% 确定）

```
delegate void SetColumnIndex(); 
private void txt_edit_TextChanged(object sender, EventArgs e) 
        { 

 //.....
  dataGridView1.EndEdit(); 

  SetColumnIndex method = new SetColumnIndex(Mymethod); 
  dataGridView1.CurrentRow.Cells[0].Value = str;
  dataGridView1..BeginInvoke(method);

         }         

 private void Mymethod()
        {
            dataGridView1.CurrentCell = myGridView.CurrentRow.Cells[0];
            dataGridView1.BeginEdit(false);
        } 
```

# android - ItemizedOverlay 开源 - 为什么他们在draw方法上同步overlayItem？

> ID：12004636
> 
> 赞同：1
> 
> 时间：2012-08-17T11:08:57.763
> 
> 标签：android, google-maps, itemizedoverlay

此代码片段取自[此处](http://www.java2s.com/Open-Source/Android/App/mapsforge/org/mapsforge/android/maps/ItemizedOverlay.java.htm)：

```
 protected void drawOverlayBitmap(Canvas canvas, Point drawPosition, Projection projection,
      byte drawZoomLevel) {
    synchronized (this.visibleItems) {
      // erase the list of visible items
      this.visibleItems.clear();

      this.numberOfItems = size();
      if (this.numberOfItems < 1) {
        // no items to draw
        return;
      }

      // draw the overlay items
      for (int itemIndex = 0; itemIndex < this.numberOfItems; ++itemIndex) {
        // get the current item
        this.overlayItem = createItem(itemIndex);

        synchronized (this.overlayItem) {
          // check if the item has a position
          if (this.overlayItem.getPoint() == null) {
            continue;
          }

          // make sure that the cached item position is valid
          if (drawZoomLevel != this.overlayItem.cachedZoomLevel) {
            this.overlayItem.cachedMapPosition = projection.toPoint(
                this.overlayItem.getPoint(),
                this.overlayItem.cachedMapPosition, drawZoomLevel);
            this.overlayItem.cachedZoomLevel = drawZoomLevel;
          }

          // calculate the relative item position on the display
          this.itemPosition.x = this.overlayItem.cachedMapPosition.x - drawPosition.x;
          this.itemPosition.y = this.overlayItem.cachedMapPosition.y - drawPosition.y;

          // get the correct marker for the item
          if (this.overlayItem.getMarker() == null) {
            if (this.defaultMarker == null) {
              // no marker to draw the item
              continue;
            }
            this.itemMarker = this.defaultMarker;
          } else {
            this.itemMarker = this.overlayItem.getMarker();
          }

          // get the position of the marker
          this.markerBounds = this.itemMarker.copyBounds();

          // calculate the bounding box of the marker
          this.left = this.itemPosition.x + this.markerBounds.left;
          this.right = this.itemPosition.x + this.markerBounds.right;
          this.top = this.itemPosition.y + this.markerBounds.top;
          this.bottom = this.itemPosition.y + this.markerBounds.bottom;

          // check if the bounding box of the marker intersects with the canvas
          if (this.right >= 0 && this.left <= canvas.getWidth() && this.bottom >= 0
              && this.top <= canvas.getHeight()) {
            // set the position of the marker
            this.itemMarker.setBounds(this.left, this.top, this.right, this.bottom);

            // draw the item marker on the canvas
            this.itemMarker.draw(canvas);

            // restore the position of the marker
            this.itemMarker.setBounds(this.markerBounds);

            // add the current item index to the list of visible items
            this.visibleItems.add(Integer.valueOf(itemIndex));
          }
        }
      }
    }
  } 
```

现在我发现很难得到的是他们为什么要同步overlayItem，这对我来说毫无意义，我认为它的冗余有几个原因，最重要的是，在同步块中，有一个参考OverlayItem 类的最后一个成员是 GeoPoint，那么认为其他线程可以改变这一点有什么意义？！

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T11:32:37.217

对象市场最终将对象标记为常量，例如具有：

```
final ArrayList<Integer> visibleItems; 
```

因此，您不允许将另一个对象分配给`visibleItems`，因为`visibleItems`标记为`final`：

例如，尝试在下面的代码中执行类似操作，将导致编译错误：

```
ArrayList<Integer> anotherArray = new ArrayList<Integer>();
visibleItems = anotherArray; //Compile error. 
```

但是，这并不意味着数组列表包含的所有元素也都标记为`final`。不。

一个线程可能会添加新元素，另一个线程可能会删除一些元素：

```
anotherArray.add(2);
anotherArray.add(5);
//........

anotherArray.remove(5); 
```

这就是为什么要保留变量`syncronized`，以确保不超过 1 个线程可以同时更新数组列表的内容。

# iphone - ios 核心数据无法使用此代码找到实体名称“Cartdetail”的 NSManagedObjectModel

> ID：12004640
> 
> 赞同：0
> 
> 时间：2012-08-17T11:09:09.043
> 
> 标签：iphone, objective-c, ios, core-data

嗨，我正在创建一个应用程序，该应用程序需要将我的标签内容中的数据保存到我的核心数据模型中，该模型名为 cart.xcdatamodeld，我的实体名为 Cartdetail。当我在应用程序中按下保存按钮时，出现以下错误...

```
- (void)viewDidLoad {    
if (managedObjectContext == nil) { 
managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate]managedObjectContext];
}
}

- (IBAction)SaveTest:(id)sender {

ViewController2 *second = (ViewController2 *)[NSEntityDescription insertNewObjectForEntityForName:@"Cartdetail" inManagedObjectContext:managedObjectContext];
}

*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name 'Cartdetail''
*** Call stack at first throw:
(
0   CoreFoundation                      0x010265a9 __exceptionPreprocess + 185
1   libobjc.A.dylib                     0x01444313 objc_exception_throw + 44
2   CoreData                            0x00036ebb +[NSEntityDescription entityForName:inManagedObjectContext:] + 187
3   CoreData                            0x0006e9eb +[NSEntityDescription insertNewObjectForEntityForName:inManagedObjectContext:] + 59
4   tablevc                             0x00009c97 -[Description alertView:clickedButtonAtIndex:] + 519
5   UIKit                               0x00621c5f -[UIAlertView(Private) _buttonClicked:] + 296
6   UIKit                               0x002784fd -[UIApplication sendAction:to:from:forEvent:] + 119
7   UIKit                               0x00308799 -[UIControl sendAction:to:forEvent:] + 67
8   UIKit                               0x0030ac2b -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
9   UIKit                               0x003097d8 -[UIControl touchesEnded:withEvent:] + 458
10  UIKit                               0x0029cded -[UIWindow _sendTouchesForEvent:] + 567
11  UIKit                               0x0027dc37 -[UIApplication sendEvent:] + 447
12  UIKit                               0x00282f2e _UIApplicationHandleEvent + 7576
13  GraphicsServices                    0x01c34992 PurpleEventCallback + 1550
14  CoreFoundation                      0x01007944 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
15  CoreFoundation                      0x00f67cf7 __CFRunLoopDoSource1 + 215
16  CoreFoundation                      0x00f64f83 __CFRunLoopRun + 979
17  CoreFoundation                      0x00f64840 CFRunLoopRunSpecific + 208
18  CoreFoundation                      0x00f64761 CFRunLoopRunInMode + 97
19  GraphicsServices                    0x01c331c4 GSEventRunModal + 217
20  GraphicsServices                    0x01c33289 GSEventRun + 115
21  UIKit                               0x00286c93 UIApplicationMain + 1160
22  tablevc                             0x00001d4a main + 170
23  tablevc                             0x00001c95 start + 53
 )
 terminate called throwing an exception 
```

我是iOS新手..请帮助我..谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:23:27.840

您可能还没有在 AppDelegate 中设置托管对象上下文！看一下苹果提供的 iPhoneCoreDataRecipes 示例的 AppDelegate 实现： [iPhoneCoreDataRecipes 示例](http://developer.apple.com/library/ios/#samplecode/iPhoneCoreDataRecipes/Introduction/Intro.html)

# c# - 绑定到内部 ViewModel-Property

> ID：12004642
> 
> 赞同：9
> 
> 时间：2012-08-17T11:09:17.370
> 
> 标签：c#, wpf, xaml, data-binding, internal

我有一个带有 ViewModel 类作为 DataContext 的 UserControl：

XAML

```
<UserControl x:Class="DotfuscatorTest.UserControl.View.UserControlView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" >    
<StackPanel>
  <TextBox Text="{Binding ViewModelProperty}"/>
</StackPanel>
</UserControl> 
```

代码隐藏：

```
namespace DotfuscatorTest.UserControl.View
{
   using ViewModel;
   public partial class UserControlView
   {
      public UserControlView()
      {
         InitializeComponent();
         DataContext = new UserControlViewModel();         
      }
   }
} 
```

视图模型类：

```
namespace DotfuscatorTest.UserControl.ViewModel
{
   public class UserControlViewModel
   {
      private string viewModelProperty = "hello world";

      internal string ViewModelProperty
      {
        get { return viewModelProperty; }
        set { viewModelProperty = value; }
      }
   }
} 
```

如果我将 ViewModelProperty 设置为 public，则绑定工作正常。但是，如果我像上面那样将属性设置为内部，则绑定失败（绑定错误：找不到属性...）。

我认为在同一个程序集中可以像 public 一样访问内部属性。我也可以毫无问题地从 UserControl-codebehind 访问该属性：

```
{
...

((UserControlViewModel)DataContext).ViewModelProperty = "hallo viewmodel";

... 
```

这种行为有什么解释吗？

提前致谢， rhe1980

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-17T11:14:25.937

[如此处](http://msdn.microsoft.com/en-us/library/ms743643.aspx)所述

> 用作绑定的绑定源属性的属性必须是类的公共属性。不能出于绑定目的访问显式定义的接口属性，也不能访问没有基本实现的受保护、私有、内部或虚拟属性。

# jquery - 在 jQuery 中沿多个 .on 事件传递变量

> ID：12004662
> 
> 赞同：0
> 
> 时间：2012-08-17T11:10:35.650
> 
> 标签：jquery, variables, delegates

我有这个代码：

```
$(document).on({
    focus: function(){
        if ( $(this).val() == inputvalue ){
            $(this).val("");
        }
        $(this).css({"box-shadow":"inset 2px 2px 5px #c7bda8"});
    },
    blur: function(){
        if ( $(this).val() == "" ){
            $(this).val(inputvalue);
        }
        $(this).css({"box-shadow":"none"});
    }
}, "input[type='text']"); 
```

如何传递一个变量（“inputvalue”），其中包含成为焦点的输入字段的值？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:36:08.627

尝试在更高的范围内定义它，例如：

```
var inputvalue = $('input').val();

$(document).on({
    focus: function(){
        if ( $(this).val() == inputvalue ){
            $(this).val("");
        }
        $(this).css({"box-shadow":"inset 2px 2px 5px #c7bda8"});
    },
    blur: function(){
        if ( $(this).val() == "" ){
            $(this).val(inputvalue);
        }
        $(this).css({"box-shadow":"none"});
    }
}, "input[type='text']"); 
```

# android - 后台缓冲完成后播放视频

> ID：12004663
> 
> 赞同：0
> 
> 时间：2012-08-17T11:10:36.423
> 
> 标签：android, android-mediaplayer, android-video-player

`MediaPlayer`在`Activity`后台完成缓冲后，我正在尝试播放视频流。为什么是另一个`Activity`？它是视频播放库的一部分，无论当前处于活动状态的布局如何，视频都必须覆盖用户的应用程序。

我的想法是创建一个`MediaPlayer`对象，开始缓冲（使用`prepare`方法），并在缓冲完成后开始一个新`Activity`的，`SurfaceView`用于显示视频。在 new中`Activity`，我将 的 分配给`SurfaceHolder`（`SurfaceView`with`MediaPlayer`方法`setDisplay`）并启动播放，但没有成功：我看到`SurfaceView`没有视频播放。

我认为，问题在于`MediaPlayer's` `prepare`方法所期望的，它`SurfaceHolder`是用它之前的方法设置的`setDisplay`。

有什么想法可以使此设置正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:03:17.650

好吧，经过数周的尝试和进一步调查，答案如下：

使用当前版本的 Android SDK 无法在后台预加载视频，`VideoView`因为`MediaPlayer`后者需要创建的 Surface 才能开始预加载。因此，您`VideoView`或您`MediaPlayer`必须（临时）成为应用程序布局的可见部分，然后才能开始预加载（使用`prepare()`或`prepareAsync()`）。此解决方案需要在用户布局中注入这些`Views`内容或启动一个临时 Activity 来初始化 Surface，这对我的主题（视频 SDK）来说太具有侵入性了。

如果您的要求是在不让用户等待完成缓冲的情况下显示视频，并且您无法控制应用程序的布局，我建议将完整的视频存储到 sd 卡，然后开始播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:05:50.577

启动一个Async任务，在doinBackground()方法体内启动一个onBuffering监听器，，，你可以将数据存储在缓存中，然后就可以播放视频了。可能这可以执行您所需的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:28:17.963

我做了什么我告诉你，它对我有用，

做了一个类扩展异步并实现 OnPrepared 监听器，然后在方法中

```
doinbackgroung(){
Display display =getWindowManager().getDefaultDisplay();
video_view.setOnPreparedListener(this);
video_view.setVideoURI(Uri.parse(path)); 
return null;
} 
```

然后在 onPrepared() 中只是 video_view.start();

如果您希望视频在横向和纵向模式下都能正常播放，您还可以实现 onVideoSizeChangedListener .. 这似乎可行

# mysql - 多个连接的多个计数

> ID：12004675
> 
> 赞同：0
> 
> 时间：2012-08-17T11:11:41.080
> 
> 标签：mysql, sql

我正在一个带有图像和图像标签的网站上工作（à la Facebook）。图像在相册中。

DB结构的重要位如下

```
user: id INT
album: id INT, user_id INT
photo: id INT, album_id INT
tag: id INT, photo_id 
```

给定用户 ID、相册 ID、该相册中的照片总数以及该相册中的总标签，我正在尝试让一个会返回的呼叫。

获取全部照片或全部标签都可以，但不能同时获取两者。在这种情况下，它会返回两次标签的总数。

以下是我的 SQL 调用：

```
SELECT album.id, COUNT(photo.id), COUNT(tag.id) 
FROM album 
LEFT OUTER JOIN photo ON (album.id = photo.album_id) 
LEFT OUTER JOIN tag ON (photo.id = tag.photo_id) 
WHERE album.user_id = 123 GROUP BY album.id 
ORDER BY album.id DESC LIMIT 0,25 
```

有什么想法我可以做得更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:14:52.897

您可以在计数中添加 DISTINCT

IE：

```
 COUNT(DISTINCT photo.id),
   COUNT(DISTINCT tag.id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T11:16:29.410

```
SELECT
  album.id AS album_id,
  COUNT(DISTINCT photo.id) AS count_photos,
  COUNT(DISTINCT tag,id) AS count_tags
FROM album 
LEFT JOIN photo ON album.id=photo.album_id 
LEFT JOIN photo ON photo.id=tag.photo_id
WHERE album.user_id = 123
GROUP BY album.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:11:01.900

您遇到的问题是因为您正在沿着两个不同的维度、照片和标签加入。尽管 COUNT(DISTINCT) 适用于计数，但您可能还希望聚合其他信息。

更通用的方法是将结果分成子查询：

```
SELECT a.id, NumPhotos, NumTags
FROM (select album.id, count(*) as NumPhotos
      from album LEFT OUTER JOIN
           photo
           ON (album.id = photo.album_id)
     ) a  LEFT OUTER JOIN
     (select album.id, count(*) as NumTags
      from album LEFT OUTER JOIN
           photo
           ON (album.id = photo.album_id)  LEFT OUTER JOIN
           tag
           ON (photo.id = tag.photo_id)
     ) b
     on a.id = b.id
WHERE a.user_id = 123
ORDER BY a.id DESC
LIMIT 0,25 
```

# matlab - 在 matlab 中用 imread 读取图像文件会给出什么样的表示？

> ID：12004679
> 
> 赞同：0
> 
> 时间：2012-08-17T11:11:56.533
> 
> 标签：matlab, image-processing, file-io

我是 matlab 的新手，正在做一些小的图像处理任务。我正在使用 imread 读取一些图像，但在读取图像后我没有得到什么样的表示。它是图像直方图的二进制表示吗？

如果有人可以描述我，我将不胜感激:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T11:15:02.677

来自[imread](http://www.mathworks.nl/help/techdoc/ref/imread.html)：

> 返回值 A 是一个包含图像数据的数组。如果文件包含灰度图像，则 A 是 M×N 数组。如果文件包含真彩色图像，则 A 是一个 M×N×3 数组。对于包含使用 CMYK 颜色空间的彩色图像的 TIFF 文件，A 是一个 M×N×4 数组。有关详细信息，请参阅格式特定信息部分中的 TIFF。

所以它是一个数组，因为你的图像也是一个像素数组。

顺便说一句：自己尝试一下并没有什么坏处……

# objective-c - 无法在设备上运行代码

> ID：12004705
> 
> 赞同：0
> 
> 时间：2012-08-17T11:13:35.097
> 
> 标签：objective-c, ios, xcode, ios-simulator

我正在尝试合并视频，并且代码在模拟器上运行良好。我可以合并视频，但是当我在设备上运行相同的代码时，它给了我这个异常

**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'* -[__NSArrayM insertObject:atIndex:]: object cannot be nil**

代码在这里：

```
AVMutableComposition *mixComposition = [AVMutableComposition composition]; AVMutableCompositionTrack *compositionTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid]; NSError * error = nil; NSMutableArray * timeRanges = [NSMutableArray arrayWithCapacity:videoClipPaths.count]; NSMutableArray * tracks = [NSMutableArray arrayWithCapacity:videoClipPaths.count]; for (int i=0; i<[videoClipPaths count]; i++) { AVURLAsset *assetClip = [AVURLAsset URLAssetWithURL:[videoClipPaths objectAtIndex:i] options:nil]; AVAssetTrack *clipVideoTrackB = [[assetClip tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

    [timeRanges addObject:[NSValue valueWithCMTimeRange:CMTimeRangeMake(kCMTimeZero, assetClip.duration)]];
    [tracks addObject:clipVideoTrackB];
}

NSLog(@"HELLO: %@", timeRanges );
[compositionTrack insertTimeRanges:timeRanges ofTracks:tracks atTime:kCMTimeZero error:&error];

AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];
// NSParameterAssert(exporter != nil);

NSArray *t; NSString *u;

t = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
u = [t objectAtIndex:0];
NSString *finalPath = [u stringByAppendingPathComponent:@"final.mov"];
NSURL *lastURL = [NSURL fileURLWithPath:finalPath];
exporter.outputFileType = AVFileTypeQuickTimeMovie;
exporter.outputURL = lastURL;
[exporter exportAsynchronouslyWithCompletionHandler:^(void){
    switch (exporter.status) {
        case AVAssetExportSessionStatusFailed:
            NSLog(@"exporting failed");
            [SVProgressHUD dismiss];
            break;
        case AVAssetExportSessionStatusCompleted:
            NSLog(@"exporting completed");
            UISaveVideoAtPathToSavedPhotosAlbum(finalPath, self, nil, NULL);
             [SVProgressHUD dismiss];
            break;
        case AVAssetExportSessionStatusCancelled:
            NSLog(@"export cancelled");
            break;
    }
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:44:18.357

很可能您的应用程序正在使用驻留在 Mac 上的某些文件，但您尚未在手机上安装并正确寻址。

但是，无论如何，记录“tracks”以及“timeRanges”。

# c# - 将存储过程分配给变量

> ID：12004706
> 
> 赞同：0
> 
> 时间：2012-08-17T11:13:35.260
> 
> 标签：c#, asp.net, sql-server-2008

我有一个名为的存储过程`Decryptpaswd`，我想将该过程的结果分配给一个名为的变量`query`，以便我可以在 switch 语句中使用它。

我怎样才能做到这一点？

```
public void ValidateUser()
{
    SqlConnection conn = new SqlConnection(var3);

    String sql= "Decryptpaswd";
    SqlCommand cmd = new SqlCommand(sql, conn);
    cmd.CommandType = CommandType.StoredProcedure;
}

try
{
    conn.Open();

    **switch (query)**
    {
        case "AA": Response.Redirect("Home");
                   break;

        case "BB": Response.Redirect("Home1");
                   break;

        case "CC": Response.Redirect("Home2");
                   break;

        default: Response.Redirect("LogIn.aspx");
                 break;
    }
} 
```

**编辑：**存储过程接受两件事，用户名和密码。如果输入的用户名和密码是正确的，则返回角色名。所以这个角色名在案例语句中使用。

```
CREATE PROCEDURE [dbo].[Decryptpaswd] 
    (
    @Username varchar(10),
    @Pasword varchar(256)
    )
    as

    SELECT 
     Rolename FROM Users
        WHERE Username = @Username AND DecryptByCert(----('---'),Pass, @Paswd)= @Pasword
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:19:24.737

*听起来*您的 SP 返回（选择）一个字符串，并且您想对结果做一些事情......如果是这样：

```
string role;
using(SqlConnection conn = new SqlConnection(var3))
using(SqlCommand cmd = new SqlCommand("Decryptpaswd", conn))
{
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.AddWithValue("Username", username);
    cmd.Parameters.AddWithValue("Pasword", password);
    conn.Open();
    query = (string)cmd.ExecuteScalar();
}
switch(role) {
   ...
} 
```

您可能还想将一些参数添加到`cmd`.

# c# - 如何防止异步方法表单处理？

> ID：12004707
> 
> 赞同：1
> 
> 时间：2012-08-17T11:13:49.760
> 
> 标签：c#, asynchronous

我有这个问题，其中一部分代码处理速度比预期的要快。我在某些情况下调用 client.BeginConnect 并在处理任何其他代码之前连接它。

例子：

```
client.BeginConnect(remoteEP, new AsyncCallback(ConnectCallback), client); 

// this code below is preformed later because ConnectCallback is called to quickly 

Debug.WriteLine(client.LocalEndPoint.ToString()); 
```

这里的问题是 ConnectCallback 方法有时比代码 Debug.Writeline(....) 执行得更快。我只需要阻止或启用 ConnectCallback 函数，这样 Debug.Writeline 的执行速度就会比 ConnectCallback 快。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:22:01.930

这是一篇很棒的 MSDN 文章：[使用异步客户端套接字](http://msdn.microsoft.com/en-us/library/bbx2eya8.aspx)：

```
private static void ConnectCallback(IAsyncResult ar) {
    try {
        // Retrieve the socket from the state object.
        Socket client = (Socket) ar.AsyncState;

        // Complete the connection.
        client.EndConnect(ar);

        Console.WriteLine("Socket connected to {0}",
            client.RemoteEndPoint.ToString());

        // Signal that the connection has been made.
        connectDone.Set();
    } catch (Exception e) {
        Console.WriteLine(e.ToString());
    }
} 
```

因此，只需将`Debug.WriteLine()`调用移至您的`ConnectCallback()`方法中。

# android - TextView 中段落之间的距离

> ID：12004708
> 
> 赞同：4
> 
> 时间：2012-08-17T11:14:10.240
> 
> 标签：android

我使用 TextView 来显示由几个段落组成的文本。像这样的东西：

```
<TextView
    android:text="@string/foo"
/>

<resources>
    <string name="foo">Great Gauss! - cried Klapaucius - And where are the gruncheons? Where my dear, favorite pritons? Where now the gentle zits?!\nThey no longer are, nor ever will exist again - the machine said calmly - I executed, or rather only began to execute, your order...</string>
<resources> 
```

如何在不影响行间行的情况下更改段落之间的距离（一个段落的多行之间的距离）？

**编辑：** 也许我不够精确。是的，我知道既然我用“\n”做了换行符，我可以——通过类比——用“\n\n”做两个换行符。或者使用 HTML 进行这两个换行符。但我正在寻找一种方法来决定，例如，段落之间的空间应该正好是 17 dip。就像我可以（例如）在 CSS 中做的那样：

```
p {
    margin-bottom: 21px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:23:48.137

您可以考虑为您的字符串使用 HTML。这还有一个额外的好处，就是允许您使用粗体、斜体等。

在您的 strings.xml 中，您需要将以下代码用于 < >

```
&lt; &gt; 
```

意思是“小于”和“大于”。以下代码将 <br/> 作为额外的一行。

```
<resources>
    <string name="foo">Great Gauss! - cried Klapaucius - And where are the gruncheons? Where my dear, favorite pritons? Where now the gentle zits?! &lt;br/&gt;They no longer are, nor ever will exist again - the machine said calmly - I executed, or rather only began to execute, your order...</string>
<resources> 
```

设置您的 TextView 仍然相对相似，

```
message = getString(R.string.foo);
textView.setText(Html.fromHtml(message)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:18:23.790

您可以像这样使用 Html 文本而不是普通文本

```
Textview.setText(Html.fromHtml(" This portion Contains text with <b>html<b> <br/> <p> tags and others as per your requirement.</p> ")); 
```

希望这可以帮助你...

# knockout.js - 复选框始终处于选中状态

> ID：12004709
> 
> 赞同：1
> 
> 时间：2012-08-17T11:14:13.083
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在使用淘汰赛 JS 模板来显示控件。但复选框始终显示为已选中。下面我将 ActualValue 属性绑定到复选框，这是一个字符串属性。

**jQuery 模板**

```
<script type="text/x-jquery-tmpl" id="membershipMetaDataTemplate">
<tr>
    <td><span data-bind="text: DisplayName" ></span></td>
    {{if ObjectType() == 'string'}}
        <td><input type="text" data-bind="value: ActualValue, disable: ReadOnly" />
    {{/if}}

    {{if ObjectType() == 'boolean'}}
        <td><input type="checkbox" data-bind="checked: ActualValue, disable: ReadOnly" /></td>
    {{/if}}

    {{if ObjectType() == 'dropdown'}}
          <td><select data-bind="options: PermittedValues, value: ActualValue, disable: ReadOnly, optionsCaption: 'Choose...'"/></td>
    {{/if}}

</tr> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:41:22.993

在 JavaScript 中试试这个：

```
alert(new Boolean("true"));
alert(new Boolean("false"));
alert(new Boolean("")); 
```

前两个显示*真*，第三个显示*假*。这是因为，在 JavaScript 中，任何非空字符串都会转换为布尔值*true*。

在您的示例中，听起来您正在将字符串传递`"false"`给复选框。由于该字符串`"false"`是非空字符串，它具有布尔值*true*，因此复选框被勾选。

对此的一种解决方案是定义一个[可写的计算 observable](http://knockoutjs.com/documentation/computedObservables.html#writeable_computed_observables)`"true"`，它将字符串`"false"`转换为预期的布尔值：

```
var viewModel = {
    ActualValue: ko.observable("false")
};

viewModel.ActualValueAsBoolean = ko.computed({
    read: function () { return this.ActualValue() === "true"; },
    write: function (newValue) { this.ActualValue(newValue ? "true" : "false"); },
    owner: viewModel
});

ko.applyBindings(viewModel); 
```

然后将检查绑定到`ActualValueAsBoolean`而不是`ActualValue`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T02:18:59.263

我有一个实例，我正在映射一个 ajaxed 的 JSON 对象数组，因此它使创建计算的可观察变量变得混乱。

对于这种情况，我发现自定义活页夹不那么突兀。

这是我用的-

```
ko.bindingHandlers.stringToBool = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext)     {

        var value = valueAccessor();
        var val = value().toLowerCase() === 'true';
        $(element).prop('checked', val);
        ko.utils.registerEventHandler(element, "change", function () {
            var observable = valueAccessor();
            observable($(element).prop('checked'));
        });
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel,    bindingContext) {

    }
}; 
```

然后你使用这个而不是库存检查绑定来绑定

* * *

输入类型=“复选框”数据绑定=“字符串ToBool：值”

# opencv - Opencv - cvHoughLines2

> ID：12004714
> 
> 赞同：2
> 
> 时间：2012-08-17T11:14:25.250
> 
> 标签：opencv, hough-transform

我正在阅读，我在这本书中`Learning openCV`遇到了描述。`cvHoughLines2`但我无法理解一件事。

我读过霍夫变换，我想我理解它，所以参数`rho`和`theta`对我来说有点令人费解。当我们有方程`rho=xcos(theta)+ycos(theta)`时，当我们决定一组离散值时`theta`，`rho`应该自动知道 的值。

在这本书中，据说`opencv`创建了`rho`x`theta`累加器数组。

opencv 是否只是将角度离散化为 的乘积`360/theta`？但是`rho`参数如何拟合？`rho`离散化的值如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:24:51.947

你的问题不清楚，看来你很困惑。看看[这个页面](http://homepages.inf.ed.ac.uk/rbf/HIPR2/hough.htm)。给定属于一条线的一组点（x 和 y），您可以仅通过两个参数 r 和 theta 来描述同一条线。这是我们想要找到的两个独立参数，它们最能描述我们有点的线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-20T14:22:58.013

在开始时，您决定 theta 的向量让我们说 10 个数字，您需要将结果四舍五入以落在矩阵的像素中，其中行代表半径，列代表角度，因此如果某条线的角度和半径相同，它将向累加器添加一个值。[0 36 .. 360] 也是半径矢量 [1 2 3 .. 10] 然后你创建图像 M*N 全零让我们说例如只有 [0 0 0 0 0 0 0 0 0] 然后你执行你写的公式一些半径和角度你的矩阵变成 [ 1 0 0 0 0 0 0 0 0]

然后 [ 1 0 0 0 0 1 0 0 0] 然后 [ **2** 0 0 0 0 1 0 1 0] 依此类推，然后您可以设置阈值并仅找到一些线或某些角度。

# objective-c - 每个 tableviewcells 中的 uiwebview

> ID：12004717
> 
> 赞同：1
> 
> 时间：2012-08-17T11:14:27.063
> 
> 标签：objective-c, ios, uitableview, uiwebview

我需要在我的 Uitableview 的每个 tableviewcell 中显示每个 webview。使用下面的代码时，当有 2 个元素时，第一个单元格是空的，但第二个单元格是正确的。

hrs 和 hrsHtml 包含所有值，问题是只有最后一个数据显示在 tableview 的相应单元格中。其他单元格只是空白。

同样是总单元格为 2，首先我们只能看到第二个单元格，但是在滚动表格视图重新加载后，第二个单元格消失并显示第一个单元格。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
     return [brId count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil];
    if (cell == nil) {
        cell = [[ UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];

    }
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    [cell.contentView addSubview:hrs];

    hrsHtml = [NSString stringWithFormat:@"  <font size=\"2\"  face=\"Arial\">%@  </font>",[html objectAtIndex:indexPath.row]];

    [hrs loadHTMLString:hrsHtml baseURL:nil];

    return cell;
} 
```

出现tableview时的屏幕截图，单元格2中只有webview

![在此处输入图像描述](../Images/4f6577bdc04a6ff1ff45ddecb572aab2.png)

tableview滚动时的截图，只有单元格1中的webview，单元格2消失

![在此处输入图像描述](../Images/15b1caf722bb75f205b7a84e1225ef22.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:45:02.417

由于`hrs`和`hrsHtml`是单个对象，即使您有多个单元格，您也只有一个对象。如果您修改`hrs`，它将为所有单元格更改，因为它们似乎正在共享它。（除非您在某处有其他代码可以更改这些变量指向的对象。）

另一个奇怪的事情是，您使用`brId`数组来确定行数并使用`html`数组来获取行内容。如果它们不同步，您将遇到问题。

此外，您应该只在创建新单元格时向单元格添加子视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T05:29:34.113

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil] ;
    }

    hrs = [[UIWebView alloc] initWithFrame:CGRectMake(10,0,320,84)];

    hrs.userInteractionEnabled = YES;

    hrs.backgroundColor = [UIColor clearColor];

    hrsHtml = [NSString stringWithFormat:@"  <font size=\"2\"  face=\"Arial\">%@  </font>",[html objectAtIndex:indexPath.row]];

    [hrs loadHTMLString:hrsHtml baseURL:nil];

    [cell.contentView addSubview:hrs];

    hrsHtml = nil;

    return cell;

} 
```

现在 webview 在每个 tableviewcell 中正确加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:04:00.643

我认为您在初始化单元格时遇到问题尝试下面的代码

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
     cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil] autorelease];
} 
```

# ios4 - 根据 UIWindow 方向旋转 UIImageView？

> ID：12004720
> 
> 赞同：0
> 
> 时间：2012-08-17T11:14:40.073
> 
> 标签：ios4, uiimageview, image-rotation

我在 UIWindow 的底部有一个 UIImageView。我希望它始终在底部显示它，无论方向是什么，但在实现它时遇到了麻烦。有什么解决方案吗？

![在此处输入图像描述](../Images/dedee9b5b9c033035c9477b5ad0e4e96.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:36:23.457

```
NSLog(@"rotate");

if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation)){
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate; 

    // Rotate 90 degrees to hide it off screen
    CGAffineTransform rotationTransform = CGAffineTransformIdentity;
    rotationTransform = CGAffineTransformRotate(rotationTransform,DegreesToRadians(0));
    delegate.imgV.transform = rotationTransform;

}
else if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation)){
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate; 

    // Rotate 90 degrees to hide it off screen
    CGAffineTransform rotationTransform = CGAffineTransformIdentity;
    rotationTransform = CGAffineTransformRotate(rotationTransform,DegreesToRadians(90));
    delegate.imgV.transform = rotationTransform;

} 
```

**享受 ：-）**

# html - 带有 -webkit-overflow-scrolling 的内容 div：触摸会给 IOS 设备上的绝对定位儿童带来麻烦

> ID：12004721
> 
> 赞同：4
> 
> 时间：2012-08-17T11:14:45.470
> 
> 标签：html, css, ipad, overflow

我们正在忙着为平板电脑编写一个 Web 应用程序。

在这个应用程序中，我们有一个放置内容的主要内容 div，一些页面/幻灯片的内容超出了视口允许的范围，因此我们在内容 div 中添加了以下 CSS；

```
#canvas {
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
}
.content {
    height: 100%;
    width: 100%;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}
.absoluteElement {
    position: absolute;
    left: 20px;
    top: 20px;
} 
```

HTML：

```
<div id="canvas">
  <div class="content">
    <div class="absoluteElement">This is absolute!</div>
  </div>
</div> 
```

这在 iPad 和桌面上完美运行，但我们在绝对或固定放置的子元素方面存在一些问题。当我们在 iPad 上滚动页面时，绝对放置的元素也在 iPad 上移动，直到我们不触摸屏幕（然后它回到绝对定位位置），但不在桌面上（因为它应该）。这只发生在我们启用 -webkit-overflow-scrolling: touch 选项时。当我们禁用此选项时，iPad 上的问题就消失了，但滚动本身非常缓慢且麻烦。

为了您的信息，绝对放置的元素（.absoluteElement，应该是绝对的#canvas div，而不是内容）。

我们怎样才能轻松解决这个问题？

# java - 获取节点的所有子节点及其标签

> ID：12004724
> 
> 赞同：0
> 
> 时间：2012-08-17T11:14:59.657
> 
> 标签：java, xpath

我需要使用 xpath 获取节点的所有子节点及其标签，假设我有一个节点

```
 <div id="topbar">
    <ul>
    <li>product No</li>
    <li>product name</li>
    <li>product details</li>
    </ul>
 </div> 
```

然后我想要预期的输出为

```
<ul>
    <li>product No</li>
    <li>product name</li>
    <li>product details</li>
</ul> 
```

我试过 //div[@id='topbar']/node() 它正在返回正确的节点及其子节点

```
 XPath xpath1 = new DOMXPath(item.getXpathToExtractValue());
    Object itemObject = xpath1.selectSingleNode(element);
    if (itemObject instanceof Node)
      Node itemElement = (Node) itemObject; 
```

当我使用 itemElement.getNodeValue() 它返回产品没有产品名称产品详细信息不是预期的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:27:13.850

getNodeValue() 返回节点的文本内容。您需要将节点转换为字符串，例如：

```
 StringWriter writer = new StringWriter();
    TransformerFactory.newInstance()
        .newTransformer()
        .transform(new DOMSource(node), new StreamResult(writer));
    return writer.toString(); 
```

# mysql - Rails 查看具有相同外键的所有记录

> ID：12004728
> 
> 赞同：0
> 
> 时间：2012-08-17T11:15:03.910
> 
> 标签：mysql, ruby-on-rails, view

目前在我看来，对于每个客户，我都有这个：

```
<p>
  <b>Companyname:</b>
  <%= @customer.companyname %>
</p>

<p>
  <b>Licensecontact:</b>
  <%= @customer.licensecontact %>
</p>

<p>
  <b>Email:</b>
  <%= @customer.email %>
</p>

<p>
  <b>Phone:</b>
  <%= @customer.phone %>
</p> 
```

在此之下，我需要一个表格来显示与该特定客户相关的所有许可证。像这样的东西：

```
<% @licenses.each do |l| %>
<tr>
    <td><%= l.software.vendor %></td>
    <td><%= l.software.title %></td>
    <td><%= l.software.edition %></td>
    <td><%= l.amount %></td>
</tr>
<% end %> 
```

我有三张表，客户、许可证和软件（我知道它们的名字很糟糕），一个许可证有很多客户和很多软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:24:48.407

你做过教程吗？

1.  您的文字与您相矛盾：您说“一个许可证有很多软件”，但您的代码说“许可证 l 有一个软件，我想显示名称、标题和版本”。
2.  使用belongs_to 和has_many。在哪些表上我不能告诉你，因为你的代码与你写的最后一行相反。但是您需要在文档中查找这些关键字，以了解它们是如何工作的以及要进行哪些迁移。

然后，如果您在模型中建立了关系，那么您可以按照您在第二个代码部分中写下它的方式来调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:07:06.243

您应该能够将这样的内容放入您的视图中：

```
<table>
  <tr>
    <th>Vendor</th>
    <th>Title</th>
    <th>Edition</th>
    <th>Amount</th>
  </tr>
  <% @customer.licenses.each do |l| %>
    <tr>
      <td><%= l.software.vendor %></td>
      <td><%= l.software.title %></td>
      <td><%= l.software.edition %></td>
      <td><%= l.amount %></td>
    </tr>
  <% end %>
</table> 
```

根据您的描述，不清楚客户和许可证是如何联系在一起的。一种选择是客户有许多许可证，许可证属于一个用户：

```
class Customer < ActiveRecord::Base
  has_many :licenses
  # ...
end

class License < ActiveRecord::Base
  belongs_to :customer
  # ...
end 
```

另一种选择是HABTM（你说过'一个许可证有很多客户'和'表格显示与该特定客户相关的所有许可证'这暗示了我）：

```
class Customer < ActiveRecord::Base
  has_and_belongs_to_many :licenses
  # ...
end

class License < ActiveRecord::Base
  has_and_belongs_to_many :customers
  # ...
end 
```

# jquery-mobile - jQueryMobile 不稳定的 Ajaxing

> ID：12004729
> 
> 赞同：0
> 
> 时间：2012-08-17T11:15:04.770
> 
> 标签：jquery-mobile

默认情况下，jQueryMobile 应该 ajax 新页面。但是我看到的行为是不稳定的。有时它可以工作，有时（例如第二天）它会刷新整页。

我的链接绝对是指向同一页面的正常本地链接：`<a href="./default.htm?a=123>Link 123</a>`，`rel="external"`没有 $.mobile.options 设置等。

目前，我使用的是 Chrome，它没有做 ajax。IE9 中完全相同的应用程序正在执行 ajax（带有#history）。但我已经看到 Chrome 做 ajax（昨天）。如果我调试它实际上进入了我的链接的 $.ajax() 函数，但结果仍然是整个页面都被刷新了。

我的问题是：在什么情况下（除了上述情况）jQueryMobile（v1.1.1）回退到非ajax页面刷新？

我怀疑某些浏览器检查或其他异常导致 ajax 被规避。

# c# - 如何让 ListView 项目占用所有可用空间？

> ID：12004731
> 
> 赞同：1
> 
> 时间：2012-08-17T11:15:15.583
> 
> 标签：c#, xaml, windows-8, windows-runtime

我有一个`ListView`占据整个屏幕宽度的 - 我希望这些项目占据所有可用空间。每个“屏幕”最多有 4 个。然后我想把 ListView 放到 FlipView 中，每次“翻转”取 4 个项目。

到目前为止，我已将其设置`ItemsPanelTemplate`为：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
</Grid> 
```

这给了我四列，但将所有项目放入第一列。也许这不是正确的方法？如果是正确的方法，我该如何设置它们应该在的列？向我的对象添加一个等于`"[Index in Collection] % 4"`并将 ItemTemplate`Grid.Column`设置为此值的值？

这一切似乎有点太复杂，无法做一些我想可能更简单的事情——是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:55:33.180

请参考以下文章，

[http://www.scottlogic.co.uk/blog/colin/2010/11/using-a-grid-as-the-panel-for-an-itemscontrol/](http://www.scottlogic.co.uk/blog/colin/2010/11/using-a-grid-as-the-panel-for-an-itemscontrol/)

# android - 如何在 android 设备中访问 LAMP localhost 进行测试？

> ID：12004732
> 
> 赞同：2
> 
> 时间：2012-08-17T11:15:22.803
> 
> 标签：android, linux, wordpress, localhost

我正在使用 LAMP 环境在 Linux 中开发一个 Wordpress 站点。我想在移动设备中测试网站的外观。我有一个安卓设备。

是否可以使用 wifi 或 USB 在 android 设备中测试我的 Linux localhost 站点？如果是，如何？

使用 - Ubuntu 12.04 - XAMPP Linux 1.8.0 - Android 4.0

注意：在您将此问题视为可能重复之前，我检查了 stackoverflow 问题但没有任何帮助。

打开编辑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:18:21.847

如果您的设备和 LAMP 设置都在同一个网络上，则没有问题。只需让 URL（在 Android 上）成为您网站的 IP 地址（例如`http://192.168.0.5/yourwordpresssite`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:24:17.700

你也可以使用安卓模拟器。模拟器可以通过 10.0.2.2 访问环回地址。

见：http: [//developer.android.com/tools/devices/emulator.html#emulatornetworking](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)

# ruby-on-rails - 链接方法时可以使用实例变量吗？

> ID：12004734
> 
> 赞同：0
> 
> 时间：2012-08-17T11:15:27.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个周期控制器的显示页面。我想要做的是显示该期间的所有注册。

在我的时期模型中，我有：`has_many :registrations`，在我的注册模型中，我有`belongs_to :period`

我想做的是这样的：

```
 <% registrations.@period.each do |registration| %>

  <% end %> 
```

但这似乎不起作用。我怎样才能使这项工作？并且没有得到错误`syntax error, unexpected tIVAR registrations.@period.each do |registration|`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:21:10.307

不，你不能这样做。实例变量*始终*是私有的，您*不能*从实例外部访问它们。与对象交互的*唯一方法*是向其发送消息。

所以，如果你想从外部访问一个实例变量，你需要为它定义一个getter方法。

幸运的是，`belongs_to :period`已经定义了一个为您调用的 getter 方法`period`，因此您可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:24:40.363

我想你可能想要的是

```
<% @period.registrations.each do |registration| %>

<% end %> 
```

一般来说，如果你真的想访问实例变量，你可以使用该`instance_variable_get`方法。然而，在您的示例中，它不起作用，因为 a）您试图在 Array 上调用它，并且 b）关联（`belongs_to`）不创建实例变量。

# php - 选项选择循环 PHP + Mysql

> ID：12004737
> 
> 赞同：0
> 
> 时间：2012-08-17T11:15:42.880
> 
> 标签：php, mysql, for-loop, option

而不是这一行 50 次

```
<option value="<?php echo $settings_profile_not_set;?>" <?php if($display_profile['1'] == $settings_profile_one) { echo "selected"; }?>>
    <?php echo $settings_profile_one;?>
</option> 
```

对于每个选项，我想以循环方式执行此操作。这是我的例子：

```
<select name="profile_height">
<?php 
if ($display_profile['height'] == $settings_profile_not_set) 
{
?>
    <option value="<?php echo $settings_profile_not_set;?>" <?php if($display_profile['height'] == $settings_profile_not_set) { echo "selected"; }?>><?php echo $settings_profile_not_set;?></option>
<?php        
    //Function which displays all the centimeters that are available    
    for( $i=144; $i<=210; $i++ )
    {
        echo '<option value="';
        echo $i;
        echo '">';
        echo $i;
        echo "</option>";    

    }    
} else {
?>    
    <option value="<?php echo $settings_profile_not_set;?>"><?php echo $settings_profile_not_set;?></option>
<?php    
    for( $i=144; $i<=210; $i++ )
    {
        echo '<option value="';
        echo $i;
        echo '" ';
        if($display_profile['height'] == $i) {
            echo '"selected"';
        }
        echo ' >';
        echo $i;
        echo "</option>";    
    }
}
?>
</select> 
```

现在它打印出所有数字，但从数据库读取时不会打印出选定的数字。我知道我在某处做错了什么，但可以提出建议，并给出工作示例。

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:24:12.500

这是一段旧代码，可能会让你更容易

```
echo Series_drop_down_box_options(144, 210, $display_profile['height']);

function Series_drop_down_box_options($start,$end,$default="",$step=1,$packed=0,$packed_char="0") 
{
        $output = '';
        if( (is_integer($start)) && (is_integer($end)) )
        {
                if($start<$end)
                {
                        for($i=$start;$i<=$end;$i+=$step)
                        { 
                                if($packed>0)
                                {
                                        $value=str_pad($i, $packed, $packed_char, STR_PAD_LEFT);
                                }
                                else
                                {
                                        $value=$i;
                                }
                                $output.= '<option value="';
                                $output.= $value;
                                if ($default==$value)
                                {
                                        $output.= '" selected>';
                                }
                                else
                                {
                                        $output.= '">';
                                }
                                $output.= $value;
                                $output.= '</option>';
                                $output.= "\n";
                        }
                }
                else
                {
                        for($i=$start;$i<=$end;$i-=$step)
                        { 
                                if($packed>0)
                                {
                                        $value=str_pad($i, $packed, $packed_char, STR_PAD_LEFT);
                                }
                                else
                                {
                                        $value=$i;
                                }
                                $output.= '<option value="';
                                $output.= $value;
                                if ($default==$value)
                                {
                                        $output.= '" selected>';
                                }
                                else
                                {
                                        $output.= '">';
                                }
                                $output.= $value;
                                $output.= '</option>';
                                $output.= "\n";
                        }
                }
        }
        if( (is_string($start)) && (is_string($end)) )
        {
                $chr_start=ord($start);
                $chr_end=ord($end);
                if($chr_start<$chr_end)
                {
                        for($i=$chr_start;$i<=$chr_end;$i+=$step)
                        { 
                                $letter=chr($i);
                                $output.= '<option value="';
                                $output.= $letter;
                                if ($default==$letter)
                                {
                                        $output.= '" selected>';
                                }
                                else
                                {
                                        $output.= '">';
                                }
                                $output.= $letter;
                                $output.= '</option>';
                                $output.= "\n";
                        }
                }
                else
                {
                        for($i=$chr_start;$i<=$chr_end;$i-=$step)
                        { 
                                $letter=chr($i);
                                $output.= '<option value="';
                                $output.= $letter;
                                if ($default==$letter)
                                {
                                        $output.= '" selected>';
                                }
                                else
                                {
                                        $output.= '">';
                                }
                                $output.= $letter;
                                $output.= '</option>';
                                $output.= "\n";
                        }
                }
        }
        if( (is_array($start)) && (is_array($end)) )
        {
                $limit=min(sizeof($start),sizeof($start));
                for($i=0;$i<$limit;$i++)
                { 
                        $output.= '<option value="';
                        $output.= $start[$i];
                        if ($default==$start[$i])
                        {
                                $output.= '" selected>';
                        }
                        else
                        {
                                $output.= '">';
                        }
                        $output.= $end[$i];
                        $output.= '</option>';
                        $output.= "\n";
                }

        }

        return $output;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:31:39.543

我修复了您的原始代码：太多`echo`，我添加了属性`selected`：

```
<select name="profile_height">
<?php 
if ($display_profile['height'] == $settings_profile_not_set) 
{
?>
    <option value="<?php echo $settings_profile_not_set;?>" <?php if($display_profile['height'] == $settings_profile_not_set) { echo "selected"; }?>><?php echo $settings_profile_not_set;?></option>
<?php        
    //Function which displays all the centimeters that are available    
    for( $i=144; $i<=210; $i++ )
    {
        echo "<option value='$i'>$i</option>";
    }    
} else {
?>    
    <option value="<?php echo $settings_profile_not_set;?>"><?php echo $settings_profile_not_set;?></option>
<?php    
    for( $i=144; $i<=210; $i++ )
    {
        echo "<option value='$i'";
        if($display_profile['height'] == $i) {
            echo ' selected="selected"';
        }
        echo ">$i</option>";
    }
}
?>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:54:21.177

这是工作代码:) Thanx Waygood

```
<?php echo  Series_drop_down_box_options(144, 210, $display_profile['height']); ?> 
```

然后在下面起作用=)

```
<?php function series_drop_down_box_options($start,$end,$default="",$step=1,$packed=0,$packed_char="0") {
    $output = '';
    echo '<option value="Not set">Not set</option>';
    if( (is_integer($start)) && (is_integer($end)) )
    {
            if($start<$end)
            {
                    for($i=$start;$i<=$end;$i+=$step)
                    { 
                            if($packed>0)
                            {
                                    $value=str_pad($i, $packed, $packed_char, STR_PAD_LEFT);
                            }
                            else
                            {
                                    $value=$i;
                            }
                            $output.= '<option value="';
                            $output.= $value;
                            if ($default==$value)
                            {
                                    $output.= '" selected>';
                            }
                            else
                            {
                                    $output.= '">';
                            }
                            $output.= $value;
                            $output.= '</option>';
                            $output.= "\n";
                    }
            }
            else
            {
                    for($i=$start;$i<=$end;$i-=$step)
                    { 
                            if($packed>0)
                            {
                                    $value=str_pad($i, $packed, $packed_char, STR_PAD_LEFT);
                            }
                            else
                            {
                                    $value=$i;
                            }
                            $output.= '<option value="';
                            $output.= $value;
                            if ($default==$value)
                            {
                                    $output.= '" selected>';
                            }
                            else
                            {
                                    $output.= '">';
                            }
                            $output.= $value;
                            $output.= '</option>';
                            $output.= "\n";
                    }
            }
    }
    if( (is_string($start)) && (is_string($end)) )
    {
            $chr_start=ord($start);
            $chr_end=ord($end);
            if($chr_start<$chr_end)
            {
                    for($i=$chr_start;$i<=$chr_end;$i+=$step)
                    { 
                            $letter=chr($i);
                            $output.= '<option value="';
                            $output.= $letter;
                            if ($default==$letter)
                            {
                                    $output.= '" selected>';
                            }
                            else
                            {
                                    $output.= '">';
                            }
                            $output.= $letter;
                            $output.= '</option>';
                            $output.= "\n";
                    }
            }
            else
            {
                    for($i=$chr_start;$i<=$chr_end;$i-=$step)
                    { 
                            $letter=chr($i);
                            $output.= '<option value="';
                            $output.= $letter;
                            if ($default==$letter)
                            {
                                    $output.= '" selected>';
                            }
                            else
                            {
                                    $output.= '">';
                            }
                            $output.= $letter;
                            $output.= '</option>';
                            $output.= "\n";
                    }
            }
    }
    if( (is_array($start)) && (is_array($end)) )
    {
            $limit=min(sizeof($start),sizeof($start));
            for($i=0;$i<$limit;$i++)
            { 
                    $output.= '<option value="';
                    $output.= $start[$i];
                    if ($default==$start[$i])
                    {
                            $output.= '" selected>';
                    }
                    else
                    {
                            $output.= '">';
                    }
                    $output.= $end[$i];
                    $output.= '</option>';
                    $output.= "\n";
            }

    }

    return $output;
}?> 
```

祝大家好运！=)

# grails - 与三元和猫王混淆

> ID：12004738
> 
> 赞同：2
> 
> 时间：2012-08-17T11:15:44.060
> 
> 标签：grails, groovy

当查找返回 null 时，我有以下代码用于处理默认值

```
def user = User.find('admin') 
    return user?.address?user:null 
```

这按预期工作

但是，当使用 Elvis 运算符时，例如：

```
def user = User.find('admin') 
    return user?.address?:null 
```

我抛出异常：

```
org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'true'         with class 'java.lang.Boolean' to class 'com.code.User' 
```

我期待猫王的行为与三元运算符完全一样......？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:21:02.290

`user`如果用户不为空，则返回并`user.address`计算为`true`：

```
return user?.address?user:null 
```

`user.address`如果用户不为空，则返回，`user.address`计算结果为`true`

```
return user?.address?:null 
```

我假设`user.address`是一个布尔值？所以第二个尝试返回一个布尔值，可能是你说的`User`在定义中返回 a 的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:43:01.263

问题是当你使用

```
user?.address?user:null 
```

如果用户有地址，则返回用户。当你使用

```
user?.address?:null 
```

它尝试返回**地址**但不返回**用户**实例。

# php - 调度程序偶尔从另一个应用程序调用代码

> ID：12004740
> 
> 赞同：0
> 
> 时间：2012-08-17T11:15:51.243
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.2

我们刚刚将我们的一些应用程序（从 1.3）升级到 cakephp 2.2 并重构了代码。我们的基本服务器设置看起来像

*   htdocs/subdomain.domain/cakeapp1/...
*   htdocs/subdomain.domain/cakeapp2/...

有时我们会收到错误，这是由于问题造成的，蛋糕内部决定从另一个应用程序文件夹中调用代码。因此，我们从 cakeapp1 调用了一个路由，突然，在堆栈跟踪的中间，cake 从 cakeapp2 调用了文件。

因此，尽管 cakeapp1 中没有代码引用“客户端”表，例如，我们收到以下错误：

```
Missing Database Table
Table clients for model Client was not found in datasource default.

Stack Trace
/home/www/subdomain.domain/cakeapp2/lib/Cake/Model/Model.php line 3180 → Model->setSource(string)
/home/www/subdomain.domain/cakeapp2/lib/Cake/Model/Model.php line 2631 → Model->getDataSource()
/home/www/subdomain.domain/cakeapp2/app/Model/AppModel.php line 22 → Model->find(string, array)
/home/www/subdomain.domain/cakeapp2/app/Controller/AppController.php line 237 → AppModel->find(string, array)
/home/www/subdomain.domain/cakeapp2/app/Controller/AppController.php line 41 → AppController->__initializeAppSettings()
[internal function] → AppController->beforeFilter(CakeEvent)
/home/www/subdomain.domain/cakeapp2/lib/Cake/Event/CakeEventManager.php line 246 → call_user_func(array, CakeEvent)
/home/www/subdomain.domain/cakeapp2/lib/Cake/Controller/Controller.php line 670 → CakeEventManager->dispatch(CakeEvent)
/home/www/subdomain.domain/cakeapp2/lib/Cake/Routing/Dispatcher.php line 183 → Controller->startupProcess()
/home/www/subdomain.domain/cakeapp2/lib/Cake/Routing/Dispatcher.php line 161 → Dispatcher->_invoke(UsersController, CakeRequest, CakeResponse)
APP/webroot/index.php line 92 → Dispatcher->dispatch(CakeRequest, CakeResponse) 
```

另一个错误是找不到插件（调试工具包）。debugkit 嵌入在 cakeapp1 中，但在 cakeapp2 中没有使用，因此很明显，在这个应用程序中引发了错误。错误本身被保存到 cakeapp2/tmp/log/error.log - 而不是 cakeapp1，应该执行原始代码。

**有没有其他人遇到过同样的问题？**最大的问题是，发生的错误不会发生在每个页面视图上。但它可以在不同的浏览器/机器上重现。在调用另一个 url 并再次调用错误的 url 之后，一切都很好了。

关于在子文件夹托管方案中使用 cakephp，cakephp2 是否有任何变化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T14:36:32.287

您启用了 APC，从而导致 Cake 默认使用 APC 作为缓存引擎。目前，您尚未更改 app/Config/core.php 中用于缓存配置的 $prefix，从而导致两个应用程序使用相同的设置。将它们更改为唯一值，您的问题将得到解决。

# javascript - 谷歌地图/gmap3 - 从用户的地理位置绘制到已知目的地的路线 - 需要帮助

> ID：12004744
> 
> 赞同：2
> 
> 时间：2012-08-17T11:16:06.963
> 
> 标签：javascript, jquery, google-maps, jquery-plugins, jquery-gmap3

我正在尝试编写一个脚本来获取用户的地理位置 - 如果他们启用了它，并绘制到预定义目的地的路线。如果他们没有启用地理定位，它应该只绘制预定义的位置。该脚本不起作用，但您应该能够通过查看代码来很好地了解我正在尝试做什么。我在正确的轨道上吗？谁能发现它为什么不起作用？

```
<script type="text/javascript">
       $(function (){

        var dest = "Unit 20, Tallaght Business Centre, Whitestown Road, Tallaght Business Park, Ireland";

        if(geolocEnabled()){
            getLocation();
        }else{
            plotMarker(dest);
        }

        //check if geolocation enabled
        function geolocEnabled(){
            return navigator.geolocation;
        }

        //plot marker for VRF office
        function plotMarker(dest){
            $('#map').gmap3(
              { action: 'addMarker',
                address: dest,
                map:{
                  center: true,
                  zoom: 14
                },
                marker:{
                  options:{
                    draggable: false
                  }
                }
              }
            );
        }

        //get user's location
        function getLocation(){
            $('#map').gmap3(
            { action : 'geoLatLng',
              callback : function(latLng){
                if (latLng){
                  plotRoute(latLng, dest);  
                  return;
                } else {
                  alert("Unable to determine your location. Enable geolocation services and try again, or consult the map for our location.");
                  plotMarker(dest);
                }
              }
            });
          }

        //plot route
        function plotRoute(latLng, dest){
        $('#map').gmap3(
          { action:'getRoute',
            options:{
              origin: latLng,
              destination: dest,
              travelMode: google.maps.DirectionsTravelMode.DRIVING
            },
            callback: function(results){
              if (!results) return;
              $(this).gmap3(
                { action:'init', 
                  zoom: 7, 
                  mapTypeId: google.maps.MapTypeId.ROADMAP, 
                  streetViewControl: true,
                  center: [53.337433,-6.2661]
                },
                { action:'addDirectionsRenderer',
                  panelID: 'directions-panel',
                  options:{
                    preserveViewport: true,
                    draggable: false,
                    directions:results
                  }
                }
              );
            }
          }
        );
      }

    });
    </script> 
```

非常感谢所有帮助。

编辑：当我运行脚本时，我什至没有在浏览器中收到地理位置警告。

编辑：我从 getLocation 中删除了 {timeout: 10000}，它现在正在发出警报。脚本更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:52:39.520

地理定位是一个异步过程，完成后结果将不可用`getLocation()`。

`plotRoute()`在回调内部调用并`$.gmap3.geoLatLng`提供预期的参数(latLng, dest)

# jquery - 简单的分页？

> ID：12004747
> 
> 赞同：0
> 
> 时间：2012-08-17T11:16:13.907
> 
> 标签：jquery, pagination

基本上，我有一个已经将项目数量限制为 30 个的画廊，但我希望在任一侧都有一个“下一个和上一个”按钮，以便在按下后基本上添加或交换列表。

我在想很简单，只是一个箭头按钮，一旦按下它，它就会滑动并淡出第一页，然后滑入并淡入第二页，依此类推。

如果可能的话，它可以循环吗？好像它已经到了尽头，然后他们点击下一步，它只是增加了更多，达到了 30 的限制？

如果有帮助，这是我当前的网站：www.shannonhochkins.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:24:24.560

您需要展示画廊的交换下一个对象的示例，但我可以轻松解决分页问题：本周我问了类似的问题；[如何为滑块的分页按钮创建简单的下一个和上一个触发按钮？](https://stackoverflow.com/questions/11934691/how-to-create-simple-next-and-prev-button-for-slider-s-trigger-thumbs)

**[这是工作的jsFiddle。](http://jsfiddle.net/merk8/33/)**这是 Aaron Romine 的回答：

```
$(".next").click(function(){
    if($("li.active").next().length > 0){
        $("li.active").removeClass("active").next("li").addClass("active");
    }
});
$(".prev").click(function(){
    if($("li.active").prev().length > 0){
        $("li.active").removeClass("active").prev("li").addClass("active");
    }
}); 
```

# project-management - Assembla Redmine JIRA Zoho Yodiz 审查和/或替代方案

> ID：12004748
> 
> 赞同：10
> 
> 时间：2012-08-17T11:16:14.037
> 
> 标签：project-management, jira, redmine, assembla, zoho

我正在寻找一个 AaaS 来处理商业软件开发项目的敏捷/scrum 项目管理。我们可能会使用 git 作为 SCM，理想情况下，我们希望在 SCM 中的代码更改和项目管理中的任务/错误之间进行良好的集成。我已将搜索范围缩小到几个选项：

**Redmine**：主流开源、免费软件开发管理工具。任务、错误、wiki、博客、时间跟踪、git 集成，几乎所有我们需要的东西。未托管。可以在内部部署，也可以部署在像 CloudFoundry 这样的 PaaS 中。

**JIRA**：很多功能。与 Git、Eclipse、大量插件、大量功能集成。1 到 4 美元/月/人/应用程序。与谷歌应用程序的有限集成。

**Zoho Projects**：新一代管理应用程序，与谷歌应用程序（日历、文档、任务）完全集成。任务管理、文档共享、时间跟踪和计费、错误跟踪软件、甘特图、项目 Wiki、项目聊天、项目日历、项目论坛。带有错误跟踪器、票务、git 集成。相当昂贵（项目 299 美元/年，Bug Tracker 附加组件 299 美元/年）

**Yodiz**：看起来非常适合 Scrum（Scrum 板、发布板、积压工作、计划板、史诗、冲刺、发布）。它具有时间表并与 SCM 集成，并在提交代码时自动发布任务/缺陷（[http://app.yodiz.com/thirdparty/pages/git.vz?pid=6](http://app.yodiz.com/thirdparty/pages/git.vz?pid=6)）。GitHub 定价 5 美元/用户/月 + 22 美元/月。还有另一个类似的软件fogcreek ( [http://www.fogcreek.com](http://www.fogcreek.com) )，但它非常昂贵。

**Assembla**：一切都在一个屋檐下。SCM 存储库 + 所有敏捷功能（wiki、票证、文件等）。每月 9 美元到 99 美元，10 美元/用户/月的 assembla 产品组合。很受欢迎。

Assembla 看起来是一个很好的选择，但我似乎没有找到很多关于它的反馈。你能给我关于 Assembla、其他工具和其他不同选项的建议吗？

一个有趣的项目管理/CRM/错误跟踪器比较电子表格：

[https://spreadsheets.google.com/spreadsheet/pub?hl=en&key=0Ahw066SJeeSadFJGWXRTUVVfaE1WWmpkU09WUkt6Z0E&hl=en&gid=6](https://spreadsheets.google.com/spreadsheet/pub?hl=en&key=0Ahw066SJeeSadFJGWXRTUVVfaE1WWmpkU09WUkt6Z0E&hl=en&gid=6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:51:33.453

Assembla 擅长将您的 SCM 与您的工单/错误跟踪集成。这是它的特色。您可以将合并请求用于代码审查和发布管理。它有几个用于管理规划和发展规划的工单视图。每个提交都可以直接链接到票证，您不仅可以跟踪流经系统的错误，还可以跟踪围绕这些错误的代码。

您应该尝试一下，有 30 天的免费试用期，可让您使用所有相关的各种工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T02:43:45.143

看起来您正在尝试查看用于项目管理的不同软件替代方案。这是您可以使用的不同工具的一个很好的综合列表（和比较）：http: [//blog.timedoctor.com/2011/02/02/43-project-management-software-alternatives](http://blog.timedoctor.com/2011/02/02/43-project-management-software-alternatives)

这应该会给你一些非常好的选择，你可以将其添加到你的研究中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:03:38.560

还可以查看 SonicAgile.com - 专为 Scrum 设计，它包括对积压工作、scrumboard 和燃尽图的支持。我在这里写了一篇关于其功能的博客文章：

[http://stephenwalther.com/archive/2012/08/08/announcing-sonicagile-an-agile-project-management-solution.aspx](http://stephenwalther.com/archive/2012/08/08/announcing-sonicagile-an-agile-project-management-solution.aspx)

# javascript - 如何覆盖 javascript 方法（在描述中给出）以返回我的 url？

> ID：12004753
> 
> 赞同：1
> 
> 时间：2012-08-17T11:16:29.280
> 
> 标签：javascript

我只想让你继续： chrome 浏览器中的[webtrends.com](https://webtrends.com/products/analytics/)。如果你在控制台上输入：`dcsMultiTrack`（dcsMultitrack 是 webtrends.js 中的一个方法），你将得到一个方法描述作为响应：

```
dcsMultiTrack
function dcsMultiTrack() {
        var args_in = [];
        for (var i = 0; i < arguments.length; i++)
            args_in[i] = arguments[i];
        var o = {
            "argsa": args_in
        };
        Webtrends.multiTrack(o);
    } 
```

现在，如果我在控制台键入： 调用此方法`dcsMultiTrack();`，我得到的响应是：

```
dcsMultiTrack();
undefined
GET https://statse.webtrendslive.com/dcsgs0dqv8bv0h8ud5z2yrxxv_5c4y/dcs.gif?&dcsdat=1345196848140&dcssip=webtrends.com&dcsuri=/products/analytics/&WT.tz=5&WT.bh=14&WT.ul=en-US&WT.cd=32&WT.sr=1920x1080&WT.jo=Yes&WT.ti=Unified%2520Digital%2520Analytics%2520%257C%2520Webtrends&WT.js=Yes&WT.jv=1.5&WT.ct=unknown&WT.bs=1920x522&WT.fv=11.3&WT.slv=Not%2520enabled&WT.le=ISO-8859-1&WT.tv=10.2.30&WT.dl=0&WT.ssl=1&WT.es=webtrends.com%252Fproducts%252Fanalytics%252F&WT.ce=2&WT.vt_f_tlv=1345189668&WT.vt_f_tlh=1345192944&WT.vt_f_s=1&WT.vtvs=1345196848137&WT.vtid=7260947478808151196&WT.co_f=7260947478808151196  webtrends.js:1210
GET https://statse.webtrendslive.com/dcswxkx6r100004rra9vt8h0n_9g3z/dcs.gif?&dcsdat=1345196848151&dcssip=webtrends.com&dcsuri=/products/analytics/&WT.tz=5&WT.bh=14&WT.ul=en-US&WT.cd=32&WT.sr=1920x1080&WT.jo=Yes&WT.ti=Unified%2520Digital%2520Analytics%2520%257C%2520Webtrends&WT.js=Yes&WT.jv=1.5&WT.ct=unknown&WT.bs=1920x522&WT.fv=11.3&WT.slv=Not%2520enabled&WT.le=ISO-8859-1&WT.tv=10.2.30&WT.dl=0&WT.ssl=1&WT.es=webtrends.com%252Fproducts%252Fanalytics%252F&WT.ce=2&WT.vt_f_tlh=1345196848&WT.vtvs=1345196848137&WT.vtid=7260947478808151196&WT.co_f=7260947478808151196 
```

我想以某种方式覆盖此方法或创建一个新方法来提醒我收到的其中一个 url。我怎样才能做到这一点？任何帮助将不胜感激。

我附上了我在做什么的截图。！

![看看我想做什么](../Images/a65a136b3ac4f0971761e6670f221312.png)

# javascript - 如何使用javascript更改前景色/文本颜色以及边框颜色

> ID：12004754
> 
> 赞同：1
> 
> 时间：2012-08-17T11:16:32.617
> 
> 标签：javascript, jquery, css, html-table

我想改变`text color`元素。我搜索了它，但没有得到正确的解决方案。当我使用它时，只需更改 td 的**3 个边框**颜色，但顶部边框仍然没有更改，我不知道为什么会这样。`border color``<TD>``border-color:blue`**`td`**

 **而且我想改变`text color`使用`td`java脚本，但没有这样的属性。请建议我该怎么做？

我正在尝试创建日历控件这是我的代码...

```
 <script id="allTemplate" type="text/raj"> 
 <tr> 

          {{if "Su" == Sunday }}  
          <td>${Sunday}</td>
          {{else}}
            {{if date.getDate() == Sunday }}
             <td id="cell${Sunday}" style="border:1px solid blue;cursor: pointer" onclick="selectDate('${Sunday}','cell${Sunday}')">${Sunday}</td>
            {{else}}
                 {{if "" == Sunday }}
                  <td>${Sunday}</td>
                   {{else}}
            <td id="cell${Sunday}" style="cursor: pointer" onclick="selectDate('${Sunday}','cell${Sunday}')">${Sunday}</td>
                   {{/if}}
            {{/if}}
          {{/if}}
          {{if "Mo" == Monday }}  
          <td>${Monday}</td>
          {{else}}
            {{if date.getDate() == Monday }}
            <td id="cell${Monday}" style="border:1px solid blue; cursor: pointer" onclick="selectDate('${Monday}','cell${Monday}')"><font color="Red">${Monday}</font></td>
            {{else}}
                {{if "" == Monday }}
            <td>${Monday}</td>
               {{else}}
            <td id="cell${Monday}" style="cursor: pointer" onclick="selectDate('${Monday}','cell${Monday}')">${Monday}</td>
               {{/if}}
            {{/if}}
          {{/if}}
          {{if "Tu" == Tuesday }}  
          <td>${Tuesday}</td>
          {{else}}
            {{if date.getDate() == Tuesday }}
            <td id="cell${Tuesday}" style="border:1px solid blue; cursor: pointer" onclick="selectDate('${Tuesday}','cell${Tuesday}')"><font color="Red">${Tuesday}</font></td>
            {{else}}
                  {{if "" == Tuesday }}
            <td>${Tuesday}</td>
                   {{else}}
            <td id="cell${Tuesday}" style="cursor: pointer" onclick="selectDate('${Tuesday}','cell${Tuesday}')">${Tuesday}</td>
                   {{/if}}
            {{/if}}
          {{/if}}
          {{if "We" == Wednesday }}  
          <td>${Wednesday}</td>
          {{else}}
            {{if date.getDate() == Wednesday }}
            <td id="cell${Wednesday}" style="border:1px solid blue; cursor: pointer" onclick="selectDate('${Wednesday}','cell${Wednesday}')"><font color="Red">${Wednesday}</font></td>
            {{else}}
                 {{if "" == Wednesday }}
                 <td>${Wednesday}</td>
                 {{else}}
            <td id="cell${Wednesday}" style="cursor: pointer" onclick="selectDate('${Wednesday}','cell${Wednesday}')">${Wednesday}</td>
                 {{/if}}
            {{/if}}
          {{/if}}
          {{if "Th" == Thursday }}  
          <td>${Thursday}</td>
          {{else}}
            {{if date.getDate() == Thursday }}
            <td id="cell${Thursday}" style="border:1px solid blue; cursor: pointer" onclick="selectDate('${Thursday}','cell${Thursday}')"><font color="Red">${Thursday}</font></td>
            {{else}}
                 {{if "" == Thursday }}
                 <td>${Thursday}</td>
                 {{else}}
            <td id="cell${Thursday}" style="cursor: pointer" onclick="selectDate('${Thursday}','cell${Thursday}')">${Thursday}</td>
                 {{/if}}
            {{/if}}
          {{/if}}
          {{if "Fr" == Friday }}  
          <td>${Friday}</td>
          {{else}}
            {{if date.getDate() == Friday }}
            <td id="cell${Friday}" style="border:1px solid blue; cursor: pointer" onclick="selectDate('${Friday}','cell${Friday}')"><font color="Red">${Friday}</font></td>
            {{else}}
                {{if "" == Friday }}
                <td>${Friday}</td>
                {{else}}
            <td id="cell${Friday}" style="cursor: pointer" onclick="selectDate('${Friday}','cell${Friday}')">${Friday}</td>
                {{/if}}
            {{/if}}
          {{/if}}
          {{if "Sa" == Saturday }}  
          <td>${Saturday}</td>
          {{else}}
            {{if date.getDate() == Saturday }}
            <td id="cell${Saturday}" style="border:1px solid blue; cursor: pointer" onclick="selectDate('${Saturday}','cell${Saturday}')"><font color="Red">${Saturday}</font></td>
            {{else}}
                {{if "" == Saturday }}  
            <td>${Saturday}</td>
                {{else}}
            <td id="cell${Saturday}" style="cursor: pointer" onclick="selectDate('${Saturday}','cell${Saturday}')">${Saturday}</td>
                 {{/if}}
            {{/if}}
          {{/if}}

</tr> 

</script> 
```

这是我想更改 td 的边框颜色的 j 查询模板，当条件为真时，它会更改 td 的边框颜色，但只有 3 个边缘而不是顶部一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:26:46.717

我想你正在寻找的是

```
var td = document.getElementById('something')
td.style.color="red"
td.style.border="1px solid blue" 
```

[您可以在这里](http://jsfiddle.net/arunpjohny/z7wfu/1/)看到它的实际效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:35:45.093

如果您想纯粹在 CSS 中执行此操作，请注意您需要设置完整的边框样式`td`- 如果您只设置颜色，则只有那些不受其他线条样式影响的边框会受到影响（我认为了解这背后的全部原因是相当技术性和复杂性的！）。

[在这个例子](http://jsfiddle.net/wSLFd/)中，红色边框的单元格被`1 px solid red`应用了，但是因为粉色边框`td`只有指定的颜色，所以底部边框（它是`table`and的一部分`tr`）不受影响，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:27:45.173

@Raj - 查看[Mozilla 开发人员网站](https://developer.mozilla.org/en-US/docs/JavaScript)以获取基本信息，并在您尝试了一些事情后提出问题。

顺便说一句，这与@Arun P Johny 的答案类似，但使用 Jquery 实现：[http ://codepen.io/5arx/pen/djhJE](http://codepen.io/5arx/pen/djhJE)**

# webview - 在 Metro 风格应用程序中嵌入 Youtube 视频

> ID：12004760
> 
> 赞同：3
> 
> 时间：2012-08-17T11:17:10.547
> 
> 标签：webview, youtube, microsoft-metro

我正在编写应用程序来显示 youtube 视频。在 Windows 7 上的 WPF 中，我使用 WebBrowser 控件，它工作正常。但是当我使用 WinRT WebView 控件显示来自 youtube 的 swf 文件时 - 它不起作用。只清白屏。

我使用这样的方法：http: [//blog.tedd.no/2010/06/27/embedding-youtube-in-wpf-webbrowser-control/](http://blog.tedd.no/2010/06/27/embedding-youtube-in-wpf-webbrowser-control/)

我该怎么做才能有机会在 Metro Style Application 中显示视频？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T03:40:20.800

试试 mytoolkit 库中的这个：[http ://mytoolkit.codeplex.com/wikipage?title=YouTube](http://mytoolkit.codeplex.com/wikipage?title=YouTube)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:13:44.363

您也可以通过“ [mediaelement](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.aspx) ”播放视频来播放 youtube 视频，但您必须先解析 youtube 视频流。查看我的 W8 应用程序“ [RedditTV](http://apps.microsoft.com/webpdp/en-US/app/reddittv/4a46040d-445f-40cd-8a16-9bb3cc118cea) ”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:49:01.337

默认的 youtube 视频播放器（除非用户选择了 HTML5 预览）是 Flash 视频控件。IE 的 Windows 应用程序商店（“Metro”）外壳版本或 WebView 控件不支持 Flash。

但是您可以做的是请求youtube使用HTML5视频播放器（HTML5视频由IE和WebView的App Store版本支持）。例如，这个视频对我来说可以正常播放：

```
 <WebView Source="http://www.youtube.com/watch?v=cTl3U6aSd2w&amp;html5=True" /> 
```

所以你应该能够使用 webview 嵌入视频，你只需要强制 webview 使用 HTML5 查看器。这也可以作为嵌入 URL 的参数来完成：请参阅[Force HTML5 youtube video](https://stackoverflow.com/questions/5845484/force-html5-youtube-video)

但是，此设置仅表示*首选*HTML5 播放器。Youtube 可能仍会尝试在某些视频上使用 Flash 播放器，但这并非在所有情况下都有效。

# mysql - 在忽略 GROUP BY 的同时获取 COUNT

> ID：12004765
> 
> 赞同：1
> 
> 时间：2012-08-17T11:17:35.650
> 
> 标签：mysql, count, group-by

我有下表： ProductSales

```
+-------+-----------+--------+-----------+
|prod_id|customer_id|order_id|supplier_id|
+-------+-----------+--------+-----------+
|   1   |     1     |   1    |     1     |
+-------+-----------+--------+-----------+
|   2   |     4     |   2    |     2     |
+-------+-----------+--------+-----------+
|   3   |     1     |   1    |     1     |
+-------+-----------+--------+-----------+
|   4   |    NULL   |  NULL  |   Null    |
+-------+-----------+--------+-----------+
|   5   |     1     |   1    |     2     |
+-------+-----------+--------+-----------+
|   6   |     4     |   7    |     1     |
+-------+-----------+--------+-----------+
|   7   |     1     |   1    |     3     |
+-------+-----------+--------+-----------+ 
```

我有一个 SELECT 查询：

```
SELECT customer_id AS customer, count(*) AS prod_count
     , count(DISTINCT order_id) as orders 
  FROM ProductSales 
 WHERE supplier_id=1        
 GROUP BY customer_id  
HAVING customer_id<>'NULL' 
```

这将产生结果：

```
+--------+----------+------+
|customer|prod_count|orders|
+--------+----------+------+
|   1    |    2     |   1  |
+--------+----------+------+
|   4    |    1     |   1  |
+--------+----------+------+ 
```

我一直试图实现但一无所获的是在我的结果中添加第四列，以显示每个客户仅属于当前供应商的 order_id 数量：

```
+--------+----------+------+-------------+
|customer|prod_count|orders|Unique Orders|
+--------+----------+------+-------------+
|   1    |    2     |   1  |      0      | } Order '1' is connected with two supplier_ids
+--------+----------+------+-------------+
|   4    |    1     |   1  |      1      | } Order '2' is connected to only one supplier_id
+--------+----------+------+-------------+ 
```

（当每个客户有更多订单与更多供应商相关联时，这会变得更加复杂）。

我以为我很接近：

```
SELECT t1.user_id, count(DISTINCT t1.prod_id) AS prod_count
     , count(DISTINCT t1.order_id) as orders
     , IF(count(DISTINCT t3.supplier_id)>1,0,1) AS Unique_Orders
  FROM ProductSales AS t1
  LEFT JOIN `order` AS t2 ON t1.order_id=t2.order_id
  LEFT JOIN ProductSales AS t3 ON t2.order_id=t3.order_id
 WHERE t1.supplier_id=1
 GROUP BY t1.customer_id
HAVING t1.customer_id<>'NULL' 
```

上述`orders`表格`ProductSales`仅与 相关`order_id`。

其中显示了我的客户、产品（总计）、订单（总计），但唯一订单显示是否有唯一订单 (0) 或没有 (1)，我了解 IF 语句的逻辑并且它符合我的预期。它正在研究如何找到令我困惑的独特订单的数量。

该表已建立且无法更改。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:23:50.223

唯一订单可以定义为

```
SELECT OrderID
FROM yourtable
GROUP BY OrderID
Having COUNT(Distinct SupplierID) = 1 
```

所以试试

```
SELECT 
    customer_id AS customer, 
    count(*) AS prod_count.
    count(DISTINCT productsales.order_id) as orders,
    COUNT(distinct uqo)
FROM ProductSales  
    left join 
    (
        SELECT Order_ID uqo
        FROM Productsales
        GROUP BY Order_ID 
        Having COUNT(Distinct supplier_id) = 1 
    ) uniqueorders 
    on ProductSales.order_id = uniqueorders.uqo      
 WHERE supplier_id=1              
 GROUP BY customer_id 
```

# umbraco - 在 Umbraco 中枚举文档

> ID：12004768
> 
> 赞同：1
> 
> 时间：2012-08-17T11:17:46.947
> 
> 标签：umbraco

我正在编写一些基于某些文档执行任务的 C# 代码。目前，我正在使用`Document[] releaseDocs = Document.GetRootDocuments()`然后循环遍历结果。

是否有可能做一些事情，比如`Document[] releaseDocs = Document.GetRootDocuments().Where(m => m.Published == false);`我可以利用 API 只获取已发布的文档和具有某些设置变量的文档？如果是这样，如何，因为该方法似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:10:46.950

尝试这样的事情：

```
Document[] documents = Document.GetRootDocuments();

foreach (var doc in documents)
{
    // Do Something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T15:22:05.400

这应该可以正常工作：

```
Document[] releaseDocs = Document.GetRootDocuments().Where(m =>
    m.Published == false &&
    m.getProperty("SomeAlias").Value.Equals("Some Value")).ToArray(); 
```

# lua - Kobold2D 2.X 中缺少 config.lua 中的 WindowFrame 设置

> ID：12004773
> 
> 赞同：2
> 
> 时间：2012-08-17T11:18:12.030
> 
> 标签：lua, kobold2d

我想知道 Kobold2D 2.X 中 config.lua 文件中的 WindowFrame 设置在哪里？是否有另一种方法可以在 OS X 下设置窗口分辨率？

目前我设法通过修改 Kobold2D 源来设置窗口大小，但我想知道我是否错过了一种新的简单方法，而无需自己修改库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:36:49.077

我假设您指的是 WindowFrame 设置。我删除了它，因为它是多余的并覆盖了 MainMenu.xib 中的相同设置：

![在此处输入图像描述](../Images/277b7e0541f771187557e1d78dc23a4b.png)

xib 中的初始位置设置为自动（中心）。这是 config.lua 无法做到的，它强制窗口处于绝对位置，而不管实际屏幕分辨率如何。

# ruby-on-rails - 将 get 参数添加到辅助方法

> ID：12004777
> 
> 赞同：1
> 
> 时间：2012-08-17T11:18:35.280
> 
> 标签：ruby-on-rails, ruby, routes, helper

我在 config/routes.rb 文件中添加了以下行：

```
get '/movies/similar', :contoller => 'movies', :action => 'similar' 
```

我看到有一个带有 name 的辅助方法`'movies_similar_path'`。我想添加一个`'movies_similar_path'`名为'director'的get参数，这样我就可以得到`'/movies/similar?director=someone'`

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T11:30:45.627

无需在帮助器中定义参数，您可以在`link_to`.

```
link_to "Similar", movies_similar_path(:director => @director.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:30:39.523

1.  注意到您的路线行中“控制器”中的错字了吗？
2.  您想要什么，您可以通过添加隐藏字段或将额外字段放在“link_to”中以调用页面的形式进行操作。像 "link_to "simsforthisdirector", movies_similar_path(@movie), :director=>@director.name 见：[http](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to) ://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to 特别是示例将帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:36:29.707

如果您使用的是 rails 3，那么您可以将路线声明为 -

```
get '/movies/similar(/:director)', :to => 'movies#similar' 
```

在使用时，您可以将其用作 -

```
movies_similar_path 
```

或者

```
movies_similar_path(@director.name) 
```

# ruby - 由于 nil 列而缺少表的 FROM 子句条目？

> ID：12004778
> 
> 赞同：0
> 
> 时间：2012-08-17T11:18:36.950
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1

我想我遇到了这个问题，因为我的子类可以属于一个父级或另一个父级，但不能同时属于两者。让我向您展示我的代码，然后是错误。

```
class Purchase < ActiveRecord::Base # my child class
  # columns = user_id, price_id and unit_price_id
  belongs_to :user
  belongs_to :price
  belongs_to :unit_price

  scope :today, lambda { joins(:unit_price, :price).
                             where(:price => { :date => Date.today },
                                   :unit_price => { :date => Date.today } ) }
  def total
    self.price.sum(:amount) + self.unit_price.sum(:amount)
  end
end 
```

在我看来，我尝试这样做：

```
<%= number_to_currency(current_user.purchases.today.map(&:total)) %> 
```

但这给了我错误：

```
PGError: ERROR:  missing FROM-clause entry for table "price"
LINE 1: ...s"."price_id" WHERE "purchases"."user_id" = 3 AND "price"."d...
                                                             ^
: SELECT "purchases".* FROM "purchases" INNER JOIN "unit_prices" 
ON "unit_prices"."id" = "purchases"."unit_price_id" 
INNER JOIN "prices" ON "prices"."id" = "purchases"."price_id" 
WHERE "purchases"."user_id" = 3 AND "price"."date" = '2012-08-16' 
AND "unit_price"."date" = '2012-08-16' 
```

我真的不知道它到底在说什么，但有一个想法是 price_id 为零。它是否正确？如果是这样，我该如何解决这个问题？我是否应该创建两个单独的购买模型，称为 PricePurchase 和 UnitPricePurchase 作为修复？

让我知道你的想法。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:30:24.673

表没有别名，并且它们的名称是复数形式（`prices`，而不是`price`WHERE），因此这种更改可能会有所帮助：

```
where(:prices => { :date => Date.today },
                               :unit_prices => { :date => Date.today } ) } 
```

# cuda - 优化 CUDA 中二维扩散（热）方程的解

> ID：12004779
> 
> 赞同：1
> 
> 时间：2012-08-17T11:18:43.877
> 
> 标签：cuda, nvidia, cuda-gdb

我已经检查过关于这个问题的早期问题，但无法看到它与这里的关系。

我正在用 CUDA 求解 2d 扩散方程，结果发现我的 GPU 代码比它的 CPU 代码慢。

这是我的代码：

```
//kernel definition
__global__ void diffusionSolver(double* A, int n_x,int n_y)
{

int i = blockIdx.x * blockDim.x + threadIdx.x;
int j = blockIdx.y * blockDim.y + threadIdx.y;

if(i<n_x && j <n_y && i*(n_x-i-1)*j*(n_y-j-1)!=0)
    A[i+n_y*j] = A[i+n_y*j] + (A[i-1+n_y*j]+A[i+1+n_y*j]+A[i+(j-1)*n_y]+A[i+(j+1)*n_y] -4.0*A[i+n_y*j])/40.0;

} 
```

主函数

```
 int main()
        {
        int n_x = 200 ;
        int n_y = 200 ;       
        double *phi;
        double *dummy;
        double *phi_old;            
        int i,j ;

        phi = (double *) malloc( n_x*n_y* sizeof(double));
        phi_old = (double *) malloc( n_x*n_y* sizeof(double));
        dummy = (double *) malloc( n_x*n_y* sizeof(double));
        int iterationMax =200;                    
        for(j=0;j<n_y ;j++)
        {
            for(i=0;i<n_x;i++)
            {
            if((.4*n_x-i)*(.6*n_x-i)<0)
            phi[i+n_y*j] = -1;

            else 
            phi[i+n_y*j] = 1;
            }

        }

        double *dev_phi;
        cudaMalloc((void **) &dev_phi, n_x*n_y*sizeof(double));
        cudaMemcpy(dev_phi, phi, n_x*n_y*sizeof(double),
        cudaMemcpyHostToDevice);

        dim3 threadsPerBlock(10,100);
        dim3 numBlocks(n_x*n_y / threadsPerBlock.x, n_x*n_y / threadsPerBlock.y);

        for(int z=0; z<iterationMax; z++)
        {
        if(z%100==0)
        cout <<z/100 <<"\n";;
        diffusionSolver<<<numBlocks, threadsPerBlock>>>(dev_phi, n_x,n_y);
        }
    cudaMemcpy(phi, dev_phi,n_x*n_y*sizeof(double), cudaMemcpyDeviceToHost);
cudaFree(dev_phi);
    return 0;
    } 
```

这段代码的问题在于它比简单的仅 CPU 迭代方法运行得慢。我对探查器知之甚少，直到现在我尝试使用`cuda-memcheck`which 给出`0`错误。我怎样才能知道代码的哪一部分执行缓慢并加快速度？我正在使用 Linux 环境。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T14:38:19.943

我看到的最糟糕的问题是，您针对输入数组的大小启动了太多块。目前，您将网格大小计算为：

```
dim3 numBlocks(n_x*n_y / threadsPerBlock.x, n_x*n_y / threadsPerBlock.y); 
```

对于只有 200x200 的输入数组，这应该会产生 (400,4000) 个块的网格大小。这显然是不正确的。计算应该是这样的：

```
int nbx = (n_x / threadsPerBlock.x) + (((n_x % threadsPerBlock.x) == 0) ? 0 : 1);
int nby = (n_y / threadsPerBlock.y) + (((n_y % threadsPerBlock.y) == 0) ? 0 : 1);
dim3 numBlocks(nbx,nby); 
```

这将产生 (2,20) 个块的网格大小，或比您当前启动的少 40000 倍。

您可以考虑对内核进行其他优化，但与如此严重的错误相比，这些优化显得微不足道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:52:27.633

你正在做很多整数乘法并且有很多全局内存读取，这两者在 CUDA 中都很慢。我还想象没有很多合并的全局内存读取。

加速内核的唯一方法是通过共享内存进行合并内存读取和/或重新排列数据，以便您可以在不使用大量整数乘法的情况下对其进行索引。

我对扩散方程没有很好的掌握，但我不认为有很多幼稚的并行性可以利用。看看[CUDA 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)和[最佳实践指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Best_Practices_Guide.pdf)，也许你会得到一些关于如何改进算法的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-11T20:05:04.263

如果有人感兴趣，我将在下面发布一个关于 2D 热方程求解方法优化的完整代码。

考虑了五种方法，使用：

1.  **全局内存**，本质上是 OP 的方法；
2.  **共享内存**大小`BLOCK_SIZE_X x BLOCK_SIZE_Y`不加载**晕区**；
3.  **`BLOCK_SIZE_X x BLOCK_SIZE_Y`加载**晕区**大小的**共享内存**；**
***   **`(BLOCK_SIZE_X + 2) x (BLOCK_SIZE_Y + 2)`加载**晕区**大小的**共享内存**；*****   **纹理记忆**。****

 ****每个人都可以运行代码并检查哪种方法对于他自己的 GPU 架构更快。

```
#include <iostream>

#include "cuda_runtime.h"
#include "device_launch_parameters.h"

#include "Utilities.cuh"
#include "InputOutput.cuh"
#include "TimingGPU.cuh"

#define BLOCK_SIZE_X 16
#define BLOCK_SIZE_Y 16

#define DEBUG

texture<float, 2, cudaReadModeElementType>  tex_T;
texture<float, 2, cudaReadModeElementType>  tex_T_old;

/***********************************/
/* JACOBI ITERATION FUNCTION - GPU */
/***********************************/
__global__ void Jacobi_Iterator_GPU(const float * __restrict__ T_old, float * __restrict__ T_new, const int NX, const int NY)
{
    const int i = blockIdx.x * blockDim.x + threadIdx.x ;
    const int j = blockIdx.y * blockDim.y + threadIdx.y ;

                                //                         N 
    int P = i + j*NX;           // node (i,j)              |
    int N = i + (j+1)*NX;       // node (i,j+1)            |
    int S = i + (j-1)*NX;       // node (i,j-1)     W ---- P ---- E
    int E = (i+1) + j*NX;       // node (i+1,j)            |
    int W = (i-1) + j*NX;       // node (i-1,j)            |
                                //                         S 

    // --- Only update "interior" (not boundary) node points
    if (i>0 && i<NX-1 && j>0 && j<NY-1) T_new[P] = 0.25 * (T_old[E] + T_old[W] + T_old[N] + T_old[S]); 
}

/******************************************************/
/* JACOBI ITERATION FUNCTION - GPU - SHARED MEMORY V1 */
/******************************************************/
__global__ void Jacobi_Iterator_GPU_shared_v1(const float * __restrict__ T_old, float * __restrict__ T_new, const int NX, const int NY)
{
    const int i = blockIdx.x * blockDim.x + threadIdx.x ;
    const int j = blockIdx.y * blockDim.y + threadIdx.y ;

                                //                         N 
    int P = i + j*NX;           // node (i,j)              |
    int N = i + (j+1)*NX;       // node (i,j+1)            |
    int S = i + (j-1)*NX;       // node (i,j-1)     W ---- P ---- E
    int E = (i+1) + j*NX;       // node (i+1,j)            |
    int W = (i-1) + j*NX;       // node (i-1,j)            |
                                //                         S 
    __shared__ float T_sh[BLOCK_SIZE_X][BLOCK_SIZE_Y];

    // --- Load data to shared memory. Halo regions are NOT loaded.
    T_sh[threadIdx.x][threadIdx.y] = T_old[P];
    __syncthreads();

    if ((threadIdx.x > 0) && (threadIdx.x < (BLOCK_SIZE_X - 1)) && (threadIdx.y > 0) && (threadIdx.y < (BLOCK_SIZE_Y ‐ 1))) 
        // --- If we do not need halo region elements, then use shared memory.
        T_new[P] = 0.25 * (T_sh[threadIdx.x][threadIdx.y - 1] + T_sh[threadIdx.x][threadIdx.y + 1] + T_sh[threadIdx.x - 1][threadIdx.y] + T_sh[threadIdx.x + 1][threadIdx.y]);
    else if (i>0 && i<NX-1 && j>0 && j<NY-1)  // --- Only update "interior" (not boundary) node points
        // --- If we need halo region elements, then use global memory.
        T_new[P] = 0.25 * (T_old[E] + T_old[W] + T_old[N] + T_old[S]); 

}

/******************************************************/
/* JACOBI ITERATION FUNCTION - GPU - SHARED MEMORY V2 */
/******************************************************/
__global__ void Jacobi_Iterator_GPU_shared_v2(const float * __restrict__ T_old, float * __restrict__ T_new, const int NX, const int NY)
{
    const int i = blockIdx.x * (BLOCK_SIZE_X - 2) + threadIdx.x ;
    const int j = blockIdx.y * (BLOCK_SIZE_Y - 2) + threadIdx.y ;

    int P = i + j*NX;           

    if ((i >= NX) || (j >= NY)) return;

    __shared__ float T_sh[BLOCK_SIZE_X][BLOCK_SIZE_Y];

    // --- Load data to shared memory. Halo regions ARE loaded.
    T_sh[threadIdx.x][threadIdx.y] = T_old[P];
    __syncthreads();

    if (((threadIdx.x > 0) && (threadIdx.x < (BLOCK_SIZE_X - 1)) && (threadIdx.y > 0) && (threadIdx.y < (BLOCK_SIZE_Y ‐ 1))) &&
       (i>0 && i<NX-1 && j>0 && j<NY-1))
        T_new[P] = 0.25 * (T_sh[threadIdx.x][threadIdx.y - 1] + T_sh[threadIdx.x][threadIdx.y + 1] + T_sh[threadIdx.x - 1][threadIdx.y] + T_sh[threadIdx.x + 1][threadIdx.y]);

}

/******************************************************/
/* JACOBI ITERATION FUNCTION - GPU - SHARED MEMORY V2 */
/******************************************************/
__global__ void Jacobi_Iterator_GPU_shared_v3(const float * __restrict__ T_old, float * __restrict__ T_new, const int NX, const int NY)
{
    const int i = blockIdx.x * blockDim.x + threadIdx.x ;
    const int j = blockIdx.y * blockDim.y + threadIdx.y ;

    const int tid_block = threadIdx.y * BLOCK_SIZE_X + threadIdx.x;     // --- Flattened thread index within a block

    const int i1      = tid_block % (BLOCK_SIZE_X + 2);
    const int j1      = tid_block / (BLOCK_SIZE_Y + 2);

    const int i2      = (BLOCK_SIZE_X * BLOCK_SIZE_Y + tid_block) % (BLOCK_SIZE_X + 2);
    const int j2      = (BLOCK_SIZE_X * BLOCK_SIZE_Y + tid_block) / (BLOCK_SIZE_Y + 2);

    int P = i + j * NX;           

    if ((i >= NX) || (j >= NY)) return;

    __shared__ float T_sh[BLOCK_SIZE_X + 2][BLOCK_SIZE_Y + 2];

    if (((blockIdx.x * BLOCK_SIZE_X - 1 + i1) < NX) && ((blockIdx.y * BLOCK_SIZE_Y - 1 + j1) < NY))
        T_sh[i1][j1] = T_old[(blockIdx.x * BLOCK_SIZE_X - 1 + i1) + (blockIdx.y * BLOCK_SIZE_Y - 1 + j1) * NX];

    if (((i2 < (BLOCK_SIZE_X + 2)) && (j2 < (BLOCK_SIZE_Y + 2))) && (((blockIdx.x * BLOCK_SIZE_X - 1 + i2) < NX) && ((blockIdx.y * BLOCK_SIZE_Y - 1 + j2) < NY)))
        T_sh[i2][j2] = T_old[(blockIdx.x * BLOCK_SIZE_X - 1 + i2) + (blockIdx.y * BLOCK_SIZE_Y - 1 + j2) * NX];

    __syncthreads();

    if ((threadIdx.x <= (BLOCK_SIZE_X - 1) && (threadIdx.y <= (BLOCK_SIZE_Y ‐ 1))) && (i>0 && i<NX-1 && j>0 && j<NY-1))
        T_new[P] = 0.25 * (T_sh[threadIdx.x + 1][threadIdx.y] + T_sh[threadIdx.x + 1][threadIdx.y + 2] + T_sh[threadIdx.x][threadIdx.y + 1] + T_sh[threadIdx.x + 2][threadIdx.y + 1]);

}

/*********************************************/
/* JACOBI ITERATION FUNCTION - GPU - TEXTURE */
/*********************************************/
__global__ void Jacobi_Iterator_GPU_texture(float * __restrict__ T_new, const bool flag, const int NX, const int NY) {

    const int i = blockIdx.x * blockDim.x + threadIdx.x ;
    const int j = blockIdx.y * blockDim.y + threadIdx.y ;

    float P, N, S, E, W;    
    if (flag) {
                                            //                         N 
        P = tex2D(tex_T_old, i,     j);     // node (i,j)              |
        N = tex2D(tex_T_old, i,     j + 1); // node (i,j+1)            |
        S = tex2D(tex_T_old, i,     j - 1); // node (i,j-1)     W ---- P ---- E
        E = tex2D(tex_T_old, i + 1, j);     // node (i+1,j)            |
        W = tex2D(tex_T_old, i - 1, j);     // node (i-1,j)            |
                                            //                         S 
    } else {
                                            //                         N 
        P = tex2D(tex_T,     i,     j);     // node (i,j)              |
        N = tex2D(tex_T,     i,     j + 1); // node (i,j+1)            |
        S = tex2D(tex_T,     i,     j - 1); // node (i,j-1)     W ---- P ---- E
        E = tex2D(tex_T,     i + 1, j);     // node (i+1,j)            |
        W = tex2D(tex_T,     i - 1, j);     // node (i-1,j)            |
                                            //                         S 
    }

    // --- Only update "interior" (not boundary) node points
    if (i>0 && i<NX-1 && j>0 && j<NY-1) T_new[i + j*NX] = 0.25 * (E + W + N + S);
}

/***********************************/
/* JACOBI ITERATION FUNCTION - CPU */
/***********************************/
void Jacobi_Iterator_CPU(float * __restrict T, float * __restrict T_new, const int NX, const int NY, const int MAX_ITER)
{
    for(int iter=0; iter<MAX_ITER; iter=iter+2)
    {
        // --- Only update "interior" (not boundary) node points
        for(int j=1; j<NY-1; j++) 
            for(int i=1; i<NX-1; i++) {
                float T_E = T[(i+1) + NX*j];
                float T_W = T[(i-1) + NX*j];
                float T_N = T[i + NX*(j+1)];
                float T_S = T[i + NX*(j-1)];
                T_new[i+NX*j] = 0.25*(T_E + T_W + T_N + T_S);
            }

        for(int j=1; j<NY-1; j++) 
            for(int i=1; i<NX-1; i++) {
                float T_E = T_new[(i+1) + NX*j];
                float T_W = T_new[(i-1) + NX*j];
                float T_N = T_new[i + NX*(j+1)];
                float T_S = T_new[i + NX*(j-1)];
                T[i+NX*j] = 0.25*(T_E + T_W + T_N + T_S);
            }
    }
}

/******************************/
/* TEMPERATURE INITIALIZATION */
/******************************/
void Initialize(float * __restrict h_T, const int NX, const int NY)
{
    // --- Set left wall to 1
    for(int j=0; j<NY; j++) h_T[j * NX] = 1.0;
}

/********/
/* MAIN */
/********/
int main()
{
    const int NX = 256;         // --- Number of discretization points along the x axis
    const int NY = 256;         // --- Number of discretization points along the y axis

    const int MAX_ITER = 100;   // --- Number of Jacobi iterations

    // --- CPU temperature distributions
    float *h_T              = (float *)calloc(NX * NY, sizeof(float));
    float *h_T_old          = (float *)calloc(NX * NY, sizeof(float));
    Initialize(h_T,     NX, NY);
    Initialize(h_T_old, NX, NY);
    float *h_T_GPU_result       = (float *)malloc(NX * NY * sizeof(float));
    float *h_T_GPU_tex_result   = (float *)malloc(NX * NY * sizeof(float));
    float *h_T_GPU_sh1_result   = (float *)malloc(NX * NY * sizeof(float));
    float *h_T_GPU_sh2_result   = (float *)malloc(NX * NY * sizeof(float));
    float *h_T_GPU_sh3_result   = (float *)malloc(NX * NY * sizeof(float));

    // --- GPU temperature distribution
    float *d_T;         gpuErrchk(cudaMalloc((void**)&d_T,          NX * NY * sizeof(float)));
    float *d_T_old;     gpuErrchk(cudaMalloc((void**)&d_T_old,      NX * NY * sizeof(float)));
    float *d_T_tex;     gpuErrchk(cudaMalloc((void**)&d_T_tex,      NX * NY * sizeof(float)));
    float *d_T_old_tex; gpuErrchk(cudaMalloc((void**)&d_T_old_tex,  NX * NY * sizeof(float)));
    float *d_T_sh1;     gpuErrchk(cudaMalloc((void**)&d_T_sh1,      NX * NY * sizeof(float)));
    float *d_T_old_sh1; gpuErrchk(cudaMalloc((void**)&d_T_old_sh1,  NX * NY * sizeof(float)));
    float *d_T_sh2;     gpuErrchk(cudaMalloc((void**)&d_T_sh2,      NX * NY * sizeof(float)));
    float *d_T_old_sh2; gpuErrchk(cudaMalloc((void**)&d_T_old_sh2,  NX * NY * sizeof(float)));
    float *d_T_sh3;     gpuErrchk(cudaMalloc((void**)&d_T_sh3,      NX * NY * sizeof(float)));
    float *d_T_old_sh3; gpuErrchk(cudaMalloc((void**)&d_T_old_sh3,  NX * NY * sizeof(float)));

    gpuErrchk(cudaMemcpy(d_T,           h_T,     NX * NY * sizeof(float), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_T_tex,       h_T,     NX * NY * sizeof(float), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_T_sh1,       h_T,     NX * NY * sizeof(float), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_T_sh2,       h_T,     NX * NY * sizeof(float), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_T_sh3,       h_T,     NX * NY * sizeof(float), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_T_old,       d_T,     NX * NY * sizeof(float), cudaMemcpyDeviceToDevice));
    gpuErrchk(cudaMemcpy(d_T_old_tex,   d_T_tex, NX * NY * sizeof(float), cudaMemcpyDeviceToDevice));
    gpuErrchk(cudaMemcpy(d_T_old_sh1,   d_T_sh1, NX * NY * sizeof(float), cudaMemcpyDeviceToDevice));
    gpuErrchk(cudaMemcpy(d_T_old_sh2,   d_T_sh2, NX * NY * sizeof(float), cudaMemcpyDeviceToDevice));
    gpuErrchk(cudaMemcpy(d_T_old_sh3,   d_T_sh3, NX * NY * sizeof(float), cudaMemcpyDeviceToDevice));

    //cudaChannelFormatDesc desc = cudaCreateChannelDesc<float>();
    cudaChannelFormatDesc desc = cudaCreateChannelDesc(32, 0, 0, 0, cudaChannelFormatKindFloat);

    gpuErrchk(cudaBindTexture2D(NULL, &tex_T,     d_T_tex,     &desc, NX, NY, sizeof(float) * NX));
    gpuErrchk(cudaBindTexture2D(NULL, &tex_T_old, d_T_old_tex, &desc, NX, NY, sizeof(float) * NX));

    tex_T.addressMode[0] = cudaAddressModeWrap;
    tex_T.addressMode[1] = cudaAddressModeWrap;
    tex_T.filterMode = cudaFilterModePoint;
    tex_T.normalized = false;

    tex_T_old.addressMode[0] = cudaAddressModeWrap;
    tex_T_old.addressMode[1] = cudaAddressModeWrap;
    tex_T_old.filterMode = cudaFilterModePoint;
    tex_T_old.normalized = false;

    // --- Grid size
    dim3 dimBlock(BLOCK_SIZE_X, BLOCK_SIZE_Y);
    dim3 dimGrid (iDivUp(NX, BLOCK_SIZE_X), iDivUp(NY, BLOCK_SIZE_Y));

    // --- Jacobi iterations on the host
    Jacobi_Iterator_CPU(h_T, h_T_old, NX, NY, MAX_ITER);

    // --- Jacobi iterations on the device
    TimingGPU timerGPU;
    timerGPU.StartCounter();
    for (int k=0; k<MAX_ITER; k=k+2) {
        Jacobi_Iterator_GPU<<<dimGrid, dimBlock>>>(d_T,     d_T_old, NX, NY);   // --- Update d_T_old     starting from data stored in d_T
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif        
        Jacobi_Iterator_GPU<<<dimGrid, dimBlock>>>(d_T_old, d_T    , NX, NY);   // --- Update d_T         starting from data stored in d_T_old
 #ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif
    }
    printf("Timing = %f ms\n", timerGPU.GetCounter());

    // --- Jacobi iterations on the device - shared memory v1
    timerGPU.StartCounter();
    for (int k=0; k<MAX_ITER; k=k+2) {
        Jacobi_Iterator_GPU_shared_v1<<<dimGrid, dimBlock>>>(d_T_sh1,     d_T_old_sh1, NX, NY);   // --- Update d_T_old     starting from data stored in d_T
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif        
        Jacobi_Iterator_GPU_shared_v1<<<dimGrid, dimBlock>>>(d_T_old_sh1, d_T_sh1    , NX, NY);   // --- Update d_T         starting from data stored in d_T_old
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif        
    }
    printf("Timing with shared memory v1 = %f ms\n", timerGPU.GetCounter());

    // --- Jacobi iterations on the device - shared memory v2
    dim3 dimBlock2(BLOCK_SIZE_X, BLOCK_SIZE_Y);
    dim3 dimGrid2 (iDivUp(NX, BLOCK_SIZE_X - 2), iDivUp(NY, BLOCK_SIZE_Y - 2));
    timerGPU.StartCounter();
    for (int k=0; k<MAX_ITER; k=k+2) {
        Jacobi_Iterator_GPU_shared_v2<<<dimGrid2, dimBlock>>>(d_T_sh2,     d_T_old_sh2, NX, NY);   // --- Update d_T_old     starting from data stored in d_T
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif        
        Jacobi_Iterator_GPU_shared_v2<<<dimGrid2, dimBlock>>>(d_T_old_sh2, d_T_sh2    , NX, NY);   // --- Update d_T         starting from data stored in d_T_old
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif        
    }
    printf("Timing with shared memory v2 = %f ms\n", timerGPU.GetCounter());

    // --- Jacobi iterations on the device - shared memory v3
    timerGPU.StartCounter();
    for (int k=0; k<MAX_ITER; k=k+2) {
        Jacobi_Iterator_GPU_shared_v3<<<dimGrid, dimBlock>>>(d_T_sh3,     d_T_old_sh3, NX, NY);   // --- Update d_T_old     starting from data stored in d_T
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif        
        Jacobi_Iterator_GPU_shared_v3<<<dimGrid, dimBlock>>>(d_T_old_sh3, d_T_sh3    , NX, NY);   // --- Update d_T         starting from data stored in d_T_old
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif        
    }
    printf("Timing with shared memory v3 = %f ms\n", timerGPU.GetCounter());

    // --- Jacobi iterations on the device - texture case
    timerGPU.StartCounter();
    for (int k=0; k<MAX_ITER; k=k+2) {
        Jacobi_Iterator_GPU_texture<<<dimGrid, dimBlock>>>(d_T_old_tex, 0, NX, NY);   // --- Update d_T_tex         starting from data stored in d_T_old_tex
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif        
        Jacobi_Iterator_GPU_texture<<<dimGrid, dimBlock>>>(d_T_tex,     1, NX, NY);   // --- Update d_T_old_tex     starting from data stored in d_T_tex
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
#endif        
    }
    printf("Timing with texture = %f ms\n", timerGPU.GetCounter());

    saveCPUrealtxt(h_T,     "C:\\Users\\Documents\\Project\\Differential_Equations\\Heat_Equation\\2D\\DiffusionEquationJacobi\\DiffusionEquation\\CPU_result.txt",     NX * NY);
    saveGPUrealtxt(d_T_tex, "C:\\Users\\Documents\\Project\\Differential_Equations\\Heat_Equation\\2D\\DiffusionEquationJacobi\\DiffusionEquation\\GPU_result_tex.txt", NX * NY);
    saveGPUrealtxt(d_T,     "C:\\Users\\Documents\\Project\\Differential_Equations\\Heat_Equation\\2D\\DiffusionEquationJacobi\\DiffusionEquation\\GPU_result.txt",     NX * NY);
    saveGPUrealtxt(d_T_sh1, "C:\\Users\\Documents\\Project\\Differential_Equations\\Heat_Equation\\2D\\DiffusionEquationJacobi\\DiffusionEquation\\GPU_result_sh1.txt",     NX * NY);
    saveGPUrealtxt(d_T_sh2, "C:\\Users\\Documents\\Project\\Differential_Equations\\Heat_Equation\\2D\\DiffusionEquationJacobi\\DiffusionEquation\\GPU_result_sh2.txt",     NX * NY);
    saveGPUrealtxt(d_T_sh3, "C:\\Users\\Documents\\Project\\Differential_Equations\\Heat_Equation\\2D\\DiffusionEquationJacobi\\DiffusionEquation\\GPU_result_sh3.txt",     NX * NY);

    // --- Copy results from device to host
    gpuErrchk(cudaMemcpy(h_T_GPU_result,     d_T,     NX * NY * sizeof(float), cudaMemcpyDeviceToHost));
    gpuErrchk(cudaMemcpy(h_T_GPU_tex_result, d_T_tex, NX * NY * sizeof(float), cudaMemcpyDeviceToHost));
    gpuErrchk(cudaMemcpy(h_T_GPU_sh1_result, d_T_sh1, NX * NY * sizeof(float), cudaMemcpyDeviceToHost));
    gpuErrchk(cudaMemcpy(h_T_GPU_sh2_result, d_T_sh2, NX * NY * sizeof(float), cudaMemcpyDeviceToHost));
    gpuErrchk(cudaMemcpy(h_T_GPU_sh3_result, d_T_sh3, NX * NY * sizeof(float), cudaMemcpyDeviceToHost));

    // --- Calculate percentage root mean square error between host and device results
    float sum = 0.f, sum_tex = 0.f, sum_ref = 0.f, sum_sh1 = 0.f, sum_sh2 = 0.f, sum_sh3 = 0.f;
    for (int j=0; j<NY; j++)
        for (int i=0; i<NX; i++) {
            sum     = sum     + (h_T_GPU_result    [j * NX + i] - h_T[j * NX + i]) * (h_T_GPU_result    [j * NX + i] - h_T[j * NX + i]);
            sum_tex = sum_tex + (h_T_GPU_tex_result[j * NX + i] - h_T[j * NX + i]) * (h_T_GPU_tex_result[j * NX + i] - h_T[j * NX + i]);
            sum_sh1 = sum_sh1 + (h_T_GPU_sh1_result[j * NX + i] - h_T[j * NX + i]) * (h_T_GPU_sh1_result[j * NX + i] - h_T[j * NX + i]);
            sum_sh2 = sum_sh2 + (h_T_GPU_sh2_result[j * NX + i] - h_T[j * NX + i]) * (h_T_GPU_sh2_result[j * NX + i] - h_T[j * NX + i]);
            sum_sh3 = sum_sh3 + (h_T_GPU_sh3_result[j * NX + i] - h_T[j * NX + i]) * (h_T_GPU_sh3_result[j * NX + i] - h_T[j * NX + i]);
            sum_ref = sum_ref + h_T[j * NX + i]                                * h_T[j * NX + i];
        }
    printf("Percentage root mean square error           = %f\n", 100.*sqrt(sum     / sum_ref));
    printf("Percentage root mean square error texture   = %f\n", 100.*sqrt(sum_tex / sum_ref));
    printf("Percentage root mean square error shared v1 = %f\n", 100.*sqrt(sum_sh1 / sum_ref));
    printf("Percentage root mean square error shared v2 = %f\n", 100.*sqrt(sum_sh2 / sum_ref));
    printf("Percentage root mean square error shared v3 = %f\n", 100.*sqrt(sum_sh3 / sum_ref));

    return 0;
} 
```****

# android - 视图的 destroyDrawingCache() 操作是否昂贵？

> ID：12004782
> 
> 赞同：1
> 
> 时间：2012-08-17T11:18:53.643
> 
> 标签：android, view

destroyDrawingCache() 操作昂贵吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:23:11.047

如果你`buildDrawingCache()`手动调用而不调用`setDrawingCacheEnabled(true)`，你应该通过调用来清理缓存`destroyDrawingCache()`。

您应该避免在启用硬件加速时调用此方法。如果不需要绘图缓存位图，调用此方法会增加内存使用并导致视图在软件中渲染一次，从而对性能产生负面影响。

# uitableview - 如果我将点击手势识别器添加到 TableView，UITableView 不会滚动

> ID：12004783
> 
> 赞同：0
> 
> 时间：2012-08-17T11:18:56.343
> 
> 标签：uitableview, uigesturerecognizer

我想要一个带有 UITableView 的点击手势识别器。但是如果我添加一个手势识别器，UITableView 的滚动功能就不起作用了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:27:15.353

```
self.tableView = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320, 460) style:UITableViewStylePlain];
self.tableView.backgroundColor = [UIColor darkGrayColor];
self.tableView.dataSource = self;
self.tableView.delegate = self;

[self.view addSubview:self.tableView];

UITapGestureRecognizer *tap=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tap)];

[self.tableView addGestureRecognizer:tap];

-(void)tap
{

NSLog(@"You are Tap on Table.....");    

} 
```

它的工作尝试它。

# php - json 解码和属性访问失败

> ID：12004788
> 
> 赞同：0
> 
> 时间：2012-08-17T11:19:24.283
> 
> 标签：php, joomla, joomla1.5, joomla2.5, joomla-extensions

> **可能重复：**
> [如何访问此对象属性？](https://stackoverflow.com/questions/758449/how-do-i-access-this-object-property)

> stdClass 对象 ( [show_title] => [link_titles] => [show_intro] => [show_category] ​​=> [link_category] ​​=> [show_parent_category] ​​=> [link_parent_category] ​​=> [show_author] => [link_author] => [show_create_date ] => [show_modify_date] => [show_publish_date] => [show_item_navigation] => [show_vote] => [show_icons] => [show_print_icon] => [show_email_icon] => [show_hits] => [show_noauth] => [urls_position ] => [menu-anchor_title] => [menu-anchor_css] => [menu_image] => [menu_text] => 1 [page_title] => [show_page_heading] => 0 [page_heading] => [pageclass_sfx] => [ menu-meta_description] => [menu-meta_keywords] => [robots] => [secure] => 0)

这是使用 print_r 进行 json-decode 后项目的输出我想访问属性 menu-anchor_css 但我不能做这样的事情

```
$items=json_decode($item->params);
$class = $items->menu-anchor_css ? 'class="'.$items->anchor_css.'" ' : '';
$title = $items->menu-anchor_title ? 'title="'.$items->anchor_title.'" ' : ''; 
```

因为它总是向我显示`menu`未定义的错误消息。（连字符和下划线在这里似乎有问题）

十分感谢

# php - opentbs 删除空格

> ID：12004790
> 
> 赞同：0
> 
> 时间：2012-08-17T11:19:51.927
> 
> 标签：php, docx, xlsx, opentbs

我正在使用 openTBS 将数据从 mysql db（通过 PHP）转换为一些 word 和 excel 文档。

我的问题之一是，openTBS 正在删除标签附近的大量空格。

```
blablabla [base_sub1.value] blablabla 
```

输出是

```
blablablavalue blablabla 
```

或者

```
blablablavalueblablabla 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:10:46.400

由于格式、拼写和版本历史，Word 女士经常删减内部 XML 内容。这可能会导致 OpenTBS 在那些地方失去一些空间，因为处理属性 `xml:space="preserve"`变得太复杂了。

从 OpenTBS 1.7.6 版本开始，此类空间问题已在主体中修复。在页眉和页脚等其他特殊部分可能仍然存在问题。

否则，大多数情况下，如果您剪切 TBS 标签并将其粘贴到解决问题的同一位置。或者剪切并作为“无格式文本”进行特殊粘贴。

否则，为避免出现空格错误，您必须在模板编辑时执行以下操作：

1.  避免内部评论标记：
    *   如果您有 Word 2003，请转到菜单工具，选择选项，然后选项卡安全性并取消选中框“存储随机数以提高合并准确性”。
    *   如果您有 Word 2007 或更高版本，请转到 Word 选项中的信任中心，并关闭设置：“存储随机数以提高组合准确性”。
    *   如果您有 Office for Mac 2011，那么很遗憾，此选项尚不存在。尝试将所有文​​档和过去复制到新文档中。
2.  避免拼写标记：每次输入新的 TBS 标签或每次在 TBS 标签上应用格式时，选择它并单击“审阅”功能区，在“校对”组中，单击“设置语言”按钮。在对话框中，确保选中“不检查拼写或语法”框。

# oop - 使用 oops 概念进行编程

> ID：12004791
> 
> 赞同：0
> 
> 时间：2012-08-17T11:19:53.910
> 
> 标签：oop

你能给我一个关于以下程序的想法吗？

有汽车厂。所有车辆的共同属性是可以`run`。构建任何车辆的基本结构，都需要通过`wheel count`，`wheel size`和`factor`。`max speed`由 和`wheel count`的乘法`size`定义`factor`。

工厂可以建造：`Cycle`, `MotorCycle`, `Car`, `Bus`. 当这些车辆运行时，它们会打印`<Vehicle Name>can run at speed<Max Speed>` 请使用 OO 方法编写程序。

```
Factor:Cycle=1,MotorCycle=2,Car=4,Bus=6
Wheel Size:Cycle=10, MotorCycle=12, Car=12, Bus=20 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:03:33.620

字里行间：

1.  它们*可以* `run`：指一种方法。
2.  *构建基本结构*：指的是构造函数，实际上是对构造函数参数的总结。
3.  由 ...的*乘积*`max speed`定义：计算的属性。
**   工厂可以建造……总结`Vehicle`. （正如您已经了解的那样）。*   当这些车辆运行时，它们...：告诉您该`run`方法应该做什么。*

 *然后给出构造函数参数，假设你能算出轮数。*

# javascript - 使用函数'sort'对javascript数组进行排序

> ID：12004792
> 
> 赞同：0
> 
> 时间：2012-08-17T11:19:58.857
> 
> 标签：javascript, sorting

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:51:59.793

我写了几个检查某些数据结构的正则表达式条件。（你总是可以只做一个大的 switch 语句，根据 'typeof(a)' 或 'typeof(b)' 是什么来分支。）这些检查确定字符串中的值是否应该被解释为字符串以外的东西。

```
function sortVals(a,b){
    //other code here  
    var aT=a+"", bT=b+"";    //a and b as strings
    if(!aT.match(/[^0-9]/) && !bT.match(/[^0-9]/)){//no non-numbers were found
        a = parseInt(aT, 10);
        b = parseInt(bT, 10);
        if(a!=b)
            return a<b?1:-1;    //returns 1 if a<b; -1 if a>b
    }else if(!aT.match(/[^0-9\.]|\..*\./) && !bT.match(/[^0-9\.]|\..*\./)){//only valid floats were found
        a = parseFloat(aT);
        b = parseFloat(bT);
        if(a!=b)
            return a<b?1:-1;
    }
} 
```

我不知道这是否是你想要的一部分，但如果你想要任何数据类型的排序函数，你需要做一些工作。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T04:13:58.953

如前所述，您需要识别数据类型。但是这里有一个，您可以将其用于字符串/整数。

```
var sortMethod = function(x,y){
    var a = x|0 , 
        b = y|0; 
    return (a>b) ? 1 : -1;
});

var x = ["1", "34" , "3" , "12"].sort(sortMethod);
var y = [3,52,123,1].sort(sortMethod); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:38:56.223

您没有得到您期望的输出的原因是当两个操作数都是字符串类型时，它们之间会按字母顺序进行比较。它们不会自动转换为数字。

```
"2" > "12" // result is true 
```

如果其中一个操作数是数字，则比较运算符会将另一个操作数从字符串转换为数字。

```
"2" > 12 // result is false 
```

需要指出的另一件事是，在数字数组的情况下，您正试图访问索引 1 处的数组元素。

```
if(a[1]>b[1]) return 1; 
```

这应该是：

```
if( a > b ) return 1; 
```

我会分别处理每种数据类型，而不是编写这样的通用函数。

# facebook - Trying to include FB insights in my website, still getting invalid app_id?

> ID：12004793
> 
> 赞同：-1
> 
> 时间：2012-08-17T11:19:59.107
> 
> 标签：facebook, facebook-graph-api

i am just following [http://developers.facebook.com/docs/insights/](http://developers.facebook.com/docs/insights/) and i add the meta tag to the in index.php but i am getting the error:

The app ID "xxxx81342935368" specified within the "fb:app_id" meta tag was invalid.

I do see FB insights for my FB page, but i like to add FB insight to my regular website

How can i fix this?

regards

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T12:52:08.397

确定几乎固定。我必须创建一个单独的应用程序，并且必须使用我的个人帐户登录，而不是作为我的 FB 页面之一。

现在将我的一个 FB 页面的 app_id 添加为 fb:admins 不起作用，这可能吗？

# javascript - 验证来自 javascript 数组的文本字段输入

> ID：12004795
> 
> 赞同：0
> 
> 时间：2012-08-17T11:20:09.727
> 
> 标签：javascript, arrays, validation

我写了这个小脚本。有人可以帮我解决这个问题吗

我在将数组的值与来自文本字段的用户输入进行数学运算时遇到问题。

我不确定是否需要使用 for 循环，但如果没有 for 循环，逻辑似乎很简单。

提前致谢

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

var zone1 = new Array("london", "manchester", "spain", "paris");
var zone2 = new Array("newyork", "toronto", "los angeles", "vancouver");
var zone3 = new Array("delhi", "seoul", "moscow", "dhaka");

function validateForm()
{
var x=document.forms["myForm"]["fname"].value;

 if (x==zone1)
  {
  alert("You are in Europe");
  return false;
  }

  else if (x==zone2)
  {
  alert("You are in North America");
  return false;
  }

  else if (x==zone3)
  {
  alert("You are in Asia");
  return false;
  }

  else{
      alert("try again");
      return false;

  }

}
</script>
</head>

<body>
<form name="myForm" action="" onsubmit="return validateForm()" method="post">
Enter your City: <input type="text" name="fname">
<input type="submit" value="Submit">
</form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:20:29.807

可能的解决方案。

```
var zones = {
    "london" : "Europe",
    "newyork" : "North America",
    "delhi" : "Asia"
}

function validateForm() {
    var x = document.forms["myForm"]["fname"].value;
    if( zones[ x ] ) {
        alert( "You are in " + zones[ x ] );
    } else {
        alert( "try again" );
    }
} 
```

你只在你的函数中返回 false 所以我猜这是设计使然。我把它作为一个没有返回语句的函数返回 undefined ，这是一个虚假值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:26:33.457

像这样的东西应该可以工作（未经测试，但向您展示了这个想法）：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

var zone1 = new Array("london", "manchester", "spain", "paris");
var zone2 = new Array("newyork", "toronto", "los angeles", "vancouver");
var zone3 = new Array("delhi", "seoul", "moscow", "dhaka");

var zones = {};
var zoneLabels = {};

zoneLabels.europe = "Europe";
zoneLabels.northamerica = "North America";
zoneLabels.asia = "Asia"; 

zones.europe = zone1;
zones.northamerica = zone2;
zones.asia = zone3;

function validateForm(){
    var x=document.forms["myForm"]["fname"].value;

    for (i in zones){
        var zone = zones[i];
        for(j in zone){
            if( x == zone[j]){
                alert("you are in " + zoneLabels[i]);
                return false;
            }
        }
    }

    alert("try again");
    return false;
}
</script>

<title>test</title>
</head>

<body>
<form name="myForm" action="" onsubmit="return validateForm()" method="post">
    Enter your City: <input type="text" name="fname">
    <input type="submit" value="Submit">
</form>
</body>

</html> 
```

如果您想将区域对象的大陆属性映射到自定义标签，您可以定义第二个对象（我编辑了上面的代码）

更新：

如果你想添加更多的区域，你应该添加一个新的区域数组：

```
var zone4 = new Array("canberra","perth"); 
```

将此添加到区域对象：

```
zones.australia = zone4; 
```

并在 zoneLabels 对象中添加一个条目：

```
zoneLabels.australia = "Australia"; 
```

# python - 鲭鱼模板

> ID：12004798
> 
> 赞同：1
> 
> 时间：2012-08-17T11:20:24.330
> 
> 标签：python, mako

我是 Python 和 Mako 等的新手。我的问题可能看起来很愚蠢，我提前道歉，但我查看了文档并找不到它。

在 .py 文件中，我可以使用`#`字符来记笔记。我也可以使用

```
'''
notes
notes
''' 
```

我的问题：

*   我该如何处理`.mako`文件？
*   这个的通用名称是什么？（记笔记，注释..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:23:37.453

[http://docs.makotemplates.org/en/latest/syntax.html#comments](http://docs.makotemplates.org/en/latest/syntax.html#comments)

在几乎所有的编程语言和相关的技术格式中，这个特性都被称为注释。

# java - java中的变量初始化和声明问题

> ID：12004799
> 
> 赞同：1
> 
> 时间：2012-08-17T11:20:24.187
> 
> 标签：java, initialization, declaration

当分配从右到左发生时，为什么跟随不给出编译器错误？

```
String str = str = ""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:39:38.123

该行为由[Java 语言规范 #15.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.1-500)关于赋值运算符定义。即（强调我的）：

> 否则，需要三个步骤：
> 
> *   **首先，评估左侧操作数以产生变量。**如果这个求值突然完成，那么赋值表达式也会因为同样的原因而突然完成；不计算右侧操作数，也不发生赋值。
> *   否则，评估右侧操作数。如果这个求值突然完成，那么赋值表达式也会因为同样的原因而突然完成并且没有赋值发生。
> *   否则，将右侧操作数的值转换为左侧变量的类型，进行值集转换（第 5.1.13 节）到适当的标准值集（不是扩展指数值集），并将转换的结果存储到变量中。

所以表达式的求值`str = str = "";`是从右到左的，但是左边的操作数`String str`首先被求值并创建变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:34:53.003

编译器会为您生成警告，`Assignment to variable str has no effect`这意味着编译器只需将其替换为

```
 String str = ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:01:17.880

根据[Java 语言规范的第 6.3 段，](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3)允许在其自己的初始化程序中使用（局部）变量。

> 块中局部变量声明的范围（第 14.4 节）是声明出现的块的其余部分，**从它自己的初始化程序开始，**并在局部变量声明语句的右侧包括任何进一步的声明符。

在初始化之前不允许读取变量，但该语句不会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:28:13.193

Java 允许从右到左分配对象。

下面的代码清楚地表明了这一点。

```
String a;
String b;
String c;
String str = a = b = c = "Hello World!"; 
```

没有什么像第二个str。

```
String str = str = ""; // There is only 1 str here and it is declared properly.Thus the compiler doesnt give any error.

String str = a = ""; // This will give Error Though since a is undeclared 
```

# c# - 如果有更多方法，C# 类是否会占用更多空间？

> ID：12004800
> 
> 赞同：1
> 
> 时间：2012-08-17T11:20:32.427
> 
> 标签：c#, .net

我有一个名为 TreeNode 的类

```
public class TreeNode
{
    public TreeNode Parent { get; set; }
    public Guid Id { get; set; }
    public List<TreeNode> ChildrenNodes { get; set; }

    public TreeNode FindChildrenNodeById(Guid node_Id);
    void RecursivelyFindNode();
} 
```

我想将 TreeNode 对象列表缓存到内存中。

如果我将 FindChildrenNode 方法保留在类中，是否会在缓存时占用更多内存空间？

我应该在 TreeNodeUtilities 类中移动搜索功能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T11:21:46.667

只有字段消耗类的每个实例的内存。方法不行。属性也不消耗每个实例的内存，但它们的支持字段会。

方法会为代码和元数据消耗一些内存，但它很小，并且不会随着您创建的对象数量而扩展，因此在大多数情况下可以忽略不计。

这意味着您不会通过将搜索功能移至单独的类来获得任何收益。

如果您迫切需要内存，更改子列表的存储方式（例如，使用第一个孩子、下一个兄弟系统）甚至将其转换为嵌入在数组中的结构将使您有所收获。但我也不会这样做，除非这显然是一个主要的性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:30:19.137

您不仅应该留`FindChildrenNodeById`在课堂上，而且必须这样做。我假设这`FindChildrenNodeById`将搜索 TreeNode 和所有子节点。您需要一个搜索起点，因此该函数的输入将是 node_Id 和起始节点。在您的情况下，起点是`this`.

不需要另一个类的实用程序。到目前为止，你的做法是正确的。

# php - 在 PHP 中操作 DOCX 文件的最佳方法

> ID：12004802
> 
> 赞同：0
> 
> 时间：2012-08-17T11:20:34.517
> 
> 标签：php, ms-word

我知道有 PHPWord 或 PHPDocx 之类的库，但是 PHPWord 效率低下并且可能会丢失变量，而且 PHPDocx 是一个付费库，所以我不能使用它。word 中是否有某种类型的字段保持不变且易于阅读，我可以将其用于我的 php 脚本中的替换字段？我已经尝试使用 ${TAG1} 之类的标签进行 str_replace 替换，但有时这些字符会被单词标签分隔，因此脚本找不到它们。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:32:38.170

你可以使用[书签](http://wordprocessing.about.com/od/wordquicktips/qt/insertbm.htm)。如果您创建一个名为“title”的书签，则 document.xml 将包含以下标签：

```
<w:bookmarkStart w:id="0" w:name="title"/><w:r><w:t>World</w:t></w:r><w:bookmarkEnd w:id="0"/> 
```

[如何使用 PHP 修改 xml 文件](https://stackoverflow.com/questions/1193528/how-to-modify-xml-file-using-php)

# google-drive-api - 我可以为自己的应用程序利用“创建 - > 从模板”吗？

> ID：12004804
> 
> 赞同：1
> 
> 时间：2012-08-17T11:20:42.363
> 
> 标签：google-drive-api

我的应用程序处理特定于应用程序的 mime 类型。

有没有办法将我的应用程序/文件类型集成到模板库中，以便我可以从我自己的文件类型的模板创建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:50:58.863

目前还没有，但这是一个有趣的想法，所以我已经提交了它，以便团队对其进行审查和优先考虑:)

# postgresql - 如何获得区间的绝对值

> ID：12004806
> 
> 赞同：21
> 
> 时间：2012-08-17T11:20:52.650
> 
> 标签：postgresql

考虑以下语句：

```
select interval '-1 hours' 
```

我不知道如何获得间隔的绝对值，即如果为负则切换或删除符号。我唯一想到的是以下内容：

```
select abs(extract(epoch from interval '-1 hours')) 
```

但我想知道是否有更优雅的方式（一种保留区间类型的方式）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-04-30T01:47:32.170

您可以找到 i 和 -i 之间的最大值。例如：

```
SELECT greatest(-'1 hour'::interval, '1 hour'::interval); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-06-27T19:01:37.990

关于 pgsql-general 邮件列表的讨论：关于为什么PostgreSQL 不提供内置函数[的间隔绝对值。](https://www.postgresql.org/message-id/flat/5ccd53c10910270727m5bf6d4adoa9424f49a397ca5e%40mail.gmail.com#5ccd53c10910270727m5bf6d4adoa9424f49a397ca5e@mail.gmail.com) 简而言之，在考虑区间类型的组件化性质时，在某些情况下应该做什么并没有达成共识。`abs(interval)`

但是任何人都可以创建他们的函数来实现他们自己关于它应该计算什么的想法，例如，基于[LisMorski 的答案](https://stackoverflow.com/a/12005136/238814)中的表达式：

```
CREATE FUNCTION abs(interval) RETURNS interval AS
  $$ select case when ($1<interval '0') then -$1 else $1 end; $$
LANGUAGE sql immutable; 
```

简单的 SQL 函数通常在查询执行期间内联，因此性能应该与在查询中包含表达式相当。

例子：

```
#= select abs(interval '-2 days +3 minutes');
       abs        
------------------
 2 days -00:03:00

# select abs(now()-clock_timestamp());
       abs       
-----------------
 00:00:00.000146 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-17T11:44:52.417

表达式看起来更`CASE`不言自明。例子：

```
SELECT
    i,
    (CASE WHEN (i < INTERVAL '0') THEN (-i) ELSE i END) AS abs_i
FROM
    (VALUES
        (INTERVAL '-2 h'),
        (INTERVAL '2 m')
    ) AS foo (i) 
```

产生：

```
     我 | abs_i
----------+----------
 -02:00:00 | 02:00:00
 00:02:00 | 00:02:00
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T11:46:24.783

它并不比你的更优雅，但它返回一个区间类型

```
select interval '-1 hours'*sign(extract(epoch from interval '-1 hours')) 
```

# javascript - JavaScript 是否考虑本地小数分隔符？

> ID：12004808
> 
> 赞同：8
> 
> 时间：2012-08-17T11:21:05.227
> 
> 标签：javascript, localization

我有一个以用户本地化格式显示小数的网页，如下所示：

*   英语：`7.75`
*   荷兰语：`7,75`

如果我在我的机器上的 JavaScript 中将两个数字变量一起添加（其中数字取自上述格式的字符串），我会得到以下结果：

*   英语：`7.75 + 7.75 = 15.5`
*   荷兰语：`7,75 + 7,75 = 0`

如果我要在荷兰语用户机器上运行此代码，我是否应该期望英语格式的加法返回`0`，而荷兰语格式的加法返回`15,5`？

简而言之：JavaScript 计算是否在其字符串到数字的转换中使用本地小数分隔符？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-02-13T21:22:28.230

下面是一个区域感知号码解析器的示例：

```
function parseLocaleNumber(stringNumber, locale) {
    var thousandSeparator = Intl.NumberFormat(locale).format(11111).replace(/\p{Number}/gu, '');
    var decimalSeparator = Intl.NumberFormat(locale).format(1.1).replace(/\p{Number}/gu, '');

    return parseFloat(stringNumber
        .replace(new RegExp('\\' + thousandSeparator, 'g'), '')
        .replace(new RegExp('\\' + decimalSeparator), '.')
    );
} 
```

它使用传递的区域设置（如果未定义区域设置参数，则使用浏览器的当前区域设置）来替换千位和小数点分隔符。

使用德语语言环境设置

```
var n = parseLocaleNumber('1.000.045,22'); 
```

`n`将等于`1000045.22`。

**更新：**

*   `\p{Number}`通过使用 regex 类删除数字解决了 Pointy 的评论。所以它也适用于非阿拉伯数字。
*   解决了 Orion Adrian 的评论，以支持以每四位数分隔数字的语言。
*   添加了 locale 参数以 sepcify 不同的语言环境进行解析。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-17T11:26:28.780

不，分隔符始终是 javascript 中的点 (.) `Number`。所以`7,75`评估为`75`，因为 a`,`调用从左到右的评估（在控制台中尝试：`x=1,x+=1,alert(x)`，或者更重要的是`var x=(7,75); alert(x);`）。如果你想转换一个荷兰语（嗯，不仅仅是荷兰语，比如说*欧洲大陆*）格式的值，它应该是一个`String`. `String`您可以为原型编写扩展，例如：

```
String.prototype.toFloat = function(){
      return parseFloat(this.replace(/,(\d+)$/,'.$1'));
};
//usage
'7,75'.toFloat()+'7,75'.toFloat(); //=> 15.5 
```

请注意，如果浏览器支持它，您可以使用`Number.toLocaleString`

```
console.log((3.32).toLocaleString("nl-NL"));
console.log((3.32).toLocaleString("en-UK"));
```

```
.as-console-wrapper { top: 0; max-height: 100% !important; }
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-29T22:42:28.353

扩展来自@naitsirch 的解决方案，我们可以使用[Intl.NumberFormat.formatToParts()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat/formatToParts)让 JS 解析组和小数分隔符。

```
function parseLocaleNumber(stringNumber) {
  let num = 123456.789,
    fmt_local = new Intl.NumberFormat(),
    parts_local = fmt_local.formatToParts(num),
    group = '',
    decimal = '';

  parts_local.forEach(function(i) {
    switch (i.type) {
      case 'group':
        group = i.value;
        break;
      case 'decimal':
        decimal = i.value;
        break;
      default:
        break;
    }
  });

  return parseFloat(stringNumber
    .replace(new RegExp('\\' + group, 'g'), '')
    .replace(new RegExp('\\' + decimal), '.')
  );
}

//replace this string with a number formatted for your locale
console.log(parseLocaleNumber("987,654,321.01"));
//output for "en" locale: 987654321.01
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-07T21:52:01.840

扩展@OXiGEN 的解决方案，我们可以使用[Intl.NumberFormat.formatToParts()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat/formatToParts)来提取货币符号:)

```
function parseLocaleNumber(stringNumber, locale, currency_code) {
  let num = 123456.789,
    fmt_local = new Intl.NumberFormat(locale, {
      style: 'currency',
      currency: currency_code
    }),
    parts_local = fmt_local.formatToParts(num),
    group = '',
    decimal = '',
    currency = '';

  // separators
  parts_local.forEach(function(i) {
    //console.log(i.type + ':' + i.value);
    switch (i.type) {
      case 'group':
        group = i.value;
        break;
      case 'decimal':
        decimal = i.value;
        break;
      case 'currency':
        currency = i.value;
        break;
      default:
        break;
    }
  });

  return parseFloat(stringNumber
    .replace(new RegExp('\\' + group, 'g'), '')
    .replace(new RegExp('\\' + decimal), '.')
    .replace(new RegExp('\\' + currency, 'g'), '')
  );
}

//replace inputs with a number formatted for your locale, your locale code, your currency code
console.log(parseLocaleNumber('$987,654,321.01', 'en', 'USD'));
//output for "en" locale and "USD" code: 987654321.01
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-17T11:27:14.637

不，逗号 ( `,`) 是具有特殊含义的运算符，就像点 ( `.`) 一样。否则事情很简单：

```
var array1 = [1,2];
var array2 = [1.2]; 
```

会在不同的语言环境下中断。我所知道的所有主流语言都分别且严格地对待`.`和对待，`,`与语言环境无关。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T11:54:23.930

不，小数点分隔符在 JavaScript 中根本没有本地化，并且 parseFloat() 解析数字的格式与您需要在 JavaScript 源代码中使用的格式相同：“.” 作为小数分隔符，没有组（千）分隔符，“E”或“e”作为“十次幂”符号，Ascii 连字符“-”作为减号。

要以本地化格式读取或写入数字，您需要其他东西。我会推荐 Globalize.js 库，除非您可以将自己限制在小数点分隔符的单一问题和有限数量的语言中——在这种情况下，只进行映射“.”的字符串操作可能更简单。到“，”在输出上，反之亦然在输入上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-27T23:44:42.537

考虑到符号，这适用于所有情况：

```
parseLocaleNumber: function ( stringNumber ) 
{
    let thousandSeparator = (11111).toLocaleString().replace(/1/g, '');
    let decimalSeparator = (1.1).toLocaleString().replace(/1/g, '');
    let symbol = (0).toLocaleString()
        .replace(/0/g, '')
        .replace(new RegExp('\\' + decimalSeparator), '.')
        .trim();

    return parseFloat(
        stringNumber
            .replace(new RegExp('\\' + thousandSeparator, 'g'), '')
            .replace(new RegExp('\\' + decimalSeparator), '.')
            .replace(new RegExp( symbol ), '')
    );
} 
```

2个细节突出：

1.  使用 11111 而不是 1111 因为第一个总是默认显示千位分隔符。
2.  数字格式始终使用“.” 作为小数分隔符

# c# - MasterPage中的FindControl，第一次点击生成空字符串

> ID：12004810
> 
> 赞同：0
> 
> 时间：2012-08-17T11:21:15.823
> 
> 标签：c#, asp.net

我的网站使用母版页，我在其中放置了两个控件，一个 TextBox 和一个 ImageButton，它们旨在在所有内容站点上查看和访问。**这是Site.Master**中的 aspx 代码：

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:ImageButton ID="ImageBtn" runat="server" ImageUrl="~/Image.png"
  PostBackUrl="~/Result.aspx"></asp:ImageButton> 
```

单击该按钮应将访问者重定向到 Result.aspx，它确实如此。

**Result.aspx.cs**在 Page_Load 事件中有以下内容：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        TextBox txbx = this.Master.FindControl("TextBox1") as TextBox;
        if (txbx != null)
        {
            Label1.Text = "Value: " + txbx.Text;
        }
        else
        {
            Label1.Text = "TextBox seems to be null";
        }
    } 
```

第一次单击图像按钮时会出现奇怪的行为。访问者从页面“值：”（即空字符串“”）获取此信息，即使在 TextBox1 中输入了值。随后的点击会正确显示值，例如“Value: SomeText”。

为什么价值不是第一次“出现”？

有没有更好的方法来确保这一点？

*   访问者被重定向到 Result.aspx AND
*   该值是“注册的”并且可以在 Result.aspx.cs 和
*   如果在不使用图像按钮 PostBackURL 的情况下输入 Result.aspx，用户将被重定向

我已经尝试过 IsPostBack 但在使用母版页作为上一页时它的行为似乎很奇怪......

非常感谢您的回答！

真挚地，

凯先生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:57:15.730

如果您`PostBackURL`在母版页上的 ImageButton 上使用并且来自另一个页面，则必须使用：

`PreviousPage.Master.FindControl("TextBox1") as TextBox;`

如果您在`PostBackURL`页面上并单击 ImageButton，则需要使用

`Master.FinControl("TextBox1") as TextBox;`

（在这种情况下，PreviousPage 将为空）

你可以使用这样的东西：

```
var txbx = PreviousPage == null ?
    Master.FindControl("TextBox1") as TextBox :
    PreviousPage.Master.FindControl("TextBox1") as TextBox; 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage(v=vs.100).aspx) (v=vs.100).aspx 在备注部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:30:26.747

既然你知道你的表单是从主人那里派生的......你有没有尝试过显式类型转换来解决它？？？如

文本框 txbx = ((site.Master)this).Textbox1;

然后从那里做任何你想做的事情......自从我进入 asp.net 已经有一段时间了，但记得在我的一个旧应用程序中做类似的事情。

# parsing - Octave的解析器代码？

> ID：12004812
> 
> 赞同：0
> 
> 时间：2012-08-17T11:21:28.873
> 
> 标签：parsing, open-source, octave

我想研究 Octave 的解析器代码。我已经克隆了 Octave 的中央存储库，并且只知道实际的解析器代码在哪里。虽然我只是迷失了从哪里开始？我在哪里可以获得 Octave 的 parer 代码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T02:21:22.453

在开发分支中，您要查找的文件是`/libinterp/parse-tree/oct-parse.yy`. 请注意，此分支中的源代码树已更改，因此如果您在稳定分支上工作，源代码树将位于不同的位置。但是，如果您打算做出贡献，那么无论如何您都应该在开发分支上工作。

# html - 使用边框半径时，文本对齐不会居中和居中

> ID：12004816
> 
> 赞同：3
> 
> 时间：2012-08-17T11:21:47.697
> 
> 标签：html, css

我需要对齐号码。1到红色圆圈的中心，但它不起作用

```
#box {
    background: red;
    border-radius: 50% 50% 50% 50%;
    color: #FFFFFF;

    height: 50px;
    text-align: center;
    width: 50px;
} 
```

[http://jsfiddle.net/kFaXp/8/](http://jsfiddle.net/kFaXp/8/)

我怎样才能让 1 在这个框的中间居中。​</p>

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T11:25:16.080

文本对齐中心仅水平居中。你可以试试这个

```
#box {
    background: red;
    border-radius: 50% 50% 50% 50%;
    color: #FFFFFF;

    height: 50px;
    text-align: center;
    width: 50px;
    vertical-align:middle;
    display:table-cell

}​ 
```

[http://jsfiddle.net/kFaXp/14/](http://jsfiddle.net/kFaXp/14/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T11:22:59.133

添加`line-height: 50px;`到元素的 CSS 中。

```
#box {
    background: red;
    border-radius: 50% 50% 50% 50%;
    color: #FFFFFF; 
    height: 50px;
    text-align: center;
    width: 50px;
    line-height: 50px;
}​ 
```

[http://jsfiddle.net/Kyle_Sevenoaks/kFaXp/9/](http://jsfiddle.net/Kyle_Sevenoaks/kFaXp/9/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T11:26:30.633

你可以通过定义来达到你想要的结果`line-height: 50px;`

[http://tinkerbin.com/I2slDWGY](http://tinkerbin.com/I2slDWGY)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:24:04.203

通过添加 line-height 和 vertical-align 属性

```
#box {
 background: red;
 border-radius: 50% 50% 50% 50%;
 color: #FFFFFF;

 height: 50px;
 text-align: center;
 width: 50px;
 line-height: 50px;
 vertical-align:middle;
} ​ 
```

[http://jsfiddle.net/kFaXp/13/](http://jsfiddle.net/kFaXp/13/)

# bash - 连接字符串和变量的干净方式？

> ID：12004820
> 
> 赞同：1
> 
> 时间：2012-08-17T11:22:03.033
> 
> 标签：bash

这看起来很脏：

```
echo "GIT_WORK_TREE=/var/www/""$1"" git checkout -f" >> hooks/post-receive 
```

有没有更干净的方法来进行这种连接？参数在哪里`$1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:24:36.157

目前尚不清楚您想要完成什么，但这可能对您有用：

```
echo "GIT_WORK_TREE=/var/www/${1} git checkout -f" >> hooks/post-receive 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:24:54.083

```
echo "GIT_WORK_TREE=/var/www/$1 git checkout -f" >> hooks/post-receive 
```

也将工作。您也可以使用花括号将变量与其他文本分开，如下所示：

```
echo "tetxtetxetext${VAR}textetxtetext" 
```

# java - 如何检索字符串的特定部分

> ID：12004821
> 
> 赞同：2
> 
> 时间：2012-08-17T11:22:13.147
> 
> 标签：java, regex, string

我有一个目录列表作为字符串，我想检索字符串的特定部分，唯一的是因为这是一个目录，它可以改变长度

我想从字符串中检索文件名

```
"C:\projects\Compiler\Compiler\src\JUnit\ExampleTest.java"
"C:\projects\ExampleTest.java" 
```

因此，在这两种情况下，我只想检索`ExampleTest`（文件名也可以更改，因此我需要获取第一个之前`.`和最后一个之后的文本`\`）。有没有办法使用正则表达式或类似的东西来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T11:24:37.550

为什么不使用 Apache Commons [FileNameUtils](https://commons.apache.org/io/apidocs/org/apache/commons/io/FilenameUtils.html)而不是编写自己的正则表达式？从文档：

> 此类在文件名中定义了六个组件（例如 C:\dev\project\file.txt）：
> 
> ```
> the prefix - C:\
> the path - dev\project\
> the full path - C:\dev\project\
> the name - file.txt
> the base name - file
> the extension - txt 
> ```

你用这个好多了。它直接面向文件名、目录等，并且鉴于它是一个常用的、定义明确的组件，它将经过广泛的测试并消除边缘情况等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T11:28:37.217

```
new File(thePath).getName() 
```

或者

```
int pos = thePath.lastIndexOf("\\");
return pos >= 0? thePath.substring(pos+1): thePath; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:42:31.657

**Java 代码**

```
String test = "C:\\projects\\Compiler\\Compiler\\src\\JUnit\\ExampleTest.java";
String arr[] = test.split("\\Q"+"\\");
System.out.println(arr[arr.length-1].split("\\.")[0]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T11:29:16.897

```
File file = new File("C:\\projects\\ExampleTest.java");
System.out.println(file.getAbsoluteFile().getName()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T11:38:47.740

这是正则表达式，`c#`它也可以在`java` **:P**中使用。感谢 .`Perl`它在 Group[1] 中匹配

```
^.*\\(.*?)\..*?$ 
```

# hex - 以下键的标准叫什么？

> ID：12004822
> 
> 赞同：2
> 
> 时间：2012-08-17T11:22:14.823
> 
> 标签：hex, key, guid, userid

好吧，我问的原因是我正在分析一个软件，他们使用了某种类型的密钥。我知道我以前见过这样的钥匙，所以必须有一个标准。

它看起来像这样：ED19769F-D53C-49BB-B23F-CB67DF1A69B

我知道这是一个简单的问题，但是很难为这个问题制定一个谷歌搜索字符串，关键是完全唯一的并没有帮助。

问：标准叫什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:23:44.363

在我看来，这就像一个[全球唯一标识符或*GUID*](http://en.wikipedia.org/wiki/Guid)，它*意味着完全唯一*。当自动递增数字不合适时，它们有时用作数据库表主键。它们还用作 Windows 注册表等位置的标识符和硬件设备 ID。

# php - cURL：Curl 可用但无法访问 Facebook！(0 - ) - 使用 Facebook Connect 时

> ID：12004826
> 
> 赞同：0
> 
> 时间：2012-08-17T11:22:45.357
> 
> 标签：php, mysql, curl

我在我的域上运行 wordpress 网站。我在服务器端遇到 cURL 问题。

基本上我已经尝试在我的网站上安装多个插件（一些全新安装），但它们都会导致相同的 cURL 错误

“cURL：Curl 可用但无法访问 Facebook！(0 - )”

我四处询问，有人说这是服务器端的问题。

如果有人有任何知识或经验，为什么会发生这种情况会很高兴知道。

我正在使用的插件示例（我也尝试过其他插件）

[http://wordpress.org/extend/plugins/wp-fb-autoconnect/](http://wordpress.org/extend/plugins/wp-fb-autoconnect/)

[http://wordpress.org/extend/plugins/simple-facebook-connect/](http://wordpress.org/extend/plugins/simple-facebook-connect/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:42:41.990

您的托管服务提供商可能激活了 IP 过滤器。

您只能向您在 cPanel 中指定的域/IP 发出传出连接。

您可以在 cPanel 中指定域/IP，或者要求托管服务提供商停用过滤器。

# blackberry - 点击外部网页链接打不开 - BB App开发

> ID：12004835
> 
> 赞同：0
> 
> 时间：2012-08-17T11:23:12.190
> 
> 标签：blackberry

我正在开发我的第一个黑莓应用程序，我有 strings.xml，其中保存了我可能需要在某些屏幕上显示的所有 HTML 内容。我可以成功显示 html 内容，但是当您单击 Web 链接时没有任何反应。

例如，我在 strings.xml 中有以下内容

```
<![CDATA[<a href="http://www.hazcheck.com" style="color:blue;">Hazcheck systems</a>]]> 
```

当我将上面的字符串加载到屏幕中时，我看到了预期的链接，但是当我单击它时没有任何反应。

我试图删除 CDATA 标签，但是没有帮助。有任何想法吗？

# c# - 如何在 Windows 8 应用程序中根据另一个设置控件的位置？

> ID：12004838
> 
> 赞同：0
> 
> 时间：2012-08-17T11:23:35.830
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我有一个这样的页面：

```
<Grid>
   <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
       here are contents
       they are forever absolutely in the center of the screen
       no matter of the resolution/size
   </StackPanel>
</Grid> 
```

一切正常。但现在我想在左上角添加一个后退按钮。 ![例子](../Images/ade1fc13c0cae1cf54c69d48ef20afe5.png)

而且我不想像这样将网格分成 2 列和 2 行： ![在此处输入图像描述](../Images/28c0389516d15a6a9faf059652bb5dd7.png)

内容不再绝对居中，甚至我们可以按百分比分割网格，因为内容有时很宽有时很窄。

我想知道如何保持内容水平/垂直对齐“中心”，然后设置后退按钮相对于内容的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:08:15.947

我建议使用具有 3 列的网格布局，以确保内容居中，列宽设置为 *、Auto、*。这将确保主要内容始终居中，而不关心按钮的大小。然后，您可以根据需要使用边距设置分隔。这是我在 SL、WPF 和 Metro 中使用的技术。

```
<Grid>
    <Grid.ColumnDefinitions>
         <ColumnDefinition/>
         <ColumnDefinition Width="Auto"/>
         <ColumnDefinition/>
    </Grid.ColumnDefinitions>

    <Button HorizontalAlignment="Right" VerticalAlignment="Top" Content="Do Something"/>
    <ContentControl VerticalAlignment="Top" Content="My custom content"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:35:50.667

*有点hacky的答案*

您可以通过将堆栈面板定位在中心来实现，然后在按钮的宽度上设置一个负的左边距，以将所有内容向左移动所需的数量......

```
<Grid>
    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="-45,0,0,0">
        <button with width and padding totalling 45px />
        here are contents
        they are forever absolutely in the center of the screen
        no matter of the resolution/size
    </StackPanel>
</Grid> 
```

# image - 在 Qt 中显示 Char* 缓冲区（位图）

> ID：12004840
> 
> 赞同：0
> 
> 时间：2012-08-17T11:23:37.973
> 
> 标签：image, qt, sockets, char

我从套接字接收 BItmap 图像，所以它是 char* 我可以将它写入文件但如何直接从缓冲区显示它

```
ui->label->setPixmap(????) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:00:59.567

```
QByteArray byte=QByteArray::fromRawData(buf, sizeofimagebuffer );
    QPixmap  image;
    if(image.loadFromData(byte,"BMP"))
    {
        ui->label->setPixmap(image);
        ui->label->update();
    } 
```

这行得通 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:32:04.943

您可以从该数据构造 QImage，然后从中创建 QPixmap。例如：

```
int dataSize = 1024;
uchar data[dataSize];
QImage image = QImage::fromData(data, dataSize, "PNG");
QPixmap pixmap = QPixmap::fromImage(image); 
```

# android - 从 SQLite 到 ListView 的 getBitmap

> ID：12004846
> 
> 赞同：0
> 
> 时间：2012-08-17T11:23:50.650
> 
> 标签：android, sqlite, listview, bitmap

我正在尝试显示`Contact`来自 android 应用程序的个人资料图片，`SQLite`但它不起作用，并且在`image.setImageBitmap(bitmap)`出现时崩溃`.NullPointerException`，我不知道为什么。

如果有人可以帮助我，请。这是我的代码：

```
public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);

    DatabaseHandler helper = new DatabaseHandler(this);
    database = helper.getWritableDatabase();
    Cursor data = database.query("amigos", fields, null, null, null, null, null);
    data.moveToFirst();
    dataSource = new SimpleCursorAdapter(this, R.layout.row_def, data, fields, new int[] {R.id.Nombre_Amigo, R.id.profile_picture});

    Log.d("ListarContactos","Oncreate....data: "+data.toString());

        while (!data.isAfterLast()){    
            byte[] bb = data.getBlob(data.getColumnIndex(DatabaseHandler.KEY_PIC_SQ));
            Log.d("ListarContactos","Oncreate....bb: "+bb.toString());
            ByteArrayInputStream inputStream = new ByteArrayInputStream(bb);
            Log.d("ListarContactos","Oncreate....inputStream: "+inputStream.toString());
            Bitmap bitmap = BitmapFactory.decodeByteArray(bb, 0, bb.length);
            Log.d("ListarContactos","Oncreate....Bitmap: "+bitmap.toString());
            ImageView image = (ImageView) findViewById(R.id.profile_picture);
            image.setImageBitmap(bitmap);
            Log.d("ListarContactos","Oncreate....image: "+image.toString());
        }

    Log.d("ListarContactos","Oncreate....datasource: "+dataSource.toString());      
    setListAdapter(dataSource);
    Log.d("ListarContactos","Oncreate....despres del ListAdapter");     
    helper.close();
    ListView view = getListView();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:42:02.723

它抛出`nullPointerException`是因为方法 `BitmapFactory.decodeByteArray(bb, 0, bb.length)`返回`NULL`位图。

# django - django-south 迁移命令

> ID：12004848
> 
> 赞同：10
> 
> 时间：2012-08-17T11:24:03.320
> 
> 标签：django, django-south, database-migration

每个应用程序向南运行迁移，而不是按照创建的迁移顺序。这可能会导致迁移之间的依赖关系出现一些问题。有时需要在迁移类中添加**depends_on属性。**

是否可以按照创建顺序进行南迁？还有，有人知道南方为什么这样做吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-17T11:45:55.183

South 不知道您在多个应用程序之间创建迁移的顺序。它可以查看文件系统元数据，但这会在通过包管理器安装的第三方应用程序或部署应用程序时严重中断。

`depends_on`和属性正是为这个用例制作的`needed_by`，所以使用它们。另请参阅[http://south.readthedocs.io/en/latest/dependencies.html](http://south.readthedocs.io/en/latest/dependencies.html)。

# android - View的背景在Android中消失

> ID：12004852
> 
> 赞同：0
> 
> 时间：2012-08-17T11:24:12.957
> 
> 标签：android, listview, background, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

有时，当 Activity 启动时，视图的背景（例如 ListView）不可见（但有时一切正常）。如果它是可绘制的或颜色并不重要，它并不总是发生。您可以启动相同的活动 10 次，问题只会发生一次或两次。

问题发生在 ICS (4.0) 或更高版本的设备上，在旧版本的 android 上一切正常。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:08:37.147

在设置背景和适配器后，在您的 OnCreate 方法上尝试此操作。

```
 getListView().setCacheColorHint(0); 
```

# android - Google Map android上的自定义叠加层

> ID：12004864
> 
> 赞同：1
> 
> 时间：2012-08-17T11:24:43.380
> 
> 标签：android, google-maps, map

我希望能够使用 Google Maps API 在地图上绘制 - 比如说，当用户点击“美国”时 - 美国应该用红色标记，所有其他国家 - 变成灰色等。

我该怎么做呢？有任何想法吗？还是我应该使用不同于谷歌地图的东西？

塔尼亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T11:27:25.163

您可以从 Open street map 获取国家/地区的坐标，存储它们，然后在股票谷歌地图上绘制多边形。

# silverlight - HtmlPage.Document.QueryString 参数值不同于 DocumentUri.OriginalString 值

> ID：12004866
> 
> 赞同：0
> 
> 时间：2012-08-17T11:24:50.460
> 
> 标签：silverlight, silverlight-5.0

我对请求参数值有一个奇怪的问题。Silverlight 应用程序在 aspx 页面内打开。当我的 queryString 包含等号时出现问题。我检查了 silverlight 应用程序中的值，发现来自 uri 的值与作为 queryString 参数检索的值不同：

HtmlPage.Document.DocumentUri.OriginalString：

```
"http://localhost:8081/SilverlightContainer.aspx?sys_ObjectId=2&sys_Param1={\"p1\":\"Narud\\u017Ebenica =\"}" 
```

HtmlPage.Document.QueryString["sys_Param1"]:

```
"{\"p1\":\"Narud\\u017Ebenica " 
```

如果`sys_Param1`不包含等号，一切都按预期工作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:42:03.630

我通过删除 url 的有问题的部分并从 silverlight 读取 javascript 变量而不是在查询字符串中传递它来解决这个问题。另一种方法是使用 javascript encodeURIComponent 但我决定使用变量方法。

我仍然不知道是什么导致了这个问题，因为我的网址看起来正确。

# android - 删除或添加时的Android gridview动画（排序）列表

> ID：12004867
> 
> 赞同：4
> 
> 时间：2012-08-17T11:24:51.823
> 
> 标签：android, animation, gridview

当我从网格视图中删除一个项目时，它会淡出（因为我开始动画）并且所有其他项目“立即”改变它们的位置。

有没有一种简单的方法来为所有其他项目设置动画以移动，所以空白点被很好地填充动画，而不是“一次”？

我想为添加新项目做同样的事情：所有现有项目将动画移动，并在新项目出现的网格开始处空出一个位置。我当然可以通过为每个项目本身设置动画来做到这一点，为行尾的项目做一些不同的事情等等。但我认为已经为此做好了准备？

我检查了[http://developer.android.com/reference/android/view/animation/GridLayoutAnimationController.html](http://developer.android.com/reference/android/view/animation/GridLayoutAnimationController.html)

但这似乎只对显示网格有用，而不是当它已经在视图中时。

另外，如果您知道实现此功能的开源程序，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:14:32.720

这对我帮助很大，你至少可以在这个项目中使用动画，但也许整件事都适合你：

[https://github.com/mrKlar/PagedDragDropGrid](https://github.com/mrKlar/PagedDragDropGrid)

youtube 上的示例：http: [//www.youtube.com/watch?v=FYTSRfthSuQ](http://www.youtube.com/watch?v=FYTSRfthSuQ)

它看起来像一个 gridview 但不是一个 gridview 对象。我使用了一些代码来更改我自己的（android）gridview，但这是大量的工作。如果可以，请使用整个项目。

# c# - 单元测试具有接口类型参数的方法

> ID：12004869
> 
> 赞同：3
> 
> 时间：2012-08-17T11:24:53.913
> 
> 标签：c#, unit-testing, c#-4.0, nunit

我有以下代码：

```
public BooksInfo GetBookInfo(IBookMarket bookinfo)
{
    // Implementation omitted
} 
```

我只能发布方法签名。现在我需要传递一个空值作为`bookinfo`并测试是否引发异常。

有人可以简要解释一下如何使用 NUnit 进行此单元测试吗？

**编辑问题：**

***我的单元测试代码***

```
[TestFixture]

public class FutureTests
{
    //[Test]
    //[ExpectedException(typeof(NullReferenceException),
    // ExpectedMessage = "No value provided!")]
    public void GetPriceData_PassNull_ThrowsException()
    {
        Assert.That(
                () => library.GetPriceData(null),
                Throws.InstanceOf<ArgumentNullException>()
                .With.Property("").EqualTo("pricer"));

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:41:27.033

[nunit](/questions/tagged/nunit "显示标记为“nunit”的问题")提供了几种可能性：

## 老式

2.X 之前的实现

```
[TestFixture]
public class TestGetBookInfo
{
    [Test]
    [ExpectedException(
        ExpectedException = typeof(YourException),
        ExpectedMessage = "Your detailed message",
        MatchType = MessageMatch.Contains)]
    public void TestGetBookInfoException()
    {
        new BookInfoProvider().GetBookInfo(null);
    }
} 
```

## 新风格

当前流畅的实现

```
[TestFixture]
public class TestGetBookInfo
{
    [Test]
    public void TestGetBookInfo()
    {
        Assert.That(
            () => new BookInfoProvider().GetBookInfo(null),
                Throws.InstanceOf<YourException>()
                    .And.Message.Contains("Your detailed message"));
    }
} 
```

## 数据驱动

数据驱动的实现，您可以在其中组合案例

```
[TestFixture]
public class TestGetBookInfo
{
    object[] TestData =
    {
        new TestCaseData(new BookMarketStub()), // "good" case
        new TestCaseData(null).Throws(typeof(YourException)) // "bad" exceptional case
    };

    [Test]
    [TestCaseSource("TestData")]
    public void TestGetBookInfo(IBookMarket bookinfo)
    {
        new BookInfoProvider().GetBookInfo(bookinfo);
        Assert.Pass("all ok"); // this is not necessary
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T11:36:40.277

使用 NUnit 我会选择：

```
Assert.That(
    () => library.GetBookInfo(null),
    Throws.InstanceOf<ArgumentNullException>()); 
```

此代码假定它`library`是定义您的`GetBookInfo`方法的类型的实例。**此外，这种方法与替代方法相比具有相当大的优势，`ExpectedException`因为它断言实际上是被测代码引发了异常，而不是测试本身**。

它验证该方法是否抛出一个，`ArgumentNullException`因为这是在您验证所需参数并且它是空引用时抛出的正确异常。`NullReferenceException`不应由用户代码以编程方式抛出。

在这种情况下，方法只有一个参数，这可以省略，但是如果您想进一步改进您的测试，您可以通过执行以下操作断言异常与相关参数相关联：

```
Assert.That(
    () => library.GetBookInfo(null),
    Throws.InstanceOf<ArgumentNullException>()
        .With.Property("ParamName").EqualTo("bookinfo")); 
```

有了这个额外的断言，您的测试可以保证代码是这样实现的（应该如此）：

```
public BooksInfo GetBookInfo(IBookMarket bookinfo)
{
    if (bookinfo == null) throw new ArgumentNullException("bookinfo");

    // Implementation omitted
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:31:30.267

尝试：

```
[Test]
public void myTest
{
    try
    {
       // Hier you call your methode GetBookInfo(null)
       Assert.True(false);
    }
    Catch (NullReferenceException e)
    {
        Assert.True(true);
    }    
} 
```

或者，您可以为您的测试设置一个 ExpectedException 属性，例如：

```
[Test ExpectedException( typeof( NullReferenceException) )]
public void myTest
{
    //Just Call the Methode which should throw an exception
} 
```

# activemq - 使用 IBM 客户端连接到 ActiveMQ 代理

> ID：12004870
> 
> 赞同：4
> 
> 时间：2012-08-17T11:24:56.313
> 
> 标签：activemq, ibm-mq

在我的测试中，我运行 inmem ActiveMQ，然后实例化 ActiveMQConnectionFactory 并做任何我想做的事情来测试它。我使用它是因为这似乎是创建集成测试的最简单方法。我认为从 ActiveMQConnectionFactory 切换到 com.ibm.mq.jms.MQTopicConnectionFactory 会很简单。但显然不是。这个片段的映射是什么

```
<bean id="activeMqConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <constructor-arg value="vm://localhost:61616"/>
</bean> 
```

到那个：

```
<bean id="ibmConnectionFactory" class="com.ibm.mq.jms.MQTopicConnectionFactory">
    <property name="hostName" value="??"/>
    <property name="port" value="??"/>
    <property name="queueManager" value="??"/>
    <property name="channel" value="??"/>
    <property name="transportType" value="?"/>
</bean> 
```

如果没有骆驼拥有的某种奇怪的桥梁，这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:56:21.133

这是不可能的。JMS 规范涵盖了 API 和行为，但供应商可以自由实现他们希望的任何有线格式和通信协议。WebSphere MQ 使用它自己的格式和协议，而 Active MQ 有它自己的格式和协议。

桥接应用程序的功能是从一个传输将消息读入内存，然后将该消息写入另一个传输。尽管这在基本级别上有效，但两种传输具有不同的目标名称空间和安全领域，因此这些接口往往是硬编码的点对点路由。在混合 JMS 传输提供程序时，这通常是您可以期待的最佳状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T09:20:45.840

您无法使用 Camel 或 ActiveMQ JMS 桥接器来执行此操作，因为如果您使用 IBM jms 类（例如 com.ibm.mq.jms.MQTopicConnectionFactory ），则需要一个 WebSphere MQ 代理来连接

但是，我已经完全完成了您在一个项目中尝试做的事情。核心思想不是使用供应商特定的类，而是使用代码中的 JMS 接口。然后您可以将配置存储在 JNDI 中（一个用于集成测试，一个用于生产/验收测试）。

如果您不想使用 JNDI，您也许可以为每个场景使用不同的 spring 上下文（这是我的方法）。

我们举一个简单的例子：

您有两个单独的 applicationContext.xml 文件（一个嵌入式测试和一个生产）

内部测试：

```
<beans>
  <import resource="jmsTest.xml"/>
  <import resource="mainApplication.xml"/>
</beans> 
```

产品：

```
<beans>
  <import resource="jmsProd.xml"/>
  <import resource="mainApplication.xml"/>
</beans> 
```

然后创建您的 jms 上下文：

jmsTest.xml：

```
<bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <constructor-arg value="vm://localhost:61616"/>
</bean> 
```

jmsProd.xml

```
<bean id="connectionFactory" class="com.ibm.mq.jms.MQConnectionFactory">
  <property name="hostName" value=".."/>
   ... 
</bean> 
```

mainApplication.xml（jms 监听器等），相同

```
<bean id="myJmsHandlingClass" class="some.custom.Class"/>
  <property name="connectionFactory" ref="connectionFactory"/>
</bean> 
```

然后只需确保遵循 JMS 规范并且不执行特定于供应商的操作，因为 WMQ 和 AMQ 都具有对 jms 标准的扩展，可能很容易使用。

如果您正在处理主题，一个棘手的部分是 AMQ 和 WMQ 默认使用不同的主题分隔符。

在 WMQ 中：根/子主题/#

在 AMQ 中：root.subtopic.*

所以你可能也想通过 spring 注入目的地，它类似于上面的连接工厂。

# php - 将 OpenCV 与 php 连接

> ID：12004873
> 
> 赞同：0
> 
> 时间：2012-08-17T11:25:04.740
> 
> 标签：php, opencv, interface, exec

我还有一个使用 cpp 和 c 中的 opencv 库开发的可执行文件。我想使用 php 脚本从托管在本地主机上的网站执行它。我面临的问题是，可执行代码在从终端调用时会打开一个窗口（一种 gui，使用 namedWindow 打开），但在从嵌入式 php 脚本调用时不会这样做。对于执行，我尝试了 exec, system 但所有这些都失败了。

更清楚：可执行文件的名称-> my_cv_gui，phpscript（页面）的名称->abcd.php

```
@terminal if i type "./my_cv_gui" ... window opens.

@ terminal, if itype "php abcd.php" window opens

abcd.php is part of my website. In web browser if i open "http://...../abcd.php", window DOESNOT open. Although other things in the executable work perfectly. 
```

我的系统配置

操作系统：ubuntu 12.04 x64

XAMPP for Linux 1.7.7

阿帕奇 2.2.21

PHP 5.3.8

Opencv 2.4.1

有什么解决办法？？

php代码如下

```
<?php 

$output=shell_exec("gst-launch v4l2src device=/dev/video0 ! 'video/x-     raw-yuv,width=640,height=480,framerate=30/1' ! ffenc_flv ! flvmux streamable=true ! queue ! filesink location=/home/dev/my.avi > /dev/null &");

var_dump($output); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:21:59.510

当你使用 apache 时，你应该永远记住两件事。

1.  文件/文件夹权限。使用哪个 apache 正在运行。
2.  应将 MIME 类型添加到 apache 以运行任何类型的多媒体组件。就像这里是flv。然后尝试运行 php 代码并尝试修复它。如果这对我有用，我会检查我的服务器。会更新你。

比斯瓦迪普。

# ajax - 挂毯区域更新，请求中包含 post 字段

> ID：12004875
> 
> 赞同：3
> 
> 时间：2012-08-17T11:25:13.287
> 
> 标签：ajax, prototypejs, tapestry

有没有办法通过服务器请求中`ZoneManager`的字段来更新挂毯区域？`POST`

这工作正常...

```
var zoneManager = Tapestry.findZoneManager($('textarea'));
var listenerURIWithValue = this.listenerURI;
listenerURIWithValue = this.addRequestParameter('param', $('textarea').value,     listenerURIWithValue);
zoneManager.updateFromURL(listenerURIWithValue); 
```

但是如果我在 textarea 中有太长的字符串怎么办？我需要发送`$('textarea').value`作为一个`POST`，而不是`GET`。

有人有想法吗？感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:49:52.733

我在 Tapestry-prototypejs 源代码中列出，最后我找到了解决方案。函数 updateFromUrl 有另一个参数。

```
zoneManager.updateFromURL(listenerURIWithValue, 
        {
            "method": "post",
            "parameter": $('textarea').value
        }); 
```

# html - HTML 5 颜色输入：定义自定义颜色

> ID：12004877
> 
> 赞同：2
> 
> 时间：2012-08-17T11:25:21.590
> 
> 标签：html

我知道颜色输入目前仅适用于 Opera 和 Chrome，但如果我可以定义一个自定义颜色集，它至少会在我关闭浏览器时保存，或者最好由网站本身定义，它仍然可以节省大量时间。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T11:37:32.760

是的，这可以使用该`list`属性。

例子：

```
<input type=color list=colors>
<datalist id=colors>
<option value=#ff0000>
<option value=#ffff00>
</datalist> 
```

我无法在 chrome 中对其进行测试，但至少在 opera 中，下拉菜单仅显示红色和黄色——正如`datalist`元素中所指定的那样。

# ios - 选择注释时如何将视图设置为仅垂直居中

> ID：12004878
> 
> 赞同：1
> 
> 时间：2012-08-17T11:25:29.753
> 
> 标签：ios, annotations, mkmapview, center

现在，当我选择注释时，我将视图重新定位到中心，如下所示：

```
[mapView setCenterCoordinate:view.annotation.coordinate animated:YES]; 
```

但是如何重新定位我的视图以仅垂直居中而不是水平居中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T20:35:27.123

创建一个新坐标，该坐标具有注释中的纬度和当前经度

```
CLLocationCoordinate2D newCenter = CLLocationCoordinate2DMake(view.annotation.coordinate.latitude, mapView.centerCoordinate.longitude); 
```

像以前一样设置它

```
[mapView setCenterCoordinate:newCenter animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:28:21.713

保留地图视图的 Y 但将 X 居中应该是这样的：

```
[mapView setCenterCoordinate:[self convertPoint:CGPointMake(view.annotation.coordinate.x /* or whatever x is in the coordinate sys*/, mapView.frame.origin.y) toCoordinateFromView:mapView] animated:YES]; 
```

将点转换为 CLLocationCoordinate2D：

```
- (CLLocationCoordinate2D)convertPoint:(CGPoint)point toCoordinateFromView:(UIView *)view 
```

这应该对您的问题有所帮助。祝你好运。

# sharepoint - 每当将人工制品上传到 TFS-Sharepoint 时，是否可以更新 TFS 任务

> ID：12004879
> 
> 赞同：0
> 
> 时间：2012-08-17T11:25:38.870
> 
> 标签：sharepoint, tfs

我们使用与 Sharepoint 集成的 TFS 来存储人工制品。示例：最终用户文档。

工件是使用 Visual Studio 2010 上传的，而不是从 Web 界面上传的。

对于每个工件准备工作，都会在 TFS 中创建一个任务。

示例：文档准备

要求是每当在 sharepoint 文件夹中上传或修改文档时，是否可以提醒用户？

示例：他/她需要哪个 TFS 任务来更新已完成的小时数

文件夹结构：

类似于以下问题的第二个答案中显示的那个

[以不同方式在 TFS 中共享项目文档，您的最佳实践是什么？](https://stackoverflow.com/questions/10845460/share-project-documents-in-tfs-different-ways-what-are-your-best-practices)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:03:46.737

默认情况下它不存在，但可以使用 sharepoint 中的 ListItemEventHandler (http://msdn.microsoft.com/en-us/library/ms437502.aspx) 或从 sharepoint 内激活并创建的自定义批准工作流自行构建TFS 中的工作项使用对象模型 (http://msdn.microsoft.com/en-us/library/bb130322.aspx)。

> 要求是每当在 sharepoint 文件夹中上传或修改文档时，是否可以提醒用户？

仅实现此要求的一种更简单的方法可能是在文档列表上放置一个共享点警报，以便在创建项目时收到一封电子邮件。

# snmp - 使用 snmpget/snmpwalk 无法查看 MIB 中的所有元素

> ID：12004882
> 
> 赞同：0
> 
> 时间：2012-08-17T11:25:43.147
> 
> 标签：snmp, net-snmp, mib

我在 Windows 上使用 NET-SNMP (V5.6.1.1) 通过 snmpget 和 snmpwalk 读取我的 MIB。当我尝试访问 MIB 时，我只能看到一些元素。我知道 MIB 很好，因为我的同事可以从存储库中提取相同版本的 MIB，并且可以查看 MIB 中的所有元素。我们使用相同的 SNMP 命令语法来查询数据。我比较了他的机器和我的机器的 MIB 和 snmp.conf 文件，它们是相同的，所以只能假设这是由于我们各自 PC 的配置不同。我还检查了我们机器之间环境变量的任何差异，但看不到任何明显的东西。机器配置中是否有任何内容可以解释为什么我只能看到部分 MIB？

**编辑：** MIB 被实现为单个定制的可执行文件，数据保存在多个表中，例如：

```
mibTableA.parameter1
mibTableA.parameter2
mibTableA.parameter3 
```

* * *

```
mibTableB.parameter4
mibTableB.parameter5 
```

* * *

```
mibTableC.parameter6
mibTableC.parameter7
mibTableC.parameter8 
```

这些表都不依赖于系统硬件等的可用性。这些表也可以使用 PSQL 查询通过 RTA 接口访问，并且在我的机器和同事的机器上使用 RTA 接口，我可以看到所有表/参数。然而，例如，通过 SNMP 访问 MIB，我只能在我的机器上看到 mibTableA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:21:28.620

首先，您需要确定盒子上缺少哪些。在您的问题中显示一些示例，以便其他人可以猜测可能是什么原因。

其次，SNMP 查询结果确实是机器相关的。例如，如果您的机器的网络适配器比您朋友的少，那么缺少某些对象是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:06:21.960

我发现了问题。MIB 中有一些标量字段定义了表大小，这些字段没有正确初始化，而是获取存储在 C:\Documents and Settings\user\Application Data 文件夹中的表中的旧值。因此，我的机器和我的同事之间的行为差​​异。

# c# - DateTime.TryParse 解析为错误的格式

> ID：12004895
> 
> 赞同：0
> 
> 时间：2012-08-17T11:26:41.870
> 
> 标签：c#, asp.net, datetime

我正在尝试使用以下代码将字符串（从充满英文日期格式的文本框）解析为 DateTime：

```
DateTime dt;
if (DateTime.TryParseExact(Text, DateTimeFormat, System.Threading.Thread.CurrentThread.CurrentCulture, DateTimeStyles.AssumeLocal, out dt))
{
    logger.Trace("LOCALE: {0} ", System.Threading.Thread.CurrentThread.CurrentCulture);
    logger.Trace("DateTimeFormat: {0} ", DateTimeFormat);
    logger.Trace("CurrentCulture ShortDatePattern: {0} ", System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern);
    logger.Trace("Text: {0} ", Text);
    logger.Trace("result of TryParse: {0} ", dt);
    return dt;
} 
```

但是我的记录器中的输出是：

```
LOCALE: en-US 
DateTimeFormat ShortDatePattern: M/d/yyyy 
CurrentCulture ShortDatePattern: M/d/yyyy 
Text: 8/31/2012 
result of TryParse: 31-8-2012 0:00:00 
```

我完全被卡住了为什么会这样。

在单独的控制台应用程序中使用此代码确实有效：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
string text = @"8/31/2012";
DateTime date;
string dateTimeFormat = @"M/d/yyyy";
bool parseOk = DateTime.TryParseExact(text, dateTimeFormat, Thread.CurrentThread.CurrentCulture, DateTimeStyles.AssumeLocal, out date); 
```

额外信息：

*   系统：Windows 7 Ultimate CN
*   非Unicode系统语言：英语
*   web.config 系统.web：

问题：问题是我希望日期格式为“M/d/yyyy”，但它被解析为“dd-mm-yyyy”，导致日期无效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:35:13.837

您尚未为日志条目指定输出字符串，因此它将使用默认字符串（基于当前文化）。

所以，而不是：

```
logger.Trace("result of TryParse: {0} ", dt); 
```

采用：

```
logger.Trace("result of TryParse: {0} ", dt.ToString("M/dd/yyyy")); 
```

或者：

```
logger.Trace("result of TryParse: {0} ", dt.ToShortDateString()); 
```

# c# - 检查xml节点是否存在？

> ID：12004903
> 
> 赞同：4
> 
> 时间：2012-08-17T11:27:19.747
> 
> 标签：c#, asp.net, xml

我想检查给定节点是否存在于`*.xml`文件中。我尝试：

```
 string language = node.SelectSingleNode("language") != null ? (node.SelectSingleNode("language").Value == "en" ? "en-US" : "en-US") : "en-US"; 
```

但我认为它只检查节点值。在某些`xml`文件中我没有调用节点`language`所以它给出了一个 `Null Reference Ex..`. 如何检查给定节点是否存在于`*.xml`文件中？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T11:41:55.883

东西是`null`。您正在检查选定的“语言”节点`null`，它`node`本身也是`null`？

将代码分散到更多行，嵌套`?:`代码不容易遵循，您必须重复默认值和函数调用。

使用变量，例如 one for，`node.SelectSingleNode("language")`这样您就不会这样做两次。这将帮助您找到错误。

```
string language = "en-US"; //default
if(node!=null)
{
  var langNode = node.SelectSingleNode("language");
  if(langNode!=null)
  {
    //now look at langNode.Value, and overwrite language variable, maybe you wanted:
    if(langNode.Value != "en")
    {
       language = langNode.Value;
    }
  }
} 
```

# c# - Linq 外连接

> ID：12004905
> 
> 赞同：0
> 
> 时间：2012-08-17T11:27:27.437
> 
> 标签：c#, linq

如何将此查询更改为外部联接，以便没有订单的客户仍然出现在结果中？

```
Customers
                   .Join(
                      Orders,
                      c => c.ID,
                      r => r.ID,
                      (c, r) =>
                         new
                         {
                             Name = c.Name,
                             Address = c.Address,
                             OrderNumber = r.OrderNumber,
                             OrderDetails = r.OrderDetails
                         }
                   ).ToList() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:30:51.320

```
from c in context.Customers     
join o in context.order on new { cid = c.cid } equals new { cid = o.cid } into ljoin
from l in ljoin.DefaultIfEmpty()
select new()
{
  //whatever
}; 
```

# c - 在 16 位模式下加载地址

> ID：12004921
> 
> 赞同：3
> 
> 时间：2012-08-17T11:28:22.130
> 
> 标签：c, memory, pointers, assembly, x86

我想问如何在 16 位汇编中模拟 C 指针。

```
int var = 10;
int * ptr = &var; 
```

在组装中就像

```
mov dword ptr [ebp-x], 10
lea eax, dword ptr [ebp-x]
mov dword ptr [ebp-x+4], eax 
```

有什么方法可以`[bp-x]`在 16 汇编中获取变量的物理地址。例如：我有一个程序从软盘读取扇区，然后跳转到`segment:0`并执行它。正在加载的程序是简单的文本编辑器。在编辑器中，我需要获取单个变量的物理地址，将其转换为`segment:offset`并用于加载文本文件。我曾尝试`DS:SI`在跳转到退出器之前进行设置，但这不是很好的解决方案。有谁知道如何解决它？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:35:16.297

在实数寻址模式中，一个字节内存的物理地址等于段 * 16 + 偏移量。

`[(e)bp+...]`当您通过or引用内存时`[esp+...]`，所涉及的默认段是`ss`. 否则就是`ds`。可选的段覆盖前缀将更改默认段寄存器。

因此，例如，如果您的变量寻址为`[bp-8]`，则其物理地址为`ss*16+bp-8`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:33:36.890

所以这是你的要求： -

```
mov word ptr [bp-x], 10
lea ax, word ptr [bp-x] 
mov word ptr [bp-x+4], ax 
```

您可以使用一些旧的编译器，可能是漂亮的 TCC（Turbo C 编译器，16 位）。这将输出你需要的东西。

此外，即使您会看到一个 16 位指针，它只是 virtual ，并且它的真实地址将根据体系结构进行转换（就像 32 位操作系统在 64 位体系结构上以兼容模式运行一样）。

但是，如果您真的对做这些事情非常感兴趣，只需打开`cmd`-->type `debug`--> 然后`a`--> 并且您可以在那里编写一些程序集。

# java - Java EE 未来空指针

> ID：12004922
> 
> 赞同：2
> 
> 时间：2012-08-17T11:28:25.767
> 
> 标签：java, multithreading, jakarta-ee, concurrency, java.util.concurrent

我是`java.util.concurrent`包装新手，我遇到了`Future`对象问题。

这是一个对话范围的 bean。

```
@Inject SomeBean stateFull;

Boolean comp = false, comp1 = false;

public void doSomething(){        

    stateFull.runProcess();   

    try {

        comp = stateFull.getFuture().get();    
        System.out.println("Future "+syncEJB.getFuture().get());
        updateView();

        comp1 = stateFull.getFuture1().get();   
        System.out.println("Future "+syncEJB.getFuture().get());
        updateView();

    } catch (InterruptedException ex) {
        Logger.getLogger(SynchronizationMB.class.getName()).log(Level.SEVERE, null, ex);
    } catch (ExecutionException ex) {
        Logger.getLogger(SynchronizationMB.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

SomeBean 看起来像这样。

```
@Stateful
public class SomeBean{    

    @Inject AnotherBean stateLess;

    private volatile Future<Boolean> future, future1;

    @Asynchronous
    public void runProcess(){
        future = stateLess.compute(); 
        future1 = stateLess.compute(); 

    }
    public Future<Boolean> getFuture() {
        return future;
    }
    public Future<Boolean> getFuture1() {
        return future1;
    }
} 
```

还有另一个豆子：

```
@Stateless
public class AnotherBean{

@Asynchronous
public Future<Boolean> compute() {
    boolean result;

    System.out.println("--------------");
    System.out.println("completed sync");
    System.out.println("--------------");

    result = true;

    return new AsyncResult<Boolean>(result);
}
} 
```

现在我的问题。我调用`doSomething()`方法，我认为根据它的文档`Future.get()`应该调用`runProcess()`，而不是等到
`comp = stateFull.getFuture().get();`
SomeBean 中的未来从 AnotherBean 完成，但它只是继续抛出`NullPointerException`. 任何人都知道为什么会发生这种情况？

- - - - - - - - - -编辑 - - - - - - - - - - - -

NullPointer 已得到纠正。现在我有另一个问题。假设我通过在 runProcess() 中调用更多方法在 Somebean 中设置了更多 Future 对象。然后我想在每次 Future 对象获得结果以查看进度时更新我的​​页面。我怎么做？现在我用

```
private void updateView(){
    RequestContext ctx = RequestContext.getCurrentInstance();
    ctx.update("mainFrm:info");
} 
```

在 doSomething() 方法中的每个布尔值下，但它没有做我想要的。所有布尔值都一次出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:47:34.067

NPE 发生是因为启动新线程是一项繁重的操作，并且当您调用`stateFull.getFuture().get();`新线程时尚未启动（因此功能为空）。

[这里](http://blog.espenberntsen.net/2010/03/08/spring-asynchronous-support/)`@Async`是使用Future的正确方法。

# python - 在 Python 中替换和添加文本文件中的文本

> ID：12004924
> 
> 赞同：1
> 
> 时间：2012-08-17T11:28:27.683
> 
> 标签：python, replace, text-files

我需要将 .ass 字幕文件转换为 .xml 文件。到目前为止，我是手工完成的，但我必须做的越来越多。

这就是过程的样子：

输入 .ass 文件：

```
Dialogue: 0,0:00:08.03,0:00:10.57,Default,,0000,0000,0000,,Actor says something
Dialogue: 0,0:00:11.28,0:00:21.05,Default,,0000,0000,0000,,Actor says something
etc. 
```

输出 .xml 文件：

```
<p begin="00:00:08.03" end="00:00:10.57">Actor says something</p>
<p begin="00:00:11.28" end="00:00:21.05">Actor says something</p>
etc. 
```

我不知道如何解决这个任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:52:00.250

首先，您应该从源文件中提取相关信息。由于数据是`,`分开的，您可以使用 python csv 模块或做一个简单的`split(',')`.

这是它看起来如何的示例方法：

```
def extract(source):
    for line in iter(source):
        _, start, end, _, _, _, _, _, _, text = line.strip().split(',', 9)
        yield start, end, text 
```

下一步是将提取的数据转换为所需的 xml 格式。与第一种方法中的数据良好配合的函数可能如下所示（使用简单的字符串格式）：

```
xml = '<p begin="{start}" end="{end}">{text}</p>'
def to_xml(start, end, text):
    return xml.format(start=start, end=end, text=text) 
```

最后，打开文件并使用方法来编写输出：

```
with open('input.ass') as infile, open('output.xml', 'w') as outfile:
    for start, end, text in extract(infile):
        outfile.write(to_xml(start, end, text) + '\n') 
```

虽然您当然可以使这个更小（更少的 LOC），但恕我直言，这是一种可读的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:48:35.790

又快又脏：

```
>>> subs = """Dialogue: 0,0:00:08.03,0:00:10.57,Default,,0000,0000,0000,,Actor s
ays something, then some more
... Dialogue: 0,0:00:11.28,0:00:21.05,Default,,0000,0000,0000,,Actor says someth
ing"""
>>> for line in subs.split("\n"):
...     print('<p begin="{0[1]}" end="{0[2]}">{0[9]}</p>'.format(
...            line.split(",", 9))) # Split no more than 9 times
...
<p begin="0:00:08.03" end="0:00:10.57">Actor says something, then some more</p>
<p begin="0:00:11.28" end="0:00:21.05">Actor says something</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:51:05.437

```
src = [
'Dialogue: 0,0:00:08.03,0:00:10.57,Default,,0000,0000,0000,,Actor says something',
'Dialogue: 0,0:00:11.28,0:00:21.05,Default,,0000,0000,0000,,Actor says something',
]
tpl = '<p begin="0%s" end="0%s">%s</p>'
for i in src:
    fields = i.split(',')
    start, end, txt = fields[1], fields[2], fields[-1]
    print tpl % (start, end, txt) 
```

# directshow - 有什么方法可以发现图表中哪个 DirectShow 过滤器发送了 DirectShow 事件？

> ID：12004930
> 
> 赞同：2
> 
> 时间：2012-08-17T11:29:05.673
> 
> 标签：directshow

IMediaEvent 和 IMediaEventEx 没有说明图中的哪个过滤器发送了检索到的 DirectShow 事件。有没有办法找到这些信息。特别是对于图表中的一个过滤器发送 EC_ERRORABORT 事件的图表？

理想情况下，拥有适合生产系统的东西会很好，但仅适用于内部调试的 hacky 解决方案也会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:32:35.663

不，有了`EC_ERRORABORT`事件代码，您才有`HRESULT`可能为您提供帮助。

UPD。运气好的话， [DirectShow Spy](http://alax.info/blog/1385)可以提供更多信息。

# excel - excel去掉科学记数法

> ID：12004931
> 
> 赞同：0
> 
> 时间：2012-08-17T11:29:06.497
> 
> 标签：excel, notation

我有一个有 100 行的电子表格，但其中一些有科学记数法，这在计算中很容易出现问题。有谁知道怎么去掉...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:36:22.807

您是否尝试[重新格式化](http://spreadsheets.about.com/od/excelformulas/ss/2010-12-25-excel-2010-format-tutorial-pt-2_6.htm)整个列？

# d3.js - d3 旭日形不完全过渡

> ID：12004935
> 
> 赞同：1
> 
> 时间：2012-08-17T11:29:25.017
> 
> 标签：d3.js, zooming, transition, sunburst-diagram

我在 sunburst-zoom 示例（d3 包中的 /examples/partition/partition-sunburst-zoom ）之上构建，并注意到有时转换“就在”最后一点之前停止。
为了解决这个问题，arcTween 必须通过以下方式进行修改：

```
function arcTween(d) {
  var xd = d3.interpolate(x.domain(), [d.x, d.x + d.dx]),
      yd = d3.interpolate(y.domain(), [d.y, 1]),
      yr = d3.interpolate(y.range(), [d.y ? 20 : 0, radius]);
  return function(d, i) {
    return i
        ? function(t) { return arc(d); }
        : function(t) {
            if (t>.95) tt=1; else tt=t+0.05
                x.domain(xd(tt)); y.domain(yd(tt)).range(yr(tt))
                return arc(d)}
  };
} 
```

这切断了过渡开始的一小部分，但几乎可以肯定地以一致的状态结束。
即使使用原始的 partition-sunburst-zoom，我也遇到了这个问题，但没有我的数据和修改那么多。

有谁知道修复它的“整洁”方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:56:10.340

想通了。“整洁的方式”如下：

```
function arcTween(d) {
  var xd = d3.interpolate(x.domain(), [d.x, d.x + d.dx]),
    yd = d3.interpolate(y.domain(), [d.y, 1]),
    yr = d3.interpolate(y.range(), [d.y ? 20 : 0, radius]);
  return function(d, i) {
    return i
      ? function(t) { if (t==1) {x.domain(xd(1)); y.domain(yd(1)).range(yr(1));} 
                      return arc(d); }
      : function(t) { x.domain(xd(t)); y.domain(yd(t)).range(yr(t)); 
                      return arc(d); };
  };
} 
```

# c# - 设置最大值时滚动条“拖动器”大小不变

> ID：12004939
> 
> 赞同：1
> 
> 时间：2012-08-17T11:29:30.723
> 
> 标签：c#, wpf, scrollbar

当我将`.MaximumValue`滚动条的属性设置为较小的值时，滚动条上的“拖动器”是否应该增加？

我正在使用 wpf 滚动条。

如果您需要更多信息，请告诉我。

xml:

```
<ScrollBar Grid.Row="0"  HorizontalAlignment="Right" Name="scrollBar1" VerticalAlignment="Stretch" Width="18" Scroll="scrollBar1_Scroll" SmallChange="1" LargeChange="5" /> 
```

设置最大值的代码：

```
scrollBarMaximum = numberOfRecords - numberOfRecordsToLoad; 
```

# cloudbees - 如何限制在 cloudbees 上运行的应用程序的访问控制？（限制哪些IP地址可以通过浏览器或api访问服务）

> ID：12004940
> 
> 赞同：1
> 
> 时间：2012-08-17T11:29:34.457
> 
> 标签：cloudbees

我已经在 cloudbees 上部署了我的应用程序，并且想知道如何创建允许 IP 的白名单，这些 IP 可以通过浏览器请求或 API 请求访问应用程序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:07:37.777

这在 RUN@Cloud 共享服务器池上是不可能的。这种 IP 限制可以在“专用”服务器上配置，因为它们提供了更多的配置选项和隔离设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:53:22.210

您可以编写一个过滤器（例如 servlet 过滤器），它查看[http://en.wikipedia.org/wiki/X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)标头 - 这是客户端的 IP - 如果您愿意，可以这样过滤.

（您必须使用该标头，因为路由层将提供它）。

# objective-c - 试图从另一个类访问 NSTextView

> ID：12004946
> 
> 赞同：0
> 
> 时间：2012-08-17T11:30:05.303
> 
> 标签：objective-c, macos

我正在我的 AppController.h 中创建一个 NSTextView：

```
 @interface AppController : NSObject {
    IBOutlet NSTextView *texto;
}

@property (assign) IBOutlet NSTextView *texto;

@end 
```

连接并正确检查后，我试图从另一个类（AppMenu.m）为这个 TextView 设置一个文本，但没有运气：

```
#import "AppController.h"

- (IBAction)setText:(id)sender {
        AppController *appControl = [[AppController alloc] init];
        [[appControl texto] setString:@"Hello"];
} 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:34:49.667

当您调用时，`alloc`您会创建一个**新**对象。您需要的是对`AppController`已经存在的引用。

（我假设`AppController`在您执行试图更改其字段的代码之前，文本视图已经由对象显示。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:43:03.983

问题是 Appmenu 创建了一个新的 texto 实例，一个仅用于 appmenu 的本地实例（具有相同的属性），而不是在 appcontroller 中实际设置属性。如果您尝试调试，您​​会看到两个 texto 对象具有不同的内存指针。

您可以让 appcontroller 成为 appmenu 的代表，并创建一个“setTextoProps”方法，该方法可以将数据从 appmenu 传递到 appcontroller。

您还可以创建 storyboard.appcontroller 的实例并直接使用类似的东西设置数据

```
Appcontroller *controller  = [self.storyboard instantiateViewControllerWithIdentifi er:@"appcontroller"]; 

[self.controller.texto setText...]; 
```

# css - z-index 和溢出不适用于下拉菜单和滑块

> ID：12004950
> 
> 赞同：0
> 
> 时间：2012-08-17T11:30:14.967
> 
> 标签：css, overflow, z-index

我有一个带有标准下拉菜单和菜单下方的滑块的页面。问题是，当菜单展开时，它会出现在滑块下方。

这是 HTML 结构：

```
<div id="header">
<header id="branding" role="banner">
    <hgroup>
        <nav id="access" role="navigation">
            <div class="menu-primary-navigation-container">
                <ul id="menu-primary-navigation" class="menu">...</ul>
            </div>
        </nav>
    </hgroup>
</header>
</div>

<div id="main">
    <div id="primary">
        <div id="content" role="main">
            <div id="jj-nexgen-jquery_slider-5">
                <ul class="ul_jj_slider"> 
```

这是CSS：

```
#header {
    background: none repeat scroll 0 0 #FFFFFF;
    margin: 0 -2000px;
    padding: 0 2000px;
}

#branding {
    padding-bottom: 12px;
    position: relative;
    z-index: 9999;
    overflow: hidden;
    margin: 0 12.3%;
}

#access {
display: block;
float: right;
padding-top: 18px;
}

#access ul {
    font-size: 13px;
    list-style: none;
    margin: 0 0 0 -0.8125em;
}

#access ul ul {
    -moz-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    -webkit-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    display: none;
    float: left;
    margin: 0;
    position: absolute;
    top: 3.333em;
    left: 0;
    width: 188px;
    z-index: 99999; 
```

我错过了什么？如果我`overflow`从元素中删除该属性，`branding`它会起作用，但标题背景和填充将不再起作用。

这个问题可以在这个[网站](http://nelsonandco.pro/learncenter/)上看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:53:03.720

嗨，只需`overflow hidden`在您的 `#branding`div 中删除并在`float left`此处添加

请参阅下面提到的**CSS**：-

```
#branding{
overflow:hidden; // remove this line
float:left; // add this line
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:04:20.493

父`#branding`元素隐藏了它的溢出并切断了您的菜单。为了避免这种情况，品牌元素必须浮动。

当然，这打破了`#header`. 解决方法是使此浮动以及宽度调整的边距和填充：

`background: #fff;` `margin: 0 -38px;` `padding: 0 38px;` `float: left;`

# asp.net - ASP.MVC 4 中的路由别名

> ID：12004954
> 
> 赞同：2
> 
> 时间：2012-08-17T11:30:23.113
> 
> 标签：asp.net, routing, asp.net-mvc-4

是否可以在 ASP.NET MVC4 中动态地为路由命名？

基本上在 WebForms 中我使用的是这样的东西：

```
foreach (var rule in rules)
{
    routes.MapPageRoute("_" + rule.Url, rule.Url, rule.Redirect);
} 
```

并从数据库中填写规则。

我需要允许客户端从 CMS 重命名路由（或进行重定向）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:40:39.463

坦率地说，动态路由别名是 ASP.NET MVC 中的一个困难过程。创建具有动态约束的单个路由可能是更优雅的解决方案。这需要设置一个仅与您的类别匹配的约束。

```
routes.MapRoute(
    "Product",
    "{alias}/{pageNumber}",
    new { controller = "Products", action = "Choose", alias = UrlParameter.Optional, pageNumber = 1 },
    new { alias = new ProductOptionCondition() } ); 
```

上面的动态自定义分页使用的是动态路由别名选项。你具体做了什么。您能否解释一下对此的任何具体要求，除非它可以通过 MVC-4 提供的默认路由选项进行管理。

# c#-4.0 - MVC2 中 HttpNotFound 的替代方案

> ID：12004961
> 
> 赞同：2
> 
> 时间：2012-08-17T11:31:12.467
> 
> 标签：c#-4.0, asp.net-mvc-2

我正在尝试从 asp.net 网站示例应用程序[MVCMovieApplication](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examining-the-edit-methods-and-edit-view)学习 ASP.Net MVC 。此应用程序是为 MVC3 编写的。我被困在下面的部分。有人可以帮我解决这个问题吗？

```
public ActionResult Edit(int id = 0)
{
    Movie movie = db.Movies.Find(id);
    if (movie == null)
    {
        return HttpNotFound();
    }
    return View(movie);
} 
```

**错误：**

```
The Name 'HTTPNotFound' does not exist in the current context. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:53:42.917

[HttpNotFound](http://msdn.microsoft.com/en-us/library/gg453938%28v=vs.98%29)方法和相关的[HttpStatusCodeResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.httpstatuscoderesult%28v=vs.98%29)及其继承者 `HttpNotFoundResult`是 MVC3 中添加的新特性。这就是为什么它在 MVC2 中不起作用的原因。

所以要么你升级到 MVC3（甚至 MVC4 在本周作为 RTM 发布）

或者您可以创建自己`ActionResult`的返回 404 状态代码：

```
public class HttpNotFoundResult : ActionResult
{
    private const int NotFoundCode = 404;

    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)
        {
            throw new ArgumentNullException("context");
        }

        context.HttpContext.Response.StatusCode = NotFoundCode;
    }
} 
```

而你在你的行动方法中：

```
public ActionResult Edit(int id = 0)
{
    Movie movie = db.Movies.Find(id);
    if (movie == null)
    {
        return new HttpNotFoundResult();
    }
    return View(movie);
} 
```

# java - 单击 RC 中的按钮后查找文本的问题

> ID：12004970
> 
> 赞同：0
> 
> 时间：2012-08-17T11:32:14.570
> 
> 标签：java, unit-testing, testing, selenium, selenium-rc

无法访问 document.body。此 HTML 页面是否已完全加载？这是我使用 selenium RC 时遇到的错误。我正在开发 testNG 框架，我在 Eclipse 中用 java 编写测试脚本。我使用 Selenium RC 来执行我的测试脚本。这是我在编辑窗口上单击保存按钮后遇到的错误。虽然我在单击保存和下一次调用之间使用了 Thread.sleep("1000") 我的代码看起来像

```
 selenium.click(saveButton);     
            Thread.sleep(sleep);      
            while(selenium.isTextPresent("Processing ...")) 
            Thread.sleep(sleep); 
```

我在 while(selenium.isTextPresent("Processing ...")) 行上遇到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:17:57.753

在你之后`selenium.click(saveButton)`，而不是`Thread.sleep(sleep)`那可能不是正确的时间长度，你应该`selenium.waitForPageToLoad(...)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:11:22.057

您可以尝试不同的等待语句。waitForTestPresent，WaitForElementPresent。这样，selenium 就知道要等待多少以及要等待什么。你也可以使用clickAndWait ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T13:20:30.707

实际上我有一个类似的问题，在 selenium 用户组的论坛上进行了一些搜索后，确定 Ajax 调用导致此问题，AJAX 页面加载需要一些时间，但 Selenium 正在尝试转到下一个命令而不等待上一个调用完成。`selenium.waitForPageToLoad(10000)`不等待 AJAX，首先我在命令之间尝试一些减速器，在您的 Ajax 调用之后和检查文本之前。但是在阅读了这篇关于硒测试的博客文章[http://zurmo.org/wiki/selenium](http://zurmo.org/wiki/selenium)之后，我决定添加 selenium.waitForCondition() 方法来等待 jQuery 加载。我现在使用这个结构：

```
 selenium.waitForPageToLoad(10000);
        selenium.waitForCondition("typeof selenium.browserbot.getCurrentWindow().jQuery == 'function'", "10000");
        Thread.sleep(1000L);
        Assert.assertTrue("Warning Message", selenium.isTextPresent("elementText")); 
```

***博文建议***

1.  在 FireFox IDE 中编写所有测试，并首先专注于让它在那里成功运行。
2.  不用担心 Chrome/IE，因为第一个目标是 FireFox 中的稳定测试套件。让它在一个浏览器上完全稳定比在 3 个浏览器上工作更重要
3.  编写所有测试以快速运行。一开始我们认为因为 selenium 很挑剔，所以我们必须编写所有东西才能以 SLOW 速度运行。这实际上会产生问题，因此请让您的测试以 FAST 速度运行。到目前为止，我们只发现了一个地方需要暂时放慢几条线路的速度。我稍后会提到这一点。每当您执行导致整个页面加载的操作时，您都需要遵循以下模式：

***直接访问 url 的模式***

*   打开 - 我的网址

*   等待页面加载

*   waitForCondition – selenium.browserbot.getCurrentWindow().jQuery.active == 0（***我在这里更改为“typeof selenium.browserbot.getCurrentWindow().jQuery == 'function'”这对我有用。***）

但我强烈建议阅读博客文章。

# php - php将带有文件的文件夹重命名为

> ID：12004971
> 
> 赞同：2
> 
> 时间：2012-08-17T11:32:19.153
> 
> 标签：php, directory, rename

我正在尝试用 PHP 编写一个脚本来重置我在数据库中的 id。但我必须重命名表中具有相同 ID 的目录。

所以我尝试使用重命名功能，但我失败了。

我总是有“没有这样的文件或目录”。我尝试使用绝对或相对路径，更改 chmod，在之前使用睡眠，是的，我的文件夹存在。

所以我会知道为什么这不起作用：

```
rename('/uploads/photos/'.$old_id.'/', '/uploads/photos/'.$new_id.'/'); 
```

我的文件夹中有一些文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:23:28.120

只需在 php 中使用 linux 命令：

```
exec("mv $oldname $newname"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:05:48.897

1-修复父目录的权限。( `photos`) 它必须是您的 php 用户可写的。

2-确保你的路径是好的`/uploads/photos/...`（你的第一个斜杠表示它是根目录的绝对路径）

# css - FireFox 中的内联块重叠边界而不是溢出

> ID：12004973
> 
> 赞同：1
> 
> 时间：2012-08-17T11:32:31.420
> 
> 标签：css, jquery-ui, firefox

我遇到了其他浏览器中没有的 FireFox 渲染问题。我有一个可通过 colResisable 插件调整大小的表格单元格。在我的第二个单元格中，我有两个 div，一个包含一个无序列表，另一个包含一个表格。我不确定这些 div 的内容是否重要。

这两个 div 的样式都是内联块。父级对空白没有换行，以防止第二个内联块落在第一个之下。我的意图是内容会溢出带有滚动条的父 TD。

这在 IE、Safari 和 Chrome 中正常工作，但在 FireFox 中，内容重叠在父级边框的顶部。

这是两个显示差异的屏幕截图：

![这是如何在 Chrome 中呈现的](../Images/7c21ef5a9b16b4a3540333bbb41c2e11.png)

![这是如何在 FireFox 中呈现的](../Images/d3db612ef8801db610e73f273f25a5d2.png)

我有一个近似这种行为的[JSFiddle](http://jsfiddle.net/xVNae/23/)，但我不能完全一样。希望有人会看到这一点并知道发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:01:05.530

您可以更改`display: inline-block`为`float: left`：

```
#content_1, #content_2 {
    ...
    float: left;
    ...
} 
```

**工作示例：http: [//jsfiddle.net/xVNae/24/](http://jsfiddle.net/xVNae/24/)**

* * *

如果您想继续`display: inline-block`尝试更改`border-collapse`为`inherit`for `table`：

```
table {
    border-collapse: inherit;   
} 
```

**工作示例：http: [//jsfiddle.net/xVNae/25/](http://jsfiddle.net/xVNae/25/)**

# jquery - jQuery Isotope 按范围过滤

> ID：12004975
> 
> 赞同：0
> 
> 时间：2012-08-17T11:32:35.850
> 
> 标签：jquery, filter, range, jquery-isotope

## 介绍

嗨，我正在使用 jQuery Isotope 来模拟电子商务模板以供进一步使用。

同位素很简单，但他们没有概述如何为某些数据的自定义范围创建过滤器。

例如，我可能想根据价格范围过滤产品，因此价格在 100-200 之间的产品成为一个过滤器，价格在 200-300 之间的产品成为另一个过滤器，依此类推。

基本上我希望有多个价格过滤器并定义每个过滤器可以具有的特定值。

我怎样才能做到这一点？

## 代码示例

我正在使用同位素文档中编写的标准 JS 代码：

```
 var $container = $('#list');

   $container.isotope({
     itemSelector : '#list li',
     masonry : {
              columnWidth : 1
            },
     getSortData : {
          price : function( $elem ) {
         return parseInt( $elem.find('.price').text(), 10 );
       },
     } 
```

ETC...

html基本上是

```
 <ul id="list">

   <li class=="item">
     <span class="price">555</price>
   </li>

    <li class=="item">
     <span class="price">222</price>
   </li>

 </ul> 
```

ETC..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T22:45:50.157

如果您向下滚动一点，您可以通过[查看**用户 hdias 的第一条评论**](https://github.com/desandro/isotope/issues/144)来很好地做到这一点。基本上，您需要一个简单的价格范围条件，然后将 jQuery 对象传递给过滤器选项。

# sass - SCSS - 如何表示

> ID：12004979
> 
> 赞同：0
> 
> 时间：2012-08-17T11:33:01.327
> 
> 标签：sass, nested-class

CSS中的嵌套类

```
.wrapper .widecolumn {
    width: 983px;
} 
```

可以在 SCSS 中表示为

```
.wrapper {
    .widecolumn {
        width: 983px;
    }
} 
```

但是如何表示呢？：

```
.wrapper.widecolumn {
    width: 983px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T14:20:15.507

```
wrapper.widecolumn {
    width: 983px;
} 
```

很好（假设 wrapper 是一个示例标签）。如果您只关心嵌套，请使用 & 像这样：

```
wrapper {
    &.widecolumn {
        width: 983px;
    }
} 
```

& 代表父对象，所以你也可以做一些聪明的事情，比如

```
wrapper {
    &.widecolumn {
        width: 983px;
    }
    &:hover {
        color: red;
    }
    body.mycoolclass & {
        font-weight: bold;
    }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-10-01T08:50:35.267

你也可以

```
.wrapper {

  &__widecolumn {
        width: 983px;
    }

}
```

当您这样做时，您可以像这样简单地使用 This ：

```
<div class="wrapper__widecolumn">

  <!-- This Column will be 983px -->

</div>
```

# bash - SVN :- 使用有限文件从主干创建分支的 Bash 脚本

> ID：12004980
> 
> 赞同：0
> 
> 时间：2012-08-17T11:33:10.047
> 
> 标签：bash, svn, branch, trunk

我正在尝试创建一个 Bash 来从主干创建一个分支。但我需要注意一些文件不会成为新分支的一部分，它应该只在主干中。

如果有任何提示，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:40:06.660

你可以做：

*   使用特定文件或目录创建分支。请注意，`svn copy`命令可以采用文件或文件夹，例如：`svn copy <dir_to_be_branched> <branch_path>`
*   使用所有文件创建分支，然后删除不需要的文件/文件夹。

# php - 在 CodeIgniter 中创建类似于 CNN 文章 URL 的 URL

> ID：12004985
> 
> 赞同：-1
> 
> 时间：2012-08-17T11:34:01.587
> 
> 标签：php, codeigniter, url

我需要在 CodeIgniter 中创建一个类似于 CNN 文章 URL 格式的 URL 格式。

[http://edition.cnn.com/2012/08/17/world/asia/australia-assange-asylum-ecuador/index.html?hpt=hp_c2](http://edition.cnn.com/2012/08/17/world/asia/australia-assange-asylum-ecuador/index.html?hpt=hp_c2)

有趣的部分当然是**年/月/日/section_name/article_name**。我能够重新创建测试日期，并最终得到了这种 url：

**http://localhost/myapplication/index.php/2012/08/17/1**

其中最后一个“1”是文章 ID。

问题是我的控制器的视图函数只需要第 4 个参数（文章 ID）来检索文章，而所有其他参数都被忽略了。因此，2014/06/11/1 将导致相同的页面，因为文章 ID 相同。

我想到的是，我可以在我的视图函数中检索文章日期（因为无论如何我都是从数据库中检索文章数据），并根据 URL 仔细检查它以确保 URL 的日期有效。我只是想知道这是否是正确的做法，因为我最终不得不对章节标题和文章标题做同样的事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:04:53.640

好的，我想现在我明白了，你的意思。

您创建 url，然后通过 id 从数据库中获取文档，如果您使用 slug，则可以使用更多 SEF。如果您将日期存储为 mysql 中的日期类型（如果您使用的是 mysql ），那么在 sql 查询和其他所有条件（如部分名称）中也更容易将其写入。

# javascript - 如何使用 Backbone 读取通过相同 REST URL 返回的两个不同对象？

> ID：12004995
> 
> 赞同：0
> 
> 时间：2012-08-17T11:34:48.433
> 
> 标签：javascript, ajax, backbone.js

我有一个 REST URL，比如说

```
/users/<user_id>/entities 
```

它在其中返回 2 个对象：

```
{
    "players":
    {
       "test_player2":
       {
           "_id": "test_player2",
           "user": "f07590567f3d3570b4f35b4fd79f18b3"
       },
       "test_playerX":
       {
           "_id": "test_player2",
           "user": "f07590567f3d3570b4f35b4fd79f18b3"
       }
    },
    "games":
    {
      "game1" :{},
      "game2" :{},
    }
} 
```

如何设计我的主干对象以使用这些数据？

要求：我想要两个不同的 Backbone 对象：Player 和 Game，它们应该通过相同的 url 填充（如上所述）。

PS：设计这种 REST URL 甚至是正确的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:08:41.633

> 设计这种 REST URL 甚至是正确的做法吗？

不，这不是正确的做法。在 REST 中，单个 URL 应该代表单个资源。因此，您的`/users/<user_id>/entities`URL 应该`/users/<user_id>/players`并且只返回一个玩家列表，`/users/<user_id>/games`并且只返回一个游戏列表。

但是，有时您可能无法控制 API 返回的内容。一般来说，嵌套对象就是这种情况（你可以用你所拥有的东西来做，但理想情况下，你会想要改变你的 API）：

```
{
    "players":
    {
        "id": 1,
        "games":
        {
           "id": 1745,
           "title": "Team Fortress 2"
        }
    }
} 
```

在这种情况下，您将使用模型的`parse`功能，例如：

```
parse: function(response)
{
    // Make sure "games" actually exists and is an array to make a collection from
    if(_.isArray(response.games))
    {
        // Backbone will automatically make a collection of models from an array
        // Use {parse: true} if you want the receiving collection to parse as if a fetch had been done
        this.games = new GamesCollection(response.games,{parse: true});
    }
} 
```

通过覆盖`parse`和使用`{parse:true}`，您几乎可以无限期地构建您的模型。这样做不一定是理想的（想法是每个集合都负责自己的模型），但它适用于获得复合对象并且无法更改 API 返回的内容的情况。