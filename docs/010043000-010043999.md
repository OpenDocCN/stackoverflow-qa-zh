# StackOverflow 问答 10043000-10043999

# django - 在 Django 自定义管理器类中使用另一个模型管理器的代码

> ID：10043014
> 
> 赞同：2
> 
> 时间：2012-04-06T11:45:32.680
> 
> 标签：django, django-orm, django-managers

我有两个模型，比如说，`Question`和`Topic`。

我正在尝试将方法添加到 Question 模型的自定义管理器中，例如某些通过`Topic`.

我似乎无法为此使用其他经理的代码（也不能`import Topic`，所以我不能这样做`Topic.objects...`）

在`class QuestionManager`

```
def my_feed(self, user):
       topics = TopicManager().filter(user=user) # 1st approach
       #topics = Topic.objects.filter(user=user) # 2nd line
       # do something with topics 
```

类主题管理器 ....

使用第一种方法，我收到以下错误：

```
virtualenv/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in get_meta(self)
    219         by subclasses.
    220         """
--> 221         return self.model._meta
    222 
    223     def clone(self, klass=None, memo=None, **kwargs):

AttributeError: 'NoneType' object has no attribute '_meta' 
```

我不能使用第二行，因为我不能导入主题，因为主题依赖于这个文件中的主题管理器。有解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T11:47:24.630

在任何情况下，您都不能直接使用经理。您总是通过模型类访问它。

如果由于循环依赖而无法在文件顶部导入模型，则只需将其导入方法中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-07T20:21:27.663

您应该能够将其放置在`managers.py`模块的底部：

```
# Prevent circular import error between models.py and managers.py
from apps.drs import models 
```

在您的管理器类中，您可以使用 引用其他模型`models.<modelname>`，这应该可以工作，避免循环导入。

例如：

```
class QuestionManager(Manager):

    def my_feed(self, user):
        topics = models.Topic.objects.filter(user=user)
        # do something with topics

# Prevent circular import error between models.py and managers.py
from apps.drs import models 
```

这是有效的，因为您正在导入模块，而不是模型类，这会导致延迟导入。到函数运行时，模块将被导入，一切都会正常工作。

您还可以使用以下方法按名称加载模型`django.apps.get_model()`：

```
from django.apps import apps
apps.get_model('my_app', 'MyModel') 
```

详情[在这里](https://docs.djangoproject.com/en/dev/ref/applications/#django.apps.apps.get_model)

例如：

```
from django.apps import apps

class QuestionManager(Manager):

    def my_feed(self, user):
        topics = apps.get_model('my_app', 'Topic').objects.filter(user=user)
        # do something with topics 
```

# cocoa - NSTable CoreData 和选择

> ID：10043017
> 
> 赞同：0
> 
> 时间：2012-04-06T11:46:01.567
> 
> 标签：cocoa, core-data, nstableview

我有一个非常简单的应用程序。它是一个基于非文档的 CoreData 应用程序。nib 包含一个 NSArrayController 和一个带有一列 NSTable 的窗口。表格下方是三个按钮，添加、删除和获取。在按钮下方，我有一个 NSTextField 和第四个标记为 Save 的按钮。

我的模型有两个实体，部门一个员工。部门有一个属性，名称。我目前没有使用员工。

在 AppDelegate.h 我添加了以下代码：

```
@interface HMGAppDelegate : NSObject <NSApplicationDelegate>
{
    NSArrayController *_departments;
}

@property (retain) IBOutlet NSArrayController *departments; 
```

并在 AppDelegate.m

```
 - (void) awakeFromNib
{
    [[self departments] fetch:nil];
} 
```

按钮必须在 NSArrayController 上添加：remove: 和 fetch:。保存按钮绑定保存：在 AppDelegate 上

NSTextField 绑定到 nib 中 NSArrayController 的实例，ControllerKey 为 selection，Model Key Path 为：name

当我运行应用程序时，我可以创建新实体并更改实体的值。这一切都很好。

不起作用的是表格中的选择。更改表中选定的行不会导致在 NSArrayController 中选择该行的值。我知道我可以在表格上放置一个代表 catch SelectionDidChange 并在 ArrayController 上显式设置选择，但我想知道是否有更简单的方法来做到这一点。

我已经看到其他示例，其中有两个表视图，表示一对多关系。第一个表中的选择会导致第二个表显示相关实体。（例如选择一个部门会显示该部门的员工）。在我正在查看的示例中，似乎没有 NSTableDelegate。

我错过了什么？NSTableView 如何将它的选择传回给 NSArrayController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:35:28.873

你是如何设置绑定的？如果将`NSTableView`的内容绑定到`NSArrayController`，则还必须绑定`selection`& `sortDescriptions`。

作为替代方案，您可以将表列的`Value`绑定绑定到`Array Controller.arrangedObjects`，并且选择应该可以工作。

# xcode - 编辑代码后如何在 Xcode 4.3 中禁用自动保存？

> ID：10043021
> 
> 赞同：2
> 
> 时间：2012-04-06T11:46:14.283
> 
> 标签：xcode, autosave

我记得在 Xcode 4.2 中有一个禁用自动保存的选项，但我在 Xcode 4.3 中找不到它。编辑代码后还有另一种禁用自动保存的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:37:45.987

我认为这已被删除（不幸的是）。见[https://discussions.apple.com/thread/3655734?start=0&tstart=0](https://discussions.apple.com/thread/3655734?start=0&tstart=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:14:15.627

解决方案（能够在 10.8.2 中找到） [https://discussions.apple.com/message/20435985#20435985](https://discussions.apple.com/message/20435985#20435985)

1) 打开设置应用程序。

2) 打开常规面板。

3) 勾选“关闭文档时要求保留更改”

# c# - 在 mm/dd/yyyy 中将字符串格式转换为日期时间

> ID：10043022
> 
> 赞同：38
> 
> 时间：2012-04-06T11:46:16.713
> 
> 标签：c#, datetime

我必须将 mm/dd/yyyy 格式的字符串转换为 datetime 变量，但它应该保留为 mm/dd/yyyy 格式。

```
string strDate = DateTime.Now.ToString("MM/dd/yyyy"); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-06T12:00:53.793

您正在寻找`DateTime.Parse()`方法（[MSDN 文章](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)）

所以你可以这样做：

```
var dateTime = DateTime.Parse("01/01/2001"); 
```

这将为您提供一个`DateTime`类型化的对象。

如果您需要指定要使用的日期格式，您可以使用`DateTime.ParseExact`（[MSDN 文章](http://msdn.microsoft.com/en-us/library/332de853.aspx)）

您将在这种情况下使用它（您使用的是英式日期格式）：

```
string[] formats= { "dd/MM/yyyy" }
var dateTime = DateTime.ParseExact("01/01/2001", formats, new CultureInfo("en-US"), DateTimeStyles.None); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-06T11:48:44.503

**月份部分需要大写`M`。**

```
string strDate = DateTime.Now.ToString("MM/dd/yyyy"); 
```

小写`m`用于输出（和解析）一分钟（例如`h:mm`）。

例如，完整的日期时间字符串可能如下所示：

```
string strDate = DateTime.Now.ToString("MM/dd/yyyy h:mm"); 
```

注意大写/小写的`mM`区别。

* * *

此外，如果您将始终处理相同的日期时间格式字符串，则可以通过将它们编写为 C# 扩展方法来使其更容易。

```
public static class DateTimeMyFormatExtensions
{
  public static string ToMyFormatString(this DateTime dt)
  {
    return dt.ToString("MM/dd/yyyy");
  }
}

public static class StringMyDateTimeFormatExtension
{
  public static DateTime ParseMyFormatDateTime(this string s)
  {
    var culture = System.Globalization.CultureInfo.CurrentCulture;
    return DateTime.ParseExact(s, "MM/dd/yyyy", culture);
  }
} 
```

* * *

**示例：**日期时间/字符串之间的转换

```
DateTime now = DateTime.Now;

string strNow = now.ToMyFormatString();
DateTime nowAgain = strNow.ParseMyFormatDateTime(); 
```

请注意，无法像在*.NET*中一样存储自定​​义`DateTime`格式信息，`default`大多数字符串格式取决于当前设置的文化，即

```
System.Globalization.CultureInfo.CurrentCulture. 
```

您可以做的唯一简单方法是滚动自定义扩展方法。

此外，另一种简单的方法是为您的 DateTime 使用不同的“容器”或“包装器”类，即一些`explicit operator`定义了自动转换为和从 DateTime/string 转换的特殊类。但那是危险的领域。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-14T11:38:09.610

**解决方案**

```
DateTime.Now.ToString("MM/dd/yyyy", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-09T04:25:20.737

我确实喜欢这个

```
var datetoEnter= DateTime.ParseExact(createdDate, "dd/mm/yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-08T04:41:08.913

您也可以通过这样做来更改格式

```
string fecha = DateTime.Now.ToString(format:"dd-MM-yyyy"); 
```

// 这改变`"/"`了`"-"`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-20T04:54:50.227

以下对我有用。

```
string strToday = DateTime.Today.ToString("MM/dd/yyyy"); 
```

# google-maps - 启用我的 node.js 网络应用程序以保存谷歌地图图片

> ID：10043025
> 
> 赞同：1
> 
> 时间：2012-04-06T11:46:45.793
> 
> 标签：google-maps, node.js, pdfkit

我有一个使用谷歌地图的 node.js 网络应用程序。我想让用户能够将他们正在查看的地图保存在 pdf 文档中。我将使用 pdfKit 生成 pdf 文档，因为它支持图像，但为此，我首先需要保存地图的图像。我不知道我会怎么做。谁能给我一些关于如何做到这一点的想法 - 我如何保存用户在服务器上查看的地图图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:10:07.830

我相信您必须通过[Google Static Maps API](https://developers.google.com/maps/documentation/staticmaps/)获取图像文件，生成 PDF 并将文档返回给用户。

如果您打算将图像实际存储在数据库中，我也会考虑@Dr.Molle 的评论。

# linux - `tar /home/user/file` 是否将 /home 所有者更改为 root？

> ID：10043027
> 
> 赞同：1
> 
> 时间：2012-04-06T11:46:50.350
> 
> 标签：linux, tar

我正在尝试以 root 身份备份机器的一些关键文件和目录，包括一些 /home 数据，手动挑选一些文件以减少 tarball 大小。在大多数情况下一切都很好，因为大多数文件都归根用户所有，但是说我只是试试这个：

```
# tar -cf backup.tar /home/user/file 
```

当我恢复内容时， /home/user/file 正如预期的那样归用户所有，但 /home/user 归根用户所有。然而，我试过了，

```
# tar -cf backup.tar /home 
```

在这种情况下，所有 /home 所有者都被保留。（请注意，我不需要 -p 标志，因为我是 root。我仍然尝试过......）

这是正常行为吗？如果是这样，有没有办法在保留 /home 所有权信息的同时手动选择常规用户文件进行备份？我的目标是简单地从 / 中解压所有内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:01:55.473

要正确设置目录的权限，tarball 需要包含这些目录的条目，因此您需要将它们添加到 tarball。

当您创建仅包含 而不包含 的 tarball 时，tarball 中`/home/user/file`没有`/home/user`有关权限的信息`/home/user`，因此`tar`不知道该怎么做。它会自动创建目录，但没有权限、所有者或组授予它们，因此它们获得默认值。

您也可以添加目录：

```
# tar -cf backup.tar --no-recursion /home/user /home/user/file 
```

但这可能不会让您的事情变得更简单。注意`--no-recursion`- 告诉 tar 不要在目录下添加任何东西，只在目录本身。如果您还想实际添加目录树，则必须`find(1)`手动将其传递给该目录下的每个文件。那会很快变得丑陋。

请记住，我们正在谈论备份和恢复特定文件。如果您要恢复，您可能还会创建要恢复的 unix 帐户（如果它们不存在的话）。所以至少不需要在主目录上设置权限。但是，这些子目录的情况并非如此。

# java - Java - 覆盖外部方法

> ID：10043030
> 
> 赞同：3
> 
> 时间：2012-04-06T11:47:06.573
> 
> 标签：java, overriding

我正在尝试为我的应用程序制作一个特殊的附加组件。我需要在不编辑类文件的情况下覆盖类的某些方法。

这是一个方案：

```
class A
{
    public void method1()
    {
        // Do something here
    }

    public int method2()
    {
        // Do something
    }
} 
```

现在从我的 B 类中，我想从 A 类中重写 method1 func，并强制 A 类使用我的新方法。

```
class B
{
    public void method1()
    {
        Do something
    }
} 
```

我想在不编辑 A 类的情况下更新我的 A 类代码。那可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:50:57.310

使用`class B extends A`和覆盖您要更改的方法。你怎么必须使用类的实例`B`not `A`。像

```
class B extends A
{
    public void method1(){
      Do something
    }
}
A a = new B();
a.method1(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:52:36.980

如果您使用`A`构造函数创建对象，则不会。您可以使用`B`extend `A`，但您必须将对象实例化为`new B()`（即使您可以将它们*声明*为`A`, 如 in `A obj = new B()`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T12:01:53.290

不，在像 Java 这样的语言中，这是不可能直接实现的。`new A`将始终在运行时创建 的实例`A`，而不是派生的`B`.

如果可能（也就是说，如果您控制所有实例化的代码`A`），您可以使用一些笨拙的解决方法来引入一种间接。例如，您可以有一个可配置的工厂来生产`A`s（它会根据需要切换到在后台生产`B`s）——这似乎是 Java 的方式。（您将不需要`A`直接使用所有代码构造，而是通过工厂。）

如果我没记错的话，您正在寻找的功能可以在 Objective C 中开箱即用 - 但在 Java 中不可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T12:18:35.643

听起来像代理可以解决你的问题。看看[cglib](http://cglib.sourceforge.net/)

```
Enhancer e = new Enhancer();
e.setSuperclass(A.class);
e.setCallback(new MyCallback());
A proxied = e.create(); 
```

这是 MyCallback 类的示例实现......

```
class MyCallback implements MethodInterceptor{
       public Object intercept(Object obj,
                                      Method method,
                                      Object[] args,
                                      MethodProxy proxy){
            Object stuffToReturn = null;
            if ("method1".equals(method.getName()) {
                 //Class B's method1 impl 
            } else {
                 //call the original method in class A
                 stuffToReturn  = method.invoke(proxy, args);
            }

            return stuffToReturn;   
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T11:50:33.733

通过继承，是的。只需更改 B 类定义：`class B extends A`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T11:51:11.797

这没有任何意义。重写意味着重新定义从超类继承的方法。所以这里有一些解决方案：

*   B 必须扩展 A，然后您可以覆盖 A 的方法之一。给它与 A 中相同的签名，确保使用 @Override 注释。
*   A 有一些注入的依赖项：method1 和 method2 使用一些 tierce 对象 (C) 来完成工作，并将依赖项注入 A。然后 B 可以将 A 与适合其需要的自定义 C 对象一起使用。A 的大部分代码都不会那样改变。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T12:04:21.290

实现这一点的一种方法是使用某种[工厂实例](http://en.wikipedia.org/wiki/Factory_method_pattern)来创建 A 类型的对象，而不是直接在代码中调用 A() 构造函数。然后，您的插件将需要提供并注册它自己的该工厂的实现，该工厂将创建 B 类的实例。这仅在插件在创建任何 A 实例之前被加载和初始化时才有效。

另一种方法是实现您自己的 ClassLoader 并在加载时使用它来修改 A 类的字节码。您可以搜索面向[方面编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)的工具来实现这一点。这只有在您可以控制 A 类的类加载过程时才有可能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-06T12:06:00.857

不，你不能这样做，如果不实际修改类就不可能修改类的行为，但是，有一个解决方法：

1.  B 应该从 A 继承。这是绝对需要的。A 不会改变，但它的子类可能会改变行为

2.  覆盖 method1() 和 method2()

3.  假设您有一个 A 类的对象。如果您将其转换为 B，它的行为将是您新的自定义行为。

# javascript - 根据浏览器版本删除所有样式

> ID：10043031
> 
> 赞同：0
> 
> 时间：2012-04-06T11:47:10.087
> 
> 标签：javascript, jquery, css, internet-explorer-7, cross-browser

我想知道如何根据检查浏览器是否小于 IE8 来删除所有 CSS 样式。

那么如果它检测到 IE7 则删除所有样式？我想知道这是否可以通过一些 jquery 实现？

**这将修复大多数 IE7 问题：**

```
<!--[if lt IE 7]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE7.js"></script>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:50:30.580

我不知道您为什么要删除浏览器版本的所有样式。我想你在使用 IE7 时遇到了一些 CSS 问题，通常一种修复它的好方法是使用 ie7.js，而不是删除所有 CSS：[http](http://code.google.com/p/ie7-js/) ://code.google.com/p/ie7-js/ .

这是它可以做什么的[演示](http://ie7-js.googlecode.com/svn/test/index.html)。

此外，此脚本有 IE8 和 IE9 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:48:44.113

```
<!--[if lt IE 8]>
    <body class='oldIE'>
<![endif]-->
<!--[if gte IE 8]>
    <body class='ok'>
<![endif]-->
<!--[if !IE]>
    <body class='ok'>
<![endif]--> 
```

在这里，您需要为所有不使用 IE7 的样式添加前缀`.ok`

另一种方法是

```
<!--[if lt IE 8]>
    //include an old IE specific stylesheet or none at all
<![endif]-->
<!--[if gte IE 8]>
    //include your stylesheets
<![endif]-->
<!--[if !IE]>
    //include your stylesheets
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:50:41.143

最好的解决方案是删除特定的**类名**，而不是擦除元素的整个 CSS：

```
// Identity browser and browser version

if($.browser.msie && parseInt($.browser.version) == 7) {

   // Remove class name
   $('.class').removeClass('class');

   // Or unset each CSS selectively
   $('.class').css({
      'background-color': '',
      'font-weight': ''
   });

} 
```

# android - Ksoap2 中的 Java.net.SocketTimeoutException

> ID：10043040
> 
> 赞同：2
> 
> 时间：2012-04-06T11:47:44.593
> 
> 标签：android

我是 android 的新手。我正在开发 android 应用程序。为此，我使用 Ksoap2(2.6) 调用 Web 服务并调用 3 个不同的 json 服务。我的问题是，当 3 个服务中有 1 个或 2 个服务出现时，它会显示 java.net.SocketTimeOutException。

请告诉我如何处理 HttptransportSE 和 TimeOut 以避免 SocketTimeoutException。先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T15:11:50.177

解决这个问题的方法是：

```
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL,60000); 
```

注意第二个参数，它是超时值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:51:37.170

问题出在肥皂请求上。

> 所有可选参数都需要用 ZeroLengthSpace 替换。

# ruby - Ruby 语言备忘单/海报/参考/概述？

> ID：10043043
> 
> 赞同：13
> 
> 时间：2012-04-06T11:47:51.847
> 
> 标签：ruby, syntax

我是一个视觉类的人，想知道是否有一个很好的关于 Ruby 的概览。你知道，就像**参考海报**一样，*带有对象层次结构*、最常用的方法等，所有这些都是彩色的，布局得很好而且清晰......

对于像我这样的初学者来说，这将是很棒的......

您是否使用过或偶然发现过类似的东西？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-06T11:49:23.870

**检查这些：**

*   [https://github.com/savini/cheatsheets/raw/master/ruby/RubyCheat.pdf](https://github.com/savini/cheatsheets/raw/master/ruby/RubyCheat.pdf)
*   [http://wtr.rubyforge.org/s101/doc/Ruby-cheat-sheet.doc](http://wtr.rubyforge.org/s101/doc/Ruby-cheat-sheet.doc)
*   [http://refcardz.dzone.com/refcardz/essential-ruby#refcard-download-social-buttons-display](http://refcardz.dzone.com/refcardz/essential-ruby#refcard-download-social-buttons-display)

还有一种...“比较”的方法，结合了主要脚本语言的备忘单：

*   [http://hyperpolyglot.org/scripting](http://hyperpolyglot.org/scripting)

# ruby-on-rails - 使用 OpenURI 或 net/http 进行 Ruby 代理身份验证 GET/POST

> ID：10043046
> 
> 赞同：7
> 
> 时间：2012-04-06T11:48:08.870
> 
> 标签：ruby-on-rails, ruby, proxy, open-uri, net-http

我正在使用 ruby​​ 1.9.3 并尝试使用`open-uri`获取 url 并尝试使用`Net:HTTP`

我试图对两者都使用代理身份验证：

尝试通过以下方式`POST`发出请求`net/http`：

```
require 'net/http'
require 'open-uri'
http = Net::HTTP.new("google.com", 80)
headers = { 'User-Agent' => 'Ruby 193'}

resp, data = http.post("/", "name1=value1&name2=value2", headers)
puts data 
```

我`open-uri`无法做到这一点，`POST`我使用：

```
data = open("http://google.com/","User-Agent"=> "Ruby 193").read 
```

我将如何修改这些以使用具有 HTTP 身份验证的代理

我已经尝试过（对于 open-uri）

```
data = open("http://google.com/","User-Agent"=> "Ruby 193", :proxy_http_basic_authentication => ["http://proxy.com:8000/", "proxy-user", "proxy-password"]).read 
```

但是，我将得到的只是一个`OpenURI::HTTPError: 407 Proxy Authentication Required`. 我已经验证了所有内容，它可以在具有相同身份验证和代理详细信息的浏览器中使用，但我无法让 ruby​​ 做到这一点。

我将如何修改上面的代码以正确添加 http 身份验证？有没有人经历过这种暴行？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-06T12:06:33.687

尝试：

```
require "open-uri"
proxy_uri = URI.parse("http://proxy.com:8000")

data = open("http://www.whatismyipaddress.com/", :proxy_http_basic_authentication => [proxy_uri, "username", "password"]).read
puts data 
```

至于 Net::HTTP，我最近在一个名为[http](https://github.com/tarcieri/http)的 Net::HTTP 包装库中实现了对带有 http 身份验证的代理的支持。如果您查看我的最后一个拉取请求，您将看到基本实现。

**编辑：**希望这会让你朝着正确的方向前进。

```
Net::HTTP::Proxy(proxy_uri.host, proxy_uri.port,"username","password").start('whatismyipaddress.com') do |http| 
  puts http.get('/').body
end 
```

**编辑 2020 年 11 月 24 日**：`Net::HTTP::Proxy`现在被认为是[过时](https://ruby-doc.org/stdlib-2.7.2/libdoc/net/http/rdoc/Net/HTTP.html#method-c-Proxy)的。您现在可以在创建新实例时配置代理`Net::HTTP`。有关详细信息，请参阅[Net::HTTP.new](https://ruby-doc.org/stdlib-2.7.2/libdoc/net/http/rdoc/Net/HTTP.html#method-c-new)的文档。

# php - HTML5 重绘和发布 HTML

> ID：10043051
> 
> 赞同：0
> 
> 时间：2012-04-06T11:48:35.873
> 
> 标签：php, javascript, html

我在 HTML5 中有三个按钮，它们`Add Circle`调用其各自的 javascript 来绘制特定的形状。现在，如果用户更改其位置，如何获得新的更改位置？`Add Text``Add Rectangle`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:05:28.577

如果您在画布上侦听“mouseDown”事件，则可以存储鼠标相对于画布原点的位置。然后在“mouseUp”上，再次获取它的坐标并将所选形状转换到新位置。

好的，这就是基本思想，要获得更详细的解释，您必须执行以下操作：

1.  获取鼠标坐标（相对于`mouseDown`画布）并获取鼠标偏移量（相对于所选形状原点的鼠标位置）
2.  在`mouseMove`获取新的鼠标位置（再次，相对于画布）并将所选形状转换到新位置时，您还需要应用先前计算的偏移量（您可以在此处使用[重影效果](http://jqueryui.com/demos/draggable/#visual-feedback)）
3.  对`mouseUp`形状应用转换（这可能是可选的，取决于上一步是否实际转换形状）

祝你有美好的一天！

# php - PHP中的关联数组数组

> ID：10043054
> 
> 赞同：1
> 
> 时间：2012-04-06T11:49:05.080
> 
> 标签：php, mysql

我有一个函数要使用，但我不知道这个函数的内容。我唯一知道的是该函数返回一个关联数组的数组和数组的键。该函数返回的数据来自数据库。你能帮助如何从这个数组中读取数据吗？我对数组感到困惑。现在我正在这样做：

```
$array = myfunction($var);
if(!empty($array))
{
    while($row = mysql_fetch_array($array))
    {
        print"$row[elem1]
        $row[elem2]";
    }
} 
```

我接受了错误：警告：mysql_fetch_array() 期望参数 1 是资源，数组中给出...我知道有些东西丢失了，但直到现在我都无法修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:53:43.953

如果函数返回一个数组，那么为什么要在 mysql_fetch_array 中使用它。这是没用的。而是使用这个

```
foreach($array as $key => $value){

   echo $key;
   echo '<br>';
   echo $value;
} 
```

这将打印整个数组。或者一个简短的方法是

```
echo '<pre>';
print_r($array);
echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:52:31.717

就像是 -

```
$array = myfunction($var);
foreach($array as $key => $row) {
    print"{$row['elem1']} {$row['elem2']}";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:52:57.840

错误是正确的..问题不是php中的关联数组，但您没有使用有效的mysql资源

有关文档，请参阅[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

例子

```
$mysqli = new mysqli("localhost","root","","test");
$result = $mysqli->query("SELECT * FROM test");
$row = array() ;
echo "<pre>" ;
if($result->num_rows > 0)
{
    while($row = $result->fetch_array(MYSQLI_NUM))
    {
            print implode (",", $row) . PHP_EOL;

    }

} 
```

或者

```
$array = myfunction($var);
if(!empty($array))
{
    foreach($array as $key => $row)
    {
        if(is_array($row))
        {
            print implode (",", $row) . PHP_EOL;
        }
        else
        {
            print $row . PHP_EOL ;
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T11:53:01.680

您必须将资源标识符传递给 mysql_fetch_array() 函数。

就像是：

```
$sql = mysql_query('SELECT * FROM `table`');
if(!empty($array)) {

 while($row = mysql_fetch_array($array)) {
        print"$row[elem1]
        $row[elem2]";
 }
} 
```

# javascript - Javascript滚动代码

> ID：10043056
> 
> 赞同：0
> 
> 时间：2012-04-06T11:49:21.503
> 
> 标签：javascript, html

这是我想要实现的一些代码的链接。

[http://jsfiddle.net/g7gYy/12/](http://jsfiddle.net/g7gYy/12/)

我在确定代码的放置位置并使其实际工作时遇到了一些麻烦。

这是我上传的 html 文件：http: [//www.canning.co.nz/Game/testmarquee.html](http://www.canning.co.nz/Game/testmarquee.html)

我可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:50:46.000

首先，您没有将 jquery lib 添加到您的页面中添加它。

```
<script src="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

接下来将所有代码放入文档准备就绪，因为在文档准备就绪之前，您的代码已执行但元素尚未准备好执行某些操作

```
$(document).ready(function() {
    var $text = $('.text-to-scroll', $marquee);
    var textWidth = $text.width();

    var $marquee = $('#marquee');
    var marqueeWidth = $marquee.width();
    $marquee.css('height', $text.height());

    function animateLoop()
    {
        //First lets put if out of view to the left
        $text.css('left', -textWidth);
        //Now it's out of view, change it's display from none to block
        $text.css('display', 'block');

        //Now we can animate it so that if scrolls across the screen
        //http://api.jquery.com/animate/
        $text.animate({ 'left' : marqueeWidth }, 10000, 'linear', animateLoop);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:18:19.680

您的 javascript 文件链接不好。

```
<script language="JavaScript" type="text/javascript" src="marquee.js"> 
```

确保 marquee.js 文件与 testmarquee.html 页面位于同一文件夹中。

## **后期编辑：**

哦，从头开始，我错了，Mateusz 实际上是对的。：D

# python - 遍历图中所有边的算法

> ID：10043060
> 
> 赞同：7
> 
> 时间：2012-04-06T11:49:29.557
> 
> 标签：python, graph-theory, traversal, model-based-testing

作为一个个人复活节项目，我正在尝试在工作中实施一些基于模型的测试。我有一个用 python 实现的图，我需要遍历所有边/执行图的所有转换，至少一次。遍历一条边两次或更多次并不重要，但我需要在同一个节点中开始和结束，并返回一系列边/过渡。

更简单的算法 > 最短序列。

我环顾四周，发现了很多算法，但我找不到适合我的一个/一个组合。如果有人能指出我正确的方向或给我一些关于如何做到这一点的提示，那就太好了。

我的图形实现如下所示：

```
graph = {
    A : {'IDLE': 't8', 'B': 't2', 'C': 't4'},
    B : {'A': 't3', 'C': 't4', 'IDLE': 't6'},
    C : {'A': 't5', 'IDLE': 't7', 'B': 't2'},
    IDLE : {'A': 't1'}
} 
```

![图形](../Images/5e7df95dc63f69b8762c5e4f1f7ac10b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T11:58:37.420

**方法一**

您可以将图 G 更改为新图 G'，其中 G 中的每条边都成为 G' 中的节点。如果“A -> t1 -> B -> t2 -> C”在 G 中对于某些 A、B 和 C 是可能的，则在 G' 中创建从 t1 到 t2 的边。

然后你需要在 G'中找到一个[路径覆盖。](http://en.wikipedia.org/wiki/Path_cover)

**方法二**

*   您的位置 P 最初是某个节点 P0（例如空闲）。
*   对于每条边 T（从 A 到 B），找到从 P 到 A 的任意路线，然后使用 T 到 B。将 P 更新为 B。
*   最后找到从 P 回到 P0 的任何路线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-03T15:05:05.123

这个问题与旅行商问题不同。相反，它被称为中国邮递员问题。最大的不同是 TSP 想要访问 CPP 想要访问所有边（街道）的所有节点（城市）。

可以在这里找到一个完美的教程：[https ://www.datacamp.com/community/tutorials/networkx-python-graph-tutorial](https://www.datacamp.com/community/tutorials/networkx-python-graph-tutorial)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:02:09.857

对于图中的每个 P1、P2 点，找到所有 R 条道路，其中 R 如下所示：

R = (P1, Pf1, ..., Pfn, P2)

对于从 P1 到 P2 的每条 R1、R2 道路，如果 Intersection(R1, R2) 有超过 0 个点（当然 P1 和 P2 除外），则确定哪个更短。如果 R1 的长度小于 R2 的长度，则忘记 R2，否则忘记 R1。

在一次迭代中，您会发现从 P1 到 P2 的最短的完全独立的道路。如果你想穿越一条路，你有点 (P1, ..., Pk) 如果我们选择 Pi，其中 1<= i <= k，我们知道第一个点是 Pi，最后一个点是也被Pi。

假设顺序无关紧要。每当您遍历一个点时，将其标记为已遍历。如果某个点被标记为已遍历，则您不会想再次前往给定点，但如果有必要，您不会介意再次遍历该点。因此，规划的道路将是：Pf1，...，Pfk，Pf1。

对于每个 Pfj，Pfm：

我们此刻在 Pfj。如果Pfm被遍历了那么我们不想再去Pfm，所以我们去下一次迭代

如果不遍历 Pfm，我们有从 Pfj 到 Pfm 的 R1，...，Rq 路。选择未经过点数最多且已经过道路数最少的道路。您需要通过一个聪明的想法来衡量道路中未经过点和经过点的重要性（希望您的权重可以最小化从 Pf1 到 Pf1 的道路总长度）。

请注意，不应将 Pf1 标记为已遍历，因为您希望在算法结束时到达那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T12:35:47.913

我不确定您是想要算法还是想知道如何完成工作。如果是后者，您可以使用[networkx](http://networkx.lanl.gov/index.html)。

下载并安装 networkx 后，您可以尝试以下操作

```
>>> import networkx as nx
>>> DG=nx.DiGraph()
>>> def CycleFrom(G,node):
    return sorted((c for c in nx.simple_cycles(DG) if node in c), key=len)[0]

>>> for (stnode, edges) in graph.items():
    for (ennode,edge) in edges.items():
        DG.add_edge(stnode,ennode,name=edge)

>>> for node in DG.nodes():
    print "Cycles from {0} is {1}".format(node,CycleFrom(DG,node))

Cycles from A is ['A', 'IDLE', 'A']
Cycles from IDLE is ['A', 'IDLE', 'A']
Cycles from B is ['A', 'B', 'A']
Cycles from C is ['A', 'C', 'A']
>>> 
```

# objective-c - 为 uitableview 中的每个 uitableviewcell 设置背景图像

> ID：10043061
> 
> 赞同：0
> 
> 时间：2012-04-06T11:49:33.033
> 
> 标签：objective-c, image, uitableview, background, cell

好吧，我有一个 uitableview，其中有 4 个包含内容的单元格，因此显示了 4 个单元格，而其他 4 个单元格显示没有内容以适应屏幕。我希望我的 uitableview 中的所有单元格都有一个背景图像（所有单元格都相同）。当我在 cellForRowAtIndexPath 方法上更改单元格的背景时，只有 4 个有内容的单元格获得背景图像，而其他 4 个没有内容的单元格仍然是白色的。有什么方法可以将背景设置为所有单元格，而不仅仅是包含内容的单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:10:23.093

增加该部分中的行数.. 假设您想要 100 个单元格来获取背景图像...然后将为 100 个单元格调用 cellforRowAtIndex 路径，因此将设置背景..

希望它有效让我知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:01:36.980

您可以将另外四个单元格作为空白单元格添加到表格视图中。这样，它们看起来仍然与您的其他细胞之一完全一样。另一种方法可能是使单元格更大，这将使您需要使用更少的“填充”单元格。

希望这可以帮助！

# css - CSS 向左、向右、向左、向右浮动……全部到顶部

> ID：10043064
> 
> 赞同：0
> 
> 时间：2012-04-06T11:49:37.990
> 
> 标签：css, css-float

我知道这个问题的可怕标题。对不起。

我有四个[与此类似的](http://jsfiddle.net/eZGTm/)div 。我想要做的只是让 div 编号 2 和 4 之间的垂直空间被删除，而不改变 HTML 的结构。是否可以仅使用 CSS（当然没有负边距或其他非通用解决方案）？在 div 2 比 1 长的情况下，我还希望 div 1 和 3 没有垂直空间。

期望的结果在图形上看起来[像这样](http://jsfiddle.net/smgdm/)。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:58:47.247

好吧，不仅仅是花车。那将是使用绝对定位，或更改 html 的结构，使您的 div 编号 #2 和 #3 野兔右浮动，然后在 div #4 上左浮动。

绝对定位和负边距是另一种选择，不是很动态，但它有效。

最好的选择是使用一些 jQuery 来解决您的问题。退房： http: [//masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:52:56.447

添加到第4个div的代码

```
position:relative;
top:-100px; 
```

寻找添加到第 4 个 div 的类

[http://jsfiddle.net/eZGTm/1/](http://jsfiddle.net/eZGTm/1/)

# php - php glob() 如果为空则在 Windows 上返回数组，在 linux 上没有

> ID：10043069
> 
> 赞同：5
> 
> 时间：2012-04-06T11:50:03.263
> 
> 标签：php, apache, glob

目前我有：

```
$files = array_merge(
        glob($path_ . '*.js'),
        glob($path_ . '*.css')); 
```

如果目录在 Windows 上为空，则返回一个空数组。如果它们在 linux 上为空，则不会返回任何内容。

这会在 linux 上产生此错误：Warning: array_merge() [function.array-merge]: Argument #1 is not an array

*   视窗：阿帕奇：2.2.21 PHP：5.3.10
*   Linux/Debian：Apache：2.2.16 PHP：5.3.10

经过进一步的研究和测试，我发现这是 PHP 中的一个错误：[https ://bugs.php.net/bug.php?id=53460](https://bugs.php.net/bug.php?id=53460)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:57:38.293

从[http://php.net/manual/en/function.glob.php](http://php.net/manual/en/function.glob.php)：

> 返回一个包含匹配文件/目录的数组，如果没有匹配的文件，则返回一个空数组，或者错误时返回 FALSE。

检查是否`glob($path_ . '*.js') === FALSE`在linux上。在这种情况下，可能存在权限错误或类似情况。如文档所示，如果没有错误，它应该是一个空数组。

还要检查您的文件/目录中的案例。Windows 不区分大小写，这可以解释 Windows 和 linux 之间的差异。

# ruby - 编写此请求规范的更好方法？

> ID：10043070
> 
> 赞同：0
> 
> 时间：2012-04-06T11:50:24.887
> 
> 标签：ruby, ruby-on-rails-3, rspec, capybara

我有一个看起来像这样的请求规范：

```
describe "Registering from the main page" do
  before(:each) do
    fill_in "username","my_username"
    fill_in "password","my_password"
    fill_in "password_confirmation","my_password"
    click_button "Register"
  end

  it "should have created a new user" do
    User.count.should == 1
  end

  it "should have changed the message on the homepage" do
    find("#element").value.should == "You registered!"
  end

  # ... other tests like this
end 
```

第一个问题，如何在提交表单之前确保我有 0 个用户？

其次，这`before`对我来说似乎不太正确，即使它确实有效。是否有另一种方法可以为整个注册用例编写测试？也许以某种方式重新制定之前的部分，或者我这样做的方式是否可以接受？

更新：我将其更改`before(:all)`为`before(:each)`因为测试开始失败。当我使用`before(:all)`. 你碰巧知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:25:46.493

你也可以写成

```
expect { click_button "Register" }.to change(User, :count).by(1) 
```

看看这个链接：[http ://ruby.railstutorial.org/chapters/sign-up?version=3.2#sec:tests_for_user_signup](http://ruby.railstutorial.org/chapters/sign-up?version=3.2#sec:tests_for_user_signup)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:58:44.380

您可以使用`change()`匹配器，以免事先担心计数是多少：

```
lambda { click_button("Register") }.should change{ User.count }.by(1) 
```

如果您真的希望它专门从 0 变为 1，您可以这样做：

```
lambda { click_button("Register") }.should change{ User.count }.from(0).to(1) 
```

要回答关于`before(:all)`and的问题`before(:each)`，`before(:each)`将在每个示例（`it`块）之前调用一次，而在块中的所有示例之前只`before(:all)`调用**一次**`describe`。这就是为什么`before(:all)`通常不建议这样做的原因，因为如果您的任何示例更改了初始状态的某些内容，那么以后的示例将受到影响。

# c - OpenCL 内核参数结构的值为零

> ID：10043075
> 
> 赞同：1
> 
> 时间：2012-04-06T11:50:40.087
> 
> 标签：c, struct, opencl

我有几个关于 OpenCL 的问题（总菜鸟），但我认为如果我设法解决这个问题，我将能够解决其他一些问题。我有以下内核，我想将由结构数据计算出的数字存储在双精度数组中。我传递给内核的参数是一个结构数组并且被初始化并且值非零（我测试过它）。

执行内核时，虽然我得到一个“浮点异常”。如果我做对了，这意味着 local_density 变量为零并且除法会导致错误。我不明白为什么它为零，因为在主机中的值非零。我在内核中做错了吗？

```
#pragma OPENCL EXTENSION cl_khr_fp64 : enable
typedef struct
{
double speeds[9];
} t_speed;

__kernel void prepare(__global const t_speed* cells,
                  __global const int*     obstacles,
                  __global       double*  results,
                           const unsigned int count)
{
  int pos = get_global_id(0);
  if(pos >= count) return;
  if(obstacles[pos] == 1) results[pos] = 0.00;
  else
  {
    double local_density = 0.00;
    for(int kk = 0; kk < 9; kk++)
      local_density += cells[pos].speeds[kk];
    results[pos] = (cells[pos].speeds[1] + cells[pos].speeds[5] +
                    cells[pos].speeds[8] - (cells[pos].speeds[3] +
                    cells[pos].speeds[6] + cells[pos].speeds[7])) /
                    local_density;
  }
} 
```

这也是我作为参数传递的变量的初始化。params->ny/nx 有正确的值。

```
cells = (t_speed*) malloc(sizeof(t_speed) * (params->ny * params->nx)); 
```

我还引用了单元格变量的内核参数设置。

```
m_cells = clCreateBuffer(context, CL_MEM_READ_ONLY, sizeof(t_speed) * count, NULL, NULL);
err  = clEnqueueWriteBuffer(commands, m_cells, CL_TRUE, 0, sizeof(t_speed) * count, cells, 0, NULL, NULL);
err |= clSetKernelArg(av_velocity_prepare_kernel,  0, sizeof(cl_mem), &m_cells); 
```

- - - - - - - - - - - - - - - - - - - - - 编辑 - - - - ----------------------------------

好的，真正奇怪的是，即使使用非常简单的以下内核，我也会遇到相同的错误（浮点异常）。有人有线索吗？

```
#pragma OPENCL EXTENSION cl_khr_fp64 : enable
__kernel void test(__global float*  result, const unsigned int n)
{
  int i = get_global_id(0);
  if(i >= n) return;
  result[i] += 1.0f;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:48:58.673

我注意到您将缓冲区声明为`CL_MEM_READ_ONLY`，但您正在内核内部对其进行写入。根据 OpenCL 规范，这是未定义的。尝试`CL_MEM_READ_WRITE`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:16:25.317

好的，所以这与我想象的完全不同。问题是当我打电话时

```
clEnqueueNDRangeKernel (command_queue, kernel, work_dim, *global_work_offset,     
                        *global_work_size, *local_work_size, num_events_in_wait_list,
                        *event_wait_list, *event) 
```

不能被`global_work_size`整除`local_work_size`。这导致了浮点异常。

# iphone - IOS：使用图案图像作为背景 - 内存泄漏

> ID：10043077
> 
> 赞同：2
> 
> 时间：2012-04-06T11:50:41.723
> 
> 标签：iphone, ios, uiimage, memory-leaks, cgimage

好的。我会寻找答案，可能会自己找到。我有一个讨厌的习惯，就是回答自己的问题。

在任何情况下，我都有一个设计为相当容易“换肤”的应用程序。作为其中的一部分，我在一个特定于变体的静态类中隔离了方法。这些静态方法提供特定于变体的主要应用图像、颜色和设置。.h 文件对主应用程序是通用的，但 .m 文件是特定于变体的。

我喜欢使用将图像作为背景发送的功能（自动平铺），因此接口文件将例程指定为返回 UIColor，如下所示：

```
+ (UIColor *)meetingDetailBackgroundColor; 
```

但是实现文件会加载一个图像文件，并返回它，如下所示：

```
+ (UIColor *)meetingDetailBackgroundColor
{
    return [UIColor colorWithPatternImage:[UIImage imageNamed:@"DarkWeave.png"]];
} 
```

在上下文中使用，如下所示：

```
[[self view] setBackgroundColor:[BMLTVariantDefs meetingDetailBackgroundColor]]; 
```

***注意：**编辑以恢复我使用的原始简单代码。*

现在，问题是我有时（并非总是）会泄漏。

我确定我在这里做了一些奇怪的事情。我只是不确定是什么。

有任何想法吗？

顺便说一句：这是一个 ARC 程序，在 IOS 5 上运行。我是 ARC 的新手，但我认为这是我应该这样做的方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T14:18:53.920

`UIColor colorWithPatternImage`是越野车，不要使用它。我的经验是，它往往会极大地削弱设备上的性能，而不是模拟器上的性能。任何诸如滚动或动画之类的东西都会变慢。我不确定这是否真的符合泄漏的条件，我没有看到 App 因为 RAM 用完而被杀死。但是，如果您分析应用程序，您会发现应用程序在`UIColor colorWithPatternImage`启用和绘制某些内容时运行速度要慢得多。

最终我创建了一个子类`UIView`，并做了这样的事情：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef c = UIGraphicsGetCurrentContext();
    CGContextSetBlendMode(c, kCGBlendModeCopy);
    CGContextDrawTiledImage(c, CGRectMake(0, 0, bkgnd.size.width, bkgnd.size.height), bkgnd.CGImage);
} 
```

这将平铺图像。然后我要么使用它，`self.tableView.backgroundView`要么`[self.view insertSubview:bkgnd atIndex:0]`让它成为背景。它在设备上运行得更快，并导致零内存泄漏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T15:56:52.077

初始化共享颜色的最佳方法是这样的：

```
+ (UIColor *)color
{
    static UIColor *color;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        color = [[UIColor alloc] init...];
    });
    return color;
} 
```

它是线程安全的，并且只初始化一次颜色。这样，您就无法泄漏颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T12:28:37.880

好的。我*解决了*这个问题，但我没有*解决*它。

我踢了。

确实，Instruments 做出了疯狂的猜测。我指定颜色的方式没有任何问题（但是，我喜欢这里的一个建议，并以这种方式重新设置了我的颜色规范）。

这似乎是一个非常小的泄漏，埋在 MapKit 的深处（我的意思是字面意思）。我似乎完全无法解决它。

经过几个小时的砖墙/新皮质交互，我放弃了，让屏幕控制器对象可重用。我只是把它放在一边，并改变内容以适应被检查的会议。

这会推迟泄漏，直到应用程序关闭。

我真是个懦夫。

谢谢。

# javascript - 通过浏览器关闭/注销时的 JavaScript 代码

> ID：10043084
> 
> 赞同：2
> 
> 时间：2012-04-06T11:51:10.580
> 
> 标签：javascript

```
<script type="text/javascript">
    leaveSiteStart = new Date;
    function leftSite() {
        var leaveSiteEnd = (new Date - leaveSiteStart);
        var roundleaveSiteEnd = Math.round(leaveSiteEnd, 1);
        _gaq.push(['pageTrackerTime._trackEvent', 'Category', 'Action', document.getElementById('Name').value]);
    }
    window.onbeforeunload = leftSite;
</script> 
```

我已经使用此代码来执行用户在关闭浏览器或退出页面之前在页面上花费的持续时间。

但它未能捕捉到事件......代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:44:11.287

Because `_gaq` is an asynchronous call, the browser won't wait until the call is completed, so try to do some synchronous call.

In [jQuery ajax](http://api.jquery.com/jQuery.ajax/) you can do sync task by setting async flag to false, check if there is same way to do that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:26:04.360

在现代浏览器中，捕捉用户离开基本上是不可能的。回到FF4出来的时候，他们打破了使用定时while循环来暂停退出的方式。

# checkbox - 列表视图 ABAP 中的复选框

> ID：10043088
> 
> 赞同：1
> 
> 时间：2012-04-06T11:51:23.547
> 
> 标签：checkbox, abap

![例子](../Images/2200761282de8691173e084b20805800.png)

我想做一件简单的事情，但我没有任何想法。我在 GUI 状态下制作了一个按钮，它有一个功能键，它可以工作。现在是真事。我希望为我标记的每个复选框，当我按下按钮调用一个新屏幕以仅显示已检查的条目时。

该复选框已添加到 itable 中，但我认为这并不重要。如何告诉按钮屏幕上哪些复选框被选中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:43:26.400

答案与伯纳德所说的差不多，尽管缺少一些细节。

你需要知道你写了多少行，它存储在 SY-LINNO 中，注意你还需要考虑你输出了多少页存储在 SY-PAGNO 中，以及一个页面上有多少行是存储在 SY-LINCT 中。

您可以使用“DESCRIBE LIST”获取该信息，这可能是一种更好的方法。

然后对于使用“READ LINE”命令的每一行，您可以找到复选框的值。

```
READ LINE line OF PAGE page [result]. 
```

从那里开始，事情应该是小菜一碟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:31:55.610

对于选中的记录，复选框字段是'X'，而对于未选中的记录，复选框字段是空格（''）。因此，您需要遍历屏幕上的记录，然后仅显示复选框等于“X”的记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T12:59:29.020

除了您已经得到的所有答案之外，您不想更深入地研究交互式列表编程（除非您必须为编程练习这样做）。查看[ALV 对象模型文档](http://help.sap.com/saphelp_nw04/helpdata/en/5e/88d440e14f8431e10000000a1550b0/frameset.htm)和 SALV_DEMO_* 示例程序。

# c# - 在 VMWare 下访问 Ubuntu 中的 IIS 托管网站

> ID：10043092
> 
> 赞同：0
> 
> 时间：2012-04-06T11:51:40.290
> 
> 标签：c#, asp.net, iis, vmware, virtualization

所以问题是，我在我的 Windows 7 Ultimate OS 中的 IIS 中托管了一个 ASP.NET 和 C# 网站。我不需要能够从 ubuntu 访问同一个站点，它实际上是在 VMWare 下运行的虚拟化操作系统。

我可以在我的 Windows 7 电脑上毫无问题地访问该网站。但在 Ununtu 内部似乎没有办法做到这一点。

我在很多论坛上搜索了相同的内容，没有运气！禁用防火墙（实际上）以确保没有出现安全问题但仍然无法执行所需的操作。

这是错误：

```
Server not found
          Firefox can't find the server at www.google.com.

      Check the address for typing errors such as
        ww.example.com instead of
        www.example.com
      If you are unable to load any pages, check your computer's network
        connection.
      If your computer or network is protected by a firewall or proxy, make sure
        that Firefox is permitted to access the Web. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T11:56:36.430

vm可以访问主机吗？如果您使用`NAT`连接模式似乎无法与主机通信。试试`Bridge`？

# scala - foreach 在方法中返回值

> ID：10043095
> 
> 赞同：3
> 
> 时间：2012-04-06T11:51:56.137
> 
> 标签：scala, methods, foreach

```
def a: Int = {
  for(i <- Array(1,2,3,4,5)){
    if(i == 3)
      return i
  }
} 
```

上面的方法不会编译，我得到以下错误：

```
error: type mismatch;
 found   : Unit
 required: Int
       for(i <- Array(1,2,3,4,5)){
             ^ 
```

预期的行为是该方法返回 3。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T11:56:11.850

那是因为您的 lambda`foreach`确实保证返回一个值。如果您提供默认返回值，它应该可以工作。

```
def a: Int = {
  for(i <- Array(1,2,3,4,5)){
    if(i == 3)
      return i
  }
  0
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:58:57.620

这是因为没有 else 或默认返回值。

如果方法的返回类型为 Int，则该方法中的所有路径都必须返回 Int。在您的实施中并非如此。例如，如果 Array 中没有数字 3，则不会返回任何内容，这意味着返回类型将为 Unit。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-10T19:21:00.503

不要在 #Scala 中使用 Return。return 关键字不是“可选的”或“推断的”；它改变了你程序的含义，你永远不应该使用它。

[https://tpolecat.github.io/2014/05/09/return.html](https://tpolecat.github.io/2014/05/09/return.html)

# javascript - 如何在javascript中关闭\隐藏弹出表单窗口？

> ID：10043097
> 
> 赞同：-6
> 
> 时间：2012-04-06T11:52:19.930
> 
> 标签：javascript

`javascript:Element.hide($("div1"));`
不是从弹出表单工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:23:15.510

确保您的 HTML 标头中包含 JQuery，请尝试以下操作：

```
 javascript:$("#div1").hide(); 
```

我注意到您错过了 id 或 . 为类参考。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <!--DVID=00002304-->
    <html>
        <head>
            <script src="/Scripts/jquery-1.7.1.js" type="text/javascript"></script>
        </head>
        <body>
            <div id="div1" style='position:absolute;display:none;'>
                <div onclick="$('#Iframe1').hide();" style="color:#FFF;font-weight:bold;float:right">
                    Close
                </div>
                <iframe id="Iframe1" src="" frameBorder="no" >
                    ... IFrame content goes here ...
                </iframe>
            </div>
        </body>
    </html> 
```

# ios - 如何知道用户的哪些 Facebook 好友安装了我的应用程序？

> ID：10043099
> 
> 赞同：1
> 
> 时间：2012-04-06T11:52:28.120
> 
> 标签：ios, facebook

是否可以执行以下操作？我想创建一个 iOS 应用程序，它允许用户查看他们的所有 Facebook 朋友，这些朋友已经在他们的 Facebook 列表中拥有这个应用程序。是否可以通过[Facebook Connect](http://en.wikipedia.org/wiki/Facebook_Platform#Facebook_Connect)或[Graph API](http://en.wikipedia.org/wiki/Facebook_Platform#Graph_API)或其他方式实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T12:01:28.923

是的，这是可能的。

1.  您需要维护自己的数据库，了解谁安装了该应用程序。
2.  当用户安装应用程序时，他们通过其中一个 API 连接到 Facebook，获取他们的用户 ID，并将其提交到您的数据库，并带有用户安装应用程序的标志。
3.  然后，您通过其中一个 API 向 Facebook 询问该用户的朋友 ID 列表，然后询问您的数据库是否有任何这些 ID 设置了相关的标志。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T02:03:56.723

如果您遵循 Facebook 教程*[iOS 教程](http://developers.facebook.com/docs/mobile/ios/build/)*。

您应该可以访问`AppDelegate.m`文件中的“facebook”对象。该“facebook”对象已经使用您的特定应用程序 ID 进行了注册。然后您可以使用它来查询当前用户的已安装应用程序的朋友。

这是用于检索朋友数据的 Facebook 查询：

```
NSString *fql = [NSString stringWithFormat:@"Select name, uid, pic_small from user where is_app_user = 1 and uid in (select uid2 from friend where uid1 = %@) order by concat(first_name,last_name) asc", _replace_this_with_the_fb_id_of_the_current_user_ ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T16:09:38.127

是的，您可以使用 GraphAPI 使用新的 Facebook SDK 3.5 及更高版本（2013 年 6 月）来实现。您可以稍后根据需要使用 deviceFilteredFriends 可变数组...

```
// The Array for the filtered friends
NSMutableArray *installedFilteredFriends = [[NSMutableArray alloc] init];

// Request the list of friends of the logged in user (me)
[[FBRequest requestForGraphPath:@"me/friends?fields=installed"]
 startWithCompletionHandler:
 ^(FBRequestConnection *connection,
   NSDictionary *result,
   NSError *error) {

     // If we get a result with no errors...
     if (!error && result)
     {
         // here is the result in a dictionary under a key "data"
         NSArray *allFriendsResultData = [result objectForKey:@"data"];

         if ([allFriendsResultData count] > 0)
         {
            // Loop through the friends
            for (NSDictionary *friendObject in allFriendsResultData) {
               // Check if installed data available
               if ([friendObject objectForKey:@"installed"]) {

                  [installedFilteredFriends addObject: [friendObject objectForKey:@"id"]];
                     break;
                }
             }
          }
      }
 }]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-10T13:45:56.050

使用 Facebook 登录，然后询问用户的朋友。您只会得到那些安装了请求应用程序的应用程序（它曾经返回所有带有“已安装”标志的朋友）

# haskell - 如何捕捉解压 IOError？

> ID：10043102
> 
> 赞同：5
> 
> 时间：2012-04-06T11:52:40.927
> 
> 标签：haskell, gzip

我写了这个代码片段来读取一个可能被压缩的文件：

```
import Codec.Compression.GZip
import IO -- using IO.try

read file = do
  let f = L.readFile file
  let c = fmap decompress $ f

  unzipped <- try c

  case unzipped of
    Right b -> return b
    Left  _ -> f 
```

它编译得很好，但似乎这不是处理未压缩文件的有效方法。在压缩文件上运行代码效果很好，但未压缩文件失败并出现异常：

```
*** Exception: Codec.Compression.Zlib: incorrect header check 
```

关于如何使这成为可能的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T15:59:15.247

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T13:40:43.117

你可能想看看[spoon](http://hackage.haskell.org/package/spoon)`Nothing` ，如果抛出异常，你可以得到它。

# php - MAMP pro PHP 错误处理悲痛

> ID：10043112
> 
> 赞同：0
> 
> 时间：2012-04-06T11:53:09.167
> 
> 标签：php, mamp, localserver

所以mamp pro全部使用PHP 5.3.6设置/缓存是XCache，错误处理设置为显示启动错误-写入所有错误和警告-设置为显示和日志都选中。

重启服务器，故意写了一些代码，应该会带来一个错误..

```
<?php
   echo stupid;
?> 
```

是的，这就是代码中的全部内容。我什么都得不到！没有错误，只有在日志中。我不想让我的控制台一直打开以观察错误，我希望它们打印在屏幕上。

我可以让它工作的唯一方法是在每个 PHP 文件的顶部对此代码执行 INCLUDE。

```
error_reporting(E_ALL);
init-- yad yada ('display_errors', 'on'); 
```

从我在其他地方阅读的内容来看，这似乎是一个大问题。那么如何设置我的 mamp pro PHP.INI 文件以正常工作并直接打印到我的浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:52:41.077

我在 MAMP/bin/php/php5.3.6/conf/php.ini 中更改了它

您可以更改 display_errors 和 display_startup_errors

# android - 我怎样才能在android上做运动地理点？

> ID：10043116
> 
> 赞同：0
> 
> 时间：2012-04-06T11:53:34.253
> 
> 标签：android, location, android-mapview, point, geo

我想在 mapview 上显示用户位置，我可以。但是当用户此时移动到另一个位置时，我无法更新地理点 - 当查看地图时 - 我该怎么做？

```
 List<Overlay> mapOverlays = mapView.getOverlays();
     Drawable drawable = this.getResources().getDrawable(resID);
     HelloItemizedOverlay itemizedoverlay = new        HelloItemizedOverlay(drawable,this);
     GeoPoint point = new GeoPoint((int)latd,(int)lond);
     OverlayItem overlayitem = new OverlayItem(point, name, name);
     itemizedoverlay.addOverlay(overlayitem);
     mapOverlays.add(itemizedoverlay); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:23:37.357

在你`onLocationChanged()`的`Location Listener`你需要再次编写相同的代码，

```
 List<Overlay> mapOverlays = mapView.getOverlays(); 
     mapOverlays.clear() // add this to remove previous
     Drawable drawable = this.getResources().getDrawable(resID); 
     HelloItemizedOverlay itemizedoverlay = new        HelloItemizedOverlay(drawable,this); 
     GeoPoint point = new GeoPoint((int)latd,(int)lond); 
     OverlayItem overlayitem = new OverlayItem(point, name, name); 
     itemizedoverlay.addOverlay(overlayitem); 
     mapOverlays.add(itemizedoverlay); 
```

# wix - Wix 安装程序 - 无法卸载 perUser 软件包

> ID：10043117
> 
> 赞同：0
> 
> 时间：2012-04-06T11:53:34.187
> 
> 标签：wix, windows-installer

安装 perUser msi 包后，我无法卸载它。

![卸载时出错](../Images/a83708c9d31c42f24aad5a5671a1e53f.png)

选择`Browse`我安装的 ( ) 包时出现错误：“所选包不是此产品的有效包”。这是我的代码：

```
<?xml version='1.0'?><Wix xmlns='http://schemas.microsoft.com/wix/2006/wi'>
   <Product Id='a871a539-5954-44b7-810d-caed5d09e4c5' Name='x' Language='1033'
            Version='1.1.0.0' Manufacturer='M' UpgradeCode='a871a539-5954-44b7-810d-caed5d09e4c5'>
      <Package Description='x'
                Comments='x'
                Manufacturer='x' InstallerVersion='200' Compressed='yes' InstallScope='perUser' />

  <Media Id='1' Cabinet='product.cab' EmbedCab='yes' />

  <Directory Id='TARGETDIR' Name='SourceDir'>
            <Directory Id='AppDataFolder' Name='AppData'>
                 <Directory Id='xFolder' Name='x' />
            </Directory>
        </Directory>

           <Component Id='xComponent' Guid='a871a539-5954-44b7-810d-caed5d09e4c5'
                Directory='xFolder'>
            <RemoveFolder Id="Removex" On="uninstall" />
            <!-- registry entry to be used as keypath -->
            <RegistryValue Root="HKCU"
                Key="Software\M\x"
                Name="component.xcomponent.installed"
                Type="integer"
                Value="1"
                KeyPath="yes"/>

              <File Id='myFile' Name='myFile.txt' DiskId='1' Source='myFile.txt' />
... files here
</Component>
<Feature Id='xFeature' Title='x feature' Level='1'>
     <ComponentRef Id='xComponent' />
  </Feature> 
```

安装过程正常 - 没有错误。文件在正确的位置。注册表项已添加。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:38:43.073

是的——正如 Wim Coenen 所说——这个问题帮助我解决了问题。

但是，我没有在该问题中执行步骤，而是清理了注册表。问题是我安装了这个包多次更改 GUID 和其他参数，所以注册表很乱。我按制造商和名称搜索注册表。

清理后一切正常。

# php - wso2，脚本关闭时 wsf-php 分段错误

> ID：10043118
> 
> 赞同：0
> 
> 时间：2012-04-06T11:53:41.740
> 
> 标签：php, soap, wso2, wsh

我正在尝试在 Kubuntu 11.04 上使用 WSO2 Web Services Framework for PHP 2.1.0 和 php 5.3.5-1ubuntu7.7

我有最少的 php 安装、xml、xslt、lib-ssl、libaxis2c 库：

```
apt-get install php5 php5-dev php5-xsl libxml2-dev libssl-dev libaxis2c 
```

一切都很好——编译、安装、添加到包含路径。我在 php -i 输出中看到了库：

```
wsf

wsf support => enabled
wsf version => 2.1.0

Directive => Local Value => Master Value
wsf.attachment_cache_dir => /tmp => /tmp
wsf.enable_attachment_caching => 0 => 0
wsf.home => /usr/lib/php5/20090626/wsf_c => /usr/lib/php5/20090626/wsf_c
wsf.log_level => 4 => 4
wsf.log_path => /tmp => /tmp
wsf.rm_db_dir => /tmp => /tmp 
```

所以我尝试访问简单的网络服务： [http ://www.w3schools.com/webservices/tempconvert.asmx?wsdl](http://www.w3schools.com/webservices/tempconvert.asmx?wsdl)

像这样：

```
$client = new WSClient(array(
   'wsdl'=>'http://www.w3schools.com/webservices/tempconvert.asmx?wsdl'
));
$proxy = $client->getProxy();

$response = $proxy->CelsiusToFahrenheit(array('Celsius'=>11)); 
```

脚本似乎运行良好——得到 wsdl、已连接、解析响应，我可以 print_r 响应数据：

```
Array
(
    [CelsiusToFahrenheitResult] => 51.8
) 
```

然后脚本试图完成并出现分段错误：

```
[Fri Apr  6 15:42:35 2012] [info]  [rampart] rampart_mod shutdown
[Fri Apr  6 15:42:35 2012] [info]  [rahas] Rahas module shutdown
Segmentation fault 
```

如果我要评论肥皂电话，那么分段错误将消失。

有没有办法消除这个段错误？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:42:49.667

您使用的是哪个版本的 SSL？我也一直在尝试为自己解决这个问题，并遇到了这个 [https://wso2.org/jira/browse/WSFPHP-467](https://wso2.org/jira/browse/WSFPHP-467)

# facebook - 登录时自动激活用户的时间线

> ID：10043124
> 
> 赞同：-1
> 
> 时间：2012-04-06T11:54:02.747
> 
> 标签：facebook, facebook-javascript-sdk, facebook-opengraph, facebook-timeline

我正在使用 JavaScript SDK 通过 Facebook 在我的网站上登录用户，需要`publish_actions`许可。如果我做对了，使用发布的 Open Graph 故事`publish_actions`仅对启用了时间线的用户可见。

是否可以在用户登录我的应用程序并授予我`publish_actions`权限后自动激活用户的时间线。我已经在网络上看到了应用程序请求`publish_actions`权限的身份验证对话框，在授予权限并登录后，用户会自动启用新的时间线。

我已经搜索了很多，但不幸的是，我在开发人员文档中找不到任何关于如何做到这一点的内容。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:25:35.903

如果您请求`publish_actions`用户的许可并且您的操作得到 Facebook 的批准，您谈论的消息将出现在登录弹出窗口中。Facebook 会自动添加此消息，因为这些功能仅适用于新的时间线配置文件。您无需配置任何设置即可添加此消息。

![升级讯息](../Images/6c63d27367bce2811e648d334f9f58a7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:16:45.263

您描述的是**修改**用户设置的意图，您不能这样做。

# c# - 需要有关 ASPX 网站自动化的指导

> ID：10043125
> 
> 赞同：-1
> 
> 时间：2012-04-06T11:54:04.143
> 
> 标签：c#, asp.net, internet-explorer, automation

NET ASPX Timesheet 网站自动化，我必须检测用户何时按下提交按钮并自动发送电子邮件。

不幸的是，我们无权访问任何网站代码。只是我们可以在 Internet Explorer 中使用的网站。

如何检测按钮按下？我应该如何进行？我需要编写一些自定义浏览器插件吗？

谢谢，阿尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:10:35.797

这是没有意义的，你问的是如何在不访问网站代码或服务器的情况下访问网站会话。我不认为这是可以做到的，事实上，如果可以的话，我会感到非常惊讶。

想想隐私问题。

# mysql - MySQL 查询共同好友

> ID：10043135
> 
> 赞同：10
> 
> 时间：2012-04-06T11:55:00.377
> 
> 标签：mysql, sql, mutual-friendship

> **可能重复：**
> [MYSQL 选择共同的朋友](https://stackoverflow.com/questions/8906154/mysql-select-mutual-friends)

我有一张友谊表，友谊只存储在一行中。所以没有重复的条目。

```
id  Person1    Person2  status
1         1          2  friend
2         1          3  friend
3         2          3  friend
4         3          4  friend 
```

什么 MySQL 查询（join、inner join）可以帮助我找到第 1 个人和第 3 个人之间的共同（共同）朋友？此示例中的输入是 {1,3}，输出应该是 {2}，因为 Person #2 是 bot #1 和 #3 的朋友。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T16:45:28.260

好吧，到目前为止，唯一可行的查询是 Simon 的……但这确实有点矫枉过正——如此复杂的令人讨厌的查询（2 个子查询和 2 个联合！）对于如此简单的事情，您需要悬赏？:-) 如果您有 1000 多个用户，那么查询会非常慢 - 请记住，它是二次的，并且由于子查询中的联合，几乎不会使用任何索引！

我建议重新考虑设计并允许 2 行重复以建立友谊：

```
id  Person1    Person2  status
1         1          2  friend
2         2          1  friend
3         1          3  friend
4         3          1  friend 
```

您可能认为这是低效的，但以下简化将允许将查询重写为简单的连接：

```
select f1.Person2 as common_friend
from friends as f1 join friends as f2
    using (Person2)
where f1.Person1 = '$id1' and f2.Person1 = '$id2' 
    and f1.status = 'friend' and f2.status = 'friend' 
```

这会很快！（不要忘记为 Person1,2 添加索引。）[我已经建议在其他非常讨厌的数据结构中进行类似的简化（将子查询重写为联接），它已经加快了](https://stackoverflow.com/a/9982157/684229)从永恒到闪电战的查询！

所以可能看起来很大的开销（一个友谊2行）实际上是一个很大的优化:-)

此外，它还将使诸如“查找 X 的所有朋友”之类的查询更加容易。并且不需要花费更多的赏金:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:47:38.987

再来一个答案。

```
select 
    (case when f1.person1 = 1 then f1.person2 else f1.person1 end) as fid
from friends f1
where f1.person1 = 1 or f1.person2 = 1
and f1.status = 'friend'

intersect

select 
    (case when f1.person1 = 3 then f1.person2 else f1.person1 end) as fid
from friends f1
where f1.person1 = 3 or f1.person2 = 3
and f1.status = 'friend' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T14:29:59.273

如果这些条件不满足使其工作所需的少量调整，则此查询的工作假设是友谊表中没有自我交友且没有重复。

```
SELECT fid FROM 
(
    --FIRST PERSON (X) FRIENDLIST
    SELECT 
        (CASE WHEN Person1 = X THEN Person2 ELSE Person1 END) AS fid
    FROM Friendships WHERE (Person1 = X OR Person2 = X) AND status = "friend"
    UNION ALL --DO NOT REMOVE DUPLICATES WITH ALL JOIN
    --SECOND PERSON (Y) FRIENDLIST
    SELECT 
        (CASE WHEN Person1 = Y THEN Person2 ELSE Person1 END) AS fid
    FROM Friendships WHERE (Person1 = Y OR Person2 = Y) AND status = "friend"
) FLIST
GROUP BY fid
HAVING COUNT(*) = 2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T15:47:27.500

```
set search_path='tmp';

DROP TABLE friendship CASCADE;
CREATE TABLE friendship
        ( id integer not null PRIMARY KEY
        , person1 integer not null
        , person2 integer not null
        , status varchar
        , CONSTRAINT pk1 UNIQUE (status,person1,person2)
        , CONSTRAINT pk2 UNIQUE (status,person2,person1)
        , CONSTRAINT neq CHECK (person1 <> person2)
        );

INSERT INTO friendship(id,person1,person2,status) VALUES
 (1,1,2,'friend' ) ,(2,1,3,'friend' ) ,(3,2,3,'friend' ) ,(4,3,4,'friend' )
        ;

        -- -----------------------------------------
        -- For implementations that don't have CTEs, 
        -- a view can be used to emulate a CTE.
        -- -----------------------------------------
CREATE VIEW flip AS (
        SELECT person1 AS one
                , person2 AS two
        FROM friendship WHERE status = 'friend'
        UNION
        SELECT person2 AS one
                , person1 AS two
        FROM friendship WHERE status = 'friend'
        );

SELECT DISTINCT
        f1.two AS common
FROM flip f1
JOIN flip f2 ON f1.two = f2.two
WHERE f1.one = 1
AND f2.one = 3
        ;

DROP VIEW flip;

        -- ------------------------------
        -- The same query with a real CTE
        -- ------------------------------
with flip AS (
        SELECT person1 AS one
                , person2 AS two
        FROM friendship WHERE status = 'friend'
        UNION
        SELECT person2 AS one
                , person1 AS two
        FROM friendship WHERE status = 'friend'
        )
SELECT DISTINCT
        f1.two AS common
FROM flip f1
JOIN flip f2 ON f1.two = f2.two
WHERE f1.one = 1
AND f2.one = 3
        ; 
```

结果：

```
SET
DROP TABLE
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "friendship_pkey" for table "friendship"
NOTICE:  CREATE TABLE / UNIQUE will create implicit index "pk1" for table "friendship"
NOTICE:  CREATE TABLE / UNIQUE will create implicit index "pk2" for table "friendship"
CREATE TABLE
INSERT 0 4
CREATE VIEW
 common 
--------
      2
(1 row)

DROP VIEW
 common 
--------
      2
(1 row) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T23:24:06.730

内部查询仅获取第一个人的 FRIEND ID，并将其标准化为单个列“FriendID”。如果找到的记录在第一个位置有人员 ID = 1，它会抓取第二个......如果在第二个位置有人员 ID = 1，那么它会抓取第一个。

完成后，我们知道谁是第 1 个人的唯一朋友列表……完成。现在，再次加入友谊表，但仅限于那些 FIRST 有资格成为第 1 个人的朋友之一的人......一旦有资格，然后确保第二张桌子上的另一个人是第 3 个人你在寻找共同点。

确保在 person1 和 person2 上都有一个索引，以利用 OR 条件。

```
select
      JustPerson1Friends.FriendID
   from
      ( select
              if( f.Person1 = 1, f.Person2, f.Person1 ) as FriendID
           from
              Friendships f
           where
                   (    f.Person1 = 1
                     OR f.Person2 = 1 )
               AND f.status = "friend" ) JustPerson1Friends
      JOIN Friendships f2
         on  (   JustPerson1Friends.FriendID = f2.Person1
              OR JustPerson1Friends.FriendID = f2.Person2 )
         AND f2.status = "friend"
         AND ( f2.Person1 = 3 OR f2.person2 = 3 ) 
```

另一种选择将人“3”作为常见的人预先标记到结果集中，因此我们以后不需要明确限定 3。此外，通过使用 MySQL 变量，易于编写脚本并作为参数实现。在内部查询之后，对友谊进行 DOUBLE left-join 以明确测试可以在 X/Y 或 Y/X 组合中找到一个人的 BOTH 组合。所以最后的 where 子句只是说只要在 EITHER LEFT-JOIN 条件中找到一条记录，它就是一个共同的朋友并包含在结果集中。

```
select
      JustPerson1Friends.FriendID
   from
      ( select
              @WantPerson2 as FindInCommonWith,
              if( f.Person1 = @WantPerson1, f.Person2, f.Person1 ) as FriendID
           from
              ( select @WantPerson1 := 1,
                       @WantPerson2 := 3 ) sqlvars
              Friendships f,
              (
           where
                   (    f.Person1 = @WantPerson1
                     OR f.Person2 = @WantPerson2 )
               AND f.status = "friend" ) JustPerson1Friends

      LEFT JOIN Friendships f2
         on JustPerson1Friends.FindInCommonWith = f2.Person1
         AND JustPerson1Friends.FriendID = f2.Person2
         AND f2.status = "friend"

      LEFT JOIN Friendships f3
         on JustPerson1Friends.FindInCommonWith = f2.Person2
         AND JustPerson1Friends.FriendID = f2.Person1
         AND f2.status = "friend"
   where
         f2.Person1 > 0
      OR f3.Person1 > 0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T18:13:09.310

如果各种回复或评论之一已经提出了这一点，我深表歉意，但是如何：

```
select Person2 mutual_friend from 
  (select Person1, Person2 from friends 
      where Person1 in (1,3) union 
   select Person2, Person1 from friends 
      where Person2 in (1,3)
  ) t 
  group by Person2 having count(*) > 1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-19T05:34:39.720

此查询返回 '22' 作为结果，因为它对于 1 和 3 都很常见 您可能必须过滤掉不同的 PERSON1/PERSON2 如果我可以优化此查询，我会更新它

```
 SELECT DISTINCT (REPLACE(TRANSLATE((WM_CONCAT(DISTINCT F.PERSON1) || ',' ||
                                           WM_CONCAT(DISTINCT F.PERSON2)),
                                           '1,3',
                                           ' '),
                                 ' ',
                                 '')) AS COMMON_FRIEND
          FROM FRIENDSHIP F
         WHERE UPPER(F.STATUS) = 'FRIEND'
         AND ((SELECT DISTINCT WM_CONCAT(F1.PERSON1)
                   FROM FRIENDSHIP F1
                  WHERE F1.PERSON2 = '3') LIKE ('%' || F.PERSON1 || '%') OR
               (SELECT DISTINCT WM_CONCAT(F1.PERSON2)
                   FROM FRIENDSHIP F1
                  WHERE F1.PERSON1 = '3') LIKE ('%' || F.PERSON2 || '%'))
           AND ((SELECT DISTINCT WM_CONCAT(F1.PERSON1)
                   FROM FRIENDSHIP F1
                  WHERE F1.PERSON2 = '1') LIKE ('%' || F.PERSON1 || '%') OR
               (SELECT DISTINCT WM_CONCAT(F1.PERSON2)
                   FROM FRIENDSHIP F1
                  WHERE F1.PERSON1 = '1') LIKE ('%' || F.PERSON2 || '%'))
           AND NOT ((F.PERSON1 = '1' AND F.PERSON2 = '3') OR
                (F.PERSON1 = '3' AND F.PERSON2 = '1'))
            回答 #8

赞同：0

时间：2012-04-06T12:18:02.200

我认为这很简单

```
SELECT * FROM friends

WHERE
     (Person1 = '1' or Person2 = '1') && 
     (Person1 = '2' or Person2 = '2') &&
     status = 'friend' 
```

鉴于您正试图在人 1 和 2 之间找到相互

            回答 #9

赞同：0

时间：2012-04-16T16:09:18.917

我问过编号较小的用户是否总是`Person1`，但我最后写了一个不关心是否属实的查询。

```
set @firstParty = 1, @secondParty = 3

select friends_of_first.friend
from (
    select Person2 as friend from friends where Person1 = @firstParty
    union 
    select Person1 as friend from friends where Person2 = @firstParty
    ) as friends_of_first
join (
    select Person2 as friend from friends where Person1 = @secondParty
    union 
    select Person1 as friend from friends where Person2 = @secondParty
    ) as friends_of_second
on friends_of_first.friend = friends_of_second.friend 
```

查找用户朋友的子查询可以替换为@NirmalthInk beYond 使用的子查询：

```
select case when f1.person1 = @firstParty then  f1.person2 else f1.person1 end 
from friend f1 where f1.person1 = @firstParty or f1.person2 = @firstParty 
```

我很想知道哪种替代方案表现更好。

            回答 #10

赞同：-1

时间：2012-04-19T14:49:59.067

```
id  Person1    Person2  status
1         1          2  friend
2         1          3  friend
3         2          3  friend
4         3          4  friend

  SELECT
    DISTINCT
    F1.Person
  FROM
    --Friends of 1
    (
    SELECT F.Person1 Person FROM People F WHERE F.Person2 = 1 AND F.status = 'friend'
    UNION
    SELECT F.Person2 Person FROM People F WHERE F.Person1 = 1 AND F.status = 'friend'
    ) F1
    INNER JOIN
    (
    --Friends of 3
    SELECT F.Person1 Person FROM People F WHERE F.Person2 = 3 AND F.status = 'friend'
    UNION
    SELECT F.Person2 Person FROM People F WHERE F.Person1 = 3 AND F.status = 'friend'
    ) F2 ON
      F2.Person = F1.Person 
```

输出：

```
Person
2 
```

            回答 #11

赞同：-1

时间：2012-04-06T13:00:46.193

这应该回答您当前的问题，尽管我建议不要这样做。在这种情况下，我总是选择存储两个关系副本，每个方向一个。

```
SELECT IF(f1.person1 IN ($id1, $id3), f1.person2, f1.person1) AS mutual_friend
FROM friends f1
INNER JOIN friends f2
    ON (f1.person1 = $id1 AND f2.person1 = $id3 AND f1.person2 = f2.person2)
    OR (f1.person1 = $id1 AND f2.person2 = $id3 AND f1.person2 = f2.person1)
    OR (f1.person2 = $id1 AND f2.person1 = $id3 AND f1.person1 = f2.person2)
    OR (f1.person2 = $id1 AND f2.person2 = $id3 AND f1.person1 = f2.person1)
WHERE f1.status = 'friend' AND f2.status = 'friend' 
```

```

# erlang - erlang 列表：dropwhile 奇怪的结果

> ID：10043141
> 
> 赞同：6
> 
> 时间：2012-04-06T11:55:43.247
> 
> 标签：erlang, list-comprehension

有人可以帮我理解这里发生了什么吗

```
lists:dropwhile(fun(X) -> X < 8 end, lists:seq(1,10)).

"\b\t\n" % ??? what is this ? why not [8,9,10]

lists:dropwhile(fun(X) -> X < 7 end, lists:seq(1,10)).  

[7,8,9,10] % this is correct 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T12:27:36.680

在这两种情况下，您的结果实际上都是正确的。第一种情况下的意外字符串是由于在 Erlang 中字符串只是整数列表。因此，Erlang 选择将您的第一个列表解释为字符串，因为它只包含可打印的 ASCII 代码。在第二种情况下，列表包含不可打印的代码 7，因此 Erlang 被迫将其解释为整数列表。

您始终可以使用打印实际的整数列表

```
MyList = lists:dropwhile(fun(X) -> X < 8 end, lists:seq(1,10)),
io:format("~w", [MyList]). 
```

# android - 如何在android中检查我们的网络服务是否开启？

> ID：10043144
> 
> 赞同：1
> 
> 时间：2012-04-06T11:56:03.807
> 
> 标签：android, web-services

我在 Asp.net 中有一个 Web 服务，我正在通过 Ksoap 库访问 android 中的 Web 服务。

当服务器打开并且我的 web 服务模式打开时，它工作正常。问题是当服务器关闭或 Web 服务未打开或处于关闭模式时，它会显示连接超时异常。

如何通过单击按钮检查我的服务是否可全局访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:04:26.933

您将使用 HttpResponse 对象从 Web 服务获取结果，使用以下命令检查结果：

```
HttpResponse response;
// Your code to execute url in form of response = httpclient.execute(request)
..
if (resp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
//Response is valid.
}else{
// Invalid response
} 
```

# c# - 如何创建和使用符号服务器？

> ID：10043147
> 
> 赞同：15
> 
> 时间：2012-04-06T11:56:20.033
> 
> 标签：c#, tfs, debug-symbols, symbol-server

我创建了一个 powershell 脚本，它在构建设置为发布后从放置位置获取所有 pdb 文件，并将它们复制到网络上共享的文件夹中。

我还创建了一个示例应用程序，并添加了包含我需要的程序集的 nuget 包（没有 pdb 文件）。

我在网上找到了一些参考资料，但我无法使用 pdb 文件调试我的程序集。我正在使用 VPN 连接来连接到包含 pdb 文件和 Visual Studio 2010 的共享文件夹。

为了使用在网络上共享的 pdb 文件能够调试我使用 nuget 包管理器获得的程序集，我需要执行哪些确切步骤？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T12:34:44.767

如果您正在寻找符号、符号服务器以及更重要的源服务器索引的良好概述，请查看[http://bit.ly/SymbolServerTFS](http://bit.ly/SymbolServerTFS)，这是我不久前写的一篇博客文章，讨论了所有这些。我在使用 Team Foundation Server 方面专门讨论了它，但即使您不使用 TFS，它也是很好的信息。

另外，如果您想让这种体验更好，请在 Uservoice 上为我的功能请求投票：http://bit.ly/AtLSjl[我们](http://bit.ly/AtLSjl) 绝对会感谢添加的声音和投票！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:39:03.027

作为一个简单的解决方案，您可以尝试 VS/Tools/Options/Debugging/Symbols - 并尝试将您的符号缓存设置为您的网络共享（之前没有尝试过，但可能会工作，如果需要，映射驱动器等）。
至少这可以让您暂时运行 - 并确保您已自动加载“所有模块”或指定您的模块。
希望这会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-06T12:44:03.347

只需在 Options->Debugging->Symbols->Symbol file (.pdb) 位置定义它

[MSDN](http://msdn.microsoft.com/en-us/library/ms241613.aspx)上的详细说明

# tomcat - 如何在 Tomcat 6 中定义应用程序的上下文路径？

> ID：10043151
> 
> 赞同：1
> 
> 时间：2012-04-06T11:56:33.333
> 
> 标签：tomcat, tomcat6

应用程序部署在上下文路径“/environame/appname”上的 Tomcat6 上。

```
<Context
...
        path="/environame/appname"
...
</Context> 
```

但我无法使用以下 URL 访问我的应用程序：

> [http://localhost:8080/environame/appname](http://localhost:8080/environame/appname)

我必须在“environame”和“appname”之间使用下划线而不是斜线。

> [http://localhost:8080/environame_appname](http://localhost:8080/environame_appname)

Tomcat 5 的工作方式不同。
在 Tomcat 5 的情况下，URL 中不会有下划线：

> [http://localhost:8080/environame/appname](http://localhost:8080/environame/appname)

我应该更改我的应用程序或 Tomcat 6 的配置以使用斜线而不是“环境名称”和“应用程序名称”之间的下划线来访问我的应用程序？

**更新：**

> **path**此 Web 应用程序的上下文路径，与每个请求 URI 的开头相匹配，以选择适当的 Web 应用程序进行处理。特定主机中的所有上下文路径都必须是唯一的。如果您指定空字符串 ("") 的上下文路径，则您正在为此主机定义默认 Web 应用程序，它将处理所有未分配给其他上下文的请求。
> 
> 除非在 server.xml 中静态定义上下文，否则不得设置此字段的值，因为它将从用于 .xml 上下文文件或 docBase 的文件名中推断出来。

[http://tomcat.apache.org/tomcat-5.5-doc/config/context.html](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html)

我们将上下文 xml 文件存储到 $CATALINA_HOME/conf/Catalina/localhost/environame_appname.xml 文件中。Tomcat 5.0.28 使用 Context 元素的路径属性。
Tomcat 6 使用上下文 xml 文件的名称。
是否可以更改配置以使用路径属性而不是 xontext xml 文件的名称？

**回答：**
有一个 bug[错误 #46713](https://issues.apache.org/bugzilla/show_bug.cgi?id=46713)

> 如果在上下文 xml 中的上下文标记内设置了路径属性，则它会被忽略。相反，路径设置为 "/" + 。虽然通过将 '/' 替换为 '#' 可以在文件名中对带有 '/' 的路径进行编码很好，但简单地忽略现有路径属性是非常令人困惑的。

所以，我只需要将我的上下文 xml 文件重命名为 environame#appname.xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:08:53.167

很久以前（我认为是 tomcat 4）可以部署一个名为 environame_appname.war 的战争档案，并且 tomcat 通过 url environame/appname/... 我不确定这是否仍然有效（并且还没有时间测试它）。Tomcat 用斜线和下划线做了一些替换。

实现目标的另一种方法是使用 apache 和 mod_proxy、mod_proxy_ajp（或 mod_proxy_html）和 mod_rewrite。然后您可以在 tomcat 中定义两个应用程序（app01 和 app02），定义将请求转发到 /app01（resp /app02）到您的 tomcat 的代理规则和将请求重写到 /env01/app 到 /app01 和 /env02 的重写规则/app02 到 /app02。

# persistence - 如何使自定义应用程序持续重启 WinCE 6.0 操作系统？

> ID：10043156
> 
> 赞同：4
> 
> 时间：2012-04-06T11:57:06.263
> 
> 标签：persistence, windows-ce, reboot

我正在寻找有关如何设置 Windows CE 6.0 设计图像以集成我的自定义应用程序的解决方案。

我希望在构建映像并在目标机器上启动它之后能够从 \Hard Disk\Program Files\CustomApp 文件夹访问我的应用程序。

此外，我要求应用程序是持久的。重启后不能丢失。

我知道将应用程序从 NK.BIN 复制到硬盘，但如果可能的话，我想要一个解决方案，比如将 dll 或其他文件添加到 Windows 文件夹。

我将 SQL CE 数据库与应用程序一起使用，因此我希望数据也能够持久化。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:23:00.070

如果 \Hard Disk 文件夹的内容不是持久的（我假设它们不是因为你在问这个问题），那么让应用程序“持久”只能作为一个简单的技巧来完成，就像Windows 文件夹的内容。在启动时，操作系统将扩展到 RAM，如果您已将应用程序包含在该操作系统中，它也会被提取。

首先，您必须通过将应用程序文件（exe、dll、所有依赖项等）[添加到 BIB 文件中来将它们包含到](http://geekswithblogs.net/BruceEitman/archive/2008/06/17/platform-builder-using-bib-files-to-add-files-to-a.aspx)OS 映像中。

接下来，您必须了解*所有*文件都被提取到 \Windows 文件夹。没有例外。如果您想将它放在不同的文件夹中，则必须[使用 DAT 文件](http://msdn.microsoft.com/en-us/library/ms909519.aspx)来告诉操作系统将其放在哪里，因为操作系统已被提取。请注意，DAT 文件是一个*副本*，而不是移动，因此如果您想要它在其他地方，您将在设备上拥有该应用程序的两个副本。一个典型的解决方案是使用 DAT 文件来放置快捷方式，而不是完整的副本。

你问题的最后一部分是困难的，或者可能是不可能的部分。您的数据库不会持续存在。您可以在操作系统中包含一个副本，但是每次硬重置时，都会复制一个新的数据库副本，就像构建操作系统时一样。没有新的数据会存在。

为了让它工作，你需要在设备上建立一个持久的文件存储。如果您是 OEM，您可以使用任何剩余的板载存储（操作系统映像文件所在的位置）或单独安装的 USB/CF/SD/HDD 媒体来实现一个。你如何做到这一点高度依赖于硬件和 BSP，而且它比 SO 上描述的要复杂得多。在不了解目标设备的情况下，甚至很难给你任何关于从哪里开始的指针。[这是 Flash 存储的一个非常通用的起点](http://msdn.microsoft.com/en-us/library/ee489569%28v=winembedded.60%29.aspx)。

# php - 为什么从 MYSQL 返回到 android 应用程序的结果为空？

> ID：10043165
> 
> 赞同：0
> 
> 时间：2012-04-06T11:57:28.347
> 
> 标签：php, android, json

我试图读取我的数据库中的数据，然后在我的应用程序中使用它，因为我使用 php 脚本作为 Web 服务来连接到我的 Mysql 数据库，但是我的程序在解析 Json 时抛出了一个异常我试图删除解析部分并在日志上打印结果值并显示为 null ，为什么结果值为 null ？错误是什么？

我已经在网上搜索并尝试了所有可能的解决方案，但问题仍然存在，请帮助我......我能做些什么来解决这个问题？

**这是我打印结果值时的日志：**

> 在 postExecute 方法中 sb.tostring之后为null

**练习.php**

> ```
>  <?php
>      $Name=$_REQUEST['name'];               
>      mysql_connect("localhost","user","pass");
>     mysql_select_db("MYDB");
>    $sql=mysql_query("select  burnedCalories   from Exercise where  name='$Name' ");
>    while($row=mysql_fetch_assoc($sql))
>    $output=$row;
>     print(json_encode($output));
>      mysql_close();
>      ?> 
> ```

**java类**

> ```
>  public class  ExercisesActivity  extends Activity{ 
> ```

```
 private    String    selected_ex_Name ="Walking";
            private int  calorie_factor;
            public void onCreate(Bundle savedInstanceState) 
            {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.exercise_details);
                new ConnectTask().execute();

                 }

    private class  ConnectTask extends AsyncTask<Void,Void,String>
     {    
 private  String result="";
 private  InputStream is=null;
 protected String doInBackground(Void... params) {

 try
 {
     ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
 nameValuePairs.add(new BasicNameValuePair("name",selected_ex_Name));
 HttpClient httpclient = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("http://10.0.2.2/Exercise.php");
 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
 HttpResponse response = httpclient.execute(httppost);
     HttpEntity entity = response.getEntity();
  is = entity.getContent();
         }
    catch(Exception e)
      {
         Log.e("log_tag", "Error in http connection "+e.toString());
        }
        //convert response to string
        try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"utf-8"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();

          }
        catch(Exception e){
         Log.e("log_tag", "Error converting result "+e.toString());
         }

        Log.e("log_tag", result+ "after sb.tostring  ");
        return result;
        }

 protected  void onPostExecute(String  result){

               Log.e("log_tag", result+" in postExecute method ");

            //           try{
     //                 JSONArray jArray = new JSONArray(result);
   //                   JSONObject json_data=null;
  //                    for(int i=0;i<jArray.length();i++)
  //                    {
  //                        json_data = jArray.getJSONObject(i);
  //                                calorie_factor=json_data.getInt("burnedCalories");
           //                   }
            //  
            //               }
            //                  catch(JSONException e){
             //                 Log.e("log_tag", "Error parsing data  "+e.toString());
              //                    }

          }

                }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:22:51.367

您的 php 脚本位于[http://10.0.2.2/Exercise.php](http://10.0.2.2/Exercise.php)上，因此可能位于某些本地机器上。即使您可以从浏览器访问它并且它显示 JSON 输出，您的应用程序也无法访问它。因此，将其放在外部服务器上并从那里连接到它 - 您必须将 url 更改`HttpPost httppost = new HttpPost("http://10.0.2.2/Exercise.php");`为新的。

当您执行此操作时，可以检查您是否真的有一些可访问的 JSON 输出，因为从您的日志看起来，您似乎没有。

# ruby - XPath-REXML-Ruby：选择多个兄弟姐妹/祖先/后代

> ID：10043167
> 
> 赞同：1
> 
> 时间：2012-04-06T11:57:28.947
> 
> 标签：ruby, xml, xpath, xml-parsing, rexml

这是我在此的头一篇博文。我刚刚开始使用 Ruby，并且正在使用 REXML 进行一些 XML 处理。我在这里展示了我的 xml 文件的一个小样本：

```
 <record>
     <header>
        <identifier>oai:lcoa1.loc.gov:loc.gmd/g3195.ct000379</identifier>
        <datestamp>2004-08-13T15:32:50Z</datestamp>
        <setSpec>gmd</setSpec>
     </header>
     <metadata>
           <titleInfo>
              <title>Meet-konstige vertoning van de grote en merk-waardige zons-verduistering</title>
           </titleInfo>
     </metadata>
  </record> 
```

我的目标是将标签中的最后一个数值与我从数组中获得的值列表相匹配。我通过以下代码片段实现了这一点：

```
ids = XPath.match(xmldoc, "//identifier[text()='oai:lcoa1.loc.gov:loc.gmd/"+mapid+"']") 
```

获得了我希望调查的特定标识符，现在我想返回并选择然后选择以获取该特定标识符的节点中的值。

我还查看了该网站上的 XPath 教程和表达式以及许多相关问题，并了解了轴和不同的概念，例如祖先/跟随兄弟等。但是，我真的很困惑，无法轻易弄清楚这一点。

我想知道是否可以得到任何帮助，或者是否有人可以将我指向“易于”阅读的在线资源。

谢谢你。

更新：

我一直在尝试各种代码组合，例如：

```
idss = XPath.match(xmldoc, "//identifier[text()='oai:lcoa1.loc.gov:loc.gmd/"+mapid+"']/parent::header/following-sibling::metadata/child::mods/child::titleInfo/child::title") 
```

代码编译但不输出任何内容。我想知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:53:54.073

这是一种使用 XPath 完成它的方法，然后上到记录，然后 XPath 得到标题：

```
require 'rexml/document'
include REXML

xml=<<END
  <record>
    <header>
      <identifier>oai:lcoa1.loc.gov:loc.gmd/g3195.ct000379</identifier>
      <datestamp>2004-08-13T15:32:50Z</datestamp>
      <setSpec>gmd</setSpec>
    </header>
    <metadata>
      <titleInfo>
        <title>Meet-konstige</title>
      </titleInfo>
    </metadata>
  </record>
END

doc=Document.new(xml)
mapid = "ct000379"
text = "oai:lcoa1.loc.gov:loc.gmd/g3195.#{mapid}"

identifier_nodes = XPath.match(doc, "//identifier[text()='#{text}']")
record_node = identifier_nodes.first.parent.parent
record_node.elements['metadata/titleInfo/title'].text
=> "Meet-konstig" 
```

# asp.net-mvc - 编辑对话框中的项目，然后刷新显示的当前页面（而不是跳回第 1 页）

> ID：10043169
> 
> 赞同：0
> 
> 时间：2012-04-06T11:57:35.860
> 
> 标签：asp.net-mvc

我有一个使用 ASP.NET MVC3 的解决方案。我有一个页面，我们可以在其中管理用户（创建/编辑/删除）。我在这个页面上有分页。

![在此处输入图像描述](../Images/91cb93a99f5640582cabf6b1f61965b9.png)

按下编辑按钮时，会显示一个对话框，可以在其中进行编辑。

![在此处输入图像描述](../Images/1c14ef3dcb6f2aa8ae8177e37f05cf1f.png)

当用户单击保存按钮时，对话框被隐藏，列表通过 ajax 刷新。

当用户在第 2 页或第 3 页上编辑项目时出现问题，或者... 在这种情况下，显示第 1 页。原因是当前页面信息在我的操作控制器中是未知的。我想在我的视图中保留当前活动的页面。

这是我有但不太满意的解决方案：

在我的编辑按钮上，我有下面的 ActionLink：

```
@Html.ActionLink("Editer", "Edit", new { userID = item.UserID }, new { userID = item.UserID, page = Model.PageNumber, @class = "btn small editUser" }) 
```

我在我的锚链接中注入页码。接下来显示对话框。下一个用户单击保存（提交）。触发提交动作，并在 post 参数中注入页码，如下所示：

```
$('form', dialog).submit(function () {
    $.post($(this).attr('action'), $(this).serialize() + '&page=2', function (data, status) {
            $('#my-modal').modal('hide');
            $("#userList").html(data);
    })
}); 
```

如您所见，我出于测试目的手动添加了“&page=2”。我的控制器中的操作接收发布的数据（已编辑的项目 + 页码）更新了我的存储库，然后 RedirectToAction("List", new {page = page}) 刷新右侧页面的列表。

我不喜欢这个解决方案。一定有更好的方法，不是吗？

如果有人可以帮助我，请提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:42:34.330

为什么不呢，而不是返回整个网格，而是用新数据更新行。我在我的搜索/编辑页面上执行此操作。当用户单击一行时，将该行索引存储在 javascript 中。然后在成功编辑后，使用文本框中的值更新该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:31:09.797

无论您是否有一个完整的“Ajax 网格”，您可以在不刷新页面的情况下刷新它，或者您有一个“服务器端”网格，而不是您需要重新加载页面，并且您的解决方案很好。

# android - 开始被 AdMob 破坏的新活动？

> ID：10043172
> 
> 赞同：0
> 
> 时间：2012-04-06T11:57:50.173
> 
> 标签：android, android-activity, admob

所以我将 AdMob 添加到我的应用程序中，现在它不会通过按下按钮启动下一个活动。我试图在主活动中按下一个按钮，以便进入第二个活动。在我添加 Admob 之前它有效

主要活动：

```
 private AdView adView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

      // Create an ad.
      adView = new AdView(this, AdSize.BANNER, "XXXXXXXXXXXX");

      // Add the AdView to the view hierarchy. The view will have no size
      // until the ad is loaded.
      RelativeLayout layout = (RelativeLayout) findViewById(R.id.main1);
      layout.addView(adView);

      // Create an ad request. Check logcat output for the hashed device ID to
      // get test ads on a physical device.
      AdRequest adRequest = new AdRequest();
      adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

      // Start loading the ad in the background.
      adView.loadAd(adRequest);
    }

    /** Called before the activity is destroyed. */
    @Override
    public void onDestroy() {
      // Destroy the AdView.
      if (adView != null) {
        adView.destroy();
      }

      super.onDestroy();

    Button next = (Button) findViewById(R.id.button1);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), PartyRockScreen.class);
            startActivityForResult(myIntent, 0);
        }

    });
}
} 
```

第二个活动：

```
private AdView adView2;

  @Override
  public void onBackPressed() {

    }
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.party);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

          // Create an ad.
          adView2 = new AdView(this, AdSize.BANNER, "XXXXXXXXXXXX");

          // Add the AdView to the view hierarchy. The view will have no size
          // until the ad is loaded.
          RelativeLayout layout = (RelativeLayout) findViewById(R.id.party1);
          layout.addView(adView2);

          // Create an ad request. Check logcat output for the hashed device ID to
          // get test ads on a physical device.
          AdRequest adRequest = new AdRequest();
          adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

          // Start loading the ad in the background.
          adView2.loadAd(adRequest);
        }

        /** Called before the activity is destroyed. */
        @Override
        public void onDestroy() {
          // Destroy the AdView.
          if (adView2 != null) {
            adView2.destroy();
          }

          super.onDestroy();

        final MediaPlayer mediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.partyrock);
        mediaPlayer.start(); // no need to call prepare(); create() does that for you

        ViewFlipper mFlipper;
        mFlipper = ((ViewFlipper)findViewById(R.id.flipper));
        mFlipper.setAutoStart(true);
        mFlipper.startFlipping();
        mFlipper.setInAnimation(AnimationUtils.loadAnimation(getApplicationContext(), android.R.anim.fade_in));
        mFlipper.setOutAnimation(AnimationUtils.loadAnimation(getApplicationContext(), android.R.anim.fade_out));

        ViewFlipper mFlipper1;
        mFlipper1 = ((ViewFlipper)findViewById(R.id.flipper1));
        mFlipper1.setAutoStart(true);
        mFlipper1.startFlipping();
        mFlipper1.setInAnimation(AnimationUtils.loadAnimation(getApplicationContext(), android.R.anim.fade_in));
        mFlipper1.setOutAnimation(AnimationUtils.loadAnimation(getApplicationContext(), android.R.anim.fade_out));

        Button next = (Button) findViewById(R.id.button2);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                mediaPlayer.stop();                 
                Intent intent = new Intent();
                setResult(RESULT_OK, intent);
                finish();

                    }

                        });

                };
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:27:54.637

尝试一下 -

```
Intent myIntent = new Intent(MainActivity.this, PartyRockScreen.class);
startActivity(myIntent); 
```

# c - 用克隆模拟 vfork

> ID：10043173
> 
> 赞同：2
> 
> 时间：2012-04-06T11:57:50.720
> 
> 标签：c, clone, fork

是否可以用克隆模拟 vfrok 的行为？到目前为止我有

```
pid=clone(fn,cStack,SIGCHLD|CLONE_FS | CLONE_FILES | CLONE_VM | CLONE_VFORK,NULL); 
```

但我仍然需要传递我自己的堆栈，所以新进程在不同的堆栈框架中工作，但在相同的地址空间中（因为 CLONE_VM），据我所知，如果我调用 vfork 并且不使用来自 exec 的某些函数，新进程在与父进程相同的地址空间中运行，并且使用相同的堆栈帧。

那么是否可以使用克隆创建一个新进程，该进程在相同的地址空间中运行并使用与父级相同的堆栈帧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:56:56.607

没有在汇编程序中编写函数是不可能的。这是一个无法“修复”的根本问题；对于大多数拱门（返回地址存储在堆栈上的任何拱门），甚至`vfork`系统调用包装器本身也必须用汇编而不是 C 编写。这是因为在子进程使用与父进程相同的堆栈运行后，它可能会覆盖函数（ 、 或其他包装器）在父进程中需要返回的返回`vfork`地址`clone`。

在汇编程序中，您只需在进行系统调用之前将返回地址保存在寄存器中。

# node.js - 不支持 Node.js Cygwin

> ID：10043177
> 
> 赞同：45
> 
> 时间：2012-04-06T11:57:59.127
> 
> 标签：node.js, cygwin, installation

我正在尝试安装 node.js。我按照[本教程](http://howtonode.org/how-to-install-nodejs)进行操作，但我被困在了中间。

当我在我的 cygwin 终端中写入`./configure`时，它显示“不支持 cygwin”。请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-04-19T13:28:15.960

根据我的经验，Node 在 cygwin 中运行良好，Node 通常出现 EINVAL 错误的似乎是 MINTTY，它是 cygwin 默认的终端仿真“皮肤”。我仍然不确定为什么这些 EINVAL 错误会 100% 发生，但以下是我用来让节点工作的步骤和技巧。

在我的 /cygwin/home/{username}/.bashrc 中，我将节点添加到路径，以便 cygwin 可以找到它

```
export PATH=$PATH:"/cygdrive/c/Program Files/nodejs/" 
```

如果您运行 32 位版本的节点：

```
export PATH=$PATH:"/cygdrive/c/Program Files (x86)/nodejs/" 
```

然后为了让 npm 在没有 windows 到 linux 问题的情况下运行，我在管理员模式下启动 cygwin，然后运行：

```
dos2unix '/cygdrive/c/Program Files/nodejs/npm' 
```

此时运行文件和大多数 npm 包将在 MINTTY 中运行得很好，尽管每隔一段时间你会遇到某些 npm 包作为业力的 EINVAL 问题。此外，您将无法直接在 MINTTY 中运行解释器，只要我想执行以下操作：

```
cygstart /bin/bash 
```

这将打开一个本地 cygwin bash.exe 窗口，从这里运行解释器或任何导致 EINVAL 的麻烦包命令。你必须这样做有点糟糕，但我很少每天使用它，而且我太喜欢 MINTTY 以至于不使用它。

另请注意，您可以在 MINTTY 中运行任何一行节点代码，只需运行以下代码：

```
node -e "console.log('hello node')" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-14T21:47:02.823

对于那些只想安装 NPM 包的人来说，作为 troy 答案的一个更简单的衍生：

1.  使用 Windows 安装程序包安装[Node.js。](http://nodejs.org/download/)
2.  将其添加到 PATH 中`export PATH=$PATH:"/cygdrive/c/Program Files/nodejs/"`（显然将 Node.js 安装目录的路径替换为您安装它的位置）。
3.  Windows 版本中存在一个当前错误，可以通过运行`mkdir -p ~/AppData/Roaming/npm`. 这是所有 Windows 的错误，而不仅仅是 Cygwin。在未来的某个时候，您将不再需要这样做，但该命令不应该有任何负面影响。
4.  测试一下。例如，`npm install pretty-diff -g`。
5.  为了能够运行新安装的软件，您需要将安装位置添加到 PATH。`npm bin -g`您可以使用and找到这些`npm bin`（`-g`标志是“全局”安装位置）。

为了让它在 Cygwin 中运行，你不需要做任何特别的事情（尽管我不能说一切是否正常）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-02T03:17:03.687

使用 Console2，它允许您运行 CLI shell 的创建选项卡。在 console2 中运行 cygwin 似乎可以让我很好地使用节点 REPL。我不知道为什么：P

按照本指南将 cygwin 添加到 console2：
[http ://blog.msbbc.co.uk/2009/11/configuring-console-2-and-bash-with.html](http://blog.msbbc.co.uk/2009/11/configuring-console-2-and-bash-with.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-22T17:16:02.190

对于 Windows，只需在 cmd 中运行 bash.exe，这样您就可以直接使用 cmd 控制台进行 bash 工作，这可以支持所有节点正常工作。

```
C:\Users\郷&gt;bash

郷@CHIGIX ~
$ node
> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-15T17:07:56.850

根据 Bjørn 的建议（[使用 Console2](http://blog.msbbc.co.uk/2009/11/configuring-console-2-and-bash-with.html)）和 Soyuka 的别名（[此处的步骤](http://soyuka.me/using-nodejs-with-cygwin-v0-10-25/)），我的 node.js v0.10.13 和 npm v1.3.2 现在可以在Cygwin 发行版 [Babun v1.02下运行。](http://babun.github.io/)![在此处输入图像描述](../Images/c45342351e63c0cd9469719431c447ec.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-02T13:38:55.843

我正在使用这个包装器`/usr/local/bin/node`（注意没有扩展！）

```
#!/bin/sh

_cmd="$(cygpath -lw -- "$1" )"
shift

"/proc/cygdrive/C/Program Files/nodejs/node.exe" "$_cmd" "$@" 
```

这远非完美，因为 Node 不理解 Cygwin 目录树，但使用相对名称时效果相对较好。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-05-11T03:59:47.440

在 Windows 中，运行 Cygwin.bat（而不是 Cygwin 终端），然后在该运行节点中：查看并回复1.5 年后[提出的这个](https://stackoverflow.com/questions/17297422/trouble-with-starting-node-js-from-a-cygwin-console#comment-36204702)[有效](https://stackoverflow.com/a/23030836/2255628)相同问题的答案。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-04-06T14:27:38.053

获取并运行 node.js Windows 安装程序。
在 Cygwin 提示符下输入`node`
查看它是否有效。

# php - 使用 PHP 代码在 Linux 服务器上创建目录时出错

> ID：10043178
> 
> 赞同：-3
> 
> 时间：2012-04-06T11:58:16.127
> 
> 标签：php, linux

我在 linux 上有一个名为 mygroup 的组。并有一个名为 apache 的用户。apache 是 mygroup 的成员。

我创建了一个示例 php 文件并上传到服务器

```
 <?php

$structure = '/my_repo/hello';

if (!mkdir($structure, 0, true)) {
    die('Failed to create folders...');
}

?> 
```

myrepo 目录位于根级别，组是 mygroup，所有者是根。权限为 764。

[当我在http://mydomain.com/sample.php](http://mydomain.com/sample.php)上访问我的文件时

它给了我以下错误

```
[warn] mod_fcgid: stderr: PHP Warning:  dir(/my_repo/hello) 
[<a href='function.dir'>function.dir</a>]: failed to open dir: 
Permission denied in /var/www/clients/client1/web2/web/sample.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:07:22.763

问题解决了。服务器上存在权限问题。该代码是通过另一个用户上传的，该用户没有对 myrepo 目录的权限。

# jquery-ui - Lift - 使用 Ajax 提交自动完成

> ID：10043179
> 
> 赞同：8
> 
> 时间：2012-04-06T11:58:18.137
> 
> 标签：jquery-ui, scala, callback, lift

我想使用带有 ajax 的自动完成功能。所以我的目标是：

*   当用户在文本字段中键入内容时，会出现服务器提供的一些建议（我必须在数据库中找到建议）

*   当用户按下“enter”，点击自动完成框以外的其他地方，或者当他/她选择一个建议时，文本字段中的字符串被发送到服务器。

我首先尝试使用 lift 提供的自动完成小部件，但我遇到了三个问题：

*   它是一种扩展选择，也就是说您最初只能提交建议值。
*   它不适合与 ajax 一起使用。
*   与`WiringUI`.

所以，我的问题是：如何结合[jquery 自动完成](http://docs.jquery.com/Plugins/Autocomplete)并与服务器交互。我想我应该使用一些回调，但我不掌握它们。

提前致谢。

**更新**这是我尝试的第一个实现，但回调不起作用：

```
private def update_source(current: String, limit: Int) = {   
  val results = if (current.length == 0) Nil else /* generate list of results */
  new JsCmd{def toJsCmd = if(results.nonEmpty) results.mkString("[\"", "\", \"", "\"]") else "[]" }
}   

def render = {
  val id = "my-autocomplete"
  val cb = SHtml.ajaxCall(JsRaw("request"), update_source(_, 4))
  val script = Script(new JsCmd{
    def toJsCmd = "$(function() {"+
      "$(\"#"+id+"\").autocomplete({ "+
      "autocomplete: on, "+
      "source: function(request, response) {"+
        "response("+cb._2.toJsCmd + ");"  +
      "}"+
      "})});"
  })

  <head><script charset="utf-8"> {script} </script></head> ++
  <span id={id}> {SHtml.ajaxText(init, s=>{ /*set cell to value s*/; Noop}) }   </span>
} 
```

所以我的想法是：

*   通过一个`SHtml.ajaxText`字段获取选定的结果，该字段将被包装到一个自动完成字段中
*   使用 javascript 函数更新自动完成建议

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T16:00:11.760

这是你需要做的。

1) 确保您使用的是 Lift 2.5-SNAPSHOT（这在早期版本中是可行的，但更难）

2）在你用来呈现页面的片段中，使用 SHtml.ajaxCall （特别是，你可能想要这个版本：[https ://github.com/lift/framework/blob/master/web/webkit/src/main/ scala/net/liftweb/http/SHtml.scala#L170](https://github.com/lift/framework/blob/master/web/webkit/src/main/scala/net/liftweb/http/SHtml.scala#L170)）这将允许您注册一个服务器端函数，该函数接受您的搜索词并返回包含完成的 JSON 响应。您还将使用 JsContext 注册在 JSON 响应上发生的一些操作。

3) 上面的 ajaxCall 会返回一个 JsExp 对象，当它被调用时会产生 ajax 请求。使用您的代码段将其嵌入页面上的 javascript 函数中。

4）将它们与一些客户端JS连接起来。

**更新**- 一些可以帮助您的代码。使用 Lift 2.5 肯定可以更简洁地完成，但由于 2.4 中的一些不一致，我最终推出了自己的类似 ajaxCall 的函数。S.fmapFunc 在服务器端注册函数，函数体从客户端进行 Lift ajax 调用，然后在 JSON 响应上调用 res 函数（来自 jQuery 自动完成）。

我的 jQuery 插件“激活”文本输入

```
 (function($) {
    $.fn.initAssignment = function() {
     return this.autocomplete({
         autoFocus: true,
         source: function(req, res) {
              search(req.term, res);
         },
         select: function(event, ui) {
             assign(ui.item.value, function(data){
                eval(data);
             });
             event.preventDefault();
             $(this).val("");
         },
         focus: function(event, ui) {
             event.preventDefault();
         }
     });
    }
})(jQuery); 
```

我的 Scala 代码导致 javascript 搜索功能：

```
 def autoCompleteJs = JsRaw("""
        function search(term, res) {
        """ +
             (S.fmapFunc(S.contextFuncBuilder(SFuncHolder({ terms: String =>
                val _candidates = 
                  if(terms != null && terms.trim() != "")
                    assigneeCandidates(terms)
                  else
                    Nil
                JsonResponse(JArray(_candidates map { c => c.toJson }))
             })))
             ({ name => 
               "liftAjax.lift_ajaxHandler('" + name 
             })) + 
             "=' + encodeURIComponent(term), " +
             "function(data){ res(data); }" +
             ", null, 'json');" +
        """
        }
        """) 
```

**更新 2** - 要将上面的功能添加到您的页面，请使用类似于下面的 CssSelector 转换。>* 表示附加到匹配的脚本元素中已经存在的任何内容。我在该页面上定义了其他功能，这为它们添加了搜索功能。

```
 "script >*" #> autoCompleteJs 
```

您可以查看源代码以验证它是否存在于页面上，并且可以像任何其他 JS 函数一样被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:12:01.957

在 Dave Whittaker 的帮助下，这是我提出的解决方案。

我不得不改变一些行为来获得：

*   ajaxText 元素中所需的文本（是否来自自动完成）
*   在同一页面上有多个自动完成表单的可能性
*   在自动完成建议中选择某些内容时，在模糊之前在 ajaxText 上提交答案。

**斯卡拉部分**

```
private def getSugggestions(current: String, limit: Int):List[String] = {
  /* returns list of suggestions */
}

private def autoCompleteJs = AnonFunc("term, res",JsRaw(
  (S.fmapFunc(S.contextFuncBuilder(SFuncHolder({ terms: String =>
    val _candidates =
      if(terms != null && terms.trim() != "")
        getSugggestions(terms, 5)
      else
        Nil
    JsonResponse(JArray(_candidates map { c => JString(c)/*.toJson*/ }))
  })))
  ({ name =>
    "liftAjax.lift_ajaxHandler('" + name
  })) +
  "=' + encodeURIComponent(term), " +
  "function(data){ res(data); }" +
  ", null, 'json');"))

def xml = {
  val id = "myId" //possibility to have multiple autocomplete fields on same page
  Script(OnLoad(JsRaw("jQuery('#"+id+"').createAutocompleteField("+autoCompleteJs.toJsCmd+")")))     ++
  SHtml.ajaxText(cell.get, s=>{ cell.set(s); SearchMenu.recomputeResults; Noop}, "id" -> id)
} 
```

**插入页眉的脚本：**

```
(function($) {
    $.fn.createAutocompleteField = function(search) {
        return this.autocomplete({
            autoFocus: true,
            source: function(req, res) {
                search(req.term, res);
            },
            select: function(event, ui) {
                $(this).val(ui.item.value);
                $(this).blur();
            },
            focus: function(event, ui) {
                event.preventDefault();
            }
        });
    }
})(jQuery); 
```

*注意：我接受了戴夫的回答，我只是为了我的目的提供一个完整的答案*

# objective-c - Objective-c 中的几个错误

> ID：10043180
> 
> 赞同：1
> 
> 时间：2012-04-06T11:58:25.507
> 
> 标签：objective-c, xcode

我做了每一件事，至少我试着像教程一样做每一件事，但它现在给了我 5 个错误和 1 个警告......
我刚刚开始使用 Objective-c，所以请解释你的解决方案。

**这是我的代码：（**在注释中标记和描述的错误）

计算器视图控制器.h：

```
//
//  CalculatorViewController.h
//  Calculator
//
//  Created by Me on 06-04-12.
//  Copyright 2012 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface CalculatorViewController : UIViewController {
    IBOutlet UILabel *display;
    CalculatorBrain *brain; // error: "Expected specifier-qualifier-list before 'CalculatorBrain':
    NSString *waitingOperation;
}

- (IBAction)digitPressed: (UIButton *)sender;

- (IBAction)operationPressed: (UIButton *)sender;

@end 
```

计算器视图控制器.m：

```
//
//  CalculatorViewController.m
//  Calculator
//
//  Created by Me on 06-04-12.
//  Copyright 2012 __MyCompanyName__. All rights reserved.
//

#import "CalculatorViewController.h"

@implementation CalculatorViewController 

- (CalculatorBrain *) brain { // error: "Expected ')' before 'CalculatorBrain'"
    if (!brain) { // error: "'brain' undeclared"
        brain  = [[CalculatorBrain alloc] init]; // error: "'CalculatorBrain' undeclared"
    }
    return brain;
} // warning: Control reaches end of non-void function

-(IBAction)digitPressed:(UIButton *)sender {
    if ([waitingOperation isEqualToString:@""]) {
        NSString *digit = [[sender titleLabel] text];
        [display setText:digit];
    }
    else {
        // Do calculations if everything works, now just log something to check if it works
        NSLog(@"Joepie!");
    }

}

-(IBAction)operationPressed:(UIButton *)sender {

}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T11:59:57.873

你不见了

```
#import "CalculatorBrain.h" 
```

在 .h 文件的顶部。

# javascript - 在浏览器中播放音频时出错

> ID：10043186
> 
> 赞同：2
> 
> 时间：2012-04-06T11:58:58.563
> 
> 标签：javascript

我正在使用 javascript 代码以用户指定的开始时间播放音频

```
var audio_player = document.getElementById("audi");
//'audi' is ID of audio tag  
audio_player.currentTime = audi_start_time;
//Start time from where audio should start to play

audio_player.play(); 
```

当我运行网站时，我可以从“audi_start_time”中指定的时间开始播放音频，但大多数时候我都会出错

> '试图使用一个不可用或不再可用的对象
> [Break On This Error]

```
audio_player.currentTime = audi_start_time; 
```

任何帮助，将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:13:18.667

我认为您正在尝试`currentTime`在文件准备好之前进行设置，

因为当您在 window.onlaoad 中设置 currentTime 时它正在工作。

这是您要执行的操作-> [jsFiddle demo-1](http://jsfiddle.net/Smuh8/1)（**不起作用**）

这是你应该做的-> [jsFiddle demo-2](http://jsfiddle.net/Smuh8)（**工作**）

* * *

**编辑：**

好，我知道了。如果您尝试设置`currentTime`动态附加的音频/视频标签，您应该等待音频标签准备好播放。

所以你可以用[oncanplay 事件](http://dev.w3.org/html5/spec/single-page.html#event-media-canplay)检测它，

例如，

```
<div id="content"></div>
<button onclick="play()">play</button>

<script type="text/javascript">
function play() {
     var audio = document.createElement("audio");
     audio.controls = "controls";
     audio.innerHTML = '<source src="http://www.w3schools.com/html5/song.ogg" type="audio/ogg" />'+
                       '<source src="http://www.w3schools.com/html5/song.mp3" type="audio/mp3" />';
     var content = document.getElementById("content");
     content.innerHTML = "";
     content.appendChild(audio);
     audio.addEventListener("canplay", function() {
        this.currentTime = 5;        
     },true);
     audio.play();
}
</script>​ 
```

这是一个有效的[jsFiddle 演示](http://jsfiddle.net/ocanal/Smuh8/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T03:41:32.270

在设置当前时间之前播放音频。为此，我整晚都在桌子上敲我的头，然后我找到了这个帖子：[https](https://github.com/johndyer/mediaelement/issues/243) ://github.com/johndyer/mediaelement/issues/243 。这最终为我工作：

```
audioplayer.src = source;
audioplayer.play();
audioplayer.addEventListener('playing', function () {
    if (loadPlayed == false)
    {
        audioplayer.currentTime = Time;
        audioplayer.play();
        loadPlayed = true;
    }
    else {
        audioplayer.removeEventListener('playing', this);
    }
}); 
```

# java - 在 Eclipse RCP 应用程序 (Eclipse e4) 中隐藏 Coolbar/Toolbar 项/Preference 页面

> ID：10043190
> 
> 赞同：3
> 
> 时间：2012-04-06T11:59:23.307
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, xtext

在我们的 Eclipse RCP 应用程序（使用**Eclipse 3.7**）中，我有重写`WorkbenchWindowAdvisor.postWindowCreate()`方法，隐藏不需要的 Coolbar/Toolbar 项目，如*File*、*Run*等菜单和*Run Last Tool*、*Search*等工具栏按钮，它工作正常。现在我已将我的代码移至 Eclipse e4 4.1.2，当我运行我的 RCP 应用程序时，它现在已启动，但它显示了这些不需要的 Coolbar/Toolbar 项目。

在深入研究这个问题时，我发现该`WorkbenchWindowAdvisor.postWindowCreate()`方法没有被使用，`e4`并且根本没有被调用。那么在 Eclipse e4 中执行此操作的替代方法是什么？

**编辑：** 我还想提一下，在我的 RCP 应用程序中我有`Xtext`插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:21:30.070

您可以：a) 使用没有这些项目的自定义 Legacy.e4xmi 文件 b) 使用模型处理器以编程方式从模型中删除这些项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T19:54:39.593

另一种方法是使用 Eclipse 活动。在这里检查我的问题： [RCP exportWizard remove unnecessary items](https://stackoverflow.com/questions/9655667/rcp-exportwizard-remove-unnecesary-items)

# c# - C# 使用具有委托参数的函数启动线程

> ID：10043192
> 
> 赞同：3
> 
> 时间：2012-04-06T11:59:28.550
> 
> 标签：c#, multithreading, delegates

```
public delegate bool FunctieCompara(int a, int b); this is the delegate 
```

简单的函数调用：

```
TyG.bubbleSort(TyG.max, TyG.Lungime, TyG.Secv);
TyG.bubbleSort(TyG.min, TyG.Lungime, TyG.secvMin); 
```

我有一个`Class Sorts`，在这堂课中我有很多方法，比如

```
public void bubbleSort(functionDelegate f, int n, int [] v) 
```

以及更多种类，但使用此参数。在其他类中，我有一个实例

```
Sortst tyg = new Sorts() 
```

我想创建一个线程

```
Thread Thr = new Thread(new ThreadStart(tyg.bubbleSort(functionDelegate))) 
```

我没有弄清楚这件事在我的情况下是否有效，我如何将线程与使用委托的方法一起使用，在我的情况下，委托是`max/min`用于比较数字以在`v[]`. `bubbleSort(max, n, v)`我想制作 2 个线程来同时进行这两种`bubbleSort(min, n, v)`操作。无论如何，这就是线程的作用，无论如何，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T12:06:42.120

你的意思是这样吗？

```
var t1 = new Thread(
   o =>
   {
       tyg.bubbleSort(max, n, v1);
   });

var t2 = new Thread(
   o =>
   {
       tyg.bubbleSort(min, n, v2);
   });

t1.Start(); // start threads
t2.Start();

t1.Join(); // wait for both threads to finish
t2.Join(); 
```

请注意，如果您在原地排序，则应使用不同的数组（`v1`和`v2`），否则线程将覆盖相同的数组。

如果您有兴趣，还可以查看`Task`.NET 4.0 的构造。

或者，如果你想变得很酷（.NET 4.0+）：

```
Parallel.Invoke(
    () => tyg.bubbleSort(max, n, v1),
    () => tyg.bubbleSort(min, n, v2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T12:14:05.117

使用 .NET Framework 4 和任务并行库：

```
var factory = new TaskFactory(TaskCreationOptions.None,
                TaskContinuationOptions.None);
var sorts = new Sorts();
FunctieCompara greaterThanComparer = (a, b) => { return a > b; };
FunctieCompara lessThanComparer = (a, b) => { return a < b; };
var sorterWorkers = new Task[]
     {
        factory.StartNew(() => sorts.BubbleSort(greaterThanComparer, 0, new int[] {})),
        factory.StartNew(() => sorts.BubbleSort(lessThanComparer, 0, new int[] {}))
     };

Task.WaitAll(sorterWorkers); 
```

# jquery - 删除最后一个动态创建的 html 行创建的 jquery

> ID：10043203
> 
> 赞同：0
> 
> 时间：2012-04-06T12:00:40.377
> 
> 标签：jquery

我在表格旁边动态创建了一行

```
var index = 1;

$("#add_field").click(function(){

var new_field = '<tr><th style="text-align: left;">Customer '+index+'</th><td><input type="text" id="customer'+index+'" name="customer'+index+'" maxlength="50"></td><th style="text-align: left;">Phone</th><td><input type="text" id="customerphone'+index+'" name="customerphone'+index+'" maxlength="14"></td><th style="text-align: left;">Email</th><td><input type="text" id="customeremail'+index+'" name="customeremail'+index+'" maxlength="100"></td></tr>';

$("#customerFormTable").append(new_field); }); 
```

html

```
<div id="add_field">Click here to add more rows </div> 
```

我现在如何创建删除 - 删除我刚刚创建的最后一行

```
<div id="delete_row">Click here to delete last row created </div>

$("#delete_row").click(function(){  ?????? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:02:11.680

```
$("#customerFormTable tr:last").remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:06:25.393

根据删除该特定行将 ID 分配给元素 TR

```
$("#trid").remove(); 
```

# python - Python中ast.nodevisitor的后序遍历

> ID：10043205
> 
> 赞同：3
> 
> 时间：2012-04-06T12:00:47.270
> 
> 标签：python, abstract-syntax-tree, visitor-pattern, postorder

是否可以仅通过操作 ast.NodeVisitor.generic_visit() 在 Python 中对 ast.NodeVisitor 的实例进行后序遍历？我这样做了：

```
class ExpParser(ast.NodeVisitor):

    def generic_visit(self, node):
        for x in ast.iter_child_nodes(node):
            ast.NodeVisitor.generic_visit(self, x)
        ast.NodeVisitor.generic_visit(self, node)

    def visit_BinOp(self, node):
        print type(node.op).__name__ 

    def visit_Name(self, node):
        print node.id

if __name__ == '__main__':
    node = ast.parse("T1+T2*T3")
    v = ExpParser()
    v.visit(node) 
```

这给了我：

```
T1
T2
T3
Mult
Add 
```

我希望它给我：

```
T2
T3
Mult
T1
Add 
```

我该怎么做？请我被困住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T23:15:07.620

尝试这样的事情

```
import ast

class ExpParser(ast.NodeVisitor):

    def generic_visit(self, node):
        for field, value in reversed(list(ast.iter_fields(node))):
            if isinstance(value, list):
                for item in value:
                    if isinstance(item, ast.AST):
                        self.visit(item)
            elif isinstance(value, ast.AST):
                self.visit(value)

    def visit_BinOp(self, node):
        self.generic_visit(node)
        print type(node.op).__name__ 

    def visit_Name(self, node):
        self.generic_visit(node)
        print node.id

if __name__ == '__main__':
    node = ast.parse("T1+T2*T3")
    v = ExpParser()
    v.visit(node) 
```

不要忘记在每个访问方法上调用 generic_visit，或者重新实现访问方法来自动处理它。

# java - 将 ArrayList 转换为包含不同长度数组的二维数组

> ID：10043209
> 
> 赞同：29
> 
> 时间：2012-04-06T12:01:02.923
> 
> 标签：java, multidimensional-array, arraylist, indexing, varying

所以我有：

```
ArrayList<ArrayList<String>> 
```

其中包含 x 个 ArrayLists，其中包含另一个 y 个字符串。为了演示：

```
Index 0:
  String 1
  String 2
  String 3
Index 1:
  String 4
Index 2:
Index 3:
  String 5
  String 6 
```

其中 index 是指包含字符串的数组索引。

如何将其转换为 2D 数组，如下所示：

```
{{String1, String2, String3},{String4}, {}, {String5, String6}} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-12-04T20:38:14.977

欢迎来到 Java 8 的世界！

我只花了一整夜不睡觉的时间就学会了写这行代码需要什么。我确定它已经在某个地方，但我找不到它。所以我分享我的研究时间和时间，享受。哇！

假设：

```
ArrayList<ArrayList<String>> mainList = new ArrayList<ArrayList<String>>();
// populate this list here 
```

（或者，更确切地说，在 Java 8 中：

```
ArrayList<ArrayList<String>> mainList = new ArrayList();
//Populate 
```

)

那么你只需要：

```
String[][] stringArray = mainList.stream().map(u -> u.toArray(new String[0])).toArray(String[][]::new); 
```

砰！一条线。

我不确定它与其他选项相比有多快。但这就是它的工作原理：

1.  获取`mainList`2D ArrayList 的流。这个流有点像一个连接了 LinkedList 的 Vector 并且他们有了一个孩子。那个孩子，在以后的生活中，服用了一些[NZT-48](https://en.wikipedia.org/wiki/Limitless)。我离题了；`mainList.stream()`正在返回一个`ArrayList<String>`元素流。或者用更极客的话来说：`mainList.stream()`返回 a `Stream<ArrayList<String>>`, sorta。

2.  调用该`.map`流上的函数，该函数将返回一个新流，其内容与传入的参数指定的新类型相匹配`map`。这个`map`函数将为我们隐藏流中的每个元素。它有一个内置`foreach`语句。为了做到这一点；该`map`函数将 lambda 表达式作为其参数。[Lambda 表达式](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/index.html)就像一个简单的内联单行函数。它有两种数据[类型](https://en.wikipedia.org/wiki/Gettin%27_Jiggy_wit_It)。首先是调用它的流中的数据类型 ( `mainList.stream()`)。下一个类型是它将映射到的数据类型，它位于 lambda 表达式的右半部分`u -> u.toArray(new String[0])`：这`u`是您选择的标识符，就像使用`foreach`陈述。前半部分是这样声明的`u ->`：和 a 一样`foreach`，变量`u`现在将是流中的每个元素，因为它遍历流。因此，`u`是原始流的元素的数据类型，因为它*就是*它们。Lambda 表达式的右半部分显示了如何处理每个元素：`u.toArray(new String[0])`. 结果将存储在新流中的应有位置。在这种情况下，我们将其转换为`String[]`.. 因为毕竟这是`String`.. 的 2D 数组，或者更确切地说，从代码中的这一点开始，`String[]`（字符串数组）的 1D 数组。请记住，这`u`最终是一个`ArrayList`. 请注意，`toArray`从`ArrayList`object 将创建一个传入它的类型的新数组。这里我们传入`new String[0]`。因此，它创建了一个新的类型数组，`String[]`其长度等于 ArrayList 的长度`u`。然后它用 的内容填充这个新的字符串数组`ArrayList`并返回它。留下 Lambda 表达式并返回到`map`. 然后，`map`收集这些字符串数组并用它们创建一个新流，它具有关联的类型`String[]`，然后返回它。因此，在这种情况下，`map`返回 a 。`Stream<String[]>`（嗯，实际上它返回 a `Stream<Object[]>`，这是令人困惑的，需要转换，见下文）

3.  因此，我们只需要调用`toArray`新的字符串数组流。但是调用`toArray`a`Stream<Object[]>`与调用 an 有点不同`ArrayList<String>`，就像我们之前所做的那样。在这里，我们不得不使用一个函数引用令人困惑的东西。它从中获取类型：`String[][]::new`. 该`new`函数具有 type `String[][]`。基本上，由于该函数被称为*toArray*，它总是`[]`某种类型的。在我们的例子中，因为里面的数据是另一个数组，所以我们只是添加到另一个`[]`. 我不确定为什么 NZT-48 不能在这个上工作。我原以为默认调用`toArray()`就足够了，因为它是一个流和所有。一个流就是专门的`Stream<String[]>`。任何人都知道为什么`map`实际上返回一个`Stream<Object[]>`而不是内部 Lambda 表达式返回的类型的流？

4.  现在我们`toArray`从我们的`mainList`流中得到了正确的行为。我们可以简单地将其转储到一个局部变量中：`String[][] stringArray = mainList.stream...`

# 将 2D ArrayList of Integers 转换为 2D 原始整数数组

现在，我知道你们中的一些人正在外面。“这对整数不起作用！” 就像我的情况一样。然而，它确实适用于“ [Ents](https://en.wikipedia.org/wiki/Ent) ”，见上文。但是，如果你想要一个2D的（即）的 2D 原始`int`数组。你必须改变那个中[地球]映射。请记住，ArrayLists 不能有原始类型。因此，您不能调用并期望获得. 您将需要将其映射出来......再次。`ArrayList``Integer``ArrayList<ArrayList<Integer>>``toArray``ArrayList<Integer>``int[]`

```
int[][] intArray = mainList.stream().map(  u  ->  u.stream().mapToInt(i->i).toArray()  ).toArray(int[][]::new); 
```

为了便于阅读，我试图将其隔开。但是您可以在这里看到，我们必须再次经历相同的整个映射过程。这次我们不能简单地调用`toArray`ArrayList `u`；和上面的例子一样。在这里，我们调用`toArray`a `Stream`not an `ArrayList`。因此，出于某种原因，我们不必将其传递给“类型”，我认为它正在服用大脑类固醇。因此，我们可以采用默认选项；它需要 NZT-48 的打击，并在这个 [运行] 时间为我们找出显而易见的东西。我不确定为什么它不能在上面的例子中做到这一点。哦，没错.... ArrayLists 不像 Streams 那样采用 NZT-48。等等……我到底在说什么？

Annnyhoow，因为流非常聪明。像[Sheldon](https://en.wikipedia.org/wiki/Sheldon_Cooper)一样，我们需要一个全新的协议来处理它们。显然，先进的智能并不总是意味着容易处理。因此，需要这个新`mapToInt`的来制作一个`Stream`我们可以更智能地使用它的新的`toArray`。中的`i->i`Lambda 表达式是对to`mapToInt`的简单拆箱，使用允许的隐式自动拆箱。现在，这似乎是一件愚蠢的小事，好像智力有其局限性。在我冒险学习这一切的过程中：我实际上尝试使用，因为我期望一个默认行为。不是争论！！（*咳*谢尔顿*咳*）然后我用我最好的[胡斯克说](http://www.urbandictionary.com/define.php?term=Husker)`Integer``int``int = Integer``mapToInt(null)`**山谷女孩口音，“毕竟，它*被*称为`mapToInt`，我猜，像，84% 的时间（[42](https://www.google.com/search?q=the+answer+to+life+the+universe+and+everything&oq=the+ans&gs_l=serp.3.0.0i67j0l9.6690.8319.0.9719.9.8.1.0.0.0.118.676.4j3.7.0....0...1c.1.64.serp..1.8.678.9U0H1oblBd4) x2）它会，像，路过`i->i`，像，每个人，像，天哪！” 不用说，我觉得有点……像……[这家伙](https://s-media-cache-ak0.pinimg.com/236x/f7/4c/30/f74c30483999ca714008c2b2c0f1987a.jpg)。我不知道，为什么它不能那样工作。**

 **嗯，我红眼了，半昏迷半睡着。我可能犯了一些错误；请把它们拖出来，这样我就可以修复它们，如果有更好的方法，请告诉我！

PT

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-04-06T12:16:11.230

```
String[][] array = new String[arrayList.size()][];
for (int i = 0; i < arrayList.size(); i++) {
    ArrayList<String> row = arrayList.get(i);
    array[i] = row.toArray(new String[row.size()]);
} 
```

`arrayList`你的`ArrayList<ArrayList<String>>`（或任何，相应地更改循环`List<List<String>>`内的第一行）在哪里`for`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-06T12:07:24.583

您可以使用`toArray()`方法将 ArrayList 转换为数组。由于您在 ArrayList 中有 ArrayList，因此您需要遍历每个元素并应用此方法。

像这样的东西： -

```
ArrayList<ArrayList<String>> mainList = new ArrayList<ArrayList<String>>();
// populate this list here
//more code

// convert to an array of ArrayLists
ArrayList<String[]> tempList = new ArrayList<String[]>();
for (ArrayList<String> stringList : mainList){
    tempList.add((String[])stringList.toArray());
}

//Convert to array of arrays - 2D array
String [][]list = (String[][])tempList.toArray(); 
```

你可以在这里找到更多`toArray()` [。](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28%29)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T12:17:21.557

例如：

```
public String[][] toArray(List<List<String>> list) {
    String[][] r = new String[list.size()][];
    int i = 0;
    for (List<String> next : list) {
       r[i++] = next.toArray(new String[next.size()]);
    }
    return r;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T12:15:17.563

```
ArrayList<ArrayList<String>> list= new ArrayList<ArrayList<String>>();
          ArrayList<String> a = new ArrayList<String>();
          ArrayList<String> b = new ArrayList<String>();
          a.add("Hello");
          b.add("Hell");
          list.add(a);
          list.add(b);
          Object[][] array = new Object[list.size()][];
          Iterator<ArrayList<String>> iterator = list.iterator();
          int i = 0;
          while(iterator.hasNext()){
              array[i] = iterator.next().toArray();
          } 
```

您可以使用以下代码段将 Object[] 转换为 String[]

```
String[] stringArray = Arrays.copyOf(objectArray, objectArray.length, String[].class); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-27T07:16:36.420

这个完整的小程序代码非常不言自明地回答了这个问题。只需粘贴并运行它：

```
import java.util.ArrayList;
import java.util.List;

public class ListTo2Darray {

    public String[][] toArray(List<List<?>> list) {
    String[][] r = new String[list.size()][];
    int i = 0;
    for (List<?> next : list) {
       r[i++] = next.toArray(new String[next.size()]);
    }
    return r;
}

    public static void main(String[]arg){
        String[][] sham;

        List<List<?>> mList = new ArrayList();

        List<String> a= new ArrayList();
        List<String> b= new ArrayList();
        a.add("a");  a.add("a");
        b.add("b");  b.add("b");
        mList.add(a); mList.add(b); 

        ListTo2Darray mt= new ListTo2Darray();
        sham=   mt.toArray(mList);

        System.out.println(sham[0][0]);
        System.out.println(sham[0][1]);
        System.out.println(sham[1][0]);
        System.out.println(sham[1][1]);
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-10T18:27:35.633

```
queries=[[1,5,3],[4,8,7],[6,9,1]]
h=queries.size();

        for(i=0;i<h;i++){
            for(j=0;j<3;j++){
                y[i][j]= ( ( queries.get(i) ).get(j) );
            }  
        } 
```

它将做的是在 y[i][j] 在这个语句中首先 queries.get(i) 将选择列表的第一个块，即在 i=0 它将选择 [1,5,3] 然后在j=0 它将从 [1,5,3] 中选择 1，依此类推..

循环解释：y[][]=[ 1 5 3 4 8 7 6 9 1 ]

注意：用您给定的数组替换查询。

请让我知道它是否有效，或者我应该提供另一种解决问题的方法**

# php - 如何通过组合数据行在 MySQL 中获得 TOP 10？

> ID：10043210
> 
> 赞同：3
> 
> 时间：2012-04-06T12:01:04.927
> 
> 标签：php, mysql, select

我有一个我似乎无法应对的挑战。

```
+------+--------+-----------+-------+
|  id  |  user  |  genres   | books |
+------+--------+-----------+-------+
|  1   |  John  |  crimes   |   2   |
|  2   |  John  |  scienc   |   1   |
|  3   |  John  |  nature   |   4   |
|  4   |  Pete  |  nature   |   3   |
|  5   |  Pete  |  crime    |   2   |
|  6   |  Mary  | nature    |   20  |
+------+--------+-----------+-------+ 
```

我想要一个 SQL 查询来获取用户拥有的书籍总量，无论类型如何，并希望按拥有最多的人排序。

在此示例中，您看到 Mary 有 20 本书，Pete 5 和 John 有 7 本书，所以我想要的结果将是一个数组，如：

```
result[0][user] = "Mary";
result[0][total] = 20;
result[1][user] = "John";
result[1][total] = 7;
result[2][user] = "Pete";
result[2][total] = 5; 
```

我怎样才能把它变成一个 SQL？我应该使用 CONCAT 还是 TOP 什么的？我使用 MySQL 和 PHP。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T12:07:27.180

你需要 GROUP BY 和 SUM

```
SELECT `user`, SUM(books) AS total_books
FROM `table`
GROUP BY `user`
ORDER BY total_books DESC 
```

如果您只想要前 10 个，那么您可以使用

```
SELECT `user`, SUM(books) AS total_books
FROM `table`
GROUP BY `user`
ORDER BY total_books DESC LIMIT 10` 
```

顺便说一句，您可能想稍微重新考虑一下您的架构。复制信息违反了规范化原则。您可能想要添加一个新`owners`表：

```
 +-----------+-------------+
  | owner_id  |  owner_name |
  +-----------+-------------+
  |     1     |    John     |
  |     2     |    Pete     |
  |     3     |    Mary     |
  +-----------+-------------+ 
```

然后`owner_id`在你的`books`表中引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T12:07:16.207

```
select user, sum(books) as total
from your_table
group by user
order by sum(books)
limit 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T12:18:39.970

```
SELECT sum(books) as book_count, user  FROM `books` GROUP BY (user) order by book_count DESC 
```

# xml - 修改 XML 时获取“无法设置只读属性：类的值：java.lang.String”

> ID：10043216
> 
> 赞同：0
> 
> 时间：2012-04-06T12:01:32.337
> 
> 标签：xml, groovy

我有以下 XML

```
<test>
<one>
    <one1>120</one1>
    <one2>115</one2>
</one>
<two>
    <two1>100</two1>
    <two2>50</two2>
</two> 
```

我需要将值更改为以下

```
<test>
<one>
    <one1>121</one1>
    <one2>116</one2>
</one>
<two>
    <two1>101</two1>
    <two2>51</two2>
</two> 
```

我的 XML 存储在本地。我编写了以下 groovy 代码来修改 XML

```
def xmlFile = "D:/Service/something.xml"
def xml = new XmlParser().parse(xmlFile)
xml.one[0].one1[0].each { 
  it.value = "201"
}
xml.one[0].one2[0].each { 
  it.value = "116"
}

xml.two[0].two1[0].each { 
  it.value = "101"
}
xml.two[0].two2[0].each { 
  it.value = "51"
}

new XmlNodePrinter(new PrintWriter(new FileWriter(xmlFile))).print(xml) 
```

但我收到了这个错误

> 引起：groovy.lang.ReadOnlyPropertyException：无法设置只读属性：类的值：java.lang.String

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:57:21.210

节点`.value()` [是 Node 类的一个方法](http://groovy.codehaus.org/api/groovy/util/Node.html#value%28%29)。您正在寻找相应的方法`setValue`方法。

```
def xml = new XmlParser().parseText('<test><one><one1>120</one1><one2>115</one2></one><two><two1>100</two1><two2>50</two2></two></test>');
xml.one[0].one1[0].setValue(121);
xml.one[0].one2[0].setValue(116);
xml.two[0].two1[0].setValue(101);
xml.two[0].two2[0].setValue(51); 
```

# iphone - UITableViewCell 重新加载行扩展和收缩时乱序

> ID：10043218
> 
> 赞同：0
> 
> 时间：2012-04-06T12:01:38.487
> 
> 标签：iphone, uitableview

我正面临一个关于扩展和缩小 UITableViewCell 的疯狂问题。当我只单击一个单元格时，它可以正常工作，但是当一个单元格保持打开状态时，单击另一个单元格打开会导致单元格紊乱。我想同时扩大和缩小。

这是我的来源。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    //Initialize the array.
    listOfItems = [[NSMutableArray alloc] init];

    //Add items
    [listOfItems addObject:@"1"];
    [listOfItems addObject:@"2"];
    [listOfItems addObject:@"3"];
    [listOfItems addObject:@"4"];
    [listOfItems addObject:@"5"];
    [listOfItems addObject:@"6"];
    [listOfItems addObject:@"7"];
    [listOfItems addObject:@"8"];

}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
    // Release anything that's not essential, such as cached data
}

#pragma mark Table view methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [listOfItems count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UILabel *aLabel;     UILabel *bLabel; UILabel *v1Label;  UILabel *v2Label;; UIView *v1;  UIView *v2;  

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        NSLog(@" cell null");
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        aLabel                      = [[[UILabel alloc] initWithFrame:CGRectMake(9.0, 8.0, 50.0, 20.0)] autorelease];
        aLabel.tag                  = 1;
        aLabel.font                 = [UIFont systemFontOfSize:30];
        [cell.contentView addSubview:aLabel];

        v1 = [[UIView alloc] initWithFrame:CGRectMake(0, 44, 320, 116)];
        v1.backgroundColor = [UIColor  redColor];
        v1.tag = 10;
        v1.hidden = YES;
        [cell.contentView addSubview:v1];
        [v1 release];     

        v2 = [[UIView alloc] initWithFrame:CGRectMake(0, 44, 320, 100)];
        v2.backgroundColor = [UIColor  blueColor];
        v2.tag = 11;
        v2.hidden = YES;
        [cell.contentView addSubview:v2];
        [v2 release];     

    }

    else  {
            aLabel =  (UILabel *)[cell.contentView viewWithTag:1];

            v1     =  (UIView *) [cell.contentView viewWithTag:10];          
            v2     =  (UIView *) [cell.contentView viewWithTag:11];     
    }

    aLabel.text = [listOfItems objectAtIndex:indexPath.row];

        if (SelectedIndexPath == indexPath.row) 
        {       
            if ([aLabel.text intValue] %  2) {
                v1.hidden = NO;
                v2.hidden = YES;
            }
            else  {
                v1.hidden = YES;
                v2.hidden = NO;
            }
        }
        else {
            v1.hidden = YES;
            v2.hidden = YES;
            }

    return cell;
}

-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (SelectedIndexPath == indexPath.row)  
    {
        return 100.0;
    }
    else {
        return 46.0;
    }

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if (SelectedIndexPath == -1)
    {
        OldSelectedIndexPath = indexPath.row;
        SelectedIndexPath = indexPath.row;

        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:NO];
    }
    else 
    {
        if (SelectedIndexPath == indexPath.row) 
        {
            OldSelectedIndexPath = SelectedIndexPath;
            SelectedIndexPath = -1;

            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:NO];

        }
        else 
        {
            SelectedIndexPath = indexPath.row;

            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:[NSIndexPath indexPathForRow:OldSelectedIndexPath inSection:indexPath.section], indexPath, nil] withRowAnimation:NO];

            OldSelectedIndexPath = SelectedIndexPath;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:58:45.280

问题出在

`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

或者可能是问题是由于释放。任何东西都会发布，而您仍在使用它。

第一条评论//所有发布并解释您的

`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:20:58.257

问题来自这样一个事实，即您的单元格在选择时将具有 160.0 的高度。

看这里

> v1 = [[UIView alloc] initWithFrame:CGRectMake(0, 44, 320, 116)];

您为 y 原点为 44 的视图提供 116 的高度。因此，您的单元格视图的总高度为 160.0

更改返回的值

> -(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath

匹配单元格的正确总高度。

# azure - 查看 Azure 服务总线队列的内容

> ID：10043219
> 
> 赞同：36
> 
> 时间：2012-04-06T12:01:40.513
> 
> 标签：azure, servicebus

我想查看当前位于队列中等待传递的消息（及其内容）。这样的工具存在吗？还是我应该为此编写自己的解决方案？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-06-26T00:53:51.120

新版本的[服务总线资源管理器](https://code.msdn.microsoft.com/Service-Bus-Explorer-f2abca5a)支持浏览队列中的消息，而无需将它们出列。

它利用了Service Bus SDK 2.0中的新[Peek功能](http://msdn.microsoft.com/en-us/library/windowsazure/jj908787.aspx)

```
QueueClient queueClient = QueueClient.Create("myQ");
BrokeredMessage message = queueClient.Peek(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-11T16:23:11.313

我们目前没有为我们的队列实现的“浏览”功能，可以让您这样做。它在即将发生的事情的清单上。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-27T08:37:31.297

Cerebrata 的 Azure Management Studio 还允许您浏览服务总线队列。请注意，这不是免费的。网站在这里：

[http://www.cerebrata.com/](http://www.cerebrata.com/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-06T06:08:50.263

Service bus explorer peek 选项允许您查看队列中的消息。Messages->Peek->MessageText [![在此处输入图像描述](../Images/a9643a2842a37b40f7d913bf5729029e.png)](https://i.stack.imgur.com/ZgBlz.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-29T09:38:01.523

在撰写本文时，[Service Bus Explorer](http://blogs.msdn.com/b/paolos/archive/2015/03/02/service-bus-explorer-2-6-now-available.aspx)允许您查看或接收队列中的消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-07T14:17:17.977

来自创建 AzureWatch（以及我所属的人）的名为[CloudMonix](http://cloudmonix.com)的新服务可以监视 ASB（或存储）队列中“下一个”消息的内容并将其显示出来以用于监视/警报/扩展目的

# asp.net - 无法将“ServiceReference1.EmployeeModel”类型的对象转换为“System.IConvertible”类型。为了避免该错误，v 可以做什么？

> ID：10043224
> 
> 赞同：0
> 
> 时间：2012-04-06T12:01:54.867
> 
> 标签：asp.net, json, web-services

无法将“ServiceReference1.EmployeeModel”类型的对象转换为“System.IConvertible”类型。究竟是什么高于错误，为了避免它我们必须做什么？

```
protected void btnCreate_Click(object sender, EventArgs e) 
{ 
  JavaScriptSerializer jsn = new JavaScriptSerializer(); 
  WebRequest request = WebRequest.Create("localhost:50506/Service1.svc/CreateEmployee";); 
  request.Method = "POST"; 
  request.ContentLength = 10; 

  EmployeeModel emp = new EmployeeModel(); //i added emp fields in to emp 
  Byte[] data = { Convert.ToByte(emp) }; 

  Stream requestStream = request.GetRequestStream(); 
  requestStream.Write(data, 0, data.Length); //in Byte[] data line the error is coming
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:38:35.713

代码在尝试将员工对象转换为字节数组时失败，因为员工类未实现 IConvertible 接口。

我不确定你想要完成什么，但因为你已经声明了 JavaScriptSerializer，看起来你可能想要返回 json。你可能正在寻找这个：

```
 void btnCreate_Click(object sender, EventArgs e) { 
     JavaScriptSerializer jsn = new JavaScriptSerializer(); 
     WebRequest request = WebRequest.Create("localhost:50506/Service1.svc/CreateEmployee";); 
     request.Method = "POST"; 
     request.ContentLength = 10;  
     EmployeeModel emp = new EmployeeModel(); 

     string data = jsn.Serialize(emp);
     Stream requestStream = request.GetRequestStream(); 
     requestStream.Write(data, 0, data.Length); 
  } 
```

# android - sqlite rand() 唯一_id 返回 sqlite

> ID：10043228
> 
> 赞同：0
> 
> 时间：2012-04-06T12:02:07.550
> 
> 标签：android, sqlite

如何从我的数据库中获取预定义（用户选择）的行数并确保我只显示一次？如果使用 rand() 限制 1，并返回游标相同的 _id 可能会返回两次或更多。我用这个

```
SQLiteDatabase db = this.getReadableDatabase();
     Cursor cursor = db.query("THESIS Order BY RANDOM() LIMIT 1",new String[] { "*" }, null, null, null, null, null);
     cursor.moveToFirst();
     return cursor; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:10:15.757

```
SELECT DISTINCT column_name(s) FROM table_name 
```

**不同的**世界将返回唯一的输出它不会给你重复的数据

# facebook - 提示用户向朋友发送应用请求

> ID：10043233
> 
> 赞同：1
> 
> 时间：2012-04-06T12:02:21.530
> 
> 标签：facebook, actionscript-3, flash, facebook-as3-api

我有一个 facebook 画布应用程序（flash）。我有一个正在访问该应用程序的用户。我有一个按钮，用户单击该按钮是为了邀请朋友加入该应用程序。

我知道这可以通过 js sdk 完成：http: [//developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/)

但是我已经在使用 facebook_as3_api，并且我宁愿避免使用多个 facebook api。

facebook_as3_api 有没有办法做到这一点，如果没有，为什么不呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:34:59.063

你在找这个吗？

[http://facebook-actionscript-api.googlecode.com/svn/release/current/docs/index.html](http://facebook-actionscript-api.googlecode.com/svn/release/current/docs/index.html)

# html - 如何在表格 td 中居中图像？

> ID：10043234
> 
> 赞同：7
> 
> 时间：2012-04-06T12:02:26.160
> 
> 标签：html, twitter-bootstrap

我想在表格列（td）中居中（中心+中间）图像和 h2 内的标题

CSS

```
.centered
{
    text-align:center;
} 
```

HTML

```
<table class="table table-bordered">
<tbody>

<tr>
    <td class="centered"><%= image_tag(prank.image_url, :size => "50x50") %></td>
    <td class="centered"><h2><%=prank.category.titleize%></h2></td>
</tr> 
```

![在此处输入图像描述](../Images/713bfbb5cc32d870f97c7abd712d295b.png)

我正在使用 Twitter Bootstrap

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-06T14:14:31.707

你可以试试：

```
.centered { vertical-align:middle; text-align:center; }
.centered img { display:block; margin:0 auto; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:42:47.730

这是我的做法。我调用了基本的 twitter css 文件。比我在我的默认文件中调用我的默认 css 文件之后我有这个类

```
.table-center th, .table-center td {
    border-top: 1px solid #DDDDDD;
    line-height: 18px;
    padding: 8px;
    text-align: center;
    vertical-align: top;
} 
```

然后在我的桌子上我这样做：

```
<table class="table table-center ....">...</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T19:27:49.090

## 这应该工作

```
.cntr
{
        margin: 0 auto;
} 
```

* * *

```
<div class="cntr" style="width: 130px">
         <img src="me.jpg" alt="me"  style="width: 130px" />
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T12:10:42.320

看看这个[http://jsfiddle.net/k6Nvk/1/](http://jsfiddle.net/k6Nvk/1/)

只需添加您的`<td>`>>`<td align="center" valign="middle"><image path></td>`

你也可以使用 css check [DEMO来做到这一点](http://jsfiddle.net/k6Nvk/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-17T13:30:08.370

NB **align="center"**在 HTML 5 中不受支持；见[http://www.w3schools.com/tags/tag_td.asp](http://www.w3schools.com/tags/tag_td.asp)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-06T12:23:35.027

您所要做的就是从左右声明边距（顶部和底部可选）：

```
.center {
margin-left: 25%;
margin-right: 25%;
} 
```

或者你可以使用

```
.center
{
margin-left: auto;
margin-right: auto;
width: 20%;
} 
```

如果您不必只是不使用`<table>`标签。改为使用`<div>`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-06T12:06:24.973

尝试

```
.centered{width: 50px; margin: 0px, auto, 0px, auto;} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-06T12:06:25.753

试一试，但不能 100% 确定它是否有效：

```
.centered {
    display: block;
    margin-left: auto;
    margin-right: auto;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-04-06T12:49:07.827

我会尝试`text-align: center;`内联样式=“”。

# java - 如何从 jar 下的相对路径获取 URL？

> ID：10043239
> 
> 赞同：0
> 
> 时间：2012-04-06T12:03:15.903
> 
> 标签：java, url, filepath

到目前为止我所做的是：

```
/** Default location of help files folder */
private static final String DEFAULT_PATH = "../../../../resources/files/help/";
/** A 404 error file */
private static final String ERROR_404 = "../../../../resources/files/help/404.html";

/**
 * @param fileName
 * @return The URL of file, if found at default location, otherwise a 404 error page URL.
 */
public static URL getURL(String fileName) throws MalformedURLException{
    URL url = (new File(ERROR_404)).toURI().toURL();
    System.out.println(url);
    url = (new File(DEFAULT_PATH + fileName)).toURI().toURL();
    System.out.println(url);
    return url;
} 
```

输出：

> 文件：/H:/My%20Project/Project%20Name%20Module/../../../../resources/files/help/404.html 文件：/H:/My%20Project/Project%20Name %20Module/../../../../resources/files/help/plazaCode.html

通过 NetBeans 创建的 JAR 中的文件夹层次结构：

![在此处输入图像描述](../Images/30dff7b2b1f7396b6c81580253d7663c.png)

我在 Windows 7，JDK 7 上。

**更新：**

实际上，我希望通过以下`URL`方法`JTextPane`显示 HTML 页面：

```
textPane.setPage(URL url); 
```

我能有比这更好的解决方案吗？并具有相同的文件夹层次结构..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:38:50.517

1.  `404.html`由于这是一个应用程序资源，它可能最终会嵌入到一个 Jar 中。
2.  ***无法***使用`File`对象 访问档案中的资源。
3.  `URL getURL(String fileName)`为避免混淆，请将其更改为`URL getURL(String resourceName)`.
4.  `Class.getResource(String)`尽可能多地使用您之前的问题中讨论的内容。
5.  '相对' URL 在那个阶段变得危险，因为它们依赖于调用它们的类的包，我通常通过在整个路径前加上一个前缀来使它们成为'绝对'，`/`这实际上意味着'从根目录查找此资源的运行时类路径”。

所以这`String`可能是（按照已经建议调整其余代码）：

```
private static final String ERROR_404 = "/resources/files/help/404.html"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:48:17.507

您可以使用`URL url = getClass().getResource("...")`. 可能是“/files/help/404.html”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:11:34.303

当您以这种方式创建文件时，您将获得一个相对文件（因此是一个相对 URL）。要从该路径获取绝对 URL，您需要先获取绝对文件。试试这个：

```
new File(ERROR_404).getCanonicalFile().toURI().toURL() 
```

（编辑：在你上面的 JTextPane 信息之后）我从来没有尝试过这个，所以我不知道为什么这不起作用。但这是一个不同的问题，您应该提出一个新问题。

# jquery - JQuery 模态对话框在 Chrome、IE、Safari 中的高度加倍。忽略 maxHeight

> ID：10043240
> 
> 赞同：1
> 
> 时间：2012-04-06T12:03:23.477
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

这是问题的屏幕截图（在 IE 中）：

[http://img401.imageshack.us/img401/7580/screenield.jpg](http://img401.imageshack.us/img401/7580/screenield.jpg)

上述效果——对话窗口的高度加倍，内容（JW 播放器）被推到底部——发生在 IE8、Safari 和 Chrome 中。该窗口在 IE9 中根本不启动。在 FF 中工作没有问题。

我正在使用带有 UI 版本 1.8.18 的 JQuery 1.7.1，以及对话框的默认打包 CSS。我试过不指定高度，然后指定maxHeight，都无济于事。

启动对话框的完整代码如下。它包含许多可能对问题多余的细节，但基本上是创建链接以启动具有动态内容的对话。精确的模态设置在最后。

所有帮助表示赞赏。

```
$(document).ready(function(){

var num = 0;

//Find [popup] instances, increment the number
$("li:contains('[popup]')").each(function() {
    var nextnumber = num++;

    //add a general and a unique class to the list item containing the hook
    $(this).addClass('popup' + ' ' + 'pop' + nextnumber);

    //Split on the hook, and save remainder of text (the path to file) as the 'path' attr
    var splitpath = $(this).text().split("[popup]");
    $(this).attr("path", splitpath[1]); 
    var path = $(this).attr("path");
    //alert($(this).attr("path"));

    //Get the previous list item (the call to action), and give it general and unique classes also.
    $thisArrow = $(this).parent().prev();
    $thisArrow.addClass('arrow' + ' ' + 'arr' + nextnumber);

    //Make the call to action an anchor link, with a general class identifier.
    $thisArrow.wrapInner('<a class="opener" title="Click to view video" path ="' + path + '"/>');

    //store path to poster as var, and hide the .popup li's
    $('li.popup').parent().hide();
});

$('.opener').click(function() {
    var Header = $(this).text();
    var popupURL = $(this).attr("path");
    var popupBG = "../contents/css/images/white-nontrans.jpg";

    var thisDialog = $('<div></div>').html('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="mediaplayer1" name="mediaplayer1" width="550" height="420">')
        .append('<param name="movie" value="../mediaplayer/player.swf">')    
        .append('<param name="autostart" value="true">')  
        .append('<param name="allowfullscreen" value="true">')
        .append('<param name="allowscriptaccess" value="always">')
        .append('<param name="bgcolor" value="#FFFFFF">')
        .append('<param name="wmode" value="opaque">') 
        .append('<param name="flashvars" value="file=' + popupURL + '&image=' + popupBG + '">') 
        .append('<embed id="mediaplayer1" name="mediaplayer2" src="../mediaplayer/player.swf" width="550" height="420" allowfullscreen="true" allowscriptaccess="always" autostart="true" bgcolor="#FFFFFF" wmode="opaque" flashvars="file=' + popupURL + '&image=' + popupBG + '" />')
        .append('</object>')

    .dialog({ autoOpen: false, title: Header, modal: true, maxHeight: 500, width:580 });
    thisDialog.dialog('open');
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:45:35.613

You have both the `<object>` and `<embed>` elements being added so the dialog actually contains 2 players. However the first one (`<object>`) is broken. The JavaScript that starts

```
var thisDialog = $('<div></div>').html(... 
```

is adding the `<object>` and jQuery is automatically closing the element before adding the `<param>` children. Therefore the appends are being written to the parent `<div>`.

You probably want to use either `<object>` or `<embed>` depending on which browser the page is being rendered by. I'd check the [documentation for JW Player](http://www.longtailvideo.com/support/jw-player/13/embedding-flash) for a detailed explanation of how to use one or the other.

# android - 在 Android 中使用 Threading、Runnable 和 Message

> ID：10043244
> 
> 赞同：1
> 
> 时间：2012-04-06T12:04:01.590
> 
> 标签：android

这是我的场景。A 类实现了 Runnable。当用户单击一个按钮时，将显示一个进度对话框并调用该方法`searchMap()`来搜索地址。对话框在 10 秒后消失。我真的误解了如何执行该`run()`方法。这是我令人毛骨悚然的代码。

```
public class AddLocationMapActivity extends MapActivity implements Runnable {
private ProgressDialog progressDialog;
private MyHandler myHandler; 
private Message msg;

@Override
public void run() {
    mapCurrentAddress();
}
public void mapLocation(View v) // click event here{
    progress();
    Thread thread = new Thread(this);
    thread.start();
}
private class MyHandler extends Handler{
@Override
public void handleMessage(Message msg) {    
    super.handleMessage(msg);
    switch(msg.what) {
        case NOT_OK_MESSAGE: // Fail
            alert(AddLocationMapActivity.this, message());
            progressDialog.dismiss();
        break;
        case OK_MESSAGE: // Success
            found(); // Point to the appropiate address
            progressDialog.dismiss();
        break;
        case EXPTION_MESSAGE: // Exception
            alert(AddLocationMapActivity.this, "Unexpected error");
            progressDialog.dismiss();
        break;
        }
    }
}
protected void mapCurrentAddress() {
    String addressString = addressText.getText().toString();
    Geocoder g = new Geocoder(this);
    List<Address> addresses;
    myHandler = new MyHandler();
    msg = myHandler.obtainMessage();
    try {
        addresses = g.getFromLocationName(addressString, 1);
        if (addresses.size() > 0) {
            //address = addresses.get(0);
            msg.what = OK_MESSAGE;
            myHandler.sendEmptyMessage(OK_MESSAGE);

        } else {
            // show the user a note that we failed to get an address
            myHandler.sendEmptyMessage(NOT_OK_MESSAGE);
        }
    } catch (IOException e) {
        // show the user a note that we failed to get an address
        //e.printStackTrace();
        myHandler.sendEmptyMessage(EXPTION_MESSAGE);
    }
}
    private void progress() {
    progressDialog = ProgressDialog.show(this, 
            "Checking", "Contacting Map Server");
    Thread progressThread = new Thread();
    progressThread.start();
}
} 
```

当点击事件发生时，程序失败并出现异常**Uncaught Handler**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:48:08.783

这是我的一些线程代码，不会泄露太多......

```
progress = ProgressDialog.show(this, "", "Loading...", true);

new Thread(new Runnable() {
  @Override
  public void run()
  {
    // get some network content

    Chooser.this.runOnUiThread(new Runnable() {
      @Override
      public void run()
      {
        progress.dismiss();

        // update the UI
      }
    });
  }
}).start(); 
```

# java - 在类路径中包含太多 jar 文件的影响

> ID：10043245
> 
> 赞同：6
> 
> 时间：2012-04-06T12:04:06.383
> 
> 标签：java, jar

我有一个很大的 jar 文件，它对其他 jar 文件有很多依赖，大约 40 个文件，总计几百 MB。我担心这个 jar 文件的依赖关系问题，所以我想在编译时将所需的依赖关系添加到这个 jar 的 Manifest 文件中。我想知道这种方法是否有负面的缺点。我已经对类加载时间进行了一些测试，但它们似乎并没有受到太大影响。

我想将依赖项移动到 jar 清单中的另一个原因是，由于文件太多，命令行变得冗长且难以阅读。我们有很多 -XX 选项等也被传递到 JVM，但看起来没有办法在清单或某种配置文件中设置这些选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:10:48.700

如果你依赖这些罐子，那就没关系了。实际上，40 个依赖项并没有那么多，所以不要认为这是一个问题。只要确保您不包含未使用的依赖项即可。

# android - 检索当前正在运行的应用程序的导航历史记录

> ID：10043246
> 
> 赞同：3
> 
> 时间：2012-04-06T12:04:07.923
> 
> 标签：android, android-activity

我想要一种向用户显示他当前在应用程序中的位置的方法。例如，如果我有`activity A`,`activity B`等`activity C`...如果他导航到`activity E`（例如）..他应该能够看到他如何登陆当前屏幕的历史记录--（从 Home->E 或从 home->a->b 然后 e 或类似的。准确的历史..)..我已经阅读了开发者论坛上的活动堆栈，但仍然没有办法连接到堆栈跟踪活动...请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:21:05.697

您可以`getStackTrace()`用于获取导航信息：

```
 StackTraceElement traceElement = Thread.currentThread()  
  .getStackTrace()[3];
  String logText = String.format(CLASS_METHOD_LINE_FORMAT,  
  traceElement.getClassName(), traceElement.getMethodName(),  
  traceElement.getLineNumber(), traceElement.getFileName());  
  Log.d("messg", logText); 
```

或者

猫 /data/anr/traces.txt

但是您需要具有root访问权限才能修改其中的文件`/data/`

# bash - exo-open 在终端脚本中 - 程序随终端关闭

> ID：10043247
> 
> 赞同：1
> 
> 时间：2012-04-06T12:04:08.937
> 
> 标签：bash, xfce

我编写了一个简单的 bash 脚本，提示输入文件或目录路径并使用 exo-open 打开它，然后我将脚本分配给键盘快捷键，以便我可以***随时******`CTRL`通过`SHIFT``ALT``O`***终端打开任何***内容***迅速的：

![键盘绑定](../Images/5f50132ef9be608214c298138cbb6e71.png)

和脚本：

```
#!/bin/bash

# CD to the home folder (not sure if this is needed, no harm either way)
cd ~/

# Request the filepath
echo -e "\e[1;31mEnter a file or directory:\e[00m"
read -e -i "~/" filename

# Convert ~/ to /home/username/
filename=`eval "echo $filename"`
echo -e "opening\e[1;32m" $filename "\e[00m"

# Open the file
exo-open "$filename"

echo "press enter to exit"
read enter 
```

我的问题是生成的程序链接到终端，当终端关闭时，它会带上程序 - 作为一个简单的解决方法，我最后有另一个用户提示来阻止终端关闭；有谁知道我如何允许终端关闭但保持结果程序打开？

我曾经/尝试过的一些想法：

*   在 exo-open 之后运行`disown $!`（没用）
*   使用`nohup`（没用）
*   从 PPID 运行 exo-open（不知道怎么做）

在我的智慧结束:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:57:44.267

我得到了 Xfce 论坛成员**ToC的回答**

[http://forum.xfce.org/viewtopic.php?pid=25670](http://forum.xfce.org/viewtopic.php?pid=25670)

原来你可以像这样使用setsid：

```
#!/bin/bash

# CD to the home folder (not sure if this is needed, no harm either way)
cd ~/

# Request the filepath
echo -e "\e[1;31mEnter a file or directory:\e[00m"
read -e -i "~/" filename

# Convert ~/ to /home/username/
filename=`eval "echo $filename"`
echo -e "opening\e[1;32m" $filename "\e[00m"

# Open the file
setsid exo-open "$filename" 
```

# php - 忽略第一个循环结果

> ID：10043250
> 
> 赞同：0
> 
> 时间：2012-04-06T12:04:33.057
> 
> 标签：php, loops, for-loop

我有一个 FOR 循环，它列出了某个目录中的所有文件。其中一个结果也是 INDEX.PHP，这是我不需要的结果。这是循环的第一个结果/条目......

有没有办法跳过第一个结果并从第二个开始循环？请帮忙。

```
 <?php
$myDirectory = opendir('.');

while($entryName = readdir($myDirectory)) 
{
    $dirArray[] = $entryName;
}

closedir($myDirectory);

$indexCount = count($dirArray);
echo '<h5>There are ' . $indexCount . ' files in the Media Center</h5>';

sort($dirArray);

echo '<table width="100%">';
echo '<tr>';
echo '<th width="33%" align="center" class="admin_th" style="border-radius: 10px 0 0 0">Download</th>';
echo '<th width="33%" align="center" class="admin_th">Filetype</th>';
echo '<th width="33%" align="center" class="admin_th" style="border-radius: 0 10px 0 0">Filesize (in bytes)</th>';
echo '</tr>';

for($index = 0; $index < $indexCount; $index++) 
{
    if (substr("$dirArray[$index]", 0, 1) != ".")
    {
        echo '<tr><td width="33%" align="center" class="admin_td-even"><a href="' . $dirArray[$index] . '">' . $dirArray[$index] . '</a></td>';
        echo '<td width="33%" align="center" class="admin_td-odd">';
        echo strtoupper(substr($dirArray[$index], -3));
        echo '</td>';
        echo '<td width="33%" align="center" class="admin_td-even">';
        echo filesize($dirArray[$index]);
        echo '</td>';
        echo '</tr>';
    }
}
echo '</table>';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:06:26.667

一旦你看到你不想要的，放置一个[`continue`](http://php.net/manual/en/control-structures.continue.php)支持循环到 for 条件的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:10:11.920

我看到了两种方法：

*   您可以稍后启动一个索引：

而不是`for($index = 0; $index < $indexCount; $index++) { ...}`，做

`for($index = 1; $index < $indexCount; $index++) { ...}`

*   您还可以添加条件：

例如：

```
for ($index = 0; $index < $indexCount; $index++) {
  if ($dirArray[$index] == 'INDEX.PHP') continue;
  // rest of the loop
} 
```

* * *

但它们是改进代码的几种方法。而不是使用`opendir()`and `readdir()`，您可以像这样使用 scandir ：

```
foreach (scandir('.') as $file) {

} 
```

但看起来您想获取一些媒体文件并显示它们。因此，更好的解决方案是使用[glob()](http://php.net/manual/en/function.glob.php)函数，如下所示：

```
foreach (glob("*{.mp3,.mp4,.jpg,.png}", GLOB_BRACE) as $filename) {
    echo "$filename size " . filesize($filename) . "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:06:21.737

循环是否将文件作为对象返回？那么你可以在文件名参数中添加一个 if 语句

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T12:11:19.593

```
 for($index = 0; $index < $indexCount; $index++) 
    {
        //skip first entry
        if($index == 0) continue;
        if (substr("$dirArray[$index]", 0, 1) != ".")
        {
            echo '<tr><td width="33%" align="center" class="admin_td-even"><a href="' . $dirArray[$index] . '">' . $dirArray[$index] . '</a></td>';
            echo '<td width="33%" align="center" class="admin_td-odd">';
            echo strtoupper(substr($dirArray[$index], -3));
            echo '</td>';
            echo '<td width="33%" align="center" class="admin_td-even">';
            echo filesize($dirArray[$index]);
            echo '</td>';
            echo '</tr>';
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T12:12:21.070

只需将当前文件的名称与所需文件进行比较，即可忽略所需文件。例如，您可以在列表检索中执行此操作：

```
$myDirectory = opendir('.');

while( false!==($entryName = readdir($myDirectory)) ) 
{
    if( strtolower($entryName)=='index.php' )continue;
    $dirArray[] = $entryName;
}

closedir($myDirectory); 
```

不要依赖索引（文件数），因为您`index.php`可能不是列表中的第一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T12:16:24.447

```
for($index = 0; $index < $indexCount; $index++) {
 if(index == 0) continue;
 // other stuff
} 
```

# symfony - 如何在树枝模板中的“form_row”上添加 CSS 类

> ID：10043251
> 
> 赞同：10
> 
> 时间：2012-04-06T12:04:44.187
> 
> 标签：symfony, twig

我想知道如何在 twig 的“{{ form_row() }}”上添加一个 CSS 类。目前，我有这个代码：

```
{{ form_row(form.username, {'label' : "Login", 'attr': {'class': 'loginForm'}}) }} 
```

...但是 HTML 代码中没有使用 CSS 类“loginForm”。

谢谢 ：） ！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T21:31:38.397

If you want the common class for the form_row (it means one class for form_label, form_widget and form_errors), you should customize a field_row block.

This article explains how to customize form fields: [How to customize Form Rendering](http://symfony.com/doc/current/cookbook/form/form_customization.html). There are some methods to do this.

For example I'm using Method 2 ([How to customize Form Rendering: Method 2](http://symfony.com/doc/current/cookbook/form/form_customization.html#method-2-inside-a-separate-template)):

```
{% extends 'form_div_layout.html.twig' %}

{% block field_row %}
{% spaceless %}
    {% set class='' %}
    {% if attr.class is defined %}
    {% set class = 'class="' ~ attr.class ~ '"' %}
    {% endif %}

    <div {{ class }} >
        {{ form_label(form, label|default(null)) }}
        {{ form_errors(form) }}
        {{ form_widget(form) }}
    </div>
{% endspaceless %}
{% endblock field_row %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T09:13:58.863

我的答案与 nni6 非常相似，但它允许您通过整个 attr 数组。

我的 HTML 结构适用于 Twitter Bootstrap，但你可以拥有任何你想要的东西。如果有任何错误，此示例还会在包装器 div 上放置一个错误类 - 这部分不是必需的，但在使用 Bootstrap 时很有用：

```
{% extends 'form_div_layout.html.twig' %}

{% block field_row %}
{% spaceless %}
    {% set field_row_classes = ['control-group'] %}
    {% if errors|length > 0 %}
        {% set field_row_classes = field_row_classes|merge(['error']) %}    
    {% endif %}

    <div class="{{ field_row_classes|join(' ') }}">
        {{ form_label(form, label|default(null)) }}
        <div class="controls">
            {{ form_widget(form, { 'attr' : attr|default({}) }) }}
            {{ form_errors(form) }}
            {% if help is defined %}
                <p class="help-block">{{ help }}</p>
            {% endif %}
        </div>
    </div>
{% endspaceless %}
{% endblock field_row %} 
```

这里的区别是我`form_widget`用`attr`数组调用（如果指定了，默认为 {}）

现在您可以像往常一样设置表单，但要通过自定义类：

```
{{ form_row(myentity.myproperty, { 'label' : 'mylabel', 'attr' : { 'class' : 'myclass' }}) }} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-01T01:52:56.617

**这篇文章需要更新！**

从 Symfony 4.3 开始，该`row_attr`选项允许添加属性（以及一些类）。让我们检查这些链接：

*   这里： [https ://symfony.com/blog/new-in-symfony-4-3-more-form-improvements#row-attributes-in-form-themes](https://symfony.com/blog/new-in-symfony-4-3-more-form-improvements#row-attributes-in-form-themes)

*   或更具体地说：[https ://symfony.com/doc/current/reference/forms/types/form.html#row-attr](https://symfony.com/doc/current/reference/forms/types/form.html#row-attr)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T21:33:45.947

我使用此代码在 symfony 中配置引导程序

```
{% block field_row %}
{% spaceless %}
    <div class="control-group {% if errors|length > 0 %}error{% endif %}">
        {{ form_label(form, label, { 'attr': { 'class': 'control-label' } }) }}
        <div class="controls">
            {{ form_widget(form, { 'attr' : attr|default({}) }) }}
            {{ form_errors(form) }}
        </div>
    </div>
{% endspaceless %}
{% endblock field_row %} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-23T10:18:06.423

在不覆盖块的情况下完成此操作的最简单方法是：

```
{% set attr = {'class' : form.myElement.vars.attr.class ~ ' addedClasses...', 'style' : form.myElement.vars.attr.style ~ '; addedStyles...'} %}
{{- form_row(form.myElement, {'attr' : attr}) -}} 
```

# html - 悬停后如何保持字宽（悬停时字体从浅变为粗体）？

> ID：10043252
> 
> 赞同：2
> 
> 时间：2012-04-06T12:04:47.830
> 
> 标签：html, css, fonts, hover

我有一些词，例如 WORD 和 REALLYLONGWORD。两者都有浅色字体，我希望它们在鼠标悬停时变为粗体。两者都有`float: left; width: auto;`。我不能给他们固定的宽度。

问题是当我将 WORD 悬停时，REALLYLONGWORD 会跳到右边，因为 WORD 字体变得更粗（和更大的宽度值）。是否有任何仅限 CSS 的解决方法？

编辑（我无法回答我自己的问题，所以我在下面发布答案）：我找到了一些纯 CSS 的解决方案。HTML：

```
<div class="thtitled-thtitle"><div class="thtitles-title">WORD</div><div class="thtitles-titlebold">WORD</div></div>
<div class="thtitled-thtitle"><div class="thtitles-title">REALLYLONGWORD</div><div class="thtitles-titlebold">REALLYLONGWORD</div></div> 
```

CSS：

```
.thtitled-thtitle { float: left; }
.thtitles-titlebold { visibility: hidden; color: #F5F5F5; cursor: pointer; float: left; font-family: 'BOLDFONT',Arial,sans-serif; font-size: 72px; line-height: 96px; min-height: 100px; text-transform: uppercase; width: auto; word-wrap: break-word; } 
.thtitles-title { color: #F5F5F5; cursor: pointer; font-family: 'LIGHTFONT',Arial,sans-serif; font-size: 72px; line-height: 96px; min-height: 100px; text-transform: uppercase; width: auto; word-wrap: break-word; position: absolute; } 
.thtitles-title:hover { font-family: 'BOLDFONT',Arial,sans-serif; } 
```

基本上，我创建了一个带有 BOLD 字体的隐藏容器（它的宽度是主宽度）并将 LIGHT 字体放入其中。悬停后它仍然有粗体字的宽度，所以没有跳跃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:08:34.850

使用字母间距。例如`{letter-spacing:0.04em}`

如果您为 WORD 设置足够的字母间距以使其在粗体时与同一个单词的整体宽度相同，并在粗体时删除字母间距，其他所有内容都将保持不变。

它有效 - 试试这个（这只是演示这个概念 - 不是我推荐的生产）：

```
<b>Rotterdam</b><br>
<span style="letter-spacing:0.04em">Rotterdam</span><br/>
<b>and</b><br>
<span style="letter-spacing:0.04em">and</span><br/>
<b>Oslo</b><br>
<span style="letter-spacing:0.04em">Oslo</span><br/>
<b>letter</b><br>
<span style="letter-spacing:0.04em">letter</span><br/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:13:03.230

您根本不想为字体添加任何宽度，我建议您完全删除宽度属性。（我也希望你注意到你的 CSS 中的书写错误，应该是宽度）

接下来是为 ahref 分配一个类，这可以使用 SPAN 标签轻松完成

一旦在 css 中完成，只需执行以下操作： .firstlinkclass{ font-weight: bold; }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T20:52:24.080

我知道很久以前有人问过这个问题，但我只是想出了一个解决方案来修复运行良好的跳转，所以我想我会分享。

不要在悬停时使字体变粗，而是使其具有文本阴影。没有跳转，一样的效果，一行CSS。

# image - 如何通过 htaccess 重写图像路径？

> ID：10043253
> 
> 赞同：1
> 
> 时间：2012-04-06T12:04:50.203
> 
> 标签：image, .htaccess, path, rewrite

我有两个网站，例如，

*   www.example1.com
*   www.example2.com

example1 已经启动，并且有我需要放入我的 example2 网站的所有图像。

我想从 example1 中获取所有图像以放入我的 example2 网站，例如，

www.example1.com/media/img/image1.jpg <-- 获取这张图片并放入 www.example1.com/media/img/image2.jpg

我希望这样做，这样我就不必将所有图像从 example1 目录复制到 example2

谢谢你们... ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:50:59.630

启用 mod_rewrite 和 .htacces。然后将此代码放在 DOCUMENT_ROOT 下的 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

#RewriteCond %{HTTP_HOST} ^(www\.)?example2\.com$ [NC]
RewriteRule ^media/img/ http://www.example1.com%{REQUEST_URI} [L,R=301,NC] 
```

# c# - 如何修复 System.NullReferenceException：对象引用未设置为对象的实例

> ID：10043254
> 
> 赞同：4
> 
> 时间：2012-04-06T12:04:54.523
> 
> 标签：c#, .net

编辑：这个问题已经解决，非常感谢 Reniuz 5 小时的工作和对这个问题的研究，谢谢大家。

NullReferenceException：对象引用未设置为对象的实例。在下面的代码上，我已经搜索了 7 到 8 个小时，现在试图修复它。

```
private void buttonAddEffect_Click_1(object sender, EventArgs e)
{
    EffectSelectorForm effectSelectorForm = new EffectSelectorForm(Effects);
    if (effectSelectorForm.ShowDialog(this) == DialogResult.OK)
    {
        // create a new instance of the selected effect as we may want multiple copies of one effect
        Effect effect = (Effect)Activator.CreateInstance(effectSelectorForm.SelectedEffect.GetType());
        audioGraph.AddEffect(effect);
        int index = checkedListBox1.Items.Add(effect, true);
        checkedListBox1.SelectedIndex = index;
    }
    //MessageBox.Show(String.Format("I have {0} effects", Effects.Count));
} 
```

错误就行了： EffectSelectorForm effectSelectorForm = new EffectSelectorForm(Effects);

班上：

```
namespace WindowsFormsApplication13
{
    public partial class EffectSelectorForm : Form
    {
        public EffectSelectorForm(ICollection<Effect> effects)
        {
            InitializeComponent();
            listBoxEffects.DisplayMember = "Name";
            listBoxEffects.DataSource = effects;
        }

        private void buttonOK_Click(object sender, EventArgs e)
        {
            this.DialogResult = DialogResult.OK;
            this.Close();
        }

        public Effect SelectedEffect
        {
            get
            {
                return (Effect)listBoxEffects.SelectedItem;
            }
        }

        private void listBoxEffects_DoubleClick(object sender, EventArgs e)
        {
            buttonOK_Click(sender, e);
        } 
```

这应该做的是当 effectSelectorForm 加载时，它应该列出所有语音转换器选项，但它不这样做....并重新编写了大约 400 行代码以使其在我的应用程序中运行，但现在我遇到了这个问题，我并没有放弃到目前为止所做的所有努力。如果它加载到另一个项目中，为什么不在这个项目中？我一遍又一遍地检查代码几个小时，并认为我错过了一些东西，但没有。

任何帮助都会很棒。

堆

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.NullReferenceException: Object reference not set to an instance of an object.
   at WindowsFormsApplication13.pwn4g3.buttonAddEffect_Click_1(Object sender, EventArgs e) in F:\Users\Tom\Desktop\New folder\New folder (2)\TestApp\pwn4g3\PWN4G3\MainForm2.cs:line 1758
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

效果.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace JSNet
{    

    public abstract class Effect
    {
        private List<Slider> sliders;
        public float SampleRate { get; set; }
        public float Tempo { get; set; }
        public bool Enabled { get; set; }

        public Effect()
        {
            sliders = new List<Slider>();
            Enabled = true;
            Tempo = 120;
            SampleRate = 44100;
        }

        public IList<Slider> Sliders { get { return sliders; } }

        public Slider AddSlider(float defaultValue, float minimum, float maximum, float increment, string description)
        {
            Slider slider = new Slider(defaultValue, minimum, maximum, increment, description);
            sliders.Add(slider);
            return slider;
        }

        public abstract string Name { get; }

        // helper base methods
        // these are primarily to enable derived classes to use a similar
        // syntax to JS effects
        protected float slider1 { get { return sliders[0].Value; } }
        protected float slider2 { get { return sliders[1].Value; } }
        protected float slider3 { get { return sliders[2].Value; } }
        protected float slider4 { get { return sliders[3].Value; } }
        protected float slider5 { get { return sliders[4].Value; } }
        protected float slider6 { get { return sliders[5].Value; } }
        protected float slider7 { get { return sliders[6].Value; } }
        protected float slider8 { get { return sliders[7].Value; } }
        protected float min(float a, float b) { return Math.Min(a, b); }
        protected float max(float a, float b) { return Math.Max(a, b); }
        protected float abs(float a) { return Math.Abs(a); }
        protected float exp(float a) { return (float)Math.Exp(a); }
        protected float sqrt(float a) { return (float)Math.Sqrt(a); }
        protected float sin(float a) { return (float)Math.Sin(a); }
        protected float tan(float a) { return (float)Math.Tan(a); }
        protected float cos(float a) { return (float)Math.Cos(a); }
        protected float pow(float a, float b) { return (float)Math.Pow(a, b); }
        protected float sign(float a) { return Math.Sign(a); }
        protected float log(float a) { return (float)Math.Log(a); }
        protected float PI { get { return (float)Math.PI; } }

        protected void convolve_c(float[] buffer1, int offset1, float[] buffer2, int offset2, int count)
        {
            for (int i = 0; i < count * 2; i += 2)
            {
                float r = buffer1[offset1 + i];
                float im = buffer1[offset1 + i + 1];
                float cr = buffer2[offset2 + i];
                float ci = buffer2[offset2 + i + 1];
                buffer1[offset1 + i] = r * cr - im * ci;
                buffer1[offset1 + i + 1] = r * ci + im * cr;
            }
        }

        public virtual void Init()
        {
        }

        public abstract void Slider();

        public virtual void Block(int samplesblock)
        { 
        }

        public abstract void Sample(ref float spl0, ref float spl1);

        public override string ToString()
        {
            return Name;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:12:58.840

如果问题在这里是 100%

```
EffectSelectorForm effectSelectorForm = new EffectSelectorForm(Effects); 
```

只有一种可能的解释：属性/变量“效果”未正确初始化...调试代码以查看传递给对象的内容。

**几个小时后**编辑****

 **有一些问题：

*   MEF 属性 [Import] 没有按预期工作，因此我们暂时将其替换为手动填充的 List<>。当集合为空时，它会导致代码稍后出现异常，当方法尝试获取所选项目的类型但没有时。

*   几个事件处理程序没有连接到控制事件

一些问题仍然存在，但我相信 OP 的原始问题已得到解决。其他问题与此无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:21:08.587

在调试期间，中断所有抛出的异常。调试->异常

检查所有“抛出”异常。F5，代码将停在违规行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T00:57:35.480

我有同样的问题，但它只发生在 Godaddy 的已发布网站上。在我的本地主机中没有问题。

该错误来自我试图为标签分配值的 aspx.cs（代码隐藏文件）。从后面的代码中看来，标签 Text 似乎为空。所以我所做的只是将 ASPX 文件中的所有标签文本属性从 Text="" 更改为 Text=""。

问题消失了。我不知道为什么托管版本会发生错误，但不会在我的本地主机上发生错误，也没有时间找出原因。但它现在工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T11:34:03.123

I was getting this same error, but for me this was due to a method in a base class (in Project A) having the output type changed from a non-void type to void. A child class existed in Project B (which I didn't want used and had marked obsolete) that I missed when performing this update and hence started throwing this error.

> 1>CSC : error CS8104: An error occurred while writing the output file: System.NullReferenceException: Object reference not set to an instance of an object.

Original Code:

```
[Obsolete("Calling this method will throw an error")]
public override CompletionStatus Run()
{
    throw new CustomException("Run process not supported.");
} 
```

Revised Code:

```
[Obsolete("Calling this method will throw an error")]
public override void Run()
{
    throw new CustomException("Run process not supported.");
} 
```**

# iphone - 如何减小 UINavigation Bar 大小以及如何将后退按钮与导航栏分开

> ID：10043255
> 
> 赞同：0
> 
> 时间：2012-04-06T12:04:55.007
> 
> 标签：iphone

我正在开发一个应用程序。我需要减小 UINavigationBar 的大小，为此我使用下面的代码。

```
CGFloat navBarHeight = 10.0f;    
CGRect frame = CGRectMake(50.0f, 0.0f, 320.0f, navBarHeight);
[self.navigationController.navigationBar setFrame:frame]; 
```

但是当我转到下一页时，该页面导航栏也发生了变化。但我只需要更改一页。我想将后退按钮分开并放置在导航栏之前。因此，我在 UINavigationBar 之前放置了一个按钮。但我不执行它的操作。

所以请告诉我如何做到这一点。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:17:22.880

您需要注意的是导航控制器管理整个视图层次结构。当您拥有 ViewControllerA 时，您可以在其中更改**导航控制器**高度的导航栏，然后将 ViewControllerB 推送到该导航控制器的堆栈上，您实际上是在查看**同一个**导航栏。您需要将高度更改回 ViewControllerB 中的原始高度。

我不确定您所说的“将后退按钮分开并放置在导航栏之前”是什么意思。你有图片或者你能澄清这个问题吗？

***更新：***根据您的评论，您尝试实现的目标是可能的，但这是一个坏主意。UINavigationController 的 navigationBar 横跨屏幕的整个宽度。无论缩短此栏的宽度以将您的按钮显示在其左侧的技术可行性如何，这都可以说违反了 HIG，这需要标准使用标准 iOS 功能；即导航栏应始终跨越设备在任一方向的宽度。如果您想**用不同的按钮替换**标准的后退按钮，只需替换 leftNavigationItem 即可，即

```
self.navigationItem.leftNavigationItem = <SomeUIBarButtonItem>; 
```

您可能还想设置 hidesBackButton = YES。

***更新 2：***我在一个小型 Xcode 项目中对此进行了测试，您可以更改导航栏的宽度。这看起来很愚蠢，但这是可能的。但是，如果您使用笔尖并在该笔尖上设置 NavigationBar 属性，则当您将按钮添加到视图控制器的视图时，您必须将框架的 y 值设置为负数以使其与导航栏一致. 即使如此，在此按钮上设置文本或目标/操作似乎也不起作用。导航栏可能会为自己保留该宽度。从笔尖中删除导航栏设置并再次尝试仍然没有这样做。导航栏（或者，很可能是导航控制器）的存在似乎阻止了其他任何东西在该区域接收触摸事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:13:27.590

您需要更改每个页面中 UINavigation 栏的大小。关于返回按钮，我使用了这个解决方案：

```
-(void)returnButton:(id)sender
{
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

# xpages - 对只读编辑框使用标准验证？

> ID：10043260
> 
> 赞同：1
> 
> 时间：2012-04-06T12:05:47.477
> 
> 标签：xpages

我最近的一些帖子与我在提交按钮中进行所有验证有关。

我这样做的原因是我有一个按钮可以设置一些只读编辑框。好吧，您可以为只读编辑框配置验证，但它不会在运行时执行。

由于我无法弄清楚这一点并希望对验证有一致的外观，因此我在提交按钮上使用了自己的验证。

有没有办法验证只读字段？

将所有代码放在提交按钮中的一件好事是所有验证代码都在同一个地方，但我可以看到它在使用自定义控件时也会导致可移植性问题。

另外一个问题是如果我的提交按钮未标记为提交按钮，如何触发验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:40:55.883

正如 Dec 所说，ReadOnly 标志会导致字段内容在没有`<input>`标记的情况下呈现。这使得客户端无法进行验证，并且由于没有数据被提交回 JVM，因此在提交时将忽略字段上编码的验证。

但是，数据源`QuerySaveDocument`被触发。把你的验证放在那里和/或把它放在渲染的字段中（`readOnly=false`），并确保`disableClientSideValidation="true"`在所有带有验证器的字段上进行设置。

您的`QuerySaveDocument`代码看起来像这样（假设位置是只读字段）。

```
if (personDoc.getItemValueString("Location") == "") {
    @ErrorMessage("The inherited location is blank and that is bad.");
    return false;
}
return true; 
```

这样，基于字段的验证器将首先触发，如果它们都成功则`QuerySaveDocument`触发。这意味着如果任何基于字段的验证器失败，它们的消息将出现在您的消息区域中，但`QuerySaveDocument`消息不会出现。`QuerySaveDocument`只有在所有基于字段的验证器成功后才会出现消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:24:13.113

当只读字段呈现给 Web 浏览器时，它不会使用`<input>`标签呈现，而是使用简单的`<span>`标签呈现。

验证只能在正确的输入标签上执行，因此您遇到的场景是正确的。它没有在只读模式下验证的字段。

有一个“以只读方式显示禁用”选项，它将`<input disabled="true">`为该字段呈现一个类型标签，但我不确定验证是否适用于这些字段，因为如果一个字段是只读的，那么确实不需要任何验证，因为您以编程方式将值放入字段中，并且您应该在添加值之前以编程方式验证它。

# c - 在 C 中释放三维数组时的 SIGTRAP

> ID：10043265
> 
> 赞同：0
> 
> 时间：2012-04-06T12:06:18.780
> 
> 标签：c, pointers, multidimensional-array, malloc, free

我正在尝试释放一个表示 bmp 图像的三维指针数组，并在它编译好的时候在调试时在 gdb 中获得 SIGTRAP 信号。我的错误信息是

> 警告：HEAP [bmpsample.exe]：
> 警告：0061FFB8 处的堆块已在 0061FFCC 处修改，超过了 c 的请求大小。
> 程序收到信号 SIGTRAP，Trace/断点陷阱。ntdll 中的 0x7787704e5！
> 来自 ntdll.dll的 TpWaitForAlpcCompletion()

当我从 bmp 文件加载值后释放数组时发生错误。我的代码如下。

分配：

```
int ***alloc3D(int xlen, int ylen, int zlen) {
int i, j, ***array;
if ((array = malloc(xlen*sizeof(int**)))==NULL) {
    perror("Error in first assignment of 3D malloc\n");
}
// Allocate pointers for each row
for (i = 0; i < xlen; i++) {
    if ((array[i] = malloc(ylen*sizeof(int*)))==NULL){
        perror("Error in second assignment of 3D malloc\n");
    }
    // Allocate pointer for each column in the row
    for (j=0; j < ylen; j++) {
        if((array[i][j] = malloc(zlen*sizeof(int)))==NULL) {
            perror("Error in third assignment of 3D malloc\n");
        }
    }
} 
```

填充数组

```
int ***readBitmap(FILE *inFile, BmpImageInfo info, int*** array) {
    // Pixels consist of unsigned char values red, green and blue
Rgb *pixel = malloc( sizeof(Rgb) );
int read, j, i;
for( j=0; j<info.height; j++ ) {
    read = 0;
    for( i=0; i<info.width; i++ ) {
        if( fread(&pixel, 1, sizeof(Rgb), inFile) != sizeof(Rgb) ) {
                printf( "Error reading pixel!\n" );
        }
        array[j][i][1] = (int)(pixel->red);
        array[j][i][2] = (int)(pixel->green);
        array[j][i][3] = (int)(pixel->blue);
        read += sizeof(Rgb);
    }

    if ( read % 4 != 0 ) {
        read = 4 - (read%4);
        printf( "Padding: %d bytes\n", read );
        fread( pixel, read, 1, inFile );
    }
}
free(pixel);

return array; 
```

}

重新分配

```
void dealloc3D(int*** arr3D,int l,int m)
{
    int i,j;

    for(i=0;i<l;i++)
    {
        for(j=0;j<m;j++)
        {
                free(arr3D[i][j]);
        }
        free(arr3D[i]);
    }
    free(arr3D);
} 
```

我怀疑问题在于将 RGB 值从 unsigned char 转换为 int，但我看不到其他方法。如果我只是将整数值分配给分配的数组，那么释放它们就没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:38:15.563

你的第`fread`一句话有问题

```
fread(&pixel, 1, sizeof(Rgb), inFile) 
```

这是读入指针`pixel`，而不是读入`pixel`指向的内容。在那之后，任何使用`pixel`都可能会破坏堆（或其他东西）。

# javascript - Android - 是否可以从包装在 PhoneGap 中的应用程序触发本机意图

> ID：10043272
> 
> 赞同：0
> 
> 时间：2012-04-06T12:06:31.993
> 
> 标签：javascript, android, cordova, extjs

我正在 Sencha Touch 2.0.1 和 PhoneGap 上开发一个应用程序。
我需要捕获 Sencha Touch 内部触发的事件并将其传输到原生 Android 环境。

即：一些sencha 触摸控制按钮需要触发点击意图以启动另一个活动（非PhoneGap 活动）。

到目前为止，我已经找到了各种示例，例如[webintents](http://smus.com/android-phonegap-plugins/)和[this](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)。但据我所知，这些不适用于我的情况。

我寻求要么放弃 PhoneGap 并使用另一个包装器，要么以某种方式规避这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:09:42.077

我认为您需要制作自己的 phonegap 插件，从它的执行方法内部启动本机活动。

有一个 ContactView 插件，您应该可以将其用作编写自己的指南。

[https://github.com/phonegap/phonegap-plugins/blob/master/Android/ContactView/ContactView.java](https://github.com/phonegap/phonegap-plugins/blob/master/Android/ContactView/ContactView.java)

具体这两种方法

```
 @Override
public PluginResult execute(String action, JSONArray args, String callbackId) {
    startContactActivity();
    PluginResult mPlugin = new PluginResult(PluginResult.Status.NO_RESULT);
    mPlugin.setKeepCallback(true);
    this.callback = callbackId;
    return mPlugin;
}

public void startContactActivity() {
    Intent intent = new Intent(Intent.ACTION_PICK);
    intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
    this.ctx.startActivityForResult((Plugin) this, intent, PICK_CONTACT);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:41:42.093

看看这个，显式和隐式意图部分（1.2、1.3）： [http ://www.vogella.de/articles/AndroidIntent/article.html](http://www.vogella.de/articles/AndroidIntent/article.html)

然后看一下WebIntent.java的源码，特别是startActivity函数： [https ://github.com/phonegap/phonegap-plugins/blob/master/Android/WebIntent/WebIntent.java](https://github.com/phonegap/phonegap-plugins/blob/master/Android/WebIntent/WebIntent.java)

```
void startActivity(String action, Uri uri, String type, Map<String, String> extras) {
  Intent i = (uri != null ? new Intent(action, uri) : new Intent(action)); 
```

然后这里的意图构造函数（搜索构造函数）：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

WebIntent 不支持采用 Android 类的 Intent 构造函数。

但是您可以扩展该函数以使其具有明确的意图（下面的代码快速而肮脏且未经测试）：

```
void startActivity(String action, Uri uri, String type, String className, Map<String, String> extras) {
  Intent i;
  if (uri != null)
    i = new Intent(action, uri)
  else if (className != null)
    i = new Intent(this.ctx, Class.forName(className));
  else
    new Intent(action)); 
```

上面，在执行函数中，还必须在“解析参数”部分解析出新参数

```
// Parse the arguments
JSONObject obj = args.getJSONObject(0);
String type = obj.has("type") ? obj.getString("type") : null;
Uri uri = obj.has("url") ? Uri.parse(obj.getString("url")) : null;
String className = obj.has("className") ? obj.getString("className") : null;
JSONObject extras = obj.has("extras") ? obj.getJSONObject("extras") : null; 
```

然后在调用 startActivity 时将新的 className 字符串传递给下面几行：

```
startActivity(obj.getString("action"), uri, type, className, extrasMap); 
```

然后你应该能够使用类名调用一个android活动，比如：

```
Android.callByClassName = function(className) { 
  var extras = {};
  extras[WebIntent.EXTRA_CUSTOM] = "my_custom";
  extras[WebIntent.EXTRA_CUSTOM2] = "my_custom2";
  window.plugins.webintent.startActivity({
    className: className, 
    extras: extras 
  }, 
  function() {}, 
  function() {
    alert('Failed to send call class by classname');
  }
); 
```

};

类名类似于：com.company.ActivityName

免责声明：粗略的代码，未经测试。

# ruby - 使用 Ruby 工具在 JSON 中定义测试规范的最佳方法是什么？

> ID：10043280
> 
> 赞同：0
> 
> 时间：2012-04-06T12:07:42.563
> 
> 标签：ruby, unit-testing, minitest

我有一个有趣的难题。我正在开发一个库来解析 Ruby 中的 PSD。此外，一个伙伴正在同时开发一个库来解析 JavaScript 中的 PSD。我们希望通过 git 子模块共享相同的单元测试。

我们决定使用简单的 JSON DSL 来定义每个测试。单个测试可能如下所示：

```
{
  "_name": "Layer should render out",
  "_file": "test/fixtures/layer_out.psd",
  "_exports_to": "test/controls/layer_out_control.png"
} 
```

因此，现在由我们来构建适当的测试工具来将 JSON 转换为适当的本机单元测试。我一直在使用 MiniTest 让自己跟上进度，但我遇到了几堵墙。

这是我到目前为止所得到的。测试工具暂时命名`TargetPractice`为：

```
# run_target_practice.rb

require 'target_practice'

TargetPractice.new(:test) do |test|
  test.pattern = "test/**/*.json"
end 
```

和

```
# psd_test.rb

class PSDTest < MiniTest::Unit::TestCase
  attr_accessor :data

  def tests_against_data
    # do some assertions
  end
end 
```

和

```
# target_practice.rb

class TargetPractice
  attr_accessor :libs, :pattern

  def initialize(sym)
    @libs = []
    @pattern = ""

    yield self

    run_tests
  end

  def run_tests
     FileList[@pattern].to_a.each do |file|
       test_data = JSON.parse(File.open(file).read)
       test = PSDTest.new(test_data["_name"]) do |t|
         t.data = test_data
       end
     end
  end
end 
```

不幸的是，我很难`yield`在课堂`initialize`上坚持下去。`PSDTest`此外，似乎测试将在初始化时立即运行。

我想动态创建一些`MiniTest::Unit::TestCase`对象，设置它们适当的数据属性，然后运行测试。任何指针表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:06:19.830

我认为你在这里有点过于复杂了。你需要的是一个[参数化的测试](http://xunitpatterns.com/Parameterized%20Test.html)，使用 mintest/spec 实现它非常简单：

```
describe "PSD converter" do
  def self.tests(pattern = 'test/**/*.json')
    FileList[pattern].map{|file| JSON.parse(File.read(file))}
  end

  tests.each do |test|
    it "satisfies test: " + test["_name"] do
      # some assertions using test["_file"] and test["_exports_to"]
    end
  end
end 
```

# ruby-on-rails - current_action 不返回动作

> ID：10043283
> 
> 赞同：1
> 
> 时间：2012-04-06T12:08:00.383
> 
> 标签：ruby-on-rails, ruby

在我的 application_controller 中，我添加了：

```
def instantiate_controller_and_action_names
          @current_action = action_name
          @current_controller = controller_name
      end 
```

以便我根据当前操作在视图中显示/隐藏某些字段。例如，添加新用户时，我希望能够显示要填写的密码字段，但在编辑用户时，我不希望显示密码字段。

我遇到的问题是 @current_action 在创建新记录时只返回一个值'new'，但在我编辑记录时没有返回一个值（例如[- http://localhost:3000/users /6/edit](http://localhost:3000/users/6/edit)），或者如果我使用相反的方法并检查 @current_action != 'new'...在这两种情况下我的字段是否仍在显示中。

```
<%if @current_action != 'new'%>
   <tr><td>AAAAAAA</td></tr>
   <%else%>   
   <tr>
    <th class="">Password</th> 
    <th class="">Password Confirmation</th> 
  </tr>
  <tr>
    <td><%= f.password_field :password %></td>
    <td><%= f.password_field :password_confirmation %></td> 
  </tr>
<%end%> 
```

没有返回“编辑”是怎么回事和/或是否有更好/最佳实践方法来完成此操作？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:20:30.663

你为什么不测试你的对象，而不是使用控制器动作？您可以使用此方法查看您的对象是否为新记录

```
`<% if f.object.new_record? %>
  Your code for new object
<% else %>
You code to edit object
  <%end%>` 
```

* * *

 `## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T12:19:35.030

无需设定行动的价值

您可以在这样的视图中访问它

```
 action_name  or params[:action]     #return the current action

    controller_name  or params[:controller]     #return the current controller 
```

并轻松使用它......

```
 <%if action_name != 'new'%>
           <tr><td>AAAAAAA</td></tr>
       <%else%>   
           <tr>
           <th class="">Password</th> 
          <th class="">Password Confirmation</th> 
          </tr>
          <tr>
          <td><%= f.password_field :password %></td>
         <td><%= f.password_field :password_confirmation %></td> 
         </tr>
      <%end%> 
```

如果你想要你的代码，reson 不会渲染不调用它。添加这一行

应用程序控制器和检查

```
 before_filter :instantiate_controller_and_action_names 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T12:16:51.723

好的，所以获取控制器和操作名称的最简单方法实际上就是使用参数。所以。

```
def current_action
  params["action"]
end

def controller_name
  params["controller"]
end 
```

试试看。`

# jquery - jQuery 顺序渲染从 ajax 请求中获取的项目

> ID：10043286
> 
> 赞同：0
> 
> 时间：2012-04-06T12:08:24.497
> 
> 标签：jquery, ajax, sequential

我有一个显示对象列表的页面。这些列表中的每一个都来自一个 ajax 调用。如何确保它们按顺序呈现？

我尝试使用[此处](http://charliedigital.com/2011/07/15/chaining-jquery-ajax-calls/)显示的技术，但如果其中一个请求失败，它会拒绝其余请求。我的数据不依赖于以前的数据，那么我该如何修改示例并处理错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:45:00.743

你知道，在另一篇[文章](https://stackoverflow.com/questions/9964476/jquery-load-doesnt-work-as-i-expected/9967897#9967897)中，我写了这个小解析器类，但我喜欢管道的这个想法。我不知道我是否非常喜欢这个例子，但是稍微调整一下，我认为它会工作得很好。我承认，不过，我还没有对此进行测试。

```
var urls = ["path1","path2","path3"]; // Output from string.split()
var chain = $.Deferred(); // Create the root of the chain.
var promise = chain; // Placeholder for the promise

// Build the chain
jQuery.each(urls,function(index,elem){
    // Pipe the response to the "next" function
    promise = promise.pipe(function(response)
    {
        var myurl = elem; // Get the current part
        var newPromise = $.Deferred();
        $.ajax 
        ({
           type: "GET",
           url: myurl
        }).done(function(data){  
          //these are your normal ajax success function params, IIRC
           //do stuff with response
        }).fail(function(){
           //oops, it failed, oh well
           //do stuff on failure 
        }).always(function() {
           //but always resolve the sequencing promise
           newPromise.resolve();            
        });
        return newPromise;
    })
});

chain.resolve(); 
```

编辑：这是一个带有模拟 ajax 请求的 JSFiddle [http://jsfiddle.net/jfcox/gFLhK/](http://jsfiddle.net/jfcox/gFLhK/)。如您所见，这一切都按顺序排列。

编辑二：评论略有调整。请注意，您应该能够通过将任何内容传递给您的解析调用来将信息传递给您的下一个承诺......

编辑三：根据戴夫的建议进行修改。要进一步分离关注点，您可以`always`在 ajax 请求上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:23:30.470

您可以将响应列表保存在数组中

```
function response () {
   responseArray[i] = response; // Where i is the sequence number of request and response;
   responseHandler(); // Ping some function which can take the response in the order and process it.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:23:11.757

您是否尝试过使用 jQuery.when？
[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

**示例**
[http://jsfiddle.net/94PGy/4/](http://jsfiddle.net/94PGy/4/)

在多个 Deferred 的情况下，其中一个 Deferred 被拒绝，jQuery.when 立即为其主 Deferred 触发 failCallbacks。请注意，此时某些 Deferreds 可能仍未解决。如果您需要针对这种情况执行额外的处理，例如取消任何未完成的 ajax 请求，您可以在闭包中保留对底层 jqXHR 对象的引用，并在 failCallback 中检查/取消它们。

# nlp - 重点命名实体识别（NER）？

> ID：10043293
> 
> 赞同：3
> 
> 时间：2012-04-06T12:09:28.547
> 
> 标签：nlp, machine-learning, named-entity-recognition

我想识别特定领域（例如棒球）中的命名实体。我知道有可用的工具，如 StanfordNER、LingPipe、AlchemyAPI，我对它们进行了一些测试。但正如我之前提到的，我希望它们是特定于领域的。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:23:30.483

一种方法可能是

1.  使用**通用（非特定领域）工具**检测人名

2.  使用**主题分类**器过滤掉不在域中的文本

如果数据集的总大小足够并且提取器和分类器的准确性足够好，您可以使用结果来获取**与所讨论的域密切相关的人名**列表（例如，通过将结果限制为那些*在特定领域的文本中比在其他文本*中提到的频率要高得多）。

以棒球为例，这应该是获取*与棒球相关*的人员列表的一种相当不错的方法。但是，仅获取棒球*运动员*名单并不是一个好方法。对于后者，有必要分析提到名称的确切上下文以及有关它们的内容；但也许这不是必需的。

**编辑：**通过*主题分类器*，我的意思与其他人可能简称为*categorization*、*document classification*、*domain classification*或类似的东西相同。即用型工具的示例包括 Python-NLTK 中的分类器（示例请参见[此处](http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html)）和 LingPipe 中的分类器（请参见[此处](http://alias-i.com/lingpipe/demos/tutorial/classify/read-me.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:46:48.493

看看smile-ner.appspot.com，它涵盖了 250 多个类别。特别是，它涵盖了很多体育运动的人/团队/俱乐部。可能对您的目的有用。

# javascript - IIS 7 Cors Ajax Soap 请求

> ID：10043294
> 
> 赞同：2
> 
> 时间：2012-04-06T12:09:44.457
> 
> 标签：javascript, ajax, soap, iis-7, cors

我遇到了一个我无法解决的问题。

我有一些 js (jquery) POST soap (over PHP) 请求代码在 Apache 上工作，并启用了 Cors 来调用 HTTPS，它运行良好。

我已经迁移到 IIS7，设置响应标头：

```
Access-Control-Allow-Origin = *
Access-Control-Allow-Methods = POST` 
```

现在在发送时很奇怪

```
Content-Type: text/xml; 
```

它被拒绝，但是在发送默认值时

```
application/x-www-form-urlencoded 
```

奇怪的是，我得到了响应（当然是来自 Soap 服务器的错误响应，但仍然意味着 Cors 可以为此工作）。

所以问题是，是否在 iis 标头中设置了其他内容？我试图找到一天的答案，但没有运气。我的猜测是它是关于`Access-Control-Allow-Headers`但我仍然找不到一个有效的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:06:37.903

您需要设置以下标头：

```
Access-Control-Allow-Headers: Content-Type 
```

You may also have to put other headers in that list. The best way to figure out which headers to add is to inspect the Access-Control-Request-Headers header on the request, and see what values its asking for, and then echo those values in the response above.

The reason Content-Type needs to be included in this header is because you are asking for a non-standard value ('application/x-www-form-urlencoded' is a standard value).

# eclipse-rcp - 动态工具栏项

> ID：10043301
> 
> 赞同：0
> 
> 时间：2012-04-06T12:10:42.523
> 
> 标签：eclipse-rcp, eclipse-plugin

我需要在主工具栏中创建动态按钮。我找到了一个解决方案，但我只能创建一个按钮（动态贡献项 - 类扩展`ContributionItem`）。但是我需要创建多个按钮，但我找不到解决方案。

我正在与创建插件的任务作斗争，该插件解析包含菜单和工具栏结构的 XML 文件。我们已经为 Visual Studio 完成了这个插件。原则上它很容易，但我很快发现，这不适用于 Eclipse。有一个小而关键的他者。插件在 Eclipse 中以声明方式实现。该文件`plugin.xml`是插件基础设施的要点，Java 代码只是辅助性的。

每当所选项目发生更改时，客户都希望刷新菜单和工具栏。Eclipse 缺少完成任务所需的几个特性。主菜单和主工具栏是在 Eclipse 启动时创建的，然后很难重建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-11T12:53:31.423

在大多数情况下，在 enabledWhen/visibleWhen 元素中定义的条件足以根据上下文（活动部分、选定对象等）过滤贡献。

如果您需要更多自由，请尝试 E4 ToolControl，它允许您实现自己的 UI 元素：

```
 @PostConstruct
    public void createControls(Composite parent) {
        //your custom code here
    } 
```

更多细节在这里[https://www.vogella.com/tutorials/EclipseRCP/article.html#toolcontrols](https://www.vogella.com/tutorials/EclipseRCP/article.html#toolcontrols)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:05:15.820

据我了解，您希望根据项目资源管理器的选择在主工具栏上有不同的按钮（例如，1 个项目是 java 项目，另一个是 javascript 等）。首先，您必须为主工具栏做出贡献。我认为有一些可用的教程，所以谷歌会提供帮助。主要步骤是： 1\. 创建命令 (org.eclipse.ui.commmands) 2\. 使用先前声明的命令 id 创建处理程序 (org.eclipse.ui.handlers) 3\. 贡献主工具栏 (org.eclipse .ui.menus)，带有 menucontribution 和 commandId，带有以下 locationURI：toolbar:org.eclipse.ui.main.toolbar?after=misc

显示/隐藏、启用/禁用菜单项/按钮也可以以声明方式或“混合”方式完成。声明性地表示例如。使用 enabledWhen/visibleWhen... 混合意味着使用属性测试器 (org.eclipse.core.expressions.propertyTester)。有了这个，您可以在 Java 代码中定义您的“启用逻辑”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:18:24.307

在 Eclipse e4 中，UI 是从基于 EMF 的模型生成的。Application.e4xmi 作为该模型的基础。对模型的贡献可以通过片段（同样是 XML）或通过处理器来完成。处理器是用 Java 编写的，并使用 e4 服务（如零件服务）在运行时修改模型。

我认为您想编写一个处理器来解析您的自定义 XML 并相应地修改 eclipse e4 模型。

# c# - 刷新页面重复数据库事务？

> ID：10043303
> 
> 赞同：0
> 
> 时间：2012-04-06T12:11:12.070
> 
> 标签：c#, asp.net, page-refresh

我有超过 30 个 aspx 页面，我最近发现了一个问题，如果我执行任何类型的数据库事务，如插入、更新、删除，然后在事务完成后按 F5 或刷新页面，无论如何都会发生事务。

我搜索了一个解决方案，但我发现我必须检查每个按钮上的视图状态，这是不可能的，因为这意味着会有很多工作。必须有通用的解决方案，请帮助我解决这个问题。

编辑：

以下是将数据库中的值更改为真或假的按钮之一上的代码：

```
 protected void btn_Publish_Click(object sender, EventArgs e)
{

    if (Convert.ToBoolean(int.Parse(hf_Published.Value.ToString())))
    {
        publish(false);
    }
    else
    {
        publish(true);

    }

} 
```

执行代码后，如果刷新页面，则执行相同的代码，我注意到由于在此方法上放置了一个断点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:15:38.843

有一个通用的解决方案，被成千上万的开发人员使用了多年。

解决方案是：每次您在服务器上执行侵入式过程（插入/更新/删除）时，您不仅会呈现页面，而且会将带有 302 的响应重定向到带有“您的事务成功”消息的**新页面。**

这样，按 F5 只会刷新这个消息页面，而不是触发事务的原始页面。

这是否直接适用于您的场景取决于您。

[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T12:19:42.173

你可以试试这个。我在几个项目中使用了它并成功地工作。

```
 public bool IsRefreshed
    {
        get
        {
            if (Convert.ToString(Session["RefreshTimeStamp"]) == Convert.ToString(ViewState["RefreshTimeStamp"]))
            {
                Session["RefreshTimeStamp"] = HttpContext.Current.Server.UrlDecode(System.DateTime.Now.ToString());
                return false;
            }
            else
            {
                return true;
            }
        }
    }

protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);
        ViewState["RefreshTimeStamp"] = Session["RefreshTimeStamp"];
    }

protected override void OnLoad(EventArgs e)
    {  

        if (!Page.IsPostBack)
        {
            Session["RefreshTimeStamp"] = HttpContext.Current.Server.UrlDecode(System.DateTime.Now.ToString());
        }
        base.OnLoad(e);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T12:16:57.623

要解决此问题，您可以检查以下内容：

> 1.  必要时禁用提交按钮
> 2.  为您的代码添加一些验证并检查是否重复输入
> 3.  提交后将用户重定向到另一个页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T12:25:28.400

除非它是真正的“交易”，例如支付等（其他人已经解释过，做重定向等），
***否则您还可以尝试在与 Db 交互的页面上定义缓存，或者是***您的应用程序的瓶颈。
如果您想始终拥有实时信息（并且是那种“实时”类型的应用程序），那么该解决方案也没有运气（但即便如此），但通常情况下，您可以对您希望数据的“新鲜程度”设置一些合理的时间期限是。
[缓存 ASP.NET 页面](http://msdn.microsoft.com/en-us/library/06bh14hk.aspx)

# spring-mvc - Spring MVC 3.1.1 中的响应实体

> ID：10043305
> 
> 赞同：1
> 
> 时间：2012-04-06T12:11:20.057
> 
> 标签：spring-mvc

我已经将 Spring 从 3.0.5 升级到 3.1.1 并偶然发现了一个奇怪的问题。以下代码在以前的版本中运行良好：

```
@RequestMapping("/getPeople")
public Object getPeople()
    {
        HttpHeaders responseHeaders = new HttpHeaders(); responseHeaders.set("MyResponseHeader", "MyValue");
        return new ResponseEntity("Hello World", responseHeaders, HttpStatus.OK);
    } 
```

但是在最新版本中，我收到了 404 错误。为了解决这个问题，我必须在方法中提到返回类型为 ResponseEntity：

```
@RequestMapping("/getPeople")
    public ResponseEntity getPeople()
        {
            HttpHeaders responseHeaders = new HttpHeaders(); responseHeaders.set("MyResponseHeader", "MyValue");
            return new ResponseEntity("Hello World", responseHeaders, HttpStatus.OK);
        } 
```

这是一个可以接受的解决方法还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:38:38.753

试试下面的代码。@ResponseBody 注解类似于@RequestBody。这个注解可以放在一个方法上，并表明返回类型应该直接写入 HTTP 响应体（而不是放在模型中，或者解释为视图名称）。

```
@RequestMapping("/getPeople")
@ResponseBody
public Object getPeople()
    {
        HttpHeaders responseHeaders = new HttpHeaders();  
        responseHeaders.set("MyResponseHeader", "MyValue");
        return new ResponseEntity("Hello World", responseHeaders, HttpStatus.OK);
    } 
```

# xslt - XSLT：分割混合内容节点

> ID：10043308
> 
> 赞同：2
> 
> 时间：2012-04-06T12:12:09.077
> 
> 标签：xslt

我有以下 XML：

```
<section editable="true">
  <p>If you have any questions about the project at Test School or how we plan to use the results, please contact <contact>Al c</contact><contact_info> at <contact_email>email address</contact_email> or <contact_phone>phone number</contact_phone>.</contact_info></p>
  <p>Your feedback is valuable, and <strong>I</strong> want to thank you personally for considering this request.</p>
  <p>Sincerely,</p>
</section> 
```

我有一个新的要求来创建这个表格：

```
<textarea>If you have any questions about the project at Test School or how we plan to use the results, please contact</textarea>
<input type="text" value="Al c " />
<input type="text" value="at email address or phone number." />
<textarea>Your feedback is valuable, and I want to thank you personally for considering this request.
 Sincerely,</textarea> 
```

文本输入很简单，我之前能够为该部分创建一个大的文本区域，但我在过去的几个小时里一直在努力尝试让 before-sibling:: 和 following-sibling:: 工作但没有成功。我确定我只是缺少一些简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:01:15.090

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFollowing" match="p[not(contact | contact_info)]"
  use="generate-id(preceding-sibling::*
                             [not(self::p)
                            or
                              not(contact | contact_info)
                              ]
                               [1]
                       )"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="*[1]"/>
 </xsl:template>
 <xsl:template match="p/text()">
     <textarea><xsl:value-of select="."/></textarea>
 </xsl:template>

 <xsl:template match="p[contact | contact_info]">
   <xsl:apply-templates/>
   <xsl:apply-templates select="following-sibling::*[1]"/>
 </xsl:template>

 <xsl:template match="contact | contact_info">
  <input type="text" value="{normalize-space()}"/>
 </xsl:template>

 <xsl:template match="p[not(contact | contact_info)][1]">
  <textarea>
    <xsl:copy-of select=
    "(.|key('kFollowing', generate-id()))//text()"/>
  </textarea>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<section editable="true">
    <p>If you have any questions about the project at Test School or how we plan to use the results, please contact 
        <contact>Al c</contact>
        <contact_info> at 
            <contact_email>email address</contact_email> or 
            <contact_phone>phone number</contact_phone>.
        </contact_info>
    </p>
    <p>Your feedback is valuable, and 
        <strong>I</strong> want to thank you personally for considering this request.
    </p>
    <p>Sincerely,</p>
</section> 
```

**产生想要的正确结果**：

```
<textarea>If you have any questions about the project at Test School or how we plan to use the results, please contact 
        </textarea>
<input type="text" value="Al c"/>
<input type="text" value="at email address or phone number."/>
<textarea>Your feedback is valuable, and 
        I want to thank you personally for considering this request.
    Sincerely,</textarea> 
```

# .net - .NET 的 MDBG（托管调试器）是否可以免费用于商业目的？

> ID：10043317
> 
> 赞同：0
> 
> 时间：2012-04-06T12:12:40.417
> 
> 标签：.net, debugging, mdbg

我正在做一个项目。为此，我需要使用调试器。obsly MDBG 是我的首选。但是当我下载样本并阅读 eula 时。它指出

> 您不得将该软件用于商业软件托管服务。

但这个 eula 是为

> MICROSOFT CLR 托管调试器 (MDBG) 源示例

所以我的问题是我可以使用它还是不能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T12:58:58.567

> 您不得将该软件用于商业软件托管服务。

这是几年前出现在所有 Microsoft EULA 中的样板短语。我最近没有看到它，但是 MDBG 可以追溯到这个短语很常见的时候。具体排除是您不能使用 Microsoft 工具或代码示例来构建网站，然后将服务转售给 3rd 方。没有什么特别邪恶的，当时他们可能认为网络托管对他们来说是一个重要的业务部门，他们不想与任何使用自己的工具来构建这样的托管服务的人竞争。

当您计划创建自己的 GoDaddy 时，请注意这一点，让任何人都可以看到您使用 MDBG 示例代码来运行您的服务。微软仍然关心这一点，而 MDBG 在托管服务中真正有用的可能性很小，不必担心这一点。当然，永远不要从程序员的 Q+A 网站上获得法律建议 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:30:40.517

MDbg 是 .NET Framework SDK 的一部分，它是免费的。

MDbg 示例是源代码，显然不允许您将其集成到“商业软件托管服务”中。您仍然可以使用 MDbg 调试任何项目。

VS 有一个很棒的调试器。VS Express 是免费的，而且非常强大。您不必使用命令行调试器。

# java - 尝试在表中打印数据时出现 SAXParseException

> ID：10043323
> 
> 赞同：1
> 
> 时间：2012-04-06T12:13:11.700
> 
> 标签：java, jasper-reports, xml-validation

原因：org.xml.sax.SAXParseException：cvc-complex-type.2.4.a：发现以元素“jr：table”开头的无效内容。'{"http://jasperreports.sourceforge.net/jasperreports":component}' 之一是预期的。

为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:47:31.727

您几乎没有为您的问题提供任何背景信息，因此您获得有用答案的机会很小。

但是，如果您正在解析定义了架构的 xml 文档并且该文档与架构不匹配，那么这看起来就像您会遇到的那种异常。

更新：

根据您在下面的评论，我看到该文档确实列出了一个架构，所以我最初的猜测仍然成立。您的 xml 文档与架构不匹配（例如，有一个“表”元素，其中架构说应该有一个“组件”元素）。

# c - 在用 C 实现的链表中使用单指针和双指针

> ID：10043327
> 
> 赞同：3
> 
> 时间：2012-04-06T12:14:04.627
> 
> 标签：c, pointers, linked-list, double-pointer

我正在编写此代码以在链表末尾添加元素：

```
struct node{
    int info;
    struct node* link;
};

void append ( struct node **q, int num )  
{

struct node *temp, *r ;

if ( *q == NULL )       // if the list is empty, create first node
{
    temp = (struct node*) malloc ( sizeof ( struct node ) ) ;
    temp -> info = num ;
    temp -> link = NULL ;
    *q = temp ;        
}
else{
    temp = *q ;         

    /* go to last node */
    while ( temp -> link != NULL )
        temp = temp -> link ;

    /* add node at the end */
    r = (struct node *)malloc ( sizeof ( struct node ) ) ;
    r -> info = num ;
    r -> link = NULL ;
    temp -> link = r ;
}
} 
```

我这样调用 append 函数： 指向链表的指针在`append(&list, 10);`哪里`list`

此代码有效，但如果我在附加函数中使用**单个指针**（使用 *q 而不是 **q）并相应地进行更改（如下所示以及当我调用它时），它不起作用。下面的代码有什么问题？：

```
void append ( struct node *q, int num )  
{

struct node *temp, *r ;

if ( q == NULL )       // if the list is empty, create first node
{
    temp = (struct node*) malloc ( sizeof ( struct node ) ) ;
    temp -> info = num ;
    temp -> link = NULL ;
    q = temp ;        
}
else{
    temp = q ;         

    /* go to last node */
    while ( temp -> link != NULL )
        temp = temp -> link ;

    /* add node at the end */
    r = (struct node *)malloc ( sizeof ( struct node ) ) ;
    r -> info = num ;
    r -> link = NULL ;
    temp -> link = r ;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:15:37.577

因为在第二个示例中，`q`是调用者传入的指针的**副本**。调用者的原始指针永远不会被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:58:11.243

在你的第一个片段（这是正确的）中，你做的太多了。

```
void append ( struct node **q, int num )  
{

struct node *new ;

    /* go to last node */
    for ( ; *q; q = &(*q)->link ) {;}

    /* add node at the end */
    new = malloc ( sizeof *new );
    if (!new) { barf_now(); return; }

    new->info = num ;
    new->link = NULL ;
    *q = new; ;
    }
} 
```

基本思想是：你想追加到列表的尾部；你需要：

*   找到第一个 NULL 指针
*   将它的值设置为新指针的值

“空列表”的情况并不特殊，它只是意味着您可以在零步中找到 NULL 指针。以这种方式编码**没有特殊情况**，也不需要`if (...) ... else ...`构造。

# jquery - 回发后 jqTransform 在 radajax 中消失

> ID：10043334
> 
> 赞同：1
> 
> 时间：2012-04-06T12:14:44.237
> 
> 标签：jquery, asp.net, telerik, jqtransform

我在 RadAjax 面板中有两个下拉菜单。在第一个下拉列表的 SelectedIndexChanged 上，填充了第二个。

初始页面加载后，jqTransform 就好了。但是在回发之后它就消失了。我尝试设置 RadAjax ClientEvents-OnResponseEnd="setJqTransformFunc();" 的属性 没有运气。我也尝试在事件处理程序的代码隐藏中设置 ScriptManager.RegisterStartupScript(...,"setJqTransformFunc();"...) 但也没有运气。

最让我困惑的是，在回发之后，我尝试从谷歌浏览器的控制台手动设置 jqTransfrom，但它也不会那样工作。

关于在回发后如何在 RadAjax 面板中保留 jqTransform 的任何想法？

PS：setJqTransformFunc() {$("form .myClass").jqTransform();}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:08:55.023

我所做的是，在响应之后，我首先删除“jqtransformdone”类并重新应用 jqtransformation

$("form .myClass").removeClass('jqtransformdone').jqTransform();

这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:01:00.933

试试 ResponseScripts：

```
RadAjaxPanel1.ResponseScripts.Add("setJqTransformFunc();"); 
```

# asp.net-mvc-3 - ASP.NET MVC 区域路由不适用于默认路由

> ID：10043335
> 
> 赞同：1
> 
> 时间：2012-04-06T12:14:56.563
> 
> 标签：asp.net-mvc-3, routing, asp.net-mvc-areas

我正在尝试将我的 MVC 项目分成多个区域。所以我有 3 个领域 1) crm 2) 服务 3) Web。我希望 PublicWeb 成为我的默认设置。这意味着它应该像 www.mysitename.com/mycontroller/myaction（中间没有区域名称）一样访问，而其他两个要使用区域名称（www.mysitename.com/crm/mycontroller/myaction）访问。我应该有什么路由/区域配置？我试过 `AreaRegistration.RegisterAllAreas();`了，它只适用于我的默认一个（网络）。当我访问另外 2 个时，它抛出了 404 错误。

我尝试像下面这样单独注册

```
 var area2reg = new crmAreaRegistration();
        var area2context = new AreaRegistrationContext(area2reg.AreaName, RouteTable.Routes);
        area2reg.RegisterArea(area2context);

        var area1reg = new webAreaRegistration();
        var area1context = new AreaRegistrationContext(area1reg.AreaName, RouteTable.Routes);
        area1reg.RegisterArea(area1context); 
```

然后我的公共网络工作。但是当我访问我的论坛时，它抛出了这个错误，

> 找到了与名为“home”的控制器匹配的多种类型。如果为该请求提供服务的路由 ('crm/{controller}/{action}/{id}') 未指定命名空间来搜索与请求匹配的控制器，则可能会发生这种情况。如果是这种情况，请通过调用采用“namespaces”参数的“MapRoute”方法的重载来注册此路由。

我的 RegisterArea 函数`web`是这个

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "web_default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }

        );
    } 
```

一个**`crm`**是这个

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "crm_default",
            "crm/{controller}/{action}/{id}",
            new { controller = "home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:26:40.557

从我所看到的区域路线看起来不错。您是否更新了 Global.asax 中的默认路由以向 Web 区域发送请求？

就像是：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}",
            new { area = "web", controller = "Home", action = "Index", id = UrlParameter.Optional }
            );

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:05:13.327

我认为 Jonathan S 的解决方案绝对值得一试，但您可能会考虑另一种方法。那就是将您的`web`文件放在默认位置。当请求中没有区域时，路由引擎不会在区域中查找这些文件。

# javascript - 从 JSON 创建一个对象

> ID：10043336
> 
> 赞同：0
> 
> 时间：2012-04-06T12:14:59.143
> 
> 标签：javascript, ajax, json, parsing, object

对于这个问题，我已经看到了很多不同的答案，并尝试将他们的代码应用到我的项目中，但这些解决方案似乎都不适用于我拥有的数据。

我需要将此输出转换为几个对象：

[{"creature":{"id":1,"name":"RIP","sprite_location":null,"health_points":0,"attack":0,"defense":0,"action_points":0 ,"attack_cost":0}},{"creature":{"id":2,"name":"RIP","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/rip. gif","health_points":0,"attack":0,"defense":0,"action_points":0,"attack_cost":0}},{"creature":{"id":3,"name" :"Bull.","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/bull.gif","health_points":50,"attack":8,"defense":20,"action_points ":9,"attack_cost":5}},{"生物":{"id":4,"name":"Swallow.","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/swallow.gif","health_points":30,"attack": 12,"防御":10,"action_points":13,"attack_cost":5}},{"creature":{"id":5,"name":"Kappa.","sprite_location":"http: //chunkofwhat.com/games/Parousia/sprites/kappa.gif","health_points":40,"attack":6,"defense":15,"action_points":9,"attack_cost":3}},{ "生物":{"id":6,"name":null,"sprite_location":null,"health_points":null,"attack":null,"defense":null,"action_points":null,"attack_cost" ：无效的}}]吞下去。","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/swallow.gif","health_points":30,"attack":12,"defense":10,"action_points": 13,"attack_cost":5}},{"creature":{"id":5,"name":"Kappa.","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/ kappa.gif","health_points":40,"attack":6,"defense":15,"action_points":9,"attack_cost":3}},{"creature":{"id":6," name":null,"sprite_location":null,"health_points":null,"attack":null,"defense":null,"action_points":null,"attack_cost":null}}]吞下去。","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/swallow.gif","health_points":30,"attack":12,"defense":10,"action_points": 13,"attack_cost":5}},{"creature":{"id":5,"name":"Kappa.","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/ kappa.gif","health_points":40,"attack":6,"defense":15,"action_points":9,"attack_cost":3}},{"creature":{"id":6," name":null,"sprite_location":null,"health_points":null,"attack":null,"defense":null,"action_points":null,"attack_cost":null}}]com/games/Parousia/sprites/swallow.gif","health_points":30,"attack":12,"defense":10,"action_points":13,"attack_cost":5}},{"creature": {"id":5,"name":"Kappa.","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/kappa.gif","health_points":40,"attack": 6,"防御":15,"action_points":9,"attack_cost":3}},{"creature":{"id":6,"name":null,"sprite_location":null,"health_points": null,"攻击":null,"防御":null,"action_points":null,"attack_cost":null}}]com/games/Parousia/sprites/swallow.gif","health_points":30,"attack":12,"defense":10,"action_points":13,"attack_cost":5}},{"creature": {"id":5,"name":"Kappa.","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/kappa.gif","health_points":40,"attack": 6,"防御":15,"action_points":9,"attack_cost":3}},{"creature":{"id":6,"name":null,"sprite_location":null,"health_points": null,"攻击":null,"防御":null,"action_points":null,"attack_cost":null}}]attack_cost":5}},{"creature":{"id":5,"name":"Kappa.","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/kappa.gif ","health_points":40,"attack":6,"defense":15,"action_points":9,"attack_cost":3}},{"creature":{"id":6,"name": null,"sprite_location":null,"health_points":null,"attack":null,"defense":null,"action_points":null,"attack_cost":null}}]attack_cost":5}},{"creature":{"id":5,"name":"Kappa.","sprite_location":"http://chunkofwhat.com/games/Parousia/sprites/kappa.gif ","health_points":40,"attack":6,"defense":15,"action_points":9,"attack_cost":3}},{"creature":{"id":6,"name": null,"sprite_location":null,"health_points":null,"attack":null,"defense":null,"action_points":null,"attack_cost":null}}]attack_cost":3}},{"creature":{"id":6,"name":null,"sprite_location":null,"health_points":null,"attack":null,"defense":null," action_points":null,"attack_cost":null}}]attack_cost":3}},{"creature":{"id":6,"name":null,"sprite_location":null,"health_points":null,"attack":null,"defense":null," action_points":null,"attack_cost":null}}]

当我尝试使用 jQuery.parseJSON() 时，它只给了我一堆 [object Object]，但我不能引用 bio[1].id 等。

同样，我知道这是一个经常被问到的问题。我真的经历过很多其他的例子，但它们对我来说并不奏效。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:18:02.440

每个对象都有一个属性 ( `creature`)，另一个对象作为它的值。

```
result_of_parsing_json[1].creature.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:23:27.490

您的代码似乎完全有效。试试**[这个 jsfiddle](http://jsfiddle.net/FN2RL/2/)**。

```
var creatures = $.parseJSON(yourJSONString);

alert(creatures[0].creature.name);​ // alerts "R.I.P" 
```

您需要任何具体说明吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:27:13.877

```
var creatures = JSON.parse('big_json_string');

for (var i = 0; i < creatures.length; i++) {
    var creature = creatures[i].creature; // this is how your object is formatted

    console.log(creature.name);
}

/*
 R.I.P.
 R.I.P.
 Bull.
 Swallow.
 Kappa.
 null
*/ 
```

每个生物都嵌套在另一个对象中，并且由于它是一个对象数组（包含该生物），因此您必须使用循环对其进行迭代`for`才能使用它。

那么，您对 JSON 的解析很可能是正确的，但随后出现的逻辑却不是（完全猜测）。

# java - 如何在生效日期更新用户？

> ID：10043340
> 
> 赞同：3
> 
> 时间：2012-04-06T12:15:22.040
> 
> 标签：java, database

我们目前正在用 Java 开发基于用户的 Web 应用程序。

用户可以拥有许多属性，例如名字、姓氏、地区（例如亚洲、欧洲、美国、英国）、国家、部门、分支、产品等。

该用户具有上述所有字段的正常 CRUD 屏幕。

用户的添加/编辑屏幕还将有一个称为生效日期的日期字段。此添加/编辑用户与常规 CRUD 中的普通添加/编辑不同的方式是，对用户所做的更新将在生效日期之前反映。

假设今天是 4 月 6 日，我添加了一个新用户，区域为亚洲，生效日期为 4 月 10 日。现在我去更改同一个用户并将他的区域从亚洲更改为美国，但生效日期为 5 月 15 日。

因此，直到 5 月 15 日，系统应仅将他的地区显示为亚洲，并且在 5 月 15 日，他的地区应自动更改为美国。

您可以将其视为 4 月在亚洲工作的用户，但从 5 月 15 日起，他将搬到美国工作，即地区从亚洲更改为美国，5 月 15 日生效。所以在 5 月 15 日之前，他应该只在亚洲显示为用户。

所以我不能把他的区域从亚洲更新到我们数据库中作为一个简单的更新操作。

这也适用于许多其他领域，如部门、分支和产品。

我不能为同一个用户拥有多条记录。

**编辑1：**

我们还应该能够看到用户历史记录或未来的更新。

就像 4 月 6 日一样，我应该看到用户区域将从 5 月 15 日开始更改，他的部门将从 5 月 10 日开始从 A 更改为 B。

我也应该能够删除更新，说我稍后才知道，从亚洲到美国的拟议转移用户可能不会在 15 日生效，所以我应该能够删除该更新。

**编辑2：-**

鉴于上述情况，我如何在我的原始用户表和用户更改日志表中进行更改？

假设系统中有一个亚洲地区的用户，该用户将在接下来的几周内从亚洲更改为我们。用户将对用户有相同的更新。他将地区从亚洲更改为用户，并选择生效日期作为未来日期。

现在我如何检查区域是否从亚洲更改为我们（可以有像区域这样的名称 mre 字段）。我应该在代码级别执行此操作，还是可以使用触发器等在数据库级别执行此操作？

请帮助我为此设计系统和数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:26:33.153

您可以创建一个`User_Region`包含`User_ID`,`Region_ID`和的映射表`Change_Date`。`Change_Date`将在用户的区域切换发生时给出。当更改日期为空时，这可能意味着用户当前位于该区域。

然后，您可以获得一个地区列表`User_ID`以及日期，可以根据您的方便显示。

```
CREATE TABLE User_Regions{
   User_ID INT,
   Region_ID INT,
   Change_Date DATE,
   FOREIGN KEY User_ID REFERENCES User(ID),
   FOREIGN KEY Region_ID REFERENCES Region(ID)
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:26:42.300

历史表可以解决问题。这意味着，拥有尽可能多的带有*日期*列的历史记录，并且只将最接近当前日期的记录视为当前记录。否则，您必须将更新历史记录保存在单独的表中，并有一个批量更新过程来更新更改。我建议尝试通过获取用户实体的规范化结构来克服无法为同一用户拥有多个记录的障碍：*用户*表将具有关键列（例如 id）和一个包含历史更新的连接表以及其余部分列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T12:30:48.210

我建议您可以实现这个系统，维护一个**CHANGELOG 表**和一个**调度程序**，该调度程序将在每天的特定时间运行。

**CHANGELOG 表** 属性：

*   目标表
*   目标主键
*   目标列
*   目标价值
*   生效日期

现在，每当对必填字段进行更新时，在更改日志表中插入相应的条目。

例子，

*   目标表：用户
*   targetPrimaryKey : 3（用户记录的主行ID）
*   目标列：区域
*   目标值：美国
*   生效日期：2012 年 5 月 15 日

现在，调度程序将每天运行（例如上午 12:00），并将检查当天从 CHANGELOG 表中进行的计划更改，并在相应的目标表中进行这些更改。

**注意：这种方法有两个优点：**

1.  您不必为同一记录维护两个条目。

2.  您也可以定位多个字段（区域、部门、分支）和多个表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T12:26:53.810

你有两种可能：

1.  你有一个不同的表，看起来像你的用户表，并且有一个额外的列“validFrom”，然后每天早上都有一个 cron (quartz) 作业更新。
2.  您将该列与有效的用户表一起添加到您的常规用户表中，并更改您的所有查询以反映这一点。

正如您已经说过的，您不能有多个记录，所以 2\. 将是一个糟糕的解决方案。坚持1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T12:29:02.407

“纯”数据模型将在密钥中包含一个日期，并且有多个版本，但是在更改未来事件方面存在一些问题。

我想我会尝试将未来的更改建模为“操作”列表，并且将来更改字段实际上是安排将在该日期修改字段的操作。

应用程序会在操作到期时定期应用操作。

在 GUI 中，显示待处理操作的列表很简单，并且很容易取消或修改未来的操作。

您可以设置规则来限制或发出冲突操作的警告，但如果列表清晰可见，那就不是问题了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T12:29:24.167

在我看来，您应该使用 Event 语句。以下是 2 个事件：

```
CREATE EVENT myevent
    ON SCHEDULE AT DATE_CHANGING
    DO
      UPDATE myschema.mytable SET mycol = mycol + 1;

CREATE EVENT myevent
    CREATE EVENT myevent
    ON SCHEDULE AT DATE_BACKUP
    DO
      UPDATE myschema.mytable SET mycol = mycol - 1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T12:30:06.433

我可以想到两种方法：

# 将所有版本保留在主表中

```
| user_name (PK) | effective_date_from (PK) | ...remaining columns 
```

在这种方法中，每个用户都由 table 中的几行表示，`User`但只有一行是*current*。为了找到当前数据，您需要添加一些额外的查询：

```
SELECT *
FROM User
WHERE user_name = ?
  AND effective_date >= NOW()
ORDER BY effective_date DESC
LIMIT 1 
```

因此，我们正在获取所有具有给定的用户`user_name`（此类用户的多个版本具有不同的`effective_date`，因此`effective_date`也必须是主键的一部分）。我们将结果限制为最新版本（但`effective_date`将来不会）。

这种方法有几个缺点：

*   外键怎么办？逻辑上系统中只有一个用户
*   性能差，查询复杂
*   如何处理过时的版本？

# 待定版本表

保持原始（主）`User`表模式不做任何更改，并有第二个表名为`Pending_user_changes`. 后者也将具有相同的架构 +`effective_date`列。如果更改的粒度是一天，请编写一个作业（在数据库或应用程序中），查找应从今天开始生效的任何未决更改并替换主表。

我发现这个解决方案更干净：主表中的主键/外键永远不会改变，`main`表也不会被旧的和重复的数据弄乱。

# c - C 中 printf() 的异常行为？

> ID：10043341
> 
> 赞同：-3
> 
> 时间：2012-04-06T12:15:28.977
> 
> 标签：c

这是我在 C 中的代码：

```
#include<stdio.h>

int main()
{
printf("hello","world");
} 
```

当我在我的系统中运行此代码时，它只显示 hello 作为输出。为什么它不显示 hello world 作为输出？在 hello 和 world 之间使用 , 的意义是什么？谁能给我解释一下？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T12:17:09.377

你`printf`用两个参数打电话。该语句中逗号的意义在于它用于分隔两个参数。

的第一个参数`printf`是可以包含占位符的格式字符串。其余参数是将替换为格式字符串而不是占位符的值。但是您的格式字符串没有占位符，因此不使用第二个参数。

不过，这会起作用：

```
printf("hello %s", "world"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:25:34.620

使用`printf("hello world")`或`printf("hello %s", "world")`。你写的不符合[printf 手册](http://swoolley.org/man.cgi/3/printf)。

# objective-c - 创建安全范围的书签时遇到问题

> ID：10043345
> 
> 赞同：12
> 
> 时间：2012-04-06T12:15:41.000
> 
> 标签：objective-c, macos, osx-lion, nsopenpanel, appstore-sandbox

我正在将我的 Lion 应用程序转换为使用应用程序沙盒。我正在尝试利用 10.7.3 中引入的[安全范围书签](https://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW16)功能来允许对文件夹进行持久访问。我在下面的代码返回一个 nil 书签，并产生以下日志消息：`XPC couldn't look up the Mach service for scoped bookmarks agent`.

我将`User Selected File Access`权利设置为`Read/Write Access`，并尝试使用和不使用周围的`..AccessingSecurityScopedResource`调用。

我认为我根据文档做的一切都是正确的，所以我会很感激任何指示。在我开始对应用程序进行沙盒处理之前，该代码正在检索一个纯 URL。

```
NSOpenPanel *openPanel = [NSOpenPanel openPanel];
[openPanel setCanChooseFiles:NO];
[openPanel setCanChooseDirectories:YES];
[openPanel setAllowsMultipleSelection:NO];

NSInteger result = [openPanel runModal];

if( result == NSFileHandlingPanelCancelButton ) {
    return;
}

NSArray *urls = [openPanel URLs];

if( urls != nil && [urls count] == 1 ) {
    NSURL *url = [urls objectAtIndex:0];

    NSData *bookmark = nil;
    NSError *error = nil;
    bookmark = [url bookmarkDataWithOptions:NSURLBookmarkCreationWithSecurityScope
             includingResourceValuesForKeys:nil
                              relativeToURL:nil // Make it app-scoped
                                      error:&error];
    if (error) {
        NSLog(@"Error creating bookmark for URL (%@): %@", url, error);
        [NSApp presentError:error];
    }

    NSLog(@"bookmark: %@", bookmark);
} 
```

**更新 (x3)**

现在我让它工作了，我可以验证在上面的代码中调用[`-startAccessingSecurityScopedResource`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/startAccessingSecurityScopedResource)and[`-stopAccessingSecurityScopedResource`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/stopAccessingSecurityScopedResource)是不必要的，因为 Powerbox 在用户在`NSOpenPanel`.

如果您从另一个安全范围的 URL 创建书签，例如从另一个应用会话中创建的应用范围的书签创建文档范围的书签，那么您需要首先访问该文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T12:27:37.057

事实证明，我错过了一项关键权利，未在 UI 中列出，但在[文档](https://developer.apple.com/library/mac/documentation/Miscellaneous/Reference/EntitlementKeyReference/EnablingAppSandbox/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4-SW18)中列出：

```
com.apple.security.files.bookmarks.app-scope 
```

**2018 年 12 月 18 日更新**

根据[此 Twitter 线程](https://twitter.com/lapcatsoftware/status/1063600866622611456)，可能不再需要此权利。感谢[@pkamb](https://stackoverflow.com/users/1265393/pkamb)提醒我这一点。

# c# - 在 TreeNode 上定位气球工具提示

> ID：10043352
> 
> 赞同：1
> 
> 时间：2012-04-06T12:16:19.783
> 
> 标签：c#, winforms, treeview, tooltip

我想添加一个`ToolTip`节点`TreeView`并使一个气球出现在鼠标坐标处：

```
private void treeView1_MouseMove(object sender, MouseEventArgs e)
{
    node = treeView1.getNodeAt(e.X, e.Y);
    toolTip1 = new ToolTip();
    toolTip1.IsBalloon = true;
    toolTip1.InitialDelay = 500;
    toolTip1.SetToolTip(treeView1, node.Text);
} 
```

问题是`ToolTip`被分配给`TreeView`，而不是`TreeNode`，并且气球的位置很奇怪 - 不是在预期的鼠标坐标处，而是在`treeView1`.

我试图使用`toolTip1.Show()`但该`InitialDelay`属性被忽略。

如何将气球`ToolTip`放置在 a 上`TreeNode`并延迟其显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T12:59:11.643

为了`ToolTip`显示`TreeNodes`. `TreeView`有一个`ShowNodeToolTips`可以设置的属性，并且`true`有`TreeNodes`一个`ToolTipText`属性。

* * *

但是，如果您想将 显示`ToolTip`为气球，事情会变得更加复杂。幸运的是`TreeView`有一个`NodeMouseHover`事件。与 a 一起`Timer`，我们可以使我们的`ToolTip`行为符合预期。

在我们的表单中，我们进行这些声明并设置计时器事件处理程序

```
private const int InitialToolTipDelay = 500, MaxToolTipDisplayTime = 2000;

private ToolTip toolTip = new ToolTip();
private Timer timer = new Timer();
private TreeNode toolTipNode;

public frmTreeViewWithToolTip()
{
    InitializeComponent();
    toolTip.IsBalloon = true;
    timer.Tick += new EventHandler(timer_Tick);
} 
```

在`NodeMouseHover`我们启动过程中

```
private void treeView_NodeMouseHover(object sender,
                                     TreeNodeMouseHoverEventArgs e)
{
    timer.Stop();
    toolTip.Hide(this);

    toolTipNode = e.Node;

    timer.Interval = InitialToolTipDelay;
    timer.Start();
} 
```

计时器将启动两次：一次用于初始延迟，一次用于气球的最大显示时间。`timer.Tick`因此我们必须在事件处理程序中处理这两种情况

```
void timer_Tick(object sender, EventArgs e)
{
    timer.Stop();
    if (timer.Interval == InitialToolTipDelay) { 
        Point mousePos = treeView.PointToClient(MousePosition);

        // Show the ToolTip if the mouse is still over the same node.
        if (toolTipNode.Bounds.Contains(mousePos)) {
             // Node location in treeView coordinates.
            Point loc = toolTipNode.Bounds.Location;

             // Node location in form client coordinates.
            loc.Offset(treeView.Location);

            // Make balloon point to upper right corner of the node.
            loc.Offset(toolTipNode.Bounds.Width - 7, -12);

            toolTip.Show("Node: " + toolTipNode.Text, this, loc);

            timer.Interval = MaxToolTipDisplayTime;
            timer.Start();
        }
    } else {
        // Maximium ToolTip display time exceeded.
        toolTip.Hide(this);
    }
} 
```

最后，我们不想`ToolTip`在鼠标离开时显示`TreeView`

```
private void treeView_MouseLeave(object sender, EventArgs e)
{
    timer.Stop();
    toolTip.Hide(this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:03:46.290

我认为你需要使用：

toolTip1.Show("文本", treeView1, point);

# iphone - 在应用程序中访问设备消息

> ID：10043354
> 
> 赞同：-1
> 
> 时间：2012-04-06T12:16:25.263
> 
> 标签：iphone, objective-c

我们如何在我们的应用程序中阅读我们的设备收件箱消息？我必须阅读设备消息收件箱中的所有消息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:18:40.490

您只能在**越狱设备**上访问消息。

您的应用绝对**不会被 App Store 批准**。

如果您仍然感兴趣，请参阅[How to Make Application which Store Sent and Received Messages in iPhone上已接受的答案](https://stackoverflow.com/questions/9666201/how-to-make-application-which-store-sent-and-received-messages-in-iphone/9666281#9666281)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:56:26.197

您是否在问如何访问电子邮件或 SMS 消息？如果是这样，就没有办法做到这一点。您无权使用 iOS SDK 访问此类个人用户数据。想想现在 UDID 引起的争议，想想如果第三方应用程序拥有这种访问权限会发生什么。

# asp.net-mvc-3 - 使用 RemoteValidation 纠正客户端的输入

> ID：10043360
> 
> 赞同：0
> 
> 时间：2012-04-06T12:16:47.837
> 
> 标签：asp.net-mvc-3, remote-validation

是否有可能使用远程验证在客户端纠正输入？例如，用户将输入日期为**010101**，这意味着**01-Jan-2001**，远程验证可以在/到客户端反映/传递纠正值（ **010101**到**01-Jan-2001 ）吗？**

我有一个场景，我有 JS 将输入格式化为正确的日期格式。后来我不得不使用 RemoteValidation。我的远程验证以**ddmmyy**格式接收日期（RemoteValidation 在 JS 之前调用），它首先将其转换为正确的日期然后执行验证，然后我的 JS 根本没有被调用，因此**010101**没有被转换为**01-Jan- 2001 年**。

**编辑**

有两件事我想得到帮助

1-是否有远程验证功能可以修改传递给它进行验证的模型/数据，然后将其传递回视图，以便用户可以看到模型/数据的修改版本

[**已删除**：2-我有一个日期字段的 JavaScript，它在焦点丢失时格式化日期。它工作正常。当我将远程验证与 JS 一起使用时，脚本根本不会被调用。]

**编辑**

**模型**

```
public class master
{
    public string sometext { get; set; }
    public child mychild { get; set; }
}   

public class child
{
    public child()
    {
        thedate = DateTime.MaxValue;
    }
    [Remote("ValidateDate", "Test", ErrorMessage = "Invalid Date")]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:mm/dd/yyyy}", NullDisplayText = "Enter Date")]
    public DateTime? thedate { get; set; }
} 
```

**看法**

```
@model Models.master
@using Web.Framework

@{
    Layout = null;
    }

<html>
<head>
    <title>Test - My ASP.NET MVC Application</title>
        <script src="@Url.Scripts("jquery-1.7.1.min.js")" type="text/javascript"></script>
        <script src="@Url.Scripts("jquery-ui-1.8.11.js")" type="text/javascript"></script>
        <script src="@Url.Scripts("modernizr-2.0.6-development-only.js")" type="text/javascript"></script>
        <script src="@Url.Scripts("AjaxLogin.js")" type="text/javascript"></script>
        <script src="@Url.Scripts("jquery.validate.min.js")" type="text/javascript"></script>
        <script src="@Url.Scripts("jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
        <script src="@Url.Scripts("jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
        <script src="@Url.Scripts("MicrosoftAjax.js")" type="text/javascript"></script>
        <script src="@Url.Scripts("MicrosoftMvcAjax.js")" type="text/javascript"></script>

        <script src="@Url.Scripts("myScripts.js")" type="text/javascript"></script>
</head>
<body>
@using (Html.BeginForm("testSubmit", "Test"))
{
    @Html.LabelFor(m => m.sometext)
    <br />
    @Html.TextBoxFor(m => m.sometext)
    <br />

    @Html.LabelFor(m => m.mychild.thedate)
    <br />
    @Html.TextBoxFor(m => m.mychild.thedate, new { onblur = "doDate(this, '');" })
    @Html.ValidationMessageFor(m => m.mychild.thedate)

        <br />
    <input type="submit" value = "Submit me" />   
}
</body></html> 
```

**控制器**

```
public ActionResult testSubmit(master model)
{
    @ViewBag.Message = "OK";
    return View("response");
}

public JsonResult ValidateDate(DateTime? thedate)
{
    return Json(HttpContext.Request.QueryString["mychild.thedate"].ToString(), JsonRequestBehavior.AllowGet);
} 
```

我的远程验证器始终接收 null in `thedate`，但我可以从查询字符串访问值，但该值未格式化，即远程验证在 JS 之前被调用，这意味着我必须先在远程函数中格式化日期然后验证，一旦验证然后这个输入由JS再次格式化，两者都必须同步。

现在，我怎样才能在远程函数中获取格式化值或将格式化值从远程函数传递到视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:27:39.323

由于我没有得到任何答案，所以到目前为止，答案是“否”。

# javascript - 遍历数据以显示自动完成建议

> ID：10043366
> 
> 赞同：0
> 
> 时间：2012-04-06T12:16:58.107
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

这是一个以数组形式返回结果的 API，用于自动建议

例如。如果我查询“google”，我会得到如下结果

```
["google","google maps","google translate","google earth","google images","google docs","google voice","google scholar","google chrome","google calendar",] 
```

你可以[在这里自己尝试](http://teckzone.in/q.php?q=google)

这是我用来查询此 API 的代码，但它似乎没有返回结果。

[这](http://jsfiddle.net/SmmnP/)是我正在使用的代码

```
 $(function() {

    $( "#city" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "q.php",
                dataType: "json",
                data: {
                    "q" : request.term
                },
                success: function( data ) {
                    response(data[1]);
                }
            });
        },
        minLength: 2
    });
}); 
```

我不明白我在代码中哪里出错了请纠正我！因为它似乎不像我想要的那样工作

编辑：从同一服务器访问数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:26:26.180

您忘记在小提琴中添加 jquery-ui 库。但是如果你这样做，代码无论如何都不会工作，因为你不能通过 ajax 请求访问来自另一个域的数据。仅来自同一域的 js 代码执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:36:31.420

您可以在此处阅读有关在跨域环境中使用 jQuery 自动完成功能的信息：http: [//1300grams.com/2009/08/17/jquery-autocomplete-with-json-jsonp-support-and-overriding-the-default-search-参数-q/](http://1300grams.com/2009/08/17/jquery-autocomplete-with-json-jsonp-support-and-overriding-the-default-search-parameter-q/)

您还需要将 jquery.autocomplete.js 添加到您的 jsFiddle 环境中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:30:03.527

这可能会有所帮助

```
$(document).ready(function() {
$.getJSON('http://twitter.com/users/usejquery.json?callback=?', function(json) { //get information about the user usejquery from twitter api
$('#twitter_followers').text(json.followers_count); //get the follower_count from the json object and put it in a span
});
}); 
```

寻找称为跨域ajax 的东西。 [http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)

# android - Android 模拟器在运行 libgdx 应用程序时崩溃

> ID：10043368
> 
> 赞同：-1
> 
> 时间：2012-04-06T12:17:04.180
> 
> 标签：android

将文件夹 armeabi 和 armeabi-v7a 添加到 android 项目 /libs 文件夹中也不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:14:50.337

我下载了最新的 libgdx，它现在在我的 android 模拟器上运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T23:22:51.247

在创建新的 AVD 时选中“使用主机 GPU”。

# string - 如何知道原子是否以模式开头？

> ID：10043374
> 
> 赞同：2
> 
> 时间：2012-04-06T12:17:25.450
> 
> 标签：string, prolog

例如，如果我得到以下谓词：

```
father('jim', 'Boby')
father('rob', 'bob') 
```

我想知道谁让父亲的名字以'bo'开头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T13:35:58.660

只需使用`atom_concat/3`ISO Prolog 标准内置谓词。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T16:49:44.880

另一个 ISO 选项是`sub_atom/5`：

`sub_atom(Atom, Before, Length, After, Sub_atom)`

```
?- sub_atom(bob, 0, _, _, bo).
true. 
```

与 相比`atom_concat/3`，这避免了生成不需要的原子来表示后缀。

# java - Java X509 证书解析和验证

> ID：10043376
> 
> 赞同：13
> 
> 时间：2012-04-06T12:17:34.983
> 
> 标签：java, validation, x509certificate, pki, jce

我正在尝试分几个步骤处理 X509 证书并遇到了几个问题。我是 JCE 的新手，所以我还没有完全了解所有内容。

我们希望能够基于不同的编码（PEM、DER 和 PCKS7）解析几个不同的 X509 证书。我已经使用 FireFox 从[https://belgium.be](https://belgium.be)以 PEM 和 PCKS7 格式导出了相同的证书（证书包括链）。我留下了问题不需要的几行

```
public List<X509Certificate> parse(FileInputStream fis) {  
    /*
     * Generate a X509 Certificate initialized with the data read from the inputstream. 
     * NOTE: Generation fails when using BufferedInputStream on PKCS7 certificates.
     */
    List<X509Certificate> certificates = null;
      log.debug("Parsing new certificate.");
      certificates = (List<X509Certificate>) cf.generateCertificates(fis);
    return certificates;
  } 
```

只要我使用 FileInputStream 而不是 PCKS7 的 BufferedInputStream，这段代码就可以正常工作，我认为这已经很奇怪了？但我可以忍受它。

下一步是验证这些证书链。1）检查所有证书是否都有有效日期（简单） 2）使用 OCSP 验证证书链（如果在证书中找不到 OCSP URL，则回退到 CRL）。这是我不完全确定如何处理的地方。

我正在使用 Sun JCE，但似乎没有太多可用的文档（在示例中）？

我首先做了一个简单的实现，只检查链而不通过 OCSP/CRL 检查。

```
private Boolean validateChain(List<X509Certificate> certificates) {
    PKIXParameters params;
    CertPath certPath;
    CertPathValidator certPathValidator;
    Boolean valid = Boolean.FALSE;

    params = new PKIXParameters(keyStore);
    params.setRevocationEnabled(false);

    certPath = cf.generateCertPath(certificates);
    certPathValidator = CertPathValidator.getInstance("PKIX");

    PKIXCertPathValidatorResult result = (PKIXCertPathValidatorResult)  
    certPathValidator.validate(certPath, params);

      if(null != result) {
        valid = Boolean.TRUE;
      }
    return valid;
 } 
```

这适用于我的 PEM 证书，但不适用于 PCKS7 证书（相同的证书，仅以其他格式导出）。 **java.security.cert.CertPathValidatorException：路径不与任何信任锚链接。**

我能看到的唯一区别是形成 CertPath 的顺序不一样？我无法弄清楚出了什么问题，所以我暂时离开了这个并继续使用 PEM 证书，但我们称之为问题 1 ;)

之后我想要实现的是 OCSP 检查。显然，如果我启用 OCSP 使用： **Security.setProperty("ocsp.enable", "true");** 并设置 **params.setRevocationEnabled(true);** 它应该能够自行找到 OCSP URL，但似乎并非如此。标准实现应该做什么（问题2）？ **java.security.cert.CertPathValidatorException：必须指定 OCSP 响应程序的位置**

通过这个，我找到了一种使用 AuthorityInfoAccessExtension 等从证书中检索 OCSP url 的方法。

但是在 ocsp.url 属性中手动设置 OCSP url 后，我得到一个**java.security.cert.CertPathValidatorException: OCSP response error: UNAUTHORIZED**

似乎我错过了很多必要的步骤，而很多在线参考资料都说设置**ocsp.enable**属性应该是您需要做的所有事情？

也许你们中的任何一个高手都不能指导我完成这个过程？告诉我我完全错了:)

如果没有找到 OCSP，下一步将实施 CRL 检查，如果有人可以指出任何示例或向我展示一些关于此的文档，我将不胜感激！

谢谢！

**编辑：** 由于它不是自己获取属性，我一直在尝试使用以下方法自己设置所有属性：

```
 // Activate OCSP
        Security.setProperty("ocsp.enable", "true");
        // Activate CRLDP -- no idea what this is
        Security.setProperty("com.sun.security.enableCRLDP", "true");

        X509Certificate target = (X509Certificate) certPath.getCertificates().get(0);
        Security.setProperty("ocsp.responderURL","http://ocsp.pki.belgium.be/");
        Security.setProperty("ocsp.responderCertIssuerName", target.getIssuerX500Principal().getName());
        Security.setProperty("ocsp.responderCertSubjectName", target.getSubjectX500Principal().getName());
        Security.setProperty("ocsp.responderCertSerialNumber", target.getSerialNumber().toString(16)); 
```

这给出了一个例外：java.security.cert.CertPathValidatorException：找不到响应者的证书（使用 OCSP 安全属性设置）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T01:29:25.977

为了将来参考，我将发布我自己问题的答案（至少部分）

OCSP 和 CRL 检查已经在标准 Java 实现中实现，不需要自定义代码或其他提供程序（BC，..）。默认情况下它们被禁用。

要启用此功能，您必须至少设置两个参数：

```
(PKIXParameters or PKIXParameterBuilder) params.setRevocationEnabled(true);
Security.setProperty("ocsp.enable", "true"); 
```

当您尝试验证证书路径 (PKIXCertPathValidatorResult.validate()) 时，这将激活 OCSP 检查。

如果您想在没有 OCSP 可用的情况下为 CRL 添加回退检查，请添加一个附加属性：

```
System.setProperty("com.sun.security.enableCRLDP", "true"); 
```

由于我必须支持不同的证书格式（PKCS7、PEM），我的很多问题正在发生。我的实现适用于 PEM，但由于 PKCS7 不保存链中证书的排序，因此有点困难（[http://bugs.sun.com/view_bug.do?bug_id=6238093](http://bugs.sun.com/view_bug.do?bug_id=6238093)）

```
X509CertSelector targetConstraints = new X509CertSelector();

targetConstraints.setCertificate(certificates.get(0));
// Here's the issue for PKCS7 certificates since they are not ordered,
// but I havent figured out how I can see what the target certificate
// (lowest level) is in the incoming certificates..

PKIXBuilderParameters params = new PKIXBuilderParameters(anchors, targetConstraints); 
```

希望这对其他人也有用，也许有人可以阐明如何在无序的PKCS7列表中找到目标证书？

# php - 如何使用 PHP 以分钟为单位检测视频文件的持续时间？

> ID：10043380
> 
> 赞同：5
> 
> 时间：2012-04-06T12:18:11.083
> 
> 标签：php, video

我试图在使用 PHP 上传任何视频文件之前检测它的持续时间，
所以如果它少于一分钟，例如我将拒绝上传它。
如果不可能，上传视频后我该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T12:26:55.587

你可以 get `video duration`with`ffmpeg` 或 getID3

例子

```
$getID3 = new getID3;
$file = $getID3->analyze($filename);
echo("Duration: ".$file['playtime_string'].
        " / Dimensions: ".$file['video']['resolution_x']." wide by ".$file['video']['resolution_y']." tall".
        " / Filesize: ".$file['filesize']." bytes<br />"); 
```

或者

```
 ob_start();
 passthru("ffmpeg -i working_copy.flv  2>&1");
 $duration = ob_get_contents();
 $full = ob_get_contents();
 ob_end_clean();
 $search = "/duration.*?([0-9]{1,})/";
 print_r($duration);
 $duration = preg_match($search, $duration, $matches, PREG_OFFSET_CAPTURE, 3);
 print_r('<pre>');
 print_r($matches[1][0]);
 print_r($full); 
```

请参见

[http://getid3.sourceforge.net/](http://getid3.sourceforge.net/)

[http://ffmpeg.org/](http://ffmpeg.org/)

[如何在 PHP 中获取视频时长、尺寸和大小？](https://stackoverflow.com/questions/4847752/how-to-get-video-duration-dimension-and-size-in-php)

[获取 flv 视频长度](https://stackoverflow.com/questions/6214924/get-flv-video-length)

谢谢

:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-19T15:36:12.323

对于前来检查的人来说，这是 2017 年更先进的解决方案

```
 first download the latest version from the first link above in the accepted answer the (green checkmark)          

     require_once('getid/getid3/getid3.php'); //path to your get id file if you do not include this in your file it will result in an error meaning the code will not work
$file = "sade.mp4"; //what you want extract info from maybe mp3,or mp4 file anything you want to get file size in bytes or time duration
$uuuuu = "videos/"; //path to your video file it could also be music not only video
$getID3 = new getID3; //initialize engine
$ThisFileInfo = $getID3->analyze($uuuuu.$file);
getid3_lib::CopyTagsToComments($ThisFileInfo);
echo '<pre>'.htmlentities(print_r($ThisFileInfo, true)).'</pre>';  //use this to print array to pick whatever you like that you want value like playduration, filesize 
```

# javascript - Leaflet JS 标记不会在 Android WebView 中触发“点击/单击”事件。

> ID：10043390
> 
> 赞同：2
> 
> 时间：2012-04-06T12:19:06.383
> 
> 标签：javascript, click, markers, leaflet

Leaflet JS 标记不会在 Android WebView 中触发“点击/单击”事件。我已经在 Android 2.x -> 4.0 中测试过它？我正在使用 mapbox + 蜡 + 传单 JS。有没有人有这个工作？谢谢！！

```
var marker = new L.Marker(new L.LatLng(_lat, _long), { icon: _icon, clickable: true,
draggable: false });

marker.on('click', function () {
    //never fires in android WebView or stock browser
}); 
```

# android - 如何从多个 URL 获取数据并将其存储到一个简单的数组中？

> ID：10043392
> 
> 赞同：1
> 
> 时间：2012-04-06T12:19:25.627
> 
> 标签：android, json, url, android-asynctask, http-get

我正在使用以下类（AsyncTask）从 8 个不同的 URL 中检索信息。我想将检索到的数据存储到一个由 8 个元素组成的数组中（一个用于我从中获取数据的每个 URL）。

```
 private class getDataClass extends AsyncTask<String, Void, String>{
    protected String doInBackground(String...urls){
        String response = "";
        for(String url : urls){
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            try{
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(new InputStreamReader(content));

                String s = "";

                while((s = buffer.readLine()) != null){
                    response += s;
                }
            }catch(Exception e){
                e.printStackTrace();
            } 
        }
        return response;
    }

    protected void onPostExecute(String result){
        Resources.descriptionArray[descriptionArray_Counter] = Html.fromHtml(result).toString();
        descriptionArray_Counter++;
    } 
```

并这样称呼它：

```
 getDataClass getData = new getDataClass();
   getData.execute(description_links); 
```

我显然遇到的问题是所有信息都存储在数组 [0] 中，因为我的 AsyncTask 类返回单个“响应”字符串。

我想知道什么，因为我没有找到很多这样的例子，什么是更优雅的方式来做到这一点，以及其他更有经验的编码人员将如何解决这个问题。

非常感谢您花时间回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:24:09.850

```
 as my AsyncTask class returns a single "response" string. 
```

=> 这不是真的。因为 AsyncTask 也可以返回 ArrayList 而不仅仅是一个字符串。

您应该检查[AsyncTask 的通用类型](http://developer.android.com/reference/android/os/AsyncTask.html)

# java - 字符串相等不评估为真

> ID：10043396
> 
> 赞同：1
> 
> 时间：2012-04-06T12:19:39.833
> 
> 标签：java, split

我使用拆分功能

```
string = data.con_loop[i].split("\\."); 
```

字符串输入是“0.9.L”。但，

```
string[2]=="L" 
```

不评估为`true`. 为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:20:58.550

您应该使用`equals("L")`而不是`==`.

```
if(string[2].equals("L"))... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:25:21.360

此外，您可以使用以下`compareTo(string)`功能：

`if(string[2].compareTo("L")){ // then }`

`.compareTo()``0`如果字符串等于您指定的内容，函数将返回您。

您应该阅读官方文档： [http ://docs.oracle.com/javase/6/docs/api/java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

编辑：如果`compareTo()`功能不起作用，请尝试`compareToIgnoreCase()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:21:07.590

```
if(string[2]=="L") 
```

将其更改为

```
if(string[2].equals("L")) 
```

在您的情况下**==**将检查这两个对象的引用是否相同。所以如果你想检查它们的内容，那么你必须使用**equals()**方法。

注意：**==**适用于**字符串实习的概念**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T12:21:16.443

您不需要双斜杠，然后使用等于检查

```
string = data.con_loop[i].split("\.");
if(string[2].equals("L")) {
    //.....
} 
```

# c++ - 模仿 - 找不到共享对象

> ID：10043399
> 
> 赞同：0
> 
> 时间：2012-04-06T12:20:20.883
> 
> 标签：c++, linux, mime, shared-objects

我正在尝试创建一个使用模拟库 v0.9.7 的驱动程序。我可以编译我的应用程序（mime-test），但是当我运行它时，我得到了错误：

mime-test：加载共享库时出错：libmimetic.so.0：无法打开共享对象文件：没有这样的文件或目录

所以我在网上寻找一些答案，但无法弄清楚问题所在。这是我到目前为止所尝试的。

我验证了 libmimetic.so.0 是“/usr/local/lib”中指向 libmimetic.so.0.0.0 的符号链接。在编译和安装 mimetic 之后，我确实运行了“ldconfig”。在我的 Makefile 中，链接时我添加了标志 '-lmimetic 和 -L/usr/local/lib'

当我运行“ldd mime-test”时，我注意到以下条目（省略其他库）：

libmimetic.so.0 => 未找到

一个网站说在 64 位环境中尝试使用 32 位库时可能会发生这种事情，但我不知道如何确定这是否是我的问题。如果有什么不同，我会在我的 x64 平台上编译并安装该库。

有任何想法吗？

# sql - 如何将变量传递给 SqlCommand

> ID：10043400
> 
> 赞同：2
> 
> 时间：2012-04-06T12:20:22.627
> 
> 标签：sql, sql-server, c#-4.0, ado.net, sqlcommand

我已经彻底搜索过，但找不到将`SET`我的列数据转换为我使用 SQL`UPDATE`语句初始化的变量的方法。

这是导致问题的一段代码：

```
int maxId;
SqlConnection dataConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["RegConnectionString"].ConnectionString) ;
SqlCommand dataCommand = new SqlCommand("select max(UserID) from Registration", dataConnection) ;
dataConnection.Open();
maxId = Convert.ToInt32(dataCommand.ExecuteScalar());
string Id = maxId.ToString();

// this next line is not working
SqlCommand _setvin = new SqlCommand("UPDATE Registration SET VIN=maxId , Voted=0  WHERE UserID=maxId", dataConnection);
_setvin.ExecuteNonQuery();

dataConnection.Close(); 
```

请指导我如何更正上面评论的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:24:38.350

也许是这样的：

```
SqlCommand _setvin = new SqlCommand("UPDATE Registration SET VIN=@maxId, Voted=0  WHERE UserID=@maxId", dataConnection);
_setvin.Parameters.Add("@maxId", SqlDbType.Int).Value = maxId;
_setvin.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:23:33.153

我认为您正在尝试这样做：

```
var _setvin = new SqlCommand("UPDATE Registration SET VIN = @maxId, Voted = 0 WHERE UserID = @maxId", dataConnection);
_setvin.Parameters.AddWithValue("@maxId", maxId);
_setvin.ExecuteNonQuery(); 
```

您需要首先更改 SQL 语句以包含 ; 的参数`maxId`。我`@maxId`在你的 SQL 中调用它。然后，您需要为该命令提供该参数的值。这是通过[`Parameters.AddWithValue()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)方法完成的。

# javascript - 关于 JavaScript、WebSockets、WebGL 的问题

> ID：10043401
> 
> 赞同：6
> 
> 时间：2012-04-06T12:20:22.843
> 
> 标签：javascript, websocket, webgl

我已经看到了很多关于其他客户端脚本语言的 stackoverflow 问题

互联网正在成为一个内容丰富且充满活力的地方。HTML 和 CSS 规范正试图将 Web 提升到一个新的水平——我们正在获得 WebSockets 支持，这对于全双工客户端-服务器通信来说非常好，从而使一些引人入胜的设计模式得以出现。此外，我们在 JavaScript 中实现了 WebGL 的工作实现，到目前为止我玩得很开心。

但这引起了一些担忧，至少对我来说是这样。我是桌面程序员，C/C++/Objective-C - 取决于平台。具体来说，渲染建筑师。JavaScript 为我们所有人提供了出色的服务，不是吗？我们用它来获得与 2D*线性*网站的基本用户交互、响应简单事件并将所有这些与 HTML 和 CSS 结合起来。

**鉴于实时通信和 GPU 驱动的可视化之门已经向 Web 敞开，这会对 JavaScript 产生任何影响吗？**我已经看到了人们对 Dart 的反应以及其他试图推出 JavaScript 的尝试。JavaScript 是弱类型的，这对我来说是各种警报（考虑到依赖速度的密集数学库，不必要的运行时检查不是一个有趣的时间）。

我已经将很多代码转移到了 GPU，但即便如此，我的内部渲染器也只是受 CPU 限制（HD6990 不会是问题，更不用说为桌面/嵌入式引擎提供动力的代码了）。

所以，这是它在前面：

*   由于解释器的设计，代码是**赤裸裸的。**渲染技术和解决方案价值不菲。它是我公司的唯一基础并支付账单。混淆并不能解决问题（如果我错了，请纠正我）。我一直在想，**为什么没有一个中间编译过程可以转换成VM可以处理的字节码形式？**

*   它是弱类型的。处理矩阵、向量、四元数、数组和所有其他类型的高度交互应用程序常见的数据只会让运行时检查的处理变得臃肿。即使它最终进入 GPU 端，你仍然需要在 CPU 端做大量的工作，这会被 JavaScript 拖累。

*   基于原型的范例将抑制从可以推动 WebGL/WebSockets 采用的主要参与者移植渲染代码的努力。（请记住，其中很多是由 CPU 驱动的）。**随着越来越多的用户开始要求高保真 2D/3D 内容，基于原型的范例是否会继续存在？**

*   WebSockets 已被证明是 Web 游戏 (BrowserQuest) 的一个漂亮的新增功能，更不用说动态网站了，并且在未来会有很多人推动开发精彩的内容（我的公司正在运行一个小型封闭项目，它实现了一个由 WebSockets 驱动的 3D 环境中的小型 MMO）。

**那么，我的担忧在现实中有任何根据吗？**

**针对这些问题是否有新的动向？**

如果您对该主题提供任何答案，您是否还可以添加一小段个人意见？我知道这不是“Stackexchange 的方式”，但它没有害处，因为所有其他问题都是合法的，并且答案可以基于事实。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T12:40:51.397

您的担忧是基于对 Javascript 运行时如何工作的误解，并且大多没有现实基础。

*   现在所有的 Javascript 代码都是 JIT 的 - 不需要中间字节码语言，并且最初被认为可能阻碍可移植性，这是 web 的最大优点。即使应用程序不作为字节码分发，现代脚本（如 Python、Ruby、PHP 等编程语言）也能很好地工作。不需要字节码步骤，因为代码最终是 JIT 的。您可以为 JIT 提供的材料越多越好。事实上，对于 Java，他们在现代版本中禁用了字节码优化，因为它混淆了 JIT 编译器。

*   JIT 编译可以优化动态类型问题，尽管它们永远不会提供静态类型的性能，但很可能会提供足够好的性能。[尽管http://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript](http://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript)存在一些问题，但 Javascript 实现正在变得更好地解决这些问题。例如，Mozilla Audio 团队（看起来更像演示团队......）正在制作 3D 演示，只是为了获得优化其 Javascript 运行时的材料。

*   我不明白为什么基于原型的方法与高保真度有任何联系，它们是两个完全不同的东西

*   目前，像 Google NaCL 这样的替代方法没有得到其他浏览器供应商的认可，而且很可能永远不会，因为微软和苹果不会采用仅限谷歌的技术，而 Mozilla 将 NaCL 视为对开放网络的威胁

要了解现代 JIT 编译的工作原理，请参阅 PyPy 博客[http://morepypy.blogspot.com/](http://morepypy.blogspot.com/)（尽管不是特定于 Javascript）。他们非常详细地解释了现代计算机科学对代码应用了什么样的 JIT 优化。

对于“在 3D 中可以实现的类似 web 的设计模式”，请参阅 tQuery，它是用于 3D 内容的类似 jQuery 的框架[https://github.com/jeromeetienne/tquery](https://github.com/jeromeetienne/tquery)

干杯，米科

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:15:04.293

*   **Javascript代码是赤裸裸的**: 听起来你的问题是关于保护“知识产权”。我认为您高估了编译提供的保护。编译隐藏你的算法只比好的混淆稍微好一点；一个好的反编译器将揭示你想要隐藏的大部分内容。编译和混淆只能保护你免受好奇而不是那些决心窃取你的想法的人。如果您想保护代码的形式，那就是版权的目的。我还要指出，Web 平台成功的原因之一实际上是“查看源代码”。对于想要学习如何设计出色的网站和 Web 应用程序的人来说，它可能是最好的教育工具。

*   **Javascript 是弱类型的**：是的，但是如果您要对大型数据集进行数学运算，那么您将使用固定大小且具有固定类型/大小的元素的类型化数组。此外，类型推断（在 Firefox 9 中）显着提高了与变量引用相关的性能。

*   **Javascript 是基于原型的**：基于原型的继承比基于标准类的继承更具表现力，并且通过一些糖函数，您可以在 Javascript 中进行非常标准的基于类的继承：[http ://www.crockford.com/javascript/inheritance.html](http://www.crockford.com/javascript/inheritance.html)

*   **WebSockets**：我认为您没有问过有关 WebSockets 的问题。是的，它们是平台的一个很好的补充，特别是协议和 API 的最新迭代，它允许直接发送和接收类型化数组和 Blob 数据。

**意见**：

WebGL 和 Javascript 的性能还没有达到可以移植最新 AAA 第一人称射击游戏的水平。但是，我可能会建议，在不久的将来，真正赚钱的 3D 游戏是休闲网页游戏。这已经在网络上的休闲 2D 游戏中证明是正确的，而且 WebGL 已经变得足够普及，以至于成功的休闲 3D 游戏已经成熟。

此外，如果您对 C/C++ 3D 库有大量投资，那么您可能会考虑[Emscripten](https://github.com/kripken/emscripten)，它是一个针对 Javascript 的编译器，并且具有惊人的出色性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T16:01:09.593

我认为这很有趣，尤其是混淆部分。在我像 6 到 7 年前一样转向网络之前，我自己已经在控制台/桌面游戏行业工作了很多年。起初，视图源对我来说很奇怪。但慢慢地，我开始喜欢它，并对技术解决方案有不同的看法。

诚然，开发高端技术要花很多钱，而且真的很容易复制您的想法和解决方案。确实，在发布它们的那一刻，您将无法对它们进行版权保护或以任何方式保护它们。但这真的有问题吗？我认为这个鼓舞人心的演讲...

[http://www.ted.com/talks/lang/en/johanna_blakley_lessons_from_fashion_s_free_culture.html](http://www.ted.com/talks/lang/en/johanna_blakley_lessons_from_fashion_s_free_culture.html)

...关于它在时尚界的运作方式真的很重要 - 要保持成功，您需要保持警惕并不断发展。无论您发布什么，都已经完成了历史，现在下一步是什么？

您仍然拥有的优势是您的工具和管道，根据我的经验，它们比实际渲染部分更昂贵和复杂。并且您已经拥有一支经验丰富的团队并开始运行游戏，希望您能够成功地从中获利。

另外，顺便说一句，我觉得在线体验更多的是关于社交方面而不是图形，它在许多方面驻留在服务器端，因此受到保护。

期待你的比赛！

# mobile - 存储数据的其他选项是什么？

> ID：10043404
> 
> 赞同：3
> 
> 时间：2012-04-06T12:20:35.093
> 
> 标签：mobile, java-me, midp, rms

我注意到当它们的数量超过 8 时会`recordstores`花费很多。这使得在设备内部创建和捕获是不可能的。虽然我的应用程序需要记录超过 8 个“表”数据。那么持久记录数据的其他可能性是什么？`memory``image``camera`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T02:09:59.067

如果您的应用程序在存储卡中，那么记录存储会占用存储卡中的空间。

否则最好使用“FileConnection”API 创建一个文件并将数据存储在该文件中。

# html - 从 html 页面访问查询字符串/参数

> ID：10043412
> 
> 赞同：8
> 
> 时间：2012-04-06T12:21:08.883
> 
> 标签：html, query-string

我有一个基本的 html 页面，其中有一个查询参数被传递给页面。我以为我可以使用 Request.QueryString 获得值，但我正在做的更多阅读似乎仅适用于 asp 应用程序。我的html如下

```
<body>
    <object type="application/pdf" width="100%" height="100%">
        <!--This didn't work-->
        <param name="src" value="<%=Request.QueryString["path"]%>" />
        <!--Neither did this-->
        <!--<param name="src" value="<%=Request.Params["path"]%>" />-->
        <!--When it is hardcoded then my page is displaying the pdf as expected.-->
        <!--<param name="src" value="scan.pdf" />-->
    </object>
</body> 
```

我用 displayPdf.htm?path=scan.pdf 调用页面

我一直在寻找一种无需编写 javascript 解决方案即可访问 html 中的查询参数的方法，但没有任何运气。我确信添加一个 js 函数不会有太大的问题，只是认为如果有单行方法我会避免它。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T12:57:15.737

这不能在纯 HTML 中完成。

这可以通过两种方式完成，使用 JavaScript：

```
<body><script>
var param = /[&?]path=([^&]+)/.exec(location.search);
param = param ? param[1].replace(/"/g, '&quot;') : '';
document.write('<object type="application/pdf" width="100%" height="100%">\n' +
    '<param name="src" value="' + param + '" />\n</object>');
</script></body> 
```

另一种方法是使用 DOM 填充参数（**演示：http: [//jsfiddle.net/N2GUf/2/](http://jsfiddle.net/N2GUf/2/)**）：

```
<body><object type="application/pdf" width="100%" height="100%">
    <param name="src" value="" id="param-path" />
</object>
<script>
var param = /[&?]path=([^&]+)/.exec(location.search);
if (param)
    document.getElementById('param-path').value = param[1];
</script>​&lt;/body> 
```

在任何一种情况下，查询字符串都是从[`location.search`](https://developer.mozilla.org/en/window.location#Properties)属性中读取的，并使用简单的正则表达式进行解析。

# xml - 如何在xsd中定义一个特定的数字？

> ID：10043414
> 
> 赞同：1
> 
> 时间：2012-04-06T12:21:22.407
> 
> 标签：xml, xsd

我正在研究具有该规范的 xsd 规范（对于一个简单的游戏；））：

我有一个`players`带有属性的 Elem `number`，它表示玩家的数量（一个 num 之间`1 and 4`）。作为子元素，它包含零到四个元素的`screenname`元素。这些元素有玩家网名文本内容和属性，表示游戏结束的编号（介于 之间的数字`1 and 4`）。

我的大问题是 xsd 中一个类型的屏幕名称和 Intervall？那么该怎么做呢？

提前问候和谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:38:38.203

这就是我认为您正在描述的内容：

```
<players number="2">
    <screenname endofgame="3">player screenname text content</screenname>
</players> 
```

这将是一个自动生成的 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<!--W3C Schema generated by QTAssistant/W3C Schema Refactoring Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="players">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="screenname">
          <xsd:complexType>
            <xsd:simpleContent>
              <xsd:extension base="xsd:string">
                <xsd:attribute name="endofgame" type="xsd:unsignedByte" use="required" />
              </xsd:extension>
            </xsd:simpleContent>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
      <xsd:attribute name="number" type="xsd:unsignedByte" use="required" />
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

如前所述，这将是具有附加约束的：`a num between 1 and 4`和 `zero to four screenname elements`. 通过查看之前/之后，您应该了解哪个是哪个。

```
<?xml version="1.0" encoding="utf-8"?>
<!--W3C Schema generated by QTAssistant/W3C Schema Refactoring Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="players">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="screenname" minOccurs="0" maxOccurs="4">
          <xsd:complexType>
            <xsd:simpleContent>
              <xsd:extension base="xsd:string">
                <xsd:attribute name="endofgame" type="Int1to4" use="required" />
              </xsd:extension>
            </xsd:simpleContent>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
      <xsd:attribute name="number" type="Int1to4" use="required" />
    </xsd:complexType>
  </xsd:element>
  <xsd:simpleType name="Int1to4">
    <xsd:restriction base="xsd:int">
      <xsd:minInclusive value="1"/>
      <xsd:maxInclusive value="4"/>
    </xsd:restriction>  
  </xsd:simpleType> 
</xsd:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:34:48.437

要指定元素的重复次数，您需要使用 minOccurs 和 maxOccurs 属性。

# objective-c - 在 Objective-c 中使用常量。重复符号问题

> ID：10043416
> 
> 赞同：3
> 
> 时间：2012-04-06T12:21:41.287
> 
> 标签：objective-c

我有两个带有常量的类。

例如有一个名为**class_a.m**的类包含一个常量`kWidth = 150`，

我也有一个名为**class_b.m**的类包含一个常量`kWidth = 200`

运行我的项目后，我收到重复符号的错误，但这些文件没有嵌套（我的意思是 class_a 到 class_b 或 class_b 到 class_a）。我也只使用这个康斯坦丁实现。

来源：

```
const int kWidht = 150; 
```

错误描述：

```
ld: duplicate symbol _kWidht... 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T12:34:04.180

如果该常量仅在该单个实现文件中使用，则应在其声明前加上`static`. 也就是转这个：

```
const int kWidth = 150; 
```

进入这个：

```
static const int kWidth = 150; 
```

关键字告诉编译器这个`static`符号只在当前文件中使用。[1]如果没有它，编译器会假定您声明了一个*全局*变量，该变量可以从最终应用程序的任何位置访问。声明两个具有相同名称的全局变量不是一个好主意，因为您无法区分它们，因此编译器正确地抱怨。幸运的是，只需通过`static`关键字更明确地说明您的意图，就可以轻松解决此问题。

* * *

1：更准确地说是“翻译单元”，但“文件”对于这个问题来说已经足够好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-04T15:29:17.107

解决这种情况的另一种方法是“收集”类中的所有常量。这样您就可以更好地了解所有常量名称。不利的一面是，这些可以被假定为全局变量，这并不总是被理解的。

# iphone - 从地址簿获取图像并将其存储到 NSmutablearray 但是在显示它时会在 iphone sdk 中给出“EXCBAD 错误”？

> ID：10043420
> 
> 赞同：2
> 
> 时间：2012-04-06T12:22:09.600
> 
> 标签：iphone, abaddressbook, abpeoplepickerview

嗨，我正在创建自定义通讯簿，我只想让这个拥有电子邮件地址的用户一切正常，但是当我尝试在 tableview 中显示图像时，它给了我`EXCBAD Error`。我有这样的代码

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);
    for (CFIndex i = 0; i < CFArrayGetCount(people); i++) {
        ABRecordRef person = CFArrayGetValueAtIndex(people, i);

        ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);
        for (CFIndex j=0; j < ABMultiValueGetCount(emails); j++) {

            UIImage *img;

            if(ABPersonHasImageData(person))
            {
//              img = [UIImage imageWithData:(NSData *)ABPersonCopyImageDataWithFormat(person,kABPersonImageFormatThumbnail)];
                img = [UIImage imageWithData:(NSData *)ABPersonCopyImageData(person)];
//                if(img != nil)
//                {
//                    [arrImage addObject:img];
//                }
//                else
//                {
                    img = [UIImage imageNamed:@"icon-9.png"];
                    [arrImage addObject:img];
//                }
            }else
            {
                img = [UIImage imageNamed:@"icon-9.png"];
                [arrImage addObject:img];
            }

            NSString* email = (NSString*)ABMultiValueCopyValueAtIndex(emails, j);

//          [arrImage addObject:img];
            [arrEmail addObject:email];

            [img release];
            [email release];
        }
        CFRelease(emails);
    }
    CFRelease(addressBook);
    CFRelease(people); 
```

在上面的代码中，我正在获取图像并将图像存储在 NSMutableArray 中，它将被完美地存储。但是当我要在下面的代码中显示图像时

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UIImageView* imagePhoto;

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableFriends dequeueReusableCellWithIdentifier:CellIdentifier];
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

    imagePhoto= [[[UIImageView alloc] initWithFrame:CGRectMake(43.0,10.0,40, 40)] autorelease]; 

    if ([arrEmail count] != 0) 
    {
        imagePhoto.image = [arrImage objectAtIndex:indexPath.row];
        [cell.contentView addSubview:imagePhoto];

        cell.detailTextLabel.text = [NSString stringWithFormat:@"%@",[arrEmail objectAtIndex:indexPath.row]];
        cell.detailTextLabel.textColor = [UIColor whiteColor];

    }
    return cell;
} 
```

当从这里调用图像时，它可以完美地工作，`img = [UIImage imageNamed:@"icon.png"];`但是当从地址簿调用图像时，它会给我错误`EXCBAD Error`，说明该代码有什么问题？如何将图像存储在 NSMutabeArray 中并显示图像？

嘿，帮帮我，任何人都可以帮助我或建议我像[Google Latitude](http://itunes.apple.com/in/app/google-latitude/id306586497?mt=8) 那样实现，你可以在 iPhone 通讯录中添加朋友看到从通讯录中获取图像请帮助我....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:04:08.897

我已经像这样将图像存储在 NSMutableDictionary 的对象中

personrecord 是

```
ABRecordRef
```

假设您正在 ARC 模式下构建项目。

```
NSData *imgData = (__bridge_transfer NSData *) ABPersonCopyImageDataWithFormat(personrecord, kABPersonImageFormatThumbnail);

            如果（图像数据）
            {
                UIImage *personImage = [UIImage imageWithData:imgData];
                imgData = 无；
                [dict setValue:personImage forKey:@"UserImage"];
            }
            别的
            {
                UIImage *personImage = [UIImage imageNamed:@"defalt_contact_img.png"];
                [dict setValue:personImage forKey:@"UserImage"];
            }

```

您可以操作代码以满足您的要求，我正在使用字典，而您正在使用数组，因此您可以使用数组的 addObject 方法来存储图像，

我总是喜欢从通讯簿中获取具有多个字典的可变数组中的记录，这样对记录的操作就变得容易了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T15:30:27.140

尝试检查图像是否可用或未使用

> ```
> if( ABPersonHasImageData( person ) ) {
>        UIImage* img = [UIImage imageWithData:(NSData *)ABPersonCopyImageDataWithFormat(person, kABPersonImageFormatThumbnail)]
>     } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:44:20.360

您需要检查是否有可用图像的条件。

```
NSData *data = (NSData *)ABPersonCopyImageData(person);
UIImage *img = [UIImage imageWithData:data];

如果（img！= 无）
{
  // 在此处分配图像
}
别的
{
  img = [UIImage imageNamed:@"icon.png"];
}

```

我刚刚清除了你的代码。我认为这可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T13:33:04.507

您不能直接将图像对象添加到数组中，您需要先将图像转换为 NSData 并添加到数组中，然后在显示图像时将 NSdata 转换为图像。希望能帮助到你。

# android - android如何停止mHandler.postDelayed

> ID：10043422
> 
> 赞同：1
> 
> 时间：2012-04-06T12:22:16.040
> 
> 标签：android

我有一个应用程序，我使用 mHandler 作为计时器......它工作正常，然后 Runnable MuPdeteTimeTask 工作......这是一个代码......

```
 mHandlerTime.removeCallbacks(mUpdateTimeOutTask);
                mHandlerTime.postDelayed(mUpdateTimeOutTask, delay_timeoutzz); 
```

.....................................

```
 private Runnable mUpdateTimeOutTask = new Runnable() {
           public void run() {
               Toast.makeText(getApplicationContext(), "TimeOut of session is reached! Session will be force closed!", Toast.LENGTH_LONG).show();
               new UploadTask().onCancelled();
                       }
        }; 
```

我怎么能阻止它或想要定义“延迟”的新含义？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:31:43.713

你肯定可以做这样的事情，

取两个变量，

```
boolean delayedAgain = false;
long newDelayedTimeFromNow=5000; 
```

然后在您的可运行应用逻辑中，

```
Runnable  mUpdateTimeOutTask = new Runnable() {             
            @Override
            public void run() {
                if(delayedAgain)
                {
                    delayedAgain = false;
                    mHandlerTime.postDelayed(this, newDelayedTimeFromNow);  
                    return;
                }
                else
                {
                    // DO JOB ON TIME.
                }                   
            }
        }; 
```

现在从你的另一项任务中，

```
if(somethingIsDone)
{
  delayedAgain = true;
  newDelayedTimeFromNow = 3000;
} 
```

# xcode4 - 如何使用拖放在 Xcode 项目中添加文件夹？

> ID：10043425
> 
> 赞同：-1
> 
> 时间：2012-04-06T12:22:34.747
> 
> 标签：xcode4

需要在资源文件夹组中添加文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:46:35.797

Select files in project navigator which you want groupping, right click and choose "New group from selection", or right click in project navigator and choose "New group".

# android - expandableListView 中的 ActionListener

> ID：10043427
> 
> 赞同：0
> 
> 时间：2012-04-06T12:22:40.317
> 
> 标签：android, expandablelistview, actionlistener

我在 android 中创建了一个 expandableListView，其中子项包含两个按钮。

这些按钮的 actionlisterner 在另一个类中。单击子视图中的按钮后，如何让 actionListeners 被调用？

这是我试图做的：

```
 public View getChildView(int groupPosition, int childPosition,
    boolean isLastChild, View convertView, ViewGroup parent) {

   if (convertView == null) {
    LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = inflater.inflate(R.layout.childrow, null);
    Button b1 = (Button) convertView.findViewById(R.id.button1);
    Button b2 = (Button) convertView.findViewById(R.id.button2);

    classWithListeners p = new ClassWithListeners(b1,b2); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:38:30.757

让 ClassWithListeners 实现您想要监听的任何 actionListener（即 onClickListener）

然后做

```
ClassWithListeners p = new ClassWithListeners(b1,b2);
b1.setOnClickListener(p);
b2.setOnClickListener(p); 
```

# java - 修复混乱代码中的死锁

> ID：10043432
> 
> 赞同：3
> 
> 时间：2012-04-06T12:23:21.550
> 
> 标签：java, multithreading, synchronization, locking

我正在修改一些非常复杂的代码，我需要在此基础上添加自己的同步。

但是，现有代码有大约十几个（如果不是更多）不同的锁，我的​​代码需要调用它的一些方法。我真的不知道获取锁的顺序，也无法真正控制它。

所以，我的问题是，如果我用一个锁替换所有不同的锁会发生什么？。除了牺牲粒度之外，还有其他我应该注意的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:04:05.307

如果您更改所有`synchronized`块（和方法）*以及*所有其他阻塞结构，我认为您应该没问题 - 最坏的情况是，您的应用程序退化为具有串行执行。但是如果你只改变其中的一部分，你可能会陷入僵局。考虑两个线程各自获取多个锁的场景：

```
Thread 1:
    synchronized A
        synchronized B

Thread 2:
    synchronized B
        synchronized C 
```

这里没有死锁的风险，但是如果你用新的普通锁替换`A`and `C`（但不是`B`），那么你将拥有：

```
Thread 1:
    synchronized L
        synchronized B

Thread 2:
    synchronized B
        synchronized L 
```

...这是经典的死锁案例。

考虑另一种情况，锁本身不提供死锁，而是死锁像 CountDownLatch 这样的阻塞类：

```
Thread 1:
    synchronized A
        latch L.countDown()

Thread 2:
    synchronized B
        latch L.await() 
```

在这种情况下，将两个`synchronized`块更改为锁定一个公共锁不会导致它们之间的死锁，但如果线程 2 先获得锁，则会导致死锁：它将等待锁存器的倒计时，因为线程 1 被阻塞，所以永远不会出现在其`synchronized`入口点。这个例子也适用于其他阻塞结构：信号量、阻塞队列等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:28:43.537

我认为没有任何替代品可以正确分析代码。它可怕的原因可能是因为其他不得不修改它的人都做了和你一样的事情，并且对正确的分析犹豫不决。

编写一些应该阐明锁定的日志记录代码应该相当简单。`ReadWriteLock`一旦您可以拆开层并获得清晰的图片，用一把现代锁（例如a或类似锁）替换整个地块应该相对简单。

您可能会发现利用这个机会添加一些测试代码来以受控方式锻炼您的日志记录很有用。对任何复杂代码都非常有用的补充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:26:25.120

如果没有看到代码，很难确切地说会发生什么。如果在其中一个锁内，它试图抓住另一个锁，您可能会遇到死锁问题。此外，在等待获取单个锁与多个锁时，它可能会减慢应用程序的速度。

# java - 如何使用 AsyncTask android 进行回调

> ID：10043443
> 
> 赞同：0
> 
> 时间：2012-04-06T12:24:23.670
> 
> 标签：java, android, android-asynctask

我正在向 Web 服务发出请求，并且必须为每个方法扩展**AsyncTask**。那么我在 web 服务中有多少方法需要以这种方式创建许多类。

我发现这个主题如何进行回调： [制作回调](https://stackoverflow.com/questions/3291490/common-class-for-asynctask-in-android)

但是显示了一个类回调，但是如果我希望一个类中有很多回调怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:34:03.690

该类`AsyncTask`具有在其方法之间传递的数据的通用参数。您可以使用自定义类将数据从一种方法传递到另一种方法。

Web 服务访问通常分 3 步完成：

1.  检索内容（XML/JSON 等）
2.  解析内容
3.  阅读内容。

您可以将要获取的 URL 传递给 AsyncTask（如图所示）[在](http://developer.android.com/reference/android/os/AsyncTask.html)后台您可以检索内容并对其进行解析。内容的读取可以在不同的代码块中完成，这些代码块根据结果参数在 UI 线程上运行。

# sql - GROUP BY 子句后的 Oracle CONNECT BY 子句

> ID：10043445
> 
> 赞同：9
> 
> 时间：2012-04-06T12:24:27.790
> 
> 标签：sql, oracle, select, syntax, hierarchical-query

我刚刚在[这里看到了这篇有趣的文章](http://www.oracle-base.com/articles/misc/StringAggregationTechniques.php#row_number)，展示了如何在 Oracle 中使用分层查询和窗口函数`wm_concat()`进行模拟：[`group_concat()`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)

```
SELECT deptno,
       LTRIM(MAX(SYS_CONNECT_BY_PATH(ename,','))
       KEEP (DENSE_RANK LAST ORDER BY curr),',') AS employees
FROM   (SELECT deptno,
               ename,
               ROW_NUMBER() OVER (PARTITION BY deptno ORDER BY ename) AS curr,
               ROW_NUMBER() OVER (PARTITION BY deptno ORDER BY ename) -1 AS prev
        FROM   emp)
GROUP BY deptno
CONNECT BY prev = PRIOR curr AND deptno = PRIOR deptno
START WITH curr = 1; 
```

虽然，我发现这不是一个可读性很强的解决方案，但它非常有趣，特别是因为子句`CONNECT BY .. STARTS WITH`出现*在*`GROUP BY`子句之后。根据[规范](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10002.htm#CHDDCHGF)，这应该是不可能的。我已经使用一个简单的查询进行了尝试，但它确实有效！以下两个查询返回相同的结果：

```
-- wrong according to the specification:
select level from dual group by level connect by level <= 2;
-- correct according to the specification:
select level from dual connect by level <= 2 group by level; 
```

这是一个未记录的功能吗？或者只是为了方便起见语法冷漠？或者这两种说法是否有微妙的不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T16:05:50.110

我认为这只是一个微不足道的语法差异。

更具体地说，我认为这是一个文档错误。8i 的语法图暗示支持任一顺序。[8i 参考](http://docs.oracle.com/cd/A87860_01/doc/server.817/a85397/state21b.htm)中的任何内容都没有暗示顺序有任何区别。但是该图也暗示您可以有多个`group_by_clause`or `hierarchical_query`，这是不正确的：

```
--You can't group twice: ORA-01787: only one clause allowed per query block
select level from dual connect by level <= 2 group by level group by level; 
```

我的猜测是，当 Oracle 修复 9i 的语法图时，他们也忘记了顺序可能不同。或者他们可能故意忽略它，因为首先做分层部分似乎更合乎逻辑。

有几个像这样的小语法变化是未记录的。我不认为这意味着它们不受支持。甲骨文可能后悔允许这么多奇怪的选择，并希望事情至少看起来简单。例如，`HAVING`can come before `GROUP BY`，许多旧的并行功能仍然有效（但被忽略）等等。（这就是为什么当人们说他们要快速“解析 SQL”时我总是笑——祝你好运！）

**Oracle 8i 语法：** ![Oracle 8i SELECT 语法](../Images/5302babf0cf47273e51beb5986344556.png)

**Oracle 9i 语法：** ![Oracle 9i SELECT 语法](../Images/518a2bf079ed329603f600a7a4d572a3.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T13:12:35.520

查看执行计划。在我的环境中，它们是相同的，将 CONNECT BY 操作输入 HASH GROUP BY。因此，将 GROUP BY 放在首位似乎只是一种奇怪的语法，它产生的结果与更自然的排序相同。

从技术上讲，这可能是解析器中的一个错误，因为正如您所说，规范表明分层查询子句应该在 group-by 子句之前。但它似乎对查询的执行方式没有任何影响。

# javascript - 如何预加载谷歌地图的某些部分？

> ID：10043447
> 
> 赞同：16
> 
> 时间：2012-04-06T12:24:33.187
> 
> 标签：javascript, performance, google-maps, google-maps-api-3, preload

我正在使用 Google Maps API 构建一个网络应用程序，我需要平滑地放大一个区域，所以我使用`setTimeout`每秒增加缩放级别，但是在某些网络不好的地方，地图图像加载速度太慢以至于页面快速翻到白页......

所以我的问题是是否可以预加载谷歌地图的某些部分（从 3 点缩放到 16 点）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T17:31:54.887

您可能可以将其预加载到隐藏的 div 或 iframe 中。

但您应该确保它不违反[Google Maps/Google Earth APIs 服务条款](https://developers.google.com/maps/terms)

> 10.1.3 对数据导出或复制的限制。
> 
> (b) 不得预取、缓存或存储内容。您不得预取、缓存或存储任何内容，除非您可以存储：(i) 有限数量的内容，以提高 Maps API 实施的性能，前提是您临时、安全且在不允许在服务之外使用内容的方式；(ii) Maps API 文档明确允许您存储的任何内容标识符或密钥。例如，您不得使用内容创建独立的“地点”数据库。</p>

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-02T21:54:34.057

**做一些代码**

我刚刚根据 RASG 5 年前的想法创建了一个脚本。让我们创建一个隐藏的地图，当它完全加载时，放大它。我们一次又一次地这样做，直到它缓存所有的缩放。工作[小提琴就在这里](https://jsfiddle.net/ishukshin/ke5gmpjy/)。我`div`在右上角放置了一个信息来查看缩放进度。

```
// init the hidden map
var mapOptions = {
  center: new google.maps.LatLng(center.lat, center.lng),
  zoom: minZoom + 1
};
var preMap = new google.maps.Map(document.getElementById('map-canvas-hidden'), mapOptions);

// when the current hidden map is fully loaded, zoom it in 
preMap.addListener('tilesloaded', function() {
  $('#out').html('Zoom ' + preMap.getZoom() + ' preloaded');

  // if there is zoom to zoom-in, do it after some rest
  if(preMap.getZoom() < maxZoom) {
    setTimeout(function(){
      preMap.setZoom(preMap.getZoom() + 1);
    }, 50);
  }
}); 
```

**它真的缓存地图吗？**

好吧，清除浏览器缓存并打开小提琴。

[![在此处输入图像描述](../Images/7b0bf28e02912b6040ccae78980f845a.png)](https://i.stack.imgur.com/sHrS3.png)

在浏览器网络活动中，我们可以看到大量图片正在下载。然后放大地图并再次观看活动。看起来所有图像都是从缓存中加载的。

[![在此处输入图像描述](../Images/bf777802f683c4564c3dd6a5b3ce3411.png)](https://i.stack.imgur.com/fFfOt.png)

希望能帮助到你。

# oracle - Oracle 中的物联网与堆。帮我做选择

> ID：10043449
> 
> 赞同：2
> 
> 时间：2012-04-06T12:24:38.567
> 
> 标签：oracle, oracle10g, indexing, sql-execution-plan

我已经阅读了许多有关 IOT 的信息，现在在我的脑海中……
请帮我解决问题。

有表，有结构：

```
ID (PK); ID_DRUG_NAME (a); ID_FROM (b); ID_PROVIDER (c); DELETED; 
```

此表中的数据永远不会被删除，而只会被标记为已删除。
许多查询使用`ID`，另一个查询使用 `a,b`or`a,c`或`a,b,c`。
我想使用 operator 重新创建此表`ORGANIZATION INDEX`。

1.  它将如何盈利？
2.  如何正确创建主键和索引？
3.  我会遇到什么陷阱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T17:12:07.217

当存在单个访问路径时，最好使用索引组织表 (IOT)。您已经确定了两个不同的潜在客户列，因此 IOT 可能不是一个好的选择。

这里的问题是，如果您将其设为 IOT，则必须选择您经常过滤到索引的两列（ID 或 ID_DRUG_NAME）之一。从理论上讲，您仍然可以在 IOT 上添加第二个索引，但这几乎总是一个坏主意。具有第二个索引的 IOT 通常比不存在第二个索引时的性能更差，即使在查询第二个索引中的列时也是如此。

# ember.js - Ember.ArrayProxy 更改不会触发把手 #each 更新

> ID：10043451
> 
> 赞同：6
> 
> 时间：2012-04-06T12:25:12.037
> 
> 标签：ember.js

我怀疑有一种方法可以更新 Ember.Array 代理，它会触发 ember 的通知，但我不知道怎么做。

我正在覆盖“内容”属性以更新数组。数组会更新，但视图不会。

```
App.items = Ember.ArrayProxy.create({
    content: [
        Ember.Object.create({ name: 'Me', city: 'new york'}),
        Ember.Object.create({ name: 'You', city: 'boston'})
    ],

    sortByCity: function() { 
        this.set('content', this.get('content').sort(function(a,b) {
            return a.get('city') > b.get('city')
        }));   
    }
}); 
```

这是一个演示问题的小提琴[http://jsfiddle.net/alexrothenberg/za4Ha/1/](http://jsfiddle.net/alexrothenberg/za4Ha/1/)

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T12:51:23.440

修复它： http: [//jsfiddle.net/MikeAski/za4Ha/2/](http://jsfiddle.net/MikeAski/za4Ha/2/)`CollectionView` （我通过引入 a来呈现项目，稍微重构了您的代码）。

您应该使用`replaceContent`原语来替换`ArrayProxy`内容并保持绑定绑定......

# html - 黑莓上的Phonegap不要在html5输入类型=数字上写负数

> ID：10043455
> 
> 赞同：0
> 
> 时间：2012-04-06T12:25:23.407
> 
> 标签：html, blackberry, cordova, input, negative-number

我正在使用 BlackBerry 上的 Phonegap 进行开发，但我遇到了 html5 输入类型编号的问题。当我写一个负值时，黑莓显示这个字符串“22-”。我已经在 Blackberry os 6 和 os 7 中进行了测试。知道吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:34:24.870

我解决了这个问题。我将**type="number"**更改为**type="tel"**。它不是最优雅的，但它确实有效。

# android - 使用 Apache poi-3.8 beta hwpf 创建和格式化 .doc 文件时出现 NoSuchMethod 异常

> ID：10043458
> 
> 赞同：0
> 
> 时间：2012-04-06T12:25:36.210
> 
> 标签：android, apache-poi

尝试运行此代码时出现异常。

> java.lang.NoSuchMethodError: org.apache.poi.POIDocument.<初始化>

代码片段：

```
try {

    File file = new File(externalPath + "/abc.doc");
    POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream(file));
    HWPFDocument doc = new HWPFDocument(fs);
    Range range = doc.getRange();
    CharacterRun run = range.insertAfter("Hello World!");
    run.setFontSize(2 * 18);
    run.setBold(true);
    run.setItalic(true);
    run.setCapitalized(true);
    OutputStream out = new FileOutputStream(new File(externalPath + "/agnew.doc"));
    doc.write(out);
    out.flush();
    out.close();

} catch (Exception ex) {
    Log.e("Exception==","=="+ex.toString());
      ex.printStackTrace();
} 
```

日志猫：

```
Logcat : FATAL EXCEPTION: main : java.lang.NoSuchMethodError: org.apache.poi.POIDocument. : 
at org.apache.poi.hwpf.HWPFDocumentCore.(HWPFDocumentCore.java:145) : 
at org.apache.poi.hwpf.HWPFDocument.(HWPFDocument.java:218) : 
at org.apache.poi.hwpf.HWPFDocument.(HWPFDocument.java:186) : 
at com.vikas.prudent.CreateDocument.onCreate(CreateDocument.java:45) : 
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) : 
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) : 
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) : 
at android.app.ActivityThread.access$2300(ActivityThread.java:125) : 
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) : 
at android.os.Handler.dispatchMessage(Handler.java:99) : 
at android.os.Looper.loop(Looper.java:123) : 
at android.app.ActivityThread.main(ActivityThread.java:4627) : 
at java.lang.reflect.Method.invokeNative(Native Method) : 
at java.lang.reflect.Method.invoke(Method.java:521) : 
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) : 
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) : 
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:36:01.343

听起来您的类路径上有两个 Apache POI 副本，一个旧的，一个新的。我的直觉是你的 HWPF jar (Scratchpad) 是新的，但它正在拾取一个旧的核心 POI jar，这就是你得到异常的原因。

您需要做的是检查类路径中的所有 jar，并确定与 POI 相关的 jar，然后确保它们具有一致的集合。

[POI FAQ](http://poi.apache.org/faq.html#faq-N10006)有[关于这个问题的条目](http://poi.apache.org/faq.html#faq-N10006)，以及一些 Java 代码，您可以使用这些代码打印出 POI 类来自哪个 jar。如果您无法直接发现错误的 jar，请尝试将此处显示的代码移植到您的 android 代码中，以帮助您找到较旧的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:07:06.357

只看异常，它似乎是 lib 版本不匹配。看起来 HWPFDocumentCore.java:145 正在尝试构造一个新的 POIDocument 但找不到要调用的预期构造函数。我会看一下 HWPFDocumentCore.java 的第 145 行，看看它所期望的构造函数。然后在 POIDocument 中查找具有此类构造函数的 POI 库。

# java - 奇怪的拆分方法

> ID：10043465
> 
> 赞同：1
> 
> 时间：2012-04-06T12:26:25.513
> 
> 标签：java, split

我对拆分方法有疑问。我想编写调用 split 方法的程序

`("a?b?gf#sad", "#?")`,

它会回来

`[a,?,b,?,gf,#,sad]`.

有人能告诉我如何解决这个问题吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:45:39.993

这个有点棘手，所以我要“勺子喂”你。但我会展示我的推理。

*首先，不消耗*任何输入的事实意味着正则表达式是零宽度匹配（因此不消耗任何东西）。这意味着向前看和/或向后看。

其次，尽管您的输入样本远不是一个详尽的示例，但似乎拆分是在or*旁边* 完成的。`?``#`

将这两个事实放在一起为我们提供了这个解决方案：

```
"a?b?gf#sad".split("(?<=[?#])|(?=[?#])"); 
```

这是正则表达式的含义：

*   `(?<=[?#])`是一个后视断言前一个字符是一个`?`或`#`
*   `(?=[?#])`是一个前瞻断言下一个字符是一个`?`或`#`
*   `A|B`表示“A 或 B”，因此整个正则表达式都是环顾四周

这是一个测试：

```
System.out.println(Arrays.toString("a?b?gf#sad".split("(?<=[?#])|(?=[?#])"))); 
```

输出：

```
[a, ?, b, ?, gf, #, sad] 
```

请注意，如果您想将拆分扩展为“任何非单词字符”（而不仅仅是`?`or `#`），您可以简单地将拆分正则表达式更改为`"(?<=\\W)|(?=\\W)"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:45:46.720

使用 StringTokenizer：

```
 String s = "a?b?gf#sad";
    final StringTokenizer stringTokenizer = new StringTokenizer(s, "#?", true);
    String[] a = new String[stringTokenizer.countTokens()];
    int i = 0;
    while(stringTokenizer.hasMoreTokens())
        a[i++] = stringTokenizer.nextToken();
    System.out.println(Arrays.toString(a)); 
```

印刷：

```
 [a, ?, b, ?, gf, #, sad] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:04:24.623

**您必须在单词边界**上进行拆分，并且存在于[Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)的 javadoc 中，请参阅*“边界匹配器”。*事实上，这是家庭作业，请阅读文档；有表现力的精美珠宝。

```
"a?b?gf#sad".split("\\b"); 
```

还要考虑两个特殊标志会发生什么：`"a?#b?#gf##sad"`。

# ruby-on-rails - 在 Rails 应用程序中显示引导模式的确切步骤

> ID：10043466
> 
> 赞同：7
> 
> 时间：2012-04-06T12:26:26.180
> 
> 标签：ruby-on-rails, modal-dialog, twitter-bootstrap

我似乎找不到任何关于为什么我的模态不显示的答案，所以我认为应该检查基础知识。我已经实现了以下结构，但没有弹出模式。请帮忙

1) 索引页面有一个链接，可以调用控制器的编辑操作

```
<%= link_to 'Edit business', edit_user_business_path(@u, b), {:remote => true, 'data-controls-modal' =>  "modal-window", 'data-backdrop' => true, 'data-keyboard' => true, :class => "btn btn-primary ", :id => 'edit_biz'} %> 
```

2）控制器的编辑操作这样做（缩短）：

```
respond_to do |format|
    format.html  {render :edit}
    format.json { head :ok}
  end 
```

3) Edit.html.erb 看起来像这样：

```
<div class="modal hide fade" id="modal-window">
  <div class="modal-header">
    <a href="#" class="close">×</a>
    <h6>Loading...</h6>
  </div>

  <div class="modal-body center">

    <h2>Edit business </h2>
    <%= render 'editbusiness' %>
  </div>

  <div class="modal-footer">&nbsp;
  </div>
</div> 
```

4) _editbusiness.html.erb 有以下内容

```
<fieldset>
<br/>
<br/>
<%= form_for @businesses_to_edit, :url => { :action => "edit"}, :class => "form-horizontal" do |biz| %>
    <p>
        <%=  biz.label :name, :class => "span3"%>
        <%=  biz.text_field(:name, :placeholder => biz.object.name, :class => "span3")%>
    </p>

    <p>
        <%=  biz.label :description, :class => "span3" %>
        <%=  biz.text_field(:description, :placeholder => biz.object.description, :class => "span3")%>
    </p>

    <br/>
    <br/>
    <br/>
    <div class="form-inline pull-right">
        &nbsp;&nbsp;<%=  biz.submit "Save", :class => "btn btn-inverse span1", :id => 'edit_biz' %>
        &nbsp;&nbsp;<%=  biz.button "Close", :class => "span1", :id => 'close' %>
    </div>

    <% end %>

    </fieldset> 
```

5) 最后，application.js 有这个：

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require bootstrap

$(document).ready(function() {

$('#modal-window').modal('show')   ;
$('.modal-body').html('<%= escape_javascript(render :partial => "editbusiness", :object => @businesses_to_edit) %>');

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:57:04.713

也许你需要包含在你的`application.js`这个字符串中：

```
//= require bootstrap-modal 
```

# backup - 使用 HTTP API 和多租户的 RavenDb 备份

> ID：10043468
> 
> 赞同：2
> 
> 时间：2012-04-06T12:26:27.850
> 
> 标签：backup, ravendb

RavenDb 文档展示了如何使用备份 RavenDb 数据库

curl -X POST [http://localhost:8080/admin/backup](http://localhost:8080/admin/backup) -d "{ 'BackupLocation': 'C:\Backups\2010-05-06' }"

但是如何使用 HTTP API 备份特定的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:58:22.823

Tennants 只是成为一个子 uri，所以它将是 http://localhost:8080/[TENNANT]/admin/backup

就我个人而言，我会使用走私者或依赖影子副本。

# c# - 数据集、数据表、数据行的安全方法和约定标准

> ID：10043471
> 
> 赞同：0
> 
> 时间：2012-04-06T12:26:36.790
> 
> 标签：c#, datatable, dataset, .net-2.0, datarow

在 c# 中从数据集的表的一行中获取一条数据之前的基本控件是什么？为了在将可空数据转换为十进制时消除错误，或者获取可能不再位于数据源中的列？

我该怎么做才能验证列的存在？

在将操作转换为十进制之前，我检查数据行是否不是 DBNULL.Value。我确实检查了该列是否存在于数据行的列中。

我在寻找什么？

是否有任何实用程序类来操作数据集、数据表以获取行或属性的数据？或者请告诉我数据集、数据表、数据行的可能检查列表，以始终确保没有转换错误，没有与数据集及其子对象链接的此类错误。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:32:30.470

如果要检查数据表中是否存在列，只需执行以下操作：

```
YourDataTable.Columns.Contains("column") 
```

如果您想检查目标行的值是否为空，那么我会这样做：

```
if(!Convert.IsDBNull(YourDataTable.Rows[0]["column"]))
{
   //Something
} 
```

如果你得到一个数据集，你可能还想检查是否有一个 DataTable

```
If(YourDataSet.Tables.Count>0)
{
   //something
} 
```

取决于您期望的行数。如果您期待一排，您可以这样做：

```
if(YourDataTable.Rows.Count>0)
{
  //something
} 
```

# javascript - 列出所有实现 Node 接口的对象

> ID：10043484
> 
> 赞同：0
> 
> 时间：2012-04-06T12:27:39.143
> 
> 标签：javascript, dom

我有一些想法`HTMLElement`，`DocumentType`并且`Attr`对象实现了 Node 接口。

我可以检索实现 Node 接口的 DOM 对象的完整列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:29:46.507

是/否。

你应该只阅读规格

*   [DOM4](http://www.w3.org/TR/dom/)
*   [HTML](http://www.whatwg.org/specs/web-apps/current-work/)

# python - Python：从文件夹中导入每个模块？

> ID：10043485
> 
> 赞同：8
> 
> 时间：2012-04-06T12:27:39.877
> 
> 标签：python, import, directory

告诉 Python 从某个文件夹导入所有模块的最佳（阅读：最干净）方法是什么？

我想允许人们将他们的“mods”（模块）放在我的应用程序的一个文件夹中，我的代码应该在每次启动时检查并导入放置在那里的任何模块。

我也不希望在导入的东西中添加额外的范围（不是“myfolder.mymodule.something”，而是“something”）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:57:55.867

如果在模块中转换文件夹本身，通过使用`__init__.py`文件和使用`from <foldername> import *`适合您，您可以使用“os.listdir”或“glob.glob”迭代文件夹内容，并导入以“.py”结尾的每个文件使用`__import__`内置功能：

```
import os
for name in os.listdir("plugins"):
    if name.endswith(".py"):
          #strip the extension
         module = name[:-3]
         # set the module name in the current global name space:
         globals()[module] = __import__(os.path.join("plugins", name) 
```

这种方法的好处是：它允许您动态地将模块名称传递给`__import__`-而ìmport语句需要对模块名称进行硬编码，并且它允许您检查有关文件的其他内容-可能是大小，或者它们是否导入某些需要的模块，在导入它们之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T12:31:34.477

创建一个名为

```
 __init__.py 
```

在文件夹内并像这样导入文件夹名称：

```
>>> from <folder_name> import * #Try to avoid importing everything when you can
>>> from <folder_name> import module1,module2,module3 #And so on 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T00:01:46.193

您可能想尝试该项目：[https ://gitlab.com/aurelien-lourot/importdir](https://gitlab.com/aurelien-lourot/importdir)

使用这个模块，你只需要写两行来从你的目录中导入所有插件，你不需要额外的`__init__.py`（或任何其他额外的文件）：

```
import importdir
importdir.do("plugins/", globals()) 
```

# c# - 记录网站的加载时间

> ID：10043491
> 
> 赞同：0
> 
> 时间：2012-04-06T12:28:24.407
> 
> 标签：c#, asp.net, sql-server, visual-studio, sql-server-2008

我在 ASP.NET 中有一个使用 C# 作为编码语言的网站。

我需要记录加载特定页面并将该值插入数据库所需的确切时间。

假设我的网站托管在网络上，每当用户打开我的网站时，我都会记录用户的 IP（或任何其他标识）以及加载我的网站所需的确切时间。我将使用 SQL 2008 R2 和 Visual Studio 2010

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:39:41.210

使用 http 模块：

[http://haacked.com/archive/2008/07/02/httpmodule-for-timing-requests.aspx](http://haacked.com/archive/2008/07/02/httpmodule-for-timing-requests.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T12:43:05.347

如果你正在运行 MVC（你没有指定），你可以使用[MVC Mini Profiler](http://www.hanselman.com/blog/NuGetPackageOfTheWeek9ASPNETMiniProfilerFromStackExchangeRocksYourWorld.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T12:41:17.380

您可以创建一个记录函数，将这些数据插入表中，并在您要测量的每个事件之前和之后调用它。但这会给您的用户增加日志记录功能的开销，因此可能不是一个好主意。

您还可以运行 SQL 跟踪并将跟踪结果保存到表中，然后通过识别“开始”和“完成”事件在 SQL 端分析插入所采用的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T15:14:40.160

好吧，如果您不想使用库并保持简单，我会做的是-假设您的网站有页眉和页脚。在标题中，我将创建一个日志，并将其保存到一个表中，并使用在标题中创建并保存到会话中的 GUID。该表将具有诸如

1.  ID
2.  用户
3.  开始加载
4.  端载
5.  图形用户界面

在页脚中，由于它是加载到您网站上的最后一件事，我将从会话中获取 GUID，并更新记录以存储您的当前时间。这样，每条记录都会显示页面加载的初始开始时间和结束时间。

然后您可以添加一个计算列来显示所用的秒数。

# jquery - jquery ajax ie8

> ID：10043493
> 
> 赞同：0
> 
> 时间：2012-04-06T12:28:39.753
> 
> 标签：jquery, ajax, internet-explorer-8, browser-cache

我对 ajax 和 ie8 有疑问。我的脚本：

```
$('#buton').click(function () {
        $('#reader-cont #imgw, #reader-cont #txtw, #reader-cont #datew, #reader-cont #sharemew').html('<div id="ajload"></div>');
        $('#reader').stop().fadeTo(1000, 1).css('z-index', 100);
        var link = $(this).attr('href');
        $.ajax({
            url: link,
            cache:false,
            success: function(data) {
                var imgW = $(data).find("#content #img");
                var txtW = $(data).find(".cont-cont").text();
                var  dateW =   $(data).find("#content #date");
                var  shareW =   $(data).find('#content #shareme')
                $("#reader-cont #imgw").html(imgW);
                $("#reader-cont #txtw").html(txtW);
                $("#reader-cont #datew").html(dateW);
                $("#reader-cont #sharemew").html(shareW);
                alert(txtW);
        }
        });
    }); 
```

ff 和 chrome 加载内容没有问题，但 ie8 什么都不加载... 为什么？？？我知道 ie8 的 cahe 有问题，为此我写了它`cache:false,`，但没有加载......

更多信息：`alert(txtW);`返回空字符串...如果我`.text()`从`var txtW = $(data).find(".cont-cont").text();`警报窗口“对象，对象”中的返回中删除...

更新：我用这个切换脚本：

```
loadXMLDoc();
    function loadXMLDoc()
            {
            var xmlhttp;
            if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
              }
            else
              {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    var data= xmlhttp.responseText;
                    alert(data);
                var imgW = $(data).find("#content #img");
                var txtW = $(data).find(".cont-cont");
                var  dateW =   $(data).find("#content #date");
                var  shareW =   $(data).find('#content #shareme')
                $("#reader-cont #imgw").html(imgW);
                $("#reader-cont #txtw").html(txtW);
                $("#reader-cont #datew").html(dateW);
                $("#reader-cont #sharemew").html(shareW);
                }
              }
            xmlhttp.open("GET",link,true);
            xmlhttp.send();
            } 
```

ie8 中的警报运行完美，但在 div 中我什么都看不到....缓存现在不是问题...问题是在加载的内容中找到选择器...

我在 ie9 ff chrome safari 中对其进行了测试...完美运行...但在 ie8 中没有

更新 2：我知道问题是 .find，因为警报返回数据页面。我尝试使用这种方法，但 ie8 不运行:(

我切换这一行：

```
var imgW = $(data).find("#content #img");
                var txtW = $(data).find(".cont-cont");
                var  dateW =   $(data).find("#content #date");
                var  shareW =   $(data).find('#content #shareme') 
```

用这条线：

```
var data= xmlhttp.responseText;
                    var imgW = $(data).children('#wrapper').children('#content').children(' .region').children('#block-system-main').children('.content').children('#img');
                    var txtW = $(data).children('#wrapper').children('#content').children(' .region').children('#block-system-main').children('.content').children(".cont-cont");
                    var  dateW =   $(data).children('#wrapper').children('#content').children(' .region').children('#block-system-main').children('.content').children("#content #date");
                    var  shareW =   $(data).children('#wrapper').children('#content').children(' .region').children('#block-system-main').children('.content').children('#content #shareme'); 
```

ff chrome no prob ie8 don't run -.-@!#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:07:59.220

如果你的服务器`IIS`为了处理缓存问题`IE8`，
你应该对你的服务器代码做一些工作：

从[这个链接](http://bytes.com/topic/asp-net/answers/297122-response-expires-response-cache)

将以下代码放入您的`Global.asax`

```
Response.Expires = 0
Response.Cache.SetNoStore()
Response.AppendHeader("Pragma", "no-cache") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T17:58:45.607

请注意，jQuery 正在切换到`.done()`，如图所示。做一个独立的函数，然后从你的`$.ajax(...)`

```
var arrayData=[];
$.ajax({
    ...  
}).done(function(data){
    arrayData[0]=$(data).find("#content #img");
    //add other elements
    updCont(arrayData);
});
function updCont(htmArray){
    $("#reader-cont #imgw").html(htmArray[0];
} 
```

另外，请注意 jQuery 正在切换到 .done()，顺便说一句，它仍然存在相同的 IE8 无法正常工作的问题。我因这种糟糕的行为而失去了**DAYS 天。**

# c# - 值没有从 ascx 代码隐藏传递到 javascript？

> ID：10043494
> 
> 赞同：-1
> 
> 时间：2012-04-06T12:28:41.140
> 
> 标签：c#, asp.net, user-controls, smtp, ascx

我正在使用它将值从 ascx 代码隐藏传输到具有 3 个标签的 ascx 用户控件

```
 string text1 = fr.data[0].name;
        string text2 = m.data[0].name;
        string text3 = m.data[0].name;
        Page.ClientScript.RegisterClientScriptBlock(this.GetType(), " ", "document.getElementById('lblfriend').innerHTML ='" + text1 + "'; return true;", true);
        Page.ClientScript.RegisterClientScriptBlock(this.GetType(), " ", "document.getElementById('lblmyname').innerHTML ='" + text2 + "'; return true;", true);
        Page.ClientScript.RegisterClientScriptBlock(this.GetType(), " ", "document.getElementById('lblmyname1').innerHTML ='" + text3 + "'; return true;", true); 
```

**但是值没有被传递，我想将这些标签呈现为 Html，以便它们可以嵌入到电子邮件中**

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T12:35:25.503

看看渲染的页面，你确定你的控件被命名`lblFriend`了等等，我假设他们有更多的东西。

您可能需要使用

```
"document.getElementById('" + lblfriend.ClientID + "').innerHTML =' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:50:43.490

您可以在 UserControl 的代码隐藏中将标签文本公开为字符串属性。然后，当您呈现用户控件时，将值传递给它，它将呈现标签的文本。

UserControl 的代码隐藏：

```
public partial class WebUserControl1 : System.Web.UI.UserControl
{
    private string _Friend;

    public string Friend
    {
        get
        {
            return _Friend;
        }
        set
        {
            _Friend = value;
            lblfriend.Text = value;
        }
    }

    private string _MyName;

    public string MyName
    {
        get
        {
            return _MyName;
        }
        set
        {
            _MyName = value;
            lblmyname.Text = value;
            lblmyname1.Text = value;
        }
    }

} 
```

然后你可以在你的父控件/页面中加载你的值：

```
 string text1 = fr.data[0].name;
        string text2 = m.data[0].name;                    
        MyUserControl.Friend = text1;
        MyUserControl.MyName = text2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:39:27.247

仅使用控件的 ClientID 编写一个 RegisterClientScript，例如

```
String.Format(Page.ClientScript.RegisterClientScriptBlock(this.GetType(), " ", "document.getElementById('{0}').innerHTML ='" + text1 + "'; document.getElementById('{1}').innerHTML ='" + text2 + "';document.getElementById('{2}').innerHTML ='" + text3 + "'; return true;", true),lblfriend.ClientID,lblmyname.ClientID,lblmyname1.ClientID); 
```

或者

```
String.Format(Page.ClientScript.RegisterClientScriptBlock(this.GetType(), " ", "{3}('{0}').{4} ='{5}'; {3}('{1}').{4}='{6}';{3}('{2}').{4}='{7}'; return true;", true),lblfriend.ClientID,lblmyname.ClientID,lblmyname1.ClientID,"document.getElementById","innerHTML",text1,text2,text3); 
```

# android - 使用 SQLiteHelper 和 Google 地图时应用程序崩溃

> ID：10043495
> 
> 赞同：0
> 
> 时间：2012-04-06T12:28:42.887
> 
> 标签：android, google-maps

应用程序使用存储在资产中的数据库。在 android 2.2 上完美运行我添加了一些 Google 地图代码，所以我通过 project->properties->android->Project Build Target 从 android 2.2 更改为 GoogleAPIs 2.2

现在应用程序在启动包含 MySQLiteHelper 指针的活动后崩溃

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.etf.db/com.etf.db.TabContainer}: 
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.etf.db/com.etf.db.QueryTab}: 
android.database.sqlite.SQLiteException: no such table: stations: , while compiling: (some query) 
```

当删除所有 MySQLiteHelper 指针时，没有 RuntimeExceptions。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:31:58.733

异常输出中的以下行表明实际上**没有`stations`表存在。**

```
android.database.sqlite.SQLiteException: no such table: stations: , while compiling: (some query) 
```

# memory-management - 内核虚拟地址空间中分配给用户进程的页面的映射

> ID：10043498
> 
> 赞同：2
> 
> 时间：2012-04-06T12:29:12.687
> 
> 标签：memory-management, kernel, virtual-address-space

当为进程创建页面（将映射到进程地址空间）时，该页面是否会映射到内核地址空间？

如果没有，那么它将没有内核虚拟地址。那么如果需要，交换器将如何找到页面并将其交换出去？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:30:47.540

如果我们谈论的是 x86 或类似（就页面转换而言）架构，那么在任何给定时间都有一个虚拟地址空间，通常其中一部分保留给内核，另一部分保留给用户模式进程。

在两个进程之间的上下文切换中，只有虚拟地址空间的用户模式部分会发生变化。

有了这样的组织，内核总是可以完全访问当前的用户模式进程，因为在任何时候内核和用户模式进程都只有一个当前虚拟地址空间，不是两个，而是一个. 因此，内核实际上不必为用户模式页面提供另一个额外的映射。但这不是重点。

要点是内核为每个页面保留某种统计信息，如果需要，可以将其保存到磁盘并在其他地方重复使用。CPU 将每个页面标记`page table entry (PTE)`为`accessed`第一次读取或写入页面的时间以及`dirty`首次写入的时间。

内核定期扫描 PTE，读取`accessed`和`dirty`标记以更新所述统计信息并清除`accessed`，`dirty`因此它可以稍后检测它们的变化（当然，如果有的话）。基于此统计信息，它确定哪些页面很少使用或长期未使用并且可以重新利用。

如果“交换器”在当前进程的上下文中运行并且如果它在内核中运行，那么理论上它有足够的来自内核的信息（很少使用或长时间未使用的页面列表来保存和取消映射 if`dirty`或只是 unmap if不是`dirty`）和足够的访问感兴趣的页面。

如果“交换器”本身作为用户模式进程运行，事情会变得更加复杂，因为默认情况下它无法访问另一个进程的页面，并且必须创建映射或要求内核为它做一些额外的工作感兴趣的过程的上下文。

因此，在内核中查找很少使用和长期未使用的页面及其地址。CPU 通过自动将 PTE 标记为`accessed`和来提供帮助`dirty`。`dirty`如果将它们保存到磁盘而不是拥有它们的进程的上下文中，则可能需要对页面进行额外的映射。

# iphone - 核心图形，如何在运行时画线？

> ID：10043499
> 
> 赞同：0
> 
> 时间：2012-04-06T12:29:12.860
> 
> 标签：iphone, ios, ios4, xcode4.2

任务是，在运行时在我在 Scrollview 中使用的自定义地图上绘制路径，然后每当位置坐标（纬度、经度）更新时，我必须在运行时绘制路径。我在这里试图解决的问题是我创建了一个“图形”类，它是 UIView 的子类，我在“drawrect：”方法中对绘图进行了编码。因此，当我将图形添加为图像上滚动视图的子视图时，线条会绘制，但我需要继续绘制线条，就好像它是路径一样。我需要在运行时画线，需要不断更新'CGContextStrokeLineSegments'方法的点（x，y）。编码：

视图控制器：

```
- (void)loadView {
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];
CGRect fullScreenRect=[[UIScreen mainScreen] applicationFrame];
scrollView=[[UIScrollView alloc] initWithFrame:fullScreenRect];
graph = [[graphics alloc] initWithFrame:fullScreenRect];
scrollView.contentSize=CGSizeMake(320,480);

UIImageView *tempImageView2 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"fortuneCenter.png"]];

self.view=scrollView;
[scrollView addSubview:tempImageView2];
scrollView.userInteractionEnabled = YES;
scrollView.bounces = NO;
[scrollView addSubview:graph];
} 
```

图形.m：

```
- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    self.backgroundColor = [UIColor clearColor];
}
return self;
}

- (void)drawRect:(CGRect)rect
{
CGContextRef context = UIGraphicsGetCurrentContext();
CGPoint point [2] = { CGPointMake(160, 100), CGPointMake(160,300)};
CGContextSetRGBStrokeColor(context, 255, 0, 255, 1);
CGContextStrokeLineSegments(context, point, 2);
} 
```

那么我如何在运行时绘制线条。我现在只是在模拟，所以我没有使用实时数据（坐标）。只想使用虚拟数据（x，y 的坐标）进行模拟。假设有一个按钮，每当我按下它时，它都会更新坐标以便路径扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:41:27.673

最简单的方法是将表示点的实例变量添加到`UIView`子类。然后，每次路径更改时，适当地更新 ivar 并在自定义（甚至在其超级视图）上调用`-setNeedsDisplay`或。然后运行时将重绘新路径。`setNeedsDisplayInRect``UIView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:25:39.983

从外观上看，您只需要`CGPoint point[]`动态调整大小即可。

您可以使用`malloc`、 a`std::vector`或什`NSMutableData`至存储您添加的点。然后你将该数组传递给`CGContextStrokeLineSegments`.

如果您只需要 2 点，请移至`CGPoint point[2]`ivar，以便您可以存储位置，然后（如 Rich 所述）在更改这些值（或数组）时适当地使 rects 无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:22:23.490

这个主题时不时出现，所以我创建了一篇较长的博客文章，介绍与一种潜在解决方案有关的一般概念，创建和使用您自己的图形上下文，这里： http: [//www.musingpaw.com/2012/04/绘图在 ios-apps.html](http://www.musingpaw.com/2012/04/drawing-in-ios-apps.html)

# channel - openX 定位通道设置（“OR”-功能）

> ID：10043500
> 
> 赞同：0
> 
> 时间：2012-04-06T12:29:21.827
> 
> 标签：channel, openx, targeting

我有一个使用 OpenX 进行横幅投放的网站。我想要一个横幅，当人们在我网站的体育部分时显示，所以只有当人们在

```
site.com/football
site.com/baseball 
```

我为仅当站点页面 URL 包含“足球棒球”时才显示横幅的目标通道。我使用调用代码的 iframe 版本。我的区域有足球或棒球，这很有效。但是当我输入“足球棒球”或“足球，棒球”时，它不起作用。

一种解决方法可能是为每个关键字设置一个新的限制规则，但不知何故，其中必须有一个“或”功能，还是我弄错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:53:02.717

我认为有几种方法你应该能够处理这个问题。

1.  创建多个交付限制（如您所述）。在目标渠道或直接在横幅的交付选项卡中，当您“添加”多个限制时，每个限制之间应该有一个下拉菜单，允许您指定运算符`AND`或`OR`. 将其设置为目标渠道的好处是，您可以创建复杂的限制分组，这些限制仅在横幅级别是不可能的。

2.  您可以尝试的另一个选项是使用“正则表达式匹配”。当您选择“站点 - 页面 URL”的传递限制时，您可以选择“正则表达式匹配”，而不是选择包含。这应该允许您指定一个类似于`football|baseball`或更复杂的值。

# .net - InfoPath 通过浏览器处理，但没有 Sharepoint 或 Office Forms Sever

> ID：10043503
> 
> 赞同：0
> 
> 时间：2012-04-06T12:29:26.493
> 
> 标签：.net, sharepoint, infopath

我已经搜索了一半的互联网，以找到通过 Web 浏览器呈现、填写和保存 InfoPath 表单的解决方案（在我的情况下，仅限 IE 的方案也很好）。但我什么也没找到。

我已经尝试将 InfoPath 表单从 InfoPath 本身导出到网页 - 但当然这种表单只是静态的并且是只读的 html 。

1.  您是否知道任何 InfoPath 呈现引擎或框架（最好是 .NET），它允许我让客户填写 InfoPath 表单，但我没有 SharePoint 或 Office Forms 服务器？

2.  您是否知道 InfoPath 的任何替代方案，它允许定义表单模板（通过浏览器或桌面应用程序），然后通过 Web 浏览器填写这些表单（最好是 .NET）？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:48:19.120

对于您的第一个问题，SharePoint Foundation 是 SharePoint 企业版的免费替代品。

对于第二个问题，您可以在 SharePoint 中使用 .aspx 页面而不是 InfoPath 表单。这些与工作流兼容并使用模板和母版页。

# ruby-on-rails - 在 environment.rb 中定义记录器不起作用

> ID：10043507
> 
> 赞同：0
> 
> 时间：2012-04-06T12:30:06.193
> 
> 标签：ruby-on-rails, logging, undefined

我正在尝试制作自定义记录器。我在其他地方读到我可以在 environment.rb 中定义我的记录器并在其他文件中使用它。

我在 environment.rb 中有：

```
# Load the rails application
require File.expand_path('../application', __FILE__)

my_logger = Logger.new("#{Rails.root}/log/my.log")
my_logger.formatter = Logger::Formatter.new

# Initialize the rails application
MyApp::Application.initialize! 
```

例如，我从控制器调用记录器：

```
 my_logger.info "got here" 
```

但是，我收到错误：

> 未定义的局部变量或方法“my_logger”

关于为什么会发生这种情况的任何线索？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:37:18.890

打开文件进入写入/附加模式：

尝试 ：

```
logfile = File.open('#{Rails.root}/log/my.log', 'a')  
my_logger = Logger.new(logfile)
my_logger.info 'Hello World!' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T12:44:33.843

您可以维护自己的日志：

```
my_logger = ActiveSupport::BufferedLogger.new("#{Rails.root}/log/my.log") 
```

# node.js - 单独运行 mocha 测试

> ID：10043510
> 
> 赞同：2
> 
> 时间：2012-04-06T12:30:18.943
> 
> 标签：node.js, mocha.js

我`test/`的项目充满了[摩卡](http://visionmedia.github.com/mocha/)测试：

```
test/
├── a.coffee
└── b.coffee 
```

说`a.coffee`是

```
console.log 'Executing A test!'
global.foo = 'FOO' 
```

并且`b.coffee`是

```
console.log 'Executing B test!'
console.log 'Expecting foo not defined:', assert.equal(foo, undefined) 
```

* * *

执行 mocha 时：

```
$ mocha --compilers coffee:coffee-script test/*
Executing A test!
Executing B test!
Expecting foo not defined: false 
```

看起来测试共享相同的全局对象（我想避免）......

* * *

有没有办法单独执行每个测试？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:24:57.730

Mocha 的作者在这里回答了这个问题：[https ://github.com/visionmedia/mocha/issues/365#issuecomment-4997480](https://github.com/visionmedia/mocha/issues/365#issuecomment-4997480)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:54:21.347

如果您正在测试的代码的行为取决于某些全局状态，那么您必须在测试中对其进行控制。您可以编写一些“beforeEach”函数来设置您需要的任何全局状态。

您可能还想考虑重构代码，使其不依赖于全局状态。如果您可以传递参数或其他东西（显式与隐式），那么您可以更有信心地进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:22:58.313

全局状态通常使测试变得困难。googletechtalks 的 Clean Code Talks 值得任何有兴趣编写可测试软件的人观看

1.  [单元测试](http://youtu.be/wEhu57pih5w)
2.  [全局状态和单例](http://youtu.be/-FRm3VPhseI)
3.  [不要寻找东西](http://youtu.be/RlfLCWKxHJ0)

# java - 如何为多个异常维护单个日志文件

> ID：10043513
> 
> 赞同：0
> 
> 时间：2012-04-06T12:30:30.890
> 
> 标签：java, exception

我用java编写了一个程序来实现一些任务。我已经在程序的许多地方处理了异常。

我的程序将每天执行一次。我想维护一个日志文件，如果有日期和时间，我想在其中写入异常。（如果程序在一天中运行多次，它会在什么日期和时间出现在程序中。）

我应该如何维护单个日志文件？我还想用如下名称保存我的文件：Log_2012-04-06_0600PM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:38:20.210

[log4j](http://logging.apache.org/log4j/1.2/)是你的答案。

log4j 什么都做，每个人都在使用。除其他外，它还支持使用自定义文件名格式在自定义计划上 轮换[日志](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html#setDatePattern%28java.lang.String%29)[文件](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html)。它可以从应用程序内部或通过外部属性文件进行配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:38:13.320

用 ERROR 或更高的日志级别记录所有捕获的异常，然后创建一个单独的 ERROR 级别的附加程序，并将其附加到根类别，以便它接收所有日志消息。

要获得所需的文件名，请使用滚动文件附加程序。这可以配置为每天滚动，并将日期附加到 og 文件名。它的配置取决于框架。如果你还没有选择日志框架，我推荐 Log4J 或 LogBack。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T12:38:20.600

您是否使用任何日志框架，例如[logback](/questions/tagged/logback "显示标记为“logback”的问题")或[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题")？他们提供你需要的一切。记录异常很简单：

```
catch(Exception e) {
  log.error("Opps!", e)
  //...
} 
```

该框架将添加您想要的任何[诊断信息](http://logback.qos.ch/manual/layouts.html#ClassicPatternLayout)，包括时间戳、当前线程名称、类名称等。

为文件名添加时间戳的要求也很容易实现，请查看[`RollingFileAppender`](http://logback.qos.ch/manual/appenders.html#RollingFileAppender). 它将根据选择的策略创建新的日志文件，通常是每天/每小时或当文件变得太大时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:02:22.450

我同意上面的帖子。使用 Log4J。您可以使用单个或多个日志文件、滚动文件，并以您想要的任何格式保存文件。

# objective-c - 将未知数量的行添加到“静态单元”UITableView

> ID：10043521
> 
> 赞同：40
> 
> 时间：2012-04-06T12:31:06.677
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview

我在 Interface Builder 中创建了一个静态表，其中包含 6 个部分，所有部分的行数都不同。我现在想添加具有不同行数的第 7 部分。

首先，一旦我取消注释 Xcode 插入的标准表委托方法，我就会在 self.tableView.tableHeaderView = containerView; 我在表格中添加了一个标题。

更重要的是，我使用以下代码崩溃了

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 7;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (section==6) {
        return 4;
    } else {
        return [super tableView:tableView numberOfRowsInSection:section];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{/*
    if (indexPath.section == 6) {
        static NSString *CellIdentifier = @"cellWireless";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        // Configure the cell...

        return cell;
    }*/
    return [super tableView:tableView cellForRowAtIndexPath:indexPath];
} 
```

如何正确保留现有部分，但添加一个带有几个单元格的额外部分？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-08T07:00:14.280

要将动态单元格添加到静态单元格表​​中，您必须覆盖每个具有 indexPath 的 UITableView 委托方法。

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
-(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath

-(BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath

-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
-(NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

.

```
-(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
     return NO;
}

-(BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{     
     return NO;
}

-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{     
     return UITableViewCellEditingStyleNone;     
}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
     int section = indexPath.section;

     // if dynamic section make all rows the same height as row 0
     if (section == self.dynamicSection) {
          return [super tableView:tableView heightForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:section]];
     } else {
          return [super tableView:tableView heightForRowAtIndexPath:indexPath];
     }
}

- (NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath
{
     int section = indexPath.section;

     // if dynamic section make all rows the same indentation level as row 0
     if (section == self.dynamicSection) {
          return [super tableView:tableView indentationLevelForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:section]];
     } else {
          return [super tableView:tableView indentationLevelForRowAtIndexPath:indexPath];
     }
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
     if (section == self.dynamicSection ) {
          return [self.dataListArray count];
     } else {
          return [super tableView:tableView numberOfRowsInSection:section];
     }
}

-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
     int section = indexPath.section;
     int row = indexPath.row;

     if (section == self.dynamicSection) {
          // make dynamic row's cell
          static NSString *CellIdentifier = @"Dynamic Cell";
          UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

          if (!cell) {
               cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
          }

          cell.textLabel.text = [self.dataListArray objectAtIndex:row];
          return cell;
    } else {
          return [super tableView:tableView cellForRowAtIndexPath:indexPath];
    }
} 
```

只有在您覆盖所有方法后，您的表才会开始工作。对于任何引用静态部分的内容，只需参考 [super]。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T02:18:11.550

Darren 的回答让我知道什么对我有用，但是我不必去实现每一个 tableView 委托方法。您实际上只需要覆盖 numberOfRowsInSection 和 cellForRowAtIndexPath。

首先，我在 Interface Builder 中定义了一个包含 4 个部分的静态表，每个部分包含 2 到 4 个单元格。我希望第 0、2 和 3 部分是静态的，并且看起来与它们在 IB 中所做的完全一样，但我希望第 1 部分具有自定义行数，并根据我拥有的值数组在每个单元格中自定义显示。

在静态表的视图控制器中，覆盖为您的动态部分返回的单元格数，但接受所有其他部分的默认值（它们将回退到 IB 值）。对 cellForRowAtIndexPath 执行相同的操作，并为除第 1 节之外的所有节返回 [super] 实现。

```
@implementation myMostlyStaticTableViewController
@synthesize myFancyArray;

- (NSInteger) tableView:(UITableView *) tableView numberOfRowsInSection:(NSInteger) section
{
    if (section == 1)
        return [myFancyArray count]; // the number of rows in section 1
    else
        return [super tableView:tableView numberOfRowsInSection:section];
}

- (UITableViewCell *) tableView:(UITableView *) tableView cellForRowAtIndexPath:(NSIndexPath *) indexPath
{
    // for cells not in section 1, rely on the IB definition of the cell
    if (indexPath.section != 1)
        return [super tableView:tableView cellForRowAtIndexPath:indexPath];

    // configure a task status cell for section 1
    MyCustomTableViewCell *cell;
    cell = [tableView dequeueReusableCellWithIdentifier:@"myCustomCell"];
    if (!cell)
    {
        // create a cell
        cell = [[MyCustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"myCustomCell"];
    }
    cell.myCustomLabel.text = [myFancyArray objectAtIndex:indexPath.row];
    return cell;
}
@end 
```

当然，您需要一个自定义单元格：

```
@implementation MyCustomTableViewCell

- (UITableViewCell *) initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    // initialize cell and add observers
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (!self)
        return self;
    self.clipsToBounds = YES;
    self.selectionStyle = UITableViewCellSelectionStyleNone;

    // configure up some interesting display properties inside the cell
    _label = [[UILabel alloc] initWithFrame:CGRectMake(20, 9, 147, 26)];
    _label.font = [UIFont fontWithName:@"HelveticaNeue-Medium" size:17];
    _label.textColor = [UIColor colorWithWhite:0.2 alpha:1];
    [self.contentView addSubview:_label];

    return self;
}

@end 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-01T12:01:47.863

我将在 Swift 中发布答案，但它也应该在 Objective-C 中工作。

以我的经验，覆盖这些方法就足够了`UITableViewController`：

```
tableView(tableView: UITableView, numberOfRowsInSection section: Int) -> Int
tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell
tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat
tableView(tableView: UITableView, indentationLevelForRowAtIndexPath indexPath: NSIndexPath) -> Int 
```

如果你想在你的表视图中有自定义的表视图单元格，你需要`UITableViewCell`用 nib 创建子类，并将它注册到你的表视图中。

我的整个控制器看起来像这样：

```
var data = ["Ahoj", "Hola", "Hello"]

override func viewDidLoad() {
    super.viewDidLoad()

    tableView.registerNib(UINib(nibName: "CustomCell", bundle: nil), forCellReuseIdentifier: "reuseIdentifier")
}

// MARK: - Table view data source

override func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    if section == 1 {
        return data.count
    }
    return super.tableView(tableView, numberOfRowsInSection: section)
}

override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {
    if indexPath.section == 1 {
        let cell = tableView.dequeueReusableCellWithIdentifier("reuseIdentifier", forIndexPath: indexPath) as! CustomCell
        cell.titleLabel.text = data[indexPath.row]
        return cell
    }
    return super.tableView(tableView, cellForRowAtIndexPath: indexPath)
}

override func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat {
    return 44
}

override func tableView(tableView: UITableView, indentationLevelForRowAtIndexPath indexPath: NSIndexPath) -> Int {
    return 0
}

override func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {
    tableView.deselectRowAtIndexPath(indexPath, animated: true)
    if indexPath.section == 1 {
        print(data[indexPath.row])
    }
}

@IBAction func addItem() {
    data.append("Item \(data.count)")
    tableView.beginUpdates()
    tableView.insertRowsAtIndexPaths([NSIndexPath(forRow: data.count - 1, inSection: 1)], withRowAnimation: .Left)
    tableView.endUpdates()
}

@IBAction func removeItem() {
    if data.count > 0 {
        data.removeLast()
        tableView.beginUpdates()
        tableView.deleteRowsAtIndexPaths([NSIndexPath(forRow: data.count, inSection: 1)], withRowAnimation: .Left)
        tableView.endUpdates()
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-16T20:25:38.647

我想我会根据@Darren 的优秀答案添加一个更新的答案。大多数委托方法不是必需的。所以，我只是添加了所需的。如果您愿意，您可以轻松添加自定义单元格，甚至使用 nib 文件。该图显示了一个包含 3 个部分的静态表。最后一部分是运行时动态的。这非常方便。这是在 ios7 BTW 中工作的。

![在此处输入图像描述](../Images/b95764c4f1c7b97672f004e6cac867aa.png)

```
#define DYNAMIC_SECTION 2

#import "MyTableViewController.h"

@interface MyTableViewController ()
@property (strong, nonatomic)NSArray *myArray;
@end

@implementation MyTableViewController

- (id)initWithCoder:(NSCoder *)aDecoder
    {
        if (self = [super initWithCoder:aDecoder]) {
            _myArray = @[@"ONE", @"TWO", @"THREE", @"FOUR"];
        }
        return self;
    }

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return [super numberOfSectionsInTableView:tableView];
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        if (section != DYNAMIC_SECTION) {
            return [super tableView:tableView numberOfRowsInSection:section];
        }
        return [self.myArray count];
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        if (indexPath.section != DYNAMIC_SECTION) {
            return [super tableView:tableView cellForRowAtIndexPath:indexPath];
        }
        static NSString *id = @"MyCell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:id];
        if (!cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:id];
        }
        cell.textLabel.text = self.myArray[indexPath.row];
        return cell;
    }

        // required
    -(NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        int section = indexPath.section;
        if (section == DYNAMIC_SECTION) {
            return [super tableView:tableView indentationLevelForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:section]];
        } else {
            return [super tableView:tableView indentationLevelForRowAtIndexPath:indexPath];
        }
    }

            // Not required
    - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
    {
        if (section != DYNAMIC_SECTION) {
            return [super tableView:tableView titleForHeaderInSection:section];
        }
        return @"some title";
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T11:06:45.223

I think I found a better and easier solution, with "fantom" sections or rows in IB.

In case you know the maximum number of cells you would use in section 7(lets say 10), you should set the number of rows to 10, when you configure section 7 in IB.

You aren't forced to use all 10 rows in section, this can be set by

```
 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section. 
```

For example if you return 5 when section == 6(actually the 7th section), then only 5 rows will be displayed.

I admit that's not dynamic in the absolute sense of the word, but perhaps resolves most of the cases.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T20:01:16.287

我认为您将不得不使您的 UITableView 动态化。由于您有“未知”的行数，您很可能会将委托方法设置为如下所示：

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [someArray count];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-17T22:47:12.657

我发现了一些我认为非常有趣的东西，它比“评论”更值得回答。我有这个动态行工作的静态 tableView，然后它停止工作。原因很简单。我以前有

`[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]`

后来决定我想要/需要一个我在我的 StoryBoard 中设计的自定义单元格，并且只为我的 UITableView 子类设置插座。所以我使用了另一种技术

`[super tableView:tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:indexPath.section]];`

这里的问题似乎是这个单元格被重复使用，因此您一次只能看到一个单元格。有时你甚至什么都看不到，它们都是空的！如果滚动，您会看到其他单元格很快出现然后消失（更像是闪烁！）。

这让我非常抓狂，直到我意识到什么是（不可能）。此外，不要试图做

`[super.tableView dequeueReusableCellWithIdentifier:CellIdentifier]`

因为正如其他人所提到的，这总是`nil`在静态 tableView 中返回。

———</p>

所以我不确定该怎么做。我想我会使用“静态原型”路线，其中包括

*   对第 3 行第 1 行使用带有单元格标识符（如“31”）的原型表视图。然后我可以执行类似的操作

```
NSString *identifier = [NSString stringWithFormat:@"%d%d", indexPath.section, indexPath.row];
单元格 = [tableView dequeueReusableCellWithIdentifier:identifier];
```

*   对标题也使用原型单元。我`"Cell1-Header"`用于第 1 节标题的单元标识符，然后有类似的东西

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    NSString *identifier = [NSString stringWithFormat:@"Cell%d-Header", section];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
    返回单元格内容视图；
}
```

这里的基本内容是你总是可以从一个静态的 tableView 开始，但是当你意识到你需要一些动态的东西时，将它交换到 Prototype （它会保留你的行，虽然我不记得它做了什么与部分！）并使用此 KISS 技术。

# android - 按home，然后返回应用程序并按返回按钮，它会退出应用程序

> ID：10043524
> 
> 赞同：0
> 
> 时间：2012-04-06T12:31:26.853
> 
> 标签：android, google-maps

我`android:launchMode="singleInstance"`在清单文件中有。

我正在使用谷歌地图并按下覆盖 - 它会打开一个新的意图。如果我按下它会回到上一个`activity`。

但是，如果我*按下主页按钮并按住主页按钮几秒钟，然后返回我的应用程序并按下返回按钮*，它将退出应用程序。

> 总结 -> GoogleMapsActivity -> DisplayActivity

这里`GoogleMapsActivity`有`android:launchMode="singleInstance"`清单文件。因此我无法回到它。

是否有可能将其发送到*按下主页按钮*`GoogleMapsActivity`时 ，因此活动仍然存在。或任何其他解决问题的方法。

 ** * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-06T13:02:36.947

查看官方文档： [Manifest element](http://developer.android.com/guide/topics/manifest/activity-element.html)并查看 `android:allowTaskReparenting`和`android:launchMode` 部分。*

# objective-c - 如何解决 NSKeyedArchiver 警告：替换现有值

> ID：10043530
> 
> 赞同：7
> 
> 时间：2012-04-06T12:31:48.113
> 
> 标签：objective-c

我有一个实现可序列化的对象，并且我有一个包含一些对象的字典。当我编译和运行时，我收到很多警告说我正在替换键的值。发生这种情况是因为在序列化字典中的下一个对象时，它使用与前一个对象相同的键存储它的变量，对吧？我该如何解决这个问题？有没有办法在 encodeWithCoder 方法中知道是否使用该名称存储了任何变量？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-06T12:58:37.870

`encodeWithCoder:`对于具有相同键或相同键出现在多个对象中的多个字典没有问题。您的问题更有可能是您在同一个对象中使用相同的键对多个事物进行编码（即在您对 的调用中`encodeObject:forKey:`）。

# image - 在浏览器中本地加载动作脚本中的图像在 Flash 播放器中失败

> ID：10043534
> 
> 赞同：0
> 
> 时间：2012-04-06T12:32:15.023
> 
> 标签：image, flash, actionscript, loading, local

这个很奇怪

当我运行 flash 播放器（来自 flashdevelop）时，图像被加载并且一切都很好。但是当我从浏览器运行 swf 时，请求被发送（使用 chrome 的程序员工具 - 网络选项卡），但没有加载任何内容。大小/内容列显示 0/文件的实际大小这让我很难过。

任何想法在哪里寻找答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:57:48.900

确保您使用在您的阶段/库中导入的位图编译 swf，或者确保当从其他目录加载位图时 html 版本具有正确的目录设置

# android - Android中没有画廊的全屏ImageSwitcher

> ID：10043535
> 
> 赞同：4
> 
> 时间：2012-04-06T12:32:15.693
> 
> 标签：android, gallery, slide, touch-event, imageswitcher

我正在尝试在android中构建一个应用程序，在我的一个活动中，我想显示全屏图像并通过在图片上滑动手指使它们左右滑动。

我已经尝试过基本的画廊视图和图像切换器，但我无法处理触摸事件以产生滑动效果，就像在自定义 android 画廊中一样，但没有缩略图。

这是我的简单图像切换器 xml 和活动类。如果有人向我展示一种方法或在下面编辑我的代码，我将不胜感激。提前致谢...

布局xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <ImageSwitcher 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/imageSwitcher"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:onClick="imageClick"
    android:src="@drawable/ic_launcher"
    android:keepScreenOn="true">
    </ImageSwitcher> 
```

代码 ：

```
public class GalleryActivity extends Activity implements ViewFactory {

    private ImageSwitcher imageSwitcher ;

    @Override  
    public void onCreate(Bundle savedInstanceState) {  
         super.onCreate(savedInstanceState);  
         setContentView(R.layout.activities);  

         imageSwitcher = (ImageSwitcher) findViewById(R.id.imageSwitcher);
         imageSwitcher.setFactory(this);
         imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(this, android.R.anim.fade_in));
         imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this, android.R.anim.fade_out));

         imageSwitcher.setImageResource(R.drawable.menu);

         imageSwitcher.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                findViewById(R.drawable.menu);
                imageSwitcher.addView((ImageSwitcher) findViewById(R.drawable.etkinlik));
                imageSwitcher.showNext();

                return false;
            }
        });
    }  
        public View makeView() {  
        ImageView iView = new ImageView(this);
        iView.setScaleType(ImageView.ScaleType.FIT_CENTER);
        iView.setLayoutParams(new
                    ImageSwitcher.LayoutParams(
                                LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
        iView.setBackgroundColor(0xFF000000);
        return iView;
    }
} 
```

在编辑了一些@imran khan 的解决方案后，这里的代码运行良好。

解决方案：

```
ImageSwitcher imageSwitcher ;

Integer[] imageList = {
        R.drawable.gallery,
        R.drawable.menu,
        R.drawable.promotion,
        R.drawable.info,
        R.drawable.activities       
};

int curIndex=0;
int downX,upX;

@Override  
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);  
     setContentView(R.layout.activities);  

     imageSwitcher = (ImageSwitcher) findViewById(R.id.imageSwitcher);
     imageSwitcher.setFactory(this);
     imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,android.R.anim.fade_in));
     imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,android.R.anim.fade_out));

     imageSwitcher.setImageResource(imageList[curIndex]);
     imageSwitcher.setOnTouchListener(new OnTouchListener() {
     @Override
     public boolean onTouch(View v, MotionEvent event) {

         if (event.getAction() == MotionEvent.ACTION_DOWN) {
             downX = (int) event.getX(); 
             Log.i("event.getX()", " downX " + downX);
             return true;
         } 

         else if (event.getAction() == MotionEvent.ACTION_UP) {
             upX = (int) event.getX(); 
             Log.i("event.getX()", " upX " + downX);
             if (upX - downX > 100) {

                 //curIndex  current image index in array viewed by user
                 curIndex--;
                 if (curIndex < 0) {
                     curIndex = imageList.length-1;
                 }

                 imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(GalleryActivity.this,R.anim.slide_in_left));
                 imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(GalleryActivity.this,R.anim.slide_out_right));

                 imageSwitcher.setImageResource(imageList[curIndex]);
                 //GalleryActivity.this.setTitle(curIndex);
             } 

             else if (downX - upX > -100) {

                 curIndex++;
                 if (curIndex > 4) {
                     curIndex = 0;
                 }

                 imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(GalleryActivity.this,R.anim.slide_in_right));
                 imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(GalleryActivity.this,R.anim.slide_out_left));

                 imageSwitcher.setImageResource(imageList[curIndex]);
                 //GalleryActivity.this.setTitle(curIndex);
             }
                 return true;
             }
             return false;
         }
     });
}
@Override
public View makeView() {
    ImageView i = new ImageView(this);  
    i.setScaleType(ImageView.ScaleType.FIT_CENTER);
    return i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:31:31.630

试试这种方式：

```
imageSwitcher1 = (ImageSwitcher) findViewById(R.id.imageSwitcher1);
imageSwitcher1.setFactory(this);
imageSwitcher1.setInAnimation(AnimationUtils.loadAnimation(this,
android.R.anim.fade_in));
imageSwitcher1.setOutAnimation(AnimationUtils.loadAnimation(this,
android.R.anim.fade_out));
imageSwitcher1.setImageResource(R.drawable.girl2);
imageSwitcher1.setOnTouchListener(new OnTouchListener() { 
        @Override 
        public boolean onTouch(View v, MotionEvent event) { 
            if (event.getAction() == MotionEvent.ACTION_DOWN) { 
                downX = (int) event.getX();
                return true; 
            } else if (event.getAction() == MotionEvent.ACTION_UP) { 
                upX = (int) event.getX();
                if (upX - downX > 100) {
                imageSwitcher1.setInAnimation(AnimationUtils.loadAnimation(ShowPhotoActivity.this,
                android.R.anim.slide_in_left));
                mageSwitcher1.setOutAnimation(AnimationUtils.loadAnimation(ShowPhotoActivity.this,
                android.R.anim.slide_out_right));
                imageSwitcher1.setImageResource(R.drawable.girl1);
                } else if (downX - upX > 100)//                { 
                imageSwitcher1.setInAnimation(AnimationUtils.loadAnimation(ShowPhotoActivity.this,
                android.R.anim.slide_in_left));
                imageSwitcher1.setOutAnimation(AnimationUtils.loadAnimation(ShowPhotoActivity.this,
                android.R.anim.slide_out_right));
                imageSwitcher1.setImageResource(R.drawable.girl2);
                } 
                return true; 
            } 
            return false; 
        } 
    }; 
```

如果你有图像数组，那么试试这个：

```
imgSwitcher.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    downX = (int) event.getX(); 
                    Log.i("event.getX()", " downX " + downX);
                    return true;
                } else if (event.getAction() == MotionEvent.ACTION_UP) {
                    upX = (int) event.getX(); 
                    Log.i("event.getX()", " upX " + downX);
                    if (upX - downX > 100) {
                        imgSwitcher.setInAnimation(AnimationUtils
                        .loadAnimation(firstActivity.this,
                         android.R.anim.slide_in_left));
                        imgSwitcher.setOutAnimation(AnimationUtils
                         .loadAnimation(firstActivity.this,
                         android.R.anim.slide_out_right));
                         //curIndex  current image index in array viewed by user
                        curIndex--;
                        if (curIndex < 0) {
                            curIndex = 5;
                        }
                        //IMAGE_LIST :-image list array
                        imgSwitcher.setImageResource(IMAGE_LIST[curIndex]);
                        firstActivity.this.switchTitle(curIndex);
                    } else if (downX - upX > 100) { 
                        imgSwitcher.setInAnimation(AnimationUtils
                        .loadAnimation(firstActivity.this,
                        R.anim.slide_out_left));
                        imgSwitcher.setOutAnimation(AnimationUtils
                        .loadAnimation(firstActivity.this,
                        R.anim.slide_in_right));
                        curIndex++;
                        if (curIndex > 5) {
                            curIndex = 0;
                        }
                        imgSwitcher.setImageResource(IMAGE_LIST[curIndex]);
                        firstActivity.this.switchTitle(curIndex);
                    }
                    return true;
                }
                return false;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:55:26.093

我建议使用[兼容性库](http://developer.android.com/sdk/compatibility-library.html)，然后使用[view pager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。这样，Android 将为您完成所有繁重的工作，您所要做的就是告诉 ViewPager 您有多少张图片以及它们是什么。

这是一个来自谷歌的例子，我为你做了一些改动。

```
public class FragmentPagerSupport extends FragmentActivity {
static final int NUM_ITEMS = 10;

MyAdapter mAdapter;

ViewPager mPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_pager);

    mAdapter = new MyAdapter(getSupportFragmentManager());

    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    // Watch for button clicks.
    Button button = (Button)findViewById(R.id.goto_first);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            mPager.setCurrentItem(0);
        }
    });
    button = (Button)findViewById(R.id.goto_last);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            mPager.setCurrentItem(NUM_ITEMS-1);
        }
    });
}

public static class MyAdapter extends FragmentPagerAdapter {
    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return NUM_ITEMS;
    }

    @Override
    public Fragment getItem(int position) {
        return ArrayListFragment.newInstance(position);
    }
}

public static class ArrayListFragment extends ListFragment {
    int mNum;

    /**
     * Create a new instance of CountingFragment, providing "num"
     * as an argument.
     */
    static ArrayListFragment newInstance(int num) {
        ArrayListFragment f = new ArrayListFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    }

    /**
     * When creating, retrieve this instance's number from its arguments.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments() != null ? getArguments().getInt("num") : 1;
    }

    /**

     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_pager_list, container, false);
        View tv = v.findViewById(R.id.text);
        ((ImageView)tv).setImageDrawable(#INSERT YOUR IMAGEHERE) //you can pass the id of the drawable into the mNum. Or you could make it a String instead of int and pass the url.
        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, Cheeses.sCheeseStrings));
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Log.i("FragmentList", "Item clicked: " + id);
    }
}
} 
```

编辑：对不起，格式有点不对...

# .net - () 在属性定义中代表什么？

> ID：10043536
> 
> 赞同：0
> 
> 时间：2012-04-06T12:32:23.900
> 
> 标签：.net, vb.net, syntax, properties

我注意到在我必须阅读的代码库中，有时属性定义包含一个空的 ()。那是什么意思？它与数组无关。

例如 ：

```
Public Property TotalPages() As Integer 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T12:36:51.243

我知道这看起来很奇怪（对我们 C# 的人来说很好），但属性可以在 VB.NET 中具有参数。

所以你可以拥有

```
Public Class Student
    Private ReadOnly _scores(9) As Integer

    ' An indexed Score property
    Public Property Score(ByVal index As Integer) As _
        Integer
        Get
            Return _scores(index)
        End Get
        Set(ByVal value As Integer)
            _scores(index) = value
        End Set
    End Property

    Private _score As Integer

    ' A straightforward property
    Public Property Score() As _
        Integer
        Get
            Return _score
        End Get
        Set(ByVal value As Integer)
            _score = value
        End Set
    End Property

End Class

Public Class Test
    Public Sub Test()

        Dim s As New Student

        ' use an indexed property
        s.Score(1) = 1

        ' using a standard property   
        ' these two lines are equivalent
        s.Score() = 1
        s.Score = 1

    End Sub
End Class 
```

所以你的声明

```
Public Property TotalPages() As Integer 
```

是一个简单的非索引属性，例如没有参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T12:37:39.390

它表明该属性不带任何参数：它不是索引属性。

*索引属性*具有一个或多个索引。这允许属性表现出类似数组的特性。例如，看下面的类：

```
 Class Class1  
   Private m_Names As String() = {"Ted", "Fred", "Jed"} 
    ' an indexed property. 
    Readonly Property Item(Index As Integer) As String 
     Get 
      Return m_Names(Index) 
     End Get 
   End Property  
End Class 
```

从客户端，您可以使用以下代码访问 Item 属性：

```
Dim obj As New Class1 
Dim s1 String s1 = obj.Item(0) 
```

[来自MSDN 杂志](http://msdn.microsoft.com/en-us/magazine/cc301731.aspx)的索引属性说明

# java - 在 gwt 中的 Grid 中对齐单元格的内容

> ID：10043538
> 
> 赞同：2
> 
> 时间：2012-04-06T12:32:47.650
> 
> 标签：java, css, gwt

我正在尝试在 Grid(1,4) 中对齐 Grid 单元格的内容。每个单元格都包含一个 ListBox。我将 CSS 应用于每一列，尽管我可以调整宽度，但我无法将列表框对齐在中心。即使我直接在它们而不是单元格上应用 CSS，列表框也不会移动到单元格的中心。!important 不会改变任何东西。有什么问题？以下是相关代码：

```
Grid mYGrid = new Grid(1, 4);

    mYGrid.addStyleName("mYgrid");
    mYGrid.getCellFormatter().setWidth(0, 0, "150");
    mYGrid.getCellFormatter().setWidth(0, 3, "150");

    mYGrid.setWidget(0, 1, getMonthsList() );
    mYGrid.setWidget(0, 2, getYearsList() );

    mYGrid.getColumnFormatter().setStyleName(1,"monthsCell");
    mYGrid.getColumnFormatter().setStyleName(2,"yearsCell"); 
```

CSS：

```
.monthsCell{
width:200px;
margin-left: auto;
margin-right: auto; 
```

}

```
.yearsCell{
width:200px;
margin-left: auto  !important;
margin-right: auto !important; 
```

}

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T14:22:43.033

CellFormatter 类中有一些方法`setHorizontalAlignment()`和`setVerticalAlignment()`：

```
 Grid grid = new Grid();
 HTMLTable.CellFormatter formatter = grid.getCellFormatter();
 formatter.setHorizontalAlignment(0, 0, HasHorizontalAlignment.ALIGN_CENTER);
 formatter.setVerticalAlignment(0, 0, HasVerticalAlignment.ALIGN_MIDDLE); 
```

在您的 CSS 中作为该方法的替代品，`setVerticalAlignment()`使用：`vertical-align:middle;` 和`setHorizontalAlignment()`使用[td align 属性](http://www.w3schools.com/tags/att_td_align.asp)

# php - 使用 Web 应用程序访问本地文件系统并提取文件元数据

> ID：10043539
> 
> 赞同：0
> 
> 时间：2012-04-06T12:32:56.253
> 
> 标签：php, javascript

我正在尝试构建一个可以执行此操作的 Web 应用程序： 1\. 通过 Web 应用程序，用户选择他机器文件系统上存在的一些文件。2\. Web 应用程序然后提取所选文件的元数据，如文件名、大小、文件类型，并将其存储在服务器的数据库中。

所以我需要两件事 - 1\. web 应用程序应该能够访问用户的文件系统和 2\. web 应用程序应该能够提取所选文件的元数据。

是否有可能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:43:14.830

The webserver cannot access the users file system to get this meta information without the help of browser plugins. The only way this information becomes accessible to the server is after the upload is complete.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T04:48:53.360

如果进行了上传，则可以使用 javascriot(html 5 file api) 直接访问文件名、大小、路径、最后修改日期和文件类型。否则，对于所有极端元数据（比特率和图像尺寸等），必须使用 php 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:00:42.530

是的，[http://jsfiddle.net/Fs7dM/2/](http://jsfiddle.net/Fs7dM/2/)

```
$("input").bind("change", function(e) {
    var files = this.files;

    if (files && files.length) {
        var pre = $("#log");
        [].forEach.call(files, function(file) {
           pre.append( (file.fileSize || file.size) + " " + (file.fileName || file.name) + " " + file.type +"\n");
        });
    }
});​ 
```

# c++ - 高效的插入数据结构

> ID：10043541
> 
> 赞同：7
> 
> 时间：2012-04-06T12:33:15.147
> 
> 标签：c++, list, data-structures, insertion

我正在寻找一种允许将值快速（比 O(N) 快）任意插入到结构中的数据结构（类似数组）。数据结构必须能够以**插入的方式**打印出其元素。这类似于 List.Insert() 之类的东西（它太慢了，因为它必须移动每个元素），除了我不需要随机访问或删除。插入将始终在“数组”的大小范围内。所有的价值观都是独一无二的。不需要其他操作。

例如，如果 Insert(x, i) 在索引 i（0 索引）处插入值 x。然后：

*   Insert(1, 0) 给出 {1}
*   Insert(3, 1) 给出 {1,3}
*   Insert(2, 1) 给出 {1,2,3}
*   Insert(5, 0) 给出 {5,1,2,3}

并且它需要能够在最后打印出 {5,1,2,3}。

我正在使用 C++。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T12:37:49.543

使用[跳过列表](http://en.wikipedia.org/wiki/Skip_list)。另一种选择应该是[分层向量](http://www.cs.brown.edu/cgc/jdsl/papers/tiered-vector.pdf)。跳过列表在 const O(log(n)) 处执行插入并保持数字有序。分层向量支持在 O(sqrt(n)) 中插入，并且可以再次按顺序打印元素。

编辑：根据 amit 的评论，我将解释如何在跳过列表中找到第 k 个元素：

对于每个元素，您都有一个指向下一个元素的链接的塔，并且对于每个链接，您都知道它跳过了多少个元素。因此，寻找第 k 个元素，您从列表的头部开始，沿着塔向下，直到找到一个跳过不超过 k 个元素的链接。您转到该节点指向的节点，并随着您跳过的元素数量减少 k。继续这样做，直到你有 k = 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:37:17.340

您是否考虑使用`std::map` or `std::vector`？

您可以使用`std::map`带有插入等级的 a 作为键。并且[vector](http://www.cplusplus.com/reference/stl/vector/)有一个`reserve`成员函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T18:46:33.283

关于您的评论：

> List.Insert() （这太慢了，因为它必须移动每个元素），

列表不会改变它们的值，它们会遍历它们以找到你想要插入的位置，小心你说的话。这可能会让像我这样的新手感到困惑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T12:49:35.833

您可以使用`std::map`映射（索引，插入时间）对到值，其中插入时间是“自动增量”整数（在 SQL 术语中）。对的排序应该是

```
(i, t) < (i*, t*) 
```

当且当

```
i < i* or t > t* 
```

在代码中：

```
struct lt {
    bool operator()(std::pair<size_t, size_t> const &x,
                    std::pair<size_t, size_t> const &y)
    {
        return x.first < y.first || x.second > y.second;
    }
};

typedef std::map<std::pair<size_t, size_t>, int, lt> array_like;

void insert(array_like &a, int value, size_t i)
{
    a[std::make_pair(i, a.size())] = value;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-05T12:00:42.450

GCC 默认包含的一个解决方案是**绳索**数据结构。这是[文档](http://www.sgi.com/tech/stl/Rope.html)。通常，在处理长字符串时会想到绳索。这里我们用`int`s 而不是字符，但它的工作原理是一样的。只需`int`用作模板参数。（也可以是`pair`s 等）

这是[Wikipedia 上对绳索的描述](https://en.wikipedia.org/wiki/Rope_%28computer_science%29)。

基本上，它是一棵二叉树，它维护左右子树中有多少元素（或等效信息，即所谓的*顺序统计信息*），并且当插入和删除元素时，这些计数会随着子树的旋转而适当更新。这允许 O(lg n) 操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-04T20:44:51.700

有[这种](https://medium.com/@igushev/array-with-constant-time-access-and-fast-insertion-and-deletion-c2eef089a25d)数据结构将插入时间从 O(N) 缩短到 O(sqrt(N))，但我并没有那么印象深刻。我觉得一个人应该能够做得更好，但我必须努力工作。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-06T12:46:31.320

In c++ you can just use a map of vectors, like so:

```
int main() {
  map<int, vector<int> > data;
  data[0].push_back(1);
  data[1].push_back(3);
  data[1].push_back(2);
  data[0].push_back(5);
  map<int, vector<int> >::iterator it;
  for (it = data.begin(); it != data.end(); it++) {
    vector<int> v = it->second;
    for (int i = v.size() - 1; i >= 0; i--) {
      cout << v[i] << ' ';
    }
  }
  cout << '\n';
} 
```

This prints:

```
5 1 2 3 
```

Just like you want, and inserts are O(log n).

# ms-word - 使用 Applescript 在 Word 中另存为活动文档的正确语法是什么？

> ID：10043545
> 
> 赞同：4
> 
> 时间：2012-04-06T12:33:42.440
> 
> 标签：ms-word, applescript, ms-office

我要疯了。我尝试了无数“另存为活动文档文件格式 PDF”的排列/变体，但似乎没有一个有效。所有这些都出现 AppleScript 错误。

所以谁能告诉我：

使用 Word 将活动文档保存为 AppleScript 中的 PDF 文件的确切语法是什么？

似乎在 Office for Mac 脚本中没有任何连贯性，因为我在 Excel 和 PowerPoint 中工作，即使在那里语法也不同：

擅长

```
save active workbook in 'MyFile.pdf' as PDF file format 
```

微软幻灯片软件

```
save active presentation in 'MyFile.pdf' as save as PDF 
```

Word 的正确语法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:33:36.857

看来我终于找到了：

```
set myDoc to "/Users/X/Desktop/test.docx"
set pdfSavePath to "Users:X:Desktop:test.pdf"

tell application "Microsoft Word"
        activate
        open myDoc
        set theActiveDoc to the active document
        save as theActiveDoc file format format PDF file name pdfSavePath
    end tell 
```

我不是 AppleScript 专家。我有斜杠而不是 : 作为路径分隔符。与：它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-22T13:49:03.100

Joris Mans 的剧本很不错，但有一个缺陷。它不能确保 Word 已准备好活动文档（`set theActiveDoc to the active document`可能返回缺失值）

我还改进了脚本以使用 Finder 选择作为输入，将 PDF 放置在与 word 文件相同的位置。我没有测试文件类型，但 word 会抱怨。

```
tell application "Finder"
    set input to selection
end tell

tell application id "com.microsoft.Word"
    activate
    repeat with aFile in input
        open aFile
        set theOutputPath to ((aFile as text) & ".pdf")
        repeat while not (active document is not missing value)
            delay 0.5
        end repeat
        set activeDoc to active document
        save as activeDoc file name theOutputPath file format format PDF
        close active document saving no
    end repeat
end tell 
```

# java-me - 无法使用 JAD+JAR 从 J2ME 发送 SMS

> ID：10043551
> 
> 赞同：-1
> 
> 时间：2012-04-06T12:34:30.717
> 
> 标签：java-me, sms, ovi, ovistore

我已经发布了一个将预定的 SMS 发送到 OVI 商店的应用程序，但 QA 拒绝了该应用程序，声称该应用程序无法发送任何 SMS，并且在仅使用 .jar 文件启动应用程序时它工作正常。任何想法我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:41:18.937

我想做的只是再声明一个权限，以便在签署应用程序时获得发送短信的权限：

javax.wireless.messaging.sms.send

# mysql - 将 autoincrement id 字段加一

> ID：10043553
> 
> 赞同：7
> 
> 时间：2012-04-06T12:34:55.727
> 
> 标签：mysql, sql, database, auto-increment, increment

我有一个 MySQL 5 服务器和一个表，其中有一个 id 字段（主键）的自动增量。现在我想在两者之间添加一条记录，因此我必须将所有其他 id 加一。这是我尝试过的：

```
UPDATE myTable SET id=id+1 WHERE id >= 53 
```

这不起作用，因为例如已经存在 id = 52 的记录。我怎样才能做到这一点？如果他从最后一个条目开始并进行更新，我认为它应该可以工作。但是怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T12:47:09.837

我看不出有什么好的理由。只有问题。在运行以下语句之前，请检查您是否`FOREIGN`定义了引用 this 的键`id`。他们设置为`ON UPDATE CASCADE`? 另外，您是否有与此表相关的触发器？

但首先考虑一下，***为什么***你（认为你）需要这个。它会用于订购桌子吗？在这种情况下，正如@Mark 指出的那样，您应该使用单独的列来指定所需的顺序。

* * *

但是，如果您决定确实需要这个，请使用：

```
UPDATE myTable 
SET id = id + 1 
WHERE id >= 53
ORDER BY id DESC  ; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T12:42:38.150

快速而肮脏，您只需 2 个步骤即可完成。

*   将 id 增加到比所有其他人更高的数字
*   将所有ID减少到您想要的数字

像那样

```
UPDATE myTable SET id=id+10000 WHERE id >= 53
UPDATE myTable SET id=id-9999 WHERE id >= 53 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:38:45.443

我想这样的工作：

```
UPDATE myTable SET id=id+1 WHERE id >= (select id from myTable order by id DESC) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T12:41:55.530

我遇到了同样的问题。并且还尝试了 OP 和 @Romain Hoog 的查询。但没有成功。

最后在excel中导出整个表的数据并在excel中完成（不是一个一个，而是使用使它非常快的技巧）。

然后备份原始表重新创建新表并从更新的 excel 导入数据。

# mysql - MySQL：为什么是 varchar(254) 而不是 varchar(255)？

> ID：10043556
> 
> 赞同：11
> 
> 时间：2012-04-06T12:35:18.363
> 
> 标签：mysql, database, varchar

为什么这么多开发人员在创建 MySQL 表时将 varchar 设置为 254 而不是 255？

证明这种情况发生：[mysql varchar 254](https://www.google.se/search?num=50&hl=sv&safe=off&q=mysql%20varchar%20254)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T13:05:29.253

您的 Google 查询已经为您提供了提示。第一个热门是这样的：

[https://www.vbulletin.com/forum/project.php?issueid=32655](https://www.vbulletin.com/forum/project.php?issueid=32655)

它基本上说，`FULLTEXT`索引`VARCHAR(255)`需要两倍于全文索引的空间`VARCHAR(254)`。除此之外还有一些其他的膨胀。

我认为这比在数据表中保存一个字节重要得多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T12:47:53.467

varchar 字段对于小于或等于 255 的字段需要 n+1 个字节，对于大于 255 的字段需要 n+2 个字节

[http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html)

它应该设置为 255，我假设开发人员认为他们会从 254 中节省一个额外的字节，但 255 是标准

# java - JPA：两个实体之间的多个多对多关系？

> ID：10043558
> 
> 赞同：8
> 
> 时间：2012-04-06T12:35:33.837
> 
> 标签：java, jpa, many-to-many, default-value

我有两个实体类“用户”和“文档”。每个用户都有一个收件箱和一个发件箱，它们实际上是两个列表，每个文档可能驻留在多个用户的收件箱和发件箱中。这是我的课程：

```
@Entity
public class User {

    @Id
    private Long id;

    @ManyToMany(mappedBy = "userinbox", cascade=CascadeType.ALL)
    private List<Document> inbox = new ArrayList<Document>();
    @ManyToMany(mappedBy = "useroutbox", cascade=CascadeType.ALL)
    private List<Document> outbox = new ArrayList<Document>();

}

@Entity
public class Document {

    @Id
    private Long id;

    @ManyToMany(cascade=CascadeType.ALL)
    private List<User> userinbox  = new ArrayList<User>();
    @ManyToMany(cascade=CascadeType.ALL)
    private List<User> useroutbox  = new ArrayList<User>();

} 
```

当我运行程序并尝试将文档分配给用户的收件箱（反之亦然）时，我收到以下错误：

```
Error Code: 1364

Call: INSERT INTO DOCUMENT_USER (userinbox_ID, inbox_ID) VALUES (?, ?)
    bind => [2 parameters bound]

Internal Exception: java.sql.SQLException: Field 'useroutbox_ID' doesn't have a default value

Query: DataModifyQuery(name="userinbox" sql="INSERT INTO DOCUMENT_USER (userinbox_ID, inbox_ID) VALUES (?, ?)") 
```

生成的关联表如下所示：

```
DOCUMENT_USER
useroutbox_ID | outbox_ID |userinbox_ID | inbox_ID 
```

我将如何为这种多对多关系分配默认值？制作两个关联表会更好吗 - >一个用于收件箱关系，另一个用于发件箱关系？我将如何做到这一点？这个问题的其他解决方案？

任何帮助高度赞赏 - 非常感谢提前！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-06T12:47:54.943

我认为更好的选择是有两个单独的表，每个关系一个。因为您实际上在两个不同实体之间有两种关系，而不是与四个不同实体之间的一种关系。

因此，您应该`@JoinTable`为侧面的每个属性添加一个注释，`Document`因为`User`这些关系被映射到一个属性。类似于以下内容：

```
@Entity
public class Document {

    @Id
    private Long id;

    @ManyToMany(cascade=CascadeType.ALL)
    @JoinTable(name = "document_inbox", joinColumns = @JoinColumn(name = "userinbox_id"),
               inverseJoinColumns = @JoinColumn(name = "inbox_id"))
    private List<User> userinbox  = new ArrayList<User>();
    @ManyToMany(cascade=CascadeType.ALL)
    @JoinTable(name = "document_outbox", joinColumns = @JoinColumn(name = "useroutbox_id"),
               inverseJoinColumns = @JoinColumn(name = "outbox_id"))
    private List<User> useroutbox  = new ArrayList<User>();

} 
```

让另一个实体保持原样。希望这可以帮助。

# sql-server - Spring @Transactional 和 PROPAGATION_REQUIRES_NEW 与 sql server 2012

> ID：10043563
> 
> 赞同：1
> 
> 时间：2012-04-06T12:36:07.560
> 
> 标签：sql-server, spring, spring-transactions

我有一个服务，它有几个标有 的方法`@Transactional`，包括方法 a、b 和 c。这3个方法嵌套如下：a -> b -> c。这是一个代码示例：

```
@Transactional
public void a() {
    while(condition) {
        try {
            b();
        } catch(MyException e) {
            logger.warn(e.getMessage());
        }
    }
} 
```

然而，方法 b 的注释如下：

```
@Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = {MyException.class}) 
```

但是，当`MyException`从方法 c 抛出时，异常在方法 a 处被捕获，当该异常退出时，事务被提交，其中包括通过调用 b() 所做的任何事情，该调用引发了异常并且应该回滚（？ ）。我正在使用带有 spring 3.0.7 的 sql server 2012 express，我的 spring 配置是这样的：

```
<tx:annotation-driven />
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <qualifier value="txm1"/>
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="dataSource" ref="dataSource"/>
    <property name="persistenceXmlLocation" value="classpath:META-INF/jpa-persistence.xml"/>
    <property name="persistenceUnitName" value="Unit1" />
</bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:53:20.723

Method`b`似乎与 method 属于同一类`a`。如果您不使用 AspectJ，则`@Transactional`-annotations 由 JDK 动态代理处理，您从类外部的调用通过该代理传递到 method `a`。调用需要通过代理才能使`@Transactional`-annotations 生效，例如，请参见此处的“了解 AOP 代理”：[http ://static.springsource.org/spring/docs/3.0.0.M3/spring-框架参考/html/ch08s06.html](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch08s06.html)

> 这里要理解的关键是 Main 类的 main(..) 中的客户端代码具有对代理的引用。这意味着对该对象引用的方法调用将是对代理的调用，因此代理将能够委托给与该特定方法调用相关的所有拦截器（建议）。但是，一旦调用最终到达目标对象，在这种情况下是 SimplePojo 引用，它可能对自身进行的任何方法调用，例如 this.bar() 或 this.foo()，都将针对这个参考，而不是代理。这具有重要意义。这意味着自调用不会导致与方法调用相关的建议有机会执行。

# maven - maven-in-5-min-not-working，错误与不可解析的 POM

> ID：10043567
> 
> 赞同：2
> 
> 时间：2012-04-06T12:36:27.957
> 
> 标签：maven, installation

从这个线程继续

[5分钟内的maven不工作](https://stackoverflow.com/questions/5704010/maven-in-5-min-not-working/10042748#10042748I)

我有一个问题，只是明智地获得相同的标题，并且非常相关（我认为）

因为我不能把我的问题放到那个线程中，所以我必须创建一个新问题。

Aslo 这是一篇很长的帖子（如何包含文件报告，因为它们有滚动条

> ```
> C:\mvn --version
> Apache Maven 3.0.4 (r1232337; 2012-01-17 09:44:56+0100)
> Maven home: C:\Program Files\Maven3\apache-maven-3.0.4
> Java version: 1.6.0_23, vendor: Sun Microsystems Inc.
> Java home: C:\Program Files\Java\jdk6\jre
> Default locale: fr_FR, platform encoding: Cp1252
> OS name: "windows xp", version: "5.1", arch: "x86", family: "windows" 
> ```

而且我的代理值不同...

```
<proxy>   
    <id>APHP</id>   
    <active>true</active>  
    <protocol>http</protocol>   
    <!-- username and password may not be required, my app has a username and password 
    for the local network  
    <username>scibearspace</username>   
    <password>scibearspace</password>
    but not used in this instance -->  
    <host>Local.Server.IP.Address</host> <!-- not the server name a dotted quad value --> 
    <port>8080</port>    <!-- next line not used  -->   
    <nonProxyHosts>localhost|*.google.com</nonProxyHosts>   
</proxy> 
```

我按照 AKB 的建议执行了这些步骤。但没有变化。的结果

mvn -X archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false > z:\mvnError.txt

相当长，所以我会在这里发布第一个失败，以及我签名后的完整输出。

> [INFO] 错误堆栈跟踪已打开。[调试] 从 C:\Program Files\Maven3\apache-maven-3.0.4\conf\settings.xml 读取全局设置 [调试] 从 C:\Documents and Settings\dmyers.m2\settings.xml 读取用户设置 [ DEBUG] 在 C:\Documents and Settings\dmyers.m2\repository 使用本地存储库 [DEBUG] 使用管理器 EnhancedLocalRepositoryManager，优先级为 10 用于 C:\Documents and Settings\dmyers.m2\repository [INFO] 扫描项目... [ DEBUG] 项目 org.apache.maven:standalone-pom:pom:1 的扩展领域：（无）[DEBUG] 从 ClassRealm[plexus.core, parent: null] 查找用于打包 pom 的生命周期映射 [DEBUG] 解析插件前缀Archetype from [org.apache.maven.plugins, org.codehaus.mojo] [警告] org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1 的 POM 无效，
> 
> ```
>  [WARNING] The POM for org.apache.maven.plugins:maven-install-plugin:jar:2.3.1 is invalid, 
> ```
> 
> 传递依赖项（如果有）将不可用：为 org.apache.maven.plugins:maven-install-plugin:2.3.1 [致命] 不可解析的 POM C:\Documents 和构建有效模型时遇到了 1 个问题Settings\dmyers.m2\repository\org\apache\maven\maven-parent\16\maven-parent-16.pom：结束标记名称必须与第 26 行的开始标记相同（位置：TEXT seen ...t " src="/templates/standard-5.1/js/superfish.js">\n... @36:8) @ C:\Documents and Settings\dmyers.m2\repository\org\apache\maven\maven- parent\16\maven-parent-16.pom，第 36 行，第 8 列

所以我然后导航到文件 maven-parent-16.POM，它是一个自生成的 HTML 文件。它包含有关我的作品服务器的信息，以及文件头部的大量链接引用。

显然这是一个 HTML 文件，它不符合关闭标签等严格的 XML 标准。我是否需要编辑这些文件以使其符合 XML 严格性。如果是这种情况，那很好，但是如果 maven 创建了这些文件，那么它应该对结构感到满意！我想我可能刚刚明白...服务器正在阻止与此 POM 相关的站点，这是我在工作中点击“禁止”站点时返回的页面（所有 MS 站点都被阻止作为“安全”措施，是的，没错，我们的网络系统管理员是真正的 linux 守护进程！）...

所以这改变了我的问题一点点......

我已经搜索了与 maven-clean-plugin 匹配的 POM 文件，并且该文件在那里，所以我猜它是依赖项之一，我如何确定是哪个导致了初始错误（我是确定它在输出中，但我不知道我在寻找什么）。然后我就可以找到所需的 jar 和 POM 和 yipee。Maven应该工作！

很快，查看 pom 文件有一堆“模块”，我猜这个文件正在尝试下载。我的本地存储库文件夹中只有一小部分。是服务器超时造成的吗？还是我真的被网站屏蔽了？

提前感谢您提供的任何帮助或建议，我已经尝试解决此问题 2 天了！

大卫

我似乎无法添加失败的完整输出，如果有人需要，我会再试一次。

D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T02:41:40.077

From the logs it is evident that dependant maven artifacts are not getting downloaded - most likely due to `<proxy>` misconfiguration. It could be due to same reason as the [related](https://stackoverflow.com/questions/5704010/maven-in-5-min-not-working/) post referred in the question.

The local repository manager itself would not have solved the problem without appropriate changes to `settings.xml` since this also would have gone through the `proxy`.

# c++ - c++ 中的文本模板库，用于格式化邮件、报告

> ID：10043568
> 
> 赞同：3
> 
> 时间：2012-04-06T12:36:30.697
> 
> 标签：c++, templates, text, formatting

我正在寻找简单的方法来获得邮件/报告文本模板、变量和变量元素的循环。例如：

模板是：

文件列表在 __FOLDER__ 中生成。它包含：\n

[__FILENAME__\t__FILESIZE__\n]

在程序中，变量 __FOLDER__ 替换为该文件夹的运行时值；并且使用模板__FILENAME__\t__FILESIZE__\n 上的循环将生成的运行时文件放入报告中。

您对 C++ 中的库或框架有什么想法可以帮助我吗？10倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:11:15.563

经常被忽视的[m4](http://en.wikipedia.org/wiki/M4_%28computer_language%29)宏语言（每个 Unix 上都有，而且似乎也有[windows 版本](http://gnuwin32.sourceforge.net/packages/m4.htm)）对于这类事情非常有用。好的文档[在这里](http://www.gnu.org/software/m4/manual/m4.html)和[这里](http://mbreen.com/m4.html)。

# actionscript-3 - 用于处理 Apple HTTP Live Streaming 的 AS3 库

> ID：10043570
> 
> 赞同：3
> 
> 时间：2012-04-06T12:36:41.407
> 
> 标签：actionscript-3, flash, http-live-streaming

我想知道在动作脚本中处理 HLS 的最佳解决方案是什么。 [这个](http://code.google.com/p/apple-http-osmf/)项目似乎很成熟，但有些过时。GitHub 没有显示任何相关内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:21:44.267

JW Player supports playing HLS from Flash. [http://www.longtailvideo.com/jw-player/hls-rtmp-live-streaming/](http://www.longtailvideo.com/jw-player/hls-rtmp-live-streaming/)

# java - Java 类到 Objective-C 类

> ID：10043574
> 
> 赞同：2
> 
> 时间：2012-04-06T12:37:10.803
> 
> 标签：java, objective-c, cocoa, methods, code-conversion

我需要知道以下代码在 Objective-C 中的等效代码是什么

```
public MyClass(int x, int y) {
        xCoOrdinate = x;
        yCoOrdinate = y;
    }

    public int getXCoOrdinate() {
        return xCoOrdinate;
    }

    public int getYCoOrdinate() {
        return yCoOrdinate;
    }
    public MyClass func() {
        return new MyClass(xCoOrdinate - 1, yCoOrdinate);
    } 
```

**这就是我尝试过的：**

```
 -(id)initWithX:(int )X andY:(int)Y
{
    if(self = [super init])
    {
        self.xCoOrdinate = X;
        self.yCoOrdinate = Y;

    }
    return self;
}
-(MyClass *)func
{

    return [self initWithX:(self.xCoOrdinate -1)  andY:self.yCoOrdinate];
} 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T12:39:37.840

不，您需要返回该类的新实例：

```
-(MyClass *)func
{
    return [[[[self class] alloc] initWithX:(self.xCoOrdinate - 1)  andY:self.yCoOrdinate] autorelease];
} 
```

请注意，我们用于`[[self class alloc]`创建当前类的新实例`MyClass`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:40:53.500

一些更正：

```
public int getXCoOrdinate() {
    return xCoOrdinate;
} 
```

会成为 ：

```
- (int)getXCoOrdinate
{
    return [self xCoOrdinate];
} 
```

**和**

```
public MyClass func() {
    return new MyClass(xCoOrdinate - 1, yCoOrdinate);
} 
```

会成为 ：

```
+ (MyClass*)func
{
     MyClass* newFunc = [[MyClass alloc] initWithX:0 Y:0];

     if (newFunc)
     {
     }
     return newFunc;
} 
```

# iphone - iPhone App登录数据或会话

> ID：10043575
> 
> 赞同：0
> 
> 时间：2012-04-06T12:37:13.757
> 
> 标签：iphone, objective-c, ios

我想为我的聊天网站创建一个聊天信使（因为推送通知）。但是用户必须登录。我希望它像 Facebook 应用程序一样，在开始时要求用户名和密码，如果选中“记住”字段，您不必每次都登录（也许一次然后一个月）。最好的方法是什么？服务器上的会话或将用户名和密码保存在本地？如果我在保存会话数据的地方发出 HTTP 请求，当我稍后在同一台服务器上发出 HTTP 请求时，它是否仍然可用或处于活动状态？（例如获取聊天内容或其他内容？）我搜索了互联网，但没有找到有用的东西。如果有人可以告诉我该怎么做，或者发布链接或其他可以提供帮助的东西..

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:00:32.903

如果用户检查保存密码字段，您可以将密码保存到 NSUserDefaults。尽管这对加密不利，但它确实有效。您还应该使用某种类型的编码 (SHA-1)。你可以让它在说 10 之后询问你的密码。为此，你需要一个数据存储。您可以将它加载到一个 int 中，然后您可以简单地执行类似的操作`runTime = runTime + 1;`，如果它达到 10 则清除密码数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:07:00.950

Web 服务器通过令牌（例如会话 cookie）识别客户端。对于每个 HTTP 请求，会话 cookie 都会发送到服务器，并且服务器知道该请求来自之前已通过身份验证的客户端。

这种身份验证的时间跨度当然等于令牌的有效性（在这种情况下是 cookie）。令牌可以在客户端或服务器上失效。您可能需要特殊机制来保持会话在一个月内有效。默认值通常是半小时。

存储密码的第二种选择更多是一个安全决定。如果您存储用户凭据，那么您必须确保以安全的方式进行操作。

# java - 使用条形码编号获取产品信息，如名称、价格等

> ID：10043579
> 
> 赞同：15
> 
> 时间：2012-04-06T12:37:21.327
> 
> 标签：java, android, barcode

我正在开发一个应用程序，用于`barcode`在扫描`barcode`.

我不希望用户`ZXing barcode`单独安装应用程序，所以我将`ZXing`代码嵌入到我的项目中。所以我能够获得`barcode ID number`.

我想使用**google search api**购物的条形码号码来获取**产品信息**，如**名称、制造商、价格等。**

 **这是我使用的代码

```
public class JSONExampleActivity extends Activity {

    TextView httpStuff; 
    DefaultHttpClient client; 
    JSONObject json;  

    final static String URL = "https://www.googleapis.com/shopping/search"; 
    String upc = "/v1/public/products?country=US&q=691464717759&restrictBy=gtin=691464717759";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);          

        httpStuff = (TextView) findViewById(R.id.tvHttp); 
        client = new DefaultHttpClient(); 
        new Read().execute("items");                
    }

    public JSONObject products(String upc)  throws ClientProtocolException, IOException, JSONException {     
        StringBuilder url = new StringBuilder(URL); 
        url.append(upc);
        HttpGet get = new HttpGet(url.toString());     
        HttpResponse r = client.execute(get);   
        int status = r.getStatusLine().getStatusCode(); 

        if (status == 200) {
            HttpEntity e = r.getEntity();         
            String data = EntityUtils.toString(e);         
            JSONObject timeline = new JSONObject(data); 

            return timeline;    
        } 
        else {         
            Toast.makeText(JSONExampleActivity.this, "error", Toast.LENGTH_SHORT);         
            return null;  
        } 
    }  

    public class Read extends AsyncTask<String, Integer, String> {      
        @Override     
        protected String doInBackground(String... params) {         
            // TODO Auto-generated method stub         
            try {                
                json = products(upc);
                return json.getString(params[0]);         
            } catch (ClientProtocolException e) {             
                    // TODO Auto-generated catch block             
                    e.printStackTrace();        
            } catch (IOException e) {             
                    // TODO Auto-generated catch block             
                    e.printStackTrace();         
            } catch (JSONException e) {             
                    // TODO Auto-generated catch block            
                    e.printStackTrace();         
            }         
            return null;     
        }  

    @Override 
    protected void onPostExecute(String result){     
    httpStuff.setText(result);
    } 
} 
```

但我在 httpStuff 中没有收到任何文本。

这是日志：

```
D/SntpClient(61): request time failed: java.net.SocketException: Address family not    supported by protocol
W/System.err(793): org.apache.http.conn.ConnectTimeoutException: Connect to /209.85.175.95:443 timed out
W/System.err(793):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)
W/System.err(793):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
W/System.err(793):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
W/System.err(793):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
W/System.err(793):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
W/System.err(793):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
W/System.err(793):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
W/System.err(793):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
W/System.err(793):  at com.android.example.jsonexample.JSONExampleActivity.products(JSONExampleActivity.java:53)
W/System.err(793):  at com.android.example.jsonexample.JSONExampleActivity$Read.doInBackground(JSONExampleActivity.java:77)
W/System.err(793):  at com.android.example.jsonexample.JSONExampleActivity$Read.doInBackground(JSONExampleActivity.java:1)
W/System.err(793):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
W/System.err(793):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
W/System.err(793):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
W/System.err(793):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
W/System.err(793):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
W/System.err(793):  at java.lang.Thread.run(Thread.java:1019)
D/SntpClient(61): request time failed: java.net.SocketException: Address family not supported by protocol 
```

请帮我找出我出错的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T06:13:47.580

尝试将您的 API id 添加到 url。[https://developers.google.com/shopping-search/v1/getting_started#getting-started](https://developers.google.com/shopping-search/v1/getting_started#getting-started)

我试过了，并且能够根据您的代码的 url 获取 Michael Kors MK5412 Chronograph Watches 的信息。

[https://www.googleapis.com/shopping/search/v1/public/products?country=US&q=691464717759&restrictBy=gtin=691464717759&key=](https://www.googleapis.com/shopping/search/v1/public/products?country=US&q=691464717759&restrictBy=gtin=691464717759&key=) {你的钥匙在这里}

因此，您必须修复您的 url 构建器以匹配 ^。

还要确保你把

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

在你的清单中。归功于这个人：[http](http://androidforums.com/developer-101/100793-java-net-unknownhostexception.html) ://androidforums.com/developer-101/100793-java-net-unknownhostexception.html 。

快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:49:17.950

您想使用[API](https://developers.google.com/shopping-search/v1/reference-request-parameters#restricting-products)并通过[GTIN](http://www.gtin.info/)搜索，这是条形码中编码的数字所代表的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T13:22:53.923

还有其他条形码数据库，例如[ean-search.org](http://www.ean-search.org)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-30T12:49:22.303

我认为，“用于表示特定产品的条形码编号，并且条形码编号在世界各地都是唯一的。大多数条形码 api 从他们自己的数据库中查找给定的条形码编号以获取特定的产品信息（如果给定的条形码编号存在于他们的数据库），否则它不会给出任何结果。”

> 01.首先您应该创建自己的数据库，包括数据库中每个项目的条形码编号。（您可以使用的条形码类型很多）
> 
> 02.如果您介绍一种新产品，您应该为您的新产品获取或购买一个有效的条形码编号（确保您的编号在全世界都是唯一的）。--
> 
> ** 然后您可以使用您的数据库查找给定条形码的项目信息 ****

# sql - 动态地将参数添加到查询中的“IN”子句？

> ID：10043580
> 
> 赞同：0
> 
> 时间：2012-04-06T12:37:29.220
> 
> 标签：sql, ms-access

我正在尝试`MS Access`使用`C#`

静态查询是 -

```
Select FieldID , CDGroups.CDGroupID , Priority
from Fields , CDGroups
where Fields.CDGroupID = CDGroups.CDGroupID
  and Fields.FieldID in ('f1','f2','f3')
order by Priority 
```

我需要替换 f1,f2.. FieldID`fieldIdList(List<string> fieldIdList)`包含所有这些字段

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:57:14.337

正确的方法是使用 SQL 参数。
为此，您需要遍历列表并为每个列表项创建一个参数 - 在 SQL 字符串**和**查询的 SQL 参数列表中。

看看这个对类似问题的回答：
[如何将 sqlparameter 传递给 IN()？](https://stackoverflow.com/questions/9384446/how-to-pass-sqlparameter-to-in/9384566#9384566)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:50:30.093

```
 var listId= string.Join(",", fieldIdList.Select(m => string.Format("'{0}'", m)));; 
```

然后

```
"Field.FieldID in (" + listId+ ") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:12:58.283

我使用了以下代码：

```
 StringBuilder sb = new StringBuilder();

                foreach (string fieldId in fieldIdList)
                {
                    sb.Append("'" + fieldId + "',");
                }

                string fieldList = sb.ToString().TrimEnd(',');

                string queryString =
                    "Select FieldID , CDGroups.CDGroupID , Priority from Fields , CDGroups where Fields.CDGroupID = CDGroups.CDGroupID and Fields.FieldID in (" + fieldList + ") order by Priority"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T14:23:19.117

试试这个查询 -

```
SELECT CDGroupID FROM fields
  WHERE FieldID IN ('f1', 'f2', 'f3')
  GROUP BY CDGroupID
  HAVING(COUNT(DISTINCT FieldID)) >= 3 
```

它将显示至少具有“f1”、“f2”和“f3”的 CDGroupID 列表。如果您想显示只有 'f1'、'f2' 和 'f3' 的那些，则将 WHERE 条件更改为 'HAVING(COUNT(DISTINCT FieldID)) >= 3'。

# objective-c - Objective C 中的模板？

> ID：10043583
> 
> 赞同：16
> 
> 时间：2012-04-06T12:37:37.813
> 
> 标签：objective-c, ios, class, templates

一切都在标题中:)

ObjC 中是否有任何模板？

我需要相当于 c# ：

```
public class MyClass<T> : Message 
```

在 ObjC 中。

任何帮助都将非常感谢:(

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T12:54:54.643

没有这样的 ObjC 功能。虽然 ObjC++ 确实存在，但我强烈反对广泛使用它。它有很多问题，从糟糕的工具和调试器支持，到糟糕的编译器优化，再到降低的 ARC 性能。

ObjC 通常不需要模板，因为它不是强类型语言。An`NSArray`可以容纳任何对象，因此您无需使用模板即可获得正确的类型。你有一个你想要解决的具体问题吗？可能有更好的 ObjC 解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-30T12:43:43.767

Obj-C 自 Xcode v7 起支持模板。它被命名为泛型：

> 轻量级泛型现在允许您为集合类指定类型信息，例如 NSArray、NSSet 和 NSDictionary。当您从 Objective-C 桥接时，类型信息改进了 Swift 访问，并简化了您必须编写的代码。例如：
> 
> ```
> NSArray<UIImage *> *images; 
> NSDictionary<NSString *, NSURL *> *resourcesByName; 
> ```

[在https://developer.apple.com/library/content/documentation/Xcode/Conceptual/RN-Xcode-Archive/Chapters/xc7_release_notes.html](https://developer.apple.com/library/content/documentation/Xcode/Conceptual/RN-Xcode-Archive/Chapters/xc7_release_notes.html)中查找“Objective-C 语言更改”部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T13:36:51.973

顺便说一句，Xcode 支持通过 New->File 添加 C++ 类。在 C++ 中使用 extern "C" {} 构造意味着您可以根据需要提供尽可能多或尽可能少的 C 可调用接口，然后您可以直接从您的 Objective-C 代码调用，因为 Objective-C 是 C 的超集.

话虽如此，坚持使用 Objective-C 范式可能是一个好主意，除非您有迫切的理由要移出它，例如需要将现有 C++ 代码体合并到您的项目中。（这并不是说 Objective-C 是一种“更好”的语言，这完全是另一回事。）

# ios - 如何编辑 backBarButtonItem (UINavigationItem) 的背景颜色？iOS 4.3 问题

> ID：10043586
> 
> 赞同：1
> 
> 时间：2012-04-06T12:37:48.407
> 
> 标签：ios, ios4, uinavigationbar, uibarbuttonitem, backbarbuttonitem

我正在尝试编辑 backBarButtonItem 后面的背景，因为它坚持保持白色。我已经编辑了整个导航栏的背景颜色，但无济于事。

然而，它似乎只影响 iOS4，如下所示：

```
[self.navigationController.navigationBar setBackgroundImage:navBarBackground forBarMetrics:UIBarMetricsDefault]; 
```

代码适用于 iOS5。我也尝试使用此方法编辑导航栏：

```
@implementation UINavigationBar (UINavigationBarCategory)
-(void)drawRect:(CGRect)rect{
UIImage *img = [UIImage imageNamed:@"bg_actionbar_edit.png"];
[img drawInRect:rect];
}
@end; 
```

然而，这段代码导致我所有的导航栏都发生了变化，这是我不想要的。是否有任何简单的代码可以用来根据导航栏简单地更改 buttonItem 的 BG 颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:56:02.843

设置导航栏的色调以更改导航栏按钮项的颜色：

```
self.navigationController.navigationBar.tintColor = [UIColor grayColor]; 
```

# zend-framework - Doctrine 2 使用关联映射进行分页

> ID：10043588
> 
> 赞同：4
> 
> 时间：2012-04-06T12:37:55.873
> 
> 标签：zend-framework, orm, doctrine, doctrine-orm, associations

我想知道**如何对从 Doctrine 2 中的实体关联映射获得的结果进行分页？**例如

```
class Customer {
  /**
   * @OneToMany(targetEntity="Order")
   */
  private $orders;
} 
```

可以这样使用：

```
$customer->getOrders(); 
```

这将返回一个`Order`对象的集合。

问题是当有大量订单对象时。

我们可以`Doctrine\ORM\Tools\Pagination\Paginator`在构建自定义查询时使用，但是在使用关联映射时我看不到任何方法可以连接到查询生成中。

```
class Paginator {
  /** 
   * @param Query|QueryBuilder $query A Doctrine ORM query or query builder. 
   */
  function __construct(
    //.... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T15:24:31.083

如果您使用 EXTRA_LAZY 获取模式，Doctrine 将不会在水合集合时检索所有对象。它只会在您对集合使用 slice() 方法时检索所需的子集。

```
class Customer {
    /**
     * @OneToMany(targetEntity="Order", fetch="EXTRA_LAZY")
     */
    private $orders;
}

$cust = new Customer;
$orders = $cust->getOrders()->slice(100, 50); 
```

您需要验证它如何与分页交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T11:27:02.857

集合有一个过滤 API，允许从集合中分割部分数据。如果集合尚未从数据库加载，过滤 API 可以在 SQL 级别上工作，以优化对大型集合的访问。[学说过滤集合](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#filtering-collections)

```
class Customer {
  /**
   * @OneToMany(targetEntity="Order")
   */
  private $orders;

  public function getOrders($offset = 0, $limit = 30){

    $criteria = Criteria::create()
                ->setFirstResult($offset)
                ->setMaxResults($limit);

    return $this->orders->matching($criteria);

  }

}

$cust = new Customer;
$orders = $cust->getOrders(50, 100); 
```

# c# - 在 webclient 中编码意外结果

> ID：10043590
> 
> 赞同：4
> 
> 时间：2012-04-06T12:37:58.667
> 
> 标签：c#, encoding, google-translate

我尝试使用 webclient 将单词“香蕉”翻译成 rus

```
private void button1_Click(object sender, EventArgs e)
    {
        Navigate("http://translate.google.ru/translate_a/t?client=x&text=Banana&hl=en&sl=en&tl=ru");
    }

    private void Navigate(String address)
    {
        WebClient client = new WebClient();            
        client.Proxy = WebRequest.DefaultWebProxy;
        client.Credentials = new NetworkCredential("user", "password", "domain");
        client.Proxy.Credentials = new NetworkCredential("user", "password", "domain");
        string _stranslate = client.DownloadString(new Uri(address));
    } 
```

我想在“_stranslate”中看到

> {"sentences":[{"trans":"Банан","orig":"Banana@","translit":"Banan@","src_translit":""}],"src":"en", “服务器时间”：0}

但得到了这个

> {"sentences":[{"trans":"вБОБО","orig":"Banana@","translit":"Banan@","src_translit":""}],"src":"en", “服务器时间”：0}

有人能帮我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T12:54:03.350

尝试检查响应标头，内容类型会告诉您应该使用什么编码。

`Content-Type => text/javascript; charset=KOI8-R`

所以只需添加这一行。

```
client.Encoding = Encoding.GetEncoding(20866); 
```

或者

```
client.Encoding = Encoding.GetEncoding("KOI8-R"); 
```

编码的完整列表可以在[编码类的文档中找到](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)

另一种方法是仅用于[`System.Net.Mime.ContentType`](http://msdn.microsoft.com/en-us/library/system.net.mime.contenttype.aspx)获取字符集。像这样：

```
byte[] data = client.DownloadData(url);
ContentType contentType = new System.Net.Mime.ContentType(client.ResponseHeaders[HttpResponseHeader.ContentType]);
string _stranslate = Encoding.GetEncoding(contentType.CharSet).GetString(data); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T12:44:40.620

在你之前添加这个`client.DownloadString()`：

```
client.Encoding = System.Text.Encoding.UTF8; 
```

当您读取字符串时，您的编码可能会变得混乱。

使用[此 HTTP 标头查看器](http://www.rexswain.com/httpview.html)并输入您的 URL，我在标头中看到以下内容：

```
Content-Type: text/javascript; charset=UTF-8
Content-Language: ru 
```

基本上，您需要找出他们发回的编码并将您的编码设置为匹配。

在调用**之前**设置编码非常重要`DownloadString()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T11:48:01.903

恕我直言，更好的解决方案：添加 URI 查询参数 **oe=UTF-8** 并在任何地方使用 UTF-8

```
var nameValueCollection = new NameValueCollection
{
    {"client", "x"},
    {"text", HttpUtility.UrlEncode(text)},
    {"hl", "en"},
    {"sl", fromLanguage},
    {"tl", toLanguage},
    {"ie", "UTF-8"},
    {"oe", "UTF-8"}
};

string htmlResult;
using (var wc = new WebClient())
{
    wc.Encoding = Encoding.UTF8;
    wc.QueryString = nameValueCollection;
    htmlResult = wc.DownloadString(GoogleAddress);
} 
```

# jquery - Jquery循环问题，在下一个循环之前完成任务

> ID：10043598
> 
> 赞同：0
> 
> 时间：2012-04-06T12:38:40.873
> 
> 标签：jquery, loops, for-loop, while-loop

我正在运行一个简单的循环：

```
 var c=0;

while(c<count){
    theimg = $container.find('.img'+c+'');

    $thisX = theimg.css('top');

    theimg.css({
        'top':'500px',
        'display':'block',
        'opacity':'0'
    });

    theimg.animate({
        'opacity':'1',
        'top':$thisX
    },800,'linear',function(){
        c++;
    });
} 
```

我已经尝试过这个，因为两者都使浏览器崩溃。这让我觉得它正在创建一个无限循环。

我希望循环运行每个元素，一旦动画完成，继续下一个。任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:43:21.927

试试这个：

```
var c=0;

function nexStep(){
  if (c>=count) {
    return;
  }
  var theimg = $container.find('.img'+c+'');
  var $thisX = theimg.css('top');
  theimg.css({
        'top':'500px',
        'display':'block',
        'opacity':'0'
    });

    theimg.animate({
        'opacity':'1',
        'top':$thisX
    },800,'linear',function(){
        c++;
        nexStep();
    });
}
nexStep(); 
```

# php - Uglify-JS 不会使用 shell_exec() 运行

> ID：10043602
> 
> 赞同：3
> 
> 时间：2012-04-06T12:39:16.830
> 
> 标签：php, node.js

我的问题与此类似：

[Nodejs - .node_libraries/ 用于 www-data](https://stackoverflow.com/questions/5943384/nodejs-node-libraries-for-www-data)

我一直在尝试让 php 执行 uglifyjs。我试过了：

```
die(shell_exec('NODE_PATH="/home/app/nodejs/node_modules/"; export NODE_PATH; uglifyjs -o /home/app/public_html/js/profile.min5.js /home/app/public_html/js/profile.js')); 
```

和

```
die(shell_exec('node /home/app/nodejs/node_modules/uglify-js/bin/uglifyjs -o /home/app/public_html/js/profile.min33.js /home/app/public_html/js/profile.js')); 
```

和一堆其他疯狂的组合，但没有任何效果。如果我在 shell 中手动操作，一切正常。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:45:06.817

您是否尝试过查看以下内容（我会选择显而易见的，因为您还没有说出您已经尝试过的内容）：

允许用户 apache/www-data 访问 /home/app ：有时 /home 目录被关闭（chmod 0700）

`safe_mode`在你的服务器上有效吗？从命令行尝试：

```
php -i | grep safe_mode 
```

然后，查看以下输出：

```
phpinfo(); 
```

您使用的是哪个版本的 PHP（可能无关紧要）？

# java - Java：回合制战斗系统（带gui）

> ID：10043605
> 
> 赞同：-2
> 
> 时间：2012-04-06T12:39:38.107
> 
> 标签：java, swing, user-interface, jframe

编辑（2017 年 4 月 3 日）：对不起，那时我是菜鸟。

我正在尝试制作一个回合制战斗系统，玩家在回合中点击按钮。但我似乎无法找到如何编码。下面是我所做的代码。

这里应该发生的是，当我单击攻击按钮（例如）时，下一个回合将是怪物的回合，但是当我单击按钮时 playerTurn 变量不会改变。playerTurn 总是正确的。你能帮我纠正这个吗？这是一个回合制战斗系统。

```
 public class BattleFrame extends JFrame implements ActionListener, Runnable {

    private JButton atkButton = new JButton("Attack");
    private JButton runButton = new JButton("Run");
    private JButton itemButton = new JButton("Item");
    private JButton magicButton = new JButton("Magic");

    private JPanel panelButtons = new JPanel();

private Random rand = new Random();
private Boolean playerTurn;
private Thread t;

public BattleFrame() {
    setSize(480, 390);
    setLayout(null);

            // I have not included the code with the setting of the JButtons
    initPanel(); // initialize the panel with buttons

    setResizable(false);
    setVisible(true);
    playerTurn = true;
    t = new Thread(this);
    t.start();
}

// I'm not so familiar with 'synchronized' but I tried it here but it doesn't change anything
public void actionPerformed(ActionEvent e) {
   Object src = e.getSource();

     if(src.equals(atkButton) && playerTurn) {
          System.out.println("Attack!");
      playerTurn = false;
 }
 else if(src.equals(runButton) && playerTurn) {
      System.out.println("Run!");
      playerTurn = false;
 }

 else if(src.equals(itemButton) && playerTurn) {
      System.out.println("Item");
      playerTurn = false;
 }

 else if(src.equals(magicButton) && playerTurn) {
      System.out.println("Magic");
      playerTurn = false;
 }

}

public void run() {
    while(true) {
       if(playerTurn == false) {
          System.out.println("Monster's turn!"); // just printing whose turn it is
           playerTurn = true;
       }
       else System.out.println("player's turn!");
   }

 }

 public static void main(String[] args) {
    new BattleFrame();

   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:49:22.367

布尔值是一个对象，因此通过标识而不是值进行比较。

```
assert new Boolean (true) == new Boolean(true); 
```

以上将失败，因为两个不同的布尔对象不是同一个对象。

对于一般用途，使用原始类型 boolean，而不是标准库类 Boolean。应该使用布尔值的情况非常少见：它是为了对称而存在的东西之一，而不是任何真正的实际原因。如果确实使用它，则需要使用 a.equals(b) 而不是 a == b。

有关更多详细信息，请参阅：

[http://www.java-samples.com/showtutorial.php?tutorialid=221](http://www.java-samples.com/showtutorial.php?tutorialid=221)

# performance - 使用贪婪的 LINQ 运算符如何改变性能？

> ID：10043607
> 
> 赞同：3
> 
> 时间：2012-04-06T12:39:45.867
> 
> 标签：performance, linq, c#-4.0

使用诸如`ToList,ToLookUp,Distinct`etc 之类的贪婪 LINQ 运算符是否明智？

LINQ 查询执行的最佳实践是什么？您经常使用您的对象`List<>`或将您的所有对象列表到`IEnumerable<>`. 我知道最新的提供了更多的灵活性。

使用内存（LINQ to Objects）时，可以始终使用延迟加载，因为您可以在需要时访问它，而不必担心数据更改、添加或插入，因为引用将在您需要访问时立即执行查询。但这会随着数据库 LINQ 查询（例如 LINQ to EF）而改变。

想要 StackOverflow 用户的意见。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:49:52.750

> LINQ 查询执行的最佳实践是什么？

List 可以通过 index 访问，Lookup 可以通过 Key 访问。这些类型显然可以跨 WCF 边界序列化。延迟的 IEnumerable 不能很好地完成这些事情。

对于 EF 或 LinqToSql，必须在 DataContext 或任何持有 SqlConnection 的东西被释放之前运行它们的查询。

* * *

在我的代码中，我只在方便时将延迟的 IEnumerables 用于方法范围的变量。我将 List 用于属性（有时属性构造 List，但通常它只是由实例支持）和方法返回类型。因为我在做相对昂贵的事情（比如访问数据库或使用 WCF），所以急切地执行内存中的 Linq 查询的性能从来都不是问题。

任何性能问题的最终权威是：`how does it measure?`

# java-me - lwuit 从右到左标签的问题

> ID：10043610
> 
> 赞同：0
> 
> 时间：2012-04-06T12:40:02.773
> 
> 标签：java-me, lwuit, right-to-left, ticker

我试图在带有 lwit 1.5 的标签上设置代码，遇到了这个问题：如果我设置 label.setRTL(true) 然后调用

```
label.startTicker(UIManager.getInstance().getLookAndFeel().getTickerSpeed(), true); 
```

ticker 仅显示标签文本的前 21 个字符，而忽略其余字符。

我试过了：

```
label.setRTL(false);
label.startTicker(UIManager.getInstance().getLookAndFeel().getTickerSpeed(), true); 
```

它显示正常，文本从左到右，但是当我在 FocusListener 中设置它时（因为标签应该在标签接收焦点时启动并在它失去焦点后停止）它只是改变方向（从右到左）。

这就是我所做的：

```
Label test = new Label();
Container c1 = new Container(new FlowLayout());

test.setText("1234567890ABCDEFGHIJ1234567890");
test.setFocusable(true);
test.setRTL(false);
test.addFocusListener(new FocusListener (){

        public void focusGained(Component cmpnt) {
            ((Label)cmpnt).setRTL(false);
            ((Label)cmpnt).startTicker(UIManager.getInstance().getLookAndFeel().getTickerSpeed(), false);
        }

        public void focusLost(Component cmpnt) {
            ((Label)cmpnt).stopTicker();
        }
});
c1.addComponent(test); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:07:23.757

查看 setLabelFor，它会在测试获得焦点时标记测试标签。您可能应该在外观类中全局设置 RTL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:55:18.860

我发现了问题。发生错误的方向是因为我在将标签添加到容器 (c1) 之前实现了 focusListener。所以我只是这样做了：

```
c1.addComponent(test);
test.addFocusListener(new FocusListener (){

    public void focusGained(Component cmpnt) {
        ((Label)cmpnt).setRTL(false);
        ((Label)cmpnt).startTicker(UIManager.getInstance().getLookAndFeel().getTickerSpeed(), false);
    }

    public void focusLost(Component cmpnt) {
        ((Label)cmpnt).stopTicker();
    }
}); 
```

它很有效。事实上，我从 Label 类源代码（第 149 ~ 153 行）中得到了这个想法：

```
// solves the case of a user starting a ticker before adding the component
    // into the container
    if(isTickerEnabled() && isTickerRunning() && !isCellRenderer()) {
        getComponentForm().registerAnimatedInternal(this);
    } 
```

这部分不起作用，但我不知道为什么。只是希望有人修复这个错误。

# json - MVC4：在 Json 中包含对象名称

> ID：10043611
> 
> 赞同：4
> 
> 时间：2012-04-06T12:40:03.883
> 
> 标签：json, json.net, asp.net-mvc-4, asp.net-web-api

我有一个关于 MVC4 (beta) 问题的问题，我一直在努力解决一段时间。问题是我想创建一个带有为我的 webapi 添加的对象名称的 json。必须创建 json 这是因为接收方需要这个。我的 .NET/MVC 知识有限，请多多包涵。我尝试搜索该主题，但由于 MVC4 仍处于测试阶段，因此很难找到有关该主题的好信息。

我已经在我的解决方案中导入了 JSON.NET 格式化程序，但这并没有添加对象名称

现在在 MVC4 中创建的 json：

```
[{"ID":36,"Name":"Test3","Description":"Description Test3"},{"ID": 37,"Name": "Test4","Description": "Description Test4"}] 
```

我希望 json 看起来像这样：

```
{"Goal":[{"ID":36,"Name":"Test3","Description":"Description Test3"},{"ID": 37,"Name": "Test4","Description": "Description Test4"}]} 
```

所以我喜欢将对象名称（目标）包含在 json 中。

我为此使用的 api 控制器中的代码是：

```
 StoreDBContext db = new StoreDBContext();

    //
    // GET /api/goals
    public IQueryable<Goals> Get()
    {
        return db.Goals;
    } 
```

我假设我需要在某个地方循环添加对象名称，但我不确定如何......希望有人可以帮助我解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:48:33.630

返回如下内容：

```
new { Goal = db.Goals().AsEnumerable().ToList() } 
```

您可以使用匿名对象添加不在对象中的属性和内容。

如果您希望它正确反序列化，您也可以为 JSON.NET 编写自定义转换器，但如果您不关心输出的反序列化，上述解决方案将起作用。

# c# - 以编程方式设置 Mozilla Firefox 的默认主页？

> ID：10043616
> 
> 赞同：1
> 
> 时间：2012-04-06T12:40:49.110
> 
> 标签：c#, .net

我知道如何为 Google Chrome 和 Internet Explorer 设置默认主页，但我在 Google 和 Stackoverflow 上搜索了有关如何使用 Mozilla Firefox 实现这一点的可能答案，但没有机会。

我想知道是否有一种可能的方法可以使用 C# 以编程方式为 Mozilla Firefox 浏览器设置默认起始页（但我不知道 Firefox 将其主页存储在哪里......）

如何以编程方式设置/更改 Mozilla Firefox 的默认主页？

比你提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:08:16.050

您需要做的是以编程方式编辑 Firefox 用户配置文件中的 prefs.js 文件。

它可以在目录 C:\Users\ [USERNAME]\AppData\Roaming\Mozilla\Firefox\Profiles\ [Some Subfolder] 中找到

您将需要添加或编辑如下所示的行： user_pref("browser.startup.homepage", "www.google.com");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T15:36:07.903

我知道问题已得到解答，但也许下一个编码人员可能需要一个来源。

```
 string firefox = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "Mozilla\\Firefox\\Profiles");
        if (Directory.Exists(firefox))
        {
            FileInfo di = new DirectoryInfo(firefox).GetDirectories()[0].GetFiles("prefs.js")[0];
            StreamReader sr = di.OpenText();
            RichTextBox rb = new RichTextBox();
            rb.Text = sr.ReadToEnd();
            sr.Close();
            string[] s = rb.Lines;
            for (int i = 0; i < rb.Lines.Length; i++)
            {
                if (rb.Lines[i].StartsWith("user_pref(\"browser.startup.homepage\""))
                {
                    s[i] = "user_pref(\"browser.startup.homepage\", \"http:\\\\www.somesite.com\");";
                    break;
                }
            }
            File.Delete(di.FullName);
            File.WriteAllLines(di.FullName, s);
        } 
```

这将更改 Firefox 主页。我希望我能帮助别人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:49:44.133

您可能希望使用控制台命令来查找包含您的主页 URL 的文件

我会尝试的第一件事：将您的主页设置为不存在的内容，以防止使用相同的 URL 访问 cookie，例如 www.testfirstnamelastname.com

然后转到您的终端/命令行并输入

grep -lr "www.testfirstnamelastname.com" *

如果要搜索受管理员保护的目录，请在命令前添加 sudo ..

希望这可以帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T12:53:27.853

检查以下链接

[http://chiragrdarji.wordpress.com/2007/03/26/add-to-favorite-in-firefox-and-ie/](http://chiragrdarji.wordpress.com/2007/03/26/add-to-favorite-in-firefox-and-ie/)

不需要任何代码。

# spring - 无法解决：java.lang.NumberFormatException：对于输入字符串：“”

> ID：10043619
> 
> 赞同：1
> 
> 时间：2012-04-06T12:40:53.430
> 
> 标签：spring, jakarta-ee

我在这里不断收到此错误：

```
SEVERE: java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
at java.lang.Integer.parseInt(Integer.java:504)
at java.lang.Integer.parseInt(Integer.java:527)
at com.myapp.cmt.web.ContentController.saveContent(ContentController.java:129) 
```

当`categories`我的页面上的下拉菜单中没有选择任何选项时，就会发生这种情况。我正在检查长度，为什么它还在尝试处理`parseInt()`？

```
 String[] category = request.getParameterValues("categories");
        if (category.length > 0) {
            content.addCategory(contentDao.findCategory(Integer.parseInt(category[0])));
        } 
```

**我的 HTML**

```
 <strong>Category</strong><br/>
    <select name="categories">
        <option></option>
    <c:forEach items="${categories}" var="category">
        <option value="${category.id}" <c:if test="${content.hasCategory(category)}"> CHECKED</c:if>>${category.name}</option>
    </c:forEach>
    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:47:55.477

返回类别的单个空元素。在您的 if 语句中，您还应该检查`category[0] != null && !"".equals(category[0].trim())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:51:49.710

数组的长度只是故事的*一半*……您还必须检查数组*中的内容。*试试这样的代码：

```
if (category.length > 0 &&
  category[0] != null &&
  category[0].trim().length() > 0)
    content.addCategory(contentDao.findCategory(Integer.parseInt(category[0])));
} 
```

# php - 使用 jQuery php mysql 提交多个表单

> ID：10043620
> 
> 赞同：1
> 
> 时间：2012-04-06T12:41:01.600
> 
> 标签：php, jquery, forms

我有任何回答/问题的页面。我检索管理员的问题列表。管理员看到这个。现在我需要发送每个问题的答案。所以我为每个问题提出`textarea`并形成后行动。现在我需要在发送问题消息的答案时，如果将消息发送到外部 php 文件 = true；消息（ID）删除（jquery 上滑效果）。为此，我有 jquery 提交表单代码（没有刷新页面），但我有大问题。这仅适用于一种形式！并且不适用于所有列表形式（问题+答案形式）。如何将我的代码用于多种形式？我选择了正确的方式？

html代码：

```
<form action="insert.php?id=42" id="forms" method="POST" name="form">
<div id="box">
<div class="messagequestion"></div>
<div class="messagereply"><textarea></textarea><input type="submit" class="submit" name="submit" value="submit"></div>
</div>
</form>
<form action="insert.php?id=45" id="forms" method="POST" name="form">
<div id="box">
<div class="messagequestion"></div>
<div class="messagereply"><textarea></textarea><input type="submit" class="submit" name="submit" value="submit"></div>
</div>
</form>
<form action="insert.php?id=48" id="forms" method="POST" name="form">
<div id="box">
<div class="messagequestion"></div>
<div class="messagereply"><textarea></textarea><input type="submit" class="submit" name="submit" value="submit"></div>
</div>
</form>
<form action="insert.php?id=50" id="forms" method="POST" name="form">
<div id="box">
<div class="messagequestion"></div>
<div class="messagereply"><textarea></textarea><input type="submit" class="submit" name="submit" value="submit"></div>
</div>
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:45:53.270

Your major issue is probably that you are trying to reuse ids. All the forms have the id of `"forms"` and you are also sharing the id `"box"`.

All ids should uniquely identify an element. Use a class when you need to classify an element. I'd recommend you change `id="forms"` on all the forms to `class="reply_form"` and then also change `id="box"` on all the divs to `class="reply_box"`. Then change styles set for #forms and #box to those set for .reply_form and .reply instead.

EDIT - tweaks made in jsfiddle after some discussion with the OP.

[http://jsfiddle.net/gvnfg/5/](http://jsfiddle.net/gvnfg/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:49:12.880

只需更改选择器。`id`属性在 html 中必须是唯一的

```
$("[name='form']").submit(function() {
    $this = $(this);    
    $.ajax({
        type: 'POST',
        url: $(this).attr('action'),
        data: $(this).serialize(),
        cache: false,       
        beforeSend: function() {
            $('#loading').show();
            $('#result').hide();
        },
        success: function(data) {
            if(data==1){
              $('#loading').hide();
              $('#result').fadeIn('slow').html("ok");
              $('#result').addClass('true');
              $this.slideUp(1000);
            }
        else {
            $('#loading').hide();
            $('#result').fadeIn('slow').html(data);
            $('#result').addClass('errors');
        }}
    });
     e.preventDefault();
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-06T12:46:49.073

使用 Jquery`.each()`方法：

```
$(document).ready(function() {
    $('#forms').each(function() {

       this.submit(function() {
           $.ajax({ ... });
       });
    });

}) 
```

# visual-studio - 如何在 Visual Studio 中复制监视窗口的内容并将其复制到文件中（其中存在分支信息）

> ID：10043626
> 
> 赞同：0
> 
> 时间：2012-04-06T12:41:34.570
> 
> 标签：visual-studio, file, visual-studio-2008, visual-studio-debugging, watch

我正在使用 VS2008 调试 C++。用于调试的监视窗口将所有动态值存储在各种对象、数组、变量等中。

我想将此监视窗口上的全部内容复制到一个文件中，以便我可以将调试上下文转发给其他人。

如果我只选择所有 (CTRL + A)，然后将内容粘贴到文件中，那么我不会获得分支信息（即，像对象这样的信息可能包含各种子对象）。

任何人都可以让我知道如何在 VS2008 中执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:48:12.117

如果要包含分支信息，则必须手动展开每个节点。当您使用`CTRL+A`and`CTRL+C`时，剪贴板将仅包含当前在监视窗口中可见的内容。

# c# - 实体未添加到 Azure 表，但行键和分区键已正确添加

> ID：10043627
> 
> 赞同：1
> 
> 时间：2012-04-06T12:41:37.333
> 
> 标签：c#, azure, azure-storage, azure-table-storage

我正在尝试将订单实体添加到 Azure 表。当我添加实体时，它只添加分区键和行键的值。任何帮助深表感谢。这是我的代码。

```
class OrderEntity : TableServiceEntity
{
    public int customerID;
    public int productID;
    public Double price;
    public String status;
} 
```

然后在一个单独的班级

```
 OrderEntity order = new OrderEntity();
        order.customerID = retrievedCustomer.id;
        order.productID = selectedProduct.id;
        order.price = Convert.ToDouble(selectedProduct.price);
        order.PartitionKey = retrievedCustomer.id.ToString();
        order.RowKey = counter.ToString();
        order.status = "Processing Order";

        serviceContext.AddObject("orders", order);

        // Submit the operation to the table service
        serviceContext.SaveChangesWithRetries(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T13:21:37.267

您需要使用属性而不是公共字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T16:03:50.517

Mark Rendle 是正确的，只支持公共属性而不支持字段。

因为我在 Microsoft 客户端上遇到了限制，所以我编写了一个备用 Azure 表存储客户端 Lucifure Stash，它具有许多高级抽象。Lucifure Stash，支持 > 64K 的数据列、列表、数组、枚举、序列化、变形、公共和私有属性和字段等。它免费供个人使用，可以从[http://www.lucifure.com](http://www.lucifure.com) 或通过 NuGet.com 下载。

# facebook - getUser() 在第一页加载时返回 0

> ID：10043628
> 
> 赞同：1
> 
> 时间：2012-04-06T12:41:46.127
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

当用户连接 Facebook 并访问我的页面时，getUser() 返回 0。

我使用这段代码：

```
include 'includes/php/facebook.php';
$app_id = "APP_ID";
$app_secret = "SECRET_KEY";
$facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => true 
));    

$user = $facebook->getUser();
if($user){
    try {
        $user_profile = $facebook->api('/me');
    }catch(FacebookApiException $e) {
        error_log($e);
    }
} 
```

当页面完全加载时，FB.Event 返回“已连接”。

```
FB.Event.subscribe('auth.login', function(response) {
    FB.api('/me', function(response) {
         window.location.reload();
     });

}); 
```

然后页面加载了两次。在此之后，用户与我的页面连接。

这是正确的，页面必须加载两次？我认为这对用户不友好。知道别人另一种可能吗？

为什么 getUser() 在第一页加载时返回 0 ？

编辑2：

当我使用服务器端身份验证中的示例时。并且用户与 Facebook 连接，我得到了用户详细信息。

```
 <?php 

 $app_id = "YOUR_APP_ID";
 $app_secret = "YOUR_APP_SECRET";
 $my_url = "YOUR_URL";

 session_start();
 $code = $_REQUEST["code"];

 if(empty($code)) {
   $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
   $dialog_url = "http://www.facebook.com/dialog/oauth?client_id=" 
   . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
   . $_SESSION['state'];

 echo("<script> top.location.href='" . $dialog_url . "'</script>");
}

if($_REQUEST['state'] == $_SESSION['state']) {
 $token_url = "https://graph.facebook.com/oauth/access_token?"
   . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
   . "&client_secret=" . $app_secret . "&code=" . $code;

 $response = file_get_contents($token_url);
 $params = null;
 parse_str($response, $params);

 $graph_url = "https://graph.facebook.com/me?access_token=" 
   . $params['access_token'];

 $user = json_decode(file_get_contents($graph_url));
 echo("Hello " . $user->name);
}
else {
  echo("The state does not match. You may be a victim of CSRF.");
}

?> 
```

当用户未与 Facebook 连接时，我会在返回页面之前收到对话框。我也可以在没有对话框的情况下查询与 facebook 的连接吗？或者我可以以其他方式生成 CSRF 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T22:30:19.880

我不确定您是否只是没有发布验证用户的代码，或者您只是不做那部分.. 构造 Facebook 对象是不够的，您需要使用 facebook 验证用户。

您是否阅读过身份验证文档？您可以采用两种类型的流程，[服务器端](http://developers.facebook.com/docs/authentication/server-side/)和[客户端](http://developers.facebook.com/docs/authentication/client-side/)，从您的代码看来，您需要使用服务器端流程才能在 php 端为用户提供访问令牌，然后调用*getUser*方法应该返回你想要的用户对象。

如果我弄错了并且您正在对用户进行身份验证，那么请编辑您的问题并添加您使用的代码。

# unit-testing - 使用排序测试集合相等性

> ID：10043630
> 
> 赞同：0
> 
> 时间：2012-04-06T12:41:49.387
> 
> 标签：unit-testing, testing, junit, junit4, hamcrest

我正在编写简单的测试来检查方法返回下面的一些接口`Collection`。我试图尽可能地抽象这个集合的内部表示，以便这个测试在两种情况下都能通过：当方法返回时`List`和`Set`.

`Set`应该订购（或`LinkedHashSet`支持`LinkedHashMap`）`Set`所以我也必须测试订单。所以一般我想写这样的测试：

```
assertThat(returnedList, containsOrdered('t1", "t2", "t3")); 
```

如果两个集合不是“相同的”（即相同顺序中的相同值），这将失败。

我发现 Hamcrest 库在这种情况下很有用，但是我被困在它的文档中。任何帮助将不胜感激，但是`Matcher`如果可能的话，我会尽量避免编写 CollectionTestUtil 或我自己的 Hamcrest。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:18:15.267

JUnit 的[org.junit.Assert](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)包含`assertArrayEquals`针对不同类型的多个 -implementations，因此您可以执行以下操作：

```
 Collection<String> returnedList = new ArrayList<String>(); //Replace with call to whatever returns the ordered collection       
    Assert.assertArrayEquals(new Object[]{"t1", "t2", "t3"}, returnedList.toArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T21:14:55.313

你快到了。

```
assertThat(returnedList, contains("t1", "t2", "t3")) 
```

会做的。与 比较`containsInAnyOrder`。

# c# - C# - 将一个空的下拉列表分配给一个完整的下拉列表不起作用

> ID：10043635
> 
> 赞同：0
> 
> 时间：2012-04-06T12:42:13.027
> 
> 标签：c#, webforms, drop-down-menu

我的表单上有两个 DropDownLists。两者都没有。在我的 Page_Load 事件中，我将它们分配给从私有方法返回的 DropDownList 对象。但是当页面加载时，两个下拉列表仍然是空的。我在返回填充下拉列表的方法内部进行了调试，它们包含项目。这样做有什么问题吗？

编码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ddlUserTypes = UserTypesList();
    }
}

   private DropDownList UserTypesList()
{
    DropDownList ddList = new DropDownList();
    StaticDataProvider stDataProv = new StaticDataProvider();
    ddList.DataSource = stDataProv.UserTypes();
    ddList.DataTextField = "Value";
    ddList.DataValueField = "Key";
    ddList.DataBind();

    return ddList;
} 
```

此外，当我 Response.Write() ddlUserTypes 的项目时，我会得到页面上列出的所有项目。物品似乎在那里，它们只是不可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T12:48:57.983

修复代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        UserTypesList(ddlUserTypes);
    }
}

   private void UserTypesList(DropDownList ddList)
{

    StaticDataProvider stDataProv = new StaticDataProvider();
    ddList.DataSource = stDataProv.UserTypes();
    ddList.DataTextField = "Value";
    ddList.DataValueField = "Key";
    ddList.DataBind();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:44:50.850

Can we see your code? Web Forms or MVC ?

Have you tried setting the DataValueField and the DataTextField properties of the drop down list also are you calling the .DataBind() of the dropdown?

Really need to see your code in order to provide an answer..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:04:27.163

```
if (!IsPostBack)
    {
        UserTypesList(ddlUserTypes);
    }

private void UserTypesList(DropDownList ddList)
{
    StaticDataProvider stDataProv = new StaticDataProvider();
    ddList.DataSource = stDataProv.UserTypes();
    ddList.DataTextField = "Value";
    ddList.DataValueField = "Key";
    ddList.DataBind();
} 
```

您创建一个控件的新实例，然后简单地从页面中将其分配给当前实例。当您创建一个新控件时，您必须使用`Controls.Add`，这可能会在幕后使用其他东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T12:55:07.700

这是一个猜测，没有看到任何代码。尝试在预渲染事件处理程序而不是负载处理程序中执行此操作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-06T12:45:24.470

try

```
DropDownLists.Items.Refresh 
```

# python - 有什么理由不使用“+”来连接两个字符串？

> ID：10043636
> 
> 赞同：135
> 
> 时间：2012-04-06T12:42:33.703
> 
> 标签：python, string-concatenation, anti-patterns

`+`Python 中一个常见的反模式是在循环中连接字符串序列。这很糟糕，因为 Python 解释器必须为每次迭代创建一个新的字符串对象，并且最终会花费二次时间。（CPython 的最新版本在某些情况下显然可以对此进行优化，但其他实现则不能，因此不鼓励程序员依赖它。）`''.join`是做到这一点的正确方法。

但是，我听说过（[包括 Stack Overflow 上的此处](https://stackoverflow.com/questions/10001301/list-slicing-python/10001401#10001401)）您*永远不*应该使用`+`字符串连接，而是始终使用`''.join`或格式字符串。如果您只连接两个字符串，我不明白为什么会出现这种情况。如果我的理解是正确的，它不应该花费二次时间，而且我认为`a + b`它比`''.join((a, b))`or更干净，更具可读性`'%s%s' % (a, b)`。

`+`使用连接两个字符串是一种好习惯吗？还是有我不知道的问题？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-04-06T13:11:17.533

*用 . 连接两个*字符串并没有错`+`。确实比阅读更容易`''.join([a, b])`。

你是对的，尽管连接两个以上的字符串`+`是一个 O(n^2) 操作（与 O(n) for 相比`join`），因此效率低下。然而，这与使用循环无关。甚至`a + b + c + ...`是 O(n^2)，原因是每个连接都会产生一个新字符串。

CPython2.4 及更高版本试图缓解这种情况，但`join`在连接超过 2 个字符串时仍然建议使用它。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-04-06T12:46:04.690

Plus operator is perfectly fine solution to concatenate **two** Python strings. But if you keep adding more than two strings (n > 25) , you might want to think something else.

`''.join([a, b, c])` trick is a performance optimization.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-06T14:28:57.400

与多人一起工作时，有时很难确切地知道发生了什么。使用格式字符串而不是串联可以避免一个特殊的烦恼，这种烦恼对我们来说已经发生了很多次：

比如说，一个函数需要一个参数，而你写它期望得到一个字符串：

```
In [1]: def foo(zeta):
   ...:     print 'bar: ' + zeta

In [2]: foo('bang')
bar: bang 
```

因此，这个函数可能会在整个代码中经常使用。您的同事可能确切地知道它的作用，但不一定完全了解内部结构，并且可能不知道该函数需要一个字符串。所以他们最终可能会这样：

```
In [3]: foo(23)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/izkata/<ipython console> in <module>()

/home/izkata/<ipython console> in foo(zeta)

TypeError: cannot concatenate 'str' and 'int' objects 
```

如果您只使用格式字符串就没有问题：

```
In [1]: def foo(zeta):
   ...:     print 'bar: %s' % zeta
   ...:     
   ...:     

In [2]: foo('bang')
bar: bang

In [3]: foo(23)
bar: 23 
```

对于定义 的所有类型的对象也是如此`__str__`，也可以传入：

```
In [1]: from datetime import date

In [2]: zeta = date(2012, 4, 15)

In [3]: print 'bar: ' + zeta
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/izkata/<ipython console> in <module>()

TypeError: cannot concatenate 'str' and 'datetime.date' objects

In [4]: print 'bar: %s' % zeta
bar: 2012-04-15 
```

所以是的：如果您可以使用格式字符串*，请*使用Python 提供的功能。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-06T13:24:42.640

永远不应该使用 + 进行字符串连接，而是始终使用 ''.join 的假设可能是一个神话。确实， using`+`创建了不可变字符串对象的不必要的临时副本，但另一个不经常引用的事实是，`join`在循环中调用通常会增加`function call`. 让我们举个例子。

创建两个列表，一个来自链接的 SO 问题，另一个来自更大的捏造

```
>>> myl1 = ['A','B','C','D','E','F']
>>> myl2=[chr(random.randint(65,90)) for i in range(0,10000)] 
```

让我们创建两个函数，`UseJoin`并`UsePlus`使用各自的`join`功能`+`。

```
>>> def UsePlus():
    return [myl[i] + myl[i + 1] for i in range(0,len(myl), 2)]

>>> def UseJoin():
    [''.join((myl[i],myl[i + 1])) for i in range(0,len(myl), 2)] 
```

让我们用第一个列表运行 timeit

```
>>> myl=myl1
>>> t1=timeit.Timer("UsePlus()","from __main__ import UsePlus")
>>> t2=timeit.Timer("UseJoin()","from __main__ import UseJoin")
>>> print "%.2f usec/pass" % (1000000 * t1.timeit(number=100000)/100000)
2.48 usec/pass
>>> print "%.2f usec/pass" % (1000000 * t2.timeit(number=100000)/100000)
2.61 usec/pass
>>> 
```

它们具有几乎相同的运行时间。

让我们使用 cProfile

```
>>> myl=myl2
>>> cProfile.run("UsePlus()")
         5 function calls in 0.001 CPU seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.001    0.001    0.001    0.001 <pyshell#1376>:1(UsePlus)
        1    0.000    0.000    0.001    0.001 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {len}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        1    0.000    0.000    0.000    0.000 {range}

>>> cProfile.run("UseJoin()")
         5005 function calls in 0.029 CPU seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.015    0.015    0.029    0.029 <pyshell#1388>:1(UseJoin)
        1    0.000    0.000    0.029    0.029 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {len}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
     5000    0.014    0.000    0.014    0.000 {method 'join' of 'str' objects}
        1    0.000    0.000    0.000    0.000 {range} 
```

而且看起来使用 Join 会导致不必要的函数调用，这可能会增加开销。

现在回到这个问题。是否应该在所有情况下都不鼓励使用`+`over ？`join`

我相信不，应该考虑到一些事情

1.  有问题的字符串的长度
2.  串联操作数。

并且在开发中过早的优化是邪恶的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-04T12:49:41.843

根据 Python 文档，使用 str.join() 将使您在 Python 的各种实现中保持性能一致性。尽管 CPython 优化了 s = s + t 的二次行为，但其他 Python 实现可能不会。

> **CPython 实现细节**：如果 s 和 t 都是字符串，一些 Python 实现（例如 CPython）通常可以对 s = s + t 或 s += t 形式的赋值执行就地优化。如果适用，这种优化会大大降低二次运行时间的可能性。这种优化既依赖于版本，也依赖于实现。对于性能敏感的代码，最好使用 str.join() 方法，该方法可确保跨版本和实现的线性连接性能一致。

[Python 文档中的序列类型](https://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)（参见脚注 [6]）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-06T13:28:06.730

我做了一个快速测试：

```
import sys

str = e = "a xxxxxxxxxx very xxxxxxxxxx long xxxxxxxxxx string xxxxxxxxxx\n"

for i in range(int(sys.argv[1])):
    str = str + e 
```

并计时：

```
mslade@mickpc:/binks/micks/ruby/tests$ time python /binks/micks/junk/strings.py  8000000
8000000 times

real    0m2.165s
user    0m1.620s
sys     0m0.540s
mslade@mickpc:/binks/micks/ruby/tests$ time python /binks/micks/junk/strings.py  16000000
16000000 times

real    0m4.360s
user    0m3.480s
sys     0m0.870s 
```

显然有一个优化`a = a + b`案例。它没有表现出人们可能怀疑的 O(n^2) 时间。

所以至少在性能方面，使用`+`是好的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-04-18T15:04:38.663

我将以下内容与 python 3.8 一起使用

```
string4 = f'{string1}{string2}{string3}' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-29T12:34:28.020

**''.join([a, b])**是比**+**更好的解决方案。

因为代码的编写方式应该不会损害 Python 的其他实现（PyPy、Jython、IronPython、Cython、Psyco 等）

form a += b 或 a = a + b 即使在 CPython 中也是脆弱的，并且在**不使用** **引用计数的实现中根本不存在** *（引用计数是一种存储引用、指针或句柄数量的技术 a资源，例如对象、内存块、磁盘空间或其他资源*）

[https://www.python.org/dev/peps/pep-0008/#programming-recommendations](https://www.python.org/dev/peps/pep-0008/#programming-recommendations)

# objective-c - 如何在 Objective-C 中使用 NSXMLParser 获取标签参数？

> ID：10043644
> 
> 赞同：1
> 
> 时间：2012-04-06T12:43:13.810
> 
> 标签：objective-c, ios

在`XML`结构中我有：

```
<font fontsize="10" fontcolor="#000000" fontface="file.ttf"/> 
```

我如何使用字体大小、颜色和面部`NSXMLParser`？当然我有标准的实现

```
-(id)init
{
    self = [super init];

    parser = [[NSXMLParser alloc] initWithContentsOfURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"myxmlfile" ofType:@"xml"]]];

    [parser setDelegate:self];
    [parser parse];

    return self;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 
{
    NSLog(@"Started Element %@", elementName);
    element = [NSMutableString string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    NSLog(@"Found an element named: %@ with a value of: %@", elementName, element);
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (element == nil)
        element = [[NSMutableString alloc] init];
    [element appendString:string];
} 
```

它适用于`<mytag>something</mytag>`. 如何获取标签属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:04:55.570

你`attributeDictionary`从

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 
```

包含它们。打个比方`[atrributeDict objectForKey:@"fontColor"]`_

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T13:13:43.183

NSXMLParserDelegate 协议有一个[`– parser:foundAttributeDeclarationWithName:forElement:type:defaultValue:`](http://developer.apple.com/library/ios/documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSXMLParserDelegate/parser%3afoundAttributeDeclarationWithName%3aforElement%3atype%3adefaultValue%3a)方法，解析器使用该方法告诉委托每个属性。在您的委托中实现该方法，您将获得属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T12:46:24.193

使用 xpathQuery.. 它是 XML 解析最简单、最快的解决方案.. 这将解决您的问题.. 这是链接..

[http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html](http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html)

顺便说一句：对于“查询”部分，您需要将“//”作为根元素，“//root//item”作为内部层次结构。

# mysql - Batch Insert with generated keys deals duplicate entry on unique

> ID：10043649
> 
> 赞同：4
> 
> 时间：2012-04-06T12:43:23.423
> 
> 标签：mysql, batch-file, insert, key, generated

I am using MySql with JDBC...the below is my table definition

```
CREATE TABLE `A` (
  `id` int(255) NOT NULL AUTO_INCREMENT,
  `type` varchar(255) NOT NULL,
  `value` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unq` (`type`(50),`value`(50))
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; 
```

At the moment i am using statement in order to batch insert rows to that table with `RETURN_GENERATED_KEYS` option in order to relate the id to other table.

I want the ability to perform that operation but when / if DUPLICATE ENTRY occur ( the same combination of type & value ) to continue with the transaction as like nothing happens but still to get the generated keys, and if DUPLICATE ENTRY occur retrieve the existing key.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:48:59.293

使用`IGNORE`关键字

```
INSET IGNORE .... 
```

如引用[`Mysql`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

> 如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告。例如，如果没有 IGNORE，复制表中现有 UNIQUE 索引或 PRIMARY KEY 值的行会导致重复键错误并且语句被中止。使用 IGNORE，行仍然没有插入，但不会发出错误。

替代语法

[插入 ... 在重复密钥更新时](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)

# excel - #VALUE error when trying to multiply a field range

> ID：10043650
> 
> 赞同：1
> 
> 时间：2012-04-06T12:43:28.780
> 
> 标签：excel

Very simple problem in MS Excel (that is what I think). Following formula: =SUM((D9:D26)*1)

Gives me a #VALUE! error.

Why? Cannot I not multiply the sum of a bunch of fields?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:45:30.360

You need to multiply outside the `SUM(...)` call, not inside.

Remove the outer parentheses.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:45:59.010

Unless I am missing something, the formula you are looking for is `=SUM(D9:D26)*1`

The idea is to multiply the sum which is computed with this formula `SUM(D9:D26)` and a multiplier of your choice by adding `* 1` *outside* the first formula. An extra set of parentheses prevents Excel from *parsing* the formula correctly.

# node.js - How to design chat based application with nodejs, redis and mongodb?

> ID：10043663
> 
> 赞同：5
> 
> 时间：2012-04-06T12:44:50.950
> 
> 标签：node.js, mongodb, redis, publish-subscribe

We have an application for iOS which has a chat feature. Currently it works with long poll. And now we are trying to modify it to work with sockets. When it comes to socket, we have started for a research and it seems that one of the best option is using nodejs with socket.io. Then we have used redis pub/sub to manage the message delivery and storage.

After a few researching on redis, the recommended usage suggests the stored data should fit on memory. But, we have a little big database. We would like to store the whole chat history. So we have started to plan to use redis as a cache database, which will store the online user's chat history (may be not whole of them) and write the actual conversation after getting offline from redis to mongodb/simpledb (or instantly both of them).

So as a summary, we are about to decide to use nodejs and redis pub/sub to deliver messages, redis as a cache database, and mongodb to store the whole conversation.

What do you think about the design? Is this acceptable? Or, if there is a better way you can suggest, can you please explain a little more?

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:05:15.520

对于聊天系统，您的想法很大。如果你认为你将达到一百万用户，那就去吧。还要考虑可用性——您的系统将如何处理机器故障？

# ruby-on-rails - belongs_to with condition to find master parent doesn't work

> ID：10043665
> 
> 赞同：0
> 
> 时间：2012-04-06T12:45:23.520
> 
> 标签：ruby-on-rails, activerecord, associations

I have these two activerecord models:

```
Milestone
  has_many :nodes

Node
  belongs_to :milestone 
```

Milestones can have multiple nodes because it's possible to create aliases. I then need a way to find the master node.

I tried two options but none of them work completely:

Option 1: add an association :node :

```
 belongs_to :node, conditions: {is_alias: true} 
```

Looks obvious to me but doesn't work at all. When I do @milestone.node, the result is "nil"

Option 2: create a node method:

```
 def node
     Node.where(milestone_id: self.id, is_alias: false)
  end 
```

This works halfway:

@milestone.node => returns the right node

@milestone.node.milestone => returns an error: undefined method `milestone' for #

I need a "clean" way to be able to find the master parent milestone information.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:13:43.630

您需要 Node 模型中的一些范围和类方法

```
scope :aliases, where(is_alias: true)
scope :masters, where(is_alias: false)

def self.master
  masters.first
end 
```

所以你可以这样使用

```
@milestone.nodes.master  # => master node
@milestone.nodes.aliases # => aliases 
```

# ruby-on-rails - rails active_link_to gem functioning on params

> ID：10043668
> 
> 赞同：2
> 
> 时间：2012-04-06T12:45:29.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, gem, link-to

I'm using the Rails gem `active_link_to` for determining the active URL for menus. It works great on straight forward links such as `'/controller/action'` but how can I do it similarly for particular param?

Ie `/controller/action?user=all`

Or is there a better gem that can provide this?

[https://github.com/twg/active_link_to](https://github.com/twg/active_link_to)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:15:34.650

您可以使用 gem 的 Regex 功能，具体取决于您的代码的组织方式。

```
<%= active_link_to("Link Text", some_place_path, :active => /#{Regexp.escape(@param_value)}/, class: "blogYear") %> 
```

如果要动态输出参数或参数值，则可以使用上述方法在正则表达式中执行代码。

# django - 是否可以在 Django 的表单实例中限制选择字段

> ID：10043678
> 
> 赞同：0
> 
> 时间：2012-04-06T12:46:11.773
> 
> 标签：django, django-forms, django-views, django-models

我有一个表单，其中包含一个名为 level 的选择字段，允许在 0-3 之间选择我想要动态“限制”的选项。这可能吗？

视图的伪代码将包含如下内容：

```
form = new instance of myform
allowed_level = 2
form.level maximum value =< allowed_level 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:56:02.057

当然，您可以在创建表单时动态设置验证标准：（请注意：这不是一个完整的示例，因为我不确定您的设置）

```
class MyForm(forms.Form):

    level = ...

    def __init__(self, *args, **kwargs, allowed_level=None):
        self.allowed_level = allowed_level
        super(MyForm, self).__init__(*args, **kwargs)

    def clean_level(self):
        data = self.cleaned_data['level']
        # Here you can play with what you want to allow
        if level > self.allowed_level:
            raise forms.ValidationError("A problem with level value")
        return data 
```

并正常使用您的视图

```
def my_view(request, ...):
    form = MyForm(allowed_level=2)
    if form.is_valid():
        ... 
```

# c# - wpf 不支持异常

> ID：10043689
> 
> 赞同：1
> 
> 时间：2012-04-06T12:47:15.520
> 
> 标签：c#, wpf, dispatcher

我有一个 mvvm 应用程序，

**在视图模型中：**

```
 public CommandViewModel()         
    {
        Messenger.Default.Register<CustomerSavedMessage>(this, message =>
        {
            Customers.Add(message.UpdatedCustomer);
        });
    } 

    private ObservableCollection<Customer> _customers;
    public ObservableCollection<Customer> Customers 
    {
        get { return _customers; }
        set
        {
            _customers = value;
            OnPropertyChanged("Customers");
        }
    } 
```

在我看来，客户被绑定到一个组合框。

在不同的视图模型中，当我尝试处理 Register 的处理程序委托中的消息时，我在不同的线程上引发了 CustomerSavedMessage，上面抛出了一个不支持的异常，并带有以下消息：

```
 {"This type of CollectionView does not support changes to its SourceCollection from a thread different from the Dispatcher thread."} 
```

我显然需要使用 Dispatcher 对象进行跨线程操作，但我无法从 viewmodel 弄清楚这是如何完成的。

我还认为框架会知道如何处理过度绑定之间的交叉线程..

如何在 Dispatcher 线程上执行 Customers.Add(message.UpdatedCustomer) ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:56:21.357

您可以在 ViewModel 构造函数 ( )中使用`Application.Current.Dispatcher`获取应用程序的主线程或捕获调度程序。`Dispatcher``Dispatcher.CurrentDispatcher`

例如：

```
Messenger.Default.Register<CustomerSavedMessage>(this, message =>
{
     Application.Current.Dispatcher.Invoke(
         new Action(() => Customers.Add(message.UpdatedCustomer))); 
}); 
```

# iis - 默认 IIS 7 登录域

> ID：10043695
> 
> 赞同：2
> 
> 时间：2012-04-06T12:47:52.607
> 
> 标签：iis, iis-7, dns, basic-authentication

我需要更改我们网站上的默认登录域，但由于某种原因，它仍然将计算机域作为登录时的默认域。我尝试了以下方法：[http](http://technet.microsoft.com/en-us/library/cc772009%28v=ws.10%29.aspx) ://technet.microsoft.com/en-us/library/cc772009(v=ws.10).aspx但得到了相同的结果。还能是什么？

我似乎在网上找不到任何其他解决方案，有什么想法吗？我将 IIS 配置与另一台服务器（有效）进行了比较，它看起来相同。无法为我的生活弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T01:42:11.957

当您对网站进行身份验证时，有很多地方可以显示登录对话框。我将假设您有一个仅由基本的 .HTM .CSS 和 .JS 文件组成的简单网站。（意思是，您没有使用 ASP.NET，而是希望使用基于表单的身份验证。）

网站本身在网站运行的应用程序池上配置的域/用户下运行。我怀疑你不是想调整这个。它是整个网站进程运行的安全级别。这意味着，在根本没有最终用户登录的情况下，这就是网站在访问文件系统、网络、注册表等方面的安全级别。

如果您只希望您网络的一个 Windows 域中的用户可以访问，您应该访问 IIS 网站，单击“身份验证”并禁用匿名、ASP.NET 模拟和表单身份验证。然后将基本身份验证中的域设置为您需要的域。

如果这是你所做的，它仍然失败。然后我怀疑这是因为 IIS 机器可能需要满足一些要求才能发生这种情况。例如：它需要添加为您尝试配置的域的成员。另一种可能性是域控制器上的某些设置或无法访问它，阻止了网络服务器向您的网络访问者提供登录该域的选项。

# lucene - 通过 lucene 将 RDBMS 表数据存储在硬盘上的文本文件中

> ID：10043699
> 
> 赞同：0
> 
> 时间：2012-04-06T12:47:58.340
> 
> 标签：lucene

我想使用 lucene 将 320 万条记录的 RDBMS sql 查询结果存储在文本文件中，然后进行搜索。[我在这里看到了[如何在 lucene 中将 RAMDirectory 集成到 FSDirectory 中的示例](https://stackoverflow.com/questions/3913180/how-to-integrate-ramdirectory-into-fsdirectory-in-lucene][1])

[1]：[如何在 lucene 中将 RAMDirectory 集成到 FSDirectory 中](https://stackoverflow.com/questions/3913180/how-to-integrate-ramdirectory-into-fsdirectory-in-lucene)。我有这段代码对我有用

```
 public class lucetest {
        public static void main(String args[]) {
            lucetest lucetestObj = new lucetest();
            lucetestObj.main1(lucetestObj);
        }

        public void main1(lucetest lucetestObj) {
            final File INDEX_DIR = new File(
                    "C:\\Documents and Settings\\44444\\workspace\\lucenbase\\bin\\org\\lucenesample\\index");

            try {
                Connection conn;
                Class.forName("com.teradata.jdbc.TeraDriver").newInstance();
                conn = DriverManager.getConnection(
                        "jdbc:teradata://x.x.x.x/CHARSET=UTF16", "aaa", "bbb");
                StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_35);

//              Directory index = new RAMDirectory(); //To use RAM space
Directory index = FSDirectory.open(INDEX_DIR); //To use Hard disk,This will not consume RAM

                IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35,
                        analyzer);
                IndexWriter writer = new IndexWriter(index, config);

                // IndexWriter writer = new IndexWriter(INDEX_DIR, analyzer, true);
                System.out.println("Indexing to directory '" + INDEX_DIR + "'...");

                lucetestObj.indexDocs(writer, conn);
                writer.optimize();
                writer.close();
                System.out.println("pepsi");
                lucetestObj.searchDocs(index, analyzer, "india");
                try {
                    conn.close();
                } catch (SQLException e2) {
                    // TODO Auto-generated catch block
                    e2.printStackTrace();
                }
            } catch (Exception e) {
                e.printStackTrace();

            } finally {

            }

        }

        void indexDocs(IndexWriter writer, Connection conn) throws Exception {
            String sql = "select id, name, color from pet";

            String queryy = "  SELECT  CFMASTERNAME, " + "  ULTIMATEPARENTID,"
                    + "ULTIMATEPARENT, LONG_NAMEE FROM  XCUST_SRCH_SRCH"
                    + "sample 100000;";
            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery(queryy);
            int kk = 0;
            while (rs.next()) {
                Document d = new Document();
                d.add(new Field("id", rs.getString("CFMASTERID"), Field.Store.YES,
                        Field.Index.NO));
                d.add(new Field("name", rs.getString("CFMASTERNAME"),
                        Field.Store.YES, Field.Index.ANALYZED));
                d.add(new Field("color", rs.getString("LONG_NAMEE"),
                        Field.Store.YES, Field.Index.ANALYZED));
                writer.addDocument(d);
            }
            if (rs != null) {
                rs.close();
            }
        }

        void searchDocs(Directory index, StandardAnalyzer analyzer,
                String searchstring) throws Exception {

            String querystr = searchstring.length() > 0 ? searchstring : "lucene";
            Query q = new QueryParser(Version.LUCENE_35, "name", analyzer)
                    .parse(querystr);

            int hitsPerPage = 10;
            IndexReader reader = IndexReader.open(index);
            IndexSearcher searcher = new IndexSearcher(reader);
            TopScoreDocCollector collector = TopScoreDocCollector.create(
                    hitsPerPage, true);
            searcher.search(q, collector);
            ScoreDoc[] hits = collector.topDocs().scoreDocs;
            System.out.println("Found " + hits.length + " hits.");
            for (int i = 0; i < hits.length; ++i) {
                int docId = hits[i].doc;
                Document d = searcher.doc(docId);
                System.out.println((i + 1) + ".CFMASTERNAME " + d.get("name")
                        + " ****LONG_NAMEE**" + d.get("color") + "****ID******"
                        + d.get("id"));
            }

            searcher.close();
        }
    } 
```

如何格式化此代码，以便将 sql 结果表而不是 RAM 目录保存在指定路径的硬盘上。我无法制定解决方案。我的要求是通过 lucene 存储在磁盘上的此表数据返回结果非常快。因此我通过索引的lucene将数据保存在磁盘上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:30:33.847

```
Directory index = FSDirectory.open(INDEX_DIR); 
```

您提到将 sql 结果保存到文本文件，但这是不必要的开销。在遍历 ResultSet 时，将行直接保存到 Lucene 索引。

顺便说一句，这并不重要，但是以全部大写命名您的本地 var（final 或其他）是违反惯例的。使用驼峰式。所有大写仅适用于类级常量（类的静态最终成员）。

# iphone - iPhone - 从背景到前景时需要重放背景声音

> ID：10043700
> 
> 赞同：0
> 
> 时间：2012-04-06T12:48:09.210
> 
> 标签：iphone, ios

我的应用程序在启动时播放背景音乐。当我退出应用程序时它会停止。但是当我打开我的应用程序时不再播放音乐。该应用程序有 2 个视图，我只想在主视图上播放背景声音。因此，当应用程序启动时，它应该播放声音，直到用户退出应用程序或用户进入应用程序中的第二个视图。只有当用户返回主视图时，才应再次播放声音。目前，我正在调用在“viewDidLoad”函数中播放声音的子函数。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:52:28.167

尝试在您的 AppDelegate 中使用此方法：

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

[DidBecomeActive Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidBecomeActive%3a)

# javascript - 如何在数组中获取json响应

> ID：10043701
> 
> 赞同：0
> 
> 时间：2012-04-06T12:48:11.087
> 
> 标签：javascript, jquery, json, arrays

我在 jquery 中发出 ajax 请求并作为返回得到响应，但不是作为数组。

```
{"ErrorCode":0,"SeriesSocialStats":{"8970471":{"faves":1,"friendFaves":0,"friendLikes":0,"likes":1,"myFaves":1,"myLikes":0,"seriesId":"8970471"}}}
{"ErrorCode":0,"SeriesSocialStats":{"184072":{"faves":2,"friendFaves":0,"friendLikes":0,"likes":2,"myFaves":1,"myLikes":0,"seriesId":"184072"}}} 
```

我想合并上述两个响应并创建一个类似这样的数组：

```
{"faves":1,"friendFaves":0,"friendLikes":0,"likes":1,"myFaves":1,"myLikes":0,"seriesId":"8970471"},{"faves":2,"friendFaves":0,"friendLikes":0,"likes":2,"myFaves":1,"myLikes":0,"seriesId":"184072"} 
```

请建议如何做。我想把它放在数组中并在本地存储它可能在配置变量中`get:[]`，然后访问有点像`config.get[data["seriesId"]]`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:05:03.467

最好的方法是将您的服务器响应转换为数组结构，就像约瑟夫提到的那样，而不是从对象到数组进行双重处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:51:27.280

你可以做

```
var obj1 = {"ErrorCode":0,"SeriesSocialStats":{"8970471":{"faves":1,"friendFaves":0,"friendLikes":0,"likes":1,"myFaves":1,"myLikes":0,"seriesId":"8970471"}}};

var obj2 = {"ErrorCode":0,"SeriesSocialStats":{"184072":{"faves":2,"friendFaves":0,"friendLikes":0,"likes":2,"myFaves":1,"myLikes":0,"seriesId":"184072"}}};

var arr = [];

arr.push(ob1.SeriesSocialStats);
arr.push(ob2.SeriesSocialStats); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T20:45:12.120

**您需要将您的响应转换为对象数组**：

```
var response = [
    {"ErrorCode":0,...},
    {"ErrorCode":0,...},
    {"ErrorCode":0,...},
] 
```

实际上：

```
jsonResponse = [
    {"ErrorCode":0,"SeriesSocialStats":{"8970471":{"faves":1,"friendFaves":0,"friendLikes":0,"likes":1,"myFaves":1,"myLikes":0,"seriesId":"8970471"}}},
    {"ErrorCode":0,"SeriesSocialStats":{"184072":{"faves":2,"friendFaves":0,"friendLikes":0,"likes":2,"myFaves":1,"myLikes":0,"seriesId":"184072"}}}
] 
```

然后循环：

```
var newArray = []
for(var i=0;i<jsonResponse.length;i++){             //loop through items
    var stats = jsonResponse[i].SeriesSocialStats;
    for(key in stats){                              //loop through "SeriesSocialStats" numbers
        newArray.push(stats[key]);
    }
} 
```

所以它会像：

```
newArray = [
    {"faves":1,"friendFaves":0,"friendLikes":0,"likes":1,"myFaves":1,"myLikes":0,"seriesId":"8970471"},
    {"faves":2,"friendFaves":0,"friendLikes":0,"likes":2,"myFaves":1,"myLikes":0,"seriesId":"184072"}
] 
```

# c# - 获取选定的Datagrid行索引或列索引

> ID：10043704
> 
> 赞同：1
> 
> 时间：2012-04-06T12:48:32.193
> 
> 标签：c#, wpf, datagrid, row

我怎么可能获得 DataGrid 的选定行索引，然后手动设置它？

问候

佩索尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:20:56.830

获取选定的行索引：

```
int i = myDataGrid.SelectedIndex; 
```

设置选定行索引：

```
myDataGrid.SelectedIndex = 4; 
```

# java - 在摇摆应用程序中访问 .jar 下的文件？

> ID：10043708
> 
> 赞同：2
> 
> 时间：2012-04-06T12:48:52.777
> 
> 标签：java, swing, url, jtextcomponent, filepath

参考我[之前的问题](https://stackoverflow.com/q/10043239/803285)，我想问一下，我怎样才能将不同文件夹中的文件读入相似的文件中`.jar`。

该问题提供了文件夹层次结构和详细信息。我的主要问题是一行代码：

```
JTextPane textPane = ... //general initialization
textPane.setPage("path/file.html"); 
```

问题是我必须将该file.html 保存在我的.jar 中。

此外，我想知道有关此主题的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:00:00.263

要在 JAR 中加载资源，您可以使用`Class.getResource()`. 从不在 JAR 中的普通文件夹结构加载时，这同样适用：

```
textPane.setPage(ThisClass.class.getResource("relative/path/to/file.html")); 
```

这里的路径来自任何文件夹`ThisClass.class`。通常最好显式命名类而不是使用`this.getClass()`，如果为子类调用此方法，则最终可能会在不同的（和非预期的）位置查找。

# c++ - std::unordered_set ::insert(T&&): 参数是否存在

> ID：10043716
> 
> 赞同：17
> 
> 时间：2012-04-06T12:49:32.477
> 
> 标签：c++, c++11

这个问题是关于 C++11 标准库中几个函数的规范，它们将它们的参数作为右值引用，但在所有情况下都不使用它们。一个例子是 `std::unordered_set<T>::insert(T&&)`。

很明显，`T`如果容器中的元素尚不存在，此方法将使用 的移动构造函数来构造该元素。但是，如果元素已经存在于容器中会怎样？我很确定没有理由更改案例中的对象。但是，我在 C++11 标准中没有找到任何支持我的主张的内容。

这里有一个例子来说明为什么这可能很有趣。以下代码从 std::cin 读取行并删除第一次出现的重复行。

```
std::unordered_set<std::string> seen;
std::string line;
while (getline(std::cin, line)) {
    bool inserted = seen.insert(std::move(line)).second;
    if (!inserted) {
        /* Is it safe to use line here, i.e. can I assume that the
         * insert operation hasn't changed the string object, because 
         * the string already exists, so there is no need to consume it. */
        std::cout << line << '\n';
    }
} 
```

显然，这个例子适用于 GCC 4.7。但我不确定，如果按照标准是正确的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T13:05:11.453

我在标准（17.4.6.9）中找到了这个注释：

> [*注意*：如果程序将左值转换为 xvalue，同时将该左值传递给库函数（例如，通过使用参数调用函数`move(x)`），则程序实际上是在要求该函数将该左值视为临时值。如果参数是左值，则该实现可以免费优化别名检查，这可能需要。——尾注]

虽然它没有直接回答您的问题，但它确实表明您已经有效地将库函数的参数作为临时“给予”，因此一旦您调用`insert`. 据我所知，库实现将有权从参数中移动，即使它随后确定它不会将值保留在容器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T16:25:42.757

§23.2.5/表 103 中对无序关联容器给出的语义`insert`没有指定是否在`insert`插入失败时调用参数的移动构造函数，该措辞仅讨论插入是否发生：

> **`a_uniq.insert(t)`**
> 
> 回报：`pair<iterator, bool>`
> 
> 要求：如果`t`是非 const 右值表达式，`T`则应可 MoveInsertable 到 X 中；否则，`T` 应 CopyInsertable 到`X`.
> 
> 效果：`t`当且仅当容器中没有与 的键等效的元素时才 插入`t`。返回 pair 的 bool 分量表示插入是否发生，iterator 分量指向 key 与 的 key 等价的元素`t`。

~~但是，对于的规范`emplace`更清晰（也来自表 103），您应该能够使用它而不是`insert`获得您想要的保证：~~

 ~~> **`a_uniq.emplace(args)`**
> 
> 回报：`pair<iterator, bool>`
> 
> 要求：T 应该是 EmplaceConstructible 到`X`args 中的。
> 
> 效果：插入一个 用 std::forward(args)... 构造的`T`对象*当且仅当容器中没有与 的键等效的元素时*。当且仅当插入发生时，返回的对的 bool 组件为真，并且对的迭代器组件指向具有与 的键等效的键的元素。`t`*`t`*`t`~~ 

我将其解释为（（插入构造的`T`对象`t`...）（当且仅当容器中没有元素...）），*即*插入和构造都应该仅在没有匹配元素的情况下发生容器。如果没有构造对象，则您传入的将永远不会传递给移动构造函数，因此在调用`std::string`失败后仍然有效。`emplace`

gcc 4.7.0 似乎不支持`unordered_set::emplace`，但它在标准中（§23.5.6.1）

 ~~正如@NicolBolas 在评论中指出的那样，尽管有上述内容，但如果冲突条目已经存在，则不可能实现`emplace`不构造 a 的函数。`T`

因此，以符合标准的方式获得所需语义的唯一方法是执行 a`find`后跟有条件的 an `insert`or `emplace`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:02:54.327

它是正确的。

当然 - 在处理哲学时 - 任何事情都可能受到质疑，但编译器必须以某种方式做。

设计师的选择是——要执行一个*动作*——必须有一个地方可以*去*。如果没有这样的地方，移动就不会发生。

请注意，无论函数采用 &&，它都假定参数是“临时的”：如果它没有“窃取”数据，则临时将在表达式结束时被销毁。如果临时性已被*强制*（通过 std::move），则该对象将在任何情况下停留在那里，直到被其自己的范围销毁。里面有没有它的原始数据。~~

# c# - 在 Azure 包 MSBuild 过程中执行 .py

> ID：10043718
> 
> 赞同：1
> 
> 时间：2012-04-06T12:49:39.990
> 
> 标签：c#, visual-studio-2010, azure, msbuild

我有一个 python 脚本，它可以在我发布它后对我的 web 项目执行我想要的一切。目前它的工作方式是我在我的网络项目上使用“发布”到我的本地 HD，然后我手动运行我的 .py 并得到我想要的结果（缩小、更改名称、删除垃圾等）。之后，我使用 FTP 将输出上传到我的共享主机，我很好。

现在我正在迁移到 Windows Azure，但我找不到集成 .py 执行的常规方法，因此它将创建一个我可以在我的云上使用的“Azure 包”（甚至是手动方式）。

我真的迷路了，这并不是真正的后期构建，因为它改变了 HTML 中的一些代码，我不希望它改变解决方案的原始 HTML - 只有已发布/打包的 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:53:24.847

对于类似的情况，在我的每个 Web 项目的后期构建中，我为每个项目运行来自 Post Build 事件的脚本，然后将所有文件复制到单独的部署文件夹中。（如果有的话，它首先删除那里的所有文件，并进行任何更改，例如清理空目录或无用目录）

**第 1 步 - 创建后期构建脚本**

我把我的作为一个批处理文件，但你可以使用任何东西。

在这个脚本中，我有类似于

```
RMDIR "C:\Visual Studio 2010\Projects\Promotion\Deployment\FacebookApp" /S /Q
xcopy "C:\Visual Studio 2010\Projects\Promotion\FacebookApp" "C:\Visual Studio 2010\Projects\Promotion\Deployment\FacebookApp\" /s /e
RMDIR "C:\Visual Studio 2010\Projects\Promotion\Deployment\FacebookApp\obj" /S /Q
RMDIR "C:\Visual Studio 2010\Projects\Promotion\Deployment\FacebookApp\Styles" /S /Q 
```

将脚本添加到您的构建后事件

![PostBuildEvent](../Images/26ca19fa1e4a4b3e36cae429940db657.png)

**第 2 步 - 更改 Azure 项目以指向新文件夹**

然后我将我的 Azure 项目设置为指向其中包含项目的部署文件夹，而不是直接指向开发文件夹。

![服务定义](../Images/cb70c329cd56acb1c5cba3652c809017.png)

在 ServiceDefinition.csdef 这里是我的例子

```
<Site name="FacebookApp" physicalDirectory="..\Deployment\FacebookApp">
    <Bindings>
      <Binding name="Endpoint1" endpointName="Endpoint1" hostHeader="sub.domain.com" />
      <Binding name="Endpoint2" endpointName="Endpoint2" hostHeader="sub.domain.com" />
    </Bindings>
</Site> 
```

（以防万一您想知道 Endpoint1 是端口 80 常规 http 而 Endpoint2 是端口 443 https）

我现在要做的就是重建我的项目，然后在 Azure 项目上点击发布，一切都完成了。等待 30 分钟后部署和更新 :)

# eclipse - Eclipse：可以在提交子项目时将 SVN 提交到主项目吗？

> ID：10043720
> 
> 赞同：0
> 
> 时间：2012-04-06T12:49:51.510
> 
> 标签：eclipse, svn, svn-externals

在我的项目中，我有一个这样的目录结构：

```
 project
    --common
    --subproject
      --common      (junction, not a copy) 
```

子项目需要一些来自`common`. 因此，我创建了一个“联结”（在 XP 中使用 sysinternals 命令），以便能够`common`从子项目中查看和进行更改。

这就像一个魅力，对两个公共的任何更改都会立即发生在两者上，`common`因为实际上它指向同一个文件夹。

然后我在 Eclipse 中为子项目文件夹和它自己的 svn 存储库创建了一个单独的项目。

但是当我想提交子项目时，它想提交'common'文件夹，就好像它是一个真正的文件夹一样，但实际上这个文件夹只需要提交到它的父存储库！

有没有办法告诉 svn 提交到不同于它自己的存储库？

`svn:externals`这不是一个好的解决方案，因为这会创建重复的源，并且更难维护，因为它不会自动保持同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:27:04.753

eclipse 的文件系统抽象具有[链接文件夹](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-45.htm)。

您是否尝试过在文件系统级别使用这些而不是连接？（我不知道颠覆插件如何处理这些，但也许你很幸运）

# javascript - 如何将表单发送到 javascript 函数

> ID：10043722
> 
> 赞同：0
> 
> 时间：2012-04-06T12:50:06.377
> 
> 标签：javascript, jquery, html, razor

我需要您的帮助来了解如何将信息从表单发送到 javascript 函数。

我在这里创建了一个基本功能：http: [//jsfiddle.net/nZhR8/5/](http://jsfiddle.net/nZhR8/5/)

这个函数的目的是隐藏/显示一个 div。

事实上，我将有一个包含几个联系人（0 到 20 之间）的表。每个联系人都会有一个选择列表。对于每个联系人，我必须根据 1 个自己的特殊性显示 1 个特殊 div。所以，对于contact1，我可能必须显示div3，对于contact2，显示div1。

我还将使用 javascript 函数发送到必须显示 div 的数据库。这将是一种进步。

如果我做错了，请告诉我为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:09:29.953

首先，`$(...)`从定义函数 showDiv 的位置删除，因为您不想在页面加载时执行 showDiv。

除此之外，您的问题似乎是 jsFiddle。它在那里不起作用，但是当我将您在 jsFiddle 上发布的内容复制+粘贴到文件中时，修复了我上面提到的内容并在 FF 中尝试过，它起作用了。

当然，您可以对代码做一些更好的事情，但它确实有效。建议：给所有 div 同一个类并通过 id 区分它们，然后隐藏该类的所有内容并显示具有正确 ID 的类。对于 onload，无需复制整个代码，只需执行`showDiv(1)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:12:44.850

你需要[这样的 jsFiddle](http://jsfiddle.net/nZhR8/29/)吗？

```
<div id="1" class="1">1</div>
<div id="2" class="2">2</div>
<div id="3" class="3">3</div>
<div id="4" class="4">4</div>
<div id="5" class="5">5</div> 
```

```
$('div').hide();

$('#StateSelection').change(function() {
    var $this = $(this);
    $('div').filter('.'+$this.val()).show();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T13:18:12.207

我没有看到这背后的想法，但这可以解决问题：http: [//jsfiddle.net/YCPM7/](http://jsfiddle.net/YCPM7/)

那一定是一个更大项目的简单草稿。

另外，我建议您为每个 DIV 使用一个公共类

```
<div class="message 1">1</div>
<div class="message 2">1</div>
<div class="message 3">1</div>
... 
```

所以你可以简单地做：

```
$(".message").hide(); 
```

享受。

# testing - 如何使用 Selenium 播放和暂停视频？

> ID：10043730
> 
> 赞同：2
> 
> 时间：2012-04-06T12:51:14.140
> 
> 标签：testing, selenium, automation

任何人都可以帮助我如何使用 Selenium 自动播放/暂停网页上的视频。

提前致谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T12:34:09.383

这非常依赖于浏览器和处理视频的播放器。您很可能需要使用 JavaScript 执行程序。

昨晚我和一个朋友讨论了这个问题，他想出了以下示例，使用 Webdriver 的 Python 变体作为来自 html5demos.com 的演示视频：

```
driver = webdriver.Firefox()
driver.get("http://html5demos.com/video")
driver.execute_script('document.getElementsByTagName("video")[0].play()') 
```

您也可以在使用“播放”的地方“暂停”。

这里有一个更大的问题：您实际上要验证什么？简单的播放和暂停不会引发任何错误？确保您知道要验证的内容，并且实际工作以自动化视频测试而不是将特定用例留给手动测试是有意义的。（尽管您可以使用上面的脚本来达到这一点！）

** 编辑：查看[这段 Python 代码](https://gist.github.com/2325034)（不是我的），它公开了一个“Paused”属性。现在您至少可以验证视频的加载、启动和停止。我仍然对使用这种测试持怀疑态度，但至少这是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T18:22:28.000

通过使用 FlashObjectwebDriver ！

现在什么是 FlashObjectWebDriver ？

FlashObjectWebDriver 是 Webdriver Library 下的一个接口。FlashObjectWebDriver 有一个名为的方法： callFlashObject callFlashObject 方法可以使用参数重载，即。callFlashObject(“Play”) : 播放 Flash callFlashObject(“Pause”) : 暂停 Flash callFlashObject(“Previous”) : 播放上一个 Flash 视频 callFlashObject(“next”) : 播放下一个 Flash 视频 callFlashObject(“SetVariable” ”, “/:Message) : 用于显示消息。执行 ：

```
FlashObjectWebDriver flashApp = new FlashObjectWebDriver(driver, "myFlashMovie");       
    // Pass the URL of video        
    driver.get("http://demo.guru99.com/flash-testing.html");            
    Thread.sleep(5000);     
    flashApp.callFlashObject("Play");           
    Thread.sleep(5000);     
    flashApp.callFlashObject("StopPlay");           
    Thread.sleep(5000);     
    flashApp.callFlashObject("SetVariable","/:message","Flash testing using selenium Webdriver");
    System.out.println(flashApp.callFlashObject("GetVariable","/:message")); 
```

# javascript - jquery ajax 和数据表的问题

> ID：10043737
> 
> 赞同：1
> 
> 时间：2012-04-06T12:51:51.333
> 
> 标签：javascript, jquery, datatables

我正在尝试使用 jquery ajax 从 php 文件中获取数据。此 php 文件打印由 db 查询生成的表。一旦表格返回到 html 页面，我想将 datatables 样式应用于表格，但这不起作用。

也许我应该只使用数据表 ajax 功能，而不是 jquery ajax。我只有三个链接，用户可以单击它们来调用 ajax，其中并非所有链接都返回打印的表格。

我怀疑它是因为 javascript 计时，所有 js 在表格输出之前加载。

我尝试使用 jquery.on()，但无法让它与数据表一起使用。

我很感激任何帮助。对不起，如果这令人困惑。

```
<script type="text/javascript">     
$(document).ready(function() {

// EVENT LISTENER FOR CLICKS
var option_action = "fridge";
var using = "pantry";
$.post("./backend.php", { option: option_action, action: using }, function(data) {
$("#content").html(data);
load_table();
});
// EVENT LISTENER FOR CLICKS
$(".pantry_menu li").click(function() {
    alert("CLICK");
//getting data from the html
var option_action = $( this ).attr("name");
var using = "pantry";
$.post("./backend.php", { option: option_action, action: using }, function(data) {      
    $("#content").html(data);
});
return false;
});

//Mouse action listeners for side bar
$(".pantry_menu li").mouseover(function() {
    $(this).css("border-bottom" , "2px solid black");
});
$(".pantry_menu li").mouseout(function() {
    $(this).css("border-bottom" , "2px dotted black");
});
$(".fridge_table1").change(function(){
   alert("CHANGE");
});
});

function load_table()
{
    $('.fridge_table1').dataTable( {
        "aaSorting": [[ 4, "desc" ]]
        ,"bJQueryUI": true
    });
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:55:32.660

在您的 ajax 成功函数中，您可以将 dataTable 重新应用于表。例如：

```
 $.ajax({
    type: "POST",
    url: "ajax.php",
    data: {
      request: 'something'
    },
    async: false,
    success: function(output)
    {
      $('#myTableDiv').html(output); //the table is put on screen
      $('#myTable').dataTable();
    }
  }); 
```

**编辑由于您的更新**

您需要更改“EVENT LISTENER FOR CLICKS”来调用应用数据表的函数。改变：

```
$.post("./backend.php", { option: option_action, action: using }, function(data) {      
    $("#content").html(data);
}); 
```

到

```
$.post("./backend.php", { option: option_action, action: using }, function(data) {      
    $("#content").html(data);
    load_table();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:55:01.133

您应该将 .dataTables() 部分放在 ajax 函数的回调中

```
$.ajax{
    url: yoururl,
   ... 
    success: function(data){
        //append the table to the DOm
        $('#result').html(data.table)
        //call datatables on the new table
        $('#newtable').dataTables()
    } 
```

否则，您正在尝试转换 DOM 中尚不存在的表

# couchbase - 沙发底座桶选择

> ID：10043739
> 
> 赞同：1
> 
> 时间：2012-04-06T12:52:09.787
> 
> 标签：couchbase, couchbase-bucket

我想在 couchbase telnet 会话中选择某个存储桶。
我可以使用以下命令从默认存储桶中获取值：
get a1 0

如何通过 couchbase memcached 协议选择存储桶？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T07:42:25.880

如果您创建了具有密码的存储桶，则必须使用支持 sasl 身份验证的客户端才能访问该存储桶。Couchbase 使用普通 sasl 身份验证，用户名是存储桶名称，密码是您为存储桶指定的密码。如果您创建一个没有密码的存储桶，那么它需要在不同的端口上。对于无密码类型的存储桶，您只需指定存储桶正在侦听 telnet 的端口。

# mysql - Autokill 选择 MySQL 查询 perl 脚本

> ID：10043744
> 
> 赞同：1
> 
> 时间：2012-04-06T12:52:33.720
> 
> 标签：mysql, perl, kill

我使用下面的 perl 脚本来终止用户完成的所有选择连接，但我想为**root**用户设置一个例外，因为 root 查询要么很重要，要么出于备份目的。

下面是我的代码

```
#!/usr/bin/perl -w

use DBI;
use strict;

$| = 1;

#------------------------------------------------------------------------------
# !!! Configure check time and timeout. These are both in seconds.

my $check =      15;    # check processes every $check seconds
my $slow_time =  60;    # stop processes that run for >= $slow_time seconds

# !!! Configure log file - All slow queries also get logged to this file

my $logfile =    "./check_mysql_query.log"; # log slow queries to this file

# !!! Configure the database connection parameters

my $db_string = "dbi:mysql:mysql";  # DBI resource to connect to
my $db_user =   "root";     # DBI username to connect as
my $db_pass =   "password";     # DBI password to connect with

# !!! Configure path to sendmail program

my $sendmail_bin = "/usr/sbin/sendmail";

#
#------------------------------------------------------------------------------

my ($dbh,$sth,$sth2,$thread,$state,$time,$query,$explain);

print "connecting\n";
my $opt = {
    'RaiseError'=>0,
    'PrintError'=>0
};
$dbh = DBI->connect($db_string,$db_user,$db_pass,$opt);
unless ($dbh) {
    print "Error: Unable to connect to database: $DBI::errstr\n";
    exit 1;
}

$SIG{'TERM'} = sub {
    print "caught sig TERM!\nexiting!\n";
    $dbh->disconnect;
    exit 1;
};

print "preparing\n";
unless ($sth = $dbh->prepare("show full processlist")) {
    print "error preparing query: $DBI::errstr\nexiting!\n";
    $dbh->disconnect;
    exit 1;
}

print "initialized.. starting loop\n";
while(1) {
    unless ($sth->execute) {
        print "statement execute failed: ".$sth->errstr."\nexiting!\n";
        last;
    }
    while(my @tmp = $sth->fetchrow) {
        $thread = $tmp[0];
        $state = $tmp[4];
        $time = $tmp[5];
        $query = $tmp[7];
        if ($state eq "Query" && $query =~ /^SELECT/ && $time >= $slow_time) {
            print "killing slow query thread=$thread state=$state time=$time\n";
            $dbh->do("kill $thread");
            unless (log_query($logfile,$query)) {
                print "log_query failed! exiting!\n";
                last;
            }

        }
    }
    sleep($check);
}

$sth->finish;
$dbh->disconnect;

exit 1;

sub log_query {
    my ($file,$query) = @_;
    unless (open(O,">>".$file)) {
        print "error opening log file '$file': $!\n";
        return undef;
    }
    print O $query."\n-----\n";
    close(O);
    return 1;
} 
```

脚本信用：[http](http://code.google.com/p/mysql-killquery/) ://code.google.com/p/mysql-killquery/ 为了简单起见，我删除了大部分脚本代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:13:34.997

我想我从阅读中了解到，您的第二列将是用户。因此，假设 root 以用户“root”身份登录数据库，那么您可能可以这样做：

```
while(my @tmp = $sth->fetchrow) {
    next if $tmp[1] eq 'root';
    ...
} 
```

# windows - 将多个 OpenGL 窗口同步到 vsync

> ID：10043745
> 
> 赞同：9
> 
> 时间：2012-04-06T12:52:37.823
> 
> 标签：windows, multithreading, opengl, vsync

在 Windows 应用程序中，我同时打开了多个 OpenGL 窗口。理想情况下，我希望每个都以 60 fps 的速度绘制，与屏幕刷新同步。

对于每个渲染上下文，我都会调用`wglSwapIntervalEXT(1)`以打开 vsync。每个窗口都有自己的显示线程，它绘制框架然后调用`SwapBuffers`更新。

事实证明，这些窗口正在相互“战斗”：看起来`SwapBuffers`调用是同步的并相互等待，即使它们位于不同的线程中。我正在测量每个窗口的帧到帧时间，并且有两个窗口，这下降到 30 fps，3 到 20 fps 等。

如果我用 关闭垂直同步`wglSwapIntervalEXT(0)`，无论我打开多少个窗口，它们都会愉快地以 60 fps 刷新。但是在打开一个窗口的情况下，这并不像打开 vsync 那样平滑。

有什么方法可以用 OpenGL 完成我想要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-12T16:52:28.367

在 Linux 中，由于从各种线程调用视频函数，我的应用程序发生了很多奇怪的行为。

我解决了这些问题，自应用程序启动以来仅使用一个线程进行显示，创建窗口，创建 glcontext 等，并使用信号量和队列在该线程和其他线程之间共享数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:38:46.343

您可能能够从线程中获取输出设备并在循环中使用[WaitForVBlank](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174559%28v=vs.85%29.aspx)函数。然后，它可以为您感兴趣的每个窗口发布消息或信号事件。

# php - 无法匹配 simplexml 对象和变量？

> ID：10043748
> 
> 赞同：0
> 
> 时间：2012-04-06T12:53:06.470
> 
> 标签：php, variables, simplexml

我有一个 php 文件，其中通过 simplexml 加载 xml 文件并搜索相应的 id，一切正常，但是当将 id 与给定的匹配时，它不起作用，如果我回显它们，它们会显示，但如果我使用 if 语句来匹配它们不会匹配

这是我的php代码

```
 <?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

$cat_xml= simplexml_load_file('http://artstack.com/sites/77/site_categories.xml'); 
$product_xml= simplexml_load_file('http://artstack.com/sites/77/site_products.xml'); 

function getcatid($product_name,$product_xml){
    foreach($product_xml as $product){
        if($product){
            if($product_name==$product->url){
                return $product->cat_id;
            }
        }
    }
}

function getcat($cat_id,$cat_xml){
    foreach($cat_xml as $cat){
        if($cat){
            if($cat_id==$cat->id){
                echo $cat['name'];
            }
            else{
                if(isset($cat->category)){
                    //sub cat
                    foreach($cat->category as $subcat){
                        if($subcat){
                            echo $cat_id." > ".$subcat->id."<br>";
                            if($cat_id==$subcat->id){
                                echo $cat_id." > ".$subcat->id."<br>";
                                exit;
                            }
                        }
                    }
                }
            }
        }       
    }   
}

getcat(getcatid($_GET['pro'],$product_xml),$cat_xml);
?> 
```

输出是

```
75 > 73
75 > 74
75 > 75 
```

但它必须是

```
75 > 73
75 > 74
75 > 75
75 > 75 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:56:43.973

在我使用类型转换后它起作用了

```
if(intval($cat_id)==intval($subcat->id)){ 
```

谢谢

# android - Android NDK - 尝试使用 NoMemoryError 捕获

> ID：10043755
> 
> 赞同：3
> 
> 时间：2012-04-06T12:54:07.150
> 
> 标签：android, exception, exception-handling, android-ndk

我有代码块，它在 Android NDK 中分配了大量内存。最后我需要的是使用 try - catch 块，可能会有 NoMemoryError。你知道如何在原生 SDK 中编写它吗？

我需要实现与此相同的功能：

```
 for(int i=1;i<50;i++){
        try{
            int[] mega =new int[i*1024*1024];//1MB

        }catch (OutOfMemoryError e) {
            usedMemory= (Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory())/new Float(1048576.0);
            usedText=usedMemory+" MB";
            tw.setText(usedText);          
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:56:32.020

在您的 JNI 函数中，您可以使用以下代码段引发 java 异常。编译本机代码时，请确保启用 RTTI 和异常。

```
try {
  int *mega = new int[1024 * 1024];
} catch (std:: bad_alloc &e) {
  jclass clazz = jenv->FindClass("java/lang/OutOfMemoryError");
  jenv->ThrowNew(clazz, e.what());
} 
```

在 Java 中，您可以简单地捕获 OutOfMemoryError。

```
try {
  // Make JNI call
} catch (OutOfMemoryError e) {
  //handle error
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T01:56:11.320

Android[对 C++ 异常不是很友好](https://stackoverflow.com/questions/4663291/android-ndk-r5-and-support-of-c-exception)（必须链接 Android 提供的特殊版本的 C++ 库才有异常）。也许您应该使用 malloc() 并检查其返回值以查看内存分配是否正常？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T22:02:24.723

如果您在本机代码中触发异常/错误，您应该能够[捕获](http://journals.ecs.soton.ac.uk/java/tutorial/native1.1/implementing/error.html) [它](http://java.sun.com/docs/books/jni/html/exceptions.html)。但是，我会假设使用 malloc 或类似方法分配一大块非托管内存不会触发错误，但会以艰难的方式杀死你的应用程序。但是，如果您创建与您的 java 代码中相同的大型 java 数组，那么您调用来创建数组的 java 方法将失败并创建一个异常。由于 JNI 中的异常处理非常不同，因此您必须使用以下方式手动检查本机代码中的异常：

```
exc = (*env)->ExceptionOccurred(env);
if (exc) ... 
```

# jquery - jquery在动画滚动后列出视图中的所有div元素

> ID：10043758
> 
> 赞同：0
> 
> 时间：2012-04-06T12:54:22.913
> 
> 标签：jquery, scroll

我有一个带有动画滚动的 div，它包含数百个使用`append()`.

每个 div 都有自己唯一的 id，我需要在动画滚动停止几毫秒后获取视图内所有 div id 的列表。

一旦我有了 ID，我就可以调用一个 php 脚本来动态地将适当的内容附加到每个 ID 上。

我看过[这篇文章](https://stackoverflow.com/questions/487073/jquery-check-if-element-is-visible-after-scrolling)，虽然它很有帮助，但您需要先知道 id 名称，并且每个都有一个事件侦听器，这意味着数百个事件侦听器。

我可以在可见区域的顶部和底部获得内部包装 div 的位置。这会给我一个搜索范围，但是我如何搜索该区域中的任何 div？

还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:52:14.613

一种可能性：http:
[//jsfiddle.net/Hwhrw/2/](http://jsfiddle.net/Hwhrw/2/)

```
$("#wrapper").children("div:visible").css("background-color", "#00CC00");

var $sc = $('#scrollable');
$sc.scrollTop(Math.random() * $('#wrapper').height());
var ids = [];
$('.abc').each(function() {
    var c = $(this).position().top + $(this).height() / 2;
    if (c > 0 && c < $sc.height()) {
        $(this).css('background-color', 'blue');
        ids.push($(this).attr('id'));
    }
});
alert(ids);​ 
```

为简单起见，我使用 .abc div 的中心点进行计算。

# javascript - 计算表格行中的列数

> ID：10043760
> 
> 赞同：44
> 
> 时间：2012-04-06T12:54:31.940
> 
> 标签：javascript, html-table

我有一个类似的表：

```
<table id="table1">
<tr>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
</tr>
<tr>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
</tr>
<table> 
```

我想计算一行中 td 元素的数量。我在尝试：

```
document.getElementById('').cells.length;
document.getElementById('').length;
document.getElementById('').getElementsByTagName('td').length; 
```

它没有显示实际结果。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-04-06T12:58:18.973

```
document.getElementById('table1').rows[0].cells.length 
```

单元格不是表格的属性，行是。单元格虽然是一行的属性

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T12:59:22.227

你可以做

```
alert(document.getElementById('table1').rows[0].cells.length) 
```

在这里摆弄[http://jsfiddle.net/TEZ73/](http://jsfiddle.net/TEZ73/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-01T19:25:55.713

为什么不使用 reduce 以便我们可以考虑 colspan 呢？:)

```
function getColumns(table) {
    var cellsArray = [];
    var cells = table.rows[0].cells;

    // Cast the cells to an array
    // (there are *cooler* ways of doing this, but this is the fastest by far)
    // Taken from https://stackoverflow.com/a/15144269/6424295
    for(var i=-1, l=cells.length; ++i!==l; cellsArray[i]=cells[i]);

    return cellsArray.reduce(
        (cols, cell) =>
            // Check if the cell is visible and add it / ignore it
            (cell.offsetParent !== null) ? cols += cell.colSpan : cols,
        0
    );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T12:55:49.023

首先，当你打电话时`getElementById`，你需要提供一个 id。o_O

您的 dom 中唯一具有 id 的项目是`table`元素。`tr`如果可以，您可以为元素添加 id（确保它们是唯一的） 。

或者，您可以使用`getElementsByTagName('tr')`获取`tr`文档中的元素列表，然后获取 tds 的数量。

[这是控制台记录结果的小提琴......](http://jsfiddle.net/NNnMz/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-01T19:55:23.873

计算表 1 中的所有**td**：

```
console.log(
table1.querySelectorAll("td").length
)
```

```
<table id="table1">
<tr>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
</tr>
<tr>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
</tr>
<table>
```

将所有 td 计数到table1 的每个**tr中。**

```
table1.querySelectorAll("tr").forEach(function(e){
 console.log( e.querySelectorAll("td").length )
})
```

```
<table id="table1">
<tr>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
</tr>
<tr>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
</tr>
<table>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-06T09:31:07.933

如果`colspan`或`rowspan`都设置为`1`，则计算孩子`td`的 s 将给出正确答案。但是，如果有跨度，我们无法准确计算列数，即使按`td`行的最大数量 s 也是如此。考虑以下示例：

```
var mytable = document.getElementById('table')
for (var i=0; i < mytable.rows.length; ++i) {
	document.write(mytable.rows[i].cells.length + "<br>");
}
```

```
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  padding: 3px;
}
```

```
<table id="table">
    <thead>
        <tr>
            <th colspan="2">Header</th>
            <th rowspan="2">Hi</th>
        </tr>
        <tr>
            <th>Month</th>
            <th>Savings</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="2">hello</td>
            <td>world</td>
        </tr>
        <tr>
            <td>hello</td>
            <td colspan="2">again</td>
        </tr>
    </tbody>
</table>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-05T00:55:05.510

`td`计算元素以获取表中的列数是一个坏主意，因为`td`元素可以跨越多个列，使用`colspan`.

这是一个使用 jquery 的简单解决方案：

```
var length = 0;
$("tr:first").find("td,th").each(function(){
	var colspan = $(this).attr("colspan");
  if(typeof colspan !== "undefined" && colspan > 0){
  	length += parseInt(colspan);
  }else{
        length += 1;
  }
});

$("div").html("number of columns: "+length);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<table>
<tr>
  <td>single</td>
  <td colspan="2">double</td>
  <td>single</td>
  <td>single</td>
</tr>
</table>
<div></div>
```

有关简单的 Javascript 解决方案，请参阅 Emilio 的答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-15T08:04:34.473

```
<table id="table1">
<tr>
  <td colspan=4><input type="text" value="" /></td>

</tr>
<tr>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>
  <td><input type="text" value="" /></td>

</tr>
<table>
<script>
    var row=document.getElementById('table1').rows.length;
    for(i=0;i<row;i++){
    console.log('Row '+parseFloat(i+1)+' : '+document.getElementById('table1').rows[i].cells.length +' column');
    }
</script> 
```

结果：

```
Row 1 : 1 column
Row 2 : 4 column 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-19T15:00:43.870

这是一个简洁的脚本，考虑到`colspan`.

`numCols`如果表格没有行或没有列，则为 0，并且无论某些单元格是否跨越多行或多列，只要表格标记有效且没有行，它将等于列数比表中的列数短或长。

```
 const table = document.querySelector('table')
    const numCols = table.rows[0]
        ? [...table.rows[0].cells]
            .reduce((numCols, cell) => numCols + cell.colSpan , 0)
        : 0 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2015-10-15T06:57:22.410

```
$('#table1').find(input).length 
```

# sencha-touch - 如何在sencha touch 2中呈现列表项内的表单字段

> ID：10043761
> 
> 赞同：0
> 
> 时间：2012-04-06T12:54:36.063
> 
> 标签：sencha-touch

我有一个包含元素的列表。如何在列表项中呈现表单字段，以便当用户单击列表项时，该字段获得焦点，并且用户可以输入值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:02:11.423

我想在您列表中的 itemTpl 配置中，您可以添加 html 输入/文本字段

```
 xtype:'list',
        disableSelection:true,
        store: 'Store',
        itemTpl:'<TR><TH>INFO</TH><TD><INPUT TYPE="TEXT" NAME="name" SIZE="20"></TD></TR>' , 
```

# wpf - 如何从 ListBoxItem 的控件中获取值？

> ID：10043762
> 
> 赞同：0
> 
> 时间：2012-04-06T12:54:46.463
> 
> 标签：wpf, silverlight, windows-phone-7

我有一个列表框和绑定学生，我想在单击“Btn”时获取“ID”。但是，我不知道该怎么做。请告诉我该怎么做？

XAML：

```
 <ListBox x:Name="listBox">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="12">
                        <TextBlock Text="{Binding Name,StringFormat=Name:\{0\}}"
                                   Foreground="Orange"/>
                        <TextBlock Text="{Binding Age,StringFormat=Age:\{0\}}"
                                   Foreground="Gray"/>
                        <Button Content="Get ID Of Student"
                                x:Name="Btn"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
       </ListBox> 
```

C＃：

```
 List<Student> students = new List<Student> 
        {
            new Student{Name = "st1",Age = 20,ID = 1},
            new Student{Name = "st2",Age = 18,ID = 2},
            new Student{Name = "st3",Age = 21,ID = 3},
        };

        listBox.ItemsSource = students;

        public class Student 
        {
               public string Name { get; set; }
               public int Age { get; set; }
               public int ID { get; set; }  
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T12:58:45.697

`ID`将字段绑定到`CommandParameter`按钮上的属性

```
<Button Content="Get ID Of Student" 
        x:Name="Btn" 
        CommandParameter="{Binding ID}" 
        ... /> 
```

然后你`Command`会自动得到`ID`作为参数传递

如果您使用`Click`事件而不是`Command`属性，则可以将其转换`sender`为 a`Button`并检查它的`CommandParameter`，或者您可以将其转换`DataContext`为`Student`对象并从中获取 ID

```
void Btn_Click(object sender, EventArgs e)
{
    Button b = sender as Button;

    int id = (int)b.CommandParameter;

    // or 
    Student student = (Student)b.DataContext;
    int id = student.ID;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:58:35.390

关于什么：

```
Student selectedStundet = listBox.SelectedItem as Student; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:00:01.863

```
<Button Content="Get ID Of Student" x:Name="Btn" Tag={Binding ID} Click="Button_Click" />

private void Button_Click(object sender, RoutedEventArgs e)
{
        Button b = (Button)sender;
        string id = b.Tag;
        ...
} 
```

然后你让你的学生使用 LINQ，如下所示：

```
Student a = from student in Students
          student.ID=(int)id
          select student; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T15:25:12.287

试试这个：

```
private void Btn_Click(object sender, RoutedEventArgs e)
        {
            Student st = (sender as Button).DataContext as Student;
            MessageBox.Show(st.ID + "\n" + st.Age + "\n" + st.Name);
        } 
```

# php - 如何自动更新数据库服务器上的mysql数据库更改？

> ID：10043763
> 
> 赞同：0
> 
> 时间：2012-04-06T12:54:54.597
> 
> 标签：php, mysql, linux, svn, crontab

客户希望数据库结构更新应该是自动且无错误的。

**例如：**

*   DeveloperA`SQL query 1`在中心位置添加了新内容。
*   DeveloperB 将新添加`SQL query 2`到中心位置。
*   Cronjob 在晚上运行并`SQL query 1`在`SQL query 2`数据库服务器上更新。
*   开发人员`SQL query 3`在中心位置添加了新内容。
*   Cronjob 在第二天晚上运行，并`SQL query 3`在数据库服务器上更新。

是否有可能或在什么级别我们可以自动化此更新过程？

**当有许多开发人员从事项目并将 SQL 脚本添加到数据库时，每天更新数据库更改的最佳标准方法是什么？**

**我们正在使用：**

```
Linux dedicated server.
Crontab
PHP
MySQL
SVN
Shell Scripting 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:58:19.570

我会设置三个目录；

*   待办的
*   成功
*   失败

新脚本被放入“待处理”中。一个进程从 cron 运行并拾取这些，并尝试处理它们。处理成功的文件移至“成功”，否则移至“失败”。

日志文件记录计划流程的所有活动，并在失败时生成电子邮件或警报。

# session - CakePHP 2.1 $this->Session->write 不工作

> ID：10043770
> 
> 赞同：2
> 
> 时间：2012-04-06T12:55:09.337
> 
> 标签：session, cakephp, cakephp-2.0

我在 AppController.php 中包含了 'Session' 组件和帮助程序现在，如果我使用`$this->Session->write('App.testString', 'test);`Session 没有创建，或者至少我没有收到字符串`echo $this->Session->read('App.testString');`。

我是否必须更改任何设置才能使 Sessions 工作？

* * *

在控制器函数内部，我可以编写和读取会话，但如果我想在（同一个控制器的）不同函数中读取会话，我不会得到返回值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T13:35:29.423

我找到了解决方案：默认情况下，CakePHP 使用在 php.ini 中设置的文件夹。在我的托管环境中无法访问此文件夹（并且我不允许更改 php.ini）。

在这种情况下，您必须更改存储会话文件的**core.php 。**这是我之前的：

```
Configure::write('Session', array(
    'defaults' => 'php'
)); 
```

我把它改成了这个：

```
Configure::write('Session', array(
    'defaults' => 'cake'
)); 
```

这样，cake 使用他自己的 tmp 文件夹来存储会话文件。还要确保 tmp 文件夹及其子文件夹是可写的。

# java - 为什么 Hibernate 在调用 session.save(object) 时会抛出 ClassCastException？

> ID：10043771
> 
> 赞同：0
> 
> 时间：2012-04-06T12:55:13.617
> 
> 标签：java, hibernate, classcastexception

当我执行以下 Hibernate 调用时，我得到一个 ClassCastException（请参阅 Stacktrace），但我无法理解原因。Hibernate 在这里试图做什么？它是否试图将我的一个对象转换为不同的类类型？如果是，为什么以及上什么课？

```
session.save(fooAccount); 
```

**堆栈跟踪：**

```
com.foo.web.model.exception.FailedDatabaseOperationException: java.lang.ClassCastException: com.foo.web.model.authentication.SecurePassword
    at com.foo.web.controller.db.HibernateController.savefooAccount(HibernateController.java:883)
    at com.foo.web.model.account.fooAccount.save(fooAccount.java:459)
    at com.foo.web.controller.AccountController.createfooAccount(AccountController.java:258)
    at com.foo.web.view.start.RegisterController.register(RegisterController.java:233)
    at com.foo.web.view.start.RegisterController.onClick$btn_register(RegisterController.java:196)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.zkoss.zk.ui.event.GenericEventListener.onEvent(GenericEventListener.java:81)
    at org.zkoss.zk.ui.impl.EventProcessor.process0(EventProcessor.java:192)
    at org.zkoss.zk.ui.impl.EventProcessor.process(EventProcessor.java:138)
    at org.zkoss.zk.ui.impl.EventProcessingThreadImpl.process0(EventProcessingThreadImpl.java:517)
    at org.zkoss.zk.ui.impl.EventProcessingThreadImpl.sendEvent(EventProcessingThreadImpl.java:121)
    at org.zkoss.zk.ui.event.Events.sendEvent(Events.java:319)
    at org.zkoss.zk.ui.event.Events.sendEvent(Events.java:329)
    at org.zkoss.zk.ui.AbstractComponent$ForwardListener.onEvent(AbstractComponent.java:3034)
    at org.zkoss.zk.ui.impl.EventProcessor.process0(EventProcessor.java:192)
    at org.zkoss.zk.ui.impl.EventProcessor.process(EventProcessor.java:138)
    at org.zkoss.zk.ui.impl.EventProcessingThreadImpl.process0(EventProcessingThreadImpl.java:517)
    at org.zkoss.zk.ui.impl.EventProcessingThreadImpl.run(EventProcessingThreadImpl.java:444)
Caused by: java.lang.ClassCastException: com.foo.web.model.authentication.SecurePassword
    at org.hibernate.type.ComponentType.toLoggableString(ComponentType.java:410)
    at org.hibernate.type.ComponentType.toLoggableString(ComponentType.java:414)
    at org.hibernate.pretty.Printer.toString(Printer.java:76)
    at org.hibernate.pretty.Printer.toString(Printer.java:113)
    at org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:120)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)
    at com.foo.web.controller.db.HibernateController.savefooAccount(HibernateController.java:879) 
```

* * *

**编辑：**这是映射以及存储对象的代码：

**映射文件**（缩短版本。省略不相关的内容）：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- Generated 26.04.2011 14:49:15 by Hibernate Tools 3.3.0.GA -->
<hibernate-mapping>
    <class name="com.foo.web.model.account.fooAccount" table="fooACCOUNT">

        <id name="id" type="long" access="field">
            <column name="foo_ACCOUNT_ID" />
            <generator class="native" />
        </id>

        <many-to-one name="defaultMailAccount" lazy="false" column="DEFAULT_MAIL_ACCOUNT_ID" />

        <bag name="mailAccounts" table="MAILACCOUNTS" lazy="false" inverse="true">
            <key column="foo_ACCOUNT_ID"></key>
            <one-to-many class="com.foo.web.model.mail.account.MailAccount" />
        </bag>

        <component name="user" class="com.foo.web.model.account.fooUser">
            <component name="activationCode">
                <property name="activationCode" column="ACTIVATION_CODE"></property>
            </component>

            <component name="password" class="com.foo.web.model.authentication.MediumSecurePassword">
                <property name="hash" column="PASSWORD" />
            </component>

            <component name="resetCode">
                <property name="resetCode" column="RESET_CODE" />
            </component>
            <one-to-one name="fooAccount" class="com.foo.web.model.account.fooAccount"></one-to-one>
            <component name="username">
                <property name="username" column="USERNAME" unique="true" />
            </component>

            <property name="userStatus">
                <column name="USERSTATUS" />
                <type name="org.hibernate.type.EnumType">
                    <param name="type">12</param>
                    <param name="enumClass">com.foo.web.model.account.UserStatus</param>
                </type>
            </property>
            <property name="userType">
                <column name="USERTYPE" />
                <type name="org.hibernate.type.EnumType">
                    <param name="type">12</param>
                    <param name="enumClass">com.foo.web.model.account.UserType</param>
                </type>
            </property>
        </component>

    </class>
</hibernate-mapping> 
```

**SecurePassword.java**（缩短）

```
/**
 * Represents a password.
 */
public class SecurePassword extends Password {

    /**
     * Default constructor
     */
    public SecurePassword() {
        super();
    }

    /**
     * Constructor method. Will throw IllegalPasswordException if password is
     * not safe.
     */
    public SecurePassword(String password) throws IllegalPasswordException {
        setPassword(password);
    }

    /**
     * Checks if the given character is a number
     * 
     * @param c
     *            The character to check
     * @return Returns true if the given character is a number
     */
    public boolean isNumber(char c) {
        // ...
    }

    /**
     * Checks is a given password is valid.
     */
    public boolean passwordValid(Password password)
        throws IllegalPasswordException {
        return passwordValid(password.toString());
    }

    /**
     * Checks is a given password is valid.
     */
    public boolean passwordValid(String password)
        throws IllegalPasswordException {

        // ...
    }

    /**
     * Sets a new password.
     */
    @Override
    public void setPassword(String password) throws IllegalPasswordException {

        if (passwordValid(password)) {
            this.password = password;
        }
    }

} 
```

**Password.java**（缩短）

```
/**
 * Represents a simple password without much restriction
 */
public class Password {
    Crypter crypter     = new Crypter();
    String  hash        = null;
    String  password    = null;

    public Password() {
        super();
    }

    public Password(String password) throws IllegalPasswordException {
        setPassword(password);
    }

    @Override
    public boolean equals(Object password) {

        if (this == password) {
            return true;
        }

        if (password instanceof Password) {
            Password p = (Password) password;
            return getHash().equals(p.getHash());
        }

        if (password instanceof String) {
            String password_str = getPassword();
            if (password_str != null) {
                return password_str.equals(password);
            }
        }

        return false;
    }

    /**
     * Returns the hashed version of this password
     * 
     * @return The hashed version of this password
     */
    public String getHash() {
        if (hash == null) {
            try {
                hash = crypter.hash(getPassword());
            } catch (FailedCryptOperationException e) {
                handleException(e, false, null, null);
            }
        }
        return hash;
    }

    public String getPassword() {
        return password;
    }

    /*
     * Handles the given exception
     */
    private void handleException(Exception e, boolean notifyUser,
        String customTitle, String customErrorMessage) {

        SystemController.handleException(e, notifyUser, customTitle,
            customErrorMessage);
    }

    public void setHash(String hash) {
        this.hash = hash;
    }

    @SuppressWarnings("unused")
    public void setPassword(String password) throws IllegalPasswordException {
        hash = null;
        this.password = password;
    }

    @Override
    public String toString() {

        return getPassword();
    }
} 
```

**MediumSecurePassword.java**

```
public class MediumSecurePassword extends SecurePassword {

    public final int    MAX_LENGTH              = 64;
    public final int    MIN_LENGTH              = 6;
    StringUtil          stringUtil              = new StringUtil();

    public MediumSecurePassword() {
        super();
    }

    /**
     * Constructor method. Will throw IllegalPasswordException if password is
     * not safe. Medium Safe passwords are at least 6 characters long.
     */
    public MediumSecurePassword(String password) throws IllegalPasswordException {
        setPassword(password);
    }

    /**
     * Checks if the given character is a number
     */
    public boolean isNumber(char c) {
        // ...
    }

    /**
     * Checks is a given password is valid. Valid means that it's secure (at
     * least 8 characters, at least 1 number, at least 1 special character).
     */
    public boolean passwordValid(Password password)
        throws IllegalPasswordException {
        return passwordValid(password.toString());
    }

    /**
     * Checks is a given password is valid. Valid means that it's "medium secure" (min.
     * length of 6).
     */
    public boolean passwordValid(String password)
        throws IllegalPasswordException {

        // ...
    }

    /**
     * Sets a new password. Will throw IllegalPasswordException if password is
     * not safe. Safe passwords are at least 8 characters long, consist of
     * numbers, letters and special characters.
     */
    @Override
    public void setPassword(String password) throws IllegalPasswordException {

        if (passwordValid(password)) {
            this.password = password;
        }
    }
} 
```

* * *

**注意：**如果我从映射文件中删除这 3 行，一切都会顺利运行：

```
<component name="password" class="com.foo.web.model.authentication.MediumSecurePassword">
 <property name="hash" column="PASSWORD" />
</component> 
```

所以，对我来说，通过 ? 获取密码的哈希值似乎有问题`passwordInstance.getHash()`？不过不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:38:19.337

在映射中使用 Password 子类的子类背后的想法是什么？

```
 <component name="password" class="com.foo.web.model.authentication.MediumSecurePassword">
            <property name="hash" column="PASSWORD" />
        </component> 
```

这里发生的是您需要在持久化上序列化*特定*的实现。在您的情况下，您的对象实现了父类 (SecurePassword)，因此它不能转换为 MediumSecurePassword。

我建议在映射中使用父类，这样您就可以在实现中同时使用 SecurePassword 和 MediumSecurePassword：

```
 <component name="password" class="com.foo.web.model.authentication.Password">
            <property name="hash" column="PASSWORD" />
        </component> 
```

# jquery - 试图让跨浏览器视频播放，但与 jQuery 明显冲突（？）

> ID：10043786
> 
> 赞同：1
> 
> 时间：2012-04-06T12:56:21.957
> 
> 标签：jquery, video, cross-browser

我有一个包含多个视频的页面，其中观众可以一次选择一个观看。我已经让它在 Chrome 18.0 和 Safari 5.1 中工作，但仅此而已。

html:

```
<div class="video" data-id="1" >
<video width="auto" height="100%" controls="controls">
  <source src="videos/cadillac_x264.mp4" type="video/mp4" />
  <source src="videos/cadillac_x264.ogv" type="video/ogg" />
  <source src="videos/cadillac_x264.webm" type="video/webm" />
<object data="videos/cadillac_x264.mp4" width="auto" height="100%">
  <embed src="videos/cadillac_x264.swf" width="auto" height="100%" />
</object> 
</video>
</div> 
```

上面有六个 div。

jQuery：

```
$(function(){
$('div.video').hide();

$('.icon').click(function(){
    var id=$(this).data('id'),
        thisDiv=$("div.video[data-id='" + id +"']"),
        thisVideo=$("div.video[data-id='" + id +"']").find('video');

    $('video').each(function () {
        this.pause();
        this.currentTime=0;
    });

       $('div.video').not(thisDiv).fadeOut();

       thisDiv.fadeIn();      
       thisVideo.get(0).play();   
});
}); 
```

FF 11.0 中的控制台说：

```
WalkingDomProcessor.process: Can't find engine for: http://mysite.com/directory/index.php 
```

和：

```
An attempt was made to use an object that is not, or is no longer, usable
[Break On This Error]   

this.currentTime = 0; 
```

在 IE 8 中：

```
this.pause();

Object doesn't support this property or method 
```

我以为我已经涵盖了在所有浏览器中查看视频的所有基础，并且印象中 jQuery 在所有现代浏览器中都运行得很好。

可以肯定的是，我将所有视频都放在了正确的目录中，并且显然正确地调用了脚本。

为什么我会收到这些错误？为什么视频不能播放？

很抱歉这篇文章的长度，但我只是想彻底。

# jquery - 使用 AjaxOptions.OnSuccess 将客户端验证添加到部分视图

> ID：10043787
> 
> 赞同：1
> 
> 时间：2012-04-06T12:56:22.513
> 
> 标签：jquery, ajax, asp.net-mvc, validation

我一直在尝试为部分视图启用客户端验证，但我发现自己陷入了困境。我已将代码添加到 AjaxOptions OnSuccess 属性，但没有任何反应。我应该指出，我对 jQuery 比较陌生，老实说，我正在尝试通过边学习边学习来完成我的第一个 MVC 应用程序。如果有人有更好的方法，请告诉我。

任何帮助将不胜感激。

我的观点的代码如下：

```
@model NorthwindLight.Models.Order

@using NorthwindLight.HtmlHelpers

@using NorthwindLight.Models

@{

    ViewBag.Title ="Create";

    AjaxOptions newOpts = new AjaxOptions();

    newOpts.UpdateTargetId ="tabledata";

    newOpts.InsertionMode =InsertionMode.InsertAfter;

    newOpts.OnSuccess ="function (tabledata) {$.validator.unobtrusive.parse($(tabledata));};";

    }

    <h2>Create</h2>

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>

    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

    @using (Html.BeginForm("Create", "Order", FormMethod.Post, new { name = "mainform", id = "mainform" })) {

    @Html.ValidationSummary(true)

   <fieldset>

       <legend>Order</legend>

      ... Code for entering Order ommitted for brevity

       <legend>Order Details</legend>

   <br />

   <table>

       <thead>

           <tr>

               <th>Product</th>

               <th>Unit Price</th>

               <th>Quantity</th>

               <th></th>

           </tr>

       </thead>

       <tbody id="tabledata">

        @if (Model.OrderDetails == null)

        {

            @Html.Partial("OrderDetailPartial", new OrderDetail())

        }

       else

       {

           foreach (var orderDetail in Model.OrderDetails)

           {

                 @Html.Partial("OrderDetailPartial", orderDetail)

           }

       }

       </tbody>

   </table>

    @Ajax.ActionLink("New Record", "OrderDetailPartial", newOpts)

    </fieldset>

    }

    <div>

       <a href="javascript:document.mainform.submit();">Create</a> | 

        @Html.ActionLink("Cancel", "Index")

    </div> 
```

以下是 _Layout.cshtml 中包含的脚本标签

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DeleteRow.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/ui.core.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/ui.datepicker.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

我在网上看到了很多与此类似的示例，但我无法让它们中的任何一个起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:41:17.680

我在另一个论坛的帮助下找到了一种方法。第一步是在局部视图中创建一个新的 FormContext（如果尚不存在）。

```
if(ViewContext.FormContext == null)
{
    ViewContext.FormContext = new FormContext();
} 
```

然后，将此 jQuery 脚本添加到您的脚本文件夹中。我叫我的 PartialViewValidation.js

```
function Success(formName) {
    $(formName).removeData("validator");
    $(formName).removeData("unobtrusiveValidation");
    $.validator.unobtrusive.parse(formName);
} 
```

然后我在 _Layout.cshtml 中添加了一个脚本标签。

```
<script src="@Url.Content("~/Scripts/PartialViewValidation.js")" type="text/javascript"></script> 
```

最后，我在 AjaxOptions 对象的 onSuccess 属性中添加了对 jQuery 函数的调用，我称之为 newOpts。注入 HTML 的主表单称为#mainform

```
newOpts.OnSuccess = "Success('#mainform')"; 
```

现在，对通过 Ajax 调用动态添加到视图的 HTML 元素进行客户端验证。

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:06:02.947

MickySmig 的回答是正确的，只要确保将 FormContext 代码放在 @model 标记之前，这意味着在局部视图中您的模型类型之前。

# arrays - 遍历一个对象数组并仅将值添加到另一个数组。昏死

> ID：10043790
> 
> 赞同：0
> 
> 时间：2012-04-06T12:56:56.827
> 
> 标签：arrays, knockout.js

朋友们。我有以下问题。我有两个可观察的数组。

```
self.NamesArray= ko.observableArray([{"name: John"}, {"name: Mario"}]); 
```

和

```
 self.ValueArray = ko.observable([]); 
```

我想遍历 NamesArray 并仅将名称值添加到 ValueArray。

所以输出的 ValueArray 最后应该包含以下元素：

```
{John, Mario} 
```

这怎么可能发生？我对 JS 很陌生，我只是在研究 Knockout 库。任何有关工作示例的帮助将不胜感激。谢谢。

小提琴：http: [//jsfiddle.net/PsyComa/RfWVP/](http://jsfiddle.net/PsyComa/RfWVP/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:45:23.303

这实际上取决于您这样做的意图。

如果您只想这样做一次，只需遍历第一个数组：

```
// Load current values of the observables
var n = self.NamesArray(), v = self.ValueArray();

// Push all names from n to v
for (var i = 0; i < n.length; i++) {
    v.push( n[i].name );
}

// Update the "values" observable
self.ValueArray(v); 
```

这样做的缺点是，每当“NamesArray”更改时，“ValueArray”都不会更新。如果您希望“ValueArray”是一个包含所有可以在“NamesArray”中找到的名称的数组（并且只有那些！），您可以使用计算的 observable 代替：

```
self.ValueArray = ko.computed(function() {
    var n = self.NamesArray(), v = [];
    // ...same for loop as above...
    return v;
}); 
```

# solr - Solr 返回 HTTP 错误 400 或 500

> ID：10043795
> 
> 赞同：3
> 
> 时间：2012-04-06T12:57:34.813
> 
> 标签：solr

因此，您正在使用 Solr，从中读取数据，对该数据执行操作，并保存更新。有用！装运它！然后（在测试中，感谢 FSM）你开始遇到一些奇怪的故障。有时它有效，有时 Solr 服务器返回 400 或 500 错误。威士忌探戈狐步舞？

假设它是一个书店应用程序。国际书店。所以这里有多个代码页。有些标题是西班牙语，有些是希伯来语。该应用程序本身是美式英语。因此，您的字段名称是英文、西里尔文的标题和其他文本，或者是希伯来文的字符排序乐趣。您注意到希伯来语中的一个（但不是全部）标题引起了问题。

您遵循的过程是：查询 Solr 以获取记录、更新记录并将整个记录写回 Solr。您正在将“计数”字段从“5”更新为“4”。一些标题更新，一些失败。谷歌搜索揭示了各种可能的红鲱鱼：它是字节顺序标记问题吗？UTF8 控制字符？配置错误？也许。但。

给定一个看起来像这样的文档更新：

```
<add>
  <doc>
    <field name="StockNumber">1</field>
    <field name="Count">5</field>
    <field name="Title">רוקד עם זאבים</field>
    <field name="Translated_Title">Dances With Smurfs</field>
    <field name="Summary">Our Hero goes to another place, bonds with the Odd Looking Natives, & saves the day.</field>  
  </doc>
</add> 
```

问题出在“摘要”字段中。具体来说，“&”。它必须被 URL 编码为`"&amp;"`，否则它后面的单词将被解释为命令，而不是更新的一部分。请注意，它是由对 Solr 的查询返回为“&”而不是作为`"&amp;"` *所以您不能只接受从查询返回到 Solr 的数据，因为它是更新 Solr 的正确格式。* 当然，如果您在写回之前对从 Solr 读取的*每个*字段进行 URL 编码，您将严重破坏它，因为希伯来语（在我们的示例中）将以十六进制形式存储，然后以该形式返回（而不是希伯来语）关于未来的查询。

但是，Solr 将存储`"&amp;"`为“&”。

< 和 > 有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:59:33.983

尝试从您的客户端应用程序发送 CDATA 标记之间的所有内容。喜欢：

```
<add>
  <doc>
    <field name="StockNumber"><![CDATA[1]]></field>
    <field name="Count"><![CDATA[5]]></field>
    <field name="Title"><![CDATA[רוקד עם זאבים]]></field>
    <field name="Translated_Title"><![CDATA[Dances With Smurfs]]></field>
    <field name="Summary"><![CDATA[Our Hero goes to another place, bonds with the Odd Looking Natives, & saves the day.]]></field>  
  </doc>
</add> 
```

当然整数字段不是必需的，但是如果您从应用程序动态构造文档，使用它总是更容易。

唯一的警告是确保文本不包含 CDATA 标记。双CDATA会到处惹麻烦。

# javascript - 使用 jquery sortable 并行排序两个不同的列表

> ID：10043803
> 
> 赞同：0
> 
> 时间：2012-04-06T12:58:45.477
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个非常特殊的情况，我需要将数据拆分为 html 中的两个不同列表。像这样：

```
<ul id="first_list">
    <li ref="1">The quick brown</li>
    <li ref="2">My father works</li>
</ul> 
```

第二个列表是这样的：

```
<ul id="second_list">
    <li ref="1">jumps over the lazy dog</li>
    <li ref="2">at the Ministry of Defense</li>
</ul> 
```

因此，正如您从“ref”属性中看到的那样，我知道`<li>`第二个列表中的哪个元素是第一个列表中哪个元素的延续`<li>`。

现在我需要为这些列表启用 jQuery UI sortable() 但是当我重新排序第一个时，我也需要重新排序第二个。我尝试使用句柄，但它不起作用，因为看起来句柄元素需要位于被移动的元素内部，但这两个位于页面中的不同位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:16:31.983

我确实相信您应该共享一些代码（您尝试过的），并且我假设您熟悉您正在使用的 Sortable 插件。您应该在 Sortable 的成功事件上运行以下代码，以便对任何 LI 进行排序后，其他列表也将被排序。无论如何，

尝试这个：

```
//This line stored the LIs in a temp variable and remove it
var $cachedList = $('<div />').html($('#second_list').html());
$('#second_list > li').remove();

//This line loads up the first UL's LIs and replaces the content for each LI 
//using $cachedList. 
$('#second_list').html($('#first_list').html()).find('li').each(function () {
    $(this).html($cachedList.find('li[ref="'+$(this).attr('ref')+'"]').html());
}); 
```

演示：http: [//jsfiddle.net/AR8px/](http://jsfiddle.net/AR8px/)

# objective-c - 更改xi b后的Objective-c SIGABRT

> ID：10043808
> 
> 赞同：0
> 
> 时间：2012-04-06T12:58:59.453
> 
> 标签：objective-c, xcode, interface-builder, sigabrt

更改 xib 文件后，我收到了 SIGABRT 信号。在构建之后，在我看到任何窗口或 GUI 之前，它说：“GDB：程序收到信号 'SIGABRT' 任何线索？文件的所有者是一个空类（这意味着除了@interface，2 个大括号 @implementation 之外什么都没有和 2 次 @end) 扩展 NSViewController。

**编辑：** 原来我在 info.plist 文件中编辑了另一个属性，这就是我得到 SIGABRT 的原因。但现在，他说“无法加载 nib 文件：myNibFile.xib”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:15:28.937

我解决了！我不小心编辑了 info.plist 文件中的“原理类”字段！

# testing - 查找破坏测试的提交，而无需在每次提交时运行每个测试

> ID：10043816
> 
> 赞同：4
> 
> 时间：2012-04-06T12:59:40.250
> 
> 标签：testing, junit, continuous-integration

我正在尝试找到可以解决以下问题的工具：

我们的整个测试套件需要数小时才能运行，这通常使得找出哪个提交破坏了特定测试变得困难或至少非常耗时，因为在两次测试运行之间可能有 50 到 200 次提交。在任何给定时间，只有极少数损坏的测试，因此与运行整个测试套件相比，仅重新运行损坏的测试非常快。

是否有一个工具，例如持续集成服务器，可以在测试正常的最后一个修订版和测试不正常的第一个修订版之间重新运行失败的测试并进行几个修订，从而自动找出具体的提交测试从成功切换到失败。

例如：

测试 A 和 B 在修订版 100 中正常。测试 A 和 B 在修订版 200 中损坏。

该工具现在应该运行版本 150 的两个测试。然后，如果测试 A 被破坏并且测试 B 在版本 150 中正常，它可以继续检查测试 A 的版本 125 和测试 B 的版本 175，依此类推，直到每个测试失败可以通过一些特定的提交来解释。

对于一个单一的测试，我可能会用 git bisect 破解一些东西。但是对于多次失败的测试，这可能还不够，因为我们需要在两个方向上搜索许多修订。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T13:11:21.420

# 混帐

您使用的是[git](/questions/tagged/git "显示标记为“git”的问题")还是[mercurial](/questions/tagged/mercurial "显示标记为“mercurial”的问题")（请参阅：[Mercurial bisect 有什么好处？](https://stackoverflow.com/questions/3534107)）？

> 假设您的项目的 2.6.18 版本可以工作，但“master”的版本崩溃了。有时，找出这种回归原因的最佳方法是通过项目历史执行暴力搜索，以找到导致问题的特定提交。git bisect 命令可以帮助你做到这一点：[...]

来自：[发现问题 - Git Bisect](http://book.git-scm.com/5_finding_issues_-_git_bisect.html)。

本质上，您将两个修订标记为开始和结束并点击：

```
$ git bisect 
```

然后运行测试并根据它是通过还是失败调用

```
$ git bisect good 
```

或者

```
$ git bisect bad 
```

分别。git 将进行二进制搜索，总是将剩余的修订减半。我想您可以轻松编写脚本。如果您使用的是[svn](/questions/tagged/svn "显示标记为“svn”的问题")，git 可以轻松导入整个存储库。

# 一次构建单个修订版

这不是一个答案，而是一个建议——只需测试每一个提交！今天，您可以轻松地集群持续集成服务器，使用服务器场测试所有提交并不难。

# iphone - 为什么会崩溃……？

> ID：10043817
> 
> 赞同：-3
> 
> 时间：2012-04-06T12:59:45.677
> 
> 标签：iphone, ios, memory-management, uinavigationcontroller

我在导航堆栈上推送一个viewController，当我到达下一个视图并返回然后重新启动视图时它以崩溃结束......这是代码..

```
SampleViewController *obj=[[SampleViewController alloc]initWithNibName:nil bundle:nil];
    obj.delegate=self; 
    self.title=@"TESTT";
    [self.navigationController pushViewController:obj animated:YES];
    [obj release]; 
```

但如果我将`obj`as 设为全局，则不会发生崩溃......我知道它很常见，但我无法弄清楚。

崩溃日志..

```
Process:         INGDirectOCRSampleApp [4940]
Path:            /Users/chetna368474/Library/Application Support/iPhone Simulator/5.0/Applications/88310229-D5BA-4B1B-BBE2-F49E1C35CD25/INGDirectOCRSampleApp.app/INGDirectOCRSampleApp
Identifier:      INGDirectOCRSampleApp
Version:         ??? (???)
Code Type:       X86 (Native)
Parent Process:  launchd [1193]

Date/Time:       2012-04-06 17:48:00.057 +0530
OS Version:      Mac OS X 10.6.8 (10K549)
Report Version:  6

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x0000000000000000
Crashed Thread:  0

Application Specific Information:
objc_msgSend() selector name: release
iPhone Simulator 272, iPhone OS 5.0 (iPhone/9A334)

Thread 0 Crashed:
0   libobjc.A.dylib                 0x0192209f objc_msgSend + 19
1   CoreFoundation                  0x01b30435 CFRelease + 117
2   CoreFoundation                  0x01c11e94 -[__NSArrayM dealloc] + 180
3   libobjc.A.dylib                 0x01922e4d _objc_rootRelease + 47
4   UIKit                           0x008760f9 -[UIView(Internal) _invalidateSubviewCache] + 44
5   UIKit                           0x0087142f __UIViewWillBeRemovedFromSuperview + 689
6   UIKit                           0x008710d7 -[UIView(Hierarchy) removeFromSuperview] + 70
7   UIKit                           0x0086d1e0 -[UIView dealloc] + 309
8   libobjc.A.dylib                 0x01922e4d _objc_rootRelease + 47
9   libobjc.A.dylib                 0x01922e10 objc_release + 48
10  libobjc.A.dylib                 0x01923c60 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 528
11  CoreFoundation                  0x01b58ed8 _CFAutoreleasePoolPop + 24
12  CoreFoundation                  0x01b5b83b __CFRunLoopRun + 2011
13  CoreFoundation                  0x01b5adb4 CFRunLoopRunSpecific + 212
14  CoreFoundation                  0x01b5accb CFRunLoopRunInMode + 123
15  GraphicsServices                0x0225e879 GSEventRunModal + 207
16  GraphicsServices                0x0225e93e GSEventRun + 114
17  UIKit                           0x0083aa9b UIApplicationMain + 1175
18  INGDirectOCRSampleApp           0x0000271d main + 125 (main.m:14)
19  INGDirectOCRSampleApp           0x00002695 start + 53

Thread 1:
0   libSystem.B.dylib               0x994de382 kevent + 10
1   libdispatch.dylib               0x0222f373 _dispatch_mgr_invoke + 918
2   libdispatch.dylib               0x0222dcd0 _dispatch_mgr_wakeup + 0

Thread 2:
0   libSystem.B.dylib               0x994dd412 __workq_kernreturn + 10
1   libSystem.B.dylib               0x994dd9a8 _pthread_wqthread + 941
2   libSystem.B.dylib               0x994dd5c6 start_wqthread + 30

Thread 3:
0   libSystem.B.dylib               0x994dd5a8 start_wqthread + 0

Thread 4:  WebThread
0   libSystem.B.dylib               0x994b7afa mach_msg_trap + 10
1   libSystem.B.dylib               0x994b8267 mach_msg + 68
2   CoreFoundation                  0x01bf813a __CFRunLoopServiceMachPort + 186
3   CoreFoundation                  0x01b5b605 __CFRunLoopRun + 1445
4   CoreFoundation                  0x01b5adb4 CFRunLoopRunSpecific + 212
5   CoreFoundation                  0x01b5accb CFRunLoopRunInMode + 123
6   WebCore                         0x03940220 RunWebThread(void*) + 560
7   libSystem.B.dylib               0x994e5259 _pthread_start + 345
8   libSystem.B.dylib               0x994e50de thread_start + 34

Thread 0 crashed with X86 Thread State (32-bit):
  eax: 0x08013060  ebx: 0x00000007  ecx: 0x01928405  edx: 0x0800e513
  edi: 0x00000000  esi: 0x00000008  ebp: 0xbfffde98  esp: 0xbfffde44
   ss: 0x0000001f  efl: 0x00010206  eip: 0x0192209f   cs: 0x00000017
   ds: 0x0000001f   es: 0x0000001f   fs: 0x00000000   gs: 0x00000037
  cr2: 0x00000000

Binary Images:
    0x1000 -   0x344fe3 +INGDirectOCRSampleApp ??? (???) <23D12858-D540-3EBA-842A-C6AC77BC14F3> /Users/chetna368474/Library/Application Support/iPhone Simulator/5.0/Applications/88310229-D5BA-4B1B-BBE2-F49E1C35CD25/INGDirectOCRSampleApp.app/INGDirectOCRSampleApp
  0x4db000 -   0x70cff7 +Foundation 881.0.0 (compatibility 300.0.0) <027E5CAE-30D1-3F0C-851D-28B153D01989> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Foundation.framework/Foundation
  0x830000 -   0xe4fff7 +UIKit 1600.0.0 (compatibility 1.0.0) <26D83691-BE8F-33A2-968F-85A36B4E076D> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/UIKit.framework/UIKit
 0x112a000 -  0x1317ffb  com.apple.CoreGraphics 1.600.0 (???) <10DC20E5-ADED-34E8-B66A-7971EF4B7F1E> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
 0x1370000 -  0x1384ff7 +OpenGLES ??? (???) <693FCBF7-B9ED-3E74-8B13-D91AEC1B9421> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/OpenGLES.framework/OpenGLES
 0x138e000 -  0x14c4ffb +QuartzCore 1.7.0 (compatibility 1.2.0) <AE0F3BAD-B9D9-3F9A-93EC-094715C34B23> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/QuartzCore.framework/QuartzCore
 0x1538000 -  0x159aff3 +libstdc++.6.dylib 53.4.0 (compatibility 7.0.0) <75457A46-A389-39C4-BF1F-D3E61BD20B9D> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libstdc++.6.dylib
 0x15f3000 -  0x160ffff +libSystem.dylib 125.0.0 (compatibility 1.0.0) <5127F6A5-1667-3F50-8F15-19A6F7628849> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libSystem.dylib
 0x1624000 -  0x1690ff3 +MobileCoreServices 34.0.0 (compatibility 1.0.0) <A1C65859-E8C7-3AF3-BD2C-6AF20276A1C5> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
 0x16bf000 -  0x1880fff +libicucore.A.dylib 48.0.0 (compatibility 1.0.0) <44D4F919-7BE7-34B1-8687-060DD594E44F> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libicucore.A.dylib
 0x190a000 -  0x19df787 +libobjc.A.dylib 227.0.0 (compatibility 1.0.0) <879E1E4D-1823-3A4A-9F16-E45A4094B69F> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libobjc.A.dylib
 0x19f1000 -  0x1aeefff +libxml2.2.dylib 10.3.0 (compatibility 10.0.0) <52BE5F04-7BA6-322A-82B9-2F86235B47C0> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libxml2.2.dylib
 0x1b12000 -  0x1b21ff7 +libz.1.dylib 1.2.5 (compatibility 1.0.0) <FB257E91-EEC6-33C5-917B-8E20E6154002> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libz.1.dylib
 0x1b26000 -  0x1ca6ff7 +CoreFoundation 675.0.0 (compatibility 150.0.0) <387FB5D2-1E55-3A8F-863D-89F0ED41DDB7> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 0x1db0000 -  0x1f1fff7 +CFNetwork 548.0.3 (compatibility 1.0.0) <3EA631BA-29CA-3BC9-A8ED-81F3844BCF33> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CFNetwork.framework/CFNetwork
 0x1fb6000 -  0x2002ff7 +SystemConfiguration 432.0.0 (compatibility 1.0.0) <DFFE2D1B-2CF3-33BE-99C2-20414AAC3BAF> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
 0x2023000 -  0x207eff7 +Security ??? (???) <A58C38F3-DF57-33FD-8767-BFFF46602036> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Security.framework/Security
 0x20a3000 -  0x20a8fff +IOKit 275.0.0 (compatibility 1.0.0) <D8D53356-F68E-3D16-834D-0451BEFB197C> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/IOKit.framework/IOKit
 0x20b0000 -  0x20c2ff7 +libCRFSuite.dylib ??? (???) <87C6506C-A64D-37CB-A6B4-D5B16147E00D> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libCRFSuite.dylib
 0x20c9000 -  0x20cafff +liblangid.dylib ??? (???) <CEDA1D3E-21DB-3766-A2C0-358E1B9FED37> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/liblangid.dylib
 0x20ce000 -  0x20e3ff3 +GenerationalStorage 124.0.0 (compatibility 1.0.0) <AB141CE7-1889-3225-83DE-809C71AC6AB4> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
 0x20eb000 -  0x20fefff +libbsm.0.dylib ??? (???) <1DDEB086-AFC7-3486-83BB-AA194E5FD33F> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libbsm.0.dylib
 0x2106000 -  0x211effb +SpringBoardServices ??? (???) <9D85DA2B-B27F-3F94-A1E1-8B4C3A57DE3E> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
 0x212e000 -  0x2137ff7 +libc++abi.dylib 15.1.0 (compatibility 1.0.0) <A2EB5EEE-E35D-3749-B631-527C48ECCB4B> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libc++abi.dylib
 0x213f000 -  0x2143fff +libSystem.override.dylib ??? (???) <893ED023-4976-3C97-97A5-DA0EAB349B7C> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/system/libSystem.override.dylib
 0x2149000 -  0x214eff3 +libcache_sim.dylib 49.0.0 (compatibility 1.0.0) <53EB5246-7978-3FB7-A272-33AC81F6B98F> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/system/libcache_sim.dylib
 0x2153000 -  0x21adffb +libcommonCrypto_sim.dylib 40146.0.0 (compatibility 1.0.0) <519CF629-B054-3DA7-90F4-08773FB53CDB> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/system/libcommonCrypto_sim.dylib
 0x21bc000 -  0x21c4ff7 +libnotify_sim.dylib 87.3.0 (compatibility 1.0.0) <DCAAE9AA-5A73-3175-A97D-A69AFF09321B> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/system/libnotify_sim.dylib
 0x21cb000 -  0x21ccff3 +libsystem_sim_blocks.dylib 54.0.0 (compatibility 1.0.0) <37A1DF5C-5076-3367-BD66-665610FD4487> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/system/libsystem_sim_blocks.dylib
 0x21d1000 -  0x21d8fff +libsystem_sim_dnssd.dylib ??? (???) <5C3A3B8C-FFEA-30ED-BBD1-71D5D97FD8A1> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/system/libsystem_sim_dnssd.dylib
 0x21de000 -  0x21f6ffb +libsystem_sim_info.dylib ??? (???) <85EDCF1A-20F6-3E73-B118-97294E96C977> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/system/libsystem_sim_info.dylib
 0x2202000 -  0x221bfff +libxpc_sim.dylib 89.9.0 (compatibility 1.0.0) <A418D307-3C2F-38DD-945D-DAE45A6582D7> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/system/libxpc_sim.dylib
 0x222c000 -  0x223afff +libdispatch.dylib 192.7.0 (compatibility 1.0.0) <54FEE9FB-F069-3FA2-BE6F-33B7FC2EFD79> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/system/libdispatch.dylib
 0x2248000 -  0x2251ff3 +MobileIcons ??? (???) <EF0292AB-A467-3882-8C92-28347A3819EE> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
 0x2258000 -  0x2267ff7 +GraphicsServices 14.0.0 (compatibility 1.0.0) <E153F0E5-7F75-3AFD-B503-5FDF565D3FC3> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
 0x2277000 -  0x22c5ffb +AppSupport 29.0.0 (compatibility 1.0.0) <8EB0F934-4EF5-37FD-B3BE-443789B3C52B> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
 0x22f2000 -  0x2555fff +ImageIO ??? (???) <A63F2787-CCAB-3A9A-A5A6-A13781509389> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/ImageIO.framework/ImageIO
 0x25c9000 -  0x2650ff7 +CoreTelephony 1259.20.0 (compatibility 1.0.0) <B050E3A1-AD1A-3716-8EF7-15CAF6A4B485> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
 0x269d000 -  0x274dfe3 +libsqlite3.dylib 9.6.0 (compatibility 9.0.0) <8E9286EE-489F-3B46-9EC7-5EEB577D266F> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libsqlite3.dylib
 0x275e000 -  0x275fffb +DataMigration ??? (???) <1F000AFF-65EA-353E-B4C6-6609068AFA5D> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
 0x2764000 -  0x2767fff +MobileInstallation ??? (???) <E3BEA46C-4DEF-36FB-BA66-141F12BDCCA1> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
 0x276d000 -  0x27a6ff3 +Bom 177.0.0 (compatibility 2.0.0) <890AB4DC-3952-32BA-A95B-9B7796EBCADF> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/Bom.framework/Bom
 0x27b6000 -  0x27c1ff7 +libbz2.1.0.dylib 1.0.5 (compatibility 1.0.0) <8B645C67-20CB-3D37-BBFA-BB128CA88156> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libbz2.1.0.dylib
 0x27c6000 -  0x2857ff3 +CoreImage ??? (???) <1A7D7B6B-F807-3AEB-8E34-A2F1D2B1B357> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreImage.framework/CoreImage
 0x2894000 -  0x28b6fff +DictionaryServices ??? (???) <F9A6B266-6EF6-3FEF-B3A5-1BC1F8E3DE6B> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
 0x28cb000 -  0x292cff7 +AddressBook 30.0.0 (compatibility 1.0.0) <247EDA1C-4F66-36E8-BFC4-A0DEBEAB982C> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/AddressBook.framework/AddressBook
 0x2962000 -  0x2bb9fff +AudioToolbox 359.0.0 (compatibility 1.0.0) <717E08AE-DD99-3A06-9C44-FF772EEA7195> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
 0x2c58000 -  0x2cf3ffb +CoreText ??? (???) <52F69A81-86F9-38A1-A100-23B6A8A4D861> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreText.framework/CoreText
 0x2d32000 -  0x2e38ffb +WebKit 534.46.0 (compatibility 1.0.0) <F383D416-4DE0-34E6-A94C-C63A3B0025FD> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/WebKit.framework/WebKit
 0x2ed5000 -  0x3e3ffe3 +WebCore 534.46.0 (compatibility 1.0.0) <EEB65FF8-9D43-3B37-96AE-3102A6BE76A5> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/WebCore.framework/WebCore
 0x44b2000 -  0x4560ffb +ProofReader 139.0.0 (compatibility 1.0.0) <9CBFF464-6B89-393C-8E43-ADC49A740546> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
 0x4578000 -  0x457effb +libAccessibility.dylib ??? (???) <78A2E26B-69F6-321D-8B5E-D07B7CBA6182> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libAccessibility.dylib
 0x4588000 -  0x4588fff +Accelerate 4.0.0 (compatibility 1.0.0) <DAE15C64-60F8-3B10-B87C-D704E169FD62> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Accelerate.framework/Accelerate
 0x458b000 -  0x45bcff3 +PrintKit 88.0.0 (compatibility 1.0.0) <B7FB7AC7-2E8D-360D-A03D-534413912239> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
 0x45d2000 -  0x45ddffb +libMobileGestalt.dylib ??? (???) <66B261AB-1F53-3BF4-9328-D0C747017B7A> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libMobileGestalt.dylib
 0x45e7000 -  0x4a4fffb +FaceCoreLight 1.4.7 (compatibility 1.0.0) <DDB8F982-43AD-3367-B34E-C9917315D6F3> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
 0x4dec000 -  0x4dfcff3 +CoreVideo 1.7.0 (compatibility 1.2.0) <5681793A-03E0-3BD2-8817-32D1568FBDE5> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreVideo.framework/CoreVideo
 0x4e0b000 -  0x4e10ffb +libGFXShared.dylib ??? (???) <78F8E32B-0447-363B-A936-1568E60DB103> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
 0x4e16000 -  0x4e58ff7 +libGLImage.dylib ??? (???) <C21A5358-73F3-3D1B-9366-68FCF58B3FC6> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
 0x4e60000 -  0x4e62ffb +libCVMSPluginSupport.dylib ??? (???) <EF8712F2-EE22-31B7-AEA6-B52E5418367C> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
 0x4e67000 -  0x4e6effb +libCoreVMClient.dylib ??? (???) <10A05BFE-EF18-3C91-B377-94BECFA42F10> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
 0x4e76000 -  0x5608fcf +libLLVMContainer.dylib ??? (???) <B3CBADCC-5A6A-325C-9C42-28E7FF9CE76F> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/OpenGLES.framework/libLLVMContainer.dylib
 0x5959000 -  0x5a80ffb +vImage 185.0.0 (compatibility 1.0.0) <AECF34F9-6885-3E80-9255-5F65F46D1226> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
 0x5a9b000 -  0x5a9bfff +vecLib 348.5.0 (compatibility 1.0.0) <9314A02C-F7F6-3F2E-AF86-71A581D86794> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
 0x5a9e000 -  0x5b03fe3 +libvDSP.dylib 348.5.0 (compatibility 1.0.0) <2971D7CF-6B2F-32F3-A335-E67F3308EA62> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
 0x5b0d000 -  0x5f27ff7 +libLAPACK.dylib ??? (???) <170AD7C4-3E12-3866-8B09-CF3D7A3901FF> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
 0x5f54000 -  0x643dffb +libBLAS.dylib ??? (???) <637EF410-C629-38BF-A00C-89DA9CB8EE64> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
 0x646b000 -  0x64dfffb +libvMisc.dylib 348.5.0 (compatibility 1.0.0) <D3E59670-5FC5-381E-B994-21261AFE195D> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
 0x64e6000 -  0x6511ff7 +libxslt.1.dylib 3.24.0 (compatibility 3.0.0) <A50B2DC2-A345-3A90-A2D3-F83A3F01B515> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libxslt.1.dylib
 0x651c000 -  0x6523ffb +AggregateDictionary ??? (???) <601ED459-B0C5-3CB6-A2CF-8EF09D68AFFE> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
 0x652a000 -  0x6541ffb +DataAccessExpress ??? (???) <9196A8BB-AA0A-3063-8A02-BCAAFF6C793B> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
 0x6554000 -  0x6563fff +AccountSettings ??? (???) <AEBCC1A4-213F-3338-AFCB-CA8728FB1134> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
 0x656d000 -  0x65c8fff +ManagedConfiguration ??? (???) <CAD36AF4-D4EB-3C35-86A3-0F78B971EB9F> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
 0x6607000 -  0x661bff7 +PersistentConnection ??? (???) <C1674D83-862C-3EEA-8172-0E52ADC900B7> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
 0x662c000 -  0x66a9fff +CoreAudio ??? (???) <9789D4A8-A5EC-318A-AEC0-11A05FCA412C> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreAudio.framework/CoreAudio
 0x66e0000 -  0x6742fff +libc++.1.dylib 25.1.0 (compatibility 1.0.0) <D0D81167-0B12-3E7A-9B79-52BBB4498158> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libc++.1.dylib
 0x6798000 -  0x6939ffb +JavaScriptCore 534.46.0 (compatibility 1.0.0) <A6AECBE2-0156-3279-BD6F-A6A951AB904C> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
 0x69a7000 -  0x69b1fff +AssetsLibraryServices ??? (???) <9717070C-6F0F-3317-8DC8-2E5689E13343> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
 0x69bc000 -  0x6aacff7 +libiconv.2.dylib 7.0.0 (compatibility 7.0.0) <81D3CF72-871D-3CD7-8A93-A840FA11B5E5> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libiconv.2.dylib
 0x6ab9000 -  0x6ab9ffb +libresolv.dylib 41.0.0 (compatibility 1.0.0) <9CDCBA6B-B685-3E68-8042-DC399A861C08> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libresolv.dylib
 0x6abe000 -  0x6b18ff7 +CoreLocation 1223.3.0 (compatibility 1.0.0) <FA7E83B9-390A-3AB8-A328-C560A4DCAF7D> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreLocation.framework/CoreLocation
 0x6b44000 -  0x6ba5ff7 +GeoServices 84.0.0 (compatibility 1.0.0) <BC020B7B-0F36-34EE-A09E-FF695F36FC8B> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
 0x6bc8000 -  0x6bccffb +CoreTime ??? (???) <15658E42-14C3-3411-AA11-48930BF4629F> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
 0x6bd3000 -  0x6bddfff +ProtocolBuffer 57.0.0 (compatibility 1.0.0) <9DC44A7F-8696-393B-AA50-69E6BC8B177F> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
 0x6cae000 -  0x6cd5ff7 +libRIP.A.dylib 600.0.0 (compatibility 64.0.0) <ECC74B2F-3924-3D1C-8715-C5A67E48A490> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
 0xaf00000 -  0xaf4cffb +libCGFreetype.A.dylib 600.0.0 (compatibility 64.0.0) <5A17326C-7E22-36FB-9200-DF0B9106C194> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x8fe00000 - 0x8fe4162b  dyld 132.1 (???) <1C06ECD9-A2D7-BB10-AF50-0F2B598A7DEC> /usr/lib/dyld
0x90f05000 - 0x90f62ff7  com.apple.framework.IOKit 2.0 (???) <3DABAB9C-4949-F441-B077-0498F8E47A35> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x95b0d000 - 0x95b10fe7  libmathCommon.A.dylib 315.0.0 (compatibility 1.0.0) <1622A54F-1A98-2CBE-B6A4-2122981A500E> /usr/lib/system/libmathCommon.A.dylib
0x994b7000 - 0x9965eff7  libSystem.B.dylib 125.2.11 (compatibility 1.0.0) <2DCD13E3-1BD1-6F25-119A-3863A3848B90> /usr/lib/libSystem.B.dylib
0x9aae7000 - 0x9ab07fe7  libresolv.9.dylib 41.0.0 (compatibility 1.0.0) <BF7FF2F6-5FD3-D78F-77BC-9E2CB2A5E309> /usr/lib/libresolv.9.dylib
0x9abc8000 - 0x9abd4ff7  libkxld.dylib ??? (???) <9A441C48-2D18-E716-5F38-CBEAE6A0BB3E> /usr/lib/system/libkxld.dylib
0xffff0000 - 0xffff1fff  libSystem.B.dylib ??? (???) <2DCD13E3-1BD1-6F25-119A-3863A3848B90> /usr/lib/libSystem.B.dylib 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:40:38.590

如果您不能使用 NSZombies，我们需要进行一些推测才能找到问题所在……

让我们首先将堆栈跟踪颠倒过来。

UIView 被释放（很可能`self.view`）

```
7   UIKit                           0x0086d1e0 -[UIView dealloc] + 309
6   UIKit                           0x008710d7 -[UIView(Hierarchy) removeFromSuperview] + 70
5   UIKit                           0x0087142f __UIViewWillBeRemovedFromSuperview + 689
4   UIKit                           0x008760f9 -[UIView(Internal) _invalidateSubviewCache] + 44 
```

这个 UIView 释放它的“subviewCache”（一个 NSArray），它被释放并向它包含的对象发送一个释放消息。

```
3   libobjc.A.dylib                 0x01922e4d _objc_rootRelease + 47
2   CoreFoundation                  0x01c11e94 -[__NSArrayM dealloc] + 180
1   CoreFoundation                  0x01b30435 CFRelease + 117
0   libobjc.A.dylib                 0x0192209f objc_msgSend + 19 
```

然后应用程序崩溃，因为它很可能试图释放一个已经被释放的对象。

看起来您的子视图之一被过度发布。

在您的代码中搜索那些没有创建`alloc`但由您发布的对象。分析仪将为您提供帮助。

检查错误的代码，如下所示：

```
UIButton *aButton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; // <- autoreleased
[self.view addSubview:aButton];
[aButton release];                                                     // <- released again. Wrong! 
```

如果一个方法不包含`alloc`, `new`，`copy`或者`retain`你不能`release`返回它返回的对象，因为该方法返回一个自动释放的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:30:39.430

你可以像这段代码一样做

```
if(obj == nil)
    obj=[[SampleViewController alloc]initWithNibName:nil bundle:nil];
obj.delegate=self; 
self.title=@"TESTT";
[self.navigationController pushViewController:obj animated:YES]; 
```

并使对象全局，在这里你不需要释放对象，当你遇到解决内存泄漏问题的这条线时，它可以在下次创建时创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:49:08.000

我确信在某些时候发布的某些内容存在问题以找到此崩溃，您必须在运行应用程序后注释掉 dealloc 函数（在所有视图控制器中）中的所有发布，并检查您不会在应用程序中发现崩溃。

一旦你到达这一点，一一取消注释 dealloc 函数。你发现崩溃...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T05:40:51.997

```
SampleViewController *obj=[[SampleViewController alloc]init];
    obj.delegate=self; 
    self.title=@"TESTT";
    [self.navigationController pushViewController:obj animated:YES];
    [obj release]; 
```

# objective-c - cocos2d瓦片地图如何制作圆形视线

> ID：10043821
> 
> 赞同：0
> 
> 时间：2012-04-06T13:00:10.893
> 
> 标签：objective-c, iphone, cocos2d-iphone

我对 cocos2d 平铺地图有疑问。我的目标是做一个圆形的视线，当玩家四处移动时，它只能看到它的周围而不是其他地方。我尝试了很多东西，并在矩形区域成功，但在圆形区域我无法成功。我在等你的答案。谢谢你的帮助。如果您立即帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:54:24.097

使用矩形区域并添加一个带有圆形渐变的 alpha 蒙版作为玩家的子级，以使可见部分变为圆形。例如褪色

![http://i.imgur.com/3IEDI.png](../Images/9cecc3fe33902ca661cbfdfd50cb5c96.png)

不褪色

![http://i.imgur.com/Y90ZR.png](../Images/4ad6b218aec8ff3c7e560eb4e4c5e1a6.png)

编辑。

绿色层是雾。只露出了一个正方形（“我尝试了很多东西，并在矩形区域中成功了”）。红色层是圆形视觉图。它覆盖了一些可见的正方形，因此用户看到了未覆盖的圆圈。

![在此处输入图像描述](../Images/168d9018ad9652655da6ea9032e4c844.png)

# php - 无法使用 PHP 将 xml 字符串发布到 web 服务

> ID：10043823
> 
> 赞同：0
> 
> 时间：2012-04-06T13:00:28.023
> 
> 标签：php, webservices-client

我已经为此工作了好几天，但我似乎无法让它工作。有人看到下面的代码有问题吗？

结果什么都没有。我没有得到任何服务的回应。我已经确认用 .Net 编写的 web 服务可以接受和 xml 字符串，我已经匹配了他们的架构等。但我没有得到任何回复。

我还应该提到，我是使用 php 使用 Web 服务的新手，但在 .Net 中这样做过无数次。

此外，有没有办法测试 webservice .asmx 以查看 php 中的任何类型的错误输出，只是为了看看它是否在服务器端工作？

```
<?php
$url = 'https://someurl/someservice.asmx';
$xml = '<?xml version="1.0" encoding="utf-8" ?>
    <query>
        <version>1.0</version>
        <login>userName</login>
        <password>password</password>
        <keyword>cancer</keyword>
    </query>'; 

$c = curl_init(); 

curl_setopt($c, CURLOPT_URL, $url); 
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);  
curl_setopt($c, CURLOPT_HEADER, true); 
curl_setopt($c, CURLOPT_HTTPHEADER, array("application/x-www-form-urlencoded", "Content-length: ".strlen($xml))); 
curl_setopt($c, CURLOPT_POST, true); 
curl_setopt($c, CURLOPT_POSTFIELDS, 'xmlInput='.urlencode($xml)); 
curl_setopt($c, CURLOPT_TIMEOUT, (int)30);  

$xmlResponse = curl_exec($c); 
curl_close ($c); 
echo 'Output :: '.$xmlResponse;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:18:10.960

尝试不

```
<?xml version="1.0" encoding="utf-8" ?> 
```

或写

```
<?xml version=\"1.0\" encoding=\"utf-8\" ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:48:42.433

您是否尝试将以下内容添加到您的请求中？

```
curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($c, CURLOPT_SSL_VERIFYHOST, false); 
```

# asp.net - SQL Server Express 2008 连接错误 (26)

> ID：10043826
> 
> 赞同：0
> 
> 时间：2012-04-06T13:00:35.763
> 
> 标签：asp.net, sql-server-2008-express

因此，我几乎没有 ASP.NET 应用程序都在 SQL Server Express 2008 上运行并且工作正常且花花公子。我刚刚安装了一个新的来测试一些东西，现在我得到了错误 26 - 找不到实例。奇怪的是，该应用程序正在与数据库对话，部分原因是它会打开用户登录页面，如果我输入错误的数据，它会返回一条关于该信息的消息（这很好）。当我输入正确的登录信息时，它会思考几秒钟，然后抛出错误 26。

这是我的连接字符串——

```
<connectionStrings>
    <add name="db_BPEntities" connectionString="metadata=res://*/App_Code.Data.db_BP.csdl|res://*/App_Code.Data.db_BP.ssdl|res://*/App_Code.Data.db_BP.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=LOCALHOST\SQLEXPRESS;initial catalog=db_BC_Build;user id=USER;password=PASSWORD;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <add name="Default" connectionString="server=LOCALHOST\SQLEXPRESS;database=db_BC_Build;USER ID=USER;password=PASSWORD;Min Pool Size=10;Max Pool Size=800;Network Library=dbmssocn" providerName="System.Data.SqlClient" />      
</connectionStrings> 
```

注意：我已经更改了用户/密码信息。数据库在与 IIS 相同的机器上本地运行（它是一个测试 Intranet 站点，所以我现在可以接受）。

所以总结：

1.  在同一数据库上运行的其他应用程序的连接问题为零。他们都连接并正常工作。
2.  此应用程序部分工作，但登录时抛出错误 26 - 找不到实例。
3.  会不会是这里有 2 个连接字符串，而我的其他数据库上有 1 个连接字符串？

真是难住了。

感谢您的任何/所有帮助:)

编辑：我认为问题出在实体框架和 SQL Server Express 上。它似乎最初是为了对用户进行身份验证而连接的，但随后用于显示数据的 EF 连接等就是它中断的地方。这就是我现在所处的位置并坚持试图解决这个问题（我没有开发这个应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:10:21.483

尝试在连接字符串中不包含“Network Library=dbmssocn”的情况下进行连接。我遇到了同样的（错误 26）问题，它确实对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:05:44.763

引用[SQL Network Interfaces, error: 26](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx)，这些是克服此问题的步骤：

> 1.  确保您的服务器名称正确，例如，名称没有拼写错误。
> 2.  确保您的实例名称正确，并且您的目标机器上实际上存在这样的实例。[更新：一些应用程序转换`\\`为`\`. 如果您不确定您的应用程序，请尝试两者`Server\Instance`并`Server\\Instance`在您的连接字符串中]
> 3.  确保服务器机器可访问，例如，DNS 可以正确解析，您可以 ping 服务器（并非总是如此）。
> 4.  确保 SQL Browser 服务正在服务器上运行。
> 5.  如果服务器上启用了防火墙，则需要将 sqlbrowser.exe 和/或 UDP 端口 1434 置于异常中。

请访问链接了解更多详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:50:06.457

我将应用程序配置文件更改为此

```
<connectionStrings>

  <!--  TLPL_ICT_OPR\MSSQLSERVER1;Initial Catalog=FMS;User ID=fms -->

  <add name="DBConnectionString" connectionString="user id=fms;data source=TLPL_ICT_OPR\MSSQLSER;persist security info=True;initial catalog=username;password=password" providerName="System.Data.SqlClient"/>
  <!--<add name="DBConnectionString" connectionString="user id=fms;data source=TLPL_ICT_PHOLIB\SQLEXPRESS;persist security info=True;initial catalog=FMS;password=fms4321"
       providerName="System.Data.SqlClient" />-->
 </connectionStrings>

 <startup>
   <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
 </startup> 
```

在此之后它工作正常....

# extjs - 视图中的 ExtJS4 XTemplates；

> ID：10043829
> 
> 赞同：1
> 
> 时间：2012-04-06T13:00:43.887
> 
> 标签：extjs, extjs4, extjs-mvc

我的问题是： “在 ExtJS4 中的类似**MVC**的项目中
使用 XTemplates 操作的正确方法是什么？”

* * *

**> XTemplate 是否应该在 YourApp 中。**查看**或在 YourApp 中。**控制器**？
ExtJS4 文档只是展示了如何将 XTemplates 与一些数据一起使用，但我还没有看到类似 MVC 的示例。
所以，

*   我们的 XTemplate 应该在哪里进行？
*   XTemplate 可以从控制器中获取一些变量作为参数吗？*（如果我会在控制器中获得一些计算数据，并且每次这些数据发生变化时，它们应该被传递给 XTemplate，并且这个 XTemplate 应该形成并将新模板呈现给网页；*

PS
对不起我的英语并感谢您的帮助；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:21:22.103

我不是专家，但我可以与您/SOF 分享一些想法，希望能帮助您更多地了解 extjs 的模板引擎。

在非常笼统的术语中，XTemplate 是构建视图/控件（网格、texfield 等）的基础。extjs 中的每个组件控件都有一个“Tpl”或“fieldSubTpl”或“subTpl”等。配置选项是用于呈现组件 UI 的 XTemplate。

所以，假设你正在使用 extjs 原生类“Ext.form.field.TextArea”，它代表一个输入文本控件，如果你查看 extjs 框架的源代码（我认为人们经常忘记查看源代码，学习和从中获得灵感，掌握事物，看看 extjs 开发团队是如何做事的）并找到它的类定义，你将能够看到 XTemplate 是如何使用的。因此，我认为如果您可以检查并理解它，ofc，sencha docs 是一种宝贵的资源，您已经得到了一些答案。

XTemplate 需要一个带有数据/单个对象的数组，其属性需要与 XTemplate 中的变量匹配，因此您有一个代表人和属性名称的对象，即`person.Name`在您的 xtemplate 中将通过在 xtemplate 中使用 {Name} 来显示名称. 您提到在控制器中进行一些计算，然后将其传递给 XTemplate，这很好，您可以这样做，但请记住，XTemplate 支持自定义函数，可以在渲染 Xtemplate 之前操作数据，如您在此示例中所见来自 sencha 文档[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.XTemplate](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.XTemplate)

如果您想要一个显式使用 XTemplates 的 MVC 应用程序，您可以在此处查看来自 sencha 的“MVC Feed 查看器”应用程序[http://docs.sencha.com/ext-js/4-0/#!/example/feed-viewer /feed-viewer.html](http://docs.sencha.com/ext-js/4-0/#!/example/feed-viewer/feed-viewer.html)

我希望它对你有帮助。

复活节快乐！**

# tsql - t-sql 中的 SaltKey 是什么？

> ID：10043831
> 
> 赞同：0
> 
> 时间：2012-04-06T13:00:52.097
> 
> 标签：tsql, salt

t-sql 中 saltkey 的用途是什么？例如在aspdotnetstorefront数据库中有一个表名customer，我们加密/解密密码然后还有另一个字段叫做SaltKey，它的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:07:53.740

您的问题含糊不清，但我认为您正在寻找有关盐的信息，这是一种加密概念，而不是关系数据库。来自[维基百科](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)：

> 如果盐足够大，使用加盐密码的好处是使查找表辅助字典攻击对存储的值不切实际。也就是说，攻击者将无法创建散列值（密码+盐）的预计算查找表（即彩虹表），因为它会占用太多空间。一个简单的字典攻击仍然是很有可能的，虽然速度要慢得多，因为它不能被预先计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:04:50.160

看到这里[http://crackstation.net/hashing-security.html](http://crackstation.net/hashing-security.html) 这将帮助你找到什么是盐..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:02:21.440

请参阅此处[http://en.wikipedia.org/wiki/Salt_%28cryptography%29](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)它与加密有关，而不是 T-SQL

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:03:27.507

更好看[http://en.wikipedia.org/wiki/Salt_%28cryptography%29](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)

# java - IEEE 754 双精度数从 MIPS C 到 Java 的转换

> ID：10043832
> 
> 赞同：1
> 
> 时间：2012-04-06T13:00:59.093
> 
> 标签：java, c, floating-point, pic, ieee-754

我有一个运行 C32 编译器的 PIC32 嵌入式微控制器。我正在向 Java 程序发送一个包含 64 位双精度值的 UDP 数据包。在我的测试中，我试图将十进制值 40.5 发送到 Java。

我希望收到：0x4044400000000000

自 System.out.println(Double.longBitsToDouble(0x4044400000000000L));

打印：40.5

如果我在没有任何转换的情况下发送 UDP 数据包，我将收到：0x00002242352D3330

知道如何将这个值导入 Java 吗？我无法对双精度的 C32 表示进行正面或反面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:00:58.300

PIC32 是小端。A`double`用64位表示，a`long`是32位。对于 64 位，您需要一个`long long`.

`htonl()`需要 a `long`，如上所述。您正在使用演员截断它，并且在字节顺序转换之后，您将获得显示的结果。

我在一个[pastebin](http://pastebin.com/g1FFFFpU)中找到了这个；它的宏应该适用于转换您的 64 位`long long`：

```
#define htonll(x) \
((((x) & 0xff00000000000000LL) >> 56) | \
(((x) & 0x00ff000000000000LL) >> 40) | \
(((x) & 0x0000ff0000000000LL) >> 24) | \
(((x) & 0x000000ff00000000LL) >> 8) | \
(((x) & 0x00000000ff000000LL) << 8) | \
(((x) & 0x0000000000ff0000LL) << 24) | \
(((x) & 0x000000000000ff00LL) << 40) | \ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:17:19.140

`htonl()`需要 a `long`，而不是`double`.

# perl - 为什么这种情况不起作用？带类的div

> ID：10043839
> 
> 赞同：0
> 
> 时间：2012-04-06T13:01:24.023
> 
> 标签：perl, web-crawler

我有一个条件，我想从特定标签中检索文本，但它似乎没有返回 true.. 有什么帮助吗？

```
#!/usr/bin/perl

use HTML::TreeBuilder;
use warnings;
use strict;
my $URL = "http://prospectus.ulster.ac.uk/modules/index/index/selCampus/JN/selProgramme/2132/hModuleCode/COM137";
my $tree = HTML::TreeBuilder->new_from_content($URL);  

if (my $div = $tree->look_down(_tag => "div ", class => "col col60 moduledetail")) {
 printf $div->as_text();
          print "test";
 open (FILE, '>mytest.txt');
 print FILE $div;
 close (FILE); 
}
      print $tree->look_down(_tag => "th", class => "moduleCode")->as_text();
 $tree->delete(); 
```

它没有进入 if 语句，并且 if 语句之外的打印说有一个未定义的值，但我知道它应该返回 true，因为这些标签确实存在。

```
<th class="moduleCode">COM137<small>CRN: 33413</small></th> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:10:05.023

You are calling `HTML::TreeBuilder->new_from_content` yet you are supplying a URL instead of content. You have to `get` the HTML before you can pass it to `HTML::TreeBuilder`.

Perhaps the simplest way is to use [LWP::Simple](https://metacpan.org/module/LWP%3a%3aSimple) which imports a subroutine called `get`. This will read the data at the URL and return it as a string.

The reason your conditional block is never executed is that you have a space in the tag name. You need `"div"` instead of `"div "`.

Also note the following:

*   You shouldn't output a single string by using `printf` with that string as a format specifier. It may generate *missing argument* warnings and fail to output the string properly.

*   You should ideally use lexical file handles and the three-argument form of `open`. You should also check the status of all `open` calls and respond accordingly.

*   Your scalar variable `$div` is a blessed hash reference, so printing it as it is will output something like `HTML::Element=HASH(0xfffffff)`. You need to call its methods to extract the values you want to display

With these errors corrected your code looks like this, although I haven't formatted the output as I can't tell what you want.

```
use strict;
use warnings;

use HTML::TreeBuilder;
use LWP::Simple;

my $url = "http://prospectus.ulster.ac.uk/modules/index/index/selCampus/JN/selProgramme/2132/hModuleCode/COM137";
my $html = get $url;
my $tree = HTML::TreeBuilder->new_from_content($html);  

if (my $div = $tree->look_down(_tag => "div", class => "col col60 moduledetail")) {
  print $div->as_text(), "\n";
  open my $fh, '>', 'mytest.txt' or die "Unable to open output file: $!";
  print $fh $div->as_text, "\n";
}

print $tree->look_down(_tag => "th", class => "moduleCode")->as_text, "\n"; 
```

# c - C - 错误：忽略scanf的返回值？

> ID：10043841
> 
> 赞同：11
> 
> 时间：2012-04-06T13:01:59.970
> 
> 标签：c

我只有几天的 C 编程，所以我不太确定这段代码有什么问题：

```
#include <stdio.h>

int main(int argc, char * argv[]) {
    int sides;
    printf("Please enter length of three sides :\n");
    scanf("%d", &sides);
    return 0;
} 
```

我收到的错误信息如下：

> 忽略scanf的返回值

我在这里做错了什么，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T13:06:05.147

你可能会编码

```
if (scanf("%d", &sides) >0) {
    printf("you want %d sides.\n", sides);
} 
else printf("You did not enter any number.\n"); 
```

[scanf](http://linux.die.net/man/3/scanf)函数（请点击链接）有几个作用

1.  它期待一些输入，并且可以修改您通过地址传递给它的变量
2.  它正在返回成功输入项目的数量

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T13:04:14.463

这是一个警告，会阻止编译器执行它的任务（设置太严格）。检查 scanf() 函数的返回值是否有错误，警告应该消失。

> 返回值
> 
> > 成功时，该函数返回成功读取的项目数。如果发生匹配失败，此计数可以匹配预期的读数数量或更少，甚至为零。如果在成功读取任何数据之前输入失败，则返回 EOF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-10T18:45:33.447

`scanf`返回“项目”的数量，即在格式字符串中传递的值（单个项目是例如`%d`，`%c`等等），以及在 的后续参数中`scanf`，例如，要读取以逗号和空格分隔的两个整数，你会利用：

```
int x, y;
int items = scanf("%d, %d", &x, &y);
assert(items == 2); 
```

我已经破坏了我上面的建议——而不是添加未使用的变量，如果你只想阅读它，添加一个断言：

```
#include <assert.h>
/* ... */
assert(scanf("%d", &sides) > 0);
/* ... */ 
```

不幸的是，`assert(scanf("%d", &sides));`这还不够，因为 EOF（这将返回`-1`）。这将是非常优雅的。

我认为这是要走的路，如果您不想`sides`在这种情况下使用未初始化的变量 ( ) 继续您的程序。

或者，您可以将 's 结果捕获`scanf`到变量中，并像其他答案一样优雅地处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:03:58.847

您不会捕获`scanf`变量中的返回值。它是读取了多少个字符的计数（作为整数），因此如果这对您很重要，那么捕获它可能会很好。

# .net - 简单代数简化的算法/操作方法

> ID：10043842
> 
> 赞同：0
> 
> 时间：2012-04-06T13:02:06.050
> 
> 标签：.net, algorithm, algebra, simplification, postfix-notation

> **可能重复：**
> [在 C# 中自动计算字符串数学表达式](https://stackoverflow.com/questions/10042960/automatically-calculate-string-mathematical-expressing-in-c-sharp)

有人可以向我指出一些资源，这些资源详细描述了如何简化简单的代数方程，例如“5x+(2x*6x)+2”，这应该导致“12x^2+5x+2”我需要处理的运算符是“ +","-","*","/","^" 和括号。到目前为止，我已经为数字项实现了一个解析器和求值器，它从 in-fix 转换为 post-fix 然后进行评估。

如果有人能给我一个关于如何实现这一目标的基本说明，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:08:50.373

如果您在内部已经有一个表示方程式的树，您可以递归地访问每个节点以找出是否有一种方法可以组合两个子节点的项。想想你会在每个节点上做什么，然后想想边界条件（节点为空，节点没有子节点等）。

这是我将如何处理它：

1.  轮流拜访每个孩子
2.  有一个函数可以在孩子中找到相同变量的共同幂并将它们组合起来。考虑多变量方程 b. 记住您的输出格式与工作副本格式。您需要将最终结果转换回文本。

这是一个开始。我认为

# java - SMSManager 和国家代码前缀

> ID：10043843
> 
> 赞同：0
> 
> 时间：2012-04-06T13:02:11.980
> 
> 标签：java, android

我正在编写一个关于 SMS 的程序，我有一个服务和一个广播接收器，当发送一条短信时，我得到“显示来源地址，然后它会自动将另一个短信重新发送到源号码，但我有一个错误/强制关闭无效的目标地址，因为当我得到源号码（我来自法国）时它是这样的：“+33617890922”但我需要像这样“0617890922”，我该怎么做？**任何帮助？？？？

```
public void onReceive(Context c, Intent intent) {
    // TODO Auto-generated method stub

 mContext = c;

          Bundle pudsBundle = intent.getExtras();

             Object[] pdus = (Object[]) pudsBundle.get("pdus");
             SmsMessage messages =SmsMessage.createFromPdu((byte[]) pdus[0]);    

             Toast.makeText(c, "Service SMS Started OK !", Toast.LENGTH_LONG).show();
             Toast.makeText(c, "SMS Received : "+messages.getMessageBody(),
             Toast.LENGTH_LONG).show();
             String str = messages.getMessageBody();
             String num = messages.getDisplayOriginatingAddress();

         String str1= PhoneNumberUtils.formatNanpNumber(num);
 if(messages.getMessageBody().contentEquals("klmj")){

                 if (intent.getAction().equals(ACTION_RECEIVE_SMS)){

                    Intent serviceIntent = new Intent(mContext, ServiceLocation.class);
                    serviceIntent.putExtra("id", str1);

                    mContext.startService(serviceIntent);
             } 
```

…………………………

* * *

好的，问题不是来自“+33”，因为我试图用“+33677890098”替换目的地地址以发送短信，它的工作，我丢失了，这是我从广播接收器获得的数据损坏了吗？这里有一些代码我也不知道如何使用我发现的名为“phoneutil”的外部库，我想，我的问题是来自我的意图收到的号码吗？我试图在没有运气的情况下引用，使用一些字符串操作也出现同样的问题...... wtf请帮助谢谢你

更新：我注意到字符串“str”在“lo”方法中使用时为空，请参阅下面的代码修改：

```
public class ServiceTe extends Service{
private final String ACTION_RECEIVE_SMS =  "android.provider.Telephony.SMS_RECEIVED";  
private String initData;
int myLatitude , myLongitude;
private String loc;
private String str;
private String num;
public void onCreate(){

lo();

}
public int onStartCommand(Intent itn, int num1, int flag){

 str = itn.getStringExtra("id");
 Toast.makeText(this, "One !" +str, Toast.LENGTH_LONG).show();

return 0;
}

public void lo(){
    // TODO Auto-generated method stub

     Toast.makeText(this, "Two !", Toast.LENGTH_LONG).show();
     TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
     GsmCellLocation cellLocation = (GsmCellLocation) telephonyManager.getCellLocation();

        //This Toast show : "" , Nothing...

    Toast.makeText(this, str, Toast.LENGTH_LONG).show();

        int cid = cellLocation.getCid();
        int lac = cellLocation.getLac();

        if(RqsLocation(cid, lac)){

      loc = (
              String.valueOf((float)myLatitude/1000000)
              + " : "
              + String.valueOf((float)myLongitude/1000000));
    Its doesnt work like this,Force Close , and invalid DestinationAddress error
    SmsManager.getDefault().sendTextMessage(str OR this :        itn.getStringExtra("id"); , null, loc, null, null);

        }else{ Its work like this !
            SmsManager.getDefault().sendTextMessage("+33643598356", null, "Cant Report Location", null, null);
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:53:45.667

好的，我解决了问题，无论如何感谢您的帮助，请看下面的代码：

```
 public class ServiceTe extends Service{
 private final String ACTION_RECEIVE_SMS =  "android.provider.Telephony.SMS_RECEIVED";  
 private String initData;
 int myLatitude , myLongitude;
 private String loc;
 private String str;
 private String num;
 public void onCreate(){

 }
 public int onStartCommand(Intent itn, int num1, int flag){

  str = itn.getStringExtra("id");
  Toast.makeText(this, "One !" +str, Toast.LENGTH_LONG).show();

 //Call here lo with str as argument: 
 lo(str);

 return 0;
 }

 //Added a string here to receive the Data String from the intent(str)...

 public void lo(String num){
// TODO Auto-generated method stub

 //Thats all i have my data from my intent avaible here !

 Toast.makeText(this, "Two !", Toast.LENGTH_LONG).show();
      TelephonyManager telephonyManager =         (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
 GsmCellLocation cellLocation = (GsmCellLocation) telephonyManager.getCellLocation();

    int cid = cellLocation.getCid();
    int lac = cellLocation.getLac();

    if(RqsLocation(cid, lac)){

  loc = (
          String.valueOf((float)myLatitude/1000000)
          + " : "
          + String.valueOf((float)myLongitude/1000000));
Its doesnt work like this,Force Close , and invalid DestinationAddress error
  SmsManager.getDefault().sendTextMessage(str, null, loc, null, null);

    }else{ Its work like this !
        SmsManager.getDefault().sendTextMessage("+33643598356", null, "Cant Report Location", null, null);
    }; 
```

# uml - 在 UML 类图中使用哪条关系线？

> ID：10043848
> 
> 赞同：0
> 
> 时间：2012-04-06T13:02:26.427
> 
> 标签：uml, diagram, relationship, class-diagram, relationships

在 UML 类图中，我想显示两个类之间的关系，其中第二个类是第一个类变量的类型。

我看过[这里，](http://en.wikipedia.org/wiki/Class_diagram#Relationships)但仍然不确定我应该使用哪种关系。

我认为这可能是**依赖**关系，但我不确定。

我应该使用哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:07:32.687

这听起来像是一个[组合（有一个）](http://en.wikipedia.org/wiki/Object_composition) ，但需要更多地了解您的图表。

# c++ - VS 2003 在后期构建期间无法 regsvr32。命令提示符没有问题

> ID：10043865
> 
> 赞同：1
> 
> 时间：2012-04-06T13:04:12.467
> 
> 标签：c++

Regsvr32 作为 DLL 项目的构建后事件失败。

构建后事件： regsvr32 /s /c "$(TargetPath)" （也尝试不带引号）。

删除 /s 会导致错误消息 LoadLibrary("...") failed - The specified module could not be found。

如果我从命令提示符运行 regsvr32 结果是成功的。如果我复制并运行甚至直接运行“BAT000019.bat”文件，我会收到结果消息“...dll 中的 DllRegisterServer 成功”。我已经在 Dependency Walker 中加载了 DLL，没有发现任何问题。这在过去有效，但突然开始出现问题。我有大约 50 个具有相同后期构建事件的项目，只有大约 3 个有这个问题。生成bat文件时DLL文件确实存在（可能正在使用中？？？）。

我没有看到生成的 bat 文件有任何问题：

```
@echo off
regsvr32 /c "C:\ ... .dll"
if error level 1 goto VCReportError
goto VCEnd
:VCReportError
echo Project : error PRJ0019: A tool returned an error code from "Performing registration"
exit 1
:VCEnd 
```

其他信息： 操作系统：Windows XP SP3。IDE：VS 2003 Pro（最新）。语言：C++

我可以只删除构建后事件，但宁愿为我们的一些较新的程序调试器保留它。

有人对如何解决这个问题有任何想法吗？

我尝试过的其他事情：构建后事件中 DLL 的相对路径。（失败）构建后事件中 DLL 的绝对路径。（失败）不带引号（绝对路径中不包含空格）。（失败）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:48:46.160

我认为您的项目不仅仅是由一个 DLL 制作的，也许您正在构建的 DLL 依赖于**其他库**（检查 DependencyWalker 并验证是否`LoadLibrary`/`GetProcAddress`也）但它们不存在用于 dll 的构建后事件。

如果您从输出目录中的命令提示符运行，那么您的 dll 需要的所有东西都可以注册。

据我所知，您无法为解决方案设置构建后事件，因此请检查您的项目依赖项/构建顺序）。我假设您不会尝试在其输出目录中单独注册 dll 而没有其依赖项（批处理中的路径应该匹配`$(TargetPath)`）

# c# - 在 C# 中使用 new 关键字继承

> ID：10043872
> 
> 赞同：1
> 
> 时间：2012-04-06T13:04:30.097
> 
> 标签：c#, inheritance, new-operator

我试图理解 C# 中的继承，这就是我尝试一些示例的原因，但我知道使用**new**关键字或没有 new 关键字的事情是相同的。

那为什么我们需要**新的**关键字呢？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        try
        {
            List<int> col = new List<int>();
            Class1 c1 = new Class1();
            Class2 c11 = new Class2();
            Class1 c111 = new Class3();
            c1.setmessage();
            c11.setmessage();
            c111.setmessage();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    }

}
class Class1
{
    private string member;

    public  void setmessage()
    {
        MessageBox.Show("Class1");
    }
}

class Class2 : Class1
{
    private string member;

    public  void setmessage()
    {
        MessageBox.Show("Class2");
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T13:07:32.323

在这种`new`情况下，关键字表示方法的*阴影*。

这意味着您**不是**从基类中重写方法，而是编写一个完全*独立*的方法，就继承而言。

如果编译器未将其用于未被覆盖的可覆盖方法，则编译器会发出警告，因为大多数情况下这是一个错误，并且应该简单地覆盖该方法。在`new`那里有关键字表明阴影是一个明确的决定。

请参阅[C# 中的阴影和覆盖之间的区别？](https://stackoverflow.com/q/392721/1583).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T13:10:06.410

如果没有`new`关键字，则会出现编译器警告，因为编译器不确定您是否打算隐藏它。您应该指定`new`or `override`，以便编译器知道您没有犯错误。

这类似于“为什么`private`类成员有关键字，因为它们默认是私有的？” 和“为什么类有`internal`关键字，因为它们默认是内部的？”。常见的答案是，显式通常比隐式更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-30T21:18:55.943

在继承中，您可以将基类中的方法标记为虚拟方法，这使派生类有机会覆盖它，从而为派生类提供不同的实现。

但是如果基类没有将方法标记为虚拟方法，那么派生类就不能覆盖基类方法。如果派生类实现了与基类同名的方法，它将作为独立于基类的方法实现。此时编译器会发出警告，指出派生方法“隐藏”了从基类继承的成员。如果使用 new 关键字，该编译器就会消失。

一个例子：

```
class Base
{
     public void DoWork()
     {
         Console.WriteLine("Base.DoesWork");
     }
}

class Derived : Base
{
    public void DoWork()  
    // warning Derived.DoWork() hides inherited member Base.DoWork(). 
    // Use the new keyword if hiding was intended
    {
        Console.WriteLine("Derived.DoesWork");
    }
} 
```

如果你使用`public new void DoWork()`编译器警告就会消失。

有趣的是，如果您执行：

```
Base b = new Base();
b.Execute();
b = new Derived();
b.Execute(); 
```

输出将是“Base.DoesWork” - 两次。

# winapi - SetTimer IDEvent 返回值问题

> ID：10043877
> 
> 赞同：2
> 
> 时间：2012-04-06T13:04:55.337
> 
> 标签：winapi, vba, timer

目前我正在尝试在 VBA 中实现一个计时器类。为此，我使用了 Windows API 的 SetTimer 和 KillTimer 函数......

这是来自 Msdn 的界面：

```
 UINT_PTR WINAPI SetTimer(
  __in_opt  HWND hWnd,
  __in      UINT_PTR nIDEvent,
  __in      UINT uElapse,
  __in_opt  TIMERPROC lpTimerFunc
); 
```

这就是我在 VBA 模块中声明函数的方式：

```
Private Declare Function SetTimer Lib "user32" (ByVal Handle As Long, _
                                                ByVal TimerIDHandle As Any, _
                                                ByVal ElapseTime As Long, _
                                                ByVal AddressOfAndYourHandlerFunctionName As Long) As Long

                                                'TimerIDHandle is of Type Any so I can pass Nothing to the function 
```

然后我以这种方式调用该函数：

```
Dim TimerID As Long

TimerID = SetTimer(Application.hWndAccessApp, ByVal 0&, Timer.Timeout, AddressOf TimeOutHandler) 
```

由于 Vba 不接受“Null”，我尝试实现“ByVal 0&”。这是正确的方法吗？无论如何...我从同一个应用程序中多次调用此函数，并且该函数始终返回 1 作为标识符，尽管根据 Msdn 的说法，该函数应该为在当前窗口句柄中创建的每个计时器返回一个唯一 ID访问应用程序。

此外，当我只创建一个计时器时，回调函数被调用，但计时器 ID 为 0，而 Settimer-Function 在初始化时返回 1。这是我的回调函数头：

```
Private Sub TimeOutHandler(ByVal WindowHandle As Long, _
                           ByVal TimerMessage As Long, _ 
                           ByVal TimerID As Long, _ 
                           ByVal ElapsedTime As Long) 
```

我哪里错了？

当然，非常感谢任何帮助;-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:32:25.213

有效。如果失败，那么它将返回 0。您在回调中为 TimerID 获得一个 0，因为您在创建计时器时为 nIDEvent 参数传递了一个 0。您需要使用 SetTimer 返回的值来调用 KillTimer()。把它想象成一个计时器“手柄”。

你永远不会让这段代码在 64 位模式下工作，所以只需将第二个参数声明为 Long。

# java - String.valueOf(int) 、`+` 字符串运算符和 Integer.toString(int) 之间的区别

> ID：10043878
> 
> 赞同：1
> 
> 时间：2012-04-06T13:04:58.300
> 
> 标签：java

对这是否会被否决或关闭没有信心......我需要对此的专家意见。

上下文在我们的应用程序中，我们编写了如下代码：

```
//countryId is an integer, searchCity() expects two String parameters
loadCity(countryName , countryId + ""); 
```

如果我改变（我被迫这样做）这样的电话会有什么不同：

```
loadCity(countryName, String.valueOf(countryId)); 
```

或者，

```
loadCity(countryName, Integer.toString(countryId)); 
```

这会对性能产生任何影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:09:11.437

我想说主要的区别是*可读性*。这里的微基准没有用。恕我直言`String#valueOf`，读得最好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T13:10:13.023

对于您给出的示例，答案实际上取决于您使用的“整数”类型。

```
loadCity(countryName , countryId + ""); 
```

对于一个`Integer`对象，这相当于：

```
loadCity(countryName, countryId.toString() + ""); 
```

而对于`int`原语，此代码等效于：

```
loadCity(countryName, String.valueOf(countryId) + ""); 
```

无论哪种情况，正如 ArjunShankar 指出的那样，编译器很有可能已经优化了您的代码。所以如果你的问题是“我要回去重构我所有的代码吗？”，那么我会说“不要为小事操心”。但在未来使用更传统的方法来避免反对票。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T13:08:31.917

[从](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#valueOf%28char%29)文档`String.valueOf`

“表示正是一个参数的 Integer.toString 方法返回的表示。”

我会使用`String.valueOf`它，因为你可以在更多的整数上使用它，即你不必知道你是否有一个 int、double、bool 等......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:14:27.457

它们是相同的......因为方法 String.valueOf(int i) 隐式调用 Integer.toString(i, 10);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T13:16:21.423

对这两种方法的搜索告诉我所有这些都是等效的：

```
 String.valueOf(countryId) 
    Integer.toString(countryId) 
    countryId.toString() //Only if countryId is an Integer 
```

因为他们都叫：

```
 Integer.toString(countryId, 10) 
```

唯一的区别是如果您希望使用不同的基数，即：

```
 Integer.toString(countryId, radix) 
```

我个人认为`countryId.toString()`使用整数时阅读效果更好。否则`Integer.toString(countryId)`就是要走的路。但这只是我个人的看法。性能方面，您应该使用`Integer.toString(countryId, 10)`.

我认为将空字符串添加到 int 以将其转换为 String 是一种不好的做法。

# jquery - 使用下一个和上一个按钮 jquery 淡入淡出

> ID：10043880
> 
> 赞同：0
> 
> 时间：2012-04-06T13:05:04.027
> 
> 标签：jquery

我想知道如何编写一个带有淡入淡出动画的小图像旋转器，我有一些 div，我添加了两个按钮 next 和 prev ：

```
<div id="target" class="cible" style="height: 240px;">   
     <div id="211" class="block" style="display: block;"> </div>
     <div id="491" class="block" style="display: none;"> </div>
     <div id="496" class="block" style="display: none;"> </div> 
```

和带有按钮的 div

```
 <div id="next" class="next"></div>
   <div id="prev" class="prev"></div> 
```

我尝试使用 .next() 和 .prev() 和 addClass() 函数，但我并没有真正了解当前 div 的机制。如果有人可以解释

谢谢

我试试这个，它有效但不是真的。

```
 $(".next, .prev").click(function() {
var next_visible = $(this).hasClass(".prev") ? 
        $(".block:visible").prev(".block") : 
        $(".block:visible").next(".block");
$(".block").hide();
next_visible.show();
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:07:34.593

鉴于您的新要求，我会这样做：

这个想法是将活动元素作为一个类，当您单击上一个或下一个按钮时，您将活动元素更改为上一个或下一个元素。在 CSS 中，您说除了显示的活动幻灯片之外，所有幻灯片都是隐藏的。

**HTML：**

```
<div id="target" class="cible" style="height: 240px;">   
     <div id="211" class="slide">211</div>
     <div id="491" class="slide active">491</div>
    <div id="496" class="slide">496</div>
</div>
<!-- same next and prev buttons as yours --> 
```

**CSS：**

```
.slide {
  display:none;   
}
.active {
 display:block;   
} 
```

**jQuery：**

```
$("#next").click(function() {
    activeElem = $("#target .active");
    if (!activeElem .is(':last-child')) {
     activeElem .removeClass('active').next().addClass('active');
    }
});
// similar click event for the $("#prev") button 
```

jsFiddle在这里：http: [//jsfiddle.net/guz7D/](http://jsfiddle.net/guz7D/)

* * *

基于相同的想法，我修改了代码以包含新元素的淡入：

```
activeElem .removeClass('active').fadeOut(0).next().addClass('active').fadeIn(400); 
```

jsFiddle在这里：http: [//jsfiddle.net/guz7D/1/](http://jsfiddle.net/guz7D/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:09:04.227

你真的应该为此使用一个 jQuery 插件。例如，[nivo 滑块](http://nivo.dev7studios.com/)是一个很好的多价滑块插件。

如果你想要一些非常简单的东西，你有 jQuery 插件[tiny casousel](http://baijs.nl/tinycarousel/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T18:57:39.900

在编写了许多自定义滑块之后，这是我使用的方法。我这样做是为了尽量减少创建的 jQuery 对象的数量。这是因为您从不测试以查找活动元素，它由变量管理。做任何像 $(elem:visable) 或 $(elem).hasClass 是浪费 jQuery 对象，你不应该使用 jQuery 来检测你的应用程序的状态，除非你真的必须这样做。

```
//create a universal block jQuery object, and give it an index property (current)
var blocks = $('div.blocks');
    blocks.current = 0;

var next   = $('.next'),
    prev   = $('.prev');

//make a universal slide handler
function blockControl(index){
    //using hide and show here to fit your example, 
    //but this is where you would do slide or fades or whatever animation
    //the important part is it is 'showing' based on .eq()
    blocks.hide().eq(index).show();
}

//setup the initial state
blockControl(blocks.current);

next.on('click', function(){
    //move current up one        
    blocks.current ++;
    //test if its the last block
    if( blocks.current >= blocks.length ){
        //prevent over reach
        blocks.current = blocks.length;
        //handle how the last slide will work, you could loop back the beginning or 
        //whatever. Here we are just going to hide the next button.
        next.fadeOut();
        prev.fadeIn();
    }else{                        
        //insure prev button is visalbe
        prev.fadeIn();            
        //do slider
        blockControl(blocks.current);
    }           
});

prev.on('click', function(){
    //move current down one        
    blocks.current --;
    //test if its the first block
    if( blocks.current <= 0 ){
        //prevent negative numbers
        blocks.current = 0;
        //Here we are just going to hide the prev button. But we also could put in control 
        //to loop the last or whatever
        prev.fadeOut();
        next.fadeIn();
    }else{                        
        //insure next button is visalbe
        next.fadeIn();            
        //do slider
        blockControl(blocks.current);
    }           
}); 
```

这里的逻辑分离很重要。拥有一个控制块可视性的处理程序意味着它可以由箭头以外的东西触发。箭头逻辑和控制器逻辑也可以相互独立地改变。此外，您始终可以从应用程序的任何部分访问当前正在显示的元素，而无需测试或查询。

我希望您真正理解这里的概念以及为什么它会以这种方式分离出来。此模式可用于几乎任何类型的滑块或内容旋转器。例如，如果您想要小的可点击项目符号指示器，它很容易挂钩：

```
var bullets = $('a.bullet');
bullets.on('click',function(){
     var index = $(this).index();
     bullets.removeClass('active').eq(index).addClass('active');
     blockControl(index);
}); 
```

等等。

如果您将其设为 OO 样式，这会变得更酷，因此您可以在一个页面上拥有多个滑块。不过那是另一回事了。

# mysql - SQL INSERT INTO 多个表

> ID：10043887
> 
> 赞同：0
> 
> 时间：2012-04-06T13:05:32.603
> 
> 标签：mysql, sql

你怎么能对这两个做一个查询？我会将数据插入两个表中。

```
 $query = "
              INSERT INTO dc_mail_users (
                  i_id_pk, c_user, c_passwd_md5, i_user_active_id_fk, i_user_type_id_fk
              ) VALUES (
                  %1%, %2%, %3%, %4%, %5%
              )";

 $query2 = "
              INSERT INTO dc_mail_user_data (
                   i_id_ut, c_user_sex, c_user_name, c_user_surname, c_user_url
              ) VALUES (
                  %1%, %2%, %3%, %4%, %5%
              )"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:07:20.873

您不能使用一个查询插入 2 个表。

您将需要使用一个存储过程，您可以在其中放置该插入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:15:45.393

这样做的目的是什么？您是否尝试将数据从一个 HTML 表单插入到两个不同的表中？我不知道存储过程，但我在类似的情况下使用事务，如下所示：

```
$d = dbSingle::dbLink();
//set autocommit to false
mysqli_autocommit($d->getDbc(), FALSE);

$query = " INSERT INTO dc_mail_users (
              i_id_pk, c_user, c_passwd_md5, i_user_active_id_fk, i_user_type_id_fk
          ) VALUES (
              %1%, %2%, %3%, %4%, %5%
          )";

$r = $d->sqlQ($query);

//get the last inserted id for the second query
$last_insert_id = $d->getInsertId();                    

$query2 = "
          INSERT INTO dc_mail_user_data (
               i_id_ut, c_user_sex, c_user_name, c_user_surname, c_user_url
          ) VALUES (
              %{$last_insert_id}%, %2%, %3%, %4%, %5% //not sure about the syntax, sorry
          )";

$r2 = $d->sqlQ($query2);

//rollback if either one of the queries failed
if (!$r || (isset($r2) && !$r2)) {
  mysqli_rollback($d->getDbc());
}
  else  {
    //commit if everything worked
    mysqli_commit($d->getDbc());

  //autocommit on
  mysqli_autocommit($d->getDbc(), TRUE);
  } 
```

这假定`i_id_ut`表`dc_mail_user_data`中是 FK 并且`i_id_pk`是自动增量字段。我有一个名为 dbSingle 的类，其中包含查询函数和数据库连接。希望它足够清楚，可以与常规 mysqli 函数一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T13:10:13.557

您可以使用触发器或存储过程，但不能使用简单的插入查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T08:18:50.633

```
$query  = "
              INSERT INTO dc_mail_users 
                  (i_id_pk, c_user, c_passwd_md5, i_user_active_id_fk, i_user_type_id_fk) 
              VALUES (%1%, %2%, %3%, %4%, %5%)
          ";  

$query2 = "
             INSERT INTO dc_mail_user_data 
                  (c_user_sex, c_user_name, c_user_surname, c_user_url) 
             VALUES (%1%, %2%, %3%, %4%)";

// start query 1           
$dbh = new DB_Mysql_Extended;
$dbh->prepare($query)->execute($this->i_id_pk, $this->c_user, $this->c_passwd_md5, $this->i_user_active_id_fk, $this->i_user_type_id_fk);

// start query 2
$dbh2 = new DB_Mysql_Extended;
$dbh2->prepare($query2)->execute($this->c_user_sex, $this->c_user_name, $this->c_user_surname, $this->c_user_url); 
```

# git - Git - 将分支移动到主控

> ID：10043888
> 
> 赞同：32
> 
> 时间：2012-04-06T13:05:39.967
> 
> 标签：git, git-branch, branching-and-merging

我有一个有实际来源的分支，很长一段时间我都没有做出任何提交来掌握，目前它已经完全过时了。我只想用我的分支的内容替换 master 的内容。一种方法是检查分支和主节点，删除主节点的内容并将内容从分支复制到主节点，然后将结果推送到主节点。

它有效，但我相信必须有一些 git 命令才能以更简单的方式完成它。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-06T13:07:43.277

您可以使用以下命令让 master 指向新位置：
`git branch -f master branchToMoveMasterTo`

这实际上是在创建一个新的分支`master`，称为指向`branchToMoveMasterTo`. 由于我们已经有一个名为 master 的分支，我们需要`-f`flag 来表示我们要删除原来的`master`

# ruby-on-rails - Rspec 匹配 ActiveRecord 结果集

> ID：10043891
> 
> 赞同：0
> 
> 时间：2012-04-06T13:05:52.853
> 
> 标签：ruby-on-rails, unit-testing, rspec, controller, tdd

更新：我现在意识到我一直在误读差异，并且我在比较的一侧有一个字符串或符号。然而，我仍然不确定我应该如何在这个测试中寄予期望..

一般来说，我是 Rspec 和 TDD 的新手，我遇到了这个问题。我有一个控制器可以做到这一点：

```
def index
  @users = User.page(params[:page])
end 
```

（我正在使用Kaminara进行分页）

还有一个规格：

```
describe "when the user DOES have admin status" do

  login_admin_user
  it "should allow the user access to the complete user list page" do
    get :index
    response.response_code.should == 200
  end

  describe "and views the /users page" do
    before(:each) do 
      User.stub(:page) {[ mock_model(User), mock_model(User), mock_model(User) ]}
    end

    it "should show all users" do
    get :index  
    assigns (:users).should =~ User.page
    end
  end

end 
```

规范失败，原因如下：

```
Failure/Error: assigns (:users).should =~ User.page
   expected: [#<User:0x5da86a8 @name="User_1004">, #<User:0x5d9c90c @name="User_1005">, #<User:0x5d93ef6 @name="User_1006">]
        got: :users (using =~)
   Diff:
   @@ -1,4 +1,2 @@
   -[#<User:0x5da86a8 @name="User_1004">,
   - #<User:0x5d9c90c @name="User_1005">,
   - #<User:0x5d93ef6 @name="User_1006">]
   +:users 
```

这些结果集看起来相同。为什么这个规范会失败？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:13:42.513

我认为问题在于`assigns`. 它将符号`:users`与您的列表进行比较。将其更改为：

```
assigns(:users).should =~ User.page 
```

并且只是关于如何阅读 Rspec 失败的注释。之后的部分`expected`是你给的`should`，而之后的部分`got`是你的代码实际产生的值。因此，从报告中可以清楚地看出，结果集并不相同。

# mysql - 从 MySQL 几何列中检索坐标

> ID：10043896
> 
> 赞同：3
> 
> 时间：2012-04-06T13:06:17.040
> 
> 标签：mysql, sql, google-maps, geospatial

我刚开始使用 MySQL Geospatial 扩展，希望能在我的 500K 点数据库中加快 lat/lng 范围搜索。将创建一个新`GEOMETRY`列`p`。

**问题：**`p` &`AsText(p)`返回的值只是`(BLOB)`，而不是十进制度。不返回任何值`GeomFromText(p)`。因为我有冗余`lat`和`lng`列，所以我仍然设法获得我需要的 lat lng 值。但我正在考虑删除`lat`and `lng`cols 并仅依赖`p`.

**将现有 Lat/Lng 值转换为点**

```
UPDATE listings SET p = GeomFromText('POINT(39.948177 -75.174324)') WHERE listing_id = '585221'; 
```

**尝试从 GEOMTRY col 检索 Lat Lng`p`**

```
SELECT listing_id, lat, lng, GeomFromText(p), AsText(p), p from listings WHERE MBRContains( GeomFromText('Polygon((39 -76, 40 -76, 40 -74, 39 -74, 39 -76))'), p) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:50:32.320

如果您使用`AsText`，您将获得 WKT 格式的对象。要提取点坐标，请使用：

```
SELECT listing_id X(p), Y(p)
FROM listings
WHERE MBRContains( GeomFromText('Polygon((39 -76, 40 -76, 40 -74, 39 -74, 39 -76))'), p) 
```

MySQL 可能会返回`AsText`BLOB 的结果，因为它对于复杂对象可能会变得很长。只是你用来显示结果的任何东西都无法应付，但文本就在那里。

# php - 使用 MySQL 数据库或文本文件中的数据安排电子邮件

> ID：10043897
> 
> 赞同：1
> 
> 时间：2012-04-06T13:06:34.883
> 
> 标签：php, mysql, email, cron, scheduling

我正在创建一项服务，用户提交存储在 MySQL 数据库或文本文件中的数据，并在每周的特定时间通过电子邮件发送到特定地址。

我知道这不是 PHP 的用途，而且我读过一个叫做 Cron 的东西可以完成这项工作，但我想知道是否还有其他选择？是否有一个脚本可以从 Gmail 发送，可能带有粘贴或附加的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:57:49.713

最好的方法是使用 Cron 作业。如果由于某些原因您无法使用它们，那么您可以使用[thecloudblocks.com](http://www.thecloudblocks.com/)的服务来安排作业。

或者，您可以创建一个函数来休眠，直到工作时间到来。喜欢，

```
function do_some_job_at($time){
       time_sleep_until($time);
       JOB();
}

do_some_job_at(time() + 20); //Runs job after 20 seconds. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:58:46.457

我只能想到两种方式来做到这一点：

1.  有一个 cron 作业每 x 分钟调用一次发送脚本

    ```
    $database->query("SELECT * FROM `mail_queue` WHERE `time` < " . time());
    while($object = $res->fetch_object()){
        mail($object->to, $object->subject, $object->message, "FROM: xpto@domain.com");
    } 
    ```

    （如果您使用的是虚拟主机帐户，您可以简单地在控制面板上创建它）

    ```
    * * * * * /bin/php complete_path_to_your_php_script.php 
    ```

2.  让脚本在循环中运行（不可靠，因为它可能由于超时、错误、内存中断......而停止工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T13:36:54.210

如果您需要始终运行 php 脚本，那么我建议您使用 upstart 作业/服务

# java - 如何在 Jackrabbit 中更新或删除用户？

> ID：10043899
> 
> 赞同：3
> 
> 时间：2012-04-06T13:06:50.437
> 
> 标签：java, jackrabbit

从示例和深入研究 Jackrabbit 中的实现，我发现了如何创建用户和设置权限。但是，我不太确定您需要做什么来更新用户或删除它。您是否必须在安全工作区中删除他们的节点，或者它是如何工作的？

示例和链接将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T13:49:51.553

我也找不到任何好的链接。但是，这适用于我使用 DefaultSecurityModule 和 DefaultLoginModule ...

```
JackrabbitSession adminSession = ...

UserManager userManager = adminSession.getUserManager();
AccessControlManager accessManager = adminSession.getAccessControlManager();

Authorizable user = userManager.getAuthorizable("username");
if (user != null)
    user.remove(); 
```

您可以调用 user.setProperty(String name, Value value) 来设置自定义属性。要将密码强制转换为用户，您可以调用 User.changePassword(String password)。

# python - Pygame - 将表面存储为图像

> ID：10043904
> 
> 赞同：2
> 
> 时间：2012-04-06T13:07:21.950
> 
> 标签：python, image, pygame, geometry-surface

这只是我在 pygame 的第二天，我对很多功能不太了解。以下是我在表面（窗口）上所做的示例

```
for c in nStations:
  pygame.time.wait( 20 )
  pygame.draw.circle( window, c.tColor, c.tPosition, c.iRadius )
  pygame.display.update() 
```

这是循环显示`n`的圈数（在一个元组中）。现在，这将重复总共 5-6 次。我希望将表面窗口存储/保存为图像（或子表面）并将其作为缩略图/链接放在窗口的右上角。

是否可以？或者这`pygame`不是一个好的图书馆？我也尝试`cocos2d`过，但与`pygame`.

如果我的问题在任何地方都没有任何意义，请回复。我会继续更新它。

**PS**我见过[python.surface](http://www.pygame.org/docs/ref/surface.html)库函数。和 surface.copy 似乎是我正在寻找的东西，但我可以在复制和进一步编辑之前将表面存储为缩略图/图像吗？

**编辑**->阅读 jsbueno 的回复后，我做了什么：

```
 tThumbs.append( pygame.transform.smoothscale( window, (32, 32) ) )
  # the above statement inside drawing-circle loop

i = 1
for thumb in tThumbs:
  window.blit( thumb, (1050, 36*i) )
  pygame.display.update()
  i += 1
  pygame.time.wait( 200 ) 
```

以上似乎对我来说很完美。谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:45:42.057

确实——Pygame 中的所有绘图和 transofmr 函数都接受“表面”作为第一个参数。实际上，在 pygame 中，“表面”*是*一个图像。

显示窗口也只是一个表面——尽管是一个专门的表面，其内容反映在屏幕上。但是您可以使用`pygame.transform.smoothscale`获取屏幕表面的缩略图副本，然后使用`blit`屏幕对象本身的方法将其粘贴到屏幕上。

如果这要连续完成，粘贴的角也应该被复制，就像摄像机指向它自己的输出一样——所以“正确的方法”是：让 yoru 在内存中单独绘制，blit it到屏幕表面，然后将其上方的缩略图blit。

# objective-c - 自定义 UITableView

> ID：10043908
> 
> 赞同：0
> 
> 时间：2012-04-06T13:07:41.247
> 
> 标签：objective-c, ios

我只是想确认哪种是处理高度自定义的表格视图的更好方法，是使用 nib 文件还是自己为每个元素编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:19:34.363

这个问题不仅与 UITableViews 有关。你可以在这里看到一些测试：http: [//cocoawithlove.com/2010/03/load-from-nib-or-construct-views-in.html](http://cocoawithlove.com/2010/03/load-from-nib-or-construct-views-in.html)

如果单元格非常复杂，为单元格创建一个 nib 文件会更容易，例如这里 [http://adeem.me/blog/2009/05/30/iphone-sdk-tutorial-part-6-creating-custom -uitableviewcell-使用界面生成器-uitableview/](http://adeem.me/blog/2009/05/30/iphone-sdk-tutorial-part-6-creating-custom-uitableviewcell-using-interface-builder-uitableview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:15:05.993

记忆方面，我不能肯定地告诉你。但是考虑到您正在谈论高度自定义的表格视图，使用 nib 更好，因为您实际上可以看到修改。这使您更容易。否则，仅通过代码创建高度自定义的单元格将是一件非常痛苦的事情，更不用说它几乎不可能被程序员以外的其他人编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:48:07.903

最好的方法是只为您的单元格布局创建一个单独的笔尖，如下所述：[UITableViewController with custom UITableViewCell](https://stackoverflow.com/questions/9539960/uitableviewcontroller-with-custom-uitableviewcell/)

# security - 如何保护 FileConnection 创建的文件不被手动删除和修改？

> ID：10043915
> 
> 赞同：1
> 
> 时间：2012-04-06T13:08:06.690
> 
> 标签：security, mobile, java-me, midp, jsr75

假设`file`使用`FileConnection`（J2ME）在移动设备的文件系统中创建了一个。如何以编程方式使该文件不可删除且不可更新`manually`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:08:02.390

tyr 以编程方式隐藏文件并记住名称。

# android - 在 Android 中以编程方式放大图片

> ID：10043916
> 
> 赞同：2
> 
> 时间：2012-04-06T13:08:07.453
> 
> 标签：android, bitmap, android-imageview, android-image

我可以从我的手机中检索图片并将它们存储在一个数组中。之后，我将它们显示在屏幕上。但它们都有不同的形状和大小。我想以相同的大小和形状显示它们。任何的想法？

```
photoPaths = new ArrayList<String>();   
     getAllPhotos(Environment.getExternalStorageDirectory(), photoPaths);
     images = new Bitmap[photoPaths.size()];

         apa = (AnimationPhotoView)findViewById(R.id.animation_view);
        for(int i=0;i<photoPaths.size();i++)
        {
            File imgFile = new  File(photoPaths.get(0));

            if(imgFile.exists())
            {

                images[0] = decodeFile(imgFile);} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T13:13:38.777

```
 Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),R.drawable.tedd);

    int width = bitmapOrg.getWidth();

    int height = bitmapOrg.getHeight();

    int newWidth = 200;

    int newHeight  = 200;

    // calculate the scale - in this case = 0.4f

     float scaleWidth = ((float) newWidth) / width;

     float scaleHeight = ((float) newHeight) / height;

     Matrix matrix = new Matrix();

     matrix.postScale(scaleWidth, scaleHeight);
     matrix.postRotate(x);
     // this will create image with new size
     Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0,width, height, matrix, true);

     iv.setScaleType(ScaleType.CENTER);
     iv.setImageBitmap(resizedBitmap); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T10:46:08.303

我在用：

```
Bitmap bitmap = //Your source

int newWidth = //compute new width
int newHeight = //compute new height

bitmap = Bitmap.createScaledBitmap(bitmap, scaleWidth, scaleHeight, true); 
```

最后一个`boolean`是`filter`，这使您的图像更平滑。

上面 MAC 提出的解决方案给了我一个`IllegalArgumentException: bitmap size exceeds 32bits`.

这只会缩放位图，不会旋转它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:13:39.513

如果您只想显示 jpg 图像或 android“已知”的图像格式，您可以简单地使用 MediaStore.Images 并检索缩略图，这更快并且需要更少的内存，并且图像应该已经都是相同的格式（宽度+高度）。

[http://developer.android.com/reference/android/provider/MediaStore.Images.html](http://developer.android.com/reference/android/provider/MediaStore.Images.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-28T11:59:44.133

我想你也可以试试这个。

```
private Bitmap decodeFile(File f)
{
    try 
    {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);
        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=200;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true)
        {
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }
        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

# c# - 通过 C# 控制 VLC

> ID：10043922
> 
> 赞同：5
> 
> 时间：2012-04-06T13:08:49.250
> 
> 标签：c#, vlc

我正在编写一个应用程序，它将打开 vlc，将文件添加到其播放列表并播放它。我在最后 2 个问题上遇到了一些问题。

```
 AXVLC.VLCPlugin alxplugin1 = new AXVLC.VLCPlugin();

                alxplugin1.addTarget("C:\\test.avi", null, AXVLC.VLCPlaylistMode.VLCPlayListInsert, 0);
                alxplugin1.play(); 
```

这不起作用...有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T22:52:37.407

较新版本的 VLC 在文件名开头需要“file:///”。如果您添加它，它应该可以工作。请尝试以下方法，看看是否能解决您的问题。利用： `alxplugin1.addTarget("file:///" + "C:\\test.avi", null, AXVLC.VLCPlaylistMode.VLCPlayL­istReplaceAndGo,0);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T21:19:21.160

C# 可以通过它的 COM 层访问 VLC。首先要做的是注册 axvlc.dll。打开一个cmd窗口并输入：

```
C:\Windows\System32\regsvr32.exe C:\Program Files (x86)\VideoLAN\VLC\axvlc.dll 
```

您应该会收到一个对话框，确认您的 dll 已成功注册。打开 VisualStudio 并创建一个新的 WinForms 项目并添加对 COM VLC COM 对象的引用。转到表格 cs 文件

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
          public Form1()
          {
               InitializeComponent();

               AXVLC.VLCPlugin2Class p = new AXVLC.VLCPlugin2Class();
               p.addTarget("C:\\zk.m4a", null, VLCPlaylistMode.VLCPlayListInsert, 0);
               p.play();
           }
     }
 } 
```

注意：不推荐使用 VLCPluginClass，请使用 VLCPlugin2Class

# jquery - jQuery UI：如何设置切换（'盲'）动画速度？（如“每秒像素数”）

> ID：10043929
> 
> 赞同：3
> 
> 时间：2012-04-06T13:09:07.017
> 
> 标签：jquery, jquery-ui, animation, toggle

是否可以以某种方式指定`toggle('blind')`动画的速度？

我的问题是：我用它来显示动态内容，所以我通常不知道要显示的元素的确切大小。由于动画速度取决于“持续时间”参数和可变的元素大小，因此我无法控制速度本身。

**我的解决方案：**使用`obj.toggle('blind', obj.height() / x)`where`x`是所需的速度，以每毫秒像素为单位。这个解决方案可以接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:23:48.033

我的解决方案似乎是正确的：

使用`obj.toggle('blind', obj.height() / x)`where`x`是所需的速度，以每毫秒像素为单位。

`height()`将始终返回一个有意义的值。[这里](https://stackoverflow.com/questions/3632120/jquery-height-width-and-displaynone/3632290#3632290)解释了这种行为

# r - 加载 ggplot2 也不会加载所需的包 plyr 和 reshape

> ID：10043936
> 
> 赞同：0
> 
> 时间：2012-04-06T13:09:41.980
> 
> 标签：r, ggplot2

`R`当我更新到版本 2.14.2 和`ggplot2`版本 0.9.0时，这个问题似乎已经开始了。当我加载`ggplot2`包时，它也不会加载`plyr`or `reshape`，所以我不能使用，例如`melt`. 我已经安装了软件包，并且在其他情况下加载了所需的软件包，似乎只有`ggplot2`受到影响。

```
> library(ggplot2)
> cushny$SubjID <- as.factor(LETTERS[1:nrow(cushny)])
> cushny.m <- melt(cushny, id="SubjID", measure=c("Control", "drug1", "drug2L", "drug2R"), variable.name="Condition", value.name="Sleep")
Error: could not find function "melt"
> library(lme4)
Loading required package: Matrix
Loading required package: lattice 
```

当然我可以手动加载所需的包，但这似乎很奇怪。有没有其他人遇到过这个问题？知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:16:21.607

[http://cran.r-project.org/web/packages/ggplot2/NEWS](http://cran.r-project.org/web/packages/ggplot2/NEWS)

> ggplot2 现在使用`NAMESPACE`, 并且只导出应该是用户可见的函数 - 这应该使它与 R 生态系统中的其他包更好地配合。`plyr`请注意，这意味着如果您在代码的其他地方使用它们，您现在需要显式加载（和其他包）。

基本上，从版本 0.9.0 开始，实现已更改以避免在加载多个包时可能发生的冲突。

# mysql - 当 MM 和 YY 可选时存储日期

> ID：10043943
> 
> 赞同：4
> 
> 时间：2012-04-06T13:10:11.027
> 
> 标签：mysql

我有一个日期输入。格式为`YYYY-MM-DD`. 但是，`MM`和`DD`是可选的。以下所有内容构成预期格式：

*   2012-10-13
*   2012-09
*   2010

我需要将这些数据存储在 MySQL 数据库中。它将同时用于：显示日期和过滤（查询）结果。

这样做的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:30:11.860

只需将月/日设置`00`为`DATETIME`列。例如：

```
2012-04-06
2012-04-00
2012-00-00 
```

`DATETIME`所有这些示例在列中都是完全有效的。作为工作证明，我们（我工作的公司）使用它来为我们的网站指定书籍的出版日期。我们目前使用的是 MySQL 5.1.54。

***注意：**根据用于格式化日期的语言（如果有），您可能需要根据是否提供日/月来对它们进行不同的格式化。例如，在 PHP 中，我需要检查是否提供了日期，并手动将最后的“-00”更改为“-01”，然后适当地格式化日期（在最终结果中省略日期）。*

## 来自手册（[来源](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-types.html)）

感谢@jon 追踪此事：

> MySQL 允许您将日期**或月份和日期为零的日期存储在`DATE`or`DATETIME`列**中。这对于需要存储您可能不知道确切日期的生日的应用程序非常有用。在这种情况下，您**只需将日期存储为 '2009-00-00' 或 '2009-01-00'**。如果您存储此类日期，则不应期望为需要完整日期的 DATE_SUB() 或 DATE_ADD() 等函数获得正确的结果。要禁止日期中的零月或零日部分，请启用 NO_ZERO_IN_DATE SQL 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:22:04.557

您可以将年、月和日存储在单独的列中，并将它们组合起来进行显示。对于某些查询，您可能不需要将它们组合起来，例如搜索一年。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:13:45.510

保存在mysql的`varchar (10 ) NOT NULL`列中

当您检索数据时使用 mysql 函数`STR_TO_DATE()`或`DATE_FORMAT()`

[`Reference`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# php - 如何使用 PHP 从 Web 服务获取 XML 数据？

> ID：10043946
> 
> 赞同：3
> 
> 时间：2012-04-06T13:10:26.893
> 
> 标签：php, .net, xml, web-services, soap

我需要从返回 XML 格式数据的 .NET Web 服务访问响应。如何拆分返回的数据？例如，我想将数据解析为一些 PHP 变量：

```
$name = "Dupont";
$email = "charles.dupont@societe.com"; 
```

我一直在寻找如何做到这一点，但没有找到正确的方法。

我的脚本是：

```
$result = $client->StudentGetInformation($params_4)->StudentGetInformationResult;

    echo "<p><pre>" . print_r($result, true) . "</pre></p>"; 
```

我页面中的回声是：

```
stdClass Object
(
    [any] => 0Successful10371DupontCharlescharles.dupont@societe.com1234charles.dupont@societe.comfalsefr-FR1003FIRST FINANCE1778AAA DÃ©partement
) 
```

网络服务响应格式为：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <StudentGetInformationResponse xmlns="http://tempuri.org/">
      <StudentGetInformationResult>xml</StudentGetInformationResult>
    </StudentGetInformationResponse>
  </soap:Body>
</soap:Envelope> 
```

* * *

我试过你的例子。但它不能满足我的需要。我需要拆分返回的值。我想获取数据并将它们放入 PHP 变量中：

$name = "杜邦"; $email = "charles.dupont@societe.com"; ETC...

不幸的是，您的示例的回声给出了：

```
object(stdClass)#1 (1) { ["StudentGetInformationResult"]=> object(stdClass)#11 (1) { ["any"]=> string(561) "0Successful10371DupontCharlescharles.dupont@societe.com1234charles.dupont@societe.comfalsefr-FR1003FIRST FINANCE1778AAA DÃ©partement" } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:41:49.237

您唯一需要的课程是`SoapClient`. [您可以在PHP 文档](http://php.net/manual/en/soapclient.soapclient.php)中使用很多示例。

例子：

```
try {
    $client = new SoapClient ( "some.aspx?wsdl" );
    $result = $client->StudentGetInformation ( $params_4 );

    $xml = simplexml_load_string($result->StudentGetInformationResult->any);
    echo "<pre>" ;

    foreach ($xml as $key => $value)
    {
        foreach($value as $ekey => $eValue)
        {
            print($ekey . " = " . $eValue . PHP_EOL);
        }
    }

} catch ( SoapFault $fault ) {
    trigger_error ( "SOAP Fault: (faultcode: {$fault->faultcode}, faultstring: {$fault->faultstring})", E_USER_ERROR );
} 
```

输出

```
Code = 0
Message = Successful
stud_id = 10373
lname = Dupont
fname = Charles
loginid = charles.dupont@societe.com
password = 1234
email = charles.dupont@societe.com
extid = 
fdisable = false
culture = fr-FR
comp_id = 1003
comp_name = FIRST FINANCE
dept_id = 1778
dept_name = Certification CMF (Test web service)
udtf1 = 
udtf2 = 
udtf3 = 
udtf4 = 
udtf5 = 
udtf6 = 
udtf7 = 
udtf8 = 
udtf9 = 
udtf10 = 
Audiences = 
```

# javascript - Ember.js 初始化行为

> ID：10043951
> 
> 赞同：2
> 
> 时间：2012-04-06T13:10:38.703
> 
> 标签：javascript, ember.js

有一个聊天，当有新消息进来时，它需要向下滚动。这工作正常。

但是当加载应用程序时，通过设置 ArrayController 的“内容”预加载了部分消息（大约 100 条），因此向下滚动将被调用 100 次，这是不好的。对第一大部分数据只运行一次滚动的正确方法是什么？

这是一些代码[http://jsfiddle.net/agentcooper/W6Bhs/](http://jsfiddle.net/agentcooper/W6Bhs/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:19:51.177

您可以创建一个`scroll`在内容更改时触发的函数，请参阅[http://jsfiddle.net/pangratz666/zZ5Cc](http://jsfiddle.net/pangratz666/zZ5Cc)。因此，您基本上会将滚动行为从包含单个消息的视图拉到包含所有消息的视图。

**车把**：

```
<script type="text/x-handlebars">
  {{#view App.MessagesView class="message-list" messagesBinding="App.messages" }}
  <ul class="nav nav-list">
  {{#each messages}}
    {{#view App.MessageView contentBinding="this" tagName="li"}}
      {{unbound content.from}}: {{unbound content.message}}
    {{/view}}
  {{/each}}
  </ul>
  {{/view}}
</script> 
```

**JavaScript**：

```
App.MessagesView = Ember.View.extend({
    didInsertElement: function() {
        this.scroll();
    },

    messagesChanged: function() {
        var that = this;
        // invoke this code in the next RunLoop, when changes are made to DOM
        Ember.run.next(function() {
            that.scroll();
        });
    }.observes('messages.@each'),

    scroll: function() {
        console.log('scroll');
        var el = this.$();
        el.scrollTop(el.prop('scrollHeight'));
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:14:40.137

你的数据来自哪里？

如果您使用的是[ember-data](https://github.com/emberjs/data) ，则可以通过标志观察`ModelArray`加载完成...`isLoaded`

您可以看到另一个答案：[https ://stackoverflow.com/a/10031377/90741](https://stackoverflow.com/a/10031377/90741)

# android - 以编程方式更新 android 应用程序

> ID：10043956
> 
> 赞同：0
> 
> 时间：2012-04-06T13:11:04.287
> 
> 标签：android

我创建了一个简单的应用程序，我想知道直接从其界面更新它的方法是什么。我想创建一个检查新更新的脚本，如果发现任何更新，应该显示一个按钮，上面写着*“下载新更新” 。*如果用户点击它，要么从服务器下载新版本，关闭正在运行的实例并执行下载的文件（.apk）（待安装），要么在应用程序运行时更新现有的（可能是Android API 有一些东西）。

好吧，我要求提供一些参考资料、链接或一些线索。我还必须指定我不希望在安装新版本时删除设置和其他本地数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:18:26.093

一个更简单的方法是必须在您的服务器上托管 apk，并在您的应用程序中有一个按钮，如果用户可以安装它，可以在浏览器中打开 apk。

# wix - Wix：无法列出使用 C# 自定义操作创建的属性

> ID：10043961
> 
> 赞同：1
> 
> 时间：2012-04-06T13:11:35.210
> 
> 标签：wix, custom-action, wix3.5, wix3.6

我正在创建一个 wix 安装程序。在一些 wxs 文件中，我定义了一些属性，并且我还在 C# 自定义操作中创建了一些会话属性。

现在我的要求是列出所有会话属性。因此，为此我查询了**属性表**并获得了在 .wxs 文件中定义的所有属性。

为此，我使用了以下自定义操作：

```
Microsoft.Deployment.WindowsInstaller.View listBoxView = session.Database.OpenView(string.Format("select * from Property"));
            listBoxView.Execute();

            while (true)
            {
                using (Record r = listBoxView.Fetch())
                {
                    if (r == null)
                    {
                        break;
                    }
                    else
                    {
                           Console.WriteLine(r[1].ToString(), r[2].ToString());

                        }

                    }
                }
            }
        } 
```

但它没有列出我使用 c# 自定义操作创建的任何会话属性。

有人可以帮我列出我使用 c# 自定义操作创建的属性或这些属性的存储位置吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:49:15.130

当您按照您在示例中的方式查询属性表时，您只会获得在 WiX 创作中静态定义的那些属性，这是意料之中的。在安装时有一个称为内存属性集合的概念 - 这包括以各种方式定义的所有属性：在属性表中静态提供、通过命令行提供、系统提供、在自定义操作中定义等。

`Session`您可以通过对象访问所有这些属性。只需调用`session[name]`，`name`您将获得的属性的名称在哪里。我怀疑是否为属性定义了一个枚举器，但在现实生活中，您很少需要迭代属性 - 您宁愿尝试获得某个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T19:18:36.170

如果您真的需要枚举它（需要 MSI 4.0 或更高版本），解决方法：

在项目中添加完整的日志记录

```
<Property Id="MsiLogging" Value="Iwearucmopvx" /> 
```

这会将整个安装过程记录到您的 %TEMP% 文件夹中。

然后使用以下命令获取日志文件位置：

```
var logFile = session["MsiLogFileLocation"]; 
```

由于日志文件被 MSI 日志锁定，您必须以共享模式访问它：

```
new FileStream(logFile, FileMode.Open, FileAccess.Read, FileShare.ReadWrite) 
```

阅读它并通过搜索以“PROPERTY CHANGE:”开头的行来获取最新的内存中 PROPERTY 值。

```
MSI (c) (90:78) [21:07:16:108]: PROPERTY CHANGE: Adding MsiRunningElevated property. Its value is '1'.
MSI (c) (90:78) [21:07:16:108]: PROPERTY CHANGE: Adding Privileged property. Its value is '1'.
MSI (c) (90:78) [21:07:16:108]: Note: 1: 1402 2: HKEY_CURRENT_USER\Software\Microsoft\MS Setup (ACME)\User Info 3: 2 
MSI (c) (90:78) [21:07:16:108]: PROPERTY CHANGE: Adding USERNAME property. Its value is 'Employee'.
MSI (c) (90:78) [21:07:16:108]: Note: 1: 1402 2: HKEY_CURRENT_USER\Software\Microsoft\MS Setup (ACME)\User Info 3: 2 
MSI (c) (90!A8) [21:07:30:900]: PROPERTY CHANGE: Modifying WEB_APP_NAME property. Its current value is '$projectname$/v1.0.0'. Its new value: '$projectname$\v1.0.0'.
MSI (c) (90!A8) [21:07:30:901]: PROPERTY CHANGE: Adding WEB_APP_NAME_NORMAL property. Its value is '$projectname$/v1.0.0'.
MSI (c) (90!A8) [21:07:30:901]: PROPERTY CHANGE: Adding WEB_APP_NAME_LAST property. Its value is 'v1.0.0'. 
```

缺点是 %TEMP% 文件夹中总会留下一个日志。也许添加一些清理或其他东西。

# python - 类 ClassName 与类 ClassName(object)

> ID：10043963
> 
> 赞同：26
> 
> 时间：2012-04-06T13:12:10.000
> 
> 标签：python, class, object

有什么区别：

```
class ClassName(object):
    pass 
```

和

```
class ClassName:
    pass 
```

当我调用这些类的模块的帮助功能时，您可以`____builtin____.object`在帮助的 CLASS 标题下阅读第一个案例。对于第二种情况，它只显示类名。这些类和/或其可能的方法之间是否存在任何功能差异？

（我知道`class Classname(ParentClassName)`有功能用途）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-06T13:27:31.573

在 Python 2.x 中，当您从“对象”继承时，您的类是一个“新样式”类 - 这是在 Python 2.2 中实现的（大约 2001 年） - 非从“对象”继承的情况会创建一个“旧样式”类，这实际上只是为了向后兼容而维护的。

“新风格”类的最大好处是跨 Python 的类型统一——在此之前，不能正确地继承内置类型，如 int、list、dict。还指定了一个“描述符协议”，它描述了用于检索和设置对象属性的协议，从而为语言提供了很大的灵活性。（当一个人确实在一个类中使用 Python“属性”时，它会更加明显）。

真正不同的不是“从对象继承”，而是因为 Python 中的类也是对象，所以这确实改变了 class'class 本身（一个 class'class 被称为它的“元类”）。因此，如果您将元类设置为“类型”，则无需从对象继承即可拥有新的样式类。

**强烈建议**在 Python 2.x中，您的所有类都是新样式 - 使用旧样式类可能适用于一些简单直接的情况，但是当您尝试使用时，它们会产生很多微妙的、难以发现的错误属性、pickle、描述符和其他高级功能。最重要的是，当您尝试检查对象的“类型”时，旧样式类中的所有对象都将是相同的（类型“实例”），即使它们来自不同的用户定义类。

在 Python 3.x 版本中，所有类都是新样式 - 无需设置元类。

Python 的文档“数据模型”是“法律之书”，其中详细定义了两种类类型的行为（足以让人们重新实现该语言）：

[http://docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)

Guido 的这篇博客文章用一种更轻松的语言讨论了新样式类背后的动机：

[http://python-history.blogspot.com.br/2010/06/new-style-classes.html](http://python-history.blogspot.com.br/2010/06/new-style-classes.html)

[http://docs.python.org/release/2.5.2/ref/node33.html](http://docs.python.org/release/2.5.2/ref/node33.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T13:15:27.270

`ClassName(object)`使用新样式类：[http ://docs.python.org/release/2.5.2/ref/node33.html](http://docs.python.org/release/2.5.2/ref/node33.html)

第二个示例演示了一个旧样式类。

在 python 3 中，默认使用新样式类，您将不再需要子类化`object`.

# mongodb - 如何在 MongoDB 集合中获取特定的嵌入文档？

> ID：10043965
> 
> 赞同：34
> 
> 时间：2012-04-06T13:12:13.270
> 
> 标签：mongodb

我有一个集合 Notebook，其中嵌入了名为 Notes 的数组文档。样本

文件如下所示。

```
{
"_id" : ObjectId("4f7ee46e08403d063ab0b4f9"),
"name" : "MongoDB",
"notes" : [
            {
              "title" : "Hello MongoDB",
              "content" : "Hello MongoDB"
            },
            {
              "title" : "ReplicaSet MongoDB",
              "content" : "ReplicaSet MongoDB"
            }
         ]
} 
```

我只想找出标题为“Hello MongoDB”的注释。我没有得到应有的东西

成为查询。谁能帮我。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-07-12T10:37:55.490

您可以使用更高版本 2.2 的 mongo 执行此操作

像这样的查询：

```
db.coll.find({ 'notes.title': 'Hello MongoDB' }, {'notes.$': 1}); 
```

`$elemMatch`你可以像贾斯汀詹金斯一样尝试

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-06T18:19:39.950

**过时的答案：请参阅其他答案。**

* * *

我不相信你的要求是可能的，至少没有一些 map-reduce 可能？

请参阅此处：[过滤 MongoDB 中的嵌入文档](https://stackoverflow.com/questions/2138454/filtering-embedded-documents-in-mongodb)

该答案建议您更改架构，以更好地适应您希望使用数据的方式。

您可以使用“点表示法”或 $elemMatch 来取回具有匹配“注释标题”的正确文档...

```
> db.collection.find({ "notes.title" : "Hello MongoDB"}, { "notes.title" : 1"}); 
```

或者 ...

```
> db.collection.find({ "notes" : { "$elemMatch" : { "title" : "Hello MongoDB"} }}); 
```

但是您将取回*整个数组*，而不仅仅是导致匹配的数组元素。

另外，需要考虑的事情......使用您当前的设置，很难对数组中的项目进行任何操作。

如果您不更改架构（如链接到的答案所示）......我会考虑将“ids”添加到数组中的每个元素，以便您可以在需要时轻松删除它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-21T16:46:12.923

您可以在 MongoDb 版本 3.2+ 中使用聚合来执行此操作。

**询问：**

```
db.Notebook.aggregate(
    {
        $project: {
            "notes": {
                $filter: {
                    input: "$notes",
                    as: "note",
                    cond: { 
                        $eq: [ "$$note.title", "Hello MongoDB" ]
                    }
                }
            }
        }
    }
) 
```

**结果：**

```
{ 
    "_id" : ObjectId("4f7ee46e08403d063ab0b4f9"), 
    "notes" : [ 
        { 
            "title" : "Hello MongoDB", 
            "content" : "Hello MongoDB" 
        } 
    ] 
} 
```

* * *

***$$**在这里用来访问变量。`note`我在这里用来访问`$filter`.*

您可以在官方文档中找到有关[$filter](https://docs.mongodb.com/master/reference/operator/aggregation/filter/#exp._S_filter)、[$eq](https://docs.mongodb.com/v3.2/reference/operator/aggregation/eq/)和[$$](https://docs.mongodb.com/manual/reference/aggregation-variables/)的更多详细信息。

> **$filter：**根据指定条件选择要返回的数组子集。返回一个仅包含符合条件的元素的数组。返回的元素按原始顺序排列。
> 
> **$eq：**比较两个值并在值相等或不相等时返回 true/false (...)。
> 
> **$$：**变量可以保存任何 BSON 类型的数据。要访问变量的值，请使用带有双美元符号 ($$) 前缀的变量名称的字符串。

* * *

**笔记：**

贾斯汀詹金的答案已经过时，kop 的答案在这里没有从集合中返回多个文档。使用此聚合查询，您可以在需要时返回多个文档。

我需要这个并想发布以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-12T12:36:11.173

您可以使用 $ 或 $elemMatch。$ 运算符和 $elemMatch 运算符根据条件从数组中投影元素的子集。

$elemMatch 投影运算符采用显式条件参数。这使您可以根据不在查询中的条件进行投影。

```
db.collection.find(
    {
        // <expression>
    },
    {
        notes: {
            $elemMatch: {
                title: 'Hello MongoDB'
            }
        },
        name: 1
    }
) 
```

$ 运算符根据查询语句中的某些条件投影数组元素。

```
db.collection.find(
    {
        'notes.title': 'Hello MongoDB'
    },
    {
        'notes.title.$': 1,
         name: 1
    }
) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-06T17:33:16.580

您可以像这样执行查询：

```
db.coll.find({ 'notes.title': 'Hello MongoDB' }); 
```

您还可以参考[文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ValueinanArray)以获取更多详细信息。

# netbeans - 在用户目录中创建新文件（在 NB 平台上使用 InstalledFileLocator）

> ID：10043966
> 
> 赞同：2
> 
> 时间：2012-04-06T13:12:19.607
> 
> 标签：netbeans, netbeans-platform

**如何在 NetBeans 平台应用程序的用户目录中创建新文件？**我用了：

```
System.getProperty("netbeans.user", "user.home") + "/myfile"); 
```

但是 NB IDE 7.1.1 告诉我它已被**弃用**，我应该改用 InstalledFile Locator。好的，我试过这个：

```
File file = InstalledFileLocator.getDefault().locate("myfile", null, false); 
```

如果文件已经存在，它工作正常。我看不到任何方法，如何使用 InstalledFileLocator 创建新的。但是javadoc说，这种方法允许获取文件夹。所以我尝试了这个：

```
File file = InstalledFileLocator.getDefault().locate("myfile", null, false);
if (file == null) {
  file = new File(InstalledFileLocator.getDefault().locate("", null, false), "myfile");
} 
```

再次没有成功，方法*定位*现在失败，它找不到任何东西（“/”被禁止并且也不起作用）。

所以我的问题是，**如何在我的 NetBeans 平台应用程序中正确加载用户目录中的现有文件（它也是用于编写的，所以它不应该在程序目录中），如果它不存在，创建它？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-11T15:15:38.503

您可以使用[Places.getUserDirectory()](http://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/Places.html#getUserDirectory())。

```
File file = InstalledFileLocator.getDefault().locate("myfile", null, false);
if (file == null) 
{
   file = new File(Places.getUserDirectory() + File. separator + "myfile");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T21:31:08.613

从[netbeans 平台文档](http://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/InstalledFileLocator.html)中，InstalledFileLocator 不应用于在系统文件系统上查找资源。要在系统文件系统中查找数据，请使用 Filesystems API。前任：

```
FileObject fo = FileUtil.getConfigFile(myfile);
  if (fo == null) {
        fo = FileUtil.getConfigRoot().createData(myFile,ext);
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T21:58:34.077

您可以做的最简单的事情可能是在您的模块中包含一个简单的空文件（例如“here.txt”），该文件将自动安装在用户目录中。[您可以在此处](http://www.antonioshome.net/blog/2008/20081009-1.php)查看此示例（请参阅“经验教训：将文件与 NetBeans 模块捆绑”部分）。

基本上，您将文件包含在模块的“release/modules/ext/here.txt”目录中。

安装模块时，平台会自动为您安装模块中包含的“here.txt”文件到用户目录中，您无需担心。

一旦你的模块被安装并运行，你想要找到这样的文件：

```
File hereTXT = InstalledFileLocator.getDefault()
    .locate("modules/ext/here.txt", 
    "a.b.c",
    false); 
```

（其中“abc”是您的模块标识符。）

然后从“hereTXT”文件中，您可以使用“hereTXT.getParent()”获取目录，一切就绪。

# matlab - 使用 MATLABR2010a 进行图像处理

> ID：10043967
> 
> 赞同：1
> 
> 时间：2012-04-06T13:12:24.910
> 
> 标签：matlab

我试图读取图像并显示它，但我遇到了一个错误，我不明白它。请任何人帮助我，注意我使用的是 MATLAB R2010a，下面的显示是错误的类型。

```
>> imread('tas.jpg');
>> imshow('tas.jpg');
??? Attempt to call constructor image with incorrect letter case.

**Error in ==> basicImageDisplay at 9
hh = image(xdata,ydata,cdata, ...
Error in ==> imshow at 246
  hh = basicImageDisplay(fig_handle,ax_handle,...** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:16:36.253

```
I = imread('tas.jpg');
imshow(I); 
```

该`imread`函数读取文件并将其转换为像素的 RGB 矩阵。这存储在变量 I 中。然后，您可以调用`imshow`将此 RGB 矩阵作为参数传递；）

**编辑**您也可以`imshow`使用文件名调用，但它没有那么有用，因为它不会返回您稍后将用于处理的矩阵。并且由于仅在 上引发错误`imshow`，因此我猜测该`imread`功能出于某种原因正在工作。

如果不是，请仔细检查图像是否在实际目录中或路径上的目录中，或者它是否未损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-04T19:32:29.067

这可能是原因（来自以下线程）：

原因：“当前目录文件夹名称与 matlab 库中的内置函数匹配并给出错误 - 尝试以不正确的字母大小写调用构造函数图像”。

解决方案：将文件夹名称更改为唯一名称。

[http://www.mathworks.com/matlabcentral/newsreader/view_thread/256922](http://www.mathworks.com/matlabcentral/newsreader/view_thread/256922)

# xml - Perl XML::Writer 打印错误字符

> ID：10043972
> 
> 赞同：1
> 
> 时间：2012-04-06T13:12:44.943
> 
> 标签：xml, perl, xmlwriter

我正在使用[XML::Writer](https://metacpan.org/module/XML%3a%3aWriter)并且我有以下代码：

```
foreach $param (@{$fce->{"params"}}){
  $i++;
  print $param . ",";
  $writer->emptyTag( 'param', number => $i, type => $param );
} 
```

这是 XML::Writer 的输出：

```
<param number="1" type="const enum eDebugLevels" />
<param number="2" type="const char   &#9;&#9;*  const" /> 
```

但是该打印的输出是：

```
const enum eDebugLevels,const char       *  const, 
```

为什么有`&#9;`？我真的不想要它们（而且我需要空间保持原样）。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T14:59:28.887

`&#9;`是一个选项卡，因此对​​于任何 XML 解析器`"const char &#9;&#9;* const"`都将被解析为`"const char \t\t* const"`. 如果标签有问题，那么您需要对输出进行预处理，这不是 XML::Writer 的工作。

# cuda - 如何以软件模式在 ATI 或 Intel 卡上运行我的 CUDA 应用程序？

> ID：10043974
> 
> 赞同：1
> 
> 时间：2012-04-06T13:13:02.670
> 
> 标签：cuda

我希望能够在 NVidia 上以 GPU 模式运行我的软件，并在 ATI 或 Intel 上以 CPU（软件）模式运行我的软件。我怎样才能做到这一点？

这与 PhysX 的工作原理相同。

目前我在 ATI 卡机器上收到一个错误，指出未找到 nvcuda.dll。

请不要建议 OpenCL。 [这个](https://stackoverflow.com/questions/8351125/how-do-i-develop-cuda-application-on-my-ati-to-be-later-executed-on-nvidia)问题和我的类似。但是我不能接受 OpenCL 的答案。

我在 Windows 7 + Visual Studio 2008 上

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T13:24:45.530

将其转换为答案：

有一个名为 GPU Ocelot 的软件可以确定在运行时运行 gpu 代码的硬件：[http ://code.google.com/p/gpuocelot/](http://code.google.com/p/gpuocelot/)

通过 Ocelot 运行所有呼叫，您*应该*一切顺利。

从主页：

> Ocelot是一个模块化的异构系统动态编译框架，为CUDA程序提供各种后端目标，为PTX虚拟指令集提供分析模块。**Ocelot 目前允许 CUDA 程序在 NVIDIA GPU、AMD GPU 和 x86-CPU 上全速执行，无需重新编译。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-09T10:56:46.783

现在有在非 NVidia 硬件上运行 CUDA 的举措，例如 Otoy：http: [//venturebeat.com/2016/03/09/otoy-breakthrough-lets-game-developers-run-the-best-graphics-software -跨平台/](http://venturebeat.com/2016/03/09/otoy-breakthrough-lets-game-developers-run-the-best-graphics-software-across-platforms/)

本质上，它将 CUDA 调用转换为其他后端（Metal、Vilkan、DirectX、OpenGL），以允许为 CUDA 编写的应用程序在一系列平台上运行。目前尚不清楚是否可以简单地将他们的 nvcuda.dll 放在正确的位置，从而立即让您的应用程序运行，或者开发人员是否必须在部署软件之前进行更改。

到目前为止，还没有公开发布 afaik。

# php - 将数据插入表并使用该数据更新另一个表。

> ID：10043981
> 
> 赞同：0
> 
> 时间：2012-04-06T13:13:43.553
> 
> 标签：php, mysql, sql, database, relational

我正在努力实现以下目标：

当我添加到 Player_goals 表**中时**， player_John在**match_xx中****获得**了 3 **player_goals** - 它不仅被插入到**Players_goals**表中，而且还被插入到**Players 表中**。如果 player_John 已经进了 2 个球，它会更新为 5（总和）。

 ******请参阅下面我使用的表格：

```
Players table
+--------------+-------------+------+-----+---------+----------------+
| Field        | Type        | Null | Key | Default | Extra          |
+--------------+-------------+------+-----+---------+----------------+
| player_id    | int(4)      | NO   | PRI | NULL    | auto_increment |
| player_name  | varchar(45) | NO   | MUL | NULL    |                |
| team_name    | varchar(45) | NO   | MUL | NULL    |                |
| player_goals | int(4)      | YES  |     | NULL    |                |
+--------------+-------------+------+-----+---------+----------------+

Players_goals table
+-------------+-------------+------+-----+---------+-------+
| Field       | Type        | Null | Key | Default | Extra |
+-------------+-------------+------+-----+---------+-------+
| player_name | varchar(45) | NO   | MUL | NULL    |       |
| match_id    | int(4)      | NO   | MUL | NULL    |       |
| goals       | int(4)      | YES  | MUL | NULL    |       |
+-------------+-------------+------+-----+---------+-------+ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:18:15.167

下面只是用于理解逻辑的虚拟代码，你可以通过这个

```
CREATE TRIGGER goalTrigger

AFTER INSERT ( into player_goals  table )

FOR EACH ROW 
BEGIN

INSERT INTO (player table ) VALUES()
ON DUPLICATE KEY UPDATE player_goals = player_goals+current_goles

END 
```

**参考**

### [http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

### [http://www.mysqltutorial.org/create-the-first-trigger-in-mysql.aspx](http://www.mysqltutorial.org/create-the-first-trigger-in-mysql.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:18:15.823

我会在 Players_goals 的 ONINSERT 事件上设置一个触发器，更新相关的 Players 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:33:29.443

我假设 Players 表中的 player_goals 是球员在每场比赛中得分的所有目标的总和，直到最近。如果是这样的话：

第一个 player_goals 是您必须避免的冗余数据，您可以通过连接两个表从表 Players_goals 中获取此信息。

第二：如果您必须这样做，您可以使用**INSERT**语句将此类信息插入到 player_goal 中，并使用**UPDATE**语句将此类信息插入到 player 表中，在这种情况下，您必须首先从 Players_goals 获取玩家的所有总目标，或者您必须拥有一种增加 Players 表中 player_goals 旧值的方法******

# sql - SQL将选择从列方向更改为行

> ID：10043984
> 
> 赞同：0
> 
> 时间：2012-04-06T13:14:08.313
> 
> 标签：sql

我有一个简单的查询，

```
select a.*,b.* from myTableA a join myTableB b on a.ID = B.ID 
```

这很好用。但是，它显示为

`ID|Value|Fruit|ID1|Value1|Fruit1`

我如何得到结果

`ID|Value|Fruit`
`1|A|Apple`
`1|B|Mango`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:15:49.063

```
select a.* from myTableA a join myTableB b on a.ID = B.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:16:27.810

这是`UNION`您正在描述的查询：

```
SELECT ID, Value, Fruit
FROM myTableA
WHERE ID IN (SELECT B.ID FROM myTableB B)
UNION ALL
SELECT ID, Value, Fruit
FROM myTableB
WHERE ID IN (SELECT A.ID FROM myTableA A) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:17:00.603

```
select a.ID,
a.Value,
a.Fruit
from myTableA a join myTableB b on a.ID = B.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:18:02.573

像这样取消选择 b

```
SELECT a.* from myTableA a left join myTableB b on a.ID=b.ID 
```

# search-engine - 在生产级别打开搜索服务器？

> ID：10043991
> 
> 赞同：1
> 
> 时间：2012-04-06T13:14:50.573
> 
> 标签：search-engine

我想使用 Open Search Server [http://www.open-search-server.com/](http://www.open-search-server.com/)在生产级别创建网络搜索引擎。有没有其他好的免费软件来创建搜索引擎？我想抓取数百万个网站。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:49:59.483

*（披露：本文作者隶属于本文提及的网站/产品）*

OpenSearchServer 基于 Lucene。此外，它还包含一个强大的网络爬虫，能够索引数百万个页面。我是这个软件的创始人。我在索引数千个网站的项目中使用它。

然而，索引数百万个网站是另一回事。您需要将爬网分布在多个服务器上以构建分布式索引。

然后，您使用另一个服务器池来处理来自用户的搜索请求。可以使用多个 OpenSearchServer 实例来做到这一点。

无论您选择什么软件，都必须谨慎选择硬件，尤其是存储部分。在大索引上，搜索查询的性能与存储的性能有关。欢迎使用大型 RAID 池或 SSD 磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:31:17.477

最流行的搜索引擎开源软件是nutch和lucence。Nutch 是网页爬虫，这里是[主页](http://nutch.apache.org/)

Lucence是一个索引服务器，这里是[主页](http://lucene.apache.org/)

您可以使用这两个软件来构建搜索引擎

# xml - 如何以图形方式显示 XML？

> ID：10043992
> 
> 赞同：0
> 
> 时间：2012-04-06T13:14:53.413
> 
> 标签：xml

我正在写我的论文，这篇论文的主要目标是为 XML 语言设计和开发一个图形界面。

此应用程序的一些功能将是：

*   以图形方式显示 XML
*   添加/修改/删除一个孩子
*   添加/修改/删除属性
*   在同一窗口中浏览两个或多个文件并以图形方式交换数据，即以图形方式将一个子表单文件移动到文件
*   在两个 XML 文件之间创建一个链接，然后将它们转换为两个 SQL Server 表

谁能帮助我如何开始，如何以图形方式显示 xml 树（GUI）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:25:59.223

For showing the XML in a browser, you can use CSS - you can have a CSS (Cascading Style Sheet) file describing what font, size, color etc you'd like each element of the XML to have, and have the browser take it from there and display a more readable XML in the browser.

As far as reading all the children and their parents etc from the XML are concerned, you can try Python's `xml.dom.minidom` module. It parses the XML (provided it is valid) and provides easy access to the nodes of the XML tree.

# java - 在 Java 中重新打开数据库连接

> ID：10043993
> 
> 赞同：12
> 
> 时间：2012-04-06T13:15:00.213
> 
> 标签：java, jdbc

在java中关闭数据库连接后，我可以重新打开它吗？还是我需要再做`DriverManager.getConnection()`一次？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T13:25:04.047

如果您调用`connection.close();`了 ，则`connection`（假设`java.sql.Connection`类型）将变得无用。此操作释放此 Connection 对象的数据库和 JDBC 资源。

所以**是**的，您需要在继续之前获得新的连接

```
connection = DriverManager.getConnection() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T13:18:19.230

我不是 100% 确定你*需要*打电话`DriverManager.getConnection()`，但有什么害处？您已经关闭了连接，只需在需要时获取一个新连接即可。垃圾收集器会在您丢弃该连接后担心它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T13:19:48.937

是的，关闭连接后你不能做任何事情。你必须打电话`getConnection`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T13:24:55.073

正如[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/DriverManager.html#getConnection%28java.lang.String%29)提到的：

```
getConnection: Attempts to establish a connection to the given database URL. 
```

因此，是的，一旦关闭先前的连接，再次调用 getConnection() 似乎是与数据库建立新连接的唯一方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-07T12:47:00.367

理想情况下，我采用了稍微不同的方法并给出了不同的解决方案。

我没有打开和关闭数据库，这实际上发生在客户端的每个请求上，而是创建了一个类的单例实例并创建了一个打开的连接，只要服务器的进程还活着，它就会被重用。

简而言之：

我有`getConnection()`内`Database`课

```
 public Connection getConnection() throws Exception {
    try {
        String connectionURL = "jdbc:mysql://localhost:3306/someDatabase";
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        if (connection == null) {
            connection = DriverManager.getConnection(connectionURL, "someUser", LOCAL_MYSQL_PASSWORD);
        }

        return connection;
    } catch (Exception e) {
    }

} 
```

该类`Database`是单例的，因此重用同一个类并重用同一个连接。

我已经对此进行了测试`show processList`，这个提供了大约 100 个连接如果我不关闭连接，即使我关闭连接，实际进程也不太可能被杀死，而是进入睡眠状态每当同一个客户端请求相同的请求时使用，但如果您有 15 个请求，那么每个请求都会有单独的进程，因此关闭和打开连接对我来说不是最佳解决方案。

通过这个，我有 1 个负责查询的进程。

# codeigniter - CodeIgniter - 根据屏幕大小显示视图

> ID：10043996
> 
> 赞同：1
> 
> 时间：2012-04-06T13:15:09.450
> 
> 标签：codeigniter, responsive-design

我正在使用 CodeIgniter 框架构建一个响应式站点，我遇到了一个问题，希望有人能提供帮助。

该站点本身本质上是一种搜索大型信息数据库并将结果以表格格式显示的方法。

由于手机屏幕空间不足，这些设备上的搜索字词和结果将减少到在完整桌面浏览器上可用的 20 多个字段中只有 3 个，这意味着在这些设备上将只有三个字段将在这些较小的设备上搜索并呈现给用户的数据库。

无论如何，我知道如何使用媒体查询响应式地设置页面样式，但是有没有办法根据设备的屏幕尺寸实际构建搜索表单的内容？

例如，我看到它的工作方式有点像这样：

1.  用户导航到搜索页面
2.  页面检测到他们在手机上
3.  页面的搜索条目表单仅包含 3 个字段

或者如果他们在桌面浏览器上：

1.  用户导航到搜索页面
2.  页面检测到他们在桌面浏览器上
3.  页面的搜索条目表单包含完整的 20 多个字段

我希望这有点道理。“平板电脑呢？” 您可能会问，他们也会得到满足，但尚未确定他们将呈现多少搜索字段。

非常感谢所有的想法和建议。托尼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:24:03.640

您可以使用[User Agent 类](http://codeigniter.com/user_guide/libraries/user_agent.html)来检测人们在访问您的网站时是否正在使用手机。

当然，这有一些缺点，但如果用户使用移动设备，您可以识别服务器端。我看到的最大缺点：如果用户使用的是未知的用户代理，它实际上是一部手机，你将为他提供 20 个字段，而不是 3 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T02:54:21.720

使用 CSS3，您不需要做任何用户代理或现代化。

就像是：

```
@media screen and (max-width: 360px) {
  table td:nth(4n) { display: none; }
} 
```

应该能够给你你所需要的。您也可以将其更改为@media mobile .... 看看它是否也能接受，但鉴于不同的设备具有不同的屏幕宽度，我更喜欢这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:20:50.550

我认为可以通过 java 脚本/HTML/CSS 进行检测（只是我认为......不确定其他选项）

而且，这可以解决所有问题。无需使用 CI。

```
http://modernizr.com/ 
```

更多的选择是可观的。:)

# tfs - TFS 自定义构建模板 - 值说明

> ID：10043998
> 
> 赞同：0
> 
> 时间：2012-04-06T13:15:25.783
> 
> 标签：tfs, tfsbuild

我已经获得了一个自定义表单和类别，所有这些都在我的构建定义中完美运行。我似乎无法弄清楚的唯一一件事是如何将描述设置为我想要的。

例如，在默认模板中（在构建过程参数下）有一个称为自动化测试的部分。在描述值列中，它显示“在匹配 **\ *test* .dll 的程序集中运行测试”。

如何为我自己的属性控制此文本？

澄清（我所指的例子）：

1.  使用默认模板创建新的构建定义。
2.  转到“流程”选项卡并添加一些项目（或带有一些项目的解决方案）。
3.  请注意，“要构建的项目”旁边的文本现在是粗体的，并且显示类似于“为 1 个平台和配置构建 4 个项目”。

第 3 步中的描述措辞取决于项目、平台等的数量。

这就是我所追求的。在我的自定义模板中，我可以让自定义对话框适用于我的自定义参数，但描述只有对话框对象的完整程序集名称。我想在那里自定义文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:46:05.093

您需要打开构建过程文件并编辑它的变量和参数，

![在此处输入图像描述](../Images/dafe676811c3a8fa80a3ccf38cf7451f.png)

![在此处输入图像描述](../Images/15e7bdfa01019f83d29987e068c7c3cb.png)