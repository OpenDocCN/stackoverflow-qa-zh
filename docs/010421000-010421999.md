# StackOverflow 问答 10421000-10421999

# java - JSF：如何保存文件，以便用户再次登录时，他可以看到上传的文件？

> ID：10421000
> 
> 赞同：0
> 
> 时间：2012-05-02T20:16:44.747
> 
> 标签：java, jsf, architecture, file-upload

我正在使用`icefaces, ace:fileEntry`组件从客户端上传文件并且这些文件被保存在`file system`，我也将我`managedBean`标记为`sessionScope`并且当用户注销然后重新登录时，他/她将看不到他们上传的文件是有道理的。

我想做两件事：

1.  当用户上传文件时，我想将该文件连同用户 ID 或用户会话信息一起保存到数据库中。
2.  当用户注销并重新登录时，他/她应该能够看到他/她上传的文件，当前用户注销后文件没有保存？
3.  用户只能看到他或她上传的文件，而不是任何随机文件。

我的做法：

我正在考虑在数据库中创建具有文件 ID、用户 ID 和文件的新表，因此当使用`ace fileEntry`组件从客户端上传文件然后通过我的 Hibernate 时，我将从会话获得的文件和用户相关信息保存到数据库，现在当用户注销并重新登录，我使用 userId 查询数据库表以获取他或她的所有文件。

对实现此功能有什么想法或更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:31:07.460

根据用户 ID 为每个用户创建一个单独的子文件夹。

```
/var/webapp/uploads/[userid] 
```

如有必要，您可以使用它[`File#mkdir()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#mkdir%28%29)来创建子文件夹。

```
File uploads = new File("/var/webapp/uploads");
File userUploads = new File(uploads, String.valueOf(user.getId()));
userUploads.mkdir();
// ... 
```

然后要获取所有上传的文件，只需执行

```
File[] allUserUploads = userUploads.listFiles();
// ... 
```

这样您就不需要另一个数据库表，用户将始终只能看到他们自己的文件。

# user-interface - Powershell - GUI 和菜单条

> ID：10421003
> 
> 赞同：3
> 
> 时间：2012-05-02T20:16:57.003
> 
> 标签：user-interface, powershell, menu

我试过在互联网上寻找，但找不到任何东西。

我已经构建了一个 powershell GUI 应用程序，但想添加一个带有不同菜单项的菜单栏。

这可能吗？有没有人做过（有例子）？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T03:39:51.327

这是使用 Windows 窗体的示例。我使用 Visual Studio 对其进行设计，然后使用[Convert-Form 将](https://github.com/LaurentDardenne/ConvertForm?option=com_joomlaboard&Itemid=76&func=view&id=2029&catid=14)其转换为 PowerSell，这是一个由 Laurent Dardenne 从漂亮的法国 PowerShell 站点[PowerShelll-Scripting.com编写的免费工具](http://powershell-scripting.com/index.php)

```
# Load external assemblies
[void][Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
[void][Reflection.Assembly]::LoadWithPartialName("System.Drawing")

$MS_Main = new-object System.Windows.Forms.MenuStrip
$fileToolStripMenuItem = new-object System.Windows.Forms.ToolStripMenuItem
$openToolStripMenuItem = new-object System.Windows.Forms.ToolStripMenuItem
$editionToolStripMenuItem = new-object System.Windows.Forms.ToolStripMenuItem
#
# MS_Main
#
$MS_Main.Items.AddRange(@(
$fileToolStripMenuItem,
$editionToolStripMenuItem))
$MS_Main.Location = new-object System.Drawing.Point(0, 0)
$MS_Main.Name = "MS_Main"
$MS_Main.Size = new-object System.Drawing.Size(354, 24)
$MS_Main.TabIndex = 0
$MS_Main.Text = "menuStrip1"
#
# fileToolStripMenuItem
#
$fileToolStripMenuItem.DropDownItems.AddRange(@(
$openToolStripMenuItem))
$fileToolStripMenuItem.Name = "fileToolStripMenuItem"
$fileToolStripMenuItem.Size = new-object System.Drawing.Size(35, 20)
$fileToolStripMenuItem.Text = "&File"
#
# openToolStripMenuItem
#
$openToolStripMenuItem.Name = "openToolStripMenuItem"
$openToolStripMenuItem.Size = new-object System.Drawing.Size(152, 22)
$openToolStripMenuItem.Text = "&Open"
function OnClick_openToolStripMenuItem($Sender,$e){
    [void][System.Windows.Forms.MessageBox]::Show("Event openToolStripMenuItem.Add_Click is not implemented.")
}

$openToolStripMenuItem.Add_Click( { OnClick_openToolStripMenuItem $openToolStripMenuItem $EventArgs} )
#
# editionToolStripMenuItem
#
$editionToolStripMenuItem.Name = "editionToolStripMenuItem"
$editionToolStripMenuItem.Size = new-object System.Drawing.Size(51, 20)
$editionToolStripMenuItem.Text = "&Edition"
#
$MenuForm = new-object System.Windows.Forms.form
#
$MenuForm.ClientSize = new-object System.Drawing.Size(354, 141)
$MenuForm.Controls.Add($MS_Main)
$MenuForm.MainMenuStrip = $MS_Main
$MenuForm.Name = "MenuForm"
$MenuForm.Text = "I\'ve got a menu"
function OnFormClosing_MenuForm($Sender,$e){ 
    # $this represent sender (object)
    # $_ represent  e (eventarg)

    # Allow closing
    ($_).Cancel= $False
}
$MenuForm.Add_FormClosing( { OnFormClosing_MenuForm $MenuForm $EventArgs} )
$MenuForm.Add_Shown({$MenuForm.Activate()})
$MenuForm.ShowDialog()
#Free ressources
$MenuForm.Dispose() 
```

# javascript - 我真的可以使用 JSON 来消除 Struts 2 中对标签和页面映射的需求吗？

> ID：10421004
> 
> 赞同：0
> 
> 时间：2012-05-02T20:16:58.493
> 
> 标签：javascript, json, jakarta-ee, struts2, struts

这是我一直在思考的事情。页面是未映射的纯 HTML 和 JavaScript 并且数据都是从 Struts 2 中提取的 JSON 的设计的优点和缺点是什么？没有动作映射意味着相对页面引用，因此我们没有太多使用 Struts 2 URL 标签或任何其他标签。从字面上看，我们需要从模型中获取的任何信息都可以通过 JSON 检索或使用自定义拦截器进行处理。例如，会话管理通常在 Interceptor 中处理。我假设 JavaScript 可以从此处的标头获取信息，这可能不正确。如果我错了，请告诉我。即使我错了，人们仍然可能使用隐藏控件或其他方式来隐藏此类信息。无论如何，

简而言之，最终结果似乎是一个纯 HTML / JQuery UI，一个纯 UI 开发人员、页面设计和可用性专家无需了解 Java 就可以使用它。一个人的唯一目的是从 UI 端管理用户体验。通过使用选项卡、菜单弹出窗口等，页面可能永远不需要任何东西，除了可以增强浏览器缓存的 JSON 数据。这个想法还极大地减少了对 Web 服务的需求，因为您已经有了一个清晰解耦的模型和视图。我们不需要 OGNL 或 JSTL，也不需要处理值堆栈或类型转换器。如果您使用的是 Hibernate，我已经看到了将 Hibernate 实体直接转换为 JSON 的库。

我在这里完全不喜欢我的摇滚吗？是否有可能获得 Servlet 和 JSP 所承诺的内容而无需繁琐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:29:48.320

我不确定你的最后一句话是什么意思。不确定您所说的“减少对 Web 服务的需求”是什么意思，因为您所描述的是返回 JSON 的 Web 服务。

除此之外; 当然，您可以通过 JavaScript 在客户端执行所有操作，并且只从 S2 获取 JSON。如果您的客户端框架支持它，我真的不认为有*任何*缺点，只要您的应用程序不需要特定于数据的书签或者您使用的是支持它的 JS 库。

缓存的级别可能会稍高一些，但是一个设计良好的非 JSON 应用程序无论如何都可以做相当多的缓存，所以我不确定你会从中得到多少提升——但是当然有些。

根据浏览器的不同，您可能会遇到关于内存使用、泄漏等的各种问题，这些问题可能难以（或不可能）追踪或解决，但取决于您应用的使用模式和用户的浏览器偏好，这可能永远不会成为问题。

使用现代浏览器和现代客户端 JS 框架，这种应用程序是完全可能的，并且正在越来越多地完成——这不是一个独特的想法。

# tsql - T-SQL：选择不等于值的行，包括空值

> ID：10421017
> 
> 赞同：28
> 
> 时间：2012-05-02T20:17:44.293
> 
> 标签：tsql

如何选择不等于值并且在返回的数据中还包含空值的行？我试过了：

```
SET ANSI_NULLS OFF
SELECT TOP 30 FROM Mails
WHERE assignedByTeam <> 'team01' 
```

*我想返回列assignedByTeam*中没有'team01'的行，但我也想要包含空值的结果。不幸的是，上面的代码不起作用（不返回空值）。

我正在使用 MS SQL Server 2008 Express。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-02T20:21:11.010

尝试显式检查 NULL：

```
SELECT TOP 30 col1, col2, ..., coln
FROM Mails
WHERE (assignedByTeam <> 'team01' OR assignedByTeam IS NULL) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-04-15T18:38:40.880

```
SELECT TOP 30 FROM Mails
WHERE ISNULL(AssignedByTeam,'') <> 'team01' 
```

我看到了一个合并语句版本，但 ISNULL() 更有效。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-18T22:39:35.293

当您有很多条件时，将所有内容键入两次就会很糟糕。这里有两个更好的选择：

```
SELECT TOP 30 FROM Mails
WHERE COALESCE(assignedByTeam,'') <> 'team01' 
```

COALESCE 运算符返回列表中的第一个非空值。如果assignedByTeam 不为空，它会将assignedByTeam 值与“team01”进行比较。但如果assignedByTeam 为空，它会将空白'' 与'team01' 进行比较。它基本上是以下内容的简写：

```
SELECT TOP 30 FROM Mails
WHERE (CASE WHEN assignedByTeam IS NULL THEN '' ELSE assignedByTeam END) <> 'team01' 
```

第二种方法是使您的条件有条件，例如：

```
SELECT TOP 30 FROM Mails
WHERE 1 = CASE WHEN assignedByTeam = 'team01' THEN 0 ELSE 1 END 
```

在此示例中，ELSE 值将包括所有空行，因为它们不等于“team01”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T20:21:20.013

```
SELECT TOP 30 FROM Mails
WHERE assignedByTeam <> 'team01'
OR assignedByTeam is null 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-02T20:19:52.810

```
 where column != 'value' or column is null 
```

# javascript - Primefaces JS在其他资源之前插入导致错误

> ID：10421021
> 
> 赞同：0
> 
> 时间：2012-05-02T20:18:06.200
> 
> 标签：javascript, eclipse, jsf-2, primefaces, colorbox

我正在使用 JSF2.0 和 Eclipse Indigo，最近我将 PrimeFaces 库添加到我的构建路径中。在此之前，我有一个使用 jquery1.7.2 + colorbox 工作的“灯箱”。我有以下内容：

```
<h:outputStylesheet library="css" name="style.css" type="text/css"/>  
<h:outputStylesheet library="css" name="colorbox.css" type="text/css"/>        
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>  
<h:outputScript library="js" name="jquery.colorbox.js" target="head"/> 
```

资源位于`WebContent/resources/js`.

添加*PrimeFaces*后，我的“灯箱”不再起作用，因为`colorbox`找不到该功能。查看 JSF2 生成的源代码后，我注意到该库在我的上方插入了它自己的 jQuery 版本，`jquery.colorbox.js`因此颜色框库无法使用 jQuery 库。此外，缺少 jquery.colorbox.js 包含。

如何将 PrimeFaces JavaScript 库重新定位到页面上的不同位置？为什么我`jquery.colorbox.js`没有像以前那样加载？

我的实际页面可能有用。它就在[这里](https://github.com/knownasilya/Ambience/blob/master/g5.ambience/WebContent/index.xhtml)。

我仍然从 Chrome 中的 JavaScript 控制台收到相同的错误。当页面加载时我得到这个：

```
Uncaught ReferenceError: jQuery is not defined 
```

当我单击我的*颜色框*链接时，以下内容：

```
Uncaught TypeError: Object [object Object] has no method 'colorbox'
(anonymous function):8080/g5.ambience/:24
b.event.dispatchjquery.js.html:16
b.event.add.bD.handle.bB 
```

即使有丹尼尔斯的建议，这里是产生的来源：http: [//pastie.org/3851179](http://pastie.org/3851179)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:26:05.610

1) try using primefaces bundled jquery (3.2 version uses the 1.7.1 jQuery)

replace the

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

with

```
<h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
<h:outputScript target="head">
    $ = jQuery;
</h:outputScript> 
```

**EDIT**

2) another option is to load your jQuery and the colorbox plugin before the loading of the primefaces bundled jQuery (not tested and not even sure that it will work , so it's not recommended :) )

```
<f:facet name="first">
    <h:outputScript library="primefaces" name="jquery/jquery.js"/>
    <h:outputScript target="head">
        $ = jQuery;
    </h:outputScript>
</f:facet>
<h:outputScript library="js" name="jquery.colorbox.js" target="head"/> 
```

# objective-c - UIScrollview 在缩小时更改 UIButton 的图像质量

> ID：10421025
> 
> 赞同：1
> 
> 时间：2012-05-02T20:18:22.837
> 
> 标签：objective-c, ios, xcode, image, ios5

我有一个大的显示区域，可以平移和缩放以查看不同的对象。我遇到的问题是，如果我缩小，PNG 图像 UIButton 的质量会有所下降（但是当我放大到 100% 时它会恢复正常）。它几乎看起来好像图像变得过度锐化。这是我必须忍受的东西，还是有办法摆脱这种颗粒状的边缘效应？顺便说一下，图像的纵横比始终是 1:1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:44:03.803

我能够通过使用在我的 scrollViewDidEndZooming 方法中找到[的答案来解决这个问题。](https://stackoverflow.com/a/7775470/403952)这是我的代码：

**调整大小功能**

```
- (UIImage *)resizeImage:(UIImage*)image newSize:(CGSize)newSize {
    CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
    CGImageRef imageRef = image.CGImage;

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Set the quality level to use when rescaling
    CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height);

    CGContextConcatCTM(context, flipVertical);  
    // Draw into the context; this scales the image
    CGContextDrawImage(context, newRect, imageRef);

    // Get the resized image from the context and a UIImage
    CGImageRef newImageRef = CGBitmapContextCreateImage(context);
    UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

    CGImageRelease(newImageRef);
    UIGraphicsEndImageContext();    

    return newImage;
} 
```

**ScrollView 方法** *（Widget 是一个 UIViewController 子类，其中包含一个按钮和一个“widgetImage”，它存储按钮应显示的图像的完整分辨率）*

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale
{ 
    for(Widget *theWidget in widgets){
        UIImage *newScaledImage = [self resizeImage:theWidget.widgetImage newSize:CGSizeMake(theWidget.view.frame.size.width * scale, theWidget.view.frame.size.height * scale)];
        [theWidget.widgetButton setImage:newScaledImage forState:UIControlStateNormal];
        // theWidget.widgetButton.currentImage = newScaledImage;
    }
} 
```

# objective-c - 将父类的实例转换为其子类

> ID：10421031
> 
> 赞同：1
> 
> 时间：2012-05-02T20:18:43.577
> 
> 标签：objective-c, ios, xcode, uiimage, subclassing

我将 UIImage 子类化为创建 UIImageExtra。我在 UIImageExtra 中有一个名为 adjustForResolution 的方法，它可以调整 UIImage 的大小。但是我希望它返回一个 UIImageExtra。我知道我需要转换它，但不确定如何转换。基本上，如果我调整 UIImageExtra 的大小，它就会变成 UIImage。

这是我的 UIImageExtra 类：

```
 #import "UIImageExtra.h"
#import <objc/runtime.h>
#import "UIApplication+AppDimensions.h"

#define kOriginData     @"originData"

@implementation UIImageExtra

@synthesize originData;

+ (UIImageExtra *)imageNamed:(NSString *)imageName origin:(NSValue *)originData {
    NSString *path = [[NSBundle mainBundle] pathForResource:imageName ofType:@""];
    UIImageExtra *imageExtra = [[UIImageExtra alloc] initWithContentsOfFile:path];
    imageExtra.originData = originData;
    return imageExtra;
}

- (id)initWithContentsOfFile:(NSString *)path {
    self = [super initWithContentsOfFile:path]; 
    if (self) {
        self = [self adjustForResolution];
    }
    NSLog(@"Image description: %@", [self description]);
    return self;
}

- (id)adjustForResolution {
    //All images are sized for ipad3 (2048 x 1536), so determine scale factor by ratio
    CGSize screenSize = [UIApplication currentSize];
    double scalefactor = screenSize.width/2048;
    CGSize newSize = CGSizeMake(self.size.width*scalefactor, self.size.height*scalefactor);
    UIImage *scaledImage = [self imageByScalingAndCroppingForSize:newSize];
    return scaledImage;
}

- (id)imageByScalingAndCroppingForSize:(CGSize)targetSize
{
   //returns resized image
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:59:36.983

制作 UIImage 的类扩展来处理调整大小然后创建一个从 NSObject 继承的新类来保存两个 UIImage 会更容易吗。一个是原始 UIImage，另一个是调整大小的副本？

UIImage+Extra.h：

```
#import <UIKit/UIKit.h>

@interface UIImage (Extra)

-(void)adjustForResolution;
-(void)imageByScalingAndCroppingForSize:(CGSize)targetSize;

@end 
```

UIImage+Extra.m：

```
#import "UIImage+Extra.h"

@implementation UIImage (Extra)

- (void)adjustForResolution {
      //All images are sized for ipad3 (2048 x 1536), so determine scale factor by ratio
      CGSize screenSize = [UIApplication currentSize];
      double scalefactor = screenSize.width/2048;
      CGSize newSize = CGSizeMake(self.size.width*scalefactor,self.size.height*scalefactor);
      [self imageByScalingAndCroppingForSize:newSize];

}

- (id)imageByScalingAndCroppingForSize:(CGSize)targetSize
{

      //instead of doing work to another object and returning it... Do it to self (UIimage)

}

@end 
```

然后在您的自定义 NSObject 类上，您的 init 可能是这样的：

```
#import "UIImage+Extra"

...

//initialisation 

if (self) {

     originalImage = [UIImage imageNamed:@"theimage.png"];
     resizedImage = [UIImage imageNamed:@"theimage.png"];
     [resizedImage adjustForResolution];

} 
```

刚才打的，可能有错别字，希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:10:34.700

我认为这是你想要做的：

```
- (id)initWithContentsOfFile:(NSString *)path {
    CGSize screenSize = [UIApplication currentSize];
    double scalefactor = screenSize.width/2048;
    if (scalefactor < 1) {
        UIImage *img = [UIImage imageWithContentsOfFile:path];
        CGSize newSize = CGSizeMake(img.size.width*scalefactor, img.size.height*scalefactor);
        UIGraphicsBeginImageContext(newSize);
        CGContextRef c = UIGraphicsGetCurrentContext();

        [img drawInRect:(CGRect){CGPointZero, newSize}];
        CGImageRef scaledImage = CGBitmapContextCreateImage(c);
        UIGraphicsEndImageContext();
        self = [super initWithCGImage:scaledImage];
        CGImageRelease(scaledImage);
    }else {
        self = [super initWithContentsOfFile:path];
    }
    return self;
} 
```

不使用 contensOfFile 而不是 initWithCGImage 的缺点是，生成的图像不可清除，因此迟早您会遇到内存问题。

# c - 在解析 argv 变量时在 C 中使用 strsep 不起作用

> ID：10421033
> 
> 赞同：0
> 
> 时间：2012-05-02T20:18:47.863
> 
> 标签：c, string, parsing, strtok, strsep

解析 argv 变量时，我在 C 中遇到问题。这是任务：

我从命令行获得了一些参数到我的 C 程序中。其中一个看起来像“-r=20-5”。在那里我必须找到“r”。这适用于：

```
if (argv[i][0] != 0 && argv[i][1] != 0 && argv[i][2] != 0 &&
    argv[i][0] == '-' && argv[i][2] == '=') { /* Check the Variables */
    switch (argv[i][1]) {
        case 'r':
            /* what have to be here? */
            break;
} 
```

现在我有了“r”。但我也需要两个不同变量中的 20 和 5。这是我的想法，但它没有用。我尝试了一些东西

```
strsep(argv[i]+3, "-"); 
```

但是我的编译器（Xcode）会抛出一个警告（警告：从不兼容的指针类型传递'strsep'的参数1）

有谁知道（或链接）我如何解决这个问题？

* * *

解决后仍然有警告，所以我被回答发布我的整个新代码：

* * *

```
int parse(int argc, const char *argv[]) {
    int i, x, y;
    int intTmp;
    long longTmp;
    char *strTmp;
    char *end;

    for (i = 1; i < argc; i++) {
        /* check for (-?=) */
        if (argv[i][0] != 0 && argv[i][1] != 0 && argv[i][2] != 0 &&
            argv[i][0] == '-' && argv[i][2] == '=') {

            /* IGNORE THIS
             * longTmp = strtol(argv[i]+3, &end, 10);
             * intTmp = analyseEndptr(longTmp, argv[i]+3, end);
             */

            switch (argv[i][1]) {
                case 'r':
                    strTmp = argv[i]+3;                 /* <= Here I got the warning */
                    x = atoi(strsep(&strTmp, "-"));
                    y = atoi(strsep(&strTmp, "-"));
                    printf("x=%d, y=%d\n", x, y);
                    break;
            }
        }
    }
} 
```

警告是：警告：从不兼容的指针类型传递“strsep”的参数 1

我的编译器是：在 MacOS 上使用 XCode 作为 IDE 的 gcc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:12:11.150

你知道sscanf吗？看一下：

```
 unsigned a,b;
  if( 2==sscanf(argv[i],"-r=%u-%u",&a,&b) )
    printf("%u-%u",a,b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:02:16.820

这是您将字符串传递给`strsep()`

```
 switch (argv[i][1]) {
        char *s;
        int x, y;
        case 'r':
            s = argv[i] + 3;
            x = atoi(strsep(&s, "-"));
            y = atoi(strsep(&s, "-"));
            printf("x=%d, y=%d\n", x, y);
            break;
    } 
```

将产生：

```
x=3, y=4 
```

不要按原样使用它。您必须对您的案件进行适当的额外`NULL`检查。`x``y`

# java - 在 Android 中，如何解析字符串或其他变量类型？

> ID：10421036
> 
> 赞同：0
> 
> 时间：2012-05-02T20:19:04.000
> 
> 标签：java, android, parsing

我正在查询我的数据库以显示基于日期列的行。我有正确运行的方法，但我必须更改数据库中日期值的格式。以前，我的日期为 yyyyMd，例如今天将得到 201252。然后我将日期解析为 Long 并将其传递给我的方法

```
 String sd = hiddenDate.getText().toString();
    long aLong = Long.parseLong(sd);
    dba.open();
    String[] rScr = dba.getTodayMethod(aLong); 
```

但我不得不将日期格式重写为 yyyy-My。然后日期中的破折号打破了我认为的“parseLong”。似乎只是将 sd 变量传递到 getTodayMethod 中，`String[] rScr = dba.getTodayMethod(sd);`也不起作用。那么我应该将 String sd 解析成什么来容纳日期中的破折号？以及如何编写解析代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:22:25.843

从根本上说，您尝试将其解析为很长的开头是在做错事。它不是 64 位整数的文本表示 - 它是*date*的文本表示。所以使用与日期/时间有关的类型。

就我个人而言，我喜欢使用[Joda Time](http://joda-time.sf.net)，但如果你在 Android 上*可能*对你来说太大了——在这种情况下，你将不得不使用[`java.util.Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)and [`java.util.Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)，尽管它们很糟糕，然后[`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)用于解析。（不要忘记适当地设置语言环境和时区......）

# jquery - 如何使用 jQuery 仅选择 TreeView 的兄弟分支？

> ID：10421047
> 
> 赞同：1
> 
> 时间：2012-05-02T20:19:52.727
> 
> 标签：jquery, treeview, siblings

我有一个使用 Telerik 的 KendoUI 的多级树视图，我正在尝试为重新排序的节点的分支获取正确的 ID。

```
 <ul id="root">
    <li>Item 1 (1)<input type="hidden" name="PresetItemId" value="1" />
        <ul>
            <li>Item 1.1 (5)<input type="hidden" name="PresetItemId" value="5" /></li>
            <li>Item 1.2 (6)<input type="hidden" name="PresetItemId" value="6" />
                <ul>
                    <li>Item 1.2.1 (11)<input type="hidden" name="PresetItemId" value="11" /></li>
                    <li>Item 1.2.2 (12)<input type="hidden" name="PresetItemId" value="12" /></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Item 2 (2)<input type="hidden" name="PresetItemId" value="2" />
        <ul>
            <li>Item 2.1 (7)<input type="hidden" name="PresetItemId" value="7" />
                <ul>
                    <li>Item 2.1.1 (13)<input type="hidden" name="PresetItemId" value="13" />
                        <ul>
                            <li>Item 2.1.1.1 (18)<input type="hidden" name="PresetItemId" value="18" /></li>
                        </ul>
                    </li>
                    <li>Item 2.1.2 (14)<input type="hidden" name="PresetItemId" value="14" /></li>
                </ul>
            </li>
            <li>Item 2.2 (8)<input type="hidden" name="PresetItemId" value="8" />
                <ul>
                    <li>Item 2.2.1 (15)<input type="hidden" name="PresetItemId" value="15" /></li>
                </ul>
            </li>
            <li>Item 2.3 (27)<input type="hidden" name="PresetItemId" value="27" /></li>
        </ul>
    </li>
    <li>Item 3 (3)<input type="hidden" name="PresetItemId" value="3" />
        <ul>
            <li>Item 3.1 (9)<input type="hidden" name="PresetItemId" value="9" />
                <ul>
                    <li>Item 3.1.1 (16)<input type="hidden" name="PresetItemId" value="16" /></li>
                </ul>
            </li>
            <li>Item 3.2 (10)<input type="hidden" name="PresetItemId" value="10" />
                <ul>
                    <li>Item.3.2.1 (23)<input type="hidden" name="PresetItemId" value="23" /></li>
                </ul>
            </li>
            <li>Item 3.3 (19)<input type="hidden" name="PresetItemId" value="19" />
                <ul>
                    <li>Item.3.3.1 (24)<input type="hidden" name="PresetItemId" value="24" /></li>
                </ul>
            </li>
            <li>Item 3.4 (20)<input type="hidden" name="PresetItemId" value="20" />
                <ul>
                    <li>Item.3.4.1 (25)<input type="hidden" name="PresetItemId" value="25" /></li>
                </ul>
            </li>
            <li>Item 3.5 (21)<input type="hidden" name="PresetItemId" value="21" />
                <ul>
                    <li>Item.3.5.1 (28)<input type="hidden" name="PresetItemId" value="28" /></li>
                </ul>
            </li>
            <li>Item 3.6 (22)<input type="hidden" name="PresetItemId" value="22" />
                <ul>
                    <li>Item.3.6.1 (26)<input type="hidden" name="PresetItemId" value="26" /></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Item 4 (4)<input type="hidden" name="PresetItemId" value="4" /></li>
</ul> 
```

我的想法是每个父级都包含子级，并且这些子级从 TreeView 中的任何其他分支独立排序。

因此，我需要获取节点所在分支的所有兄弟姐妹，并在对节点进行排序时仅获取该分支级别的 id。如果这些节点中的任何一个有孩子，我不希望孩子成为 Id 集合的一部分。

我让它工作了，有点，但它返回了所有的兄弟姐妹（这是正确的），还有这些兄弟姐妹的所有孩子（这是不正确的）。

```
var treeview;

function onTreeViewDragEnd(e){
    var console = $("#console");
    //alert("source: " + treeview.text(e.sourceNode));
    //alert("destination: " + treeview.text(e.destinationNode));

    var list = $(e.destinationNode).siblings().not($(this).children());

    var data = $("input", list).serialize();
    console.html(JSON.stringify(data));
}

treeview = $("#root").kendoTreeView({
    dragAndDrop : true,
    dragend: onTreeViewDragEnd
}).data("kendoTreeView"); 
```

我已经开始了一个 jsfiddle：http: [//jsfiddle.net/kahanu/PdaRg/1/](http://jsfiddle.net/kahanu/PdaRg/1/)

要使用此示例，只需展开一个节点，然后将其放在同一分支的其他位置，它将显示该分支的隐藏输入值（以及子节点，这不是我想要的）。

任何为我指明正确方向的帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:25:39.550

并不是您获取的节点比您需要的多，而是您在`input`节点下方的任何级别进行搜索。

```
var list = $(e.destinationNode).siblings();
var data = list.children("div").find("input").serialize(); 
```

# postgresql - 如何使用 plpgsql 函数插入数据？

> ID：10421051
> 
> 赞同：5
> 
> 时间：2012-05-02T20:19:56.197
> 
> 标签：postgresql

我正在尝试使用 plpgsql 函数或存储过程将数据插入表中。但是，我想一次插入多条记录。我现在这些都将是 VARCHAR 所以我想我可以使用形成的函数，如`function(tablename VARCHAR, records VARCHAR[][])`. 但后来我发现 plpgsql 中的多维数组支持并不是那么棒。

这就是我目前的功能。这不会产生我正在寻找的结果。当我问

```
SELECT insert_data('tennis', ARRAY[ARRAY['1','2'], ARRAY['3','4']]) 
```

我收到以下错误

```
ERROR:  syntax error at or near "{"
LINE 1: INSERT INTO tennis VALUES (null, {{1}}), (null, {{3}});
                                         ^
QUERY:  INSERT INTO tennis VALUES (null, {{1}}), (null, {{3}});
CONTEXT:  PL/pgSQL function "insert_data" line 26 at EXECUTE statement 
```

但是我期待像这样的查询

```
INSERT INTO tennis VALUES (null, '1', '2'), (null, '3', '4'); 
```

这会起作用，因为乒乓球有这种结构。

```
CREATE OR REPLACE FUNCTION insert_data (dsetname_in VARCHAR, records VARCHAR[][])
RETURNS BOOLEAN AS $PROC$
DECLARE
    insertquery TEXT;
    val VARCHAR;
    i INT;
    j INT;
BEGIN
    insertquery = $$INSERT INTO $$ || dsetname_in || $$ VALUES $$;
    FOR i IN array_lower(records, 1)..array_upper(records, 1)
    LOOP
        insertquery = insertquery || $$(null, $$;
        FOR j IN array_lower(records[i:i], 1)..array_upper(records[i:i], 1)
        LOOP
            val = records[i:i][j:j];
            insertquery = insertquery || val;
            IF j <> array_upper(records[i:i], 1) THEN
                insertquery = insertquery || $$, $$;
            END IF;
        END LOOP;
        insertquery = insertquery || $$)$$;
        IF i <> array_upper(records, 1) THEN
            insertquery = insertquery || $$, $$;
        END IF;
    END LOOP;
    insertquery = insertquery || $$;$$;
    EXECUTE insertquery;
    RETURN TRUE;
END;$PROC$ LANGUAGE 'plpgsql'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T22:55:00.633

我对整个方法的价值持怀疑态度，因为我没有看到它增加了任何有用的抽象级别。但是如果你必须这样做，并且你所有的值都是字符串，我认为最干净的方法是：

```
CREATE OR REPLACE FUNCTION insert_data(dsetname_in text, records text[])
RETURNS VOID LANGUAGE plpgsql AS $PROC$
DECLARE
  insertquery text;
  i int;
BEGIN
  insertquery := 'INSERT INTO ' || dsetname_in || ' VALUES ';
  FOR i IN array_lower(records, 1)..array_upper(records, 1)
  LOOP
    insertquery := insertquery || '(null, ' || records[i] || '),';
  END LOOP;
  insertquery := left(insertquery, char_length(insertquery) - 1);
  EXECUTE insertquery;
END;
$PROC$; 
```

然后你可以这样调用它，这看起来比你为嵌套数组显示的更干净：

```
SELECT insert_data('tennis',
                   ARRAY[$$'1','2'$$,
                         $$'3','4'$$]); 
```

# php - 使用 Insert 保存 textarea，然后在 Update 之后保存

> ID：10421055
> 
> 赞同：-1
> 
> 时间：2012-05-02T20:20:03.397
> 
> 标签：php, jquery, mysql, html

有什么办法可以做到，所以当有人第一次在 textarea 上单击保存时，它会将其插入到数据库中，然后无论何时他们单击该保存按钮，它都会更新它刚刚创建的行并且不会每次更新相同的文本区域时插入一个新行？

猜测这个是一件很容易的事情，只是真的不知道你会怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:24:46.883

```
$sql = "SELECT id FROM `certainTable` WHERE `uid`='".$user_id."'";
$res = mysqli_query($sql) or die(mysqli_error());

if($res->num_rows > 0){
    // update query
} else {
    // insert query
} 
```

只需检查用户表中是否有一行，如果他们（`$res->num_rows > 0`）更新他们的行，否则插入一个新行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:34:26.120

HTML

```
​&lt;form id="new_one">
​&lt;textarea name="text" id="textArea"></textarea>
​&lt;input type="submit" id="submit" value="Save">
​&lt;/form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

JS

```
$('#submit').click(function(e){
   e.preventDefault();

var formData = $('#textArea').val();

    $.ajax({
        type: 'POST',
        url: '/path/to/php/page/',
        data: formData
    }); 
});​​​​​​ 
```

我打算做PHP，但似乎已经发布了。希望这会有所帮助。

[http://jsfiddle.net/charliepage88/G6jce/](http://jsfiddle.net/charliepage88/G6jce/)

# google-chrome-extension - Google Chrome 扩展、属性收集器和 URL 重构

> ID：10421058
> 
> 赞同：1
> 
> 时间：2012-05-02T20:20:13.240
> 
> 标签：google-chrome-extension

Chrome 编程新手，但或多或​​少熟悉 Javascript。

目标：

一个 Chrome 插件可以让我：

1) 右键单击​​链接

2）然后向该链接添加更多字符

3) 然后使用新构建的 URL 重新加载页面。

前任：

A. 对象有一个链接：www.address.com/34922

B. 用户右键单击该对象（Chrome 的菜单出现[我知道如何修改]），菜单选项出现“reconstruct rul”。

C. 附加组件将“/subfolderA”添加到上述 url。

D. 使用以下 URL 重新加载页面：www.address.com/34922/subfolderA

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:36:57.337

使用[`chrome.contextMenus`](http://code.google.com/chrome/extensions/contextMenus.html)API，更具体地说是[`create`](http://code.google.com/chrome/extensions/contextMenus.html#method-create)方法。

```
// Add this to the background page
chrome.contextMenus.create({
    title: 'Open this link plus /subfolderA',
    contexts: ['link'],
    onclick: function(info, tab) {
        var linkUrl = info.linkUrl;
        // Some logic, eg adding a fragment:
        linkUrl += '/subfolderA';
        // Replace URL on current tab
        chrome.tabs.update(tab.id, {url: linkUrl});
    },
    // The following array should consist of valid match patterns
    //  This context menu item will only be visible on matching links
    targetUrlPatterns: ['http://adress.com/*']
}); 
```

## 相关文件

使用的方法：

*   [`chrome.contextMenus`](http://code.google.com/chrome/extensions/contextMenus.html)API
    *   [`chrome.tabs.create(<object createProperties>)`](http://code.google.com/chrome/extensions/contextMenus.html#method-create)
    *   onClickData[类型](http://code.google.com/chrome/extensions/contextMenus.html#type-OnClickData)。这只是一个普通的 JavaScript 对象。但是，Chrome*会*验证这个对象，并在使用未知格式（例如错误的属性）时抛出错误。
*   [`chrome.tabs`](http://code.google.com/chrome/extensions/tabs.html)API
    *   [`chrome.tabs.update(<integer tabId>, <object updateProperties>)`](http://code.google.com/chrome/extensions/tabs.html#method-update)

进一步阅读：

*   [背景页面](http://code.google.com/chrome/extensions/background_pages.html)
*   [清单文件](http://code.google.com/chrome/extensions/manifest.html)
*   [匹配模式](http://code.google.com/chrome/extensions/match_patterns.html)

# push-notification - 通过 Wifi 推送通知

> ID：10421062
> 
> 赞同：0
> 
> 时间：2012-05-02T20:20:37.213
> 
> 标签：push-notification

我有一个问题，我们希望有一个简单的解决方案。

我们需要允许推送通知在设备进入某个空间时出现在设备上。这个空间只有大约 1500 平方英尺。所以我的想法是在这个区域建立一个 wifi 网络......我很好奇是否有人知道是否可以通知任何在他们的设备上安装了我们的应用程序的人当他们进入这个 wifi 空间时，如果他们想采取某种行动……例如打开应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:05:31.180

创建一个在触发 WIFI 连接的意图时启动的 Android 服务。

该服务将检查 wifi 连接的 bssid 是否与您要监控的 wifi 区域相同，然后它可以启动应用程序/显示弹出/显示通知。

# php - 在 PHP / Zend 框架中从 SQL 调用 RPGLE 程序

> ID：10421063
> 
> 赞同：1
> 
> 时间：2012-05-02T20:20:38.710
> 
> 标签：php, sql, zend-framework, call, ibm-midrange

我们在库 LMTLIB 中创建了一个 AS400 RPGLE 程序，称为 ARTEST。

它有一个数字 inout 参数，只返回 2

```
$myVar = "1";

$db = Zend_Registry::get('config')->resources->multidb->as400;

$abstractAdapter = new Zend_Db_Adapter_Db2($db);

//Gives the message "Invalid bind-variable position 'myVar'"
$sql = 'CALL QSYS.QCMDEXC(\'CALL LMTLIB.ARTEST PARM(?)\', 0000000026.00000)';

//Gives the message "Token PARM was not valid. Valid tokens: ( INTO USING. SQLCODE=-104"    
$sql = 'CALL LMTLIB.ARTEST PARM(?)';

//Gives the message "ARTEST in LMTLIB type *N not found. SQLCODE=-204"
$sql = 'CALL LMTLIB.ARTEST (?)';

$stmt = new Zend_Db_Statement_Db2($abstractAdapter, $sql);

$stmt->bindParam('myVar', $myVar, 4, 1);

$stmt->execute(); 
```

现在，我可以理解为什么第三条 SQL 语句会因“未找到”消息而失败……因为它不是表/文件，而是 RPGLE 程序。

令人恼火的是，如果我删除（？），并简单地放入（1）...... SQL 调用似乎是成功的，并且 RPGLE 程序显示它已被调用。但是，我无法看到程序的响应是什么。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:35:16.517

通常，数据库管理器使用 CALL 语句来调用存储过程。当它这样做时，它会查找参数签名与 CALL 签名匹配的存储过程。

如果没有具有该名称和签名的存储过程，则数据库管理器会尝试调用程序。同样，发生了一个参数匹配过程。

[http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/db2/rbafzmstcallsta.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/db2/rbafzmstcallsta.htm)

我建议创建一个存储过程，以便您可以正确匹配参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-21T00:07:26.700

IBM RPGLE 可以通过 Web 服务调用与 Zend 框架交互。

斯科特克莱门特在[这里回顾了一些基础知识。](https://www.scottklement.com/presentations/Web%20Services%20for%20RPGers.pdf)

根据您的应用程序，这可能是与 RPG 代码交互的最佳方式。可以使 Web 服务调用许多 RPG 程序和 iSeries 表，并返回满足要求的结果集。Zend 会认为这与任何其他 RESTful 调用相同，可以由您的模型处理。

# zendx - 将语言更改为 zendx_jquery_form_element_datepicker

> ID：10421067
> 
> 赞同：0
> 
> 时间：2012-05-02T20:20:52.957
> 
> 标签：zendx

我想知道是否有办法更改 zendx_jquery_form_element_datepicker 中的语言，我的意思是，我的页面全部显示为西班牙语，当我显示元素 datepicker 时，日期和月份显示为英文，我希望它们显示为西班牙文。

先谢谢了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:57:44.607

尝试为 datepicker 元素设置区域属性..

```
$dob= new ZendX_JQuery_Form_Element_DatePicker('dob');
$dob->setLabel('Date of Birth:')                    
            ->setJQueryParam('dateFormat', 'dd.mm.yy')
            ->setJqueryParam('regional', 'es') 
```

# iis-7 - IIS7 UrlRewrite 条件满足时未达到 ASP.NET MVC BeginRequest

> ID：10421072
> 
> 赞同：0
> 
> 时间：2012-05-02T20:21:17.040
> 
> 标签：iis-7, url-rewriting, inversion-of-control, ioc-container, autofac

我有一个 ASP.NET MVC 应用程序，它在 Global.asax 的 BeginRequest 例程中设置了一个 Autofac IOCContainer。

一切都很好，直到满足我的 IIS7 UrlRwrite 规则/条件之一，例如小写 url。我注意到，只要我在 url 中放了一个大写字母，因此触发了 url 重写规则，就没有到达 BeginRequest 例程，但 EndRequest 例程是。

我遇到的问题是在这种情况下从未设置过 IOCContainer，因此当 EndRequest 被触发并且我尝试处理 web 上下文/ioc 容器时，它会出错，因为它从来没有被设置过。

为什么 BeginRequest 在上述情况下永远无法到达，是否存在针对由此产生的 IOC 问题的常见解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:39:07.957

作为`AutofacDependencyResolver`Autofac MVC 集成的一部分，它已经在每个 HTTP 请求开始时创建了一个新的生命周期范围，并将在 HTTP 请求结束时释放它。您不需要自己管理它。你在使用DependencyResolver机制的时候有这个问题吗？

```
var builder = new ContainerBuilder();
builder.RegisterControllers(typeof(MvcApplication).Assembly);
var container = builder.Build();
DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

您可以在 Autofac wiki 上找到有关 MVC 集成的更多信息。

[http://code.google.com/p/autofac/wiki/Mvc3Integration](http://code.google.com/p/autofac/wiki/Mvc3Integration)

# javascript - 子菜单链接上的每次点击功能问题

> ID：10421074
> 
> 赞同：0
> 
> 时间：2012-05-02T20:21:21.117
> 
> 标签：javascript, jquery, attr, mousedown

好的，这里非常非常奇怪的问题。我有一个子导航菜单，它链接到同一页面，但通过 URL 传递一个 GET 变量，因此小应用程序知道要显示哪个服务。我遇到的问题是，无论单击子菜单中的哪个链接，jQuery 都会从列表中的最后一个链接返回属性。我什至尝试将事件绑定到外部“li”元素，但同样的问题发生了！无论我试图抓住哪个属性，它也会发生。

这不是问题，除非我试图阻止链接重新加载页面，而所有小应用程序需要做的就是从单击的项目中获取一个字符串来设置参数以运行并加载所需的数据。我想最简单的方法是让我将您链接到网络主机上页面的工作副本：

[http://www.dealertec.com/_index.html](http://www.dealertec.com/_index.html)

我目前有它提醒 href 属性，以便您可以看到问题的实际效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:34:02.260

错误 - services.1.1.js 的第 203 行和第 204 行 - 未定义事件：

```
li.bind('click touchstart', function() {
event.preventDefault(); 
```

您需要在函数中传递事件以防止默认操作：

```
li.bind('click touchstart', function(e) {
e.preventDefault(); 
```

# c# - 通过 JSON/PHP (base64_encode) 从基于图像的 C# 中解释 base 64

> ID：10421075
> 
> 赞同：3
> 
> 时间：2012-05-02T20:21:24.620
> 
> 标签：c#, php, json, base64

所以我能够成功读取图像文件，并将其传递回我的 C# 应用程序，但我无法正确解码。

我正在通过 PHP 返回 JSON 数据（未显示 json_encode 函数）：

```
 $imgbinary = fread(fopen($filename, "r"), filesize($filename));

        if ( strlen($imgbinary) > 0 ){
            return array("success"=>true, "map"=>base64_encode($imgbinary));
        } 
```

然后在 C# 中我使用 Newtonsoft.Json 解码字符串（我可以成功读取成功和地图属性），但我无法使用 base64 解码将图像正确写入文件（或显示）。

我这样做是这样的：

```
File.WriteAllText(System.Windows.Forms.Application.StartupPath + "\\MyDir\\" + FileName, Base64Decode(FileData));

    public string Base64Decode(string data)
    {
        byte[] binary = Convert.FromBase64String(data);
        return Encoding.Default.GetString(binary);
    } 
```

我在这里错过了一些疯狂的简单吗？真正奇怪的是，在我解码数据后，文件大小比原始文件大。（我意识到一旦你编码，数据增加了大约 33%，奇怪的是在我解码之后，它仍然更大）。

任何帮助/指针将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T20:25:08.913

> 我在这里错过了一些疯狂的简单吗？

是的。图像*不是*文本文件，因此您不应该使用`File.WriteAllText`. 您认为图像文件中存在哪些*字符*？区分数据基本上是文本和二进制数据是非常非常重要的。如果你试图把其中一个当作另一个，你就是在自找麻烦。

*不要*从字节数组转换回文本（您的`Encoding.Default.GetString`调用将丢失数据） - 只需使用：

```
File.WriteAllBytes(path, Convert.FromBase64String(data)); 
```

# javascript - Openfire：在 Openfire 服务器中使用 SASL Anonymous 创建用户

> ID：10421082
> 
> 赞同：0
> 
> 时间：2012-05-02T20:21:43.343
> 
> 标签：javascript, xmpp, openfire, strophe

是否可以使用 Strophe.js 使用匿名用户创建新用户（带内注册），如下例所示：[http](http://groups.google.com/group/strophe/browse_thread/thread/a0e15ae226b91a3a?fwc=1) ://groups.google.com/group/strophe/browse_thread/thread/a0e15ae226b91a3a?fwc=1 。我设法仅使用现有帐户注册新用户（作为普通的“非管理员”用户）。这是一个开放式安全问题吗？我使用匿名连接：

```
 connection.connect("server.local", null, onConnect); 
```

服务器返回：

```
 <iq xmlns="" type="error" id="reg2" to="7711fc7f@server.local/7711fc7f">
    <query xmlns="jabber:iq:register">
        <username>user</username>
        <password>abc</password>
    </query>
    <error code="400" type="modify">
        <bad-request xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>
    </error>
</iq> 
```

如果我与注册用户连接，它工作正常，我可以创建其他用户。允许从专用用户帐户（例如 register@server.local（没有管理员权限））进行注册会不安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:27:22.367

> 我设法仅使用现有帐户注册新用户（作为普通的“非管理员”用户）。这是一个开放式安全问题吗？

这取决于您的观点 - 如果这是您想要的，不，这不是安全问题。如果您想将帐户创建限制为部署中的管理员，是的。Openfire 应该有配置参数来控制谁可以创建帐户（尽管在某些版本中这些控件根本不起作用 - 这*是*一个安全问题！）。

周围有一些已知的脚本可以主动发现并在具有开放注册的服务器上注册帐户。一些人（尤其是像 jabber.org 这样的大型目标）选择完全禁用带内注册，而另一些人则只是对其设置 per-IP 速率限制限制。还有一个规范 ( [XEP](http://en.wikipedia.org/wiki/CAPTCHA) [-0158](http://xmpp.org/extensions/xep-0158.html) ) 用于将验证码发送给客户端进行带内注册，但对此的支持远未普及。

> 服务器返回：

你给出的错误节有`xmlns=""`，这在我看来是可疑的。它应该是“jabber：client”，但 Openfire 似乎无论如何都理解它。

您还可以尝试将请求的“收件人”地址设置为您尝试注册的主机（例如`to='example.com'`，在注册“user@example.com”时）。如果您已经设置“to”，请尝试不使用它。关于这一点，我已经看到了对规范的不同解释。

# ruby-on-rails-3 - 我可以在升级 Ruby 1.8.7->1.9.3 和 Rails 3.0->3.2 时“移动”我的 gems 吗？

> ID：10421088
> 
> 赞同：1
> 
> 时间：2012-05-02T20:22:04.190
> 
> 标签：ruby-on-rails-3, rubygems

我是 Ruby/Rails 初学者，我在 Windows 上。

我刚刚使用 RailsInstaller 从 Rails 3.0.9 升级到 3.2.3，从 Ruby 1.8.7 升级到 1.9.3。我以前安装的 gem 在我键入时不再出现`gem list`。我认为这是正常的。

我的问题是：有没有办法让所有这些宝石“进入”Ruby 1.9.3 而无需单独重新安装它们？

当我进入一个旧的 Rails 应用程序并运行`bundle install`时，似乎我的一些 gem 被重新安装（Gemfile 中的那些）。

任何帮助，将不胜感激。抱歉，如果我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:51:21.347

**If you're just upgrading to a new version**, as long as everything that was in your Gemfile was installed when you ran `bundle install` then I wouldn't worry about it. Just re-install gems as you need them instead of bloating your system with gems that you don't currently need.

If you have projects that you are porting over to the newer versions of Rails and Ruby, you can just run `bundle install` as the first step in upgrading the app to make sure its dependencies are installed.

Maybe someone could give you an yes/no answer for transitioning with RailsInstaller, but I'm trending toward using rvm and gemsets to have a cleaner, more focused environment for each project.

**If you want to switch back and forth between multiple ruby versions**, maybe check out the gem [pik](https://github.com/vertiginous/pik). You can use it to install gems on multiple versions of ruby so that they're available across them all.

# macos - NSTableView 数据源编辑

> ID：10421091
> 
> 赞同：2
> 
> 时间：2012-05-02T20:22:11.553
> 
> 标签：macos, cocoa, osx-snow-leopard, nstableview, nsbuttoncell

我只是为 Snow Leopard 开发的 Cocoa 的初学者，我在编辑显示在`NSTableView`.

我试图编辑我的对象的一些属性，`-tableView:setObjectValue:forTableColumn:row:` 然后我有`EXC_BAD_ACCESS`。

我`NSTableView`的一列包含`NSButtonCell`单元格，并且该列的标识符为“已选中”。

我的代码很简单，如下所示：

```
@interface MyObj: NSObject {
    BOOL checked;
}
@property (assign) BOOL checked;
@end 
```

```
@imlpementation MyObj
@synthesize checked;
@end 
```

```
@interface MyAppDelegate: NSObject <NSApplicationDelegate, NSTableViewDelegate, NSTableViewDataSource> {
    NSMutableArray *data;
    NSTableView *table;
}

@property (assign) IBOutlet NSTableView *table;
- (NSInteger) numberOfRowsInTableView:(NSTableView *)aTableView;
- (id) tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex;
- (void)tableView:(NSTableView *)aTableView setObjectValue:(id)anObject forTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex;

@end 
```

```
@implementation MyAppDelegate

@synthesize table;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    data = [[NSMutableArray array] retain];

        // some code that add few objects to data
        // each object is instance of MyObj and I call alloc+init+retain for each
        // ...

    [table reloadData];
}

- (void)dealloc {
    [data release];
    [super dealloc];
}

- (NSInteger) numberOfRowsInTableView:(NSTableView *)aTableView {
    return (data == nil ? 0 : [data count]);
}

- (id) tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex {
    MyObj *obj;
    obj = [data objectAtIndex:rowIndex];
    NSString *identifier;
    identifier = [aTableColumn identifier];
    return [obj performSelector:NSSelectorFromString(identifier)];
}

- (void)tableView:(NSTableView *)aTableView setObjectValue:(id)anObject forTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex {
    MyObj *obj;
    obj = [data objectAtIndex:rowIndex];
    NSString *identifier;
    identifier = [aTableColumn identifier];
    if ([identifier isEqualTo:@"checked"]) {
        BOOL value = [anObject boolValue];
        obj.checked = value;
        [data replaceObjectAtIndex:rowIndex withObject:obj];
    }

    [table reloadData];
}

@end 
```

我已经`objc_msgSend_vtable5`从`-[NSButtonCell setObjectValue]`方法中提出了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:50:02.473

我找到了解决我的问题的方法。我`BOOL checked`改为`NSNumber *checked`.

```
- (void)tableView:(NSTableView *)aTableView setObjectValue:(id)anObject forTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex {
    MyObj *obj = (MyObj *)[data objectAtIndex:rowIndex];
    NSString *identifier;
    identifier = [aTableColumn identifier];

    if ([identifier isEqualTo:@"checked"]) {
        [obj setValue:[[NSNumber numberWithBool:[anObject boolValue]] retain] forKey:[aTableColumn identifier]];
    }

    [table reloadData];
} 
```

现在一切正常。我希望它可以帮助某人。

# sed - sed 扩展失败

> ID：10421092
> 
> 赞同：1
> 
> 时间：2012-05-02T20:22:13.667
> 
> 标签：sed

在安装程序期间，需要修改配置文件 (log4j.properties)。

一行 log4j.properties 包含

```
log4j.appender.R.File=${catalina.base}/logs/OurProductWorker.log 
```

我们希望将其更改为

```
log4j.appender.R.File=${catalina.base}/logs/OurProductWorker5.log 
```

（或一些类似的数字）

这有效：

```
sed -i 's/OurProductWorker.log/'"$1.log"'/g' "log4j.properties" 
```

( `$1`= 调用函数中从 1 到 9 的数字)

这失败了：

```
B_PRODUCT=OurProduct 
sed -i 's/"$B_PRODUCT"Worker.log/'"$1.log"'/g' "log4j.properties" 
```

我需要使用一个变量，因为我们需要为 OEM 重新命名它，而且在脚本开头更改一堆变量显然更容易，而不是单个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:31:33.120

尝试这个

```
sed -i 's/'"$B_PRODUCT"'Worker.log/'"$1.log"'/g' "log4j.properties" 
```

您总是必须“关闭”单引号才能使变量展开（就像您对 $1 所做的那样）。

我希望这有帮助。

# ios - 如何在 MapView 上表示不断移动的信号？

> ID：10421094
> 
> 赞同：3
> 
> 时间：2012-05-02T20:22:16.343
> 
> 标签：ios, mkmapview

我刚刚进入 iOS 上的 MapViews，并希望将汽车显示为一个蓝点不断移动。这会被视为地图注释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:59:59.383

是的。例如，查看 Simulator Debug > Location > City Bike Ride 中的示例。它绕着旧金山缓慢循环（？）

在 Mapview 委托中收听更新实现

```
- (void)mapView:(MKMapView *)amapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    NSLog(@"im here! - %f,%f",userLocation.location.coordinate.latitude,userLocation.location.coordinate.longitude); 

} 
```

并调整注释工具

```
- (MKAnnotationView *) mapView:(MKMapView *)amapView viewForAnnotation:(id <MKAnnotation>) annotation{

    if ([annotation isKindOfClass:[MKUserLocation class]]) {
        return nil;
    }
    NSLog(@"annotation = %@",((NSObject *)annotation));
    MKAnnotationView *annView;

    annView = [amapView dequeueReusableAnnotationViewWithIdentifier:@"currentloc"];

    if(!annView)
    {
        annView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"currentloc"] autorelease];
        ((MKPinAnnotationView *)annView).pinColor = MKPinAnnotationColorGreen;
        ((MKPinAnnotationView *)annView).animatesDrop=TRUE;
        annView.canShowCallout = YES;
        annView.calloutOffset = CGPointMake(-5, 5);
        annView.draggable = YES;
    }
    return annView;
} 
```

我输入的片段通过返回 nil 与默认的蓝色圆点配合使用，`MKUserLocation`但您的实现可能会有所不同。

# php - 是否有可下载的预配置 LAMP 堆栈？

> ID：10421095
> 
> 赞同：1
> 
> 时间：2012-05-02T20:22:18.060
> 
> 标签：php, mysql, linux, apache, lamp

在我看来，几年前有一个网站将 LAMP 堆栈预先打包成多组版本，可以很好地协同工作。我很难找到那个网站或任何其他类似的网站。

如果没有这样的站点，是否至少有一个站点具有图表或显示 LAMP 堆栈的稳定构建的东西？

我知道[TurnekyLinux.org](http://www.turnkeylinux.org/)但它并不是我真正想要的。

任何输入或建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:30:37.507

拥有在 linux 下可以很好地协同工作的包属于您的发行版的包管理器的领域。

如果您想要一键安装，我看到的最常见的技巧（在 debian 下）是： aptitude install phpmyadmin - 它应该为您安装灯堆栈。否则，您必须安装一组 8 个左右的软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-05T05:51:44.753

你试过[Bitnami LAMP Stack](http://bitnami.com/stack/lamp)吗？我们提供完全免费、可立即运行的安装程序、虚拟机和云映像 (AWS/Azure)。还有Windows和Mac版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T06:30:27.857

使用 apt 安装或仅使用相当旧的任务自动执行该过程。

我找到了这个指南： http: [//www.computersnyou.com/2012/05/how-to-install-lamp-stack.html](http://www.computersnyou.com/2012/05/how-to-install-lamp-stack.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T20:24:22.813

[XAMPP 来自 Apachefriends](http://www.apachefriends.org/de/xampp-linux.html)

你去:-)

或者简单地说（基于 Debian）：

```
apt-get install apache2 mysql-server mysql-client php5 php5-mysql 
```

然后你有一个功能齐全的 Apache2 服务器（DocumentRoot /var/www）和一个 MySQL 5.1（截至今天的 Debian Squeeze）服务器。

PS：我不确定这是否是一个编程问题。也许移动到 ServerFault

# c# - 如何根据某些条件创建正则表达式

> ID：10421097
> 
> 赞同：0
> 
> 时间：2012-05-02T20:22:28.510
> 
> 标签：c#, regex

我想创建一个正则表达式来根据某些条件查找和替换大写字符。

找到字符串中一组大写字符的起始大写，并将其替换为小写并`*`在起始大写之前。如果大写字母后面有小写字母，则将大写字母替换为小写字母，并`*`在开头的大写字母之前替换。

**输入字符串**：`stackOVERFlow`

**预期输出**： `stack*over*flow`

我试过但无法让它完美地工作。

关于如何创建正则表达式的任何想法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:29:02.260

Well the expected inputs and outputs are slightly illogical: you're lower-casing the "f" in "flow" but not including it in the asterisk.

Anyway, the regex you want is pretty simple: `@"[A-Z]+?"`. This matches a string of one or more uppercase alpha characters, nongreedily (don't think it makes a difference either way as the matched character class is relatively narrow).

Now, to do the find/replace, you would do something like the following:

```
Regex.Replace(inputString, @"([A-Z]+?)", "*$1*").ToLower(); 
```

This simply finds all occurrences of one or more uppercase alpha characters, and wherever it finds a match it replaces it with itself surrounded by asterisks. This does the surrounding but not the lowercasing; .NET Regex doesn't provide for that kind of string modification. However, since the end result of the operation should be a string with all lowercase chars, just do exactly that with a ToLower() and you'll get the expected result.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:55:56.220

KeithS's solution can be simplified a bit

```
Regex.Replace("stackOVERFlow","[A-Z]+","*$0*").ToLower() 
```

However, this will yield `stack*overf*low` including the `f` between the stars. If you want to exclude the last upper case letter, use the following expression

```
Regex.Replace("stackOVERFlow","[A-Z]+(?=[A-Z])","*$0*").ToLower() 
```

It will yield `stack*over*flow`

This uses the pattern `find(?=suffix)`, which finds a position before a suffix.

# php - 把配置放在安全的地方，不能链接文件

> ID：10421098
> 
> 赞同：1
> 
> 时间：2012-05-02T20:22:29.987
> 
> 标签：php, html, ajax

我正在尝试将配置文件用于数据库和评级脚本，但问题是配置文件位于此目录中：

```
 website.com/include/config.php  aka websitename/include/config.php 
```

评级脚本需要配置，访问方式如下： include_once("config.php");

我希望配置位于：“/files/website/” 网站根文件夹的上一级目录。

我一直在尝试：
“../files/website/”和其他变体，但无法弄清楚如何链接它们。

我已经设法放置一个配置文件并访问它，但是使用这个 ajax 评级脚本，它工作的唯一方法是将配置放在 /include/ 文件夹旁边：rating_process.php - 有这个链接：include("公司/config.php");

```
 rating_functions.php         - has this link : include_once("config.php");

     rating_total_functions.php   - has this link : include("inc/config.php"); 
```

希望我已经在这里解释了自己

对，现在看看我的主机：$_SERVER['DOCUMENT_ROOT']; 输出：/foldy/homepages/11/username/htdocs/webbysite

我的索引文件位于：/foldy/homepages/11/username/htdocs/webbysite/index.php 包含的评分脚本位于：/foldy/homepages/11/username/htdocs/webbysite/include/

我希望配置位于 /foldy/homepages/11/username/htdocs/secretfiles/config.php

我正在尝试如何退出：webbysite 文件夹，然后进入 secretfiles（兄弟文件夹）

我试过添加 ../ 等等，但显然缺少一些东西:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:27:44.727

> but the problem is the config file is in this directory

it is not a problem at all.
just keep it as is.

Concerning your particular problem, your problem is that you don't know where you want to put your file. `/files/website/` is not likely a right path and it is apparently not one level high from webroot.

So, first of all make your mind about the right path to the directory and it's relative position to the web root

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:29:02.027

if you are concerned about security ( because your config file contains the db details ) i would place the db config file outside the site root folder and then `require_once('../../dbConfig.php')` from the script that's creating xml or json for your ajax

more exactly ... your site folder might be here: `/var/www/html`

set a virtual host (done differently on Linux and Windows) and point your domain to a sub folder inside `/html` so that the new path to the site root is `/var/www/html/site`.

then place your config file in `/var/www/html` and call it from your scripts inside your `/site` folder using `require_once('../dbConfig.php`)`.

your db details are outside the site folder

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:25:04.293

尝试

```
$configLocation = $_SERVER['DOCUMENT_ROOT'].'../files/website/config.php';
include_once($configLocation) 
```

# r - knitr 中的警告

> ID：10421102
> 
> 赞同：1
> 
> 时间：2012-05-02T20:22:44.170
> 
> 标签：r, knitr

我正在使用`knitr 0.5`我的分析，它会抛出这个警告

```
Warning in parse_params(params) :
  (*) NOTE: I saw options " label = TrtScores-SD-Response, echo = FALSE, results = asis"
 are you using the old Sweave syntax? go http://yihui.name/knitr/options 
```

对于这个块

```
<< label = TrtScores-SD-Response, echo = FALSE, results = asis >>=
R code
@ 
```

并且`knitr 0.5`变得非常缓慢。任何想法来克服这个警告。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T21:02:01.210

您只需要在结果参数周围添加引号，如下所示：

```
<< label = TrtScores-SD-Response, echo = FALSE, results = "asis" >>=
R code
@ 
```

如[http://yihui.name/knitr/options](http://yihui.name/knitr/options)中所述（错误消息精心引导您的网页）：

> 除块标签外，所有选项值都必须是有效的 R 表达式，就像我们编写函数参数的方式一样。例如，必须像在 R 中那样引用接受字符值的选项（例如，应该写 fig.path="abc" 而不是 fig.path=abc，以及 out.width='\textwidth' 而不是 out.width= \文本宽度）

然后在同一页面上：

> 结果： ('markup'; character) 采用三个可能的值

另请参阅[“从 Sweave 到 knitr 的过渡”](http://yihui.name/knitr/demo/sweave/)页面，该页面解决了 Sweave 和 knitr 之间的这一差异以及其他差异。与 Yihui 的所有文档一样，它的组合非常出色。

# android - 特殊的android RuntimeException

> ID：10421103
> 
> 赞同：1
> 
> 时间：2012-05-02T20:22:48.023
> 
> 标签：android, runtimeexception

我刚刚在开发者控制台上收到了看起来最奇怪的堆栈跟踪。令我困惑的是“MArcos”是从哪里来的？这是应用程序：[https ://play.google.com/store/apps/details?id=genius.mohammad.accelerometer.mouse](https://play.google.com/store/apps/details?id=genius.mohammad.accelerometer.mouse)

如果您愿意，请尝试重新创建异常，并尽可能向我解释它是什么。谢谢！

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{genius.mohammad.accelerometer.mouse/genius.mohammad.accelerometermouse.MainActivity}: java.lang.NumberFormatException: unable to parse 'MArcos' as integer
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NumberFormatException: unable to parse 'MArcos' as integer
at java.lang.Integer.parse(Integer.java:383)
at java.lang.Integer.parseInt(Integer.java:372)
at java.lang.Integer.parseInt(Integer.java:332)
at genius.mohammad.accelerometermouse.MainActivity.updatePrefs(MainActivity.java:85)
at genius.mohammad.accelerometermouse.MainActivity.onCreate(MainActivity.java:51)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 
```

... 11 更多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:24:21.653

```
Caused by: java.lang.NumberFormatException: unable to parse 'MArcos' as integer 
```

在您的代码 () 中，您似乎`MainActivity.java: line number 85`正在尝试将 String 解析为 Integer。

# asp.net - 使用 LINQ to SQL 在 Telerik RadGrid 上进行 Web 控制 CRUD 操作

> ID：10421105
> 
> 赞同：0
> 
> 时间：2012-05-02T20:23:03.213
> 
> 标签：asp.net, linq-to-sql, webforms, telerik-grid, radgrid

我有一个分层 radGrid，用户单击详细信息表上的一行以在 Web 控件中编辑其数据。

如何使用 linq to sql 更新网格数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:22:05.470

或者，您可以在 Telerik 的网站上查看演示（非常简单明了）：http: [//demos.telerik.com/aspnet-ajax/grid/examples/dataediting/programaticlinqupdates/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/programaticlinqupdates/defaultcs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:46:31.813

我按照telerik提供的示例完成了这项任务，并对其进行了如下修改：

```
protected void RadGridProductionOrders_UpdateCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
    {
        GridEditableItem editedItem = e.Item as GridEditableItem;
        UserControl userControl = (UserControl)e.Item.FindControl(GridEditFormItem.EditFormUserControlID);
        ProductionOrderDetail productionOrderDetail = new ProductionOrderDetail();
        ProductionDataContext db = new ProductionDataContext();

        productionOrderDetail = (from p in db.ProductionOrderDetails
                                 where p.orderNo == editedItem.OwnerTableView.DataKeyValues[editedItem.ItemIndex]["orderNo"]
                                    && p.itemCode == editedItem.OwnerTableView.DataKeyValues[editedItem.ItemIndex]["itemCode"]
                                 select p).Single();

        productionOrderDetail.qty = int.Parse((userControl.FindControl("TextBoxQty") as TextBox).Text);

        try
        {
            db.SubmitChanges();
        }
        catch(Exception ex)
        {
            Label lblError = new Label();

            lblError.Text = "Unable to update Production Order data. Reason: " + ex.Message;
            lblError.ForeColor = System.Drawing.Color.Red;

            RadGridProductionOrders.Controls.Add(lblError);

            e.Canceled = true;
        }
} 
```

在此代码完成后，网格将更新为新值。

# java - 如何设置一个 CSS 供我的 Java 应用程序中的所有 jtooltips 使用？

> ID：10421107
> 
> 赞同：0
> 
> 时间：2012-05-02T20:23:12.337
> 
> 标签：java, html, css, swing, tooltip

有没有办法定义一个全局样式表，用于`JToolTip`整个应用程序中的所有 my s？如果没有，我如何为我只知道它是一个摆动组件（`JComponent`）的单个组件的工具提示定义样式表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:16:03.937

如果要更改工具提示的颜色，有几个带有键的外观默认属性：

```
ToolTip.background
ToolTip.backgroundInactive
ToolTip.border
ToolTip.borderInactive
ToolTip.font
ToolTip.foreground
ToolTip.foregroundInactive 
```

例如，为前景设置新颜色

```
UIManager.put("ToolTip.foreground",java.awt.Color.red); 
```

例如，在一个应用程序中，我有这些默认值

```
ToolTip.background   =>     javax.swing.plaf.ColorUIResource[r=184,g=207,b=229]
ToolTip.backgroundInactive   =>     javax.swing.plaf.ColorUIResource[r=238,g=238,b=238]
ToolTip.border   =>     javax.swing.plaf.BorderUIResource$LineBorderUIResource@da18ac
ToolTip.borderInactive   =>     javax.swing.plaf.BorderUIResource$LineBorderUIResource@8a0544
ToolTip.font     =>     javax.swing.plaf.FontUIResource[family=Dialog,name=Dialog,style=plain,size=12]
ToolTip.foreground   =>     sun.swing.PrintColorUIResource[r=51,g=51,b=51]
ToolTip.foregroundInactive   =>     javax.swing.plaf.ColorUIResource[r=122,g=138,b=153] 
```

# javascript - 如何在 JS 和 JSON 之间转义双引号

> ID：10421111
> 
> 赞同：0
> 
> 时间：2012-05-02T20:23:39.333
> 
> 标签：javascript, jquery, json

我正在尝试在 JS 中构造一个可以作为具有非常特殊格式的字符串传递给 JSON 的字符串。期望的结果是以下形式的字符串：

> ["PNG","350x150","127 KB"]

哪里`PNG`对应于特定图像的类型，哪里`350x150`是图像的尺寸，哪里`127 KB`是图像的大小。这三个值中的每一个都是字符串变量：

```
var imgType = getImageType(); // Returns "PNG"
var imgDim = getImageDim(); // Returns "350x150"
var imgSize = getImageSize(); // Returns "127 KB"

var imgDescription = '["' + imgType + '","' + imgDim + '","' + imgSize + '"]';

// Sanity check
alert(imgDescription);

iVO.images[thisImage] = {
    "fizz":"buzz",
    "imgDesc":imgDescription,
    "foo":"bar"
}

alert(JSON.stringify(iVO)); 
```

第一个警报（在`imgDescription`变量上）打印：

> ["PNG","350x150","127 KB"]

到目前为止，一切都很好。然而，当我们将它传递给`iVO`构造并对生成的 JSON 进行字符串化的那一刻，它会生成以下输出（在我漂亮地打印格式化之后）：

```
{
    "images":
    {
        "4490i45"":
        {
            "fizz":"buzz",
            "imgDesc":"[\"PNG\",\"350x150\",\"127 KB\"]",
            "foo":"bar"
        }
    }
} 
```

我所有的双引号（“）都被转义了（\”）！！！此外，for 的值`imgDesc`用双引号括起来，这不是我们想要的（请参阅下面的所需 JSON）：

当我将此 JSON 发送回服务器时，它会导致服务器阻塞。

不知道这里发生了什么，但我尝试了其他几个建议，包括用`'\x22'`没有帮助的实例替换我的双引号。

关于如何解决此问题以获得所需结果的任何想法`JSON.stringify(iVO)`？最终，这是唯一重要的事情，我们最终将以下内容发送到服务器：

```
{
    "images":
    {
        "4490i45"":
        {
            "fizz":"buzz",
            "imgDesc":["PNG","350x150","127 KB"],
            "foo":"bar"
        }
    }
} 
```

没有转义的双引号，并且 for 的值`imgDesc`不是双引号。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T20:28:31.747

Why don't you just put imgDescription as regular array

```
var imgDescription = [imgType , imgDim, imgSize]; 
```

Stringify should take care of what you are trying to do, otherwise you are passing imgDescription as a string and stringify would escape the quotes.

e.g.

```
var imgType = "PNG";
var imgDim = "350x150";
var imgSize = "127 KB";
var d = {
    "fizz":"buzz",
    "imgDesc":[imgType , imgDim, imgSize],
    "foo":"bar"
}
console.log(JSON.stringify(d)); 
```

Output:

```
{"fizz":"buzz","imgDesc":["PNG","350x150","127 KB"],"foo":"bar"} 
```

# java - 釉面列表 - 默认排序？

> ID：10421112
> 
> 赞同：3
> 
> 时间：2012-05-02T20:23:45.433
> 
> 标签：java, glazedlists

我正在使用[此处](https://docs.google.com/Doc?id=dc5md22b_0g456kwd8)和[此处](http://www.glazedlists.com/documentation/tutorial)的 Glazed List 教程，但这意味着您需要一个比较器来对行进行排序。但是，我似乎无法弄清楚如何添加对基于表头点击的排序的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:15:48.883

经过更多的尝试和错误，我发现我做错了什么。

`EventTableModel` **必须**用实例实例化，而`SortedList`不是`EventList`. 从例子：

```
private EventList<Issue> issuesEventList = new BasicEventList<Issue>();
...

        SortedList<Issue> sortedIssues = new SortedList<Issue>(issuesEventList, null);

        // create a panel with a table
        JPanel panel = new JPanel();
        // be careful not to put issuesEventList in here, it has to be the sortedIssues list
        EventTableModel<Issue> issuesTableModel = new EventTableModel<Issue>(sortedIssues, new IssueTableFormat()); 
```

# jquery - 仅将类添加到前置文本

> ID：10421118
> 
> 赞同：1
> 
> 时间：2012-05-02T20:24:14.900
> 
> 标签：jquery, html, dom, addclass

如何将类添加到前置文本，而不将其添加到整个标签。到目前为止，我有这个：

```
$('form label').prepend('*');
$(this).addClass('star'); 
```

但我知道“this”指的是标签。我想为每个星号添加一个类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T20:26:13.167

您必须有一个标签才能添加诸如类之类的属性：

```
$('form label').prepend('<span class="star">*</span>'); 
```

**或者**

```
$('<span class="star">*</span>').prependTo('form label'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:28:10.283

好吧，您不能向 中添加类，`*`因为它只是一个文本节点。你必须用一个元素节点来包装它，比如`span`. 而且，如果你要做那么多，你可以同时指定类：

```
$('form label').prepend('<span class="star">*</span>'); 
```

# python - Python 参考资料

> ID：10421120
> 
> 赞同：0
> 
> 时间：2012-05-02T20:24:16.090
> 
> 标签：python, list, reference

在 for 循环数组从 tmp1 获取值之后。我如何存储值以供以后使用？

```
def getCardRank(self, arrays, straight = False):
  print arrays

  tmp1 = arrays[:]  
  tmp2 = {i: arrays[i] for i in range(0, len(arrays))}

  print tmp1

  for array in tmp1:
    for card in array:
      i = array.index(card)
      mod = card % 13

      if (mod == 0 and False != straight):
        card = 0 if sum(array) == 27 else 13
      else:
        card = 13 if mod == 0 else mod
        array[i] = card

  print tmp1
  print tmp2 
```

这给了我：

```
[[44, 43, 42, 41, 40], [37, 36, 35, 34, 33], [17, 16, 15, 14, 26]]

[[44, 43, 42, 41, 40], [37, 36, 35, 34, 33], [17, 16, 15, 14, 26]]

{0: [44, 43, 42, 41, 40], 1: [37, 36, 35, 34, 33], 2: [17, 16, 15, 14, 26]}

[[5, 4, 3, 2, 1], [11, 10, 9, 8, 7], [4, 3, 2, 1, 13]]

{0: [5, 4, 3, 2, 1], 1: [11, 10, 9, 8, 7], 2: [4, 3, 2, 1, 13]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:26:56.787

您可以[腌制](http://docs.python.org/library/pickle.html)您的数组数据结构以将它们保存到文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:40:11.460

我对这个问题有点不清楚，但我假设你想`print(tmp1)`总是`print [44, 43, 42]...`etc 而不是`[5, 4, 3]`.

分配的问题`tmp1 = arrays[:]`是，如果您创建一个列表的副本以使用切片表示法进行迭代，[则原始列表会被更改](http://docs.python.org/py3k/tutorial/controlflow.html#for-statements)。

为了将原始数组存储在 tmp1 中，一个相当低效的解决方案是创建一个元组`tmp1`并遍历将每个元素附加到`tmp1`. 如前所述，另一个方法是腌制您的数据结构。

但是，看起来真正的解决方案是改变您考虑存储的方式`tmp1`- 考虑如果您需要在调用后保留原始数组`getCardRank`，您可能希望将其视为`self`函数中引用的对象的一部分签名。因此，您应该将数组的原始副本存储在成员变量 ( `self.foo = [array for array in arrays]`) 中。

附带说明一下，当您使用内联条件时，它会使您的代码更难阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:36:28.607

由于您的函数签名中有一个`self`，我假设这个函数是某个对象的成员函数。

在这种情况下，您可以将值保存为成员变量，以便它们在实例化对象的整个生命周期中持续存在。

例如：

```
def doSomething(self):
  self.someValue = 2 
```

`self.someValue`将在 doSomething() 退出后持续存在，并且将持续存在直到调用对象被删除。

# c# - 如何使用 ASP.NET MVC 3 在页面之间传递“昂贵的”数据？

> ID：10421121
> 
> 赞同：2
> 
> 时间：2012-05-02T20:24:18.143
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我正在做我的第一个 ASP.NET MVC 项目。（事实上​​，为了记录，这是我的第一个生产网站）。

这是一个针对 HTML 5 的移动网页。

这个页面查找一些“昂贵”的信息。首先，它使用 html 5 地理编码功能从他们的浏览器中获取客户的 latlong。

我将该信息传递给控制器​​。该控制器使用 Google Maps API 填充城市和州（进入位置模型），然后在视图中使用它。

因此，这些数据在两个方面很昂贵，首先查找它需要时间，其次，在 Google API 的情况下，它实际上并不是免费的，因为 Google 限制了每天可以进行的调用次数。

我了解 MVC 旨在“拥抱”网络，包括 http 是无状态协议这一事实。

尽管如此，我想避免在每次页面加载时为需要它的每个端点获取这些昂贵的数据。此外，我想跟踪的另一个状态是数据已经被获取。

在 MVC 3 Web 应用程序上实现这一目标的最佳方式/最佳实践是什么？由于我的位置模型有 4 个数据点（拉长城市州）并且有第五个数据点（检索到的数据），我真的很想避免使用查询字符串来执行此操作或所有这些数据点的路线？

我确信这是一个常见的需求，但老实说我不知道​​如何解决它。任何帮助将不胜感激。

赛斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:30:11.093

在我看来，您想缓存对谷歌的 API 调用。

[http://msdn.microsoft.com/en-us/library/18c1wd61(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/18c1wd61(v=vs.71).aspx)

您可以将从谷歌获得的对象存储在缓存中，并在新的控制器事件中调用它。您还可以创建另一个对象，该对象具有来自 google 的对象和一个指示您是否已获取数据的布尔值。

在我看来，缓存将是你最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:28:51.630

You can store it in session state if it is available in your case instead of passing between pages.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T20:30:51.420

由于这是“昂贵”的数据，但仍不会长时间持久化，您可以：

*   使用**会话**状态
*   将数据放入**缓存**中，然后
    *   设置**cookie**以启用从缓存中检索“昂贵”数据
    *   使用每个查询唯一的缓存键（lat long city state ？）
*   将数据（“检索到的数据”）存储在客户端（因为您似乎没有将其保存在服务器端）

我个人的偏好是具有唯一键的服务器端缓存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T20:30:04.137

将昂贵的数据存储到缓存中，并通过您发送给谷歌的参数构建缓存 ID，缓存 ID 对于每个不同的地方都应该是唯一的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T20:31:49.423

另一种选择是[html5 storage](http://sixrevisions.com/html/introduction-web-storage/)。您将需要检查您的目标浏览器是否支持它。这种方法的优点是服务器没有在会话或数据库中跟踪这些数据——事实上，服务器根本不知道客户端存储。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T20:31:34.820

尝试

```
Session[xxx]=xxx; 
```

或者

```
Application[xxx]=xxx; 
```

反而

# ruby-on-rails - 在 Rails 中生成历史报告

> ID：10421134
> 
> 赞同：1
> 
> 时间：2012-05-02T20:25:06.167
> 
> 标签：ruby-on-rails, gem, reporting

我希望为 Rails 站点生成历史报告，这些报告的粒度会根据时间而有所不同。例如，如果我对 user.last_signed_in 的分布感兴趣，我应该能够查看今天、1 周前、1 个月前、1 年前等的图表。

有没有一种简单的方法来解决这个问题？我可以使用像vestal_versions 这样的东西，但是它存储了太多的信息并且很难从中提取。

# java - X 的设置速率不会影响我的整个程序

> ID：10421135
> 
> 赞同：-1
> 
> 时间：2012-05-02T20:25:07.710
> 
> 标签：java, swing, class

晚上好，我还在做我的项目（努力提高自己。）

我有一个程序可以将货币转换为另一种货币类型（例如欧元到美元），我有我的菜单，我自己设置汇率。它很好地设置了汇率，但是当我尝试兑换货币时，setRate 不会影响它，结果是 NaN 或 Infinity。这是我的整个代码。

```
 private JMenuBar menuBar = new JMenuBar(); // Window menu bar
    public Converter(String title) {

        setTitle(title);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setJMenuBar(menuBar); // Add the menu bar to the window
        JMenu fileMenu = new JMenu("File"); // Create File menu
        JMenu elementMenu = new JMenu("Rate Setters"); // Create Elements menu
        JMenuItem subTest = new JMenuItem("Test");
        JMenuItem rateMyMoney = new JMenuItem("Set the Rates.");
        subTest.addActionListener(new ActionListener(){     
            public void actionPerformed(ActionEvent actionEvent){
                Converter convert = new Converter();

                GridLayout converterGridLayout = new GridLayout(2,2,12,6);
                convert.setLayout(converterGridLayout);
                convert.setVisible(true);
            }
        });

        rateMyMoney.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent actionEvent){

                SetMyRates setRates = new SetMyRates();

                GridLayout setRateGridLayout = new GridLayout(2,2,12,6);
                setRates.setLayout(setRateGridLayout);
                setRates.setVisible(true);
            }
        });

        menuBar.add(fileMenu); // Add the file menu
        menuBar.add(elementMenu); // Add the element menu
        fileMenu.add(subTest);
        elementMenu.add(rateMyMoney);
    }
    public Converter() {

        JPanel dataPanel = new JPanel(new GridLayout(2, 2, 12, 6));
        dataPanel.add(tlLabel);

        dataPanel.add(dollarsLabel);
        dataPanel.add(tlField);
        dataPanel.add(dollarsField);
        JPanel buttonPanel = new JPanel();
        buttonPanel.add(tlButton);
        buttonPanel.add(dollarsButton);
        Container container = this.getContentPane();
        container.add(dataPanel, BorderLayout.CENTER);
        container.add(buttonPanel, BorderLayout.SOUTH);
        tlButton.addActionListener(new TLConverter());
        dollarsButton.addActionListener(new DollarsConverter());
        buttonPanel.add(setRates);
        pack();

    }
public class SetMyRates extends JFrame{ //extends Converter{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public SetMyRates(){

        JPanel dataPanel = new JPanel(new GridLayout(2, 2, 12, 6));
        dataPanel.add(setTLLabel);

        dataPanel.add(setDollarsLabel);
        dataPanel.add(setTLField);
        dataPanel.add(setDollarsField);
        JPanel buttonPanel = new JPanel();
        buttonPanel.add(setTLButton);
        buttonPanel.add(setDollarsButton);
        Container container = this.getContentPane();
        container.add(dataPanel, BorderLayout.CENTER);
        container.add(buttonPanel, BorderLayout.SOUTH);
        setTLButton.addActionListener(new SetTL());
        setDollarsButton.addActionListener(new SetDollars());
        pack();

    }
};
    private class SetTL implements ActionListener{

        public void actionPerformed(ActionEvent  e)
        {
            try
            {
                String input = setTLField.getText();
                System.out.println("text = " + input);
                double tl = Double.parseDouble(input);
                convertMe.setRate(tl);
            }
            catch(Exception ex)
            {
                JOptionPane.showMessageDialog(null, "Please enter correct Rate.");
            }
        }
    }
    private class SetDollars implements ActionListener{

        public void actionPerformed(ActionEvent  e)
        {
            try
            {
                String input = setDollarsField.getText();
                System.out.println("text = " + input);
                double setDolarRate = Double.parseDouble(input);
                convertMe.setRate(setDolarRate);
            }
            catch(Exception ex)
            {
                JOptionPane.showMessageDialog(null, "Please enter correct Rate.");
            }
        }
    }

    private class TLConverter implements ActionListener
    {
        public void actionPerformed(ActionEvent  e)
        {
            try
            {
                String input = tlField.getText();
                double tl = Double.parseDouble(input);
                convertMe.setTL(tl);

                double dollars = convertMe.getDollars();
                dollarsField.setText(String.format("%.2f", dollars));
            }
            catch(Exception ex)
            {
                JOptionPane.showMessageDialog(null, "Please enter the amount that will be converted.");
            }
        }
    }

    private class DollarsConverter implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            String input = dollarsField.getText();
            double dollars = Double.parseDouble(input);
            convertMe.setDollars(dollars);
            double tl = convertMe.getTL();
            tlField.setText(String.format("%.2f", tl));
        }
    } 
```

钱.java

```
public class MoneyDetails {

    public double moneyAmount;
    public double myRate;
    public double guaranteeMyRate;

    public double setRate (double myRate){

        System.out.println("myrate = " +myRate);

        this.myRate = myRate;
        System.out.println("this.myrate = " + this.myRate);

        this.guaranteeMyRate = this.myRate;

        System.out.println("garanti = " + guaranteeMyRate);
        return this.myRate;
    }

    public void setTL(double turkishLira) {
System.out.println("setTL = " + turkishLira);
        moneyAmount = turkishLira;
    }

    public void setDollars(double dollars) {
        System.out.println("setDolar = " + dollars);

        moneyAmount = dollars;
    }

    public double getDollars() {

        System.out.println("garanti getdolar = " + guaranteeMyRate);
        return moneyAmount / guaranteeMyRate;
    }

    public double getTL() {

        System.out.println("garanti getTL = " + guaranteeMyRate);

        return moneyAmount * guaranteeMyRate;
    }
} 
```

为什么我尝试转换时 setRate 不影响代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:39:38.387

它不起作用，因为您在单击“Rate setters menu”时在 Converter 对象 convertMe 字段上设置了转换率。

然后，当您单击测试菜单时，您将创建另一个 Converter 实例，您从未为其设置转换率。

解决问题的最快和最肮脏的方法是在对象创建后设置 convertMe 字段：

```
 subTest.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent actionEvent){
                Converter convert = new Converter();
                convert.convertMe=Converter.this.convertMe;
                GridLayout converterGridLayout = new GridLayout(2,2,12,6);
                convert.setLayout(converterGridLayout);
                convert.setVisible(true);
            }
        }); 
```

但我强烈建议重新设计你的 UI 代码。您的 Converter 类基本上根据您调用的构造函数构建两个不同的窗口。为每个窗口创建一个单独的类，一个用于主窗口，另一个用于测试内容......

# asp.net - 在gridview中显示货币

> ID：10421142
> 
> 赞同：1
> 
> 时间：2012-05-02T20:25:35.867
> 
> 标签：asp.net

我想知道是否会格式化网格视图控件，以在值之前显示英镑符号。在 access 数据库中，有一个货币符号，但是，当将数据库附加到网格视图时，数据显示但没有货币符号。

抱歉，我的问题的描述写得不好。感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:28:29.197

Did you try using DataFormatString="{0:C}" on your column?

```
<asp:BoundField DataField="SomeValue" DataFormatString="{0:C}" /> 
```

It will display the currency symbol according to the locale settings.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:51:40.713

As lcarus said, set the DataFormatString to "{0:C}" and it should work. However, and someone correct me if I am wrong, but it'll depend on the culture settings on the server. For example, if the culture setting on the server is "en-US", then you'll see a dollar sign. If I understand your post correctly, you're looking for the Pounds (GBP) symbol.

Now if your server is set for English UK, you're fine. But if its set to English US and you don't have the necessary access to change it, you can use a TemplateField.

```
<asp:TemplateField HeaderText="MyColumn">
     <ItemTemplate>
          $<%# Eval("MyColumn")%>
     </ItemTemplate>
</asp:TemplateField> 
```

I've used the dollar sign in that example, but you get the idea.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T12:58:14.787

Unicode 技术委员会接受了提议的 unicode 代码位置 ₹（来自维基百科），因此您可以更改您的 html 以添加这些字符序列。

有人在他的 MVC WebGrid 项目中展示了这个符号。看这里：

[如何在 mvc-webgrid 中显示印度货币符号](http://www.authorcode.com/how-to-show-indian-currency-symbol-in-mvc-webgrid/)

```
 grid1.Column("EmpName",format: (item) => new HtmlString("&#x20B9; " + Convert.ToString( item.Salary)), header: "Notes"))) 
```

我只想说我们还有其他方法可以做到这一点..所以试着分享一下..

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-10T11:44:13.177

你可以通过三种方式实现这一点，我知道

1.  以编程方式，只需覆盖文化

    { System,Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en:IN"); }

2.  可以逐页覆盖，在要覆盖的页面顶部，您可以查看页面的详细信息，例如语言等。那里只是添加，

    `<%@ Page **Culture="en-IN"** Language = "C#".....>`

3.  在 web.config 文件中，在配置标签下

    ```
     <System.Web>
           <Globalization Culture="en:IN"/>
      </System.Web> 
    ```

而已 ！！我们完了...：）

也可以通过使用该 gridview 控件的 RowDataBound 事件对 gridview 控件中的每一行执行此操作。

谢谢 ！！

# php - 用php向上和向下舍入大的非十进制数

> ID：10421143
> 
> 赞同：4
> 
> 时间：2012-05-02T20:25:37.297
> 
> 标签：php

## 如何在 php.ini 中舍入较大的数字。

注意：我已经尝试过圆形功能，但似乎无法让它按照我的需要工作

### 例如：

假设我在数据库中有 4 个列表，它们有 4 个不同的价格。

```
 1st Price = 5,783

    2nd Price = 19,647

    3rd Price = 12,867

    4th Price = 23,647 
```

现在我们确定数据库中的**最低价格**为**5,783**

最高**价**为**23,647**。

现在我想做的是把最低价格四舍五入说最接近的**500**或**1000**甚至**5000**

**接近 1000 的示例**

最低价**5,783**四舍五入 = **5000**

最高价**23,647**向上取整 = **24000**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T20:37:56.810

您可以使用此功能：

```
function nearest($num, $divisor) {
  $diff = $num % $divisor;
  if ($diff == 0)
    return $num;
  elseif ($diff >= ceil($divisor / 2))
    return $num - $diff + $divisor;
  else
    return $num - $diff;
} 
```

像这样称呼它：

```
nearest(23647, 5000); 
```

类似的功能，但是当你想自己决定在哪个方向进行舍入时：

```
function roundUp($num, $divisor) {
  $diff = $num % $divisor;
  if ($diff == 0)
    return $num;
  else
    return $num - $diff + $divisor;
}

function roundDown($num, $divisor) {
  $diff = $num % $divisor;
  return $num - $diff;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T20:43:24.547

查看[php 手册](http://php.net/function.round.php)中的回合。第一个例子说：

```
<?php
    echo round(3.4);         // 3
    echo round(3.5);         // 4
    echo round(3.6);         // 4
    echo round(3.6, 0);      // 4
    echo round(1.95583, 2);  // 1.96
    echo round(1241757, -3); // 1242000
    echo round(5.045, 2);    // 5.05
    echo round(5.055, 2);    // 5.06
?> 
```

我想你正在寻找

```
round(23647, -3) 
```

我没有检查过这个，但它可以工作（见手册）。

如果你想杀死'，'你可以使用[number_format](http://php.net/function.number-format.php)

# python - 如何使 Python 的消极后视不那么贪婪？

> ID：10421150
> 
> 赞同：9
> 
> 时间：2012-05-02T20:26:06.437
> 
> 标签：python, regex

我已经阅读了所有相关的帖子并搜索了互联网，但这真的让我感到震惊。

我有一些包含日期的文本。
我想捕获日期，但如果它前面有某个短语，则不是。

一个直截了当的解决方案是在我的 RegEx 中添加一个否定的lookbehind。

以下是一些示例（使用 findall）。
如果日期前面没有短语“as of”，我只想捕获日期。

> 19-2-11
> 某事 15-4-11
> 诸如此类 29-5-11

这是我的正则表达式：

```
(?<!as of )(\d{1,2}-\d{1,2}-\d{2}) 
```

预期成绩：

> ['19-2-11']
> ['15-4-11']
> []

实际结果：

> ['19-2-11']
> ['15-4-11']
> ['9-5-11']

请注意，这是 9 而不是 29。如果我更改`\d{1,2}`为类似于`\d{2}`第一个模式的实体：

```
bad regex for testing: (?<!as of )(\d{2}-\d{1,2}-\d{2}) 
```

然后我得到了我的预期结果。当然这不好，因为我想匹配 2 位数的天数和个位数的天数。

显然，我的消极后视非常贪婪 - 比我的日期捕获更重要，所以它从中窃取了一个数字并失败了。我已经尝试了所有纠正我能想到的贪婪的方法，但我只是不知道如何解决这个问题。

我希望我的日期捕获与最大的贪婪相匹配，然后应用我的负面回顾。这可能吗？我的问题似乎很好地利用了负面的后视，而不是过于复杂。如果必须的话，我确信我可以用另一种方式完成它，但我想学习如何做到这一点。

**如何使 Python 的消极后视不那么贪婪？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T20:27:37.030

这与贪婪无关。贪婪不会改变正则表达式是否匹配——它只会改变执行搜索的顺序。这里的问题是您的正则表达式需要更具体以避免不必要的匹配。

要修复它，您可以在匹配之前需要一个单词边界：

```
(?<!as of )\b(\d{1,2}-\d{1,2}-\d{2})
#          ^^ add this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:49:12.770

原因不是因为向后看是贪婪的。发生这种情况是因为正则表达式引擎尝试在每个位置匹配模式。

它首先通过短语`such and such as of 29-5-11`成功匹配`(?<!as of )`，但未能匹配`\d{1,2}`。

但随后引擎会在该位置找到自身`such and such as of !29-5-11`（标有`!`）。但在这里它无法匹配`(?<!as of )`。

它前进到下一个位置：`such and such as of 2!9-5-11`。在哪里成功匹配`(?<!as of )`然后`\d{1,2}`.

如何避免？

**一般的解决方案是尽可能清晰**地制定模式。

在这种情况下，我会在数字前面加上必要的空格或字符串的开头。

```
(?<!as of)(?:^|\s+)(\d{1,2}-\d{1,2}-\d{2}) 
```

Mark Byers 的解决方案也很不错。

我认为了解正则表达式引擎以这种方式运行并给出不需要的结果的原因非常重要。

顺便说一句，如果有 2 个或更多空格，我上面给出的解决方案将不起作用。它不起作用，因为这里的拳头位置与`such and such as of ! 29-5-11`上述模式匹配。

可以做些什么来避免它？

不幸的是，Python 正则表达式引擎中的lookbehind 不支持量词`+`或`*`.

我认为最简单的解决方案是确保之前没有空格`(?:^|\s+)`（这意味着所有空格都被`(?:^|\s+)`任何非空格文本直接占用（如果文本是`as of`，则终止前进并回溯到下一个起始位置开始搜索所有在搜索文本的下一个位置重新开始）。

```
re.search(r'(?<!as of)(?<!\s)(?:^|\s+)(\d{1,2}-\d{1,2}-\d{2})','such and such as of  29-5-11').group(1) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T21:15:37.927

一个简单的解决方案是在使用正则表达式隔离日期之前丢弃所有匹配“as of”的行。

# version-control - 如何在 GoDaddy 共享主机帐户上安装 Kiln/Mercurial？

> ID：10421152
> 
> 赞同：0
> 
> 时间：2012-05-02T20:26:12.453
> 
> 标签：version-control, mercurial, kiln

我目前正在使用[Kiln](http://www.fogcreek.com/kiln/)（一种 Mercurial 衍生产品）进行版本控制，并试图找出在 GoDaddy 共享主机帐户上为我的应用程序实现此功能的最佳方法？

目前，我正在通过 FTP 手动推送更改。有一个更好的方法吗？例如，我可以创建一个钩子，在我推送到存储库时自动将更改的文件上传到 FTP 吗？是否可以在我们的实际服务器 GoDaddy 服务器上安装 Kiln 以从中推送和提取代码？

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:34:36.023

Kiln 基本上只是带有一些扩展的 Mercurial，因此如果它允许您运行 Python（看起来像 GoDaddy 那样），您可以在自己的托管网站上运行任何存储库服务器。一个普通的[hgweb Mercurial 服务器](http://mercurial.selenic.com/wiki/PublishingRepositories#hgweb)就可以了。有关设置说明，请参阅网站，我认为这超出了此答案的范围:)。

设置此服务器后，您可以在 Mercurial 服务器中设置一个挂钩，以便在`httpdocs`推送存储库时将其导出到您的目录：

```
[hooks]
changegroup.archive = hg archive -r tip path/to/httpdocs 
```

或者，您可以实际配置 hgweb 以将存储库放在您的 httpdocs 目录中，并配置挂钩以在每次推送时更新。优点是它会更快一点，并且还会清理已删除的文件：

```
[hooks]
changegroup.update = hg update 
```

一个**警告**：如果您采用这种方法，您需要确保将您的 Web 服务器设置为忽略该`.hg`文件夹，否则任何人都可以访问您的存储库。示例 Apache 配置：

```
<Directory /path/to/httpdocs/.hg/>
    Deny from all
</Directory> 
```

# php - Undefined Index in php with GET and POST

> ID：10421154
> 
> 赞同：0
> 
> 时间：2012-05-02T20:26:17.210
> 
> 标签：php, mysql, mysqli, warnings, undefined

I have a php file say p1.php that is getting data from another php file say p2.php which is accessed in p1.php via $_GET. Now the data in $_GET is being saved in a variable $totPrice. p1.php also has a form that is referencing to itself and some processing is done with a MySql database. I am getting an error of:

```
"Notice: Undefined index: totP in C:\xampp\htdocs\fi\p1.php on line 'where ever $totPrice appears'". 
```

Here's the code for p1.php:-

```
<?php
global $totPrice;
$totPrice = $_GET['totP'];
if(!isset($_COOKIE['username']))
{
    if(isset($_POST['Submit']))
{
$dbc      = mysqli_connect("localhost","root","","authserver");
$username = $_POST['name'];
$password = $_POST['password'];
$ccno     = $_POST['ccno'];

    if(!empty($username) && !empty($password) && !empty($ccno))
{
     $query = "select * from authserver.fimembers where fName = '$username' AND     password_finmem=SHA('$password') AND CreditCard = $ccno";
$result = mysqli_query($dbc,$query);

if(mysqli_num_rows($result) == 1 )
{
$dbc1 = mysqli_connect("localhost","root","","fininsti");
$query1  = "select * from fininsti.fimembers where fName = '$username' AND    password_finmem=SHA('$password') AND CreditCard = $ccno"; 
    $result1 = mysqli_query($dbc1,$query1);
$row  = mysqli_fetch_array($result1,MYSQL_BOTH);
setcookie('username',$username,time()+60*60);
setcookie('ccno',$row[0],time()+60*60);
echo $totPrice.'<br />';
if($totPrice > $row[3])
if($_GET['totP'] > $row[3])
{
   $status = array('stat' => 0 );   // 0 = Not sufficient funds
}
else
{
$status = array('stat' => 1 );   // 1 = Good To Go!
$newAmt = $row[3]-$totPrice;
$query = "update fininsti.fimembers set Credit = $newAmt where CreditCard = $ccno";
$result = mysqli_query($dbc1,$query);
}           
$retMerUrl = "http://localhost/eTrans/site/confirm.php?".http_build_query($status);
setcookie('username',$username,time()-60*60);
setcookie('ccno',$row[0],time()-60*60);
mysqli_close($dbc1);
mysqli_close($dbc);
header('Location:'.$retMerUrl);             
}
else
   echo "Credentials don't match!";
}
else
{
    echo "Sorry! Fields empty!";
}
setcookie('userId',$username,time()-60*60);
setcookie('ccno',$row[0],time()-60*60);
mysqli_close($dbc);
}
}
?> 
```

Please do get back to me if you have any problem with the question.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:35:02.027

您需要修复前两行：

```
global $totPrice;
$totPrice = $_GET['totP']; 
```

1.  删除第一行。您不需要`global`外部功能。
2.  将第二行替换为：

    ```
    $totPrice = isset($_GET['totP']) ? $_GET['totP'] : 0; 
    ```

3.  （与这两行无关）**修复代码中的SQL注入问题！！！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:36:29.807

根据您收到的错误消息，很明显`totP`没有包含在脚本引用的 URL 中。所以你最好的选择是`isset`在引用`$_GET`参数之前包括一些检查，例如：

```
$totPrice = (isset($_GET['totP'])) ? $_GET['totP'] : null; 
```

此外，不确定您为什么要`global`拨打电话，因为您似乎不在一个函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:42:52.610

要删除通知，`isset($_GET['totP']`可以进行检查。如果它在 URL 中但未显示在您的页面中，请确保没有发生重写。

您总是`var_dump($_GET)`可以查看特定代码的查询参数中的所有信息。

查看它收到的内容可能会有所帮助，以便您了解问题所在。

# python - 从其可调用属性之一中引用所有者类

> ID：10421160
> 
> 赞同：0
> 
> 时间：2012-05-02T20:26:44.620
> 
> 标签：python, descriptor, callable

我想将一个可调用类分配为另一个类的函数，然后从拥有的函数中引用所有者类：

```
class DoIt(object):

    def __call__(self):
        print "%s did it" % self.name

class Doer(object):

    def __init__(self, name):
        self.name = name

    doSomething = DoIt()

doer = Doer("Bob")
doer.doSomething() 
```

在上面的代码中，我希望`doSomething()`函数打印“Bob did it”，但是使用这段代码我会得到一个

> AttributeError：“DoIt”对象没有属性“名称”

因为 self 引用 DoIt 实例，而不是 Doer 实例。是否可以引用 Doer 实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:47:37.277

```
class DoIt(object):

    def __get__(self, instance, owner):
        def done():
            print "%s did it" % instance.name
        return done

class Doer(object):

    def __init__(self, name):
        self.name = name

    doSomething = DoIt()

doer = Doer("Bob")
doer.doSomething() 
```

* * *

**解释：（** *这是提问者尽其所能解释这个答案）*

Python 为您提供描述符类，它们是充当属性的类（与作为实例变量或属性的属性相反）。描述符类的`__get__`方法决定了当该类作为另一个类的属性被分配和访问时返回的内容。并`__get__`允许您访问拥有的实例和拥有的类（参见方法签名）。

通过`__get__`返回一个函数，您实际上创建了一个可以访问其所有者的可调用对象。

有关描述符的更多信息，请参阅[Attributes, Properties and Descriptors - Building Skills in Python](http://www.itmaybeahack.com/book/python-2.6/html/p03/p03c05_properties.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:32:03.507

这是实现此目的的一种方法：

```
class DoIt(object):
    def __init__(self, obj):
        self.obj = obj

    def __call__(self):
        print "%s did it" % self.obj.name

class Doer(object):
    def __init__(self, name):
        self.name = name
        self.doSomething = DoIt(self)

doer = Doer("Bob")
doer.doSomething()    # prints 'Bob did it' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:20:41.693

这纯粹是 Ignacio 回答的另一个例子——当“可调用”需要参数时，我想展示相同的概念。

```
class DoIt(object):

    def __get__(self, instance, owner):

        def done(what):
            print "%s did something %s" % (instance.name, what)
        return done

class Doer(object):

    def __init__(self, name):
        self.name = name
    doSomething = DoIt()

doer = Doer("Bob")
doer.doSomething("cool") 
```

印刷：

> 鲍勃做了一件很酷的事

# salesforce - Can a salesforce app include optional components?

> ID：10421162
> 
> 赞同：0
> 
> 时间：2012-05-02T20:26:44.553
> 
> 标签：salesforce

I am working on a Salesforce App. It includes a feature (a public facing web page) that requires an Enterprise Edition account.

Excluding this feature, the app should run on all other Salesforce Editions.

I'm worried that by packaging this feature, the App will become uninstallable to "Pro" and "Group" users. Does anyone have experience with this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:37:05.857

当安装在任何 Org 版本上时，应用程序显然可以不受限制地使用任何 Salesforce 功能，以避免不兼容问题。也就是说，我不希望公共页面在较低版本上可用，因为它需要公开更多配置，但如果它对您的应用程序不是必需的，那么我想您会没事的。

# ruby - sinatra async 1.0 返回“未授权”，而 0.5.0 没有

> ID：10421163
> 
> 赞同：0
> 
> 时间：2012-05-02T20:26:46.040
> 
> 标签：ruby, vb.net, asynchronous, sinatra

我从 async_sinatra 0.5.0 升级到 1.0 因为后者解决了这个[问题](https://github.com/raggi/async_sinatra)

到现在为止还挺好。但是当我回到包含身份验证的原始应用程序（而不是我的测试应用程序）时，它停止了工作。我正在使用 vb.net 进行网络请求，这在 0.5.0 下运行良好，但现在失败了

```
"The remote server returned an error: (401) Unauthorized." 
```

这是我的红宝石代码：

```
#gem  'async_sinatra', '0.5.0'
require 'sinatra/async'

class AsyncQueryServer < Sinatra::Base
  register Sinatra::Async

  set :server, 'thin'
  set :port, 19876
  enable :show_exceptions

  helpers do
    def protected!
      unless authorized?
        response['WWW-Authenticate'] = %(Basic realm="Restricted Area")
        throw(:halt, [401, "Not authorized\n"])
      end
    end

    def authorized?
      @auth ||=  Rack::Auth::Basic::Request.new(request.env)
      begin
        puts "@auth.provided? #{@auth.provided?}"
        puts "@auth.basic? #{@auth.basic?}"
        puts "@auth.credentials #{@auth.credentials}"
      rescue Exception => e
        puts e.message
      end
      @auth.provided? && @auth.basic? && @auth.credentials && @auth.credentials == ['myusername', 'mypassword']
    end
  end

  apost '/execfqy' do
    protected!
    body request.body.string
  end

  not_found do
    puts "in not found, request.fullpath #{request.fullpath}"
    puts "in not found, request.request_method #{request.request_method}"
    puts "in not found, request.params #{request.params}"
    puts "in not found, request.class #{request.class}"

    redirect '/'
  end

end

AsyncQueryServer.run! 
```

我确信这是升级到 async_sinatra 1.0，因为如果我取消注释

```
#gem  'async_sinatra', '0.5.0' 
```

它按预期工作。

有趣的是，puts 语句的输出是授权的？两个版本都相同，并显示：

```
@auth.provided? false 
undefined method `split' for nil:NilClass
@auth.provided? true 
@auth.basic? true 
@auth.credentials ["myusername", "mypassword"] 
```

这里是来自 vb.net 的片段，基于这个[页面](http://msdn.microsoft.com/en-us/library/system.net.webrequest.getrequeststream.aspx)，它产生了 webrequest：

```
Private Function GetOutput(jsonDataBytes As Byte()) As String
        Dim req As WebRequest
        Dim res As String
        '        Dim cred As New Net.NetworkCredential("myusername", "mypassword")
        Dim cred As New Net.NetworkCredential("myusername", "mypassword")
        Dim req_str As String

        req_str = _urlString & ":" & _portString & "/execfqy"

        req = WebRequest.Create(req_str)

        req.ContentType = "application/json"
        req.Method = "POST"
        req.ContentLength = jsonDataBytes.Length
        req.Credentials = cred

        Dim stream = req.GetRequestStream()
        stream.Write(jsonDataBytes, 0, jsonDataBytes.Length)
        stream.Close()

        Try
            Dim response = req.GetResponse().GetResponseStream()
            Dim reader As New StreamReader(response)
            res = reader.ReadToEnd()
            reader.Close()
            response.Close()
        Catch e As WebException
            Throw New NoResultsError("Request return nil results with error: " & e.Message)
            res = Nothing
        End Try

        Return res
End Function 
```

任何帮助/建议/重定向将不胜感激。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:14:51.610

以下是我修复它的方法：我放弃了 vb.net 原生方法，并使用[了 chilkat 的](http://www.example-code.com/vbdotnet/http_post_form.asp)http 组件。效果很好。这是代码：

```
Private Function GetOutputChilkatPostJson(jsonData As String) As String
    'Dim req As New Chilkat.HttpRequest()
    Dim http As New Chilkat.Http()
    Dim res As String
    Dim req_str As String
    Dim success As Boolean

    req_str = _urlString & ":" & _portString & "/execfqy"

    '  Any string unlocks the component for the 1st 30 days.
    success = http.UnlockComponent("Anything for 30-day trial")
    If (success <> True) Then
        MsgBox(http.LastErrorText)
        Exit Function
    End If

    '  This example duplicates the HTTP POST shown at
    '  http://json.org/JSONRequest.html

    '  Specifically, the request to be sent looks like this:
    '  
    'POST /request HTTP/1.1
    'Accept: application/jsonrequest
    '        Content(-Encoding) : identity()
    'Content-Length: 72
    'Content-Type: application/jsonrequest
    'Host:   json.penzance.org()

    '{"user":"doctoravatar@penzance.com","forecast":7,"t":"vlIj","zip":94089}

    '  First, remove default header fields that would be automatically
    '  sent.  (These headers are harmless, and shouldn't need to
    '  be suppressed, but just in case...)
    http.AcceptCharset = ""
    http.UserAgent = ""
    http.AcceptLanguage = ""
    http.Login = "myusername"
    http.Password = "mypassword"
    '  Suppress the Accept-Encoding header by disallowing
    '  a gzip response:
    http.AllowGzip = False

    '  If a Cookie needs to be added, it may be added by calling
    '  AddQuickHeader:
    'http.AddQuickHeader("Cookie", "JSESSIONID=1234")

    '  To use SSL/TLS, simply use "https://" in the URL.

    '  IMPORTANT: Make sure to change the URL, JSON text,
    '  and other data items to your own values.  The URL used
    '  in this example will not actually work.

    Dim resp As Chilkat.HttpResponse
    Try
        resp = http.PostJson(req_str, jsonData)
        res = resp.BodyStr
    Catch e As WebException
        Throw New NoResultsError("Request return nil results with error: " & e.Message)
        res = Nothing
    End Try
    Return res
End Function 
```

# python - 如何将约会附加到日历小部件 pyqt 和 python

> ID：10421166
> 
> 赞同：0
> 
> 时间：2012-05-02T20:27:04.807
> 
> 标签：python, user-interface, calendar, widget, pyqt

```
import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):

    def __init__(self):
         super(Example, self).__init__()

         self.initUI()

    def initUI(self):      

        cal = QtGui.QCalendarWidget(self)
        cal.setGridVisible(True)
        cal.move(20, 20)
        cal.clicked[QtCore.QDate].connect(self.showDate)

        self.lbl = QtGui.QLabel(self)
        date = cal.selectedDate()
        self.lbl.setText(date.toString())
        self.lbl.move(130, 260)

        self.setGeometry(300, 300, 350, 300)
        self.setWindowTitle('Calendar')
        self.show()

   def showDate(self, date):     
        self.lbl.setText(date.toString())

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

此代码生成一个显示日期的日历小部件，我需要能够通过用户输入将所谓的约会附加到相关日期，然后向用户显示该日期附加了一个约会，即日期变为红色

将所有约会放在一个列表（或文本文件）中对我来说也很方便，这样用户可以在他们选择时一次查看它们

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:56:34.077

the`QCalendarWidget`旨在用作日期选择器，因此它并不是真正为您尝试做的事情而设计的。如果您只想以不同的方式呈现某些单元格，那么您不能创建派生自的 on 类`QCalendarWidget`并覆盖它的[`paintCell()`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qcalendarwidget.html#paintCell)方法。

# html - 具有样式属性的安全风险 (xss)

> ID：10421168
> 
> 赞同：1
> 
> 时间：2012-05-02T20:27:15.680
> 
> 标签：html, security, xss

在我们的应用程序中，我们允许显示来自外部源的 html，因此在显示它之前，我们会对其进行清理。来源有点可信，但我们想添加另一层。

我们删除了样式标签，但希望保留样式属性。我知道脚本可以放置在该属性中，并且想知道这些可以在多大程度上用于 XSS。换句话说，允许样式标签的具体风险是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:35:54.367

许多相同的风险与 HTML 电子邮件共享。如果您在基于 Web 的阅读器（例如 Gmail）中显示 HTML 电子邮件，您需要确保它无法逃脱其容器并尝试弄乱邮件界面本身。因此，在将电子邮件提供给用户之前，许多样式都被删除了。Campaign Monitor 对在不同的邮件客户端[中允许和禁用哪些 CSS 有很好的指导。](http://www.campaignmonitor.com/css/)这可能是一个很好的起点。

# css - 如何创建类似于 allwomenstalk.com 的布局？

> ID：10421170
> 
> 赞同：0
> 
> 时间：2012-05-02T20:27:29.707
> 
> 标签：css

[allwomenstalk](http://allwomenstalk.com/)有一个非常有趣的布局。帖子使用绝对定位。

我的问题是：定位是如何计算的。元素具有强制某些块更大的文本。但是，布局从一开始就准备好了，该站点确切地知道在哪里放置下一列。

另外，我想知道是否有更好的方法来实现这一点，也许是使用 display table-cell 或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:29:55.390

看起来他们正在使用[http://masonry.desandro.com/](http://masonry.desandro.com/)

# joomla - password recovery error in joomla 1.7

> ID：10421172
> 
> 赞同：0
> 
> 时间：2012-05-02T20:27:38.320
> 
> 标签：joomla, joomla1.7, password-recovery

Reset password failed: A Super Administrator can't request a password reminder. Please contact another Super Administrator or use an alternative method.

the above error message appeared when i tried to reset a normal user password in the frontend page. I confirmed that the user isn't a super admin or admin for my joomla 1.7 site, the user is just a normal register user.

thx in advanced!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:22:34.140

检查用户是否与超级管理员具有相同的电子邮件地址。这是我能看到的唯一解释。

# c# - 无法在 Internet Explorer 上加载我的 dotnetnuke 网站，尽管它可以与其他浏览器一起正常工作

> ID：10421176
> 
> 赞同：0
> 
> 时间：2012-05-02T20:27:58.380
> 
> 标签：c#, asp.net, html, dotnetnuke

我刚刚将使用 twitter bootstrap、html5、css、jquery 构建的设计与 dotnetnuke 集成以创建皮肤。

以下 URL 中的 html 版本：[www.siddharthkpandey.co.uk/design/homepage.html](http://www.siddharthkpandey.co.uk/design/homepage.html) , [www.siddharthkpandey.co.uk/design/general2.html](http://www.siddharthkpandey.co.uk/design/general2.html)

Dotnetnuke 版本位于以下 URL：[www.siddharthkpandey.co.uk/museum/newdesign.aspx](http://www.siddharthkpandey.co.uk/museum/newdesign.aspx)和[www.siddharthkpandey.co.uk/museum/newdesign/generalpage.aspx](http://www.siddharthkpandey.co.uk/museum/newdesign/generalpage.aspx)

这两个版本都适用于 Chrome、Safari 和 Firefox 最新版本。HTML 版本也适用于 IE，但我无法弄清楚 IE 上的 Dotnetnuke 版本有什么问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:34:30.033

您的问题是您没有正确的文档类型。从默认的暗夜皮肤中复制 .doctype.xml 文件之一，将其重命名为与您的皮肤示例 skin.doctype.xml 的名称相匹配，然后刷新您的页面，它将看起来正确

# javascript - plotbands 以两个窗格之一为目标

> ID：10421177
> 
> 赞同：1
> 
> 时间：2012-05-02T20:28:00.597
> 
> 标签：javascript, jquery, highcharts, highstock

嗨，我正在使用两个窗格图表[http://www.highcharts.com/stock/demo/candlestick-and-volume](http://www.highcharts.com/stock/demo/candlestick-and-volume) 我然后在该图表上放了一个 plodBands，发生了什么是乐队影响两个 yAxis 就像在这里[http:/ /jsfiddle.net/6sqEd/](http://jsfiddle.net/6sqEd/)我注意到这张图表只有一个 xAxis 。

我怎样才能让这个 PlotBands 只解析第一个 yAxis 而不是 BOTH ？？？

这是代码：

```
 $(function() {
   $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-  ohlcv.json&callback=?', function(data) {

    // split the data set into ohlc and volume
    var ohlc = [],
        volume = [],
        dataLength = data.length;

    for (i = 0; i < dataLength; i++) {
        ohlc.push([
            data[i][0], // the date
            data[i][1], // open
            data[i][2], // high
            data[i][3], // low
            data[i][4] // close
        ]);

        volume.push([
            data[i][0], // the date
            data[i][5] // the volume
        ])
    }

    // create the chart
    chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container',
            alignTicks: false
        },

        rangeSelector: {
            selected: 5
        },

        title: {
            text: 'AAPL Historical'
        },
        xAxis:[{
            plotBands : [{
                from : 1115856000000,
                to : 1128384000000,
                color : 'rgba(68, 170, 213, 0.2)',
                label : {
                    text : 'Last quarter\'s value range'
                }
            }]

        }],

        yAxis: [{
            title: {
                text: 'OHLC'
            },
            height: 200,
            lineWidth: 2
        }, {
            title: {
                text: 'Volume'
            },
            top: 300,
            height: 100,
            offset: 0,
            lineWidth: 2
        }],

        series: [{
            type: 'candlestick',
            name: 'AAPL',
            data: ohlc,

        }, {
            type: 'column',
            name: 'Volume',
            data: volume,
            yAxis: 1,

          }]
       });
       });
     });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:11:36.377

当您将 plotBand 添加到 yAxis 时，您可以设置更高和更低的点。
如果将 plotBand 放在 xAxis 上，它将显示在所有 yAxis 上。
因此，如果您只想在第一个轴上绘图，您可能必须制作一个与 plotBand 样式相同的新系列并添加到其中。

**首先**：您必须创建一个从开始日期到结束日期的区域系列，所有值都将与窗格的最大值相同。在我的示例中为 800。

**第二**：确保最大值高于您的系列的最大值。在我的示例中我没有这样做，所以你必须在你的代码上这样做。
**第三**：从图例和工具提示中删除系列，将 enableMouseTracking 和 showInLegend 设置为 false。

**[例子](http://jsfiddle.net/ricardolohmann/6sqEd/5/)**

# c# - 将浮点数转换为时间跨度

> ID：10421178
> 
> 赞同：25
> 
> 时间：2012-05-02T20:28:00.923
> 
> 标签：c#, datetime, timespan

有没有一种简单的方法来获取`float`代表小数小时的值并将它们转换为`TimeSpan`对象，反之亦然？例如：

```
float oneAndAHalfHours = 1.5f;
float twoHours = 2f;
float threeHoursAndFifteenMinutes = 3.25f;
float oneDayAndTwoHoursAndFortyFiveMinutes = 26.75f;

TimeSpan myTimeSpan = ConvertToTimeSpan(oneAndAHalfHours); // Should return a TimeSpan Object 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-02T20:29:59.877

你想要的[`FromHours`](http://msdn.microsoft.com/en-us/library/system.timespan.fromhours.aspx)方法。

这需要一个双精度（而不是浮点数）并返回一个`TimeSpan`：

```
double hours = 1.5;
TimeSpan interval = TimeSpan.FromHours(hours); 
```

要从`TimeSpan`使用[`TotalHours`](http://msdn.microsoft.com/en-us/library/system.timespan.totalhours.aspx)属性中获取总小时数：

```
TimeSpan interval = new TimeSpan(1, 15, 42, 45, 750);
double hours = interval.TotalHours; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T20:29:52.127

所以，您正在寻找... [TimeSpan.FromHours(double)](http://msdn.microsoft.com/en-us/library/system.timespan.fromhours.aspx)？

文档是你的朋友。

# c# - How to print a large image in C#?

> ID：10421186
> 
> 赞同：4
> 
> 时间：2012-05-02T20:28:25.010
> 
> 标签：c#, image, printing

Currently I am using the following code to print an image:

```
private void button9_Click(object sender, EventArgs e)
{
    PrintDocument pd = new PrintDocument();
    printpath = "C:\\temp.bmp";
    pd.PrintPage += new PrintPageEventHandler(Print_Page);

    PrintPreviewDialog dlg = new PrintPreviewDialog();
    dlg.Document = pd;
    dlg.ShowDialog();
    pd.Print();
}

private void Print_Page(object o, PrintPageEventArgs e)
{
   Image i = Image.FromFile(printpath);
   Point p = new Point(0, 0);
   e.Graphics.DrawImage(i, p);
} 
```

But if the image has a too large height, it doesn't fit the page. I want to split the image into pieces with height of 1125px and then show them on multiple pages in Print Preview. How do I do this? Thanks!

# php - 调整 preg_replace 字符串以隐藏价格的小数点

> ID：10421189
> 
> 赞同：2
> 
> 时间：2012-05-02T20:28:40.013
> 
> 标签：php, preg-replace, currency, decimal

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:51:55.153

```
<?php
$num = 126.54;
echo $num === round($num, 0) ? round($num, 0) : $num;
?> 
```

这可以用来吐出你的号码。至于货币头寸，您可以根据货币设置条件。

**完整答案：**这处理所有货币类型并将它们放置在正确的位置。享受：

```
<?php
$symbols = array('€', '$');
$price = '$126.56';

foreach($symbols as $needle)
{
    if($pos = strpos($price, $needle) && $pos !== false)
        break;
}

$num = floatval(str_replace($symbols, '', $price));
$num = $num === round($num, 0) ? round($num, 0) : $num;

echo $pos ? $num.substr($price, -1) : substr($price, 0, 1).$num;
?> 
```

**KISS 方法：**有时，我们被复杂的答案所吸引，而忽略了简单的答案。我知道这有点晚了，但它可能会吹走很多不必要的代码。仅当您保证定价中有两位小数时才使用此选项：

```
<?php
$rounded = str_replace('.00', '', $price);
?> 
```

这将有效地消除任何担心货币放置的需要。但请记住：这仅适用于您的情况，前提是您保证定价格式精确到小数点后两位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:20:09.407

这应该可以帮助您：

**更新**

误读了您的原始帖子，并没有意识到您想保留货币符号。这应该可以很好地和简单地完成技巧，它是什么货币符号或它在哪里都没有关系。

```
// Won't change this
$number = '$200.00';
echo preg_replace('/([.0-9]+)(€)/e','round(\'$1\',0)."$2"',$number);

// Will change this
$number = '200.00€';
echo preg_replace('/([.0-9]+)(€)/e','round(\'$1\',0)."$2"',$number); 
```

# python - How can I change the order of the BoxLayout in kivy?

> ID：10421194
> 
> 赞同：3
> 
> 时间：2012-05-02T20:29:11.373
> 
> 标签：python, layout, python-2.7, boxlayout, kivy

I am testing kivy and I want to create a BoxLayout so to stack some buttons. My problem is that the children that are added to the layout follow a bottom-top logic while I want the opposite. Do you know how can I reverse the order? Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T18:42:59.450

有两种方法可以做到这一点。以相反的顺序将您的按钮传递给 add_widget() 方法，或者如果您使用 Kivy >= 1.0.5，请将索引传递给 add_widget

```
box = BoxLayout(...)
btn = Button(...)
box.add_widget(btn, len(box.children)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T07:33:38.250

有一个棘手的方法可以做到这一点。

**使用网格布局并将 cols 设置为 1**

# xcode - 在 Xcode 中调试时是否可以更改 BOOL 值？

> ID：10421195
> 
> 赞同：4
> 
> 时间：2012-05-02T20:29:11.420
> 
> 标签：xcode, ios5, xcode4.2, xcode4.3

当我处于调试模式时，是否可以将 BOOL 的值从 true 更改为 false 或反之亦然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:54:15.487

在 Xcode 调试器中，它显示本地 var 值，您可以双击一个值并在断点处停止时对其进行编辑。这比在控制台中输入整个内容要快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-04T16:18:44.067

使用 LLDB 调试器：

如果您运行代码并在该断点处停止，您只需键入：

`expr myString = @"New string" expr myBooleanValue = NO`

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:51:42.643

我认为你可以，例如，如果你`BOOL var = NO;`在控制台中，在 (gdb) 之后，键入`set var = YES`。`po var`您可以通过进入控制台来验证该值。

# php - PHP按钮不起作用

> ID：10421197
> 
> 赞同：2
> 
> 时间：2012-05-02T20:29:20.237
> 
> 标签：php, html, forms

我试图让一个按钮工作，我不允许使用 Javascript，这是我的代码：

```
 <form id="form1" name="form1" method="post" action="course_man.php"> 
```

```
 for($i=0; $i <= $numcourses; $i++){
echo '<div class="new'.$i.'" id="new'.$i.'"><label>'.$course_names[$i].'</label>
    <input name="edit'.$i.'" type="submit" value="Edit" />
    <input name="delete'.$i.'" type="submit" value="Delete" /><br /></div>';

    $name= "'edit".$i."'";
    if (isset($_POST[$name])){
    echo '<input name="text" type="text" value="'.$course_names[$i].'" />';
        }
    }
   ?></form> 
```

现在按钮被创建并且没有显示错误，但是编辑按钮在单击时不会创建文本字段，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:34:36.093

```
$name= "edit".$i;
if (isset($_POST[$name])){ 
```

不是： `$name= "'edit".$i."'";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:51:17.063

```
<form id="form1" name="form1" method="post" action="">
<?php

$course_names = array('maths','english','science','history');

$numcourses = count($course_names);

for($i=0; $i < $numcourses; $i++){

    echo '<div class="new'.$i.'" id="new'.$i.'">';

        echo '<label>'.$course_names[$i].'</label>';
        echo '<input name="edit'.$i.'" type="submit" value="Edit" />';
        echo '<input name="delete'.$i.'" type="submit" value="Delete" /><br />';

    echo '</div>';

    $name = 'edit'.$i;

    if (isset($_POST[$name])){
        echo '<input name="text" type="text" value="'.$course_names[$i].'" />';
    }
}
?>
</form> 
```

希望这会有所帮助，我已经测试过并且似乎工作正常）

# python - how to use mechanize as current real firefox browser?

> ID：10421199
> 
> 赞同：1
> 
> 时间：2012-05-02T20:29:27.163
> 
> 标签：python, firefox, mechanize

I log in a SNS website with my own accounts in real firefox browser.( it needs verify code! ) and now I want to do something with mechanize in python. I imported all cookies that current firefox browser kept to a MozillaCookieJar instance called "cj", and then created a browser `br=Mechanize.Browser()`, set its cookiejar `br.set_cookiejar(cj)`, but when I use it to open the SNS website again in python `br.open(site)` it told me I did'nt log in yet, are there some key steps that I missed?

best regards!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:05:29.123

如果机械化还不够，我建议你使用：Selenium 或[Spynner 。](http://pypi.python.org/pypi/spynner)

# ruby-on-rails-3 - 如何使用工厂女孩创建带有 has_many 的关联列表，并在创建时需要它的验证

> ID：10421200
> 
> 赞同：18
> 
> 时间：2012-05-02T20:29:30.040
> 
> 标签：ruby-on-rails-3, factory-bot

在 Rails 应用程序中，给定三个模型 User、Article 和 Reviewer，具有以下关系和验证：

```
class User < ActiveRecord::Base
  has_many :articles
  has_many :reviewers
end

class Reviewer < ActiveRecord::Base
  belongs_to :user
  belongs_to :article
end

class Article < ActiveRecord::Base
  belongs_to :user
  has_many :reviewers

  validate :has_reviewers?

  def has_reviewers?
    errors.add(:base, "article must have at least one reviewer.") if self.reviewers.blank?
  end
end 
```

以下工厂使用较新的 DSL：

```
FactoryGirl.define do

  factory :user do
    name { (8...20).map{ ('a'..'z').to_a[rand(26)] }.join }
    age  { Kernel.rand(100) }
  end

  factory :article do
    body "This is the article content"
    title "This is the title"
    user
    after_create do |article|
      article.reviewers = create_list(:user, 2)
    end
  end

  factory :reviewer do
    user
    article
    state { ["published","draft","rejected","archived"][Kernel.rand(4)] }
  end

end 
```

创建文章的工厂不起作用，因为在创建审阅者之前验证失败：

```
> FactoryGirl.create(:article)
ActiveRecord::RecordInvalid: Validation failed: article must have at least one reviewer. 
```

为了克服这个障碍，我做了比我想承认的更多的尝试，但我被困住了！我的一个想法是创建这样的审阅者：

```
 factory :article do
    body "This is the article content"
    title "This is the title"
    user
    reviewers {|a| [FactoryGirl.create(:reviewer, article: a)] }
  end 
```

但在这种情况下，“a”不是实例。所以这也不起作用，就像以前一样。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-03T16:32:58.057

我将此作为问题重新发布在 Factory Girl github 页面上，并努力寻找答案：

```
before_create do |article|
  article.reviewers << FactoryGirl.build(:reviewer, article: article)
end 
```

关键是在 before_create 中执行此操作，因此尚未触发验证，并确保将新创建的审阅者推送到正在创建的实例的审阅列表中。感谢 Unixmonkey 响应并让我尝试新事物 :)

[https://github.com/thoughtbot/factory_girl/issues/369#issuecomment-5490908](https://github.com/thoughtbot/factory_girl/issues/369#issuecomment-5490908)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T20:44:27.417

```
factory :article do
  reviewers {|a| [a.association(:reviewer)] }
end 
```

或者

```
factory :article do
  before_create do |a|
    FactoryGirl.create(:reviewer, article: a)
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-25T15:16:21.827

新语法是：

```
before(:create) do |article|
  article.reviewers << FactoryGirl.build(:reviewer, article: article)
end 
```

# ruby - 使用 Ruby 读取 json 然后输出为 json

> ID：10421203
> 
> 赞同：0
> 
> 时间：2012-05-02T20:29:39.910
> 
> 标签：ruby, json, http, file-io, cgi

我正在尝试读取从本地 .json 文件返回的信息。如何让 ruby​​ 从这个文件返回 json 信息？到目前为止我所拥有的：

```
#! /usr/bin/env ruby
require 'json'
require 'cgi'

cgi = CGI::new()

if cgi.request_method == 'GET' then
  json = File.read('path/to/file.json')
  print json
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:15:07.927

如果您使用的是 Ruby 1.9.3，则没有 File.read，请执行以下操作：

```
if cgi.request_method == 'GET'
    print File.open('path/to/file.json').read
end 
```

你也应该使用[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-i-out](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-i-out)

```
cgi.out("nph"        => true,
    "status"     => "OK",  # == "200 OK"
    "server"     => ENV['SERVER_SOFTWARE'],
    "connection" => "close",
    "type"       => "text/html",
    "charset"    => "iso-2022-jp",
      # Content-Type: text/html; charset=iso-2022-jp
    "language"   => "ja",
    "expires"    => Time.now + (3600 * 24 * 30),
    "cookie"     => [cookie1, cookie2],
    "my_header1" => "my_value",
    "my_header2" => "my_value") { "string" } 
```

# python - 在 Python 中创建文件并向其写入字符串的最简单方法

> ID：10421204
> 
> 赞同：0
> 
> 时间：2012-05-02T20:29:43.163
> 
> 标签：python, file

有没有比这更简单的方法将字符串写入文件：

```
f = open("test.txt", "w+")
f.write("test")
f.close() 
```

我希望 write 的返回值不是 None 以便我可以这样做：

```
open("test.txt", "w+").write("test").close() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T20:32:28.970

```
with open("test.txt", "w") as f_out:
    f_out.write(your_string) 
```

使用时`with open`，无需做`f_out.close()`；这是自动为您完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:51:51.873

您可以根据需要进行链接，但您必须编写自己的包装器，无用但有趣的练习

```
class MyFile(file):
    def __init__(self, *args, **kwargs):
        super(MyFile, self).__init__(*args, **kwargs)

    def write(self, data):
        super(MyFile, self).write(data)
        return self

MyFile("/tmp/tmp.txt","w").write('xxx').close() 
```

# android - 关于 AdMob 广告 url 到应用程序的问题

> ID：10421205
> 
> 赞同：2
> 
> 时间：2012-05-02T20:29:45.057
> 
> 标签：android, admob

我想知道 AdMob 上的一些东西，谷歌最近将 Android Market 更改为 Play Store。AdMob 广告上应用程序的 URL 类似于“market://details?id=com.myapp”。当我将 Play Store 上我的应用程序的链接添加到广告时，它会将[https://play.google.com/store/apps/details?id=com.myapp](https://play.google.com/store/apps/details?id=com.myapp)更改为 market://details?id=com.myapp

我想问的是，它真的成功重定向到我的应用程序吗？因为我发起了一个compaign进行测试，1000次点击，我有大约40次下载，我怀疑他们甚至来自admob......你怎么看，这正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:57:07.360

我很确定，虽然 AdMob 用户界面说链接是市场的，但它确实打到了 Play 商店。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:02:14.193

该链接将重定向到 Google Play，但适用于较旧的未更新版本的 Android Market。

您应该使用推荐跟踪来查看您的活动是否有用。看：

[https://developers.google.com/analytics/devguides/collection/android/devguide?hl=es-ES](https://developers.google.com/analytics/devguides/collection/android/devguide?hl=es-ES)

# windows-phone-7 - 旋转必应地图

> ID：10421215
> 
> 赞同：0
> 
> 时间：2012-05-02T20:30:14.813
> 
> 标签：windows-phone-7

我在我的应用程序中使用 bing 地图。我想随着手机的旋转而旋转地图，以便地图始终显示在手机的方向上。有没有办法做到这一点？我从指南针获得旋转信息，但我不知道如何旋转地图，所以它会随着手机旋转。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:04:04.683

不幸的是，无法在 Map 控件本身内旋转地图 - 但是，如果您确实需要旋转地图，可以使用将 Map 控件设置`RenderTransform`为 a `RotateTransform`，并根据指南针的读数更改角度。

这样做的缺点是性能不会很好，并且您必须使地图控件大于屏幕尺寸，因为当您旋转控件时，边缘会显示出来。祝你好运！

# mysql - 基于变量的动态视图

> ID：10421217
> 
> 赞同：1
> 
> 时间：2012-05-02T20:30:24.993
> 
> 标签：mysql

我正在使用视图来帮助从旧数据库缓慢过渡到新数据库。例如，旧数据库中有一个客户端表，我正在新数据库中重新实现它（两个数据库都在同一台服务器上）。我计划用遗留数据库中与原始表具有相同签名的客户端视图替换客户端表。

我认为我的想法应该可以正常工作，除了新应用程序正在 Rails 中开发，并且根据环境，数据库名称可能是 db_test、db_development 或 db_production。

当新数据库名称将更改时，如何在旧数据库中创建指向新数据库中表的视图？我已经尝试了很多事情，但这是一个非常奇怪的问题，所以我什至不确定从哪里开始。

这是我想做的一个例子：

```
SET @db = 'db_development';
select * from @db.client; 
```

如果有人能指出我正确的方向，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:17:52.327

您可以在两个数据库上定义触发器以使它们保持同步。

# java - 如何使用公钥的 mod 和 exp 初始化 Cipher 变量

> ID：10421219
> 
> 赞同：0
> 
> 时间：2012-05-02T20:30:31.593
> 
> 标签：java, security, jakarta-ee, encryption

我有一个自定义公钥类，它显式生成 mod 和 exp，而不是使用 java.security 中的公钥。现在我如何初始化密码变量以使用我拥有的 mod 和 exp 进行加密。

```
Cipher cipher = Cipher.getInstance("RSA");
String mod = pbkey.getMod();
String exp = pbkey.getExp(); 
```

如何达到等效

```
 cipher.init(Cipher.ENCRYPT_MODE, java.security.PublicKeyVariable); 
```

使用mod和exp？

感谢
Nohsib

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:11:03.993

构建一个[`RSAPublicKeySpec`](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/spec/RSAPublicKeySpec.html)，将其传递给[`KeyFactory.generatePublic`](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/KeyFactory.html)，然后将结果作为第二个参数传递给`cipher.init`。请参阅[本教程](http://www.java2s.com/Tutorial/Java/0490__Security/BasicRSAexample.htm)。

# objective-c - 为什么objective-c在划分双数据类型时会四舍五入？

> ID：10421224
> 
> 赞同：0
> 
> 时间：2012-05-02T20:30:52.560
> 
> 标签：objective-c

为什么`NSLog(@"%0.0f", 1.0/10.0);`输出0？

不是`1.0/10.0`两个双值的除法吗？为什么四舍五入到0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:33:38.373

因为您要求它使用格式说明符打印 0 位小数。

```
NSLog(@"%f", 1.0/10.0); 
```

> 0.100000

[printf 规格](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)：

> *   一个可选的精度，它给出 ... 出现在 a、A、e、E、f 和 F 转换说明符的基数字符 [在这种情况下，输出中的小数点 - JC] 之后出现的位数。 . 精度采用句点 ('.') 后跟星号 ('*') 的形式，如下所述，或可选的十进制数字字符串，其中空数字字符串被视为零。

# android-wifi - 安卓 Wi-Fi 连接

> ID：10421226
> 
> 赞同：0
> 
> 时间：2012-05-02T20:30:53.327
> 
> 标签：android-wifi

我想通过 Android 连接到路由器。路由器使用 Telnet 协议。我知道IP和端口。如何通过 Wi-Fi 连接到路由器并向其发送字节消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:11:03.927

如果您打算通过安卓设备连接到 Wi-Fi，请转到设置菜单 -> 无线和网络 -> Wi-Fi -> Wi-Fi 设置 -> 添加 Wi-Fi 连接。

# xcode - Xcode 抱怨 Bundle Identifier 中的无效字符

> ID：10421230
> 
> 赞同：2
> 
> 时间：2012-05-02T20:31:07.443
> 
> 标签：xcode, macos, cfbundleidentifier

当我尝试在 Xcode 4.3.2 中构建 Mac OS 项目时，它会抛出以下警告：

> 第 4 列的捆绑标识符中的无效字符“$”。此字符串必须是统一类型标识符 (UTI)，仅包含字母数字 (AZ、az、0-9)、连字符 (-) 和句点 (.) 字符。

该项目的 Bundle 标识符为：

> com.${COMPANY_NAME}.${PRODUCT_IDENTIFIER:rfc1034identifier}

plist 中指定的 Bundle Identifier 有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-23T00:31:19.823

请注意，`_`在变量名中使用是完全有效的。

在解析 plist 并用它们各自的值替换*后*，会出现此警告。`${VARIABLES}`因此，您需要检查这些变量的实际值，以确保它们不包含非法字符，例如`_`.

对于包标识符，您可以在 Xcode 的文件资源管理器（第一行）中单击您的项目名称，在 TARGET 部分下选择适当的目标，然后选择 General 选项卡。在**Identity/Bundle Identifier**下检查值。

[![Xcode 包标识符](../Images/a29331d106d5f7cdfca7c7daea503f16.png)](https://i.stack.imgur.com/PcG06.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:52:24.397

Open your info.plist file and Edit the string that currently says "com.${COMPANY_NAME}.${PRODUCT_IDENTIFIER:rfc1034identifier}".

Completely remove this string and manually enter the bundle id that you created in the iOS provisioning portal.

# python - 有效地对列表中的元素进行加权计数

> ID：10421233
> 
> 赞同：1
> 
> 时间：2012-05-02T20:31:15.213
> 
> 标签：python, algorithm

所以我有一个python dict，比如：

```
 1:[ "red","blue","green"]
 2: ["blue","blue","red"].. 
```

等等。

然后我有另一个 python dict： score_dict = {

```
 pid: weight
 1: 2
 2: 20
 ...
} 
```

所以，我想要的是..在第一个字典中，计算两种颜色一起出现的次数。等等。但是这个数量要乘以它们的重量。

例如：

我想知道在这个列表中红色和蓝色一起出现了多少次：

所以对于 pid 1 红色和蓝色出现一次。

```
 so this is (1*2) # 2 comes from the score_dict as pid1 has a weight 2 
```

然后第二次

我可以形成两对蓝色，红色

```
so this is (1*20) + (1*20) 
```

所以蓝色和红色一起出现的总分是 2 + 20 + 20 = 42

另外，我如何将它扩展到3种颜色？

就像我必须找出一起出现的“红色”“蓝色”和“绿色”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:54:38.063

```
from collections import Counter

dict1 = {1:[ "red","blue","green"], 2: ["blue","blue","red"]}

weight = {1: 2, 2: 20}

score = 0

for k,v in dict1.iteritems():
    score += weight[k] * Counter(v)["red"] * Counter(v)["blue"] 
```

结果：

```
>>> score
42 
```

我的代码的最后一部分可以重写为生成器理解：

```
score = sum(weight[k] * Counter(v)["red"] * Counter(v)["blue"] for k,v in dict1.iteritems()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:56:16.080

不确定我是否完全理解，但这是一个想法：'

```
from collections import Counter

data = {
    1: ['red','blue','green'],
    2: ['blue','blue','red'],
}

weights = {
    1: 2,
    2: 20,
}

for k, v in data.items():
    score = sum([c * weights[k] for c in Counter(v).values()])
    print "so this is: %s val = %d" % (k, score) 
```

# celery - Django + Celery 30天后删除任务历史

> ID：10421234
> 
> 赞同：1
> 
> 时间：2012-05-02T20:31:27.383
> 
> 标签：celery, django-celery

我相信默认设置是任务历史记录在 1 天后被删除。我需要它在 30 天后过期。

是`CELERY_TASK_RESULT_EXPIRES`我要找的吗？还是我必须制作自定义凸轮？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:05:02.683

根据这个：

[http://docs.celeryproject.org/en/latest/configuration.html?highlight=celery_task_result_expires#celery-task-result-expires](http://docs.celeryproject.org/en/latest/configuration.html?highlight=celery_task_result_expires#celery-task-result-expires)

`CELERY_TASK_RESULT_EXPIRES`听起来正是您正在寻找的。确保检查**注释**，因为并非所有结果后端都受支持。有些还需要 celerybeat 才能运行。

# image - MATLAB 的问题：使用小波工具箱的 JPEG2000 压缩方案

> ID：10421248
> 
> 赞同：2
> 
> 时间：2012-05-02T20:32:09.740
> 
> 标签：image, matlab, wavelet

我和一个队友正在为一个项目研究 JPEG2000 类似的压缩方案。它利用matlab和小波工具箱。

有2个问题。我对 JPEG2000 缺乏了解，这使我相信我缺少此压缩过程的步骤。第二个问题是一个实际错误，涉及：`[dict,avglen] = huffmandict(cQ,p); % Create dictionary.`
错误：？？？在 174 处使用 ==> huffmandict 时出错 源符号重复

我不确定这是否与矩阵中的重复值有关，因为没有进行游程编码。

==> 项目中的错误 41 [dict,avglen] = huffmandict(cQ,p); % 创建字典。

任何提示或信息都是有益的。
另外，我不确定是否需要预处理步骤

代码如下：

```
%wavelet based compression sub-band coding
clear all;
close all;
x=imread('1.png');%input image
n=input('enter the desired decompositon level '); %decompositon level
Q=input('enter the desired quantization step size '); %quantization level

%begin wavelet decomposition
c = [];
sx =  size(x);
s = zeros(n+2,length(sx));
if isempty(x) , return; end

s(end,:) = size(x);
for i=1:n
    [x,h,v,d] = dwt2(x,'haar'); % decomposition
    c = [h(:)' v(:)' d(:)' c];     % store details
    s(n+2-i,:) = size(x);          % store size
end

% Last approximation.
c = [x(:)' c];
s(1,:) = size(x);

%Begin Quantization

cQ=round(c/Q);

%Begin Entropy Encoding

scQ=length(cQ);
l=1;
for i=1:(scQ-1);
    l=l/2;
    p(i)=l;
end
p(scQ)=p(scQ-1);

[dict,avglen] = huffmandict(cQ,p); % Create dictionary.
actualsig = randsrc(100,1,[cQ; p]); % Create data using p.
comp = huffmanenco(actualsig,dict); % Encode the data. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T10:45:36.417

我知道这只是部分答案，但似乎由于您的输入包含重复项而导致错误。

这可以通过使用`unique`命令来防止。

在[这个网站上](http://www.techques.com/question/1-11196481/MATLAB---image-huffman-encoding)，他们推荐如下内容：

```
[symbols,p]=hist(A,double(unique(A))) 
```

但由于我不确定您的输入是如何工作的，您可能需要使用

```
unique([cQ; p],'rows') 
```

# objective-c - 如何将 UIView 作为背景添加到 UITextView？

> ID：10421252
> 
> 赞同：0
> 
> 时间：2012-05-02T20:32:26.537
> 
> 标签：objective-c, ios, uiview, uitextview

我想将带有以编程方式绘制的线条作为背景图案的 UIView 添加到 UITextView 字段（根据 UITextView 中的错字，textview 字段应该看起来有点像具有适当行高的衬纸）。

这是线条的 UIView 绘制代码当前看起来像一些固定值。

```
for (int i = 0; i < 4; i++) {
    CGContextMoveToPoint(context, 80.0, (215.0+i*21.0));
    CGContextAddLineToPoint(context, 310.0, (215.0+i*21.0));
}
CGContextSetShouldAntialias(context, false);
CGContextStrokePath(context); 
```

我发现实际上可以将背景图像作为 UIColor 分配给 UITextview（在本例中为“viewLogNote”）。

```
[[self viewLogNote]setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed: @"UITextField_Background"]]]; 
```

有没有办法用自定义绘图做类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:40:16.080

将自定义视图放在文本视图下方，然后将文本视图的背景颜色设置为清除，这样您就可以通过文本视图看到它后面的自定义视图，这可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:53:01.097

让我们假设你的 UIView 被称为 view 并且 UITextView 被称为 textView。试试这个，让我知道它是否有效：

```
[textView addSubview: view];
[textView sendSubviewToBack: view]; 
```

# javascript - 无法让我的 bing translate api ajax 调用正常工作，

> ID：10421255
> 
> 赞同：1
> 
> 时间：2012-05-02T20:32:37.343
> 
> 标签：javascript, html, ajax, translation, bing-api

我正在模拟测试 Bing 翻译 api，并尝试进行非常基本的翻译，将 div 的 innerHTML 转换为指定的语言。非常基本，但无法找到我的代码在哪里步履蹒跚……这是 jscript：

```
 var Translate={ 
  baseUrl:"http://api. 
    microsofttranslator.com/V2/Ajax.svc/", 
  appId:"7EE02F58CAC8EB2208D7AE8A194A43BB0C02436A", 
  translate:function(text,from,to, 
                              callback){ 
   var s = document.createElement("script"); 
   s.src =this.baseUrl+"/Translate"; 
   s.src +="?oncomplete="+callback;  
   s.src +="&appId="+this.appId; 
   s.src +="&from" + from ; 
   s.src += "&to=" + to ; 
   s.src += "&text=" + text;  
   document.getElementsByTagName( 
              "head")[0].appendChild(s); 
  } 
 } 
 var mycallback=function(result){ 
                         alert(result)}; 

function translater() 
{ 
 text = document.getElementById('translate').innerHTML; 

 alert(Translate.baseUrl);  

// Translate.translate("Hello World",              "en","es","mycallback"); 
} 
```

正如您从上面看到的，我尝试查看 Translate.baseUrl 的样子，但没有任何警报本身...... html 是：

```
<input type = "button" onclick = " translater()"/>
<div id ="translate"> This is the text to be translated. </div> 
```

我通过在翻译函数中放入警报消息来交叉测试 onclick 是否正常工作，并且回调发生在 onclick 事件上。

多谢你们！

# asp.net-mvc - 验证通用jQuery.Validate，类似使用“IEnumerable” 证实（...）”

> ID：10421260
> 
> 赞同：0
> 
> 时间：2012-05-02T20:32:52.003
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-validate

我对依赖于其他 3 个字段的字段进行复杂验证服务器上的验证很简单，因为我使用“验证”的方法

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
   // my validation
   if(complex_condition)
   {
       yield return new
               ValidationResult("my error", new List<string> {"field1"});
   }
} 
```

但不知道如何在客户端上做同样的事情。可以将验证放在“提交”事件中，但我希望在我正在验证的字段中显示错误消息，就像触发了所需的字段验证一样。

谢谢你。

**编辑：回复@DarinDimitrov 后的解决方案：**

Javascript：

```
$.validator.addMethod('mycustomvalidation', function (value, element, parameters) {

    if (value.length < 6) {
        return false;
    }

    return true;
});

$.validator.unobtrusive.adapters.add('mycustomvalidation', [], function (options) {
    options.rules['mycustomvalidation'] = {};

    for(var key in options.params) {
        options.rules['mycustomvalidation'][key] =  options.params[key];
    }

    options.messages['mycustomvalidation'] = options.message;
}); 
```

我可以创建一个自定义数据注释：

模型：

```
[CustomClientValidation("mycustomvalidation", "value1", "value2", ErrorMessage="validacion propia")]
public string MyProperty { get; set; } 
```

数据注释：

```
public class CustomClientValidationAttribute : ValidationAttribute, IClientValidatable
{
    public CustomClientValidationAttribute(string validationType)
    {
        this.ValidationType = validationType;
    }

    public CustomClientValidationAttribute(string validationType, params object[] parameters)
        : this(validationType)
    {
        if (parameters != null && parameters.Count() > 0)
        {
            this.ValidationParameters = new Dictionary<string, object>();
            var countParameters = parameters.Count();
            for (var index = 0; index < countParameters; index++)
            {
                this.ValidationParameters.Add(string.Format("parameter{0}", index), parameters[index]);
            }
        }
    }

    public string ValidationType { get; set; }

    public IDictionary<string, object> ValidationParameters { get; set; }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule()
        {
            ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
            ValidationType = this.ValidationType,
        };

        if (this.ValidationParameters != null)
        {
            foreach (var parameter in this.ValidationParameters)
            {
                rule.ValidationParameters.Add(parameter.Key, parameter.Value);
            }
        }

        yield return rule;
    }

    public override bool IsValid(object value)
    {
        return true;
    }
} 
```

或使用 javascript：

```
$.validator.addMethod('mycustomvalidationii', function(value) {

    if (value.length < 6) {
        return false;
    }

    return true;
}, 'my custom validation');

$("#MyProperty").rules("add", "mycustomvalidationii"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:20:15.283

您可以编写一个自定义验证属性来实现[IClientValidatable](http://msdn.microsoft.com/en-us/library/system.web.mvc.iclientvalidatable.aspx)接口，然后为客户端验证注册一个自定义适配器。这是[一个示例](https://stackoverflow.com/a/5817958/29407)，说明如何编写这样的自定义验证属性，该属性将能够验证多个依赖属性，并附加一个自定义客户端验证适配器以在客户端上复制相同的验证逻辑。

# c++ - 在两个 QTableView 之间拖放

> ID：10421264
> 
> 赞同：1
> 
> 时间：2012-05-02T20:33:15.263
> 
> 标签：c++, qt

我有两个 QTableView，一个有 10 行，另一个是空的。我想将一行从第一个表拖到第二个表（空表）。

```
leftTableView->setModel(leftModel);
leftTableView->resizeColumnsToContents();
leftTableView->setDropIndicatorShown(true);
leftTableView->setDragDropMode(QAbstractItemView::DragOnly);

rightTableView->setModel(rightModel);
rightTableView->resizeColumnsToContents();
rightTableView->setDropIndicatorShown(true);
//rightTableView->setAcceptDrops(true);
rightTableView->setDragDropMode(QAbstractItemView::DropOnly); 
```

在`rightModel`我创建了`insertRow`执行此操作的函数：

```
DATA data;

data.hex  = "02";
data.name = "Command";
data_list->insert(row, data);
emit layoutChanged();
return true; 
```

我做错了什么吗？有人可以指导我如何实现拖放吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:38:15.020

QT Demos 中有一个非常好的拖放示例。您可以找到这些演示是 QT 源。您还可以在此处找到它们[拖放示例](http://qt-project.org/doc/qt-4.8/examples-draganddrop.html)。

# objective-c - 编写一个方法签名，包括文档的类名

> ID：10421265
> 
> 赞同：1
> 
> 时间：2012-05-02T20:33:15.873
> 
> 标签：objective-c, documentation

是否有用于描述*包含类名*的 Objective-C 方法的语言标准（或常见做法） ？

例如，假设我有以下伪代码：

```
class Foo
{
  void bar(int i);
} 
```

我想为它写一些文档。

如果这是 Java，我会将该方法称为`Foo.bar()`. 如果是 C++，我会使用`Foo::bar`. 为 Objective-C 执行此操作的正确方法是什么？

我知道我可以使用`-(void) bar:(int)i`，但这不包括类（或协议）名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T20:37:59.637

通常是`-[Foo bar:]`. 当方法是类方法时，可能会有加号而不是减号。

# jquery - jquery：下拉所选项目后克隆

> ID：10421268
> 
> 赞同：0
> 
> 时间：2012-05-02T20:33:30.857
> 
> 标签：jquery, drop-down-menu, clone

我有一个下拉列表，其中选项是从 clone () 函数生成的，例如：

```
 <select id="drop1">
        <option value="0">Select...</option>
        <option value="Apples">Apples</option>
        <option value="Bananas">Bananas</option>
        <option value="Orange">Orange</option>
        <option value="Cats">Cats</option>
        <option value="Dogs">Dogs</option>
        <option value="Candy">Candy</option>
    </select>

    <select id="drop2">               
    </select>

        ...
<script>  
    $('#drop1').children().clone().appendTo('#drop2');
</script> 
```

但我想知道的是如何在下拉选择项目后克隆项目。显然在 onchange() 事件中，例如，查看第一个下拉列表：

```
 <select id="drop1">
        <option value="0">Select...</option>
        <option value="Apples">Apples</option>
        <option value="Bananas">Bananas</option>
        <option value="Orange">Orange</option>
        <option value="Cats" selected>Cats</option> --> select item
        <option value="Dogs">Dogs</option>
        <option value="Candy">Candy</option>
    </select> 
```

克隆结果：

```
<select id="drop2">
    <option value="Dogs">Dogs</option>
    <option value="Candy">Candy</option>
</select> 
```

我的意图是生成 2 个范围字段（静态数据）。我希望我能帮上忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:42:33.860

[小提琴](http://jsfiddle.net/EDx6a/)。

```
$('#drop1').change(function() {
   $('#drop2').empty();
   $("#drop1 option:selected").nextAll().clone().appendTo('#drop2'); 
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:38:57.750

尝试对孩子使用 .slice，

```
$('#drop1')
   .children()
   .slice($('#drop1')[0].selectedIndex + 1)
   .clone()
   .appendTo('#drop2'); 
```

[**演示**](http://jsfiddle.net/dstCB/)

编辑： Onchange`#drop1`

```
$('#drop1').change(function() {
    $('#drop2')
       .empty()
       .append(
              $(this).children().slice(this.selectedIndex + 1)
             .clone()
       );
}); 
```

[**演示**](http://jsfiddle.net/dstCB/3/)

# macos - Mono.Zeroconf 的 OSX 端口

> ID：10421271
> 
> 赞同：2
> 
> 时间：2012-05-02T20:33:43.303
> 
> 标签：macos, mono, zeroconf

我试图让 MZClient 在 OSX 10.7.3 上运行，并且无法通过 ProviderFactory 模块，在 /bin 目录中找不到任何可接受的条目。我已经尝试过对文件名进行硬编码，但还没有成功。关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T14:05:54.840

确保您的应用程序目录中有 Mono.Zeroconf.Providers.Bonjour.dll 并确保其中包含以下内容的 Mono.Zeroconf.Providers.Bonjour.dll.config：

```
<configuration>
  <dllmap dll="dnssd.dll" target="libc.dylib" os="osx" />
</configuration> 
```

正是那个 .config 文件让我花了一段时间才弄清楚。

# asp.net-mvc-4 - ASP.NET MVC 4 在哪里存储帐户信息？

> ID：10421277
> 
> 赞同：4
> 
> 时间：2012-05-02T20:34:22.760
> 
> 标签：asp.net-mvc-4

我已经安装了 MVC 4 并创建了一个新的“Internet 应用程序”。运行应用程序并添加一些帐户后，我找不到信息的存储位置。我以前使用过 MVC 2。它将帐户存储在 ASP.NET 数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:37:08.153

如果您谈论的是默认设置，则很可能将数据存储在快速实例中。在解决方案资源管理器中，查看隐藏文件，您应该会看到它。否则，使用 SQL Server 在连接字符串中检查它正在连接的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T14:52:39.933

**它未显示在解决方案资源管理器中。**

一个全新的 MVC4 应用程序在默认连接字符串指向的数据库中创建表用户数据。因此，如果使用连接字符串创建了一个新的 MVC 4 应用程序：

```
<add name="DefaultConnection" connectionString="Data Source=localhost\SQLEXPRESS;Integrated Security=SSPI;database=aspnetdb" providerName="System.Data.SqlClient" /> 
```

然后在新应用程序中单击“注册”，结果是创建了以下表，并且在 pages_Membership 表中出现了一个条目，如此屏幕截图所示：

![MVC 4 创建的用户表](../Images/44ab54ac9d5cd6a6538615dd45f8c03c.png)

# ruby-on-rails-3 - 带日期的 Rails 路线

> ID：10421281
> 
> 赞同：5
> 
> 时间：2012-05-02T20:34:54.303
> 
> 标签：ruby-on-rails-3, date, routes

因此，我有一个每周日历视图，并且设置了一条路线以接受 /:year/:month/:day 作为开始日期。

```
 match "events/(:year/:month/:day)" => "events#index", 
      :constraints => { :year => /\d{4}/, :month => /\d{2}/, :day => /\d{2}/ },
      :as => "events_date" 
```

关于这条路线的使用，我有两个问题。首先，在解析参数时，这就是我正在做的事情：

```
unless params[:year].nil? || params[:month].nil? || params[:day].nil?
  start_date = Date.new(params[:year].to_i, params[:month].to_i, params[:day].to_i)
end
start_date = start_date.nil? ? Date.today : start_date 
```

这让我觉得非常冗长和丑陋。有没有更好的办法？

当链接到日历中的另一周时（每周翻页），我是否必须做类似的事情

```
#assume an date object with the desired start date
link_to events_date_path(date.strftime('%Y'), date.strftime('%m'), date.strftime('%d')) 
```

这似乎也有点冗长和丑陋。在路线中处理日期的最佳方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T20:57:40.430

My suggestion would be to not use three separate variables. That way you don't end up with a lot of extra null checking and sanity checking in your controller. You could turn your match in to something look like this, with your constraints still in tact:

```
match "events/(:date)" => "events#index", 
      :constraints => { :date => /\d{4}-\d{2}-\d{2}/ },
      :as => "events_date" 
```

Thus you would end up with something a little more sane in the controller:

```
unless params[:date]
  start_date = params[:date].strftime("%Y-%m-%d').to_date # assuming you want a Date
end 
```

And I usually do those types of 'if this is set' checks something more like this, because I find it a bit more readable:

```
start_date = Date.today unless defined? start_date 
```

You could even roll those last two together:

```
start_date = defined?(params[:date]) ? params[:date].strftime("%Y-%m-%d').to_date : Date.today 
```

# javascript - 每个单选按钮的不同样式

> ID：10421284
> 
> 赞同：0
> 
> 时间：2012-05-02T20:35:09.467
> 
> 标签：javascript, jquery, html, css, forms

我正在尝试为我的网站设计这 3 个单选按钮，这很简单，但我需要它们看起来不同。例如，一个选项有 paypal，另一个 alertpay 和另一个 check，每个选项都有不同的图像。事实证明，这很困难，因为我正在尝试许多不同的教程，所有教程都向我展示了如何仅针对其中一个进行更改，但随后无法针对其他教程进行更改。

这是我要遵循的教程之一 - [http://screwdefaultbuttons.com/](http://screwdefaultbuttons.com/)

任何人都可以给我任何想法或链接到可以帮助我的地方。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:45:58.667

是的，用一些花哨的格式在 css 中定义你的类，比如：

```
.button1 { 
   width: 19px;
   height: 25px;
   padding: 0 5px 0 0;
   background: url(checkbox.jpg) no-repeat;
}

.button2 {
   width: 19px;
   height: 25px;
   padding: 0 5px 0 0;
   background: url(somethingelse.jpg) no-repeat;
} 
```

然后将类放在 html 中，例如：

```
<input type="radio" name="radio1" class="button1" /> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-02T20:38:09.043

您应该单独调用`screwDefaultButtons`以在每个上设置不同的图像，例如

```
$('#radio1').screwDefaultButtons({ 
         checked: "url(images/radio_Checked1.jpg)",
         unchecked: "url(images/radio_Unchecked1.jpg)",
         width:    85,
         height:   85
});

$('#radio2').screwDefaultButtons({
         checked: "url(images/radio_Checked2.jpg)",
         unchecked: "url(images/radio_Unchecked2.jpg)",
         width:    85,
         height:   85
}); 
```

顺便说一句，“screwDefaultButtons”链接不是教程，而是使用自定义按钮的 jQuery 插件。

# jquery - 当许多鼠标悬停事件时，jQuery 停止动画排队

> ID：10421286
> 
> 赞同：1
> 
> 时间：2012-05-02T20:35:17.653
> 
> 标签：jquery, html, menu, drop-down-menu

例如下拉菜单，如果你渲染它并快速将鼠标悬停在“关于我们”按钮上并退出 5 次，停止菜单将打开几次然后停止。我需要它来做最后一个动画。

```
<script type="text/javascript">
    $(document).ready(function(){
        $("ul.topnav li a").mouseenter(function() {
            $(this).parent().find("ul.subnav").slideDown('fast').show();
        });  

        $(".dropdown").mouseleave(function(){ 
            $(this).stop(true, false);
            $(this).parent().find("ul.subnav").slideUp('fast');
        });
    }); 
```

HTML：

```
<ul class="topnav">  
    <li><a href="#">Home</a></li>  
    <li class="dropdown">  
        <a href="#">About Us</a>  
        <ul class="subnav dropdown">  
            <li><a href="#">Sub Nav Link 1</a></li>  
            <li><a href="#">Sub Nav Link 2</a></li>  
        </ul>
    </li>  
</ul>
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T20:37:10.233

使用 为您的过渡添加前缀`.stop(true, true)`，例如：

```
$(this).parent().find("ul.subnav").stop(true, true).slideDown('fast').show(); 
```

# facebook - 有什么方法可以让 Facebook “Like Box”包含页面所有者以外的帖子

> ID：10421298
> 
> 赞同：2
> 
> 时间：2012-05-02T20:35:48.953
> 
> 标签：facebook, facebook-likebox

我正在为一个（现在）也有一个 Facebook“页面”的组织管理一个相当乏味而静态的网站，该网站周围有更多的社区嗡嗡声。

我在旧网站上添加了一个 Facebook“Like Box”。虽然它通过“Like 按钮”、计数和社区照片对 Facebook“页面”来说是一个很好的吸引器，但我有点失望它的“流”组件（据我所知）只显示帖子通过页面标识，与您在 Facebook 页面上添加来自活跃社区的评论和“其他人的帖子”相比，这相对无聊。

有什么方法可以将这些附加内容放入 Like Box 中？

我已经尝试将 ' `&amp;force_wall=true`' 添加到类似框 iframe 参数中，但没有效果 - 无论如何，该页面不适合某个地方；它是针对“公司和组织”的——所以如果这不能通过 API 控制，我想知道我是否可以在 FB 页面管理设置中调整一些东西？或者它根本不是一种选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:06:47.863

进行了同样的研究，但没有成功。您可以获得的最接近的是通过[Activity Feed 插件](https://developers.facebook.com/docs/reference/plugins/activity/)，只有当您拥有 App Page 时也是如此。因此，剩下的唯一选择是使用 Graph API 获取整个页面提要，然后进行相应的解析。

例如：[https ://graph.facebook.com/cocacola/feed?access_token=your_access_token](https://graph.facebook.com/cocacola/feed?access_token=your_access_token)

# asp.net - 实现客户端验证以检查最大值是否大于我的 asp.net MVC 中的最小值的最佳方法是什么

> ID：10421301
> 
> 赞同：0
> 
> 时间：2012-05-02T20:36:10.373
> 
> 标签：asp.net, asp.net-mvc-3, data-annotations

我有一个包含最大值和最小值的对象，所以我希望在所有编辑和创建视图中显示客户端验证消息，以防用户插入的最小值大于最小值。BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:18:45.413

您可能需要客户端和服务器端验证。实现自己的验证可能会很好。我做了类似的事情，我想确保一个字段与另一个字段的值不同。不过我不是从头开始的。我使用了来自 Microsoft 的 Simon J Ince 的一些代码。他在他的博客上有[它](http://blogs.msdn.com/b/simonince/archive/2011/09/29/mvc-validationtookit-alpha-release-conditional-validation-with-mvc-3.aspx)。基本上，他有条件验证的基础（您可以根据另一个字段的值进行验证）。我从他的 ConditionalAttributeBase 继承并实现了 IClientValidatable 接口（这是您向浏览器发送 java 脚本将检查的依赖字段的方式。）

```
/// <summary>
/// A validator for ensuring that the value of this field does NOT equal the value of another field.
/// </summary>
[AttributeUsage(AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = false)]
public class NotEqual:ConditionalAttributeBase, IClientValidatable
{
    public string DependentProperty { get; set; }

    /// <summary>
    /// Returns client validation rules for NotEqual
    /// </summary>
    /// <param name="metadata">The model metadata.</param>
    /// <param name="context">The controller context.</param>
    /// <returns>
    /// The client validation rules for NotEqual.
    /// </returns>
    IEnumerable<ModelClientValidationRule> IClientValidatable.GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
                       {
                           ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
                           ValidationType = "notequal",
                       };
        string depProp = BuildDependentPropertyId(metadata, context as ViewContext);
        rule.ValidationParameters.Add("dependentproperty", depProp);

        yield return rule;
    }

    /// <summary>
    /// Builds the dependent property id.
    /// </summary>
    /// <param name="metadata">The metadata.</param>
    /// <param name="viewContext">The view context.</param>
    /// <returns></returns>
    protected string BuildDependentPropertyId(ModelMetadata metadata, ViewContext viewContext)
    {
        return QualifyFieldId(metadata, DependentProperty, viewContext);
    }

    /// <summary>
    /// Validates that the value does not equal the value of the dependent value if the dependent value is not null
    /// </summary>
    /// <param name="value">The value to validate.</param>
    /// <param name="validationContext">The context information about the validation operation.</param>
    /// <returns>
    /// An instance of the <see cref="T:System.ComponentModel.DataAnnotations.ValidationResult"/> class.
    /// </returns>
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        // check if the current value matches the target value
        if (value != null && GetDependentFieldValue(DependentProperty, validationContext).ToString() == value.ToString())
        {

                return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
        }

        return ValidationResult.Success;
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="NotEqual"/> class.
    /// </summary>
    /// <param name="dependentProperty">The dependent property.</param>
    public NotEqual(string dependentProperty)
    {
        DependentProperty = dependentProperty;
    }

}$ 
```

接下来我调整了javascript：

```
 (function ($) {
        $.validator.addMethod('notequal',
            function (value, element, parameters) {
                var id = '#' + parameters['dependentproperty'];
                var depControl = $(id);
                var control = $(element);
                if (control.val() === depControl.val())
                    return "";
                return true;
            }
        );

    $.validator.unobtrusive.adapters.add(
        'notequal',
        ['dependentproperty'],
        function (options) {
            options.rules['notequal'] = {
                dependentproperty: options.params['dependentproperty']
            };
            options.messages['notequal'] = options.message;
        }
    );

        $.validator.addMethod('notequaltwo',
        function (value, element, parameters) {
            var id = '#' + parameters['dependentproperty'];
            var depControl = $(id);
            var control = $(element);
            if (control.val() === depControl.val())
                return "";
            return true;
        }
    );

        $.validator.unobtrusive.adapters.add(
        'notequaltwo',
        ['dependentproperty'],
        function (options) {
            options.rules['notequaltwo'] = {
                dependentproperty: options.params['dependentproperty']
            };
            options.messages['notequaltwo'] = options.message;
        }
    );
})(jQuery);$ 
```

希望你能看到如何调整我的代码来做你想做的事，基本上你必须转换类型（如果类型不转换，不要做任何事情，你应该选择其他验证器它。）然后进行比较。

# php - 在一行中做一个 ifnot 语句和 if 语句

> ID：10421306
> 
> 赞同：0
> 
> 时间：2012-05-02T20:36:55.067
> 
> 标签：php, if-statement

我正在尝试用 2 个条件创建一个 if 语句。一个检查一个变量是否不存在并且与单词“good2go”不匹配，另一个检查以确保“body”变量存在。我正在尝试在这里触发错误消息。这是我所拥有的以及我尝试过的，但似乎都不起作用。

```
if (stripos($_POST['check'], 'good2go') == FALSE && $_POST['body']) {        
                $error = true; } 

if (!$_POST['check'] == 'good2go' && $_POST['body']) {  
                $error = true; }

if (!stripos($_POST['check'], 'good2go') && $_POST['body']) {   
                $error = true; }

if ((!stripos($_POST['check'], 'good2go')) && $_POST['body']) { 
                $error = true; } 
```

我怎样才能让它工作？

这是contact_us.php 的完整代码，其中包含验证代码和电子邮件代码。

```
 $error = false;
  if (isset($_GET['action']) && ($_GET['action'] == 'send')) {

          // Winnie the pooh check
         //$t = tep_db_prepare_input($_POST['verify']);
         if (!isset($_POST['check']) && !$_POST['check']=='good2go' && isset($_POST['body'])) {
                $error = true;              
        } else  {  // Winnie the pooh Check

    $name = tep_db_prepare_input($_POST['name']);
    $email_address = tep_db_prepare_input($_POST['email']);

//IP recorder start
$ipaddress = $_SERVER["REMOTE_ADDR"];
$ip = "\n\nIP: " . $ipaddress;
$content = "\n\nName: ".$name."\n\nComments: ".$_POST['enquiry'];
$product = tep_db_prepare_input($_POST['product']);
    if ($product) { 
$product_text = "\n\nProduct Interest: ".$product; }
$content_ip = $content . $product_text. $ip;
$enquiry = tep_db_prepare_input($content_ip);
//IP recorder end

        }
 // BOF: Remove blank emails
// if (tep_validate_email($email_address)) {
// tep_mail(STORE_OWNER, STORE_OWNER_EMAIL_ADDRESS, EMAIL_SUBJECT, $enquiry, $name, $email_address);
// tep_redirect(tep_href_link(FILENAME_CONTACT_US, 'action=success'));
// } else {
// $error = true;
// $messageStack->add('contact', ENTRY_EMAIL_ADDRESS_CHECK_ERROR);
    if (! tep_validate_email($email_address)) {
        $error = true;
        $messageStack->add('contact', ENTRY_EMAIL_ADDRESS_CHECK_ERROR);
    }
    if ($enquiry == '') {
        $error = true;
        $messageStack->add('contact', ENTRY_EMAIL_CONTENT_CHECK_ERROR);
    }
    if ($error == false) {      
      tep_mail(STORE_OWNER, STORE_OWNER_EMAIL_ADDRESS, EMAIL_SUBJECT, $enquiry, $name, $email_address);

      tep_redirect(tep_href_link(FILENAME_CONTACT_US, 'action=success'));
// EOF: Remove blank emails
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:41:06.593

您更新的问题的解决方案：

```
if (!isset($_POST['check']) || !$_POST['check']=='good2go' || !isset($_POST['body'])) {
                $error = true;              
} 
```

管道与＆符号的原因是，如果任何字段有问题，您都想抛出错误。此外，您还想检查是否设置了 body 与 IS 设置。很高兴这对你有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:41:26.153

> 另一个检查以确保“body”变量不存在。

```
if(stripos($_POST['check'], "good2go") !== false && !isset($_POST['body'])){
    //code here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T20:41:30.460

根据有关[stripos](http://us.php.net/stripos)函数的 PHP 文档：

> 此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。使用 === 运算符测试此函数的返回值。

因此，您需要将第一行更改为：

```
// Doing stripos checks you MUST use === (not ==)
if (stripos($_POST['check'], 'good2go') !== FALSE && $_POST['body']) {        
            $error = true; } 
```

要检查是否没有`$_POST['body']`，您可以将以上内容更改为：

```
if (stripos($_POST['check'], 'good2go') !== FALSE && (!isset($_POST['body'])) { 
```

- 更新 -

根据您的评论，您需要`$_POST['check']`等于“good2go”，那么您不应该使用`stripos`它，因为它会检查是否存在，`good2go`无论它是否完全相等，或者是字符串的一部分；'哇这个汉堡包好好吃'。

所以我将条件更改为：

```
if (((isset($_POST['body'])) && (strlen($_POST['body']) > 0)) && ((!isset($_POST['check'])) || ($_POST['check'] !== 'good2go'))) {
    // Post body has a value and Post check DOES NOT equal good2go, someone is hax0rin!
} 
```

您可能想阅读[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)，因为它似乎与您正在处理的内容完全一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:40:12.927

不需要所有那些不需要的功能。你想要达到的是：

```
if (isset($_POST['check']) && $_POST['check']=='good2go' && !isset($_POST['body']) {
   // your code 
} 
```

* * *

但是，***根据问题的标题：***使用三元语句。语法是这样的

```
$var = <condition> ? <true> : <false>; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T20:40:55.810

> 一种检查一个变量是否存在并匹配单词“good2go”

```
isset($_POST['check']) AND $_POST['check'] == 'good2go' 
```

> 另一个检查以确保“body”变量不存在。

```
!isset($_POST['body']) 
```

所以，把它们放在一起

```
if (isset($_POST['check']) AND $_POST['check'] == 'good2go' AND !isset($_POST['body'])) {        
  $error = true; 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T20:46:52.657

试试这个：

```
if(!empty($_POST['check']) && $_POST['check']=='good2go' && empty($_POST['body'])) { $error=true; } 
```

考虑使用`empty`而不是`isset`if your `$_POST['body']`can be present with an empty value。

# google-app-engine - 如何为我的 django 模型创建 csv 文件？

> ID：10421308
> 
> 赞同：0
> 
> 时间：2012-05-02T20:36:56.020
> 
> 标签：google-app-engine, csv, google-cloud-datastore

这是我的模型：

```
class Company(models.Model):      
    id = models.AutoField(primary_key=True);
    name = models.CharField(max_length=100);
    address = models.CharField(max_length=100, null=True);
    city = models.CharField(max_length=100);
    state = models.CharField(max_length=25);
    zip = models.IntegerField();
    latitude = models.CharField(max_length=20, null=True)
    longitude = models.CharField(max_length=20, null=True)  
    phone = models.CharField(max_length=15, null=True);
    website = models.CharField(max_length=50, null=True);
    email = models.EmailField(max_length=50, null=True);
    hiring = models.BooleanField(default=False);    
    approved = models.BooleanField(default=False);
    date_added = models.DateTimeField(auto_now_add=True);
    about_us = models.TextField(max_length=500, null=True); 
```

我有这样的数据：

```
 Id: since this is autofield, do i need to enter this?
    Name: 1-800 Postcards America's Printing Company
    Address: 121 Varick Street, 7th Floor
    City: New York
    State: NY
    Zip: 10013
    Latitude: 40.724831999999999
    Longitude: -74.00609
    Phone: 212-741-1070
    Website: http://www.1800postcards.com
    Email: info@1800postcards.com
    Hiring: No
    Approved: True
    Date Added: auto added as well, should I add a random date?
    About Us: Some about us with, many, commas, possible, etc. 
```

我需要将大约 50 多家使用 django 的公司上传到 gae 数据存储。如何创建 csv 文件以确保数据正确插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:51:30.633

我不是 100% 确定这会起作用，但我会编写一个 python 函数来读取您的文件，逐行解析数据，然后创建并保存 Company 类。我会在 dev_appserver 上测试一下。

然后我会在远程外壳中运行该功能。它应该从本地磁盘读取文本文件，并保存到真实的数据存储中。

# shell - 从目录打印文件 - Shell 脚本

> ID：10421310
> 
> 赞同：0
> 
> 时间：2012-05-02T20:36:59.663
> 
> 标签：shell

我有一堆文件，我想使用 crontab 中的 lp 命令打印这些文件。

**例子：**

```
/home/raj/orders$
-rw-rw-r-- 1 rajraj 151 2012-05-02 14:32 order_1.txt
-rw-rw-r-- 1 raj raj 151 2012-05-02 14:32 order_2.txt

```

我想打印所有这些文件，如下所示

```
lp /home/raj/orders/order_1.txt
lp /home/raj/orders/order_1.txt

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:48:48.890

此命令可以帮助您：`find $mydir -depth 1 | xargs lp`

# android - Android DB：使用 SQL 转储合并两个数据库

> ID：10421315
> 
> 赞同：0
> 
> 时间：2012-05-02T20:37:41.243
> 
> 标签：android, database, merge

我目前正在处理一个项目的数据库部分，我必须合并两个数据库的内容，我想问你在 Android API/SDK 本身中是否存在一个简单的 API 方法，它将我的数据库转储到一个SQL 文本文件。

实际上，我自己在 API 文档中没有发现任何关于这种实现的提示。而且我真的怀疑隐藏在窗帘后面的某个地方是否存在单线方法。

但是，我已经通过调用以下方法使用 Android Linux 的 sqlite3 shell 工具解决了问题：

```
String[] cmd = {"/system/bin/sh", "-c", ..., "sqlite3 ..."};
Runtime.getRuntime().exec( cmd ); 
```

我有两种选择，a) 将其直接通过管道传输到输出文件或 b) 使用 BufferedOutputStream 写入文件。

尽管如此，很可能由于兼容性问题，我要求您在 API 本身内使用更方便的方法，而不是在应用程序内使用关键的 shell 技巧。

我也对使用 Android 的数据库方法合并两个数据库的任何快速而漂亮的线索非常感兴趣。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:55:52.693

There's nothing built in to the API that will help you. You could query, and write the INSERT statements yourself. There's a blog entry ([http://mgmblog.com/2009/02/06/export-an-android-sqlite-db-to-an-xml-file-on-the-sd-card/](http://mgmblog.com/2009/02/06/export-an-android-sqlite-db-to-an-xml-file-on-the-sd-card/)) , on building an XML file from the results of your query. A few tweaks, and you coule build your own dump file.

You don't say what kind of merge you need to do, but you might be able to use [ORMLite](http://ormlite.com/), by doing something like override the equals method on your model objects to compare the records and/or combine data from certain fields (assuming the schema is the same), without having to write a lot of SQL.

# ruby-on-rails - Rails：如何在初始化时设置模型的属性

> ID：10421317
> 
> 赞同：0
> 
> 时间：2012-05-02T20:37:50.950
> 
> 标签：ruby-on-rails, rspec, initialization

我试图在初始化模型后立即设置它的属性。我试过 before_initialise、after_initialise、before_create、after_create。

我究竟做错了什么？

```
describe "turn based system" do
  before(:each) do
    @user1 = Factory :user
    @user2 = Factory :user

    @rota = @user1.rotas.create
    @rota.users << @user2
  end

it "should be user1's turn at the beginning" do
  @rota.current_turn.should == @user1.id   --> fails
end 
```

执行：

```
class Rota < ActiveRecord::Base
  has_many :rotazations
  has_many :users, :through => :rotazations
  has_many :invitations

  after_create :set_current_turn

  private 

  def set_current_turn
    if self.users.count > 0
      self.current_turn = self.users[0].id
    end
  end
end 
```

**编辑** 如果我使用以下方法构建 rota 模型：

```
@rota = @user1.rotas.create(:current_turn => @user1.id) 
```

它有效——但是，我觉得我在复制代码——我总是希望 current_turn 字段成为对象创建者的 id。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:10:43.097

您有一个错字：更改`before_filter`为`after_create`

1)`before_filter`是控制器回调函数。

2）你想使用`after_create`所以用户已经被关联，你可以使用关联。

# c# - “分页预览”视图模式下的 Excel VSTO 插件和上下文菜单 idMso

> ID：10421326
> 
> 赞同：3
> 
> 时间：2012-05-02T20:38:39.153
> 
> 标签：c#, visual-studio-2010, vsto, excel-interop

我使用 VSTO 创建了一个 Excel 2010 插件。我有一个工作正常的上下文菜单，但是当我切换到 excel 视图“分页预览”时，我的右键单击上下文菜单不再显示。我需要为分页模式定义不同的 idMso 部分吗？

我目前正在使用：

```
 <contextMenu idMso="ContextMenuCell">
        <!--buttons here-->
    </contextMenu> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T00:51:05.293

我发现“分页预览”视图有一个单独的 idMso。它是“上下文菜单单元布局”。[Office 2010](http://archive.msdn.microsoft.com/contextmenusaddin)的ContextMenus 加载项非常方便找到它。

# javascript - 识别字体嵌入机制

> ID：10421330
> 
> 赞同：0
> 
> 时间：2012-05-02T20:39:11.277
> 
> 标签：javascript, html, css, fonts

在一个设计精良的网站 (http://www.distinctlydeutschland.com/) 上找到了这个片段：

```
@font-face {
    font-family: 'TrajanProBold';
    src: url('trajanpro-bold-webfont.eot');
    src: url('trajanpro-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('trajanpro-bold-webfont.woff') format('woff'),
         url('trajanpro-bold-webfont.ttf') format('truetype'),
         url('trajanpro-bold-webfont.svg#TrajanProBold') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

我目前使用谷歌字体，并且使用过 CUFON——这似乎是一个更好的选择，因为它提供了更多的字体选择（因为我可能可以上传我自己的字体文件）并且它还允许用户拖动选择文本，这与 CUFON 不同.

问题是我不知道这种语法是什么意思，或者文件（.woff、.eot 等）是如何创建的，它们都做了什么等等。如果我只有 .ttf 会起作用吗？或者这是由某些网络字体服务提供商生成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:09:40.887

@font-face 是一种定义在 CSS 中使用的字体的方法。在该基础上，您将使用以下内容在具有类的元素上设置字体`classname`：

```
.className {
    font-family:TrajanProBold;
} 
```

某些字体格式仅适用于某些浏览器，这就是为什么有多个后备。

这里有一张表格，其中列出了哪些格式适用于哪些浏览器：http: [//www.stunningcss3.com/resources/fontface-file-types-browser-support.html](http://www.stunningcss3.com/resources/fontface-file-types-browser-support.html)

有关@font-face 的更多信息：http: [//sixrevisions.com/css/font-face-guide/](http://sixrevisions.com/css/font-face-guide/)

# php - PHP 图像链接到 HTML

> ID：10421332
> 
> 赞同：0
> 
> 时间：2012-05-02T20:39:17.843
> 
> 标签：php, html, image

我似乎无法找出为什么我的 PHP 不会与我的 HTML 链接。这个想法是根据调查弹出某些图片。例如，如果数字加起来超过 50，则会弹出“bromley.jpg”。尽管它只是说“宿舍”而不是图片，但这并没有发生。

```
<!DOCTYPE html>
<html> 
    <head>
        <title> Find the right dorm for you </title>

        <h1>Find out what dorm fits your lifestyle!</h1>

    </head>
    <body>
        <p> Please fill out a few quesitons so we can help you figure out which dorm      is best for you. </p>

    <form method="get" action="slutsky1-results.php">

        I enjoy (check all that apply):<br>
        <input type="checkbox" name="act1" value="8">Working Out<br>
        <input type="checkbox" name="act2" value="3">Bowling<br>
        <input type="checkbox" name="act3" value="3">Live Music<br>     
        <input type="checkbox" name="act4" value="5">Shopping<br>   
        <input type="checkbox" name="act5" value="7">Food<br>
        <input type="checkbox" name="act6" value="9">Bars <br>
        <input type="checkbox" name="act7" value="9">Frat Parties <br>
        <input type="checkbox" name="act8" value="8">Sports <br>
        <input type="checkbox" name="act9" value="3">Library <br>

        Is being close to the quad important to you?:
        <select name= "Quad">
        <option value="1">Not important</option>
        <option value="3">Kind of important</option>
        <option value="6">Very Important</option>
        <option value="3">Only thing that matters</option>
        </select>
        <br>

        How often do you plan on going to Red Lion?:
        <select name= "Lion">
        <option value="1">Never</option>
        <option value="5">Sometimes</option>
        <option value="10">Over 3 times a week</option>
        </select>
        <br>

        Would you rather go to the ARC or CRCE?:
        <select name= "Gym">
        <option value="10">Arc</option>
        <option value="1">CRCE</option>
        </select>
        <br>

        How do you plan on eating most of your meals?:
        <select name= "Gym">
        <option value="5">Ordering delivery</option>
        <option value="8">Walking To Green St.</option>
        <option value="5">Making my own food</option>
        </select>
        <br>

        Private or Public dorm?:
        <select name= "Gym">
        <option value="10">Private</option>
        <option value="5">Public</option>
        </select>
        <br>

        <input type="submit" value="get my results!">

    </form>

    </body>
</html> 
```

slutsky1-results.php：

```
<!DOCTYPE html>

<html lang="en-US">
        <head>
        <meta charset="UTF-8">
        <title> Dorm results! </title>
        </head>

        <body>
        <h1> Your ideal dorm based on your answers is...</h1>
        <p>
        <?php

        // Generates answer based on total numbers accumuated throughout survey.
        $dorm= dorm ;
        echo "Our reccomendation is $dorm <br>";
        ?>

     <img src="<?php

        if ($value > 50 ){
        echo "bromley" ;
        }
        else if ($value>15 && $value <31) {
        echo "Allen" ;
        }
        else if ($value>30 && $value <50) {
        echo "peabody" ;
        }
        else if ($value>0 && $value <16) {
        echo "PAR FAR" ;
        }

         ?>.jpg">

        </p>

        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:20:44.663

您的基本问题是您希望 value 是选择下拉列表中所有值的总和。表单提交不是这样工作的。您需要分别获取每个选定选项的值，然后将它们相加。像这样的东西：

```
$value = 0;
$value += $_GET["Quad"];
$value += $_GET["Lion"];
$value += $_GET["Gym"];
$value += $_GET["Meal"];
$value += $_GET["Private"]; 
```

这将位于图像标签之前，并将采用“Quad”选择的选定值并将其添加到总数中。然后它将采用“Lion”选择的值并对其进行处理，等等。

这并不漂亮，但它应该让您朝着正确的方向前进，并让您了解表单是如何提交的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T20:53:19.117

看起来您没有用实际值填充 $value 。

将以下内容放在 $dorm=dorm 之前：

$value = $_GET["value"]

假设您正在调用结果脚本，例如 results.php?value=50

# matlab - MATLAB：二进制矩阵的所有可能组合

> ID：10421333
> 
> 赞同：4
> 
> 时间：2012-05-02T20:39:22.937
> 
> 标签：matlab, combinations, combinatorics

我正在寻找一组矩阵的所有可能的线性组合`GF(2)`。我知道矩阵的数量`k`, 并且它们都是相同的维度，存储在 3D 数组中，`C(:,:,i)`用于第 i 个矩阵。因为我正在工作`GF(2)`，所以线性组合的所有系数都必须在`{0,1}`. 我想生成 2^k 个可能的总和中的每一个，以便我可以测试生成的矩阵以获得所需的属性。有很多关于生成矩阵或向量*元素*的所有组合的帖子，但我希望生成整个矩阵的所有线性组合。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:23:36.337

Here is an example:

```
%# some data to work with
sz = [4 3];
k = 6;
C = rand([sz k]);

%# coefficients [0,0,0,0,0,0] to [1,1,1,1,1,1]
p = (dec2bin(0:2^k-1) == '1');

%# generate all linear combinations with the above coefficients
for i=1:size(p,1)
    %# C(:,:,1)*p(i,1) + C(:,:,2)*p(i,2) + ... + C(:,:,k)*p(i,k)
    linComb = sum(bsxfun(@times, permute(p(i,:),[1 3 2]), C),3);

    %# do something interesting with it ...
end 
```

# html - microdata schema.org：如何将模式混合在一起？

> ID：10421334
> 
> 赞同：14
> 
> 时间：2012-05-02T20:39:31.147
> 
> 标签：html, seo, microdata, schema.org

您好，我有一个包含评论 ( [http://schema.org/Review ) 的页面 (](http://schema.org/Review) [http://schema.org/WebPage](http://schema.org/WebPage) )

问题是：

*   如何处理重复的内容？
*   是否正确制作元素属于两个或多个范围？
*   如何做到这一点，重复文本两次？
*   或者我应该避免多次引用？

例子：

```
<html itemscope itemtype="http://schema.org/WebPage">
    <meta name="description" content="_________" itemprop="description">
    ...
    <div itemscope itemtype="http://schema.org/Review">
        <div itemprop="description">_________</div>
    </div>
    ...
</html> 
```

描述属于评论和网页，所以......在这种情况下我应该写什么？

（注意：在前面的例子中，字符串“ ***_* _** ”是同一个文本段落，重复了两次）

* * *

编辑：

这可以是一个解决方案吗？（html5规范没有讨论这个，但是定义了itemref属性）

```
<html itemscope itemtype="http://schema.org/WebPage" id="WEBPAGE">
    ...
    <div itemscope itemtype="http://schema.org/Review" id="REVIEW">
        <div itemprop="description" itemref="WEBPAGE REVIEW">_________</div>
    </div>
    ...
</html> 
```

随意改进问题！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-07T05:47:38.047

## 快速解答

*   *如何处理重复的内容？*
    *   **使用属性 itemref**
*   *是否正确制作元素属于两个或多个范围？*
    *   **是的，这就是您使用 itemref 的目的**
*   *如何做到这一点，重复文本两次？*
    *   **不，你只需要引用元素**
*   *或者我应该避免多次引用？*
    *   **我看不出你不想使用多个参考的任何理由**

* * *

## 一些例子

**通过包装包含**

当您使用 itemref 属性时，您会将所引用元素中包含的所有属性包含在不同的范围内。

```
<body itemscope itemtype="http://schema.org/WebPage" itemref="wrapper">
    ...
    <div itemscope itemtype="http://schema.org/Review">
        ...
        <div id="wrapper">
            <div itemprop="description">_________</div>

            <div itemprop="some-other-property">_________</div>
        </div>
        ...
    </div>
    ...
</body> 
```

**通过包装包含 - 一个不同的例子**

假设您的产品在范围之外提供了一些不同的优惠。

```
<div itemscope itemtype="http://schema.org/Product" itemref="wrapper">
    ...
</div>

<div id="wrapper">
    <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
        ...
    </div>

    <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
        ...
    </div>

    <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
        ...
    </div>
</div> 
```

**包含特定属性**

您可能只希望在范围之外包含一个特定属性，为此我们可以简单地在指定 itemprop 的目标元素上直接设置 id。

```
<body itemscope itemtype="http://schema.org/WebPage" itemref="target">
    ...
    <div itemscope itemtype="http://schema.org/Review">
        <div id="target" itemprop="description">_________</div>
    </div>
    ...
</body> 
```

**多个参考**

也许包装器不适用，那么您可以使用多个引用。您只需用空格将它们分开。

```
<body itemscope itemtype="http://schema.org/WebPage" itemref="desc name">
    ...
    <div itemscope itemtype="http://schema.org/Review">
        <div id="desc" itemprop="description">_________</div>

        <div id="name" itemprop="name">_________</div>
    </div>
    ...
</body> 
```

* * *

## 来源

另请参阅thees页面以获取其他一些解释和示例：
[http ://www.w3.org/TR/2011/WD-microdata-20110405/](http://www.w3.org/TR/2011/WD-microdata-20110405/)
[http://www.whatwg.org/specs/web-apps/current-work /multipage/microdata.html](http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html)

# php - Yii url manager 规则 - 需要提示

> ID：10421338
> 
> 赞同：2
> 
> 时间：2012-05-02T20:39:46.497
> 
> 标签：php, yii

假设，我们有一个可以用多种语言显示的网站。每个控制器的名称都重写为某种语言。例如：

```
'kontakt<a:.*>' => 'contact<a>',
'uslugi<a:.*>' => 'services<a>
'<controller:\w+>/\w+,<id_body:\d+>' =>'<controller>/showBody/id/<id_body>' 
```

网址`/kontakt`重定向到`/contact`“uslugi”到“服务”等。

好的，但我也想通过最后一个控制器执行解析结果，以便`kontakt/some_irrelevant_title,5`被定向到`contact/some_irrelevant_title,5`

有可能以某种神奇的方式实现这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:54:13.600

[CUrlManager](http://www.yiiframework.com/doc/api/1.1/CUrlManager)模块接受参数的正则表达式。所以使用这样的规则并忽略路径中的规则控制器变量（c）：

```
'<c:(kontakt|contact)>/<a:\w+>' => 'contact/<a>',
'<c:(uslugi|services)>/<a:\w+>' => 'services/<a>', 
```

# maven-2 - IntelliJ IDEA：“Indexed Maven Repositories”列表 - 如何删除此列表中的远程 maven 存储库？

> ID：10421344
> 
> 赞同：13
> 
> 时间：2012-05-02T20:40:15.037
> 
> 标签：maven-2, intellij-idea, repository

我真的希望这是对线程 IntelliJ IDEA:“Indexed Maven Repositories”列表中发布的答案的评论[- 如何在此列表中添加远程 maven 存储库？](https://stackoverflow.com/questions/8150535/intellij-idea-indexed-maven-repositories-list-how-to-add-remote-maven-repos)但我的名声不允许。所以请原谅这个被发布为一个新问题。

有没有办法从“索引 Maven 存储库”列表中删除存储库？我移动了项目，仍然可以在那里看到我的旧存储库，其中一些实际上已经下线。

我尝试重新导入我的 settings.xml 文件，多次重新启动 IntelliJ（也使缓存无效），但无法让这些存储库从此列表中消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-02T19:24:14.353

在我的情况下，我想要删除的“索引 maven 存储库”没有在 Maven 的 settings.xml 中定义，而是在我的许多子项目的 pom.xml 文件之一中定义。我不得不从 pom.xml 文件中删除以下部分。从 pom.xml 文件中删除后，“索引 maven 存储库”已从 IntelliJ 中的 Maven 设置中删除

```
<repositories>
    <repository>
        <id>foo</id>
        <name>foo</name>
        <url>file://${project.basedir}/maven/repository</url>
    </repository>
</repositories> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-11T22:28:53.850

我所有的存储库都从此列表中删除，可能是因为我已将项目移动到我设备上的另一个目录。我的解决方案是删除`jarRepositories.xml`位于文件夹内的`.idea`文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-03T19:15:26.140

可能的解决方案：只需删除程序根文件中的“.idea”文件，并将pom.xml作为新程序打开，然后您会发现“indexed maven repositories”被自动修改。

# c# - MVC3中相同类型实体之间的多对多关系

> ID：10421351
> 
> 赞同：3
> 
> 时间：2012-05-02T20:40:36.937
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ef-code-first, entity-framework-migrations

我有一个 ASP.NET MVC3 应用程序，我在其中使用 Entity Framework 4.3 Code-First 和 Migrations。

我一直在尝试在同一类型的实体之间创建多对多关系，但是当我使用 Migrations 构建迁移时，它会生成一对一的关系。

这个想法是一个用户应该能够关注多个其他用户（想想 Twitter）。

我的`User`模型看起来像这样：

```
public class User
{
    public int UserId { get; set; }
    public string Name { get; set; }
    public DateTime Registered { get; set; }
    ...
    public virtual ICollection<User> Follows { get; set; }
} 
```

当我脚手架添加的 Follows-property 时，我得到这样的迁移：

```
public partial class FollowUser : DbMigration
{
    public override void Up()
    {
        AddColumn("User", "User_UserId", c => c.Int());
        AddForeignKey("User", "User_UserId", "User", "UserId");
        CreateIndex("User", "User_UserId");
    }

    ...
} 
```

所以 Entity Framework 将我的模型解释为两个用户之间的一对一关系。

**如何在同一类型的实体之间创建多对多关系？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T21:45:11.520

由于它是多对多自连接关系，因此 User 实体应具有Type`Followers`和属性。所以让我们改变你的班级以包括那些`Following``User`

```
public class User
{
    public int ID { get; set; }
    public string Name { get; set; }       
    public virtual ICollection<User> Followers { get; set; }
    public virtual ICollection<User> Following { get; set; }
} 
```

现在更新 DbContext 类以具有返回用户的属性

```
 public DbSet<User> Users { set; get; } 
```

我们需要告诉 EntityFramework 我们需要在这两者之间建立多对多关系。所以让我们通过重写 `OnModelCreating`方法使用 Fluent API 来做到这一点

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<User>().HasMany(m => m.Followers).WithMany(p => p.Following).Map(w => w.ToTable("User_Follow").MapLeftKey("UserId").MapRightKey("FollowerID"));
    base.OnModelCreating(modelBuilder);
} 
```

现在实体框架将创建这样的表。

![在此处输入图像描述](../Images/056a5745c5b2597f36935fba564ad09d.png)

请注意，我们明确告诉 Entity Framework 使用**UserId**和**FollowerId**作为外键列名称。如果我们没有提到，EF 将使用`User_ID`and`User_ID1`作为列名。

# android - GridLayout 吐出“不一致的约束”调试级日志

> ID：10421353
> 
> 赞同：26
> 
> 时间：2012-05-02T20:40:45.427
> 
> 标签：android, android-layout, grid-layout

我已经使用 GridLayout 几个星期了，我注意到当我打电话时

```
gridLayout.requestLayout() 
```

它在 LogCat 中吐出以下调试级消息：

```
D/android.widget.GridLayout(14048): horizontal constraints: x5 - x0 > 1115, x5 - x4 < 221, x4 - x3 < 221, x3 - x2 < 221, x2 - x1 < 221, x1 - x0 < 221 are inconsistent; permanently removing: x5 - x4 < 221\. 
```

我查看了 GridLayout 的源代码，试图找出“约束不一致”的可能原因，但我无法弄清楚。

这些消息正在出现的事实 - 这是我应该关注的事情吗？我认为事情的布置方式没有任何问题。我在 Fragments 中有一个 GridLayout，它作为 ViewPager 中的页面加载，因此当用户在页面之间滚动时，我在 LogCat 中多次看到上述输出。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-21T17:17:40.170

从`GridLayout`来源：

**Bellman-Ford 变体 - 修改后将典型运行时间`O(N^2)`从`O(N)`**

GridLayout 将其要求转换为形式的线性约束系统：

```
x[i] - x[j] < a[k] 
```

其中`x[i]`是变量，`a[k]`是常量。

例如，如果变量被标记为`x`, `y`，`z`我们可能有：

```
x - y < 17
y - z < 23
z - x < 42 
```

这是线性规划问题的一个特例，反过来，它等价于有向图上的单源最短路径问题，`O(n^2)`Bellman-Ford 算法是最常用的通用解决方案。

它有一种`solve`方法使用线性规划来保证它必须满足的约束的一致性，给定它的配置。如果您找出与约束相关联的配置`x5 - x4 < 221`并将其删除，您可能会提高布局性能。然后求解器将不必解决它不能满足并自行删除它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T14:47:37.043

我有同样的问题，我发现我错过了添加 XML 命名空间。以这种方式更正它：

```
<android.support.v7.widget.GridLayout 
     xmlns:grid="http://schemas.android.com/apk/res-auto"
     xmlns:android="http://schemas.android.com/apk/res/android">
...
</android.support.v7.widget.GridLayout> 
```

然后也更改了兼容性 GridLayout 使用的属性前缀与 XML 命名空间：

```
<ImageButton android:id="@+id/btnSentence"
    grid:layout_row="0"
    grid:layout_column="0"
    ...
/> 
```

它有帮助......希望它也能帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-28T16:16:13.643

我通过使用`wrap_content`GridLayout 的宽度而不是解决了这个问题`match_parent`，我想这是它需要担心的一个更少的约束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-19T23:34:50.720

对我来说，我正在使用 GridLayout 创建自定义视图。

问题是我认为我可以在我的 xml 中设置网格的列数。

我的布局 XML 看起来像这样：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"

        app:alignmentMode="alignMargins"
        app:columnCount="9"
        app:columnOrderPreserved="true"
        tools:ignore="HardcodedText"
        app:orientation="horizontal"
        tools:parentTag="androidx.gridlayout.widget.GridLayout"
        app:rowOrderPreserved="true">

        ...

</merge> 
```

不幸的是，它不适用于自定义布局。我必须在命名空间中指定所有这些属性`app`，在我的自定义视图中，如下所示：

```
class SimpleCalculatorView(context: Context, attrs: AttributeSet?): GridLayout(context, attrs) {

  init {
    ...

    View.inflate(context, R.layout.view_simple_calculator, this)
    columnCount = 9
    columnOrderPreserved = true
    rowOrderPreserved = true
    orientation = HORIZONTAL
} 
```

执行此操作后，我不再收到错误消息。

**编辑**

我说得太早了。错误再次出现，这一次，每当我在motionlayout中为自定义布局设置动画时，它就开始发生。

# c++ - 连续获得 2 个唯一数字？

> ID：10421356
> 
> 赞同：0
> 
> 时间：2012-05-02T20:41:11.993
> 
> 标签：c++

我想确保“网格”不能返回 2 个相同的值，但我不确定如何。这是我的代码：

`grid[rnd(2,x-2) * y + rnd(2,y-2)].height = rnd(25,40);`

```
int rnd(int min, int max) {
    return min + rand() % (max - min + 1);
} 
```

我还播种了 rand()`srand(time(NULL));`

我希望我可以提供更多详细信息或我尝试过的内容，但我找不到与该主题相关的任何内容。

编辑：我当然可以重新随机，但我觉得这是不好的做法：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T20:44:39.257

如果你真的需要避免连续重复，¹你需要做的就是将前一个值传递给你的函数，然后在循环中生成随机数直到它是不同的。

伪代码：

```
int rnd(..., int prev) {
    int y;
    do {
        y = rand() ...;
    } while (y == prev);
    return y;
} 
```

请注意，您也可以将`prev`其作为函数内部的静态变量进行维护。但这将使其无法同时生成多个独立的流。

* * *

[1\. 这实际上使事情变得不那么“随机”，在变得更可预测的意义上。]

# java - 模拟超类构造函数

> ID：10421357
> 
> 赞同：4
> 
> 时间：2012-05-02T20:41:25.143
> 
> 标签：java, junit, guice, mockito, jmock

我想知道我是否可以模拟超类构造函数调用及其 super() 调用。

例如，我有以下课程

```
class A
{
    A(..)
    {
        super(..)
    }
}   

class B extends A
{
    B(C c)
    {
        super(c)
    }
} 
```

所以，我打算对 B 类中的一些方法进行单元测试，但是在创建实例时，它确实调用了超类构造函数，这使得编写单元测试变得很困难。那么，我怎样才能模拟所有的超类构造函数调用。此外，我想模拟 A 类中的几个方法，以便它返回一些我需要的值。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:37:48.977

您可以使用 PowerMock 库。当你需要完成像你这样的事情时，它真的是一个救命稻草。 [https://github.com/powermock/powermock/wiki/Suppress-Unwanted-Behavior](https://github.com/powermock/powermock/wiki/Suppress-Unwanted-Behavior)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:53:07.300

模拟构造函数是一个非常糟糕的主意。*这样做是为了规避生产中将*发生的行为。这就是为什么在构造函数中做一些工作，比如启动线程和调用外部依赖，是一个[设计缺陷](http://misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/)。

您能否诚实地说在构造函数中执行的工作对您尝试测试的行为没有影响？如果答案是否定的，您将冒着编写将在测试环境中通过但在生产中失败的测试的风险。如果答案是肯定的，那么将“工作”移到构造函数之外是一个简单的案例。另一种选择是将您尝试测试的行为移动到另一个类（可能是它自己的）。

如果您使用像 Guice 这样的 DI 框架（我假设是因为您以这种方式标记它），则更是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:41:54.430

您的问题的简短回答是“不完全正确”。您不能“模拟”构造函数，更不用说超级了。对于我熟悉的模拟框架，模拟 super.anyMethod 也很困难或不可能。Powermock*确实*允许您抑制超级构造函数和有问题的方法，这与模拟它们并不完全相同，但可能会有所帮助。

当 B 扩展 A 时，它当然与 A 完全耦合。这*本身*不是问题，但它可以，而且看起来就在这里。不要让 B 扩展 A，而是尝试让 B 包含一个 A（如果需要，可能实现相同的接口）。然后你可以注入一个模拟 A 并委托所有你想要的调用。那会更容易进行单元测试，不是吗？

在测试期间在设计中发现这些东西是测试驱动开发的好处之一。

# java - 从Servlet中的JSP检索多个具有相同名称的文本框值

> ID：10421363
> 
> 赞同：4
> 
> 时间：2012-05-02T20:41:36.420
> 
> 标签：java, javascript, jsp, servlets

我正在尝试将具有相同名称的文本框的值从 JSP 传递到 servlet，但无法完成此任务。

我尝试在 servlet 中使用它，但我只得到一个文本框值：

```
String[] words = request.getParameterValues("words");
String[] meanings = request.getParameterValues("meaning"); 
```

我的有助于生成多个表行的 javascript 是：

```
<SCRIPT language="javascript">
        function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "checkbox";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            var element2 = document.createElement("input");
            element2.type = "text";

            cell2.appendChild(element2);

            var cell3 = row.insertCell(2);
            var element3 = document.createElement("input");
            element3.type = "text";
            cell3.appendChild(element3);

        }

        function deleteRow(tableID) {
            try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }

            }
            }catch(e) {
                alert(e);
            }
        }

    </SCRIPT> 
```

生成多行的 Html 表：-

```
</body>
<form name="managelist" action="../createlistpath" method="post">

    <TABLE id="dataTable" width="600px" border="0">
    <tr>
    <td><b> List Name</b></td>
    <td colspan="2"><input type="text" name="listname"></td>
    </tr>

    <tr >
        <td><b>Select</b></td>
        <td><b>Word</b></td>
        <td><b>Meaning</b></td>
    </tr>
        <TR >
            <TD><INPUT type="checkbox" name="checkbox"/></TD>
            <TD> <INPUT type="text" name="words" /> </TD>
            <TD> <INPUT type="text" name="meaning" /> </TD>
        </TR>
    </TABLE>

 <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

    <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />
<br>
<input type="submit" value = "submit" name="submit">

</form>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T20:59:27.987

如果你有这样的表格：

```
<form method="post">
    <input type="text" name="words"><br>
    <input type="text" name="words"><br>
    <input type="submit">
</form> 
```

如果您在文本框中输入*1*和*2*，则发送

```
words=one&words=two 
```

为了得到，

```
String[] words = request.getParameterValues("words"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T20:45:04.283

您不命名动态创建的输入元素（以“单词”或“含义”）

```
 var element2 = document.createElement("input");
        element2.name = "words";
        element2.type = "text";
        cell2.appendChild(element2); 
```

# php - 从 JavaScript 数组对象中的值中删除引号

> ID：10421369
> 
> 赞同：3
> 
> 时间：2012-05-02T20:42:07.267
> 
> 标签：php, javascript, json

我正在尝试正确格式化我的 JSON 编码数组。这是我的 PHP MySQL 查询：

```
$query = "SELECT date, value1, value2
            FROM testdata
            ORDER BY date ASC";  

         $result = mysql_query($query);
         $myChartData = array();
          while($row = mysql_fetch_assoc($result)){
            $myChartData[] = $row;
                        }

   <script type="text/javascript">
    var chartData = <?php echo json_encode($myChartData); ?>; 
```

在控制台中，该对象如下所示：

```
[Object { date="2011-02-23", value1="133034", value2="12105.78"},
 Object { date="2011-02-24", value1="122290", value2="12068.50"},
 Object { date="2011-03-08", value1="453142", value2="12214.38"}] 
```

日期周围的引号保留，但 value1 和 value2 上的引号需要去掉。

所有这些都是自学新手......感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:51:54.633

**第一的：**

> 日期周围的引号保留，但 value1 和 value2 上的引号需要去掉。

没有引号！您所看到的内容是 `chartData`. 在这种情况下，它是一个包含三个对象的数组，每个对象都有三个包含**字符串**的属性。
您想要的是将其中一些字符串转换为**数字**（整数、浮点）。

* * *

### 正确的方法

看来您没有将数据正确存储在数据库中。如果值是数字，它们将被编码。

唯一合理的解决方案是在此结束时修复它。这意味着您必须正确定义数据库字段的数据类型。

* * *

### 解决方法

如果由于某种原因您无法修复数据库（您应该非常努力），您可以将字符串转换为数字

*   在 PHP 中，使用[`intval` *^([docs])*](http://php.net/manual/en/function.intval.php)和/或[`floatval` *^([docs])*](http://php.net/manual/en/function.floatval.php)
*   或在 JavaScript 中使用[一元加号运算符*^([docs])*](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)：

    ```
    var number = +string; 
    ```

如果您是 JavaScript 新手，您可能需要先阅读[*使用对象* ^([MDN])](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:50:34.283

一个简单的javascript解决方案：

```
function formatChartData(data) {
    for(var i = 0, length = data.length; i < length; i++) {
        data[i].value1 = parseInt(data[i].value1, 10);
        data[i].value2 = parseFloat(data[i].value2);
    }
    return data;
}

var chartData = formatChartData(<?php echo json_encode($myChartData); ?>); 
```

# ios - 在哪里存储用户设置 iOS - App Store

> ID：10421373
> 
> 赞同：0
> 
> 时间：2012-05-02T20:42:32.053
> 
> 标签：ios, sqlite, app-store

在解决中心（App Store）的消息中，我收到了以下消息：“iOS 数据存储指南表明，只有用户使用您的应用程序创建的内容，例如文档、新文件、编辑等，才能被存储在 /Documents 目录中 - 并由 iCloud 备份。”。

在我的 iOS 应用程序中，我将“设置”存储在 SQLite 文件中。我只创建一次，并在用户需要进行这些更改时进行修改。该文件的大小约为 20kb，我将其存储在文档中（作为关键数据）。这样做是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:47:07.873

是的，这是正确的。如果您回复他们并告诉他们您在上面所说的内容，他们可能会允许您通过审核。只需明确说明它是用户创建/修改的，需要备份。

资料来源：这也发生在我们身上，我们挑战并被接受。

注意：如果您不想挑战设置，则可以将设置保存在 NSUserDefaults 中。

# facebook-graph-api - HowTo：发送应用程序请求，并在用户不接受应用程序的情况下从请求中获取数据（重定向到特定链接）？

> ID：10421376
> 
> 赞同：0
> 
> 时间：2012-05-02T20:42:38.513
> 
> 标签：facebook-graph-api, facebook-php-sdk

假设用户向他的朋友发送应用请求，此请求将针对 /my_app/catalog.php?ID=25

（不是索引页面）在应用程序请求中存储特定链接的唯一方法是使用请求的“数据”字段。

当用户关注应用程序请求时，它将最终出现在 index.php 上（不是 catalog.php?ID=25）

如何在不知道用户 ID 的情况下从请求中提取数据字段？（并且没有他接受该应用程序？）

我可以使用 [https://graph.facebook.com/oauth/access_token?client_id=](https://graph.facebook.com/oauth/access_token?client_id=) ".$GLOBALS['app_id']."&client_secret=".$GLOBALS['app_secret' ]."&grant_type=client_credentials

但是如果没有用户 ID 并且他接受该应用程序，就不可能获得“数据”字段，因此用户无法在我的应用程序中看到他的朋友推荐他的产品，而是看到身份验证表单并接受应用程序对话框而不知道什么这个应用程序是关于。

这不是一个正确的行为，对于我不了解的第一个用户必须在我的页面上看到一个链接，然后如果他想要执行操作或者我的应用程序需要用户信息的权限 - 只有在应该使用“接受对话框”时。

更新：我猜 Juicy 是对的，除了将其存储在您自己的数据库中或要求用户接受应用程序之外，没有其他方法可以获取应用程序请求 url

万一其他人在这里寻找这种解决方法是一些有用的东西：

```
//to deal with app requests: (this is part of overall page output preparation)
$rqlink="";
if((strlen($_REQUEST['request_ids'])>0)&&(strlen($user->id)>0))//user is logged no need for database
  {                                   
   if(($rq=getfbres("https://graph.facebook.com/?ids=".$_REQUEST['request_ids']."&access_token=".$_SESSION['access_token'] ))!==false)
     {
      $rqj = json_decode($rq);
      $request_ids = explode(',', $_REQUEST['request_ids']);
      foreach ($request_ids as $request_id)
       {
          $full_request_id=$request_id.'_'.$user->id;
          if(isset($rqj->$request_id->data)) $rqlink=$rqj->$request_id->data;
          //if(getfbres("https://graph.facebook.com/$full_request_id?method=delete&access_token=".$_SESSION['access_token'])===false)
          //{ echo "delete request error:". $GLOBALS['err']; exit;}
          break;
        } 
      }  
   }
elseif(strlen($_REQUEST['request_ids'])>0) //user is not logged, try to extract url from database
   {   
      $request_ids = explode(',', urldecode($_REQUEST['request_ids']));
      foreach ($request_ids as $request_id)
       {
         if(!isset($conn)){include_once "conn.php";  $conn=init_conn();}
         if(!($rez=mysql_query("select * from ff_app_rq where rq='".str_replace("'","''",$request_id)."'",$conn))) die ("Database error");
         if(mysql_num_rows($rez)>0)
         {
            $row=mysql_fetch_assoc($rez);
            $rqlink=$row['url'];
            mysql_free_result($rez);
            break;
         }
         else //request not found for some reason and user is not authorized
         {    //force pop-up authorization in order not to loose req_ids
            mysql_free_result($rez);
            echo("<script LANGUAGE='javascript'>window.open('/fblogin.php','_blank','width=900,height=450');</script>");
            break;
         }
        }
   }
 if(strlen($rqlink)>0)
     {
        session_write_close();
        echo("<script LANGUAGE='javascript'>document.location.href='".$rqlink."';</script>");
//        echo("<script LANGUAGE='javascript'>top.location.href='http".(getenv("HTTPS") == 'on'?"s":"")."://apps.facebook.com/".$GLOBALS['app_namespace']."/".$rqlink."';</script>");
        exit;
     } 
```

这就是你推广的方式：

```
 function fire_promo()
 {
   FB.init({appId:'<?php echo $GLOBALS['app_id'];?>',status:true,cookie:true,frictionlessRequests:true,oauth:true});
   //(this will display popup with list of fb friends)
   getpage('ajforms.php?ID=<?php echo $id;?>&stage=promote_app','subcontent,-100,10,560,500,2,zzz');
   return false;
 }
 function sendRequestToManyRecipients()
 {
   var f=document.send_inv; //(this form lists all checked users)
   var ids="";
   for(var z=0;z<f.length;z++) if(f[z].name=='p') if(f[z].checked) {if(ids.length>0) ids+=',';ids+=f[z].value;}
   FB.ui({method:'apprequests',data:'catalog.php?ID=<?php echo $id;?>',message:'You have been invited to bla-bla',to:"'"+ids+"'"}, requestCallback);
 } 
```

这是应用程序请求javascript回调：

```
 function requestCallback(response)
 {
   if(response === undefined) return;
   //if(response.request===undefined) return;
   var req = getconn(); if(req) {req.open("HEAD",'fb_req.php?rq='+response.request+'&url='+encodeURIComponent('catalog.php?ID=<?php echo $id;?>',true));req.send(null);}
   //console.log(response.request);
   if(response.to.length === undefined) {} else if(response.to.length>0) alert('You have successfully promoted to '+response.to.length+' friends.\nThank You!');
 } 
```

（getconn 是一个标准的 ajax 函数，用于初始化 ajax 通信）

这是用于记录应用请求的 fb_req.php：

```
<?php
if((strlen($_REQUEST['rq'])>0)&&(strlen($_REQUEST['url'])>0))
{
  include_once "conn.php";
  $conn=init_conn();
  $rez=mysql_query("insert into my_app_rq_table (rq,url,rq_date) VALUES('".str_replace("'","''",$_REQUEST['rq'])."','".str_replace("'","''",urldecode($_REQUEST['url']))."',now())",$conn);
  //if(!$rez) die ("Database error".mysql_error());
}
exit;
?> 
```

最后是 fblogin.php 用于弹出授权和刷新打开器窗口时：

```
<?php
session_start();
include_once "params.php";
$code = $_REQUEST["code"];
if(strlen($code)>2)
{
  $my_url = "http".(getenv("HTTPS")=='on'?"s":"")."://".getdom().((($_SERVER['SERVER_PORT']=="80")||($_SERVER['SERVER_PORT']=="443"))?(""):(":".$_SERVER['SERVER_PORT']))."/fblogin.php?fb_redirect_url=".urlencode($_REQUEST['fb_redirect_url']);
  $token_url = "https://graph.facebook.com/oauth/access_token?client_id=".$GLOBALS['app_id']."&redirect_uri=".urlencode($my_url)."&client_secret=".$GLOBALS['app_secret']."&code=".$code;
  $access_token = getfbres($token_url);
  $graph_url = "https://graph.facebook.com/me?".$access_token;
  $rr=strpos($access_token,"&");
  if($rr>0) $access_token=substr($access_token,0,$rr);
  $access_token=str_replace("access_token=","",$access_token);
  $user = json_decode(getfbres($graph_url));
  if(strlen($user->id)>0)
   {
    $_SESSION['access_token']=$access_token;
    if(strlen($_REQUEST['fb_redirect_url'])>0)
      echo "<SCRIPT LANGUAGE='javascript'>\nwindow.opener.location.href='".urldecode($_REQUEST['fb_redirect_url'])."';\nwindow.close();</script>";
    else
      echo "<SCRIPT LANGUAGE='javascript'>\nwindow.opener.location.reload(true);\nwindow.close();</script>";
    exit;
   }
}

if(strlen($_SESSION['access_token'])>2)
{
  $graph_url = "https://graph.facebook.com/me?access_token=".$_SESSION['access_token'];
  $user = json_decode(getfbres($graph_url));
  if(strlen($user->id)>0)
   {
    if(strlen($_REQUEST['fb_redirect_url'])>0)
      echo "<SCRIPT LANGUAGE='javascript'>\nwindow.opener.location.href='".urldecode($_REQUEST['fb_redirect_url'])."';\nwindow.close();</script>";
    else
      echo "<SCRIPT LANGUAGE='javascript'>\nwindow.opener.location.reload(true);\nwindow.close();</script>";
    exit;
   }
}
$my_url = "http".(getenv("HTTPS")=='on'?"s":"")."://".getdom().((($_SERVER['SERVER_PORT']=="80")||($_SERVER['SERVER_PORT']=="443"))?(""):(":".$_SERVER['SERVER_PORT']))."/fblogin.php?fb_redirect_url=".urlencode($_REQUEST['fb_redirect_url']);
$dialog_url = "http://www.facebook.com/dialog/oauth?client_id=".$GLOBALS['app_id']."&redirect_uri=".urlencode($my_url).$GLOBALS['app_scope'];
//echo "<h1>".$_SESSION['log_attempts']."</h1>";
$_SESSION['log_attempts']=intval("0".$_SESSION['log_attempts'])+1;
if(intval("0".$_SESSION['log_attempts'])<5)
  echo("<script>document.location.href='".$dialog_url."';</script>");
else echo "<center><br><br><br><h1>Facebook Login failed</h1><br>Please refresh web page and try again.</center>";
exit;

function getdom()
{
 return strtolower(str_replace("www.","",$_SERVER['SERVER_NAME']));
}

function getfbres($url)
{
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, $url);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($ch, CURLOPT_HEADER, 0);
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
 $output = curl_exec($ch);
 $info = curl_getinfo($ch);
 if(curl_error($ch)) $err=curl_error($ch); else $err="";
 curl_close($ch);
 //echo "<pre>info:<br>"; var_dump($info); echo "<br>output:<br>"; echo $output;  if (strlen($err)>0) echo "<br>error:<br>$err"; echo "</pre><br>";
 if ($output === false || $info['http_code'] != 200)
  {
   // $GLOBALS['err']=$output."\nhttp code:".$info['http_code']."\n".$err;
 //   echo "<pre>info:<br>"; var_dump($info); echo "<br>output:<br>"; echo $output;  if (strlen($err)>0) echo "<br>error:<br>$err"; echo "</pre><br>";
 //   exit;
    return false;
  }
return $output;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:35:16.117

如果`data`无法检索到事件（根据我使用`access_token`旧格式的应用程序的测试，这不应该是这种情况`APP_ID|APP_SECRET`），您可以轻松地保存此详细信息，链接到`id`您在将其发送给用户时获得的请求，然后根据您的数据发出重定向已经有。

# c# - 如何将 UI 自动化元素移动到不同的位置？

> ID：10421377
> 
> 赞同：1
> 
> 时间：2012-05-02T20:42:45.173
> 
> 标签：c#, .net, winapi, user-interface, ui-automation

我有一个 C#.NET 应用程序，我可以在其中使用 FromPoint 函数在特定点找到一个 AutomationElement。

现在我想操纵那个 AutomationElement 以便我可以将它移动到不同的位置，调整它的大小等。

对于移动和调整大小，我认为我可以使用 SetWindowPos Window API 函数，但这需要目标窗口的句柄（一个 IntPtr）。使用 AutomationElement 的“Current”属性，我可以读取它的 NativeWindowHandle(an int)。由于 Control 也是一个窗口，我将这个 int 值作为窗口句柄传递给 SetWindowPost 函数，希望它能完成我的工作。

但是代码不起作用。

请建议我一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:31:55.853

您要移动的元素类型是什么 - 顶级窗口或窗口中的项目？此外，这是一种用户可以使用鼠标或键盘移动的项目吗？UIAutomation 只应该允许您按照普通用户的操作来操作 UI - 例如，您不能使用它来移动对话框上的控件。

在 UIAutomation 中移动东西的官方方法是查看元素是否支持[Transform Pattern](http://msdn.microsoft.com/en-us/library/system.windows.automation.transformpattern.aspx)，然后使用 Move 或 Resize 方法适当地移动它。我认为这主要只在顶级窗口上实现，不确定它在其他控件上的实现范围有多大——您可以使用 UISpy/Inspect 来检查您的目标 UI。

如果元素是 HWND，您还可以获得 NativeWindowHandle 属性 - 这是底层 HWND，但您需要先将其转换为 IntPtr - 然后在 Win32 API 中使用它。但是，这仅适用于实际的 HWND 项目，不适用于列表视图中的项目。

# jquery - Jquery .on() 不适用于“e”

> ID：10421378
> 
> 赞同：2
> 
> 时间：2012-05-02T20:42:50.360
> 
> 标签：jquery

**在职的**

```
$('.newbubble').live('click', function(e){
    console.log('clicked');
}); 
```

**不工作**（这里我想得到 e.pageX 和 e.pageY）

```
$('.newbubble').on('click', function(e){
    console.log('clicked');
}); 
```

**再次在**没有“e”的情况下使用这个

```
$('.newbubble').on('click', function(){
    console.log('clicked');
}); 
```

谁能帮我解决这个问题，我怎样才能用**.on()获得 e.pageX**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T20:46:59.230

我想，`.newbubble`DOM 上不存在，所以你需要委托。

例如 ：

```
$('body').on('click', '.newbubble', function(e){
    // here
}); 
```

阅读[文档](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:47:54.403

尝试

```
$(document).on('click','.newbubble', function(e){
    console.log('clicked');
}); 
```

# jquery - 将日历 jquery 图像添加到 datepicker

> ID：10421379
> 
> 赞同：14
> 
> 时间：2012-05-02T20:43:03.470
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我不确定如何将`ui-icon ui-icon-calendar`类添加为文本字段旁边的日期选择器图像。我想要这样的东西：[http://jqueryui.com/demos/datepicker/#icon-trigger](http://jqueryui.com/demos/datepicker/#icon-trigger)，但它应该有 jquery 日历图像。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-02T20:51:34.283

```
<script>
        $(function() {
            $( "#datepicker" ).datepicker({
                showOn: "button",
                buttonImage: "http://jqueryui.com/resources/demos/datepicker/images/calendar.gif",
                buttonImageOnly: true
            });
        });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T20:47:37.160

如果单击链接到的示例下方的查看源代码按钮，您将看到如下内容：

```
$('#field').datepicker({        
    buttonImage: '/images/calendar_icon.png'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T05:12:57.093

通过这个我们可以从字段中清除给定的日期，尽管该字段是只读的。它应该是只读的，不能由用户给出，必须从 datepicker 中选择。

html:

```
$("#datepickerID").datepicker({          
    showOn: "button",
    buttonImage: "images/calendar.png",
    buttonImageOnly: true,
    buttonText: "Select date",
    minDate : 0,
    showButtonPanel: true,
    closeText: 'Clear',
    onClose: function () {
        var event = arguments.callee.caller.caller.arguments[0];
        // If "Clear" gets clicked, then really clear it
        if ($(event.delegateTarget).hasClass('ui-datepicker-close')) {
            $(this).val('');
        }
    }
}); 
```

# c# - RESTful (WebAPI) 服务中的非 CRUD 操作

> ID：10421380
> 
> 赞同：8
> 
> 时间：2012-05-02T20:43:07.483
> 
> 标签：c#, asp.net, wcf, asp.net-web-api

我通过将现有的 WCF 服务转换为 WebAPI 来学习 WebAPI（和一般的 REST）。在此过程中，我对处理非 CRUD 操作的最佳方式感到困惑。这是我的服务合同：

```
[ServiceContract]
public interface IProxyHelper
{
    [OperationContract]
    List<ProxyInfo> GetUsersCurrentUserCanActAsProxyFor(int positionId, int appId);

    [OperationContract]
    void DeleteProxy(int id);

    [OperationContract]
    List<ProxyInfo> GetProxyData(int appId);

    [OperationContract]
    bool CanPositionProxy(int positionId, int appId);

    [OperationContract]
    void AddProxy(
      string userRacf,
      string proxyAsRacf,
      int userPositionId,
      int proxyPositionId,
      string requestedByRacf,
      int appId);

    [OperationContract]
    int GetPositionIdByRacf(string racf);

    [OperationContract]
    string GetRacfByPositionId(int positionId);
} 
```

一些方法，如 DeleteProxy 和 AddProxy，我可以轻松地迁移到基于 CRUD 的方法。

问题出现在：

GetProxyData - 代理系统被多个应用程序使用，虽然我可以做 api/Proxy/1，但我觉得这是“作弊”，因为这应该是为了获取 ProxyId 1，而不是应用程序 1 的代理。

GetUsersCurrentUserCanActAsProxyFor - 这对我来说在多个层面上都令人困惑。我应该如何处理多个参数？而且它也没有完全落入 CRUD 方法中。

这是否意味着我应该放弃 WebAPI 转换？如果没有，我应该如何处理这些非标准方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:03:04.127

我认为您将 RESTful 服务与 CRUD 混淆了。两者并不相同，尽管很明显将 CRUD 转换为 REST 非常简单（资源和动词都有明确的映射）。

RESTful 架构的最大区别在于它是面向资源的。第二个是您利用传输 (HTTPs) 协议对这些资源采取行动——在 REST 的情况下是 GET、POST、PUT 和 DELETE。

转到您的示例，似乎您最大的麻烦是决定使用 URI 方案来支持此服务。我是否可以建议，对于分层信息，这应该是直截了当的。例如，应用程序代理：

`/application/<id>/proxies`

并且用户当前用户可以充当代理：

`/user/<id>/proxy-users`或者取决于你的风格`/user/<id>/proxy/users`

或类似的东西。你想到了关系和基础资源。许多 URI 可以指向同一个资源。

请注意，正如@dtb 在他的评论中提到的那样，URI 和/或（不太理想的）cookie 在每个请求中都包含所有需要的信息。所以`CurrentUser`有点hack。

随着转换的进行，您可能还会发现这个有趣的阅读：[RESTful 服务中的非 CRUD 操作](https://stackoverflow.com/questions/6850187/non-crud-operations-in-a-restful-service)

# wordpress - 在 Wordpress 中，有没有办法引用自定义帖子类型的自定义字段数据？

> ID：10421381
> 
> 赞同：0
> 
> 时间：2012-05-02T20:43:23.407
> 
> 标签：wordpress

在functions.php 文件中，有没有办法获取自定义帖子类型的自定义字段数据？我想知道根据传递的任何帖子 ID 的数据是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:37:26.910

```
<?php
$id = YOUR_POST_ID;
$meta = get_post_meta($id, 'custom_field_name', true);
echo $meta;
?> 
```

# c - 使用读写锁在 pthreads 哈希表中读取性能不佳

> ID：10421383
> 
> 赞同：2
> 
> 时间：2012-05-02T20:43:31.070
> 
> 标签：c, linux, locking, pthreads, hashtable

我整理了一个简单的键值存储，它使用[Redis](http://redis.io/)协议的一个子集。它在 Linux 上使用 pthreads 来共享哈希表；我使用 pthreads rwlocks 来管理对该表的访问。我一直在使用 Redis 基准测试工具测试 KV 存储。

使用单个客户端，我每秒可以执行大约 2500 次 SET 操作。但是，它每秒只能执行大约 25 次 GET；我期待相反的方式，所以这让我感到惊讶。它在一定程度上可以扩展，所以如果我向它扔 10 个客户端，我将每秒获得近 9000 个 SET 和大约 250 个 GET 每秒。

我的 GET 代码非常简单；我锁定表，找到适当的哈希表位置，并在那里检查链表中的匹配键。对于 GET，我在完成时使用`pthread_rwlock_rdlock`和`pthread_rwlock_unlock`。对于 SET，我使用`pthread_rwlock_wrlock`and `pthread_rwlock_unlock`。SET 比 GET 复杂得多。

我还使用共享内存进程和它们自己的读/写锁实现使代码在计划 9 上运行。在那里，GET 几乎和 SET 一样快，而不是慢 100 倍。这让我觉得我的哈希表代码可能没问题；我对两个操作系统使用完全相同的哈希表代码，我只是使用#defines 为每个操作系统选择适当的锁（两种情况下的接口都是相同的，幸运！）。

我对pthreads不是很有经验。谁能帮我弄清楚为什么我的表现如此糟糕？

（注意：这并不是一个高性能的 KV 存储，它是一个天真的编写的测试应用程序/基准测试。它以尽可能简单的方法处理请求，通过为每个客户端分离一个新线程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:56:09.230

I don't know rwlocks but the experience I made with conditional locks with pthreads was, that with a realtime kernel the conditions were woken up faster. You can even tune the programs priority with `chrt`command.

# php - 'session.gc-maxlifetime' 始终为默认值

> ID：10421387
> 
> 赞同：2
> 
> 时间：2012-05-02T20:44:02.583
> 
> 标签：php, session

我在延长会话寿命时遇到问题。

我试过

```
//start sessions
ini_set('session.gc-maxlifetime', 60*60*22); //22h
echo ini_get("session.gc_maxlifetime"); 
```

但是，回显显示“1440”.. 默认值。

我的 php.ini 会受到保护吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T20:48:31.843

指的`ini_set`是无效的 ini 设置 session.gc-maxlifetime，尝试更改为 session.gc_maxlifetime（注意连字符应该是下划线）：

```
ini_set('session.gc_maxlifetime', 60*60*22); //22h
echo ini_get("session.gc_maxlifetime"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T09:39:07.413

“session.gc_maxlifetime”的最大值是 65535。大于这个值可能会导致 php 会话停止工作。

# validation - TextField 的“内部”是什么

> ID：10421395
> 
> 赞同：1
> 
> 时间：2012-05-02T20:44:39.103
> 
> 标签：validation, javafx

我有以下**JavaFX**代码：

```
final TextField textField = new TextField(); 
```

并`EventHandler<ActionEvent>`检查 textField 是否为空。问题是`textField.getText() == null`或者`textField.getText() == ""`两者都返回**false**，但我没有在该字段中打印任何内容，所以它应该返回 true 。

```
 final TextField textField = new TextField();
browse.setOnAction(new EventHandler() {
    @Override
    public void handle(ActionEvent actionEvent) {
        FileChooser fileChooser = new FileChooser();
        File chFile = fileChooser.showOpenDialog(stage);
        if (chFile != null) {
            // some code
            if (textField.getText() != null && textField.getText() != "") {
                // some code
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T08:52:15.927

返回`textField.getText()`一个 java 。`String`Java`String`是一个`Object`所以你应该使用`equals()`方法而不是`==`比较字符串。`==`运算符用于比较 Java 中的原始类型。为了更好地理解这一点，请查看[如何在 Java 中比较字符串？](https://stackoverflow.com/q/513832/682495)Java中字符串比较的Q/A。
正如我所说，您可以使用它`textField.getText().equals("")`来检查字符串的空性，但它的常见用法是：

```
 if (textField.getText() != null && ! textField.getText().trim().isEmpty()) {
          // some code
     } 
```

`!`布尔 NOT 运算符在哪里。也不是`trim()`方法。这是为了检查用户是否只输入了空格，然后将它们视为空值。否则检查空格`equals("")`将失败。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-11T10:53:55.213

```
if(textfield.getText().trim().length>0)
//do Something
else
//can't be blank 
```

# c# - 有什么方法可以组合这个 C# 代码吗？

> ID：10421397
> 
> 赞同：0
> 
> 时间：2012-05-02T20:44:46.387
> 
> 标签：c#

我有以下代码。在我看来，有一种方法可以将它组合成一个语句，但我不知道该怎么做。

```
List<SelectListItem> items = new List<SelectListItem>();

var emptyItem = new SelectListItem(){
    Value = "",
    Text  = "00"
};

items.Add(emptyItem);

ViewBag.AccountIdList = new SelectList(items); 
```

有人可以告诉我是否可以简化这一点。

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T20:47:26.290

是的，您可以一起使用集合和对象初始值设定项来创建项目，将其添加到列表中，并将列表全部包装在一个语句中。

```
ViewBag.AccountIdList = new SelectList(
    new List<SelectListItem>
    {
         new SelectListItem
         {
            Value = "",
            Text = "00"
         }
    }); 
```

上面的缩进样式是我更喜欢将所有卷曲放在自己的一行上的方式，但如果你愿意，你甚至可以单行。

无论哪种方式，它都是一个单一的声明。

顺便说一句，由于你只是将 传递`List<SelectListItem>`给一个`SelectList`构造函数，它需要一个`IEnumerable`，你可以只传递一个 1 的数组而不是一个列表以获得更多的性能：

```
ViewBag.AccountIdList = new SelectList(
    new []
    {
         new SelectListItem
         {
            Value = "",
            Text = "00"
         }
    }); 
```

在这种情况下，两者的工作方式相同，后者效率更高，但两者都很好，取决于您喜欢哪种方式。[有关更多信息，我做了一篇简短的博客文章，比较了将单个项目作为`IEnumerable<T>`序列](http://blackrabbitcoder.net/archive/2011/12/08/c-fundamentals-returning-zero-or-one-item-as-ienumerablelttgt.aspx)返回的不同方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:47:51.833

```
ViewBag.AccountIdList = new SelectList(new List<SelectListItem> { new SelectListItem { Value = "", Text = "00"} }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T20:47:43.050

试试这个：

```
var items = new List<SelectListItem>()
{
   new SelectListItem { Value = "", Text = "00" }
}

ViewBag.AccountIdList = new SelectList(items); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:47:35.827

像这样的东西是你能得到的最接近的东西。

```
List<SelectListItem> items = new List<SelectListItem>();
items.Add(new SelectListItem(){
    Value = "",
    Text  = "00"
});
ViewBag.AccountIdList = new SelectList(items); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T20:48:43.770

IMO~~可读性~~较差，可测试...但您可以编写：

```
items.Add(new SelectedListItem(){
    Value = "",
    Text  = "00"
}); 
```

我不会在一个声明中推荐更多。该语句也可以重构为接受参数的方法`Value`and `Text`：

```
// now this is a unit testable method
SelectedListItem CreateSelectedItem (string value, string text) {
   return new SelectedListItem(){
        Value = value,
        Text  = text
    };
} 
```

现在您可以编写以下内容，这在简洁的同时非常清楚它的作用：

```
ViewBag.AccountIdList = new SelectList(items.Add(CreateSelectedItem("someValue", "someText")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T20:49:55.340

ViewBag.AccountIdList = new SelectList(List items = new List { new SelectListItem{Value="",Text="00"}});

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T20:52:41.150

```
ViewBag.AccountIdList = new List<SelectListItem>{new SelectListItem{Value = "", Text  = "00"}}; 
```

# c - 用C填充程序

> ID：10421398
> 
> 赞同：-1
> 
> 时间：2012-05-02T20:44:46.983
> 
> 标签：c

我正在尝试在 C 中创建一个程序，给定用户输入形状的字符边框，填充形状。

[http://pastebin.com/aax1dt0b](http://pastebin.com/aax1dt0b)

```
#include <stdio.h>
#include "simpio.h"
#include "genlib.h"

#define size 100

bool initArray(bool a[size][size]);
bool getshape(bool a[size][size]); /* Gets the input of the boarder of the shape from         the user */
void fill(int x, int y, bool a[size][size]); /* fills the shape */
void printarray(bool a[size][size]); /* prints the filled shape */

main()
{
    int x, y;
    char i;
    bool a[size][size];
    initArray(a);
    getshape(a);
    printf("Enter the coordinates of the point the shape should be filled.\n");
    printf("x=n\n"); /* gets the coordinates of the array to begin the fill algorithm from */
    x = GetInteger();
    printf("y=\n");
    y = GetInteger();
    fill(x, y, a);
    printarray(a);
    printf("Scroll up to view your filled shape\n");
    getchar();
}

bool initArray(bool a[size][size])
{
    int i, j;
    for (i = 0; i < 100; i++)
    {
        for (j = 0; j < 100; j++)
        {
            a[i][j] = FALSE;
        }
    }
}

bool getshape(bool a[size][size])
{
    int i, j, k;
    bool flag;
    char ch;
    ch = 1;
    printf("Enter your shape. When you are finished, type 'E'. \n");
    for (i = 0; i < 100; i++) 
    {
        flag = TRUE;
        for (j = 0; ch != 10; j++)
        {
            ch = getchar();
            if (ch == 69)
            {
                return a;
            }
            if (ch != 32) a[i][j] = TRUE;
        }

        ch = 1;
    }
}

void fill(int x, int y, bool a[size][size])
{
    if (a[y][x] != TRUE) a[y][x] = TRUE;
    if (a[y][x - 1] != TRUE) fill(x - 1, y, a);
    if (a[y - 1][x] != TRUE) fill(x, y - 1, a);
    if (a[y][x + 1] != TRUE) fill(x + 1, y, a);
    if (a[y + 1][x] != TRUE) fill(x, y + 1, a);
}

void printarray(bool a[size][size])
{
    int i, j;
    printf("\n\n\n");
    for (i = 0; i < 100; i++) 
    {
        for (j = 0; j < 100; j++)
        {
            if (a[i][j] == FALSE) printf(" ");
            if (a[i][j] == TRUE) printf("*");
        }
        printf("\n");
    }
} 
```

我的程序大部分都可以工作，但是当它打印填充的形状时，它会在每一行中添加一个额外的字符。例如，如果用户输入它

```
 ***
    * *
    *** 
```

然后输出将是

```
****
****
****  (one extra row then it should be) 
```

而它应该是

```
***
***
*** 
```

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:38:19.910

尽管您的代码中存在几个潜在问题，但我将仅确定第 4 列 * 的问题。在下面的代码中，尽管您正在签`ch!=10`入，但在终止循环之前已分配`for statement`了 的值。所以你可能想做.`a[i][j]``TRUE``if(ch!=32 && ch!=10) a[i][j]=TRUE;`

```
 flag=TRUE;
                     for(j=0;ch!=10;j++)
                     {
                                      ch=getchar();
                                      if(ch==69)
                                      {
                                                return a;
                                      }
                                      if(ch!=32) a[i][j]=TRUE;
                     }

                     ch=1; 
```

# winforms - 为什么我不能从我的项目中删除数据源？

> ID：10421399
> 
> 赞同：0
> 
> 时间：2012-05-02T20:44:49.007
> 
> 标签：winforms, entity-framework

因此，我正在使用 Windows 窗体使用现有数据库开始一个新项目。我正在尝试使用 Entity Framework 4，我执行的步骤如下：新建项目->Windows 窗体应用程序（用于我的前端应用程序）右键单击解决方案->添加->新建项目->类库（用于DAL) 现在我想将实体模型添加到 DAL，因此我右键单击该项目并完成在向导中添加实体模型的步骤。完成后，我有 .edmx 文件、添加的引用以及带有 .datasource 文件的 DataSources 文件夹。我不能删除这个。

如果我打算将对象数据源放在前端，为什么我需要 DAL 中的数据源？有 2 个项目每个都有相同的数据源似乎很有趣。我正在尝试按照本文中的步骤进行操作，当我从该文章中加载源代码（从 UI 层分离数据层）时，它仅在他的应用程序中显示数据源，而不是 DAL。

添加实体数据模型的一部分是否需要数据源？为什么我不能删除它并将其移动到我的应用程序项目中？

我刚刚在我的笔记本电脑上测试了相同的步骤，它按预期工作，只创建了 .edmx，它不会在属性中使用 .datasource 文件放入 datasources 文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:39:42.903

看来，如果您选择 Data->Show Data Sources VS 2010 会自动在项目下添加一个 datasources 文件夹，并且在关闭数据源窗口之前无法删除它

我等了 8 个小时才发布它:-(

# visual-c++ - 在 Windows Mobile 6.5.3 Professional DTK(ARMV4I) 上使用 Dolphin 99EX 拍照

> ID：10421402
> 
> 赞同：0
> 
> 时间：2012-05-02T20:44:51.413
> 
> 标签：visual-c++, windows-mobile, windows-mobile-6.5

我的问题是下一个：
我有一个为 Windows Mobile 6.5.3 Professional DTK(ARMV4I) 开发的应用程序，它在 Honeywell Dolphin 99EX 上运行。
基本上我使用霍尼韦尔的 API 来拍照：CameraAPI.h。
问题在于相机初始化。
在工作项目中，每次我调用 camInit 函数时，它都会返回 RESULT_ERR_NOTCONNECTED。
如果我正在创建一个测试项目并尝试同样的事情它正在工作。

根据我在 camInit 调用的调试控制台中看到的内容：

1\. 正在工作的测试项目加载：
加载模块：quartz.dll.0409.MUI
加载模块：MMTimer.dll
加载模块：quartz.dll
加载模块：msdmo.dll
加载模块：wmvdmoe.dll
加载模块：icm.dll
加载模块：msrle32.dll
卸载模块：msrle32.dll
卸载模块：icm.dll
加载模块：DDRAW.dll

之后 camInit 返回 0。

2\. 不工作的工作项目加载：
加载模块：quartz.dll.0409.MUI
加载模块：MMTimer.dll
加载模块：quartz.dll

之后 camInit 返回 RESULT_ERR_NOTCONNECTED。

它仅从正常工作流程加载前 3 个 dll。
你知道为什么工作项目停止加载其余的 dll 吗？
或者您知道解决问题的方法吗？

谢谢霍雷亚
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:28:33.907

在 99EX 上，摄像头和解码器使用相同的硬件总线，不能同时初始化和连接。在调用 camInit() 之前，调用 decDisconnect() (c++) 或 DecodeAssembly.Disconnect() (c#)。

# python - 我的 Django 应用程序中请求的 URL 可以无限增长，并且仍然由 Django URLResolvers 匹配

> ID：10421408
> 
> 赞同：-1
> 
> 时间：2012-05-02T20:45:14.003
> 
> 标签：python, django, urlconf

我有以下行`src/urls.py`

```
(r'^nomundo', include('interviews.urls')), 
```

在我的`src/interviews/urls.py`我有以下内容：

```
r'/$', 'interviews.views.interviews'), 
```

这种结构允许我访问 URL，例如`/nomundo/blablabla/trololo/foo/bar`，或任何其他`/something`我想要的 URL。

我希望这些引发 404 错误。

我怎样才能指定我的正则表达式这样做？或者解决方案是别的？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:09:32.823

您忘记根您的子 URL，以便它从字符串的开头开始。

```
(r'^$', 'interviews.views.interviews') 
```

请注意，您通常在父 url 中包含初始斜杠，这就是我没有在上面包含它的原因：

```
(r'^nomundo/', include('interviews.urls')), 
```

# html - CSS背景颜色

> ID：10421410
> 
> 赞同：0
> 
> 时间：2012-05-02T20:45:30.690
> 
> 标签：html, css

我的 CSS 文件包含我的网页显示，网页比屏幕小（如果你知道我的意思）我试图用背景颜色填充容器的外部，但它不起作用。有人可以帮忙吗？这是我的 CSS

```
 #container  {
    width: 900px;
    margin: 0 auto;
    } 
```

正文/导航等位于#container 下方，背景颜色必须在容器之前吗？我把它放在那里，它不工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:47:14.830

可以涂在身上吗？

```
body {
  background-color:red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:56:49.893

css中的body{}指的是网站的完整<body>。只需在此处设置背景颜色，例如：

```
body {background-color: #fedae3;} 
```

当然，容器需要另一种背景颜色。

# git - 用户友好的 Git 修订号？

> ID：10421411
> 
> 赞同：1
> 
> 时间：2012-05-02T20:45:37.523
> 
> 标签：git, google-code

我正在将 Git 用于 Google Code 上的编码项目。

我如何使修订号变得有意义，例如`Alpha v1.0`或`r86`代替`d68838463ecf`或其他类似的混乱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T20:47:03.017

所有 git 提交都被赋予一个加密安全的 sha1 标签，就像你粘贴的那个标签一样。如果您要标记特定提交，则应使用 git tag 并使用您选择的任何标签标记提交。

```
git tag "Release 1.0" 1f42f25b0e 
```

因为 git 是分布式的，所以它没有办法使用同步提交号（如 SVN），而所有发行版都必须相互通信。此外，需要足够长的字符串以数学方式确保提交名称的唯一性。这就是为什么使用 sha1 作为提交的唯一名称，但您可以通过顶部的标签进行标记。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T22:54:09.267

如前所述，没有办法使用 Git 来增加“漂亮”的修订号。如果你想要那个和 DVCS，请转向[Mercurial](http://mercurial.selenic.com/)。但是，请注意，Mercurial 递增修订只是一种本地方便表示法。

至于 git，它不应该影响您的版本编号方案。您可以创建自己的版本号方案，希望它是理智的，并相应地标记提交。例如，当您达到 1.0 版时，标记提交：

```
$ git tag -a v1.0 
```

这会将带注释的标签应用于当前`HEAD`分支。为此，您应该始终使用带注释的标签，除非您知道自己在做什么。

这将创建标签，现在`git describe`将告诉您：

```
$ git describe
v1.0 
```

现在，事情变得有趣的是，如果您提交了其他内容并且不再指向标签。然后，`git describe`仍然有用：

```
$ git describe
v1.0-1-g9f52f48 
```

现在，`git describe`将为您提供一个更友好的唯一标识符，用于标签之间的中间提交。上面的符号表示最近的标记、超出它的提交数以及所描述的实际提交的短哈希。

因此，使用`git describe`和注释标记是始终为 git 提供唯一版本号的简单方法，类似于使用 subversion 的修订作为构建标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:49:49.957

你可以使用 git-tag 来做到这一点。

`git tag yourTag1.0 ed851a...<-The second param is the commit hash you want to tag`

要查看标签，您可以执行以下操作

`git log --decorate`

你可能会得到类似下面的东西

```
commit ed851a7107f457935b0c6f75c4458116024a37e2 (HEAD, tag: myTag1.8, master)
Author: Jerry test <Jerry.test@test.com>
Date:   Wed May 2 16:47:11 2012 -0400

    testing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:51:36.507

由于 Git 修订 ID 是十六进制的，因此您可以将其转换为十进制数（您的示例将解析为 235880548024015），然后将其模数为您可以在 ver.sub.rev.build 版本控制方案中使用的内部版本号。但是，正如 Ben 所说，这是一个 SHA1 哈希；因此，它会受到“雪崩效应”的影响，即输入的微小变化会对输出产生巨大的变化。因此，从修订版生成的内部版本号不会是连续的。

# asp.net - 数据网格和多绑定

> ID：10421414
> 
> 赞同：0
> 
> 时间：2012-05-02T20:45:41.757
> 
> 标签：asp.net

我是 ASP.NET 的新手，正在努力在 GridView 中显示数据。我在这个论坛的帮助下得到了大部分工作。目前我正在尝试从数据库中的 ID 和“文件扩展名”构建文件名，但被卡住了。我想我需要使用 MultiBind 才能使其正常工作？我的文件名是 ID + "_tn" + 文件扩展名，这是我的代码。

```
 <asp:GridView ID="HitGridView" runat="server" onrowdatabound="HitsRowBid">
                <Columns>
                <asp:TemplateField HeaderText="Street">
                    <ItemTemplate>
                        <asp:TextBox ID="Adress" runat="server" width="200" Text='<%# Bind("StreetName") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Image">
                    <ItemTemplate>
                        <asp:ImageButton ID="defaultImg" runat="server" ImageUrl='<%# Bind("ImgId") %>'/>
                    </ItemTemplate>
                </asp:TemplateField>
                </Columns>
            </asp:GridView> 
```

在后面的代码中

```
protected void HitsRowBid(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        ImageButton imgBtn = (ImageButton)e.Row.FindControl("defaultImg");
        imgBtn.ImageUrl = "Content/FileUpload/" + imgBtn.ImageUrl + "_tn" + ".jpg";
    }
} 
```

但是如何获取存储在数据库中的文件扩展名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:06:01.457

我主要使用 ListViews，但有几种方法可以实现这一点。一种方法是在数据绑定时使用 DataKeys 并通过使用 onrowdatabound 事件中的行索引来检索值。另一种选择是在代码隐藏中编写一个辅助方法并在数据绑定期间调用它，例如：

```
protected string FormatImagePath(string fileName)
{
    string imagePath = Request.ApplicationPath.TrimEnd('/') + "/previews/" + fileName;
    FileInfo testFile = new FileInfo(Helpers.BaseSiteFilePath + @"previews\\" + fileName);
    if (!testFile.Exists)
    {
        imagePath = Request.ApplicationPath.TrimEnd('/') + "/images/no_preview.png";
    }
    return imagePath;
} 
```

像这样称呼它：

```
ImageUrl='<%# FormatImagePath(Eval("PreviewURL").ToString()) %>' 
```

# visual-studio-lightswitch - 创建一个可以在 Lightswitch 应用程序中编辑和添加记录的屏幕

> ID：10421417
> 
> 赞同：0
> 
> 时间：2012-05-02T20:45:57.087
> 
> 标签：visual-studio-lightswitch, visual-studio-2012, beta

我按照 Microsoft 的本教程进行操作，效果非常好，直到我升级到 Beta 2。

[http://msdn.microsoft.com/en-us/lightswitch/Video/ff945359](http://msdn.microsoft.com/en-us/lightswitch/Video/ff945359)

这就是当使用未填充数据的所谓“数据项”时，它会产生异常。

所以问题是：有没有人使用新屏幕也使用它进行编辑并且遇到了这个问题，你是如何解决这个问题的？

可能的场景：

*   开始一个新的 Beta 2 项目并创建单独的新屏幕和编辑屏幕（意味着双重工作）
*   通过将（未在新模式中使用）数据项与现有记录绑定来以某种方式找到修复（这将是一个丑陋的修复）
*   寻找另一种方法来创建新/编辑屏幕。
*   选项 4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:46:12.620

我使用了 Beth 原始代码的修改版本（首先在 B2 中，然后是 RTM，并且我很确定它在 V2 Beta 中有效），因为有时会出现一个错误（但我不记得在什么条件下更多，因为我已经使用我的代码很长一段时间了）。

Beth 提供的第一个代码使用了“编辑数据”屏幕（但可能是 B1？），然后她发布了一个使用“添加新数据”屏幕的更新版本（您指向的视频是 B2） .

如果你还没有设法让它工作，我可以指出我使用的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:12:19.823

我使用以下逻辑打开同一屏幕以进行编辑或添加记录：

```
partial void CreateNewOrEditJob_InitializeDataWorkspace(List<IDataService> saveChangesTo)
        {
            Job selectedJob;

            if (SelectedJobId.HasValue)
            {
                int selectedId = (int)SelectedJobId;
                selectedJob = DataWorkspace.ApplicationData.Jobs.Where(j => j.Id.Equals(selectedId)).FirstOrDefault();
            }
            else
            {
                selectedJob = new Job();
            }
            this.JobProperty = selectedJob;
    } 
```

上面的示例用于用于编辑现有“工作”实体或创建新实体的屏幕。“SelectedJobId”是屏幕的本地属性，Is Parameter 设置为 true，Is Required 设置为 false。

* * *

*归功于 Paul Patterson Quercus Solutions Inc (MVP)*

# php - 提交表单后，获取另一个表的条目ID

> ID：10421420
> 
> 赞同：0
> 
> 时间：2012-05-02T20:46:08.637
> 
> 标签：php, mysql, forms

我当前的表单将数据提交到两个不同的表，我希望一个表中的 auto_incremented 值也存储在第二个表中。

```
<form method="POST" action="addcocktail.php" >
                    Cocktail Name: <input type="text" name="cocktailname" /> 
                    How To: <input type="text" name="howto" /> 
                    <br> 
                    <select id="selectingred1" name="selectingred1">
                      <?php
                      $sql = "SELECT ingredientID, name FROM tblIngredient ".
                      "ORDER BY name";

                      $rs = mysql_query($sql);

                      while($row = mysql_fetch_array($rs))
                      {
                        echo "<option value=\"".$row['ingredientID']."\">".$row['name']."</option>\n  ";
                      }
                      ?>
                    </select>
                    <select id="quantity1" name="quantity1">
                      <option></option>
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                    </select>
                    <br>
<input type="submit" value="add" />
                </form> 
```

addcocktail.php：

```
 <?php include("databasecon.php"); ?>

<?php
mysql_select_db("mwheywood", $con);

//insert cocktail details
$sql="INSERT INTO tblCocktail (name, howto)
VALUES
('$_POST[cocktailname]','$_POST[howto]')";

$sql2="INSERT INTO tblRecipe (ingredientID, quantity)
VALUES
('$_POST[selectingred1]','$_POST[quantity1]'),
('$_POST[selectingred2]','$_POST[quantity2]'),
('$_POST[selectingred3]','$_POST[quantity3]'),
('$_POST[selectingred4]','$_POST[quantity4]')";

if (!mysql_query($sql,$con))
  {
  die('Error: you fail at life' . mysql_error());
  }
echo "cocktail added";

if (!mysql_query($sql2,$con))
  {
  die('Error: you fail at life' . mysql_error());
  }
echo "ingredients added";

mysql_close($con);

?> 
```

简单地说，当我提交表单时。我希望发布数据的“鸡尾酒ID”到“tblCocktail”也保存到“tblRecipe”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:49:27.403

执行插入查询后，如果成功，则可以通过[mysql_insert_id()](http://php.net/manual/en/function.mysql-insert-id.php)函数获取插入 ID。

# wpf - 用户控件停靠到底部

> ID：10421422
> 
> 赞同：0
> 
> 时间：2012-05-02T20:46:13.113
> 
> 标签：wpf

我遇到了停靠面板没有将我的用户控件停靠在底部的问题。谁能帮我弄清楚为什么这没有停靠在底部？

```
 <StackPanel>
<DockPanel Name="dockPanel" HorizontalAlignment="Stretch">
            <StackPanel DockPanel.Dock="Bottom" HorizontalAlignment="Stretch">
                <uc:UserControl HorizontalAlignment="Stretch" Margin="0,30,0,0" Background="White" Width="Auto" Height="Auto" />
            </StackPanel>
        </DockPanel>
    </StackPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:53:04.373

将`StackPanel`包裹您的内容替换为`DockPanel`a`Grid`或将您的内容移至表单`DockPanel` 的主要`Grid`部分。

# ms-office - Oracle Form 6i 打开word文档

> ID：10421423
> 
> 赞同：0
> 
> 时间：2012-05-02T20:46:18.340
> 
> 标签：ms-office, ole, oracleforms

我们有一个由其他人在 Oracle Forms 6i 中构建的程序。表单中有一个功能，当单击按钮时，表单会调用打开一个MS Word模板并将数据库中的数据放入模板中。现在我们迁移到 Windows 7 和 Office 10，Oracle Forms 不再在 MS Words 中打开模板。没有错误...这是用于启动 MS Words 的代码：

```
procedure fileopen (fname in varchar2) is
  arglist ole2.list_type;
begin  
   obj_hnd := ole2.create_obj ('Word.Basic');

  arglist := ole2.create_arglist;
  ole2.add_arg (arglist, fname);
  ole2.invoke (obj_hnd, 'fileopen', arglist);
  ole2.invoke(obj_hnd, 'AppShow');
  ole2.destroy_arglist (arglist);
end; 
```

有谁知道为什么 MS 字没有启动？我应该研究什么来解决问题？在带有 MS Words 2003 的 Windows XP 下运行表单时没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:10:22.750

我看到您在代码中使用 Word.Basic。

我认为您应该改用 Word.Application 。

# continuous-integration - 即使构建步骤失败，如何继续 Jenkins 构建？

> ID：10421424
> 
> 赞同：3
> 
> 时间：2012-05-02T20:46:23.190
> 
> 标签：continuous-integration, build-process, jenkins, phing

我正在使用 Jenkins 的 Phing 构建脚本，并希望在作业中端到端运行它并捕获所有报告。问题是它停止构建失败的构建步骤。有没有办法或插件即使在失败时也能继续工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:50:25.337

I don't know a lot about Phing but, since it's based on Ant, if the build step you are executing has a "failonerror" attribute you should be able to set it to false so that the entire build doesn't fail if the step returns an error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-02T09:15:42.630

是的，在你的管道脚本中使用 try, catch 块

例子：

```
try {
    // do some stuff that potentially fails
} catch (error) {
    // do stuff if try fails
} finally {
    // when you need some clean up to do
} 
```

或者，如果您使用 sh 命令运行这些测试，请考虑使用“|| true”后缀运行 sh 脚本，这会告诉 linux sh 脚本以结果代码 0 退出，即使您的实际命令以 exit 退出代码。

例子：

```
stage('Test') {
    def testScript = ""
    def testProjects = findFiles(glob: 'test/**/project.json')

    if (!fileExists('reports/xml')) {
        if (!fileExists('reports')) {
            sh "mkdir reports"
        }
        sh "mkdir reports/xml"
    }

    for(prj in testProjects) {
        println "Test project located, running tests: " + prj.path
        def matcher = prj.path =~ 'test\\/(.+)\\/project.json'

        testScript += "dotnet test --no-build '${prj.path}' -xml 'reports/xml/${matcher[0][1]}.Results.xml' || true\n"
    }

    sh testScript 
```

# ravendb - RavenDB 本身的数据变化

> ID：10421425
> 
> 赞同：0
> 
> 时间：2012-05-02T20:46:23.533
> 
> 标签：ravendb

我已经建立了一个 RavenDB 进行评估。我写了一些代码，将一些文档推入其中。然后我有一个呈现这些文档的网站。

一整天，我都在使用 Raven Studio 修改这些文档中的一些文本，这样我就可以在我的网站上看到所做的更改。

问题：晚上回家后，当我第二天回来时，我的数据库似乎发​​生了变化——我的文档已经恢复到“更改前”的版本……这是怎么回事？？我查看了 Raven 控制台输出，一夜之间我的开发人员机器上没有发出更新命令（我也不希望有！！）

注意：这只是在我的开发机器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:35:04.183

据我所知，RavenDB 中没有可以自动撤消已提交的写入操作的代码，老实说，这真的会吓到我。总而言之，这听起来真的很奇怪，我想不出这种情况实际上会发生的情况。如果再次发生，我建议您将日志文件发送给 ravendb 支持，因为这将是一个*非常*严重的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:58:01.120

我的同事在恢复更新时遇到了这个问题。我们所做的更新是为所有文档添加一个属性，然后还为该属性添加一个文档特定值。我们调用了 SaveConfiguration() 并看到在 Raven Studio 中进行了更改。过了一会儿，一些文件丢失了它的新财产。

我决定打开日志记录，因此添加了一个 NLog.config 文件，为了开始日志记录，我触摸了 web.config。这当然会重新启动应用程序，并且“瞧”，更新再次出现在 Raven Studio 中。

过了一段时间，他们从 Raven Studio 消失了，所以我认为这是工作室的问题。因此，我尝试在测试控制器中从数据库中检索对象，不幸的是，这些对象在这里也缺少属性值，所以这不仅仅是工作室的问题。

打开日志后，我们再次更新了特定类型的文档，根据日志和工作室，我们实际上更新了文档。此后不久，文件又因失去附加财产而恢复原状（我的同事此时开始哭泣——真实的故事）..

后来我意识到这都是因为我们的实时 Web 应用程序仍然有旧版本的对象。在 Web 应用程序中读取数据时，返回的数据没有额外的属性。正因为如此，我们的 DocumentSession 似乎认为对象已经改变（公平地说），所以当我们调用 SaveChanges 时，即使这些对象也被写入数据库 - 没有它的额外属性。

我的结论正确吗？这个问题的解决方案是什么？我在考虑 CQRS，因为这样我们就永远不会在 DocumentSession 上调用“SaveChanges()”进行读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:17:44.913

亚当，请确保您在进行修改后是否调用了 SaveChanges()？

RavenDB 中绝对没有任何东西会导致这种行为。

# php - 在php中调用具有多个参数的函数

> ID：10421427
> 
> 赞同：2
> 
> 时间：2012-05-02T20:46:44.933
> 
> 标签：php, wordpress

我定义了一个php函数：

```
function my_function($text = '', $relative = false, $icon = true) {
//do something
} 
```

它使用默认值按预期工作。但是当我想改变一个变量的值时它不起作用：

```
my_function($icon = false); // this doesn't change anything 
```

我必须用所有变量调用它才能使更改生效：

```
my_function($text = '', $relative = false, $icon = false); // this changes the output 
```

我正在使用 php 5.4.1 和 Wordpress。我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:16:21.537

您**必须**在要更改的参数的左侧（在函数签名中）提供任何默认参数的值。

所以给定函数：

```
function my_function($text = '', $relative = false, $icon = true) {
//do something
} 
```

这里有些例子：

```
// $text = "foo", $relative = false, $icon = true
my_function("foo"); 

// $text = "", $relative = true, $icon = true
my_function("", true) 

// $text = "", $relative = false, $icon = false
my_function("", false, false) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:02:11.863

```
my_function($icon = false); 
```

你不能在 PHP 中做到这一点。嗯，你可以，但它不会做你认为它做的事情。这是做什么的：

1.  设置`$icon`为`false`
2.  `false`作为第一个参数传递给`my_function`

如果要更改第三个参数，还需要传递前两个。

```
my_function('', false, true); 
```

注意：我认为是 python 可以让你调用这样的函数，只设置 Xth 参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T20:50:19.923

没有错，这就是 PHP 的工作方式。当你调用一个函数时，你不应该把变量放在参数列表中，因为你可能会得到不想要的结果，因为变量将被赋予这些值。所以，这很好：

```
my_function('', false, false); 
```

或者：

```
my_function($text, $relative, $icon); 
```

或介于两者之间的任何东西，无需分配值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T21:12:17.823

您可以使用以下代码：

```
<?php

function my_function($arg = array("text"=>'Default',"relative"=>false,"icon"=>false))
{
  extract($arg);
      $text = isset($text)?$text:"";
      $relative = isset($relative)? $relative : false;
      $icon = isset($icon)? $icon : false;

      //do something

}

my_function(array("icon"=>true));

?> 
```

**警告：**如果您使用这种方式。您应该初始化变量或检查它是否存在。

# git - 从私有 Git 存储库推/拉的 Bash 脚本？

> ID：10421430
> 
> 赞同：7
> 
> 时间：2012-05-02T20:46:56.213
> 
> 标签：git, bash, github, git-bash

我正在尝试找到一种方法来编写一个 bash 脚本，该脚本将在每个午夜自动从我们的 Private Github 存储库中提取并更新我们的开发站点。

由于显而易见的原因，我们的仓库是私有的，而且我发现的任何接近的东西总是要求输入密码。我们的服务器有它自己的 Github 帐户，用于从存储库中推送和拉取，但我只是不知道如何自动执行此操作。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T22:31:34.597

为了自动化您的推/拉，您需要设置无密码身份验证。为此，您使用 ssh（而不是 https）。如果您之前没有在 github 上使用过 ssh，或者根本没有使用过 ssh，那么您需要执行几个步骤来配置。

在您的机器上，生成一个 ssh 密钥：

```
$ ssh-keygen -t rsa 
```

确保将密码短语字段留空。这使得本地私钥未加密，但对于通过 Internet 进行的实际通信来说同样安全。

`~/.ssh/id_rsa.pub`然后，在 Account Settings | 下上传到 github SSH 密钥

现在你应该可以在没有密码的情况下从那台机器上推拉。试试看：

```
git clone git@github.com:user/repo.git 
```

然后，您可以根据需要将这些命令放入您的 bash 脚本中。如果您需要对多台机器执行此操作，则需要上传每个密钥，或将私钥 ( `~/.ssh/id_rsa`) 复制到每台机器。

有关更多信息，请参阅 github[帮助](http://help.github.com/linux-set-up-git/)。另请查看[部署密钥](http://help.github.com/deploy-keys/)页面，因为这可能会为您的情况提供更好的安全粒度。

# c# - 字典 - 添加评论以驱动智能感知

> ID：10421433
> 
> 赞同：6
> 
> 时间：2012-05-02T20:47:03.067
> 
> 标签：c#, dictionary, intellisense

有没有办法添加注释来记录 Dictionary 或 ConcurrentDictionary 以了解键/值的含义？

例如：

```
Dictionary<guid, string> _users; 
```

这个例子有一个用户字典。guid 是 UserId，字符串是用户名，但除了“知道”之外，很难分辨。

有没有办法添加文档，以便在添加项目时，智能感知告诉开发人员有关键和值的注释？

我知道我可以在`<summary>`它上面添加一条评论，并将该注释放在对象本身中，但在添加、删除等时正在寻找。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:09:51.063

最近在 GOOS 书中，我发现了将常用类型（如集合）打包到自己的类中的有趣想法：

> 尝试使用您正在处理的问题的语言，而不是 .Net 结构的语言。它减少了域和代码之间的概念差距。还尝试限制使用泛型传递类型。这是一种复制形式。这暗示了应该提取到类型的域概念。

坦率地说，我在打包常见的泛型集合方面并没有那么极端，但即使给类型自己的名字也会让它更容易阅读和理解：

```
public class UserNameDictionary : Dictionary<int, string>
{
} 
```

很简单。现在最好读一下：

```
Dictionary<int, string> users = new Dictionary<int, string>();
UserNameDictionary users = new UserNameDictionary(); 
```

您还可以快速向您的班级添加评论：

```
/// <summary>
/// Represents a dictionary of user names accessed by ids.
/// </summary> 
```

这不会给 Add(int, string) 这样的方法添加注释，但是当其他人使用这个类时，他们会在上下文中思考`UserNameDictionary`，而不是在抽象`Dictionary<int, string>`上下文中思考。

如果你想让你的类更方便，你可以隐藏基类方法：

```
public new void Add(int userId, string userName)
{
    base.Add(userId, userName);
} 
```

对于更复杂的用例，我会使用将工作委托给内部字典的自定义类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T23:11:10.063

对于您的具体情况，简短的回答是“不是没有一堆样板代码”。

可以修饰方法以记录类型参数的含义。下面将按照您的预期显示参数在 Intellisense 中的含义。

```
/// <summary>
/// Class to contain things
/// </summary>
/// <typeparam name="T">UserID</typeparam>
/// <typeparam name="TK">UserName</typeparam>
public class MyDictionary<T,TK> : Dictionary<T,TK> 
```

您可以使用它来覆盖虚拟方法并以相同的方式记录它们。但是 Dictionary<,> 基本上没有虚拟，因此您需要创建自己的调用然后调用“base”。（忽略有问题的“新”）。

但是到那时，您应该继续：

```
public class MyDictionary : Dictionary<string,string> 
```

并完成它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T21:04:46.720

您可以将字典子类化，覆盖各种添加/删除方法来放置您自己的评论。另一种选择是创建您自己的集合类，该类包含一个内部字典并实现 IDictionary（如有必要）。除此之外，我不确定视觉工作室功能/技巧可以用来做你想做的事，但我不是这方面的专家。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-17T20:48:17.560

一个比 Sergey 的解决方案需要更少开销但实现相同的解决方案是

```
using UserNameDictionary = Dictionary<int, string>; 
```

# bash - bash别名中的变量插值

> ID：10421436
> 
> 赞同：2
> 
> 时间：2012-05-02T20:47:09.620
> 
> 标签：bash

我有别名： alias asd='myvar=$1 echo \"Hey $myvar Bye\"'

但是当我运行命令 asd 44 时，我得到输出“Hey Bye”44。有人可以解释为什么最后运行 echo 以及如何获得“Hey 44 Bye”的预期结果

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T20:50:04.453

[别名不做位置扩展；改用函数。](http://mywiki.wooledge.org/BashFAQ/080)

# sql-server - TSQL 查询以查找未使用的存储过程

> ID：10421439
> 
> 赞同：20
> 
> 时间：2012-05-02T20:47:18.877
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我正在尝试跟踪数据库中从未使用过或几个月未使用过的所有存储过程。

我想找到一个查询来显示所有未使用的存储过程，以便可以分析这些存储过程以确定是否可以删除它们。

我熟悉 sys.procedures，但不知道如何确定某个程序是否正在使用中。

```
SELECT *
FROM sys.procedures; 
```

使用 SQL Server 2008 R2。

**更新更新更新**

使用下面 Aaron Bertrand 的查询，稍作修改，这就是我最终使用的，它是完美的。

```
SELECT p.*
  FROM sys.procedures AS p
  LEFT JOIN sys.dm_exec_procedure_stats AS s ON s.[object_id] = p.[object_id]
 WHERE s.object_id IS NULL; 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-02T20:51:36.713

DMVs will record stats for procedures, but they only possibly go as far back as the last restart (and often not that far, depending on how long a plan lives in cache):

```
SELECT * FROM sys.dm_exec_procedure_stats AS s
INNER JOIN sys.procedures AS p
ON s.[object_id] = p.[object_id]
ORDER BY p.name; 
```

So if your system has only been up for a short time, this is not a reliable measure. The link @Siva points out is useful as well for some other ideas. Unfortunately SQL Server doesn't really track this for you overall so unless you add tracing or logging you are stuck with the trust you place in the DMV...

**EDIT** it was a good point, I was solving for the procedures that *have* run. Instead you may want this:

```
SELECT sc.name, p.name 
FROM sys.procedures AS p
INNER JOIN sys.schemas AS sc
  ON p.[schema_id] = sc.[schema_id]
LEFT OUTER JOIN sys.dm_exec_procedure_stats AS st
  ON p.[object_id] = st.[object_id]
WHERE st.[object_id] IS NULL
ORDER BY p.name; 
```

Or you may want to also include procedures that have run as well, but order them by when they last ran:

```
SELECT sc.name, p.name 
FROM sys.procedures AS p
INNER JOIN sys.schemas AS sc
  ON p.[schema_id] = sc.[schema_id]
LEFT OUTER JOIN sys.dm_exec_procedure_stats AS st
ON p.[object_id] = st.[object_id]
ORDER BY st.last_execution_time, p.name; 
```

This will order first the procedures that haven't run since a restart, then the rest by when they were executed last, oldest first.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-15T15:32:31.110

这是对我最有用的公认答案的变体：

```
SELECT sc.NAME + '.' + p.NAME [Procedure]
    ,s.last_execution_time
FROM sys.procedures AS p
LEFT JOIN sys.dm_exec_procedure_stats AS s ON p.[object_id] = s.[object_id]
INNER JOIN sys.schemas sc ON p.schema_id = sc.schema_id
ORDER BY s.last_execution_time
    ,sc.NAME
    ,p.NAME 
```

修改显示上次执行时间并包括过程的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-10T01:21:53.140

出于某种原因，我的 dm_exec_procedure_stats 视图一整天都在清除。所以我现在才运行它，最早的执行时间是从今天早上开始的，但我知道我们今天早上没有重新启动 SQL 或其他任何事情。

无论如何，我想创建一个 proc，我可以将它放入一个每小时运行的作业中，并捕获最近运行的 proc。这是我所做的：

创建了一个表来记录执行的过程及其第一次和最后一次执行时间。

```
create table ProcsThatExecute (procName varchar(500), firstExecutionTime datetime, lastExecutionTime datetime) 
```

创建了一个插入或更新 ProcsThatExecute 表的过程。在工作中每小时运行一次，几天、几周或几个月后，您会记录使用了哪些 proc：

```
alter procedure LogProcsThatExecute as begin

    --If they don't already exist in this table, add them.
    insert into ProcsThatExecute(procName, firstExecutionTime, lastExecutionTime)
    SELECT p.NAME ProcName, s.last_execution_time, null
    FROM sys.procedures AS p
        LEFT OUTER JOIN sys.dm_exec_procedure_stats AS s ON p.[object_id] = s.[object_id]
    where not exists (
        select 1 from ProcsThatExecute pte where pte.procName = p.name
    ) and last_execution_time is not null

    --If they do exist in this table, update the last execution time.
    update ProcsThatExecute set lastExecutionTime = s.last_execution_time
    from ProcsThatExecute pte
    inner join sys.procedures AS p on pte.procName = p.name
        LEFT OUTER JOIN sys.dm_exec_procedure_stats AS s ON p.[object_id] = s.[object_id]
    where s.last_execution_time is not null

end 
```

# mysql - 使用 daterange 表也返回空结果集

> ID：10421441
> 
> 赞同：0
> 
> 时间：2012-05-02T20:47:29.623
> 
> 标签：mysql, sql

我想计算下表中每个用户每天的消息数：

```
+---------+---------+------------+
| msg_id  | user_id | m_date     |
+-------------------+------------+
|   1     | 1       | 2011-01-21 |
|   2     | 1       | 2011-01-23 |
|   3     | 1       | 2011-01-23 |
|   5     | 2       | 2011-01-23 |
|   6     | 2       | 2011-01-24 |
|   8     | 1       | 2011-01-23 |
|   9     | 2       | 2011-01-23 |
|  10     | 1       | 2011-01-24 |
+---------+---------+------------+ 
```

期望的输出将是：

```
1 2011-01-21 1
2 2011-01-21 0
1 2011-01-22 0
2 2011-01-22 0
1 2011-01-23 3
2 2011-01-23 2
1 2011-01-24 1
2 2011-01-24 1 
```

我使用以下查询：

```
SELECT m_date, COUNT(msg_id ) AS volume
FROM messages
GROUP BY user_id, m_date
ORDER BY user_id, m_date ASC 
```

但是在这里，体积为零的日子被排除在结果集中之外：

```
1 2011-01-21 1
1 2011-01-23 3
2 2011-01-23 2
1 2011-01-24 1
2 2011-01-24 1 
```

但是，我希望结果集中的那些日子。所以我明白我应该使用“日期范围”表，其中包含我想要结果的所有日期：

```
+---------+------------+
| date_id | d_date     |
+---------+------------+
| 1       | 2011-01-21 |
| 2       | 2011-01-22 |
| 3       | 2011-01-23 |
| 4       | 2011-01-24 |
+---------+------------+ 
```

但是，我不知道如何按照第一个使用这个表来获得我需要的结果集。你？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:27:50.817

这可以使用交叉连接来完成：

```
SELECT user_id, d_date,
       COUNT(CASE WHEN messages.m_date = d.d_date then 1 end) Volume
FROM messages
CROSS JOIN datetable d
GROUP BY messages.user_id, d.d_date
ORDER BY messages.user_id, d.d_date ASC 
```

[Sql 小提琴演示](http://sqlfiddle.com/#!2/23eae/8)。

# sql - SQL SELECT：将列映射到新列

> ID：10421448
> 
> 赞同：1
> 
> 时间：2012-05-02T20:47:43.767
> 
> 标签：sql, select, map, new-operator

我有一个包含两列整数的表。我想从中选择数据（以某种标准方式）并按规则添加一个新列：

*   如果左边的数字更大，新的列是 1
*   如果左边的数字更小，新列是-1
*   如果数字相等，则新列为 0

例子：

```
16 | 15 | 1
20 | 28 |-1
11 | 11 | 0
28 | 14 | 1
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T20:50:36.167

Sounds like you want the `SIGN` Function

```
SELECT Col1, Col2, SIGN(Col1 - Col2) AS Col3
FROM   T 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T20:49:21.147

```
SELECT X,Y,
    CASE WHEN X > Y THEN 1
         WHEN X < Y THEN -1
         ELSE 0 END AS "Z"
FROM table_name 
```

# c# - 将一个字符串分成长度为 3 的集合字符串

> ID：10421450
> 
> 赞同：0
> 
> 时间：2012-05-02T20:47:44.357
> 
> 标签：c#, linq, ienumerable

说我有一个字符串`var s = "123456789"`

在哪里

```
foreach(var c in DivideStr(s, 3)){
  Console.WriteLine(c);
} 
```

会打印出来`123`, `456`,`789`

这是一个相当容易用循环和 if 语句完成的问题。但我想以以下方式在 C# 中完成`Take`和函数`Skip`

```
IEnumerable DivideStr(String s, Int n) 
{
   var a = s;  
   while(!a.IsEmpty())  
   {  
     yield return a.Take(n)  
     a = a.Drop(3) // or a.Skip(n)  
   }  
} 
```

这样，如果我有`var s = "12345678"` 打印输出将是`123`, `456`, 和`78`

问题是上面的代码无法编译。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:58:10.403

如果`s`是`"12345678"`，这将产生`123`, `456`，然后`78`。

```
 public static IEnumerable<string> DivideStr(String s, int n)
    {
        for (int currentPos = 0; currentPos < s.Length; currentPos += n)
        {
            yield return new string(s.Skip(currentPos).Take(n).ToArray());
        }
    } 
```

尽管以这种方式使用`Skip`and`Take`并没有太大的实际意义，因为我们还不如在`s.Substring(...)`没有任何枚举器开销的情况下产生 -s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:19:07.313

尝试这样的事情

```
IEnumerable<string> splitstrings = Enumerable.Range(0, str.Length / 3)
        .Select(i => str.Substring(i * 3, 3)); 
```

或这个

```
List<string> splitstrings = (from Match m in Regex.Matches(str, @"\d{1,3}")
                   select m.Value).ToList(); 
```

# facebook-like - gridview 的每个元素上的 facebook like 按钮

> ID：10421451
> 
> 赞同：1
> 
> 时间：2012-05-02T20:47:44.590
> 
> 标签：facebook-like, blogs

我有一个显示文章的网格视图，并且对于每篇文章，即对于网格的每一行，我都想放置类似 Facebook 的按钮。我怎样才能做到这一点...

在我的网格的 itemtemplate 中，我放置了以下脚本： (function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1"; fjs.parentNode.insertBefore(js, fjs); } (文档，'脚本'，'facebook-jssdk'））；' data-layout="button_count" data-width="450" data-show-faces="false">

但是，它仅适用于少数文章，如果您在我的 facebook 个人资料页面中喜欢少数文章，我会获得一篇文章的多个赞，而不是仅一篇赞。这是我的主要问题，请给我解决方案。谢谢

# c# - 查询嵌套字典

> ID：10421455
> 
> 赞同：4
> 
> 时间：2012-05-02T20:48:02.023
> 
> 标签：c#, linq, dictionary

我很好奇是否有人有有效解决这个问题的好方法。我目前有以下对象。

```
Dictionary<int, Dictionary<double, CustomStruct>>

struct CustomStruct
{
    double value1;
    double value2;
    ...
} 
```

鉴于我知道我想要访问的“int”，我需要知道如何为具有最低 (value1 + value2) 和的字典返回“双键”。任何帮助将不胜感激。我试图使用 Linq，但任何方法都会受到赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:52:01.147

```
var result = dict[someInt].MinBy(kvp => kvp.Value.value1 + kvp.Value.value2).Key; 
```

使用来自令人敬畏的[MoreLINQ](http://code.google.com/p/morelinq/)项目的[MinBy 扩展方法。](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/MinBy.cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:37:45.860

只使用普通的 LINQ：

```
Dictionary<int, Dictionary<double, CustomStruct>> dict = ...;
int id = ...;

var minimum =
   (from kvp in dict[id]
    // group the keys (double) by their sums
    group kvp.Key by kvp.Value.value1 + kvp.Value.value2 into g
    orderby g.Key          // sort group keys (sums) in ascending order
    select g.First())      // select the first key (double) in the group
   .First();               // return first key in the sorted collection of keys 
```

每当您想使用普通 LINQ 获取最小或最大项目时，通常必须使用`GroupBy()`,`OrderBy()`和`First()`/的组合`Last()`来获取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:38:50.533

A`Dictionary<TKey,TValue>`也是一个序列`KeyValuePair<TKey,TValue>`。您可以选择值总和最少的 KeyValuePair 并获取其键。

使用纯 LINQ to Objects：

```
dict[someInt].OrderBy(item => item.Value.value1 + item.Value.value2)
             .FirstOrDefault()
             .Select(item => item.Key); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T22:22:57.343

这是非LINQ方式。它并不比它的 LINQ 对应物短，但它更高效，因为它不像大多数 LINQ 解决方案那样进行排序，如果集合很大，这可能会变得昂贵。

dtb 的 MinBy 解决方案是一个很好的解决方案，但它需要一个外部库。我确实非常喜欢 LINQ，但有时您应该提醒自己，带有一些局部变量的 foreach 循环不是过时的或错误的。

```
CustomStruct Min(Dictionary<double, CustomStruct> input)
{
    CustomStruct lret = default(CustomStruct);
    double lastSum = double.MaxValue;

    foreach (var kvp in input)
    {
        var other = kvp.Value;
        var newSum = other.value1 + other.value2;
        if (newSum < lastSum)
        {
            lastSum = newSum;
            lret = other;
        }
    }
    return lret;
} 
```

如果您想在不使用外部库的情况下使用 LINQ 方法，您可以像这样创建自己的 MinBy：

```
public static class Extensions
{
    public static T MinBy<T>(this IEnumerable<T> coll, Func<T,double> criteria)
    {
        T lret = default(T);
        double last = double.MaxValue;
        foreach (var v in coll)
        {
            var newLast = criteria(v);
            if (newLast < last)
            {
                last = newLast;
                lret = v;
            }
        }
        return lret;
    }

} 
```

它不如第一个高效，但它可以完成工作，并且比第一个更可重用和可组合。您的 Aggregate 解决方案具有创新性，但需要重新计算与当前最佳匹配比较的每个项目的当前最佳匹配的总和，因为您在聚合调用之间携带的状态不足。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T12:54:19.663

感谢所有帮助家伙，也发现了这种方式：

```
dict[int].Aggregate(
                    (seed, o) =>
                        {
                            var v = seed.Value.TotalCut + seed.Value.TotalFill;
                            var k = o.Value.TotalCut + o.Value.TotalFill;
                            return v < k ? seed : o;
                        }).Key; 
```

# c# - 应用程序之间共享 NLog 配置略有不同

> ID：10421456
> 
> 赞同：2
> 
> 时间：2012-05-02T20:48:15.993
> 
> 标签：c#, nlog

我有多个应用程序共享一个配置文件，该文件设置 NLog 部分看起来像这样

```
<targets>
     <target name="eventlog" type="EventLog" source="ApplicationX" log="Application"
         layout="${date}: ${message} ${stacktrace}" />
</targets> 
```

我们对每个应用程序需要的唯一区别是更改源

我尝试做的是在顶部主要设置中的每个应用程序的开头

```
 var target = ((EventLogTarget) _logger.Factory.Configuration.FindTargetByName("eventLog"));
     target.Source = "Application1"; 
```

这似乎对日志输出没有影响。
是否有任何编程方式可以对 NLog 的设置进行这样的调整？

有没有其他方法可以管理 NLog 配置中的小更改，而不必为每个应用程序保留不同版本的完整配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:48:20.160

您应该从 LogManager 而不是记录器的工厂获取配置实例：

```
EventLogTarget target = (EventLogTarget)LogManager.Configuration.FindTargetByName("eventlog");
target.Source = "Application1"; 
```

有关 NLog 运行时配置的更多信息，您可以在[NLog 配置 API 的文档中找到](http://nlog-project.org/wiki/Configuration_API)

# c# - 更改特定字符串的标签 ForeColor

> ID：10421457
> 
> 赞同：0
> 
> 时间：2012-05-02T20:48:18.777
> 
> 标签：c#, .net, winforms, label

我正在编写一个 WinForms 应用程序。我有很多标签代表某种状态（启用/禁用等）。我希望每个状态都是不同的颜色（绿色，灰色......）。我知道实现这一点的唯一方法是检查 label.Text 是否与所需状态匹配，然后更改其前景色。但这是一个艰难的方法，因为我每次在应用程序中设置状态标签时都需要执行此检查。

我想知道是否有任何方法可以“在一个地方”做到这一点？例如，编写一个方法来检查特定字符串的所有标签，然后从 Form_Load() 调用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:55:42.030

You could create your own custom label class which inherits from the Label class. Something like this:

```
public class MyLabel : Label
{
    public MyLabel()
    {
        if(this.Text == "something")
        {
            this.ForeColor = Color.Green;
        }
    }

    protected override void OnTextChanged(EventArgs e)
    {
        if(this.Text == "something")
        {
            this.ForeColor = Color.Green;
        }
    }
} 
```

And so instead of using Label use MyLabel everywhere.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:54:05.387

将所有标签添加到 Form_Load() 上的列表中，然后您可以执行 .Where(l => l.Text == "String you are looking for")。遍历那些以适当地设置前景色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:58:21.693

使用表单控件及其子控件枚举表单上的所有标签，例如使用此 SO 答案中的 GetAll 方法：

[如何获取特定类型（按钮/文本框）的 Windows 窗体窗体的所有子控件？](https://stackoverflow.com/questions/3419159/how-to-get-all-child-controls-of-a-winform-of-a-specific-type-button-textbox)

然后设置适当的颜色，如下所示：

```
var allLabels = GetAll(form, typeof(Label)); /// you can use this as first param if in form methods
foreach(Label oneLabel in allLabels)
{
  if (oneLabel.Text == "Something")
  {
    // set color or whatever
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T20:59:30.657

您还可以利用标签控件的 Tag 属性。将用于显示状态的所有标签控件的标记设置为“状态”，并在 Page_Load 事件中旋转循环以设置前景色。

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    For Each control In Me.Controls
        If (TypeOf (control) Is Label) Then
            Dim statusLabel As Label
            statusLabel = control
            If (statusLabel.Tag = "Status") Then
                statusLabel.ForeColor = Color.Red
            End If
        End If
    Next
End Sub 
```

# ios - CIImage 到 CMSampleBufferRef 的转换

> ID：10421458
> 
> 赞同：1
> 
> 时间：2012-05-02T20:48:22.853
> 
> 标签：ios, ios5, opengl-es, gpu, core-image

我正在使用 captureStillImageAsynchronouslyFromConnection: 从相机获取图像样本缓冲区。之后，我通过 OpenGL (GPU) 运行图像以应用过滤器，但不幸的是，Apple 有人在 iPhone 4 上安装了相机，其输出大于最大纹理尺寸。

Brad Larsons 解释：iPhone 4 是一个特例，因为它可以拍摄足够大的照片 (2592x1936)，它们刚好超过这些设备上 GPU 的最大纹理尺寸 (2048x2048)。这导致当前处理失败。所有其他设备要么不拍摄那么大的照片，要么支持更大的纹理尺寸（iPad 2、iPad 3 和 iPhone 4S 支持这些更大的尺寸）。

所以我拥有的代码是缩小图像但我必须在 iPhone 4 上调整大小后创建 CMSampleBufferRef 只是为了欺骗捕获过程......有人知道如何从 CIImage 获取 CMSampleBufferRef 吗？

`Objective-C CIImage *ciImage = [CIImage imageWithCVPixelBuffer:CMSampleBufferGetImageBuffer(sampleBuffer) options:[NSDictionary dictionaryWithObjectsAndKeys:[NSNull null], kCIImageColorSpace, nil]]; ciImage = [[ciImage imageByApplyingTransform:myScaleTransform] imageByCroppingToRect:myRect];`

# sql - 为什么未使用的 FROM 表会使语句变慢

> ID：10421460
> 
> 赞同：2
> 
> 时间：2012-05-02T20:48:27.460
> 
> 标签：sql, postgresql, indexing

我有两张桌子。一个变更日志表，其细节在这里并不重要。另一个包含卖家信息的表，最重要的是有两列：

*   主 ID
*   和一个名为 ident 的 id（= 真实世界的 ID）。

当卖家更改时，会创建一个新条目，ident 保持不变，但新条目会获得一个新 ID。我在 ID 上有一个主索引，在 (ident,-id) 上有另一个索引，所以我可以快速获取当前数据。

我偶然发现了以下奇怪的行为：

这需要很长时间才能完成：

```
SELECT DISTINCT ON (ident) sellers.* FROM changelog, sellers ORDER BY ident,id DESC;

                                  QUERY PLAN                                    
---------------------------------------------------------------------------------
 Unique  (cost=741675.98..760122.47 rows=10 width=30)
   ->  Sort  (cost=741675.98..750899.22 rows=3689298 width=30)
         Sort Key: sellers.ident, sellers.id
         ->  Nested Loop  (cost=3.07..74457.37 rows=3689298 width=30)
               ->  Seq Scan on changelog  (cost=0.00..668.34 rows=38034 width=0)
               ->  Materialize  (cost=3.07..4.04 rows=97 width=30)
                     ->  Seq Scan on sellers  (cost=0.00..2.97 rows=97 width=30) 
```

当我用 -ID 替换 DESC 时，它很快，但产生相同的结果。

```
SELECT DISTINCT ON (ident) sellers.* FROM changelog, sellers ORDER BY ident,-id;

                                         QUERY PLAN                                        
------------------------------------------------------------------------------------------
 Unique  (cost=706.37..92956.53 rows=10 width=30)
   ->  Nested Loop  (cost=706.37..83733.28 rows=3689298 width=30)
         ->  Index Scan using idx_sellers on sellers  (cost=0.00..17.70 rows=97 width=30)
         ->  Materialize  (cost=706.37..1086.71 rows=38034 width=0)
               ->  Seq Scan on changelog  (cost=0.00..668.34 rows=38034 width=0) 
```

当我从 FROM 中删除“更改日志”时，ORDER BY -id 和 DESC 再次快速给出相同的查询计划。

```
SELECT DISTINCT ON (ident) sellers.* FROM sellers ORDER BY ident,id, DESC   

                             QUERY PLAN                              
---------------------------------------------------------------------
 Unique  (cost=6.17..6.66 rows=10 width=30)
   ->  Sort  (cost=6.17..6.41 rows=97 width=30)
         Sort Key: ident, id
         ->  Seq Scan on sellers  (cost=0.00..2.97 rows=97 width=30) 
```

我的问题：

*   为什么在 FROM 中包含未使用的表会影响查询？
*   为什么 ORDER BY ident,-id 不使用与 ORDER BY ident,id DESC 相同的计划？

编辑：我的真实查询当然有一个 WHERE 子句来连接这两个表。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T20:52:30.793

查询中不存在未使用的表。

```
SELECT DISTINCT ON (ident) sellers.* 
FROM changelog, sellers ORDER BY ident,id DESC 
```

您的原始查询正在创建交叉连接（更改日志中的每条记录都被连接到卖家中的每条记录），这是您应该避免使用 20 年前被显式语法取代的隐含连接语法的原因之一。

# c# - 如何使用此代码使我的 i7 处理器达到 100% 的使用率（解析 xml 的最快方法）

> ID：10421466
> 
> 赞同：2
> 
> 时间：2012-05-02T20:48:46.670
> 
> 标签：c#, .net, multithreading, xml-parsing, hyperthreading

如何使用此代码使我的 i7 处理器达到 100% 的使用率？XmlDocument 中是否发生了一些特别的事情？仅仅是因为上下文变化吗？如果是这样，为什么放置更多线程不会使处理器使用其全部功能？一次解析多个字符串的最佳方法是什么？

**编辑：**

也许这段代码会让它更清楚，不管它使用 30% 的处理器的线程数是多少：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Action action = () =>
        {
            while (true)
            {
                XmlDocument xmlDocument = new XmlDocument();

                xmlDocument.LoadXml("<html><body><div>1111</div><div>222</div></body></html>");
                var nodes = xmlDocument.SelectNodes("//div");
            }
        };

        Parallel.For(0, 16, i => action());
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:58:41.573

这是您正在运行的实际代码，还是从文件或其他 URL 加载 xml？如果这是实际代码，那么它可能完成得太快，CLR 没有时间优化线程数，但是当你放置无限循环时，它保证你会最大化 CPU。

如果您从真实来源加载 XML，那么线程可以等待 IO 响应，并且在这种情况下不会消耗任何 CPU。为了加快这种情况，您可以使用大量线程（如 20+）将所有 XML 预加载到内存中，然后使用 8 个线程进行 XML 解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T21:16:02.210

在您的代码示例中（您会通过探查器看到这一点），您正在浪费大量时间等待可用资源来运行这些线程。因为您不断地请求越来越多`Parallel.For`（这是一个非阻塞调用） - 您的进程花费大量时间等待线程完成，然后选择下一个线程（越来越多的此类线程都在请求运行时间）。

考虑分析器的输出：

红色是同步的！看看内核做了多少工作才能让我的应用程序运行这么多线程！注意，如果你有一个单核处理器，你肯定会看到 100%

![在此处输入图像描述](../Images/5def3482ecaa92d27ea5e8d0238369c0.png)

通过拆分字符串并分别解析它们（当然是从 I/O 加载后），您将获得阅读此 xml 的最佳时间。您可能看不到 100% 的 CPU 使用率，但这将是最佳选择。使用字符串的不同分区大小（即子字符串大小）。

对于并行模式的惊人阅读，我推荐 Stephen Toub 的这篇论文：http: [//download.microsoft.com/download/3/4/D/34D13993-2132-4E04-AE48-53D3150057BD/Patterns_of_Parallel_Programming_CSharp.pdf](http://download.microsoft.com/download/3/4/D/34D13993-2132-4E04-AE48-53D3150057BD/Patterns_of_Parallel_Programming_CSharp.pdf)

**编辑**我做了一些寻找在多个线程中读取 xml 的智能方法。我最好的建议是：

1.  如果可以，将您的 xml 文件拆分为较小的文件。
2.  每个 xml 文件使用一个线程。
3.  如果 1&2 不足以满足您的性能需求，请考虑不将其完全加载为 xml，而是对字符串进行分区（拆分），并手动解析（而不是 XmlDocument）。如果 1 和 2 足以满足您的需求，我只会这样做。每个分区（子字符串）都将在自己的线程上运行。还要记住“更多的线程”！=“更多的 cpu 使用率”，至少对于您的应用程序而言不是。正如我们在分析器示例中看到的，过多的线程会花费大量开销。把事情简单化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:08:51.137

处理器是现代 PC 上最快的组件。瓶颈通常以 RAM 或硬盘驱动器的形式出现。在第一种情况下，您不断地创建一个可能会占用大量内存的变量。因此，随着缓存快速耗尽，RAM 成为瓶颈是很直观的。

在第二种情况下，您没有创建任何变量（我确信 .NET 在后台做了很多工作，尽管是以高度优化的方式）。因此，所有工作都留在 CPU 上很直观。

操作系统如何处理内存、中断等是不可能完全定义的。您可以使用帮助定义这些情况的工具，但上次我检查时甚至没有用于 .NET 代码的内存分析器。所以这就是为什么我说对答案持保留态度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T03:59:45.003

任务并行库分发操作，因此您在进程利用率方面失去了一些控制。在大多数情况下这是一件好事，因为我们不必担心创建太多线程、使我们的线程太大等。如果您想显式创建线程，那么以下代码应该将您的处理器推到最大：

```
Parallel.For(0, 16, index => new Thread(() =>
                {
                    while (true)
                        new Thread(() =>
                            {
                                XmlDocument xmlDocument = new XmlDocument();
                                xmlDocument.LoadXml("<html><body><div>1111</div><div>222</div></body></html>");
                                var nodes = xmlDocument.SelectNodes("//div");
                            }).Start();
                }).Start()); 
```

我并不是说我推荐这种方法，只是展示了一个将我的处理器推到最大 (AMD FX-6200) 的代码的工作示例。我也看到大约 30% 的人使用任务并行库。

# php - PHP 数组：语法变化

> ID：10421468
> 
> 赞同：1
> 
> 时间：2012-05-02T20:48:49.503
> 
> 标签：php, pointers

前几天我遇到了这个 php 语法，我不熟悉它。我*猜它可能会推动，但我真的不知道。这 * 和 . 完全一样吗`array_push($b)`？如果它正在完成*类似的事情，请解释它有何不同。

```
 $foo = array();
    foreach($bar as $b)
    {
        $foo[] = $b; //push?
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:52:11.980

The only difference is the tiny bit of extra overhead involved in making a function call to `array_push()` vs making use of the language construct `[]` to append onto an array. They are functionally equivalent.

The difference between them from that function call is going to be utterly miniscule to the degree that you needn't worry about it unless you are doing it millions of times.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:57:07.227

`$foo[] = $b` will be slightly faster due to the overhead of a function call (as Michael stated below).

Additionally, as [stated in the manual](http://php.net/manual/en/function.array-push.php), if the first argument to array_push is not an array a notice is raised. Using the array bracket notation will simply create a new array if it does not already exist.

# android - 使用功能齐全的浏览器显示本地页面

> ID：10421469
> 
> 赞同：1
> 
> 时间：2012-05-02T20:48:52.390
> 
> 标签：android

我最初开始使用 WebView 在资产文件夹中显示网页。然而，我似乎已经超越了这一点，因为我的页面没有像我预期的那样表现。根据开发者文档，WebView 只能用于没有交互的静态页面。未启用 CSS、javascript 等。这对我所看到的行为是有道理的。虽然我的页面在开发环境浏览器中呈现得很好，但它看起来就像设备上的纯 HTML，没有 css 或 javascript 功能。因此，如果我想显示一个启用了 css 和 javascript 等的本地（资产文件夹）html 页面，我将如何去做呢？我认为这样一个简单的事情存在教程，但我的谷歌搜索是空的。

如果我的链接很糟糕，那就是标题。

```
<head>
     <link href="folderA/folderB/file.css" rel="stylesheet" />

     <script src="folderA/js/file.js"></script>
</head> 
```

再次感谢您帮助这个菜鸟。JB

刚发现这个。可能在正确的轨道上？ [http://developer.android.com/guide/webapps/index.html](http://developer.android.com/guide/webapps/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:11:00.517

> 根据开发者文档，WebView 只能用于没有交互的静态页面

请引用。我从未见过这样的说法，并且有很多很多应用程序使用`WebView`“交互”。

> 未启用 CSS、javascript 等

CSS肯定是启用的——事实上，AFAIK，即使你想禁用它也没有办法。默认情况下禁用 JavaScript，但只需简单地调用`getSettings().setJavaScriptEnabled(true)`on your即可`WebView`启用它。

> 因此，如果我想显示一个启用了 css 和 javascript 等的本地（资产文件夹）html 页面，我将如何去做呢？

`loadUrl("file:///android_asset/index.html")``index.html`工作，在项目目录的根目录中加载文件`assets/`。

例如，在[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/EmPubLite/T12-Book)中，我`file:///android_asset/book/0.htm`将（和其他 HTML 文件）`WebView`加载到加载到`ViewPager`. 每个 HTML 引用一对 CSS 样式表，使用：

```
<link href="0.css" type="text/css" rel="stylesheet"/><link href="pgepub.css" type="text/css" rel="stylesheet"/> 
```

在[这个示例项目](https://github.com/commonsguy/cw-advandroid/tree/master/WebView/GeoWeb1)中，我从资产中加载了一些 HTML 并使用了一些页面内 JavaScript。

`assets/`现在，我对内部的目录结构并尝试跨目录访问内容并没有做太多事情。可以想象，您遇到了一些与此相关的问题。

# haskell - 是否可以在 gtk2hs 中使用 Glade 创建的菜单？

> ID：10421470
> 
> 赞同：4
> 
> 时间：2012-05-02T20:48:56.243
> 
> 标签：haskell, glade, gtk2hs

我在我的 gtk2hs 应用程序中使用 Glade 创建了菜单。是否可以在我的 Haskell 代码中使用它来为每个激活的菜单项编写操作？是否有一个关于 Hackage 的简单示例或项目可以用作说明性示例？

我能找到的唯一菜单示例[http://www.muitovar.com/gtk2hs/chap7-1.html](http://www.muitovar.com/gtk2hs/chap7-1.html)似乎对使用 Gtk Builder XML 没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T22:29:18.767

这里有两个来自我的应用程序的例子。在主程序中，我将 GTK 小部件绑定到变量，并将这些小部件绑定到我在其他模块中实现的回调函数。

-- 加载 Glade 文件：

```
gui <- builderNew
builderAddFromFile gui "myGUI.glade" 
```

-- 关闭应用程序：

-- 将窗口“mainWindow”（在 Glade 文件中定义）绑定到一个变量

```
mainWindow <- builderGetObject gui castToWindow "mainWindow" 
```

-- 将菜单项“menu_Quit”（在 Glade 文件中定义）绑定到一个变量

```
mQuit <- builderGetObject gui castToMenuItem "menu_Quit" 
```

-- 将菜单项绑定到 GTK 函数“widgetDestroy”

```
on mQuit menuItemActivate $ widgetDestroy mainWindow 
```

-- 将 mainWindow 的事件 "objectDestroy" 绑定到 GTK 函数 "mainQuit"

```
on mainWindow objectDestroy mainQuit 
```

-- 当用户选择另一个菜单项时调用一个函数，说“menu_About”：

-- 将菜单项绑定到变量

```
mAbout <- builderGetObject gui castToMenuItem "menu_About" 
```

-- 使菜单项显示关于对话框（在 Glade 文件中定义）

```
on mAbout menuItemActivate $ do
    aboutDialog <- builderGetObject gui castToDialog "aboutDialog"
    set aboutDialog [ widgetVisible := True ]
    dialogRun aboutDialog
    set aboutDialog [ widgetVisible := False ] 
```

您可以将 do 块放在一个函数中，也许在一个模块中，您可以在其中定义对 GTK 事件的所有响应：

```
showAboutDialog :: Builder -> IO ()
showAboutDialog gui = [insert do block here] 
```

然后，您可以将 menuItemActivate 之后的 do 块替换为：

```
on mAbout menuItemActivate $ showAboutDialog gui 
```

请注意，我将 Builder 对象传递给 showAboutDialog 因为该函数需要从 Glade 文件中获取对话框。

# javascript - 播放后重定向html5视频

> ID：10421471
> 
> 赞同：2
> 
> 时间：2012-05-02T20:48:56.483
> 
> 标签：javascript, html, html5-video

我有一个 html 5 视频，我删除了控制按钮并添加了一个 js 代码，以便用户在单击视频时播放视频。我需要做的是绑定一个额外的脚本，该脚本将在视频播放后重定向页面而无需重新加载页面。下面是我的js代码。

```
function play(){
var video = document.getElementById('video');
video.addEventListener('click',function(){
video.play();
},false);
} 
```

这是我的 HTML5 视频代码

```
<video id="video" width="770" height="882" onclick="play();">
<source src="video/Motion.mp4" type="video/mp4" />
</video> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T20:53:48.800

```
<script type="text/javascript">
// Do not name the function "play()"
function playVideo(){
    var video = document.getElementById('video');
    video.play();
    video.addEventListener('ended',function(){
        window.location = 'http://www.google.com';
    });
}
</script>
<video controls id="video" width="770" height="882" onclick="playVideo()">
    <source src="video/Motion.mp4" type="video/mp4" />
</video> 
```

以下是您可以绑定的媒体事件列表：http: [//dev.w3.org/html5/spec/Overview.html#mediaevents](http://dev.w3.org/html5/spec/Overview.html#mediaevents)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-06T22:53:55.317

我在另一个网站上找到了这个。它似乎运作良好......

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js">
    </script>
    <script type="text/javascript">
      $(document).ready(function(){   
       $("#myVideo").bind('ended', function(){
          location.href="http://www.localhost.com";   
       }); 
      });
    </script>

    <video id="myVideo" width="320" height="240" controls="controls">
      <source src="movie.mp4" type="video/mp4" />
      <source src="movie.ogg" type="video/ogg" />
        Your browser does not support the video tag.
    </video> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T14:19:05.483

有没有办法修改它以使其适用于自动播放的视频？我认为 src="text/javascript" 而不是 type="text/javascript" 是什么让我很生气，然后我意识到我在多个浏览器中得到的结果不一致。尽我所能跟踪它，那些正确解释自动播放的人没有正确执行此代码，因为从技术上讲没有“点击”；视频只是自行进行，从不触发该功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-25T06:39:18.117

```
 <script>
      var vid = document.getElementById("myvideo");
      vid.onended = function() {
            window.open("index.html", "_self");
      };
</script>
<video controls id="myvideo" width="770" height="882">
    <source src="video/Motion.mp4" type="video/mp4"/>
</video> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-19T22:53:56.913

如果您想避免在应用程序中对 URL 进行硬编码，并且只想重置视频而不一定要导航到另一个页面，我发现这非常简洁。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js" /> 
<script type="text/javascript">
            $(document).ready(function(){   
                $("#yourVideoID").bind('ended', function(){
                    location.reload(false);                     
                }); 
            });
</script> 
```

您无需指定 URL，包含您的视频的当前页面会从缓存中重新加载（如果可能），因此您无需再次与服务器通信以重新显示视频。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-06T19:12:30.250

Ashley 的代码片段对我有用，但我必须确保不要在视频标签中使用“循环”参数，否则它不起作用。

此外，我能够让它自动播放，如您在此示例中所见：

```
<video id="thevideo" width="1280" preload="auto" autoplay="autoplay"> 
  <source src="your-video.mp4" type="video/mp4" />
  <source src="your-video.ogv" type="video/ogg" />
  Your browser does not support the video tag.
</video> 
```

# javascript - 带下划线的 JavaScript 命名约定

> ID：10421472
> 
> 赞同：0
> 
> 时间：2012-05-02T20:49:03.923
> 
> 标签：javascript

在[这个 SO question](https://stackoverflow.com/questions/10031605/optimizing-websql-local-database-population/10031717#10031717)中，回答者在第 3 行使用下划线。如果它只是变量名的开头，我会很好。但是 _(row) 是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:50:36.673

它是变量名的开始。它也是变量名的结尾。变量（具有分配给它的函数）是`_`. 该问题引用[了 underscore.js](http://documentcloud.github.com/underscore/)，它提供了它。

尝试，[例如](http://jsfiddle.net/K6MN7/)：

```
function _() { 
    alert('underscore!'); 
};
console.log(typeof _);
console.log(_);
_();​ 
```

欢迎来到使用完全不直观的变量名称的美妙世界，因为它们很短且不是字母数字。另请参阅`$`，深受 Prototype、jQuery 和 Mootools 的喜爱。相反，请参阅维基百科上[的自我记录（代码）](http://en.wikipedia.org/wiki/Self-documenting)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T20:50:44.383

`_`是[`underscore.js`](http://documentcloud.github.com/underscore/)。 _ `_`是一个变量，它是一个函数，所以你可以做`_(rows)`.

在 JavaScript 中，您可以随意命名变量。例如`$`(jQuery) 和`_`.

# sqlite - QCryptographicHash :: Md5 和 bash md5sum

> ID：10421475
> 
> 赞同：0
> 
> 时间：2012-05-02T20:49:19.073
> 
> 标签：sqlite, qt, md5sum

我需要将 sqlite 数据库与唯一的外部文件链接在一起。为了确保这一点，我制作了一个存储文件哈希的表，但遇到了以下问题 - QCryptographicHash::Md5 结果与 bash md5sum 结果不同。谁能说我做错了什么？我的代码：

```
int main(int argc, char *argv[]) {

     QFile file(argv[0]);

     if (!file.open(QIODevice::ReadOnly)) return -1;
     QByteArray byteArray = file.readAll();

     QByteArray md5=QCryptographicHash::hash(byteArray,QCryptographicHash::Md5);

     qDebug()<<md5.toHex();

     return 0;
 } 
```

或者也许有人知道我的问题的另一种解决方案？使用 BLOB 不提供

# visual-studio-2010 - 如何在通用测试的（Visual Studio 2010）工作目录和摘要结果文件中设置相对路径

> ID：10421477
> 
> 赞同：3
> 
> 时间：2012-05-02T20:49:22.217
> 
> 标签：visual-studio-2010, relative-path, generic-test

如何在通用测试（Visual Studio 2010）的工作目录和摘要结果文件中设置相对路径？

到目前为止，我认为没有办法在通用测试中以编程方式设置这些位置，因为通用测试只有属性页面，没有用于编写 C# 代码的页面。

我的文件夹结构如下

c:\Files\GenericTestFolder\generictest.sln c:\Files\SummaryFiles\summary.xml

现在我需要将工作目录设置为以下（运行外部程序）c:\Files\

和摘要结果文件位置：c:\Files\SummaryFiles\summary.xml

我尝试了以下选项来设置工作目录（WD）和摘要文件（SF）位置的位置：

1.  将WD设置为“..\”或“.\”或“\”->所有这些似乎都将目录设置为c：\，所以这对我没有用。

2.  使用 Visual Studio 的内置环境变量（如 %TestDeploymentDirectory% 似乎不适用于 "..\" ，即 %TestDeploymentDirectory% ..\ 在运行时不会转换为 %TestDeploymentDirectory% 的父级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-15T19:22:39.827

您可以使用`%TestLocation%`. 它代表 .GenericTest 文件的位置。

[资源](http://intellitect.com/relative-paths-for-visual-studio-generic-tests/)

# php - 使用 Ajax 在同一页面中通过 php 发布查询结果

> ID：10421480
> 
> 赞同：1
> 
> 时间：2012-05-02T20:49:30.510
> 
> 标签：php, mysql, ajax, forms

我的网站上有一个带有 3 个下拉框的表单。用户从每个选项中选择一个选项并点击提交后，数据将发布到外部 php 文件，该文件对 MySQL 进行查询，然后重新加载页面并发布结果。我想让这更花哨 - 使用 ajax 而无需重新加载页面。问题是我完全没有问题。我搜索实习生并尝试了几个示例，但没有结果。这是代码：

**HTML表格：**

```
<form name="showprice" id="showprice" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<select name="country" id="country">
<option value="">Select Country</option>
</select>
<select name="industry" id="industry" onchange="setOptions(document.showprice.industry.options[document.showprice.industry.selectedIndex].value);">
<option value="">Select Industry</option>
</select>
<select name="quality" id="quality">
<option value=" " selected="selected">Select country and industry first.</option>
</select>
<input value="Submit" type="submit" name="submit" id="submit">
</form>

<script  type="text/javascript">
var frmvalidator = new Validator("showprice");
frmvalidator.addValidation("country","req","Please select country");
frmvalidator.addValidation("industry","req","Please select industry");
frmvalidator.addValidation("quality","req","Please select quality");
</script> 
```

注意：我已删除选项以节省空间。

**外部view.prices.php：**

它在另一个文件夹中，现在我用

```
<?php include('includes/view.prices.php'); ?> 
```

现在的代码是：

```
if(isset($_POST['submit'])) {
include ('config.php');
$con1 = mysql_connect($server, $username, $password);
if (!$con1)
{
die(<b>Could not connect: </b> . mysql_error());
}
echo'<br /><br /><table id="myTable" class="tablesorter" align="center">
<thead>
<tr>
**some table headers (8 columns)**
</tr>
</thead>
<tbody>';

$cou = $_POST['country'];
$ind = $_POST['industry']; 
$qua = $_POST['quality'];

$sql = "SELECT * FROM $ind WHERE quality=$qua AND desig=$cou ORDER BY id ASC" or  die('<b>Data Insert Error:</b> ' . mysql_error());

echo("<tr>
**Some table results with 8 variables taken from the MySQL database**
</tr>");

if (!mysql_query($sql,$con1))
{
die('Error: ' . mysql_error());
}
}
echo    '</tbody>
</table>';
mysql_close($con1);
}}
else {
echo '<div class="grid_9">
<p><b>TIP:</b> Pick country, industry and quality from the drop-down above and hit "Submit" button to view results.</p>
</div>';
} 
```

任何帮助高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:02:38.640

我一直为此使用 jQuery。

```
$(function() {
    $('#showprice').sumbit(function() {
    $.post('includes/view.prices.php', $(this).serialize(),function(data) {  
    $('#idoftag').html(data);
    })
    });

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:55:15.820

我会调查 jQuery。您将要禁用默认处理程序：

```
e.preventDefault(); 
```

然后使用 jQuery，您可以执行以下操作：

```
 $.ajax({
        type: 'POST',
        url: '',
        data: $("#showprice").serialize(),  dataType: 'json',
        success: function(data){
            if( data['status'] == 'success' )
            {           
              // Do stuff here
            } 
        }
    }); 
```

该代码假定您将返回一个 json 编码的字符串。哪个 jQuery 可以毫无问题地处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:43:35.773

在朋友的帮助下，我设法做到了：

1）在文件的头部，表单添加：

```
<script type="text/javascript" src="path-to-jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
var working = false;
$('#id-of-form').submit(function(e){
e.preventDefault();
if(working) return false;
working = true;
//$('#submit').val('Sending..');
$.post('path-to-php-file-to-be-executed',$('#id-of-form').serialize(),function(msg){
working = false;
//$('#submit').val('Submit');
$('#id-of-div-where-result-will-be-outputed').html(msg);
});
});
});
</script> 
```

2）在表单后添加输出数据的div

```
<div id="output_div"></div> 
```

3) 在 path-to-php-for-execution 添加：

```
if(isset($_POST['id-of-form-field-1']) && isset($_POST['id-of-form-field-2']) && isset($_POST['id-of-form-field-3'])) {

// some queries here

} 
```

就这样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-30T01:26:10.353

在您的表单中，引用您当前的页面作为操作值...例如，如果您的页面是 index.php。然后使用 action="index.php" 和 method="post"。在您希望数据出现的 div 中，以正确的格式编写 php 代码，并用 if($_POST){ -您的数据库检索代码 - } ?> 括起所有这些代码。这意味着您的发布操作将调用同一页面，这将使您的代码周围的条件为真，因此被执行。希望这会有所帮助，当时它一直困扰着我，但我这样做了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-16T10:43:27.457

在 Notepad++ 中，看起来您的 { } 不匹配。当我在 die 语句之后删除一个并且在 else 之上删除一个时，它们排成一行。

# php - 使用 PHP&Ajax 插入到 Mysql

> ID：10421485
> 
> 赞同：2
> 
> 时间：2012-05-02T20:49:56.683
> 
> 标签：php, mysql, ajax

我用了这个例子：[http ://woork.blogspot.com/2007/10/insert-record-into-database-using-ajax.html](http://woork.blogspot.com/2007/10/insert-record-into-database-using-ajax.html)

它在与数字一起使用时有效，例如，如果我在这些文本框中输入数字，它是有效的，但是当我输入字符串时，我得到这个错误：“'字段列表'中的未知列'文本'”

'text' 是在文本框中写入的文本，而不是 'text' 我写的是 '123' 它正在工作

你能建议我紧急吗？

谢谢大家，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:53:14.937

此错误意味着在您的表中没有名为 的列`text`。要解决此问题，请将您希望更新/插入的字段重命名为文本，或者找出您真正希望更新/插入文本的列。

由于您的字段将更新/插入字符串，因此您还需要确保将字符串括在引号中。

```
INSERT INTO `table` (`val1`,`val2`) VALUES('".$val1."','".$val2."') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:05:58.810

确保您的列具有 text 或 varchar 数据类型。从理论上讲，如果是这种情况，它应该会引发不同的错误。但是您能够插入数字而不是文本这一事实让我认为您拥有某种 INT 数据类型。

显然，最重要的是确保您的 hello 表确实存在。

# javascript - Error Logger for RequireJS

> ID：10421486
> 
> 赞同：1
> 
> 时间：2012-05-02T20:49:58.230
> 
> 标签：javascript, class, requirejs

I'm building an application using RequireJS, and I need a centralized logger. This boils down to class structure, but I'm including my example to be specific. How can a subclass call a parent's error logging method?

Here is my app script:

```
define(['jquery', 'js/renderer', 'js/logger'], function($, Renderer, Logger) {
  var App = Class.extend({
    init: function(baseUrl) {
      this.log = new Logger();
      this.renderer = new Renderer();
    }
  });
  return App;
}); 
```

Here is the renderer script:

```
define(['jquery'], function ($) {
  try() {
    var Renderer = Class.extend({
      init: function() {
        vor = {}; // bad script
      }
    });
    return Renderer;
  } catch(e) {
    [How to throw the error to App]
  }
}); 
```

Is it too abstract to put the try/catch around the class definition? Should I only put it around instructions? For example:

```
define(['jquery'], function ($) {
    var Renderer = Class.extend({
      init: function() {
        try() {
          vor = {}; // bad script
        } catch(e) {
           [How to throw the error to App]
        }
      }
    });
    return Renderer;
}); 
```

One option I'm exploring is passing the app class as an argument for the renderer init, but is that bad practice? For example, updating the app script to use:

```
this.renderer = new Renderer(this); 
```

Then in the renderer script I'd have this:

```
....
init: function(app) {
   app.log.error({message:"My Error"}); 
```

# java - 将静态成员委派给扩展类 - Java

> ID：10421490
> 
> 赞同：2
> 
> 时间：2012-05-02T20:50:09.227
> 
> 标签：java, static-members, extends

**关于项目：** 我正在尝试用 Java 编写类似 CMS 的网站。以前我将 PHP 用于此类目的，但现在我需要与现有的用 java 编写的服务器端解决方案紧密集成，因此决定也将 Java 用于网站。目前，为了更容易开发，我为我的项目制作了一些“层次结构”：顶级“服务器”类（在最近的将来它将充满内容和功能，但现在它是空的），下一个子系统，扩展，以及其中任何一个的一部分 - 模块和块。每个都有一些限制和可能性，彼此不可用......也许还有其他方式，但目前我不知道。

我正在做某种缓存，这取决于事实，即我的动态 Web 项目的变量可以一直保存在内存中。例如，“树”代表所有这些元素，从数据库加载并保存在内存中，以及所有下一个请求（例如，扩展将此模块作为子模块 - 用于管理权限）在不询问数据库的情况下进行。

当然，出于这个目的，我需要有一些标志，它会告诉元素，他们的数据已更改，他们需要从数据库中刷新它。单个全局标志（例如在上下文中）很糟糕，而在几乎所有情况下，我都需要刷新单个元素或组。单个元素的标志已经完成，但是......

**关于实现：** 问题本身。假设我有类模块：

```
public abstract class Module{
    private final static boolean Changed;
    public static boolean getChanged(){
        return Changed;}
    public static void setChanged(boolean newState){
        Changed = newState;}
    public abstract String getName();
    public abstract String getTitle(HttpServletRequest request,
        HttpServletResponse response, ServletContext context);} 
```

我有一些模块：

```
public final class Articles extends Module{
    public class Article{...}
    private Tree<Article> ArticleList;
    public final ArrayList<Article> getArticlesInGroup(int groupID){
        if(getChanged())
            refreshFromDatabase();
        ...
    }
} 
```

在这里，例如，此标志用于更改某些全局首选项的情况，这可能会更改文章工作 - 例如，数据库上的某些操作，通过查询浏览器或其他执行 - 类“缓存”文章和组树（它没有保留整篇文章 - 只有标题、ID、ParentGroup 或其他一些......

**问题本身：**在 doGet(...) 中的 servlet Main 中，我执行了下一个代码：

```
if(request.getParameter("SetModify") && UsersManager.inGroup(currentUser,"Administrator")
    Module.setChanged(true); 
```

而且，我检查了，“Module.setChanged(true)”执行成功......但是当谈到文章类中的“getChanged()”时，我得到了错误......

是否有任何方法可以创建静态变量，在所有类中都是静态的，可以扩展它，或者我根本不明白什么？类文章中的案例“Module.getChanged()”也进行了测试 - 结果是一样的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:01:13.250

我很惊讶您的代码可以编译，因为您在这里使用了 'final' 关键字：

```
private final static boolean Changed; 
```

通常，您不应修改声明为 final 的成员。所以不应该允许设置器：

```
public static void setChanged(boolean newState){
     Changed = newState;} 
```

Protip：您可能希望研究一个更成熟的系统，例如带有 Spring 的 EhCache，以将数据库访问的所有这些“优化”与实际代码分离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:06:51.570

只需从

```
private final static boolean Changed; 
```

并且代码应该可以正常工作。

# c - 对我自己的库的未定义引用

> ID：10421491
> 
> 赞同：2
> 
> 时间：2012-05-02T20:50:09.400
> 
> 标签：c, gcc, static-libraries, undefined-reference, unix-ar

我已经创建了我的 lib.a 文件，其中有几个

```
gcc -c file.c -o file.o 
```

然后

```
ar sr lib/libtest.a file1.o file2.o file3.o 
```

确认

```
ar -t lib/libtest.a
file1.o
file2.o
file3.o 
```

但是当我尝试编译测试应用程序时

```
gcc lib/libtest.a test.c -o test 
```

我在函数中有未定义的引用`main`：从 file1.o、file2.o、file3.o 使用函数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T20:52:44.700

与图书馆订购事宜 - 尝试：

```
gcc test.c -o test lib/libtest.a 
```

基本上，链接器在输入文件列表中遇到库时会读取它（这可能不是事情的确切工作方式，但我认为它作为一个经验法则运行良好）并将解决任何仍然未定义的引用。当它移动到下一个输入时，它不会再次查看该库以查找它沿途拾取的任何新的未解析引用。

(Note: there are certain linker options that can change this behavior, but they seem to be rarely used and probably have their own set of drawbacks so I don't discuss them here. this kind of problem is usually resolved by reordering the linker's input file list).

# ios - Navigation Bar and Tab Bar when rotating

> ID：10421492
> 
> 赞同：0
> 
> 时间：2012-05-02T20:50:13.300
> 
> 标签：ios, tabbar, navigationbar

I have four controllers for the tab bar and it's views, when I rotate phone I want it to call the method shouldAutorotateToInterfaceOrientation for only one of the controllers but it calls the method for all of them.

How can I call shouldAutorotateToInterfaceOrientation for only one of the controllers?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:20:09.663

您不会“调用”这些方法，这些方法是为从 UIViewController 继承的任何类调用的方法。
没有理由不希望他们不被调用。
您可以做的是决定为您的任何控制器覆盖这些方法中的任何一个。
该方法返回一个布尔值，如果返回 true，则视图正在旋转，如果返回 false，则不是。

您还可以根据方向决定返回 YES/NO，以支持一种特定的方向

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

在这种情况下，仅当新方向为纵向时才会旋转视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:35:12.653

谢谢**JP Hribovsek**，我解决了这个问题，`beginGeneratingDeviceOrientationNotifications`当设备的方向改变时通知我。例如：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

[[NSNotificationCenter defaultCenter] addObserver: self 
                                         selector: @selector(deviceRotate:) 
                                             name: UIDeviceOrientationDidChangeNotification 
                                           object: nil];

-(void) deviceRotate: (NSNotification*) notification
{
    UIDeviceOrientation interfaceOrientation = [[UIDevice currentDevice] orientation];

    if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) {    
        NSlog(@"Landscape");    
    }
} 
```

# mysql - Searching MySQL in multiple columns and find which column matches

> ID：10421493
> 
> 赞同：0
> 
> 时间：2012-05-02T20:50:14.480
> 
> 标签：mysql

I need some advice on how to accomplish this. If I have a query like SELECT * FROM `catalog` WHERE `record_id` = $var OR `form_id` = $var;

What I want to do is to know which column matched. Was it the record or form?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:55:06.443

也许是这样的：

```
select a,b,c, 1 from catalog where record_id = $var
union
select a,b,c, 2 from catalog where form_id = $var 
```

然后 1 或 2 告诉你哪个是哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:08:00.497

```
SELECT *, 
CASE
    WHEN record_id = $var and form_id = $var THEN 'both'
    WHEN record_id = $var THEN 'record_id'
    WHEN form_id = $var   THEN 'form_id'
    ELSE 'none'     -- can't happen becouse of where clause
END CASE  as how_it_was
FROM catalog WHERE record_id = $var OR form_id = $var; 
```

请注意 $var 上的 sql 注入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:08:45.777

```
select *,
case when record_id = $var then 1 else 2 end as matches 
from table
where record_id = $var or form_id = $var 
```

# objective-c - Why is my UIProgressBar not being updated?

> ID：10421500
> 
> 赞同：0
> 
> 时间：2012-05-02T20:50:30.943
> 
> 标签：objective-c, ios

Here is how I am attempting to update my UIProgressView in my iOS app.

```
[self.progressView setProgress:3.0/10.0 animated:YES];

// check the value.
NSLog(@"Progress: %0.1f", self.progressView.progress); 
```

Why is NSLog outputting 0.0? Shouldn't it output 0.3? The progress bar isn't changing either.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:09:24.230

首先，确保在主线程上设置进度值。（这`self.progressView`实际上是指您的`UIProgressView`）

如果这没有帮助，您可能需要明确地给 runloop 一些时间来赶上 UI 更改，例如使用：

```
NSDate* futureDate = [NSDate dateWithTimeInterval:0.001 sinceDate:[NSDate date]];
[[NSRunLoop currentRunLoop] runUntilDate:futureDate]; 
```

但是，您应该非常小心使用这样的黑客，请参阅：

*   [调用 -[NSRunLoop runUntilDate:] 是个好主意吗？](https://stackoverflow.com/questions/4923621/is-calling-nsrunloop-rununtildate-a-good-idea)
*   [使用 [[NSRunLoop currentRunLoop] runUntilDate:[NSDate date]] 让预定的选择器触发](https://stackoverflow.com/questions/10371971/using-nsrunloop-currentrunloop-rununtildatensdate-date-to-let-the-schedul)
*   [NSRunloops 和强制事件处理](https://stackoverflow.com/questions/723608/nsrunloops-and-forcing-event-processing)

# android - 菜单的硬件按钮：修改

> ID：10421502
> 
> 赞同：0
> 
> 时间：2012-05-02T20:50:35.143
> 
> 标签：android, kernel

想知道是否有人知道硬件按钮在 Android 源代码中的编程位置。我现在正在使用 2.3.4，我希望能够替换按下最左边的硬件键时显示的“设置”按钮快捷方式。我已经尝试了几个小时的谷歌搜索，但没有运气......任何关于在源代码中可以修改的信息将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:16:49.837

我不完全确定这是否是您要查找的内容，但在设备主屏幕上弹出的菜单是由`onCreateOptionsMenu()`Launcher2 应用程序的 Launcher 活动中的方法创建的。

[这是](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.3.4_r1/com/android/launcher2/Launcher.java#Launcher)2.3.4 中使用的版本的源链接。如果您正在开发自定义启动器应用程序，那么当您的活动正在运行并按下 MENU 按钮时，就会触发该方法。

# c# - TinyIoC - Multiple Implementations of Interface

> ID：10421505
> 
> 赞同：8
> 
> 时间：2012-05-02T20:50:40.503
> 
> 标签：c#, dependency-injection, tinyioc

I am just beginning to learn about IoC and Dependency Injection. I am planning on doing a MonoTouch project and wanted to use TinyIoC but I wanted to test it out first. I'm creating a dummy credit card processing console app and I'm having trouble with how to configure TinyIoC since I have multiple implementations of my interface. This is my test app.

**Interface**:

```
public interface IPaymentProcessor
{
    void ProcessPayment(string cardNumber);
} 
```

Two Implementations of the interface:

**VisaPaymentProcessor**

```
public class VisaPaymentProcessor : IPaymentProcessor
{
    public void ProcessPayment(string cardNumber)
    {
        if (cardNumber.Length != 13 && cardNumber.Length != 16)
        {
            new ArgumentException("Card Number isn't the correct length");
        }

        // some code for processing payment
    }
} 
```

**AmexPaymentProcessor**

```
public class AmexPaymentProcessor : IPaymentProcessor
{
    public void ProcessPayment(string cardNumber)
    {
        if (cardNumber.Length != 15)
        {
            new ArgumentException("Card Number isn't the correct length");
        }

        // some code for processing the payment
    }
} 
```

Simple stuff. Now I have a class that accepts the interface as a parameter in the constructor....

**CreditCardProcessor**

```
public class CreditCardProcessor
{
    public IPaymentProcessor PaymentProcessor { get; set; }

    public CreditCardProcessor(IPaymentProcessor processor)
    {
        this.PaymentProcessor = processor;
    }

    public void ProcessPayment(string creditCardNumber)
    {
        this.PaymentProcessor.ProcessPayment(creditCardNumber);
    }
} 
```

My console app looks like this....

```
class Program
{
    static void Main(string[] args)
    {
        TinyIoCContainer.Current.AutoRegister();

        var creditCardProcessor = TinyIoCContainer.Current.Resolve<CreditCardProcessor>();
        creditCardProcessor.ProcessPayment("1234567890123456"); // 16 digits
    }
} 
```

So I am trying to figure out how to tell the `Resolve` which implementation of the interface to pass to the constructor. If I run this code, I will always use the `VisaPaymentProcessor` implementation.

So how can I make TinyIoC pass the `AmexPaymentProcessor` implementation to the constructor rather than the `VisaPaymentProcessor`(which seems to be the default)?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T21:00:55.687

I haven't used TinyIoC myself, but I suspect you want:

```
TinyIoCContainer.Current.Register(typeof(IPaymentProcessor),
                                  typeof(AmexPaymentProcessor)); 
```

(If you want to use Amex.)

There are various other `Register` overloads available, including one which takes a *name* to use, which may be useful when you resolve. It really depends on what you're trying to achieve, which isn't terribly clear from the question.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T23:54:39.840

Global.asax 或应用程序条目中的类似内容（针对您的示例进行了修改）

```
 const string nameTrim = "paymentprocessor"; 
        var type = typeof(IPaymentProcessor);
        AppDomain.CurrentDomain.GetAssemblies()
            .SelectMany(s => s.GetTypes())
            .Where(x => type.IsAssignableFrom(x) && x.IsClass).ToList()
            .ForEach(t =>
            {
                var name = t.Name.ToLower();
                if (name.EndsWith(nameTrim))
                    name = name.Substring(0, name.Length - nameTrim.Length);

                TinyIoCContainer.Current.Register(type, t, name);
            }); 
```

它找到 IPaymentProcessor 的所有实现并使用类名注册它们（-PaymentProcessor，如果类名以 PaymentProcessor 结尾）

然后我可以解决例如“AmexPaymentProcessor”

```
 IPaymentProcessor handler;
        if (TinyIoCContainer.Current.TryResolve("amex", out handler))
        {
            response = handler.ProcessPayment(cardNumber);
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T21:09:19.373

我不太确定你想在这里实现什么，但如果你有一个接口的多个实现并且你想要一个特定的实现，那么你需要为每个接口注册一个名称，或者使用 RegisterMultiple，它使用类型名称对于一个名称，然后使用该名称进行解析，并将其与 NamedParameterOverloads 一起使用来指定您想要的名称。

听起来更像是您可能想要某种 ProcessorFactory 或某种外观，它依赖于 IEnumerable 并根据传入的数字提供/充当正确实现的外观。

# shell - 在 Ksh Shell 中使用 FIND 搜索符号链接但忽略某些目录

> ID：10421508
> 
> 赞同：0
> 
> 时间：2012-05-02T20:50:48.647
> 
> 标签：shell, unix, find, ksh

我正在尝试在文件系统中搜索 *.csv 文件。我正在查看的某些目录中有符号链接，但我想忽略某些目录，因为它们会导致令人讨厌的长时间耗时周期。

```
find -L "location" -name "*.csv >> find_result.txt 
```

我如何告诉 find 忽略某些目录，同时继续查看其他目录中的符号链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:02:01.673

用于`-prune`告诉`find`不要进入给定目录。例如：

```
find -L location -name 'dontLookHere' -prune \
              -o -name 'orThereEither' -prune \
              -o -name '*.csv' -print 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:59:42.733

```
find dir -wholename dirtoskip -prune -o [rest of your find command] 
```

或者

```
find dir \( -wholename dirtoskip -o -wholename another \) -prune -o [rest of your find command] 
```

# c# - SmtpClient send mail

> ID：10421513
> 
> 赞同：3
> 
> 时间：2012-05-02T20:51:18.193
> 
> 标签：c#, email, smtp, smtpclient

I'm attempting to send mail through gmail using the below code, but I keep getting an errors stating "Unable to connect to the remote host". I've double-checked my config and everything looks fine to me. Anyone see something I'm missing?

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Mail;
using System.Net;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            SmtpClient client = new SmtpClient();
            client.UseDefaultCredentials = false;
            client.Credentials = new NetworkCredential("mymail@gmail.com", "mypass");
            client.Port = 587;
            client.Host = "smtp.gmail.com";
            client.EnableSsl = true;
            MailMessage mail = new MailMessage();
            mail.From = new MailAddress("mymail@gmail.com");
            mail.To.Add("tomail@tomail.org");
            mail.Subject = "subject thing";
            mail.Body = "dubbly doo";
            try
            {
                client.Send(mail);
            }
            catch(SmtpException e)
            {
                Console.Write(e.InnerException.Message);
                Console.ReadLine();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T21:38:58.873

您很可能在访问指定的主机和端口时遇到问题。这可能是一系列事情，其中​​一个被防火墙阻止。首先在命令提示符下使用 telnet 程序连接到主机和端口，即`telnet smtp.gmail.com 587`. 如果它确实连接，那么您可以通过按 ctrl+] 并`quit`在收到提示时键入来断开连接。如果 telnet 连接失败，请开始查看与防火墙/网络相关的问题。

您还可以通过将以下内容添加到应用程序的 .config 文件中来获取包含详细调试信息的文件：

```
<system.diagnostics>
  <sources>
    <source name="System.Net">
      <listeners>
        <add name="TraceFile"/>
      </listeners>
    </source>
    <source name="System.Net.Sockets" maxdatasize="1024">
      <listeners>
        <add name="TraceFile"/>
      </listeners>
    </source>
  </sources>
  <sharedListeners>
    <add name="TraceFile" type="System.Diagnostics.TextWriterTraceListener" initializeData="System.Net.trace.log" traceOutputOptions="DateTime"/>
  </sharedListeners>
  <switches>
    <add name="System.Net" value="Verbose"/>
    <!--<add name="System.Net.Sockets" value="Verbose"/>-->
  </switches>
  <trace autoflush="true" />
</system.diagnostics> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:01:17.517

将您的代码与[send-email-in-net-through-gmail](https://stackoverflow.com/questions/32260/sending-email-in-net-through-gmail)的答案进行比较。如果这是问题，则不是肯定的，但是您在创建 SmtpClient 时缺少以下内容：

```
DeliveryMethod = SmtpDeliveryMethod.Network 
```

链接问题的示例：

```
var smtp = new SmtpClient
{
    Host = "smtp.gmail.com",
    Port = 587,
    EnableSsl = true,
    DeliveryMethod = SmtpDeliveryMethod.Network,
    UseDefaultCredentials = false,
    Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T20:55:00.110

您是否设置了您的电子邮件帐户以允许 smtp.gmail.com？

[http://support.google.com/mail/bin/answer.py?hl=en&answer=13273](http://support.google.com/mail/bin/answer.py?hl=en&answer=13273)

# svn - Taking a complete dump of CVS repository

> ID：10421526
> 
> 赞同：1
> 
> 时间：2012-05-02T20:51:58.403
> 
> 标签：svn, cvs, dump, cvs2svn

I would like to take a dump of a CVS repository alone. Please suggest me if i can use cvs2svn tool to take a dump of whole CVS repository with complete History.

If i'm using cvs2svn, what steps should i follow?

Assuming if i have cvs2svn installed, cvs2svn --dumpfile=PROJECT.dump PATH/TO/CVS/REPOSITORY Does this command help in taking a dump for whole repository with complete history of revision.

Note: Here i would like to take dump of CVS repo, i will be loading this repo in another CVS repos.

Kindly point me out if there is an existing topic of this. Any help would be appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-12T16:19:32.633

是的，只是为了备份整个 CVS 存储库，您可以只备份`.zip`您`.tar.gz`的存储库。正如 the_mandrill 所说，它将保留 cvs 原因的所有修订，没有像 svn 这样的数据库。如果您想将此存储库移动到另一个地方，只需解压缩它，删除`CVSROOT`目录并在该目录上执行 cvs init。就这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:27:34.497

`cvs2svn`仅用于将 CVS 存储库迁移到 SVN。它将完整转储整个 CVS 存储库，并将合并在相似时间和相同提交消息中发生的单个文件的提交。这些将成为单个 SVN 修订版。您将无法使用它将 CVS 存储库移动到另一台机器，只能迁移到 SVN。

# python - Python Regex to search for NOT and AND expression

> ID：10421527
> 
> 赞同：2
> 
> 时间：2012-05-02T20:51:59.733
> 
> 标签：python, regex, regex-negation

Lots of great regex answers here but I haven't been able to find anything that works for me. Here is the situation:

I have a large list of numbers. Let's say it is just a list of numbers from 1 to 100 and I only want to use the list that contains 10, 20, and 50\. But the way the code is built (and can't be changed!) is to ignore by the regex expression not accept. So, I can't just say `^10$|^20$|^50$` instead I need to NOT them and then AND them.

I have tried this:

```
(?!^10$)(?!^20$)(?!^50$) 
```

with no luck and can't seem to find anything anywhere that is working.

Any thoughts? Many Thanks!

p.s. I just made this particular example up to show what I am doing, I wouldn't be using regex is this was the actual problem I had....:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T23:25:16.557

如果我正确理解您的问题，您需要的是这样的：

```
(?!^10$)(?!^20$)(?!^50$)^.*$ 
```

当该行有不同于`"10"`,`"20"`或的内容时，这匹配`"50"`。

但是，这似乎是处理您的问题的一种相当麻烦的方式。这条线上的更多内容不是更好吗？

```
import re
pattern = re.compile(r"^(?:10|20|50)$")
for text in list_of_texts:
  m = pattern.match(text)
  if m is not None:
    print "Found something interesting (not 10, nor 20 nor 50): %s" % text 
```

# git - 如何在 git 中存储未合并的代码？

> ID：10421531
> 
> 赞同：11
> 
> 时间：2012-05-02T20:52:04.333
> 
> 标签：git, git-merge, merge-conflict-resolution

我做了一个 git pull ，发现我的一个文件需要合并。

我现在真的不想合并那个文件——我还有另一个分支需要处理，稍后我会回到这个分支来解决合并问题。

对我来说“撤消”这种拉动的最佳行动方案是什么？或者在我准备好处理它之前，我如何才能推迟这个合并？我需要做什么才能更改分支，然后在我的代码中返回到这个未合并状态？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T20:58:50.013

这是一个很好的例子，说明了为什么我认为进行 fetch 而不是 pull 是个好主意。

您可以做的只是将您的分支重置为之前的状态..

```
git reset --hard HEAD~1 
```

或者如果您已经处于合并的中间（解决冲突），只需中止它..

```
git merge --abort 
```

完成您的更改，然后...

```
git fetch
...have a look at what's changed 
git merge origin/branch 
```

查看发生了什么变化的一种简单方法是

```
git cherry branch origin/branch -v --abbrev=6 
```

这将为您提供原始分支中但不在您的分支中的提交列表......如果您需要该提交中更改内容的详细信息，那么

```
git show commit --name-status 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:58:02.993

如果您希望消除当前 HEAD 上的更改，那`git reset --hard`是您的门票。这应该允许您交换分支并返回到该分支并在以后重做此合并。

如果你正在变基，`git rebase --abort`也会取消操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T13:25:29.827

`git stash`在我执行导致合并冲突的操作后抱怨未合并的更改`git stash pop`，但我已经手动解决了它们。

做`git add .`，然后`git stash`工作得很好。

# c# - 限制线程创建

> ID：10421535
> 
> 赞同：1
> 
> 时间：2012-05-02T20:52:18.687
> 
> 标签：c#, .net, multithreading, security

是否可以在 C# 中控制线程（尤其是从它创建的线程）的某些权限？

我正在开发一个 C# 应用程序，其中创建了一个新线程并执行某些用户给定的代码。

如何控制用户代码 CAN 和 CANNOT 执行的操作？这可能吗？

特别是，我想限制使用代码对某些 API 的访问。

一个具体的例子是我想禁用从用户代码中产生新线程的能力。

*这样做的原因是用户代码*可能会*产生新的线程，这些线程本身**可能**无法处理异常，从而导致整个应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:14:16.803

没有内置的方法来阻止在 .Net 中创建线程，因为创建胎面不需要任何额外的权限。

还有多种方式可以让用户的代码产生另一个线程。

如果您的目标是执行敌对的外部程序集，您需要保护的不仅仅是线程创建（即 StackOverflowException 很容易抛出并在不创建新线程的情况下关闭进程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:31:36.197

你为什么不试试这个代码。

Application.ThreadException += OnHandledException;

private static void OnHandledException(object sender, ThreadExceptionEventArgs e) { //这里处理 }

如果您担心未处理的异常。该片段可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:33:11.007

将应用程序与“插件”隔离的一种方法是使用单独的 AppDomain 来托管它。然而，这并不容易，主要是因为绝缘需要对引用进行编组。您永远不能直接引用另一个 AppDomain 中的实例，因为这会破坏绝缘，因此 .NET 支持复杂的代理模型。这样做的缺点是，您的所有代码都必须在编写时考虑到这种代理，您的代理引用对象派生自 MarshalByRefObject 并且所有非代理对象必须支持序列化以通过复制跨越远程边界。所有这些自然也会带来性能影响。但是，一旦您完成了这项工作，您现在可以允许 AppDomain “崩溃”而不会关闭整个应用程序，

孤立的下一步是创建一个外部托管进程并使用某种形式的进程间通信与外部代码进行交互。这为您提供了出色的隔离性（甚至可以防止大多数非托管代码不规则：AppDomain 中的错误非托管代码仍然会导致整个应用程序崩溃），但它会增加更多的复杂性和性能开销。

# actionscript-3 - AS3 AIR 应用程序 - getItemAt 无法在 DataGrid 中跟踪项目

> ID：10421538
> 
> 赞同：0
> 
> 时间：2012-05-02T20:52:27.443
> 
> 标签：actionscript-3, debugging, actionscript, air

嗨，这个函数在 AIR 或其他东西中不存在，因为我正在尝试以下跟踪作为测试，它在我的脸上抛出了一个胖错误，

```
trace(musicLibrary.getItemAt(3)[0]); 
```

Musiclibrary 是我只是使用行号和列号作为测试的数据网格，但有什么问题吗？

```
TypeError: Error #1006: getItemAt is not a function 
```

我不明白，因为我无法在任何地方找到它说这不是网络上的有效功能。有人知道吗？

编辑：添加了我最终使用的内容。

只是为了让其他人知道我最终使用了这个：

```
var songName:String = libraryDP.getItemAt(currentSongNumber+1).Song; 
```

我试图在 dataprodiver 中获取对象的值，数据被添加到这样的数组中。

```
musicLibrary.push({Song:arr[i].name,Location:arr[i].nativePath}); 
```

希望这可以帮助某人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:57:11.930

数据网格没有定义 getItemAt 方法。但是，您可以在数据网格的数据提供程序上调用该方法，如下所示`musicLibrary.dataProvider.getItemAt(3)`：

希望这可以帮助。祝你有美好的一天。

# c# - IsUserInRole 未能满足真实条件

> ID：10421539
> 
> 赞同：0
> 
> 时间：2012-05-02T20:52:29.420
> 
> 标签：c#, asp.net-mvc-3, razor, openid

我正在尝试将 OpenID 集成到我的 MVC3 Razor 应用程序中。OpenID 正在工作，但是当我尝试测试用户在角色中的成员资格时，测试失败。

两个角色：

“MainUser”和一个名为“User”的用户。“GuestUser”和一个名为“Guest”的用户。

这是我的 Logon.cshtml 中的表单

```
<form action="Authenticate?ReturnUrl=@HttpUtility.UrlEncode(Request.QueryString["ReturnUrl"])" method="post" id="openid_form">
<input type="hidden" name="action" value="verify" />
<div>
    <fieldset>
        <legend>Login using OpenID</legend>
        <div class="openid_choice">
            <p>
                Please click your account provider:</p>
            <div id="openid_btns">
            </div>
        </div>
        <div id="openid_input_area">
            @Html.TextBox("openid_identifier")
            <input type="submit" value="Log On" />
        </div>
        <noscript>
            <p>
                OpenID is service that allows you to log-on to many different websites using a single
                indentity. Find out <a href="http://openid.net/what/">more about OpenID</a> and
                <a href="http://openid.net/get/">how to get an OpenID enabled account</a>.</p>
        </noscript>
        <div>
            @if (Model != null)
            {
                if (String.IsNullOrEmpty(Model.UserName))
                {
                  <div class="editor-label">
                      @Html.LabelFor(model => model.OpenID)
                  </div>
                  <div class="editor-field">
                      @Html.DisplayFor(model => model.OpenID)
                  </div>
                  <p class="button">
                      @Html.ActionLink("New User ,Register", "Register", new { OpenID = Model.OpenID })
                  </p>
                }
                else
                {
                //user exist 
                  <p class="buttonGreen">

                    @Model.UserName,

                    @if (Roles.IsUserInRole("MainUser"))
                      { <a href="@Url.Action("Index", "Main")">Welcome @Model.UserName, Continue... </a> }

                    @if (Roles.IsUserInRole("GuestUser"))
                      { <a href="@Url.Action("Index", "Guest")">Welcome @Model.UserName, Continue... </a> }

                      <a href="@Url.Action("Index", "Main")">Role test failed for @Model.UserName  </a>
                  </p>
                }
            }
        </div>
    </fieldset>
</div>
</form> 
```

我运行该应用程序并成功使用 OpenId 进行身份验证并获得一个绿色块，其中包含：用户，用户角色测试失败

这显示以“用户”身份成功登录，并进入 else 代码块，但 IsUserInRole 测试失败。

如果我将 not 运算符添加到第一个测试 [ @if (!Roles.IsUserInRole("MainUser")) ] 测试通过。

问题是为什么“用户”未能通过 IsUserInRole 测试。我已经三重检查了我所有的角色和用户拼写是否正确，并且用户的角色是正确的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:05:18.303

如果您只使用 OpenId 而没有 FormsAuthentication 的任何支持，则可能是 RoleProvider 不知道如何检查角色。该`Roles.IsUserInRole`方法依赖于`RoleProvider.IsUserInRole`检查当前活动用户是否属于所请求的角色。`RoleProvider.IsUserInRole`根据 MSDN 文档的实际返回值为：

> 如果指定用户在配置的 applicationName 的指定角色中，则为 true；否则为假。

这个**applicationName**应该在 web.config 文件中设置。如果您没有使用 RoleProvider，那么这就是您的检查一直失败的原因。RoleProvider 在 configuration/system.web 中定义如下：

```
<roleManager enabled="true" cacheRolesInCookie="true">
    <providers>
        <clear />
        <add connectionStringName="YourDbConnectionString" 
             applicationName="MySampleAppName"
             name="AspNetSqlRoleProvider" 
             type="System.Web.Security.SqlRoleProvider" />
    </providers>
</roleManager> 
```

当然，这需要您将角色存储在 aspnetdb 数据库中。但是，如果这不适合您，您可以实现自己的 RoleProvider。

# android - Osmdroid，如何创建一个保持在地图中心的静态覆盖项

> ID：10421550
> 
> 赞同：1
> 
> 时间：2012-05-02T20:53:35.923
> 
> 标签：android, map, android-mapview, osmdroid

我已经搜索了上下以找出如何放置一个不固定到 GeoPoint（即地理坐标）的覆盖项，而是保持在视图中的固定点（例如 MapView 的中心）而不管移动/在地图中滚动。

MapView 有一个 .addView() 方法。我尝试使用可绘制的视图创建视图，但视图将固定在地图上，就像覆盖项一样，这不是我想要的。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:47:22.060

当然，如果您只是想将某些东西固定在显示屏的中心，而不是在 mapView 上，那么您就大错特错了。overlayItems 与 GeoPoints 相关联，这就是它们的目的。

只需将它创建为任何类型的新的、普通的 android 视图对象，然后将其添加到主视图中，在 MapView 的顶部，放置在您需要的任何地方？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:36:42.120

使用您的地图和视图制作框架布局。在您的视图中填充背景，并将其水平和垂直居中，以使背景在您的地图上居中。

```
<FrameLayout 
       android:id="@+id/form_lin_map"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:orientation="vertical"
       android:layout_gravity="center_horizontal|center_vertical">

       <org.osmdroid.views.MapView
        android:id="@+id/form_mapView"
        android:layout_width="fill_parent"
        android:layout_height="220dp"
        android:enabled="true"
        android:clickable="true"
        android:paddingBottom="10dp"
        />

        <View
         android:id="@+id/form_View"
         android:layout_width="40dp"
         android:layout_height="40dp"
         android:layout_gravity="center_horizontal|center_vertical"
         android:background="@drawable/cross" />
    </FrameLayout>' 
```

# objective-c - Xcode 4.2 如何使文本字段全屏

> ID：10421553
> 
> 赞同：1
> 
> 时间：2012-05-02T20:53:48.310
> 
> 标签：objective-c, uitextfield, fullscreen

只是一个简单的问题，到目前为止我似乎找不到任何例子。

当用户单击它时，我正在尝试使 Xcode 中的文本字段全屏显示。我需要的只是全屏扩展字段的代码，因此在用户输入文本时其他字段等不可见。然后，一旦用户完成并单击完成，上一个屏幕将返回，输入的文本保存在字段内。
有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:08:34.270

```
CGRect oldFrame = myTextFieldOutlet.frame;
myTextFieldOutlet.frame = CGRectMake(0,0,320,460); 
```

...然后当您想将其恢复为正常时...

```
myTextFieldOutlet.frame = oldFrame; 
```

公平地说，我认为您最好为您以模态方式呈现的文本视图（并从中返回文本）提供一个单独的视图，而不是您正在谈论的内容。

# c# - 使用 backgroundworker 显示一个长时间运行的进程仍在工作

> ID：10421558
> 
> 赞同：0
> 
> 时间：2012-05-02T20:54:17.323
> 
> 标签：c#, .net, multithreading, backgroundworker

我有一个相当长的运行过程，现在我的应用程序冻结了一段时间。

我如何将此过程包装在后台工作人员中并为用户提供状态。

我知道理想情况下，流程本身必须报告其进度，但我认为我无法构建它。并不是我无法更改该流程中的代码，而是我不想更改太多。

如果我可以在后台工作人员中启动该过程以便我的应用程序保持响应，我会很好。现在我可以做到了。但问题是，有没有一种简单的方法可以让一些进度条做一些事情来表明进程仍在运行？

```
private void worker_DoWork(object sender, DoWorkEventArgs e)
{
    StartLongRunningProcess();
} 
```

我的代码现在就像上面一样，我想知道如何以某种方式包装该过程以更新进度条？或者有没有一种简单的方法可以从这个过程中获取更多信息而不完全改变它的代码？在那个长时间运行的进程中，有一个修改过的行计数器正在运行，但它只在完成时返回一个值。

我知道 backgroundworker 和它的 ReportProgress 选项是如何工作的，但问题是该进程只是运行并且在运行时不提供任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:12:32.317

如果将 WorkerReportsProgress 属性设置为 true，则可以使用 ProgressChanged 事件。

```
BackgroundWorker bw = new BackgroundWorker{WorkerReportsProgress = true}
bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);

private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
   var percent = e.ProgressPercentage;
   //update progress bar here
} 
```

然后在您的工作中，您可以报告进度。

```
private void bw_DoWork(object sender, DoWorkEventArgs e)
{   
   BackgroundWorker worker = sender as BackgroundWorker;    
   e.Result = StartLongRunningProcess(worker);
}

public void StartLongRunningProcess(BackgroundWorker worker)
{
   worker.ReportProgress(percentComplete);
} 
```

[你可以在这里](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)找到完整的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:57:14.567

一旦你启动了 worker，主 UI 线程就可以自由地做它想做的任何事情。此时，您需要做的就是开始显示您想要的任何动画，通过计时器或您想要的任何其他机制进行更新。只需确保在工作人员完成后停止/隐藏动画即可。

# iphone - Json在IOS中解析错误

> ID：10421559
> 
> 赞同：0
> 
> 时间：2012-05-02T20:54:25.083
> 
> 标签：iphone, ios, json, parsing

嗨，我在 IOS 中解析 json 时遇到了一些问题。这是json数据。

```
{
"app_info": [
    {
        "app_name": "haka",
        "sync_protocol_version": "1"
    }
],
"updates": [
    {
        "timestamp": "Sat Apr 21 13:04:08 IST 2012",
        "people": [
            {
                "personal_info": [
                    {
                        "first_name": "phlox",
                        "last_name": "",
                        "employee_id": "010",
                        "gender": "-",
                        "marital_status": "-",
                        "nationality": "Denobulan",
                        "dob": "re-23",
                        "photo": "http://c.cc/users/010/profile/image"
                    }
                ],
                "contact_details": [
                    {
                        "address": [
                            {
                                "street": "#1, this way",
                                "city": "tank",
                                "state": "sick bay",
                                "zip": "0978",
                                "country": "Enterprise"
                            }
                        ],
                        "telephone": [
                            {
                                "work": "010",
                                "mobile": "010",
                                "home": "010"
                            }
                        ],
                        "email": [
                            {
                                "work": "phlox@nx-10.ent",
                                "personal": ""
                            }
                        ]
                    }
                ],
                "emergency": [
                    {
                        "contact": [
                            {
                                "name": "-",
                                "relationship": "",
                                "telephone": [
                                    {
                                        "work": "",
                                        "home": "",
                                        "mobile": ""
                                    }
                                ]
                            }
                        ],
                        "blood_group": ""
                    }
                ],
                "categorization": [
                    {
                        "designation": "",
                        "department": "",
                        "location": "",
                        "joining_date": ""
                    }
                ]
            },
            {
                "personal_info": [
                    {
                        "first_name": "",
                        "last_name": "",
                        "employee_id": "",
                        "gender": "",
                        "marital_status": "",
                        "nationality": "",
                        "dob": "",
                        "photo": ""
                    }
                ],
                "contact_details": [
                    {
                        "address": [
                            {
                                "street": "",
                                "city": "",
                                "state": "",
                                "zip": "",
                                "country": ""
                            }
                        ],
                        "telephone": [
                            {
                                "work": "",
                                "mobile": "",
                                "home": ""
                            }
                        ],
                        "email": [
                            {
                                "work": "",
                                "personal": ""
                            }
                        ]
                    }
                ],
                "emergency": [
                    {
                        "contact": [
                            {
                                "name": "",
                                "relationship": "",
                                "telephone": [
                                    {
                                        "work": "",
                                        "home": "",
                                        "mobile": ""
                                    }
                                ]
                            }
                        ],
                        "blood_group": ""
                    }
                ],
                "categorization": [
                    {
                        "designation": "",
                        "department": "",
                        "location": "",
                        "joining_date": ""
                    }
                ]
            }
        ],
        "messages": [
            {
                "sender": "Archer<admin@nx-10.ent>",
                "sender_role": "admin",
                "message_type": "broadcast",
                "message": "parking space up for grabs",
                "message_recipients": "all",
                "reply_permitted": "0"
            }
        ],
        "events": [
            {
                "creator": "Travis<ensign@nx-01.ent>",
                "event_title": "",
                "event_description": "",
                "event_time_start": "",
                "event_time_end": "",
                "location": "",
                "invitees": [
                    {
                        "id": "020",
                        "acceptance": "1"
                    }
                ]
            }
        ],
        "settings": [
            {
                "sync_frequency": "0"
            }
        ]
    }
]} 
```

这是一个有效的 json 格式。我已经使用[http://jsonlint.com/](http://jsonlint.com/)并使用[http://braincast.nl/samples/jsoneditor/检查了它](http://braincast.nl/samples/jsoneditor/)

查看 json 值的结构。根据结构，人员标签应返回计数 2，因为它有 2 个对象，但在解析时只返回 1。我完全没有选择。请帮助各位。

这是我用来解析的代码

```
NSString *textPAth = [[NSBundle mainBundle] pathForResource:@"sync" ofType:@"json"];
NSError *error;
NSString *content = [NSString stringWithContentsOfFile:textPAth encoding:NSUTF8StringEncoding error:&error];    
NSArray *jsonArray = [[content JSONValue] retain]; 
NSLog(@"JSON ARRAY   %@   AND COUNT  %d",[[jsonArray valueForKey:@"updates"] valueForKey:@"people"],[[[jsonArray valueForKey:@"updates"] valueForKey:@"people"]  count]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:04:16.423

我不确定为什么每个字典都用一个数组包装，当只有 1 个条目（不必要）时，但如果你想解析它，你会想要这样的东西：

```
NSDictionary *jsonDict = [[content JSONValue] retain];
NSArray *updatesArray = [jsonDict objectForKey:@"updates"];
NSDictionary *updatesDict = [updatesArray objectAtIndex:0];
NSArray *peopleArray = [updatesDict objectForKey:@"people"];
NSLog(@"People count: %i", [peopleArray count]);
for (NSDictionary *peopleDict in peopleArray) {
    //do something
} 
```

作为旁注，如果这是您的 JSON，您将需要删除实际上不是数组的条目的 [arrays]。虽然您仍然可以解析它，但这意味着您必须先读取数组，然后从 objectAtIndex:0 获取字典，这完全是低效且毫无意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:01:53.990

会不会是您的每个对象都包装在一个数组中并给出了意想不到的结果？

# cobol - 在 COBOL 中为地址标签程序添加标题

> ID：10421560
> 
> 赞同：2
> 
> 时间：2012-05-02T20:54:28.737
> 
> 标签：cobol

您好，我是 cobol 的初学者，需要一些功课帮助。我正在尝试编写一个在输出上打印地址标签的程序。但在输出中必须有标题、页码和日期。我已经成功地让程序以标签格式打印地址，但似乎无法让标题行（带有页面和日期）显示在其上方。使用我的程序时，会出现一个错误代码，说明我对数据文件的访问模式错误。我不确定这意味着什么。这是我的程序。我删除了日期部分只是为了尝试在地址上方获取标题行。*编辑：我已经为“打印头输出”添加了打开和关闭，但现在它给了我错误代码“文件锁定”任何人都可以对此有所了解。

```
 ENVIRONMENT DIVISION.
   INPUT-OUTPUT SECTION.
   FILE-CONTROL.

   SELECT LABEL-FILE-IN
   ASSIGN TO 'C0603.DAT'
   ORGANIZATION IS LINE SEQUENTIAL.

   SELECT LABEL-FILE-OUT
   ASSIGN TO 'C0603.RPT'
   ORGANIZATION IS LINE SEQUENTIAL.

   SELECT PRINT-HEADER-OUT
   ASSIGN TO 'C0603.RPT'
   ORGANIZATION IS LINE SEQUENTIAL.

   DATA DIVISION.
   FILE SECTION.

   FD LABEL-FILE-IN.
   01 LABEL-RECORD-IN.
   05 CUST-NAME-IN PIC X(20).
   05 ADDRESS-IN PIC X(20).
   05 CITY-STATE-ZIP-IN PIC X(20).

   FD LABEL-FILE-OUT.
   01 LABEL-RECORD-OUT.
   05 PRINT-LABEL-OUT PIC X(20).

   FD  PRINT-HEADER-OUT.
   01  REPORT-OUT                  PIC X(80).

             WORKING-STORAGE SECTION.
   01  ARE-THERE-MORE-RECORDS PIC X(3) VALUE 'YES'.

   01  HEADING-LINE1.
       05                          PIC X(40) VALUE SPACES.
       05                          PIC X(12) VALUE
           "MAILING LIST".

   01  DATE-WS.
       05 MONTH-WS                 PIC XX.
       05 YEAR-WS                  PIC XX.

   01  DATE-WS-OUT.
       05                           PIC X(45) VALUE SPACES.
       05  MONTH-WS-OUT              PIC XX.
       05                          VALUE "/".
       05  YEAR-WS-OUT               PIC XX.

             PROCEDURE DIVISION.

   000-MAIN-MODULE.
       PERFORM 100-INITIALIZATION-MODULE.
       PERFORM 200-PROCESS-ONE-RECORD
           UNTIL ARE-THERE-MORE-RECORDS = "NO ".
       PERFORM 900-TERMINATION-MODULE.
       STOP RUN.

   100-INITIALIZATION-MODULE.
       OPEN OUTPUT PRINT-HEADER-OUT
       OPEN INPUT LABEL-FILE-IN
       OPEN OUTPUT LABEL-FILE-OUT
       ACCEPT DATE-WS FROM DATE.
       MOVE MONTH-WS TO MONTH-WS-OUT.
       MOVE YEAR-WS TO YEAR-WS-OUT.
       PERFORM 600-READ-MODULE.
       PERFORM 300-TOP-OF-PAGE-MODULE.

   200-PROCESS-ONE-RECORD.
       MOVE SPACES TO PRINT-LABEL-OUT

       MOVE CUST-NAME-IN TO PRINT-LABEL-OUT
       WRITE LABEL-RECORD-OUT

       MOVE ADDRESS-IN TO PRINT-LABEL-OUT
       WRITE LABEL-RECORD-OUT

       MOVE CITY-STATE-ZIP-IN TO PRINT-LABEL-OUT
       WRITE LABEL-RECORD-OUT

   PERFORM 600-READ-MODULE.

   300-TOP-OF-PAGE-MODULE.
       MOVE HEADING-LINE1 TO REPORT-OUT.
       WRITE REPORT-OUT AFTER ADVANCING 9 LINES.
       MOVE DATE-WS-OUT TO REPORT-OUT.
       WRITE REPORT-OUT AFTER ADVANCING 1 LINES.

   600-READ-MODULE.
       READ LABEL-FILE-IN
            AT END MOVE "NO " TO ARE-THERE-MORE-RECORDS
       END-READ.

   900-TERMINATION-MODULE.
       CLOSE PRINT-HEADER-OUT.
       CLOSE LABEL-FILE-IN.
       CLOSE LABEL-FILE-OUT. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:19:34.230

我认为您遇到的问题是两者都`LABEL-FILE`指向`HEADER-FILE`同一个物理文件（'C0603.RPT'）。您可以这样做，但一次只能打开其中一个。当您尝试以不同的名称再次打开它时，这是“文件锁定”消息的来源。

执行此操作的典型方法是打开一个文件，但有多个记录定义用于写入。

删除：

```
 SELECT PRINT-HEADER-OUT
    ASSIGN TO 'C0603.RPT'
    ORGANIZATION IS LINE SEQUENTIAL. 
```

并更改 LABEL-FILE-OUT 的 FD 以包含 Header 记录...

```
 FD LABEL-FILE-OUT.
    01.
       05 LABEL-BUFFER              PIC X(80).
       05 LABEL-RECORD-OUT REDEFINES LABEL-BUFFER.
          10 PRINT-LABEL-OUT PIC X(20).
          10                 PIC X(60).
       05 PRINT-HEADER-OUT REDEFINES LABEL-BUFFER.
          10 REPORT-OUT      PIC X(80). 
```

还有其他方法可以做到这一点，但基本思想是拥有一个至少与最大输出记录一样大的输出缓冲区，并且`REDEFINE`可以用于多种用途（标签或标题）。

写入标签行或标题行时，只需`WRITE LABEL-BUFFER`在每次写入后使用 SPACES 并将其移动到其中，以确保在重新填充任何从属数据项之前正确初始化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:39:34.160

“错误代码指出我对数据文件的访问模式错误”是因为执行 WRITE REPORT-OUT 语句时 PRINT-HEADER-OUT 文件未打开。所有文件在使用前都必须打开，并且在使用完后应始终关闭。

# wpf - 如何使用可绑定的 ConverterParameters 制作转换器？

> ID：10421561
> 
> 赞同：1
> 
> 时间：2012-05-02T20:54:37.510
> 
> 标签：wpf, xaml, .net-4.0, converter

大多数转换器不带参数，或者只带一个固定参数，并且很容易绑定到：

```
<local:MyConverter x:Key="MyConverterInstance" />

<TextBox Text="{Binding Path=MyTime, 
                        Converter={StaticResource MyConverterInstance},
                        ConverterParameter='yyyy/MM/dd'}" /> 
```

但是，如果我希望该格式成为用户可以更改的动态属性，我不能做这样的事情，对吧？：

```
<TextBox Text="{Binding Path=MyTime, 
                        Converter={StaticResource MyConverterInstance},
                        ConverterParameter={Binding Path=UserFormat}}" /> 
```

所以我唯一的选择是在 MyConverter 上定义一个 DependencyProperty 进行绑定。但我的转换器定义是一个静态资源。我不能去

```
<local:MyConverter x:Key="MyConverterInstance" 
                   Format="{Binding Path=UserFormat}"/> 
```

因为StaticResources 上没有DataContext。我该如何设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T23:53:57.787

您不能绑定到转换器参数，但可以使用 Multibinding 代替。例如：[http](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-multibindings) ://www.switchonthecode.com/tutorials/wpf-tutorial-using-multibindings 或[如何简单地将其绑定到 ConverterParameter？](https://stackoverflow.com/questions/5920684/how-to-simply-bind-this-to-converterparameter)

（阿兰）所以只是将链接的答案翻译成与这个问题相匹配的东西：

```
<TextBlock>
    <TextBlock.Resources>
        <local:MyConverter x:Key="MyConverterInstance" />
    </TextBlock.Resources>
    <TextBlock.Text>
        <MultiBinding Converter="{StaticResource converter}">
            <Binding Path="MyTime" />
            <Binding Path="UserFormat" />
        </MultiBinding>
    </TextBlock.Text>
</TextBlock>

public class MyConverter : IMultiValueConverter
{
  public object Convert(object[] values, Type targetType, object parameter,
      System.Globalization.CultureInfo culture)
  {
    DateTime time = (DateTime)values[0];
    string format = values[1].ToString();
    return time.ToString(format);
  }

  public object[] ConvertBack(object value, Type[] targetTypes, object parameter,
      System.Globalization.CultureInfo culture)
  {
    throw new NotImplementedException();
  }
} 
```

# javascript - Uncaught TypeError: Cannot read property 'document' of undefined in IE and Chrome Firefox 没问题

> ID：10421563
> 
> 赞同：0
> 
> 时间：2012-05-02T20:54:39.533
> 
> 标签：javascript

我面临一个我不明白的奇怪错误。在 Firefox 11 中一切正常。Chrome 和 IE 9 遇到了麻烦，并为此行给出了相同的错误：

> 未捕获的类型错误：无法读取未定义的属性“文档”

```
 curr_url_id=window.content.document.location.href; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:56:35.227

试试吧`window.location.href`。

如果您实际上是在尝试访问 iframe 的位置，请尝试`iframe.contentWindow.location.href`

# javascript - 获取触发事件的元素的值

> ID：10421568
> 
> 赞同：13
> 
> 时间：2012-05-02T20:54:59.360
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [选择内部文本（jQuery）](https://stackoverflow.com/questions/1644342/select-inner-text-jquery)

我有一个跨度：

```
<span class="test"> target_string </span> 
```

以及在点击页面的任何元素时触发的事件。

```
$('body').click(function(event){
  if ($(event.target).attr('class') == 'test'){
    alert(???);
  }
} 
```

如何获取 target_string 值？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-02T20:55:54.097

Use `$(event.target).text()` to get the text.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T20:59:29.587

从身体委派可能更有效：

```
$('body').on('click', '.test', function(event){
    alert($(this).text())
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T20:57:03.983

Try below,

```
$('body').click(function(event){
  var $targ = $(event.target);
  if ($targ.hasClass('test')){
    alert($targ.text());
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T21:19:44.247

不确定您是否打算在该事件处理程序中使用除具有测试类的元素之外的其他元素，但这可能更简洁：

```
$('.test').click(function(event){
    alert($(this).text());
}); 
```

# c++ - 编译 c++ 时架构 x86_64 的未定义符号

> ID：10421570
> 
> 赞同：0
> 
> 时间：2012-05-02T20:55:06.400
> 
> 标签：c++, compiler-errors

我不断收到这个错误，这让我发疯！

```
Undefined symbols for architecture x86_64:
  "SSResourcesDepot::_sharedInstance", referenced from:
    SSResourcesDepot::sharedInstance() in SSResourcesDepot.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我的代码如下所示：

```
#ifndef SolarSystem_SSResourcesDepot_h
#define SolarSystem_SSResourcesDepot_h
#include "SSResource.h"

/* SSResourcesDepot is implemented as a Singleton Depot that keeps track of all
 * requested Resource objects, and avoid loading them twice in memory. */
class SSResourcesDepot {

    SSResourcesDepot() {};
    SSResourcesDepot(SSResourcesDepot const&){};
    SSResourcesDepot& operator=(SSResourcesDepot const&){};

    static SSResourcesDepot* _sharedInstance;

    SSResource* _search(std::string resourceName);
    SSResource* _load(std::string resourceName);

public:
    static SSResourcesDepot* sharedInstance();
    SSResource* requestResource(std::string resourceName);

};

#endif 
```

和：

```
#include <iostream>
#include "SSResourcesDepot.h"

#pragma mark Public methods
SSResourcesDepot* SSResourcesDepot::sharedInstance() {
    if (SSResourcesDepot::_sharedInstance == 0) {
        SSResourcesDepot::_sharedInstance = new SSResourcesDepot();
    }
    return SSResourcesDepot::_sharedInstance;
}

SSResource* SSResourcesDepot::requestResource(std::string resourceName) {
    SSResource *resource = this->_search(resourceName);
    if (resource == NULL) resource = this->_load(resourceName);
    return resource;
}

#pragma mark Private methods
SSResource* SSResourcesDepot::_search(std::string resourceName) {
    return NULL;
}

SSResource* SSResourcesDepot::_load(std::string resourceName) {
    return NULL;
} 
```

它对我来说似乎完全正常，但 Apple-O-Matcher 一直在抱怨，而且它不允许我编译...... :-S

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:57:06.420

You didn't initialize your `static` member.

Add

```
SSResourcesDepot* SSResourcesDepot::_sharedInstance = NULL; 
```

to your implementation file.

# asp.net - 实现静态类型对象的轻量级方法

> ID：10421572
> 
> 赞同：1
> 
> 时间：2012-05-02T20:55:14.450
> 
> 标签：asp.net, sql-server-2008, data-binding, orm

我继承了一个带有 SQL Server 后端的 ASP.NET 应用程序，该后端最初传递了很多数据集。我已经重构代码很长一段时间了，所以它现在主要是传递静态类型的对象。

我目前正在使用 Enterprise Library 的 ExecuteSprocAccessor 来实现我的对象。我实际上发现它是一个相当干净和优雅的解决方案，但我们最终将拥有数百个站点，每个站点运行一个代码实例，我认为企业库是一个非常繁重的解决方案，当我只需要物化对象时。

我通常远离 ORM，因为我发现当我尝试做非标准的事情时它们会妨碍我，我宁愿对代码有更多的控制权，而不是生成由 ORM 管理的数千行代码。随着我继续清理，数据模型将发生相当大的变化。

我对 Micro-ORM 很感兴趣，但不喜欢 Dapper 的语法，也不喜欢 Massive 不是静态类型的。

所以，我正在寻找一个好的轻量级解决方案的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T04:05:34.783

PetaPoco 是一个理想的解决方案。与 T4 模板的集成可以非常快速地通过 Visual Studio 拉入数据结构。这是一种快速、轻量且灵活的解决方案。

# c++ - 为什么 __PRETTY_FUNCTION__ 叫 __PRETTY_FUNCTION__？

> ID：10421580
> 
> 赞同：8
> 
> 时间：2012-05-02T20:55:51.260
> 
> 标签：c++, objective-c, gcc

我在这个网站上看到`__PRETTY_FUNCTION__`了很多问题的答案，我理解这个函数的用处，但是为什么要调用它`__PRETTY_FUNCTION__`呢？这不是一个丑陋的功能，但也不是很漂亮。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T21:01:00.303

我认为它被称为`__PRETTY_FUNCTION__`是因为它是“装饰的” `__FUNCTION__`（至少在 C++ 中，在 C 中它们都是等价的）。在 C++ 中，还会显示返回类型和参数类型。

请注意，两者`__PRETTY_FUNCTION__`都不`__FUNCTION__`是 C，但 GNU C.`__func__`是 C。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-29T11:19:47.307

它可能源自“pretty-print”这个表达，意思是纯文本文件（如程序源）的风格格式。

见[http://en.wikipedia.org/wiki/Prettyprint](http://en.wikipedia.org/wiki/Prettyprint)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:03:54.907

这是 GCC 中的一个构造，它在 C++ 中输出函数的类型签名，与 C 中的同义词`__func__`：

[http://gcc.gnu.org/onlinedocs/gcc/Function-Names.html](http://gcc.gnu.org/onlinedocs/gcc/Function-Names.html)

# css - How to remove border from specific PrimeFaces p:panelGrid?

> ID：10421581
> 
> 赞同：60
> 
> 时间：2012-05-02T20:55:52.063
> 
> 标签：css, jsf, primefaces, facelets

I have difficulty in removing border from a specific PrimeFaces `<p:panelGrid>`.

```
<p:panelGrid styleClass="companyHeaderGrid">
    <p:row>
        <p:column>
            Some tags
        </p:column>
        <p:column>
            Some tags
        </p:column>
    </p:row>
</p:panelGrid> 
```

I have been able to remove border from the cells with:

```
.companyHeaderGrid td {
    border: none;
} 
```

But

```
.companyHeaderGrid {
    border: none;
} 
```

Does not work.

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-05-02T21:00:35.193

The border is been set on the generated `tr` and `td` elements, not on the `table`. So, this should do:

```
.companyHeaderGrid.ui-panelgrid>*>tr,
.companyHeaderGrid.ui-panelgrid .ui-panelgrid-cell {
    border: none;
} 
```

How I found it? Just check the generated HTML output and all CSS style rules in the webdeveloper toolset of Chrome (rightclick, *Inspect Element* or press F12). Firebug and IE9 have a similar toolset. As to the confusion, just keep in mind that JSF/Facelets ultimately generates HTML and that CSS only applies on the HTML markup, not on the JSF source code. So to apply/finetune CSS you need to look in the client (webbrowser) side instead.

![enter image description here](../Images/6d264fb2d67995e617b6544f2e9ab371.png)

### See also:

*   [How do I override default PrimeFaces CSS with custom styles?](https://stackoverflow.com/questions/8768317/how-do-i-override-default-primefaces-css-with-custom-styles/)
*   [Remove border from all PrimeFaces p:panelGrid components](https://stackoverflow.com/questions/18897664/remove-border-from-all-primefaces-ppanelgrid-components)

* * *

If you're still on PrimeFaces 4 or older, use below instead:

```
.companyHeaderGrid.ui-panelgrid>*>tr,
.companyHeaderGrid.ui-panelgrid>*>tr>td {
    border: none;
} 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2017-01-11T07:58:18.647

我正在使用 Primefaces 6.0，为了从我的面板网格中删除边框，我使用了这个样式类“ui-noborder”，如下所示：

```
<p:panelGrid columns="3" styleClass="ui-noborder">
   <!--panel grid contents -->
</p:panelGrid> 
```

它在 primefaces lib 中使用名为“components”的 css 文件

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-06-28T15:23:43.243

这对我有用：

```
.ui-panelgrid td，.ui-panelgrid tr
{
    边框样式：无！重要
}

```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-25T16:38:21.250

如果 BalusC 答案不起作用，请尝试以下操作：

```
.companyHeaderGrid td {
     border-style: hidden !important;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-26T17:11:18.717

如果您在列之间找到一条线，请使用以下代码，

```
.panelNoBorder, .panelNoBorder tr, .panelNoBorder td{
border: hidden;
border-color: white;
} 
```

我用 Primefaces 5.1 检查了这个

```
<h:head>
     <title>Login Page</title>    
     <h:outputStylesheet library="css" name="common.css"/>
</h:head> 

<p:panelGrid id="loginPanel" columns="3" styleClass="panelNoBorder">
<p:outputLabel value="Username"/> <p:inputText id="loginTextUsername"/>
<p:outputLabel value="Password"/> <p:password id="loginPassword"/>
<p:commandButton id="loginButtonLogin" value="Login"/> <p:commandButton id="loginButtonClear" value="Clear"/>
</p:panelGrid> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-30T22:09:36.483

现在，Primefaces 5.x 在 panelGrid 中有一个名为“columnClasses”的属性。

```
.no-border {
    border-style: hidden !important ; /* or none */
} 
```

因此，对于具有 2 列的 panelGrid，重复两次 css 类。

```
<p:panelGrid columns="2" columnClasses="no-border, no-border"> 
```

对于其他元素，丑陋的“！important”不是必需的，但对于我来说，只要有它的边框就可以了。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-21T05:58:59.293

尝试

```
<p:panelGrid styleClass="ui-noborder"> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-09T10:57:56.000

只需在您的自定义 css mycss.css 上添加这些行

```
table tbody .ui-widget-content {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 0 solid #FFFFFF;
    color: #333333;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-19T08:33:56.097

正如 BalusC 所提到的，边界由 PrimeFaces 在生成的`tr`和`td`元素上设置，而不是在`table`. 然而，当尝试使用 PrimeFaces 版本 5 时，看起来 PrimeFaces CSS 中有更具体的匹配，`.ui-panelgrid .ui-panelgrid-cell > solid`这仍然会导致在应用建议的样式时显示黑色边框。

尝试使用以下样式以在不使用声明的情况下覆盖 Primefaces 之一`!important`：

```
.companyHeaderGrid tr, .companyHeaderGrid td.ui-panelgrid-cell {
    border: none;
} 
```

如前所述，确保您的 CSS[在 PrimeFaces 之后加载](https://stackoverflow.com/a/8774997/4201470)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-26T16:26:05.583

对我来说只有以下代码有效

```
.noBorder tr {
border-width: 0 ;
}
.ui-panelgrid td{
    border-width: 0
}

<p:panelGrid id="userFormFields" columns="2" styleClass="noBorder" >
</p:panelGrid> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-19T09:20:55.757

对于没有边界的传统以及所有现代主题，请应用以下内容；

```
<!--No Border on PanelGrid-->
    <h:outputStylesheet>
        .ui-panelgrid, .ui-panelgrid td, .ui-panelgrid tr, .ui-panelgrid tbody tr td
        {
            border: none !important;
            border-style: none !important;
            border-width: 0px !important;
        }
    </h:outputStylesheet> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-23T08:33:35.900

我将面板网格放在数据表中，因此我的工作解决方案是

```
.ui-datatable-scrollable-body .myStyleClass tbody td{border:none;} 
```

为了

```
<h:panelGrid  styleClass="myStyleClass" >...</h:panelGrid> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-05-09T16:57:42.740

如果你只是想要更简单的东西，你可以改变：

```
<p:panelGrid >

</p:panelGrid> 
```

至：

```
<h:panelGrid border="0">

</h:panelGrid> 
```

这对我来说很好

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-25T07:03:40.683

在 primefaces 中，theme.css 将具有以下代码，我们只需要将 styleClass 指定为 'ui-panelgrid-blank'。所以这将删除 panelGrid 组件的边框。

```
.ui-panelgrid.ui-panelgrid-blank {
  border: 0 none;
  background: none;
}

<p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank">
</p:panelGrid> 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-06-11T09:48:47.857

请也试试这个

```
.ui-panelgrid tr, .ui-panelgrid td {
border:0 !important;
} 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2013-08-12T06:16:25.740

使用以下样式修改删除 Primefaces 单选按钮的边框

```
.ui-selectoneradio td, .ui-selectoneradio tr
{
    border-style: none !important
} 
```

# c++ - reduce arguments

> ID：10421586
> 
> 赞同：-2
> 
> 时间：2012-05-02T20:56:12.350
> 
> 标签：c++, optimization

My question is that I have two arguments `vector<int>& ivec` and `const int& numb`. is there a way to eliminate `const int& numb`? I just want to do add 10 to all elements in the vector. Also I want to eliminate `if` part, since it's empty. Thanks in advance. Please do it recursively. My goal it to use as few arguments as possible in a recursive function.

```
#include <iostream>
#include <vector>
using namespace std;
vector<int> addten(vector<int>& ivec, const int& numb) {
  if (numb == 0) {

  } else { 
    ivec[numb - 1] += 10;
    addten(ivec, numb - 1);
  }
    return ivec;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T20:57:58.810

你的代码感觉很奇怪。执行此操作的 C++y 方法是：

```
std::vector<int> vec; // your vector
// adds 10 in place
std::transform(vec.begin(), vec.end(), vec.begin(), 
               std::bind(std::plus<int>(), _1, 10));
// adds 10 out-of-place 
std::vector<int> result;
std::transform(vec.begin(), vec.end(), std::back_inserter(result),
               std::bind(std::plus<int>(), _1, 10)); 
```

正如您特别要求的那样，我在 C++ 中实现了一个**非常糟糕** 的功能，它只能在迭代器上而不是在迭代器上运行。`foldl``vector<T>`

```
#include <vector>
#include <iostream>

// well, here comes C++ origami
template<typename Start, typename F, typename T>
Start foldl(Start s, F f, const std::vector<T>& v) {
  return foldl_impl(s, f, v, 0);
}

template<typename Start, typename F, typename T>
Start foldl_impl(Start s, F f, const std::vector<T>& v, 
                 typename std::vector<T>::size_type t) {
  if(t == v.size()) return s;
  typename std::vector<T>::size_type t2 = t++;
  return foldl_impl(f(s, v[t2]), f, v, t);
}

int main()
{
  std::vector<int> vec = {1, 2, 3, 4, 5, 6, 7};

  std::vector<int> added = 
    foldl(std::vector<int>()
          , [](std::vector<int>& v, int i) { v.push_back(i+10); return v;}
          , vec);
  for(auto x : added) { 
    std::cout << x << std::endl;
  }

  return 0;
} 
```

请考虑这远非良好的 C++ 风格。

# spring - 弹簧安全不工作。我究竟做错了什么？

> ID：10421588
> 
> 赞同：0
> 
> 时间：2012-05-02T20:56:22.330
> 
> 标签：spring, spring-security

正如标题所暗示的那样，我在简单的 Spring Security 测试中遇到了一些小问题。这是我的项目结构（maven webapp 2.5）：

```
main
 java
   de
     cochu
       spring
         controller
           HomeController
webapp
  WEB-INF
    jsp
      home.jsp
      index.jsp
    security-context.xml
    spring-servlet.xml
    web.xml 
```

web.xml：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/security-context.xml
    </param-value>
</context-param>

<filter>
    <filter-name>filterChainProxy</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>filterChainProxy</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/spring/*</url-pattern>
</servlet-mapping> 
```

spring-servlet.xml

```
<context:annotation-config/>
<context:component-scan base-package="de.cochu.spring.controller"/>

<bean id="internalViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value="/WEB-INF/jsp/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

安全上下文.xml

```
<security:http auto-config="true" use-expressions="true">
    <security:intercept-url pattern="/**" access="ROLE_USER"/>
</security:http>

<security:authentication-manager>
    <security:authentication-provider>
        <security:user-service>
            <security:user name="test" password="test" authorities="ROLE_USER"/>
        </security:user-service>
    </security:authentication-provider>
</security:authentication-manager> 
```

家庭控制器.java

```
@Controller
@RequestMapping( "/" )
public class HomeController {

    @RequestMapping( method = RequestMethod.GET )
    public String show() {
        return "index";
    }

    @RequestMapping( value = "/secure", method = RequestMethod.GET )
    public String secure() {
        return "home";
    }
} 
```

确切的问题：没有登录表单或任何正在打开的表单。它只是显示页面。我尝试了几乎所有 url-pattern 组合/intercept-url 组合，但没有任何反应。怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T07:51:14.567

`FilterChainProxy`bean 已使用别名注册，因此`springSecurityFilterChain`请尝试修改您的 web.xml 并更改它

```
<filter>
    <filter-name>filterChainProxy</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter> 
```

对此

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter> 
```

这是我通常使用的配置（使用spring security 3.1.0.RELEASE）

# qt - Why is it more efficient to remove a QGraphicsItem from its scene before destroying it?

> ID：10421589
> 
> 赞同：10
> 
> 时间：2012-05-02T20:56:23.047
> 
> 标签：qt, qgraphicsitem, qgraphicsscene

According to the [QGraphicsItem destructor documentation](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#dtor.QGraphicsItem), "It is more efficient to remove the item from the QGraphicsScene before destroying the item."

Why is that? I can't think of how it could make a difference. And if it did make a difference, shouldn't the QGraphicsItem destructor just call:

```
if (scene() != NULL)
    scene()->removeItem(this); 
```

I checked the source, and this does not seem to be the case, although sometimes I have a tough time understanding Qt source. **EDIT**: See comments in jdi's answer.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T21:04:49.390

也许我对文档的解释与您不同（我没有查看源代码）：

> QGraphicsItem::~QGraphicsItem () [虚拟]
> 销毁 QGraphicsItem 及其所有子项。如果该项目当前与场景相关联，则该项目将在删除之前从场景中移除。
> 注意：在销毁项目之前从 QGraphicsScene 中删除项目更有效。

我认为这意味着它会在销毁之前先将其从场景中移除，**因为**这样更有效。但是，如果您说来源没有指出发生这种情况的任何地方，那么文档似乎是错误的？

如果我不得不猜测为什么在销毁它之前先删除它会更有效（不管API是否真的在析构函数中为你做），我认为这与触发器有关要重新索引的场景。也许通过删除仍在场景中的项目，子项目的级联删除会不断触发场景重新索引。然而，如果您先删除该项目，它可能会以只需要一次更新场景的方式有效地拉出整个层次结构，然后可以正常删除而不进一步影响它？当其他子事件/信号在场景中被删除时，它们甚至可能会有更多的级联效果。

我打赌“注意”背后的逻辑是通知那些将子类化 QGraphicsItem 并重载析构函数的人，以记住首先需要从场景中删除。

# web-services - creating user sitemap

> ID：10421601
> 
> 赞同：2
> 
> 时间：2012-05-02T20:57:09.677
> 
> 标签：web-services, sitemap

I have got a web site, I need to create a sitemap for users, I mean just creating a page, say sitemap.jsp and create a text link to each page? is there any useful tool to get all the link, instead of having to put the links manually?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:40:31.847

两个选项是 A1 Sitemap Generator（商业）或 GSiteCrawler（免费） - 您也可以在网上搜索更多替代方案（有很多！）

# jquery - jQuery通过事件实时更改var - 不起作用

> ID：10421609
> 
> 赞同：0
> 
> 时间：2012-05-02T20:57:46.763
> 
> 标签：jquery

如何在设置[https://github.com/trentrichardson/UberUploadCropper/blob/master/example-advanced/index.php](https://github.com/trentrichardson/UberUploadCropper/blob/master/example-advanced/index.php)中实时更改“aspectRatio”。

```
$(function() {

$.("#test1").click( function () {
    $ratio = 1;
});
$.("#test2").click( function () {
    $ratio = 2;
});

$('#UploadImages').uberuploadcropper({

...

'aspectRatio': $ratio, 
```

它不起作用。为什么？如何正确制作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:58:36.100

定义一个全局变量`$ratio`。

例子：

```
var $ratio; //Define a global variable like this
$(function() {

    $("#test1").click( function () {
        $ratio = 1;
        initPlugin();
    });
    $("#test2").click( function () {
        $ratio = 2;
        initPlugin();
    });

    function initPlugin() {    
        $('#UploadImages').uberuploadcropper({

             ...

             'aspectRatio': $ratio, //now the value will be taken from global scope
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:01:08.483

删除点**。**后`$.("`

```
$("#test1").click( function () {
    $ratio = 1;
});
$("#test2").click( function () {
    $ratio = 2;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:05:25.537

您在设置变量之前调用插件。当点击事件触发时，您必须调用 .uberuploadcropper。尝试这样的事情：

```
$(function() {
    $.("#test1").click( function () {
        uploadCropper(1);
    });
    $.("#test2").click( function () {
        uploadCropper(2);
    });

    function uploadCropper(ratio){
        $('#UploadImages').uberuploadcropper({

            ...

            'aspectRatio': ratio, //now the value will be taken from global scope
        });
    }
}); 
```

# php - 匹配给定 IP 范围/掩码的 IPv4 地址？

> ID：10421613
> 
> 赞同：7
> 
> 时间：2012-05-02T20:58:00.603
> 
> 标签：php, regex, ip-address

使用 PHP 或 RegExp（或两者），如何匹配 IP 地址范围？

## 传入 IP 示例

```
10.210.12.12
10.253.12.12
10.210.12.254
10.210.12.95
10.210.12.60 
```

## 样本范围

```
10.210.12.0/24
10.210.12.0/16
10.210.*.*
10.*.*.* 
```

我知道我可以这样做：

```
?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?) 
```

...但它没有考虑范围。它只是让您匹配传入的号码以查看它是否是每个八位字节为 0-255 的 IP 地址。

**编辑：**

我在 php.net 上关于 ip2long 函数的评论中还发现了这个函数。

```
function ip_in_network($ip, $net_addr, $net_mask){ 
    if($net_mask <= 0){ return false; } 
        $ip_binary_string = sprintf("%032b",ip2long($ip)); 
        $net_binary_string = sprintf("%032b",ip2long($net_addr)); 
        return (substr_compare($ip_binary_string,$net_binary_string,0,$net_mask) === 0); 
} 

ip_in_network("192.168.2.1","192.168.2.0",24); //true 
ip_in_network("192.168.6.93","192.168.0.0",16); //true 
ip_in_network("1.6.6.6","128.168.2.0",1); //false 
```

它简短而甜蜜，但与星号的情况不符。我也不知道它是否完全准确，因为当我认为它是错误的时，它会返回一个真实的结果：

```
echo ip_in_network("192.168.2.1","192.167.0.0",1); 
```

...但也许我误解了 /1 是什么。也许我需要使用 /24。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T22:29:28.990

我改编了一个来自 php.net 的答案并使它变得更好。

```
function netMatch($network, $ip) {
    $network=trim($network);
    $orig_network = $network;
    $ip = trim($ip);
    if ($ip == $network) {
        echo "used network ($network) for ($ip)\n";
        return TRUE;
    }
    $network = str_replace(' ', '', $network);
    if (strpos($network, '*') !== FALSE) {
        if (strpos($network, '/') !== FALSE) {
            $asParts = explode('/', $network);
            $network = @ $asParts[0];
        }
        $nCount = substr_count($network, '*');
        $network = str_replace('*', '0', $network);
        if ($nCount == 1) {
            $network .= '/24';
        } else if ($nCount == 2) {
            $network .= '/16';
        } else if ($nCount == 3) {
            $network .= '/8';
        } else if ($nCount > 3) {
            return TRUE; // if *.*.*.*, then all, so matched
        }
    }

    echo "from original network($orig_network), used network ($network) for ($ip)\n";

    $d = strpos($network, '-');
    if ($d === FALSE) {
        $ip_arr = explode('/', $network);
        if (!preg_match("@\d*\.\d*\.\d*\.\d*@", $ip_arr[0], $matches)){
            $ip_arr[0].=".0";    // Alternate form 194.1.4/24
        }
        $network_long = ip2long($ip_arr[0]);
        $x = ip2long($ip_arr[1]);
        $mask = long2ip($x) == $ip_arr[1] ? $x : (0xffffffff << (32 - $ip_arr[1]));
        $ip_long = ip2long($ip);
        return ($ip_long & $mask) == ($network_long & $mask);
    } else {
        $from = trim(ip2long(substr($network, 0, $d)));
        $to = trim(ip2long(substr($network, $d+1)));
        $ip = ip2long($ip);
        return ($ip>=$from and $ip<=$to);
    }
}

function ech($b) {
    if ($b) {
        echo "MATCHED\n";
    } else {
        echo "DID NOT MATCH\n";
    }
}

echo "CLASS A TESTS\n";
ech(netMatch('10.168.1.0-10.168.1.100', '10.168.1.90'));
ech(netMatch('10.168.*.*', '10.168.1.90'));
ech(netMatch('10.168.0.0/16', '10.168.1.90'));
ech(netMatch('10.169.1.0/24', '10.168.1.90'));
ech(netMatch('10.168.1.90', '10.168.1.90'));
echo "\nCLASS B TESTS\n";
ech(netMatch('130.168.1.0-130.168.1.100', '130.168.1.90'));
ech(netMatch('130.168.*.*', '130.168.1.90'));
ech(netMatch('130.168.0.0/16', '130.168.1.90'));
ech(netMatch('130.169.1.0/24', '130.168.1.90'));
ech(netMatch('130.168.1.90', '130.168.1.90'));
echo "\nCLASS C TESTS\n";
ech(netMatch('192.168.1.0-192.168.1.100', '192.168.1.90'));
ech(netMatch('192.168.*.*', '192.168.1.90'));
ech(netMatch('192.168.0.0/16', '192.168.1.90'));
ech(netMatch('192.169.1.0/24', '192.168.1.90'));
ech(netMatch('192.168.1.90', '192.168.1.90'));
echo "\nCLASS D TESTS\n";
ech(netMatch('230.168.1.0-230.168.1.100', '230.168.1.90'));
ech(netMatch('230.168.*.*', '230.168.1.90'));
ech(netMatch('230.168.0.0/16', '230.168.1.90'));
ech(netMatch('230.169.1.0/24', '230.168.1.90'));
ech(netMatch('230.168.1.90', '230.168.1.90'));
echo "\nCLASS E TESTS\n";
ech(netMatch('250.168.1.0-250.168.1.100', '250.168.1.90'));
ech(netMatch('250.168.*.*', '250.168.1.90'));
ech(netMatch('250.168.0.0/16', '250.168.1.90'));
ech(netMatch('250.169.1.0/24', '250.168.1.90'));
ech(netMatch('250.168.1.90', '250.168.1.90')); 
```

结果是：

```
CLASS A TESTS
from orig network (10.168.1.0-10.168.1.100) used network (10.168.1.0-10.168.1.100) for (10.168.1.90)
MATCHED
from orig network (10.168.*.*) used network (10.168.0.0/16) for (10.168.1.90)
MATCHED
from orig network (10.168.0.0/16) used network (10.168.0.0/16) for (10.168.1.90)
MATCHED
from orig network (10.169.1.0/24) used network (10.169.1.0/24) for (10.168.1.90)
DID NOT MATCH
used network (10.168.1.90) for (10.168.1.90)
MATCHED

CLASS B TESTS
from orig network (130.168.1.0-130.168.1.100) used network (130.168.1.0-130.168.1.100) for (130.168.1.90)
MATCHED
from orig network (130.168.*.*) used network (130.168.0.0/16) for (130.168.1.90)
MATCHED
from orig network (130.168.0.0/16) used network (130.168.0.0/16) for (130.168.1.90)
MATCHED
from orig network (130.169.1.0/24) used network (130.169.1.0/24) for (130.168.1.90)
DID NOT MATCH
used network (130.168.1.90) for (130.168.1.90)
MATCHED

CLASS C TESTS
from orig network (192.168.1.0-192.168.1.100) used network (192.168.1.0-192.168.1.100) for (192.168.1.90)
MATCHED
from orig network (192.168.*.*) used network (192.168.0.0/16) for (192.168.1.90)
MATCHED
from orig network (192.168.0.0/16) used network (192.168.0.0/16) for (192.168.1.90)
MATCHED
from orig network (192.169.1.0/24) used network (192.169.1.0/24) for (192.168.1.90)
DID NOT MATCH
used network (192.168.1.90) for (192.168.1.90)
MATCHED

CLASS D TESTS
from orig network (230.168.1.0-230.168.1.100) used network (230.168.1.0-230.168.1.100) for (230.168.1.90)
MATCHED
from orig network (230.168.*.*) used network (230.168.0.0/16) for (230.168.1.90)
MATCHED
from orig network (230.168.0.0/16) used network (230.168.0.0/16) for (230.168.1.90)
MATCHED
from orig network (230.169.1.0/24) used network (230.169.1.0/24) for (230.168.1.90)
DID NOT MATCH
used network (230.168.1.90) for (230.168.1.90)
MATCHED

CLASS E TESTS
from orig network (250.168.1.0-250.168.1.100) used network (250.168.1.0-250.168.1.100) for (250.168.1.90)
MATCHED
from orig network (250.168.*.*) used network (250.168.0.0/16) for (250.168.1.90)
MATCHED
from orig network (250.168.0.0/16) used network (250.168.0.0/16) for (250.168.1.90)
MATCHED
from orig network (250.169.1.0/24) used network (250.169.1.0/24) for (250.168.1.90)
DID NOT MATCH
used network (250.168.1.90) for (250.168.1.90)
MATCHED 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T18:27:45.870

我对上面的例子进行了改进（我有一个带有 /29 的网络掩码，所以它不起作用）。

```
function check_netmask($mask, $ip) {
    @list($net, $bits) = explode('/', $mask);
    $bits = isset($bits) ? $bits : 32;
    $bitmask = -pow(2, 32-$bits) & 0x00000000FFFFFFFF;
    $netmask = ip2long($net) & $bitmask;
    $ip_bits = ip2long($ip)  & $bitmask;
    return (($netmask ^ $ip_bits) == 0);
} 
```

如果您想查看它的实际效果，请添加以下内容：

```
print("IP Bits: " . str_pad(decbin(ip2long($ip)), 32, '0', STR_PAD_LEFT));
print "\n";
print("Bitmask: " . str_pad(decbin($bitmask), 32, '0', STR_PAD_LEFT));
print "\n";
print("Netmask: " . str_pad(decbin($netmask), 32, '0', STR_PAD_LEFT));
print "\n";
print("Match:   " . str_pad(decbin($netmask ^ $ip_bits), 32, '0', STR_PAD_LEFT));
print "\n"; 
```

用这样的东西运行它：

```
print var_dump(check_netmask($argv[1], $argv[2])); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T21:01:09.653

转换为 32 位无符号并使用布尔/位运算。

例如，将 192.168.25.1 转换为 0xC0A81901。

然后，您可以通过转换掩码的点分十进制部分（即 0xC0A81900）并创建一个 24 位掩码（即 0xFFFFFF00）来查看它是否与掩码 192.168.25/24 匹配。

在所讨论的地址和掩码之间执行按位与运算，并与掩码规范的点分十进制部分进行比较。例如，

```
0xC0A81901 AND 0xFFFFFF00 ==> 0xC0A81900 (result)

compare 0xC0A81900 (result) to 0xC0A81900. 
```

我不知道 PHP，但 google 告诉我 PHP 有 inet_pton()，这是我在 C 中用来执行从点分十进制到 n 位无符号的转换。见[http://php.net/manual/en/function.inet-pton.php](http://php.net/manual/en/function.inet-pton.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-21T09:16:43.647

使用这个库：[https ://github.com/S1lentium/IPTools](https://github.com/S1lentium/IPTools)

```
//Check if IP is within Range:

echo Range::parse('192.168.1.1-192.168.1.254')->contains(new IP('192.168.1.5')); // true
echo Range::parse('::1-::ffff')->contains(new IP('::1234')); // true 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T21:00:58.673

正则表达式听起来确实不是处理子网掩码的正确工具（至少不是十进制的）。可以做到，但会很丑。

我强烈建议将字符串解析为 4 个整数，组合成 32 位 int，然后使用标准的按位运算（基本上是按位与，然后进行比较）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-02T21:04:45.097

使用 strpos 将它们匹配为字符串。

```
<?php
$ips = array();
$ips[0] = "10.210.12.12";
$ips[1] = "10.253.12.12";
$ips[2] = "10.210.12.254";
$ips[3] = "10.210.12.95";
$ips[4] = "10.210.12.60";

$matches = array();

foreach($ips as $ip){
    if(strpos($ip, "10.253.") === 0){
        $matches[] = $ip;
    }
}

print_r($matches);
?> 
```

# hyperlink - 如何在 Oracle ApEx 中动态生成图像映射的 url？

> ID：10421617
> 
> 赞同：0
> 
> 时间：2012-05-02T20:58:12.990
> 
> 标签：hyperlink, oracle-apex

场景：

我有一个从表格中提取记录的 ApEx 页面。该记录包含图表的`id`, `name`（实际上是文件名）和[图像映射](http://www.w3schools.com/tags/tag_map.asp "w3学校")的代码，`NVARCHAR2`称为`image_map`.

当我渲染页面时，我有一个嵌入的 HTML 区域，它使用`#WORKSPACE_IMAGES#&P19_IMAGE.`替换作为图像的图像来拉取`src`图像。

每个图表都有热点（在`image_map`html 标记中定义）指向同一 ApEx 页面上的其他图表。我需要嵌入：

*   应用程序 ID（如`&APP_ID.`）
*   会话（喜欢`&APP_SESSION.`）

我的问题：

当我尝试将`&APP_ID`作为源的一部分加载到数据库中时，它会预先解析它并插入 ApEx 开发应用程序的值（例如`4500`）而不是实际的目标应用程序（`118`）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:38:30.127

没有很多反馈——猜我在做一些非典型的事情？

如果其他人试图这样做，我最终使用的解决方法是运行 javascript 并替换 url 中的一些自定义替换标志。该脚本嵌入在页面模板中，并将 APEX 魔术字段分配给局部变量，例如：

`var my_app_id = '&APP_ID';`

不漂亮，但它的工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:50:06.153

好的 - 我想我已经把这个打开了足够长的时间......如果其他人试图（错误）以类似的方式使用 apex，似乎“apex 方式”是使用动态动作（这似乎stable from `4.1.x`) 然后您可以从那里进行动态替换，而不是在页面本身中嵌入 js。

这似乎是最可维护的，所以我将其标记为答案 - 但如果其他人有更好的想法，我愿意接受教育！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T13:55:17.910

我发现很难在指向另一个页面的链接上设置动态 URL - 直接 - 尝试将完整 URL 作为单个链接目标包含在内是行不通的，至少在我的简单世界中，我不是专家（作为 AJ说：任何智慧都值得赞赏）。

相反，我通过链接设置了 url 的各个组件，并在目标页面上设置了一个“Before Header”PL/SQL 进程，以将元素组合成一个完整的 url 并将其分配给完整的 url 页面项：

```
APEX_UTIL.set_session_state(
  'PG_FULL_URL',
  'http...'||
     v('PG_URL_COMPONENT1')||
     v('PG_URL_COMPONENT2')||
  '..etc..'
); 
```

...其中 PG_FULL_URL 是“显示图像”类型的项目，“基于”“存储在页面项目值中的图像 URL”。

这是 Apex 5.1 顺便说一句，我不知道其中一些选项在这个版本中是否是新的。

# jquery - jquery和变量

> ID：10421619
> 
> 赞同：0
> 
> 时间：2012-05-02T20:58:31.983
> 
> 标签：jquery, html

我是新手。我有这个 jquery

```
<script type="text/javascript">
 $(document).ready(function () {
      $(".squares div").click(function () {
           var colorSource = $(this).css("background-color");
           $(".squares div").click(function () {
                $(this).css("background-color", colorSource);
                }
           });
      });
 }); 
```

基本上，当我单击正方形时，它会保存颜色，然后单击另一个正方形并复制颜色。问题是当我点击第三个方块时，它会从方块中复制颜色，我已经改变了它的颜色。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:04:28.097

我想你想复制上次访问的正方形的颜色，然后试试下面，

```
 $(function () {
    var colorSource = '';
    $(".squares div").click(function () {

       if (colorSource== '') {
          colorSource= $(this).css("background-color");
       } else {
          $(this).css("background-color", colorSource);
          colorSource = ''; 
         //Originally ^-- colorSource= $(this).css("background-color");
       }
    });
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:14:52.210

您只需将第一次单击的颜色（如果 document.currentColor 为空 - 这是第一次）存储在全局变量中，对于随后的单击，您只需采用此颜色并将其分配给您单击的方块。那是你要的吗？

```
$(document).ready(function () {
    document.currentColor = null;
      $(".squares div").click(function () {
       if (document.currentColor == null) {
              document.currentColor = $(this).css("background-color");
       } else {
                $(this).css("background-color", document.currentColor);
       }
      });
 }); 
```

# javascript - IE6 滚动故障

> ID：10421624
> 
> 赞同：0
> 
> 时间：2012-05-02T20:58:46.073
> 
> 标签：javascript, internet-explorer-6, onscroll

我有`<div>`一些内容。我给这个 div 一个 id 属性，并通过这个小脚本`oDIV`将一个函数绑定到事件：`onscroll`

```
window.onload = {
    document.getElementById("oDiv").onscroll = function() {
        document.getElementById("tooltip").className = "sTooltip";
        this.onscroll = null;
    };  
} 
```

我在 div 中添加了一些简单的 CSS，这样就会出现一个垂直滚动条。内容延伸了很多，有很多滚动。

```
#oDiv {
     border: 1px solid black;
     float: left;
     height: 300px;
     overflow: auto;
     overflow-x: hidden;
     padding: 0;
     padding-right: 40px;
     clear: left;
} 
```

无论如何，如果用户尝试滚动，我希望出现一个工具提示，以提醒用户有一个过滤器选项可以隐藏他们必须滚动的一些内容。

在 Firefox 和更新的浏览器中，它工作得很好。

我遇到的问题是我必须支持 IE6，这种方法在 IE6 中确实有效，但有一个小问题。如果您通过左键单击并按住并在触发事件时继续拖动来“抓住”滚动条，则会过早释放滚动条。强制用户再次点击拖动条。这是一个小问题，但我想知道为什么？

我只打算在滚动开始时触发此事件一次。

如果一个库或框架已经解决了这种奇怪的行为，你能否展示他们解决这个问题的来源？

另外，我认为用于确定“他们停止滚动的点”的计时库等对此来说太过分了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:04:31.780

这可能是因为 IE 正在暂停呈现“工具提示”。不要`display:none`在工具提示上使用，而是尝试使用`visibility:hidden`然后切换到`visibility:visible`.

# html - 我在哪里可以获得支持 Flash Player 和 Chrome Frame 的 Portable Internet Explorer 8？

> ID：10421625
> 
> 赞同：0
> 
> 时间：2012-05-02T20:58:48.120
> 
> 标签：html, internet-explorer, internet-explorer-8, portable-applications, google-chrome-frame

我到处搜索，没有找到任何网站说 Portable IE8 支持 Flash Player 和 Chrome Frame。那么，我在哪里可以获得支持 Flash Player 和 Chrome Frame 的 Portable Internet Explorer 8？任何想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:01:36.940

倒着做。获取已经内置 Flash 的便携式 Chrome 并获取 IE Frame。

# iphone - 为什么此代码会导致 EXC_BAD_ACCESS 错误？

> ID：10421627
> 
> 赞同：1
> 
> 时间：2012-05-02T20:58:50.460
> 
> 标签：iphone, objective-c, xcode, memory-management

这是我为清理一串不需要的字符和双倍间距而编写的一段代码。但是，我似乎在某处误解了内存管理，它不断导致 EXC_BAD_ACCESS 错误。当释放语句被删除时，代码在功能上工作正常，但这会导致内存泄漏。

```
-(NSString*) cleaningString:(NSString*) input  {
NSCharacterSet* wantedCharacters=[[NSCharacterSet alloc] init];

   wantedCharacters=[ NSCharacterSet    
 characterSetWithCharactersInString:@"qwertyuiopasdfghjklzxcvbnm"];

NSString* cleanStringOutput=[[NSString alloc] initWithString:@""];
NSString* currentLetter =[[NSString alloc] initWithString:@" "];
NSRange unwantedCharacters=[currentLetter rangeOfCharacterFromSet:wantedCharacters];

for (int i=0; i<input.length; i++) {
    currentLetter=[NSString stringWithFormat:@"%c",[input characterAtIndex:i]];
    unwantedCharacters=[currentLetter rangeOfCharacterFromSet:wantedCharacters];
    doubleSpace=YES;
    if (i<input.length-1) {
        if (([currentLetter isEqualToString:@" "])&&([[NSString stringWithFormat:@"%c",[input characterAtIndex:i+1]] isEqualToString:@" "])) {
            doubleSpace=NO;}
    }
    else {
        if ([currentLetter isEqualToString:@" "]) {
            doubleSpace=NO;
        }
    }
    if ((unwantedCharacters.location!=NSNotFound)&&(doubleSpace))
    {
        cleanStringOutput=[NSString stringWithFormat:@"%@%@", cleanStringOutput, currentLetter];
    }
}
if (cleanStringOutput.length>0){
    if ([[NSString stringWithFormat:@"%c",[cleanStringOutput characterAtIndex:0]] isEqualToString:@" "]){
        cleanStringOutput=[cleanStringOutput substringFromIndex:1];
    }
}

[currentLetter release];
[wantedCharacters release];
[cleanStringOutput autorelease];
return cleanStringOutput;
} 
```

如果我只是问了一些非常明显的问题，请原谅我。

PS 还有一个问题。是否有必要释放 NSRange？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:04:46.073

就在这儿

```
NSCharacterSet* wantedCharacters=[[NSCharacterSet alloc] init];

   wantedCharacters=[ NSCharacterSet    
 characterSetWithCharactersInString:@"qwertyuiopasdfghjklzxcvbnm"]; 
```

您丢弃原始对象并用自动释放的对象替换它

当你打电话时哪个会崩溃

```
[wantedCharacters release]; 
```

做这个

```
NSCharacterSet* wantedCharacters=[ NSCharacterSet    
 characterSetWithCharactersInString:@"qwertyuiopasdfghjklzxcvbnm"]; 
```

忘记最后一个

```
[wantedCharacters release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:02:16.710

```
currentLetter=[NSString stringWithFormat:@"%c",[input characterAtIndex:i]]; 
```

返回一个自动释放的字符串——不需要在上面分配/初始化它。

```
NSString* currentLetter =[[NSString alloc] initWithString:@" "]; 
```

所以打电话

```
[currentLetter release]; 
```

很可能会引起问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:18:32.303

您分配/初始化一个`wantedCharacters`对象，然后使用便利功能重新分配它。重新分配使用第一个对象创建一个僵尸。

便利函数将新对象实例放入自动释放池中。

然后你调用释放。由于它只保留一次，它被释放。

后来，自动释放池调用释放它，但它已经被释放。这会导致崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T21:02:12.723

您的代码中有几个错误会导致您丢失对已分配对象的引用，下面将举一个示例，但有几点：

1.  所有这些最简单的解决方案是`autorelease`在您调用的任何地方使用`alloc`（并删除`release`这些对象），例如：

    ```
    NSString* cleanStringOutput=[[[NSString alloc] initWithString:@""] autorelease]; 
    ```

2.  当您创建一个变量只是为了稍后分配给它时，不需要分配，例如：

    ```
    NSCharacterSet* wantedCharacters; // no need for alloc here
    wantedCharacters=[ NSCharacterSet characterSetWithCharactersInString:@"qwertyuiopasdfghjklzxcvbnm"]; 
    ```

3.  一般来说——如果你没有分配对象，你就不会释放它。

# html - CSS3 旋转问题

> ID：10421629
> 
> 赞同：0
> 
> 时间：2012-05-02T20:59:02.407
> 
> 标签：html, css, rotation

我将 div 标签中的所有内容设置为水平显示。但是我在这个 div 标签中有我想要垂直显示的元素。

我的水平样式 div 是

```
 /* Safari */
-webkit-transform: rotate(-90deg);

/* Firefox */
-moz-transform: rotate(-90deg);

/* IE */
-ms-transform: rotate(-90deg);

/* Opera */
-o-transform: rotate(-90deg);

/* Internet Explorer */
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); 
```

我将如何在单独的 div 上有效地摆脱这种转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:02:48.283

如果要在子元素上重置它，请撤消旋转（[http://jsfiddle.net/yDGqz/](http://jsfiddle.net/yDGqz/)）：

```
-webkit-transform: rotate(90deg);
-moz-transform: rotate(90deg);
-ms-transform: rotate(90deg);
-o-transform: rotate(90deg);
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); 
```

您可能希望设置该[`transform-origin`](https://developer.mozilla.org/en/CSS/transform-origin)属性以更改元素的旋转原点。

# java - 分析心率监测器返回的数据

> ID：10421633
> 
> 赞同：3
> 
> 时间：2012-05-02T20:59:08.983
> 
> 标签：java, android, heartbeat

我正在尝试通过蓝牙读取心率监视器传输的数据，但我真的不知道如何读取心率监视器返回的字节。

可能每个供应商都有自己将数据包装成字节的方式。但是如何将这些字节转换为某种可读格式，以便分析其中的变化？
像 ASCII 值或一些十六进制值。

我尝试了 MyTrack 应用程序的代码，但这对我不起作用。

[MyTrack 解析心率数据](http://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/services/sensors/PolarMessageParser.java)

我正在尝试读取 Android 中的字节，截至目前我正在获取这些数据，但不知道哪个字段代表什么。

```
55 04 00 38 00 15 af    

14 b0 00 38 00 13 b1    

55 04 00 38 00 13 b1

55 04 00 38 00 12 b2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-23T03:20:57.973

希望您的心率监测器遵循此处定义的数据规范：

[Bluetooth.org 上的心率测量](https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml)

据我所知，以下是如何应用该文档中的信息：

1.  获取第一个十六进制字节 55，并将其转换为二进制：01010101。
2.  由于蓝牙数据是小端序的，因此将该序列的右端视为第 0 位，将左端视为第 7 位。
3.  现在您可以查看蓝牙消息的标志字段的文档。标志字段的第 0 位告诉您心率数据是 8 位还是 16 位。在您的情况下，位 0 是 1，因此您有 16 位数据。
4.  查看第一个示例中接下来的两个十六进制字节：04 00。
5.  将其转换为十进制。现在这部分我不确定。如果我将 04 00 转换为十进制，我得到 1024，所以我一定做错了什么。也许巧合的是，如果我将这些数字反转并将 00 40 转换为十进制，我会得到 64，这可能是坐在电脑前的人的心率值（我现在是 62）。也许有人可以评论如何解释这部分。

就我而言，使用 Wahoo Blue HR，数据返回如下：

14 46 59 03 58 03

将 14 转换为二进制 (00010100) 并查看位 0 (0) 告诉我心率是 8 位，所以我只需要第二个十六进制字节 (46)。将其转换为十进制给我 70。

不幸的是，我不知道如何解释您的第二个样本。第一个十六进制字节 14 表示一个 8 位值，但这会使心率值变为 B0 或 176——对于坐在电脑前的人来说，这不太可能是一个值。我也不希望单个设备在传输 8 位和 16 位值之间切换，但我想这是可能的。

[这个 SO question](https://stackoverflow.com/questions/14038906/apples-heart-rate-monitoring-example-and-byte-order-of-bluetooth-heart-rate-mea)包括进行这些转换的代码，它对我有用。我只是想在实施之前尝试了解文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:57:56.653

除非您可以找到有关心率监测器传输规格的文档，否则您将需要分析数据并破译格式。一种方法是在从心率监测器发送的数据中创建受控变化（例如在休息的人和慢跑的人之间交换），然后寻找数据中的差异和模式。

至少，我希望数据包含时间和心率值，但肯定会有其他字段，例如标头、数据包标识符和长度以及校验和值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-02T15:58:59.870

我没有查看您的数据，但是对于我从 ANT 解码的一些监视器，ANT+ 数据流包括节拍之间的毫秒时间以及最后三个节拍的 HR。从一致的 HR 获取数据的建议是最好的起点。然后请记住，您看到的数字可能是从多达三到四拍四舍五入的。

# php - php - 提交时自动向用户显示上传的文件

> ID：10421634
> 
> 赞同：1
> 
> 时间：2012-05-02T20:59:12.613
> 
> 标签：php, file-upload

我已经成功地为用户创建了 PHP 脚本，以将文件上传到数据库以及本地主机上的文件夹。在用户刷新页面之前，他们无法看到他们上传的图像。这是我的代码。

```
<?php
error_reporting(E_ALL & ~E_NOTICE);
//connect to database
$connection = mysql_connect("localhost", "root", "") or die("can't make connection : " .                           mysql_error());
$database = mysql_select_db ("uploads", $connection) or die ("Could not select database");

//save the name of image in table
$query = mysql_query("select * from tbl_img") or die(mysql_error());

//retrieve all image from database and store them in a variable
while($row = mysql_fetch_array($query))
{
    $img_name = $row['img'];
    $image = "<img src='site_images/$img_name' /><br />";

    //store all images in one variable
    $all_img = $all_img . $image;
}
?>

<html>
<body>

<h1>Your Images</h1>
<?php echo $all_img;?>

</body>
</html>

<!DOCTYPE html>
<html lang="en">

Upload your image:<br />
<input name="img_field" type="file" id="img_field" /><br /><br />

<input type="submit" name="submit" id="submit" value="Submit" />

<?php
//get the posted image when the submit button is clicked
if(isset($_POST['submit']))
{
$file = $_FILES['img_field'];
$file_name = $_FILES['img_field']['name'];
$file_tmp_name = $_FILES['img_field']['tmp_name'];        

//save the image in img table
//connect to database
$con = mysql_connect("localhost", "root", "") or die("can't make connection : " . mysql_error());
$db = mysql_select_db ("uploads", $con) or die ("Could not select database");

//save the name of image in table
$query = mysql_query("INSERT INTO tbl_img(img) VALUES('$file_name')") or die(mysql_error());

//upload images to this folder (complete path)
$path = "site_images/$file_name";

//use move_uploaded_file function to upload or move file to the given folder or path
if(move_uploaded_file($file_tmp_name, $path)) 
{ 
    echo "File Successfully uploaded";
}
else
{
    echo "Please select a file";
}
}
?> 
```

任何帮助将不胜感激，thanx :)

# java - 由于会话而出现错误 500

> ID：10421635
> 
> 赞同：-1
> 
> 时间：2012-05-02T20:59:15.260
> 
> 标签：java, session

我的页面有时会出现以下错误。

“错误：500 - 服务器遇到异常：java.lang.IllegalStateException：提交响应后无法创建会话”

当我刷新页面时，它不再显示。请让我知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:02:43.197

错误提示“提交响应后无法创建会话”

我建议查看您的代码并确保您在第 1 行打开会话

# c# - 从 WaveStream 将 2 通道样本读入数组的最简单方法

> ID：10421636
> 
> 赞同：8
> 
> 时间：2012-05-02T20:59:27.773
> 
> 标签：c#, naudio

我已经为此苦苦挣扎了很长一段时间，但找不到有效的解决方案。

我有一个 wav 文件（16 位 PCM：44kHz 2 通道），我想为两个通道中的每一个将样本提取到两个数组中。据我所知，NAudio 库中不存在直接的方法，所以我尝试运行以下代码来读取一些隔行扫描的样本，但缓冲区数组保持为空（只是一堆零）：

```
using (WaveFileReader pcm = new WaveFileReader(@"file.wav"))
{
    byte[] buffer = new byte[10000];
    using (WaveStream aligned = new BlockAlignReductionStream(pcm))
    {
        aligned.Read(buffer, 0, 10000);
    }
} 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:21:44.253

`BlockAlignReductionStream`是不必要的。这是一种简单的方法来读取缓冲区并读取到单独的 16 位左右样本缓冲区。

```
using (WaveFileReader pcm = new WaveFileReader(@"file.wav"))
{
    int samplesDesired = 5000;
    byte[] buffer = new byte[samplesDesired * 4];
    short[] left = new short[samplesDesired];
    short[] right = new short[samplesDesired];
    int bytesRead = pcm.Read(buffer, 0, 10000);
    int index = 0;
    for(int sample = 0; sample < bytesRead/4; sample++)
    { 
        left[sample] = BitConverter.ToInt16(buffer, index);
        index += 2;
        right[sample] = BitConverter.ToInt16(buffer, index);
        index += 2;
    }
} 
```

# google-api - Google 自定义搜索引擎的自定义 CSS

> ID：10421643
> 
> 赞同：2
> 
> 时间：2012-05-02T20:59:43.710
> 
> 标签：google-api, google-search-api, jsapi

如何为 Google 搜索引擎自定义 CSS。目前我使用一个主题：

```
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
      google.load('search', '1', 
         {language : 'en', style : google.loader.themes.ESPRESSO});
..... 
```

但我想更改字体颜色/大小。

在官方指南[https://developers.google.com/custom-search/docs/js/cselement-devguide](https://developers.google.com/custom-search/docs/js/cselement-devguide)

我看到一个链接：

*   修改结果 CSS 属性 - 自定义搜索元素使用[搜索控件结果样式](https://developers.google.com/apis/websearch/docs/#StylingSearchResults)，您可以对其进行修改以更改基本外观。

哪个坏了（导致404）。上网冲浪并没有带来任何结果。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:28:52.140

他们只是将它移到另一个 URL 下，但忘记在他们的文档中更新它：

曾是

[https://developers.google.com/apis/websearch/docs/#StylingSearchResults](https://developers.google.com/apis/websearch/docs/#StylingSearchResults)

变成了

[https://developers.google.com/web-search/docs/#StylingSearchResults](https://developers.google.com/web-search/docs/#StylingSearchResults)

# php - PHP为目录中的每个文件运行一个函数

> ID：10421646
> 
> 赞同：1
> 
> 时间：2012-05-02T21:00:02.890
> 
> 标签：php, file, function, loops, directory

你好，我依赖卡在这里，

好的，我已经有一个工作功能可以在我的目录中为一个指定的文件更新我的数据库，现在我需要一个 php 代码来为目录中的每个文件执行相同的操作，然后将其删除。

```
$fileName = "IEDCBR361502201214659.RET";

$cnab240 = RetornoFactory::getRetorno($fileName, "linhaProcessada");

$retorno = new RetornoBanco($cnab240);
$retorno->processar(); 
```

函数 linhaProcessada 是

```
function linhaProcessada2($self, $numLn, $vlinha) {
if($vlinha["registro"] == $self::DETALHE ) 
    {
        if($vlinha["registro"] == $self::DETALHE && $vlinha["segmento"] == "T" ) {
            //define a variavel do nosso numero como outra usavel
            $query ="SELECT * FROM jos_cobra_boletos WHERE nosso_numero = ".$vlinha['nosso_numero']."";
            echo "Boleto de numero: ".$vlinha['nosso_numero']." Atualizado com sucesso!<hr>";
            $testResult = mysql_query($query) or die('Error, query failed');
                if(mysql_fetch_array($testResult) == NULL){
                }else{
                $query = "UPDATE jos_cobra_boletos
                  SET status_pagamento='Pago'
                  WHERE nosso_numero=".$vlinha['nosso_numero']."";
                  $result = mysql_query($query) or die('Erro T');        
                }
          }
    }
} 
```

真的需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:24:40.037

PHP的`opendir()`应该做的伎俩。更多信息在这里： http: [//php.net/manual/en/function.opendir.php](http://php.net/manual/en/function.opendir.php)

```
<?php
// Set Directory
$dir = '/abs/path/with/trailing/slash/';
if ($handle = opendir( $dir )) { // Scan directory
    while (false !== ($file = readdir($handle))) { // Loop each file

        $fileName = $dir . $file;

        // Run code on file 
        $cnab240 = RetornoFactory::getRetorno($fileName, "linhaProcessada");

        $retorno = new RetornoBanco($cnab240);
        $retorno->processar();

        // Delete file
        unlink( $fileName );
    }
    closedir( $handle );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:16:23.040

```
<? //PHP 5.4+
foreach(
    new \GlobIterator(
        __DIR__ . '/*.RET', //Or other directory where these files are
        \FilesystemIterator::SKIP_DOTS |
        \FilesystemIterator::CURRENT_AS_PATHNAME
    )

    as $pathname
){
    (new RetornoBanca(
        RetornoFactory::getRetorno($pathname, 'linhaProcessada')
    ))
    ->processar();

    \unlink($pathname);
}
?> 
```

# jquery - Button click event is not fired in jquery

> ID：10421647
> 
> 赞同：0
> 
> 时间：2012-05-02T21:00:04.497
> 
> 标签：jquery, jquery-mobile

I am working on jQuery Mobile.

I have a view in which I am displaying the collabsible list which is being loaded dynamically. Hence my jQuery file gets the JSON data, runs the loop around `$('mylist').append(..data for each row..)`.

Now in every collapsible item, I am adding a button which has to run a JavaScript function alongwith the parameters. This is where I am stucked. Somehow the event is not fired on click. Is it because of the fact that no event is generated or the the parameters I am passing in variables are the main problem.

```
$('#main')
  .bind("pageshow", function (event) { 
    var cusid = getUrlVars()["cusid"]; 
    var locid = getUrlVars()["locid"]; 
    $.getJSON("localhost/mserv/Offers.php";, function(data) { 
      $.each(data, function(index, offer){ 
        $('#cat_list').append("<div align='center' data-role='collapsible'><h3>offer.name</h3><p>offer.price</p><input type= 'button' onclick='addItem("+offer.id+",'"+offer.name+"',"+offer.price+")' value='Add To Cart'></div>"); 
      }); 
    $('#cat_list').collapsibleset('refresh'); 
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:20:21.973

我想我知道可能是什么问题，尽管实际上您没有提供足够的信息（尤其是您使用的代码）：

jQuery mobile 总是通过 AJAX 向 DOM 添加元素。如果你想为通过 AJAX 添加到 DOM 的元素添加事件监听器，那么你需要使用`on()`而不是`click()`，例如。

所以更换

```
$('clickableElement').click(function() {
    ...
}); 
```

和

```
$('clickableElement').on('click', function() {
    ...
}); 
```

通过这种方式，您将 click-eventlistener 绑定到您的元素，即使它在最初加载 DOM 时（第一次调用您的页面）不存在，只要它通过 AJAX 添加到 DOM。

# string - Efficiently searching large list of strings

> ID：10421649
> 
> 赞同：3
> 
> 时间：2012-05-02T21:00:18.843
> 
> 标签：string, algorithm, search

I have a large list of strings which needs to be searched by the user of an iPhone/Android app. The strings are sorted alphabetically, but that isn't actually all that useful, since a string should be included in the results if the search query falls anywhere inside the string, not just the beginning. As the user is typing their search query, the search should be updated to reflect the results of what they currently entered. (e.g. if they type "cat", it should display the results for "c", "ca" and "cat" as they type it).

My current approach is the following:

I have a stack of "search results", which starts out empty. If the user types something to make the search query longer, I push the current search results onto the stack, then search through only the current search results for the new ones (it's impossible for something to be in the full string list but not the current results in this case).

If the user hits backspace, I only need to pop the search results off of the stack and restore them. This can be done nearly instantaneously.

This approach is working great for "backwards" searching (making the search query shorter) and cases where the search query is already long enough for the number of results to be low. However, it still has to search though the full list of strings in O(n) time for each of the first few letters the user types, which is quite slow.

One approach I've considered is to have a pre-compiled list of results of all possible search queries of 2 or 3 letters. The problem with this approach is that it would require 26^2 or 26^3 such lists, and would take up a pretty large amount of space.

Any other optimizations or alternate approaches you can think of?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:49:26.843

您应该考虑使用[前缀树 (trie)](http://en.wikipedia.org/wiki/Trie)来制作预先计算的列表。我不确定在子字符的基础上显示“c”、“ca”和“cat”的结果是个好主意。例如，假设用户正在搜索“吃”这个词。你的算法必须找到所有包含“e”的单词，然后是“ea”，最后是“eat”；其中大部分对用户没有用处。对于电话应用程序，如果您按单词进行操作可能会更好。可以对多词字符串进行标记，因此在“a large stake”中搜索“stake”可以正常工作，但不能搜索“take”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:19:40.613

我注意到谷歌和我想象的其他人在仅按下 1 或 2 个字符时不会提供完整列表。在您的情况下，也许一个好的起点是仅在用户输入至少 3 个字符时才开始填充搜索查询结果。

对于以后的版本，如果它很重要，您可以从 Google 的做法中获得启发，并进行更复杂的处理：跟踪以前用户选择的实际条目，并按频率对这些条目进行排序。然后，每天在您的服务器上运行一个 cron 作业来填充一个小型数据库表，其中前 10 个条目以每个字母开头，如果只按下了 1 或 2 个字母，则使用这个小表中的结果而不是扫描完整的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T00:35:49.477

您可以使用**压缩后缀树**

# android - 你是怎么做到的，当用户打开我的应用程序时，Android 键盘不会打开？

> ID：10421650
> 
> 赞同：0
> 
> 时间：2012-05-02T21:00:28.350
> 
> 标签：android, keyboard

你能做到吗，当你打开应用程序时，屏幕键盘不会打开，直到你点击其中一个editText？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:04:29.953

为了隐藏虚拟键盘，你可以像这样使用[InputMethodManager](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html)（你可以把它放在`onCreate()`你的登陆活动的方法中）：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:04:05.497

在活动的 onCreate 方法中添加以下代码：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

它对我有用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T02:54:29.380

在 AndroidManifest.xml 中设置 android:configChanges="keyboardHidden"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-22T08:02:22.273

这取决于您的要求。假设如果您想在每次用户打开您的活动时隐藏键盘，那么您可以 `android:windowSoftInputMode="stateAlwaysHidden"`在您的 android 清单中为您的活动添加。如果你想要它动态，那么你可以在发生关闭键盘的事件时使用

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0);
```

随时使用[此](https://developer.android.com/guide/topics/manifest/activity-element.html)作为参考

# actionscript-3 - AS3 - 通过数组访问静态函数

> ID：10421652
> 
> 赞同：0
> 
> 时间：2012-05-02T21:00:34.797
> 
> 标签：actionscript-3, flash

目前我有一个 Array 有 9 个按钮。这称为 BAR.as：

```
public static var buttonArray: Array = new Array()

for(var i:int = 0; i<9; i++){
            barButton = new button
            buttonArray.push(barButton)
            buttonArray[i].name = button+(String[i])
            buttonArray[i].x = 15+(i*buttonArray[i].width)
            addChild(buttonArray[i])
        } 
```

在我的按钮类中，我指定了一个 enableButton 函数，这称为 ACTIONBARBUTTON.as：

```
public static function enableButton(shortcut:int):void{
        //instance.refreshThis(shortcut, true)
        trace("test")
    } 
```

我想做的是有一个函数，我可以调用它来按需启用/禁用这些按钮（而不仅仅是“.enable”/“.disable”），因为它们中的内容需要经常更改。我的方法是通过 BAR.as：

```
public static function updateWeapons(level: int):void{
        buttonArray[level-1].enableButton(level)
    } 
```

但是，这会返回以下错误：

```
ReferenceError: Error #1069: Property enableButton not found on src.actionbar.button and there is no default value.
at src.actionbar::bar$/updateWeapons()
at src.game::player$/levelup()
at src.game::gameplay/init()
at flash.display::DisplayObjectContainer/addChildAt()
at src.camera::control()
at flash.display::Sprite/constructChildren()
at flash.display::Sprite()
at flash.display::MovieClip() 
```

只需运行 button.enableButton(1) 即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:05:15.787

您不能在类的实例上调用静态成员函数。

这就是为什么：

```
buttonArray[level-1].enableButton(level) 
```

不工作。使 enableButton 函数为非静态的，它应该可以工作。

```
button.enableButton(1) 
```

工作正常，因为您使用类名“按钮”来调用该函数。

# xml - PERL XML::LibXML 在输出 XML 时更改标签结构

> ID：10421659
> 
> 赞同：0
> 
> 时间：2012-05-02T21:01:03.370
> 
> 标签：xml, perl

**情况**

编辑 XML 并成功更改值后，我需要将更改写回文件。但是，当我这样做时，具有两个属性 (a) date_time 和 (b) xmlns:xsi 的 XML 的第一个标记在 uodate 之后被切换。

以下是 XML 的示例：

**XML 文档示例**

**原始 XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<basenet date_time="201202131140" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     >
<msg_ver>01</msg_ver>
<sender_id>1234</sender_id>
<recipient_id>Bob</recipient_id> 
</basenet> 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<tradenet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     date_time="201202131140">
<msg_ver>01</msg_ver>
<sender_id>1234</sender_id>
<recipient_id>Bob</recipient_id> 
</tradenet> 
```

**编码**

```
 sub CHANGE_DATE_SEQ_NUM()
  {

# load
open my $fh, '<', $newfile;
binmode $fh; # drop all PerlIO layers possibly created by a use open pragma
my $doc = XML::LibXML->load_xml(IO => $fh);

    my $query  = "/tradenet/message/header/unique_ref_no/date/text( )";
    my $query2  = "/tradenet/message/header/unique_ref_no/seq_no/text( )";
    my $query3  = "/tradenet/message/transport/out_tpt/dept_date/text( )";
    #print $query3;

    my($node)   = $doc->findnodes($query);
    my($node2)  = $doc->findnodes($query2);
    my($node3)  = $doc->findnodes($query3);

        $node->setData("$date");
        $node2->setData("$file_seq_number");
        $node3->setData("$date");

             # save
         open my $out, '>', $newfile;
         binmode $out; # as above
         $doc->toFH($out);
   } 
```

**我的问题** 为什么标签中的 date_time 和 xmlns:xsi 会被切换？该开关导致我的 XML 在我的服务器端验证失败。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:56:37.230

属性顺序在 XML 中是没有意义的，所以错误在您的验证代码中。

XML::LibXML 或底层 libxml2 保留顺序的效率可能会降低，所以他们没有这样做，因为没有理由这样做。属性可能存储在哈希表中。

# javascript - 调整 iframe 的大小以适应其内容

> ID：10421662
> 
> 赞同：1
> 
> 时间：2012-05-02T21:01:07.740
> 
> 标签：javascript, html, iframe, resize

我知道这是一个常见问题，但这会让我发疯。

我需要更改`iframe`高度以适应它的内容并避免滚动条。我已经搜索了几种解决方案，但其中大多数对我不起作用。

最后我用了这个：

```
function resize(){
var BodyH = document.body.scrollHeight;
var HeaderH = document.getElementById('main_header').scrollHeight;
var MenuH = document.getElementById('main_menu').scrollHeight;
var FooterH = document.getElementById('main_footer').scrollHeight;
parent.document.getElementById('iframe_R').style.height = (BodyH - HeaderH -MenuH - FooterH) + "px";
} 
```

它似乎在 Chrome 中“工作”，但它增加了我真的不喜欢的额外空间。它在 Mozilla 或 IE 中不起作用。

我知道我犯了一些错误，或者使用了不好的属性，或者其他任何东西。一些帮助会很好。

# r - str将具有确切信息的一列拆分为两列

> ID：10421668
> 
> 赞同：6
> 
> 时间：2012-05-02T21:01:16.430
> 
> 标签：r, split

我的数据如下所示：

```
 SNP Geno Allele
marker1   G1    AA
marker2   G1    TT
marker3   G1    TT
marker1   G2    CC
marker2   G2    AA
marker3   G2    TT
marker1   G3    GG
marker2   G3    AA
marker3   G3    TT 
```

我希望它看起来像这样：

```
 SNP Geno Allele1 Allele2
marker1   G1       A       A
marker2   G1       T       T
marker3   G1       T       T
marker1   G2       C       C
marker2   G2       A       A
marker3   G2       T       T
marker1   G3       G       G
marker2   G3       A       A
marker3   G3       T       T 
```

我正在使用这个：

```
strsplit(Allele, split extended = TRUE) 
```

但这不起作用。我需要额外的命令吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T21:45:46.353

另一种方法，从头到尾：

制作可重现的数据：

```
dat <- read.table(header = TRUE,  text = "SNP Geno    Allele
marker1 G1  AA
marker2 G1  TT
marker3 G1  TT
marker1 G2  CC
marker2 G2  AA
marker3 G2  TT
marker1 G3  GG
marker2 G3  AA
marker3 G3  TT") 
```

**更新**提取等位基因列，将其拆分为单个字符，然后将这些字符分成数据框的两列：

**任何一个**

```
dat1 <- data.frame(t(matrix(
                     unlist(strsplit(as.vector(dat$Allele), split = "")), 
                     ncol = length(dat$Allele), nrow = 2))) 
```

**或**遵循@joran 的建议

```
dat1 <- data.frame(do.call(rbind, strsplit(as.vector(dat$Allele), split = ""))) 
```

**然后**

将列名添加到新列：

```
names(dat1) <- c("Allele1", "Allele2") 
```

正如@user1317221 建议的那样，将两个新列附加到原始数据表中的列：

```
dat3 <- cbind(dat$SNP, dat$Geno, dat1)
        dat$SNP dat$Geno Allele1 Allele2
1 marker1       G1       A       A
2 marker2       G1       T       T
3 marker3       G1       T       T
4 marker1       G2       C       C
5 marker2       G2       A       A
6 marker3       G2       T       T
7 marker1       G3       G       G
8 marker2       G3       A       A
9 marker3       G3       T       T 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T21:22:09.140

尝试：

```
Allele<-dat$Allele    
Allele1<-substr(Allele, start = 1, stop = 1)
Allele2<-substr(Allele, start = 2, stop = 2) 
```

然后，您可以将它们 cbind 在一起，或者您想将它们放在数据框中

编辑：

@Ben 是正确的我已经在上面为您更正了我的代码或使用 Ben 的建议

`Allele1 <- with(dat, substr(Allele, start = 1, stop = 1))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T11:05:32.050

另一个技巧是使用`read.fwf`. 不像`read.table`and co.，`read.fwf`没有`text`参数，所以你需要使用`textConnection`：

```
# dat$Allele <- as.character(dat$Allele) # Necessary if it's a factor
cbind(dat[-3], 
      read.fwf(textConnection(dat$Allele), 
               widths = c(1, 1), col.names=c("Allele1", "Allele2")))
#       SNP Geno Allele1 Allele2
# 1 marker1   G1       A       A
# 2 marker2   G1       T       T
# 3 marker3   G1       T       T
# 4 marker1   G2       C       C
# 5 marker2   G2       A       A
# 6 marker3   G2       T       T
# 7 marker1   G3       G       G
# 8 marker2   G3       A       A
# 9 marker3   G3       T       T 
```

* * *

***旧答案***

在已经提出的两种替代方案的基础上，这是一个单行版本（假设您的数据框名为`dat`.

```
transform(dat, Allele1 = substr(Allele, 1, 1), 
          Allele2 = substr(Allele, 2, 2))[-3] 
```

这给了我们：

```
 SNP Geno Allele1 Allele2
1 marker1   G1       A       A
2 marker2   G1       T       T
3 marker3   G1       T       T
4 marker1   G2       C       C
5 marker2   G2       A       A
6 marker3   G2       T       T
7 marker1   G3       G       G
8 marker2   G3       A       A
9 marker3   G3       T       T 
```

[它与此响应](https://stackoverflow.com/a/10421936/1270695)的概念完全相同，但使用`transform`.

* * *

### 更新（很久以后）

您也可以使用`cSplit`我的“splitstackshape”包中的参数`stripWhite = FALSE`。

例如，要拆分“等位基因”列，请尝试：

```
library(splitstackshape)
cSplit(dat, "Allele", "", stripWhite = FALSE)
#        SNP Geno Allele_1 Allele_2
# 1: marker1   G1        A        A
# 2: marker2   G1        T        T
# 3: marker3   G1        T        T
# 4: marker1   G2        C        C
# 5: marker2   G2        A        A
# 6: marker3   G2        T        T
# 7: marker1   G3        G        G
# 8: marker2   G3        A        A
# 9: marker3   G3        T        T 
```

另请参阅：[使用循环将 R 中的一列拆分为两列](https://stackoverflow.com/questions/27312597/split-one-column-to-two-columns-in-r-with-looping)

# php - mssql > php > mysql 之间的日期转换/提取问题

> ID：10421670
> 
> 赞同：0
> 
> 时间：2012-05-02T21:01:20.973
> 
> 标签：php, mysql, sql-server, date, object

这是我的代码，然后是输出...

```
$PDate = $row['PDate'];  
//row is tapping into ms-sql date field. 
//and the ms-sql data field has a value like this for the PDate; 
//07/12/2001
$PDate = $PDate->date;
echo "<h1>[", $PDate , "]</h1>";
echo "<h1>[", var_dump($row['PDate']) , "]</h1>";
echo "<h1>[", serialize($row['PDate']) , "]</h1><hr>"; 
```

输出如下。我的问题嵌入在输出中。

```
[]      ??? WHY IS THIS BLANK? WHY IS THIS NOT 2001-12-07 00:00:00? 

[object(DateTime)#3 (3) { ["date"]=> string(19) "2001-12-07 00:00:00" ["timezone_type"]=> int(3) ["timezone"]=> string(19) "America/Los_Angeles" } ]

[O:8:"DateTime":3:{s:4:"date";s:19:"2001-12-07 00:00:00";s:13:"timezone_type";i:3;s:8:"timezone";s:19:"America/Los_Angeles";}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:03:45.353

var_dump 的结果表明您正在使用 DateTime 对象。如果您希望日期格式可以传输到输出或另一个数据库，您可能希望尝试将 $PDate（或 $row['PDate']）用作 DateTime 对象。

例如：

```
echo $PDate->format("Y-m-d")."\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:05:21.433

`$PDate`存储表中的结果。那么为什么要把变量重新定义为对象中不存在的变量呢。您是否尝试过仅使用`$row['date']`而不是将其分配给`$PDate`？

# graphviz - Graphviz 库 - 缺少渲染器

> ID：10421671
> 
> 赞同：0
> 
> 时间：2012-05-02T21:01:29.940
> 
> 标签：graphviz

我在一个项目中使用 Graphviz API。EVereything 没问题，只是当我运行可执行文件时，我得到了

> 错误：png 的渲染器不可用

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T00:24:58.287

在 CentOS 上有一个名为“graphviz-gd”的包，其中包含一些插件渲染器。如果您签入“/usr/lib/graphviz/config”，您会看到：

```
libgvplugin_gd.so.3 gd {
        render {
                gd 1
                gd2 1
                gif 1
                jpg 1
                jpeg 1
                png 1
                wbmp 1
        }
        render {
                vrml 1
        }
        textlayout {
                textlayout 2
        }
        loadimage {
                gif2gd 1
                jpeg2gd 1
                png2gd 1
                gif2ps 1
                jpeg2ps 1
                png2ps 1
        }
} 
```

如果您没有那个特定的库，那么这些功能都不会起作用。不确定 Ubuntu，可能是类似的包名称。

# opencv - 确定投影仪焦距

> ID：10421673
> 
> 赞同：0
> 
> 时间：2012-05-02T21:01:38.187
> 
> 标签：opencv, computer-vision, kinect, projector, calibration

我正在尝试运行 cvPOSIT 算法来映射使用 Optoma PK301 和 Kinect 深度相机投影的点。我已经通过使用 Matlab 中的 Projector-Camera Calibration Toolbox (http://code.google.com/p/procamcalib/) 对其进行校准来确定投影仪的内在参数。我能否使用这些内在参数（特别是焦距`fc`）来确定投影仪的实际焦距以输入 OpenCV 中的 POSIT 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:26:14.530

好的，对此的快速回答是 POSIT 算法假设 x 轴和 y 轴上的焦距相同（就像在理想相机上一样）。就 POSIT 算法而言，只需取两者的平均值：`(fx + fy)/2`.

# performance - 测量 HDD 上的读取时间性能

> ID：10421675
> 
> 赞同：0
> 
> 时间：2012-05-02T21:01:48.223
> 
> 标签：performance, performance-testing

假设我们有一个吞吐量为 100MB/秒且寻道时间 = 10ms 的 HDD。从磁盘读取 50MB 需要多长时间。

朋友回答：

读取时间 = 寻道时间 + 50MB/吞吐量 = 510 毫秒。

我的担忧：

首先我的理解是硬盘包含盘片，盘片包含扇区，扇区包含磁道。需要将正确的扇区置于磁头下方（即旋转延迟），然后磁头现在需要在扇区中的这些磁道之间移动（即寻道时间）以读取数据。如果我在这里错了，请纠正我。

现在，

a）这个答案不是假设数据位于连续扇区内吗？因为如果数据被碎片化，则需要旋转磁盘以将正确的扇区置于磁头下方，这是否也应该增加旋转延迟？

b）此外，寻道时间是指从请求数据到将数据传送到 CPU 的时间，还是指磁头在扇区内的磁道之间移动的时间？定义不断变化。

c）我对最坏情况的回答：

假设扇区大小为 512

读取时间 = (50MB/512 * 旋转延迟) + SeekTime + 50MB/吞吐量。

# jquery - 滑出 div，使用 .show ignones {position:absolute; bottom:0px;} 在 chrome 和 safari 中，在 Firefox 中工作

> ID：10421693
> 
> 赞同：0
> 
> 时间：2012-05-02T21:02:49.160
> 
> 标签：jquery, jquery-ui, show-hide, css

我使用 jquery .hide 隐藏父 div 内的“额外细节” div，当用户将鼠标悬停在其父级上时，它会出现，使用 .show/.toggle（jquery-ui 幻灯片）

我遇到的问题是我使用 {position:absolute; 将“额外细节” div 定位在其父级的底部。bottom:0px;} （并使用 .hide 隐藏它）当您在 chrome 和 safari（均为 osx）中将鼠标悬停在它上面时，它会滑出，但是一旦完全显示它就会从顶部滑出然后跳到底部。

在 Firefox osx 中它工作正常。

我遇到的另一个问题是，如果你在它上面来回移动鼠标大约 5 秒钟，它似乎真的很困惑，以至于它即使没有悬停在显示的位置上。

我做了一个 jsfiddle [http://jsfiddle.net/pWaMx/](http://jsfiddle.net/pWaMx/)

任何想法可能导致这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:27:02.623

改变

```
$('.box').toggle("slide", {
    direction: "down"
}, 350); 
```

到

```
$('.box').stop(true, true).toggle("slide", {
    direction: "down"
}, 350); 
```

我还建议隐藏`.box`在您的 CSS 中。

更新了 jsFiddle：http: [//jsfiddle.net/pWaMx/3/](http://jsfiddle.net/pWaMx/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T03:06:05.430

我会用这个

[http://jsfiddle.net/pabo/pWaMx/13/](http://jsfiddle.net/pabo/pWaMx/13/)

```
$(document).ready(function() {
    $('.tile').hover(function() {
        $('.box').stop().slideToggle("350");
    });
}); 
```

简单，不会反弹或弹出，并且在 osx firefox 和 osx safari 中为我工作。

# django - 使用 Django 过滤器作为变量

> ID：10421695
> 
> 赞同：1
> 
> 时间：2012-05-02T21:03:08.207
> 
> 标签：django

我想知道我们是否可以将 django 过滤器用作变量，其中 python 方法格式化文本可以设置可以由模板呈现的过滤器值

过滤器通常的工作方式是这样的

{{ html_text | 安全 }} 或 {{ plain_text | 换行符 }}

我想在变量中设置过滤器“安全”/“换行符”的值并像这样呈现

{{ 文字 | 过滤变量}}

网上查了下，没搞明白，求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:16:16.907

你不能这样做，但你*可以*创建一个接受参数的自定义过滤器：

```
from django.template import defaultfilters

@register.filter
def apply_filter(value, filter):
    if filter == 'safe':
       return defaultfilters.safe(value)
    if filter == 'linebreaks':
       return defaultfilters.linebreaks(value)
    else:
       # You might want to raise an exception here, but for example purposes
       # I'll just return the value unmodified
       return value 
```

然后，在您的模板中：

```
{{ text|apply_filter:filter_variable }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:16:49.260

如果您有几个过滤器，则此方法有效：

```
{% ifequal filter_variable 1 %}{{ text|safe }}{% endifequal %}
{% ifequal filter_variable 2 %}{{ text|linebreaks }}{% endifequal %}
{% ifequal filter_variable 3 %}{{ text|yourfilter }}{% endifequal %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:23:15.670

我赞同克里斯普拉特所说的，但我会这样做：

```
from django.template import defaultfilters

@register.filter
def apply_filter(value, filter):
    return getattr(defaultfilters, filter)(value) 
```

这样它适用于任何过滤器。

# svn - 在预锁钩子上访问锁注释

> ID：10421698
> 
> 赞同：1
> 
> 时间：2012-05-02T21:03:23.600
> 
> 标签：svn, locking, hook

我希望我的程序员在将文件锁定在他们的工作副本中时总是放一条消息（即`svn lock tree.jpg -m "reason for locking"`）有没有办法让预锁定挂钩知道一条消息是否已放置以及它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:04:03.737

`hooks/pre-lock.tmpl`在您的存储库中查找。在我的例子中，它包含以下信息，表明锁定注释是第 4 个参数：

```
# PRE-LOCK HOOK
#
# The pre-lock hook is invoked before an exclusive lock is
# created.  Subversion runs this hook by invoking a program
# (script, executable, binary, etc.) named 'pre-lock' (for which
# this file is a template), with the following ordered arguments:
#
#   [1] REPOS-PATH   (the path to this repository)
#   [2] PATH         (the path in the repository about to be locked)
#   [3] USER         (the user creating the lock)
#   [4] COMMENT      (the comment of the lock)
#   [5] STEAL-LOCK   (1 if the user is trying to steal the lock, else 0)

... 
```

# xml - 读取带有子节点的完整 XML 节点并使用 VBS 写入另一个 XML 文件

> ID：10421699
> 
> 赞同：-1
> 
> 时间：2012-05-02T21:03:27.823
> 
> 标签：xml, vbscript, xml-parsing

我每天从第三方服务收到 2 个 XML 文件，我需要使用 VBS 将它们组合起来，因为它是服务器上使用 XML 的唯一可用技术。每个 XML 文件都具有相同的结构 -

```
<section>
    <lot>
        <number>8</number>
        <identifier>au23-zx78a</identifier>
    </lot>
    <lot>
        <number>23</number>
        <identifier>au23-zx78a</identifier>
    </lot>
    ...and so on...
</section> 
```

我需要从文件 1 中获取所有批次节点（包括所有子节点）并将它们插入到文件 2 中，然后再保存文件 2 以供其他服务使用。使用 VBS。

我在网上搜索过，我找到了使用 VBS 取出节点的方法，但我在将节点放入另一个文件时迷失了方向。我今天已经编写并废弃了 3 或 4 个脚本，因为我没能把它做好。

我知道逻辑是这样的——

加载文件 1，加载文件 2，从文件 1 中获取批次节点，遍历文件 1 中的批次节点，并将它们作为部分节点的子节点附加到文件 2 中，保存文件 2

谁能帮我指出正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:45:21.770

这是一个简单的方法：将两个 xml 文件加载到[`MSXML2.DomDocument`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms756987%28v=vs.85%29.aspx)对象中，`lot`从第一个文档中选择所有节点，克隆它们并将它们插入到第二个文档中。

```
option explicit

' collect xml file paths from the command line
dim xmlpath1: xmlpath1 = WScript.Arguments(0)
dim xmlpath2: xmlpath2 = WScript.Arguments(1)

' open up the xml files, this might need some error handling
dim xmldoc1: set xmldoc1 = CreateObject("MSXML2.DomDocument")
xmldoc1.async = false
xmldoc1.load xmlpath1
xmldoc1.setProperty "SelectionLanguage", "XPath"
dim xmldoc2: set xmldoc2 = CreateObject("MSXML2.DomDocument")
xmldoc2.async = false
xmldoc2.load xmlpath2

' get a collection of lot nodes
dim lots: set lots = xmldoc1.selectNodes("/section/lot")
' loop through each lot, clone it and add it to the second document
dim lot
for each lot in lots
    dim l: set l = lot.cloneNode(true)
    xmldoc2.documentElement.appendChild l
next

' overwrite the second document
xmldoc2.save xmldoc2.url 
```

该脚本（如果称为 merge-xml.vbs）将从命令行运行

> cscript merge-xml.vbs xml1.xml xml2.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T09:24:54.897

只是想提供 vbscript 示例，说明我如何读取无限的 XML 文件克隆内容并创建一个新的 XML 文件，然后将其读入记录集。即将多个 XML 文件读入记录集。

```
Dim xmlDoc,cn,fso,f,xmlDoc2,rs
    Set cn = CreateObject("ADODB.Connection")   
    Set rs = CreateObject("ADODB.Recordset")  
    Set xmlDoc = CreateObject("MSXML2.DOMDocument.3.0")
    Set xmlDoc2 = CreateObject("MSXML2.DOMDocument.3.0")
    Set fso = CreateObject("Scripting.FileSystemObject")
    xmlDoc.async="False"
    xmlDoc2.async="False"
    xmlDoc2.setProperty "SelectionLanguage","XPath"

    ' Create a root element in the new merged xml
    Set objRoot = xmlDoc.createElement("OutDelData")  
    xmlDoc.appendChild objRoot  

    ' Loop all xmls in a folder and extract all OutDelData/OutDeliveries 
     'change the xpath to //* to clone it all
     For Each f In 
     fso.GetFolder("C:\inetpub\wwwroot\HandheldWebService\data\OutDel\ToDeliver").Files
 If LCase(fso.GetExtensionName(f))="xml" Then
    xmlDoc2.load f.Path     
        For Each node In xmlDoc2.selectNodes("//OutDelData/OutDeliveries/*")
            Set newnode = node.cloneNode(True)
            xmlDoc.documentElement.appendChild newnode
        Next

End If
    Next

    ' Create new xml header
    Set objIntro = xmlDoc.createProcessingInstruction ("xml","version='1.0'")  
    xmlDoc.insertBefore objIntro,xmlDoc.childNodes(0) 

    ' save the nw merged file
    xmlDoc.save "C:\temp\XML\temp.xml"

    ' Open connection and make use of the data in a data set
    cn.Open "Provider=MSDAOSP;Data Source=MSXML2.DSOControl.3.0"
    rs.Open "C:\temp\XML\temp.xml",cn,3,3
    Debug.WriteLine rs.GetString
    rs.Close 
```

# c# - ASP.NET MVC、RavenDb 和单元测试

> ID：10421700
> 
> 赞同：5
> 
> 时间：2012-05-02T21:03:28.343
> 
> 标签：c#, asp.net-mvc, unit-testing, mstest, ravendb

我刚刚开始使用 RavenDB，到目前为止我很喜欢它。然而，我坚持如何对与之交互的控制器操作进行单元测试。

我发现的所有问题/文章都像这样：[单元测试 RavenDb 查询](https://stackoverflow.com/questions/8368674/unit-testing-ravendb-queries)告诉我应该在内存中使用 RavenDB 而不是模拟它，但我找不到一个可靠的例子来说明这是如何完成的。

例如，我有一个控制器操作来将员工添加到数据库（是的，它过于简化了，但我不想让问题复杂化）

```
public class EmployeesController : Controller
{

  IDocumentStore _documentStore;
  private IDocumentSession _session;

  public EmployeesController(IDocumentStore documentStore)
  {
    this._documentStore = documentStore;

  }

  protected override void OnActionExecuting(ActionExecutingContext filterContext)
  {
    _session = _documentStore.OpenSession("StaffDirectory");
  }

  protected override void OnActionExecuted(ActionExecutedContext filterContext)
  {
      if (_session != null && filterContext.Exception == null) {
        _session.SaveChanges();
        _session.Dispose();
    }
  }

  [HttpGet]
  public ViewResult Create()
  {
    return View();
  }

  [HttpPost]
  public RedirectToRouteResult Create(Employee emp)
  {
    ValidateModel(emp);
    _session.Store(emp);
    return RedirectToAction("Index");
  } 
```

如何验证单元测试中添加到数据库的内容？有没有人有任何在 MVC 应用程序中涉及 RavenDb 的单元测试示例？

如果这很重要，我正在使用 MSTest，但我很乐意尝试翻译来自其他框架的测试。

谢谢。

编辑

好的，我的测试初始化​​创建了注入到控制器构造函数中的文档存储，但是当我运行我的测试时，OnActionExecuting 事件没有运行，因此没有要使用的会话，并且测试失败并出现空引用异常。

```
[TestClass]
public class EmployeesControllerTests
{
  IDocumentStore _store;

  [TestInitialize]
  public void InitialiseTest()
  {
    _store = new EmbeddableDocumentStore
    {
      RunInMemory = true
    };
    _store.Initialize();
  }

  [TestMethod]
  public void CreateInsertsANewEmployeeIntoTheDocumentStore()
  {
    Employee newEmp = new Employee() { FirstName = "Test", Surname = "User" };

    var target = new EmployeesController(_store);
    ControllerUtilities.SetUpControllerContext(target, "testUser", "Test User", null);

    RedirectToRouteResult actual = target.Create(newEmp);
    Assert.AreEqual("Index", actual.RouteName);

    // verify employee was successfully added to the database.
  }
} 
```

我错过了什么？如何创建会话以在测试中使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T22:34:12.977

运行单元测试后，只需断言数据库中有一个新文档并且它设置了正确的字段。

```
var newDoc = session.Load<T>(docId) 
```

或者

```
var docs = session.Query<T>.Where(....).ToList(); 
```

存在 RavenDB 内存模式，因此您不必模拟它，您只需执行以下操作：

*   打开一个新的内存嵌入式文档存储（没有数据）
*   如果需要，插入您的单元测试需要运行的任何数据
*   运行单元测试
*   查看内存存储中的数据，看看它是否已正确更新

**更新**如果你想要一个完整的示例，看看 RacoonBlog 代码是如何做到的，这是运行[Ayende 博客](http://ayende.com/blog)的代码。查看这两个文件：

*   [BlogConfigBehavior.cs](https://github.com/ayende/RaccoonBlog/blob/master/RaccoonBlog.IntegrationTests/Web/Controllers/BlogConfigBehavior.cs)
*   [RaccoonControllerTests.cs](https://github.com/ayende/RaccoonBlog/blob/master/RaccoonBlog.IntegrationTests/Web/Controllers/RaccoonControllerTests.cs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T22:00:05.920

> 如何验证单元测试中添加到数据库的内容？

你没有。我们不在单元测试中测试这些东西。这是集成测试的责任，而不是单元测试。

如果您想对依赖于某些外部源（如您的数据库）的类进行单元测试，请模拟数据库访问。

**编辑：**

为了纠正一些提到的错误，我将引用 MSDN 的定义（但是所有其他资源都同意这一点）：

> 单元测试的主要目标是获取应用程序中最小的可测试软件，将其与代码的其余部分隔离开来，并确定它的行为是否完全符合您的预期。

如果不嘲笑，您将忽略单元测试的基本原则——隔离和测试尽可能小的部分。单元测试需要持久无知，不应该依赖于某些外部类。如果数据库随时间变化怎么办？重写所有测试，即使功能完全一样？

来吧。你可以给我 -1 你想要多少次，但这不会让你正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:50:30.820

由于您提到的链接到的线程通过嵌入 RavenDB 来使用 EmbeddableDocumentStore。

以下是设置方法：http: [//msdn.microsoft.com/en-us/magazine/hh547101.aspx](http://msdn.microsoft.com/en-us/magazine/hh547101.aspx)

以下是如何将存储库模式与 raven 一起使用，以便您轻松测试：http: [//novuscraft.com/blog/ravendb-and-the-repository-pattern](http://novuscraft.com/blog/ravendb-and-the-repository-pattern)

# cakephp - CakePHP 中的重新排序行为

> ID：10421701
> 
> 赞同：0
> 
> 时间：2012-05-02T21:03:29.690
> 
> 标签：cakephp, cakephp-2.1

我正在编写一个插件，其中包含一个依赖于`ContainableBehavior`. 在*我的*行为中，我想在其`beforeFind()`回调中调整任何查询条件，但我发现`ContainableBehavior::beforeFind()`已经执行了，所以我的更改当然被置若罔闻，可以这么说。

据我所知，唯一的解决方案是手动更改行为执行顺序，以便`beforeFind()`在之前调用我的行为方法`ContainableBehavior::beforeFind()`，但我在实现这一点时遇到了一些麻烦。

我不想对可能使用我的插件的应用程序做出任何假设，因此我不想创建一个任意依赖项来定义用户必须如何配置他们正在使用的任何行为。我只想在需要的地方进行必要的调整。我认为最有意义的是：

在`MyBehavior::setup()`中，我只是试图分离和重新附加，`ContainableBehavior`以便在附加到父模型的行为集合中，它落在`MyBehavior`：

```
# Assume that a condition checking existence is in place
$model->Behaviors->detach( 'Containable' );
$model->Behaviors->attach( 'Containable' ); 
```

如果我然后转储附加行为列表，我会得到一个数组，其中附加行为按照我想要的方式排序，但`ContainableBehavior::beforeFind()`仍然会在`MyBehavior::beforeFind()`.

有什么方法可以强制执行行为回调的执行顺序，这不是一个完全的黑客工作，或者不会对可能部署插件的任何应用程序强加不切实际的依赖/标准？

谢谢。

# android - 我可以在 Android 4.x (ICS) 中以编程方式创建文件夹吗？

> ID：10421703
> 
> 赞同：1
> 
> 时间：2012-05-02T21:03:46.900
> 
> 标签：android, android-4.0-ice-cream-sandwich, directory

Android SDK 中是否有用于在 Ice Cream Sandwich（Android 4.x）的主屏幕上创建文件夹的 API。您知道，用户可以在其中放置应用程序图标和快捷方式的文件夹。

LiveFolders 在 Honeycomb 中已被弃用，所以我不确定我应该使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:50:55.813

由于文件夹甚至不是家庭应用程序的要求，并且可能同时运行任意多个家庭替代应用程序，我相当肯定，没有，Android SDK 中没有与此相关的 API。

如果您可以假设您知道默认的家庭应用程序（您很可能不知道），那么可能有特定家庭应用程序的 API 可以允许添加文件夹。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T21:39:59.603

你试过了吗

```
File myDirectory = new File(myDir);
myDirectory.mkdirs(); 
```

其中 myDir 是字符串路径

这对我来说很好......

例如你可以

```
String externalStorageDirectory = Environment
        .getExternalStorageDirectory().toString();
String myDir = externalStorageDirectory + "/MyDirName/"; 
```

# android - 在 Android 的 GridView 中更改 ImageView 内容

> ID：10421708
> 
> 赞同：0
> 
> 时间：2012-05-02T21:04:08.673
> 
> 标签：android, gridview, imageview

我是 Android 和 Java 的新手。我正在构建一个应用程序，该应用程序允许用户按下一个按钮，该按钮启动一个图像选择器，他们可以在其中从 sd 卡上的图像中进行选择。该应用程序加载带有 2 个单元格的网格视图。一个单元格有一个具有默认图像的图像视图。另一个是按钮。一旦选择了图像，图像视图需要显示在网格视图的图像视图中。

我正在使用从图像 uri 解码的字符串路径来创建位图。然后我调用 imageView.setImageBitmap(bitmap)。这是无所作为。我尝试在可绘制文件夹中使用不同的图像更新图像资源，但仍然没有。我在我的活动中的网格下方添加了一个单独的图像视图，并且该图像正在更新，这让我相信这与网格视图有关（这是我的第一个网格视图）。

很感谢任何形式的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:42:05.970

`GridView`如果您只有两个单元格，这可能不是正确的选择。`LinearLayout`使用包含您正在处理的两个项目的简单程序可能会更轻松。

但是，这里是你如何做到这一点`GridView`：

通过扩展创建您的适配器[`BaseAdapter`](http://developer.android.com/reference/android/widget/BaseAdapter.html)。最重要的方法是`getView()`，但这是您应该做最少工作的地方。

当`GridView`去重绘自己时，它将遍历每个可见位置并调用`getView()`每个位置。您将获得一个`View`. 如果视图是`null`，请从您的 XML 资源中扩充一个新视图，填充它，然后返回它。如果视图不是`null`，则使用适当的数据填充现有视图。通过回收视图，小部件变得高效。

您需要的技巧是，当您想要更改图像时，您需要调用`notifyDataSetChanged()`适配器以触发重绘（此时您将在视图中为适当的单元格填充新图像）。

那是两分钟的版本。在一两年前的 Google I/O 上，他们在[The World of`ListView`](http://www.youtube.com/watch?v=wDBM6wVEO70)上做了一次演讲，并将其发布在 YouTube 上。这是一个很好的谈话，几乎所有的东西都适用`GridView`。

# php - 这段 PHP 有什么问题？

> ID：10421712
> 
> 赞同：-5
> 
> 时间：2012-05-02T21:04:26.833
> 
> 标签：php, mysql

> **可能重复：**
> [如何使用 IF 语句选择以“<img”开头的行](https://stackoverflow.com/questions/10420971/how-to-select-rows-that-start-with-img-with-an-if-statement)

当文本以 img 开头时，我正在尝试将“/images”添加到 text_image 行的开头。它给了我一个错误。

```
while($row = mysql_fetch_array( $result3 )) {
    echo "<div class='entry'>";
    $images = (substr($row['text_image']), 0, 3) == 'img') ? "/images" : "";
    echo $images . $row['text_image'];
    echo "</div>";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:08:20.067

你有一个额外的括号。尝试：

```
$images = (substr($row['text_image'], 0, 3) == 'img') ? "/images" : ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:08:36.967

```
while($row = mysql_fetch_array( $result3 )) {
echo "<div class='entry'>";
$images = (
             substr($row['text_image'], 0, 3)

             == 'img') ? "/images" : "";
echo $images . $row['text_image'];
echo "</div>";
} 
```

# python - 使用 Python 获取硬盘温度

> ID：10421715
> 
> 赞同：4
> 
> 时间：2012-05-02T21:04:30.013
> 
> 标签：python, linux, hard-drive, temperature

我想使用 Python（在 Linux 下）获取硬盘的温度。我目前正在调用`hddtemp`，`subprocess.popen`但我经常调用它，以至于它是我脚本中的性能瓶颈。我认为应该可以做类似于[问题 4193514](https://stackoverflow.com/questions/4193514)的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:56:08.253

您可以将 hddtemp 作为守护程序运行（-d 选项），然后使用套接字来查询它 - 默认为端口 7634。

编辑：查看[一些执行此操作的代码](https://bitbucket.org/tlynn/trypy/src/7796d8f4a8c1/munin-hddtemp.py)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:33:11.530

扩展@gnibbler 在他的主要评论中建议的内容，缓存方法呢？这是一个愚蠢的简单示例，只是为了展示这个概念：

```
from collection import defaultdict

class CachedValue(object):
    def __init__(self):
        self.timestamp = -1
        self._value = None

    @property 
    def value(self):
        return self._value

    @value.setter 
    def value(self, val):
        self._value = val 
        self.timestamp = time.time()

    def isOld(self, seconds):
        return (time.time() - self.timestamp) >= seconds

>>> _cached = defaultdict(CachedValue)
>>> _cached['hddtemp'].isOld(10)
True
>>> _cached['hddtemp'].value = 'Foo'
>>> _cached['hddtemp'].isOld(10)
False
# (wait 10 seconds)
>>> _cached['hddtemp'].isOld(10)
True 
```

在您的具体情况下：

```
def reportHDD(self):
    if self._cached['hddtemp'].isOld(10):
        self._cached['hddtemp'].value = self.getNewHDDValue()
    return self._cached['hddtemp'].value 
```

这种方法实际上更像是缓存昂贵操作的通用解决方案。在较大的应用程序中，CachedValue 可以很容易地替换为简单的 memcached/redis 查找，它为您维护自己的 TTL 值。但在小范围内，这只是组织本地缓存值的一种奇特方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-14T07:25:58.123

我在谷歌上搜索了一段时间，无论我如何格式化我的搜索，这个命中一直接近顶部。我在所有主机上都安装了 smartmontools 和至少 python 2.7.6，我不想安装一个新包来将硬盘临时数据传输到石墨/statsd，所以我做了以下操作。

我不是开发人员，我不知道 python（很明显）所以这是我 1-2 天的尝试来弄清楚它。我很尴尬，无法在这里发布所有代码，但这里是主要交易::

```
enter code here
#!/usr/bin/env python
import os

import subprocess

import multiprocessing

def grab_hdd_temp(hdd, queue):
  for line in subprocess.Popen(['smartctl', '-a', str('/dev/' + hdd)], stdout=subprocess.PIPE).stdout.read().split('\n'):
    if ( 'Temperature_Celsius' in line.split() ) or ('Temperature_Internal' in line.split() ):
      queue.put([hdd, line.split()[9]])

def hddtmp_dict(hdds_list):
  procs = []
  queue = multiprocessing.Queue()
  hddict={}
  for hdd in hdds_list:
    p = multiprocessing.Process(target=grab_hdd_temp, args=(hdd, queue))
    procs.append(p)
    p.start()
  for _ in procs:
    val = queue.get()
    hddict[val[0]]=val[1]
    p.join()
  return hddict

if __name__ == '__main__':
  hdds_list = [ x for x in os.listdir('/sys/block/') if x.startswith('sd') ]
  hddict = hddtmp_dict(hdds_list)
  for k in hddict:
      print(k, hddict[k]) 
```

在我的存储服务器上，这会在 2 秒内返回 38 个驱动器的完整列表，而在 50 秒内依次遍历所有磁盘。也就是说，在 40 芯盒子上，负载从 1.08 左右跃升至 3.50。所以，随心所欲吧。我试图找到一种方法来使用 proc 或可能[基于另一个堆栈溢出的 fcntl 我发现](https://stackoverflow.com/questions/4193514/how-to-get-hard-disk-serial-number-using-python)拉数据而不是使用 subprocess.popen 但是嗯。

现在是凌晨 2 点 22 分，我需要开始回家了。在那里，我将尝试概述上面的代码片段，并说出我认为一切都在做什么，但我希望它有点不言自明。

对不起kludge代码。我认为在这一点上缓冲是更好的方法，但这是一个很酷的练习。如果您不想安装 hddtemp 并且我认为缓冲区 + 以上可能是最好的选择。仍在试图弄清楚这一点，因为我还不明白如何上课。

我希望这可以帮助别人。

# c# - 检测硬盘是通过 USB 还是通过其他没有 WMI 的方式连接的

> ID：10421720
> 
> 赞同：2
> 
> 时间：2012-05-02T21:04:45.473
> 
> 标签：c#, .net, pinvoke

我想知道连接的驱动器是否通过 SATA、IDE、eSATA 或 Firewire 连接到 USB。有没有办法在不使用 WMI 的情况下找到它？我正在使用此代码来获取一些信息。

```
 DriveInfo[] drives = DriveInfo.GetDrives();
 foreach (DriveInfo drive in drives) {
    // DriveType.Fixed && DriveType.Removable

 } 
```

不幸的是，所有通过 USB 连接的 HDD 都会返回`DriveType.Fixed`，并且只有 USB 记忆棒才能使用`DriveType.Removable`。

我想我正在寻找这样的东西......只是我不知道我真正在寻找什么。不幸`GetVolumeInformation`的是，没有提供了解`InterfaceType`

```
 [DllImport("kernel32.dll")]
    private static extern long GetVolumeInformation(
        string PathName, 
        StringBuilder VolumeNameBuffer, 
        UInt32 VolumeNameSize, 
        ref UInt32 VolumeSerialNumber, 
        ref UInt32 MaximumComponentLength, 
        ref UInt32 FileSystemFlags, 
        StringBuilder FileSystemNameBuffer, 
        UInt32 FileSystemNameSize); 
```

我想跳过 WMI。我知道我可以通过或多或少的代码找到它：

```
 ManagementObjectSearch theSearcher = new ManagementObjectSearcher(
  "SELECT * FROM Win32_DiskDrive WHERE InterfaceType='USB'"); 
```

但我宁愿避免它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:32:52.280

我不确定为什么您需要如此特别的变化；但你必须使用 WMI。不幸的是，尽管基于 USB 的硬盘驱动器是可移动的，但它仍然使用实际磁盘而不是闪存。因此，`DriveInfo`将更有可能认为它已修复。

唯一的选择是导入`System.Management`程序集。

您可以检索每个驱动器的总线信息。或者可能使用这个工具来检索[`HID Descriptions`](http://www.usb.org/). 或其他通常用于编写[自定义驱动程序](http://sourceforge.net/projects/libusbdotnet/)的工具。

但这可能是您最好的套房；因为它包括一种简单地确定驱动器是否被视为外部*驱动器**的*方法。 [这显然不会解决固定/可移动的问题，但有助于定位设备类型](https://stackoverflow.com/questions/9891854/how-to-determine-if-drive-is-external-drive)。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:48:06.017

设备管理器 API 肯定能够告诉您每个磁盘连接到哪个总线和控制器。但它对 p/invoke 不是很友好。我建议用 C++ 编写这部分代码，然后使用 C++/CLI 或为 p/invoke 导出而设计的 C# 友好界面。

此解决方案的核心将调用`SetupDiGetDeviceRegistryProperty`以获取与`SPDRP_BUSTYPEGUID`. 但是要获得正确的`HDEVINFO`手柄`PSP_DEVINFO_DATA`将需要一些工作。

# java - LWJGL 形状中的随机线条

> ID：10421726
> 
> 赞同：-3
> 
> 时间：2012-05-02T21:05:05.613
> 
> 标签：java, opengl, lwjgl

我在游戏中的四边形之间有随机线，我想删除它们：![在此处输入图像描述](../Images/820980e5a8730eadecd2613756d65bef.png)

如您所见，立方体之间似乎有线条。有谁知道如何删除它们？我正在使用openGL。

编辑：我的意思是是否有诸如 glEnable 之类的 OpenGL 函数来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:50:42.090

我猜你在图像上有所有的纹理？

在块的边缘附近，OpenGL 对附近的像素进行采样以使其平滑，所以在你的泥块边缘你可以看到它稍微淡化成石块

试试这个的 lwjgl 版本：

`glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST)` `glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST)`

（以上在c++中）

这会给你像我的世界一样的像素化效果

看看这个以获得更多信息[http://gregs-blog.com/2008/01/17/opengl-texture-filter-parameters-explained/](http://gregs-blog.com/2008/01/17/opengl-texture-filter-parameters-explained/)

# asp.net-mvc - 禁止使用 [Authorize] 操作过滤器的控制器方法的浏览器身份验证登录对话框

> ID：10421727
> 
> 赞同：7
> 
> 时间：2012-05-02T21:05:06.797
> 
> 标签：asp.net-mvc

我正在使用 Windows 身份验证创建 Intranet 站点。

也许我不是最好的方法，但我试图通过调用一个控制器方法来加载部分视图，该方法周围有一个 Authorize 操作过滤器，这样只有授权的个人才能看到页面的那部分. 比如说，我想将管理员工具加载到页面上，但前提是登录的个人是管理员。

所以在 index.cshtml 页面上，我可能会有类似的内容：

```
@Html.Action("LoadAdminTools","ControllerName") 
```

控制器将包含以下代码：

```
 [Authorize(Roles="Admins")]
        public ActionResult LoadAdminTools()
        {
            return PartialView("_AdminToolsPartialView");
        } 
```

然后包含管理控件（或其他）的部分视图将呈现到页面 -**仅**当登录用户是*管理员*角色的一部分时。

我遇到的“问题”是，如果登录的人无权加载部分视图，浏览器会弹出登录对话框，询问用户的凭据。在不输入任何凭据的情况下关闭对话框会导致预期结果 - 部分视图不会加载，而页面的其余部分会加载。很酷，但很烦人。输入不正确的凭据，您会收到 401 错误 - 也如预期的那样。

如果有帮助：在 IIS 中，*禁用匿名身份验证，**启用*Windows 身份验证。在 Internet 选项中的“安全设置 - 本地 Intranet 区域”下选择“使用当前用户名和密码自动登录”。

**我的问题是**：有没有办法在浏览器不要求用户登录的情况下使用 [Authorize] 操作过滤器来加载部分视图（或执行任何操作）？只需让它获取当前登录的凭据，检查它们是否符合操作过滤器，如果符合，则加载部分视图，如果不符合，则不要。如果没有，是否有更好的方法来完成我想要在这里完成的事情？

**更新**

* * *

美丽的。我阅读了您发布的问题的解决方案，Mystere Man，在 Controller 的文件夹中创建了一个名为*IntranetAuthorizeAttribute.cs*的新类，并输入了代码：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = true)]
    public class IntranetAuthorizeAttribute : System.Web.Mvc.AuthorizeAttribute
    {        
        protected override void HandleUnauthorizedRequest(System.Web.Mvc.AuthorizationContext filterContext)
        {
            if (filterContext.HttpContext.Request.IsAuthenticated)
            {
                filterContext.Result = new System.Web.Mvc.HttpStatusCodeResult(403);
            }
            else
            {
                base.HandleUnauthorizedRequest(filterContext);
            }
        }        
    } 
```

用我的新 IntranetAuthorize 过滤器替换了 Authorize 过滤器：

```
 [IntranetAuthorize(Roles="Admins")]
        public ActionResult LoadAdminTools()
        {
            return PartialView("_AdminToolsPartialView");
        } 
```

现在它可以很好地加载页面，**没有**浏览器登录对话框 -当它是授权用户时*使用部分视图，当它**不是授权**用户时**没有*部分视图=)

 *谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:29:17.883

不幸的是，ASP.NET（以及 MVC）在可能的情况下将授权和身份验证混为一谈。

检查此问题以获取解决方案。

[为什么AuthorizeAttribute会重定向到登录页面进行认证和授权失败？](https://stackoverflow.com/questions/238437/why-does-authorizeattribute-redirect-to-the-login-page-for-authentication-and-au)*

# ruby - 我无法在 Windows 中安装 EventMachine

> ID：10421728
> 
> 赞同：1
> 
> 时间：2012-05-02T21:05:10.077
> 
> 标签：ruby, windows, eventmachine

我只是尝试使用 RubyGems 安装 EventMachine : (gem install eventmachine)。我使用 Windows 7 x64。

我收到此错误：

```
C:/Ruby/193/bin/ruby.exe extconf.rb
checking for rb_trap_immediate in ruby.h,rubysig.h... no
checking for rb_thread_blocking_region()... yes
checking for inotify_init() in sys/inotify.h... no
checking for __NR_inotify_init in sys/syscall.h... no
checking for writev() in sys/uio.h... no
checking for rb_thread_check_ints()... yes
checking for rb_time_new()... yes
checking for windows.h... yes
checking for winsock.h... yes
checking for main() in -lkernel32... yes
checking for main() in -lrpcrt4... yes
checking for main() in -lgdi32... yes
checking for main() in -lssl... no
creating Makefile

make
generating rubyeventmachine-i386-mingw32.def
compiling binder.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid for C/ObjC but not for C++
In file included from project.h:137:0,
                 from binder.cpp:20:
binder.h:35:34: warning: type qualifiers ignored on function return type
In file included from project.h:138:0,
                 from binder.cpp:20:
em.h:91:47: warning: type qualifiers ignored on function return type
em.h:92:76: warning: type qualifiers ignored on function return type
em.h:93:56: warning: type qualifiers ignored on function return type
em.h:95:57: warning: type qualifiers ignored on function return type
em.h:96:60: warning: type qualifiers ignored on function return type
em.h:97:58: warning: type qualifiers ignored on function return type
em.h:98:55: warning: type qualifiers ignored on function return type
em.h:99:36: warning: type qualifiers ignored on function return type
em.h:101:47: warning: type qualifiers ignored on function return type
em.h:106:42: warning: type qualifiers ignored on function return type
em.h:123:45: warning: type qualifiers ignored on function return type
em.h:132:36: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from binder.cpp:20:
eventmachine.h:45:61: warning: type qualifiers ignored on function return type
eventmachine.h:46:112: warning: type qualifiers ignored on function return type
eventmachine.h:47:69: warning: type qualifiers ignored on function return type
eventmachine.h:49:73: warning: type qualifiers ignored on function return type
eventmachine.h:62:75: warning: type qualifiers ignored on function return type
eventmachine.h:63:74: warning: type qualifiers ignored on function return type
eventmachine.h:64:77: warning: type qualifiers ignored on function return type
eventmachine.h:65:41: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from binder.cpp:20:
eventmachine.h:99:60: warning: type qualifiers ignored on function return type
eventmachine.h:100:58: warning: type qualifiers ignored on function return type
eventmachine.h:102:60: warning: type qualifiers ignored on function return type
eventmachine.h:105:41: warning: type qualifiers ignored on function return type
compiling cmain.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid for C/ObjC but not for C++
In file included from project.h:137:0,
                 from cmain.cpp:20:
binder.h:35:34: warning: type qualifiers ignored on function return type
In file included from project.h:138:0,
                 from cmain.cpp:20:
em.h:91:47: warning: type qualifiers ignored on function return type
em.h:92:76: warning: type qualifiers ignored on function return type
em.h:93:56: warning: type qualifiers ignored on function return type
em.h:95:57: warning: type qualifiers ignored on function return type
em.h:96:60: warning: type qualifiers ignored on function return type
em.h:97:58: warning: type qualifiers ignored on function return type
em.h:98:55: warning: type qualifiers ignored on function return type
em.h:99:36: warning: type qualifiers ignored on function return type
em.h:101:47: warning: type qualifiers ignored on function return type
em.h:106:42: warning: type qualifiers ignored on function return type
em.h:123:45: warning: type qualifiers ignored on function return type
em.h:132:36: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from cmain.cpp:20:
eventmachine.h:45:61: warning: type qualifiers ignored on function return type
eventmachine.h:46:112: warning: type qualifiers ignored on function return type
eventmachine.h:47:69: warning: type qualifiers ignored on function return type
eventmachine.h:49:73: warning: type qualifiers ignored on function return type
eventmachine.h:62:75: warning: type qualifiers ignored on function return type
eventmachine.h:63:74: warning: type qualifiers ignored on function return type
eventmachine.h:64:77: warning: type qualifiers ignored on function return type
eventmachine.h:65:41: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from cmain.cpp:20:
eventmachine.h:99:60: warning: type qualifiers ignored on function return type
eventmachine.h:100:58: warning: type qualifiers ignored on function return type
eventmachine.h:102:60: warning: type qualifiers ignored on function return type
eventmachine.h:105:41: warning: type qualifiers ignored on function return type
cmain.cpp:98:71: warning: type qualifiers ignored on function return type
cmain.cpp:109:122: warning: type qualifiers ignored on function return type
cmain.cpp:119:79: warning: type qualifiers ignored on function return type
cmain.cpp:129:83: warning: type qualifiers ignored on function return type
cmain.cpp:260:85: warning: type qualifiers ignored on function return type
cmain.cpp:270:84: warning: type qualifiers ignored on function return type
cmain.cpp:280:88: warning: type qualifiers ignored on function return type
cmain.cpp:290:51: warning: type qualifiers ignored on function return type
cmain.cpp:300:70: warning: type qualifiers ignored on function return type
cmain.cpp:320:55: warning: type qualifiers ignored on function return type
cmain.cpp:546:70: warning: type qualifiers ignored on function return type
cmain.cpp:669:68: warning: type qualifiers ignored on function return type
cmain.cpp: In function 'int evma_send_file_data_to_connection(long unsigned int, const char*)':
cmain.cpp:752:6: error: cannot convert 'stat*' to '_stati64*' for argument '2' to 'int _fstati64(int, _stati64*)'
make: *** [cmain.o] Error 1 
```

我使用 Ruby 1.9.3 你有什么想法吗？

Ruby 在 Windows 中存在一些问题，我对使用 Cygwin 犹豫不决，你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:11:55.140

使用 Rubygems 获取 EM：

```
gem install eventmachine --pre 
```

我自己安装了很多次，从来没有出现过问题。这`--pre`将使它在 Windows 上正确安装。

此外，第一个 Google 结果[`install eventmachine on windows`](https://www.google.com/#sclient=psy-ab&hl=en&site=&source=hp&q=install+eventmachine+on+windows&oq=install+&aq=0p&aqi=p-p2g8&aql=&gs_l=hp.3.0.35i39l2j0l8.1283.2145.1.3127.8.8.0.0.0.0.170.1003.2j6.8.0...0.0.bDtXLAzLkAQ&psj=1&bav=on.2,or.r_gc.r_pw.,cf.osb&fp=f2111a854f511ad4&biw=1366&bih=645)导致了[这个问题](https://stackoverflow.com/q/6927907/366051)，这与您的完全相同。

编辑：这个答案是在 EM 1.0 发布之前。现在，标准`gem install eventmachine`应该可以工作并安装 1.0.3。

# c# - 使用点击处理程序时出现“系统未定义”JavaScript 错误？

> ID：10421741
> 
> 赞同：1
> 
> 时间：2012-05-02T21:06:08.490
> 
> 标签：c#, javascript, asp.net

我在其中一列中有一个带有按钮的gridview。我使用后面的代码将列添加到gridview。我用这一行来附加我的点击事件：

`cmd1.OnClientClick += new EventHandler(cmd1_Click);`

现在每次我单击该按钮时，它都会给我一个运行时错误并`System.EventHandler`中断`<input type="submit" name="grvList$ctl02$ctl05" value="Add" onclick="System.EventHandler;" />`

有没有人遇到过这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:15:22.833

正如用户 user1090190 在评论中所写，`onclick`（从 生成`OnClientClick`）在网络浏览器中作为 JavaScript 执行。

在`+=`这种情况下，调用创建`ToString()`的新`EventHandler`对象会产生字符串`"System.EventHandler"`。（`+=`表达式扩展为`cmd1.OnClientClick = cmd1.OnClientClick + (new EventHandler(cmd1_Click));`并发生隐式转换，因为`OnClientClick`它被键入为字符串。）

它应该是（注意*no* `Client`）：

```
cmd1.Click += new EventHandler(cmd1_Click) 
```

或者，更简单地说（不要问我为什么自动完成总是“包装”）：

```
cmd1.Click += cmd1_Click; 
```

确保在适当的情况下设置此处理程序*每​​个*回发。

快乐编码。

# google-maps - 使用 Google Places API 时，“使用 JavaScript 库”和“直接调用 API”有什么区别？

> ID：10421745
> 
> 赞同：7
> 
> 时间：2012-05-02T21:06:34.180
> 
> 标签：google-maps, google-places-api

我已经多次看到对**Google Places** Library/Service 的两种引用形式，使用 JavaScript 与直接调用 API，但我不明白其中的区别。Google Docs 没有描述两种访问 API 的方法。

例如，这个问题讨论了 2 种访问 API 的方法：[循环中的 OVER_QUERY_LIMIT](https://stackoverflow.com/q/10409141/1314132)

似乎在这个问题中发生了某种类型的直接网络访问：[Querying Google Places API using jQuery](https://stackoverflow.com/q/6104122/1314132)

这是一种涉及格式化 URL 参数的旧方法而新方法是利用 JavaScript 库调用的东西吗？

**最终摘要编辑**：有*两种*不同的方式从谷歌请求数据，如下面@Dan Nissenbaum 的回答所述。自从我的原始问题以来，上面引用的 QUERY_LIMIT 问题已经过编辑，还包含有关这两个选项的更多信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T21:23:16.960

也许您指的是旨在在 SERVER 上使用的 Google Places API（即使用 PHP 直接调用 Google Places API）与使用完全不同的 Google Places Javascript 库的方法之间的区别，其中 BROWSER使用 Google 提供的 Javascript 库执行 Javascript（内部封装了对 Google Places API 的调用，因此作为 Javascript 程序员，您只需要了解 Google 提供的 Javascript 库并使用它）？

这是两种情况。

**场景 #1：**直接使用 API。对于此方法，您必须参考 Google 的 Google Places API 的 API 文档：[https](https://developers.google.com/maps/documentation/places/) ://developers.google.com/maps/documentation/places/ 。

使用此 API 的工作方式如下（仅给出一个简单示例）。假设您要检索纬度=-27.2531166，经度=138.8655664 1000米以内的地方。您需要按照 API 文档的描述点击 URL：[https](https://developers.google.com/maps/documentation/places/#PlaceSearchRequests) ://developers.google.com/maps/documentation/places/#PlaceSearchRequests 。

在此示例中，URL 如下所示（很长）：

```
https://maps.googleapis.com/maps/api/place/search/json?location=-27.2531166,138.8655664&radius=1000&sensor=false&key=AddYourOwnKeyHere 
```

你需要一把钥匙供你个人使用，我假设你有。您还可以指定其他选项，例如将结果限制为餐馆等。

当您点击此 URL 时，数据将以 JSON 或 XML 格式返回，如`json`上面 URL 中的文本所指定（使用`xml`xml 的文本）。当您在浏览器中点击 URL 时，此数据的返回与任何 URL 调用返回的数据**完全相同。**

您可以通过直接在浏览器中输入 URL 来进行测试，然后查看结果。

要直接从代码中使用 API，您需要使用在代码中点击上述外部 URL 并在代码中检索结果的代码（例如，使用 PHP CURL 库，或在 Javascript 中使用 AJAX）。

**场景 #2：**您使用 Google 提供的*封装*API 的 Javascript 库，因此您不需要处理它。如果您不知道这是什么，我将使用有关此的更多详细信息来更新答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:53:27.380

文档确实讨论了两种不同的方法。Places Library 利用 JavaScript Google Maps API 中的 Google Places 服务。如果您在浏览器中使用 Google Maps API，这可能是适合您的方法： [https ://developers.google.com/maps/documentation/javascript/places](https://developers.google.com/maps/documentation/javascript/places)

还有一个 Web 服务，它允许您直接从您的应用程序中查询。您可以使用对 Google 服务的直接 http 调用来查询它。如果您需要访问服务器或移动设备上的数据，这是您想要采取的方法： [https ://developers.google.com/maps/documentation/places](https://developers.google.com/maps/documentation/places)

# jquery - Ajax 按类（或 li）加载内容

> ID：10421746
> 
> 赞同：0
> 
> 时间：2012-05-02T21:06:39.547
> 
> 标签：jquery, ajax

我正在尝试编写一个 ajax 滑块。当然，作为新手，我发现自己迷失在无用的谷歌搜索的海洋中。应该发生的是，当您单击下一个（或上一个）时，我想加载下一个（或上一个）列表项并从 DOM 中删除原始项。正如我现在的代码所示，我可以显示“开始”列表项，但是当我单击下一个（或上一个）时没有任何反应。另外我现在设置它的方式是它同时加载包含 div 中的所有内容，而不是获取我不/还没有弄清楚如何去做的特定列表项，这就是你来的地方在。

重要主页 HTML

```
<div id="navButtons">
    <div style="float:left" id="prevBtn">PREV</div>
    <div style="float:right" id="nextBtn">NEXT</div>
</div>

<div id="contentBox" style="clear:both;margin:0 auto">

</div> 
```

外部 HTML（通过 ajax 加载）

```
<div id="contentBox" style="clear:both;margin:0 auto">
     <ul>
        <li class="loadContent">CONTENT 1</li>
        <li class="loadContent">CONTENT 2</li>
        <li class="loadContent">CONTENT 3</li>        
        <li id="start" class="loadContent">CONTENT 4</li>        
        <li class="loadContent">CONTENT 5</li>        
        <li class="loadContent">CONTENT 6</li>        
        <li class="loadContent">CONTENT 7</li>        
        <li class="loadContent">CONTENT 8</li>
        <li class="loadContent">CONTENT 9</li>  
    </ul>
</div> 
```

CSS

```
#prevBtn, #nextBtn{cursor:pointer}
.loadContent { width:100px; height:40px; ;
        float:left; border:2px blue solid; 
        padding:2px;display:none }
  ul, li{list-style-type:none}
  #start{display:block} 
```

jQuery（我把它放在#contentBox 之后）

```
var $curr = $("#start");
    $("#contentBox").load("testContent.aspx #contentBox");
        $("#prevBtn").click(function () {
            $curr = $curr.prev('li');
            $('li').css("display", "none");
            $curr.css("display", "block");
        });
        $('#nextBtn').click(function () {
            $curr = $curr.next('li');
            $('li').css("display", "none");
            $curr.css("display", "block");
        }); 
```

[JSFiddle 如果有帮助...](http://jsfiddle.net/comatoseduck/bjVnr/)

**额外问题**：如何让旧内容向左滑出屏幕，而新内容向左滑到“舞台”上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:29:30.420

将您的 jQuery 更改为：

```
$("#contentBox").load("testContent.aspx #contentBox", function(){
    var $curr = $("#start");
    $("#prevBtn").click(function () {
        $curr = $curr.prev('li');
        $('li').css("display", "none");
        $curr.css("display", "block");
    });
    $('#nextBtn').click(function () {
        $curr = $curr.next('li');
        $('li').css("display", "none");
        $curr.css("display", "block");
    });
}); 
```

您将 $curr 变量设置为仅从 .load() 调用返回的元素，因此在设置时它不存在。通过将其放置在 .load() 函数的回调中，一旦数据出现，它将被分配。

# mongodb - mongodb中定义不同的多个索引

> ID：10421749
> 
> 赞同：0
> 
> 时间：2012-05-02T21:06:56.563
> 
> 标签：mongodb, indexing

这个问题很简单，你可以在一个集合中有多个索引吗？我想你可以，但每次我搜索多个索引时，我都会得到关于复合索引的解释，这不是我想要的。

我要做的就是确保我可以有两个简单的独立索引。（我用的是php，我会用php代码格式化，不过我懂的

```
db.posts.ensureIndex({ my_id1: 1 }, {unique: true, background: true});
db.posts.ensureIndex({ my_id2: 1 }, {background: true}); 
```

我一次只搜索一个索引。

复合索引不是我想要的，因为：

1.  一个索引是唯一的，而另一个不是。

2.  我认为这不会是最快的选择。（打开链接以了解我认为它会变慢的原因。[链接](http://groups.google.com/group/mongodb-user/browse_thread/thread/4536640126ff6661?pli=1)）

我只是想确保索引能够正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:15:36.850

您肯定可以按照自己的方式定义索引。来自[MongoDB 文档](http://www.mongodb.org/display/DOCS/Indexes)：

**有多少索引？**索引通过一个键进行检索，包括有序的顺序检索，非常快。按键更新也更快，因为 MongoDB 可以非常快速地找到要更新的文档。但是，请记住，创建的每个索引都会为插入和删除增加一定的开销。除了将数据写入基本集合之外，还必须将键添加到 B-Tree 索引中。因此，索引最适合读取次数远大于写入次数的集合。对于写入密集型的集合，索引在某些情况下可能会适得其反。大多数集合都是读取密集型的，因此在大多数情况下索引是一件好事。

我还建议您查看Mongo在运行通过两个字段的查询时[将如何决定使用什么索引。](http://www.mongodb.org/display/DOCS/Query+Optimizer)

另请查看他们的[索引建议和常见问题解答](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ)页面。它将解释[每个查询只有一个索引](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-Oneindexperquery.)、[选择性](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-Becarefulaboutsinglekeyindexeswithlowselectivity.)等。

ps 这个来自 10gen 的[幻灯片共享平台](http://www.slideshare.net/mongodb/indexing-with-mongodb)建议每个集合有 40 个索引的限制。

# c# - 从 Web 服务，我需要使用 Windows 身份验证和 asp.net 模拟调用同一网站内的另一个 Web 服务

> ID：10421750
> 
> 赞同：2
> 
> 时间：2012-05-02T21:07:07.410
> 
> 标签：c#, web-services, iis-7

**背景/系统信息**

*   Windows Server 2008 标准 x64、IIS 7.0
*   我有一个包含单个 IIS 应用程序的 IIS 站点。
*   每个应用程序都包含用 .NET 4.0 编写的 Web 服务，使用 Any CPU 编译。
*   所有应用程序共享同一个应用程序池。应用程序池设置为 .NET 4.0 和集成管道。
*   该站点是为 ASP.NET 模拟和 Windows 身份验证设置的。
*   该站点仅在我们的域/内部网中使用。
*   客户端应用程序（不在 Server 2008 机器上但在域内运行的 C# 应用程序）使用生成的代理类使用 System.Net.CredentialCache.DefaultCredentials 方法传递凭据。

**目标**

*   我们有一些web服务方法需要调用存在于同一个站点的web服务方法，只是站点下的另一个iis应用。

**问题**

*   当第一个 Web 服务方法调用第二个 Web 服务方法（通过生成的代理类），传递 DefaultCredentials 或 DefaultNetworkCredentials 时，我收到 401 未经授权的错误。

**这是我所知道的和我尝试过的**

*   我已经阅读了几乎所有关于 so 的文章，每个人都在谈论双跳。我对双跳的术语感到困惑。我不会跳到新机器上，我在同一个网站内的当前机器上。这不是双跳吧？

*   我们在 Windows Server 2003 上的 IIS 6 中运行与 .NET 1.1 相同的 Web 服务，并将 DefaultCredentials 传递给第二个 Web 服务调用有效！没有 401 错误。IIS 6 上的 Web 服务设置都使用相同的应用程序池，并且都设置为应用程序。

*   在我运行 IIS 7.5 的 Windows 7 开发机器上，我能够完成这项工作。我可以使用 System.Net.CredentialCache.DefaultNetworkCredentials 或 System.Net.CredentialCache.DefaultCredentials 使用来自另一个 Web 服务的代理类调用 Web 服务。看来我的 win7 IIS 7.5 站点和我的 server 2008 站点的设置方式相同。

*   我尝试为我站点中的每个应用程序使用不同的应用程序池（集成管道），但没有帮助（我认为不会）。

*   当我将应用程序池设置为经典时，该站点将无法启动。我收到服务不可用错误。这很奇怪，因为在我的 win7 机器上，我可以使用经典或集成管道并且它工作正常。

    我觉得我很接近。任何想法或意见将不胜感激！

    谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:49:05.267

我的问题是双跳。

此链接可以帮助 [http://odetocode.com/blogs/scott/archive/2005/02/24/roadmap-to-delegation.aspx](http://odetocode.com/blogs/scott/archive/2005/02/24/roadmap-to-delegation.aspx) [http://blogs.msdn.com/b/larryosterman/archive/2004/06 /29/169085.aspx](http://blogs.msdn.com/b/larryosterman/archive/2004/06/29/169085.aspx)

瓦甘

# php - if else 并包括

> ID：10421751
> 
> 赞同：3
> 
> 时间：2012-05-02T21:07:08.227
> 
> 标签：php

我有条件包含但遇到了问题。

例如，这有效

```
<?php if($t==3)
echo 'Foo';
    else
echo 'Foo something else';
    ?> 
```

这：不起作用

```
<?php if($t==3)
echo 'Foo';
include ('/home/path/public_html/includes/foo_one.php');
echo 'Example: one';
    else
echo 'Foo something else';
include ('/home/path/public_html/includes/foo_two.php');
echo 'Example: two';
 ?> 
```

你能解释一下我做错了什么吗？

或者我应该在包含中包含回声，然后只做 echo include ...blah else echo another include ...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T21:08:38.487

`{}`当您的块内的块`if/else`超过一行时，您需要使用。

```
<?php
if($t==3){
    echo 'Foo';
    include ('/home/path/public_html/includes/foo_one.php');
    echo 'Example: one';
}
else{
    echo 'Foo something else';
    include ('/home/path/public_html/includes/foo_two.php');
    echo 'Example: two';
}
?> 
```

无论如何你都应该使用`{}`它，它使阅读更容易，并防止这样的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T21:10:39.873

您缺少用于在 if else 中对多行进行分组的 { }：

```
<?php

if ($t==3) {

  // run all of this is $t equals 3
  echo 'Foo';
  include ('/home/path/public_html/includes/foo_one.php');
  echo 'Example: one';

} else {

  // otherwise, run this
  echo 'Foo something else';
  include ('/home/path/public_html/includes/foo_two.php');
  echo 'Example: two';

}

// runs every time
echo "test me, I always run";

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:08:52.807

```
<?php
if($t==3)
{
  echo 'Foo';
  include ('/home/path/public_html/includes/foo_one.php');
  echo 'Example: one';
}
else
{
  echo 'Foo something else';
  include ('/home/path/public_html/includes/foo_two.php');
  echo 'Example: two';
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-04T13:37:59.753

接受的答案是 100% 正确的，但是......

不必在任何地方都使用花括号 {}。此代码可能看起来像

```
if ($t==3):
    // code
else:
    // code
endif; 
```

所以需要`:`关闭`endif`

# mysql - 使用 perl 比较 2 个 mysql 表而不更新或组合

> ID：10421756
> 
> 赞同：1
> 
> 时间：2012-05-02T21:07:44.227
> 
> 标签：mysql, perl

我正在尝试比较 2 个具有相同方案和列的 mysql 表。该表包含 ip 地址、它们通信的端口、是否是入站或出站以及 1 个月内的连接数。下面是一个包含数字的小示例表（实际表大约有 100k 行）。

```
+---------------+------+----------+-------------+-----------+
| ip_address    | port | protocol | connections | direction |
+---------------+------+----------+-------------+-----------+
| 123.17.19.6    | 123  | 17       | 31972       | IN        |
| 123.17.19.6    | 22   | 6        | 4           | IN        |
| 123.17.19.6    | 25   | 6        | 206969      | IN        |
| 123.17.19.10   | 135  | 6        | 2997        | OUT       |
| 123.17.19.10   | 389  | 17       | 4965        | OUT       |
| 123.17.19.10   | 389  | 6        | 7089        | OUT       |
| 123.17.19.11   | 139  | 6        | 1           | OUT       |
| 123.17.19.10   | 135  | 6        | 1102        | OUT       |
| 123.17.19.11   | 389  | 17       | 2993        | OUT       |
| 123.17.19.11   | 389  | 6        | 1629        | OUT       |
| 123.17.19.11   | 443  | 6        | 28          | OUT       |
| 123.17.19.11   | 445  | 6        | 4267        | OUT       |
| 123.17.19.11   | 53   | 17       | 5230        | OUT       |
| 123.17.19.11   | 53   | 6        | 10          | OUT       |
| 123.17.19.11   | 80   | 6        | 11          | OUT       |
| 123.17.19.12   | 135  | 6        | 1640        | OUT       |
| 123.17.19.12   | 22   | 6        | 2           | OUT       |
| 123.17.19.10   | 22   | 6        | 6           | OUT       |
| 123.17.19.12   | 389  | 17       | 2539        | OUT       |
+---------------+------+----------+-------------+-----------+ 
```

我想做的是比较 2 个月，看看哪些 IP、端口、原型和方向组合是新的/不再存在的，对于任何匹配项，请查看连接数的变化

我最初的想法是简单地遍历每一行，然后对另一个表运行查询以查看该连接是否存在，但这会导致运行数十万个查询。我只是觉得必须有一种更简单的方法来做到这一点。（下面的例子）

```
use strict;
use warnings;
use DBI;

my ($db1_list,$db2_list,@compare_list1,@compare_list2);
my $db1 = "Jan";
my $db2 = "Feb";

$db2_list = login()->prepare(qq(select * from $db2));
$db2_list->execute;

while (@compare_list2 = $db2_list->fetchrow()){
  $db1_list = login()->prepare(qq(select * from $db2 where ip_address = "@compare_list2[0]" and port = @compare_list2[1] and protocol = @compare_list2[2] and direction = "@compare_list2[4]"));
  $db1_list->execute;

  while (@compare_list1 = $db1_list->fetchrow()){
    if (@compare_list1[0] ~~ @compare_list2[0]);
      @compare_list[3] -= @compare_list[3];
      print "@compare_list[3]\n";
    }
    else {
      print "@compare_list2[0], @compare_list2[1], @compare_list2[2], @compare_list2[3], @compare_list2[4] was seen in $db2 and not in $db1\n";
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:11:08.047

MySQL 可以在单个查询中执行此操作：

```
SELECT *
FROM Feb
WHERE NOT EXISTS (SELECT 1 FROM Jan
    WHERE Feb.ip = Jan.ip
    AND Feb.protocol = Jan.protocol
    AND Feb.direction = Jan.direction
) 
```

现在你有一个列表，`Feb`其中没有匹配的所有内容`month2`（所以它是 2 月的“新”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:18:10.783

**问题 1：** 获取匹配的行。

这将为所有比较的列返回具有相同值的行：

```
select * 
from table1
inner join table2
using (... column names ...); 
```

或者

```
select * 
from table1
inner join table2
on table1.<field> = table2.<field> and ...; 
```

**问题2：**

您可以使用第 1 部分作为子查询来实现关系减法，回答“哪些行是新的/缺少的”问题：

```
select * 
from table1
left join ( ... subquery ...) as sq
on ... join condition ...
where ... <some fields in the subquery are null>; 
```

这是有效的，因为在`table`子查询中没有匹配的行将`NULL`在子查询列中具有 s。

# java - 如何在文本结束后在 TextView 上覆盖 EditText

> ID：10421758
> 
> 赞同：3
> 
> 时间：2012-05-02T21:07:50.643
> 
> 标签：java, android, android-edittext, textview

我正在尝试使用 TextView 创建一段文本，并且需要在文本之间插入 EditText，例如填充空白。是否可以构建这样的自定义视图？因为我是这个论坛的新手，所以我可以发布任何图像。它应该如下所示：

世界是整个人类的通用名称**[编辑文本]**，特别是人类的经验、历史或一般的人类状况，全世界，即地球上的任何地方。[2]

在**[编辑文本]**上下文中，它可能指：（1）整个物理宇宙，或（2）本体世界（参见世界披露）。在**[EDIT TEXT]**语境中，世界通常是指物质或世俗领域，而不是天上的、精神的、超然的或神圣的。“世界末日”指的是人类历史末日的情景，通常是在宗教背景下。

* * *

行。现在我可以发布图片了 :-) 在下图中，红色的单元格是编辑文本。其他彩色文本是文本视图（抱歉颜色太亮了）。现在，如果我在 RelativeLayout 中使用 leftOf/rightOf 方法，它将看起来像第二个图像。我想错了方向吗？

[图片 http://desmond.imageshack.us/Himg822/scaled.php?server=822&filename=imagewg.png&res=landing](http://desmond.imageshack.us/Himg822/scaled.php?server=822&filename=imagewg.png&res=landing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:40:22.607

如果不制作自己的布局管理器，似乎没有一种简单的方法可以做到这一点。有关换行小部件布局实现的信息，请参阅这篇[**文章。**](https://stackoverflow.com/a/560958/844882)您也可以通过使用 Romain Guy 的[**`FlowLayout`**](https://github.com/ApmeM/android-flowlayout/blob/master/src/main/java/org/apmem/tools/layouts/FlowLayout.java)实现来实现类似的效果。

我以前从未使用过这些实现中的任何一个来实现您描述的“填充空白”效果，但在我看来，您需要通过布局的方法添加`TextView`and对象。您可能需要进行一些试验才能使其正常工作，但我认为这应该可以帮助您走上正确的轨道。`EditText``addView`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T23:45:56.460

我认为最好的方法是创建自己的 editText 视图。但是，这可能是一件非常困难的事情。

如果时间不够，可以使用 HTML 并使用 webView 来显示内容。我很确定在 html 中这个任务要容易得多，因为它已经在很多地方实现了。

* * *

编辑：

另一种解决方案是使用[FlowTextView](https://code.google.com/p/android-flowtextview/)库。它从RelativeLayout 扩展，但充当textView。我没有对其进行测试，但只运行了他们的示例（通过一个名为[DevAppDirect](https://play.google.com/store/apps/details?id=com.inappsquared.devappsdirect)的酷应用）

# eclipse-plugin - Eclipse 属性视图连接机智 swt 树小部件

> ID：10421760
> 
> 赞同：0
> 
> 时间：2012-05-02T21:07:55.943
> 
> 标签：eclipse-plugin

我正在尝试为我的应用程序创建 eclipse 插件。我很震惊并在谷歌上搜索了很多以获得答案。但无法破解问题。问题：我能够创建一个包含所有 treeItem 的 Swt Tree 小部件。现在对于树中的每个树项，我想在 Eclipse 属性视图中显示不同的属性集。我找到了如何将属性视图与 TreeViwer 连接的示例，但不适用于 swt Tree 小部件。谁能指出我可以找到这个的位置。在此先感谢，托尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:31:20.220

在您看来，只需构造一个`TreeViewer`而不是 a`Tree`就完成了:-)

`viewer.getTree()`您可以通过...访问 SWT 控件

# java - 为什么我的框架没有被丢弃？

> ID：10421764
> 
> 赞同：1
> 
> 时间：2012-05-02T21:08:26.037
> 
> 标签：java, swing

我正在使用以下方法来显示框架：

```
public static void createImage(final String url, final String file, final String filetype) {
        UIUtils.setPreferredLookAndFeel();
        NativeInterface.open();
        SwingUtilities.invokeLater(new Runnable() {

            @SuppressWarnings("deprecation")
            @Override
            public void run() {

                frame = new JFrame();
                WebsiteThumbnailCreator ex = new WebsiteThumbnailCreator(url, file, filetype);

                frame.getContentPane().add(ex, BorderLayout.CENTER);
                frame.setSize(FRAMESIZE);
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
                frame.hide();
            }

        });

        NativeInterface.runEventPump(); 
  } 
```

然后我做一些计算，然后，我想再次处理框架：

```
try {
   ImageIO.write(rendered, filetype, new File(file + "." + filetype));
   frame.dispose();
   logger.trace("Tried to dispose the frame");
} catch (IOException e) {
   logger.fatal(e.getMessage());
} finally {
    logger.debug("Try to dispose the frame");
    frame.dispose();
} 
```

我可以看到日志消息，但是虚拟机仍在运行。我也想终止它。我究竟做错了什么？

似乎仍然在运行一个非守护线程，但我不明白为什么：

![在此处输入图像描述](../Images/58b88e90512cd2ede9755080cc100098.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:18:34.577

您没有设置 JFrame 的默认关闭操作，它默认为`JFrame.HIDE_ON_CLOSE`.

添加到您的 JFrame 设置代码：

```
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

如果您的 JFrame 是您的应用程序，并且您想在 JFrame 关闭时退出所有内容，或者

```
frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE); 
```

如果您的 JFrame 不是整个应用程序并且您想停止 Swing 线程但继续处理。

有关这方面的更多信息，请查看[JFrame API](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)

**编辑：**
关于您的评论，

> @HovercraftFullOfEels 好吧，如果你说的是对的，为什么我的框架在这​​段代码中消失了： public static void frameTest() throws InterruptedException { final JFrame jf = new JFrame("Hello World"); jf.setBounds(100, 100, 400, 400); jf.setVisible(true); 线程.sleep(8000); SwingUtilities.invokeLater(new Runnable() { public void run() { // TODO 自动生成的方法存根 jf.dispose(); } }); }

我翻译成：

```
public static void frameTest() throws InterruptedException {
  final JFrame jf = new JFrame("Hello World");
  jf.setBounds(100, 100, 400, 400);
  jf.setVisible(true);
  Thread.sleep(8000);
  SwingUtilities.invokeLater(new Runnable() {
     public void run() {
        jf.dispose();
     }
  });
} 
```

仅当没有更多非守护线程时才退出。如果你给它一个非守护线程，它会继续运行。例如，

```
public static void main(String[] args) {
  new Thread(new Runnable() {
     public void run() {
        for (int i = 0; i < 30; i++) {
           System.out.println("i := " + i);
           try {
              Thread.sleep(1000);
           } catch (InterruptedException e) {
              e.printStackTrace();
           }
        }
     }
  }).start();
  try {
     frameTest();
  } catch (InterruptedException e) {
     e.printStackTrace();
  }
} 
```

您的代码将在此示例中继续运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T22:03:16.170

如果你打电话

```
try {
   ImageIO.write(rendered, filetype, new File(file + "." + filetype));
   frame.dispose();
   logger.trace("Tried to dispose the frame");
} catch (IOException e) {
   logger.fatal(e.getMessage());
} finally {
    logger.debug("Try to dispose the frame");
    frame.dispose();
} 
```

然后代码将被执行，但是

1) 仅当在 EDT 上完成时，否则...... EDT 之外`Top-Level Containers`的内容会粘在屏幕上

或者

2）`Top-Level Containers`错过的方法`finalize()`，然后永远不会`GC'ed`（基于来自`Windows NT/2000`那个活着的资源的一些限制......），然后来自控制台的输出是正确的并且保持不变，直到当前的JVM实例在那里存在

3) 仅创建一个`JFrame`并将此容器重新用于另一个用户操作

*   `JFrame#getContentPane.removeAll()`

*   `JFrame.add(whatever)`

*   （Java7）`JFrame#revalidate();`（Java6 更好用，`JPanel`或者容器`ContentPane`也可以这样做）

*   `JFrame#repaint();`

编辑

您可以测试 DefaultCloseOperations 和 JFrame#dispose() 的其余设置

您在此处发布的代码与此代码中的 JMenuItem 相同

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.border.EmptyBorder;

public class ClosingFrame extends JFrame {

    private JMenuBar MenuBar = new JMenuBar();
    private JFrame frame = new JFrame();
    private static final long serialVersionUID = 1L;
    private JMenu File = new JMenu("File");
    private JMenuItem Exit = new JMenuItem("Exit");
    private JFrame frame1 = new JFrame();

    public ClosingFrame() {
        File.add(Exit);
        MenuBar.add(File);
        Exit.setBorder(new EmptyBorder(10, 10, 10, 10));
        Exit.addActionListener(new ExitListener());
        WindowListener exitListener = new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                int confirm = JOptionPane.showOptionDialog(frame,
                        "Are You Sure to Close this Application?",
                        "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                        JOptionPane.QUESTION_MESSAGE, null, null, null);
                if (confirm == 0) {
                    System.exit(1);
                }
            }
        };
        frame.addWindowListener(exitListener);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.setJMenuBar(MenuBar);
        frame.setPreferredSize(new Dimension(400, 300));
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);

        frame1.addWindowListener(exitListener);
        frame1.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame1.setPreferredSize(new Dimension(400, 300));
        frame1.setLocation(500, 100);
        frame1.pack();
        frame1.setVisible(true);
    }

    private class ExitListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            int confirm = JOptionPane.showOptionDialog(frame,
                    "Are You Sure to Close this Application?",
                    "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, null, null);
            /*JOptionPane.showMessageDialog(null, "Whatever", "Whatever",
                    JOptionPane.ERROR_MESSAGE);
            int confirm1 = JOptionPane.showOptionDialog(frame1,
                    "Are You Sure to Close this Application?",
                    "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, null, null);*/
            if (confirm == 0) {
                frame.dispose();
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ClosingFrame cf = new ClosingFrame();
            }
        });
    }
} 
```

编辑 2

在当前 API 的实现中没有任何区别

```
JFrame#dispose(); 
```

和

```
JFrame#setVisible(false); 
```

也不影响`UsedMemory`from current `JVM instance`，这个/这些容器会留[在内存中，直到当前的 JVM 实例存在](https://stackoverflow.com/questions/6309407/remove-top-level-container-on-runtime)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:37:21.920

只要有非守护线程，VM 就会继续运行。您可以使用显式退出 VM [`System.exit(status)`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#exit%28int%29)。查看正在运行的线程的最简单方法可能是使用 JConsole 附加到进程。主线程将继续运行，直到您从`main`主类中的方法返回。

# java - 安卓无法压缩

> ID：10421773
> 
> 赞同：1
> 
> 时间：2012-05-02T21:08:58.000
> 
> 标签：java, android, zip

我正在尝试在 Android 上使用 zip 进行压缩，但它不起作用。它确实创建了一个 3KB 大小的 zip 文件夹，仅此而已。我做错了什么？

```
public static void compress(String infile, String outfile){
    try {
         BufferedInputStream origin = null;
         FileOutputStream dest = new FileOutputStream(outfile);
         ZipOutputStream out = new ZipOutputStream(new BufferedOutputStream(dest));
         byte data[] = new byte[BUFFER];
         File f = new File(infile);
         Log.d(TAG, "Only one file found");
         FileInputStream fi = new FileInputStream(f);
         Log.d(TAG, "File Input Stream available " + fi.available());
         origin = new BufferedInputStream(fi, BUFFER);
         ZipEntry entry = new ZipEntry(infile);
         int count;
         out.putNextEntry(entry);
         while((count = origin.read(data, 0, BUFFER)) != -1) {
               out.write(data, 0, count);
            }
         origin.close();

         out.close();
      } catch(Exception e) {
         e.printStackTrace();
      }

} 
```

而我的调用函数是这样的

```
String outFile="/sdcard/CPTA/test.zip";
String inFile="/sdcard/CPTA/iso_3166-1_list_en.xml";
ZipUtility.compress(inFile, outFile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:18:33.363

以防万一，我会添加 closeEntry。

```
 out.putNextEntry(entry);
     while((count = origin.read(data, 0, BUFFER)) != -1) {
           out.write(data, 0, count);
        }
     origin.close();
     out.closeEntry(); 
```

# ruby-on-rails - 尝试在 ruby 中使用正则表达式来查找特定字符

> ID：10421775
> 
> 赞同：3
> 
> 时间：2012-05-02T21:09:14.600
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3.1

我正在尝试在 ruby​​ on rails 应用程序中使用正则表达式来搜索给定的字符串并找到打开和关闭方括号的任何实例（即 [ 和 ]）并选择两者之间的内容。

例如：

```
Lorem ipsum [dolor sit] amet... 
```

在此字符串中，结果将是：`[dolor sit]`

我玩了一下rubular，发现这或多或少符合我的要求

```
/\[.*?\]/ 
```

所以我的问题是，如何在不选择括号本身的情况下匹配两个方括号内的所有内容？还有我如何将它们实际集成到 ruby​​ 脚本中？

正则表达式对我来说是全新的领域，所以你们可以提供的任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:53:45.420

收集正则表达式的多个捕获是[String#scan的工作](http://ruby-doc.org/core-1.9.3/String.html#method-i-scan)

```
>> s="Lorem ipsum [dolor sit] [amet] ..."
=> "Lorem ipsum [dolor sit] [amet] ..."
>> s.scan(/\[([^\]]*)\]/).flatten
=> ["dolor sit", "amet"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:58:27.120

您需要使用`String#scan`：

```
"Hi [there] how are [you]?".scan(/\[.*?\]/)
 => ["[there]", "[you]"] 
```

此方法迭代整个字符串，返回每个匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:13:20.510

您可以将与要提取的输入部分相对应的正则表达式部分包装在里面`()`：

```
str = "Lorem ipsum [dolor sit] amet....".match(/\[(.*?)\]/)
# str --> #<MatchData "[dolor sit]" 1:"dolor sit"> 
str[1] # Will give you 'dolor sit' 
```

注意，也可以通过全局变量访问匹配的结果：（`$1`一般`$i`where`i`表示匹配词的索引）。

# java - 为 iText 生成的 PDF 编写 JUnit

> ID：10421778
> 
> 赞同：6
> 
> 时间：2012-05-02T21:09:32.213
> 
> 标签：java, junit, pdf-generation, itext

我很好奇是否有人有为 Java 生成的 PDF（尤其是 iText）编写 JUnit 的经验。我在谷歌上进行了快速搜索，但找不到任何具体内容。到目前为止，我能够做的是检查 PDF 是否已生成，是否有一定数量的页面并且文档是否已关闭。但我无法验证文件的内容。有人可以举一个例子，他们过去做了什么来达到这样的结果吗？还是我完全错了，我的 PDF 的 JUnit 是多余的？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:56:24.840

鉴于您使用的是 Java，我想看看[PDFBox](http://pdfbox.apache.org/) (Apache)。您要问的内容非常具有挑战性，因为您重新转换的 PDF 在语法上可能与您的原始文件不同。您可能需要考虑往返。

就比较而言，PDF 等文档可能很脆弱。如果您发现比较失败，则可能无法说明失败的位置。PDF 文档可能非常复杂（高度分支的树）。您可能需要寻找文档的规范化来比较它们（我为 XML 文档这样做）。

我的猜测是，一个完整的测试是多余的，你当前的测试以合理的成本尽可能好。

更新：我已经检查了 PDFBox 的 PDDocument.equals(PDDocument) 并且没有深度等于方法。这表明他们没有发现它值得（它需要在许多子节点上递归）。还有很多实数，所以这些都必须与容差进行比较。

位图方法可能适用于人类，但对实数问题非常敏感 - 舍入错误会在不同的像素中写入位。几乎可以肯定，新操作系统版本的行为会有所不同。

# php - PostgreSQL 在 PHP 上的简单连接和查询稍慢

> ID：10421780
> 
> 赞同：2
> 
> 时间：2012-05-02T21:09:46.300
> 
> 标签：php, mysql, postgresql

在 PHP 5.4.1 中，我使用本机 PostgreSQL 驱动程序连接到 SQL 服务器。即使我尝试 PDO 方式也是一样的。这里只有一个例外。如果我使用 pg_pconnect (persistent)，它会像我预期的那样非常快。

我从 PHP 到 PostgreSQL 的连接很慢。此外，*一些*查询也很慢。

例如，请看一下这张表。

```
id  type    active  serverip
1   1   0   127.0.0.1
2   10  1   127.0.0.1
3   4   1   127.0.0.1
4   7   1   127.0.0.1
5   13  1   127.0.0.1
6   2   1   127.0.0.1
7   11  1   127.0.0.1
8   6   1   127.0.0.1
9   9   1   127.0.0.1
10  3   0   192.168.1.202
11  5   1   127.0.0.1
12  8   1   127.0.0.1
13  12  1   127.0.0.1
14  14  1   127.0.0.1 
```

我的查询是`select * from mytable order by id desc`。所以，

该表在 上具有索引和主键`id`。该表在 MySQL 5.5.23 和 PostgreSQL 9.1.3 中相同 (1:1)

**MySQL**`0.0019 sec.`连接这个数据库并在But **PostgreSQL**中读取这个表（整个数据）`0.0069 sec`。这可能看起来像往常一样，但如果 MySQL 可以非常快地做到这一点，为什么不 PostgreSQL 呢？

在我的大桌子上，它需要的时间太长了。在大表 MySQL 连接和获取`0.09601 sec,`PostgreSQL 连接和获取它在~~0.11260 秒~~ `0.14201 sec.` *（现在测试）*

如您所见，在这个非常简单的数据库表中，PostgreSQL 简直慢了。这是我的 postgresql.conf 文件：

```
 listen_addresses = '*'      # what IP address(es) to listen on;
                    # comma-separated list of addresses;
                    # defaults to 'localhost', '*' = all
                    # (change requires restart)
port = 5432             # (change requires restart)
max_connections = 100           # (change requires restart)
# Note:  Increasing max_connections costs ~400 bytes of shared memory per
# connection slot, plus lock space (see max_locks_per_transaction).
#superuser_reserved_connections = 3 # (change requires restart)
#unix_socket_directory = ''     # (change requires restart)
#unix_socket_group = ''         # (change requires restart)
#unix_socket_permissions = 0777     # begin with 0 to use octal notation
                    # (change requires restart)
#bonjour = off              # advertise server via Bonjour
                    # (change requires restart)
#bonjour_name = ''          # defaults to the computer name
                    # (change requires restart)

# - Security and Authentication -

authentication_timeout = 20s        # 1s-600s
ssl = off               # (change requires restart)
#ssl_ciphers = 'ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH'  # allowed SSL ciphers
                    # (change requires restart)
#ssl_renegotiation_limit = 512MB    # amount of data between renegotiations
#password_encryption = on
#db_user_namespace = off

# Kerberos and GSSAPI
#krb_server_keyfile = ''
#krb_srvname = 'postgres'       # (Kerberos only)
#krb_caseins_users = off

# - TCP Keepalives -
# see "man 7 tcp" for details

#tcp_keepalives_idle = 0        # TCP_KEEPIDLE, in seconds;
                    # 0 selects the system default
#tcp_keepalives_interval = 0        # TCP_KEEPINTVL, in seconds;
                    # 0 selects the system default
#tcp_keepalives_count = 0       # TCP_KEEPCNT;
                    # 0 selects the system default

#------------------------------------------------------------------------------
# RESOURCE USAGE (except WAL)
#------------------------------------------------------------------------------

# - Memory -

shared_buffers = 1GB            # min 128kB
                    # (change requires restart)
temp_buffers = 16MB         # min 800kB
max_prepared_transactions = 0       # zero disables the feature
                    # (change requires restart)
# Note:  Increasing max_prepared_transactions costs ~600 bytes of shared memory
# per transaction slot, plus lock space (see max_locks_per_transaction).
# It is not advisable to set max_prepared_transactions nonzero unless you
# actively intend to use prepared transactions.
work_mem = 64MB             # min 64kB
maintenance_work_mem = 32MB     # min 1MB
max_stack_depth = 8MB           # min 100kB

# - Kernel Resource Usage -

max_files_per_process = 1000        # min 25
                    # (change requires restart)
shared_preload_libraries = ''       # (change requires restart)

# - Cost-Based Vacuum Delay -

vacuum_cost_delay = 0ms     # 0-100 milliseconds
vacuum_cost_page_hit = 100      # 0-10000 credits
vacuum_cost_page_miss = 100     # 0-10000 credits
vacuum_cost_page_dirty = 200        # 0-10000 credits
vacuum_cost_limit = 2000        # 1-10000 credits

# - Background Writer -

bgwriter_delay = 200ms          # 10-10000ms between rounds
bgwriter_lru_maxpages = 100     # 0-1000 max buffers written/round
bgwriter_lru_multiplier = 2.0       # 0-10.0 multipler on buffers scanned/round

# - Asynchronous Behavior -

#effective_io_concurrency = 1       # 1-1000\. 0 disables prefetching

#------------------------------------------------------------------------------
# WRITE AHEAD LOG
#------------------------------------------------------------------------------

# - Settings -

#wal_level = minimal            # minimal, archive, or hot_standby
                    # (change requires restart)
#fsync = on             # turns forced synchronization on or off
#synchronous_commit = on        # synchronization level; on, off, or local
#wal_sync_method = fsync        # the default is the first option
                    # supported by the operating system:
                    #   open_datasync
                    #   fdatasync (default on Linux)
                    #   fsync
                    #   fsync_writethrough
                    #   open_sync
#full_page_writes = on          # recover from partial page writes
#wal_buffers = -1           # min 32kB, -1 sets based on shared_buffers
                    # (change requires restart)
#wal_writer_delay = 200ms       # 1-10000 milliseconds

commit_delay = 0            # range 0-100000, in microseconds
commit_siblings = 5         # range 1-1000

# - Checkpoints -

#checkpoint_segments = 3        # in logfile segments, min 1, 16MB each
#checkpoint_timeout = 5min      # range 30s-1h
#checkpoint_completion_target = 0.5 # checkpoint target duration, 0.0 - 1.0
#checkpoint_warning = 30s       # 0 disables

# - Archiving -

#archive_mode = off     # allows archiving to be done
                # (change requires restart)
#archive_command = ''       # command to use to archive a logfile segment
#archive_timeout = 0        # force a logfile segment switch after this
                # number of seconds; 0 disables

#------------------------------------------------------------------------------
# REPLICATION
#------------------------------------------------------------------------------

# - Master Server -

# These settings are ignored on a standby server

#max_wal_senders = 0        # max number of walsender processes
                # (change requires restart)
#wal_sender_delay = 1s      # walsender cycle time, 1-10000 milliseconds
#wal_keep_segments = 0      # in logfile segments, 16MB each; 0 disables
#vacuum_defer_cleanup_age = 0   # number of xacts by which cleanup is delayed
#replication_timeout = 60s  # in milliseconds; 0 disables
#synchronous_standby_names = '' # standby servers that provide sync rep
                # comma-separated list of application_name
                # from standby(s); '*' = all

# - Standby Servers -

# These settings are ignored on a master server

#hot_standby = off          # "on" allows queries during recovery
                    # (change requires restart)
#max_standby_archive_delay = 30s    # max delay before canceling queries
                    # when reading WAL from archive;
                    # -1 allows indefinite delay
#max_standby_streaming_delay = 30s  # max delay before canceling queries
                    # when reading streaming WAL;
                    # -1 allows indefinite delay
#wal_receiver_status_interval = 10s # send replies at least this often
                    # 0 disables
#hot_standby_feedback = off     # send info from standby to prevent
                    # query conflicts

#------------------------------------------------------------------------------
# QUERY TUNING
#------------------------------------------------------------------------------

# - Planner Method Configuration -

enable_bitmapscan = on
enable_hashagg = on
enable_hashjoin = on
enable_indexscan = on
enable_material = on
enable_mergejoin = on
enable_nestloop = on
enable_seqscan = on
enable_sort = on
enable_tidscan = on

# - Planner Cost Constants -

seq_page_cost = 1.0         # measured on an arbitrary scale
random_page_cost = 4.0          # same scale as above
cpu_tuple_cost = 0.01           # same scale as above
cpu_index_tuple_cost = 0.005        # same scale as above
cpu_operator_cost = 0.0025      # same scale as above
effective_cache_size = 512MB

# - Genetic Query Optimizer -

geqo = on
geqo_threshold = 12
geqo_effort = 5         # range 1-10
geqo_pool_size = 0          # selects default based on effort
geqo_generations = 0            # selects default based on effort
geqo_selection_bias = 2.0       # range 1.5-2.0
geqo_seed = 0.0         # range 0.0-1.0

# - Other Planner Options -

#default_statistics_target = 100    # range 1-10000
#constraint_exclusion = partition   # on, off, or partition
#cursor_tuple_fraction = 0.1        # range 0.0-1.0
#from_collapse_limit = 8
#join_collapse_limit = 8        # 1 disables collapsing of explicit
                    # JOIN clauses

#------------------------------------------------------------------------------
# ERROR REPORTING AND LOGGING
#------------------------------------------------------------------------------

# - Where to Log -

log_destination = 'stderr'      # Valid values are combinations of
                    # stderr, csvlog, syslog, and eventlog,
                    # depending on platform.  csvlog
                    # requires logging_collector to be on.

# This is used when logging to stderr:
logging_collector = on          # Enable capturing of stderr and csvlog
                    # into log files. Required to be on for
                    # csvlogs.
                    # (change requires restart)

# These are only used if logging_collector is on:
log_directory = 'pg_log'        # directory where log files are written,
                    # can be absolute or relative to PGDATA
log_filename = 'postgresql-%a.log'  # log file name pattern,
                    # can include strftime() escapes
log_file_mode = 0777            # creation mode for log files,
                    # begin with 0 to use octal notation
log_truncate_on_rotation = on       # If on, an existing log file with the
                    # same name as the new log file will be
                    # truncated rather than appended to.
                    # But such truncation only occurs on
                    # time-driven rotation, not on restarts
                    # or size-driven rotation.  Default is
                    # off, meaning append to existing files
                    # in all cases.
log_rotation_age = 1d           # Automatic rotation of logfiles will
                    # happen after that time.  0 disables.
log_rotation_size = 0           # Automatic rotation of logfiles will
                    # happen after that much log output.
                    # 0 disables.

# These are relevant when logging to syslog:
#syslog_facility = 'LOCAL0'
#syslog_ident = 'postgres'

#silent_mode = off          # Run server silently.
                    # DO NOT USE without syslog or
                    # logging_collector
                    # (change requires restart)

# - When to Log -

#client_min_messages = notice       # values in order of decreasing detail:
                    #   debug5
                    #   debug4
                    #   debug3
                    #   debug2
                    #   debug1
                    #   log
                    #   notice
                    #   warning
                    #   error

#log_min_messages = warning     # values in order of decreasing detail:
                    #   debug5
                    #   debug4
                    #   debug3
                    #   debug2
                    #   debug1
                    #   info
                    #   notice
                    #   warning
                    #   error
                    #   log
                    #   fatal
                    #   panic

#log_min_error_statement = error    # values in order of decreasing detail:
                    #   debug5
                    #   debug4
                    #   debug3
                    #   debug2
                    #   debug1
                    #   info
                    #   notice
                    #   warning
                    #   error
                    #   log
                    #   fatal
                    #   panic (effectively off)

#log_min_duration_statement = -1    # -1 is disabled, 0 logs all statements
                    # and their durations, > 0 logs only
                    # statements running at least this number
                    # of milliseconds

# - What to Log -

#debug_print_parse = off
#debug_print_rewritten = off
#debug_print_plan = off
#debug_pretty_print = on
log_checkpoints = off
#log_connections = off
log_disconnections = off
log_duration = off
log_error_verbosity = default       # terse, default, or verbose messages
log_hostname = off
#log_line_prefix = ''           # special values:
                    #   %a = application name
                    #   %u = user name
                    #   %d = database name
                    #   %r = remote host and port
                    #   %h = remote host
                    #   %p = process ID
                    #   %t = timestamp without milliseconds
                    #   %m = timestamp with milliseconds
                    #   %i = command tag
                    #   %e = SQL state
                    #   %c = session ID
                    #   %l = session line number
                    #   %s = session start timestamp
                    #   %v = virtual transaction ID
                    #   %x = transaction ID (0 if none)
                    #   %q = stop here in non-session
                    #        processes
                    #   %% = '%'
                    # e.g. '<%u%%%d> '
log_lock_waits = off            # log lock waits >= deadlock_timeout
#log_statement = 'none'         # none, ddl, mod, all
#log_temp_files = -1            # log temporary files equal or larger
                    # than the specified size in kilobytes;
                    # -1 disables, 0 logs all temp files
#log_timezone = '(defaults to server environment setting)'

#------------------------------------------------------------------------------
# RUNTIME STATISTICS
#------------------------------------------------------------------------------

# - Query/Index Statistics Collector -

track_activities = on
track_counts = on
track_functions = none          # none, pl, all
track_activity_query_size = 1024    # (change requires restart)
update_process_title = on
stats_temp_directory = 'pg_stat_tmp'

# - Statistics Monitoring -

#log_parser_stats = off
#log_planner_stats = off
#log_executor_stats = off
#log_statement_stats = off

#------------------------------------------------------------------------------
# AUTOVACUUM PARAMETERS
#------------------------------------------------------------------------------

autovacuum = on         # Enable autovacuum subprocess?  'on'
                    # requires track_counts to also be on.
log_autovacuum_min_duration = -1    # -1 disables, 0 logs all actions and
                    # their durations, > 0 logs only
                    # actions running at least this number
                    # of milliseconds.
autovacuum_max_workers = 3      # max number of autovacuum subprocesses
                    # (change requires restart)
autovacuum_naptime = 1min       # time between autovacuum runs
autovacuum_vacuum_threshold = 50    # min number of row updates before
                    # vacuum
autovacuum_analyze_threshold = 50   # min number of row updates before
                    # analyze
autovacuum_vacuum_scale_factor = 0.2    # fraction of table size before vacuum
autovacuum_analyze_scale_factor = 0.1   # fraction of table size before analyze
autovacuum_freeze_max_age = 200000000   # maximum XID age before forced vacuum
                    # (change requires restart)
autovacuum_vacuum_cost_delay = 20ms # default vacuum cost delay for
                    # autovacuum, in milliseconds;
                    # -1 means use vacuum_cost_delay
autovacuum_vacuum_cost_limit = -1   # default vacuum cost limit for
                    # autovacuum, -1 means use
                    # vacuum_cost_limit

#------------------------------------------------------------------------------
# CLIENT CONNECTION DEFAULTS
#------------------------------------------------------------------------------

# - Statement Behavior -

search_path = '"$user",public'      # schema names
default_tablespace = ''     # a tablespace name, '' uses the default
temp_tablespaces = ''           # a list of tablespace names, '' uses
                    # only default tablespace
check_function_bodies = on
default_transaction_isolation = 'read committed'
default_transaction_read_only = off
default_transaction_deferrable = off
session_replication_role = 'origin'
statement_timeout = 0           # in milliseconds, 0 is disabled
vacuum_freeze_min_age = 50000000
vacuum_freeze_table_age = 150000000
bytea_output = 'hex'            # hex, escape
xmlbinary = 'base64'
xmloption = 'content'

# - Locale and Formatting -

datestyle = 'iso, mdy'
#intervalstyle = 'postgres'
#timezone = '(defaults to server environment setting)'
#timezone_abbreviations = 'Default'     # Select the set of available time zone
                    # abbreviations.  Currently, there are
                    #   Default
                    #   Australia
                    #   India
                    # You can create your own file in
                    # share/timezonesets/.
#extra_float_digits = 0         # min -15, max 3
#client_encoding = sql_ascii        # actually, defaults to database
                    # encoding

# These settings are initialized by initdb, but they can be changed.
lc_messages = 'en_US.UTF-8'         # locale for system error message
                    # strings
lc_monetary = 'en_US.UTF-8'         # locale for monetary formatting
lc_numeric = 'en_US.UTF-8'          # locale for number formatting
lc_time = 'en_US.UTF-8'             # locale for time formatting

# default configuration for text search
default_text_search_config = 'pg_catalog.english'

# - Other Defaults -

#dynamic_library_path = '$libdir'
#local_preload_libraries = ''

#------------------------------------------------------------------------------
# LOCK MANAGEMENT
#------------------------------------------------------------------------------

#deadlock_timeout = 1s
max_locks_per_transaction = 64      # min 10
                    # (change requires restart)
# Note:  Each lock table slot uses ~270 bytes of shared memory, and there are
# max_locks_per_transaction * (max_connections + max_prepared_transactions)
# lock table slots.
max_pred_locks_per_transaction = 64 # min 10
                    # (change requires restart)

#------------------------------------------------------------------------------
# VERSION/PLATFORM COMPATIBILITY
#------------------------------------------------------------------------------

# - Previous PostgreSQL Versions -

#array_nulls = on
#backslash_quote = safe_encoding    # on, off, or safe_encoding
#default_with_oids = off
#escape_string_warning = on
#lo_compat_privileges = off
#quote_all_identifiers = off
#sql_inheritance = on
#standard_conforming_strings = on
#synchronize_seqscans = on

# - Other Platforms and Clients -

#transform_null_equals = off

#------------------------------------------------------------------------------
# ERROR HANDLING
#------------------------------------------------------------------------------

exit_on_error = off             # terminate session on any error?
restart_after_crash = on            # reinitialize after backend crash?

#------------------------------------------------------------------------------
# CUSTOMIZED OPTIONS
#------------------------------------------------------------------------------

custom_variable_classes = ''        # list of custom variable class names 
```

这是 pg_hba.conf 文件：

```
local   all             postgres                                trust

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     trust
host    all             postgres             192.168.1.0/24         trust
host    all             all                  127.0.0.0/24          trust 
```

我尝试启用/禁用 autovacuum，禁用日志记录等。没用。M 系统有 8 个 CPU 和 3GB 内存，我有 1 TB 的专用空间用于这个 SQL 服务器。

任何想法和帮助表示赞赏。

注意：[此页面](https://stackoverflow.com/questions/3360184/postgres-connection-is-slow-from-php)不能解决我的问题。

**结论**：获取 PGPool-II 3.x。非常容易设置（如答案中所述）并且非常快！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:52:21.480

有趣的是，MySQL 建立连接的速度更快。在 PHP 这样的环境中，连接的建立和拆除速度非常快，而不是在 Rails 或 JVM 等应用程序环境中运行时间更长的连接。

在这种情况下，为 Postgres 使用连接池可能是有意义的。想到两个：

PGPool-II：[http ://www.pgpool.net/mediawiki/index.php/Main_Page](http://www.pgpool.net/mediawiki/index.php/Main_Page)

[PgBouncer： http](http://pgfoundry.org/projects/pgbouncer/) ://pgfoundry.org/projects/pgbouncer/

我用过 PGPool-II，它很容易设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T22:08:55.583

嗯....我不是这里的专家，但是您不想将您的 hba 绑定到 NIC 或 localhost 而不是网络吗？

在 Windows 机器上，

```
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5 
```

你有多少内存？多少虚拟内存？如果 VM 变得太大，它会减慢机器的速度。但有时你只是需要它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T21:49:40.083

我对 PostgreSQL 了解不多，但我可以告诉你为什么 MySQL 对这个特定的查询速度很快。

对于 InnoDB，主键索引是聚集索引，这意味着页面以与主键相同的物理顺序存储。

最后，当您请求时`ORDER BY DESC`，MySQL 只是反向读取索引，因此性能与 ASC 相同。

# ios - 是什么阻止子图层与父图层一起移动？

> ID：10421781
> 
> 赞同：0
> 
> 时间：2012-05-02T21:09:47.820
> 
> 标签：ios, core-animation, calayer

使用下面的代码，在需要的地方绘制 sublayer1 和 sublayer2。当动画发生时，sublayer1 按预期移动，而 sublayer2 最初向左上方移动，然后向右下方移动。（2不在1内保持在同一个地方）

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // Create a blue sublayer 
    sublayer1 = [CALayer layer];
    sublayer1.backgroundColor = [[UIColor blueColor] CGColor];
    sublayer1.frame = CGRectMake(30, 30, 120, 190);
    sublayer1.position = CGPointMake(90, 130);
    [self.view.layer addSublayer:sublayer1];

    // Create a sublayer within blue layer
    CALayer *sublayer2 = [CALayer layer];
    sublayer2.bounds = CGRectMake(0, 0, 60, 60);
    sublayer2.frame = CGRectMake(30, 50, 60, 60);
    sublayer2.contents = (id)[[UIImage imageNamed:@"sun.png"] CGImage];
    [sublayer1 addSublayer:sublayer2];

    [self performSelector:@selector(moveBlueLayer) withObject:nil afterDelay:1.0];
}

- (void)moveBlueLayer
{
    // Create a new position for animation to move to
    CGPoint endPostition = CGPointMake(190, 285);

    [CATransaction setAnimationDuration:4];
    sublayer1.bounds = CGRectMake(130, 190, 120, 190);
    sublayer1.position = endPostition;
} 
```

他们不是应该一起搬家吗？任何想法为什么他们不这样做？我现在正试图坚持“隐式”动画的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:56:36.030

从底部向上的第 3 行导致了不稳定的行为。

```
- (void)moveBlueLayer
{
   // Create a new position for animation to move to
   CGPoint endPostition = CGPointMake(190, 285);

   [CATransaction setAnimationDuration:4];
   // Next line causing the problem
   // sublayer1.bounds = CGRectMake(130, 190, 120, 190);
   sublayer1.position = endPostition;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:44:27.250

不`[sublayer1 addSublayer:flowerlayer];`应该`[sublayer1 addSublayer:sublayer2];`吗？

# mysql - 通过终端查看 MySQL 数据库使用什么存储引擎

> ID：10421782
> 
> 赞同：18
> 
> 时间：2012-05-02T21:09:48.860
> 
> 标签：mysql, terminal, storage-engines

终端中是否有用于查找我的 MySQL 数据库正在使用的存储引擎的命令？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-02T21:12:05.510

这在一些地方可用。

### 从`SHOW CREATE TABLE`输出。

```
mysql> SHOW CREATE TABLE guestbook.Guestbook;
+-----------+-------------------------------------------+
| Table     | Create Table                                                                                                                                                                   |
+-----------+-------------------------------------------+
| Guestbook | CREATE TABLE `Guestbook` (
  `NAME` varchar(128) NOT NULL DEFAULT '',
  `MESSAGE` text NOT NULL,
  `TIMESTAMP` varchar(24) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1 |
+-----------+-------------------------------------------+
1 row in set (0.00 sec) 
```

### 来自 information_schema

`information_schema.TABLES`如果您想查询多个表的引擎，您也可以在其中找到它。

```
SELECT ENGINE 
FROM information_schema.TABLES
WHERE
  TABLE_NAME='yourtable'
  AND TABLE_SCHEMA='yourdatabase'; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-09-05T12:22:41.510

```
SHOW ENGINES; 
```

返回您的 MySQL 数据库支持的引擎，并告诉您如果在创建时未另行指定，则哪个是默认引擎。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-02T21:15:35.657

MySQL 上的数据库可以使用多个存储引擎，因此您必须检查每个表。最简单的就是做

```
show create table yourtable; 
```

并查看 DDL 语句末尾的“引擎”行是什么。例如`engine=InnoDB`, `engine=MyISAM`, 等等...

如果要检查数据库中的所有表：

```
select TABLE_NAME, ENGINE
from information_schema.TABLES
where TABLE_SCHEMA='yourdbname' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T21:15:42.060

这是一个较长的解决方案，但如果您想了解一些关于`information_schema`

```
mysql> select table_name,engine from information_schema.tables where table_name
= 'table_name' and table_schema = 'db_name'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T21:15:58.003

你可以使用这个命令：

```
mysql -u[user] -p -D[database] -e "show table status\G"| egrep "(Index|Data)_length" | awk 'BEGIN { rsum = 0 } { rsum += $2 } END { print rsum }' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-29T10:55:41.103

显示表状态名称 = 'user_tbl'

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-01T09:31:40.280

```
mysql -u[user] -p -D[database] -e "show table status\G" | egrep "(Engine|Name)" 
```

This will list all the tables and their corresponding engine. Good to get an overview of everything!

It's a modified answer from @yago-riveiro where he showed how to get the size of the tables, rather than the engines in use. Also, it's better to have an explanation on what a command does.

# meteor - t() 就像在 drupal 中一样

> ID：10421786
> 
> 赞同：0
> 
> 时间：2012-05-02T21:10:20.263
> 
> 标签：meteor

t() 在 drupal 中是一个非常有用的功能，但我不知道如何在流星中做到这一点。

问题是模板解析功能在客户端运行，但您不希望能够在那里触发插入。

你怎么能解决这个问题？

t()：[http ://api.drupal.org/api/drupal/includes%21bootstrap.inc/function/t/7](http://api.drupal.org/api/drupal/includes%21bootstrap.inc/function/t/7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:22:42.763

正如我发给你的：

```
 https://gist.github.com/2579561 
```

但是，要检测客户端您尚未翻译的字符串，您必须打开写入客户端，如您所说，即使通过使用 Meteor.call() 之类的复杂过程也是如此。但是，如果它只是一个管理表并且没有任何功能，这将不是问题，您甚至可以列出调用的模板并验证标签是否也存在。

您可以使用其他机制来执行此操作，读取服务器上的模板代码可能是其中之一。我很确定在服务器上安装把手并不难做到这一点，并且在服务器上具有类似的翻译功能，以查找您没有的语言中丢失的标签。

除此之外，最终您将拥有某种形式的服务器端渲染过程，但目前它不存在内置。所以我个人会选择通过 Meteor.calls 写入客户端并过滤掉垃圾邮件（在时间范围内我认为不会发生）然后在可以/如果它成为问题时转移到服务器端方法（好像它只是管理员的界面集合，它只是垃圾邮件中的管理员开销，实际上并不是安全风险） .

# node.js - 从浏览器插件/扩展控制 Arduino 设备

> ID：10421787
> 
> 赞同：4
> 
> 时间：2012-05-02T21:10:22.807
> 
> 标签：node.js, browser, google-chrome-extension, firefox-addon, arduino

我想创建一个可以用来控制 Arduino 设备的浏览器插件或扩展。Arduino 设备将通过 USB 连接到用户的计算机。用户将访问插件将识别的网站并下载将用于在本地控制设备的指令。

偏好是用户只需要安装浏览器插件，而不必在他们的机器上安装任何单独的软件。

将浏览器连接到 Arduino 设备的好方法是什么。我希望有一个适用于任何浏览器的解决方案。

一种想法是使用 node.js（或其他网络服务器）与 Arduino 设备通信，但这意味着我必须安装 node.js 服务器和浏览器插件。我找不到有关如何执行此操作的任何信息。我愿意考虑任何语言/框架。

更新：我使用的 Arduino 设备是 Teensy 2.0 USB 板（http://www.pjrc.com/store/teensy_pins.html）。我们选择这个设备的原因是没有 COM/Serial 转换，因此它提供了完整的 USB 2.0 吞吐量。较小的设备也更适合我们正在构建的设备的外形尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:16:01.357

如果您只想坚持只需要一个浏览器插件并且只需要将设备插入主机 USB 端口，那么使用 Java 是一种解决方案。

Java 小程序需要签名，但使用自签名证书应该没问题。在 Java 小程序的上下文中，这已在 SO 上被多次询问，这应该可以帮助您入门：

1.  [签名的小程序](https://stackoverflow.com/questions/5694337/do-signed-java-applets-have-access-to-usb-peripherals-when-run-in-the-browser-sa)
2.  [java USB 库](https://stackoverflow.com/questions/862880/java-usb-library)

请注意，使用 Java 浏览器插件存在许多问题，用户需要接受插件安全提示才能“信任”您的小程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:20:57.363

Arduino 编程语言基于 Wiring 编程语言，这里有一个关于使用闪存与电路板通信的教程：[http ://wiring.org.co/learning/tutorials/flash/index.html](http://wiring.org.co/learning/tutorials/flash/index.html)

（注意：它确实使用了服务器/代理的可执行文件）。

# ruby-on-rails - Rails：在多对多关系中，如何访问模型实例的创建者

> ID：10421789
> 
> 赞同：1
> 
> 时间：2012-05-02T21:10:37.330
> 
> 标签：ruby-on-rails, constructor, many-to-many

假设我有模型用户和图片。

我可以创建与某个用户相关的图片：

```
picture = user.pictures.create 
```

有什么方法可以在创建特定图片时访问用户实例？

例如。`picture.author.should == user.name`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:26:49.613

如果您的关系设置正确，即

```
class User
  has_many :pictures
end
class Picture
  belongs_to :user
end 
```

你应该能够拥有

```
picture.user.name.should eq user.name 
```

# c# - 等待 GET 响应

> ID：10421791
> 
> 赞同：0
> 
> 时间：2012-05-02T21:10:41.920
> 
> 标签：c#, proxy, httpwebrequest, proxies

我遇到了一个问题，我的代码在 `HttpWebResponse response = (HttpWebResponse)request.GetResponse();` 我做错了什么？有时我会从队列中得到错误的代理，所以我希望能够超时并跳过。

```
 Boolean match = false;
        String clean = String.Empty;
        String msbuff;
        IWebProxy insideProxy;
        try
        {
            //grab proxies based on queue
            String proxyQueItem = Proxy_Que(_rankingConnectionString);
            insideProxy = new WebProxy(proxyQueItem);

            HttpWebRequest request = (HttpWebRequest) WebRequest.Create(ResultURL);
            request.Proxy = insideProxy;
            request.Timeout = 15*1000;

            using (HttpWebResponse response = (HttpWebResponse) request.GetResponse())
            {
                if (response.StatusCode == HttpStatusCode.OK)
                {
                    Stream streamResponse = response.GetResponseStream();
                    StreamReader streamRead = new StreamReader(streamResponse);
                    msbuff = streamRead.ReadToEnd();
                    //get rid of , -, (, )
                    msbuff = msbuff.Replace(" ", String.Empty).Replace(" ", String.Empty);
                    msbuff = msbuff.Replace("-", String.Empty);
                    msbuff = msbuff.Replace("(", String.Empty);
                    msbuff = msbuff.Replace(")", String.Empty);
                    //attempt to find phone number
                    match = msbuff.Contains(Listing.PhoneNumber);
                    streamRead.Close();
                }

            }
        }
        catch (Exception lk)
        { } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T12:11:52.333

我遇到了同样的问题。问题在于您的超时代码。你有：

```
request.Timeout = 15*1000; 
```

你需要：

```
request.Timeout = 15*1000;
request.ReadWriteTimeout = 15*1000; 
```

.Timeout 属性用于发送超时。但是，在发送请求并开始读取之后，请求会出现整体超时。它是通过 ReadWriteTimeout 属性设置的。

ReadWriteTimeout 的默认值为 5 分钟，这就是您看到您所看到的行为的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:20:46.640

由于您指定了 15 秒的超时时间，因此我假设您等待的时间超过了 15 秒。代码延迟的原因可能是它正在等待连接可用。等待连接所花费的时间与您的请求超时无关。

我相信默认情况下，.NET 只允许两个同时连接到“端点”（IP 地址）。这可以通过您的应用程序/网络配置进行配置：

```
<system.net>
  <connectionManagement>
    <add address="www.example.com" maxconnection="10"/>
  </connectionManagement>
</system.net> 
```

但是，这可能无法解决问题，因为您正在与之通信的*服务器可能只允许每个客户端的有限数量的连接。*您的代理人也可能参与其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:02:48.677

我之前遇到过这个问题，对超时设置的简单更改就解决了它。这是 VB.NET 而不是 C#，但您应该能够弄清楚。首先，指定第二个可以线程化的超时方法：

```
Private Sub TimeoutCallback(ByVal state As Object, ByVal timedOut As Boolean)
        If timedOut Then
            Dim request As Net.HttpWebRequest = state
            If Not (request Is Nothing) Then
                request.Abort()
            End If
        End If
    End Sub 
```

然后，当您构建请求并回读时，您可以设置如下内容：

```
Try
            Dim myHttpWebRequest1 As Net.HttpWebRequest
            ' Create a new HttpWebrequest object to the desired URL.
            myHttpWebRequest1 = CType(WebRequest.Create(String.Format("http://{0}:{1}", inURL, inPORT)), Net.HttpWebRequest)

            ' Create an instance of the RequestState and assign the previous myHttpWebRequest1
            ' object to it's request field.  
            Dim myRequestState As New RequestState()
            myRequestState.request = myHttpWebRequest1
            ' Start the Asynchronous request.
            allDone.Reset()
            Dim result As IAsyncResult = CType(myHttpWebRequest1.BeginGetResponse(AddressOf RespCallback, myRequestState),  _
                                               IAsyncResult)
            ThreadPool.RegisterWaitForSingleObject(result.AsyncWaitHandle, _
                                                   New WaitOrTimerCallback(AddressOf TimeoutCallback), _
                                                   myHttpWebRequest1, DefaultTimeout, True)
            allDone.WaitOne() 
```

请注意 TheadPool 行（倒数第二行），它将在单独的线程上提交您的超时方法，因此即使您的其他请求由于无效的 IP 地址或主机而挂起，它也可以取消请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T00:58:06.693

如果您有一个代理队列，并且您只需要超时并在它不好的情况下跳到下一个，那么您可以循环直到您得到响应，捕获错误并每次从队列中取出一个新代理。像这样的东西...

```
private string requestByProxy(string url)
{
    string responseString, proxyAddress;

    while (responseString == null)
    {
        try
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            // set properties, headers, etc

            proxyAddress = getNextProxy();

            if (proxyAddress == null)
                throw new Exception("No more proxies");

            request.Proxy = new WebProxy(proxyAddress);
            request.Timeout = 15 * 1000;

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            StreamReader sr = new StreamReader(response.GetResponseStream());
            responseString = sr.ReadToEnd();
        }
        catch (WebException wex)
        {
            continue;
        }
    }

    return responseString;
} 
```

# java - ant构建文件中的番石榴

> ID：10421793
> 
> 赞同：0
> 
> 时间：2012-05-02T21:10:45.987
> 
> 标签：java, ant, classpath, guava, build.xml

我正在使用 Google 的 Guava 库，特别是类集。我曾尝试使用 Ant 构建我的程序，但它失败了。来自 javac 的错误是

> 找不到符号 [javac] 符号：变量集。

Guava 在类路径中。在这里我附上我的 build.xml

```
<project name="projekt" basedir="." default="">

    <property name="product.name"    value="Petrinet editor"/>
    <property name="product.version" value="1.0"/>
    <property name="build"           value="build"/>
    <property name="java.encoding"   value="utf8" />

    <path id="build.classpath"> 
        <pathelement location="bin"/>
        <pathelement location="lib/guava-11.0.2.jar"/>
        <pathelement location="lib/jgraphx.jar"/>
    </path>

<!-- ===================== Project Environment =========================== -->

    <property name="source.home"    value="${basedir}/src"/>
    <property name="example.home"   value="${basedir}/examples"/>

<!-- ==================== Target: clean ==================== -->

    <target name="clean">
        <delete dir="build"/>
        <delete dir="dest-client"/>
        <delete dir="dest-server"/>
        <delete dir="doc"/>
    </target> 

<!-- ==================== Target: compile ==================== -->

    <target name="compile">
        <mkdir dir="build"/>
        <mkdir dir="build/client"/>
        <mkdir dir="dest-client"/>

        <javac srcdir="src" encoding="${java.encoding}" destdir="build/client" includeantruntime="false">
            <exclude name="**/server/*"/>
            <classpath refid="build.classpath" />
        </javac>
        <copy todir="dest-client/lib">
            <fileset dir="lib"/>
        </copy>

        <jar basedir="build/client" destfile="dest-client/ija2012-client.jar">
            <manifest>
                <attribute name="Main-Class" value="main.Client"/>
            </manifest>
        </jar>

        <mkdir dir="build/server"/>
        <mkdir dir="dest-server"/>

        <javac srcdir="src" destdir="build/server" includeantruntime="false">
            <exclude name="**/main/*"/>
            <exclude name="**/filter/*"/>
        </javac>
        <copy todir="dest-server/lib"><fileset dir="lib"/></copy>

        <jar basedir="build/server" destfile="dest-server/ija2012-server.jar">
            <manifest>
                <attribute name="Main-Class" value="server.Server"/>
            </manifest>
        </jar>

        <mkdir dir="doc"/>
        <javadoc sourcepath="src" destdir="doc" author="true" version="true" use="true" windowtitle="Sitovy editor Petriho siti">
        <doctitle><![CDATA[<h1>Síťový editor Petriho sítí</h1>]]></doctitle>
            <bottom><![CDATA[Síťový editor Petriho sítí (c) 2012 xbabic06, xbabic07]]></bottom>
        </javadoc>
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:51:44.443

构建客户端或服务端时是否会出现编译失败？您在客户端而不是服务器的类路径中包含番石榴。

# class - 数据源出口

> ID：10421802
> 
> 赞同：2
> 
> 时间：2012-05-02T21:11:41.053
> 
> 标签：class, uitableview, datasource, outlet

我想知道如何在 UITableView 类上使用 outlet、dataSource。我被卡住了，因为我无法查看表格上的任何数据。有谁知道怎么做？我看过其他网站，但他们的提示不起作用。我尝试使用界面构建器应用程序将数据源添加到 UITableView 类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:20:23.337

UITableView的`dataSource`属性是您分配给 tableView 的委托......然后 tableView 在收集数据时调用该分配的类。为了让数据显示在 tableView 上，您需要实现 UITableViewDataSource 委托方法...

一个好的起点是查看 UITableView 类参考：

[http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html) - UITableView 类参考

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html) - UITableViewDelegate 协议类参考

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html) - UITableViewDataSource 协议类参考

另外，看看这个示例代码：

[http://developer.apple.com/library/ios/ipad/#samplecode/TableViewSuite/Introduction/Intro.html](http://developer.apple.com/library/ios/ipad/#samplecode/TableViewSuite/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:24:47.900

UITableViewDataSource 和 UITableViewDelegate 通常设置在 ViewController 上。如果您在 UIViewController 中使用 UITableView，则需要在接口文件 (*.h) 中实现委托和数据源

```
@interface YourViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> 
```

一旦你声明了委托，你就可以实现 3 种方法来使 tableview 工作

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

# objective-c - 比较具有不同顺序的字符串

> ID：10421805
> 
> 赞同：0
> 
> 时间：2012-05-02T21:11:51.463
> 
> 标签：objective-c, ios

我有一个比较字符串的 if 语句，但我想比较具有相同单词但顺序不同的字符串并将其返回为 true。

字符串 1 a,b,c

字符串 2 b,c,a

如何比较它们并让 if 语句将其视为相同的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:21:36.443

使用 componentsSeperatedByString 分隔字符串：使用任何字符串分隔单词（逗号、空格）并将结果放入 NSSet。对两个字符串执行此操作并比较集合是否相等。

使用 mutableArray 而不是 Set 的修改方法来考虑重复字符串的问题（如注释中所述）：

```
-(BOOL) string: (NSString*) string1 isEqualTo: (NSString*) string2 {
  if (string1.length != string2.length) return NO;
  if ([string1 isEqualToString: string2]) return YES;

  NSMutableArray *array1 = [NSMutableArray arrayWithArray: [string1 componentsSeperatedByString: @","]];
  NSMutableArray *array2 = [NSMutableArray arrayWithArray: [string2 componentsSeperatedByString: @","]];

  [array1 sortUsingSelector: @selector(compare:)];
  [array2 sortUsingSelector: @selector(compare:)];

  return [array1 isEqualToArray: array2];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:28:01.410

将每个字符串拆分为单词数组。对数组进行排序。然后比较数组中的每个单词。

```
 NSString *string1 = @"This is a test";
    NSString *string2 = @"test a is This";
    NSArray *wordsOne = [string1 componentsSeparatedByString:@" "];
    NSArray *wordsTwo = [string2 componentsSeparatedByString:@" "];

    NSMutableArray *wordsOneCopy = [NSMutableArray arrayWithArray:wordsOne];
    NSMutableArray *wordsTwoCopy = [NSMutableArray arrayWithArray:wordsTwo];

    [wordsOneCopy removeObjectsInArray:wordsTwo];
    [wordsTwoCopy removeObjectsInArray:wordsOne];

    if (wordsOneCopy.count == 0 && wordsTwoCopy.count == 0) // the strings contained the same words, perhaps different order 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:28:29.407

如果您的字符串始终采用逗号分隔格式，请尝试编写一个返回方法，将`BOOL`字符串分开然后比较内容。（编写这种肮脏的 ARC 风格）。

```
-(BOOL)compareWordsInString:(NSString*)stringA withString:(NSString*)stringB
{
    NSArray *arrayA = [stringA componentsSeparatedByString:@","];
    NSArray *arrayB = [stringB componentsSeparatedByString:@","];
    NSSet *setA = [[NSSet alloc] initWithArray:arrayA];
    NSSet *setB = [[NSSet alloc] initWithArray:arrayB];

    return [setA isEqualToSet:setB];
} 
```

然后你可以在你的`if`：

```
if([self compareWordsInString:@"a,b,c" withString:@"b,c,a"])
{
    // do work
} 
```

**请注意**，如果单词的数量必须完全匹配并且在第二个字符串中只有一个对应的匹配项，那么这将无法正常工作，因为`NSSet`在比较时将评估为 YES `@"a,a,b,b,c,c,c"`，`@"a,b,c"`因为每个对象只会被添加到集合中一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T21:30:49.927

您可以做的是将字符串组件（单词）转换为数组，对数组进行排序并进行比较。这样，您将只比较单词，而不是顺序。

这是一个例子：

```
NSMutableArray *array1 = [NSMutableArray arrayWithArray:[string1 componentsSeparatedByString:@","]];
NSMutableArray *array2 = [NSMutableArray arrayWithArray:[string2 componentsSeparatedByString:@","]];

NSComparator comparator = ^(NSString *s1, NSString *s2) {
    return [s1 compare:s2];
};

[array1 sortUsingComparator:comparator];
[array2 sortUsingComparator:comparator];

if ([array1 isEqualToArray:array2])
{
    //do work
} 
```

该`[array1 isEqualToArray:array2]`调用将告诉您字符串是否相似。

**编辑**

为了回应@deanWombourne 的评论，我将涉及`NSSet`s 的原始代码更改为上述代码，因此感谢@deanWombourne 的正确和有用的评论。（感谢@Kai 打电话给我进行糟糕的编辑。不会再发生了。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T08:03:18.993

不排序：

```
-(BOOL)isSameWordsInString:(NSString *)string1 andString:(NSString *)string2
{
  if(string1.length != string2.length)
  {
    return NO;
  }
  if([string1 isEqualToString:string2])
  {
    return YES;
  }
  NSMutableArray *array1 = [NSMutableArray arrayWithArray:[string1 componentsSeparatedByString:@" "]];
  NSMutableArray *array2 = [NSMutableArray arrayWithArray:[string2 componentsSeparatedByString:@" "]];
  if(array1.count != array2.count)
  {
    return NO;
  }
  for(NSString *word in array1)
  {
    if(![array2 containsObject:word])
    {
      return NO;
    }
    //EDIT on comment by deanWombourne
    [array2 removeObject:word];
    //END EDIT
  }
  return YES;
} 
```

# oracle - 关于 Oracle 并行插入性能

> ID：10421806
> 
> 赞同：9
> 
> 时间：2012-05-02T21:11:53.580
> 
> 标签：oracle, oracle10g, oracle11g

我有一个这样的sql：

```
Insert into A
Select * from B; 
```

现在我希望它并行运行。我的问题是并行化插入或选择或两者兼而有之？看到下面的sql，你能告诉我哪个是正确的或者哪个性能最好。我没有 dba 权限，所以无法查看它的执行计划。

1) `Insert /*+ parallel(A 6) */ into A select * from B;`

2) `Insert into A select/*+ parallel(B 6) */ * from B;`

3) `Insert /*+ parallel(A 6) */ into A select /*+ parallel(B 6) */ * from B;`

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T04:01:04.047

并行化 the`INSERT`和 the`SELECT`是最快的。

（如果你有足够多的数据，你有一个不错的服务器，一切都配置得很好，等等）

您肯定会想要自己测试它，尤其是要找到最佳的并行度。围绕 Oracle 并行执行有很多神话，甚至手册有时也[大错特错](https://stackoverflow.com/a/9731552/409172)。

在 11gR2 上，我建议您像这样运行您的语句：

```
alter session enable parallel dml;
insert /*+ append parallel(6) */ into A select * from B; 
```

1.  您总是希望首先启用并行 dml。
2.  `parallel(6)`使用[语句级并行](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#BABHFDDH)，而不是对象级并行。这是 11gR2 的一项功能，可让您轻松并行运行所有内容，而无需担心对象别名或访问方法。对于 10G，您将不得不使用多个提示。
3.  通常`append`不需要提示。如果您的 DML 并行运行，它将自动使用直接路径插入。但是，如果您的语句被降级为串行语句，例如如果没有可用的并行服务器，那么`append`提示可能会产生很大的不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:45:27.970

您不需要 DBA 特权来运行解释计划。我相信 SELECT_CATALOG 是正确的特权。

# mysql - 如何限制 SQL 中每个字段值的行数？

> ID：10421807
> 
> 赞同：11
> 
> 时间：2012-05-02T21:12:00.573
> 
> 标签：mysql, sql, greatest-n-per-group, hive

例如，我在 Hive 中有一个这样的表：

```
1 1
1 4
1 8
2 1
2 5
3 1
3 2 
```

我只想返回第一列的每个唯一值的前两行。我希望这能够限制我从 Hive 传输到 MySQL 以用于报告目的的数据量。我想要一个 HiveQL 查询，它给了我这个：

```
1 1
1 4
2 1
2 5
3 1
3 2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T21:36:40.177

不幸的是 mysql 没有分析功能。所以你必须玩变量。假设您有一个自动增量字段：

```
mysql> create table mytab (
    -> id int not null auto_increment primary key,
    -> first_column int,
    -> second_column int
    -> ) engine = myisam;
Query OK, 0 rows affected (0.05 sec)

mysql> insert into mytab (first_column,second_column)
    -> values
    -> (1,1),(1,4),(2,10),(3,4),(1,4),(2,5),(1,6);
Query OK, 7 rows affected (0.00 sec)
Records: 7  Duplicates: 0  Warnings: 0

mysql> select * from mytab order by id;
+----+--------------+---------------+
| id | first_column | second_column |
+----+--------------+---------------+
|  1 |            1 |             1 |
|  2 |            1 |             4 |
|  3 |            2 |            10 |
|  4 |            3 |             4 |
|  5 |            1 |             4 |
|  6 |            2 |             5 |
|  7 |            1 |             6 |
+----+--------------+---------------+
7 rows in set (0.00 sec)

mysql> select
    -> id,
    -> first_column,
    -> second_column,
    -> row_num
    -> from (
    -> select *,
    -> @num := if(@first_column = first_column, @num:= @num + 1, 1) as row_num,
    -> @first_column:=first_column as c
    -> from mytab order by first_column,id) as t,(select @first_column:='',@num:
=0) as r;
+----+--------------+---------------+---------+
| id | first_column | second_column | row_num |
+----+--------------+---------------+---------+
|  1 |            1 |             1 |       1 |
|  2 |            1 |             4 |       2 |
|  5 |            1 |             4 |       3 |
|  7 |            1 |             6 |       4 |
|  3 |            2 |            10 |       1 |
|  6 |            2 |             5 |       2 |
|  4 |            3 |             4 |       1 |
+----+--------------+---------------+---------+
7 rows in set (0.00 sec)

mysql> select
    -> id,
    -> first_column,
    -> second_column,
    -> row_num
    -> from (
    -> select *,
    -> @num := if(@first_column = first_column, @num:= @num + 1, 1) as row_num,
    -> @first_column:=first_column as c
    -> from mytab order by first_column,id) as t,(select @first_column:='',@num:
=0) as r
    -> having row_num<=2;
+----+--------------+---------------+---------+
| id | first_column | second_column | row_num |
+----+--------------+---------------+---------+
|  1 |            1 |             1 |       1 |
|  2 |            1 |             4 |       2 |
|  3 |            2 |            10 |       1 |
|  6 |            2 |             5 |       2 |
|  4 |            3 |             4 |       1 |
+----+--------------+---------------+---------+
5 rows in set (0.02 sec) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-16T16:10:53.467

Hive 解决方案是

```
SELECT S.col1, S.col2
FROM
 (SELECT col1, col2, row_number() over (partition by col1) as r FROM mytable) S
WHERE S.r < 3 
```

# dependencies - Websphere 7 类加载委托

> ID：10421812
> 
> 赞同：0
> 
> 时间：2012-05-02T21:12:16.100
> 
> 标签：dependencies, websphere, axis2, classloader

您好我正在尝试使axis2在Websphere 7上工作，我在apache轴站点中进行了建议的配置（更改axis2.xml“EnableChildFirstClassLoading”参数并将类加载器从“PARENT_FIST”更改为“PARENT_LAST”用于包含的webmodule轴2)

然而，在同一个 EAR 中有另一个带有 JSP 和 struts 的 Web 应用程序，在更改类加载器后停止工作（由于 jar 库版本问题），我的 deployment.xml 看起来类似于：

```
<?xml version="1.0" encoding="UTF-8"?>
<appdeployment:Deployment xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:appdeployment="http://www.ibm.com/websphere/appserver/schemas/5.0/appdeployment.xmi" xmi:id="Deployment_1335990730424">
<deployedObject xmi:type="appdeployment:ApplicationDeployment" xmi:id="ApplicationDeployment_1335990730424" startingWeight="10">
<modules xmi:type="appdeployment:WebModuleDeployment" xmi:id="WebModuleDeployment_1335990730424" startingWeight="10000" uri="StrutsWeb.war"/>
<modules xmi:type="appdeployment:WebModuleDeployment" xmi:id="WebModuleDeployment_1335990730425" startingWeight="10000" uri="Axis2Web.war" classloaderMode="PARENT_LAST"/>
<classloader xmi:id="Classloader_1335990730424" mode="PARENT_FIRST"/>
</deployedObject>
</appdeployment:Deployment> 
```

一旦我从axis2 web模块中删除“PARENT_LAST”，struts模块开始工作，使用“PARENT_LAST”，web服务可以完美运行，但struts web模块不能。似乎类加载器模式更改正在影响两个 Web 模块。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:15:18.430

在 WebSphere Application Server（与几乎所有应用程序服务器一样）中，有一个类加载器层次结构：

```
Application server class loaders
|   Includes WAS_HOME/plugins, WAS_HOME/lib, etc.
|
+-- Application class loader
    |   Includes files in lib/ folder of the .ear
    |   Includes all JARs referenced from Class-Path in all .war
    |
    +-- StrutsWeb.war class loader
    |      Includes WEB-INF/classes and all JARs in WEB-INF/lib
    |
    +-- Axis2Web.war
           Includes WEB-INF/classes and all JARs in WEB-INF/lib 
```

配置片段中的`<classloader>`元素嵌套在 中`ApplicationDeployment`，因此它对应于应用程序类加载器。您可能不想修改此元素，您可能想修改各个 WAR 模块的委托模式。但是，如果更改此设置有效果，那么您可能在应用程序类加载器类路径上有 JAR，它实际上应该位于 WAR 模块的 WEB-INF/lib 中。

# sql - 如果值在同一列中重复，如何比较？

> ID：10421815
> 
> 赞同：-2
> 
> 时间：2012-05-02T21:12:40.107
> 
> 标签：sql, sql-server

我有两列这样的：

```
ChannelURI    UserId
1020            1
1040            2
1060            3
1020            5
1090            4
1020            5 
```

现在我想检查任何先前的行条目是否具有最后一行的最后一个值，如果是并且它具有相同的用户 ID 然后跳过，如果找到（匹配）并且具有不同的用户 ID 然后在 ChannelUri 中插入 null

在这种情况下`user ID =1`应该将其`channeluri`设置为`null`

知道如何实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:19:57.493

SQL 将数据视为无序集。除非您指定 ORDER BY，否则行可以按任何顺序合法地返回。

除非您还有另一个字段可以用来对数据进行排序，否则“先前的记录”实际上可能几乎是任何内容。

您*可以*只选择所有数据并在 PHP 或 .Net 中对其进行解析，对吗？ ***没有。***

仅仅因为数据*通常*以相同的顺序返回，所以*永远无法*保证。数据的变化、磁盘上数据的碎片化、索引、并行性等诸多因素，意味着数据随时可能以不同的顺序返回。

如果您的逻辑依赖于数据的顺序，您*必须*指定一个 ORDER BY 子句，因此，隐含地，数据中必须具有使您能够对其进行排序的字段。

对不起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:27:34.047

假设您有一个`'Sort'`用于对行进行排序的列，则以下语句可以解决问题：

```
UPDATE m
SET ChannelURI = NULL
FROM mytable m
JOIN mytable m2 
  ON m.ChannelURI = m2.ChannelURI
  AND m.UserId != m2.UserId
  AND m2.Sort = (SELECT MAX(sort) FROM mytable) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:16:24.227

[基本上，这采用与@erikxiv 的答案](https://stackoverflow.com/a/10421988/297408)相同的想法，但用于`SELECT TOP (1)`检索最后一行，而不是过滤`MAX(sort)`：

```
UPDATE m
SET ChannelURI = NULL
FROM mytable m
JOIN (
  SELECT TOP (1) ChannelURI, UserId
  FROM mytable
  ORDER BY sort DESC
) last
  ON m.ChannelURI = last.ChannelURI
  AND m.UserId   != last.UserId 
```

# c# - 您可以将属性网格绑定到数据源吗？

> ID：10421816
> 
> 赞同：1
> 
> 时间：2012-05-02T21:12:56.310
> 
> 标签：c#, sql, visual-studio-2010

c# 新手我想知道您是否可以将 sql 或访问数据表绑定到属性网格？我正在使用Vs2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:25:40.637

Are you restricted to using a DataTable? Or could you convert it to a generic list, then bind the Property Grid control to that?

1.  [Convert DataTable to Generic List](https://stackoverflow.com/questions/4104464/convert-datatable-to-generic-list-in-c-sharp "Convert DataTable to generic List")

2.  [Bind To Property Grid](http://www.c-sharpcorner.com/UploadFile/mgold/PropertyGridInCSharp11302005004139AM/PropertyGridInCSharp.aspx)

# crystal-reports - 子报表为空白时报表末尾水晶打印空白页

> ID：10421823
> 
> 赞同：0
> 
> 时间：2012-05-02T21:13:26.643
> 
> 标签：crystal-reports, crystal-reports-xi

我有什么是（希望如此）和快速而简单的问题。我有一份报告，其中有两个子报告。两个子报告中的第二个，当有数据时，需要在一个新页面上，这就是导致我的问题的原因。当我在新页面之前或新页面之后的公式中添加条件时，例如：'Not onlastrecord'，包含子报表的主报表部分的抑制字段中的条件公式，它不会按我需要的方式工作。子报表被选中“如果没有记录则禁止打印”并且尽可能小以防止字段溢出问题。我遇到的问题是我可以让报告抑制空白部分，但是当报告有数据时它不在新页面上，或者我可以在新页面上得到它，但我在报告末尾得到一个空白页面，上面只有一个页眉和页脚（也没有空白或未压缩的部分）。我梳理了几个论坛并尝试了几种不同的解决方案和解决方案的组合，但没有任何效果。任何能帮助我解决这个问题的人都是我的英雄！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:52:29.577

我有一个类似的问题，发现它是一个离右边太远的图形掉到了另一页上。我是通过使用 Acrobat 打印驱动程序将报告打印到 PDF，然后在 Acrobat 或 Reader 或 Adob​​e Illustrator 中打开它来找到它的。然后我在空白页上进行了全选，它在页面上显示了一个小白框，第一页的图形正在倒下。我将盒子向后移动了几毫米，空白页消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:39:40.100

不要尝试拆分主报告中的页面。

相反，有条件地设置第二个子报表的报表标题部分中的新页面之前选项，以便仅在返回至少一条记录时才为真 - 例如，使用类似`Count ({Table.Field})>0`.

您可能需要将子报表的“报表标题”部分拆分为两个子部分，以便能够设置“New Page Before”选项 - 如果是这样，请取消第一个子部分并有条件地在第二个子部分中设置“New Page Before”选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T01:40:45.590

尝试检查选项“抑制空白部分”

# python - 在没有 if 条件的情况下打印数据文件中的所有行

> ID：10421824
> 
> 赞同：1
> 
> 时间：2012-05-02T21:13:43.967
> 
> 标签：python

```
file = open("datafile1.txt", "rU")
for line in file:
    line = line.strip()
    print line
    for element in line:
         line = 2 
```

这是我到目前为止所拥有的，输出看起来像我创建的一个简单数据文件：

```
blind
element
baker
enjoy 
```

这对应于我要读取的 datafile1 中输入的内容。我正在尝试读取此 datafile1 并打印所有行，但第一行没有 if 条件。我正在考虑在 for 循环中切片 [2:]，但我不知道如何打印元素，baker，并享受“不打印第一行是盲目的”。

您能否给我一些建议，如何在不使用 if 语句的情况下仅读取和打印这些字符。我知道的唯一方法是使用 Try 和 except 来替换 if 语句并只读取文件的最后三行。任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:17:37.403

文件对象像迭代器一样工作，因此您可以`next()`让它们在实际迭代它们之前消耗一个元素（一行）。

```
file = open("datafile1.txt", "rU")
next(file, None)
for line in file:
    line = line.strip()
    print line 
```

对于小文件，您也可以将其读入列表，然后使用切片运算符：

```
with open("datafile1.txt", "rU") as f:
    lines = f.readlines() # or lines = [l.strip() for l in f]
for line in lines[1:]:
    print line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:19:46.593

你冷使用这样的东西：

```
with open("datafile1.txt") as file:
    next(file)
    for line in file:
       #do something awesome 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:21:24.860

您可以使用[linecache.getline(filename, lineno)](http://docs.python.org/library/linecache.html#linecache.getline)

# simulation - 如何暂停模拟？

> ID：10421826
> 
> 赞同：0
> 
> 时间：2012-05-02T21:13:48.787
> 
> 标签：simulation

进行概率机模拟。

需要在按下按钮时暂停模拟。

目前，我所拥有的是，如果我按“P”，我的模拟暂停绝对没问题。但是当我按下 Unpause 键时，模拟会取消暂停，但它不会从暂停状态取消暂停。

即，如果我在球位于中间时暂停机器，在取消暂停后，球从顶部重生，告诉我球在此期间已经移动到底部。

我用来实现这一点的算法是 -

```
if (UserPress == 'P')
   Pause = !Pause;

if (Pause)
{
    ball.Update;
    ReDraw();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:20:43.840

如果您在 Update() 中使用实时来执行“模拟”，即使在未暂停的情况下，自暂停以来实时已经过去，因此“球”移动了。您需要将自最后一个未暂停帧以来经过的时间与您在 ball.Update() 中使用的时间相关联。

当然，除非我在代码中看不到其他完全发生的事情。

# java - 如何配置 EclipseLink 2.0 和 Spring 3.0.5 和 Tomcat 6？

> ID：10421829
> 
> 赞同：4
> 
> 时间：2012-05-02T21:13:54.953
> 
> 标签：java, spring, tomcat, jpa, eclipselink

我的 Web 应用程序使用的是 Tomcat 6.0.18 和 Spring 3.0.5 以及 eclipselink 2.0.1 和 javax.persistence 2.0.0，SQL Server 数据库。我无法弄清楚配置，也无法找到具有此类配置的工作示例。我尝试将 loadTimeWeaver 的属性添加到 entityManagerFacotory 中，但它破坏了 Spring 3 中的 AutoWired 注释，如下面的 applicationContext.xml 所示：

```
<context:load-time-weaver/> 
```

在 appname-servlet.xml 中：

但是当我禁用 LoadTimeWeaver 时，我的应用程序可以从 JPA 代码创建数据库，但无法将数据持久保存到数据库中。

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceXmlLocation" value="classpath:persistence.xml" />
        <property name="dataSource" ref="dataSource" />         
        <property name="persistenceUnitName" value="restfulPU" />
        <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
            <property name="showSql" value="true"/>
            <property name="generateDdl" value="true"/>
            <property name="databasePlatform" value="org.eclipse.persistence.platform.database.SQLServerPlatform"/>
        </bean>
        </property>
        <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />
        </property>         
        <property name="jpaPropertyMap">
        <props>
            <prop key="eclipselink.weaving">false</prop>
        </props>
        </property>         
</bean> 

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
<tx:annotation-driven transaction-manager="transactionManager"/>
  Persistence.xml
<persistence-unit name="restfulPU" transaction-type="RESOURCE_LOCAL">
    <class>com.generalform.eclipselink.model.Todo</class>
    <properties>
        <!-- EclipseLink should create the database schema automatically -->
        <property name="eclipselink.ddl-generation" value="drop-and-create-tables" />
        <property name="eclipselink.ddl-generation.output-mode"
           value="database" />
    </properties> 
```

如果您能指出有关将 EclipseLink 集成到 Spring 3 和 Tomcat 中的指南或教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T22:14:25.680

谢谢，詹姆斯。

[遵循http://static.springsource.org/spring/docs/3.0.0.M4/reference/html/ch13s05.html](http://static.springsource.org/spring/docs/3.0.0.M4/reference/html/ch13s05.html)上的Springsource 指南，Tomcat 6 可以进行编织。指南中提到并在此处复制的步骤：

Step1.将spring-tomcat-weaver.jar复制到$CATALINA_HOME/lib中，其中$CATALINA_HOME代表Tomcat安装的根目录）

第2步。通过修改 context.xml 告诉 Tomcat 使用自定义类加载器：

```
<Context path="/myWebApp" docBase="/my/webApp/location">
    <Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"
        useSystemClassLoaderAsParent="false"/>
</Context> 
```

我没有在 $CATALINA_HOME/conf/context.xml 中指定路径和 docBase 属性

第三步。将 loadTimeWeaver 属性打开到 LocalContainerEntityManagerFactoryBean

```
<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="loadTimeWeaver">
    <bean class="org.springframework.instrument.classloading.ReflectiveLoadTimeWeaver"/>
  </property>
</bean> 
```

然后，我再次启动 Tomcat 6，启动过程变得干净。但是，数据仍然无法持久化到数据库中。错误如下：

**不允许在共享 EntityManager 上创建事务 - 改用 Spring 事务或 EJB CMT**

在这一点上，我的同事通过指出 Spring 事务处理使用 @Transactional 并且不使用实体管理器上的事务来避免上述问题来拯救了我。然后我注释掉了 em.getTransaction().begin() 和 em.getTransaction().commit()，只留下了 em.persist(todo)。todo 是这里的实体。它立即起作用。在这里，开发者应该知道 JPA 事务和 Spring 事务的区别。事实上，当 EclipseLink/JPA 与 Spring 事务管理一起工作时，这是一个令人困惑的部分。

我还尝试了 Tomcat 7，因为我认为它可能与 Tomcat 有关。其实这个问题与Tomcat版本无关。

启用 LoadTimeWeaver 后，它适用于数据持久性。这是 applicationname-servlet.xml 中 transactionManager 配置部分的工作版本：

```
 <context:property-placeholder location="classpath:generalform.properties"/>
   <context:component-scan base-package="com.generalform" />

   <tx:annotation-driven transaction-manager="transactionManager"/> 
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${mysql.database.driver}" />
    <property name="url" value="${mysql.database.url}" />
    <property name="username" value="${mysql.database.user}" />
    <property name="password" value="${mysql.database.password}" />
</bean>

<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceXmlLocation" value="classpath:persistence.xml" />
        <property name="dataSource" ref="dataSource" />         
        <property name="persistenceUnitName" value="restfulPU" />
        <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
            <property name="showSql" value="true"/>
            <property name="generateDdl" value="true"/>
            <property name="databasePlatform" value="org.eclipse.persistence.platform.database.MySQLPlatform"/>
        </bean>
        </property>
        <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />
        </property>
        <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.ReflectiveLoadTimeWeaver" />
        </property>         

</bean> 

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="emf" />
</bean> 
```

下面是我的 Dao 类，形式上，try/catch 应该包裹在方法内部的代码中：

```
@Repository("todoDao")
public class TodoDao {  

    @PersistenceContext
    private EntityManager em;

    public void saveTodo(Todo todo) {

        System.out.println("TodoDao:saveTodo into DB >>>");
        //em.getTransaction().begin();
        em.persist(todo);
        //em.getTransaction().commit();
        em.close();
        System.out.println("TodoDao: complete saveTodo into DB close()>>>");
    }   

} 
```

TodoService 类用@Transactional 注解声明Spring Transaction，启用LoadTimeWeaver 后@Autowired 也起作用：

```
@Service("todoService")
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class TodoService {
    @Autowired
    private TodoDao todoDao;

    public TodoService() {
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    public void saveTodo(Todo todo) {
        System.out.println("TodoService -> saveTodo is called!");
        todoDao.saveTodo(todo);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:12:59.597

当您尝试坚持时，您会遇到什么错误？

LoadTimeWeaver 应该可以工作，但这不是必需的。您可以改用静态编织。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-05T09:28:40.383

作为@jisun回复的另一种方式。我通过注解配置并删除了更多属性，例如用户名，密码，驱动程序等。因为所有这些参数都可以在persistence.xml中定义：

```
package com.company.config;

import javax.annotation.Resource;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;
import org.springframework.transaction.annotation.EnableTransactionManagement;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;
import org.springframework.core.env.Environment;
import org.springframework.instrument.classloading.ReflectiveLoadTimeWeaver;
import org.springframework.orm.jpa.JpaTransactionManager;

@Configuration
@ComponentScan(basePackages = "com.company")
@EnableTransactionManagement
@EnableWebMvc
public class MvcConfiguration extends WebMvcConfigurerAdapter {

    @Resource
    private Environment env;

    @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {
        LocalContainerEntityManagerFactoryBean emf = new LocalContainerEntityManagerFactoryBean();
        emf.setPersistenceXmlLocation("classpath:persistence.xml");
        emf.setLoadTimeWeaver(new ReflectiveLoadTimeWeaver());
        return emf;
    }

    @Bean
    public JpaTransactionManager transactionManager() {
        return new JpaTransactionManager(entityManagerFactory().getObject());
    }

} 
```

# ravendb - RavenDb 实体命名

> ID：10421839
> 
> 赞同：0
> 
> 时间：2012-05-02T21:15:04.260
> 
> 标签：ravendb

我正在使用 RavenDB，并使用 ID：“Posts/[GUID]”（其中 [GUID] 是 guid）保存我的文档（来自名为“FeedPost”的 C# 类）。

Raven DB 创建一个文档，并将其实体名称设置为“FeedPosts”。好的。为什么，当我进入 Raven Studio 并修改文档时，该文档的实体名称从“FeedPosts”更改为“Posts”？

我相信它正在查看文档的 ID，但我没有要求它更改实体名称 - 为什么它只是选择这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:19:33.870

亚当，不应该那样做，我们在不稳定的版本中有一个错误会做类似的事情，但它已被修复并且从未在稳定版本中。

你用的是什么版本？

# c++ - 如何使用 boost::spirit 将单词序列解析为向量？

> ID：10421841
> 
> 赞同：7
> 
> 时间：2012-05-02T21:15:09.283
> 
> 标签：c++, parsing, boost, boost-spirit, boost-spirit-qi

我正在努力学习`boost::spirit`。例如，我正在尝试将一系列单词解析为`vector<string>`. 我试过这个：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/foreach.hpp>

namespace qi = boost::spirit::qi;

int main() {

  std::vector<std::string> words;
  std::string input = "this is a test";

  bool result = qi::phrase_parse(
      input.begin(), input.end(),
      +(+qi::char_),
      qi::space,
      words);

  BOOST_FOREACH(std::string str, words) {
    std::cout << "'" << str << "'" << std::endl;
  }
} 
```

这给了我这个输出：

```
'thisisatest' 
```

但我想要以下输出，其中每个单词都单独匹配：

```
'this'
'is'
'a'
'test' 
```

如果可能的话，我想避免`qi::grammar`为这个简单的案例定义我自己的子类。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T21:28:04.747

您从根本上误解了（或至少滥用）跳过解析器的目的 -`qi::space`用作跳过解析器，是为了使您的解析器空白不可知，因此`a b`和之间没有区别`ab`。

在您的情况下，空格*很*重要，因为您希望它来分隔单词。因此，您不应该跳过空格，并且要使用`qi::parse`而不是`qi::phrase_parse`：

```
#include <vector>
#include <string>
#include <iostream>
#include <boost/foreach.hpp>
#include <boost/spirit/include/qi.hpp>

int main()
{
    namespace qi = boost::spirit::qi;

    std::string const input = "this is a test";

    std::vector<std::string> words;
    bool const result = qi::parse(
        input.begin(), input.end(),
        +qi::alnum % +qi::space,
        words
    );

    BOOST_FOREACH(std::string const& str, words)
    {
        std::cout << '\'' << str << "'\n";
    }
} 
```

（现在更新了 G. Civardi 的修复程序。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T21:31:23.723

我相信这是最小的版本。qi::omit 应用于 qi 列表解析器分隔符不是必需的 - 它不会生成任何输出属性。详情见： http: [//www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/operator/list.html](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/operator/list.html)

```
#include <string>
#include <iostream>
#include <boost/foreach.hpp>
#include <boost/spirit/include/qi.hpp>

int main()
{
  namespace qi = boost::spirit::qi;

  std::string const input = "this is a test";

  std::vector<std::string> words;
  bool const result = qi::parse(
      input.begin(), input.end(),
      +qi::alnum % +qi::space,
      words
  );

  BOOST_FOREACH(std::string const& str, words)
  {
      std::cout << '\'' << str << "'\n";
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-12T04:38:59.330

以防万一其他人遇到我的领先空间问题。

我一直在使用 ildjarn 的解决方案，直到遇到一个以空格开头的字符串。

```
std::string const input = " this is a test"; 
```

我花了一段时间才弄清楚前导空格导致函数 qi::parse(...) 失败。解决方案是在调用 qi::parse() 之前修剪输入前导空格。

# vba - 使用 VBA 将十进制数转换为分钟和秒

> ID：10421849
> 
> 赞同：3
> 
> 时间：2012-05-02T21:15:56.227
> 
> 标签：vba, time, decimal, seconds

我有一个十进制数字表示的时间，我需要使用 VBA 在 Excel 中将其转换为分钟和秒。

示例：小数点前的数字给出分钟为 0.197683577（0 分钟），数字乘以 60 给出秒 = 0.197683577*60 = 11.86101462（12 秒）= 0:12

我知道我可以通过复制并粘贴成文本格式并使用文本将数字分隔到小数点的列左右，然后在其间添加“：”来做到这一点，但必须有一种计算方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:24:21.143

```
Public Function FromDecimalTime(ByVal t As Double) As Date
  FromDecimalTime = TimeSerial(0, Fix(t), (t - Fix(t)) * 60)
End Function 
```

与公式相同：

```
=TIME(0,TRUNC(A1),(A1-TRUNC(A1))*60) 
```

嗯，其实不一样。将根据舍入规则 ( -> )`TimeSerial`舍入秒数，并将截断 ( -> )。但是您可以将舍入函数应用于其最后一个参数。`11.86``12``TIME``11.86``11`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T20:19:09.880

VBA 函数对我不起作用，但我在 Excel 中找到了一种解决方法：

```
=TRUNC(W11/60)&":"&IF(ROUND(((W11/60-TRUNC(W11/60))*60),0)=0,"00",ROUND(((W11/60-TRUNC(W11/60))*60),0))` 
```

`W11`十进制数字形式的时间在哪里`900.3201306`？结果在几分钟内`15:00`

基本上，你用截断的十进制分钟减去十进制分钟+秒来只给你秒。然后你`decimal seconds * 60`拿给你`seconds+milliseconds`。四舍五入给你几秒钟。如果秒为 0，则写入“00”以获得正确的格式。然后添加截断的分钟加上秒。

这个公式似乎有效。

# objective-c - 使用委托在 UIPopoverViewController 和 MainViewController 之间进行通信

> ID：10421853
> 
> 赞同：2
> 
> 时间：2012-05-02T21:16:03.423
> 
> 标签：objective-c, ios, delegates, uipopovercontroller

我正在开发一个 iPad 应用程序，该应用程序具有一个主视图（在本例中为 MKMapView）和一个包含 UITableViewController 的 PopoverView 控制器。UITableview 中的内容包含许多变量元素，我需要这些元素在 MapView 上放置注释引脚。这些变量会根据选择的行而变化。我的想法是使用委托来完成此任务，但我正在努力实现它。

我已经在 showIncidentList 方法中声明了委托（参见随附的代码）。我的问题是，这个自定义委托是否适合这个期望的结果，如果是这样，我缺少什么可以让我在委托中传达信息并使用来自委托的更新信息调用主视图上的 plotCallLocations 方法。

相关代码：

**SearchViewController.h** //popoverViewController 类

```
@protocol IncidentPickerDelegate <NSObject>

- (void)incidentSelected:(NSMutableArray *)incidentDetail;

@end

@interface SearchViewController : UITableViewController  <UITableViewDelegate, UITableViewDataSource> { 
__weak id<IncidentPickerDelegate> _delegate;
}

@property (nonatomic, retain) NSMutableArray *incidentDetails;
@property (nonatomic, weak) id<IncidentPickerDelegate> delegate;
@end 
```

**搜索视图控制器.m**

```
#import "TwitterSearchViewController.h"
#import "CallViewController.h"

@implementation SearchViewController

@synthesize delegate = _delegate;
@synthesize incidentDetails= _incidentDetails;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

_incidentDetails = [[NSMutableArray alloc] initWithObjects:[textItems objectAtIndex:0], [textItems objectAtIndex:1], lat, lon, nil];     //textItems is an NSArray of parsed JSON data, lat and lon are int's

 NSLog(@"_delegate = %@", _delegate);
        if ([_delegate respondsToSelector:@selector(incidentSelected:)]) {
            NSMutableArray *incidentDet = _incidentDetails;
            [_delegate incidentSelected:incidentDet];
 NSLog(@"incidentDetail ----> %@", incidentDet);
} 

@end 
```

**CallViewController.h** //MainViewController

```
#import "SearchViewController.h"

@interface CallViewController : UIViewController <CLLocationManagerDelegate, MKMapViewDelegate, UIAlertViewDelegate, IncidentPickerDelegate> {
}

@property (nonatomic, retain) UIPopoverController *incidnetListPopover;
@property (nonatomic, retain) SearchViewController *incidentPicker;

-(IBAction)showIncidentList:(id)sender; 
```

**调用视图控制器.m**

```
#import "CallViewController.h"
#import "SearchViewController.h"

@implementation CallViewController

@synthesize incidnetListPopover = _incidnetListPopover;
@synthesize incidentPicker = _incidentPicker;

UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                              bundle:nil];

if (_incidentPicker == nil) {
    self.incidentPicker = [sb instantiateViewControllerWithIdentifier:@"SearchViewController"];
    _incidentPicker.delegate = self;

    self.incidnetListPopover = [[UIPopoverController alloc] 
                                initWithContentViewController:_incidentPicker];               
}

[self.incidnetListPopover presentPopoverFromBarButtonItem:sender 
                                permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

}

- (void)incidentSelected:(NSMutableArray *)incidentDetail {

//    for (id<MKAnnotation> annotation in _mapView.annotations) {
//      [_mapView removeAnnotation:annotation];

NSLog(@"plotCall called");
NSNumber * latitude = [incidentDetail objectAtIndex:2];
NSNumber * longitude = [incidentDetail objectAtIndex:3];
NSString * name = [incidentDetail objectAtIndex:1];
NSString * address = [incidentDetail objectAtIndex:0];
CLLocationCoordinate2D coordinate;
coordinate.latitude = latitude.doubleValue;
coordinate.longitude = longitude.doubleValue;  

CallLocation *annotation = [[CallLocation alloc] initWithName:name address:address coordinate:coordinate];
[_mapView addAnnotation:annotation];  

[self.incidnetListPopover dismissPopoverAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:17:02.617

自定义委托方法适用于这种情况。

主要问题是`CallViewController`没有实现`IncidentPickerDelegate`协议中指定的确切方法，即`incidentSelected:`. *（顺便说一句，我假设“TwitterSearchViewController”是一个错字，应该是“SearchViewController”，反之亦然。）*

即使`CallViewController`有`plotCallLocations:`也采用数组的方法，但它的名称并不**准确** `incidentSelected:`（它必须是）。

您应该会收到一些关于此的编译器警告。

因此，当`SearchViewController`调用该协议方法时，它可能会因“无法识别的选择器”错误而崩溃。

以下是一些解决方案（第一个是最简单的）：

*   中`CallViewController`，更改`plotCallLocations:`为`incidentSelected:`
*   在协议中，更改`incidentSelected:`为`plotCallLocations:`
*   在`CallViewController`中，添加一个`incidentSelected:`方法，然后从那里调用`plotCallLocations:`

另外（不会引起问题，但是），在 中`SearchViewController`，而不是检查委托是否是`nil`，最好检查委托是否确实具有您将要使用的方法调用的方法`respondsToSelector:`。

为此，首先您必须`IncidentPickerDelegate`实现`NSObject`协议：

```
@protocol IncidentPickerDelegate<NSObject> 
```

现在在`SearchViewController`，而不是检查委托是否是`nil`：

```
if ([_delegate respondsToSelector:@selector(incidentSelected:)]) 
```

# javascript - Javascript破坏音频播放器

> ID：10421855
> 
> 赞同：0
> 
> 时间：2012-05-02T21:16:10.150
> 
> 标签：javascript, jquery, tumblr

[我在 tumblr 中](https://stackoverflow.com/questions/10165501/tumblr-audio-video-players-masonry-with-infinite-scroll)知道这个问题，代码被剥离，音频播放器坏了。

我现在正在使用 flexslider.js，但问题几乎相同。我用这个修复了它

```
 setTimeout(function() {                        
                $('.audio').each(function(){
                    var audioID = $(this).parent().attr("id");
                    var $audioPost = $(this);
                    $.ajax({
                        url: '/api/read/json?id=' + audioID,
                        dataType: 'jsonp',
                        timeout: 50000,
                        success: function(data){
                            if ($audioPost.html().indexOf("is required to") != -1) {
                            $audioPost.append('<div style=\"background-color:black;">' + data.posts[0]['audio-player'] +'</div>');
                                }
                            }
                    });
                });
            }, 2000); 
```

您需要调整浏览器窗口的大小才能看到这一点，因为我是从移动版本开始编码的，无论如何...在永久链接页面[http://tmbeta.tumblr.com/post/21264072020](http://tmbeta.tumblr.com/post/21264072020)上看起来还可以，但在照片集时却不行（使用 flexslider）和播放器在同一页面[http://tmbeta.tumblr.com/](http://tmbeta.tumblr.com/)

看看玩家是如何添加到帖子底部的？我希望它出现在显示 [需要 Flash 9 才能收听音频。] 的位置。我知道这基本上是 .append 所做的，但我对 jquery 不够熟悉，所以我真的很难找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:45:33.480

查看您的 HTML，结果并不令人惊讶：您正在`append()`使用 class 将元素范围限定`audio`为`<article>`. jQuery 将 new 附加`div`到该范围的末尾 - 这是文章的底部。您需要更改元素插入的范围，或者通过

1.  迭代类的元素`audio-player`而不是`audio`，即

    ```
    $('.audio-player').each(function(){ … } 
    ```

    由于这改变了 的范围`this`，您还必须调整检索帖子 ID 的行以查找元素层次结构，即

    ```
    var audioID = $(this).parents('.audio').attr('id'); 
    ```

    或通过

2.  将元素插入范围限定为适当的播放器元素，即

    ```
    $audioPost.find('.audio-player').append('<div style=\"background-color:black;">' + data.posts[0]['audio-player'] +'</div>'); 
    ```

    如果您宁愿替换该`span`元素内部而不是附加到它，那么您的播放器会替换 Flash 警告，请执行

    ```
    $audioPost.find('#audio_player_'+audioID).replaceWith('<div style=\"background-color:black;">' + data.posts[0]['audio-player'] +'</div>'); 
    ```

    反而。

*通过聊天进行一些试验和错误现场测试后编辑的答案；请忽略评论线程。*

# php - 按名称 ASC 订购 json 数组不适用于 Chrome

> ID：10421857
> 
> 赞同：0
> 
> 时间：2012-05-02T21:16:18.730
> 
> 标签：php, jquery, json

大家好，我有这个代码

```
$Sql = "SELECT * FROM tabmakes
    WHERE Type_Id = '1'
    ORDER BY Make_Name Asc";
$Query = mysql_query($Sql,$Conn) or die(mysql_error($Conn));
$marcas = array();
  while ($Rs = mysql_fetch_array($Query)) {
    $marcas[ $Rs['Marca_Id'] ] = $Rs['Marca_Nome'];
    }
     asort($marcas); // tried using asort only works on firefox     
     echo ( json_encode($marcas) ); 
```

这是我的jQuery

```
$("#div-test-1").change(function(){
    var tmpTipo = $(".buscaMarcas").val();
    $.getJSON("/php/getMakes.php",{tipo: tmpTipo, marca: $(this).val()}, function(resposta){
        if(resposta === null){
            var options = '<option value="">-</option>';
        }
        else{
            var options = '<option value="">-</option>';
            $.each(resposta, function(key, val) {
                options += '<option value="' + key + '">' + val + '</option>';
            });
        }
        $("select.recebeModelos").html(options);
        $("select.recebeEstilos").html('<option value="">-</option>');
    });
}); 
```

json 输出按 NAME 排序，但 Select 填充所有信息时，值按 ID 排序。

那么我如何获得结果并显示在按名称排序的选择上。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:19:43.300

您正在 PHP 中构建一个数组。即使您根据 PHP 的输出以 NAME 顺序构建它，当 PHP 启动 json 转换过程时，它也会以数字键顺序构建它。然后，您还可以通过运行数组来强制执行该数字键顺序`asort()`。

一种解决方法是更改​​数组的构建方式：

```
$data = array();
while($row = mysql_fetch_assoc($result)) {
   $data[] = array('id' => $row['id'], 'name' => $row['name'])
} 
```

当然，这需要更改 JS 代码来处理新结构，但这将保留名称顺序。

# python - 如何为 Windows 64 位 Python 2.7 编译 guppy？

> ID：10421859
> 
> 赞同：3
> 
> 时间：2012-05-02T21:16:23.863
> 
> 标签：python, memory-management, python-2.7

我正在尝试使用 guppy 对我的 Python 程序进行一些内存分析。我正在使用带有 Python 2.7 64 位的 Windows 7。我从后备箱检查了最新版本的孔雀鱼：

`svn co https://guppy-pe.svn.sourceforge.net/svnroot/guppy-pe/trunk/guppy guppy`

当我这样做时，`python setup.py build`我得到了一堆错误。有没有人为 Windows 7 Python 2.7 64 位编译过孔雀鱼？如果是这样，怎么做？如果这不可能，我还能使用哪些其他 Python 内存分析器？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T09:52:25.037

您需要使用 VS X64 命令提示符。我启动了“VS2013 x64 Cross Tools Command Prompt”（安装了 2013 Express for Desktop）并执行了构建命令，完成后没有任何错误。

# nhibernate - 在我已经分配给属性后，休眠获取延迟加载的集合

> ID：10421861
> 
> 赞同：0
> 
> 时间：2012-05-02T21:16:33.763
> 
> 标签：nhibernate, fluent-nhibernate, queryover

我正在使用 QueryOver 并急切地加载过滤后的集合，类似于以下内容：

```
Part partAlias=null;
Session.QueryOver<Car>().JoinQueryOver(x=>x.Parts,()=>partAlias)
.WhereRestrictionOn(()=>partAlias.Id).IsIn(partIds)
.List<Car>(); 
```

问题是当我引用生成的集合 (.Parts) 时，它会从数据库中获取并覆盖我之前的内容。我正在使用 Fluent Nhibernate 进行配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:42:22.990

好的，我最终让一切正常工作。有几个不同的问题。一个是包含其他关系，这些关系创建了导致集合成倍增加的笛卡尔积。另一个问题，更具体到我的问题，我通过将连接类型添加为`JoinType.LeftOuterJoin`. [我在这个线程](https://stackoverflow.com/a/6695743/265877)上找到了建议。默认是使用内部连接，但它不起作用。连接**必须**是左外连接。

# resque - JRuby/Resque 如何减少内存占用

> ID：10421864
> 
> 赞同：1
> 
> 时间：2012-05-02T21:17:04.970
> 
> 标签：resque, jrubyonrails

我有一个带有使用 Resque/Redis 的工作队列的 JRuby/Rails 应用程序。当我做

```
cat /proc/{pid}/status 
```

对于 Resque 进程的 {pid}，它产生 692 MBytes 的 VmSize。我的启动 Resque 进程的 rake 任务（在 $RAILS_ROOT/lib/tasks 中）如下所示：

```
require "resque/tasks"
task "resque:setup" => :environment
task "resque:work" => :environment do
    ENV['QUEUE']="*"
end 
```

我的 Resque 工作人员位于 $RAILS_ROOT/app/workers 中，而我的模型位于 $RAILS_ROOT/app/models 中。有没有一种方法可以在没有控制器、视图和它们引入的所有库的情况下启动 Resque？我的工人只需要访问模型和其他工人的 API 和一些宝石。

另外，还有其他方法可以减少 Resque 任务的 VmSize 吗？

# linux - 使用 kdump 分析内存崩溃

> ID：10421865
> 
> 赞同：1
> 
> 时间：2012-05-02T21:17:07.390
> 
> 标签：linux, debugging, memory-leaks, crash-dumps

我有一个 kdump 说

```
crash> kmem -i
              PAGES        TOTAL      PERCENTAGE
 TOTAL MEM   468778       1.8 GB         ----
      FREE     2107       8.2 MB    0% of TOTAL MEM
      USED   466671       1.8 GB   99% of TOTAL MEM
    SHARED   193447     755.7 MB   41% of TOTAL MEM
   BUFFERS      746       2.9 MB    0% of TOTAL MEM
    CACHED   186315     727.8 MB   39% of TOTAL MEM
      SLAB    26366       103 MB    5% of TOTAL MEM

TOTAL SWAP   273103         1 GB         ----
 SWAP USED    27566     107.7 MB   10% of TOTAL SWAP
 SWAP FREE   245537     959.1 MB   89% of TOTAL SWAP 
```

这看起来不像是用户空间进程内存泄漏。

崩溃时如何查看正在使用内存的内容？我怀疑页面缓存溢出。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:48:10.613

您可以只使用`ps`崩溃实用程序中的命令。

# algorithm - 给定一棵 2-3 树，我们如何找到可能的插入顺序？

> ID：10421867
> 
> 赞同：0
> 
> 时间：2012-05-02T21:17:27.333
> 
> 标签：algorithm, data-structures, insert, tree

假设你有一个 2-3 树，包含节点和几个级别。你怎么能找到给你结果树的几个可能的插入顺序/序列之一？

不需要代码，只是一个纸上的任务。我敢肯定（祈祷）这不是简单的反复试验。

类似的问题在这里被问到，但没有回复

[2-3 树插入](https://stackoverflow.com/questions/8945625/2-3-tree-insertion)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:21:15.413

我是这个主题的新手，但我会尝试一下。

我们所要做的就是想办法倒退一步。也就是说，选择一个可能是最后添加的值，并推断前一棵树必须是什么。

一个新值被添加到一个叶子；要么叶子有一个值（现在有两个），要么它有两个，新值导致分裂。分裂将向上传播到树，直到它通过创建一个 3 节点或一个新的根 2 节点而停止。

因此，这是一种选择可能是最后添加的值的方法。如果树中有任何二值节点，则选择最低的节点之一；该节点中的任何一个值都可能是最后一个值。如果树中*没有*二值节点，那么树中的~~任何值都可能~~ **根节点中的值一定**是最后一个。

（这并不详尽，还有其他可能性，但我们正在努力寻找*候选人*，而不是*所有*候选人。）

一旦你选择了一个值，通过分解为叶子来删除它是非常简单的。

这是否足够，或者我应该更详细地解释？

# ruby-on-rails - 给定没有时区的时间和 RoR 中当前用户的时区，如何转换回 UTC？

> ID：10421868
> 
> 赞同：0
> 
> 时间：2012-05-02T21:17:27.713
> 
> 标签：ruby-on-rails, ruby

假设我将日期作为 UTC 存储在数据库中，并且我想向用户显示日期时间，然后他们可以对其进行编辑。存储此日期时间后，需要将其转换回 UTC。当向用户显示时，不会给出时区信息。

我需要的是 .in_time_zone 的“逆”，例如 .from_time.zone。

将没有时区的日期时间以及已知时区转换为 UTC 日期时间（时间戳）的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:30:05.363

[`utc()`](http://apidock.com/rails/DateTime/utc)

通过添加偏移值将 DateTime 调整为 UTC；偏移量设置为 0

```
datetime = DateTime.now
 => Thu, 03 May 2012 00:34:42 +0300
datetime_utc = datetime.utc
 => Wed, 02 May 2012 21:34:42 +0000
datetime_utc.in_time_zone('Minsk').to_datetime
 => Thu, 03 May 2012 00:34:42 +0300 
```

# zend-framework2 - ZF2：如何判断用户是否在 layout.phtml 文件中使用 ZfcUser 登录

> ID：10421872
> 
> 赞同：3
> 
> 时间：2012-05-02T21:17:45.367
> 
> 标签：zend-framework2

我正在使用 ZfcUser 进行身份验证。当前试图判断用户是否使用 ...

```
<? if ($this->zfcUserAuthentication()->hasIdentity()): ?> 
```

我猜我需要为应用程序配置文件添加一些路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:42:08.613

您可以使用 ZfcUser 提供的视图助手（即您在问题中引用的**那个 mtbikemike**）。通过将以下内容添加到模块（module.config.php）的配置中，使用动态注入加载视图助手。当然，您可能需要将下面的代码与 module.config.php 的任何现有内容集成。

```
return array(
    'di' => array(
        'instance' => array(
            'Zend\View\HelperLoader' => array(
                'parameters' => array(
                'map' => array(
                        'zfcUserIdentity' => 'ZfcUser\View\Helper\ZfcUserIdentity',
                        'zfcUserLoginWidget' => 'ZfcUser\View\Helper\ZfcUserLoginWidget',
                    ),
                ),
            ),
        ),
    ),
); 
```

这会加载两个视图助手，因此如果您只需要 zfcUserIdentity 助手，那么您始终可以删除对 zfcUserLoginWidget 的引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T09:48:31.263

我是 Zend Framework 2（和 ZfcUser）的新手，所以当您发布问题时，我不知道它是如何工作的。现在它很简单：

```
<?php if ( $this->zfcUserIdentity() ) { ?> 
```

它在 ZfcUser 的 Module.php 中的 getViewHelperConfig() 函数中定义。如果用户已登录，它将返回 ZfcUserDoctrineORM\Entity\User 的实例，否则返回 false。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T13:49:45.230

一些视图助手示例： [如何检查用户是否已登录](https://github.com/ZF-Commons/ZfcUser/wiki/How-to-check-if-the-user-is-logged-in)

```
<!-- Test if the User is connected -->
<?php IF(!$this->zfcUserIdentity()): ?>
    <!-- display the login form -->
    <?php echo $this->zfcUserLoginWidget(array('redirect'=>'application')); ?>
<?php ELSE: ?>
    <!-- display the 'display name' of the user -->
    <?php echo $this->zfcUserIdentity()->getDisplayname(); ?>
<?php ENDIF ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T02:16:13.283

我不知道这是否是“正确”的方式，但您可以将身份添加为布局的 ViewModel 变量。将以下内容放入您的 Module 类中：

```
public function init(Manager $moduleManager)
{
    $events = $moduleManager->events();
    $sharedEvents = $events->getSharedCollections();
    $sharedEvents->attach('bootstrap', 'bootstrap', array($this, 'initializeView'), 100);
}

public function initializeView($e)
{
    $app = $e->getParam('application');  
    $viewModel = $app->getMvcEvent()->getViewModel();
    $viewModel->myLayoutVariable = 'myLayoutVariable';                
} 
```

# php - Zend_db 更新更好的错误报告

> ID：10421877
> 
> 赞同：2
> 
> 时间：2012-05-02T21:18:09.423
> 
> 标签：php, zend-framework, zend-db

当我更新记录时，我使用“更新”的结果来确定它是否正常工作。

```
$a = $this->db->insert(self::TABLE, $saveData); 
```

$a = 1 表示它更新了一条记录。$a = 0 表示它没有更新任何内容。如果表单没有任何变化，我可以得到 0。但我也假设如果出现错误我可以得到 0。

我希望能够告诉用户信息未更新，因为他们没有更改任何内容或存在某种实际错误。

我是纠正错误返回 0 还是返回 -1？

当我试图产生一个错误来检查这个时，我得到的只是一个 Zend 错误，它没有吸引力，坦率地说相当无用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:18:10.513

如果查询由于服务器错误、格式错误或无效数据而失败，您将得到一个异常而不是返回值。所以要做你想做的事，你可以这样做：

```
try {
    $a = $this->db->insert(self::TABLE, $saveData);

    if ($a == 0) {
        // return no data was updated
    } else {
        // return data was updated
    }
} catch(Zend_Exception $ex) {
    // query did NOT execute successfully
    // call $ex->getMessage() for the actual error
    // return failure result
} 
```

# python - 如何让詹金斯运行一个执行构建的python脚本？

> ID：10421879
> 
> 赞同：8
> 
> 时间：2012-05-02T21:18:14.357
> 
> 标签：python, hudson, jenkins

学习 Jenkins，并试图让它构建一个项目，我的构建脚本是用 python 编写的。

```
./build.py -i 
```

我试过使用“执行脚本”和“执行 Python 脚本”。脚本第一行是

```
#!/usr/bin/python 
```

Jenkins 并没有抱怨这两种尝试，它似乎只是忽略了设置，在签出代码后立即声明构建成功。

我已经阅读了一些旧邮件列表，这些邮件列表暗示我必须编写一个 bash 脚本（build.sh）并让它调用 python 脚本。我希望这不是答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T21:40:38.490

您应该能够使用“执行外壳”构建步骤并指定`/path/to/build.py -i`

我猜测构建作业运行时的当前目录不是您所期望的。Jenkins 有一个内置的环境变量 WORKSPACE 设置为构建工作区的根目录，因此假设 Python 脚本位于签出代码的根目录下，`$WORKSPACE/build.py`也应该可以工作。

# iphone - Apple Photos App 裁剪风格

> ID：10421881
> 
> 赞同：1
> 
> 时间：2012-05-02T21:18:26.573
> 
> 标签：iphone, ios5, uiimageview, crop

我想允许在我的应用程序中手动裁剪照片，但我想像 Apple 在照片应用程序中那样进行操作（使用漂亮的 3x3 分割和手指拖动到用户希望图像开始/结束的位置）。有人对我如何实现它有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:30:43.903

有一些开源替代品可以模拟这种行为，请查看：

*   [https://github.com/iosdeveloper/ImageCropper](https://github.com/iosdeveloper/ImageCropper)
*   [https://github.com/barrettj/BJImageCropper](https://github.com/barrettj/BJImageCropper)
*   [https://github.com/ardalahmet/SSPhotoCropperViewController](https://github.com/ardalahmet/SSPhotoCropperViewController)

# java - 有没有一种简单的方法可以将项目列表输入到数组中，比如 50-100？

> ID：10421889
> 
> 赞同：1
> 
> 时间：2012-05-02T21:19:06.500
> 
> 标签：java, arrays

我正在尝试创建一个包含大约 100 个名称的数组。我希望名称是我选择的名称，而不是随机生成的名称。因此 Array 的每个位置都将包含一个名称字符串。有没有比这更简单的方法`Array[1] = "name; Array[2] = "name";`？我的想法是使用 for 循环从数据文件或文本文件中获取信息，但我不知道该怎么做。完成此任务的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:26:42.030

如果您有一个按行命名的文件：

```
public static String[] getArrayStringRandom() {
    try {
        List<String> list = new LinkedList<String>();
        FileReader fileReader = new FileReader("file.txt");
        BufferedReader in = new BufferedReader(fileReader);
        for (String name; (name = in.readLine()) != null;) {
            list.add(name);
        }
        in.close();
        fileReader.close();
        // Collections.shuffle(list); // Random permutes
        return list.toArray(new String[0]);
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:21:45.563

您可以使用[*数组初始*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)值设定项：

> 数组初始值设定项可以在声明中指定，或作为数组创建表达式的一部分，以创建数组并提供一些初始值。它被写成一个逗号分隔的表达式列表，用大括号`{`和. 括起来`}`。

```
Array = new String[] {"name1", "name2", ..., "name100"}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:23:42.377

或许是这样的。从文本文件中读取它也可以，但需要更多的努力，尽管它会更加动态。

```
String[] myArray = {"Jon","Mike","Dave","Ed","Ted","Shirly","Jane","Robert"};//etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T21:23:49.803

好吧，如果您已经在文本文件中列出了所有名称，那么解析 txt 文件并填充数组是一个有效的选择。

[这是完成它所需的一切。](http://www.javapractices.com/topic/TopicAction.do?Id=87)

但是，如果您还没有以数字方式列出所有名称（也就是如果您将它们写在一张纸上）并且您知道它们不会更改，那么只需手动将它们添加到代码中。

但是，这样做的一个缺点是，如果您需要更新名称列表，则处理 txt 文件而不是硬代码要容易得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T21:24:16.207

如果您需要用硬编码值填充数组，您可以使用

```
String stringArray = new String[]{ "Name1", "Name2", ... }; 
```

如果您想按照建议从文件中检索它，可以使用类似于

```
String stringArray = new String[100];
for( int i = 0; i < stringArray.length; i++ ){
   stringArray[i]=retrieveNextValueFromFile();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T21:24:45.540

初始化数组的最简单方法是：

```
String[] array = { "a", "b", "c", "d", "e" }; 
```

...但是，如果您打算从文件中读取名称，则必须将其一一存储：

```
List<String> list = new ArrayList<String>();
// ... read each name from the file
list.add(name);
// finally, convert the list to a String[]
String[] array = list.toArray(new String[list.size()]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T22:14:23.307

如果这只是为了测试家庭作业，您可以使用`<`命令行工具传递文件和标准扫描仪。例子

```
import java.util.Scanner;

public class Example {
  public static void main(String[] args){
    Scanner cin = new Scanner(System.in);
    String[] stringArray = new String[100];

    for(int i = 0; i < 100; i++)
      stringArray[i] = Scanner.nextLine();
  }
} 
```

现在，如果您有一个包含每一行名称的文件 (filename.txt)，请从 cpprompt 调用该程序： `java Example < filename.txt`

这对测试有好处...

# c# - NDBUNIT 教程中的存储库类

> ID：10421891
> 
> 赞同：0
> 
> 时间：2012-05-02T21:19:21.507
> 
> 标签：c#, unit-testing, tdd, ndbunit

我正在尝试从[ndbunit](http://code.google.com/p/ndbunit/wiki/QuickStartGuide)教程中学习数据库单元测试。一切顺利。除了我不明白作者是如何创建**CustomerRepository**类的。是否有一个工具可以指向教程中的 xsd 文件并自动生成存储库类？即使我手动生成它，我将如何去做。

请帮忙。

谢谢

```
[Test]
public void Test()
{
//I took out some code here...
    CustomerRepository repository = new CustomerRepository();
    Assert.AreEqual(2, repository.GetAllCustomers().Count);

} 
```

**更新**

我只是使用快速实体框架代码来进行快速数据访问，如下所示，效果很好..谢谢

```
 var context = new MyEntities();
        var query = from c in context.Customers select c ;
        var count = query.Count();

        Assert.AreEqual(2, count); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:49:01.787

假设 CustomerRepository 是一个典型的存储库类。在您的情况下，这类似于

```
public class CustomerRepository
{
   public List<Customer> GetAllCustomers()
   {
       using (var context = new MyEntities() )            
           return context.Customers.ToList();
   }
} 
```

# sql-server - 如何从 SSRS 数据集中的动态 SQL 查询中列出字段

> ID：10421905
> 
> 赞同：8
> 
> 时间：2012-05-02T21:20:04.547
> 
> 标签：sql-server, tsql, reporting-services, ssrs-2008

我在 SSRS 中运行以下查询。如果我为这两个参数添加声明，它在 SQL 管理控制台中运行良好。

```
declare @EMRQuery varchar(max)
declare @CPSQuery varchar(max)

set @EMRQuery = 'select Person.ExternalId 
                    from ml.Person 
                        join ml.Obs on Person.pId = Obs.pId 
                            join ml.ObsHead on Obs.hdId = ObsHead.hdId 
                    where ObsHead.name = ''SCHOOLREGDTE'' 
                        and Obs.xId = 1.e+035
                        and Obs.change = 2 
                        and Obs.obsDate >= to_date(''' 
                            + convert(varchar(30), @DateYearStart, 120) 
                            + ''', ''YYYY-MM-DD HH24:MI:SS'')
                        and Obs.obsDate < to_date(''' 
                            + convert(varchar(30), @DateQuarterEnd, 120) 
                            + ''', ''YYYY-MM-DD HH24:MI:SS'')'

set @CPSQuery = 'select ic.ListName, count(distinct pp.patientprofileid) as PatCount
                    from PatientProfile pp
                        left join PatientInsurance pi on pp.PatientProfileId = pi.PatientProfileId
                                and pi.OrderForClaims = 1
                                and pi.Inactive <> 1
                            left join InsuranceCarriers ic on pi.InsuranceCarriersId = ic.InsuranceCarriersId
                        join OpenQuery(EMR_LIVE
                            ,  ''' + replace(@EMRQuery, '''', '''''') +
                        ''' ) Students on pp.PatientId = Students.ExternalId
                    group by ic.ListName '

exec(@CPSQuery) 
```

但是，当我将其插入 SSRS 时，它不会记录有任何可用于报告的字段。我如何说服 SSRS 我确实有可以使用的字段？谢谢。

编辑：我刚刚在查询中声明了参数，它识别了字段名称。

```
declare @DateYearStart datetime
declare @DateQuarterEnd datetime
set @DateYearStart = '2011-07-01'
set @DateQuarterEnd = '2012-03-31' 
```

当然，这是错误的，因为我声明了两次参数，一次是查询参数，一次是在查询中。但是，一旦我注释掉上面的行，我就再次丢失了这些字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:45:01.903

MSDN 论坛上的某个人建议我选择一个临时表，所以我将最后的 exec 语句替换为

```
declare @CarrierList table (Listname varchar(200), PatCount int);
insert @CarrierList exec(@CPSQuery)
select * from @CarrierList 
```

现在似乎工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-16T20:37:47.563

你如何让 SSRS 相信你有可以使用的领域？答：从数据集属性...字段手动将字段添加到数据集。这将使设计者感到高兴，只要在执行查询时字段存在，报表就可以工作。至少它对我使用带有动态查询文本的 DB2 的 OLE DB 查询有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T23:18:10.560

您的查询可能有问题。SSRS 数据集几乎可以评估您放入其中的任何内容。例如，我刚刚对这两个查询进行了小测试：

```
declare @a varchar(500)
declare @b varchar(500)
set @a = '(select name from sys.tables) B'
set @b = 'select B.name as name2 from '+@a
exec(@b) 
```

并且我的数据集确实识别了字段 name2。

我建议您查看您的查询。

如果它确实不起作用，您可以尝试将代码添加到 SQL Server 过程，该过程返回具有预定义字段名称的表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T17:31:42.917

`SET FMTONLY ON;`由于 SSRS在您单击刷新按钮时执行存储过程。然后将 a`SET FMTONLY OFF;`作为存储过程的第一行，它将返回您的字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T08:07:21.580

我怀疑这是因为您的代码中有两个查询，即使只有一个要执行。因此，我建议将这两个查询组合成一个查询。

# tomcat - 是否有使用 Tomcat 修复 BodyContentImpl jsp 标签内存泄漏的方法？

> ID：10421908
> 
> 赞同：2
> 
> 时间：2012-05-02T21:20:13.520
> 
> 标签：tomcat, memory-leaks, jsp-tags

我在 apache 上阅读了一些关于 BodyContentImpl 效率低下以及它如何分配 cb 空间的错误报告。( `private char[] cb;`) 如果一个标签写出 50KB 的 HTML，缓冲区大小将从 512 字节增加到 50KB，每次需要分配时，它都会创建一个新的 char[] 并进行**两次** `System.arraycopy`调用。

[https://issues.apache.org/bugzilla/show_bug.cgi?id=43925](https://issues.apache.org/bugzilla/show_bug.cgi?id=43925)

该错误报告说该错误已移至 Tomcat 7 的队列中，但我在发行说明中还没有看到任何内容。在此期间，有没有人能够使用 Tomcat 解决这个问题？

我已经阅读了关于 LIMIT_BUFFER=true 的信息。他们说设置此标志时会影响性能。该代码将释放当前 sb 并在 512 字节处重新分配一个新的。

```
public void clear() throws IOException {
467           if (writer != null) {
468               throw new IOException();
469           } else {
470               nextChar = 0;
471               if (LIMIT_BUFFER && (cb.length > Constants.DEFAULT_TAG_BUFFER_SIZE)) {
472                   bufferSize = Constants.DEFAULT_TAG_BUFFER_SIZE;
473                   cb = new char[bufferSize];
474               }
475           }
476       } 
```

如果在同一个请求中多次调用此代码，这似乎会迫使您从一个小缓冲区重新开始，并最终创建更多的 cb 来收集垃圾。

错误报告中有提议的更改，但我想知道是否有人实施了一些解决此问题的方法，因此它不会生成这么多浪费的字符串并执行这么多的`System.arraycopy`调用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:32:34.183

不，这个增强请求没有进一步的进展。

我会选择 LIMIT_BUFFER=true。与您认为可能存在性能问题的任何事情一样，通过分析器运行您的应用程序，看看是否真的有什么需要担心的。有很多选择。我使用 YourKit 是因为他们向开源开发人员提供免费副本。

# java - 创建项目时出现“无法安装项目方面”错误？

> ID：10421913
> 
> 赞同：8
> 
> 时间：2012-05-02T21:20:34.563
> 
> 标签：java, eclipse, jakarta-ee, installation

我从存储库中获取了项目，并按照设置说明尝试在 Eclipse 中创建一个项目，并将该位置指向我从存储库下载代码的位置。然后当我点击完成时，我得到了错误说明

“一个或多个约束未得到满足。无法安装项目构面 Java 1.6。已安装此项目构面的某些版本。无法安装项目构面动态 Web 模块 3.0。已安装此项目构面的某些版本。”

这个怎么解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T13:26:46.890

我解决了这个。解决方案是我必须转到项目位置的“.settings”文件夹并删除“org.eclipse.wst.common.project.facet.core.xml”文件并再次重新启动该过程。这次奏效了。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:21:26.970

无需删除文件并重新创建。而是在 Eclipse 上的项目中导航 org.eclipse.wst.common.project.facet.core.xml 文件，并使用所需的任何版本更改其安装的 facet 标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-24T06:05:15.440

我有同样的挑战，但使用从 Oracle 下载的 GlassFish5 并手动将我`org.eclipse.wst.common.project.facet.core.xml`的 from`.settings`文件夹配置为：

```
<?xml version="1.0" encoding="UTF-8"?>
<faceted-project>
  <runtime name="GlassFish 5"/>
  <fixed facet="jst.web"/>
  <fixed facet="java"/>
  <fixed facet="wst.jsdt.web"/>
  <installed facet="jst.web" version="4.0"/>
  <installed facet="wst.jsdt.web" version="1.0"/>
  <installed facet="java" version="1.8"/>
  <installed facet="glassfish.web" version="5"/>
</faceted-project> 
```

并包含使用 TomEE 从 Dynamic Web Project 生成的以下文件，现在我`.settings`的文件夹包含以下文件：

```
.jsdtscope
org.eclipse.jdt.core.prefs
org.eclipse.wst.common.component
org.eclipse.wst.common.project.facet.core.xml
org.eclipse.wst.jsdt.ui.superType.container
org.eclipse.wst.jsdt.ui.superType.name 
```

然后，我编辑我的项目`.classpath`以指向我正在使用的 JAR 文件的位置，因为我使用的是 GlassFish5，这是我的配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk1.8.0_261">
        <attributes>
            <attribute name="owner.project.facets" value="java"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.web.container"/>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.module.container"/>
    <classpathentry kind="lib" path="C:/glassfish5/glassfish/lib/javaee.jar"/>
    <classpathentry kind="output" path="build/classes"/>
</classpath> 
```

最后，当我回到 Eclipse IDE 时，我刷新了我的 Project Explorer 和 walah！

我希望它对其他面临同样挑战的人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T08:46:59.680

我也面临同样的问题，尝试创建多次动态 Web 项目并得到解决。

以下是我在工作`org.eclipse.wst.common.project.facet.core.xml`文件中观察到的内容。

```
<?xml version="1.0" encoding="UTF-8"?>
<faceted-project>
  <runtime name="Apache Tomcat v8.5"/>
  <fixed facet="java"/>
  <fixed facet="wst.jsdt.web"/>
  <fixed facet="jst.web"/>
  <installed facet="java" version="1.8"/>
  <installed facet="jst.web" version="3.1"/>
  <installed facet="wst.jsdt.web" version="1.0"/>
</faceted-project> 
```

我使用的技术堆栈：
Java 8 Tomcat 8.5 Eclipse Neon
任务：创建一个`Dynamic Web Project`

# excel - 从excel导入数据进行访问时，从外部数据库驱动程序（1）得到一个意外错误

> ID：10421914
> 
> 赞同：11
> 
> 时间：2012-05-02T21:20:34.367
> 
> 标签：excel, ms-access, import

我有一张`2010 Excel file`横跨`34864 rows`和`1387 columns`. 我正在尝试`Access 2010`使用导入向导将其导入，但是当我选择该工作表时，Access 没有响应，几秒钟后给了我一个

> “来自外部数据库驱动程序的意外错误 (1)”

这是由于纸张的大小还是单元格中的某些东西阻止了它的工作。来自同一文件的其他工作表导入没有问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-10-25T12:41:31.167

安装安全补丁**KB4041681**后，您可能会遇到此错误。请参阅此[MSDN](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2017/10/18/unexpected-error-from-external-database-driver-1-microsoft-jet-database-engine-after-applying-october-security-updates/)条目。就我而言，用帮助替换`Microsoft.Jet.OLEDB.4.0`提供者。`Microsoft.ACE.OLEDB.12.0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T21:44:48.677

查看 Access 2010 规范： http: [//office.microsoft.com/en-us/access-help/access-2010-specifications-HA010341462.aspx](http://office.microsoft.com/en-us/access-help/access-2010-specifications-HA010341462.aspx)。

在您的情况下，它可能是列数，因此请先尝试导入少于 255 的列。此外，它可能是列或数据类型中数据的大小（将文本导入数字等）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-05T17:19:48.543

我也刚刚遇到过这个问题，并找到了一个非常简单易行的解决方案。我注意到我的电子表格有一个自定义名称，所以我决定看看这是否导致了问题。我将其更改为“Sheet1”的默认名称，果然，它有效！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-22T18:59:20.443

下载并安装 Microsoft Access Database Engine 2010 Redistributable，然后修改 Microsoft Excel 中的数据库连接字符串以使用 ACE 作为提供程序。

更改（示例）：

```
Provider=Microsoft.Jet.OLEDB.4.0 
```

至：

```
Provider=Microsoft.ACE.OLEDB.12.0. 
```

Microsoft 正在制定解决方案，并将在即将发布的版本中提供更新。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-25T08:02:03.077

用这个

```
OleDbConnection conObj = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\a.XLS;Extended Properties=Excel 8.0;") 
```

而不是这个

```
OleDbConnection conObj = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\\a.XLS;Extended Properties=Excel 8.0;") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-29T08:45:51.793

将您的 Excel 工作表保存为“逗号分隔”的 .CSV 文件，然后将其作为文本文件上传。对我来说，这很好用。

问题是在 .xls(x) 中存在所有类型的布局问题。将其转换为 .CSV 会删除所有与布局相关的标记并将其转换为“原始”数据。

一切顺利！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-17T16:28:33.903

按照 RHiggins 的回答：

就我而言，Jet OleDb.4.0 抛出此错误 (oledbconnection.open())，因为工作簿 (.xls) 中的工作表名称太长。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-03T22:50:54.627

解决此问题时对我有用的一个解决方案是在进行导入和导出时打开正在执行导入/导出的 Excel 文件。

该问题似乎是由阻止数据事务在 CLOSED .xls 文件和其他外部数据库应用程序之间发生的补丁引起的。打开 excel 文件可以解决这个问题。

下面的一些示例代码示例突出了 VBA 的有效和无效：

**失败**

```
wbTarget.SaveAs strFilename, xlExcel8
wbTarget.Close    
ExportSheetToDB strFilename, strSheetName, "tblTemp" 
```

**作品**

```
wbTarget.SaveAs strFilename, xlExcel8
ExportSheetToDB strFilename, strSheetName, "tblTemp"
wbTarget.Close 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-13T19:53:26.517

Excel 和 Access 之间似乎存在错误。在某些情况下，我必须打开 Excel 文件，单击保存，然后关闭文件。然后我可以将它毫无错误地导入Access。

我还没有为 VBA 自动化找到解决方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-20T15:57:00.403

在我的情况下，电子表格链接到另一个电子表格。我正在导入原始工作表的子集。我创建了一个新工作表并将数据逐列复制到记事本，然后删除链接到新工作表。链接中有一些东西导致了问题。
顺便说一句：这是一组数据，因为我已经完成了从这个电子表格到这个数据库的导入序列超过 50 次。将数据减半适用于前半部分（较大的）数据，但不适用于后半部分。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-27T08:31:09.733

就我而言（我有同样的错误），问题是我将**Access DB 存储在**空间不足的网络驱动器上（没有足够的可用空间来完成导入）。我释放了空间并压缩了数据库；该错误没有再次出现。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-10T20:58:29.430

我有完全相同的错误。该电子表格是从另一个软件 (SAP) 创建的。由于它不是由 Office 创建的，因此 Excel 无法读取它（！？！）。我必须在 Excel 中打开它们，保存它，然后在 Access 中加载它，它就可以工作了！作为最坏的情况，假设您有几十个文件，您可以在导入之前通过 VBA 代码打开和关闭它们。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-05T05:02:29.097

嗨，我在导入 .xlsb 文件时也遇到了这个错误。之后，我将内容复制到另一个 xlsx 文件，然后导入此 xlsx 文件。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-10-31T06:40:26.587

我遇到了同样的问题，在 Windows7 中获得安全更新后，发生了这个错误。我们有太多的 excel 文件来执行打开/关闭操作，所以我决定尝试其他方式。

1.  当 Access 正常工作时返回一个还原点：在我的情况下它不起作用。软件配置的唯一变化是安全更新，似乎安全更新仍然会导致问题。

2.  减少行、列等：它对我不起作用；访问尝试访问的第一个文件有 10k 行，将此行减少到 3 不是解决方案。

3.  尝试修改连接字符串：它对我不起作用，也不是很合理；连接已经工作多年，为什么突然停止了？在某些情况下会，但这次不会。

4.  在我的情况下，卸载最新的安全更新是可行的。这是已卸载的安全更新。

![已卸载安全更新的屏幕截图](../Images/7b23649b975ce3efc9a083dfac7aec10.png)

祝你好运解决。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-10-31T09:39:26.923

已解决 Windows 7：

卸载安全更新 KB4041681 和 KB4041678（与 Excel 和 Jet/ACE 提供程序有关）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-02-14T11:21:43.897

从 XLSB 文件导入时出现此错误，将文件另存为 XLSX 文件，然后导入，应该可以

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-02-15T16:04:10.363

发现的另一个问题是，如果将 excel 文件保存为二进制 excel 工作表，只需将其重新保存为 excel 工作簿并且加载正常。

# ios - 公司名称 更改 iTunes Connect

> ID：10421915
> 
> 赞同：26
> 
> 时间：2012-05-02T21:20:36.960
> 
> 标签：ios, app-store-connect

我的公司正在经历一些重大变化，似乎无法更改公司名称（在 App Store 中您的应用程序上方显示的名称）。我不想创建新的开发者帐户，因为我的当前帐户下已经有成功的应用程序。Apple 必须有人可以帮助我更改公司名称。

任何指向我可以去的地方的链接都会很棒。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-02T21:25:59.553

在 Apple 的[帐户管理常见问题页面](https://developer.apple.com/support/ios/account-management.html)下，它会要求您就公司/组织名称更新或更改与他们联系。一旦您与他们联系，他们可能会要求提供相关文件并自行决定是否这样做。

联系表格可在以下网址找到：[https](https://developer.apple.com/contact/submit.php) ://developer.apple.com/contact/submit.php （注意：您需要使用您的 Apple ID 登录才能访问它）

# python - python 2.6：socket.error（修复 Trac）

> ID：10421926
> 
> 赞同：0
> 
> 时间：2012-05-02T21:21:18.803
> 
> 标签：python, exception, trac

我正在尝试修复在 Apache2 上使用 mod_fcgid 运行 Trac 0.11 时遇到的以下异常：

```
Unhandled exception in thread started by <bound method Connection.run of <trac.web._fcgi.Connection object at 0x88b5fec>>
Traceback (most recent call last):
  File "/usr/lib/python2.6/dist-packages/trac/web/_fcgi.py", line 661, in run
    except socket.error, e:
AttributeError: 'NoneType' object has no attribute 'error' 
```

我将 _fcgi.py 中的相关块修改为这样锁定：

```
def run(self):
    """Begin processing data from the socket."""
    self._keepGoing = True
    while self._keepGoing:
        try:
            self.process_input()
        except EOFError:
            break
        except socket.error, e:
            if e[0] == errno.EBADF:
                break
            raise
        except select.error, e:
            if e[0] == errno.EBADF: # Socket was closed by Request.
                break
            raise

    self._cleanupSocket() 
```

导致异常的行是`except socket.error, e:`. 阅读 Pydocs 我看到“socket”是一个类，应该有一个名为“error”的成员，那么为什么会出现这个异常呢？

我通常在编写 C 或 Java 代码并且从未在 Python 中做过任何事情，有人可以启发我吗？:)

谢谢，

猞猁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:43:23.143

你确定，你没有`socket`一个值为 的变量`None`吗？这个样本：

```
import socket
socket = None
print socket.error 
```

产生完全相同的错误。作为一个快速破解，您可以尝试`import socket as socketLib`在文件开头添加并用`except socketLib.error, e`... 替换您的行，但只是为了确定问题！

# python - 在没有 pip install 的情况下安装 django 应用程序

> ID：10421934
> 
> 赞同：0
> 
> 时间：2012-05-02T21:21:59.150
> 
> 标签：python, django, hosting, shared-hosting

在不使用 pip 的情况下安装 django 应用程序和 python 包的最佳方法是什么？

我将在 hostgator.com 上托管我的网站，并且无法使用 pip 安装 python 包，因为我无法访问 root 帐户。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:31:47.137

你知道[virtualenv](http://pypi.python.org/pypi/virtualenv)吗？我对 hostgator.com 没有任何经验，但 virtualenv 旨在允许您创建虚拟 Python 环境，以便在没有 root 访问权限的系统上安装您想要的任何 Python 包。

你只需 1）创建一个虚拟环境，2）激活它，3）使用 pip 安装你需要的东西。

完成此操作后，每次要运行使用已安装包的 Python 软件时，只需激活环境并启动 Python 脚本或应用程序即可。（如果您需要安装不同的包或不同版本的包，您可以拥有多个虚拟环境。所有这些都保持相互隔离，并与系统级 Python 及其站点包隔离。）

这是一个必不可少的 Python 工具，在上面的链接中得到了很好的解释。这是许多人认为有用的教程的[链接。](http://www.saltycrane.com/blog/2009/05/notes-using-pip-and-virtualenv-django/)

# concurrency - 顺序代码中的数据竞争

> ID：10421939
> 
> 赞同：0
> 
> 时间：2012-05-02T21:22:21.627
> 
> 标签：concurrency, race-condition, sequential

数据竞争在顺序代码中很普遍吗？如果是这样，程序员的工作是担心这些类型的数据竞争吗？

我向我提出了一个问题，似乎数据竞争实际上在顺序代码中很普遍，但是我没有遇到任何讨论并发之外的数据竞争的信息。顺序代码中何时发生数据竞争？这些数据竞争的实例是否足以让程序员处理它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:24:07.897

在顺序代码中没有多件事可以竞争。

至少，除非你与外部的东西交互，例如 I/O、网络、磁盘等。例如，你可能会做这样的事情（伪代码）：

```
if (directory_exists(dir_name)) {
    cd(dir_name);
} 
```

但当然，某些外部实体可能已经删除了两个 API 调用之间的目录。

# javascript - 通过 ajax 发送带有字母数字索引名称的数组

> ID：10421941
> 
> 赞同：2
> 
> 时间：2012-05-02T21:22:27.610
> 
> 标签：javascript, jquery, ajax, arrays, multidimensional-array

我正在尝试通过 jquery ajax 调用传递一个数组。但是，我需要在上面使用描述性索引，例如。项目 [“sku”] = 'abc';

如果我创建以下数组：

```
item[1] = "abc";
item[2] = "def"; 
```

并将它传递给下面的ajax调用，我在php端得到了一个正确的数组

```
$.ajax({
    type: "POST",
    url: "/ajax/add_to_cart.php",
    data: {items: item},
    success: function(msg){ }
}); 
```

但是，像这样创建数组

```
item["sku"] = "abc";
item["title"] = "product"; 
```

在 php 端什么也不产生

有什么技巧可以推动这样的阵列通过吗？我尝试过使用 jquery stringify 但这没有帮助

另外，我需要以类似的方式传递二维数组。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:31:20.000

您可以像这样构建和发送收集的产品数据：

```
var item = [{sku:"abc", title:"product1"}, {sku:"def", title:"product2"}, {sku:"ghi", title:"product3"}];

$.ajax({          
    type: "POST",
    url: "/ajax/add_to_cart.php",
    data: {items: JSON.stringify(item)},
    dataType: "json",
    success: function(msg){ }
}); 
```

json_decode() 将在 PHP 端帮助您：

```
<?php
    var_dump(json_decode($_REQUEST['items'], true));
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:32:13.217

我假设您正在使用 [] 文字或 new Array() 创建一个 Array 实例。尽管您正在寻找的数据结构在 JavaScript 中称为对象，但在其他环境中它们也可以称为关联数组、哈希图或字典。要在 JavaScript 中创建和填充对象，您可以执行以下操作：

```
var item = {};
item["sku"] = "abc";
item["title"] = "product"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:28:22.937

您将需要仔细查看 PHP 的`json_encode()`和`json_decode()`函数：[http](http://php.net/manual/en/function.json-decode.php) ://php.net/manual/en/function.json-decode.php （整个库确实会有所帮助）以及 jQuery 的`$.getJSON()`和`$.post()`函数：[http： //api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
<?php

$items_array = json_decode( $_REQUEST['items'], true );

foreach ( $items_array as $key=>$value ){
    // $key = 'sku', 'title', etc.
    // $value = 'abc', 'product', etc.
    // $value might include array( 'key'=>'value', 'key'=>'value' ) when multidimensional
} 
```

# windows - 在 cmd.exe 中执行批处理文件什么都不做

> ID：10421943
> 
> 赞同：1
> 
> 时间：2012-05-02T21:22:46.123
> 
> 标签：windows, shell, batch-file, windows-xp

在 Windows XP 机器 SP3 上，使用具有管理员权限的帐户，我尝试执行一个名为 test.bat 的简单批处理文件，其中包含：

```
echo Hello! 
```

使用 cmd.exe，我得到了这个结果：

```
D:\Dev>test.bat

D:\Dev> 
```

这表明批处理文件根本没有执行：它立即返回。

你能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:25:46.780

运行到您的控制台：

```
D:\Dev> echo echo Hello! > test.bat
D:\Dev> test.bat 
```

如果它有效（并且可能会），那么您做错了什么。

要弄清楚 yout 文件发生了什么，您也可以尝试

```
D:\Dev> more test.bat 
```

查看 test.bat 文件中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-17T12:44:21.427

我遇到的一个问题是当我在 Vim 中使用 UTF-16 编码时。通常`more`会在一行中显示您的代码或逐个字符。更改为 UTF-8 有所帮助。

# java - 在 Intellij IDEA 中运行 GUI 应用程序

> ID：10421947
> 
> 赞同：0
> 
> 时间：2012-05-02T21:23:10.207
> 
> 标签：java, swing, intellij-idea, mouse-listeners, jform-designer

我是 intellij idea 和 jFormDesigner 的新手。我想测试我的应用程序。我将 jFormDesigner 文件添加到我的项目中，创建了表单并添加了简单的按钮和文本区域。我为按钮添加了鼠标单击事件，但我不知道如何测试它。

这是事件处理程序：

```
private void startButtonMouseClicked(MouseEvent e) {
    resultTextField.setText("hello!");
} 
```

这里是由intellijidea生成的代码：

```
public class SysJournalForm extends JFrame {
    public SysJournalForm() {
        initComponents();
    }

    public static void main(String [] args)
    {
    }

    private void startButtonMouseClicked(MouseEvent e) {
        resultTextField.setText("hello!");
    }

    private void initComponents() {
        // JFormDesigner - Component initialization - DO NOT MODIFY  //GEN-BEGIN:initComponents
        // Generated using JFormDesigner Evaluation license - Vadim Mirgorod
        scrollPane1 = new JScrollPane();
        resultTextField = new JTextPane();
        startButton = new JButton();
        stopButton = new JButton();

        //======== this ========
        Container contentPane = getContentPane();
        contentPane.setLayout(null);

        //======== scrollPane1 ========
        {

            //---- resultTextField ----
            resultTextField.setText("test");
            scrollPane1.setViewportView(resultTextField);
        }
        contentPane.add(scrollPane1);
        scrollPane1.setBounds(5, 5, 530, 295);

        //---- startButton ----
        startButton.setText("\u0441\u0442\u0430\u0440\u0442");
        startButton.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                startButtonMouseClicked(e);
            }
        });
        contentPane.add(startButton);
        startButton.setBounds(5, 305, 130, startButton.getPreferredSize().height);

        //---- stopButton ----
        stopButton.setText("\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");
        contentPane.add(stopButton);
        stopButton.setBounds(140, 305, 130, stopButton.getPreferredSize().height);

        { // compute preferred size
            Dimension preferredSize = new Dimension();
            for(int i = 0; i < contentPane.getComponentCount(); i++) {
                Rectangle bounds = contentPane.getComponent(i).getBounds();
                preferredSize.width = Math.max(bounds.x + bounds.width, preferredSize.width);
                preferredSize.height = Math.max(bounds.y + bounds.height, preferredSize.height);
            }
            Insets insets = contentPane.getInsets();
            preferredSize.width += insets.right;
            preferredSize.height += insets.bottom;
            contentPane.setMinimumSize(preferredSize);
            contentPane.setPreferredSize(preferredSize);
        }
        pack();
        setLocationRelativeTo(getOwner());
        // JFormDesigner - End of component initialization  //GEN-END:initComponents
    }

    // JFormDesigner - Variables declaration - DO NOT MODIFY  //GEN-BEGIN:variables
    // Generated using JFormDesigner Evaluation license - Vadim Mirgorod
    private JScrollPane scrollPane1;
    private JTextPane resultTextField;
    private JButton startButton;
    private JButton stopButton;
    // JFormDesigner - End of variables declaration  //GEN-END:variables
} 
```

![intellij idea 和 jFromDesigner 项目](../Images/e01fb54115074ed117aab916f160f4de.png)

当我单击 jFormDesigner 表单中的测试表单时，表单可以工作但没有事件。如何测试事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:32:08.053

对于[JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)有没有更好的使用

1)整个[Swing JComponents的](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)[Swing Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)非常可扩展的解决方法

2）（最常见的）[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

因为

3）我认为[MouseListener](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)是错误的[Swing Listener](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html) for [JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:48:07.543

**你为什么不用模拟测试它？**那里有很多模拟框架。你可以使用 Mockito、JMock、JMockit 等等...... Mockito 将是一个好的开始。如果您想实际模拟 GUI 操作……那是另一个领域。**我建议你先模拟它，这样测试它。**

此外，该表单不是由 Intellij Idea 生成的，而是由 JFormDesigner 生成的——您可以使用它来抽象 GUI，而不是将其绑定到特定的 IDE——这是一个好主意。

另外，如果你要使用很多 Swing 组件，**我建议你使用 MVC 模式**- [http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller) - 它应该简化测试，维护和一般简化你的表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T19:17:20.673

您是否曾经将复选框标记为“自定义创建”？当您为组件添加自定义代码时，在本例中为 JButton，您必须在其属性检查器中标记此选项。

# jquery - JqG rid 的新模型表单上未显示 afterSubmit 的错误处理

> ID：10421961
> 
> 赞同：3
> 
> 时间：2012-05-02T21:24:23.507
> 
> 标签：jquery, jqgrid, error-handling

我试图在 JqGrid 上向用户显示服务器错误

这是我的代码：

```
function addRow() {
$("#updateList").jqGrid('editGridRow', "new", {
    editData: {
        Year: function () { return $('#year option:selected').val(); }
    }
     , afterSubmit: function (response, postdata) { return [false, "fdfdfdfd", "141"]; }
    , height: 400, width: 400, reloadAfterSubmit: true
}); 
```

}

我确实从服务器收到了带有 StatusCode 500 的 json 错误，我只是想测试一下，所以我把

```
return [false, "fdfdfdfd", "141"] 
```

但我总是看到默认的错误信息

“错误状态：'错误'。错误代码：500”

这是一个“新”行添加模型表单。不是内联编辑。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:42:04.033

有误会什么时候`afterSubmit`可以用。*如果您的服务器框架始终*生成成功的 HTTP 代码，并且您只能将有关错误的信息放在成功响应的正文中，则该功能可能会有所帮助。

在您的情况下，服务器返回状态代码 500。因此您应该改用[errorTextFormat](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events)。尝试

```
errorTextFormat: function (response) {
    return "ERROR: fdfdfdfd!";
} 
```

`errorTextFormat`例如，您可以在[此处](https://stackoverflow.com/a/5103844/315935)找到更有趣的实现。我建议您另外阅读[答案](https://stackoverflow.com/a/6803206/315935)并使用答案中[的演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithMsgInEditForm.htm)。

# asp.net - w3wp.exe 的多个实例

> ID：10421962
> 
> 赞同：12
> 
> 时间：2012-05-02T21:24:38.167
> 
> 标签：asp.net, iis, web-garden

当我只有一个网站和一个应用程序池时，我不明白为什么任务管理器中有两个 ASP.NET w3wp 进程。为什么有两个进程在运行？我已经用谷歌搜索了这个并查看了 MSDN，但找不到答案。

我正在尝试调试应用程序中的内存泄漏。我理解线程和多个线程生活在一个进程中的概念，但我不明白为什么会有多个进程。

我特意询问哪些场景会导致多个进程运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T21:34:29.203

查看此部分的应用程序池的高级设置，并确保指示的值设置为 1：

![IIS 最大工作进程](../Images/5afeb607ba77384dee7b55d369ce1b47.png)

# mongodb - Spring-Data mongodb查询存储在同一个集合中的多个类

> ID：10421966
> 
> 赞同：6
> 
> 时间：2012-05-02T21:25:01.593
> 
> 标签：mongodb, spring-data, mongodb-java, mongodb-query

使用 Spring-Data，您可以使用 @Document 注释来指定将对象保存到哪个集合。假设我有两个班级，学生和教师，都坚持到人员集合中。当我执行以下代码时：

```
mongo.find(new Query(), Teacher.class); 
```

结果同时包含学生和教师。查看 Spring-Data 创建的数据，每个文档都包含一个“_class”字段，该字段指示它来自哪个类。

这是不是在查找中用作过滤器以仅返回教师的字段？除了这样做之外，我如何只查询老师：

```
mongo.find(new Query().addCriteria(where("_class").is(Teacher.class.getCanonicalName()), Teacher.class); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:54:33.153

这或多或少是一个如何设计你的系列的问题。由于 Mongo 对类型一无所知，我们必须添加额外的元数据才能将文档彼此区分开来。因此，在查询时，您还需要将这些约束添加到查询中。请注意，您可以`_class`通过`DefaultMongoTypeMapper.DEFAULT_TYPE_KEY`.

我们考虑在查询中添加一些 API 来表达一个只想获取给定类型的文档，如下所示：

```
mongo.find(new Query(Teacher.class), Teacher.class); 
```

您必须两次声明域类仍然感觉有点奇怪（如果您想将结果限制为给定类型的文档但将它们映射到不同的类，这很有意义）。除此之外，我们只能将结果限制为*恰好携带该*类型的文档，因为类型存储为字符串，并且只有在已经加载类的情况下才能应用继承。因此，当查询具有类型的文档时，`Person`我们必须首先加载*所有*文档，尝试查找类型，进行类型检查并可能丢弃出于性能原因而次优的结果。

另一种选择是存储类可分配给的所有类型（几乎所有接口和超类，但`Object`可能除外），但这会导致存储大量数据。这可以通过在`@Document`注释中添加标志来解决。

底线：目前，没有其他办法，但如果您有如何改进的建议，请随时提出 JIRA 票。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-14T03:06:00.880

这是这个问题的最佳解决方案：

```
query.restrict(Teacher.class,Teacher.class); 
```

# magento - 通过 layout.xml 添加块 - magento

> ID：10421968
> 
> 赞同：0
> 
> 时间：2012-05-02T21:25:08.600
> 
> 标签：magento

如果这是一个新手问题，我是 Magento 的新手。

我正在从控制器添加这些块：

```
$this->_addContent($this->getLayout()->createBlock('abc/adminhtml_abc_edit'))
     ->_addLeft($this->getLayout()->createBlock('abc/adminhtml_abc_edit_tabs')); 
```

添加了块。但是现在我正在尝试通过 layout.xml 添加块。我尝试了以下方法：

```
<abc_adminhtml_abc_edit>
        <reference name="content">
            <block type="abc/adminhtml_abc_edit" name="form">
                <reference name="left">
                    <block type="abc/adminhtml_abc_edit_tabs" name="tabs"/>
                </reference>
            </block>
        </reference>
 </abc_adminhtml_abc_edit> 
```

但它没有成功，我找不到正确的方法......

什么是正确的方法？

谢谢！

Krt_马耳他

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:47:43.687

查看 Magento 的一些布局 xml 文件后，了解如何操作。这成功了：

```
<abc_adminhtml_abc_edit>
        <reference name="content">
            <block type="abc/adminhtml_abc_edit" name="form"/>
        </reference>
        <reference name="left">
            <block type="abc/adminhtml_abc_edit_tabs" name="tabs"/>
        </reference>
</abc_adminhtml_abc_edit> 
```

# jquery - 仅获取父表长度

> ID：10421969
> 
> 赞同：0
> 
> 时间：2012-05-02T21:25:21.563
> 
> 标签：jquery

我有一个带有嵌套表的表...

```
<table id="Table1">
    <tr>
        <td>
            Row 1 
        </td>
    </tr>
    <tr>
        <td>
            Row 2
            <table id="Table2">
                <tr>
                    <td>
                      Row 1 
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

我使用 jQuery 来查找`tr`行数...

```
var RowCount = $("#Table1 tr").length; 
```

如何编写 jquery 以仅查找父表的行数`Table1`而不是组合嵌套`Table2`？例如：我要查找的结果是 RowCount = 2 而不是 RowCount = 3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:26:14.153

```
// Using the DOM property:
var rowCount = $("#Table1")[0].rows.length;
// Or:
var rowCount = $("#Table1 > tbody > tr").length;
// Using the child selector, "parent > child" 
```

我已重命名`RowCount`为`rowCount`，因为按照惯例，只有构造函数名称以大写字母开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:32:19.030

下面的行使用 jQuery 的 .children 来获取所选对象的直接后代，并可选择使用选择器参数过滤结果。在您的情况下，分别是 table1 和“tr”。

`var rowCount = $("#Table1").children("tr").length;`

# clips - CLIPS 多个和

> ID：10421970
> 
> 赞同：1
> 
> 时间：2012-05-02T21:25:45.960
> 
> 标签：clips

假设我有这样的规则：

```
(defrule get_next_N_poz
    ?id <- (get_next_poz $?)
    (world (limit $?) (ball ?b1 ?b2) (men $? ?x ?y - $?) (id ?))

    (and
    (test (= ?x ?b1))
    (test (= ?y (- ?b2 1))))
        => 
        (printout t "north ready position:" ?x ?y)
        (modify ?id (get_next_poz 1))) 
```

如何添加新的“和”？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T22:37:34.787

这取决于您要实现的逻辑。无论如何，现有的*和*你拥有的都是多余的，但如果你想要第二个，你只需在最后一个结束后添加它：

```
 (and
    (test (= ?x ?b1))
    (test (= ?y (- ?b2 1))))

 (and
    (test (= ?x ?b2))
    (test (= ?y (+ ?b1 1)))) 
```

如果你想要这些条件中的一个或另一个，你会这样做：

```
 (or (and
       (test (= ?x ?b1))
       (test (= ?y (- ?b2 1))))

    (and
       (test (= ?x ?b2))
       (test (= ?y (+ ?b1 1))))) 
```

您可以在单个测试条件元素中使用和/或布尔函数，而不是使用和/或条件元素：

```
 (test (or (and (= ?x ?b1)
                (= ?y (- ?b2 1)))
           (and (= ?x ?b2)
                (= ?y (+ ?b1 1))))) 
```

# c++ - 在 C++ 中格式化 Cout 输出

> ID：10421971
> 
> 赞同：1
> 
> 时间：2012-05-02T21:25:59.087
> 
> 标签：c++

这是预期的输出：

```
COUNT | WORD 
------+------
   1  | .3
   1  | .3.4
   1  | 3
   2  | 12.34
   1  | test1.12.34
   3  | this 
```

这是我的正确代码：

```
std::cout << "COUNT | WORD" << '\n';
std::cout << "------+------" << '\n';
std::cout << std::setw(4) << "1" << std::setw(3) << '|' <<  std::setw(3) << ".3" << '\n';
std::cout << std::setw(4) << "1" << std::setw(3) << '|' <<  std::setw(3) << ".3.4" << '\n';
std::cout << std::setw(4) << "1" << std::setw(3) << '|' <<  std::setw(3) << "3" << '\n';
std::cout << std::setw(4) << "2" << std::setw(3) << '|' <<  std::setw(3) << "12.34" << '\n';
std::cout << std::setw(4) << "1" << std::setw(3) << '|' <<  std::setw(3) << "test1.12.34" << '\n';
std::cout << std::setw(4) << "3" << std::setw(3) << '|' <<  std::setw(3) << "this" << '\n'; 
```

不幸的是，我的输出很乱

```
COUNT | WORD
------+------
   1  | .3
   1  |.3.4
   1  |  3
   2  |12.34
   1  |test1.12.34
   2  |this 
```

谁能建议我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:28:18.290

而不是拥有

```
std::cout << std::setw(4) << "1" << std::setw(3) << '|' <<  std::setw(3) << ".3" << '\n'; 
```

对于每一行，在“|”之后添加一个空格 特点：

```
std::cout << std::setw(4) << "1" << std::setw(3) << "| " <<  std::setw(3) << ".3" << '\n'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:29:57.210

为什么不是这个::

```
std::cout << "COUNT | WORD" << '\n';
std::cout << "------+------" << '\n';
std::cout << std::setw(4) << "1" << std::setw(3) << '|' <<  ' ' << ".3" << '\n';
std::cout << std::setw(4) << "1" << std::setw(3) << '|' <<  ' ' << ".3.4" << '\n';
std::cout << std::setw(4) << "1" << std::setw(3) << '|' <<  ' ' << "3" << '\n';
std::cout << std::setw(4) << "2" << std::setw(3) << '|' <<  ' ' << "12.34" << '\n';
std::cout << std::setw(4) << "1" << std::setw(3) << '|' <<  ' ' << "test1.12.34" << '\n';
std::cout << std::setw(4) << "3" << std::setw(3) << '|' <<  ' ' << "this" << '\n'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:38:47.853

这样做将设置左侧填充字符。

```
cout.fill('-');
cout.width(40);
cout<< "LINE1" <<endl;

cout.fill('-');
cout.width(40);
cout<< 3 <<endl;

cout.fill('-');
cout.width(40);
cout<< 3.4 <<endl;

cout.fill('-');
cout.width(40);
cout<< "TEST " << 12.34 <<endl; 
```

# jquery - SugarCRM REST API 和 jquery

> ID：10421977
> 
> 赞同：0
> 
> 时间：2012-05-02T21:26:18.493
> 
> 标签：jquery, sugarcrm, restful-architecture

我正在尝试使用 jQuery 和 Sugar REST API 登录到 SugarCRM。到目前为止我没有运气。以下是代码片段：

```
 var returnVal = $.ajax(,{
                type: "POST",
                url: "http://127.0.0.1:101/sugarcrm/service/v4/rest.php?method=login",
                dataType: "json",
                method: login,
                success: function(response){
                    alert("Done it");
                },
                data: data1,
                failure: failedAjax
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:51:17.257

试试这个片段，看看它是否效果更好......

```
$.ajax({
  type: "POST",
  url: "http://127.0.0.1:101/sugarcrm/service/v4/rest.php",
  data: { method: "login", input_type: "JSON", response_type: "JSON", rest_data: data1 },
  dataType: "json"
  success: function(result){
      if ( result.id ) {
          alert("Success! Session ID is " + result.id);
      }
      else {
          alert("Error: " + result.name + " - " + result.description);
      } 
      }
  },
  failure: failedAjax
}); 
```

# python - Python REPL：提前发出命令以在块后执行

> ID：10421982
> 
> 赞同：1
> 
> 时间：2012-05-02T21:26:52.730
> 
> 标签：python, read-eval-print-loop

这是一个有点奇怪的问题。它是在一个公开 Python API 的工具的上下文中出现的，我们花了很多时间从 REPL 交互式查询。导致问题的特定成语是这样的：

```
for var in slow_generator_of_giant_list():
    stats = update(stats, var)
print stats 
```

要在 REPL 中输入，我可以输入：

```
>>> for var in slow_generator_of_giant_list():
...    stats = update(stats, var)
... 
```

如果我现在尝试键入`print`，由于缩进不当，我会收到语法错误。（否则我将打印放在循环中并在每次迭代时执行。）

但是如果我按回车键进入下一行，循环会立即运行，我必须等待它完成，或者在可能出现的输出面前输入打印命令，等等。

显然我可以定义一个包含上述内容的函数，无论如何它可能值得保存到一个文件中，但在一般情况下，我们正在动态构建这些，如果有一种方法来“调度”一个命令会很好在 REPL 的循环结束后运行。在带有块分隔符的语言中，我当然可以将它放在结束分隔符（以及任何必要的语句分隔符）之后。但是我和我的同事都很难在这里做类似的事情。

是否存在对 Pythonic 语法的丑陋滥用，会达到我和我的同事想不到的伎俩？或者推荐一种避免问题的方法，同时仍然可以轻松地将临时交互式查询组合在一起？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:56:38.857

不漂亮，但这应该工作：

```
>>> mygen = slow_generator_of_giant_list()
>>> try:
...     while True: stats = update(stats, mygen.next())
... except StopIteration:
...     print stats
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:29:45.293

我只想说你会发现不使用交互式 shell 会更容易。

保存文件并运行它并不费力。只要您使用它，您只需保留它。

我实际上已经在 SO 上找到了这个答案。我在我的文本编辑器中打开一个文件，并在正确的目录中使用终端，并将其用作模拟答案的暂存器。

# ipad - 将 iPad 故事板添加到现有项目

> ID：10421984
> 
> 赞同：4
> 
> 时间：2012-05-02T21:27:25.013
> 
> 标签：ipad, storyboard

我有一个适用于 iphone 且几乎完成的应用程序，我也想让它在 ipad 上运行。我使用 iphone 故事板。如何添加 iPad 故事板并将其与代码链接？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T22:14:43.107

我以前没有这样做过，但解决方案不只是为您的 iPad 界面添加一个单独的故事板文件吗？选择文件 -> 新建 -> 文件。然后在 iOS / 用户界面部分，点击故事板并点击下一步。确保选择 iPad 作为设备系列。

在您的 iOS 应用程序目标中，将设备从 iPhone 更改为 Universal。向下滚动并在 iPad 部署信息部分中为您的 iPad 选择 Storyboard 文件。

其余的应该很像制作你的 iPhone 应用程序。您必须制作 iPad UI 和连接按钮、制作图标等。

# iphone - GameCenter 集成 并发症？

> ID：10421985
> 
> 赞同：1
> 
> 时间：2012-05-02T21:27:25.543
> 
> 标签：iphone, ios, xcode, game-center

我调用下面的代码在屏幕顶部添加 Game Center 用户横幅弹出，但它显示 Game 无法被 Game Center 识别：

我将此添加到我的 addDidFinishLaunching 中：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application { 
[[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error){
if (error ==nil) {
NSLog(@"Success");
} else {
NSLog(@"Fail");
}
}]; 
```

要查看排行榜，我需要添加什么代码才能正确调用它？

```
-(void)viewscores:(SPEvent*)event{
CODE HERE
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:40:52.270

你可以这样尝试：

```
GKLeaderboardViewController *leaderboardVC = [[[GKLeaderboardViewController alloc]init]autorelease];
if (leaderboardVC !=nil) {
    leaderboardVC.leaderboardDelegate = self;
    [self presentViewController:leaderboardVC];
} 
```

我希望它有帮助:-)

# c++ - 为什么我没有收到 WM_MENUCHAR 消息？

> ID：10421990
> 
> 赞同：3
> 
> 时间：2012-05-02T21:27:35.320
> 
> 标签：c++, windows, winapi, explorer, windows-shell

我实现了一个`IContextMenu3`界面，并试图为我自己的自定义加速器捕获击键。问题是，如果我将鼠标悬停在根菜单中的子菜单上，我不会收到任何`WM_MENUCHAR`消息，而如果我将鼠标悬停在其中一个子菜单内的子菜单上，那么我会收到。

我知道`WM_INITMENUPOPUP`只有在有孩子的情况下才会发送消息。有`WM_MENUCHAR`一个警告，没有加速器绑定到键。我知道要注意这一点，因为当我按下一个键时，我会听到独特的“无加速器”哔声。

还有另一个我不知道的警告吗？

这是我能得到的重现问题的最小代码：

```
 HRESULT CFolderViewImplContextMenu::QueryContextMenu(HMENU hmenu, UINT uMenuIndex, UINT idCmdFirst, UINT idCmdLast, UINT /* uFlags */)
{
UINT uID = idCmdFirst;
HMENU hSubmenu = CreatePopupMenu();

MENUITEMINFO mii = { 0 };
mii.cbSize = sizeof(MENUITEMINFO);
mii.fMask = MIIM_SUBMENU | MIIM_ID | MIIM_STRING;
mii.dwTypeData = str_toWchar("test");
mii.wID = uID++;
mii.hSubMenu = hSubmenu;    

InsertMenuItem ( hmenu, 0, TRUE, &mii );
InsertMenu ( hSubmenu, 0, MF_BYPOSITION, uID++, L"&Notepad" );
InsertMenu ( hSubmenu, 1, MF_BYPOSITION , uID++, L"&Internet Explorer" );

HMENU hSubmenu2 = CreatePopupMenu();
MENUITEMINFO mii2 = {0};
mii2.cbSize = sizeof(MENUITEMINFO);

mii2.fMask  = MIIM_ID | MIIM_TYPE | MIIM_SUBMENU;
mii2.fType  = MFT_OWNERDRAW;
mii2.wID    = uID++;
mii2.hSubMenu = hSubmenu2;
InsertMenuItem ( hSubmenu, 0, TRUE, &mii2 );

InsertMenuA ( hSubmenu2, 0, MF_BYPOSITION, uID++, "");

return MAKE_HRESULT ( SEVERITY_SUCCESS, FACILITY_NULL, uID - idCmdFirst );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:49:33.100

`WM_MENUCHAR`仅为子菜单转发。（它不能为顶级菜单项转发，因为那将是 Catch-22。您希望将其转发到键对应的菜单项的上下文菜单处理程序，但您不能这样做直到你有答案`WM_MENUCHAR`！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:57:31.303

怎么样：如果您正在处理 IContextMenu3 消息，因此是 WM_DRAWITEM，您可以使用 WindowFromDC() 从 WM_DRAWITEM 获取菜单窗口的 HWND，然后将其子类化并捕获 WM_KEYDOWN 或做任何您喜欢的事情。我试过了（正在做一些其他的事情）并且它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:09:33.697

问题是子菜单中的第一项。如果子菜单中的第一项也是子菜单，则消息不会通过。所以我把一个普通的物品放在那里。

# javascript - 在 HTML 文件中引用 HTML 文件？

> ID：10421991
> 
> 赞同：0
> 
> 时间：2012-05-02T21:27:37.423
> 
> 标签：javascript, html, css

我的网站有 3 个 HTML 页面。它们都有相同的大部分。有没有办法可以将它们链接到另一个 HTML 文件，所以我只需要进行一次更改，就像你可以使用 JavaScript 和 CSS 一样？

这就是我所说的 JavaScript 和 CSS：

```
<link type="text/css" rel="stylesheet" href="template.css" />
<script src="js.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:31:07.570

最好的方法是利用服务器端包括：

在 PHP - [http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

如果您还需要严格使用 HTML 来执行此操作，您可以使用框架 (ew)，但我强烈建议您不要这样做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:52:19.323

有静态生成器：[jekyll](https://github.com/mojombo/jekyll/wiki)，[webgen](http://webgen.rubyforge.org/)

（基于我很久以前提出的一个问题：[在静态 HTML 网站中管理重复代码的最佳方法是什么](https://stackoverflow.com/questions/1088198/what-is-the-best-way-to-manage-duplicate-code-in-static-html-websites)）

# javascript - 如何动态居中图像？

> ID：10421992
> 
> 赞同：3
> 
> 时间：2012-05-02T21:27:44.030
> 
> 标签：javascript, jquery, html, css, dynamic

使用 css 和 javascript/jquery，如何将我显示的图像垂直居中在页面下方？让我画一个图表。这就是我所拥有的...

```
-------
|     |
|     |
-------
----------
|        |
|        |
----------
------
|    |
|    |
------ 
```

这就是我要的

```
 -------
  |     |
  |     |
  -------
-----------
|         |
|         |
-----------
   -----
   |   |
   |   |
   ----- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:29:11.950

在居中的图像类上设置以下 CSS：

```
display: block;
margin: 1em auto; /* the key here is auto on the left and right */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T21:31:04.800

如果您将每个图像放在 a`<div class="img">`中，则将它们的样式设置为；

```
div.img{ 
    margin: 0 auto;
} 
```

*调整宽度以满足您的需求。

或者，您可以将 的宽度设置`<div class="img">`为 100% 并将文本居中；

```
div.img{
    width: 100%;
    text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:32:10.733

一个小片段将完成此操作

```
display: inline-block;
margin: 1em auto; 
```

使用 jQuery，您可以设置如下属性：

```
$("img#selector").css({
    'display':'inline-block',
    'margin' : '1em auto'
}); 
```

# php - 重新上传文件后保留所选值

> ID：10421999
> 
> 赞同：0
> 
> 时间：2012-05-02T21:28:07.283
> 
> 标签：php, javascript, jquery

我有这段代码，当用户单击将重新上传文件的按钮时，它将获取选定的值。我尝试使用 window.name 但数据仍然丢失，我可能会以错误的角度进行操作，但我希望你能帮助我。再次上传文件后，有没有办法让 myVal 不被清空？上传和选择值属于不同的表单，我不能只使用数组，因为这意味着我应该提交选择值所在的表单。

谢谢你

```
function testcsv()
    {
        var myVal = $('#csv_map').find('.sqlopt').map(function() {
                                       return $(this).val();

                                       }).get().join(',');
        var select_val = myVal.split(',');

        alert(select_val);
        window.name = myVal;

        $('#csvtest').click(
        function()
        {
        $('#csv_form').submit();
        alert(window.name);
        }
        );

        // $('#sqlbox_1').val(test[0]);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:52:47.763

在您的上传表单中放置一个隐藏字段并在表单提交之前更新它（即当用户上传文件时）。原型：

```
<!-- Upload form -->
<form id="csv_form">
<!-- form definition omitted (fields, labels, etc) ... -->

<!-- and this is our hidden field -->
<input type="hidden" name="select_val" />
</form>

<!-- Form with SELECTs -->
<form id="csv_map">
<select class="sqlopt"> ... </select>
<select  class="sqlopt"> ... </select>
<!-- rest of the form definition omitted ... -->
</form>

<!-- Put this JS somewhere -->
<script>
$(document).ready(function() {
  $('#csv_form').submit(function() {
    var myVal = $('#csv_map').find('.sqlopt').map(function() {
      return $(this).val();
    }).get().join(',');

    // Update value of hidden field 
    $(this).find('input[name="select_val"]').val(myVal); // will contain comma-separated string of values
  });
});
</script> 
```