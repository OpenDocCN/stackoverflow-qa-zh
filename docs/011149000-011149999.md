# StackOverflow 问答 11149000-11149999

# objective-c - 条件编译：初始化元素不是编译时常量

> ID：11149009
> 
> 赞同：1
> 
> 时间：2012-06-22T01:10:37.270
> 
> 标签：objective-c, ios

我必须像这样将一个变量分配给一个常量（下面的代码在我的文件代码的开头，之前`@implementation`）：

```
#ifdef DEBUG
NSString *hostStr=[[NSString alloc]init];
hostStr=@"xxx.mycompany.com";
static NSString * const host = hostStr;
#endif 
```

如果我喜欢这样：

```
#ifdef DEBUG
static NSString * const host = @"xxx.mycompany.com";
#endif 
```

那可行。

实际上，在我的真实案例中，`host`将包含一个全局值的值（在应用程序委托中声明并在另一个视图控制器中初始化）。但是为了简化我的问题，我使用了这个例子（因为这两种情况都给了我同样的错误）。

请问我该如何解决这个问题。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T04:55:42.107

这里有几个问题。

**在任何函数之外**设置的常量不能是“动态的”。这意味着编译器必须在程序运行之前知道常量值是什么。如果你这样说：

```
static int x = myFunction(459); 
```

在程序实际运行之前，编译器无法知道 myFunction() 将返回什么。

这就是为什么：

```
NSString *hostStr=[[NSString alloc]init]; 
```

导致语法错误。编译器在生成常量时**不会**执行任何代码。

* * *

解决方案很简单：

```
NSString *host=@"www.mycompany.com"; 
```

请注意，我没有使用“静态”限定词。这将使“主机”仅可用于声明它的文件中的代码。删除“静态”限定符使其成为全局。

要从另一个文件访问这个全局变量，另一个文件需要声明

```
extern NSString *host; 
```

此时另一个文件将能够看到“主机”的内容。

还有一点需要指出的是：

```
NSString *hostStr=[[NSString alloc]init];
hostStr=@"xxx.mycompany.com"; 
```

并没有真正做太多。您使用 alloc/init 创建一个 NSString，然后立即为其分配一个常量，将您创建的 NSString 移到一边，而不处理它，从而造成内存泄漏。（如果您启用了 ARC，那么这不是问题。ARC 无所不知。）

# java - java webstart应用启动时间太慢

> ID：11149011
> 
> 赞同：1
> 
> 时间：2012-06-22T01:10:53.303
> 
> 标签：java, performance, java-web-start

我有一个带有许多依赖 jar（大约 20 个）的 java webstart 应用程序，它在开发环境中作为独立应用程序快速启动。但是，当它部署在 java webstart 中时，启动时间很慢（1 分钟左右）。有没有办法改善启动时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T08:53:31.080

如果您从 Windows XP 或 Windows 7 启动 Java Web Start 应用程序，请尝试此操作。

转到java控制面板。在“常规”选项卡下打开“网络设置”并选择**“直接连接”**而不是“使用浏览器设置”。

“用户浏览器设置”是全新 java 安装的默认设置。

当我使用 java web start 时（我没有研究原因），这使其启动速度提高了 5 到 10 倍。在使用 Java 6 和 Java 7 的 Windows XP 和 Windows 7 上进行了测试。

# gradle - 使用 Gradle 将 rpm 工件发布到 yum 快照存储库时遇到问题

> ID：11149012
> 
> 赞同：0
> 
> 时间：2012-06-22T01:11:06.177
> 
> 标签：gradle, rpm, yum

我一直在尝试使用 Gradle（安装在 repo 上的 nexus-yum 插件）将 rpm 文件（使用 Gradle-custom 插件构建）发布到 yum 快照 repo。但是，上传失败并且我收到错误 400。我进一步了解这是因为我的构建脚本试图将我的 rpm 工件上传到发布存储库而不是快照存储库。如果有人能分享关于我哪​​里可能出错的想法，那就太好了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:44:52.883

您是否指定了存储库的快照区域？

答案：[使用 gradle 将 features.xml 部署到 nexus？](https://stackoverflow.com/questions/13631260/using-gradle-to-deploy-features-xml-to-nexus/13647231#13647231)解释如何更新您的 maven settings.xml 以从公共 repo 中排除位置并将档案上传到发布区域（同样适用于快照）

当然，如果您要发布到快照目录，则必须具有 -SNAPSHOT 扩展名。

# java - 音频库“soundbank-deluxe.gm”：如何找到连音“乐器/节目编号”？

> ID：11149013
> 
> 赞同：0
> 
> 时间：2012-06-22T01:11:06.687
> 
> 标签：java, midi

我正在做一个“自由选择项目”作为家庭作业，我决定做一架钢琴。为了播放声音，我使用带有“soundbank-deluxe.gm”的 MIDI 通道。因为这是我以前从未做过的事情，所以我去找了一个教程，最后得到了以下代码：

```
 // global variables
      private MidiChannel channel;
      private Synthesizer synthesizer;

      // in constructor
      channel = synthesizer.getChannels()[0];
      channel.programChange(0); // this corresponds to PIANO 
```

看起来值 0 对应于此音库中的钢琴。26 是吉他，16 是奥格……坦率地说，我不需要其他任何东西，但出于好奇，我去寻找一张“地图”来找出我可以演奏的其他乐器……但我找不到它！

有人知道我在哪里可以找到通信工具/程序 nuber 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:03:38.317

其实我想我找到了解决方案。元组不依赖于库，而是依赖于 MIDI 本身。我认为我必须寻找的是“MIDI 数字”。

# javascript - 将 ... 放在出现在 div 中的文本中，并在 javascript 中隐藏溢出

> ID：11149017
> 
> 赞同：0
> 
> 时间：2012-06-22T01:11:32.770
> 
> 标签：javascript, css

我有一个带有这个 CSS 类的 div：

```
.textodiv{ height:29px;overflow:hidden;} 
```

出现的文本大小变化很大。使用上面的 CSS，它显示了大约 2 行并隐藏了其余部分。所以你有我想要的。问题是我想在正在显示的文本的末尾放置三个点以给出连续性的想法。但是文本显示多远？我试图限制字符的数量，但不是固定大小的字体和换行符根据单词的大小而变化，这个解决方案没有效果。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:45:34.520

对于单行方法，您可以通过 CSS 执行此操作，将以下内容添加到您的 css 规则中：

```
text-overflow: ellipsis;
white-space: nowrap; 
```

如果你想要多行，你将不得不使用 JavaScript 方法，可以在以下位置找到：
[Cross browsers mult-lines text overflow with ellipsis added within a width&height fixed div?](https://stackoverflow.com/q/3404508/1441046)

# c++ - 随机排列

> ID：11149018
> 
> 赞同：5
> 
> 时间：2012-06-22T01:11:33.080
> 
> 标签：c++, algorithm, random, mapping, permutation

我很难找到一种体面的方法来随机改组中的元素，`std::vector`并在一些操作之后恢复原始顺序。我知道这应该是一个相当琐碎的算法，但我想我太累了......

由于我被限制使用自定义随机数生成器类，我想我不能使用`std::random_shuffle`，这无济于事，因为我还需要保留原始顺序。所以，我的方法是创建一个`std::map`用作原始位置和随机位置之间的映射，如下所示：

```
std::map<unsigned int, unsigned int> getRandomPermutation (const unsigned int &numberOfElements)
{
    std::map<unsigned int, unsigned int> permutation;

    //populate the map
    for (unsigned int i = 0; i < numberOfElements; i++)
    {
        permutation[i] = i;
    }

    //randomize it
    for (unsigned int i = 0; i < numberOfElements; i++)
    {
        //generate a random number in the interval [0, numberOfElements)
        unsigned long randomValue = GetRandomInteger(numberOfElements - 1U);

        //broken swap implementation
        //permutation[i] = randomValue;
        //permutation[randomValue] = i;

        //use this instead:
        std::swap(permutation[i], permutation[randomValue]);
    }

    return permutation;
} 
```

我不确定上述算法是否是随机排列的正确实现，因此欢迎任何改进。

现在，这就是我如何设法利用这个排列图：

```
std::vector<BigInteger> doStuff (const std::vector<BigInteger> &input)
{
    /// Permute the values in a random order
    std::map<unsigned int, unsigned int> permutation = getRandomPermutation(static_cast<unsigned int>(input.size()));

    std::vector<BigInteger> temp;

    //permute values
    for (unsigned int i = 0; i < static_cast<unsigned int>(input.size()); ++i)
    {
        temp.push_back(input[permutation[i]]);
    }

    //do all sorts of stuff with temp

    /// Reverse the permutation
    std::vector<BigInteger> output;
    for (unsigned int i = 0; i < static_cast<unsigned int>(input.size()); ++i)
    {
        output.push_back(temp[permutation[i]]);
    }

    return output;
} 
```

有些东西告诉我，这个算法我应该只能使用一个`std::vector<BigInteger>`，但是，现在，我无法找出最佳解决方案。老实说，我并不真正关心 中的数据`input`，所以我什至可以将其设为非常量，覆盖它，然后跳过创建它的副本，但问题是如何实现算法？

如果我做这样的事情，我最终会射中自己的脚，对吧？:)

```
for (unsigned int i = 0; i < static_cast<unsigned int>(input.size()); ++i)
{
    BigInteger aux = input[i];
    input[i] = input[permutation[i]];
    input[permutation[i]] = aux;
} 
```

* * *

**编辑：**在史蒂夫关于使用“Fisher-Yates”洗牌的评论之后，我`getRandomPermutation`相应地改变了我的功能：

```
std::map<unsigned int, unsigned int> getRandomPermutation (const unsigned int &numberOfElements)
{
    std::map<unsigned int, unsigned int> permutation;

    //populate the map
    for (unsigned int i = 0; i < numberOfElements; i++)
    {
        permutation[i] = i;
    }

    //randomize it
    for (unsigned int i = numberOfElements - 1; i > 0; --i)
    {
        //generate a random number in the interval [0, numberOfElements)
        unsigned long randomValue = GetRandomInteger(i);

        std::swap(permutation[i], permutation[randomValue]);
    }

    return permutation;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T01:42:28.690

如果您要“随机化”一个包含 n 个元素的向量，您可以创建另一个`std::vector<size_t> index(n)`， set `index[x] = x`for `0 <= x < n`，然后 shuffle `index`。然后您的查找采用以下形式：`original_vector[index[i]]`. 原始向量的顺序从未改变，因此无需恢复顺序。

> ...限制使用自定义随机数生成器类，我想我不能使用`std::random_shuffle`...

你注意到这个超载了吗？

```
template <class RandomAccessIterator, class RandomNumberGenerator>
void random_shuffle ( RandomAccessIterator first, RandomAccessIterator last,
                    RandomNumberGenerator& rand ); 
```

有关如何使用兼容对象包装随机数生成器的详细信息，请参阅[http://www.sgi.com/tech/stl/RandomNumberGenerator.html](http://www.sgi.com/tech/stl/RandomNumberGenerator.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T02:00:32.883

如果您正在寻找代码中的特定错误：

```
permutation[i] = randomValue;
permutation[randomValue] = i; 
```

是错的。请注意，完成后，每个值不一定会在地图的值中出现一次。所以这不是一个排列，更不用说一个均匀分布的随机排列了。

生成随机排列的正确方法是托尼所说的，`std::random_shuffle`在最初表示恒等排列的向量上使用。或者，如果您想知道如何正确执行随机播放，请查看“Fisher-Yates”。一般来说，任何`N`从随机选择统一的方法`0 .. N-1`都注定要失败，因为这意味着它有`N^N`可能运行的方式。但是有可能的项目`N!`排列，并且通常不能被 整除。因此，每个排列不可能是相同数量的随机选择的结果，即分布不均匀。`N``N^N``N!`

> 问题是如何实现算法？

因此，您有您的排列，并且您想根据该排列重新排序`input`原位的元素。

要知道的关键是每个排列都是“循环”的组合。也就是说，如果你从一个给定的起点重复地遵循排列，你就会回到你开始的地方（这条路径就是那个起点所属的循环）。在给定的排列中可能有多个这样的循环，如果`permutation[i] == i`对于某些`i`，则循环的`i`长度为 1。

循环都是不相交的，也就是说每个元素恰好出现在一个循环中。因为循环不会相互“干扰”，所以我们可以通过应用每个循环来应用排列，并且我们可以按任何顺序执行循环。因此，对于每个索引，`i`我们需要：

*   检查我们是否已经完成`i`。如果是这样，请转到下一个索引。
*   放`current = i`
*   `index[current]`与交换`index[permutation[current]]`。So`index[current]`被设置为它的正确值（循环中的下一个元素），并且它的旧值沿着循环向前“推”。
*   标记`current`为“完成”
*   如果`permutuation[current]`是`i`，我们已经完成了循环。所以循环的第一个值最终出现在循环的最后一个元素之前占据的位置，这是正确的。继续下一个索引。
*   设置`current = permutation[current]`并返回交换步骤。

根据所涉及的类型，您可以围绕交换进行优化 - 最好将复制/移动到临时变量和每个循环的开始，然后在循环的每个步骤执行复制/移动而不是交换，并且最后复制/移动临时到循环结束。

反转过程是相同的，但使用排列的“逆”。`inv`排列的逆`perm`，是排列使得`inv[perm[i]] == i`对于 each `i`。您可以计算逆并使用上面的确切代码，也可以使用类似于上面的代码，除了沿每个循环沿相反方向移动元素。

所有这一切的替代方案，因为您自己实现了 Fisher-Yates - 当您运行 Fisher-Yates 时，对于您执行的每次交换，您都会记录在`vector<pair<size_t,size_t>>`. 然后你不必担心周期。您可以通过应用相同的交换序列将排列应用于向量。您可以通过应用相反的交换序列来反转排列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:03:08.207

请注意，根据您的应用程序，如果您有一个真正均匀分布的排列很重要，那么您不能使用任何算法多次调用典型的伪随机数生成器。

原因是大多数伪随机数生成器，例如 clib 中的那个，都是线性同余的。那些有一个弱点，他们会生成在平面上聚集的数字 - 所以你的排列不会完全均匀分布。使用更高质量的生成器应该可以解决这个问题。

见[http://en.wikipedia.org/wiki/Linear_congruential_generator](http://en.wikipedia.org/wiki/Linear_congruential_generator)

或者，您可以在 0..(n!-1) 范围内生成一个随机数，并将其传递给 unrank 函数进行排列。对于足够小的 n，您可以存储它们并获得恒定时间算法，但如果 n 太大，则最好的 unrank 函数是 O(n)。无论如何，应用得到的排列将是 O(n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T01:15:55.303

给定一个有序的元素序列，`a,b,c,d,e`您首先创建一个新的索引序列：`X=(0,a),(1,b),(2,c),(3,d),(4,e)`. 然后，您随机打乱该序列并获取每对的第二个元素以获得随机序列。要恢复原始序列，您可以`X`使用每对的第一个元素对集合进行递增排序。

# git - 使用 git commit -a 后，如何恢复

> ID：11149020
> 
> 赞同：2
> 
> 时间：2012-06-22T01:11:43.880
> 
> 标签：git

> **可能重复：**
> [Git undo last commit](https://stackoverflow.com/questions/927358/git-undo-last-commit)

使用 git commit 后，如何丢弃此提交并恢复到原始状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T01:13:26.437

`git reset HEAD^`将撤消最后一次提交，并且您在该提交中所做的更改将被取消但仍然保留。

`git reset HEAD^ --hard`将撤消提交并删除上次提交中所做的更改。

同样，`git reset HEAD^^`将返回 2 个提交。

[Git Community Book](http://git-scm.com/book)是学习使用 git 的绝佳参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T01:13:05.220

您可以使用以下命令“撤消”这样的提交：

```
git reset HEAD^ 
```

您在提交中更改的文件将在您的工作目录中保持修改（请参阅 参考资料`git status`）。如果您使用`git reset --hard HEAD^`，那么您在最近一次提交中所做的更改也将被丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T01:14:51.313

如果您想放弃所有更改而无法继续，请使用：

```
git reset --hard HEAD 
```

在这里， HEAD 是您之前任何提交的 ID。要仅回滚一次提交，请使用以下命令获取提交 ID：

```
git log 
```

然后使用：

```
git reset --hard 13cca2414skfrrrereaaa 
```

**13cca2414skfrrrereaaa** - 是提交 ID 的样子。

# entity-framework - 使用实体框架进行时间属性优化

> ID：11149021
> 
> 赞同：9
> 
> 时间：2012-06-22T01:12:21.693
> 
> 标签：entity-framework, temporal

我想使用类似于[此处](https://web.archive.org/web/20120915092356/http://blog.lowendahl.net/?p=190)描述的方法来实现时间属性，使用实体框架代码优先进行数据库存储。

我希望它优化以获取当前值并延迟加载历史记录，但我不想为每次使用都在父实体中添加样板代码，就像上面链接中的方法一样。

目前我有类似下面的代码，按照惯例，它会产生如下代码所示的数据库模式。

这将按我的需要运行，但出于性能原因，我想避免获取当前属性值所需的连接（即，我想将 TemporalStrings.CurrentValue DB 列移动到 Entities.Name ）。

如果我尝试

```
modelBuilder.Entity<Entity>().Property(o => o.Name.CurrentValue).HasColumnName("Name"); 
```

它不起作用。我得到一个例外

```
The type 'ConsoleApplication1.TemporalString' has already been configured as an entity type. It cannot be reconfigured as a complex type. 
```

有什么方法可以实现这个映射，还是有更好的方法来实现这个功能？

代码：

```
public class TemporalString
{
    public int Id { get; set; }
    public string CurrentValue { get; set; } // Setter would be customized to append to History.
    public virtual List<TemporalStringValue> History { get; set; }
    // Other methods such as string ValueAt(DateTime) would exist.
}

public class TemporalStringValue
{
    public int Id { get; set; }
    public DateTime EffectiveFrom { get; set; }
    public string Value { get; set; }
}

public class Entity
{
    public int Id { get; set; }
    public virtual TemporalString Name { get; set; }
}

public class TestDbContext : DbContext
{
    public DbSet<Entity> Entities { get; set; }
    public DbSet<TemporalString> TemporalStrings { get; set; }
    public DbSet<TemporalStringValue> TemporalStringValues { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        //modelBuilder.Entity<Entity>().Property(o => o.Name.CurrentValue).HasColumnName("Name");
        // TODO: Map DB column TemporalStrings.CurrentValue to DB column Entities.Name?
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        Database.SetInitializer(new DropCreateDatabaseIfModelChanges<TestDbContext>());
        using (var context = new TestDbContext())
        {
            var entity = new Entity
                             {
                                 Name = new TemporalString
                                            {
                                                CurrentValue = "Current Value",
                                                History = new List<TemporalStringValue>
                                                              {
                                                                  new TemporalStringValue
                                                                      {
                                                                          EffectiveFrom = DateTime.UtcNow,
                                                                          Value = "Current Value"
                                                                      },
                                                                  new TemporalStringValue
                                                                      {
                                                                          EffectiveFrom = DateTime.UtcNow.AddMonths(-1),
                                                                          Value = "Old Value"
                                                                      },
                                                                  new TemporalStringValue
                                                                      {
                                                                          EffectiveFrom = DateTime.UtcNow.AddMonths(-2),
                                                                          Value = "Older Value"
                                                                      }
                                                              }
                                            }
                             };
            context.Entities.Add(entity);
            context.SaveChanges();
        }
        Console.Write("Done.");
        Console.ReadKey();
    }
} 
```

生成的架构：

```
Entities
(PK) Id
(FK) Name_Id (references TemporalStrings.Id)

TemporalStrings
(PK) Id
     CurrentValue

TemporalStringValues
(PK) Id
     EffectiveFrom
     Value
(FK) TemporalString_Id 
```

所需的架构：

```
Entities
(PK) Id
(FK) Name_Id (references TemporalStrings.Id)
     Name (formerly TemporalStrings.CurrentValue)

TemporalStrings
(PK) Id

TemporalStringValues
(no change) 
```

# javascript - jQuery - 获取最近文本框的值并将其分配给变量

> ID：11149022
> 
> 赞同：0
> 
> 时间：2012-06-22T01:12:25.377
> 
> 标签：javascript, jquery, html

如何获取最近的文本框的值并将其分配给变量？然后在获取值后，通过将其乘以前一个文本框的值来更改该文本框的当前值。我有三个具有相同输入元素的 div 实例，所以我认为 .closest() 或 .next() 可以帮助我。这是我的代码片段

HTML

```
<div class="box">
    <b>1</b>
    <input type="text" name="quantity" value="1"/>
    <input type="checkbox" name="ignoreThisCheckbox" checked="checked"/>
    <input type="text" name="price" value="10"/>
</div>

<div class="box">
    <b>2</b>
    <input type="text" name="quantity" value="1"/>
    <input type="checkbox" name="ignoreThisCheckbox" checked="checked"/>
    <input type="text" name="price" value="10"/>
</div>

<div class="box">
    <b>3</b>
    <input type="text" name="quantity" value="1"/>
    <input type="checkbox" name="ignoreThisCheckbox" checked="checked"/>
    <input type="text" name="price" value="10"/>
</div> 
```

JS

```
$("input[name=quantity]").each(function(){
    $(this).bind("change keyup", function(){
        var q = $(this).val();
        var p = parseFloat($(this).closest("input[name=price]").val()).toFixed(2);
        var amount = q * p;
        $(this).closest("input[name=price]").val(amount)
        console.log(amount);
    })
}) 
```

非工作演示

[http://jsfiddle.net/c6yfS/](http://jsfiddle.net/c6yfS/)

感谢您的回复

**/* 笔记 */**

复选框的目的只是表明我在相关的两个元素之间有一个复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:27:24.707

最好使用`data`属性来正确计算：

HTML：

```
<div class="box">
    <b>1</b>
    <input type="text" name="quantity" value="1"/>
    <input type="checkbox" name="ignoreThisCheckbox" checked="checked"/>
    <input type="text" name="price" data-value="10"/>
</div> 
```

JS：

```
$('input[name=quantity]').on("change keyup", function(){
        var q = 0;
        var p = 0;
        var amount = 0;
        q = parseInt($(this).val(), 10);
        p = parseInt($(this).siblings("input[name='price']").data('value'), 10);
        amount = q * p;
        if (amount) {
          $(this).siblings("input[name='price']").val(amount)
        console.log(amount);
        } else {
          $(this).siblings("input[name='price']").val('Please specify the quantity')        
        }
}) 
```

[演示](http://jsfiddle.net/c6yfS/9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T01:36:46.923

正如其他海报所提到的，您可以使用 .siblings 作为 .closest 搜索 DOM 树（即父元素）。但是，您的代码中也存在逻辑错误，因为如果数量发生变化，您检索的价格永远不会是正确的单价。您可能需要一个单独的单价隐藏值来促进这一点

在此处查看更新的代码：http: [//jsfiddle.net/c6yfS/1/](http://jsfiddle.net/c6yfS/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T01:23:49.393

`.closest`用于查找 DOM 树上最近的元素。您正在寻找的是`siblings`或`next`| `prev`.

[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

[http://api.jquery.com/prev/](http://api.jquery.com/prev/)

[http://api.jquery.com/next/](http://api.jquery.com/next/)

所以

```
$(this).siblings("input[name='price']").val(amount); 
```

**编辑**

这是完整的工作JS：

```
$("input[name=quantity]").each(function(){
    $(this).bind("change keyup", function(){
        var $thi,q,$p,p;
        $thi = $(this);
        q = $thi.val();
        $p = $(this).siblings("input[name='price']");
        p = parseFloat($p.val()).toFixed(2);
        $p.val(q * p);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T02:41:19.787

为清楚起见，我刚刚添加了一个总字段您可以使用以下代码解决它：

$("input[name=quantity], input[name=price]") .each( function(){ $(this).on( {'keyup': function(){ var j0=$(this).nextAll ("input[name=total]"); j0.val(j0.prevAll("input[name=quantity]").val() * j0.prevAll("input[name=price]").val() ) } } ) } );

[单击此处查看工作中的“小提琴”](http://jsfiddle.net/anonymouzee/rCLnJ/)

# css - 基于媒体查询的 CSS 过渡

> ID：11149023
> 
> 赞同：2
> 
> 时间：2012-06-22T01:12:38.233
> 
> 标签：css, media-queries, css-transitions

我正在尝试制作一个使用`background-image`淡出设置的背景图像，因为页面变窄了。我很确定它可以使用 CSS 过渡来完成，但我对它们相当不熟悉。我想我要问的是，你能根据媒体查询制作背景图像过渡吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:42:03.213

是的你可以。我做了几个活生生的例子：

*   用颜色来测试这个概念：http: [//jsfiddle.net/nc6zT/1/](http://jsfiddle.net/nc6zT/1/)

```
@media screen and (max-width: 400px) {
    div { background: navy; }
}

@media screen and (min-width: 400px) {
    div { background: green; }
}
div {
    transition: background 2s linear;
    width: 400px; text-align: center; color: white;
} 
```

*   不透明度和图像：http: [//jsfiddle.net/nc6zT/2/](http://jsfiddle.net/nc6zT/2/)

```
@media screen and (max-width: 400px) {
    div { opacity: 0; }
}
@media screen and (min-width: 400px) {
    div { opacity: 1; }
}
div {
    background: url(http://placekitten.com/400/300/);
    transition: opacity 1s linear;
    width: 400px; height: 300px; text-align: center; color: white;
} 
```

我作弊了一点，因为淡出背景图像不受广泛支持，但请尝试建议的 cross-fade() 语法（例如[http://peter.sh/files/examples/cross-fading.html](http://peter.sh/files/examples/cross-fading.html)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T02:00:37.987

根据[Oli Studholme](http://oli.jp/2010/css-animatable-properties/)的说法，背景图像不是动画属性：

> CSS 工作组意识到了这些问题，例如正在处理过渡背景图像，所以我预计这会在未来发生变化！

然而，背景颜色是一个动画属性，所以这有效：

```
body {
    background-color: #666;
    height: 100%;
    -moz-transition: background-color 1s ease;
}
@media screen and (max-width: 800px) {
    body {
        background-color: #ccc;
        -moz-transition: background-color 1s ease;
    }
}
@media screen and (max-width: 400px) {
    body {
        background-color: #fff;
        -moz-transition: background-color 1s ease;
    }
} 
```

当然，没有渐变。这不使用 CSS 过渡，但有点模拟同样的事情：

```
body {
    background-image: -moz-linear-gradient(top, #369, #000);
    height: 100%;
}
@media screen and (max-width: 800px) {
    body {
        background-image: -moz-linear-gradient(top, #036, #000);
    }
}
@media screen and (max-width: 400px) {
    body {
        background: #000;
    }
} 
```

只需根据您要支持的浏览器使用相应的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T01:43:54.810

是的，你可以在这里有一篇关于此[http://blog.w3conversions.com/2011/03/changeing-a-background-image-with-css3-transitions/](http://blog.w3conversions.com/2011/03/changing-a-background-image-with-css3-transitions/)的好文章，但我建议使用 javascript，因为 css 将具有兼容性这里的问题是使用 JS 执行此操作的一个很好的链接[http://fx.inetcat.com/](http://fx.inetcat.com/)

# c++ - OpenGL程序是如何调试的？

> ID：11149026
> 
> 赞同：3
> 
> 时间：2012-06-22T01:13:09.787
> 
> 标签：c++, opengl, segmentation-fault, opengl-3

我试图找出在我的简单程序中调用 glDrawArrays（如 gdb 所说）时导致段错误的原因。

当我直接使用 OpenGl 调用时，程序运行良好。但是当我将它们包装成两个类（正在建设中，vao 和 vbo）时，程序会出现段错误。

所以，在我的包装中，我肯定禁用了某些东西或设置了一些我不应该做的东西。

我的问题是，我如何获得一些诊断信息来帮助我查明问题的根源？

我正在寻找类似于 glGetShaderiv 所做的事情，但是对于 vao 和 vbo s，这将告诉我是否有..say.. 错误地解除了缓冲区。

[我没有在这里发布代码，但如果你们中的任何人想通过测试一个段错误示例来贡献一些时间，[这里是源代码的](https://docs.google.com/open?id=0B0oubbp-MVYOWEJVVXF5NVE4MlE)tar.gz。您需要 sfml-2.0rc、glew 和 gcc>=4.6 的工作库。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T01:36:08.580

试试像 GDEBugger 这样的程序：http: [//www.gremedy.com/](http://www.gremedy.com/)

它使您可以轻松检查 OpenGL 的状态并为您提供良好的诊断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T03:12:12.667

调用 glVertexAttribPointer 时必须分配 VBO 数据。但是因为你之后调用它，之前调用的 glVertexAttribPointer 将指示 VAO 指向无效位置 - 因此在绘图期间崩溃。

在注释部分查看您如何调用代码 - 首先是 glBufferData，然后才是 glVertexAttribPointer。

# objective-c - UIViewController 的视图没有出现在 UIPopoverController 中

> ID：11149027
> 
> 赞同：0
> 
> 时间：2012-06-22T01:13:12.067
> 
> 标签：objective-c, ios5, view, uipopovercontroller

我制作了一个 .xib 文件并添加了我的按钮和标签。然后我创建了 UIViewController 文件并将其作为自定义类添加到文件的 Owner 类中，然后将其视图与 ViewController 连接起来。

然后我去了我的 UIView，它有按钮来显示 UIPopoverController 当我按下它并创建按钮 Action 然后我写在这个 Action

```
OpenFileViewController *openfileview = [[OpenFileViewController alloc] init];
    //int subcount = openfileview.view.subviews.count;
    UIPopoverController *openfilediaglog = [[UIPopoverController alloc] initWithContentViewController:openfileview];
    openpopoverController = openfilediaglog;
    [openpopoverController setPopoverContentSize:CGSizeMake(320, 460)]; 
    [openpopoverController presentPopoverFromRect:CGRectMake(0, 0,400, 500) inView:self permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

当我按下按钮时 UIPopoverController 出现但为空我找不到问题!!!？它在哪里 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T04:23:59.087

使用它代替 OpenFileViewController init。

```
OpenFileViewController *openfileview = [[OpenFileViewController alloc] initWithNibName:@"OpenFileViewController" bundle:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T01:18:56.563

如果你的 OpenFileViewController 有一个 xib 而不是你不能使用的编程接口`init`

```
// OpenFileViewController *openfileview = [[OpenFileViewController alloc] init];

OpenFileViewController *openfileview = [[OpenFileViewController alloc] initWithNibName:NIBNAME bundle:NSBUNDLE]; 
```

# c# - 需要搜索算法

> ID：11149028
> 
> 赞同：-1
> 
> 时间：2012-06-22T01:13:12.637
> 
> 标签：c#, algorithm, search

我需要 ac# 程序（搜索算法），即，当用户键入一个字符时，显示屏应更新以显示下一个字符的所有有效选择以及可能的匹配站列表。

例如：用户输入：DART，它应该显示

达特福德和达特茅斯

建议大纲如下：

```
public class Suggestions
{
     HashSet<Character> nextLetters { get; set; }
     HashSet<String> stations { get; set; }
}

public class StationFinder
{
     private static String[] stations = new String[] {"LIVERPOOL LIME STREET", "BIRMINGHAM 
                                       NEW STREET", "KINGSTON", " DARTFORD", "DARTMOUTH" };

    public Suggestions GetSuggestions( String userInput )
    {
          // TODO Compute result
          Suggestions result = new Suggestions();
          return result;
    }
} 
```

这只是一个建议，它也可以修改。

问候，毗湿奴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:16:16.043

我个人不了解 C#，因此无法帮助您编写代码，但您想要使用的称为[TRIE](http://en.wikipedia.org/wiki/Trie)。这是字符串的一种特定类型的树结构。好的属性是你可以非常看到给定字符串开头的所有合法结尾。这非常适合自动建议等事情，我认为这就是你想要的。只是在 C# 中搜索 TRIE 实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T01:17:49.323

你想要的是一个三元搜索树看[这里 wikipedia](http://en.wikipedia.org/wiki/Ternary_search_tree)和[这里 c# 示例](http://www.codeproject.com/Articles/84860/Ternary-Search-Tree-Algorithm-for-word-list-storag)

# opengl-es - 对于初学者，我在哪里可以找到有关使用 Linux 操作系统的 OpenGL 的信息

> ID：11149032
> 
> 赞同：1
> 
> 时间：2012-06-22T01:13:35.597
> 
> 标签：opengl-es, opengl-es-2.0

我将在我的论文中使用 OpenGL，并通过大量材料来理解它，但我对代码的差异以及它们如何使用它感到困惑。谁能给我一个初学者学习OpenGL的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T01:20:32.820

该网站有一个很好的[入门指南](http://www.opengl.org/wiki/Getting_Started)（参见[Linux](http://www.opengl.org/wiki/Platform_specifics%3a_Linux)部分）。

对于 OpenGL，请使用 API 文档：

[http://www.opengl.org/documentation/](http://www.opengl.org/documentation/)

这是 OpenGL ES 规范：

[http://www.khronos.org/registry/gles/](http://www.khronos.org/registry/gles/)

您将需要使用诸如 C、C++、Python、PERL、Java 等编程语言（此处为完整列表 (http://en.wikipedia.org/wiki/OpenGL)

您将需要一个库来处理大多数人使用 GLUT 的基本功能，例如打开窗口等：[http ://www.opengl.org/resources/libraries/glut/](http://www.opengl.org/resources/libraries/glut/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:27:40.283

我建议您下载此 pdf Mali™ OpenGL ES 2.0 SDK for Linux on ARM。它肯定会帮助你。（请纠正我对技术错误的回答）

# database - 了解 C-Store DB 中的“冗余”列（面向列）

> ID：11149034
> 
> 赞同：2
> 
> 时间：2012-06-22T01:14:03.830
> 
> 标签：database, column-oriented

跟着C-store上发表的[论文](http://db.csail.mit.edu/projects/cstore/vldb.pdf)，部分没看懂

> 以不同顺序在多个重叠投影中冗余存储表格元素，以便使用最有利的投影解决查询

首先，我不明白它是如何得出数据库表中哪些列构成“冗余”列的？

其次，关于上述几点，我的理解是这些标记为“冗余”的列不必存储在表上创建的每个投影中。如果查询请求此类列，则只需要其中一个投影即可回答查询。我对么？

# objective-c - 有没有办法让 Xcode 的调试器在本地时区（即不是 UTC）中显示日期？

> ID：11149038
> 
> 赞同：5
> 
> 时间：2012-06-22T01:14:21.153
> 
> 标签：objective-c, xcode, debugging, timezone, nsdate

我正在尝试调试大量使用日期的代码，这让我在调试器中比较了大量不同的[NSDate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html)值。调试器以 UTC 格式显示这些日期——例如：

`date1 = (NSDate *) 0x01b11460 @"2012-02-15 18:55:00 +0000"`

[如果它在我的本地时区](http://www.timeanddate.com/worldclock/)显示它们对我来说会容易得多，因为这就是我正在调试的测试代码似乎正在使用的。

我确实觉得我在这里遗漏了一些更基本的东西，所以我希望有人能启发我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:13:08.683

虽然有点“hackish”，但您可以创建 NSDate 的子类并仅覆盖

```
-(NSString *)description; 
```

方法以返回您想要的日期格式。

调试器并没有为你做任何特殊的解码，它只是调用它想要显示的对象的“描述”方法。一个方便的技巧......（这就是为什么我的所有对象都发布了适合在调试器中查看的简洁描述。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T01:58:57.930

最后，最有效的方法实际上是为 NSDate 添加一个类别，它只是覆盖该`description`方法以返回一个代表我当前时区中 NSDate 的字符串。我也将其设为 DEBUG，因为我真的只需要在调试时使用此覆盖。

这是我使用的 .h 文件：

```
#ifdef DEBUG

@interface NSDate (DebugHelper)

-(NSString *)description;

@end

#endif 
```

和 .m 文件：

```
#ifdef DEBUG

#import "NSDate+DebugHelper.h"

@implementation NSDate (DebugHelper)

-(NSString *) description
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];
    [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
    [dateFormatter setDateStyle:NSDateFormatterShortStyle];
    return [dateFormatter stringFromDate:self];
}

@end

#endif 
```

感谢 Jim Hayes 和 jrturton 的讨论和导致这个答案的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T04:26:43.997

只是做了同样的事情，但是我使用了 localTimeZone 而不是 systemTimeZone （请参阅文档以了解为什么它会稍微好一些）。此外，我注意到您正在分配 dateFormatter 对象，但从未释放它，这是一个泄漏。

这是我的分类方法：

```
-(NSString *) description;
{
    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init]autorelease];

    NSLocale *enUSPOSIXLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease];
    [dateFormatter setLocale:enUSPOSIXLocale]; 
    [dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
    [dateFormatter setDateStyle:NSDateFormatterLongStyle];
    [dateFormatter setTimeStyle:NSDateFormatterLongStyle];

    NSString *dateString = [dateFormatter stringFromDate:self];
    return dateString;
} 
```

# nhibernate - NHibernate：在最小化数据传输的同时保持与集合的外键关系

> ID：11149040
> 
> 赞同：2
> 
> 时间：2012-06-22T01:14:23.600
> 
> 标签：nhibernate, asp.net-web-api

我有一个经典的父子关系集合，用于 Web 解决方案。

我希望能够单独坚持孩子，但我也想避免多余。似乎每个人都说孩子应该定义如下：

```
public class Child {
   public virtual int Id {get; set;}
   public virtual string Name {get; set;}
   public virtual Parent {get; set;}
} 
```

有了这个，我可以确保孩子有对其父母的引用。

问题是，当从应用程序中提取这些子对象时，我不希望将父对象的副本与集合中的每个子对象一起加载。

知道我正在使用 JSON.net 进行序列化可能很有用。

同样，我的目标是能够单独持久化子对象，但不必将整个 Parent 对象存储在其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:24:24.870

最好的方法就是使用 DTO/视图模型。使用映射器从您的实体转移到这个更轻的类，并返回更轻的类。我有一段时间反对这种方法，坚持认为创建 DTO/视图模型类只是加倍努力，但归根结底，这是最有成效的方法，以后不太可能在后面咬你。

话虽这么说，您可以用 来装饰`Parent`，`JsonIgnoreAttribute`但是 A）混淆了您的域的演示或业务问题，B）它只是消除了不可避免的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:48:40.267

如果您在 1 个会话中加载子项，NHibernate 只会在数据库中创建每个唯一父项的 1 个实例 - 甚至如果父项是您已加载的子项之一，它也不会再次加载它或创建一个新对象。这基本上是 NHibernate 维护的“对象身份” - 在会话中，NHibernate 只会为一行创建一个实体的实例（有一些例外情况，您可以使其不这样做，但通常这将成立）。

# django - Django ajax 文件上传集成到模型表单

> ID：11149045
> 
> 赞同：2
> 
> 时间：2012-06-22T01:15:01.020
> 
> 标签：django, json, jquery, django-forms, django-views

我最近一直在为我的小型博客网站实现一个[基于 ajax 的文件上传器。](https://github.com/GoodCloud/django-ajax-uploader%5d%5b1%5d)我还有一个小表单（与 ajax 文件上传器在同一页面上），它收集姓名、电子邮件 ID 等基本详细信息。现在，我面临的问题是，当用户通过 ajax 上传器上传文件时并完成表格，我无法获得上传文件的“文件名”。

基本上，我想将 ajax 上传的文件名写到我的表单字段中。上传本身工作正常，我也可以通过萤火虫看到 POST 消息。所以，我可以看到一些 JSON，例如：

```
{
  "path": "/media/uploads/paperscience_5055721894547287.pdf", 
  "success": true, 
  "filename": "paperscience_5055721894547287.pdf"
} 
```

我想将“路径”参数放入名为文件名的表单字段中。

我的 Django 代码在[这里](http://dpaste.com/762198/)

我将不胜感激任何指导来实现上述目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:20:35.120

在您的响应功能中：

将文件名添加到表单文件名字段（假设该字段具有 id: id_filenames）：

```
$('#id_filenames').val(responseJSON.path); 
```

如果您想重新提交，您可以在包含文件名的表单中添加一些隐藏字段。只需将隐藏字段附加到表单，当用户提交时，这将成为您的 POST 数据的一部分。

# c++ - 如何配置共享内存？

> ID：11149048
> 
> 赞同：1
> 
> 时间：2012-06-22T01:15:48.627
> 
> 标签：c++, linux, profile, valgrind

我有一个峰值内存使用量为 66MB 的程序，我正在尝试使用 Valgrind Massif 对其进行分析。不幸的是，Massif 仅显示 800KB 的峰值内存使用量。另一方面，top 告诉我 65MB 是共享内存。是否可以在 Linux 中分析程序的共享内存使用情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:10:34.007

至少在 Valgrind 3.7.0 中，您可以使用以下选项来满足您的需求： --pages-as-heap=no|yes 页面级别的配置文件内存 [no]

# algorithm - 生成一个随机数序列来获取和平均

> ID：11149051
> 
> 赞同：5
> 
> 时间：2012-06-22T01:16:02.287
> 
> 标签：algorithm, random, numbers

我正在寻找一个数字序列，其中每个数字都在 70 到 100 之间，序列中会有 x 个数字，它将给出 y 的平均值。这个算法会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:35:09.000

我认为它们不可能均匀分布在 70 到 100 之间并且同时具有给定的平均值。

您可以做的是生成具有给定平均值的随机数，然后将它们缩放以适合 [70, 100]（但它们不会在那里均匀分布）。

1.  生成随机数 [0..1(

2.  计算他们的平均值

3.  将它们全部相乘以匹配所需的平均值

4.  如果它们中的任何一个不适合 [70, 100]，则通过将它们的距离减小`y`相同的因子来再次缩放它们（这不会改变平均值）。`x[i] = y + (x[i] - y)*scale`

您最终将得到所有在 [70, 100( 范围内的数字，但它们将均匀分布在以 y 为中心的不同（但重叠）区间内。此外，这种方法仅适用于实数/浮点数数字。如果你想要整数，你手上就有一个组合问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T01:30:08.307

Python 示例

```
import random
import time

x     = 10
total = 0
avg   = 0

random.seed(time.time())
for x in range(10):
    total += random.randint(70,100)

avg = total /x

print "total: ", total
print "avg: ", avg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T01:39:51.870

```
 Random r = new Random();
        List<int> l = new List<int>();
        Console.Write("Please enter amount of randoms ");
        int num = (int)Console.Read();
        for (int i = 0; i < num; i++)
        {
            l.Add(r.Next(0, 30) + 70);
        }

        //calculate avg
        int sum = 0;
        foreach (int i in l)
        {
            sum += i;
        }

        Console.Write("The average of " + num + " random numbers is " + (sum / num));

        //to stop the program from closing automatically
        Console.ReadKey(); 
```

# php - 从 MySQL 结果 php 返回一个多维数组

> ID：11149055
> 
> 赞同：3
> 
> 时间：2012-06-22T01:16:17.150
> 
> 标签：php, mysql, arrays, multidimensional-array

我有一个 PHP 函数，可以从数据库中提取发票的数据。

发票可能不止一行（一种产品）。

```
function getInvoiceLines($id)
{
   $res = mysql_query("select * from invoice_lines where id = $id ");
   while ($row = mysql_fetch_array($res))
   {
      $res_retun['ref']=$row['ref'];
      $res_retun['label']=$row['label'];
      $res_retun['price']=$row['label'];
      $res_retun['qty']=$row['qty'];
   }

return $res_retun ;

} 
```

我找到了这个链接[Create a Multidimensional Array with PHP and MySQL](https://stackoverflow.com/questions/8289059/create-a-multidimensional-array-with-php-and-mysql?answertab=active#tab-top)，我使用这个概念制作了这段代码。

现在，如果 MySQL 结果中有更多行，我如何将光标之类的东西移动到下一行并添加更多行？

如果可能的话，我该怎么做才能用 for 显示 HTML 中的数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T01:20:08.780

稍作修改就可以得到您想要的，在`[]`运算符下方是向数组添加元素的简写符号，您的代码的问题是您在每次迭代时都覆盖了相同的键

```
 // fetch only what you need;
   $res = mysql_query("select ref, label, price, qty from invoice_lines where id = $id ");
   while ($row = mysql_fetch_array($res))
   {
      $res_return[] = $row;
   }
   return $res_return; 
```

注意，我修正了你的一些错别字（你使用`$rw`而不是`$row`在原始代码的循环中）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T01:28:49.307

如果您将[PDO](http://php.net/manual/en/book.pdo.php)与[fetchAll()](http://php.net/manual/en/pdostatement.fetchall.php)一起使用，您将返回您期望的数组，也可以避免讨厌：

```
<?php //Cut down
$db = new PDO("mysql:host=localhost;dbname=dbName", 'root', 'pass');

$sql = "SELECT * FROM invoice_lines WHERE id = :id ";

$stmt = $db->prepare($sql);
$stmt->bindParam(':id', $id);
$stmt->execute();

$res_return = $stmt->fetchAll(PDO::FETCH_ASSOC);
?> 
```

然后你只需像任何其他数组一样循环遍历数组：

```
<?php 
foreach($res_return as $row){
echo $row['ref'];
...
...
}
?> 
```

也不应该有超过 1 行，如果`id`它是你的主键，它应该是唯一的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T01:31:55.753

如果您像使用 PDO 一样使用它，那将非常容易，并且您将解决您的 sql 注入问题

```
$db = new PDO(...);
function getInvoiceLines( $db,  $id )
{
    $stmnt = $db->prepare("select ref, label, price, qty from invoice_lines where id=?");
    $stmnt->execute( array( $id ) );
    return $stmnt->fetchAll( PDO::FETCH_ASSOC );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-26T08:53:52.313

首先将变量设为全局然后在函数中访问它。对于经验。

```
$return_arr = array(); // outside function 
$i = 0;
cal_recursive();  // call function first time

function cal_recursive(){
      global $return_arr;
      global $i;
       $return_arr[$i] = // here push value to array variable
       $i++;

        // do code for recursive function 

return $return_arr // after end
} 
```

# orchardcms - 在 Orchard 中为自定义 ContentType 的投影制作模板 (NivoSlider)

> ID：11149075
> 
> 赞同：1
> 
> 时间：2012-06-22T01:19:27.250
> 
> 标签：orchardcms, nivo-slider

我有一个网站主题，我正试图导入[Orchard 1.4.2](http://www.orchardproject.net/)，但我只剩下几个区域了。其中之一是在这个主题的主页上实现的[NivoSlider 。](http://nivo.dev7studios.com/)现在我决定而不是强迫网站的维护者知道正确的 HTML 和格式，我将创建一个表示单个幻灯片的新内容类型，将一个投影小部件添加到特色区域并创建一个自定义模板正确构建 HTML 以使滑块正常工作，但我遇到了一个障碍，Nivo Slider 的格式首先需要 DIV 中的所有图像，然后是代表与每张幻灯片关联的标题的一系列其他 DIV。

```
<div id="slider-container-default">
    <div id="slider-frame"><div id="slider-box"></div></div>
    <div id="slider" class="nivoSlider">
        <img src='images/slider/slide1.jpg' alt='' title='#htmlcaption1' />
        <img src='images/slider/slide2.jpg' alt='' title='#htmlcaption2' />
        <img src='images/slider/slide3.jpg' alt='' title='#htmlcaption3' />
    </div>
    <div id="htmlcaption1" class="nivo-html-caption">
        <h1>First Caption Title</h1>
        <p>Maecenas euismod, metus ac fermentum aliquam, diam turpis ornare odio, nec lacinia orci lectus eget odio. Cras at nulla mauris, at dignissim massa. Cras non est ac ligula lacinia varius sed quis augue.</p><a href="#" class="button medium">Read More &rarr;</a>
    </div>
    <div id="htmlcaption2" class="nivo-html-caption">
            <h1>Second Caption Title</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse vel lectus eu lacus interdum laoreet at a est. Pellentesque aliquam luctus dolor.</p><a href="#" class="button medium">Read More &rarr;</a>
    </div>
    <div id="htmlcaption3" class="nivo-html-caption">
        <h1>ThirdCaption Title</h1>
        <p>Pellentesque volutpat tempor imperdiet. Duis sit amet purus vel est auctor dignissim in sed tortor. Integer vitae ante non libero euismod iaculis.</p><a href="#" class="button medium">Read More &rarr;</a>
    </div>
</div> 
```

现在，我有一个替代品，我正试图用它来实现这种布局，但我一生都无法想出一种方法来让替代品以这样的方式运行。我尝试在集合本身上使用替代方法，并且只对集合进行了两次枚举，一次用于图片，一次用于标题，但我似乎无法弄清楚如何访问模板中幻灯片上的信息。我不认为我可以在项目级别做到这一点，因为虽然我可以为标题或图像提供自定义模板，但我不知道如何同时做到这两个。我可以`@Html.Display(Model.List)`两次调用集合模板并为每次调用提供不同的项目模板吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:32:09.767

我目前正在设计一个网站，我将 Nivo 滑块包含在特色区域中。我在主页层中添加了一个 HTML 小部件，将 Nivo HMTL 代码（从他们的网站）复制/粘贴到小部件的 HTML 编辑器中，将 Nivo CSS 和 Javascript 包含到主页的头部（layout.cshtml）中，并添加了一个底部的单独 window.load 脚本以使用我想要的选项（持续时间、过渡效果、控制导航等）对其进行初始化。一旦对它的工作感到满意，我还在头部包含了 Nivo 默认主题 CSS。

我花费最多时间的问题是找到图像的正确路径。在 SO 上找到类似的帖子后，我写了完整路径（Themes/YourThemeName/Content/Images/image.xxx）。这一切都解决了，它完美地工作。

他们网站上有一段[视频，介绍了](http://nivo.dev7studios.com/support/jquery-plugin-usage/)将滑块添加到普通 HTML 网站的过程。希望这可以帮助。

# objective-c - 解析 JSONP 响应的最佳方法

> ID：11149078
> 
> 赞同：0
> 
> 时间：2012-06-22T01:19:52.893
> 
> 标签：objective-c, regex, json, ios5

我正在调用一个 API，它应该返回一个 JSON 文件。这是 API 链接：[http ://sg.media-imdb.com/suggests/h/hello.json](http://sg.media-imdb.com/suggests/h/hello.json)

问题是：这个 JSON 文件有一些包装 JSON 响应的东西

```
imdb$hello(JSON) 
```

所以我能看到的最好的方法是使用正则表达式来只提取我需要的东西。类似的东西：`~/\((.*)\)/`。

但是我想使用新的 JSON iOS5 API，它（据我所知）只接受 NSData 作为输入。所以，我不想将我的响应从 NSData 转换为 NSString，使用正则表达式解析它，然后将它放在另一个 NSData 对象中。

任何人都可以看到更好/更清洁的 JSON 解析解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:22:01.983

您拥有的不是 JSON，而是[JSONP](http://en.wikipedia.org/wiki/JSONP)。如果您不在 JavaScript 中，我相信正确的处理方式就是如您所说，预处理然后解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T17:44:12.447

```
 NSError *jsonError = nil;
         NSString *jsonString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
         NSRange range = [jsonString rangeOfString:@"("];
         range.location++;
         range.length = [jsonString length] - range.location - 1;
         jsonString = [jsonString substringWithRange:range ];
         NSJSONSerialization *jsonResponse =
         [NSJSONSerialization JSONObjectWithData:[jsonString dataUsingEncoding:NSUTF8StringEncoding]
                                         options:0
                                           error:&jsonError]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T01:40:05.977

为什么不在解析 JSON 之前做这样的事情呢？

```
response = [response stringByReplacingOccurrencesOfString:@"imdb$hello" withString:@""]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T02:07:07.243

这个字符串有多规则。它会**一直**存在吗？

```
// Remove @"imdb$hello(" and @")" that wraps the response string.
NSRange JSONRange = NSMakeRange(11, [responseString length] - 12);
NSString *JSONString = [responseString substringWithRange:JSONRange];

// Now you can parse as normal… 
```

您将需要以自己的确定性来制定剥离包装纸的方法。

# objective-c - Xcode 静态分析器和内存泄漏

> ID：11149085
> 
> 赞同：0
> 
> 时间：2012-06-22T01:20:45.367
> 
> 标签：objective-c, memory-management

感谢您的光临。

这个静态分析器警告让我很烦这是我的代码

```
+ (INURLConnection*)createConnectionForRequest:(INHTTPRequest *)aRequest {

    INURLConnection* result = [[INURLConnection alloc] init];
    if(result){
        result.request = aRequest;
        result.error = nil;
    }
    return result;
} 
```

“返回结果”行向我显示潜在的内存泄漏警告（当我使用分析器时）。这是一个创建方法，消费的方法是这样的

```
INURLConnection *connection_tmp = [INURLConnection createConnectionForRequest:aRequest];
self.connection = connection_tmp, [connection_tmp release]; 
```

所以创建连接返回保留计数为 1，self.connection 增加保留计数，并且还有一个释放。

我知道我可以使用 ARC，但我想知道为什么静态分析器在这里显示潜在的内存泄漏。

忽略此警告是否安全？

欢呼阿伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T01:23:26.810

忽略此警告是不安全的，因为您违反了 Cocoa 内存管理的“规则”之一：“您不拥有通过引用返回的对象”。

将函数的最后一行更改为

```
return [result autorelease]; 
```

并且 Xcode 警告应该消失。

您应该阅读 Apple 关于该主题的文档[Basic Memory Management Rules](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)，其中更详细地介绍了各种约定。遵守这些规则是很好的，因为任何其他阅读或使用您的代码的人都会期望它以这种方式运行。

# android - 电视上 Android 应用程序的布局

> ID：11149087
> 
> 赞同：0
> 
> 时间：2012-06-22T01:21:05.633
> 
> 标签：android, xml, layout, television

我正在为电视设计一个应用程序。当我将我的应用程序加载到电视屏幕上时，我发现它仍然具有智能手机的大小。我一直在玩不同的 dpi，但没有工作。为此花了一天时间。

设计布局以使其适合电视屏幕的步骤是什么？

这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="#FFFFFF"
    android:gravity="center" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:contentDescription="@string/logimgdesc"
        android:src="@drawable/logo" />

    <Button
        android:id="@+id/btnStart"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="36dp"
        android:text="@string/start" />

    <Button
        android:id="@+id/btnDownload"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="36dp"
        android:text="@string/download" />

    <Button
        android:id="@+id/btnStop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/spyonme"
        android:layout_alignBottom="@+id/spyonme"
        android:layout_alignLeft="@+id/btnLoadFP"
        android:text="@string/stop" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:34:45.517

有许多不同的方法来实现对多屏幕尺寸的支持。我建议您阅读Android 开发者网站上的[Supporting Multiple Screens指南。](http://developer.android.com/guide/practices/screens_support.html)

# box2d - Box2d 损伤物理

> ID：11149091
> 
> 赞同：2
> 
> 时间：2012-06-22T01:22:03.963
> 
> 标签：box2d, physics

我正在为我的项目制作类似《愤怒的小鸟》的游戏。除了最基本的：在游戏物理中提供逼真的感觉之外，大多数事情都已完成。我最挣扎的部分是伤害。我正在使用 libgdx，它为 Box2d 提供了一个包装器，因此代码对于任何了解 Box2d 的人来说都不应该是陌生的。这是 postSolve 方法

```
@Override
    public void postSolve(Contact contact, ContactImpulse impulse) {    
        float[] forces = impulse.getNormalImpulses();

        int index1 = (Integer) contact.getFixtureA().getBody().getUserData();
        int index2 = (Integer) contact.getFixtureB().getBody().getUserData();

        if( forces[0] > 0.3 )
            bodies.get(index1).handleCollision(forces[0]);

        if( forces[1] > 0.3 )
            bodies.get(index2).handleCollision(forces[1]);
    } 
```

这会拉出正在碰撞的物体并将正常的碰撞脉冲传递给它们，以便它们可以处理损坏。现在这是其中一具尸体的损坏处理函数

```
@Override
    public void handleCollision(float impulse) {
            health -= impulse;

            else if( health < 50 )
                isFlaggedForDelete = true;
    } 
```

我最初根据所有身体的大小为所有身体提供健康值，并且每次发生足够强烈的碰撞时，它们都应该受到相应的伤害。

问题是身体以图像中显示的方式排列。每当任何一个方块发生轻微的碰撞，甚至没有使它移动时，整个结构（我认为）开始振动，下面的方块被破坏（因为健康），整个结构倒塌。

![在此处输入图像描述](../Images/c8e478b831bcd974bd51a97d179411b4.png)

我已将 b2VelocityThreshold 设置为最大值（进一步增加它会在游戏中引入不良行为）。postSolve 方法还设置了足够高的阈值。我的方法有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:35:36.380

我认为您在这里错误地使用了 normalImpulses 数组。虽然这个数组总是两个元素长，但它只包含与碰撞流形中的点一样多的有效值，而碰撞流形中的点通常可能只有一个。它持有的冲量值不是针对 bodyA 和 bodyB，而是针对流形的点。

要获得碰撞“严重”程度的正确值，您需要检查碰撞实际存在多少碰撞点，如果有两个，那么您可以取脉冲的平均值，或者可能是最大值。

我说的是“重”而不是“破坏”，因为即使撞击速度没有改变，对于较重的物体来说，这些冲动也会更高。PreSolve 对所有接触的物体在每一帧都发生，所以即使你有两个物体几乎一动不动地坐着，一个在另一个上面，如果物体很重，你仍然会得到一个很大的 normalImpulse。我想在确定碰撞是否具有破坏性之前，您需要考虑所涉及物体的质量。

PostSolve 在两个灯具接触时每帧调用一次，除非它们的身体处于睡眠状态。当你说整个结构被振动损坏时，我猜只是身体在睡觉，直到它们的结构的一部分被碰撞，所有的 PostSolve 突然开始加起来。

如果我是你，我会设置一个更简单的场景，比如只有一具尸体坐在地上，然后将另一具尸体放在上面。看看你从那里得到的 normalImpulse 的值，直到身体睡觉。改变它们的质量，改变下落高度等，然后再做一次，看看 normalImpulse 值是如何受到影响的。这应该让您了解在确定碰撞是否造成损坏时使用什么样的阈值，或者仅仅是身体彼此重叠的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:12:42.167

我认为您可以尝试减少较小的伤害，因为通常您真的想在某物撞到某物时施加伤害。我认为这种冲击的力量比物体振动时施加的力量要高得多。所以尝试这样的事情：

```
@Override
    public void handleCollision(float impulse) {
            if (impulse > SOME_VALUE)
                health -= impulse;

            if( health < 50 )
                isFlaggedForDelete = true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-29T02:46:18.863

要过滤掉由自重引起的冲动，下面的代码可能会有所帮助：

```
public void postSolve(Contact contact, ContactImpulse impulse) {    

    Fixture upperFixture = fixtureA;
    if(fixtureA.getBody().getPosition().y<fixtureB.getBody().getPosition().y)
        upperFixture = fixtureB;

    // don't count body weight when calculating impulse 
    float weightImpulse = 
   -upperFixture.getBody().getMass()*gravityY*worldStep; 
    // if your fps is 60, worldstep would be 1/60

    // finally we deduct impulse caused by weight from total impulse 
    float absImpulse = Math.abs(impulse.getNormalImpulses()[0]) - weightImpulse;
   // this 'absImpulse' should be zero if you put a box on the ground 
   // and don't have anything on top of the box

} 
```

由于您知道您的盒子的设置，您可能能够找出多个盒子的设置。

# parallel-processing - 如何让 Selenium Grid 2 在多个浏览器中并行运行 1 个测试

> ID：11149092
> 
> 赞同：1
> 
> 时间：2012-06-22T01:22:32.833
> 
> 标签：parallel-processing, cross-browser, nunit, selenium-webdriver, selenium-grid

我正在使用以下技术：

*   .net 中的 Selenium Webdriver 2.0
*   硒网格 2
*   规范流
*   视觉工作室女士
*   锐器

我的问题是，一旦我运行测试，如何让测试在不同的浏览器（如 Firefox 和 Internet Explorer）中并行运行。

目前它只在默认浏览器上运行一次测试，并忽略我在 json 文件中传递的另一个浏览器。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:03:35.247

可能您应该更关注节点的注册方式。

启动节点（使用以下命令）

```
java -jar selenium-server-standalone-2.14.0.jar -role node -hub http://localhost:4444/grid/register 
```

如果您也尝试使用浏览器启动节点（请检查以下命令）

```
-browser maxInstances=5 
```

maxInstances --> 表示单个节点上的最大会话数，与浏览器无关

请在您的测试用例中指定功能，以便它并行调用特定浏览器（IE、FF、Chrome）以避免默认浏览器。

# jquery - 将带有谷歌图表的外部页面加载到 div 中

> ID：11149094
> 
> 赞同：2
> 
> 时间：2012-06-22T01:23:15.277
> 
> 标签：jquery, html, charts, external

这是 google 图表 in.php 的代码：

```
<html><head>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>            
<script type="text/javascript">       
 google.load('visualization', '1.0', {'packages':['corechart']});           
 google.setOnLoadCallback(drawChart);      
   function drawChart() {       
        var data = new google.visualization.DataTable();          
        data.addColumn('string', 'Topping');         
        data.addColumn('number', 'Slices');         
        data.addRows([  ['Mushrooms', 3],  ['Onions', 1],            
                        ['Olives', 1],  ['Zucchini', 1], ['Pepperoni', 2] ]);          
   var options = {'title':'Pizza I Ate Last Night',    
                       'width':400,  'height':300};  
        var chart = new google.visualization.PieChart(document.getElementById
                    ('chart_div'));} 
 </script>   
 </head>    
 <body>          
 <div id="chart_div"></div></body> </html> 
```

我的页面将其加载到 div 的代码：

```
<html>
<head>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script> 
<script type="text/javascript" src="https://www.google.com/jsapi"></script>  
<script>
$(document).ready( function () { $('#page').load('in.php');});
</script>
</head>
<body>
<div id=page style="width: 900px; height: 500px;" ></div>
</body>
</html> 
```

in.php 单独工作正常，但不使用 out.php 并且加载 out.php 将在源代码中显示空白页面和错误。提前致谢！！！

# mysql - MYSQL 恢复命令说我正在尝试恢复到不同的数据库？

> ID：11149098
> 
> 赞同：0
> 
> 时间：2012-06-22T01:23:35.943
> 
> 标签：mysql, linux

嘿伙计们，我正在尝试恢复一个名为“hs”的数据库，但 MYSQL 说，我正在尝试恢复一个数据库“mysql”

我必须`su root`获得超级用户访问权限，

```
[root@server init.d]# sudo mysql -u hs -p --database=hs < /home/hs/blankhsdb.sql
Enter password:

ERROR 1044 (42000) at line 1: Access denied for user 'hs'@'localhost' to database 'mysql' 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:28:51.633

你在那里交换变量..你使用'hs'作为用户，在你的情况下，一个数据库。

```
mysql -u #username# -p #database# < #dump_file# 
```

在此处阅读此示例语法..

[http://www.techiecorner.com/31/how-to-restore-mysql-database-from-sql-dump-file/](http://www.techiecorner.com/31/how-to-restore-mysql-database-from-sql-dump-file/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T01:47:01.660

解决它，

sudo mysql --database=hs < /path/to/filename.sql

可能只是因为用户名和数据库相同而感到困惑

# javascript - 从父母那里得到未知的孩子div？

> ID：11149103
> 
> 赞同：1
> 
> 时间：2012-06-22T01:24:05.563
> 
> 标签：javascript, jquery

```
<script type="text/javascript">
$(".inventory-notes").bind("click", function() {
    if($(this).text().length > 0) {
        alert($(this).text());
        alert($(this).closest(".inventory-notes").children().text());
    }
});
</script> 
```

示例表

```
<table id="inventory" class="table">
    <thead>
        <tr>
            <th>Item</th>
            <th>Value</th>
            <th>Usage</th>
            <th>Notes</th>
        </tr>
    </thead>
    <tbody>
        <tr class="items">
            <td>Hatchet</td>
            <td>24,000 Gold</td>
            <td>Woodcutting</td>
            <td><div class="inventory-notes"><div id="299"><img src="addnotes.png"></div></div></td>
        </tr>
    </tbody>
</table> 
```

如何从子 div 中获取 299 的值`inventory-notes`？该表实际上包含至少 1,000 行项目，每个项目都包含一个随机 ID。

我正在使用 jQuery 1.6.2，所以我不能使用`.on() function.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:29:41.687

由于您使用的是 jQuery 1.6.2，我会使用`.delegate`：

```
$("#inventory").delegate(".inventory-notes", "click", function(){
    var id = $(this).find("div").prop("id");
}); 
```

由于您将拥有 1,000 多个行，因此您不想将事件绑定到实际行，从而导致 1,000 多个处理程序。

# facebook - 启用 offline_access 迁移后，尝试将访问令牌延长至 60 天似乎失败了约 70% 的时间。为什么会这样？

> ID：11149106
> 
> 赞同：2
> 
> 时间：2012-06-22T01:24:27.633
> 
> 标签：facebook, authentication, access-token, facebook-access-token

我正在扩展客户端访问令牌，如此处所述：[https ://developers.facebook.com/roadmap/offline-access-removal/#extend_token](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)

但我注意到请求经常返回短期访问令牌而不是扩展它。在我们所有的用户中，大约 70% 的时间*在*启用迁移后都会出现这种情况。

我们可以做些什么来解决它吗？为什么这会如此频繁地失败？

谢谢！

# sql - TSQL - 在整个列的字段中多次替换或删除两个不同字符串之间的字符串

> ID：11149110
> 
> 赞同：3
> 
> 时间：2012-06-22T01:25:37.470
> 
> 标签：sql, sql-server, tsql

我想替换或删除这两个字符之间的所有字符 < > 它们在整个字段中多次出现，并且在每行的不同情况下

我相信要替换的字符串是 html，所以当我尝试发布一个示例时，该网站只是将其注册为格式。

我使用替换来删除所有常见的字符串，例如用于换行的 html，但一些使用十六进制颜色值的字段因字段而异。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T02:56:38.423

```
DECLARE @foo TABLE(TAGS VARCHAR(MAX));
INSERT @foo VALUES('<fname>John</fname><lname>Dewey</lname>');

SELECT 1; --This will initialize @@ROWCOUNT if necessary. Might be optional depending on your query
WHILE @@ROWCOUNT > 0 BEGIN
    UPDATE @foo
    SET TAGS = STUFF(TAGS,CHARINDEX('<',TAGS),CHARINDEX('>',TAGS) - CHARINDEX('<',TAGS) + 1,'')
    WHERE TAGS LIKE '%<%>%'
END
SELECT * FROM @foo; 
```

结果

```
------------------------
JohnDewey 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T02:35:59.303

```
CREATE TABLE #html(Value NVARCHAR(MAX))
INSERT INTO #html(Value) VALUES('<ShouldBeRemoved>1 <Remove>abc<also remove>def<Take this out>ghi')
INSERT INTO #html(Value) VALUES('<ShouldBeRemoved>2 <Remove>abc<also remove>def<Take this out>ghi')
INSERT INTO #html(Value) VALUES('<ShouldBeRemoved>3 <Remove>abc<also remove>def<Take this out>ghi')

;with Cte(Value) AS (
    SELECT Value FROM #html
    UNION ALL
    SELECT REPLACE(Value, SUBSTRING(Value, CHARINDEX('<', Value), CHARINDEX('>', Value) - CHARINDEX('<', Value) + 1),'')
    FROM Cte
    WHERE CHARINDEX('<', Value) != 0
)
SELECT Value FROM Cte
WHERE CHARINDEX('<', Value) = 0
OPTION (MAXRECURSION 0);

DROP TABLE #html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-13T14:23:04.897

此代码适用于希望避免调用 UDF（用户定义函数）的人。假设你的一个 sql 表 col. 包含如下 HTML 标记，您想删除 和 之间的所有`<`内容`>`。 `[Remark] =" the HTML tags like: < div > < p >< span > We are trying to contact the company (Tel:&nbsp;< /span >< span> < /p > < /div > etc' "`

**步骤#1：**将结果集存储到 Temp 表

```
select .... into #t1 from....where...blah blah 
```

**步骤#2：**使用以下代码删除 < 和 > 之间的所有内容并更新字段。

```
WHILE @@ROWCOUNT > 0 BEGIN
    UPDATE #t1
    SET [Remark] = LTRIM(RTRIM(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(LTRIM(RTRIM(STUFF([Remark],CHARINDEX('<',[Remark]),CHARINDEX('>',[Remark]) - CHARINDEX('<',[Remark]) + 1,'') )), CHAR(9), ' '), CHAR(10), ' '), CHAR(11), ' '), CHAR(12), ' '), CHAR(13), ' '), '&nbsp;', '')))
    WHERE [Remark] LIKE '%<%>%'
END 
```

**Step#3** : 从 Temp 表中选择您想要的结果

```
SELECT * FROM #t1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-04T12:04:09.390

```
CREATE FUNCTION [dbo].[udf_RemoveHtmlTag] (@HTMLText VARCHAR(MAX))
RETURNS VARCHAR(MAX)
AS
BEGIN
    WHILE((CHARINDEX('<', @HTMLText)>0) and (CHARINDEX('>', @HTMLText)>0))
    Begin
        SET @HTMLText = REPLACE(@HtmlText,SUBSTRING(@HTMLText, CHARINDEX('<', @HTMLText), CHARINDEX('>', @HTMLText) - CHARINDEX('<', @HTMLText) + 1),'');       
    End

    RETURN @HTMLText
END
GO 
```

那么如何使用这个函数

```
select [dbo].[udf_RemoveHtmlTag]([column_name]) from tablename 
```

# html - 如何从 url 中获取图形并将它们放置在我的页面中？

> ID：11149111
> 
> 赞同：0
> 
> 时间：2012-06-22T01:25:44.763
> 
> 标签：html, pull

[http://www.bloomberg.com/markets/](http://www.bloomberg.com/markets/)有几个我想在我的 html 页面上显示的数字。

如果我只有一个 div 并说我希望它显示某些金融市场发生了多少变化，我如何让 div 显示发布给彭博社的任何数字？这样每当我重新加载我的网站时，彭博社的最新数据就会以纯文本形式显示在我的 div 中？

所以而不是

```
<div>0.05%</div> 
```

我有

```
<div>(some code here to pull the correct figure from bloomberg)</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:29:25.453

Bloomberg 有一个 API，您可以使用它免费获取他们的市场数据：

[http://www.openbloomberg.com/open-api/](http://www.openbloomberg.com/open-api/)

> 现在，您可以不受成本或限制地采用彭博的市场数据接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T01:29:16.627

您要问的是所谓的数据解析，这是很常见的请求。如果你想使用 PHP，[PHP 简单 HTML DOM 解析器](http://simplehtmldom.sourceforge.net/)或[phpQuery](http://code.google.com/p/phpquery/)提供了大量示例。

# php - PHP：从托管在 S3 / Cloudfront 上的图像获取图像大小

> ID：11149115
> 
> 赞同：1
> 
> 时间：2012-06-22T01:27:22.743
> 
> 标签：php, image, amazon-cloudfront

我将图像存储在 S3 存储桶中，转到别名为 images.mydomain.com 的云端分发。

在我的图像中，沉重的 php 页面具有通常的图像标签（来自我的服务器，而不是 ec2）：

img src="http://images.mydomain.com/picture.jpg" width="XXX" height="XXX"

我正在尝试找到一种简单快捷的方法来从分布在云端的这张图像中获取宽度和高度 XXX。

1）我试过getimagesize（）。这是一个简化的函数，显示了我需要做什么。它适用于存储在我的服务器上的图像，但不适用于从云端提供的图像。

```
function imagetag2($colorurl){
$img_path = getimagesize($colorurl);
$width=$img_path[0];
$height=$img_path[1];
$imagetag='<img src="' . $colorurl . '" width="' . $width . 'px" height="' . $height . 'px">';
return $imagetag;
} 
```

返回：“无法打开流：php_network_getaddresses：getaddrinfo 失败：名称或服务未知......” 此代码适用于存储在我的服务器上的图像。

3）我熟悉“在云端管理图像的框架”，可以将图像实际调整到我需要的尺寸，但是这个包对于这个小问题来说似乎有点矫枉过正。

# ubuntu - 我的 VPN 的 DNS 服务器，仅用于解析网络名称

> ID：11149118
> 
> 赞同：4
> 
> 时间：2012-06-22T01:27:30.747
> 
> 标签：ubuntu, bind, openvpn

当用户连接到我们的 VPN (OpenVPN) 时，我只需要设置一个 DNS 服务器来解析我们的网络服务器的名称。我可以成功地将 DNS 服务器的 IP 地址“推送”到客户端。我错觉使用 Bind9 为本地网络设置 DNS 服务器很容易。我错了。首先，我从 Google 找到的每个样本都是基于完全限定的域，而不是本地名称。我所说的本地名称类似于“server1”，而不是“server1.my.company.com”。但我发现了著名的“@”。

现在我有另一个问题。当我用“ping”或“nslookup”尝试“server1”时，它完全符合我的要求。它将“server1”解析为我们的内部 IP。伟大的。但是当我尝试“www.google.com”时，它无法解析 IP。这意味着客户端尝试使用我的 DNS 服务器而不是仍在 DNS 服务器列表中的互联网提供商 DNS 服务器来解决“www.google.com”。

有没有办法告诉客户端机器：我不认识这个人，见其他人？

我注意到“auth-nxdomain”默认设置为“no”。我试图将其设置为“是”，但它没有完成这项工作。

在 Ubuntu 9.04 下有我的 Bind9 配置文件：

**/etc/bind/named.conf.options**

```
options {
    directory "/var/cache/bind";

    // If there is a firewall between you and nameservers you want
    // to talk to, you may need to fix the firewall to allow multiple
    // ports to talk.  See http://www.kb.cert.org/vuls/id/800113

    // If your ISP provided one or more IP addresses for stable
    // nameservers, you probably want to use them as forwarders.
    // Uncomment the following block, and insert the addresses replacing
    // the all-0's placeholder.

    // forwarders {
    //      0.0.0.0;
    // };

    //auth-nxdomain no;    # conform to RFC1035
    auth-nxdomain yes;
    listen-on-v6 { any; };

    // To prevent the error ";; Got recursion not available from 10.8.0.1, trying next server"
    allow-recursion { 10.8.0.0/24; };
}; 
```

**/etc/bind/named.conf.local**

```
//
// Do any local configuration here
//

// Consider adding the 1918 zones here, if they are not used in your
// organization
//include "/etc/bind/zones.rfc1918";

// This is the zone definition.
zone "@" {
 type master;
 file "/etc/bind/zones/vpn.db";
};

// This is the zone definition for reverse DNS.
zone "0.8.10.in-addr.arpa" {
 type master;
 file "/etc/bind/zones/rev.0.8.10.in-addr.arpa";
}; 
```

**/etc/bind/zones/vpn.db**

```
@  IN      SOA    vpn.local. admin.local. (
  2011041608  ; Serial
      604800  ; Refresh
       86400  ; Retry
     2419200  ; Expire
      604800  ; Negative Cache TTL
);

@  IN      NS     vpn.local.

server1         IN      A      10.8.0.1 
```

**/etc/bind/zones/rev.0.8.10.in-addr.arpa**

```
@  IN      SOA    vpn.local. admin.local. (
  2011041608  ; Serial
      604800  ; Refresh
       86400  ; Retry
     2419200  ; Expire
      604800  ; Negative Cache TTL
);

@  IN      NS     vpn.local.
1  IN      PTR    mrsvn 
```

我对“SOA”一无所知。我从一个例子中复制了数字。而且我不确定“vpn.local”。和“admin.local”。无论如何，DNS 服务器正常工作。因为我要做的事情很多，我没有时间阅读 1000 页的文字才能执行这么简单的任务。我需要在服务器端将请求转发到我自己的 DNS 服务器吗？我已经通过更改选项文件中的“转发器{...}”进行了尝试，但它不起作用。而且我不喜欢通过 VPN 进行所有 DNS 解析的想法。你有解决方案吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T01:38:08.213

您实际上也可以让您的内部 DNS 服务器解析外部域。那应该可以解决您的问题。我解决了完全相同的问题，并为我的内部 DNS 使用了[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html)。

在尝试了自己的内部 DNS 后，我通过将 VPN 网关机器上的 DNS 服务器设置为使用谷歌 DNS 解决了这个问题。所以 /etc/resolv.conf 中的 DNS 配置看起来像：

```
nameserver 127.0.0.1
nameserver 8.8.8.8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T21:06:17.410

我找到了解决方案。首先，在我将我的区域定义为根区域之前，转发器没有参与其中。区域“@”指的是区域“.”，即根区域。当我发现它时，经过一番思考，我记得DNS客户端可以配置哪些搜索域。

因此，首先，我更改了文件**/etc/bind/named.conf.local**的以下行：

```
zone "@" { 
```

到

```
zone "vpn.my.company.com." { 
```

之后，对于**/etc/bind/zones/vpn.db**和**/etc/bind/zones/rev.0.8.10.in-addr.arpa**我已经替换了“vpn.local”。通过“vpn.my.company.com”。和“admin.local”。通过“admin.my.company.com”。

最后，在 OpenVPN 的配置文件中，我添加了以下行：

```
push "dhcp-option DOMAIN vpn.my.company.com" 
```

我已经重新启动了一切......就是这样！现在一切都解决了。

编辑：我阻止了其他域的名称解析，然后由 VPN 的 DNS 服务器在文件**/etc/bind/named.conf**中执行此操作：

```
// prime the server with knowledge of the root servers
zone "." {
        type master;
        //type hint;
        file "/etc/bind/db.root";
        allow-query { 127.0.0.0/8; 192.168.0.0/16; };
}; 
```

这样，其他域就可以从客户端的 Internet 提供商 DNS 服务器解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T01:37:12.210

要进行无法响应其他名称服务器的绑定转发查询，您需要将其他 DNS 服务器的 IP**地址**放在`/etc/bind/named.conf.options`.

**此部分在您的文件中被注释掉**，因此 Bind 不知道将查询转发到哪里。

```
// forwarders {
//      0.0.0.0;
// }; 
```

例如，您可以使用 ISP 的 DNS 服务器或 Google 公共 DNS 服务器：

```
forwarders {
       //Google public DNS
       8.8.8.8;
       8.8.4.4;
}; 
```

您可以在此部分中添加任意数量的条目。

# installation - MVC4 RC 中缺少单页应用程序模板

> ID：11149119
> 
> 赞同：10
> 
> 时间：2012-06-22T01:27:41.910
> 
> 标签：installation, asp.net-mvc-4, singlepage, asp.net-spa

当我在开发 PC 上安装 MVC4 beta 时，它有一个 SPA（单页应用程序）模板。今天在具有相同设置（VS2010 SP1、win7）的另一台 PC 上，我安装了[MVC4 RC](http://www.microsoft.com/en-us/download/details.aspx?id=29935)，但不再提供 SPA 模板（见图）。还有谁有相同的问题吗？或者这是我找不到的记录更改？

![在此处输入图像描述](../Images/c6425ed008bb4765356eb383ce74adc2.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T01:41:00.293

来自 ASP.NET MVC 4 Beta 的更改

**此版本中 ASP.NET MVC 4 Beta 的主要变化总结如下：**

删除了 ASP.NET 单页应用程序：ASP.NET MVC 4 Beta 附带的 ASP.NET 单页应用程序 (SPA) 作为构建应用程序体验的早期预览，其中包括使用 JavaScript 进行的重要客户端交互。SPA 不会随 MVC 4 的最终版本一起发布，但会在 MVC 4 版本之外继续发展。查看 ASP.NET SPA 主页了解详细信息。

...

[http://www.asp.net/whitepapers/mvc4-release-notes](http://www.asp.net/whitepapers/mvc4-release-notes)

PS，哇，我很高兴我没有将它用于我现在构建的应用程序。3个月前我正在考虑它，但决定不冒险，因为MS说它是实验性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T18:47:43.630

[您可以在2012 年秋季更新](http://www.asp.net/vnext/overview/fall-2012-update)中获取 SPA 模板。有关模板的更多信息，请[点击此处](http://blogs.msdn.com/b/webdev/archive/2012/12/19/mvc-single-page-template-update-for-asp-net-and-web-tools-2012-2-rc.aspx)和[此处](http://www.johnpapa.net/inside-the-asp-net-single-page-apps-template/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:01:10.530

现在风险很大

例如，如果您尝试使用 System.json 运行它以进行序列化，它在 WebApi 和 DBDATAContext 方法中运行良好，但无法将它与 Entities 关系实体循环错误等一起使用。（有一个解决方案可以更改方法 get 的私有访问，但是必须更改所有实体的所有访问方法的工作量太大。

# .net - 查找模式，输出新文件

> ID：11149120
> 
> 赞同：0
> 
> 时间：2012-06-22T01:27:48.093
> 
> 标签：.net, regex, parsing

我试图获取像这样分隔的数据：

可执行文件 -u admin -p admin -o mylogfile.log -project "ProjectName" -in 20 -data "somedatahere..." -tr "some tracking data"

作为文本中的单行，虽然有时会有额外的行......我可以用什么方式：过滤新行或b）使用正则表达式重新输出正确的版本？

它们都必须有 -tr "" 和 -data "" 等（都在一行上）

有什么简单的方法可以完成吗？通过linux或其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:52:20.040

使用正则表达式`/((\s-data\s+".*?").*(\s-tr\s+".*?")|(\s-tr\s+".*?").*(\s-data\s+".*?"))/`

[在这里](http://ideone.com/0FLhY)查看并测试它。

# mysql - Mysql 对 /etc/mysql/my.cnf 的更改不起作用

> ID：11149122
> 
> 赞同：0
> 
> 时间：2012-06-22T01:28:04.863
> 
> 标签：mysql, database, mysql-error-1064

我遇到了mysql的问题。我是初学者。

我在 Ubuntu 上安装了 mysql。
安装后我运行 sudo service mysql status
显示它已经启动了。

现在由于绑定地址是 127.0.0.1，我将其更改为 0.0.0.0
在对 /etc/mysql/my.cnf 进行更改后，当我通过运行命令保存并重新启动 mysql 时：
sudo service mysql restart
它有时会挂起一段时间很久。
有时，它说它已经启动了 mysql 服务器。但是，当我运行
ps -ef | grep mysql
我看不到 mysqld 正在运行。

我需要添加或更改哪些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:52:35.060

您可以检查 mysql 目录中的日志文件以获取更多信息吗？它应该被命名为“YOUR_MACHINE_NAME.err”。

# coverflow - Contentflow：如何为流式非图像项目设置固定宽度

> ID：11149123
> 
> 赞同：2
> 
> 时间：2012-06-22T01:28:21.447
> 
> 标签：coverflow

所以我正在尝试使用 ContentFlow (http://www.jacksasylum.eu/ContentFlow/index.php) 来显示从数据库中提取的非图像内容。我让每个 ContentFlow 项目都通过 AJAX 加载数据库内容，但是，我想对其进行自定义，以便项目具有固定的宽度。

例如。我看着在封面流中显示 5 个项目。我希望中心/主要项目的尺寸最大（约 700 像素 x 500 像素）

然后我想相邻的项目分别约为 100px 和 70px 宽。

从我看到的代码来看，ContentFlow 宽度会根据浏览器宽度进行调整。

有没有办法根据它们所在的位置来修复项目宽度？

谢谢

# mysql - 我应该使用什么表关联？

> ID：11149124
> 
> 赞同：0
> 
> 时间：2012-06-22T01:28:24.207
> 
> 标签：mysql, database, relationships

我是创建具有复杂关系的数据库的新手，我现在正在创建一个项目并且有很多复杂的关系。我真的很困惑我应该使用哪些关系。

一点背景知识：我正在编写一个向观众展示幻灯片的应用程序。我有三个主要表格：创建者（制作幻灯片的人）、学习者（查看幻灯片的人）和模块（幻灯片）。创建者授予学习者对特定模块的访问权限，并且学习者可以访问多个创建者的幻灯片。

我了解所有模块都有一个创建者，因此我需要在创建者的 ID 号和模块表中名为 creator_id 的列之间使用 1:1 识别关系。我难以理解的是如何将创建者、模块和学习者联系在一起。我相信我应该使用：m 识别模块和创建者之间的关系，但我不知道如何添加哪些学习者可以访问模块。

# jquery - jQuery 网站导航

> ID：11149126
> 
> 赞同：0
> 
> 时间：2012-06-22T01:28:35.677
> 
> 标签：jquery, html, ajax, navigation

我正在尝试使用 JQuery 执行最基本的导航，但我失败了。

我有多个包含各种内容的 .html 文件，但我想要一个持久页面并将内容加载到 div 中。我目前实现导航的方式：

1.  用户点击 NavLink1
2.  JQuery 执行以下操作：

    > event.preventDefault()
    > (#my-content-div).load(NavLink1-content);

3.  URL 现在显示为“www.mydomain.com/#NavLink1”。

在用户浏览 www.mydomain.com/NavLink1 并且内容正确加载的情况下，我究竟如何实现与#NavLink1 的直接链接和/或实现系统？

我的一个导航链接的导航代码：

```
 $("#story-button-link").click(function(event){
        $(this).addClass("selected");
        $("#landing-page-article").load('./story.html', function() {
            $(document).ready(function() {
            });
        });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T01:33:36.157

如果您不介意只支持较新的浏览器版本，您可以使用 HTML5 历史管理功能 -[`pushState`](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)具体而言，它允许您`yourdomain.com/NavLink1`在不重新加载页面的情况下更改 URL，允许您做同样的事情但保持 URL 完整.

如果你**介意**旧版浏览器，你可以使用[History.js](https://github.com/balupton/history.js)来解决跨浏览器的兼容性问题。在较新的浏览器上，它将使用 HTML5 功能，而在较旧的版本上，它将恢复为哈希更改。

# android - SOS：将视频从安卓相机流式传输到 PC 上的 VLC 播放器

> ID：11149130
> 
> 赞同：1
> 
> 时间：2012-06-22T01:28:59.353
> 
> 标签：android, vlc, live555

我正在寻找一些将android设备的实时摄像记录流式传输到系统上的vlc播放器的代码。这意味着您的 android 设备摄像头已打开并且您正在捕获视频，同时当您启动 vlc 播放器时，该视频将在摄像头上播放

任何帮助都会很棒，如果可能的话，请给我一些代码

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:21:48.750

[http://code.google.com/p/spydroid-ipcamera/](http://code.google.com/p/spydroid-ipcamera/)

真的，无需提供有关它的详细信息。它是开源的，并且可以正常工作。

# android - 我最早可以在 View 子类中使用 findViewById 是什么时候？

> ID：11149133
> 
> 赞同：4
> 
> 时间：2012-06-22T01:29:09.883
> 
> 标签：android, layout

我有我编写的自定义视图，它将一系列按钮连接到预定义的方法。这些按钮是我正在创建的视图的子级。

我的问题是，我可以用来覆盖以使用一系列`findViewById`' 的最早方法是什么？我相信我不能在构造函数中使用它，因为任何调用`findViewById`都会返回`null`。

谢谢，

布拉德。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T17:54:17.870

如果您的类是 的子类，则可以在此方法`ViewGroup`中覆盖`onFinishInflate`和使用：`findViewById`

```
public void onFinishInflate() {
    super.onFinishInflate();
    TextView view = (TextView) findViewById(R.id.view_id);
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T02:09:22.187

最早可以`findViewById`在扩展布局后立即访问子项。

```
inflator.inflate(R.layout.main, this);
Button b = (Button)findViewById(R.id.button01); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T02:25:16.917

如果您想在您的自定义视图[onAttachedToWindow](http://developer.android.com/reference/android/view/View.html#onAttachedToWindow%28%29)的一侧查找ViewById可能是一个好地方，这可能对设置任何侦听器很有用，但如果您只想在其他覆盖方法中使用，我主要采用如下方式：

```
View mView;

View getView(){
     if(mView==null){
         mView=findViewById(...);
     }
     return mView;
} 
```

# c++ - 在 Win32 二进制文件中获取类偏移量

> ID：11149134
> 
> 赞同：0
> 
> 时间：2012-06-22T01:29:15.187
> 
> 标签：c++, winapi

对于 Win32 可移植可执行文件 (PE)

*   如何获取使用的类列表
*   如何获取给定类的偏移量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:41:30.103

一个类没有偏移量——它的方法有偏移量。如果 PE 文件是 DLL，并且导出了一个类，则可以从导出的函数表中获取其方法的偏移量。名称将被破坏。修改方案是特定于编译器和版本的。

您可以使用 DUMPBIN 工具（Visual Studio 或 Platform SDK 提供）来查看导出表。IIRC，它甚至可以为您解开名称。如果您想以编程方式执行此操作，请使用 ImageHlp API 中的函数 -`ImageLoad()`等等。

没有很好的方法来获取未导出的类方法的偏移量。

此外，可以在 MAP 文件、调试符号或 PDB 文件中找到偏移量。如果它是第三方产品，那么您很可能无法使用这些产品。

重新编辑：Microsoft DLL。Microsoft 通过 Microsoft Symbol Server 为他们的许多文件（Win32 和 .NET）提供调试符号。自 v. 2005 以来的 Visual Studio 可以在 DLL 加载时自动提取这些符号。

# git - `git checkout source_branch ` 并指定当前分支上的文件？

> ID：11149137
> 
> 赞同：1
> 
> 时间：2012-06-22T01:29:31.363
> 
> 标签：git

我一直在尝试从备用 git 分支中获取文件，并以新的指定名称将文件复制到当前分支。

[我找到了如何使用此处](http://jasonrudolph.com/blog/2009/02/25/git-tip-how-to-merge-specific-files-from-another-branch/)`git checkout source_branch <paths>`指定的方法将文件从备用分支复制到当前分支，但我无法确定如何指定新文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:13:43.357

您可以使用命令`git show commitish:path > newpath`。这里`commitish`可以像往常一样是一个分支名称。

# hadoop - 如何从文本文件转换为序列文件？

> ID：11149140
> 
> 赞同：0
> 
> 时间：2012-06-22T01:29:53.943
> 
> 标签：hadoop, apache-pig

我有一个大的 .txt 记录文件，我需要将其转换为（hadoop）序列格式以提高效率。我在网上找到了一些答案（例如[How to convert .txt file to Hadoop's sequence file format](https://stackoverflow.com/questions/5377118/how-to-convert-txt-file-to-hadoops-sequence-file-format)），但我是 hadoop 新手，不太了解它们。如果您可以多解释一下，或者您有其他解决方案，那就太好了。如果有帮助，记录将按行分隔。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:50:08.780

既然您说您是 hadoop 的新手，那么您知道`Mapper`and的基本概念`Reducer`吗？它们都有 KEY_IN_CLASS、VALUE_IN_CLASS、KEY_OUT_CLASS、VALUE_OUT_CLASS，所以在你的情况下，你可以简单地使用 mapper 进行转换，

对于 KEY_IN_CLASS，您可以使用默认值`LongWritable`，

您需要使用 VALUE_IN_CLASS `Text`，因为`Text`类处理文本输入。

对于 KEY_OUT_CLASS，您可以使用`NullWritable`，如果您没有特定键，则它是一个空键。

对于 VALUE_OUT_CLASS，使用`SequenceFileOutputFormat`.

我相信为了使用`SequenceFileOutputFormat`，您需要告诉 SequenceFileOutputFormat 您使用什么键类和值类。

# python - 在后台运行的 Redis-Queue (RQ) worker

> ID：11149141
> 
> 赞同：1
> 
> 时间：2012-06-22T01:29:57.250
> 
> 标签：python, redis

**在运行命令rqworker**并测试了一些东西之后，我正在测试[RQ](http://python-rq.org/)（Redis-Queue），我最终重新启动了我的计算机而没有优雅地关闭工作程序。

 **现在无论我是否有**rqworker**运行，在后台都有一个名为 Ubuntu.4497 处于空闲状态的恒定工作人员。

有人能告诉我如何优雅地关闭这个似乎在后台运行的工作人员吗？

44497 不是 PID，因为我找不到 PID 4497 的任何内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:44:50.927

RQ 主要开发人员表示这是一个错误。[https://github.com/nvie/rq/issues/55](https://github.com/nvie/rq/issues/55)**

# ios - 是否可以在 iOS 上的 Facebook 移动应用程序中深度链接到特定页面或位置？

> ID：11149143
> 
> 赞同：7
> 
> 时间：2012-06-22T01:30:16.193
> 
> 标签：ios, facebook

是否可以在我的移动应用程序中包含一个链接，将原生 Facebook 应用程序打开到特定页面、事件、帖子或其他位置？

谢谢，瑞安

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T01:59:11.143

```
fb://profile – Open Facebook app to the user’s profile
fb://friends – Open Facebook app to the friends list
fb://notifications – Open Facebook app to the notifications list (NOTE: there appears to be a bug with this URL. The Notifications page opens. However, it’s not possible to navigate to anywhere else in the Facebook app)
fb://feed – Open Facebook app to the News Feed
fb://events – Open Facebook app to the Events page
fb://requests – Open Facebook app to the Requests list
fb://notes- Open Facebook app to the Notes page
fb://albums – - Open Facebook app to Photo Albums list 
```

例如

```
 fb://post/(postId) 
```

然后像这样调用：

```
NSURL *url = [NSURL URLWithString:@"fb://<insert function here>"];
[[UIApplication sharedApplication] openURL:url]; 
```

更多示例的来源：[http ://wiki.akosma.com/IPhone_URL_Schemes#Facebook](http://wiki.akosma.com/IPhone_URL_Schemes#Facebook)

# javascript - 谷歌地图获得具有城市名称的纬度和经度？

> ID：11149144
> 
> 赞同：29
> 
> 时间：2012-06-22T01:30:22.243
> 
> 标签：javascript, google-maps

我想通过向 API 提供城市名称来获取城市的纬度和经度。无论用户如何输入城市，它都应该适用于大多数城市。

例如：

城市可以是“迈阿密，美国”或城市可以是“迈阿密，美国”

如何打印它的纬度？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-22T01:41:05.257

您可以在此处找到 jsfiddled 代码：http: [//jsfiddle.net/YphZw/](http://jsfiddle.net/YphZw/) 或以下：

```
$("#btn").click(function(){
            var geocoder =  new google.maps.Geocoder();
    geocoder.geocode( { 'address': 'miami, us'}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            alert("location : " + results[0].geometry.location.lat() + " " +results[0].geometry.location.lng()); 
          } else {
            alert("Something got wrong " + status);
          }
        });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<html>
<head>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
</head>
<body>
    <input id="btn" type="button" value="search for miami coordinates" />
</body>
</html>
```

如果您想要更多 Javascript API 示例，请尝试以下链接：[https ://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/)

我写的代码灵感来自*geocoding-simple*示例。

问候。

编辑1：

您可以使用非官方的 PHP 库来实现它。检查这个例子： [http](http://www.bradwedell.com/phpgooglemapapi/demos/geocoding.php) ://www.bradwedell.com/phpgooglemapapi/demos/geocoding.php （代码在底部=

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-22T01:40:11.147

您可以使用 Google 的地理编码服务，例如，

[http://maps.googleapis.com/maps/api/geocode/xml?address=Miami+FL&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=Miami+FL&sensor=false)

这将为您提供各种格式（JSON、XML 等）的地理参考数据。无论如何，该位置肯定在返回的数据块中。

API 文档位于：

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-08T03:36:44.283

**根据下面的评论更新：** 2018 年 7 月之后不起作用。

* * *

这似乎是不必要的复杂。这是一个示例“附近事件”地图。它需要`City, State`s，将它们转换为`latLng`坐标，并在地图上放置标记：

```
// Nearby Events with Google Maps
window.nearbyEventsMap = () => {
    const centerOfUS = {
        lat: 37.09024,
        lng: -95.712891
    }

    // Create a map object and specify the DOM element for display.
    const map = new google.maps.Map(document.querySelector('#nearby_events_map'), {
        center: centerOfUS,
        scrollwheel: false,
        zoom: 4
    })

    // Create a marker and set its position.
    const geocoder = new google.maps.Geocoder()

    // Filter out duplicate cityStates
    let cityStates = {}
    document.querySelectorAll('.nearby_event_city_state').forEach(event => {
        cityStates[event] = event.innerText
    })

    // `cityState` is in the format of "City, State". It's not picky about state being a word or the abbreviation.
    for (const cityState in cityStates) {
        const location = cityStates[cityState]

        geocoder.geocode({
            address: location
        }, function (results, status) {
            if (status === 'OK') {
                const result = results[0].geometry.location
                const lat = result.lat()
                const lng = result.lng()
                const latLng = {
                    lat,
                    lng
                }

                return new google.maps.Marker({
                    map: map,
                    position: latLng
                })
            }
        })
    }
}
// /Nearby Events with Google Maps 
```

确保包含您的`<script>`标签。

```
<script src="/dist/js/main.js"></script>

<!-- We're loading this after the main.js script so the callback from main.js will be available to it. -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=nearbyEventsMap"></script> 
```

StackOverflow 请加入其他所有人并获得带有语法突出显示的 GitHub 降价...

# linux - Linux服务器上的Dropbox安装不起作用

> ID：11149150
> 
> 赞同：0
> 
> 时间：2012-06-22T01:30:54.347
> 
> 标签：linux, dropbox, dedicated-server

我正在尝试在我的专用服务器上安装 Dropbox 以备份数据库，但是当我运行时，`tar -tzf dropbox.tar.gz`我不断收到此错误并且无法找到解决方案。

错误：

```
gzip: stdin: not in gzip format
tar: Child returned status 1
tar: Error exit delayed from previous errors 
```

cmd运行：

```
wget -O dropbox.tar.gz "http://www.dropbox.com/download/?plat=lnx.x86"
tar -tzf dropbox.tar.gz 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:41:54.657

你没有压缩包。验证文件是否正确下载。

# url - 如何在不暴露链接本身的情况下设置链接？

> ID：11149152
> 
> 赞同：-1
> 
> 时间：2012-06-22T01:31:31.087
> 
> 标签：url, post, hyperlink

实际上它实际上并不是一个问题，但我正在思考和寻找它一段时间。当我们使用 php 并设置一些链接时，我们可以使用类似的东西 -

```
 <a href="index.php?action=something&something=someotherthing">some link</a> 
```

这样，任何人都可以通过查看 url 来了解发生了什么。有没有办法像元素的`POST`方法一样让它隐藏起来？`form`我不希望用户修改和使用我的参数和值。让我们猜猜我不想加密值和参数，我不能使用`form`元素，因为它们应该是纯链接。如果我不想使用 url 重写引擎怎么办。

专家有什么想法吗？

编辑：

我忘了提到另一件最重要的事情，即我需要获取要通过该链接传递的参数和值，并在我链接到的页面中做一些事情。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:45:16.433

您可以使用隐藏表单

```
<form action="realurl" method="post">
    <input type="hidden" name="parameter" value="value1"></input>
</form>
<a onclick="forms[0].submit();" href="http://fake">link text</a> 
```

# javascript - IE8 有时不加载 CSS

> ID：11149153
> 
> 赞同：0
> 
> 时间：2012-06-22T01:31:36.950
> 
> 标签：javascript, css, internet-explorer-8

这要杀了我伙计们

[http://publish.uwo.ca/~mchum/index.htm](http://publish.uwo.ca/~mchum/index.htm)

在 FF、IE9 中显示良好。Chrome 和移动版 Safari 中的一些小布局问题

每当我尝试从 IE7、IE8 中的服务器加载时，它都是一个废话。它通常在第一次加载时更可靠，但如果你按 F5（甚至 ctrl-F5），它不会完全加载。

有时它会加载一些背景，有时它根本不会加载 CSS 或 javascript。

奇怪的是它只有在我上传到服务器后才有效；它不会在本地发生。

我是这里的菜鸟，而且还在学习很多东西。我几乎觉得我已经咬掉了更多我可以咀嚼的东西。请提供一些（仁慈的）帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:00:26.347

看起来您的 Web 服务器启用了 GZIP 压缩。下面的帖子讨论了您需要发送的标题，以便 IE 一致地处理您的 CSS 和 JS 文件。我在 IE6 上遇到过这个问题，但至少 IE7 似乎仍然是个问题。

我不肯定这是问题，但值得研究。

[为什么使用 Internet Explorer 进行 gzip 压缩不起作用？](https://stackoverflow.com/questions/1241822/why-is-gzip-compression-with-internet-explorer-not-working)

# javascript - 在haml javascript块中插入ruby if语句

> ID：11149154
> 
> 赞同：15
> 
> 时间：2012-06-22T01:31:37.933
> 
> 标签：javascript, ruby-on-rails, ruby, haml

这是我目前拥有的代码：

```
:javascript
    // do something
- if current_user.role? :client
    :javascript
        //do something else 
```

它显然不是很干净，因为我在重复 :javascript haml 过滤器。我想避免这种情况，但我不知道如何在 HAML :javascript 块中正确编写 Ruby“if”语句。

我知道如何用#{} 插入变量，但是你如何对整个 if/for/etc 做同样的事情。陈述？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-27T06:24:26.407

我这样做：

```
if(#{params[:param_to_check_for].blank? ? "true" : "false"}) 
```

在上述情况下，条件是 `params[:param_to_check_for].blank?`。

它将 JavaScript 呈现为：`if(false)`或`if(true)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T02:08:54.283

我没试过，但我想你可以

```
:javascript
    // do something
- if current_user.role? :client
    ="//do something else" 
```

（就像[这里](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#ruby_blocks)的第二个例子一样。）

对于非常短的 javascript，您也可以尝试

```
:javascript
    // do something
    #{current_user.role? :client ? "//do something else" : ""} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T15:38:45.297

我已将 Ruby/HAML 变量插入到显式 JS`true`或`false`JS 条件中，如下所示：

```
$("#cancel").click( function() {
  if (#{ !!my_flag_variable })
    window.location.href = "./";
  else
    $("#dialog").hide();
} ); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T04:46:36.340

我已经通过`= yield :foot_scripts`布局中的调用完成了此操作，然后：

```
= if condition
  - content_for :foot_scripts do
    - render :partial => "page_specific_javascript" 
```

在我看来——这样我可以确保 Javascript 在我希望它在 DOM 中的位置准确执行（在其他所有内容之后），并将它维护在一个单独的文件中，这非常干净。从您的视图文件中获取脚本？好的！

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-22T01:42:51.950

这是非常正确的。

另一种选择是你可以把它放在一个`.js.erb`部分中，然后从你的 haml 视图中渲染它。

然后你可以做

```
// do something
<% if condition == true %>
  // do something else
<% end %> 
```

# asp.net - Orchard - 从主题布局中获取内容的标题

> ID：11149157
> 
> 赞同：8
> 
> 时间：2012-06-22T01:32:12.330
> 
> 标签：asp.net, asp.net-mvc, orchardcms

以这种速度，这会让我发疯。从 Orchard 主题的 Layout.cshtml 文件内部，如何确定主体内容的标题？

我尝试过使用 Shape Tracer，但似乎没有帮助。这些都没有给我任何文字。

```
@Html.Title()
@Model.Title                
@Model.Content.Parts_Common_Body.ContentItem.TitlePart
@Model.ContentItem.Parts_Common_Body.ContentItem.TitlePart 
```

**更新：** 这里的 HTML 应该显示最终结果需要是什么样子才能保持主题完整，以及在我开始使用它之前显示主题的图片。这个 HTML 只是我关心的部分的一个片段。在图片中，搜索的是 ContentHeader 区域中的内容。

```
<div id="wrapper-header-inner">
        <div id="header-inner">
        @Zone(Model.ContentHeader)
        <h1 class="pagetitle">
            Title Here
        </h1>
        </div><!-- #header-inner -->
</div><!-- #wrapper-header-inner -->
}

<div id="wrapper-content">
    <div id="content">
        @if(Model.Content != null) {
        <div class="main" class="@mainContentClass">
            @if(Model.Content != null && Model.LeftAside == null && Model.RightAside == null) {
                <div id="maincontentFull" class="positionleft">
                    @Zone(Model.Content)
                </div>
            }
            @* Other layout possabilities if left and/or right asides are present *@
        </div>
        }
    </div>
</div> 
```

![结果布局的快照](../Images/f3365b7c133b69647a8a865a38a7b86a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-13T17:44:47.933

作为跟进，自从我提出这个问题以来，Orchard 的更新包括使用placement.info 文件将某些部分重新路由到其他区域的能力，实际上让我完成了我正在寻找的事情。

```
<Placement>
  <Match ContentType="Page">
    <Place Parts_Title="/TitleZone"/>
  </Match>
</Placement> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:17:14.400

在 Layout 中，Model 是 Layout 对象。它与将要呈现到内容区域的任何内容无关，但它确实具有应该由该内容设置的 Title 属性。不过，这并不完全是您所要求的：它最终将成为 HTML 标题。

如果您想获得呈现到顶级内容区域的项目的标题，那么，布局确实不是寻找它的好地方。我需要更多地了解您到底想要实现什么，但这似乎倒退了。事实上，您甚至不能假设只有一个这样的内容项，或者只有一个。

那么你到底想要做什么呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T04:11:45.457

这对你有用吗？

```
@Html.Title() 
```

如果您正在寻找页面标题，那应该可以工作。但是，如果您希望直接访问 TitlePart ...

```
@Model.Title 
```

这是有效的，因为如果您查看 Parts.Title 模板，则有一行代码可以执行此操作...

```
@{
   Layout.Title = Model.Title;
} 
```

# linux - SNMP V3 的 Perl 不工作，但与 SNMP V1/2 (Redhat Linux) 一起工作

> ID：11149162
> 
> 赞同：1
> 
> 时间：2012-06-22T01:33:34.643
> 
> 标签：linux, perl, snmp, net-snmp

我有一个注册 SNMP OID 的 Perl 脚本。使用 SNMP 1/2c，它能够成功注册所有 OID。但是，使用 SNMP V3，它只能部分工作。

如下所示，使用 SNMP V3，它能够成功注册“$root_OID.0.0.0”。但是，当尝试调用“$root_OID.0.0.1”的 java 代码时，它会超时。

有谁知道，为什么我能够在 SNMP V1/2c 中成功调用 java，但不能在 SNMP V3 中调用？

非常感谢

这是我的 Perl 脚本：

```
#!/usr/bin/perl

use NetSNMP::OID (':all'); 
use NetSNMP::ASN qw(ASN_OCTET_STR ASN_INTEGER);
use NetSNMP::agent (':all');

sub myhandler { 
    my ($handler, $registration_info, $request_info, $requests) = @_; 
    my $request;
    my $root_OID = ".1.3.6.1.4.1.8072.9999.9999.0"; 

    my $CLASSPATH = "/opt/BPL/JBoss/BPL_JBossJMX.jar:/opt/jboss-5.1/client/*";
    my $CLASSNAME = "com.XXXXX.XXXXX.XXXXX.jmx.BPLJbossJMX_For_SNMP";
    my $ENV = "localhost";
    my $PORT = "8099";  
    my $LOG4JFILELOC = "/opt/BPL/JBoss/JBoss-BPL-Log4j.xml";

    for($request = $requests; $request; $request = $request->next()) { 
        my $oid = $request->getOID(); 
        if ($request_info->getMode() == MODE_GETNEXT) { 
            if ($oid < new NetSNMP::OID("$root_OID.0.0.0")) { 
                my $INPUTSTRNAME = "HeapMemoryUsageZZZZZ";
                $request->setOID("$root_OID.0.0.0"); 
                $request->setValue(ASN_OCTET_STR, $INPUTSTRNAME); 
            } elsif ($oid < new NetSNMP::OID("$root_OID.0.0.1")) {
                my $INPUTSTRNAME = "HeapMemoryUsage";
                my $OUTPUT= `java -cp $CLASSPATH $CLASSNAME $ENV $PORT $INPUTSTRNAME $LOG4JFILELOC`;
                chomp($OUTPUT);
                $request->setOID("$root_OID.0.0.1");
                $request->setValue(ASN_INTEGER, $OUTPUT);
            }
        } 
    }     
}

my $rootOID = ".1.3.6.1.4.1.8072.9999.9999.0"; 
my $regoid = new NetSNMP::OID($rootOID); 
$agent->register("BPL-JBoss", $regoid, \&myhandler); 
```

这是我的 /etc/snmp/snmpd.conf 文件（SNMP V1/2c 禁用）：

```
###############################################################################
# snmpd.conf:
###############################################################################

#com2sec notConfigUser  default       public

#       groupName      securityModel securityName
#group   notConfigGroup v1            notConfigUser
#group   notConfigGroup v2c           notConfigUser

view   systemview    included   .1.3.6.1.4.1.8072.1.3.2
view   systemview    included   .1.3.6.1.2.1
view   systemview    included   .1.3.6.1.2.1.25.1.1
view   systemview    included   .1.3.6.1.4.1.2021       
view   systemview    included   .1.3.6.1.4.1.8072.9999.9999

#access  notConfigGroup ""      any       noauth    exact  systemview none none

###############################################################################
syslocation Unknown (edit /etc/snmp/snmpd.conf)
syscontact Root <root@localhost> (configure /etc/snmp/snmp.local.conf)

###############################################################################
pass .1.3.6.1.4.1.4413.4.1 /usr/bin/ucd5820stat

###############################################################################
perl do "/home/XXXXXXX/JBoss_hello_world.pl"
rouser TEST_USERNAME priv 
```

这是使用 SNMPV3 时我的 SNMPWALK 的结果。

```
-$snmpwalk -v 3 -l authPriv -a sha -A TEST_PASSWORD -x AES -X TEST_PASSWORD -u TEST_USERNAME localhost .1.3.6.1.4.1.8072.9999.9999
NET-SNMP-MIB::netSnmpPlaypen.0.0.0.0 = STRING: "HeapMemoryUsageZZZZZ"
Timeout: No Response from localhost 
```

# .htaccess - 样式和选项的替代方案 +Indexes .htaccess

> ID：11149164
> 
> 赞同：1
> 
> 时间：2012-06-22T01:33:38.070
> 
> 标签：.htaccess, options, indexing

我厌倦了看我的文件。

`.htaccess`在没有对服务器的 root 访问权限的情况下，似乎没有太多选项可以修改 Apache 的 Options +Indexes 布局的外观。似乎您也无法以类似的方式通过根目录中的 1 个 PHP 文件*安全地*浏览目录和子目录（因为我可以设置样式。）

我已经看过关于如何更改某些输出等的长度的 tuts `.htaccess`，但也许有一种我不知道的编程语言可以安全地模拟相同类型的文件浏览并且仍然能够采用样式属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:02:34.940

您可以使用`HeaderName HEADER.html`和`ReadmeName FOOTER.html`创建自定义页眉和页脚。您可以在标题中包含一些 CSS 以使列表看起来更漂亮。

不知道为什么你会认为 PHP 不能保存使用。您确实需要小心不要授予对指定文件夹之外的文件的访问权限，但这并不是很难做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T16:16:34.843

实际上，+Indexes 有很多样式选项。您不仅可以添加页眉（可选择禁用自动生成的`<html>...<body>`标签）和页脚，还可以使用`IndexStyleSheet cute.css`. 使用它和一些聪明的选择器，可以创建非常好的列表。查看[官方文档](http://httpd.apache.org/docs/2.2/mod/mod_autoindex.html)了解更多详情。

# wpf - 不应用 generic.xaml 中的样式

> ID：11149167
> 
> 赞同：22
> 
> 时间：2012-06-22T01:34:09.647
> 
> 标签：wpf, styles, themes, generic.xaml

我制作了一个类库程序集，在其中创建了自定义控件，并在 generic.xaml 文件中定义了默认样式。

只要有很多人发布它，这似乎是一个很常见的问题。但是我找不到任何有用的答案。

*   generic.xaml 位于 Themes 文件夹中。
*   将generix.xaml 文件Build Action 设置为Page。
*   ThemeInfo 在我的 AssemblyInfo.cs 中正确定义。

在我的测试应用程序中，如果我手动将自定义控件程序集中的 generic.xaml 文件合并到应用程序 App.xaml 文件中，如下所示：

```
<Application.Resources>
  <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
      <ResourceDictionary Source="/MyControlsAssembly;component/Themes/generic.xaml"/>
    </ResourceDictionary.MergedDictionaries>
  </ResourceDictionary>
</Application.Resources> 
```

那么自定义控件的主题是正确的，但如果我不手动合并 generic.xaml，这些控件将显示为默认的 Windows 主题。

你能告诉我我忘记了什么和/或做错了什么吗？

附加信息：

*   我的 ThemeInfo 程序集属性定义如下：

    `[assembly: ThemeInfo(ResourceDictionaryLocation.SourceAssembly, ResourceDictionaryLocation.SourceAssembly)]`

    （注意：对于 ThemeInfo 属性的任意参数组合，结果都是一样的）

*   Themes 文件夹中的 generic.xaml 文件旁边还有另外两个 .xaml 文件。

*   Themes 文件夹中有一个子文件夹，它本身包含另一个 .xaml 文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-01T18:26:21.547

您需要在自定义控件构造函数中添加以下行：

```
public class MyCustomControl : Control
{
    static MyCustomControl()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(MyCustomControl), new FrameworkPropertyMetadata(typeof(MyCustomControl)));
    }
} 
```

然后，如果您在主题文件夹中有一个 generic.xaml 文件，具有以下示例样式：

```
<Style TargetType="{x:Type local:MyCustomControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MyCustomControl}">
                <Border>
                    <Label>Testing...</Label>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

现在样式将自动应用，无需任何额外的合并。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-17T00:04:01.490

为了在我的自定义控件库中应用 Themes\Generic.xaml 中的默认样式，我决定从一个完善的开源控件库 ( [MahApps](http://mahapps.com/) ) 中寻求灵感。该项目为您提供了一个非常好的示例，说明如何构建和布局自定义控件库。

长话短说，要在 Themes\Generic.xaml 中获取默认样式，您需要在自定义控件库的 AssemblyInfo.cs 文件中包含以下内容：

```
[assembly: ThemeInfo(ResourceDictionaryLocation.None, ResourceDictionaryLocation.SourceAssembly)] 
```

就我而言，我的自定义控件 AssemblyInfo.cs 看起来像：

```
using System.Runtime.InteropServices;
using System.Windows;
using System.Windows.Markup;

[assembly: AssemblyCopyright("...")]
[assembly: ComVisible(false)]

[assembly: ThemeInfo(ResourceDictionaryLocation.None, ResourceDictionaryLocation.SourceAssembly)]

[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")]
[assembly: AssemblyInformationalVersion("1.0.0.0")]
[assembly: AssemblyTitleAttribute("...")]
[assembly: AssemblyDescriptionAttribute("")]
[assembly: AssemblyProductAttribute("...")]
[assembly: AssemblyCompany("...")] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T16:46:35.403

Not sure if this works in WPF, but it works for me in Silverlight:

Constructor:

```
public class MyCustomControl : Control
{
    static MyCustomControl()
    {
        this.Style = (Style)Application.Current.Resources["MyCustomControlStyle"];
    }
} 
```

Style:

```
<Style x:Key="MyCustomControlStyle" TargetType="{local:MyCustomControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{local:MyCustomControl}">
                <Border>
                    <Label>Testing...</Label>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-25T11:09:56.393

由于自定义控件程序集中的以下属性，我遇到了同样的问题：

```
[assembly: NeutralResourcesLanguage("en-US", UltimateResourceFallbackLocation.Satellite)] 
```

更改`UltimateResourceFallbackLocation.Satellite`或`UltimateResourceFallbackLocation.MainAssembly`删除第二个参数完全解决了我的问题（如果您不需要定义程序集的中性语言，也可以删除该属性）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-26T14:41:32.223

在我的情况下，我忘记删除`x:Key`from`<Style>`标签。

**错误的：**

```
<Style TargetType="controls:IpTextBox" x:Key="MyControlStyle"> 
```

**正确的：**

```
<Style TargetType="controls:IpTextBox"> 
```

# algorithm - 求解递归：T(n) = T(n^(1/2)) + Θ(lg lg n)

> ID：11149168
> 
> 赞同：5
> 
> 时间：2012-06-22T01:34:25.227
> 
> 标签：algorithm, math, recurrence, big-theta

开始学习算法。我了解如何从“定期重复”（如`T(n) = Tf(n) + g(n)`. 但是我迷失了这种[重复：问题1-2e](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/assignments/ps1.pdf)：

> T(n) = T(√n) + Θ(lg lg n)

如何选择找到 theta 的方法？什么，呃，这个复发是什么？我只是不太明白 notation-inside-a-recurrence 的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T02:17:48.550

这是使用变量替换的好地方。我们从

> T(n) = T(√n) + Θ(log log n),

其中参数 n 衰减平方根因子。当你看到这样的东西时，一个很好的常见变换是通过设置 S(m) = T(2 ^m ) 来定义一个新的循环。如果我们在这里这样做，我们会得到以下结果：

> S(m) = T( ^(2m) )
> 
> = T(√(2 ^m )) + Θ(log log 2 ^m )
> 
> = T(2 ^(m/2) ) + Θ(log m)
> 
> = S(m / 2) + Θ(log m)。

换句话说，我们现在有递归

> S(m) = S(m / 2) + Θ(log m)。

这种重复似乎更容易处理，因为我们不再有平方根项来缩小事情。特别是，这恰好是 Master Theorem 关心的事情。具体来说，我们有 a = 1、b = 2 和 d = 0。（为什么我们有 d = 0？因为我们可以将 Θ(log m) 视为 m ⁰ Θ(log m)）。然后，主定理告诉我们，这解决了

> S(m) = Θ((log m) ² )。

我们刚刚求解了递归 S(m)，但我们对求解递归 T(n) 很感兴趣。我们如何连接它们？好吧，由于 S(m) = T(2 ^m )，我们可以 - 假设 n 是 2 的完美幂 - 将其重写为 S(log n) = T(n)。然后让我们看到

> T(n) = S(log n)
> 
> = **Θ((log log n) ² )** ,

这是递归的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-14T03:23:48.017

以下是如何使用数学来解决它。我将使用`lnln(n)`而不是`O(lnln(n))`. 这主要是为了减少公式的长度，你可以用 big-O 做同样的事情。所以：

[![在此处输入图像描述](../Images/ba2a57fae064479a316d7d7646f0b371.png)](https://i.stack.imgur.com/olhIb.gif)

意思就是：

[![在此处输入图像描述](../Images/f6dc6d63f547b7c8b47959e881f81866.png)](https://i.stack.imgur.com/gmRRG.gif),

现在要转换这个大汇总通知[![在此处输入图像描述](../Images/4bf1a8661ac6c2f4f252a04e0e2174ca.png)](https://i.stack.imgur.com/P0xqk.gif)

整个`lnln(n)`总和可以转换为：

[![在此处输入图像描述](../Images/5322d0b8664f62eccc6490754dcdcc34.png)](https://i.stack.imgur.com/pIcI7.gif)

`n`我们唯一的问题是找到和之间的某种联系`k`，这可以很容易地从最新的`T(...)`术语中推导出来。

* * *

为此，我们必须为最近的术语找到一个合理的约束条件。这可以通过尝试几个整数来完成，例如`0, 1, 2`. 与`2`您一起：[![在此处输入图像描述](../Images/c52a9bb3e7d0d71ebdf2e5da62c23383.png)](https://i.stack.imgur.com/FdgD3.gif)

* * *

将 k 代入我们之前的等式，您会看到最大的项是：

[![在此处输入图像描述](../Images/2c1a9600927d04a16b294e7ba9affc9e.png)](https://i.stack.imgur.com/OXe2t.gif)

因此复杂性是：[![在此处输入图像描述](../Images/19a039101a4608b3f468af8021f5725e.png)](https://i.stack.imgur.com/hGZ1c.gif)

**PS你可以**[在这里](https://stackoverflow.com/a/34258332/1090562)看到类似重复的解决方案

# scripting - 在命令行创建 PackageMaker 项目文件

> ID：11149169
> 
> 赞同：0
> 
> 时间：2012-06-22T01:34:38.997
> 
> 标签：scripting, automation, packagemaker

有没有办法从命令行创建一个 pmdoc (PackageMaker) 项目？

我正在尝试自动化创建安装程序的过程，并希望编写以下任务的脚本：

1.  添加另一个应用程序
2.  当其中包含的应用程序发生更改时更新安装程序项目。

我的问题是：有没有可以用来在命令行上构建 packagemaker 项目的命令行工具？

例如：`packagemaker`将从 .pmdoc 文件夹结构构建安装程序。

我可以使用什么从命令行创建 .pmdoc 文件夹结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T01:23:21.053

没有用于生成 .pmdoc 文件的命令行工具。PackageMakers [--root](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/packagemaker.1.html)选项允许您生成包。--root 的另一个参数允许您设置标题、包标识符等内容。

正如Pooria Azimia 已经评论的那样，PackageMaker 已被弃用。根据自己的经验，我只能推荐[使用新工具](https://stackoverflow.com/questions/11487596/making-os-x-installer-packages-like-a-pro-xcode4-developer-id-mountain-lion-re?lq=1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T13:45:35.203

不，我不认为这样的工具是可用的。我探索了这些选项，然后提出了解决方案：

我创建了一个 .pmdoc 文件，然后运行如下命令：

> PackageMaker --doc "your.pmdoc" --version buildnumber --title "Installer.pkg" --out "/Desktop/Installer1.pkg"

命令将创建一个安装程序。但是，我将无法在此解决方案中修改安装程序版本。实际上，我正在寻找更改 .pmdoc 内容的命令，但还没有找到任何东西。

# iphone - 将数据从基于 plist 的 UITableView 传递到 UIViewController

> ID：11149172
> 
> 赞同：0
> 
> 时间：2012-06-22T01:35:03.500
> 
> 标签：iphone, class, uitableview, uiview, uinavigationcontroller

> **可能重复：**
> [在表格视图中选择后如何将数据传递到详细视图？](https://stackoverflow.com/questions/7562258/how-to-pass-data-to-detail-view-after-being-selected-in-a-table-view)

我有一个带有原型单元的 TableViewController。它由带有字典数组的 .plist 中的标签和图像视图填充。如何将此数据传递给详细视图？详细视图是 UIViewController 的子类。我已经尝试过不同教程中的方法，但我找不到合适的组合来使它起作用。代码示例会很棒！

WinesViewController.h

```
#import <UIKit/UIKit.h>
@class WineObject;

@interface WinesViewController : UITableViewController {
    WineObject *wine;
}

@end 
```

WinesViewController.m

```
- (void)viewWillAppear:(BOOL)animated {
wine = [[WineObject alloc] initWithLibraryName:@"Wine"];
self.title = @"Vinene";
[self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow] animated:YES];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [wine libraryCount];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"wineCell";

//UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
WineCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...

cell.nameLabel.text = [[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Name"];
cell.districtLabel.text = [[wine libraryItemAtIndex:indexPath.row] valueForKey:@"District"];
cell.countryLabel.text = [[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Country"];
cell.bottleImageView.image = [UIImage imageNamed:[[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Image"]];

return cell;
} 
```

wineobject.m

```
@implementation WineObject 
@synthesize libraryContent, libraryPlist;

- (id)initWithLibraryName:(NSString *)libraryName {
if (self = [super init]) {
    libraryPlist = libraryName;
    libraryContent = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] 
                                                              pathForResource:libraryPlist ofType:@"plist"]];
}
return self;
}

- (NSDictionary *)libraryItemAtIndex:(int)index {
return (libraryContent != nil && [libraryContent count] > 0 && index < [libraryContent count]) 
? [libraryContent objectAtIndex:index]
: nil;
}

- (int)libraryCount {
return (libraryContent != nil) ? [libraryContent count] : 0;
}

- (void) dealloc {
if (libraryContent) [libraryContent release];
[super dealloc];
}

@end 
```

WineCell.m

```
#import <UIKit/UIKit.h>

@interface WineCell : UITableViewCell

@property (nonatomic, strong) IBOutlet UILabel *nameLabel;
@property (nonatomic, strong) IBOutlet UILabel *districtLabel;
@property (nonatomic, strong) IBOutlet UILabel *countryLabel;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:23:32.027

WinesViewController.m 您可以将字典传递给详细视图，不是吗？也许是这样的：

```
#import "WineDetailViewController.h"

@interface WinesViewController()
@property (nonatomic, retain) WineDetailViewController *wineDetailViewController;
@end

@implementation WinesViewController
@synthetize wineDetailViewController

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];    

    // This will give us the wine dictionary
    NSDictionary *dictionary = [wine libraryItemAtIndex:indexPath.row];

    if (wineDetailViewController == nil) {
      // Init the wine detail view
      wineDetailViewController = [WineDetailViewController alloc] init];  
    }
    // Here you pass the dictionary
    wineDetailViewController.wineDictionary = dictionary;

    [self.navigationController pushViewController:wineDetailViewController animated:YES];
} 
```

WineDetailViewController.h

```
#import <UIKit/UIKit.h>
@interface WineDetailViewController : UIViewController {
}
@property (nonatomic, retain) NSDictionary *wineDictionary;
@end 
```

WineDetailViewController.m

```
@implementation WineDetailViewController
@synthetize wineDictionary;

- (void)viewDidAppear:(BOOL)animated
{
  [super viewDidAppear:animated];
  // Here you access the wine dictionary
  NSString *country = [wineDictionary objectForKey:@"country"];
} 
```

# mysql - 如何仅使用 SQL 实现 tag1+tag2+... 搜索

> ID：11149175
> 
> 赞同：0
> 
> 时间：2012-06-22T01:35:34.677
> 
> 标签：mysql

我有一个对象、标签和 tag_relationships 表。对象和标签各有一个 id 列，tag_relationships 将两者连接起来。

tag_relationships 示例（在下面的示例中使用）：

```
+--------+--------+
| obj_id | tag_id |
+--------+--------+
| 1      | 1      |
| 1      | 2      |
| 2      | 1      |
| 2      | 3      |
| 2      | 4      |
+--------+--------+ 
```

我想实现 AND 搜索以允许人们过滤标签。只应返回包含所有给定 tag_id 的行的 obj_id。例如：

**示例输入：1、3**（实际上是标签名称，但它们会转换为 id）

**所需输出：2**

感觉这应该很容易，但对于我的生活，我想不出一个简单的方法来做到这一点。我目前正在考虑返回一个表，其中包含 tag_relationships 中具有给定 tag_id 之一的所有行，然后使用 PHP 对它们进行排序。有没有更简单的仅限 SQL 的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T01:55:03.183

您可以`HAVING`结合使用该子句`GROUP BY`来回答涉及*所有*事物的问题...

```
SELECT
    obj_id
FROM
    tag_relationships
WHERE
    tag_id IN (1,3)
GROUP BY
    obj_id
HAVING
    COUNT(*) = 2 
```

`2`中的代表`COUNT(*)`您正在搜索的标签数量。如果您想要满足的对象，例如三个标签...（例如`1,3,6`），您将`COUNT(*)`使用`3`.

# jquery - jQuery 浮动动画 - 更好的想法？

> ID：11149178
> 
> 赞同：0
> 
> 时间：2012-06-22T01:36:23.617
> 
> 标签：jquery, animation

我正在寻找一种让我的动画更流畅的方法。

所以我不必费尽心思去解释看看[这里](http://brownbox.net.au/clients/amvi_new/)并使用过滤选项。

![在此处输入图像描述](../Images/79429e1c4f8a2273c884760e4ad06a9c.png)

如您所见，它具有动画效果……但不是最好的……当事情突然完全消失时，它可能会有点颠簸。

相反，我希望他们能够滑到他们目前的位置......就像这样：[http ://amvisydney.com.au/](http://amvisydney.com.au/)

所以这是我当前的动画代码（使用fadeIn和fadeOut）：

```
 if($(this).attr('rel').indexOf(amy) >= 0){

         $(this).fadeIn(500);

      }else{

         $(this).fadeOut(500);

      } 
```

让我知道我可以做些什么来改善这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T02:09:56.780

尝试这个

```
$(this)..animate({opacity: 'toggle', height: 'toggle'}, 350); 
```

[**演示。**](http://jsfiddle.net/heera/pWaMx/23/)

# javascript - 在 VIM 上的脚本标签内正确缩进 javascript

> ID：11149180
> 
> 赞同：2
> 
> 时间：2012-06-22T01:36:28.510
> 
> 标签：javascript, vim, indentation

我需要帮助让 VIM 在脚本标签内正确缩进 javascript。

这就是我想要的样子：

```
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-257015-24']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script> 
```

这就是我让 VIM 缩进时的样子，这很好，但不是最优的：

```
 <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-257015-24']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
  </script> 
```

我的 VIM 文件大致是这些：http: [//github.com/lunks/vimfiles](http://github.com/lunks/vimfiles)

我尝试将脚本附加到我想要缩进的标签上`vimrc`：

```
let g:html_indent_inctags = "body,head,tbody,ul,li,p,script" 
```

但是，虽然它成功地缩进了`script`标签后面的内容，但它不再将其内容缩进为 javascript，而只是文本。

如何按照我的意图使脚本标签内的 VIM 缩进 Javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:09:22.313

这个做到了：[https ://github.com/vim-scripts/indenthtml.vim](https://github.com/vim-scripts/indenthtml.vim)

确保添加到您的 vimrc：

```
let g:html_indent_script1 = "inc"
let g:html_indent_style1 = "inc" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:48:33.523

尝试`:set ft=html.javascript`或在 vim.org 上为 HTML/JS 搜索更好的缩进文件。

# c# - 单个单词上的 Microsoft 语音识别

> ID：11149184
> 
> 赞同：3
> 
> 时间：2012-06-22T01:37:07.303
> 
> 标签：c#, .net, speech-recognition

我正在尝试为客户实现一个语音提示系统，他们可以在其中为 PowerPoint 中的幻灯片分配一个单词或短语，当他们说出那个单词或短语时，幻灯片就会前进。这是我用来创建语法的代码（我使用微软的`SpeechRecognitionEngine`实际工作）。

```
Choices choices = new Choices();
string word = speechSlide.Scenes[speechSlide.currentslide].speechCue;
if (word.Trim() != "")
{
    choices.Add(word);
    GrammarBuilder builder = new GrammarBuilder(choices);
    Grammar directions = new Grammar(builder);
    return directions;
} 
```

我尝试提高信心的门槛，但我仍然得到太多误报。有没有办法提高语法？有件事告诉我，在语法接受列表中只添加一个单词是引发所有误报的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:20:16.123

识别器结果可能因许多因素而异。其中包括：背景噪音、麦克风质量以及音频输入设置和电平。尝试一个安静的房间和一个好的麦克风，看看你的结果是否更好。

你关于一个单词语法引起问题的理论可能是公平的。（这让我想起一位老师在只有一个选项的测试中提出多项选择题，然后当这么多学生答对时感到惊讶。）您是否尝试在语法中添加垃圾词作为其他选项，以便引擎不会只是默认为唯一的选择吗？尝试类似：

```
choices.Add("zebra"); 
choices.Add("umbrella");
choices.Add("plunger"); 
```

看看你的结果是否有所改善。

我知道在带有听写语法的 Windows 7 中，您可以使用 Windows 7 语音识别功能来训练识别器以更好地识别单个说话者。我不知道这是否可以帮助您使用您所描述的固定语法。您可能想尝试训练以查看结果是否有所改善。有关详细信息，请参阅[http://windows.microsoft.com/en-US/windows7/Set-up-Speech-Recognition](http://windows.microsoft.com/en-US/windows7/Set-up-Speech-Recognition)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T20:03:16.247

这是我想出的：

正如@Michael Levy 所说，当您只听一个词时，计算机不会做太多工作。它基本上只是在音频电平达到某个值时进行监听，然后假定它必须是那个词。所以我决定我必须给它另一个听起来相反的词。现在我的目标不是花费数周时间研究语音学并找出一个完美的算法来确定听起来与我要匹配的单词相距甚远的单词，所以我决定专注于第一个字母。以下是操作顺序：

1.  从 XML 文件中提取触发词以推进幻灯片
2.  查找单词的第一个字母
3.  找出与第 2 步中找到的字母发音最不一样的 3 个字母
4.  找出以第 3 步中找到的三个字母开头的 4 个不同长度、音节数、尾音和第二个字母的单词
5.  将第 4 步中找到的所有 12 个单词连同触发词一起添加到选择列表中。现在有13个字。一个是我们找到的词，另外 12 个听起来一点也不像这个词。所以计算机会在它触发任何事件处理程序之前确定它是正确的:)

现在要确定相反的字母，我在[这里](https://english.stackexchange.com/questions/72124/list-of-opposite-sounds-for-letters)发布了一个问题，但在我得到任何有用的建议之前它就被关闭了）：我不知道为什么，我查看了常见问题解答，似乎我符合那里描述的条款。我决定对我的家人和朋友进行民意调查，我们的综合脑力得出了一份相反的清单。每个字母有 3 个字母，它们的发音尽可能远离原始字母的发音。

最后一步是为这些字母中的每一个找到单词。我发现每个字母有四个单词，总共 104 个单词。我想要不同长度、第二个字母和结尾声音的单词，这样我就可以覆盖我所有的基础，并尽可能地“分散”计算机对目标单词的注意力。我用了这个[大学词汇表](http://www.physics.ohio-state.edu/~wilkins/writing/Resources/essays/superiorwords.html)想出大词，用我那微不足道的英语头脑想出小于5个字母的单词，最后我觉得我有一个很好的清单。我将其格式化为 XML，添加了解析代码，并检查了结果......好多了！几乎太好了！没有误报，发音不好的人将很难使用我的程序！我会让它变得更容易一些，也许是通过删除干扰词的数量，但总的来说我对结果非常满意，并感谢@Michael Levy 和@Kevin Junghans 的建议

代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<list>
  <a opposite="m,q,n">abnegate,apple,argent,axe</a>
  <b opposite="k,l,s">berate,barn,bored,battology</b>
  <c opposite="v,r,j">chrematophobia,cremate,cease,camoflauge</c>
  <d opposite="l,q,w">dyslogy,distemper,dog,dilligent</d>
  <e opposite="j,n,k">exoteric,esoteric,enumerate,elongate</e>
  <f opposite="g,i,t">flagitious,flatulate,fart,funeral</f>
  <g opposite="f,v,z">gracile,grace,garner,guns</g>
  <h opposite="q,d,x">hebetate,health,habitat,horned</h>
  <i opposite="m,n,f">isomorphic,inside,iterate,ill</i>
  <j opposite="c,e,x">jape,juvenescent,jove,jolly</j>
  <k opposite="l,w,v">kinetosis,keratin,knack,kudos</k>
  <l opposite="b,d,g">lactate,lord,limaceous,launder</l>
  <m opposite="v,i,f">malaria,mere,morbid,murcid</m>
  <n opposite="h,r,v">name,nemesis,noon,nuncheon</n>
  <o opposite="b,n,j">orarian,opiate,opossum,oculars</o>
  <p opposite="n,m,d">pharmacist,phylogeny,pelt,puny</p>
  <q opposite="d,h,f">query,quack,quick,quisquous</q>
  <r opposite="c,f,x">random,renitency,roinous,run</r>
  <s opposite="b,y,d">sand,searing,sicarian,solemn,</s>
  <t opposite="l,m,f">tart,treating,thunder,thyroid</t>
  <u opposite="f,g,j">unasinous,unit,ulcer,unthinkable</u>
  <v opposite="c,k,m">version,visceral,vortex,vulnerable</v>
  <w opposite="d,k,n">wand,weasiness,whimsical,wolf</w>
  <x opposite="m,l,p">xanthopsia,xanthax,xylophone,xray</x>
  <y opposite="s,j,d">yellow,york,yuck,ylem</y>
  <z opposite="m,n,g">zamboni,zip,zoology,zugzwang </z>
</list> 
```

解析代码：

```
 private Dictionary<string, List<string>> opposites;
    private Dictionary<string, List<string>> words = new Dictionary<string, List<string>>();

    private void StartSpeechRecognition(Media_Slide slide)
    {
        if (opposites == null)
        {
            opposites = new Dictionary<string, List<string>>();
            System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
            string file = System.IO.Path.GetDirectoryName(Assembly.GetAssembly(typeof(MainWindow)).CodeBase).Remove(0, 6) + "\\buzzlist.xml";
            doc.Load(file);
            foreach (System.Xml.XmlNode node in doc.ChildNodes[1].ChildNodes)
            {
                opposites.Add(node.Name, new List<string>(node.Attributes[0].InnerText.Split(',')));
                words.Add(node.Name, new List<string>(node.InnerText.Split(',')));
            }
        }

        speechSlide = slide;
        rec = new SpeechRecognitionEngine();
        rec.SpeechRecognized += rec_SpeechRecognized;
        rec.SetInputToDefaultAudioDevice();
        try
        {
            rec.LoadGrammar(GetGrammar());
            rec.RecognizeAsync(RecognizeMode.Multiple);
        }
        catch
        {
        }
    } 
```

检查代码：

```
void rec_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
    {
        if (e.Result.Text == speechSlide.Scenes[speechSlide.currentslide].speechCue)
        {
            rec.UnloadAllGrammars();
            ScreenSettings.NextSlide(speechSlide);
            try
            {
                rec.LoadGrammar(GetGrammar());
            }
            catch
            {
                rec.RecognizeAsyncCancel();
            }
        }
    } 
```

# entity-framework - EntityFramework 和 ADO.NET 在一起？

> ID：11149185
> 
> 赞同：3
> 
> 时间：2012-06-22T01:37:11.320
> 
> 标签：entity-framework

为什么我不能在我的解决方案中同时使用 EF 和 ADO.NET 有什么原因吗？后者用于处理需要更快处理的更密集的数据库调用，而 EF 用于 ORM 的好处（代码优先）？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:05:17.513

可能有一个误解，EF 和 ADO.NET 实际上是一起工作的。看概述[MSDN](http://msdn.microsoft.com/en-us/library/aa697427%28v=VS.80%29.aspx)

还有一篇文章显示了从 EF4 开始使用存储过程：EF4 中存储过程[的一大步](http://thedatafarm.com/blog/data-access/a-big-step-for-stored-procedures-in-ef4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:59:39.907

EF 建立在 ADO.Net 之上，这意味着您可以同时使用两者。

# inputstream - jsch 输入流对象输出流和解组

> ID：11149187
> 
> 赞同：1
> 
> 时间：2012-06-22T01:37:24.903
> 
> 标签：inputstream, fileinputstream, jsch, objectoutputstream

我们有一个场景，我们试图解组一个 java 对象，将其转换为输入流并使用 JSCH API 将其 SFTP

基本上 -> 我们的目标是强制 jSCH 以 INPUTSTREAM 的形式推送对象，而不是将其转换为文件然后像下面的示例一样将其发送过来：

```
// create a session
session = jsch.getSession(ftpUserName, ftpHost, ftpPort);
channel = session.openChannel("sftp"); 
channel.connect(); 
ChannelSftp sftpTunnel = (ChannelSftp) channel; 

// push the file you created using the channel created by the session
File f = new File(fileToTransmit); 

>> **sftpTunnel.put(new FileInputStream(f), f.getName());** 
```

除了我们想要切换最后一行以使用普通旧的 InputStream 而不与任何文件关联。

根据 jSCH API - 不使用 FileInputStream 是可能的：

```
void  put(InputStream src, String dst) 
```

关于我们将如何解决这个问题的任何想法？

我们可以使用 ObjectOutputStream 吗？有没有办法获取一个对象并将其解组并将其馈送到 Inputstream 而无需在中间创建文件？

谢谢

# java - 轮询服务器以在 Java 客户端中获取数据的替代方案？

> ID：11149188
> 
> 赞同：2
> 
> 时间：2012-06-22T01:37:27.337
> 
> 标签：java, http, cakephp, asynchronous

我的 Java 应用程序需要从服务器获取数据（在 nginx 上运行 CakePHP）。有没有其他方法可以在不轮询服务器的情况下获取数据？目前，我正在使用持久的 HTTP 连接并每隔 X 秒轮询一次服务器，以查看是否有任何数据可用。

如果它是一个网络浏览器，我可以使用网络套接字。我们在 Java 中有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:16:00.537

如果您可以实现某种 Java 消息系统 (JMS)，例如 ActiveMQ、RabbitMQ、WebsphereMQ 等，那么您可以监听发布到客户端的消息。当然，您的 Java 应用程序仍然有效地轮询消息，但性能会比 HTTP 请求好得多。

Spring 框架在 JMS 实现上提供了一些出色的抽象，因此您不必担心管道问题。您可以使用简单的[JmsTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/core/JmsTemplate.html)或使用[Spring Integration](http://java.dzone.com/articles/dont-use-jmstemplate-spring)作为两个选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T16:57:56.320

WebSphereMQ 的遥测功能允许 MQTT 客户端连接到 MQTT 通道。在您的服务器上运行的 MQTT 应用程序可以在数据更改时发布数据，并将数据推送到已订阅相应主题的远程 JMS 或 MQTT 客户端。不涉及轮询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:48:44.577

您的应用程序中的数据是否经常更改？如果是这样，轮询可能是获取更新的最佳且最简单的方式。

如果没有，您将不得不自己构建 Web 套接字功能 - 在您的 Java 客户端中有一个“服务器”来侦听某个端口。当你提交一个请求时，让 CakePHP 记录它，并有一个 cron 作业或类似的工作，它会在数据更新时向你发送数据。

但是，如果您在防火墙/NAT 后面，这将很难工作。您可以尝试一下，但我认为轮询 HTTP 服务器将是最简单的。

# php - mysql中的concat和concat_ws

> ID：11149189
> 
> 赞同：0
> 
> 时间：2012-06-22T01:37:51.293
> 
> 标签：php, mysql

我有以下数据库结构。

```
ID | Name | Marks 
```

我正在尝试在我的`PHP`脚本中插入记录。如果记录不存在，我将创建一个新记录。如果它确实存在，我将标记列与新标记连接起来。

```
$strSQL = "Replace into student set ID = '".$id."', 
                 name = '".$name."', marks= CONCAT_WS(',',Marks,'".$marks."')"; 
```

查询运行良好，但 concat 不起作用。旧记录正在被新记录覆盖。我也试过`CONCAT`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:44:36.323

处理这个问题的正确方法是使用一个单独的规范化表来保存学生 ID 和标记。用于`INSERT IGNORE`将学生信息插入`student`表格，然后将分数插入`marks`表格，每个学生多行。这还允许您存储日期以及添加到表格中的每个标记或其他信息（例如它属于哪个课程）。请注意，我通常不建议使用`INSERT IGNORE`来创建行，而是首先在代码中检查该行是否存在，如果不存在则仅插入。

```
CREATE TABLE marks (
   markID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
   studentID INT NOT NULL,
   mark VARCHAR() NOT NULL,
   markdate DATETIME NOT NULL
);

/* First execute the insert, which will ignore errors if it already exists */
INSERT IGNORE INTO student (ID, name) VALUES ($id, '$name');

/* Then insert the new marks. Loop to add as many new marks as needed */
INSERT INTO marks (studentID, mark, markdate) VALUES ($id, '$marks', NOW()); 
```

# haskell - 哪个 Haskell 编译器有信息丰富（初学者友好）的错误消息？

> ID：11149190
> 
> 赞同：4
> 
> 时间：2012-06-22T01:37:58.093
> 
> 标签：haskell, compiler-errors

我开始学习 Haskell，我听说许多 Haskell 编译器都有特别神秘的错误消息。

哪个编译器最适合初学者学习该语言？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T04:38:16.450

没有比 GHC 和 GHCi 更好的错误消息了。

从历史上看，[Hugs](http://www.haskell.org/hugs/)是一个用于教学的 Haskell 编译器，因此专注于初学者易于理解的错误消息。然而，它最近几乎没有什么发展（自 2010 年 1 月以来没有提交）。此外，几乎每个人都在使用 Haskell 进行开发时使用 GHC，因此您可以获得更大的社区。

最后，Haskell 平台是安装 Haskell 和一些有用的附加库的最简单方法——这些库也使用 GHC。

所以Hugs对于初学者来说已经不是一个很好的选择了。

GHC 的错误信息非常好，您只需要很好地掌握 Haskell 的基础知识即可理解它们。随着您获得更多经验，您将很快得到它。

# coffeescript - Jasmine spyOn 在诗侬没有的地方工作？

> ID：11149191
> 
> 赞同：0
> 
> 时间：2012-06-22T01:37:59.527
> 
> 标签：coffeescript, jasmine, sinon

只是在做一些js测试，我一直在尝试使用sinon。我有以下测试，我想在其中存根 draw 和 draw_association 函数。jasmine 的 spyOn 似乎可以工作，但是当我使用 sinon.spy 时，它不起作用。关于为什么的任何想法？

```
describe "#draw", ->
  text = fixture_text()
  editor = null
  draw_spy = null
  draw_associations_spy = null
  beforeEach ->
    #draw_spy = sinon.spy AwesomeModel.Table.prototype, "draw"
    #draw_associations_spy = sinon.spy AwesomeModel.Table.prototype, "draw_associations"
    spyOn AwesomeModel.Table.prototype, "draw"
    spyOn AwesomeModel.Table.prototype, "draw_associations"
    editor = new AwesomeModel.Editor text
    editor.parse_table_names()

  afterEach ->
    #draw_spy.restore()
    #draw_associations_spy.restore()

  it "unacceptable_coordinates should be the size of the number of tables", ->
    editor.draw()
    expect(editor.unacceptable_coordinates.length).toEqual editor.tables.length 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T03:15:48.273

我误解了 sinon.spy 的作用。它只是观察该方法，而 jasmine spyOn 将其排除在外。我将上面的内容改为 sinon.stub() 并且它可以工作。

# java - 从 PHP/MySQL 到 Java/JSON

> ID：11149197
> 
> 赞同：0
> 
> 时间：2012-06-22T01:39:16.000
> 
> 标签：java, android, json

我已经完全更新了这个问题：

这是我在 PHP 中的 json_encode 示例：

```
print(json_encode($row)); 
```

导致 {"AverageRating":"4.3"} 这很好。

但是在 Java 中，我似乎无法抓住这个 4.3 的值。这是（对于一个 Android 项目）我编辑了不相关的数据。

```
 public class Rate extends ListActivity {

   JSONArray jArray;
   String result = null;
   InputStream is = null;
   StringBuilder sb = null;
   String Item, Ratings, Review, starAvg;
   RatingBar ratingsBar;
   ArrayList<NameValuePair> param;

  public void onCreate(Bundle savedInstanceState) {

      starAvg = "0";
      new starRatingTask().execute();
      ratingsBar = (RatingBar) findViewById(R.id.theRatingBar);

  class starRatingTask extends AsyncTask<String, String, Void> {

    InputStream is = null;
    String result = "";

    @Override
    protected Void doInBackground(String... params) {
        String url_select = "http://www.---.com/---/average_stars.php";

        ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
        param.add(new BasicNameValuePair("item", Item));

        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url_select);

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(param));
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // read content
            is = httpEntity.getContent();

        } catch (Exception e) {

            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        try {
            BufferedReader br = new BufferedReader(
                    new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line = "";
            while ((line = br.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();

        } catch (Exception e) {

            Log.e("log_tag", "Error converting result " + e.toString());
        }

        return null;

    }

    protected void onPostExecute(Void v) {

        try {
            jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                starAvg = json_data.getString("AverageRating");

            }
        } catch (JSONException e1) {
            Toast.makeText(getBaseContext(), "No Star Ratings!",
                    Toast.LENGTH_LONG).show();
        } catch (ParseException e1) {
            e1.printStackTrace();
        }

                Toast.makeText(getBaseContext(), starAvg,
                        Toast.LENGTH_LONG).show();

        ratingsBar.setRating(Float.valueOf(starAvg));

    }
} 
```

第二个吐司等级产生一开始设置的“0”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:49:39.743

为什么不在 JSON 中将“整个”行传回？

```
print(json_encode($row)); 
```

JSON旨在表示对象，如果您只是传回一个数字，将其作为数字字符串传递不是更好吗？但是我知道想要使用 JSON，所以它是通用的，这就是为什么你应该把整行传回去。然后它将是一个包含平均值的数组（带有一个元素）。

# javascript - 使用 javascript 访问单个选项的多个值

> ID：11149201
> 
> 赞同：2
> 
> 时间：2012-06-22T01:39:47.320
> 
> 标签：javascript, html

我有一个相当复杂的选项查找。它来自一个单独的系统，我真的需要跟踪两条数据，而不是只发送一个并且必须进行昂贵的额外查找。理想情况下，我想将从一个 AJAX 调用收到的所有数据传递给另一个。

标准的东西：

```
<select name="chosen_option" id="chosen_option">
  <option value="apple">Option One</option>
</select> 
```

用 javascript 访问它相当简单：

```
$("#chosen_option).val() 
```

我知道根据我的搜索，我有很多方法可以将额外的数据放入选项中：

```
<option value="PartA:'apple',PartB:'450'">Option One</option>
<option data-partb="450" value="apple">Option One</option> 
```

对于第一种方法，我不明白如何自己引用 PartA 或 Partb，只有选项的整个值。

对于第二种方法，选择器无法从所选选项中获取该特定属性。它说未定义。

为每个单独的选项添加一个 ID 也不允许我抓住它：

```
<option id="optionid_apple" data-partb="450" value="apple">Option One</option>

$("#optionid_apple").attr('data-partb)  // Not working
$("#optionid_apple").data('partb') // Not working
$("#optionid_apple").data('data-partb') // Not working 
```

如何在单个选项上存储多条数据并在 Javascript 中访问它？

PS - 我考虑过让值本身成为 XML 文档，但我真的不知道如何在 HTML 等中正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:49:56.310

使用它来确保您获得选定的选项。

```
$("#chosen_option option:selected").data('partb') 
```

否则你试图从`<select>`标签中获取属性。

# google-app-engine - App Engine Bulkloader 如何禁用“因错误而退出”

> ID：11149215
> 
> 赞同：2
> 
> 时间：2012-06-22T01:41:15.233
> 
> 标签：google-app-engine

我必须使用 App Engine bulkloader 上传大量实体 (800k)。一切都设置好了，一切进展顺利，除了我得到一个导致这种情况发生的神秘错误：

```
[WorkerThread-0] Backing off due to errors: 1.0 seconds
[WorkerThread-0] Backing off due to errors: 2.0 seconds
[WorkerThread-0] Backing off due to errors: 4.0 seconds
[WorkerThread-0] Backing off due to errors: 8.0 seconds 
```

这很好，直到我让它运行一整天：

```
[WorkerThread-0] Backing off due to errors: 2048.0 seconds
[WorkerThread-0] Backing off due to errors: 4096.0 seconds 
```

我怎样才能禁用它？它使我的上传永远需要。从字面上看，每千个实体都会发生这种情况，所以我可能会等待`2^sum(1 to 800)`几秒钟。这显然不理想。

除了说我有“错误”之外，我不知道错误是什么，但如果我每小时停止并恢复它，事情似乎上传得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:11:13.897

我修改`google_appengine/google/appengine/tools/adaptive_thread_pool.py`为忽略该`self.__backing_off`变量。具体来说，我将其重置为`1.0`第 426 行。

谷歌的设计多么荒谬……

# c++ - libpng中的内存泄漏？还是我只是愚蠢的？

> ID：11149216
> 
> 赞同：6
> 
> 时间：2012-06-22T01:41:19.533
> 
> 标签：c++, memory-leaks, png, valgrind, libpng

Valgrind 抱怨我的一些代码，但这段代码几乎是文档中的示例 libpng 代码：

Valgrind 输出的示例。

```
==15847== 14,384 bytes in 31 blocks are definitely lost in loss record 239 of 240
==15847==    at 0x4C28F9F: malloc (vg_replace_malloc.c:236)
==15847==    by 0x5837381: ??? (in /lib/x86_64-linux-gnu/libpng12.so.0.46.0)
==15847==    by 0x581FD63: png_create_info_struct (in /lib/x86_64-linux-gnu/libpng12.so.0.46.0)
==15847==    by 0x67837C: Star::Image::loadPng(char const*) (StarImage.cpp:35)
==15847==    by 0x4E7721: Star::Assets::threadedFetchImage(Star::String const&, bool) (StarAssets.cpp:400)
==15847==    by 0x4EB4F4: Star::Assets::threadPoolMain() (StarAssets.cpp:256)
==15847==    by 0x6B18B9: Star::ThreadImpl::runThread(void*) (StarThread_unix.cpp:19)
==15847==    by 0x5CE2EFB: start_thread (pthread_create.c:304)
==15847==    by 0x6A1359C: clone (clone.S:112) 
```

以及第 35 行周围的代码方法。第 35 行由注释标记并以`png_infop end_info`

```
ImagePtr Image::loadPng(char const* filename) {
  FILE *fp = fopen(filename, "rb");
  if (!fp)
    throw ImageException(strf("Could not open file %s in Image::loadPng", filename));

  png_byte header[8];
  int res = fread(header, 1, sizeof(header), fp);
  if (!res)
    throw ImageException(strf("Cannot read file %s", filename));

  if (png_sig_cmp(header, 0, sizeof(header)))
    throw ImageException(strf("File %s is not a png image!", filename));

  png_structp png_ptr = png_create_read_struct(PNG_LIBPNG_VER_STRING, nullptr, nullptr, nullptr);
  if (!png_ptr) {
    fclose(fp);
    throw ImageException("Internal libPNG error");
  }

  png_infop info_ptr = png_create_info_struct(png_ptr);
  if (!info_ptr) {
    png_destroy_read_struct(&png_ptr, nullptr, nullptr);
    fclose(fp);
    throw ImageException("Internal libPNG error");
  }

  png_infop end_info = png_create_info_struct(png_ptr);  //this is line 35.
  if (!end_info) {
    png_destroy_read_struct(&png_ptr, &info_ptr, nullptr);
    fclose(fp);
    throw ImageException("Internal libPNG error");
  }

  if (setjmp(png_jmpbuf(png_ptr))) {
    png_destroy_read_struct(&png_ptr, &info_ptr, &end_info);
    fclose(fp);
    throw ImageException("Internal error reading png.");
  }

//snip some

  png_read_image(png_ptr, row_ptrs.get());
  png_destroy_read_struct(&png_ptr, &info_ptr, (png_infopp)0);
  fclose(fp);

  return image;
} 
```

这与位于[http://www.libpng.org/pub/png/libpng-1.2.5-manual.html#section-3的示例几乎相同](http://www.libpng.org/pub/png/libpng-1.2.5-manual.html#section-3)

这是内部泄漏吗？还是我只是错过了一些非常明显的东西？还是 Valgrind 窒息？

作为参考，我目前正在使用 libpng1.2.46。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T01:53:32.253

最后一行

```
 png_destroy_read_struct(&png_ptr, &info_ptr, (png_infopp)0); 
```

不应该

```
 png_destroy_read_struct(&png_ptr, &info_ptr, &end_info); 
```

?

# ms-access - 访问 mdb 文件，数据库不断尝试连接到远程服务器

> ID：11149218
> 
> 赞同：0
> 
> 时间：2012-06-22T01:41:24.313
> 
> 标签：ms-access, odbc

我必须为我的一位客户更改一些代码。现在他们给了我 mdb 文件和 sql 数据库。发生的事情是每次我尝试打开 mdb 文件时，它都会尝试连接到他们的 sql 服务器，但我找不到改变它的方法。我什至无法进入。它给出了一个错误，说 ODBC - 与服务器的连接失败。

有没有办法改变数据库连接？此时我无法访问任何代码，并且 Access 上没有其他选项可用。请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T03:54:42.787

在按住 Shift 键的同时打开 Access 文档。这将阻止脚本运行，您应该能够从那里进行故障排除。

# javascript - Javascript 中的多行（HTML 和 JSP）

> ID：11149220
> 
> 赞同：0
> 
> 时间：2012-06-22T01:41:35.087
> 
> 标签：javascript, html, jsp

我正在尝试在 Javascript 中声明一个跨越多行的字符串。这些行由 HTML 和一些 JSP 组成。

这是我的代码示例：

```
function doSth() {

var longString = ["<table>"
        ,"<tr>"
        ,"<td>"
        ,"<select name=dropdownList size=1>",
        ,"<option value="0" selected>- Select Cake -</option>",
        <%  
            for (int i=0; i<cakes.size(); i++) { 
                String cake = cakes.get(i).toString();
                String selectedCake = "";
        %>
        "<option value='<%=cakes.get(i)%>' <%=selectedCake%> >     <%=cakes.get(i+1)%></option>",
        <%
            }
        %>
        ,"</select>"
        ,"</td>"
        ,"</tr>"
        ].join("");

} 
```

Eclipse 说存在语法错误，但我无法查明错误。

编辑：对不起，我更改了示例代码以更好地反映我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:43:38.790

可能是这个字符串中有未转义的双引号吗？：

```
"<input type="button" name="helloButton" value="Click Me">" 
```

尝试将其更改为：

```
"<input type=\"button\" name=\"helloButton\" value=\"Click Me\">" 
```

甚至更好：

```
"<input type='button' name='helloButton' value='Click Me'>" 
```

# c# - 锁定来自不同线程的方法范围的“字符串”对象会阻止执行？

> ID：11149224
> 
> 赞同：4
> 
> 时间：2012-06-22T01:42:44.187
> 
> 标签：c#, multithreading, locking

今天早上我刚刚对锁定多线程进行了一些随机测试，奇怪的是我发现在两个单独的实例中锁定一个私有“字符串”实际上会阻止另一个线程执行。请在下面找到代码以供参考。

让我感到困惑的是，两个对象中的“字符串”实际上是两个独立的对象，那么为什么锁定一个会阻塞另一个呢？（注意，如果将字符串替换为其他引用类型的对象，如 List，它不会阻止其他线程执行，这确实是我们所期望的......）

```
class Program {
    static void Main(string[] args) {
        Thread th = new Thread(DoWork);
        th.Start();

        Thread th2 = new Thread(DoWork);
        th2.Start();
    }

    static void DoWork() {
        Test importer = new Test();
        importer.SyncTest();
    }

}

public class Test {
    public void SyncTest() {
        string find = "test";
        lock(find) {                
            Console.WriteLine("thread starting...");
            Thread.Sleep(4000);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T01:50:16.640

字符串常量是[“interned”](http://broadcast.oreilly.com/2010/08/understanding-c-stringintern-m.html)。这意味着当您键入：

```
var s1 = "foo";
var s2 = "foo"; 
```

两者都是字符串“foo”的同一个*实例*。同样，当您从不同的线程两次调用具有类似定义的局部变量的方法时，它是同一个实例。这样做是出于性能原因。

这是一种特殊情况，但另一方面，您确实不应该锁定字符串。（我还没有看到创建新锁对象的惯用解决方案不是可行的方法—— `private object lockObject = new object();`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T01:50:55.347

.NET 中的文字字符串是[interned](http://csharpindepth.com/Articles/General/Strings.aspx)，因此每次使用相同的文字字符串时，实际上都是在使用完全相同的对象。因此，您引用的两个线程`"test"`都在引用（并锁定）同一个对象。

创建一个新`List`类型或其他类型会为您提供一个新对象，因此每个线程都会锁定自己的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T01:51:19.870

当您使用字符串时它会阻塞，因为您的所有`Test`类都使用相同的字符串实例。C# 将[实习](http://msdn.microsoft.com/en-us/library/system.string.intern%28v=vs.100%29.aspx)所有字符串文字以节省内存。所以这只是字符串“test”的一次实例。

> 公共语言运行时通过维护一个称为实习池的表来保存字符串存储，该表包含对程序中以编程方式声明或创建的每个唯一文字字符串的单个引用。因此，具有特定值的文字字符串的实例在系统中仅存在一次。

所以所有的实例`Test`都使用同一个对象来锁定。

# php - 如何更改 If 语句中的变量。为什么这不起作用？

> ID：11149226
> 
> 赞同：0
> 
> 时间：2012-06-22T01:43:04.180
> 
> 标签：php, html, variables, if-statement

我无法弄清楚为什么这不起作用。看起来很简单。它应该输出这个。

介绍,第一,第二,第三,第一,第二,第三,第一,第二,第三介绍,第一,第二,第三,第一,第二,第三,第一,第二,第三介绍,第一,第二,第三,第一,第二,第三，第一，第二，第三介绍，第一，第二，第三，第一，第二，第三，第一，第二，第三 ...等

但它没有看到 $columnnum=0; 在第一行之后，它就一直在继续。

有没有人有任何想法？

```
$testarray = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21);
$columnnum = 0;
foreach ($testarray as $value) {
    $columnnum++;
    if ($columnnum == 1) {
        echo "Intro, ";
    }
    echo "First, ";
    echo "Second, ";
    echo "Third";
    if ($columnnum == 3) {
        $columnum = 0;
        echo "<br>";
    }
    echo " col: ", $columnnum;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T01:45:09.157

您`$columnnum=0`在循环末尾附近输入错误。

* * *

这应该更有效：

```
echo str_repeat("Intro,".str_repeat("First,Second,Third",3)."<br>",7); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T01:46:41.710

因为您错过了 $columnum 中的“n”

```
$columnum = 0; 
```

应该

```
$columnnum = 0; 
```

# linux - 在预提交钩子 shell 脚本中检查 git 状态

> ID：11149227
> 
> 赞同：2
> 
> 时间：2012-06-22T01:43:10.770
> 
> 标签：linux, git, bash, shell

我正在编写一个 Git 预提交钩子客户端脚本，我想过滤提交的文件并对已删除的文件做一些事情。

我发现通过以下内容，我可以使用以下内容遍历提交中包含的所有文件。

```
#!/bin/sh

for file in $( exec git diff-index --cached --name-only HEAD )
  do
    echo $file
done 
```

要查找已删除的文件，我相信我可以使用`git status --porcelain <file>`它，因为它会`D`在文件被删除时显示第一个字符。

所以我需要的是帮助制定语法来检查输出中的第一个字符是否`git status --porcelain <file>`是`D`.

```
#!/bin/sh

for file in $( exec git diff-index --cached --name-only HEAD )
  do
    # This line doesn't work but it's the best I've came up with.
    if git status --porcelain $lessFile == *"D"*; then
      echo "$file was deleted"
    fi
done 
```

或者让我知道我是否在这里离开基地。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T01:49:41.387

尝试

```
 $( exec git status --porcelain | egrep "^D" | sed -e 's/^D  //' ) 
```

带有空格的文件名可能有问题。或更好

```
git diff-index --cached --name-status HEAD | awk '$1 == "D" { print $2 }' | while read file
do
   echo $file
done 
```

另见[这个问题](https://stackoverflow.com/questions/2412450/git-pre-commit-hook-changed-added-files)。

# c# - 在使用 VS2010 C# 安装 OpenCV 时（通过“cmake 错误：配置文件中的错误。项目文件可能无效”？）

> ID：11149241
> 
> 赞同：0
> 
> 时间：2012-06-22T01:45:46.240
> 
> 标签：c#, visual-studio-2010, opencv, cmake

我已经环顾了很长时间，试图安装 openCV。我正在使用 Windows 7、VS2010 C# Express 和 cmake 2.8.8。对于在线找到的所有教程，只需指定源代码路径（理解为提取 opencv 文件夹的路径），然后指定二进制文件路径（理解为构建 openCV 源代码的位置，可能是新目录）。问题是在填充源代码和二进制文件的路径后，点击“配置”错误

“cmake 错误：配置文件出错。项目文件可能无效”

发生。有关更详细的错误日志，显示如下：

CMake 错误：无法打开文件进行写入：C:/Program Files (x86)/opencv/build/CMakeCache.txt.tmp CMake 错误：CMake 无法找到与“Visual Studio 10”对应的构建程序。CMAKE_MAKE_PROGRAM 未设置。您可能需要选择不同的构建工具。CMake 错误：找不到 cmake 模块文件：C:/Program Files (x86)/opencv/build/CMakeFiles/CMakeCXXCompiler.cmake CMake 错误：找不到 cmake 模块文件：C:/Program Files (x86)/opencv/build /CMakeFiles/CMakeCCompiler.cmake 配置不完整，出现错误！CMake 错误：无法打开文件进行写入：C:/Program Files (x86)/opencv/build/CMakeCache.txt.tmp CMake 错误：：系统错误：权限被拒绝 CMake 错误：无法打开缓存文件进行保存。C:/Program Files (x86)/opencv/build/CMakeCache.txt CMake 错误：：系统错误：权限被拒绝 CMake 错误：：系统错误：没有这样的文件或目录 CMake 错误：无法打开缓存文件进行保存。C:/Program Files (x86)/opencv/build/CMakeCache.txt CMake Error: : System Error: No such file or directory

* * *

我从网上消化的猜测是cmake和opencv可能不兼容（cmake安装为x86；opencv安装为x64bit），因此我重新下载了32位版本的openCV（虽然我在64位电脑上运行）但是仍然没有进展（它仍然不会配置导致错误）。这是我安装的一个（以win32为后缀）供参考[http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.1/](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.1/)。

值得一提的是，在提取 openCV 时出现了大量“无法打开文件……”消息（例如，“无法打开输出文件*目录位于此处*\opencv_objdetect240.dll”）。这似乎适用于所有文件（据我所知，在提取时几乎在每一行中都重复了该错误，对于每行不同的文件）。

这是我第一次接触 cmake，因此对这些步骤并不熟悉。我发现了一些针对“CMakeLists.txt”（已包含在提取的文件夹中）的说明，但没有完全理解它们。一个相当详细的参考是[http://thebitbangtheory.wordpress.com/2011/10/24/how-to-use-cmake-with-opencv/](http://thebitbangtheory.wordpress.com/2011/10/24/how-to-use-cmake-with-opencv/)。但是我觉得步骤不够详细（即步骤 3-6）。对于像我这样的 cmake 新手来说，歧义是“项目”所指的，这不是一次就能够编译所有包含 opencv 的 C# 项目吗？

**在上述背景下的所有情况下，问题是：如何将 openCV 安装到 VS2010 C#，克服 cmake 配置错误（或者如何修复此类错误）？**

* * *

笔记：

*   我没有可靠地记录初步错误的确切措辞（在重新提取 32 位版本之前），但据我所知，这是目前发生的，上面引用的那个。
*   我意识到有一个类似标题的问题（[cmake 错误：配置文件中的错误。项目文件可能无效](https://stackoverflow.com/questions/6445869/cmake-errorerror-in-configuration-files-project-files-may-be-invalid)）；但是答案似乎不符合给定的情况；再说一次，我可能是错的。

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:36:39.817

您的问题是您在 C:/Program Files (x86)/opencv/ 中安装了 openCV。尝试安装在 C:/opencv/ 中，一切都会正常工作。由于 Program Files (x86) 文件夹受保护且无法修改任何文件，因此 cmake 不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:15:47.147

OpenCV 是一个 C++ 项目。并且无法使用 VS2010 C# 编译它。

如果想使用 C# 进行开发，请查看为 C#/.Net 包装 OpenCV 的[EmguCV](http://www.emgu.com/)项目。

# jsf - JSF - 提交表单后 URL 栏不会更新

> ID：11149243
> 
> 赞同：1
> 
> 时间：2012-06-22T01:46:22.803
> 
> 标签：jsf

这是我使用的代码：

**请求.jsf**

```
<h:form>
  <!-- form inputs ... --> 

  <h:commandButton id="btnStart" value="START" action="#{bean.handleForm}">
    <f:ajax execute="@form" render="message" />
  </h:commandButton>
</h:form> 
```

当我单击`btnStart`按钮时，我的 bean 提交并正确处理了表单。不幸的是，浏览器 url 栏仍然显示`http://myhost.com/request.jsf`，而内容显示返回的结果`#{bean.handleForm}`。

如何正确更新网址栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:54:10.147

这是因为您的表单正在提交到当前 URL，而 JSF 只是更改了响应的资源。如果您想将 URL 更改为新资源之一，那么您需要告诉网络浏览器发送一个新的请求。您可以通过执行重定向来做到这一点。在 JSF 2 中，只需将`faces-redirect=true`查询字符串添加到结果中即可。

```
public String handleForm() {
    // ...

    return "nextpage?faces-redirect=true";
} 
```

或者，如果它真的是一个非幂等请求，那么我会坚持使用同一页面并有条件地在同一页面中显示结果，如果有必要的话通过包含。然后您的操作方法可以返回`null`或`void`。

# joomla - 根据用户显示项目

> ID：11149247
> 
> 赞同：0
> 
> 时间：2012-06-22T01:46:58.017
> 
> 标签：joomla, joomla1.5, virtuemart

我在 Joomla 1.5.25 之上运行 Virtuemart 1.1.9。

如何根据登录的用户显示项目？

例如，我设置了 2 个购物者组，对于每个购物者组，我为每个购物者组设置了 2 个具有不同价格的相同产品。例如，让我扩展：-“Shopper Group A”属于“Product A”的产品列表，“Shopper Group B”属于“Product B”的产品列表。公众（未登录且没有特殊的购物者组特权）只能看到“购物者组 A”以及属于“产品 A”的产品，其他购物者组不能看到其他购物者组的产品。现在，当属于“Shopper Group B”的人登录时，他们只会看到属于“产品 B”的产品，而不会看到其他任何东西。这一切都很好，正如预期的那样。

AHIA，拉里R....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:25:43.153

无论如何，这将需要大量的自定义代码。这是您需要做什么的粗略想法-

1.  确定您将如何对用户进行分组。您可能可以使用 VM 组或 Joomla 用户组

2.  修改显示产品的每个 VM 页面，必须更改查询才能选择正确的产品

3.  确定如何将产品与用户组相关联。这可能可以通过产品类型来完成。

不过，在您开始之前，您应该认真考虑升级到 Joomla 2.5 和 VM 2.0，因为 VM 1.x 已经过时，而 Joomla 1.5.x 即将推出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:11:14.050

[Polished Geek, LLC](http://extensions.joomla.org/extensions/extension-specific/virtuemart-extensions/virtuemart-administration/11695)的采购规则……正是我所寻找的，并且完全按照他们的描述工作！！！！

# f# - f# p/invoke 使用指针在 GetClientRect 上有效，但不适用于 OutAttribute

> ID：11149250
> 
> 赞同：2
> 
> 时间：2012-06-22T01:47:09.213
> 
> 标签：f#, pinvoke

我可以让它工作：

```
[<DllImport("user32.dll")>]
extern bool GetClientRect(nativeint, RECT*)

let getClientRect hwnd =
    let mutable r = RECT()
    if GetClientRect(hwnd, &&r) = false then
        raise <| System.Exception("GetClientRect failed")
    r 
```

但无论出于何种原因，这只会留下`r`零，没有抛出异常：

```
[<DllImport("user32.dll")>]
extern bool GetClientRect(nativeint, [<Out>] RECT rect)

let getClientRect hwnd =
    let mutable r = RECT()
    if GetClientRect(hwnd, r) = false then
        raise <| System.Exception("GetClientRect failed")
    r 
```

当然，使用指针的问题是我得到了警告`warning FS0051: The use of native pointers may result in unverifiable .NET IL code`，这是可以理解的。

我会错过什么？

编辑：即使它已经被回答，为了记录，结构定义：

```
[<Struct>]
type RECT =
    val left:int
    val top:int
    val right:int
    val bottom:int 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T02:40:17.417

它没有很好的文档记录，但是在 F# P/Invoke 签名中使用与号 (&) 符号是通过引用传递值的正确（也是最佳）方式。`ref`它编译为与 C#参数相同的类型签名；添加`[<Out>]`到参数会给出与 C# 参数相同的签名`out`。

```
[<DllImport("user32.dll")>]
extern bool GetClientRect(nativeint hWnd, [<Out>] RECT& rect)

let getClientRect hwnd =
    let mutable r : RECT = Unchecked.defaultOf<_>
    if GetClientRect(hwnd, &r) = false then
        raise <| System.Exception("GetClientRect failed")
    r 
```

请注意，一旦您将 P/Invoke 签名更改为使用`byref<RECT>`而不是`nativeptr<RECT>`，您还需要将您使用的地址运算符 (&&) 更改`r`为单个 & 符号 (&)。

由于您只是从 中获取值*，*因此`GetClientRect`将可变结果值初始化为 是一个很好的做法，`Unchecked.defaultOf<_>`因此很明显它应该被`GetClientRect`.

编辑：如果将 P/Invoke 签名更改为使用 byref (&) 不起作用，您还可以尝试在返回类型上显式指定编组行为。GetClientRect 的 MSDN 文档说它返回一个 BOOL，这与 .NET bool 不太一样（BOOL 是一个 4 字节的整数值）。

如果你想试试：

```
[<DllImport("user32.dll")>]
extern [<return: MarshalAs(UnmanagedType.Bool)>] bool GetClientRect(
    nativeint hWnd, [<Out>] RECT& rect) 
```

# visual-studio-2010 - “更改源代码管理”不在菜单中 - Team Foundation Server 2010

> ID：11149251
> 
> 赞同：6
> 
> 时间：2012-06-22T01:47:17.753
> 
> 标签：visual-studio-2010

我正在寻求修复 Visual Studio 和 TFS（均为 2010 年）之间的绑定并完成了我的搜索。我寻求帮助的页面是：http: [//msdn.microsoft.com/en-us/library/tfs/ms181375 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/tfs/ms181375(v=vs.100).aspx) [Can't unbind solution from Team Foundation Server 2010](https://stackoverflow.com/questions/9142671/cant-unbind-solution-from-team-foundation-server-2010)

他们都说以下内容：“在文件菜单上，单击源代码管理，然后单击更改源代码管理”，但是在我的 Visual Studio (2010) 安装中的“源代码管理”子菜单中不存在这样的子菜单。我确保在源代码管理资源管理器中选择了正确的项目。

请帮助我克服这个噩梦！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-30T15:40:19.170

我遇到过同样的问题。即使打开了解决方案，我仍然看不到`Change Source Control`.

看起来有点奇怪的是，我在解决方案资源管理器中选择了解决方案。`File -> Source Control -> Advanced -> Change Source Control...`如果我在解决方案资源管理器中选择了任何其他项目（例如任何文件），我可以从那里转到并重新绑定所有内容。

也许是我选择了一个项目，就 Visual Studio 而言，它没有任何源代码控制绑定，因此它没有显示更改它们的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T02:45:41.550

无需在源代码管理资源管理器中选择解决方案，您需要打开解决方案/项目，以便它显示在解决方案资源管理器中。一旦它在那里，菜单项将显示。我无法显示“更改源代码管理”的唯一方法是不打开解决方案。

麦克风

# c - pcap_loop 函数不是“反应性的”。为什么？

> ID：11149254
> 
> 赞同：1
> 
> 时间：2012-06-22T01:48:00.503
> 
> 标签：c, macos, unix, libpcap

为什么调用 pcap_loop 函数后，我必须等待几秒钟才能捕获第一个数据包？

```
void print_packet(u_char *, const struct pcap_pkthdr *, const u_char *);

int main(int argc, char * argv[])
{
    pcap_t * handle;
    char dev_name[] = "en0";
    char err_buf[PCAP_ERRBUF_SIZE];

    handle = pcap_open_live(dev_name, 4096, 1, 0, err_buf);

    if (handle == NULL) {
        fprintf(stderr, "Couldn't open device %s: %s\n" , dev_name , err_buf);
        exit(1);
    }

    pcap_loop(handle, 1, print_packet, NULL);
    pcap_close(handle);

    exit(0);
}

void print_packet(u_char * args, const struct pcap_pkthdr * hdr, const u_char * buff)
{
    /* ... */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:01:03.747

我通过阅读`pcap_open_live`文档发现了问题：

```
pcap_t *pcap_open_live(const char *device, int snaplen, int promisc, int to_ms, char *errbuf) 
```

> [...] to_ms 以毫秒为单位指定读取超时。读取超时用于安排读取不必在看到数据包时立即返回，而是等待一段时间以允许更多数据包到达并在一次操作中从操作系统内核读取多个数据包。并非所有平台都支持读取超时；在没有的平台上，读取超时将被忽略。在支持读取超时的平台上，to_ms 的零值将导致读取永远等待以允许足够的数据包到达，而不会超时。[...]

[来源](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/10.5/man3/pcap_open_live.3.html)。

# asp.net - 没有单独线程的 ASP.NET 长任务

> ID：11149255
> 
> 赞同：0
> 
> 时间：2012-06-22T01:48:03.723
> 
> 标签：asp.net

在 asp.net 之前的很长一段时间里，当我有一个很长的任务时，我只会让任务在页面上运行并使用某种刷新将输出发送给用户。没有单独的线程或任何东西。自 asp.net 以来，我一直以同样的方式完成长期任务。我有一个带有 response.flush 的 aspx 页面来刷新输出。这对我来说似乎工作得很好（而且我有一些任务要运行几个小时或更长时间），但我一直读到这很糟糕，但我想知道为什么？有哪些发生在你身上的问题是你不会这样做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:12:48.150

假设用户无意中或无意中离开了正在执行漫长过程的页面。这可能会导致中断，使用户感到恐慌，然后可能会通过重新提交来启动另一个漫长的过程。

假设您必须在线访问您的银行帐户，并且您想要生成一些可能需要很长时间的财务报告。然后，您将不得不让您的页面保持打开状态，并且可能会离开您的办公桌（例如）。有人可能会走到你的办公桌前，跳到你舒适的椅子上，然后在进程运行时按下后退按钮——他们刚刚发现你的帐户中有 100 万美元。“强尼，看来你今天要给我们大家买午饭了！”

处理这种情况的标准方法，特别是在您的情况下，是让 Windows 服务负责处理，并且页面可以通过数据库、事件日志或其他方式定期询问进程的当前状态。这通常是我采用的方法，例如，当我的用户启动可能需要 5 分钟运行的发票流程时。用户可以重新访问页面以检查其是否准备就绪，或者服务可以选择启动电子邮件、发送文本等以通知用户操作状态。

# android - 暂停/停止的活动由线程恢复

> ID：11149256
> 
> 赞同：0
> 
> 时间：2012-06-22T01:48:11.693
> 
> 标签：android, multithreading, resume

想象一下以下情况：
MainActivity 启动一个线程来接收蓝牙数据。如果用户按下后退按钮，则会发生以下序列`onPause() -> onStop() -> onDestroy()`：onDestroy 中断活动创建的线程，程序完全结束。

但是，如果用户按下主页按钮，则顺序为 : `onPause() -> onStop()`。并且该活动不再可见。但线程仍在运行。

我想要做的是，当线程接收到一些 BT 数据时，MainActivity 再次变得可见（恢复）而无需用户干预。

有人知道该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:03:09.653

您应该编写一个在后台运行的服务，并在某些事件（在您通过蓝牙接收的案例文件中）调用您要运行的应用程序。这将是解决此问题的一种方法。可能还有其他一些解决方案，但这个解决方案不会耗尽用户的电池。

# javascript - 如何检测对象是否具有特定属性？

> ID：11149258
> 
> 赞同：0
> 
> 时间：2012-06-22T01:48:54.470
> 
> 标签：javascript, jquery, internet-explorer-8, internet-explorer-9

我正在尝试找到一种跨浏览器兼容的方式来查找对象是否具有特定属性。

```
Eg. span

var elem = document.getElementById('span1');

if(elem.hasOwnProperty('title'))
{
} 
```

这在 IE9 中有效，但在 IE8 上抛出了令人讨厌的错误，并且整个站点都被这条线拖垮了。是否有任何与浏览器兼容的方法来查找对象是否具有某些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:50:30.543

在这种情况下，它是一个 HTML 元素，因此它会有一个 title*属性*。

```
if(elem.getAttribute("title")) {...} 
```

# twitter-bootstrap - 在 less 中为 twitter bootstrap 的所有选择器添加前缀

> ID：11149266
> 
> 赞同：6
> 
> 时间：2012-06-22T01:49:50.420
> 
> 标签：twitter-bootstrap, less

我想开始学习 Twitter Bootstrap 并将其合并到我的网站中（从表单元素开始），但如果我按原样包含它，它会破坏网站的其余部分。

我想为所有选择器添加前缀，以便我可以逐渐添加引导样式的内容，如下所示：`<div class="bootstrap"><!-- bootstrap styled stuff here --></div>`

因为我才刚刚开始学习，所以我真的不知道`less`. 我已经手动完成了选择器前缀，但我很好奇是否有办法做到这一点，`less`以便我可以通过修改引导程序来学习它，同时仍将它隔离在所需的引导程序容器中。

现在，我必须在编译 less 文件后的第二步中添加前缀。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-11-06T13:04:33.803

为了避免 periklis 的回答中提到的问题：创建自己的`prefixed-bootstrap.less`重新编译*编译* `bootstrap.css`的：

```
.bootstrap {
  @import (less) 'dist/css/bootstrap.css';
  @import (less) 'dist/css/bootstrap-theme.css'; /* optional */
} 
```

那么就不需要`sed`命令了。Lars Nielsen 的回答中提到的观察结果当然仍然有效。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-22T07:29:07.560

您可以编辑文件 bootstrap.less 并将所有内容封装在如下内容中：

```
.bootstrap {
    // CSS Reset
    @import "reset.less";

    // Core variables and mixins
    @import "variables.less"; // Modify this for custom colors, font-sizes, etc

    [...]

} 
```

更新：

由于引导文件使用 less & 运算符，例如：

```
// list-group.less (bootstrap 3.0.0)
.list-group-item {
    [...]
    a& {
        [...]
    }
} 
```

上述代码的编译最终会得到语义错误且没有以 .bootstrap 为前缀的规则：

```
a.bootstrap .list-group-item {
  color: #555555;
}
a.bootstrap .list-group-item .list-group-item-heading {
  color: #333333;
}
a.bootstrap .list-group-item:hover,
a.bootstrap .list-group-item:focus {
  text-decoration: none;
  background-color: #ecf0f1;
} 
```

为了解决这个问题，请使用以下代码编译引导程序：

```
$ lessc bootstrap.less | sed -e 's/\(.\+\).bootstrap \(.\+\)/.bootstrap \1\2/g' > output.css 
```

现在上面的行将被编译为：

```
.bootstrap a .list-group-item {
  color: #555555;
}
.bootstrap a .list-group-item .list-group-item-heading {
  color: #333333;
}
.bootstrap a .list-group-item:hover,
.bootstrap a .list-group-item:focus {
  text-decoration: none;
  background-color: #f5f5f5;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-06T09:44:42.037

这并没有真正解决命名冲突的问题。它将一个特定的类作为选择器放在所有引导 CSS 类之前。因此，要使用它们，您必须将 HTML 包装在具有该特定名称的类的容器（如 DIV）中，然后引导 CSS 将仅适用于该 DIV。这有一些问题。

一个问题是 Bootstrap CSS 包含 BODY 和 HTML 的定义，如果您在它们前面放置一个选择器，它们将无法应用。

另一个问题是，在您的自定义 CSS 中，您将一些样式定义为 Bootstrap 类，如“.dropdown”或“.table”。您可能会定义 Bootstrap 未定义的样式的各个方面，并且您可能会覆盖 Bootstrap 样式或将它们弄乱。例如，如果Bootstrap在“.table”类上定义了padding，而你在自己的“.table”类上定义了margin，那么它们在页面渲染时会按照CSS优先级规则进行组合。即使你在 Bootstrap 的 ".table" 类前面放了一个特定的自定义选择器类，在你自己的 ".table" 类前面放了一个不同的选择器类，它们仍然会组合和交互。

使用像这样的选择器类并不是真正意义上的“命名空间”，也不能完全隔离 CSS。实现真正隔离的最好方法是为每个类名加上一个唯一的前缀字符串。

# layout - 旋转的 SPAN 元素消失了

> ID：11149269
> 
> 赞同：1
> 
> 时间：2012-06-22T01:50:26.000
> 
> 标签：layout, rotation, css

我最近在网上阅读了一篇关于使用 css 旋转文本的[帖子。](http://snook.ca/archives/html_and_css/css-text-rotation)这对我很有吸引力，因为坦率地说，我需要用 css 旋转文本（多么可爱）。问题是现在我完全迷路了。旋转的元素似乎没有遵循我希望的布局。

您可以访问有问题的页面，***`http://76.182.31.74:8001/aboutme.html`***只要它启动或在此处查看此图像：

![在此处输入图像描述](../Images/0af8bf18ea86ced692873928d944f079.png)

如您所见，“关于我”的字样从较暗的内容区域中浮出。我需要他们拥抱中心的内容（在这种情况下，是我的照片）并处于灰色区域（垂直）。我已经尝试了一切都无济于事！

以下是相关的 CSS/HTML 片段：

***`http://76.182.31.74:8001/styles/default.css`***

```
#SideWord {
    display:block;
    -webkit-transform: rotate(-90deg); 
    -moz-transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
    color: #666;
    text-shadow: 0px -1px 0px rgba(0,0,0,.5);
    font-size:53px;
    position:relative;
    left:-617px;
    text-align:center;
    font-family:Verdana, sans-serif;
} 
```

***`http://76.182.31.74:8001/aboutme.html`***

```
<div id="content">
        <span id="SideWord">
            <!-- InstanceBeginEditable name="SideWord" -->ABOUT ME        <!-- InstanceEndEditable -->
        </span>
        <div id="spacer">
            <!-- InstanceBeginEditable name="content" -->
                <img id="profile-pic" src="images/me.jpg" /><span class="header3">I'M <span class="emph">XANDER LAMKINS</span> AND I'M A TEEN INTERESTED IN <span class="emph">COMPUTER PROGRAMMING</span>, GENERAL <span class="emph">COMPUTER SCIENCE</span>, AND <span class="emph">MATHAMATICS</span>.</span>
                <span class="page-content" style="padding-top:35px;">I've been programming since mid-2005 and have loved every day of it!  I work everyday on hobby projects in all aspects of the computing genre.  I do 3D animations, develop applications, design webpages, and even a little bit of image design.<br />
            <br />I am currently fluent in .NET, Lua, HTML/CSS/JavaScript/jQuery, and Basic.  I am also knowledgable about Python and Java.<br /><br />As of my Junior and Senior year, I will be studying at <a href="http://en.wikipedia.org/wiki/North_Carolina_School_of_Science_and_Mathematics" class="smoothlink">NCSSM</a>, a public boarding school focused on Science and Mathamatics.<br /><br />I'm also very active on the <a href="http://stackexchange.com/" class="smoothlink">StackExchange</a> network.  Feel free to check out my profiles there.</span><a target="_blank" class="se" href="http://stackoverflow.com/users/595437/xander-lamkins">
<img src="http://stackoverflow.com/users/flair/595437.png?theme=clean" width="208" height="58" alt="profile for Xander Lamkins at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Xander Lamkins at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
</a> <a target="_blank" class="se" href="http://superuser.com/users/77306/xander-lamkins">
<img src="http://superuser.com/users/flair/77306.png?theme=clean" width="208" height="58" alt="profile for Xander Lamkins at Super User, Q&amp;A for computer enthusiasts and power users" title="profile for Xander Lamkins at Super User, Q&amp;A for computer enthusiasts and power users">
</a><span class="page-content" style="padding-top:35px;">Contact Me:<br /><span class="emailz"></span></span>
          <!-- InstanceEndEditable -->
        </div>
    </div> 
```

随意请求其他任何内容或询问有关任何内容的更多信息。我只是想让那些该死的词坐在div旁边（无论如何，在左边）`#spacer`，它的顶部距离灰色区域的顶部x距离。

只要它们还在，请随意浏览其他页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:27:53.750

首先，有一个[`transform-origin`](https://developer.mozilla.org/en/CSS/transform-origin)属性默认`50% 50%`有效地围绕其中心旋转元素。我将其设置为`0 0`使元素逆时针旋转 90 度，使其相对于其右上角。

[摆弄](http://jsfiddle.net/ovfiddle/7JaBQ/2/)

## 更新：

我发布的原始小提琴似乎在以下方面不适用于 x-browser：在 Firefox 上，转换后元素的**% top-margin^在转换***后*应用，在 Chrome/Safari 上似乎在元素*之前*应用变身（？）

^ -[对于垂直边距百分比总是指包含块的**宽度**](https://developer.mozilla.org/en/CSS/margin-top)

```
#SideWord {
    /*re-worked deltas only*/
    transform-origin: 0 0;
    /*take element out of normal flow to avoid collapsing vertical margins*/
    float:left;
    /*these values have to account for parent container height or the parent
      needs to have a clearfix applied to it*/
    /*an alternative to setting these dimensions in px would be em, as long as
      as the font size is em-based too. this would give you *some* degree of
      control over pseudodynamic box size*/
    width:300px;
    margin-top:300px;
    /*re-align the text*/
    text-align:right;
} 
```

这似乎在 FF、Chrome 和 Safari 上渲染得很好（下周将检查 IE），另外还为您提供了调整 margin-top 以稍微移动文本位置的奖励。

[重新摆弄](http://jsfiddle.net/ovfiddle/7JaBQ/4/)

# c#-4.0 - EF4：如何使用通用存储库模式？

> ID：11149272
> 
> 赞同：3
> 
> 时间：2012-06-22T01:50:27.750
> 
> 标签：c#-4.0, asp.net-mvc-2, entity-framework-4, repository-pattern

我正在尝试通过使用我可以从中继承的通用存储库来简化我现有的存储库。问题是我不知道如何编写一些基类方法。我目前有：

```
public interface IRepository<T> : IDisposable where T : class
{
    IQueryable<T> GetAll();
    T GetSingle(int id);
    T GetSingle(string slug);
    void Save(T entity);
}

public class HGRepository<T> : IRepository<T> where T : class
{
    protected HGEntities _siteDB;
    protected IObjectSet<T> _objectSet;

    public HGRepository(HGEntities context)
    {
        _siteDB = context;
        _objectSet = _siteDB.CreateObjectSet<T>();
    }

    public IQueryable<T> GetAll()
    {
        return _objectSet;
    }

    public T GetSingle(int id)
    {
        return null;
    }

    public T GetSingle(string slug)
    {
        return null;
    }

    public void Save(T entity)
    {
        // code to save entity
    }

    public void Dispose()
    {
        _siteDB = null;
    }
} 
```

我的困惑在于我的`GetSingle()`方法`Save()`。他们需要依赖与每种类型的`T`. 我的非通用回购示例：

```
public Article GetArticle(int id)
{
    return _siteDB.Articles.SingleOrDefault(a => a.ArticleID == id);
}

public Article GetArticle(string slug)
{
    return _siteDB.Articles.SingleOrDefault(a => a.Slug == slug);
}

public void SaveArticle(Article article)
{
    if (article.ArticleID > 0)
    {
        _siteDB.ObjectStateManager.ChangeObjectState(article, System.Data.EntityState.Modified);
    }
    else
    {
        _siteDB.Articles.AddObject(article);
    }

    _siteDB.SaveChanges();
} 
```

如您所见，文章有自己的特定 ID。我的其他实体也是如此（例如，新闻项目具有 NewsID 属性）。

如何制作可以协调为更具体版本的抽象基础方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:27:23.803

您可以为您的方法设置一个通用[表达式](http://msdn.microsoft.com/en-us/library/bb397951.aspx)参数`GetSingle`：

```
public interface IRepository<T> : IDisposable where T : class
{
    ....
    T GetSingle(Expression<Func<T, bool>> filter);
    void Save(T entity);
} 
```

并在`HGRepository<T>`：

```
public T GetSingle(Expression<Func<T, bool>> filter)
{
        return _objectSet.Where(filter).SingleOrDefault();
} 
```

和用法：

```
IRepository<Article> rep = new HGRepository<Article>();
return rep.GetSingle(p => p.Slug == slug); 
```

如果您有通用接口/存储库类未涵盖的特定场景，您可以创建从通用接口/类继承的新接口/类：

```
public interface IArticleRepository : IRepository<Article>
{
   ...
}

public class ArticleRepository : HGRepository<Article>, IArticleRepository
{
   ...
} 
```

# algorithm - 从体素列表创建邻域图比在 O(n^2) 中更快？

> ID：11149277
> 
> 赞同：2
> 
> 时间：2012-06-22T01:50:54.027
> 
> 标签：algorithm, data-structures, graph, voxel, neighbours

我目前正在通过大致执行以下操作来创建“邻域图”：

```
for every voxel
  look at every other unseen voxel 
    check if neighbours 
```

它大致以 n 平方（减去 n）运行。对于一定数量的体素是可以接受的，但显然对于更大的列表需要更多时间。

另一个简单的解决方案是将所有内容放入一个大的 3d 数组或 hashmap 中，这将在 O(n) 中运行，但会以更多内存为代价。

有更快的方法吗？我似乎无法在 google 中输入正确的搜索词...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T02:08:17.373

您可能想查看空间分区树，例如[八叉树](http://en.wikipedia.org/wiki/Octree)或[kd 树](http://en.wikipedia.org/wiki/K-d_tree)结构。这些结构通常可以非常有效地构建（O(n) 或 O(n log n)，IIRC），然后提供极快的查找以查找给定边界框中的最近邻居或点。使用其中一种结构应该会给您带来巨大的性能提升，而不会产生巨大的 3D 阵列所需的巨大内存成本。

希望这可以帮助！

# windbg - 成员变量的内存访问错误 (WinDbg)

> ID：11149280
> 
> 赞同：2
> 
> 时间：2012-06-22T01:51:01.910
> 
> 标签：windbg

我正在尝试在 WinDbg 中调试时查看 c++ 类的成员变量。我在一个成员函数中设置了断点，并且我在下一行之后观察变量。但是，我不断收到所有成员变量的内存访问错误。有没有办法解决这个问题？我需要这个来调试我的代码。

谢谢，

阿梅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:54:19.257

您是在调试版本还是调试版本？在发布版本的情况下，this 指针将存储在 ecx 寄存器中。该寄存器可能会在整个方法中用于不同目的。您可以通过按本地窗口中的“位置”按钮来验证这一点。如果这是问题所在，请尝试在方法的最开始设置断点，并验证 ecx 寄存器的内容。然后将该值用作手表，例如： (CMyClass*) *address in ecx*

确保以 0x 格式指定地址，这是 windbg 的特性之一。

# c# - 将 ASP.Net 表单数据发布到另一个页面

> ID：11149282
> 
> 赞同：6
> 
> 时间：2012-06-22T01:51:14.623
> 
> 标签：c#, asp.net, html, forms

我有一个`ASP.Net Page, aspx`默认形式。

我有一个`Submit`按钮。点击后，它会将数据发布给自己。换句话说，`Button Click Event()`从后面的代码将执行必要的。

之后，我想将相同的数据`ASp.Net Page, aspx`从另一个域发布到另一个域。

那么，我该怎么做呢？

我尝试创建一个`Form`in`Button Click Event`和一个`javascript`to`Submit`以便`Form`它发布。但是`Form is not appearing hence there is already a`页面上的Form`。

有什么办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T01:56:07.733

使用 Button 的 PostBackUrl 属性。 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx)

```
<%@ page language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="head1" runat="server">
  <title>Button.PostBackUrl Example</title>
</head>
<body>    
  <form id="form1" runat="server">

    <h3>Button.PostBackUrl Example</h3>

    Enter a value to post:
    <asp:textbox id="TextBox1" 
      runat="Server">
    </asp:textbox>

    <br /><br />

    <asp:button id="Button1" 
      text="Post back to this page"
      runat="Server">
    </asp:button>

    <br /><br />

    <asp:button id="Button2"
      text="Post value to another page" 
      postbackurl="Button.PostBackUrlPage2cs.aspx" 
      runat="Server">
    </asp:button>

  </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T03:15:01.273

这是我不太推荐的一种方法，但它会做你想做的事。它使用 javascript 来更改表单发布到的 url（例如 default2.aspx），使用表单的 action 属性，然后重新发布表单

```
 protected void btnClick(object sender, EventArgs e)
    {
        string script = "<script> document.forms[0].action='default2.aspx'; document.forms[0].submit(); </script>";
        ClientScript.RegisterClientScriptBlock(this.GetType(), "postform", script);
    } 
```

第二页应该有`EnableViewStateMac="false"`

```
<%@ Page Language="C#" EnableViewStateMac="false" AutoEventWireup="true"
             CodeBehind="default2.aspx.cs" Inherits="CodeGen.default2" %> 
```

> **注意：**通过在页面或 web.config 中设置 enableViewStateMac=false 来关闭 MAC 生成。不建议这样做，因为 MAC 有助于防止人们篡改您的视图状态数据。但是，如果篡改视图状态数据不是问题（并且对于一些没有欺诈或安全漏洞风险的应用程序可能不是问题），您可以将其关闭。[阅读更多](http://forums.eukhost.com/f15/fix-validation-viewstate-mac-failed-6085/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T18:28:24.197

我有一个类似的问题。我有一个简单的执行回发的 asp:button。在 Page_Load IsPostBack 部分，我做了一些复杂的验证。大多数人只是将表单提交到下一页并在那里进行验证，然后如果失败则重定向回来。但我认为这是马虎。所以解决方案是回发，然后在验证后从 CodeBehind 中提交。我相信这就是你要找的。

我想用“细节”把它画出来，但这很简单：

```
Server.Transfer("~/folder/page.aspx", True) 
```

“True”是是否保存POST数据的标志。对我来说很好，让我知道它对你有用。

[http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET](http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-14T00:44:30.787

类似的问题。多么痛苦。

最后，我在母版页中放置了一个表单（这样它不在另一个表单中）：

```
<form method="post" id="asp-form-hack" style="display: none;"></form> 
```

然后，在 aspx 页面中，我像这样使用它：

```
<script>
    $(document).ready(function () {
        var $loginButton = $("#login-button");
        var loginForm = document.forms["asp-form-hack"];
        loginForm.action = "<page-to-postback>.aspx";
        $loginButton.on("click", Login);

        function Login() {
            // read values from input fields in the page
            var username = $("#t_username").val();
            var password = $("#t_password").val();

            // create input elements with the same values
            var usernameInput = document.createElement("input");
            usernameInput.name = "txtUsername";
            usernameInput.type = "text";
            usernameInput.value = username;
            var passwordInput = document.createElement("input");
            passwordInput.name = "txtPassword";
            passwordInput.type = "password";
            passwordInput.value = password;

            // append the input elements to the form
            loginForm.appendChild(usernameInput);
            loginForm.appendChild(passwordInput);

            // setTimeout prevents your page from understanding
            // that you are submitting from another form
            setTimeout(function () {
                loginForm.submit();
            }, 0);
        }
    });
</script> 
```

请注意，**此方法允许发布到其他域**

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-22T02:28:34.947

在后面的代码中使用

```
Response.Redirect("YourOtherPage.aspx?param1=xxx") 
```

# mysql - MYSQL 可能是一个连接

> ID：11149285
> 
> 赞同：-1
> 
> 时间：2012-06-22T01:52:20.333
> 
> 标签：mysql

在我们的组织中，达到特定目标的成员可以获得不同的奖励。管理层希望表彰今年首次获得某些奖项的会员，而不是今年可能再次获得特定奖项的会员。我们不能只选择那些只获得任何类型奖项的人，因为他们今年可能获得了两个或更多奖项（有史以来第一次）。

我尝试了各种方法，但它们都匹配了太多的成员。一个简单的程序语言搜索可能会从今年获得一个或多个指定奖项的所有成员开始，然后拒绝在任何前一年获得任何奖项的成员，但我无法想出 SQL 来做到这一点。

Awards Table 大约有 400K 条记录，列有：award、awarddate、Membername。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:59:32.427

只是头脑风暴，但也许这样的事情会奏效？

```
选择“会员名”
来自`award_table`
WHERE (YEAR(awarddate) = 2012) &&
      (`Membername` NOT IN (SELECT `Membername`
                            来自`award_table`
                            WHERE (`awarddate` BETWEEN `1950-01-01` AND `2011-12-31`))
```

**编辑：**只需重新阅读并看到您有 400k 行......这种方式可能过于资源昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T02:00:37.690

您可能会做一些涉及`WHERE NOT EXISTS`查找前几年匹配奖励的子句和子查询的事情，但是如果不了解更多关于您的数据库架构的信息，很难提供具体的答案。

另一种可能性： `GROUP BY`标识奖项的列，取`min(awarddate)`每组的，并在`HAVING`子句中过滤掉今年之前的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T02:06:19.037

这似乎有效：

```
SELECT DISTINCT memberName FROM awards WHERE YEAR(awardDate) = '2012' AND (memberName NOT IN (SELECT memberName FROM awards WHERE (YEAR(awardDate) < '2012'))) 
```

# svn - TortoiseSVN 1.7.7 不能提交到 Subversion 1.7.5 但 TortoiseSVN 1.6 可以吗？

> ID：11149286
> 
> 赞同：1
> 
> 时间：2012-06-22T01:52:26.950
> 
> 标签：svn, apache2, tortoisesvn

我试图在 Ubuntu 12.04 上设置一个新的 Subversion 存储库。也许愚蠢的是，我使用[PPA 存储库](https://askubuntu.com/questions/65468/where-can-i-find-a-subversion-1-7-binary)将 subversion 升级到 1.7.5 。

现在，我无法使用 TortoiseSVN 1.7.7 执行提交

> 错误：提交失败（详细信息如下）：
> 错误：服务器发送意外返回值（500 内部错误）以响应 POST
> 错误：请求 '/usvn/svn/TestThis/!svn/me' <

我显然可以使用 TortoiseSVN 1.7.7 进行成功更新。
此外，使用 TortoiseSVN 1.6.x 我可以成功提交。所以，这可能与 Subversion 1.7 中实现的新 HTTP 协议（​​冗余？）有关

apache 日志并没有为我提供太多启示。除了失败的客户端尝试 POST，而旧的工作客户端执行 PUT。我认为这是客户端版本之间的预期差异？

```
192.168.0.25 - admin [21/Jun/2012:20:23:22 -0500] "POST /usvn/svn/TestThis/!svn/me HTTP/1.1" 500 538 "-" "SVN/1.7.5/TortoiseSVN-1.7.7.22907 neon/0.29.6"

192.168.0.20 - admin [21/Jun/2012:17:26:22 -0500] "PUT /usvn/svn/TestThis/!svn/wrk/d8430d5f-d87b-5141-8828-e810dab0904f/trunk/piechart/History.txt HTTP/1.1" 201 591 "-" "SVN/1.6.15 (r1038135)/TortoiseSVN-1.6.12.20536 neon/0.29.5" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T03:23:51.590

所以，问题似乎是路径被apache配置中的别名和有点像别名的DAV svn“Location”的某种组合破坏了。Mod_rewrite 弄乱了路径，因为 SVNParentPath 是别名的子目录。有点奇怪，为什么旧​​的 Tortoise 客户端仍然工作。1.7 版中实现的 httpv2 协议声称改进了重定向处理。

无论如何，普通的 apache 日志在弄清楚这一点时几乎没有用，它们在这方面并不冗长，即使您将日志级别一直调到调试。启用重写日志是诊断的关键：（httpd.conf）

> RewriteLogLevel 3
> 
> 重写日志“/var/log/apache2/rewrite.log”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:06:08.337

取消选中自动调整访问权限...并重新检查...此选项在存储库属性的常规选项卡下可用

# python - Django从带有整数参数的模板构建URL，主键

> ID：11149288
> 
> 赞同：5
> 
> 时间：2012-06-22T01:52:45.403
> 
> 标签：python, django

我在模板中有这个链接：

```
<a href="{% url show_item item.id %}">Item 1</a> 
```

和 urls.py 中的这个 url

```
url(r'item/(?P<id>)/$', show_item, name="page_item") 
```

但是，会发生此错误：

```
Reverse for 'show_item' with arguments '(63L,)' and keyword arguments '{}' not found. 
```

我看了这个问题：

[如何让 python 在 django 模板中不将 L 附加到 long 或忽略](https://stackoverflow.com/questions/9404142/how-to-get-python-to-not-append-l-to-longs-or-ignore-in-django-template?rq=1)

但它没有帮助。

在模板中构造 URL 时，是否有另一种使用主键（整数）的方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T01:54:42.357

URL 名称不匹配。将模板更改为：

```
<a href="{% url page_item item.id %}">Item 1</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T01:55:09.677

`page_item`它不应该`show_item`在模板中。

# asana - asana api - 通过 api 将标签分配给任务

> ID：11149293
> 
> 赞同：2
> 
> 时间：2012-06-22T01:53:51.207
> 
> 标签：asana

我正在[Asana 中创建一个新任务 -](http://www.asana.com/)通过 API 进行团队任务管理。有没有办法通过 API**为任务分配标签？**在过滤方面真的很有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:06:29.357

有一个写得很好的 Asana API 文档。查找 [Task][2] AND [Tags](http://developer.asana.com/api-updates/) API 列表 :) 祝你好运。

* * *

**更新：** 这是另一个[过滤的 Asana Tag 结果](http://developer.asana.com/api-updates/)。

它说：

```
The task endpoint now has addTag and removeTag methods. 
```

# bash - 使用密码从远程目录到本地文件夹的 bash 脚本到 sftp 文件

> ID：11149296
> 
> 赞同：0
> 
> 时间：2012-06-22T01:54:44.577
> 
> 标签：bash, sftp

如何`bash`使用命令编写脚本`sftp`来下载文件？我可以使用以下命令登录到远程机器，但是我需要手动输入密码。

```
bash-3.2$ sftp -o "Port 22022" mike@s-edm-ssh.local.files.stack.com
mike@s-edm-ssh.local.files.stack.com's password: 
Connected to s-edm-ssh.local.files.stack.com.
sftp> 
```

`sftp`没有密码提示怎么办？

如果我喜欢将`aaa.txt`文件下载`/remote/mike/files`到我的本地目录`/local/mike/downloaded`，如何构建一个脚本来完成所有这些工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T01:59:30.377

由于`sftp`通过[SSH](http://en.wikipedia.org/wiki/Secure_Shell)运行，您可以将公钥放在远程服务器上。

如果由于某种原因您无法将密钥放在服务器上，那么您可以在出现提示时将[Expect](http://www.nist.gov/el/msid/expect.cfm)脚本写入您的密码。`send`请参阅此[示例](http://en.wikipedia.org/wiki/Expect#Examples)。

# node.js - 尝试自动导入 node.js 模块时找不到模块

> ID：11149297
> 
> 赞同：3
> 
> 时间：2012-06-22T01:54:57.010
> 
> 标签：node.js, file-io

我有一个`tmp`包含 3 个测试 node.js 模块的目录`[mod0.js, mod1.js, mod2.js]`。

我正在尝试编写一个函数，以便将这三个模块导入一个数组，然后返回所述数组。我可以放到 REPL 并可以使用`var x = require("./tmp/mod0");`etc 导入每个文件而没有任何问题。

当我尝试运行以下函数以自动执行此操作时，我收到错误消息`[Error: Cannot fine module './tmp/mod0']`。

```
var _importFiles = function(path, files){
    var moduleList = []
    , trimmedName;

    files.forEach(function (element, index, array){
        if (_fs.lstatSync(path + "/" + element).isFile()){
            trimmedName =  element.substring(0, (element.length - 3));
            moduleList.push(require("./" + path + "/" + trimmedName));
        }
    });

    return moduleList;
}; 
```

我正在传递参数和参数`'tmp'`的`path`输出`fs.readdirSync(path)`。`files`

如果我`process.cwd();`在`if`块内检查，它与 REPL 控制台的匹配。

我试图弄清楚为什么当我在 REPL 中手动而不是自动化时它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:19:56.140

我将代码稍微修改为：

```
var _fs = require('fs');
var path = process.cwd() + '/tmp'

var _importFiles = function(path, files){
    var moduleList = [], trimmedName;

    files.forEach(function (element, index, array){
        if (_fs.lstatSync(path + "/" + element).isFile()){
            trimmedName =  element.substring(0, (element.length - 3));
            moduleList.push(require("./" + path + "/" + trimmedName));
        }
    });

    return moduleList;
};

var imports = _importFiles('./tmp', _fs.readdirSync(path));
console.log(imports); 
```

这给了我：

```
$ node import.js
[ 'imported mod0 automatically', 'imported mod1 automatically' ] 
```

mod文件很简单`module.exports = "imported mod(x) automatically";`

所以现在我的返回列表有一个数组。还; 确保您的目录具有读取权限（我确定它确实如此）

# java - 使用 waitFor() 的程序不能像在 Windows 上那样在 Linux 上运行

> ID：11149304
> 
> 赞同：-1
> 
> 时间：2012-06-22T01:55:42.080
> 
> 标签：java, linux, thread-safety, synchronized

大家好，大家不知道为什么这段代码可以在 Windows 上运行，但不能在 linux 上运行，所以如果有人发现这种方式或其他方式有问题，我将非常感谢您的指导，感谢您的宝贵时间。

```
Process p = Runtime.getRuntime().exec(linuxCommand);
int cont=0,retorno=p.waitFor();
try {
     synchronized (this) {
     while (retorno!=0 && conteo<10000){
         retorno=p.waitFor();
         System.out.println("cont++);
     }
    if (retorno == 0) {
        ans = true;
        logger.info("Return Value: " + ans);
    }else{
        ans = false;
        logger.info("Return Value: " + ans);
    }
 }

} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

**目标**：根据 *1_Input.txt* 中包含的信息创建 *1_Output.txt*，

**MyObjectT**驻留在 /var/xp/client/a/h/n/test
**MyObjectT**会调用 /var/xp/client/a/h/n/clases/z1 中的几个类，并最终**读取**1_Output.txt 的内容所以它可以返回**ans** (true/false)

**问题**

*   在 Windows 上：快速的流程没有等待创建 1_Output.txt 文件，因此没有什么可读取的，当前代码已解决。（p.waitFor() 最终返回 0 并且每个人都很高兴）
*   Linux：p.waitFor() 永远不会返回 0 流程结束并且什么都没有

**linuxCommand**是一个解析后的字符串，表示要在 linux 中执行的 java 命令

请注意，如果我将这个命令按原样粘贴在命令 shell 中，它将运行正常，没有警告或错误。我不认为 **“**在这里发挥重要作用。linuxCommand-> **/opt/jdk/jdk1.6.0_22/bin/java -classpath "/var/xp/client/a/h/n/clases/z1":"/var /xp/client/a/h/n/test" MyObjectT /m:Param21 /f:"/var/xp/client/a/h/n/IOFile/1_Input.txt" /o:"/var/xp/客户端/a/h/n/IOFile/1_Output.txt"**

所以让我感到困惑的是，如果使用 getErrorStream() 来追踪一些错误，我会得到这个

```
Exception in thread "main" java.lang.NoClassDefFoundError: MyObjectT 
Caused by: java.lang.ClassNotFoundException: MyObjectT 
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: MyObjectT.  Program will exit. 
```

任何帮助，非常感谢再次感谢

大声笑我很抱歉西班牙语 retorno=return 中的变量名，但在我翻译的时候我并没有停下来考虑**返回** ajajjaajajajaj :=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:19:31.193

There's a few things in play, simultaneously. First, you've got multiple programs running -- this one and the one that you're spawning -- and the errors in *that* program are causing troubles here.

First, the `linuxCommand`:

```
/opt/jdk/jdk1.6.0_22/bin/java -classpath
"/var/xp/client/a/h/n/clases/z1":"/var/xp/client/a/h/n/test"
MyObjectT /m:Param21 /f:"/var/xp/client/a/h/n/IOFile/1_Input.txt"
/o:"/var/xp/client/a/h/n/IOFile/1_Output.txt" 
```

I've arbitrarily line-wrapped it. Depending upon how you've defined this string in your program, you may need to escape all those `"` marks in this string. (If you just print this using `System.out.println()`, what does it look like?)

Probably the better approach is to use a [slightly different form of `exec()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d%29), one that takes an array of strings instead of a single string. This way you can break the parameters as the program *requires* without worrying about proper shell quoting. It'd look something like this (untested) chunk:

```
String linuxCommand[] = {"/opt/jdk/jdk1.6.0_22/bin/java",
                         "-classpath",
                         "/var/xp/client/a/h/n/clases/z1:/var/xp/client/a/h/n/test",
                         "MyObjectT",
                         "/m:Param21",
                         "/f:/var/xp/client/a/h/n/IOFile/1_Input.txt",
                         "/o:/var/xp/client/a/h/n/IOFile/1_Output.txt"};
Process p = Runtime.getRuntime().exec(linuxCommand); 
```

You did say you've run this command by hand in a shell to confirm it works, but those `/i`, `/o`, etc. feel *very* awkward on a Unix-alike platform. Are you *confident* that format works as expected on Linux?

# actionscript-3 - 在 ActionScript 3 中扩展对象原型

> ID：11149305
> 
> 赞同：1
> 
> 时间：2012-06-22T01:55:53.153
> 
> 标签：actionscript-3, flash, prototype, extending

每当我尝试扩展 Object 原型时，都会出现错误：

> 错误 #1056：无法在 mx.core.UIComponentDescriptor 上创建属性 my_extension。

我四处寻找，发现了这些：

[Flash AS3：ReferenceError：错误 #1056：无法创建属性](https://stackoverflow.com/questions/1734169/flash-as3-referenceerror-error-1056-cannot-create-property)

[ReferenceError：错误 #1056 - 实例名称错误](https://stackoverflow.com/questions/2240011/referenceerror-error-1056-instance-name-problem)

我没有使用可视化 IDE 来设计舞台，而是使用 MXML 和 AS3 文件，所以我不确定如何处理这个错误。

我的代码：

```
Object.prototype.keys = function(): Array {
  var keys: Array = [];

  for (var key: * in this) {
    keys.push(key);
  }

  return keys;
}

Object.prototype.values = function(): Array {
  var values: Array = [];

  for each (var value: * in this) {
    values.push(value);
  }

  return values;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T03:36:39.983

使用`prototype`来扩展一个类似乎很 ActionScript 1 或 2。

在 AS3 中，如果类是动态的，您可能能够进行原型设计。

原型有缺点：

*   只能扩展动态类，例如不能向 Math 添加方法。
*   对存储在原型中的方法的调用需要更长的时间来执行。
*   由于方法是在运行时添加的，因此编辑器无法使用代码提示或使用正确的语法高亮显示它们。

由于所有类都扩展了对象，因此无需显式声明`Object`为基类；但是，您可以定义要扩展的 AbstractObject 类：

```
package
{

    public dynamic class AbstractObject extends Object
    {

        public function AbstractObject()
        {
            super();
        }

        public function get keys():Array
        {
            var keys:Array = [];

            for (var key:* in this)
            {
                keys.push(key);
            }

            return keys;
        }

        public function get values():Array
        {
            var values:Array = [];

            for each (var value:* in this)
            {
                values.push(value);
            }

            return values;
        }

    }
} 
```

您的类的子类型`AbstractObject`。

# php - Zend Plugin ，在预调度期间但在调用 action 方法之前注册

> ID：11149318
> 
> 赞同：1
> 
> 时间：2012-06-22T01:59:17.847
> 
> 标签：php, zend-framework

我试图想办法在预调度期间调用插件，但我在最后调用它时遇到了麻烦。

基本上我需要在所有控制器预调度之后调用它，然后再调用 action 方法。

这可能吗？

我最后尝试通过传递一个高值来调用插件，但我知道这是错误的。我不想在 postDispatch 上调用它。

```
 $front->registerPlugin(new Plugin_Acl, 1000);

 class Plugin_Acl extends Zend_Controller_Plugin_Abstract
 {
     public function preDispatch(...)
     {
       // ... DO STUFF before any action method
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:23:07.400

该标准`Zend_Controller_Action`有一个*空* `preDispatch()`方法，该方法`preDispatch()`在所有前端控制器插件（甚至在控制器实例化之前发生）上调用，然后在所有附加的动作助手上调用，就在动作方法本身之前。请参阅[Zend_Controller_Front](http://framework.zend.com/code/filedetails.php?repname=Zend+Framework&path=%2Ftags%2Frelease-1.11.11%2Flibrary%2FZend%2FController%2FFront.php)、[Zend_Controller_Dispatcher_Standard](http://framework.zend.com/code/filedetails.php?repname=Zend+Framework&path=%2Ftags%2Frelease-1.11.11%2Flibrary%2FZend%2FController%2FDispatcher%2FStandard.php)和[Zend_Controller_Action](http://framework.zend.com/code/filedetails.php?repname=Zend+Framework&path=%2Ftags%2Frelease-1.11.11%2Flibrary%2FZend%2FController%2FAction.php)`dispatch()`上的方法以了解流程。

因此，如果您想在*所有*控制器上运行某些东西，那么您可以创建一个基本控制器，其中`preDispatch()`包含您要运行的代码的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:29:45.307

我在 dispatchLoopStartup() 中这样做

```
class My_Plugins_Front extends Zend_Controller_Plugin_Abstract {

    public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request){

        // Register ACL plugin if is admin controller (for eg.)
        if($request->getControllerName() == 'admin'){
            /**
             * Set up your ACL
             */
        }

        // You can setting variable to see in all view files
        $layout     = Zend_Layout::getMvcInstance();
        $view       = $layout->getView();
        $view->test = 'test';
    }

    public function dispatchLoopShutdown(){}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:46:22.500

调用 predispatch 似乎对我的 acl 有用：

```
class Controller_Plugin_Acl extends Zend_Controller_Plugin_Abstract
{

    public function preDispatch(Zend_Controller_Request_Abstract $request) {
        parent::preDispatch($request);
        //do some stuff
} 
```

然后它在 application.ini 中使用以下行实例化：

```
resources.frontController.plugins.acl = "Controller_Plugin_Acl" 
```

希望这可以帮助一些...

# cocos2d-iphone - 了解 cocos2d 锚点/位置

> ID：11149322
> 
> 赞同：1
> 
> 时间：2012-06-22T02:00:01.347
> 
> 标签：cocos2d-iphone, position, anchor

如果我弄错了，请告诉我。

锚点就像精灵的可移动中心。
您可以通过设置锚点来指定精灵的中心。

现在您可以通过指定中心的位置来放置精灵。

例如）
锚点=（1,1）：精灵的中心是它的右上角（我可以认为它是“固定在右上角”）
位置=（屏幕宽度，屏幕高度）：放置中心（锚点）在（屏幕宽度，屏幕高度）

导致在屏幕右上角对齐的精灵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T03:15:46.603

奇怪的名字（“移动中心”），但你几乎是对的。唯一的是，它是 CCNode 类的属性，而不是 CCSprite。只是默认情况下`CCNode`没有 contentSize 并且`isRelatieveAnchorPoint`属性为 NO。

另一点是所有转换都将相对于锚点进行。我的意思是，如果你将锚点设置为，例如，（1.f，1.f），将游览节点（精灵）放置在屏幕的中心并开始改变它的旋转（比例等），它将围绕它的锚点旋转。

还有一个有趣的锚点技巧。没有人说它的 x 和 y 值必须介于 0.f 和 1.f =) 所以，你可以简单地让你的节点（精灵）按圆圈移动，将它的锚点设置为 out 部分（例如， (0.5f, -10.f)) 并开始旋转它。您的节点（精灵）将在 node.position(sprite.position) 中以圆为中心移动，半径为 (10.5f * 它是 contentSize.height)

# image - Python 从图像中删除所有 GPS 元数据

> ID：11149328
> 
> 赞同：2
> 
> 时间：2012-06-22T02:00:43.243
> 
> 标签：image, python-2.7, gps, metadata

有没有一种简单的方法，在 Windows 和 linux（Ubuntu Linux 和 Windows 7，都是 64 位的 Python 2.7）上，剥离目录中所有图像上的所有（不仅仅是 EXIF）GPS 元数据，并保留其余的元数据完好无损的？它只需要适用于 JPG 和 PNG。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:25:16.453

这不是我想要的，但我使用[PyExiv2](http://gramps-project.org/wiki/index.php?title=Edit_Image_Exif_Metadata)编写了一个脚本，它掩盖了一些 GPS EXIF 数据。这是脚本。

```
#!/usr/bin/python2.7
from pyexiv2 import ImageMetadata, ExifTag
from fractions import Fraction
import argparse, os
parser = argparse.ArgumentParser(description='Strip GPS metadata.')
parser.add_argument('dir', metavar='DIRECTORY',
                   help='The directory to process.')
args = parser.parse_args()
files = os.listdir(args.dir)
for tiname in files:
        iname = args.dir+tiname
        image = ImageMetadata(iname)
        image.read()
        image["Exif.GPSInfo.GPSLatitude"] = Fraction(1,1)
        image["Exif.GPSInfo.GPSLongitude"] = Fraction(1,1)
        image.write() 
```

编辑：这显然（至少在 Windows 上）并没有去除纬度和经度。

# ios - iOS 同步限制：当同步超过 200 MB 时，iOS 应用程序崩溃

> ID：11149329
> 
> 赞同：1
> 
> 时间：2012-06-22T02:00:55.837
> 
> 标签：ios, sharepoint, crash, synchronization

单个 Web 服务可以传输到原生 iPad 应用程序的数据量是否有限制？我的开发人员正在构建一个通过 Restful Web 服务连接到 Sharepoint 的 iPad 应用程序。当我们尝试将应用程序与文档存储库同步时，应用程序几乎每次都以 250 MB 崩溃。

想知道我正在处理的是否有限制，或者我们的方法是否做错了什么。

谢谢 DK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:10:01.527

我猜是你的内存不足。根据您的说法，我猜您有 iPad 1 / 2？发生这种情况的原因是您*没有*以 5MB 的间隔编写它，而是将其全部存储在 iPad**内存**中，因此一旦您的应用程序用完内存，iPad 就会退出应用程序，这样整个应用程序就不会冻结。

# c# - 类中包含的线程

> ID：11149334
> 
> 赞同：0
> 
> 时间：2012-06-22T02:01:51.100
> 
> 标签：c#, winforms, multithreading

我正在编写一个简单的 Windows 窗体应用程序，以使我能够使用 Threads 进行各种操作。到目前为止，我正在工作，但我想做的是将它们全部包含在一个单独的类中，而不是直接包含在我的表单代码中。

我有一个后台线程，它启动并从数据库中检索数据。然后我将该数据显示到列表框中。

```
private delegate void UpdateListValues(List<ListBoxItem> itemList);

private void form_main_Shown(object sender, EventArgs e)
{            
    // Set the loading text.
    list_selection.Items.Add(ListHelpers.LoadingItem());

    // Start the data access on a seperate thread.
    Thread worker = new Thread(GetInvoicingData);
    worker.IsBackground = true;
    worker.Start();
}

private void GetInvoicingData()
{
    // Query database
    List<ListBoxItem> values = DAC.GetInvoicingAccounts();

    // Display results
    BeginInvoke(new UpdateListValues(DisplayList), new object[] { values });
}

private void DisplayList(List<ListBoxItem> itemList)
{
    // Display each result
    list_selection.Items.Clear();
    for (int i = 0; i < itemList.Count; i++)
    {
        list_selection.Items.Add(itemList[i]);
    }
} 
```

问题是在 DisplayList 方法中，我将无法访问列表框 (list_selection)，因为它是表单类的一部分。有没有人对我如何做到这一点有任何建议。

另外，我是线程新手，所以请随时告诉我我做错了。我刚刚使用了[http://www.codeproject.com/Articles/23517/How-to-Properly-Handle-Cross-thread-Events-and-Upd](http://www.codeproject.com/Articles/23517/How-to-Properly-Handle-Cross-thread-Events-and-Upd)中的示例来了解我现在的位置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:16:00.080

像这样的东西怎么样：

```
// Added the form's class declaration to highlight separation of thread code into a separate class, but may not be exactly the same as yours depending on naming
public class Form1 : Form
{
    private readonly DataRetriever _dataRetriever;

    private void form_main_Shown(object sender, EventArgs e)
    {            
        // Set the loading text.
        list_selection.Items.Add(ListHelpers.LoadingItem());

        // Create the DataRetriever, and provide it with a delegate to DisplayList for returning data
        _dataRetriever = new DataRetriever(DisplayList);
        // Start retrieving data on a separate thread...
        _dataRetriever.GetData();
    }

    private void DisplayList(List<ListBoxItem> itemList)
    {
        if (InvokeRequired)
        {
            // Ensure the update occurs on the UI thread
            Invoke((Action)(() => DisplayList(itemList)));
            return;
        }
        // Display each result
        list_selection.Items.Clear();
        foreach (var item in itemList)
        {
            list_selection.Items.Add(item);
        }
    }
}

// Separate class to hold thread code
public class DataRetriever
{
    public delegate void UpdateCallbackDelegate(List<ListBoxItem> itemList);

    private readonly UpdateCallbackDelegate _updateCallback;

    public DataRetriever(UpdateCallbackDelegate updateCallback)
    {
        _updateCallback = updateCallback;
    }

    public void GetData()
    {
        var thread = new Thread(GetInvoicingData)
        {
            IsBackground = true
        };
        thread.Start();
    }

    private void GetInvoicingData()
    {
        // Not sure whether "DAC" is a static class, if it needs to be constructed
        // in the DataRetriever's constructor, or passed to it as a parameter
        _updateCallback(DAC.GetInvoicingAccounts());
    }
} 
```

如您所见，所有线程代码现在都在一个单独的类`DataRetriever`中，并且在构造它时提供了一个委托，以便在检索完成后将检索到的数据传递回表单。处理回调的方法确保调用被编组到 UI 线程以防止跨线程异常。

我想指出，这并不是“最好”的方式，而只是作为问题的答案（如何将线程代码分离到一个单独的类中）。正如其他人所提到的，已经有机制来做这种事情（例如BackgroundWorker）。为了清楚起见，省略了一些复杂性。例如，在此处介绍的实现中，如果您要调用`GetData()`多次（每次调用都在前一个调用返回其数据之前发生），您将同时发生多个查询，并且由于它们异步运行，可能会返回它们的数据以任意顺序。在您的情况下，这可能是也可能不是问题。

# jquery - 页面刷新后如何记住选中的单选按钮

> ID：11149338
> 
> 赞同：1
> 
> 时间：2012-06-22T02:03:03.103
> 
> 标签：jquery, radio-button, local-storage

我正在使用上一篇文章中提到的 localstorage 想法： [记住单选按钮选择](https://stackoverflow.com/questions/7198408/remember-radio-button-selections)

他们的 jfiddle 示例工作正常，但是当我将相同的代码（见下文）合并到本地主机上的网页中时，刷新页面后新选择不起作用。我正在引用最新的 jquery 库 - [http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)

我会很感激任何建议。我敢肯定这是我想念的简单的东西。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

<script type="text/javascript">

$(function()
{
    $('input[type=radio]').each(function()
    {
        var state = JSON.parse( localStorage.getItem('radio_'  + this.id) );

        if (state) this.checked = state.checked;
    });
});

$(window).bind('unload', function()
{
    $('input[type=radio]').each(function()
    {
        localStorage.setItem(
            'radio_' + this.id, JSON.stringify({checked: this.checked})
        );
    });
});​

</script>

</head>

<body>

<form method="post">
<input type="radio" name="foo" id="foo1" />foo1<br />
<input type="radio" name="foo" id="foo2" />foo2<br />
<input type="radio" name="bar" id="bar1" />bar1<br />
<input type="radio" name="bar" id="bar2" />bar2<br />
</form>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:27:48.230

尝试使用适当的 HTML5 `doctype`：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Untitled Document</title>
... 
```

如果您不包含[W3C 指定](http://www.w3.org/TR/html5-diff/#doctype)的正确 HTML5 文档类型，大多数浏览器会将页面呈现为较旧的 [X]HTML 而不是 HTML5 （但 Chrome 通常是该规则的例外）。

此外，由于您显然使用的是 Adob​​e DreamWeaver，请不要忘记取消选中“包含 BOM 签名”并在 DW 的“另存为”菜单中选择“无”作为规范化字典。这将防止它在文档的开头添加垃圾位，这也可能会破坏您`<!DOCTYPE html>`必须**从**浏览器接收的页面 HTML 数据的第一个字节开始的垃圾位。

**编辑：** JSFiddle 会自动将您的代码添加到有效的 HTML5 页面，这就是它在那里工作得非常好的原因。您可以通过右键单击呈现页面的框架并`This Frame > View Frame Source`在 Firefox 中选择来检查它（Chrome 和 IE 的类似方法）。

另请注意，`localStorage`IE < 8 不支持。如果您需要与旧版本 IE 的跨浏览器兼容性，请查看[MDN 页面。](https://developer.mozilla.org/en/DOM/Storage)

# ruby-on-rails - 嵌套关联/加入rails

> ID：11149340
> 
> 赞同：2
> 
> 时间：2012-06-22T02:03:17.637
> 
> 标签：ruby-on-rails, activerecord

我有一个`seat`对象，该`car`对象具有一个`owner`具有a 的对象`name`。我想同时显示 the`car` `brand`和`car`' `owner`s `name`。如何在一个查询中执行此操作？

例如：

```
class Seat < ActiveRecord::Base
  belongs_to :car

  def description
    "I am in a #{car.brand} belonging to #{car.owner.name}"
    # --> how do I replace this with one query?
  end
end 
```

我会注意到这是一个非常人为的例子来简化我的问题。我连续数千次这样做，因此需要更高的效率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:57:05.040

假设您正在尝试查询`Seat`模型，并且想要预先加载汽车和所有者对象，您可以使用该`includes`子句。

```
Seat.includes(:car => :owner).where(:color => :red).each do |seat|
  "I am in a #{seat.car.brand} belonging to #{seat.car.owner.name}"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:36:21.770

利用[`default_scope`](http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Default/ClassMethods.html#method-i-default_scope)

```
class Seat
  default_scope includes([:car])
 end

class Car
  default_scope includes([:owner, :seats])
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T02:46:15.140

*对于我的应用程序中经常使用*的多表连接，我在 MySQL 中创建了一个视图。然后基于视图创建一个 ActiveRecord Rails 模型。

根据驱动视图的 SQL 语句，MySQL 甚至可以让视图被读/写。但我只是走简单的路线，总是将视图视为只读的。您可以将 AR 模型设置为只读。

通过使用使用视图的 Active Record 模型，您可以快速读取数据库的单个查询。而且它们甚至比平常更快，因为 MySQL 为视图计算一次 SQL“计划”，从而可以更快地使用它。

请记住还要检查您的外键是否都已编入索引。您不想要任何表扫描。

# facebook - Facebook：图形 api 对象删除选项？

> ID：11149341
> 
> 赞同：1
> 
> 时间：2012-06-22T02:03:19.760
> 
> 标签：facebook, facebook-graph-api, http-delete

Facebook graph api 允许您使用对象 id（它生成）或 object_url（您生成）来做事。我可以使用对象 url 删除 facebook graph api 对象吗？

例如：

```
POST  https://graph.facebook.com/id={object_id or object_url}&scrape=true 
```

（告诉 facebook 从您的网站重新抓取对象）

我想知道的是，我可以告诉 facebook 使用对象 url 删除对象吗？
还是我必须跟踪 id 并使用：

```
DELETE https://graph.facebook.com/{id} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:34:05.737

您只能在用户墙上删除自己的帖子，这意味着您无法从其他应用程序中删除帖子。你需要一个访问令牌

> 删除[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)
> 
> 您可以通过向对象 URL 发出 HTTP DELETE 请求来删除图中的对象，即
> 
> 删除[https://graph.facebook.com/ID?access_token=](https://graph.facebook.com/ID?access_token=) ... HTTP/1.1
> 
> 要支持不支持所有 HTTP 方法的客户端（如 JavaScript 客户端），您也可以使用附加参数`method=delete`向对象 URL 发出 POST 请求以覆盖 HTTP 方法。例如，您可以通过向[https://graph.facebook.com/COMMENT_ID?method=delete](https://graph.facebook.com/COMMENT_ID?method=delete)发出 POST 请求来删除评论。
> 
> 您可以通过发出 DELETE 请求来删除`/OBJECT_ID/likes` 喜欢（因为喜欢没有 ID）。

# java - 在字符之间添加空格

> ID：11149342
> 
> 赞同：9
> 
> 时间：2012-06-22T02:03:34.830
> 
> 标签：java, string, space

我想在字符串中每两个字符后添加空格。

例如：

```
javastring 
```

我想把它变成：

```
ja va st ri ng 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-22T02:06:58.837

您可以使用正则表达式`'..'`匹配每两个字符并将其替换为`"$0 "`以添加空格：

```
s = s.replaceAll("..", "$0 "); 
```

您可能还想修剪结果以删除最后的额外空间。

在线查看它：[ideone](http://ideone.com/GuA9d)。

或者，您可以添加一个否定的前瞻断言以避免在字符串末尾添加空格：

```
s = s.replaceAll("..(?!$)", "$0 "); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-15T14:48:10.190

`//Where n = no of character after you want space`

```
int n =2;
StringBuilder str = new StringBuilder("ABCDEFGHIJKLMNOP");
int idx = str.length() - n;
while (idx > 0){
   str.insert(idx, " ");
   idx = idx - n;
}
return str.toString(); 
```

说明，此代码将从右到左添加空格：

```
str = "ABCDEFGH" int idx = total length - 2; //8-2=6
while (8>0)
{
    str.insert(idx, " "); //this will insert space at 6th position
    idx = idx - n; // then decrement 6-2=4 and run loop again
} 
```

最终输出将是

```
AB CD EF GH 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-27T13:32:01.233

我为此写了一个通用的解决方案......

```
public static String insertCharacterForEveryNDistance(int distance, String original, char c){
    StringBuilder sb = new StringBuilder();
    char[] charArrayOfOriginal = original.toCharArray();
    for(int ch = 0 ; ch < charArrayOfOriginal.length ; ch++){
        if(ch % distance == 0)
            sb.append(c).append(charArrayOfOriginal[ch]);
        else
            sb.append(charArrayOfOriginal[ch]);
    }
    return sb.toString();
} 
```

然后这样称呼...

```
String result = InsertSpaces.insertCharacterForEveryNDistance(2, "javastring", ' ');
System.out.println(result); 
```

# c++ - 动态数组和类继承

> ID：11149347
> 
> 赞同：0
> 
> 时间：2012-06-22T02:05:09.743
> 
> 标签：c++, arrays, inheritance, dynamic

我正在为我的暑期 OO 课做作业，我们需要写两节课。一个被称为`Sale`，另一个被称为`Register`。我写了我的`Sale`课；这是`.h`文件：

```
enum ItemType {BOOK, DVD, SOFTWARE, CREDIT};

class Sale
{
public:
    Sale();         // default constructor, 
            // sets numerical member data to 0

    void MakeSale(ItemType x, double amt);  

    ItemType Item();        // Returns the type of item in the sale
    double Price();     // Returns the price of the sale
    double Tax();       // Returns the amount of tax on the sale
    double Total();     // Returns the total price of the sale
    void Display();     // outputs sale info 

private:
    double price;   // price of item or amount of credit
    double tax;     // amount of sales tax 
    double total;   // final price once tax is added in.
    ItemType item;  // transaction type
}; 
```

对于这个`Register`类，我们需要`Sale`在我们的成员数据中包含一个动态的对象数组。

所以我的两个问题是：

*   我是否需要从我的`Sale`班级继承到我的`Register`班级（如果需要，如何）？
*   我可以有一个动态数组的通用示例吗？

编辑：我们不能使用向量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:06:58.683

不需要继承。一个通用的例子：

```
std::vector<Sale> sales; 
```

一定要喜欢模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:55:34.420

不，在这种情况下继承不合适。您可能希望将销售数量和数组大小作为类中的字段来跟踪`Register`。类定义将包括这个

```
class Register{
    private:
        int numSales;
        int arraySize;
        Sale* sales;
    public:
        Register();
        ~Register();
        void MakeSale(Sale);        
};

Register::Register(){
    numSales = 0;
    arraySize = 5;
    sales = new Sale[arraySize];
}
void Register::MakeSale(Sale s){
    if(numSales == arraySize){
        arraySize += 5;
        Sale * tempArray = new Sale[arraySize];
        memcpy(tempArray, sales, numSales * sizeof(Sale));
        delete [] sales;
        sales = tempArray;
    }
    sales[numSales] = s;
    ++numSales;
}

Register::~Register()
{
    delete [] sales;
} 
```

这不包括边界检查或您在进行销售时需要做的任何其他事情，但希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:11:18.670

如果您不能使用向量，那么您可以使用`std::list`. 您确实应该尽可能多地使用标准容器 - 任何家庭推出的解决方案都可能是劣质的。标准库经过了广泛的优化和测试——当你有比重新发明轮子更好的事情要做时，你真的觉得有必要进行同样的投资吗？

`std::list`不应分配超出必要的空间。但是，它有一些严重的局限性。向量和其他形式的动态数组是连续的这一事实带来了很大的性能优势。

不能使用向量似乎是一个非常随意的限制。他们分配的空间超出了必要的事实是一个特性，而不是一个错误。它允许容器摊销重新分配中涉及的昂贵的复制和/或移动操作。智能向量实现应该检查内存不足的情况并优雅地处理这些情况。如果没有，您应该将补丁提交到您的标准库实现或移至新的。但是在没有解释的情况下施加任意约束，例如：

> 此数组中未使用的插槽数不应超过 5 个（即分配的空间数最多可能比实际填充真实数据的插槽数大 5 个）。

是不好的做法。数字五是从哪里来的？这甚至不是二的幂！如果您想使用 破解此限制`std::vector::reserve`，那可能是您最好的选择。但是，所有这些簿记都不应该需要完成。

而且，与其他人一致：继承不是你想要的。

# web-services - 如何在 Liferay WebService 中获取 HttpServletRequest

> ID：11149350
> 
> 赞同：1
> 
> 时间：2012-06-22T02:05:28.707
> 
> 标签：web-services, liferay

嗨，我有一个从 Liferay 的 buildServices 生成的 webService .. 方法看起来像这样

```
 public User getUserTest(long userId) {

    User u = null;
    try {
        Token token = OAuthFactoryUtil.createToken("sasa", "sdad");
    } catch (OAuthException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    try {
        u = UserLocalServiceUtil.getUser(userId);
        System.out.println("xx user " + u.getScreenName());
    } catch (Exception e) {
        System.out.println(" Exception ************* " + e.toString());
    }

    return u;
} 
```

这个 ws 中的参数是这样的：

```
http://localhost:8080/demo-portlet/api/json?serviceClassName=com.sample.portlet.library.service.BookServiceUtil&serviceMethodName=getUserTest&userId=10195&serviceParameters=[userId] 
```

有`userId`作为参数..

如果需要，您将如何传递参数`HttpServletRequest`.. 我的方法如下所示

```
public User getUserTest(HttpServletRequest httpRequest) {

    User u = null;

    try {

        String version = httpRequest.getHeader("X-PHM-APP-VERSION");
        Token token = OAuthFactoryUtil.createToken("sasa", "sdad");
    } catch (OAuthException e1) {
        e1.printStackTrace();
    }

    try {
        String authorization = httpRequest.getHeader("Authorization");
        u = UserLocalServiceUtil.getUser(Long.valueOf(authorization));
        System.out.println("authorization --> " + authorization);
        System.out.println("xx user " + u.getScreenName());
    } catch (Exception e) {
        System.out.println(" Exception ************* " + e.toString());
    }

    return u;
} 
```

我需要`HttpServletRequest`从标头获取参数，而不是通过 url。有没有更好的方法从标头获取参数？感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T04:32:28.687

我认为 web 服务层通常处于稍后阶段，您永远不会传递请求。理想情况下，您要做的是将标头参数而不是请求传递给 Web 服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:28:53.630

在 Liferay 中，您`HttpServletRequest`将从`PortletRequest`. 请使用`com.liferay.portal.util.PortalUtil`类。

里面有2个方法。`getHttpServletRequest()`并且`getOriginalServletRequest()`，您将从这些方法中获得两个核心级别的 http 请求。

# c# - 来自网站的远程计算机上的编程执行 Excel 宏

> ID：11149357
> 
> 赞同：1
> 
> 时间：2012-06-22T02:07:07.013
> 
> 标签：c#, .net, excel, ole-automation

我有一个网站，用户使用宏生成 Excel 报告，当我尝试在本地计算机上运行它时，它会完美生成并在 Excel 中运行宏。当我将它发布到服务器并同时我在那里登录（RDP 开放会话）并尝试从该服务器外部的浏览器运行它时，它也按预期运行。当我在服务器（RDP）中注销然后在服务器外部的浏览器（即从我的机器）中运行它时，会出现问题，宏不会运行但会创建我的 Excel。

这是我正在使用的代码

```
public class Report
    {
        protected Workbook Workbook { get; set; }
        protected Application Excel { get; set; }

        public void RunReport()
        {
            // Launch Excel on the server
            Excel = new Application
            {
                DisplayAlerts = false,
                ScreenUpdating = false,
                Visible = false
            };

            // Load the workbook template  
            Workbook = Excel.Workbooks.Open(@"D:\Book1.xlt");

            // Execute macros that generates the report, if any
            ExecuteMacros();

            Workbook.SaveAs(@"D:\Ray'sTesting.xls", XlFileFormat.xlExcel8);
            QuitExcel();

        }
        private void QuitExcel()
        {
            if (Workbook != null)
            {
                Workbook.Close(false);
                Marshal.ReleaseComObject(Workbook);
            }

            if (Excel != null)
            {
                Excel.Quit();
                Marshal.ReleaseComObject(Excel);
            }
        }        
        private void ExecuteMacros()
        {

            const string legacyModuleName = "Module1";
            const string legacyMacroName = "myMacro";

            bool legacyMacroExists = false;
            try
            {
                var legacyMacroModule = Workbook.VBProject.VBComponents.Item(legacyModuleName);
                if (legacyMacroModule != null)
                {
                    int legacyMacroStartLine = legacyMacroModule.CodeModule.ProcStartLine[legacyMacroName, Microsoft.Vbe.Interop.vbext_ProcKind.vbext_pk_Proc];
                    legacyMacroExists = legacyMacroStartLine > 0;
                }
            }
            catch (Exception)
            {
                legacyMacroExists = false;
            }

            if (!legacyMacroExists)
            {
                return;
            }

            // VBA code for the dynamic macro that calls the CI2 legacy macro
            var moduleCode = new StringBuilder();
            moduleCode.AppendLine("Public Sub LaunchLegacyMacro()");
            moduleCode.AppendLine(string.Format("{0}.{1}", legacyModuleName, legacyMacroName));
            moduleCode.AppendLine("End Sub");

            // Add the dynamic macro to the ThisWorkbook module
            var workbookMainModule = Workbook.VBProject.VBComponents.Item("ThisWorkbook");
            workbookMainModule.CodeModule.AddFromString(moduleCode.ToString());

            // Execute the dynamic macro
            Microsoft.VisualBasic.Interaction.CallByName(Workbook, "LaunchLegacyMacro", Microsoft.VisualBasic.CallType.Method, new object[] { });
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:09:58.850

每次我们运行excel宏时，我都通过编辑注册表来完成这项工作

```
private static void ModifyExcelSecuritySettings()
{
    // Make sure we have programmatic access to the project to run macros
    using (var key = Microsoft.Win32.Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Office\14.0\Excel\Security", true))
    {
        if (key != null)
        {
            if ((int)key.GetValue("AccessVBOM", 0) != 1)
            {
                key.SetValue("AccessVBOM", 1);
            }
            key.Close();
        }
    }
} 
```

所以代码应该是这样的

```
public void RunReport()
{
    ModifyExcelSecuritySettings();

    // Launch Excel on the server
    Excel = new Application
    {
        DisplayAlerts = false,
        ScreenUpdating = false,
        Visible = false
    };

..... 
```

我还为完整的解决方案创建了一篇博文，您可以在此处查看

[http://anyrest.wordpress.com/2012/06/22/programmatic-execution-excel-macro-on-remote-machine-from-a-website/](http://anyrest.wordpress.com/2012/06/22/programmatic-execution-excel-macro-on-remote-machine-from-a-website/)

# .net - 概念模型中UDF的空检查？

> ID：11149359
> 
> 赞同：0
> 
> 时间：2012-06-22T02:07:24.637
> 
> 标签：.net, linq, entity-framework-4

我在`<DefiningExpression>`标签下的概念数据模型中添加了一个 UDF。是否可以在`<DefiningExpression>`标签中添加空检查或替换。

```
<Function Name="FullName" ReturnType="String">
    <Parameter Name="c" Type="IsolateDataModel.User_UserInformation" />
        <DefiningExpression>
            <!--c.Prefix + " " + c.FirstName + " " + 
            c.LastName + " " + c.PostFix-->
            ISNULL(c.FirstName,"")
      </DefiningExpression>
</Function> 
```

当值不为空时，我会得到这些值，但是某些列（例如前缀和后缀）是`nullable`并且确实具有`NULL`值。如何在此内部或其他任何地方对此进行检查？我认为空值会导致异常，因此我将整个表达式设为空。相反，如果为空，我只想用“”替换它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:20:14.907

该`<DefiningExpression>`元素[必须包含 Entity SQL](http://msdn.microsoft.com/en-us/library/dd489503.aspx)。Entity SQL 没有`ISNULL`函数，因此您必须使用更笨拙的[CASE 表达式](http://msdn.microsoft.com/en-us/library/bb399229)：

```
CASE WHEN c.FirstName IS NULL THEN '' ELSE c.FirstName END 
```

# c++ - 来自多个数据源的时间

> ID：11149360
> 
> 赞同：1
> 
> 时间：2012-06-22T02:07:42.707
> 
> 标签：c++, time

我有一台带有 C++ 项目的机器，它是另一台正在发送时间戳的机器的套接字客户端，它是一个无符号整数，表示自午夜以来的毫秒数。

```
unsigned int time; 
```

如何将此时间值与系统时间进行比较，并以毫秒为单位获得两者之间的差值？随着时间的推移，价差应该是“相对”恒定的。

系统时间的精度必须在 1 毫秒以内，因为如果传播范围扩大到（例如）20 毫秒，我就知道出了点问题，代码需要注意。

我可以使用 Windows.h 任何建议和示例代码也将不胜感激！

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:17:34.170

也许这会对你有所帮助。我在学校做的一个项目中使用它来比较几种算法计算最大子序列和的效率。这是一个利用函数 QueryPerformanceCounter 的类，该函数包含在 Windows.h 中，我相信它在亚毫秒范围内是准确的。这是我能想到的使用 Windows.h 在 C++ 中执行此操作的最准确方法。

我从一个名为 gpufrustrum 的谷歌代码开源项目中得到它

```
#include <windows.h>

class CPrecisionTimer
{
  LARGE_INTEGER lFreq, lStart;

public:
  CPrecisionTimer()
  {
    QueryPerformanceFrequency(&lFreq);
  }

  inline void Start()
  {
    QueryPerformanceCounter(&lStart);
  }

  inline double Stop()
  {
    // Return duration in seconds...
    LARGE_INTEGER lEnd;
    QueryPerformanceCounter(&lEnd);
    return (double(lEnd.QuadPart - lStart.QuadPart) / lFreq.QuadPart);
  }
}; 
```

# c++ - 在 C++ 中使用 lambda 表达式和 auto 关键字时遇到问题

> ID：11149365
> 
> 赞同：4
> 
> 时间：2012-06-22T02:08:50.487
> 
> 标签：c++, lambda, c++11, mingw, auto

我正在尝试学习如何在 C++ 中使用 lambda 表达式。

我尝试了这段简单的代码，但出现编译错误：

```
int main()
{   
    vector<int> vec;
    for(int i = 1; i<10; i++)
    {
        vec.push_back(i);
    }
    for_each(vec.begin(),vec.end(),[](int n){cout << n << " ";});
    cout << endl;
} 
```

错误：

```
 forEachTests.cpp:20:61: error: no matching function for call to'for_each(std::vector<int>::iterator, std::vector<int>::iterator, main()::<lambda(int)>)'

    forEachTests.cpp:20:61: note: candidate is:
    c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_algo.h:4373:5: note:template<class _IIter, class _Funct> _Funct std::for_each(_IIter, _IIter, _Funct) 
```

我还尝试将 lambda 表达式设为自动变量，但出现了一组不同的错误。

这是代码：

```
int main()
{   
    vector<int> vec;
    for(int i = 1; i<10; i++)
    {
        vec.push_back(i);
    }
    auto print = [](int n){cout << n << " ";};
    for_each(vec.begin(),vec.end(),print);
    cout << endl;
} 
```

这给了我以下错误：

```
 forEachTests.cpp: In function 'int main()':

    forEachTests.cpp:20:7: error: 'print' does not name a type

    forEachTests.cpp:22:33: error: 'print' was not declared in this scope 
```

我假设这些是我的编译器的问题，但我不太确定。我刚刚安装了 MinGW，它似乎使用的是`gcc`4.6.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T02:43:16.447

在新的 C++11 标准下编译代码时，您必须指定标准选项`-std=c++0x`（适用于 4.7.0 之前的 gcc）或（适用于 gcc 4.7.0 及更高版本）。`-std=c++11`

# r - cut 返回保证的 bin 数量

> ID：11149375
> 
> 赞同：2
> 
> 时间：2012-06-22T02:11:13.920
> 
> 标签：r

我想在保证返回的级别数的情况下进行削减。所以我想采用任何累积百分比的向量并将其分成十分位数。我试过使用 cut 并且它在大多数情况下都很好用，但是在有很大百分比的十分位数的情况下，它无法返回所需的唯一削减数量，即 10。关于如何确保数量的任何想法削减的保证是10？

在包含的示例中，没有出现十分位数 7。

```
> (x <- c(0.04,0.1,0.22,0.24,0.26,0.3,0.35,0.52,0.62,0.66,0.68,0.69,0.76,0.82,1.41,6.19,9.05,18.34,19.85,20.5,20.96,31.85,34.33,36.05,36.32,43.56,44.19,53.33,58.03,72.46,73.4,77.71,78.81,79.88,84.31,90.07,92.69,99.14,99.95))
 [1]  0.04  0.10  0.22  0.24  0.26  0.30  0.35  0.52  0.62  0.66  0.68  0.69  0.76  0.82  1.41  6.19  9.05 18.34 19.85 20.50 20.96 31.85 34.33
[24] 36.05 36.32 43.56 44.19 53.33 58.03 72.46 73.40 77.71 78.81 79.88 84.31 90.07 92.69 99.14 99.95
> (cut(x,seq(0,max(x),max(x)/10),labels=FALSE))
 [1]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  2  2  3  3  4  4  4  4  5  5  6  6  8  8  8  8  8  9 10 10 10 10
> (as.integer(cut2(x,seq(0,max(x),max(x)/10))))
 [1]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  2  2  3  3  4  4  4  4  5  5  6  6  8  8  8  8  8  9 10 10 10 10
> (findInterval(x,seq(0,max(x),max(x)/10),rightmost.closed=TRUE,all.inside=TRUE))
 [1]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  2  2  3  3  4  4  4  4  5  5  6  6  8  8  8  8  8  9 10 10 10 10 
```

我想得到 10 个大致相同大小的间隔，其大小可以确保得到 10 个。cut 等人在这个例子中给出了 9 个 bin，我想要 10 个。所以我正在寻找一种能够识别的算法[58.03,72.46],73.4 之间的间隔很大。它不会将这些案例分配给箱 6、8、8，而不是分配给箱 6、7、8。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T03:20:35.940

```
xx <- cut(x, breaks=quantile(x, (1:10)/10, na.rm=TRUE) )
table(xx)
#------------------------
    xx
(0.256,0.58] (0.58,0.718] (0.718,6.76]  (6.76,20.5] 
           4            4            4            4 
 (20.5,35.7]  (35.7,49.7]  (49.7,75.1]  (75.1,85.5] 
           3            4            4            4 
  (85.5,100] 
           4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-06T20:39:17.390

```
numBins = 10
cut(x, breaks = seq(from = min(x), to = max(x), length.out = numBins+1)) 
```

输出：

```
...
...
...
10 Levels: (0.04,10] (10,20] (20,30] (30,40] (40,50] (50,60] ... (90,100] 
```

这将生成 10 个大约等距的 bin。请注意，通过更改`numBins`变量，您可以获得任意数量的大约等间距的 bin。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T02:45:55.363

不确定我是否理解您的需求，但如果您放弃`labels=FALSE`并使用`table`来制作数据的频率表，您将获得所需的类别数量：

```
> table(cut(x, breaks=seq(0, 100, 10)))

(0,10]  (10,20]  (20,30]  (30,40]  (40,50]  (50,60]  (60,70]  (70,80]  (80,90] (90,100] 
   17        2        2        4        2        2        0        5        1        4 
```

请注意，第 7 类中没有数据，`(60,70]`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T11:37:53.637

您要解决的问题是什么？如果您不想要分位数，那么您的切点几乎是任意的，因此您可以通过采样轻松创建十个箱，而无需从原始数据集中进行替换。我意识到这是一种荒谬的方法，但我想说明一点：你可能偏离了轨道，但我们无法判断，因为你没有解释你打算用你的垃圾箱做什么。例如，为什么一个垃圾箱没有内容会如此糟糕？

# xpath - 在 XQuery 表达式中使用变量

> ID：11149376
> 
> 赞同：0
> 
> 时间：2012-06-22T02:11:21.730
> 
> 标签：xpath, xquery, xquery-sql

使用 Xquery，如何将变量嵌入到以下 xml 文档的 xquery 表达式中。我有以下 xml 文档

```
<CD>
        <TITLE>Picture book</TITLE>
        <ARTIST>Simply Red</ARTIST>
        <COUNTRY>EU</COUNTRY>
        <COMPANY>Elektra</COMPANY>
        <PRICE>7.20</PRICE>
        <YEAR>1985</YEAR>
    </CD>
    <CD>
        <TITLE>Red</TITLE>
        <ARTIST>The Communards</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>London</COMPANY>
        <PRICE>7.80</PRICE>
        <YEAR>1987</YEAR>
    </CD>
    <CD>
        <TITLE>Unchain my heart</TITLE>
        <ARTIST>Joe Cocker</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>EMI</COMPANY>
        <PRICE>8.20</PRICE>
        <YEAR>1986</YEAR>
    </CD> 
```

我需要发出查询以返回 YEAR > 1986 的所有 CD。我希望将“where”子句的组件作为变量，我的意思是存储`YEAR > 1986`到三个变量中并在查询中使用变量，这里我到目前为止

```
String queryString =
                "declare variable $field :=" +"YEAR"+";"+
                "declare variable $operator :=" +">"+";"+
                "declare variable $value :=" +"1986"+";"+
                "declare variable $docName as xs:string external;" + sep +
                "for $cat in doc($docName)/*/"+ "CD" +
                 "where $cat/$field $operator $value" +
                "order by $cat/$field" +
                "return $cat";

              XQExpression expression = conn.createExpression();
              expression.bindString(new QName("docName"), filename,
              conn.createAtomicType(XQItemType.XQBASETYPE_STRING));
              results = expression.executeQuery(queryString);
              return results.getSequenceAsString(new Properties()); 
```

我的查询表达式不完美，我想我在使用变量时遇到了麻烦，有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:01:33.253

XQuery（和 XSLT/XPath）中的变量表示值，而不是程序文本的片段。也就是说，它不是一种宏语言——变量不能通过文本替换起作用。

使用变量作为值很简单：x = $value。

为元素名称使用变量并不难：*[name()=$n] = $value

但是不可能为运算符使用变量。当您达到这个级别时，最好使用字符串连接将查询生成为字符串，然后编译并执行它。实际上，您似乎无论如何都将查询生成为字符串（不用担心代码注入的风险，我明白了）。

# apache-camel - 使用 Apache Camel 连接到 Sonic ESB

> ID：11149377
> 
> 赞同：1
> 
> 时间：2012-06-22T02:11:43.143
> 
> 标签：apache-camel, esb

Camel 可以连接到 Sonic ESB 吗？
我找不到任何骆驼声波整合的具体例子。这就是为什么我很困惑，如果它可能的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T07:00:31.003

我看过 Sonic ESB，因为我从未使用过它。但是，我可以看到几种可以将骆驼路由与 ESB 集成的方法。

1.  *Web 服务：*如果您在 Sonice ESB 上托管 Web 服务，camel 完全能够从骆驼路由调用这些 Web 服务。
2.  *JMS：*如果 Sonic ESB 可以托管 JMS 路由（我相信它可以但可能是错误的），您可以将 JMS 消息从您的 Camel 路由发送到由 Sonic ESB 托管的 JMS 队列。
3.  *JBI 组件：*一些 ESB，例如 Apache ServiceMix 和 OpenESB，是基于 JBI 标准的。如果 Sonic ESB 使用此标准，您应该能够将 JBI 消息直接发送到 Sonic ESB 系统。

希望这能给你一些参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T10:49:45.430

连接 ESB 通常不需要特定的传输，因为 ESB 是连接软件包。您可能可以挑选最适合您的交通工具并开始使用。

# c# - Metro 8 - 绑定 ListView 导致 System.ArgumentException “值不在预期范围内”

> ID：11149379
> 
> 赞同：3
> 
> 时间：2012-06-22T02:12:33.250
> 
> 标签：c#, wpf, xaml, microsoft-metro

我不确定刚刚发生了什么，为什么今天早上我运行了我的项目并开始导致 System.ArgumentException 错误。也许我昨​​晚改变了一些东西，我又半睡半醒了。

我尝试寻找答案，它让我知道在财产中具有相同的名称？

我扫描了我的代码，它看起来和上次成功运行的代码一样......奇怪......

也许您可以帮助我寻找错误并启发我。

基本上错误是在这段代码中引起的

```
lvSubmeters.ItemsSource = this.store 
```

在这段代码中

```
public MainPage()
{
    this.InitializeComponent();
    this.InitializeControlEvents();
    this.InitializeControls();
}

void InitializeControls()
{
    store = new DataStore();
    store.AllItems = new System.Collections.ObjectModel.ObservableCollection<ItemFields>();
    PopulateTempData();

    lvSubmeters.ItemsSource = this.store;
} 
```

这是我的 PopulateTempData

```
void PopulateTempData()
{
    txCurrentBill.Text = "5308.07";
    txKwHUsed.Text = "710";
    txTotalAdditonalCharges.Text = "249.1";
    ComputeKwhPerSubmeter(txTotalAdditonalCharges, null);

    RefreshListView(new ItemFields()
    {
        MeterID = "1234",
        Fullname = "XOP",
        LastReading = 22980,
        NewReading = 23107,
        KwhPerSubmeter = Convert.ToDouble(txKwHPerSub.Tag),
        AdditionalCharges = Convert.ToDouble(txChargeForEachSubmeters.Tag)
    });
    RefreshListView(new ItemFields()
    {
        MeterID = "2345",
        Fullname = "Bigasan",
        LastReading = 0,
        NewReading = 0,
        KwhPerSubmeter = Convert.ToDouble(txKwHPerSub.Tag),
        AdditionalCharges = Convert.ToDouble(txChargeForEachSubmeters.Tag)
    });
    RefreshListView(new ItemFields()
    {
        MeterID = "3456",
        Fullname = "Store",
        LastReading = 0,
        NewReading = 0,
        KwhPerSubmeter = Convert.ToDouble(txKwHPerSub.Tag),
        AdditionalCharges = Convert.ToDouble(txChargeForEachSubmeters.Tag)
    });
    RefreshListView(new ItemFields()
    {
        MeterID = "4567",
        Fullname = "Social & Play",
        LastReading = 7056,
        NewReading = 7511,
        KwhPerSubmeter = Convert.ToDouble(txKwHPerSub.Tag),
        AdditionalCharges = Convert.ToDouble(txChargeForEachSubmeters.Tag)
    });
    RefreshListView(new ItemFields()
    {
        MeterID = "5678",
        Fullname = "Parlor",
        LastReading = 8277,
        NewReading = 8365,
        KwhPerSubmeter = Convert.ToDouble(txKwHPerSub.Tag),
        AdditionalCharges = Convert.ToDouble(txChargeForEachSubmeters.Tag)
    });
} 
```

这是 ItemFields 模型

```
using System;

namespace ElectricSubmeterBillComputation.Models
{
    using System.ComponentModel;

    public class ItemFields : System.ComponentModel.INotifyPropertyChanged
    {
        string _meter_id = string.Empty;
        public string MeterID
        {
            get { return this._meter_id; }
            set
            {
                if (_meter_id != value)
                {
                    _meter_id = value;
                    NotifyPropertyChanged("MeterID");
                }
            }
        }

        string _fullname = string.Empty;
        public string Fullname
        {
            get { return this._fullname; }
            set
            {
                if (this._fullname != value)
                {
                    this._fullname = value;
                    NotifyPropertyChanged("Fullname");
                }
            }
        }

        int _lastreading = 0;
        public int LastReading
        {
            get { return this._lastreading; }
            set
            {
                if (this._lastreading != value)
                {
                    this._lastreading = value;
                    NotifyPropertyChanged("LastReading");
                }
            }
        }

        int _newreading = 0;
        public int NewReading
        {
            get { return this._newreading; }
            set
            {
                if (this._newreading != value)
                {
                    this._newreading = value;
                    NotifyPropertyChanged("NewReading");
                }
            }
        }

        int _kwhused = 0;
        public int KwHUsed
        {
            get { return this._kwhused; }
            set
            {
                if (this._kwhused != value)
                {
                    this._kwhused = value;
                    NotifyPropertyChanged("KwHUsed");
                }
            }
        }

        double _KwHPerSubmeter = 0.0;
        public double KwhPerSubmeter
        {
            get { return this._KwHPerSubmeter; }
            set
            {
                if (this._KwHPerSubmeter != value)
                {
                    this._KwHPerSubmeter = value;
                    NotifyPropertyChanged("KwhPerSubmeter");
                }
            }
        }

        double _kwhamount = 0.0;
        public double KwhUsedAmount
        {
            get { return this._kwhamount; }
            set
            {
                if (this._kwhamount != value)
                {
                    this._kwhamount = value;    
                    NotifyPropertyChanged("KwhUsedAmount");
                }
            }
        }

        double _add_charge = 0.0;
        public double AdditionalCharges
        {
            get { return this._add_charge; }
            set
            {
                if (this._add_charge != value)
                {
                    this._add_charge = value;
                    NotifyPropertyChanged("AdditionalCharges");
                }
            }
        }

        double _total_amount = 0.0;
        public double TotalAmount
        {
            get { return this._total_amount; }
            set
            {
                if (this._total_amount != value)
                {
                    this._total_amount = value;
                    NotifyPropertyChanged("TotalAmount");
                }
            }
        }

        public void Update()
        {
            KwHUsed = NewReading - LastReading;
            KwhUsedAmount = KwHUsed * KwhPerSubmeter;
            TotalAmount = KwhUsedAmount + AdditionalCharges;
        }

        #region INotifyPropertyChanged
        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
        #endregion
    }
} 
```

这是数据存储模型

```
using System;
using System.Collections.ObjectModel;

namespace ElectricSubmeterBillComputation.Models
{
    using System.ComponentModel;

    public class DataStore : INotifyPropertyChanged
    {
        ObservableCollection<ItemFields> _allItems;
        public ObservableCollection<ItemFields> AllItems
        {
            get { return this._allItems; }
            set
            {
                _allItems = value;
                NotifyPropertyChanged("AllItems");
            }
        }

        public void UpdateAllAmounts(double AdditionalChargersPerSubmeter)
        {
            foreach (ItemFields item in _allItems)
            {
                item.AdditionalCharges = AdditionalChargersPerSubmeter;
                item.Update();
            }
        }

        #region INotifyPropertyChanged
        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
        #endregion
    }
} 
```

最后，我的列表视图

```
<ListView Grid.Row="3" x:Name="lvSubmeters" ItemTemplate="{StaticResource SubmeterItems}" VerticalAlignment="Top" HorizontalAlignment="Stretch" SelectionChanged="lvSubmeters_SelectionChanged">
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        </Style>
    </ListView.ItemContainerStyle>
</ListView> 
```

和 SubmeterItems 模板

```
<DataTemplate x:Name="SubmeterItems">
    <Grid VerticalAlignment="Top" HorizontalAlignment="Stretch"  Margin="5,5,5,5">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="166"/>
            <ColumnDefinition Width="100*"/>
            <ColumnDefinition Width="200"/>
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0" VerticalAlignment="Top">
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding MeterID}" FontSize="24"  FontWeight="Bold" Foreground="#FF429AA3" />
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding Fullname}" FontSize="16"  />
        </StackPanel>
        <StackPanel Grid.Column="1" VerticalAlignment="Top" Height="95">
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text=" " FontSize="24"  FontWeight="Bold" Foreground="#FF429AA3" />
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="29*"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">
                    <TextBlock Grid.Column="0" VerticalAlignment="Top" Text="Last Reading:" FontSize="14" Margin="0,0,5,5"  />
                    <TextBlock Grid.Column="0" VerticalAlignment="Top" Text="New Reading:" FontSize="14" Margin="0,0,5,5"  />
                    <TextBlock Grid.Column="0" VerticalAlignment="Top" Text="KW/H Used:" FontSize="14" Margin="0,0,5,5"  />
                </StackPanel>
                <StackPanel Grid.Column="1">
                    <TextBlock Grid.Column="1" VerticalAlignment="Top" Text="{Binding LastReading}" FontSize="14" Margin="0,0,5,5" FontWeight="Bold"  />
                    <TextBlock Grid.Column="1" VerticalAlignment="Top" Text="{Binding NewReading}" FontSize="14" Margin="0,0,5,5" FontWeight="Bold"  />
                    <TextBlock Grid.Column="1" VerticalAlignment="Top" Text="{Binding KwHUsed}" FontSize="14" Margin="0,0,5,5" FontWeight="Bold"  />
                </StackPanel>
            </Grid>
        </StackPanel>

        <StackPanel Grid.Column="2" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Background="Black">
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding KwhUsedAmount}" FontSize="20"  FontWeight="Bold" Foreground="Red" TextAlignment="Right" Margin="0,0,5,0" />
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="+" FontSize="20" Foreground="#99FF0000" TextAlignment="Right"  Margin="0,0,5,0"/>
                <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding AdditionalCharges}" FontSize="20" Foreground="#99FF0000" TextAlignment="Right"  Margin="0,0,5,0"/>
            </StackPanel>
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding TotalAmount}" FontSize="34" FontWeight="Bold" Foreground="Green" TextAlignment="Right"  Margin="0,0,5,0" />
        </StackPanel>
    </Grid>
</DataTemplate> 
```

最后是堆栈跟踪

```
 at Windows.UI.Xaml.Controls.ItemsControl.put_ItemsSource(Object value)
   at ElectricSubmeterBillComputation.MainPage.InitializeControls() in d:\Codes\WindowsMetro\ElectricSubmeterBillComputation\ElectricSubmeterBillComputation\MainPage.xaml.cs:line 43
   at ElectricSubmeterBillComputation.MainPage..ctor() in d:\Codes\WindowsMetro\ElectricSubmeterBillComputation\ElectricSubmeterBillComputation\MainPage.xaml.cs:line 33
   at ElectricSubmeterBillComputation.ElectricSubmeterBillComputation_XamlTypeInfo.XamlTypeInfoProvider.Activate_1_MainPage() in d:\Codes\WindowsMetro\ElectricSubmeterBillComputation\ElectricSubmeterBillComputation\obj\Debug\XamlTypeInfo.g.cs:line 121
   at ElectricSubmeterBillComputation.ElectricSubmeterBillComputation_XamlTypeInfo.XamlUserType.ActivateInstance() in d:\Codes\WindowsMetro\ElectricSubmeterBillComputation\ElectricSubmeterBillComputation\obj\Debug\XamlTypeInfo.g.cs:line 277 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:40:48.503

解决了..

```
lvSubmeters.ItemsSource = this.store; 
```

它应该是

```
lvSubmeters.ItemsSource = this.store.AllItems; 
```

所以为了制作上面的第一个代码

```
lvSubmeters.DataContext = this.store; 
```

ListView 应该有

```
ItemsSource="{Binding AllItems}" 
```

# java - 添加了新的 pushpixal 主题，但没有变化

> ID：11149382
> 
> 赞同：1
> 
> 时间：2012-06-22T02:13:04.297
> 
> 标签：java, swing, jframe, look-and-feel, substance

我的run.bat：

```
@echo off
@title test
java -Dfile.encoding=Cp1252 -classpath bin;lib/libs.jar;lib/substance-6.0.jar;lib/trident-1.2.jar; Loader
pause 
```

我的框架：

```
void openFrame() {
        try {
         UIManager.setLookAndFeel("org.pushingpixals.substance.api.skin.SubstanceTwilightLookAndFeel"); 
            JFrame.setDefaultLookAndFeelDecorated(true);
             JDialog.setDefaultLookAndFeelDecorated(true);
        } catch (Throwable e) {
            e.getStackTrace();
        }
               appletFrame = new JFrame(Settings.serverName);
               appletFrame.setLayout(new BorderLayout());
    appletFrame.setDefaultCloseOperation(3);
    appletPanel.setLayout(new BorderLayout());
    appletPanel.add(this);
    appletPanel.setPreferredSize(new Dimension(765, 504));
    appletFrame.getContentPane().add(appletPanel, "Center");
    appletFrame.pack();
    appletFrame.setLocationRelativeTo(null);
    appletFrame.setVisible(true); 
```

我这样做了，但由于某种原因，主题没有改变。似乎是什么问题？我得到了正确的物质和三叉戟，但它没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:58:38.210

1.change for`Substance L&F`必须包裹成`invokeLater()`

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            JFrame.setDefaultLookAndFeelDecorated(true);
            JDialog.setDefaultLookAndFeelDecorated(true);
            try {
                UIManager.setLookAndFeel(new org.pushingpixels.substance.api.skin.SubstanceBusinessBlackSteelLookAndFeel());
            } catch (UnsupportedLookAndFeelException ex) {
            }
            // rest of your code
        }
    });
} 
```

2.最好是这个图，以他们的名字称呼皮肤

( `SubstanceLookAndFeel.setSkin(new BusinessBlueSteelSkin());`)

或者

( `UIManager.setLookAndFeel(new org.pushingpixels.substance.api.skin.SubstanceBusinessBlackSteelLookAndFeel());`)

基里尔的代码示例

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import org.pushingpixels.substance.api.DecorationAreaType;
import org.pushingpixels.substance.api.SubstanceLookAndFeel;
import org.pushingpixels.substance.api.skin.BusinessBlueSteelSkin;

/**
 * Test application that shows the use of the
 * {@link SubstanceLookAndFeel#getDecorationType(java.awt.Component)} API called
 * on different components.
 *
 * @author Kirill Grouchnikov
 * @see SubstanceLookAndFeel#getDecorationType(java.awt.Component)
 */
public class GetDecorationType extends JFrame {

    private static final long serialVersionUID = 1L;

    /**
     * Creates the main frame for <code>this</code> sample.
     */
    public GetDecorationType() {
        super("Get decoration type");
        this.setLayout(new BorderLayout());
        final JTabbedPane tabs = new JTabbedPane();
        SubstanceLookAndFeel.setDecorationType(tabs, DecorationAreaType.HEADER);
        JPanel tab1 = new JPanel(new FlowLayout());
        tab1.add(new JTextField("sample"));
        final JComboBox combo = new JComboBox(new Object[]{"sample"});
        tab1.add(combo);
        SubstanceLookAndFeel.setDecorationType(tab1, DecorationAreaType.GENERAL);
        JPanel tab2 = new JPanel(new FlowLayout());
        tab2.add(new JTextField("sample2"));
        tab2.add(new JComboBox(new Object[]{"sample2"}));
        SubstanceLookAndFeel.setDecorationType(tab2, DecorationAreaType.GENERAL);
        tabs.addTab("tab1", tab1);
        tabs.addTab("tab2", tab2);
        this.add(tabs, BorderLayout.CENTER);
        JPanel controlPanel = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        JButton getTypes = new JButton("Get types");
        getTypes.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        DecorationAreaType tabsType = SubstanceLookAndFeel.getDecorationType(tabs);
                        DecorationAreaType comboType = SubstanceLookAndFeel.getDecorationType(combo);
                        JOptionPane.showMessageDialog(GetDecorationType.this,
                                "Tabbed pane: " + tabsType.getDisplayName() + "\n" + "Combo box: " + comboType.getDisplayName());
                    }
                });
            }
        });
        controlPanel.add(getTypes);
        this.add(controlPanel, BorderLayout.SOUTH);
        this.setSize(400, 200);
        this.setLocationRelativeTo(null);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    /**
     * The main method for <code>this</code> sample. The arguments are ignored.
     *
     * @param args
     *            Ignored.
     */
    public static void main(String[] args) {
        JFrame.setDefaultLookAndFeelDecorated(true);
        JDialog.setDefaultLookAndFeelDecorated(true);
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                SubstanceLookAndFeel.setSkin(new BusinessBlueSteelSkin());
                UIManager.put("TabbedPane.contentOpaque", Boolean.TRUE);
                new GetDecorationType().setVisible(true);
            }
        });
    }
} 
```

# postgresql - 插入多个表中列的动态列表的函数

> ID：11149387
> 
> 赞同：1
> 
> 时间：2012-06-22T02:14:18.120
> 
> 标签：postgresql, stored-procedures, insert, plpgsql, postgresql-9.1

我想在 PostgreSQL中做这样的[事情。](http://www.sqlinfo.net/sqlserver/sql_server_stored_procedure_INSERT.php)

我试过这个：

```
CREATE or replace FUNCTION create_patient(_name text, _email text, _phone text
     , _password text
     , _field1 text, _field2 text, _field3 timestamp, _field4 text
     , OUT _pid integer, OUT _id integer
    ) RETURNS record AS
$$
DECLARE
    _id integer;
    _type text;
    _pid integer;
BEGIN
    _type := 'patient';

    INSERT into patients (name, email, phone, field1, field2, field3)
    VALUES (_name, _email, _phone, _field1, _field2, _field3)
    RETURNING id into _pid;

    INSERT into users (username, password, type, pid, phone, language)
    VALUES (_email, _password, _type, _pid, _phone, _field4)
    RETURNING id into _id;
END;
$$ LANGUAGE plpgsql; 
```

但是在很多情况下，我不想指定其中的一些`field1 / field2 / field3 / field4`并且希望未指定的字段使用表中的默认值。目前这是不可能的，因为要调用此函数，我需要指定所有字段。

有没有一种简单的方法可以在 PL/pgSQL 中创建包装程序`INSERT`，我可以在其中指定要插入的字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T15:12:36.113

对函数参数和[**动态 SQL**](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)使用[**默认值**](http://www.postgresql.org/docs/current/interactive/sql-syntax-calling-funcs.html)...[](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)

 **### 演示功能

```
CREATE OR REPLACE FUNCTION create_patient(
     _name     text      = NULL  -- always updated, NULL if not provided
    ,_email    text      = NULL
    ,_phone    text      = NULL
    ,_password text      = NULL
    ,_field1   text      = NULL  -- variable parameters
    ,_field2   text      = NULL
    ,_field3   timestamp = NULL
    ,_language text      = NULL
    ,_cols     text[]    = '{field1,field2,field3,language}'
    ,OUT _pid  text
    ,OUT _id   int)
  RETURNS record AS
$func$
BEGIN
   EXECUTE format(
   'INSERT INTO patients (field1, field2, field3, name, email, phone)
    VALUES               (%s,     %s,     %s,     $4,   $5,    $6   )
    RETURNING id'
       ,CASE WHEN 'field1' = ANY(_cols) THEN '$1' ELSE 'DEFAULT' END
       ,CASE WHEN 'field2' = ANY(_cols) THEN '$2' ELSE 'DEFAULT' END
       ,CASE WHEN 'field3' = ANY(_cols) THEN '$3' ELSE 'DEFAULT' END)
    INTO  _pid                       -- return value, also used in 2nd insert
    USING _field1, _field2, _field3, _name, _email, _phone;

   EXECUTE format(
   'INSERT INTO users (username, password, type,        pid, phone, language)
    VALUES            ($1,       $2,       $$patient$$, $3,  $4,    %s      )
    RETURNING id'
      ,CASE WHEN 'language' = ANY(_cols) THEN '$4' ELSE 'DEFAULT' END)
    INTO  _id                        -- return value
    USING _email, _password, _pid, _phone, _language;
END
$func$  LANGUAGE plpgsql; 
```

### 称呼

```
SELECT * FROM create_patient('myname','myemail','myphone','mypassword'
,'myfield1','myfield2',NULL,'English','{field2,language,field1}'::text[]); 
```

由于该函数使用命名参数并且每个参数都有一个默认值，因此您甚至可以这样调用它：

```
SELECT * FROM create_patient(_name := 'myname'); 
```

如果需要一些非空值，可能不适用于您的表，但可以证明一旦您提供命名参数，您就可以省略任何具有默认值的参数。省略的参数采用声明的默认值（不要与列默认值混淆）。此相关答案中的更多内容：
[具有可变数量输入参数的函数](https://stackoverflow.com/questions/16782199/functions-with-variable-number-of-input-parameters/16789179#16789179)

### 要点

*   使用[command的](http://www.postgresql.org/docs/current/interactive/sql-insert.html)[`DEFAULT`关键字`INSERT`](http://www.postgresql.org/docs/current/interactive/sql-insert.html)。它使系统插入表的默认列。
    另一种方法是仅列出`INSERT`行中获得相应项目的`VALUES`列。

*   您*必须*使用[动态 SQL 并`EXECUTE`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)操纵语句本身，而不仅仅是值。

*   “摆动柱”是`field1`和`field3`，`language`其余的是根据定义硬连线的。根据需要变化。

*   我的函数适用于*所有情况*，您甚至可以提供一个`NULL`值而不是列默认值。这需要一个参数`_cols`来提供要插入哪些列的信息。

*   如果声明了所有涉及的列`NOT NULL`- 尚未澄清 - 您可以简化：传递`NULL`任何应该获得列默认值的列并调整`CASE`语句。

*   如果省略`_cols`，将插入所有字段。由于`_cols`是最后一个`IN`参数并且具有默认值，您可以*随时*省略它。

*   我使用[`USING`for 子句`EXECUTE`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)将参数作为*值*传递，并防止使用动态构建的查询字符串进行 SQL 注入。

*   我`format()`用来简化语句汇编并避免多重赋值。PL/pgSQL 更便宜。

*   不要在函数体`DECLARE` `_id`中`_pid`使用，因为它们是由`OUT`标头中的参数声明并自动返回的。

*   `type`您可以直接在`INSERT`语句中插入一个常量值。这样您就不需要*任何*变量并保存额外的分配。

*   使用 PostgreSQL **9.1**测试，但应该适用于自 8.4 以来的所有版本——除了[`format()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)9.1 引入的版本。**

# database - Indexeddb：onsuccess 和 oncomplete 之间的区别？

> ID：11149388
> 
> 赞同：7
> 
> 时间：2012-06-22T02:14:23.563
> 
> 标签：database, indexeddb

当 IndexedDB 事务完成或成功时，我使用两个不同的回调事件来响应：

假设... db：IDBDatabase 对象，tr：IDBTransaction 对象，os：IDBObjectStore 对象

```
tr = db.transaction(os_name,'readwrite');
os = tr.objectStore(); 
```

情况1 ：

```
r = os.openCursor();
r.onsuccess = function(){
    if(r.result){
        callback_for_result_fetched();
        r.result.continue;
    }else callback_for_transaction_finish();
} 
```

案例2：

```
tr.oncomplete = callback_for_transaction_finish(); 
```

如果他们两个工作相似，那就太浪费了。那你能告诉我，它们之间有什么区别吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-14T08:11:25.313

很抱歉提出了一个相当老的线程，但它的质疑是一个很好的起点......

我寻找了一个类似的问题，但在一个有点不同的用例中，实际上没有找到好的答案，甚至没有找到误导性的答案。

当您需要对objectStore进行**多次写入时，请考虑一个用例，甚至写入多次。**您绝对**不想**管理每一次写入以及它自己的成功和错误事件。这就是事务的含义，这是 indexedDB 的（正确）实现：

```
var trx = dbInstance.transaction([storeIdA, storeIdB], 'readwrite'),
    storeA = trx.objectStore(storeIdA),
    storeB = trx.objectStore(storeIdB);

    trx.oncomplete = function(event) {
        // this code will run only when ALL of the following requests are succeed
        // and only AFTER ALL of them were processed
    };
    trx.onerror = function(error) {
        // this code will run if ANY of the following requests will fail
        // and only AFTER ALL of them were processed
    };

    storeA.put({ key:keyA, value:valueA });
    storeA.put({ key:keyB, value:valueB });
    storeB.put({ key:keyA, value:valueA });
    storeB.put({ key:keyB, value:valueB }); 
```

这种理解的线索可以在 W3C[规范](http://www.w3.org/TR/IndexedDB/#widl-IDBTransaction-oncomplete)的以下声明中找到：

> 要确定事务是否成功完成，请侦听事务的**完成事件而不是特定请求的成功事件**，因为在成功事件触发后事务仍可能失败。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-22T02:37:07.750

虽然这些回调函数确实类似，但它们并不相同：和之间的区别在于，在这些事务上发出的事务`onsuccess`和请求是.`oncomplete``complete``successful`

`oncomplete`仅在[规范](http://www.w3.org/TR/IndexedDB/#widl-IDBTransaction-oncomplete)中定义为与事务相关。事务没有`onsuccess`回调。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-19T15:21:44.483

我只会警告说，没有 garentee 获得成功的 trx.oncomplete 意味着数据已写入磁盘/数据库：

我们看到 trx.oncomplete 存在数据未写入磁盘上的数据库的问题。FireFox 解释了他们所做的导致此问题的原因：[https ://developer.mozilla.org/en-US/docs/Web/API/IDBTransaction/oncomplete](https://developer.mozilla.org/en-US/docs/Web/API/IDBTransaction/oncomplete)

似乎 windows/edge 也有同样的问题。基本上，如果/当用户决定关闭或关闭设备时，不能保证您的应用程序会将数据写入数据库。在某些情况下，我们甚至尝试在关闭之前等待长达 15 分钟，但还没有看到写入的数据。对我来说，我总是希望确保数据写入完成并提交。

除了 FF 实验性添加之外，还有其他针对真正持久数据库的解决方案，或者对 IndexedDB 的增强...

# java - 如何以编程方式在 ActiveMQ 中启用优先级队列？

> ID：11149389
> 
> 赞同：1
> 
> 时间：2012-06-22T02:14:48.250
> 
> 标签：java, jms, activemq, priority-queue

我想在 ActiveMQ 中使用优先级消息队列。根据此[链接](http://activemq.apache.org/how-can-i-support-priority-queues.html)，默认情况下它是禁用的。我正在使用嵌入式 MessageBroker。是否可以以编程方式启用优先级。我没有这样的xml配置文件。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:23:46.753

那么，您是使用纯 java 嵌入吗？

你应该尝试这样的事情：

```
BrokerService bs = new BrokerService();
    bs.addConnector("tcp://localhost:61616");
    PolicyMap pm = new PolicyMap();
    PolicyEntry pe = new PolicyEntry();
    pe.setPrioritizedMessages(true);
    pm.setDefaultEntry(pe);
    bs.setDestinationPolicy(pm);
    bs.start(); 
```

如果您使用 spring 嵌入 ActiveMQ，请注意 ActiveMQ dist 中的 activemq.xml。只不过是一个简单的 spring 上下文文件，它创建具有各种属性的代理。

# database - 存储实时情绪数据的最有效方式

> ID：11149392
> 
> 赞同：0
> 
> 时间：2012-06-22T02:15:43.173
> 
> 标签：database, performance, database-design, nosql, sentiment-analysis

我正计划创建一个应用程序来将 Twitter 情绪存储在特定主题的数据库中。我不需要存储推文，只需要存储主题的情绪。我可以使用 SQL 或 noSQL DB。该应用程序将摄取大量数据，因此它需要高效。

我想知道摄取推文是否更有效，将它们存储在 noSQL 数据库中，然后作为一个单独的进程，从数据库中读取推文并分析情绪并将其存储。或者，从 API 单独读取推文、动态确定情绪并将情绪存储在数据库中是否更有效？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:01:12.557

我认为更好的解决方案是在推文进入时分析推文，并使用您的逻辑来创建情绪并存储在您选择的数据库中。在分析之前存储所有传入的推文可能会在您的应用程序中造成不必要的瓶颈。此外，您实际上并不需要存储所有原始数据。

# version-control - Mercurial 中的发布管理 - [major].[minor].[bugfix] 版本控制，支持旧的主要版本

> ID：11149393
> 
> 赞同：1
> 
> 时间：2012-06-22T02:15:50.780
> 
> 标签：version-control, mercurial, branch, dvcs, release-management

我一直在探索有关 Mercurial 中发布管理的不同答案，并且几乎找到了正确的方法。但是，我只需要一些帮助来正确处理它，以便一切都在我的脑海中很好地点击。

这是我们公司需要的：

1）将使用版本控制方案 {major.minor.patch} 进行开发

2）命名分支和标签将用于管理发布（例如，与克隆存储库相反）

3）在发布时3.0 我们可能需要支持较旧的主要版本。例如，如果在 2.1 版中发现了一个错误，我们将需要修复它（在 2.1.1 版中）并一直合并回当前的 3.0 版

在研究了不同的选项和答案之后，Steve Losh 的以下[出色答案](https://stackoverflow.com/questions/1405604/managing-release-branches-in-mercurial/1406906#1406906)（只是复制了下面的变更集树）可能是我们需要的，但我不知道如何在 2.1.1 上工作并一直合并到 3.0如果后者已经被标记，则默认？

```
$ hg glog -l 1000    
@       changeset:  25:efc0096f47c0  tip
|       summary:    Added tag 3.0 for changeset d1a7fc3d7d77
|
o       changeset:  24:d1a7fc3d7d77  3.0
|\      summary:    Merge in the redesign changes.
| |
| o     changeset:  23:b5b69d24c8f7 3.0-dev
| |     summary:    Finish 3.0 redesign.
| |
| o     changeset:  22:4c2f98fac54b 3.0-dev
|/|     summary:    Merge in the latest changes to 2.1/mainline.
| |
o |     changeset:  21:37df04521032
| |     summary:    Added tag 2.1 for changeset 39ecc520fc0a
| |
o |     changeset:  20:39ecc520fc0a  2.1
|\ \    summary:    2.1 development is done.
| | |
| o |   changeset:  19:208f3f9236af 2.1-dev
| | |   summary:    Finish the 2.1 work.
| | |
| | o   changeset:  18:4a024009a9d6 3.0-dev
| | |   summary:    More redesign work.
| | |
| | o   changeset:  17:00c416888c25 3.0-dev
| |/|   summary:    Merge in changes from the 2.1 branch to keep the redesign current.
| | |
| o |   changeset:  16:a57e781a0db1 2.1-dev
| | |   summary:    More 2.1 work.
| | |
| | o   changeset:  15:ddeb65402a61 3.0-dev
| | |   summary:    More redesign work.
| | |
+---o   changeset:  14:90f5d7a8af9a 3.0-dev
| | |   summary:    Merge in the fire fixes.
| | |
| o |   changeset:  13:78a949b67bb9 2.1-dev
|/| |   summary:    Merge in the fire fixes.
| | |
o | |   changeset:  12:6dfe9d856202
| | |   summary:    Oh no everything is on fire, fix it in the mainline.
| | |
| o |   changeset:  11:86767671dcdb 2.1-dev
| | |   summary:    Smaller changes for 2.1.
| | |
| | o   changeset:  10:25dec81d2546 3.0-dev
| | |   summary:    Work more on the redesign.
| | |
+---o   changeset:  9:42c7d689fb24 3.0-dev
| |     summary:    Start working on a complete redesign.
| |
| o     changeset:  8:3da99186ca7d 2.1-dev
|/      summary:    Start working on 2.1.
|
o       changeset:  7:9ba79361827d
|       summary:    Added tag 2.0 for changeset 755ed5c5e291
|
o       changeset:  6:755ed5c5e291  2.0
|\      summary:    Merge in the dev branch for 2.0.
| |
| o     changeset:  5:44a833fcc838 2.0-dev
| |     summary:    Finish work on 2.0.
| |
| o     changeset:  4:d7ba6aae1651 2.0-dev
|/|     summary:    Merge in the critical fix.
| |
o |     changeset:  3:968049f1b33a
| |     summary:    Fix a critical bug on the main branch.
| |
| o     changeset:  2:917869609b25 2.0-dev
| |     summary:    More work on the new version.
| |
| o     changeset:  1:f95798b9cb2e 2.0-dev
|/      summary:    Start working on version 2.0.
|
o       changeset:  0:8a3fb044d3f4
        summary:    Initial commit. 
```

换句话说，使用上述变更集树/版本，是否可以在我们已经开始处理 3.0 的同时处理 2.1.1 修复？我的意思是如果 3.0 已经被标记，我们如何将 2.1.1 合并回默认值？我在这里错过了什么吗？如果没有，是否有更适合我们的方式来根据我们的要求管理发布？如果您可以为场景提供变更集树的类似快照，那就太好了。

首先十分感谢。你们真棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:53:01.223

根据您维护多个发布版本的要求，我会考虑使用不同的分支策略`default`进行开发，并且每个主要版本都有一个分支。这在[此页面](http://mercurial.selenic.com/wiki/StandardBranching)上进行了描述- 它还有一个关于如何处理大修复的部分。

我已经做了一个类似于上面的例子：

```
@    changeset:   13:3d6ac57cce61
|\   tag:         tip
| |  parent:      9:5953138c3f87
| |  parent:      12:9691c48d79f2
| |  user:        steve.kaye
| |  date:        Tue Jun 26 08:39:42 2012 +0100
| |  summary:     Merge bug fix
| |
| o  changeset:   12:9691c48d79f2
| |  branch:      V3
| |  user:        steve.kaye
| |  date:        Tue Jun 26 08:35:23 2012 +0100
| |  summary:     Added tag 3.1 for changeset e49d9a6bb459
| |
| o    changeset:   11:e49d9a6bb459
| |\   branch:      V3
| | |  tag:         3.1
| | |  parent:      7:5354c406c68a
| | |  parent:      8:00dfa7869e8c
| | |  user:        steve.kaye
| | |  date:        Tue Jun 26 08:35:20 2012 +0100
| | |  summary:     Merge bug fix
| | |
| | | o  changeset:   10:a84c532ce507
| | |/   branch:      V2
| | |    parent:      8:00dfa7869e8c
| | |    user:        steve.kaye
| | |    date:        Tue Jun 26 08:31:09 2012 +0100
| | |    summary:     Added tag 2.1 for changeset 00dfa7869e8c
| | |
o | |  changeset:   9:5953138c3f87
| | |  parent:      5:80b80eb9581b
| | |  user:        steve.kaye
| | |  date:        Tue Jun 26 08:30:41 2012 +0100
| | |  summary:     Start work on next version
| | |
| | o  changeset:   8:00dfa7869e8c
| | |  branch:      V2
| | |  tag:         2.1
| | |  parent:      4:6c4a68f3c073
| | |  user:        steve.kaye
| | |  date:        Tue Jun 26 08:29:56 2012 +0100
| | |  summary:     Fixed a bug in V2
| | |
| o |  changeset:   7:5354c406c68a
| | |  branch:      V3
| | |  user:        steve.kaye
| | |  date:        Tue Jun 26 08:24:52 2012 +0100
| | |  summary:     Added tag 3.0 for changeset 3f3a006aacdd
| | |
| o |  changeset:   6:3f3a006aacdd
|/ /   branch:      V3
| |    tag:         3.0
| |    user:        steve.kaye
| |    date:        Tue Jun 26 08:23:54 2012 +0100
| |    summary:     Version 3.0 ready for release
| |
o |  changeset:   5:80b80eb9581b
| |  parent:      2:21cf96f3ed91
| |  user:        steve.kaye
| |  date:        Tue Jun 26 08:22:47 2012 +0100
| |  summary:     Start work on next version
| |
| o  changeset:   4:6c4a68f3c073
| |  branch:      V2
| |  user:        steve.kaye
| |  date:        Tue Jun 26 08:20:07 2012 +0100
| |  summary:     Added tag 2.0 for changeset 666cc4453281
| |
| o  changeset:   3:666cc4453281
|/   branch:      V2
|    tag:         2.0
|    user:        steve.kaye
|    date:        Tue Jun 26 08:19:43 2012 +0100
|    summary:     Version 2.0 ready for release
|
o  changeset:   2:21cf96f3ed91
|  user:        steve.kaye
|  date:        Tue Jun 26 08:18:31 2012 +0100
|  summary:     More work on the new version
|
o  changeset:   1:6177b193da7c
|  user:        steve.kaye
|  date:        Tue Jun 26 08:18:06 2012 +0100
|  summary:     Start work on version 2.0
|
o  changeset:   0:51cc3c0590f9
   user:        steve.kaye
   date:        Tue Jun 26 08:17:27 2012 +0100
   summary:     Initial commit 
```

如您所见，我有三个分支。 `default`是新开发完成的地方，然后我决定它已经准备好发布，所以我创建了一个`V2`分支并标记了它`2.0`。然后我继续工作，`default`直到我决定它已经准备好发布时，我将其分支`V3`并标记为`3.0`. 然后我发现了一个错误，发现它是在版本 2 中引入的，所以我在`V2`分支上修复了它并标记了它`2.1`。然后我将该修复合并到`V3`并标记它`3.1`，然后合并`V3`以`default`在开发代码中获取修复。

如果您从最旧的版本开始，则更容易在分支之间移植修复程序。这使您可以更轻松地将该修复合并到较新的分支。如果您`default`要先修复它，则无法将该修复合并到`V2`或`V3`因为您将获得旧版本中的所有新功能以及错误修复。

请注意，您仍然拥有与其他分支策略一样多的头 - 一个`default`为一个`V2`，一个为，`V3`但如果您维护多个版本，它们将排列得更整齐。要获得软件第 2 版的最新版本，您只需`hg up V2`要先了解最新的第 2 版是什么，然后更新到该版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:53:53.893

您的链接问题的第二段说：

> 完成 2.0 后，将 2.0-dev 合并到默认值并将结果标记为 2.0。

由此，我认为这个想法是在你`3.0`准备好发布它之前你不会标记它。如果您已经发布了它，那么修复程序`2.1.1`不会进入`3.0`，它会进入`3.0.1`并且您的工作流程不会有问题。

此外，您可以移动标签，因此如果您发现标签`3.0`太早，您可以使用`-f`标志将其移动到`hg tag`.

# c# - IoC 初始化服务，在构造函数中进行繁重的工作，但避免使用临时 Init() 方法

> ID：11149394
> 
> 赞同：6
> 
> 时间：2012-06-22T02:15:52.410
> 
> 标签：c#, .net, design-patterns, dependency-injection, ioc-container

嗨，我正在使用 IoC 容器，我想在构造函数中初始化一个服务（其中一部分涉及与数据库的“繁重工作”）。

此特定服务存储注入`IPluginToServiceProviderBridge`服务找到的信息，此信息通过`UnitOfWork`.

一旦一切都被引导，带有命令的控制器和带有处理程序的服务将用于所有其他交互。所有命令都包装在生命周期范围内，因此保存和处理`UnitOfWork`是由处理程序而不是服务完成的（这对于干净的代码非常有用）。

保存和事务的相同整洁和关注点分离不适用于`Initializer`服务内部，因为一切都发生在构造函数中：

```
public PluginManagerService(
    IPluginToServiceProviderBridge serviceProvider,
    IUnitOfWork unitOfWork)
{     
    this.unitOfWork = unitOfWork;
    this.serviceProvider = serviceProvider;

    lock (threadLock)
    {
        if (initialised == false)
        {
            LinkPluginsWithDatabase();
            initialised = true;
        }

        // I don't like this next line, but 
        // not sure what else to do
        this.UnitOfWork.Save(); 
    }
}

protected void LinkPluginsWithDatabase()
{
    var plugins =
        this.serviceProvider.GetAllPlugins();

    foreach (var plugin in plugins)
    {
        var db = new PluginRecord
        {
            interfaceType = plugin.InterfaceType;
            var id = plugin.Id;
            var version = plugin.Version;
        }
        // store in db via unit of work repository
        this.unitOfWork.PluginsRepository.Add(db);
    }
} 
```

几点：

理想情况下，我想避免使用工厂，因为它会使作用域生命周期的处理复杂化，如果我知道如何进行重构以实现更好的分离，我会很乐意。

我真的想避免`Init()`为服务使用单独的方法，虽然它允许通过命令/处理程序进行事务和保存，但需要大量检查代码，我相信这也会引入时间问题。

鉴于上述情况，`UnitOfWork.Save()`在我的构造函数中调用是否可以接受，或者我可以重构更清晰的代码和更好的分离？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T17:17:59.997

在应用依赖注入时，让服务的构造函数做的不仅仅是将其依赖项存储在私有字段中被认为是不好的做法，因为这会导致对象图的构建失败，减慢图的构建速度，并使单元测试复杂化。

我从您的问题中了解到的是，您需要在应用程序启动时进行一些初始化。这很好，因为有一些初始化阶段是很正常的，但不要在构造函数中这样做。只需在配置容器之后（以及在您选择验证配置之后）将此初始化移动到应用程序启动代码的末尾。

我想你的代码看起来像这样：

```
public void Application_Start(object s, EventArgs e)
{
    Container container = new Container();

    Bootstrap(container);

    InitializeApplication(container);
}

private void InitializeApplication(
    Container container)
{
    using (this.container.BeginLifetimeScope())
    {
        var pluginManager = this.container
            .GetInstance<PluginManagerService>();

        pluginManager.LinkPluginsWithDatabase();

        var unitOfWork =
            container.GetInstance<IUnitOfWork>();

        unitOfWork.Save();
    }
} 
```

你甚至可以为你的`PluginManagerService`.

```
public class InitializingPluginManagerServiceDecorator
    : IPluginManagerService
{
    private static readonly object syncRoot = new object();
    private static bool initialized;

    private IPluginManagerService decorated;
    private Container container;

    public InitializingPluginManagerServiceDecorator(
        IPluginManagerService decorated,
        Container container,
        IPluginToServiceProviderBridge serviceProvider)
    {
        this.pluginManagerService = pluginManagerService;
        this.container = container;
        this.serviceProvider = serviceProvider;
    }

    public void PluginManagerServiceMethod()
    {
        this.InitializeInLock();        

        this.decorated.PluginManagerServiceMethod();
    }

    private void InitializeInLock()
    {
        if (!initialized)
        {
            lock (syncRoot)
            {
                if (!initialized)
                {
                    this.InitializeInScope();
                }
            }

            initialized = true;    
        }
    }

    private void InitializeInScope()
    {
        using (this.container.BeginLifetimeScope())
        {
            this.InitializeWithSave();
        }
    }

    private void InitializeWithSave()
    {
        var uow =
            this.container.GetInstance<IUnitOfWork>()

        var initializer = this.container
            .GetInstance<PluginManagerServiceInitializer>();

        initializer.Initialize();

        uow.Save();    
    }
} 
```

这个装饰器可以包裹在一个`IPluginManagerService`, 并确保系统在`IPluginManagerService`我们第一次使用之前被初始化，并确保它只初始化一次。实际的初始化逻辑被移动到一个单独的类（SRP），装饰器依赖于它：

```
public class PluginManagerServiceInitializer
{
    private IUnitOfWork unitOfWork;
    private IPluginToServiceProviderBridge serviceProvider;

    public PluginManagerServiceInitializer(
        IUnitOfWork unitOfWork,
        IPluginToServiceProviderBridge serviceProvider)
    {
        this.unitOfWork = unitOfWork;
        this.serviceProvider = serviceProvider;
    }

    public void Initialize()
    {
        var plugins =
            from plugin in this.serviceProvider.GetAllPlugins()
            select new PluginRecord
            {
                interfaceType = plugin.InterfaceType;
                var id = plugin.Id;
                var version = plugin.Version;
            };

        unitOfWork.PluginsRepository.AddRange(plugins);
    }
} 
```

# knockout.js - 在淘汰赛中使用当您有一个给定此咖啡脚本数据的对象时，如何在启动时选择正确的项目= Foo：“B” Foos：[“A”，“B”] Blah：Id：2名称：“B” Blahs : [ Id: 1 Name: "A" , Id: 2 Name: "B" ] class Vm 构造函数: (data) -> @Blah = ko.observable() ko.mapping.fromJS data, {}, this vm =新的 VM(数据) console.log vm ko.appl

> ID：11149403
> 
> 赞同：0
> 
> 时间：2012-06-22T02:17:37.880
> 
> 标签：knockout.js, coffeescript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:28:00.240

当您对绑定中的对象进行`value`绑定时，它们需要是对同一对象的引用。

基本上：

```
var a = { name: "Bob" };
var b = { name: "Bob" };
var c = b;

alert(a === b) //false
alert(b === c) //true 
```

因此，在您的示例中，您可以先定义选择数组，然后将您选择的值初始化为该数组中的一个对象。

这是您更新的示例：http: [//jsfiddle.net/rniemeyer/ampys/](http://jsfiddle.net/rniemeyer/ampys/)

# android - Android Scrollview 没有捕捉到 longclick

> ID：11149404
> 
> 赞同：3
> 
> 时间：2012-06-22T02:17:41.140
> 
> 标签：android, onclick, scrollview, android-alertdialog, onlongclicklistener

正如标题中所说，我有一个滚动视图应该监听长按，但没有捕捉到任何。当我握住滚动视图时，什么也没有发生——没有日志、没有触觉反馈和没有对话。

提前致谢！

爪哇：

```
...
ScrollView text_sv = (ScrollView) findViewById(R.id.text_sv);
    text_sv.setOnLongClickListener(new OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {

            MMMLogs.i("click", "long-click recognized");

            AlertDialog.Builder builder = new AlertDialog.Builder(_this);

            builder
            .setTitle(name)
            .setMessage(DHMenuStorage.notification)
            .setCancelable(false)
            .setNegativeButton("Close", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
            AlertDialog alert = builder.create();
            alert.show();

            return true;
        }

    });
... 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:padding="5dp" >

<ScrollView
    android:id="@+id/text_sv"
    android:layout_width="match_parent"
    android:layout_height="75dp"
    android:hapticFeedbackEnabled="true"
    android:clickable="true"
    android:longClickable="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/name"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/Gray"
            android:focusable="false"
            android:gravity="center"
            android:padding="4dp"
            android:text="-- Dining Hall Name --"
            android:textColor="@color/Black"
            android:textSize="28dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/note"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/Gray"
            android:focusable="false"
            android:gravity="center"
            android:padding="4dp"
            android:text="-- Special note here --"
            android:textColor="@color/Black"
            android:textSize="14dp"
            android:textStyle="normal" />
    </LinearLayout>
</ScrollView>

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="5dp" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
    </LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T03:39:19.073

好吧，我从未确定问题的确切来源，但我怀疑它与滚动视图自身滚动所需的侦听器存在某种冲突。

我通过在线性布局而不是滚动视图上设置完全相同的侦听器来解决这个问题。简单的。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T09:34:08.913

查看 ScrollView 的[OnTouchEvent](http://developer.android.com/reference/android/widget/ScrollView.html#onTouchEvent%28android.view.MotionEvent%29)。它特别允许您在 scrollView 注册运动事件时触发 performClick() 命令。似乎 ScrollView 会拦截所有触摸事件，将它们视为运动事件，并且不会让事件像点击一样冒泡到任何父级。

这是有道理的。如果我正在触摸一个滚动视图，我可能希望它是对滚动视图内某些内容的点击，但我不希望它触发与滚动视图的父级相关的内容。

# wcf - 如何让 certmgr 为所有用户而不是当前用户添加 pfx？

> ID：11149407
> 
> 赞同：1
> 
> 时间：2012-06-22T02:18:21.503
> 
> 标签：wcf, ssl, certificate

我正在开发一个 WCF 服务，它使用 SSL 证书来保证传输安全。

我按照网上的各种教程和提示来生成和导入证书。使用以下命令导入证书：

```
certmgr.exe -add -all -c <filename>.pfx -s -r localMachine my 
```

我的 WCF 服务在控制台模式下使用导入的证书愉快地运行。当我将我的服务切换为使用作为“网络服务”运行的 Windows 服务托管时，问题就开始了。例外是抱怨应用程序无法访问已安装的私钥。

于是我使用了 FindPrivateKey.exe 发现私钥其实是安装在当前用户的 AppData 文件夹中的：

```
C:\Users\<username>\AppData\Roaming\Microsoft\Crypto\RSA\S-1-5-21-3289377140-263254259-3378496556-1105\d3a0de64e6f0513692d593a77a71d3ac_15824a33-515a-493c-a33f-38a7b852e11a 
```

即使我授予“网络服务”用户对该文件的访问权限，它也不起作用。

最后，我必须删除证书，并使用 MMC 重新导入，将私钥放置到：

```
C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\c3ccd4300462fe2aa7cec7f747fbd075_15824a33-515a-493c-a33f-38a7b852e11a 
```

**所以我的问题是**，我怎样才能让 certmgr 将私钥放在 C:\ProgramData\ 而不是当前用户的 AppData 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:55:52.503

您不应尝试在文件级别使用证书。不保证支持的是内部实现。

有一个 MS 工具可以帮助您：

> Microsoft Windows HTTP 服务 (WinHTTP) 证书配置工具“WinHttpCertCfg.exe”使管理员能够在 Internet 服务器 Web 应用程序管理器 (IWAM) 帐户可以访问的任何证书存储中安装和配置客户端证书。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa384088(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384088(v=vs.85).aspx)

您需要运行的命令：

> 此命令授予对 TESTUSER 帐户“我的”证书存储中“MyCertificate”证书的私钥的访问权限。

```
winhttpcertcfg -g -c LOCAL_MACHINE\My -s MyCertificate -a TESTUSER 
```

使用此链接安装该工具：

[http://www.microsoft.com/en-us/download/details.aspx?id=19801](http://www.microsoft.com/en-us/download/details.aspx?id=19801)

# wpf - 就像在 Telerik 的演示应用中一样投下阴影

> ID：11149408
> 
> 赞同：0
> 
> 时间：2012-06-22T02:18:22.887
> 
> 标签：wpf, telerik, shadow

我想知道如何创建类似于 Teliks wpf 演示中的阴影？见[截图](https://dl.dropbox.com/u/3055964/Capture.JPG)。我搜索但找不到 WPF 演示应用程序的源代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:13:57.357

使用[WPF Inspector](http://wpfinspector.codeplex.com/)查看此演示应用程序中定义的 XAML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:08:36.260

尝试使用 DropShadowEffect ？

```
<Grid>
    <Grid.Effect>
        <DropShadowEffect />
    </Grid.Effect> 
```

# ios - iOS Facebook SDK 使用标准对话框发布到朋友的墙上

> ID：11149409
> 
> 赞同：4
> 
> 时间：2012-06-22T02:18:24.387
> 
> 标签：ios, facebook, facebook-ios-sdk

是否可以使用标准提要对话框在朋友的墙上发帖，或者我必须为此创建自己的对话框？

更新：我知道可以使用 requestWithGraphPath 直接发布到朋友的墙上。但我想弄清楚我是否可以为此使用 facebook 对话框。例如 Draw Something 似乎就是这样做的（见下面的截图）。但是，我尝试发送“target_id”和“to”，但都不起作用。有人知道该怎么做吗？ ![在此处输入图像描述](../Images/ea29f18f7f2c5bbb92edc19208b7de13.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:38:58.843

我找到了解决方案。只需添加带有您要发布到的用户 ID 的“to”参数。我测试了它的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T09:11:54.240

**更新答案：**

facebook 宣布，到 2013 年 6 月 6 日，将无法通过 GraphAPI 发布朋友墙

[https://developers.facebook.com/roadmap/#february-2013](https://developers.facebook.com/roadmap/#february-2013)

> 删除通过 Graph API 向朋友墙发帖的功能 我们将删除通过 Graph API 向用户朋友墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用提要对话框。通过用户提及标签或动作标签包含朋友的故事将显示在朋友的时间线上（假设朋友批准标签）。有关详细信息，请参阅此博客文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T02:22:57.120

这似乎与[iOS 开发非常相似：如何让 Facebook 墙上的帖子显示在朋友的新闻提要中？](https://stackoverflow.com/questions/4777214/ios-development-how-can-i-get-a-facebook-wall-post-to-show-in-the-friends-news)

也许这会有所帮助，因为我认为@kgutteridge 有正确的答案。

# html - 如何使固定标题滚动X与内容

> ID：11149412
> 
> 赞同：0
> 
> 时间：2012-06-22T02:19:01.580
> 
> 标签：html, css

如果你看看：[http ://www.bendemeerwoolshed.co.nz](http://www.bendemeerwoolshed.co.nz)

我有一个固定的标题。一切都很好，但是，如果您减小窗口的宽度（或在移动设备上查看放大的窗口）并且需要在 X 轴上滚动，则只有内容滚动。有没有办法设置位置：仅针对 Y 轴固定？

这是标题的CSS：

```
header#header { 
   position: fixed; 
   height: 188px; 
   background: #fff url(../images/headerbgstrip.png) bottom center no-repeat; 
   width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:01:44.440

用一个简单的 jQuery 处理：

```
$('#header').css("left","-"+$(window).scrollLeft()+"px"); 
```

作为旁注，我将标题附加到移动设备中的内容，因为静态标题在移动浏览器中占用了太多空间。

# c# - 在c#中执行水晶报告时TLV记录无效

> ID：11149413
> 
> 赞同：3
> 
> 时间：2012-06-22T02:19:02.283
> 
> 标签：c#, crystal-reports, report, crystal-reports-2010

我正在创建一个 C# 程序，它将显示使用水晶报表创建的报表。我已经完成了报告。但是，当我尝试在 C# 中查看报告时，它提示我一个错误，即“ **INVALID TLV RECORD** ”。这可能是什么原因？请帮忙。谢谢。

代码：

```
private void reportViewer1_Load(object sender, EventArgs e)
    {
        CRAXDRT.Report rpt = new CRAXDRT.Report();
        CRAXDRT.Application app = new CRAXDRT.Application();
        rpt = app.OpenReport(Application.StartupPath + "\\Reports\\Pay2Final.rpt", null);
    } 
```

错误信息： ![在此处输入图像描述](../Images/c640a1496b6400e16fa1de6b5b680ec2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T05:02:05.807

尝试这个

由于以下原因，可能会出现“无效的 TLV 记录”错误消息：

客户端计算机上缺少运行时文件。检查随 Crystal Reports 一起安装的开发人员运行时帮助文件 (Runtime.chm) 以获取所需运行时文件的列表。

'UFManager.dll' 未分发到客户端计算机。确保它位于“C:\Program Files\Common Files\Crystal Decisions\2.0\bin”文件夹中。

Crqe.dll 未在客户端计算机上注册。在任务栏上，单击“开始”按钮，然后单击“运行”。在“打开”文本框中，输入“regsvr32”。例如，

regsvr32 "c:\program files\common files\水晶决定\2.0\bin\crqe.dll"

报告文件已损坏。有关详细信息，请参阅知识库文章 c2005670。

客户端计算机没有“CommonFiles”注册表子项。要创建此注册表子项，请按照下列步骤操作：

===================== 警告：

使用注册表编辑器可能会导致严重的问题，可能需要重新安装操作系统。Crystal Decisions 不对因使用 Windows 注册表编辑器而导致的任何问题负责。使用注册表编辑器需要您自担风险。建议您在编辑之前备份注册表。

=====================

1.  在任务栏上，单击“开始”按钮，然后单击“运行”。

2.  在“打开”组合框中键入“Regedit”，然后单击“确定”。

3.  展开注册表项：

\HKEY_LOCAL_MACHINE\SOFTWARE\Crystal Decisions\9.0\Crystal Reports

1.  右键单击“Crystal Reports”文件夹，选择“新建”| “字符串值”，并将新键命名为“CommonFiles”。

2.  右键单击“CommonFiles”子项，选择“修改”，然后在“值数据”文本框中键入以下值：

"C:\Program Files\Common Files\Crystal Decisions\2.0\bin\"

或检查此链接

[http://it.toolbox.com/wiki/index.php/Solve_the_%22Invalid_TLV_Record%22_error_in_running_Crystal_Report](http://it.toolbox.com/wiki/index.php/Solve_the_%22Invalid_TLV_Record%22_error_in_running_Crystal_Report)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-06T11:45:50.040

这个问题也与我正在寻找的东西有关。通过 RegSVR32 为 crqe.dll 文件注册 dll 文件可以解决此问题。如果您在注册 crqe.dll 文件时遇到问题，请尝试将文件移动到 D 或 E 文件夹等。不要把它放在另一个文件夹中。

# php - PHP Exceptions 覆盖超类抛出异常函数

> ID：11149414
> 
> 赞同：0
> 
> 时间：2012-06-22T02:19:03.327
> 
> 标签：php

我正在使用一个假设连接到银行支付网关并执行支付过程的类。

但是我很困惑，因为执行方法中的那个超类抛出了几个异常。

```
 throw new Exception('Error: The CCV was incorrect for this card.',2); 
```

**它停在那里，**

但是，在我的课堂功能中，我需要将拒绝付款写入数据库。由于我这个函数在上面的代码中停止，我的错误报告没有得到执行..

我的调用函数看起来像这样

```
try{
    $dt = new ProcessCreditCardPayment($data);
        $dr = $dt->getReceipt();
        //print_r($dr);
    $response_code=$dr['txnResponseCode'];
    $this->successPayment($customer,$payment_ref,$response_code);
}
catch(Exception e){
    $response_code=$e->getCode();
    $this->declinedPayment($customer,$payment_ref,$response_code);  
} 
```

有任何想法吗 ... ？

# php - 如何编写 pcre 模式以匹配特定标签

> ID：11149415
> 
> 赞同：0
> 
> 时间：2012-06-22T02:19:10.243
> 
> 标签：php, regex, parsing, pcre

我有一个与 php 相关的 pcre 问题。

我必须为特定文件编写一个小解析器，而且我不太了解正则表达式，所以我需要一些帮助。

这是输入...

```
 blah blah [{img:xyzname}] one more blah blah[{root}]
and [{php:<?php ...echo 'phpcode';......?>}] 
```

...所以我必须用我的值替换这些值，所以这就是我所做的...

```
 $alt=preg_replace_callback('|\[{(.*[^}\]])}\]|iU',
                                        function ($match){
                                            $m=explode(':',$match[1]);

                                                switch($m[0]){

                                                    case 'img':
                                                            return $m[1]
                                                    break;
                                                    case 'php':
                                                            // i want that php code here in $m[1] but i am getting nothing
                                                    break;
                                                    default:
                                                            return 'UNDEFINED';
                                                    break;
                                                }
                                            }
                                        },$this->content);
            $this->content=$alt; 
```

我用许多模式和许多测试尝试了很多次，但我注意到我得到 null 或没有，只有当我的`[{php:<?php .....?>}] contains <? and only when I put < ?`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:26:42.683

```
preg_match_all('/\[{(\w+):((?:(?!}]).)*)}]/', $this->content, $matches);
print(htmlspecialchars(var_export($matches, true))); 
```

如果您在浏览器中尝试此操作，请记住 < 和 > 被视为标签，除非您将它们替换为 < 和>。这就是我使用`htmlspecialchars()`. 使用你的输入我得到这个：

```
array (
  0 => 
  array (
    0 => '[{img:xyzname}]',
    1 => '[{php:<?php ...echo \'phpcode\';......?>}]',
  ),
  1 => 
  array (
    0 => 'img',
    1 => 'php',
  ),
  2 => 
  array (
    0 => 'xyzname',
    1 => '<?php ...echo \'phpcode\';......?>',
  ),
) 
```

# objective-c - 以编程方式创建变量

> ID：11149416
> 
> 赞同：0
> 
> 时间：2012-06-22T02:19:26.530
> 
> 标签：objective-c, ios, xcode, variables

我想根据我的输入更改表格视图的数量，这将根据用户而改变，我需要能够在我的数据源中引用这些表格视图，因为它们应该根据表格视图保留不同的数据。我想如果我可以为每个创建的 tableviews 创建一个唯一变量，这可能会完成，但是我需要能够在我的整个班级中引用这些变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:08:09.343

您可以创建一个 NSMutable Array 并直接在其中添加 UITableView 。您可以使用静态引用创建全局变量存储并全局访问它。

```
@interface Singleton : NSObject {
  NSMutableArray *TableArray;
}
+ (Singleton *)instance;
@end

@implementation Singleton

+ (Singleton *)instance  {
    static Singleton *instance;

    @synchronized(self) {
        if(!instance) {
            instance = [[Singleton alloc] init];
        }
    }
    return instance;
} 
```

另一种选择是在您的 appdelegate 中包含 NSMutableArray 并在您的应用程序中全局访问它。

动态创建对象不是问题。您可以创建尽可能多的 UITableview 并将它们添加到 NSMutableArray 中。

```
UITableview *temp = [UITableview alloc] initWithFrame : ... ];
temp.delegate = self ; 
tableArray.addObject(temp);

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath(NSIndexPath *)indexPath{

      if(tableView  = [tableArray objectAtIndex:x]{
        // do this 
       }
        else if (select appropriate table view from array ){

       }
       //do this for the rest
 } 
```

您面临的是设计问题。对于其他替代方案，请参阅[Apple Guides for Objects Communication](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T02:31:47.193

为什么不创建一个 NSMutableArray 成员变量来存储它们呢？当需要更改数据源时，将具体的tableview设置为数据源。我不确定您到底要做什么的详细信息，但是动态添加它们并更改数据源应该不是问题。

# android - 枚举 wifi 连接并连接到不受 pwd 保护的

> ID：11149417
> 
> 赞同：0
> 
> 时间：2012-06-22T02:19:41.917
> 
> 标签：android, wifi

我需要枚举所有可用的 wifi 连接并连接到不受密码保护的连接。任何帮助/链接/建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:22:39.493

[无线管理器](http://developer.android.com/reference/android/net/wifi/WifiManager.html)。您将找到一种请求 WiFi 扫描的方法：startScan()，检索结果（使用 BroadcastReceiver）：getScanResults() 并在这些结果中检查哪些接入点为您提供无密码关联。addNetwork() 和 enableNetwork() 将帮助您连接到其中任何一个。

# symfony - 在 Symfony 2 中使用另一个包，无法访问 $this->get

> ID：11149420
> 
> 赞同：1
> 
> 时间：2012-06-22T02:20:02.353
> 
> 标签：symfony, fosuserbundle

我有一个用 Symfony2 和 FOSRestBundle 构建的 REST API。这一切都很好，但是在一个服务中，我将来自另一个服务的数据组合在不同的捆绑包中——这看起来很简单，但事实并非如此。

我正在创建一个新的请求对象并添加我的参数，从那里我向另一个服务发出请求，服务接收到请求很好，但是，当我尝试使用 $this->get 它给了我很好的旧`Call to a member function get() on a non-object in ...`

我知道我缺少服务容器（我不完全理解为什么当我调用第一个包而不是第二个包时它可用），这一切都很好，但是我如何注入它或它的一个组件所以我可以使用`$this->get`在 services.yml 中定义的自定义服务吗？（很容易通过他们使用的服务容器`arguments: container: "@service_container"`）

将此捆绑包设置为服务将不起作用，因为 FOSRestBundle 不会将其称为服务。

简而言之：我希望能够在 bundle1 中通过执行从 bundle2 获取数据

```
namespace MyVendor\Bundle1\Controller

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;  
use MyVendor\Bundle2\Controller\Bundle2ClassName;

class Bundle1 {

    //if i wanted to do this here it would work fine:
    // $this->get('my.service.defined.in.service.yml');

    $bundle2 = new Bundle2ClassName();
    $returned_data = $bundle2->myFunction();
} 
```

然后，一旦进入 bundle2 中的 myFunction，如果我尝试调用完全相同的服务函数，我就会得到可怕的 get 错误。如果我直接通过 FOSRest 路由调用 bundle2，我显然没有这个问题。

```
namespace MyVendor\Bundle2\Controller

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;  

class Bundle2 {

    //this does not work
    $this->get('my.service.defined.in.service.yml');

    //do some stuff then return response
    return($response);

} 
```

我一遍又一遍地阅读了所有服务容器文档，所以如果你要链接到它们，如果你能指出它解释如何处理这些东西的确切部分，我将不胜感激。这是我几个月前开始使用 Symfony 以来一直无法完全理解的一个问题。

PS 有足够积分的人可以将 FOSRestBundle 添加为标签吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:41:20.957

首先，您应该使用`$this->forward`将请求转发到另一个控制器。

其次，您无法访问第二个控制器中的服务容器的原因可能是因为您正在尝试手动初始化它 -除非您绝对知道自己在做什么，否则**永远不**要这样做（具体来说，您忘记将服务容器传递为控制器依赖）。

第三，作为一个关于事情如何工作的例子——你原来的控制器对服务容器的依赖是由同一个容器处理的，并`ContainerAware`在那个控制器初始化`setContainer()`时调用了扩展，你很可能在手动初始化第二个控制器时忘记了这样做。所以为了让它工作（我再次强烈建议不要这样做），你应该这样做：

```
class Bundle1 {

    //if i wanted to do this here it would work fine:
    // $this->get('my.service.defined.in.service.yml');

    $bundle2 = new Bundle2ClassName();
    $bundle2->setContainer($this->container);
    $returned_data = $bundle2->myFunction(); 
} 
```

您收到`$this->get() on a non-object...`错误的原因是因为`$this->get()`在您的控制器中实际上是一个快捷方式`$this->container->get()`（在 中定义`Symfony\Bundle\FrameworkBundle\Controller\Controller`）

# c# - 如何在特定单元格中获取选定的行文本？

> ID：11149422
> 
> 赞同：0
> 
> 时间：2012-06-22T02:20:21.000
> 
> 标签：c#, .net, silverlight-4.0, datagrid

我有一个由 3 列 (ID) (Name) (Surname) 组成的 dataGrid。如何获取选定行的特定单元格的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:10:40.647

使用此代码：

```
private void gridview_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex == 0)//Yourcolumindex
            {

                string value = gridview.SelectedCells[0].Value.ToString();

            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:06:06.357

```
SchoolDepartment newPerson = rows[rows.Count - 1];
MessageBox.Show(newPerson.ID.ToString()); 
```

如果选择了最后一行

# c++ - 检测windows上的进程内存注入（反黑客）

> ID：11149424
> 
> 赞同：4
> 
> 时间：2012-06-22T02:20:43.210
> 
> 标签：c++, windows, memory, code-injection

标准黑客案例。Hack 文件类型注入到已启动的进程中，并使用 WriteProcessMemory 调用写入进程内存。在游戏中这不是你想要的，因为它可以让黑客改变游戏的一部分并给自己带来优势。

有可能会强制用户在游戏中运行第三方程序，我需要知道防止这种注入的最佳方法是什么。我已经尝试使用一个函数 EnumProcessModules 列出所有进程 DLL，但没有成功。在我看来，黑客直接注入进程内存（堆栈结束？），因此未被检测到。目前我有几个选择。

1.  创建大多数已知公共黑客的文件、文件模式、进程名称和内存模式的黑名单，并使用程序对其进行扫描。这样做的问题是我需要维护黑名单并创建程序更新以保存所有可用的黑客攻击。我还发现这个有用的答案[Detecting memory access to a process](https://stackoverflow.com/questions/8679280/detecting-memory-access-to-a-process)但可能某些现有 DLL 已经在使用这些调用，因此可能会出现误报。

2.  使用 ReadProcessMemory 监控众所周知的内存偏移量的变化（黑客通常使用相同的偏移量来实现某些目标）。与正常运行相比，我需要运行一些 hack，监控行为并获取 hack 行为样本。

3.  是否有可能在启动后以某种方式重新排列进程内存？也许只是将进程内存推入堆栈可能会使黑客感到困惑。这是 hack 调用的示例：

    WriteProcessMemory(phandler,0xsomeoffset,&datatowrite,...);

因此，除非黑客更聪明地搜索过程的实际开始，否则它已经取得了巨大的成功。我想知道是否有一个系统调用可以将内存重写到另一个位置或以某种方式在堆栈前面插入一些空数据。

那么，最好的方法是什么？这是编程中一个非常有趣和黑暗的领域，所以我想尽可能多地听到有趣的想法。目标是防止黑客工作或检测到它。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:59:38.213

一次又一次地计算存储在内存中的应用程序图像的哈希值或 CRC，并将其与已知的哈希值或 CRC 进行比较。

我们的服务[http://activation-cloud.com](http://activation-cloud.com)提供了根据存储在数据库中的签名检查应用程序完整性的能力。

# c# - c# dll 在 windows 中的 previewmousedown 时检测框（textareas）

> ID：11149426
> 
> 赞同：0
> 
> 时间：2012-06-22T02:21:08.470
> 
> 标签：c#, .net, dll, dllimport

您好，我想知道是否有任何 dll 或全局挂钩代码可以让我在单击 textarea 后立即在屏幕键盘上运行应用程序。

将不胜感激，谷歌对我不太友好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:24:23.860

听起来您可能正在寻找[输入法编辑器 (IME)](https://en.wikipedia.org/wiki/Input_method)。

# ruby-on-rails - 如何在 Rails 中提供静态 JSON 文件？

> ID：11149430
> 
> 赞同：9
> 
> 时间：2012-06-22T02:21:44.367
> 
> 标签：ruby-on-rails, json

我的服务器上有一个文件位于我的应用程序目录之外。它是一个包含 json 对象的文本文件，`/path/to/data.json`.

在 Rails 中提供此文件的最简单方法是什么，例如返回它以响应 GET 请求？

这是我迄今为止尝试过的，受到[这个答案](https://stackoverflow.com/questions/9348712/serve-a-static-json-object-file-in-rails)和其他人的启发。（这可能有点离谱——我是 Rails 新手。）

1.  将此行添加到 routes.rb `resources :data`

2.  写了如下data_controller.rb

`class DataController < ApplicationController`

```
@data = File.read("/path/to/data.json")

def index
  render :json => @data
 end
end 
```

这行不通。当我将浏览器指向[http://myserver.com/data.json](http://myserver.com/data.json)时， 我只看到“null”而不是`data.json`文件。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T02:33:28.897

我认为这是一个范围问题；您的外部 @data 与方法中的 @data 不同。也就是说，您不能按预期在方法之外使用实例变量，因为还没有实例。

如果您使用类变量，它应该可以工作，例如

```
@@data = File.read("/path/to/data.json") 
```

然后

```
render :json => @@data 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-22T02:30:49.600

把它放进去`public/assets/javascripts`。或`app/assets/javascripts`。服务器甚至可以返回正确的内容类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-26T09:40:14.623

*   将`data.json`文件放入您的项目目录（例如`public/data.json`）
*   `@data = File.read("#{Rails.root}/public/data.json")`
*   最后但并非最不重要的渲染`:json => @data`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-07T19:10:58.673

您也可以在一行中完成，例如

```
render :file => '/path/to/data.json', 
  :content_type => 'application/json',
  :layout => false 
```

# javascript - Javascript - 在鼠标离开时延迟动画

> ID：11149432
> 
> 赞同：0
> 
> 时间：2012-06-22T02:21:52.983
> 
> 标签：javascript, jquery, jquery-animate, delay

我正在使用一个简单的 Javascript，它使菜单在 mouseenter 时滑出，然后在 mouseleave 时滑入。但是，当鼠标离开该区域时，我希望菜单保持原位几秒钟，然后滑入。

这是我使用的代码。

```
$('#nav').mouseleave(function()
    {
            $("#nav").animate({"left": "0"}, "1000");
            $("#nav li a").css({ opacity: 0.7 });
            $("#nav li.current a").css({ opacity: 1 });
}); 
```

我搜索了堆栈溢出和谷歌，但无法获得任何解决方案。我只是 JS 的新手

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:36:12.130

稍微好一点，如果你再次悬停，在动画执行之前：

```
$('#nav').hover(function () {
    clearTimeout(this.timer);
}, function () {
    this.timer = setTimeout(function () {
        $("#nav").animate({"left": "100"}, "1000");
        $("#nav li a").css({ opacity: 0.7 });
        $("#nav li.current a").css({ opacity: 1 });
    }, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:25:08.147

使用`.delay()`JQuery API 中的函数：http: [//api.jquery.com/delay/](http://api.jquery.com/delay/)

```
$("#nav").delay(3000).animate({"left": "0"}, "1000"); 
```

这会在调用 animate() 之前等待 3000 毫秒（3 秒）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T02:26:01.583

我是 setTimeout() 方法的忠实粉丝。

[http://www.w3schools.com/jsref/met_win_settimeout.asp](http://www.w3schools.com/jsref/met_win_settimeout.asp)

所以我会做

```
$('#nav').mouseleave(function()
{
        setTimeout( function(){
        $("#nav").animate({"left": "0"}, "1000");
        $("#nav li a").css({ opacity: 0.7 });
        $("#nav li.current a").css({ opacity: 1 });},1000)
}); 
```

# android - Android：以编程方式从特定通道捕获音频？

> ID：11149436
> 
> 赞同：2
> 
> 时间：2012-06-22T02:22:37.350
> 
> 标签：android, audio, bluetooth

我想从特定通道捕获音频（例如，我有一个 3.5 毫米耳机和一个蓝牙耳机都连接到一个 android 手机。现在，当我使用“AudioSource.MIC”和我只想从蓝牙耳机捕获音频）无论如何我可以以编程方式指定音频通道吗？如何以编程方式从 Android 上的特定通道捕获音频？

我的设备是 Nexus One，运行 Android 2.3.7，蓝牙耳机 Jabra BT 2035

# java - 你如何设置像 Android ICS Dialer 这样的 ViewSwitcher？

> ID：11149447
> 
> 赞同：1
> 
> 时间：2012-06-22T02:25:25.373
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, viewswitcher

您如何设置像 ICS Dialer 一样的 ViewSwitcher？我可以设置一个 ViewSwitcher 并在您向左或向右滑动时使其具有动画效果，但我不知道如何制作它，因此您实际上可以向左或向右拖动视图！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:56:40.933

您可以将[水平视图滑动与 ViewPager 一起使用](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20blogspot/hsDu%20%28Android%20Developers%20Blog%29)。这是一种很好的推荐方式，这样您的应用程序就可以在更广泛的平台上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:29:00.563

你可以试试这个：[https](https://github.com/davidsun/horizontalpager/tree/patch-1) ://github.com/davidsun/horizo​​ntalpager/tree/patch-1 。

基本思路是这样的。首先，当视图被触摸时，onTouchEvent 将被调用。但是由于视图 onTouchEvent 可以被拦截（通过它的子视图），父视图必须重写 onInterceptTouchEvent 方法。所以，只需重写 ViewGroup 的两个方法，即 onTouchEvent 和 onInterceptTouchEvent。

其次，要构建自己的显示方法，您需要实现 onMeasure 和 onLayout 方法，它们会计算其子视图的大小。

这是构建可拖动视图切换器的基本思想。

# android - 将文本与图像基线对齐作为自定义视图中的叠加层

> ID：11149448
> 
> 赞同：0
> 
> 时间：2012-06-22T02:25:26.573
> 
> 标签：android, android-layout

我正在尝试将`ImageView`屏幕顶部的 a`TextView`与该图像左下角的 a 对齐。我被难住了，有人知道这是怎么回事吗？我希望它看起来像这样（在图形设计器中看起来不错）

![在此处输入图像描述](../Images/1e7aba04f9ddb7fd66844323656e5763.png)

这是它在应用程序中的样子。请注意，图像和屏幕顶部之间有很大的空间。

![在此处输入图像描述](../Images/b7773a9cabb2826c0018628009a3bdb4.png)

这是xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.package.blah.ImageWithOverlay
        android:id="@+id/imageWithOverlay1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </com.package.blah.ImageWithOverlay>

</RelativeLayout> 
```

这是生成它的代码。

```
public class ImageWithOverlay extends RelativeLayout {
    ImageView image;
    TextView text;
    int imageHeight;

    public ImageWithOverlay(Context context) {
        super(context);
        setupDisplay(context);
    }

    public ImageWithOverlay(Context context, AttributeSet attrs) {
        super(context, attrs);
        setupDisplay(context);
    }

    public ImageWithOverlay(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setupDisplay(context);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {     
        //super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        super.onMeasure(widthMeasureSpec, imageHeight);
    }

    private void setupDisplay(Context context) {
        BitmapDrawable bd = (BitmapDrawable)this.getResources().getDrawable(R.drawable.flowers480);
        imageHeight = bd.getBitmap().getHeight();

        image = new ImageView(context);
        image.setImageDrawable(bd);
        LayoutParams lp = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        lp.addRule(ALIGN_PARENT_TOP);
        image.setLayoutParams(lp);
        this.addView(image);

        text = new TextView(context);
        text.setText("testing");
        lp = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        lp.addRule(ALIGN_PARENT_BOTTOM);
        text.setLayoutParams(lp);
        this.addView(text);
    }
} 
```

任何帮助表示赞赏，如果需要，请随时向我询问更多详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:29:37.827

我想你会发现 ImageView 的大小是正确的，但是图像在视图内缩放和居中。

要修复，请添加：

```
image.setAdjustViewBounds(true); 
```

要检查此类问题，您可以尝试：

```
image.setBackgroundColor(0x6600ffff); 
```

这将使您看到图像的边界。

# .net - 项目参考中未使用的程序集的影响

> ID：11149449
> 
> 赞同：4
> 
> 时间：2012-06-22T02:25:32.373
> 
> 标签：.net, clr

如果应用程序在编译期间将未使用的 DLL 引用（框架 dll）添加到项目中，会有什么影响？

比如，它会增加装配尺寸吗？它会在运行时加载那些 DLL 吗？ETC

这个问题与优化无关。这是为了更好地理解 .NET 基础结构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T05:57:04.507

不，C# 编译器仅将程序集引用放入最终程序集中，用于包含在代码中实际使用的类型的程序集。添加未使用的程序集的唯一影响是编译本身的速度非常缓慢。

您可以使用 ildasm.exe 亲自查看。在最终程序集上运行它，双击清单并查找`.assembly`指令。

这也在运行时进行了高度优化，程序集由即时编译器加载。仅当您实际调用该程序集中的某个类型的方法时才会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T02:28:23.323

根据[MSDN](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/c6d4ee69-7a82-4dba-bb00-ebb2fd6ab9a9/) Q&A，引用它**会**增加你的程序集大小，但是，`using`语句是在编译时评估的（见下文）。

* * *

在运行时，将调度 JIT“编译器”以挂钩 DLL。文件大小增加约 1KB 的原因是因为存储参考信息需要约 1KB。由于它会挂接每个 DLL，它**会**减慢您的启动时间，但运行时不会受到影响。启动时间差会那么小，建议看看[这篇关于 CodingHorror](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)的文章。除非将其部署到嵌入式系统上，否则我不会担心这一点。在应用程序关闭时，JIT“编译器”将卸载 DLL 并释放所需的资源。

* * *

关于`using`陈述。在编译时，以下内容：

```
public class MyClass
{
    public static void DoNothing(int nil)
    { }
} 
```

将被翻译成：

```
using System;
public class MyClass
{
    public static void DoNothing(Int32 nil)
    { }
} 
```

这将进一步翻译成：

```
public class MyClass
{
    public static void DoNothing(System.Int32 nil)
    { }
} 
```

# javascript - 隐藏的 div 显示瞬间（slideToggle / javascript）

> ID：11149450
> 
> 赞同：0
> 
> 时间：2012-06-22T02:25:34.253
> 
> 标签：javascript, html, hidden, slidetoggle

我有一个默认隐藏 div 的脚本，并在单击链接时将其滑动切换（请参阅[http://zarin.me](http://zarin.me) -- 联系链接）。这是我正在使用的代码：

```
<script>
$(document).ready(function(){
    $("#contact-drawer").hide();
    $(".toggle-drawer").show();

    $('.toggle-drawer').click(function(){
    $("#contact-drawer").slideToggle();
}); 
});
</script> 
```

我的问题是，当页面加载时，整个 div 会显示片刻，然后隐藏。有时这可能有点刺耳。我需要修复什么以使 div 在加载时不显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:34:22.237

你可以在你的 CSS 中添加 display none，这样加载时它就已经隐藏了，然后 jQuery 应该处理显示。

例如

```
<style>
#contact-drawer {
display:none;
}
</style>
<script>
$(document).ready(function(){
    $(".toggle-drawer").show();

    $('.toggle-drawer').click(function(){
        $("#contact-drawer").slideToggle();
    }); 
});
</script> 
```

只是一个建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T02:33:55.383

您在文档加载时隐藏了您的 div，这就是为什么您在较慢的浏览器或较慢的机器上看到它的原因。

一个更好的方法是在 CSS 中隐藏 div，这意味着 div 在文档显示之前就被隐藏了。

```
#contact-drawer { display: none; } 
```

但是如果你真的需要用 JavaScript 隐藏它，你可以在你的 div 正下方包含一个脚本，它会立即执行而不是在文档准备好时执行，这会给你同样的效果。

```
<div id="contact-drawer" .... />
<script .... >
    $("#contact-drawer").hide();
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T02:53:38.193

`#contact-drawer`正如 Darko Z 下面所说，这种闪烁的原因是浏览器渲染元素和您的 JavaScript 代码运行之间存在延迟。浏览器正在按照您的 CSS 和 HTML 的指示执行操作并显示元素，然后才*表明*文档已完成解析（DOM 就绪）并触发您的 JavaScript。

有几种方法可以解决这个问题（具有不同的兼容性）。本质上，您需要在元素渲染和 DOM 准备就绪之间或之前解释代码。

**要使用 JavaScript 进行修补**，您可以在元素之后立即添加一个内联脚本以将其显示设置为隐藏。此代码将在页面被解释时立即执行，而不是在 DOM 准备好时执行。就可访问性而言，我相信这是最简单、最安全的方法。

纯 JavaScript：

```
<section id="contact-drawer"></section>
<script>document.getElementById('contact-drawer').style.display = 'none';</script> 
```

或使用 jQuery：

```
<section id="contact-drawer"></section>
<script>$("#contact-drawer").hide();</script> 
```

* * *

**要使用纯 CSS 进行修复，**您可以将元素的显示属性设置为“无”。请注意，使用此解决方案，**如果 JavaScript 被禁用，表单将无法访问。**

**CSS**

```
#contact-drawer {
    display:none;
} 
```

* * *

**要修复 CSS 并在禁用 javascript 时维护工作页面，**您可以使用额外的`:target`CSS 选择器并稍微更改链接和 JavaScript。目标选择器[与旧浏览器不是 100% 兼容](http://www.quirksmode.org/css/contents.html#t316)，但它比上面的纯 CSS 版本更易于访问。

**CSS**

添加与上面相同的样式，并使用选择器阻止复制设置显示`:target`。这使得当您导航到[http://zarin.me/#contact-drawer](http://zarin.me/#contact-drawer)时，将激活 :target 样式并显示 #contact-drawer。

```
#contact-drawer {
    display:none;
}
#contact-drawer:target {
    display:block;
} 
```

**HTML**

将锚点 href 从 更改为`#`，`#contact-drawer`以便在单击链接时激活`:target`选择器。

```
<h3 class="contact">
    <a href="#contact-drawer" class="toggle-drawer" style="">
        <img src="img/envelope.png">
        CONTACT
    </a>
</h3> 
```

**JavaScript**

`return false`在函数末尾添加以在单击时停止浏览器导航`#contact-drawer`（并激活`:target`选择器）`.toggle-drawer`。

```
$('.toggle-drawer').click(function(){
    $("#contact-drawer").slideToggle();
    return false;
}); 
```

# windows - 获取打印屏幕时如何找出活动窗口

> ID：11149454
> 
> 赞同：0
> 
> 时间：2012-06-22T02:26:54.220
> 
> 标签：windows, events, printscreen

我正在 Windows 中创建一个 Bug 归档客户端。当用户按下 Windows + prnt screen 时客户端激活。最新捕获的图像被推送到客户端 [windows 窗体] 中的图片框。

有什么方法可以知道打印屏幕时哪个窗口处于活动状态。我们可以挖掘事件日志或任何其他方式来找出相同的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:37:55.527

这样做的唯一方法是您自己的应用程序正在截屏；然后您可以使用`GetForegroundWindow`捕获该`HWND`窗口的。如果您看到的只是默认打印屏幕操作后捕获的最终结果，那么您就不走运了。

# coffeescript - 通过关联数组的咖啡脚本循环

> ID：11149459
> 
> 赞同：1
> 
> 时间：2012-06-22T02:27:26.140
> 
> 标签：coffeescript

```
magnitudeArray = []
for index, dataPoint of chartData
     magnitudeArray.push dataPoint.magnitude if dataPoint.magnitude? 
```

上面的代码有效，但对于咖啡脚本来说，它的丑陋和非咖啡脚本。首先，`index`var 完全没有被使用，它就在那里，所以我可以访问`dataPoint`var 作为关联数组的结果，而不是索引。还有它的三行！使用咖啡脚本循环，数组应该可以用一行写，而不是循环。

我想这样的事情是可能的：

```
magnitudeArray = for dataPoint of chartData when dataPoint.magnitude? 
```

你知道更清洁的咖啡脚本这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:45:12.303

您可以使用“解构分配”将其压缩更多

```
magnitudes = (magnitude for i, {magnitude} of chartData when magnitude?) 
```

甚至

```
magnitudes = (m for i, {magnitude: m} of chartData when m?) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T02:36:47.010

是的，在这种情况下，您应该能够使用[数组推导](http://coffeescript.org/#loops)，尽管您需要为 的键使用变量`chartData`，我假设它是一个对象。您可以使用`_`来表示未使用的变量（尽管我不知道这是否是 CoffeeScript 中的常见做法）：

```
magnitudes = (point.magnitude for _, point of chartData when point.magnitude?) 
```

[coffeescript.org 上的示例](http://coffeescript.org/#try%3achartData%20%3D%0A%20%20foo%3A%20%0A%20%20%20%20magnitude%3A%206%0A%20%20bar%3A%0A%20%20%20%20noMagnitudeInThisOne%3A%20%27%27%0A%20%20baz%3A%0A%20%20%20%20magnitude%3A%207%0A%0Amagnitudes%20%3D%20%28point.magnitude%20for%20_%2C%20point%20of%20chartData%20when%20point.magnitude%3F%29%0A%0Aconsole.log%20magnitudes)。

# c++ - 如何获取 C++ 控制台应用程序输出并将其写入文本文件

> ID：11149465
> 
> 赞同：1
> 
> 时间：2012-06-22T02:28:11.687
> 
> 标签：c++, visual-c++

我创建了一个基本的控制台应用程序。我想知道如何获取输出并将其写入文本文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T02:30:44.577

有几种方法可以做到这一点。

(1) 您可以使用命令行将程序的输出重定向到文件。您可以在 Windows 中从 shell 执行此操作

```
madlib-program.exe > outputFile 
```

在 Mac/Linux 中从命令行作为

```
./madlib-program > outputFile 
```

(2) 您可以将程序的所有输出调用替换为文件写入操作。例如，如果您使用流式 IO，您可以通过打开一个输出文件来启动程序：

```
ofstream out("output-file.txt"); 
```

然后将所有用法替换`cout`为`out`：

```
cout << "Hello, world" << endl; 
```

变成

```
out << "Hello, world!" << endl; 
```

希望这可以帮助！

# php - 计算目录中的文件和子文件夹

> ID：11149468
> 
> 赞同：1
> 
> 时间：2012-06-22T02:28:34.500
> 
> 标签：php, recursion, directory, counting

我正在编写一个递归计算所有文件和文件夹的脚本。我尝试了两种方法，但每种方法都返回不同的值：脚本 1：2376 脚本 2：2178

这是两个脚本：

```
$source = 'folder';
$files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($source), RecursiveIteratorIterator::SELF_FIRST);
foreach($files as $file) {
    $result[] = $file.'<br />';
}
echo count($result).'<br />';
    function listFolders($dir) {
    if($dh = opendir($dir)) {
        $files = Array();
        $inner_files = Array();
        while($file = readdir($dh)) {
            if($file != "." && $file != "..") {
                if(is_dir($dir . "/" . $file)) {
                    $inner_files = listFolders($dir . "/" . $file);
                    if(is_array($inner_files)) $files = array_merge($files, $inner_files); 
                } else {
                    array_push($files, $dir . "/" . $file);
                }
            }
        }
        closedir($dh);
        return $files;
    }
}
foreach (listFolders($source) as $key=>$file){
    $result2[] = $file ."<br />";
}
echo count($result2); 
```

其中一个脚本是否正确？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:33:37.307

如果您使用 RecursiveIterator 的第一个示例，您还计算点目录。在你的第二个例子中，你把它们删掉了。

用这个：

```
$files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($source, FilesystemIterator::SKIP_DOTS), RecursiveIteratorIterator::CHILD_FIRST);
foreach($files as $file) {

    $result[] = $file.'<br />';
} 
```

# google-app-engine - Google App Engine - IP 地址列表？

> ID：11149470
> 
> 赞同：27
> 
> 时间：2012-06-22T02:28:49.383
> 
> 标签：google-app-engine, ip, range, ip-address, whitelist

我知道 Google App Engine 不支持具有静态 IP 地址的应用程序，但我想知道是否存在应用程序可能具有的 IP 地址列表或范围？我想将该列表用作部署在其他地方的另一个应用程序的 IP 地址白名单。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-29T21:45:17.580

除了其他答案之外，GAE 高级支持将我定向到此名称，尤其是作为[URLFetch](https://developers.google.com/appengine/docs/python/urlfetch/)调用的源 IP 地址：

```
$ dig -t txt _cloud-netblocks.googleusercontent.com 
```

答案是：

```
include:_cloud-netblocks1.googleusercontent.com
include:_cloud-netblocks2.googleusercontent.com
include:_cloud-netblocks3.googleusercontent.com 
```

如果您随后查询这些，您将获得此范围列表（截至 2014 年 6 月 26 日）：

```
8.34.208.0/20
8.35.192.0/21
8.35.200.0/23
23.236.48.0/20
23.251.128.0/19
107.167.160.0/19
107.178.192.0/18
108.170.192.0/20
108.170.208.0/21
108.170.216.0/22
108.170.220.0/23
108.170.222.0/24
108.59.80.0/20
130.211.4.0/22
146.148.16.0/20
146.148.2.0/23
146.148.32.0/19
146.148.4.0/22
146.148.64.0/18
146.148.8.0/21
162.216.148.0/22
162.222.176.0/21
173.255.112.0/20
192.158.28.0/22
199.192.112.0/22
199.223.232.0/22
199.223.236.0/23 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T06:27:41.740

使用命令：

```
 dig -t txt _netblocks.google.com 
```

获取最新的 google ip 块，然后您可以将结果添加到白名单中。请注意，该列表不是静态的，并且会不时更新。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T08:59:31.040

在[GAE 文档](https://developers.google.com/appengine/kb/general#static-ip)中，您需要使用**dig**命令，因为它的设计目前不提供将静态 IP 地址映射到应用程序的方法：

```
dig -t TXT _netblocks.google.com @ns1.google.com 
```

如果您的系统上没有**dig**命令，您可以使用在线服务：

在撰写此答案时，查询[http://www.digwebinterface.com/?hostnames=_netblocks.google.com&type=TXT&useresolver=8.8.4.4&ns=self&nameservers=ns1.google.com](http://www.digwebinterface.com/?hostnames=_netblocks.google.com&type=TXT&useresolver=8.8.4.4&ns=self&nameservers=ns1.google.com) 返回：

```
_netblocks.google.com.  3596    IN  TXT "v=spf1 ip4:216.239.32.0/19 ip4:64.233.160.0/19 ip4:66.249.80.0/20 ip4:72.14.192.0/18 ip4:209.85.128.0/17 ip4:66.102.0.0/20 ip4:74.125.0.0/16 ip4:64.18.0.0/20 ip4:207.126.144.0/20 ip4:173.194.0.0/16 ?all" 
```

如果您需要，这里是 Google API 控制台的格式化列表：

```
216.239.32.0/19 
64.233.160.0/19 
66.249.80.0/20 
72.14.192.0/18 
209.85.128.0/17 
66.102.0.0/20 
74.125.0.0/16 
64.18.0.0/20 
207.126.144.0/20 
173.194.0.0/16 
```

请注意，IP 范围将来可能会发生变化，因此您需要不时运行此查询。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-16T03:24:26.550

我很快把它放在一起，与`gcloud create-firewall`命令一起使用。

```
#!/bin/bash

netblocks=$(dig TXT _cloud-netblocks.googleusercontent.com @ns1.google.com +short | sed -e 's/"//g')

for block in $netblocks; do
    if [[ $block == include:* ]]; then
        ipblocks=$(dig TXT ${block#include:} @ns1.google.com +short)

        for ipblock in $ipblocks; do
            if [[ $ipblock == ip4:* ]]; then
                printf "${ipblock:4},"
            fi
        done
    fi
done 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-20T07:32:30.357

**这是截至 2016 年 3 月 20 日的更新列表：**

[使用此知识库文章](https://cloud.google.com/appengine/kb/)中的说明提取。

```
ip4:8.34.208.0/20
ip4:8.35.192.0/21
ip4:8.35.200.0/23
ip4:108.59.80.0/20
ip4:108.170.192.0/20
ip4:108.170.208.0/21
ip4:108.170.216.0/22
ip4:108.170.220.0/23
ip4:108.170.222.0/24

ip4:162.216.148.0/22
ip4:162.222.176.0/21
ip4:173.255.112.0/20
ip4:192.158.28.0/22
ip4:199.192.112.0/22
ip4:199.223.232.0/22
ip4:199.223.236.0/23
ip4:23.236.48.0/20
ip4:23.251.128.0/19

ip4:107.167.160.0/19
ip4:107.178.192.0/18
ip4:146.148.2.0/23
ip4:146.148.4.0/22
ip4:146.148.8.0/21
ip4:146.148.16.0/20
ip4:146.148.32.0/19
ip4:146.148.64.0/18
ip4:130.211.4.0/22

ip4:130.211.8.0/21
ip4:130.211.16.0/20
ip4:130.211.32.0/19
ip4:130.211.64.0/18
ip4:130.211.128.0/17
ip4:104.154.0.0/15
ip4:104.196.0.0/14
ip4:208.68.108.0/23

ip6:2600:1900::/35 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-19T06:00:53.250

我为此目的创建了一个 ruby​​ 脚本（超级简单，易于更新）：

[https://github.com/stephengroat/whitelist-travisci](https://github.com/stephengroat/whitelist-travisci)

```
Resolv::DNS.open do |dns|
  ress = dns.getresource "_cloud-netblocks.googleusercontent.com", Resolv::DNS::Resource::IN::TXT
  ress.data.scan(/(?<=include:)_cloud-netblocks+\d.googleusercontent.com/).each do |r|
    subress = dns.getresource r, Resolv::DNS::Resource::IN::TXT
    subress.data.scan(/(?<=ip[4|6]:)[^\s]+/).each do |sr|
      puts sr
    end
  end
end 
```

# c# - ext.net 2.0 - 获取树节点的自定义属性

> ID：11149471
> 
> 赞同：2
> 
> 时间：2012-06-22T02:28:49.983
> 
> 标签：c#, javascript, asp.net, ext.net

我将 ext.net 与 asp.net 一起使用，我正在使用服务器端代码生成一棵树：

```
 Ext.Net.Node rootNode = new Ext.Net.Node();
    rootNode.Text = "Home";
    rootNode.CustomAttributes.Add(new ConfigItem("absoluteNodeUrl", "'" + someValue+ "'", ParameterMode.Value)); 
```

当单击树节点时，我正在尝试从客户端 javascript 中获取**absoluteNodeUrl**属性：

```
 x=node.attributes['absoluteNodeUrl'] 
```

但我总是得到**undefiend**的价值，尽管这段代码以前在 ext.net 的 1.3 版中与我一起工作过。

如何修改客户端脚本以获取自定义属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:05:24.010

自定义属性名称必须在商店的模型中显示为 ModelField（或在 TreePanel 的 Fields 集合中）

请参阅以下帖子 [http://forums.ext.net/showthread.php?19717-Raw-property-is-null-when-adding-a-node](http://forums.ext.net/showthread.php?19717-Raw-property-is-null-when-adding-a-node)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:59:10.627

你应该可以打电话：

```
var x = node.absoluteNodeUrl;

// or...

var x = node['absoluteNodeUrl']; 
```

要么应该返回`absoluteNodeUrl`值。

我假设`node`您的示例中的变量是实际根节点的有效实例。

# javascript - Javascript：如何将点击图像记录到 json？

> ID：11149473
> 
> 赞同：0
> 
> 时间：2012-06-22T02:28:59.397
> 
> 标签：javascript, onclick, image

我的表单需要列出多个图像。用户需要能够单击图像来选择他们的样本。你如何将图像的名称传递给下面的脚本？

我了解下拉菜单如何提供选择，“***选择***”部分有一个“id”......“***选项***”有一个值。但它如何处理图像？有没有办法给每个人一个唯一的标签，但以某种方式让脚本知道它们都是同一组的选项？

```
<img src="myimage_one.jpg">
<img src="myimage_two.jpg">
<img src="myimage_three.jpg"> 
```

它们是否都需要像“ ***radio*** ”元素一样共享相同的身份，然后您选择的那个成为通过我的脚本发送的 ID？

下面是我的脚本，它会为每个下拉选择、每个填写的输入字段触发，并且应该针对发生的每个“onclick”。所以基本上，“ ***select*** ”和“ ***input*** ”元素是基于“doCalc();”触发的。下面的脚本的一部分。

脚本的原因是立即自动计算每个选择的总数，然后将其显示到特定的 id 占位符中。

最后，该值是否需要以某种方式附加到 myimage_str ，正如您将在下面的脚本中看到的那样？

var myimageX = $('#myimage_str').val();

```
 <script type="text/javascript">
            function doCalc(){
                var roomX = $('#room_str').val();
                var otherroomX = $('#other_room').val();
                var myimageX = $('#myimage_str').val();                 
                var heightX = $('#height_str').val();
                var heightfracX = $('#heightfrac_str').val();
                var widthX = $('#width_str').val();
                var widthfracX = $('#widthfrac_str').val();
                var prodid = $('#prodid').val();
                var qtyX = $('#qty_str').val();

                $.post('db_query.php',
                {qtyX:qtyX, roomX:roomX, otherroomX:otherroomX, myimageX:myimageX, heightX:heightX, heightfracX:heightfracX, widthX:widthX, widthfracX:widthfracX, prodid:prodid}, 
                function(data) {
                    data = $.parseJSON(data);
                    $('#width-placeholder').html(data.width);
                    $('#widthfrac-placeholder').html(data.widthfrac);
                    $('#height-placeholder').html(data.height);
                    $('#heightfrac-placeholder').html(data.heightfrac);
                    $('#realtime-price').html(data.totalprice);
                    $('#realtime-qty').html(data.qty);
                    $('#unitprice').html(data.unitprice);
                    $('#roomname').html(data.roomname);
                    $('#other_room-placeholder').html(data.otherroom);
                    $('#myimage-placeholder').html(data.myimage);
                    // ...
                });
                return false;
                };
        </script> 
```

编辑：这是根据您的建议添加的代码。它仍然无法正常工作。当我单击图像时，没有任何反应。我尝试将 attr 用于“alt”标签并在其中给出图像名称。var colorX = $('.ColorSelection').attr('alt');

```
 <script type="text/javascript">
                $('.ColorChoice').click(function(){
                    $('.ColorChoice').removeClass('ColorSelection');
                    $(this).addClass('ColorSelection'); 
                    doCalc()
                });
                function doCalc(){
                var roomX = $('#room_str').val();
                var otherroomX = $('#other_room').val();
                var colorX = $('.ColorSelection').attr('alt');  
//..... 
```

这里有几张图片...

```
<ul class="swatches">
  <li><div id="swatch"><img src="100_bright_white.jpg" alt="100_bright_white" class="ColorChoice"></div></li>
  <li><div id="swatch"><img src="101_pure_white.jpg" alt="101_pure_white" class="ColorChoice"></div></li>
  <li><div id="swatch"><img src="102_bone.jpg" alt="102_bone" class="ColorChoice">
//...</div></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:51:00.457

您可以对所有图像进行相同的分类，然后当您单击图像时，它会获得一个单击的类。然后在 doCalc 函数中获取数据。像下面这样的东西可能会起作用

为了这个例子，你的图像都被归类为 .imgChoice 而你想要的是 .imgSelection

```
$('.imgChoice').click(function(){
    $('.imgChoice').removeClass('imgSelection');
    $(this).addClass('imgSelection');    
}); 
```

然后获取价值

```
var myimageX = $('.imgSelection').attr('src'); 
```

这会将源值/文件名分配给变量 myimageX。如果这不是你要找的东西，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:51:15.373

在您的表单中，放置一个隐藏字段来保存用户选择的图像的 src 属性的值。然后，在您的脚本中（我假设您使用的是 jQuery）：

```
$("img").click(function() {
    $("#myimage_str").val($(this).attr("src"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T02:52:00.223

有几种方法可以做到这一点。一种是将您的图像包装在一个 div 中，您可以识别图像块。

```
<div id="myimage_str">
  <img src="myimage_one.jpg">
  <img src="myimage_two.jpg">
  <img src="myimage_three.jpg">
</div> 
```

然后添加以下 javascript（我假设您使用 jQuery）：

```
$('#myimage_str').click(function() {
   $('#myimage_str img').removeClass('selected');
   $(this).addClass('selected');
}); 
```

在您的“doCalc”方法中，您可以简单地编写：

```
var myimageX = $('#myimage_str img.selected').attr('src'); 
```

或者，您可以放置​​一个通用类名来标识图像块。但我认为包装它可以更容易地查看图像的逻辑块（并且可能是 UI 样式的情况）。

# drupal-7 - 当我尝试调用 drupal_get_form 时页面没有正确重定向

> ID：11149478
> 
> 赞同：0
> 
> 时间：2012-06-22T02:30:08.787
> 
> 标签：drupal-7, drupal-modules, drupal-fapi, drupal-forms

为什么 Drupal 7 无法正确重定向（我已登录）？

当我尝试从 hook_preprocess_page() 中的模块调用 drupal_get_form('user_login') 时，浏览器会抛出该消息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:31:54.383

Drupa_get_form() 函数不用于重定向。这是为了获取表格。在您的情况下，您正在调用登录表单。要重定向，请使用 drupal_goto() 函数，这里是 drupal api [http://api.drupal.org/api/drupal/includes%21common.inc/function/drupal_goto/7上的链接](http://api.drupal.org/api/drupal/includes%21common.inc/function/drupal_goto/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T11:37:31.627

嗯，`drupal_get_form('user_login')`导致问题。所以不要`drupal_get_form('user_login')`使用`drupal_get_form('user_login_block')`它，它会起作用。

# javascript - JavaScript - 根据单元格的值为表格上的行着色

> ID：11149485
> 
> 赞同：0
> 
> 时间：2012-06-22T02:32:00.157
> 
> 标签：javascript, html, powershell

我需要任何编码员的帮助......

目前，代码读取 CSV 文件，然后使用 Powershell 将其输出到 html 文件。而且我必须使用 Powershell，因为此代码（此处未显示）还有其他使用 Powershell 的位。

如何根据单元格的值为表格上的行着色？

当前的代码如下所示。

* * *

```
$datagridView1.DataSource | Export-Csv c:\tmp\test.csv

#HTML OUTPUT   

$head= @"
<style>
BODY{background-color:white;}
TABLE{border-width: 3px;border-style: solid; border-color:white;border-collapse:
collapse;}
TH{border-width: 3px;padding: 2px;border-style: solid;border-color: white;background-     color:yellow}

</style>

<script type="text/javascript">
    var allText =[];
    var allTextLines = [];
    var Lines = [];

    var txtFile = new XMLHttpRequest();
    txtFile.open("GET", "file://c:/tmp/test.csv", true);
    txtFile.onreadystatechange = function()
    {
        allText = txtFile.responseText;
        allTextLines = allText.split(/\r\n|\n/);
    };

    document.write(allTextLines);<br>
    document.write(allText);<br>
    document.write(txtFile);<br>
</script>
"@
$datagridView1.DataSource | convertto-html -head $head –body "<H2>Query</H2>" | Out-File         C:\tmp\app.html 
```

* * *

app.html 文件似乎还创建了以下四列，它们不在 CSV 文件中（RowError、RowState、Table、ItemArray、HasErrors），我无法弄清楚它的来源。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:09:06.243

如果表格数据的值为 3，则以下内容将使任何表格背景变为蓝色：

```
$("td:contains('3')").css({'background-color':'blue'}); 
```

jQuery 是一个用于简化代码的神奇工具。尽管 JavaScript 非常适合理解基本的编程原理以及面向对象的语法。jQuery 坚持其少写多做的座右铭。

欲了解更多信息，[请访问本网站](http://api.jquery.com/contains-selector/)。

# hl7 - HL7 中的 Code Blue 状态段是什么？

> ID：11149486
> 
> 赞同：0
> 
> 时间：2012-06-22T02:32:02.623
> 
> 标签：hl7

我正在尝试在 HL7 流中找到将提供有关是否已对患者执行蓝色代码：复苏的信息的段。我在网上读到它可以在高级指令观察中找到。目前我正在接收 ADT、LIS 流。我可以从 ADT 中的帐单信息中获取它吗？

我是HL7的新手，所以请帮忙。

谢谢迪亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:01:33.110

每个 HL7 流都不同。您必须询问您的消息来源是否有信息以及如何找到它。请注意，高级指令观察只是告诉您患者*是否*有高级指令（如 DNR），而不是是否对患者进行了任何程序。

# python - 像照片显示一样的砌体调整大小/拟合算法

> ID：11149488
> 
> 赞同：1
> 
> 时间：2012-06-22T02:32:51.870
> 
> 标签：python, algorithm

我正在从事一个有趣的项目，该项目涉及显示大量照片。每一张照片都是不同的尺寸。我想尽可能少地调整它们的大小，以便它们在一个网格中组合在一起，有些类似于 JQuery 的[Masonry.js](http://masonry.desandro.com/)插件或[Apple 的 iPhoto Journals](https://www.icloud.com/journals/sample/)。

有没有人做过这样的事情？关于我应该采取这个方向的任何指示？我想在服务器端做，最好使用 Python，但我真的很想弄清楚它背后的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:38:21.120

这是一个难题。它归结为决定你最关心的约束，并牺牲其他约束。请注意，例如，砌体将所有内容强制放入固定宽度的列中，并且 iPhoto Journal 被放置在方形网格上。两者都牺牲了照片的边缘来布局页面。

我们在 Tabblo 尝试了许多沿着这些思路的算法，它们都需要放弃一些东西。

HP 有一种称为 Blocked Recursive Image Composition (BRIC) 的算法，该算法非常有效地取得了良好的平衡。

# java - Java Array 列和行编号

> ID：11149489
> 
> 赞同：1
> 
> 时间：2012-06-22T02:33:00.880
> 
> 标签：java, arrays

我是编程新手，希望能得到一些指导，我搜索了线索但没有运气。我为二维数组编写了代码，我的问题是我无法让行号和列号与元素一起显示……这是我现在最接近的输出是；

```
 T F F T F F 
0 F F T F F T 
1 F T F F T F 
2 T F F T F F 
3 F F T F F T 
4 F T F F T F 
5 
```

我需要输出；

```
 0 1 2 3 4 5
0 T F F T F F 
1 F F T F F T 
2 F T F F T F 
3 F F T F F T
4 F T F F T F
5 T F F T F T 
```

代码如下： public class Array {

```
public static void main(String[] args) {
    System.out.print("  ");
    boolean [][] a;
    int N = Integer.parseInt(args[0]);
    a = new boolean [N][N];
    for (int i = 0; i<a.length;i++){ 
        for (int j = 0; j<a[0].length;j++){
            a[i][j] = true; 
            int sum = (i+j);

            if (sum%3==0) {
               System.out.print(   "T " );
            } else {
               System.out.print(  "F ");
            }
   }
         System.out.println();
        System.out.print(i + " ");
    }
     } 
```

}

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:43:24.450

这段代码没有产生这个输出（你显然没有粘贴所有的代码）。

但是，您的基本问题是您在行数据*之后*输出行号。改变它，你会更接近。

输出一个特殊的“标题行”，你会更接近。

祝你学习编程好运！

提示：你在这里问的越少，试着弄清楚自己，你就会学得越好、越快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T02:45:11.640

在您的代码中，您已经一次打印一行，因此将行号附加到每行的开头（即，在您打印任何值之前）是微不足道的。

至于列，你需要记住，`System.out`只能从左到右打印，不能上下打印。因此，在打印数组的其余部分之前，您需要打印库仑数。

在这段代码中查看我的评论：

```
public static void main(String[] args) {
    boolean [][] a;
    int N = Integer.parseInt(args[0]);
    a = new boolean [N][N];

    System.out.print("  "); //print the spacer for the row numbers
    for (int i = 0; i < N; i++){
         System.out.print(i + " "); //print the column number
    }

    for (int i = 0; i<a.length;i++){ 
        System.out.print("\n" + i + " "); //new line plus row number

        for (int j = 0; j<a[0].length;j++){
            a[i][j] = true; 
            int sum = (i+j);

            if (sum%3==0) {
                System.out.print("T ");
            } else {
                System.out.print("F ");
            }
        }
    }
} 
```

此外，您的缩进和括号使用有点混乱（正如其他人所说）。看我的代码。看看查看 for 循环的开始位置和结束位置是多么容易？看看里面有什么是多么容易？

# html - 大型 CSS 与大型 HTML

> ID：11149491
> 
> 赞同：3
> 
> 时间：2012-06-22T02:33:24.510
> 
> 标签：html, optimization, css, less

将 HTML 限制为少数类和 id 并保持 HTML 的大小较小或者使用大量嵌套 CSS 是否更好。

这些是我能想到的两者的优势。

使用少量嵌套 CSS 规则的优点：

*   更小的 CSS 文件
*   高效定位 CSS 中的元素
*   CSS 中的渲染时间可能更快（不确定）

使用大量嵌套 CSS 规则的优点：

*   整个网站的 HTML 尺寸很小
*   CSS 被缓存
*   更好的代码组织（我正在使用 LESS）

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T02:50:12.437

任何一天，我都会争论大型 CSS 而非大型 HTML。您的 CSS 将被缓存，因此您的页面将使用更小的 HTML 加载得更快。更多的类确实意味着更多的灵活性，但你会惊讶于使用 CSS 选择器可以完成多少工作。我唯一一次看到将 HTML 作为有用的东西是对 SEO 有用的。有关我的意思的示例，请参见[微格式。](http://microformats.org/)

准确性不应该是任何问题（即使您考虑到人为错误，您也应该能够立即发现错误）。就速度而言，我怀疑它对性能有影响。请记住，所有渲染都是在客户端完成的，因此您无需担心服务器会因为更复杂的 CSS 选择器而做更多工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T03:03:02.437

绝对同意 Wex re css 缓存（多 css，少 html）

至于你的问题

> *是否最好将我的 HTML 限制为尽可能少的类和 id，并保持 HTML 的大小较小，或者使用大量嵌套的 CSS 规则是否更好。*

从渲染性能的角度来看，使用平面（一级）选择器实际上更有利，因为浏览器引擎从右到左匹配它们，即更喜欢`.list-item-first`-`ul li:first-child`从维护的角度来看，这不太容易管理，但会带来更好的性能。同时，您很少会在合理大小的样式表中看到差异，因此这更多的是偏好问题。

[更多关于 css 渲染性能的信息](https://developers.google.com/speed/docs/best-practices/rendering)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T08:21:20.760

我强烈反对在您的 css 中使用大量[嵌套](http://www.w3schools.com/css/css_grouping_nesting.asp)。 css 嵌套的一个问题是它使您的 css 代码的可重用性大大降低。我建议你看一下[这个](https://github.com/stubbornella/oocss/wiki)页面，它解释了**面向对象的 CSS (OOCSS)**的概念，它有这个关键概念：

“很少使用与位置相关的样式”。一个物体无论放在哪里都应该是一样的。`<h2>`因此，与其设置特定的样式，不如`.myObject h2 {...}`创建并应用一个描述相关`<h2>`问题的类，例如`<h2 class="category">.*`

要查看有关为什么使用 css 选择器可能会受到限制的更详细讨论。请参阅我的[答案](https://stackoverflow.com/questions/15043976/oocss-separation-of-container-and-content/15044367#15044367)。

# javascript - ASP 控件中没有 ID

> ID：11149494
> 
> 赞同：0
> 
> 时间：2012-06-22T02:33:47.163
> 
> 标签：javascript, asp.net, html

我目前正在开发由其他人创建的 ASP.NET 站点。有一个我想要一个静态标题的 GridView。为此，我需要知道该控件的 ID，以便可以使用 Javascript 对其进行操作。ID 在 .ASPX 文件中设置（即 . `<asp:GridView ID="GridView1">`）。但是，当我查看生成的 HTML 时，GridView 对应的表格没有 ID 标签！它只是`<table>`与其他一些属性一样出现。ID是否有可能在代码中的其他地方被抑制？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T02:38:13.350

确保标签还包含 runat="server" 并设置 ClientIDMode="Static"，这样 ID 不会被 ASP.NET 更改：

```
<asp:GridView ID="GridView1" runat="server" ClientIDMode="Static" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:42:50.320

为 GridView 指定 ID 不是强制性的，只有 runat="server" 是强制性的。您可能需要查看 html 中的特定模式才能识别表，以便您可以在 jquery 中访问它。也许看看父控件，如果它有 id，那么这就是你的线索。所以让我们说表在一些 id 为“sample”的 div 标签内，你可以用 jquery 找到你的表

```
$('div#sample table') 
```

# git - 当你重写公共分支的历史时会发生什么？

> ID：11149499
> 
> 赞同：8
> 
> 时间：2012-06-22T02:34:43.913
> 
> 标签：git

我到处读到重写已发布的提交历史是不好的，并且会“破坏”其他开发人员的存储库。

但是，我一直无法找到有关究竟会破坏什么以及如何修复它的详细信息。

那么，如果我要重写历史和`git push --force`，我应该告诉其他开发人员怎么做才能让他们保持最新状态？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T02:52:14.820

这可能是我见过的最好的解释：http: [//git-scm.com/book/ch3-6.html#The-Perils-of-Rebasing](http://git-scm.com/book/ch3-6.html#The-Perils-of-Rebasing)

简短的回答是其他开发人员会拉下修改后的公共存储库，并尝试将这些更改与他们当前的工作适当地合并。因为最近的祖先可能已经更改，所以这个合并可能很复杂，可能需要手动执行。一个粗略的例子如下：

开发人员 A 进行多次提交并将它们推送到服务器。然后，开发人员 B 将这些提交合并到他们的本地分支（或可能来自这些提交之一的分支）。开发人员 A 决定重新调整他们的旧提交并将结果推送到服务器。

这有效地从开发人员 B 正在使用的服务器中删除提交，并将它们替换为具有不同标识符的大致相同的提交。

现在，如果开发人员 B 再次从服务器下拉，他们需要将 post-rebase 提交合并到他们的工作中，有效地合并两次相同的更改。

如果开发人员 A 在 rebase 过程中删除了提交或修改了提交，那么开发人员 B 需要处理更复杂的合并。

# mysql - MySQL 默认程序

> ID：11149502
> 
> 赞同：1
> 
> 时间：2012-06-22T02:35:42.883
> 
> 标签：mysql

[默认情况下， ANALYZE](http://dev.mysql.com/doc/refman/4.1/en/procedure-analyse.html)是MySQL 5+ 附带的唯一程序吗？

例如：

```
select * from mysql.user limit 1 PROCEDURE ANALYSE() 
```

[sqlfiddle 示例](http://sqlfiddle.com/#!2/a2581/1280)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:21:29.463

我100%确定它是唯一的，是的。不幸的是，我找不到我在哪里读到它。

**更新**：

请参阅[此处](http://www.rbcafe.com/Softwares/MySQL/extending-mysql.html#adding-procedures)和源代码。该`ANALYSE()`过程更像是可以做什么的示例。

> ANALYSE() 在 sql/sql_analysis.cc 源文件中定义，该文件用作如何创建用于 SELECT 语句的 PROCEDURE 子句的过程的示例。ANALYSE() 是内置的，默认可用；可以使用源文件中演示的格式创建其他程序。

在源代码中没有找到更多的过程，所以我仍然声明只有这个。

# ios - CALayer frame.size 不等于 bounds.size

> ID：11149510
> 
> 赞同：3
> 
> 时间：2012-06-22T02:37:03.640
> 
> 标签：ios, frame, calayer, bounds

我在CALayer上遇到了一些奇怪的事情。最后发现CALayer的frame.size不等于它的bounds.size，我无法理解。我知道frame在super的坐标系中，bounds是它自己的坐标，并且通常的情况是 frame.origin 不等于 bounds.origin 但 frame.size 等于 bounds.size。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T05:01:11.677

那是因为您应用了变换，正如苹果在 frame 属性的文档中所说的那样。

> 警告 如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。

...

> 对此属性的更改可以设置动画。但是，如果 transform 属性包含非恒等变换，则 frame 属性的值是未定义的，不应修改。在这种情况下，您可以使用 center 属性重新定位视图并使用 bounds 属性调整大小。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)

如果您没有应用变换，则原点可能不同，但大小应保持不变，因为调整一个重新调整另一个。

> 边界矩形的大小与框架矩形的大小相关联，因此对一个矩形的更改会影响另一个。

# wpf - 文本块的 WPF 验证

> ID：11149517
> 
> 赞同：0
> 
> 时间：2012-06-22T02:38:12.447
> 
> 标签：wpf, xaml

只是制作一个 WPF 桌面应用程序。我正在使用各种验证。在 TextBox 中，如果我使用，NotifyOnValidationError=True,ValidatesOnDataErrors=True,ValidatesOnExceptions=True 它工作正常。但是在 TextBlock 中，如果我使用相同的东西，整个块都会用红色符号突出显示......我只想要一个 excla。（！）标记`NotifyOnValidationError=True,ValidatesOnDataErrors=True,ValidatesOnExceptions=True`... 我应该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:47:05.070

如果您想覆盖在 Validation 类中定义的默认错误模板，您可以简单地定义一个 ControlTemplate 并将其分配给 TextBlock`Validation.ErrorTemplate`附加属性。

```
<TextBlock
Validation.ErrorTemplate="{StaticResource TextBlockErrorTemplate}">     
<TextBlock> 
```

在资源字典中，您可以定义一个错误模板，如下所示：

```
 <ControlTemplate x:Key="TextBlockErrorTemplate">
            <DockPanel LastChildFill="True">
                <TextBlock DockPanel.Dock="Right"
                           Foreground="Red"
                           FontSize="14pt"
                           Margin="-15,0,0,0"
                           FontWeight="Bold">!
                </TextBlock>
                <AdornedElementPlaceholder Name="controlWithError" />
            </DockPanel>
        </ControlTemplate> 
```

# .net - 在 Excel 中实现监控“应用程序”

> ID：11149521
> 
> 赞同：0
> 
> 时间：2012-06-22T02:38:53.713
> 
> 标签：.net, vba, excel, ms-office, monitoring

我需要在 Excel 中实现一个简单的监控应用程序。它用于监控一个大约 15 人的小团队。领导者有一个“中央”excel 文件，他可以在其中浏览每个团队成员和整个团队的进度，而每个团队成员都有自己的 Excel 文档，他们可以在其中报告他们的个人进度，并“同步”到领导的文件。

我将它实现为一个 PHP Web 应用程序，但我需要使用 Excel 来实现它，而且我对 Microsoft 产品没有太多经验。我真的不知道如何同步所有内容。是否有一个简单的 Microsoft 服务器具有允许这样做的 API？

也许 Excel 不是正确的选择，如果是这样，您会推荐其他 Microsoft 产品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:57:06.180

1.  可以在Excel中完成吗？- 是的
2.  如何？- 使用共享 Excel 文件
3.  推荐吗？- 不
4.  替代方案 - 如果您想从 Excel 执行此操作，则使用 E​​xcel 作为前端，Access 作为后端。否则在 Access 中创建所有内容。

共享 Excel 文件一直不受欢迎。它被认为是破坏文件的最快方法，因此从不推荐。

现在正在寻找替代方案。

如果您想在 Excel 中执行此操作，则可以设计一个通用输入 Excel 文件，您将分发给您的团队。当他们通过点击“更新”按钮进行更新时，数据就会更新到`Common Access Database`存储在共享驱动器中的数据中。这些数据，您可以通过再次按下主工作簿中的按钮来提取它。

就像我上面提到的，您也可以选择在 Access 中创建所有内容。如果您希望将其作为一个选项，那么您将不得不等待 Access Experts 来帮助您:)

如果您正在寻找一个复杂的日常应用程序，那么您也可以使用 Visual Studio，它可以使用 VB.Net/C# 等作为前端，并在后端使用 Access/SQL/MySQL/Oracle 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:09:27.803

如果你在一个域上，这实际上并不难。

为每个团队成员创建一个工作簿（这是一个单独的 .xls）文件。使用密码保护工作簿，使其不易被编辑。然后，对于每个团队成员的工作簿，授予相应的团队成员编辑适当范围的权限。

[http://office.microsoft.com/en-us/excel-help/help-secure-and-protect-data-in-excel-RZ001123531.aspx?section=15](http://office.microsoft.com/en-us/excel-help/help-secure-and-protect-data-in-excel-RZ001123531.aspx?section=15)

现在，为自己创建一个工作簿并创建查询每个团队成员的工作簿（称为“外部引用”）并构建摘要的公式。

[http://office.microsoft.com/en-us/excel-help/create-an-external-reference-link-to-a-cell-range-in-another-workbook-HP010102338.aspx](http://office.microsoft.com/en-us/excel-help/create-an-external-reference-link-to-a-cell-range-in-another-workbook-HP010102338.aspx)

你去...设置相对较快，良好一致的界面对于团队成员来说不太容易搞砸并且查询起来相当简单。

这不会是一个完美的解决方案，并且会引起一些头痛，但这是权衡，对吗？

# jquery - jQuery ajax 成功在 codeigniter 中不起作用

> ID：11149522
> 
> 赞同：0
> 
> 时间：2012-06-22T02:39:04.040
> 
> 标签：jquery, ajax, codeigniter

我在使用 ajax 时遇到了问题。诀窍是，当用户单击顶部超链接时，它将通过 onclick=getChildMenuLink(str) 发送链接 id。然后从 getChildMenuLink(str) 函数，它将 str 通过 ajax 发送到控制器（设置会话）。这是代码。

html代码

```
<a href="http://localhost/ejournal/index.php/sysconfig" onclick="getChildMenuLink(1)">Administrator</a>

<a href="http://localhost/ejournal/index.php/welcome" onclick="getChildMenuLink(22)">Home</a> 
```

jQuery ajax

```
function getChildMenuLink(str) {
        'use strict';

        $.ajax({
            type: 'POST',
            url: "http://localhost/ejournal/index.php/sysconfig/getLink/" + str,
            success: function () {} // End of success function of ajax form           
        });  // End of ajax call

        //alert(document.URL);    
    } 
```

代码点火器控制器

```
function getLink($id='')
{
    $this->session->unset_userdata('parentLink'); 
    $this->session->set_userdata('parentLink',$id);
} 
```

如果我取消注释该脚本上的 alert() 函数，它就可以工作。PHP会话设置正确。请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:47:40.677

一个问题是在你的 ajax 调用中你有`success: loadUrl()`. 这可能不是您的意思；后面的值`success`是一个函数，但`loadUrl()`不是函数，它是对函数的调用。（我说的可能不是你想要的，因为唯一可行的情况是 if`loadUrl`是一个返回函数的函数。）

可能你真正想要的是

```
success: loadUrl 
```

（没有括号）或者，也许更明确地说，

```
success: function() { loadUrl(); } 
```

编辑添加：

好吧，显然不是这样。接下来要尝试：除了你的成功回调之外，添加一个错误回调，这样我们就可以看到是否有错误发生：

```
 $.ajax({
        type: 'POST',
        url: "http://localhost/ejournal/index.php/sysconfig/getLink/" + str,
        success: function () {alert("success!")},
        error: function(jqXHR, textStatus, errorThrown) { alert(textStatus + " " + errorThrown) }           
    }); 
```

# .htaccess - symfony2 重写规则 .htaccess app.php

> ID：11149526
> 
> 赞同：45
> 
> 时间：2012-06-22T02:39:22.730
> 
> 标签：.htaccess, symfony, mod-rewrite

我将我的 symfony2 项目上传到服务器 grove。主页加载，但所有链接都已损坏。我尝试将 app.php 添加到网址。它确实有效，但是：

我有这样的路线：

www.something.com/app.php/something

我希望他们成为：

www.something.com/something。

我一直在阅读，我应该在.htaccess 上设置一些重写规则。

我找到了这些规则，但它们似乎不起作用：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-22T02:46:51.707

在你的 .htaccess 文件中试试这个（在 web 目录中）：

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On

    # Explicitly disable rewriting for front controllers
    RewriteRule ^app_dev.php - [L]
    RewriteRule ^app.php - [L]

    RewriteCond %{REQUEST_FILENAME} !-f

    # Change below before deploying to production
    #RewriteRule ^(.*)$ /app.php [QSA,L]
    RewriteRule ^(.*)$ /app_dev.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-30T23:05:27.913

为了改进 whistlergreg 的回答，我添加了一行，这样 bundles 文件夹就不会被破坏。这将确保图像等外部资源不会被破坏。

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On

    # Explicitly disable rewriting for front controllers
    RewriteRule ^/web/app_dev.php - [L]
    RewriteRule ^/web/app.php - [L]

    # Fix the bundles folder
    RewriteRule ^bundles/(.*)$ /web/bundles/$1  [QSA,L]

    RewriteCond %{REQUEST_FILENAME} !-f
    # Change below before deploying to production
    #RewriteRule ^(.*)$ /web/app.php [QSA,L]
    RewriteRule ^(.*)$ /web/app_dev.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-09T11:37:42.647

您没有启用重写模块。如果启用了 mod_rewrite.c，则执行此代码。您只能在 apache2 中启用 mod_rewrite。 [http://www.unixmen.com/how-to-enable-and-disable-apache-modules/](http://www.unixmen.com/how-to-enable-and-disable-apache-modules/)

例如在 Ubuntu 中：

```
sudo a2enmod rewrite
sudo service apache2 restart 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-10T09:59:30.243

此外，...记得取消注释（如果已注释）apache 配置：

`LoadModule rewrite_module libexec/apache2/mod_rewrite.so`

## macOSX

`/private/etc/apache2/httpd.conf`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-31T07:01:42.290

您可以尝试提供资产的完整路径（完整网址）。当我部署我的第一个 symfony 应用程序时，我遇到了同样的问题

我的根目录（大多数情况下是 public_html 文件夹）.htaccess 文件看起来像这样

```
Options +FollowSymLinks +ExecCGI

RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com$ [NC]
RewriteRule !^projectName/ /projectName/web/app.php/%{REQUEST_URI} [L,NC] 
```

# oracle10g - Oracle：如何防止重新输入现有 id ？

> ID：11149527
> 
> 赞同：0
> 
> 时间：2012-06-22T02:39:42.203
> 
> 标签：oracle10g

我有一列用于插入*未声明为主键的 ID，但我必须防止重复输入任何 ID。* **如何查找一个ID是否已经插入到oracle数据库中？如果 db 中已经存在 ID，则用户无法重新输入 ID。** 我该怎么做？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T02:41:37.170

在列上创建唯一约束。

# flash - 如何使对象在游戏板动作脚本中移动

> ID：11149532
> 
> 赞同：0
> 
> 时间：2012-06-22T02:40:35.210
> 
> 标签：flash, actionscript

如何使用动作脚本使对象在游戏板中移动？我正在使用数组和 x&y 轴。但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T02:45:28.213

您需要指定数组包含的内容以及设置位置的方式。对于从 flash.display.DisplayObject 继承的对象，设置它们的 x 和 y 属性就足够了。

例如：

```
var num:MovieClip; //get it from somewhere -
....
num.x = 20;
num.y = 20;
addChild(num); 
```

# linux - 在 linux 中访问 i2c：/dev/ vs /sys/class

> ID：11149533
> 
> 赞同：2
> 
> 时间：2012-06-22T02:40:42.430
> 
> 标签：linux, embedded, linux-device-driver, embedded-linux, i2c

您好，我是一名新手嵌入式 linux 工程师，仍在学习中。

我之前从事过一个项目，我必须使用 i2c 总线来访问外围设备。我只是通过使用 /dev/i2c-1 设备文件来做到这一点。

我现在在一个新项目中，客户似乎根本没有使用 /dev/ 目录来做任何事情。当我看到 /dev/i2c-1 不存在时，我认为内核不是使用 i2c 支持构建的。我问了客户，他们将我指向目录 /sys/class/i2c-dev/i2c-1/。

我不明白这与 /dev/ 文件有何不同，为什么他们选择这样做，或者我如何使用它。

这是一个相对开放的问题。我想我正在寻找上述问题的答案，并且可能会指向一些可以扩大我的理解的文档。

# css - 确保内容位于视口中

> ID：11149537
> 
> 赞同：2
> 
> 时间：2012-06-22T02:40:59.880
> 
> 标签：css, html, positioning

我正在尝试设计一个适用于许多不同类型显示尺寸的页面。现在我有一个重要的内容（基本上是一个显示当前状态的小矩形），它绝对位于一个相对定位的容器内。当页面加载到具有大屏幕的设备中时，这会提供所需的行为：内容显示在预期位置的“首屏”（无需滚动）。

对于具有小屏幕的设备（或者，我认为是未最大化的浏览器），以便该框出现在第一个屏幕之外，我希望该框显示在页面底部，直到用户向下滚动到足够远将盒子返回到其正常位置，此时它应该恢复该位置。（是的，如果用户向下滚动足够远，它应该滚动到页面顶部。）

我以前见过这种动态效果，所以这绝对是可能的。[（在http://googleblog.blogspot.com/](http://googleblog.blogspot.com/)上使用了一些不完全不同的东西。）但是它是如何完成的呢？我认为没有使用 Javascript，尽管我可能是错的。

显然，媒体查询不会获得所需的行为，因为这可能会给它一个固定的位置，但不会以所需的方式转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:09:02.593

可以肯定的是，如果没有 javascript，这将无法完成，而且一点 jQuery 也不会受到伤害！

我会大致这样做。

```
<div id="box"></div>

$(window).bind('scroll', function() {

    if($('#box').position().top >= $(window).height()) {    // if box is outside window do this
        // position box inside window
        $('#box').css({ top: /* pixels go here */ });
    } else if(/* box is inside window */) {

    }

}); 
```

# android - Android：如何在 WordPress 中开发像 feed.nu 这样的插件？

> ID：11149538
> 
> 赞同：0
> 
> 时间：2012-06-22T02:41:13.787
> 
> 标签：android, wordpress, apk

feed.nu 插件从我们的博客生成 APK(Android) 文件，我们可以在 android 上使用

我打算编写一个 wordpress 插件，将我们的博客转换成一个 APK 文件，我们可以安装在我们的 Android 设备或模拟器中。我对 Android 完全陌生，但我之前做过一个 wordpress 插件。这个 feed.nu 是一个以相同方式工作的插件。我刚刚学会了如何在 Android 模拟器中运行 APK 文件。那么，我该如何编写这样的插件呢？我应该从哪里开始？我需要了解如何开发 Android 应用程序吗？你能简单地告诉我如何编写我的插件吗？

如有必要，将提供更多详细信息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:26:33.777

我是 feed.nu 的作者，通过谷歌搜索自己发现了这个问题 :)

用简短的回答回答您的问题... A. 是的，您需要学习 android 开发 B. 带有 php 的 Wordpress 不足以编译 android 应用程序。Feed.nu 正在使用外部构建服务器来编译应用程序。

我正在做一些其他的项目，女巫几乎做的事情。如果您有兴趣成为其中的一员，请给我发消息 :)

# android - Android：当用户触摸外部搜索时如何刷新屏幕？

> ID：11149540
> 
> 赞同：0
> 
> 时间：2012-06-22T02:41:21.160
> 
> 标签：android, mobile

我需要知道如何检测用户触摸外部搜索。重现步骤：

点击搜索图标。这会打开标准搜索对话框。触摸外部搜索对话框。我需要detech吗？为什么？因为我有一个在搜索过程中被替换的标题。我在搜索过程中隐藏它，但在外部搜索时我需要恢复我的其他标题。那么如何检测搜索对话框之外的操作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:01:06.767

添加一个`TouchListener`到你的整体`View`：

```
final View touchView = findViewById(R.id.touchView);
    touchView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
               if(event.getX() == x && event.getY() == y) // x and y are within the search box
               {
                  //you clicked inside the search box,do nothing
               }
               if(event.getX() == outsideSearchBox && event.getY() == outsideSearchBox)
               {
                   //do your stuff
               }  
               return true;
        }
    }); 
```

你只需要确定你的搜索框所在的坐标，然后你就可以应用上面的逻辑了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T02:07:56.223

有一个可以使用 SearchManager 注册的 onDismiss 侦听器。这会告诉您搜索对话框何时关闭。所以我在我的活动中实现了 onDismiss() 方法。在创建中，我使用 ServiceManager 将我的活动注册为 OnDismiss 侦听器。它工作正常。

# git - 获取 Git 存储库的最后一次提交

> ID：11149541
> 
> 赞同：8
> 
> 时间：2012-06-22T02:41:23.760
> 
> 标签：git, githooks, git-log

我有一个中央 Git 裸存储库。当对该仓库进行推送时，我想运行一个接收后挂钩。该钩子将做的是在 Basecamp 项目上创建一条消息（使用他们的 API）。我想要有关刚刚执行的更新的信息。现在我认为`git log -2 --stat`已经足够好了，但想要更多信息（更新的分支、创建的文件、删除的文件）。任何人都可以帮助我获取所有信息所需的命令吗？执行多个命令对我来说很好，可能没有一个命令可以让我获得所有信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T05:45:25.887

您可以通过检查和排序下的文件来找到最新的提交`.git/refs/heads`：每次进行新的提交时，相应的`refs/heads`文件都会更改，即提交到时`master`，`refs/heads/master`会更新。

所以，让我们开发一个解决方案。

**第一个任务：**找到所有分支（即下的所有文件`refs/heads`并在它们最后一次更改时打印出来。你在谈论钩子，所以我们给出相对于`.git/hooks`目录的路径：

```
find ../refs/heads -type f -printf '%T@ %p\n' 
```

这将生成所有分支及其更改日期的列表。有关参数的说明，请参见[手册页。`find`](http://linux.die.net/man/1/find)

**第二个任务：**对得到的列表进行排序

```
find ../refs/heads -type f -printf '%T@ %p\n' |\
sort 
```

**第三个任务：**我们需要该列表中的最新元素。由于`sort`从旧到新排序，我们想要的项目位于列表的底部。获取此元素`tail`（只有一项，因此传递`-1`标志）：

```
find ../refs/heads -type f -printf '%T@ %p\n' |\
sort    |\
tail -1 
```

**第四项任务：**在获得的行中删除日期。从我们的`printf`声明中我们知道日期和路径用空格分隔。将此作为分隔符输入`cut`( `-d " "`) 并告诉它我们需要第二个字段（即文件路径，`-f 2`）。为方便起见，我们将此文件路径存储在一个名为 的变量中`$LATESTHEAD`：

```
LATESTHEAD=$(\
    find ../refs/heads -type f -printf '%T@ %p\n' |\
    sort    |\
    tail -1 |\
    cut -d ' ' -f 2 ) 
```

**第五项任务：**现在我们知道文件名，但我们需要内容。这是可以传递给`git log`. `cat`做这项工作。将最新版本存储在`$LATESTREV`

```
LATESTHEAD=$(\
    find ../refs/heads -type f -printf '%T@ %p\n' |\
    sort    |\
    tail -1 |\
    cut -d ' ' -f 2 )
LATESTREV=$(cat $LATESTHEAD) 
```

现在，你可以`$LATESTREV`用来做任何你想做的脏事。

也许不是最优雅的解决方案（可能有人会过来告诉你一个更简单的单行），但对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T06:05:06.817

添加`--summary`到您的 git 日志将生成新的和已删除的文件列表（git 将它们称为“节点”）：

```
git log --stat --summary -1 
```

要获取分支，请尝试运行：

```
git branch --contains `git log --oneline -1 |cut -f1 -d\ ` |cut -b3- 
```

注意：我正在我的 mac 上测试这个。Unix`cut`是 1 索引，但我相信 Debian`cut`是 0 索引。如果是这样，并且如果您在 Debian 机器上，请更改`-f1`为`-f0`并且分支命令应该可以正常工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T13:19:51.887

如果没有具体原因使用`post-receive`，我宁愿建议使用`update`，它将旧 ref、新 ref 和分支作为命令行参数。

`git log`因此，您可以使用此处建议的命令并`oldref..newref`作为参数给出（分别替换`oldref`和）来获取整个日志`newref`。

有关更多信息，请参阅[更新挂钩上的 githooks(5) 手册页](https://www.kernel.org/pub/software/scm/git/docs/githooks.html#update)。如果需要，您甚至可以在此时中止更新。

`post-receive`实际上，您在标准输入的钩子中获得了相同的信息。我不明白为什么您需要执行大量`find`命令来完成该任务。

# c# - 当容器大小改变时重新分配容器中的精灵

> ID：11149543
> 
> 赞同：1
> 
> 时间：2012-06-22T02:41:52.907
> 
> 标签：c#, wpf, transform, frameworkelement

我在 WPF 中遇到问题。我想重新分配容器中的小精灵以响应其大小的变化。

如果我对容器应用渲染或布局变换，精灵的形状会随着它们的位置一起变换（例如，圆形变成椭圆，线条变得更粗/更细）。

除了遍历容器的所有孩子并更新它们的位置之外，有没有办法以任何其他方式自动重新分配精灵？

（我有 A，并且想去 C 以响应容器大小的变化。可以使用转换获得 B。）

![在此处输入图像描述](../Images/1d09861a5fed9f79e7b4baf6acd7d2a8.png)

# c# - 构建对象图时的简单注入器集属性

> ID：11149552
> 
> 赞同：1
> 
> 时间：2012-06-22T02:42:52.850
> 
> 标签：c#, .net, design-patterns, dependency-injection, simple-injector

使用[Simple Injector](http://simpleinjector.codeplex.com/)我在记录器中遇到了一个共同的主题，我在记录器注入到的服务对象的构造函数中设置记录器名称。当服务写入日志时，可以通过此日志名轻松识别。

由于`LogNames`将为每个服务设置，因此每个对象图请求的记录器应该是唯一的。

我想在构建图表时自动执行此操作，我已经四处寻找，`ExpressionBuilt()`但我正在努力，但还没有得到我想要的工作 - 这甚至可能（或者想做的事情）？

我的构造函数代码如下（此`LogName`属性设置代码在我的大多数服务中都很常见）。

谢谢，

克里斯

```
public interface ILogger
{
    void LogMessage(string message, LogLevel level,
        ILoggableCompany company = null);

    string LogName {get; set; }
}

public BusinessUnitService
{
    private readonly IUnitOfWork unitOfWork;
    private readonly ILogger logger;

    public BusinessUnitService(IUnitOfWork unitOfWork, 
        ILogger logger)
    {
        this.unitOfWork = unitOfWork;
        this.logger = logger;

        // it would be great if we could take away this 
        // line and set it automatically
        this.logger.LogName = this.GetType().ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:33:22.677

这个设计看起来有点像`Logger<T>`log4net 的设计，`T`记录器创建的类将在哪里。虽然我无法查看您的设计，但我想知道：[您是不是记录太多？](https://stackoverflow.com/a/9915056/264697)

如果你真的需要这样做，至少`LogName`从界面中删除该属性`ILogger`，因为它在那里没有业务。这意味着您必须从构造函数中删除设置此属性的代码，这绝对没问题，因为这是到处重复的代码。

您正在尝试做的是基于上下文的注入，这不是开箱即用的支持，但是 Simple Injector wiki 包含一个[Context Bases Injection 部分](http://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios#Context_Based_Injection)，该部分解释了如何添加此支持。该文档页面甚至使用了一个`Logger<T>`示例:-)

使用wiki 引用[的扩展方法](http://simpleinjector.codeplex.com/wikipage?title=ContextDependentExtensions)，您可以执行以下操作：

```
public interface ILogger
{
    void LogMessage(string message, LogLevel level,
        ILoggableCompany company = null);

    // No LogName property here. Keep it clean.
}

public class LoggerImpl : ILogger
{
    public void LogMessage(string message, 
        LogLevel level, ILoggableCompany company)
    {
       // implementation
    }

    // Property only part of the implementation.
    public string LogName {get; set; }
}

// The parent contains information about the type in 
// which ILogger is injected.
container.RegisterWithContext<ILogger>(parent =>
{
    // Retrieve a new LoggerImpl instance from the container 
    // to allow this type to be auto-wired.
    var logger = container.GetInstance<LoggerImpl>();

    // ImplementationType is null when ILogger is
    // requested directly (using GetInstance<ILogger>())
    // since it will have no parent in that case.
    if (parent.ImplementationType != null)
    {
        // Set the LogName with the name of the class 
        // it is injected into.
        logger.LogName = parent.ImplementationType.Name;
    }

    return logger;
});

// Register the LoggerImpl as transient. This line is
// in fact redundant in Simple Injector, but it is important
// to not accidentally register this type with another
// lifestyle, since the previous registration depends on it
// to be transient.
container.Register<LoggerImpl>(); 
```

因为这通过挂钩`BuiltExpression`事件和重新连接表达式来工作，以这种方式解析实例几乎与使用`Func<T>`工厂方法注册一样快。

# javascript - Javascript：如何以毫秒计算一天的开始？

> ID：11149555
> 
> 赞同：8
> 
> 时间：2012-06-22T02:43:35.343
> 
> 标签：javascript, date, time, milliseconds

我想计算出从一天开始的时间，以毫秒为单位。

所以说我得到了这个：1340323100024，就像 2012 年 6 月 21 日的中午。现在我想要从一天开始的毫秒数，这将是 1340262000000 （至少我认为这是应该的。）

我如何从 1340323100024 获得 1340262000000？

我试着做

```
Math.floor(1340323100024/86400000) * 86400000 
```

但这给了我 1340236800000，如果我从中创建一个日期对象，则表示它是 20 号。

我知道我可以从 1340323100024 创建一个日期对象，然后获取月、年和日期，以创建一个新对象，它会给我 1340262000000，但我觉得这很荒谬，我无法弄清楚这么简单的事情。

任何帮助，将不胜感激。

顺便说一句，如果有任何区别，我会在 javascript 中执行此操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T02:57:10.300

我同意 Thilo（本地化到时区），但我可能会这样处理：

```
// Original: Thu Jun 21 2012 19:58:20 GMT-0400 (Eastern Daylight Time)
var ms = 1340323100024;
var msPerDay = 86400 * 1000;
var beginning = ms - (ms % msPerDay);
// Result:    Wed Jun 20 2012 20:00:00 GMT-0400 (Eastern Daylight Time) 
```

或者，如果您愿意：

```
Number.prototype.StartOfDayMilliseconds = function(){
  return this - (this % (86400 * 1000));
}

var ms = 1340323100024;
alert(ms.StartOfDayMilliseconds()); 
```

**编辑**

如果您特别关注时区，可以使用：

```
// Original: Thu Jun 21 2012 19:58:20 GMT-0400 (Eastern Daylight Time)
var ms = 1340323100024;
var msPerDay = 86400 * 1000;
var beginning = ms - (ms % msPerDay);
    beginning += ((new Date).getTimezoneOffset() * 60 * 1000);
// Result:    Thu Jun 21 2012 00:00:00 GMT-0400 (Eastern Daylight Time) 
```

请注意，现在删除了偏移量，因此前一天晚上 8 点变成时间戳上实际日期的午夜。您也可以（取决于实现）在您对一天开始的取模之前或之后进行加法 - 您的偏好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-13T10:41:28.953

```
var d = new Date();
var date = d.toISOString().split("T")[0];
var date_ms = new Date(date).getTime(); 
```

或一行答案

```
console.log(new Date(new Date().toISOString().split("T")[0]).getTime()); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-09-06T16:01:34.457

实际上，应该是`(currTimeMilli - 18000000) % 864000000`获取 GMT+5 从一天开始的毫秒数。

# c# - App.Config 更改值

> ID：11149556
> 
> 赞同：44
> 
> 时间：2012-06-22T02:43:36.633
> 
> 标签：c#, app-config

这是我的 App.Config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="lang" value="English"/>
  </appSettings>
</configuration> 
```

使用此代码，我进行了更改

```
lang = "Russian";
private void Main_FormClosing(object sender, FormClosingEventArgs e)
{
     System.Configuration.ConfigurationManager.AppSettings.Set("lang", lang);
} 
```

但它不会改变。我做错了什么？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-22T02:49:28.430

`AppSettings.Set`不会将更改保留到您的配置文件。它只是在内存中改变它。如果你在 上设置一个断点`System.Configuration.ConfigurationManager.AppSettings.Set("lang", lang);`，并为你添加一个手表，`System.Configuration.ConfigurationManager.AppSettings[0]`当那行代码运行时，你会看到它从“English”变为“Russian”。

以下代码（在控制台应用程序中使用）将保留更改。

```
class Program
{
    static void Main(string[] args)
    {
        UpdateSetting("lang", "Russian");
    }

    private static void UpdateSetting(string key, string value)
    {
        Configuration configuration = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        configuration.AppSettings.Settings[key].Value = value;
        configuration.Save();

        ConfigurationManager.RefreshSection("appSettings");
    }
} 
```

**从这篇文章：http:** [//vbcity.com/forums/t/152772.aspx](http://vbcity.com/forums/t/152772.aspx)

> 上面要注意的一点是，如果您从调试器（在 Visual Studio 中）运行它，那么每次构建时都会覆盖 app.config 文件。最好的测试方法是构建您的应用程序，然后导航到输出目录并从那里启动您的可执行文件。在输出目录中，您还将找到一个名为 YourApplicationName.exe.config 的文件，它是您的配置文件。在记事本中打开它以查看更改实际上已保存。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-06-22T02:46:33.160

您不能为此使用 AppSettings 静态对象。试试这个

```
string appPath = System.IO.Path.GetDirectoryName(Reflection.Assembly.GetExecutingAssembly().Location);          
string configFile = System.IO.Path.Combine(appPath, "App.config");
ExeConfigurationFileMap configFileMap = new ExeConfigurationFileMap();         
configFileMap.ExeConfigFilename = configFile;          
System.Configuration.Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configFileMap, ConfigurationUserLevel.None);

config.AppSettings.Settings["YourThing"].Value = "New Value"; 
config.Save(); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-02-12T03:06:02.057

当使用“ **ConfigurationUserLevel.None** ”时，当您单击调试文件夹中的 nameyourapp.exe 时，您的代码会正确运行。.
但是当你在视觉标准输出上开发应用程序时运行不正确！因为“vshost.exe”正在运行。

以下参数解决了这个问题：“ **Application.ExecutablePath** ”

***试试这个：（在 VS 2012 Express For Desktop 中测试）***

```
Configuration config = ConfigurationManager.OpenExeConfiguration(Application.ExecutablePath);
config.AppSettings.Settings["PortName"].Value = "com3";
config.Save(ConfigurationSaveMode.Minimal); 
```

**我的英语不好，对不起。**

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-27T11:34:40.027

这在 WPF 应用程序中对我有用：

```
string configPath = Path.Combine(System.Environment.CurrentDirectory, "YourApplication.exe");
Configuration config = ConfigurationManager.OpenExeConfiguration(configPath);
config.AppSettings.Settings["currentLanguage"].Value = "En";
config.Save(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-12T10:57:02.263

```
 private static string GetSetting(string key)
    {
        return ConfigurationManager.AppSettings[key];
    }

    private static void SetSetting(string key, string value)
    {
        Configuration configuration =
            ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        configuration.AppSettings.Settings[key].Value = value;
        configuration.Save(ConfigurationSaveMode.Full, true);
        ConfigurationManager.RefreshSection("appSettings");
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-18T10:38:47.987

除了 fenix2222 的答案（对我有用）之外，我还必须将最后一行修改为：

```
config.Save(ConfigurationSaveMode.Modified); 
```

没有这个，新值仍被写入配置文件，但在调试时会检索旧值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-07-28T11:24:08.213

对于 .NET 4.0 控制台应用程序，这些都不适合我。所以我修改了 Kevn Aenmey 的答案，如下所示：

```
private static void UpdateSetting(string key, string value)
{
    Configuration configuration = ConfigurationManager.
        OpenExeConfiguration(Assembly.GetExecutingAssembly().Location);
    configuration.AppSettings.Settings[key].Value = value;
    configuration.Save();

    ConfigurationManager.RefreshSection("appSettings");
} 
```

只有第一行不同，根据实际执行的程序集构建。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-20T23:12:06.330

感谢 Jahmic 的回答。为我正常工作。

另一个有用的代码片段，它读取值并返回一个字符串：

```
public static string ReadSetting(string key)
    {
        System.Configuration.Configuration cfg = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        System.Configuration.AppSettingsSection appSettings = (System.Configuration.AppSettingsSection)cfg.GetSection("appSettings");
        return appSettings.Settings[key].Value;

    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-18T01:39:55.000

要更新 以外的条目`appsettings`，只需使用`XmlDocument`.

```
public static void UpdateAppConfig(string tagName, string attributeName, string value)
{
    var doc = new XmlDocument();
    doc.Load(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile);
    var tags = doc.GetElementsByTagName(tagName);
    foreach (XmlNode item in tags)
    {
        var attribute = item.Attributes[attributeName];
        if (!ReferenceEquals(null, attribute))
            attribute.Value = value;
    }
    doc.Save(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile);
} 
```

这就是你所说的：

```
Utility.UpdateAppConfig("endpoint", "address", "http://localhost:19092/NotificationSvc/Notification.svc");

Utility.UpdateAppConfig("network", "host", "abc.com.au"); 
```

可以改进此方法以适应 appSettings 值。

# php - PHP 从 Socket 获取可用字节

> ID：11149557
> 
> 赞同：3
> 
> 时间：2012-06-22T02:44:25.567
> 
> 标签：php, sockets

所以我一直在编写这个工具，并且我正在使用这些[Sockets](http://php.net/manual/en/book.sockets.php)（不是[这些](http://www.php.net/manual/en/function.fsockopen.php)）以及与它们的区别，我推测第二个使用严格基于流的套接字。问题是您不能在我正在使用的套接字上使用[socket_get_status 。](http://php.net/manual/en/function.socket-get-status.php)

[除了socket_get_status](http://php.net/manual/en/function.socket-get-status.php)之外，还有其他方法可以获取可用字节的数量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:36:28.470

从返回的流`fsockopen()`是围绕常规套接字的托管包装器；未读字节（这可能是您想要的）是`read()`套接字上（由包装器本身制作）和`fread()`包装器上（由您的脚本制作）之间的差异。

包装器读取 8192 字节的块，但`fread()`or`fgets()`可能不会一次读取所有数据，这就是`unread`您可以查询元数据字段的原因；这是否有用是另一回事;-)

使用常规套接字时，您可以：

*   用于`socket_select()`等待数据可用，后跟适当大的`socket_read()`
*   用于`socket_set_nonblock()`使套接字畅通并尝试从中读取

# iphone - 从 CGFloat 中减去

> ID：11149560
> 
> 赞同：2
> 
> 时间：2012-06-22T02:45:01.970
> 
> 标签：iphone, ios, floating-point, cgfloat

```
NSLog(@"original float value = %f", [anNSNumber floatValue]);

float newFloat = [anNSNumber floatValue] - 1.0f;

NSLog(@"newFloat = %f", newFloat); 
```

给我

> 原始浮点值 = 215987480044765184.000000
> 
> newFloat = 215987480044765184.000000

你如何简单地从 a 中减去 1 `float`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T02:46:27.587

不，你不能进一步简化它。浮点数不同于整数。

另一件需要注意的事情是该`float`类型最多只能包含 24 位精度（大约 6-7 位精度的十进制数字）。您那里的数字超过了可用的精度`float`，并且减法量太小而不会影响24位精度，因此操作根本**不会对结果进行任何更改**。

即使您在 中进行操作，问题也无法解决`double`，因为该数字甚至超过了 53 位精度`double`。

根据您的要求，您可能需要 64 位整数类型（`long long`类型或更具体`int64_t`）。如果更大的数字需要这样的精度，那么基本类型是不够的。如果您需要非常高的精度，则可能需要外部库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:50:58.600

为什么你的第三行有： NSLog(@"newFloat = %f", **idOfLastTweet** ); 而不是 NSLog(@"newFloat = %f", **newFloat** ); ?

# ruby-on-rails - 有效的默认范围

> ID：11149562
> 
> 赞同：0
> 
> 时间：2012-06-22T02:45:14.857
> 
> 标签：ruby-on-rails, ruby, math, set, switch-statement

我想为一组范围设置默认值。

这是我的默认值：

```
options = {0: 'red',  20: 'yellow', 50: 'blue', 80: 'green'} 
```

这是我的论点

```
value = 10 
```

我如何有效地创建这个：

```
case value
when value < 10
  'red'
when value < 20
  'yellow'
when value < 50
  'blue'
when value < 80
  'gold'
else
  'green' 
```

来自对象/哈希数据类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T03:03:39.617

在 ruby​​ 案例中，语句可以采用范围。其实还是蛮甜的...

```
color = case value
        when (0...10)
          'red'
        when (10...20)
          'yellow'
        when (20...30)
          'blue'
        when (30...40)
          'gold'
        else
         'green' 
```

# android - android的预测文本实现

> ID：11149566
> 
> 赞同：1
> 
> 时间：2012-06-22T02:46:18.617
> 
> 标签：android, android-layout, android-intent, android-widget

我想为用户在 android 内置应用程序（如短信、联系人）中键入时自动完成单词提供预测文本。但我不想使用 android 提供的字典功能。我有字典，我想为用户提供该字典中的预测词。那么我怎样才能让我的字典对用户可用。

# android - android 视图中的更新列表

> ID：11149571
> 
> 赞同：0
> 
> 时间：2012-06-22T02:46:52.553
> 
> 标签：android, listview

所以我有一个带有按钮的用户界面，单击时会显示弹出用户输入。无论输入什么，都应添加到数组列表中并显示在屏幕上的列表中。以下是我的代码。我尝试使用 notifyDataSetChanged() 更新视图但没有结果。

```
public class reminderList extends ListActivity
{
ArrayList values = new ArrayList(20);
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    values.add(0,"Test");
    values.add(0,"test2");

    //final ListView listView = (ListView) findViewById(R.id.list);
    setListAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, values));

    final Button addButton = (Button) findViewById(R.id.addTask);

    addButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click
            alertPop();

        }
    });
}

private void alertPop() {
    AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("Enter new task");
    alert.setMessage("Input");

    // Set an EditText view to get user input
    final EditText input = new EditText(this);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            Editable uin = input.getText();
            // Do something with value!
            values.add(0,uin);

            //((ArrayAdapter<Object>) list.getAdapter()).notifyDataSetChanged();
        }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
        }
    });

    alert.show();
  }
} 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:02:02.553

试试这个，

在设置适配器之后放置 notifyDataSetChanged()....

例如：

`ArrayAdapter<String> adpt = new ArrayAdapter(this, android.R.layout.simple_list_item_1,` `values)`

`setListAdapter(adpt);`

`notifyDataSetChanged(adpt);`

# iphone - CATransaction 动画淡入淡出 uiviews

> ID：11149573
> 
> 赞同：0
> 
> 时间：2012-06-22T02:47:40.297
> 
> 标签：iphone, ios, animation, uiview

我有两个视图， jumpBarPortrait 和 jumpBarLandscape 我想在两者之间制作动画，所以换句话说，我希望肖像淡入，而风景淡出......到目前为止，我可以淡入一个，但我不知道如何让另一个淡出...

这是我目前的代码..

```
[CATransaction begin];
CATransition *animation = [CATransition animation];
animation.type = kCATransitionFade;
animation.duration = animationSpeed;

[self.view insertSubview:jumpBarContainerPortrait belowSubview:actionTabBar];

[[jumpBarContainerPortrait layer] addAnimation:animation forKey:@"Fade"];
[CATransaction commit]; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T04:01:22.177

你看过这个方法吗...

```
 [UIView transitionFromView:jumpBarContainerPortrait
                            toView:jumpBarContainerLandscape
                          duration:0.5
                           options:UIViewAnimationOptionTransitionCrossDissolve
                        completion:^(BOOL finished) {}]; 
```

或翻转 fromView/toView 以转换回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:54:15.223

您插入视图以淡入但不删除视图淡出，试试这个：

```
[CATransaction begin];
CATransition *animation = [CATransition animation];
animation.type = kCATransitionFade;
animation.duration = animationSpeed;

[self.view insertSubview:jumpBarContainerPortrait belowSubview:actionTabBar];
[[jumpBarContainerPortrait layer] addAnimation:animation forKey:@"Fade"];

[fadeOutView removeFromSuperview];
[[fadeOutView layer] addAnimation:animation forKey:@"Fade"];

[CATransaction commit]; 
```

# javascript - JavaScript 原型清空变量

> ID：11149578
> 
> 赞同：0
> 
> 时间：2012-06-22T02:48:23.287
> 
> 标签：javascript, node.js

使用 JavaScript，是否可以使用原型向尚未被赋予值的变量添加方法。

例如，我可以这样做：

```
var foo = "bar";

String.prototype.doTheFoo = function(){
  console.log("foo is better than you");
};

foo.doTheFoo(); 
```

这为所有字符串提供了方法 doTheFoo();

是否有可能对一些人如何做同样的事情，但是对于一些没有被赋予价值的东西？

```
var foo;

(????).prototype.doTheFoo = function()... 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:50:50.500

不，原型方法在对象构造函数上进行。`var foo`is的默认值`undefined`，它没有构造函数。

您可以通过扩展将方法添加到所有对象`Object.prototype`。

```
Object.defineProperty(Object.prototype, 'doTheFoo', {
    value: function() { alert('foo'); }
}); 
```

现在任何具有对象包装器的值都可以使用该方法。

请注意，我用于`Object.defineProperty`作业。这仅在符合 ES5 的实现中可用。它使属性不可枚举，因此相对安全。

* * *

由于您似乎希望它在一个`undefined`值上工作而不是`typeof`测试，请考虑一个事实，***`typeof`即永远不需要测试`undefined`***.

如果这是你被告知的，那你就被骗了。很多人这么认为，仅仅是因为他们一直都这么说。这不是真的。

以下测试是一个非常安全的测试`undefined`...

```
if (foo === undefined) { 
```

...只要您注意以下...

1.  ***永远不要***`window.undefined`用不同的值遮蔽或定义

2.  ***切勿***使用任何违反 #1 的代码

3.  ***永远不要***尝试获取*未声明*变量

负责维护一个未损坏的环境*（一个非常简单的任务）*，你不会有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:52:30.857

你可以给你还没有的车加油吗？当然不是; 你不能把东西附加到任何东西上。

同样，您不能将方法附加到空变量；什么都没有（因此没有`prototype`附加）。

从技术上讲，已声明但未分配的变量是*undefined*，这是一种特殊的原始值类型。基元没有属性，因此您不能将任何方法附加到它。

您*可以*`Object`在's中添加一些东西`prototype`（其他所有东西都继承自它），这样当您为变量分配一些值时，它将具有该方法，**但这是一个非常*非常*糟糕的主意。**

# c# - 如何使用 1000 名观察者有效地运行 Observable.Where()？

> ID：11149579
> 
> 赞同：2
> 
> 时间：2012-06-22T02:48:32.173
> 
> 标签：c#, performance, system.reactive

我是 Rx 的新手，我非常喜欢它。我发现我们代码的现有部分可以通过使用它来大大简化。我遇到了性能问题，如果有一位大师可以帮助我，我将不胜感激。

以前我有一个手动实现的观察者类，它接受订阅和一个关键过滤器。当一个事件进入类时，它将使用提供的键来查找哪些观察者需要回调。这是代码的一个非常简化的版本：

```
 class OldClass
 {
    private Dictionary<string, List<Action<UsefulInfo>> _callbacks = 
        new Dictionary<string, List<Action<UsefulInfo>>();

    void Subscribe(string key, Action<UsefulInfo> callback)
    {
        _callbacks[key].Add(callback);
    }

    // Some event happens that we want to notify subscribers about
    void EventHandler(object sender, SomeEventArgs e)
    {
        // Create object for callbacks
        UsefulInfo info = CreateUsefulInfo(e);

        string key = info.Key;

        // Look up callbacks for key
        _callbacks[key].ForEach(callback => callback(info));
    }
 } 
```

我已将其更新为使用 Rx，如下所示：

```
class NewClass
{
    private Subject<UsefulInfo> _subject = new Subject<UsefulInfo>();
    private IObservable<UsefulInfo> _observable;

    public NewClass()
    {
        _observable = _subject.ToObservable();
    }

    IDisposable Subscribe(string key, Action<UsefulInfo> callback)
    {
        return _observable.Where(x => x.Key == key).Subscribe(callback);
    }

    // Some event happens that we want to notify subscribers about
    void EventHandler(object sender, SomeEventArgs e)
    {
        UsefulInfo info = CreateUsefulInfo(e);

        _observable.OnNext(info);
    }
 } 
```

旧代码执行 O(1) 字典键查找以查找回调，但新 Rx 代码调用 Where Func O(n) 次。我有成千上万的观察者。

有没有办法给 Rx 一个 Func，它返回一个键，然后它可以在内部使用它来将观察者存储在字典中？还有其他方法可以提高性能吗？还是我以非预期的方式使用框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:03:49.133

[`Publish`](http://msdn.microsoft.com/en-us/library/hh229126%28v=vs.103%29)您可以通过使用on序列共享观察者`Where'd`，然后使用[`RefCount`](http://msdn.microsoft.com/en-us/library/hh211664%28v=VS.103%29.aspx)on`IConnectableObservable`更智能地管理对源的订阅。

在您的场景中，我想您会将这些“已发布”的 observable 存储在字典中并按需添加。

这是一个基本的实现：

```
class NewClass 
{ 
    private Subject<UsefulInfo> _subject = new Subject<UsefulInfo>(); 
    private IDictionary<string, IObservable<UsefulInfo>> _keyedObservables; 

    public NewClass() 
    { 
        _keyedObservables = new Dictionary<string, IObservable<UsefulInfo>>();
    } 

    IDisposable Subscribe(string key, Action<UsefulInfo> callback) 
    { 
        // NOT threadsafe for concurrent subscriptions!
        if (!_keyedObservables.Contains(key))
        {
            var keyedAndPublished = _subject.Where(x => x.Key == key)
                .Publish()
                .RefCount();

            _keyedObservables.Add(key, keyedAndPublished);
        }

        return _keyedObservables[key].Subscribe(callback);
    } 

    // Some event happens that we want to notify subscribers about 
    void EventHandler(object sender, SomeEventArgs e) 
    { 
        UsefulInfo info = CreateUsefulInfo(e); 

        _observable.OnNext(info); 
    } 
} 
```

# objective-c - 使图像尺寸加倍并且仍然清晰？

> ID：11149584
> 
> 赞同：0
> 
> 时间：2012-06-22T02:49:07.083
> 
> 标签：objective-c, ios, macos, image

任何 C/OC 库可以使图像尺寸加倍并且仍然像以前一样清晰？我的意思是双倍尺寸不放大，而不仅仅是使框架加倍。

# cloud - 如何监控云计算中的性能信息

> ID：11149586
> 
> 赞同：2
> 
> 时间：2012-06-22T02:49:13.667
> 
> 标签：cloud, monitor

我想监控云计算中的性能信息，例如 CPU 利用率、内存利用率。在单机上获取性能信息很容易，但是如何将这些信息聚合起来，为用户提供一个整体的视图，并支持不同粒度的机器性能信息查询。有没有什么软件可以完美解决这个问题？或者我该如何设计一个分布式监控系统来解决它？您的回答将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:22:37.510

您是否看过以下内容：

1.  [神经节](http://ganglia.sourceforge.net/)
2.  [纳吉奥斯](http://www.nagios.org/)
3.  [石墨](http://graphite.wikidot.com/)
4.  [穆宁](http://munin-monitoring.org/)

Nagios 也提供数据和警报聚合。

# jquery - 带有可点击链接的jQueryUI自动完成？

> ID：11149591
> 
> 赞同：1
> 
> 时间：2012-06-22T02:50:21.313
> 
> 标签：jquery, ajax, jquery-ui, autocomplete, jquery-ui-autocomplete

这是我第一次使用 jQueryUI 自动完成功能，我设法让它工作，我们的客户还需要一个功能，即在搜索建议中有可点击的类别。

例如，看看这张图片：

![在此处输入图像描述](../Images/0cd130c23edcbe9080eaa2285d6ec508.png)

它来自newegg网站，当我搜索“nvidia”时，会填充一个建议​​列表，除了项目名称之外，它所在的类别也会显示，但类别显示为文本而不是链接（即类别本身不可点击）。我也这样做，我从服务器上运行的服务返回搜索结果并填充建议。我不需要返回链接，我可以将返回的字符串拆分为“in”以获取“类别”，然后将链接生成为 `<a href="someinternalpage.aspx?cat=category">Category</a>`(This code is just for quick Idea)。但现在主要问题来了，我如何使用上述可点击链接填充建议？

任何帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:37:08.957

我将利用`select`自动完成公开的事件并设置`window.location`为正确的 URL：

```
select: function (event, ui) {
    var category = $.trim(ui.item.value.split("in")[1])
        , url = "someinternalpage.aspx?cat=" + category;

    event.preventDefault();
    window.location.href = url;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:35:42.650

仅基于自动完成的演示页面，这些建议似乎是有针对性的。

意思是，我会在他们身上注册一个点击功能来获取他们的内容，然后使用 jQuery 来重定向窗口，使用正确的 URL 路径进行搜索（比如[http://domain.com/search=+content](http://domain.com/search=+content)）或者使用 javascript 本身来提交表单。

javascript提交在这里非常详细[http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

没有任何代码，这就是我解决问题的方式。

# google-apps-script - GAS ClientHandler 和 Dateboxes

> ID：11149592
> 
> 赞同：0
> 
> 时间：2012-06-22T02:50:30.970
> 
> 标签：google-apps-script

ClientHandler 不支持日期框吗？

这段代码给了我错误“找不到方法 setValue(object)”：

var dateTimeNowHandler = app.createClientHandler() .forTargets(app.getElementById('DateCompleted')).setValue(new Date());

有什么我错过的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:46:39.370

如果您注意到，客户端处理程序的 setValue() 函数接受一个布尔值作为参数，而 DateBox 的 setValue 接受一个日期作为参数。setValue() 函数适用于复选框等小部件

因此，您的代码将无法正常工作。

该文件还说

> 方法 setValue(值)
> 
> 用于设置此处理程序所针对的小部件的布尔值的指令。
> 
> 如果目标小部件不支持设置布尔值，这将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:18:08.147

一种可能的解决方法是在同一个面板上使用 2 个日期框，一个`visible`和另一个。`invisible`按钮上的客户端处理程序（如您所说）可以触发可见/不可见循环。在每种情况下，只有其中一个是可见的，并且它们将在您的 Ui 中占据相同的位置。第一个可以有一些预设值，第二个可以有另一个预设值（或留空）。

唯一棘手的事情是事后正确处理这两个值，即选择正确的值来获得有用的值......因为我不知道这个的最终目的，所以我无法进一步提出我的建议（确实只是一个建议:-)。

编辑：如果你使用这个建议，你可以看看[这篇文章](https://stackoverflow.com/questions/11178836/how-to-know-which-ui-element-is-in-focus)，它提供了一个很好的方法来了解 e.parameter 来自哪里......我只是没想到它！

# c# - 给定开始和结束日期...在 C# 中查找范围内的所有日期

> ID：11149602
> 
> 赞同：3
> 
> 时间：2012-06-22T02:51:31.857
> 
> 标签：c#, datetime, timespan

给定`DateTime start = startsomething`和`DateTime end = endSomething`

是否有一种标准方法可以返回开始和结束内的所有日期，以便返回是一个日期列表，如...

```
'1/1/2012 12:00 AM'
'1/2/2012 12:00 AM' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T02:59:52.247

您可以创建这样的方法：

```
public static IEnumerable<DateTime> Range(DateTime start, DateTime end) {
  for (var dt = start; dt <= end; dt = dt.AddDays(1)) {
    yield return dt;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T02:58:51.843

您可以填写所有日期的列表：

```
DateTime begin = //some start date
DateTime end = //some end date
List<DateTime> dates = new List<DateTime>();
for(DateTime date = begin; date <= end; date = date.AddDays(1))
{
    dates.Add(date);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T03:03:58.370

Linq方式：

```
DateTime start = new DateTime(2012, 1, 1);
DateTime end = new DateTime(2012, 6, 1);

var list = Enumerable.Range(0, (end - start).Days + 1).Select(i => start.AddDays(i)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T03:05:47.740

您可以使用它来生成日期范围

```
public static IEnumerable<DateTime> GetDateRange(DateTime startDate, DateTime endDate)
{
  if (endDate < startDate)
    throw new ArgumentException("endDate must be greater than or equal to startDate");

  while (startDate <= endDate)
  {
    yield return startDate;
    startDate = startDate.AddDays(1);
  }
} 
```

然后

```
GetDateRange(startDate,endDate).Select(d => d.ToString("dd/MM/yyyy hh:mm")).ToArray(); 
```

# python - Windows 上的 Heroku Django 应用程序开发

> ID：11149603
> 
> 赞同：1
> 
> 时间：2012-06-22T02:51:40.193
> 
> 标签：python, django, postgresql, heroku

我正在尝试使用 Windows 在 Heroku 上启动 Django 应用程序，当我尝试 pip install psycopg2 时遇到以下错误：

```
Downloading/unpacking psycopg2
  Downloading psycopg2-2.4.5.tar.gz (719Kb): 719Kb downloaded
  Running setup.py egg_info for package psycopg2

    Error: pg_config executable not found.

    Please add the directory containing pg_config to the PATH
    or specify the full executable path with the option:

        python setup.py build_ext --pg-config /path/to/pg_config build ...

    or with the pg_config option in 'setup.cfg'.
    Complete output from command python setup.py egg_info:
    running egg_info

creating pip-egg-info\psycopg2.egg-info

writing pip-egg-info\psycopg2.egg-info\PKG-INFO

writing top-level names to pip-egg-info\psycopg2.egg-info\top_level.txt

writing dependency_links to pip-egg-info\psycopg2.egg-info\dependency_links.txt

writing manifest file 'pip-egg-info\psycopg2.egg-info\SOURCES.txt'

warning: manifest_maker: standard file '-c' not found 
```

我用谷歌搜索了这个错误，看来你需要 libpq-dev python-dev 作为 Python 下 postgres 的依赖项。我还打开了一个链接，如果你的路径中没有 postgres bin 文件夹，你就会遇到麻烦，所以我手动安装了 Postgres 并再次尝试。这次我得到：

```
error: Unable to find vcvarsall.bat 
```

我仍然是蟒蛇 N00b，所以我迷路了。有人可以指出我的大致方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T05:06:29.387

我找到了我的问题的答案。我认为问题在于 pip 正在寻找从源代码编译依赖项。解决方案是找到依赖项的预编译版本的链接。然后，您可以将此链接传递给安装在您的 virtualenv 中的 easyinstall 库。Easyinstall 将下载并安装依赖项的预编译版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:57:12.950

您可以使用 Cygwin 并安装所有依赖项，但上周我遇到了这个问题，然后我意识到使用带有 Ubuntu 的 Virtual Box 作为我的客户操作系统要容易得多。我仍然在 Windows 上进行开发，但使用 Ubuntu 只是为了与 heroku 进行通信/推送

# android - Android 堆大小小于 16mb

> ID：11149604
> 
> 赞同：2
> 
> 时间：2012-06-22T02:51:42.497
> 
> 标签：android, size, heap-memory

我正在开发一个在 Galaxy Tab 10.1 上占用大约 12MB 堆的应用程序。

然而，当我在我的 Samsung Vibrant 上测试此应用程序时，它提供了略高于 3MB 的堆，并且使用的堆大小百分比约为 98%。

有人可以解释为什么会这样，并帮助我找出解决方案吗？

我知道 VMRuntime 已被弃用，并且我无法找到增加最小堆大小的替代方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:30:00.980

所有 Android 设备都有不同的应用程序堆大小。

```
 /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mHeapText = (TextView)findViewById(R.id.mHeapText);

        ActivityManager mActivityManager = (ActivityManager)getApplicationContext().getSystemService(ACTIVITY_SERVICE);
        int activityMemory = mActivityManager.getMemoryClass();
        mHeapText.setText("This Device Able to Use for App " + String.valueOf(activityMemory) + "MB");
    } 
```

检查您的 Samsung Vibrant 堆大小。

# multiprocessing - 支持并发和随机访问读取的快速、低内存、常量键值数据库

> ID：11149608
> 
> 赞同：5
> 
> 时间：2012-06-22T02:52:18.723
> 
> 标签：multiprocessing, key-value, key-value-store, multiprocess

我需要一个磁盘上的键值存储，不是太大或分布式。用例如下：

*   完整的数据库大小只有几 Gbs
*   键和值的大小都是恒定的
*   它是一个恒定的数据库。写完整个数据库后，我不需要再写任何条目（或很少写）
*   密钥将以不可预知的顺序访问
*   **支持多个进程的并发读取是必须的**。
*   必须非常快，因为读者将**在一个紧密的循环中访问数百万个键**。所以它应该尽可能地接近于在关联数组上循环（`STL's std::map`比如）
*   理想情况下，它应该允许设置使用多少 RAM，通常它应该使用几百 Mbs
*   用 C 或 C++ 编写。现有的 python 扩展将是一个很大的优势，但我可以自己添加

所以`cdb`和`gdbm`看起来不错的选择，但只是想知道是否有更合适的选择。指向相关基准甚至相关轶事证据的指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:59:43.283

你最终使用的是什么数据库？

如果您喜欢 cdb 并且需要 > 4 GB 的数据库，请查看 mcdb，它最初基于 cdb，加上一些性能增强和对 4 GB+ 常量数据库的支持。

[https://github.com/gstrauss/mcdb/](https://github.com/gstrauss/mcdb/)

提供了 Python、Perl、Lua 和 Ruby 扩展。mcdb 是用 C 语言编写的，并在底层使用 mmap，因此很容易支持线程之间和进程之间的无锁并发读取。由于它由内存映射文件支持，因此页面会根据需要从磁盘映射，并且即使访问数据库的进程数量增加，内存也实际上是恒定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:07:01.010

我喜欢 hamsterdb 因为我写了它:)

[http://www.hamsterdb.com](http://www.hamsterdb.com)

*   经常与几 GB 的数据库大小一起使用
*   键/值可以有任何你想要的大小
*   随机访问 + 定向访问（带光标）
*   并发读取：hamsterdb 是线程安全的，但还不是并发的。我正在做这个。
*   如果您的缓存足够大，那么访问将非常快（您可以指定缓存大小）
*   用 C++ 编写
*   python 扩展是可用的，但非常过时；需要修复

如果您想评估 hamsterdb 并需要一些帮助，请随时给我发邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T02:58:56.823

你看过bdb吗？听起来BDB很好用。

# jsf - 在运行时更新内存中的 faces-config.xml

> ID：11149611
> 
> 赞同：0
> 
> 时间：2012-06-22T02:53:26.367
> 
> 标签：jsf, xpages

当 JSF/XPages 应用程序启动时，它会读取托管 bean、验证器等的 faces-config.xml。我可以在运行时操作加载的配置吗？例如动态添加验证器以确保我的自定义代码将运行。

我不是要在运行时更改 xml 文件，而是在加载后更改内存表示。

XPages 使用 JSF 1.x 运行时，因此 JSF 2.0 构造可能不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:29:19.153

是的，您可以添加许多 JSF 工件，这些工件通常也`faces-config.xml` 由[`Application`该类](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html)配置。

```
Application application = FacesContext.getCurrentInstance().getApplication();
application.addValidator("fooValidator", "com.example.FooValidator");
// ... 
```

您可以在一个急切初始化的应用程序范围的托管 bean 中完成这项工作。

```
@ManagedBean(eager=true)
@ApplicationScoped
public class Config {

    @PostConstruct
    public void init() {
        // ...
    }

} 
```

# php - 将 JSON 数据编码为另一个 JSON 对象

> ID：11149612
> 
> 赞同：2
> 
> 时间：2012-06-22T02:53:26.930
> 
> 标签：php, json

我有一个 JSON 字符串，我想将它作为一个值包含在我从数组创建的更大 JSON 对象中。如何在没有 php 转义字符串的情况下创建更大的 JSON 对象，并且不必解码先前编码的字符串？

例如，如果我的 JSON 字符串是：

```
$encoded_already = '{"encoded_key": "encoded_value"}'; 
```

我想将它包含在我的数组和 json_encode() 中：

```
$new_array = array(
    "some_other_key" => $some_value,
    "premade_data" => $encoded_already
);
$output = json_encode($new_array); 
```

但我希望将`$encoded_already`字符串作为实际的 JSON 包含在内，而不仅仅是转义字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:58:37.303

这是一个想法：放置一个标记作为属性值，然后`str_replace`在它上面使用。

仅当`$token`您的 JSON 中没有出现任何地方时才有效。

```
$token = '%%%';
$output = str_replace( '"' . $token . '"', $encoded_already, json_encode( array(
    "some_other_key" => $some_value,
    "premade_data" => $token
) ); 
```

# xml - 在 Magento 系统配置中设置密码字段的默认值

> ID：11149615
> 
> 赞同：2
> 
> 时间：2012-06-22T02:53:51.467
> 
> 标签：xml, magento, encryption, configuration, passwords

为系统配置字段设置默认值很容易理解（通过[Chapagain](https://stackoverflow.com/a/5846393/336905)和@alanstorm[的博客文章），但密码字段不同，因为它们在保存到数据库时是加密的。](http://alanstorm.com/magento_default_system_configuration_values)因此，当 Magento 从 config.xml 中读取默认值时，它会尝试解密该值，如果默认值是明文，则会失败。

`$setup->setConfigData('config/path/here', md5('default'))`是否有用于指定这些默认值的 XML 帮助程序或进程（除了创建设置脚本 to with ）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T03:23:53.783

我不是 100% 确定（这很快`grep`），但我认为密码加密发生在

```
File: app/code/core/Mage/Adminhtml/Model/System/Config/Backend/Encrypted.php 
protected function _beforeSave()
{
    $value = (string)$this->getValue();
    // don't change value, if an obscured value came
    if (preg_match('/^\*+$/', $this->getValue())) {
        $value = $this->getOldValue();
    }
    if (!empty($value) && ($encrypted = Mage::helper('core')->encrypt($value))) {
        $this->setValue($encrypted);
    }
} 
```

请记住，这是一种加密，而不是散列。由于您要存储密码以在某处使用（最常见的是支付 API），因此 Magento 需要能够解读已加密的内容。`encrypt`因此，您可以使用核心助手的方法生成这些值。你也可以试试这样的

```
$o = Mage::getModel('adminhtml/system_config_backend_encrypted');
$o->setData('value','encrypted or unencrypted value');

$o->beforeSave();     //to encrypt the value

$o->afterLoad();      //to unencrypted the value

$password = $o->getValue();  //fetch the value 
```

请记住，每个商店都有自己的加密密钥，因此这对于分发模块没有用处。

您还应该在加载和处理过程中查看[`backend_model`](http://alanstorm.com/magento_loading_config_variables)属性（自我链接免责声明，未在 Internet 上的其他任何地方记录） 。`config.xml`

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T03:54:15.023

这是一个有趣的问题/思想实验，但目前的行为似乎是合理的。如果一个值的数据存储需要加密，我无法想象一个函数值以纯文本形式出现在文件系统的任何地方，无论是在 config.xml 还是在安装/升级脚本中。

唯一的另一种选择是自己加密，这可能是不可取的，因为您必须分发并因此了解密钥值。

# excel - 如何在excel中对数据进行分组并计算组数据的总和

> ID：11149617
> 
> 赞同：0
> 
> 时间：2012-06-22T02:53:56.037
> 
> 标签：excel, vba

我想在 excel 宏中实现一些代码来为我分组一些数据，然后计算分组列的总和。请看下面的数据。

我想检查而不是编写宏有没有办法通过excel公式实现它？我的意思是通过excel公式将它们分组并计算另一列中的总时间？

```
Fix.No  Duration        Expected result 
111 00:00:55        Fix.No  Total Duration
111 00:59:15        111 01:02:25
123 00:10:55        123 00:10:55
111 00:01:15        265 00:00:45
265 00:00:45        214 01:00:05
214 01:00:05 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:39:12.113

您正在寻找[PIVOT TABLE 功能](http://www.cpearson.com/excel/pivots.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T06:06:51.430

要获得类似于 SQL 如何给出输出的数据，可以使用以下步骤在 excel 中完成

1.  选择数据透视中的源数据
2.  在数据透视表中排列行过滤器中的所有非聚合列
3.  在数据透视表中的值中选择聚合列
4.  数据透视选项--->设计----->报表布局----->以表格形式显示
5.  然后从报告布局选项卡中选择重复所有项目标签
6.  删除所有总计和小计希望这会有所帮助并进行相应的修改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T03:22:36.737

如果您愿意手动（或通过宏）输入第一列值（每个不同的值，因为您在那里拥有它），那么您可以使用 SUMIF 函数来计算总数。

# ssl - 我在哪里可以找到 Mac OSX 上的 SSL 证书

> ID：11149623
> 
> 赞同：11
> 
> 时间：2012-06-22T02:55:23.370
> 
> 标签：ssl, osx-snow-leopard

我需要访问我在 Mac OSx 机器上访问的所有 https 网站的 .k12 或 .pem 文件。谁能帮我知道可以找到这些文件的路径。

此外，需要知道一种使用密钥解密某些数据包的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T12:18:49.370

有几种方法可以在 OSX 中获取证书文件。一种方法是从 Keychain Access 导出证书。在“**类别**” （左下方）面板中选择“**证书”，从“编辑”菜单中****选择“全**选” （或点击 ⌘A），然后从“文件”菜单中选择“**导出项目...** ”（或点击 ⇧⌘E）。您可以将证书导出为 .p12 文件或 .cer 文件。这种方法的问题是您必须定期执行这些步骤以使您的文件与 Apple 的最新更新保持同步。

 ******另一种方法是安装 OpenSSL 并使用`cert.pem`它附带的文件。同样，您必须使 OpenSSL 保持最新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:16:12.543

我也在找这个。我在任何地方都找不到文件，所以我想如何导出它们。

来自`Keychain Access`：

在左侧窗格中，单击`KEYS`。在右窗格中，`CTRL-Click`在所需的证书上。

`Public key`应该导出为`PEM`文件。`Private Key`应该导出为`P12`文件。`Certificate`应该导出为`CRT`文件。

私钥导出选项将作为一个`passphrase`然后是用户的钥匙串密码。导入后，您将被要求输入此密码。

注意：私钥包含公钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T03:02:04.920

您只需访问 Applications 目录的 Utilities 文件夹中名为“Keychain Access”的工具。

在那里，您可以过滤每个钥匙串以仅显示证书。

至于使用给定密钥解密数据包，在安全框架中有很多功能可以做到这一点，但这个问题需要澄清（语言要求等）。******

# iphone - 同一个 iOS 应用中的音频输入和输出

> ID：11149625
> 
> 赞同：1
> 
> 时间：2012-06-22T02:55:48.080
> 
> 标签：iphone, objective-c, ios, audio, core-audio

好的，所以我正在创建简单的对象，以便以后用于音频输入和输出。两个对象独立工作都很好，但是当我尝试在同一个应用程序中使用它们时，它们会发生冲突，并且音频输入对象会被输出对象挡住。

输出对象使用 AudioUnitSessions 将样本传递到缓冲区并播放音频，而输入对象使用 AudioQueue 从麦克风输入样本，我们稍后可以处理。

我认为解决方案就像停用 AudioUnitSession 一样简单，但这似乎不起作用。我这样做是通过以下方式

```
AudioSessionSetActive(true) or AudioSessionSetActive(false) 
```

以上取决于我是否尝试激活它。

显然这不起作用，因为每当我尝试重新创建输入对象时，它都无法使用 OSStatus 错误号 -50 初始化记录。

有谁知道解决这个问题的方法，或者在同一个应用程序中音频输入和输出的简单方法。

# php - php头（'位置'）错误

> ID：11149628
> 
> 赞同：0
> 
> 时间：2012-06-22T02:55:54.237
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我的 php 编码遇到了一些困难。

我有 3 个文件，add.php、lib.php 和 view.php

我创建了一个简单的表单，当用户单击提交时，它应该将他们定向到 view.php，它将在其中显示数据库。现在我遇到了一些我似乎无法解决的问题。

当用户单击提交并且字段为空白或出现错误时，不应在视图页面（或数据库）中输入任何条目......但是当我单击提交时，会在数据库中输入一个空白条目。此外，如果我在任何时候单击顶部菜单栏中的“输入产品”，它会导致数据库出现空白条目。我不知道为什么会这样。

我的下一个问题是标题（'Location'），我的浏览器说：

“警告：无法修改标头信息 - 第 16 行的 add.php 中的标头已由（从 lib.php:13 开始的输出）发送”

但是，如果我在表单上单击提交，它就会消失。

这是页面的代码：

如果代码真的很乱，我真的很抱歉。

非常感谢任何帮助/建议/解决方案，谢谢。

是的，这**是**一项作业——上周到期，但由于我无法完成它，它不再值得任何分数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:12:21.153

您的`if`语句`if (empty($_POST)){`将始终失败并且`else`将运行，因此空数据库条目。

`$_POST`即使是空的文本输入，也总会有一些东西。每个键都将设置为一个空字符串。

要测试是否应该保存数据，您需要验证所有必需的表单字段。您的代码可能看起来像这样。这绝不是完整或安全的，但它会为您指明正确的方向。

```
<?php

// store validation rules for required fields
$requiredFields = array(...);

// Store all validation errors here.
$errors = array();

foreach($requiredFields as $key=>$rule) {
    if(empty($_POST[$key])) {
        $errors[$key] = true;
    }
    else {
        // you can perform more validation work on the value here.
    }
}

if(count($errors) > 0) {
    // form submit failure.
}
else {
    // form submit success, save to db
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T03:01:01.820

您在设置标头之前发送输出，因此不会发送指定的标头。

# sencha-touch-2 - Sencha Touch 2 - setActiveItem of card layout inside navigationview issue

> ID：11149630
> 
> 赞同：0
> 
> 时间：2012-06-22T02:55:56.633
> 
> 标签：sencha-touch-2

I have an Ext.Panel with a card layout nested inside a navigation view. I did this to easily switch between a map and a list without having to pop and then push a whole different view (basically to avoid the animation). So, I have a button in the navigationBar that fires an action in the controller. This initial view, with a list, load fine, but the controller code to switch between the views (using setActiveItem()) does not work. No error message. I found something about a bug where you have to call show(). Although this works, it overlays the new activeItem (the Map, in this case) on top of the navigaionBar! (see screenshot). Also, if I just change activeItem to 1 in the config of the wrapper manually, it shows the map just fine, same as the list.

My wrapper panel looks like this:

```
Ext.define(ViewInfos.VendorWrapper.ViewName,{
    extend: 'Ext.Panel',
    id:     ViewInfos.VendorWrapper.PanelId,
    xtype:  ViewInfos.VendorWrapper.Xtype,

    config:
    {
        layout: 'card',
        title:      Resources.VendorsNearby,
        activeItem: 0,
        items: [
            {
                xtype: ViewInfos.VendorList.Xtype, //Initially shown, a list
            },
            {
                xtype: ViewInfos.VendorMap.Xtype, //What I'm trying to show, a map
            }
        ]
    }
}); 
```

and here is my controller code:

```
Ext.define('OrderMapper.controller.VendorWrapper', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
           vendorMap:           ViewInfos.VendorMap.Xtype,
           vendorList:          ViewInfos.VendorList.Xtype,
           vendorWrapper:       ViewInfos.VendorWrapper.Xtype,
           main:                ViewInfos.Main.Xtype,
           vendorToggleButton: (ViewInfos.Main.Xtype + ' button[action=vendorViewToggle]')
        },
        control: {
            vendorToggleButton:{
                tap: function(){
                    var curView = this.getVendorWrapper().getActiveItem().id;

                    //active view == VendorList
                    if(curView == 'VendorList'){

                        //this shows up in the console
                        console.log('vendorToggleButton tapped, switching to map');

                        this.getVendorWrapper().setActiveItem(1);

                        //without this line, the view doesn't even change
                        this.getVendorWrapper().show();
                        this.getVendorToggleButton().setText('List');
                    }

                    //active view == VendorMap
                    else if (curView == 'VendorMap'){
                        console.log('vendorToggleButton tapped, switching to list');
                        this.getVendorWrapper().setActiveItem(0);
                        this.getVendorToggleButton().setText('Map');

                    }
                }
            }
        }
    } 
```

And here is the screenshot of the wonky view that happens on `this.getVendorWrapper().show()` ![Screenshot](../Images/8531845030eea85686756039c70af1ce.png)

Also, I tried changing the wrapper to a Carousel (instead of a regular panel with a card layout), and the carousel will swipe to change list/map but setActiveItem() STILL doesn't work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:25:14.130

I'm currently working on a **navigation.View** where there is basically 4 main views from where you can push other subview. I did it like this :

```
Ext.define('App.view.Navigation', {
  requires: [
    ...
  ],

  xtype: 'mainviews',

  extend: 'Ext.navigation.View',

  config: {
    cls: 'content',
    layout:{animation:false}, // or whatever animation you want for push and pop
    navigationBar: {
      ...
    },
    items: [{
      xtype: 'container',
      layout:'card',
      items: [{
        xtype: 'mainview1',
      },{
        xtype: 'mainview2',
      },{
        xtype: 'mainview3',
      },{
        xtype: 'mainview4',
      }]
    }]
  }
}); 
```

Then it's really easy to either set the active item of the navigation view or push subviews

For instance, in a controller it would be

```
this.getMainviews().setActiveItem(X); // X = 0,1,2 or 3 
```

and

```
this.getMainviews.push(view); // view = the view your want to push 
```

and these is the references :

```
refs:{
  mainviews: 'mainviews'
} 
```

Hope this helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:49:17.950

First of all, if you just want to avoid the animation on `push`/`pop`, add this `config` to your navigation view:

```
layout: {
    animation: null
} 
```

Generally, you should not call `.show()` on items that are inside your `Ext.navigation.View` instance. They will be added to `Ext.Viewport` directly, thus appearing to be on top of the navigation bar.

**Have a look at [this JSFiddle example](http://jsfiddle.net/aatiis/ukMRf/)**, might give you a hint.

# android - setImageResource 与 setImageURI

> ID：11149632
> 
> 赞同：0
> 
> 时间：2012-06-22T02:56:09.187
> 
> 标签：android, image

我想从互联网上获取照片，所以我使用 setImageURI，但似乎无法完成，但如果我在同一功能下使用 setImageResource(R.drawable.)，它可以工作......我该如何解决 setImageURI 的错误?

```
public View getView(int position, View convertView, ViewGroup parent) {
        ImageView i = new ImageView(mContext);

        //this is working 
        int p = R.drawable.fb;
        i.setImageResource(p);

        //this is not working
        i.setImageURI(Uri.parse("http://www.vaultads.com/wp-content/uploads/2011/03/google-adsense.jpg"));

        return i;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:21:59.247

> 想从互联网上获取照片，所以我使用 setImageURI，但似乎无法完成，但如果我使用 setImageResource(R.drawable.)

最重要的事情

setImageResource 是同步的，因此它会正确执行，但来自 URL 的 setImageURI 是异步操作，它必须在与 UI 线程不同的线程中执行

关注 Snippet 将对您有所帮助。

```
new Thread() {

    public void run() {
        try {
            url = new URL("http://www.vaultads.com/wp-content/uploads/2011/03/google-adsense.jpg");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        try {
            image = BitmapFactory.decodeStream(url.openStream());
        } catch (IOException e) {
            e.printStackTrace();
        }
        runOnUiThread(new Runnable() {

            @Override
            public void run() {

                i.setImageBitmap(image);
            }
        });
    }
}.start(); 
```

如果这也不起作用，那么您还有其他三个选择

**选项1**

```
URL myUrl = new URL("http://www.vaultads.com/wp-content/uploads/2011/03/google-adsense.jpg");
InputStream inputStream = (InputStream)myUrl.getContent();
Drawable drawable = Drawable.createFromStream(inputStream, null);
i.setImageDrawable(drawable); 
```

**选项2**

```
try {
  Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL("http://www.vaultads.com/wp-content/uploads/2011/03/google-adsense.jpg").getContent());
  i.setImageBitmap(bitmap); 
} catch (MalformedURLException e) {
  e.printStackTrace();
} catch (IOException e) {
  e.printStackTrace();
} 
```

**选项3**

```
public static Bitmap loadBitmap(String url) {
    Bitmap bitmap = null;
    InputStream in = null;
    BufferedOutputStream out = null;

    try {
        in = new BufferedInputStream(new URL(url).openStream(), IO_BUFFER_SIZE);

        final ByteArrayOutputStream dataStream = new ByteArrayOutputStream();
        out = new BufferedOutputStream(dataStream, IO_BUFFER_SIZE);
        copy(in, out);
        out.flush();

        final byte[] data = dataStream.toByteArray();
        BitmapFactory.Options options = new BitmapFactory.Options();
        //options.inSampleSize = 1;

        bitmap = BitmapFactory.decodeByteArray(data, 0, data.length,options);
    } catch (IOException e) {
        Log.e(TAG, "Could not load Bitmap from: " + url);
    } finally {
        closeStream(in);
        closeStream(out);
    }

    return bitmap;
}

   i.setImageBitmap(loadBitmap("http://www.vaultads.com/wp-content/uploads/2011/03/google-adsense.jpg")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T03:18:35.087

该图片网址对我不起作用。

我建议从互联网下载图像的另一条路线。如果您从中调用`setImageURI`，`getView`它将在 UI 线程上运行，这将导致您的应用程序冻结，直到图像从网络返回。此外，图像不会被缓存，因此您可能会一遍又一遍地下载相同的图像。

查看这个适用于 Android 的[ImageLoader](http://androidimageloader.com/)库，它可以简化图片的下载。它在后台处理下载它们，它可以同时处理多个请求，并为您缓存图像。

# git - 本地 Git 合并和变基问题和 github - 完全混淆抱歉

> ID：11149640
> 
> 赞同：0
> 
> 时间：2012-06-22T02:57:21.253
> 
> 标签：git, github, merge

因此，我遇到了此处描述的问题，并按照说明删除 master 并基于 dev 创建一个新分支来解决我的问题：[尝试合并分支，然后尝试变基 - 仍然无法强制 master 与 dev 分支相同](https://stackoverflow.com/questions/11146949/tried-to-merge-branches-then-tried-to-rebase-still-cant-force-master-to-be-i)

现在我正在尝试将新的 master 推送到 github 但收到错误说当前分支的尖端落后并建议合并远程更改（例如'git pull'） - 这对我来说很有意义，但我不明白如何强制远程主机与我的本地主机相同 - 希望这是有道理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:07:25.640

如果您*真的*想强制远程主机匹配您的主机，您可以这样做：

```
git push --force origin master 
```

**但是**，您将丢失远程 master 中不在本地 master 中的任何历史记录。此外，如果其他人从这个 Github 存储库中提取了代码，他们下次提取时会遇到很大的麻烦。

# c++ - 将 c++ 项目移动到 Eclipse

> ID：11149641
> 
> 赞同：0
> 
> 时间：2012-06-22T02:58:11.577
> 
> 标签：c++, makefile, eclipse-cdt

我已经使用本教程中的步骤将我之前使用 cmake 构建的 c++ 项目移动到 eclipse 中。[http://www.ibm.com/developerworks/aix/library/au-unix-eclipse/index.html](http://www.ibm.com/developerworks/aix/library/au-unix-eclipse/index.html)。我正在处理项目的大部分相同部分，即演示文件夹。在 Eclipse 之前，我在终端中使用了典型的 make 和 ./demo 命令。现在我设法使用以下 build.xml 文件内容在 IDE 中构建和运行项目：

```
<?xml version="1.0"?>
<project name="unzip" default="make">
    <description>
        Ant adaptor for the demo Makefile.
    </description>

    <target name="make" description="build demo">
        <exec executable="make">
        </exec>
    </target>

    <target name="demoExec" description="run demo">
        <exec executable="./demo">
        </exec>
    </target>
</project> 
```

但是现在事情正在外部运行，这两个命令与一些可执行文件相关联。我切换到 Eclipse 主要是出于调试原因，但当前的配置似乎不允许这样做。我怎样才能让东西在 Eclipse 中本地运行，而不是绑定到外部工具，以便我可以在我的代码等中设置断点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:00:01.367

您应该能够调试程序，无论它是如何编译的（但如果像往常一样启用调试信息并关闭优化，它不会受到伤害）。

您只需要创建调试配置并在那里指定二进制文件（“c/c++ 应用程序”），可能使用“浏览”按钮。

如果这对您不起作用，您有什么问题？

# php - 使用 SoapClient PHP 获得空白结果

> ID：11149642
> 
> 赞同：1
> 
> 时间：2012-06-22T02:58:31.233
> 
> 标签：php, xml, web-services, soap

我有一个使用这种方法的网络服务（infoAfiliadoR）：

![在此处输入图像描述](../Images/1376b8a1314d93480e9526040f861fd9.png)

我正在尝试通过这种方式使用它：

```
$info_afiliado = new SoapClient("some_ws.wsdl",
                    array('trace' => 1, 'connection_timeout' => 10, "exceptions" => 1));

$nombre_parametro = 'infoAfiliadoRRequest';
$param = new StdClass();
$param->llave       = "SOME_LLAVE";
$param->tipoConsulta    = "SOME_CONSULTA";
$param->parametro       = "PARAMETRO";
$llamada = $info_afiliado->infoAfiliadoR(new SoapParam($param, $nombre_parametro)); 
```

当我运行脚本时，我得到`$llamada`了空白。

我需要帮助。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:51:50.360

问题是在 web 服务的服务器端发现的。

现在它正在工作。谢谢！

# java - 2 个 Java 线程可以作为两个不同的 Kerberos 用户（在同一个进程中）进行身份验证吗？

> ID：11149643
> 
> 赞同：5
> 
> 时间：2012-06-22T02:58:32.327
> 
> 标签：java, kerberos

2 个 Java 线程（同一进程，同一台机器）如何各自创建自己的 Kerberos 票证？

我担心的是，通常，一旦在机器上创建了 Kerberos 票证，它将被机器上的所有其他进程使用。

我打算使用[Java 的默认 Kerberos 库](http://docs.oracle.com/javase/jndi/tutorial/ldap/security/gssapi.html)，但我还没有开始，所以我愿意接受任何建议（必须是开源的）。

通过 Kerberos 作为 thread1-user1-password1 和 thread2-user2-password2连接的小型 hello world`http://server`会很棒！

* * *

背景：我想写一个负载测试工具：

*   我的工具启动了 100 个线程，
*   每个线程以不同的 Kerberos 用户身份登录，
*   登录后，每个线程开始发送请求。

作为多个用户进行负载测试很重要，因为每个用户都有自己的缓存等
。Kerberos 不能被禁用/规避，因为目的也是为了测试 Kerberos。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:51:07.807

身份验证属于 GSS 上下文，而不是 JVM。您可以拥有任意数量的上下文，因此您可以拥有任意数量的票证和身份验证。

# javascript - 如何验证是否使用 jQuery 隐藏了 HTMLLIElement

> ID：11149649
> 
> 赞同：2
> 
> 时间：2012-06-22T02:59:22.787
> 
> 标签：javascript, jquery

我正在遍历一个名为 content 的变量，它包含几个 HTMLLIElement 对象。我如何在这个对象上使用 jQuery 或 JavaScript 的函数？，我想做的是用注释代码编写的那种验证。

```
 $.each(content, function(index, value){
         //if(!value.is(':hidden')){
              console.log(index + ' : ' + value);
         //}
    }); 
```

我得到的是

> 未捕获的类型错误：对象 # 没有方法“是”

如果我这样做，`value.getAttribute('style');`我会得到`'display: none;'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:05:45.840

函数中的第二个参数`$.each`引用一个 DOM`HTMLLIElement`元素。要应用 jQuery 方法，`is`您必须将`value`元素包装在 jQuery 对象中：

```
if(!$(value).is(':hidden')) { 
```

[**小提琴**](http://jsfiddle.net/ult_combo/GCxyr/1/)。

正如@anonymousdownvotingislame 所指出的，`if($(value).is(':visible'))`可能更具可读性，因为人脑往往难以解释双重否定，更不用说您不必使用 not`!`运算符了。谢谢。`=]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:06:02.783

值不是 jQuery 对象。

尝试：

```
$.each(content, function(){
         if($(this).is(':hidden')){
              console.log(index + ' : ' + value);
         }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T03:05:49.547

尝试：

```
$content.each(function() {
    if ($(this).is(":hidden")) {
        console.log("whatever");
    }
}); 
```

...或者只是这样做：

```
$.each(content, function(index, value) {
    if (value.getAttribute("style") === "display: none;") {
        consoloe.log("whatever");
    }
}); 
```

# c++ - *不*初始化其成员的C++向量？

> ID：11149665
> 
> 赞同：50
> 
> 时间：2012-06-22T03:04:24.773
> 
> 标签：c++, stl, vector

我正在为一段 C 代码创建一个 C++ 包装器，该代码返回一个大数组，因此我尝试在`vector<unsigned char>`.

现在的问题是，数据大约为**兆字节**，并且`vector`不必要地*初始化*了它的存储，这实际上将我的速度降低了一半。

我该如何防止这种情况？

或者，如果不可能——是否有其他 STL 容器可以避免这种不必要的工作？还是我最终必须自己制作容器？

（C++11 之前）

### 笔记：

我将向量*作为输出缓冲区*传递。我**不是**从其他地方复制数据。
它是这样的：

```
vector<unsigned char> buf(size);   // Why initialize??
GetMyDataFromC(&buf[0], buf.size()); 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-22T04:09:56.027

对于使用用户提供的默认构造函数（未显式初始化任何内容）对结构进行默认和值初始化，不会对 unsigned char 成员执行初始化：

```
struct uninitialized_char {
    unsigned char m;
    uninitialized_char() {}
};

// just to be safe
static_assert(1 == sizeof(uninitialized_char), "");

std::vector<uninitialized_char> v(4 * (1<<20));

GetMyDataFromC(reinterpret_cast<unsigned char*>(&v[0]), v.size()); 
```

我认为这在严格的别名规则下甚至是合法的。

当我将构建时间`v`与 a进行比较时，`vector<unsigned char>`我得到了 ~8 µs 和 ~12 ms。速度快 1000 倍以上。编译器是带有 libc++ 和标志的 clang 3.2：`-std=c++11 -Os -fcatch-undefined-behavior -ftrapv -pedantic -Weverything -Wno-c++98-compat -Wno-c++98-compat-pedantic -Wno-missing-prototypes`

C++11 有一个用于未初始化存储的助手，std::aligned_storage。虽然它需要编译时间大小。

* * *

这是一个附加示例，用于比较总使用量（以纳秒为单位的时间）：

版本=1 ( `vector<unsigned char>`):

```
clang++ -std=c++14 -stdlib=libc++ main.cpp -DVERSION=1 -ftrapv -Weverything -Wno-c++98-compat -Wno-sign-conversion -Wno-sign-compare -Os && ./a.out

initialization+first use: 16,425,554
array initialization: 12,228,039
first use: 4,197,515
second use: 4,404,043 
```

版本=2 ( `vector<uninitialized_char>`):

```
clang++ -std=c++14 -stdlib=libc++ main.cpp -DVERSION=2 -ftrapv -Weverything -Wno-c++98-compat -Wno-sign-conversion -Wno-sign-compare -Os && ./a.out

initialization+first use: 7,523,216
array initialization: 12,782
first use: 7,510,434
second use: 4,155,241 
```

```
#include <iostream>
#include <chrono>
#include <vector>

struct uninitialized_char {
  unsigned char c;
  uninitialized_char() {}
};

void foo(unsigned char *c, int size) {
  for (int i = 0; i < size; ++i) {
    c[i] = '\0';
  }
}

int main() {
  auto start = std::chrono::steady_clock::now();

#if VERSION==1
  using element_type = unsigned char;
#elif VERSION==2
  using element_type = uninitialized_char;
#endif

  std::vector<element_type> v(4 * (1<<20));

  auto end = std::chrono::steady_clock::now();

  foo(reinterpret_cast<unsigned char*>(v.data()), v.size());

  auto end2 = std::chrono::steady_clock::now();

  foo(reinterpret_cast<unsigned char*>(v.data()), v.size());

  auto end3 = std::chrono::steady_clock::now();

  std::cout.imbue(std::locale(""));
  std::cout << "initialization+first use: " << std::chrono::nanoseconds(end2-start).count() << '\n';
  std::cout << "array initialization: " << std::chrono::nanoseconds(end-start).count() << '\n';
  std::cout << "first use: " << std::chrono::nanoseconds(end2-end).count() << '\n';
  std::cout << "second use: " << std::chrono::nanoseconds(end3-end2).count() << '\n';
} 
```

我正在使用 clang svn-3.6.0 r218006

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-22T03:12:00.703

对不起，没有办法避免。

C++11 添加了一个只需要大小的构造函数，但即使这样也会对数据进行值初始化。

你最好的选择是在堆上分配一个数组，把它放在一个`unique_ptr`（如果有的话），然后从那里使用它。

如果您愿意，如您所说，“侵入 STL”，您可以随时获取[EASTL 的副本](https://github.com/take-cheeze/EASTL)来工作。它是某些 STL 容器的变体，允许更多受限的内存条件。您尝试执行的操作的正确实现是为其构造函数提供一个特殊值，这意味着“默认初始化成员”，这对于 POD 类型意味着不做任何事情来初始化内存。当然，这需要使用一些模板元编程来检测它是否是 POD 类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-18T21:39:19.867

最佳解决方案是简单地将分配器更改为对零参数不做任何事情`construct`。这意味着底层类型是相同的，它可以避免任何类型的讨厌的 reinterpret_casting 和潜在的别名违规，并且可以非侵入式地取消初始化任何类型。

```
template<typename T> struct no_initialize : std::allocator<T> {
    void construct(T* p) {}
    template<typename... Args> void construct(T* p, Args&&... args) {
        new (p) T(std::forward<Args>(args)...);
    }
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-22T11:51:07.923

**1**在您的情况下，使用似乎`std::vector`既不必要也不明智。您只希望某个对象为您管理一些原始内存。这可以通过以下方式轻松实现

```
std::unique_ptr<void, void(*)(void*)> p(std::malloc(n), std::free); 
```

**2**如果你真的想使用你可以使用[这里](https://stackoverflow.com/questions/15952412/performance-degradation-due-to-default-initialisation-of-elements-in-standard-co)`std::vector<>`描述的技巧。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-06-10T15:19:57.760

如何使用 vector.reserve() 只分配存储而不初始化它？

# php - 如何使用php传递输入类型中的数据

> ID：11149667
> 
> 赞同：0
> 
> 时间：2012-06-22T03:04:31.467
> 
> 标签：php, jquery, css

嗨，我想知道如何将数据传递到输入类型字段；我只使用 $_POST 方法，而且我没有先使用数据库。请帮忙。

表单.php

```
 <form action="booking.php" method="post">
         <p>
          I want to be pick up at:
         </p>
         <p>
          <input placeholder="Enter Address, Airport, Landmark" type="text" name="pickupplace" id="pickupplace" autocomplete="off" tabindex="1" style="width: 260px;"/>
         </p>
         <p>
          drop off at
         </p>
         <p>
           <input placeholder="Enter Address, Airport, Landmark" type="text" name="dropoff" id="dropoff" autocomplete="off" tabindex="2" style="width: 260px;" />
         </p>

      </form> 
```

在 booking.php

```
<div>
    <p>From</p>
    <p>

   <p>
  <?php

    if(isset($_POST['pickupplace']) == NULL){
        echo "-";
        }
    else{
    echo $_POST['pickupplace'];
    }

    ?></p>

  </div> 
```

在edit_ride.php

```
<div>
   <p>From</p>
   <p> 
  <input type="text" name="pickupplace" placeholder="Enter Address, Airport, Landmark"/>
   </p>

 </div> 
```

我想将数据传递到输入类型的edit_ride.php中，请帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:16:02.560

你可以做的是，你可以合并edit_ride.php和booking.php，这样你就可以直接使用显示值

```
 <input type="text" name="pickupplace" value="<?php echo $_POST['pickupplace']" placeholder="Enter Address, Airport, Landmark"/> 
```

这可能不是唯一的解决方案，因为有时我们需要多个页面，在这种情况下，您也可以考虑使用会话或 cookie。

或者，您也可以使用查询字符串 ($_GET) 方法将值从一个页面传递到另一个页面，而无需在内部页面中提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:25:40.920

如果您需要在编辑 Ride.php 上提交数据，为什么要指定表单操作 booking.php

因此，首先将表单操作更改为 edit_ride.php，然后在您的文本框中接收数据，如下所示页面 edit_ride.php

```
 <input type="text" value="<?php if(isset($_REQUEST['pickupplace'])) echo $_REQUEST['pickupplace']; ?>" name="pickupplace" placeholder="Enter Address, Airport, Landmark"/> 
```

# c# - 当源和目标是同一个数组时，Array.Copy 是否安全？

> ID：11149668
> 
> 赞同：35
> 
> 时间：2012-06-22T03:05:38.097
> 
> 标签：c#

我目前正在使用 Array.Copy 来移动数组：

```
Array.Copy(array, 0, array, 1, array.Length - 1); 
```

这比使用循环要快得多。我知道其他语言（例如 memcpy）中的类似函数是未定义的，或者当编译器过于激进时有时会中断。在 .NET 中考虑这个安全是否合理？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-22T03:07:52.343

是的，它是安全的。[记录](http://msdn.microsoft.com/en-us/library/z50k9bft.aspx)了该方法在这种情况下的行为方式：

> 如果 sourceArray 和destinationArray 重叠，则此方法的行为就像在覆盖destinationArray 之前将sourceArray 的原始值保存在临时位置一样。

# javascript - 如何在 WordPress 厚箱上传窗口中收听使用 jQuery 完成的上传？

> ID：11149675
> 
> 赞同：1
> 
> 时间：2012-06-22T03:06:09.410
> 
> 标签：javascript, jquery, wordpress

我正在注入一些 jQuery 来制作 WordPress 上传厚框所需的 Alt Text 字段。

它拦截“***插入到帖子”***按钮单击并检查该字段是否已填充。

它适用于***图库***和***媒体库***选项卡，但从***计算机***选项卡需要一个“*侦听*器”，当上传完成以更改***插入到帖子***按钮的行为时。

![在此处输入图像描述](../Images/22d8049c9214cbbee6ce73cac59eee4e.png)

* * *

* * *

我正在尝试`setInterval`，但不知道如何*杀死*或*重新创建*它，但也许有人知道是否存在侦听器，或者甚至如何使这段代码工作，因为我怀疑我这里的逻辑是模糊的......

这是代码，已评论。

```
add_action('admin_head-media-upload-popup','so_11149675_required_alt_text');

function so_11149675_required_alt_text()
{
    // Detect current tab ("From Computer" == "type")
    $tab = isset($_GET['tab']) ? $_GET['tab'] : "type";

    // ( 'From Computer' or ( 'Gallery' and 'Library' ) )
    $jquery = ('type' == $tab) ? 'var refreshUpload = setInterval(function(){$(".savesend input").each(checkAltTextPermanent);},500);' : '$(".savesend input").each(checkAltTextOnce);';

    echo <<<HTML
    <script language="javascript" type="text/javascript">
        // var refreshUpload; /* testing */

        // Function called by From Computer tab
        // should run only once -> when the upload table and fields are created
        function checkAltTextPermanent() {
            // Create the required asterisk symbol
            // setInterval creates a loop here
            jQuery('.image_alt th label').each(function(i,e) {
                jQuery('<span class="alignright"><abbr title="required" class="required">*</abbr></span>').prependTo(this);
            }); 

            // Alter button behavior
            // Another loop in the alert box
            jQuery(this).click(function(e) {
                // clearInterval(refreshUpload);
                var value = jQuery(this).parent().parent().parent().find('.image_alt input').val();

                if('' != value) 
                    return true;

                alert ('Please fill the Alt text');
                return false;
            });
        }

        // Function called by Gallery and Library tabs
        function checkAltTextOnce() {
            jQuery(this).click(function(e) {
                var value = jQuery(this).parent().parent().parent().find('.image_alt input').val();

                if('' != value) 
                    return true;

                alert ('Please fill the Alt text');
                return false;
            });
        }

        jQuery(document).ready(function($) {
            // Defined in PHP, calls checkAltTextOnce or checkAltTextPermanent
            {$jquery}

            // Used in Gallery and Libray tabs
            $('.image_alt th label').each(function(i,e) {
                $('<span class="alignright"><abbr title="required" class="required">*</abbr></span>').prependTo(this);
            });
        });
    </script>
HTML;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:21:47.697

试试这个：

```
jQuery(".savesend input").live("click", validateAltText);

function validateAltText() {
    var value = $(".image_alt input").val();

    if (value) 
        return true;

    alert('Please fill the Alt text');
    return false;
} 
```

# c# - 窗口状态最大化不起作用

> ID：11149676
> 
> 赞同：3
> 
> 时间：2012-06-22T03:06:56.773
> 
> 标签：c#, winforms, mdi

我在 mdi 父级中打开一个表单。我在父窗体中显示窗体，并且设计器中新窗体的窗口状态最大化。由于某种原因，窗体出现在 mdi 父级的左上角，并且控制框向右上方，好像它已最大化，但窗口的大小并没有填满屏幕。所以行为就好像它被最大化了，但它没有填满屏幕。我应该怎么办？

我正在使用 C#.Net Winform。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:39:57.527

将您的子窗体的窗口状态设置为最大化。这将使您的表格最大化。

```
childForm.WindowState = FormWindowState.Maximized; 
```

您可以在加载 MdiParent 表单时执行此操作，或者在打开时显示此子表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:55:02.820

确保您的 MdiChilds[`MaximumSize`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.maximumsize.aspx)属性未设置。如果是这样，它将看起来像这样，看起来就像您在问题中描述的那样。

![在此处输入图像描述](../Images/3c943405b593a4a78d367091b8980a0b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T19:33:09.993

来晚了，但我也遇到了这个问题，到目前为止没有人回答为什么会这样。我[在 MSDN 上找到了这个讨论，](https://social.msdn.microsoft.com/Forums/windows/en-US/01c1726b-ae74-462c-b958-6da236a5d632/form-wont-display-as-maximized-even-though-windowstate-is-set-to-maximized?forum=winforms)它解释了@nunespascal 建议的更多真正的解决方法：

基本上我不能在设计器中将 WindowState 设置为最大化，但是如果我将其设置为正常，然后在代码中加载表单时，我将其设置为最大化它可以工作。

这也是[StackOverflow 帖子](https://stackoverflow.com/a/28357658/1736266)中提供的答案。

# javascript - 使用正则表达式验证加拿大邮政编码

> ID：11149678
> 
> 赞同：12
> 
> 时间：2012-06-22T03:07:15.547
> 
> 标签：javascript, regex, validation, postal-code

我编写了一个 JavaScript 来使用正则表达式验证加拿大邮政编码。

但是，它似乎不起作用：

### JavaScript

如果声明：

```
if (myform.zip.value == "" || myform.zip.value == null || myform.zip.value == "Postal Code" || myform.zip.value.length < 12 ) {
    alert("Please fill in field Postal Code. You should only enter 7 characters");
    myform.zip.focus();
    return false;
} 
```

功能：

```
function okNumber(myform) {
  var regex = /^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$/;
  if (regex.test(myform.zip.value) == false) {
    alert("Input Valid Postal Code");
    myform.zip.focus();
    return false;
  }

  return true;
} 
```

### 问题

尽管代码正在执行，但它根本不起作用。当我运行它时，我得到：

> 请填写字段邮政编码。您只能输入 7 个字符

一个有效的邮政编码示例是`T2X 1V4`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T13:56:47.370

这将适用于所有加拿大邮政编码..

```
^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T03:17:25.863

正则表达式方法可以验证[加拿大邮政编码的](https://en.wikipedia.org/wiki/Postal_codes_in_Canada)[**格式**](https://en.wikipedia.org/wiki/Postal_codes_in_Canada)，但不足以保证该邮政编码确实**存在**。

例如：`A9A 0A0` *看起来*像一个有效的加拿大邮政编码，但前向分拣区`A9A` [实际上并不存在](https://en.wikipedia.org/wiki/List_of_A_postal_codes_of_Canada)。

您确定您不想对官方的邮政编码列表进行某种查找吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-20T14:42:55.163

以下是规则 [http://en.wikipedia.org/wiki/Postal_code#Reserved_characters](http://en.wikipedia.org/wiki/Postal_code#Reserved_characters)

```
ABCEGHJKLMNPRSTVXY <-- letter used 
DFIOQU <-- letters not used because it mixes up the reader
WZ     <-- letters used but not in the first letter
With that in mind the following in the proper regex

@[ABCEGHJKLMNPRSTVXY][0-9][ABCEGHJKLMNPRSTVWXYZ][\s][0-9][ABCEGHJKLMNPRSTVWXYZ][0-9] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T02:23:54.900

第一个错误是初始 if 语句中的最后一个条件。 `myform.zip.value.length < 12`应该始终为真，因此您的这部分代码将始终提醒消息`"Please fill in field Postal Code. You should only enter 7 characters"`并将焦点带回该`zip`字段。由于有效的邮政编码最多包含 7 个字符，因此应将其更改为`myform.zip.value.length > 7`.

`T2X 1V4`进行更正后，您在评论中提供的邮政编码将生效。但是，您使用的正则表达式可以简化（如评论中所述）。您可以删除所有实例，`{1}`因为它们是多余的。您可能还打算用 a`?`而不是 a跟随空格`*`。A`?`表示前一个字符或表达式可以出现 0 次或 1 次，而 a`*`表示它可以出现 0 次或*多次*。我认为您的邮政编码最多需要一个空格。

这是我测试过的完整工作代码：

```
<!doctype html>
<html>
<head>
    <title>JavaScript Regex Tester</title>
    <meta charset="utf-8">
    <script>
        function validate(myform) {
            if (myform.zip.value == "" || myform.zip.value == null || myform.zip.value == "Postal Code" || myform.zip.value.length > 7 ) {
                alert("Please fill in field Postal Code. You should only enter 7 characters");
                myform.zip.focus();
                return false;
            }

            return okNumber(myform);
        }

        function okNumber(myform) {
            var regex = /^[ABCEGHJKLMNPRSTVXY]\d[A-Z] *\d[A-Z]\d$/;
            if (regex.test(myform.zip.value) == false) {
                alert("Input Valid Postal Code");
                myform.zip.focus();
                return false;
            }

            return true;
        }
    </script>
</head>
<body>
    <form action="#" name="myform" method="post">
        <input type="text" name="zip" value="Postal Code" />
        <input type="button" value="Submit" onclick="validate(document.myform);"/>
    </form>
</body>
</html> 
```

最后一点，通常当您`[A-Z]`在正则表达式中看到时，至少值得考虑是否应该`[A-Za-z]`接受大写或小写字母。我不知道加拿大邮政编码是否属于这种情况，但通常情况下，大多数表格应该接受任一输入并根据需要更正大小写。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-05T20:30:57.680

这是我使用的加拿大邮政编码的有效表达。它将严格格式化为 A0A 0A0。

```
/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-27T21:53:38.533

这将适用于加拿大邮政编码：

```
/^[a-z][0-9][a-z][- ]?[0-9][a-z][0-9]$/i 
```

它将允许带有空格或连字符的正确 X#X #X# 格式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-12T23:21:07.243

### 工作演示

对于 HTML 中的验证示例，请尝试以下操作。

```
function validate(zipInput) {
   var isValid = hasMinimumInput(zipInput) && okNumber(zipInput);
   indicate(isValid);
}

function hasMinimumInput(zipInput) {
  if (zipInput.value == ""
   || zipInput.value == null
   || zipInput.value == "Postal Code"
   || zipInput.value.length < 7 ) { // 7 instead 12 as min

      alert("Please fill in field Postal Code. You should only enter 7 characters");
      zipInput.focus();
      return false;
  }

  return true;
}

function okNumber(zipInput) {
  var regex = /^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$/;
  if (regex.test(zipInput.value) == false) {

    alert("Input Valid Postal Code");
    zipInput.focus();
    return false;
  }

  return true;
}

function indicate(isValid) {
   document.getElementById("indicateValid").style.display = isValid ? "inline" : "none";
   document.getElementById("indicateInvalid").style.display = isValid ? "none" : "inline";
}
```

```
<h1>Canadian Postal Code</h1>
<form name="myform" onSubmit="validate(this.zip); return false;">
  Postal Code: <input type=text" name="zip"></input>
  <button type="submit">Validate</button>

  <span style="color:green;" id="indicateValid">valid</span>
  <span style="color:red;" id="indicateInvalid">invalid</span>
  <br/>valid Example: <code>T2X 1V4</code>
</form>
```

（注：真实提交被禁用`return false;`）

### 问题

正如[蜥蜴比尔已经回答的那样](https://stackoverflow.com/a/11303685/5730279)：

*   给定`if`测试最小长度`12`而不是`7`

固定的：

```
 if (zipInput.value == ""
   || zipInput.value == null
   || zipInput.value == "Postal Code"
   || zipInput.value.length < 7 ) { // not 12 as min

      alert("Please fill in field Postal Code. You should only enter 7 characters");
      zipInput.focus();
      return false;
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-28T22:48:19.770

为您解答的解决方案，希望对您有所帮助。谢谢你的时间

```
string[] inputName = new string[5];
    string[] inputId = new string[5];
    string[] inputMarks = new string[5];

    Regex StudentId = new Regex(@"\d\d\d\d\d$");
    Regex Marks = new Regex(@"\d\d$");
    Regex StudentName = new Regex(@"^([a-zA-z\s]{5,10})$");

    private void btnClear_Click(object sender, EventArgs e)
    {
        rtShowAll.Clear();

    }

    private void btnAdd_Click(object sender, EventArgs e)
    {
        string Name = txtLastName.Text;
        string id = txtStudentId.Text;
        string marks = txtMarks.Text;

        if ((Name == "") || (!StudentName.IsMatch(Name)))
        {
            MessageBox.Show("space cannot be empty and enter valid characters only");
        }

        else if (Name != "")
        {
            if ((id == null) || (StudentId.IsMatch(id)))
            {
                MessageBox.Show("Enter valid id");
            }
            else if ((id != null) || (StudentId.IsMatch(id)))
            {
                if ((marks == null) || (!Marks.IsMatch(marks)))
                {
                    MessageBox.Show("enter valid marks");
                }

                else if ((marks != null) || (Marks.IsMatch(marks)))
                {
                    for (int i = 0; i <= 5; i++)
                    {
                        inputName[i] = Name;
                        inputId[i] = id;
                        inputMarks[i] = marks;
                        break;
                    }
                }

            }
        }
        txtLastName.Clear();
        txtMarks.Clear();
        txtStudentId.Clear();

    }

    private void btnShowAll_Click(object sender, EventArgs e)
    {

        string result = "";
        for (int i = 0; i <= 5; i++)
        {
            result = inputName[i] + "   " + inputId[i] + "   " + inputMarks[i];
            rtShowAll.Text = result;
            break;
        }

       //list.Add(rtShowAll.Text);
        //string Showall = "";
       // foreach (string s in list)
      // {
       //    Showall += s + " "+ "\n";
        //}
       // rtShowAll.Text = Showall;
    }

    private void btnSearch_Click(object sender, EventArgs e)
    {
        string searchId = txtStudentId.Text;
        string result = "";

        txtStudentId.Text = searchId;

        for (int i = 0; i < 5; i++)
        {
            if (searchId == inputId[i])
            {
                result = inputName[i] + "    " + inputMarks[i];
                rtSearch.Text = result;
            }
            else if (searchId != inputId[i])
            {
                MessageBox.Show("Enter valid Student id");
            }
        }
    }

    private void btnModify_Click(object sender, EventArgs e)
    {
        string id = txtStudentId.Text;
        string newmarks = "";

        for (int i = 0; i < 5; i++)
        {
            if (id == inputId[i])
            {
                newmarks = txtMarks.Text;
                if ((newmarks == null) || (!Marks.IsMatch(newmarks)))
                {
                    MessageBox.Show("enter valid marks");
                }
                else if ((newmarks != null || (Marks.IsMatch(newmarks))))
                {
                    inputMarks[i] = newmarks;
                    MessageBox.Show("marks has been modified");
                }
            }
        }
    }
} 
```

}

# c# - 在网络 3g 模型 sim 上监听端口？

> ID：11149679
> 
> 赞同：0
> 
> 时间：2012-06-22T03:07:17.370
> 
> 标签：c#, sockets, networking

我有一个调制解调器 3G sim 添加计算机访问互联网。我想使用 c# 监听端口 50000。例如：

```
 TcpListener tcpServerListener = new TcpListener(50000);
            tcpServerListener.Start(); //start server 
```

我如何通过 internet.thanks 访问端口 50000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:30:40.690

您需要知道您的设备的 IP 地址是什么，程序在哪里运行。然后您必须使用任何可以连接到网络端口的 TCP 客户端，例如`netcat`或`telnet`.

```
$ nc 1.2.3.4 50000
$ telnet 1.2.3.4 50000 
```

在这里你必须写真实的 IP 地址而不是 1.2.3.4。

当然，这种连接没有任何用处——您只需检查是否可以连接到您的服务器。

# ruby-on-rails - FriendlyId 在模型验证之前触发。我该如何解决这个问题？

> ID：11149682
> 
> 赞同：2
> 
> 时间：2012-06-22T03:07:35.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation, friendly-id

理想情况下，我想要看起来像这样的网址：

/用户/约翰-s

/用户/foo-b

/用户/布拉德-p

我有一个看起来像这样的用户模型：

```
class User < ActiveRecord::Base
  extend FriendlyId
  friendly_id :name, :use => :slugged

  validates :first_name, :presence => true
  validates :last_name, :presence => true

  # "John Smith" becomes "John S."
  def name
    "#{self.first_name.capitalize} #{self.last_name[0].capitalize}."
  end
end 
```

使用此控制台输出可以最好地解释不良行为：

```
[15] pry(main)> User.new(first_name: nil, last_name: nil).save!
   (0.2ms)  BEGIN
   (0.1ms)  ROLLBACK
NoMethodError: undefined method `capitalize' for nil:NilClass 
```

**问题（终于！:)）**

似乎发生的事情是在我的验证之前调用 FriendlyId 并被`first_name`触发`last_name`。这会导致在`name`对 nil 值调用 capitalize 时方法大便。

我该怎么做才能在调用 FriendlyId 之前触发我的验证？实际上更进一步......为什么在建立任何有效性之前就涉及FriendlyId？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:35:26.953

调用它是因为 slug 是在保存验证之前生成的：

[https://github.com/FriendlyId/friendly_id/issues/280](https://github.com/FriendlyId/friendly_id/issues/280)

我不太确定猴子补丁需要什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T14:12:52.700

我最终修复我的方式是这样的：

```
 def name
    "#{self.first_name.capitalize} #{self.last_name[0].capitalize}." if first_name.present? && last_name[0].present?
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-06T15:11:18.253

我认为要走的路是在创建的 before_validation 中设置用户名，该用户名已预先添加到friendly_id 自己的设置 slug 的 before_validation 回调中：

```
class User < ActiveRecord::Base
  extend FriendlyId
  friendly_id :name, :use => :slugged

  # Make sure to prepend it so that it runs before Friendly_id's own callback
  # http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html
  before_validation :set_name, on: :create, prepend: true

  validates :first_name, :presence => true
  validates :last_name, :presence => true

  # To control when new slugs should be generated
  def should_generate_new_friendly_id?
    new_record? || first_name_changed? || last_name_changed?
  end

  private

  def set_name
    "#{self.first_name.capitalize} #{self.last_name[0].capitalize}."
  end
end 
```

希望这可以帮助！

# android - 开始 android 的 phonegap

> ID：11149684
> 
> 赞同：0
> 
> 时间：2012-06-22T03:07:41.667
> 
> 标签：android, cordova

我是 phonegap 和 android 的新手，我已经创建了一个 hello world 应用程序[这个链接](http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)并且它有效，但我不知道下一步是什么。
我尝试从上面的链接阅读 API 文档，但它并不容易理解。例如，我不知道如何在android代码和js之间进行通信（如何从javascript调用android方法并从android代码中获取值以显示在hmtl中）。我知道ajax，但在这种情况下我不知道如何使用它。
所以，我正在寻找phonegap android 电子书或完整的文档和教程。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:23:14.380

您无需担心 phonegap 中的 android 方法。Phonegap 有自己的方法来编写一个android 应用程序。您可以使用 Jquery mobile 和 phonegap 来构建应用程序。基本上 phonegap 是 jquery mobile 的容器，有助于构建具有内置样式和用户界面的应用程序，并且它具有自己的方法来与移动设备交互。

只需阅读以下文档，您就会对 phonegap 和 jquery mobile 有更好的了解。

1.  [使用 JQuery Mobile 进行 Phonegap UI 开发](http://wiki.phonegap.com/w/page/36868306/UI%20Development%20using%20jQueryMobile)

2.  [Phonegap 工作示例](http://mobile.tutsplus.com/category/tutorials/phonegap/)

# java - 我们需要传递哪些参数和标头才能使用 REST API 连接到 Twitter？

> ID：11149693
> 
> 赞同：0
> 
> 时间：2012-06-22T03:09:22.613
> 
> 标签：java, rest, twitter

我正在尝试使用 Java 通过 REST API 连接到 Twitter。我正在使用 POST 将以下查询参数传递给

```
https://api.twitter.com/1/statuses/update.json.

include_entities=true
oauth_consumer_key=**********
oauth_consumer_secret=************
oauth_nonce=***********
oauth_signature_method=HMAC-SHA1
oauth_timestamp=1340329822
oauth_token=***************
oauth_version=1.0
status=test msg 
```

连接到 Twitter 的实际过程是什么？首先我需要使用授权请求获取 auth_token，然后发出 update.json 请求？

有什么要求我是我得到的问题

```
{"error":"Could not authenticate you.","request":"\/1\/statuses\/update.json"} 
```

但我检查了我所有的配置参数（密钥/秘密），它们是正确的。我尝试使用 Twitter4J 连接相同的参数并且工作正常。

当我尝试使用相同的参数从 REST 客户端工具 (http://code.google.com/a/eclipselabs.org/p/restclient-tool/) 调用时，它失败了。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T22:53:45.137

您必须在名为“授权”的标头中传递 oauth_* 参数，而不是与其他 POST 参数一起传递。此处的 Twitter API 文档对此进行了解释：[https ://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)

# django - django, gravatar - add_to_builtins('gravatar.gravatar') 导致页面加载崩溃

> ID：11149696
> 
> 赞同：0
> 
> 时间：2012-06-22T03:09:34.543
> 
> 标签：django, gravatar

add_to_builtins('gravatar.gravatar')

*   正在我的 settings.py 文件中使用，它会导致页面加载崩溃并出现以下错误：

> 回溯（最近一次通话最后）：
> 
> 文件“C:\development\python\Lib\site-packages\django\core\servers\basehttp.py”，第 283 行，运行中 self.result = application(self.environ, self.start_response)
> 
> 文件“C:\development\python\Lib\site-packages\django\contrib\staticfiles\handlers.py”，第 68 行，**调用** return self.application(environ, start_response)
> 
> 文件“C:\development\python\Lib\site-packages\django\core\handlers\wsgi.py”，第 272 行，**调用** 响应 = self.get_response(request)
> 
> 文件“C:\development\python\Lib\site-packages\django\core\handlers\base.py”，第 169 行，在 get_response response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
> 
> 文件“C:\development\python\Lib\site-packages\django\core\handlers\base.py”，第 203 行，在 handle_uncaught_exception 返回 debug.technical_500_response(request, *exc_info)
> 
> 文件“C:\development\python\Lib\site-packages\django\views\debug.py”，第 59 行，位于 Technical_500_response html =reporter.get_traceback_html()
> 
> 文件“C:\development\python\Lib\site-packages\django\views\debug.py”，第 128 行，在 get_traceback_html t = Template(TECHNICAL_500_TEMPLATE, name='Technical 500 template')
> 
> 文件“C:\development\python\Lib\site-packages\django\template\base.py”，第 108 行，在**init** self.nodelist = compile_string(template_string, origin)
> 
> 文件“C:\development\python\Lib\site-packages\django\template\base.py”，第 135 行，在 compile_string parser = parser_class(lexer.tokenize())
> 
> 文件“C:\development\python\Lib\site-packages\django\template\debug.py”，第 34 行，在**init** super(DebugParser, self) 中。**初始化**（词法分析器）
> 
> 文件“C:\development\python\Lib\site-packages\django\template\base.py”，第 208 行，**init** print lib.tags
> 
> AttributeError：“NoneType”对象没有属性“标签”

如果我在不使用 add_to_builtins 功能的情况下使用 gravatar 没有任何问题 - 也就是说，在我的视图中使用普通的旧加载标签。我只是在使用它，所以我想我可能会使用 add_to_builtins 功能。

从外观上看，导入的版本崩溃是因为`import_library(module)`for gravatar.gravatar 返回 None （我知道这一点是因为我打印了那行，它返回 None） - 我所做的有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:41:05.403

哦，重力。

好的，所以我在如何使用 add_to_builtins 导入这个问题上*完全*错了——我需要做的是：

```
add_to_builtins('gravatar.templatetags.gravatar') 
```

我不确定*为什么*，但这是一种享受。现在我不需要任何凌乱的“加载”语句，我可以愉快地调用

```
{% gravatar story.user 40 %} 
```

从我的任何模板。耶！

# jquery - 当功能在浏览器上运行时如何获取价值

> ID：11149699
> 
> 赞同：1
> 
> 时间：2012-06-22T03:10:38.173
> 
> 标签：jquery, html

我在 html 中有动画 div。它每秒向 div 添加 1px，现在我想如果我的 div 的正确位置达到 15，那么一个警报框应该说“hiii”。我做了一个小功能，但它不起作用。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<style>

.wrap { border:solid 1px #F00; width:1000px; height:300px; overflow:hidden; position:relative}

.box { width:200px; height:200px; background:#00F; position:absolute}
</style>

<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script type="text/javascript">

var left=5; 

$(function aniMation(){

    $('.box').css({right:++left})
    setTimeout(aniMation,1000)  

    })

$(function (){

    var box= $(".box").css("right")

    if(box=="10px"){

        alert("hiii")

        }

    })

</script>

</head>

<body>

<div class="wrap">

<div class="box"></div>

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T03:21:08.837

我认为除了页面加载之外，您实际上并没有调用该函数！

从[文档](http://docs.jquery.com/%24)：

* * *

# jQuery（回调）

$(document).ready() 的简写。允许您绑定要在 DOM 文档完成加载时执行的函数。

* * *

我已经检查了您在我的浏览器（Google Chrome）的控制台中调用的行，它们似乎有效。问题是该函数仅在页面加载时执行一次，即在检查为真之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:24:16.790

此函数在页面准备就绪时运行一次，然后不再运行：

```
$(function (){
    var box= $(".box").css("right")

    if(box=="10px"){
        alert("hiii")
        }
    }) 
```

如果你想检查 div 的位置，你必须重复做，也许在移动 div 的同一个函数中。

# java - Vim 插件仅在文件作为 arg 提供以启动命令时才有效

> ID：11149704
> 
> 赞同：2
> 
> 时间：2012-06-22T03:11:51.957
> 
> 标签：java, vim, editor

我正在使用插件[java_getset.vim](http://www.vim.org/scripts/script.php?script_id=490)。问题是插件的命令仅在我以文件作为参数启动 vim 时可用。

```
user@machine~: vim myfile.java 
```

如果启动 vim 并使用 command-t 或 NerdTree 在缓冲区中打开文件，则无法访问插件的命令。所有文件类型检测的东西都被配置和工作（我有语法高亮和缩进）。插件源似乎是根据文件类型插件的 vim 文档写入的。谁能帮助我了解 a 可以做出哪些更改，以便我可以将此插件与 Command-t 结合使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:13:29.210

从源代码的外观来看，如果您重新使用当前缓冲区，似乎不会触发 ftplugin。我不使用 command-t （也不使用这个插件），但如果你要使用它可能会起作用

```
:bdel 
```

并尝试加载您的文件。

尝试自己直接加载文件：

```
:edit myfile.java 
```

- 或者 -

```
:edit! myfile.java 
```

那样有用吗？

# wpf - WPF/INotifyPropertyChanged，改变txtA的值，txtB和txtC应该自动改变？

> ID：11149705
> 
> 赞同：0
> 
> 时间：2012-06-22T03:11:52.547
> 
> 标签：wpf, inotifypropertychanged

我想，一旦我改变了 txtA 的值，txtB 和 txtC 就会自动改变，因为我已经为 ValueA 实现了 INotifyPropertyChanged。

但是它们没有在 UI 上更新。txtB 始终为 100，而 txtC 始终为 -50。

我不知道是什么原因。

我的 Xaml..

```
 <Window x:Class="WpfApplicationReviewDemo.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525">
        <StackPanel>
            <TextBox Name="txtA" Text="{Binding ValueA}" />
            <TextBox Name="txtB" Text="{Binding ValueB}" />
            <TextBox Name="txtC" Text="{Binding ValueC}" />
        </StackPanel>
    </Window> 
```

我后面的代码...

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        this.DataContext = new Model();
    }
}

public class Model : INotifyPropertyChanged
{
    private decimal valueA;
    public decimal ValueA { get {
        return valueA;
    }
        set
        {
            valueA = value;
            PropertyChanged(this, new PropertyChangedEventArgs("ValueA"));
        }
    }

    private decimal valueB;
    public decimal ValueB
    {
        get
        {
            valueB = ValueA + 100;
            return valueB;
        }
        set
        {
            valueB = value;
            PropertyChanged(this, new PropertyChangedEventArgs("ValueB"));
        }
    }

    private decimal valueC;
    public decimal ValueC
    {
        get
        {
            valueC = ValueA - 50;
            return valueC;
        }
        set
        {
            valueC = value;
            PropertyChanged(this, new PropertyChangedEventArgs("ValueC"));
        }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

在我将代码添加到 ValueA 属性的 set 方法后，它就可以工作了。

```
 public decimal ValueA { get {
        return valueA;
    }
        set
        {
            valueA = value;
            PropertyChanged(this, new PropertyChangedEventArgs("ValueA"));
            PropertyChanged(this, new PropertyChangedEventArgs("ValueB"));
            PropertyChanged(this, new PropertyChangedEventArgs("ValueC"));
        }
    } 
```

但我认为它应该为 txtB 和 txtC 自动刷新/更新。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T07:32:39.050

我会处理这个

```
public class Model : INotifyPropertyChanged
{
    private decimal valueA;

    public decimal ValueA
    {
        get { return valueA; }
        set
        {
            if( valueA != value )
            {
                valueA = value;
                PropertyChanged(this, new PropertyChangedEventArgs("ValueA"));
                PropertyChanged(this, new PropertyChangedEventArgs("ValueB"));
                PropertyChanged(this, new PropertyChangedEventArgs("ValueC"));
            }
        }
    }

    public decimal ValueB
    {
        get { return ValueA + 100; }
    }

    public decimal ValueC
    {
        get { return ValueA - 50; }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

或作为

```
public class Model2 : INotifyPropertyChanged
{
    private decimal valueA;
    private decimal valueB;
    private decimal valueC;

    public decimal ValueA
    {
        get { return valueA; }
        set
        {
            if( valueA != value )
            {
                valueA = value;
                PropertyChanged(this, new PropertyChangedEventArgs("ValueA"));

                ValueB = value + 100;
                ValueC = value - 50;
            }
        }
    }

    public decimal ValueB
    {
        get { return valueB; }
        private set
        {
            valueB = value;
            PropertyChanged(this, new PropertyChangedEventArgs("ValueB"));
        }
    }

    public decimal ValueC
    {
        get { return valueC; }
        private set
        {
            valueC = value;
            PropertyChanged(this, new PropertyChangedEventArgs("ValueC"));
        }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:18:16.517

开箱即用它不知道属性 B 和 C 依赖于 A。您需要像您所做的那样告诉它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T03:22:11.123

`PropertyChanged`允许任何数据绑定到属性已更改的对象。当您更改文本框的值时，请遵循代码的逻辑。为 ValueA 调用 set 方法，并将 valueA 设置为 value。

```
set
{
    valueA = value;
    PropertyChanged(this, new PropertyChangedEventArgs("ValueA"));
} 
```

但是，当调用 PropertyChanged 时，它所做的只是让 TextBox 知道值已更改（它已经知道，因为它调用了 set 方法）。另一个第二个 set 方法起作用的原因是它通知其他 TextBoxes 他们的属性也发生了变化，因此它们需要反映这些变化。

```
set
{
    valueA = value;
    PropertyChanged(this, new PropertyChangedEventArgs("ValueA"));
    PropertyChanged(this, new PropertyChangedEventArgs("ValueB"));
    PropertyChanged(this, new PropertyChangedEventArgs("ValueC"));
} 
```

这让所有三个文本框都更新显示以显示新值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T02:11:10.570

您正在谈论的场景通常称为“计算”或“计算”属性。但是，通常建议将它们设为只读。只读计算简化了您的代码，这意味着您不需要支持字段来存储值。

正如您所了解的，INotifyPropertyChanged 不会“自动”检测这些依赖项。您需要根据依赖项显式触发事件。

这实际上是使用 ILWeaving 的完美案例。原因是在编译时 ILWeaving 可以检测到这些依赖关系并正确触发多个事件。

例如，如果您使用 NotifyPropertyWeaver [http://code.google.com/p/notifypropertyweaver/](http://code.google.com/p/notifypropertyweaver/)，您可以这样编写代码。

```
public class Model : INotifyPropertyChanged
{
    public decimal ValueA { get; set; }

    public decimal ValueB
    {
        get { return ValueA + 100;}
    }

    public decimal ValueC
    {
        get { return ValueA - 50; }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

并编译

```
public class Model : INotifyPropertyChanged
{
    public virtual void OnPropertyChanged(string propertyName)
    {
        var propertyChanged = PropertyChanged;
        if (propertyChanged != null)
        {
            propertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    decimal valueA;

    public decimal ValueA
    {
        get { return valueA; }
        set
        {
            if (!decimal.Equals(valueA, value))
            {
                valueA = value;
                OnPropertyChanged("ValueB");
                OnPropertyChanged("ValueC");
                OnPropertyChanged("ValueA");
            }
        }
    }

    public decimal ValueB
    {
        get { return ValueA + 100;}
    }

    public decimal ValueC
    {
        get { return ValueA - 50; }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

请注意，方法 OnPropertyChanged 已与三个调用一起被注入到“A”的设置器中。

请注意，“B”和“C”文本框也应该是只读的

```
 <TextBox Name="txtA" Text="{Binding ValueA}" />
    <TextBox Name="txtB" Text="{Binding ValueB}" IsReadOnly="True" />
    <TextBox Name="txtC" Text="{Binding ValueC}" IsReadOnly="True" /> 
```

# java - Java队列的最佳实现？

> ID：11149707
> 
> 赞同：76
> 
> 时间：2012-06-22T03:12:01.573
> 
> 标签：java, queue

我正在（在 Java 中）研究递归图像处理算法，该算法从中心点向外递归遍历图像的像素。

不幸的是，这会导致堆栈溢出。所以我决定切换到基于队列的算法。

现在，这一切都很好——但考虑到它的队列将在很短的时间内分析数千个像素，同时不断弹出和推送，而不保持可预测的状态（它可能在长度 100 之间，和 20000），队列实现需要具有显着的快速弹出和推送能力。

链表看起来很有吸引力，因为它能够将元素推送到自身而不重新排列列表中的任何其他内容，但为了使其足够快，它需要轻松访问其头部和尾部（或次要-last 节点，如果它不是双重链接的）。可悲的是，我找不到任何与 Java 中链表的底层实现相关的信息，所以很难说链表是否真的是要走的路……

这让我想到了我的问题。对于我打算做的事情，Java 中 Queue 接口的最佳实现是什么？（除了队列的头部和尾部之外，我不希望编辑甚至访问任何东西——我不希望进行任何类型的重新排列或任何事情。另一方面，我确实打算做很多推送和弹出，队列的大小会发生很大变化，因此预分配效率低下）

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-06-22T03:29:31.883

采用：

```
Queue<Object> queue = new LinkedList<>(); 
```

您可以使用`.offer(E e)`将元素附加到队列的末尾，以及`.poll()`出列和检索队列的头部（第一个元素）。

Java 定义了接口`Queue`，[LinkedList](https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html "链表<E>")提供了实现。

它还维护对 Head 和 Tail 元素的引用，您可以分别获取`.getFirst()`它们`.getLast()`。

*感谢@Snicolas 建议队列接口*

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-02-08T13:58:10.110

如果你使用 LinkedList 要小心。如果你像这样使用它：

```
LinkedList<String> queue = new LinkedList<String>(); 
```

那么您可以违反队列定义，因为可以删除除第一个之外的其他元素（LinkedList 中有这样的方法）。

但是如果你像这样使用它：

```
Queue<String> queue = new LinkedList<String>(); 
```

应该没问题，因为这是提醒用户，插入应该只发生在后面，而删除应该只发生在前面。

您可以通过将 LinkedList 类扩展为引发任何违规方法的 UnsupportedOperationException 的 PureQueue 类来克服 Queue 接口的缺陷实现。或者，您可以通过仅使用一个类型为 LinkedList 对象、列表的字段创建 PureQueue 来采用聚合方法，并且唯一的方法将是默认构造函数、复制构造函数`isEmpty()`、、、、、和。所有这些方法都应该是单行的，例如：`size()``add(E element)``remove()``element()`

```
/**
* Retrieves and removes the head of this queue.
* The worstTime(n) is constant and averageTime(n) is constant.
*
* @return the head of this queue.
* @throws NoSuchElementException if this queue is empty.
*/
public E remove()
{
    return list.removeFirst();
} // method remove() 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-22T04:43:26.413

查看[Deque](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html)接口，它提供了两端的插入/删除。LinkedList 实现了该接口（如上所述），但对于您的使用，ArrayDeque 可能会更好——您不会为每个节点产生常量对象分配的成本。再说一次，您使用哪种实现可能并不重要。

正常多态性的优点开始发挥作用：针对 Deque 接口而不是它的任何特定实现进行编写的美妙之处在于，您可以非常轻松地切换实现以测试哪个实现最佳。只需更改其中的行，`new`其余代码保持不变。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-06-28T14:24:11.273

在 Java 中实现 Stack 和 Queue 时，最好使用 ArrayDeque 而不是 LinkedList。当用作堆栈时，ArrayDeque 可能比 Stack 接口（而 Stack 是线程安全的）快，而当用作队列时，它可能比 LinkedList 快。看看这个链接[使用 ArrayDeque 而不是 LinkedList 或 Stack](https://github.com/google/error-prone/issues/257)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T03:44:11.653

如果您知道队列中可能的项目数量的上限，则循环缓冲区比 LinkedList 更快，因为 LinkedList 为队列中的每个项目创建一个对象（链接）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-29T19:53:41.613

我认为您可以使用简单的类似实现

```
package DataStructures;

public class Queue<T> {

   private Node<T> root;

   public Queue(T value) {
      root = new Node<T>(value);
   }

   public void enque(T value) {
      Node<T> node = new Node<T>(value);
      node.setNext(root);
      root = node;
   }

   public Node<T> deque() {

      Node<T> node = root;
      Node<T> previous = null;

      while(node.next() != null) {
         previous = node;
         node = node.next();
      }
      node = previous.next();
      previous.setNext(null);
      return node;
   }

   static class Node<T> {

      private T value;
      private Node<T> next;

      public Node (T value) {
         this.value = value;
      }

      public void setValue(T value) {
         this.value = value;
      }

      public T getValue() {
         return value;
      }

      public void setNext(Node<T> next) {
         this.next = next;
      }

      public Node<T> next() {
         return next;
      }
   }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-13T14:34:14.763

但是，如果您仍想使用递归算法，您可以将其更改为[“尾递归”](https://en.wikipedia.org/wiki/Tail_call)，这可能在 JVM 中进行了优化以避免堆栈溢出。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-10T05:00:42.270

O(1) 访问第一个和最后一个节点。

```
class Queue {

    private Node head;
    private Node end;

    public void enqueue(Integer data){

        Node node = new Node(data);
        if(this.end == null){
            this.head = node;
            this.end = this.head;
        }
        else {
            this.end.setNext(node);
            this.end = node;
        }
    }

    public void dequeue (){

        if (head == end){
            end = null;
        }

        head = this.head.getNext();
    }

    @Override
    public String toString() {
        return head.getData().toString();
    }

    public String deepToString() {

        StringBuilder res = new StringBuilder();
        res.append(head.getData());

        Node cur = head;
        while (null != (cur = cur.getNext())){
            res.append(" ");
            res.append(cur.getData());

        }
        return res.toString();
    }
}

class Node {

    private Node next;
    private Integer data;

    Node(Integer i){
        data = i;
    }

    public Integer getData() {
        return data;
    }

    public Node getNext() {
        return next;
    }

    public void setNext(Node next) {
        this.next = next;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-19T11:08:13.300

这是带有**Iterator**和**Iterable**接口的**队列实现**

 ****队列大小会随着它变满而增加

**队列接口**

```
package com.practice.ds.queue;

import com.practice.ds.queue.exception.QueueException;

public interface QueueInterface<T> {

    public boolean empty();

    public void enqueue(T item);

    public void dequeue() throws QueueException;

    public T front() throws QueueException;

    public void clear();
} 
```

**自定义异常类**

```
package com.practice.ds.queue.exception;

public class QueueException extends Exception {

    private static final long serialVersionUID = -884127093599336807L;

    public QueueException() {
        super();
    }

    public QueueException(String message) {
        super(message);
    }

    public QueueException(Throwable e) {
        super(e);
    }

    public QueueException(String message, Throwable e) {
        super(message, e);
    }
} 
```

**队列的实现**

```
package com.practice.ds.queue;

import java.util.Iterator;

import com.practice.ds.queue.exception.QueueException;

public class Queue<T> implements QueueInterface<T>, Iterable<T> {

    private static final int DEFAULT_CAPACITY = 10;
    private int current = 0;
    private int rear = 0;
    private T[] queueArray = null;
    private int capacity = 0;

    @SuppressWarnings("unchecked")
    public Queue() {
        capacity = DEFAULT_CAPACITY;
        queueArray = (T[]) new Object[DEFAULT_CAPACITY];
        rear = 0;
        current = 0;
    }

    @Override
    public boolean empty() {
        return capacity == current;
    }

    @Override
    public void enqueue(T item) {
        if(full())
            ensureCapacity();
        queueArray[current] = item;
        current++;
    }

    @Override
    public void dequeue() throws QueueException {
        T dequeuedItem = front();
        rear++;
        System.out.println("Dequed Item is " + dequeuedItem);
    }

    @Override
    public T front() throws QueueException {
        return queueArray[rear];
    }

    @Override
    public void clear() {
        for (int i = 0; i < capacity; i++)
            queueArray[i] = null;
        current = 0;
        rear = 0;
    }

    @SuppressWarnings("unchecked")
    private void ensureCapacity() {
        if (rear != 0) {
            copyElements(queueArray);
        } else {
            capacity *= 2;
            T[] tempQueueArray = (T[]) new Object[capacity];
            copyElements(tempQueueArray);
        }
        current -= rear;
        rear = 0;
    }

    private void copyElements(T[] array) {
        for (int i = rear; i < current; i++)
            array[i - rear] = queueArray[i];
        queueArray = array;
    }

    @Override
    public Iterator<T> iterator() {
        return new QueueItearator<T>();
    }

    public boolean full() {
        return current == capacity;
    }

    private class QueueItearator<T> implements Iterator<T> {

        private int index = rear;

        @Override
        public boolean hasNext() {
            return index < current;
        }

        @SuppressWarnings("unchecked")
        @Override
        public T next() {
            return (T) queueArray[index++];
        }
    }

} 
```****

# c# - .NET 面试、代码结构和设计

> ID：11149710
> 
> 赞同：7
> 
> 时间：2012-06-22T03:12:25.880
> 
> 标签：c#, code-structure

在一次采访中，我收到了以下 .NET 问题。我不知道为什么我的分数很低。不幸的是，我没有得到反馈。

**问题：**

文件 hockey.csv 包含曲棍球超级联赛的结果。“For”和“Against”列包含该赛季每支球队的进球总数（因此，阿拉巴马队对阵对手打进79球，对阵对手打进36球）。

编写一个程序，打印出“支持”和“反对”目标差异最小的团队的名称。

hockey.csv 的结构看起来像这样（它是一个有效的 csv 文件，但我只是复制了这里的值来了解一下）

团队 - 支持 - 反对

阿拉巴马州 79 36

华盛顿 67 30

印第安纳州 87 45

纽卡斯尔 74 52

佛罗里达州 53 37

纽约 46 47

桑德兰 29 51

洛娃 41 64

内华达州 33 63

波士顿 30 64

内华达州 33 63

波士顿 30 64

**解决方案：**

```
class Program
{
    static void Main(string[] args)
    {
        string path = @"C:\Users\<valid csv path>";

        var resultEvaluator = new ResultEvaluator(string.Format(@"{0}\{1}",path, "hockey.csv"));
        var team = resultEvaluator.GetTeamSmallestDifferenceForAgainst();

        Console.WriteLine(
            string.Format("Smallest difference in ‘For’ and ‘Against’ goals > TEAM: {0}, GOALS DIF: {1}",
            team.Name, team.Difference ));

        Console.ReadLine();
    }
}

public interface IResultEvaluator
{
    Team GetTeamSmallestDifferenceForAgainst();
}

public class ResultEvaluator : IResultEvaluator
{
    private static DataTable leagueDataTable;
    private readonly string filePath;
    private readonly ICsvExtractor csvExtractor;

    public ResultEvaluator(string filePath){
        this.filePath = filePath;
        csvExtractor = new CsvExtractor();
    }

    private DataTable LeagueDataTable{
        get
        {
            if (leagueDataTable == null)
            {
                leagueDataTable = csvExtractor.GetDataTable(filePath);
            }

            return leagueDataTable;
        }
    }

    public Team GetTeamSmallestDifferenceForAgainst() {
        var teams = GetTeams();
        var lowestTeam = teams.OrderBy(p => p.Difference).First();
        return lowestTeam;
    }

    private IEnumerable<Team> GetTeams() {
        IList<Team> list = new List<Team>();

        foreach (DataRow row in LeagueDataTable.Rows)
        {
            var name = row["Team"].ToString();
            var @for = int.Parse(row["For"].ToString());
            var against = int.Parse(row["Against"].ToString());
            var team = new Team(name, against, @for);
            list.Add(team);
        }

        return list;
    }
}

public interface ICsvExtractor
{
    DataTable GetDataTable(string csvFilePath);
}

public class CsvExtractor : ICsvExtractor
{
    public DataTable GetDataTable(string csvFilePath)
    {
        var lines = File.ReadAllLines(csvFilePath);

        string[] fields;

        fields = lines[0].Split(new[] { ',' });
        int columns = fields.GetLength(0);
        var dt = new DataTable();

        //always assume 1st row is the column name.
        for (int i = 0; i < columns; i++)
        {
            dt.Columns.Add(fields[i].ToLower(), typeof(string));
        }

        DataRow row;
        for (int i = 1; i < lines.GetLength(0); i++)
        {
            fields = lines[i].Split(new char[] { ',' });

            row = dt.NewRow();
            for (int f = 0; f < columns; f++)
                row[f] = fields[f];
            dt.Rows.Add(row);
        }

        return dt;
    }
}

public class Team
{
    public Team(string name, int against, int @for)
    {
        Name = name;
        Against = against;
        For = @for;
    }

    public string Name { get; private set; }

    public int Against { get; private set; }

    public int For { get; private set; }

    public int Difference
    {
        get { return (For - Against); }
    }
} 
```

输出：对目标的最小差异`for' and`> 球队：波士顿，目标 DIF：-34

有人可以查看我的代码并在这里看到任何明显错误的地方吗？他们只对代码的结构/设计以及程序是否产生正确的结果（即最低差异）感兴趣。非常感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T03:24:59.770

也许是因为你写了这么多行代码，当它可以只是

```
var teamRecords = File.ReadAllLines("path");
var currentLow = int.MaxValue;
foreach (var record in teamRecords.Skip(1).ToList())
{
    var tokens = record.Split(',');
    if (tokens.Length == 3)
    {
        int forValue = 0;
        int againstValue = 0;

        if (int.TryParse(tokens[1], out forValue) && int.TryParse(tokens[2], out againstValue))
        {
            var difference = Math.Abs(forValue - againstValue);
            if (difference < currentLow) currentLow = difference;
        }
     }
 }

 Console.WriteLine(currentLow); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T04:46:10.713

我猜你错过了理解这个问题。面试官询问“支持”和“反对”目标之间的最小差异，您的程序正在计算最佳目标平均值。如果您看到最小的差异，那么它是**纽约**而不是**波士顿**。让我在这里更新**fenix2222**代码。

```
var teamRecords = File.ReadAllLines(Path.Combine(Application.StartupPath,"teams.csv"));
            var currentLow = int.MaxValue; //just to make sure that difference is initially less than currentLow.
            foreach (var record in teamRecords.Skip(1).ToList())
            {
                var tokens = record.Split(',');
                if (tokens.Length == 3)
                {
                    int forValue = 0;
                    int againstValue = 0;

                    if (int.TryParse(tokens[1], out forValue) && int.TryParse(tokens[2], out againstValue))
                    {
                        var difference = 0;
                        if (forValue > againstValue)
                            difference = forValue - againstValue;
                        else
                            difference = againstValue - forValue;

                        if (difference < currentLow) 
                            currentLow = difference;
                    }
                }
            } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T04:57:57.480

Just a few things from a cursory overview:

1.  There are 2 interfaces, but there is no value in either of their uses.
2.  There is zero reason to introduce a DataTable to the problem statement.
3.  The code is overly-complex.
4.  The use of IList and IEnumerable in the GetTeams method look to be used 'just because'.
5.  The ResultEvaluator class is not reusable, i.e., as soon as you instantiate the class, you can never re-set the csv file. You can only keep calling the same method (GetTeamSmallestDifferenceForAgainst) over and over; no other public properties are available.
6.  In the GetDataTable method, the string[] fields is declared on one line and then the value is set on the next line.
7.  There is less than zero reasons to use the @ symbol for the 'for' paramater in the Team class' constructor; just rename the reserved word 'for' to something else.
8.  There are many constructs from 3.5+ .NET that could be used to solve the problem much easier; this just shows a lack of understanding of the language.

From the looks, it really appears you were trying to show you knew quite a bit more than what was being asked in the problem statement. But, how the knowledge you knew is being used in this exercise is quite scary, and not in a good way.

In the future, I'd recommend just solving the problem at hand and don't over-think it. Keep it simple.

# c++ - 无向量类的动态对象数组

> ID：11149711
> 
> 赞同：1
> 
> 时间：2012-06-22T03:12:37.677
> 
> 标签：c++, dynamic-arrays

我正在为我的暑期 OO 课做作业，我们需要写两节课。一个被称为`Sale`，另一个被称为`Register`。我写了我的`Sale`课；这是`.h`文件：

```
enum ItemType {BOOK, DVD, SOFTWARE, CREDIT};

class Sale
{
public:
    Sale();         // default constructor, 
            // sets numerical member data to 0

    void MakeSale(ItemType x, double amt);  

    ItemType Item();        // Returns the type of item in the sale
    double Price();     // Returns the price of the sale
    double Tax();       // Returns the amount of tax on the sale
    double Total();     // Returns the total price of the sale
    void Display();     // outputs sale info 

private:
    double price;   // price of item or amount of credit
    double tax;     // amount of sales tax 
    double total;   // final price once tax is added in.
    ItemType item;  // transaction type
}; 
```

对于这个`Register`类，我们需要`Sale`在我们的成员数据中包含一个动态的对象数组。我们不能使用向量类。这是怎么做到的？

这是我的“注册”“.h”

```
class Register{
public:

Register(int ident, int amount);
~Register();
int GetID(){return identification;}
int GetAmount(){return amountMoney;}
void RingUpSale(ItemType item, int basePrice);
void ShowLast();
void ShowAll();
void Cancel();
int SalesTax(int n);

private:

int identification;
int amountMoney;

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:28:53.367

在 Register 类中，您只需要一个 Sale 对象数组，以及一个用于记住进行了多少销售的项目计数器。

例如，如果寄存器中有 10 个项目，您将需要这样做：

```
int saleCount = 10;
Sale[] saleList = new Sale[saleCount]; 
```

要使数组动态化，您需要在每次销售计数增加时创建一个新的销售数组，并将 saleList 中的所有项目复制到新的销售列表中。最后在最后添加新的销售。

```
saleCount++;
Sale[] newSaleList = new Sale[saleCount];
//copy all the old sale items into the new list.
for (int i=0; i<saleList.length; i++){
  newSaleList[i] = saleList[i];
}
//add the new sale at the end of the new array
newSaleList[saleCount-1] = newSale;
//set the saleList array as the new array
saleList = newSaleList; 
```

# android - 如何将 inMobi 广告提供商与 PhoneGap 应用程序（适用于 android）集成？

> ID：11149712
> 
> 赞同：2
> 
> 时间：2012-06-22T03:13:14.587
> 
> 标签：android, cordova

**如何将 inMobi 广告提供商与 PhoneGap 应用程序（适用于 android）集成？**

# jquery - Jquery data() 返回未定义

> ID：11149713
> 
> 赞同：0
> 
> 时间：2012-06-22T03:13:38.470
> 
> 标签：jquery, jinja2

我一直在做一个简单的 jquery data() 测试。但是它返回未定义。它可以在 jsfiddle 上运行（http://jsfiddle.net/yrCdj/）。

我有一个 jinja2 循环，它填充一个 div，我想用一些元数据标记它以供以后使用：

```
{% for s in siteInfo[:markers[0]] %}
<div class="sitebox2">
<script>
$(".sitebox2:last").append('<a href="/sites/d?siteid={{s[5]}}">{{s[0]}}</a><br>Distance                    from {{loc}} is {{s[6]}} km.<br>');
$(".sitebox2:last").data('fruit', 'apple');
</script>

</div>
{% endfor %} 
```

然后我尝试调用这些数据来测试它是否有效：

```
<script type="text/javascript">
$(".sitebox2").each(function(k, v) {
    var f = $(v).data('fruit');
alert(f);
});

</script> 
```

它返回未定义。关于出了什么问题的任何想法？它看起来像一个范围问题，所以也许我需要找到一种直接从 DOM 获取数据的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:42:33.937

尝试在关闭 div 标记之后执行脚本。

```
{% for s in siteInfo[:markers[0]] %}
<div class="sitebox2">
  <a href="/sites/d?siteid={{s[5]}}">{{s[0]}}</a><br>Distance from {{loc}} is {{s[6]}} km.<br>
</div>
<script>
  $(".sitebox2:last").data('fruit', 'apple');
</script>
{% endfor %} 
```

或者您可以使用`data`如下属性：

```
{% for s in siteInfo[:markers[0]] %}
<div class="sitebox2" data-fruit="apple">
  <a href="/sites/d?siteid={{s[5]}}">{{s[0]}}</a><br>Distance from {{loc}} is {{s[6]}} km.<br>
</div>
{% endfor %} 
```

# visual-studio-2008 - 在 Visual Studio 中递归展开折叠区域？（大纲）

> ID：11149718
> 
> 赞同：4
> 
> 时间：2012-06-22T03:14:29.713
> 
> 标签：visual-studio-2008, outlining

我正在使用 Visual Studio 2008，似乎一旦我折叠了所有区域，我就可以通过单击/命令展开某个区域的所有级别。`ctrl`当您单击折叠区域时， Notepad++ 具有此功能，它会递归地扩展其中的所有区域。这很棒。

有人知道具有此功能的插件或宏吗？我使用的是自定义语言，也不是 C++/C# 顺便说一句

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-01-10T09:46:34.700

我正在使用 VS 2017，但我认为它的工作原理相同：

默认情况下，`ctrl`++`M`在当前行展开`ctrl`。`E`

但是，如果您选择多行（例如，`shift`+ `drag the mouse`），则`ctrl`+`ME`会扩展所有这些行的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-04T03:25:16.040

只是这个：

1.  单击折叠的区域名称

[![在此处输入图像描述](../Images/91bb4f1164bf7c0fc0d51236209ab00a.png)](https://i.stack.imgur.com/oX8BI.png)

2.  按`Ctrl`+ `M`, `Ctrl`+`E`

# java - 乘法没有乘法、除法和按位运算符，也没有循环。递归

> ID：11149719
> 
> 赞同：0
> 
> 时间：2012-06-22T03:14:31.637
> 
> 标签：java, algorithm

```
public class MultiplyViaRecursion{

    public static void main(String[] args){

        System.out.println("8 * 9 == " + multiply(8, 9));
        System.out.println("6 * 0 == " + multiply(6, 0));
        System.out.println("0 * 6 == " + multiply(0, 6));
        System.out.println("7 * -6 == " + multiply(7, -6));
    }

    public static int multiply(int x, int y){
        int result = 0;

        if(y > 0)
            return result = (x + multiply(x, (y-1)));
        if(y == 0)
            return result;
        if(y < 0)
            return result = -multiply(x, -y);   

        return result;
    }
} 
```

我的问题很简单基本，为什么在每个“if”之后“return”仍然无法通过编译，错误显示缺少返回。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T03:21:04.097

简单地说：Java 编译器并不那么聪明。它不能推断出您的三个 `if`陈述之一**必须**评估为真。而且由于编译器认为所有`if`条件都有可能失败，它认为有可能超越`if`块，此时没有`return`语句。

相反，尝试使用一个`if else`块，像这样。

```
public static int multiply(int x, int y) {
    int result = 0;

    if (y > 0)
        return result = (x + multiply(x, (y - 1)));
    else if (y == 0)
        return result;
    else 
        return result = -multiply(x, -y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:21:00.203

因为编译器无法猜测您的三个 IF 涵盖了所有情况。如果要简化代码，可以删除最后一个不必要的 IF ：

```
public static int multiply(int x, int y){
    int result = 0;
    if(y > 0)
        return result = (x + multiply(x, (y-1)));
    if(y == 0)
        return result;
    return result = -multiply(x, -y);   
} 
```

顺便说一句，您还可以删除`result`变量：

```
public static int multiply(int x, int y){
    if(y > 0)
        return (x + multiply(x, (y-1)));
    if(y == 0)
        return 0;
    return -multiply(x, -y);   
} 
```

# vba - Excel VBA中的数据标签

> ID：11149721
> 
> 赞同：0
> 
> 时间：2012-06-22T03:14:50.653
> 
> 标签：vba, excel

我实际上已经编写了允许用户从五个字段中查询数据并使用五个字段中的两个绘制散点图的代码。如果我单击某个随机数据点，我希望它显示所有相应的五个数据字段。这可能吗？

[PS 我无法上传任何照片，因为我是新来的。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T02:30:47.967

我有一个图表代码，当我点击它时，它会显示一个包含系列详细信息的文本框。我可以提供基础知识，您可以尝试使用它玩 aorund。

注意：当您有一个带有代码的图表表时，这有效。不知道它会如何与 Excel 工作表上的多个图表一起使用。

```
Private Sub Chart_MouseDown(ByVal Button As Long, ByVal Shift As Long, ByVal x As Long, ByVal y As Long)

Dim ElementID as Long, Arg1 as Long, Arg2 as Long

Me.GetChartElement x, y, ElementID, Arg1, Arg2

If ElementID = xlSeries Then 'Making sure that a series was selected

'Do some code here, using any or all of the variables gathered in the Me.GetChartElement

Else

End If

End Sub 
```

# powershell - IIS6 列出应用程序池正在运行的 .net 版本

> ID：11149724
> 
> 赞同：2
> 
> 时间：2012-06-22T03:15:10.497
> 
> 标签：powershell, iis-6

我想枚举在服务器上运行的应用程序池。在 IIS7 中，我可以通过 WMI WIn32_Process 提取 .net 版本，但在 IIS6 中不存在。如何获取运行工作进程/应用程序池的 .net 版本？

例如：

DefaultAppPool v2.0.50727

在 IIS6 中，.Net 设置在 ASP.NET 选项卡下的虚拟目录中，应用程序池设置在虚拟目录选项卡下。仅供参考：我正在运行 Windows 2003 SP2 IIS6。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T04:46:19.710

IIS6 应用程序池的问题在于，与 IIS7 不同，它们不知道将哪个版本的 .NET Framework 加载到其中。

IIS6*网站*通过站点或子应用程序的脚本映射指向的 ASP.NET 版本确定将哪个 .NET Framework 运行时加载到池中。工作进程只会盲目地加载映射到扩展（或通配符映射中定义的任何内容）的必需 ISAPI DLL。

这种旧方法通常会导致很多麻烦，因为分配给同一个池的两个不同站点可能被配置为运行不同版本的 ASP.NET，而您会得到臭名昭著的：

![在此处输入图像描述](../Images/abe10d342045b246dd00750a5de3402d.png)

...并将以下事件记录到 Windows 应用程序日志中：

```
事件类型：错误
事件源：ASP.NET 2.0.50727.0
事件类别：无
事件编号：1062
日期：2011 年 12 月 1 日
时间：12:31:43
用户：不适用
电脑：KK-DEBUG
描述：
不可能同时运行两个不同版本的 ASP.NET
IIS 进程。请使用 IIS 管理工具重新配置您的
服务器在单独的进程中运行应用程序。

```

确定应用程序池配置为运行哪个 .NET 版本的唯一方法是遍历分配了该池的每个站点并检查原始脚本映射。

唯一的问题是（例如），无论出于何种原因，您有一个不再使用的配置错误的站点（或子应用程序）被设置为使用不同版本的 ASP.NET，例如：

```
站点 .NET 版本应用程序池
==================================================== ==========
网站 1 ASP.NET 4.0 应用程序池 1
WebSite2（不再使用）ASP.NET 2.0 AppPool1

```

在这种情况下，您必须决定哪个站点优先确定框架版本。

此 PowerShell 脚本可能会帮助您确定每个池中使用的 ASP.NET 版本：

```
# Walk sites
$allsites = ([adsi]"IIS://Localhost/W3SVC").children | where { $_.SchemaClassName -eq "IIsWebServer" }
$pools = @()

foreach($site in $allsites)
{
  $path = "IIS://Localhost/W3SVC/" + $site.Name + "/root"
  $siteRoot = [adsi]$path
  $sitePool = $siteRoot.AppPoolId

  $aspx = $siteRoot.ScriptMaps | where { $_.StartsWith(".aspx") }

  if( $aspx.Contains("v1.1")) {
    $runtime = "1.1"
  } elseif ($aspx.Contains("v2.0")) {
    $runtime = "2.0"
  } elseif( $aspx.Contains("v4.0")) {
    $runtime = "4.0"
  } else {
    $runtime = "Unknown"
  }

  $v =  @{AppPool = $siteRoot.AppPoolId; RunTime = $runtime; SiteId = $site.Name}
  $pools += $v
}

$pools | Sort-Object { $_.AppPool } | % { Write-Host $_.AppPool $_.SiteId $_.RunTime } 
```

它只遍历根级别的站点，不会递归地遍历每个站点以识别子应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:21:42.477

我认为您可以执行以下语句：

```
$computer = "LocalHost" 
$namespace = "root\MicrosoftIISv2" 
Get-WmiObject -class IIsApplicationPoolSetting -computername $computer -namespace $namespace 
```

并使用`ManagedRuntimeVersion`返回对象中的属性。

**编辑**：正如安迪在下面的评论中所说，这不起作用。但是，如果您在 WS2003 上，您可以尝试这个并解析返回的结果：

```
C:\windows\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -lk 
```

知道你正在运行什么操作系统会很好。

# java - 使用 webdriver 和 selenium 2.22 仅获取即时文本 html

> ID：11149725
> 
> 赞同：0
> 
> 时间：2012-06-22T03:15:33.277
> 
> 标签：java, xpath, selenium, webdriver

所以我必须解析这样结构的 HTML

```
<div>
    Hello
    <div name="DONOTWANT">
        Text that I dont want and other junk
    </div>
    World
</div> 
```

我需要一个可以检索 HTML 块中的即时文本的解决方案。在这个例子中，我想要“Hello World”，而忽略所有其他文本。关于如何使用 webdriver 和 selenium 执行此操作有什么建议吗？我正在用 java 编程，但是，如果您有可以翻译的另一种语言的解决方案，我也会接受。

目前，如果我有类似的东西

```
String foo = driver.findElement(By.xpath(".//div")).getText(); 
```

foo 将包含“我不想要的 Hello Text 和其他垃圾世界”，这不是最佳的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:50:06.417

我之前遇到过类似的问题，我不得不在 JavascriptExecutor 的帮助下使用 java 脚本来解决它。

你可以查看我之前在这个网站上问过的这个问题 - [Reading text using selenium webdriver(xpath)](https://stackoverflow.com/questions/10811066/reading-text-using-selenium-webdriverxpath)

让我知道这是否可以解决您的问题。

# django - django - settings.py 似乎加载了多次？

> ID：11149730
> 
> 赞同：13
> 
> 时间：2012-06-22T03:16:11.260
> 
> 标签：django, pycharm

编辑我算错了 - 它被打印了两次，而不是四次。

我把这个放在我的`settings.py`

```
print 'ola!' 
```

并且在启动时“ola”被打印了*两次*！这似乎是我的 pycharm django 项目有问题......有什么想法会发生这种情况吗？它不在循环或任何东西中（无论如何我都知道）

干杯！

**是的，根据评论，仅称为“rohit”的用户已确定可以在此处找到解决方案：**https** [:](https://stackoverflow.com/a/2110584/1061426) //stackoverflow.com/a/2110584/1061426 ~ 请参阅有关禁用重新加载的评论。**

 ****注意**我现在还没有我的 Django 代码，所以我不知道 noload 会做什么。祝你好运，士兵们。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-16T20:31:33.877

如果您在 settings.py 中打印出线程 ID，您将看到 settings.py 实际上是在两个不同的线程上加载的。

有关更多信息，请参阅[此 stackoverflow 响应](https://stackoverflow.com/questions/2110545/why-is-init-module-in-django-project-loaded-twice)和[本文](http://nedbatchelder.com/blog/201112/duplicitous_django_settings.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T07:24:21.133

实际上 Django 所做的是在设置周围放置一个包装器。它基本上是一个对象（设置对象，如果你愿意的话），它可以让你访问一些直接的设置器，比如`settings.WHATEVER`，所以看起来你访问了 settings.py 中的全局变量。

我真的不记得为什么导入发生两次。当我研究[django-dynamic-settings](https://github.com/sternoru/django-dynamic-settings)时，我曾研究过它，它使用与 Django 本身非常相似的方法。无论如何，如果您对“魔术”感兴趣，您可以按照从`execute_from_command_line`调用开始的流程`manage.py`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T03:20:41.253

Django 对 settings.py 做了一些奇怪的事情，它会执行不止一次。我习惯于看到它被导入两次，不知道为什么在 PyCharm 中你会得到四次。您必须小心 settings.py 中带有副作用的语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-29T00:39:33.540

一个密切相关的问题自 以来至少被问过[两次](https://stackoverflow.com/questions/16546652/why-does-django-run-everything-twice)。我可以补充一点，一个 Django 核心开发人员[拒绝](https://code.djangoproject.com/ticket/14606)了这是任何类型的 Django 错误的想法。这是正常行为。

也可以从 Graham Dumpleton看到[这个。](http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html)**

# jquery - jquery 函数不能用作事件处理程序

> ID：11149732
> 
> 赞同：2
> 
> 时间：2012-06-22T03:16:18.497
> 
> 标签：jquery

谁能告诉我为什么这个功能不起作用？

```
for(var i=1;i<=12;i++)
{
  var btn=$('<div>Button</div>').attr('id', 'id_'+i).button();
  btn.css('margin','10px').on('click', showId());
  btn.appendTo($('#buttons'));    
}

function showId(){
   alert($(this).attr('id'))
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T03:17:22.717

你想传递函数，而不是运行它：

```
btn.css('margin','10px').on('click', showId); 
```

* * *

顺便说一句，您还应该缓存您的`$('#buttons')`, 并使用事件委托：

```
var buttons = $('#buttons').on('click', '.ui-button', showId);

for (var i=1; i <= 12; i++)
{
  $('<div>Button</div>')
      .attr('id', 'id_'+i)
      .button()
      .css('margin', '10px')
      .appendTo( buttons );    
}

function showId()
{
   alert( this.id );
} 
```

还有一些需要考虑的事情：

*   将 CSS 移动到样式表
*   一次将所有按钮附加到 DOM

# node.js - Node-mysql 错误 PROTOCOL_ENQUEUE_A FTER_DESTROY

> ID：11149733
> 
> 赞同：4
> 
> 时间：2012-06-22T03:16:20.563
> 
> 标签：node.js, node-mysql

那是我的代码：

```
var mysql      = require('mysql');
var client     = mysql.createConnection({
  host     : 'somehost',
  port     : 'myport',
  user     : 'username',
  password : 'password',
  database : 'mydb'
});
//get posts
function get(callback){
  var result = [];
  var queryString = "SELECT id,title,short_text,creation_date FROM posts");
  var query = client.query(queryString);
  query
  .on('error', function(err){
    callback(err, null);
  })
  .on('fields', function(fields){
    // the field packets for the rows to follow
  })
  .on('result', function(row){
    result.push(row);
  })
  .on('end', function(){
    callback(null, result);
    // all rows have been received
  });
} 
```

它有时会成功，但有时会返回错误：{ [错误：被销毁后无法排队查询。] 代码：'PROTOCOL_ENQUEUE_A FTER_DESTROY'，致命：false }

谁能说有什么问题？

# html - iframe 没有填充 IE9 上的整个 div

> ID：11149734
> 
> 赞同：1
> 
> 时间：2012-06-22T03:16:26.283
> 
> 标签：html, css, iframe, twitter-bootstrap

我有一个带有标题 div 和 iframe 的网站，用于在页面的其余部分显示地图，调整到标题 div 下的最大空间。

我可以在 Firefox 和 Chome 上使用该方法，但 iframe 不会填充 IE9 上的 div。有谁知道是什么问题？这里没有发布 html，而是指向问题页面和我正在重新设计的旧页面的一些链接，它们在 IE9 中的工作方式相同。

新问题页面（在 IE9 中不调整 div 大小）： http: [//permitmap.paydirt.co.nz/devtest/permitmap.html](http://permitmap.paydirt.co.nz/devtest/permitmap.html)

旧页面使用与 IE9 相同的技术：http: [//permitmap.paydirt.co.nz/](http://permitmap.paydirt.co.nz/)

这可能是我滥用[Twitter 的 Bootstrap](http://twitter.github.com/bootstrap/)吗？我使用 bootstrap 它是为了在普通内容页面上使用它，但是这个页面是一次性的，需要在尽可能多的页面中显示地图，同时仍然遵循标题的样式作为其余部分地点。

而且我使用表格进行布局也是我知道的不好的做法，但这是我发现使用 iframe 达到预期效果的唯一方法（相信我，我已经尝试了很多不使用表格的想法！）。

在此先感谢任何可以提供帮助的 CSS / HTML 大师！

让 IE 表现得像其他浏览器一样浪费了多少时间！？微软必须在工时损失和支持 IE 的额外费用上为地球付出巨大的代价。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:33:09.530

啊，刚刚注意到我必须用原始页面解决这个问题。

从页面顶部删除 DOCTYPE 元素可以解决 IE9 中的问题！

# objective-c - 来自故事板的 TVC 上的导航栏没有出现？

> ID：11149737
> 
> 赞同：1
> 
> 时间：2012-06-22T03:16:58.547
> 
> 标签：objective-c, cocoa-touch, storyboard, uinavigationbar

我从情节提要中拖出 TVC 并将表格视图作为主视图的子视图，但是当我运行应用程序时，导航栏不显示？我究竟做错了什么？

![在此处输入图像描述](../Images/3ca997453dd721fee8ab42dedfadaf25.png) ![在此处输入图像描述](../Images/29ed1b579bcb8344bd0b994498d0a6b7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T03:29:18.553

您需要在情节提要中添加一个导航控制器并将其与 TableView Controller 连接。UINavigation Controller 作为 ViewControllers 上的堆栈工作。

![你的故事板应该是这样的](../Images/45c9c4cb9499d88299b5c0fd7382e6e2.png)

在这里查看教程： [导航控制器教程](http://www.iosdevnotes.com/2011/03/uinavigationcontroller-tutorial/)

与故事板集成：[带有 Tableview 和导航控制器的故事板教程](http://www.appcoda.com/use-storyboards-to-build-navigation-controller-and-table-view/)

然后这样做：

在界面构建器中选择您的 tableview Controller 并检查启用导航控制器左侧的勾号。

并且，把它放在 viewDidLoad

self.navigationController.hidden = 否；

# css - CSS 过渡：一个接一个不工作

> ID：11149738
> 
> 赞同：0
> 
> 时间：2012-06-22T03:17:09.830
> 
> 标签：css, html, slide, transitions

我有两个 CSS 转换如下（它们都覆盖页面然后滑下，一个接一个）：

```
 $('#div1').transition({ x: '-1500px', delay: 800 }, 1000);
  $('#div2').transition({ x: '-1500px', delay: 1600 }, 1000); 
```

第一个工作正常，但第二个不行。自然，我检查了所有 CSS 和名称：

```
#div1 {
    background-color: #000;
    z-index: 99;
    position:absolute;
    width: 100%;
    height: 100%;
}

#div2 {
    background-color: #fff;
    z-index: 90;
    position:absolute;
    width: 100%;
    height: 100%
} 
```

谁能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:15:19.730

看看这是不是你想要的效果：http: [//jsfiddle.net/Nr7nJ/](http://jsfiddle.net/Nr7nJ/)

我将 div2 的背景颜色更改为红色，因为默认情况下浏览器使用白色背景。

# javascript - 关于在 asp.net 中悬停的帮助文本

> ID：11149742
> 
> 赞同：-1
> 
> 时间：2012-06-22T03:17:37.983
> 
> 标签：javascript, asp.net, css

净网站我想用问号放置帮助 tex.. 这怎么可能.. 我在少数几个网站上看到过这种情况（？），当鼠标悬停在它上面时，它会显示一些帮助文本..我该怎么做。 . 请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:22:36.433

```
a.help{
    cursor:help
} 
```

在您`a`希望显示帮助图标的标签上，为其指定 class `.help`，它将显示`?`光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T03:49:43.397

您可以使用 HTML、CSS 或 Javascript 来实现。最简单的方法是通过 HTML 使用`title`属性

```
<div title="help with html">Help (HTML)</div> 
```

对于 CSS 实现，请看这里：http: [//jsfiddle.net/xfzXD/](http://jsfiddle.net/xfzXD/)

有很多 Javascript 选项只需搜索[javascript tooltip](http://google.com/search?q=javascript%20tooltip)，其中一个示例是 [Tipped](http://projects.nickstakenburg.com/tipped)

# c++ - C++ 应用程序中的内存泄漏

> ID：11149743
> 
> 赞同：0
> 
> 时间：2012-06-22T03:17:50.387
> 
> 标签：c++, memory-management, memory-leaks, stdlist

我已经尝试了一千次来在这个片段中找到*该死的*内存泄漏，但我只是悲惨地失败了......我正在学习内存分配和这些东西，我永远无法制作一个完全免费的程序它的记忆还...

我正在调用一个 for 循环来分配 140 个 Contato_s 结构并将它们放入 Agenda std::list 中。然后我调用另一个 for 循环来使用 RemoverContato 和相应的代码删除所有 140 个联系人... Windows 不会报告单个 Kb 的空闲内存！

```
struct Contato_s
{
    int Codigo;
    std::string Nome, Numero, Email, Apelido;
};

std::list<Contato_s*> Agenda;

void CriarContato(std::string Nome, std::string Numero, std::string Email, std::string Apelido) // Add a contact to the list
{
    Contato_s *temp = new Contato_s; // Criando um contato temporario

    temp->Nome = Nome;
    temp->Numero = Numero;
    temp->Email = Email;
    temp->Apelido = Apelido;
    temp->Codigo = Agenda.size()+1;

    Agenda.push_back(temp); // Adicionando o contato a lista
}

int RemoverContato(int Codigo) // Delete a contact from the list
{
    for (std::list<Contato_s*>::iterator i = Agenda.begin(), e = Agenda.end(); i != e;)
    {
        if((*i)->Codigo == Codigo)
        {
            delete (*i);
            i = Agenda.erase(i);
            return 1;
        } else {
            ++i;
        }
    }
    return 0;
} 
```

提前致谢 ：）！

- 编辑

好的，这就是我试图破坏联系人的方式：

```
for(int i=0; i<140; ++i)
    {
        if(RemoverContato(1+i) == 0)
            std::cout << "Fail removing contact " << i << std::endl;
        else
            std::cout << "Contact " << i << " removed" << std::endl;
    } 
```

（Ofc 我总是得到“联系人 X 被删除”并且在那部分没有失败，所以理论上可以找到联系人）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:27:41.033

您需要确保每个`Contato_s`人都有一个唯一的`Codigo`（这是否意味着 ID？我将其称为 ID）。有可能不止一个人`Contato_s`可以共享同一个 ID，因为您的 ID 基于当前大小`Agenda`（假设您添加了两个联系人，删除了第一个，然后添加了另一个......这两个联系人都将具有相同的 ID `2`）。您的删除技术只会删除第一个匹配的 ID，而保留其他 ID。在返回成功或失败之前，您应该遍历所有联系人并检查所有 ID `RemoverContato`。

# facebook - Facebook Like 按钮 - 没有评论时只有 1 行

> ID：11149748
> 
> 赞同：1
> 
> 时间：2012-06-22T03:19:50.993
> 
> 标签：facebook, facebook-graph-api

我在我自己的网站产品页面上使用 Facebook 的点赞按钮插件，也使用 opengraph 标签

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

一切似乎都很好，问题是当人们“喜欢”一个产品时，评论框会出现，但如果他们把它留空，他们的提要上只会发布一行：Jon Doe 喜欢“这里的标题”。

但是，当他们在单击“赞”甚至手动发布链接时写下该评论时，所有图像、文本、描述信息都会正确显示。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:37:32.040

*嗯，这就是点赞*和*分享*之间的基本区别。由于 Facebook 已将这些功能合并到一个社交插件中，因此取决于用户采取何种行动。

旧的[共享按钮](https://developers.facebook.com/docs/share/)已被弃用，因此现在实施它并没有多大用处，因为即使它仍然可能（？）它最终也会停止工作。

如果您想要分享而不是喜欢，恕我直言，您的另一种选择是在您的网站上实施[Feed 对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)，通过单击您自己制作的按钮触发。

# jquery - jQuery Uploadify 插件：Safari：单击上传按钮时没有任何反应

> ID：11149753
> 
> 赞同：1
> 
> 时间：2012-06-22T03:20:44.550
> 
> 标签：jquery, jquery-plugins, uploadify

我正在使用 Uploadify jQuery 插件。它在 Firefox 等中运行良好，但在 Safari 中，当我单击上传按钮时没有任何反应。

以前有没有其他人遇到过这个问题？我不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-28T21:19:16.610

不确定它是否相关，但在 Mavericks 中，如果设置了“停止插件以节省电量”首选项，我会遇到问题。如果未设置，Uploadify 将按预期工作。希望有帮助！

![Safari 偏好设置](../Images/59233f84a57eececcb40d7b9ee9cf466.png)

# java - 从java中的String数组中删除所有非字母字符

> ID：11149759
> 
> 赞同：22
> 
> 时间：2012-06-22T03:21:34.827
> 
> 标签：java, regex, string

我正在尝试编写一种方法，从 Java 中删除所有非字母字符`String[]`，然后将字符串转换为小写字符串。我尝试使用正则表达式将所有非字母字符的出现替换为 .`""`但是，我得到的输出无法这样做。这是代码

```
static String[] inputValidator(String[] line) {
    for(int i = 0; i < line.length; i++) {
       line[i].replaceAll("[^a-zA-Z]", "");
       line[i].toLowerCase();
    }
    return line;
} 
```

但是，如果我尝试提供具有非字母的输入（例如`-`或`.`），则输出也包含它们，因为它们没有被删除。

**示例输入**

```
A dog is an animal. Animals are not people. 
```

**我得到的输出**

```
A
dog
is
an
animal.
Animals
are
not
people. 
```

**预期的输出**

```
a
dog
is
an
animal
animals
are
not
people 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-22T03:24:54.520

问题是您的更改没有被存储，因为字符串是[不可变](https://stackoverflow.com/questions/279507/what-is-meant-by-immutable)的。每个[方法调用](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll)都返回一个`String`表示更改的新方法，而当前方法`String`保持不变。您只需要将返回的数据存储`String`回数组中。

```
line[i] = line[i].replaceAll("[^a-zA-Z]", "");
line[i] = line[i].toLowerCase(); 
```

因为每个方法都返回一个`String`，所以您可以将您的方法调用链接在一起。这将对第一个方法的结果执行第二个方法调用，允许您在一行中执行两个操作。

```
line[i] = line[i].replaceAll("[^a-zA-Z]", "").toLowerCase(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T03:25:39.267

您需要将正则表达式的结果分配回行[i]。

```
for ( int i = 0; i < line.length; i++) {
  line[i] = line[i].replaceAll("[^a-zA-Z]", "").toLowerCase();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T03:24:30.953

它不起作用，因为字符串是不可变的，您需要设置一个值，例如

```
line[i] = line[i].toLowerCase(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T03:24:39.563

您必须重新分配 的结果`toLowerCase()`并`replaceAll()`返回给`line[i]`，因为 Java`String`是不可变的（其内部值永远不会改变，并且`String`类中的方法将返回一个新`String`对象而不是修改该`String`对象）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-06T12:20:19.257

正如它已经回答的那样，只是想分享一种这里没有提到的方式>

```
 str = str.replaceAll("\\P{Alnum}", "").toLowerCase(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T03:36:55.500

一种很酷（但如果您不喜欢强制转换，则稍微麻烦）的方法是遍历整个字符串，逐个索引，将每个结果从 String.charAt(index) 转换为 (byte)，然后然后检查该字节是否是 a) 在小写字母字符的数字范围内（a = 97 到 z = 122），在这种情况下将其转换回 char 并将其添加到字符串、数组或什么-have-you，或 b) 在大写字母字符的数字范围内（A = 65 到 Z = 90），在这种情况下，添加 32（A + 22 = 65 + 32 = 97 = a）并将其转换为char 并将其添加进去。如果它不在这两个范围内，只需将其丢弃。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-19T06:51:28.427

您也可以[`Arrays.setAll`](https://docs.oracle.com/javase/10/docs/api/java/util/Arrays.html#setAll(T%5B%5D,java.util.function.IntFunction))为此使用：

```
Arrays.setAll(array, i -> array[i].replaceAll("[^a-zA-Z]", "").toLowerCase()); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-01T06:29:24.330

这是工作方法

```
 String name = "Joy.78@,+~'{/>";
 String[] stringArray = name.split("\\W+");
 StringBuilder result = new StringBuilder();
   for (int i = 0; i < stringArray.length; i++) {
    result.append(stringArray[i]);
   }
   String nameNew = result.toString();
    nameNew.toLowerCase(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-07T03:50:06.360

公共静态无效解决（字符串行）{

```
 // trim to remove unwanted spaces
    line= line.trim();

    String[] split = line.split("\\W+");

    // print using for-each
    for (String s : split) {
        System.out.println(s);
    } 
```

# python - 你如何在 Qt 中制作链接滑块？

> ID：11149768
> 
> 赞同：3
> 
> 时间：2012-06-22T03:23:09.390
> 
> 标签：python, qt, pyqt

我正在尝试构建一个具有三个控制某些概率的水平滑块的 GUI。每个滑块的范围可以在 0 - 1.0 之间，但所有三个滑块加起来必须始终等于 1.0。这是我发现的[一个链接](http://keith-wood.name/linkedSliders.html)，它可以满足我的需求，但使用 jQuery。

Qt有什么好的方法吗？PyQt 更具体地说，但我认为伪代码就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:24:46.840

```
class MainWindow(QWidget):
    def __init__(self):
        QWidget.__init__(self)
        layout = QGridLayout()
        self.sliders = []
        slider_amount = 3
        slider_precision = 10000 # sliders work only with ints, so large ints are used and mapped to floats
        for i in range(slider_amount):
            slider = QSlider(Qt.Horizontal)
            slider.setRange(0, slider_amount*slider_precision)
            slider.setSingleStep(slider.maximum()/100.0)
            slider.setPageStep(slider.maximum()/20.0)
            slider.valueChanged.connect(self.on_slider_value_changed)
            slider.float_value = (i+1)/((1+slider_amount)/2.0*slider_amount) # provide your own default values
            slider.label = QLabel()
            self.sliders.append(slider)
            layout.addWidget(slider, i, 0)
            layout.addWidget(slider.label, i, 1)
        self.update_slider_values()
        self.setLayout(layout)
        self.show()

    def on_slider_value_changed(self, value):
        changed_slider = self.sender()
        changed_slider.float_value = float(value)/changed_slider.maximum()
        delta = sum(slider.float_value for slider in self.sliders)-1
        while abs(delta)>0.00001:
            d = len(self.sliders)-1
            for slider in self.sliders:
                if slider is changed_slider:
                    continue
                old_value = slider.float_value
                slider.float_value = min(max(0, old_value-delta/d), 1)
                delta -= old_value-slider.float_value
                d -= 1
        self.update_slider_values()

    def update_slider_values(self):
        for slider in self.sliders:
            slider_signals_blocked = slider.blockSignals(True)
            slider.setValue(round(slider.float_value*slider.maximum()))
            slider.blockSignals(slider_signals_blocked)
            slider.label.setText('{:.2f}'.format(slider.float_value))

app = QApplication(sys.argv)
mw = MainWindow()
app.exec_() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:04:36.953

您必须将`valueChanged`滑块的信号连接到您自己定义的插槽。在这个槽（函数）中，您可以实现所有滑块的新值的计算，并使用`setValue`槽来应用新值。

# plsql - 如何从嵌套游标中的最后一次获取中获取游标？

> ID：11149769
> 
> 赞同：0
> 
> 时间：2012-06-22T03:23:09.423
> 
> 标签：plsql, oracle10g, plsqldeveloper

我陷入了找不到解决方案的境地。让我给出 PL/SQL 代码：

```
begin 
      outer_loop_counter := 0;
      inner_loop_counter := 0;
      -- Open first cursor
      open get_vacancy;
      --<<Outer_loop>>
      loop

          fetch get_vacancy 
          into v_category, v_gender, v_vacancy_count;
          exit when get_vacancy%NOTFOUND;
          open get_candidate;
          --<<Inner_loop>>
          for inner_loop_counter in 1 .. v_vacancy_count
          loop
             fetch get_candidate 
              into  c_rollno, c_category,c_gender,c_total_marks;
          update merit_list m set m.merit_position = inner_loop_counter;
          end loop; --Inner_loop;
          close get_candidate;
       end loop; --Outer_loop;
       close get_vacancy;
       end; 
```

上面的代码用于为我正在使用 Java 和 Oracle 开发的一所大学的入学申请准备一份优秀名单。现在该政策取决于每行提取的空缺数量，候选人将被分配一个优异等级。现在，上面代码的问题是，对于从 get_vacancy 游标进行的每次获取，内部循环游标都从结果集的开头获取记录。我希望当光标移动到 get_vacancy 光标时，在最后一次提取中分配了优异等级的候选人不会出现在下一次提取中。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:34:05.610

我假设`GET_CANDIDATE`游标读取（或可以读取）MERIT_LIST 表。鉴于此，您应该能够将以下内容添加到游标的 WHERE 子句中

```
AND MERIT_LIST.MERIT_POSITION IS NULL 
```

这假设 MERIT_POSITION 实际上对于尚未分配职位的候选人为 NULL。

分享和享受。

# jquery - Ueditor jQuery 文本编辑器翻转内容

> ID：11149773
> 
> 赞同：1
> 
> 时间：2012-06-22T03:23:31.020
> 
> 标签：jquery, textbox, textarea, richtextbox, paragraph

我正在尝试在我的网站上使用 jQuery 富文本编辑器。我决定使用[Ueditor](http://www.upian.com/upiansource/ueditor/en/)。我完全按照演示中所示的代码进行了尝试。

问题是当我尝试在表单中输入多个段落时，它会翻转顺序。

* * *

例子

我输入-->

1号线

2号线

提交时 -->

2号线

1号线

* * *

我不明白它为什么这样做。有谁能够帮我？我应该使用更好的 jQuery 文本编辑器吗？

更新：对于将来遇到此问题的人！我决定使用[jWysiwyg](http://akzhan.github.com/jwysiwyg/)文本编辑器。到目前为止，我可能已经玩过每一个，至少在我看来，这是最好的。

似乎对于这些富文本编辑器中的每一个，您都需要在 p 标签内的框中从一开始就有一条消息，以便它在 Chrome 和 safari 中正常工作。奇怪的希望我知道为什么？

# function - 如何解决 Lua 中的函数依赖循环？

> ID：11149775
> 
> 赞同：3
> 
> 时间：2012-06-22T03:23:43.833
> 
> 标签：function, lua, coronasdk, circular-dependency

在我的 Lua 代码（使用 Corona SDK）中，我的问题基本上归结为：

```
local function foo()
    bar()
end

local function bar()
    foo()
end 
```

但是，因为 Lua 是逐行完成的，所以这没有机会工作。此外，我看不到避免这种依赖循环的方法；foo() 创建为触摸事件调用 bar() 的 DisplayObject，它本身具有调用 foo() 的能力。换句话说，我需要能够制作按钮，当单击时，可以制作更多可以做同样事情的按钮。

此外，我知道 Lua 没有像 C/C++ 那样的函数原型。有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T05:34:28.643

请记住

```
local function FuncName() end 
```

在语法上等价于：

```
local FuncName = function() end 
```

因此，声明局部变量是一件简单的事情，但在声明*后*设置它们的函数值：

```
local foo = nil
local bar = nil

foo = function()
    bar()
end

bar = function()
    foo()
end 
```

# php - 如果我想创建一个独特的论坛，我应该尝试从 wordpress 构建它还是从头开始构建它？

> ID：11149778
> 
> 赞同：2
> 
> 时间：2012-06-22T03:24:02.843
> 
> 标签：php, wordpress, web

我有一个建立一个独特论坛的想法。本次论坛将关注来自中国的国际学生和学者的学术生活。我希望它具有以下功能：

*   注册登录
*   允许管理员创建学术领域的“主线程”，例如 CS、化学、数学等。
*   允许用户在每个“主线程”下写帖子。
*   每个用户的个人页面，提供用户之间的基本消息传递和朋友系统。
*   简单而时尚的布局（这是我想在 wordpress 上构建它的主要原因，因为我只是喜欢这种风格。）

我对网页设计和构建非常陌生。我想现在是否可以在 wordpress 上构建此功能，还是从头开始构建所有内容更容易？请原谅我的英语不好。我非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T03:33:10.400

从头开始构建一切并不容易。事实上，如果您是网页设计的新手，这在 Wordpress 或任何其他框架中将被证明是一项非常具有挑战性的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T03:32:54.690

Wordpress 不是最适合这个。

由于您正在寻找与学习相关的门户，因此您应该考虑一些专门的东西。

看一下[atutor](http://atutor.ca/)。我发现它设计得非常好。它是一个专门的学习管理工具。

它没有您需要的所有功能，例如专用用户页面，但您可以编写模块来扩展它。

它将为您提供许多开箱即用的功能。希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T03:34:08.187

如果您正在寻找一个独特的论坛，您应该从头开始构建。使用论坛`wordpress`就像重用不是唯一的 CMS。但是，如果您是网页设计的新手，您可以查看`mybb, phpbb`论坛，这些论坛非常适合入门并提供您需要的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T03:38:51.313

如果您正在寻找创建新网页的快速解决方案，请考虑[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。这是让您的网站启动和运行的最快方法之一。这样，您可以只专注于创建表单的后端逻辑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T03:55:57.380

如果您熟悉 joomla，那么您可以使用 Kunena 论坛[http://extensions.joomla.org/extensions/communication/forum/7256](http://extensions.joomla.org/extensions/communication/forum/7256)。它可以满足您的要求。

# php - 如何使用 PHP 中的 simpleDOMparser 将整个 HTML 标记替换为等效的 alt 文本？

> ID：11149786
> 
> 赞同：0
> 
> 时间：2012-06-22T03:25:18.250
> 
> 标签：php, replace, simple-html-dom, html

这是一个例子：

我有一个 DOM 对象，`$content`从这个 div 创建：

```
<div class="content">&quot;test&quot; <!-- m -->
    <a class="postlink" href="http://imaginethisisareallylongurl.com">http://imagin...longurl.com</a><!-- m -->
    <img src="./images/smilies/icon_e_biggrin.gif" alt=":D" title="Very Happy" /> &quot;test&quot;
    <img src="./images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /> sl
    <img src="./images/smilies/icon_e_biggrin.gif" alt=":D" title="Very Happy" />
    <img src="./images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /> ok
</div> 
```

我想得到这个输出：

```
"test" http://imaginethisisareallylongurl.com :D :( sl :D :( ok 
```

div 中的图像标签被它们的 alt 属性替换，而 URL 被它们的完整`href`属性替换。

我怎样才能做到这一点？

编辑 ：

像这样的东西：

```
 foreach($content->find('a[class=postlink]') as $postlink)
    {
        $postlink->outertext = $postlink->href;

    } 
```

不起作用。我怎样才能引用这个特定的链接，`$contents->innertext`以便我可以修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:39:35.357

我应该更仔细地阅读文档。您可以像这样自定义解析行为：

```
$html->set_callback('custom_parse'); 
```

`$html`您的原始 DOMDocument 在哪里。

```
function custom_parse($element)
{
    if (isset($element->class)){
        if($element->class=='postlink'){
            $element->outertext = $element->href;
        }
    } 

    if (isset($element->innertext)){   
        $element->innertext = str_replace('<!-- m -->', '', $element->innertext);
    }

    if (isset($element->outertext)){   
        if ($element->tag=='img' and isset($element->alt)){
            $element->outertext = $element->alt;
        }
    }

} 
```

然后在我的内容对象上，我可以这样称呼：

```
function parse_content($content)
{
    $content = $content->innertext;
    $content = strip_tags($content);
    $content = html_entity_decode($content);
    return $content;
} 
```

不知道这是否是“正确”的方法，但它会返回所需的输出。

# php - 在一对多/多对多中保持链接 - Doctrine and Symfony2

> ID：11149788
> 
> 赞同：2
> 
> 时间：2012-06-22T03:25:37.003
> 
> 标签：php, symfony, doctrine, relationships

我有一个使用用户和帐户实体的多对多。我需要在关联表中添加一个 isOwner 字段，因此我将其更改为一对多/多对一关系。以下是我的 3 个实体（用户、帐户、用户帐户）。

当我持久化用户时，用户记录和帐户记录都添加了，但关联记录没有。我也不确定如何在保留用户的同时设置 isOwner 字段。

有谁知道如何保留关联记录？是否应该自动添加关联记录？

用户：

```
/**
 * xxx\CoreBundle\Entity\User
 *
 * @ORM\Table(name="user")
 * @ORM\Entity
 */
class User implements UserInterface
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $firstName
     *
     * @ORM\Column(name="firstName", type="string", length=255, nullable=false)
     * @Assert\NotBlank()
     */
    private $firstName;

    /**
     * @var Account
     *
     * @ORM\OneToMany(targetEntity="UserAccount", mappedBy="user", cascade={"persist"})
     */
    private $account;

    public function __construct()
    {
        $this->account = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set firstName
     *
     * @param string $firstName
     */
    public function setFirstName($firstName)
    {
        $this->firstName = $firstName;
    }

    /**
     * Get firstName
     *
     * @return string 
     */
    public function getFirstName()
    {
        return $this->firstName;
    }

    /**
     * Add account
     *
     * @param xxx\CoreBundle\Entity\Account $account
     */
    public function addAccount(\xxx\CoreBundle\Entity\Account $account)
    {
        $this->account[] = $account;
    }

    /**
     * Get account
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getAccount()
    {
        return $this->account;
    }
} 
```

帐户：

```
/**
 * xxx\CoreBundle\Entity\Account
 *
 * @ORM\Table(name="account")
 * @ORM\Entity(repositoryClass="xxx\CoreBundle\Repository\AccountRepository")
 */
class Account
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255, nullable=false)
     * @Assert\NotBlank()
     */
    private $name;

    /**
     * @var User
     *
     * @ORM\OneToMany(targetEntity="UserAccount", mappedBy="account", cascade={"persist"})
     */
    private $user;

    public function __construct()
    {
        $this->user = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Add user
     *
     * @param xxx\CoreBundle\Entity\User $user
     */
    public function addUser(\xxx\CoreBundle\Entity\User $user)
    {
        $this->user[] = $user;
    }

    /**
     * Get user
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getUser()
    {
        return $this->user;
    }
} 
```

用户帐号：

```
/**
 * xxx\CoreBundle\Entity\UserAccount
 *
 * @ORM\Table(name="user_account")
 * @ORM\Entity
 */
class UserAccount
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="User", inversedBy="account", cascade={"persist"})
     */
    private $user;

    /**
     * @ORM\ManyToOne(targetEntity="Account", inversedBy="user", cascade={"persist"})
     */
    private $account;

    /**
     * @var boolean $isOwner
     *
     * @ORM\Column(name="isOwner", type="boolean", nullable=false)
     */
    private $isOwner;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

     /**
     * Get isOwner
     *
     * @return bool 
     */
    public function getIsOwner()
    {
        return $this->isOwner;
    }

    /**
     * Set isOwner
     *
     * @param string $isOwner
     */
    public function setIsOwner($isOwner)
    {
        $this->isOwner = $isOwner;
    }

    /**
     * Set user
     *
     * @param xxx\CoreBundle\Entity\User $user
     */
    public function setUser(\xxx\CoreBundle\Entity\User $user)
    {
        $this->user = $user;
    }

    /**
     * Get user
     *
     * @return xxx\CoreBundle\Entity\User
     */
    public function getUser()
    {
        return $this->user;
    }

    /**
     * Set account
     *
     * @param xxx\CoreBundle\Entity\Account $account
     */
    public function setAccount(\xxx\CoreBundle\Entity\Account $account)
    {
        $this->account = $account;
    }

    /**
     * Get account
     *
     * @return xxx\CoreBundle\Entity\Account
     */
    public function getAccount()
    {
        return $this->account;
    }
} 
```

控制器：

```
$account = new Account();
$account->setName('Test account');

$user = new User();
$user->setFirstName('John');
$user->addAccount($account);

$manager->persist($user);
$manager->flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:27:24.353

您正在尝试将帐户保留为 UserAccount 实体。尝试这个：

```
$account = new Account();
$account->setName('Test account');

$user = new User();
$user->setFirstName('John');

$user_account = new UserAccount();
$user_account->setAccount($account);
$user_account->setUser($user);

$manager->persist($user);
$manager->flush(); 
```

# iphone - 关于：应用程序：didFinishLaunchingWithOptions：

> ID：11149791
> 
> 赞同：-1
> 
> 时间：2012-06-22T03:25:51.967
> 
> 标签：iphone

这是我的问题。我插入：

```
NSLog(@"EXECUTED"); 
```

in`application:didFinishLaunchingWithOptions:`查看方法是否被调用。在 iPhone 模拟器上，`application:didFinishLaunchingWithOptions:`确实会被调用，因为我可以`"EXECUTED"`在控制台中看到。但是在我的 iPod touch 上，没有调用完全相同的方法，因为我的控制台没有打印任何内容，并且我的 iPod touch 屏幕仍然是黑色的。为了找出这与我的 iPod touch 无关，我创建了另一个非常简单的应用程序，并插入：

```
NSLog(@"EXECUTED"); 
```

在`application:didFinishLaunchingWithOptions:`。该`application:didFinishLaunchingWithOptions:`方法确实在 iPhone 模拟器和我的 iPod touch 上被调用，因为`"EXECUTED"`当简单的应用程序在 iPhone 模拟器和我的 iPod touch 上运行时出现。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:45:14.003

application:didFinishLaunchingWithOptions: 将在您的 Xcode 控制台上为模拟器执行并显示“EXECUTED”，当您在设备而非模拟器中启动应用程序时，“EXECUTED”将显示在设备控制台上。对于设备控制台，你必须去

Xcode -> 组织者 -> 设备 -> 选择您的设备 -> 控制台。

# arrays - 将二维数组发送到 Cuda 内核

> ID：11149793
> 
> 赞同：6
> 
> 时间：2012-06-22T03:26:20.800
> 
> 标签：arrays, cuda

我在理解如何将二维数组发送到 Cuda 时遇到了一些麻烦。我有一个程序可以解析一个大文件，每行有 30 个数据点。我一次读取大约 10 行，然后为每行和项目创建一个矩阵（所以在我的 10 行和 30 个数据点的示例中，`int list[10][30];` 我的目标是将此数组发送到我的内核并让每个块处理一个行（我已经让它在普通 C 中完美地工作，但 Cuda 更具挑战性）。

这是我到目前为止所做的，但没有运气（注意：sizeofbucket = rows，sizeOfBucketsHoldings = items in row...我知道我应该为奇怪的变量名赢得奖项）：

```
 int list[sizeOfBuckets][sizeOfBucketsHoldings]; //this is created at the start of the file and I can confirmed its filled with the correct data
#define sizeOfBuckets 10 //size of buckets before sending to process list
#define sizeOfBucketsHoldings  30
    //Cuda part
                //define device variables
                int *dev_current_list[sizeOfBuckets][sizeOfBucketsHoldings];
                //time to malloc the 2D array on device
                size_t pitch;
                cudaMallocPitch((int**)&dev_current_list,  (size_t *)&pitch, sizeOfBucketsHoldings * sizeof(int), sizeOfBuckets);

                //copy data from host to device
                cudaMemcpy2D( dev_current_list, pitch, list, sizeOfBuckets * sizeof(int), sizeOfBuckets * sizeof(int), sizeOfBucketsHoldings * sizeof(int),cudaMemcpyHostToDevice );

                process_list<<<count,1>>> (sizeOfBuckets, sizeOfBucketsHoldings, dev_current_list, pitch);
                //free memory of device
                cudaFree( dev_current_list );

    __global__ void process_list(int sizeOfBuckets, int sizeOfBucketsHoldings, int *current_list, int pitch) {
        int tid = blockIdx.x;
        for (int r = 0; r < sizeOfBuckets; ++r) {
            int* row = (int*)((char*)current_list + r * pitch);
            for (int c = 0; c < sizeOfBucketsHoldings; ++c) {
                 int element = row[c];
            }
        } 
```

我得到的错误是：

```
main.cu(266): error: argument of type "int *(*)[30]" is incompatible with parameter of type "int *"
1 error detected in the compilation of "/tmp/tmpxft_00003f32_00000000-4_main.cpp1.ii". 
```

第 266 行是内核调用`process_list<<<count,1>>> (count, countListItem, dev_current_list, pitch);` 我认为问题是我试图在我的函数中创建我的数组作为 int * 但我还能如何创建它？在我的纯 C 代码中，我使用`int current_list[num_of_rows][num_items_in_row]`which works 但我无法在 Cuda 中获得相同的结果。

我的最终目标很简单，我只想让每个块处理每一行（sizeOfBuckets），然后让它遍历该行中的所有项目（sizeOfBucketHoldings）。我最初只是做了一个普通的 cudamalloc 和 cudaMemcpy 但它不起作用所以我环顾四周发现了 MallocPitch 和 2dcopy （这两个都没有在我的`cuda by example`书中），我一直在尝试研究示例，但他们似乎在给我同样的错误（我目前正在阅读 CUDA_C 编程指南，在第 22 页找到了这个想法，但仍然没有运气）。有任何想法吗？或在哪里看的建议？

编辑：为了测试这一点，我只想将每一行的值加在一起（我通过示例数组添加示例从 cuda 复制了逻辑）。我的内核：

```
__global__ void process_list(int sizeOfBuckets, int sizeOfBucketsHoldings, int *current_list, size_t pitch, int *total) {
    //TODO: we need to flip the list as well
    int tid = blockIdx.x;
    for (int c = 0; c < sizeOfBucketsHoldings; ++c) {
        total[tid] = total + current_list[tid][c];
    }
} 
```

以下是我在 main 中声明总数组的方式：

```
int *dev_total;
cudaMalloc( (void**)&dev_total, sizeOfBuckets * sizeof(int) ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T04:52:17.670

您的代码中有一些错误。

*   然后将主机数组复制到设备，您应该传递一维主机指针。请参阅[函数签名](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_g17f3a55e8c9aef5f90b67cdf22851375.html#g17f3a55e8c9aef5f90b67cdf22851375)。
*   您不需要为设备内存分配静态二维数组。它在主机内存中创建静态数组，然后您将其重新创建为设备数组。请记住，它也必须是一维数组。请参阅此[函数签名](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_g80d689bc903792f906e49be4a0b6d8db.html#g80d689bc903792f906e49be4a0b6d8db)。

此示例应该可以帮助您进行内存分配：

```
__global__ void process_list(int sizeOfBucketsHoldings, int* total, int* current_list, int pitch)
{
    int tid = blockIdx.x;
    total[tid] = 0;
    for (int c = 0; c < sizeOfBucketsHoldings; ++c)
    {
        total[tid] += *((int*)((char*)current_list + tid * pitch) + c);
    }
}

int main()
{
    size_t sizeOfBuckets         = 10;
    size_t sizeOfBucketsHoldings = 30;

    size_t width = sizeOfBucketsHoldings * sizeof(int);//ned to be in bytes
    size_t height = sizeOfBuckets;

    int* list = new int [sizeOfBuckets * sizeOfBucketsHoldings];// one dimensional
    for (int i = 0; i < sizeOfBuckets; i++)
        for (int j = 0; j < sizeOfBucketsHoldings; j++)
            list[i *sizeOfBucketsHoldings + j] = i;

    size_t pitch_h = sizeOfBucketsHoldings * sizeof(int);// always in bytes

    int* dev_current_list;
    size_t pitch_d;
    cudaMallocPitch((int**)&dev_current_list, &pitch_d, width, height);

    int *test;
    cudaMalloc((void**)&test, sizeOfBuckets * sizeof(int));
    int* h_test = new int[sizeOfBuckets];

    cudaMemcpy2D(dev_current_list, pitch_d, list, pitch_h, width, height, cudaMemcpyHostToDevice);

    process_list<<<10, 1>>>(sizeOfBucketsHoldings, test, dev_current_list, pitch_d);
    cudaDeviceSynchronize();

    cudaMemcpy(h_test, test, sizeOfBuckets * sizeof(int), cudaMemcpyDeviceToHost);

    for (int i = 0; i < sizeOfBuckets; i++)
        printf("%d %d\n", i , h_test[i]);
    return 0;
} 
```

要访问内核中的二维数组，您应该使用 pattern `base_addr + y * pitch_d + x`。 **警告**：pitvh 总是以字节为单位。您需要将指针转换为`byte*`.

# jquery - 如何调整浮动图的大小和对齐方式

> ID：11149800
> 
> 赞同：4
> 
> 时间：2012-06-22T03:27:43.487
> 
> 标签：jquery, flot

默认情况下，flot 调整图形和轴标签的大小以固定在 div 容器内。如果您在页面上有一系列图表，每个图表中的变量不同，则轴标签的大小不同，因此图表画布的大小不同并且不能整齐地对齐。

有没有办法设置浮动画布的大小和位置，以便图表在容器中是固定大小和位置

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T15:23:49.697

不完全是，不。您可以做的是指定轴标签的宽度/高度，这将迫使画布在不同的图形之间排列。

从[API.txt](http://people.iola.dk/olau/flot/API.txt)：

> “labelWidth”和“labelHeight”指定刻度标签的固定大小（以像素为单位）。如果您需要对齐多个图，它们很有用。“reserveSpace”意味着即使没有显示轴，Flot 也应该为它保留空间 - 它与 labelWidth 和 labelHeight 结合用于对齐多轴图表很有用。

除此之外，如果您希望图表之间的实际轴相同，则需要确定所有数据集之间每个轴的全局最小值/最大值，然后为每个图表中的每个轴指定该值。

# asp.net-mvc-3 - 使用 Ninject 的 InRequestScope() 时在第一次请求后处理 DbContext

> ID：11149804
> 
> 赞同：5
> 
> 时间：2012-06-22T03:28:30.167
> 
> 标签：asp.net-mvc-3, entity-framework, ninject

我对 EF 和 Ninject 都是新手，如果这没有意义，请原谅我 :)

我有一个带有 Ninject 和 Ninject.Web.Common 引用的 MVC3 应用程序。我正在尝试将 DbContext 注入我的存储库。我所看到的是，在第一个请求中，一切正常，但随后的请求返回：

```
System.InvalidOperationException: The operation cannot be completed because the DbContext has been disposed.
   at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
   at System.Data.Entity.Internal.Linq.DbQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source, Expression`1 predicate) 
```

我的绑定：

```
kernel.Bind<ISiteDataContext>().To<SiteDataContext>().InRequestScope();
kernel.Bind<IProductRepository>().To<ProductRepository>();
kernel.Bind<IProductService>().To<ProductService>(); 
```

我的服务类：

```
public class ProductService : IProductService {
    [Inject]
    public IProductRepository repository {get; set;}

    ...
} 
```

我的存储库类：

```
public class ProductRepository : IProductRepository {
    [Inject]
    public ISiteDataContext context {get; set;}

    ...
} 
```

我的 SiteDataContext 类：

```
public class SiteDataContext  : DbContext, ISiteDataContext 
{
    static SiteDataContext()
    {
        Database.SetInitializer<SiteDataContext >(null);
    }

    public DbSet<Product> Products{ get; set; }

    protected override void Dispose(bool disposing)
    {
        base.Dispose(disposing);
    }
} 
```

我的控制器：

```
public class ProductController {
    [Inject]
    public IProductService productService {get; set;}

    ...
} 
```

如果我删除 .InRequestScope()，那么它可以正常工作 - 但这会导致实体框架出现问题，因为对象在数据上下文的多个单独实例中被修改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T03:47:32.647

将您的存储库也设置为 InRequestScope。他们应该在每次请求后处理。

同样使用 MVC，您也应该使用构造函数注入将您的存储库注入到您的控制器实例中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T03:50:11.117

自然地，在我发布了一些点击后不久，我就能够解决这个问题。

问题在于 ActionFilters 的行为在 MVC3 中发生了更改，并且我有一个过滤器注入了我的 ProductService。

我想过滤器处理了服务，最终处理了 DbContext。

就我而言，解决方案很简单。我创建了第二个 DbContext，专门用于我的过滤器。由于过滤器仅查询几个表以验证对特定资源的授权，因此我不需要 DbContext 在单个请求中提供的工作单元上下文。我创建了一个使用新 DbContext 的新服务。在这种情况下，配置 InTransientScope() 就足够了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-03T20:49:51.790

我反对将 DbContext 放在 RequestScope 中，因为根据 NInject 文档，RequestScope 依赖于 HttpContext。不能保证在您的请求结束时处理。

我曾经尝试将 DbContext 放在各种对象范围内，但似乎总是得到不一致的结果。

> Ninject 内核维护对作用域对象的弱引用，并且当对作用域对象的弱引用不再有效时，将自动处理与作用域对象关联的对象。由于 InRequestScope() 使用 HttpContext.Current 或 OperationContext.Current 作为作用域对象，因此在销毁 HttpContext.Current 或 OperationContext.Current 之前，创建的任何关联对象都不会被销毁。由于 IIS/ASP.NET 管理这些对象的生命周期，因此对象的处置与 IIS/.NET 决定销毁它们的时间相关联，这可能是不可预测的。

# c++ - 将值传递给 glutDisplayFunc 的函数

> ID：11149807
> 
> 赞同：3
> 
> 时间：2012-06-22T03:29:02.137
> 
> 标签：c++, glut

我正在尝试将数组形式的数据传递给 glutDisplayFunc 调用的函数。请让我知道这是否/如何可能或实现相同目标的简单替代方案。最终我会想要将很多值传递给绘图函数。谢谢！

```
#include "stdafx.h"
#include <ostream>
#include <iostream>
#include <Windows.h>
#include <ctime>
#include <vector>
using namespace std;
#include <glut.h>

void Draw(int passedArray[]) { // This is probably wrong but just to give you the idea
glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1.0, 1.0, 1.0);
    glBegin(GL_POINTS);
        glVertex3f(passedArray[1], passedArray[2], 0.0); // A point is plotted based on passed data
    glEnd();
    glFlush();
}

void Initialize() {
    glClearColor(0.0, 0.0, 0.0, 0.0); // Background color
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0, 1.0, 0.0, 1.0, -1.0, 1.0);
}

int main(int iArgc, char** cppArgv) {
    cout << "Start Main" << endl;
    glutInit(&iArgc, cppArgv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(250, 250); // Control window size
    glutInitWindowPosition(200, 200);
    glutCreateWindow("GA");
    Initialize();
    int passedArray[2] = {10, 20}; // create array
    glutDisplayFunc(Draw(passedArray)); // This is not how you do this, just to try to convey what I want
    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-16T13:35:38.107

要点是，*只有全局变量才对 glut 有意义*。

**为什么？**

没有理由使用局部变量，因为 glut 本身是全局的。 每个应用程序只能调用一次*glutInit 。*等等。

**沸腾**

对于 C++11 及更高版本。传递 lambda 而不是函数指针。下面的示例显示了如何将 lambda 传递到循环体中。通过将 lambda 作为显示函数，您可以使用捕获部分来传递您喜欢的任何内容。

```
 // Include GLUT headers here as well

    #include <functional>

    typedef std::function<void()> loop_function_t;

    struct GlutArgs {
        loop_function_t loopFunction;
    };

    GlutArgs& getGlutArgs() {
        static GlutArgs glutArgs;
        return glutArgs;
    }

    void display() {
        getGlutArgs().loopFunction();
    }

    void init(int argc, char** argv) {
        // glutInit and friends goes here

        glutDisplayFunc (display);
    }

    void loop(loop_function_t f) {
        getGlutArgs().loopFunction = f;
        glutMainLoop();        
    }

    int main(int argc, char** argv) {
        init(argc, argv);
        int myVar = 1;
        loop([myVar](){
           glClear(...);
           doSomething(myVar);
        });
    } 
```

对于旧的 C++ 标准，所有相同但不是 lambda 只是用你的变量而不是 lambda 填充 GlutArgs 内容，并直接从*显示*函数使用它们。

# linux - 是否可以使用条形码扫描仪发送 SysRq 命令？

> ID：11149813
> 
> 赞同：1
> 
> 时间：2012-06-22T03:30:03.823
> 
> 标签：linux, barcode-scanner

我们有一个在 linux 上运行 matchbox 的 kiosk 应用程序，并且只有一个条形码扫描仪用于输入（没有键盘）。能够打印条形码，在扫描时发送诸如此类的命令，这将是很棒的`SysRq R`，这样人们就可以在无需拆卸单元的情况下进行 REISUB。

如果没有现成的方法，您能否修补条形码驱动程序以解释一组特定符号并启动序列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:44:16.557

为什么需要 SysRq？机器实际上是在自我楔入，还是您只是想干净地重新启动？为什么不将“重启”命令放入您使用的任何协议中？简单地进行硬电源循环有什么问题？

# java - 在构建时从战争中删除垃圾文件夹

> ID：11149815
> 
> 赞同：0
> 
> 时间：2012-06-22T03:31:00.843
> 
> 标签：java, web-applications, build, war

几年前我有一个 web 应用程序，这是使用 spring 和 javascript 完成的。

我们使用Jidea，IDE构建的这个项目。

项目有几个主题文件夹，其中包含大量图像。

构建之后，由于这些大型未使用的文件夹和其他文件，战争如此沉重。

我的问题是，有没有一种方法，我们可以使用构建工具在构建时删除这些垃圾文件夹？

——兰加纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:12:19.327

**您可以使用Maven**或**Ant**等构建工具。有了这些，你可以准确地指定你想要在你的war文件中包含什么以及你想要排除什么。

ANT 示例：

```
 <war destfile="dist/MyApp.war" webxml="WebContent/WEB-INF/web.xml">
        <fileset dir="WebContent" />
        <lib dir="WebContent/WEB-INF/lib" />
        <classes dir="build/classes">
            <exclude name="config.properties"/>
            <include name="**\*.class"/>
            <include name="**\*.xml"/>
            <include name="**\*.pdf"/>
        </classes>
        <classes file="config/staging/config.properties"/>
    </war> 
```

# ios - iphone上的补间动画效果（如flash），也许使用cocos 2d？

> ID：11149816
> 
> 赞同：0
> 
> 时间：2012-06-22T03:31:11.093
> 
> 标签：ios, xcode, flash, cocos2d-iphone

我认为做一个简单的动画会很容易，但需要几个小时，而且我还没有接近达到预期的效果......

我需要使用 xcode 为 iphone/ipad 模拟一个简单的 Flash Motion Tween

这是想要的效果：[http ://www.swfcabin.com/open/1340330187](http://www.swfcabin.com/open/1340330187)

我已经尝试设置一个添加 X 位置的计时器，但它没有得到相同的效果，我的同事建议我 cocos 2d 使用动作和精灵来做到这一点，虽然我不喜欢第三方框架，但这可能会很好，但是如果有办法对 cocos 做同样的事情，我肯定会使用它。

有没有人有任何建议，我觉得它可能比我想象的更简单

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:03:34.100

如果你没有麻烦，你将不得不在 OpenGL 视图中进行，这真的很简单。要显示一些信息，您需要 CCLabel 类。要改变它的位置，你需要 CCMoveTo/CCMoveBy 动作，要改变不透明度，你需要 CCFadeTo/CCFadeIn/CCFadeOut 动作，要延迟你需要 CCDelayTime。为了使这一切协同工作，您需要 CCSpawn 和 CCSequence。

CCSpawn 会同时运行几个动作（例如淡入和从右移到中心），CCSequence 会一个个运行几个动作（序列淡入+移到中心，同时延迟，序列淡出+ 从中心向左移动）。然后你应该只安排方法，这将创建标签并在它们上运行操作。在代码中它将类似于

让我们定义完整的动画时间

```
#define ANIMATION_TIME 4.f 
```

schedule 方法在任何你想开始动画的地方

```
[self schedule:@selector(runNextMessage) interval:ANIMATION_TIME]; 
```

它会`runNextMessage`每秒调用一次`ANIMATION_TIME`方法

```
- (void) runNextMesage
{
    NSString* message = //get next message

    CCLabelTTF* label = [CCLabelTTF labelWithString:message 
                                         dimensions:desiredDimensionsOfTheLabel 
                                          alignment:UITextAlignmentLeft 
                                      lineBreakMode:UILineBreakModeWordWrap 
                                           fontName:@"Arial" 
                                           fontSize:20.f];
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    // place the label out the right border 
    [label setPosition: ccp(winSize.width + label.contentSize.width, winSize.height / 2)];

    // adding it to the screen
    [self addChild:label];

    ccTime spawnTime = ANIMATION_TIME / 3;
    // create actions to run
    id appearSpawn = [CCAction actionOne:[CCMoveTo actionWithDuration:spawnTime]
                                     two:[CCFadeIn actionWithDuration:spawnTime]];

    // create show action and disappear action

    // create result sequence
    id sequence = [CCSequence actions: appearSpawn, showAction, disappearAction, nil];
    [label runAction: sequence];
} 
```

# search - 是否有适用于 Google Play 的 REST API，我可以在其中查找应用程序列表，例如 iTunes 查找/搜索服务？

> ID：11149817
> 
> 赞同：4
> 
> 时间：2012-06-22T03:31:42.043
> 
> 标签：search, app-store-connect, lookup, google-play

例如[http://itunes.apple.com/search?term=angry&entity=software](http://itunes.apple.com/search?term=angry&entity=software)

我正在尝试创建一个自动填充字段，用户在其中输入“愤怒”之类的搜索字词，我将从 Google Play 中获得“愤怒的小鸟”等相关应用列表中的结果。

# python - 尝试例外行为

> ID：11149818
> 
> 赞同：2
> 
> 时间：2012-06-22T03:31:43.820
> 
> 标签：python

```
import sys  

def checkarg():  
    try:  
        filename=str(sys.argv[1])  
        if filename=="-mycommand":  
            print "SPECIFIC_TEXT"  
            sys.exit()  
        else:    
            return filename  
    except:  
        print "ERROR"  
        sys.exit() 
```

大家好...我对上面的代码有疑问。当我调用“checkarg”函数时，如果我没有在命令行上传递任何参数，我就会得到“错误”输出和系统退出，正如预期的那样。

但是，如果我在命令行上提供一个参数（如“-mycommand”），它会打印“SPECIFIC_TEXT”，然后也会从 EXCEPT 块打印“ERROR”消息。

TRY 块只会在我提供参数时运行，如果我不提供，则 EXCEPT 将获得轮到。但是，它同时运行 TRY 和 EXCEPT 块。

有谁知道这种行为的原因？我的代码有什么错误吗？谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T03:38:21.553

我想我明白你的问题...

`sys.exit()`通过引发 SystemExit 异常退出，您的 except 语句正在捕获该异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T03:39:09.820

在这里找到答案：http: [//docs.python.org/library/sys.html](http://docs.python.org/library/sys.html)

> *sys.exit([arg])*
> 
> 退出 Python。**这是通过引发 SystemExit 异常来实现的**，因此由 try 语句的 finally 子句指定的清理操作得到遵守，并且可以在外部级别拦截退出尝试。

`sys.exit`通过引发异常来工作。这就是你的 except 块执行的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T03:43:28.833

在可以使用控制流逻辑检查状态的情况下，您真的不应该使用`try`/ `except`。

相反，在这种情况下，检查 if `len(sys.argv) > 1`。

永远不要专门使用空白的另一个原因：您甚至会捕获诸如or之类的`except`系统异常，这使得您可能无法在没有凌乱杀死的情况下终止您的程序。`SystemExit``KeyboardInterrupt`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T20:52:43.243

我知道您已经接受了答案，但我认为问题的根源在于您的`try`块包含您不一定希望捕获异常的代码；相反，您只希望这些语句在您希望在没有发生异常时捕获异常的代码*之后执行。*

为了解决这个问题，你的`try`块应该只包含`filename=str(sys.argv[1])`，而现在你的块中的其余代码`try`应该被移动到一个`else`块中，只有在没有异常发生时才会执行。换句话说：

```
try:  
    filename=str(sys.argv[1])  
except:  
    print "ERROR"  
    sys.exit()
else:
    if filename=="-mycommand":  
        print "SPECIFIC_TEXT"  
        sys.exit()  
    else:    
        return filename 
```

或者在这种情况下，由于您在异常情况下完全退出脚本，因此您实际上不需要`else`：

```
try:  
    filename=str(sys.argv[1])  
except:  
    print "ERROR"  
    sys.exit()
if filename=="-mycommand":  
    print "SPECIFIC_TEXT"  
    sys.exit()  
else:    
    return filename 
```

The fact that you're catching every exception with your bare `except` is bad style and changing that would also avoid the problem, but to me, it's secondary. You do not wish to catch exceptions in your `if/else` code, so it should not be in the `try` block to begin with. IMHO, most admonitions against bare `except` would be moot if this guideline were followed more closely.

# javascript - 重新加载父窗口后弹出窗口未关闭

> ID：11149819
> 
> 赞同：0
> 
> 时间：2012-06-22T03:31:53.943
> 
> 标签：javascript, jsp

在我的父 jsp 页面中，我使用过：

```
function popUpClosed() {
    window.location.reload();
} 
```

在孩子（弹出窗口）中，我使用过：

```
<script type="text/javascript">
        window.onunload = function() {
                if (window.opener && !window.opener.closed) {
                window.opener.popUpClosed();
                }
        };
</script> 
```

通过这段代码，父窗口在从弹出窗口插入数据后重新加载，但弹出窗口没有关闭，我必须手动关闭弹出窗口。**如何使弹出窗口自动关闭？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:43:58.360

以下是打开和关闭弹出窗口的两个示例函数。如果您在变量中创建窗口，则可以定位已打开的窗口，这意味着您可以关闭它。

```
<script>
function openWin()
{
    myWindow=window.open("","","width=200,height=100");
    myWindow.document.write("<p>This is 'myWindow'</p>");
}

function closeWin()
{
    myWindow.close();
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T03:44:45.200

要关闭弹出窗口中的窗口，请更改如下代码：

```
<script type="text/javascript">
        window.onunload = function() {
                if (window.opener && !window.opener.closed) {
                window.opener.popUpClosed();
                }
                window.close();
        };
</script> 
```

参考这里：[如何关闭当前窗口](https://developer.mozilla.org/en/DOM/window.close)。 `onunload`每当您的页面卸载时调用。如果您通过提交按钮发布数据，则您正在卸载文档。

这与关闭窗户不同。如果您只想捕获窗口的关闭，您应该使用以下内容：

```
window.onbeforeunload = windowExit;
function windowExit(){
    //do somethng
    //check that you are not submitting.
} 
```

# nginx - 非常基本的 nginx 重写

> ID：11149820
> 
> 赞同：1
> 
> 时间：2012-06-22T03:32:16.960
> 
> 标签：nginx

我希望所有请求都去： `http://domain/xyz`

被代理

```
http://127.0.0.1:26991/SOME_RREFIX/xyz 
```

以下规则没有这样做：

```
 location / {
        rewrite ^.*& /eq/$1;
        proxy_pass http://127.0.0.1:26991;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:49:03.550

试试这个配置：

```
location / {
    proxy_pass http://127.0.0.1:26991/eq/;
} 
```

# java - 如果实例是在 if-else 语句中创建的，如何配置 Spring Bean？

> ID：11149821
> 
> 赞同：0
> 
> 时间：2012-06-22T03:32:39.237
> 
> 标签：java, spring

我的类结构如下所示：

```
class Base {}

class ChildA extends Base {}

class ChildB extends Base {} 
```

我在我的应用程序代码中得到了这个：

```
Base theObj = null;
if( str.equalsIgnoreCase("object_A") == true ) {
   theObj = new ChildA();
} else {
   theObj = new ChildB();
} 
```

我可以知道如何在 Spring 中配置 bean 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:24:11.213

一种选择是在 spring xml 上下文中为两个不同的 bean（childA、childB）创建 refs。然后在创建主 bean 时使用 args 指定构造函数。您可以使用您提到的类似代码实现构造函数。

# sql - 跨服务器的表连接，通用方法

> ID：11149827
> 
> 赞同：2
> 
> 时间：2012-06-22T03:33:14.983
> 
> 标签：sql, ms-access, odbc, oledb

我还没有看到像 MS Access 这样的应用程序，它可以让您链接到远程服务器上的各种技术的表，然后执行包括跨这些不同源的连接的查询。我发现 Access 可以链接到 Sql Server 上的一个表、Oracle 上的另一个表，甚至是本地基于文件的数据库，然后允许执行查询加入它们，这有点令人惊讶。

所以我的编程相关问题是：如果要开发可以做到这一点的软件，应该如何去做？Access 是否使用现有数据库技术的某些内置功能来执行此操作？即，OleDB 或 ODBC 或某些技术是否内置了此功能，或者 Access 是否自行完成了许多专有的繁重工作？

如果 Access 自己完成所有这些工作，那么在新项目中重现这似乎是一件相当困难的事情。我只是好奇我们在这里谈论的复杂程度，以及某些现有的数据库技术层是否已经内置了这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:49:45.743

即使您将自己限制为单个数据库 API（如 ODBC），连接来自不同数据源的表的任务也比看起来更难。ODBC 没有内置任何东西来帮助这一点。查看 ODBC 的 SQLGetInfo、SQLGetConnectAttr 和 SQLGetStatementAttr API，您将看到 ODBC 驱动程序之间可能存在的差异。

有一个适用于 Windows 的 SQLEngine，它将连接不同的 ODBC 数据源，这些数据源都可以在[ODBC-ODBC 连接引擎中连接到不同的数据库](http://www.easysoft.com/products/data_access/odbc_odbc_join_engine/index.html)

更新：披露 - 我为 Easysoft 工作。

# sql - 不存在的多次插入的存储过程

> ID：11149833
> 
> 赞同：1
> 
> 时间：2012-06-22T03:35:04.350
> 
> 标签：sql, sql-server-2008

我有一个要求，我必须将多行插入到不同的表中。

首先我想检查角色是否存在于一个表中，然后我必须将值插入到`role`表中，然后插入到相关表中。

在这里我担心的是我必须得到`roleid`它是否正在插入并且`roleid`只有我会插入这些值。

这一切都应该在单击和单个存储过程中完成。

等待回复。

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:19:05.893

就像@dasblinkenlight 所说，您可以使用合并功能进行插入或更新，因此无需再次介绍。

如果我正确理解了您的问题，您希望使用单个存储过程将多行插入不同的表中（就像在一次调用中持久保存整个对象图）。[扩展Microsoft](http://msdn.microsoft.com/en-us/library/aa276847%28SQL.80%29.aspx)提供的示例，您可以使用以下示例代码。

```
DECLARE @idoc int

DECLARE @doc varchar(1000)
SET @doc ='
<CustomersAndOrders>
<Customer CustomerID="VINET" ContactName="Paul Henriot">
   <Order CustomerID="VINET" EmployeeID="5" OrderDate="1996-07-04T00:00:00" />
</Customer>
<Customer CustomerID="LILAS" ContactName="Carlos Gonzlez">
   <Order CustomerID="LILAS" EmployeeID="3" OrderDate="1996-08-16T00:00:00" />
</Customer>
</CustomersAndOrders>'

--Create an internal representation of the XML document.
EXEC sp_xml_preparedocument @idoc OUTPUT, @doc

-- Execute a SELECT statement that uses the OPENXML rowset provider.
INSERT INTO [YOUR_TABLE_NAME] ([Column1], [Column2])     
SELECT [CustomerID], [ContactName]
FROM OPENXML (@idoc, '/CustomersAndOrders/Customer',1)
WITH ([CustomerID] varchar(10), [ContactName] varchar(20))

INSERT INTO [YOUR_OTHER_TABLE_NAME] ([Column1], [Column2])     
SELECT [EmployeeID], [OrderDate]
FROM OPENXML (@idoc, '/CustomersAndOrders/Customer/Order',1)
WITH ([EmployeeID]  varchar(10), [OrderDate] varchar(20)) 
```

# iphone - ARC 和 MBProgressHUD

> ID：11149835
> 
> 赞同：0
> 
> 时间：2012-06-22T03:35:08.803
> 
> 标签：iphone, objective-c, ios, ipad

我正在尝试将我的应用程序转换为 ARC，当我尝试显示和隐藏 MBProgressHUD 时，转换器出现错误。代码和错误如下。

```
hud = [MBProgressHUD hideHUDForView:self.view animated:YES];
// error: Implicit conversion of 'BOOL' (aka 'signed char') to 'MBProgressHUD *' is disallowed with ARC 
```

在这种情况下，我不明白布尔值与什么有关。您对造成这种情况的原因有任何想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:53:57.373

`hideHUDForView`返回一个 BOOL，表示 progressHUD 是否隐藏。ARC 抱怨变量的类型`hud`，它应该是 BOOL，而不是 MBProgressHUD 对象。

此方法的文档可在此处找到： http: [//orfoundation.github.com/ORFoundation/Classes/MBProgressHUD.html#//api/name/hideHUDForView](http://orfoundation.github.com/ORFoundation/Classes/MBProgressHUD.html#//api/name/hideHUDForView:animated) :animated ：

# ruby - 散列中的 ActiveRecord 对象不会被垃圾收集——是一个错误还是一种缓存功能？

> ID：11149837
> 
> 赞同：29
> 
> 时间：2012-06-22T03:35:35.457
> 
> 标签：ruby, ruby-on-rails-3.1, garbage-collection, ruby-1.9.3

我有一个简单的 ActiveRecord 模型`Student`，表中有 100 条记录。我在 rails 控制台会话中执行以下操作：

```
ObjectSpace.each_object(ActiveRecord::Base).count
# => 0

x = Student.all

ObjectSpace.each_object(ActiveRecord::Base).count
# => 100

x = nil
GC.start

ObjectSpace.each_object(ActiveRecord::Base).count
# => 0     # Good! 
```

现在我执行以下操作：

```
ObjectSpace.each_object(ActiveRecord::Base).count
# => 0

x = Student.all.group_by(&:last_name)

ObjectSpace.each_object(ActiveRecord::Base).count
# => 100

x = nil
GC.start

ObjectSpace.each_object(ActiveRecord::Base).count
# => 100     # Bad! 
```

谁能解释为什么会发生这种情况以及是否有一种聪明的方法可以在不知道底层哈希结构的情况下解决这个问题？我知道我可以这样做：

```
x.keys.each{|k| x[k]=nil}
x = nil
GC.start 
```

它会正确地从内存中删除所有 Student 对象，但我想知道是否有一个通用的解决方案（我的现实生活中的问题很普遍，并且具有比上面显示的哈希更复杂的数据结构）。

我正在使用 Ruby 1.9.3-p0 和 Rails 3.1.0。

**更新（已解决）**

根据下面 Oscar Del Ben 的解释，在有问题的代码片段中创建了一些 ActiveRecord::Relation 对象（它们实际上是在两个代码片段中创建的，但由于某种原因，它们仅在第二个代码片段中“行为不端”。有人可以阐明为什么？）。它们通过称为@records 的实例变量维护对ActiveRecord 对象的引用。这个实例变量可以通过 ActiveRecord::Relation 上的“reset”方法设置为 nil。您必须确保对所有关系对象执行此操作：

```
ObjectSpace.each_object(ActiveRecord::Base).count
# => 100

ObjectSpace.each_object(ActiveRecord::Relation).each(&:reset)

GC.start
ObjectSpace.each_object(ActiveRecord::Base).count
# => 0 
```

注意：您也可以使用 Mass.detach（使用引用的[ruby](https://github.com/archan937/ruby-mass) ​​-mass gem Oscar Del Ben），尽管它会比上面的代码慢得多。请注意，上面的代码不会从内存中删除一些 ActiveRecord::Relation 对象。不过，这些似乎微不足道。您可以尝试这样做：

```
Mass.index(ActiveRecord::Relation)["ActiveRecord::Relation"].each{|x| Mass.detach Mass[x]}
GC.start 
```

这将删除一些 ActiveRecord::Relation 对象，但不是全部（不知道为什么，剩下的那些没有 Mass.references。奇怪）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T02:00:08.433

~~我想我知道发生了什么。Ruby 的 GC 不会释放不可变对象（如符号！）。group_by 返回的键是不可变的字符串，因此它们不会被垃圾回收。~~

**更新**：

似乎问题不在于 Rails 本身。我尝试单独使用 group_by，*有时*对象不会被垃圾收集：

```
oscardelben~/% irb
irb(main):001:0> class Foo
irb(main):002:1> end
=> nil
irb(main):003:0> {"1" => Foo.new, "2" => Foo.new}
=> {"1"=>#<Foo:0x007f9efd8072a0>, "2"=>#<Foo:0x007f9efd807250>}
irb(main):004:0> ObjectSpace.each_object(Foo).count
=> 2
irb(main):005:0> GC.start
=> nil
irb(main):006:0> ObjectSpace.each_object(Foo).count
=> 0
irb(main):007:0> {"1" => Foo.new, "2" => Foo.new}.group_by
=> #<Enumerator: {"1"=>#<Foo:0x007f9efb83d0c8>, "2"=>#<Foo:0x007f9efb83d078>}:group_by>
irb(main):008:0> GC.start
=> nil
irb(main):009:0> ObjectSpace.each_object(Foo).count
=> 2 # Not garbage collected
irb(main):010:0> GC.start
=> nil
irb(main):011:0> ObjectSpace.each_object(Foo).count
=> 0 # Garbage collected 
```

我已经深入研究了 GC 内部（非常容易理解），这似乎是一个范围问题。Ruby遍历当前范围内的所有对象并标记它认为仍在使用的对象，然后遍历堆中的**所有**对象并释放**尚未**标记的对象。

在这种情况下，我认为散列仍然被标记，即使它超出了范围。发生这种情况的原因有很多。我会继续调查。

**更新 2：**

我找到了保留对象引用的内容。为此，我使用了[ruby​​ mass](https://github.com/archan937/ruby-mass) gem。事实证明，Active Record 关系跟踪返回的对象。

```
User.limit(1).group_by(&:name)
GC.start
ObjectSpace.each_object(ActiveRecord::Base).each do |obj|
  p Mass.references obj # {"ActiveRecord::Relation#70247565268860"=>["@records"]}
end 
```

不幸的是，调用`reset`该关系似乎没有帮助，但希望现在这些信息已经足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T11:37:11.697

我不知道答案

但我尝试按照[http://blog.headius.com/2010/07/browsing-memory-jruby-way.html上的方式检查堆](http://blog.headius.com/2010/07/browsing-memory-jruby-way.html)

附上截图，[https://skitch.com/deepak_kannan/en3dg/java-visualvm](https://skitch.com/deepak_kannan/en3dg/java-visualvm) 这是一个简单的程序

```
class Foo; end
f1 = Foo.new
f2 = Foo.new
GC.start 
```

然后使用上面给出的 jvisualvm。在irb中运行这个。
似乎 jruby 正在跟踪对象的范围。如果对该对象有任何非弱引用，则该对象不会被 GC

# objective-c - 使用 facebook graph api 自动发布

> ID：11149839
> 
> 赞同：-1
> 
> 时间：2012-06-22T03:36:02.117
> 
> 标签：objective-c, ios, facebook-graph-api

我正在编写一个具有一些社交功能的 iOS 游戏。我对如何在不使用对话框提示用户的情况下制作“自动发布”功能感到困惑。

Facebook Graph API 让我有点不知所措，因为我已经阅读了大约一天。

据我了解，我可以在（对象）上制作诸如用户（执行的操作）之类的事件。但是“用户在（APPNAME）上升级了！”呢？

如何启用自动发布？像上面提到的“事件”类型的帖子怎么样？

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:55:35.337

可以办到。这是它的[链接](http://gabriel-tips.blogspot.com/2011/10/how-to-post-on-facebook-wall-through.html)。不过，我应该建议您不要使用它，因为如果您在用户的提要上发布了很多内容，这将被视为垃圾邮件。

# javascript - 在多维数组javascript或coffeescript中获取最大值

> ID：11149843
> 
> 赞同：11
> 
> 时间：2012-06-22T03:36:52.023
> 
> 标签：javascript, jquery, arrays, coffeescript

我有一个如下所示的数组：

```
array = [[1, 5], [4, 7], [3, 8], [2, 3],  
 [12, 4], [6, 6], [4, 1], [3, 2], 
 [8, 14]] 
```

我需要的是集合的第一个值中的最大数字，所以在这种情况下`12`. 在网上看一些例子，我看到的最好的方法是：

```
Math.max.apply Math, array 
```

问题是，这只适用于一维数组。我将如何为我的 senario 实现这一点？（允许使用 jQuery）

* * *

**最终解决方案：**

这不是问题的一部分，但我需要数组中的最小值和最大值，这会改变一些事情。

```
 unless device.IE
        justTheDates    = magnitudeArray.map (i) -> i[0]
        @earliest       = Math.min.apply Math, justTheDates
        @latest         = Math.max.apply Math, justTheDates                 
    else
        @earliest       = magnitudeArray[0][0]
        @latest         = magnitudeArray[0][0]
        for magnitudeItem in magnitudeArray
            @earliest   = magnitudeItem[0] if magnitudeItem[0] < @earliest
            @latest     = magnitudeItem[0] if magnitudeItem[0] > @latest 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T03:47:15.403

你可以使用`.reduce()`...

```
array.reduce(function(max, arr) { 
    return Math.max(max, arr[0]); 
}, -Infinity) 
```

* * *

这是一个不使用的版本`Math.max`...

```
array.reduce(function(max, arr) {
    return max >= arr[0] ? max : arr[0];
}, -Infinity); 
```

...和一个[jsPerf 测试](http://jsperf.com/max-using-map-vs-reduce)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-22T03:44:07.203

[http://jsfiddle.net/zerkms/HM7es/](http://jsfiddle.net/zerkms/HM7es/)

```
var max = Math.max.apply(Math, arr.map(function(i) {
    return i[0];
}));​ 
```

因此，首先您使用`array.map()`将二维数组转换为平面数组，然后使用`Math.max()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T04:20:25.003

使用 Underscore.js' 的简单解决方案[`max`](http://underscorejs.org/#max)可避免生成中间数组：

```
max = _(array).max(_.first)[0] 
```

( [JSFiddle](http://jsfiddle.net/28u98/2/) )

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T03:57:17.207

在 CoffeeScript 中使用推导：

```
Math.max.apply Math, (x[0] for x in array) 
```

[运行示例](http://jsfiddle.net/6ymfx/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T03:57:57.417

另外，请查看 _underscore.js。[这是函数 _max() 的链接。](http://underscorejs.org/#max)

*   它的读取、写入和维护效率更高。

关于 _underscore 最好的部分是还有大约 100 个类似于 _max 的辅助函数。喜欢排序。

比较下面的语法：

```
var sortedObject = _.sortBy(object, function(val, key, object) {
    return val;
}); 
```

它们很容易链接和解释！（就像道格拉斯·克罗克福德可能建议的那样）

[@Raynos](http://jsfiddle.net/Raynos/rNvFy/1/)在[这篇文章](https://stackoverflow.com/questions/4929924/how-to-sort-a-javascript-object-or-convert-it-to-an-array)中提供了一个出色的 JSFIDDLE 。

如果您一直在使用原始 JavaScript 执行数组操作，请查看 _underscore.js，它可以大大简化您的代码。

希望对您有所帮助，一切顺利！纳什

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-02T09:36:42.260

```
Array.prototype.maxX = function(){
  return Math.max.apply(Math,this.map(function(o){return o[0];}));
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-18T13:06:27.293

我知道这是一篇旧帖子，但如果您（或其他人）想要整个数组中的最大数字，请尝试：

```
var array = [[1, 5], [4, 7], [3, 8], [2, 3],  
 [12, 4], [6, 6], [4, 1], [3, 2], 
 [8, 14]];

var max = array.reduce(function (max, arr) {
    return max >= Math.max.apply(max, arr) ? max : Math.max.apply(max, arr);
}, -Infinity);
console.log(max); 
```

在本例中，它将返回值 14。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-01T19:58:52.440

样本输入： maximumOfFour([[4, 5, 1, 3], [13, 27, 18, 26], [32, 35, 37, 39], [1000, 1001, 857, 1]]);

```
function largestOfFour(arr) {

    var largest = 0;
    var largestArr = [];
    for(var i=0; i<arr.length; i++){
      for(var j=0; j<arr[i].length; j++){

        if(largest < arr[i][j]){
          largest = arr[i][j];
        }
        largestArr[i] = largest;
      }      
      largest = 0;
    }

  return largestArr;
} 
```

您可以从两个暗淡的数组中将最大的数字填充到新的数组中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-31T02:17:23.377

ES2019 Array.prototype.flat() 与解构。

```
const max = Math.max(...arr.flat()); 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)

# php - PHP中的新行不起作用

> ID：11149845
> 
> 赞同：0
> 
> 时间：2012-06-22T03:36:57.220
> 
> 标签：php

为什么我的换行符不起作用？

```
for($n=1; $n<=100; $n++)
{
    echo $n '\n';
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T03:38:37.817

1.  你那里有语法错误，应该是`$n . '\n'`
2.  您正在使用`'`单引号来引用换行符 ( `\n`)，因此它被解释为文字`\`and `n`，将您的代码更改为:`$n . "\n"`使其输出为换行符

最终代码：

```
for($n = 1; $n <= 100; $n++)
{
    echo $n . "\n"; // or "$n\n" (thanks @ring0 for pointing that out)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T03:38:36.530

使用点 ( `.`) 运算符进行字符串连接。

```
echo $n . "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T03:39:00.187

它需要在双引号中：

```
Echo $n . "\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T03:41:24.303

新行在 HTML 中被忽略。改用`<br />`：

```
for($n=1; $n<=100; $n++)
{
    echo $n . '<br />';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T03:42:01.187

首先你的连接是错误的。它应该是

```
echo $n ."\n"; 
```

接下来，如果您使用它在浏览器中输出，您应该使用`<br />`

```
echo $n."<br />"; 
```

如果您将其写入文件或控制台并且希望独立于平台，请使用`PHP_EOL`

```
echo $n.PHP_EOL 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T03:42:13.697

好吧，还请记住，换行符在 HTML 中完全被忽略（否则你必须在一行上做标记！）

如果您希望获得这种效果，我建议您将输出包装在 nl2br 中，这会将您的换行符转换为 HTML 换行符“
”，以便它们正确显示。

```
nl2br($n . "\n"); 
```

要不就

```
echo $n . "<br>"; 
```

# c - 在协同进程中读取后子进程挂起

> ID：11149846
> 
> 赞同：2
> 
> 时间：2012-06-22T03:37:03.287
> 
> 标签：c, linux, ipc, pipe

我正在使用管道编写一个协同处理程序。当孩子读取一些数据，处理并输出它时，它工作正常。但是当我读取所有数据并处理它时，它只是挂起。任何机构有一些想法？谢谢你。

这是源代码：

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>
#include <errno.h>

int main()
{
    #define MAXSIZE 1024

    char workload[MAXSIZE];
    char result[MAXSIZE];
    workload[strlen(workload)] = EOF;
    int workload_size = strlen(workload);

    int fd1[2], fd2[2];
    int n;
    pid_t pid;
    if (pipe(fd1) < 0 || pipe(fd2) < 0) {
        fprintf(stderr, "pipe error: %s\n", strerror(errno));
        exit(1);
    }

    if ((pid = fork()) < 0) {
        fprintf(stderr, "fork error: %s\n", strerror(errno));
        exit(1);
    } else if (pid > 0) {
        close(fd1[0]);
        close(fd2[1]);
        while(fgets(workload, MAXSIZE, stdin) != NULL)
        {
            workload_size = strlen(workload);
            if (write(fd1[1], workload, workload_size) != workload_size) {
                fprintf(stderr, "write to pipe error: %s\n", strerror(errno));
                exit(1);
            }

            if ((n = read(fd2[0], result, MAXSIZE)) < 0) {
                fprintf(stderr, "read from pipe error: %s\n", strerror(errno));
                exit(1);
            }

            if (n == 0) {
                fprintf(stderr, "child closed the pipe\n");
                exit(1);
            }

            result[n] = 0;

            if (puts(result) == EOF) {
                fprintf(stderr, "fputs error\n");
                exit(1);
            }
        }
    } else {
        close(fd1[1]);
        close(fd2[0]);
        if (fd1[0] != STDIN_FILENO) {
            if (dup2(fd1[0] ,STDIN_FILENO) != STDIN_FILENO) {
                fprintf(stderr, "dup2 error to stdin.\n");
                exit(1);
            }
            close(fd1[0]);
        }
        if (fd2[1] != STDOUT_FILENO) {
            if (dup2(fd2[1] ,STDOUT_FILENO) != STDOUT_FILENO) {
                fprintf(stderr, "dup2 error to stdout.\n");
                exit(1);
            }
            close(fd2[1]);
        }

        if (execl("./a.out", "a.out", NULL) < 0) {
            fprintf(stderr, "execl error: %s\n", strerror(errno));
            exit(1);
        }
        exit(0);
    }

    return 0;
} 
```

这是 a.out 的源代码，它适用于这个：

```
#include <stdio.h>
#include <string.h>

int main()
{
    #define MAXSIZE 1024
    char x[MAXSIZE];
    int n;
    while(scanf("%s", x) != EOF)
    {
        printf("len:%d %s", strlen(x), x);
        fflush(stdout);
    }
    return 0;
} 
```

但是当我编写这样的代码时，它似乎只是悬而未决：

```
#include <stdio.h>
#include <string.h>

int main()
{
    #define MAXSIZE 1024
    char x[MAXSIZE];
    int n;
    while(scanf("%s", x) != EOF);
    printf("Ok\n");
    fflush(stdout);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:27:57.370

[您应该在不使用feof](http://linux.about.com/library/cmd/blcmdl3_feof.htm)的情况下进行测试和循环，并且可以使用[popen 和 pclose](http://linux.die.net/man/3/popen)

您可能想使用一些多路复用系统调用，例如[poll](http://linux.die.net/man/2/poll)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:32:26.230

您调用的方式`scanf`可能`%s`会溢出`x`缓冲区。您至少应该使用宽度修饰符修改 scanf 。

```
#include <stdio.h>
#include <string.h>

int main()
{
    #define MAXSIZE 1024
    char x[MAXSIZE];
    int n;
    while(scanf("%1024s", x) != EOF)
    {
        printf("len:%d %s", strlen(x), x);
        fflush(stdout);
    }
    return 0;
} 
```

同样对于您的其他程序。

您的程序被阻塞的原因是因为您的第二个`a.out`程序正在循环执行另一个程序`scanf`，同时父程序正试图将响应读回`result`.

# java - 在 JList 中包含 List/ArrayList 项不起作用

> ID：11149848
> 
> 赞同：0
> 
> 时间：2012-06-22T03:37:45.720
> 
> 标签：java, swing, list, arraylist, jlist

我今天遇到这个问题，我不知道如何解决。我知道这可能是我忽略的一些愚蠢的事情，但已经有几个小时了......所以，

我有我的课，它扩展了 JPanel。在里面我只有一个带有 jlist 的滚动窗格。此类接收一个用于填充 JList 的 List。该列表包含几个“Orcamento”，这是我的程序类之一。该类有一个 .toString 方法。我尝试过使用模型，并使用 .toArray 直接使用列表创建 JList。我试过在 ArrayList 中转换 List 并做同样的事情。我尝试使用 DefaultListModel 和 DefaultListModel。

希望你能帮我解决这个问题。

这是一些代码：JPanel

```
package Views;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import javax.swing.DefaultListModel;
import javax.swing.JPanel;
import javax.swing.JList;
import javax.swing.JScrollPane;
import Models.Orcamento;
import javax.swing.ListSelectionModel;
import javax.swing.AbstractListModel;

public class OrcamentoView extends JPanel {

    private JList lista;
    private DefaultListModel modelo;
    /**
     * Create the panel.
     */
    public OrcamentoView(List<Orcamento> lst) {
        setBounds(0, 21, 434, 241);
        setLayout(null);

        ArrayList<Orcamento> orcs= new ArrayList(lst);
        DefaultListModel<String> modelo = new DefaultListModel<String>();
        for(Orcamento o:orcs)
            modelo.addElement(o.toString());
        lista = new JList();
        lista.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        lista.setModel(modelo);

        JScrollPane scrollPane = new JScrollPane(lista);
        scrollPane.setBounds(10, 11, 414, 219);
        add(scrollPane);
    }
} 
```

完成 JPanel 后，我会：

```
public void setContent(JPanel menu, JPanel content){
        contentPane.removeAll();
    contentPane.add(menu);
        contentPane.add(content);
    contentPane.repaint();
} 
```

将面板添加到我的 JFrame 中。（我一直在使用许多其他面板）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T04:06:20.800

你忘记了吗？

```
add(lista); 
```

# iphone - 如何在 iPhone 中使用 UDP 协议传输图像？

> ID：11149849
> 
> 赞同：1
> 
> 时间：2012-06-22T03:38:00.420
> 
> 标签：iphone, objective-c

我尝试使用 GCDAsyncUdpPacket.m 和 .h 文件来创建 udp 通信通道。但是通过它我只能发送一行消息。我需要发送整个文件，例如图像。

任何帮助将不胜感激，因为我对这个平台完全陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:27:07.457

由于 UDP 不是一个错误检查协议，仅仅将二进制数据塞进一个 UDP 套接字是不可靠的，因为一些数据包可能会被丢弃，或者在远端乱序到达。

如果您想确保经过错误检查、有序且可靠的数据，请打开 TCP 套接字并以这种方式发送。

在 IOS 中，您可以使用 NSStream 类来执行此操作，但您必须查看大量示例代码才能了解它可以在 iPhone 应用程序中使用的各种方式。要很好地实现它，您需要了解运行循环是如何工作的（NSRunLoop）以及委托在 Cocoa 中是如何工作的。

对我来说，我倾向于避免所有这些，并在单独的 NSThread 上启动网络任务，使用 unix 的 socket()、connect() 和 send() 原语打开 TCP 套接字。一旦你让这些工作，它们可以被剪切并粘贴到其他代码中（或放入个人代码库），这样你就不必记住如何去做。:-)

对于 BSD 原语 socket()、accept()、bind()、connect()、send() 和 recv()，有很多示例代码。

# java - 使用tomcat服务器在eclipse中运行java web应用程序时系统重新启动

> ID：11149859
> 
> 赞同：1
> 
> 时间：2012-06-22T03:39:21.570
> 
> 标签：java, eclipse, tomcat, windows-xp

当我使用 Tomcat 服务器从 Eclipse 运行我的 Java Web 应用程序时，系统会重新启动。它甚至没有显示任何异常或错误。

我的系统配置是，

*   窗口 xp sp3 32 位
*   JDK1.5.0
*   日食太阳神
*   Tomcat 服务器 6.0

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:54:47.700

问题可能与您的 eclipse 版本或服务器或您正在使用的任何代码片段有关。尝试使用新版本的eclipse和服务器，如果问题仍然存在，请检查系统是否有病毒。如果那也给出否定检查最近添加的代码片段..

# python - Django 1.4 和 django-compressor 的奇怪之处

> ID：11149867
> 
> 赞同：2
> 
> 时间：2012-06-22T03:41:52.283
> 
> 标签：python, django, django-compressor

我在使用压缩后附加的模板标签时使用`django-compressor 1.1.2`with`Django 1.4``compress``PROJECT_PATH``STATIC_URL`

```
/static/Users/sultan/.virtualenvs/mediabox/somedia/somedia/public/media/media-cache/compressor/css/1d7cd4216904.css 
```

当我没有设置 COMPRESS_OUTPUT_DIR = os.path.join(MEDIA_CACHE, 'compressor')

输出看起来像

```
/static/CACHE/css/1d7cd4216904.css 
```

**设置**

```
STATICFILES_FINDERS = (
    ...
    'compressor.finders.CompressorFinder'
)

COMPRESS_ENABLED = True
COMPRESS_OUTPUT_DIR = os.path.join(MEDIA_CACHE, 'compressor') 
```

我的配置有什么问题？

谢谢，

苏丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:11:11.447

根据[文档](http://django_compressor.readthedocs.org/en/latest/settings/#django.conf.settings.COMPRESS_OUTPUT_DIR)

```
django.conf.settings.COMPRESS_OUTPUT_DIR 
Default :   'CACHE' 
Controls the directory inside COMPRESS_ROOT that compressed files will be written to.) 
```

我不知道你`MEDIA_CACHE`在这里的设置是什么，但你不需要加入目录来生成`COMPRESS_OUTPUT_DIR`，只需给它一个相对名称，例如`'compressor'`or `'cache'`to try。

# c - 声明大小为 [x][y] 的数组和另一个大小为 [y-1] 的数组

> ID：11149870
> 
> 赞同：1
> 
> 时间：2012-06-22T03:42:03.473
> 
> 标签：c, arrays

我正在使用 Code::Blocks 10.05 和 GNU GCC 编译器。

基本上，当尝试在声明的大小之外初始化数组时，我遇到了一个非常奇怪（对我来说，莫名其妙）的问题。简而言之，就是这样：

> *有一个大小为 [x][y] 的声明数组。
> 
> *还有另一个大小为 [y-1] 的声明数组。

尝试将值放入第二个`size [y-1]`数组中时会出现问题，该数组超出了`[y-1]`大小。尝试此操作时，第一个数组`[x][y]`将不再保留其所有值。我根本不明白为什么破坏（或试图破坏）一个数组会影响另一个数组的内容。这是一些示例代码，可以查看它的发生情况（它的格式已损坏。要查看问题消失，只需更改`array2[4]`为`array2[5]`（从而消除了我指出的问题）。

```
#include <stdio.h>

int main(void)
{
    //Declare the array/indices
    char array[10][5];
    int array2[4]; //to see it work (and verify the issue), change 4 to 5
    int i, j;

    //Set up use of an input text file to fill the array
    FILE *ifp;
        ifp = fopen("input.txt", "r");

    //Fill the array
    for (i = 0; i <= 9; i++)
    {
        for (j = 0; j <= 5; j++)
        {
            fscanf(ifp, "%c", &array[i][j]);
            //printf("[%d][%d] = %c\n", i, j, array[i][j]);
        }
    }

    for (j = 4; j >= 0; j--)
    {
        for (i = 0; i <= 9; i++)
        {
            printf("[%d][%d] = %c\n", i, j, array[i][j]);
        }
        //PROBLEM LINE*************
        array2[j] = 5;

    }

    fclose(ifp);
    return 0;

} 
```

那么有谁知道这是如何发生或为什么发生的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T03:44:47.693

因为当您在数组边界之外写入时，C 允许您。你只是写到程序中的其他地方。

C被称为最低级别的高级语言。要理解“低级”的含义，请记住，您创建的每个变量都可以认为是生活在物理记忆中。如果整数大小为 4，则长度为 16 的整数数组可能占用 64 个字节。也许它们占用 100-163 字节（不太可能，但我不会编出真实的数字，通常最好用十六进制来考虑这些数字）。什么占用字节 164？也许你程序中的另一个变量。如果您写入超过 16 个整数的数组会发生什么？好吧，它可能会写入该字节。

C 允许你这样做。为什么？如果您想不出任何答案，那么也许您应该切换语言。我不是迂腐——如果这对你*没有*好处，那么你可能想要用一种语言来编程，这样你就更难犯这样的奇怪错误了。但原因包括：

*   它更快更小。添加边界检查需要时间和空间，因此如果您正在为微处理器编写代码，或编写 JIT 编译器，速度和大小确实很重要。
*   如果您想了解机器架构并进入硬件领域，例如，如果您是一名学生，那么它是从编程进入操作系统/硬件/电气工程的良好途径。还有很多计算机科学。
*   由于接近机器代码，它是许多其他语言和系统必须或可以轻松支持某种程度的兼容性的标准方式。
*   如果我真的不得不在机器代码附近工作，我可以给出的其他原因。

寓意是：在 C 中，要非常小心。您必须检查自己的数组边界。你必须清理自己的记忆。如果你不这样做，你的程序通常不会崩溃，但会开始做一些非常奇怪的事情，而不告诉你在哪里或为什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T03:44:44.057

```
 for (j = 0; j <= 5; j++) 
```

应该

```
 for (j = 0; j <= 4; j++) 
```

最大`array2`索引是`3`这样的

```
 array2[j] = 5; 
```

也将是一个问题`j == 4`。

C 数组索引从`0`. 所以一个`[X]`数组有效索引是 from `0`to `X-1`，因此你总共得到 X 个元素。

您应该使用`<`运算符而不是`<=`，以便在数组声明`[X]`和表达式中显示相同的数字`< X`。例如

```
 int array[10];
  ...
  for (i=0 ; i < 10 ; ++i) ... // instead of `<= 9` 
```

这不太容易出错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T03:48:50.277

如果您在一个数组的范围之外，那么您总是有可能在另一个数组的范围内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T05:44:26.807

`array2[j] = 5;`- 这是你的溢出问题。

`for (j = 0; j <= 5; j++)`- 这也是溢出的问题。在这里，您也尝试访问第 5 个索引，您只能访问第 0 到第 4 个索引。

在进程内存中，在调用每个函数时，会创建一个激活记录来保存函数的所有局部变量，并且还会有更多的内存来存储被调用函数的地址位置。在您的函数中有四个局部变量`array`，`array2`,`i`和`j`。所有这四个将按顺序排列。因此，如果发生溢出，它将首先尝试覆盖上面或下面声明的变量，这取决于架构。如果溢出发生更多字节，那么它可能会通过覆盖被调用函数的一些局部变量来破坏整个堆栈本身。这也可能导致崩溃，有时它可能不会，但它会像你现在所面对的那样表现得无动于衷。

# ruby - 在 Ruby 中使用 Nokogiri 错误地解析 xml

> ID：11149871
> 
> 赞同：0
> 
> 时间：2012-06-22T03:42:12.913
> 
> 标签：ruby, xml, xml-parsing, nokogiri

我正在使用 Nokogiri 解析来自 last.fm 的 XML 响应。我目前正在返回我想要的信息，但不是我想要的格式。我得到的似乎是一个 Nokogiri::XML 文档。我想要的是`<track>`包含歌曲标题、艺术家和网址的每行。这是 XML 的示例：

```
<lfm status="ok">
  <toptracks metro="Beijing" page="1" perPage="50" totalPages="10" total="500">
    <track rank="1">
      <name>Rolling in the Deep</name>
      <duration>226</duration>
      <listeners>33</listeners>
      <mbid>092a88bc-af0b-4ddd-a3a1-17ad37abfccb</mbid>
      <url>
        http://www.last.fm/music/Adele/_/Rolling+in+the+Deep
      </url>
      <streamable fulltrack="0">1</streamable>
      <artist>
        <name>Adele</name>
        <mbid>1de93a63-3a9f-443a-ba8a-a43b5fe0121e</mbid>
        <url>http://www.last.fm/music/Adele</url>
      </artist>
      <image size="small">http://userserve-ak.last.fm/serve/34s/55125087.png</image>
      <image size="medium">http://userserve-ak.last.fm/serve/64s/55125087.png</image>
      <image size="large">http://userserve-ak.last.fm/serve/126/55125087.png</image>
      <image size="extralarge">
        http://userserve-ak.last.fm/serve/300x300/55125087.png
      </image>
    </track>
  </toptracks>
</lfm> 
```

这是我正在使用的代码：

```
doc = Nokogiri::HTML(open(url))

doc.xpath("//toptracks").each do |track|
  song_title = track.xpath("*/name").text
  song_lastfm_url = track.xpath("*/url").text
  song_artist = track.xpath("*/artist/name").text

  puts "#{song_title} - #{song_lastfm_url} - #{song_artist}"
end 
```

正如我所提到的，虽然我得到了所有歌曲的标题，然后是所有的歌曲 url，然后是所有的歌曲艺术家作为一个 XML 文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:56:43.927

您不会像您认为的那样遍历轨道。试试这样：

```
doc.xpath('//toptracks/track').each do |track|
  song_title, song_lastfm_url, song_artist = track.xpath('./name','./url','./artist/name').map{|x| x.text.strip}
end 
```

# jquery - 如何仅对特定表列中的元素使用 jQuery 可排序？

> ID：11149873
> 
> 赞同：0
> 
> 时间：2012-06-22T03:42:23.393
> 
> 标签：jquery, html-table, draggable, jquery-ui-sortable

我正在尝试使用 jQuery 的可拖动和可排序来对表的特定列中列出的元素进行排序。

原因是我本质上想让人们适应时间段。

我有一张这样的桌子：

```
<table width="300" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>1:00 PM</td>
    <td><div class="personSortable">Person 1</div></td>
  </tr>
  <tr>
    <td>2:00 PM</td>
    <td><div class="personSortable">Person 2</div></td>
  </tr>
  <tr>
    <td>3:00 PM</td>
    <td><div class="personSortable">Person 3</div></td>
  </tr>
  <tr>
    <td>4:00 PM</td>
    <td><div class="personSortable">Person 4</div></td>
  </tr>
</table> 
```

我想让所有具有“personSortable”类的 div 都可以排序到可用的时间段中。我一直在寻找答案，但我能找到的最接近的事情是使整行可排序（通过使表格成为可排序容器）——这并不理想，因为我不能改变时隙。

我的另一个想法是创建两个 div 包装器：一个带有时隙，一个包含用于人员的可排序 div，并使用 CSS 'float' 属性让它们对齐。那会是更理想的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:27:01.853

找到了这个，如果其他人感兴趣，它似乎可以解决问题：

[http://www.redips.net/javascript/drag-and-drop-table-content/](http://www.redips.net/javascript/drag-and-drop-table-content/)

# php - 使用 mod_rewrite 为 3 个子域创建重写规则

> ID：11149874
> 
> 赞同：0
> 
> 时间：2012-06-22T03:42:25.123
> 
> 标签：php, .htaccess, mod-rewrite, rewrite

我正在使用 CodeIgniter 创建一个 PHP 应用程序，这个项目实际上有 3 个子应用程序，因此每个应用程序都有三个单独的索引文件。我打算为这些应用程序使用三个不同的子域。最后，该项目位于我的 Apache 文档根目录中的子目录下。

例如，这个用户 URL 应该映射到

```
http://app1.example.com/ABC -----> http://app1.example.com/ext/app1.php/ABC
http://app2.example.com/DEF -----> http://app2.example.com/ext/app2.php/DEF
http://app3.example.com/XYZ -----> http://app3.example.com/ext/app3.php/XYZ 
```

还有其他应用程序，例如 app4 和 app5，我不想将规则应用于这些应用程序。

我以前使用并编写过重写规则，但它们相当简单，我无法破解这个规则。我在我的 .htaccess 中使用了以下内容，当我尝试访问让我们说 app1 时，url 变为 .htaccess `http://app1.example.com/ext/app1.php/ext/app1.php/ext/app1.php/{manytimes}`。

所以它在一个循环中进行。

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^app1\.example\.com$
RewriteRule ^ http://app1.example.com/example/app1.php%{REQUEST_URI} [L]
RewriteCond %{HTTP_HOST} ^app2\.example\.com$
RewriteRule ^ http://app2.example.com/example/app2.php%{REQUEST_URI} [L]
RewriteCond %{HTTP_HOST} ^app3\.example\.com$
RewriteRule ^ http://app3.example.com/example/app3.php%{REQUEST_URI} [L] 
```

所以真正的子域是 - api、viewer 和 studio，并且在它们的末尾没有真正的序列。

我最近的尝试是：

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^(viewer|api|studio)\.example\.com$
RewriteRule ^/(.*)\.example\.com/(.*) http://$1.example.com/ext/$1.php/$2 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:51:52.507

如果您不使用扩展程序`.php`，您应该能够执行以下操作：

```
RewriteEngine On
RewriteBase /

# For app1 through app3.example.com
RewriteCond %{HTTP_HOST} ^(viewer|api|studio)\.example\.com$
# If the request path does not contain the string (viewer or api or studio).php
RewriteCond %{REQUEST_URI} ! %1\.php
# Re-write it to go to the appropriate app
RewriteRule ^.*$ /ext/%1.php%{REQUEST_URI} [L] 
```

# php - 输入类型文件的 JQuery 验证在服务器端失败

> ID：11149875
> 
> 赞同：0
> 
> 时间：2012-06-22T03:42:25.373
> 
> 标签：php, javascript, jquery, forms, jquery-validate

所以我正在尝试一个非常简单的表单，其中包含一个字段来上传图像。输入类型是文件。还有一个提交按钮。该表单没有 action="" 并且客户端的验证使用 Jquery Validation 插件进行。客户端的验证非常完美（它返回文件类型错误），但是一旦我单击上传，服务器端的上传就会失败（PHP 文件）。我不认为该文件正在服务器端读取，因为 if 条件失败。我的代码是这样的：

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
<script language="javascript">
    $(document).ready(function(){
        $("#upload").validate({
            debug: false,
            rules: {
                file: {required: true, accept: "gif|png|jpg|jpeg"}
            },
            messages: {
                file: "*Please select a file",
            },
            submitHandler: function(form) {
                // do other stuff for a valid form
                var phpurl = 'upload_file.php';
                $.post(phpurl, $("#upload").serialize(), function(data) {
                    alert(data);
                });
            }
        });
    });
</script> 
```

PHP代码：

```
<?php
if (($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    print "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    print "Upload: " . $_FILES["file"]["name"] . "<br />";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      print $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      print "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  print "Invalid file";
  }
?> 
```

我收到的警报输出 - 始终是无效文件。

如果我在没有 Jquery 验证的情况下尝试表单并直接使用该`action="upload_file.php`方法，它就可以完美地工作。问题是什么？

HTML：

```
<form id="upload" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:55:42.283

您需要使用有用的[jQuery 验证](http://docs.jquery.com/Plugins/Validation)插件，该插件确实支持您希望允许上传的文件，而不是其他不错的选项。

您可以使用验证插件的接受属性来允许您想要的文件类型，这是一个示例：

```
$("#form_id").validate({
  rules: {
    field: {
      required: true,
      filesize: 1048576,
      accept: "gif|jpeg"
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T03:49:25.740

问题是文件不能通过 ajax post 提交，因为 PHP 不会将它们上传到服务器。

理论上，您应该创建一个 iframe 并在那里提交表单。在实践中，只需使用这个 jquery 插件...... [http://jquery.malsup.com/form/](http://jquery.malsup.com/form/) :) 它会简化这个过程

希望能帮助到你。

[是否可以使用 Ajax 进行文件上传？](https://stackoverflow.com/questions/543926/is-it-possible-to-use-ajax-to-do-file-upload)

# exception - 懒惰和异常如何在 Haskell 中协同工作？

> ID：11149876
> 
> 赞同：9
> 
> 时间：2012-06-22T03:42:32.633
> 
> 标签：exception, haskell, ghc, lazy-evaluation

这个问题类似于[这个](https://stackoverflow.com/questions/2777715/how-do-laziness-and-i-o-work-together-in-haskell)问题。然而，这个是关于异常的，而不是关于惰性 I/O。

这是一个测试：

```
{-# LANGUAGE ScopedTypeVariables #-}

import Prelude hiding ( catch )
import Control.Exception

fooLazy :: Int -> IO Int
fooLazy m = return $ 1 `div` m

fooStrict :: Int -> IO Int
fooStrict m = return $! 1 `div` m

test :: (Int -> IO Int) -> IO ()
test f = print =<< f 0 `catch` \(_ :: SomeException) -> return 42

testLazy :: Int -> IO Int
testLazy m = (return $ 1 `div` m) `catch` \(_ :: SomeException) -> return 42

testStrict :: Int -> IO Int
testStrict m = (return $! 1 `div` m) `catch` \(_ :: SomeException) -> return 42 
```

所以我写了两个`fooLazy`惰性和`fooStrict`严格的函数，还有两个测试`testLazy`和`testStrict`，然后我尝试捕捉除以零：

```
> test fooLazy
*** Exception: divide by zero
> test fooStrict
42
> testLazy 0
*** Exception: divide by zero
> testStrict 0
42 
```

在懒惰的情况下它会失败。

首先想到的是编写一个`catch`强制对其第一个参数求值的函数版本：

```
{-# LANGUAGE ScopedTypeVariables #-}

import Prelude hiding ( catch )
import Control.DeepSeq
import Control.Exception
import System.IO.Unsafe

fooLazy :: Int -> IO Int
fooLazy m = return $ 1 `div` m

fooStrict :: Int -> IO Int
fooStrict m = return $! 1 `div` m

instance NFData a => NFData (IO a) where
  rnf = rnf . unsafePerformIO

catchStrict :: (Exception e, NFData a) => IO a -> (e -> IO a) -> IO a
catchStrict = catch . force

test :: (Int -> IO Int) -> IO ()
test f = print =<< f 0 `catchStrict` \(_ :: SomeException) -> return 42

testLazy :: Int -> IO Int
testLazy m = (return $ 1 `div` m) `catchStrict` \(_ :: SomeException) -> return 42

testStrict :: Int -> IO Int
testStrict m = (return $! 1 `div` m) `catchStrict` \(_ :: SomeException) -> return 42 
```

它似乎工作：

```
> test fooLazy
42
> test fooStrict
42
> testLazy 0
42
> testStrict 0
42 
```

但我在`unsafePerformIO`这里使用了这个功能，这很可怕。

我有两个问题：

1.  是否可以确定该`catch`函数始终捕获所有异常，而不管其第一个参数的性质如何？
2.  如果没有，是否有一种众所周知的方法来处理这类问题？类似`catchStrict`功能的东西合适吗？

* * *

**更新 1**。

这是[nanothief](https://stackoverflow.com/users/66131)`catchStrict`函数的更好版本：

```
forceM :: (Monad m, NFData a) => m a -> m a
forceM m = m >>= (return $!) . force

catchStrict :: (Exception e, NFData a) => IO a -> (e -> IO a) -> IO a
catchStrict expr = (forceM expr `catch`) 
```

* * *

**更新 2**。

这是另一个“坏”的例子：

```
main :: IO ()
main = do
  args <- getArgs
  res <- return ((+ 1) $ read $ head args) `catch` \(_ :: SomeException) -> return 0
  print res 
```

应该这样重写：

```
main :: IO ()
main = do
  args <- getArgs
  print ((+ 1) $ read $ head args) `catch` \(_ :: SomeException) -> print 0
-- or
-- 
-- res <- return ((+ 1) $ read $ head args) `catchStrict` \(_ :: SomeException) -> return 0
-- print res
-- 
-- or
-- 
-- res <- returnStrcit ((+ 1) $ read $ head args) `catch` \(_ :: SomeException) -> return 0
-- print res
-- 
-- where
returnStrict :: Monad m => a -> m a
returnStrict = (return $!) 
```

* * *

**更新 3**。

正如[nanothief](https://stackoverflow.com/users/66131)所注意到的，不能保证该`catch`函数总是捕获任何异常。所以需要谨慎使用。

关于如何解决相关问题的一些提示：

1.  使用`($!)`with `return`，使用`forceM`的第一个参数`catch`，使用`catchStrict`函数。
2.  我还注意到，有时人们会对他们的转换器实例[添加一些严格性。](http://hackage.haskell.org/packages/archive/Agda/latest/doc/html/src/Agda-TypeChecking-Monad-Base.html#TCMT)

这是一个例子：

```
{-# LANGUAGE GeneralizedNewtypeDeriving, TypeSynonymInstances, FlexibleInstances
  , MultiParamTypeClasses, UndecidableInstances, ScopedTypeVariables #-}

import System.Environment

import Prelude hiding ( IO )
import qualified Prelude as P ( IO )
import qualified Control.Exception as E
import Data.Foldable
import Data.Traversable
import Control.Applicative
import Control.Monad.Trans
import Control.Monad.Error

newtype StrictT m a = StrictT { runStrictT :: m a } deriving
  ( Foldable, Traversable, Functor, Applicative, Alternative, MonadPlus, MonadFix
  , MonadIO
  )

instance Monad m => Monad (StrictT m) where
  return = StrictT . (return $!)
  m >>= k = StrictT $ runStrictT m >>= runStrictT . k
  fail = StrictT . fail

instance MonadTrans StrictT where
  lift = StrictT

type IO = StrictT P.IO

instance E.Exception e => MonadError e IO where
  throwError = StrictT . E.throwIO
  catchError m h = StrictT $ runStrictT m `E.catch` (runStrictT . h)

io :: StrictT P.IO a -> P.IO a
io = runStrictT 
```

它本质上[是身份单子变换器](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-Identity.html)，但具有严格的`return`：

```
foo :: Int -> IO Int
foo m = return $ 1 `div` m

fooReadLn :: Int -> IO Int
fooReadLn x = liftM (`div` x) $ liftIO readLn

test :: (Int -> IO Int) -> P.IO ()
test f = io $ liftIO . print =<< f 0 `catchError` \(_ :: E.SomeException) -> return 42

main :: P.IO ()
main = io $ do
  args <- liftIO getArgs
  res <- return ((+ 1) $ read $ head args) `catchError` \(_ :: E.SomeException) -> return 0
  liftIO $ print res

-- > test foo
-- 42
-- > test fooReadLn
-- 1
-- 42
-- ./main
-- 0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T04:24:09.867

首先（我不确定您是否已经知道这一点），catch 不适用于惰性案例的原因是

```
1 `div` 0 
```

表达式只有在需要时才会被评估，它在`print`函数内部。但是，该`catch`方法仅应用于`f 0`表达式，而不是整个`print =<< f 0`表达式，因此不会捕获异常。如果你这样做了：

```
test f = (print =<< f 0) `catch` \(_ :: SomeException) -> print 42 
```

相反，它在这两种情况下都能正常工作。

如果你想创建一个强制对 IO 结果进行完整评估的 catch 语句，而不是创建一个新的 NFData 实例，你可以编写一个`forceM`方法，并在`catchStrict`方法中使用它：

```
forceM :: (Monad m, NFData a) => m a -> m a
forceM m = m >>= (return $!) . force

catchStrict :: (Exception e, NFData a) => IO a -> (e -> IO a) -> IO a
catchStrict expr = (forceM expr `catch`) 
```

（我有点惊讶 forceM 不在`Control.DeepSeq`图书馆内）

* * *

关于您的评论：

不，规则是仅在计算值时抛出异常，并且仅在 haskell 需要时才进行。如果 haskell 可以延迟对某事的评估，它会。

一个不使用`$!`但仍会立即导致异常的示例测试函数（因此正常的 catch 将捕获除以零异常）是：

```
fooEvaluated :: Int -> IO Int
fooEvaluated m = case 3 `div` m of
  3 -> return 3
  0 -> return 0
  _ -> return 1 
```

Haskell 被迫评估“3 `div` m”表达式，因为它需要将结果与 3 和 0 进行匹配。

作为最后一个示例，以下内容不会引发任何异常，并且在与测试函数一起使用时返回 1：

```
fooNoException :: Int -> IO Int
fooNoException m = case 3 `div` m of
  _ -> return 1 
```

这是因为 haskell 永远不需要计算 "3 `div` m" 表达式（因为`_`匹配所有内容），所以它永远不会被计算，因此不会抛出异常。

# java - int[] 存储到 Java 中的对象中

> ID：11149879
> 
> 赞同：1
> 
> 时间：2012-06-22T03:43:17.640
> 
> 标签：java, object, collections, hashmap

我有一个值被声明为的场景

```
 int[] rate = new int[] {5,6};
 int length = 26; 
```

完成了一些处理并将其存储到 a`HashMap<String,Object>`中，因此`HashMap`包含

```
"rate" ==> {5,6}
"length" ==> 26 
```

当我为“密钥长度”检索此值时，我能够看到相应的值，但看不到“密钥速率”，是否也有正确的方法来检索速率值？

当我尝试时，我`System.out.print`看不到清晰的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T03:46:41.783

由于`rate`是一个数组，你必须使用`Arrays.toString(rate)`它来查看它的字符串表示。

您看到的难以辨认的值是`toString()`数组的默认实现。它通常是`Classname@hashCode`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:04:41.590

`System.out.print(parameter)`将始终调用`toString()`传入的参数，在您的情况下是一个数组，调用`toString()`打印结果没有意义，您将迭代数组并一一打印。像这样的东西：

```
 int[] rate = (int[]) hashmap.get("rate");
    for (int i = 0, len = rate.length; i < len; i++) {
        System.out.println(rate[i]);
    } 
```

# android - EditText 如何只接受整数或浮点值？

> ID：11149881
> 
> 赞同：29
> 
> 时间：2012-06-22T03:43:40.533
> 
> 标签：android, android-edittext

我是 Android 开发的新手。在我的项目中，我使用的是 EditText，但我想强制它只接受整数或浮点值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-22T03:48:48.127

**如果您**只想在您的`EditText`

在您的 EditText 小部件中使用 xml 属性`android:inputType="numberDecimal"` ，您的`EditText`声明将如下所示：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal" /> 
```

如果您想使用带**符号十进制数**而不是将两个 Xml 属性`android:inputType="numberDecimal"`和 `android:inputType="numberSigned"`. 您的`EditText`声明将如下所示：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal|numberSigned" >

</EditText> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-25T06:04:41.090

使用 Java

用于输入整数和浮点数
`edit.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);`

仅用于输入整数
`edit.setInputType(InputType.TYPE_CLASS_NUMBER);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-04T18:15:13.987

目前使用 android tag:inputType 是不够的。

参见示例[https://github.com/udacity/ud851-Exercises/tree/student/Lesson06-Visualizer-Preferences/T06.10-Exercise-EditTextPreferenceConstraints](https://github.com/udacity/ud851-Exercises/tree/student/Lesson06-Visualizer-Preferences/T06.10-Exercise-EditTextPreferenceConstraints)

在更改首选项之前，您需要创建一个 PreferenceChangeListener 来验证填写的 EditText。

# android - 位图图像无法在 android 通知中显示？

> ID：11149883
> 
> 赞同：0
> 
> 时间：2012-06-22T03:43:59.687
> 
> 标签：android

我想将位图图像显示为通知，但下面的代码在我出错的地方不起作用我无法找到我正在以位图形式从 url 获取图像但无法显示。

我在 NotiIcon 变量中获取位图图像，它是位图类型。我添加了获取位图图像。

提前致谢 。

```
public static void ShowNotification()
{    
    AsyncTask<Void, Void, Void> t = new AsyncTask<Void, Void, Void>(){  
        protected Void doInBackground(Void... p) {
            String NS =  Context.NOTIFICATION_SERVICE;

            /*  String dtitle = Title;
            String dbody = body; */

            Intent notificationIntent1 =new Intent(appContext, ChromeTestActivity.class);
            PendingIntent contentIntent1 = PendingIntent.getActivity(appContext, 0, notificationIntent1, 0);
            NotificationManager mNm = (NotificationManager)   appContext.getSystemService(NS);
            Notification.Builder builder = new Notification.Builder(appContext);
            builder.setContentIntent(contentIntent1).setLargeIcon(NotiIcon)
                    .setWhen(System.currentTimeMillis())
                    .setAutoCancel(false)
                    .setContentTitle(Title)
                    .setContentText(body);
            Notification n = builder.getNotification();
            mNm.notify(NOTIFICATION_ID, n);
            textTitle.setText(Title);
            textBody.setText(body);
            textTitle.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    Log.v(LOGTAG, "Inside NotificationUIManager handleButtonClick");
                }
            });

            textBody.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    Log.v(LOGTAG, "Inside NotificationUIManager handleButtonClick");
                }
            });
            return null;
        }
    };
    t.execute();
}

public static Bitmap DecodeIconUrl(String paramString1)
{
    NotiIcon = null;  
    try
    {
        URL iconurl =  new URL(paramString1);
        URLConnection conn =  iconurl.openConnection();
        conn.connect();
        InputStream is = conn.getInputStream();
        BufferedInputStream bis =  new BufferedInputStream(is);
        NotiIcon = BitmapFactory.decodeStream(bis);
        bis.close();
        is.close();
    }
    catch(IOException e){

    }
return NotiIcon;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:59:21.850

我们必须像这样将图标添加到通知中

检查这个

```
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

long when = System.currentTimeMillis();
Notification notification = new Notification(R.drawable.notify_icon, "Name", when);

notification.defaults |= Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE;

Intent notificationIntent = new Intent(this, Login.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

notification.setLatestEventInfo(context, "Title", "contentText", contentIntent);
mNotificationManager.notify(ID, notification); 
```

# c# - 具有文本支持的 ComboBox DropDownList

> ID：11149886
> 
> 赞同：2
> 
> 时间：2012-06-22T03:44:36.517
> 
> 标签：c#, winforms, combobox

当 DropDownStyle 设置为 DropDownList 时，我创建了一个支持在控件上绘制文本的 ComboBox。

下面的代码片段与其余的代码结构不匹配，也没有使用来自 e.States 的正确检查。有谁知道我应该检查哪些 e.States？

```
if (!this.DroppedDown && e.Index == -1)
        {
            e.Graphics.DrawString(_dropDownListText, e.Font, b, e.Bounds);
        }
        else if (e.Index > -1)
        {
            e.Graphics.DrawString(ItemName(e.Index), e.Font, b, e.Bounds);
        } 
```

以及完整的代码，上面的代码片段为了便于搜索而被注释掉

```
using System.ComponentModel;

public class ComboBoxEx : ComboBox
{
    private ToolTip _toolTip = new ToolTip();
    private string _dropDownListText = "Select...";

    public ComboBoxEx()
    {
        this.DrawMode = DrawMode.OwnerDrawVariable;
        this.DropDownStyle = ComboBoxStyle.DropDownList;
    }

    [Description("Gets or sets the text associated with DropDownList style."), Category("Appearance")]
    public string DropDownListText
    {
        get
        {
            return _dropDownListText;
        }
        set
        {
            if (string.IsNullOrEmpty(value))
            {
                value = string.Empty;
            }
            _dropDownListText = value;
        }
    }

    public string ItemName(int index)
    {
        if (index == -1)
        {
            return string.Empty;
        }
        // return the selected item value from the ComboBoxEx.Item class
        return ((ComboBoxEx.Item)(this.Items[index])).Name;
    }

    public string ItemTag(int index)
    {
        if (index == -1)
        {
            return string.Empty;
        }
        // return the selected item tag from the ComboBoxEx.Item class
        return ((ComboBoxEx.Item)(this.Items[index])).Tag;
    }

    protected override void OnSelectedIndexChanged(System.EventArgs e)
    {
        // force a redraw of DropDownListText if necessary
        base.OnSelectedIndexChanged(e);
        base.Invalidate();
    }

    protected override void OnDrawItem(System.Windows.Forms.DrawItemEventArgs e)
    {

        // select the brush to use as the fore color
        SolidBrush b = new SolidBrush((this.Enabled ? SystemColors.WindowText : SystemColors.GrayText));

        if ((e.State & DrawItemState.Focus) == DrawItemState.Focus)
        {
            // fill the focused items rectangle
            e.Graphics.FillRectangle(new SolidBrush(SystemColors.Info), e.Bounds);
        }
        else
        {
            // fill the rest of the rectangle
            e.Graphics.FillRectangle(new SolidBrush(SystemColors.Window), e.Bounds);
        }

// for ease of reading, I've commented the code out. This code should use proper if then e.State checks so that I can combine it with the rest of the Else If Then statements
        /* 
        if (!this.DroppedDown && e.Index == -1)
        {
            // redraw the dropdownlist text when the combobox is closed with no index selected
            e.Graphics.DrawString(_dropDownListText, e.Font, b, e.Bounds);
        }
        else if (e.Index > -1)
        {
            // else, draw the selected item value
            e.Graphics.DrawString(ItemName(e.Index), e.Font, b, e.Bounds);
        }
*/
        if (e.State == (DrawItemState.Disabled | DrawItemState.NoAccelerator | DrawItemState.NoFocusRect | DrawItemState.ComboBoxEdit))
        {
            // redraw the dropdownlist text when the control is disabled
            e.Graphics.DrawString(_dropDownListText, e.Font, b, 3, 3);
        }
        else if (e.State == (DrawItemState.NoAccelerator | DrawItemState.NoFocusRect | DrawItemState.ComboBoxEdit) && e.Index == -1)
        {
            // redraw the dropdownlist text when the control is dropped down with no index selected
            e.Graphics.DrawString(_dropDownListText, e.Font, b, 3, 3);
        }
        else if ((e.State & DrawItemState.Selected) == DrawItemState.Selected)
        {
            if (e.Index > -1 && this.DroppedDown)
            {
                // show a tool tip on the right side of the control with the selected item tag
                _toolTip.Show(ItemTag(e.Index), this, e.Bounds.Right, e.Bounds.Bottom + 5);
            }
            else
            {
                // hide the tool tip when the control is no longer dropped down
                _toolTip.Hide(this);
            }
        }

        e.DrawFocusRectangle();
        b.Dispose();

    }

    public class Item : object
    {
        protected string _name;
        protected string _tag;

        public Item(string name, string tag)
        {
            _name = name;
            _tag = tag;
        }

        public string Name
        {
            get
            {
                return _name;
            }
        }

        public string Tag
        {
            get
            {
                return _tag;
            }
        }

    }

} 
```

示例用法：

```
 ComboBoxEx1.Items.Add(new ComboBoxEx.Item("Marks Number", "1-555-555-1000"));
    ComboBoxEx1.Items.Add(new ComboBoxEx.Item("Jacks Number", "1-555-555-1001"));
    ComboBoxEx1.Items.Add(new ComboBoxEx.Item("Daves Number", "1-555-555-1002"));
    ComboBoxEx1.Items.Add(new ComboBoxEx.Item("Joses Number", "1-555-555-1003")); 
```

随意使用此代码供您自己使用。

# java - 学习 Java Web 服务细节的资源？

> ID：11149890
> 
> 赞同：3
> 
> 时间：2012-06-22T03:45:02.123
> 
> 标签：java, web-services, jaxb, jax-ws

我想使用 JAX-WS 和 GlassFish 3 构建 Java Web 服务。所有指南都使用*wsgen*和*wsimport*等工具显示 Java 中的 Web 服务的基础知识，以生成大量样板代码来实现 Web 服务。这只是它是如何完成的，还是有人知道一些涉及更多细节的资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:23:35.563

如果你想从一开始就学习：

*   使用 JAX-WS 的重量级 Web 服务 (SOAP/RPC)
*   SOAP 契约 (WSDL) 和契约优先与代码优先的争论
*   使用 JAX-RS 的轻量级 Web 服务 (RestFul)
*   RESTFul 合约 (WADL)
*   Web 服务部署（框架 + JAX-* 部署在一些应用服务器中）
*   Web 服务客户端（即 的使用`wsimport`）
*   Web服务安全、寻址等简介

我向您推荐[Java Web 服务。马丁卡林的启动和运行](https://rads.stackoverflow.com/amzn/click/com/059652112X)。之后，如果您需要进一步学习这些主题之一，我建议您获取 O'Reilly 出版的任何“食谱”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:26:35.283

好的起点是[Official Java EE Tutorial](http://docs.oracle.com/javaee/6/tutorial/doc/)。

# php - PHP用数字交换单词

> ID：11149891
> 
> 赞同：1
> 
> 时间：2012-06-22T03:45:08.700
> 
> 标签：php

我有以下代码：

```
for($n=1; $n<=100; $n++)
{
    echo $n . '<br />';
} 
```

我怎么能改变它，让它显示一个词：

三的倍数

三和五的倍数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:47:08.560

```
for($n=1; $n<=100; $n++)
{
    echo $n . '<br />';
    if ($n % 3 == 0) {
        echo "word<br/>";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T03:50:42.157

你是这个意思吗？

```
for($n=1; $n<=100; $n++)
{
    if ($n % 3 === 0) {
       echo $n . ' is multiples of three<br />';
    }
    if ($n % 3 === 0 && $n % 5 === 0) {
       echo $n . ' is multiples of three and five<br />';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T03:53:31.917

```
for($n=1; $n<=100; $n++)
{
    $multiplies = '';
    for($m=1; $m<=$n; $m++){
        if ($n % $m == 0){
          $multiplies .= $m .' ';
        }

    }
    echo $n . ' multiplies by: '  $multiplies .'<br />';
} 
```

**这是检查范围内的所有数字**是否与当前数字相乘的通用解决方案。

您可以从此代码创建一个函数：

```
function ShowMultiplies($range){} 
```

所以在代码中你将使用`$range`100 的 instread。

# ruby - 交互式语言控制台

> ID：11149893
> 
> 赞同：1
> 
> 时间：2012-06-22T03:45:51.840
> 
> 标签：ruby, console, terminal

我一直在浏览一些编程语言的交互式控制台，例如：[http](http://tryruby.org/levels/1/challenges/0) ://tryruby.org/levels/1/challenges/0甚至更好，[http ://codeschool.com 上的教程](http://codeschool.com)

尝试实现这样的事情的最佳方法是什么？我在想你必须对服务器使用 ajax 并让它检查输入等，但是有没有更简单的方法？

抱歉这么短的问题；老实说，我不知道怎么问这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:27:41.760

Tryruby 在 github 上有源代码，地址为[https://github.com/Sophrinix/TryRuby/](https://github.com/Sophrinix/TryRuby/)。这可能会给你一些想法。

这是“通过只允许导入白名单包来安全编译 Go 程序的 Go 工具”。你可能会发现这更有用。

[https://github.com/zond/gosafe](https://github.com/zond/gosafe)

# java - Java：为什么打包成 jar 文件的代码会阻止外部类访问？

> ID：11149895
> 
> 赞同：0
> 
> 时间：2012-06-22T03:46:01.153
> 
> 标签：java, eclipse, swing, jar, classloader

我的 Java 应用程序有一个插件系统。我使用 URL 类加载器调用一个外部类。该部分运行良好，无论是当我的应用程序作为类文件运行时，还是当我的应用程序是 JAR 形式时。我遇到的问题是，插件文件可以很好地运行自己的独立代码，但它们会创建一个 JPanel。当我尝试将该 JPanel 添加到主应用程序类中的 JPanel 时，我得到一个引用主类的空指针异常。(com.cpcookieman.app.Main) 但是，如果我运行应用程序的类文件，则不会发生这种情况，只有当它被打包时。我该如何解决？

为什么我的代码被打包到 jar 文件中会阻止外部类访问 jar 中的类？

编辑：根据要求，堆栈跟踪。

```
java.lang.NullPointerException
    at TestPlugin2.Main.<init>(Main.java:23)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at com.cpcookieman.ph.PluginLoader$2.run(PluginLoader.java:74)
    at java.lang.Thread.run(Unknown Source) 
```

编辑 2：类加载代码

```
 String pluginsPath;
    if (Main.os.equals("Windows"))
    {
        pluginsPath = "C:\\plugins\\";
    }
    else
    {
        pluginsPath = "~/plugins/";
    }
    File file = new File(pluginsPath);
    if (!file.exists())
    {
        System.out.println("DEBUG: Plugin path could not be found!");
    }
    try
    {
        URL url = file.toURI().toURL();
        final URL[] urls = new URL[]{url};
        new Thread(new Runnable()
        {
            @Override
            public void run()
            {
                try
                {
                    ClassLoader cl = new URLClassLoader(urls);
                    Class plugin = cl.loadClass(text + ".Main");
                    plugin.newInstance();
                    close();
                }
                **snip catch statements**
            }
        }).start();
    }
    **snip catch statements** 
```

该插件使用它的构造函数加载，并创建一个面板以添加到 JAR 文件中的一个类中的框架中。JAR 是主要应用程序，如果有人对此感到困惑的话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T04:41:47.993

我真的不知道你项目的结构，虽然我做了一个小例子代码给你看，看看。

考虑到我的项目位于`C:\Mine\JAVA\J2SE\src\testingjar>`

在这里面我的目录结构如下：

```
 testingjar
                             |
              ----------------------------------
             |          |           |          |
          classes      src    manifest.text  test.jar(this .jar we be creating shortly)
             |          |
             |       (Almost same as classes folder, just .java files)
      ---------------
      |             |
  actualtest       test
      |             |
   *.class       *.class 
```

我的类将成为 .jar 文件的一部分，如下所示：

```
package test;

import java.awt.*;
import javax.swing.*;

public class CustomPanel extends JPanel
{
    public CustomPanel()
    {
        setOpaque(true);
        setBackground(Color.DARK_GRAY);

        JLabel label = new JLabel(
            "I am a JLabel from Java Swing", JLabel.CENTER);
        label.setOpaque(false); 
        label.setForeground(Color.WHITE);
        add(label); 
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 300));
    }
} 
```

**我用以下命令编译了这个类：**

```
C:\Mine\JAVA\J2SE\src\testingjar>javac -d classes src\test\CustomPanel.java 
```

**现在为 JAR 文件创建清单文件，其内容如下：**

```
Main-Class: test.CustomPanel 
```

***请记住冒号 (:) 和包名之间的空格，即 test，在 CustomPanel 之后，按 Enter 并保存文件。***

现在为了创建一个名为的 JAR 文件`test.jar`，我编写了以下命令：

```
C:\Mine\JAVA\J2SE\src\testingjar>cd classes

C:\Mine\JAVA\J2SE\src\testingjar\classes>jar -cfm ..\test.jar ..\manifest.txt test 
```

**现在将使用此 .jar 文件的类将如下所示：**

```
package actualtest;

import test.CustomPanel;

import java.awt.*;
import javax.swing.*;

public class ActualImplementation
{
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Testing Jar Implementation");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        CustomPanel panel = new CustomPanel();
        frame.setContentPane(panel);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ActualImplementation().createAndDisplayGUI();
            }
        });
    }
} 
```

**我通过编写这些命令来编译它：**

```
C:\Mine\JAVA\J2SE\src\testingjar\classes>cd..

C:\Mine\JAVA\J2SE\src\testingjar>javac -classpath test.jar -d classes src\actualtest\ActualImplement
ation.java 
```

**现在运行我写了这些命令：**

```
C:\Mine\JAVA\J2SE\src\testingjar>cd classes

C:\Mine\JAVA\J2SE\src\testingjar\classes>java actualtest.ActualImplementation 
```

**输出**

![JAR 实现](../Images/244a0473a1e2b0d780b2fff0b3a7e0da.png)

一定要匹配这些步骤，可能是你遗漏了一些东西，因为它在我这边工作得很好。

**最新编辑：如被问及，我反其道而行之，现在`JFrame`在 .jar 文件中并`JPanel`正在使用它。**

将成为 .jar 文件一部分的类如下：

```
package test;

import java.awt.*;
import javax.swing.*;

public class CustomFrame extends JFrame
{
    public CustomFrame(String title)
    {
        super(title);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }
} 
```

***manifest.txt 文件的内容，将更改如下：***

```
Main-Class: test.CustomFrame 
```

将使用 .jar 文件中的 CustomFrame 类的类如下：

```
package actualtest;

import test.CustomFrame;

import java.awt.*;
import javax.swing.*;

// http://stackoverflow.com/a/11150286/1057230
public class CustomPanel extends JPanel
{
    private CustomFrame frame;

    public CustomPanel()
    {
        setOpaque(true);
        setBackground(Color.DARK_GRAY);

        JLabel label = new JLabel(
            "I am a JLabel from Java Swing", JLabel.CENTER);
        label.setOpaque(false); 
        label.setForeground(Color.WHITE);
        add(label);                 
    }

    private void createAndDisplayGUI()
    {
        frame = new CustomFrame("Testing Jar Implementation");
        frame.setContentPane(this);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 300));
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new CustomPanel().createAndDisplayGUI();
            }
        });
    }
} 
```

编译顺序，和之前的差不多，如下：

```
C:\Mine\JAVA\J2SE\src\testingjar>javac -d classes src\test\CustomFrame.java

C:\Mine\JAVA\J2SE\src\testingjar>cd classes

C:\Mine\JAVA\J2SE\src\testingjar\classes>jar -cfm ..\test.jar ..\manifest.txt test

C:\Mine\JAVA\J2SE\src\testingjar\classes>cd..

C:\Mine\JAVA\J2SE\src\testingjar>javac -classpath test.jar -d classes src\actualtest\CustomPanel.jav
a

C:\Mine\JAVA\J2SE\src\testingjar>cd classes

C:\Mine\JAVA\J2SE\src\testingjar\classes>java actualtest.CustomPanel 
```

仍然是相同的输出，我得到了。

**最新编辑：**

我刚刚发现，有时这个东西有效，而不是后来，当使用 JAR 文件时，你必须指定包含点运算符的类路径 `.`，比如

```
C:\Mine\JAVA\J2SE\src\testingjar>java -classpath test.jar;.; actualtest.CustomPanel 
```

这是当我将文件夹`actualtest` `package`放入内部时`testingjar`，上面的命令适用于这种情况。

# python - python - 类 - AttributeErr - 但方法已定义

> ID：11149896
> 
> 赞同：0
> 
> 时间：2012-06-22T03:46:23.650
> 
> 标签：python

```
class Card(object):
    suitList = ("Clubs", "Diamonds", "Hearts", "Spades")
    rankList = ("narf", "Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King")

    def __init__(self, suit = 0, rank = 2):
        self.suit = suit
        self.rank = rank
    def __str__ (self):
        return "%s of %s" % (self.rankList[self.rank], self.suitList[self.suit])
    # override built-in compare function:
    def __cmp__(self, other):
        # use if instead of if...elif..else
        if self.suit > other.suit: return 1
        if self.suit < other.suit: return -1

        if self.rank == 1 and other.rank != 1: return 1
        if self.rank != 1 and other.rank == 1: return -1
        if self.rank > other.rank: return 1
        if self.rank < otehr.rank: return -1

        return 0

# test code
card1 = Card(0, 12)
card2 = Card(1, 2)
print card1.cmp(card2) 
```

下面是错误消息： Traceback（最近一次调用最后一次）：文件“C：\Python27\OOP_thecardclass.py”，第 29 行，打印 card1.cmp(card2) AttributeError: 'Card' object has no attribute 'cmp'

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:48:46.687

那一定是`__cmp__`，不是`cmp`：

```
print card1.__cmp__(card2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:49:19.093

`__cmp__`!= `cmp`。尝试使用`==`or`!=`代替，因为实现的原因`__cmp__`是针对这些运算符。您不`__cmp__`直接使用，而是使用它来“重载”运算符。见：[http ://en.wikipedia.org/wiki/Ad-hoc_polymorphism](http://en.wikipedia.org/wiki/Ad-hoc_polymorphism)

# loops - 在 Assembly intel 中设置文本和背景

> ID：11149897
> 
> 赞同：1
> 
> 时间：2012-06-22T03:46:39.360
> 
> 标签：loops, assembly, nested-loops, masm, irvine32

我有一个编程任务要运行并设置所有可能组合的背景和文本。我正在使用一个名为 SetTextColor 的预定义函数，它基本上设置如下值：

```
mov eax, white + (blue * 16) 
```

本质上，这会将文本设置为白色，背景设置为蓝色（设置您乘以 16 的背景）。基本上组合是 16 X 16 = 256

```
TITLE BACKGROUND COLORS                     (main.asm)

; Description: T
; Author: Chad Peppers
; Revision date: June 21, 2012

INCLUDE Irvine32.inc
.data
COUNT = 16
COUNT2 = 16
LCOUNT DWORD ?

val1 DWORD 0
val2 DWORD 0
.code
main PROC

    mov ecx, COUNT

    L1:
        mov LCOUNT, ecx
        mov ecx, COUNT2
        L2:
            mov eax, val1 + (val2 * 16)
            call SetTextColor
            inc val2
            Loop L2
        mov ecx, LCOUNT
        Loop L1

    call DumpRegs
    exit
main ENDP

END main 
```

基本上我正在做一个嵌套循环。我的想法是我只是简单地做一个 1 * (1 * 16) 然后在嵌套循环中增加值直到 1 * (16 * 16)。我收到以下错误

我收到错误 A2026：预期不变

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:05:14.610

我想你得到的错误是在这一行：

```
mov eax, val1 + (val2 * 16) 
```

你就是不能那样做。如果你打算将 val2 乘以 16 然后将 val1 添加到结果中，那么你需要逐步实现它（你可能会遇到 a+b*c 形式的寻址，但 a 和 c 需要是寄存器和 b只能是 2、4 或 8，不能是 16）。尝试用这样的东西替换这一行：

```
mov eax, val2
imul eax, 16
add aex, val1 
```

# opengl - 使用 OpenGL 和 VBO 绘制未缩放的 2D 符号（精灵）

> ID：11149899
> 
> 赞同：0
> 
> 时间：2012-06-22T03:46:43.847
> 
> 标签：opengl, sprite, scale

以下是基本情况：我有一个 OpenGL VBO，它可以绘制一个 2D 符号（例如，多边形或线带，或其他任何东西——本质上是一个简单的精灵）。我已经定义了原点 (0, 0) 周围的顶点，这样我就可以得到所需的符号大小（以屏幕像素为单位）。

我当前的场景已经过平移、缩放和正射投影，以显示模型的特定区域。我现在想绘制符号，使其以特定模型位置为中心，但不随模型缩放（即绘制到 VBO 中定义的屏幕像素大小）。我宁愿这样做，而不必以编程方式重新填充符号的顶点缓冲区（即，我想使用平移和/或缩放在屏幕像素中但在所需位置绘制符号 - 这是在“模型”坐标中定义）。

一个简单的例子：显示一张使用经度和纬度的地图，并且用户已经平移和缩放到世界的特定区域。用户点击感兴趣的网站，我想在那时显示一个“星”。星形将随地图平移，但在用户放大或缩小时保持相同大小。因此，在任何时候，我都知道星星“居中”的位置（在经度、纬度坐标中），并且我为所需大小的星星（以原点为中心）定义了 VBO（在像素坐标中）。

那么，在这种情况下，渲染“未缩放”符号/精灵的“最佳”方式是什么？

我想我知道该怎么做，但是（1）我不确定这种方法是否完全正确，并且（2）它似乎没有像我预期的那样工作。这是我的一般想法的一些伪代码：

```
void DrawSymbol()
{
    ...
    [Not Shown: Determine the screen coordinates of the symbol's desired model location]

    gl.MatrixMode(GL_PROJECTION);
    gl.PushMatrix();    // Store the current projection
    gl.LoadIdentity();  // Set projection to identity (no projection)

    gl.MatrixMode(GL_MODELVIEW);
    gl.PushMastrix();   // Store the current model view (was scaled and translated)
    gl.LoadIdentity();  // Set model view matrix to identity (1-to-1 with screen coords)

    [Not Shown: Translate the model view so that the origin is at the desired screen coordinate found above]

    [Not Shown: Draw the VBO for the symbol] // should draw to raw screen pixels, right?

    gl.MatrixMode(GL_MODELVIEW);
    gl.PopMatrix();     // Set model view matrix to previous value -- should only effect any future renders, right?

    gl.MatrixMode(GL_PROJECTION);
    gl.PopMatrix();     // Set projection matrix to previous value -- again, should only effect any future renders, right?
    ...
} 
```

我已经尝试过了（实际上，我通过在所需的屏幕位置直接渲染一个简单的 LineStrip 来尝试它，而不是使用翻译的 VBO——只是为了测试），但它似乎没有用。不过不知道为什么。这种方法看起来合理吗？

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T04:11:00.020

1.  使用您的 3D 投影设置，[将](https://www.opengl.org/sdk/docs/man2/xhtml/gluProject.xml)3D 坐标投影到屏幕坐标。
2.  现在[设置](http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_2D#Setting_up_the_2D_space)一个正射投影，它与屏幕像素 1:1 映射，并使用 1\. 中确定的窗口坐标来绘制屏幕空间对象。

现在，无论场景的缩放或透视如何，2D 对象都将保持相同的大小和方向。

希望这可以帮助！

# android - File Observer 无法通过意图服务工作

> ID：11149905
> 
> 赞同：5
> 
> 时间：2012-06-22T03:47:44.723
> 
> 标签：android, intentservice, fileobserver

我找到了一个很棒的类来扩展抽象的 File Observer 类......

```
import android.os.FileObserver;
import java.io.DataInputStream; 
import java.io.DataOutputStream; 
import java.io.File; 
import java.io.FileInputStream; 
import java.io.IOException; 
import java.net.HttpURLConnection; 
import java.net.MalformedURLException; 
import java.net.URL; 
import android.util.Log;

public class FileSync extends FileObserver {
public String absolutePath;
public String uid;

public FileSync(String path, String uidd) {
    super(path, FileObserver.ALL_EVENTS);
    absolutePath = path;
    uid = uidd;
}
@Override
public void onEvent(int event, String path) {
    if (path == null) { //path is the name of the file... I think its absolute
        return;
    }
    //a new file or subdirectory was created under the monitored directory
    if ((FileObserver.CREATE & event)!=0) { 
        doFileUpload(path, uid);
    }
    //a file or directory was opened
    if ((FileObserver.OPEN & event)!=0) {
        //TODO Nothing... yet
    }
    //data was read from a file
    if ((FileObserver.ACCESS & event)!=0) {
        //TODO Nothing... yet
    }
    //data was written to a file
    if ((FileObserver.MODIFY & event)!=0) {
        doFileUpload(path,uid);
    }
    //someone has a file or directory open read-only, and closed it
    if ((FileObserver.CLOSE_NOWRITE & event)!=0) {
        //TODO Nothing... yet
    }
    //someone has a file or directory open for writing, and closed it 
    if ((FileObserver.CLOSE_WRITE & event)!=0) {
        doFileUpload(path,uid);
    }
    //[todo: consider combine this one with one below]
    //a file was deleted from the monitored directory
    if ((FileObserver.DELETE & event)!=0) {
        //TODO Remove file from the server
    }
    //the monitored file or directory was deleted, monitoring effectively stops
    if ((FileObserver.DELETE_SELF & event)!=0) {
        //TODO Toast an error, recreate the folder, resync and restart monitoring
    }
    //a file or subdirectory was moved from the monitored directory
    if ((FileObserver.MOVED_FROM & event)!=0) {
        //TODO Delete from the server
    }
    //a file or subdirectory was moved to the monitored directory
    if ((FileObserver.MOVED_TO & event)!=0) {
        doFileUpload(path,uid);
    }
    //the monitored file or directory was moved; monitoring continues
    if ((FileObserver.MOVE_SELF & event)!=0) {
        //TODO Recreate the folder and show toast
    }
    //Metadata (permissions, owner, timestamp) was changed explicitly
    if ((FileObserver.ATTRIB & event)!=0) {
        //TODO Nothing... Yet
    }
} 
```

我在 IntentService 的 onCreate 中创建了三个观察者，如下所示：

```
new File("/sdcard/Docs/").mkdir();
FileSync files = new FileSync("/sdcard/Docs/",uid);
FileSync pictures = new FileSync(Environment.DIRECTORY_PICTURES,uid);
FileSync music = new FileSync(Environment.DIRECTORY_MUSIC,uid);
files.startWatching();
pictures.startWatching();
music.startWatching(); 
```

不仅观察者不工作，而且 mkdir 功能也不工作。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T04:58:15.703

检查您是否在清单文件中包含了[android.permission.WRITE_EXTERNAL_STORAGE](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)。
缺少此权限将导致失败，`mkdir()`这也将导致[FileObserver](http://developer.android.com/reference/android/os/FileObserver.html)失败，因为被监视的文件或目录在[startWatching](http://developer.android.com/reference/android/os/FileObserver.html#startWatching%28%29)时必须存在，否则不会报告任何事件。

# php - SQL：消除两个表中的重复行

> ID：11149906
> 
> 赞同：0
> 
> 时间：2012-06-22T03:47:49.713
> 
> 标签：php, mysql, sql

我有两张桌子。我想与两个表进行比较并删除重复值。但首先我需要查找“A-Confirm-tbl”，如果 id 已确认，则只需将其从上表中删除。我写了一个简单的 SQL 代码，但是没有用。

```
SELECT A.id
FROM A
FULL JOIN B
ON A.id = B.id
AND A-Confirm-tbl.id='1'
GROUP BY A.id

A   B
1   2
5   1
2   5
3   4
10  8
20  15

A-Confirm-tbl
id  confirm
1   1
5   0
2   1
3   0
10  0
20  0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:12:34.960

```
DELETE first_table_name
FROM first_table_name
INNER JOIN second_table_name
      ON second_table_name.ID = first_table_name.ID
join A-Confim-tbl on first_table_name.ID=A-Confim-tbl.Id
where A-Confim-tbl.confirm='1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:00:27.397

Free Hand，但基本上我只是加入确认表以仅获取确认值为 1 的 a 行，然后执行子选择以获取所有 B id，并仅从 A 中选择具有来自该子选择的 ID 的行。

```
SELECT A.id 
FROM A 
JOIN A-Confim-tbl aconf 
  ON A.id = aconf.id AND aconf.confirm = 1 
WHERE a.id IN (SELECT B.id FROM B) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T04:05:30.557

我会在下面做：使用内部连接查找具有 tblA 和 tblB 的匹配记录 id。然后使用 A-Confirm-tbl 加入记录，并过滤仅使用 confirm=1 的记录。

```
SELECT * from tblA a 
INNER JOIN tblB b ON a.id=b.id 
JOIN A-Confim-tbl c on a.id=c.id 
WHERE c.confirm='1' 
```

# c# - 使用 AvalonEdit 显示无效的 XML 语法

> ID：11149907
> 
> 赞同：6
> 
> 时间：2012-06-22T03:48:00.233
> 
> 标签：c#, xml, avalonedit

我正在尝试在我的 WPF 应用程序中使用[AvalonEdit](http://www.codeproject.com/KB/edit/AvalonEdit.aspx)作为 XML 文本编辑器。但是，当遇到无效语法时，它不会进行任何格式化（例如波浪线）。

我想知道是否可以使用 AvalonEdit 完成此类功能，或者是否有其他替代方法。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T12:04:29.273

我还希望利用 xml 无效语法突出显示。在查看 SharpDevelop 源代码时，我注意到错误报告是在高于 AvalonEdit 控件的级别上完成的，并且似乎并不特别适合重用。所以我尝试提取足够的代码来启动 POC。这就是我想出的...

```
<UserControl x:Class="WpfTestApp.Xml.XmlEditor"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:avalonedit="http://icsharpcode.net/sharpdevelop/avalonedit"
                xmlns:WpfTestApp="clr-namespace:WpfTestApp.Xml">

    <UserControl.CommandBindings>
        <CommandBinding Command="WpfTestApp:XmlEditor.ValidateCommand" Executed="Validate"/>
    </UserControl.CommandBindings>

    <avalonedit:TextEditor Name="textEditor" FontFamily="Consolas" SyntaxHighlighting="XML" FontSize="8pt">
        <avalonedit:TextEditor.Options>
            <avalonedit:TextEditorOptions ShowSpaces="True" ShowTabs="True"/>
        </avalonedit:TextEditor.Options>
        <avalonedit:TextEditor.ContextMenu>
            <ContextMenu>
                <MenuItem Command="Undo" />
                <MenuItem Command="Redo" />
                <Separator/>
                <MenuItem Command="Cut" />
                <MenuItem Command="Copy" />
                <MenuItem Command="Paste" />
                <Separator/>
                <MenuItem Command="WpfTestApp:XmlEditor.ValidateCommand" />
            </ContextMenu>
        </avalonedit:TextEditor.ContextMenu>
    </avalonedit:TextEditor>
</UserControl> 
```

.

```
public partial class XmlEditor : UserControl
{
    private static readonly ICommand validateCommand = new RoutedUICommand("Validate XML", "Validate", typeof(MainWindow),
        new InputGestureCollection { new KeyGesture(Key.V, ModifierKeys.Control | ModifierKeys.Shift) });

    private readonly TextMarkerService textMarkerService;
    private ToolTip toolTip;

    public static ICommand ValidateCommand
    {
        get { return validateCommand; }
    }

    public XmlEditor()
    {
        InitializeComponent();

        textMarkerService = new TextMarkerService(textEditor);
        TextView textView = textEditor.TextArea.TextView;
        textView.BackgroundRenderers.Add(textMarkerService);
        textView.LineTransformers.Add(textMarkerService);
        textView.Services.AddService(typeof(TextMarkerService), textMarkerService);

        textView.MouseHover += MouseHover;
        textView.MouseHoverStopped += TextEditorMouseHoverStopped;
        textView.VisualLinesChanged += VisualLinesChanged;
    }

    private void MouseHover(object sender, MouseEventArgs e)
    {
        var pos = textEditor.TextArea.TextView.GetPositionFloor(e.GetPosition(textEditor.TextArea.TextView) + textEditor.TextArea.TextView.ScrollOffset);
        bool inDocument = pos.HasValue;
        if (inDocument)
        {
            TextLocation logicalPosition = pos.Value.Location;
            int offset = textEditor.Document.GetOffset(logicalPosition);

            var markersAtOffset = textMarkerService.GetMarkersAtOffset(offset);
            TextMarkerService.TextMarker markerWithToolTip = markersAtOffset.FirstOrDefault(marker => marker.ToolTip != null);

            if (markerWithToolTip != null)
            {
                if (toolTip == null)
                {
                    toolTip = new ToolTip();
                    toolTip.Closed += ToolTipClosed;
                    toolTip.PlacementTarget = this;
                    toolTip.Content = new TextBlock
                    {
                        Text = markerWithToolTip.ToolTip,
                        TextWrapping = TextWrapping.Wrap
                    };
                    toolTip.IsOpen = true;
                    e.Handled = true;
                }
            }
        }
    }

    void ToolTipClosed(object sender, RoutedEventArgs e)
    {
        toolTip = null;
    }

    void TextEditorMouseHoverStopped(object sender, MouseEventArgs e)
    {
        if (toolTip != null)
        {
            toolTip.IsOpen = false;
            e.Handled = true;
        }
    }

    private void VisualLinesChanged(object sender, EventArgs e)
    {
            if (toolTip != null)
            {
                    toolTip.IsOpen = false;
            }
    }

    private void Validate(object sender, ExecutedRoutedEventArgs e)
    {
        IServiceProvider sp = textEditor;
        var markerService = (TextMarkerService)sp.GetService(typeof(TextMarkerService));
        markerService.Clear();

        try
        {
            var document = new XmlDocument { XmlResolver = null };
            document.LoadXml(textEditor.Document.Text);
        }
        catch (XmlException ex)
        {
            DisplayValidationError(ex.Message, ex.LinePosition, ex.LineNumber);
        }
    }

    private void DisplayValidationError(string message, int linePosition, int lineNumber)
    {
        if (lineNumber >= 1 && lineNumber <= textEditor.Document.LineCount)
        {
            int offset = textEditor.Document.GetOffset(new TextLocation(lineNumber, linePosition));
            int endOffset = TextUtilities.GetNextCaretPosition(textEditor.Document, offset, System.Windows.Documents.LogicalDirection.Forward, CaretPositioningMode.WordBorderOrSymbol);
            if (endOffset < 0)
            {
                endOffset = textEditor.Document.TextLength;
            }
            int length = endOffset - offset;

            if (length < 2)
            {
                length = Math.Min(2, textEditor.Document.TextLength - offset);
            }

            textMarkerService.Create(offset, length, message);
        }
    }
} 
```

.

```
public class TextMarkerService : IBackgroundRenderer, IVisualLineTransformer
{
    private readonly TextEditor textEditor;
    private readonly TextSegmentCollection<TextMarker> markers;

    public sealed class TextMarker : TextSegment
    {
        public TextMarker(int startOffset, int length)
        {
            StartOffset = startOffset;
            Length = length;
        }

        public Color? BackgroundColor { get; set; }
        public Color MarkerColor { get; set; }
        public string ToolTip { get; set; }
    }

    public TextMarkerService(TextEditor textEditor)
    {
        this.textEditor = textEditor;
        markers = new TextSegmentCollection<TextMarker>(textEditor.Document);
    }

    public void Draw(TextView textView, DrawingContext drawingContext)
    {
        if (markers == null || !textView.VisualLinesValid)
        {
            return;
        }
        var visualLines = textView.VisualLines;
        if (visualLines.Count == 0)
        {
            return;
        }
        int viewStart = visualLines.First().FirstDocumentLine.Offset;
        int viewEnd = visualLines.Last().LastDocumentLine.EndOffset;
        foreach (TextMarker marker in markers.FindOverlappingSegments(viewStart, viewEnd - viewStart))
        {
            if (marker.BackgroundColor != null)
            {
                var geoBuilder = new BackgroundGeometryBuilder {AlignToWholePixels = true, CornerRadius = 3};
                geoBuilder.AddSegment(textView, marker);
                Geometry geometry = geoBuilder.CreateGeometry();
                if (geometry != null)
                {
                    Color color = marker.BackgroundColor.Value;
                    var brush = new SolidColorBrush(color);
                    brush.Freeze();
                    drawingContext.DrawGeometry(brush, null, geometry);
                }
            }
            foreach (Rect r in BackgroundGeometryBuilder.GetRectsForSegment(textView, marker))
            {
                Point startPoint = r.BottomLeft;
                Point endPoint = r.BottomRight;

                var usedPen = new Pen(new SolidColorBrush(marker.MarkerColor), 1);
                usedPen.Freeze();
                const double offset = 2.5;

                int count = Math.Max((int) ((endPoint.X - startPoint.X)/offset) + 1, 4);

                var geometry = new StreamGeometry();

                using (StreamGeometryContext ctx = geometry.Open())
                {
                    ctx.BeginFigure(startPoint, false, false);
                    ctx.PolyLineTo(CreatePoints(startPoint, endPoint, offset, count).ToArray(), true, false);
                }

                geometry.Freeze();

                drawingContext.DrawGeometry(Brushes.Transparent, usedPen, geometry);
                break;
            }
        }
    }

    public KnownLayer Layer
    {
        get { return KnownLayer.Selection; }
    }

    public void Transform(ITextRunConstructionContext context, IList<VisualLineElement> elements)
    {}

    private IEnumerable<Point> CreatePoints(Point start, Point end, double offset, int count)
    {
        for (int i = 0; i < count; i++)
        {
            yield return new Point(start.X + (i*offset), start.Y - ((i + 1)%2 == 0 ? offset : 0));
        }
    }

    public void Clear()
    {
        foreach (TextMarker m in markers)
        {
            Remove(m);
        }
    }

    private void Remove(TextMarker marker)
    {
        if (markers.Remove(marker))
        {
            Redraw(marker);
        }
    }

    private void Redraw(ISegment segment)
    {
        textEditor.TextArea.TextView.Redraw(segment);
    }

    public void Create(int offset, int length, string message)
    {
        var m = new TextMarker(offset, length);
        markers.Add(m);
        m.MarkerColor = Colors.Red;
        m.ToolTip = message;
        Redraw(m);
    }

    public IEnumerable<TextMarker> GetMarkersAtOffset(int offset)
    {
        return markers == null ? Enumerable.Empty<TextMarker>() : markers.FindSegmentsContaining(offset);
    }
} 
```

# javascript - jQuery：从对象中删除空项

> ID：11149909
> 
> 赞同：1
> 
> 时间：2012-06-22T03:48:01.420
> 
> 标签：javascript, jquery

我正在访问维基百科的 api 并通过 ajax 获取有关某个主题的信息。api返回一个我正在解析的对象，如下所示：

```
wikipage = data.parse.text['*'].children('p:lt(3)');
wikipage.find('sup').remove(); 
```

然而，因为维基百科使用了相当松散的格式，我发现我必须抓住返回的前 3 段以获得足够的信息。有时，维基百科会返回一个空的第一段，以及一个填充的第二和第三段。其他时候，第 1 次和第 2 次是空的，第 3 次是满的。偶尔所有3个都充满了文字。

我需要完成的是从 wikipage 对象中删除任何空段落值，然后将 wikipage = 设置为对象中的第一个 p 值。

我尝试了以下方法：

```
wikipage.find('p:empty').remove();
return wikipage.get(0); 
```

但这不起作用。它不会删除空段落。

我是 jQuery 的新手，我要拔头发了，哈哈！请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:30:11.460

尝试：

```
wikipage.find("p").each(function () {
    var $this = $(this);
    if ($this.html().trim() == "") {
        $this.remove();
    }
}); 
```

您还可以使用选择器：

```
$("p", wikipage).each(function () {

}); 
```

但我不确定这种情况的区别。链接时，使用.find() 是有意义的，但是这个选择是在开始时，所以我不知道它们有什么不同。我确定没关系，只是想指出来！

# xcode - Scripting Bridge 在将收件人添加到邮件时添加了不需要的 HTML 代码

> ID：11149911
> 
> 赞同：0
> 
> 时间：2012-06-22T03:48:12.843
> 
> 标签：xcode, cocoa, email, safari, scripting-bridge

好吧，所以这个有点奇怪......

我在 Safari 中有一个 HTML 页面，我想将其作为电子邮件发送。如果我进入文件菜单并选择“此页面的邮件内容”，它会按预期传输并且看起来正确。

但是，如果我使用 Scripting Bridge 将收件人添加到外发邮件，它会将以下代码添加到添加的每个收件人的邮件内容区域的顶部。在一个示例中，添加了 24 个收件人，生成的电子邮件包含以下代码的 24 个连续重复：

```
<div style=3D"font-family: = Helvetica; font-size: 12px; color: black; text-align: left;">
<br =class=3D"webkit-block-placeholder"></div> 
```

由于 div 标记的呈现方式，在电子邮件的开头创建了 24 个换行符，以便我的 HTML 从页面的下方开始。

有人知道为什么要插入此代码吗？

这是我用于 Scripting Bridge 的代码：

```
SafariDocument *safariDoc = [[[[safari classForScriptingClass:@"document"] alloc]
initWithProperties:[NSDictionary dictionaryWithObject:@"//private/var/tmp/mail.html" forKey: @"URL"]] autorelease];
    [[safari documents] addObject:safariDoc];

SafariWindow *safariWindow = [[safari windows] objectAtIndex:0];
        [safariWindow emailContentsOf:safariWindow.currentTab];
        mailMessage = [[[mail outgoingMessages] objectAtIndex:0] autorelease]; 
```

这是我用来添加收件人的代码：

```
MailToRecipient *recipient = [[[[mail classForScriptingClass:@"to recipient"] alloc] 
                                   initWithProperties:[NSDictionary dictionaryWithObjectsAndKeys:
                                                       [preferencesData bandName], @"name",
                                                       [preferencesData bandEmail], @"address",
                                                       nil]] autorelease];
    [[mailMessage toRecipients] addObject:recipient]; 
```

*** 编辑 ***

我找到了解决该问题的方法，但是我仍然想知道为什么在添加收件人时将这段代码插入正文中...解决方法如下：我将以下内容插入了 CSS 部分我的 HTML 模板...

```
div {
display:none;
} 
```

因此，显示会忽略 html 模板中的所有 div 标签。我仍然有上述代码的 24 个副本，但它们基本上被忽略了，这解决了我的视觉布局问题。

如果有人有更好的解决方案，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:35:33.107

Apple 似乎不允许您访问您不“拥有”或在您的程序中创建的外发邮件。

在上面的代码中，我试图通过让 Safari “网页的电子邮件内容”来解决 Apple 的限制，即不允许你将外发电子邮件设置为 HTML（他们不喜欢你做的其他事情），从而创建一个新的Apple Mail 中的外发邮件。

然后我试图通过分配对变量的引用来控制该消息，如下所示：

```
mailMessage = [[[mail outgoingMessages] objectAtIndex:0] autorelease]; 
```

一些研究表明 mailMessage 显示为“nil”，即使以下代码：

```
[[mail outgoingMessages] count]; 
```

正在返回正确的值 1。

所以理论上，我根本不应该向 Safari 创建的 HTML 电子邮件添加收件人。

为什么它有时有效而其他时候无效，这超出了我的理解。但是当它起作用时，它也会在代码主体中添加格式化标签。我怀疑这只是一个尚未被发现的错误，因为它根本不应该工作。

# php - 运行程序已编译时出现 Hiphop 错误

> ID：11149913
> 
> 赞同：11
> 
> 时间：2012-06-22T03:48:42.913
> 
> 标签：php, compiler-construction, yii, runtime-error, hiphop

我在使用 Hiphop 尝试编译一个简单的 yii 应用程序（使用 cmd 生成`yiic webapp demo`）时成功了。

`hphp test.php --keep-tempdir=1 --log=3 --include-path="../yii/framework"`

编译处理没有任何错误或警告。我可以用 cmd 编译程序启动服务器：

`sudo /tmp/hphp_8AcATe/program -m server -p 8008 -v "Server.SourceRoot=`pwd `" \ -v "Server.DefaultDocument=index.php" -v "Server.EnableStaticContentFromDisk=true" -c $HPHP_HOME/bin/mime.hdf` （此 cmd 来自[此处](https://github.com/facebook/hiphop-php/wiki/Running-HipHop)- 示例：编译 WordPress）

之后，我通过浏览器访问`http://127.0.0.1:8008`，然后遇到错误：

*更新*（我在下面的路径中有混淆并已修复）

> HipHop 通知：尝试调用 /var/www/demo/../yii/framework/yii.php 但找不到文件。在第 12 行的 index.php 中
> 
> HipHop 致命错误：所需文件不存在：第 12 行 index.php 中的 /var/www/demo/../yii/framework/yii.php

这是第 12 行，index.php：

```
4\.  $yii=dirname(__FILE__).'/../yii/framework/yii.php';
...
12\. require_once($yii); 
```

*更新*

我已经尝试使用 realpath() 作为@prodigitalson 的提示，但在控制台中，程序仍然输出相同的内容：

> 所需文件不存在：第 12 行 index.php 中的 /var/www/demo/yii/framework/yii.php

为避免出现相对路径混淆的情况，我将编译后的程序文件夹复制到`/var/www`（带有 yii lib: 的根目录`/var/www/yii/framework`），但没有任何变化:(

有没有人和我一样遇到这个错误？如何修复它们？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:22:15.460

摆脱`'/..'`_`'/../yii/framework/yii.php'`

# python - 从 Python 2.6 升级到 2.7 不起作用

> ID：11149915
> 
> 赞同：0
> 
> 时间：2012-06-22T03:48:47.327
> 
> 标签：python, frameworks, version

使用 mac 10.6，我尝试下载并安装 python 2.7。虽然安装程序已经完成，并且python 2.7在Applications文件夹中，但framework文件夹仍然没有改变，最新的是2.6。

当我运行 python 脚本时，我右键单击以选择 Python Launcher(2.7)(默认)，但我已经包含了这些行

```
import sys
print(sys.version) 
```

在我的脚本中，这表明

```
2.6.2 (r262:71600, Apr 16 2009, 09:17:39) 
[GCC 4.0.1 (Apple Computer, Inc. build 5250) 
```

这是怎么回事？

IDLE 2.7 也不起作用（声称连接被阻止），但 2.6 可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T03:54:37.033

升级预装的 Python 很危险，因为某些 Mac 程序依赖于该特定版本。您应该使用[ActivePython](http://www.activestate.com/activepython/downloads)，以免破坏依赖关系。要启动它，请键入：

```
python2.7 
```

在终端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:20:52.493

您始终可以通过终端设置或 .bash 设置文件为其设置别名，以便每次运行命令时都会运行`python`终端`python2.7`。

输入`alias python='python2.7'`您的终端开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:47:03.680

首先要检查的是确保 /usr/local/bin（安装了不属于系统和/或包管理器的二进制文件）在 $PATH 中的 /usr/bin 之前，其他所有文件都相同/usr/local/*.

升级 python 最简单的方法可能是[homebrew](https://brew.sh/)，它基本上是一个伟大的 OSX 包管理器（如 macports/fink 但更好）。

如果失败，您可以尝试手动卸载它（查看 /usr/local/），然后重试。最好的方法可能是 virtualenv，您可以在其中为您的用户安装具有写入权限的 python（易于安装模块）。

# c++ - 内容检查：C++ 中的数据类型及其值验证

> ID：11149921
> 
> 赞同：0
> 
> 时间：2012-06-22T03:49:09.473
> 
> 标签：c++, types

我的数据类型可以是 U1、U2、U4、I1、I2、I4`std::string`或`bool`.

假设数据存储在`std::vector`.

如何通过值检查数据类型？

据我所知，`tryParse()`C#中有。我怎么能在 C++ 中做到这一点？

```
Value = MyVec[0]; // the value is 65; 
```

我想验证`65`是否属于 U2 类型？

# iphone - 使用 Xcode 将 PDF 文件上传到报亭

> ID：11149922
> 
> 赞同：1
> 
> 时间：2012-06-22T03:49:13.557
> 
> 标签：iphone, xcode

描述：我项目的目标是在 iOS 上创建一个报亭应用程序。

例如， http: [//imageshack.us/photo/my-images/69/helloks.jpg/](http://imageshack.us/photo/my-images/69/helloks.jpg/)就是我所做的。此应用程序允许阅读 PDF 文件。但是，我仍然无法在网络上找到任何资源/代码来教我如何将 PDF 文件插入报亭以供用户查看和下载。

我已按照[http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/](http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/)的教程进行操作， 但是我被困在“显示和下载杂志”这一步。请协助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:36:36.380

[您可以在此处](https://github.com/viggiosoft/NewsstandTutorial)找到该教程的源代码。

首先注意 tableView:cellForRowAtIndexPath[方法](https://github.com/viggiosoft/NewsstandTutorial/blob/master/Newsstand/StoreViewController.m#L147)。***它从发布***者对象获取单元信息。让我们看一下**Publisher**类。

Publisher 有[getIssuesList](https://github.com/viggiosoft/NewsstandTutorial/blob/master/Newsstand/Publisher.m#L39)方法，用于检索问题列表。

```
NSArray *tmpIssues = [NSArray arrayWithContentsOfURL:[NSURL URLWithString:@"http://www.viggiosoft.com/media/data/blog/newsstand/issues.plist"]]; 
```

现在让我们看看当用户选择单元格时会发生什么。[在这里](https://github.com/viggiosoft/NewsstandTutorial/blob/master/Newsstand/StoreViewController.m#L184)我们可以找到以下几行

```
...

if (nkIssue.status==NKIssueContentStatusAvailable) {
    [self readIssue:nkIssue];
} else if(nkIssue.status==NKIssueContentStatusNone) {
    [self downloadIssueAtIndex:indexPath.row];
} 
```

名为[downloadIssueAtIndex的方法：](https://github.com/viggiosoft/NewsstandTutorial/blob/master/Newsstand/StoreViewController.m#L207)负责下载问题。

你必须熟悉 NSURLConnection 的异步请求才能理解它是如何工作的。

# regex - 使用 Perl 提取内容

> ID：11149928
> 
> 赞同：2
> 
> 时间：2012-06-22T03:49:49.267
> 
> 标签：regex, perl, text-processing

我想用 Perl 编写一个解析脚本，从这些数据中打印出所有的“接口名称”：

```
interfaces.ifTable.ifEntry.ifDescr.1 : OCTET STRING- (ascii): (hex): length = 30
    0:  53 6f 66 74 77 61 72 65 20 4c 6f 6f 70 62 61 63     Software Loopbac
    16:  6b 20 49 6e 74 65 72 66 61 63 65 20 31 00 -- --     k Interface 1...

interfaces.ifTable.ifEntry.ifDescr.2 : OCTET STRING- (ascii): (hex): length = 20
    0:  57 41 4e 20 4d 69 6e 69 70 6f 72 74 20 28 53 53     WAN Miniport (SS
    16:  54 50 29 00 -- -- -- -- -- -- -- -- -- -- -- --     TP).............

interfaces.ifTable.ifEntry.ifDescr.3 : OCTET STRING- (ascii): (hex): length = 20
    0:  57 41 4e 20 4d 69 6e 69 70 6f 72 74 20 28 4c 32     WAN Miniport (L2
    16:  54 50 29 00 -- -- -- -- -- -- -- -- -- -- -- --     TP)............. 
```

我想提取所有三个接口的名称，如（“Sotware Loopback Interface 1”、“WAN Miniport (SSTP)”、“WAN Miniport (L2TP)”），并做进一步处理。我尝试使用正则表达式但没有运气。有什么简单的方法可以做到这一点吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:30:04.533

这是另一个肮脏的 perl 脚本。根据需要将数据读入 $text 。正则表达式查找每个十六进制转储行的模式。然后，连接行将十六进制值重新组合回字符串，并将其附加到当前累积的接口名称中。mttrb 更简单。;)

```
$text =<<EOM;
interfaces.ifTable.ifEntry.ifDescr.1 : OCTET STRING- (ascii): (hex): length = 30
    0:  53 6f 66 74 77 61 72 65 20 4c 6f 6f 70 62 61 63     Software Loopbac
    16:  6b 20 49 6e 74 65 72 66 61 63 65 20 31 00 -- --     k Interface 1...

interfaces.ifTable.ifEntry.ifDescr.2 : OCTET STRING- (ascii): (hex): length = 20
    0:  57 41 4e 20 4d 69 6e 69 70 6f 72 74 20 28 53 53     WAN Miniport (SS
    16:  54 50 29 00 -- -- -- -- -- -- -- -- -- -- -- --     TP).............

interfaces.ifTable.ifEntry.ifDescr.3 : OCTET STRING- (ascii): (hex): length = 20
    0:  57 41 4e 20 4d 69 6e 69 70 6f 72 74 20 28 4c 32     WAN Miniport (L2
    16:  54 50 29 00 -- -- -- -- -- -- -- -- -- -- -- --     TP).............
EOM

$interface = "";
foreach $line (split(/\n/, $text)) {
  next unless $line =~ /\b(\d+):\s+((?:[0-9a-fA-F-]{2} ){16})/;
  if ($1 == 0) {
    print "$interface\n" if $interface;
    $interface = "";
  }
  $interface .= join('', map { chr(hex($_)) } grep { $_ ne '--' && $_ ne '00' } split(/ /, $2));
}
print "$interface\n" if $interface; 
```

为了解释连接线，该线发生了以下事情。

1.  split(/ /, $2) - 从正则表达式中取出第二个保存的组，即十六进制字符，并将其拆分为包含每对数字的数组。
2.  grep { $_ ne '--' && $_ ne '00' } - 查看数字对数组并过滤掉 '--' 和 '00' 条目，只留下有效值。
3.  map { chr(hex($ *)) } - 对每个过滤的对运行表达式，$*是正在处理的对。Hex 将其从 hex() 字符串解析为数字，然后 chr() 获取该数字并将其转换为相应的字符。
4.  join('', ...) - 接收 map 创建的字符数组并从中创建单个字符串。'' 是分隔每个数组项的字符串，在这种情况下什么都没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:16:17.100

以下是一个快速而肮脏的 perl 脚本，它可以根据示例输入执行您想要的操作。它不会非常优雅地处理输入格式的变化。我已经编写了从文件中获取输入的脚本，您需要更改它。

```
open(INPUT, "interfaces.txt");

my $interface;

while(<INPUT>) {
        if (/^\s*0:/) {
                $interface = substr($_, 60, 16);
        } elsif (/^\s*16:/) {
                $interface .= substr($_, 61, 16);

                $interface =~ s/\.+$//;

                print $interface, "\n";
        }
}

close(INPUT); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T05:08:06.663

通过使用段落模式（设置`$/ = ""`），您可以读取每条记录并单独处理行。抓取最后一个字段似乎是最容易`split`在空白上使用固定`LIMIT`字段完成的，因为十六进制数字的数量似乎是恒定的，我们想要最后一个字段。

```
use strict;
use warnings;
use Data::Dumper;

$/ = "";  # paragraph mode keeps lines together

while (<DATA>) {
    chomp;   # removes two newlines after we changed $/
    my ($hdr, @data) = split /\n/; # header + 2 lines
    my ($interface, @nums) = getdata(@data);
    print Dumper $interface;
}
sub getdata {
    my (@hex, $str);
    my @data = @_;
    for (@data) {
        push @hex, split(' ', $_, 18);  # LIMIT set to 18
        $str .= pop @hex;               # last field is our string
    }
    return $str, @hex;   # return everything, why not?
}

__DATA__
interfaces.ifTable.ifEntry.ifDescr.1 : OCTET STRING- (ascii): (hex): length = 30
    0:  53 6f 66 74 77 61 72 65 20 4c 6f 6f 70 62 61 63     Software Loopbac
    16:  6b 20 49 6e 74 65 72 66 61 63 65 20 31 00 -- --     k Interface 1...

interfaces.ifTable.ifEntry.ifDescr.2 : OCTET STRING- (ascii): (hex): length = 20
    0:  57 41 4e 20 4d 69 6e 69 70 6f 72 74 20 28 53 53     WAN Miniport (SS
    16:  54 50 29 00 -- -- -- -- -- -- -- -- -- -- -- --     TP).............

interfaces.ifTable.ifEntry.ifDescr.3 : OCTET STRING- (ascii): (hex): length = 20
    0:  57 41 4e 20 4d 69 6e 69 70 6f 72 74 20 28 4c 32     WAN Miniport (L2
    16:  54 50 29 00 -- -- -- -- -- -- -- -- -- -- -- --     TP)............. 
```

**输出：**

```
$VAR1 = 'Software Loopback Interface 1...';
$VAR1 = 'WAN Miniport (SSTP).............';
$VAR1 = 'WAN Miniport (L2TP).............'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T06:57:34.897

另一种解决方案，使用正则表达式。

```
use strict ;
use warnings;
my $Data = '
interfaces.ifTable.ifEntry.ifDescr.1 : OCTET STRING- (ascii): (hex): length = 30
    0:  53 6f 66 74 77 61 72 65 20 4c 6f 6f 70 62 61 63     Software Loopbac
    16:  6b 20 49 6e 74 65 72 66 61 63 65 20 31 00 -- --     k Interface 1...

interfaces.ifTable.ifEntry.ifDescr.2 : OCTET STRING- (ascii): (hex): length = 20
    0:  57 41 4e 20 4d 69 6e 69 70 6f 72 74 20 28 53 53     WAN Miniport (SS
    16:  54 50 29 00 -- -- -- -- -- -- -- -- -- -- -- --     TP).............

interfaces.ifTable.ifEntry.ifDescr.3 : OCTET STRING- (ascii): (hex): length = 20
    0:  57 41 4e 20 4d 69 6e 69 70 6f 72 74 20 28 4c 32     WAN Miniport (L2
    16:  54 50 29 00 -- -- -- -- -- -- -- -- -- -- -- --     TP).............
';

foreach my $Record ( $Data =~ m#\G(.+?)(?:(?=^\s*$)|\z)#gsm)  {
    my $Interface = '';
    foreach ( split /\n/, $Record ) {
        next if /^\s*$/;
        next if /OCTET STRING/i;
        (m#^[^:]+:(?:\s*(?:\w\w|--)\s*){16}(.+)$#);
        $Interface .= "$1";
    }

    print "$Interface\n";
} 
```

# javascript - 如何将二进制多部分表单数据作为base64发送？

> ID：11149930
> 
> 赞同：10
> 
> 时间：2012-06-22T03:50:00.903
> 
> 标签：javascript, jquery, html, wicket

> **可能重复：**
> [如何使用 Javascript 编码为 Base64？](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)

我有一个基于 Java、Wicket 和 JQuery 的 Web 应用程序，它具有使用户能够通过 multipart/form-data 上传文件（图像、pdfs、rtf）的功能。

我们的网络安全基础设施过滤所有 http 流量以获取可能的恶意内容，例如 XSS 攻击、SQL 注入、缓冲区溢出等

该过滤器不区分普通文本输入字段和文件数据，因此它会从许多上传的二进制文件中提取误报，从而阻止这些文件被上传。我无法更改安全策略。

似乎最好的解决方法是将文件数据进行 base-64 编码，以便使用 Content-Transfer-Encoding:base64 发送，类似于电子邮件客户端所做的。

有什么方法可以指示浏览器将二进制传输为 base64 或其他一些非二进制格式？

如果没有，是否可以使用一些 JavaScript 手动完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T04:55:53.483

看来您可以`Content-Transfer-Encoding: base64`
从 W3C 设置报价：

> 如果该部分的值不符合默认（7BIT）编码，则可以对每个部分进行编码并提供“Content-Transfer-Encoding”标头

[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)

前提是您使用的 Java Web Server 不包含参数`Content-Transfer-Encoding`。

# json - Gson.toJson 对象包含 URL

> ID：11149931
> 
> 赞同：11
> 
> 时间：2012-06-22T03:50:00.980
> 
> 标签：json, gson

我正在使用 Gson.toJSON 方法。我的 pojo 包含属性之一作为 URL 字符串。奇怪的是 Gson 转换器改变了 URL 字符

输出为：/myApp/myAction.html?method\u003drouter\u0026cmd\u003d1

预期输出为：/myApp/myAction.html?method=router&cmd=1

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-22T03:56:15.330

像这样创建您的 Gson 实例：

```
Gson gson = new GsonBuilder()
    .disableHtmlEscaping()
    .create(); 
```

[禁用 HTML 转义](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html#disableHtmlEscaping%28%29)将阻止 GSON 将空格字符编码为 \u0026。

# javascript - 当 Django 中的确认消息为假时什么都不做

> ID：11149936
> 
> 赞同：2
> 
> 时间：2012-06-22T03:50:26.333
> 
> 标签：javascript, django

我有一个 URL，它将记录的 ID 传递给要删除的视图。但是，我想在删除记录之前向用户显示确认消息。

我正在尝试使用 Javascript 来实现，但它不起作用。该消息出现，但即使在单击“取消”之后，Django 也会重新加载页面并因此删除该行。

```
<script type="text/javascript">
    function confirmaExclusao() {
        var resp = confirm("O grupo será excluído permanentemente. Deseja continuar?")
        if (!resp) {
            return false;
        }
    }
</script> 
```

...

```
<a href="/grupos/remover/{{ grupo.id }}" onclick="confirmaExclusao()"><img src="{{ STATIC_URL }}img/btn_remove_group.png"></a> 
```

有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:34:35.580

我不建议按照其他回答者的建议去做。您需要做的就是将您的 <a> 标记更改为：

```
<a href="/grupos/remover/{{ grupo.id }}" onclick="return confirmaExclusao();"> 
```

然后添加：

```
return true; 
```

在您的 confirmaExclusao 功能结束时。

需要进行此更改的原因是因为单击 <a> 标记的默认行为是执行“onclick”javascript 代码，然后执行/遵循“href”。如果在 onclick 中返回 false，则不遵循“href”。如果您返回 true 或不返回任何内容，则遵循“href”。因此，在您的情况下，您需要返回函数调用的结果。在您的函数中，您需要返回 confirm() 的结果，因此从技术上讲，您的函数可能只是：

```
<script type="text/javascript">
     function confirmaExclusao() {
        return confirm("O grupo será excluído permanentemente. Deseja continuar?");
    }
</script> 
```

但仍然对您的链接标签进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:28:10.683

这是因为您在链接的上下文中进行操作。尝试拿走 Greg 并在代码中使用 window.setlocation()

```
 <script type="text/javascript"> 
 function confirmaExclusao() { 
    var resp = confirm("O grupo será excluído permanentemente. Deseja continuar?") ;
   if (!resp) { return false; } 
   Window.location(" /grupos/remover/{{ grupo.id }} ");
 } </script>

  <iMG src="..." Onclick="confirmaExclusao()"> 
```

# javascript - $.ajax()：responseText正确但报错。为什么？

> ID：11149938
> 
> 赞同：3
> 
> 时间：2012-06-22T03:51:03.777
> 
> 标签：javascript, jquery, ruby-on-rails

我正在尝试从我的服务器获取一些 JSON 数据，如下所示：

```
var a = $.ajax({
    url: "data.json",
    dataType: 'json',
    data: null,
    error: function(data) {
        console.log("error");
    },
    success: function(data) {
        console.log("success");
    }
}); 
```

当我这样做时，该`error`函数被调用（`error`打印到控制台）。

不过，奇怪的是，当我检查时，`a`我发现已返回正确的响应文本。

`a`

```
readyState: 4
responseText: "contents of data.json!"
status: 200
statusText: "OK" 
```

这是怎么回事？如果请求成功，为什么不触发成功回调？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T03:55:19.733

可能是因为返回的特定值不是您指定的类型。响应本身是成功的（通过查看“a”的详细信息可以看到），但这并不是执行成功还是错误的唯一决定因素。您将 json 指定为“dataType”（返回类型），但收到了一个字符串。对于测试，这很好，但正如您所见，事情不会按预期运行。如果您不指定 dataType 选项，jQuery 将尝试通过查看 mime 类型和响应的内容来确定返回的内容类型。当它们不匹配时（如您的情况），这是一个错误。

更新：

我意识到我在上面的解释中漫无目的。尽管您似乎解决了问题，但让我再次详细说明。

在您的情况下发生错误的可能性有多种。需要理解的重要一点是，如果您设置“dataType”，jQuery 将尝试使用该类型解析 responseText。如果您没有设置该选项，它会相应地猜测和解析它（这意味着它会查看 MIME 类型）并以这种方式解析它。如果指定“dataType”，responseText 需要为 JSON 格式。因此，如果您指定“json”，但提供一个字符串（在您的情况下），jQuery 解析将失败。如果不指定“dataType”，jQuery 猜测，responseText 需要匹配 MIME 类型。因此，当 MIME 类型为“application/json”时，您无法返回字符串。当事情不匹配时，就会发生错误。

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:56:17.627

只是一种预感，但是返回的内容类型是“application/json”吗？我的预感是错误是 JSON 应该返回，但它返回的文本/html（或其他一些内容类型）然后没有被解析。

# c++ - a+b+c<=n的解数

> ID：11149939
> 
> 赞同：1
> 
> 时间：2012-06-22T03:51:09.440
> 
> 标签：c++, algorithm, math

大家，这是参考这个问题：[http](http://www.spoj.pl/problems/DCEPC702/) : //www.spoj.pl/problems/DCEPC702 /。（请参阅那里的示例输入）。我将问题陈述翻译成找到这种形式的方程的解的数量`na + nb + nc <= newN` `newN = N - (mina + minb + minc)`，

`0<=na<=maxa - mina, 0<=nb<=maxb-minb, 0<=nc<=maxc-minc`.

然后我尝试了包含-排除来找到解决方案的数量。我是这个原则的新手，因此我不确定我是否做对了。反正我的回答是不正确的。有人可以告诉我这种方法哪里错了吗？这是我的代码。

提前致谢。

```
#include<iostream>
#include<cstdio> 
using namespace std;
#define MOD 1000000007

#define ulli  long long int

ulli f(int a)
{
if(a<0) return 0;
else
{
    ulli n = (ulli)a;
    return ((((n+3)*(n+2)*(n+1))/6))%MOD;
}
}

 int N;

 int minA, maxA;
 int minB, maxB;
 int minC, maxC;

  int main()
 {
   int T;

scanf("%d",&T);

while(T--)
{
    scanf("%d",&N);

    scanf("%d %d",&minA , &maxA);
    scanf("%d %d",&minB , &maxB);
    scanf("%d %d",&minC , &maxC);

    maxA -= minA;
    maxB -= minB;
    maxC -= minC;

    int A = maxA;
    int B = maxB;
    int C = maxC;

    N -= (minA + minB + minC);

    ulli res = f(N) -f(N-A-1)-f(N-B-1)-f(N-C-1)+f(N-A-B-2)+f(N-C-B-2)+f(N-A-C-2)-f(N-A-B-C-3);

    cout<<res%MOD<<endl;
}

return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:17:16.703

您可能应该通过一些简单的案例来了解您哪里出错了。

一个明显的问题：你的 f 公式是 (N+3) 选择 3；应该是 (N+2) 选择 2。（如果总共有 N 个，则添加 2 个分隔符，然后选择这两个分隔符的位置。）

您的代码的其余部分不清楚，但正确。我会做类似的事情：

```
int A = maxA - minA; 
```

而不是

```
maxA -= minA;
int A = maxA; 
```

此外，可能存在溢出错误，具体取决于数字的大小 - 将所有三个数字相乘然后除以 6 可能会在您进入 mod 之前溢出。您应该能够做的是找出三个中的哪一个可以被 3 整除，然后将其除掉，然后找出哪些可以被 2 整除，然后除以一个因子。将两个结果相乘，对其进行模数，然后将最终结果相乘并对其进行模数。

哦，还有你的最终答案，我认为这就是问题所要求的。

# iphone - 将应用程序部署到 iPhone（版本错误）

> ID：11149940
> 
> 赞同：0
> 
> 时间：2012-06-22T03:51:19.080
> 
> 标签：iphone, ios, xcode

我已经使用 Xcode 4.2 在 VMware Mac OS X 中创建了示例测试应用程序。我的 iPhone 型号是 3GS。iOS 版本 3.1.3。部署到 iPhone 时遇到问题。它说 iOS 3.1.3 不支持那样，所以任何人都可以为此提供想法吗？我不喜欢升级iOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:57:05.997

单击项目，然后在“项目”下更改 iOS 部署目标。

![更改构建目标版本](../Images/4d04a560072bd048513d6b392b480368.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:07:24.053

您需要更改部署目标，尽量保持 3.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T03:57:16.467

你的 xCode 的操作系统是 4.0，而你的手机是 3.1.3。

所以你需要做这些 -

1.  将您的手机升级到 OS 4.0
2.  安装选择 iOS 3 作为目标

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T03:57:29.930

您需要将部署目标设置为 3.0 或更低版本。然后你应该可以在你的设备上安装。

需要注意的是，如果您使用任何 3.0 中不可用的框架，应用程序将崩溃，除非您弱链接该框架并且不使用它。所以你不能在你的 3.0 设备上使用 Game Center 或 iAd 或类似的东西。

# hibernate - 使用管道将 postgres 数据库从 Linux 转储到 Windows 时发生细微的权限更改

> ID：11149941
> 
> 赞同：0
> 
> 时间：2012-06-22T03:51:43.290
> 
> 标签：hibernate, postgresql, postgresql-9.1

我用这个命令将一个 postgresql 数据库从 Linux 复制到 Windows

> pg_dump -C -h toolbox.mydomain.com -U postgres auth | psql -h localhost -U postgres 验证

当我让数据源使用 Windows 版本的 Postgresql 并在一对多关系的子实体（拥有方）上执行 Hibernate 合并时，我从 Postgresql 收到权限错误：

```
2012-06-21 14:39:42 MDT ERROR:  permission denied for schema stage at character 20
2012-06-21 14:39:42 MDT QUERY:  SELECT 1 FROM ONLY "stage"."job" x WHERE "id" OPERATOR(pg_catalog.=) $1 FOR SHARE OF x
2012-06-21 14:39:42 MDT STATEMENT:  insert into stage.file (job_id, name) values ($1, $2) RETURNING * 
```

如果我将数据源指向 Linux 服务器上的 Postgres 数据库，则没有问题。据我所知，两个数据源的凭据相同，并且两个 Postgresql 实例上的模式具有相同的权限。

我错过了什么？在这样的管道上转储数据库是否存在一些微妙的问题？也许是 UNIX 与 Windows 的问题？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:03:39.450

角色（用户和组）是 PostgreSQL 中的全局对象。`pg_dump`不一定会为您创建角色。我注意到你正在做恢复方面没有`-1`所以如果有错误它不会失败。很可能正在发生的事情是一些预期`GRANT`的语句失败，但您没有注意到错误。

从恢复时检查服务器日志，或重新运行它`ON_ERROR_STOP=1 psql -1 ....`以确保在出现任何问题时它会失败。

就我个人而言，我更喜欢使用它们`pg_dump -Fc`，`pg_restore`因为它们让我可以更好地控制恢复行为、错误处理等。

要转储像角色这样的全局对象，请使用`pg_dumpall --globals-only`.

# swing - 让我的全局键监听器阻止控件响应事件？

> ID：11149944
> 
> 赞同：0
> 
> 时间：2012-06-22T03:52:37.647
> 
> 标签：swing

我想为我的应用程序添加一个全局键侦听器，它工作正常，但我的应用程序（组合框）中的第 0 个控件仍然具有输入焦点并且还响应按键：

```
KeyEventPostProcessor pp = new KeyEventPostProcessor() {
    public boolean postProcessKeyEvent(KeyEvent e) {
        return true;
    }
};

DefaultKeyboardFocusManager.getCurrentKeyboardFocusManager().
    addKeyEventPostProcessor(pp); 
```

是否有类似“preProcessKeyEvent()”的方法我可以覆盖，如果我不希望子控件处理它，它会阻止子控件查看事件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:09:14.007

您可以使用以下内容来防止调度 KeyEvent：

```
KeyEventDispatcher dispatcher = new KeyEventDispatcher() {

    @Override
    public boolean dispatchKeyEvent(KeyEvent e) {
        return true;
    }
};
DefaultKeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(dispatcher); 
```

但是您通常不需要执行此类操作。使用适当的[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，您应该能够实现大多数必需的行为。

# grep - g++：如何使用 -Wall 隐藏不需要的警告消息

> ID：11149945
> 
> 赞同：3
> 
> 时间：2012-06-22T03:53:02.790
> 
> 标签：grep, g++

我想用 -Wall 开关编译我的程序，但我使用的库会针对我想忽略的枚举问题生成大量警告：

tonkatruck.cpp:70:24：警告：枚举值“Numpad9”未在开关 [-Wswitch] 中处理

我试图排除有问题的行：
g++ -c *.cpp -Wall | grep -v "Wswitch"

但是，它对输出没有影响。如果您能指出我的错在哪里，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:16:39.103

尝试

```
g++ -c *.cpp -Wall 2>1 | grep -v "Wswitch" 
```

将 stderr 定向到 stdout，以便 grep 可以处理这些警告。您还可以使用：

```
g++ -c *.cpp -Wall -Wno-switch 
```

# java - Java 等价于 C++ 多重映射

> ID：11149948
> 
> 赞同：2
> 
> 时间：2012-06-22T03:54:08.730
> 
> 标签：java, c++, map

我需要一个可以处理像 C++ 这样的重复键的容器`multimap`。尽管 Guava 中有一个已知的实现，但我想要标准 Java API 中的一些东西。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T04:00:32.713

`Map`您可以只使用和`List`：[Java 文档](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)来模拟多地图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:44:19.810

您可以使用[Guava](http://code.google.com/p/guava-libraries/)库中的[`Multimap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimap.html)实现。

# javascript - 好的。那么人们如何安装 Facebook 应用程序呢？

> ID：11149959
> 
> 赞同：-2
> 
> 时间：2012-06-22T03:55:59.327
> 
> 标签：javascript, facebook-apps

所以我建立了一个 FB Page Tab pp，它也有 Canvas 部分。当您搜索应用程序并选择它时，您将被带到定义的画布（我的内容显示在 iframe 中）。安装该应用程序的任何地方都没有链接或按钮。

我使用 app.facebook.com URL 直接导航到应用程序。这与上面的效果完全相同。

我从应用中心的高级设置创建了一个应用页面。此页面顶部只有一个“转到应用程序”按钮，它再次简单地转到您自己的画布页面。

所以我假设我们必须自己创建安装链接并将它们放在这个画布页面上。网址是什么？我安装了一个完整的单独应用程序来使用他们的应用程序，用他们的应用程序 ID 代替我的应用程序 ID。这可以正常工作并将您带到应用程序的安装页面。

但是开发人员应该如何知道这一点呢？更准确地说，开发人员应该如何知道他们需要自己处理触发安装过程。

事实上，我确信情况并非如此，我只是错过了一些东西。然而，如此重要的东西并不在一个清晰可及的地方，这是真的。我花了一个小时搜索可能是应用程序部署中最不可或缺的部分的信息，但仍然一无所获。

所以为了其他人使用谷歌：

要允许用户安装您的 facebook 应用程序，请在您的画布页面上使用以下 href url.http://www.facebook.com/add.php?api_key=[your app ipi key]&pages=1 创建一个链接。

如果有人知道是否有设置进行搜索并单击应用程序会将用户带到安装页面，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:01:23.953

页面选项卡只是供人们查看的页面。当您将应用程序设置为页面选项卡时，它将在您的选项卡中显示为网页（不会作为应用程序安装）。

如果您希望它成为一个应用程序，请确保选中“Facebook 上的应用程序”

![在 Facebook 上查看应用程序](../Images/93b33a4fb78f80700bf7b833614b5850.png)

# jquery - 在动态生成的内容上调用 jQuery .each()

> ID：11149966
> 
> 赞同：1
> 
> 时间：2012-06-22T03:56:56.530
> 
> 标签：jquery, html

这是我的第一个问题，但我已经发现这个网站非常有帮助，所以感谢你们所有人。

所以这就是问题所在。我有一堆动态生成的带有文本区域的 div，我想遍历它们。这里的这个函数适用于我放入的静态测试 div，但不适用于动态创建的。

```
$jQ('#upload_images_button').on('click', function() {
    var caption_list = [];

    $jQ('textarea.upload_image_caption').each(

    function() {
        caption_list.push($jQ(this).val());
        document.write($jQ(this).val());
    });
}); 
```

这是每个 div 的 html：

```
<div class="upload_image_temp_wrapper">                                 
    <div class="upload_wrapper">
        <img src="/images/test/test.jpg" />

        <div class="temp_image_hover_menu">
            <input type="checkbox" checked="checked" />
        </div>
    </div>
    <div class="upload_image_caption_wrapper">
        <textarea class="upload_image_caption" type="text" placeholder="Add a description..."></textarea>
    </div>
</div> 
```

**编辑**

天哪，我觉得自己像个白痴。

我回顾了生成新 div 的脚本，发现我忘记为 textareas 分配一个类......

无论如何，感谢所有的帮助。感谢所有快速的答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:00:10.887

像您所做的那样调用`.on()`不会将事件绑定为实时事件（因为缺少可选的选择器参数），这意味着它只会绑定到执行时存在的元素。如果您更改调用方式`.on()`，特别是将点击绑定到`body`，您可以将事件更改为在`#upload_images_button`按钮上生效：

```
$jQ('body').on('click', '#upload_images_button', function() {} ); 
```

另外，我不确定`#upload_images_button`您的页面上是否有多个按钮，但请记住 ID 必须是唯一的，因此如果您确实有多个此类元素，请使用类而不是 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:14:53.290

代码工作正常。您的错误在其他地方。示例：http: [//jsfiddle.net/Buaja/](http://jsfiddle.net/Buaja/)

**HTML**

```
<button id="upload_images_button">Upload</button>
<button id="add-div">Add Div</button>

<div class="upload_image_temp_wrapper">                        
    <div class="upload_wrapper">
        <img src="/images/test/test.jpg" />

        <div class="temp_image_hover_menu">
            <input type="checkbox" checked="checked" />
        </div>
    </div>
    <div class="upload_image_caption_wrapper">
        <textarea class="upload_image_caption" type="text" placeholder="Add a description..."></textarea>
    </div>
</div>​ 
```

**JS**

```
$jQ('#upload_images_button').on('click',
    function(){
        var caption_list = [];

        $jQ('textarea.upload_image_caption').each(
            function(){
                caption_list.push($jQ(this).val());
                console.log($jQ(this).val());
            });     
    }
);

// Add divs dynamically
$jQ('#add-div').on('click', function() {
   $jQ(document.body).append($jQ($jQ(".upload_image_temp_wrapper")[0]).clone());
}); 
```

**笔记**

*   不要使用 document.write，如果在页面加载后调用它会覆盖文档中的所有内容

# ruby-on-rails - 从 rails 中的其他视图/资源访问 Paperclip 头像？

> ID：11149967
> 
> 赞同：0
> 
> 时间：2012-06-22T03:57:02.507
> 
> 标签：ruby-on-rails, image, paperclip, avatar

目前我正在使用 Paperclip 来处理我在 Rails 3 中的头像上传和使用。我有一个用户资源（带有控制器、模型、视图等），我正在将头像上传到（使用**用户/新**视图）和他们例如，在**用户显示**视图中“嵌入”它们时实际上传和工作。（我得到损坏的图像，但我认为是因为本地服务器，因为在查看源代码时，图像实际保存并链接到我的应用程序中的正确路径）现在，我有另一个名为**技能**的资源（带有控制器、模型和视图）在 wich 视图中，我也需要显示头像，但是每当我尝试在技能视图中嵌入/使用用户头像时，我都会收到以下错误（如果我尝试将头像嵌入到与**用户/节目**）：

> `undefined method`nil:NilClass 的头像'

为什么会这样？

另外，正如我所说，在显示视图中嵌入头像时，它们实际上是“嵌入”的，但我得到损坏的图像和以下路由错误：

> `No route matches [GET] "/public/assets/users/UserID/thumb/userimage.jpg"`

我在 Localhost... 是因为这个吗？（我猜是因为“userimage”实际上保存在应用程序的该路径上）

有人可以解释一下这个路由错误发生了什么以及如何在多个视图中使用头像吗？我正在使用以下代码“嵌入”图像：

```
<%= image_tag @user.avatar.url(:thumb) %> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:33:48.377

修复了问题！为了

```
undefined methodavatar' for nil:NilClass` 
```

我在以下代码中从用户中删除了“@”：

```
<%= image_tag @user.avatar.url(:thumb) %> 
```

然后，对于以下错误：

```
No route matches [GET] "/public/assets/users/UserID/thumb/userimage.jpg" 
```

我不得不从用户模型中的**Url Symbol**中删除“public”，所以它从这个改变：

```
:url  => "/public/assets/users/:id/:style/:basename.:extension" 
```

对此：

```
:url  => "/assets/users/:id/:style/:basename.:extension" 
```

现在图像显示（在本地和生产环境中），我可以从我需要的所有视图中使用它们。

希望这可以帮助某人。

# java-me - J2ME：应用程序不受信任，可能对您的手机有害

> ID：11149972
> 
> 赞同：1
> 
> 时间：2012-06-22T03:57:26.677
> 
> 标签：java-me, certificate, midp, s60

我从 Java Verified 提交门户获得了我的 R&D 签名应用程序。

我将它安装在我的 S40 设备上并且运行良好。

但在我的 S60 设备中，它会在安装前显示警告：“**应用程序不受信任，可能对您的手机有害。** ”而且它的工作方式就像一个不受信任的应用程序。

我检查了这部手机中的证书，只有一个 UTI 证书：“MIDP 2 GeoTrust CA for UTI”。无论如何要在我的 S60 设备上安装 UTI 证书吗？

这是我的 Jad 文件：

```
MIDlet-1: hello_world,/icon.png,JDialer.GameMidlet
MIDlet-Certificate-1-1: MIIEbTCCA1WgA...
MIDlet-Certificate-1-2: MIIDzjCCArag...
MIDlet-Jar-RSA-SHA1: lCFSJEHCFKe...
MIDlet-Jar-Size: 171119
MIDlet-Jar-URL: hello_world.jar
MIDlet-Name: hello_world
MIDlet-Permissions: javax.microedition.pim.ContactList.read, javax.microedition.pim.ContactList.write
MIDlet-Vendor: Vendor
MIDlet-Version: 1.4
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0 
```

请帮助我解决这个问题，并感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T05:46:51.437

先生，这是我的困惑。我需要在我的真实设备上手动更改`Always Allowed`我的应用程序的权限（新设备在首次运行时有此选项）。我还在诺基亚的 RDA 程序中的远程设备上安装了 jad 文件而不是 jar 文件，以使我的应用程序成为“受信任的第三方”。

# python - Bash或Python，将字符打印到终端时，如何在固定位置更改字符？

> ID：11149978
> 
> 赞同：3
> 
> 时间：2012-06-22T03:57:48.367
> 
> 标签：python, bash

我在这里想知道的东西应该是真正的“基本”，但这是我长期以来的一个问题，不知道诀窍在哪里。

假设在一个耗时的程序中（`bash`或者`Python`），我必须在运行时打印出进度的百分比，基本上我想打印`1%`，并且在一定时间后，我打印`2%`等等。我想`'2%'`成为完全显示在显示的相同位置`'1%'`，而不是像“1% 2%”之类的。你知道`wget`，我想要的正是 wget 所做的，显示下载进度的进度。我是否需要清除以前打印的字符，但是如何？

基本是怎么操作的...

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T04:02:34.300

我将用 Python 回答，因为它更容易。

您可以在终端打印退格键将光标向左移动，然后写入另一个字符以覆盖当前位置。您也可以使用回车符转到行首。

```
import time
import sys
for x in range(101):
    sys.stdout.write('\r%d%%' % x)
    sys.stdout.flush()
    time.sleep(0.2)
sys.stdout.write('\n') 
```

使用回车并重写整行是最简单的，因为您不必注意要打印多少退格。

请注意，如果新行比旧行短，旧行仍会显示出来。

```
import sys
sys.stdout.write('this is a very long line')
sys.stdout.write('\rshort line')
sys.stdout.write('\n') 
```

输出：

```
短线很长的线

```

一个典型的解决方案是在长行上写空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T07:50:23.813

提供了一个 Python 解决方案，在 bash 中并不是特别困难（或不同）：

```
i=20
while (( i-- ))
do
    echo -ne "\r$i% done  "
    sleep 1
done

echo 
```

bash中`flush`不需要，因为`echo`无论如何都会调用它。的参数`echo`，`-n`抑制换行，并`-e`翻译`\r`符号。请注意字符串中文本末尾带有几个空格的hack，以清除到行尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-06T16:23:00.007

这是一个简单的计时器，也许可以帮助您；-) 写另一个字符以使用打印功能覆盖当前位置。

```
from __future__ import print_function
def timer():
 for h in range(0, 24):
  for m in range(0, 60):
   for s in range(0, 60):
    time.sleep(1)
    print ("Elapsed time : %s:%s:%s" % (h, m, s), end="\r") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-23T02:14:15.587

在 Python 3.6+ 中，Deitrich 的答案可以缩短为

```
import time
for i in range(101):
    print(f'\r{i}%', end='')
    time.sleep(0.01) 
```

回车将您带回到行首，并传入一个空字符串作为 end 参数阻止您移动到下一行。

* * *

当我不知道一个动作需要多长时间时，我还发现这个生成器很有用。它将打印出三个点加载动画。在 Python 3.3+ 中工作

```
def loading_dots():
    while True:
        yield("\r.  ")
        yield("\r.. ")
        yield("\r...") 
```

你会像这样使用它

```
max_attempts = 100
dots = loading_dots()

for i in range(max_attempts):
    if is_finished(): # you would have to create this function
        break
    time.sleep(2)
    print(next(dots), end="", flush=True)
else:
    raise Exception("timed out") 
```

* * *

如果你想清除当前行，你可以这样做（Python 3.3+）

```
print('\r' + ' '*80 + '\r', end='') 
```

# ios - ios 创建自定义 UISplitViewController，我的应用程序会被拒绝吗？

> ID：11149980
> 
> 赞同：0
> 
> 时间：2012-06-22T03:58:11.903
> 
> 标签：ios, app-store, uisplitviewcontroller

我在我们的应用程序中创建了一个自定义拆分视图（扩展了 UISplitviewController），以便它支持更小的左视图或更小的右视图。

![较小的左视图](../Images/b5bdcc5f82f14027f378973e47820060.png)

![较小的右视图](../Images/551f477f182a95459981bf929eab3de7.png)

指南（iOS 人机界面指南）

避免创建比左窗格窄的右窗格。虽然右窗格的宽度由您决定，但使用小于 320 磅的宽度（即左窗格的宽度）看起来并不好。

避免同时在两个窗格中显示导航栏。这样做会使用户很难辨别两个窗格之间的关系。

通常，以持久的方式在左窗格中指示当前选择。这种行为有助于人们理解左窗格中的项目与右窗格内容之间的关系。这很重要，因为右窗格的内容可以更改，但它应该始终与左窗格中选择的项目保持相关。

--------我的问题是，我的应用会在应用商店中被拒绝吗？也不要认为我在两个窗格上都显示了导航栏。因为两个窗格上的导航栏上都有一个标题。这就是我需要它的原因

更新-几个月后我将继续此并提交我的应用程序，并通知您它是否会被拒绝。无论如何，感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:18:34.377

我不这么认为，他们写了避免。我从来没有听说过苹果因为他们的 UI 设计而拒绝了某些应用程序。使用他们的自定义 UI 有一些限制。流行的 facebook 应用程序使用右侧的聊天窗口...[检查这里的快照](http://blog.chron.com/techblog/2011/10/at-long-last-facebook-has-an-ipad-app-and-its-slick-if-familiar/)

但是，如果您需要 100 % 的保证，那么您需要邮寄苹果

# sql - 首先在完整列列表上进行完全外部连接，否则在部分列列表上

> ID：11149981
> 
> 赞同：0
> 
> 时间：2012-06-22T03:58:18.460
> 
> 标签：sql, postgresql

我想知道我是否可以首先在完整列列表上的两个表之间执行完整外部联接，如果失败，则执行部分列列表。例如：

```
Table A
|  a  |  b  |  c  |
+-----+-----+-----+
|  x  |  y  |  z  |
|  q  |  r  |  s  |

Table B
|  a  |  b  |  c  |  d  |  e  |
+-----+-----+-----+-----+-----+
|  q  |  r  |  s  |  t  |  u  |
|  q  |  r  |     |  x  |  y  |
|     |     |     |  x  |  y  |

Failed query:
SELECT *
FROM A FULL OUTER JOIN B
ON
 (A.a = B.a AND A.b = B.b AND A.c = B.c)
 OR (A.a = B.a AND A.b = B.b)

Desired result
|  a  |  b  |  c  |  d  |  e  |
+-----+-----+-----+-----+-----+
|  x  |  y  |  z  |     |     |
|  q  |  r  |  s  |  t  |  u  |
|  q  |  r  |     |  x  |  y  |
|     |     |     |  x  |  y  | 
```

我正在使用 Postgresql。感谢你的协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:53:42.283

此查询将准确产生所需的结果：

```
SELECT *
FROM   A
FULL   JOIN B USING (a,b,c)
ORDER  BY a DESC NULLS LAST; 
```

但我并不完全相信您的示例符合您的描述 - 这为解释留下了空间。

# oracle - 组合字符串和数字的序列

> ID：11149983
> 
> 赞同：0
> 
> 时间：2012-06-22T03:58:54.433
> 
> 标签：oracle, plsql, sequence

> **可能重复：**
> [是否可以在 sql 中使用字母数字序列生成器](https://stackoverflow.com/questions/4459902/is-it-possible-to-have-alphanumeric-sequence-generator-in-sql)

如何在 Oracle 中编写一个函数来生成一个字符串，如 A0001、A0002、..A9999、... AA0001、AA9999、... AZ0001、AZ9999、... 用于员工 ID。

我从这个逻辑开始，但只能生成 A001 到 Z999：

```
CREATE OR REPLACE procedure GLOBALSHIFTER.p1 ( v1 in varchar2 default 'A') IS 

   id varchar2(4); 
   p1 number(2) := ascii(substr(v1,1,1)); 
   p2 number(2); 
   p3 number(2) ; 
   c number(1) :=1; 

begin 

   select s1.nextval into p2 from dual; 

   If p2 < 1000 then 
      id:= concat(chr(p1), lpad(p2,3,0)); 
   ELSE 
      select s1.nextval into p2 from dual; 
      p1 := p1 + 1; 
      id := concat(chr(p1), lpad(p2,3,0)); 
   END IF; 

   insert into t1 values(id); 
   commit; 

end; 
```

# windows - PCRE Windows 命令行

> ID：11149984
> 
> 赞同：0
> 
> 时间：2012-06-22T03:58:59.797
> 
> 标签：windows, command-line, pcre

我在 PHP 的 PCRE 中发现了一个错误，但在发布错误报告之前，我想通过 Windows 中的命令行测试相同的表达式，看看它是否有相同的错误。如果错误在 PCRE 本身，我需要在 PCRE 站点上发布报告，否则在 PHP 站点上。是否有任何工具可以使用我已经安装的库直接从 Windows 命令行运行 PCRE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:03:36.297

您应该使用 Perl 脚本和 Perl 解释器来测试您的正则表达式。在 Windows 上，我建议安装 Cygwin（并且可以在 setup.exe 中选择 Perl 以获得 Perl 解释器）。或者，如果您想要更精简的安装，请使用 StrawberryPerl：[http ://strawberryperl.com/](http://strawberryperl.com/)

我不建议使用纯粹的命令行测试，因为 Windows 命令提示符容易转义错误。

**请注意，您需要使用[http://metacpan.org/pod/re::engine::PCRE](http://metacpan.org/pod/re%3a%3aengine%3a%3aPCRE)使您的测试合法**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:44:35.777

好吧，我还是根据我的最佳猜测在 PHP 上发布了错误（它是 PHP 还是 PCRE 错误？）一些好人用 pcretest 运行了有问题的正则表达式，发现它的行为符合预期（即给出了正确的错误）。所以，这个错误肯定是在 PHP 中！正则表达式（如果您想知道的话）是`/\k/`. 它是无效的，因为它应该后跟一个命名的反向引用（[http://www.php.net/manual/en/regexp.reference.back-references.php](http://www.php.net/manual/en/regexp.reference.back-references.php)），但是 PHP 5.4.4 允许它编译和跑。

我仍然无法在命令行上运行 PCRE（预编译的 Windows 二进制文件？）

# node.js - Express.js：使用会话中间件后无法重定向

> ID：11149985
> 
> 赞同：2
> 
> 时间：2012-06-22T03:59:01.280
> 
> 标签：node.js, session, express

我正在编写一个身份验证中间件，它应该在成功登录我们的注销后重定向到以前访问过的页面。这是完整的配置块：

```
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.static(__dirname + '/public'));
  app.use(express.bodyParser());
  app.use(express.cookieParser());
  app.use(express.session({ secret: '__YouDontKnow__', store: new RedisStore }));
  app.use(authCheck.run);
  app.use(express.methodOverride());
  app.use(app.router);
}); 
```

现在在`app.use(authCheck.run)`下时`app.use(express.session)`，Express 会抛出错误：*错误：发送后无法设置标题。*

如果我将这个调用移到上面`app.use(express.session)`，它会抛出一个 500 错误，说明*会话*未定义。我的身份验证功能取决于会话对象。

我能做些什么？

**编辑：**这是 authCheck 函数：

```
exports.run = function (req, res, next) {
  var urlparser = GLOBAL.urlparser,
      url = req.urlp = urlparser.parse(req.url, true),

      goToLastPage = function() {
        var redirectUrl = (req.session.lastVisitedPage) ? req.session.lastVisitedPage : '/';
        console.log("goToLastPage(%s)", redirectUrl);
        res.redirect(redirectUrl);
        return;
      }

  // Log out
  if (url.pathname == '/user/logout') {
    req.session.destroy();
    console.log('User has logged out');
    goToLastPage();
  }

  // Log in
  if (url.pathname == '/user/login' && req.method == 'POST') {
    var email = req.body.login.email,
        password = req.body.login.password;

    req.session.auth = true;
    req.session.userId = 1;

    console.log('User has logged in');

    goToLastPage();
  }

  next();
  return;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T04:22:19.437

`return`打电话后放一个`goToLastPage()`。`next()`在调用了哪个调用链中的下一个中间件之后，您仍然在`res.redirect`调用，可能最终会到达您的一个路由，然后尝试设置标头并失败。

# iphone - 特定屏幕上的 iOS Laggy UI

> ID：11149986
> 
> 赞同：0
> 
> 时间：2012-06-22T03:59:13.157
> 
> 标签：iphone, ios, ipad

我有一个 iPad 应用程序，它有一个时髦的路径样式菜单，出现在每个屏幕上。当菜单打开时，菜单项出现时会显示一些漂亮的动画。整个应用程序始终使用相同的菜单实例，它仅在应用程序启动时分配和初始化一次。

我体验到我的菜单的动画性能在应用程序的不同屏幕上显着不同。我似乎无法弄清楚是什么导致了性能差异，因为它似乎自相矛盾。我能看到的唯一相关性是，在使用 DrawRect 绘制核心图形的屏幕上，菜单似乎表现不佳。在没有任何自定义绘图的屏幕上，菜单的性能非常好。大多数情况下的自定义绘图通常是带有渐变的简单路径。

使用核心图形进行绘制时是否存在已知的动画性能问题，或者我的性能问题是否由其他原因引起？使用仪器运行应用程序不会显示任何泄漏。在仪器中的核心动画性能测试工具下运行应用程序显示屏幕之间的 FPS 差异显着，使用核心图形绘图的屏幕的 fps 低于不使用它的其他屏幕的 50%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T04:13:10.857

我在使用渲染阴影时遇到了这个问题：

```
view.layer.shadowOffset = CGSizeMake(0, 0);
view.layer.shadowOpacity = .95;
view.layer.shadowRadius = 8; 
```

我通过将视图上的“shouldRasterize”设置为 true 来解决它。在进行这一更改后，我注意到动画质量大幅提高。

```
view.layer.shouldRasterize = YES; 
```

# css - 悬停一个元素会影响另一个元素。不是兄弟姐妹也不是孩子

> ID：11149988
> 
> 赞同：1
> 
> 时间：2012-06-22T03:59:23.380
> 
> 标签：css, hover, siblings, tilde

我目前正在为大学做一个实验页面，我遇到了一个简单的问题，即大量的大脑烧伤。这个想法是您无需单击任何内容即可浏览网站，从而为用户提供非常流畅、轻松的体验。

好吧，我有这个列表，它的每个项目都必须触发一个 div 来表现得很好。我正在尝试使用 CSS3 的兄弟选择器波浪号，并在调用 li 时使 div 有一个 left:0 。唯一的问题是 simbling 选择器仅在对象没有自己的父对象时才有效。我试过把它称为“#father-element #child-element:hover ~ #father-element2 #child-element 2”之类的洞族，但它完全忽略了我，就像我是个白痴一样。

这是headburner的简化版本的链接：http: [//jsfiddle.net/GuiHarrison/rDnYE/](http://jsfiddle.net/GuiHarrison/rDnYE/)

所以你们怎么看，伙计们？我应该闭嘴尝试 jQuery（如果是，怎么做？）还是 CSS 中真的有办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:52:39.277

您可以通过对下面给出的标记进行一些更改来实现此目的：

**HTML：**

```
<ul>
    <li id="cinco">item1</li>
    <li id="seis">item2</li>
    <li id="sete">item3</li>
    <li id="oito">item4</li>

    // As you've defined these items' position as absolute so no matter if you define them as list items.
    <li id="e">
        <div>This should work now - cinco</div>
    </li>
    <li id="f">
        <div>This should work now - seis</div>
    </li>
    <li id="g">
        <div>This should work now - sete</div>
    </li>
    <li id="h">
        <div>This should work now - oito</div>
    </li>
</ul> 
```

**CSS：**

```
 ul {margin-top:10px; position: relative}
    ul li#cinco:hover ~ #e,
    ul li#seis:hover ~ #f,
    ul li#sete:hover ~ #g,
    ul li#oito:hover ~ #h { left:300px; background-color:#BADA55; } 
```

在此处查看演示：http: [//jsfiddle.net/rathoreahsan/gew5B/](http://jsfiddle.net/rathoreahsan/gew5B/)

# php - 如何按订单对 joomla VirtueMart 组件产品进行排序？

> ID：11149989
> 
> 赞同：1
> 
> 时间：2012-06-22T03:59:50.680
> 
> 标签：php, joomla, virtuemart

我正在使用**joomla 1.5.23 版，VirtueMart 2.0.6 版**

我正在尝试的是来自前端 **Joomla管理员区域->组件-> VirtueMart->配置->配置->产品排序顺序设置->默认产品排序顺序。**

并使用**默认产品排序顺序**下拉菜单选择首选的默认排序顺序，我选择**排序**，因为**我想按顺序对产品进行排序。**

**但什么也没发生**，所以我想知道我们如何从**后端做到这一点。**

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:28:45.880

我实际上并没有在任何地方安装 Joomla 和 VM 的组合，但我 99% 确信这只是误导性标签，因为“订购”确实应该说“选择订购”。换句话说，通过单击它，您没有选择任何排序，因此 VM 没有使用 ORDER BY 子句，因此将其留给 MySQL 以在您的情况下以任何顺序返回它们。

如果您安装了 Firebug，您可以检查该元素并查看该选项的值是什么（或仅查看页面源代码），我想您会发现那里没有任何价值。

# php - iframe 的远程主机

> ID：11149991
> 
> 赞同：0
> 
> 时间：2012-06-22T04:00:14.153
> 
> 标签：php, javascript, dns

我在各种网站上都有 iframe。在我的 js 中，我遇到了不同域中的 php 文件。有没有办法获取托管我的 iframe 的服务器的域名。（这是为了防止其他人攻击我的 php 文件）。

例子。如果我的 网站嵌入`www.domain.com`在. 有什么方法可以发现我的 js 调用来自而不是某个狡猾的网站？`www.phpscript.com``yahoo``www.domain.com`

`$_SERVER['REMOTE_HOST']`并且`$_SERVER['REMOTE_ADDR']`在这种情况下不起作用，因为`REMOTE_ADDR`会为用户提供 IP 并`REMOTE_HOST`返回`yahoo`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:37:22.717

如果您想允许跨框架但仅在域的子集内进行交互，那么您需要[内容安全保护](https://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html)扩展。目前这仅在 Firefox 和 Chrome 中实现（不是 MISE，不了解 Safari 和 Opera 等），但它是 w3c 标准，所以希望每个人最终都能加入。

因此，对于在 Example.com 上运行的 php 脚本，允许从 other.com 访问（反之亦然）......

```
$ok="'self',*.other.com,*.example.com";
$policy="default-src $ok; frame-ancestors: $ok";
header("X-Content-Security-Policy: $policy");
header("X-Webkit-CSP: $policy");
header("Content-Security-Policy: $policy"); 
```

注意启用 CSP 时还有其他含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:17:13.750

**编辑：**

OP想要做与我最初将问题解释为相反的事情。

**要防止站点不在 iframe 中时被访问*，*您**可以使用：

```
<script type="text/javascript">
if (window.top === window.self) {

    window.self.location = 'about:blank'; 
    window.self.onload=function(evt){ 
        window.self.location = 'about:blank'; 
        document.body.innerHTML=''; 
    };
    document.body.innerHTML='';
}
</script> 
```

这需要启用 JavaScript，并且如果在 iframe 之外访问该页面，则会将页面空白并重定向到 about:blank（无）。

* * *

**防止页面在 iframe 中*时***被访问（原始答案，仍然有用）。

您可以发送标头`X-Frame-Options: SAMEORIGIN` [（Google 所做](https://stackoverflow.com/questions/8700636/how-to-show-google-com-in-an-iframe?answertab=active#tab-top)的）以要求浏览器不要在不在您域中的框架中显示内容。

**PHP**

```
header('X-XSS-Protection: 1; mode=block');
header('X-Frame-Options: SAMEORIGIN'); 
```

您还可以使用 JavaScript 解决此问题，以停止通过 iframe 访问该站点：

```
if (window.top !== window.self) { 
    window.self.location = 'about:blank'; 
    window.self.onload=function(evt){ 
        window.self.location = 'about:blank'; 
        document.body.innerHTML=''; 
    }; 
    document.body.innerHTML='';
} 
```

这两种方法都依赖于浏览器的支持，但聊胜于无。

# windows - 一个用于关闭的批处理文件，带有提示选项以中止它并在一定时间后重新运行？

> ID：11149995
> 
> 赞同：2
> 
> 时间：2012-06-22T04:01:01.247
> 
> 标签：windows, command-line, batch-file

我有一个批处理文件来关闭电脑

> @echo off
> Shutdown /s /f /t 600 /c "您的系统将在 10 分钟内关闭"

要中止此操作，我还有另一个

> 关机/a

现在我正在寻找的是，当我启动第一个批处理文件时，它应该提示我是否中止操作。如果我中止操作，它应该在 10 分钟后提示我相同的选项，我希望它循环，直到我不接受操作完成。

我已经用谷歌搜索了它，但到目前为止一无所获。只有一些 3rd 方工具可以在没有中止选项的情况下关闭。

是否可以？如果是的话，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T18:53:41.987

在单个批处理文件中执行此操作。如果您希望它每 10 分钟运行一次，不希望窗口在这 10 分钟的时间间隔内停留在那里，请删除“超时并转到”并使用 Windows 任务计划程序运行它

```
@ECHO OFF
:myLabel
SHUTDOWN /S /F /T 600
SET /P continue="Your computer is about to shutdown in 10 min do you want to abort (y/n): "
IF %continue% EQU y (
SHUTDOWN /A
TIMEOUT /T 600 /NOBREAK
GOTO myLabel
) 
```

# python - 避免循环后重复代码？

> ID：11149997
> 
> 赞同：16
> 
> 时间：2012-06-22T04:01:03.023
> 
> 标签：python, language-agnostic, code-organization

在使用循环时，我经常会两次编写一些代码。例如，在学习 Udacity 计算机科学课程时，我编写了代码（用于查找顺序重复次数最多的元素的函数）：

```
def longest_repetition(l):
    if not l:
        return None
    most_reps = count = 0 
    longest = prv = None
    for i in l:
        if i == prv:
            count += 1
        else:
            if count > most_reps:
                longest = prv
                most_reps = count
            count = 1
        prv = i
    if count > most_reps:
        longest = prv
    return longest 
```

在这种情况下，如果计数大于先前最重复的元素，我将检查两次。当当前元素与最后一个元素不同时以及当我到达列表的末尾时，都会发生这种情况。

在逐个字符解析字符串时，我也遇到过几次。也有几次它已经达到大约 5 行代码。这是常见的，还是我思考/编码方式的结果。我应该怎么办？

编辑：同样，在一个人为的字符串拆分示例中：

```
def split_by(string, delimeter):
    rtn = []
    tmp = ''
    for i in string:
        if i == delimeter:
            if tmp != '':
                rtn.append(tmp)
                tmp = ''
        else:
            tmp += i
    if tmp != '':
        rtn.append(tmp)
    return rtn 
```

编辑：这个考试是为那些预计不会有任何 Python 外部知识的课程的学生编写的；只有在前面的单元中教过的东西。尽管我之前确实有 Python 方面的经验，但我正在努力遵守这些限制以充分利用这门课程。诸如 str.split、列表和 Python 的许多基础知识之类的东西都被教授了，但还没有关于导入的东西——尤其是诸如 groupby 之类的东西。话虽如此，如果没有任何可能不会在编程介绍课程中教授的语言特性，它应该如何编写。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T05:04:45.177

既然你标记`language-agnostic`了 ，我发现你不会对你可以用来使你的代码高效、紧凑和可读的特定于 python 的东西感兴趣。出于同样的原因，我不打算展示用 python 编写的代码有多漂亮。

在某些情况下，`if`根据您的算法可以避免最后的额外费用，但大多数情况下就像“如果它存在，它应该是重要的和/或有效的”。我不知道 python 解释器是如何工作的，但在 C/C++/等编译语言中。编译器执行各种循环优化，包括在执行相同操作时将 if 块移出循环。

我运行并比较了各种片段的运行时间：

*   @JFSebastian - 8.9939801693
*   @srgerg - 3.13302302361
*   你的 - 2.8182990551。

`if`尾随为您提供最佳时间并不是一概而论。我的观点是：只需遵循您的算法，并尝试对其进行优化。结尾的 a 没有任何问题`if`。可能替代解决方案很昂贵。

关于您输入的第二个示例：`tmp == ''`完成检查以确保仅返回非空字符串。这实际上是您的拆分算法的一种附加条件。在任何情况下，您都需要在循环之后添加一个额外的内容`rtn.append`，因为在最后一个分隔符之外还有一些内容。你总是可以在循环中推送一个 if 条件，就像`if curCharIndex == lastIndex: push items to list`在每次迭代中执行的那样，它的情况又是相同的。

简而言之，我的回答：

*   您的代码与您想到的算法一样有效。
*   最后的`if`s 在许多情况下都会遇到 - 无需担心它们，它们可能使代码比没有这种 if 的替代方法更有效（示例就在这里）。
*   此外，编译器还可以发现和修改/移动代码周围的块。
*   如果有一种语言特性/库可以使您的代码快速并同时具有可读性，请使用它。（这里的其他答案指出了 python 提供的内容:)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T04:29:17.233

看看`itertools.groupby`哪个实现几乎完全符合您的要求。[http://docs.python.org/library/itertools.html#itertools.groupby](http://docs.python.org/library/itertools.html#itertools.groupby)

这是使用所述代码的算法：

```
from itertools import groupby

string = "AAABBCCDDDD"

maximum = 0
max_char = ""

for i in groupby(string):
    x, xs = i
    n = len(list(xs))
    if n > maximum:
        max_char = x
        maximum = n

print max_char 
```

我对考虑将来编写这样的算法的建议是尽量不要在一个函数中完成所有事情。考虑解决您要解决的问题的较小功能，例如“将序列中相等项目的每个序列分组为更小的序列”。

当然，它不一定是上述算法中的字符——它可以是任何可分组的东西。

编辑：为了响应 OP 的编辑，我认为您不会被允许在类设置中使用/了解诸如 itertools 之类的库，但我并不是建议您应该依赖外部库，而是您应该考虑的更多通过将问题拆分为更小的子问题来解决问题。因此，在这种情况下，您将实现自己的`groupby`并使用它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-22T04:46:19.323

避免在循环后重复条件的与语言无关的技术是将标记值附加到输入数据，例如，如果`delimiter`附加到末尾，`string`则条件在`split_by()`. 典型示例：在线性搜索算法中，可以将针附加到大海捞针以避免序列检查结束。

另一种选择是将一些工作委托给一个单独的函数，例如，一个函数计算重复次数，另一个找到最大值，如下所示`longest_repetition()`：

```
from itertools import groupby

def longest_repetition(iterable):
    return max(groupby(iterable), key=lambda x: sum(1 for _ in x[1]))[0] 
```

如果重复的代码是微不足道的；这可能不值得付出努力。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T04:26:37.220

在循环结束时需要重新检查条件并不少见，该条件也在循环内进行检查。如果您准备牺牲一点效率，避免重复检查的一种方法是在循环内过度检查它。例如：

```
def my_longest_repetition(l):
    if not l:
        return None
    most_reps = count = 0
    longest = prv = None
    for i in l:
        count = (count + 1) if i == prv else 1
        if count > most_reps:
            longest = prv
            most_reps = count
        prv = i
    return longest 
```

此代码检查的`count > most_reps`频率超出了它的需要，但避免了在循环后再次检查它的需要。

不幸的是，这种变化并不适用于所有情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T06:23:52.430

我认为有三种通用方法可以帮助您避免在循环结束时重复代码。对于这三个问题，我将使用一个与您自己的问题略有不同的示例问题，计算字符串中的单词。这是一个“默认”版本，就像您的代码一样，在循环结束时重复一些逻辑：

```
from collections import Counter

def countWords0(text):
    counts = Counter()
    word = ""

    for c in text.lower():
        if c not in "abcdefghijklmnopqrstuvwxyz'-":
            if word:
                counts[word] += 1
            word = ""
        else:
            word += c

    if word:
        counts[word] += 1 # repeated code at end of loop

    return counts 
```

第一种方法是在每个字符之后进行（一些）“子序列结束”处理，以便如果序列在该字符之后立即结束，则簿记是正确的。在您的示例中，您可以消除您的“其他”条件并每次运行其中的代码。（这是 sergerg 的回答。）

不过，这对于某些类型的检查可能并不容易。为了计算单词，您需要添加一些额外的逻辑，以避免从您处理的“部分”子序列中积累垃圾。这是执行此操作的代码：

```
def countWords1(text):
    counts = Counter()
    word = ""

    for c in text.lower():
        if c not in "abcdefghijklmnopqrstuvwxyz'-":
            word = ""
        else:
            if word:
                counts[word] -= 1 # new extra logic
            word += c
            counts[word] += 1 # this line was moved from above

    return counts + Counter() # more new stuff, to remove crufty zero-count items 
```

第二种选择是将标记值附加到序列的末尾，这将触发所需的“子序列结束”行为。如果您需要避免哨兵污染您的数据（尤其是数字之类的东西），这可能会很棘手。对于最长连续子序列问题，您可以添加不等于序列中最后一项的任何值。`None`可能是一个不错的选择。对于我的计数单词示例，非单词字符（例如换行符）将执行以下操作：

```
def countWords2(text):
    counts = Counter()
    word = ""

    for c in text.lower() + "\n": # NOTE: added a sentinel to the string!
        if c not in "abcdefghijklmnopqrstuvwxyz'-":
            if word:
                counts[word] += 1
            word = ""
        else:
            word += c

    # no need to recheck at the end, since we know we ended with a space

    return counts 
```

第三种方法是更改​​代码的结构以避免迭代可能意外结束的序列。您可以使用生成器来预处理序列，就像使用`groupby`from的其他答案一样`itertools`。（当然，生成器函数，如果非要自己写，可能也有类似的问题。）

对于我的字数统计示例，我可以使用模块中的正则表达式`re`来查找单词：

```
from re import finditer

def countWords3(text):
    return Counter(match.group() for match in
                   finditer("[\w'-]+", text.lower())) 
```

输出，当给出适当的 Pythonic 文本时（所有四个版本的 countWords 都相同）：

```
>>> text = """Well, there's egg and bacon; egg sausage and bacon;
              egg and spam; egg bacon and spam; egg bacon sausage and spam;
              spam bacon sausage and spam; spam egg spam spam bacon and spam;
              spam sausage spam spam bacon spam tomato and spam;
              spam spam spam egg and spam; spam spam spam spam spam spam
              baked beans spam spam spam; or Lobster Thermidor a Crevette
              with a mornay sauce served in a Provencale manner with shallots
              and aubergines garnished with truffle pate, brandy and with a
              fried egg on top and spam."""

>>> countWords0(text)
Counter({'spam': 28, 'and': 12, 'egg': 8, 'bacon': 7, 'sausage': 4, 'a': 4,
         'with': 4, 'well': 1, 'lobster': 1, 'manner': 1, 'in': 1, 'top': 1,
         'thermidor': 1, "there's": 1, 'truffle': 1, 'provencale': 1,
         'sauce': 1, 'brandy': 1, 'pate': 1, 'shallots': 1, 'garnished': 1,
         'tomato': 1, 'on': 1, 'baked': 1, 'aubergines': 1, 'mornay': 1,
         'beans': 1, 'served': 1, 'fried': 1, 'crevette': 1, 'or': 1}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T07:20:47.450

迭代器提供了一种打破循环的好方法：

```
def longest_repetition(l):
  i=iter(l)
  n=next(i,None)
  longest=None
  most_reps=0
  while n is not None:
    p=n
    count=0
    while p==n:
      n=next(i,None)
      count+=1
    if count>most_reps:
      most_reps=count
      longest=p
  return longest 
```

许多语言都有类似的概念。