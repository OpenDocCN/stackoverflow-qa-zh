# StackOverflow 问答 10628000-10628999

# javascript - 网页在 IE9 中不起作用（插入相邻 HTML）

> ID：10628004
> 
> 赞同：0
> 
> 时间：2012-05-16T23:14:39.940
> 
> 标签：javascript, internet-explorer-9

尝试执行此代码时，IE 给我一个错误（错误：此操作的目标元素无效。）：

```
var d1 = document.getElementById( name + '-body');
d1.insertAdjacentHTML('beforeend', html ); 
```

无需将整个函数放在这里，重点是在用户单击按钮时动态添加一些文本输入。我做了一些搜索，发现许多语句 insertAdjacentHTML 在表格中无法正常工作，这正是我需要它做的。

有解决方法吗？

编辑：这是我要插入的 html。如果你愿意，我也可以从 Chrome 发布生成的 html。

```
 "<tr id=\"node-" + counter + "\">
       <td>
         <textarea onclick=\"Common.removeInstructions(id)\" name=\"on\" id=\"action-" + counter + "\" wrap=\"soft\" cols=\"35\" rows=\"4\" style=\"resize: none; overflow: hidden;\">
        Please limit responses to 150 characters.  Blank fields will be ignored.
        </textarea>
      </td>
      <td>
  <input classname=\"TextInput\" id=\"actionDate-" + counter + "\" newline=\"1\" style=\"width: 100px;\" class=\"TextInput\" assemblers=\"jaba.ui.input.TextInput\" jaba-pagerowindex=\"1\"/>
      </td>
    </tr>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:41:43.247

IE 通常不允许您动态添加表格行/单元格。

预先创建要添加的行/单元格`display:none`，然后在需要时更改它们`innerHTML`和`display`是一个有用的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:30:35.297

添加 Fabrício Matté 作为答案，以便我接受。

如果您向我们展示生成的 HTML 以及您正在尝试做什么，回复会容易得多。无论如何，我之前在 IE 上的表格中插入行/单元格时遇到问题，我的解决方案是在创建表格时预先创建带有 display:none 的行/单元格，然后将 'sinnerHTML 连同它们的显示一起更改。

# php - 泛化访问多种类型对象的函数（通过函数和数组）

> ID：10628010
> 
> 赞同：-1
> 
> 时间：2012-05-16T23:16:04.170
> 
> 标签：php, refactoring

我现在有 2 个函数要构造`html`来显示，具体取决于数据源；1 个来自`database`，另一个来自`form` `post`。

```
function buildForm_newUser($user){
     $html_username = 'Username = ' . $_POST['username'];
     $html_location = 'location = ' . $_POST['location'];
     : // similar rows follow more than 20 times 
}

function buildForm_exsitingUser($user){
     $html_username = 'Username = ' . $user->get_property('username');
     $html_location = 'location = ' . $user->get_property('location');
     :
} 
```

是否可以仅使用 1 个功能来实现这些？

我试图切换源对象（即`$user`及`$_POST`以上）但由于后一个函数使用指定对象的函数而被卡住了，而前一个没有。此外，因为有很多行必须访问任一对象，我喜欢**只在一个位置**声明新生成的变量（上例中的 $html_* 变量） 。也就是说，我想要这样的东西：

```
function buildForm($user){ // Number and type of argument can vary

     // Do something here to specify object type

     $html_username = 'Username = ' . // following here, either $_POST or $user->get_property to get 'username'
     $html_location = 'location = ' . // following here, either $_POST or $user->get_property to get 'location'
     :
} 
```

谢谢。

（也感谢建议更好的标题......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:48:33.143

正如您在问题中正确写的那样，这两个功能有些相同，因此您希望使用一个功能。

你的动力很好，你发现了一个需要改进的地方。怎么做？首先，提取一个新的，第三种方法：

```
function buildForm_array($array)
{
     $html_username = 'Username = ' . $array['username'];
     $html_location = 'location = ' . $array['location'];
     ... // similar rows follow more than 20 times 

} 
```

然后在两个现有方法中使用第三个方法：

```
function buildForm_newUser()
{
     buildForm_array($_POST);
}

function buildForm_exsitingUser($user)
{
     $array['username'] = $user->get_property('username');
     $array['location'] = $user->get_property('location');
     ...
     buildForm_array($array);
} 
```

根据您的实际代码的样子，这可能会导致不同的结果（这里的示例显然不是路的尽头），例如，您可以`$user`基于创建一个对象`$_POST`，然后使用它使用现有的生成表单`buildForm_exsitingUser($user)`功能。

这类似于使用新的第三个函数，但没有创建它。因此，找到模式，并减少重复代码。简化。

这总是在进行中，所以保持你的代码动态，改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:48:23.957

什么在调用这个函数？您可以简单地接受用户名和用户位置作为参数...

# python - 检查所有变量之一是否为空

> ID：10628013
> 
> 赞同：5
> 
> 时间：2012-05-16T23:16:13.043
> 
> 标签：python, variables

```
def ask():
    global name, loca

    print "What's your name?"
    name = raw_input('> ')
    print "Where are you from?"
    loca = raw_input('> ')

    if name or loca == None:
        print "Please enter valid details."
        ask()

ask()
print "Alright, so you're " + name + ", from " + loca + "." 
```

使用这个脚本，如果我的两个变量都是空的，它只会打印最后一行。如果我填写一个或两个，它会触发那个`if`，让我重做这个功能。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T23:22:22.680

您已经很好地隔离了问题：

```
if name or loca == None: 
```

在这里你认为它说：

```
"If either name or loca equal none:" 
```

但相反，它说：

```
"if (name) is true or (loca equals None) is true:" 
```

它应该在哪里说：

```
"if (name equals none) is true or (loca equals none) is true:" 
```

这是：

```
if name is None or loca is None: 
```

顺便说一下，None 比较最好用 进行`is`，因为只有一个`None`对象。

此外，一种更 Pythonic 的方式是：

```
if not all((name, loca)): 
```

或者，将其视为“全部”，它只是 2 个变量：

```
if not (name and loca): 
```

如果您不明白，请阅读一下（Python 教程非常好——请阅读条件部分）。祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T23:21:19.890

试试这个

```
if not all([name, loca]):
   print "Please enter valid details"
   ask() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T23:23:32.260

好吧，跑步之后也`name`不会`loca`也不会。在最坏的情况下，它们是空字符串：. 您正在做的是询问 if is ，如果它具有*除*.`None``ask()``''``name``True``name`*`''`*

 *您要做的是检查名称是否具有非空值：

```
if not (name and loca):
    … 
```

应该没事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T23:24:11.610

```
if name or loca == None: 
```

这永远不会触发，原因有两个：

1.  首先，如果你不输入任何数据，你会得到一个空字符串， not `None`，所以`loca == None`永远*不会*是真的。

2.  其次，您的`if`陈述正在检查两件事：是否`name`为真（包含任何数据），以及是否`loca == None`. 你可能的意思是`if name == None or loca == None`。

结合这两件事，你可以写：

```
if name == "" or loca == "": 
```

或者，如果字符串包含数据，则简化并利用字符串是“真实的”这一事实：

```
if not (name and loca): 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T23:25:29.050

将此插入您的代码以获得您正在寻找的行为：

```
if not name or not loca:
    print "Please enter valid details."
    ask() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T23:28:12.163

```
if any(field is None for field in (name, loca)):
    print "Please enter valid details."
    ask() 
```

此版本专门允许空字符串，但防止`None`, 并允许您比`and`or更容易地扩展它`or`。不过，这确实意味着要输入更多字符。

一个不错的好处是，这几乎读起来像正确的英语：如果任何字段为无...*

# eclipse - 如何在 Eclipse 插件中弃用视图

> ID：10628014
> 
> 赞同：4
> 
> 时间：2012-05-16T23:16:27.760
> 
> 标签：eclipse, plugins, rcp

我有一个用于贡献视图的 Eclipse 插件。但是，在我的插件的下一个版本中，我不再希望提供此视图，因为功能正在以不同的方式完成。那么我该如何移除视图呢？

如果我只是从 plugin.xml 中删除视图声明，那么在他们升级“无法创建视图 com.foobar.view.id”后它将显示为错误 - 这是因为视图仍列在他们的工作区中.xml 等 Eclipse 尝试在重新启动时创建它。

如果我针对我创建的虚拟视图注册该视图 ID，那么我必须在 plugin.xml 中注册它，因此它将出现在 Windows、显示视图、其他列表中...

当我不想在另一个视图中重复使用该 ID 时，知道如何以一种很好的方式摆脱这个旧视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:15:22.897

我认为在 Eclipse 中弃用视图并不容易。正如您在问题中所述，您可以删除它或不删除它。

也许在下一个版本中，您可以包含一个虚拟视图，其中包含一些文档，下次可以在哪里查找功能，将 plugin.xml 中的可恢复属性设置为 false 以防止 Eclipse 下次重新打开这个虚拟视图。

然后在以后的版本中，您可以完全删除该视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:11:31.963

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-17T12:57:54.537

如果您使用相同的 ID 注册新视图会发生什么？此外，错误只会出现在第一次，它不会出现在随后的重新启动中。

# ios - iOS - UIImageView setImage 的更改行为：（自定义设置器）

> ID：10628020
> 
> 赞同：3
> 
> 时间：2012-05-16T23:17:31.047
> 
> 标签：ios

每当设置 UIImageView 的图像时，我都想执行其他任务。我正在尝试定义一个自定义 setter 方法，但没有运气。

H：

`@property (nonatomic, strong, setter = setImage:) UIImage *image;`

米：

```
- (void)setImage:(UIImage *)image {
    self.image = image;
    // additional tasks here
} 
```

这显然会导致无限循环。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T23:35:53.860

代替

```
 self.image = image; 
```

做

```
 [super setImage:image]; 
```

此外，您不需要指定 setter，因为这是默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T15:24:07.040

显然你正在触发 setter**`self.image = image;`**

用来**`_image = image;`**避免这种情况。

# editor - 谁能推荐一个在线代码编辑器？

> ID：10628023
> 
> 赞同：1
> 
> 时间：2012-05-16T23:17:35.820
> 
> 标签：editor

我尝试了许多不同的在线所见即所得编辑器。其中许多具有 HTML 编辑模式。但我正在寻找一个可以在在线工具中使用来编辑 html/javascript/css 的编辑器（它不必具有 WYSIWYG）。

理想情况下，它应该具有：

*   支持制表符（按制表符缩进代码）
*   各种语言的颜色编码
*   运行时不尝试执行嵌入的 javascript

有什么建议么？我尝试了很多，但没有一个有我想要的。

编辑：要清楚，我需要将代码添加到我的代码中。不是某处的在线编辑器。这是针对我正在开发的 CMS 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:22:19.090

我发现一个在这个论坛上搜索其他解决方案。谢谢！

[http://www.cdolivet.com/editarea/](http://www.cdolivet.com/editarea/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-05T06:16:11.947

Firebug 是一个非常好的在线编辑器，我将它用于 firefox，非常棒，我强烈推荐它！

# tridion - 发布交易信息类型不匹配错误

> ID：10628024
> 
> 赞同：3
> 
> 时间：2012-05-16T23:17:51.487
> 
> 标签：tridion, tridion2009

使用 Tridion 2009，SP1，因此使用旧的 COM+ TOM API。我正在尝试获取 PublishTransaction 的信息，但每次调用 PublishTransaction.Information 属性时都会出错。

这是我的代码：

```
try
{
    var pubTrans = (PublishTransaction)tdse.GetObject("tcm:0-166535-66560",
                                                      EnumOpenMode.OpenModeView);
    Console.WriteLine("transaction id=" + pubTrans.ID);
    Console.WriteLine("transaction itemtype=" + pubTrans.itemType.ToString());
    Console.WriteLine("transaction info=" + pubTrans.Information);
}
catch (Exception e)
{
    Console.WriteLine(e.Message, e.StackTrace);
} 
```

上面，交易 ID 和项目类型打印正常。我有其他代码，其中 Delete 方法工作正常，但每当我尝试获取信息时，它就会爆炸。

这是错误：

```
<tcm:Error xmlns:tcm="http://www.tridion.com/ContentManager/5.0" ErrorCode="D"
           Category="18" Source="Kernel" Severity="1">
  <tcm:Line Cause="false" MessageID="16138">
    <![CDATA[Unable to get Information of Unknown (tcm:0-166535-66560).]]>
    <tcm:Token>RESID_4485</tcm:Token><tcm:Token>Information</tcm:Token>
    <tcm:Token>RESID_4663</tcm:Token><tcm:Token>tcm:0-166535-66560</tcm:Token>
  </tcm:Line>
  <tcm:Line ErrorCode="D" Cause="true"><![CDATA[Type mismatch]]></tcm:Line>
  <tcm:Details>
    <tcm:CallStack>
      <tcm:Location>PublishTransaction.Information</tcm:Location>
      <tcm:Location>PublishTransaction.Information</tcm:Location>
    </tcm:CallStack>
  </tcm:Details>
</tcm:Error> 
```

我搜索了 SDL Tridion World 论坛，但找不到答案。我是否缺少修补程序，我应该联系支持人员，还是有其他方法可以获取交易信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:17:32.213

我不太确定（没有在深夜的这个时候进一步挖掘），但是“信息”属性实际上是一个 XMLElement 而不是文档所说的字符串？当您使用调试器时，您是否可以在此属性上放置一个监视以查看它包含的内容？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T06:57:04.073

我尝试以另一种方式获取 PublishTransaction 信息。以下是代码：-

```
PublishTransaction pubTrans = (PublishTransaction)tdse.GetObject(
                                                    "tcm:0-4294103-66560",
                                                    EnumOpenMode.OpenModeView, 
                                                    null, 
                                                    XMLReadFilter.XMLReadNull);
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(pubTrans.GetXML(XMLReadFilter.XMLReadAll));
XmlNamespaceManager nameSpace = new XmlNamespaceManager(xmlDoc.NameTable);
nameSpace.AddNamespace("tcm", "http://www.tridion.com/ContentManager/5.0");
nameSpace.AddNamespace("xlink", "http://www.w3.org/1999/xlink");
Console.WriteLine("transaction id=" + pubTrans.ID); 
Console.WriteLine("transaction itemtype=" + pubTrans.itemType.ToString());
EnumPublishTransactionState transState = pubTrans.get_State();
if (transState == EnumPublishTransactionState.Failed)
  Console.WriteLine("transaction info=" + 
    xmlDoc.SelectSingleNode("/tcm:PublishTransaction/tcm:Data/tcm:Information",
    nameSpace).InnerText); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:49:12.023

我没有工作环境，所以我只是在研究我可用的任何现有代码。这是事件系统的片段，仅当您具有管理员权限时才会删除队列项目：

```
public void OnPublicationPublishPost(Publication publication, IXMLDOMDocument2 publishResult)
{
    TDSE tdse = Utilities.GetTDSEInstance();
    publishResult.setProperty("SelectionNamespaces", "xmlns:tcm=\"http://www.tridion.com/ContentManager/5.0\"");
    PublishTransaction publishTransaction = Utilities.GetTridionItem<PublishTransaction>(publishResult.selectSingleNode("/*/*").attributes[2].text, null) as PublishTransaction;
    User user = Utilities.GetTridionItem<User>(publishResult.selectSingleNode("/tcm:PublishResponse/tcm:PublisherRequest/tcm:User").attributes[0].text, null) as User;
    TDSPrivileges isAdmin = user.privileges;
    if (isAdmin != TDSPrivileges.TdsPrivilegeSystemAdministrator)
    {
        publishTransaction.Delete();
    }
} 
```

# .htaccess - .htaccess 平面链接

> ID：10628027
> 
> 赞同：0
> 
> 时间：2012-05-16T23:18:09.613
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, relative-path

我想使用这样的平面链接：

```
http://somedomain.com/about-us
http://somedomain.com/products-list
http://somedomain.com/product/item 
```

因此，我使用了这样的 mod_rewrite 规则：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([0-9A-Za-z-]+)?$  /index.php?page=$1 [L]
    RewriteRule ^([0-9A-Za-z-]+)/([0-9A-Za-z-]+)?$ /index.php?page=$1&value=$2 [L]
</IfModule> 
```

前两个链接工作正常。但是每当我访问第三种类型的链接时，图像或 css 或任何链接为相对路径的 js 脚本，例如。`<img src="images/image.jpg">`和`<a href="about-us">About Us</a>`。

浏览器认为它在`http://somedomain.com/product/images/image.jpg`and中`http://somedomain.com/product/about-us`。

正确的路径应该是`http://somedomain.com/images/image.jpg`和`http://somedomain.com/about-us`

因此具有相对链接的文件不起作用。

如何解决这个问题？我不想对所有链接文件使用完整路径而不是相对路径。**请通过在.htaccess**中进行一些调整来提出一种方法

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:22:12.310

尝试转义你的斜线：

```
RewriteRule ^([0-9A-Za-z-]+)\/([0-9A-Za-z-]+)?$ /index.php?page=$1&value=$2 [L] 
```**

# php - PHP 5.3 魔法报价 gpc

> ID：10628032
> 
> 赞同：1
> 
> 时间：2012-05-16T23:18:46.210
> 
> 标签：php, mysql, php-5.3

我有一个问题，当查询变量有单引号时，带有 mysql 查询的旧程序在新的 php 5.3 中无法使用 magick_quotes_gpc，例如：

```
$text=$_GET['text'] --> "This is a text doesn'**strong text**t works"
mysql_query("UPDATE table SET '{$text}'"); 
```

仅当我以前这样做时才有效：

```
$text=mysql_real_escape_string($_GET['text']); 
```

但是我不能修改程序，而且程序很大并且有很多查询，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:29:28.370

> 但是我不能修改程序，而且程序很大并且有很多查询，我该怎么办？

如果你不能修改程序，那么你应该启用[`magic_quotes_gpc`](http://php.net/manual/security.magicquotes.php)- 该功能本身在 php 5.3 中仍然可用 - 只是不推荐使用。

然而，升级到 php 5.4 并运行应用程序将是一个安全问题。因此，在您现在收到有关弃用的警告之后，请考虑您希望在未来如何保持相关应用程序的维护。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-16T23:22:46.270

不要启用`magic_quotes_gpc`.

> 自 PHP 5.3.0 起，此功能已被弃用。强烈建议不要依赖此功能。

您可以在您的代码上运行搜索和替换，并将所有出现的地方替换`$_GET[]`为`mysql_real_escape_string($_GET[]);`

# orm - Kohana ORM 关系和显示信息

> ID：10628034
> 
> 赞同：0
> 
> 时间：2012-05-16T23:18:57.673
> 
> 标签：orm, kohana

我不知道如何处理这个问题。

假设我有 3 个模型，A、B 和 C。

A型有很多C，B型有很多C，C属于A和B。

我得到了所有的B。

```
$getBs=ORM::factory('B')->find_all(); 
```

我显示A，B，C。

```
foreach($getBs as $getB)
{
    echo $getB->b_category_title;
    foreach($getB->C->find_all() as $getC)
    {
        echo $getC->c_title;
        echo $getA->a_author; //Problem part
    }
} 
```

在显示 Model C 的信息时，我不知道如何访问 Model A 并将其连接到 Model C。

## 编辑

为了获得工作代码，我将模型 A - C 更改为模型一 - 三。

使用 _load_with 的 biakaveron 示例，我收到以下错误：

```
Database_Exception [ 1054 ]: Unknown column 'three.id_c' in 'on clause' [ SELECT `ones`.`a_id` AS `ones:a_id`, `ones`.`a_author` AS `ones:a_author`, `three`.* FROM `threes` AS `three` JOIN `twos_threes` ON (`twos_threes`.`id_c` = `three`.`c_id`) LEFT JOIN `ones` AS `ones` ON (`ones`.`a_id` = `three`.`id_c`) WHERE `twos_threes`.`id_b` = '1' ] 
```

楷模：

```
class Model_One extends ORM {

protected $_primary_key = 'a_id';

protected $_has_many = array(
    'threes'=> array(
        'model' => 'three',                
        'through' => 'ones_threes',   
        'far_key' => 'id_c',       
        'foreign_key' => 'id_a'   
        ),
    );
}

class Model_Two extends ORM {

protected $_primary_key = 'b_id';

protected $_has_many = array(
    'threes'=> array(
        'model' => 'three',                
        'through' => 'twos_threes',   
        'far_key' => 'id_c',       
        'foreign_key' => 'id_b'   
        ),
    );
}

class Model_Three extends ORM {

protected $_primary_key = 'c_id';

protected $_belongs_to = array(
    'ones'=> array(
        'model' => 'one',                
        'through' => 'ones_threes',    
        'far_key' => 'id_a',       
        'foreign_key' => 'id_c'   
        ),

'twos'=> array(
        'model' => 'two',                
        'through' => 'twos_threes',    
        'far_key' => 'id_b',       
        'foreign_key' => 'id_c'   
        ),
);

protected $_load_with = array('ones');
} 
```

为什么要寻找three.id_c？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:29:12.197

> C 属于 A 和 B。

```
foreach($getBs as $getB)
{
    echo $getB->b_category_title;
    foreach($getB->C->find_all() as $getC)
    {
        echo $getC->c_title;
        echo $getC->A->a_author; 
    }
} 
```

PS。只是一个注释。`$_load_with`您可以使用属性加载 C 和 A 对象：

```
class Model_C extends ORM {
    // ...
    protected $_load_with = array('A');
    // ...
} 
```

# linux - 睡眠进程的 CPU 利用率很高

> ID：10628037
> 
> 赞同：17
> 
> 时间：2012-05-16T23:19:39.643
> 
> 标签：linux, process, cpu, deadlock, sleep

我有一个似乎陷入僵局的过程：

```
# strace -p 5075
Process 5075 attached - interrupt to quit
futex(0x419cf9d0, FUTEX_WAIT, 5095, NULL 
```

它坐在“futex”系统调用上，似乎无限期地等待锁。当“top”运行时，该进程显示消耗大量 CPU：

```
# top -b -n 1
top - 23:13:18 up 113 days,  4:19,  1 user,  load average: 1.69, 1.74, 1.72
Tasks: 269 total,   1 running, 268 sleeping,   0 stopped,   0 zombie
Cpu(s):  8.1%us,  0.1%sy,  0.0%ni, 91.8%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:  12165696k total,  3810476k used,  8355220k free,    29440k buffers
Swap:  8388600k total,    43312k used,  8345288k free,   879988k cached

PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
5075 omdb      18   0 2373m 1.7g  26m S 199.7 14.9 102804:11 java 
```

该进程也显示为处于“S” - 睡眠状态，如果它正在等待某些资源，这是有道理的。但是，我不明白如果进程处于睡眠状态，为什么 CPU 利用率会接近 200%。为什么 top 在睡眠进程中报告如此高的 CPU 使用率？它的 CPU 利用率不应该为零吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T23:28:49.987

`top`报告的 CPU 使用率与进程状态之间没有关联。[手册页](http://linux.die.net/man/1/top)说（*强调*我的）：

> **%CPU** -- CPU 使用率
> 
> *自上次屏幕更新以来*任务占用的 CPU 时间份额，以占总 CPU 时间的百分比表示。

因此，自上次屏幕更新以来，您的进程确实使用了大量的处理器时间。是的，它正在休眠，但那是因为当前正在运行的进程是`top`它本身（这是有道理的，因为它当前正在更新屏幕）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T23:29:33.377

`top`输出完全正常。

平均负载计算包括等待某物的进程（互斥体/futexes、IO 等）以及实际使用 CPU 的进程。比如说，运行类似的东西来测试它：

```
dd if=/dev/sda of=/dev/null 
```

并观察最高输出，看看会发生什么。它将平均负载增加 1。

如果你看这一行：

```
Cpu(s):  8.1%us,  0.1%sy,  0.0%ni, 91.8%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st 
```

“91.8%id”中的“id”表示“空闲”。所以CPU实际上并没有做太多事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-25T23:57:12.390

您的应用程序是否分叉子进程？strace 输出可能表明主进程只是在等待子进程完成它们的工作。如果是这样，您可以尝试运行

```
strace -f -p 5075 
```

也可以跟踪子进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-08T20:01:26.370

让我加两分钱。

顶部显示进程在特定时刻的状态。但这并不意味着该进程一直处于该状态。

这个建议是完全错误的。

该过程可以在前一个最高时刻和当前最高时刻之间在 R 和 S 状态之间切换数百万次，因此如果进程在 R 和 S 状态之间快速切换，您可以轻松地将其捕获到 S 状态。

但是，它在切换之间使用 CPU 时间。

所以请感受一下 cpu_usage 事物（它描述了一段时间）和 state 事物（它描述了一个特定的时刻）之间的区别。

让我举一个清楚的例子。

有人在过去 10 分钟内从您的口袋里偷走了 3 个苹果。

但是，现在它不会从你的口袋里偷苹果。

偷苹果 = cpu_usage，这个人现在没有偷苹果的事实 = 进程状态

那么，得到一个特征并试图预测另一个特征是完全错误的。

# java - 更新时 JPA 出错

> ID：10628043
> 
> 赞同：0
> 
> 时间：2012-05-16T23:20:21.967
> 
> 标签：java, jpa, eclipselink, netbeans-7

我在小型桌面系统上使用 JPA。问题是系统更新一个表4、5次正确，第6次更新错误，第7次正常，直到10次后又失败一两次。

详细信息：将 JPA 2.0 与 eclipselink 和 Netbeans 7.0.1 一起使用。我正在使用mysql。

我希望你能帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:56:49.153

您应该显示有关您尝试更新的内容和数据库结构的更多详细信息，但根据我的经验，您应该验证您尝试更新的寄存器的值。例如，大多数时间的日期时间应该具有这种格式**“yyyy-MM-dd hh:mm:ss”**，以便在*MySQL*中工作。另一个重要的一点是，您必须将空值连接到*JPA*更新语句，只有一个**null**，而不是带有字符 null、空或空格的字符串。我认为这是一种价值问题，但请告诉我更多细节，我会帮助你。

# vba - Excel VBA：打开文件时初始化公共模块级变量？

> ID：10628045
> 
> 赞同：1
> 
> 时间：2012-05-16T23:20:37.947
> 
> 标签：vba, excel

我在三列中有一大堆日期，这些日期被几个宏使用。目前，使用这些日期的每个宏都必须：

1.  声明范围
2.  在范围内进行for循环以获取日期单元格和
3.  将单元格的值读入日期类型的变量中

这还包括检查单元格是否为空，检查日期是否有效。

而不是这个，我想有一个宏将这些日期读入（VBA）数组，只要打开文件，它就会一直存在。我还希望在打开文件时运行此宏，以便在运行任何使用它们的宏时保证初始化日期。

有什么办法可以做这些事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T23:27:14.737

将您的代码放入 Workbook_Open() 事件中。

1.  Alt-F11 调出 VBA 编辑器
2.  在 Project Explorer 中双击“ThisWorkbook”。

您将在代码窗口顶部看到两个下拉菜单。从第一个中选择“Workbook”，从第二个中选择“Open”，为您的代码创建一个存根。

# php - PHP/MYSQL - 订阅电子邮件 - 他们如何完成这样的事情？

> ID：10628047
> 
> 赞同：0
> 
> 时间：2012-05-16T23:20:50.000
> 
> 标签：php, mysql, confirmation-email

我希望我的网站有一个方面，用户可以使用它来注册时事通讯。

我不是 100% 完成这项任务的最佳方法是什么。

我能想到的很简单：

* * *

一个带有提交按钮的输入，用户在那里输入他们的电子邮件地址。

生成一个随机的 32 个字符散列，并将其与它们的地址一起存储在 mysql 表中。

Am 电子邮件被发送到包含哈希的地址，并要求用户在页面上输入他们的电子邮件地址和哈希，以对照 mysql 表检查它。

如果正确，则通过在表格上定义一个附加条目来激活电子邮件。

* * *

就我对这两者的了解而言，这大约是...

我想要完成的是，在确认中向用户发送一个链接，他们可以单击该链接来确认他们的地址......类似于`http://www.mysite.com/users/newsletter/?user=aGuy&confirm=blahBlah`.

但我真的不知道从哪里开始这样的事情......据我所知，以这种方式允许mysql查询是不安全的......

有人可以向我提供有关此问题的更多信息吗？

这是以建议或指向可能涵盖此类内容的教程的链接的形式出现的。

感谢您抽出时间来阅读！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:31:24.853

你很近。

当用户提交他的电子邮件地址时，将其插入数据库。该表至少应包含 4 个字段（id、email、verified、key）。这`id`只是一个代理键（自动增量）。`verified`应该默认为 false，并且密钥不应该是真正的散列，而是随机生成的字符串——任何难以猜测的东西。哈希是确定性的，因此如果有人弄清楚您使用的是什么算法，使用 md5 对用户的电子邮件地址进行哈希处理不会成为一个好的密钥。随机元素更适合，但同样，任何难以猜测的东西都可以正常使用。

电子邮件应包含一个包含`id`和的链接`key`。您使用`id`查找数据库中的记录（因为它是唯一的），然后检查`key`URL 中的 是否与存储在数据库中的记录匹配（键不必是唯一的）。如果它们匹配，则设置`verified`为 true，然后瞧。

对于奖励积分，您可以存储发送验证电子邮件的日期，并且可以在 24 小时左右后删除未验证的电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:29:59.230

您对流程的描述很好，只需开始实施它。

sfGuard[包](http://trac.symfony-project.org/browser/plugins/sfDoctrineGuardPlugin/trunk)实现了类似的流程，查看它们的源代码和数据库设计。

# http - 将有效负载/数据/内容附加到 POST 或 PUT HTTPWebRequest

> ID：10628057
> 
> 赞同：1
> 
> 时间：2012-05-16T23:21:55.933
> 
> 标签：http, post, httpwebrequest, webrequest, payload

我正在尝试从使用简单嵌入式 Web 服务器上的 HTTPWebRequest 类的 .NET 客户端接收 POST 或 PUT 请求。显然，出于某种原因，它会将有效负载与标头分开发送。也就是说，.NET 客户端将发送一个标头，以 CRLF 结束，然后在几毫秒后发送数据。我尝试了一些“修复”，例如“ServicePointManager.UseNaggleAlgorithm=false”，但这对我不起作用。

WebRequest 类必须有一种方法将有效负载附加到标头，将两者一起发送到一个数据包中。来自诸如浏览器之类的其他 POST 或 PUT 请求会执行此操作。

有人可以帮忙吗？一段时间以来，我一直在研究和尝试不同的事情。

# ios - 密码保护 iPhone 应用程序

> ID：10628062
> 
> 赞同：1
> 
> 时间：2012-05-16T23:22:38.313
> 
> 标签：ios, xcode, passwords

我已经阅读了有关密码保护您的应用程序的其他帖子，但我的情况有点不同。

我仍然想要密码保护，但我想自己创建密码，然后一旦使用密码，其他用户就无法输入。

假设我有一个密码列表（hamAndCheese、hamAndCheese1、hamAndCheese2）。如果 1 人从应用商店下载该应用并输入 hamAndCheese，我希望该密码在其他用户尝试输入时被“破解”。

此外，一旦用户输入密码一次，我不希望他们再次输入密码。（我不太担心这部分，更多的是上面描述的部分）。

我应该只列出密码吗？使用后如何消除它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:45:47.103

1.  您可以设置一个与时间相关的密码。你生成一个密码列表，密码的生存能力只有几天。这可以降低您的密码在有用后传播的风险

2.  第二个选项是您构建的 Web 服务，它通过 Internet 验证密码

3.  正如 tux91 之前所说 - 听起来它可以用来在应用商店之外产生收入流，让大坏蛋没有它 30% 的收入分成

# python - CherryPy WebService 未将 NLTK 搭配返回到浏览器窗口

> ID：10628064
> 
> 赞同：1
> 
> 时间：2012-05-16T23:22:54.887
> 
> 标签：python, nltk, cherrypy

我有一个非常简单的 CherryPy Web 服务，我希望它将成为一个更大项目的基础，但是，我需要让 NLTK 以我想要的方式工作。

我的 python 脚本导入 NLTK 并使用 NLTK 的搭配 (bigram) 功能，对预加载的数据进行一些分析。

我有一些问题：

1）为什么程序不将搭配返回到我的浏览器，而只返回到我的控制台？

2）为什么如果我指定`from nltk.book import text4`，程序会导入整套样本书（text1到text9）？

请记住，我是新手，所以答案可能就在我面前，但我看不到。

主要问题：如何将搭配结果传递给浏览器（webservice），而不是控制台？

谢谢

```
import cherrypy
import nltk
from nltk.book import text4

class BiGrams:
    def index(self):
        return text4.collocations(num=20)
    index.exposed = True

cherrypy.quickstart(BiGrams()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T18:51:04.877

我一直在与*Moby Dick合作，前几天我偶然发现了仅导入**一个*特定文本的问题的答案：

```
>>>import nltk.corpus
>>>from nltk.text import Text
>>>moby = Text(nltk.corpus.gutenberg.words('melville-moby_dick.txt')) 
```

因此，您真正需要的只是 fileid 以便将该文件的文本分配给您的新 Text 对象。不过要小心，因为只有“文学”资源位于 gutenberg.words 目录中。

无论如何，为了帮助查找古腾堡的文件 ID，在上面 import nltk.corpus 之后，您可以使用以下命令：

```
>>> nltk.corpus.gutenberg.fileids()

['austen-emma.txt', 'austen-persuasion.txt', 'austen-sense.txt', 'bible-kjv.txt',     'blake-poems.txt', 'bryant-stories.txt', 'burgess-busterbrown.txt', 'carroll-alice.txt',   'chesterton-ball.txt', 'chesterton-brown.txt', 'chesterton-thursday.txt', 'edgeworth-parents.txt', 'melville-moby_dick.txt', 'milton-paradise.txt', 'shakespeare-caesar.txt', 'shakespeare-hamlet.txt', 'shakespeare-macbeth.txt', 'whitman-leaves.txt'] 
```

但是，这仍然不能回答您的特定语料库的问题，即就职演说。对于这个答案，我找到了这篇 MIT 论文：[http ://web.mit.edu/6.863/www/fall2012/nltk/ch2-3.pdf](http://web.mit.edu/6.863/www/fall2012/nltk/ch2-3.pdf)

（我向任何开始使用 nltk 文本的人推荐它，因为它谈到了抓取各种文本数据进行分析）。获得就职地址 fileids 的答案在第 6 页（稍作编辑）：

```
>>> nltk.corpus.inaugural.fileids()
['1789-Washington.txt', '1793-Washington.txt', '1797-Adams.txt', '1801-Jefferson.txt', '1805-Jefferson.txt', '1809-Madison.txt', '1813-Madison.txt', '1817-Monroe.txt', '1821-Monroe.txt', '1825-Adams.txt', '1829-Jackson.txt', '1833-Jackson.txt', '1837-VanBuren.txt', '1841-Harrison.txt', '1845-Polk.txt', '1849-Taylor.txt', '1853-Pierce.txt', '1857-Buchanan.txt', '1861-Lincoln.txt', '1865-Lincoln.txt', '1869-Grant.txt', '1873-Grant.txt', '1877-Hayes.txt', '1881-Garfield.txt', '1885-Cleveland.txt', '1889-Harrison.txt', '1893-Cleveland.txt', '1897-McKinley.txt', '1901-McKinley.txt', '1905-Roosevelt.txt', '1909-Taft.txt', '1913-Wilson.txt', '1917-Wilson.txt', '1921-Harding.txt', '1925-Coolidge.txt', '1929-Hoover.txt', '1933-Roosevelt.txt', '1937-Roosevelt.txt', '1941-Roosevelt.txt', '1945-Roosevelt.txt', '1949-Truman.txt', '1953-Eisenhower.txt', '1957-Eisenhower.txt', '1961-Kennedy.txt', '1965-Johnson.txt', '1969-Nixon.txt', '1973-Nixon.txt', '1977-Carter.txt', '1981-Reagan.txt', '1985-Reagan.txt', '1989-Bush.txt', '1993-Clinton.txt', '1997-Clinton.txt', '2001-Bush.txt', '2005-Bush.txt', '2009-Obama.txt'] 
```

因此，您应该能够将特定的就职地址作为文本导入（假设您在上面执行了“从 nltk.text 导入文本”），或者您可以使用上面导入的“就职”标识符来处理它们。例如，这有效：

```
>>>address1 = Text(nltk.corpus.inaugural.words('2009-Obama.txt')) 
```

实际上，您可以通过不带任何参数调用 inaugural.words 将所有就职地址视为一个文档，如下面的示例[所示](http://nltk.googlecode.com/svn/trunk/doc/howto/corpus.html)：

```
>>>len(nltk.corpus.inaugural.words()) 
```

或者

> > > 地址=文本（nltk.corpus.inaugural.words（））

我记得一个月前在尝试自己回答这个问题时阅读了这个帖子，所以如果这些信息来晚了，也许会对某个地方的人有所帮助。

（这是我对 Stack Overflow 的第一个贡献。我已经阅读了几个月，直到现在还没有任何有用的东西可以添加。只想说一句“感谢大家的帮助。”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:23:20.583

我的猜测是你从`collocations()`调用中得到的不是一个字符串，你需要序列化它。试试这个：

```
import cherrypy
import nltk
from nltk.book import text4
import simplejson

class BiGrams:
    def index(self):
        c = text4.collocations(num=20)
        return simplejson.dumps(c)
    index.exposed = True

cherrypy.quickstart(BiGrams()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:54:58.563

看看源代码（http://code.google.com/p/nltk/source/browse/trunk/nltk/），你会学到很多东西（我知道我做到了）。

1) Collocations 正在返回您的控制台，因为这是它应该做的。

```
help(text4.collocations) 
```

会给你：

```
Help on method collocations in module nltk.text:

collocations(self, num=20, window_size=2) method of nltk.text.Text instance
    Print collocations derived from the text, ignoring stopwords.

    @seealso: L{find_collocations}
    @param num: The maximum number of collocations to print.
    @type num: C{int}
    @param window_size: The number of tokens spanned by a collocation (default=2)
    @type window_size: C{int} 
```

浏览 text.py 中的源代码，您会发现搭配的方法非常简单。

2) 导入 nltk.book 会加载每个文本。您可以从 book.py 中获取您需要的位并编写一个仅加载就职地址的方法。

# java - 我尝试绘制图像的方式有什么问题？

> ID：10628074
> 
> 赞同：1
> 
> 时间：2012-05-16T23:24:17.647
> 
> 标签：java, swing

我的项目有问题：/

为什么 drawPac 不能正常工作。黑色矩形正在绘制，但我的图像不是：/为什么

我做了4个类，这里​​是3个类的鳕鱼，没有扩展JFrame的主类，并且添加了JPanel Game。

文件 #1

```
package pacman;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.JPanel;

public class Game extends JPanel { 

   Pac pacman = new Pac();

   public void Game() {
     setFocusable(true);
     setBackground(Color.BLACK);
     setDoubleBuffered(true);
   }

@Override
public void paint(Graphics g){
    super.paint(g);
    Graphics2D g2d = (Graphics2D) g;
    g2d.setColor(Color.black);
    g2d.fillRect(0, 0,this.getWidth(),this.getHeight());
    drawPac(g2d);
}

public void drawPac(Graphics2D g2d){
    g2d.drawImage(pacman.image, pacman.x, pacman.y, 100, 100, this);
    }
} 
```

文件 #2

```
package pacman;
import java.awt.Image;
import javax.swing.ImageIcon;

public class Actor {
    int x,y;
    int dv;
    Image image;
    public void Actor(){
    }
} 
```

文件 #3

```
package pacman;
import pacman.Game;
import javax.swing.ImageIcon;
import java.awt.Graphics2D;

public class Pac extends Actor {

public void Pac(){

    try{
    image = new ImageIcon(Pac.class.getResource("../img/Pac00.gif")).getImage(); 
    x=0;
    y=0;
        }
    catch (Exception e){
        System.out.println("Blad prz otwieraniu");
        System.exit(0);  }
 }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:38:20.847

1 - “Pac”类应该负责绘制本身，你不同意吗？

2 - 对于 JPanel 和每个 JComponent 的儿子，您应该重写paintComponent 方法，而不是paint，它负责将绘画工作委托给paintComponent、paintBorder 和paintChildren。您也应该调用paintComponent 的超级版本，就像在paint 中所做的那样。看看文档。

3 - 在大多数情况下，建议创建一个新的图形上下文（基于原始）。所以，你的行：

```
Graphics2D g2d = (Graphics2D) g; 
```

应替换为：

```
Graphics2D g2d = (Graphics2D) g.create(); 
```

并且您需要在使用它后（在paintComponent 的最后一行）处理（g2d.dispose（））这个新上下文。

4 - Pac 类的代码是否正确？是在编译吗？image 字段是 Actor 的成员吗？

我认为您的代码中有一些问题没有在您的问题中显示...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T23:30:33.707

好的@lechniak更新游戏类

```
public class Game extends JPanel { 
 Pac pacman = new Pac();

public Game() {
  setFocusable(true);
  setBackground(Color.BLACK);
  setDoubleBuffered(true);
}
@Override
public void paint(Graphics g){
   super.paint(g);
   Graphics2D g2d = (Graphics2D) g;
   g2d.setColor(Color.black);
   g2d.fillRect(0, 0, this.getWidth(), this.getHeight());
   drawPac(g2d);
}

public void drawPac(Graphics2D g2d){
   g2d.drawImage(pacman.image, pacman.x, pacman.y, 200, 200, this);
}

public static void main(String[] args) {
     JFrame f = new JFrame("Image Draw");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.getContentPane().add(new Game());
        f.setSize(350,300);
        f.setLocation(300,300);
        f.setVisible(true);
 }
} 
```

和 Pac 类

```
//import javax.swing.ImageIcon;
import java.awt.image.BufferedImage;
import java.awt.Graphics2D;
import javax.imageio.ImageIO;
import java.io.*;

public class Pac /*extends Actor*/ {
   int x = 0;
   int y = 0;
   BufferedImage  image;

       public Pac() {
          try {
            image = ImageIO.read(new File("/Users/hlozano/java/swing/programmerBorn.jpg"));
            //new ImageIcon(Pac.class.getResource("../img/Pac00.gif")).getImage();
            x = 0;
            y = 0;
           } catch (Exception e) {
            System.out.println("Blad prz otwieraniu " + e);
            System.exit(0);
               }
       }
} 
```

和图像输出

![在此处输入图像描述](../Images/6fb225ebfa58f61d6a5e4d9bea965764.png)

我希望这些有帮助。

# sql - SQL 批量从一个表移动到另一个表

> ID：10628080
> 
> 赞同：1
> 
> 时间：2012-05-16T23:25:26.677
> 
> 标签：sql, database, select, insert

所以我需要一些我正在做的 SQL 工作的帮助。我不是最擅长 SQL，我遇到了一个需要一些指导的问题。我想将我拥有的表拆分为较小的表。那里有一些不属于的行，我想移动它们。

这两个表将具有完全相同的列和架构。

我知道我可以做类似的事情：

```
Insert into [table1]
Select * From [table2] 
```

出现的问题是有 100,000,000+ 行要移动。这 100,000,000+ 的 RowID 不按顺序排列。否则我只会

```
Insert into [table1]
    Select * From [table2]
    Where RowID > x AND RowID <= x + y 
```

并迭代直到所有行都被复制。

我知道有可以完成的循环，但到目前为止它们效率低下。我知道这将需要 10 分钟以上的时间，而且很可能需要一些时间。我只是需要一些指导。

我并没有决定只使用 SQL 代码。如果有一个向导可以与 Microsoft SQL Server Management Studio 一起使用来执行此操作，那我很满意。我已经研究了 BULK INSERT 并不太了解这一点，所以对此进行解释就可以了。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:28:54.447

您需要对表进行分区 - 有[介绍/教程](http://sqlserverpedia.com/wiki/Partitioning)

这是一项相当繁重的工作。

# ios - 在 MonoCross.Touch 应用程序中使用“MXTouchViewGroup*”的 MonoCross 示例

> ID：10628081
> 
> 赞同：0
> 
> 时间：2012-05-16T23:25:27.047
> 
> 标签：ios, mono, xamarin.ios, uitabbarcontroller, monocross

有没有人有示例代码说明如何使用框架中的“MXTouchViewGroup *”代码来创建/使用底部的标签栏。查看 MXToughViewGroup* 的代码，并不是 100% 清楚我将如何设置/使用带有标签栏的导航框架。不幸的是，MonoCross 书也没有这种情况的例子。

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:21:03.463

因此，在浏览了 MonoCross 源代码之后，我想出了如何在使用 MonoCross 模式时使用 MonoTouch/iOS 选项卡栏，特别是在继续使用 MonoCross.Navigation 在您的应用程序中移动时：

```
//------- MonoCross Shared Application

// Main Menu
NavigationMap.Add("Menu/Tab1", new Tab1Controller());
NavigationMap.Add("Menu/Tab2", new Tab2Controller());
NavigationMap.Ass("Other", new OtherController());

// Set default navigation URI
NavigateOnLoad = "Menu/Tab1";

//------- MonoCross.Touch Container

// init monocross application
MXTouchContainer.Initialize(new SharedApplication(), this, window)

// Add view to container as usual
MXTouchContainer.AddView<ModelTab1>(typeof(Tab1View),ViewPerspective.Default);
MXTouchContainer.AddView<ModelTab2>(typeof(Tab2View),ViewPerspective.Default);
MXTouchContainer.AddView<ModelOther>(typeof(OtherView),ViewPerspective.Default);

// Create a MXTouchViewGroup, with items representing tab items     
MXTouchViewGroupItem[] menuItems = new MXTouchViewGroupItem[] {
        new MXTouchViewGroupItem(typeof(Tab1View),"Tab 1!",""),
        new MXTouchViewGroupItem(typeof(Tab2View),"Tab 2!",""), 
            };
MXTouchViewGroup tvg = new MXTouchViewGroup(new MXTouchViewGroupTabController(),menuItems);

// Add the group to MXTouchContainer.ViewGroups 
List<MXTouchViewGroup> ltvg = ((MXTouchContainer)MXTouchContainer.Instance).ViewGroups;
ltvg.Add(tvg);

// navigate to to starting location now
MXTouchContainer.Navigate(null,MXTouchContainer.Instance.App.NavigateOnLoad); 
```

在共享应用程序中，像往常一样创建从 MXController 派生的控制器并将它们添加到 NavigationMap。在“共享应用程序”中绝对没有什么特别的事情要做

在 MonoCross Container 中，您也照常将派生自 MXTouch*View 的视图添加到容器中。不同之处在于创建一个“MXTouchViewGroup”，并为每个选项卡创建一个“MXTouchViewGroupItems”；每个“MXTouchViewGroupItem”都有一个与之关联的视图。您需要为您的标签栏创建一个适当的“MXTouchViewGroup”项目，然后将组添加到您的“MXTouchContainer”，如图所示，然后让框架像往常一样导航到第一个视图。

所有这一切的结果是，当导航到“组”中的视图（即“Tab1View”或“Tab2View”）时，框架将自动呈现带有视图的选项卡栏，而无需任何进一步的干预。如果您导航到不在“组”中的视图（即“OtherView”），标签栏将不会呈现。

而已。

# ruby-on-rails - Rails 中的重定向和路由

> ID：10628083
> 
> 赞同：0
> 
> 时间：2012-05-16T23:25:35.447
> 
> 标签：ruby-on-rails

我目前正在阅读Beginning Rails 3。我有一个关于重定向的问题。该书指出，“redirect_to 也可以将对象作为参数”与路径。所以他们给出的例子是

```
redirect_to(@article) 
```

是等效于的快捷方式

```
redirect_to(article_path(:id => @article)) 
```

我不确定我是否理解这一点。:id => @article 这行到底是什么意思？

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:07:00.987

`redirect_to(@article)`是 `redirect_to(article_path(@article))`. Rails 可以这样做，因为它从`@article`变量中提取类名，例如`send("#{@article.class.name.downcase}_path")`.

`redirect_to(article_path(@article))`是 的快捷方式`redirect_to(article_path(:id => @article))`，这是 的快捷方式`redirect_to(article_path(:id => @article.to_param))`。基本上 Rails 说，@article 是一个 ActiveRecord 对象，我会问它的神奇`to_param`价值。默认情况下，`to_param`只返回文章的 ID，但您可以覆盖它以像 slug 或 nicename 一样返回，例如`38-hello-world`.

所以`redirect_to(@article)`真的是说，好吧，我有一篇文章，所以我需要文章的路径，我需要文章的资源标识符，或`to_param`。

然后它构造 URL！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:32:31.497

`:id => @article`是 的快捷方式`:id => @article.to_param`，它只指定您要查看的文章*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:32:34.847

首先，`rake routes`在您的控制台中执行。它将显示您的应用程序的路线列表。
会有一条路由叫做*article*。

`article_path`只是路线*文章*的链接。

通过这样做`(:id => @article)`，您将向它传递一个`id`具有该`@article`值的参数。

# c++ - 如何使用 {} 块 C++ 解析文件

> ID：10628086
> 
> 赞同：2
> 
> 时间：2012-05-16T23:25:54.630
> 
> 标签：c++, parsing

我有这样的文件

```
EntityName Jaws
{
  Animation WALK
  {
    NumberOfFrames 9
    DirectionOfSprite L
    DirectionGenerate LR
    FPS 9
  }

  Animation IDLE
  {
    NumberOfFrames 6
    DirectionOfSprite L
    DirectionGenerate LR
    FPS 9
  }
  .......
  .......
} 
```

如何在这个结构中解析这个文件

```
struct AnimationData
{
  string animationName;
  int noOfFrames;
  eAnimationDataDirection direction;
  int FPS;
};

struct EntityAnimationData
{
  string entityName;
  vector<AnimationData> animationData;

  string getSpriteResourceName(AnimationData animationData, int frameNumber);
}; 
```

我想将此数据存储到结构中。我该如何获得干净的解决方案？我已经阅读了文件的基本阅读。

这是我尝试过的

```
EntityAnimationData parseAnimationData(const char* filename)
{
  EntityAnimationData data;
  ifstream file;
  file.open(filename);
  char output[128];
  string op;
  if (file.is_open())
  {
    while (!file.eof())
    {
      file >> output;
      if(strcmp(parameter,AD_ENTITY_NAME.c_str())==0)
      {
        file >> output;
        data.entityName = output;
        cout<<data.entityName<<endl;
        do
        {
          file >> output;
          cout<<output<<endl;
        }while(strcmp(output,"}")!=0);
      }
    }
  }
  file.close();
  return data;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T23:34:35.287

如果这是针对您正在制作的游戏，我会考虑更改输入文件格式的详细信息。如果您使用现有的文件格式，则可以使用库来显着简化解析。

例如，同样的数据可以很容易地存储为 XML，这将允许您使用 XML 解析器（例如[TinyXML-2](https://github.com/leethomason/tinyxml2)）来读取数据，并且还可能使文件的创建更简单。它还可以更简单地添加更强大的格式化问题处理，例如额外的空格等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:38:55.720

无需创建语法并使用 lex/yacc 等工具为您创建解析器（BOOST 库也有解析器），您需要读取每个标记（就像您现在正在做的那样：`file >> token`--我建议使用`std::string`for the token ，而不是`char`数组），然后将标记与预期的下一个标记进行比较（如果它是固定标记之一，例如*EntityName*、*Animation*、*{*），然后将标记的值分配给结构的适当部分。如果你需要一个整数作为下一个值，你可以用`token`结构的适当成员替换。

*注意*：如果您采用这种方法，请确保在每次提取操作时检查错误，而不是假设文件始终采用正确的格式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T17:45:48.140

如果你有一个固定的文件格式，你不希望改变它，那么你可以做 readline 后跟 if/else。否则，为这种格式编写解析器非常简单，并且提供了更大的灵活性。下面是使用 AX 解析器生成器的示例。

一些假设：您没有指定名称是什么，我`axe::r_ident`在此示例中使用标识符规则（），您可以将其更改为适合您需要的任何内容。我还假设您不关心空格、制表符、行尾，因此您可以使用`axe::r_skip`规则将它们全部跳过。我假设您使用的数字是十进制的。

```
template<class I>
EntityAnimationData parse(I begin, I end)
{
    EntityAnimationData data;
    AnimationData ad; // temporary

    auto direction = axe::r_lit("LR") | "RL" | 'L' | 'R';

    auto animation_data = "Animation" & axe::r_ident() >> ad.animationName 
        & '{' 
        & "NumberOfFrames" & axe::r_decimal(ad.noOfFrames)
        & "DirectionOfSprite" & direction >> axe::e_ref([&](I i1, I i2)
        {
           std::string dir(i1, i2); // this will be "LR" or "RL" or 'L' or 'R'
           // ad.direction = ...
        })
        & "DirectionGenerate" & direction  >> axe::e_ref([&](I i1, I i2)
        {
           std::string dir(i1, i2); // this will be "LR" or "RL" or 'L' or 'R'
           // ad.direction = ...
        })
        & "FPS" & axe::r_decimal(ad.FPS)
        & '}';

    auto entity_data = axe::r_lit("EntityName") & axe::r_ident() >> data.entityName 
        & '{' 
        & *(animation_data >> axe::e_ref([&](...) { data.animationData.push_back(ad); }))
        & '}'
        & axe::r_end();
    // create a skip rule
    auto data_skip_spaces = axe::r_skip(entity_data, " \t\n");
    auto match = data_skip_spaces(begin, end);
    if(!match.matched)
        throw "format error";

    return data;
}

void foo()
{
   std::string text = "EntityName Jaws\n{\n  Animation WALK\n  {\n    NumberOfFrames 9 ...";
   EntityAnimationData data = parse(text.begin(), text.end());
} 
```

# jsf - 丰富：未找到建议框属性

> ID：10628088
> 
> 赞同：0
> 
> 时间：2012-05-16T23:26:17.417
> 
> 标签：jsf, richfaces

我在使用建议框时遇到了一些问题，我将粘贴一些代码来显示我的问题：(Richfaces: 3.3.3) **xhtml**

```
<h:inputText id="input" value="#{CreateUser.cityName}" size="40"/>                  
<rich:suggestionbox width="290" suggestionAction="#{CreateUser.suggest}" var="city" for="input">
    <h:column>
       <h:outputText value="#{city.name}"/>
    </h:column>
    <h:column>
       <h:outputText value="#{city.state.name}" />
    </h:column>
    <h:column>
       <h:graphicImage value="#{city.state.country.flagImage}" />
    </h:column>
</rich:suggestionbox> 
```

**Bean** 这是我的建议方法。

```
public ArrayList<CityType> suggest(Object input) {
   String userInput = (String) input;
   ArrayList<CityType> ret = new ArrayList<CityType>();

   for (CityType state : cityTypes) {
      if ((state.getName().toLowerCase()).startsWith(userInput.toLowerCase())) {
         ret.add(state);
      }
    }
   return ret;
} 
```

我得到这个：

```
/account/createUser.xhtml: Property 'suggest' not found on type com.project.web.CreateUser_$$_javassist_seam_9 
```

谢谢你的时间！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:47:52.210

从[RichFaces 3 文档](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_suggestionbox.html)中，您的函数应该返回 a`List`而不是 a `ArrayList`，将您的代码更改为：

```
public List<CityType> suggest(Object input) {
    String userInput = (String) input;
    List<CityType> ret = new ArrayList<CityType>();

    for (CityType state : cityTypes) {
        if ((state.getName().toLowerCase()).startsWith(userInput.toLowerCase())) {
            ret.add(state);
        }
    }
    return ret;
} 
```

# hibernate - hibernate 无法获取下一个序列值

> ID：10628099
> 
> 赞同：52
> 
> 时间：2012-05-16T23:28:49.477
> 
> 标签：hibernate, postgresql

我有 gwt 应用程序在后端连接到 postgres DB，并且有一个 java 类 'Judgement' 映射 DB 中的表 'judgements'，当我试图将判断持久化到 db 中时，它抛出了以下错误：

```
Caused by: org.hibernate.exception.SQLGrammarException: could not get next sequence value
...
Caused by: org.postgresql.util.PSQLException: ERROR: relation "hibernate_sequence" does not exist 
```

我的判断课看起来像这样

```
@Entity
@Table(name = "JUDGEMENTS")
public class Judgement implements Serializable, Cloneable {

    private static final long serialVersionUID = -7049957706738879274L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "JUD_ID")
    private Long _judId;
... 
```

我的表判断是：

```
 Column    |            Type             |                        Modifiers                        
-------------+-----------------------------+---------------------------------------------------------
 jud_id      | bigint                      | not null default nextval('judgements_id_seq'::regclass)
 rating      | character varying(255)      | 
 last_update | timestamp without time zone | 
 user_id     | character varying(255)      | 
 id          | integer                     | 
Indexes:
    "judgements_pkey" PRIMARY KEY, btree (jud_id)
Foreign-key constraints:
    "judgements_id_fkey" FOREIGN KEY (id) REFERENCES recommendations(id)
    "judgements_user_id_fkey" FOREIGN KEY (user_id) REFERENCES users(user_id) 
```

我在数据库中有一个 SEQUENCE 名称“judgements_id_seq”

谁能告诉我怎么了？？？谢谢。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-17T01:00:47.747

Hibernate 的 PostgreSQL 方言不是很亮。它不知道您的 per-SERIAL 序列，并假设它可以使用一个名为“hibernate_sequence”的全局数据库范围序列。

* * *

（**更新**：似乎较新的 Hibernate 版本在`GenerationType.IDENTITY`指定时可能会使用默认的每个表序列。测试您的版本并使用它而不是下面的，如果它适合您。）

* * *

您需要更改映射以明确指定每个序列。这是烦人的，重复的，毫无意义的。

```
@Entity
@Table(name = "JUDGEMENTS")
public class Judgement implements Serializable, Cloneable {

    private static final long serialVersionUID = -7049957706738879274L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator="judgements_id_seq")
    @SequenceGenerator(name="judgements_id_seq", sequenceName="judgements_id_seq", allocationSize=1)
    @Column(name = "JUD_ID")
    private Long _judId;
... 
```

`allocationSize=1`是相当重要的。如果省略它，Hibernate 将盲目地假定序列是用 定义的，`INCREMENT 50`因此当它从序列中获取一个值时，它可以使用该值*和它下面的 49 个值*作为唯一生成的键。如果您的数据库序列增加 1 - 默认值 - 那么这将导致唯一的违规，因为 Hibernate 尝试重用现有的键。

请注意，一次获取一个密钥*将*导致每次插入额外的往返行程。据我所知，Hibernate 不能`INSERT ... RETURNING`用来有效地返回生成的密钥，也不能明显地使用 JDBC 生成的密钥接口。如果你告诉它使用一个序列，它会调用`nextval`以显式地获取值`insert`，从而导致两次往返。为了降低成本，您可以在具有大量插入的键序列上设置更大的增量，记住在映射*和*基础数据库序列上设置它。这将导致 Hibernate`nextval`不那么频繁地调用并缓存键块以在执行时分发。

我相信你可以从上面看到我不同意这里所做的 Hibernate 设计选择，至少从与 PostgreSQL 一起使用它的角度来看。他们应该使用`getGeneratedKeys`或使用`INSERT ... RETURNING`with`DEFAULT`作为键，让数据库处理这个问题，而 Hibernate 不必为序列的名称或显式访问它们而烦恼。

顺便说一句，如果您将 Hibernate 与 Pg 一起使用，您可能还需要[Pg 的 oplock 触发器，](http://wiki.postgresql.org/wiki/Hibernate_oplocks)以允许 Hibernate 的乐观锁定与正常的数据库锁定安全交互。如果没有它或类似的东西，您的 Hibernate 更新将倾向于破坏通过其他常规 SQL 客户端所做的更改。问我怎么知道的。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-05-17T00:05:13.277

我似乎记得不得不使用`@GeneratedValue(strategy = GenerationType.IDENTITY)`让 Hibernate 在 PostgreSQL 上使用“串行”列。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-10-01T00:54:19.387

您需要使用策略 GenerationType.IDENTITY 而不是 GenerationType.AUTO 设置您的 @GeneratedId 列

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "JUD_ID")
private Long _judId; 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-10-11T09:09:55.103

我之前遇到过同样的错误，在你的数据库中输入这个查询`CREATE SEQUENCE hibernate_sequence START WITH 1 INCREMENT BY 1 NOCYCLE;`

这对我有用，祝你好运~

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-08T04:18:39.940

我还想添加一些关于 MySQL 到 PostgreSQL 迁移的注释：

1.  在您的 DDL 中，在对象命名中更喜欢使用“_”（下划线）字符来分隔单词，而不是骆驼大小写约定。后者在 MySQL 中运行良好，但在 PostgreSQL 中带来了很多问题。
2.  模型类身份字段中@GeneratedValue 注释的 IDENTITY 策略适用于休眠 3.2 及更高版本中的 PostgreSQLDialect。此外，AUTO 策略是 MySQLDialect 的典型设置。
3.  如果您使用 @Table 注释模型类并将文字值设置为等于表名的值，请确保您确实创建了要存储在公共模式下的表。

这就是我现在所记得的，希望这些技巧可以让你节省几分钟的试错时间！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-19T16:01:35.083

我想你已经有足够的答案了，但我得到了完全相同的错误，我的问题是另一个问题。我浪费了一点时间试图解决它。

就我而言，问题是 Postgres 中序列的所有者。因此，如果上述任何解决方案都没有解决您的问题，请检查序列的所有者是否是应该具有权限的用户/角色。

跟随一个样本：

```
CREATE SEQUENCE seq_abcd
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

ALTER TABLE public.seq_abcd OWNER TO USER_APP; 
```

我希望它对任何人都有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-28T21:41:42.780

使用`GeneratedValue`and策略`GenericGenerator`：`native`

```
@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "id_native")
@GenericGenerator(name = "id_native", strategy = "native")
@Column(name = "id", updatable = false, nullable = false)
private Long id; 
```

我必须创建一个序列调用`hibernate_sequence`，因为 Hibernate 默认会查找这样的序列：

```
create sequence hibernate_sequence start with 1 increment by 50;
grant usage, select on all sequences in schema public to my_user_name; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-02T12:17:32.143

我们使用的数据库应该在 Postgres SQL 配置文件的 search_path 下提到。这可以通过设置 search_path 以及数据库名称来编辑 Postgressql 配置文件来完成，例如：TESTDB。

1.  在 Postgres SQL 数据库的 data 文件夹下找到 postgressql.conf 文件。
2.  设置 search_path = "$user", public, TESTDB;
3.  重新启动 Postgres SQL 服务以影响更改。

进行上述更改后，它对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-28T11:34:06.950

如果使用 Postgres，请手动创建名为“hibernate_sequence”的序列。它会起作用的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-23T17:52:50.350

请使用以下查询并更改您的表格： `CREATE SEQUENCE user_id_seq START 1;` `ALTER TABLE product.users ALTER COLUMN user_id SET DEFAULT nextval('user_id_seq');` `ALTER SEQUENCE users.user_id_seq OWNED BY users.user_id;`

并在您的实体类中使用 this

`@GeneratedValue(strategy = GenerationType.SEQUENCE,generator="user_id_seq")`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-04T21:31:47.220

对于使用 FluentNHibernate 的任何人（我的版本是 2.1.2），它同样是重复的，但这有效：

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Table("users");
        Id(x => x.Id).Column("id").GeneratedBy.SequenceIdentity("users_id_seq"); 
```

# php - PHP - 使用 MySQL 的好友添加系统

> ID：10628102
> 
> 赞同：0
> 
> 时间：2012-05-16T23:29:11.243
> 
> 标签：php, mysql

我正在用 PHP 和 MySQL 创建一个伙伴系统，但我有点困惑。我有一张名为“buddies”的表，有三列；用户 1，用户 2，待处理。用户 1 将是两个好友之一，用户 2 将是另一个好友。“待定”将是“真”或“假”。

然后我需要在网页上显示用户。如何选择唯一不是他们自己的用户的列（user1 或 user2）。我目前的代码是

`$sql="SELECT * FROM buddies WHERE user1='$username' OR user2='$username' AND pending='1'";`

`$query = mysql_query($sql);`

显然，它还会显示用户自己的用户以及好友。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:35:37.847

您可以使用联合：

```
SELECT user1 from buddies WHERE user2 = '$username' UNION SELECT user2 FROM buddies WHERE user1 = '$username' 
```

这将从他们自己的用户在 user2 中的所有记录中选择 user1，反之亦然并连接列表。

（注意：您可能需要仔细检查确切的语法，我已经有一段时间没有使用 UNION 关键字了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:39:14.903

当你在 PHP 中循环遍历你的结果（显示好友）时，只显示不等于 $username 的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T00:22:57.840

像这样使用 MySQL 的 'if' 函数怎么样：

```
SELECT IF(user1 = '$username', user2, user1) AS buddy
FROM buddies
WHERE user1 = '$username' OR user2 = '$username' 
```

然后，如果您想获取这些伙伴的其他用户数据（大概，您有​​一个包含更多详细信息的 users 表），您可以像这样获取它：

```
SELECT u.*
FROM (
    SELECT IF(user1 = '$username', user2, user1) AS buddy
    FROM buddies
    WHERE user1 = '$username' OR user2 = '$username'
) AS b
LEFT JOIN users AS u
    ON b.buddy = u.username 
```

# javascript - 如何在 for 循环中放置 javascript 时间延迟？

> ID：10628106
> 
> 赞同：0
> 
> 时间：2012-05-16T23:29:40.557
> 
> 标签：javascript, html, animation, html5-canvas

我正在使用 Javascript 和 HTML5 CAnvas 制作动画。如何在 for 循环中实现延迟（非阻塞）？我想确保在延迟结束之前不会绘制第二条线。

```
for (i=1;i<coor.length;i++)

        {
            context.beginPath();
            var end_point=coor[i];
            var x1y1=start_point.split(',');
            var x2y2= end_point.split(',');

            context.moveTo(parseInt(x1y1[0]),parseInt(x1y1[1]));
            context.lineTo(parseInt(x2y2[0]),parseInt(x2y2[1]));
            context.stroke();

            start_point=end_point;

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:33:39.417

如果您使用 jQuery，请查看[.delay()](http://api.jquery.com/delay/) API。

```
el.delay(800).fadeIn(400); 
```

在 for 循环内，假设`el`是 for 循环外的一个 jQuery 对象。

否则，我只会使用`setTimeout(function(){ ... }, i * 100);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:34:29.280

如果您可以重构代码会更好：

```
function animate(position)
{
   // do stuff based on position

   if(position++ < 100){
       setTimeout(function(){animate(position);}, 100);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T23:38:02.420

此代码将创建 2 秒的延迟。

```
var i=0;    
setInterval(function () {
    context.beginPath();
                var end_point=coor[i];
                var x1y1=start_point.split(',');
                var x2y2= end_point.split(',');

                context.moveTo(parseInt(x1y1[0]),parseInt(x1y1[1]));
                context.lineTo(parseInt(x2y2[0]),parseInt(x2y2[1]));
                context.stroke();
                i++;
                start_point=end_point;

    }, 2000); 
```

通过此代码，您可以省略`FOR`循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T23:40:02.640

如果您正在寻找阻塞睡眠调用，JavaScript 没有对它的本机支持。

但是，如果您只是想以固定的时间间隔执行一段代码，则可以使用

*   [`[intervalHandle] setInterval(<callback>, <ms>)`](https://developer.mozilla.org/en/DOM/window.setInterval)
*   [`[void] clearInterval(<intervalHandle>)`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval).

`<callback>`可以是任何函数，匿名的或命名的。

如果你打算将它用于动画，你应该考虑[`requestAnimationFrame`](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame) 作为一个更好的选择

# applet - Nimbus JDK 6u27 小程序在 JRE 7u4 中运行时崩溃

> ID：10628108
> 
> 赞同：1
> 
> 时间：2012-05-16T23:29:47.917
> 
> 标签：applet, java, nimbus

我们有一个 Web 应用程序，它扩展了 Nimbus LaF 库，其中包含用于各种控件的自定义画家。该小程序是针对 JDK 6u27 构建的，并且针对 JRE 6.x 按预期运行，但是在针对 JRE 7u4 运行它时遇到了问题。

我们扩展`AbstractRegionPainter`了我们的自定义 Painter 类并尝试实例化 a `PaintContext`，这会导致抛出“class not found”异常。

我们意识到 Nimbus 已被移入`javax.swing`Java 7，并且`com.sun.java.swing.plaf.nimbus.AbstractRegionPainter`（我们导入的）现在 extends `javax.swing.plaf.nimbus.AbstractRegionPainter`，但是 Oracle 似乎没有为`PaintContext`内部类提供类似的重定向。小程序在调试日志中显示以下内容：

```
Exception in thread "AWT-EventQueue-2" java.lang.NoClassDefFoundError: com/sun/java/swing/plaf/nimbus/AbstractRegionPainter$PaintContext
...
Caused by: java.lang.ClassNotFoundException: com.sun.java.swing.plaf.nimbus.AbstractRegionPainter$PaintContext
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source) 
```

由于任何扩展的类都`AbstractRegionPainter`必须提供`PaintContext`，这似乎是 JRE7u4 中的向后兼容性错误，但如果有人对我们如何修复/解决此问题有任何想法，将不胜感激。

# mysql - 如何使用 ActiveRecord 在 Rails 中编写正确的 MySQL 子查询？

> ID：10628116
> 
> 赞同：1
> 
> 时间：2012-05-16T23:31:02.183
> 
> 标签：mysql, ruby-on-rails, subquery

我不确定我的问题是我写错了 MySQL，还是我错误地使用了 ActiveRecord 的子查询。

这是背景：
历史就是一张桌子。历史记录有“id”、“user_id”、“state”和“created_at”。一个用户在历史上可能不止一次拥有相同的状态。

这就是我想要提取的内容：
对于给定的一天，找到第一次取消订阅的用户。

这是我最初写的不准确的查询：

```
History.select('distinct user_id').where(state: 'unsubscribed').where('date(created_at) = ?', Date.today).all 
```

这给了我今天退订的人数，但不是今天第一次退订的人数。如果有人在 30 天前退订并在今天再次退订，他们将在这组结果中。

我知道如何通过执行两个查询和一些数组减法来使用 Ruby 找到结果集。我的问题是，如何使用 1 个查询/子查询提取这些结果。这是我的尝试，但没有奏效：

```
sub_query = "(SELECT MIN(h.created_at) FROM history AS h WHERE h.state = 'unsubscribed' AND h.user_id = history.user_id)"
History.where('date(created_at) = ?', Date.today).where("history.user_id IN (#{sub_query})").all 
```

这甚至接近正确的方法吗？我应该做一个子选择吗？我应该只用纯 SQL 编写查询然后使用 ActiveRecord::Base.connection.execute() 吗？任何帮助都会有所帮助，非常感谢。

# ruby-on-rails - 为什么在运行测试之前我的测试数据库没有被截断？

> ID：10628119
> 
> 赞同：1
> 
> 时间：2012-05-16T23:31:36.803
> 
> 标签：ruby-on-rails, cucumber, mongoid

我正在黄瓜中运行测试，并且希望数据库对于我正在运行的测试是空的。我已经配置了执行此操作的设置，但是运行测试时数据存在。我究竟做错了什么？我也在使用 mongoid 并且正在使用 MongoDB。

功能/支持/env.rb：

```
require 'cucumber/rails'

Capybara.default_selector = :css
Dir[(Rails.root + "spec/factories/**/*.rb").to_s].each {|factory| require factory}
ActionController::Base.allow_rescue = false

begin
  DatabaseCleaner.strategy = :truncation
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end

Cucumber::Rails::Database.javascript_strategy = :truncation

if defined?(ActiveRecord::Base)
  begin
    require 'database_cleaner'
    DatabaseCleaner.strategy = :truncation
  rescue LoadError => ignore_if_database_cleaner_not_present
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:23:09.337

您实际上并没有在任何时候清理数据库。您有 Database Cleaner，但没有调用 clean 方法。

在 env.rb 中试试这个

```
Before do
  DatabaseCleaner.start
end

After do
  DatabaseCleaner.clean
end 
```

# r - 未找到 R 变量，但已明确定义

> ID：10628124
> 
> 赞同：2
> 
> 时间：2012-05-16T23:32:09.823
> 
> 标签：r, function

我已经编写了一个函数来运行系统发育广义最小二乘法，一切看起来都应该可以正常工作，但由于某种原因，脚本中定义的特定变量 (W) 不断出现未定义。我盯着这段代码看了好几个小时，无法弄清楚问题出在哪里。

有任何想法吗？

```
myou <- function(alpha, datax, datay, tree){
    data.frame(datax[tree$tip.label,],datay[tree$tip.label,],row.names=tree$tip.label)->dat
    colnames(dat)<-c("Trait1","Trait2")
    W<-diag(vcv.phylo(tree)) # Weights
    fm <- gls(Trait1 ~ Trait2, data=dat, correlation = corMartins(alpha, tree, fixed = TRUE),weights = ~ W,method = "REML")
    return(as.numeric(fm$logLik))
}

corMartins2<-function(datax, datay, tree){
    data.frame(datax[tree$tip.label,],datay[tree$tip.label,],row.names=tree$tip.label)->dat
    colnames(dat)<-c("Trait1","Trait2")
    result <- optimize(f = myou, interval = c(0, 4), datax=datax,datay=datay, tree = tree, maximum = TRUE)
    W<-diag(vcv.phylo(tree)) # Weights
    fm <- gls(Trait1 ~ Trait2, data = dat, correlation = corMartins(result$maximum, tree, fixed =T),weights = ~ W,method = "REML")
    list(fm, result$maximum)}

#test

require(nlme)
require(phytools)
simtree<-rcoal(50)
as.data.frame(fastBM(simtree))->dat1
as.data.frame(fastBM(simtree))->dat2

corMartins2(dat1,dat2,tree=simtree) 
```

返回“评估错误（expr，envir，enclos）：找不到对象'W'”

即使 W 是明确定义的！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T23:50:19.383

错误发生在`gls`调用`myou`和中`corMatrins2`：您必须`W`作为一列传入，`dat`因为`gls`正在那里寻找它（当您`weights = ~W`输入像它寻找`dat$W`但找不到的公式时）。

只需在这两个功能中更改`data=dat`为`data=cbind(dat,W=W)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T23:52:32.353

该示例对我来说是不可重现的，因为`lowerB`并且`upperB`没有定义，但是，也许以下内容对您`cbinding` `dat`有用`W`：

```
myou <- function(alpha, datax, datay, tree){
    data.frame(datax[tree$tip.label,],datay[tree$tip.label,],row.names=tree$tip.label)->dat
    colnames(dat)<-c("Trait1","Trait2")
    W<-diag(vcv.phylo(tree)) # Weights
            ### cbind W to dat
            dat <- cbind(dat, W = W)
    fm <- gls(Trait1 ~ Trait2, data=dat, correlation = corMartins(alpha, tree, fixed = TRUE),weights = ~ W,method = "REML")
    return(as.numeric(fm$logLik))
}

corMartins2<-function(datax, datay, tree){
    data.frame(datax[tree$tip.label,],datay[tree$tip.label,],row.names=tree$tip.label)->dat
    colnames(dat)<-c("Trait1","Trait2")
    result <- optimize(f = myou, interval = c(lowerB, upperB), datax=datax,datay=datay, tree = tree, maximum = TRUE)
    W<-diag(vcv.phylo(tree)) # Weights
    ### cbind W to dat
    dat <- cbind(dat, W = W)
    fm <- gls(Trait1 ~ Trait2, data = dat, correlation = corMartins(result$maximum, tree, fixed =T),weights = ~ W,method = "REML")
    list(fm, result$maximum)}

#test
require(phytools)
simtree<-rcoal(50)
as.data.frame(fastBM(simtree))->dat1
as.data.frame(fastBM(simtree))->dat2

corMartins2(dat1,dat2,tree=simtree) 
```

# php - PHP 管理员批准用户注册

> ID：10628133
> 
> 赞同：1
> 
> 时间：2012-05-16T23:33:25.703
> 
> 标签：php, mysql, administration, user-accounts

我一直在寻找一个简单的 php/mysql 解决方案，让用户注册一个帐户 - 在他们登录之前向管理员发送一个请求以获得批准。这可能吗，如果可以，它是否简单？

一直在寻找教程和以前的问题，但仍然一无所获！它成功注册，但我无法弄清楚向管理员电子邮件发送请求......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:38:45.140

`is_approved`您可以通过在用户表中添加一列来轻松实现它。

当用户注册时，您将此字段`false`默认设置为。

向管理员发送有关新注册的电子邮件并批准用户只需更改`is_approved`为`true`.

当然，您应该在用户尝试登录时检查此值，如果为假则拒绝访问。

一个很好的资源是[sfGuard](http://trac.symfony-project.org/browser/plugins/sfDoctrineGuardPlugin/trunk)包，它的代码完全符合您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-28T23:36:54.300

您可以在 users 表中添加 BOOLEAN 列，`user_approved`并将其默认设置为 0。

当新用户注册时，使用 PHP 邮件功能向管理员发送电子邮件请求批准：

```
 $to = 'admin@yourwebsite.com';
    $subject = 'User needs approval';
    $message = 'The user {username} needs your approval' .
    '----------------------------------- ' . "\r\n" .
    'Accept: ' . $accept_link . "\r\n" .
    'Decline: ' . $decline_link . "\r\n";

    $_headers = 'From:admin@yourwebsite.com' . "\r\n"; // Set FROM headers
    mail($to, $subject, $message, $headers); // Send the email 
```

和可以使用**PHP 哈希函数**`accept_link`生成`decline_link`

 **例如，您可以使用 SHA512 哈希：

```
$accept_link = "yourwebsite.com/approval.php?e=" . $email . "&h=" . hash('sha512', 'ACCEPT');

$decline_link = "yourwebsite.com/approval.php?e="  . $email . "&h=" . hash('sha512', 'DECLINE'); 
```

在 PHP 脚本`approval.php`中，您可以简单地检查**获取**变量并检查管理员是否想要接受或拒绝注册请求。

```
$hash = $_GET['h'];
$email = $_GET['e'];

if($hash == hash('sha512', 'ACCEPT')){

  //ACCESS MYSQL DATABASE
  //FIND THE USER AND SET user_approved = 1
  //WHERE email = $email

}else if($hash == hash('sha512', 'DECLINE')){

  //MAIL THE USER NOTIFYING THAT THE ACCOUNT HAS NOT BEEN APPROVED

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:38:33.707

如果你想给管理员发邮件，PHP 有 mail() 函数： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

```
#given $email, $user
$mail_success = mail("admin@mysite.net","User Registration awating approval","User ".$user." has registered and is on the waiting list.\n User's email: ".$email);
if(!$mail_success) { echo "Warning: Mail delivery failed"; } 
```

请注意，mail() 函数对于发送多封电子邮件根本没有效率。**

# c - *ptr++ 的 C 到 Perl 的转换

> ID：10628134
> 
> 赞同：0
> 
> 时间：2012-05-16T23:33:26.090
> 
> 标签：c, perl

我有一个指向数组的指针，要么需要大量更改代码以使其工作，要么只需弄清楚下面语句的等价物是什么......

```
ptr = array;
*ptr++ = value; 
```

到目前为止，我拥有大部分

```
$ptr = \@array;
$$ptr = $value; 
```

但这不会增加指针。我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T23:35:49.530

Perl 中没有指针。你所拥有的是：

```
my $ary_ref = \@array; 
```

`$ary_ref`现在是对`@array`. 您不能取消引用`$ary_ref`以获得标量。

但是，您可以通过`@array`多种方式迭代 的元素。例如，如果你愿意，你可以这样做：

```
#!/usr/bin/env perl

use strict; use warnings;

my @array;

my $ptr = sub {
    my ($i, $ref, $val, $size) = (0, @_);
    sub { $i < $size ? $ref->[$i ++ ] = $val : () }
}->(\@array, deadbeaf => 10);

1 while defined $ptr->();

use YAML;
print Dump \@array; 
```

顺便说一句，你没有理由不写

```
p[i] = value;
i++; 
```

在 C 中。在 Perl 中，它可能变成：

```
$array[$_] = $value for 0 .. $#array; 
```

或者，

```
@array = ($value) x @array; 
```

或者，

```
$_ = value for @array; 
```

等等。您应该解释总体目标是什么，而不是询问 C 中的特定语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:47:16.970

C 代码修改了数组的第一个元素，`array`并且可能会更改数组其余部分的至少一部分。

```
#include <stdio.h>

int main(void)
{
  int array[] = { 0, 0, 0, 0, 0 };
  int value = 42;
  int *ptr;
  int i;

  ptr = array;
  *ptr++ = value;

  for (i = 0; i < sizeof(array) / sizeof(array[0]); i++)
    printf("%d ", array[i]);
  puts("\n");

  return 0;
} 
```

输出：

```
42 0 0 0 0
```

Perl 有引用而不是指针。引用不能为空，但没有引用算术。

在 Perl 中修改数组的第一个元素看起来像

```
$ perl -wle '@a=(0)x5; $a[0] = 42; print "@a"'
42 0 0 0 0 
```

或过于字面意思

```
$ perl -wle '@a=(0)x5; $ptr = \$a[0]; $$ptr = 42; print "@a"'
42 0 0 0 0 
```

您的问题提供了 C 代码的单个簿记详细信息。更广泛的背景是什么？C代码在做什么？

一般来说，不要在 Perl 中编写 C。从广义上看，C 代码倾向于一次处理一个数组，但 Perl 修改了整个概念块，*例如*，使用字符串的正则表达式[`map`](http://perldoc.perl.org/functions/map.html)或[`grep`](http://perldoc.perl.org/functions/grep.html)转换整个数组。

# c# - 从 ASP.NET 页面下载 EXCEL 文件，而不在服务器上生成物理文件（即时）

> ID：10628136
> 
> 赞同：7
> 
> 时间：2012-05-16T23:33:48.183
> 
> 标签：c#, asp.net, openxml, office-interop, openxml-sdk

我正在尝试使用 Microsoft Office EXCEL INTEROP 将 C# DataTable 动态导出到 EXCEL 文件（不创建物理文件），并通过 Response 对象通过 asp.net 网页下载它。我可以使用库生成内存流但是不知何故，文件没有通过内存流保存。参考代码如下。您将需要参考 DocumentFormat.OpenXml.dll 和 WindowsBase.DLL（您可以从微软网站下载）。

任何想法如何解决这个问题？? ?

```
Private void DownloadFile()
{
                DataSet objTable = ReadTableFromViewstate();
            if (objTable != null && objTable.Rows.Count > 0)
            {

                string strDownloadableFilename = "TestExcelFileName.xls";
                MemoryStream fs1 = new MemoryStream();
                if (CreateExcelFile.CreateExcelDocument(objTable, fs1))
                {
                    Response.Clear();
                        byte[] data1 = new byte[fs1.Length];
                        fs1.Read(data1, 0, data1.Length);
                        fs1.Close();

                    Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                    Response.AddHeader("Content-Disposition", string.Format("attachment; filename={0}", strDownloadableFilename));
                    Response.BinaryWrite(data1); ;
                   Response.End();

                }
                else
                {
                    LblErrorMessage.Text = "Error Exporting File.";
                }
            }

        } 
```

..

```
public static bool CreateExcelDocument(DataSet ds, System.IO.Stream excelFileStream)
    {
        try
        {
            using (SpreadsheetDocument document = SpreadsheetDocument.Create(excelFileStream, SpreadsheetDocumentType.Workbook))
            {
                CreateParts(ds, document);
            }

            Trace.WriteLine("Successfully created: " + excelFileStream);
            return true;
        }
        catch (Exception ex)
        {
            Trace.WriteLine("Failed, exception thrown: " + ex.Message);
            return false;
        }
    }
..

private static void CreateParts(DataSet ds, SpreadsheetDocument document)
        {
            WorkbookPart workbookPart = document.AddWorkbookPart();
            Workbook workbook = new Workbook();
            workbookPart.Workbook = workbook;

            //  If we don't add a "WorkbookStylesPart", OLEDB will refuse to connect to this .xlsx file !

                WorkbookStylesPart workbookStylesPart = workbookPart.AddNewPart<WorkbookStylesPart>("rIdStyles");
            Stylesheet stylesheet = new Stylesheet();

            workbookStylesPart.Stylesheet = stylesheet;

            Sheets sheets = new Sheets();

            //  Loop through each of the DataTables in our DataSet, and create a new Excel Worksheet for each.
        uint worksheetNumber = 1;
        foreach (DataTable dt in ds.Tables)
        {
            //  For each worksheet you want to create
            string workSheetID = "rId" + worksheetNumber.ToString();
            string worksheetName = dt.TableName;

            WorksheetPart worksheetPart = workbookPart.AddNewPart<WorksheetPart>(workSheetID);
            WriteDataTableToExcelWorksheet(dt, worksheetPart);

            Sheet sheet = new Sheet() { Name = worksheetName, SheetId = (UInt32Value)worksheetNumber, Id = workSheetID };
            sheets.Append(sheet);

            worksheetNumber++;
        }

        workbook.Append(sheets);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T02:26:10.423

感谢所有人，终于解决了我的问题。我刚刚替换了以下代码行：

```
 byte[] data1 = new byte[fs1.Length];
                    fs1.Read(data1, 0, data1.Length);
                    fs1.Close(); 
```

用这条线

```
 byte[] data1 = fs1.ToArray(); 
```

我的问题得到了解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:39:51.860

在完成对内存流的写入后，您需要在读取之前将指针设置回其原点。

```
fs1.Seek(0, SeekOrigin.Begin); 
```

# c# - 哈希密码算法和程序的实际运行

> ID：10628138
> 
> 赞同：0
> 
> 时间：2012-05-16T23:34:01.520
> 
> 标签：c#, mysql

我是 C# 编程的新手，并尝试使用 C# 和 MySQL 数据库在 WPF 中创建登录表单。当我运行我的 WPF 并尝试插入数据时，我在这一行遇到错误：

```
using (var cmd = new MySqlCommand("Select salt From niki where user_name = @username"))
{
    cmd.Parameters.AddWithValue("@username", username);
    salt = cmd.ExecuteScalar() as string;
} 
```

错误是连接必须有效且打开。你知道问题出在哪里吗？

伙计们，这是我只是用虚幻替换敏感数据字段的整个代码，虽然我改变了东西，但我仍然得到错误。你能确定问题出在哪里吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using MySql.Data.MySqlClient;
using System.Security.Cryptography;
using System.Security.Authentication;
using System.Security.Permissions;
using System.Security.AccessControl;
using System.Security.Policy;
using System.Security.Principal;
using System.Security.Util;

namespace ECBSRecruitmentAgencySoftware
{
    public partial class LogIn : Form
    {

        public LogIn()
        {

            InitializeComponent();

        }

    static byte[] GenerateSaltedHash(string plainText, string salt)
    {
       HashAlgorithm algorithm = new SHA256Managed();

       byte[] plainTextBytes = System.Text.Encoding.Unicode.GetBytes(plainText);
       byte[] saltBytes = Convert.FromBase64String(salt);

       byte[] plainTextWithSaltBytes = new byte[plainTextBytes.Length + saltBytes.Length];
       saltBytes.CopyTo(plainTextWithSaltBytes, 0);
       plainTextBytes.CopyTo(plainTextWithSaltBytes, salt.Length); 

       byte[] hash = algorithm.ComputeHash(plainTextWithSaltBytes);

       return hash;
    }

        public bool tryLogin(string username , string password)
        {
             using (var con = new MySqlConnection("host=tara.rdb.superhosting.bg;user=sozopouk;password=27051996;database=sozopouk_test2;"))
             {
                 con.Open();

                 var salt = string.Empty;

                 using (var cmd = new MySqlCommand("Select salt From niki where user_name = @username"))
                 {
                     cmd.Parameters.AddWithValue("@username", username);

                     salt = cmd.ExecuteScalar() as string;
                 }

                 if (string.IsNullOrEmpty(salt)) return false;

                 var hashedPassword = GenerateSaltedHash(password, salt);

                 using (var cmd = new MySqlCommand("Select * FROM niki WHERE user_name = @username and user_password = @password"))
                 {
                    cmd.Parameters.AddWithValue("@username", username);
                    cmd.Parameters.AddWithValue("@password", hashedPassword);

                    using (var reader = cmd.ExecuteReader())
                    {
                         return reader.Read();
                    }
                 }
             }
        }

        private void button1_Click(object sender, EventArgs e)
        {
             if (tryLogin(user.Text, pass.Text) == true)
            {
                MainScreen F2 = new MainScreen();
                F2.Show();
                this.Hide();
            }

             else MessageBox.Show("Wrong details!");

        }        
        }

} 
```

你的意思是我必须更新：

```
 using (var con = new MySqlConnection("host=tara.rdb.superhosting.bg;user=sozopouk;password=27051996;database=sozopouk_test2;"))
                 {
                     con.Open();

                     var salt = string.Empty;

                     using (var cmd = new MySqlCommand("Select salt From niki where user_name = @username"))
                     {
                         cmd.Parameters.AddWithValue("@username", username);

                         salt = cmd.ExecuteScalar() as string;
                     }
enter code here
enter code here 
```

使用您生成的代码？如果是，我实际上如何连接到我的 MySQL 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:40:18.610

好吧，在尝试读取或写入数据库之前，您应该打开一个连接，然后发出命令。

```
using (MySqlConnection cn = GetConnection())
{
    cn.Open();
    // create the command and link it to the connection
    using (var cmd = new MySqlCommand("Select salt From niki where user_name = @username", cn)) 
    { 
        cmd.Parameters.AddWithValue("@username", username); 
        salt = cmd.ExecuteScalar() as string; 
    }
} 

public MySqlConnection GetConnection()
{
     MySqlConnection cn = new MySqlConnection("Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;");
     return cn;
} 
```

编辑：拼图的缺失部分在这里：

`MySqlCommand cmd = MySqlCommand("your_query_text", cn)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:40:25.330

你有联系吗？尝试类似的东西

```
 using (MySqlConnection connection = new MySqlConnection(connectionString))
        {
            connection.Open();
            using (MySqlCommand command = new MySqlCommand("Select salt From niki where user_name = @username", connection))
            {
                command.CommandType = CommandType.Text;
                command.Parameters.AddWithValue("@username", username);
                salt = cmd.ExecuteScalar() as string;
            }                
        } 
```

**使用您未使用连接的更新帖子进行编辑**，您需要在 MySqlCommand 的构造函数中

```
using (MySqlCommand command = new MySqlCommand(Command, Connection))
{
} 
```

或者类似的东西

```
command.Connection = connection; 
```

**编辑 2**如果你用下面的代码替换你的数据库代码你还有问题吗？

```
 using (var con = new MySqlConnection("host=tara.rdb.superhosting.bg;user=sozopouk;password=27051996;database=sozopouk_test2;"))
             {
                 con.Open();

                 var salt = string.Empty;

                 using (var cmd = new MySqlCommand("Select salt From niki where user_name = @username", con))
                 {
                     cmd.Parameters.AddWithValue("@username", username);

                     salt = cmd.ExecuteScalar() as string;
                 }

                 if (string.IsNullOrEmpty(salt)) return false;

                 var hashedPassword = GenerateSaltedHash(password, salt);

                 using (var cmd = new MySqlCommand("Select * FROM niki WHERE user_name = @username and user_password = @password", con))
                 {
                    cmd.Parameters.AddWithValue("@username", username);
                    cmd.Parameters.AddWithValue("@password", hashedPassword);

                    using (var reader = cmd.ExecuteReader())
                    {
                         return reader.Read();
                    }
                 }
             } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:40:58.710

这里有几个问题。

首先是您似乎没有实际实例化 MySqlConnection 对象，这是建立连接所必需的。

看：http: [//zetcode.com/db/mysqlcsharptutorial/](http://zetcode.com/db/mysqlcsharptutorial/)

有关如何在 C# 中使用 MySql 的一些信息

# php - Zend 框架；检查控制器是否存在

> ID：10628139
> 
> 赞同：3
> 
> 时间：2012-05-16T23:34:06.303
> 
> 标签：php, zend-framework

我在谷歌上搜索，我得到了这个代码来检查控制器是否存在。

```
$front = Zend_Controller_Front::getInstance();
if ($front->getDispatcher()->isDispatchable($request)) {
    // Controller exists
} 
```

但我不知道我应该把这段代码放在哪里。是什么`$request`？
我在*Boostrap.php*。我有`_initRoute`，我需要检查控制器是否不存在，如果不存在，那么我将添加一条新路由。

* * *

第一次回答后更新。我在 Boostrap.php 中有一些路线

```
public function _initRoute() {

    $front = Zend_Controller_Front::getInstance();
    $router = $front->getRouter();
    $router->addRoute(
        'username',
        new Zend_Controller_Router_Route(':username',
            array('controller'=>'profile',
                  'action'=>'index')
        )
    );

    $router->addRoute(
        'username/sets',
        new Zend_Controller_Router_Route(':username/sets',
            array('controller'=>'profile',
                  'action'=>'sets')
        )
    );

} 
```

此路由将使 mydomain.com/{username} 显示与 mydomain.com/profile/index/username/{username} 相同的内容

但问题是，当我输入 mydomain.com/{anything or any controller} 时，它会按照我在 Boostrap 上定义的方式进行路由。所以，我认为，我需要检查控制器是否存在，如果不存在则执行路由。

我错了吗？在第一次回答后，我添加了插件，并将其放在 _initPlugin 下进行注册。但看起来它不起作用。

## 这是我的 boostrap 文件：

```
<?php

//Zend_View_Helper_PaginationControl::setDefaultViewPartial('paginator.phtml');

class Plugin_MyX extends Zend_Controller_Plugin_Abstract {
    public function routeStartup(Zend_Controller_Request_Abstract $request) {
        $front = Zend_Controller_Front::getInstance();
        $dispatcher = $front->getDispatcher();

        if (!$dispatcher->isDispatchable($request)) {

            $front = Zend_Controller_Front::getInstance();
            $router = $front->getRouter();
            $router->addRoute(
                'username',
                new Zend_Controller_Router_Route(':username',
                    array('controller'=>'profile',
                          'action'=>'index')
                )
            );

            $router->addRoute(
                'username/sets',
                new Zend_Controller_Router_Route(':username/sets',
                    array('controller'=>'profile',
                          'action'=>'sets')
                )
            );

        } else {
            // exist
        }

    }

}

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

    protected function _initPlugin() {
        $front = Zend_Controller_Front::getInstance();
        $front->registerPlugin(new Plugin_MyX());
    }

    public function _initRoute() {

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T00:13:33.093

您应该将该代码放在[控制器插件](http://framework.zend.com/manual/en/zend.controller.plugins.html)中，因为请求对象在引导时尚不存在。

有问题的`$request`变量是 的对象`Zend_Controller_Request_Http`。该对象最初是在前端控制器发送请求时创建的。

您可以注册一个`routeStartup`插件并将代码放在那里。那将是您可以使用 Request 对象的最早时间点。所有控制器插件链都会将请求对象传递给您的插件，除了`dispatchLoopShutdown()`.

这是示例插件代码：

```
class Application_Plugin_Example
{
    public function routeStartup(Zend_Controller_Request_Abstract $request)
    {
        $front = Zend_Controller_Front::getInstance();
        if ($front->getDispatcher()->isDispatchable($request)) {
            // Controller exists
        }
    }
} 
```

如果您试图只处理 404 错误，这就是[ErrorHandler 插件](http://framework.zend.com/manual/en/zend.controller.plugins.html#zend.controller.plugins.standard.errorhandler)可用于此目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:30:27.093

您应该将路线从最具体到不太具体。还要考虑在 URL 中是否不能有任何其他选项 - 例如 /u/ *:username*或 /user/:username，这可以解决问题；)

还为每个控制器定义每一端的路线将解决它 - 创建：

```
/controller-name/
/profile-controller-name/
... with
/:username
at the end of the list 
```

这样任何控制器都可以更早地匹配并且可以工作。只有未列出的控制器才会“通过” :username 路由。

# html - 放入 水平 打破它？

> ID：10628144
> 
> 赞同：2
> 
> 时间：2012-05-16T23:35:36.957
> 
> 标签：html, css, layout

这是`<ul>`我正在使用的水平代码：

```
.list ul{
    width: 100%;
}

.list li{
    display: inline;
    list-style-type: none;
    padding-right: 20px;
    padding-bottom: 20px;
} 
```

使用这个，如果我这样做：

```
<ul class="list">
    <li>
       <img src="myImg.png" />
       <span class="edit"></span>
       <span class="delete"></span>
    </li>
</ul> 
```

然后一切正常，但是如果我`<br>`在图像和编辑/删除按钮之间放置一个，例如：

```
<ul class="list">
    <li>
       <img src="myImg.png" />
       <br />
       <span class="edit"></span>
       <span class="delete"></span>
    </li>
</ul> 
```

然后列表中断，我在垂直列表中而不是水平列表中获取图像。工作时的截图：

![在职的](../Images/3fedc3b736a293d53f06637f3b4277a5.png)

不工作时的屏幕截图：

![不工作](../Images/7acf0e9bd275c22ebb8271f667559ce1.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:49:11.567

`display:inline-block`解决方案是在您的元素上使用：`li`然后允许所有其他标记在您的列表内外正常运行。

[inline-block：元素被放置为内联元素（与相邻内容在同一行），但它表现为块元素](http://www.w3schools.com/cssref/pr_class_display.asp)

这是一个显示示例的[jsfiddle 。](http://jsfiddle.net/AdQEy/2)

上面的 jsfiddle 现在被编辑以支持旧的 IE7 与现代浏览器一起工作。.css 的顺序`display`很重要。要加入对 IE6 的支持，还需要`_height: 30px;`在哪里添加所需的高度。`30`但是[IE6浏览器](http://www.w3schools.com/browsers/browsers_explorer.asp)的使用率不到1%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T00:12:23.777

更换

`display: inline`

和

`float: left`

[示例小提琴](http://jsfiddle.net/Cajy7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T00:09:36.737

尝试使用 for .list li { float:left; } 而不是 { display:inline; 并且会工作。

# heroku - 更改密码后无法使用heroku gem cli

> ID：10628149
> 
> 赞同：20
> 
> 时间：2012-05-16T23:36:23.053
> 
> 标签：heroku, command-line-interface

我通过网络界面更改了密码。现在我无法运行任何需要身份验证的命令。密码使用纯 ASCII，没什么花哨的，没有 Unicode，奇怪的不可打印字符等。

任何人都有类似的经历以及您如何解决。

我什至如何开始调试呢？任何详细的 cli 选项，我可以查看的日志？

```
% sw_vers 
ProductName:    Mac OS X 
ProductVersion: 10.6.8 
BuildVersion:   10K549
% rvm --version
rvm 1.10.3 by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.beginrescueend.com/
% ruby --version 
ruby 1.9.3p125 (2012-02-16) [x86_64-darwin10.8.0] 
% gem --version 
1.8.17 
% heroku version 
2.25.0 
% cat ~/.netrc # is empty 
% heroku auth:login

Enter your Heroku credentials. 
Email: me@example.com
Password (typing will be hidden): 
Authentication failed. 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-27T22:31:29.447

更改密码后我遇到了同样的问题，我发现这是因为我正在使用[heroku-accounts](https://github.com/ddollar/heroku-accounts) gem 管理多个帐户。

我删除了 heroku-accounts 中的帐户设置，然后重新添加它，使用新凭据进行身份验证。然后事情开始像以前一样工作。

似乎存储在 heroku-accounts gem 中的身份验证详细信息会以某种方式覆盖您通过命令行应用的身份验证详细信息。无论如何，这对我有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T14:52:28.793

你也可以试试这个：

```
$ heroku accounts:remove your_app 
```

紧随其后的是

```
$ heroku accounts:add your_app 
```

输入您的电子邮件和新密码，您应该一切顺利。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-26T08:20:20.813

问题是由于`heroku accounts`@vaughanos 在他的回答中详细说明的。解决此问题的一种快速方法是。

检查您拥有的帐户

`heroku accounts`

> 帐户1
> 
> *帐户2

`*`表示当前项目使用的 heroku 帐户。这是您为使用 Web 界面完成密码更改的帐户。

更改您为此项目设置的默认帐户

要么改变它，`.git/config`要么做一个`heroku accounts:set account1`

现在做`heroku accounts:remove account2`

现在用`heroku accounts:add account2`. 输入您的电子邮件和新密码。一切都会为您准备好。

如果它提示您更新您的`~/.ssh/config`，请执行此操作，但很可能不需要更改。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-21T17:50:37.947

对于所有未来的错误——谷歌员工：

2013 年的问题已得到修复，但是，在您在网站上更改密码后，请使用以下命令：

`heroku login`

系统将提示您输入 Heroku 登录名和新密码。再见奇怪的“身份验证成功。身份验证失败。” 错误。

通过 Heroku 文档：[https://devcenter.heroku.com/articles/authentication](https://devcenter.heroku.com/articles/authentication)，大约在页面的一半。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T21:30:24.423

我在 Windows Vista 上遇到了同样的问题。

我在每个 heroku 命令上都收到授权失败消息，并且无法登录。

```
c:\Sites\jut>heroku login
 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

    Error:       Permission denied - C:/Users/myusername/_netrc (Errno::EACCES)
    Backtrace:   C:/Program Files/Heroku/vendor/gems/netrc-0.7.7/lib/netrc.rb:179:in `initialize'
                 C:/Program Files/Heroku/vendor/gems/netrc-0.7.7/lib/netrc.rb:179:in `open'
                 C:/Program Files/Heroku/vendor/gems/netrc-0.7.7/lib/netrc.rb:179:in `save'
                 C:/Program Files/Heroku/lib/heroku/auth.rb:94:in `delete_credentials'
                 C:/Program Files/Heroku/lib/heroku/auth.rb:40:in `login'
                 C:/Program Files/Heroku/lib/heroku/command/auth.rb:31:in `login'
                 C:/Program Files/Heroku/lib/heroku/command.rb:206:in `run'
                 C:/Program Files/Heroku/lib/heroku/cli.rb:28:in `start'
                 C:/Program Files/Heroku/bin/heroku:24:in `<main>'

    Command:     heroku login
    Version:     heroku/toolbelt/2.33.2 (i386-mingw32) ruby/1.9.2 
```

**我删除 `C:/Users/myusername/_netrc` 了存储密码的位置。**

之后我又能`heroku login`了，一切都很好！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-09T03:34:43.850

对我来说，按照此页面上的所有说明并从他们的网站卸载/重新安装 heroku toolbelt 就可以了。

# android - 动态获取活动名称 - android

> ID：10628152
> 
> 赞同：86
> 
> 时间：2012-05-16T23:36:53.143
> 
> 标签：android, android-activity, introspection

我想`Activity`在`HttpRequest`. 有没有办法做到这一点而不特别提到`Activity`？

我知道我可以做到`myActivity.class.toString()`，但这只是硬编码“myActivity”的一种效率较低的方式，因为我正在对我的`Activity`. 有没有一种更通用的方法可以使用“this”之类的东西（顺便说一句，它实际上在这里不起作用，因为它返回的信息比预期的要多）。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-05-16T23:40:56.253

用于`this.getClass().getSimpleName()`获取 Activity 的名称。

从评论中，如果您处于`OnClickListener`（或其他内部类）的上下文中，请手动指定该类：

`MainActivity.class.getSimpleName()`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-09-10T09:49:13.707

对于可能不想使用反射的纯粹主义者，另一种方法是使用`PackageManager`如下：

```
PackageManager packageManager = activity.getPackageManager();
try {
  ActivityInfo info = packageManager.getActivityInfo(activity.getComponentName(), 0);
  Log.e("app", "Activity name:" + info.name);
} catch (NameNotFoundException e) {
  e.printStackTrace();
} 
```

然而，这似乎需要做很多工作来做同样的事情`getClass().getName()`（甚至不是`getSimpleName()`）。但我想这对于想要更多关于活动信息而不仅仅是类名的人来说可能很有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-13T06:53:07.397

```
ActivityManager am = (ActivityManager)context.getSystemService(ACTIVITY_SERVICE);
List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1);
this.currentActivity = taskInfo.get(0).topActivity.getClassName();
Log.i( "CURRENT Activity ",  currentActivity); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-25T12:47:56.993

**第一：**打开你的`manifest.xml`文件

你会找到你的包名，即`"com.company.projectname"`

**然后：**假设您的活动名称是`MainActivity`

```
MainActivity.class.getCanonicalName() >output> "com.company.projectname.MainActivity" 
```

**或者**

```
MainActivity.class.getSimpleName() >output> "MainActivity" 
```

**或者**

```
MainActivity.class.getName() >output> "com.company.projectname.MainActivity" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-20T08:07:49.133

## **对于 Xamarin**

```
string GetActivityClassName(Activity activity) //Receiving LoginActivity
{
    //ComponentName
    activity.ComponentName; //Output: "md5101a0260d0a0e5d40a0a9009be09b0c2.LoginActivity"

    //LocalClassName
    activity.LocalClassName; //Output: "md5101a0260d0a0e5d40a0a9009be09b0c2.LoginActivity"

    //Java.Lang.Class.FromType.SimpleName
    Java.Lang.Class.FromType(activity.GetType()).SimpleName; //Output "LoginActivity"

    //Type.Name
    activity.GetType().Name; //Output "LoginActivity"
} 
```

# jquery - 照片和视频缩略图库

> ID：10628155
> 
> 赞同：0
> 
> 时间：2012-05-16T23:37:14.593
> 
> 标签：jquery, video, gallery, photos, thumbnails

我一直在为我的投资组合网站寻找一个简单的插件，这样我就可以包含我工作的照片和视频。

我目前在我的网站概念中实现了这一点；[简单的缩略图库](http://wayfarerweb.com/jquery/plugins/simplethumbs/)，但如果我想在其中添加视频，我不知道从哪里开始？即使有可能？我想要 5 个图像缩略图和 1 个视频缩略图，当您单击任何它们时，它们会出现在带有淡入淡出过渡的较大视口中。我不敢相信找到这样的东西是多么困难，肯定有人以前想要这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:32:45.490

我需要这样的东西。
对网络和 jsfiddle 进行了一些研究并修改并提出了这段代码。
[**工作演示**](http://jsfiddle.net/GsRxs/2/)

```
$(".fancybox").find("img").stop(true, true).animate({
            "opacity": 0.2
        }, "slow");

$(".fancybox").on("mouseenter", function () {
            $(this).find("img").stop(true, true).animate({
                "opacity": 1
            }, "slow");
}).on("mouseleave", function () {
        $(this).find("img").stop(true, true).animate({
            "opacity": 0.2
        }, "fast");
}).fancybox({
padding: 0,
openEffect: 'elastic',
openSpeed: 250,

closeEffect: 'elastic',
closeSpeed: 450,
closeClick: false,

helpers: {
    overlay: {
        css: {
            'background': 'rgba(0, 0, 0, 0.9)'
        }
    }
}
}); 
```

它正在使用花哨的盒子插件。
我知道我可能已经迟到了回复，但可能会帮助那里的人寻找相同的查询。

# php - 从我的 VB.net 应用程序上传到我的网站

> ID：10628159
> 
> 赞同：0
> 
> 时间：2012-05-16T23:37:43.583
> 
> 标签：php, vb.net, file-upload

我正在设计一个网站，我将从我的 VB.net 程序上传内容。我还设置了这些东西，以便您可以从其中一个页面上传内容：

```
 <form enctype="multipart/form-data" action="upload.php" method="post">
        <input type="hidden" name="MAX_FILE_SIZE" value="1000000" />
        Choose a file to upload: <input name="uploaded_file" type="file" />
        <input type="submit" value="Upload" />
    </form> 
```

有什么方法可以使用相同的方法上传，但使用我的 VB.net 程序？我正在使用 VB.net，所以所有 .net 示例和解决方案都是可以接受的 :)

**编辑：**

这是 upload.php 的副本：

```
<?php

        //Check that we have a file
        if((!empty($_FILES["uploaded_file"])) && ($_FILES['uploaded_file']['error'] == 0)) {
          //Check if the file is JPEG image and it's size is less than 350Kb
          $filename = basename($_FILES['uploaded_file']['name']);
          $ext = substr($filename, strrpos($filename, '.') + 1);
          if (($ext == "jpg") && ($_FILES["uploaded_file"]["type"] == "image/jpeg") && 
            ($_FILES["uploaded_file"]["size"] < 350000)) {
            //Determine the path to which we want to save this file
              $newname = dirname(__FILE__).'/uploads/'.$filename;
              //Check if the file with the same name is already exists on the server
              if (!file_exists($newname)) {
                //Attempt to move the uploaded file to it's new place
                if ((move_uploaded_file($_FILES['uploaded_file']['tmp_name'],$newname))) {
                   echo "It's done! The file has been saved as: ".$newname;
                } else {
                   echo "Error: A problem occurred during file upload!<br /><br /><a href='index.php'>Try Uploading Again</a>";
                }
              } else {
                 echo "Error: File ".$_FILES["uploaded_file"]["name"]." already exists!  That's our fault.  Please be patient while we fix it :)<br /><br /><a href='index.php'>Try Uploading Again</a>";
              }
          } else {
             echo "Error: Only .jpg images under 350Kb are accepted for upload<br /><br /><a href='index.php'>Try Uploading Something Smaller</a>";
          }
        } else {
         echo "Error: No file uploaded";
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:07:42.123

正如评论中所说，你需要`System.Net.WebClient`。您的问题可能是由于没有正确的标题引起的

```
.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)")
.Headers.Add(System.Net.HttpRequestHeader.ContentType, "application/x-www-form-urlencoded")
.Headers.Add(System.Net.HttpRequestHeader.ContentLanguage, "en-gb") 
```

或者没有正确处理cookies： [它可以完成！：WebClient：处理cookies](http://couldbedone.blogspot.com/2007/08/webclient-handling-cookies.html)

# c# - 由于输出窗口中的类型名称输出导致调试缓慢

> ID：10628163
> 
> 赞同：1
> 
> 时间：2012-05-16T23:37:56.827
> 
> 标签：c#, debugging, nhibernate, visual-studio-debugging

### 对于 tl;dr 人群：

1.  如果代码中不是 Console.WriteLine 或 Debug.Print 语句，是什么导致类型名称写入输出窗口？它是 Visual Studio 调试器吗？和
2.  我怎样才能关闭它？

### 背景和细节：

我正在尝试调试将 CSV 文件导入数据库的程序。最近，我更改了包含 3rd 方库依赖项的方式。以前，我引用的是下载的二进制文件。现在，如果第 3 方库有可用的源代码，例如 NHibernate，该项目将包含在我的解决方案中，以便与我自己编写的项目一起编译。

自更改以来，我在“输出/调试”窗口中看到很多单行，其中仅包含我以前没有看到的类型名称。我的程序是一个数据导入器，主循环导致这些行出现 1000 次，减慢调试速度并污染输出窗口。具体来说，有很多行是这样说的：

```
NHibernate.Driver.NHybridDataReader 
```

我已经跟踪了代码，似乎每当 NHibernate 从数据库中读取结果时都会显示此代码。但是，该行不是 NHibernate 库在代码中输出的，因此它必须来自其他地方。我的猜测是 Visual Studio 调试器正在将其写入输出窗口，类似于程序集绑定期间发生的情况。

我尝试在发布模式下编译 NHibernate 项目，在调试模式下编译其他所有项目，但这并没有解决问题。我还尝试为 NHibernate 项目取消选中“启用 Visual Studio 托管进程”，但这也不起作用。

**总之，**我的问题是：

1.  如果代码中不是 Console.WriteLine 或 Debug.Print 语句，那么将类型名称写入输出窗口是什么？和
2.  我怎样才能关闭它？

### 我的问题*不是什么*

我的问题不是关于编写数据导入程序的更好方法，以便从数据库中预加载所需的数据。我知道我写的代码很慢；在这种特殊情况下，在生产中，没关系。我想要的是停止用大量不需要的类型信息污染调试窗口。我的程序的工作循环导致长 CSV 文件的类型被写入 1000 次，这使得输出难以使用，并且在尝试同步输出窗口时减慢了调试器的速度。*这*就是我想要阻止的。但我不知道该怎么做，因为我什至不确定消息来自哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T00:23:11.583

看不到代码就很难提出建议，但我要调试它是安装 RedGate 的 Reflector 的试用版，并使用它为 Debug.* 和 Console.* 函数添加断点。如果命中其中一个断点，您可以追溯调用堆栈以查找实际将行添加到输出的内容。如果这些方法都没有导致添加行，则可能向 DefaultTraceListener 和 TextWriter 添加断点。

我还没有遇到任何其他可以在运行时向 Visual Studio 输出窗口添加消息的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:43:52.307

我认为这无关紧要，尽管它解决了我不久前看似无关的问题（我的自动化测试随机失败并打印到控制台）。我不得不在选项的调试菜单下取消选中 Visual Studio 的“启用属性评估和其他隐式函数调用”。对不起，如果这是题外话/没有帮助！

编辑：另外，您是否尝试过更改“调试”部分中的“输出窗口”设置？您可以关闭所有调试输出并将您自己的调试打印到文件中。

# php - 将带有引号的空格的字符串解释为一个“项目”？

> ID：10628164
> 
> 赞同：0
> 
> 时间：2012-05-16T23:37:58.353
> 
> 标签：php, command-line-interface

我正在为我是管理员的网站制作一个 ajax 控制台，供其他管理员使用。

无论如何，我有一堆他们可以使用的命令，比如“getid someusername”，但是用户名中也可以有空格，比如“getid some other name”。我知道命令行 PHP 脚本在用引号括起来时使用带空格的参数。这个功能是否包含在 PHP 中，还是我需要自己编写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:04:09.153

如果参数包含空格，只需将其放在括号之间，并在您的代码中使用[trim()](http://php.net/trim) : `$username = trim($argument, '"');`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:13:12.500

> 这个功能是否包含在 PHP 中，还是我需要自己编写？

您总是可以轻松地自己测试它（请参阅 参考资料[`$argv`](http://php.net/manual/reserved.variables.argv.php)），但是据我所知，该功能包含在 PHP 中（或者更准确地说，使用 shell）。

# javascript - 在 Javascript 中解析 Python 日期时间字符串

> ID：10628169
> 
> 赞同：5
> 
> 时间：2012-05-16T23:38:38.947
> 
> 标签：javascript, python, date, date-parsing

我需要将 Python 生成的日期时间字符串解析为 Javascript 日期对象。我走的是最简单的路线：

**在 Python 中：**

```
dstring = str(mydate) 
```

例如 dstring = '2012-05-16 19:20:35.243710-04:00'

**在 Javascript 中（使用[datejs](http://www.datejs.com/)库）：**

```
d = new Date(dstring); 
```

这让我在 Chrome 中获得了正确的日期对象，但在 Firefox 和 Safari（在 Mac 上）中出现“无效日期”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:45:18.053

您需要将字符串解析为 JS 日期。构造`Date`函数是不够的。也许您应该考虑使用诸如 datejs 之类的库：

[http://www.datejs.com/](http://www.datejs.com/)

Datejs`Date`使用有用的方法扩展对象，例如：

```
Date.parse('Thu, 1 July 2004 22:30:00'); 
```

不用说日期/时间格式是可定制的。

# google-maps-api-3 - 选择另一个 KML 图层时信息窗口保持活动状态的问题 - Google Maps API V3

> ID：10628175
> 
> 赞同：2
> 
> 时间：2012-05-16T23:39:33.937
> 
> 标签：google-maps-api-3, kml, infowindow

我有多个使用勾选框加载到我的 Google Map API V3 中的 kml 图层。When two or more layers are selected the infowindows on one layer don't automatically collapse when markers are clicked on other layers. 我希望信息窗口自动关闭，即使它们位于不同的 KML 图层上 - 任何指向正确方向的指针都会有所帮助。

谢谢

达伦·威尔逊

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:30:18.313

You need to disable the default info window creation and handle the infowindow yourself in code. Here's an example:

```
var CommonInfoWindow = new google.maps.InfoWindow({"maxWidth": 500});

/** @param {...*} KmlMouseEvent */
function KmlLayerClicked(KmlMouseEvent) {
  var ClickData = /** @type {google.maps.KmlMouseEvent} */(KmlMouseEvent);

  CommonInfoWindow.close();

  if (ClickData.featureData && ClickData.featureData.id) {
    CommonInfoWindow.setOptions({ "position": ClickData.latLng,
        "pixelOffset": ClickData.pixelOffset,
        "content": ClickData.featureData.infoWindowHtml
    });
    CommonInfoWindow.open(map);
  }
}

/** @type {google.maps.KmlLayer} */
var KmlOverlay = new google.maps.KmlLayer(KmlUrl, {
    'preserveViewport': true,
    'suppressInfoWindows': true
});
google.maps.event.addListener(KmlOverlay, "click", KmlLayerClicked); 
```

# jquery - HTML 管理大型下拉菜单

> ID：10628176
> 
> 赞同：0
> 
> 时间：2012-05-16T23:39:36.810
> 
> 标签：jquery, html, css

我在一个页面上有 10 个下拉菜单，每个下拉菜单有大约 30 个项目。

这会占用大量代码行，甚至会稍微减少页面加载时间。

A. 有没有办法简化包含这些下拉菜单的代码量？

B. 有没有办法提高这个页面的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:52:34.107

您可以查看这个很酷的下拉菜单插件，它可以帮助您更好地构建代码， http: [//twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

如果你真的有一个**巨大**的菜单，你可以考虑把你的菜单项变成一个 javascript Array 或 Object，使用 javascript 函数来呈现菜单而不是纯 HTML 代码来节省页面大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:52:01.017

如果每个下拉菜单都有某种类型的数据，比如说动物或树木等，您可以创建一个数据库并将它们动态拉入下拉菜单。这比尝试一次手动加载它们要快一些。如果您喜欢我可以为您编写一些基本代码以帮助您入门，使用此方法将大大简化该过程并使其更加动态地添加新选项？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:44:56.493

您是否尝试将选择字段与 ajax 调用提供的自动完成输入字段交换？

这种方法有一些优点：

1.  更少的 HTML 代码

2.  更快的页面加载

3.  方便使用的

# python - python正则表达式模块

> ID：10628177
> 
> 赞同：-3
> 
> 时间：2012-05-16T23:39:54.270
> 
> 标签：python, regex

我必须逐行读取文本文件并提取每行的某些部分。如果我正在阅读的行是预期的格式，我有一个工作代码，但情况并非总是如此。文件中有错误，即缺少一些信息或字符。所以我想跳过这些错误的行。为此，我想利用`regular expression`模块。我定义了我需要的正则表达式。可以说，`reg_exp_string`将与我阅读的行相匹配。我想要一个完整的匹配，我不想搜索文本的某些部分。如果是完全匹配返回true，否则返回false。想法是，我试过了`re.match()`它返回一个对象。我想不通。正确的使用方法是什么？如果字符串的某些部分与正则表达式匹配，它总是返回一个对象。我只想要一个完整的匹配并得到一个布尔答案。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:42:24.147

匹配对象的文档[稍微往下一点](http://docs.python.org/library/re.html#match-objects)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:37:11.543

如[文档](http://docs.python.org/library/re.html#regular-expression-syntax)中所述，`$`匹配字符串的结尾。您可以修改正则表达式以包含`$`在末尾。例子：

```
match_this = "abc12a" #expression you would like to match
dont_match_this = "abc12a9" #expression that returns partial matches from re.match 
```

旧的正则表达式将同时匹配`match_this`and `dont_match_this`：

```
old_reg_expr = "[a-z]+\d[a-z]+" 
```

新的正则表达式包含`$`并且仅在字符串在表达式中匹配的最后一个元素之后结束时才返回匹配：

```
new_reg_expr = "[a-z]+\d[a-z]+$" 
```

或者，您可以保留旧的正则表达式不变，只检查匹配的结束位置是否等于字符串的结尾：

```
>>> m = re.match("[a-z]+\d[a-z]+", "abc12a9")
>>> m.end() == m.endpos
False 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T23:42:31.953

`re.match()`应该返回一个匹配对象，除非没有匹配，在这种情况下它返回`None`：

[http://docs.python.org/library/re.html#re.match](http://docs.python.org/library/re.html#re.match)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T23:44:09.790

如[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)中所述，如果找到匹配项，match() 将返回 MatchObject，否则返回 None。

所以，简单地说：

```
for line in ... :
    m = your_regexp.match(line)
    if m:
        process(line) 
```

# c# - 在自定义操作中安装 Windows 服务

> ID：10628182
> 
> 赞同：1
> 
> 时间：2012-05-16T23:40:29.620
> 
> 标签：c#, windows-services, windows-installer, custom-action

我创建了 ac# 4.0 windows 服务。我为它创建了一个安装程序项目 (.msi)，它将服务安装到特定文件夹。

为了完全自动化该过程，我想将该服务安装为我的安装程序的自定义操作的一部分。

如何编码我的自定义操作以安装或在卸载 msi 时卸载 Windows 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:52:54.607

您可以使用[ServiceInstaller](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceinstaller.aspx)类。一个快速的解决方案是找到工具并针对您的 Service.exe 执行它，但是您必须捕获输出以查看安装是否成功，并且您对、、和阶段`installutil`没有太多控制权。`Install``Commit``Rollback``Uninstall`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:56:12.793

简单的回答：不要。正确的方法是使用 MSI 数据库本身，即[`ServiceInstall`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371637.aspx)和[`ServiceControl`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371634.aspx)表来安装它。每个用于创建 MSI 的“方便”IDE 以及 WiX 都带有使用这个内置工具的原语。

这是**最佳实践**的原因，就像在您的 MSI 中包含 COM 注册而不是调用`DllRegisterServer`COM (DLL) 进行注册一样，您的应用程序*可能*在用户尝试删除它时已失效。

即使更新的 Windows 安装程序仍然可以执行数据库操作，例如在升级 Windows 本身之后，而您的代码可能会拒绝运行或由于其他原因可能无法运行。

# c++ - 从字节数组拼接出长/短的更好方法

> ID：10628184
> 
> 赞同：1
> 
> 时间：2012-05-16T23:40:48.463
> 
> 标签：c++, casting, short

所以我在这里基于字节数组构建shorts/longs，我想避免使用`memcpy`将字节复制到他们自己的变量中，然后将该变量分配给一个`sockaddr_in`对象。

有没有更好的方法来提取`short`以下语句中的内容？：

```
((sockaddr_in*)from)->sin_port = (*((unsigned short*)&buf[4])); 
```

我做了整个指针/取消引用的事情，因为如果我的逻辑是正确的，那么只做一个`(unsigned short)buf[4]`转换只会转换一个字节；不是都。

编辑：字节序很好。除了必须使用`memcpy`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:43:29.687

您问题中的代码：

```
(*((unsigned short*)&buf[4])) 
```

由于以下问题，可能无法正常工作：

*   [字节序](http://en.wikipedia.org/wiki/Endianness)
*   [结盟](http://en.wikipedia.org/wiki/Data_structure_alignment)
*   [混叠](http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html)

`memcpy`如果您对字节序有信心（如果没有，那么您应该与`ntohs`or结合使用`ntohl`）是安全的。一个体面的编译器也应该优化它。

如果你真的想避免`memcpy`，那么一种安全的、独立于平台的方式如下所示（假设`buf`最初是从外部源填充的，使用标准网络字节顺序）：

```
((buf[n] << 8) | buf[n+1]) 
```

当然，您应该将其包装在一个函数（或宏，如果必须的话）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:47:46.680

我认为正确的解决方案在任何情况下都是使用`ntohs`和`htons`（用于`long`使用[`ntohl`](http://linux.die.net/man/3/ntohl)和`htonl`）之类的功能。

```
((sockaddr_in*)from)->sin_port = htons(*((unsigned short*)&buf[4])); 
```

另请记住，根据字节数组的来源，您可能会遇到其他 Endianess 问题。

在某些体系结构（HP-RISC、SPARC）上，对齐可能是另一个问题。这些功能通常没有这些问题`memcpy`。**而且你不应该过早地优化！**`memmove`

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:52:47.350

您可以使用 ntohs 宏来处理字节序转换，htons 表示主机到网络的顺序

```
((sockaddr_in*)from)->sin_port = htons(*((uint16_t*)&buf[4])); 
```

请注意，但是某些架构不允许未对齐的访问，因此您需要确保它是对齐的，或者您可能需要将对齐的字节提取到临时变量中并相应地打乱位。**

# php - MySql 在一个单元格中存储另一个表的多个引用并选择它？

> ID：10628186
> 
> 赞同：5
> 
> 时间：2012-05-16T23:40:56.440
> 
> 标签：php, mysql, select

我有两张桌子

```
table: people 

id name goods_owned
1  john   1,4,3
2  Mike   2,5
3  Sam    1,5,2
4  Andy   5,3,4 
```

-

```
table goods:

  g_id g_name  g_class
    1   sugar  food
    2   salt   food
    3   boat   transp
    4   house  habitation
    5   car    transp 
```

这是一个简单的表格示例，`goods`它实际上很长，每个人都`people`可以有多个`goods`分配给他，例如汽车、船、糖等，一个人可以拥有多少没有限制，而且完全随机。我找不到比逗号分隔更好的方法来存储它，例如`1,5,3`

我在进行选择时遇到问题，例如

```
SELECT people.*, goods.name
   FROM people
      LEFT JOIN  goods ON goods.g_id = people.goods_owned
         WHERE name = "Sam" 
```

然而问题是goods_owned在单元格中有多个商品ID，它们需要以某种方式分解以获得答案：

```
1, Sam, sugar, car, salt 
```

如果您知道在一个单元格中存储（例如 100 个）多个逗号分隔值的更好替代方法，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:51:54.420

一个人可以与零、一种或多种商品相关。一件商品可以与零个、一个或多个人相关。

那是多对多的关系。

通常，我们通过创建第三个表来处理这个问题，这是一个指向其他两个表的“关系”

```
table: goods_owned
people_id goods_id
        1        1
        1        4
        1        3
        2        2
        2        5
        3        1
        3        5
        3        2
        4        5
        4        3
        4        4 
```

这两列的组合可以指定为唯一的，并且可以作为表的主键。每列都可以定义为父表的外键。

```
CREATE TABLE goods_owned
( people_id  INT UNSIGNED NOT NULL
, goods_id   INT UNSIGNED NOT NULL
, PRIMARY KEY (people_id, goods_id)
-- , KEY FK_goods_owned_people (people_id)  -- redundant with PK
, KEY FK_goods_owned_goods (goods_id)
, CONSTRAINT FK_goods_owned_people FOREIGN KEY (people_id) REFERENCES people (id)
, CONSTRAINT FK_goods_owned_goods FOREIGN KEY (goods_id) REFERENCES goods (g_id)
) ; 
```

另一种选择是，如果“商品”的集合是静态且定义明确的，并且不需要在表中表示，那么您可以使用 MySQL SET 数据类型，并拥有一个表。但这种方法仅适用于集合是静态的（不需要更改。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T23:46:13.693

您的数据库未标准化。您[在列中有重复组](http://en.wikipedia.org/wiki/First_normal_form#Repeating_groups_within_columns)。如果可能，您应该标准化您的数据库。

如果你不能改变你的数据库设计，你可以使用[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_find-in-set)，但它会很慢：

```
SELECT people.id, people.name, people.goods_owned, goods.name
FROM people
LEFT JOIN goods ON FIND_IN_SET(goods.g_id, people.goods_owned)
WHERE name = 'Sam' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T23:59:29.017

让我真的很无聊......

```
CREATE TABLE `people` (
  `id` int(11) NOT NULL,
  `name` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
;
CREATE TABLE `goods` (
  `id` int(11) NOT NULL,
  `name` varchar(50) DEFAULT NULL,
  `class_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
;
CREATE TABLE `goods_owned` (
  `people_id` INT(11) DEFAULT NULL,
  `goods_id` INT(11) DEFAULT NULL
) ENGINE=MYISAM CHARSET=latin1
;
CREATE TABLE `classes` (
  `id` int(11) NOT NULL,
  `class_name` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
;

INSERT INTO `people` (`id`, `name`) VALUES('1','John');
INSERT INTO `people` (`id`, `name`) VALUES('2','Mike');
INSERT INTO `people` (`id`, `name`) VALUES('3','Sam');
INSERT INTO `people` (`id`, `name`) VALUES('4','Andy');

INSERT INTO `classes` (`id`, `class_name`) VALUES('1','Food');
INSERT INTO `classes` (`id`, `class_name`) VALUES('2','Trans');
INSERT INTO `classes` (`id`, `class_name`) VALUES('3','Habitation');

INSERT INTO `goods` (`id`, `name`, `class_id`) VALUES('1','Sugar','1');
INSERT INTO `goods` (`id`, `name`, `class_id`) VALUES('2','Salt','1');
INSERT INTO `goods` (`id`, `name`, `class_id`) VALUES('3','Boat','2');
INSERT INTO `goods` (`id`, `name`, `class_id`) VALUES('4','House','3');
INSERT INTO `goods` (`id`, `name`, `class_id`) VALUES('5','Car','2');

INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('1','1');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('1','4');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('1','3');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('2','2');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('2','5');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('3','1');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('3','5');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('3','2');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('4','5');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('4','3');
INSERT INTO `goods_owned` (`people_id`, `goods_id`) VALUES('4','4');

SELECT
    people.name
    , goods.name
    , classes.class_name
FROM people
    LEFT JOIN goods_owned ON (people.id = goods_owned.people_id)
    LEFT JOIN goods ON (goods_owned.goods_id = goods.id)
    LEFT JOIN classes ON (goods.class_id = classes.id)
WHERE classes.id = 1  /*Include only Food Goods*/
ORDER BY people.name;
        ; 
```

# c# - Mimick ValidationSummary For Non-Model Errors

> ID：10628189
> 
> 赞同：0
> 
> 时间：2012-05-16T23:41:39.257
> 
> 标签：c#, .net, asp.net-mvc, design-patterns, idioms

我见过开发人员“利用”`ModelState.AddModelError()`将错误消息添加到`ModelState`，即使这些错误与当前请求的模型的验证无关。

我的看法是，重定向应该执行一个完全独立的“错误”操作并查看以显示错误消息。在这种情况下，会有一个专用的 ErrorModel，其呈现方式与呈现方式类似`@Html.ValidationSummary`。

这就引出了一个问题：是否存在其他人使用的惯用“ErrorModel”结构，和/或采用该模型并在某种程度上模仿 ValidationSummary 提供的表示的流行库/函数？

我可以制作自己的 ErrorModel 和 ValidationSummary 代码（我什至可以复制 MVC 源代码），但我更喜欢使用库或遵循其他人在这种情况下使用的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:41:37.000

恕我直言，为此目的使用 ValidationSummary 很好，这就是为什么：

有 4 个版本，其中两个很重要：

```
Html.ValidationSummary()
Html.ValidationSummary(bool) 
```

第二个旨在仅显示模型错误，而不是属性错误。这意味着业务逻辑验证，例如“乔无法在星期一进行约会”。第一个旨在显示模型错误和属性错误。

这是 Pro ASP.NET MVC3 Framework 的解释：

> ValidationSummary 辅助方法的一些重载允许我们指定只显示模型级别的错误。到目前为止，我们在 ModelState 中注册的错误都是属性级别的错误，这意味着为给定属性提供的值存在问题，更改该值可以解决问题。相比之下，当两个或多个属性值之间的交互引起一些问题时，可以使用模型级错误。

所以基本上我会说：你做得很好，不要打扰。当然，除非你有特定的原因。

# objective-c - 如何在目标 c 中处理每个 uitableviewcontroller？

> ID：10628200
> 
> 赞同：0
> 
> 时间：2012-05-16T23:42:57.747
> 
> 标签：objective-c

我有一个标签栏应用程序，每个标签都将用户引导到 UITableViewController。我创建了另一个名为 MyTimer 的对象，它扩展了 NSObject。我希望 MyTimer`[MyTimer refreshTables]`每分钟执行一次该功能。refreshTables 函数的内容看起来像这样

```
-(void) refreshTables:(NSTimer *)timer
{
[tabbar.firstuitableviewcontroller.tableView reloadData];
[tabbar.seconduitableviewcontroller.tableView reloadData];
[tabbar.thirduitableviewcontroller.tableView reloadData];
} 
```

问题是我不知道我需要使用正确的语法或变量名称链来获取句柄 tabbar.firstuitableviewcontroller、tabbar.seconduitableviewcontoller 等...我可以从 appdelegate 对象中获取它们的句柄吗？或其他方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:25:46.853

我的 appdelegate 的 rootviewcontroller 是 tabbarcontroller。所以这是有效的：

UITabBarController * uitbc = appDelegate.window.rootViewController;

然后我可以通过以下方式获取每个选项卡指向的导航控制器：

// 如果你想要另一个选项卡，则将零更改为另一个选项卡的索引 UINavigationController * uinc = [uitbc.viewControllers objectAtIndex:0];

# xcode - Tapjoy 属性错误？

> ID：10628206
> 
> 赞同：0
> 
> 时间：2012-05-16T23:43:30.850
> 
> 标签：xcode, sdk, ads, tapjoy

我正在将 Tapjoy SDK 代码添加到我的应用程序中，当我运行应用程序时，

我得到这个错误代码：

```
 property 'showFeaturedBtn' not found on object of type 'UIViewController *' 
```

我正在调用的代码：

```
// Show the custom Tapjoy full screen featured app ad view.
    if (featuredApp)
    {
        [TapjoyConnect showFeaturedAppFullScreenAdWithViewController:mainCtrl_];
        [mainCtrl_.showFeaturedBtn setEnabled:YES];
        [mainCtrl_.showFeaturedBtn setAlpha:1.0f];
    }
} 
```

它在哪里说：

```
[mainCtrl_.showFeaturedBtn setEnabled:YES];
[mainCtrl_.showFeaturedBtn setAlpha:1.0f]; 
```

我收到 2 个错误说：

```
 property 'showFeaturedBtn' not found on object of type 'UIViewController *' 
```

有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:48:43.047

`showFeaturedBtn` 是 Tapjoy 示例应用程序中的特定内容，而不是 Tapjoy SDK 中明确的内容。所以你不能在你的应用程序中引用它。这就是您遇到错误的原因。

# java - 奇怪的显示，程序不会一直运行

> ID：10628213
> 
> 赞同：-2
> 
> 时间：2012-05-16T23:44:24.437
> 
> 标签：java, swing, awt

我有一个程序在某个时候可以运行，而其他时候它就不会。赔率大约是50-50。这些是我运行程序时的快照。不看我的代码，有人知道这可能发生的任何情况吗？我只是很困惑，顺便说一句，程序在显示白屏时也无法正常停止，我不得不杀死进程来终止它，我猜JVM有问题，如果我我纠正我我错了。谢谢![正确显示](../Images/7fc20e52f60c21418867848c90600252.png)

我知道这不是我应该发布问题的方式，但代码是巨大的，我什至不确定它可能出错的地方。我的困惑是为什么它有 50% 的时间有效，而不是全有或全无的情况。谢谢

![卡在某个地方](../Images/c909d15563bd850840ee4c73c5a47693.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:52:00.310

在使用 Java Swing 时，这种事情通常是在 Swing 的 GUI 线程之外的任何线程上执行 GUI 工作（调用 Swing 或 AWT 对象上的方法）的症状。确保您正确调度以防止这种情况发生。

编辑：将这些链接添加到有关该主题的一些文档以帮助您入门： [http](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html) ://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html http://java.sun.com/products/jfc /tsc/articles/threads/threads1.html

# python - Python聊天服务器何时不能保证页面不重置？

> ID：10628215
> 
> 赞同：0
> 
> 时间：2012-05-16T23:44:26.547
> 
> 标签：python, serialization, cgi, state

我对 Python、cgi 和passenger-wsgi 比较陌生，所以请多多包涵。

我设置了一个 python 脚本，它不超过

```
import time 
startTime = time.time()

def main():
    return time.time()-startTime 
```

.. 就这样我知道乘客服务器已经运行了多长时间。几天前我这样做了，但现在只有大约 12 分钟。

跟踪状态对于我目前拥有的任何脚本都不重要，但我正计划编写一个简单的聊天页面。跟踪各种在线用户和聊天组将非常重要，我不希望每 12 分钟重置一次所有内容。

我能做些什么呢？

我唯一的想法是将任何必要的变量存储在一个对象中，然后序列化该对象并将其存储在每次更改它的文件中，这样如果服务器再次重新启动，我仍然拥有一切。这通常是如何完成的？

# java - 当我尝试运行 jar 文件时出现 java.lang.NoClassDefFoundError

> ID：10628217
> 
> 赞同：0
> 
> 时间：2012-05-16T23:44:50.823
> 
> 标签：java, jar, classpath, noclassdeffounderror, buildr

我构建了一个 jar 文件（使用 buildr），看起来一切都很好，但是当我尝试运行它时，我得到了休闲错误。

```
$java -Djava.library.path=./ -jar Splat-0.0.0.jar
Exception in thread "main" java.lang.NoClassDefFoundError: com/digitaltea/splat/Splat
Caused by: java.lang.ClassNotFoundException: com.digitaltea.splat.Splat
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: com.digitaltea.splat.Splat. Program will exit. 
```

这是我的清单文件。

```
Created-By: Buildr
Manifest-Version: 1.0
Implementation-Version: 
Implementation-Title: Splat Text Editor
Build-Jdk: 
Main-Class: com.digitaltea.splat.Splat
Build-By: christian
Class-Path: swt.jar libnet_sf_colorer.so xmlwise-1_1-r9.jar colorer.jar jspf.core-.0.2.jar 
```

这是我的 jar 文件结构。

```
$jar tf Splat-0.0.0.jar
META-INF/
META-INF/MANIFEST.MF
com/
com/digitaltea/
com/digitaltea/splat/
com/digitaltea/splat/Splat.class
com/digitaltea/splat/core/
com/digitaltea/splat/core/CoreAPI.class
com/digitaltea/splat/core/coreplugin/
com/digitaltea/splat/core/coreplugin/Core.class
com/digitaltea/splat/core/coreplugin/DocumentTab$1.class
com/digitaltea/splat/core/coreplugin/DocumentTab.class
com/digitaltea/splat/core/coreplugin/NewTabEvent.class
com/digitaltea/splat/core/coreplugin/NewTabListener.class
com/digitaltea/splat/core/coreplugin/TabbedEditor$1.class
com/digitaltea/splat/core/coreplugin/TabbedEditor.class
com/digitaltea/splat/plugins/
com/digitaltea/splat/plugins/PluginAction.class
com/digitaltea/splat/plugins/SplatAPI.class 
```

有任何想法吗？

# xcode - 有没有办法在没有 NSClassFromString 的情况下使用 GrowlApplicationBridge？

> ID：10628220
> 
> 赞同：1
> 
> 时间：2012-05-16T23:45:02.007
> 
> 标签：xcode, cocoa, xcode4.2, growl

我正在尝试构建一个使用 Growl 的基本可可应用程序。

每次我想使用时，`GrowlApplicationBridge`我都必须使用类似的东西

```
Class GAB = NSClassFromString(@"GrowlApplicationBridge");
[GAB performSelector:@selector(setGrowlDelegate:) withObject:self]; 
```

我希望能够使用

```
[GrowlApplicationBridge setGrowlDelegate:self]; 
```

这是我在尝试我想要的行为时得到的编译器错误：

> 架构 x86_64 的未定义符号：“_OBJC_CLASS_$_GrowlApplicationBridge”，引用自：StatusMenuAppDelegate.o ld 中的 objc-class-ref：未找到架构 x86_64 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:40:49.353

只要您`<Growl/Growl.h>`在该文件的顶部导入并将框架链接到您的应用程序，您应该可以正常使用`[GrowlApplicationBridge setGrowlDelegate:self]`。

检查文件的顶部并确保您正在导入它，并检查您的目标的“链接库和框架”构建阶段并确保您正在链接它。

# sql - Hibernate 没有手动插入对象

> ID：10628226
> 
> 赞同：0
> 
> 时间：2012-05-16T23:46:20.117
> 
> 标签：sql, hibernate, jsp

我得到了一个使用 Hibernate 的预先创建的项目，并被要求为其添加一些功能。

它附带的数据库有一个用户表，并且有一个登录 servlet 页面，它使用休眠来使用提供的凭据登录用户。

为了获得数据库中的第一个用户，我使用 SQL 工具手动插入了它。现在，当我尝试使用这些凭据登录时，它会失败。我需要做些什么才能使用手动添加的用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:49:19.267

不，要读取现有数据，不需要对数据库中的行本身进行任何操作以使 Hibernate 读取它。您的问题是无数其他可能性之一，例如您的 Hibernate 被配置为从其他数据库或表中读取，或者遇到需要在日志中查找的错误。

# javascript - 禁用Javascript时的幻灯片？

> ID：10628227
> 
> 赞同：0
> 
> 时间：2012-05-16T23:46:21.553
> 
> 标签：javascript, jquery, slideshow

我创建了以下幻灯片：http: [//jsfiddle.net/baumdexterous/V8fZr/](http://jsfiddle.net/baumdexterous/V8fZr/)

我有两个问题：

1.  我想知道如何在没有 Javascript 的情况下创建完全相同的幻灯片放映，作为禁用 javascript 的浏览器的后备......或者也适用于一般的旧浏览器。有任何想法吗？

2.  没有那么高的优先级.. 但是 FireFox 中有一个奇怪的错误。当我加载页面时，如果我单击刷新，滑块不会加载第一张图片。关于如何解决的任何想法？

太感谢了！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:58:41.497

1\. HTML4 和 CSS2 是静态的，无法创建幻灯片 - 您需要 javascript 或其他动态语言来实现效果。您能做的最好的事情就是开发它，使其优雅地降级（例如，将页面上的每张幻灯片安排在易于查看的布局中）。

HTML5 和 CSS3 可以让您做到这一点，但它在许多主要浏览器（即 IE！）中并不完全支持，并且 javascript 支持比 HTML 5 支持更常见。

2.您的 HTML 中有一些语法错误，这可能会导致您在 FF 中出现问题（我尚未测试此代码，但您需要以任何一种方式修复它们）

```
<div class="slide">
<img src="http://i48.tinypic.com/6olzzo.png" width="450px" height="285px" />
</div> <!--this was missing -->
<div class="slide">
<img src="http://i45.tinypic.com/ftdc7o.png" width="450px" height="285px" /> <!-- you were missing end quote on src attribute --> 
</div>
<div class="slide">
<img src="http://i48.tinypic.com/6olzzo.png" width="450px" height="285px" /> <!-- you had extra end quote on src attribute -->
</div> 
```

# c++ - 关闭套接字连接

> ID：10628230
> 
> 赞同：0
> 
> 时间：2012-05-16T23:47:17.307
> 
> 标签：c++, multithreading, sockets

我正在使用套接字连接到我的服务器。问题是：服务器接受连接。关闭它并再次等待。

我使用 2 个套接字：1 个用于消息，另一个用于传输数据本身。如何关闭套接字连接。

我使用关机（套接字，2）；并关闭（套接字）；

我尝试添加reuseaddr：

```
int i=1;
setsockopt(sockDesc, SOL_SOCKET, SO_REUSEADDR, &i, sizeof(int)); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:49:29.010

解决了，我刚刚添加了一个 sleep(1) ，现在可以了。Remy Lebeau，我想关闭任何袜子，似乎当我关闭套接字时我需要等待很短的时间，这就是问题所在。

谢谢大家

# r - 在 R 中为两个向量制作兼容（相等）的维度

> ID：10628232
> 
> 赞同：0
> 
> 时间：2012-05-16T23:47:28.480
> 
> 标签：r, vector, variable-length

我有一个名为 classes 的向量，它是使用列表删除的分析的输出。因此，类中包含的案例是整个数据集的一个子集——有些案例由于数据不完整而被删除。

选择是一个虚拟变量，在我的数据集中的每个案例中都会出现。下面是我的数据的简短示例。每个观察还有一个唯一的案例 ID。

```
classes <- c(1,2,1,1,1,2,3,3,3,1,1,1,3,3,2,2,2)
selection <- c(1,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,0,1,0)
case <-seq(1,26,1) 
```

我想创建一个新版本的选择（例如 selection2），以便它只包括类中的案例。基本上，出于比较目的，我希望两个变量的长度相同，其中未包含在类中的案例也不包含在 selection2 中。

我认为这很容易解决，但我花了很多时间无处可去，所以我想我会问。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:31:14.750

如果它们的长度相同，那么简化版本必须具有 NA：

```
> selection2 <- selection
> is.na(selection2) <- !selection2 %in% classes
> selection2
 [1]  1 NA NA NA  1  1  1  1 NA NA NA NA NA  1  1  1  1 NA NA NA  1  1  1 NA  1 NA 
```

# class - 类型类在 Haskell 中是如何工作的？

> ID：10628237
> 
> 赞同：-1
> 
> 时间：2012-05-16T23:48:06.460
> 
> 标签：class, haskell, typeclass

我对haskell中的课程感到非常困惑。如果我有代码：

```
class GetResult n where res :: n -> Int
class (GetResult n) => Model n where
                                     starting :: Int -> [Int] -> n
                                     starting i j = .....
                                     test :: n -> n
                                     test n = ...... 
```

n是什么类型？什么类型的开始输出和测试将作为输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T23:55:44.583

您的困惑可能是由于 Haskell 中的类型类与 OO 中的类无关。最重要的是类型类不描述对象，它们描述类型。

一个类型类描述了一组方法。您可以为给定类型实现这些方法，以使该类型成为该类的实例。因此，您的 GetResult 类型类定义可以读作“通过实现类型的方法`res`，可以使类型 n 成为 GetResult 的实例`n -> Int`”。`n`想要成为的实例的类型也是如此`GetResult`。

例如，如果您想创建`Int`的实例`GetResult`，可以使用以下实例声明：

```
instance GetResult Int where
    res :: Int -> Int
    res i = i 
```

在这种情况下`n`将是`Int`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T23:59:26.567

`n`是一个类型变量，不是任何特定类型。可以将特定类型作为 和 的实例`GetResult`，`Model`并且每个实例都将“填补”类中定义的函数类型中的空白。

所以完整的类型`starting`是（你可以从 ghci 中得到这个`:t starting`）：

```
starting :: Model n => Int -> [Int] -> n 
```

您可以将其理解为“对于任何类型的实例`Model`，`starting`接受 an`Int`和 a`[Int]`并返回该类型的值”。同样`test`采用任何类型的实例`Model`并返回相同类型的值。

在任何*特定*的 调用中`starting`，返回的类型将由上下文确定；它将返回在该上下文中使用其返回值的任何类型的值（假设存在合适的实例）。

# php - MongoDB & PHP - 如何从日期范围分隔的查询中排除结果？

> ID：10628239
> 
> 赞同：0
> 
> 时间：2012-05-16T23:48:17.523
> 
> 标签：php, mongodb, find

长期阅读，第一次提问...

使用PHP查询我们的MongoDB页面访问日志，想得到两个时间段之间的一组记录，但排除了具有一定userAgent的结果。我已经弄清楚了时间范围，但找不到任何解释排除的地方。

到目前为止，这是我的查询内容：

```
$dateRange = $collection->find(array("timeStamp" => array('$gt' => $start, 
                                                          '$lt' => $end))); 
```

查找代码以完成查找功能以排除以“ELB”开头的“userAgent”的记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:23:26.010

您要查找的是 $ne 或 $nin，具体取决于您要排除的值是单个值还是值数组。例如：

```
$dateRange = $collection->find(array("timeStamp" => array('$gt' => $start, '$lt' => end), 'userAgent' => array('$ne' => new MongoRegex('/^ELB/')))); 
```

此处的文档：

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24ne](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24ne) http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24nin

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:24:37.257

您可以附加`{$not: /^ELB/}`到 mongo 查询。

不太确定等效的 PHP，但尝试这样的事情：

```
$dateRange = $collection->find(array(
    'timeStamp' => array(
        '$gt' => $start,
        '$lt' => $end
    ),
    'userAgent' => array(
        '$not' => new MongoRegex('/^ELB/')
    )
)); 
```

# get - 让 Google 自定义搜索查看 GET 参数

> ID：10628246
> 
> 赞同：0
> 
> 时间：2012-05-16T23:49:16.817
> 
> 标签：get, arguments, google-custom-search

我在一个页面中有一个谷歌自定义搜索片段，比如说`search.php`，如果我从那个页面使用它似乎工作正常。

但是，我需要以某种方式让它识别 GET 参数，例如，如果我加载`search.php?q=test`了 ，它会直接搜索 test.get 。

有没有办法让它做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:50:58.930

我发现我可以使用[`CustomSearchControl`](https://developers.google.com/custom-search/docs/js/cselement-reference#cse-el)'s `execute`方法。

# c - 在C中初始化整数指针数组

> ID：10628256
> 
> 赞同：14
> 
> 时间：2012-05-16T23:51:16.620
> 
> 标签：c, arrays, pointers

我对 C 中指针的使用有一些困惑/问题。我将示例代码放在下面以便于理解。请注意这些代码的差异。如果您在理解它时遇到问题，请提供反馈。

这行不通。

```
#include <stdio.h>
#include <stdlib.h>

void process() {
    int *arr;
    arr=(int*)malloc(5*sizeof(int));
    arr=(int*){3,1,4,5,2};
    for(int z=0;z<5;z++) {
        printf("%d ",arr[z]);
    }
    printf("\n");
}

int main() {
    process();
    return 0;
} 
```

但这有效。

```
#include <stdio.h>
#include <stdlib.h>

void process() {
    int *arr;
    arr=(int*)malloc(5*sizeof(int));
    arr=(int[]){3,1,4,5,2};
    for(int z=0;z<5;z++) {
        printf("%d ",arr[z]);
    }
    printf("\n");
}

int main() {
    process();
    return 0;
} 
```

这也有效。为什么？我没有在这里分配内存。

```
#include <stdio.h>
#include <stdlib.h>

void process() {
    int *arr;
    arr=(int[]){3,1,4,5,2};
    for(int z=0;z<5;z++) {
        printf("%d ",arr[z]);
    }
    printf("\n");
}

int main() {
    process();
    return 0;
} 
```

为什么他们不一样？

```
 arr=(int*){3,1,4,5,2};
    arr=(int[]){3,1,4,5,2}; 
```

有没有其他方法来初始化整数指针数组，而不是在这种单独的分配方式中使用？

```
arr[0]=3;
arr[1]=1;
arr[2]=4;
arr[3]=5;
arr[4]=2; 
```

如何获得指针内存中分配的大小/数量，以便我可以使用类似的东西`for(int z=0;z<NUM;z++) {`而不是`for(int z=0;z<5;z++) {`静态的？

任何答案都非常感谢。

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T23:56:04.527

前几个示例中的`malloc`调用分配一块内存并将指向该内存的指针分配给`arr`. 一旦你`arr`再次赋值，指针值就会被覆盖，并且你丢失了分配的内存——也就是说，你已经泄露了它。那是一个错误。

换句话说，如果您使用 using 分配一块内存`malloc()`，那么您可以使用数组语法将数据写入其中（例如）：

```
int* arr = (int *) malloc(sizeof(int) * 5);
for (int i=0; i<5; ++i)
    arr[i] = i; 
```

但是您不能将任何其他内容直接分配给`arr`，否则您会丢失指向该内存块的指针。并且当您使用 分配块时`malloc()`，不要忘记在`free()`不再需要它时将其删除。

数组*不是*指向整数的指针；这是一个数组。当您将数组名称作为参数传递给接受指针作为参数的函数时，数组名称被称为“衰减为指针”，但它们不是一回事。

关于你的最后一个问题：这实际上是数组和指针类型之间的区别：编译器知道数组的大小，但它不知道任意指针类型指向的块的大小。不幸的是，答案是否定的。

但是因为你写的是 C++，而不是 C，所以无论如何你都不应该使用数组：使用 `std::vector'！它们知道自己的长度，而且它们是可扩展的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T23:56:21.360

当您说:`ptr = {1,2,3,4,5}`时，您`ptr`指向数据段中的内存，常量数组`{1,2,3,4,5}`驻留在该内存中，因此您正在泄漏内存。如果你想初始化你的内存，就在分配之后，写：`ptr[0]=1; ptr[1]=2;`等等。如果要复制数据，请使用***memcpy***。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-25T22:17:00.827

逗号分隔的值列表是用于初始化数组的构造。它不适合初始化指向数组的指针。这就是您需要它的原因`(int[])`- 它告诉 gcc 创建一个未命名的整数数组，该数组使用提供的值进行初始化。

gcc 不会让您丢失`arr`作为数组的信息，除非您真的想要。这就是为什么你需要一个演员。最好声明`arr`为数组，而不是指针。您仍然可以将它传递给接受指针的函数。然而 gcc 不会让你用 malloc 泄漏内存：

```
error: incompatible types when assigning to type ‘int[5]’ from type ‘void *’ 
```

如果您想要一个可以是数组或指向已分配内存的指针的变量，请为此创建另一个变量。更好的是，创建一个接受指针并将其传递给数组或指针的函数。

# java - Android 应用程序因 NoClassDefFoundError 而停止

> ID：10628257
> 
> 赞同：3
> 
> 时间：2012-05-16T23:51:28.940
> 
> 标签：java, android

```
My Manifest file is below

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="FXPAL.Unity.Android"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:theme="@android:style/Theme.Light" android:name=".UnityMobileApp" android:debuggable="true"
    android:label="@string/app_name" >
    <activity
        android:name=".UnityMain"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.Light.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="FXPAL.Unity.Android.LAUNCH" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity android:name=".IndividualViewActivity"
        android:label="@string/app_name" android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".EditPreferences" android:label="@string/app_name">
    </activity>
    <activity android:name=".LoginActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".SendPingActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".ReceivePingActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".SendNudgeActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".PlacesActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".IncomingCallActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".ReceiveNudgeActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".ConfirmNudgeActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".FinalNudgeActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <activity android:name=".ReportingActivity" android:label="@string/app_name"
        android:theme="@style/PageStyle">
    </activity>
    <service android:name=".ReportingService" />
    <receiver android:name=".StartupReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.HOME" />
        </intent-filter>
    </receiver>
    <receiver android:name=".PingNudgeReceiver">
        <intent-filter>
            <action android:name="com.xtify.android.sdk.SHOW_NOTIFICATION" />
            <!-- KEEP THE FORWARD SLASH IN FRONT OF THE API KEY ON THE LINE BELOW -->
            <data android:scheme="notif" android:host="notification.xtify.com"
                android:pathPrefix="/8d55490a-43ec-42d3-90f8-57c91ab06ce8" />
        </intent-filter>
    </receiver>
    <activity android:name="com.xtify.android.sdk.SettingsActivity"
        android:label="Settings">
    </activity>
    <activity android:name="com.xtify.android.sdk.NotificationDetailsActivity"
        android:label="Notification Details">
    </activity>
    <activity android:name="com.xtify.android.sdk.NotificationSettingsActivity"
        android:label="Notification Settings">
    </activity>
    <service android:name="com.xtify.android.sdk.MainService"
        android:label="Notifications Service">
        <intent-filter>
            <action android:name="com.xtify.android.sdk.IMainService" />
            <category android:name="com.xtify.android.sdk.IMainService" />
            <category android:name="com.xtify.android.sdk.IMainService.V1033"/>

        </intent-filter>
    </service>
    <receiver android:name="com.xtify.android.sdk.MainReceiver">
        <intent-filter>
            <!-- <action android:name="com.xtify.android.sdk.SHOW_NOTIFICATION" /> -->
            <action android:name="com.xtify.android.sdk.NOTIFICATION_CLICKED" />
            <action android:name="com.xtify.android.sdk.NOTIFICATION_CLEARED" />
            <!-- MAKE SURE THE API KEY ON THE NEXT LINE IS PRECEDED BY A SLASH -->
            <data android:scheme="notif" android:host="notification.xtify.com"
                android:pathPrefix="/8d55490a-43ec-42d3-90f8-57c91ab06ce8" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <action android:name="android.intent.action.ACTION_POWER_CONNECTED" />
            <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED" />
            <action android:name="com.xtify.android.sdk.SEND_SETTINGS" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_ADDED" />
            <action android:name="android.intent.action.PACKAGE_REMOVED" />
            <data android:scheme="package" />
        </intent-filter>
    </receiver>
    <meta-data android:name="XTIFY_SDK_API_KEY"
        android:value="8d55490a-43ec-42d3-90f8-57c91ab06ce8" />

</application>
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.GET_TASKS"/>
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.READ_CALENDAR" />
<uses-permission android:name="android.permission.WRITE_CALENDAR" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/> 
```

```
 My LogCat File is

05-16 23:07:48.029: E/dalvikvm(768): Could not find class 'com.commonsware.cwac.merge.MergeAdapter', referenced from method FXPAL.Unity.Android.UnityMain.updateView
05-16 23:07:48.289: E/dalvikvm(768): Could not find class 'com.xtify.android.sdk.PersistentLocationManager', referenced from method         FXPAL.Unity.Android.ReportingService.onCreate
05-16 23:07:48.619: E/AndroidRuntime(768): FATAL EXCEPTION: main
05-16 23:07:48.619: E/AndroidRuntime(768): java.lang.NoClassDefFoundError: com.xtify.android.sdk.PersistentLocationManager
05-16 23:07:48.619: E/AndroidRuntime(768):  at FXPAL.Unity.Android.ReportingService.onCreate(ReportingService.java:240)
05-16 23:07:48.619: E/AndroidRuntime(768):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2253)
05-16 23:07:48.619: E/AndroidRuntime(768):  at android.app.ActivityThread.access$1600(ActivityThread.java:123)
05-16 23:07:48.619: E/AndroidRuntime(768):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
05-16 23:07:48.619: E/AndroidRuntime(768):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 23:07:48.619: E/AndroidRuntime(768):  at android.os.Looper.loop(Looper.java:137)
05-16 23:07:48.619: E/AndroidRuntime(768):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-16 23:07:48.619: E/AndroidRuntime(768):  at java.lang.reflect.Method.invokeNative(Native Method)
05-16 23:07:48.619: E/AndroidRuntime(768):  at java.lang.reflect.Method.invoke(Method.java:511)
05-16 23:07:48.619: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-16 23:07:48.619: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-16 23:07:48.619: E/AndroidRuntime(768):  at dalvik.system.NativeStart.main(Native Method)
05-16 23:22:50.419: E/dalvikvm(790): Could not find class 'com.xtify.android.sdk.PersistentLocationManager', referenced from method FXPAL.Unity.Android.ReportingService.onCreate
05-16 23:22:50.529: E/AndroidRuntime(790): FATAL EXCEPTION: main
05-16 23:22:50.529: E/AndroidRuntime(790): java.lang.NoClassDefFoundError: com.xtify.android.sdk.PersistentLocationManager
05-16 23:22:50.529: E/AndroidRuntime(790):  at FXPAL.Unity.Android.ReportingService.onCreate(ReportingService.java:240)
05-16 23:22:50.529: E/AndroidRuntime(790):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2253)
05-16 23:22:50.529: E/AndroidRuntime(790):  at android.app.ActivityThread.access$1600(ActivityThread.java:123)
05-16 23:22:50.529: E/AndroidRuntime(790):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
05-16 23:22:50.529: E/AndroidRuntime(790):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 23:22:50.529: E/AndroidRuntime(790):  at android.os.Looper.loop(Looper.java:137)
05-16 23:22:50.529: E/AndroidRuntime(790):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-16 23:22:50.529: E/AndroidRuntime(790):  at java.lang.reflect.Method.invokeNative(Native Method)
05-16 23:22:50.529: E/AndroidRuntime(790):  at java.lang.reflect.Method.invoke(Method.java:511)
05-16 23:22:50.529: E/AndroidRuntime(790):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-16 23:22:50.529: E/AndroidRuntime(790):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-16 23:22:50.529: E/AndroidRuntime(790):  at dalvik.system.NativeStart.main(Native Method) 
```

我正在尝试将我的 android SDK 从 2.2 升级到 4.0.3。我发现了很多问题。我能够清除其中的一些。但还是剩下的寥寥无几。您能否查看这些错误并帮助我修复它们。

我看了这些 3 天，但情况仍然相同。我没有得到任何编译错误，但是在执行时我得到了 logcat 中显示的错误。它说找不到类。但是我在许多不同的论坛上进行了尝试，但未能成功解决它们。

期待各位朋友的回复。

问候， 拉克什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T00:19:37.167

使用最新的 SDK 时，您需要确保所有外部库都位于名为`libs`.

将您的库移动到`libs`目录中并再次清理/构建您的项目。

# python - 将图像插入 IPython 笔记本降价

> ID：10628262
> 
> 赞同：300
> 
> 时间：2012-05-16T23:52:03.663
> 
> 标签：python, jupyter-notebook, ipython, jupyter

我开始严重依赖 IPython 笔记本应用程序来开发和记录算法。太棒了; 但是有些事情似乎应该是可能的，但我不知道该怎么做：

我想将本地图像插入到我的（本地）IPython 笔记本降价中，以帮助记录算法。我知道的足够多，`<img src="image.png">`可以在降价中添加类似的东西，但这就是我所知道的。我假设我可以将图像放在由 127.0.0.1:8888 （或某个子目录）表示的目录中以便能够访问它，但我不知道该目录在哪里。（我正在使用 Mac。）那么，是否可以在没有太多麻烦的情况下做我想做的事情？

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2016-05-05T18:05:06.740

到目前为止给出的大多数答案都朝着错误的方向发展，建议加载其他库并使用代码而不是标记。在 Ipython/Jupyter Notebooks 中它非常简单。确保单元格确实在标记中并显示图像使用：

```
![alt text](imagename.png "Title") 
```

与提出的其他方法相比，另一个优势是您可以显示所有常见的文件格式，包括 jpg、png 和 gif（动画）。

* * *

## 回答 #2

> 赞同：266
> 
> 时间：2012-05-17T00:08:24.000

notebook 目录中的文件在“files/” url 下可用。因此，如果它在基本路径中，它将是`<img src="files/image.png">`，并且子目录等也可用：`<img src="files/subdir/image.png">`等。

*更新*：从 IPython 2.0 开始，`files/`不再需要前缀（参见[发行说明](http://ipython.org/ipython-doc/2/whatsnew/version2.0.html#directory-navigation)）。所以现在解决方案`<img src="image.png">`可以按预期工作。

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2014-04-22T13:23:24.270

我使用的是 ipython 2.0，所以只有两行。

```
from IPython.display import Image
Image(filename='output1.png') 
```

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2019-04-11T00:38:49.703

将图像导入 Jupyter NB 比大多数人在这里提到的要简单得多。

1.  只需创建一个空的 Markdown 单元格。
2.  然后将图像文件拖放到空的 Markdown 单元格中。

然后出现将插入图像的 Markdown 代码。

例如，下面以灰色突出显示的字符串将出现在 Jupyter 单元格中：

`![Venus_flytrap_taxonomy.jpg](attachment:Venus_flytrap_taxonomy.jpg)`

3.  然后按 Shift-Enter 执行 Markdown 单元格。然后 Jupyter 服务器将插入图像，然后图像就会出现。

我正在运行的 Jupyter 笔记本服务器是：5.7.4 with Python 3.7.0 on Windows 7。

这太简单了！！

截至 2021 年 3 月 18 日的更新：这种简单的“从 Windows 文件系统拖放”方法在 JupyterLab 中仍然可以正常工作。JupyterLab 插入正确的 HTML 代码，将图像直接永久地嵌入到笔记本中，因此图像存储在 .ipynb 文件中。我在 Windows 10 Python 3.7.9 上运行 Jupyter Lab v2.2.7 在 JupyterLab 中仍然有效。我在 Windows 10 上使用 Python 3.7.9 运行 Jupyter Lab v2.2.7。

去年某个时候，这在 Jupyter Classic Notebook v6.1.5 中停止工作。我向 Jupyter Classic Notebook 开发人员报告了一个错误通知。

它在最新版本的 Jupyter Classic Notebook 中再次起作用。我刚刚在 2021 年 7 月 15 日在 v6.4 中尝试过。谢谢 Jupyter NB 经典开发者！！

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2019-03-04T10:14:49.827

## 如果要在**Markdown 单元格**中显示图像，请使用：

```
<img src="files/image.png" width="800" height="400"> 
```

## 如果要在**代码单元格**中显示图像，请使用：

```
from IPython.display import Image
Image(filename='output1.png',width=800, height=400) 
```

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2015-10-23T02:59:07.707

[过时的]

IPython/Jupyter 现在支持扩展模块，可以通过复制粘贴或拖放插入图像。

[https://github.com/ipython-contrib/IPython-notebook-extensions](https://github.com/ipython-contrib/IPython-notebook-extensions)

拖放扩展似乎适用于大多数浏览器

[https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/dragdrop](https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/dragdrop)

但复制和粘贴仅适用于 Chrome。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-07-27T19:38:30.813

***首先确保您在 ipython 笔记本单元格中处于降价编辑模型中***

这是其他人提出的方法的替代方法`<img src="myimage.png">`：

```
![title](img/picture.png) 
```

如果缺少标题，它似乎也可以工作：

```
![](img/picture.png) 
```

请注意，路径中不应有引号。不确定这是否适用于带有空格的路径！

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2015-10-19T13:35:41.173

我将 IPython 笔记本与图像放在同一个文件夹中。我使用 Windows。图像名称是“phuong huong xac dinh.PNG”。

在降价：

```
<img src="phuong huong xac dinh.PNG"> 
```

代码：

```
from IPython.display import Image
Image(filename='phuong huong xac dinh.PNG') 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2019-09-24T15:28:46.613

在运行此代码之前，将默认块从“代码”更改为“Markdown”：

```
![<caption>](image_filename.png) 
```

如果图像文件在另一个文件夹中，您可以执行以下操作：

```
![<caption>](folder/image_filename.png) 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2018-02-01T10:19:31.790

最新版本的 jupyter notebook 本机接受图像的复制/粘贴

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-07-29T16:38:42.317

对于那些寻找在 Jupyter 机器上放置图像文件以便可以从本地文件系统显示的位置的人。

我把我`mypic.png`的

```
/root/Images/mypic.png 
```

（即显示在 Jupyter 在线文件浏览器中的 Images 文件夹）

在这种情况下，我需要将以下行放入 Markdown 单元格中，以使我的图片显示在记事本中：

```
![My Title](Images/mypic.png) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-10-29T16:44:37.687

minrk 的回答是正确的。

但是，我发现图像在打印视图中出现损坏（在我的 Windows 机器上，在 Chrome 浏览器中运行 IPython 版本 0.13.2 的 Anaconda 发行版）

解决方法是改为使用`<img src="../files/image.png">`。

这使得图像在打印视图和正常的 iPython 编辑视图中都正确显示。

更新：在我升级到 iPython v1.1.0 时，不再需要这种解决方法，因为打印视图不再存在。事实上，您必须避免这种变通方法，因为它会阻止 nbconvert 工具查找文件。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-13T16:23:37.787

我永远无法将“插入图像”放入降价单元格中工作。但是，拖放进入了与我的笔记本保存在同一目录中的png文件。它将此文本带入单元格

“”

shift + enter > 图像现在显示在笔记本中。

FWIW

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2019-11-13T13:10:18.063

您可以在 jupyter notebook 中通过不带引号的“pwd”命令找到您当前的工作目录。

# regex - 正则表达式仅匹配 第二个标签之后的标签

> ID：10628267
> 
> 赞同：1
> 
> 时间：2012-05-16T23:52:33.213
> 
> 标签：regex

伙计们，我需要一个只匹配
第二个标签之后的标签的正则表达式

例子：

```
<br/>
<br />
------------- Start match
<br />
<br/>
<br />
<br />
<br/>
<br />
<br />
<br/>
------------- End match 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:55:01.623

使用后面看：

```
(?s)(?<=(.*<br\s*/>.*){2})<br\s*/> 
```

### 编辑：

添加了“点匹配换行符”开关`(?s)`，以防输入有换行符

# javascript - 在 Javascript 中，如何将字符串的“标签”放入数组中？

> ID：10628274
> 
> 赞同：1
> 
> 时间：2012-05-16T23:53:30.623
> 
> 标签：javascript, regex

```
The quick brown #fox jumped over the #reallyBigFence. 
```

结果应该是：`['fox','reallyBigFence']`

所有标签都是无空格的，它们以哈希标签开头。

我是正则表达式的新手，但我认为这会起作用（不确定）：`/#([a-z0-9]+)/gi`

我该怎么处理那个正则表达式？。匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:55:05.410

是的，只是[`.match()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)：

```
var resultarray = "The quick brown #fox jumped over the #reallyBigFence."
   .match(/#([a-z0-9]+)/gi); 
```

match 方法将返回一个找到的子字符串数组（因为正则表达式具有全局标志），否则`null`如果没有找到。然而，它返回完整匹配的字符串而不是捕获组，因此上述结果将导致`["#fox","#reallyBigFence"]`. 由于 JavaScript 不知道[Lookbehind](http://www.regular-expressions.info/lookaround.html)，您需要在之后修复它

```
if (resultarray) // !== null
    for (var i=0; i<resultarray.length; i++)
        resultarray[i] = resultarray[i].substr(1); // remove leading "#" 
```

# django - 如何在 Django、csrf 令牌和 POST 请求中使用 curl

> ID：10628275
> 
> 赞同：55
> 
> 时间：2012-05-16T23:53:54.490
> 
> 标签：django, curl, django-forms, csrf, django-csrf

我正在使用 curl 来测试我的 Django 表单之一。我尝试过的调用（每个都有错误，为了便于阅读，多行）：

(1):

```
curl
-d "{\"email\":\"test@test.com\"}"
--header "X-CSRFToken: [triple checked value from the source code of a page I already loaded from my Django app]"
--cookie "csrftoken=[same csrf value as above]"
http://127.0.0.1:8083/registrations/register/ 
```

（带有 http 标头和`csrftoken`cookie）导致 400 错误，没有返回数据。

(2):

```
curl
-d "{a:1}"
--header "X-CSRFToken:[as above]"
--cookie "csrftoken=[as above];sessionid=[from header inspection in Chrome]"
http://127.0.0.1:8083/registrations/register/ 
```

（如 (1) 中，但在 header 属性声明中没有空格，并且`sessionid`在 cookie 中也有）导致相同的 400 错误，没有返回数据。

(3):

```
curl
-d "{a:1}"
--header "X-CSRFToken:[as above]"
http://127.0.0.1:8083/registrations/register/ 
```

（只有带有 的 http 标头`X-CSRFToken`，没有 cookie）导致错误代码 403，并显示消息：CSRF cookie not set。

如何使用 curl 测试我的表单？除了 cookie 值和 http 标头之外，我没有考虑哪些因素？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-09-12T19:02:59.477

达米安的回应和你的例子 2 对我有用。我用一个简单的登录页面来测试，我希望你的注册视图是相似的。Damien 的响应几乎可以正常工作，但缺少`sessionid`cookie。

我推荐一种更强大的方法。与其手动输入来自其他请求的 cookie，不如尝试使用 curl 内置的 cookie 管理系统来模拟完整的用户交互。这样，您就可以减少出错的机会：

```
$ curl -v -c cookies.txt -b cookies.txt host.com/registrations/register/
$ curl -v -c cookies.txt -b cookies.txt -d "email=user@site.com&a=1&csrfmiddlewaretoken=<token from cookies.txt>" host.com/registrations/register/ 
```

第一个 curl 模拟用户首次使用 GET 请求到达页面，并保存所有必要的 cookie。第二个 curl 模拟填写表单字段并将它们作为 POST 发送。请注意，您必须按照`csrfmiddlewaretoken`Damien 的建议在 POST 数据中包含该字段。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-17T01:03:12.153

尝试：

```
curl
 -d "email=test@test.com&a=1"
 http://127.0.0.1:8083/registrations/register/ 
```

特别注意参数的格式`-d`。

但是，这可能行不通，因为您的视图可能需要 POST 请求而不是 GET 请求。因为它将修改数据，而不仅仅是返回信息。

只有“不安全”请求（POST、PUT、DELETE）才需要 CSRF 保护。它通过对照“csrfmiddlewaretoken”表单字段或“X-CSRFToken”http 标头检查“csrftoken”cookie 来工作。

所以：

```
curl
 -X POST
 -d "email=test@test.com&a=1&csrfmiddlewaretoken={inserttoken}"
 --cookie "csrftoken=[as above]"
 http://127.0.0.1:8083/registrations/register/ 
```

也可以使用`--header "X-CSRFToken: {token}"`而不是将其包含在表单数据中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-15T10:24:49.440

我像这样使用 curl

*   您必须在标头中提交 csrftoken 作为 X-CSRFToken。
*   您必须以 JSON 格式提交表单数据。演示，

首先，我们将获取 csrf_token 并存储在 cookie.txt（或他们称之为 cookie.jar）中

```
$ curl -c cookie.txt http://localhost.com:8000/ 
```

cookie.txt 内容

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/docs/http-cookies.html
# This file was generated by libcurl! Edit at your own risk.
localhost.com  FALSE   /   FALSE   1463117016  csrftoken   vGpifQR12BxT07moOohREGmuKp8HjxaE 
```

接下来我们以json格式重新发送用户名、密码。（您可以以正常方式发送）。检查 json 数据转义。

```
$curl --cookie cookie.txt http://localhost.com:8000/login/   -H "Content-Type: application/json" -H "X-CSRFToken: vGpifQR12BxT07moOohREGmuKp8HjxaE" -X POST -d "{\"username\":\"username\",\"password\":\"password\"}" 
{"status": "success", "response_msg": "/"}
$ 
```

您可以将返回的新 csrf_token 会话 cookie 存储在同一文件或新文件中（我已使用选项 -c 存储在同一文件中。）

```
$curl --cookie cookie.txt http://localhost.com:8000/login/   -H "Content-Type: application/json" -H "X-CSRFToken: kVgzzB6MJk1RtlVnyzegEiUs5Fo3VRqF" -X POST -d "{\"username\":\"username\",\"password\":\"password\"}" -c cookie.txt 
```

- cookie.txt 的内容

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/docs/http-cookies.html
# This file was generated by libcurl! Edit at your own risk.

localhost.com  FALSE   /   FALSE   1463117016  csrftoken   vGpifQR12BxT07moOohREGmuKp8HjxaE
#HttpOnly_localhost.com    FALSE   /   FALSE   1432877016  sessionid   cg4ooly1f4kkd0ifb6sm9p 
```

当您在 cookie.txt 中存储新的 csrf_token 和会话 id cookie 时，您可以在整个网站上使用相同的 cookie.txt。

您正在从 cookie.txt (--cookie) 的先前请求中读取 cookie，并从同一 cookie.txt (-c) 中的响应中写入新的 cookie。

阅读和提交表单现在可以使用 csrf_token 和会话 id。

```
$curl --cookie cookie.txt http://localhost.com:8000/home/ 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-31T09:21:39.207

这是我使用其余框架教程的方法

打开浏览器，例如 chrome，然后按 F12 打开开发人员选项卡并监控网络，使用您的用户凭据登录并从监控 POST 中获取您的 CRSF 令牌

然后在 curl 中执行：

```
curl http://127.0.0.1:8000/snippets/ \
 -X POST \
 -H "Content-Type: application/json" \
 -H "Accept: text/html,application/json" \
 -H "X-CSRFToken: the_token_value" \
 -H "Cookie: csrftoken=the_token_value" \
 -u your_user_name:your_password \
 -d '{"title": "first cookie post","code": "print hello world"}' 
```

我认为不将令牌放入正文而是使用 X-CSRFToken 将标头放入更清洁

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-23T03:33:17.837

[curl-auth-csrf](https://github.com/JElchison/curl-auth-csrf)是一个基于 Python 的开源工具，能够为您执行此操作：“模仿 cURL，但执行登录并处理任何跨站点请求伪造 (CSRF) 令牌的 Python 工具。对于正常抓取 HTML 很有用只有登录后才能访问。”

这将是您的语法：

```
echo -n YourPasswordHere | ./curl-auth-csrf.py -i http://127.0.0.1:8083/registrations/register/ -d 'email=test@test.com&a=1' http://127.0.0.1:8083/registrations/register/ 
```

这将传递列出的 POST 数据，但也包括通过标准输入传递的密码。我假设您在“登录”后访问的页面是同一页面。

全面披露：我是 curl-auth-csrf 的作者。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-22T08:40:34.077

`X-CSRFToken`in headers 只需要与`csrftoken`in cookie 相同。

**例子：**

```
curl -v http://www.markjour.com/login/ -H "X-CSRFToken: 123" -b "csrftoken=123" -d "username=admin&password=admin" 
```

# apache - 替换 .htaccess 中 url 中的字符串

> ID：10628276
> 
> 赞同：0
> 
> 时间：2012-05-16T23:53:55.257
> 
> 标签：apache, .htaccess, url, mod-rewrite, url-redirection

我想重定向`www.hostname.com/some path/?cpao=12`到`www.hostname.com/some path/?kmas=12`.

基本上用这个词替换这个词`cpao`并`kmas`保持其他一切不变。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:32:39.363

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^cpao=([^&]*) [NC]
RewriteRule ^ %{REQUEST_URI}?kmas=%1 [R,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:07:40.460

```
RewriteRule ^hostname.com/somepath/\?cpao([0-9]+)$ hostname.com/somepath/\?kmas=$1 
```

您在 htaccess 中使用的正则表达式 $1 是在第 1 组中捕获的数字

# php - 强制 PRS-T1 浏览器下载带有 .htaccess-authentification 的文件

> ID：10628279
> 
> 赞同：1
> 
> 时间：2012-05-16T23:54:06.487
> 
> 标签：php, .htaccess, authentication, download, ebook-reader

我有一个看起来像这样的 php-download 脚本：

```
<?php
header("Pragma: public"); // required
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false); // required for certain browsers 
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=\"$file\"");
header("Content-Type: $mimeType");
header("Content-Transfer-Encoding: binary");
header("Content-Length: $size");
// Read the file from disk
readfile($path);
?> 
```

通常，我可以强制我的电子书阅读器（索尼 PRS-T1）下载文件。但是，如果我在带有 .htaccess-authentication 的文件夹中使用相同的脚本，下载将失败。

在我的电脑上，无论是否有 .htaccess-authentication，下载都有效。

你能帮我找出我的电子书阅读器出现这种行为的原因，并让受保护文件夹内的下载成为可能吗？

谢谢！

[编辑] PRS-T1 运行 Android。也许[这个问题（链接）](http://code.google.com/p/android/issues/detail?id=1353)是答案 - 这根本不可能......？

# perl - 在 Perl 脚本中更改 shell

> ID：10628280
> 
> 赞同：1
> 
> 时间：2012-05-16T23:54:23.423
> 
> 标签：perl, shell, unix

我正在寻找一种完成以下工作的好方法：

因此，我有一个脚本，我需要通过调用 Perl 脚本在 Unix 中的 Python 中运行该脚本，而 Perl 脚本又使用 Plink 从 Windows 中的 Excel VBA 宏调用。由于依赖问题，Python 脚本必须在 csh 或 bash 中运行，我需要在运行脚本之前使用 export/setenv 添加一些库。但是默认情况下，perl 在 sh shell 中运行，因此，我无法添加所有依赖项并让 Python 脚本运行。

所以，我只是想知道是否有：1.一种方法让我在 perl 脚本中向 sh shell 添加依赖项，或者 2.强制我的 perl 脚本在 csh 中运行（首选，因为出于某种原因 .bashrc 用于帐户遇到权限问题）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:25:16.313

“3\. 在 Perl 或 Python 脚本中设置适当的环境变量”怎么样？

```
$ENV{'PATH'} = ... 
```

...

```
os.environ['PATH'] = os.pathsep.join(newpaths + os.environ['PATH'].split(os.pathsep)) 
```

（不知道如何在 Perl 中获取路径分隔符，sorz）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:00:09.060

要强制外壳`csh`，请在 Perl 中尝试以下操作：

```
`/bin/csh -c "command_name"`; 
```

**编辑**：

您可以像这样使用 ENV 变量。试试看：

```
$s = `/bin/bash -c 'VAR_FOO=753; echo \$VAR_FOO'`;
print $s; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:56:16.990

我最终只是更改了 .cshrc 脚本，显然是 PATH 的添加，出于某种原因，对我不起作用。之后，通过将所有内容放在一条线上，一切都顺利进行

所以基本上它看起来像这样

```
/path/to/.cshrc && /python/path/to/python 
```

希望有帮助！

# ruby-on-rails - 不使用 Postgres 时，“pg 不是捆绑包的一部分。将其添加到 Gemfile”

> ID：10628282
> 
> 赞同：1
> 
> 时间：2012-05-16T23:54:45.443
> 
> 标签：ruby-on-rails, ruby

这是我的问题：

*   我创建了一个新项目：`rails new myapp`.
    Rails 应用程序默认配置为使用 SQLite3 数据库。

*   我执行`bundle exec rake db:create`. 它工作并创建了 SQLite3 数据库。

*   我尝试创建一个新模型（或与数据库相关的任何其他内容），并收到以下错误：

    > /home/dinduks/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': Please install the postgresql adapter:`gem install activerecord-postgresql-adapter`（pg不是一部分包。将它添加到 Gemfile。）（LoadError）

*   当我添加控制器和操作并尝试访问它时，我收到此错误：

    > ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished)

    完整的堆栈跟踪可以在这里找到：[https](https://gist.github.com/2717365)
    ://gist.github.com/2717365 WEBrick 服务器显然没有抱怨就启动了。

我重新安装了 Rails，重新安装了 Ruby，使用了另一个 Ruby 版本，重新安装了 RVM ......并且一直收到同样的错误。

我的代码中**没有**与*PostgreSQL*、*postgres*、*pg*或*pql*相关的内容。一个字都没有。

我不想做异常所暗示的事情。我想了解为什么我有这个错误并修复它。

所以：为什么 Rails 要求我安装一些 Postgres 的东西，而**我不使用 Postgres**？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T15:35:57.800

问题是`DATABASE_URL`环境变量。
当 ActiveRecord 找到`$DATABASE_URL`时，它会自动使用它的信息，并忽略*config/database.yml*。

感谢 NARKOZ 指出这一点。

（顺便说一句，我在发现[foreman](https://devcenter.heroku.com/articles/config-vars#local_setup)之前设置了这个环境变量，这是一个管理环境变量的好工具）

# ruby-on-rails-3 - Rails Savon SOAP 身份验证

> ID：10628294
> 
> 赞同：2
> 
> 时间：2012-05-16T23:56:27.613
> 
> 标签：ruby-on-rails-3, authentication, soap, savon

我正在 Rails 3 上开发并使用 Savon(savonrb.com)

1.  我需要通过 SOAP 连接到 Web 服务
2.  Web 服务需要身份验证

我可以连接但无法获得身份验证...

我使用 SOAP UI 进行测试，一切正常。

我的 Rails 代码如下所示：

```
client = Savon::Client.new do
  wsdl.document = "http://services.blahblah.com/Service.asmx?WSDL"
end

client.wsse.credentials "username", "password", :digest

if response.success?

  @soap_status = 'Connected'
  @data = response.to_array(:get_brochure_response, :error_message)

end 
```

我得到响应但 :error_message 返回身份验证失败...

这是它在 SOAP UI 中的外观

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ser="http://services.blahblah.com/service">
   <soap:Header>
      <ser:ICEAuthHeader>
         <!--Optional:-->
         <ser:Username>username</ser:Username>
         <!--Optional:-->
         <ser:Password>password</ser:Password>
      </ser:ICEAuthHeader>
   </soap:Header>
   <soap:Body>
      <ser:GetBrochure>
    <!--Optional:-->
         <ser:MappedID>123</ser:MappedID>
      </ser:GetBrochure>
   </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T12:35:00.047

用户名和密码是否与标头中的 SOAP 请求一起发送？如果是这样，您可以在初始化 Savon 客户端时执行此操作（请参阅[cannot set SOAP header parameters on savon call](https://stackoverflow.com/questions/18466054/cannot-set-soap-header-parameters-on-savon-call)）：

```
client = Savon.client(
    wsdl: SOAP_WSDL,
    endpoint: SOAP_URL,
    soap_header: { :username => username, :password => password }
) 
```

顺便说一句，如果只有某些调用需要身份验证，您可以像这样进行调用：

```
response = client.call(
    :soap_call,
    :soap_header => { :username => username, :password => password },
    message: {message}
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:30:02.897

您可以尝试使用基本身份验证进行身份验证：

```
client = Savon::Client.new do
  wsdl.document = "http://services.blahblah.com/Service.asmx?WSDL"
  http.auth.basic "username", "password"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-18T06:49:52.510

```
client = Savon.client( wsdl: 'http://service.example.com?wsdl',soap_header: { "AuthenticateRequest" => {"apiKey" => "****** your api *********"}}, pretty_print_xml: true)

client.operations

response = client.call(:function) 
```

# 这里的“apiKey”是我用来验证 api 的婴儿车，你可以不一样

# java - 如何在客户端和服务器之间传输多个文件？

> ID：10628295
> 
> 赞同：2
> 
> 时间：2012-05-16T23:56:53.790
> 
> 标签：java, sockets, client, file-transfer

我重写了一个服务器和客户端之间文件传输代码的简单示例。

它有效。

但我想让它能够传输特定目录中的多个文件。用户将写入文件名（位于该特定目录中），客户端将从服务器下载它们。我怎样才能做到这一点？有任何想法吗？谢谢你。

客户端代码：

```
 import java.net.*;
    import java.io.*;

    public class Client {

        static String hostname = "127.0.0.1";
        static int port = 4588;
        static int processedByte; 
        static byte[] theByte = new byte[1];

        static Socket client = null; 
          static InputStream inuputSt = null; 

        public static void main(String[] args) throws InterruptedException {
            System.out.println("connecting...");
            Thread.sleep(500);
            try { 
                client = new Socket(hostname, port); 
                inuputSt = client.getInputStream(); 
            } catch (IOException ex) { 
                System.out.println("connection error.");
            } 

            ByteArrayOutputStream arrayOutput = new ByteArrayOutputStream(); 

            if (inuputSt != null) { 

                FileOutputStream fileOutput = null; 
                BufferedOutputStream bufferedOutput = null; 
                try { 
                    System.out.println("downloading target file...");
                    Thread.sleep(800);
                    fileOutput = new FileOutputStream("file1_downloaded.txt"); 
                    bufferedOutput = new BufferedOutputStream(fileOutput); 
                    processedByte = inuputSt.read(theByte, 0, theByte.length); 

                    do { 
                            arrayOutput.write(theByte); 
                            processedByte = inuputSt.read(theByte); 
                    } while (processedByte != -1); 

                    bufferedOutput.write(arrayOutput.toByteArray()); 
                    bufferedOutput.flush(); 
                    bufferedOutput.close(); 
                    System.out.println("file downloaded");
                    client.close(); 
                } catch (IOException ex) { 
                    System.out.println("file transfer error."); 
                } 
            }

        }
    } 
```

服务器代码：

```
import java.net.*;
import java.io.*;

public class Server {
static int port = 4588;
public static void main(String[] args) {

    while (true) {
        ServerSocket server = null; 
        Socket connection = null; 
        BufferedOutputStream bufferedOutput = null; 

        try { 
            server = new ServerSocket(port); 
            connection = server.accept(); 
            bufferedOutput = new BufferedOutputStream(connection.getOutputStream()); 
        } catch (IOException ex) { 
            // Do exception handling 
        } 

        if (bufferedOutput != null) { 
            File fileToSend = new File("files\\file1.txt"); 
            byte[] mybytearray = new byte[(int) fileToSend.length()]; 

            FileInputStream fileInputSt = null; 

            try { 
                fileInputSt = new FileInputStream(fileToSend); 
            } catch (FileNotFoundException ex) { 
                // exception stuff
            } 
            BufferedInputStream bufferedInput = new BufferedInputStream(fileInputSt); 

            try { 
                bufferedInput.read(mybytearray, 0, mybytearray.length); 
                bufferedOutput.write(mybytearray, 0, mybytearray.length); 
                bufferedOutput.flush(); 
                bufferedOutput.close(); 
                connection.close(); 

                //file1.txt has been downloaded
                return; 
            } catch (IOException ex) { 
                // exception stuff
            } 
        } 
    } 
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T23:00:23.583

您建议将 HTTP 作为您的客户端和服务器的协议——HTTP 是一个很好的协议，但如果您想自己完成整个事情，则可能是一个很大的实现障碍。[HTTP`PUT`动词](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)可用于上传文件，以这种方式使用 HTTP 的好处是您的客户端和服务器可以与其他旨在使用请求的工具进行通信`PUT`。（`PUT`与其他 HTTP 动词相比使用较少，因此并非所有 HTTP 工具都可以工作；该`curl(1)`程序*确实*`PUT`通过命令行选项支持`-T`。如果您选择 HTTP，这将是一个很好的实施帮助。）

有多种[REST 框架](http://en.wikipedia.org/wiki/Representational_state_transfer#Framework_implementations)可以帮助您编写 HTTP 软件；我听说过有关[Restlet](http://wiki.restlet.org/docs_2.1/13-restlet/21-restlet/318-restlet.html)的好消息，这将是我推荐的起点。

但是您不必*选择*HTTP 作为您的协议。我认为如果你实现自己的协议，你可以学到*很多*关于网络编程的知识——它会教你很多关于 API 设计和套接字编程的知识，而这些知识是使用预先编写的 HTTP 协议工具难以学习的（并且*令人沮丧*）如果您尝试自己完全实现 HTTP）。

考虑一下这段对话：

客户端->服务器：上传名为“flubber”的文件，大小为200000字节
服务器->客户端：ok
客户端->服务器：*flubber内容*
服务器->客户端：ok
客户端->服务器：上传名为“blort”的文件，大小为10字节
服务器->客户：错误，文件存在
...

您可能希望添加新命令以在两端对文件进行散列以确保文件传输成功，用于发送特定字节范围的命令（附加到现有文件或重新开始失败的传输），列出现有文件的命令服务器上的文件名、覆盖现有文件的命令、从服务器删除文件的命令等等。编写自己的协议的最佳部分是您可以决定您的程序将支持什么。缺点是您可以测试您编写的功能，并且测试某些情况可能很困难。（假设客户端可能会在不同的 TCP 数据包中发送命令的每个字符。实现缓冲以存储整个命令并*非易事*，但使用 Restlet 等工具已经为您完成了。）

[Juan 关于使用多个 TCP 会话的建议](https://stackoverflow.com/a/10628346/377270)并不是绝对必要的——尽管这对您来说可能是最简单的方法。您需要添加*一些*机制来向远程对等方提供文件名，这可能最好通过“控制”通道（运行的第一个会话 - 类似于 FTP）来完成，或者它可能是您在文件的内容（类似于 HTTP）。

不过，我建议*避免*使用多个连接——每个连接需要三倍于系统之间的往返时间来设置和开始传输字节。这种延迟可能*非常*烦人，尤其是当您尝试传输数百个小文件时。您甚至可以花费比实际发送数据更多的时间来建立连接。

但它是你的工具——你可以随心所欲地设计它。玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:06:07.980

我认为您需要为每个文件创建一个新连接，以便在这种情况下您可以同时传输文件。

您可能必须修改服务器以为每个客户端连接创建一个新线程（或从线程池中获取一个），以便它可以同时与多个连接工作。

然后，您可以为每个文件运行一次客户端。

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T00:30:19.450

好的，您可以传输多个文件以制作 ArrayList 或 List 文件。在退出文件系统路径后进入阵列。我希望能帮助你。

# c - Minix3 进程表 (proc.h)

> ID：10628296
> 
> 赞同：2
> 
> 时间：2012-05-16T23:56:54.350
> 
> 标签：c, operating-system, int, minix

任何人都知道为什么 Minix 中 proc.h 中的某些字段是 char，而我认为它们是 int？

```
 37   char p_ticks_left;            /* number of scheduling ticks left */

 38   char p_quantum_size;          /* quantum size in ticks */ 
```

那么，如果我们想添加一个新的“int”字段，我们应该将其设为 char 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:23:35.117

如果`char`足够大以容纳所有必要的值，为什么不使用它呢？当然，`int`性能可能会更高一些，但同时`char`通常更小。

我相信你可以使用任何有意义的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:01:16.813

从设计上考虑，也许保存“剩余调度刻度数”和“刻度中的量子大小”的值就足够了。并且 char 的大小小于 int 的大小。

# python - 在本地保存 XLS 文件

> ID：10628297
> 
> 赞同：1
> 
> 时间：2012-05-16T23:57:01.143
> 
> 标签：python, plone, xls

我有一个非常奇怪的问题。我有一个事件集，用于修改我创建的具有文件字段的内容类型。将上传的文件是 XLS 文件，我想在本地保存一份副本。

现在，这就是奇怪的地方。当我处于前台模式时，触发事件时文件保存没有任何问题。但是，当我正常运行实例（./bin/instance start）时，我得到一个 IOError（见下文）。然而，无论我处于前台模式还是后台模式，我都尝试创建一个可以正常工作的测试“Hello World”.txt 文件。

有什么想法吗？非常感谢提前！

帕特里克

我在 SLES 10 服务器上使用 Plone 4.0.1。

错误：

```
...        
Module patrick.cm.content.events, line 95, in q_changed
IOError: [Errno 2] No such file or directory: u'process/test-file.xls' 
```

编码：

```
def q_changed(obj, event):
    if obj.xls_file.getSize() > 0:                       
        filename = getattr(obj.xls_file, 'filename')

        save_questionnaire = open('process/%s' % (filename), 'wb')     #Line 95 
        q_data = str(obj.xls_file.data)   
        save_questionnaire.write(q_data)
        save_questionnaire.close() 
```

此代码有效：

```
def q_changed(obj, event):
    save_questionnaire = open('process/test.txt', 'wb')     
    save_questionnaire.write('Hello World!')
    save_questionnaire.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:25:55.897

前台模式和后台模式有不同的工作目录。

解决方案：使用绝对路径！

# objective-c - UIViewController 的随机释放

> ID：10628298
> 
> 赞同：1
> 
> 时间：2012-05-16T23:57:02.540
> 
> 标签：objective-c, uiview, uiviewcontroller

我正在调试一个 iOS 应用程序崩溃问题。我有一个`UIViewController`我定义它`UIView`的地方`loadView`。我还保留了 的副本，`UIView`以便我可以向它发送消息，例如（视图已旋转）那种性质的东西。除此之外，`UIView`它还有自己的委托成员（使用分配，不保留对父级的引用），其中包含与父级的关联。（这是 Apple 文档之一中使用的模式 - 我想知道这是否不是我的问题的一部分，因为两个对象之间存在循环引用）

这是对象的分层视图：

`UIViewController` + `UIView` +`NSNotificationCenter UIKeyboardDidShow`

当`NSNotification`for`UIKeyboardDidShow`触发并调用父委托方法时会出现此问题。我知道委托已*设置*。然而，不知何故，代表在某个地方被释放了。此外，*仅*`_bufferViewDelegate`设置一次。最后，这种情况并非每次都会发生。它很少发生。

 *这是堆栈跟踪：

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x325f288f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x34648259 objc_exception_throw + 33
2   CoreFoundation                  0x325f5a9b -[NSObject doesNotRecognizeSelector:] + 175
3   CoreFoundation                  0x325f4915 ___forwarding___ + 301
4   CoreFoundation                  0x3254f650 _CF_forwarding_prep_0 + 48
5   Buffer                          0x0008716d -[BufferView scrollToCursor] (BufferView.m:4348)
6   Buffer                          0x00080407 -[BufferView keyboardDidShow:] (BufferView.m:1379)
7   Foundation                      0x37f3d4ff __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 19
8   CoreFoundation                  0x325be547 ___CFXNotificationPost_block_invoke_0 + 71
9   CoreFoundation                  0x3254a097 _CFXNotificationPost + 1407
10  Foundation                      0x37eb13eb -[NSNotificationCenter postNotificationName:object:userInfo:] + 67
11  UIKit                           0x3209f029 -[UIInputViewTransition postNotificationsForTransitionEnd] + 789
12  UIKit                           0x3233a51f __53-[UIPeripheralHost(UIKitInternal) executeTransition:]_block_invoke_01008 + 159
13  UIKit                           0x320344db -[UIViewAnimationBlockDelegate _didEndBlockAnimation:finished:context:] + 215
14  UIKit                           0x3202eaab -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] + 471
15  UIKit                           0x320343d5 -[UIViewAnimationState animationDidStop:finished:] + 53
16  QuartzCore                      0x342dbc2f CA::Layer::run_animation_callbacks(void*) + 203
17  libdispatch.dylib               0x35c4ae91 _dispatch_main_queue_callback_4CF$VARIANT$up + 197
18  CoreFoundation                  0x325c52ad __CFRunLoopRun + 1269
19  CoreFoundation                  0x325484a5 CFRunLoopRunSpecific + 301
20  CoreFoundation                  0x3254836d CFRunLoopRunInMode + 105
21  GraphicsServices                0x3169f439 GSEventRunModal + 137
22  UIKit                           0x32047cd5 UIApplicationMain + 1081
23  Buffer                          0x0005c20b main (main.m:20)
24  Buffer                          0x0005bcac start + 40 
```

**更新 2：**

解决了这个问题。我所做的是将 NSLog 语句放在控制器和所有子视图中，以确定是否所有内容都按我预期的那样发布。不是。我所期望的，并且大部分时间都发生了，是这样的：

```
UIViewController loadView <-- Open the view, init the BufferView
UIViewController dealloc
BufferView dealloc 
```

发生的事情是，有时 BufferView 从未调用过它的 dealloc 方法！

UIViewController 中的代码如下所示：

```
- (void)loadView
{
    ...

    // bufferView is a member var of this particular UIViewController
    bufferView = [[BufferView alloc] init];
    [self addSubview:view];

    ...
} 
```

当 UIViewController dealloc 方法被调用时，我会释放 bufferView。

```
- (void)dealloc
{
    ...

    [bufferView release];
    bufferView = nil;

    ...

    [super dealloc];
} 
```

当我在 loadView 中将代码更改为此时：

```
- (void)loadView
{
    ...

    // bufferView is a member var of this particular UIViewController
    bufferView = [[BufferView alloc] init];
    [self addSubview:view];
    [bufferView release];

    ...
} 
```

并删除了 dealloc 中的 release 命令，一切都按我的预期开始工作。似乎最佳做法是在将视图添加到子视图后释放视图。我在其他应用程序中看到过这种模式，但从来不明白为什么必须这样。希望这可以帮助其他人。

请注意，我已经一天多没有遇到崩溃了。这比以前好多了。如果结果证明这是错误的解决方案，我将更新票证。

**更新 3**

以上没有奏效。我现在在 UIViewController viewWillAppear、viewDidDisappear 方法中注册/注销通知。问题解决了。据我所知，每个人的建议是将 [[NSNotification defaultCenter] removeObserver:self] 调用放入 dealloc。这根本不是一个好主意。您**不能**依赖系统在您期望它发生的时间范围内释放您的对象。也许在某些情况下它会工作得很好，但不是全部。我建议您仅在需要时尝试注册/取消注册呼叫。在我的情况下，我只在显示视图时才需要它们，而在不显示视图时取消注册。一天免费崩溃（我们会看到持续多长时间）。几天后我会更新我的成功。

**更新 4**

这就是问题所在。没有更多的崩溃。因此，请确保仅在绝对需要时才注册观察者，并在不需要时取消注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:46:07.550

要找出对象何时被释放，请在其`dealloc`例程中放置一个 NSLog。并且在 中放置地址停止`dealloc`将允许您显示调用堆栈并查看谁在执行`release`释放对象的操作。

我怀疑你所拥有的是对象实际上比你想象的更快地被释放，但是在计时器事件期间，存储被回收，那就是检测到错误的时候。*

# javascript - 用 javascript 理解查询字符串

> ID：10628299
> 
> 赞同：1
> 
> 时间：2012-05-16T23:57:22.933
> 
> 标签：javascript, variables, query-string

有一个小的 javscript，用户可以将其包含到他们的网站中，如下所示：

```
<script src="http://www.mydomain.com/stuff.js?id=99" type="text/javascript"></script> 
```

一旦包含在内，这会为他们的页面添加一个可点击的链接，到目前为止一切正常。

现在对于我坚持的部分，在 stuff.js 我们需要能够在函数中使用 id 的值（在本例中为 99）

例子：

```
destination = escape('http://mydomain.com/index.php?refferal=ID-VALUE-HERE'); 
```

基本上只需要将 ID_VALUE_HERE 替换为 99

任何想法或提示如何完成这个相对简单的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:01:25.033

您可以遍历文档中的所有脚本元素，搜索加载脚本的元素并从其属性中提取任何参数。

然而，使用（一些小而非常简单的）服务器端处理将 url 参数直接回显到交付的源代码中会更好。不要忘记正确地逃脱它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T00:01:31.897

1：更改您的服务器配置以将 .js 文件解释为 php 文件。
2：添加到您的 .js 文件中：

```
var id = "<?php echo !empty($_REQUEST['id']) ? $_REQUEST['id'] : '' ?>"; 
```

如果您无法重新绑定文件处理，您也可以使用 .htaccess 和 mod rewrite 修复它。

# git - 使用 Redmine 对 Git 服务器的 Active Directory 支持

> ID：10628300
> 
> 赞同：0
> 
> 时间：2012-05-16T23:57:32.913
> 
> 标签：git, active-directory, redmine

较早的一个关于 Git 是否可以使用 Active Directory 身份验证的问题包括用户[faken的](https://stackoverflow.com/users/605790/faken)[这个答案](https://stackoverflow.com/a/9070883/216440)，这表明 Redmine 是一种很好的方法。一次偶然的机会，我的一位同事在前一天建议我们在实施 Git 时包括[Redmine](http://www.redmine.org)，所以我很感兴趣。

我的问题是：以这种方式设置 Redmine 和 Git 有多容易？

我问的原因是，在工作中，人们厌恶复杂的安装过程，这些过程需要来自不同来源的六个或更多组件，并且需要几天的学习时间。无论对错，这种装置被认为非常脆弱，有两个原因：

1.  对独立项目的多重依赖，在未来的版本中可能不一定能很好地协同工作；
2.  启动和运行各种组件需要一个漫长的学习和实验期，大约一两天，这是忙碌的系统管理员无法承受的。

不是想在这里拖钓，但我知道当我向他展示上面faken早期答案中链接的说明时，我的老板的第一反应是什么。但是，我不想通过封面来判断一本书，并根据该说明页面的第一印象写下Redmine。我真的很希望能够去找我的老板，给他看一个类似这样的答案：我们已经完成了，并不痛苦，花了这么长时间，这些是需要注意的几件事.

干杯西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:47:28.297

如果您通过 HTTP 使用 Git，您可以轻松地使用它`SPNEGO`来保护您的存储库，如果 Redmine 支持读取`$REMOTE_USER`var，您可以让网络服务器执行身份验证。`mod_auth_kerb`或者`mod_auth_gss`很好地服务这个。

# c - 如何根据图像宽度和高度在opencv中动态绘制矩形？

> ID：10628304
> 
> 赞同：2
> 
> 时间：2012-05-16T23:58:03.103
> 
> 标签：c, image-processing, opencv, roi

我想根据图像的宽度和高度在opencv中绘制一个矩形（即我不想给静态值`cvRectangle`）我想绘制一个矩形，它覆盖任何大小图像的大部分区域，换句话说我想在每个图像中绘制最大的矩形，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:29:37.807

i have tried that and it works well

```
IplImage *img=cvLoadImage(fileName,CV_LOAD_IMAGE_COLOR);
             int imageWidth=img->width-150;
             int imageHeight=img->height-150;
             int imageSize=img->nSize;
             cvRectangle(img,cvPoint(imageWidth,imageHeight), cvPoint(50, 50),cvScalar(0, 255, 0, 0),1,8,0);
             cvSetImageROI(img,cvRect(50,50,(imageWidth-50),(imageHeight-50))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:25:01.607

可能是，您想使用百分比尺寸？

```
IplImage *img=cvLoadImage(fileName,CV_LOAD_IMAGE_COLOR);

int imageWidth  = img->width;
int imageHeight = img->height;
int imageSize   = img->nSize;

int ratio     = 90; // our ROI will be 90% of our input image

int roiWidth  = (int)(imageWidth*ratio/100);
int roiHeight = (int)(imageHeight*ratio/100);

// offsets from image borders
int dw = (int) (imageWidth-roiWidth)/2;
int dh = (int) (imageHeight-roiHeight)/2;

cvRectangle(img,
            cvPoint(dw,dh),                     // South-West point 
            cvPoint(roiWidth+dw, roiHeight+dh), // North-East point
            cvScalar(0, 255, 0, 0), 
            1, 8, 0);

cvSetImageROI(img,cvRect(dw,dh,roiWidth,roiHeight)); 
```

因此，现在，如果您设置 ratio = 90，并且您的输入图像是 1000x1000 像素，那么您的 ROI 将是 900x900 像素，并且它将位于图像的中心。

# java - 如何从 InstallAnywhere 启动 java 代码？

> ID：10628308
> 
> 赞同：0
> 
> 时间：2012-05-16T23:58:45.400
> 
> 标签：java, installanywhere

我想从 jar 文件中启动静态函数并在安装期间接收它的返回值。有没有其他方法，而不是执行java.exe？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T21:22:15.507

我真的无法理解拒绝投票的原因......

您可以在安装期间通过从 InstallAnywhere 的 CustomCodeAction 扩展来运行自定义代码。您需要做的就是覆盖基类的`install`和`uninstall`方法。请在下面找到示例代码的片段。

```
public class MyCustomCodeAction extends CustomCodeAction {
    public void install(InstallerProxy proxy) throws InstallException {
        // call the static function of your jar here
    }

    public void uninstall(UninstallerProxy Uproxy) throws InstallException {
        // you can do something here if you need (not must)
    }
} 
```

祝你好运！

# powershell - Powershell - 将对象放置在管道上时，以后可以再次使用它吗？

> ID：10628309
> 
> 赞同：2
> 
> 时间：2012-05-16T23:58:57.670
> 
> 标签：powershell

我有一组对象，我试图从中返回多组数据。每次我想选择对象的一个​​属性并对其进行唯一排序。

我遇到的问题是我只有在第一次使用该集合时才能得到结果。这让我想知道当我将对象放在管道上时是否正在“消耗”它们。

用一个例子来说明：

```
$results = getMyCollectionOfObjects

$results | select-object property1 | sort-object -unique property1
$results | select-object property2 | sort-object -unique property2
$results | select-object property3 | sort-object -unique property3 
```

据我所知，这应该会导致三个不同的列表，其中包含三个属性中每一个的所有可能值。

但是对我来说，这就像 $results 值在第一次被选择时被“用完”。

是这种情况吗？我应该怎么做？

希望这很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T01:45:11.230

这就是它的滚动方式......你必须*明确地*将它们传递给 Out-Default 以摆脱这种奇怪的行为。否则，它也会尝试显示第二组和第三组的 property1。您从 $results 中删除了它，所以它返回空白。

HTH 巴特克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T04:03:29.133

所以这让我绊倒并挠了挠头或一分钟。事实证明，答案非常简单：Select-Object cmdlet 返回一个类型为 的对象`Selected.System.Management.Automation.PSCustomObject`。然后将其沿管道传递给以下两个选择，但由于不再有任何匹配的属性（它们从第一个选择中被丢弃） - 没有任何输出。考虑以下示例：

```
# declare an array and populate it
$results = @()
$results = $results + (New-Object PSobject -Property @{
P1 = "One"
P2 = "Two"
P3 = "Three"
})
$results = $results + (New-Object PSobject -Property @{
P1 = "Uno"
P2 = "Dos"
P3 = "Tres"
})

$results | select P1
$results | select P2
$results | select P3 
```

正如你所描述的，我只是从第一个选择中获得输出。我他们接受了 BartekB 的建议，将其放在`| Out-Default`每行的末尾并开始工作。我通过将其替换`| Get-Member`为查看被放置在管道上的对象进行了进一步调查：

```
$results | select -Property P1 | get-member

    TypeName: Selected.System.Management.Automation.PSCustomObject

Name        MemberType   Definition                    
----        ----------   ----------                    
Equals      Method       bool Equals(System.Object obj)
GetHashCode Method       int GetHashCode()             
GetType     Method       type GetType()                
ToString    Method       string ToString()             
P1          NoteProperty System.String P1=One 
```

简而言之，Out-Default 需要实际强制它显示在控制台上，而不是将其传递给下一个语句。在交互式 shell 中完成语句时似乎暗示了这种行为，但在完全编写脚本时行为会有所不同。

# html - 我的代码中有错误还是与我的 Firefox 12 浏览器有关？

> ID：10628310
> 
> 赞同：0
> 
> 时间：2012-05-16T23:58:58.187
> 
> 标签：html, xml, dom

我从教程中复制了以下代码，但仍然无法弄清楚我是否在某个地方犯了错误，或者它是否与浏览器支持有关。提前感谢您向我指出发生的事情！

```
<html>
<head>
<script type="text/javascript">

function loadXMLDoc(dname)
{   
    if(window.XMLHttpRequest)
    {
        xhttp = new XMLHttpRequest();
    }
    else
    {
        xttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xhttp.open("GET", dname, false);
    xhttp.send();
    return xhttp.responseXML;
}

function change(text)
{
    var xmlDoc = loadXMLDoc("dom.xml");
    var x = xmlDoc.getElementsByTagName("title")[0].childNodes[0];

    x.nodeValue = text;

    var y = xmlDoc.getElementsByTagName("title");
    for(i=0; i<y.length; i++) 
    {
        document.write(y[i].childNodes[0].nodeValue+"<br />");
    }
}

function remove(node)
{
    xmlDoc = loadXMLDoc("dom.xml");
    var y = xmlDoc.getElementsByTagName(node)[0];

    xmlDoc.documentElement.removeChild(y);
    alert("The element "+node+" has been removed!");
}

function prove(u)
{
    var x = xmlDoc.getElementsByTagName(u);
    for (i=0; i<x.length; i++)
    {
        document.write(x[i].childNodes[0].nodeValue);
        document.write("<br />");
}

</script>
</head>
<body>
    <input type="button" value="remove" onclick="remove('book')" />
    <input type="button" value="prove it" onclick="prove('book')" />
</body>

</html> 
```

- - - - - - 更新 - - - - - - - - - - - - -

这是一个可能有帮助的 XML 文件：

```
<bookstore>
    <book category="cooking">
        <title lang="en">Everyday Italian</title>
        <author>Giada</author>
        <year>2005</year>
        <price>30.00</price>
    </book>
    <book category="cooking">
        <title lang="en">Book 2</title>
        <author>Giada</author>
        <year>2005</year>
        <price>30.00</price>
    </book>
    <book category="cooking">
        <title lang="en">Book 3</title>
        <author>Giada</author>
        <year>2005</year>
        <price>30.00</price>
    </book>
</bookstore> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:38:42.300

I think the problem might be because of `document.write`

> Any document.write statement that runs after the page finishes loading will create a new page and overwrite all of the content of the current page.

Also there is a `}` missing after the `for` statement of prove function

Try using `innerHTML` on a `div` or some html element to overcome this issue.

Other than that I don't find any issues with your code

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:03:41.233

该脚本正在寻找一个名为“dom.xml”的文件

如果您将该文件放在与上述页面相同的目录中，您将得到不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T00:12:48.903

看起来您缺少最后一个函数证明或 for 循环的括号。

你也可能想声明

```
var xmlDoc = loadXMLDoc("dom.xml"); 
```

在每个函数之外，或将其添加到provide()

# xslt - 根据其他元素的值删除元素——XSLT

> ID：10628311
> 
> 赞同：2
> 
> 时间：2012-05-16T23:59:14.540
> 
> 标签：xslt, nodes

我有一个样式表，用于根据其他元素的值删除某些元素。但是，它不起作用...

示例输入 XML

```
<Model>
<Year>1999</Year>
<Operation>ABC</Operation>
<Text>Testing</Text>
<Status>Ok</Status>
</Model> 
```

如果 Operation 值为“ABC”，则从 XML 中删除 Text 和 Status 节点。并给出以下输出。

```
<Model>
<Year>1999</Year>
<Operation>ABC</Operation>
</Model> 
```

这是我正在使用的样式表，但即使操作不是“ABC”，它也会从所有 XML 中删除文本和状态节点。

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:variable name="ID" select="//Operation"/>
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="Text | Status">
    <xsl:if test ="$ID ='ABC'">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

提前致谢

当命名空间存在时我将如何做同样的事情

```
<ns0:next type="Sale" xmlns:ns0="http://Test.Schemas.Inside_Sales"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T04:24:29.717

**这是一个完整的 XSLT 转换——简短而简单**（没有变量，没有`xsl:if`, `xsl:choose`, `xsl:when`, `xsl:otherwise`）：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "*[Operation='ABC']/Text | *[Operation='ABC']/Status"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<Model>
    <Year>1999</Year>
    <Operation>ABC</Operation>
    <Text>Testing</Text>
    <Status>Ok</Status>
</Model> 
```

**产生了想要的正确结果：**

```
<Model>
   <Year>1999</Year>
   <Operation>ABC</Operation>
</Model> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T00:26:15.980

更改`xsl:if`如下：

```
<xsl:if test="../Operation!='ABC'"> 
```

你可以摆脱`xsl:variable`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T03:42:00.660

XSLT 中比使用更好的模式`<xsl:if>`是添加具有匹配条件的新模板：

```
<xsl:template match="(Text | Status)[../Operation != 'ABC']"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T00:31:53.133

我发现这有效：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="/Model">
      <xsl:choose>
        <xsl:when test="Operation[text()!='ABC']">
            <xsl:copy>
                <xsl:apply-templates select="node()|@*"/>
            </xsl:copy>
        </xsl:when>
        <xsl:otherwise>
            <xsl:copy>
                <xsl:apply-templates select="Year"/>
                <xsl:apply-templates select="Operation"/>
            </xsl:copy>
        </xsl:otherwise>
      </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

# c++ - 调用“new”存储到 shared_ptr 的引用向量中

> ID：10628317
> 
> 赞同：0
> 
> 时间：2012-05-17T00:00:08.580
> 
> 标签：c++, boost, inversion-of-control, shared-ptr

我想改写这个问题，以便更清楚。我有一种感觉，我的方法通常是错误的

它是否破坏了依赖注入的意图，将共享指针向量的引用传递给构造函数，目的是创建一个新的共享指针并将其推送到向量？

我知道不应在对象内使用新命令。在这种情况下，它创建一个对象但将其存储在外部。

有没有更好的方法来解决这个问题，以便“新”可以留在外面？

斑点标记.h

```
#ifndef SPOTTINGMARKER_H_INCLUDE
#define SPOTTINGMARKER_H_INCLUDE

class SpottingMarker
{
public:
    SpottingMarker() {;}
            ~SpottingMarker(){;}
    void blah();

    double mPosition;
    double mDuration;
    char* mDescription;
};
    #endif 
```

斑点标记.cpp

```
#include "SpottingMarker.h"
void blah() {;} 
```

CSVSpottingNotes.h

```
#ifndef CSVSPOTTINGNOTES_H_INCLUDED
#define CSVSPOTTINGNOTES_H_INCLUDED

#include "SpottingMarker.h"
#include <boost/shared_ptr.hpp>
#include <vector>

typedef boost::shared_ptr<SpottingMarker> spottingMarker_ptr;

class CsvSpottingNotes
{
public:
    CsvSpottingNotes(const char* filename, std::vector<spottingMarker_ptr> &SpottingMarkerSet);
    ~CsvSpottingNotes(){;}
    const char* mFilename;
    const char field_terminator;
    const char line_terminator;
    const char enclosure_char;
};
    #endif 
```

CSVSpottingNotes.cpp

```
#include "CsvSpottingNotes.h"
#include "SpottingMarker.h"
#include <csv_parser/csv_parser.hpp>
#include <boost/shared_ptr.hpp>

CsvSpottingNotes::CsvSpottingNotes(const char* filename, std::vector<spottingMarker_ptr> &SpottingMarkerSet) :
field_terminator(','),
line_terminator('\n'),
enclosure_char('"')

{
    spottingMarker_ptr aSpottingMarker(new SpottingMarker());
    SpottingMarkerSet.push_back(aSpottingMarker);
} 
```

主文件

```
#include "CsvSpottingNotes.h"
#include "SpottingMarker.h"
#include <vector>

int main(int argc, char ** argv)
{
    typedef boost::shared_ptr<SpottingMarker> spottingMarker_ptr;
    const char* filename = "AT_92.csv";
    std::vector<spottingMarker_ptr> spottingMarkerSet;
    CsvSpottingNotes structure(filename, spottingMarkerSet);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:48:07.017

首先，为了解决您的直接问题，如果我理解正确，您想知道您是否可以（1）创建具有本地范围的共享指针，（2）将其推到对共享指针向量的引用的后面，以及(3) 让指针指向与创建它时相同的对象。所有这些的答案都是肯定的，而且你几乎可以免费获得这种行为。例如：

```
void push_shared_pointer(std::vector<boost::shared_ptr<int> > &vector) {
  boost::shared_ptr<int> int_ptr(new int(5));
  vector.push_back(int_ptr);
  *int_ptr = 6;
}

std::vector<boost::shared_ptr<int> > int_vector;
push_shared_pointer(int_vector);

std::cout << *int_vector.back( ) << std::endl; 
```

这会输出 6，因为在函数中，自从我们将共享指针推送到向量后，我们使用本地共享指针来修改引用的 int。由于向量中的共享指针和本地共享指针指向同一个内存位置，因此两个共享指针都会被更新。

至于其余的代码，有几点需要注意。首先，正如其他人所指出的，预处理器守卫是一个问题。其次，您没有限定 SopttingMarker.cpp 中的函数 blah() 来告诉编译它是 SpottingMarker 类中 blah 函数的实现。它应该是：

```
#include "SpottingMarker.h"

void SpottingMarker::blah() { } 
```

此外，由于您在标题中指出您将提供用户定义的默认构造函数，因此您也应该在 SpottingMarker.cpp 中提供它。

```
SpottingMarker::SpottingMarker()
  : mPosition(0)
  , mDuration(0)
  , mDescription(NULL)
{ } 
```

第三，既然你在 CsvSpottingNotes.h 中声明了一个析构函数，你应该在 CsvSpottingNotes.cpp 中定义它：

```
CsvSpottingNotes::~CsvSpottingNotes() {
  // implementation here
} 
```

这些应该是您需要的所有定义，至少根据您的构建日志。

我要注意的最后一件事是，由于三个原因，它看起来不像您以传统方式使用依赖注入。首先，通常当您进行依赖注入时，您会将对注入对象的引用存储在接收器对象中，以便接收器可以在其生命周期内使用。在这里，您将向量注入到 CsvSpottingNotes 中，但您没有在类中存储对它的引用；你只需将一个共享指针推到它上面。

其次，根据我的经验，依赖注入是针对行为抽象的，即将接收者（客户端）对象的行为与使用接口的注入对象的行为分开。这允许您通过注入接口的不同实现来修改客户端的行为。在这种情况下，您没有使用界面；std::vector 在编译时是完全限定的类型，而 CsvSpaottingMarker 不能与任何其他类型一起使用，因此没有理由使用依赖注入。更好的解决方案是将向量存储为 CsvSpottingMarker 的成员。

第三，正如我之前所说，依赖注入主要用于行为抽象，即让客户端对象根据注入到它们的接口的实现而表现不同。std::vector 类不适合依赖注入，因为它不提供行为；相反，它只是保存状态。一般来说，对象的状态应该被封装为对象类的成员，这进一步支持在CsvSpottingMarker类中包含向量。

希望有帮助！

# c# - 仅显示来自 SPFieldUrlValue 的描述

> ID：10628325
> 
> 赞同：0
> 
> 时间：2012-05-17T00:01:37.413
> 
> 标签：c#, sharepoint

我写了以下代码：

```
string link = string.Format("{0}Person.aspx?accountname={1}", mySite, listItem["Name"]);
SPFieldUrlValue spFieldUrlValue = new SPFieldUrlValue();
spFieldUrlValue.Url = link;
spFieldUrlValue.Description = listItem["ImnName"].ToString();

phoneListItem["FullName"] = spFieldUrlValue;
phoneListItem.Update(); 
```

但它在视图中显示“全名”字段，如“http://minint-3ihn2o7/my/Person.aspx?accountname=XDOM\smithj, John Smith”，但我只需要显示“John Smith”（当然，字段仍然需要是一个链接）。

任何想法如何修改代码以实现此结果？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:43:36.947

您必须更改“FullName”字段的类型。目前它只是文本，因此它将链接和描述显示为文本。

# ruby-on-rails - 了解 Rails 中的函数 form_for()

> ID：10628328
> 
> 赞同：1
> 
> 时间：2012-05-17T00:02:38.983
> 
> 标签：ruby-on-rails

我目前正在阅读Beginning Rails 3。我来自PHP并尝试学习Ruby和Rails。我正在看一个 _form 部分，我有几个问题。具体关于这条线：

```
 <%= form_for(@article) do |f| %> 
```

将@article 对象放入其中的目的是什么以及变量 f 的功能是什么？

谢谢，迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T00:10:33.197

`form_for`接受一个模型，以便它可以在幕后为您做一些事情：

*   它将从该模型中读取任何当前值并将它们填充到您指定的字段中
*   它将为该资源生成正确的 URL（假设您遵循约定，否则您仍然必须指定它）
*   如果您在 POST 之后显示，它可以在模型上显示任何验证错误。

如果你只想要标签助手，还有[`form_tag`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag)和朋友

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:14:56.820

这`@article`是表单的用途（在这种情况下）。

`f`用于创建单独的表单元素；`form_for`它是由' 块产生的构建器对象。

# javascript - 使用 javascript/jquery 动态修改图像并放置文本

> ID：10628330
> 
> 赞同：0
> 
> 时间：2012-05-17T00:03:02.447
> 
> 标签：javascript, jquery, html, dynamic-text, dynamic-image-generation

![在此处输入图像描述](../Images/80a3197e8a19d685dd0fb74e76d397ad.png)

我有上面的图片。我的任务是动态更改 L、A 和 B 出现的值；我必须删除/隐藏 L、A 和 B 并使用数值替换它。我使用烟花制作了 L、A 和 B 所在区域的切片，并将其导出为 HTML 文件。我的想法是为所有三个切片/区域定义 id，使用 jquery 获取 id 隐藏区域，然后在现有区域上显示所需的值。我可以隐藏值 L、A 和 B，但我无法在这些定义的区域上显示值（每个区域都是一个表）。我不知道我是不是在绕圈子，因为我不是网络开发人员。如果有更简单的方法，我很乐意知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:23:47.530

好的，如果每个区域都是一个表格单元格，那么您需要做的是在要更改内容的点处创建一个空单元格，您为此（单元格）声明一个id，并使用纯JS或jquery（更容易)，更改其内容。喜欢：

```
<td id="was_L">

...

$("#was_L").val('15')

.... 
```

也许您还必须使用样式设置此单元格的大小以保持表格看起来不错。喜欢：

```
<td id="was_L" style="width:100px; height:100px"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:23:55.883

您不能很容易地在 javascript 中修改图像。您可以通过将图像分成多个图像来解决您的问题，除了一个透明地位于基础图像之上，然后您可以更改/隐藏/显示顶部图像以完成您想要的。

使用透明覆盖的 PNG 图像可能比替换单个切片更好。而且，它更加灵活，因为基本图像只需要出现在一个图像中，而其他图像只能包含它们应该代表的内容。

您将在相对容器内使用绝对定位来定位重叠的图像或重叠的文本对象。

例如，这将在一个重叠的文本上创建一个带有两个重叠图像的背景：

```
<div id="container>
    <img id="overlay1" src="xxx.png">
    <img id="overlay2" src="yyy.png">
    <div id="text1">Some Text</div>
</div> 
```

然后是一些像这样的CSS：

```
#container {
    position: relative;
    height: 400px;
    width: 300px;
    background-image: url(bbb.jpg);
}

#overlay1 {
    position: absolute;
    top: 20px;
    left: 50px;
    z-index: 1;
}

#overlay2 {
    position: absolute;
    top: 150px;
    left: 150px;
    z-index: 1;
}

#text1 {
    position: absolute;
    top: 300px;
    left: 150px;
    z-index: 2;
} 
```

在任何时候，您都可以隐藏或显示单个组件或更改文本。例如，要隐藏文本元素，您只需使用：

```
$("#text1").hide(); 
```

要更改文本，您应该只使用：

```
$("#text1").html("Different Text"); 
```

# c - fread 不读取结构

> ID：10628331
> 
> 赞同：2
> 
> 时间：2012-05-17T00:03:35.767
> 
> 标签：c

我有以下代码将结构写入文件，如下所示：

```
void write_assignments_to_file(list* assignments, FILE* file)
{
    while (assignments != NULL) {
       fwrite(assignments->a, sizeof(assignments->a), 1, file);
       assignments = assignments->next;
    }
    fclose(file);
} 
```

这是写入文件，但是当我尝试再次读取文件时，它会挂起我的读取代码，如下所示：

```
list* read_assignments_from_file(FILE* file)
{
    Assignment* assignment;

    list* item; 
    item = NULL;

    while ( fread(assignment, sizeof(assignment), 1, file) ) {
        printf("Reading an assignment in");
        insert(item, assignment);
    }

    fclose(file);

    return item;
} 
```

我的插入方法如下所示：

```
list* insert(list* assignment_pointer, Assignment* new_assignment)
{
    list* ap = assignment_pointer;
    if(assignment_pointer != NULL){
        while (assignment_pointer->next != NULL) {
           assignment_pointer = assignment_pointer -> next;
        }
        assignment_pointer -> next = (struct list*)malloc(sizeof(list));
        assignment_pointer = assignment_pointer -> next;
        assignment_pointer -> next = NULL;
        assignment_pointer -> a = new_assignment;
        return ap;
    } else {
        assignment_pointer = (list*) malloc (sizeof(list));
        assignment_pointer -> next = NULL;
        assignment_pointer -> a = new_assignment;
        return assignment_pointer;
    }
} 
```

我的分配结构定义如下：

```
typedef struct Assignment {
    char* moduleTitle;
    char* moduleId;
    char* title;
    char* author;
    time_t date_set;
    time_t date_due;
    int weighting;
} Assignment; 
```

那么是什么导致我的程序挂起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T00:08:07.167

您需要复习一下结构和指针。

```
Assignment *assignment;
fread(assignment /*which is not set*/, sizeof(assignment) /*probably 4*/, 1, file);

/* Should look more like */
Assignment ass;
fread(&ass, sizeof(ass), 1, file); 
```

可能还有其他问题，但这应该可以帮助您入门。

您可能应该包括分配的结构定义，但我认为您在 write() 中遇到了同样的问题

```
sizeof(assignments->a); /*size of a pointer not an object*/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T00:09:24.753

我猜这个问题是读入一个未初始化的指针。您没有为 分配内存`assignment`。你可能想要更像这样的东西：

```
list* read_assignments_from_file(FILE* file)
{
    Assignment assignment;

    list* item; 
    item = NULL;

    while ( fread(&assignment, sizeof(assignment), 1, file) ) {
        printf("Reading an assignment in");
        insert(item, &assignment);
    } 
```

另请注意，您的原始代码`sizeof(assignment)`采用`Assignment* assignment;`. 它将为您提供 的大小`Assignment*`，这是任何其他指针的大小 - 在 32 位系统上为 4 个字节，在 64 位系统上为 8 个字节。

# oop - 面向对象方法的类型安全

> ID：10628332
> 
> 赞同：2
> 
> 时间：2012-05-17T00:03:40.640
> 
> 标签：oop, language-agnostic, computer-science, liskov-substitution-principle

我正在尝试考虑如何使用面向对象的方法*正确解决这个问题。*语言并不重要——我其实很想写代码，但我更关心的是一般原则。

我想实现一个[字段](http://en.wikipedia.org/wiki/Field_(mathematics))：操作 +、-、* 和 / 操作的“数字”集合。此外，我希望能够实现更高的操作，例如 ^ 和循环查找，其中 (1) 不需要为给定字段定义，但如果需要，可以覆盖 (2)，例如出于效率原因。

**这就是问题所在。**不好申报

```
FieldElement power (FieldElement base, FieldElement exponent) 
```

因为我想要类型安全：不可能将有限域的成员添加到整数中。

也许我真正在寻找的是元对象或超级接口，或者将不同类联系在一起的东西（一个用于整数，一个用于 7-adics，一个用于有限域 F_4，等等）。或者也许有更好的东西。

NB 代码在答案中受到欢迎（甚至鼓励），如果它有启发性的话，但声明可能就足够了：大概这里的每个人都可以为至少几个领域写出明显的方法。

* * *

我将提到其他对我很重要但（显然）与主要 OO 问题无关的条件：我不希望字段元素携带它们的类型信息，而且我希望它们是轻量级的（因为我可能需要处理大型字段元素数组）。这些需求可能无法实现——尽管坦率地说，我更可能在这里放弃面向对象而不是效率。但是无论如何，我都会很感激答案，因为我有兴趣了解这些问题，即使除了手头的特定问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:17:00.727

这称为**二元法问题**。快速谷歌搜索将显示一些（大量）信息。特别是，Luca Cardelli 等人的文章“On binary methods”对这个主题进行了彻底的处理。

您可能想学习一些 Haskell，以了解实用的编程语言如何处理此问题。

编辑洛卢卡→卢卡。该死的小手机屏幕和更小的键盘；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:43:06.507

之前尝试过用C#来表达这些概念，但是遇到了语言障碍：语言不够丰富，或者不够具体。例如，如果我这样定义一个字段的元素：

```
public abstract class FieldElement 
{
    public abstract FieldElement Add(FieldElement another);
    public abstract FieldElement SumInvert();
    public abstract FieldElement MultiplicationInvert();
    public abstract FieldElement MultiplyBy(FieldElement another);
    public abstract FieldElement One; //Multiplication neutral element
    public abstract FieldElement Zero; //Addition neutral element

    public FieldElement Subtract(FieldElement another)
    {
        return this.Add(another.SumInvert());
    }

    public FieldElement Divide(FieldElement another)
    {
        return this.MultiplyBy(another.MultiplicationInvert());
    }
    public virtual FieldElement Power(uint b)
    {
        if (b == 0)
            return this.One;
        else
        {
            FieldElement result = this;
            for (int i = 0; i < b - 1; i++)
                result = result.MultiplyBy(result);
            return result;
        }
    }
} 
```

然后我像这样定义实数：

```
public class RealNumber : FieldElement
{
    public double Value { get; set; }

    public RealNumber(double value)
    {
        this.Value = value;
    }
    public override FieldElement Power(uint b)
    {
        return new RealNumber(Math.Pow(Value, b));
    }
    public override FieldElement Add(FieldElement another)
    {
        if (another.GetType() != typeof(RealNumber)) //Ugly typecast to enforce type-safety
            throw new ArgumentException("RealNumber expected in Add method");

        return new RealNumber(Value + (another as RealNumber).Value);
    }
} 
```

然后我可以定义对字段元素的一般操作（通过使用泛型）：

```
public class FieldOperations<T> where T: FieldElement 
{
    public T Add(T a, T b)        
    {
        return a.Add(b) as T;
    }
    public T Multiply(T a, T b)
    {
        return a.MultiplyBy(b) as T;
    }
    public T Subtract(T a, T b)
    {
        return a.Subtract(b) as T;
    }
    public T Divide(T a, T b)
    {
        return a.Divide(b) as T;
    }
    public T Power(T a, uint b)
    {
        return a.Power(b) as T;
    }   
} 
```

我将在代码中这样使用它：

```
public class TestFieldOperations
{
    public static void TestAddRealNumbers()
    {
        FieldOperations<RealNumber> operations = new FieldOperations<RealNumber>();
        RealNumber a = new RealNumber(0.5);
        RealNumber b = new RealNumber(0.7);
        RealNumber c = operations.Add(a, b);
        RealNumber d = operations.Power(c, 3);
    }
} 
```

同样，我可以在向量上使用 FieldOperations，在 InvMatrix 上使用 FieldOperations...

能够以类型安全和面向对象的方式抽象字段操作的概念可能非常强大：能够在同一抽象级别处理数字、向量和（可逆）矩阵算术。

# javascript - IE8 和 SmoothGallery：刚刚收到脚本错误

> ID：10628335
> 
> 赞同：0
> 
> 时间：2012-05-17T00:04:04.477
> 
> 标签：javascript, internet-explorer-8, mootools, typo3

我正在为我的一位客户在网站上使用 Jon Designs SmoothGallery。唯一的问题是在尝试转到下一个图像时，我在 IE8 中遇到了脚本错误。我已经在所有主流浏览器中检查过这个画廊，但 IE 还是无法正常工作的那个。

真是个惊喜。

我一直在试图找出问题所在，但我只在画廊所基于的 mootools 库的 eval 函数中遇到错误，所以那里没有运气。

有没有办法设置“所有异常断点”，类似于在 Xcode 中设置一个，以便我可以找到它实际挂起的代码？或者有谁知道这里到底发生了什么？

该站点是[http://internetvolk.de/tische](http://internetvolk.de/tische)，负责画廊的 JS 文件是[http://internetvolk.de/typo3conf/ext/rgsmoothgallery/res/scripts/jd.gallery1010.js](http://internetvolk.de/typo3conf/ext/rgsmoothgallery/res/scripts/jd.gallery1010.js)

先感谢您，

托拜厄斯·廷佩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:06:45.037

如果我没记错的话，您使用的是*真正旧版本的 mootools - 0.89 或 1.0。*它是通过 Dean edwards 的 PACKER 打包的，这使得调试特别困难。

实例化代码本身有点糟糕，而且猴子打了补丁：

```
function startGallery17() {
    if (window.gallery17) {
        try {
            var myGallery17 = new gallery($('myGallery17'), {
                timed: false,
                showArrows: true,
                showCarousel: false,
                textShowCarousel: 'Thumbnails',
                embedLinks: false,

                lightbox: true
            });
            var mylightbox = new LightboxSmoothgallery();
        } catch (error) {
            window.setTimeout("startGallery17();", 2500);
        }
    } else {
        window.gallery17 = true;
        if (this.ie) {
            window.setTimeout("startGallery17();", 3000);
        } else {
            window.setTimeout("startGallery17();", 100);
        }
    }
}
window.onDomReady(startGallery17); 
```

在 setTimeouts 中使用字符串也会导致 evals，try 块也会阻止您获得任何有用的错误反馈。

如果你想深入了解，摆脱这些黑客，加载这个版本的mootools - [https://ajax.googleapis.com/ajax/libs/mootools/1.11/mootools.js](https://ajax.googleapis.com/ajax/libs/mootools/1.11/mootools.js) - 仍然非常旧的但比你的新，或者如果可能的话，试试 1.12 看看调试是否变得更容易。

然后摆脱 try/catch 块，用于`window.addEvent('domready', fn)`启动您的代码 - 或者如果依赖于正在加载的图像，请考虑`window.addEvent('load', fn)`。

如果您在页面上所做的只是将一些图像与下一个/上一个堆叠在一起，为什么不使用带有新插件的最新 mootools - 您选择的内容没有任何好处。

例如，阅读我写的关于如何做到这一点的教程：http: [//fragged.org/tutorial-write-a-small-content-slider-class-in-mootools-and-extend-it_1321.html](http://fragged.org/tutorial-write-a-small-content-slider-class-in-mootools-and-extend-it_1321.html)或查看伪造： http: [//mootools.net/forge/](http://mootools.net/forge/)用于打包的东西

1.4.5（最新）应该没问题。

请记住，您当前使用的版本可能会破坏 ie9 和最新的壁虎

# python - 在 Python ctypes 中使用 array.array

> ID：10628337
> 
> 赞同：5
> 
> 时间：2012-05-17T00:04:16.130
> 
> 标签：python, ctypes

我必须将 Python 程序与 C 库连接起来。我需要调用的特定函数接受一个数组并返回一个双精度数。以下函数具有相同的签名，并且比我自己的更容易理解：

```
double sum(double * array, const int length) {
 double total = 0;
 int i;
 for (i=0; i<length; i++) {
     total += array[i];
 }
 return total;
} 
```

我目前的解决方案是：

```
import ctypes
lib = ctypes.CDLL(library_name) 

l = 10
arr = tuple(range(l))

lib.sum.restype = ctypes.c_double
values = (ctypes.c_double * l)(*arr)
ret = lib.sum(values, l) 
```

但是我在我的代码中经常使用数组模块，在我看来，将它们与 C 代码一起使用应该更直接，因为它是一个类型化的数组。所以我试图直接用一个数组来提供 C 函数，但它没有工作。为了使它工作，我像这样包装数组：

```
class Array(array):

   @property
   def _as_parameter_(self):
      return (TYPES[self.typecode] * len(self))(*self) 
```

其中 TYPES 将类型代码从数组映射到 ctypes 类型：

```
 TYPES = {'c': ctypes.c_char,
            'b': ctypes.c_byte,
            'B': ctypes.c_ubyte,
            '?': ctypes.c_bool,
            'h': ctypes.c_short,
            'H': ctypes.c_ushort,
            'i': ctypes.c_int,
            'I': ctypes.c_uint,
            'l': ctypes.c_long,
            'L': ctypes.c_ulong,
            'q': ctypes.c_longlong,
            'Q': ctypes.c_ulonglong,
            'f': ctypes.c_float,
            'd': ctypes.c_double} 
```

有没有办法用不创建另一个数组的东西替换 _as_parameter_ ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T00:56:00.523

使用 array.buffer_info() 获取地址和长度，并将地址 cast() 到 POINTER(c_double)：

```
from array import array
buf = array("d", range(101))
addr, count = buf.buffer_info()
print lib.sum(cast(addr, POINTER(c_double)), count) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:53:09.523

并不是说这是一个更好的答案，而是为了完整性，如果您使用的是[numpy](http://docs.scipy.org/doc/numpy/reference/)，它只是有点不同，因为 numpy 可以为您处理铸件。

```
import numpy as np
data = np.arange(101, dtype=ctypes.c_double) # making this match seems important sometimes
print lib.sum(data.ctypes.data_as(ctypes.POINTER(ctypes.c_double)), len(data)) 
```

# jquery - jquery点击启用禁用选择+移动div

> ID：10628343
> 
> 赞同：0
> 
> 时间：2012-05-17T00:05:27.327
> 
> 标签：jquery

我有一些代码，一位绅士很友好地与我合作。他做得非常出色，让它按原样运行。但我注意到一个我无法解决的小问题。不幸的是，这方面的技能水平略高于我的能力。因此，我们将不胜感激任何帮助。

它的功能演示位于 >> [http://jsfiddle.net/5fM9p/](http://jsfiddle.net/5fM9p/)

问题是，当单击“删除”时，我需要它来重新启用最初在添加时禁用的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:31:34.283

像下面这样替换您的删除功能将为您做到这一点。

```
$(".remove_from_cart").live("click", function(){
    var item=$(this);
    var itemId=item.parent().find(".product").attr("id");   
    item.parent().remove();
    var disabled=$(".added").find("#"+itemId).parent();   
    disabled.find("select").removeAttr("disabled");
    disabled.find("p").remove();
    disabled.append('<a class="add_to_cart" href="#add">Add To Cart</a>');   

}); 
```

**但我发现您的 HTML 标记存在问题。**您有多个具有相同 ID 的元素。这是不好的。**ID 应该是唯一的**。你可能应该解决这个问题。

另一件事是，一旦您重新启用链接添加到购物车（单击删除购物车时），它将无法工作，因为您之前绑定了它。所以你需要改变你的绑定代码来使用`live`这样的方法

```
$(".add_to_cart").live("click",function (e) { 
   //Your remaining code goes here
}); 
```

工作样本：http: [//jsfiddle.net/5fM9p/23/](http://jsfiddle.net/5fM9p/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:23:51.563

考虑这个小提琴：http: [//jsfiddle.net/6V52G/](http://jsfiddle.net/6V52G/)

使用可用于识别哪些元素组属于哪个产品的属性，并删除整个 setupForm 函数，从一开始就将它们放在 HTML 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T00:18:45.557

尝试这个：

```
$(".remove_from_cart").live("click", function(){
    var id = $(this).parent().find("select").attr("id");
    $(this).parent().remove();
    $("#" + id).parent().find("select").attr("disabled", "");
    $("#" + id).parent().find("p").remove();
    $("#" + id).parent().append('<a class="add_to_cart" href="#add">Add To Cart</a>'); 
}); 
```

[http://jsfiddle.net/5fM9p/25/](http://jsfiddle.net/5fM9p/25/)

# glassfish - 监控 glassfish 会话故障转移？

> ID：10628349
> 
> 赞同：0
> 
> 时间：2012-05-17T00:07:02.213
> 
> 标签：glassfish

在一个双实例单节点测试集群上，我想获取哪些会话在哪个实例上处于活动状态的列表，然后停止/终止一个实例并获取有关故障转移过程的一些信息——我想看到它发生。

我已经读过，出于“不要将所有鸡蛋放在一个篮子里”的原因，在单个节点上拥有多个实例被认为是一种合理的策略，所以如果一个实例坏了，我可以看到需要弄清楚会话实例映射。

我已经阅读了所有我能想到的文档，但没有看到任何我想要的东西。我处于劣势，因为从 asadmin 运行 create-cluster 命令后，管理控制台根本不会加载（它会尝试但 10 分钟后仍然没有加载登录页面）。

有什么建议么？JMS 有什么可以看的吗？我正在运行 g/f 3.1.2。

谢谢。

# haskell - Haskell：代数数据与元组

> ID：10628352
> 
> 赞同：15
> 
> 时间：2012-05-17T00:07:07.393
> 
> 标签：haskell, types, tuples

```
data Ray = Ray Vector Vector 
```

或者

```
type Ray = (Vector, Vector) 
```

在惯用的haskell中哪个是首选？为什么我应该使用一个而不是另一个？
我不在乎性能。

它似乎与功能没什么区别，例如：

```
trace :: Ray -> …

trace (Ray x d) = …
-- OR
trace (x, d) = … 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T00:10:18.077

首选版本，`data`因为它更清楚地表明了程序员的意图——通过创建一个新类型，你向所有人指出这不仅仅是一个元组，而是一个有意义的语义实体，a `Ray`.

这样就可以进一步依赖类型系统，自定义实例`Ray`和元组中不可能的优化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T00:28:52.673

您还可以考虑第三种选择，它是两者的结合：`newtype`

```
newtype Ray = Ray (Vector, Vector) 
```

在我看来，代数数据类型用于有多种选择的情况，或者需要类型是递归的、包含自身的情况。但对于这样的事情来说，这可能是矫枉过正。

Don Stewart 指出，将类型与元组同义词与直接使用元组类型相同；类型同义词没有自己的身份。因此类型检查器将无法区分您的类型和元组，因此它无法检查您是否使用了所需的类型。此外，它将具有与元组完全相同的实例。

A`newtype`允许您使用与元组相同的基础类型；但它是类型检查器的单独类型，具有单独的实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T08:13:07.703

我发现非常方便的第四个选择是记录：

```
data Ray = Ray { from, to :: Vector } 
```

它们基本上具有“普通”ADT 的所有特性，但还带有一些额外的语法糖。特别是它们使获取值的部分修改副本变得更容易。确实，在某些情况下记录太有限了，但是您可以使用诸如[fclabels](http://hackage.haskell.org/package/fclabels-1.1.1.1)之类的“改进版本”走得更远。

# jquery - 使用超级鱼菜单的双悬停事件

> ID：10628354
> 
> 赞同：1
> 
> 时间：2012-05-17T00:07:18.657
> 
> 标签：jquery, superfish

这就是问题所在。我使用 superfish CSS 方法创建了一个带有下拉菜单的菜单。主菜单是一个无序列表，每个都`<li>`包含一个 child`<a>`和 a `<ul>`，例如

```
<ul class="sfmenu">
  <li>
    <a href="#">MENU 1</a>
    <ul>
      <li><a href="#"><div>Stuff here</div></a></li>
      <li><a href="#"><div>Stuff here</div></a></li>
      <li><a href="#"><div>Stuff here</div></a></li>
   </ul>
  </li>
  <li>
    <a href="#">MENU 2</a>
    <ul>
      <li><a href="#"><div>Stuff here</div></a></li>
      <li><a href="#"><div>Stuff here</div></a></li>
    </ul>
  </li>
</ul> 
```

顶层的 CSS`<li>`是`<a>`：

```
.sf-menu li {
  color: #f9dfa0; 
  cursor: pointer; 
  display: inline-block; 
  float: left; 
  height: 45px; 
  margin: 0
  padding: 0;
  padding: 20px 10px 0 10px;
}

.sf-menu a 
{
  font-weight: normal; 
  text-decoration: none;
  text-align: center;
  height: 45px;
  width: 100%;
} 
```

当将鼠标悬停在下拉菜单上时，这种定位（填充）会导致双悬停效果，然后当`<li>`鼠标悬停在下拉菜单上时会再次下降。我有一些 jquery 代码可以向下滑动有效的子菜单，但我仍然会在悬停时获得双下拉菜单。我的jQuery代码是：`<li>``<a>`

```
$(function() {
  $('.sf-menu li').mouseover(function(){
    $(this).children('ul').hide().slideDown('normal');
  });
}); 
```

无论如何要从`<a>`标签中删除悬停事件？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:20:25.123

这是一个测试用例：

```
<ul class="sf-menu">
<li><span>unmatched</span></li>
<li><span>unmatched</span>
            <ul>
    <li><span>unmatched</span></li>
    <li><span>unmatched</span></li>
    </ul>
</li>
<li><span>unmatched</span></li>
</ul>

<button onclick=' $(".sf-menu>li:not(li ul li)>span").text("matched");'></button> 
```

点击按钮：

```
<ul class="sf-menu">
<li><span>matched</span></li>
<li><span>matched</span>
            <ul>
    <li><span>unmatched</span></li>
    <li><span>unmatched</span></li>
    </ul>
</li>
<li><span>matched</span></li>
</ul> 
```

很难弄清楚，您的代码应该是：

```
$(function() {
  $('.sf-menu>li:not(li ul li)').mouseover(function(){
    $(this).children('ul').hide().slideDown('normal');
  });
}); 
```

更新：当您将鼠标悬停在子元素上时，这将取消事件冒泡：

```
$('.sf-menu>li>ul>li>a').mouseover(function(event){
   event.stopPropagation();
}); 
```

# xml - 如何将 XML 保存到文件中

> ID：10628361
> 
> 赞同：4
> 
> 时间：2012-05-17T00:08:36.287
> 
> 标签：xml, file, xslt, save, msxsl

如何将翻译后的 XML 保存到磁盘上的实际文件中？我是 XML/XSLT 的新手，我正在努力解决这个问题。我似乎找不到任何适合我的例子。例如，我只想将文件保存到 c:\temp\text.xls。我该如何保存它？我是否必须使用 java 或 .net 或其他一些编程语言/api？我希望让 XSL 只保存文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T00:12:34.377

XSL 不能自己做任何事情。它只是将 XML 文件转换为其他文件的定义。要对它进行任何操作，您需要在程序中运行 XSL 转换，或者使用 XML Spy 之类的工具。

**更新**

这是我几年前用 VBScript 编写的一个简单示例：

```
Dim xml, xsl, htm, fso, flOut

Set xml = CreateObject("MSXML2.DOMDocument")
Set xsl = CreateObject("Msxml2.DOMDocument")
Set fso = CreateObject("Scripting.FileSystemObject")

xml.load WScript.Arguments(0)
xsl.load WScript.Arguments(1)
htm = xml.transformNode(xsl)

Set flOut = fso.CreateTextFile(WScript.Arguments(2))
flOut.Write htm
flOut.close 
```

我将其命名为 xmlTrfm.vbs。像这样使用它：

```
xmlTrfm.vbs [sourceFileName].xml [transformFileName].xsl [outputFileName].[ext] 
```

输出文件名的文件扩展名显然取决于 XSL 转换生成的格式，通常是 xml、html 或 txt，但几乎可以是任何格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T02:22:14.270

**几乎每个 XSLT 处理器都允许从命令行启动转换**。参数之一是保存转换结果的文件。

**例子**：

1.  **撒克逊 9.x**：`java net.sf.saxon.Transform -s:source -xsl:stylesheet -o:output`

2.  **MSXML6**：`msxsl.exe %xml% %xsl% -o %out% -u '6.0' -t %param[ name="value"]%`

3.  **XQ锐利**：`xslt.exe -s %xml% -o %out% -r 1 -t %xsl% %param[ name="value"]%`

4.  **.NET 2.0+（XslCompiledTransform）：** `nxslt2.exe %xml% %xsl% -t -o %out%%param[ name="value"]%`

5.  **AltovaXML (XML-SPY)：** `AltovaXML.exe -xslt2 %xsl% -in %xml% -out %out%%param[ name="value"]%`

上面的 2\. 到 5.`%xml%`是包含 XML 文档的文件`%xsl%`的路径，是包含主 XSLT 样式表的文件的路径，`%out% 是应该保存转换结果的文件的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T00:11:46.623

是的，您无法从 XSLT 中保存它——您可以使用哪些语言？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:01:32.293

也许（我推测）您的困难在于您正在浏览器中运行 XSLT 转换？在这种情况下，您将遇到困难，因为出于安全原因，浏览器不允许以正常方式写入文件存储。

如果不是这样，请说明您是如何运行 XSLT 转换的。

# node.js - 监控运行到 Windows Azure 中的 Node.js 应用程序

> ID：10628367
> 
> 赞同：1
> 
> 时间：2012-05-17T00:10:15.713
> 
> 标签：node.js, azure, monitoring

有没有办法启用性能计数器来监控 Windows Azure 中的 Node.js 应用程序性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:21:06.173

我自己还没有尝试过它，但是有[node-perfmon](https://github.com/markitondemand/node-perfmon)，它是[typeperf](http://technet.microsoft.com/en-us/library/bb490960.aspx)的包装器。也就是说，它允许您编写性能计数器，以及简单的内存/cpu 监控。这是您正在寻找的那种监控吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T03:01:22.000

只是在上面的答案中添加更多内容..

对于 Node.js 上的应用程序统计监控，您可以使用 Hummingbird。它支持通过 http 的状态，因此您可以将代码集成到 node.js 应用程序中，添加一个端口以通过 HTTP 获取监控数据。无需在同一台机器上实时使用 Azure 存储诊断和所有信息。它仍处于阿尔法之前，但可以很好地处理少量任务。

[http://projects.nuttnet.net/hummingbird/](http://projects.nuttnet.net/hummingbird/)

我知道 node.js “监视器”插件，它最适合 Linux 机器的系统特定性能，还使用 ​​HTTP 提供系统特定数据。我不确定它是否可以移植到 Windows Server，但如果可以，那是一个不错的选择。在此处阅读有关监视器使用的更多信息： [http ://www.sys-con.com/node/2275314](http://www.sys-con.com/node/2275314)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:23:26.737

您可能还想查看这些，它们不直接使用 perfmon，但允许您监控 Node.js 服务器的性能：

[http://search.npmjs.org/#/Probes.js](http://search.npmjs.org/#/Probes.js)

[http://search.npmjs.org/#/nodetime](http://search.npmjs.org/#/nodetime)

NPM 注册表是查找 Node.js 包的绝佳工具。

# java - Spring + Ehcache：如何缓存查找所有结果

> ID：10628368
> 
> 赞同：2
> 
> 时间：2012-05-17T00:10:16.310
> 
> 标签：java, spring, ehcache

我正在使用 Spring + Ehcache 作为我的缓存层。（通过代理）

我想知道你是否可以在同一个缓存中缓存“findAll”结果和“findById”结果，然后 CacheEvict 特定项目和“findAll”结果（保持项目的其余部分保持不变）并在更新和加载它回来再次“findById”时缓存？

（或另一种方法是将 findAll 和 findById 保留在 2 个缓存中，并在更新 CacheEvict allEntries 时为 findAll 缓存和 findById 缓存上的特定项目）

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:40:03.317

我将解释[休眠](/questions/tagged/hibernate "显示标记为“休眠”的问题")及其二级缓存和查询缓存是如何工作的，以便为您提供一个总体思路。首先，Hibernate在*所谓的*二级缓存中缓存所有单个实体（例如，按`findById`操作类型检索） 。

 *如果您使用`findAll`它检索所有实体，则将所有实体的*主键*放在查询缓存中（在一个键下），并将所有具体实体放在二级缓存中。当您`findAll`再次调用时，它首先从查询缓存中检索所有主键，然后从二级缓存（或从数据库）中检索所有实体。

失效相当简单：操作应该使整个查询缓存失效，而`INSERT`s是透明的。`DELETE``findAll``UPDATE`

这应该指导您如何在您的解决方案中实现这一点。这在 Spring 中是可能的，但您可能需要编写一些代码，尤其是从查询缓存到二级缓存的部分映射。*

# r - R：导入data.table包命名空间，内存消耗莫名其妙的跳跃

> ID：10628371
> 
> 赞同：2
> 
> 时间：2012-05-17T00:10:56.527
> 
> 标签：r, memory, namespaces, data.table

我在自己的包中使用 data.table 包，并在 NAMESPACE 和 DESCRIPTION 文件中导入 data.table 命名空间。在我的一个函数中，我使用 data.table 函数将 data.frame 转换为 data.table

```
dt <- data.table(df) 
```

但是当我调用我的函数时，在调用 data.table() 时，内存使用量会立即跳跃，而 R 会停止响应。当我逐行运行并且内存消耗低时，函数中的代码运行良好。另外，如果我将 library(data.table) 放在我的函数中，一切都很好。我试图避免将 library(data.table) 放在我的函数中，而是声明依赖关系。但是，这种方式似乎出了点问题。我在 Mac OS X 10.6.8 上运行 R-2.14.0

谁能解释可能是什么原因，我该如何解决（不在我的函数中使用 library(data.table) ）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:02:21.997

Some random guesses in no particular order :

Try use the Imports or Depends field in DESCRIPTION only. I don't think you need to import in NAMESPACE as well, but I might be wrong. Why that would explain the memory use though, don't know.

What is `df`? Is it big or somehow recursive or strange in some way? Please provide `str(df)` to tell us something about it, if possible.

Try `as.data.table(df)` which is faster than `data.table(df)`. But it sounds like your problem is different to that.

Is your function call being called repeatedly? I can see why repeatedly converting `df` to `dt` would use up memory, but not why just calling `library(data.table)` would make that fast.

Try starting R with `R --vanilla` to ensure no `.Rdata` (which may include functions masking `data.table`'s) is being loaded on startup, amongst other things. If you have developed your own package then some kind of function name conflict, or the order of packages on the `search()` path sounds plausible.

Otherwise we'll need more information please. I don't recall anything similar to this happening to me, or being reported before.

And, which version of `data.table` are you using? There is this bug fix in v1.8.1 on R-Forge (not yet on CRAN) :

> *   Moved `data.table` setup code from `.onAttach` to `.onLoad` so that it is also run when `data.table` is simply `import`ed from within a package, fixing #1916 related to missing `data.table` options.

But if you are using 1.8.0 from CRAN, and are Importing (only) rather than Depending then I'd expect you to get an error about missing options rather than a jump in memory consumption.

# php - 是否可以在 Sublime Text 2 中自动格式化 PHP？

> ID：10628372
> 
> 赞同：37
> 
> 时间：2012-05-17T00:10:57.087
> 
> 标签：php, sublimetext2, autoformatting

在**Sublime Text 2**中，我正在尝试键入代码并使用自动格式命令来重新排列和自动缩进源代码。如果不可能有一个自动格式化程序，最好有一个快捷命令来完成它。

除了内置的“Reindent”选项和难以制作的“PHP Beautifier”插件之外，我还在寻找其他东西。

我想知道是否有人为 PHP 找到了**任何不错的**自动格式化程序：任何不会弄乱我们的 PHP 代码的格式化程序。JSFormat 似乎没有用。

是否有任何易于“安装和使用”的插件？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-09T08:46:14.853

PHPTidy 绝对是 SublimeText2 中 PHP 代码格式化的好选择。

您需要安装 package control package 以使您能够安装在 sublime text 中打包：[link](http://wbond.net/sublime_packages/package_control/installation)。

> 1.  `ctrl`+ `shift`+ `p`-> 类型 -> 包控制：安装包
>     
>     
> 2.  搜索 phpTidy -> 点击`enter`

就是这样 - 现在您可以按照 WordPress 编码约定来格式化您的代码。

## 如何格式化代码：

> 1.  `ctrl`+ `shift`+ `p`-> 输入 -> 整洁 -> 点击`Enter`
> 2.  `ctrl`+ `alt`+`t`

希望这有帮助。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-20T08:08:57.437

有一个名为 PhpBeautifier 的 PHP 代码格式化程序。[在这里](https://github.com/SublimeText/PhpBeautifier)你可以找到这个程序的 Sublime Text 插件，你也可以通过包控制安装它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-01T04:35:17.230

我将此设置为[键绑定](https://stackoverflow.com/questions/12182896/reindent-shortcut-in-sublime-text)：

```
[
    {
      "keys": ["alt+shift+f"], "command": "reindent",
      "args": {"single_line": false}
    }
] 
```

如果您正在寻找更多内容，则可以`Tidy PHP`在包管理下进行。

更新：已经有一段时间了，我现在使用 PHP 编码标准和 PHP CS Fixer，它通过自动格式化完成了很多清理工作。这需要相当多的工作/对 php cs 的理解来设置，但它并不太难，而且非常值得。[关联](http://cs.sensiolabs.org)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-17T02:39:26.880

我以前也一直在搜索这个，但没有用。Sublime text 2 可能不支持原生格式化 PHP 代码。我查看了 ST2 包 - [http://wbond.net/sublime_packages/community](http://wbond.net/sublime_packages/community)，但也没有。可能您必须在另一个编辑器中执行此操作。

当然，如果有人为此编写一个包，那会很好，因为用于格式化 JS、JSON、HTML 的包已经存在。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-26T10:57:54.550

这是一个古老的主题，但正如我通过谷歌找到的，这是一个答案：

您可以使用[Sublime Text 3 的 phpfmt 插件](https://packagecontrol.io/packages/phpfmt)，并将其配置为遵守代码约定（例如 PSR-0、PSR-1 或 PSR-2）。

文件将在保存时美化。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-03T13:07:18.373

我正在使用[sublimetext-codeformatter](https://github.com/akalongman/sublimetext-codeformatter)

它支持 PHP、JavaScript/JSON、HTML、CSS、SCSS、Python、Visual Basic/VBScript 以及更多功能。对于 PHP 格式，它使用 phpfmt 的一个分支，效果很好。所有语言特定的格式都可以在一个配置文件中设置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T01:21:27.653

不确定这是否是您要查找的内容，但您是否知道，当您将文件另存为 .php 时，Sublime Text 2 会根据其内置的 PHP 规则自动突出显示和缩进。您也可以从“查看”、“语法”和“PHP”中选择此项。但同样，当您将文件另存为 .php 时，这会自动完成。

# python - Python 程序作为 Windows 服务

> ID：10628377
> 
> 赞同：2
> 
> 时间：2012-05-17T00:11:50.753
> 
> 标签：python, windows, service

下面是我试图变成 Windows 服务的代码。您将看到 test.py 作为它的调用，所有这些都是写入日志文件的简短脚本（作为测试）。

那里的代码使它成为一个 Windows 服务，它做得很好，但是当我运行它时，没有任何东西写入日志文件。非常感谢帮助。下面是代码：

```
import win32service
import win32serviceutil
import win32api
import win32con
import win32event
import win32evtlogutil
import os, sys, string, time

class aservice(win32serviceutil.ServiceFramework):

   _svc_name_ = "MyServiceShortName"
   _svc_display_name_ = "A python test"
   _svc_description_ = "Writing to a log"

   def __init__(self, args):
           win32serviceutil.ServiceFramework.__init__(self, args)
           self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)           

   def SvcStop(self):
           self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
           win32event.SetEvent(self.hWaitStop)                    

   def SvcDoRun(self):
      import servicemanager      
      servicemanager.LogMsg(servicemanager.EVENTLOG_INFORMATION_TYPE,servicemanager.PYS_SERVICE_STARTED,(self._svc_name_, '')) 

  self.timeout = 1000     #1 seconds
  # This is how long the service will wait to run / refresh itself (see script below)

  while 1:
     # Wait for service stop signal, if I timeout, loop again
     rc = win32event.WaitForSingleObject(self.hWaitStop, self.timeout)
     # Check to see if self.hWaitStop happened
     if rc == win32event.WAIT_OBJECT_0:
        # Stop signal encountered
        servicemanager.LogInfoMsg("SomeShortNameVersion - STOPPED!")  #For Event Log
        break
     else:

              #what to run
              try:
                       file_path = "test.py"
                       execfile(file_path)
              except:
                       pass
             #end of what to run

def ctrlHandler(ctrlType):
   return True

if __name__ == '__main__':   
   win32api.SetConsoleCtrlHandler(ctrlHandler, True)   
   win32serviceutil.HandleCommandLine(aservice) 
```

编辑：考虑到它，我会包含我的 test.py 文件的代码，它有不必要的导入，但如果你单独运行它会完成工作。

```
import win32service
import win32serviceutil
import win32api
import win32con
import win32event
import win32evtlogutil
import os
logfile = open("log.txt", "a") #open file to log restart timestamp
logfile.write("\nthat's good!!!!")
logfile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:52:06.080

好的，所以我想通了，想回来发帖，以防其他人正在处理这个问题，尽管这有点独特。

如果你在 Windows 服务中，你必须指定你的文件路径，呃......但它没有完成，我无缘无故地拔掉了头发。

```
file_path = "test.py" 
```

本来应该

```
file_path = r"c:\users\...\test.py" 
```

将“\”用于 Windows 文件路径时要小心。它们必须像 '\\' 一样转义，或者必须将字符串声明为原始字符串 ('r')。使用像斜线'/'这样的unix分隔符也可以，但对于Windows用户来说可能看起来很奇怪。

# php - 为什么这个 PDO 准备好的语句不起作用？

> ID：10628382
> 
> 赞同：0
> 
> 时间：2012-05-17T00:12:41.993
> 
> 标签：php, mysql, pdo

对于我的生活，我似乎无法让这个简单的插入查询工作：

```
try {

// Connect to database
$dbh = new PDO("mysql:host=$host;dbname=$db", $user, $pass);

// Create an array of all data to be inserted
$data = array(':id'      => 'null',
              ':name'       => $name,
              ':location'   => $loc,
              ':latitude'   => $lat,
              ':longitude'  => $lon,
              ':website'    => $web,
              ':bandcamp'   => $bandcamp,
              ':facebook'   => $facebook,
              ':bio'        => $bio,
              ':image'      => $image,
              ':updated'    => 'null');

// Create sql statement
$sql = 'INSERT INTO artists VALUES (:id, :name, :location, :latitude, :longitude, :website, :bandcamp, :facebook, :bio, :image, :updated)';

// Run query
$query = $dbh->prepare($sql);
$query->execute($data);

// Disconnect from database
$dbh = null;

}

catch(PDOException $e) {
echo $e->getMessage();
} 
```

数据没有被插入到表中，我没有收到任何错误消息。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T00:20:35.407

当您执行这些 PDO 方法时，您应该检查它们是否没有返回`false`，如果是，则处理，以了解您的代码是否以及在哪里失败。

此外，您似乎正在将字符串值`'null'`插入到您的`id`和`updated`字段中。这可能会导致问题（请参阅[手册页](http://php.net/manual/en/pdostatement.execute.php)）。并确保您*没有*插入的任何字段都可以`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:15:55.093

```
':id'      => 'null', 
```

如果您的表将其作为主键并自动递增，则可能无法正常工作

# java - Android 初学者：带有图像和复选框的 ListView

> ID：10628383
> 
> 赞同：1
> 
> 时间：2012-05-17T00:12:47.033
> 
> 标签：java, android, eclipse, android-layout, android-intent

我是一个初学者程序员，所以请多多包涵。我已经能够创建一个包含图像的列表视图，并认为我可以修改它以添加一个复选框。但是，此设置不起作用。关于如何修复我的代码以创建带有图像和复选框的列表视图的任何建议？

```
 import java.util.ArrayList;
import java.util.List;
import java.util.Vector;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.ParseException;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class CheckboxList extends ListActivity{
        private LayoutInflater mInflater;
        private Vector<RowData> data;
        RowData rd;
        static CheckBox box0,box1,box2,box3;

        static final String[] title = new String[] {
                "Box 1", "Box 2",   

        "Box 3 ","Box 4"        };

        static final CheckBox[] boxes= new CheckBox[] {box0,box1,box2,box3};

        private Integer[] imgid = {
          R.drawable.magnum,R.drawable.mg,R.drawable.mk,
          R.drawable.mk46};

        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mInflater = (LayoutInflater) getSystemService(
        Activity.LAYOUT_INFLATER_SERVICE);
        data = new Vector<RowData>();
        for(int i=0;i<title.length;i++){

        try {
            rd = new RowData(i,title[i],boxes[i]);
            } catch (ParseException e) {
                e.printStackTrace();
           }
           data.add(rd);
        }
           CustomAdapter adapter = new CustomAdapter(this, R.layout.check_list,
                                             R.id.title, data);
           setListAdapter(adapter);
           getListView().setTextFilterEnabled(true);
        }
           public void onListItemClick(ListView parent, View v, int position,
                                                                        long id) {          

           Toast.makeText(getApplicationContext(), "You have selected "
                            +(position+1)+"th item",  Toast.LENGTH_SHORT).show();
        }
               private class RowData {
               protected int mId;
               protected String mTitle;
               protected CheckBox mCBox;
               RowData(int id,String title,CheckBox cbox){
               mId=id;
               mTitle = title;
               mCBox=cbox;
            }
               @Override
               public String toString() {
                       return mId+" "+mTitle+" "+mCBox;
               }
        }
          private class CustomAdapter extends ArrayAdapter<RowData> {

          public CustomAdapter(Context context, int resource,
                                int textViewResourceId, List<RowData> objects) {               

         super(context, resource, textViewResourceId, objects);
        }
              @Override
               public View getView(int position, View convertView, ViewGroup parent) {   

               ViewHolder holder = null;
               TextView title = null;
               CheckBox box = null;
               ImageView i11=null;
               RowData rowData= getItem(position);
               if(null == convertView){
                    convertView = mInflater.inflate(R.layout.check_list, null);
                    holder = new ViewHolder(convertView);
                    convertView.setTag(holder);
         }
                     holder = (ViewHolder) convertView.getTag();
                     title = holder.gettitle();
                     title.setText(rowData.mTitle);

                     box = holder.getcheckbox();
                     box.setChecked(false);                                                    

                     i11=holder.getImage();
                     i11.setImageResource(imgid[rowData.mId]);
                     return convertView;
        }
                    private class ViewHolder {
                    private View mRow;
                    private TextView title = null;
                    private CheckBox cbox = null;
                    private ImageView i11=null; 

                    public ViewHolder(View row) {
                    mRow = row;
         }
                 public TextView gettitle() {
                     if(null == title){
                         title = (TextView) mRow.findViewById(R.id.title);
                        }
                    return title;
                 }     

                 public CheckBox getcheckbox() {
                     if(null == cbox){
                          cbox = (CheckBox) mRow.findViewById(R.id.checkBox);
                            }
                   return cbox;
                 }
                public ImageView getImage() {
                     if(null == i11){
                          i11 = (ImageView) mRow.findViewById(R.id.img);
                                              }
                        return i11;
                }
             }
           } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:53:47.520

看看这个链接。它可能会有所帮助......

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

[带有图像和复选框的 CustomListview 示例](http://appfulcrum.com/2010/09/18/listview-example-4-custom-layout-checkbox-imagebutton-textview/)

# html - iFrame 未在页面加载时加载（jQuery Mobile）

> ID：10628384
> 
> 赞同：7
> 
> 时间：2012-05-17T00:12:48.577
> 
> 标签：html, iframe, jquery-mobile, refresh

第一次加载我的 jQuery 移动支持页面时，我无法让 iFrame 显示。

我有一个 iFrame，如下所示：

`<iframe id="manual" src="pdf/manual.pdf" style="width: 100%; height: 100%;"></iframe>`

并且由于某种原因，当页面加载时，iFrame 无法加载它。**如果我刷新**页面，我只能看到 PDF 文件。这是为什么？

为什么在没有页面刷新的情况下，PDF 文件首先没有显示在 iFrame 中？

感谢大家的任何见解。

编辑：

当我尝试使用 safari 打开页面时，我收到以下警告：

`Resource interpreted as Document but transferred with MIME type application/pdf.`

这可能与为什么 PDF 无法正确加载有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:17:46.110

因为它是一个 ajax 调用，所以 iframe 必须以不同的方式编码。检查这个网站，有一些解决方案... [网站](http://ask.metafilter.com/203564/jQueryMobile-make-my-button-presses-do-nothing)

对网站中的代码稍作修改以打开 pdf。

Page1.html

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Demo Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
</head> 
<body> 
<div data-role="page">
    <div data-role="header">
        <h1>Demo Page</h1>
    </div><!-- /header -->
    <div data-role="content">   
        <!-- this is a regular page call-->
        <a href="page2.html" data-role="button">Another Page</a>
        <!-- the functionality for this page is defined in "javascript.js" -->
        <!-- we put it in a data attribute to avoid spiders spidering the link and hammering the device -->
        <a href="#" id="perform-function" data-role="button" data-link="FocusFree.pdf">Perform Function</a>
    </div><!-- /content -->
</div><!-- /page -->
</body>
</html> 
```

Page2.html

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Another Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
</head> 
<body> 
<div data-role="page" data-add-back-btn="true">
    <div data-role="header">
        <h1>Another Page</h1>
    </div><!-- /header -->
    <div data-role="content">   
        <p>This is another page, dude.</p>
    </div><!-- /content -->
</div><!-- /page -->
</body>
</html> 
```

main.js

```
$(document).ready(function(){

    $('#perform-function').bind('click', function(){
        // we're storing the link in an attribute
        // called 'data-link':
        var url = $(this).attr('data-link');        
        // create iframe if not there, comment display none to see it
        if ($('#temp-iframe').length === 0) {
            $('<iframe />').attr({
                id: 'temp-iframe',
                name: 'temp-iframe',
                height: '100%',
                width: '100%'
            }).css({                
                position: 'absolute',
                left: '50%',
                bottom: 0
            }).bind('load', function(){             
            }).appendTo('body');
        }
        // call the url into the iframe
        $('#temp-iframe').attr('src', url);
        // jquerymobile already does this because the link is just "#"
        // but if you end up 
        return false; 
    });

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T06:16:43.863

我只是尝试使用 rel="external" 它无需刷新即可工作。第一个链接是 ajax 调用，第二个链接不是。这是直截了当的，不确定我是否错过了你拥有的其他东西..

Page1.html

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Demo Page</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
</head> 
<body> 
<div data-role="page">
    <div data-role="header">
        <h1>Demo Page</h1>
    </div>
    <div data-role="content">           
        <a href="page2.html" data-role="button">Another Page</a>
        <a href="page2.html" rel="external" data-role="button">View User Manual</a>         
    </div>
</div>
</body>
</html> 
```

Page2.html

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Another Page</title>     
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
</head> 
<body>

<div data-role="page" data-add-back-btn="true">
    <iframe id="manual" src="FocusFree.pdf" style="width: 100%; height: 100%;"></iframe> 
    <div data-role="header" data-theme="none">
        <h1>Another Page</h1>
    </div>
    <div data-role="content" data-theme="none"> 
        <p>This is another page, dude.</p>
    </div>
</div>

</body>
</html> 
```

# excel - 从函数返回数组或使用函数（不是单元格）中的数据来绘制折线图

> ID：10628389
> 
> 赞同：0
> 
> 时间：2012-05-17T00:13:28.007
> 
> 标签：excel, vba

你好，那里的好心人。

我想从我编写的函数中绘制一些数据。我的函数调用了一个数组和几个单元格。然后它执行一些计算。我想沿 x 轴绘制日期，沿 y 轴绘制我的数据。两者都将是“双倍”。

我找不到有关 SetSourceData Source:= NOT BEING FROM A RANGE OF CELLS 的信息，而是从函数内执行的计算中找到的信息。

我想在我的折线图中输入两个数组。

为了解决这个问题，我认为我可以将两个列数组返回到 Excel 中（不理想，但如果它有效，我很高兴）。这是我返回日期（以年为单位）的尝试。在我的电子表格中，我突出显示单元格 A1:A1001 并键入“=Arr()”并按 shift+ctrl+enter。它用 1946（第一年）重复填充单元格 A1:A1001。

再次感谢大家。我会保持手指交叉的：o）

```
Function Arr() As Variant
    Dim q() As Double
    ReDim q(1 To 1001)
    q(1) = 0

    Dim dq As Double
    dq = 0.001
    For G = 2 To 1001
        q(G) = q(G - 1) + dq
    Next G

    Dim DTE() As Variant
    ReDim DTE(1 To 1, 1 To 1001)

    For k = 1 To 1001
        DTE(1, k) = (q(k) * 64) + 1946
    Next k

    Arr = DTE

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:21:15.763

这不是对您直接问题的回答，而是对您绘制除范围以外的数据图表的愿望。

您可以将数组分配给`Chart.SeriesCollection(#).Values`属性

为了演示，在调用的活动表上放置一个图表`Chart 1`并运行此代码

```
Sub zx()
    Dim ch As Chart

    Set ch = ActiveSheet.ChartObjects("Chart 1").Chart
    ch.SeriesCollection(1).Values = Array(1, 3, 5, 7, 11, 13, 17, 19)
    ch.SeriesCollection(1).XValues = Array(5#, 6.3, 12.6, 28, 50)

End Sub 
```

# jsp - JSP分段文件上传

> ID：10628391
> 
> 赞同：0
> 
> 时间：2012-05-17T00:13:34.093
> 
> 标签：jsp, servlets, multipartform-data

我面临一个问题。

我正在尝试上传文件并获取文件的链接和描述。我知道我需要 cos 或任何其他实用程序。当我在 servlet 中使用 .getParameter 返回值编写字符串时，我只是未能实现这一点，`@MultipartConfig` 但代码进入无限循环：

```
`while (totaBytesRead < formDataLength) {
    //do code
}` 
```

我看到了许多其他方法，但它们都检查 formField 然后插入值或 multipart 然后插入文件。我需要同时使用文件和文本字段，所以请，如果有人知道我的问题的确切解决方案，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:36:13.520

我建议您至少使用**Apache Commons FileUpload**。如果您将添加**Spring**并使用**MultipartServletResolver** - 多部分表单数据处理让您的生活变得轻松。在这种情况下，您将能够将数据作为纯表单数据进行处理。

# jquery-ui - 是否有与 jQuery 的 Radioset 等效的 Sencha？

> ID：10628392
> 
> 赞同：1
> 
> 时间：2012-05-17T00:13:36.347
> 
> 标签：jquery-ui, mobile, sencha-touch, extjs, sencha-touch-2

jQueryUI 有一个非常漂亮的单选按钮显示：

![jQuery UI 无线电集](../Images/a129edc02c8608135b97fc203b2efba6.png)

煎茶有类似的吗？

* * *

*跟进问题，如果没有：*

对于只需要一次触摸的三项（甚至四项）组件，您认为什么是不错的用户体验？（例如，选择框是两次触摸，一次打开选择列表，一次选择您的选项）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:20:09.453

[`Ext.SegmentedButton`](http://docs.sencha.com/touch/2-0/#!/api/Ext.SegmentedButton)您在 Sencha Touch中寻找。

示例代码片段：-

```
var segmentedButton = new Ext.SegmentedButton({

    allowMultiple: false,  // ensures only 1 button gets pressed at a time.
    items: [
        {
            text: 'Choice 1'
        },
        {
            text   : 'Choice 2',
            pressed: true
        },
        {
            text: 'Choice 3'
        }
    ],
    listeners: {
        toggle: function(container, button, pressed){
            console.log("User toggled the '" + button.text + "' button: " + (pressed ? 'on' : 'off'));
        }
    }
});
Ext.Viewport.add({ xtype: 'container', padding: 10, items: [segmentedButton] }); 
```

输出 ：-

![在此处输入图像描述](../Images/f647b2751d6002d3d0baafe37aa3a6cb.png)

# python - DB - 与 MySQL 驱动程序/API OurSQL for Python 的连接？

> ID：10628397
> 
> 赞同：0
> 
> 时间：2012-05-17T00:15:22.770
> 
> 标签：python, mysql

OurSQL 是 Python 的 MySQL 驱动程序，更多信息请[点击此处](http://packages.python.org/oursql/tutorial.html)。我连接失败，我怀疑问题出在端口或主机上——[这里](http://pastie.org/3923135)有更多关于环境变量的详细信息，我正在使用 Ubuntu。

```
$ cat t.py 
import oursql
conn=oursql.connect(db='test', user='root', passwd='hello')
#, port=3306)
#, host='127.0.0.1')
conn=oursql.connect(db='test')
curs = conn.cursor(oursql.DictCursor)
curs = conn.cursor(try_plain_query=False)
a=curs.execute('SELECT * from test.pic')

print(a)
$ cat test.sql 
select * from test.pic;

$ python t.py |wc
      1       1       5    
$ mysql test < test.sql |wc
      9      78     610

WHY DIFFERENT LENGTHS??

THIS LINE WRONG (above)????
conn=oursql.connect(db='test', user='root', passwd='hello') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T00:19:54.287

您不能`curs.execute(...)`以这种方式简单地打印结果。您应该使用游标对象的[`fetchone(...)`](http://packages.python.org/oursql/api.html#oursql.Cursor.fetchone)or [`fetchmany(...)`](http://packages.python.org/oursql/api.html#oursql.Cursor.fetchmany)or[`fetchall(...)`](http://packages.python.org/oursql/api.html#oursql.Cursor.fetchall)方法来检索其结果。

此外，正如[API 文档](http://packages.python.org/oursql/api.html#cursor-classes)指出的那样，遍历游标等同于重复调用`fetchone()`. 因此，您的脚本可能以以下内容结尾：

```
curs.execute('SELECT * from test.pic')

for row in curs:
    print(row) 
```

# c++ - 将直方图应用于黑色图像时，OpenCV 项目崩溃

> ID：10628398
> 
> 赞同：2
> 
> 时间：2012-05-17T00:15:24.453
> 
> 标签：c++, opencv, colors

我正在尝试对使用 openCV 的项目进行故障排除。在某处，有一个直方图均衡——当输入图像是纯黑色（或纯白色或纯色）时崩溃。
我一直在尝试解决我得到的调试断言失败 - “表达式：向量下标超出范围” - 不成功。注意：该方法不使用 EqualizeHistogram，它手动创建直方图，计算每个级别的像素，进行平均 - 就像教科书中一样。
~~如果我可以隔离具有离散颜色分布的情况 - 只有一个颜色尖峰 - 我就不能进行这种优化，并防止崩溃。~~到目前为止，程序崩溃的唯一情况是图像直方图在一种颜色中只有一个值，而在其他任何地方都为 0。

~~如何查看图像中有多少种颜色？~~
请帮忙 ！谢谢你。
编辑：我所要做的就是用 OpenCV 方法 cvEqualizeHistogram 替换不起作用的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:36:53.613

根据我的经验，opencv 没有经过很好的同行评审和适当的测试，这导致它在边界情况下有奇怪的行为（我在使用 GrabCut 时遇到了一些麻烦）。但是由于函数直方图已经存在很长时间，我怀疑它是否仍然存在错误。也许你做错了什么？如果您有非常小尺寸的人造垫，您是否也可以重现错误？也许是 1x2？

# mysql - 查询具有多个类别的条目？

> ID：10628400
> 
> 赞同：0
> 
> 时间：2012-05-17T00:16:14.707
> 
> 标签：mysql, sql, tags

我想有一个图片库，每个画廊都将标有一组标签，我希望用户能够搜索任意数量的这些标签，我希望它有点效率。我真的不知道从哪里开始。

每个类别在“类别”表中都有一个条目，如下所示：

```
id | name | description
---+------+------------------------------------
0  | cats | This is a gallery full of cats
1  | dogs | This is a gallery full of dogs 
```

并且“画廊”表中的每个条目都会为它们所属的每个类别存储多个类别 ID（尽管我不确定此时如何存储或查询它们）

如果不是我计划的搜索功能，我只会序列化类别数组，但这根本没有效率查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:43:12.410

求第三范式

```
 gallery 
 id | desc
----+---------
1   | dogs
2   | cats
3   | cats and dogs playing 
```

.

```
gallery_category
gallery_id | category_id 
-----------+-------------
 1         | 1
 2         | 0
 3         | 0
 3         | 1 
```

然后使用~~联合~~相交

```
 select gallery_id from gallery_category where category_id=1
 INTERSECT 
 select gallery_id from gallery_category where category_id=0 
```

在 gallery_category 的两列都有索引，这应该相当快。

不幸的是 mysql 不做相交，但你可以通过 join 获得相同的效果。

```
select a.gallery_id 
  from  gallery_category as a 
  join  gallery_category as b on a.gallery_id = b.gallery_id
  where a.category_id=1 and b.category_id=0 
```

# c++ - c++中花括号后的分号

> ID：10628401
> 
> 赞同：6
> 
> 时间：2012-05-17T00:16:52.783
> 
> 标签：c++, vtk

我最近开始使用 vtk 包，我看到了这个奇怪的符号，它们包含`;`在关闭花括号之后`}`。这是一个例子`vtkUnstructuredGrid.h`

```
// Description:
// Standard vtkDataSet API methods. See vtkDataSet for more information.
int GetDataObjectType() {return VTK_UNSTRUCTURED_GRID;}; 
```

这不是必需的，QtCreator 也可以通过`extra ;`在解析代码时正确检测到这一点。我很好奇这可能是什么原因？也许可读性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T11:07:21.077

正如 QtCreator 正确检测到的那样，*这*绝对是一个额外的分号，不仅没有用，而且还会导致编译器警告和混淆。

例如带有`-Wpedantic`标志的 GCC[将触发](http://coliru.stacked-crooked.com/a/95a272dfbb6e6430)：

> 警告：额外的';'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:54:45.257

它并不少见。在 C++ 中，语句以`;`. 所以声明是`int GetDataObjectType();`。现在，这个语句是一个函数，它还定义了一个块：`int GetDataObjectType() {};`在块内，我们有另一个语句：`return VTK_UNSTRUCTURED_GRID;`所以整行可能有一个额外的分号，但它不是一个分号太多，它只是一个分号你*可以*忽略。

# eclipse - 使用存储库时，我是否正确使用了 EGit 和 Eclipse？

> ID：10628402
> 
> 赞同：2
> 
> 时间：2012-05-17T00:17:04.497
> 
> 标签：eclipse, git, push, egit

我正在尝试使用 Eclipse 设置 EGit，但我之前都没有使用过它们。我了解 Git 和 Eclipse 的基础知识或多或少只是另一个 IDE。我遇到的问题是建立一个合理的工作环境。

我在家里有文件服务器，我想将它用作我推送和拉取更改的裸存储库。为了测试它，我已经在本地完成了设置。

*   我有一个通过 Git Repository 透视图创建的裸存储库。
*   我已将该存储库克隆到本地非裸存储库中。
*   我已经在非裸存储库的子目录中创建了一个项目（这是要走的路吗？是否可以将项目直接放在带有 .git 文件夹的工作区中？到目前为止，我有一个尝试从中创建 Eclipse 项目时遇到很多麻烦。正确的方法是什么？）
*   我对这个克隆的存储库进行了一些更改并添加了索引，提交了更改并尝试将更改推送到上游。

问题是上游没有进行任何更改。有人想解释一下推送的过程，以免我误解某些东西吗？还是我完全错误地使用裸存储库而不是仅仅使用非裸存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:25:51.053

如[本教程](http://www.vogella.com/articles/EGit/article.html#respository)`.classpath`所述，您可以在项目所在的位置（即您的和`.project`文件所在的位置）创建 Git存储库。

![创建回购](../Images/e634aa9dd90a23377db53266fcf3ef42.png)

推送到一个裸仓库是个好主意（请参阅“ [Git - pull & push - production server](https://stackoverflow.com/questions/10571462/git-pull-push-production-server/10571791#10571791) ”中提到的链接）

您需要[指定要推送的内容](http://www.vogella.com/articles/EGit/article.html#github_push)：

![电子推](../Images/e107c234ae045bb7dc9ada1da15c1781.png)

至少单击“添加所有分支规范”。

# c++ - 如何使用 FreeImage_Unload()，并且不丢失图像数据

> ID：10628406
> 
> 赞同：2
> 
> 时间：2012-05-17T00:18:26.343
> 
> 标签：c++, c, allocation, freeimage

我有一个如下所示的类：

```
class myTexture
{
    public: 
        myTexture();
        ~myTexture();
        unsigned char * data;
        void loadFile(string file)
        {
            FREE_IMAGE_FORMAT fif = FIF_UNKNOWN;
            FIBITMAP *dib(0);
            BYTE* bits;

            fif = FreeImage_GetFileType(filename.c_str(), 0);
            if(fif == FIF_UNKNOWN) 
                fif = FreeImage_GetFIFFromFilename(filename.c_str());

            if(FreeImage_FIFSupportsReading(fif))
                dib = FreeImage_Load(fif, filename.c_str(), 0);

            bits = FreeImage_GetBits(dib);
            data = bits;
            FreeImage_Unload(dib);
        }
}; 
```

当我执行 FreeImage_Unload(dib) 时，我会丢失数据信息，如何将“bits”上的信息复制到“data”，以便在卸载“dib”时不会丢失信息？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:00:39.857

您必须将图像数据从 FreeImage 的 DIB 复制到单独的位置：

```
int Width  = FreeImage_GetWidth( dib );
int Height = FreeImage_GetHeight( dib );
int BPP    = FreeImage_GetBPP( dib ) / 8;
bits = FreeImage_GetBits( dib );
data = malloc( Width * Height * BPP );
memcpy( data, bits, Width * Height * BPP ); 
```

现在您可以随意释放了`dib`。

# python - 我想编写一个通用函数来配对两个数据库字段

> ID：10628407
> 
> 赞同：0
> 
> 时间：2012-05-17T00:18:29.440
> 
> 标签：python, django, metaprogramming

假设我有两个团队，`"red"`并且`"black"`. 假设我有一`Story`堂课，它以两种截然不同的方式呈现相似的信息，具体取决于您的团队：

```
class Story(models.Model):
    red_title = models.CharField()
    black_title = models.CharField()

    red_prologue = models.TextField()
    black_prologue = models.TextField()

    # ... and so on ...

    def get_field(self, genericName, team):
        """Return the field with suffix genericName belonging to the given team.

        >>>self.get_field("prologue", "red") is self.red_prologue
        True
        >>>self.get_field("title", "black") is self.black_title
        True

        """
        assert(team in ["red", "black"])
        specificName = "{}_{}".format(team, genericName)
        return self.__dict__[specificName] 
```

我对 getter 函数很满意，但我觉得我应该能够重构最初创建字段的代码。我想要一个看起来像这样的函数：

```
def make_fields(self, genericName, fieldType, **kwargs):
    """Create two fields with suffix genericName.

    One will be 'red_{genericName}' and one will be 'black_{genericName}'.

    """
    for team in ["red", "black"]:
        specificName = "{}_{}".format(team, genericName)
        self.__dict__[specificName] = fieldType(**kwargs) 
```

但是`self`和`__dict__`在第一次定义类时毫无意义，我认为 Django 要求数据库字段是类变量而不是实例变量。

那么......有什么方法可以`make_fields`在 Django 中创建这个函数，还是我不走运？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:58:44.853

不，不应将 Django 模型视为可以动态构建的东西。它是数据库表的 Python 表示。例如，`specificName`在你已经运行之后改变格式的语义是`syncdb`什么？没有明确的、明显的答案——所以 Django 不会试图回答它。您的列是在类级别定义的，就是这样。

（在某种程度上，您始终可以深入研究内部 ORM 数据结构并设置这些字段 - 但您所做的只是将自己打开到一个模棱两可和未明确定义的问题的世界。不要这样做。 )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:02:25.900

不知道你为什么要这样做。一个更理智的模型是：

```
TEAMS = (
    ("r","red"),
    ("b","black"),
)

class Story(models.Model):
    team = models.CharField(max_length=1, choices=TEAMS)
    title = models.CharField()
    prologue = models.TextField() 
```

您当前的模型正在创建许多重复的列（红色和黑色），这些列应该只由列本身定义。使用上面的模型，您的查询将类似于`Story.objects.filter(team="r")`.

然后你根本不需要你的`get_field`功能。

# java - 使用 java 录制互联网广播流

> ID：10628408
> 
> 赞同：2
> 
> 时间：2012-05-17T00:18:30.023
> 
> 标签：java, audio-streaming, audio-recording

我在发布之前搜索了信息，但我没有找到我想要的东西。希望有人能指出我正确的方向。有一个广播节目我很喜欢听，但我不能一直听，因为它在中午播出。我想有能力在我听不见的日子里录制它的一部分。Java 是否提供了从互联网广播流中录制音频的方法？如果 Java 不是正确的选择，我愿意使用另一种语言。我只是不太确定从哪里开始。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:44:59.197

您可以使用[LiveHttpHeaders](https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/) Firefox 插件转储 HTTP 标头以查找流式传输的 URL。（您将看到资源文件）。

然后，不需要Java，一个简单的curl命令就可以了：

```
curl -A "Mozilla/5.0" -b /tmp/c -c /tmp/c "http://domain.tld/path/to/radio_show.extension" > radio_show.flv 
```

**编辑**：使用真实网址：

```
curl -A "Mozilla/5.0" -L -b /tmp/c -c /tmp/c -s "http://208.92.55.56/WABCAMAAC?streamtheworld_user=1&nobuf=1337218977154" > /tmp/dump 
```

# iphone - UIWebView：为什么使用不存在的主机名时请求不会超时？

> ID：10628409
> 
> 赞同：2
> 
> 时间：2012-05-17T00:18:32.670
> 
> 标签：iphone, ios, uiwebview, uiwebviewdelegate

我的情况是这样的：

*   我有一个`UIWebView`向用户提供主机名的 URL 发出 POST 请求。
*   当主机名不存在时，我需要超时，以便我可以提醒用户说他们应该检查他们的设置。

怎么了：

我提出这样的要求：

```
NSString *theURL = [NSString stringWithFormat:@"https://%@%@", _hostname, LOGIN_PART_URL];
NSString *body = [NSString stringWithFormat:@"Username=%@&Password=%@", _username, _password];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:theURL] 
                                                           cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                       timeoutInterval:_timeoutInSecs];

[request setHTTPMethod: @"POST"];
[request setHTTPBody: [body dataUsingEncoding: NSUTF8StringEncoding]];

[web loadRequest:request]; 
```

当网络上不存在主机名时，我没有收到任何超时响应。

我已经实现了 的所有委托方法`UIWebViewDelegate`，当我使用不存在的主机名时，我会按顺序调用以下方法：

1.  `webView: shouldStartLoadWithRequest: navigationType:`
    *   （测试时总是返回真）
2.  `webViewDidStartLoad`

就是这样 - 在那之后什么都没有。

我很惊讶`webViewDidStartLoad`被调用，因为这表明它找到了 URL 并认为它可以从中获取数据。但它不能，因为 URL 不存在！

我在这里做错了吗？

我有一个我要实现的解决方法，它使用一个`NSTimer`来查看是否在超时期限内收到了响应。但是，我在取消请求时遇到问题`UIWebView`- 但这是我下一个 SO 问题的主题！

所以我的问题：

1.  `webViewDidStartLoad`在无效的 URL 上调用是否正确？
2.  我是否应该通过设置请求的方式看到返回的请求超时错误？

提前致谢！！

拉紧 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:42:17.427

使用委托方法

```
webView:didFailLoadWithError: 
```

从中获取错误。如果错误代码是

```
-1000 - Bad Url
-1001 - Request timed out
-1003 - Cannot find host
-1004 - Cannot connect to host
-1005 - Network connection lost
-1006 - NSLookupFailed 
```

通过检查这一点，您可以提醒用户该错误。

# javafx - 如何在 JavaFX 2.1 中将文本居中/换行/截断以适合矩形？

> ID：10628410
> 
> 赞同：3
> 
> 时间：2012-05-17T00:18:43.903
> 
> 标签：javafx, javafx-2

我需要在 JavaFX 2.1 中通过窗格动态创建矩形。接下来我需要在矩形上居中/换行/截断文本。文本必须适合矩形。我可以使用以下代码将文本居中并换行，但是，如果文本长度太长，它将出现在矩形之外。我想在 StackPane 中创建类似于 Label 的行为，本质上，如果 Rectangle 增长，Text 会随之增长，但始终保持在 Rectangle 的中心，如果 Text 不能适合 Rectangle，它将被相应地截断。

```
Rectangle r;

Text t;

...

//center and wrap text within rectangle

t.wrappingWidthProperty().bind(rect.widthProperty().multiply(0.9);

t.xProperty().bind(rect.xProperty().add(rect.widthProperty().subtract(t.boundsInLocalProperty().getValue().getWidth().divide(2)));

t.yProperty().bind(rect.yProperty().add(rect.heightProperty().divide(2)));

t.setTextAlignment(TextAlignment.CENTER);

t.setTextOrigin(VPos.CENTER); 
```

我可以使用哪些属性来实现这一点，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T01:58:45.633

这是一个示例替代实现。

它使用`Group`带有`layoutChildren`实现而不是绑定 api 的子类。

```
import javafx.application.Application;
import javafx.beans.property.StringProperty;
import javafx.geometry.VPos;
import javafx.scene.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.*;
import javafx.stage.Stage;

public class TextInRectangle extends Application {
  public static void main(String[] args) throws Exception { launch(args); }
  public void start(final Stage stage) throws Exception {
    TextBox text = new TextBox("All roads lead to Rome", 100, 100);
    text.setLayoutX(30);
    text.setLayoutY(20);
    final Scene scene = new Scene(text, 160, 140, Color.CORNSILK);
    stage.setScene(scene);
    stage.show();
  }

  class TextBox extends Group {
    private Text text;
    private Rectangle rectangle;
    private Rectangle clip;
    public StringProperty textProperty() { return text.textProperty(); }

    TextBox(String string, double width, double height) {
      this.text = new Text(string);
      text.setTextAlignment(TextAlignment.CENTER);
      text.setFill(Color.FORESTGREEN);
      text.setTextOrigin(VPos.CENTER);
      text.setFont(Font.font("Comic Sans MS", 25));
      text.setFontSmoothingType(FontSmoothingType.LCD);

      this.rectangle = new Rectangle(width, height);
      rectangle.setFill(Color.BLACK);

      this.clip = new Rectangle(width, height);
      text.setClip(clip);

      this.getChildren().addAll(rectangle, text);
    }

    @Override protected void layoutChildren() {
      final double w = rectangle.getWidth();
      final double h = rectangle.getHeight();
      clip.setWidth(w);
      clip.setHeight(h);
      clip.setLayoutX(0);
      clip.setLayoutY(-h/2);

      text.setWrappingWidth(w * 0.9);
      text.setLayoutX(w / 2 - text.getLayoutBounds().getWidth() / 2);
      text.setLayoutY(h / 2);
    }
  }
} 
```

示例应用程序的示例输出：

![在此处输入图像描述](../Images/345232e7ff1a2472323ba345ab577ed0.png)

几点注意事项：

1.  通常最好使用 a`Label`而不是尝试重新创建 Label 的部分功能。

2.  方法中的布局`layoutChildren`类似于 JavaFX 团队在实现 JavaFX 控件库时使用的布局。他们使用`layoutChildren`而不是绑定布局可能是有原因的，但我不知道所有这些原因是什么。

3.  我发现对于简单的布局，最好使用 JavaFX 库中的预构建控件和布局管理器（例如，上述控件可以仅使用 StackPane 中的标签或文本来实现）。如果我无法从内置布局中获得所需的布局，那么我将使用绑定来补充它们的使用，我发现它也很容易使用。我不需要使用`layoutChildren`那么多。这可能只是扩展以布置复杂节点组的问题 - 很可能在该`layoutChildren`方法中进行计算性能更好，并且在应用于复杂节点组时可能更容易使用和调试。

4.  代码并没有像 a那样`Text`通过计算文本大小并从 a 中删除多余的字符来截断，而是调用文本节点以可视方式将其裁剪为矩形的大小。相反，如果您希望截断更像 a ，那么您可以查看[JavaFX 实用程序类](http://hg.openjdk.java.net/openjfx/2.2/master/rt/file/893db73acfb5/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/Utils.java)的代码，该类执行剪切文本的计算。`String``Label``setClip``Text``Label`

5.  问题中的示例代码无法编译，因为它缺少`wrappingWidthProperty`表达式上的括号，并且它在绑定表达式中使用`getValue`和`getWidth`方法，这是不可能的 - 相反，它需要在`boundsInLocalProperty`.

此外，创建了一个[小型示例应用程序](https://gist.github.com/2724651)，演示将放置在具有矩形背景的标签中的文本添加到窗格中，并通过绑定精确控制标记矩形的 x、y 位置。

# mysql - 多个表上的MySQL子查询错误

> ID：10628413
> 
> 赞同：0
> 
> 时间：2012-05-17T00:19:05.537
> 
> 标签：mysql

我有 3 个表格帖子、术语和关系。

帖子表：

```
ID     title      
1      abc
2      cdf 
```

术语表：

```
term_id  slug
1        jeans
2        shirts 
```

关系表：

```
object_id    taxonomy_id
1             1
2             1 
```

我曾经尝试列出与“牛仔裤”相关的标题的 MySQL 查询

```
SELECT posts.title 
FROM posts, terms, relationships
WHERE (SELECT terms.term_id FROM terms WHERE terms.slug LIKE '%jeans%')
AND (SELECT relationships.object_id FROM relationships WHERE terms.term_id = relationships.taxonomy_id)
AND (posts.ID = relationships.object_id) 
```

它给了我错误 #1242 - 子查询返回超过 1 行。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:25:04.327

试试这个：

```
SELECT posts.title
FROM posts INNER JOIN relationships ON (posts.ID = relationships.object_id)
           INNER JOIN terms ON (terms.term_id = relationships.taxonomy_id)
WHERE terms.slug LIKE '%jeans%'; 
```

我没有你的桌子，所以我无法测试，但我认为这应该可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:26:08.490

尝试这样的事情：

```
SELECT p.title 
  FROM posts p
  JOIN relationships r
    ON r.object_id = p.ID
  JOIN terms t
    ON t.term_id = r.taxonomy_id 
 WHERE t.slug LIKE '%jeans%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T00:27:09.643

```
SELECT posts.title
FROM posts 
    INNER JOIN relationships ON (posts.ID = relationships.object_id)
    INNER JOIN terms ON (terms.term_id = relationships.taxonomy_id)
WHERE 
    (terms.slug LIKE '%jeans%')
AND 
    (terms.term_id = relationships.taxonomy_id)
AND 
    (posts.ID = relationships.object_id) 
```

# android - 如何在 Android 中使用 SOAP？

> ID：10628414
> 
> 赞同：0
> 
> 时间：2012-05-17T00:19:26.783
> 
> 标签：android, web-services, soap

我想使用 Android 的网络服务。它是由创建`.net framework.url="http://www.deeptraining.com/webservices/weather.asmx"`但未运行的天气 Web 服务。我做错了什么？

```
package my.Weather.Package;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class WeatherWebServiceActivity extends Activity {
    private static final String NAMESPACE = "http://litwinconsulting.com/webservices/";
    private static final String URL = "http://www.deeptraining.com/webservices/weather.asmx?WSDL";  
    private static final String SOAP_ACTION = "http://litwinconsulting.com/webservices/GetWeather";
    private static final String METHOD_NAME = "GetWeather";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final Button btn_weather = (Button) findViewById(R.id.btnGetWeather);
        final EditText txtCity = (EditText) findViewById(R.id.txtCity);
        final TextView lblWeather=(TextView) findViewById(R.id.lblWeather);

        btn_weather.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);    
                request.addProperty("City","Miami");
                SoapSerializationEnvelope envelope = 
                    new SoapSerializationEnvelope(SoapEnvelope.VER11); 
                envelope.dotNet=true;
                envelope.setOutputSoapObject(request);
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                try 
                {
                    androidHttpTransport.call(SOAP_ACTION, envelope);
                    SoapObject result=(SoapObject)envelope.getResponse();
                    lblWeather.setText(result.getProperty(0).toString());
                } 
                catch (Exception e)
                {

                    lblWeather.setText(e.getMessage());
                }

            }

        });
    }
} 
```

# jquery - Jquery，通过函数内的点击访问数据

> ID：10628416
> 
> 赞同：0
> 
> 时间：2012-05-17T00:19:47.230
> 
> 标签：jquery, jquery-click-event

我有这个 jquery 代码：

```
$('.viewmap').click(function () {

    updateMap();

}); 
```

因此，当有人单击带有 viewmap 类的链接时，它会运行一个名为 updateMap 的函数。在 updateMap 函数中，我创建了一个变量，如下所示：

```
var mapid = $(this).attr('title'); 
```

上面的变量不起作用，它有一个未定义的值，我的问题是在 viewmap click 函数中如何在 updateMap 函数中通过 $(this) 访问当前数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:25:49.873

传递`this`对 updateMap 函数的引用

```
$('.viewmap').click(function () {
    updateMap(this);
});

function updateMap(obj) {
    var mapid = $(obj).attr('title');
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:22:57.853

一种替代方法是向 updateMap 添加参数并调用 updateMap($(this)); 而不是 updateMap();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:34:15.540

有两种推荐的方式：

```
 //If u don't want to do any work before the updateMap call
    $('.viewmap').click(updateMap);

    //If u want do do anything before updateMap call
    $('.viewmap').click(function(e) {
         updateMap.apply(this, arguments);
    }); 
```

两种方式都将传递 this 和每个新参数 jquery 现在和将来添加

# java - 调试时查看图像的 Eclipse 插件

> ID：10628420
> 
> 赞同：7
> 
> 时间：2012-05-17T00:20:26.347
> 
> 标签：java, eclipse, debugging, eclipse-plugin, bufferedimage

是否有一个 Eclipse 插件可以让我在断点处暂停时查看图像变量？例如，我想在检查 BufferedImage 对象时查看图像，而不是查看它的 toString 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:29:05.593

The extension point `org.eclipse.jdt.debug.javaLogicalStructures` is used to provide the structured view of variables in the "Variables" view... and unfortunately it can only give you a string based result.

In theory, you can add a new plug-in which adds a new command to the "Variables" view (the selection is of type `JDILocalVariable`)...

# android - 无法执行 dex：多个 dex 文件再次定义 Lcom/....

> ID：10628423
> 
> 赞同：4
> 
> 时间：2012-05-17T00:21:23.387
> 
> 标签：android, eclipse, adt, dex

我一直在四处寻找，有很多与此问题相关的帖子，但似乎没有明确的解决方案（例如[，构建 apk 时出错 - “多个 dex 文件定义 Lcom/google/ads/Ad”](https://stackoverflow.com/questions/8685864/error-when-building-apk-multiple-dex-files-define-lcom-google-ads-ad)）

我已经尝试过清理/更新/重新启动 eclipse - 其他帖子中提到的所有内容。

我的项目构建，我可以在设备上运行它。但是当我尝试导出签名的 apk 时，我得到了错误。

我没有收到其他项目的错误 - 所有这些在更新 adt 等之前都有效，但由于某种原因，特定项目不会导出......

正如我所说，我可以在 Eclipse 中构建项目并运行/调试它——我只是无法导出它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T05:53:51.363

问题的根本原因是其中一个库使用 Nineoldandroid 库作为存储在 ./libs 目录中的 jar，而另一个项目通过引用来使用 Nineoldandroid

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:05:00.753

我遇到了这个问题。我的情况是我的应用程序项目正在引用一个库项目。两者都包含相同的外部库（都使用该库）。一旦我在应用程序项目中删除了对外部引用的引用，错误就消失了。对我来说，这似乎是库中的链接导致重复符号，这会产生“多个 dex 文件”错误。只是我的一个猜测。但是，阅读上述评论和其他帖子最终让我看到我两次包含图书馆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T08:13:20.710

在我的情况下..虽然librari没有加载到project.properties中。它返回“multiple dex bla bla bla ..”我只是删除了库。问题解决了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T19:25:09.313

检查您的构建路径。您很可能切换了 2 个导入同一库的包（对我来说，需要取消切换然后重新切换的是 Google API）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T20:15:51.653

[适用于我的解决方案]

右键项目 -> 构建路径 -> 配置构建路径 -> 源 -> 删除 libCocos2dx

以某种方式构建这些库两次（因为它也包含在“库”选项卡中）

# xml - 我应该在微型网站上使用 XML 文件还是 API？

> ID：10628425
> 
> 赞同：0
> 
> 时间：2012-05-17T00:21:30.270
> 
> 标签：xml, api

这是场景...我们有一个由第 3 方构建的自定义 CMS...我们无法直接访问数据库，但可以将内容导出到 XML 文件或通过 API 调用访问。

我需要建立一个微型网站，我想知道哪个更好（总体而言）......使用带有所有故事（小于 700Kb）的 XML 构建网站，并且在我需要显示新闻时必须对其进行解析列表（标题、摘录、日期、署名），然后当用户想要查看完整的故事时再次访问......故事ID）。

哪个最好？我看到这里发生了两件事。添加新内容时，需要使用单独的过程更新 XML 文件。这是使用 API 方法自动提取的。但是，使用 XML 有其好处，因为我可以使用缓存系统从内存中提供文件。我还可以缓存 API 调用以从对 API 的重复请求中受益。

你对此有什么想法？你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:28:12.870

如果 API 返回足够的信息来满足您的需求，则建议使用 XML 作为数据存储，这在性能方面可能是个坏主意。

如果文件不是太大并且你读的比写的多，你也可以选择使用 var_export 将你的数据存储为原生 PHP 数据结构。

# ruby - 构建 xml 时引用特定块

> ID：10628427
> 
> 赞同：1
> 
> 时间：2012-05-17T00:21:42.143
> 
> 标签：ruby, xml, nokogiri, gephi

我正在使用 Ruby 构建表示网络图的 gexf 格式的 XML 结构。该图由多个级别的嵌套节点组成。这个想法是解析一个看起来像这样的文件：

```
| top node | middle node | bottom node |
|    a     |      1      |    "name1"  |
|    b     |      1      |    "name6"  |
|    a     |      2      |    "name3"  |
|    b     |      2      |    "name8"  |
|    b     |      1      |    "name5"  |
|    a     |      1      |    "name2"  |
|    b     |      2      |    "name7"  |
|    a     |      2      |    "name4"  | 
```

并将其转换为：

```
<node id = a label = "top node">  
  <node id = 1 label = "middle node">
    <node id = name1 label = "bottom node"/>
    <node id = name2 label = "bottom node"/>
  </node>    
  <node id = 2 label = "middle node">      
    <node id = name3 label = "bottom node"/>
    <node id = name4 label = "bottom node"/>
  </node> 
</node>
<node id = b label = "top node">  
  <node id = 1 label = "middle node">
    <node id = name5 label = "bottom node"/>
    <node id = name6 label = "bottom node"/>
  </node>    
  <node id = 2 label = "middle node">      
    <node id = name7 label = "bottom node"/>
    <node id = name8 label = "bottom node"/>
  </node> 
</node> 
```

如您所见，由于文件中的行没有任何特定顺序，因此我需要在构建 XML 文件时能够引用每个节点和子节点。

如果我的问题仍然不清楚，当我阅读该行时：

```
|    b     |      1      |    "name6"  | 
```

我需要能够告诉构建器将此节点“name6”粘贴在“顶部节点 b”和“中间节点 1”中。Builder 或 Nokogiri 的 builder 或其他任何东西都可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:49:02.610

与其在构建节点时尝试保持对节点的处理，不如在需要时使用 Nokogiri 的 CSS（或 XPath）查询功能来查找已添加到文档中的节点：

```
require 'nokogiri'

# Create an array of the top/middle/bottom node ids
rows = File.readlines('my.data')[1..-1].map{ |row| row.scan(/[^|\s"]+/) }

# Look underneath a parent node for another node with a specific id
# If you can't find one, create one (with the label) and return it.
def find_or_create_on(parent,id,label)
  parent.at("node[id='#{id}']") or
  parent.add_child("<node id='#{id}' label='#{label}' />")[0]
end

# Since an XML document can only ever have one root node,
# and your data can have many, let's wrap them all in a new document
root = Nokogiri.XML('<root></root>').root

# For each triplet, find or create the nodes you need, in order
# (When iterating an array of arrays, you can automagically convert
#  each item in the sub-array to a named variable.)
rows.each do |top_id, mid_id, bot_id|
  top = find_or_create_on( root, top_id, 'top node'    )
  mid = find_or_create_on( top,  mid_id, 'middle node' )
  bot = find_or_create_on( mid,  bot_id, 'bottom node' )
end

puts root
#=> <root>
#=>   <node id="a" label="top node">
#=>     <node id="1" label="middle node">
#=>       <node id="name1" label="bottom node"/>
#=>       <node id="name2" label="bottom node"/>
#=>     </node>
#=>     <node id="2" label="middle node">
#=>       <node id="name3" label="bottom node"/>
#=>       <node id="name4" label="bottom node"/>
#=>     </node>
#=>   </node>
#=>   <node id="b" label="top node">
#=>     <node id="1" label="middle node">
#=>       <node id="name6" label="bottom node"/>
#=>       <node id="name5" label="bottom node"/>
#=>     </node>
#=>     <node id="2" label="middle node">
#=>       <node id="name8" label="bottom node"/>
#=>       <node id="name7" label="bottom node"/>
#=>     </node>
#=>   </node>
#=> </root> 
```

请注意，您可能需要重新考虑您对属性的使用`id`，因为您在此处提供的值既不是 a) 在整个文档中全局唯一，也不是 b) 有效标识符（数字不能是`ID`XML 中的值）。

此外，您的输出中有一些子节点的排序顺序与它们在源数据中出现的顺序不同。例如，`b/2/name8`出现在 之前`b/2/name7`，因此我的解决方案按此顺序创建它们。如果您需要对它们进行排序，请先对它们进行排序`rows`，例如：

```
rows.sort.each do |top_id,mid_id,bot_id| 
```

# html - HTML XPath：提取文本时有选择地避免标记

> ID：10628431
> 
> 赞同：2
> 
> 时间：2012-05-17T00:22:28.650
> 
> 标签：html, xpath

跟进：[HTML XPath：提取与多个标签混合的文本？](https://stackoverflow.com/questions/10618016/html-xpath-extracting-text-mixed-in-with-multiple-tags)

我让我的测试用例变得更加困难：

```
<div id="mw-content-text"><h2><span class="mw-headline" >CIA</span></h2>
<ol>
<li><small>Military</small> Central <a href="/Intelligence_Agency.html">Intelligence Agency</a>.</li>
<li>Culinary <a href="/Institute.html">Institute</a> of <a href="/America.html">America</a>.<br/>Renowned cooking school.</li>
</ol>

</div> 
```

我有相同的目标，即提取：

*   中央情报局
*   美国烹饪学院

我可以选择性地选择排除哪些标签吗？

我已经尝试过（用于删除“军事”）：

```
id('mw-content-text')/ol/li[not(self::small)] 
```

但该条件适用于整个“li”节点，因此不受影响。

如果我做类似的事情

```
id('mw-content-text')/ol/li/*[not(self::small)] 
```

然后我只过滤孩子，即使我成功地扔掉了“军事”，我也扔掉了“中央”、“烹饪”，即来自父母的文字。

我已经理解树是这样的：

```
div -- li  
          -- small -- Military  
          -- Central  
          -- a     -- Intelligence Agency  
    -- li  
          -- Culinary  
          -- a     -- Institute  
          -- of  
          -- a    -- America  
          -- br  
          -- Renowned cooking school. 
```

那是对的吗？有没有办法说“li 的文本元素和 li 的后代，除了 small 的后代？” '...除了 br 元素和所有后续文本元素'怎么样？

同样，使用（部分）Pythonic 解决方案也是可以接受的，但首选 XPath。

* * *

在坐下来阅读 Erik Ray 的“Learning XML, Second Edition”的第 6 章“XPath 和 XPointer”之后，我想我已经掌握了它。我想出了以下公式：

```
id('mw-content-text')/ol/li//text()[not(parent::small) and not(preceding-sibling::br)] 
```

在这种情况下，似乎不可能连接文本节点的结果节点集。当我们简单地将“li”元素提供给[字符串函数](http://www.w3.org/TR/xpath/#function-string)时，生成的字符串值只是元素节点 li 的后代的串联。但是在这种情况下，我们需要做进一步的过滤，这样我们就会得到一个节点集（符合条件的文本节点）而不是单个元素节点。关于连接节点集，可以在此处找到一个有用的 SO 问题：[XPath to return string concatenation of qualifying child node values](https://stackoverflow.com/questions/1403971/xpath-to-return-string-concatenation-of-qualifying-child-node-values)

任何建议如何改进此解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:07:47.437

**使用**：

```
 /*/ol/li/descendant-or-self::*
          [text() and not(self::small)]
              /text()[not(preceding-sibling::br)] 
```

# jqgrid - 跨越所有列的jqgrid动态行？

> ID：10628432
> 
> 赞同：0
> 
> 时间：2012-05-17T00:22:34.370
> 
> 标签：jqgrid

想要根据数据条件在当前行下添加新行并使该行跨越所有列。所以我正在考虑将它添加到格式化程序中，但我不确定如何获得跨越。

# c++ - 从 stringstream 复制到 char * 数组作为函数参数返回

> ID：10628439
> 
> 赞同：0
> 
> 时间：2012-05-17T00:23:23.497
> 
> 标签：c++, memory-management, char, winsock, stringstream

我正在尝试使用 Winsock2 的 HTTP 协议。我正在研究一个功能

int recv_data(const char *hostname, char *resp);

该函数旨在向给定主机发送 HTTP HEAD 请求，然后接收响应。它在指针 resp 处分配内存并在那里复制响应，然后返回为响应接收的总字节数。

这是我的接收循环：

```
int recv_data(const char *hostname, char *resp)
{
    int totalRecvd = 0;
    stringstream sStream;
    while (true)
    {
        char buffer[MAX_HEADER_SIZE];
        int retValue = recv(s, buffer, MAX_HEADER_SIZE, 0);
        if (retValue == 0)
            break;  // connection has been closed
        else if (retValue == SOCKET_ERROR)
            throw RecvException("http_headreq() unable to receive data");
        else    //
        {   
            buffer[retValue] = 0; // append null terminator
            sStream << buffer;    // dump buffer into stream
            totalRecvd += retValue + 1; // tally received bytes
        }
    }

    /** Allocate and read entire read stream into memory */
    resp = new char[totalRecvd + 1];
    strcpy(resp, sStream.str().c_str());
    return totalRecvd);
} 
```

所有这些工作都很好，如果我此时输出 resp，它输出就好了。如果我在函数明显返回后尝试输出 resp，我就会遇到问题。我不相信这应该是正常的事情，如果我没记错的话，我相信这与我使用 stringstream 临时存储响应有关。我想我在某处读到过有关 stringstream 收集的数据超出范围的信息。

我希望我可以以这种方式设置这个函数，调用者可以只传入一个 char* 并且该函数将分配正确的内存量（在运行时根据主机和返回的字节数确定） recv(). 无论如何，我是否可以从内存中的字符串流作为 char 数组获取永久副本，并且在函数返回并且字符串流超出范围后指针变坏？

[编辑]：下面是我的问题中发布的解决方案，任何希望将其重用于 Winsock2 编程的人都可以使用它，似乎效果很好。当 recv() 返回 0 时，将从服务器接收数据，直到连接关闭。解决方案是传入对指针的引用，因为 new 运算符会更改指针，并且该更改不会在函数返回后反映，除非它被传递通过参考。

```
int recv_data(SOCKET s, char *&data)
{
    int totalRecvd = 0;
    std::stringstream sStream;
    while (true)
    {
        char buffer[MAX_HEADER_SIZE];
        int retValue = recv(s, buffer, MAX_HEADER_SIZE, 0);
        if (retValue == 0)
            break;  // connection has been closed
        else if (retValue == SOCKET_ERROR)
            throw RecvException("http_headreq() unable to receive data");
        else    //
        {   
            buffer[retValue] = 0; // append null terminator
            sStream << buffer;    // dump buffer into stream
            totalRecvd += retValue + 1; // tally received bytes
        }
    }

    /** Allocate and read entire read stream into memory */
    data = new char[totalRecvd + 1];
    strcpy_s(data, totalRecvd, sStream.str().c_str());
    data[totalRecvd] = 0;
    return totalRecvd;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T00:27:54.950

`resp`是`http_req`函数中的局部变量。更新 的值在`resp`之外没有任何影响`http_req`。这一行：

```
resp = new char[totalRecvd + 1]; 
```

只会产生局部影响。

试试这个签名：

```
int http_req(const char *hostname, char *&resp); 
```

* * *

更好的是，尝试以 C++ 方式返回数据：

```
std::string http_req(const std::string& hostname) {
    ...
    return sStream.str()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:42:05.457

如果您更改代码以使用`std::string`and `boost::asio`，您将不再遇到内存管理问题。

# javascript - 3D：为 Facebook 开发沉浸式 3D 应用的 Javascript API

> ID：10628442
> 
> 赞同：0
> 
> 时间：2012-05-17T00:23:41.220
> 
> 标签：javascript, facebook, 3d

任何人都知道任何 Javascript 中的 3D API 来在 Facebook 中开发 3D 应用程序，类似于这个： [http](http://altadyn.com/developers-api/) ://altadyn.com/developers-api/ ？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:31:08.167

[Three.js](https://github.com/mrdoob/three.js/)是一个非常可爱的 WebGL 库。

在此处查看示例：http: [//mrdoob.github.com/three.js/](http://mrdoob.github.com/three.js/)

# jquery - Jquery Pagination - 处理不可见页面

> ID：10628445
> 
> 赞同：2
> 
> 时间：2012-05-17T00:24:30.640
> 
> 标签：jquery, pagination

我的问题是，处理不可见页面的最佳方法是什么？

```
$('.results').slice('//hidden pages').hide();
$('.results').slice('//current page').show();

<?php
while ($row = mysql_fetch_assoc($query)) {
   echo '<span class="results">' . $row['items'] . "</span><br/>";
}
?> 
```

目前我使用`$.hide()`它工作得很好——直到查询返回数千行数据（准确地说是大约 9000 行。）如果查询有太多结果，它似乎滞后/崩溃 firefox。这`hide/show`是错误的方法吗？我一直在看 Jquery `$.detach`，但不确定这是否能解决这个问题。

这是应该在 PHP 中处理的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:29:07.947

为什么不使用 AJAX 动态加载值？我认为您选择的方法消耗了太多内存，因为它在 DOM 中生成了太多节点，导致 Firefox 崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:36:25.283

客户端只能处理这么多。如果您想看一个示例，请尝试处理字母 a 的 10,000,000 字节（**不建议实际运行**）：

```
 var a = "a";
    var z = 100000000;
    for (var i = 0; i < z; i++) {
        a += "a";
    } 
```

通常，分页所做的是按需加载当前页面。然后释放未播放的页面。

我建议在页面导航中附加一个 ajax 事件：

```
<div id="myTag"></div>
<div class="PageNumbers" data-page-number="1">1</div>
<script type="text/javascript">
              $(".PageNumbers").click(function () {
                 $.ajax({
                    url: "/Page/",
                    type: 'GET',
                    data: { page: $(this).attr("data-page-number")},
                    success: function (result) {
                        $("#myTag").html(result);
                     }
                });
              });
</script> 
```

此外，需要保留的页面的最大部分将是图像。将它们在遇到时存储在数组中可以大大减少“发现”内容的重新加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T00:49:05.417

它缓慢的主要原因是您在 9000 xn DOM 元素上进行操作。

避免这种情况的一种方法是将结果存储在 javascript 数组中，并且仅在当前页面中呈现项目。

这是可行的，但使用 jQuery 有点乏味，并且在其他一些 javascript 库（如敲除）的帮助下会更容易做到。

这是一个使用敲除的示例实现：http: [//jsfiddle.net/6bgCX/7/](http://jsfiddle.net/6bgCX/7/)

编辑：添加示例代码

# iphone - 使用返回并接受参数的块

> ID：10628447
> 
> 赞同：2
> 
> 时间：2012-05-17T00:24:32.970
> 
> 标签：iphone, objective-c, ios, ipad, block

所以在AFNetworking中有一个函数如下：

```
+ (AFImageRequestOperation *)imageRequestOperationWithRequest:(NSURLRequest *)urlRequest
                                         imageProcessingBlock:(UIImage *(^)(UIImage *))imageProcessingBlock
                                                    cacheName:(NSString *)cacheNameOrNil
                                                      success:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image))success
                                                      failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error))failure
{ 
```

我正在尝试按如下方式使用它：

```
 [AFImageRequestOperation imageRequestOperationWithRequest:nil imageProcessingBlock:^UIImage * (UIImage *) {

        }cacheName:@"nsurl" success:^(NSURLRequest *request, NSHTTPURLResponse * response, UIImage * image){

        }failure:^(NSURLRequest *request, NSHTTPURLResponse * response, NSError * error){

        }]; 
```

但是它在 UIImage 部分似乎不正确..有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T00:31:21.990

您快到了 - 您的代码在第一个块中缺少图像的参数名称：

```
[AFImageRequestOperation imageRequestOperationWithRequest:nil imageProcessingBlock:^UIImage * (UIImage *image) { // <<== HERE

} cacheName:@"nsurl" success:^(NSURLRequest *request, NSHTTPURLResponse * response, UIImage * image){

}failure:^(NSURLRequest *request, NSHTTPURLResponse * response, NSError * error){

}]; 
```

我认为这是 Xcode 中的一个错误，因为它将签名扩展为您发布的内容，而没有参数名称。

# ruby-on-rails - 表内/表行之间的引导折叠不起作用

> ID：10628448
> 
> 赞同：3
> 
> 时间：2012-05-17T00:24:33.050
> 
> 标签：ruby-on-rails, twitter-bootstrap, html-table, expand

我对 Bootstrap 折叠功能有疑问。我很确定我忽略了一些非常明显或容易修复的东西，但是我用谷歌搜索了很多并使用了代码，但没有成功。

我有一个“帐户设置”页面，其中用户的所有帐户信息都以类似表格的格式显示，最后一个表格列的表格单元格始终包含一个“编辑”按钮来编辑该信息。当人们点击“编辑”时，一个编辑表单将在该表格行的下方展开。

我按照[http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)的方案，折叠功能本身工作正常，但问题是每个表单总是在我的表格上方展开，无论我点击哪个编辑按钮在。我截取了它的外观。[http://imageshack.us/photo/my-images/834/problemyn.png/](http://imageshack.us/photo/my-images/834/problemyn.png/)而不是在整个表格上方，我希望它在特定行下方展开，将较低的行向下推。

这是我的代码：

```
<table class="table">
<tbody>
    <tr>
        <td>Username</td>
        <td><%= @user.name %></td>
        <td><button class="btn btn-danger" data-toggle="collapse" data-target="#username">Edit</button></td>
    </tr>
    <div id="username" class="collapse">
        <div class="row">
            <div class="span6 offset3">
            <%= form_for(@user) do |form| %>
            <%= render 'shared/error_messages', object: form.object %>
                <%= form.label :name, "Change Username" %>
                <%= form.text_field :name %>
                <%= form.submit "Save changes", class: "btn btn-primary" %>
            <% end %>
            </div>
        </div>
    </div>
    <tr>
        <td>Email</td>
        <td><%= @user.email %></td>
        <td><button class="btn btn-danger" data-toggle="collapse" data-target="#email">Edit</button></td>
    </tr>
    <div id="email" class="collapse">
        <div class="row">
            <div class="span6 offset3">
            <%= form_for(@user) do |form| %>
                <%= render 'shared/error_messages', object: form.object %>
                <%= form.label :email, "Change Email" %>
                <%= form.text_field :email %>
                <%= form.submit "Save changes", class: "btn btn-primary" %>
            <% end %>
            </div>
        </div>
    </div>
    <tr>
        <td>Password</td>
        <td>Last time updated:&nbsp;<%= @user.updated_at %></td>
        <td><button class="btn btn-danger" data-toggle="collapse" data-target="#password">Edit</button></td>
    </tr>
    <div id="password" class="collapse">
        <div class="row">
            <div class="span6 offset3">
            <%= form_for(@user) do |form| %>
                <%= render 'shared/error_messages', object: form.object %>
                <%= form.label :password, "Change Password" %>
                <%= form.text_field :password %>
                <%= form.label :password_confirmation, "Confirm Password" %>
                <%= form.password_field :password_confirmation %>
                <%= form.submit "Save changes", class: "btn btn-primary" %>
            <% end %>
            </div>
        </div>
    </div>
    <tr>
        <td>Language</td>
        <td>English</td>
        <td><button class="btn btn-danger" data-toggle="collapse" data-target="#language">Edit</button></td>
    </tr>
    <div id="language" class="collapse">
        <div class="row">
            <div class="span6 offset3">
            <!-- code for language form -->
            </div>
        </div>
    </div>
    <tr>
        <td>Avatar</td>
        <td><%= avatar_status %></td>
        <td><button class="btn btn-danger" data-toggle="collapse" data-target="#demo">Edit</button></td>
    </tr>
    <div id="demo" class="collapse">
        <div class="row">
            <div class="span6 offset3">
            <%= form_for(@user) do |form| %>
            <%= form.label :avatar %>
            <%= form.file_field :avatar %>

            <%= form.submit "Add avatar", class: "btn btn-primary" %>
            <% end %>
            </div>
        </div>
    </div>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-21T15:56:20.507

要折叠表格行，您应该为折叠的行编写额外的 css：

```
table .collapse.in {
    display: table-row !important;
} 
```

它将修复行展开后的显示问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T13:21:24.163

嗨，对不起，我不会有一个令人满意的答案。不允许将元素以外的任何`<tr>`内容作为其后代，`<tbody>`因此您的 HTML 无效。这就是导致故障行为的原因。最好的办法是将表单的每个部分都包装在一个新`table`元素中。

# javascript - 当它有软包装线时，如何在JS的TextArea中找到光标行？

> ID：10628453
> 
> 赞同：2
> 
> 时间：2012-05-17T00:25:31.030
> 
> 标签：javascript, textarea

我有一个使用 jQuery 与之交互的文本区域。我有一些自定义的 keydown 事件处理程序。为了使我的交互顺畅，我可以使用一个返回“当前光标行”的函数。

有人可能会认为有一个简单的解决方案（针对无数 SO 问题提出）......

1.  获取当前光标位置（存在跨浏览器插件）
2.  获取到该光标位置的 TEXTAREA 值子字符串
3.  计算该子字符串中的换行符（'\n'）

问题？当 textarea 被软包装时，这不起作用。计数“\n”会产生太低的数字。

问题：如何在软包装 textarea 中获得实际精确的光标行号？（精度是使我的交互顺畅的关键。）

# jquery - Highstock/Highcharts 对数据集（项目）的限制？

> ID：10628455
> 
> 赞同：2
> 
> 时间：2012-05-17T00:25:38.203
> 
> 标签：jquery, highcharts, highstock

我正在使用 Highcharts 来渲染一堆数据，但是对于 200 多个数据集，什么都没有显示。物品有限制吗？就我而言，我有几千个条目，例如 20000。

有没有可以处理大数据的 Highstock/Highcharts 的替代品？

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:12:01.633

感谢汤姆。我在论坛里找到了答案。[http://highslide.com/forum/viewtopic.php?f=9&t=17019&p=72268#p72268](http://highslide.com/forum/viewtopic.php?f=9&t=17019&p=72268#p72268)

我按照有关**turboThreshold**的信息，[http](http://www.highcharts.com/ref/#plotOptions-series--turboThreshold) ://www.highcharts.com/ref/#plotOptions-series--turboThreshold 它说：*当一个系列包含一个比这更长的数据数组时，只有一维数字数组，或具有 x 和 y 值的二维数组是允许的。此外，仅测试第一个点，其余部分假定为相同格式。这可以节省昂贵的长系列数据检查和索引。默认为 1000。*

我可以将 turboThreshold 增加到数据量，例如 10.000 - 或者我可以为数据使用一维或二维数组（在我使用对象之前）。然后它工作。

# iphone - 在第二部 iPhone 上进行测试

> ID：10628457
> 
> 赞同：0
> 
> 时间：2012-05-17T00:25:48.680
> 
> 标签：iphone, ios

我开发了我的第一个完整的 iPhone 应用程序，并在我的手机上进行了测试。我想让其中一位贡献的图形艺术家在他们的 iPhone 上对其进行测试。他们住在另一个州，所以我无法使用他们的设备。我将他们的设备 ID 添加到苹果门户。

几个问题：当我点击刷新时，我没有在 Xcode 中看到设备显示。我应该去看吗？我应该向他们发送哪些可执行文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:39:02.773

看看[testflight](https://testflightapp.com)。它使分发应用程序变得非常容易。由于您已经包含了设计师设备 ID，您所要做的就是：

*   注册试飞
*   邀请设计师并告诉他注册并添加他的设备信息
*   转到苹果开发者门户 - 配置 - 分发并创建一个新的分发配置文件（创建配置文件时不要忘记添加设计器设备），下载并打开证书（将显示在 Xcode 的窗口>组织器中） - 确保在您的构建设置中选择了正确的证书。
*   确保现在在 Xcode 中选择了 iOS 设备（而不是模拟器）转到产品>存档，当显示存档时单击分发>临时分发
*   这将创建一个 IPA 文件。
*   将此上传到试飞并按照说明从您的团队中选择设计师。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:37:00.857

使用测试飞行。它是免费的，安装他们的 API 需要 5 分钟，并提供有关如何通过无线方式将您的应用程序推送给任何测试人员的分步说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T05:55:31.387

将他们的设备 ID 添加到您的开发者帐户，更新您的临时配置文件（您用于在设备上运行您的应用程序）将他们的设备附加到此配置文件。现在再次使用更新的配置文件对您的构建进行签名，并将此 APP 文件和配置文件提供给其他人或将其上传到 TestFlight。

# objective-c - 在目标 C 中，我如何以编程方式访问 UIViewController？

> ID：10628463
> 
> 赞同：2
> 
> 时间：2012-05-17T00:26:20.143
> 
> 标签：objective-c

假设我有一个嵌套了很多 uitableviewcontrollers 和 uiviewcontrollers 的 tabbar 应用程序。我将使用哪一行代码来获取特定控制器的句柄？

例如，假设我想获取 uitableviewcontroller，它当前是标签栏控制器的第三个标签。我在具有以下代码的 MyObject.h/m 文件中：

我的对象.h

```
#import <Foundation/Foundation.h>
#import "MyAppDelegate.h"

@interface MyObject : NSObject

-(void) myfunction;

@end 
```

我的对象.m

```
#import "MyObject.h"

@implementation MyObject

-(void) myfunction  {

    UITableViewController * mytvc = /*Some line of code*/;

}
@end 
```

我用什么来代替`/*Some line of code*/`mytvc 是一个指向我感兴趣的 uitableviewcontroller 的变量？

我正在使用 XCode 4.2。我有一个故事板来说明我的每个 uiviewcontrollers。Tabbar 视图控制器是 xcode 为我做的第一件事。所以我认为这意味着它是应用程序的顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:38:38.043

如果它是您的根视图控制器，并且您可以访问您的应用程序委托，您应该能够像这样访问您的控制器：

```
appDelegate.window.rootViewController 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:06:58.427

`rootViewController.tabBarController.viewControllers`是每个选项卡的根视图控制器的数组。您可以通过设置`tabBarController.selectedViewController`或来设置活动视图控制器`tabBarController.selectedIndex`。

从应用程序委托它是`self.window.rootViewController.tabBarController`. 从视图控制器它是`self.view.window.rootViewController.tabBarController`.

`[[self.view.window.rootViewController.tabBarController.viewControllers objectAtIndex:2] myFunction]`将从另一个视图控制器访问您的功能。那是假设您的第三个选项卡不是导航控制器。

如果您的选项卡中有一个导航控制器，那么您必须在它上面添加导航控制器语法。`[[[self.view.window.rootViewController.tabBarController.viewControllers objectAtIndex:2] navigationController].visibleViewController myFunction]`将是完整的路径。现在看来，这似乎有点荒谬。

# php - 基本的 CSS 问题

> ID：10628464
> 
> 赞同：1
> 
> 时间：2012-05-16T22:05:24.830
> 
> 标签：php, html, colors, css, background

很抱歉浪费时间在这个上。我一直试图让一个页面在css中堆叠背景颜色，我只是不知道如何询问如何做到这一点。例如，我想要一个白色标题部分，其高度可能为 150 像素，然后在其正下方有一个特定颜色，高度可能为 20 像素并拉伸页面的宽度，然后重复这两个或三个以上使用其他颜色的时间，然后以另一个大的白色页脚结束。很难知道该怎么称呼这个。我认为我不需要任何东西来漂浮，就像美国国旗上的白色和红色一样堆叠。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:16:41.883

你试过什么吗？

```
<div style="height: 150px; background: #fff;"></div>
<div style="height: 20px; background: red;"></div>
<div style="height: 20px; background: blue;"></div>
<div style="height: 150px; background: #fff;"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:28:20.797

要在页面上拉伸它，您可以使用 position:absolute

**CSS**

```
#container {
    position:absolute;
    top:0px;
    left:0px;
    width:100%;
}
.white {
    background:white;
    height: //height;
}
.blue {
    background:blue;
    height: //height;
}
.red {
    background:red;
    height: //height;
} 
```

**HTML**

```
<div id="container">
    <div class="white"></div>
    <div class="red"></div>
    <div class="blue"></div>
    <div class="white"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T14:17:04.390

如果您希望红色白色和蓝色重复，您可以使用具有红色白色和蓝色的一个“重复”的背景图像和`background: repeat-y`. 如果您不希望它重复整个页面高度，您可以将它放在一个 div 中并控制高度。

```
<div style="height:80%; background:url('flag.png') repeat-y;></div> 
```

也许是这样的？

# ruby-on-rails - 简单的FB查询：画布应用程序中的FB登录屏幕？

> ID：10628467
> 
> 赞同：0
> 
> 时间：2012-05-17T00:26:38.867
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api

我的 Rails 应用程序在 FB 画布中运行。问题：

如果用户未登录 Facebook，则会重定向到 Facebook 登录/身份验证页面。但是，这在画布中不起作用，因为 facebook 身份验证页面不允许将自己加载到 iframe 中。这是控制台错误：

`Refused to display document because display forbidden by X-Frame-Options.`

因此用户无法登录 FB 来验证应用程序。不在画布中运行时它工作正常。

我怎样才能解决这个问题？

# 解决了

添加`:target => "_top"`到链接中，现在可以正常工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:00:59.927

添加`:target => "_top"`到链接中，现在可以正常工作了。

# objective-c - Xcode 构建但不在设备上运行

> ID：10628469
> 
> 赞同：3
> 
> 时间：2012-05-17T00:26:54.293
> 
> 标签：objective-c, ios, xcode, xcode4, xcode4.3

我正在添加第三方库（GPUImage），实际上我设法将它全部放入并安装在设备上。呜呼！

然后……好吧，你知道这个故事。它不再起作用了。

现在，当我尝试构建到我的设备时，它会“构建成功”然后立即进入“完成运行”。

我的设置：iPhone 4 iOS 5.1.1 OS X Lion Xcode 4.3.2

我有：

*   试过：
    1.  加入armv6
    2.  -all_load
    3.  重新启动 xcode
    4.  重启设备
    5.  从管理器中删除设备，然后将其添加回来。
    6.  重新启动计算机。
    7.  清洁项目和重建
    8.  从 pList 中删除“要求”(?)（尽管此应用适用于 iOS 5.0 或更高版本）。

这些似乎都不起作用。如果有人遇到过这个问题，请帮忙！我快要失去理智了。

同时，我将尝试存档和执行并进行 OTA 安装，看看是否可行。

非常感谢您的宝贵时间，

科里

PS - 我已经在这里看到了所有其他帖子，所以请不要粘贴它们的链接:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:19:28.670

项目、方案和目标名称的问题。这一切都必须相同。尝试重命名为同名

“AppName”和“Appname”不正确。必须是“AppName”和“AppName”，或者“Appname”和“Appname”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T02:47:33.077

我有同样的问题 - 我有最新的 XCode iOS SDK 5.1 - 但我的 iPhone 更新为最新的 iOS 版本 5.1.1

不确定如何解决这个问题，因为 Apple 还没有发布新的 SDK。老实说，这很糟糕，因为我无法在我的设备上进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:34:26.783

不知道是什么解决了我的问题，但使用新的 Xcode 版本时问题停止了。感谢大家的帮助。

# facebook - 在使用 FQL 进行 Facebook 查询之前，我应该等待多长时间

> ID：10628471
> 
> 赞同：0
> 
> 时间：2012-05-17T00:27:15.897
> 
> 标签：facebook, facebook-fql

我正在使用 FQL 从 facebook 页面查询帖子，有时会随机收到一条错误消息：“远程（facebook）服务器返回错误：（500）内部服务器错误”。

我处理这个问题的方法是让线程休眠大约 3 秒。但我很好奇如果第一次失败，在使用 FQL 查询之前是否有建议的等待时间。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:31:40.753

对此没有硬性规定。你可以做一个递增的退避机制。

*   先试试
*   如果失败，请等待 1 秒，然后重试
*   如果再次失败，请等待 3 秒，然后重试

直到您最多尝试 3/4 次。

# c - 如何限制 C 中的套接字速度？

> ID：10628472
> 
> 赞同：5
> 
> 时间：2012-05-17T00:27:33.763
> 
> 标签：c, performance, sockets, ftp, bandwidth-throttling

> **可能重复：**
> [如何在 C 中限制套接字连接的带宽？](https://stackoverflow.com/questions/235762/how-do-you-throttle-the-bandwidth-of-a-socket-connection-in-c)

我正在为 Unix 环境用 C 语言编写一个简单的 FTP 服务器。作为服务器的一项功能，我想限制用户的上传/下载速度。

1.  有没有直接解决这个问题的库函数？

2.  如果不是，生产 FTP 服务器中使用的算法是什么？我有一个非常幼稚的解决方案：计算一秒钟内要发送多少字节，比如说`x`，`write(x)`或`read(x)`，然后`sleep(1)`。

应该有更好的解决方案。如果有代码示例就更好了。

需要明确的是，我使用的是 Mac OS X，但我希望它也可以在 Ubuntu 或某些 Linux 下运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:18:55.700

FTP是一个应用层协议。FTP 可以在 TCP 或 UDP 套接字上运行。（编辑：tftp 和[uftp](http://uftp-multicast.sourceforge.net)在 udp 上运行，详情请参阅评论部分）

套接字速度是以下函数：

1.  链接速度：10/100 Base T 等等。
2.  链路的误码率：误码率（通常在当今世界，它通常低 10 次方 -9 或类似的东西。也有突发错误。
3.  套接字缓冲区大小：`/proc/sys/net/core`参数

在 linux 上：为了处理 TCP 套接字，这里有一篇很好的文章 [1]

4.调整堆栈以过滤/丢弃数据包以引入数据包丢失，从而最终限制流量：**netem** [2] 等工具可帮助您调整存储桶以限制流量。

[1] [http://www.cyberciti.biz/faq/linux-tcp-tuning/](http://www.cyberciti.biz/faq/linux-tcp-tuning/)

[2] [http://www.linuxfoundation.org/collaborate/workgroups/networking/netem](http://www.linuxfoundation.org/collaborate/workgroups/networking/netem)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T01:09:49.017

你确定要这么做吗？你的动机是惹恼你的用户吗？（这是一个正当的动机 - 请参阅几个“免费上传”网站中的任何一个）

像这样的带宽限制不是保护服务器过载的好方法。人们会找到线程客户端并打开并发 FTP 会话...

*是否有任何库函数可以做到这一点？*

可能不是，带宽整形是一项操作系统任务而不是服务任务。

*算法是什么？*

你描述的那个听起来相当有效。

为了使其更好，可以查看已读取或写入了多少个八位字节以及在决定睡觉之前花费了多少时间。考虑客户端比您的限制慢的情况：读取和写入最终会阻塞，而您的 sleep() 只会增加不必要的延迟。这也将减少用户对磁盘延迟等的隐藏影响。

您可以考虑使用 usleep 或 nanosleep 以获得更精细的分辨率，两者都在 posix 中，因此应该在 OSX *BSD 和 linux 上。

# asp.net-mvc-3 - MVC3：在动作方法上带有搜索过滤器的 PRG 模式

> ID：10628476
> 
> 赞同：1
> 
> 时间：2012-05-17T00:28:24.147
> 
> 标签：asp.net-mvc-3

我有一个带有 Index 方法的控制器，该方法具有几个可选参数，用于过滤返回到视图的结果。

```
public ActionResult Index(string searchString, string location, string status) {
    ...

product = repository.GetProducts(string searchString, string location, string status);

return View(product);
} 
```

我想实现如下所示的 PRG 模式，但我不知道如何去做。

```
[HttpPost]
public ActionResult Index(ViewModel model) {
    ...
    if (ModelState.IsValid) {
        product = repository.GetProducts(model);
    return RedirectToAction(); // Not sure how to handle the redirect
    }
return View(model);
} 
```

我的理解是，如果出现以下情况，则不应使用此模式：

*   除非您实际存储了一些数据，否则您不需要使用此模式（我不是）
*   您不会使用此模式来避免刷新页面时来自 IE 的“您确定要重新提交”消息（有罪）

我应该尝试使用这种模式吗？如果是这样，我将如何处理？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T00:45:38.733

**PRG**代表**Post-Redirect-Get**。这意味着当您将一些数据回传到服务器时，您应该重定向到一个`GET`动作。

**为什么我们需要这样做？**

想象一下，您有一个表单，您可以在其中输入客户注册信息并单击提交，然后将其发布到 HttpPost 操作方法。您正在从表单中读取数据并将其保存到数据库中，并且您没有进行重定向。相反，您将停留在同一页面上。现在，如果您刷新浏览器（只需按 F5 按钮），浏览器将再次执行类似的表单发布，您的 HttpPost Action 方法将再次执行相同的操作。IE; 它将再次保存相同的表单数据。这是个问题。为了避免这个问题，我们使用 PRG 模式。

在**PRG**中，您单击提交，`HttpPost`Action 方法将保存您的数据（或它必须做的任何事情），然后重定向到`Get`请求。所以浏览器会向`Get`那个 Action 发送一个 Request

`RedirectToAction`方法`HTTP 302`向浏览器返回响应，这会导致浏览器对指定的操作发出 GET 请求。

```
[HttpPost]
public ActionResult SaveCustemer(string name,string age)
{
   //Save the customer here
  return RedirectToAction("CustomerList");

} 
```

上面的代码将保存数据并重定向到 Customer List 操作方法。所以你的浏览器 url 将是 now `http://yourdomain/yourcontroller/CustomerList`。现在，如果您刷新浏览器。IT 不会保存重复的数据。它只会加载 CustomerList 页面。

在您的搜索操作方法中，您不需要重定向到获取操作。您在`products`变量中有搜索结果。只需将其传递给所需的视图即可显示结果。您不必担心重复的表单发布。所以你很好。

```
[HttpPost]
public ActionResult Index(ViewModel model) {

    if (ModelState.IsValid) {
        var products = repository.GetProducts(model);
        return View(products)
    }
  return View(model);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T00:44:23.943

重定向只是一个 ActionResult ，它是另一个动作。因此，如果您有一个名为 SearchResults 的操作，您只需说

```
return RedirectToAction("SearchResults"); 
```

如果动作在另一个控制器中......

```
return RedirectToAction("SearchResults", "ControllerName"); 
```

带参数...

```
return RedirectToAction("SearchResults", "ControllerName", new { parameterName = model.PropertyName }); 
```

**更新**

我突然想到，您可能还希望选择将复杂对象发送到下一个操作，在这种情况下您的选择有限，TempData 是首选方法

使用你的方法

```
[HttpPost]
public ActionResult Index(ViewModel model) {
    ...
    if (ModelState.IsValid) {
        product = repository.GetProducts(model);
        TempData["Product"] = product;
        return RedirectToAction("NextAction");
    }
    return View(model);
}

public ActionResult NextAction() {
    var model = new Product();
    if(TempData["Product"] != null)
       model = (Product)TempData["Product"];
    Return View(model);
} 
```

# iphone - NSMutableArray addObject 覆盖数据

> ID：10628478
> 
> 赞同：2
> 
> 时间：2012-05-17T00:28:46.787
> 
> 标签：iphone, objective-c, ios, nsmutablearray

我正在添加一个对象“m”，`NSMutableArray`如下所示：

```
 [m setObject:a forKey:@"a"];
    [m setObject:b forKey:@"b"];
    [m setObject:c forKey:@"c"];
    [m setObject:d forKey:@"d"];

    [myArray addObject:m];

    [m release]; 
```

对于一个对象，它可以正常工作，但是当添加另一个对象时，myArray 中的所有对象都会重复相同的值。

如何避免这种情况？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T00:43:10.793

您需要在`NSMUtablearray`每次填充并插入它时创建一个单独的实例，否则您会继续重复使用相同的实例，因此只有它的最后一个状态出现在数组的每个位置。

```
NSMutableArray *myArray = [NSMutableArray array];
for (int i = 0 ; i != 10 ; i++) {
    NSMutableDictionary *m = [NSMutableDictionary dictionary];
    // Presumably, this part is done differently on each iteration
    [m setObject:a forKey:@"a"];
    [m setObject:b forKey:@"b"];
    [m setObject:c forKey:@"c"];
    [m setObject:d forKey:@"d"];
    [myArray addObject:m];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:05:17.490

试试这个：

```
 NSMutableDictionary* m = [NSMutableDictionary dictionary];
[m setObject:@"1" forKey:@"a"];
[m setObject:@"2" forKey:@"b"];
[m setObject:@"3" forKey:@"c"];
[m setObject:@"4" forKey:@"d"];

NSMutableArray* myArray = [NSMutableArray array];
[myArray addObject:m];

NSLog(@"%@", m);
NSLog(@"%@", myArray); 
```

# visual-studio-2010 - 尝试在 VS2010 中使用 Rhino Mocks - 测试不运行

> ID：10628481
> 
> 赞同：0
> 
> 时间：2012-05-17T00:29:19.647
> 
> 标签：visual-studio-2010, unit-testing, mstest, rhino-mocks

我有一个单元测试，当它击中一个击中真实数据存储的真实对象时，它工作得很好。像这样的东西：

```
 [TestMethod]
    public void ATest()
    {
        var p = new Provider();

        var data = p.GetData();

        ...

    } 
```

该测试在所有模式下执行，取回数据并执行从中执行的所有操作。现在，假设我想使用 Rhino Mocks 模拟提供程序。Provider 类实现 IProvider。所以我去写这样的东西：

```
 [TestMethod]
    public void ATest()
    {
        var p = MockRepository.GenerateStub<IProvider>();

        ...

        var data = p.GetData();

        ...

    } 
```

但是现在当我尝试调试这个测试时，它不起作用。完全没有。我的意思是，我在这个方法的第一行（在'{'本身上）放了一个断点，它没有被击中。有点奇怪...

我是 Rhino Mocks 的新手，也许我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:45:46.737

您没有为模拟上的 GetData 调用定义返回值。尝试这样的事情：

```
p.Stub(s => s.GetData()).Return(testData); 
```

# ruby-on-rails - 使用 google open-id 访问令牌信息设计 Omniauth

> ID：10628482
> 
> 赞同：0
> 
> 时间：2012-05-17T00:29:30.140
> 
> 标签：ruby-on-rails, devise, openid, omniauth, google-openid

我是 Rails 的新手，我正在尝试将omniauth 和登录与谷歌集成。在网上冲浪我找到了一种方法，但我收到了这个错误：

```
undefined method `[]' for nil:NilClass

app/models/user.rb:22:in `find_for_open_id'
app/controllers/users/omniauth_callbacks_controller.rb:17:in `open_id' 
```

我认为这是因为我没有正确访问访问令牌信息。

这是代码：

模型用户.rb

```
def self.find_for_open_id(access_token, signed_in_resource=nil)    
    data = access_token['user_info']
    if user = User.find_by_email(data["email"])
    user
    else # Create a user with a stub password.
      User.create!(:email => data["email"], :password => Devise.friendly_token[0,20])
    end
  end 
```

omn​​iauth_callbacks_controller.rb

```
def open_id
    # You need to implement the method below in your model
    @user = User.find_for_open_id(env["omniauth.auth"], current_user)
    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Google"
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.open:id_data"] = env["openid.ext1"]
      redirect_to new_user_registration_url
    end
  end 
```

设计.rb

```
config.omniauth :open_id, :store => OpenID::Store::Filesystem.new("/tmp"), :name => 'open_id', :identifier => 'https://www.google.com/accounts/o8/id' 
```

我不知道我还能给你看什么。

对我来说，问题就在这里：

数据 = access_token['user_info']

access_token['user_info'] 返回空值。

难道我做错了什么？还有其他方法可以访问“user_info”然后访问电子邮件吗？

提前致谢。希望我很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:41:29.420

你应该只是使用`data = access_token['info']`而不是`data = access_token['user_info']`

从那里您可以访问`data['email]`、`data['first_name']`和`data['last_name']`。

# javascript - 开发人员工具和选项卡之间的切换

> ID：10628486
> 
> 赞同：0
> 
> 时间：2012-05-17T00:29:43.417
> 
> 标签：javascript, google-chrome

开发时，我会在一个或多个选项卡上打开开发人员工具。如果我然后切换到一个尚未打开的设备，则会触发调整大小事件。该页面的实际大小没有改变，但是发生了 resize 事件，它推动了我的页面周围的东西。我遇到了一个类似的帖子，关于一个已经被修复的错误[链接](https://stackoverflow.com/questions/3713838/why-does-the-window-resize-event-fire-when-changing-tabs-in-chrome-6-0-472-55)

使用他相同的 js fiddle [http://jsfiddle.net/urKRJ/](http://jsfiddle.net/urKRJ/)。您可以通过在打开开发人员工具的情况下打开一个选项卡并切换到小提琴来对其进行测试。我正在使用金丝雀构建。这是一个错误还是应该这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T22:14:11.557

[http://code.google.com/p/chromium/issues/detail?id=128941](http://code.google.com/p/chromium/issues/detail?id=128941)已发布并已分配

# windows-7 - 用户定义的数据库位置

> ID：10628487
> 
> 赞同：0
> 
> 时间：2012-05-17T00:30:04.420
> 
> 标签：windows-7, vb6

我的应用程序最初是在 win XP 中使用 vb6 创建的，将程序特定的值存储在注册表中。这些值之一是程序使用的数据库所在的位置。用户可以将它放在他们喜欢的任何地方，程序启动它使用上次从注册表中保存的值启动数据库位置屏幕。此表单使用 DriveListBox、DirListBox 和 FileListBox 组件。在 Win 7 上运行此应用程序时，尝试将 dir 列表设置为存储在注册表中的值时出现错误，该注册表是网络驱动器。如果存储数据库的驱动器是本地的，这一切都可以正常工作。

代码是：

```
 On Error GoTo HandleError
  dbLocation = GetSetting(App.Title, "Settings", "DBLocation", dbserver)
  If dbLocation = dbserver Then
    Dir1.Path = GetSetting(App.Title, "Database", "ServerDBPath", "C:\")  <----- fails
  Else
    Dir1.Path = GetSetting(App.Title, "Database", "LocalDBPath", "C:\")
  End If
  Drive1.Drive = Dir1.Path
  Exit Sub
HandleError:
   MsgBox "Error connecting to the network.  Check network connections and try again.", vbOKOnly, "Connection error"
   Drive1.Drive = "C:\" 
```

我怀疑问题出在目录列表框上。如果我删除我的错误处理，抛出的错误是“设备不可用”

关于发生了什么的任何想法？我使用的组件对 win 7 无效吗？对于此应用程序，数据库必须位于网络驱动器上，以便可以从运行该程序的多台 PC 访问它。所有 PC 都在 Windows 7 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:35:44.367

VB6 附带的驱动器、目录和文件控件已经过时了。自 VB3 以来，它们并没有显着变化——那是在九十年代中期。这些是为与 Windows 3.1 一起使用而设计的！最好使用 Common Dialogues 库附带的 Open File 和 Save File 对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:02:30.127

至于 windows 7 中提供的 vb6 的 dll，请参阅[http://msdn.microsoft.com/en-us/vstudio/ms788708.aspx](http://msdn.microsoft.com/en-us/vstudio/ms788708.aspx)

GetSetting 是对注册表的 VB6 调用。64 位计算机上的 Windows 7 将 32 位应用程序的注册表位置移动到类似 WOW3264 的位置。

# java - 动态图形对象绘画

> ID：10628492
> 
> 赞同：8
> 
> 时间：2012-05-17T00:30:41.910
> 
> 标签：java, swing, graphics, paint

试图找出最好的方法来做到这一点（并且不跨越任何细节，不要做我不知道的事情）。

我正在用圆和线来直观地显示一个图形（各种节点，用边连接它们）来表示这种图形。每个节点都将在运行时添加，我无法对其进行硬编码。据我了解，所有绘画都需要在 paint(Graphics g) 方法中完成——这没什么帮助，因为我无法更改参数，而且似乎只在初始创建期间调用？

现在我正在考虑让它调用各种其他方法，传递 Graphics 对象，并取决于其他变量 - 我将决定这是否是我什至想要调用的（因为 paint() 方法是我唯一可以调用的方法）。

我会完全错了吗？以前从来没有在意过这个。

为了让您更好地了解我想要最终得到什么：我希望能够传递我想为节点添加的形状的坐标，然后将其添加到到目前为止我在图表上拥有的任何内容中。然后与边缘相同，我希望能够通过线的起点和终点以在当时存在的任何内容之上重新绘制。

不完全是我现在想要的 - 但你会从我到目前为止拼凑的东西中得到这个想法：

```
import java.awt.*;
import javax.swing.*;
public class MyCanvas extends Canvas
{
    public MyCanvas()
    {
    }
    public void paint(Graphics graphics)
    {
        // Keep this until I figured out if it's painted on load or not.
        graphics.drawLine(10, 20, 350, 380);
    }
    public static void main(String[] args)
    {
        MyCanvas canvas = new MyCanvas();
        JFrame frame = new JFrame();
        int vertexes = 0;
        // Change this next part later to be dynamic.
        vertexes = 10;
        int canvasSize = vertexes * vertexes;
        frame.setSize(canvasSize, canvasSize);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(canvas);
        frame.setVisible(true);
    }
    public void drawNode(int x, int y, Graphics g)
    {
            // Treat each location as a 10x10 block. If position 1,1 then go to (5,5) - If position 3,5 then go to (25, 45) eg: (x*10)-5, (y*10)-5 
            int xLoc = (x*10) - 5;
            int yLoc = (y*10) - 5;
            g.setColor(Color.white);
            g.fillOval(xLoc, yLoc, 8, 8);
            g.drawOval(xLoc, yLoc, 8, 8);
    }
    public void drawArc(int x, int y, int xx, int yy, Graphics g)
    {
            int xLoc = (x*10) - 5;
            int yLoc = (y*10) - 5;
            int xxLoc = (xx*10) - 5;
            int yyLoc = (yy*10) - 5;
            g.drawLine(xLoc, yLoc, xxLoc, yyLoc);
    }

} 
```

编辑：（对安德鲁的回应）

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
public class MyCanvas extends JPanel
{

    public MyCanvas() {

    }
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
    }

    public static void main(String[] args)
    { 
        int vertexes = 0;
        // Change this next part later to be dynamic.
        vertexes = 10;
        int canvasSize = vertexes * vertexes;

        JFrame frame = new JFrame();
        JLabel label = new JLabel();
        BufferedImage bImage = new BufferedImage(canvasSize, canvasSize, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = bImage.createGraphics();
        g2d.drawLine(50, 50, 300, 300);
        ImageIcon iIcon = new ImageIcon(bImage); 
        label.setIcon(iIcon);
        frame.add(label);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        g2d = drawNode(1,1,g2d);
        label.repaint();
    }

    public static Graphics2D drawNode(int x, int y,Graphics2D g2d)
    {
            // Treat each location as a 10x10 block. If position 1,1 then go to (5,5) - If position 3,5 then go to (25, 45) eg: (x*10)-5, (y*10)-5 
            int xLoc = (x*10) - 5;
            int yLoc = (y*10) - 5;
            g2d.setColor(Color.white);
            g2d.fillOval(xLoc, yLoc, 8, 8);
            g2d.drawOval(xLoc, yLoc, 8, 8);
            return g2d;
    }
    public static void drawArc(int x, int y, int xx, int yy)
    {
            int xLoc = (x*10) - 5;
            int yLoc = (y*10) - 5;
            int xxLoc = (xx*10) - 5;
            int yyLoc = (yy*10) - 5;
           // g.drawLine(xLoc, yLoc, xxLoc, yyLoc);
    }

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T00:42:54.833

您可以为此采取各种策略。

1.  如果对象一旦完成就永远不会从绘图中删除，请使用 a `BufferedImage`，将其放入 a ( `ImageIcon`in a) `JLabel`。到时候更新：
    1.  获取图像的图形实例并绘制新元素。
    2.  处理图形对象。
    3.  `repaint()`在标签上调用。
2.  保留绘制元素的列表。在paint方法中，将它们全部绘制。添加新元素时，调用`repaint()`渲染组件。

* * *

这是第一种技术的示例：

![我的画布](../Images/4e29ac467fd97fd662ee99ecb260ee9b.png)

```
import java.awt.image.BufferedImage;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.Random;

public class MyCanvas
{
    JLabel view;
    BufferedImage surface;
    Random random = new Random();

    public MyCanvas()
    {
        surface = new BufferedImage(600,400,BufferedImage.TYPE_INT_RGB);
        view = new JLabel(new ImageIcon(surface));
        Graphics g = surface.getGraphics();
        g.setColor(Color.ORANGE);
        g.fillRect(0,0,600,400);
        g.setColor(Color.BLACK);
        // Keep this until I figured out if it's painted on load or not.
        g.drawLine(10, 20, 350, 380);
        g.dispose();

        ActionListener listener = new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                addNewElement();
            }
        };
        Timer timer = new Timer(200, listener);
        timer.start();
    }

    public void addNewElement() {
        boolean drawArc = random.nextBoolean();
        int x = random.nextInt(60);
        int y = random.nextInt(40);
        Graphics g = surface.getGraphics();
        if (drawArc) {
            g.setColor(Color.BLUE);
            int xx = random.nextInt(60);
            int yy = random.nextInt(40);
            drawArc(x,y,xx,yy,g);
        } else {
            drawNode(x,y,g);
        }
        g.dispose();
        view.repaint();
    }

    public static void main(String[] args)
    {
        MyCanvas canvas = new MyCanvas();
        JFrame frame = new JFrame();
        int vertexes = 0;
        // Change this next part later to be dynamic.
        vertexes = 10;
        int canvasSize = vertexes * vertexes;
        frame.setSize(canvasSize, canvasSize);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(canvas.view);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public void drawNode(int x, int y, Graphics g)
    {
            // Treat each location as a 10x10 block. If position 1,1 then go to (5,5) - If position 3,5 then go to (25, 45) eg: (x*10)-5, (y*10)-5
            int xLoc = (x*10) - 5;
            int yLoc = (y*10) - 5;
            g.setColor(Color.white);
            g.fillOval(xLoc, yLoc, 8, 8);
            g.drawOval(xLoc, yLoc, 8, 8);
    }

    public void drawArc(int x, int y, int xx, int yy, Graphics g)
    {
            int xLoc = (x*10) - 5;
            int yLoc = (y*10) - 5;
            int xxLoc = (xx*10) - 5;
            int yyLoc = (yy*10) - 5;
            g.drawLine(xLoc, yLoc, xxLoc, yyLoc);
    }
} 
```

## 进一步提示

您可能会注意到这些线条看起来很“锯齿状”且很难看。the`BufferedImage`或 a`JComponent`都可以访问更有用的`Graphics2D`对象（因为`JComponent`有必要将其转换为`paintComponent()`）。`Graphics2D`实例接受可用于平滑（抖动）绘制的元素的渲染提示。

# javascript - Javascript setTimeout 没有在 clearInterval() 上停止

> ID：10628504
> 
> 赞同：5
> 
> 时间：2012-05-17T00:32:14.793
> 
> 标签：javascript, settimeout, clearinterval

当 clearInterval() 不停止计时器时，如何停止计时器？

这段代码的目的是使一个数字从 0 向上直到它结束（例如，从 0...75% 开始动画）。但是当我调用 clearInterval() 时计时器不会停止：

[http://jsfiddle.net/pwYEe/2/](http://jsfiddle.net/pwYEe/2/)

```
<div id="foo"></div>
<div id="bar"></div>

animate("99%", $("#foo")); // doesnt stop
animate("75%", $("#bar")); // doesnt stop

function loop(clr, clr2, ele, rand, last, delay) {
    clearInterval(clr);
    clearInterval(clr2);
    inloop(clr, clr2, ele, rand, last, delay);

    if (rand >= last) {
        clearInterval(clr);
        clearInterval(clr2);
    }
    else {
        clr2 = setTimeout(function () {
            loop(clr, clr2, ele, rand, last, delay);
        }, 2500);
    }

}
function inloop(clr, clr2, ele, rand, last, delay) {
    ele.html((rand += 1) + "%");

    if (rand >= last) {
        clearInterval(clr);
        clearInterval(clr2);
    }
    else {
        clr = setTimeout(function () {
            inloop(clr, clr2, ele, rand, last, delay);
        }, delay);
    }
}

function animate(end, display) {
    var clr = null;
    var clr2 = null;
    var ele = null;
    var rand = 0;  // initial number
    var last = 99; // last number
    var delay = 5; // inner loop delay

    ele = display;
    ele.html("0%");

    var idx = end.indexOf("%");
    if (idx >=0) {
        end = end.substring(0,idx);
    }
    last = parseInt(end);
    loop(clr, clr2, ele, rand, last, delay);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T00:33:19.840

你使用[`clearTimeout()`](https://developer.mozilla.org/en/DOM/window.clearTimeout)with `setTimeout()`。

你不使用`clearInterval()`with `setTimeout()`。 `clearInterval()`与`setInterval()`.

您的代码中也存在结构性问题。您将 clr 和 clr2 作为参数传递，并期望它们的原始值被修改，而事实并非如此。

您可以通过将它们都放在一个对象中并像这样传递对象来解决这个问题：

```
animate("99%", $("#foo"));
//animate("75%", $("#bar"));

function loop(timers, ele, rand, last, delay) {
    clearTimeout(timers.clr);
    clearTimeout(timers.clr2);
    inloop(timers, ele, rand, last, delay);

    if (rand >= last) {
        clearTimeout(timers.clr);
        clearTimeout(timers.clr2);
    }
    else {
        timers.clr2 = setTimeout(function () {
            loop(timers, ele, rand, last, delay);
        }, 2500);
    }

}
function inloop(timers, ele, rand, last, delay) {
    ele.html((rand += 1) + "%");

    if (rand >= last) {
        clearTimeout(timers.clr);
        clearTimeout(timers.clr2);
    }
    else {
        timers.clr = setTimeout(function () {
            inloop(timers, ele, rand, last, delay);
        }, delay);
    }
}

function animate(end, display) {
    var timers = {clr: null, clr2: null};
    var ele = null;
    var rand = 0;  // initial number
    var last = 99; // last number
    var delay = 5; // inner loop delay

    ele = display;
    ele.html("0%");

    var idx = end.indexOf("%");
    if (idx >=0) {
        end = end.substring(0,idx);
    }
    last = parseInt(end);
    loop(timers, ele, rand, last, delay);
}
​ 
```

工作jsFiddle：http: [//jsfiddle.net/jfriend00/PEqeY/](http://jsfiddle.net/jfriend00/PEqeY/)

# android - Android：活动之间的 OnDestroy 之前的 onCreate

> ID：10628505
> 
> 赞同：1
> 
> 时间：2012-05-17T00:32:16.723
> 
> 标签：android

我有 2 个活动，活动 1 的结束调用活动 2 的开始。在 Activty1 的 onDestroy() 中，我做了一些对 Activity2 很重要的事情。在 onDestroy 之前调用 Activity2 的 onCreate() 并不好。我能做什么？

谢谢娜塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:41:53.103

做你需要做的，`onPause()`而不是`onDestroy()`. 您无法控制何时`onDestroy()`会发生，这完全取决于系统。即使你打电话`finish()`，你`Activity`也可能会一直待着，直到系统需要资源。

# jquery - 通过 Pinterest API 的拖放功能捕获 Rails 图像

> ID：10628508
> 
> 赞同：0
> 
> 时间：2012-05-17T00:33:43.990
> 
> 标签：jquery, ruby-on-rails, api, drag-and-drop, pinterest

在我的应用程序中，用户可以拖放不同的图像文件来创建拼贴画。但是，我想让用户能够将整个完成的拼贴画到 Pinterest 上。目前，“Pin It”API 似乎只能识别单个图像（有时甚至无法识别）。解决这个问题的最佳方法是什么？

是否有任何人会推荐我可以用来创建指向用户拼贴画的单独链接的屏幕截图 gem，然后用户可以将其固定？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:01:02.420

好吧，我最终将 IMGkit 与 wkhtmltoimage [https://github.com/csquared/IMGKit](https://github.com/csquared/IMGKit)一起使用。

在我的控制器中，我使用了如下所示的东西：

```
kit = IMGKit.new("myurl") 
IMGKit.new('<meta name="imgkit-height" content="990"><meta name="imgkit-width" content="635">')
send_data(kit.to_png, :type => "html", :disposition => 'inline' ) 
```

由于 gem 使用了 send_data，我使用如下代码捕获了图像：

```
image_tag(url_for(:action => :garden_image), :size => 3) 
```

然后是 image_tag 的一些 CSS：

```
<div id ="image_element" style="display:none;"> 
```

或者，如果您不喜欢在 CSS 中使用 display:none，我考虑使用标有“Pinterest Friendly View”的弹出按钮来完成同样的事情。您还可以使用元标记裁剪 IMGKit 捕获的图像，但我很难做到这一点。您可以联系 gem 的作者寻求帮助。

# c# - 自动提交表单后搜索浏览器内容

> ID：10628509
> 
> 赞同：1
> 
> 时间：2012-05-17T00:33:46.147
> 
> 标签：c#, c, watin

我使用 WatiN 在我的网站上自动提交表单。我遇到的问题是我找不到任何关于如何在提交后搜索页面并验证字符串是否存在的文档。我需要它在结果页面中查找一个字符串，如果它存在，则继续在列表中插入下一个变量，如果它不存在，我需要它记录插入的导致文本不显示的字符串，最好在文本文件中。到目前为止，这是我的代码。

```
browser.GoTo("https://site.com");
        // locate the form by name and fill it
        browser.TextField(Find.ByName("form")).TypeText("example");
        // click the submit button
        browser.Button(Find.ByName("submit")).Click(); 
```

不幸的是，这就是我所得到的。感谢您的帮助，我只需要朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:38:14.690

用于`browser.ContainsText("text to find")`验证字符串是否存在。

```
string[] textToAddList = File.ReadAllLines(@"C:\Users\Syd\Desktop\list.txt");

browser.GoTo("https://site.com");

foreach (string textToAdd in textToAddList)
{
    browser.TextField(Find.ByName("form")).TypeText(textToAdd);
    browser.Button(Find.ByName("submit")).Click();
    browser.WaitUntilComplete();
    if (!browser.ContainsText("text to find"))
    {
        //Log here
        break;
    }
} 
```

# google-chrome - 无法在 chrome 扩展中使用列入白名单的 https 源

> ID：10628513
> 
> 赞同：1
> 
> 时间：2012-05-17T00:34:52.803
> 
> 标签：google-chrome, https, google-chrome-extension

为什么我不能使用 https 白名单的 google JSAPI 在弹出窗口中创建自定义搜索引擎？

我收到内容政策违规。

我的清单如下所示：

```
 "content_security_policy": "default-src * 'unsafe-inline'; script-src 'self' https://ssl.google-analytics.com/ga.js https://www.google.co.uk/jsapi; object-src 'self'", 
```

# heroku - 将基于 Play 2.1-SNAPSHOT 的应用程序部署到 Heroku

> ID：10628520
> 
> 赞同：6
> 
> 时间：2012-05-17T00:36:09.420
> 
> 标签：heroku, playframework

我有一个基于 Play 2.1-SNAPSHOT 的应用程序在本地运行良好，但是当我尝试部署到 Heroku 时出现以下错误：

> ```
>  [warn]   ::::::::::::::::::::::::::::::::::::::::::::::
>    [warn]   ::          UNRESOLVED DEPENDENCIES         ::
>    [warn]   ::::::::::::::::::::::::::::::::::::::::::::::
>    [warn]   :: play#sbt-plugin;2.1-SNAPSHOT: not found
>    [warn]   ::::::::::::::::::::::::::::::::::::::::::::::
>    [warn]
>    [warn]   Note: Some unresolved dependencies have extra attributes.  Check  that these dependencies exist with the requested 
> ```
> 
> 属性。

我的 plugins.sbt 文件指向包含 2.1-SNAPSHOT 依赖项的本地存储库：

```
resolvers ++= Seq( 
  "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/",
  Resolver.file("My Repository", file( "repository/local") )
)

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.1-SNAPSHOT") 
```

目录“repository/local”被检入到我的 GIT 存储库中。Heroku 上的 SBT 看起来确实在本地存储库中查找，因为在“未解决的依赖关系”错误之前，我看到以下警告：

> ```
>  [warn] ==== Typesafe repository: tried
>    [warn]   http://repo.typesafe.com/typesafe/releases/play/sbt-plugin_2.9.1_0.11.2/2.1-SNAPSHOT/sbt-plugin-2.1-SNAPSHOT.pom
>    [warn] ==== My Repository: tried
>    [warn] ==== heroku-sbt-typesafe: tried
>    [warn] ==== heroku-central: tried 
> ```

在本地运行命令“play stage”成功完成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T04:52:14.213

如果您不想使用本地文件存储库，另一种方法是将 Typesafe [ivy-snapshots存储库添加为插件解析器。](http://repo.typesafe.com/typesafe/ivy-snapshots/)

在*project/plugins.sbt*中：

```
resolvers += Resolver.url("Typesafe Ivy Snapshots", url("http://repo.typesafe.com/typesafe/ivy-snapshots/"))(Resolver.ivyStylePatterns) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T13:03:52.990

发现问题。我需要通过在文件解析器之后添加“Resolver.ivyStylePatterns”来将“My Repository”声明为 Ivy 存储库，如下所示：

```
Resolver.file("My Repository", file( "repository/local/") )(Resolver.ivyStylePatterns) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T02:46:16.853

`http://repo.typesafe.com/typesafe/ivy-snapshots/`似乎不再活动，以下配置对我有用：

在你的 plugins.sbt 中：

```
//play sbt-plugin snapshot

resolvers += Resolver.url("Typesafe Simple Snapshots", url("https://repo.typesafe.com/typesafe/simple/snapshots/"))(Resolver.ivyStylePatterns)

//play snapshot 

resolvers +=  "Sonatype snapshots" at "https://oss.sonatype.org/content/repositories/snapshots/"

// The Play plugin 

addSbtPlugin("com.typesafe.play" %% "sbt-plugin" % "2.4-SNAPSHOT") 
```

在你的 build.sbt

```
//play snapshot 

resolvers +=  "Sonatype snapshots" at "https://oss.sonatype.org/content/repositories/snapshots/" 
```

# php - php mysql 下载链接

> ID：10628523
> 
> 赞同：-2
> 
> 时间：2012-05-17T00:36:45.087
> 
> 标签：php, mysql, hyperlink, download

在此页面上，用户从下拉列表中选择一些选项并收到可供下载的文件列表。下载每条记录旁边的超链接。当前，下载超链接下载的文件具有正确的文件名，因为它存在于数据库中，但文件内容不正确。更具体地说，似乎没有正确发送标头：文件的内容是来自 newpub_profile.php 的 html 标记

这是最新的代码：

newpub_profile.php

```
 $q = "SELECT upload_id, title, genre, length, created
        FROM upload
        WHERE genre = '$genre' AND length = '$length'
        ORDER BY created DESC, title DESC";

    $r = mysqli_query ($dbc, $q); // Run the query

    if($r)
    {
        // If it ran okay, display the records
        echo '<table align="center"
            cellspacing="3" cellpadding="3"
            width="75%">
           <tr><td align="left"><b>Title</b></td>
           <td align="left"><b>Genre</b></td>
           <td align="left"><b>Pages</b></td>
           <td align="left"><b>Submitted</b></td>
           <td align="left"><b>Download</b></td>';

        // Fetch and print all the records:

        while ($row = mysqli_fetch_array($r,MYSQLI_ASSOC))
        {
            echo '<tr><td align="left">' .
            $row['title'] . '</td><td align="left">'
            . $row['genre'] . '</td><td align="left">'
            . $row['length'] . '</td><td align="left">'
            . $row['created'] . '</td><td align="left">'
            //. $row['views'] . '</td><td align="left">'
            . "<a href='newpub_profile.php?id={$row['upload_id']}'>Download</a></td>" . '</td></tr>';
        }
        echo '</table>'; // Close the table

        mysqli_free_result ($r); // Free up the resources
    }
    else // If it did not run okay
    {
        // Public Message:

        echo '<p class="error">Your submissions could not be retrieved.  We
            apologize for any inconvenience.</p>';

        // Debugging message:

        echo '<p>' . mysqli_error($dbc) . '<br /><br />Query: ' . $q . '</p>';

    } // End of if ($r) IF.

}

//END DOWNLOAD HANDLER ******************************************************

    mysqli_close($dbc); // Close the database connection

?>
                    <?php

                    // Make sure an ID was passed DOWNLOAD HANDLER *******
if(isset($_GET['id'])) {
// Get the ID
    $id = intval($_GET['id']); var_dump($id);

    require_once ('../mysqli_connect.php'); //Connect to the db

        // Fetch the file information
        $downloadq = "
            SELECT `file_type`, `size`, `title`, 'content', 'upload_id'
            FROM `upload`
            WHERE `upload_id` =".$id;
        $result = mysqli_query ($dbc, $downloadq); // Run the query

        if($result) {
            // Make sure the result is valid
            if (mysqli_num_rows($result) > 0) {
            // Get the row
                $row = mysqli_fetch_assoc($result);
                //var_dump($row);

                // Print headers
                header("Content-Type: ". $row['type']);
                header("Content-Length: ". $row['size']);
               header("Content-Disposition: attachment; filename=". $row['title']);

                // Print data
                echo stripslashes($row['content']);
            }
            else {
                echo 'Error! No such ID.';
            }

            // Free the mysqli resources
            mysqli_free_result($result);
        }
        else {
            echo "Error! Query failed: <pre>{$dbc->error}</pre>";
        }
        mysqli_close($dbc);
    }

                    ?> 
```

newupload_sql.php

```
 if(isset($_POST['upload']) && $_FILES['userfile']['size'] > 0) //check membership level here*******************************************
{
  //------------------------------------------------------------------------------------------------
    //$membercheck = "SELECT membership, uploaded
                   // FROM user
                   // WHERE user_id =". $_SESSION['user_id'];  //gets membership level and upload count

   //-----------------------------------------------------------------------------------------------

    if($_FILES['userfile']['size'] > 2621440)
        die("File larger than 2.5MB");

       $mimeTypes = array('application/vnd.openxmlformats-officedocument.wordprocessingml.document',
'application/msword');

    if (in_array($_FILES['userfile']['type'], $mimeTypes))
      {
$fileName = $_FILES['userfile']['name'];
$tmpName  = $_FILES['userfile']['tmp_name'];
$fileSize = $_FILES['userfile']['size'];
$fileType = $_FILES['userfile']['type'];
$oid = $_SESSION['user_id'];
$views = 0;

$fp      = fopen($fileName, 'r');
$content = fread($fp, filesize($fileName));
$content = addslashes($content);
fclose($fp);

//if(!get_magic_quotes_gpc())
//{
  //  $fileName = addslashes($fileName);
//}

$query = "INSERT INTO upload (title, file_type, size, content, length, genre, created, views, description, owner_id) ".
"VALUES ('$fileName', '$fileType','$fileSize', '$content', '$length', '$genre', NOW(), '$views', '$description', '$oid')";
$r = @mysqli_query ($dbc, $query); //Run the query. or die('Error, query failed');

if($r)
{

        require_once ('login_functions.php');
        $url = absolute_url ('newupload_thanks.php');
        header("Location: $url");
        exit();
}

            else //if it didnt run ok...
            {
                //Public message:
                echo '<h1>System Error</h1>
                <p class="error">You could not upload due to a system
                error.  We apologize.</p>';

                //debugging message:

                echo'<p>' . mysqli_error($dbc) . '<br /><br />Query: ' . $r .
                '</p>';

            } // End of ($r) IF. // File's OK
    }

}
  else
    {
        die("Wrong tile type: Use .doc, .docx or ONLY");

    }

}mysqli_close($dbc); //Close the database connection.
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:57:13.870

您确定它正在下载页面本身吗？从外观上看，您的问题是您没有正确构建标题。您的 SQL 查询和 var_dump 表明您正在获取 a`title`但您`name`用于下载报价的文件名（实际上使代码发送带有空文件名的标头。

我建议您验证您的代码是否使用实际的列名。IE：

```
header("Content-Disposition: attachment; filename=". $row['title']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:00:46.810

没有 row['name'] 你的意思是 row['title']

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T01:51:45.160

你有这些

```
$fileName = $_FILES['userfile']['name'];
$tmpName  = $_FILES['userfile']['tmp_name']; 
```

您必须将 $tmpName 重命名/移动到 $filename

**已编辑**

检查这个 [move_uploaded_file()](http://gr2.php.net/manual/en/function.move-uploaded-file.php)

或在以下块中将 $fileName 更改为 $tmpName

```
$fp      = fopen($fileName, 'r');
$content = fread($fp, filesize($fileName));
$content = addslashes($content);
fclose($fp); 
```

# c - 检索数组元素时，如何使用变量作为元素编号

> ID：10628537
> 
> 赞同：1
> 
> 时间：2012-05-17T00:39:25.767
> 
> 标签：c

我正在编写一些代码来解析日志数据，这部分特别是用于将月份的十进制形式转换为人类形式（所以 1 将是 jan ），为了实现这一点，我试图使用一个组合for 循环和一个 if 语句，并认为我可以简单地使用一个变量作为语句的数字来检索数组单元格，但它没有按预期工作，所以如果有人可以就我该怎么做提供建议我真的很感激，谢谢！（这是代码的主要部分）

```
for ( x = 0; x < 11; x++ ) {
    int altint = 1 + x;
    if ( dmon == altint ) {
            printf( "%s\n", field_month[x] );
            {break;}
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:43:58.917

只是`printf("%s",field_month[dmon])`或者`field_month[dmon-1]`因为它取决于你的月份名称数组？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T00:44:36.810

我建议您*不要*使用`for`循环，而是直接查找所需的元素：

```
printf("%s\n", field_month[dmon]); 
```

如果您`dmon`是 1-indexed （`1`对于*January*，..，`12`对于*December*），那么稍微改变一下：

```
printf("%s\n", field_month[dmon-1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T00:50:19.067

您的 for 循环可以优化为：

```
if (dmon >= 1 && dmon <= 12)
{
    printf("%s\n", field_month[dmon]);
} 
```

因为它真正做的唯一一件事就是防止用于访问数组的无效索引......

# opengl - 简单的 GLSL 聚光灯着色器

> ID：10628538
> 
> 赞同：4
> 
> 时间：2012-05-17T00:39:31.867
> 
> 标签：opengl, graphics, glsl, shader

我需要一个简单的聚光灯着色器的帮助。圆锥内的所有顶点都应涂成黄色，圆锥外的所有顶点都应涂成黑色。我只是无法让它工作。我认为它与从世界到眼睛坐标的转换有关。

顶点着色器：

```
uniform vec4  lightPositionOC;   // in object coordinates
uniform vec3  spotDirectionOC;   // in object coordinates
uniform float spotCutoff;        // in degrees

void main(void)
{
   vec3 lightPosition;
   vec3 spotDirection;
   vec3 lightDirection;
   float angle;

    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;

    // Transforms light position and direction into eye coordinates
    lightPosition  = (lightPositionOC * gl_ModelViewMatrix).xyz;
    spotDirection  = normalize(spotDirectionOC * gl_NormalMatrix);

    // Calculates the light vector (vector from light position to vertex)
    vec4 vertex = gl_ModelViewMatrix * gl_Vertex;
    lightDirection = normalize(vertex.xyz - lightPosition.xyz);

    // Calculates the angle between the spot light direction vector and the light vector
    angle = dot( normalize(spotDirection),
                -normalize(lightDirection));
    angle = max(angle,0);   

   // Test whether vertex is located in the cone
   if(angle > radians(spotCutoff))
       gl_FrontColor = vec4(1,1,0,1); // lit (yellow)
   else
       gl_FrontColor = vec4(0,0,0,1); // unlit(black)   
} 
```

片段着色器：

```
void main(void)
{
   gl_FragColor = gl_Color;
} 
```

**编辑：**
**蒂姆是对的。这**

```
if(angle > radians(spotCutoff)) 
```

**应该：**

```
if(acos(angle) < radians(spotCutoff)) 
```

**新问题：**
**灯光似乎没有停留在场景中的固定位置，而是随着我向前或向后移动时锥体变小或变大而相对于我的相机移动。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T03:24:07.347

*（设 spotDirection 为向量 A，lightDirection 为向量 B）*

您正在分配；

`angle = dot(A,B)`

公式不应该是：

`cos(angle) = dot(A,B)`

或者

`angle = arccos(dot(A,B))`

[http://en.wikipedia.org/wiki/Dot_product#Geometric_interpretation](http://en.wikipedia.org/wiki/Dot_product#Geometric_interpretation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:38:03.320

在我的旧着色器中，我使用了该代码：

```
float spotEffect = dot(normalize(gl_LightSource[0].spotDirection.xyz), 
                       normalize(-light));
if (spotEffect < gl_LightSource[0].spotCosCutoff) 
{
    spotEffect = smoothstep(gl_LightSource[0].spotCosCutoff-0.002,     
                            gl_LightSource[0].spotCosCutoff, spotEffect);
}
else spotEffect = 1.0; 
```

与其将角度发送到着色器，不如发送这些角度的 Cos

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-19T06:25:21.523

要回答您的新问题，这里有一个类似问题的链接：[GLSL point light shader moving with camera](https://stackoverflow.com/questions/25594783/glsl-point-light-shader-moving-with-camera)。解决办法是去掉gl_NormalMatrix和gl_ModelViewMatrix。

```
spotDirection  = normalize(spotDirectionOC * gl_NormalMatrix); 
```

会成为：

```
spotDirection  = normalize(spotDirectionOC); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-11T17:53:14.607

[https://code.google.com/p/jpcsp/source/browse/trunk/src/jpcsp/graphics/shader.vert?r=1639](https://code.google.com/p/jpcsp/source/browse/trunk/src/jpcsp/graphics/shader.vert?r=1639)

```
if (spotEffect >= cos(radians(uLightOuterCone[index]))) 
```

和

```
//vec3 NSpotDir  = (uViewMatrix * vec4(uLightDirection[index],0)).xyz; //must do outside or become flashlight follow
    vec3 NSpotDir = normalize(uLightDirection[index]); 
```

# r - 在 R 轴标签中使用上标

> ID：10628547
> 
> 赞同：52
> 
> 时间：2012-05-17T00:41:50.403
> 
> 标签：r

使用 R 中的基本图形，如何在轴标签上添加上标，就像在地图上绘制纬度和经度轴时可能想要的那样。

考虑这个例子：

```
plot(-100:-50, 50:100, type="n", xlab="", ylab="", axes=FALSE)
axis(1, seq(-100, -50, 10), labels=paste(abs(seq(-100, -50, 10)), "o", "W", sep=""))
axis(2, seq(50, 100, 10), labels=paste(seq(50,100,10), "o", "N", sep=""))
box() 
```

在地图周围产生一个漂亮的框架。将度数符号设为上标会更好。

这通常可以在其他绘图功能中完成，例如`mtext()`和`text()`使用`expression(paste(...))`，或者`substitute()`在这种情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-17T00:59:06.983

它对轴的工作方式相同：`parse(text='70^o*N')`将提高`o`作为上标（这`*N`是为了确保 N 也不会被提高）。

```
labelsX=parse(text=paste(abs(seq(-100, -50, 10)), "^o ", "*W", sep=""))
labelsY=parse(text=paste(seq(50,100,10), "^o ", "*N", sep=""))
plot(-100:-50, 50:100, type="n", xlab="", ylab="", axes=FALSE)
axis(1, seq(-100, -50, 10), labels=labelsX)
axis(2, seq(50, 100, 10), labels=labelsY)
box() 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-17T01:04:20.603

这是一个简单的例子

```
plot(rnorm(30), xlab = expression(paste("4"^"th"))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-25T12:45:17.787

@The Thunder Chimp You can split text in such a way that some sections are affected by super(or sub) script and others aren't through the use of *. For your example, with splitting the word "moment" from "4th" -

```
plot(rnorm(30), xlab = expression('4'^th*'moment')) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-16T05:33:04.230

在这种特殊情况下，另一个选项是输入度数符号：˚

R似乎处理得很好。在 Mac 上键入 Option-k 以获取它。不确定其他平台。

# mysql - 在一个表中拥有三个主键（其中两个是外键）有意义吗？

> ID：10628552
> 
> 赞同：0
> 
> 时间：2012-05-17T00:42:40.933
> 
> 标签：mysql, sql, database-design, data-modeling

我创建了一个包含三个表的数据库：

```
Restaurant
restaurant_id (autoincrement, PK)

Owner
owner_id (autoincrement, PK)
restaurant_id (FK to Restaurant)

Deal
deal_id (autoincrement)
owner_id (FK to Owner)
restaurant_id (FK to Restaurant)
(PK: deal_id, owner_id, restaurant_id) 
```

每个餐厅可以有多个所有者。我为 Deal 选择了两个外键，因此我可以通过所有者或餐厅来引用该交易。交易表将有三个主键，两个是外键。它会有两个指向它的一对多关系。我所有的外键都是主键，我不知道我以后会不会后悔这样做。这种设计是否有意义，并且看起来对我想要实现的目标有好处？

> **编辑**：我真正需要在这里完成的是当所有者登录并查看他们的帐户时，我希望他们能够查看和编辑与该特定餐厅关联的所有交易。而且因为每个餐厅可以有多个所有者，所以我需要能够执行类似的查询：select *from Deals where restaurant_id = restaurant_id。换句话说，如果我是所有者并且我已登录，我需要能够进行查询：获取不仅与我（所有者）相关的所有交易，而且与与关联的所有所有者相关的所有交易这家餐厅。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T02:57:55.823

你在术语方面遇到了一些麻烦。

一张表只能有*一个*主键。无法创建具有两个不同主键的表。您可以创建具有两个不同*唯一*索引（很像主键）的表，但只能存在一个主键。

您要问的是您是否应该拥有*复合*主键或*复合*主键；使用多个列的主键。

您的设计还可以，但正如您所写的那样，您可能不需要列 deal_id。在我看来，restaurant_id 和 owner_id 一起足以唯一标识 Deal 中的一行。（如果由于资本重组或收购另一位所有者，一位所有者可以在一家餐厅拥有两种不同的所有权股份，则这可能不正确，但您在问题陈述中没有提到类似的事情）。

在这种情况下，deal_id 很大程度上浪费了存储空间。如果您有许多具有指向 Deal 的外键的表，或者如果您有要同时向用户显示多个餐厅*和*业主的Deals 的实例，则*可能*需要使用 deal_id 列.

 *如果其中一个论点促使您采用 deal_id 列，那么它应该是主键，并且只有它应该是主键。由于自动增量值本身是唯一的，因此包含其他两列不会添加任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:46:20.317

如果你有一个唯一的字段，这应该是 PK，那将是递增的字段。
在这种特定情况下，它根本没有给你任何东西来向这个键添加更多字段，它实际上在某种程度上影响了性能（不要问我有多少，你把它放在凳子上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T01:02:18.373

它没有错，它有效。但是，它不推荐。

自动增量主键在没有外键（或主键）的情况下工作

在某些数据库中，您不能将多个字段用作单个主键。

复合主键或组合主键在查询中更难处理。

复合主键查询示例：

```
SELECT
  D.*
FROM 
  Restaurant AS R,
  Owner AS O,
  Deal AS D
WHERE
  (1=1) AND
  (D.RestaurantKey = D.RestaurantKey) AND
  (D.OwnerKey = D.OwnerKey) 
```

相对

单主键查询示例：

```
SELECT
  D.*
FROM 
  Restaurant AS R,
  Owner AS O,
  Deal AS D
WHERE
  (D.OwnerKey = O.OwnerKey) 
```

有时，您必须将一条记录的外键值更改为另一条记录。例如，您的客户已经订购，交易记录已注册，他们决定从一张餐厅餐桌更改为另一张餐桌。因此，必须更新“所有者”和“交易”表中的数据。

```
+-----------+-------------+
|  OwnerKey | OwnerName   |
+-----------+-------------+
|      1    | Anne Smith  |
+-----------+-------------+
|      2    | John Connor |
+-----------+-------------+
|      3    | Mike Doe    |
+-----------+-------------+

+-----------+-------------+-------------+
|  OwnerKey |   DealKey   |     Food    |
+-----------+-------------+-------------+
|      1    |       1     | Hamburguer  |
+-----------+-------------+-------------+
|      2    |       2     |   Hot-Dog   |
+-----------+-------------+-------------+
|      3    |       3     | Hamburguer  |
+-----------+-------------+-------------+
|      1    |       3     |    Soda     |
+-----------+-------------+-------------+
|      2    |       1     | Apple Pie   |
+-----------+-------------+-------------+
|      3    |       3     |    Chips    |
+-----------+-------------+-------------+ 
```

如果使用复合主键，则必须为“Owner”创建新记录，为“Deals”创建新记录，复制其他字段，并删除以前的记录。

如果使用单键，只需要更改 Table 的外键，无需插入或删除新记录。

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T01:02:42.930

s name 我认为它的含义就像是用来识别餐​​厅餐桌是否被客户预订，并查看您是如何设计数据库的，即使没有将餐桌指定为，您也可以识别他们预订的餐桌交易表中的外键由于使用所有者表，您将能够确定他们已经保留了哪个表，因为您将它用作所有者表上的外键，您真的必须明智地定义表之间的关系和尽可能避免冗余。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T01:16:14.457

我认为这不是最好的。

首先Deal表PK应该是deal_id。没有理由向它添加额外的列 - 如果您确实想在另一个表中引用 deal_id，则必须包括 restaurant_id 和 owner_id，这不好。deal_id 是否也应该是聚集索引（也就是在此列上组织的索引）取决于数据访问模式。您的数据库中是否充满了最常用于查找的 data_id 值，或者您主要通过 owner_id 或 restaurant_id 查找交易？

此外，使用您所描述的两个单独的 FK 方式（据我所知！）将允许交易具有无效的所有者和餐厅组合（组合不属于该餐厅的所有者）。在 Deal 表中，而不是一个 FK 到 Owner 和一个 FK 到 Restaurant，如果您必须同时拥有这两个列，则应该有一个复合 FK 到 (OwnerID, RestaurantID) 上的 Owner 表，并在 Owner 表中具有相应的唯一键允许此链接。

但是，对于这样一个简单的表结构，我并没有真正看到将 RestaurantID 排除在 Deal 表之外的问题，因为 OwnerID 总是完全暗示 RestaurantID。显然，您的交易不能仅与餐厅相关联，因为这将意味着 Deal:Owner 的 1:M 关系。通过 Owner 表基于 Restaurant 进行搜索的成本应该不会那么糟糕。*

# svg - 处理 SVG 渐变

> ID：10628554
> 
> 赞同：0
> 
> 时间：2012-05-17T00:43:08.517
> 
> 标签：svg, processing, gradient

我有一个 2 层（背面，正面）的 SVG。
我需要用颜色填充背面（颜色将是随机的）。
但是前面必须保持原样。
如何在不影响正面的情况下填充背面？

```
PShape elem;
PShape back;
PShape front;

void setup()
{
  size(900,600);
  background(255);
  fill(100);
  elem = loadShape("resources/images/elem.svg");
  back = elem.getChild("back");
  front = elem.getChild("front");
  smooth();
  noLoop();
}

void draw(){  
  elem.disableStyle();
  fill(0, 51, 102);
  noStroke();
  shape(back, 50, 50, 250, 250);
  shape(front, 50, 50, 250, 250);
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:08:05.427

没有 svg 很难测试你的确切设置。不过，您应该能够使用[pushStyle()](http://processing.org/reference/pushStyle_.html)、popStyle() 对来隔离部分形状的绘图样式。

例如

```
PShape elem;
PShape back;
PShape front;

void setup()
{
  size(900,600);
  background(255);
  fill(100);
  elem = loadShape("resources/images/elem.svg");
  back = elem.getChild("back");
  front = elem.getChild("front");
  smooth();
  noLoop();
}

void draw(){  
  elem.disableStyle();
  pushStyle();
    fill(0, 51, 102);
    noStroke();
    shape(back, 50, 50, 250, 250);
  popStyle();
  pushStyle();
    shape(front, 50, 50, 250, 250);
  popStyle();
} 
```

缩进只是一个视觉提示，实际上并不需要。

# c++ - 我是否需要“新建”一个数组以便稍后进行 memset？在 C++ 中

> ID：10628557
> 
> 赞同：0
> 
> 时间：2012-05-17T00:43:33.083
> 
> 标签：c++, scope, new-operator

例如

我有炭`str[1024];`

我`memset(str,0,1024);`稍后会做

这个可以吗，？或者我需要这样做：

```
char* str = new char[1024]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T00:48:05.860

两者都分配空间，因此两者都可以与 memset 一起使用。两者的区别在于分配空间的位置。

```
char str[1024]; 
```

在堆栈上分配字符串，一旦超出范围就会消失。

```
char* str = new char[1024]; 
```

在堆上分配字符串并将永远存在，直到您 delete[] 它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:26:41.403

直接回答：没有。

更好的答案：不要在 C++ 中使用 memset。老实说，您可能也不应该在 C 中使用 memset，至少不应该用于它常用的所有用途。尤其是在 C++ 中，将所有字节设置为 0 并不总是“清空”变量的正确方法……甚至是数组。这在技术上也适用于 C，但 memset 背后有数十年的滥用......没有人会做出表现不同的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T02:32:12.440

正如@HostileFork 已经指出的那样，您可能想要`std::string`这里。如果您正在做的任何事情都不是特别像字符串，那么您可能想要`std::vector<char> str(1024);`。

无论哪种方式，您都可以肯定您不想要`new char[1024]`（C++ 早期时代的遗留物，如果存在其他设施，可能根本不会出现在该语言中）并且*可能*也不想要`char str[1024];`，尽管至少有*这*可能不是一个严重的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T01:02:01.917

`str`在字符数组中存储并设置它们`memset`不是惯用的 C++。

*（注意：我确实经常使用[惯用](http://en.wikipedia.org/wiki/Idiom)这个词。）*

说到我的破纪录，我恳请您阅读 Bjarne Stroustrup 的这篇短文：

[学习标准 C++ 作为一门新语言](http://www2.research.att.com/~bs/new_learning.pdf)

不要（太）害怕向 StackOverflow 资深人士展示您正在处理的问题的更多上下文，因为您可能会对他们建议的对代码的酷重新想象和改进感到惊讶......

为了使这更像是一个*答案*，您的声明可能应该是：

```
std::string str; 
```

您不必管理大小，您可以按值将其返回到调用范围（或不返回）。

# macos - 禁用简历

> ID：10628562
> 
> 赞同：0
> 
> 时间：2012-05-17T00:44:04.897
> 
> 标签：macos, cocoa

我正在使用 Cocoa，做一些教程。我的问题是如何阻止应用程序在退出后从停止的地方继续？比如，我如何重置窗口大小、位置等？

以及如何设置初始位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:43:55.883

如果您取消选中 IB 中的“可恢复”框，则窗口将始终以您在 IB 中设置的大小和位置开始。

# java - 不知道为什么这个简短的处理任务不起作用

> ID：10628563
> 
> 赞同：0
> 
> 时间：2012-05-17T00:44:21.387
> 
> 标签：java, processing

这是一个家庭作业。工作 19 5/16 是作业 [http://sites.stuycs.org/home/courses/ml2x/dyrland-weaver/work](http://sites.stuycs.org/home/courses/ml2x/dyrland-weaver/work)

我在程序处理中运行它，它不需要主要方法。

Blob 是给我们的。我们必须自己制作 BlobRunner。关于为什么我的代码没有做它应该做的任何建议将不胜感激。第一个文件 BlobRunner

```
int popSize = 4;
int wobble = 2;
int numSides = 4;
float rad = 100;
int radInt = (int) rad;
float a = sqrt(popSize);
int rootPop = (int) a;
Blob[][] blobs = new Blob[popSize/rootPop][rootPop];
/*=====================================
  The trickiest part of setup is to make 
  the screen an appropriate size for the
  grid of blobs. The grid should be just
  big enough to contain all of the blobs.
  ====================================*/
void setup() {
    size ((popSize/rootPop)*(2*(radInt+3)), rootPop*(2*(radInt+3)));
    populate();
}

/*=====================================
  The main purpose of draw is to go through 
  the array of blobs and display each.
  ====================================*/
void draw() {
    int createdSoFar = 0;
    for (int i = 0; i<rootPop; i++){
    for (int j = 0; j<popSize/rootPop; j++){
        if (createdSoFar < popSize){
        blobs[j][i].display();
        }
        createdSoFar++;
    }
    }
}

/*=====================================
  Populate the array of blobs.
  You can use any values for radius, number of sides
  and wobble factor that you'd like, but you must
  use x and y coordinates that ensure the blobs
  are drawn in a grid without overlaping each other.

  Your code should work for any reasonable value
  of population (i.e. something that would fit on a
  normal monitor).
  ====================================*/
void populate() {
    for (int i = 0; i < rootPop; i++){
    float y = 1;
    for (int j = 0; j < (popSize/rootPop); j++){
        float x = 1;
        blobs[j][i] = new Blob (x*(rad+3), y*(rad+3), numSides, radInt, wobble, wobble); 
        x=x+2;}
    y=y+2;}
} 
```

第二个文件块

```
/*=====================================
  A Blob object is a regular polygon variant that
  can have various features.
  Instance Variables:
  numSides: number of sides
  rad: distance from the center of the polygon
  to any vertext
  x: x coordinate of the center
  y: y coordinate of the center
  xFactor: "wobble" foctor in the x direction
  yFactor: "wobble" factor in the y direction
  ====================================*/

class Blob {

    int numSides;
    int rad;
    float x;
    float y;
    int xFactor;
    int yFactor;

    Blob(float cx, float cy, int sides, int r, int xf, int yf ) {

    x = cx;
    y = cy;
    numSides = sides;
    rad = r;
    xFactor = xf;
    yFactor = yf;
    }

    void display() {

    float nx;
    float ny;
    int rx, ry;

    float sy;

    strokeWeight(1);
    beginShape();
    for( float t = 0; t <= 1; t+=( 1.0/numSides ) ) {

        /*
          "wobble" effect is created by adding a random number to each
          x and y coordinate. The larger the x and y factors, the higher
          the possible wobble value could be
        */
        rx = (int)random(xFactor);
        ry = (int)random(yFactor);

        nx = rad * cos( 2 * PI * t ) + x + rx;
        ny = rad * sin( 2 * PI * t ) + y + ry;

        vertex(nx, ny);
    }      
    endShape();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T17:23:01.000

您的代码运行，因此它正在做您要求它做的事情，仅此而已。

我让我的猫检查一下，她就是，“这家伙在循环的每一次循环中都在重新初始化他的变量，他永远不会那样得到一个 blob 网格。告诉他先从 `float y = 1; float x = 1;`外面`populate()`移动两个循环的边界`for`并从那里开始调试。”

然后她翻到她身边，我拍了拍她。

# python - Python：matplotlib - 黑白散点图

> ID：10628566
> 
> 赞同：3
> 
> 时间：2012-05-17T00:44:36.610
> 
> 标签：python, matplotlib

我觉得我在这里遗漏了一些非常明显的东西，但是我无法在 pylab 中获得散点图以黑白打印。任何和所有的帮助将不胜感激。这是我的代码：

```
from pylab import *
from random import random
ioff()

r = range(10)
x = [3 + i + random() for i in r]
y = [50*i + random() for i in r]
x2 = [5 + i + random() for i in r]
y2 = [5*i + random() for i in r]

scatter(x,y, marker = 'o', hold = True, label = 'collected underwear',cmap=cm.Greys)
scatter(x2,y2, marker = 's', hold = True, label = 'Profit!',cmap=cm.Greys)
legend(loc='upper left')

show() 
```

谢谢，

亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T01:54:30.133

如果您只是想任意指定颜色，请执行

```
color="k" 
```

为黑色，做

```
color="0.x" 
```

对于灰度，`x`可以是任何数字，只要 0.x 介于 0 和 1 之间。

但是，如果您希望标记颜色由另一个数组确定`z`，请执行

```
scatter(x,y,c=z, cmap=cm.Greys) 
```

因此对于

```
from pylab import *
from random import random
r = range(10)
x = [3 + i + random() for i in r]
y = [50*i + random() for i in r]
x2 = [5 + i + random() for i in r]
y2 = [5*i + random() for i in r]
z2 = [i + random() for i in r]
scatter(x,y,   c="0.1", marker = 'o', hold = True, label = 'collected underwear')
scatter(x2,y2, c=z2,marker = 's',  hold = True, label = 'Profit!',cmap=cm.Greys)
legend(loc='upper left')
show() 
```

你将会有

![在此处输入图像描述](../Images/1e8b481ef5595127e990970ea340b9d6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T00:52:11.460

如果您只希望曲线为黑色，只需添加：

```
color='k' 
```

到每个散点线，它们将是黑色的。不需要cmap。

**编辑：**

如果你想要灰度，你总是可以使用 colortuples 代替：

```
color = (0.1,0.1,0.1,1) #(r,g,b,a) 
```

不知道能不能直接用cm:s。

# jquery - 错误：太多递归jquery drupal

> ID：10628568
> 
> 赞同：0
> 
> 时间：2012-05-17T00:44:40.557
> 
> 标签：jquery, jquery-ui, drupal

当我在自定义模块中使用时，我使用了 drupal 6.26 和 jquery_update jquery 1.7 min.js

```
 $drupal_add_css('sites/all/libraries/jqgrid/themes/redmond/jquery-ui-1.8.16.custom.css');
  drupal_add_js('sites/all/libraries/jqgrid/js/jquery.js');
  drupal_add_js('sites/all/libraries/jqgrid/js/i18n/grid.locale-fa.js');
  drupal_add_js('sites/all/libraries/jqgrid/js/jquery.jqGrid.min.js');
  drupal_add_js('sites/all/libraries/jqgrid/js/jquery-ui-custom.min.js'); 
```

显示此错误错误：递归过多源文件：sites/all/libraries/jqgrid/js/jquery-ui-custom.min.js?G 行：588

线路：588

```
$f.fn.extend({_addClass:f.fn.addClass,addClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{add:c},a,b,d]):this._addClass(c)},_removeClass:f.fn.removeClass,removeClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{remove:c},a,b,d]):this._removeClass(c)},_toggleClass:f.fn.toggleClass,toggleClass:function(c,a,b,d,e){return typeof a=="boolean"||a===j?b?f.effects.animateClass.apply(this,[a?{add:c}:{remove:c},b,d,e]):this._toggleClass(c,a):f.effects.animateClass.apply(this, 
```

另一个问题我使用了 jquery 更新模块。当我在我的模块中使用它时，drupal 在所有页面中添加了 jquery.js 它工作正常

```
$drupal_add_css('sites/all/libraries/jqgrid/themes/redmond/jquery-ui-1.8.16.custom.css');
  drupal_add_js('sites/all/libraries/jqgrid/js/jquery.js');
  drupal_add_js('sites/all/libraries/jqgrid/js/jquery.jqChart.min.js');
  drupal_add_js('sites/all/libraries/jqgrid/js/jquery-ui-custom.min.js'); 
```

但是当我删除

```
$drupal_add_js('sites/all/libraries/jqgrid/js/jquery.js'); 
```

我的模块不工作

请指导我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:22:52.383

使用[jQuery UI](http://drupal.org/project/jquery_ui)和[jQuery 更新](http://drupal.org/project/jquery_update)模块。
Drupal 6.x 中支持的最大 jQuery UI 版本是 1.7.3，因此您必须使用它来调整您的代码。
不要添加外部或其他 jquery.js，而是使用 jQuery Update 模块添加它。

# sql-server - 将单个参数从集合传递到 SQL 存储过程

> ID：10628569
> 
> 赞同：0
> 
> 时间：2012-05-17T00:44:47.713
> 
> 标签：sql-server, loops

我有一个用户定义的类型如下：

```
CREATE TYPE [Integer_udt] AS  TABLE (
    [Id] INT NOT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC)); 
```

然后我从查询中填充了它：

```
DECLARE @Ids [Integer_udt]
    INSERT INTO @Ids
        SELECT table1.Id 
        FROM table1 
```

接下来，我需要将各个参数传递给接受单个 Id 的存储过程：

```
EXEC prc_complicated_calculation @Id 
```

假设我无法更改 prc_complicated_calculation。最好的称呼是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T01:02:06.953

我的第一个答案是用于简单逻辑和代码行的动态 SQL。

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + N'EXEC prc_complicted_calculation ' 
    + RTRIM(Id) + ';'
    FROM @Ids;

EXEC sp_executesql @sql; 
```

您也可以使用循环来执行此操作，但我认为它的工作量更大（除非您对动态 SQL 过敏）。

```
DECLARE @i INT;
DECLARE c CURSOR LOCAL STATIC READ_ONLY FORWARD_ONLY
FOR SELECT Id FROM @Ids;

OPEN c;

FETCH NEXT FROM c INTO @i;

WHILE @@FETCH_STATUS = 0
BEGIN
    EXEC prc_complicated_calculation @i;

    FETCH NEXT FROM c INTO @i;
END

CLOSE c;
DEALLOCATE c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:07:28.513

为了使用自定义类型，使用它的存储过程需要将类型参数设置为 READONLY。

由于您无法更改存储过程，因此您最好的选择可能是遵循 Aaron 对此的回答。

# java - 如何在java中调整曝光？

> ID：10628571
> 
> 赞同：3
> 
> 时间：2012-05-17T00:44:58.743
> 
> 标签：java, image-processing

我想使用 Java 调整图像的曝光。我知道在 Java 2D 中有现有的函数可以完成这项工作。但我也想知道它在颜色级别上是如何工作的。我在网上做了一些研究，它说我们可以将 R、G、B 与某些参数相乘以实现过度曝光，这些参数是什么？曝光不足怎么办？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:55:31.390

您可能会发现此页面很有用，其中包含有关通用曝光函数的一些非常详细的信息：

*   [http://dlraw.sourceforge.net/ExposureFunction.html](http://dlraw.sourceforge.net/ExposureFunction.html)

然而，一般来说，曝光调整就是使用某种形式的平滑单调函数来移动颜色曲线，该函数将范围 0..1 映射到相同的 0..1 范围：

*   它需要是单调的（总是增加的），以便在转换后较亮的区域比较暗的区域保持更亮
*   它需要平滑，这样您就不会在颜色渐变中产生突然的跳跃/条带
*   它需要在 0..1 范围内起作用，因为这是您的（标准化）RGB 颜色值所在的位置！

这种函数的一个简单示例是：

```
new component value = (old component value) ^ k 
```

这里的参数值 k>1 会使图像变暗，k<1 会使图像变亮。您可以使用参数和公式，直到获得您喜欢的效果。

# git - 子模块是私有 Github 存储库时 git 子模块的问题

> ID：10628574
> 
> 赞同：13
> 
> 时间：2012-05-17T00:45:25.263
> 
> 标签：git, ssh, github, amazon-ec2, git-submodules

我在 Github 上有一个私人仓库，其中包含 3 个子模块，所有 3 个子模块也是私有的。

我在我的 EC2 服务器上生成了 4 个 SSH 密钥，并将它们作为 Github 部署密钥应用到所有 4 个私有存储库。

我能够克隆主存储库，因为它可以识别 SSH 密钥。当我运行“git submodule update”时，它在私有存储库上失败，并出现以下错误：

错误：未找到存储库。致命：远端意外挂断

如果我手动签出那些私有仓库，它可以工作，但在使用 git submodule 命令时不行。任何想法？这不是完全支持吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T06:17:28.773

github的认证有点奇怪。他们不使用用户名；他们只是根据您提供的公钥推断您是哪个用户。由于您生成了四个部署密钥，因此任何人都可以猜测您的服务器在连接到 github 时将使用哪个 - github 将接受其中任何一个，然后拒绝对未注册该密钥的存储库的任何访问。

因此，最简单的解决方案是对所有存储库仅使用一个部署密钥。

但是，如果你不能，你可以使用 ssh 主机别名来解决这个问题。添加到服务器的`~/.ssh/config`节中，如下所示：

```
Host repo-foo
  HostName  ssh.github.com
  Port 443
  User git
  IdentityFile /path/to/my-ssh-key-file-for-foo
  IdentitiesOnly yes

Host repo-bar
  HostName ssh.github.com
  Port 443
  User git
  IdentityFile /path/to/my-ssh-key-file-for-bar
  IdentitiesOnly yes 
```

然后将您的子模块指向`repo-bar:username/bar.git`而`repo-foo:username/foo.git`不是使用`git@github.com:...`表单。

这将有效地导致 git 和 ssh 将每个存储库视为位于不同的服务器上，并传入显式身份文件，因此不会混淆使用什么密钥。

# android - Android - 片段和多页表单

> ID：10628576
> 
> 赞同：0
> 
> 时间：2012-05-17T00:45:41.660
> 
> 标签：android

所以我有一个`FragmentActivity`包含 3 个选项卡的选项卡，一个选项卡本质上是一个多页（视图）表单，如下所示：

```
FragmentActivity    

tab 1 -> Fragment
tab 2(MultiPage) -> Fragment Page 1 (onClick for Next button) -> Fragment Page 2 -> Fragment Page n
tab 3 -> Fragment 
```

处理这个问题的最佳方法是什么？在填写表格并浏览页面时是否可以保留我当前的选项卡选择？这是一个不好的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:54:12.643

对于任何 UI 模式，最佳实践实现都是该模式的设计目的。这在许多从 Web 时代开始的示例中得到了证明，并构成了 HTML 语义的基础

如果您没有在同一行上实现您的解决方案，该模式的设计目的是，如果您的代码在自定义硬件或操作系统上运行，您的代码将来可能会中断。也可能有其他一些例子。

现在，您所说的是多页表单的向导，我认为设计一组活动是最好的，因为它也符合 Android 导航基础的后退按钮

欢迎提出想法:)

# facebook - 您可以通过 Facebook Graph API 访问附加到事件的问题吗？

> ID：10628577
> 
> 赞同：1
> 
> 时间：2012-05-17T00:46:13.883
> 
> 标签：facebook, api, facebook-graph-api

我有一个 Facebook 活动，并且在活动墙上有一个问题/投票。我似乎无法通过 Graph API 找到一种方法来访问与事件相关的问题。

如果我访问“我的”问题（通过[。https://graph.facebook.com/me/questions](https://graph.facebook.com/me/questions)），我可以看到问题，但没有字段显示它与哪个事件相关。访问事件 /feed 仅显示我的访问令牌可以访问的墙贴，但不显示问题。

基本上，Graph API 有什么方法可以获取事件的问题 - 无论是通过发布问题的用户还是通过事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:14:22.510

我不确定您是如何在活动墙上获取投票\问题的，但如果它在那里，您应该能够从 /{event_id}/feed 检索它。提要中的问题用“问题”类型标识，问题的创建者在 from->id 值中标识。

# ruby-on-rails - 禁止您无权访问 Bitnami Ruby Rails

> ID：10628581
> 
> 赞同：2
> 
> 时间：2012-05-17T00:46:26.467
> 
> 标签：ruby-on-rails, permissions, bitnami

[我的网站](http://rocksuper.bitnamiapp.com/)上有一个禁止页面（您无权访问 / 在此服务器上）。我已将所有者修改为root，但仍然无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:03:40.863

```
1.$ cd $YOUR_RAILS_FOLDER
2.$ chmod 775 -R . 
3.$ touch tmp/restart.txt  ( or other command to restart your rails app) 
```

您还需要确保您的 Rails 服务器有权读取所有父文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:02:42.760

您需要确保 Apache 用户在该目录中具有权限。对于 BitNami，此用户是守护程序。通常您还需要在该文件夹的 apache 配置文件中添加一个 Directory 指令。无论如何，请始终检查 apache 日志文件，它们可能会提供有关错误的更多详细信息。

# ios - 从 nib 中的视图制作 GLView

> ID：10628583
> 
> 赞同：3
> 
> 时间：2012-05-17T00:46:40.990
> 
> 标签：ios, ios5, opengl-es

我正在尝试将我的 nib 文件中的一个视图用作`GLView`.

在我的`iphoneDisplay.nib`文件中，我有一个视图设置为自定义类`GLView`（底部的代码），并在我的应用程序委托中设置了一个插座。我设置的视图更改为黑色背景色，并且 NSLogs 显示它是`GLView`从我的和我的两者中绘制的，`GLViewController`但我没有看到任何东西：/。有谁知道我做错了什么？

我的应用委托：

```
#import "HBAppDelegate.h"
#import "GLViewController.h"
#import "GLView.h"
#import "TestFlight.h"

@implementation HBAppDelegate
@synthesize window=_window;
@synthesize viewController=_controller;
@synthesize glViewFromNib;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[GLViewController alloc] initWithNibName:@"iPhoneDisplay" bundle:nil];
    self.window.rootViewController = self.viewController;
    glViewFromNib = [[GLView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    glViewFromNib.controller = self.window.rootViewController;
    glViewFromNib.animationInterval = 1.0 / kRenderingFrequency;
    [glViewFromNib startAnimation];
    [glViewFromNib setUserInteractionEnabled:false];            
    [self.window makeKeyAndVisible];

    return YES;

}

@end 
```

我的`GLView`（来自 Jeff LaMarche 的样板代码）：

```
//
//  GLView.m
//  Part6Project
//
//  Created by jeff on 5/31/09.
//  Copyright Jeff LaMarche 2009\. All rights reserved.
//

#import <QuartzCore/QuartzCore.h>
#import <OpenGLES/EAGLDrawable.h>
#import "GLView.h"
#import "GLViewController.h"

@interface GLView (private)

- (id)initGLES;
- (BOOL)createFramebuffer;
- (void)destroyFramebuffer;

@end

@implementation GLView

@synthesize animationInterval;
+ (Class) layerClass
{
    return [CAEAGLLayer class];
}
-(id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if(self != nil)
    {
        NSLog(@"init with frame");
        self = [self initGLES];
    }
    return self;
}

- (id)initWithCoder:(NSCoder*)coder
{
    if((self = [super initWithCoder:coder]))
    {
        self = [self initGLES];
    }   
    return self;
}

-(id)initGLES
{
    NSLog(@"init GLES");

    CAEAGLLayer *eaglLayer = (CAEAGLLayer*) self.layer;

    if ([self respondsToSelector:@selector(contentScaleFactor)])
    {
        self.contentScaleFactor = [[UIScreen mainScreen] scale]; 
        // scale value should be 1.0 on 3G and 3GS, and 2.0 on iPhone 4.
        self.contentMode = UIViewContentModeScaleToFill;
    }

    // Configure it so that it is opaque, does not retain the contents of the backbuffer when displayed, and uses RGBA8888 color.
    eaglLayer.opaque = YES;
    eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithBool:FALSE], kEAGLDrawablePropertyRetainedBacking,
                                    kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat,
                                    nil];

    // Create our EAGLContext, and if successful make it current and create our framebuffer.
    context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];
    if(!context || ![EAGLContext setCurrentContext:context] || ![self createFramebuffer])
    {
        [self release];
        return nil;
    }

    // Default the animation interval to 1/60th of a second.
    animationInterval = 1.0 / kRenderingFrequency;
    return self;
}

-(GLViewController *)controller
{
    return controller;
}

-(void)setController:(GLViewController *)d
{
    controller = d;
    controllerSetup = ![controller respondsToSelector:@selector(setupView:)];
}

// If our view is resized, we'll be asked to layout subviews.
// This is the perfect opportunity to also update the framebuffer so that it is
// the same size as our display area.
-(void)layoutSubviews
{
    [EAGLContext setCurrentContext:context];
    [self destroyFramebuffer];
    [self createFramebuffer];
    [self drawView];
}

- (BOOL)createFramebuffer
{
    NSLog(@"about to make FB");
    // Generate IDs for a framebuffer object and a color renderbuffer
    glGenFramebuffersOES(1, &viewFramebuffer);
    glGenRenderbuffersOES(1, &viewRenderbuffer);

    glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    // This call associates the storage for the current render buffer with the EAGLDrawable (our CAEAGLLayer)
    // allowing us to draw into a buffer that will later be rendered to screen whereever the layer is (which corresponds with our view).
    [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(id<EAGLDrawable>)self.layer];
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);

    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

    // For this sample, we also need a depth buffer, so we'll create and attach one via another renderbuffer.
    glGenRenderbuffersOES(1, &depthRenderbuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthRenderbuffer);
    glRenderbufferStorageOES(GL_RENDERBUFFER_OES, GL_DEPTH_COMPONENT16_OES, backingWidth, backingHeight);
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_DEPTH_ATTACHMENT_OES, GL_RENDERBUFFER_OES, depthRenderbuffer);

    if(glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES) != GL_FRAMEBUFFER_COMPLETE_OES)
    {
        NSLog(@"failed to make complete framebuffer object %x", glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES));
        return NO;
    }

    return YES;
}

// Clean up any buffers we have allocated.
- (void)destroyFramebuffer
{
    glDeleteFramebuffersOES(1, &viewFramebuffer);
    viewFramebuffer = 0;
    glDeleteRenderbuffersOES(1, &viewRenderbuffer);
    viewRenderbuffer = 0;

    if(depthRenderbuffer)
    {
        glDeleteRenderbuffersOES(1, &depthRenderbuffer);
        depthRenderbuffer = 0;
    }
}

- (void)startAnimation
{
    animationTimer = [NSTimer scheduledTimerWithTimeInterval:animationInterval target:self selector:@selector(drawView) userInfo:nil repeats:YES];
    NSLog(@"starting animation");

}

- (void)stopAnimation
{
    [animationTimer invalidate];
    animationTimer = nil;
    NSLog(@"stopping animation");

}

- (void)setAnimationInterval:(NSTimeInterval)interval
{
    animationInterval = interval;

    if(animationTimer)
    {
        [self stopAnimation];
        [self startAnimation];
    }
}

// Updates the OpenGL view when the timer fires
- (void)drawView
{
    NSLog(@"draw");
    // Make sure that you are drawing to the current context
    [EAGLContext setCurrentContext:context];

    // If our drawing delegate needs to have the view setup, then call -setupView: and flag that it won't need to be called again.
    if(!controllerSetup)
    {
        [controller setupView:self];
        controllerSetup = YES;
    }

    glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);

    [controller drawView:self];

    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    [context presentRenderbuffer:GL_RENDERBUFFER_OES];

    GLenum err = glGetError();
    if(err)
        NSLog(@"%x error", err);

}

// Stop animating and release resources when they are no longer needed.
- (void)dealloc
{
    [self stopAnimation];

    if([EAGLContext currentContext] == context)
    {
        [EAGLContext setCurrentContext:nil];
    }

    [context release];
    context = nil;

    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:18:22.690

这是我认为您的代码正在运行的方式

```
self.viewController = [[GLViewController alloc] initWithNibName:@"iPhoneDisplay" bundle:nil]"; 
```

这会读取您在 NIB 文件中定义的 GLView 的视图控制器并实例化（或按需安排实例化，不确定）。

```
self.window.rootViewController = self.viewController; 
```

执行，此时`GLView`您在 NIB 文件中定义的内容将添加到视图层次结构中。然后你创建一个全新的 GLView，它永远不会添加到视图层次结构中，然后你将该视图设置为动画。

```
glViewFromNib = [[GLView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
glViewFromNib.controller = self.window.rootViewController;
glViewFromNib.animationInterval = 1.0 / kRenderingFrequency;
[glViewFromNib startAnimation]; 
```

您可能应该使用 an`IBOutlet`来获取`GLView`加载您的 NIB 的句柄，并开始该动画。（或者如果您想创建`GLView`in 代码，在分配之前`rootViewController`执行类似的操作`[self.viewController.view addSubView:glViewCreatedInCode]`）

# javascript - 一次读取加载本地存储

> ID：10628587
> 
> 赞同：0
> 
> 时间：2012-05-17T00:47:31.113
> 
> 标签：javascript, local-storage

我有几个项目存储在本地存储中。页面加载了什么，我有大约 20 行这样的：

```
 var SomeVar = localStorage.getItem('SomeKey'); 
```

我想更改它并一次读取所有存储数据，将其存储在一个临时对象中，并从该临时对象中获取 20 个变量。

如何一次读取本地存储？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:53:29.087

我想不出你想要这样做的原因，但你可以利用`localStorage`基本上是一个对象的事实并做这样的事情：

```
var tempLocalStorage = {};
for(prop in localStorage) {
    if(localStorage.hasOwnProp(prop)) {
        tempLocalStorage[prop] = localStorage.getItem(prop);
    }
}

var SomeVar = tempLocalStorage["SomeKey"]; 
```

我正在遍历其中的值`localStorage`并将它们添加到临时本地存储变量中。然后，您可以使用与 standard 相同的键访问临时本地存储变量`localStorage`，但使用标准对象属性语法，而不是使用的自定义`getItem()`语法`localStorage`。

* * *

**编辑**：这是一个建议。将所有变量保存到一个对象，然后加载和保存该对象，而`localStorage`不是保存单独的对象。访问调用最耗时的是单个变量。根据[这篇](http://calendar.perfplanet.com/2011/localstorage-read-performance/)关于`localStorage`优化的帖子，从单个变量读取 10 个字符到内存中所花费的时间与读取 1000 个字符所花费的时间大致相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:38:53.290

您可以将所有变量保存在一个对象中，并使用 JSON 将其与字符串相互转换：

```
// read:
var localvars = JSON.parse(localStorage.myvars || '{}');
// copy from temporary object to desired variable:
var someVar = localvars.someKey;
// write:
localStorage.myvars = JSON.stringify(localvars); 
```

如果使用此方法，则必须小心不要将任何递归变量存储在 中`localvars`，因为这会导致`JSON.stringify`失败。但这并不是真正的问题，因为无论如何您都无法存储这些结构`localStorage`。

我不建议在 localStorage 上使用 for-in 循环，因为您不应该假设您的脚本是唯一访问`localStorage`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T01:41:57.797

你看过jStorage吗？[http://www.jstorage.info/](http://www.jstorage.info/) 我经常使用它，它似乎做了类似的事情，因为它将所有东西都存储在一个对象下。也适用于旧版 IE 的跨浏览器。

# c - C 运算顺序

> ID：10628589
> 
> 赞同：1
> 
> 时间：2012-05-17T00:47:52.033
> 
> 标签：c, scope, printf, operator-precedence

那么对于两个单独的代码片段，为什么增量器/减量器的行为不同？

片段 A：

```
i=7; j=8; k=9; 
printf("%d\n", i - 7 && j++ > k);
printf("%d %d %d", i, j, k); 
```

将产生以下输出：

```
0
7 8 9 
```

片段 B：

```
while (i > 0)
printf("T minus %d and counting\n",i--); 
```

产生这个：

```
T minus 5 and counting
T minus 4 and counting
T minus 3 and counting
T minus 2 and counting
T minus 1 and counting 
```

现在，我知道函数的参数是按值传递的，并且它必须与`j`布尔表达式中使用的事实有关。但这两种情况在我看来是矛盾的。这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T00:52:31.070

好的，您将需要*非常*仔细地查看运算符优先级的排列方式*以及*它们的工作方式。由于这是家庭作业，我不会给出确切的答案，但你应该做两件事。

1.  使用优先表重写带有全括号的表达式
2.  查找 的*确切*行为`&&`。特别是，何时`j++ > k`执行子表达式？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T00:52:50.390

这叫短路。当 && 的左手计算为假时，右手边不再执行（跳过）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T00:53:11.840

您在此处发生短路 (&&)。仅计算表达式的左侧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T02:27:43.543

片段 A：

">" 的优先级高于 "&&"，所以

```
printf("%d\n", i - 7 && j++ > k); 
```

像这样：

```
printf("%d\n", i - 7 && (j++ > k)); 
```

而“&&”是短路运算，因为(i - 7) == 0，是FALSE，所以(j++ > k)会被忽略，这三个数都不会改变。

片段 B：

"i--" 会先返回原来的值，然后减一。

# salesforce - 在 SOQL 的字符串中使用比较

> ID：10628605
> 
> 赞同：0
> 
> 时间：2012-05-17T00:50:59.537
> 
> 标签：salesforce, soql

Salesforce 自定义对象中的列（id）之一是字符串类型，尽管它始终包含长类型值。我想运行这样的查询。

其中 id >= '123' 和 id <= '123456';

有什么解决办法吗？无法更改 Salesforce 中列的数据类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T01:38:22.817

作为 SOQL 语法的一部分，数据类型转换是不可能的。您需要带回完整的结果集并过滤结果。或者，如果您无法更改数据类型，那么也许您可以使用公式字段或工作流更新将该字段复制到一个隐藏字段中，您可以对其执行大于小于查询的查询。这不是最佳实践，但如果您真的被困在解决方案中，这是一个想法。

最终，尽管正确的答案是在需要基于文本的情况下用前导零填充数字，或者将数据类型更改为数字。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T01:01:31.713

如果您的 id 始终包含 long 类型值，那么您可以使用以下 where 子句

```
WHERE CONVERT(BIGINT, id) BETWEEN 123 AND 123456 
```

但是，如果您的 ID 不是数值，则会引发错误

# java - Ant：将类放在类路径上，但看不到它们

> ID：10628607
> 
> 赞同：4
> 
> 时间：2012-05-17T00:51:11.910
> 
> 标签：java, ant, junit, classpath

我正在尝试设置 Ant 来运行我的测试，但我的测试无法编译。错误是它找不到我正在测试的类，即使我把它们放在类路径上。我什至输出了类路径，它们就在上面。

蚂蚁：

```
<target name="compile">
    <echo>compiling code</echo>
    <javac debug="true" srcdir="${src}" destdir="${build}" classpathref="build.path" />

    <echo>compiling tests</echo>

    <echo message="${toString:build.test.path}" />

    <javac debug="true" srcdir="${test}" destdir="${build.test}" classpathref="build.test.path" />
</target>
<path id="build.test.path">        
    <fileset dir="${build}">
        <include name="**/*.class"/>
    </fileset>
    <fileset dir="${install}">
        <include name="junit-4.11.jar"/>
    </fileset>
</path> 
```

这是控制台输出：

```
compile:
 [echo] compiling code
[javac] C:\PetProjects\timesheet\build.xml:37: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
[javac] Compiling 2 source files to C:\PetProjects\timesheet\build
 [echo]
 [echo]
 [echo] compiling tests
 [echo]
 [echo]
 [echo] C:\PetProjects\timesheet\build\com\me\timesheet\exceptions\BadBlockException.class;C:\PetProjects\timesheet\build\com\me\timesheet\pojo\Block.class;C:\Installations\junit-4.11.jar
 [echo]
 [echo]
[javac] C:\PetProjects\timesheet\build.xml:47: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
[javac] Compiling 1 source file to C:\PetProjects\timesheet\build-test
[javac] C:\PetProjects\timesheet\test\com\me\timesheet\pojo\BlockTest.java:9: cannot find symbol
[javac] symbol  : class Block
[javac] location: package com.me.timesheet.pojo
[javac] import com.me.timesheet.pojo.Block;
[javac]                               ^
[javac] C:\PetProjects\timesheet\test\com\me\timesheet\pojo\BlockTest.java:11: package com.me.timesheet.exceptions does not exist
[javac] import com.me.timesheet.exceptions.BadBlockException; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:01:03.310

您需要将目录`C:\PetProjects\timesheet\build`放在类路径上，而不是单个类。因此，当代码引用时`com.me.timesheet.pojo.Block`，该类在路径上找到`C:\PetProjects\timesheet\build\com\me\timesheet\pojo\Block.class`

# objective-c - 得到 PN 但是应用程序：应用程序 didReceiveRemoteNotification：选择应用程序图标时未触发

> ID：10628611
> 
> 赞同：9
> 
> 时间：2012-05-17T00:51:48.253
> 
> 标签：objective-c, xcode, apple-push-notifications

我看到我的推送通知有一种特殊的行为，想知道是否有人对我做错了什么或应该做什么有任何建议。

我的`application:(UIApplication*)application didReceiveRemoteNotification:`写法如下：

```
- (void)application:(UIApplication*)application didReceiveRemoteNotification: (NSDictionary*)userInfo
{
NSLog(@"Received notification: %@", userInfo);
[self addMessageFromRemoteNotification:userInfo updateUI:YES];
} 
```

如您所见，我并不担心应用程序的状态。我只想在收到 PN 时记录一条消息。

我的设置是根据 Apple 的文档进行的，我可以接收推送通知。

以下是 PN 进入时的预期行为：

*   **应用程序在后台，我点击通知：**我可以在通知中心看到通知。点击通知，应用程序来到前台，我可以看到上面的方法被调用了。
*   **应用程序处于活动状态并且已经在前台：**我可以看到上面的方法被调用。

现在，以下是我看到的特殊行为：

*   **PN 进来了。在通知中看到它，看到应用程序图标上的徽章。我单击应用程序图标 - 而不是通知：**在这种情况下，我发现**没有**调用上述方法。我期待它被称为...

有没有人见过这种行为？这是应该发生的事情吗？我在 Apple 文档中看不到任何关于此的内容......另外，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:54:50.203

我有同样的行为。它让我发疯，但我认为这就是 iOS 的工作方式。

下面是苹果文档的摘录。这是关于应用程序未运行时的应用程序：didFinishLaunchingWithOptions。当应用程序处于后台/didReceiveRemoteNotification 时，它看起来是一样的。

“如果点击操作按钮（在运行 iOS 的设备上），系统启动应用程序并且应用程序调用其委托的 application:didFinishLaunchingWithOptions: 方法（如果已实现）；它传入通知负载（用于远程通知）或本地-通知对象（用于本地通知）。

如果在运行 iOS 的设备上点击应用程序图标，应用程序会调用相同的方法，但不会提供有关通知的信息。" 来自：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T09:35:25.020

如果应用程序没有在后台运行，但最初是从推送通知启动的，并且您已经实现了**didFinishLaunchingWithOptions:，**您需要在那里实现您的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions {
    if (launchOptions != nil) {
        NSDictionary* userInfo = [launchOptions valueForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"];
        if (userInfo != nil) {
            NSDictionary* apsInfo = [userInfo objectForKey:@"aps"];
            NSString* custom = [userInfo objectForKey:@"yourCustomPushData"];
            // do something with it
        }
    }
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T07:07:00.190

Mrj's 在我的情况下不起作用，所以我尝试了以下选项

如果应用程序不在后台，您应该使用以下代码

```
 //-------------- check notification when app is come to foreground after apllication get terminated ----------------//

UILocalNotification *localNotif =

[launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];

if (localNotif) {

    [self handleRemotNotification:[launchOptions valueForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"]]; // private method

} 
```

# asp.net-mvc - MVC - 字典需要“System.Collections.Generic.IEnumerable”类型的模型项1

> ID：10628616
> 
> 赞同：7
> 
> 时间：2012-05-17T00:52:29.110
> 
> 标签：asp.net-mvc, razor

我刚开始做 MVC 4 并且一直很享受它，但是当我试图让我的数据库（只是 NAME 和 EMAIL 条目）在索引视图中显示它的所有条目时遇到了麻烦。我收到以下错误：

> *传入字典的模型项的类型为 'System.Collections.Generic.List `1[MobileWebFormver2.Models.WebForm1]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[MobileWebFormver2.Models.User]'*。

我能够将程序连接到数据库，但我几乎被困在这里。我想知道我是否可以得到一些帮助。这是我的代码：

**用户类**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations; 

namespace MobileWebFormver2.Models
{
    public class User
    {
        [Required(ErrorMessage="Please enter name.")]
        public string Name { get; set; }
        [Required(ErrorMessage="Please enter email.")]
        public string Email { get; set; }
    }
} 
```

**HomeController**（WebForm1 是一个数据库条目，包含一个 NAME 和 EMAIL 字段）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MobileWebFormver2.Models;
using System.Data.Entity;

namespace MobileWebFormver2.Controllers
{
    public class HomeController : Controller
    {
        DataClasses1DataContext db = new DataClasses1DataContext();

        public ActionResult Index()
        {
            ViewBag.Message = "This is the TourEast Holidays Mobile Index";

            return View(db.WebForm1s.ToList());
        }
    }
} 
```

**指数**

```
@model IEnumerable<MobileWebFormver2.Models.User>

@{
    ViewBag.Title = "Home Page";
}

@foreach (var item in Model)
{
    <tr>
        <td>
        @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
        @Html.DisplayFor(modelItem => item.Email)
        </td>
    </tr>
} 
```

编辑：这是指 DataClasses1DataContext。我不确定这会有多大用处。

**数据类1.cs**

```
namespace MobileWebFormver2.Models
{
    partial class DataClasses1DataContext
    {
    }
} 
```

**DataClasses1.designer.cs**

```
#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.269
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace MobileWebFormver2.Models
{
using System.Data.Linq;
using System.Data.Linq.Mapping;
using System.Data;
using System.Collections.Generic;
using System.Reflection;
using System.Linq;
using System.Linq.Expressions;
using System.ComponentModel;
using System;

[global::System.Data.Linq.Mapping.DatabaseAttribute(Name="MobileWebForm")]
public partial class DataClasses1DataContext : System.Data.Linq.DataContext
{

    private static System.Data.Linq.Mapping.MappingSource mappingSource = new AttributeMappingSource();

#region Extensibility Method Definitions
partial void OnCreated();
partial void InsertWebForm1(WebForm1 instance);
partial void UpdateWebForm1(WebForm1 instance);
partial void DeleteWebForm1(WebForm1 instance);
#endregion

    public DataClasses1DataContext() : 
            base(global::System.Configuration.ConfigurationManager.ConnectionStrings["MobileWebFormConnectionString"].ConnectionString, mappingSource)
    {
        OnCreated();
    }

    public DataClasses1DataContext(string connection) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public DataClasses1DataContext(System.Data.IDbConnection connection) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public DataClasses1DataContext(string connection, System.Data.Linq.Mapping.MappingSource mappingSource) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public DataClasses1DataContext(System.Data.IDbConnection connection, System.Data.Linq.Mapping.MappingSource mappingSource) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public System.Data.Linq.Table<WebForm1> WebForm1s
    {
        get
        {
            return this.GetTable<WebForm1>();
        }
    }
}

[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.WebForm1")]
public partial class WebForm1 : INotifyPropertyChanging, INotifyPropertyChanged
{

    private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(String.Empty);

    private string _Name;

    private string _Email;

#region Extensibility Method Definitions
partial void OnLoaded();
partial void OnValidate(System.Data.Linq.ChangeAction action);
partial void OnCreated();
partial void OnNameChanging(string value);
partial void OnNameChanged();
partial void OnEmailChanging(string value);
partial void OnEmailChanged();
#endregion

    public WebForm1()
    {
        OnCreated();
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Name", DbType="NVarChar(50) NOT NULL", CanBeNull=false, IsPrimaryKey=true)]
    public string Name
    {
        get
        {
            return this._Name;
        }
        set
        {
            if ((this._Name != value))
            {
                this.OnNameChanging(value);
                this.SendPropertyChanging();
                this._Name = value;
                this.SendPropertyChanged("Name");
                this.OnNameChanged();
            }
        }
    }

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Email", DbType="NVarChar(50) NOT NULL", CanBeNull=false)]
    public string Email
    {
        get
        {
            return this._Email;
        }
        set
        {
            if ((this._Email != value))
            {
                this.OnEmailChanging(value);
                this.SendPropertyChanging();
                this._Email = value;
                this.SendPropertyChanged("Email");
                this.OnEmailChanged();
            }
        }
    }

    public event PropertyChangingEventHandler PropertyChanging;

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void SendPropertyChanging()
    {
        if ((this.PropertyChanging != null))
        {
            this.PropertyChanging(this, emptyChangingEventArgs);
        }
    }

    protected virtual void SendPropertyChanged(String propertyName)
    {
        if ((this.PropertyChanged != null))
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}
}
 #pragma warning restore 1591' 
```

我在这里查看了类似的帖子，我知道这与传递对象有关，但视图期待其他内容。但是我会说我是一个非常初级的程序员，我认为我不理解他们所说的大部分内容。我基本上遵循了 Microsoft 的 MVC 教程站点 ( [Link](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-model%27s-data-from-a-controller) ) 中的代码，了解如何在索引中显示您的数据库，但我遇到了错误。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T00:55:18.237

问题是您将错误的东西传递到视图中。你传递的是`WebForm1`'s 的集合，而不是`User`'s。

编辑 - 将您的视图模型更改为：

```
@model IEnumerable<MobileWebFormver2.Models.WebForm1> 
```

编辑 - 更多解释：

在这一行中，您正在创建 ActionResult 并传入模型的数据。

```
return View(db.WebForm1s.ToList()); 
```

但是， db.WebForm1s 是 type 的集合`WebForm1`。

在您看来，当您声明模型时，您正在创建一个强类型视图：

```
@model IEnumerable<MobileWebFormver2.Models.User> 
```

该视图需要一组用户，但改为传递 WebForm1。因此出现错误 - 您必须确定哪个是正确的，控制器传入 WebForm1 或视图，并更改另一个以匹配。

# matlab - 为什么当相机太靠近时 Matlab 曲面会消失？

> ID：10628625
> 
> 赞同：0
> 
> 时间：2012-05-17T00:53:17.053
> 
> 标签：matlab, geometry-surface

我正在使用高程数据创建一个表面，并使用正射影像对其进行纹理化，以在 Matlab 中渲染地形。我希望能够从飞行的小型无人机的角度渲染视图。但是，当我将相机移动得太靠近表面时，它就会消失。请注意，我已将投影设置为透视，并且我正在手动设置相机位置、目标和视角。有谁知道这是什么原因以及如何解决它？

**编辑：** 当我一直在玩东西时，当表面的一部分位于相机后面时，它似乎有问题。要么事情开始变得扭曲并变得怪异，要么整个表面就消失了。有没有简单的方法来解决这个问题？

**编辑2：**我遇到了[这个](http://www.mathworks.com/help/techdoc/visualize/f4-45695.html)在场景中移动相机的例子。但是，它看起来像使用补丁而不是表面。我还发现[这个函数](http://www.mathworks.com/help/techdoc/ref/surf2patch.html)可以将表面数据转换为补丁数据。但是，您似乎不能像在表面上那样将纹理映射到补丁上。有什么想法吗？我想我可以将地形分解成一个由小表面组成的网格以进行渲染。

# java - 通过注释进行验证？

> ID：10628627
> 
> 赞同：0
> 
> 时间：2012-05-17T00:53:59.397
> 
> 标签：java, android

有没有类似于基于注释的 JSF/Hibernate 验证 für Android？还是我总是必须“手动”验证每个输入字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:50:08.403

实际上，我认为他指的是[jsr-303](http://beanvalidation.org/1.0/spec/)及其参考实现[Hibernate-Validator](http://www.hibernate.org/subprojects/validator.html)，如果您摆脱了 java.beans.Introspector 依赖项，它可以在 Android 中使用（至少我设法使用 4.2.0.Final）。

请参阅[https://hibernate.atlassian.net/browse/HV-779](https://hibernate.atlassian.net/browse/HV-779) 和[Android 错误“无法解析虚拟方法 java/beans/PropertyDescriptor”是否有解决方法？](https://stackoverflow.com/questions/5488236/is-there-a-work-around-for-the-android-error-unable-to-resolve-virtual-method-j)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T04:31:26.507

你所说的 Hibernate Viladation Hibernate 是不同的，它只是一个 ORM，而 JSF 是 MVC；您可以使用正则表达式来处理它们或使用

> android:maxLines="5" android:maxHeight="5" android:maxLength="5" android:inputType="textEmailAddress"

或使用这些属性

# java - ClassCast Exception 不能将 String 转换为 Boolean

> ID：10628628
> 
> 赞同：2
> 
> 时间：2012-05-17T00:54:08.113
> 
> 标签：java, casting

> **可能重复：**
> [如何从对象中获取布尔值](https://stackoverflow.com/questions/10642716/how-to-get-boolean-value-from-object)

我正在努力获得`Boolean`价值`Object` `newValue`并到达`ClassCastException`这里。虽然，我输入强制转换`Boolean`为什么我会得到这个`exception`？

```
Boolean changedValue=!((Boolean)newValue); 
```

你能解释一下吗。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T00:56:27.377

A`String`和 a`Boolean`是完全不同的类，所以你不能在它们之间转换。您需要使用`Boolean.valueOf()`从`Boolean`.`String.`

它不像 C 或 C++，你可以强制将任何东西强制转换为任何东西（当然，如果你不小心，这样做会遇到很多麻烦，因为不能保证任意强制转换会有任何意义）。

而且它也不像 C++ 那样，如果定义了类型转换运算符，则强制转换将变成对转换运算符之一的自动调用。Java 中的对象类型之间没有自动转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T00:56:59.517

Java 是一种强类型语言。如果`newValue`不是`Boolean`对象，那么`ClassCastException`如果您尝试将其转换为 a ，您将得到 a `Boolean`。如果`newValue`是`String`表示`Boolean`值，您可以尝试以下代码：

```
boolean changedValue = Boolean.parseBoolean( newValue ) 
```

参考：[http ://docs.oracle.com/javase/6/docs/api/java/lang/Boolean.html#parseBoolean%28java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Boolean.html#parseBoolean%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T00:56:47.567

如果那是一个字符串值，您将需要使用`Boolean.valueOf(String)`方法。Java 不会自动将对象转换为不同的类型，只会通过包装器和原始类型之间的自动装箱进行转换。

# mysql - 在插入或更新时获取完整的 MySQL 查询字符串

> ID：10628640
> 
> 赞同：21
> 
> 时间：2012-05-17T00:56:10.063
> 
> 标签：mysql, logging, triggers

在 MySQL 方面需要帮助，因为它不是我的强项。所以任何帮助表示赞赏。

我的网站上存在缺失值`UPDATE`或`INSERT`缺失值的问题。这在网站上的其他功能上引起了一些问题，但我无法找到在任何课程中完成`UPDATE`或完成的位置。`INSERT`

有没有什么办法，也许是一个 MySQL 触发器，我可以添加到这些表中，允许我存储 or 的原始或完整`UPDATE`查询`INSERT`。我尝试过日志记录，但这适用于整个数据库，并且占用了太多磁盘空间。

提前感谢您的任何回复。

PS：目前PHP类有点乱，因为我们还处于开发阶段，所以在更新或插入函数中添加异常会花费太多时间。所以请重点回答问题。再次感谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-20T06:54:14.363

您可以使用以下语句将当前 SQL 查询作为字符串获取：

```
SELECT info FROM INFORMATION_SCHEMA.PROCESSLIST WHERE id = CONNECTION_ID() 
```

所以你要做的是创建一个`TRIGGER`在你的表上运行插入和/或更新操作的函数，它应该*(i)*获取当前的 sql 语句并*(ii)*将其插入另一个表，如下所示：

```
DELIMITER |

CREATE TRIGGER log_queries_insert BEFORE INSERT ON `your_table`
FOR EACH ROW
BEGIN
    DECLARE original_query VARCHAR(1024);
    SET original_query = (SELECT info FROM INFORMATION_SCHEMA.PROCESSLIST WHERE id = CONNECTION_ID());
    INSERT INTO `app_sql_debug_log`(`query`) VALUES (original_query);
END;
|
DELIMITER ; 
```

您将必须创建两个触发器 - 一个用于更新，一个用于插入。触发器将新查询作为字符串插入到*`app_sql_debug_log`*表中的*`query`*列中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T01:20:08.713

我认为您需要检查数据库服务器的[*常规查询日志*](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)。

*`The server ... ... logs each SQL statement received from clients. ... ... Since MySQL 5.1.6 log can be a file or a table.`*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T07:05:48.327

如果您不希望数据库中缺少某些值，您可以使用约束来强制执行吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T03:17:53.323

您不必将其记录到数据库中。

将[file_put_contents 与 FILE_APPEND 一起](http://php.net/manual/en/function.file-put-contents.php)使用，并使用制表符分隔符或 csv 将其存储在文本文件中。这样，您可以在需要时轻松导入数据库，或者在需要时在 Excel 或 Numbers（在 Mac 中）中查看文件。

您可以按日期记录文本文件，即 sql_queries_2012-05-24，然后将其存储在文件夹中。文本文件不应占用比将其存储在数据库中更多的空间。一个简单的 'if else' 语句，带有 php 日期函数，应该得到按日期排序的日志记录。

使用文本文件在资源方面肯定比将它们存储在数据库中更具成本效益。此外，使用[php fgetcsv](http://php.net/manual/en/function.fgetcsv.php)对文本文件进行索引和 INSERT 比使用 mysql UPDATE 快得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T06:38:16.773

**简单的基于 PHP 的解决方案**

在 PHP 中使用您自己的函数[`override_function`](http://www.php.net/manual/en/function.override-function.php)来覆盖`mysql_query`，您可以使用该函数来分析和/或记录任何有问题的查询。

```
rename_function('mysql_query', 'mysql_query_orig');
override_function('mysql_query', '$query', 'return override_mysql_query($query);');

function override_mysql_query($query)
{
    $result = mysql_query_orig($query);

    if (stripos($query, "mytablename") !== FALSE) {
        // log, echo, etc.
    }

    return $result;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T19:27:59.430

如果您既不能修改应用程序以记录您发送到 MySQL 的内容（通常是解决方案 #1），也不能启用通用查询日志（解决方案 #2，但是是的，不适用于生产） - 您可能想要使用 MySQL 代理. 看到这个：[https ://github.com/mysql/mysql-proxy](https://github.com/mysql/mysql-proxy)

MySQL Proxy 是轻量级程序，您可以将其放在客户端（PHP 脚本）和 MySQL 服务器之间。您可以在运行 MySQL 服务器本身的同一台服务器上运行 MySQL 代理，并使您的客户端直接连接到代理端口而不是 MySQL 服务器（如果您无法修改客户端，您可以将 MySQL 服务器移动到另一个端口，并设置 MySQL 代理到 MySQL 服务器以前使用的端口）。

然后，可以使用自定义脚本扩展 MySQL 代理，您的自定义脚本可以捕获各种类型的事件：新连接、发送到服务器的查询等。对于查询，您可以灵活地记录它们、阻止它们或修改查询，或者在实际发送的查询之外添加新的查询，无论如何。

坏消息 - 自定义脚本在 Lua ~~( [http://dev.mysql.com/doc/refman/5.5/en/mysql-proxy-scripting.html](http://dev.mysql.com/doc/refman/5.5/en/mysql-proxy-scripting.html) )~~中实现。好消息——你可以找到很多用于 MySQL 代理的 Lua 脚本示例。例如这里： http: ~~[//forge.mysql.com/wiki/Lua_Scripts_For_MySQL_Proxy_Examples](http://forge.mysql.com/wiki/Lua_Scripts_For_MySQL_Proxy_Examples)~~。特别是您可能想要检查“阻止不需要的查询”示例并根据您的需要对其进行修改（您实际上不会阻止任何内容，但会将某些查询打印到日志中）。

MySQL Proxy 增加了一些开销，但通常它非常轻量级。如果你也保持 Lua 脚本轻量级 - 它应该可以正常工作。

**编辑：**

该存储库最后一次更新是在 2014 年，目前，[版本档案](https://downloads.mysql.com/archives/proxy/)是这样说的：

**MySQL Proxy 不是 GA，不推荐用于生产。**

我们建议将 MySQL 路由器用于生产用途。[下载 MySQL 路由器 »](https://dev.mysql.com/downloads/router/)

遗憾的是，MySQL Router 看起来不像 MySQL Proxy 那样允许相同的功能。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-19T08:23:51.157

如果您的服务器安装了 PHP 5.3.0 或更高版本，那么这可能会有所帮助 [http://www.php.net/manual/en/mysqlnd.plugin.php](http://www.php.net/manual/en/mysqlnd.plugin.php)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-05-19T08:51:35.517

您可能希望打开[二进制日志记录](http://dev.mysql.com/doc/refman/4.1/en/binary-log.html)，以便查看每个更新（注意：不是每个*查询*）。您只需要添加`--log-bin`选项，然后使用 . 查看生成的日志`mysqlbinlog`。如有必要，您可以从备份启动数据库副本，在备份位置的日志中启动（使用类似`--master-data`选项 to保存在备份中`mysqldump`），然后一次运行一个更新，直到获得坏行。然后，您知道哪个更新是罪魁祸首。您可以编写最后一部分的脚本和/或对日志长度使用二进制搜索以使其运行得更快。

# php - iOS：kCCDecodeError -4304

> ID：10628643
> 
> 赞同：0
> 
> 时间：2012-05-17T00:56:27.520
> 
> 标签：php, ios, encryption, aes

我用这个脚本加密了 php 中的登录：

```
//PHP Code
    function cypherAES128($plaintext, $key)
{
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

    $ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $plaintext, MCRYPT_MODE_ECB/*, $iv*/);
    $ciphertext = base64_encode($ciphertext);

    return $ciphertext;
}

function uncypherAES128($ciphertext, $key)
{
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);  

    $ciphertext = base64_decode($ciphertext);
    $plaintext = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $ciphertext, MCRYPT_MODE_ECB/*, $iv*/);      
    return $plaintext;
} 
```

我在我的 iOS 应用程序中获得了加密密码，并尝试使用[FBEncryptorAES 对其](https://github.com/dev5tec/FBEncryptor)进行解密。

如果它小于 16 个字符，我可以将登录解密回来。

```
//PHP Code
echo cypherAES128("aShortLogin", $key);   //this encrypted login can be decrypted
echo cypherAES128("loginGreaterThan16Characters", $key);   //this encrypted login cannot 
```

当加密字大于 15 个字符时，我得到一个 kCCDecodeError -4304。

有点精确：听起来长时间登录可以在 PHP 脚本中加密然后解密，然后用 FBEncryptor 加密然后解密。只有 PHP 加密 => ObjectiveC 解密不起作用

请问有什么想法吗？？我是 iOS 和密码学的初学者。

在此先感谢，并为我糟糕的英语感到抱歉。

[编辑] 不确定问题只是objectiveC，因为正如我所说，FBEncryptor 可以解码它自己编码的文本。

当我执行此代码时出现错误：

```
//Objective-C code:
NSString * decryptedLogin = [FBEncryptorAES decryptBase64String: encryptedLogin keyString:AESKey]; 
```

其中“encryptedLogin” = PHP 脚本返回的值。更改 AESKey 的值和长度似乎不起作用。（AESKey = 与 PHP 中的 $key 相同的密钥）尝试了 16 和 32 字节长度的密钥。

我没有更改 FBEncryptorAES 中的代码，这里是 decryptBase64String ：

```
//Objective-C code
+ (NSData*)decryptData:(NSData*)data key:(NSData*)key iv:(NSData*)iv;
{
NSData* result = nil;

// setup key
unsigned char cKey[FBENCRYPT_KEY_SIZE];
bzero(cKey, sizeof(cKey));
[key getBytes:cKey length:FBENCRYPT_KEY_SIZE];

// setup iv
char cIv[FBENCRYPT_BLOCK_SIZE];
bzero(cIv, FBENCRYPT_BLOCK_SIZE);
if (iv) {
    [iv getBytes:cIv length:FBENCRYPT_BLOCK_SIZE];
}

// setup output buffer
size_t bufferSize = [data length] + FBENCRYPT_BLOCK_SIZE;
void *buffer = malloc(bufferSize);

// do decrypt
size_t decryptedSize = 0;
CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt,
                                      FBENCRYPT_ALGORITHM,
                                      kCCOptionPKCS7Padding,
                                      cKey,
                                      FBENCRYPT_KEY_SIZE,
                                      cIv,
                                      [data bytes],
                                      [data length],
                                      buffer,
                                      bufferSize,
                                      &decryptedSize);

if (cryptStatus == kCCSuccess) {
    result = [NSData dataWithBytesNoCopy:buffer length:decryptedSize];
} else {
    free(buffer);
    NSLog(@"[ERROR] failed to decrypt| CCCryptoStatus: %d", cryptStatus);
}

return result;
} 
```

字符串被转换为 Base64 字符串。我不认为转换是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:17:47.150

问题解决了！！！！

只需在我的 php 脚本中使用“MCRYPT_MODE_CBC”而不是“MCRYPT_MODE_ECB”。

```
//PHP Code: 
  // $key must be 32 bytes
  $key="32-AAAAAAAAAAAAAAAAAAAAAAAAAAAAA";

    function cypherAES128($plaintext, $key)
{
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

    $ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $plaintext, MCRYPT_MODE_CBC/*, $iv*/);
    $ciphertext = base64_encode($ciphertext);

    return $ciphertext;
}

function uncypherAES128($ciphertext, $key)
{
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);  

    $ciphertext = base64_decode($ciphertext);
    $plaintext = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $ciphertext, MCRYPT_MODE_CBC/*, $iv*/);      
    return $plaintext;
} 
```

似乎有 5 种使用 AES 加密的方法，而我的 iOS 代码/PHP 代码没有使用相同的方法。

感谢您的回答，我希望这会有所帮助！

# maven - 使用 mecurial 分支名称作为 maven 版本

> ID：10628645
> 
> 赞同：2
> 
> 时间：2012-05-17T00:56:41.387
> 
> 标签：maven, mercurial, versioning, maven-plugin

我目前正在为我的 Maven 项目设置一个 mecurial 存储库。

这个 Maven 项目由几个模块组成。当我创建包含所有创建的 jar 的安装 zip 时，所有模块都具有相同的版本。

到目前为止，我已经使用父 pom 中的一个属性实现了这一点，模块在构建时使用该属性。到目前为止，一切都很好，当我想更改版本时，我只有一个位置可以更改。

现在我得到了使用 mecurial 分支名称作为 maven 版本的 ingenius (=weird) 想法。

我知道我可以使用`hg branch`. 使用[exec maven 插件](http://mojo.codehaus.org/exec-maven-plugin/)应该可以在任何系统（window/linux）上读取它。使用它并将其写入属性文件，我应该能够使用[属性插件再次读取它](http://mojo.codehaus.org/properties-maven-plugin/)

但是我坚持阅读分支名称并将其写入文件：

```
<plugin>
    <artifactId>exec-maven-plugin</artifactId>
    <groupId>org.codehaus.mojo</groupId>
    <executions>
        <execution>
            <phase>generate-sources</phase>
            <goals>
                <goal>exec</goal>
            </goals>
            <configuration>
                <executable>hg</executable>
                <arguments>
                    <argument>branch</argument>
                </arguments>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

你们中的一个人是否知道如何解决这个问题，或者有一个天才的不同解决方案来在构建时将 mercurial 分支名称放入 maven pom 中？

最好的问候， Xeno Lupus

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:06:27.200

我不是专家，但听起来你可以[在 exec 上使用 outputFile](http://mojo.codehaus.org/exec-maven-plugin/exec-mojo.html#outputFile)将输出写入文件。您可以让 Mercurial 使用以下模板输出有效的 Java 属性文件：

```
hg log --rev . --template 'version={branch}-{node|short}\n' 
```

然后加载它。这类事情的一个常见模板是`{latesttag}-{latesttagdistance}-{node|short}`

也就是说，我当然希望 maven 让您将命令输出直接发送到变量中，而无需先转到磁盘上的文件——ant 确实做到了。

# ios - MPMoviePlayerViewController 在屏幕锁定时关闭

> ID：10628648
> 
> 赞同：1
> 
> 时间：2012-05-17T00:56:59.547
> 
> 标签：ios, mpmovieplayercontroller

打电话后——

```
[self.navigationController presentMoviePlayerViewControllerAnimated:movieViewController]; 
```

屏幕锁定或背景后视图会自行消失。有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:01:16.180

似乎锁定屏幕会导致`MPMoviePlayerController`停止，从而导致`MPMoviePlayerViewController`关闭。

我最终滚动了自己的自定义`UIViewController`，`MPMoviePlayerController`并使用全屏控件占据了整个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:13:41.747

在 iphone sdk 中尝试下面这个帖子屏幕锁定事件

[锁定解锁事件 iphone](https://stackoverflow.com/questions/706344/lock-unlock-events-iphone)

在尝试锁定事件以关闭 mpmovieplayerviewcontroller 之后！

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T09:29:31.600

这将是设备的自然行为.. **除非 >>**您为其添加权限。

`Info.plist > Required background modes`

添加模式**App 使用 AirPlay 播放音频或流式传输音频/视频**

现在不同的是`MPMoviePlayerViewController`，即使应用程序进入后台，也不会关闭。但是视频会暂停。

# jquery - IE 的 JS CORS 问题 - 如何解决？

> ID：10628653
> 
> 赞同：0
> 
> 时间：2012-05-17T00:58:18.097
> 
> 标签：jquery, cross-domain, getjson, cors

我知道这已经被访问了很多，并且我已经设法让它与其他项目一起工作。我继承了在 IE 中不起作用的这段代码：

```
function loadTemplate(template, alt_cache_name) {
    if (templates[template] !== undefined) {
        if (alt_cache_name !== undefined) {
            templates[alt_cache_name] = templates[template];
        }
        return templates[template];
    } else {

        return $.get(template, function (response) {
            if (alt_cache_name !== undefined) {
                templates[alt_cache_name] = response;
            }
            templates[template] = response;
        }, 'text');
    }
} 
```

问题在于 $.get()。

的值`template`是特定 html 模板的 url。

我尝试了以下方法，但我认为返回类型与 $.get() 返回的类型不同：

```
function createCORSRequest(method, url) {
    var xhr = new XMLHttpRequest();
    if ("withCredentials" in xhr) {
        xhr.open(method, url, true);
    } else if (typeof XDomainRequest != "undefined") {
        xhr = new XDomainRequest();
        xhr.open(method, url);
    } else {
        xhr = null;
    }
    return xhr;
}

function loadTemplate(template, alt_cache_name) {
    if (templates[template] !== undefined) {
        if (alt_cache_name !== undefined) {
            templates[alt_cache_name] = templates[template];
        }
        return templates[template];
    } else {

        var request = createCORSRequest("GET", template);
        var content = "";
        if (request) {
            request.onload = function () {
                //do something with request.responseText
                console.log(request.responseText);
                if (alt_cache_name !== undefined) {
                    templates[alt_cache_name] = response.responseText;
                }
                templates[template] = response.responseText;
            };
        }

        return request;

        //            return $.get(template, function (response) {
        //                if (alt_cache_name !== undefined) {
        //                    templates[alt_cache_name] = response;
        //                }
        //                templates[template] = response;
        //            }, 'text');
    }
} 
```

我什至尝试过`$.get`：

```
jQuery.support.cors = true; 
```

有人可以阐明如何使其工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:11:46.060

事实证明，[这里](https://github.com/jaubourg/ajaxHooks/blob/master/src/ajax/xdr.js)列出的 jQuery 插件起到了作用。进一步阅读后，[这篇文章](https://stackoverflow.com/questions/8688703/is-there-a-jquery-solution-that-uses-cors-when-available-and-falls-back-to-xdoma)还详细介绍了解决方案。

- 更新 -

经过进一步测试，IE9 和这个库似乎存在一些问题。还有其他人遇到任何问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T22:55:23.637

我有一个类似的问题，我无法在运行时使用 IE 8/9 上的 CORS 从 CDN 加载模板。我能够通过从此处包含 xhr-xdr-adapter.js 文件来使其工作：[https ://github.com/intuit/xhr-xdr-adapter/blob/master/src/xhr-xdr-adapter.js](https://github.com/intuit/xhr-xdr-adapter/blob/master/src/xhr-xdr-adapter.js)

您可以在需要的地方包含它，如下所示：

```
<!--[if lt IE 10]>
<script src="xhr-xdr-adapter.js" type="text/javascript"></script>
<![endif]--> 
```

xhr-xdr-adapter 将 XMLHttpRequest 替换为不同的函数，该函数在运行时确定是使用本机 XMLHttpRequest 还是 XDomainRequest。通过包含它，我已经能够使用 jQuery 和 AngularJS 进行模板的跨域加载。

# c# - 无法从其他应用程序读取 azure 缓存数据

> ID：10628655
> 
> 赞同：0
> 
> 时间：2012-05-17T00:58:31.983
> 
> 标签：c#, caching, azure

我正在使用以下代码进行天蓝色缓存，它工作正常......

```
[Serializable]
public class Person
{
    public string First { set; get; }
    public string Last { set; get; }

}

[TestClass]
public class AzureCachingTests1
{
    private static DataCacheFactory _factory;

    [TestInitialize]
    public void Setup()
    {

        _factory = new DataCacheFactory(new DataCacheFactoryConfiguration("mycache"));
    }

    [TestMethod]
    public void TestMethod1()
    {

        DataCache cache = _factory.GetDefaultCache();

        var person = new Person { First = "Jane", Last = "doe" };
        const string key = "mykey";

        cache.Put(key, person, TimeSpan.FromMinutes(10));
        var data = (Person)cache.Get(key);
        Assert.AreEqual("Jane", data.First);

    }
} 
```

现在在 Visual Studio 的另一个实例中，我运行以下代码...

```
[TestClass]
public class AzureCachingTests
{
    private static DataCacheFactory _factory;
    [TestInitialize]
    public void Setup()
    {

        _factory = new DataCacheFactory(new DataCacheFactoryConfiguration("mycache"));
    }

    [TestMethod]
    public void TestMethod1()
    {

        DataCache cache = _factory.GetDefaultCache();
        const string key = "mykey";
        var data = (Person) cache.Get(key);  <----- Error here... <--------
        Assert.AreEqual("Jane", data.First);

    }
}

[Serializable]
public class Person
{
    public string First { set; get; }
    public string Last { set; get; }

} 
```

这一次，我收到以下错误...

测试方法 AzureCaching.AzureCachingTests.TestMethod1 抛出异常：System.Runtime.Serialization.SerializationException：未找到程序集 'AzureCaching1，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null'。

我的班级 Person 是可序列化的。为什么我无法在 AzureCaching 中查询我缓存在 AzureCaching1 中的缓存？

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:49:24.217

除非你引用了 AzureCachingTests1 所在的项目，否则你的测试不知道如何反序列化它从缓存中检索的项目。您有两个具有相同名称和相同属性的类，但它们不是同一个类。

因为您正在编写测试，所以您需要从 AzureCachingTests 所在的项目中引用项目 AzureCachingTests1 并删除 AzureCachingTests 项目中 Person 的类定义（并确保您正在转换为正确的类好）。

如果这不是一个测试，而您只是想在两个或多个项目之间共享一个类，那么最好的想法是拥有第三个项目，其中包含两个项目共有的所有类，在这种情况下，它只是 Person 类。

# objective-c - 如何确定在objective-c中哪个坐标更北

> ID：10628656
> 
> 赞同：0
> 
> 时间：2012-05-17T00:58:35.987
> 
> 标签：objective-c, mkannotationview, cllocation

我正在为我最新的 iOS 5 应用程序编写自定义注释视图，我正在寻找最新的 SDK 友好方式来比较 2 个 CLLocationCoordinate2D 坐标？

```
CLLocationCoordinate2D coordinate = (CLLocationCoordinate2D){33.0,-112.4};
CLLocationCoordinate2D coordinate = (CLLocationCoordinate2D){33.0,-112.3}; 
```

有没有内置的方法来确定这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:09:11.110

您不需要内置方法。您只需要比较[纬度](http://en.wikipedia.org/wiki/Latitude)：

```
CLLocationCoordinate2D coordinate1 = (CLLocationCoordinate2D){33.0,-112.4};
CLLocationCoordinate2D coordinate2 = (CLLocationCoordinate2D){34.0,-112.3};

CLLocationCoordinate2D furthestNorth;
if (coordinate1.latitude > coordinate2.latitude) {
    furthestNorth = coordinate1;
} else {
    furthestNorth = coordinate2;
}
// OR
furthestNorth = (coordinate1.latitude > coordinate2.latitude) ? coordinate1 : coordinate2; 
```

# mysql - MySql 请求在 LEFT JOIN 上返回重复项

> ID：10628658
> 
> 赞同：1
> 
> 时间：2012-05-17T00:58:45.357
> 
> 标签：mysql, sql, duplicates

3张桌子

```
table: people 

id name 
1  john  
2  Mike
3  Sam  
4  Andy 
```

-

```
table goods:

   g_id g_name  g_class
    1   sugar  food
    2   salt   food
    3   boat   transp
    4   house  habitation
    5   car    transp 
```

-

```
 table goods_owned:
      go_id person_id   good_id
        1   3           3
        2   3           1
        3   3           5
        4   2           4
        5   1           2 
```

现在当我选择

```
SELCT people.id, people.name, goods.name
   FROM people
      LEFT JOIN goods_owned ON goods_owned.person_id = people.id
      LEFT JOIN goods ON goods.g_id = goods_owned.good_id
         WHERE people.id = 3 
```

然后作为响应，它复制表“人”中的条目：

```
1, Mike, boat
1, Mike, sugar
1, Mike, car 
```

有没有办法建立请求以获得：

```
1, Mike, boat, sugar, car 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T01:03:34.390

是的，看看[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)，它收集了每个值的所有值`GROUP BY`并用逗号分隔它们。

```
SELCT people.id, people.name, GROUP_CONCAT(goods.name)
FROM people
LEFT JOIN goods_owned ON goods_owned.person_id = people.id
LEFT JOIN goods ON goods.g_id = goods_owned.good_id
WHERE people.id = 3
GROUP BY people.id 
```

# r - 如何为 knitr markdown 文档设置 cache=FALSE 并覆盖代码块设置？

> ID：10628665
> 
> 赞同：24
> 
> 时间：2012-05-17T00:59:16.620
> 
> 标签：r, knitr

我知道我可以使用`cache=TRUE`选项来缓存 R 代码块，使用 R Markdown 和`knitr`. 例如，它可能看起来像这样：

```
```{r longanalysis, cache=TRUE}
for (i in 1:5000) {
    lm((i+1)~i)
}
``` 
```

而且我意识到，如果我想为该分析禁用缓存，我可以`cache=FALSE`在代码块中更改选项。但是，如果我有许多启用了缓存的 R 代码块，则需要仔细查找和替换操作。

### 问题

*   **有没有办法临时设置`cache=FALSE`整个 R Markdown 文档？**

### 评论

我已经看到了第一行所在的[这个例子。](https://github.com/yihui/knitr/blob/master/inst/examples/knitr-minimal.Rmd)所以我想这是一种设置全局设置的方式，但我认为本地设置会覆盖全局设置。

```
`r opts_chunk$set(fig.width=5, fig.height=5, fig.path='')` 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-17T01:13:59.543

似乎默认设置为 FALSE 并且本地块选项会覆盖全局选项，但您可以做的一件事是通过将其添加到文档顶部来将全局选项设置为默认缓存

```
`r opts_chunk$set(cache=TRUE)` 
```

然后，对于您不希望缓存的部分，您可以将这些部分显式设置为 cache=FALSE。

然后，如果您想将整个文档设置为不缓存任何内容，您可以将全局选项更改为 FALSE 并重新运行它。

问题是，如果任何块选项设置为 cache=TRUE，那么这些选项将覆盖全局设置，并且如果您将全局选项设置为 FALSE，则不会重新运行。所以我认为实现你想要的唯一方法是将默认值更改为cache = TRUE，明确设置你不希望缓存的块有cache = FALSE，然后你可以将全局选项切换为FALSE来做什么你想要的时候发生。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-17T02:26:28.170

### 删除缓存选项

`knitr`创建一个目录来存储缓存的对象。默认情况下，它被称为`cache`. 为了确保无论代码块`cache`设置如何都运行所有分析，只需**删除缓存目录的内容**。

因此，在 Linux 上的 Rstudio

1.  转到菜单`Tools - Shell`以在包含降价文件的工作目录中打开控制台。
2.  输入命令`rm cache/*`

### 基本工作流程

这是我目前的基本工作流程

*   如果编织很快（例如，少于 10 秒），则不要缓存。
*   如果编织需要一段时间（例如，超过 10 秒），请添加``r opts_chunk$set(cache=TRUE)``到 R Markdown 文件。
*   如果缓存导致问题并且编织相对较快（例如，不到几分钟），请删除整个缓存。
*   如果缓存导致问题并且编织需要很长时间（例如，几分钟或几小时），请命名 R 代码块并使用[`dependson`knitr 中的选项](http://yihui.name/knitr/options)。命名还允许选择性地删除缓存目录中命名的 R 代码块。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-12T12:18:36.980

一旦您已经创建了文档就太晚了，但是对于未来的文档，您可能需要考虑使用参数由`knitr`. 这意味着您可以拥有以下内容：

```
```{r data.loading.chunk1, cache = cachedata}
blah blah
```
blah blah

```{r model.fitting.chunk1, cache = cachemodels}
blah blah
``` 
```

然后在文档的顶部，我有类似的内容：

```
```{r libraries.etc, echo=FALSE, results='hide', message=FALSE}
cachedata = TRUE
cachemodels = TRUE
``` 
```

然后，您可以一次快速关闭大量块的缓存。

# javascript - 如何在 Internet Explorer 中暂停 JavaScript 执行？

> ID：10628666
> 
> 赞同：18
> 
> 时间：2012-05-17T01:00:24.260
> 
> 标签：javascript, internet-explorer, debugging, iframe, browser

我有以下情况：

*   主页
*   嵌套页面
*   通用 JS 文件（包含在两个页面中）

随后将嵌套页面加载到主页面的 iframe 中。两个页面都在页面加载时从公共 JS 文件中调用一个函数。

**现场演示： http:**
[//www.ecmazing.com/misc/pause-execution/mainpage.html](http://www.ecmazing.com/misc/pause-execution/mainpage.html)
[http://www.ecmazing.com/misc/pause-execution/nestedpage.html](http://www.ecmazing.com/misc/pause-execution/nestedpage.html)
[http://www.ecmazing.com /misc/暂停执行/common.js](http://www.ecmazing.com/misc/pause-execution/common.js)

公共 JS 文件包含一个将 H1 元素涂成红色的全局函数。我想在该函数的开头暂停执行，以便在 H1 元素仍为黑色时暂停执行。

## 如何在主页上做到这一点：

这是微不足道的。只需加载页面，打开浏览器的开发工具，选择common.js文件，在函数的第一行设置断点即可。现在，**重新加载**页面。断点将**持续**重新加载，并暂停执行。

## 如何在嵌套页面上执行此操作：

现在，在 Chrome 和 Firefox (Firebug) 中，上面设置的断点（用于主页）也适用于嵌套页面。两个页面使用相同的 JS 文件，在该文件中设置断点将自动适用于两个页面。不幸的是，这条规则不适用于 IE。

更糟糕的是，即使我随后设置断点，然后**仅重新加载 iframe**，断点也**不会**持续存在。

所以，我不知道如何暂停 IE 中嵌套页面的执行。可以做到吗？（我通过`debugger;`在函数开头手动设置 a 来处理这个问题，但如果可能的话，我希望能够通过 IE 中的开发工具设置断点。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T11:53:33.023

我能找到的最接近的解决方案是在主页上的 loadIFrame() 函数中设置断点，然后“介入”直到加载嵌套页面的 Common.js 文件。在一个更复杂的示例中，您将能够在新的 Common.js 文件中设置断点，并且它们将正常工作，直到下次加载 iframe 时，它​​们将再次丢失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T03:43:29.833

我没有要测试的 IE9，但也许您可以将`common.js`文件视为 iframe 页面的单独资产？我相信这就是它在其他浏览器中工作的原因，因为这些文件必须由浏览器以某种方式***标记或标记。***

一个示例是附加到iframe 页面`?iframePage`的末尾。`common.js`至少在 Firefox 中显示了一个加载为`common.js?iframePage`. 浏览器会忽略查询字符串之后的所有内容，否则会使用该***确切***名称加载 JavaScript。

另一个例子是复制`common.js`并重命名它`commonClone.js`，然后用于 iframe 页面。

**任一示例都可能允许您在 IE9 中设置两次**断点，每个资产设置一次。

也就是说，没有什么能阻止您只创建独立于**父页面**正在使用的文件的**iframe 断点**。这种方法，我们称之为**并行断点**，允许异步调试 JavaScript，因为**iframe 页面**和**父页面**正在独立处理 JavaScript，但可能会协同工作。`common.js`

 ******此方法的参考来自**官方源**MSDN 库：**使用 F12 开发人员工具调试 JavaScript 错误**部分**[管理断点](http://msdn.microsoft.com/en-us/library/gg699336%28v=vs.85%29.aspx#managingbreakpoints)**显示如何在多个 JavaScript 文件上执行断点。

根据IE9 开发者论坛[最近的一篇论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/db6bba96-d590-4e56-b33d-991581671bae/)，在用于调试时防止重新加载 JavaScript 文件的解决方案是使用**内联事件处理程序**而不是**attachEvent**，如下例所示：

```
replace (or comment it out)

$(document).onload(function(){ mycustomonload functions});

with

<body onload="mycustomonload functions"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T04:40:35.267

我希望你至少在使用 IE Debuggy Bar。使用此代码更新您的 common.js 文件

```
function func () {
    if(typeof window.parent.debug !== "undefined"){
        window.parent.debug();
    }
    document.getElementsByTagName( 'h1')[0].style.color = 'red';
}

function debug(){
    var a = "break here";
} 
```

`var a = "break here";`在主页加载后设置断点。当您点击 Load Iframe 按钮时，js 将在该行停止。使用调用堆栈导航到上一个 javascript 指令（行），该指令应位于 nestedpage.html 中的 common.js 文件中。现在设置另一个断点，然后在调试器中点击继续，或使用 STEP 功能

== 更新 ===

顺便说一句，要回答您的问题，为什么断点不能在 iframe 中保留，请这样想。每次单击“加载 IFrame”按钮时，`window`对象的旧实例都会放置在内存中，并且所有断点都将使用新的 common.js 实例创建新的。如果你打电话也会发生同样的情况`windows.open("http://......");`

还要记住，即使您在两者中都加载了相同的文件`window(s)`，它也会在浏览器的两个不同执行框架中加载。您可以运行同一浏览器的两个浏览器实例，但它们不会在窗口中显示相同的页面。但是，有些东西是共享的，比如 cookie，但这超出了本主题的范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T07:39:37.067

也许，如果您可以重组您的 Html 和 JavaScript 代码，您只能`common.js`从父页面引用，并使主页面和嵌套页面都使用相同的 JavaScript 函数。

这样一个断点就可以满足两种情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T12:42:59.290

要在 IE 中调试 iframe，并能够设置和保留断点，您可以在其自己的 ie 选项卡/窗口中打开 iframe 地址。但是，如果 iframe 与其父级通信，这是不可能的/直截了当的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-20T13:45:10.470

如果您这样做只是为了进行兼容性测试，那么您是否尝试过使用适用于 Chrome 的[IETab 插件？](http://www.ietab.net/)

这模拟了 IE 的渲染引擎，同时允许您使用 Chrome 调试器。

如果这还不够好，那么我认为您已经陷入僵局，IE 开发工具还不够复杂。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-26T12:48:38.623

您可以使用 setTimeout() 在特定时间暂停 javascript...******

# java - 生成大量字母以供将来操作的最佳方式

> ID：10628675
> 
> 赞同：1
> 
> 时间：2012-05-17T01:01:52.620
> 
> 标签：java, memory, text, random, bit

我正在尝试生成 40 亿个随机字符实例，范围从 AH 开始，然后将它们全部存储到 Java 中的文本文件中。我尝试了迭代的基线方法，直到计数器达到 4B，但我发现它总是会导致内存问题。

我想知道将字母存储为位而不是将它们的原始值存储为字符是否会更节省内存。如下所示：

```
A <- 000, B <- 001, C <- 010, D <- 011, E <- 100, F <- 101, G <- 110, H <- 111 
```

如果是这样，我将如何去做？

* * *

展望未来，一旦我有一个包含所有这些随机生成的字母的文本文件，打开 txt 文件进行进一步修改的最佳方法是什么？例如替换或附加一些字符。我查看了 Java 的教程并认为随机访问文件可以解决问题，但是有更好的选择吗？

我应该每 n 个字母在字符串中添加一个换行符以允许读取换行符函数停止点吗？

我想简明扼要地说明我的问题，如下：如何有效地将 40 亿个随机有限字母（不是全部 26 个）生成到文本文件中，以便也可以读取和修改以供将来使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:09:38.823

首先，如果要优化存储，请使用`byte`type。您无需更改任何内容，因为 byte 可以将字母存储为其原始值。

对原始保存做的最好的事情是生成一个`FileOutputStream`“页面”，例如每 100 兆字节写入一次。

对于进一步的文件实现，`RandomAccessFile`可以。我认为添加新行不会有任何好处，因为您已经知道文件中每个“信息单元”的长度，添加新行只会复制存储空间。

希望我能说清楚（并且有意义）:)

告诉我进展如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T02:05:01.753

所以你可以在 3 位中保存 8 个不同的值，没错。因此，您可以在一个字节中存储 2x3 位，或者在 24/8=3 字节中存储 8x3 位，而将它们存储为字符仅意味着 24 位中的 3 个字符“A”-“H”。

这节省了 8/3，所以 15 亿字节就可以了。然而，做一个简短的例子假设你必须存储一个不能被 8 整除的序列，那么你的代码中会有一些未使用的字节：

您保存 BA，即 001 000，并且必须将字节填充到 0010:0000。你如何区分它和B？B 只是 001，所以填满了，它也是 0010:0000。

行。对于文件长度为 1.5 GB 的文件，您总是可以附加一个字节，它会告诉您最后一个字节要使用多少位。在上面的示例中，您将一次追加 6，一次追加 3。

但是现在，如果你必须插入一些东西。您始终在二进制序列中移动 3 位，但如果有一个非 8 位禁用插入，您不能只读取以下字节，并将它们附加到您的比特流中，但您必须转置以下每个字节：cut将其分成 2 个和平，将第一部分附加到您的溢出中，并将第二部分保留为下一个字节的溢出。

实现可能不会太棘手 - 但我不知道运行时会如何受到影响。

也许统计分析可以提供帮助。多久添加一次字符，添加多少。多久插入一次什么尺寸？

也许将文件组织成块会更容易 - 可能是 1000 个 2MB 的文件，每个文件都包含一个要附加的空闲缓冲区。最后一个字节可以指定文件中有多少字节被视为内容。

如何指定数据的插入？会是“在位置 2 713 345 947 插入序列“AHA”吗？还是会“插入在“FACHDAG”“BACH”的第三个序列之后？是否存在典型的、经常重复的序列，如自然语言中的单词？

在第一种情况下，外部索引可能非常有用。如果您可以查找，在 1000 个文件中，位置 2,713,345,947 位于哪个文件中，并且平均跳过读取 1.5G 的 50% 的必要性可以大大提高您的速度。

但是您需要进行统计分析：文件会增长还是或多或少保持相同的大小。它的阅读和写作频率。是更新插入、追加、删除。

# c++ - 内部和外部结构的符号冲突，C++ vs C

> ID：10628679
> 
> 赞同：1
> 
> 时间：2012-05-17T01:02:07.797
> 
> 标签：c++, c

因此，假设我有以下 C++ 标头`testheader.h`：

```
struct mystruct
{
  struct myinnerstruct
  {
        int x;
  } astruct;
};

struct myinnerstruct
{
    int x;
}; 
```

以及以下 C++ 源代码`test.cpp`：

```
#include "testheader.h"
using namespace std;
int main()
{
    return 0;
} 
```

g++ 在编译/链接期间没有给出任何问题。

现在，如果我有相同的头文件，但不是 C++ 源代码，而是一个 C 源文件`test.c`：

```
#include "testheader.h"
int main()
{
  return 0;
} 
```

我用 gcc 编译，我得到以下错误：

```
error: redefinition of struct myinnerstruct 
```

那么，我认为 C 版本的范围是翻译单元，而 C++ 版本是块范围？有人可以确认是这种情况吗，也许给我一个为什么它有意义的理由？我正在混合 C 和 C++ 代码，这给我带来了很多麻烦。

非常感谢任何见解。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:14:00.270

在 C 中，嵌套结构实际上并不存在于它们的父范围内。但是在 C++ 中，它们`teststruct::innerstruct`确实是与`innerstruct`. 这是为了改进 C++ 代码中的封装。例如，如果没有这条规则，同一个命名空间中的两种类型都不能定义一个嵌套`iterator`类，这将是非常糟糕的。

C 以许多其他非常愚蠢的方式处理结构，因此他们在这里做错事也就不足为奇了。然而，C 不允许类型作用域，并且在这里有一个理智的规则会为语言引入许多额外的概念——最终，它需要引入`namespace`s，由于某种原因从未这样做过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T01:20:19.227

在 C 中，内部结构的定义在外部结构之外，而在 C++ 中并非如此。

这已在此博客中进行了解释：[ISO C 和 ISO C++ 之间的不兼容性以及 C 与 C++](http://david.tribble.com/text/cdiffs.htm#C99-nested-struct)*中* 的许多其他内容，并参考了 C99 和 c++98 ISO 标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T01:09:01.597

C 中没有作用域，所以一切都在“全局”命名空间中（用 C++ 说话）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T01:17:54.670

在 bot C 和 C++ 中工作的更简洁的方法是：

```
struct myinnerstruct
{
    int x;
};

struct mystruct
{
  struct myinnerstruct astruct;
}; 
```

# facebook - 如何获取 Facebook 页面分析数据

> ID：10628683
> 
> 赞同：0
> 
> 时间：2012-05-17T01:02:30.127
> 
> 标签：facebook, facebook-fql, analytics, facebook-page, facebook-insights

我需要访问给定日期范围内的 Facebook 页面分析数据，如下所示的公共页面，而无需访问页面洞察力。

使用 FQL，我只能使用页面 id 获得今天的粉丝数。

选择名称、粉丝数、描述 FROM page WHERE page_id=xxxxxxxxx

Fql 查询或 php 代码会有所帮助。

本报告[https://app.simplymeasured.com/viewer/h9p8rvrec5qwfsqjig2rrc6nwcuxq6ic6ykvewkd/455130](https://app.simplymeasured.com/viewer/h9p8rvrec5qwfsqjig2rrc6nwcuxq6ic6ykvewkd/455130)

或者像这样的更简单的报告。

[http://www.zuumsocial.com/sites/all/themes/sooper_synopsis/custom/images/hp/screen-leaderboard.png](http://www.zuumsocial.com/sites/all/themes/sooper_synopsis/custom/images/hp/screen-leaderboard.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:22:32.937

API 支持您自己的页面和应用程序的历史数据，并且有[明确的记录](http://developers.facebook.com/docs/insights)

获得`read_insights` [权限](https://developers.facebook.com/docs/authentication/permissions/)后，您可以使用 Graph API 或 FQL 执行此操作

例如，要检索上个月每一天的点赞数，此 Graph API 洞察查询将显示结果：

`/[PAGE ID HERE]/insights/page_fans/lifetime?since=1 month ago`

我的一个页面的结果是：

```
{
  "data": [
    {
      "id": "255463667838002/insights/page_fans/lifetime", 
      "name": "page_fans", 
      "period": "lifetime", 
      "values": [
        {
          "value": 52, 
          "end_time": "2012-05-21T07:00:00+0000"
        }, 
        {
          "value": 52, 
          "end_time": "2012-05-22T07:00:00+0000"
        }, 
        {
          "value": 53, 
          "end_time": "2012-05-23T07:00:00+0000"
        }, 
        {
          "value": 53, 
          "end_time": "2012-05-24T07:00:00+0000"
        }, 
        {
          "value": 53, 
          "end_time": "2012-05-25T07:00:00+0000"
        }, 
        {
          "value": 53, 
          "end_time": "2012-05-26T07:00:00+0000"
        }, 
// Snipped more of the same
      ], 
      "title": "Lifetime Total Likes", 
      "description": "Lifetime The total number of people who have liked your Page. (Unique Users)"
    } 
```

如果您询问其他人的页面或应用程序，答案是否定的 - 您需要使用在信息公开时已经缓存信息的第三方服务（即投票服务）

# c# - 通过客户端应用程序保护 SQL Server 连接（如何保护逆向工程）

> ID：10628687
> 
> 赞同：0
> 
> 时间：2012-05-17T01:03:23.430
> 
> 标签：c#, sql-server-2008, encryption

我的要求是应用程序安装过程的一部分包括需要 SA 权限的数据库设置和更新，但安装的 windows 用户将没有该密码。

因此，我们的想法是使用嵌入 sa 密码并执行所有必需操作的安装程序应用程序。这将通过要求密码来进一步保护，以基于某种算法启动安装程序，使其每天都独一无二。

现在，我担心的是（根据我现在所拥有的知识）反映 .net 应用程序很容易找出 sa 密码。所以，问题是我如何保护它。混淆是肯定的，但从来没有那么好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:28:38.387

您*可以*进入应用程序的加密部分以隐藏秘密值 - 但如果您的应用程序能够解密它，您也需要将密钥存储在应用程序中。

DVD 播放器就是一个很好的例子——DVD 是使用称为[Content Scramble System](http://en.wikipedia.org/wiki/Content_Scramble_System)的系统加密的，每个 DVD 播放器制造商都在播放器本身上嵌入了一个能够解密 DVD 的密钥。

但问题是——如果最终用户的机器能够运行您的代码，那么您就无法真正阻止他们访问密钥。对于某人来说，弄清楚您究竟是如何混淆了这一点只是时间和精力的问题。[只需询问DeCSS 应用程序](http://en.wikipedia.org/wiki/DeCSS)的开发者“DVD Jon”即可。

如果您想确保信息的安全性，请不要将该信息放在用户可以访问的地方。将数据库托管在其他地方，并为功能有限的用户提供凭据。
要么，要么接受用户将能够绕过安全性的事实，并为此做好计划（例如：不做任何本地重要的事情）。

# iphone - 如何取消在 UIWebView 中发出的请求？

> ID：10628688
> 
> 赞同：3
> 
> 时间：2012-05-17T01:03:24.897
> 
> 标签：iphone, ios, uiwebview

由于一个[问题](https://stackoverflow.com/questions/10628409/uiwebview-why-does-the-request-not-time-out-when-using-a-non-existant-hostname)，我无法`NSURLRequest`在我的 . 如果我没有，那么我想取消请求并警告用户。`UIWebView``NSTimer`

但是：我无法找到一种方法来取消在`UIWebView`.

你怎么做呢？

我已将请求设置`UIWebView`如下：

```
NSString *theURL = [NSString stringWithFormat:@"https://%@%@", _hostname, LOGIN_PART_URL];
NSString *body = [NSString stringWithFormat:@"Username=%@&Password=%@", _username, _password];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:theURL] 
                                                           cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                       timeoutInterval:_timeoutInSecs];

[request setHTTPMethod: @"POST"];
[request setHTTPBody: [body dataUsingEncoding: NSUTF8StringEncoding]];

[web loadRequest:request]; 
```

我可以看到它`NSURLConnection`有一个取消方法，但似乎没有对应的`UIWebView`.

我错过了什么？

谢谢！拉紧 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T01:09:49.260

课堂上有一个`stopLoading`方法`UIWebView`。是否满足您的需求？

每[`UIWebView`类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/stopLoading)：

> **停止加载**
> 
> 停止加载由接收器管理的任何 Web 内容。
> 
> `- (void)stopLoading`
> 
> 停止由主框架或其任何子框架加载过程中的任何内容。如果没有加载任何内容，则不执行任何操作。

# dbpedia - 用于 wiki 门户的 dbpedia 资源

> ID：10628692
> 
> 赞同：0
> 
> 时间：2012-05-17T01:03:54.683
> 
> 标签：dbpedia

我有两个问题：

[1) http://en.wikipedia.org/wiki/Portal:Current_events/Sports](http://en.wikipedia.org/wiki/Portal:Current_events/Sports)对应的 dbpedia 资源是什么

2）我将来如何自己找到这些信息。我知道对于常规的 wiki 文章，我只需要为资源创建一个下划线字符串。我不知道如何在上面的链接中为“门户”做这件事

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T21:12:55.673

获取 Wikipedia URI 的 DBpedia URI 的一般模式非常简单：替换`/wiki/`为`/resource/`和`.wikipedia.org`by `.dbpedia.org`，除了英语替换`en.wikipedia.org`为`dbpedia.org`。

例子：

`http://it.wikipedia.org/wiki/Berlino`-> `http://it.dbpedia.org/resource/Berlino` `http://en.wikipedia.org/wiki/Berlin`->`http://dbpedia.org/resource/Berlin`

（请注意，RDF 中 IRI 和 URI 之间的区别增加了一点复杂性，但这是针对不同的问题......）

`Category:`DBpedia 只为一些 Wikipedia 命名空间生成 URI——我认为目前只为主要文章命名空间和命名空间生成 URI 。URI`Portal:`和其他名称空间仅作为链接的目标出现（在 page_links_en.nt 等文件中）。如果提取了这样的 DBpedia URI，它们看起来与其他的非常相似。在您的示例中，DBpedia URI 将是

`http://dbpedia.org/resource/Portal:Current_events/Sports`

但是，为 Wikipedia 门户提供链接数据 URI 是否有意义？我不知道。从这些页面中提取的数据似乎不多。而且它们似乎不适合关联数据资源 URI。这样的 URI 通常代表现实世界中的*事物*。或者也许不是那么真实，但仍然是一件事......

# java - 精灵只是可见而不是完全消失

> ID：10628698
> 
> 赞同：0
> 
> 时间：2012-05-17T01:05:31.360
> 
> 标签：java, android, sprite, andengine

我用andengine做了一个游戏。

有很多球从 A 点移动到 B 点。

当我触摸它时，球从屏幕上消失了，分数增加了10分。但是，如果我触摸了球（通过从移动路径猜测它的位置，因为我再也看不到它了），分数仍然会增加。换句话说，球只是变得不可见，但它仍然存在。

我想做一个`unregisterTouchArea()`取消注册球的触摸区域。

但我不知道我能做什么，你有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:44:31.760

正如您所说，您必须取消注册TouchArea 和 setVisible(false) 或 detachChild：

```
mScene.unregisterTouchArea(mBall);
mScene.detachChild(mBall); 
```

# c# - .net 运算符重载

> ID：10628699
> 
> 赞同：0
> 
> 时间：2012-05-17T01:06:20.283
> 
> 标签：c#, .net, overloading, operator-keyword

为什么某些运算符需要它，例如比较运算符。

```
<   <=   >   >=   =  <> 
```

您还必须实施他们的补充吗？

```
<  >= 
```

什么是限制你的对象实现只是

```
< 
```

如果这对它有特定的含义，并且

```
>= 
```

没有

**注意：**我的解决方法是将 Obsolete 属性粘贴在不需要的运算符上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T01:21:54.670

.Net 中的运算符重载（至少对于 C# 和 VB 而言）故意不如 C++ 中的运算符重载灵活。

*Java*完全消除重载的一个原因是太多的开发人员滥用重载来做一些看起来很聪明的事情，这会使其他开发人员感到困惑，并破坏了通用算法的核心假设，即期望能够合理地比较两个实例一种用户类型。

虽然 .Net 带来了一些灵活性，但设计者小心翼翼地只允许某些运算符的重载，目的是让它们仅用于其习惯含义。

对称实现比较运算符的要求是对这一意图的认可。

如果您想进行更积极的运算符重载，我建议您考虑使用 F#，您可以在其中访问更广泛的符号调色板来绘制巧妙的运算符符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:21:06.123

大概是因为如果您重载运算符的一侧，您正在实现一些自定义规则，并且默认运算符将与您的规则不匹配，从而产生奇怪的行为。

例如，如果您对“int >”的定义是“return (x > 5);” （出于某种原因......）然后你没有覆盖'int <'运算符的逆规则;

4 > 1 将是错误的（根据您的规则），但 4 < 1*也*将是错误的（根据默认规则）。

这是不合逻辑的，吉姆。

# batch-file - 08 小于 1，但 07 在 DOS/Batch 中大于 1。为什么？

> ID：10628700
> 
> 赞同：2
> 
> 时间：2012-05-17T01:06:33.723
> 
> 标签：batch-file, numbers, comparison, dos

在 DOS/批处理中，

```
if 08 lss 1 echo true 
```

呼应“真实”。这同样适用于 09。08 和 09 都小于 1。

然而，

```
if 07 lss 1 echo true 
```

不回显任何东西。01 到 07 不小于 1。

为什么？08和09有什么特别之处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T01:49:48.047

扩展 sarnold 和 David Schwartz 已经提供的答案......

我从未见过任何说明 IF 支持八进制或十六进制数字表示法的文档。但是您的问题促使我进行了一些测试，并且确实它确实支持 SET /A 支持的相同数字符号。

*   任何不以 0 开头的数字 [0-9] 都被解释为十进制。
*   任何以 0 为前缀的数字 [0-7] 都被解释为八进制。
*   任何以 0x 或 0X 为前缀的数字 [0-9,AF,af] 都被解释为十六进制。

任何不满足上述 3 个数字符号中的任何一个的字符集都被视为字符串。

如果比较的两边都是有效数字，则进行数字比较。

如果任一侧不是有效数字，则进行字符串比较。

07 是有效的八进制表示法，十进制值为 7，且不小于 1。

08 和 09 以 0 为前缀，但不是有效的八进制表示法，因此进行了字符串比较。任何以 0 开头的字符串都将排序为小于以 1 开头的字符串。

一些有趣的测试来确认支持八进制和十六进制表示法。

```
if 0xA equ 10 echo ok
if 011 equ 9 echo ok 
```

有点有趣的是，SET /A 语句中的无效八进制或十六进制表示法会引发错误。但是 IF 语句中的无效八进制或十六进制表示法不会引发错误。它只是强制进行字符串比较。

***更新***

有效数字前面可以带有符号指示符：- 或 +

```
if +0xA equ +10 echo ok
if -011 equ -9 echo ok 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:10:55.673

08 和 09 是非法的。在八进制中，7 是最高的合法数字。零的前导数字表示以八进制表示的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T01:11:29.887

通常，前导`0`表示您希望将数字解析为[octal](http://en.wikipedia.org/wiki/Octal)。我期望`08`或`09`实际上是一个*错误条件*；也许批处理语言没有一个好的机制来表示输入不正确？

# javascript - JavaScript 根据日期更改表行类

> ID：10628701
> 
> 赞同：2
> 
> 时间：2012-05-17T01:06:42.327
> 
> 标签：javascript, css, dom, date, if-statement

我正在一个小网站上工作，该网站为我大学的一个系提供一些资源。一切都很顺利，所以我尝试添加一些功能以使事情更直观。

如果您想查看完整的 HTML 结构和其他所有内容，请查看相关页面：{链接已删除以保护个人内容}

基本上，这是一张桌子，上面有一排专门用于我们今年夏天负责的每个营地。这一切都很好，花花公子。现在，我想要做的是突出显示当前正在会话中的任何营地的行（通过将“活动”类添加到行中）。鉴于我在 JavaScript 方面的经验相当有限，这就是我想出的：

```
<script type="text/javascript" >
$(document).ready(function() {
    var today = new Date();

    var Traffic_Court_Start = new Date("May 31 2012 12:01 AM");
    var Traffic_Court_Stop = new Date("June 1 2012 11:59 PM");
    var Summer_Enrichment_Start = new Date("June 10 2012 12:01 AM");
    var Summer_Enrichment_Stop = new Date("June 16 2012 11:59 PM");
    var Wbb_Ind_Start = new Date("June 11 2012 12:01 AM");
    var Wbb_ind_Stop = new Date("June 14 2012 11:59 PM");
    var Soccer_Referee_Start = new Date("June 15 2012 12:01 AM");
    var Soccer_Referee_Stop = new Date("June 16 2012 11:59 PM");
    var Broadcast_Start = new Date("June 17 2012 12:01 AM");
    var Broadcast_Stop = new Date("June 21 2012 11:59 PM");
    var Tennis_1_Start = new Date("June 17 2012 12:01 AM");
    var Tennis_1_Stop = new Date("June 21 2012 11:59 PM");
    var Tennis_2_Start = new Date("June 24 2012 12:01 AM");
    var Tennis_2_Stop = new Date("June 28 2012 11:59 PM");
    var Volleyball_Start = new Date("July 8 2012 12:01 AM");
    var Volleyball_Stop = new Date("July 11 2012 11:59 PM");
    var Soccer_1_Start = new Date("July 8 2012 12:01 AM");
    var Soccer_1_Stop = new Date("July 12 2012 11:59 PM");
    var IACAC_Start = new Date("July 9 2012 12:01 AM");
    var IACAC_Stop = new Date("July 11 2012 11:59 PM");
    var Summer_Forensics_Start = new Date("July 15 2012 12:01 AM");
    var Summer_Forensics_Stop = new Date("July 28 2012 11:59 PM");
    var Soccer_2_Start = new Date("July 22 2012 12:01 AM");
    var Soccer_2_Stop = new Date("July 26 2012 11:59 PM");
    var Cross_Country_Start = new Date("July 25 2012 12:01 AM");
    var Cross_Country_Stop = new Date("July 28 2012 11:59 PM");

    if((today <= Traffic_Court_Stop && today >= Traffic_Court_Start))
        {
            document.getElementById('traffic_court').classList.add('active');
        };

    if((today <= Summer_Enrichment_Stop && today >= Summer_Enrichment_Start))
        {
            document.getElementById('summer_enrichment').classList.add('active');
        };

    if((today <= Wbb_Ind_Stop && today >= Wbb_Ind_Start))
        {
            document.getElementById('wbb_ind').classList.add('active');
        };

    if((today <= Soccer_Referee_Stop && today >= Soccer_Referee_Start))
        {
            document.getElementById('soccer_referee').classList.add('active');
        };

    if((today <= Broadcast_Stop && today >= Broadcast_Start))
        {
            document.getElementById('broadcast').classList.add('active');
        };

    if((today <= Tennis_1_Stop && today >= Tennis_1_Start))
        {
            document.getElementById('tennis_1').classList.add('active');
        };

    if((today <= Tennis_2_Stop && today >= Tennis_2_Start))
        {
            document.getElementById('tennis_2').classList.add('active');
        };

    if((today <= Volleyball_Stop && today >= Volleyball_Start))
        {
            document.getElementById('volleyball').classList.add('active');
        };

    if((today <= Soccer_1_Stop && today >= Soccer_1_Start))
        {
            document.getElementById('soccer_1').classList.add('active');
        };

    if((today <= IACAC_Stop && today >= IACAC_Start))
        {
            document.getElementById('IACAC').classList.add('active');
        };

    if((today <= Summer_Forensics_Stop && today >= Summer_Forensics_Start))
        {
            document.getElementById('summer_forensics').classList.add('active');
        };

    if((today <= Soccer_2_Stop && today >= Soccer_2_Start))
        {
            document.getElementById('soccer_2').classList.add('active');
        };

    if((today <= Cross_Country_Stop && today >= Cross_Country_Start))
        {
            document.getElementById('cross_country').classList.add('active');
        };
});
</script> 
```

如您所见，我首先获取今天的日期，然后指定每个营地的开始和结束日期。然后，我使用一堆 if 语句来确定“今天”是否介于每个训练营的开始日期和结束日期之间。如果这是真的，它会将“活动”类添加到与该营地相对应的行中。

前两个阵营似乎工作正常……也就是说，如果我将“今天”的值更改为 5 月 31 日，它会突出显示第一行。或者，如果我将其更改为 6 月 15 日，它会突出显示第二行。问题是，如果“今天”是 6 月 15 日，它应该突出显示 summer_enrichment 和 football_referee 行。它仅突出显示 summer_enrichment 行。

我已经仔细检查了我引用的元素 ID、我的变量的拼写等，一切看起来都是正确的（除非我错过了一些明显的东西）。我有什么理由不能使用我介绍的脚本吗？我不认为是这种情况，但是像这样连续使用这么多 if 语句有问题吗？我唯一的想法是，也许它认为它们是一堆其他情况，但我想我会在每个 if 语句后用分号来逃避它。

有什么想法吗？也许有更好的方法来做到这一点？我环顾四周寻找一些答案，但似乎在其他任何地方都找不到类似的东西（尽管我确信这已经完成并且实施得更好）。

感谢您的帮助！！！

编辑：在其中一些回复的帮助下让一切正常工作后，我想我会为可能偶然发现这个问题的未来用户分享最终代码。

```
<script type="text/javascript">
$(document).ready(function() {
    var today = new Date();

    var SCHEDULE = {
        'tc': ['May 31 2012', 'June 1 2012'],
        'se': ['June 10 2012', 'June 16 2012'],
        'wbb': ['June 11 2012', 'June 14 2012'],
        'sr': ['June 15 2012', 'June 16 2012'],
        'broadcast': ['June 17 2012', 'June 21 2012'],
        'ten1': ['June 17 2012', 'June 21 2012'],
        'ten2': ['June 24 2012', 'June 28 2012'],
        'volleyball': ['July 8 2012', 'July 11 2012'],
        'soc1': ['July 8 2012', 'July 12 2012'],
        'iacac': ['July 9 2012', 'July 11 2012'],
        'sf': ['July 15 2012', 'July 28 2012'],
        'soc2': ['July 22 2012', 'July 26 2012'],
        'cc': ['July 25 2012', 'July 28 2012']
    };

    for (var camp in SCHEDULE) {
    console.log('checking ' + camp + ', dates have to be within the ' + SCHEDULE[camp] + ' range');
    //console.log(Date.parse(SCHEDULE[camp][0]));
        if (today >= Date.parse(SCHEDULE[camp][0]) && today <= Date.parse(SCHEDULE[camp][1])) {
            console.log(camp + ' is currently in session!');
            document.getElementById(camp).classList.add('active'); 
        };
    };
});
</script> 
```

非常感谢大家！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:05:29.453

我建议在服务器端完成逻辑，以便未突出显示的内容不会“闪烁”以及性能的边际改进。无论客户端的时间设置如何，一个可以说更重要的改进将是一致的渲染。

虽然我***强烈***主张上述内容，但 JS 解决方案也可以制作成更易于维护的东西。构造您的代码以包含一个可重用的函数，以根据范围检查日期并应用一个类并规范化日期引用的存储方式：

```
var TODAY = new Date();

//Individual dates could be organized as objects,
//but using arrays below seems to be more readable and tidy
var SCHEDULE = {
    'some-class': ['May 5 2011', 'June 5 2011'],
    'some-class-a': ['May 5 2012', 'June 5 2012'],
    'some-class-b': ['May 10 2012', 'June 10 2012'],
    'some-class-c': ['May 15 2012', 'June 15 2012'],
    'some-class-d': ['May 20 2012', 'June 20 2012'],
    'some-class-e': ['May 25 2012', 'June 25 2012']
};

for (var camp_ in SCHEDULE) {
    if (TODAY >= Date.parse(SCHEDULE[camp_][0]) && TODAY <= Date.parse(SCHEDULE[camp_][1])) {
        document.getElementById(camp_).classList.add('active');
    }
} 
```

在这里工作小提琴：http: [//jsfiddle.net/ovfiddle/bMBcq/](http://jsfiddle.net/ovfiddle/bMBcq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:55:11.353

评论：

在您的代码中：

```
> var Traffic_Court_Start = new Date("May 31 2012 12:01 AM"); 
```

取决于区域设置了解该日期字符串格式。日期的解析取决于实现，没有理由相信美国特定的格式适用于所有地区的所有浏览器。唯一指定的格式是 ES5 中的 ISO8601，并非所有浏览器都支持。早期的 ECMAScript ed 3 中根本没有指定格式。

此外，上面在客户端的本地时区中创建了一个日期对象，因此具有不同时区设置的两个客户端（例如一个具有夏令时，一个没有）会将其解析为两个不同的时间。

如果您必须在客户端上处理日期，最好在 UTC 中执行所有操作并仅在必要时转换为本地日期对象。此外，请与用户确认您的代码正确（例如，根据系统设置显示您认为当前日期和时间，这可能是错误的或与其当前位置不同步）。

[使用Date.UTC()](http://es5.github.com/#x15.9.4.3)从 UTC 值创建本地日期对象很简单：

```
var date = new Date(Date.UTC (year, month[, date[, hours[, minutes[, seconds[, ms]]]]]); 
```

它可以变成一个简单的函数，接受你喜欢的任何格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T05:06:20.807

这是一个尝试。由于您没有使用数据库，请尝试将日期存储为数据属性。将它们转换为时间戳，以便您进行比较：http: [//jsfiddle.net/uJEJ7/26/](http://jsfiddle.net/uJEJ7/26/)

我确定我忽略了一些东西，但也许它会激发一个想法。

我注意到您的页面是用 PHP 编写的，走这条路可能更容易。将 Camp 数据存储在关联数组中，循环遍历它以生成表格行，并根据日期是否匹配输出标记。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T01:25:21.303

我不确定您是否可以在日期上使用大于/小于运算符，但是比较它们的时间戳肯定会起作用，因为您将使用数字（毫秒）

你可以得到这样的时间戳：

```
var today = new Date().getTime(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T01:30:40.083

查看[date.js](http://datejs.com)，特别是...

[http://code.google.com/p/datejs/wiki/APIDocumentation#compare](http://code.google.com/p/datejs/wiki/APIDocumentation#compare)

> 比较第一个日期和第二个日期并返回它们相对值的数字指示。-1 = 这是 < 日期。0 = 值相等。1 = 这是 > 日期。

和方法可能对您的问题有用[`isAfter()`](http://code.google.com/p/datejs/wiki/APIDocumentation#isAfter):)[`isBefore()`](http://code.google.com/p/datejs/wiki/APIDocumentation#isBefore)

在此处下载库：

[http://code.google.com/p/datejs/downloads/detail?name=date.js&can=2&q=](http://code.google.com/p/datejs/downloads/detail?name=date.js&can=2&q=)

* * *

此外，值得一提的是 checkout [moment.js](http://momentjs.com/)。我认为这两个库是相辅相成的。

# java - 使动画与 Java KeyEvent 一起正常工作

> ID：10628702
> 
> 赞同：0
> 
> 时间：2012-05-17T01:06:44.817
> 
> 标签：java, animation, frame, keyevent

我坚持让我的精灵角色执行 2 个动画帧（link_frame_2 后跟 link_frame_1）`d`。它只执行一个动画帧（link_frame_2_face_right.png）。

这是代码：

```
import java.awt.Point;
import java.awt.event.KeyEvent;
import java.awt.event.MouseEvent;

import acm.graphics.GImage;
import acm.graphics.GPoint;
import acm.program.GraphicsProgram;

public class LinkGame extends GraphicsProgram {

    public void run(){
        setSize(APPLICATION_WIDTH, APPLICATION_HEIGHT);
        addLink();
        addKeyListeners();
        addMouseListeners();
    }
    private void addLink(){
        linkCharacter = new GImage("link sprites/link_frame_1_face_right.png");
            add(linkCharacter,link_Location_XCoord,link_Location_YCoord);
    }
    public void keyPressed(KeyEvent e){ 
        char linkMoveRightKey = e.getKeyChar();
        if(linkMoveRightKey == 'd'){
            // y should not change so goku moves in a straight line
                link_Location_YCoord = 0;
                linkCharacter.move(link_Location_XCoord,link_Location_YCoord);
                    set_Link_Anim_Frame_2_face_left();
            }
    }
    public void set_Link_Anim_Frame_2_face_left(){
        linkCharacter.setImage("link sprites/link_frame_2_face_right.png");         
    }
    public void set_Link_Anim_Frame_1_face_left(){  
        linkCharacter.setImage("link sprites/link_frame_1_face_right.png");
    }
    private GImage linkCharacter;
    private  int link_Location_XCoord = 50;
    private  int link_Location_YCoord = 50 ;
    private final int APPLICATION_WIDTH = 600;
    private final int APPLICATION_HEIGHT = 600;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:21:23.703

目前，当您移动时，要显示的帧不会更新。如果您使用一组图像并循环播放，那么您将能够在动画中包含任意数字。我已在下面的代码中提供了更新，因此您可以尝试一下。我添加了一个速度，而不是使用您的运动的初始位置，因此您可以独立更改这两个值。此外，移动速度较慢可以让您更轻松地看到帧的变化。

```
import java.awt.event.KeyEvent;

import acm.graphics.GImage;
import acm.program.GraphicsProgram;

public class LinkGame extends GraphicsProgram {

    public void run(){
        setSize(APPLICATION_WIDTH, APPLICATION_HEIGHT);
        addLink();
        addKeyListeners();
        addMouseListeners();
    }

    private void addLink(){
        linkCharacter = new GImage("link sprites/link_frame_1_face_right.png");
            add(linkCharacter,link_Location_XCoord,link_Location_YCoord);
    }

    public void keyPressed(KeyEvent e){ 
        char linkMoveRightKey = e.getKeyChar();
        if(linkMoveRightKey == 'd'){
                linkCharacter.move(xSpeed,ySpeed);
                linkCharacter.setImage(images[frame]);
                frame++;
                if(frame>=images.length){
                    frame = 0;
                }
            }
    }
    private GImage linkCharacter;
    private  int link_Location_XCoord = 50;
    private  int link_Location_YCoord = 50 ;
    private final int APPLICATION_WIDTH = 600;
    private final int APPLICATION_HEIGHT = 600;
    private String[] images = {"link sprites/link_frame_1_face_right.png","link sprites/link_frame_2_face_right.png"}; //Add in as many images as you want for your animation
    private int frame = 0;
    private int xSpeed = 1; //the number of pixels to move in x
    private int ySpeed = 0; //0 so you only move horizontally
} 
```

# javascript - 如何在 websql 中获取当前日期和时间？

> ID：10628704
> 
> 赞同：1
> 
> 时间：2012-05-17T01:07:03.200
> 
> 标签：javascript, web-sql

我想知道如何获取当前日期和时间以及我应该使用什么数据类型将其存储在 websql 中，对不起，我是个菜鸟……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:15:50.280

您可以创建一个`Date`对象并将日期的数值存储为自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数（之前的时间为负数）。

```
var today = new Date();
today.getTime();        // returns "1337217238392" 
```

存储毫秒将允许您稍后读取和解析。值得一提的是查看[date.js](http://datejs.com)和[moment.js](http://momentjs.com)

# .htaccess - 想不通：重定向显示旧网址

> ID：10628709
> 
> 赞同：0
> 
> 时间：2012-05-17T01:08:18.060
> 
> 标签：.htaccess, redirect, cpanel

我正在使用 cpanel 并尝试使用 htaccess 但它不起作用.. 我需要将 prismafoto.com.ar 重定向到 brujaurbana.com.ar/prisma 但是当它执行时显示的 url 是 brujaurbana.com.ar/prisma 如何我可以这样做吗？谢谢 :(

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-27T21:33:35.700

听起来您想做一个带掩码的 URL 重定向。这意味着，您希望域重定向但在 URL 栏中保持不变。

[http://webstarthelp.com/forwards.html](http://webstarthelp.com/forwards.html)

上面的网站有一个很棒的屏蔽 URL 重定向。

只需在 prismafoto.com.ar 上创建一个 index.html 文件并粘贴生成的代码。确保清除 .htaccess 文件，以免重定向发生冲突。

# iphone - 内部图像需要多种分辨率？

> ID：10628713
> 
> 赞同：3
> 
> 时间：2012-05-17T01:09:04.240
> 
> 标签：iphone, objective-c, ios, resolution, image

我看到的大多数回复都是关于按钮和图标的，但是图片呢？我的应用程序的数据库中有几张图片，我的问题是，我应该有每个图像的多个版本（每个分辨率一个）还是缩放图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:13:54.700

缩放图片可能是一个好方法，但是您可以存储一些格式以进行缓存并避免 cpu 处理。你不能只选择一个，你可以组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:46:02.200

对于您的应用程序包中使用的所有图像，您现在确实应该提供@2x 图像。他们只是看起来更脆……

至于下载或保存在数据库中的图像 - 至少对于 .png 或 .jpeg 图像 - 您始终可以利用它们掌握的信息。这就是为什么[scale 的属性](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006890-CH3-SW39)存在`UIImage`于...

# jquery - 如何在 Wordpress 中重置 Disqus？

> ID：10628729
> 
> 赞同：0
> 
> 时间：2012-05-17T01:13:12.947
> 
> 标签：jquery, ajax, wordpress, disqus

我正在运行一个带有 Disqus 插件的 Wordpress 站点，我决定使用 ajax 加载博客文章。我读过 ajax 会破坏 disqus 系统，但他们提出了一个重置​​功能来处理这个问题。

我只是不知道如何实现这个重置功能来完成这项工作。这是重置功能的链接：[DISQUS.reset](http://docs.disqus.com/help/85/)。一个区别是我的网站没有使用 hashbangs，但我通过电子邮件发送了 Disqus 支持，他们向我保证这不是问题。

或者，我尝试在我的单个帖子页面模板上实现 Disqus 通用代码（如另一个线程中所建议的那样），但我仍然没有运气。如果我正常重新加载页面，Disqus 将加载正确的线程，所以我知道我的通用代码正在工作。

有人有类似的问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:56:58.027

如果您使用的是较新的 Disqus 2012 版本，则目前尚不支持 DISQUS.reset 功能。建议开发人员坚持使用旧版本，（可在 Disqus 管理设置中配置。）

[请参阅 2012 发行说明](http://help.disqus.com/customer/portal/articles/526768-introducing-disqus-2012-and-f-a-q-)

更新：这个答案已经过时，因为 Disqus 现在支持 DISQUS.reset。

# java - Java 泛型和接口，使用类型作为方法参数

> ID：10628733
> 
> 赞同：0
> 
> 时间：2012-05-17T01:14:36.847
> 
> 标签：java, oop, generics

我有以下代码：

```
public interface IDoWork<K extends AbstractKey,V extends AbstractClass> {
    V obtain(K key, V value);
}

public class AbstractKey {
    String id;
}

public class AbstractClass {
    String name;
}

public class ConcreteA extends AbstractClass {
    String attributeA;
}

public class DoWorkA implements IDoWork<KeyA, ConcreteA> {

    private static final DoWorkA INSTANCE = new DoWorkA();

    public static DoWorkA getInstance() {
        return INSTANCE;
    }

    @Override
    public ConcreteA obtain(KeyA k, ConcreteA v) {
        //do something in real life
        return null;
    }

}

public class Main {

    public static void main(String[] args){
        KeyA a = new KeyA();
        ConcreteA c = new ConcreteA();
        IDoWork<? extends AbstractKey, ? extends AbstractClass> instance =
                WorkFactory.getInstance().obtainInstance(a);
        instance.obtain(a, c);
    }
}

public class WorkFactory {

    private static final WorkFactory INSTANCE = new WorkFactory();

    public static WorkFactory getInstance() {
        return INSTANCE;
    }

    public IDoWork<? extends AbstractKey, ? extends AbstractClass> obtainInstance(AbstractKey key){
        if(key instanceof KeyA){
            return DoWorkA.getInstance();
        }
        throw new IllegalArgumentException("Case not handled");
    }

} 
```

在以下代码中：

```
KeyA a = new KeyA();
ConcreteA c = new ConcreteA();
IDoWork<? extends AbstractKey, ? extends AbstractClass> instance = WorkFactory.getInstance().obtainInstance(a);
instance.obtain(a, c); 
```

此行不编译：

```
instance.obtain(a, c); 
```

由于 Java 泛型的性质。我收到以下错误：

> IDoWork 类型中的方法 gain(capture#3-of ? extends AbstractKey, capture#4-of ? extends AbstractClass) 不适用于参数 (KeyA, ConcreteA)

还有另一种方法吗？如果省略中的类型参数

```
IDoWork<? extends AbstractKey, ? extends AbstractClass> instance =... 
```

如果我从`IDoWork`... 中删除类型参数，它可以工作，但我会收到警告。有没有办法解决这个问题。？我知道我可以从接口中删除类型参数，这将解决问题，但我发现拥有泛型以便不必进行强制转换很方便 + 它使代码更加清晰，因为可以清楚地看到每个类用途。依赖注入是毫无疑问的，因为它在我所在的代码库中不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:01:55.780

我有一些可行的方法，但不是很理想：

如果您以这种方式定义 WorkFactory：

```
public class WorkFactory {
    private static final WorkFactory INSTANCE = new WorkFactory();
    public static WorkFactory getInstance() {
        return INSTANCE;
    }

    @SuppressWarnings("unchecked")
    public <K extends AbstractKey, V extends AbstractClass> IDoWork<K, V> obtainInstance(K key, V val) {
        if (key instanceof KeyA) {
            return (IDoWork<K, V>) DoWorkA.getInstance();
        }
        throw new IllegalArgumentException("Case not handled");
    }

} 
```

那么你的主要方法应该可以干净地工作：

```
public static void main(String[] args){
        KeyA a = new KeyA();
        ConcreteA c = new ConcreteA();
        IDoWork<KeyA, ConcreteA> instance = WorkFactory.getInstance().obtainInstance(a, c);
        instance.obtain(a, c);
} 
```

我已更改`obtainInstance`为获取键和值，以正确推断类型。

# c++ - 递归floodFill函数？C++

> ID：10628734
> 
> 赞同：1
> 
> 时间：2012-05-17T01:14:42.790
> 
> 标签：c++, function, recursion, flood-fill

所以递归不是我的强项，我一直面临挑战，要创建一个递归的 floodFill 函数，如果值为零，则用 1 填充整数向量的向量。由于我以外的原因，我的代码不断出现段错误。也许我的代码会让这听起来更清楚。

**这是要填充的网格：**

```
vector<vector<int> > grid_; 
```

它属于我创建的一个名为“Grid”的对象，它基本上是一组帮助操作向量的函数。网格的值被初始化为全零。

**这是我的洪水填充功能：**

```
void floodFill(int x, int y, Grid & G)
{

if (G.getValue(x,y))
{
    G.setValue(x,y,1);
    if(x < G.getColumns()-1 && x >= 0 && y < G.getRows()-1 && y >= 0)
    floodFill(x+1,y,G);

    if(x < G.getColumns()-1 && x >= 0 && y < G.getRows()-1 && y >= 0)
    floodFill(x,y+1,G);

    if(x < G.getColumns()-1 && x >= 0 && y < G.getRows()-1 && y >= 0)
    floodFill(x-1,y,G);

    if(x < G.getColumns()-1 && x >= 0 && y < G.getRows()-1 && y >= 0)
    floodFill(x,y-1,G);

}       
} 
```

这里的目的是让函数检查一个点的值是否为零，如果是，则将其更改为 1。然后它应该检查它上面的那个。它会这样做，直到找到 1 或到达向量的末尾。然后它尝试另一个方向并继续前进，直到与上述相同的条件，依此类推，直到洪水充满。

谁能帮我解决这个问题？也许告诉我怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:16:49.490

```
if(x < G.getColumns()-1 && x >= 0 && y < G.getRows()-1 && y >= 0)
    floodFill(x-1,y,G); 
```

将不起作用，因为如果您可以访问基础向量的索引 -1`x == 0`

同样适用`floodFill(x,y-1,G);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:01:15.290

这段代码有很多问题。首先检查`if(G.getValue(x,y))`某个位置的值是否为 1，如果是，则使用 .将其设置为 1 `G.setValue(x,y,1)`。想一想，这不可能。您何时将非零值设置为 1？

然后，另一个更微妙的点是，如果它们已经设置为 1，则不应递归到邻居。

就目前而言，您拥有的代码可能会一直运行，直到您溢出堆栈，因为只会在连接到您从哪里开始的 1 上永远递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T02:00:25.157

这个怎么样？

```
void floodFill(int x, int y, Grid &g) {
  if(x >= g.getColumns() || y >= g.getRows()) {
    return;
  }

  floodFill(x+1, y, g);

  if( x == 0 ) {
    floodFill(x, y+1, g);
  }

  g.setValue(x, y, 1)
} 
```

我认为这将填充网格，而无需每次多次击中相同的坐标，并且只要任一索引超出范围，它就会返回，因此不会出现段错误。

# javascript - Backbone - 传递从 fetch 返回的正确模型

> ID：10628735
> 
> 赞同：0
> 
> 时间：2012-05-17T01:14:46.637
> 
> 标签：javascript, backbone.js

我有一个工作流程的主干设置。在任何给定时间，页面上都可以看到多个工作流/模型。如果工作流尚未启动（即不在数据库中），它将显示为新模型。将获取的模型传递给视图时遇到问题。我只是传递属性而不是它看起来的集合？有人有想法么？

当我从数据库中获取所有工作流时，它会返回一个工作流进度的 JSON 数组。

```
[{
        "ref_id": 41959,
        "parent_ref_id": 35,
        "fk_workflow_id": 2,
        "stage": 1,
        "status_max": 4,
        "updated": "2012-05-14 17:30:46"
}, {
        "ref_id": 41960,
        "parent_ref_id": 35,
        "fk_workflow_id": 3,
        "stage": 3,
        "status_max": 4,
        "updated": "2012-05-14 12:30:48"
}] 
```

加载页面时，所有工作流都被创建为“新模型”，因为我们不知道它们是否已经启动。一旦 fetch 返回了已启动的模型，我必须将适当的模型传递给视图。我无法弄清楚如何正确传递模型（即我可以传递属性，但似乎在那之后，我无法访问 collection.create 函数等？）

```
 var self = this;
    this.workflows = new Workflow.WorkflowCollection();
    this.workflows.fetch({
        data:{
            ref_id: REF_ID
        },
        success: function(model, response) {
            for(var i = 0, ln = model.models.length; i< ln;i++) {
            self.switchWorkflow(model.models[i].get("fk_workflow_id"), new Workflow(model.models[i].attributes));
                }
            }
        }); 
```

这是我可以确定主干知道​​需要设置多少个模型的唯一方法（没有为每个客户启动每个工作流程 - 大约 100 万行）

```
setupWorkflowSpaces: function(model) {

    for(var i =0; i<Workflow.FileWorkflows.length;i++) {
        this.switchWorkflow(Workflow.FileWorkflows[i], false);
    }
},
switchWorkflow: function(workflow_id, model) {
    if(!model)
        model = new Workflow;
    switch(workflow_id) {
        case 1:
            this.applicationProcessView(model);
            break;
        case 2:
            this.kitView(model);
            break;
        case 3:
            this.posView(model);
            break;
        default:
            alert('wut');
            break;
    }
},

kitView: function(model) {
    console.log(model);
    model.set("fk_workflow_id", 2);
    if(this.kit) this.kit.close();
    this.kit = new Workflow.PostageView({
        model: model
    });
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:01:30.523

尝试`model`在您的 Backbone 集合中定义属性：

```
var Workflow.WorkflowCollection = Backbone.Collection.extend({
  model: Workflow
}); 
```

如果已定义，则从您的服务器返回的原始属性将被转换为`Workflow`模型。

然后，您不必遍历通过 in 中的`success`回调返回的集合`fetch`。所有添加的模型都将在您的收藏中，您可以使用该`.create()`方法继续添加更多。

在 fetch 之后，您可以使用`WorflowCollection.each`. 在循环中，您可以运行 switch 语句以将每个模型分配给适当的视图。

我希望这有帮助。

# php - 管理员昨天工作时发布到粉丝页面，而不是今天

> ID：10628736
> 
> 赞同：0
> 
> 时间：2012-05-17T01:14:47.953
> 
> 标签：php, facebook, facebook-page, fan-page

要发布到 facebook 粉丝页面，使用由 cronjob 调用的 php 脚本，我使用以下代码，昨天在测试时工作，它不再工作。

```
include_once("../facebooksdk/src/facebook.php");

$facebook = new Facebook(array(
  'appId'  => 'XX',
  'secret' => 'XX',
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    $page_id = 'XX';
    $page_info = $facebook->api("/".$page_id."?fields=access_token");
    if( !empty($page_info['access_token']) ) {
        $args = array(
            'access_token'  => $page_info['access_token'],
            'message'       => "Welcome to TuneHub!"
        );
        $post_id = $facebook->api("/".$page_id."/feed","post",$args);
    }
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
} 
```

我不知道为什么它会暂时起作用，然后第二天将代码添加到实时站点时，它不再起作用（在测试或实时站点上，它不起作用）

是否有 API 更改正在杀死该功能？还是我对标记 Facebook 以阻止其发布的代码做错了什么？

（代码可能与我正在运行的脚本略有不同，因为我一直在摆弄它以尝试找到问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:03:51.770

看

[https://developers.facebook.com/docs/reference/api/page/#posts](https://developers.facebook.com/docs/reference/api/page/#posts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:56:34.467

检查您的访问令牌可能已过期，您需要有一个有效的访问令牌，有权在墙上发布，尝试获取更新的访问令牌并尝试

# html - 网页中的大小更改段落

> ID：10628748
> 
> 赞同：0
> 
> 时间：2012-05-17T01:17:18.750
> 
> 标签：html, dynamic, web

我对网络开发有点陌生，我想要一个带有文本的框，它可以用 + 或 - 改变大小，而无需重新加载它所在的页面。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:19:11.987

使用 javascript，您可以更改某些元素的属性，例如字体大小。

看这个例子： http: [//net.tutsplus.com/tutorials/javascript-ajax/use-the-jquery-ui-to-control-the-size-of-your-text/](http://net.tutsplus.com/tutorials/javascript-ajax/use-the-jquery-ui-to-control-the-size-of-your-text/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T02:38:32.103

为简单起见，您可以为此使用[jQuery](http://jquery.com/)。

像这样简单的一行，可以实现你想要的：

```
$(function() {
    size = 10;
    $('#bigger').live('click', function() {
        size++;
        $('p').css('font-size', size + "px");
    });
    $('#smaller').live('click', function() {
        size--;
        $('p').css('font-size', size + "px");
    });
});​ 
```

[在此处](http://jsfiddle.net/sEA2P/)查看现场演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T02:21:29.627

尝试这样的事情（在这里试试：http: [//jsfiddle.net/Czauu/](http://jsfiddle.net/Czauu/)）：

**HTML：**

```
<div id="textdiv">This is the text that will change size</div>
<a href="#" id="increase">+</a>       <!-- link to increase size -->
<a href="#" id="decrease">-</a>       <!-- link to decrease size --> 
```

**CSS：**

```
#textdiv{ font-size:1em;}             <!-- You MUST set initial font-size --> 
```

**查询：**

```
$(document).ready(function(){                       //code is only executed when page is fully loaded

    $("#increase").click(function(){                // triggered when the #increase link is clicked
        size = parseFloat($('#textdiv').css('font-size'), 10);  //get current size
        $('#textdiv').css('font-size', size*1.2);   // increase size
        return false;                               // prevent the link action
    });

    $("#decrease").click(function(){                 // #decrease link is clicked
        size = parseFloat($('#textdiv').css('font-size'), 10); //get current size
        $('#textdiv').css('font-size', size*0.8);    //decrease size
        return false;
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T03:24:42.523

您可以使用 Javascript 来实现它。基本上，您需要执行以下操作：

```
var plus_btn = $("#increase"),
    minus_btn = $("#decrease"),
    contents = $("#box > p"),
    size;

size = parseInt(contents.css("font-size")); //current font-size

plus_btn.click("click",function(e){
    size++;
    contents.css("font-size",size+"px");

});
minus_btn.click("click",function(e){
    size--;
    contents.css("font-size",size+"px");   
}); 
```

我在 jsfiddle 中写了一个小样本，你可以看看[这个](http://jsfiddle.net/zhujy_8833/RfPwY/)

# c# - 重写的属性和 TargetInvocationException

> ID：10628750
> 
> 赞同：0
> 
> 时间：2012-05-17T01:17:57.463
> 
> 标签：c#

我正在尝试从基本构造函数调用覆盖的属性，但我收到 System.Reflection.TargetInvovationException（“对象引用未设置为对象的实例。”）。为什么会引发此错误，并且可以采取任何措施来避免它？

我本来希望构造函数刚刚调用了覆盖的属性。

这是一个精简的示例：

```
// Call that generates exception
var foo = new Foo();

public class Foo : Bah {

    public Foo() : base("Foo!") {}

    public override string Name {
        get { return _name + "123"; }
        set { _name = value; }
    }
}

public class Bah {

    protected string _name;

    public Bah(string name) {
        Name = name; // << -- Exception here
    }

    public virtual string Name {
        get { return _name; }
        set { _name = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:24:39.947

你还有其他问题。键入的代码有效。试试这个功能齐全的程序看看，它打印（如预期）“Foo！123”：

```
using System;

namespace Test
{
    public class Program
    {
        private static void Main()
        {
            var foo = new Foo();
            Console.WriteLine(foo.Name);
            Console.ReadKey();
        }
    }

    public class Foo : Bah
    {
        public Foo() : base("Foo!") { }

        public override string Name
        {
            get { return _name + "123"; }
            set { _name = value; }
        }
    }

    public class Bah
    {
        protected string _name;

        public Bah(string name)
        {
            Name = name; // << -- No Exception here (or anywhere!)
        }

        public virtual string Name
        {
            get { return _name; }
            set { _name = value; }
        }
    }
} 
```

话虽如此，在构造函数中调用虚拟方法（包括属性访问器方法）是一个非常糟糕的主意。它可能导致非常奇怪的行为，这可能是您真实代码中的罪魁祸首。

# java - 如何将字符串解析为对象的名称？

> ID：10628753
> 
> 赞同：2
> 
> 时间：2012-05-17T01:19:02.287
> 
> 标签：java, string, parsing, variables

所以我有少量对象（10 个 JLabel），我想根据用户输入更改它们的文本。

标签的初始化程序如下所示：

```
private JLabel j1 = new JLabel();
private JLabel j2 = new JLabel();
private JLabel j3 = new JLabel();
...etc 
```

并继续到 10。

如何批量更改每个 JLabel 的文本而不每次都编写每个变量名？

我有一个类似下面的想法，但我不知道如何从字符串中按名称访问变量。

```
for(int x=1;x<=10;x++){
  String d = (String) x; //this isn't what d equals, it's example.
  String label = "j"+x;
  label.setText(d); //I know this won't work, but this is what I want to do
} 
```

有什么方法可以做到这一点而不会出错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T01:25:01.923

这是使用数组存储`JLabel`对象的绝佳机会：

```
private JLabel[] labels = new JLabel[10];

for (int i=0; i<10; i++) {
    labels[i] = new JLabel();
}

/* ... */

for (int i=0; i<10; i++) {
    labels[i].setText("Hello from label " + i);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T01:25:43.923

如果您已经创建了`JLabel`一个数组，例如`JLabel j[10] = new JLabel[10]`. 然后您可以使用 for 循环为每个索引创建一个实例，然后也设置文本。

```
for(int x=0;x<10;x++){
  j[x] = new JLabel();
  String d = String.valueOf(x); 
  String label = "j"+x;
  j[x].setText(d);
} 
```

# neo4j - 使用neography更新neo4j中的节点及其伴随的索引

> ID：10628758
> 
> 赞同：2
> 
> 时间：2012-05-17T01:19:28.960
> 
> 标签：neo4j, neography

如何使用neography更新节点的给定属性？如果它是一个索引字段。索引会自动更新吗？

我知道在控制台上，它就像

```
  cd -a 15
  设置用户名 foobar

```

当然，这也不会更新任何索引（索引 sp？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:19:34.880

根据neo4j-manual-1.8

> 要更新索引条目，必须删除旧条目并添加新条目

另一种选择是设置自动索引。

# youtube - 如何获取 youtube 播放列表缩略图？

> ID：10628760
> 
> 赞同：12
> 
> 时间：2012-05-17T01:19:37.340
> 
> 标签：youtube, youtube-api, youtube-javascript-api

有没有办法获取 youtube 播放列表缩略图，例如如何获取视频缩略图，此处解释：[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-23T23:11:25.103

使用 YouTube API v3，您可以使用其`v3/playlists`端点获取播放列表缩略图并深入了解`items.snippet.thumbnails.high.url`

对于以下播放列表：

[https://www.youtube.com/playlist?list=PL50C17441DA8A565D](https://www.youtube.com/playlist?list=PL50C17441DA8A565D)

YouTube 的 API 浏览器有一个播放列表端点：

[https://developers.google.com/youtube/v3/docs/playlists/list](https://developers.google.com/youtube/v3/docs/playlists/list)

这是 API 调用：

`GET https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=PL50C17441DA8A565D&key={YOUR_API_KEY}`

这是回应：

```
 {
     "kind": "youtube#playlistListResponse",
     "items": [
      {
       "kind": "youtube#playlist",
       "id": "PL50C17441DA8A565D",
       "snippet": {
        "title": "Jay Chou Playlist",
        "thumbnails": {
         "default": {
          "url": "https://i.ytimg.com/vi/kGbDymJ75PU/default.jpg",
          "width": 120,
          "height": 90
         },
         "medium": {
          "url": "https://i.ytimg.com/vi/kGbDymJ75PU/mqdefault.jpg",
          "width": 320,
          "height": 180
         },
         "high": {
          "url": "https://i.ytimg.com/vi/kGbDymJ75PU/hqdefault.jpg",
          "width": 480,
          "height": 360
         }
        },
        "channelTitle": "it23"
       }
      }
     ]
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-17T05:20:27.377

这对我有用。与其他关于播放列表项的帖子类似，但我只是更改了 API 调用。希望能帮助到你。

//获取播放列表项

```
$data = file_get_contents("https://www.googleapis.com/youtube/v3/playlistItems?key=< YOUR API KEY >&part=snippet&playlistId="<Put your playlist id here>"); 
```

//解码来自youtube的响应

```
$json = json_decode($data); 
```

//如果你想看到完整的响应使用 print_r($json);

//响应中的每个项目对应于播放列表中的一个视频，因此让我们获取第一个视频 (items[0]) 获取其片段和相应的缩略图，我们将采用默认大小的 url。如果您想要第二个视频，请使用项目 [1] 等。

```
$video_thumbnail = $json->items[0]->snippet->thumbnails->default->url; 
```

//将视频的alt标签设置为片段描述

```
$video_alt = $json->items[0]->snippet->description; 
```

//将图片url回显到图片标签中

```
echo '<img src="'. $video_thumbnail .'" alt="'. $video_alt .'" />'; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-30T06:59:21.173

没有用于此目的的 API。这是我能想到的解决方法。

1) 什么是 youtube 播放列表缩略图？玩弄我的帐户，似乎规则如下：

```
if playlist has 5+ videos
  thumbnail = first 5 video images
else if playlist has 1+ videos
  thumbnail = all video images
else shows this list is empty 
```

2）然后您可以使用相同的方式获取视频缩略图。

3）在客户端（一些CSS）或服务器端组合图像

# php - PHP中的解密

> ID：10628771
> 
> 赞同：2
> 
> 时间：2012-05-17T01:21:29.893
> 
> 标签：php, encryption, sha1, hmac

我正在尝试解密与我们的服务器通信的数据。它是使用某种方案加密的某个 8 位数字。我有加密和完整性密钥。我有一份关于如何解密它的文档，上面写着 -

> 该值使用自定义加密方案进行加密。加密方案使用带密钥的 HMAC-SHA1 算法根据唯一事件 ID 生成密钥。加密值具有 28 字节的固定长度。它由 16 字节的初始化向量、8 字节的密文和 4 字节的完整性签名组成。根据 RFC 3548，加密值是 web 安全的 base-64 编码，省略了填充字符。因此，28 字节的加密值被编码为 38 个字符的 Web 安全 base-64 字符串。该值被加密为：
> 
> 值异或 HMAC-SHA1（加密密钥，初始化向量）>
> 
> 所以解密计算：
> 
> HMAC-SHA1（加密密钥，初始化向量）
> 
> 和 xor 与加密的值来反转加密。完整性阶段需要 4 个字节
> 
> HMAC-SHA1(integrity_key, value||initialization_vector)>
> 
> 在哪里 || 是串联。

所以我写了下面的 PHP 代码。

```
$value= "[VALUE]"; //38 character base64
$ekey=hextostr("[ENCRYPTIONKEY]"); //64 byte hex encoded key . 32 byte key
$ikey=hextostr("[INTEGRITYKEY]"); //64 byte hex encoded key . 32 byte key

$value=str_replace("-","+",$value);
$value=str_replace("_","/",$value);
$value=$value."==";
$dvalue=base64_decode($value); //Gets a 28 byte encrypted string.

$initvec=substr($dvalue,0,16);
$ciphertext=substr($dvalue,16,8);
$integritysig=substr($dvalue,24,4);

$pad=hash_hmac("sha1",$initvec,$ekey);    //Generates 40 byte pad

$uncipher=$ciphertext^$pad;

print($uncipher); //This is 8 byte binary. Dumps some binary on screen. Result should be a 8 byte number 
```

无法绕过这个问题。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:34:56.800

```
$pad=hash_hmac("sha1",$initvec,$ekey); // returns a hexstring, but XOR interprets
                                       // as ASCII string and converts to binary
                                       // accordingly

$ciphertext=substr($dvalue,16,8); // this is ASCII, converted to binary by XOR

$uncipher=$ciphertext^$pad; // so the XOR operation is confused in interpretation. 
```

尝试将其更改为，

```
function bin2asc($in)#syntax - bin2asc("binary to convert");
{
  $out = '';
  for ($i = 0, $len = strlen($in); $i < $len; $i += 8)
  {
    $out .= chr(bindec(substr($in,$i,8)));
  }
  return $out; 
}

$pad= hash_hmac("sha1",$initvec,$ekey, true); // now it will return in binary 
$pad = bin2asc($pad);

$uncipher=$ciphertext^$pad; 
```

希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:03:58.220

您发布的代码应如下所示

```
$value= "[VALUE]"; //38 character base64
$ekey=hextostr("[ENCRYPTIONKEY]"); //64 byte hex encoded key . 32 byte key
$ikey=hextostr("[INTEGRITYKEY]"); //64 byte hex encoded key . 32 byte key

$value=str_replace("-","+",$value);
$value=str_replace("_","/",$value);
$value=$value."==";
$dvalue=base64_decode($value); //Gets a 28 byte encrypted string.

$initvec=substr($dvalue,0,16);
$ciphertext=substr($dvalue,16,8);
$integritysig=substr($dvalue,24,4);

//here is the change
$pad=hash_hmac("sha1",$initvec,$ekey, true);

$uncipher=$ciphertext^$pad;

print(hexdec(strToHex($uncipher))); //This is 8 byte binary. Dumps some binary on screen. Result should be a 8 byte number 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-25T14:33:33.853

试试这个

```
function decrypt_google_winning_price($value, $ekey, $ikey, &$reason = '') {
if (strlen($value) != 38)
{
    $reason = "Wrong encrypted value length";
    return false;
}

$ekey = base64_decode($ekey);
$ikey = base64_decode($ikey);
$value = strtr($value, '-_,', '+/=') . "==";
$enc_value = base64_decode($value); //Gets a 28 byte encrypted string.
if (strlen($enc_value) != 28)
{
    $reason = "Wrong encrypted value length after base64_decode()";
    return false;
}

$iv = substr($enc_value, 0, 16);// initialization vector (16 bytes - unique to the impression)
$p = substr($enc_value, 16, 8); // encryption key (32 bytes - provided at account set up)
$sig = substr($enc_value, 24, 4);// integrity signature (4 bytes)
$price_pad = hash_hmac("sha1", $iv, $ekey, true);
$price = $p ^ $price_pad;// XOR

$conf_sig = substr(hex2bin(hash_hmac("sha1", $price . $iv, $ikey)), 0, 4);

if ($sig !== $conf_sig)
{
    $reason = "Signature is not valid";
    return false;
}

return  hexdec(bin2hex($price)); //This is 8 byte binary. Dumps some binary on screen. Result should be a 8 byte number
}

$value = "[VALUE]"; //38 character base64
$ekey = "[ENCRYPTIONKEY]"; //64 byte hex encoded key . 32 byte key
$ikey "[INTEGRITYKEY]"; //64 byte hex encoded key . 32 byte key

var_dump(decrypt_google_winning_price($value, $ekey, $ikey)); 
```

# monitor - 有没有办法从 dbus-monitor 输出中排除某些接口/地址？

> ID：10628777
> 
> 赞同：0
> 
> 时间：2012-05-17T01:22:13.893
> 
> 标签：monitor, dbus

从`dbus-monitor`命令的手册页中，我知道我可以使用一些命令行参数，比如`dbus-monitor "type=..., sender=..., interface=..."`指定我感兴趣的类型/发送者/接口等。

但是，对于有一些我不感兴趣的 dbus 流量很大的程序的情况，是否可以选择过滤掉该接口/程序的输出？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:40:35.090

dbus-daemon 使用消息匹配规则路由消息。你不能有类似“消息不匹配”规则的东西，规范不支持这样的东西。请参阅[此处](http://dbus.freedesktop.org/doc/dbus-specification.html#message-bus-routing-match-rules)了解更多信息。

为了获得所需的过滤行为，我建议`grep`在`dbus-monitor`. 查看[此讨论](https://stackoverflow.com/questions/4538253/grep-how-could-i-exclude-one-word)以获取更多信息。

# linux - 启动 bash 脚本

> ID：10628778
> 
> 赞同：1
> 
> 时间：2012-05-17T01:22:22.287
> 
> 标签：linux, bash

我需要自学 bash 脚本。我正在阅读这本电子书，它有以下代码：

```
#!/bin/bash
# hello.sh
# This is my first shell script!

declare -rx SCRIPT="hello.sh"
declare -rx who="/usr/bin/who"
declare -rx sync="/bin/sync"
declare -rx wc="/usr/bin/wc"

# sanity checks

if test -z "$BASH" ; then
    printf "$SCRIPT:$LINENO: please run this script with the BASH shell\n" >&2
    exit 192
fi

if test ! -x "$who" ; then
    printf "$SCRIPT:$LINENO: The command $who is not available - aborting\n" >&2
    exit 192
fi

if test ! -x "$sync" ; then
    printf "$SCRIPT:$LINENO: the command $sync is not available - aborting\n">&2
    exit 192
fi

if test ! -x "$wc" ; then
   printf "$SCRIPT:$LINENO: the command $wc is not available - aborting\n" >&2
   exit 192
fi

USERS = `$who | $wc -l`
if [ $USERS -eq 0 ] ; then
    $sync
fi

exit 0 
```

当我运行它时，我收到以下错误：

```
hello.sh: line 32: USERS: command not found
hello.sh: line 33: [: -eq: unary operator expected 
```

我真的不知道我做错了什么。我是否不允许以这种方式将用户分配给命令行的输出？如果我在命令行中运行该行，它也不起作用。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T01:26:38.923

删除作业周围的空格`=`：

```
USERS=`$who | $wc -l` 
```

或者它将被解释为`USERS`带有两个参数`=`和 `%who |的命令。$wc -l`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T01:24:54.747

代替

```
USERS = `$who | $wc -l` 
```

和

```
USERS=`$who | $wc -l` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T01:29:38.373

在 Bash（实际上在许多 shell 中）中，变量名和符号 = 之间不能有空格

在这种情况下，您需要编写

```
USERS=`command` 
```

或者

```
USERS=$(command) 
```

变量有时充当 C++ 宏。如果变量 USERS 为空并且您键入以下内容：

```
if [ $USERS -eq 0 ] ; then 
```

它会被解释为

```
if [ -eq 0 ] ; then 
```

并且 -eq 不是一元运算符。为了使它正确，你需要写：

```
if [ "$USERS" -eq 0 ] ; then 
```

被解释

```
if [ "" -eq 0 ] ; then 
```

# loops - 检测二叉树中的循环

> ID：10628782
> 
> 赞同：1
> 
> 时间：2012-05-17T01:22:56.943
> 
> 标签：loops, time, binary-tree

```
To detect if there is a loop in Binary Tree. 
```

我认为我们可以进行中序遍历并标记访问过的每个节点，如果我们再次遇到访问过的任何此类节点，那么我们可以说二叉树中有一个循环。

它将花费 O(logn) - 时间 O(n) - 辅助空间

有没有更有效的方法呢？

# actionscript - TransformGestureEvent.GESTURE_PAN 事件不会触发

> ID：10628783
> 
> 赞同：0
> 
> 时间：2012-05-17T01:23:21.070
> 
> 标签：actionscript

我有以下适用于 ios 应用程序的代码，

```
 Multitouch.inputMode = MultitouchInputMode.GESTURE;
        var mySprite:Sprite = new Sprite();
        mySprite.addEventListener(TransformGestureEvent.GESTURE_PAN, onPan);
        mySprite.addEventListener(TransformGestureEvent.GESTURE_SWIPE, onSwipe);
        mySprite.addEventListener(TransformGestureEvent.GESTURE_ZOOM, onZoom);
        mySprite.addEventListener(MouseEvent.CLICK, onClick);
        mySprite.graphics.beginFill(0x336699);
        mySprite.graphics.drawRect(0, 0, 80, 80);
        mySprite.x = 100;
        mySprite.y = 100;
        var myTextField:TextField = new TextField();
        myTextField.y = 200;
        addChild(mySprite);
        addChild(myTextField);
        myTextField.text = "Wait";

        function onClick(e:MouseEvent):void {
            myTextField.text = "onClick";
        }

        function onPan(e:MouseEvent):void {
            myTextField.text = "onPan";
        }

        function onSwipe(e:TransformGestureEvent):void {
            myTextField.text = "onSwipe";
        }

        function onZoom(e:TransformGestureEvent):void {
            myTextField.text = "onZoom";
        } 
```

当我在 itouch 上测试应用程序时，除了 onPan 外，一切正常。看来无论我做什么，TransformGestureEvent.GESTURE_PAN 事件都不会触发。当我在按下时移动手指时，会调用 onSwipe。如果我注释掉 TransformGestureEvent.GESTURE_SWIPE 的事件侦听器，那么当我在按下时移动手指时不会调用任何内容。

我做错了平移手势吗？TransformGestureEvent.GESTURE_PAN 和 TransformGestureEvent.GESTURE_SWIPE 手势有什么区别？

非常感谢您的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:06:59.110

TransformGestureEvent.GESTURE_PAN 使用两个手指。

试试看，你会发现当你用两根手指按下屏幕并移动时，对象会开始平移。

改用 MouseEvent.MOUSEMOVE

编辑：从一本手册中看这句话：

> 当用户用两根手指抓住一个对象并拖动它时，会触发 TransformGesture Event.GESTURE_PAN 事件并调用 onGesturePan 方法。在 onGesturePan 方法中，此事件的 offsetX 和 offsetY 值被写入 TextArea 组件的 text 属性。添加事件的 offsetX 和 offsetY 值设置对象的 x 和 y 以在舞台上移动对象。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T16:36:59.110

`function onPan(e:MouseEvent):`一定是 `onPan(e:TransformGestureEvent)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T23:55:25.597

只有当我做双指按压和移动时，潘才对我有用。我无法找到这些不同手势实际上是什么的正确描述，但它似乎就是这样。

# applescript - AppleScript - 在家时更改首选项

> ID：10628786
> 
> 赞同：3
> 
> 时间：2012-05-17T01:23:36.670
> 
> 标签：applescript

好的，所以我设置了一个脚本来在我在家时关闭“唤醒时需要密码”功能。它会ping我的手机以查看我是否已连接到网络，如果没有则打开锁定以唤醒。所以：

```
try
do shell script "ping -c2 X.X.X.X"
set theResult to the result
if theResult contains " 2 packets received," then
    tell application "System Events"
        tell security preferences
            get properties
            set properties to {require password to wake:false, require password to unlock:false}
        end tell
    end tell
end if
on error
tell application "System Events"
    tell security preferences
        get properties
        set properties to {require password to wake:true, require password to unlock:true}
    end tell
end tell
end try
end 
```

这工作得很好，但是它要求进行身份验证。我真的不想使用输入文本和返回路线，也不想使用剪贴板路线，因为我不想要脚本中的密码......那么有没有办法避免身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:22:58.387

如果您的目标是启用/禁用“唤醒密码”而不是在没有身份验证的情况下运行该特定脚本，请使用

```
tell application "System Events"
    set require password to wake of security preferences to true
end tell 
```

或者

```
do shell script "defaults write com.apple.screensaver -int 1" 
```

与“to false”和“-int 0”相同以关闭设置。这些都不需要身份验证，因为它们只是更改用户级别的首选项（存储在

```
~/Library/Preferences/com.apple.screensaver.plist 
```

在我的系统上，虽然这是一个你不应该依赖的实现细节）。

触发脚本中身份验证对话框的是另一个属性“需要密码才能解锁”，相当于安全首选项的“高级...”部分中的“需要管理员密码才能访问锁定的首选项”选项。在后台，*此*选项相当于更改授权服务数据库中的一些设置，

```
/private/etc/authorization 
```

控制是否可以为未经身份验证的更改解锁各种*系统范围的首选项。*

系统事件似乎确实有一个（不太严重的）错误，但是：在我的系统上，设置“需要密码才能解锁”没有任何效果，无论我是否以管理员身份进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T16:45:58.773

这个答案有两个部分：

1.  无法通过脚本或 GUI 脚本将密码传递给负责提示的 SecurityAgent 应用程序（即设计使然），您也不能完全禁止它；话虽如此，
2.  您可以忽略提示并在不输入密码的情况下关闭窗口 - 即使在这种情况下也会应用您的属性设置（在 OS X 10.7.4 上测试）。

*作为安全问题向 Apple 报告为[rdar://11484075](http://openradar.appspot.com/radar?id=1721406)*

*更新：Apple Product Security 不认为这是一个安全问题，但仍然会跟踪错误本身（我不得不猜测，因为它作为另一个雷达的副本被关闭，这在 Openradar 上不可用，但我希望虚假对话似乎是苹果关注的问题）。*

# ruby-on-rails - 无需设计就使用omniauth-identity的验证码解决方案

> ID：10628787
> 
> 赞同：1
> 
> 时间：2012-05-17T01:23:55.650
> 
> 标签：ruby-on-rails, omniauth, recaptcha

我正在尝试在我的应用程序注册表中插入验证码。我发现的大多数解决方案（[ambethia/recaptcha](https://github.com/ambethia/recaptcha)和[achiu/rack-recaptcha](https://github.com/achiu/rack-recaptcha)）都使用控制器辅助方法来检查验证码是否有效。这很好，但我使用 OmniAuth-identity 进行简单的身份验证，它不提供控制器——用户的注册表单直接发布到 OmniAuth 处理程序。

```
 = form_tag "/auth/identity/register", id: 'loginform' do 
        = error_messages_for @identity, :header_message => "" 

        %table
          %tr{colspan: 2} 
            %td
              = label_tag :title
              = text_field_tag :title, @identity.try(:title), size: '32'
          %tr
            %td
              = label_tag :first_name, nil, class: 'required'
              = text_field_tag :first_name, @identity.try(:first_name), size: '32'
            %td
              = label_tag :last_name, nil, class: 'required'
              = text_field_tag :last_name, @identity.try(:last_name), size: '32'
          %tr
            %td
              = label_tag :email, nil, class: 'required'
              = email_field_tag :email, @identity.try(:email), size: '32'
            %td
              = label_tag :phone, nil, class: 'required'
              = text_field_tag :phone, @identity.try(:phone), size: '32'
          %tr
            %td
              = label_tag :password, nil, class: 'required'
              = password_field_tag :password, nil, size: '32'
            %td
              = label_tag :password_confirmation, nil, class: 'required'
              = password_field_tag :password_confirmation, nil, size: '32'
          %tr
            %td{colspan: 2} 
              = label_tag 'recaptcha', "Captcha", class: 'required'
              = recaptcha_tags
          %tr
            %td{halign: 'right', colspan: 2} 
              = submit_tag 'Register', class: 'button' 
```

我已经尝试了一切，从回发到自定义控制器，然后尝试点击注册路径，但这没有用，我见过的任何 gem 都无法进行模型验证（无论如何都违反了 MVC） .

我不拘泥于任何 reCAPTCHA 解决方案，我只需要一些可以防止自动注册的东西。我只想把设计放回这里并完成它，但我的团队之前已经把它撕掉了，出于某种原因讨厌它。有没有办法在表单和omniauth-identity之间注入控制器以便我们可以验证，或者是否有另一个可以进行模型验证的gem？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:48:28.017

因此，我最终得到的解决方案涉及向omniauth-identity 添加一个自定义钩子，它允许您在验证模型的登录等之前指定要调用的方法。我的组织的克隆有一个[拉取请求](https://github.com/rebelhold/omniauth-identity/pull/1)，它显示了如何执行此操作。这是不雅和可怕的，但它主要是有效的。

# python - python递归帕斯卡三角形

> ID：10628788
> 
> 赞同：4
> 
> 时间：2012-05-17T01:24:13.080
> 
> 标签：python, recursion, pascals-triangle

在完成使用迭代函数创建帕斯卡三角形的分配后，我尝试使用递归函数重新创建它。我已经到了可以让它生成与作为参数传入的数字相对应的单独行的地步。但是几次尝试让它产生整个三角形直到并包括该行都失败了。我什至尝试编写一个单独的函数，该函数迭代输入数字的范围，并使用迭代的数字调用递归函数，同时在返回该列表之前将各个行附加到列表中。所需的输出应该是一个列表列表，其中每个内部列表都包含一行三角形。像这样：

```
[[1], [1, 1], [1, 2, 1]...] 
```

相反，它返回一个完全由 1 填充的嵌套列表的混乱混乱。

这是有问题的递归函数，没有第二个函数来追加行（无论如何我真的想要1个全包函数）：

```
def triangle(n):
    if n == 0:
        return []
    elif n == 1:
        return [1]
    else:
        new_row = [1]
        last_row = triangle(n-1)
        for i in range(len(last_row)-1):
            new_row.append(last_row[i] + last_row[i+1])
        new_row += [1]
    return new_row 
```

需要说明的是，我已经完成了分配的任务，这只是为了更深入地了解递归......

迭代解决方案：

```
def triangle(n):
    result = []
    for row in range(n):
        newrow = [1]
        for col in range(1, row+1):
            newcell = newrow[col-1] * float(row+1-col)/col
            newrow.append(int(newcell))
        result.append(newrow)
    return result 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T01:41:19.297

您只需要通过递归传递一个列表列表，然后选择列表的最后一个元素（即三角形的最后一行）来构建您的新行。像这样：

```
def triangle(n):
    if n == 0:
        return []
    elif n == 1:
        return [[1]]
    else:
        new_row = [1]
        result = triangle(n-1)
        last_row = result[-1]
        for i in range(len(last_row)-1):
            new_row.append(last_row[i] + last_row[i+1])
        new_row += [1]
        result.append(new_row)
    return result 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T01:48:45.643

使用尾递归的快乐戴夫解决方案的替代方案：

```
def triangle(n, lol=None):
    if lol is None: lol = [[1]]
    if n == 1:
        return lol
    else:
        prev_row = lol[-1]
        new_row = [1] + [sum(i) for i in zip(prev_row, prev_row[1:])] + [1]
        return triangle(n - 1, lol + [new_row]) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-03T17:06:28.027

是的，正如 Karl Knechtel 也表明的那样，递归帕斯卡三角形可以这样：

```
P=lambda h:(lambda x:x+[[x+y for x,y in zip(x[-1]+[0],[0]+x[-1])]])(P(h-1))if h>1 else[[1]]
print(P(10)) 
```

# c# - 将字符串集合转换为字典

> ID：10628789
> 
> 赞同：1
> 
> 时间：2012-05-17T01:24:16.850
> 
> 标签：c#, linq

这可能是一个简单的问题，但答案却让我难以捉摸。

我有一组要转换为字典的字符串。

集合中的每个字符串都是我从正则表达式匹配中获得的以逗号分隔的值列表。我希望字典中每个条目的键是逗号分隔列表中的第四个元素，并且相应的值是逗号分隔列表中的第二个元素。

当我尝试直接调用 ToDictionary 时，我最终陷入了某种循环，似乎让我退出了我所在的 BackgroundWorker 线程：

```
var MoveFromItems = matches.Cast<Match>()
                           .SelectMany(m => m.Groups["args"].Captures
                           .Cast<Capture>().Select(c => c.Value));

var dictionary1 = MoveFromItems.ToDictionary(s => s.Split(',')[3], 
                                             s => s.Split(',')[1]); 
```

当我手动创建字典时，一切正常：

```
var MoveFroms = new Dictionary<string, string>();

foreach(string sItem in MoveFromItems) 
{
    string sKey = sItem.Split(',')[3]; 
    string sVal = sItem.Split(',')[1];

    if(!MoveFroms.ContainsKey(sKey))
        MoveFroms[sKey.ToUpper()] = sVal;
} 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T01:40:32.387

问题很可能是密钥有重复。你有三个选择。

**保留第一个条目** *（这是您当前在`foreach`循环中所做的）*

键只有一个条目，第一个出现 - 这意味着您可以拥有`Dictionary`：

```
var first = MoveFromItems.Select(x => x.Split(','))
                         .GroupBy(x => x[3])
                         .ToDictionary(x => x.Key, x => x.First()[1]); 
```

**保留所有条目，分组**

键将有多个条目（每个键返回一个`Enumerable`），并且您使用 a`Lookup`而不是 a `Dictionary`：

```
var lookup = MoveFromItems.Select(x => x.Split(','))
                          .ToLookup(x => x[3], x => x[1]); 
```

**保留所有条目，展平**

没有钥匙之类的东西，只是一个扁平的条目列表：

```
var flat = MoveFromItems.Select(x => x.Split(','))
                        .Select(x => new KeyValuePair<string,string>(x[3], x[1])); 
```

您也可以在此处使用元组 ( `Tuple.Create(x[3], x[1]);`) 代替。

* * *

**注意：**在这些情况下，您需要决定在哪里/是否希望键为大写或小写。我还没有做任何与此相关的事情。如果您想将密钥存储为上层，只需在上面的所有内容中更改`x[3]`为`x[3].ToUpper()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:27:08.433

这将使`Split`每个字符串`MoveFromItems`与`','`它们一起使第 4 项（第 3 索引）作为键和第 2 项（第 1 索引）作为值。

```
var dict = MoveFromItems.Select(x => x.Split(','))
                         .ToLookup(x => x[3], x => x[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T01:27:12.047

这将拆分每个项目并从第 4 个拆分值中选择键，并从第 2 个拆分值中选择值，全部放入字典中。

```
var dictionary = MoveFromItems.Select(s => s.Split(','))
                              .ToDictionary(split => split[3],
                                            split => split[1]); 
```

将字符串拆分两次是没有意义的，只是为了使用不同的索引。

这就像将拆分结果保存到一个局部变量中，然后使用它来访问索引 3 和 1。

但是，如果您确实不知道键是否会再次出现，那么毫无疑问，我会选择您实现的简单循环。

尽管您的循环中有一个小错误：

```
MoveFroms = new Dictionary<string, string>();

foreach(string sItem in MoveFromItems) 
{
    string sKey = sItem.Split(',')[3]; 
    string sVal = sItem.Split(',')[1];

    // sKey might not exist as a key
    if (!MoveFroms.ContainsKey(sKey))
    //if (!MoveFroms.ContainsKey(sKey.ToUpper()))
    {
        // but sKey.ToUpper() might exist!
        MoveFroms[sKey.ToUpper()] = sVal;     
    }
} 
```

`ContainsKey(sKey.ToUpper())`如果你真的想要所有大写的键，也应该在你的情况下这样做。

# asp.net-mvc-3 - 当用户导航到不相关的页面时，asp.net mvc3 持久化表单数据

> ID：10628798
> 
> 赞同：1
> 
> 时间：2012-05-17T01:26:12.957
> 
> 标签：asp.net-mvc-3

因此，用户填写了一个表格，然后决定点击一个不相关的链接，该链接恰好在页面上，例如免责声明页面。然后使用内部站点导航（不是浏览器后退按钮）返回到他所在的表单。返回的链接是一个 ActionLink。

将他的数据保存在表单上的最佳方法是什么。我想我必须序列化数据并保存它。我可以在转到其他页面之前进行 ajax 调用。我正在寻找性感的解决方案。可以在全球范围内处理它的东西。

这甚至是标准做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:34:13.240

HTTP 是无状态的。你是想带一些Stateful 性质吧！

如果您真的想保留数据，您可以保留 Session 变量并在那里访问它。您需要覆盖 click 事件并（在 javascript 中）通过 jQuery ajax post 将表单数据发送到操作，然后将其存储到 Session 中。当您返回此页面时，您可以稍后访问它。

**你真的想那样做吗？**我想 80% 的人都知道，一旦他们点击另一个链接，数据就会消失。您可能会像 stackoverflow 一样显示一些警告消息来询问“您确定要离开此页面吗”。

# php - 我可以使用 Facebook API 删除消息吗？

> ID：10628799
> 
> 赞同：1
> 
> 时间：2012-05-17T01:26:21.407
> 
> 标签：php, facebook, facebook-graph-api, sdk

我想删除指定的消息，例如用户选择的消息。但SDK返回“Uncaught GraphMethodException: Unsupported delete request”；

$mid = (通过 FQL 获取的 message_id);
$facebook->api('/'.$mid, 'delete');

有什么方法可以删除消息吗？（顺便说一句，事件可以通过这种方法删除。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:35:30.270

*您只能删除由您的应用创建的消息/帖子/照片*（不仅仅是用户选择的任何人）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:49:55.867

[开发人员页面的 Graph API消息](http://developers.facebook.com/docs/reference/api/message/)页面上没有记录发出 POST 以删除消息。从您收到的返回消息来看，API 不支持从 3rd 方应用中删除消息。

# objective-c - NSSearchField 不断调用方法

> ID：10628809
> 
> 赞同：4
> 
> 时间：2012-05-17T01:27:56.367
> 
> 标签：objective-c, cocoa, nstextfield, nssearchfield

我创建了一个`NSSearchField`存储最近搜索列表的列表。搜索字段连接到一种方法，该方法使用在搜索字段中键入的文本更新窗口中的标签。问题是标签会在用户输入搜索字段后立即更新，我需要标签在用户输入文本然后按 Enter 键后才更新。我可以用典型的来做到这一点，`NSTextField`但我想使用，`NSSearchField`所以我可以显示最近的搜索。请在下面查看我的代码并提供一些建议。谢谢。

接口文件：

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;

@property (weak) IBOutlet NSSearchField *searchField;
@property (weak) IBOutlet NSTextField *textField;

- (IBAction)searchString:(id)sender;

@end 
```

实现文件：

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize searchField, textField;

- (void)awakeFromNib {

    if ( [searchField respondsToSelector:@selector(setRecentSearches:)] ) {
        NSMenu *searchMenu = [[NSMenu alloc] initWithTitle:@"Search Menu"];
        [searchMenu setAutoenablesItems:YES];

        NSMenuItem *recentsTitleItem = [[NSMenuItem alloc] initWithTitle:@"Recent Searches" action:nil keyEquivalent:@""];
        [recentsTitleItem setTag:NSSearchFieldRecentsTitleMenuItemTag];
        [searchMenu insertItem:recentsTitleItem atIndex:0];

        NSMenuItem *norecentsTitleItem = [[NSMenuItem alloc] initWithTitle:@"No recent searches" action:nil keyEquivalent:@""];
        [norecentsTitleItem setTag:NSSearchFieldNoRecentsMenuItemTag];
        [searchMenu insertItem:norecentsTitleItem atIndex:1];

        NSMenuItem *recentsItem = [[NSMenuItem alloc] initWithTitle:@"Recents" action:nil keyEquivalent:@""];
        [recentsItem setTag:NSSearchFieldRecentsMenuItemTag];   
        [searchMenu insertItem:recentsItem atIndex:2];

        NSMenuItem *separatorItem = (NSMenuItem*)[NSMenuItem separatorItem];
        [separatorItem setTag:NSSearchFieldRecentsTitleMenuItemTag];
        [searchMenu insertItem:separatorItem atIndex:3];

        NSMenuItem *clearItem = [[NSMenuItem alloc] initWithTitle:@"Clear" action:nil keyEquivalent:@""];
        [clearItem setTag:NSSearchFieldClearRecentsMenuItemTag];
        [searchMenu insertItem:clearItem atIndex:4];

        id searchCell = [searchField cell];
        [searchCell setMaximumRecents:20];
        [searchCell setSearchMenuTemplate:searchMenu];
    }
}

- (IBAction)searchString:(id)sender {
    [textField setStringValue:[searchField stringValue]];
}

@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T02:44:27.050

如果您不想在代码中执行此操作，请查看您的 nib 文件，选择搜索字段并选择“发送整个搜索字符串”

像这样：

![发送整个搜索字符串](../Images/d8b57ae4858c04cf359706f27a4a7b13.png)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:38:34.217

您需要使用 [searchField.cell setSendsWholeSearchString:YES]

# php - 我怎样才能得到一个 url 段？

> ID：10628813
> 
> 赞同：0
> 
> 时间：2012-05-17T01:28:36.010
> 
> 标签：php, mysql, html

我有以下网址的最后一个网址段

[http://something.com/somefunc/10](http://something.com/somefunc/10)

那是数字10；

我真正的问题是我有一个表单需要发布 url 的操作

```
<form action="../something/somefunc/<?php echo $id>">
   //some code
</form> 
```

收到发布的东西后，我希望仍然能够获得正在考虑的产品的 id。我认为现在表单的操作 url 是我知道的唯一可以帮助保留这样一个 id 的方法。任何帮助表示赞赏，谢谢。

[**更新**]

嗯，以下所有答案都是正确的，不知道选择哪一个作为最佳答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:33:23.540

沿着这些路线的东西可能会起作用......

```
$url = 'http://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
$parts = parse_url($url);
$path = $parts['path'];
$keys = explode('/', $path);
echo $keys[4]; // `corresponding to the 4th url word` 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:32:07.873

抱歉，如果我误解了，但您不能通过 $_POST 数组获取您发布的表单的 ID 吗？ [http://www.w3schools.com/php/php_post.asp](http://www.w3schools.com/php/php_post.asp)

或者，如果 ID 在 URL 参数中，您可以通过 $_GET 变量访问它：http: [//www.w3schools.com/php/php_get.asp](http://www.w3schools.com/php/php_get.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T01:32:16.877

您可以使用 id 隐藏输入

`<input type="hidden" name="id" value="<?php echo $id; ?>">`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T01:32:19.357

1.您可以使用 POST 作为表单中的隐藏输入来传递产品 ID：

```
<input name="productid" id="productid" type="hidden" value="<?=$id ?>"> 
```

并在您发布到的页面中：

```
<? if (isset($_POST['productid'])) $id = $_POST['productid'] ?> 
```

2.Alternatively 使用 GET 并将其传递给查询字符串

```
action="../something/somefunc/[processingpage]?productid=<?=$id ?>" 
```

在 [处理页面] 中：

```
<? if (isset($_GET['productid'])) $id = $_GET['productid'] ?> 
```

# visual-studio - Visual Studio 解决方案资源管理器；添加新过滤器与新文件夹

> ID：10628817
> 
> 赞同：6
> 
> 时间：2012-05-17T01:30:01.057
> 
> 标签：visual-studio, visual-studio-2010, visual-c++

我来自 ac# 背景，正在学习 VC++。在 c# 中，我们只有“添加新文件夹”，没有“添加新过滤器”之类的东西。在 VC++ 中，我们可以添加一个新文件夹或一个新过滤器。

过滤器的原因是什么？是否只是为了帮助稍后在组合项目时进行链接，因此您只需为每个文件夹添加一个“附加包含目录”而不是一个，同时让您的解决方案资源管理器使用各种过滤器保持整洁？MS 在解决方案资源管理器中创建过滤器概念的主要原因是什么？

最佳实践（或共识）是什么，您喜欢将代码文件分成文件夹或过滤器吗？为什么？

# facebook - 使用“点赞”社交插件时，是否可以让点赞消息以与 Open Graph 仪表板中的对象预览相同的方式显示？

> ID：10628819
> 
> 赞同：1
> 
> 时间：2012-05-17T01:30:34.650
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk, facebook-opengraph

我有一个使用 HTML5 画布开发的音乐应用程序。由于选择了不同的歌曲，我有 jquery 动态更新浏览器中的 URL 以指向正确的歌曲。我也有更新 fb:like 元素的 jquery。通过使用调试工具，我能够缓存页面（因为我的服务器能够为提供的每个 URL 返回正确的元数据）。

当我这样做并喜欢我网站上的某些内容时，我最终会收到一条消息，上面写着“Sami 喜欢了一个页面”。下面有一些信息。

接下来，我使用 Open Graph curl 命令将 Recommend 操作（我创建的）添加到我网站上的给定 URL。现在，当我喜欢相同的网址时，我最终会收到一条消息，上面写着“Sami 推荐此链接”，并在下方显示一些信息。

我真正想做的是让这条消息显示“Sami 在网站上推荐一首歌”，当我在 Open Graph 中查看我的 Song 对象的预览时，这就是消息的样子。有没有办法做到这一点？

最好的，
萨米

编辑：可能很高兴注意到我还从网站上获得了一些额外的元信息（例如 og:site_name），但是这些东西没有被保存到我的 Open Graph 的 Actions 部分中（因为我不能使用 Open Graph 链接查看该信息以查看我当前的建议），尽管我可以使用调试器工具查看它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T01:21:37.720

Facebook 的点赞按钮“触发”了最通用的点赞操作，您可以将点赞按钮更改为使用“推荐”而不是“点赞”。在[like button](http://developers.facebook.com/docs/reference/plugins/like/)的文档中，在属性表中，您可以看到“action”属性，即：

> 显示在按钮上的动词。选项：“喜欢”、“推荐”

此外，当您“获得喜欢的按钮代码”时，您可以选择要显示的动词。

如果您想使用自己的操作，您需要在应用程序设置页面中定义它们，如[定义操作](http://developers.facebook.com/docs/opengraph/define-actions/)指南中所述。

# android - 如何在android的sqlite数据库浏览器中更改列数据？

> ID：10628822
> 
> 赞同：0
> 
> 时间：2012-05-17T01:31:06.007
> 
> 标签：android

我需要更改存储在我的 sqlite 数据库中的数据。实际上我需要更改其中一列中图像的路径。

**即在第 3 列中，我存储为 src="/image/first.png" 的数据。但现在我需要将路径更改为 src="/Seperatefolder/first.png"。请帮助我如何做到这一点？**

将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:40:49.653

按着这些次序：-

```
1) In Eclipse change view to DDMS and click file explorer.
2) your database file is located at data->data->package name.
3) push the .db file to desktop.
4) open firefox browser.
5) open tools and click sqlite manager.
6) if you dont have sqlite manager. go to addons and type sqlite.
7) install it.
8) open the database in sqlite browser and change data in it. 
```

# javascript - 使用 Google Geochart 绘制特定州的城市

> ID：10628823
> 
> 赞同：0
> 
> 时间：2012-05-17T01:31:15.410
> 
> 标签：javascript, google-visualization

当区域设置为该州时，我正在尝试使用 google Geochart 在特定城市中绘制标记（因此仅显示该州，而不是整个美国）。我可以获得要绘制的特定状态，但是当我尝试添加标记时，什么也没有显示。

当我尝试在城市上放置标记时没有显示

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Google Visualization API Sample</title>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
 google.load('visualization', '1.1', {packages: ['geochart']});

function drawMarkersMap() {
  var data = google.visualization.arrayToDataTable([
    ['City',  'Population', 'Area'],
    ['Los Angeles',     2761477,    1285.31]
  ]);

  var geochart = new google.visualization.GeoChart(
      document.getElementById('visualization'));
   geochart.draw(data, {width: 556, height: 347, region: 'US-CA', resolution: 'provinces'});
}

google.setOnLoadCallback(drawVisualization);
</script>
</head>
<body style="font-family: Arial;border: 0 none;">
<div id="visualization"></div>
</body>
</html> 
```

但是，当我按州进行绘制时，我可以绘制它。所以，换掉这个功能，它工作得很好

```
function drawVisualization() {
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Country');
  data.addColumn('number', 'Popularity');
  data.addRow(['US-CA', 1000]);

  var geochart = new google.visualization.GeoChart(
      document.getElementById('visualization'));
  geochart.draw(data, {width: 556, height: 347, region: 'US-CA', resolution: 'provinces'});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T00:57:51.610

我想到了。我必须在选项中启用 dataMode: 'Markers'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:33:24.390

GeoMaps 不支持省级地图（例如，US-CA）。在 GeoChart 中工作。[Google Visualization API 错误报告和功能](http://code.google.com/p/google-visualization-api-issues/issues/detail?id=279)请求上有一个功能请求。

# c# - FileNotFoundException 为什么尝试打开图像

> ID：10628828
> 
> 赞同：0
> 
> 时间：2012-05-17T01:32:30.027
> 
> 标签：c#, image, filenotfoundexception

我的一个项目文件夹中有一张图片：让我们说它在： `~/App_Themes/Default/images/SomeImage.png`

我想将此图像加载到 System.Drawing.Image 中，我该怎么做？

如果我尝试使用 Image 类的 FromFile 方法：

```
Image img = Image.FromFile("~/App_Themes/Default/images/SomeImage.png", true); 
```

我得到一个`FileNotFoundException`.

我读过一些建议将图像存储到服务器中，但这不是一个选项。有没有办法将它加载到图像中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:53:49.057

我有一个类似的问题。我的问题是我不小心在 App_Code 文件夹中添加了 Image 文件夹。我没有相应地更新代码，因此我遇到了异常。

一旦我从 App_Code 文件夹中删除了 Image 文件夹，问题就解决了。当然，我也可以更新代码中的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:47:10.787

您似乎使用相对路径而不是文件路径来定位图像。尝试这个：

```
var path = @"~/App_Themes/Default/images/SomeImage.png";

using (Image img = Image.FromFile(Server.MapPath(path)))
{
   do some stuff
} 
```

# python - 测试一组元组中的值

> ID：10628831
> 
> 赞同：3
> 
> 时间：2012-05-17T01:32:42.203
> 
> 标签：python

假设我们有以下集合 ,`S`和值`v`：

```
S = {(0,1),(2,3),(4,5)}
v = 3 
```

我想测试是否`v`是集合中任何对的第二个元素。我目前的做法是：

```
for _, y in S:
    if y == v:
        return True
return False 
```

我真的不喜欢这样，因为我必须把它放在一个单独的函数中，并且有些东西告诉我可能有更好的方法来做到这一点。任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T01:34:29.140

该`any`功能是为此量身定制的：

```
any( y == v for (_, y) in S ) 
```

如果您有一个不经常更改的大集合，您可能希望将 y 值投影到一个集合上。

```
yy = set( y for (_, y) in S )
v in yy 
```

当然，这仅在您在更改`yy`后计算一次`S`而不是在每次成员资格测试之前计算时才有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T01:39:15.997

您无法进行 O(1) 查找，因此您不会从拥有一个集合中获得太多好处。您可能会考虑构建第二个集合，特别是如果您将进行大量查找。

```
S = {(0,1), (2,3), (4,5)}
T = {x[1] for x in S}

v = 3
if v in T:
    # do something 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T01:46:39.360

简单的答案是[`any`](http://docs.python.org/library/functions.html#any)（见马塞洛的回答）。

替代方案是[`zip`](http://docs.python.org/library/functions.html#zip).

```
>>> zip(*S)
[(4, 0, 2), (5, 1, 3)]
>>> v in zip(*S)[1]
True 
```

# c# - Mvc 3 如何列出所有可用的路由？

> ID：10628835
> 
> 赞同：4
> 
> 时间：2012-05-17T01:33:53.480
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, routes

如何：

```
@Html.ActionLink("MyText","Index","Home") 
```

转换为：

```
<a href="/Home">MyText</a> 
```

而在它打印之前

```
<a href="/Home/Index">MyText</a> 
```

之后，我通过以下方式为所有控制器添加了默认操作：

```
 routes.MapRoute(
            "DefaultActionToIndex",
            "{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }); 
```

在我看来，辅助方法不仅仅是打印传入的任何内容，而是能够解析路由字典并找出“索引”不是必需的，因为它被设置为默认值。

问题是如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T02:05:08.567

路由可以双向工作，对于传入请求和 URL 生成，它 `System.Web.Routing.RouteTable.Routes`使用提供的值（在本例中`{ controller = "Home", action = "Index" }`）测试（按顺序）路由，并使用第一个匹配的路由。如果参数具有默认值，并且提供的值等于该默认值，则它不会包含在 URL 中。

# javascript - 淡入淡出的jquery tablesorter斑马不起作用？

> ID：10628840
> 
> 赞同：0
> 
> 时间：2012-05-17T01:35:24.193
> 
> 标签：javascript, jquery, fadein, fadeout, tablesorter

我遇到的问题可能是由于不了解 jquery 的工作原理，但无论如何我都会勇敢地问。

我在通过 ajax 调用实例化的几个表上使用 tablesorter。div 容器淡出，填充表格，然后淡入。

这是ajax调用

```
$.ajax({
    url: "url",
    type: "GET",
    cache: false,
    data: 'cmd=scriptcmd',
    datatype: 'html',
    success: function(data)
    {
        $("#middle").fadeOut('slow',function(){
            $("#middle").html(data);
            $("table").tablesorter({
                 widgets: ['zebra'],
                 sortList: [[3,0]]});
        }).fadeIn('slow');
    }
 }); 
```

所有这些工作正常

Tablesorter 在fadeOut 回调期间对表进行排序和斑马线处理。

排序与淡出回调一起干净地工作，但不是斑马小部件。单击要排序的列会触发斑马小部件，然后它可以正常工作。

我注意到如果我用 setTimeout 调用 tablesorter，即使使用 1 毫秒的计时器它也可以正常工作，但这在屏幕上很跳跃，我觉得这很 hacky。

有人关心演示正确的方法吗？提前谢谢各位

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:38:15.593

如果您希望 zebra 小部件按预期工作，您的表格行必须可见。查看[jQuery.tablesorter](http://tablesorter.com/docs/) zebra 小部件代码：

```
ts.addWidget({
    id: "zebra",
    format: function (table) {
        if (table.config.debug) {
            var time = new Date();
        }
        var $tr, row = -1,
            odd;
        // *** loop through the visible rows ***
        $("tr:visible", table.tBodies[0]).each(function (i) {
            $tr = $(this);
            if (!$tr.hasClass(table.config.cssChildRow)) row++;
            odd = (row % 2 == 0);
            $tr.removeClass(
            table.config.widgetZebra.css[odd ? 0 : 1]).addClass(
            table.config.widgetZebra.css[odd ? 1 : 0])
        });
        if (table.config.debug) {
            $.tablesorter.benchmark("Applying Zebra widget", time);
        }
    }
}); 
```

如您所见，它仅循环通过**可见**行。在您的代码中，动画完成后会触发 fadeOut 回调函数，因此在应用 zebra 小部件时行不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:30:31.473

据此，**[这些](http://mottie.github.com/tablesorter/docs/example-ajax.html)**例子似乎正在研究`jQuery v1.4.4`

我已经尝试过 jQuery v1.4.4 和 1.5.2 并且 zebra 可以工作，但不适用于 1.4.4、1.5.2 以上的版本。

```
$.ajax({
    url: '/echo/html/',
    dataType: 'HTML',
    type: 'POST',
    data: 'html=' + encodeURIComponent(data),
    success: function() {
        $('#tableContainer').fadeOut('slow', function() {
            $(this).html(data);
            $(this).children('.tablesorter').tablesorter({
                widgets: ['zebra'],
                sortList: [[3, 0]],
                widgetZebra: {
                    css: ["normal-row", "alt-row"]
                },
                debug: true
            });
        }).fadeIn('slow');

    }
});​ 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/yZREq/6/)**

希望这可以帮助

# android - 使用 GSON 解析 JSON - 设置类层次结构

> ID：10628843
> 
> 赞同：0
> 
> 时间：2012-05-17T01:35:43.850
> 
> 标签：android, json, gson

我似乎无法理解如何使用 GSON 设置我的类层次结构以进行 JSON 转换。

我的 JSON 看起来像：

```
{
  "Users": {
    "id": 1,
    "name": "Jim",
    "location": "Huntsville"
  }
} 
```

我的用户列表类看起来像：

```
public class UserList {
  public static List<User> Users;

  @SuppressWarnings("static-access")
  public void setUserList(List<User> userList){
      this.Users = userList;
  }

  public List<User> getUserList(){
      return Users;
  } 
```

}

最后是一个看起来像这样的用户类：

```
public class User {
  private int id;

  private String name;

  private String location;

  public int getId(){
      return id;
  }

  public String getName(){
      return name;
  }

  public String getLocation(){
      return location;
  }

  public String toString(){
      return("User: [id=" + id + "], [name=" + name + "], [location=" + location + "]");
  } 
```

}

有人介意给我一个正确的方向吗？我会很感激的！

编辑：

忘了显示我的解析代码..（只是从 SDCard 读取示例 JSON 文件）

```
 BufferedReader br = new BufferedReader(new FileReader(Environment.getExternalStorageDirectory() + "/user.json"));
        UserList userList = gson.fromJson(br, UserList.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T22:55:46.697

你确定你的示例 JSON 是正确的吗？它似乎不是一个事物列表，只定义了一个用户。

此外，您的用户获取器和设置器应遵循获取/设置模式并被调用

```
public List<User> getUsers()
public void setUsers(List<User> users) 
```

此外，您可以遵循 Java 小写约定并指示 Gson 使用不同的大小写。假设您的 JSON 中只有一个用户条目。如果您将 Users 属性更改为 User 而不是列表，这将让您解析您提供的代码段。

```
@SerializedName("Users")
private User user; 
```

因此，如果您想要一个用户列表，您应该在 json 中找到它，这应该可以让您将其解析为一个列表，！请注意，您需要包含对象，例如：

```
{"users" : [{id:"one"}, ...]} 
```

正如评论中指出的那样。

# java - 通过回车键提交方法？

> ID：10628845
> 
> 赞同：0
> 
> 时间：2012-05-17T01:36:22.543
> 
> 标签：java, android

当用户在 editText 字段中点击 ENTER 键时，我想提交一个方法。

```
<EditText android:layout_height="wrap_content"
    android:layout_width="fill_parent" 
    android:imeOptions="actionDone"
    android:singleLine="true" 
 /> 
```

如果用户点击完成，这会导致进入屏幕上的下一个 UI 元素。但我想假提交一个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:49:00.640

你需要`OnEditorActionListener`在你的`EditText`. 这是一个例子：

```
myEditText.setOnEditorActionListener(new OnEditorActionListener() {
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {

        if (actionId == EditorInfo.IME_ACTION_DONE) {
            submitButton.performClick();
            return true;
        }

        return false;
    }
}); 
```

# c# - Silverlight for Windows Phone 中的文本换行问题

> ID：10628846
> 
> 赞同：2
> 
> 时间：2012-05-17T01:36:35.383
> 
> 标签：c#, silverlight, windows-phone-7, listbox, word-wrap

我在为 Windows Phone 7 制作的应用程序的列表框中有一个推特提要。我遇到的问题是推文的文本被从列表框的边缘切断，而不是环绕到一个像这样的新行：

![](../Images/543d70f0bebcf50f3d7e87213a213489.png)

列表框位于可以正常工作的全景图内。这是我的代码：

```
<ListBox x:Name="cheapyListBox" Height="500" HorizontalAlignment="Left" Margin="0,0,0,0" VerticalAlignment="Top" Width="400" ScrollViewer.VerticalScrollBarVisibility="Hidden" HorizontalContentAlignment="Left" >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Height="132" Tap="Message_OnTap">
                <Image Source="{Binding ImageSource}" Height="73" Width="73" VerticalAlignment="Top" Margin="0,10,8,0"/>
                <StackPanel Width="Auto">
                    <!--<TextBlock Text="{Binding UserName}" FontSize="28" Margin="12,0,0,0" /> -->
                    <TextBlock Text="{Binding Message}" TextWrapping="Wrap" FontSize="24" />
                    <TextBlock Text="{Binding Date}" TextWrapping="Wrap" FontSize="20" />
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
 </ListBox> 
```

如何让推文文本环绕而不是被切断？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T01:53:48.447

由于您的内部 StackPanel 嵌套在水平 Stackpanel 中，因此它没有深度限制，因此 TextBlocks 随着文本变长而无限扩展。

有多种方法可以解决此问题，但一种简单的方法（如果您知道所需的宽度）是将内部 StackPanel 的宽度设置为有限数。

例如：

```
<ListBox x:Name="cheapyListBox" Height="500" HorizontalAlignment="Left" Margin="0,0,0,0" VerticalAlignment="Top" Width="400" ScrollViewer.VerticalScrollBarVisibility="Hidden" HorizontalContentAlignment="Left" >

        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" Height="132" Tap="Message_OnTap">
                    <Image Source="{Binding ImageSource}" Height="73" Width="73" VerticalAlignment="Top" Margin="0,10,8,0"/>
                    <StackPanel Width="400">
                        <!--<TextBlock Text="{Binding UserName}" FontSize="28" Margin="12,0,0,0" /> -->
                        <TextBlock Text="{Binding Message}" TextWrapping="Wrap" FontSize="24" />
                        <TextBlock Text="{Binding Date}" TextWrapping="Wrap" FontSize="20" />
                    </StackPanel>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

希望这可以帮助！

# r - 具有预先计算值的 geom_boxplot

> ID：10628847
> 
> 赞同：16
> 
> 时间：2012-05-17T01:36:38.437
> 
> 标签：r, ggplot2, boxplot

在过去，我已经能够使用 ggplot2 创建箱线图，方法是提供下须线、下分位数、中位数、上分位数和上须线以及 x 轴标签。例如：

```
DF <- data.frame(x=c("A","B"), min=c(1,2), low=c(2,3), mid=c(3,4), top=c(4,5), max=c(5,6))
ggplot(DF, aes(x=x, y=c(min,low,mid,top,max))) +
geom_boxplot() 
```

将为两组数据（A 和 B）制作箱线图。这不再适用于我。我收到以下错误：

```
Error: Aesthetics must either be length one, or the same length as the dataProblems:x 
```

有谁知道ggplot2中是否发生了一些变化？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T08:30:56.287

这适用于 ggplot2 版本 0.9.1（和 R 2.15.0）

```
library(ggplot2)

DF <- data.frame(x=c("A","B"), min=c(1,2), low=c(2,3), mid=c(3,4), top=c(4,5), max=c(5,6))

ggplot(DF, aes(x=x, ymin = min, lower = low, middle = mid, upper = top, ymax = max)) +
  geom_boxplot(stat = "identity") 
```

![在此处输入图像描述](../Images/8509d8fddccd72bf2bfc05d45fa947d6.png)

[请参阅此处](http://docs.ggplot2.org/current/geom_boxplot.html)的“使用预先计算的统计信息”示例

# javascript - 转换后的 SVG 元素上的 getBoundingClientRect() 应该返回什么？

> ID：10628851
> 
> 赞同：9
> 
> 时间：2012-05-17T01:37:21.230
> 
> 标签：javascript, svg, specifications

[`getBoundingClientRect()`](http://www.w3.org/TR/cssom-view/#the-getclientrects-and-getboundingclientrect-methods)今天我测试了在旋转的 SVG 元素上使用时会发生什么。

### 测试： http: [//phrogz.net/svg/getBoundingClientRect-on-rotated-elements.html](http://phrogz.net/svg/getBoundingClientRect-on-rotated-elements.html)

结果是：

*   Chrome、Safari、Opera 和 IE 似乎在计算元素的本地（未转换）边界框，然后返回该*边界框*的客户端矩形。这可能导致客户端矩形比看起来合适的要大。

*   另一方面，Firefox 会裁剪客户端矩形以适合元素本身。

                          ![两种情况的视觉外观；](../Images/a25984e5d7a82fad5bf3c58612ab0302.png)  

根据规范，哪种行为是正确的？

*对于它的价值，我[更喜欢 Firefox 的行为](http://phrogz.net/getboundingclientrect-is-lame-for-svg)，但是（不了解规范）**认为**Firefox 的偏差应该被[视为一个错误](https://bugzilla.mozilla.org/show_bug.cgi?id=755947)。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:31:04.617

非火狐浏览器似乎没有给出有用的结果，也似乎不符合相关规范。

[CSSOM 视图模块](http://dev.w3.org/csswg/cssom-view/#the-getclientrects-and-getboundingclientrect-methods)委托给 SVG 规范，该规范说它是变换后的[紧密边界框，](http://www.w3.org/TR/SVG/types.html#__svg__SVGLocatable__getBBox)而不是变换后的紧密边界框，所以我认为我正确地实现了它。

# c# - 获取 Outlook 电子邮件的属性

> ID：10628852
> 
> 赞同：1
> 
> 时间：2012-05-17T01:37:27.330
> 
> 标签：c#, outlook

我的 c sharp 程序目前获取 Outlook 电子邮件并将其导入数据集。但是，我只得到每封电子邮件的主题。

我正在`Microsoft.Office.Interop.Outlook.Folder olCurrFolder;`使用这个变量来获取主题（olCurrFolder 从另一个循环中设置）。为了获得主题，我这样做：

```
intMailCount = olCurrFolder.Items.Count;

for (int i = 1; i <= intMailCount; i++)
{
    strSubject = olCurrFolder.Items[i].Subject;
    strEmailReceived = olCurrFolder.Items[i].Received;
} 
```

如您所见，我也在尝试获取收到的日期，但`Items[i].Received`不起作用。当我输入一段时间后，智能感知不会拉出任何东西，`Items[i]`并且一条消息说它将在运行时解决。我不知道其他字段叫什么（即接收日期、发件人、大小）。

是否有包含我要查找的字段名称的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:47:32.850

Outlook MailItem 对象的文档在这里：http: [//msdn.microsoft.com/en-us/library/aa210946 (v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/aa210946(v=office.11).aspx)

您可以使用该`ReceivedTime`属性来获取收到的日期和时间。

智能感知有时不适用于 VSTO 的原因是许多属性返回`dynamic`. 动态被视为支持所有可以想象的方法和属性的对象。这就是阻止智能感知工作的原因。如果您使用不存在的方法，它将编译，但在运行时失败。

我发现 MSDN 文档在 VSTO 中处理动态时非常宝贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-17T00:16:21.900

如果您不想为每一行投射对象，您可以这样做：

```
 for (int i = 0; i < items.Count; i++)
        {
            var mailItem = items[i] as Outlook.MailItem;
            if (mailItem != null)
            {
                SenderName = mailItem.SenderName;
                //etc...
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T00:58:54.313

我就是这样做的

```
for (int i = 1; i <= items.Count; i++)
{
    if (items[i] is Outlook.MailItem)
    {
        SenderName = ((Outlook.MailItem)inbox.Items[i]).SenderName;
        SenderEmail =((Outlook.MailItem)inbox.Items[i]).SenderEmailAddress;
        Subject = ((Outlook.MailItem)inbox.Items[i]).Subject;
        Time = ((Outlook.MailItem)inbox.Items[i]).CreationTime.ToString(); 
```

# vbscript - 如何根据月份和年份将文件移动到适当的文件夹？

> ID：10628853
> 
> 赞同：1
> 
> 时间：2012-05-17T01:37:35.867
> 
> 标签：vbscript, string-parsing

我有这个非常复杂的要求。

我们有一堆从 ftp 服务器下载到本地目录中的文件夹中的压缩文件。

然后我们使用下面的代码解压缩文件。

```
Set objZip = CreateObject("XStandard.Zip")

Set FSO = CreateObject("Scripting.FileSystemObject")
Set fldr = FSO.GetFolder("C:\MUSK\FTP\MainFolder\")

For Each fil In fldr.Files
If LCase( Right( fil.Name, 4 ) ) = ".zip" Then
zipFilePath = fil.Path
objZip.UnPack zipFilePath, ("C:\MUSK\FTP\Current\")
End If
Next 
```

到目前为止，一切都很好。

这就是问题所在。

这些下载的文件具有以下命名约定：

文件名_月-日-年.zip

示例：假设今天是 2012 年 5 月 16 日，文件名如下所示：

myFile_5-16-2012.zip

我们的要求是获取下载的压缩文件并将它们放在正确的文件夹中。

例如，我们有根据月份和年份命名的文件夹。

示例：我们有 JAN2012、FEB2012 等

所以以 myFIle_5-16-2012.zip 为例，myFile_5-16-2012.zip 是针对 MAY2012 的。

我们想使用上面的脚本来获取 myFile_5-16-2012.zip 并将其放在适当的文件夹中。在此示例中，适当的文件夹将是 MAY2012，然后将其解压缩。

基本上， MonthYear 文件夹将替换它：

objZip.UnPack zipFilePath, ("C:\MUSK\FTP\Current\")

换句话说，它将是 MAY2012 或任何 MonthYear 组合，而不是 Current 文件夹。

这可能吗？

我很乐意澄清。对不起，如果我混淆了任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:10:33.430

这很简单。我会：

1.  创建一个将文件名转换为适当的 MMMYYYY 格式的函数
2.  使用FileSystemObject判断步骤1创建的文件夹名称是否存在，如果需要就创建
3.  将完整目录传递给您的 XStandard.Zip 对象

在此处查看 FileSystemObject 支持的方法：http: [//msdn.microsoft.com/en-us/library/z9ty6h50 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/z9ty6h50(v=vs.85).aspx)

你至少需要`.FolderExists`and 。`.CreateFolder`

* * *

我快速编写的 VBScript 可能会使用一些错误检查等。享受

```
' parse date, assumes file name is in foo_M-D-YYYY.ext format
Function parseDate(s)
    dim dt
    dt = CDate(split(split(s, "_")(1), ".")(0))
    parseDate = Monthname(Month(dt)) & Year(dt)
End Function 
```

# mobile - 在移动 Safari 中刷新页面之前显示提示

> ID：10628854
> 
> 赞同：0
> 
> 时间：2012-05-17T01:38:05.473
> 
> 标签：mobile, safari, refresh, prompt

当用户单击刷新按钮时，是否可以在移动 Safari 中获得通知。我想防止用户意外离开页面，因为他们可能在页面上有一些未保存的数据。我有一个代码在 safari 桌面中显示提示，但对于 touch safari，它只是不显示任何内容并刷新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:46:59.327

你做的代码是这样的吗？

```
$(window).bind('beforeunload', function() {
    return "You have unsaved stuff";
}); 
```

​ 手机版Safari好像不行

看到这个可能的重复：[在移动 safari 中使用 onbeforeunload 是否有替代方法？](https://stackoverflow.com/questions/6205989/is-there-an-alternative-method-to-use-onbeforeunload-in-mobile-safari)

# iphone - 如何在标签栏上方粘贴 iAddBanner 并将其保留在那里

> ID：10628856
> 
> 赞同：0
> 
> 时间：2012-05-17T01:38:19.247
> 
> 标签：iphone, position, storyboard, tabbar

我正在尝试使用 iAddBanner，并将其放在标签栏的正上方。这给了我一些问题，尤其是在表格视图中......

有没有人成功做到这一点？

干杯，汤米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T03:09:28.533

我设法自己解决了这个问题。

我最终将广告横幅添加为我的 tabbarcontroller 的子视图。

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    [iAdBanner setFrame:CGRectMake(0, 381, 200, 32)];
    [self.tabBarController.view addSubview:iAdBanner];
    //The inset is for the current tableview to get all the content on top of the adbanner
    UIEdgeInsets inset = UIEdgeInsetsMake(0, 0, 50, 0);
    self.tableView.contentInset = inset;
    adVisible = true;
} 
```

# objective-c - Objective-C：当 NSConnection 到分布式对象失败时避免异常

> ID：10628858
> 
> 赞同：0
> 
> 时间：2012-05-17T01:38:23.243
> 
> 标签：objective-c, exception, distributed-objects, nsconnection

我正在使用 Objective-C 分布式对象 (DO) 将数据从一个应用程序（从网络收集数据）共享到另一个应用程序（Quartz Composer 中的一个补丁）。当与远程对象的连接失败时（当我关闭第一个应用程序时），我得到：

```
5/16/12 8:17:06.373 PM Quartz Composer: *** EXCEPTION IGNORED: connection went invalid while waiting for a reply because a mach port died 
```

在那之后，Quartz 组合被挂起。即使在我恢复第一个应用程序之后，它仍然挂起。我希望 Quartz 补丁重新连接。

我正在使用通知中心关闭旧对象，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(connectionDidDie)
                                             name:NSConnectionDidDieNotification
                                           object:theConnection]; 
```

现在，我的 counnectionDidDie 看起来像这样：

```
- (void) connectionDidDie
{
    NSLog(@"Connection died and we detected it");
    [[self proxyObject] release];
    [self setProxyObject:nil];
    theConnection = nil;
} 
```

我还检查以确保连接仍然存在，就在访问 proxyObject 的任何部分之前，如下所示：

```
if ([NSConnection defaultConnection]) { // this line triggers the exception
    // access proxyObject
} 
```

我也试过

```
if ([theConnection isValid]) { // this line triggers the exception
    // access proxyObject
} 
```

在这两种情况下，正是这个测试触发了这个异常。

当我关闭第一个应用程序时，我能做些什么来防止 Quartz 挂起，谁拥有出售的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:08:08.057

我从来没有找到一种方法来足够快地关闭 DO 连接，以防止 QC 以每秒 30-60 帧的速度绘制，在调用 connectionDidDie: 之前先测试连接（并崩溃）。最终，我决定使用 DO，只是为了获取对象的初始副本，然后对其进行深层复制，然后在没有任何尝试访问它的情况下终止 DO 连接。在您深入研究之后，DO 似乎并不是那么好的解决方案。:(

# android - 如何以编程方式更改 ACRA 的“交互模式”设置

> ID：10628860
> 
> 赞同：3
> 
> 时间：2012-05-17T01:38:58.153
> 
> 标签：android, acra

我正在我的 Android 应用程序中实现 ACRA。我希望默认情况下它的交互模式是无声的，但是如果我看到我的应用程序的新版本可用，则在崩溃时“敬酒”用户并显示一条消息以更新他们的应用程序副本。

然而，似乎 ACRA 交互模式必须在应用程序初始化时进行硬编码和加载。有什么方法可以在那个时候设置模式而不是通过硬编码设置？例如，我希望控制下面复制的“mode =”设置。

```
@ReportsCrashes(formKey = "xxxxxxxxxxxxxxxx", 
                mode = ReportingInteractionMode.TOAST,
                resToastText = R.string.crash_toast_text)
public class MyApplication extends Application ... 
```

我看到[ACRA 第 85 期](http://code.google.com/p/acra/issues/detail?id=85)为 Toast 参数添加了资源设置器，但它是否也具有配置交互模式的能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:40:56.847

也许这个？我没有尝试但似乎很有用（在开始时）

[http://www.java2s.com/Open-Source/Android/App/acra/org/acra/ErrorReporter.java.htm](http://www.java2s.com/Open-Source/Android/App/acra/org/acra/ErrorReporter.java.htm)

# python - 如何从方法内引用对象变量

> ID：10628861
> 
> 赞同：0
> 
> 时间：2012-05-17T01:39:08.753
> 
> 标签：python

我仍在学习使用对象。我将 vertices() 定义为在 Graph 中返回顶点（初始化为 vs）的方法。我知道有一种更简洁、更优雅的方式来编写 vertices() 但究竟是如何逃避我的。

这也特别与 Think Complexity 中的练习 2.5 相关：http: [//greenteapress.com/complexity/html/book003.html#toc12](http://greenteapress.com/complexity/html/book003.html#toc12)

```
class Graph(dict):
    def __init__(self, vs=[], es=[]):

        for v in vs:
            self.add_vertex(v)

    def add_vertex(self, v):
        """Add a vertex to the graph."""
        self[v] = {}

    def vertices(self):
        v = []
        for i in range(len(self)):
            v.append(i)
        return v 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:34:27.000

> 我将 vertices() 定义为在 Graph 中返回顶点（初始化为 vs）的方法。

由于包含字典`vs`的`__init__`键，我想这就是你想要的。

```
 def vertices(self):
        return self.keys() 
```

如果是这样，您根本不需要`vertices`方法 - 只需始终使用`Graph.keys()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:58:00.243

您可以使用列表理解将其设为一行：

```
def vertices(self):
    return [i for i in range(len(self))] 
```

# iphone - 如何使用 setValue:forKey: 函数与 NSArray

> ID：10628864
> 
> 赞同：2
> 
> 时间：2012-05-17T01:39:58.063
> 
> 标签：iphone, objective-c

我正在尝试使用这些功能`-setValue:forKey:`并使用`-valueForKey:`

例子：

```
NSArray *rootarr = [[NSArray alloc] init];
NSArray *array = [[NSArray alloc] initWithObjects:@"name", @"address", @"title", nil];
[rootarr setValue:array forKey:@"n"];
NSArray *getArr = [rootarr valueForKey:@"n"]; 
```

但是我得到的getArr数组不等于我设置的数组（数组）。

你能告诉我我遇到了什么问题吗？以及使用这些功能的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T01:43:32.137

`NSArray`的`setValue:forKey:`方法用于[键值编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)，而不是使用数组作为关联容器。你需要使用`NSMutableDictionary`.

```
NSMutableDictionary *rootDict = [NSMutableDictionary dictionary];
NSArray *array = [[NSArray alloc] initWithObjects:@"name", @"address", @"title", nil];
[rootDict setValue:array forKey:@"n"];
NSArray *getArr = [rootDict valueForKey:@"n"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:43:36.780

数组不是键值存储，您似乎想将其用作。我认为你想要一个 NSDictionary 代替（或者更准确地说是 NSMutableDictionary 如果你想在它创建后修改它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-21T13:57:17.413

根据[苹果文档](https://developer.apple.com/documentation/foundation/nsarray/1408301-setvalue?language=objc) `setValue:forKey:`

使用指定的值和键对数组的每个项目调用 setValue:forKey:。

实际用途是当您想为数组的每个元素设置相同的值时

```
UILabel *label1 = [[UILabel alloc]init];
UILabel *label2 = [[UILabel alloc]init];
NSArray *arr = @[label1, label2];
[arr setValue:@"bye" forKey:@"text"];
NSLog(@"%@ %@",label1.text, label2.text);   // bye bye 
```

在您的示例中，“getArr”是一个空数组，因为您的“rootarr”没有元素，否则您会收到`setValue:forUndefinedKey:`不符合分配键的包含对象

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T01:42:48.857

创建对象后，您无法将对象添加到`NSArray`其中。你必须使用`NSMutableArray`才能做到这一点。

# php - mysql_insert_id() 0，但插入成功

> ID：10628865
> 
> 赞同：0
> 
> 时间：2012-05-17T01:40:01.167
> 
> 标签：php, mysql, insert

这是表模式：

```
CREATE TABLE `USERS` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(30) DEFAULT '',
  `first_name` varchar(15) DEFAULT '',
  `last_name` varchar(15) DEFAULT '',
  `password` varchar(15) DEFAULT '',
  `gender` int(1) DEFAULT '-1',
  PRIMARY KEY (`id`)
) 
```

在 php 中：

```
 $sql = 'INSERT INTO Users (email, first_Name, last_Name, password, gender ) VALUES                ("'.$email.'", "'.$first_name.'", "'.$last_name.'", "'.$password.'", '.$gender.')';

try {
    $db = getConnection();
    $stmt = $db->prepare($sql);  
    $stmt->execute();
    //$user = $stmt->fetchObject();
    echo 'last id was '.mysql_insert_id();

    $db = null;

    } catch(PDOException $e) {
            echo '{"error":{"text":'. $e->getMessage() .'}}'; 
    } 
```

我不知道为什么 mysql_insert_id() 返回 0。没有其他进程在运行。id 设置为自动递增。插入完成并在 db 中看到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T01:43:53.920

您`PDO`用于与数据库交互。用于[`PDO::lastInsertId()`](http://php.net/PDO.lastInsertId)获取最后插入的 id。

```
$stmt->execute();
echo 'last id was ' . $db->lastInsertId(); 
```

`mysql_insert_id()`是`ext/mysql`扩展的一部分。您不能混合匹配来自两个扩展的功能来与同一连接进行接口。

# java - Java3D：按增量旋转宇宙

> ID：10628869
> 
> 赞同：3
> 
> 时间：2012-05-17T01:40:49.487
> 
> 标签：java, rotation, java-3d

我正在尝试开发一种 Java3D 方法，用于以从当前观察方向到对象中心方向的增量旋转宇宙。

换句话说，我希望 3D 宇宙旋转 100 步，这样我单击的对象会逐渐移动到屏幕中心。

我已经在 StackOverflow（以及 Web）上查看了 3D 旋转问题的各种答案，但几乎所有这些答案都特定于旋转对象，而不是世界本身。

我还尝试查看我的线性代数，但这并不能帮助我确定满足我要求的特定于 Java 的函数。

到目前为止，我已经尝试定义一组增量 XYZ 坐标，并在每次通过循环时动态使用 lookAt()。这几乎可行，但是我看不到任何方法可以从一个完整的旋转传递到下一个完整的旋转传递中保留或获取视点值；每个旋转通道都从查看原点开始。

我还尝试通过获取目标和开始变换之间的差异并除以增量数（并删除缩放值）来定义旋转矩阵，然后在每次通过时将该增量旋转矩阵添加到当前视图方向环形。这对于增量值 1 来说效果很好。但是将旋转分成两个或多个增量总是会生成“BadTransformException：ViewPlatform 上方的非全等变换”错误。（我已在 Java3D API 参考中阅读了有关此异常的少量文档；它可能是用乌尔都语编写的，因为我可以从中得到所有信息。似乎没有像这样的 3D 上下文术语的简单英语定义Google 可以看到的任何地方的“仿射”或“剪切”或“全等”或“均匀”。）

然后，我尝试将我的代码提供一个 AxisAngle4d，获取角度（以弧度为单位），将该角度划分为我想要的增量，并按增量角度值旋转。好吧，这旋转了世界，但离我选择的对象不远，而且没有我能看到的任何模式。

绝望中，我尝试在提取的角度上使用 rotX 和 rotY （将 Z 设置为端点），甚至盲目地在那里扔了几个 Math.cos() 和 Math.sin() 包装器。仍然没有喜悦。

我的直觉告诉我，我已经掌握了基础知识，并且在 Java3D 中有一个相对简单的解决方案。但很明显，我正在撞到一堵理解墙。与其继续这样做，我想我会继续看看这里是否有人可以提出 Java3D 中的解决方案。代码是首选，但我愿意尝试遵循线性代数中的解释，如果这能让我找到代码解决方案。

下面是我使用 Java 的 Timer 方法来安排轮换增量的方法的核心。我需要帮助的部分就在 ActionListener 之前。大概这就是魔术代码会创建某种增量旋转值的地方，我可以（在循环中）将其应用于当前视图方向，以便旋转宇宙而不会出现“不一致”错误。

```
 private void flyRotate(double endX, double endY, double endZ)
  {
    // Rotate universe by increments until target object is centered in view
    // 
    // REQUIREMENTS
    // 1\. Rotate the universe by NUMROTS increments from an arbitrary (non-origin)
    //   3D position and starting viewpoint to an ending viewpoint using the
    //   shortest path and preserving the currently defined "up" vector.
    // 2\. Use the Java Timer() method to schedule the visual update for each
    //   incremental rotation.
    //
    // GLOBALS
    // rotLoop contains the integer loop counter for rotations (init'd to 0)
    // viewTransform3D contains rotation/translation for current viewpoint
    // t3d is a reusable Transform3D variable
    // vtg contains the view platform transform group
    // NUMROTS contains the number of incremental rotations to perform
    //
    // INPUTS
    // endX, endY, endZ contain the 3D position of the target object
    //
    // NOTE: Java3D v1.5.1 or later is required for the Vector3D getX(),
    //   getY(), and getZ() methods to work.

    final int delay = 20; // milliseconds between firings
    final int pause = 10; // milliseconds before starting

    // Get translation components of starting viewpoint vector
    Vector3d viewVector = new Vector3d();
    viewTransform3D.get(viewVector);
    final double startX = viewVector.getX();
    final double startY = viewVector.getY();
    final double startZ = viewVector.getZ();

    // Don't try to rotate to the location of the current viewpoint
    if (startX != endX || startY != endY || startZ != endZ)
    {
      // Get a copy of the starting view transform
      t3d = new Transform3D(viewTransform3D);

      // Define the initial eye/camera position and the "up" vector
      // Note: "up = +Y" is just the initial naive implementation
      Point3d  eyePoint = new Point3d(startX,startY,startZ);
      Vector3d upVector = new Vector3d(0.0,1.0,0.0);

      // Get target view transform
      // (Presumably something like this is necessary to get a transform
      // containing the ending rotation values.)
      Transform3D tNew = new Transform3D();
      Point3d viewPointTarg = new Point3d(endX,endY,endZ);
      tNew.lookAt(eyePoint,viewPointTarg,upVector);
      tNew.invert();

      // Get a copy of the target view transform usable by the Listener
      final Transform3D tRot = new Transform3D(tNew);

      //
      // (obtain either incremental rotation angle
      // or congruent rotation transform here)
      //

      ActionListener taskPerformer = new ActionListener()
      {
        public void actionPerformed(ActionEvent evt)
        {
          if (++rotLoop <= NUMROTS)
          {
            // Apply incremental angle or rotation transform to the
            // current view
            t3d = magic(tRot);

            // Communicate the rotation to the view platform transform group
            vtg.setTransform(t3d);
          }
          else
          {
            timerRot.stop();
            rotLoop = 0;
            viewTransform3D = t3d;
          }
        }
      };

      // Set timer for rotation steps
      timerRot = new javax.swing.Timer(delay,taskPerformer);
      timerRot.setInitialDelay(pause);
      timerRot.start();
    }
  } 
```

就像这些事情经常发生的情况一样，通过退后一步重新思考问题，可能有更好的方法来完成我在这里尝试完成的工作。我也愿意接受建设性的建议。

非常感谢您对此提供的任何帮助！

* * *

更新

让我尝试更具体地定义目标。

我有一个包含许多 Sphere 对象的 Java3D 宇宙。我可以单击每个对象并动态获取其预定义的 XYZ 坐标。

在任何时候，我都在用“相机”在特定的 XYZ 位置和视图方向查看所有当前可见的对象，这些对象包含在保存旋转矩阵和平移向量的变换中。

（注意：我既可以旋转宇宙，也可以使用鼠标进行平移，而无需单击对象。因此，有时包含相机当前旋转矩阵和平移向量的视图变换不会指向具有已知 XYZ 的任何目标对象坐标。）

给定相机变换和对象的 XYZ 坐标，我想围绕我当前的相机位置旋转宇宙，直到所选对象位于屏幕中央。我想将其作为一系列离散增量旋转来执行，每个旋转都被渲染，以便可见宇宙在查看窗口中看起来“旋转”，直到所选对象居中。（我正在跟进这个对象的翻译；那部分至少是有效的！）

示例：假设相机在原点，“向上”沿 Y 轴为 1.0，并且所选对象以我左侧十个单位为中心。假设我有一个 180 度的视野，我可以单击屏幕左侧一直可见的球体的一半，以及屏幕顶部和底部之间的一半。

当我说出这个词时，宇宙中的每个可见物体都应该从我的左到右以一系列均匀间隔的步长（比如说 50 个）移动，直到所选物体在屏幕中完全居中。

在编码方面，我需要编写 Java3D 代码，通过它我可以围绕一条穿过我的相机位置（当前位于 0,0,0）并且与 Y 轴完全对齐的假想线旋转宇宙宇宙坐标系。（即，旋转轴扫过一个平面，其中 Z 始终等于相机位置的 Z 分量。）

复杂的要求是：

1.  相机可以在 3D 空间中的某个位置进行平移，而不是原点。
2.  相对于相机的当前位置和视图，对象可以位于 3D 空间中的任何位置，包括可见但完全不在屏幕上（视锥体之外）。
3.  旋转应该走最短的路径——一次不要让宇宙旋转超过 180 度。
4.  作为旋转过程的第一步，不应该有任何可见宇宙的“跳跃”或“扭曲”；即，应该保留当前的“向上”向量（不是宇宙的绝对“向上”向量）。

那么问题来了：给定一个保存（虚拟）相机当前平移和旋转信息的变换，以及目标对象在宇宙空间中的 XYZ 坐标，Java3D 代码将围绕相机以 N 个相等的步长旋转宇宙，直到该对象是在屏幕中央？

大概这个解决方案分为两部分：首先，一些 3D 数学（用 Java3D 表示）来计算仅给定相机变换和对象的 XYZ 坐标的增量旋转信息；其次，一个循环[将增量旋转应用于当前查看变换并更新屏幕]，直到循环计数器等于增量数。

打败我的是 3D 数学部分。我没有看到也无法从当前相机变换和目标对象位置获取某种形式的增量旋转信息，然后我可以将其应用于相机变换。至少，我还没有找到任何不会导致跳跃或扭曲或不等增量移动步骤的方法（或“ViewPlatform 上方的非全等变换”异常）。

必须有一个简单的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T00:15:49.383

因此，如果我理解正确，您的目标是旋转相机，使其以所选对象为中心，但旋转不应是任意矢量，而应保持相机的“向上”方向。

一个可能可行的解决方案：

1.  首先，计算必要的“向上”向量的旋转角度（我们称之为 A），以便相机面向您想要的对象。
2.  其次，计算沿“向上”向量所需的平移距离/方向（我们称之为 D），以便对象根据需要与相机对齐。这可能只是相机/对象之间 Z/Y 坐标的差异。
3.  通过将 A/D 与 N 相乘来找到 dA 和 dD，N 是您想要使运动平滑的增量数。
4.  在定时器/时间循环中，将 A/D 分别增加 dA/dD N 次，将它们变为最终值。请记住，您正在围绕它的“向上”矢量和当前位置旋转相机，而不是关于原点。

如果您想要更平滑、更逼真的旋转，请考虑使用[SLERP](http://en.wikipedia.org/wiki/Slerp)。

# python - 删除用引号括起来的所有内容或 Python 中的数字？

> ID：10628870
> 
> 赞同：0
> 
> 时间：2012-05-17T01:40:57.270
> 
> 标签：python

假设我有这个字符串：

```
myString="'Hello'+yes+'Whats hello'6" 
```

我正在寻找一种方法来删除引号中的所有内容

所以，它会变成：

```
"+yes+" 
```

因为，'Hello' 和 'Whats hello' 用引号括起来。6是一个数字。

有没有办法做到这一点？也许使用正则表达式？我尝试使用 For 循环来执行此操作，但我想我的逻辑不是那么好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T01:44:47.720

```
Python 2.7.2 (default, Aug 19 2011, 20:41:43) [GCC] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import re
>>> re.sub(r"('[^']*'|\d)", "", "'Hello'+yes+'Whats hello'6")
'+yes+'
>>> 
```

`(...|...)`匹配一件事或另一件事；`'[^']*'`匹配除引号内的引号以外的任何内容；`\d`匹配数字。 `re.sub(pattern, replacement, string)`用替换替换每个模式实例。

ps请注意，`'`结果中的只是python在字符串周围加上引号！（您可以在 python 中使用单引号或双引号；如果字符串本身不包含任何字符串，python 在打印字符串时更喜欢单引号）。

**更新**- 这是你想要的吗？

```
>>> import re
>>> re.sub(r"('[^']*'|(?<![a-zA-Z])\d(?![a-zA-Z]))", "", "'Hello'+yes+'Whats hello'6")
'+yes+'
>>> re.sub(r"('[^']*'|(?<![a-zA-Z])\d(?![a-zA-Z]))", "", "+ye5s")
'+ye5s' 
```

# java - 谷歌地图覆盖画布上的 asynctask onPostExecute

> ID：10628877
> 
> 赞同：1
> 
> 时间：2012-05-17T01:42:17.067
> 
> 标签：java, android, maps, android-asynctask, overlay

我有一个谷歌地图 mapView，上面有一个自定义叠加层。此叠加获取用户正在查看的当前坐标，然后访问一个网站，在该网站上获取图像以叠加到地图上。这是一种不好的做法，因为 Web 请求可能需要几秒钟并完全锁定 UI 线程，因此我正在尝试解决该问题。

我正在尝试通过使用 AsyncTask 来修复它，该任务将抓取图像并在它准备好时将其绘制在地图上。我正在尝试将 Canvas 传递给 AsyncTask 以便在准备好时可以进行绘制，但不会进行绘制，并且我注意到绘制时画布大小为 0x0。

在我尝试将其放入 AsyncTask 之前，所有绘图代码都可以正常工作，只是它很慢。

这一切都在我的自定义叠加层中：

```
public class MapOverlaySevereWeather extends com.google.android.maps.Overlay
{
    private GeoPoint lastTopLeft = new GeoPoint(0, 0);
    private GeoPoint lastBotRight = new GeoPoint(0, 0);
    private Bitmap mapImage;
    private Canvas thisCanvas;
    private MapView mMapView;

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow)
    {
        super.draw(canvas, mapView, shadow);

        if( shadow || MapOverlayHandler.isInMotion() )
        { return; }

        mMapView = mapView;
        thisCanvas = canvas;
        Rect curShown = canvas.getClipBounds();
        GeoPoint topLeft = mapView.getProjection().fromPixels(0,0);
        GeoPoint bottomRight = mapView.getProjection().fromPixels(curShown.right, curShown.bottom);

        if( !topLeft.equals(lastTopLeft) || !bottomRight.equals(lastBotRight) )
        {
            int sizeX = mapView.getWidth();//curShown.right - curShown.left;
            int sizeY = mapView.getHeight();////curShown.bottom - curShown.top;
            float minLat = (float)bottomRight.getLatitudeE6() / 1E6f;
            float minLon = (float)topLeft.getLongitudeE6() / 1E6f;
            float maxLat = (float)topLeft.getLatitudeE6() / 1E6f;
            float maxLon = (float)bottomRight.getLongitudeE6() / 1E6f;
            String fileUrl = "url that gets image based off lat long size";

            new SevereWeatherAsync().execute(new AsyncOverlayData(fileUrl, canvas, curShown));
        }

        lastTopLeft = topLeft;
        lastBotRight = bottomRight;
        return;
    }

    private class SevereWeatherAsync extends AsyncTask<AsyncOverlayData, Void, AsyncOverlayData>
    {
        @Override
        protected void onPostExecute(AsyncOverlayData result)
        {
            super.onPostExecute(result);
            Log.w("Severe","Drawing on " + thisCanvas.getHeight() + " x " + thisCanvas.getWidth());
            Paint paint = new Paint();
            paint.setAlpha(100);        
            thisCanvas.drawBitmap(mapImage, null, result.getCurRect(), paint);
            mMapView.invalidate();
        }

        @Override
        protected AsyncOverlayData doInBackground(AsyncOverlayData... params)
        {
            Log.w("Severe","getting image");
            URL imageFileURL = null;       
            try
            {
                imageFileURL = new URL(params[0].getURL());
                HttpURLConnection conn = (HttpURLConnection) imageFileURL.openConnection();
                conn.setDoInput(true);
                conn.connect();
                InputStream is = conn.getInputStream();
                mapImage = BitmapFactory.decodeStream(is);
            }
            catch(Exception e)
            { return null; }        

            return params[0];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:45:50.950

我怀疑发生的事情是您传递给 AsyncTask 的画布在图像下载时无效。

我认为更好的解决方案是将 result.getImage() 返回的位图保存到实例变量中，然后重绘叠加层本身。

所以你会有类似 ..

```
public class MyOverlay extends Overlay {
    private Bitmap mBitmap;
    private MapView mMapView;

    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        // .. your drawing code
        if(mBitmap == null) {
            // Better download your image!
            new SevereWeatherAsync().execute(new AsyncOverlayData(fileUrl, void, curShown));
        } else {
            //Draw the bitmap!
            canvas.drawBitmap(mBitmap, ...);
        }
    } 

    private class SevereWeatherAsync extends AsyncTask<> {
        @Override
        protected AsyncOverlayData doInBackground(AsyncOverlayData... params) {
            //You background work..
        }

        @Override
        protected void onPostExecute(AsyncOverlayData result) {
            mBitmap = result.getImage();

            //Now we can redraw the overlay!
            mMapView.invalidate();
        }
    }       

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:25:48.990

我认为在 AsycTask 的`onPostExecute`方法中使用“thisCanvas”变量是不正确的。您不应该将画布存储在 Overlay 类的成员变量中并在其他方法/内部类中使用它。canvas 变量只保证在 draw 方法的生命周期内有效。因此，在 AsyncTask 完成后，您应该将生成的图像存储在 Overlay 的成员变量中，然后重新绘制覆盖。如果位置仍然相同，则绘制代码应该只绘制保存的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:50:33.287

所以这不是我想要的方式，我不确定谷歌地图的设计方式，但我删除了 AsyncTask，现在在用户与地图交互时自己添加和删除叠加层。

基本上在他们触摸地图时移除覆盖并设置一个计时器，然后每次如果他们再次触摸并且计时器仍在计数我重置它。如果计时器最终完成，那么我将叠加层添加回......

* * *

因此，当您删除 AsyncTask 时，代码是然后放入 Draw 中，还是您必须在 draw 之外覆盖 onPostExecute？

# javascript - 从 WebSQL 中的 javascript 将 currentDate 插入 WebSQL 的问题

> ID：10628879
> 
> 赞同：2
> 
> 时间：2012-05-17T01:42:38.767
> 
> 标签：javascript, sqlite, datetime, web-sql, iso8601

我正在尝试使用当前日期和时间来执行 INSERT 和 SELECT 语句，但数据没有插入到 WebSQL 中。下面是我的代码：

```
CREATION..
myDb.transaction(function(tr) {
        tr.executeSql('CREATE TABLE IF NOT EXISTS stInfo (keyNum INTEGER NOT NULL PRIMARY KEY, timestamp varchar(255) );');         
});

INSERTION
function insert() {
 var timeStamp = getCurrentDate();  returns in format YYYY-MM-DD HH:MM
myDb.transaction(function(tr) {
          tr.executeSql("INSERT INTO stInfo('keyNum','timestamp') values(215424," + timeStamp + ");");              
 });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:07:40.097

旧帖子，但无论如何我都会回答它。最简单的是：

```
tr.executeSql('INSERT INTO stInfo (keyNum, timestamp) VALUES (?,?)',["215424", timestamp]); 
```

另外，注意你的双引号和单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:36:10.693

使用单引号将时间戳括起来：

```
tr.executeSql("INSERT INTO stInfo('keyNum','timestamp') values(215424,'" + timeStamp + "')"); 
```

# c++ - Boost Graph Library - 来自外部向量的权重属性

> ID：10628882
> 
> 赞同：0
> 
> 时间：2012-05-17T01:43:10.317
> 
> 标签：c++, templates, boost, boost-graph

我究竟做错了什么？

```
#include <vector>

#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/dijkstra_shortest_paths.hpp>

using namespace std;

typedef boost::adjacency_list<> Graph;

void dijkstra(Graph &g, vector<double> &edge_weights, int source, vector<double> &dist,   vector<int> &prev) {
boost::dijkstra_shortest_paths(g, source,
                                 boost::weight_map(boost::make_iterator_property_map(edge_weights.begin(), get(boost::edge_index, g))));

} 
```

（编译：**​​g++ main.cc -L/usr/local/boost/**）

错误：

> /usr/include/boost/graph/detail/adjacency_list.hpp:2665：错误：从“boost::detail::error_property_not_found”类型的临时值初始化“boost::detail::error_property_not_found&”类型的非常量引用无效'</p>

我认为问题可能是没有从边缘到整数的默认映射。如果是这样，我如何定义一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T20:49:42.610

您的图表没有`edge_index`您在创建`iterator_property_map`. 您将需要将这样的属性添加到您的图表中并填写它。请参阅[Boost Graph Library: Bundled Properties 并迭代边缘](https://stackoverflow.com/questions/7772400/boost-graph-library-bundled-properties-and-iterating-across-edges)和[所有边缘的 edge_index 为零？](https://stackoverflow.com/questions/7283128/edge-index-zero-for-all-edges)对于需要做的事情。

# graphics - xcode：尝试捕获部分屏幕

> ID：10628886
> 
> 赞同：0
> 
> 时间：2012-05-17T01:43:59.153
> 
> 标签：graphics, xcode4, screenshot

我一定做错了什么，但我可以在以下方面使用一些建议：

我正在尝试在 iPad 和 iPad 视网膜上捕获部分屏幕。

我可以让纵向视图正常，但我不能让横向视图的右侧处于界限内。

这是我正在使用的代码（在 UIGetScreenImage() 被禁止之前我没有这个问题）..

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
UIGraphicsBeginImageContext(screenRect.size);
CGContextRef ctx = UIGraphicsGetCurrentContext(); 
[[UIColor blackColor] set]; 
CGContextFillRect(ctx, screenRect);
[self.view.layer renderInContext:ctx];
UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGImageRef imageRef = CGImageCreateWithImageInRect([img CGImage], CGRectMake (0, 100, self.view.bounds.size.width, (self.view.bounds.size.height - 200)));

UIImage *img2Save = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);
// Request to save the image to camera roll
UIImageWriteToSavedPhotosAlbum(img2Save, self, nil, nil); 
```

这是我为纵向和横向获得的两张图像：

![肖像](../Images/4db0d82e7f4c36c1f9d8a9d547b1ee6c.png)

![景观](../Images/18cad60d557393dd9e4fe7d3b239db24.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:49:45.487

如果您将窗口用作框架，它将始终以纵向模式显示。您可以将 screenRect 设置为全屏视图，该视图应在纵向和横向模式下均有效。

# android - Android 4.0 调试问题 - DDMS 错误？

> ID：10628887
> 
> 赞同：1
> 
> 时间：2012-05-17T01:44:01.693
> 
> 标签：android, android-emulator

我正在尝试调试 SipDemo SDK 示例。但是，DDMS 无法连接到模拟器上运行的应用程序（Android 4.0 API 级别 14）。模拟器等待调试，eclipse调试器无法打开端口。此外，ddms 报告 VM 调试端口无法打开。

确认以下，

1.  端口未被使用
2.  ADB Server/Eclipse/Machine 已重新启动
3.  主机文件检查 127.0.0.1
4.  检查首选项以选择 127.0.0.1 作为 ADBHOST
5.  为 Android 4.0 选择了合适的 VM
6.  使用 Comodo 防火墙，所以在禁用防火墙后尝试调试。

应用程序期望的端口与调试器正在使用的端口存在差异。一个用于 Android 操作系统，一个用于运行 IDE 的实际主机？

***图像和日志***

**设备处理窗口**

[http://imageshack.us/photo/my-images/94/androiddebugging.png](http://imageshack.us/photo/my-images/94/androiddebugging.png)

**VM 调试端口错误（在 Eclipse 启动时）**

[http://imageshack.us/photo/my-images/820/vmdebugport8700.png](http://imageshack.us/photo/my-images/820/vmdebugport8700.png)

**LogCat 视图**

```
05-16 14:46:20.547: W/ActivityThread(1094): Application com.example.android.sip is waiting for the debugger on port 8100... 
```

**安慰**

```
[2012-05-16 10:46:17 - SipDemo] Android Launch!
[2012-05-16 10:46:17 - SipDemo] adb is running normally.
[2012-05-16 10:46:17 - SipDemo] Performing com.example.android.sip.WalkieTalkieActivity activity launch
[2012-05-16 10:46:17 - SipDemo] Automatic Target Mode: Preferred AVD 'Android40' is available on emulator 'emulator-5554'
[2012-05-16 10:46:18 - SipDemo] Application already deployed. No need to reinstall.
[2012-05-16 10:46:18 - SipDemo] Starting activity com.example.android.sip.WalkieTalkieActivity on device emulator-5554
[2012-05-16 10:46:20 - SipDemo] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.android.sip/.WalkieTalkieActivity }
[2012-05-16 10:46:20 - SipDemo] Attempting to connect debugger to 'com.example.android.sip' on port 8630
[2012-05-16 10:46:40 - SipDemo] Launch error: Failed to connect to remote VM. Connection timed out. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:31:12.537

**测试 SIP 应用程序**

要测试 SIP 应用程序，您需要以下内容：

运行 Android 2.3 或更高版本的移动设备。SIP 通过无线运行，因此您必须在实际设备上进行测试。***在 AVD 上进行测试将不起作用。*** 一个 SIP 帐户。有许多不同的 SIP 提供商提供 SIP 帐户。如果您要拨打电话，还必须拨打有效的 SIP 帐户。

测试 SIP 应用程序：

在您的设备上，连接到无线网络（设置 > 无线和网络 > Wi-Fi > Wi-Fi 设置）设置您的移动设备以进行测试，如在设备上开发中所述。在您的移动设备上运行您的应用程序，如在设备上开发中所述。如果您使用的是 Eclipse，则可以使用 LogCat（Window > Show View > Other > Android > LogCat）在 Eclipse 中查看应用程序日志输出。

[http://developer.android.com/guide/topics/connectivity/sip.html](http://developer.android.com/guide/topics/connectivity/sip.html)

# c# - 从 windows c# 程序到基于 web 的 javascript 的消息传输

> ID：10628891
> 
> 赞同：0
> 
> 时间：2012-05-17T01:44:36.700
> 
> 标签：c#, javascript, windows, wcf, web

> **可能重复：**
> [如何从 web javascript 应用程序获取桌面 c# 程序中的变量](https://stackoverflow.com/questions/10606706/how-to-get-variable-in-desktop-c-sharp-program-from-web-javascript-application)

遇到一个问题，有两个应用程序。一个是 c# 中的桌面应用程序，另一个是 javascript 中的 Web 应用程序。运行桌面应用程序中的一些变量或信息需要传输到 Web 应用程序。有谁知道如何解决这个问题？有没有人想提供更多细节来解决这个问题？

消息队列（MSMQ）可以解决，我可以试试。和数据库。哪一个可以有更好的实时效果？WCF 可以解决，但它比那些方法复杂。如果有人有这个 WCF 的代码来桥接 windows 程序和 web 脚本之间的连接，可以发给我吗？

我也在想，如果有任何物理缓冲区可以被 c# windows 和 javascript 使用。但javascript似乎无法访问物理缓冲区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:53:37.280

您可以只使用 HTTP，在桌面 C# 应用程序中启动一个非常简单的 HTTP 服务器，在任何已知但未使用的端口上侦听 127.0.0.1 并响应获取发送 JSON 等的请求。

严格来说，您甚至不必解析请求，如果它们都相同，您只需拥有 TCP 服务器并将 HTTP 标头和您的数据发送到任何连接的 TCP 客户端即可。

> 是的，桌面 c# 可以启动 tcp 和 http，还可以与 Web 服务器进行套接字通信。那么，基于web的javascript如何接收桌面c#发送的数据包。因为基于 Web 的 JavaScript 需要数据和流程。

在您的桌面应用程序中，您使用 HttpListener（*而不是*HttpClient）来执行[类似](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)的操作，而在 Web 应用程序中，您可以使用类似`http://localhost:1234/customerData`或其他的东西。如果您只想在页面加载时获取数据，则可以传递包含所有值的有效 .js 并将其包含在页面中，如果您想要更动态的内容，则可以使用[jQuery](http://jquery.com/)之类的东西。

# ios - 无法以 ios 管理员身份查看分发选项卡

> ID：10628896
> 
> 赞同：0
> 
> 时间：2012-05-17T01:45:31.107
> 
> 标签：ios, distribution

我是 iOS 开发的管理员，但只是 Safari Development 的成员。我看不到分发选项卡，但我想创建一个 Ad HOC。

在没有 Safari 管理员权限的情况下，有什么方法可以解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:10:56.143

看起来唯一的办法就是成为 safari 的管理员。

# javascript - 如何在 IE7 上重新加载指定查询字符串的页面？

> ID：10628897
> 
> 赞同：0
> 
> 时间：2012-05-17T01:45:37.423
> 
> 标签：javascript, internet-explorer-7

我想用某个查询字符串重新加载当前页面。我正在尝试以下代码：

```
document.location.search = '?key=value'; 
```

它在现代浏览器（如 Firefox 或 Safari）上运行良好，但不适用于 IE7。

我尝试了另一个代码：

```
document.location.search = '?key=value';
document.location.reload(true); 
```

但它在*没有*查询字符串的情况下重新加载当前页面，这不是我想要的。

如何在 IE7 上重新加载指定查询字符串的页面？

*更新*：对不起，这不是关于 document.location.search 的问题。问题的原因是“onclick”属性上缺少“return false”。感谢所有给我建议的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:48:07.817

我无法在我的 Mac 上进行测试，但这行得通吗？

```
location = '?key=value'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:51:16.893

有没有你不能直接设置窗口位置的原因？

```
window.location.href = window.location.href + '?key=value'; 
```

请记住，您可能希望添加一些条件逻辑来追加`&`，而不是`?`URL 已经包含查询字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T01:53:41.630

我想你想要`document.location.replace(URL)`你必须提供完整的新 URL。

# ruby-on-rails - 使用 rails 标记的日志记录，我如何记录消息的日志级别？

> ID：10628900
> 
> 赞同：8
> 
> 时间：2012-05-17T01:46:07.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging, ruby-on-rails-3.2

我的 Rails 记录器配置当前记录当前时间和 UUID，如下所示：

```
config.logger = ActiveSupport::TaggedLogging.new(Logger.new("#{Rails.root}/log/#{ENV['RAILS_ENV']}.log", 'daily'))
config.log_tags = [Proc.new {Time.now.strftime('%Y-%m-%d %H:%M:%S.%L')}, :uuid] 
```

有没有办法记录当前消息的日志级别？

即，如果我调用 logger.debug，则标签 [DEBUG] 将添加到消息中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T14:57:08.297

Railscasts 展示了如何通过覆盖 SimpleFormatter#call 方法来覆盖记录器以输出日志消息的严重性：

```
class Logger::SimpleFormatter
  def call(severity, time, progname, msg)
    "[#{severity}] #{msg}\n"
  end
end 
```

有关详细信息，请参阅[http://railscasts.com/episodes/56-the-logger-revised](http://railscasts.com/episodes/56-the-logger-revised)。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-17T08:28:51.753

我将 MyApp::Application.config.log_level 添加到日志标签中，它对我有用。

```
config.log_tags = [Proc.new {Time.now.strftime('%Y-%m-%d %H:%M:%S.%L')}, :uuid, Proc.new {MyApp::Application.config.log_level}] 
```

# ios - iOS 上的 Google Analytics（分析）在调度时返回 NO，没有调试输出

> ID：10628902
> 
> 赞同：6
> 
> 时间：2012-05-17T01:46:32.420
> 
> 标签：ios, google-analytics

在尝试实现适用于 iOS 的 Google Analytics SDK 时，我遇到了两堵砖墙。

第一个是在执行此代码后`application:DidFinishLaunchingWithOptions:`

```
[[GANTracker sharedTracker] startTrackerWithAccountID:@"UA-XXXXXXX-YY"
                                       dispatchPeriod:10
                                             delegate:self];
[[GANTracker sharedTracker] setDebug:YES]; 
```

..然后尝试跟踪任何内容或调用`dispatch`，不会记录任何调试消息。我`NSLog`在跟踪呼叫之前和之后添加了行，并且肯定可以达到代码。

其次，当我尝试进行手动调度时，它会返回`NO`. 我在网上看到的所有其他问题都是`dispatch`退货的地方，`YES`但不知何故无法正常处理。如果`dispatch`真的返回怎么办`NO`？

我尝试添加`NSError *`对跟踪方法的引用，这些方法实际上成功了（没有错误，函数返回`YES`）。但是这些事件肯定不会定期发送，因为超过 24 小时后我们在 GA 帐户上没有看到任何内容。

*编辑：*我`NSLog`在两个委托方法（`hitDispatched:`和`trackerDispatchDidComplete:eventsDispatched:eventsFailedDispatch:`）中也有调用，而且它们都没有被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:38:11.700

i think you should check this to delegate method of GANTracker

```
- (void)trackerDispatchDidComplete:(GANTracker *)tracker
              eventsDispatched:(NSUInteger)hitsDispatched
          eventsFailedDispatch:(NSUInteger)hitsFailedDispatch{

//print or check number of events failed or success

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:49:22.613

*咳嗽*

我拼错了`#define`在我的应用程序委托中启动跟踪器对象。其他文件拼写正确，因此出现了记录语句，但是当我在跟踪器启动之前尝试记录时，它没有显示。

哎呀。好吧，至少现在在 SO 上有一个不错的 Google Analytics 故障排除帖子！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T21:52:25.270

调度可能依赖于调用线程的运行循环 - 您是否有可能从辅助线程运行它，在调度假设给您回电时可能不存在的辅助线程？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T06:23:53.370

```
//Delegate is set to 'nil' instead of class instance which implements the delegate methods.    
[[GANTracker sharedTracker] startTrackerWithAccountID:@"UA-XXXXXXX-YY"
                                   dispatchPeriod:10
                                         delegate:nil]; 
```

在您的情况下，假设 UIApplicationDelegate 可能正在实现**GANTrackerDelegate**，则消息调用应将委托设置为**'self'**。

干杯！！
阿马尔。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T23:55:15.660

你还没有启用dryRun吗？仔细检查：

```
[[GANTracker sharedTracker] setDryRun:NO]; 
```

还可以尝试 dispatchSynchronous，它会在发送时阻塞，但如果事情不在同一个线程上，可能会有所帮助：

```
[[GANTracker sharedTracker] dispatchSynchronous]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T01:20:40.553

刚刚从头开始检查，派送完美工作的意思

a）您的设备在某种程度上有所不同（我仍然在特定的 iPad 3 上从 Apple 测试人员的未解决崩溃中得到解决，所以这不会是一个巨大的惊喜）

b）您的代码在某种程度上有所不同 - 这对您来说更容易修复。

* * *

对于 a) 没有建议，只能针对您可能获得的所有设备进行测试，对于 b) 我只能说什么对我有用：

*   [在此处](https://developers.google.com/analytics/devguides/collection/ios/resources)下载 1.4 SDK
*   得到了谷歌示例项目 `git clone https://code.google.com/p/google-mobile-dev.analytics-end-to-end/`
*   配置 final/AnalyticsSample 启动，稍微改变了源

（trackEvent::::: 从示例中调用，应用程序手动重新启动，因为需要调度调用的时间段为零）

```
- (BOOL)application:(UIApplication *)application
    didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  [[GANTracker sharedTracker] startTrackerWithAccountID:kGANAccountId
                                         dispatchPeriod:0
                                               delegate:self];

    NSLog(@"Dispatch%@", [[GANTracker sharedTracker] dispatch] ? @"ed Successfully": @" Failed");

  [self.window addSubview:tabBarController.view];
  [self.window makeKeyAndVisible];

  return YES;
} 
```

就是这样，日志说`Dispatched Successfully`，我想值得一试。

# ios - 如何在 iOS 中重现“盒子”过渡动画？

> ID：10628907
> 
> 赞同：2
> 
> 时间：2012-05-17T01:47:15.613
> 
> 标签：ios, animation, uiviewcontroller, core-animation, transition

我想在 iOS 中的两个视图控制器之间构建动画过渡，类似于 PowerPoint 中的“Box”过渡或 Keynote 中的“Reflection”过渡。

你可以在这里看到它，在 2:10：http: //youtu.be/1fLQg5hFQQg?t= [2m10s](http://youtu.be/1fLQg5hFQQg?t=2m10s)

最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:51:16.197

那将是一个需要重新创建的复杂动画。您需要使用一个 CAAnimationGroup 来组合几个同时运行的不同动画。您希望在动画离开的视图控制器和动画到位的视图上围绕 y 轴进行旋转动画，旋转中心从屏幕上抬起。

您必须调整变换以使其具有透视图（您在变换中的 .m34 记录中添加一个小值）。这是因为 CA 动画默认是正交的（它们不显示透视。）

可以使用 CALayer 的特殊子类创建反射，该子类可让您创建图层的副本。我现在正在空白那个层子类的名称。您在 y 轴上设置了 1 个比例为 -1 的副本以将其倒置并产生变暗效果。我自己从来没有做过，但我在书本和网上看到了几个例子。

# javascript - Javascript - 警报前的命令 > 返回 false

> ID：10628910
> 
> 赞同：0
> 
> 时间：2012-05-17T01:48:00.063
> 
> 标签：javascript, return, alert

以下内容阻止表单在 Chrome、FF 和 Safari 中提交 - 但在 IE 和 Opera 中不提交：

JavaScript：

```
function validateAll() {
var fFirstname = document.getElementById('firstname');
    if (fFirstname.value == "") {
        invalidFirstname.style.display = "block";
        firstname.className = "Standard-Req";
        firstname.focus();
        alert('Please fill out First Name.');
        return false;
    } 
```

的HTML：

```
<form name="Contact" action="somefile.php" method="post" onSubmit="return validateAll();">
<input type="text" name="firstname" class="Standard" id="firstname">
<input type="submit" name="Submit" value="Send Message" class="btn-Standard">
</form> 
```

现在，如果我在 ALERT 之前去掉 3 个命令，它可以在 IE 和 Opera 中工作......就像这样：

```
function validateAll() {
var fFirstname = document.getElementById('firstname');
    if (fFirstname.value == "") {
        alert('Please fill out First Name.');
        return false;
    } 
```

如果没有输入数据，我真的希望能够更改课程，显示错误图标（invalidFirstname）并聚焦该字段......这可能吗？

# c# - MembershipProvider 类包括类项目中的引用

> ID：10628916
> 
> 赞同：0
> 
> 时间：2012-05-17T01:49:07.700
> 
> 标签：c#, asp.net

我正在创建一个新的 MemebershipProvider 类。但是在我的项目中，MemebershipProvider 类不在引用中，所以我查看了 System.Web.Security 以包含在我的项目中，所以我包含了参考 System.Web 但我仍然没有得到对 MembershipProvider 的引用类有谁知道我必须做什么才能包含 MembershipProvider 类参考

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:53:04.767

```
System.Web.ApplicationServices 
```

# ruby-on-rails - Rails 报告找不到存在的列

> ID：10628917
> 
> 赞同：6
> 
> 时间：2012-05-17T01:49:15.757
> 
> 标签：ruby-on-rails, postgresql, activerecord

我目前正在尝试`WHERE`使用 Rails 对表进行复杂的搜索，问题是我得到了错误：

```
PG::Error: ERROR:  column "email" does not exist
LINE 1: SELECT "bans".* FROM "bans"  WHERE (Email='' AND IP='' AND (...
                                        ^
: SELECT "bans".* FROM "bans"  WHERE (Email='' AND IP='' AND (Username='NULL' )) 
```

而且我知道该列确实存在，并且这样做`rails dbconsole`会给我以下信息：

```
Jungle=> select * from bans;
 id | Username | IP | Email | Reason | Length | created_at | updated_at 
----+----------+----+-------+--------+--------+------------+------------
(0 rows) 
```

所以这肯定是在数据库中，有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T02:23:31.383

SQL 列名不区分大小写，除非引用，标准规定标识符应规范化为大写，但[PostgreSQL 规范化为小写](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)：

> 引用标识符也使其区分大小写，而未引用的名称总是折叠为小写。例如，标识符`FOO`、`foo`和`"foo"`被 PostgreSQL 认为是相同的，但`"Foo"`和`"FOO"`与这三个和彼此不同。（PostgreSQL 中将不带引号的名称折叠为小写与 SQL 标准不兼容，SQL 标准说不带引号的名称应该折叠为大写。因此，`foo`应该相当于`"FOO"`不`"foo"`按照标准。如果你想编写可移植的应用程序，你建议始终引用特定名称或从不引用它。）

您`Email`在 SQL 中引用：

```
SELECT "bans".* FROM "bans"  WHERE (Email='' ... 
```

但 PostgreSQL 抱怨`email`：

```
column "email" does not exist 
```

您的未加引号`Email`被视为`email`因为 PostgreSQL 将标识符规范化为小写。听起来您通过双引号创建了具有大写名称的列：

```
create table "bans" (
    "Email" varchar(...)
    ...
) 
```

或通过使用`:Email`来标识迁移中的列。如果您在创建列名时引用它，那么它不会被规范化为小写（或 SQL 标准大小写中的大写），您必须将其双引号并永远匹配大小写：

```
SELECT "bans".* FROM "bans"  WHERE ("Email"='' ... 
```

一旦你修复了, ,和`Email`, 你就会遇到同样的问题：你必须在任何引用它们的 SQL 中将它们全部双引号。`IP``Username``Reason``Length`

最佳实践是使用小写的列名和表名，这样您就不必一直担心引用内容。我建议您将表修复为使用小写的列名。

* * *

顺便说一句，您的`'NULL'`字符串文字：

```
SELECT "bans".* FROM "bans"  WHERE (Email='' AND IP='' AND (Username='NULL' ))
-- -------------------->------------------>---------->---------------^^^^^^ 
```

看起来很奇怪，你确定你不是这个意思`"Username" is null`吗？`'NULL'`字符串文字和 NULL 值是完全不同的东西，您不能使用`=`或将其`!=`与 NULL 进行比较，当 NULL 可能在起作用时，您必须使用[`is null`, `is not null`, `is distinct from`, or`is not distinct from`](http://www.postgresql.org/docs/current/interactive/functions-comparison.html)（取决于您的意图）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:10:03.070

看起来您的错误不是来自测试数据库，但如果是这样，请尝试`rake db:test:prepare`.

通常，请注意您有 3 个数据库 - 测试、开发、生产。因此很容易将它们混淆并检查错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-15T16:24:01.913

我在这里遇到了同样的问题，

但`mu-is-too-short`如前所述，可以告诉 PostgreSql 搜索列名时区分大小写。

因此，通过实现此代码，我设法绕过了您面临的相同错误：

```
Transaction.find(:all,:conditions => ["(date between ?  and ?) AND \"Membership_id\" = ?", Time.now.at_beginning_of_month,  Time.now.end_of_month,membership.id]) 
```

注意到列名周围的**\"**符号了吗？嗯.. 尽管它很烦人，但这就是解决这个问题的方法。

# internet-explorer - 侧边栏 div 将主导航向下推

> ID：10628920
> 
> 赞同：0
> 
> 时间：2012-05-17T01:49:30.967
> 
> 标签：internet-explorer, internet-explorer-8, visual-glitch

我似乎无法弄清楚这个......我一直在尝试我在网上找到的许多不同的“解决方案”，但他们似乎都没有这样做。

我有 2 个 div。一个是 200px 宽（侧边栏），另一个是 800px 宽（主要内容），但是当我将它们都向左浮动时，一些不好的魔力会下降，它们像楼梯台阶故障一样堆叠......

此外，整个木制背景 div 也被强制超过 200 像素...... :(

有任何想法吗？

这是网址。

主要是[http://www.glacierspringsadventures.com/httpdocs/](http://www.glacierspringsadventures.com/httpdocs/) CSS 是 /css/style.css">http://www.glacierspringsadventures.com/httpdocs//css/style.css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T23:10:38.867

好吧，伙计们！我想通了..好吧..有点..现在可以了...

我总共减少了 10 个像素的宽度。5论和5论的主要内容。

这显然修复了它，因为它在漂浮并且有幸福。:D

无论如何感谢您的帮助！

# ios - ios - 组合/连接多个音频文件

> ID：10628924
> 
> 赞同：0
> 
> 时间：2012-05-17T01:49:51.497
> 
> 标签：ios, core-audio

我有一堆音频文件（mp3、aac 等），我想将它们连接成一个音频文件。有没有人这样做过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:22:11.433

我已经做到了。要进行连接，您首先需要将音频文件加载到[AVAssets](http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAsset_Class/Reference/Reference.html)中。具体来说，您需要使用名为[AVURLAssets](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVURLAsset_Class/Reference/Reference.html)的 AVAsset 子类，它可以加载您的 URL：[Loading AVAsset](http://developer.apple.com/library/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW3)。然后，您可以将每个添加`AVAsset`到[AVMutableComposition](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVMutableComposition_Class/Reference/Reference.html)中，该组合旨在包含多个`AVAssets`. 将其加载到`AVMutableComposition`中后，您可以使用[AVAssetExportSession](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetExportSession_Class/Reference/Reference.html)将合成写入文件。

请注意，`AVAssetExportSession`这并不能让您对文件输出进行太多控制（它将音频导出到 m4a 文件中）。如果您需要对输出类型进行更多控制，则需要使用[AVAssetReader](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetReader_Class/Reference/Reference.html)和[AVAssetWriter](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetWriter_Class/Reference/Reference.html)类来执行导出，而不是使用`AVAssetExportSession`. 这些类比使用起来要复杂得多`AVAssetExportSession`，在这里理解纯 C是值得的。

我还要指出，没有 Apple 提供的写出 MP3 文件的选项。你可以读它们，但你不能写它们。通常最好坚持使用 m4a/aac 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:01:39.803

This is fairly simple using ExtAudioFile. In pseudocode what you want to do is:

```
1\. Open the file you'll be using for output (ExtAudioFileOpen)
2\. Set the client data format you'll use for ExtAudioFileWrite
3\. For each input file you want to process:
    a. Open the file using ExtAudioFile
    b. Set the client data format used for reading to the same client format used in the output file for writing
    c. Loop through the input file using ExtAudioFileRead and save the data to the output file using ExtAudioFileWrite
    d. Close the input file
4\. Close the output file 
```

# asp.net-mvc - 负载测试 SignalR 集线器应用程序的最佳方法是什么？

> ID：10628926
> 
> 赞同：26
> 
> 时间：2012-05-17T01:49:59.710
> 
> 标签：asp.net-mvc, asp.net-4.0, signalr

我想知道一些用于测试基于 SignalR 集线器的应用程序的不同方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T14:29:58.557

简而言之，如果使用 Hubs，使用 .Net 客户端就足够了。

就我而言，我有一个新闻源中心，它根据用户的个人资料 ID 提供客户特定的数据。在我的测试案例中，我加载了一堆配置文件 ID（在本例中为 6000 个），调用了一个名为 JoinNewsfeed() 的集线器方法以及特定于客户端的连接 ID 和配置文件 ID。每 100 毫秒建立一个新连接。

```
 [TestMethod]
    public void TestJoinNewsfeedHub()
    {
        int successfulConnections = 0;

        // get profile ID's
        memberService = new MemberServiceClient();
        List<int> profileIDs = memberService.GetProfileIDs(6000).ToList<int>();

        HubConnection hubConnection = new HubConnection(HUB_URL);
        IHubProxy newsfeedHub = hubConnection.CreateProxy("NewsfeedHub");

        foreach (int profileID in profileIDs)
        {
            hubConnection.Start().Wait();
            //hubConnection = EstablishHubConnection();
            newsfeedHub.Invoke<string>("JoinNewsfeed", hubConnection.ConnectionId, profileID).ContinueWith(task2 =>
            {
                if (task2.IsFaulted)
                {
                    System.Diagnostics.Debug.Write(String.Format("An error occurred during the method call {0}", task2.Exception.GetBaseException()));
                }
                else
                {
                    successfulConnections++;
                    System.Diagnostics.Debug.Write(String.Format("Successfully called MethodOnServer: {0}", successfulConnections));

                }
            });

            Thread.Sleep(100);

        }

        Assert.IsNotNull(newsfeedHub);
    } 
```

[此处](https://github.com/SignalR/SignalR/wiki/Performance)列出的性能指标可以在服务器上解决问题。为了确保客户端实际上已连接并且在服务器上填充客户端对象的过程已成功完成，我有一个服务器端方法，该方法调用客户端函数，其中连接客户端的数量和列表来自连接的客户端收藏。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-17T22:15:34.263

@ElHaix根据我在自己的测试中看到的情况，您的方法不是创建新连接，而是重用现有连接。当您遍历 profileID 的集合时，您应该会看到 hubConnection.ConnectionID 保持不变。为了创建一个新连接，您需要在 foreach 循环中创建一个 HubConnection 实例。

```
 int successfulConnections = 0;
        const int loopId = 10;

        Console.WriteLine("Starting...");
        for (int i = 1; i <= loopId; i++)
        {
            Console.WriteLine("loop " + i);

            var hubConnection = new HubConnection(HUB_URL);
            IHubProxy chatHub = hubConnection.CreateProxy(HUB_NAME);

            Console.WriteLine("Starting connection");
            hubConnection.Start().Wait();
            Console.WriteLine("Connection started: " + hubConnection.ConnectionId);

            chatHub.Invoke("Register", "testroom").ContinueWith(task2 =>
            {
                if (task2.IsFaulted)
                {
                    Console.WriteLine(String.Format("An error occurred during the method call {0}", task2.Exception.GetBaseException()));
                }
                else
                {
                    Console.WriteLine("Connected: " + hubConnection.ConnectionId);
                    successfulConnections++;
                }
            });

            Thread.Sleep(1000);
        } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-05T03:48:06.027

Crank 只能测试 PersistenConnections 但由于您要测试 SignalR Hub 本身，您可以使用**Tresi**。虽然它是一个商业应用程序。以下是有关如何针对不同类型的负载进行性能测试的一些链接

1.  [恒定负载](http://www.wcfstorm.com/wcf/tresi-how-to-run-a-performance-test-with-constant-load.aspx)
2.  [逐渐增加的负载](http://www.wcfstorm.com/wcf/how-to-run-a-performance-test-with-increasing-load.aspx)
3.  [突发负载](http://www.wcfstorm.com/wcf/tresi-how-to-run-a-performance-test-with-burst-load.aspx)

在负载测试执行期间，会显示HTTPWebRequest 的性能计数器设置，例如*Created/Sec*、*Aborted/Sec、Average Lifetime*等。它还显示了其他计算指标，例如*吞吐量/用户*下面显示的是应用程序的屏幕截图

![在此处输入图像描述](../Images/451af2b2fa7e77bd8990c4a07af7a43a.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T13:48:21.223

我没有对 SignalR 做太多的性能测试，但该项目提供了一个有用的工具 - [Crank](https://github.com/SignalR/SignalR/tree/master/src/Microsoft.AspNet.SignalR.Crank) - 用于生成客户端负载。

项目 wiki 也有一些关于有用的[性能计数器和设置的指导](https://github.com/SignalR/SignalR/wiki/Performance)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-17T06:46:32.803

使用 Gatling 工具创建自己的脚本以创建虚拟用户（多线程）并使用 java signalr 客户端。如果您想知道如何将用 java 或 scala 编写的自定义脚本附加到 gatling 虚拟用户，请在评论中指定。告诉我您是否需要信号器性能测试的测试计划，因为它是进行测试的关键点。

# php - 按与 stdClass 对象组合的值对多维数组进行排序

> ID：10628927
> 
> 赞同：0
> 
> 时间：2012-05-17T01:50:00.667
> 
> 标签：php, multidimensional-array, sorting

资助几个函数来对数组进行排序，但如果它们是 stdClass 对象，它们都不能对它们进行排序，或者至少我找不到合适的

我需要通过排序值对这个数组进行排序

```
 [data] => Array
                (
                    [0] => stdClass Object
                        (
                            [id] => 12
                            [name] => Title1
                            [ordering] => 1
                        )

                    [1] => stdClass Object
                        (
                            [id] => 14
                            [name] => Title2
                            [ordering] => 3
                        )

                    [2] => stdClass Object
                        (
                            [id] => 18
                            [name] => Title4
                            [ordering] => 2
                        )

                    [3] => stdClass Object
                        (
                            [id] => 22
                            [name] => Title5
                            [ordering] => 4
                        )

                ) 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T01:55:33.123

根据对象的字段定义自定义排序函数`ordering`，然后使用 usort 将其传入。

[用于排序的文档](http://php.net/usort)

```
function sortByOrdering($obj1, $obj2) {
   return $obj2->ordering - $obj1->ordering;
}

usort($input['data'], 'sortByOrdering'); 
```

请注意，您不需要重新分配`$input = usort(...)`，因为内部引用了数组`usort`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:36:51.530

谢谢，斯干腾！这正是我一直在寻找的。

我注意到生成的排序顺序是降序的。我可以通过对您的函数进行简单更改来扭转这种情况 - 我在 return 语句中交换了 $obj1 和 $obj2 ：

```
return $obj1->ordering - $obj2->ordering; 
```

在我的应用程序中，数组数据是：

```
Array
(
    [3] => stdClass Object
        (
            [term_id] => 3
            [name] => Salesperson
            [slug] => 01-salesperson
            [term_group] => 0
            [term_order] => 0
            [term_taxonomy_id] => 3
            [taxonomy] => skill
            [description] => 
            [parent] => 0
            [count] => 6
            [object_id] => 53
        )

    [5] => stdClass Object
        (
            [term_id] => 5
            [name] => Airport Security
            [slug] => 02-airport-security
            [term_group] => 0
            [term_order] => 0
            [term_taxonomy_id] => 5
            [taxonomy] => skill
            [description] => 
            [parent] => 0
            [count] => 30
            [object_id] => 575
        )

    [4] => stdClass Object
        (
            [term_id] => 4
            [name] => Baker
            [slug] => 03-baker
            [term_group] => 0
            [term_order] => 0
            [term_taxonomy_id] => 4
            [taxonomy] => skill
            [description] => 
            [parent] => 0
            [count] => 28
            [object_id] => 453
        )
) 
```

使用上述数据，我需要按“slug”值升序排列数组 $skills_nav。这是完成任务的最终代码：

```
function sortByOrdering($obj1, $obj2) {
   return $obj1->slug - $obj2->slug;
}
usort($skills_nav, 'sortByOrdering'); 
```

为了进一步向读者解释，函数 sortByOrdering 预期的两个参数由 USORT 自动提供。[手册中的USORT](http://php.net/manual/en/function.usort.php)功能对此进行了说明。

# ipad - jquery mobile幻灯片反向过渡在过渡中间显示空白页

> ID：10628928
> 
> 赞同：5
> 
> 时间：2012-05-17T01:50:07.653
> 
> 标签：ipad, jquery-mobile, transition, slide

出于某种原因，在 ipad 上，当默认向左滑动 [slide] 时，页面之间的 jquery 移动幻灯片过渡效果很好。但是当它是向右滑动 [slide reverse] 时，在转换过程中页面之间似乎有一个**完整的空白页面**。

```
<div data-role="page" id="zine1">
   <div data-role="content">    
              VARIOUS HTML CONTENT
   </div><!-- /content -->
</div>
<div data-role="page" id="zine2">
   <div data-role="content">    
              VARIOUS HTML CONTENT
   </div><!-- /content -->
</div>
<div data-role="page" id="zine3">
   <div data-role="content">    
              VARIOUS HTML CONTENT
   </div><!-- /content -->
</div>
<script>
   $(document).ready(function() {
        window.now = 1;

        //get an Array of all of the pages and count
        windowMax = $('div[data-role="page"]').length; 

        doBind();
    });
    // Functions for binding swipe events to named handlers
    function doBind() {
        $('div[data-role="page"]').live("swipeleft", turnPage); 
        $('div[data-role="page"]').live("swiperight", turnPageBack);
    }

    function doUnbind() {
        $('div[data-role="page"]').die("swipeleft", turnPage);
        $('div[data-role="page"]').die("swiperight", turnPageBack);
    }

    // Named handlers for binding page turn controls
    function turnPage(){
        // Check to see if we are already at the highest numbers page            
        if (window.now < windowMax) {
            window.now++
            $.mobile.changePage("#zine"+window.now, {transition:"slide"});
        }
    }

    function turnPageBack(){
        // Check to see if we are already at the lowest numbered page
        if (window.now != 1) {
            window.now--;
            $.mobile.changePage("#zine"+window.now, {transition:"reverse slide"});
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T18:27:30.390

过渡：“反向幻灯片”似乎已弃用。试试 data-direction="reverse"。

# php - 清除缓存 if(file_exists)

> ID：10628929
> 
> 赞同：1
> 
> 时间：2012-05-17T01:50:26.410
> 
> 标签：php, if-statement, conditional-statements, file-exists

我对file_exists 有一些问题。请参考以下代码：

```
echo '<a href = "/classifiedads4free-view-all-ads/'.$catid_related.'-'.$cat_name.'/'.$related_ads['0'].'-'.$ad_name.'">';
if(file_exists('/images/ads/'.$related_ads['0'].'a_t.jpg')){
    echo '<img src = "/images/ads/'.$related_ads['0'].'a_t.jpg">';
}
else{
    echo '<img src = "/images/ads/no-pre.png">';
}
    echo '</a>'; 
```

我无法让条件工作。我的意思是，如果我加载的第一个图像是 no-pre.png，它将不显示所有图像。即使我将页面导航到另一个有图片的页面，它仍然会显示 no-pre.png。我阅读了文档并了解问题可能出在我需要清除 file_exists 的缓存的地方，但我真的不知道如何或在哪里使用它..

感谢是否有人可以在这里帮助我。谢谢！赞赏。

**更新：**我刚刚发现它不是缓存，因为我没有在我的脚本上运行多个 file_exists。只有1.我认为问题出在条件上。如果我放，我可以让图像显示：

```
 if(!file_exists('/images/ads/'.$related_ads['0'].'a_t.jpg'))//NOTICE the ! 
```

但是现在我所有的文件都存在返回 true，我无法显示我的 no-pre。

然后我想也许我的文件网址是错误的。但是，如果图像可以在 file_exists 返回 false 时显示，那么图像不应该存在..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:52:32.753

您需要在第二次运行[`clearstatcache()`](http://us3.php.net/manual/en/function.clearstatcache.php)之前运行`file_exists()`。或者，为了安全起见，`file_exists()`每次之前都调用它。

# jquery - 如何使用 jQuery appendTo() 在子元素之前插入元素

> ID：10628933
> 
> 赞同：2
> 
> 时间：2012-05-17T01:51:19.840
> 
> 标签：jquery

我有：

```
<div id='1'>
    <div id='2'><div>
</div> 
```

如果我做： `$("<img/>").appendTo('#1');`

结果是：

```
 <div id='1'>
            <div id='2'><div><img/>
    </div> 
```

如何更改查询以使结果为？：

```
<div id='1'>
        <img/><div id='2'><div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T01:53:46.547

只需使用[prependTo()](http://api.jquery.com/prependTo/)。例如，

```
$("<img/>").prependTo('#1'); 
```

# css - YouTube iFrame 嵌入在 Chrome 中的 CSS 悬停子菜单之上

> ID：10628934
> 
> 赞同：0
> 
> 时间：2012-05-17T01:51:22.983
> 
> 标签：css, flash, iframe, webkit, youtube

我有一个嵌入 youtube 视频的标准 iframe，我有一个 CSS Dropmenu，它应该出现在它的顶部，但隐藏在 iframe 后面。

为什么会这样？我如何解决它？到目前为止，我只在 Google Chrome 和 Safari 中看到过它。

谢谢？

[下拉菜单与http://www.no1fitness.co.nz](http://www.no1fitness.co.nz)上的相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:20:33.680

确保`z-index`您的下拉菜单的属性大于 iframe的属性

# applescript - AppleScript、InDesign 错误

> ID：10628938
> 
> 赞同：0
> 
> 时间：2012-05-17T01:52:52.943
> 
> 标签：applescript, adobe-indesign

我正在尝试使用 AppleScript 将 InDesign 中的现有色板转换为新颜色，但我发现它相当困难。

我收到一个错误代码，因此：

```
error "Adobe InDesign CS5.5 got an error: Can’t set color of swatch \"CLIENT1\" of document id 12 to {0, 100, 100, 5}." number -10006 from color of swatch "CLIENT1" of document id 12 
```

我用来调整样本的代码是这样的：

```
set color of swatch "CLIENT1" to c1 
```

任何帮助将不胜感激。这让我疯狂。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:34:48.900

这在 CS2 中适用于 cmyk 色板：

```
set color value of swatch "CLIENT1" to {0, 20, 50, 10} 
```

您必须设置所有 4 个值。如果它是 rgb 色板，您只需要 3 个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T00:04:57.257

解决了！对于其他人来说，解决方案是：

```
set color value of color "CLIENT1" to c1 
```

享受。

# mips - mips 中的数组和计数器

> ID：10628945
> 
> 赞同：0
> 
> 时间：2012-05-17T01:54:09.883
> 
> 标签：mips

```
CASE2:
    la $t9, ARRAY       # Load base address of array into $t9
    li $t8, 36      # Initialize loop counter to 36

LOOP:   
    la $a0, Prompt2     # Load Prompt2 string into $a0.
    li $v0, 4       # system call to print string Prompt2.
    syscall

    li $v0, 12      # read character input. 
    syscall
    move $t8($t9), $v0  # move input character to an array element.

    la $a0, $t8($t9)    # load array element into $a0.
    li $v0, 11      # system call to print array element.
    syscall
    addi $t8, $t8, -4   # decrement loop counter.
    bgtz $t8, LOOP

    la $a0, MSG2        # load MSG2 string into $a0.
    li $v0, 4       # system call to print MSG2 string.
    syscall 
LOOP2:
    la $a0, $t8($t9)    # load element of array into $a0.
    li $v0, 11      # system call to print char.
    addi $t8, $t8, 4    # increment $t8.
    blt $t8, 36, LOOP2  # branch if $t8 is less than 36
    j EXIT          # when $t8 reaches 36 jump to EXIT.
    .data
Prompt2:.asciiz "\nEnter a character: "
ARRAY:  .space 10       # 10 bytes of storage to hold an array of 10 characters 
```

我无法让这个数组工作，假设从输入中读取 10 个字符并在读取它们后立即打印它们，然后向后打印出数组。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T04:36:56.547

一个错误立即显而易见：

```
move $t8($t9), $v0 
```

格式不正确。MIPS 不允许您使用寄存器作为偏移量。MIPS 也不允许在移动操作的目标寄存器上进行偏移。

代码应替换为以下内容：

```
addi $t8, $0, 36 # initialize the offset counter to 36
...
sll  $t8, $t8, 2 # multiply the offset counter by 4 to account for word indexing
add  $t9, $t8, $t9 # add the current offset to $t9
sw   $v0, 0($t9)   # store $v0 at the memory location held in $t9 
```

移动操作是一个伪指令，它采用一个寄存器并将其中包含的值放入另一个目标寄存器。相反，使用存储字 (sw) 指令将寄存器的内容存储在提供的内存位置。您将不得不更改其余代码以使用上面的代码，但这应该足以让您朝着正确的方向开始。

# php - 为下拉菜单设置值

> ID：10628950
> 
> 赞同：0
> 
> 时间：2012-05-17T01:55:01.460
> 
> 标签：php, html

我有一个可以这样描述的数据库表

```
CREATE TABLE TTT (id INT PRIMARY KEY NOT NULL AUTO_INCREMENT, name VARCHAR(64), quantity INT, available VARCHAR(5)); 
```

我有一个在屏幕上显示特定产品信息的链接，我还设置了一个下拉框来显示“可用”内容（即它是否仍然“有货”IN_ST 或“缺货”OF_ST）。单击链接后，如何读取其中一个值并将其作为默认值显示在组合框中。非常感谢你的帮助。

我的选择 html 看起来像这样

```
<select name="available" id="available">
    <option value="">Select...</option>
    <option value="IN_ST">In stock</option>
    <option value="OF_ST">Out of stock</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:06:41.670

```
<?php 
    // $someId might come from the query string, or some other place
    $query = "SELECT * FROM TTT WHERE id = $someId";

    if (!$result = mysql_query($query))
    {
      die(); //properly handle the error
    }
    //since I'm where'ing the id, I'm assuming only one row will be returned.
    //If that's not the case, you'll have to put this in a while construct
    $row = mysql_fetch_assoc($result)

    $avail = $row['available'];
    $in_selected = ($avail == "IN_ST") ? "selected" : "";
    $out_selected = ($avail == "OUT_ST") ? "selected" : "";

?>
<select name="available" id="available">
    <option value="">Select...</option>
    <option value="IN_ST" <? echo $in_selected; ?>>In stock</option>
    <option value="OF_ST" <? echo $out_selected; ?>>Out of stock</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T02:02:36.370

简单的方法是检查你的循环，看看当前值是否是默认值，如果是，`echo "selected";`则在选项中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T02:03:05.727

你能发布你已经拥有的东西吗？

最简单的方法是构建一个下拉列表，将每个值映射到`id`数据库中列的值。这将允许您选择和显示详细信息。

查询将类似于：

```
SELECT * FROM TTT 
```

下拉菜单本身类似于：

```
<SELECT id="stock">
<OPTION value="1">ABC (out of stock)</OPTION>
<OPTION value="2">DEF (out of stock)</OPTION>
<OPTION value="3">GHI (in stock)</OPTION>
</SELECT> 
```

这个想法是，值列将使用`id`我前面提到的列来填充。您可以显示名称，并使用一个简单的名称`if ... else`来显示该项目是否有库存。

```
$status = $row['available'] == 'IN_ST' ? ' (in stock)' : ' (out of stock)';
$option = "<OPTION value={$row['id']}>{$row['name']}$status</OPTION>";
echo $option; // within the select 
```

希望能给你一个想法。

# javascript - Javascript 正则表达式。需要从 SVG 字符串中提取值

> ID：10628961
> 
> 赞同：1
> 
> 时间：2012-05-17T01:56:05.080
> 
> 标签：javascript, regex, svg

我有 SVG 字符串，我需要提取它的两个属性：宽度和高度。

我不能使用一些 XML 解析器，因为我将它与 Titanium Studio 框架一起使用，所以我在任何地方都没有 DOM。

SVG 看起来像这样：

```
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1" width="768" height="1005" space="preserve">
    LOT OF DATA HERE... <></> etc
</svg> 
```

我从这样的事情开始：

```
var width = svgString.match( /^<svg.\width.=.(.*)$>/gm ); 
```

现在是凌晨 4 点，我的大脑无法正常工作。如果有人可以提供帮助，那就太好了！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T02:06:14.510

假设 jmar777 的代码有效，我将使用不同的、更保守的正则表达式，它允许可选空格、可选引号并确认值来自 svg 标签本身（如果 svg 标签中不存在，则不是来自其他标签）。这可能会或可能不会对您的情况产生影响，具体取决于您从哪里获得这些 svg 以及它们是如何形成的。

```
var width = svgString.match(/^<svg[^>]*width\s*=\s*\"?(\d+)\"?[^>]*>/)[1];
var height = svgString.match(/^<svg[^>]*height\s*=\s*\"?(\d+)\"?[^>]*>/)[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:59:00.287

```
var width = svgString.match(/^<svg.*?width="(\d+)/)[1];
var height = svgString.match(/^<svg.*?height="(\d+)/)[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T02:00:16.587

确保将可选部件设为可选。（请参阅：正则表达式中“宽度”和 = 符号之间的点）

```
var width = svgString.match( /^<svg.*width\s*=\s*\"(\d*)\"$>/gm ); 
```

（假设 \s 匹配所有空格并且 \d 匹配所有数字）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-01T19:20:03.793

这是一个适用于我测试的所有情况的解决方案。

```
const width = parseInt(svg.substring(svg.indexOf("width")).split('=')[1].match(/^\d+|\d+\b|\d+(?=\w)/g)[0]);
const height = parseInt(svg.substring(svg.indexOf("height")).split('=')[1].match(/^\d+|\d+\b|\d+(?=\w)/g)[0]); 
```

# html - 这两种填充/边距方案之间的区别

> ID：10628970
> 
> 赞同：1
> 
> 时间：2012-05-17T01:58:00.363
> 
> 标签：html, css

在以下示例中使用 padding-left 和 margin-left 有什么区别？

[http://jsfiddle.net/bt49e/1/](http://jsfiddle.net/bt49e/1/)

左 div 绝对定位，而右 div 使用 padding-left / margin-left 定位。它们可以在这里互换使用吗？如果选择其中一个，会有什么影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:07:52.920

正如 bfavaretto 所建议的，主要区别在于计算出的宽度。如果您选择添加边界，另一个区别将是边界的位置。看看[你的小提琴的这个更新，](http://jsfiddle.net/bt49e/3/)看看我的意思。

您可能还会注意到您应用的任何背景图像/渐变的默认位置有所不同，因为`margin`它被添加到外部并被`padding`添加到框的内部。

# linux - 如何在端口 80 上进行 grep 侦听，该端口还可以过滤其他包含 80 的端口，例如 8080 8088 ...？

> ID：10628972
> 
> 赞同：6
> 
> 时间：2012-05-17T01:58:38.963
> 
> 标签：linux, bash, grep

如果有任何进程正在侦听端口 80，我想使用 bash 进行 grep，但现在我偶然发现了其他让我烦恼的端口号。如何在 grep 中过滤？

```
netstat -ant|grep LISTEN|grep 80|wc -l 
```

它还输出8080 8088等其他记录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T02:54:42.140

我正在查看`netstat`命令的输出，然后看到：

```
tcp4       0      0  10.0.1.10.56941        64.34.119.101.80       ESTABLISHED
tcp4       0      0  10.0.1.10.56936        64.34.119.101.80       ESTABLISHED
tcp4       0      0  10.0.1.10.56932        64.34.119.101.80       ESTABLISHED
tcp4       0      0  10.0.1.10.56929        64.34.119.101.80       ESTABLISHED
tcp4       0      0  10.0.1.10.56922        64.34.119.101.80       ESTABLISHED
tcp4       0      0  10.0.1.10.56914        64.34.119.101.80       ESTABLISHED
tcp4       0      0  *.*                    *.*                    CLOSED     
tcp46      0      0  *.80                   *.*                    LISTEN     
tcp4       0      0  127.0.0.1.49153        *.*                    LISTEN     
tcp4       0      0  127.0.0.1.49152        *.*                    LISTEN     
tcp4       0      0  *.631                  *.*                    LISTEN     
tcp6       0      0  *.631                  *.*                    LISTEN 
```

我认为端口是五部分点输出中的最后一个数字。这意味着

```
grep "\.80 " 
```

将只接 80 端口。`\.`说要接期间。（通常句点表示正则表达式中的*任何字符）。*而且，通过在 之后放置一个空格`80`，您将保证您不会选择端口 8080。事实上，您可以保证您不会选择其中包含`.80`的 IP 地址。

事实上，我建议使用`awk`而不是`grep`. 使用`awk`，您可以指定字段并进行更多处理：

```
$ netstat -ant | awk '$6 == "LISTEN" && $4 ~ /\.80$/' | wc -l 
```

随着`awk`每一列自动成为一个单独的字段。字段 #6（awk 中的 $6）是其中显示`ESTABLISHED`,`CLOSED`的字段`LISTEN`。字段`$4`是第一列 IP 地址一个。

在上面，我正在寻找在第六个字段中包含单词*LISTEN*并且字段 #4 与正则表达式匹配的行`\.80$`。是字符串末尾的`$`锚点，并且`\.`是小数点，不代表任何字符。该`awk`命令会自动打印出匹配的每一行，因此我不必指定。

awk 确实是一种编程语言。它假定文件中的每一行都有一个读取循环。您可以有一个`BEGIN`在读取文件之前执行的`END`子句和一个在读取文件之后执行的子句。各个字段都被编号并用美元符号表示。特殊`$0`变量代表整行。像 NF 这样的特殊变量为您提供一行中的字段数，而 NR 为您提供读入的行数。您还有一整套函数来帮助解析文本等。这是`awk`脚本的完整版本，基本上为您布置所有内容，并进行自己的行数计算，因此您不必管道到`wc -l`.:

```
$ netstat -ant | awk '
      BEGIN {total = 0}
      END {print "There are " total " lines I found"}
      {
          if ($6 == "LISTEN" && $4 ~ /\.80$/) {
              total = total + 1
          }
      }' 
```

* * *

# 附属物

OP 得到以下输出：

```
tcp       0      0  0.0.0.0:8080        0.0.0.0:*       LISTEN 
```

在这种情况下，请尝试：

```
$ netstat -ant | awk '$6 == "LISTEN" && $4 ~ /:80$/' | wc -l 
```

在哪里`\.`被替换为`:`或...

```
$ netstat -ant | awk '$6 == "LISTEN" && $4 ~ /[\.:]80$/' | wc -l 
```

`[\.:]`无论是冒号还是句号，哪个使用哪个会得到它。哎呀，还不如一路走下去……

```
$ netstat -ant | awk '$6 == "LISTEN" && $4 ~ /[^0-9]80$/' | wc -l 
```

`[^0-9]`表示不是数字字符。你不会错的。这样，无论是句号、冒号、分号、逗号还是您的版本`netstat`使用的任何分隔符，它都可以使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T03:03:07.283

而不是 grepping 的输出`netstat`——询问比你需要的更多的信息，然后丢弃大部分信息——只需询问`fuser`哪个进程打开了你关心的端口：

```
$ fuser -n tcp 4005
4005/tcp:            19339 
```

`-q`如果您只关心是否有任何进程打开了相关端口，则可以通过使用fuser 的参数并对其退出状态进行操作来更快、更有效地执行此操作，而根本不需要处理输出：

```
if fuser -q -n tcp 4005 ; then
    echo "port is in use"
else
    echo "port not in use"
fi 
```

如果您想知道*远程*端口有多少连接， fuser 也可以这样做：

```
fuser -n tcp ,,80 
```

...或连接到特定主机上的远程端口：

```
fuser -n tcp ,1.2.3.4,80 
```

简而言之 - 使用正确的工具来查询您想要的参数直接可以防止您首先需要进行基于文本的过滤。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T02:03:11.037

使用`grep ":80 "`代替`grep 80`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T02:11:50.830

您可以利用端口前面有一个冒号（如`:80`）这一事实。禁食的事情会是这样的：

```
netstat -ant | grep ':80\b.*LISTEN' 
```

这样你就不会调用`grep`两次。此外， grep 可以使用 计算匹配`-c`项，因此您可以使用它来代替`wc`：

```
netstat -ant | grep -c ':80\b.*LISTEN' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-22T20:33:35.783

您搜索的命令是：`netstat -ntpl | grep ':PORT '`

例子：

```
$ netstat -ntpl | grep ':80 '
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      12960/nginx -g daem
tcp6       0      0 :::80                   :::*                    LISTEN      12960/nginx -g daem 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T06:50:23.017

如果你想让它更健壮，你可以这样做

```
netstat -ant |egrep  "^tcp +[[:digit:]]+ +[[:digit:]]+ +[[:digit:]\.]+\:80 +.*LISTEN *$" 
```

# iphone - 如何像 Viddy 应用程序一样将捕获的视频编码和压缩为 mp4 格式？

> ID：10628977
> 
> 赞同：3
> 
> 时间：2012-05-17T01:59:37.680
> 
> 标签：iphone, video, mp4

如何像 Viddy 应用程序一样将捕获的视频编码和压缩为 mp4 格式？任何建议和教程都是值得赞赏的。

# django - 新手第一次尝试 prefetch_related - 返回空白

> ID：10628986
> 
> 赞同：0
> 
> 时间：2012-05-17T02:02:17.663
> 
> 标签：django, django-models, django-views

我之前问过这个问题，但我没有收到任何解决方案，所以这次我试图让问题更简洁明了。

我的数据库具有以下简化架构：

```
class RIAchievement(models.Model):
  riAchievementID = models.AutoField(primary_key=True, db_column="riAchievementID")
  userLanguageVersionID = models.ForeignKey(UserLanguageVersion, db_column="userLanguageVersionID", related_name="riAchievement_userLanguageVersionID")
  class Meta:
    db_table="riAchievement"

class UserLanguageVersion(models.Model):
  userLanguageVersionID = models.AutoField(primary_key=True, db_column="userLanguageVersionID")
  languageCodeID = models.ForeignKey(LanguageCode, db_column="languageCodeID", related_name="userLanguageVersion_languageCodeID")
  class Meta:
    db_table="userLanguageVersion"

class LanguageCode(models.Model):
  languagecodeID = models.AutoField(primary_key=True, db_column="languageCodeID")
  class Meta:
    db_table="languageCode"

class Flag(models.Model):
  flagID = models.AutoField(primary_key=True, db_column="flagID")
  languageCodeID = models.ForeignKey(LanguageCode, db_column="languageCodeID", related_name="flag_languageCodeID")
  flagIconPath = models.CharField(max_length=255, db_column="flagIconPath")
  class Meta:
    db_table="flag" 
```

本质上， riachievement 可以有很多 userlanguageversion ， userlanguageversion 可以有很多 languagecode ， flag 可以有很多 languagecode 。

使用**select_related**不会返回*flag.flagIconPath*因为一对多的关系，所以 Django 文档状态我必须使用**prefetch_related**，并带有一对多外键的**相关名称。**

所以我在**view.py**中修改了我的代码：

```
from django.shortcuts import render
from app_data.models import RIAchievement

def ri_achievements(request):

  qs = RIAchievement.objects.select_related("riachievement", "userlanguageversion", "languagecode", "flag_languageCodeID").all()

  return render(request, 'index.html',{'qs': qs}) 
```

我的**index.html**：

```
{% for ri_achievement in qs %}
  {{ ri_achievement.userLanguageVersionID.langaugeCodeID.flag_languageCodeID.flagIconPath }}
{% endfor %} 
```

但是，这段代码什么也不返回。

谁能提供一些建议，因为我看不到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:14:36.883

我建议您使用 django shell`python manage.py shell`来找出您的查询 - 通过模板“找出”将非常困难，因为它会抑制错误。

例如，看起来您有拼写错误，但模板不会抱怨它。

让我们将您尝试的查询分解为 python，以便我们可以使用注释

```
flagIconPath = (ri_achievement
    .userLanguageVersionID # correct. direct FK 
    .langaugeCodeID # spelling error. but otherwise ok. direct FK
    # this is now a one to many relationship - you now have a related manager
    # NOT a single object. Many flags to one Code
    .flag_languageCodeID
    .latest('id') # you must pick which one you want - for example, the latest ID
    .flagIconPath) 
```

至于使此查询更有效，您的选择相关调用将需要包含通过这些模型的完整路径。您正在传递属性，就好像它们都是原始模型上的外键一样。

```
qs = RIAchievement.objects.select_related('userLanguageVersionID__languageCodeID') 
```

我现在不确定预取调用，但它可能看起来像

```
qs.prefetch_related('userLanguageVersionID__languageCodeID__flag_languageCodeID') 
```

有了所有这些嵌套调用，那么远的预取就可以......进行巨大的查询。你确定这是你想要的吗？

# android - 重新启动时片段内部的 GLSurfaceView 不呈现

> ID：10628998
> 
> 赞同：60
> 
> 时间：2012-05-17T02:05:26.540
> 
> 标签：android, opengl-es, android-fragments, glsurfaceview

我`GLSurfaceView`使用`GLSurfaceView.Renderer`. 我的应用程序使用来自 android 支持包的片段。当我导航到一个新的片段`surfaceDestroyed`时被调用，但是当我通过后台堆栈返回片段时，`GLSurfaceView`不会呈现，调用`requestRender`不会导致`onDraw`调用。

我知道我需要在表面视图上调用`onResume`和`onPause`我正在从托管片段执行此操作，但它似乎并没有解决问题。所有关于 htis 方法的例子都参考了活动，这可能是问题吗？如果是这样，您如何`GLSurfaceView`在片段中使用 a 。

非常感谢任何见解，我很高兴发布代码，但这对我来说似乎是一个普遍的问题，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:08:20.410

这是我在片段中设置 GLSurfaceView 的方式：

```
onCreateView() {
    glSurfaceView = new GLSurfaceView(getActivity());
   ...
}

onPause() {
    if (glSurfaceView != null) { glSurfaceView.onPause(); }
    ...
}

onResume() {
    if (glSurfaceView != null) { glSurfaceView.onResume(); }
    ...
} 
```

}

因此，类似于您在活动中所做的事情。这适用于我的用例，所以看起来它们确实在片段中工作。如果不知道您的代码是什么样子，很难说更多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T13:26:00.537

我知道为时已晚，但它可能对其他人有用这是我的答案，因为我已经实现了它，并且它在模拟器和设备中都运行良好。我使用了 Fragment 和 supportV4。希望你会喜欢它。

```
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import com.example.opengles20.glsurfaceview.GlSurfaceViewClass;
import com.example.opengles20.renderer.RendererClass;

public class MYGlclass extends Fragment {
private GlSurfaceViewClass mGLView;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {
        return null;
    }
    View view=inflater.inflate(R.layout.main, container, false);
    mGLView=(GlSurfaceViewClasss)view.findViewById(R.id.gl_surface_view);
    mGLView.setEGLContextClientVersion(2);
    RendererClass rendererclass=new RendererClass(getActivity());
    mGLView.setRenderer(rendererclass);
    mGLView.setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
    return view;
}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-03T18:24:08.807

使用带有 glsurfaceview 的片段时需要了解的几件事。这有点棘手，但请留在我身边。当您导航到一个新片段时，ondestroyview 会自动使用 glsurfaceview 在您的片段上调用，这会破坏您的视图（您在 oncreateview 中创建并返回的 glsurfaceview）。

因此，当您导航到新片段时，会自动调用 onpause、onstop、ondestroyview，而无需您进行任何工作。当您使用 glsurfaceview 回到该片段时，会自动调用 oncreateview、onactivitycreated、onstart 和 onresume，而无需您进行任何工作。

您问题的关键是了解可以在 android 开发人员网站上找到的片段生命周期，以及了解 glsurfaceview 的功能。

现在，使用 glsurfaceview 您必须使用 onsurfacecreated、onsurfacechanged 和 ondrawframe 来实现渲染器。导航到另一个片段，然后使用 glsurfaceview 返回到您的片段将导致再次调用 onsurfacecreated，因为您的 glsurfaceview 在 ondestroyview 中被破坏，您的上下文已经丢失，您需要重新加载 gl 线程上的所有资源。

最后，从您的问题来看，没有调用 ondrawframe，这可能是由于您没有重新创建视图、设置渲染器并从 oncreateview 返回视图。

所以在 oncreateview 你需要这样的东西

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle     
savedInstanceState) 
{
    View mView = inflater.inflate(R.layout.fragment_layout,  null);

    surface = (GLSurfaceView) mView.findViewById (R.id.glsurfaceview); 
    surface.setEGLContextClientVersion(2); 

    //return your view here
    return mView; 
}

@Override
public void onActivityCreated(Bundle mState) 
{
    super.onActivityCreated(mState);

    //setting your renderer here causes onSurfaceCreated to be called
    //if you set your renderer here then you have a context to load resources
    surface.setRenderer( shader );
} 
```

您不想在 oncreateview 中创建渲染类（着色器），除非您希望每次使用 glsurfaceview 回到片段时都“重新开始”渲染类。相反，在您的 Fragments onCreate 中创建您的渲染类，这样，如果您设置了一些东西，那么您将从您离开的地方开始，因为只需设置渲染器将为您提供表面，这将导致 onsurfacecreated、onsurfacechanged 和 ondrawframe 被调用自动地。在绘制它们之前，请确保在 ondrawframe 中重新加载上次在 onsurfacecreated 中使用的任何资源。

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    shader = new Shader(this); 

    Log.d("Fragment", "OnCreate"); 

} 
```

当涉及到暂停和恢复片段时，在大多数情况下，当您动态替换片段并将其添加到后台堆栈时，这会自动处理，因此只需将 surface.onpause() 和 surface.onResume() 放在正确的位置你很高兴。

为了让事情变得清晰，尝试将日志语句放在围绕片段生命周期和 glsurfaceview 渲染器的方法中，您将能够看到发生了什么和没有发生什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T09:38:42.860

我不使用片段，但如果 glsurface 被破坏，可能必须再次创建 OpenGLRenderer 的实例并重新评估 glsurface，当更改方向并重新创建所有屏幕时，此代码适用于我的活动，在这种情况下我必须再次设置布局的内容视图以重置 glsurfaceview：

```
view.onPause(); 
setContentView(R.layout.slidegl);
view = (GLSurfaceView) this.findViewById(R.id.glSurface);
renderer = new OpenGLRenderer();
view.setRenderer(renderer); 
view.onResume(); 
```

如果您不想重新启动并设置视图的所有内容，请尝试创建 GLSurface 的新对象：

```
this.view = new GLSurfaceView(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-20T16:27:09.060

我不是`OpenGL` `ES`. 我建议您`onCreateView`为您的片段设置，告诉渲染器重新开始绘制，如果这不起作用，请尝试`onResume`从片段中进行。`GL`当涉及到在片段中绘制表面时，应该不需要从活动级别做任何事情。