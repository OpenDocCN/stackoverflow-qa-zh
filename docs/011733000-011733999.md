# StackOverflow 问答 11733000-11733999

# android - 显示带有对话框进度和 webchrome 客户端的 webview

> ID：11733007
> 
> 赞同：1
> 
> 时间：2012-07-31T04:15:29.777
> 
> 标签：android, webview, progressdialog, android-progressbar

我的应用程序有 webview，我添加了显示加载的进度对话框，直到 web 完成加载。我在谷歌搜索并得到了很好的解决方案

```
wv.setWebChromeClient(new MyWebChromeClient());
wv.setWebViewClient(new MyWebViewClient());
wv.loadUrl("http://www.google.com"); 

     private class MyWebViewClient extends WebViewClient {
        @Override
         public boolean shouldOverrideUrlLoading(WebView view, String url) 
        {
            view.loadUrl(url);
            return true;
        }

        @Override
     public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            alertdialog.setTitle("Error");
            alertdialog.setMessage(description);
            alertdialog.setButton("OK", new DialogInterface.OnClickListener() {
             public void onClick(DialogInterface dialog, int which) {
                 //return;
                finish();
             }
         });
            alertdialog.show();
     }
    }

    private class MyWebChromeClient extends WebChromeClient {

        @Override
        public void onProgressChanged(WebView view, int progress) {
            progressDialog.show();
            progressDialog.setProgress(0);
            activity.setProgress(progress * 1000);

            progressDialog.incrementProgressBy(progress);

            if(progress == 100 && progressDialog.isShowing())
                progressDialog.dismiss();
        }

    } 
```

但我的问题是，如何让progressdialog在我启动它后只出现一次，因为现在如果我点击像图片（在google.com中）这样的例子，进度对话框会再次出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T05:26:03.517

```
this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
            setContentView(R.layout.info);

            mProgressDialog = new ProgressDialog(this);
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            mProgressDialog.setMessage("Please wait...");
            mProgressDialog.setCancelable(false);
            mProgressDialog.setMax(100);
            mProgressDialog.show();

            WebView webView = (WebView) findViewById(R.id.webview);
            webView.setVisibility(View.VISIBLE);
            webView.getSettings().setJavaScriptEnabled(true);

            webView.setWebChromeClient(new WebChromeClient() {
                public void onProgressChanged(WebView view, final int progress)
                {
                    activity.setTitle("Loading...");
                    activity.setProgress(progress * 100);
                    mProgressDialog.setProgress(progress );

                    if(progress == 100)
                    {
                        activity.setTitle(R.string.app_name);
                        mProgressDialog.dismiss();
                    }

                }
            });

            webView.setWebViewClient(new WebViewClient() {
                @Override
                public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
                {
                }

                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url)
                {
                    view.loadUrl(url);
                    return true;
                }
            });

            webView.loadUrl("http://www.google.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:44:10.683

检查以下代码以`progressbar`在页面为`loading`.

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.newsdisplay);
    getWindow().setFeatureInt( Window.FEATURE_PROGRESS, Window.PROGRESS_VISIBILITY_ON); 

    newswebview = (WebView) findViewById(R.id.news_webView);
    newswebview.setWebViewClient(new WebViewClient());
    WebSettings webSettings = newswebview.getSettings();
    webSettings.setJavaScriptEnabled(true);

    newswebview.getSettings().setSupportZoom(true);       //Zoom Control on web (You don't need this 
     //if ROM supports Multi-Touch      
    newswebview.getSettings().setBuiltInZoomControls(true); //Enable Multitouch if supported by ROM

    newswebview.loadUrl(url);

    final Activity MyActivity = this;

newswebview.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress) 
       {

        //Make the bar disappear after URL is loaded, and changes string to Loading...
        MyActivity.setTitle("  Loading...");
        MyActivity.setProgress(progress * 100); //Make the bar disappear after URL is loaded

        // Return the app name after finish loading
           if(progress == 100)
              MyActivity.setTitle(R.string.app_name);

    }
});

}

 @Override  
    public boolean onKeyDown(int keyCode, KeyEvent event)   
    {  
        if ((keyCode == KeyEvent.KEYCODE_BACK) && newswebview.canGoBack()) {  
            newswebview.goBack();  
            return true;  
        }  
        return super.onKeyDown(keyCode, event);  
    }  

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T04:46:11.757

//使用此代码在 webview 中显示进度

```
this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
            setContentView(R.layout.info);
            WebView webView = (WebView) findViewById(R.id.webview);
            webView.setVisibility(View.VISIBLE);
            webView.getSettings().setJavaScriptEnabled(true);

            webView.setWebChromeClient(new WebChromeClient() {
                public void onProgressChanged(WebView view, int progress)
                {
                    activity.setTitle("Loading...");
                    activity.setProgress(progress * 100);

                    if(progress == 100)
                        activity.setTitle(R.string.app_name);
                }
            });

            webView.setWebViewClient(new WebViewClient() {
                @Override
                public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
                {
                }

                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url)
                {
                    view.loadUrl(url);
                    return true;
                }
            });

            webView.loadUrl("http://www.google.com"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T05:14:19.887

你可以试试下面的代码

```
 view = (WebView) findViewById(R.id.WebView01);
    view.setBackgroundColor(0);  // set the background transparent 

    progressDialog = ProgressDialog.show(view.getContext(), "Loading...", "Loading...");
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER    );

    view.setWebChromeClient(new MyWebChromeClient());
    view.getSettings().setJavaScriptEnabled(true);
    view.setWebViewClient(new MyWebViewClient());
    view.loadUrl("http://www.xxx.com/web/apps/jots.do"); 
```

然后创建类

```
private class MyWebViewClient extends WebViewClient {
    @Override
     public boolean shouldOverrideUrlLoading(WebView view, String url)      
    {
        view.loadUrl(url);
        return true;
    }
}

private class MyWebChromeClient extends WebChromeClient {

    @Override
    public void onProgressChanged(WebView view, int newProgress) {
        if(progressDialog!=null){
            if ( newProgress >=80 ) {
                progressDialog.dismiss();
            } else {
                progressDialog.setMessage(newProgress + " % loaded");
            }
        }
        super.onProgressChanged(view, newProgress);
    }
} 
```

# android - ArrayAdapter 更改为 ListView 但 onClickListener 不知道

> ID：11733009
> 
> 赞同：1
> 
> 时间：2012-07-31T04:15:46.883
> 
> 标签：android, listview, android-arrayadapter

我有 1 个 ListView 和两个 ArrayAdapters

根据 if 语句，这将发生

`listView1.setAdapter(adapter1);` 或者 `listView1.setAdapter(adapter2);`

在 onCreate() 上，这被称为， `listView1.setAdapter(adapter1);`

所以 listView1.setOnItemClickListener() 连接到适配器 1。

在程序执行期间，当`listView1.setAdapter(adapter2);`被调用时，ListView 会更新并且显示会显示相应的结果，但是，单击具有适配器 2 结果的项目实际上仍然引用适配器 1 结果。

当 listView1 的适配器发生变化时，如何让 onItemClickListener 切换？

谢谢

```
 listView1.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            Intent i = new Intent("com.project.DetailView");
            i.putExtra("serial", list.get(position).getSerial());
            i.putExtra("name", list.get(position).getName());

            startActivity(i);

        }
    });

}

adapter1 = new ArrayAdapter<Object>(this, android.R.layout.simple_list_item_1, list1);

adapter2 = new ArrayAdapter<Object>(this, android.R.layout.simple_list_item_1, list2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:28:12.093

onItemClick 中的代码，对适配器没有任何依赖，它对列表有依赖。我认为你应该覆盖`getItem`这两个适配器的方法，而不是`getItem`从适配器中逐个列表获取，如果你从 HashMap 返回`getItem(int position)`，那么你应该修改你的方法如下：

```
listView1.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            HashMap<String, String> item=getAdapter().getItem(position);

            Intent i = new Intent("com.project.DetailView");
            i.putExtra("serial", item.get("serial"));
            i.putExtra("name", item.get("name"));

            startActivity(i);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:33:38.583

当您设置适配器执行此操作时，

适配器1.notifyDataSetChanged();

或者

adapter2.notifyDataSetChanged();

如果它不起作用，请发布您的代码以了解您到底做了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:26:30.147

这段代码可以帮助你。

```
listView.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long id) {
                // TODO Auto-generated method stub
                Log.i("item",""+listView.getItemAtPosition(position));

            }
        }); 
```

# java - 如何验证光标/焦点是否存在于文本字段上

> ID：11733013
> 
> 赞同：1
> 
> 时间：2012-07-31T04:16:03.560
> 
> 标签：java, focus, webdriver, textfield

登录后我有一个文本字段。登录后，光标将自动聚焦在该文本字段上。如何验证该文本字段上是否存在光标/焦点？

下面是文本字段的 HTML 代码：

```
<input type="text" name="field(TITLE)" id="widget_polarisCommunityInput_113_title"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:51:21.297

您也可以尝试直接 webdriver 方法：

```
driver.switchTo().activeElement() 
```

> 切换到当前在当前“切换到”的文档中具有焦点的元素，如果无法检测到，则切换到 body 元素。这与在 Javascript 中调用“document.activeElement”的语义相匹配。 **返回**：具有焦点的 WebElement，如果没有检测到具有焦点的元素，则返回 body 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:21:33.873

您可以检查 document.activeElement
这在所有主要浏览器中都受支持。

有关更多信息，请参阅[SO](https://stackoverflow.com/questions/497094/how-do-i-find-out-which-javascript-element-has-focus)。这个问题可能是这个问题的重复。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T06:48:48.310

我的详细回答是：

```
WebElement actual = (WebElement)jse.executeScript("return document.getElementById('widget_polarisCommunityInput_113_title');");
WebElement expected = (WebElement)jse.executeScript("return document.activeElement;");
assertEquals(actual, expected); 
```

# android - Android EditText onfocuschange 不起作用

> ID：11733016
> 
> 赞同：2
> 
> 时间：2012-07-31T04:17:10.067
> 
> 标签：android, android-edittext, onfocus

我是 Android 编程新手。我下面的程序做了一个简单的华氏到摄氏转换。如果您在 Farenheit 中输入值，`EditText`它将在每次输入的按键时将其转换为摄氏度。

我收到以下错误，我在摄氏编辑文本中所做的更改未反映在华氏温度中。

```
07-29 01:59:21.189: E/AndroidRuntime(1390): java.lang.NumberFormatException: Invalid float: "" 
```

以下是我的`MainActivity.java`：

```
 public class MainActivity extends Activity {
    private EditText celsiusText;
    private EditText farenheitText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        celsiusText = (EditText) findViewById(R.id.editText1);
        farenheitText = (EditText) findViewById(R.id.editText2);
        celsiusText.requestFocus();
        celsiusText.setOnFocusChangeListener((OnFocusChangeListener) this);
        farenheitText.setOnFocusChangeListener((OnFocusChangeListener) this);
    }

    public void onFocusChange(View v, boolean hasFocus) {            
         TextWatcher watcher1 = new TextWatcher() {
             public void afterTextChanged(Editable s) {

             }

             public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                 // empty
             }

             public void onTextChanged(CharSequence S,int start,int before, int count) {
                 float inputValue;
                 if (!S.toString().equals("")) {
                     inputValue = Float.parseFloat(S.toString());
                     (findViewById(R.id.editText1)).setText(String
                               .valueOf(convertFahrenheitToCelsius(inputValue)));
                  } else {
                      (findViewById(R.id.editText1)).setText("");
                      return;
                  }
              }
          };

          TextWatcher watcher2 = new TextWatcher() {
               public void afterTextChanged(Editable s) {
                   // empty
               }

               public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                   // empty
               }

               public void onTextChanged(CharSequence S,int start,int before, int count) {
                    float inputValue;
                    if (!S.toString().equals("")) {
                        inputValue = Float.parseFloat(S.toString());
                        (findViewById(R.id.editText2)).setText(String
                                .valueOf(convertCelsiusToFahrenheit(inputValue)));

                     } else {
                         (findViewById(R.id.editText2)).setText("");
                         return;
                     }
                }
            };

            if((v == findViewById(R.id.editText2)) && hasFocus) {
                farenheitText.addTextChangedListener(watcher1);
            } else if ((v == findViewById(R.id.editText1)) && hasFocus) {
                (findViewById(R.id.editText1)).setText("");
                celsiusText.addTextChangedListener(watcher2);
            }
      }

      //Converts to celsius
      private float convertFahrenheitToCelsius(float fahrenheit) {
          return ((fahrenheit - 32) * 5 / 9);
      }

      // Converts to fahrenheit
      private float convertCelsiusToFahrenheit(float celsius) {
           return ((celsius * 9) / 5) + 32;
      }

} 
```

我的`activity_main.xml`：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="16dp"
    android:paddingRight="16dp" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="128dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="62dp"
        android:ems="10"
        android:inputType="numberSigned" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/editText2"
        android:layout_width="128dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/editText1"
        android:layout_alignBottom="@+id/editText1"
        android:layout_alignParentRight="true"
        android:ems="10"
        android:inputType="numberSigned" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText1"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="18dp"
        android:text="@string/celsius"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_alignRight="@+id/editText2"
        android:text="@string/fahrenheit"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-12T11:34:45.617

有时`clearfocus()`可以解决这个问题。尝试调用方法或其他合适`editText1.clearfocus()`的`onCreate()`代码位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:19:40.353

您必须在活动类中实现 OnFocusChangeListener。

```
public class MainActivity extends Activity implements OnFocusChangeListener
{
    ....
    @Overrride
    public void onFocusChange(View v, boolean hasFocus)
    {
        ....
    }
    ....
} 
```

我认为当您在该行 (OnFocusChangeListener) 键入 cast 时`this`会`OnFocusChangeListener` 出现**异常**

***编辑:::*** 我查看了你的代码。我认为你的实现应该是这样的：

```
 celsiusText.addTextChangedListener(new TextWatcher()
    {
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count)
        {
            ....
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after)
        {
            ....
        }

        @Override
        public void afterTextChanged(Editable s)
        {
            ....
        }
    });
    farenheitText.addTextChangedListener(new TextWatcher()
    {
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count)
        {
            ....
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after)
        {
            ....
        }

        @Override
        public void afterTextChanged(Editable s)
        {
            ....
        }
    }); 
```

将此代码放入 oncreate 并删除行`celsiusText.setOnFocusChangeListener((OnFocusChangeListener) this)`和`ferenheitText.setOnFocusChangeListener((OnFocusChangeListener) this)`

# sql - 如何使用一个查询结果中的两列来查找另一个表中的值？

> ID：11733019
> 
> 赞同：1
> 
> 时间：2012-07-31T04:17:55.423
> 
> 标签：sql, join

如何使用一个查询结果中的两列来查找另一个表中的值？

我已经看到了几个“字典”问题的示例，使用单个列（例如 UserID）来查找用户的名字和姓氏，但我有两列都需要与每个匹配项的多个可能结果匹配。

目前，我查询所有准备发货为 TRUE 的记录，然后使用代码循环查找每个产品/颜色组合的发货标签文件的结果。我的目标是通过单个查询获得所需的结果。

我尝试了以下 SQL，但速度太慢（几分钟）。我想知道使用 JOIN 或其他一些技巧是否会更快（不到一秒）。目前我的代码大约需要 2 秒。我使用的真实世界表有数千条记录，并返回数百条结果。

```
Select
  tblA.BoxID,
  tblA.Product,
  tblA.Color,
  tblA.Ready_to_Ship AS Ready,
  tblB.Shipping_Label_File
From
  Table_A tblA,
  Table_B tblB
Where
  tblB.Product = tblA.Product AND
  tblB.Color = tblA.Color AND
  tblA.Ready_to_Ship = 'TRUE'

Desired results:
BoxID    Product        Color  Ready   Shipping_Label_File
B5255    34xBty2001     Red    TRUE    ShipLBL-01r_A.txt
B5255    34xBty2001     Red    TRUE    ShipLBL-01r_B.txt
J6632    34xBty2002     Blue   TRUE    ShipLBL-07b_D.txt
E2748    34xBty2002     Red    TRUE    ShipLBL-07r_D.txt
E4716    64d_Dty2005    Red    TRUE    ShipLBL-05r_B.txt
E4716    64d_Dty2005    Red    TRUE    ShipLBL-05r_C.txt

Table_A
BoxID    Product       Color  Ready_to_Ship
B5255    34xBty2001    Red    TRUE
J6632    34xBty2002    Blue   TRUE
F8975    64b_Dty2005   Blue   FALSE
F9768    64b_Dty2005   Blue   FALSE
I1053    34xBty2001    Green  FALSE
J2202    34xBty2001    Blue   FALSE
D2986    64a_Dty2005   Blue   FALSE
A6210    64b_Dty2005   Blue   FALSE
I1088    34xBty2002    Blue   FALSE
E2748    34xBty2002    Red    TRUE
D7945    64b_Dty2005   Blue   FALSE
E4716    64d_Dty2005   Red    TRUE

Table_B
Product      Color   Shipping_Label_File
34xBty2001   Red     ShipLBL-01r_A.txt
34xBty2001   Red     ShipLBL-01r_B.txt
34xBty2001   Blue    ShipLBL-01b_A.txt
34xBty2001   Green   ShipLBL-01g_A.txt
34xBty2001   Green   ShipLBL-01g_C.txt
34xBty2002   Red     ShipLBL-07r_D.txt
34xBty2002   Blue    ShipLBL-07b_D.txt
34xBty2002   Green   ShipLBL-07g_M.txt
64a_Dty2005  Blue    ShipLBL-A3b_A.txt
64a_Dty2005  Green   ShipLBL-A3g_E.txt
64b_Dty2005  Red     ShipLBL-05r_B.txt
64b_Dty2005  Red     ShipLBL-05r_C.txt
64b_Dty2005  Green   ShipLBL-05g_A.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:09:47.210

尝试

```
Select
  tblA.BoxID,
  tblA.Product,
  tblA.Color,
  tblA.Ready_to_Ship AS Ready,
  tblB.Shipping_Label_File
From
  Table_A tblA 
  left join Table_B tblB on tblA.Product=tblB.Product and   tblA.Color=tblB.Color
Where
  tblA.Ready_to_Ship = 'TRUE' 
```

# javascript - 根据时间计算运动

> ID：11733024
> 
> 赞同：0
> 
> 时间：2012-07-31T04:18:42.720
> 
> 标签：javascript, math

所以我正在做一个小项目，主要是为了帮助我学习更好的javascript，但我遇到了一个小问题。我可以很好地制作动画，但我的问题是.. 我试图找出计算像素变化量以移动动画的每一步所需的数学。所以说我的 div 是 450px 宽，我说的是 animate({ width : 600, duration : 2000 })。这留下了 150 像素的总移动量，但是如果我每 3 毫秒调用一次 setTimeout 函数，我为每帧做多少移动。我知道解决方案可能很简单，但出于某种原因，也许只是因为我在写这整件事时一直在敲墙，现在我想不出足够的答案。如果有人需要，我可以展示代码示例。提前感谢您的帮助。

```
animate : function(params, duration) {
    if(!params) {
        return this;
    } else {
        this.current = this._defCurrent;
        console.log(this.current);
        var time = (duration) ? duration : this.slow;
        var target;
        for(var index in params) {
            if(index == 'queue') {
                if(params[index]){
                    this.animQueue = true;
                } else {
                    this.animQueue = false;
                }
            } else {
                var current = parseFloat(this.getStyle(index));
                if(current < params[index]) {
                    target = params[index] - current;
                    animDirection = '+';
                } else {
                    target = current - params[index];
                    animDirection = '-';
                }
                totalMovement = target / time;
                animObj = {type : index, target : target, move : totalMovement, direction : animDirection, duration : time};
                this.setAnimQueue(animObj);
            }
        }
    }
    this.setTheTimeout();
},
setAnimQueue : function(obj) {
    var that = this;
    for(var i = 0, amt = (obj.duration * this.fps); i < amt; i++) {
        var fun = this.wrapFunction(that.doAnim, this, [obj.type, obj.move, obj.direction]);
        this.queue.push(fun);
    }
},
setTheTimeout : function() {
    var that = this;
    this.interValAmt = setInterval(function() {
        that.deQueue()
    }, this.fps);
},
doAnim : function(type, amount, direction) {
    var totalAmount = eval(parseFloat(this[type]()) + direction + amount);
    if(this.elem.style[this.toCamelCase(type)]) {
        this[type](totalAmount);
    } else {
        this[type](totalAmount)
    }
    return this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:29:36.937

你有距离，你有持续时间。将它们分开可以提供速度。只需将速度乘以时间增量即可得到距离增量。

# datetime - Javascript转换时间以在Windows和Linux之间获得不同

> ID：11733025
> 
> 赞同：3
> 
> 时间：2012-07-31T04:18:53.783
> 
> 标签：datetime

当我从同一个浏览器测试它时，我在客户端转换了时间值：linux和windows上的chrome。

视窗：

```
 var d = new Date(1995,9,1,1,15,0,0) 
    d
    Sun Oct 01 1995 01:15:00 GMT+1300 (New Zealand Daylight Time)
    d.getTime()
    **812463300000**
    var d = new Date(1995,9,1,3,15,0,0) 
    d
    Sun Oct 01 1995 03:15:00 GMT+1300 (New Zealand Daylight Time)
    d.getTime()
    **812470500000** 
```

linux：

```
 var d = new Date(1995,9,1,1,15,0,0) 
   d
   Sun Oct 01 1995 01:15:00 GMT+1200 (NZST)
   d.getTime()
   **812466900000**
   var d = new Date(1995,9,1,3,15,0,0) 
   d
   Sun Oct 01 1995 03:15:00 GMT+1300 (NZDT)
   d.getTime()
   **812470500000** 
```

问题是安装在同一 linux pc 上的服务器会得到不同的毫秒值，我在客户端转换，下一步是服务器将服务器时区的值转换为字符串值。

我知道它应该通过在服务器端转换字符串值来解决，但是如果我必须在客户端转换它，任何人都可以给我一个正确的方向来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:29:08.147

不要依赖客户端（最终用户）时钟 - 如您所说，获取服务器上的时间。始终使用 GMT / UTC 并仅在向他人显示时将其转换为本地时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:50:03.093

日期：

```
var d = new Date(1995,9,1,1,15,0,0) 
```

将使用当前系统设置转换为本地时间。为了使一切保持一致，请从服务器发送自纪元以来的**UTC**时间并将其转换，例如：

```
new Date(812463300000); // Sat Sep 30 22:15:00 UTC+1000 1995 
```

无论服务器位于何处或系统设置如何，都将为完全相同的时刻创建一个日期对象。

# java - 为什么字节超过大小时没有溢出？

> ID：11733028
> 
> 赞同：5
> 
> 时间：2012-07-31T04:19:11.443
> 
> 标签：java, size, overflow, byte

> **可能重复：**
> [为什么 Java Number 数据类型不会溢出？](https://stackoverflow.com/questions/4536864/why-dont-java-number-datatypes-overflow)

在Java中，当继续增加一个`Byte`值并且当它超过大小容量时，为什么它不抛出任何运行时异常？例如：

```
public static void main(String[] args) {
    byte b = 127;
    ++b;
    System.out.println(b);
} 
```

上面的代码将打印`-128`. 扔了不是更好`RuntimeException`吗？为什么要这样设计？

其他原始类型的情况也相同，对于`Integer`：

```
int c = 2147483647;
++c;
System.out.println(c); 
```

上面的代码打印`-2147483648`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T04:33:16.980

整数溢出实际上在计算中非常有用。如果它抛出异常，许多聪明的算法会突然崩溃或变得不切实际。例如，任何涉及定点算术的事情都会突然受到异常的困扰。

问题是，溢出通常不是问题，因为我们在程序中设置了限制以防止它发生（如果它会导致问题）。其他时候，我们设计程序来专门利用它。

不要将溢出视为“超过其最大大小的值”。这在技术上是不可能的。这些位只是环绕并保持在该数据类型的限制内。

如果你需要检查溢出并想产生异常，你可以这样做：

```
byte b = 127;
byte oldb = b;
b++;
if( b < oldb ) {
    // Calamity!!!  Raise an exception!
} 
```

不要害怕你的整数限制。学会理解他们并与他们合作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:32:26.303

在[JVM Specs](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.iadd)中有说明：*“尽管可能发生溢出，但执行 iadd 指令永远不会引发运行时异常。”*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:20:56.457

整数和浮点运算的工作方式基于相同的操作在 C 中的工作方式，这取决于 CPU 通常的工作方式。上溢或下溢不会触发异常（不幸的是，还有一些标志是 java 无法访问的） 只有一个操作会触发异常，即整数除以零会触发多种 CPU 上的处理器中断。浮点除以零被定义为非数字，因此这不会触发中断。

# sql - Oracle 错误 ORA-01483: DATE 或 NUMBER 绑定变量的长度无效

> ID：11733031
> 
> 赞同：0
> 
> 时间：2012-07-31T04:19:43.363
> 
> 标签：sql, oracle

在将记录插入数据库时​​，我们面临以下 Oracle 错误。

```
ERROR SQL State: 72000 java.sql.SQLException: 
ORA-01483: invalid length for DATE or NUMBER bind variable 
```

该表有两列，类型为`varchar2(4000)`。当我尝试将 4000 个字符插入 column1 或 column2 时，它才正确插入。

但是当我尝试在两列中插入 4000 个字符时，就会出现上述错误。

Oracle版本：11g R1
JDK版本：1.4

非常感谢任何想法/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-02T08:32:50.497

我假设这是关于 SQL 描述符区域中绑定变量的长度

声明 SQLDA 时，应在使用前为每个值提供长度

所以它看起来像：

```
SQLDA   *binda;
binda = SQLSQLDAAlloc(SQL_SINGLE_RCTX, 2, NAME_SIZE, IND_NAME_SIZE); 
binda->N = 2; 

binda->V[0] = (char *) number; 
binda->L[0] = (long) sizeof (int); 
binda->T[0] = 3; 

binda->V[1] = (char *) date; 
binda->L[1] = (long) 7; /* oracle datatype 12 size */
binda->T[1] = 12; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T10:18:23.820

如果长度 >1000，您可以使用 Clob 保存这是解决 ORA-01483 和 ORA-01461 的一种方法

就像： *`DefaultLobHandler lobHandler = new DefaultLobHandler(); LobCreator lobCreator = lobHandler.getLobCreator(); lobCreator.setClobAsString(ps, i + 1, (String) column.getValue());`*

# c# - 为什么c#可以在android和iOS上制作带有GUI的程序而c++不能？

> ID：11733032
> 
> 赞同：0
> 
> 时间：2012-07-31T04:19:55.183
> 
> 标签：c#, android, c++, ios, user-interface

Mono touch 可以让 C# 在 iOS 和 android 上编译

但是为什么没有 C++ 的东西可以让 C++ 原生支持 iOS 和 android。

我个人认为 C++ 可以更容易 C#。

谁能告诉我为什么 C# 有跨平台的 Gui 而 C++ 没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:23:56.187

C# 有一个标准化的 GUI 工具包 (.Net)，而 C++ 没有。这是 C++ 在可预见的将来无法解决的问题，因为它违背了 C++ 的一些原则，在标准库方面需要性能和通用性。

因此，由于 GUI 不是标准化的，C++ 委员会不太可能会追求这样的事情，这会使 C++ 在某些平台上变得非常奇怪。

另一方面，像Qt这样的独立框架可以做到这一点，但他们没有表现出这样的兴趣，主要是由于Digia对Apple的商业模式的合同限制，Qt无法在iOS上获得商业许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:25:27.643

实际上，在 Android 上，您*可以* [完全使用 C++ 开发应用程序](http://developer.android.com/reference/android/app/NativeActivity.html)。您无法直接访问所有 J​​ava API，因此在某些情况下您可能仍需要一点 Java 代码。但是您可以直接访问 OpenGL ES、OpenSL ES、zlib 等。

至于 iOS .. 好吧，他们决定使用 Objective-C。到目前为止效果还不错，但我知道如果你来自纯 C/C++ 背景，学习曲线会有点小。至少 iOS 产品如今如此流行这一事实意味着，为 ObjC 查找信息和学习材料不是任何问题。

# java - XPathReader 错误：java.lang.String 无法转换为 org.w3c.dom.Node

> ID：11733033
> 
> 赞同：1
> 
> 时间：2012-07-31T04:19:57.763
> 
> 标签：java, xml, xpath, clob

我正在尝试解析从某个`Clob`类型获得的 XML 中的数据。出于某种原因，我得到了这个例外......我不知道为什么。我从包含一个`XMLType`值的 Oracle 数据库列中获得了 Clob，即 XML。我已经成功地将包含的 XML 提取`XMLType`到一个`Clob`类型中。这是通过以下代码获得的：

```
xmlBean =  XmlHelper.xPathRead(film.getXmlClob()); 
```

`film`如果您愿意，该对象在模型中，并且该`getXmlClob()`方法返回一个`Clob`包含我想使用 XPath 解析的 XML 的值。这是其余的代码：

**XML 助手**

```
public static XmlBean xPathRead(Clob xmlClob) {
    XPathReader reader = new XPathReader(xmlClob);
    XmlBean xmlBean = new XmlBean();   // just an entity from the model to store the xml's contents inside

    String filmId = "/IMAGE[1]/@id";
    xmlBean.setFilmId(Integer.parseInt((String) reader.read(filmId, XPathConstants.STRING)));
} 
```

**XPathReader**

```
public class XPathReader {
    private String xmlString;
    private XPath xPath;

    public XPathReader(Clob xmlClob) {

        try {
            if ((int) xmlClob.length() > 0) {  
                String s = xmlClob.getSubString(1, (int) xmlClob.length()); // this is a way to cast a CLOB into a STRING
                this.xmlString = s;
              }
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        xPath = XPathFactory.newInstance().newXPath();
    }

    public Object read(String expression, QName returnType) {
        try {
            XPathExpression xPathExpression = xPath.compile(expression);
            return xPathExpression.evaluate(xmlString, returnType);
        } catch (XPathExpressionException ex) {
            ex.printStackTrace();
            return null;
        }
    }
} 
```

有任何想法吗？问题在于`evaluate()`方法...

**错误信息**

> java.lang.ClassCastException：java.lang.String 无法转换为 com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.eval（未知来源）的 com.sun.org 的 org.w3c.dom.Node .apache.xpath.internal.jaxp.XPathExpressionImpl.eval(Unknown Source) at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.evaluate(Unknown Source) at helper.XPathReader.read(XPathReader.java:34 ) 在 helper.XmlHelper.xPathRead(XmlHelper.java:325)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:16:37.823

无论如何，你不能从字符串中做到这一点。

这样的事情怎么样

```
public class XPathReader {
  private XPath xPath;
  private Document doc;

  public XPathReader(Clob xmlClob) {

    try {
        if ((int) xmlClob.length() > 0) {  
            String s = xmlClob.getSubString(1, (int) xmlClob.length()); // this is a way to cast a CLOB into a STRING
            doc = readDoc(s);
          }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    xPath = XPathFactory.newInstance().newXPath();
}

public Object read(String expression, QName returnType) {
    try {
        XPathExpression xPathExpression = xPath.compile(expression);
        return xPathExpression.evaluate(doc, returnType);
    } catch (XPathExpressionException ex) {
        ex.printStackTrace();
        return null;
    }
}

public Document readDoc(String s)
{
    Document d = null;
    try
    {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        InputSource is = new InputSource(new StringReader(s));
        d = builder.parse(is);
    } catch (Exception e)
    {
    }
    return d;
} 
```

}

我实际上还没有尝试过，您需要更好的错误处理，但它应该可以正常工作

# jquery - jQuery：将 JSON 解析为元素数组

> ID：11733034
> 
> 赞同：2
> 
> 时间：2012-07-31T04:19:58.333
> 
> 标签：jquery, arrays, json

我有以下代码，其中的第一部分在触发下拉选择后从 PHP 获取 JSON。结果被放置在一个名为“results”的 div 中，只是为了验证它是否有效。到目前为止，一切看起来都很好。我还有几行代码可以解析 JSON，并在一系列警报中显示各个元素，再次验证它在这一点上的功能，它确实如此。但是，在此之后，我尝试以与创建警报类似的方式解析 JSON，仅将单个结果放在单独的数组中。我有一个检查以在 $.each 执行时提醒结果，以便我可以查看代码块是否正在运行。但是，它不起作用。我猜也许我的括号没有正确设置，或者我可能需要在某处声明另一个函数。

谢谢你的帮助。

```
$(document).ready(function() {

    $('#routesDropDown').change(function() {   
        var queryParam = 'routesStations=' +$(this).val();
        $.post('getstations.php', queryParam, processResponse);

    });

    function processResponse(data) {
    $('#results').html(data);   

// parse the data and store in variable, "obj"
var obj  = jQuery.parseJSON( data );
// iterate through each value in the "obj" variable
$.each(obj, function(key, value) {
    alert(value.color + ' ' + value.abbr + ' ' + value.lat + ' ' + value.lng);
});

        //THIS IS THE PART THAT DOES NOT WORK...
    var obj = jQuery.parseJSON( data ) {
        var color = [];
        var abbr = [];
        var lat = [];
        var lng = [];
        $.each(obj, function(value) {
            color.push(value.color);
            abbr.push(value.abbr);
            lat.push(value.lat);
            lng.push(value.lng);
            alert(value.color + ' ' + value.abbr + ' ' + value.lat + ' ' + value.lng);      
    })};

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:25:31.503

对我来说，jquery 的秘诀是选择器......

我会在你的 $.each() 函数之前做一个快速的“alert(data)”，只是为了确保你得到你认为你得到的东西......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:39:41.557

我认为回调函数接受两个值 index 和 value

所以代码应该是

```
$.each(obj, function(index, value) {<--- Here i have added index. Like your above code.
        color.push(value.color);
        abbr.push(value.abbr);
        lat.push(value.lat);
        lng.push(value.lng);
        alert(value.color + ' ' + value.abbr + ' ' + value.lat + ' ' + value.lng);      
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:31:01.153

我认为你的json没有创建你可以在控制台中检查它，如果代码没有返回一个json那么你应该`json`在函数中传递一个参数，`$.post`比如

```
$.post('getstations.php', queryParam, processResponse,"json"); 
```

请参阅此处的文档：[jQueryPost](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:10:09.053

```
$.post('getstations.php', queryParam, processResponse,"json");
queryParam你现在是一个字符串不是一个object对象 jquery api文档说明这里是需要传入一个{xxx:xxx}对象 
```

# python - 在 Amazon EC2 中安装 Pyhash

> ID：11733036
> 
> 赞同：0
> 
> 时间：2012-07-31T04:20:18.630
> 
> 标签：python, amazon-ec2, hash

我正在尝试安装 Pyhash，它是在 python 中提供各种散列函数的第三方包。我在 ec2 ussign easy_install 中安装了这个包。

但是，每当我尝试导入 pyhash 时，都会出现以下错误

```
ImportError: libboost_python-py26.so.1.42.0: cannot open shared object file: No such file or directory 
```

我已经在 ami linux 中安装了 boost、boost-python。

有什么建议么？

还有其他提供 Murmurhash1 的 python 包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:53:44.913

找不到 libboost_python-py26.so.1.42.0。您应该将它的路径添加到 LD_LIBRARY_PATH

# linux - 为什么使用 xshell 4.0 时 alt+tab 不起作用？

> ID：11733039
> 
> 赞同：0
> 
> 时间：2012-07-31T04:20:24.203
> 
> 标签：linux

当我使用 xshell 时，我无法通过 alt+tab 切换到其他窗口。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:25:44.467

您的问题听起来像是您将 XShell 设置为“始终位于顶部”

首先，确保在“查看”选项下禁用了“透明”选项。然后，禁用以下两个选项：

1.  在鼠标悬停时使窗口不透明

2.  透明时始终在顶部

此外，如果问题仍然存在，请尝试重置注册表项。要删除 Xshell 注册表项：

1.  单击 Windows 开始菜单，然后单击运行。
2.  输入 regedit 并按回车键。
3.  删除以下注册表节点：

\HKEY_CURRENT_USER\Software\NetSarang\Xshell

# perl - 编写一个以 root 身份运行的 perl cgi 应用程序

> ID：11733045
> 
> 赞同：0
> 
> 时间：2012-07-31T04:21:16.280
> 
> 标签：perl, cgi

我正在编写一个 perl cgi 应用程序。在某些时候，此 cgi 应用程序需要以 root 身份运行才能访问和写入特定文件。我想知道我应该如何做这件事以及我在做这件事时应该采取的安全预防措施。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T04:24:59.880

你几乎不应该。

如果您无法避免它，请创建一段小而简单的代码，该代码使用 setuid root 运行，仅执行该任务，仅此而已，或者使用`sudo`或类似的方式运行执行此操作的脚本。

为该文件提供适当的权限，以便您的网络用户可以对其进行写入（如果没有必要，不一定要从中读取）将是一个更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:51:19.023

如果可以的话，您必须始终避免这样做。

如果您的程序需要立即写入特权文件，请使用[**Mat 的**回复](https://stackoverflow.com/a/11733075/622310)。但是，您可以将内容写入其他地方并每五分钟运行一次 cron 作业（例如）以复制数据。

# algorithm - 如何降低时间复杂度

> ID：11733052
> 
> 赞同：8
> 
> 时间：2012-07-31T04:21:43.637
> 
> 标签：algorithm, data-structures, time-complexity

昨天我参加了一个面试。他给了我几个编程问题要解决。当我解决它们时，面试官说可以以更好的时间复杂度来完成。我非常沮丧，以至于我无法以最佳时间复杂度完成该程序。最后我无法通过面试过程。但我想知道的是，我们如何才能在最佳时间解决任何问题？我应该采取什么方法来达到这种状态？我知道完美的答案是**练习**。但是我仍然想知道如何以及以什么方式来执行一个程序，以便它在更短的时间内运行并使用最好的内存。我必须读什么书？我要练习什么问题？

**PS：我知道这不是技术问题。但请让我知道我该怎么做。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T04:38:06.290

关于算法、数据结构、时间和空间复杂性的最佳书籍之一是[《算法导论》](http://mitpress.mit.edu/algorithms/)。我还可以建议您阅读以下书籍，以便为面试做好准备：

1.  [破解编码面试：150 个编程问题和解决方案](https://rads.stackoverflow.com/amzn/click/com/1466208686)
2.  [编程面试曝光：找到下一份工作的秘诀](https://rads.stackoverflow.com/amzn/click/com/047012167X)
3.  [编程珍珠](https://rads.stackoverflow.com/amzn/click/com/0201657880)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T05:28:10.513

解决这类问题需要练习，再加上“看窍门”。对于这个特定示例，您可能会注意到 ，所有元素相乘的乘积`B[i] = P/A[i]`在哪里。因此，在这种情况下，O(n) 性能来自首先计算一次（n-1 次乘法），然后计算每个（另外 n 次除法）。`P``A[i]``P``B[i]`

有时，“看花招”的最佳方法是在您使用的算法中寻找重复的模式。对于您的示例，请注意，在您的描述中，您实际上输入了`"A[2] * A[3] ... A[n-1]"`两次字符串，所以这是一种思考“我可以在算法中只做一次这件事”的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T04:35:02.207

阅读大量算法并练习它们。

在线评委解决问题也有助于提高问题解决技能的效率和准确性。

部分评委名单如下：

*   [UVa 在线法官](http://uva.onlinejudge.org/)
*   [Sphere 在线裁判 (SPOJ)](http://www.spoj.pl/)
*   [顶级编码器](http://www.topcoder.com/tc)

# ruby-on-rails - 如何制作自定义种子 Rakefile

> ID：11733054
> 
> 赞同：0
> 
> 时间：2012-07-31T04:21:59.570
> 
> 标签：ruby-on-rails, yaml, seed

我正在寻找一些 yml ：

```
My Random Name of a Topic:
  Color:
    Brown
    Blue
    Green
  Style:
    Thin
    Fat 
```

而且我想制作一个`Topic`对象，并将`Item`Type 和 Style 中的所有单词组合在一起。

这些词中的每一个都有一个`type`属性，它会说明它是 a`style`还是`color`

主题有一个带有项目的 HABTM，所以我也想建立这种连接。

但不要要求某人通过一个巨大的答案，我只是在寻找解析这个 yaml 的最佳方法：

```
task glass_full_of_yaml: :environment do
  File.open(Rails.root + 'lib/words/glass_full_of.yml', 'r') do |file|
    YAML::load(file).each do |record|
      debugger
      # Item.create!(type: record, name: record)
    end
  end
end 
```

如果我所有的主题都命名不同，我如何选择它的嵌套属性并从中创建 Item 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:35:50.883

又快又脏：

```
YAML::load(file).each do |topic, item_types|
  Topic.create! :name => topic, :items => item_types.map { |type, names|
    names.split(' ').map { |name|
      Item.new :type => type, :name => name
    }
  }.flatten
end 
```

# ms-access - 预期的参数太少 1

> ID：11733060
> 
> 赞同：1
> 
> 时间：2012-07-31T04:22:38.960
> 
> 标签：ms-access, syntax-error

我使用前端作为业务对象和后端 MS Access 数据库。我有一个字段，语法如下

```
Format(Votes.`Vote Received`,"yyyymm") 
```

此语法正在解析，但在查询中拉出此对象时会出错。我认为这与字段名称上的引号有关，但这就是该字段的命名方式。当我在字段查询下方拉动时不会出错。

```
Votes.`Vote Received` 
```

感谢您的投入..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T05:34:08.340

如果它适用于其他任何人。我有同样的问题“参数太少”，如果使用反引号进行字段转义并使用单引号定义日期格式，它会起作用。不知道为什么它有效，但你可以试试。

```
Format(tableused.`fieldused`, 'mm/dd/yyyy') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:28:29.360

据此，[您](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711819%28v=vs.85%29.aspx)需要使用反引号进行转义：

```
Format(Votes.`Vote Received`, "yyyymm"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:05:59.063

尝试用方括号代替字段名称周围的反引号。

```
Format(Votes.[Vote Received],"yyyymm") 
```

如果这不能解决错误，请检查查询 SQL 中所有项目的拼写。

我不明白为什么`Format()`你仍然失败。您可以使用不同的方法来生成“yyyymm”格式。将“0”与输出连接`Month()`并取最右边的 2 个字符。

```
SELECT
    Year(Votes.[Vote Received]) &
        Right("0" & Month(Votes.[Vote Received]), 2)
        AS year_month
FROM YourTable; 
```

由于第二个查询也失败了，请直接在 Access 中作为新查询尝试。如果该尝试失败，至少它会让您知道数据库引擎认为哪个项目是缺少的参数......它将显示一个标题为“输入参数值”的消息框，在该标题下方，您会找到“缺少的参数”的名称范围”。而且，如果直接在 Access 中运行时它没有失败……也许这是 Business Objects 与 MS Access ODBC 驱动程序交互方式的问题。

# css - a:hover 上的背景颜色变化

> ID：11733065
> 
> 赞同：0
> 
> 时间：2012-07-31T04:23:14.623
> 
> 标签：css, html, hover, background-color

所以我基本上想采用我用 div 创建的导航并使其每条线（id）都会翻转不同的颜色。

我已经尝试了很多不同的方法，我相信我无法正确使用 ID。

```
<div class="navcontainer">
        <div id="1"><a href="#">home</a></div>
        <div id="2"><a href="#">work</a></div>
        <div id="3"><a href="#">resume</a></div>
        <div id="4"><a href="#">about</a></div>
        <div id="5"><a href="#">links</a></div>
</div> 
```

和 CSS

```
.navcontainer {
font-family: Arial, Helvetica, sans-serif;
font-size:24px;
display:block;
}
.navcontainer div a {
background-color:black;
margin:2px;
padding:2px;
display:inline;
float:left;
clear:both;
color:white;
text-decoration:none
}
.navcontainer #1 a:hover {
color:black;
background-color:red;
}
.navcontainer #2 a:hover {
color:black;
background-color:orange;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T04:25:09.070

切勿以(1,2,3,) 数字开头**ID** & **Class 。**`numerical`像这样写：

```
#nav1,#nav2... 
```

**HTML**

```
<div class="navcontainer">
        <div id="nav1"><a href="#">home</a></div>
        <div id="nav2"><a href="#">work</a></div>
        <div id="nav3"><a href="#">resume</a></div>
        <div id="nav4"><a href="#">about</a></div>
        <div id="nav5"><a href="#">links</a></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:28:29.007

将您的 ID 名称更改为不以数字开头的字母。

IE：

```
.navcontainer #one a:hover {
color:black;
background-color:red;
}

<div class="navcontainer">
    <div id="one"><a href="#">home</a></div>
    <div id="2"><a href="#">work</a></div>
    <div id="3"><a href="#">resume</a></div>
    <div id="4"><a href="#">about</a></div>
    <div id="5"><a href="#">links</a></div>
</div> 
```

# iphone - 如何在 iPhone SDK 的后台运行警报？

> ID：11733069
> 
> 赞同：2
> 
> 时间：2012-07-31T04:24:19.473
> 
> 标签：iphone, objective-c, ios

我将闹钟时间设置为 1 小时。当应用程序处于运行模式时，警报工作正常，但当它在后台时，警报无法正常工作。如何在后台运行警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:28:44.093

您需要使用本地通知。这很简单。有关更多信息，请参阅此文档（推送通知来自远程源，因此您可以忽略它们）。

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:56:07.050

此代码只是在后台显示带有警报和声音的 localNotification。因此，在代码中进行了一些更改，并在警报应用程序中使用。

```
- (IBAction)Alert:(id)sender{

    NSDateFormatter *format = [[NSDateFormatter alloc] init];
    [format setDateFormat:@"yyyy-MM-dd"];
    //NSDate *date = [NSDate date];

    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    localNotif.fireDate =[NSDate dateWithTimeIntervalSinceNow:15];
    localNotif.timeZone = [NSTimeZone localTimeZone];
    localNotif.alertBody = @"Emergency";

    localNotif.alertAction = @"View";
    localNotif.soundName = @"police.mp3";
    localNotif.applicationIconBadgeNumber = 1;
    localNotif.repeatInterval = NSYearCalendarUnit;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
    [localNotif release];

} 
```

# ruby - 如何稳健地解析格式错误的 CSV？

> ID：11733076
> 
> 赞同：16
> 
> 时间：2012-07-31T04:25:03.047
> 
> 标签：ruby, regex, csv, fastercsv

我正在处理来自政府来源（FEC、州选民数据库等）的数据。它的格式不一致，以各种令人愉快的方式破坏了我的 CSV 解析器。

它是外部来源和权威的。我必须解析它，并且我不能让它重新输入、输入验证等。就是这样; 我不控制输入。

特性：

1.  字段包含格式错误的 UTF-8（例如`Foo \xAB bar`）
2.  行的第一个字段指定已知集合中的记录类型。知道了记录类型，你就知道有多少个字段以及它们各自的数据类型，但直到你知道。
3.  文件中的任何给定行都可能使用带引号的字符串 ( `"foo",123,"bar"`) 或不带引号的 ( `foo,123,bar`)。我还没有遇到任何它在给定行（即`"foo",123,bar`）中混合的地方，但它可能在那里。
4.  字符串可能包括内部换行符、引号和/或逗号字符。
5.  字符串可能包含逗号分隔的数字。
6.  数据文件可能非常大（数百万行），因此仍需要相当快。

我正在使用 Ruby FasterCSV（在 1.9 中称为 CSV），但问题应该与语言无关。

我的猜测是，解决方案将需要使用明确的记录分隔符/引号字符（例如 ASCII RS、STX）进行预处理替换。我在[这里](https://github.com/JEG2/faster_csv/issues/16#issuecomment-6940019)开始了一点，但它不适用于我得到的所有东西。

如何稳健地处理这种脏数据？

ETA：这是单个文件中可能包含的内容的简化示例：

```
"this","is",123,"a","normal","line"
"line","with "an" internal","quote"
"短线","与
一个
“内部报价”，1个逗号和
换行符"
un "quot" ed,text,with,1,2,3,numbers
"引用","编号","系列","1,2,3"
“无效的 \xAB utf-8”

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T19:50:20.803

在将 CSV 文件传递​​给 Ruby 的 CSV 解析器之前，可以对 Ruby 的 File 进行子类化以处理它的每一行。例如，这是我使用此技巧将非标准反斜杠转义引号 \" 替换为标准双引号 "" 的方法

```
class MyFile < File
  def gets(*args)
    line = super
    if line != nil
      line.gsub!('\\"','""')  # fix the \" that would otherwise cause a parse error
    end
    line
  end
end

infile = MyFile.open(filename)
incsv = CSV.new(infile)

while row = incsv.shift
  # process each row here
end 
```

原则上，您可以进行各种附加处理，例如 UTF-8 清理。这种方法的好处是您可以逐行处理文件，因此您无需将其全部加载到内存中或创建中间文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T06:13:51.183

首先，这是一个相当幼稚的尝试：[http ://rubular.com/r/gvh3BJaNTc](http://rubular.com/r/gvh3BJaNTc)

```
/"(.*?)"(?=[\r\n,]|$)|([^,"\s].*?)(?=[\r\n,]|$)/m 
```

这里的假设是：

*   字段可能以引号开头。在这种情况下，它应该以以下任一引号结尾：
    *   逗号前
    *   在新行之前（如果它是该行的最后一个字段）
    *   在文件末尾之前（如果它是最后一行的最后一个字段）
*   或者，它的第一个字符不是引号，因此它包含字符，直到满足与之前相同的条件。

这*几乎*可以满足您的要求，但在以下领域失败：

```
1个逗号和
换行符"

```

正如[TC 在评论中指出的那样](https://stackoverflow.com/questions/11733076/how-do-i-robustly-parse-malformed-csv#comment15600775_11733076)，您的文字模棱两可。我相信你已经知道了，但为了完整起见：

*   `"a"`- 那是`a`还是`"a"`？您如何表示**要**包含在引号中的值？
*   `"1","2"`- 可能被解析为`1`,`2`或`1","2`- 两者都是合法的。
*   `,1 \n 2,`- 行尾，还是值中的换行符？您无法判断，特别是这是否应该是其行的最后一个值。
*   `1 \n 2 \n 3`- 一个带有换行符的值？两个值（`1\n2`,`3`或`1`, `2\n3`）？三个价值观？

如果您检查每一行的第一个值，您可能会得到一些线索，正如您所说，它应该告诉您列数及其类型 - 这可以为您提供解析文件时缺少的附加信息（例如，如果您**知道**该行中应该有另一个字段，那么所有换行符都属于当前值）。即便如此，看起来这里也有严重的问题......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-24T07:34:13.757

我制作了一个应用程序来重新格式化 CSV 文件，将字段内的单引号加倍，并将其中的新行替换为类似“\n”的字符串。

一旦数据进入数据库，我们就可以将 '\n' 替换回新行。

我需要这样做，因为我必须处理 CSV 的应用程序无法正确处理新行。

随意使用和更改。

在蟒蛇中：

```
import sys

def ProcessCSV(filename):
    file1 = open(filename, 'r')
    filename2 = filename + '.out'
    file2 = open(filename2, 'w')
    print 'Reformatting {0} to {1}...', filename, filename2
    line1 = file1.readline()
    while (len(line1) > 0):
        line1 = line1.rstrip('\r\n')
        line2 = ''
        count = 0
        lastField = ( len(line1) == 0 )
        while not lastField:
            lastField = (line1.find('","') == -1)
            res = line1.partition('","')
            field = res[0]
            line1 = res[2]
            count = count + 1
            hasStart = False
            hasEnd = False

            if  ( count == 1 )  and  ( field[:1] == '"' ) :
                field = field[1:]
                hasStart = True
            elif count > 1:
                hasStart = True

            while (True):
                if  ( lastField == True )  and  ( field[-1:] == '"' ) :
                    field = field[:-1]
                    hasEnd = True
                elif not lastField:
                    hasEnd = True

                if lastField and not hasEnd:
                    line1 = file1.readline()
                    if (len(line1) == 0): break
                    line1 = line1.rstrip('\r\n')
                    lastField = (line1.find('","') == -1)
                    res = line1.partition('","')
                    field = field + '\\n' + res[0]
                    line1 = res[2]
                else:
                    break

            field = field.replace('"', '""')

            line2 = line2 + iif(count > 1, ',', '') + iif(hasStart, '"', '') + field + iif(hasEnd, '"', '')

        if len(line2) > 0:
            file2.write(line2)
            file2.write('\n')

        line1 = file1.readline()

    file1.close()
    file2.close()
    print 'Done'

def iif(st, v1, v2):
    if st:
        return v1
    else:
        return v2

filename = sys.argv[1]
if len(filename) == 0:
    print 'You must specify the input file'
else:
    ProcessCSV(filename) 
```

在 VB.net 中：

```
Module Module1

Sub Main()
    Dim FileName As String
    FileName = Command()
    If FileName.Length = 0 Then
        Console.WriteLine("You must specify the input file")
    Else
        ProcessCSV(FileName)
    End If
End Sub

Sub ProcessCSV(ByVal FileName As String)
    Dim File1 As Integer, File2 As Integer
    Dim Line1 As String, Line2 As String
    Dim Field As String, Count As Long
    Dim HasStart As Boolean, HasEnd As Boolean
    Dim FileName2 As String, LastField As Boolean
    On Error GoTo locError

    File1 = FreeFile()
    FileOpen(File1, FileName, OpenMode.Input, OpenAccess.Read)

    FileName2 = FileName & ".out"
    File2 = FreeFile()
    FileOpen(File2, FileName2, OpenMode.Output)

    Console.WriteLine("Reformatting {0} to {1}...", FileName, FileName2)

    Do Until EOF(File1)
        Line1 = LineInput(File1)
        '
        Line2 = ""
        Count = 0
        LastField = (Len(Line1) = 0)
        Do Until LastField
            LastField = (InStr(Line1, """,""") = 0)
            Field = Strip(Line1, """,""")
            Count = Count + 1
            HasStart = False
            HasEnd = False
            '
            If (Count = 1) And (Left$(Field, 1) = """") Then
                Field = Mid$(Field, 2)
                HasStart = True
            ElseIf Count > 1 Then
                HasStart = True
            End If
            '
locFinal:
            If (LastField) And (Right$(Field, 1) = """") Then
                Field = Left$(Field, Len(Field) - 1)
                HasEnd = True
            ElseIf Not LastField Then
                HasEnd = True
            End If
            '
            If LastField And Not HasEnd And Not EOF(File1) Then
                Line1 = LineInput(File1)
                LastField = (InStr(Line1, """,""") = 0)
                Field = Field & "\n" & Strip(Line1, """,""")
                GoTo locFinal
            End If
            '
            Field = Replace(Field, """", """""")
            '
            Line2 = Line2 & IIf(Count > 1, ",", "") & IIf(HasStart, """", "") & Field & IIf(HasEnd, """", "")
        Loop
        '
        If Len(Line2) > 0 Then
            PrintLine(File2, Line2)
        End If
    Loop

    FileClose(File1, File2)
    Console.WriteLine("Done")

    Exit Sub
locError:
    Console.WriteLine("Error: " & Err.Description)
End Sub

Function Strip(ByRef Text As String, ByRef Separator As String) As String
    Dim nPos As Long
    nPos = InStr(Text, Separator)
    If nPos > 0 Then
        Strip = Left$(Text, nPos - 1)
        Text = Mid$(Text, nPos + Len(Separator))
    Else
        Strip = Text
        Text = ""
    End If
End Function

End Module 
```

# c# - 如何将数据表动态绑定到网格并将数据包装在某些列中？

> ID：11733078
> 
> 赞同：1
> 
> 时间：2012-07-31T04:25:11.300
> 
> 标签：c#, wpf, linq, datagrid

我已经搜索了一段时间，并且有很多关于这个主题的帖子，但似乎没有一个能给我正确的答案。

我在表单上创建了一个数据网格，如下所示：

```
 <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch" VerticalAlignment="Top" Width="860">
      <DataGrid ScrollViewer.VerticalScrollBarVisibility="Auto" 
       ScrollViewer.HorizontalScrollBarVisibility="Auto" 
       HorizontalAlignment="Stretch" 
       VerticalAlignment="Top" 
       Name="DGI" 
       Height="700" 
       ItemsSource="{Binding}"
       Background="LightGray" RowBackground="LightYellow" AlternatingRowBackground="LightBlue"> 
      </DataGrid>
 </StackPanel> 
```

现在我在我的代码中绑定数据如下：

```
private void btnUpdateGridI_Click(object sender, RoutedEventArgs e)
    {
        DGI.DataContext = null;
        IEnumerable<DataRow> query =
            from punch in dspl.Tables[0].AsEnumerable()
            where punch.Field<String>("TOS").Contains(cmbTOSI.SelectedItem.ToString()) &&
                punch.Field<String>("BU").Contains(cmbBUI.SelectedItem.ToString()) &&
                punch.Field<String>("CLOSED").Contains(cmbClosedI.SelectedItem.ToString()) &&
                punch.Field<String>("CAT").Contains(cmbCATI.SelectedItem.ToString()) 
            select punch;
        try
        {
            DataTable boundTable = query.CopyToDataTable<DataRow>();
            DGI.DataContext = boundTable;
            lbltotalitemsI.Content = boundTable.Rows.Count.ToString() + " ITEMS";
            DGI.Columns[6].MaxWidth = 350;
        }
        catch
        {
            MessageBox.Show("No data exists for the current selection.");
            lbltotalitemsI.Content = "0 ITEMS";
            DGI.DataContext = null;
        }
    } 
```

我正在尝试使第 6 列中的文本换行。我能够定义它的最大宽度，但是为了包装文本，大多数在线资源是指在数据网格中使用 TextBlock。

有没有一种简单的方法可以动态地做到这一点？我想为多个列执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:42:54.637

嗨，不，我们不能直接设置 TextWrap，这就是提供模板的原因（模板负责外观而不影响控件的行为）。上述问题的一个简短示例是

```
 <DataGrid ItemsSource="{Binding}" AutoGenerateColumns="True">//Set your all properties as you want
    <DataGrid.Columns>
        <DataGridTextColumn Header="TOS" Binding="{Binding TOS}"></DataGridTextColumn>
        <DataGridTextColumn Header="BU" Binding="{Binding BU}"></DataGridTextColumn>
        <DataGridTextColumn Header="CLOSED" Binding="{Binding CLOSED}"></DataGridTextColumn>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <!--This is how we can set Text Wrap-->
                    <TextBox Text="{Binding CAT}" TextWrapping="Wrap"/> 
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

第 4 列是 TextWrap。我希望这将有所帮助。

# javascript - Javascript；使用 math.random 函数随机执行操作？

> ID：11733085
> 
> 赞同：-1
> 
> 时间：2012-07-31T04:25:51.113
> 
> 标签：javascript

好吧，我的问题是：使用 math.random 函数随机执行另一个函数，例如，当 math.random 函数选择除 2 之外的任何数字时，什么都不会发生。当 math.random 函数选择 2 时，下一个函数将执行。让它随机。请，如果您有任何想法，请帮助我。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:28:20.817

如果从to范围内随机选择`doNextFunction()`数字，则以下代码段将调用该函数。`2``1``MAX`

```
var MAX = 10;
var rand = Math.floor((Math.random() * MAX) + 1);
if (rand == 2) {
    doNextFunction();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:01:14.100

此代码调用数组中的随机函数`arrayOfFunctions`。这个数组应该只有数字索引才能工作。只需调用`randomFunction()`，这将调用函数`arrayOfFunctions[random]()`

我想不出这个 sh*t 的任何实际应用，但这里是代码！:-)

```
var arrayOfFunctions = Array(alert,(function(){}),Array);

function randomFunction(/*0-n args*/){
  arrayOfFunctions[Math.round(Math.random()*arrayOfFunctions.length-1)]();
} 
```

# java - Eclipse：尝试创建新项目时出现错误“.. 与另一个项目的位置重叠..”

> ID：11733089
> 
> 赞同：112
> 
> 时间：2012-07-31T04:26:14.230
> 
> 标签：java, eclipse, workspace

创建新项目时，我在 Eclipse 中不断收到错误消息。

我在级别创建了一个工作区

> C:\Users\Martin\Java\Counter

Counter 内部没有文件，但有一个名为 counter_src 的目录，其中包含项目 Counter 的源文件

所以在 Eclipse 中我做，New Java Project，然后取消选中默认位置并选择目录

counter_src（比 Counter 低一级）

但它现在显示

> C:\Users\Martin\Java\Counter\counter_src 与另一个项目的位置重叠：'counter_src'

现在，如果我在

> C:\用户\马丁\Java\

这意味着我的 counter_src 实际上是 2 级然后它允许我，但问题是目录 Java 包含很多项目所以我想在 Counter （没有文件）中创建工作区，它有 counter_src 的子目录，其中我的源文件是。

还测试了在 C:\Users\Martin\Java\ 中创建目录，它似乎也可以工作，但我不想在“C:\Users\Martin\Java\”中创建另一个子目录，只是为了存储我的工作区用于 1 个项目.

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-02-24T18:05:25.257

所以，我遇到了同样的问题，但试图通过“导入...”菜单**导入 Android 代码。**当上述两种解决方案均不适用于 Eclipse Juno 时：

*   Eclipse -> File -> Import -> General -> Existing Project Into Workspace（注意：**NOT 'EXISTING ANDROID PROJECT'**）

*   （项目应该正确导入，但应该有错误。我们现在必须将 SDK 附加到项目中）

*   右键项目，Properties->Android-> **Project Build Target** 选择合适的构建目标（有疑问，项目中用4.0.3比较新，项目比较老用2.2）

*   点击确定

一旦项目重建，一切都应该恢复正常。

（这是在 Eclipse Indigo 流行时编写的，随着 Google 更新他们的工具以涵盖极端情况，可能会发生变化。）

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2012-07-31T04:59:54.257

Eclipse 出错是因为如果您尝试在存在的目录上创建项目，Eclipse 不知道它是否是实际项目 - 所以它会出错，从而避免您丢失工作！

所以你有两个解决方案：

1.  将文件夹移动`counter_src`到其他位置，然后创建项目（这将创建目录），然后将源文件重新导入到新创建的`counter_src`.

2.  右键单击项目资源管理器并导入现有项目，选择`C:\Users\Martin\Java\Counter\`作为您的根目录。如果 Eclipse 看到一个项目，您将能够导入它。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-07-31T04:30:46.387

您已将项目放在工作区中，然后尝试导入它，这就是问题所在。

这有两个解决方案：

**1.**将您的项目文件夹放在工作区之外的其他位置，然后尝试。

**2.**前往`File ---> new Project ---> Select the existing project radio button ---> browse to the project folder in your workspace ---> finish`

## 已编辑

假设 D:\MyDirectory\MyWorkSpace - 您的 WorkSpace 的路径

将您要在 Eclipse 中导入的项目放在 MyDirectory 文件夹中，而不是在 MyWorkSpace 中，然后尝试。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-09-02T12:24:09.580

在我的情况下检查复选框

> **“将项目复制到工作区”**

成功了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-05T07:26:45.997

只需“剪切”项目文件夹并将其移出工作区目录并执行以下操作

```
file=>import=>(select new directory)=> mark (copy to my workspace) checkbox 
```

你完成了！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-18T06:04:58.810

这也花了我一些时间来弄清楚。

**解决方案：**

要在现有工作区下创建一个新的**Maven 项目**，只需勾选“**使用默认工作区位置”（****忽略灰色位置文本输入中的内容**）。

项目的名称将由您在创建向导的第 2 步中的**Artifact Id确定。**

**推理：**

这很令人困惑，因为在我的情况下，因为当我选择创建一个新的 Maven 项目时：默认工作区位置被勾选并直接继续它是灰色的“位置”文本输入有工作区位置 + 我正在寻找的现有项目在之前选择创建一个新的 Maven 项目。（即：Location = '[工作区路径]/上次查看的项目'）

所以我取消了默认工作空间位置框并输入'[工作空间路径]/新项目'，这不起作用，因为eclipse期望[工作空间路径]与默认路径相比有所不同。（否则我们会选择默认工作区复选框）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-11T23:12:15.477

在我的情况下，单击“将项目导入工作区”的复选框修复了错误，即使该项目已经在工作区文件夹中并且实际上并没有被 Eclipse 移动。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-04T04:19:15.730

FWIW：

其他任何建议都不适合我。我之前创建了一个同名的项目，然后我将其删除。我重新创建了基本源文件（使用 PhoneGap）——它不会创建“eclipse”项目。然后，我尝试使用现有源文件创建一个 Android 项目，但它失败了，并显示与原始问题所暗示的相同的错误消息。

我的解决方案是将源文件夹和文件移出工作区，并使用相同的选项，但这次检查向导中将文件复制到工作区的选项。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-14T15:10:04.823

我知道这是旧的，但想贡献另一个可能的解决方案。

如果您想像我一样保留项目位置，我发现将 .project 文件从另一个项目复制到项目目录中，然后编辑 .project 文件以正确命名，然后选择 Import Existing Projects into Workspace 选项有效为了我。

在 Windows 中，我使用文件监视器来查看 Eclipse 正在做什么，它只是在尝试创建 .project 文件时由于某种未知原因而出错。所以，我手动完成了它，它对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-24T05:02:59.563

**转到实际的 FILE 菜单并创建一个新的常规项目。**

如果无法识别项目类型，从而阻止其中一种导入方法起作用，请尝试此操作。添加通用项目后，您可以添加对所需语言的支持。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-20T14:11:44.213

尝试在新克隆的 Git 存储库文件夹中创建新的 Eclipse 项目时出现此错误。

这对我有用：

1）克隆 Git 存储库（在我的情况下，它是 Eclipse 默认工作区的子文件夹）

2）在默认工作区（克隆的Git repo文件夹上一层）创建新的Eclipse项目

3) 将新的 Eclipse 项目从默认工作区导出到克隆的 repo 目录：

```
a) right click on project --> Export --> General --> File System
b) select the new Eclipse project
c) set the destination directory to export to (as the Git repo folder) 
```

4）从工作区中删除Eclipse项目（因为它仍然是使用默认工作区的项目）

```
right click on project and select "Delete" 
```

5) 从 Git repo 目录中打开导出的 Eclipse 项目

```
a) File --> Open Project from File System or Archive
b) set the "Import source" folder as the Git repo folder
c) check the project to import (that you just exported there) 
```

# mysql - 计算百分比的高效 MySQL 查询

> ID：11733091
> 
> 赞同：0
> 
> 时间：2012-07-31T04:26:20.403
> 
> 标签：mysql

我是 MySQL 的新手，来自 Oracle 背景。我有一个 SQL 查询，用于计算表中类型的总数和百分比。

例如：

```
SELECT type,count(*) count_by_type ,a.tot total, (COUNT(*)*100/a.total) percent 
FROM xyz
JOIN (select count(*) tot from xyz)a
GROUP by type
HAVING type = 'abc'; 
```

此查询正在执行自联接。有没有更简单的方法来实现同样的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:30:28.143

这里不需要使用`SELF JOIN`和`HAVING`子句。试试看：

```
SELECT COUNT(1) INTO @var_total FROM xyz;

SELECT type, count(1) AS count_by_type,
        @var_total total,
        (COUNT(1)*100/@var_total) AS percent
FROM xyz a
WHERE type = 'abc';
GROUP by type; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:33:26.667

```
SELECT type,count(1) count_by_type ,(select count(1) from xyz) total,
(count_by_type*100/total) percent  FROM xyz WHERE type = 'abc'; 
```

# ios - 对于此任务，是否有比 stringByReplacingOccurrencesOfString 更好的方法？

> ID：11733095
> 
> 赞同：0
> 
> 时间：2012-07-31T04:27:08.130
> 
> 标签：ios

我在用：

```
cleanedDataCellR2C2 =  [cleanedDataCellR2C2 stringByReplacingOccurrencesOfString:@"," withString:@""]; 
```

和一大堆类似的语句从文本字段中删除所有键盘字符，除了数字...... - （减号），+ （加号），以及 0,1,2,3,4，文本字段中的 5、6、7、8 和 9 个数字。上面的示例只是将 an 中的逗号转换`NSString`为空值。

不想承认，但在一个项目中，我实际上使用了大约 80 条语句——除了上面显示的以外，每个键盘字符都有一条语句。你必须是一些更简单的方法。你对这份工作有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:35:26.597

您可以尝试使用正则表达式，这里有几个示例：

[使用正则表达式查找/替换 NSString 中的子字符串](https://stackoverflow.com/questions/9661690/user-regular-expression-to-find-replace-substring-in-nsstring)

[NSRegularExpression：用 <a> 标签替换 url 文本](https://stackoverflow.com/questions/5903608/nsregularexpression-replace-url-text-with-a-tags)

[替换出现的包含任意数字的字符串](https://stackoverflow.com/questions/8149775/replace-occurences-of-string-that-contains-any-number)

您还可以查看[http://regexkit.sourceforge.net/RegexKitLite/](http://regexkit.sourceforge.net/RegexKitLite/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:57:35.447

最好的解决方案是，如果可以的话，首先不要让他们输入非数字数据。你在用`UITextField`吗？如果不是，请忽略其余部分，但如果是这样：

首先，使您的视图控制器是一个`UITextFieldDelegate`，例如：

```
@interface MyViewController : UIViewController <UITextFieldDelegate> 
```

然后，在`viewDidLoad`：

```
self.myTextField.delegate = self; 
```

其次，添加一个`shouldChangeCharacterInRange`只允许所需的字符：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSCharacterSet *nonNumeric = [[NSCharacterSet characterSetWithCharactersInString:@"+-0123456789"] invertedSet];

    if ([string rangeOfCharacterFromSet:nonNumeric].location == NSNotFound)
        return TRUE;
    else
        return FALSE;
} 
```

第三，您可能希望将文本字段的键盘更改为仅用于数字数据，例如`self.myTextField.keyboardType = UIKeyboardTypeNumbersAndPunctuation`或`UIKeyboardTypeDecimalPad`类似的东西。

# asp.net - MVC4 IEnumerable 模型绑定始终为空

> ID：11733099
> 
> 赞同：3
> 
> 时间：2012-07-31T04:28:03.793
> 
> 标签：asp.net, asp.net-mvc, jquery, asp.net-mvc-4

使用下面的代码，我的 IEnumerablebookedRooms 在到达控制器时总是有空值，它知道我发回了多少个bookedRooms，但是对于每个项目，RoomID 和 NumRooms 的值总是为空有什么想法吗？

我有以下视图模型...

```
public class SelectDatesViewModel

    public int venueID { get; set; }
    public IEnumerable<BookedRoomViewModel> bookedRooms {get;set;}
    public string checkInDateString { get; set; }
    public int pageNo { get; set; }
    public bool showCheckIn { get; set;}
    public string startDateString { get; set; }
}
public class BookedRoomViewModel
{
    public string RoomID { get; set; }
    public string NumRooms { get; set; }
} 
```

我正在使用以下 jquery ajax 调用..

```
function showArrivalCalendar() {
    showThrobber();
    var info = {
        venueID: venueID,
        bookedRooms: getBookedRooms(),
        startDateString: $("#calendarHolder").data("arrivalstartdate"),
        checkInDateString: "",
        pageNo: 1,
        showCheckIn: true
    }
    $.ajax({
        url: "/Booking/BookingCalendar/",
        type: "POST",
        data: JSON.stringify(info),
        dataType: "json",
        success: function (retValue) {
            $("#calendarHolder").html(data);
            hideThrobber();
        }
    });
}
function getBookedRooms() {
    var bookedRooms = [];
    $("#selectBookingType").find("select").each(function () {
         if ($(this).find(":selected").val() > 0) {
            var noRooms = $(this).find(":selected").val();
            bookedRooms.push({
                    RoomID: $(this).data("roomid"),
                    NumRooms: noRooms
            });
        };
    });
    return bookedRooms;
} 
```

要发布到此控制器..

```
[HttpPost]
public ActionResult BookingCalendar(SelectDatesViewModel model)
{
    return PartialView(GetBookingDates(model.venueID, model.startDateString, model.showCheckIn, model.pageNo, model.checkInDateString));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:58:50.973

您的`$.ajax`调用选项错误：`dataType`用于指定您期望从服务器返回的数据类型，而不是您发送到服务器的数据类型。

如果要发送 JSON 数据并希望模型绑定器正常工作（您可能还需要数据） ，则需要将`contentType`属性（请参阅[JQuery 文档](http://api.jquery.com/jQuery.ajax/)）设置为`"application/json"``JSON.stringify`

所以正确的用法：

```
$.ajax({
    url: "/Booking/BookingCalendar/",
    type: "POST",
    data: JSON.stringify(info),
    contentType: "application/json",
    success: function (retValue) {
        $("#calendarHolder").html(data);
        hideThrobber();
    }
}); 
```

# spring - 使用 ebay 服务在 Spring 中找不到类

> ID：11733105
> 
> 赞同：1
> 
> 时间：2012-07-31T04:28:20.380
> 
> 标签：spring, spring-mvc

我对弹簧框架很陌生，需要一些帮助，我在我的应用程序中使用 ebay 服务从 ebay 获取项目。当我在 tomcat 中运行应用程序时，应用程序崩溃并出现以下异常。

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

```
org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.NoClassDefFoundError: [Ljavax/xml/ws/WebServiceFeature;
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:920)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:809)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

root cause

java.lang.NoClassDefFoundError: [Ljavax/xml/ws/WebServiceFeature;
    java.lang.Class.getDeclaredMethods0(Native Method)
    java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    java.lang.Class.getDeclaredMethods(Class.java:1791)
    com.ebay.common.ClientFactory.getServiceEndpointName(ClientFactory.java:106)
    com.ebay.common.ClientFactory.getServiceClient(ClientFactory.java:85)
    com.ebay.services.client.FindingServiceClientFactory.getServiceClient(FindingServiceClientFactory.java:34)
    com.soft.echelon.eBayService.EBayFindItem.getEBayItemsByKeywords(EBayFindItem.java:89)
    com.soft.echelon.Controllers.SearchController.onSubmit(SearchController.java:248)
    org.springframework.web.servlet.mvc.SimpleFormController.processFormSubmission(SimpleFormController.java:267)
    org.springframework.web.servlet.mvc.AbstractFormController.handleRequestInternal(AbstractFormController.java:265)
    org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:809)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

我应该怎么做才能摆脱这个异常。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:56:08.630

我认为您在类路径中缺少 JAX-WS Commons jar。你可以从这里得到它

[http://download.java.net/maven/2/org/jvnet/jax-ws-commons/spring/jaxws-spring/1.8/](http://download.java.net/maven/2/org/jvnet/jax-ws-commons/spring/jaxws-spring/1.8/)

# python - 检测图像中的光晕

> ID：11733106
> 
> 赞同：2
> 
> 时间：2012-07-31T04:28:28.397
> 
> 标签：python, image-processing, machine-learning, computer-vision

我从来没有做过任何图像处理，我想知道是否有人可以将我推向正确的方向。

这是我的问题：我有一堆城市周围地方的黑白图像。由于相机系统的一些问题，一些图像只包含黑色图像，边缘有白色晕影。这个小插图嘈杂且不均匀（有时它可以在两侧，有时只有一个）。

有什么好方法可以检测这些帧？我只需要能够写一点。

我的图像集很大，所以我需要这是一个自动化的过程，最后它应该使用 Python，因为它需要集成到我现有的代码中。

我在考虑某种机器学习算法，但我不确定除此之外还能做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:06:14.817

如果我理解正确，那么您有*完整*的带有白色边框的黑色图像吗？

在这种情况下，我认为最简单的方法是计算像素强度值的直方图，即整体图像的“暗/亮”程度。我猜垃圾图像比非垃圾图像暗得多。然后，您可以根据直方图过滤图像。为此，您必须选择一个阈值：每个比此阈值暗的图像都被视为垃圾。

如果这种方法是模糊的，你可以很容易地改进它。例如：只计算没有边缘的内部图像的直方图，因为与非垃圾图像相比，这使得直方图更暗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T20:29:32.457

在摄影界，“光晕”被称为渐晕。谷歌搜索“Vignetting Removal Algorithms”会产生大量有用的结果，例如

[晕影和曝光校准和补偿](http://grail.cs.washington.edu/projects/vignette/vign.iccv05.pdf)

# java - 渲染 3D 第三人称视角

> ID：11733112
> 
> 赞同：1
> 
> 时间：2012-07-31T04:29:10.317
> 
> 标签：java, 3d, rendering, ogre, jmonkeyengine

我正在尝试为主角渲染模型，但无论我放入哪个矢量或旋转，他都悬在空中，我看到的只是他的脚，而且它们的方向错误：

![在此处输入图像描述](../Images/e88a85731ecb2b9d1bf08b5ad4b4c04d.png)

当我按下 walk 时，绿色的人移动但向后移动，我无法通过围绕 Y 旋转来修复它：

```
character = new CharacterControl(capsule, 0.01f);
    model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
     model.setLocalScale(0.15f);

     Quaternion yaw90 = new Quaternion();
     Quaternion roll90 = new Quaternion();
     Quaternion pitch90 = new Quaternion();
     yaw90.fromAngles(1, 0, 0);
     roll90.fromAngles(0, 1, 0);
     pitch90.fromAngles(0, 0, 1);
     model.rotate(roll90);

     model.addControl(character);
    character.setPhysicsLocation(new Vector3f(-140, 15, -10));
    rootNode.attachChild(model); 
```

整个场景的完整代码是

```
package adventure;

import java.applet.Applet;
import com.jme3.math.Quaternion;
import com.jme3.math.FastMath;
import java.applet.AudioClip;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Image;
import java.awt.TextArea;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import com.jme3.material.RenderState.FaceCullMode;
import javax.swing.JFrame;
import javax.swing.JPanel;

import com.jme3.animation.AnimChannel;
import com.jme3.animation.AnimControl;
import com.jme3.animation.AnimEventListener;
import com.jme3.animation.LoopMode;
import com.jme3.app.SimpleApplication;
import com.jme3.asset.BlenderKey;
import com.jme3.bullet.BulletAppState;
import com.jme3.bullet.PhysicsSpace;
import com.jme3.bullet.collision.PhysicsCollisionEvent;
import com.jme3.bullet.collision.PhysicsCollisionListener;
import com.jme3.bullet.collision.shapes.CapsuleCollisionShape;
import com.jme3.bullet.collision.shapes.SphereCollisionShape;
import com.jme3.bullet.control.CharacterControl;
import com.jme3.bullet.control.RigidBodyControl;
import com.jme3.bullet.util.CollisionShapeFactory;
import com.jme3.effect.ParticleEmitter;
import com.jme3.effect.ParticleMesh.Type;
import com.jme3.effect.shapes.EmitterSphereShape;
import com.jme3.input.ChaseCamera;
import com.jme3.input.KeyInput;
import com.jme3.input.controls.ActionListener;
import com.jme3.input.controls.KeyTrigger;
import com.jme3.light.DirectionalLight;
import com.jme3.material.Material;
import com.jme3.math.ColorRGBA;
import com.jme3.math.Vector2f;
import com.jme3.math.Vector3f;
import com.jme3.post.FilterPostProcessor;
import com.jme3.post.filters.BloomFilter;
import com.jme3.renderer.Camera;
import com.jme3.renderer.queue.RenderQueue.ShadowMode;
import com.jme3.scene.Geometry;
import com.jme3.scene.Node;
import com.jme3.scene.Spatial;
import com.jme3.scene.shape.Box;
import com.jme3.scene.shape.Sphere;
import com.jme3.scene.shape.Sphere.TextureMode;
import com.jme3.system.AppSettings;
import com.jme3.system.JmeCanvasContext;
import com.jme3.terrain.geomipmap.TerrainLodControl;
import com.jme3.terrain.geomipmap.TerrainQuad;
import com.jme3.terrain.heightmap.AbstractHeightMap;
import com.jme3.terrain.heightmap.ImageBasedHeightMap;
import com.jme3.texture.Texture;
import com.jme3.texture.Texture.WrapMode;
import com.jme3.util.SkyFactory;

public class MountainWorld extends SimpleApplication implements ActionListener,
        PhysicsCollisionListener, AnimEventListener, Playable {
    private static World world;
    private static Person person;
    private static Player dplayer;
    private static TextArea textarea;
    private BulletAppState bulletAppState;
    private AnimChannel channel;
    private AnimControl control;
    // character
    CharacterControl character;
    Node model;
    // temp vectors
    Vector3f walkDirection = new Vector3f();
    // terrain
    TerrainQuad terrain;
    RigidBodyControl terrainPhysicsNode;
    // Materials
    Material matRock;
    Material matBullet;
    // animation
    AnimChannel animationChannel;
    AnimChannel shootingChannel;
    AnimControl animationControl;
    float airTime = 0;
    // camera
    boolean left = false, right = false, up = false, down = false;
    ChaseCamera chaseCam;
    // bullet
    Sphere bullet;
    SphereCollisionShape bulletCollisionShape;
    // explosion
    ParticleEmitter effect;
    // brick wall
    Box brick;
    float bLength = 0.8f;
    float bWidth = 0.4f;
    float bHeight = 0.4f;
    FilterPostProcessor fpp;

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                AppSettings settings = new AppSettings(true);
                settings.setWidth(850);
                settings.setHeight(440);

                MountainWorld canvasApplication = new MountainWorld();
                canvasApplication.setSettings(settings);
                canvasApplication.createCanvas(); // create canvas!
                JmeCanvasContext ctx = (JmeCanvasContext) canvasApplication
                        .getContext();
                ctx.setSystemListener(canvasApplication);
                Dimension dim = new Dimension(640, 480);
                ctx.getCanvas().setPreferredSize(dim);

                JFrame window = new JFrame("Mountain World");
                window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JPanel panel = new JPanel(new BorderLayout()); // a panel
                world = new DungeonWorld(canvasApplication);
                person = new Person(world, "You", null);
                dplayer = new Player(world, person);
                Commands commands = new Commands(person);
                textarea = new TextArea("", 10, 60,
                        TextArea.SCROLLBARS_VERTICAL_ONLY);
                textarea.append("You are in a mountain. The trolls live here.\n");
                textarea.setEditable(false);
                panel.add("West", ctx.getCanvas());
                panel.add("East", commands);
                panel.add("South", textarea);
                window.add(panel);
                window.pack();
                window.setVisible(true);
                canvasApplication.startCanvas();

            }
        });
    }

    @Override
    public void simpleInitApp() {
        bulletAppState = new BulletAppState();
        bulletAppState.setThreadingType(BulletAppState.ThreadingType.PARALLEL);
        stateManager.attach(bulletAppState);
        setupKeys();
        prepareBullet();
        prepareEffect();
        createLight();
        createSky();
        createTerrain();
        createWall();
        createCharacters();

        setupChaseCamera();
        setupAnimationController();
        setupFilter();
    }

    private void setupFilter() {
        FilterPostProcessor fpp = new FilterPostProcessor(assetManager);
        BloomFilter bloom = new BloomFilter(BloomFilter.GlowMode.Objects);
        fpp.addFilter(bloom);
        viewPort.addProcessor(fpp);
    }

    private PhysicsSpace getPhysicsSpace() {
        return bulletAppState.getPhysicsSpace();
    }

    private void setupKeys() {
        inputManager.addMapping("wireframe", new KeyTrigger(KeyInput.KEY_T));
        inputManager.addListener(this, "wireframe");
        inputManager.addMapping("CharLeft", new KeyTrigger(KeyInput.KEY_A));
        inputManager.addMapping("CharRight", new KeyTrigger(KeyInput.KEY_D));
        inputManager.addMapping("CharUp", new KeyTrigger(KeyInput.KEY_W));
        inputManager.addMapping("CharDown", new KeyTrigger(KeyInput.KEY_S));
        inputManager.addMapping("CharSpace",
                new KeyTrigger(KeyInput.KEY_RETURN));
        inputManager
                .addMapping("CharShoot", new KeyTrigger(KeyInput.KEY_SPACE));
        inputManager.addListener(this, "CharLeft");
        inputManager.addListener(this, "CharRight");
        inputManager.addListener(this, "CharUp");
        inputManager.addListener(this, "CharDown");
        inputManager.addListener(this, "CharSpace");
        inputManager.addListener(this, "CharShoot");
    }

    private void createWall() {
        float xOff = -144;
        float zOff = -40;
        float startpt = bLength / 4 - xOff;
        float height = 6.1f;
        brick = new Box(Vector3f.ZERO, bLength, bHeight, bWidth);
        brick.scaleTextureCoordinates(new Vector2f(1f, .5f));
        for (int j = 0; j < 15; j++) {
            for (int i = 0; i < 4; i++) {
                Vector3f vt = new Vector3f(i * bLength * 2 + startpt, bHeight
                        + height, zOff);
                addBrick(vt);
            }
            startpt = -startpt;
            height += 1.01f * bHeight;
        }
    }

    private void addBrick(Vector3f ori) {
        Geometry reBoxg = new Geometry("brick", brick);
        reBoxg.setMaterial(matBullet);
        reBoxg.setLocalTranslation(ori);
        reBoxg.addControl(new RigidBodyControl(1.5f));
        reBoxg.setShadowMode(ShadowMode.CastAndReceive);
        this.rootNode.attachChild(reBoxg);
        this.getPhysicsSpace().add(reBoxg);
    }

    private void prepareBullet() {
        bullet = new Sphere(32, 32, 0.4f, true, false);
        bullet.setTextureMode(TextureMode.Projected);
        bulletCollisionShape = new SphereCollisionShape(0.4f);
        matBullet = new Material(getAssetManager(),
                "Common/MatDefs/Misc/Unshaded.j3md");
        matBullet.setColor("Color", ColorRGBA.Green);
        // matBullet.setColor("m_GlowColor", ColorRGBA.Green);
        getPhysicsSpace().addCollisionListener(this);
    }

    private void prepareEffect() {
        int COUNT_FACTOR = 1;
        float COUNT_FACTOR_F = 1f;
        effect = new ParticleEmitter("Flame", Type.Triangle, 32 * COUNT_FACTOR);
        effect.setSelectRandomImage(true);
        effect.setStartColor(new ColorRGBA(1f, 0.4f, 0.05f,
                (float) (1f / COUNT_FACTOR_F)));
        effect.setEndColor(new ColorRGBA(.4f, .22f, .12f, 0f));
        effect.setStartSize(1.3f);
        effect.setEndSize(2f);
        effect.setShape(new EmitterSphereShape(Vector3f.ZERO, 1f));
        effect.setParticlesPerSec(0);
        effect.setGravity(0, -5, 0);
        effect.setLowLife(.4f);
        effect.setHighLife(.5f);
        effect.setInitialVelocity(new Vector3f(0, 7, 0));
        effect.setVelocityVariation(1f);
        effect.setImagesX(2);
        effect.setImagesY(2);
        Material mat = new Material(assetManager,
                "Common/MatDefs/Misc/Particle.j3md");
        mat.setTexture("Texture",
                assetManager.loadTexture("Effects/Explosion/flame.png"));
        effect.setMaterial(mat);
        // effect.setLocalScale(100);
        rootNode.attachChild(effect);
    }

    private void createLight() {
        Vector3f direction = new Vector3f(-0.1f, -0.7f, -1).normalizeLocal();
        DirectionalLight dl = new DirectionalLight();
        dl.setDirection(direction);
        dl.setColor(new ColorRGBA(1f, 1f, 1f, 1.0f));
        rootNode.addLight(dl);
    }

    private void createSky() {
        rootNode.attachChild(SkyFactory.createSky(assetManager,
                "Textures/Sky/Bright/BrightSky.dds", false));
    }

    private void createTerrain() {
        matRock = new Material(assetManager,
                "Common/MatDefs/Terrain/TerrainLighting.j3md");
        matRock.setBoolean("useTriPlanarMapping", false);
        matRock.setBoolean("WardIso", true);
        matRock.setTexture("AlphaMap",
                assetManager.loadTexture("Textures/Terrain/splat/alphamap.png"));
        Texture heightMapImage = assetManager
                .loadTexture("Textures/Terrain/splat/mountains512.png");
        Texture grass = assetManager
                .loadTexture("Textures/Terrain/splat/grass.jpg");
        grass.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap", grass);
        matRock.setFloat("DiffuseMap_0_scale", 64);
        Texture dirt = assetManager
                .loadTexture("Textures/Terrain/splat/dirt.jpg");
        dirt.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_1", dirt);
        matRock.setFloat("DiffuseMap_1_scale", 16);
        Texture rock = assetManager
                .loadTexture("Textures/Terrain/splat/road.jpg");
        rock.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_2", rock);
        matRock.setFloat("DiffuseMap_2_scale", 128);
        Texture normalMap0 = assetManager
                .loadTexture("Textures/Terrain/splat/grass_normal.jpg");
        normalMap0.setWrap(WrapMode.Repeat);
        Texture normalMap1 = assetManager
                .loadTexture("Textures/Terrain/splat/dirt_normal.png");
        normalMap1.setWrap(WrapMode.Repeat);
        Texture normalMap2 = assetManager
                .loadTexture("Textures/Terrain/splat/road_normal.png");
        normalMap2.setWrap(WrapMode.Repeat);
        matRock.setTexture("NormalMap", normalMap0);
        matRock.setTexture("NormalMap_1", normalMap2);
        matRock.setTexture("NormalMap_2", normalMap2);

        AbstractHeightMap heightmap = null;
        try {
            heightmap = new ImageBasedHeightMap(heightMapImage.getImage(),
                    0.25f);
            heightmap.load();

        } catch (Exception e) {
            e.printStackTrace();
        }

        terrain = new TerrainQuad("terrain", 65, 513, heightmap.getHeightMap());
        List<Camera> cameras = new ArrayList<Camera>();
        cameras.add(getCamera());
        TerrainLodControl control = new TerrainLodControl(terrain, cameras);
        terrain.addControl(control);
        terrain.setMaterial(matRock);
        terrain.setLocalScale(new Vector3f(2, 2, 2));

        terrainPhysicsNode = new RigidBodyControl(
                CollisionShapeFactory.createMeshShape(terrain), 0);
        terrain.addControl(terrainPhysicsNode);
        rootNode.attachChild(terrain);
        getPhysicsSpace().add(terrainPhysicsNode);
    }

    private void createCharacters() {
        CapsuleCollisionShape capsule = new CapsuleCollisionShape(3f, 4f);
        character = new CharacterControl(capsule, 0.01f);
        model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
         model.setLocalScale(0.15f);

         Quaternion yaw90 = new Quaternion();
         Quaternion roll90 = new Quaternion();
         Quaternion pitch90 = new Quaternion();
         yaw90.fromAngles(1, 0, 0);
         roll90.fromAngles(0, 1, 0);
         pitch90.fromAngles(0, 0, 1);
         model.rotate(roll90);

         model.addControl(character);
        character.setPhysicsLocation(new Vector3f(-140, 15, -10));
        rootNode.attachChild(model);
        getPhysicsSpace().add(character);

        BlenderKey blenderKey = new BlenderKey(
                "objects/creatures/alien/alien.mesh.xml");

        Node alien = (Node) assetManager.loadModel(blenderKey);
        alien.setLocalTranslation(new Vector3f(-145, 15, -10));
        //Geometry geom=(Geometry)alien.getChild("myGeometry");
        //geom.getMaterial().getAdditionalRenderState().setFaceCullMode(FaceCullMode.Off);

        rootNode.attachChild(alien);

        BlenderKey blenderKey2 = new BlenderKey(
                "objects/creatures/spaceman/man.mesh.xml");

        Spatial man = (Spatial) assetManager.loadModel(blenderKey2);
        man.setLocalTranslation(new Vector3f(-140, 15, -10));

        rootNode.attachChild(man);

    }

    private void setupChaseCamera() {
        flyCam.setEnabled(false);
        chaseCam = new ChaseCamera(cam, model, inputManager);
    }

    private void setupAnimationController() {
        animationControl = model.getControl(AnimControl.class);
        animationControl.addListener(this);
        animationChannel = animationControl.createChannel();
        //shootingChannel = animationControl.createChannel();
        //shootingChannel.addBone(animationControl.getSkeleton().getBone(
            //  "uparm.right"));
        //shootingChannel.addBone(animationControl.getSkeleton().getBone(
            //  "arm.right"));
        //shootingChannel.addBone(animationControl.getSkeleton().getBone(
            //  "hand.right"));
    }

    @Override
    public void simpleUpdate(float tpf) {
        Vector3f camDir = cam.getDirection().clone().multLocal(0.1f);
        Vector3f camLeft = cam.getLeft().clone().multLocal(0.1f);
        camDir.y = 0;
        camLeft.y = 0;
        walkDirection.set(0, 0, 0);
        if (left) {
            walkDirection.addLocal(camLeft);
        }
        if (right) {
            walkDirection.addLocal(camLeft.negate());
        }
        if (up) {
            walkDirection.addLocal(camDir);
        }
        if (down) {
            walkDirection.addLocal(camDir.negate());
        }
        if (!character.onGround()) {
            airTime = airTime + tpf;
        } else {
            airTime = 0;
        }
        if (walkDirection.length() == 0) {
            if (!"Idle1".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Idle1", 1f);
            }
        } else {
            character.setViewDirection(walkDirection);
            if (airTime > .3f) {
                if (!"stand".equals(animationChannel.getAnimationName())) {
                    animationChannel.setAnim("stand");
                }
            } else if (!"Walk".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Walk", 0.7f);
            }
        }
        character.setWalkDirection(walkDirection);
    }

    public void onAction(String binding, boolean value, float tpf) {
        if (binding.equals("CharLeft")) {
            if (value) {
                left = true;
            } else {
                left = false;
            }
        } else if (binding.equals("CharRight")) {
            if (value) {
                right = true;
            } else {
                right = false;
            }
        } else if (binding.equals("CharUp")) {
            if (value) {
                up = true;
            } else {
                up = false;
            }
        } else if (binding.equals("CharDown")) {
            if (value) {
                down = true;
            } else {
                down = false;
            }
        } else if (binding.equals("CharSpace")) {
            character.jump();
        } else if (binding.equals("CharShoot") && !value) {
            bulletControl();
        }
    }

    private void bulletControl() {
        shootingChannel.setAnim("Dodge", 0.1f);
        shootingChannel.setLoopMode(LoopMode.DontLoop);
        Geometry bulletg = new Geometry("bullet", bullet);
        bulletg.setMaterial(matBullet);
        bulletg.setShadowMode(ShadowMode.CastAndReceive);
        bulletg.setLocalTranslation(character.getPhysicsLocation().add(
                cam.getDirection().mult(5)));
        RigidBodyControl bulletControl = new BombControl(bulletCollisionShape,
                1);
        bulletControl.setCcdMotionThreshold(0.1f);
        bulletControl.setLinearVelocity(cam.getDirection().mult(80));
        bulletg.addControl(bulletControl);
        rootNode.attachChild(bulletg);
        getPhysicsSpace().add(bulletControl);
    }

    public void collision(PhysicsCollisionEvent event) {
        if (event.getObjectA() instanceof BombControl) {
            final Spatial node = event.getNodeA();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        } else if (event.getObjectB() instanceof BombControl) {
            final Spatial node = event.getNodeB();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        }
    }

    public void onAnimCycleDone(AnimControl control, AnimChannel channel,
            String animName) {
        if (channel == shootingChannel) {
            channel.setAnim("stand");
        }
    }

    public void onAnimChange(AnimControl control, AnimChannel channel,
            String animName) {
    }

    // Load an image from the net, making sure it has already been
    // loaded when the method returns
    public Image loadPicture(String imageName) {
        return null;
    }

    // Load and play a sound from /usr/local/hacks/sounds/

    public void playSound(String name) {
        URL u = null;

        try {
            u = new URL("file:" + "/usr/local/hacks/sounds/" + name + ".au");
        } catch (MalformedURLException e) {
        }

        AudioClip a = Applet.newAudioClip(u);
        a.play();
    }
} 
```

我想知道如何使我的绿色忍者背部自然朝向相机，玩家能够控制忍者并行走忍者，现在可以工作但位置错误（在空中），我似乎无法调整位置。

有什么建议么？

## 更新

下面的代码出现了提高绿人的位置：

```
private void createCharacters() {
    CapsuleCollisionShape capsule = new CapsuleCollisionShape(3f, 4f);
    character = new CharacterControl(capsule, 0.01f);
    model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
    model.setLocalScale(0.15f);

    model.addControl(character);
    character.setPhysicsLocation(new Vector3f(-140, 20, -9));
    character.setViewDirection(new Vector3f(1, 1, 1));
    rootNode.attachChild(model);
    getPhysicsSpace().add(character);

    BlenderKey blenderKey = new BlenderKey(
            "objects/creatures/alien/alien.mesh.xml");

    Node alien = (Node) assetManager.loadModel(blenderKey);
    alien.setLocalTranslation(new Vector3f(-145, 15, -10));     
    rootNode.attachChild(alien);

    BlenderKey blenderKey2 = new BlenderKey(
            "objects/creatures/spaceman/man.mesh.xml");

    Spatial man = (Spatial) assetManager.loadModel(blenderKey2);
    man.setLocalTranslation(new Vector3f(-140, 15, -10));

    rootNode.attachChild(man);

} 
```

但是走路的效果仍然与它应该做的相反。但我很高兴我至少可以改进场景，让主角正确旋转。我会尽快更新另一个截图和更多细节

请回答或评论任何改进建议。

## 更新

我可以旋转绿色的人，但也会协调搅拌机中的模型：

```
private void createCharacters() {
    CapsuleCollisionShape capsule = new CapsuleCollisionShape(3f, 4f);
    character = new CharacterControl(capsule, 0.01f);
    model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
    model.setLocalScale(0.15f);

    model.addControl(character);
    character.setPhysicsLocation(new Vector3f(-140, 20, -9));
    character.setViewDirection(new Vector3f(1, 1, 1));
    rootNode.attachChild(model);
    getPhysicsSpace().add(character);

    BlenderKey blenderKey = new BlenderKey(
            "objects/creatures/alien/alien.mesh.xml");

    Node alien = (Node) assetManager.loadModel(blenderKey);
    alien.setLocalTranslation(new Vector3f(-145, 15, -10));

    rootNode.attachChild(alien);

    BlenderKey blenderKey2 = new BlenderKey(
            "objects/creatures/spaceman/man.mesh.xml");

    Spatial man = (Spatial) assetManager.loadModel(blenderKey2);
    man.setLocalTranslation(new Vector3f(-140, 15, -10));

    rootNode.attachChild(man);

} 
```

![在此处输入图像描述](../Images/f9d1726863f1e5d99da3dc3358a4b6be.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:33:47.537

当你“走路”时，绿色人实际上是在倒退吗，因为他的行走动画甚至是倒退的？无论如何，也许将相机移到那个家伙身后会更好？奇怪的是你不能在 Y 轴上旋转这个家伙。我会先尝试使其正常工作，否则，如果您的基本轴旋转不起作用，谁知道会出现什么问题。

# html - PDF 报告引擎还是 HTML5？

> ID：11733115
> 
> 赞同：0
> 
> 时间：2012-07-31T04:29:52.080
> 
> 标签：html, pdf

我想制作一个基于 Web 的应用程序，可以从我们的数据库中导出一些统计数据/报告。

选择 HTML5/CSS 好东西（例如 Google 图表工具）而不是 PDF 报告引擎（例如 FastReport）的优缺点是什么？

例如：

HTML5/CSS：不需要额外的服务器/引擎（一般加载）来管理表单模板和数据。最终用户浏览器也无需加载 PDF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-09T22:37:19.133

PhantomJS 是一个很好的选择——我用它从 HTML5/CSS 生成 PDF 报告，当然是服务器端。当然，您的最终用户必须下载 PDF，但您可以在 iframe 和下方的“下载为 pdf”按钮上显示 HTML。所有现代桌面浏览器都支持 PDF 查看，无需任何外部膨胀软件（例如 adobe reader 等） [http://phantomjs.org/](http://phantomjs.org/)

更多信息：[https ://aboullaite.me/phantomjs-generate-pixel-perfect-pdf-reports/](https://aboullaite.me/phantomjs-generate-pixel-perfect-pdf-reports/)

# javascript - 在 javascript 中使用 View 中的 bool 值

> ID：11733120
> 
> 赞同：2
> 
> 时间：2012-07-31T04:30:30.800
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我在模型中有一个 bool 属性：

```
public bool IsExistSchedule {get; set;} 
```

在视图中，我写了以下内容：

```
<div id="step1" data-schedule="@Model.IsExistSchedule">
...
</div> 
```

在生成的页面`data-schedule`中包含`True`值。
如何在 javascript 中正确使用这个值？
例如，我想检查变量是否为真：

```
var isExist = $('#step1').attr('data-schedule');
if( isExist === "True")
     do something 
```

我不喜欢这部分`isExist === "True"`。我应该将它转换为 bool may be 或其他东西。恐怕在其他浏览器中，该变量可能包含其他值：`true, True, "True", "true"`.
谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T05:06:18.597

通常，如果您需要任何 javascript 模型，最好在您的视图中执行此操作：

```
@Json.Encode(Model.IsExistSchedule) 
```

这会将值“转换”为 javascript 可以理解的内容，例如小写布尔值。

然后，就像@Musa 建议的那样，使用 .data() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:33:57.133

该[`.data()`](http://api.jquery.com/data/)方法会将其转换为布尔值，它与[html5数据属性兼容](http://api.jquery.com/data/#data-html5)

```
var isExist = $('#step1').data('schedule');
if (isExist)
    do something 
```

注意`"True"`不会转换为，`boolean(true)`所以它必须是`"true"`

# html - 一些 CSS 属性不起作用

> ID：11733126
> 
> 赞同：4
> 
> 时间：2012-07-31T04:31:06.817
> 
> 标签：html, css

我想在这个（stackoverflow）页面上放置 noscript 标签：

```
<noscript>Your browser has JavaScript turned off !</noscript> 
```

但是，注释属性不起作用：

```
noscript{
    width:100%; // I want it to be 100% of parent container width - it's not.
    text-align:center;
    background-color:crimson;
    color:white;
    font-weight:bold;
    margin-top:10px; // doesn't work
    padding-top:7px;
    margin-bottom:10px; // doesn't work
    padding-bottom:7px;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T04:33:11.357

noscript 不是块元素。将 DIV 或任何其他块元素放入您的 noscript 元素中，然后尝试对其进行样式设置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T04:36:18.867

添加`display:block`你的 CSS 使其成为块元素，`<noscript>`而不是块元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T05:10:38.800

只有当脚本不受支持或在用户浏览器中被禁用时，元素内的`<noscript>`内容才会显示。而且它不是块元素。

添加`display:block`到您的 CSS。

# javascript - 如何使用 javascript 将 Excel 工作簿保存到当前用户桌面？

> ID：11733128
> 
> 赞同：2
> 
> 时间：2012-07-31T04:31:26.140
> 
> 标签：javascript, excel, activex

我通过以下方式从网页创建工作簿：

```
var thisTable = document.getElementById("mytable3").innerHTML;
       window.clipboardData.setData("Text", thisTable);
       var objExcel = new ActiveXObject ("Excel.Application");
       objExcel.visible = true;
       var objWorkbook = objExcel.Workbooks.Add();
       var objWorksheet = objWorkbook.Worksheets(1);
       objWorkbook.Worksheets(1).Activate;
       objWorksheet.name = "test";
       objWorksheet.Paste;
       objWorksheet.columns.autofit;
       window.clipboardData.setData("Text","");
       objWorkbook.Worksheets(1).SaveAs("%USERPROFILE%\\Desktop\\xxx.xls"); 
```

但是对于`objWorkbook.Worksheets(1).SaveAs("%USERPROFILE%\\Desktop\\xxx.xls");`- 它不会保存到桌面并给出此错误：

```
SCRIPT1004: Microsoft Excel cannot access the file 'C:\Users\user\Documents\%USERPROFILE%\Desktop\B612F000'. There are several possible reasons:
• The file name or path does not exist.
• The file is being used by another program.
• The workbook you are trying to save has the same name as a currently open workbook. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:03:45.810

您假设 javascript 在字符串中扩展环境变量。不幸的是，事实并非如此。

你需要在你的代码中扩展它。使用 wscript.shell 对象的 Environment 属性来访问任何环境变量。

首先，访问 wscript.shell 对象。在 WSH 中，使用

```
var wshell = WScript.CreateObject("wscript.shell"); 
```

或者在浏览器中使用

```
var wshell = new ActiveXObject("WScript.Shell"); 
```

接着

```
var userProfile = wshell.Environment("USERPROFILE"); 
```

或者您可以使用 ExpandEnvironmentStrings 方法扩展字符串中的变量

```
objWorkbook.Worksheets(1).SaveAs(
  wshell.ExpandEnvironmentStrings("%USERPROFILE%\\Desktop\\xxx.xls")
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:07:56.333

来自@PA。答案我终于得到了答案

```
//For Expand environment
  var wshShell = new ActiveXObject("WScript.Shell");
  var userProfile = wshShell.ExpandEnvironmentStrings("%USERPROFILE%\\Desktop\\test.xls");

  //For Save
  objWorkbook.Worksheets(1).SaveAs(userProfile); 
```

谢谢@PA。

# android - 检测哪个选定项目（在 ListView 中）产生了 ContextMenu

> ID：11733131
> 
> 赞同：0
> 
> 时间：2012-07-31T04:31:53.423
> 
> 标签：android, listview

我在 listView 的每个项目中有两个编辑文本。当用户长按 listView 中的任何项目时，我将显示一个 contextMenu 并提供两个选项 Edit 和 Delete 现在我如何知道 listView 用户长按哪个项目以打开 contextmenu。

```
 XML of each item of ListView

<?xml version="1.0" encoding="utf-8"?> 
```

```
 <TextView android:id="@+id/templateId"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"/>

    <TextView android:id="@+id/templateTextId"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"/> 
```

```
 XML for context menu

 <?xml version="1.0" encoding="utf-8"?>
<menu
  xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/editTemplate"
          android:title="Edit" />
  <item android:id="@+id/saveTemplate"
        android:title="Save" />
  <item android:id="@+id/deleTemplate"
        android:title="Delete" /> 
```

```
Code

@Override 
        public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) 
          {
                    super.onCreateContextMenu(menu, v, menuInfo);
                    menu.setHeaderTitle("Select The Action");  
                    menu.add(0, v.getId(), 0, "Edit");  
                    menu.add(0, v.getId(), 0, "Delete");  

                    TextView tv=(TextView)v.findViewById(R.id.templateId);
                    selectedId=tv.getText().toString();
                    TextView tvMessage=(TextView)v.findViewById(R.id.templateTextId);
                    selectedTemplate=tvMessage.getText().toString();
                    //Toast.makeText(getApplicationContext(), "Item In List View Clicked ",Toast.LENGTH_SHORT).show();

          }

        @Override  
        public boolean onContextItemSelected(MenuItem item) {  
            if(item.getTitle()=="Edit")
            {
                       // Toast.makeText(ShowTemplates.this, "Edit Clicked",Toast.LENGTH_SHORT).show();
                        Context mContext = getApplicationContext();
                        Dialog dialog = new Dialog(ShowTemplates.this);

                        dialog.setContentView(R.layout.custome_dialog_edit_template);
                        dialog.setTitle("Edit Template");

                        txtMsgTemplate = (EditText) dialog.findViewById(R.id.editTextTemplateCustomDialog);
                        txtMsgTemplate.setText(selectedTemplate);
                        Button btnSave=(Button)dialog.findViewById(R.id.btnSaveEditedTemplate);

                        dialog.show();
              } 
```

我试图找到它，我得到了关注

```
 @Override
  public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
super.onCreateContextMenu(menu, v, menuInfo);

// Get the info on which item was selected
AdapterContextMenuInfo info = (AdapterContextMenuInfo) menuInfo;

// Get the Adapter behind your ListView (this assumes you're using
// a ListActivity; if you're not, you'll have to store the Adapter yourself
// in some way that can be accessed here.)
Adapter adapter = getListAdapter();

// Retrieve the item that was clicked on
Object item = adapter.getItem(info.position); 
```

}

但我不知道如何使用这个 Item 对象。有没有其他方法可以做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:02:24.390

ListViews 有一个调用的函数`getSelectedItemPosition`，它返回一个 int，其中包含项目在适配器中的位置。我很确定你可以使用它。如果那是空的，`onCreateContextMenu`那么尝试在你的`onLongClick listener`.

# jquery - 如何使用 Jquery 验证引擎实现 onSuccess()？

> ID：11733133
> 
> 赞同：2
> 
> 时间：2012-07-31T04:32:07.893
> 
> 标签：jquery, jquery-plugins, validation

我正在使用 Jquery Validation Engine [http://posabsolute.github.com/jQuery-Validation-Engine/ ，](http://posabsolute.github.com/jQuery-Validation-Engine/)**一旦发现表单有效**，我只想显示一个隐藏的加载 gif 。

IE

*   用户提交表单

*   如果表单有效： $('#lulus-loading-div').show();

我试过这个，但没有运气：

*   [Jquery 和 jQuery-Validation-Engine](https://stackoverflow.com/q/7428229/1177832)

我似乎没有运气实现 onSuccess() 回调函数。

我不怀疑它可以很好地工作，不幸的是我不知道正确的语法，并且对文档没有运气：/

目前我有：

```
jQuery(document).ready(function(){
        jQuery("#model-form").validationEngine({

           onSuccess: function(){
              $('#lulus-loading-div').show();
           });
        });

 }); 
```

这会在单个字段第一次验证时调用 onSuccess()，然后如果您尝试提交不完整的表单，它会在不标记错误的情况下提交。

任何帮助或建议将不胜感激:)

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:29:05.807

验证引擎没有任何东西（工作）来完成这样的任务。

假设您的表单使用页面重新加载 - 但也应该与基于 ajax 的无重新加载提交一起使用。

有一次我需要类似的东西，我写了一个快速的'n'dirty hack，它就是这样做的。

我使用版本 2.5.2

找到此代码（大约第 240-250 行）

```
form.trigger("jqv.form.result", [errorFound]);

```

就在它添加此代码之前：

```
if (options.jpAfterSuccessValidation && !errorFound) {
    options.jpAfterSuccessValidation();
}

```

在最底部，默认情况下，附加到（添加之后）“fadeDuration”

```
褪色持续时间：0.3，
jpAfterSuccessValidation: false //如果所有字段都验证，则启动回调

```

并像这样使用它：

```
jQuery("#model-form").validationEngine({
    jpAfterSuccessValidation：函数（）{
    $('#lulus-loading-div').show(); //这将拉出你的信息对话框
    }
});

```

您的“lulus-loading-div”将保持可见，直到包含表单的页面重新加载（并且表单被提交）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T18:36:39.100

onSuccess 错误也报告在他们的 Git 上。[以下是从https://github.com/posabsolute/jQuery-Validation-Engine/issues/554](https://github.com/posabsolute/jQuery-Validation-Engine/issues/554)获取的关于 snnipet 的工作 ：

```
$("#my_form").validationEngine('attach', { 
    onValidationComplete: function(form, status){ // when validate is on and the form scan is completed
        if (status == true) { // equiv to success everythings is OK
            // we disable the default from action to make our own action like alert or other function
            form.on('submit', function(e) {
                e.preventDefault();
            });

            // your function or your action

            alert("Successful! Now submitting");
            return true;
        } else {
            // we disable the default from action to make our own action like alert or other function
            form.on('submit', function(e) {
                e.preventDefault();
            });

            // your function or your action

            alert("Errors! Stopping Here");
        }
    },
    promptPosition : "topLeft", 
    scroll: false
}); 
```

希望，它可以帮助某人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T15:13:55.413

“快速 'n'clean 解决方案是这样做的：

```
$("#new_user").validationEngine("attach", {
  promptPosition: "topLeft",
  onFieldSuccess: function() {
    alert("rakoto");
  }
}); 
```

希望有帮助。;)

# tridion - 无法获取手动活动的所有者和执行者

> ID：11733136
> 
> 赞同：2
> 
> 时间：2012-07-31T04:32:25.677
> 
> 标签：tridion, tridion-2011

我正在创建一个事件处理程序来获取所有活动的活动实例详细信息。

```
EventSystem.Subscribe<ActivityInstance, FinishActivityEventArgs>(NotifyUser, EventPhases.TransactionCommitted); 
```

在“NotifiyUser”功能中，我试图获取活动实例详细信息，如（标题、FinishMessage、所有者、执行者等）

我能够获取“手动活动”的“自动活动”的所有详细信息，但无法获取“所有者”和“执行者”值。

```
private void NotifyUser(ActivityInstance activityInstance, FinishActivityEventArgs args, EventPhases phase)
    {
        _session = activityInstance.Session;
       logdetails("Activity Owner--->" + activityInstance.Owner.Title);
        foreach (var performer in activityInstance.Performers)
        {
           logdetails("Activity Performer--->" + performer.Title);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:26:03.433

这很奇怪，我无法重现它。

在我的代码中，我这样做了（与您相同的订阅）

```
private void LogSomething(ActivityInstance instance, FinishActivityEventArgs args, EventPhases phases)
{
    User owner = instance.Owner;
    File.AppendAllLines("c:\\temp\\info.log", new[]
        {
            string.Format("Activity ID: {0} owned by: {1}({2}", instance.Id, owner.Title, owner.Id)
        });
    List<User> performers = new List<User>(instance.Performers);
    foreach (var performer in performers)
    {
        File.AppendAllLines("c:\\temp\\info.log", new[]
            {
                string.Format("Activity ID: {0} Performer: {1}({2}", instance.Id, performer.Title, performer.Id)
            });
    }
} 
```

为我粗暴的伐木道歉。

这是我在 info.log 中得到的：

```
Activity ID: tcm:3-923-131104 owned by: T2011GURUV3\Administrator(tcm:0-11-65552
Activity ID: tcm:3-923-131104 Performer: T2011GURUV3\Administrator(tcm:0-11-65552
Activity ID: tcm:3-924-131104 owned by: NT AUTHORITY\SYSTEM(tcm:0-3-65552
Activity ID: tcm:3-924-131104 Performer: NT AUTHORITY\SYSTEM(tcm:0-3-65552
Activity ID: tcm:3-925-131104 owned by: T2011GURUV3\Administrator(tcm:0-11-65552
Activity ID: tcm:3-925-131104 Performer: T2011GURUV3\Administrator(tcm:0-11-65552
Activity ID: tcm:3-926-131104 owned by: T2011GURUV3\Administrator(tcm:0-11-65552
Activity ID: tcm:3-926-131104 Performer: T2011GURUV3\Administrator(tcm:0-11-65552
Activity ID: tcm:3-927-131104 owned by: NT AUTHORITY\SYSTEM(tcm:0-3-65552
Activity ID: tcm:3-927-131104 Performer: NT AUTHORITY\SYSTEM(tcm:0-3-65552
Activity ID: tcm:3-928-131104 owned by: T2011GURUV3\Administrator(tcm:0-11-65552
Activity ID: tcm:3-928-131104 Performer: T2011GURUV3\Administrator(tcm:0-11-65552 
```

所以看起来这可能与你的环境有关？也许是特定版本的缺陷？我在使用 Hotfix Rollup 1 的 SDL Tridion 2011 SP1

# javascript - JavaScript 重构/避免重复

> ID：11733139
> 
> 赞同：0
> 
> 时间：2012-07-31T04:32:40.580
> 
> 标签：javascript, jquery, coding-style

我需要重构它以避免代码重复。

```
$('#showmore-towns').toggle(
    function() {
        $('.popularTownsAdditional').show();
        console.log(this);
        $('#showmore-town .showless').show();
        $('#showmore-town .showmore').hide();
        $('#showmore-town').removeClass('sd-dark28').addClass('sd-dark28down');
        return false;
    },
    function() {
        $('.popularTownsAdditional').hide();
        $('.showless').hide();
        $('.showmore').show();
        $('#showmore-towns').addClass('sd-dark28').removeClass('sd-dark28down');
    });

$('#showmore-cities').toggle(
    function() {
        $('.popularCitiesAdditional').show();
        $('#showmore-cities .showless').show();
        $('#showmore-cities .showmore').hide();
        $('#showmore-cities').removeClass('sd-dark28').addClass('sd-dark28down');
        return false;
    },
    function() {
        $('.popularCitiesAdditional').hide();
        $('#showmore-cities .showless').hide();
        $('#showmore-cities .showmore').show();
        $('#showmore-cities').addClass('sd-dark28').removeClass('sd-dark28down');
    }); 
```

基本上，它显示了相同的功能，但仅在具有不同 ID 的不同 div 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T04:53:18.827

可能只需要引用一个或两个命名函数而不是匿名函数。

```
function showStuff(typeToShow) {
    $('.popular' + typeToShow + 'Additional').show();
    $('#showmore-' + typeToShow + .showless').show();
    $('#showmore-' + typeToShow + .showmore').hide();
    $('#showmore-' + typeToShow).removeClass('sd-dark28').addClass('sd-dark28down');
    return false;
}

function hideStuff(typeToHide) {
    $('.popular' + typeToHide + 'Additional').hide();
    $('#showmore-' + typeToHide + .showless').hide();
    $('#showmore-' + typeToHide + .showmore').show();
    $('#showmore-' + typeToHide ).addClass('sd-dark28').removeClass('sd-dark28down');
} 
```

注意：a）您可能会使这些方法更流畅，但您明白了！注意：b) 如果您想使用建议的替换，您需要将“#showmore-town”重命名为“#showmore-towns”（带有 S）。

然后在您的切换中，您可以引用这些函数：

```
$('#showmore-towns').toggle(showStuff(towns),
hideStuff(towns));

$('#showmore-cities').toggle(showStuff(cities),
hideStuff(cities)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:53:21.913

我的意思是……如果它总是从……开始，`#showmore-`我们可以把它解决掉

```
$('[id^=showmore-]').toggle(
function() {
    var id = $(this).prop('id');
    id = id.split('-')[1];
    var upperID = id.charAt(0).toUpperCase() + id.slice(1);
    $('.popular'+upperID+'Additional').show();
    $('#showmore-'+id+' .showless').show();
    $('#showmore-'+id+'.showmore').hide();
    $('#showmore-'+id).removeClass('sd-dark28').addClass('sd-dark28down');
    return false;
},
function() {
    var id = $(this).prop('id');
    id = id.split('-')[1];
    var upperID = id.charAt(0).toUpperCase() + id.slice(1);
    $('.popular'+upperID+'Additional').hide();
    $('#showmore-'+id+' .showless').hide();
    $('#showmore-'+id+' .showmore').show();
    $('#showmore-'+id).addClass('sd-dark28').removeClass('sd-dark28down');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:53:31.290

你可以这样做：

```
(function() {

    $('#showmore-towns').toggle(
        function() { showmorelessOn('#showmore-town'); },
        function() { showmorelessOff('#showmore-town'); }
    );
    $('#showmore-cities').toggle(
        function() { showmorelessOn('#showmore-town'); },
        function() { showmorelessOff('#showmore-town'); }
    );

    var showmorelessOn = function(context) {
        $('.popularCitiesAdditional').show();
        $('.showless', context).show();
        $('.showmore', context).hide();
        $(context).removeClass('sd-dark28').addClass('sd-dark28down');
        return false;
    };
    var showmorelessOff = function(context) {
        $('.popularCitiesAdditional').hide();
        $('.showless', context).hide();
        $('.showmore', context).show();
        $(context).addClass('sd-dark28').removeClass('sd-dark28down');
    };

})(); 
```

虽然我同意，但也许可以在 codereview.stackexchange.com 上提供更好的服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:31:28.950

我会几乎完全在 CSS 中执行此操作。仅使用`.toggleClass()`和确定 CSS 中显示的内容和隐藏的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T06:54:29.687

```
(function() {

    $('#showmore-towns').toggle(
        function() { showmorelessOn.call($('#showmore-town')); },
        function() { showmorelessOff.call($('#showmore-town')); }
    );
    $('#showmore-cities').toggle(
        function() { showmorelessOn.call($('#showmore-town')); },
        function() { showmorelessOff.call($('#showmore-town')); }
    );

    var showmorelessOn = function() {
        $('.popularCitiesAdditional').show();
        $('.showless', this).show();
        $('.showmore', this).hide();
        $(this).removeClass('sd-dark28').addClass('sd-dark28down');
        return false;
    };
    var showmorelessOff = function() {
        $('.popularCitiesAdditional').hide();
        $('.showless', this).hide();
        $('.showmore', this).show();
        $(this).addClass('sd-dark28').removeClass('sd-dark28down');
    };

})();

(function() {

    $('#showmore-towns').toggle(
        function() { showmoreless(); }
    );
    $('#showmore-cities').toggle(
        function() { showmoreless(); }
    );

    var showmoreless = function() {
           if(this.hasClass('sd-dark28'){
            $('.popularCitiesAdditional').show();
            $('.showless', this).show();
            $('.showmore', this).hide();
            $(this).removeClass('sd-dark28').addClass('sd-dark28down');
       }
     else
       {
      $('.popularCitiesAdditional').hide();
            $('.showless', this).hide();
            $('.showmore', this).show();
            $(this).addClass('sd-dark28').removeClass('sd-dark28down');
      }
}.bind($('#showmore-town'));
})(); 
```

# php - 我需要从 php 运行 python 脚本

> ID：11733149
> 
> 赞同：2
> 
> 时间：2012-07-31T04:33:43.900
> 
> 标签：php, python, qiime

我必须为用 python 编写的软件设计一个使用 PHP 的界面。目前这个软件是从命令行通过输入来使用的，主要是输入是一个文本文件。有一系列步骤，每一步都会调用一个 python 脚本。每一步都将一个文本文件作为输入，并在用户决定的文件夹中生成一个输出文本文件。我正在使用`system()`php，但看不到输出，但是当我从命令行使用相同的命令时，它会生成输出。命令示例：
`python /software/qiime-1.4.0-release/bin/check_id_map.py -m /home/qiime/sample/Fasting_Map.txt -o /home/qiime/sample/mapping_output -v`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:46:23.897

如果您不在 Windows 上，您是否尝试`2>&1`在命令末尾添加 (redirect stderr to stdout)？

```
$output = system("python /software/qiime-1.4.0-release/bin/check_id_map.py -m /home/qiime/sample/Fasting_Map.txt -o /home/qiime/sample/mapping_output -v 2>&1", $exitcode); 
```

从[http://www.php.net/manual/en/function.system.php#108713找到](http://www.php.net/manual/en/function.system.php#108713)

医生也说

> 成功时返回命令输出的**最后一行**，失败时返回 FALSE。

因此，如果您尝试获取多行，则可能需要将其重定向到文件并读入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:46:48.080

试试这个

```
$script = 'software/qiime-1.4.0-release/bin/check_id_map.py -m /home/qiime/sample/Fasting_Map.txt -o /home/qiime/sample/mapping_output -v';
$a = exec($script); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:42:01.027

而不是`system()`尝试在 `ticks` 中包围代码...

它具有类似的功能，但在返回输出的方式上略有不同。

# c# - Active Directory 获取除特殊组之外的所有组

> ID：11733151
> 
> 赞同：1
> 
> 时间：2012-07-31T04:33:46.323
> 
> 标签：c#, active-directory

要获取 Active Directory 中的所有组，我已经用 C# 编写了此代码。它工作得很好，因为我不需要传递任何服务器名、OU、DC 等。

```
 UserPrincipal current_user = UserPrincipal.Current;

        PrincipalContext current_context = current_user.Context;

        PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

        GroupPrincipal qbeUser = new GroupPrincipal(ctx);

        Principal userOrGroup = qbeUser as Principal;
        userOrGroup.Name = "*";

        PrincipalSearcher searcher = new PrincipalSearcher(userOrGroup);

        List<string> AllGroups = new List<string>();

        // enumerate the results - you need to check what kind of principal you get back
        foreach (Principal found in searcher.FindAll())
        {
            // is it a UserPrincipal - do what you need to do with that...
            if (found is UserPrincipal)
            {
                //  ......
            }
            else if (found is GroupPrincipal)
            {
                AllGroups.Add(found.Name);

                //GroupPrincipal gp = found as GroupPrincipal;

                //var data = gp.GetMembers();

                // if it's a group - do whatever you need to do with a group....
            }
        }

        //return AllGroups; 
```

问题是它列出了太多我不需要的组

PerformanceLogUsers、SchemaAdmins、HelpServiceGroups、Telnet Clients 等等。

我只需要像管理员、来宾和其他用户创建的组这样的组。我读过一些类似的东西，比如特殊群体等等。

非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:32:07.393

AD 在执行搜索时不会按组相关性进行区分。它要么是一个组，要么不是。但是，您可以指定是否返回安全组或通讯组等。

您的目录当前如何设置是另一回事。如果您想要的组和您不想要的组都是“安全组”，那么它会带来问题。

一种解决方案是找到您的相关组共有的一些独特属性（或创建一个），然后过滤这些属性的存在。

# asp.net - 如何使用 asp.net Web 应用程序模板知道登录何时成功

> ID：11733153
> 
> 赞同：3
> 
> 时间：2012-07-31T04:33:50.890
> 
> 标签：asp.net, templates, login, default, web-application-project

我使用 Visual Studio 的模板创建了一个新的 asp.net Web 应用程序。这种类型的项目创建了一个开箱即用的登录，我使用`aspnet_regsql`命令配置它以使用我的数据库。

现在，当有人登录应用程序时，我需要知道登录是否成功，因此我可以保存`Session['']`用户名等。

我期待找到一个返回 true 或 false 的方法，但在 Login.aspx.cs 中只是该`Page_Load`方法，我不明白它是如何工作的。

我尝试关联一个获取`UserName`控件值的 onclick 方法，但显然，这仅在用户第一次登录时有效，如果用户选中“下次记住我”它将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:37:27.913

当用户通过身份验证时会引发[AuthenticateRequest](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.authenticaterequest.aspx)事件，但是在这种情况下，您*还没有访问 SessionState 的权限*。因此，要保存`Session`您应该考虑`PostAcquireRequestState`应用程序事件。

[IIS 7.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/bb470252.aspx)

[IIS 5.0 和 6.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/ms178473.aspx)

有关其他信息：

*   [验证请求事件](https://stackoverflow.com/questions/875472/authenticaterequest-event)

例子：

### 在 global.asax

```
 void Application_PostAcquireRequestState(object sender, EventArgs e)
    {
        if (Context.Session != null)
        {
            Application.Lock();
            Session["user"] = User.Identity.Name;
            Application.UnLock();
        }
    } 
```

* * *

此外，如果您使用`LoginControl`，您可以处理该`LoggedIn`事件：

### ASPX

```
 <asp:Login runat="server" ID="login" DestinationPageUrl="~/Default.aspx" 
        FailureAction="RedirectToLoginPage"
        onloggedin="login_LoggedIn" ...>
     .... 
```

### ASPX 代码背后

```
protected void login_LoggedIn(object sender, EventArgs e)
{
    // set the Session here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:41:34.320

aspx web 项目模板使用`asp:Login`控件，它为您进行身份验证。

如果您需要自定义登录，您可以滚动您自己的用户名/密码输入，然后直接调用会员API，例如

```
if (Membership.ValidateUser(username, password))
{
    FormsAuthentication.SetAuthCookie(username, rememberMe);
    // Do your custom stuff here 
```

...

您还可以使用以下方法检查用户是否已通过身份验证

```
UserPrincipal.Identity.IsAuthenticated 
```

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ff648345.aspx)

# google-closure - 如何在拖放时更改光标旁边的元素？

> ID：11733157
> 
> 赞同：2
> 
> 时间：2012-07-31T04:34:15.817
> 
> 标签：google-closure, google-closure-library

我正在尝试将拖放功能合并到使用 Google Closure 库的应用程序中。具体来说，我正在使用`goog.fx.DragDropGroup`该类：

[http://closure-library.googlecode.com/svn/docs/class_goog_fx_DragDropGroup.html](http://closure-library.googlecode.com/svn/docs/class_goog_fx_DragDropGroup.html)

现在，我试图让光标旁边的元素成为拖动源以外的元素。我已经尝试在事件侦听器的回调函数中执行此操作`dragstart`。

```
myapp.Foo.prototype.dragStart_ = 
    function(e) {
  var dElement = goog.dom.createElement('div');
  dElement.innerHTML = 'This element is not a copy of the drag source element.';
  e.dropTargetItem.element = dElement;
} 
```

但是，直接更改`element`放置目标项的属性是行不通的。事实上，它在拖放时取消了拖动源元素的任何副本。

如何将另一个元素指定为使用鼠标拖动拖动源时出现的元素？我不希望这个元素与拖动源相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T07:04:49.020

您可以创建一个继承自 goog.fx.DragGroup 的拖动组类然后覆盖该函数： createDragElement 您返回的元素将是鼠标指针后面的元素。

例子：

```
goog.provide('my.DragGroup');

goog.require('goog.fx.DragDropGroup')

/**
 * @constructor
 * @extends {goog.fx.DragDropGroup}
 */
my.DragGroup = function() {
    goog.base(this);
};
goog.inherits(my.DragGroup, goog.fx.DragDropGroup); 

/** @inheritDoc */
my.DragGroup.prototype.createDragElement = function(sourceEl) {
    return goog.dom.createDom('div', null, 'Not a copy of the source El');
} 
```

希望这可以帮助

# c++ - 净化中不正确的内存泄漏？

> ID：11733159
> 
> 赞同：-1
> 
> 时间：2012-07-31T04:34:49.897
> 
> 标签：c++, delete-operator, purify

我在 Solaris 中运行的代码上运行了 purify，它显示了很多内存泄漏。但是我检查了代码，大多数泄漏似乎都是无效的。

例如，

**文件1.cpp**

```
Obj* getMyObj()
{
    Obj* obj = NULL;
    if(condition)
    {
        obj = new Obj();   //Purify is reporting leak here
        //Fill obj
    }

    ...
    return obj;
} 
```

**文件2.cpp**

```
void myfunc()
{
    Obj* myobj = getMyObj();

   if(myobj == NULL)
       return;
    ...
    ...

    delete myobj;    //The object is deleted here
} 
```

即使对象被正确销毁`File2.cpp`，为什么净化报告泄漏`File1.cpp`？

**编辑**

NULL 检查只是一个错字，我更正了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:38:23.730

> 即使对象在 File2.cpp 中被正确销毁，[...]

这个假设是错误的。

```
Obj* myobj = getMyObj(); 
```

如果`getMyObj`实际创建了一个对象，它不会返回一个空指针。这意味着下面的条件`if`为真，然后函数立即返回。

```
if(myobj)
    return; 
```

该函数中不再执行任何代码，因此它永远不会被破坏。

我建议使用智能指针而不是这种手动管理，因为这种错误会消失。使用 C++11 你可以使用`std::unique_ptr`，否则`std::auto_ptr`如果你小心的话你可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:37:54.693

```
if(myobj)
   return; 
```

对象创建后返回继续，删除从未执行

您需要修改代码：

```
-if(myobj)
+if(myobj==NULL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:56:16.293

在`file1.cpp`

```
Obj* getMyObj(); 
```

该函数有点不安全，因为函数的调用者需要知道他必须删除返回的对象，但从函数中不清楚这是必要的

更好的是使用像 shared_ptr 这样的智能指针而不是原始指针，这样就很清楚返回的对象是在堆上分配的，以及它是如何被销毁的（如果已分配）。

```
std::shared_ptr<Obj> getMyObj(); 
```

# xml - 使用 XSLT 将 XML 转换为 XML（删除、添加、更改）

> ID：11733160
> 
> 赞同：0
> 
> 时间：2012-07-31T04:34:51.663
> 
> 标签：xml, xslt, xhtml, xslt-1.0

我必须使用 XSLT 从一个 XML (XHTML) 文件转换为另一个。转换规则如下：

1.  `<div id="ta12" class="bl" style="dis:bl">`必须替换为`<div class="pass" value="50">`
2.  id="t0b" 和 "t1b" 的值必须分别替换为 id="ta0b8" 和 "ta3b8"。
3.  `<input type="radio" name="o0" id="t0"/>`必须替换为`<input type="radio" name="key0b8" value="0" id="ta0q" class="block" />` （同样在文件中）

**输入文件：**

```
 <?xml version="1.0" encoding="utf-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
    </head>  
    <body>
      <div class="iDev">
      <div id="ta12" class="bl" style="dis:bl"></div>

        <div class="q">
          <div id="t0b" class="block">1<span style="color">TEXT1</span>
          </div><br />
          T <input type="radio" name="o0" id="t0"/> 
          F <input type="radio" name="op0" id="f0"/>
          <div id="sfb"></div>
        </div><br />

        <div class="q">
          <div id="t1b" class="block">2<span style="color">TEXT2</span>
          </div><br />
          T <input type="radio" name="o1" id="t1" /> 
          F <input type="radio" name="op1" id="f1" />
          <div id="sfb"></div>
        </div>
      </div>
    </body>
    </html> 
```

**输出文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;  charset=utf-8" />
</head>
<body>
  <div class="iDev">
  <div class="pass" value="50"></div>

    <div class="q">
      <div id="ta0b8" class="block">1<span style="color">TEXT1</span>
      </div><br />
      T<input type="radio" name="key0b8" value="0" id="ta0q" />
      F<input type="radio" name="key0b8" value="1" id="ta1q" />
      <div id="sfb"></div>
    </div><br />

    <div class="q">
      <div id="ta3b8" class="block">2 <span style="color">TEXT2</span>
      </div><br />
      T<input type="radio" name="key3b8" value="0" id="ta0q3" />
      F<input type="radio" name="key3b8" value="1" id="ta1q3" />
      <div id="sfb"></div>
    </div>
  </div>
</body>
</html> 
```

在我的 XSLT 中，我创建了一个包含整个输入文件的标识模板，然后我尝试进行所需的修改。我可以通过——

```
<xsl:template match="xhtml:div[@id='ta12']">
  <xsl:attribute name="class">pa</xsl:attribute>
  <xsl:attribute name="value">10</xsl:attribute>
</xsl:template> 
```

在输出中，它会生成所需的 Div 标签，但会删除该`<div class="iDev">`标签。谁能告诉我从给定输入产生所需输出的解决方案。感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:49:56.953

我只是要解决您的第一条规则，因为这似乎是您问题的重点。如果您需要有关规则 2 和 3 的帮助，请针对它们提出单独的问题。

一般来说，XSLT 1.0 复制元素（非深度）的解决方案模式如下所示。非深度，我的意思是删除任何子节点。

**清单 1**

```
<xsl:template match="some-element-pattern">
  <xsl:copy>
   <xsl:copy-of select="@*" />
   <xsl:attribute name="my-attrib-to-set">value-to-set</xsl:attribute>
  </xsl:copy>
</xsl:template> 
```

或者，如果除了直接复制之外还有其他属性处理的潜力，您可以将 xsl:copy-of 替换为 xsl:apply-templates。xsl:apply-templates 是更通用的形式。

因此，将此解决方案模式应用于您的案例，您想要的模板是......

**清单 2**

```
<xsl:template match="xhtml:div[@id='ta12']">
  <xsl:copy>
   <xsl:copy-of select="@*" />
   <xsl:attribute name="class">pa</xsl:attribute>
   <xsl:attribute name="value">10</xsl:attribute>
  </xsl:copy>
</xsl:template> 
```

注意。在以前的解决方案中，我可能给了你这个低效的模板......

**清单 3**

```
<xsl:template match="xhtml:div[@id='ta12']">
  <xsl:copy>
   <xsl:apply-templates select="@*[not(@class)]" />
   <xsl:attribute name="class">pa</xsl:attribute>
  </xsl:copy>
</xsl:template> 
```

我现在意识到这是错误的。谓词 not(@class) 没有意义并且总是返回 true，因为当焦点项是属性时，attribute::axis 总是返回一个空序列。清单 3 背后的想法是在匹配的输入 div 元素具有类属性的情况下消除对类属性的无关处理。如果您真的想在清单 2 中获得这种效率，在 XSLT 1.0 中，您可以像清单 4 那样做，但是代码有些丑陋，我不确定是否值得。

**清单 4**

```
<xsl:template match="xhtml:div[@id='ta12']">
  <xsl:copy>
   <xsl:apply-templates select="@*[local-name()!='class']
                                  [local-name()!='value']" />
   <xsl:attribute name="class">pa</xsl:attribute>
   <xsl:attribute name="value">10</xsl:attribute>
  </xsl:copy>
</xsl:template> 
```

清单 4 仅适用于在 null 命名空间中的类和值。如果所讨论的属性位于名称空间中，则需要进行一些更改。

这是您的最终选择。如果您准备牺牲 xsl:copy 的通用性并想吸取 Attribute Value Templates 的精华，您可以使用清单 5。在清单 5 中，您可以将 'pa' 和 'va' 替换为 Attribute Value Templates ， 按要求。该解决方案的另一个缺点是，现在有必要确保@class 和@value 属性不在子xsl:apply-templates 中处理，而不仅仅是一种效率措施，否则它们将覆盖预期的文字价值观。

**清单 5**

```
<xsl:template match="xhtml:div[@id='ta12']">
  <xhtml:div class="pa" value="va">
   <xsl:apply-templates select="@*[local-name()!='class']
                                  [local-name()!='value']" />
  </xhtml:div>
</xsl:template> 
```

最后，我知道您只对 XSLT 1.0 感兴趣，但只是为了好玩，我将提一下 XSLT 2.0 解决方案的一般模式。如清单 6 所示。

**清单 6**

```
<xsl:template match="some-element-pattern">
  <xsl:copy>
   <xsl:apply-templates select="@* except @my-attrib-to-set" />
   <xsl:attribute name="my-attrib-to-set">value-to-set</xsl:attribute>
  </xsl:copy>
</xsl:template> 
```

# matlab - 为matlab设置冲浪最小值

> ID：11733161
> 
> 赞同：1
> 
> 时间：2012-07-31T04:34:56.153
> 
> 标签：matlab, geometry-surface

我有一个函数，它采用 3D 风景的体素表示，并且可以绘制一个 XY 截面以显示风景的中间。体素表示存储在一个 3 维矩阵中，其中的数字代表重要的事物。显然矩阵是

```
1,1,1 
2,2,2 
```

在访问元素方面，但实际的 3D 位置可通过以下方法找到：

```
(index-1)*resolution+0.5*resolution+minPos; 
```

其中分辨率是网格大小：

```
resolution
<-->
 __ __ __
|__|__|__|
 <- Min pos 
```

minPos 是网格开始的地方。

现在就实际问题而言，我想提取此体素表示的单个 XY 部分并将其显示为冲浪。这可以通过这样做来完成：

```
surf(voxel(:, :, section)) 
```

但是你会得到这个：

明显的问题是网格将从 0 开始，因为这就是矩阵表示的方式。如何设置 surf 的最小值和单元格大小，即网格将从最小值开始（如上所示）并具有分辨率的网格间距（如上所示）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:24:42.260

阅读[surf 的文档](http://www.mathworks.nl/help/techdoc/ref/surf.html)，您还可以提供与您的数据点对应的 x 和 y 坐标。

```
surf(X,Y,Z) 
```

X 和 Y 可以是向量或矩阵：

> `surf(X,Y,Z)`用于`Z`颜色数据和表面高度。`X`和`Y`是定义表面的 x 和 y 分量的向量或矩阵。如果`X`和`Y`是向量，`length(X) = n`并且`length(Y) = m`，其中`[m,n] = size(Z)`。在这种情况下，曲面的顶点是`(X(j), Y(i), Z(i,j))`三元组。要为任意域创建`X`和矩阵，请使用[meshgrid](http://www.mathworks.nl/help/techdoc/ref/meshgrid.html)函数`Y`

## 例子

```
 Z=[ 0 1 2  3;
     7 6 5  4;
     8 9 10 11];

 x=[-1 0 1 2];
 y=[-2 0 2];
 surf(x,y,Z); 
```

![在此处输入图像描述](../Images/b89a86c2dc9feeaf3feadbf1d69209ba.png) 当然，您必须匹配文档中清楚描述的 Z、x 和 y 矩阵/向量^^只需记住 Z 列中的元素作为沿 y 轴的值进行冲浪，Z 行中的元素是冲浪ed 作为沿 x 轴的值。这在示例图片中可以清楚地看到。

## 解决方案

我认为您切换了 x 和 y 轴，您可以通过转置来修复`z`：

```
s = size(voxel);
xi = (minPosX:resolution:(minPosX+resolution*s(1)-1));
yi = (minPosY:resolution:(minPosY+resolution*s(2)-1));
z = (voxel(:,:,section));

surf(xi, yi, z'); 
```

或者您选择了错误的数字进行构建`xi`，`yi`而应该是这样的：

```
xi = (minPosX:resolution:(minPosX+resolution*s(2)-1));
yi = (minPosY:resolution:(minPosY+resolution*s(1)-1));
z = (voxel(:,:,section));
surf(xi, yi, z); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:29:41.857

所以很容易做到：

假设我们有一个 3D 矩阵“体素”；

```
s = size(voxel);
xi = (minPosX:resolution:(minPosX+resolution*s(1)-1));
yi = (minPosY:resolution:(minPosY+resolution*s(2)-1));
z = (voxel(:,:,section));
[x y] = meshgrid(xi, yi);
x = x';
y = y';

surf(x, y, z); 
```

提供以下图：

这是旋转的，这很烦人，我似乎无法让它旋转回来（我可以想象另一种方式，但没关系）

# android - Android屏幕中的子视图过多->减慢键盘隐藏

> ID：11733163
> 
> 赞同：4
> 
> 时间：2012-07-31T04:34:59.463
> 
> 标签：android, keyboard

我有一个视图，其中包含一个复杂的表视图自定义表：每行大约有 10 个视图（EditText、Label、Checkbox）。
该表共有 10 行。

我的问题是当用户专注于edittext时，键盘显示（一切正常），但是当键盘隐藏时，响应太慢：第一次应用程序有2s的延迟，第二次键盘消失和键盘后面显示黑屏，之后视图恢复正常状态

我尝试设置活动`android:windowSoftInputMode="adjustPan"`，但没有运气

# c - 函数和数据指针如何允许 c 中的临时运行时多态性？

> ID：11733169
> 
> 赞同：3
> 
> 时间：2012-07-31T04:35:43.720
> 
> 标签：c, polymorphism

[维基百科关于 C 的文章](http://en.wikipedia.org/wiki/C_programming_language#Characteristics)指出`Function and data pointers permit ad hoc run-time polymorphism`.

这是什么意思？请解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T05:04:55.537

[对于qsort](http://www.manpagez.com/man/3/qsort/)函数中的 C 中的 ad-hoc 多态性，我能想到的示例之一。qsort 函数将比较函数（函数指针）作为输入，从而允许您使用具有不同数据类型的 qsort。

qsort 的原型如下：

```
void qsort(void *base, size_t nel, size_t width, int (*compar)(const void *, const void *)); 
```

qsort 的比较函数形式如下：

```
int (*compar)(const void *, const void *); 
```

请注意，qsort 函数仅有效地提供了 qsort 算法的算法实现，而通过巧妙地使用函数指针进行比较函数和数据抽象，将要使用的数据类型和数据类型的比较抽象化`void *`。

qsort 为函数和数据的抽象提供了一个示例，从而为在 C 中使用 ad-hoc 多态性铺平了道路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T04:51:01.720

检查以下代码：

```
#include <stdio.h>

typedef int (*Func)(int a, int b);
int sum(int a, int b) {
    return a + b;
}

int substruct(int a, int b) {
    return a - b;
}

int main(int argc, char** argv){
    Func f = sum;
    printf("%d\n", f(1, 2));

    f = substruct;
    printf("%d\n", f(1, 2));
} 
```

输出：

```
3
-1 
```

在这里，我演示了如何为指针分配不同的函数可以改变程序的行为。这是一种多态性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T04:51:07.487

我能给出的最明确的答案是提醒您，第一个 C++ 编译器实际上将 C++ 代码转换为 C，然后将该 C 代码编译为 exe。

这个实现的痕迹仍然存在于用于虚函数的“vtable”的概念中——它只是一个函数指针表，因此类可以更改 vtable 以调用不同的实现。

# android - 解析无名 JSONObject 的 JSONArray 时如何停止 for 循环？

> ID：11733178
> 
> 赞同：1
> 
> 时间：2012-07-31T04:36:27.173
> 
> 标签：android, json, parsing, for-loop

我想解析一个`JSONArray`包含`JSONObject`没有名称的 s 并且其`index`在数组中的（int）位置每周左右变化的 a。我试图`Object`通过它的属性来解析一个特定的，但我的解析器只返回数组中的最后一个对象。

当循环到达我要解析的对象并确定对象的 int 索引以进行进一步解析时，如何停止循环。

```
try {
        JSONArray jArray = JSONthing.getJSONfromURL("http://something.com");
        String attributeiwant = "abc";
        for (int i = 0; i < jArray.length(); i++) {
            JSONObject alpha = jArray.getJSONObject(i);
            String attributeparsed = alpha.getString("widget");
            if (attributeparsed == attributeiwant) {
                //determine int index of object, so i can parse other attributes
                //from same object          

            }
        }
        } catch (Exception e) {
        Log.e("log_tag", "Error parsing data "+ e.toString());
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:42:12.913

使用**String.equals**比较字符串而不是**==**

```
try {
        JSONArray jArray = JSONthing.getJSONfromURL("http://something.com");
        String attributeiwant = "abc";
        for (int i = 0; i < jArray.length(); i++) {
            JSONObject alpha = jArray.getJSONObject(i);
            String attributeparsed = alpha.getString("widget");
            if (attributeparsed.equals(attributeiwant)) {
                //determine int index of object, so i can parse other attributes
                //from same object          
                // Get data from JsonObject
                break;
            }
        }
        } catch (Exception e) {
        Log.e("log_tag", "Error parsing data "+ e.toString());
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:41:55.533

使用休息；语句来打破循环，将您的代码更改为以下内容：

```
int i = 0;

try {
        JSONArray jArray = JSONthing.getJSONfromURL("http://something.com");
        String attributeiwant = "abc";
        for (; i < jArray.length(); i++) {
            JSONObject alpha = jArray.getJSONObject(i);
            String attributeparsed = alpha.getString("widget");
            if (attributeparsed.equals(attributeiwant)) {
                //determine int index of object, so i can parse other attributes
                //from same object          
                break;
            }
        }
        } catch (Exception e) {
        Log.e("log_tag", "Error parsing data "+ e.toString());
        }

if(i<jArray.length())
{
   //item found, use i as index of object.
}
else
   //item not found. 
```

# c# - 企业图书馆记录器

> ID：11733182
> 
> 赞同：0
> 
> 时间：2012-07-31T04:37:00.597
> 
> 标签：c#, enterprise-library

我有一个使用 Enterprise Library v4.0 的 BIG 客户端服务应用程序

每次与数据库建立新连接时，它都会使用企业库记录器。当我关闭记录器（通过在 web.config 和 app.config 中使用注释或我的开/关布尔值）批处理操作（例如请求 100 条记录）时，大约需要 6-7 秒。当我打开记录器时，大约需要 20 秒。

我的问题是企业库究竟是如何操作记录器的，是否使用线程？我怎么能说清楚？

我问这个问题是因为我想使用线程调用记录器，但如果库已经使用线程，它将不会成功。此外，对于此操作是否更适合使用线程？您认为我需要使用其他记录器，例如 Log4Net 等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:06:19.563

Enterprise Library Logging Application Block 是线程安全的。如果您想了解 Logger 的运行方式，请查看[源代码](http://download.microsoft.com/download/A/5/B/A5BF3B05-CB8A-40FE-B3E0-93FA84136D2B/Enterprise%20Library%205.0%20-%20Source%20Code.msi)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T04:23:56.597

Enterprise Library Logger 同步处理请求，因此它不会产生线程来处理写入请求。

如果要查看正在创建哪些线程，则可以在调试时在 Visual Studio 中监视线程。

您的应用程序总是可以启动一个线程来记录信息，但我会谨慎地确定是否启动大量的短期线程实际上有助于提高性能。

我建议进行分析以确定一直占用的时间。

# magento - 如何在magento中调用register.phml的手动验证

> ID：11733183
> 
> 赞同：0
> 
> 时间：2012-07-31T04:37:04.137
> 
> 标签：magento

如何在magento中调用register.phtml的一些手动附加验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:32:47.007

您需要 `<script type="text/javascript"> some validation code </script>` 在该特定页面本身中编写一个 js 代码。

# java - 注解指定的 bean 名称与现有的、不兼容的 bean 定义冲突

> ID：11733194
> 
> 赞同：4
> 
> 时间：2012-07-31T04:38:25.300
> 
> 标签：java, spring, annotations

我正在使用 Spring 2.5.4 并正在创建一个要部署到 Weblogic 上的 Java 应用程序。

我想在我的代码中使用一个外部库（包含在我的应用程序生成的 WAR 文件的 WEB-INF/classes 目录中）中有一个类。我在我的代码中为类的一个对象创建了一个实例变量，并添加了@Autowired 注释和一个getter 和setter。在我的应用程序上下文文件中，我声明了一个库类类型的 bean 并添加了以下内容：

```
<context:annotation-config />
<context:component-scan base-package="com.mycompany" /> 
```

...为了注册一个 AutowiredAnnotationBeanPostProcessor 将扫描类并处理注释。

当我尝试部署应用程序时，出现以下错误：

```
java.lang.IllegalStateException: Annotation-specified bean name 'myBean' for bean
class [com.mycompany.package.ClassName] conflicts with existing, non-compatible
bean definition of same name and class [com.mycompany.otherPackage.ClassName] 
```

我认为这是因为库中有一个类与我的应用程序代码中的同名（两个类的包名都以“com.mycompany”开头）。NB。这不是我添加的课程，而是不同的课程。有什么办法可以在不更改应用程序中类的名称的情况下绕过这个问题？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-07-30T14:00:41.637

老问题，但把我的 2c 糟糕的经历扔给了类似的问题。如果您有 2 个具有相同名称的类，但在不同的包中，是否有一段时间您的其他类被失败的 Spring 上下文引用？如果是这样，我建议清理 AS 缓存文件（通常是提取 WAR 的位置），清理/重建 WAR 并再次部署。还建议重新启动应用服务器。我发现应用程序服务器和 Web 容器（Weblogic、WAS、Jboss、Tomcat）往往会留下旧的类，并且在部署应用程序时，这些陈旧的 .class 文件通过一些旧的引用加载到 JVM 中，这在大多数情况下会造成混乱启动 Spring 上下文加载器。

典型的场景是当您将一个类从一个包重命名/移动到另一个包时，或者甚至保持包名相同但将其移动到另一个模块（jar）。在这种情况下，AS 工作目录中的缓存（剩余）文件可能会引起很大的麻烦。清除 AS 中的工作目录应该可以彻底解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:52:48.610

您应该使用@qualifier 来避免这种冲突，请参阅第[3.9.3](http://static.springsource.org/spring/docs/3.0.0.RC2/reference/html/ch03s09.html)节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:02:30.413

我通过完全删除自动装配并通过应用程序上下文和 getBean() 方法显式创建对它的引用来访问 bean，从而解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-29T15:29:04.273

这更适合作为对@Pavel Lechev 答案的评论，但我还没有足够的代表发表评论。

对于其他人的发现，这就是我为解决此问题所做的工作。我正在使用 Wildfly 9.0.2.Final 和 IntelliJ IDEA 2016.1.3 Build #IU-145.1617。这些步骤应该也适用于 JBoss。

1.  停止 Wildfly 服务器。
2.  导航到 $WILDFLY_HOME/standalone/。删除以下三个文件夹：lib/、log/ 和 temp/。
3.  在 IntelliJ 中，Build > Build Artifacts > All Artifacts > Clean（或只是您正在部署的工件）。
4.  在 IntelliJ 中，构建 > 重建项目
5.  重新启动 Wildfly 并重新部署您的工件。

这些步骤解决了我在从几个控制器上游重构包名称后在 Spring 上下文中检测到重复 bean 名称的问题。

# c# - Excel 互操作和 .net 4 书籍建议

> ID：11733196
> 
> 赞同：0
> 
> 时间：2012-07-31T04:38:34.143
> 
> 标签：c#, .net, interop, excel-2007

我需要在 excel 互操作行中获得一些知识。我看过一些在线教程，他们教的是非常基础的知识，比如打开工作簿。对于该行的书籍，我将不胜感激。

我应该使用 .net 4.0 、 excel 2007 和 c#.net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:55:08.837

查看[VSTO 上的书籍](http://xldennis.wordpress.com/2007/02/10/books-on-vsto/)- 它有大量书籍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:51:47.243

随着 .NET 4.0 中动态和 DLR 的引入，与 Excel 等 COM 组件的互操作变得更加简单！

```
Type excelType = Type.GetTypeFromProgID("Excel.Application");
dynamic excel = Activator.CreateInstance(excelType);
excel.Visible = true;
excel.Workbooks.Add(); 
```

使用这个简单的代码，您可以在 Excel 上工作。我不确定针对 COM 组件与 .NET 4.0 互操作的特定书籍，但有些书籍的章节提供了很好的解释：

1.  Programming C# 4.0: Building Windows, Web, and RIA Applications for the .NET 4.0 Framework by O'Reilly - 见第 17 章

2.  .Net 4.0 简介：使用 Visual Studio 2010 作者 Alex Mackey - 请参阅第 3 章

3.  Bart De Smet 发布的 C# 4.0 - 见第 22 章

在所有这些书籍中，他们都解释了如何充分利用 .NET 4.0 与 Word、excel 等 Office 组件进行互操作。

希望这对你有一点帮助

# php - if(): 和 if() { 之间的区别

> ID：11733198
> 
> 赞同：0
> 
> 时间：2012-07-31T04:38:51.880
> 
> 标签：php, if-statement

我可以请知道之间的区别吗

```
 <?php if() : ?>    
 <?php endif; ?> 
```

和

```
<?php if() { ?>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T04:42:52.913

这只是称为**无括号语法的**[替代语法](http://www.php.net/manual/en/control-structures.alternative-syntax.php)

 **> 如果您遵循 MVC 设计模式，那么只有您的视图文件才应该在其中包含 HTML。在这些文件中使用无括号语法只会在主题上进一步将它们与其余代码分开。

无花括号语法的主要优点是花括号在跳入和跳出 php 模式时会丢失，特别是如果您使用 php 短标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T04:43:08.720

没有区别，看你的喜好。

就个人而言，我在视图内部使用前者，而在其他任何地方使用后者。

内部视图：

```
<div>
    <p>Cake?</p>
    <?php if (true): ?>
    <p>Cake!</p>
    <?php endif; ?>
</div> 
```

别处：

```
echo 'Cake?';
if (true) {
    echo 'Cake!';
} 
```**

# android - 在android中使用基本适配器时，充气机不适合我

> ID：11733199
> 
> 赞同：0
> 
> 时间：2012-07-31T04:38:59.420
> 
> 标签：android, android-layout, android-inflate

我正在尝试扩展布局，但它对我不起作用。我在列表视图中使用了Basedapater。

```
int can1 = Integer.parseInt(c.getString(c.getColumnIndex("InCan")));
if (can1 < 1) {
    // ...
} else {
    View view;
    LayoutInflater inflater = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    view = inflater.inflate(R.layout.receipt, null);
    TextView textView = (TextView) view.findViewById(R.id.rcan);
    textView.setVisibility(View.GONE);
    TextView coke3 = (TextView) view.findViewById(R.id.rcoke);
    coke3.setVisibility(View.GONE);

can[i] = " Coke In Can: "+c.getString(c.getColumnIndex("InCan"));
} 
```

你能指出我的问题是什么吗？

这是我在列表视图中使用的适配器类。希望你能帮助我。

```
public class receiptadapter extends BaseAdapter {
private Context context;
private final String[] productname;
private final String[] fixins;
private final String[] original;
private final String[] hot;
private final String[] quantity;
private final String[] price;
private final String[] total;
private final String[] salad;
private final String[] coleslaw;
private final String[] potato;
private final String[] coke;
private final String[] ccoke;
private final String[] water;
private final String[] can;

public receiptadapter(Context context, String[] productname, String[] fixins,
        String[] original, String[] hot, String[] quantity,String[] price, 
        String[] total, String[] salad, String[] coleslaw, String[] potato, 
        String[] coke, String[] ccoke, String[] water, String[] can){

    this.context= context;
    this.productname = productname;
    this.fixins = fixins;
    this.original = original;
    this.hot = hot;
    this.quantity = quantity;
    this.price = price;
    this.total = total;
    this.salad = salad;
    this.coleslaw = coleslaw;
    this.potato = potato;
    this.coke = coke;
    this.ccoke = ccoke;
    this.water = water;
    this.can = can;
}   
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    viewHolder holder = new viewHolder();

    if(convertView == null ){
        convertView = inflater.inflate(R.layout.receipt, null);

        holder.pname = (TextView) convertView.findViewById(R.id.rpname);
        holder.fix = (TextView) convertView.findViewById(R.id.rfixins);
        holder.orig = (TextView) convertView.findViewById(R.id.rorig);
        holder.hot1 = (TextView) convertView.findViewById(R.id.rhot);
        holder.qty = (TextView) convertView.findViewById(R.id.rquantity);
        holder.price1 = (TextView) convertView.findViewById(R.id.rprice);
        holder.sub = (TextView) convertView.findViewById(R.id.rsub);
        holder.sal = (TextView) convertView.findViewById(R.id.rsal);
        holder.col = (TextView) convertView.findViewById(R.id.rcol);
        holder.pot = (TextView) convertView.findViewById(R.id.rpot);
        holder.coke1 = (TextView) convertView.findViewById(R.id.rcoke);
        holder.coke2 = (TextView) convertView.findViewById(R.id.rccoke);
        holder.water1 = (TextView) convertView.findViewById(R.id.rwater);
        holder.can1 = (TextView) convertView.findViewById(R.id.rcan);
        convertView.setTag(holder);

    }else{
        holder = (viewHolder) convertView.getTag();
    }

    holder.pname.setText(productname[position]);
    holder.fix.setText(fixins[position]);
    holder.orig.setText(original[position]);
    holder.hot1.setText(hot[position]);
    holder.qty.setText("  Quantity: "+quantity[position]);
    holder.price1.setText("  Price: PHP "+price[position]);
    holder.sub.setText("  Sub - Total: PHP "+total[position]);
    holder.sal.setText(salad[position]);
    holder.col.setText(coleslaw[position]);
    holder.pot.setText(potato[position]);
    holder.coke1.setText(coke[position]);
    holder.coke2.setText(ccoke[position]);
    holder.water1.setText(water[position]);
    holder.can1.setText(can[position]);

    return convertView;
}

public int getCount() {
    // TODO Auto-generated method stub
    return productname.length;
}

public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

class viewHolder{
    TextView pname;
    TextView fix;
    TextView orig;
    TextView hot1;
    TextView price1;
    TextView qty;
    TextView sub;
    TextView sal;
    TextView col;
    TextView pot;
    TextView coke1;
    TextView coke2;
    TextView water1;
    TextView can1;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:50:30.517

使用下面的代码而不是您的代码。

```
public class receiptadapter extends BaseAdapter {
    private Context context;
    private final String[] productname;
    private final String[] fixins;
    private final String[] original;
    private final String[] hot;
    private final String[] quantity;
    private final String[] price;
    private final String[] total;
    private final String[] salad;
    private final String[] coleslaw;
    private final String[] potato;
    private final String[] coke;
    private final String[] ccoke;
    private final String[] water;
    private final String[] can;
    private LayoutInflater mLinflater;

    public receiptadapter(Context context, String[] productname,
        String[] fixins, String[] original, String[] hot,
        String[] quantity, String[] price, String[] total, String[] salad,
        String[] coleslaw, String[] potato, String[] coke, String[] ccoke,
        String[] water, String[] can) {

        this.context = context;
        this.productname = productname;
        this.fixins = fixins;
        this.original = original;
        this.hot = hot;
        this.quantity = quantity;
        this.price = price;
        this.total = total;
        this.salad = salad;
        this.coleslaw = coleslaw;
        this.potato = potato;
        this.coke = coke;
        this.ccoke = ccoke;
        this.water = water;
        this.can = can;
        this.mLinflater = LayoutInflater.from(context);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        viewHolder holder = new viewHolder();

        if (convertView == null) {
            convertView = mLinflater.inflate(R.layout.receipt, null);
            holder.pname = (TextView) convertView.findViewById(R.id.rpname);
            holder.fix = (TextView) convertView.findViewById(R.id.rfixins);
            holder.orig = (TextView) convertView.findViewById(R.id.rorig);
            holder.hot1 = (TextView) convertView.findViewById(R.id.rhot);
            holder.qty = (TextView) convertView.findViewById(R.id.rquantity);
            holder.price1 = (TextView) convertView.findViewById(R.id.rprice);
            holder.sub = (TextView) convertView.findViewById(R.id.rsub);
            holder.sal = (TextView) convertView.findViewById(R.id.rsal);
            holder.col = (TextView) convertView.findViewById(R.id.rcol);
            holder.pot = (TextView) convertView.findViewById(R.id.rpot);
            holder.coke1 = (TextView) convertView.findViewById(R.id.rcoke);
            holder.coke2 = (TextView) convertView.findViewById(R.id.rccoke);
            holder.water1 = (TextView) convertView.findViewById(R.id.rwater);
            holder.can1 = (TextView) convertView.findViewById(R.id.rcan);
            convertView.setTag(holder);
        } else {
            holder = (viewHolder) convertView.getTag();
        }

        holder.pname.setText(productname[position]);
        holder.fix.setText(fixins[position]);
        holder.orig.setText(original[position]);
        holder.hot1.setText(hot[position]);
        holder.qty.setText("  Quantity: " + quantity[position]);
        holder.price1.setText("  Price: PHP " + price[position]);
        holder.sub.setText("  Sub - Total: PHP " + total[position]);
        holder.sal.setText(salad[position]);
        holder.col.setText(coleslaw[position]);
        holder.pot.setText(potato[position]);
        holder.coke1.setText(coke[position]);
        holder.coke2.setText(ccoke[position]);
        holder.water1.setText(water[position]);
        holder.can1.setText(can[position]);

        return convertView;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return productname.length;
    }

    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    class viewHolder {
        TextView pname;
        TextView fix;
        TextView orig;
        TextView hot1;
        TextView price1;
        TextView qty;
        TextView sub;
        TextView sal;
        TextView col;
        TextView pot;
        TextView coke1;
        TextView coke2;
        TextView water1;
        TextView can1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:42:47.673

试试这个代码

```
 LayoutInflater inflater = null;
 inflater= (LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
 view = inflater.inflate(R.layout.other, null); 
```

# php - PHP 数组合并和求和

> ID：11733200
> 
> 赞同：0
> 
> 时间：2012-07-31T04:39:01.597
> 
> 标签：php, arrays

我有多个数组，它们在 for 循环完成时生成。现在我需要将所有这些数组的总数放在一起，但要按顺序排列，例如：

```
array1(2, 4, 6, 8, 10)
array2(2, 4, 6, 8, 10) 
```

我需要将 2 加在一起，4 等等等等

然后将它们放入另一个数组中。

`array_combine`和的某种组合`array_sum`似乎是解决方案，但我无法弄清楚。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:42:41.090

第一种

```
$a1 = array(
     "a" => 2
    ,"b" => 0
    ,"c" => 5
);

$a2 = array(
     "a" => 3
    ,"b" => 9
    ,"c" => 7
    ,"d" => 10
);

$a3 = array_merge($a1, $a2);
print_r($a3); 
```

第二种风格

```
$a3 = $a1;

foreach($a2 as $k=>$v) {
    if(array_key_exists($k,$a3))
       $a3[$k] + = $v;
    else
       $a3[$k] = $v; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:44:54.113

你应该使用[`array_map()`](http://www.php.net/manual/en/function.array-map.php)：

```
$arr1 = array(2, 4, 6, 8, 10);
$arr2 = array(1, 2, 3, 4, 5);

$arr3 = array_map(
    function($foo, $bar){
        return $foo+$bar;
    },
    $arr1, $arr2
);

print_r($arr3); // outputs:

Array
(
    [0] => 3
    [1] => 6
    [2] => 9
    [3] => 12
    [4] => 15
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:57:35.087

你可以在没有任何php函数的情况下做到这一点，除了count，

```
$limit = count($array1);
for ($i = 0; $i < $limit; $i++) {
    $array_res[$i] = $array1[$i] + $array2[$i]; 
```

应该管用。这将组合您的两个数组并以相同的顺序添加它们。但是，如果您不确定它们的顺序是否相同，请确保您之前在两个数组上都使用了[sort](http://www.php.net/manual/fr/function.sort.php)或[ksort 。](http://www.php.net/manual/fr/function.ksort.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T04:58:41.340

你可以做这样的事情

```
$a = array(2, 4, 6, 8, 10);
$b = array(2, 4, 6, 8, 10);
$c = array_map("test", $a, $b);

function test($a, $b) {
return $a + $b;
}

print_r($c); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T05:09:27.377

据我了解您的问题您想要两个数组中所有相似数字的总和：

```
<?php

$array1= array(2, 4, 6, 8, 10);
$array2=array(2, 4, 6, 8, 10);
$array_sum=array();

foreach($array1 as $key1=>$val1)
{
    $sum=0;

    foreach($array2 as $key2 => $val2)
    {
        if($val1==$val2)
        {
            $sum=$sum+$val1;
        }
    }
    $array_sum[]=$sum;
}

print_r($array_sum);

?> 
```

# iphone - 如何修复崩溃日志错误？

> ID：11733203
> 
> 赞同：1
> 
> 时间：2012-07-31T04:39:20.933
> 
> 标签：iphone

```
事件标识符：F15B3210-1FA9-4759-93D0-8EEFE5CDD41D
CrashReporter 密钥：8745e40d4f9d62eca4e589e2fc071a4e41e1c65e
硬件型号：iPad2,2
进程：MeetingMaker [3680]
路径：/var/mobile/Applications/74EE8CB7-6CB1-4A2E-AD0F-AE8AF165AFE0/MeetingMaker.app/MeetingMaker
标识符：MeetingMaker
版本： ？？？（？？？）
代码类型：ARM（本机）
父进程：launchd [1]
日期/时间：2012-07-27 13:01:06.571 +0530
操作系统版本：iPhone OS 5.1.1 (9B206)
报告版本：104
异常类型：EXC_CRASH (SIGABRT)
异常代码：0x00000000、0x00000000
崩溃的线程：0
最后异常回溯：
0 核心基础 0x375d388f 0x3751a000 + 759951
1 libobjc.A.dylib 0x31648259 0x3163f000 + 37465
2 核心基础 0x3751c9db 0x3751a000 + 10715
3 MeetingMaker 0x00034da3 -[MeetingMakerDetailViewController
配置视图] (MeetingMakerDetailViewController.m:114)
4 MeetingMaker 0x00034f65 -[MeetingMakerDetailViewController
 viewDidLoad] (MeetingMakerDetailViewController.m:160)
5 UIKit 0x30740c8b 0x30704000 + 248971
6 UIKit 0x3073f461 0x30704000 + 242785
7 UIKit 0x30731e87 0x30704000 + 188039
8 UIKit 0x307a27d5 0x30704000 + 649173
9 MeetingMaker 0x000342e9 -[MeetingMakerAppDelegate
应用程序：didFinishLaunchingWithOptions:] (MeetingMakerAppDelegate.m:53)

```

## MeetingMakerAppDelegate.m:53

```
//line 53 is: [self.window makeKeyAndVisible];
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self createEditableCopyOfDatabaseIfNeeded];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.ViewController = [[MeetingMakerDetailViewController alloc] initWithNibName:@"MeetingMakerDetailViewController" bundle:nil];
    self.window.rootViewController = self.ViewController; 
    [self.window makeKeyAndVisible]; 

    return YES;
} 
```

# c# - Web API 如何返回多种类型

> ID：11733205
> 
> 赞同：24
> 
> 时间：2012-07-31T04:39:36.240
> 
> 标签：c#, asp.net-web-api

我只是想知道是否可以在单个 Web Api 中返回多种类型。例如，我想要一个 api 同时返回客户列表和订单（这两组数据可能相互关联，也可能不相互关联？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-31T05:24:37.550

要返回多种类型，可以将它们包装成匿名类型，有两种可能的方法：

```
public HttpResponseMessage Get()
{
    var listInt = new List<int>() { 1, 2 };
    var listString = new List<string>() { "a", "b" };

    return ControllerContext.Request
        .CreateResponse(HttpStatusCode.OK, new { listInt, listString });
} 
```

或者：

```
public object Get()
{
    var listInt = new List<int>() { 1, 2 };
    var listString = new List<string>() { "a", "b" };

    return  new { listInt, listString };
} 
```

还要记住*XML 序列化程序不支持匿名类型*。因此，您必须确保请求应具有标头：

```
Accept: application/json 
```

为了接受json格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:50:20.070

你必须使用 JsonNetFormatter 序列化器，因为默认的序列化器 DataContractJsonSerializer 不能序列化匿名类型。

```
public HttpResponseMessage Get()
{
    List<Customer> cust = GetCustomers();
    List<Products> prod= GetCustomers();
    //create an anonymous type with 2 properties
    var returnObject = new { customers = cust, Products= prod };
    return new HttpResponseMessage<object>(returnObject , new[] { new JsonNetFormatter() });
} 
```

[你可以从这里](http://code.msdn.microsoft.com/Using-JSONNET-with-ASPNET-b2423706#content)得到 JsonNetFormatter

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-15T20:16:36.410

而不是这个：

```
return ControllerContext.Request
       .CreateResponse(HttpStatusCode.OK, new { listInt, listString }); 
```

用这个：

```
return Ok(new {new List<int>() { 1, 2 }, new List<string>() { "a", "b" }}); 
```

# java - 杰克逊 2.0 writeValue 方法中的序列化配置

> ID：11733210
> 
> 赞同：1
> 
> 时间：2012-07-31T04:40:35.627
> 
> 标签：java, serialization, jackson

目前我们在我们的应用程序中使用 Jackson 1.9.x 并具有以下代码：

```
 Object objectMapper = new ObjectMapper();
  .....
  SerializationConfig config = getConfig();
  objectMapper.writeValue(jg, value, config); 
```

据我了解，在 Jackson 2.0 (de)serialzation 的调查期间（请参阅[SerializationConfig](http://fasterxml.github.com/jackson-databind/javadoc/2.0.5/com/fasterxml/jackson/databind/SerializationConfig.html)）已更改，无法直接附加到 objectMapper ，我的问题是：代码片段中最后一句的正确替换是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:11:40.967

通常你会创建一个`ObjectWriter`, 并在必要时重新配置它：

```
ObjectWriter w = mapper.writer(....); // various configuration methods
w.writeValue(jg, value); 
```

底层配置对象是故意隐藏的，因为它们是不可变的`ObjectReader`和`ObjectWriter`线程安全的，因此您可以共享和传递它们而不是配置对象。

# php - jQuery 对话框

> ID：11733211
> 
> 赞同：0
> 
> 时间：2012-07-31T04:40:39.273
> 
> 标签：php, jquery, dialog

我正在处理登录表单。这是代码

```
<?php 
   require_once('../../SfHelper.php'); 
   $sfHelper = new SfHelper();
   echo $sfHelper->load_css('ui-lightness/login');
?>

<div name="form_Login" class="form_Login">
<form id="form1" name="form1" method="post" action="<?php echo 
      $sfHelper->base_url().'forms/jobseeker/'; ?>process_Login.php" >
<table width="296" border="0" align="center" cellspacing="5">
    <tr>
       <td colspan="3">LOGIN JOB SEEKER</td>
    </tr>
    <tr>
       <td width="110">Username</td>
       <td width="18">:</td>
       <td width="209"><input type="text" name="txtUsername" 
            id="txtUsername" /></td>
    </tr>
    <tr>
       <td>Password</td>
       <td>:</td>
       <td><input type="password" name="txtPassword" id="txtPassword" /></td>
    </tr>
    <tr>
       <td colspan="3">

   </td>
    </tr>
    <tr>
       <td colspan="3"><div align="center">
          <input type="submit" name="Login" id="Login" value="Login" />
          </div></td>
    </tr>
 </table>
</form>
</div>

<?php
if(isset($_GET['err']))
{
   if($_GET['err'] == "Sorry, We Cannot found your Username")
   {
      echo '<script type="text/javascript"> 
               alert("Sorry, We Cannot found your Username"); </script>';

   }
   else if($_GET['err'] == "Invalid Username or Password")
   {
        echo '<script type="text/javascript"> 
                     alert("Invalid Username or Password");</script>';
   }
}
?> 
```

问题是我需要使用 jquery 模式对话框而不是使用警报来显示错误消息。我对使用 jquery 一无所知，也不知道我已经掌握了 php 或 javascript。谁能告诉我它是怎么做的？

我已经修改了我的代码并添加了

```
if(isset($_GET['err']))
{
     if($_GET['err'] == "Sorry, We Cannot found your Username")
     {
        echo '<script type="application/javascript">
           $("#Login").click(function() {
              $( "#dialog-message" ).dialog({
                 modal: true,
                 buttons: {
                    Ok: function() {
                       $( this ).dialog( "close" );
                    }
                 }
              });
           });
       </script>';
     }
     else if($_GET['err'] == "Invalid Username or Password")
     {
         echo '<script type="application/javascript">
            $("#Login").click(function() {
                 "#dialog-message2" ).dialog({
                     modal: true,
                     buttons: {
                        Ok: function() {
                           $( this ).dialog( "close" );
                        }
                     }
                 });
            });
        </script>';
    }
} 
```

这是登录失败时要显示的 div

```
 <div id="dialog-message" style="display:none" >
    <p>
    <span class="ui-icon ui-icon-circle-check" 
                style="float:left; margin:0 7px 50px 0;"></span>
    Sorry, We Cannot found your Username
    </p>
   </div>

  <div id="dialog-message2" style="display:none" >
    <p>
    <span class="ui-icon ui-icon-circle-check" 
                 style="float:left; margin:0 7px 50px 0;"></span>
    Invalid Username or Password
    </p>
  </div> 
```

它似乎不起作用。谁能告诉我我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:25:00.763

您需要在页面完全加载之前添加“就绪”

```
$(document).ready(function() {
  // Code using $ as usual goes here.
  //The DOM is now loaded and can be manipulated.
});

  echo '<script type="application/javascript">
                $(document).ready(function() {
                     $("#Login").click(function() {
                        $( "#dialog-message" ).dialog({
                              modal: true,
                              buttons: {
                              Ok: function() {
                               $( this ).dialog( "close" );
                              }
                             }
                         });
                       });
                       });
         </script>'; 
```

# java - 无法从大学无线网络访问 EC2 TCP/IP 服务器

> ID：11733213
> 
> 赞同：-1
> 
> 时间：2012-07-31T04:40:45.777
> 
> 标签：java, android, tcp, amazon-web-services

我目前正在android平台上开发一个主要利用TCP/IP套接字连接的通信应用程序。我在我的一个 EC2 实例上运行我的服务器，当我在家尝试时，我的应用程序访问 EC2 上的 TCP 套接字服务器没有问题。但是，即使我启用了可从我的安全组访问的每个 TCP/IP 端口，我也无法从 uni 无线网络访问我的 tcp/ip 服务器。这是因为我使用的是 Socket 吗？或者我使用的端口被我的 uni 网络禁止了？或者会是什么问题，解决方案是什么？谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:45:43.313

回答：

像大学这样的公共网络通常不允许使用除 80 或 443 之外的任何其他端口

# c# - 向水晶报表添加字段

> ID：11733230
> 
> 赞同：0
> 
> 时间：2012-07-31T04:43:07.750
> 
> 标签：c#, crystal-reports

我创建了一个水晶报表，因为我在设计时错过了一个字段，现在我意识到并尝试插入，但是在报表打开时不显示该值。那有什么问题？我该如何纠正。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:04:45.477

您需要选择设置数据源位置才能更新字段，请参阅本教程了解更多信息。

[http://www.sdn.sap.com/irj/scn/index?rid=/library/uuid/7070ebe4-ca28-2e10-d9ad-c11039edbd9a&overridelayout=true](http://www.sdn.sap.com/irj/scn/index?rid=/library/uuid/7070ebe4-ca28-2e10-d9ad-c11039edbd9a&overridelayout=true)

# c - 我在通过 C 中的地址传递时无法取平均值

> ID：11733232
> 
> 赞同：-1
> 
> 时间：2012-07-31T04:43:08.843
> 
> 标签：c, quicksort

我需要按姓氏的字母顺序对输出进行排序。问题在于，除了姓氏之外，还有其他数据（工资率、总额等）。我负责使用快速排序算法按姓氏对条目进行排序。我还需要使用外部文件来执行此操作。我知道如何链接以及所有这些，尽管我需要弄清楚如何开始。有人可以指出我正确的方向吗？我对编程很陌生，可以使用我能得到的所有帮助。非常感谢！

```
#include <stdio.h>
#include <stdlib.h>
#include "EmployeeRecord.h"
#include "CalcTaxes.o"
#define ADDR(var) &var
#define REPORTCOLUMNHEADINGS1 "Employee           Pay    Reg Hrs  Gross    Fed     SSI     Net\n"
#define REPORTCOLUMNHEADINGS2 "Name               Rate   OVT Hrs  Pay      State   Defr    Pay\n"
#define BARS                  "========           =====  =======  =======  ======  ======  =======\n\n"  
#define REPORTCOLUMN1         "%s, %s\t%8.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n"
#define REPORTCOLUMN2         "%32.2f%18.2f%8.2f\n\n"

void PrintReportHeadings(FILE * ReportFile); //3.1 PrintReportHeadings
void InitializeAccumulators(int * empCount,float * pr, float * reg,float * ovt,float * gp,float * fedt,float * stt,float * def,float * sst,float * np); //3.2 InitializeAccumulators
void InputEmployeeData(char * firstname,char * lastname,float * hours,float * payrate,float * defr); //3.3 InputEmployeeData
float CalculateGross(float hours, float payrate, float reghours, float ovthours); //3.4 CalculateGross
extern void CalculateTaxes(float gross, float defr, float *ft, float *st, float *ssit); //3.5 CalculateTaxes
void AddDetailToAccumulator(int *empCount,float *pr,float *payrate,float *reg,float *reghours,float *ovt,float *ovthours,float *gp,
                                float *gross,float *fedt,float *ft,float *stt,float *st,float *sst,float *ssit,float *def,
                                float *defr,float *np,float *net,float *avgpr,float *avgfedt,float *avgreg,float *avgovt,float *avggp,
                                float *avgsst,float *avgstt,float *avgnp,float *avgdef);//3.6 AddDetailToAccumulator
void PrintSummaryReport(float pr,float reg,float ovt,float gp,float fedt,float stt,float sst,float def,float np,float avgpr,float avgreg,float avgovt, 
                        float avggp,float avgfedt,float avgstt,float avgsst,float avgdef,float avgnp,FILE * ReportFile); //3.7 PrintSummaryReport
extern void SortByLastName();//3.8 SortByLastName                        

int main()
    {
     EmployeeRecord r; // Call Employee Record Definitions
     float reghours,ovthours; 
     float ft,st,ssit;
     float pr,reg,ovt,gp,fedt,stt,sst,def,np;
     float avgpr,avgreg,avgovt,avggp,avgfedt,avgstt,avgsst,avgdef,avgnp;
     char answer;
     int empCount;
     FILE * ReportFile;

     PrintReportHeadings(ReportFile); //Call 3.1 PrintReportHeadings           
     InitializeAccumulators(&empCount,&pr,&reg,&ovt,&gp,&fedt,&stt,&def,&sst,&np); //3.2 InitializeAccumulators

     do
       {
         InputEmployeeData(r.firstname,r.lastname,&r.payrate,&r.defr,&r.hours);//Call 3.3 InputEmployeeData   
         if (r.hours > 40)//Check for Overtime Hours
           {
             reghours = 40;
             ovthours = r.hours - 40;
           }
         else {
             reghours = r.hours;
             ovthours = 0;
         }
          r.gross = CalculateGross(r.hours,r.payrate,reghours,ovthours); //3.4 CalculateGross
          CalculateTaxes(r.gross,r.defr,&ft,&st,&ssit);//Call 3.5 CalculateTaxes

          r.net = r.gross - ft - st - ssit;// Calculate Net Earnings

          printf(REPORTCOLUMNHEADINGS1);
          printf(REPORTCOLUMNHEADINGS2);
          printf(BARS); 
          printf(REPORTCOLUMN1,r.lastname,r.firstname,r.payrate,reghours,r.gross,ft,ssit,r.net); 
          printf(REPORTCOLUMN2,ovthours,st,r.defr);   
          ReportFile = fopen("report.txt", "a");
          fprintf(ReportFile,REPORTCOLUMN1,r.lastname,r.firstname,r.payrate,reghours,r.gross,ft,ssit,r.net); 
          fprintf(ReportFile,REPORTCOLUMN2,ovthours,st,r.defr); 
          fclose(ReportFile);

          AddDetailToAccumulator(&empCount,&pr,&r.payrate,&reg,&reghours,&ovt,&ovthours,&gp,&r.gross,&fedt,&ft,&stt,&st,&sst,&ssit,
                                 &def,&r.defr,&np,&r.net,&avgpr,&avgfedt,&avgreg,&avgovt,&avggp,
                                &avgsst,&avgstt,&avgnp,&avgdef);//3.6 AddDetailToAccumulator

              while (getchar() != '\n');
              printf(" Repeat (Y/N)? : ");
              scanf("%c",ADDR(answer)); 
        } while (answer == 'Y' || answer == 'y');
            printf("\n"); // print one line for spacing         
       printf("\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",pr,reg,gp,fedt,sst,np); 
       printf("%32.2f%18.2f%8.2f\n",ovt,stt,def);        
       printf("\nAverages %15.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",avgpr,avgreg,avggp,avgfedt,avgsst,avgnp); 
       printf("%32.2f%18.2f%8.2f\n",avgovt,avgstt,avgdef);

       PrintSummaryReport(pr,reg,ovt,gp,fedt,stt,sst,def,np,avgpr,avgreg,avgovt,
                        avggp,avgfedt,avgstt,avgsst,avgdef,avgnp,ReportFile); //Call 3.7 PrintSummaryReport       

        fflush(stdin);
        getchar();
        return 0;
}

void PrintReportHeadings(FILE * ReportFile) //3.1
{
    ReportFile = fopen("report.txt", "w");
    fprintf(ReportFile,REPORTCOLUMNHEADINGS1);
    fprintf(ReportFile,REPORTCOLUMNHEADINGS2);
    fprintf(ReportFile,BARS);
    fclose(ReportFile);
}

void InitializeAccumulators(int * empCount,float * pr, float * reg,float * ovt,float * gp,float * fedt,float * stt,float * def,float * sst,float * np) //3.2 InitializeAccumulators
{
     *empCount = 0;// count initializations 
     *pr = *reg = *ovt = *gp = *fedt = *stt = *def = *sst = *np = 0;
}

void InputEmployeeData(char * firstname,char * lastname, float * payrate, float * defr, float * hours) //3.3
{
     printf("Enter employee's name: ");  // input section
     scanf("%s%s",firstname,lastname);
     printf("Enter hourly pay rate: ");
     scanf("%f",payrate);
     printf("Enter deferred amount: ");
     scanf("%f",defr);
     printf("Enter hours worked this pay period: ");
     scanf("%f",hours);
}

float CalculateGross(float hours, float payrate, float reghours, float ovthours) // 3.4
{
    return (reghours * payrate)+(ovthours * payrate * 1.5);
}

void AddDetailToAccumulator(int *empCount,float *pr,float *payrate,float *reg,float *reghours,float *ovt,float *ovthours,float *gp,
                                float *gross,float *fedt,float *ft,float *stt,float *st,float *sst,float *ssit,float *def,
                                float *defr,float *np,float *net,float *avgpr,float *avgfedt,float *avgreg,float *avgovt,float *avggp,
                                float *avgsst,float *avgstt,float *avgnp,float *avgdef)//3.6
{
         *empCount = *empCount +1;
         *pr = *pr + *payrate;
         *reg = *reg + *reghours;
         *ovt = *ovt + *ovthours;
         *gp = *gp + *gross;
         *fedt = *fedt + *ft; 
         *stt = *stt + *st; 
         *sst = *sst + *ssit;
         *def = *def + *defr;
         *np = *np + *net; 

         *avgpr = *pr / *empCount;
         *avgfedt = *fedt / *empCount; 
         *avgreg = *reg / *empCount;
         *avgovt = *ovt / *empCount;
         *avggp = *gp / *empCount;
         *avgstt = *stt / *empCount;
         *avgsst = *sst / *empCount;
         *avgnp = *np / *empCount;
         *avgdef = *def / *empCount;       
} 

void PrintSummaryReport(float pr,float reg,float ovt,float gp,float fedt,float stt,float sst,float def,float np,float avgpr,float avgreg,float avgovt, 
                        float avggp,float avgfedt,float avgstt,float avgsst,float avgdef,float avgnp,FILE * ReportFile) //3.7
{
     ReportFile = fopen("report.txt", "a");
     fprintf(ReportFile,"\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",pr,reg,gp,fedt,sst,np); 
     fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",ovt,stt,def); 
     fprintf(ReportFile,"\nAverages %15.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",avgpr,avgreg,avggp,avgfedt,avgsst,avgnp); 
     fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",avgovt,avgstt,avgdef);
     fclose(ReportFile);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T04:49:16.843

我建议您使用“结构”将数据组合在一起，使其更具可读性。

例如

```
struct person { 
  char firstname[MAXLENNAME];  
  char lastname[MAXLENNAME]; 
... 
}; 
```

然后当你想使用排序时`qsort`，你创建一个函数来比较 struct person 记录。

# java - 如何定义其键和值强制具有相关层次结构的 Map？

> ID：11733237
> 
> 赞同：1
> 
> 时间：2012-07-31T04:43:47.607
> 
> 标签：java, generics, hierarchy

我有一个名为 Entity 的根类。我还有对实体子类型执行 CRUD 操作的服务类。所以，我的服务类定义遵循这个模式

```
class Entity { 
   //the root class
}

class Service<T extends Entity> {
  //root service class containing common CRUD operations
}

class SomeEntity extends Entity {
}

class SomeService extends Service<SomeEntity> {
} 
```

我维护一个实体类的映射——>到他们相应的服务，比如

```
Map<Class<? extends Entity>, Service<? extends Entity>> = serviceMap
 new HashMap<Class<? extends Entity>, Service<? extends Entity>>(); 
```

但是，上述内容并不强制该类及其对应的 Service 属于同一层次结构。因此，即使在转换之后，我的客户端代码也必须再次转换它。如何避免以下情况？并在 key 和 value 之间强制执行严格的关系？

```
 public <T extends Entity> Service<T> get(Class<T> clazz) {
    return (Service<T>) serviceMap.get(clazz);
    }

    //example of client code
    SomeService service = (SomeService) serviceRegistry.get(SomeEntity.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:56:25.707

不幸的是，你不能做你想做的事。这是不可能的！

但是，您实际上并不需要知道`Service`实现是什么。`Service`应该定义为客户端代码调用提供所有必要的方法。你好多态性！就个人而言，我只是将您的 get 方法稍微更改为：

```
Service<? extends Entity> getService(Class<?> entityClass) {
  return serviceMap.get(entityClass);
} 
```

客户端代码不应该太关心实际的实现：

```
Service<? extends Entity> service = getService(SomeEntity.class);
service.save(myEntity); 
```

另一种选择是，如果您在需要服务时知道实体类型是什么，那么您可以传入`Service`类并将其用于强制转换，例如：

```
<T extends Service<? extends Entity>> T getService(Class<?> entityClass, Class<T> serviceClass) {
  return serviceClass.cast(serviceMap.get(entityClass));
} 
```

诚然，上述方法都不能保证`SomeEntity.class`与`Map`.

# backup - 是否可以使用 SMO 在 SQL Server 2008 R2 Express 上创建备份作业

> ID：11733242
> 
> 赞同：0
> 
> 时间：2012-07-31T04:44:10.610
> 
> 标签：backup, smo, sql-server-2008r2-express, maintenance-plan

在我们的软件中，因为用户使用的是 SQL Server 2008 R2 Express，所以我想使用 SMO API 以编程方式为他们创建备份作业。是否可以？如果可能的话，请向我指出有关此主题的任何文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:10:22.533

由于 Express 版本没有执行作业的 SQL Server 代理 - 不，我认为这是不可能的。

但是，您*可以*创建一个使用 SMO 库执行 SQL Server 备份的独立控制台应用程序，然后使用内置的 Windows 调度程序在您的计算机上安排该控制台应用程序，每天（或每四个小时运行一次）或任何你需要的）

至于 SMO 上的资源 - 请查看以下内容：

*   [SQL Server 2005 中的 SMO 入门](http://www.sqldbatips.com/showarticle.asp?ID=37)
*   [将 SMO 用于备份、恢复和安全目的](http://www.codeproject.com/Articles/14848/Using-SMO-for-Backup-Restore-and-Security-Purposes)

# mutex - 混淆黑白互斥量和信号量

> ID：11733248
> 
> 赞同：0
> 
> 时间：2012-07-31T04:45:11.773
> 
> 标签：mutex, semaphore

我已经从 INTERNET 阅读了有关 mutex 和 semaphore 的信息，但我不清楚这两者的区别。任何人都可以消除混乱吗？请尝试举例说明两者都使用 java 清楚地说明差异。互斥量也与二进制信号量相同吗？

谢谢

# android - 我可以为 Android api-10 (2.3.3) 创建本机 MediaPlayer 吗？

> ID：11733249
> 
> 赞同：0
> 
> 时间：2012-07-31T04:45:14.137
> 
> 标签：android, android-ndk, android-mediaplayer

我可以为 Android api-10 (2.3.3) 创建本机 MediaPlayer 吗？

我需要它，而且我找不到任何低于 api 14 的东西。我有一个应用程序可以播放来自 rtsp 连接的视频流，但该应用程序使我的 CPU 处于 100% 的使用率。而且我认为制作我的应用程序的唯一方法是使用本机 MediaPlayer。我想对了吗？我在哪里可以找到这方面的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:49:51.377

使用[媒体播放器](http://developer.android.com/reference/android/media/MediaPlayer.html)。它在 Android 2.3.3 上完美运行

# iphone - iPhone/iPad 视网膜图像使用首选？

> ID：11733250
> 
> 赞同：0
> 
> 时间：2012-07-31T04:45:19.513
> 
> 标签：iphone, ios, ipad, retina-display

我知道标准图像和视网膜（更高分辨率）图像有一个文件命名约定。这是通过将文件命名为 来实现的`<filename>@2.jpg`，例如。

现在我刚刚在 iPad 模拟器上运行了一个测试，这似乎表明使用更高的分辨率会更好。测试是这样的：我有一张全屏图像和一张视网膜全屏图像。低分辨率图像上只有一个“1”。高分辨率图像上显示“2”。然后我加载了高分辨率图像以填满 iPad 模拟器的整个屏幕。

*   *结果*：似乎整个视网膜图像都显示在屏幕上。
*   *预期结果*：我预计高分辨率图像会被部分裁剪 - 我认为屏幕太小而无法显示整个视网膜图像。

明显的问题：

1.  我的测试是否有缺陷（我是否遗漏了什么）？
2.  如果这个测试可以验证，那么如果我们可以简单地使用retina，为什么还要包括2组图像（标准和视网膜）？我唯一看到的是视网膜图像消耗更多内存，因此对于没有视网膜显示器的设备来说可能太多了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:37:23.763

是否使用视网膜 (@2x) 图像*仅*取决于屏幕的比例因子（每点的像素数量）。iPad 和 iPhone 都有相同的行为。

您永远不会直接参考视网膜图像。相反，您可以通过说来加载它们

```
[UIImage imageNamed:@"myImage"]; 
```

如果您在视网膜显示器上，将为您选择图像的视网膜版本 (myImage@2x.png)。在任何一种情况下，图像都会在屏幕上占据相同数量的*点。*视网膜和非视网膜显示器的*点数*相同。

# .net - VB.NET 添加引用与引用路径（为什么是引用路径？）

> ID：11733251
> 
> 赞同：1
> 
> 时间：2012-07-31T04:45:29.373
> 
> 标签：.net, vb.net, visual-studio

在我之前的 C# 工作中，引用其他程序集的方法是通过将程序集的项目添加到您自己的解决方案中来完成，或者如果您不想使解决方案太大，则直接在通用构建输出文件夹中引用 .dll。通过运行构建脚本或构建构建所有常见 .dll 的核心解决方案，将程序集写入此输出文件夹。

在我现在使用 VB.NET 的地方，团队采用了第二个选项（尽管他们将通用 .dll 检入到源代码控制中，而不是构建到输出文件夹中……那是另一天）。

然而，当他们在引用文件夹中引用这些 .dll 时，他们通常不会通过 Visual Studio（此处为 2008）中的“添加引用”选项来执行此操作，而是在项目对话框中选择“引用”->“引用路径”并添加此公共引用文件夹在那里。此参考文件夹被写入 .user 文件：它不是项目的一部分，因此每次您从源代码管理中获得干净的代码时，您都必须在每个项目上重新设置它。

现在，没有人可以向我解释为什么要这样做……这只是他们一直这样做的方式。这对我来说似乎很愚蠢，但也许有一些理由这样做？为什么这个选项可用，为什么有人会选择像这样添加参考路径？

谢谢！

# caching - Symfony 中会话超时时为其他操作缓存的登录模板

> ID：11733252
> 
> 赞同：0
> 
> 时间：2012-07-31T04:45:38.360
> 
> 标签：caching, login, symfony1, routing, symfony-1.4

我正在使用带有 sfGuardDoctrinePlugin 的 Symfony 1.4。问题是：

*   假设当前页面 URL 是 www.pg.com/blog/edit.php
*   现在会话超时，我单击博客索引链接
*   这会重定向到 www.pg.com/blog 但由于我需要登录，所以 login_module 和 login_action 的模板在同一个 URL (www.pg.com/blog) 上提供
*   登录后，用户被带到博客索引（或者即使用户单击该链接），登录模板也会被提供，因为它是为“博客/索引”缓存的。

我怀疑在 sfAuth 插件的某个地方，有一个转发而不是重定向，它在另一个页面 URL 上提供登录模板。**我怎样才能防止这种情况？**

**编辑：**我什至知道它发生的地方，但我不想修改 Symfony 源代码。我可以在外面做吗？

```
Jul 31 10:02:59 symfony [info] {sfBasicSecurityFilter} Action "blog/index" requires authentication, forwarding to "sfGuardAuth/signin" 
```

用户必须等待相当长的时间或清除缓存以避免这种情况。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:55:21.980

转发由`sfBasicSecurityFilter`过滤器完成。如果要将转发更改为重定向，则必须`forwardToLoginAction`在自己的安全过滤器中覆盖：

```
class mySecurityFilter extends sfBasicSecurityFilter
{

   protected function forwardToLoginAction()
   {
       $this->getContext()->getController()->redirect(sfConfig::get('sf_login_module') . '/' . sfConfig::get('sf_login_action'));
       throw new sfStopException();
   }
 } 
```

# c# - ProductName 隐藏 System.Windows.Forms.Control.ProductName

> ID：11733253
> 
> 赞同：1
> 
> 时间：2012-07-31T04:45:45.057
> 
> 标签：c#, winforms, inheritance, warnings

我的表单中有一个属性 ProductName。我在编译代码时收到警告。

`FormInventory.ProductName`隐藏继承的成员 ' `System.Windows.Forms.Control.ProductName'`。如果打算隐藏，请使用 new 关键字。

下面是我的代码

```
public partial class FormInventory : Form, IInventoryView
{
   public FormInventory()
   {
   } 

   public string ProductName
   {
      get { return this.textProductName.text; }
      set { this.textProductName.text = value; }
   }
} 
```

`textProductName`是一个文本框。

我知道这`ProductName`隐藏了基类的属性`Forms.Control.ProductName`。我的问题是

1.  是否可以在不重命名我的`FormInventory.ProductName`属性的情况下抑制警告

2.  我目前处于开发初期，如果我用`new`修饰符隐藏这个属性，在发布产品时会有什么问题，因为基础属性`Forms.Control.ProductName`返回的是包含控件的程序集的产品名称。当我`FormInventory.ProductName` 返回用户输入的值时。

3.  我们将在哪里使用它`Forms.Control.ProductName`，因为我以前从未使用过它。

我已经搜索并发现了类似的问题

*   [实体框架隐藏继承的成员警告](https://stackoverflow.com/questions/7973478/entity-framework-hides-inherited-member-warning)
*   [如果打算隐藏，请使用新关键字](https://stackoverflow.com/questions/451035/use-new-keyword-if-hiding-was-intended)

这些问题并没有解决我的问题，但帮助我理解了警告的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:03:21.040

如果 ProductName 是您打算在表单上显示的表单字段，为什么不将所有属性字段抽象为单独的 Product 实体。这应该可以简化您的应用程序的维护（并使其更符合 MVC / MVVM 等模式），例如

```
public class Product
{
     public string ProductName{ get; set; }
     public int ProductSize{ get; set; }
     // etc
}

public partial class FormInventory : Form
{
   public FormInventory()
   {
   } 

   public Product Product
   {
      get;
      set;
   }
} 
```

**编辑 ：**

IMO，Rod Cerata 的博客提出的架构看起来不错，但我相信它会通过为您的 Employee 封装“ViewModel”来改进。

看看 EmployeePresenter.cs - 你会得到很多像这样的重复抓取代码：

```
 _model.EmployeeID = _view.EmployeeID;
        _model.Lastname = _view.Lastname;
        _model.Firstname = _view.Firstname;
        _model.EmployeeType = _view.EmployeeType;
        _model.Salary = _view.Salary;
        _model.TAX = _view.TAX; 
```

IMO 将通过创建一个新的 EmployeeViewModel 类（它或多或少与 EmployeeModel 相同，加上任何“屏幕”特定字段，例如标题、“模式”（编辑、新建、只读等），然后使用工具来改进像 AutoMapper，它会减少上面的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:58:37.010

**1.**是的，只需使用`new`关键字，例如`public new string ProductName { get; set; }`

**2.**不，它只是返回[程序集的名称](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.productname.aspx)。

**3.**它用于调试和一些“反思”。我说“反射”是因为它更像是人为的反射。

所以，这样往前走是安全的。但是你为什么不简单地把它改成`MyCompanyProductName`?

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T05:00:30.280

使用 'new' 关键字将抑制警告。执行此操作时，调用 ProductName 属性的结果取决于用于引用表单的变量的类型...例如，如果您从另一个类调用该属性：

```
// Notice that we're only creating one object and
// assigning it to two different variables.
FormInventory explicitlyNameForm = new FormInventory();
Form referenceToBaseForm = explicitlyNameForm;

// Acting on the child reference (FormInventory) will
// operate on YOUR implementation of ProductName
explicitlyNameForm.ProductName = "Some Value";

// But acting on the parent reference (Form) will
// operate on the .NET implementation of ProductName
referenceToBaseForm.ProductName = "Some Other Value"; 
```

最终结果可能是您想要的……编译器根据您声明变量的方式知道要使用哪个实现。由于 .NET 框架内的所有引用都引用 Form 类，而不是您的新类，因此不会影响 .NET 框架内发生的与此属性相关的任何事情。

但是，正如其他人所建议的那样，如果您能够重命名该属性，则可能会减少混乱。

# java - 如何在 Java 中解决这个“非静态变量”问题？

> ID：11733255
> 
> 赞同：2
> 
> 时间：2012-07-31T04:46:01.353
> 
> 标签：java, interface

```
public class InterfaceTest {
    interface  InterfaceA {
         int  len =  1 ;
         void  output();
    }

    interface  InterfaceB {
           int  len =  2 ;
           void  output();
    }

    interface  InterfaceSub  extends  InterfaceA, InterfaceB {            }

    public class Xyz implements  InterfaceSub {

         public   void  output() {
            System.out.println( "output in class Xyz." );
        }

          public   void  outputLen(int  type) {
              switch (type) {
                      case  InterfaceA.len:
                             System.out.println( "len of InterfaceA=." +type);
                              break ;
                      case  InterfaceB.len:
                             System.out.println( "len of InterfaceB=." +type);
                              break ;
             }
        }
    }

    public   static   void  main(String[] args) {
           Xyz xyz = new Xyz();
           xyz.output();
           xyz.outputLen(1);
   }
} 
```

你好，我想学习Java的接口和多继承概念。我找到了上面的代码并尝试编译它，但出现以下错误。我不知道如何使代码工作，谁可以帮忙？谢谢！

```
test$ javac InterfaceTest.java 
InterfaceTest.java:33: error: non-static variable this cannot be referenced from a static context
           Xyz xyz = new Xyz();
                     ^
1 error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T04:50:36.207

这是因为非静态内部类无法在静态方法中实例化，因为它没有可使用的封闭类的实例。

如果将 Xyz 定义为静态内部类，它应该可以工作：

```
public static class Xyz implements InterfaceSub {
  ....
} 
```

或者，您可以在封闭类的实例中创建 Xyz - 这里不需要，但如果 Xyz 需要访问封闭类的某些成员变量，则需要这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T04:49:17.630

代替

```
Xyz xyz = new Xyz(); 
```

和

```
 Xyz xyz = new InterfaceTest().new Xyz(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T04:48:28.020

您需要在 InterfaceTest 之外定义 Xyz（或更改它的可见性）。

# python - 匹配 Python 整数文字的正则表达式

> ID：11733262
> 
> 赞同：3
> 
> 时间：2012-07-31T04:47:06.973
> 
> 标签：python, regex

什么是匹配字符串中任何有效的 Python 整数文字的正则表达式？它应该支持所有额外的东西，比如`o`and `l`，但不匹配浮点数或其中包含数字的变量。我正在使用 Python 的`re`，所以它支持的任何语法都可以。

**编辑**：这是我的动机（显然这很重要）。我正在尝试修复[http://code.google.com/p/sympy/issues/detail?id=3182](http://code.google.com/p/sympy/issues/detail?id=3182)。我想要做的是为 IPython 创建一个钩子，它自动将 int/int (like `1/2`) 转换为`Rational(int, int)`, (like `Rational(1, 2)`。原因是否则不可能`1/2`注册为有理数，因为它是 Python 类型的`__div__`Python 类型。在SymPy，这可能很烦人，因为当你想要的是一个精确的数量 时，`x**(1/2)`会创建`x**0`（或`x**0.5`使用除法或 Python 3）之类的东西。`__future__``x**Rational(1, 2)`

我的解决方案是在 IPython 中添加一个钩子，该钩子会自动将输入中的所有整数文字包装为 Integer（SymPy 的自定义整数类，`Rational`用于除法）。这将让我添加一个选项`isympy`，让 SymPy 在这方面更像一个传统的计算机代数系统，对于那些想要它的人来说。我希望这可以解释为什么我需要它来匹配任意 Python 表达式中的任何和所有文字，这就是为什么它不需要匹配名称中带有数字的浮点文字和变量。

另外，由于每个人都对我尝试的内容如此感兴趣，所以这里是：在我放弃之前没有多少（正则表达式很难）。我试着`(?!\.)`让它不捕捉浮点文字的第一部分，但这似乎不起作用（如果有人能告诉我为什么，我会很好奇，一个例子是`re.sub(r"(\d*(?!\.))", r"S\(\1\)", "12.1")`）。

**编辑 2**`re.sub` ：由于我打算将它`\1`与

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T04:55:14.887

[整数字面](http://docs.python.org/py3k/reference/lexical_analysis.html#integer-literals)量的定义是（在 3.x 中，在 2.x 中略有不同）：

```
integer        ::=  decimalinteger | octinteger | hexinteger | bininteger
decimalinteger ::=  nonzerodigit digit* | "0"+
nonzerodigit   ::=  "1"..."9"
digit          ::=  "0"..."9"
octinteger     ::=  "0" ("o" | "O") octdigit+
hexinteger     ::=  "0" ("x" | "X") hexdigit+
bininteger     ::=  "0" ("b" | "B") bindigit+
octdigit       ::=  "0"..."7"
hexdigit       ::=  digit | "a"..."f" | "A"..."F"
bindigit       ::=  "0" | "1" 
```

所以，像这样：

```
[1-9]\d*|0|0[oO][0-7]+|0[xX][\da-fA-F]+|0[bB][01]+ 
```

* * *

基于说你想支持“l”，我猜你实际上想要[2.x 定义](http://docs.python.org/reference/lexical_analysis.html#integer-and-long-integer-literals)：

```
longinteger    ::=  integer ("l" | "L")
integer        ::=  decimalinteger | octinteger | hexinteger | bininteger
decimalinteger ::=  nonzerodigit digit* | "0"
octinteger     ::=  "0" ("o" | "O") octdigit+ | "0" octdigit+
hexinteger     ::=  "0" ("x" | "X") hexdigit+
bininteger     ::=  "0" ("b" | "B") bindigit+
nonzerodigit   ::=  "1"..."9"
octdigit       ::=  "0"..."7"
bindigit       ::=  "0" | "1"
hexdigit       ::=  digit | "a"..."f" | "A"..."F" 
```

可以写成

```
(?:[1-9]\d+|0|0[oO]?[0-7]+|0[xX][\da-fA-F]+|0[bB][01]+)[lL]? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T04:53:42.230

[http://docs.python.org/reference/lexical_analysis.html#integers](http://docs.python.org/reference/lexical_analysis.html#integers)中描述了语法。这是将其表示为正则表达式的一种方法：

```
(0|[1-9][0-9]*|0[oO]?[0-7]+|0[xX][0-9a-fA-F]+|0[bB][01]+)[lL]? 
```

免责声明：这不支持负整数，因为在 Python 中，`-`in 之类的东西`-31`实际上并不是整数文字的一部分，而是一个单独的运算符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T07:58:50.647

我不相信使用 re 是要走的路。Python 具有`tokenize`、和模块`ast`，可用于解析/处理/操作/重写 Python 代码...`symbol``parser`

```
>>> s = "33.2 + 6 * 0xFF - 0744"
>>> from StringIO import StringIO
>>> import tokenize
>>> t = list(tokenize.generate_tokens(StringIO(s).readline))
>>> t
[(2, '33.2', (1, 0), (1, 4), '33.2 + 6 * 0xFF - 0744'), (51, '+', (1, 5), (1, 6), '33.2 + 6 * 0xFF - 0744'), (2, '6', (1, 7), (1, 8), '33.2 + 6 * 0xFF - 0744'), (51, '*', (1, 9), (1, 10), '33.2 + 6 * 0xFF - 0744'), (2, '0xFF', (1, 11), (1, 15), '33.2 + 6 * 0xFF - 0744'), (51, '-', (1, 16), (1, 17), '33.2 + 6 * 0xFF - 0744'), (2, '0744', (1, 18), (1, 22), '33.2 + 6 * 0xFF - 0744'), (0, '', (2, 0), (2, 0), '')]
>>> nums = [eval(i[1]) for i in t if i[0] == tokenize.NUMBER]
>>> nums
[33.2, 6, 255, 484]
>>> print map(type, nums)
[<type 'float'>, <type 'int'>, <type 'int'>, <type 'int'>] 
```

[在http://docs.python.org/library/tokenize.html](http://docs.python.org/library/tokenize.html)有一个示例，它将浮点数重写为`decimal.Decimal`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T06:19:04.737

如果你真的想匹配两种“方言”，你会得到一些歧义，例如八进制（`o`Python 3 中需要）。但以下应该有效：

```
r = r"""(?xi) # Verbose, case-insensitive regex
(?<!\.)       # Assert no dot before the number
\b            # Start of number
(?:           # Match one of the following:
 0x[0-9a-f]+| # Hexadecimal number
 0o?[0-7]+|   # Octal number
 0b[01]+|     # Binary number
 0+|          # Zero
 [1-9]\d*     # Other decimal number
)             # End of alternation
L?            # Optional Long integer
\b            # End of number
(?!\.)        # Assert no dot after the number""" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T05:27:23.317

这样的事情就足够了吗？

```
r = r"""
(?<![\w.])               #Start of string or non-alpha non-decimal point
    0[X][0-9A-F]+L?|     #Hexadecimal
    0[O][0-7]+L?|        #Octal
    0[B][01]+L?|         #Binary
    [1-9]\d*L?           #Decimal/Long Decimal, will not match 0____
(?![\w.])                #End of string or non-alpha non-decimal point
""" 
```

（带旗帜`re.VERBOSE | re.IGNORECASE`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T05:00:41.157

这非常接近：

```
re.match('^(0[x|o|b])?\d+[L|l]?$', '0o123l') 
```

# android - 从联系人中获取所有电话号码

> ID：11733264
> 
> 赞同：0
> 
> 时间：2012-07-31T04:47:45.797
> 
> 标签：android, phone-number

我使用以下代码从联系人中检索所有电话号码。

```
Cursor c = context.getContentResolver().query(
                        Data.CONTENT_URI,
                        new String[] { Phone.NUMBER },
                        Data.MIMETYPE + "='" +     Phone.CONTENT_ITEM_TYPE
                                + "'", null, null); 
```

它在我的 Android 手机中完美运行。

但是有些用户说我的应用程序没有从联系人那里获取所有电话号码，而只是其中的一部分。我无法弄清楚原因..为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:26:33.157

这将获取包含基本联系人数据的光标，并将循环访问联系人拥有的电话号码，可以有多个。

```
Uri uri = data.getData();

Cursor cursor=ctx.getContentResolver().query(uri, null, null, null, null);

while (cursor.moveToNext()) { 
   String contactId = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID)); 
   String hasPhone = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)); 

   if (Boolean.parseBoolean(hasPhone)) { 
                    // You know have the number so now query it like this
    Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
          null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId, 
          null, null); 

        while (phones.moveToNext()) { 
           String phoneNumber = phones.getString( 
                  phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));                 
        } 
        phones.close(); 
    } 
 } 
```

# php - 字段“x”没有默认值

> ID：11733266
> 
> 赞同：1
> 
> 时间：2012-07-31T04:48:03.770
> 
> 标签：php, mysql

我收到一个错误`CDbCommand failed to execute the SQL statement: SQLSTATE[HY000]: General error: 1364 Field 'editedbyid' doesn't have a default value.`执行的 SQL 语句是：

```
INSERT INTO `pos` (`serialnumber`, `posmodelid`, `active`, `created`, `updated`, `forapproval`, `approvedbyid`) VALUES (:yp0, :yp1, 1, NOW(), :yp2, :yp3, :yp4)" 
```

我正在使用 MySQL、PHP 和 uii 框架。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T04:53:08.747

数据库表中的字段`editedbyid`没有配置默认值。

因此，在插入新行时，数据库引擎不知道它必须为该`editedbyid`字段设置哪个值。

可能的解决方案是：

**1.设置默认值：**

以 phpmyadmin 为例，选择`pos`表，为“editedbyid”字段输入默认值。

**2\. 为“editedbyid”字段插入一个值：**

```
INSERT INTO `pos` (`serialnumber`, `posmodelid`, `active`, `created`, `updated`, `forapproval`, `approvedbyid`, `editedbyid`) VALUES (:yp0, :yp1, 1, NOW(), :yp2, :yp3, :yp4, 0)" 
```

**编辑**：另请阅读有关默认值的[问题和答案。](https://stackoverflow.com/questions/8558260/what-is-the-default-value-for-a-field-if-no-default-value-is-provided)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-31T19:42:43.440

也许尝试运行 SET GLOBAL sql_mode='' 或编辑您的 my.cnf 以确保您没有设置 STRICT_ALL_TABLES 等。Yii 问题

# java - 按功能打包好不好？

> ID：11733267
> 
> 赞同：57
> 
> 时间：2012-07-31T04:48:03.777
> 
> 标签：java, spring, jakarta-ee, package-design

最近我遇到了这个 javalobby 帖子[http://java.dzone.com/articles/how-chang-java-package](http://java.dzone.com/articles/how-changing-java-package)按功能打包 java 代码。

我喜欢这个主意，但我对这种方法几乎没有疑问。我问了我的问题，但没有得到满意的答复。我希望 StackOverflow 上的人可以澄清我的问题。

我喜欢按功能打包的想法，它大大减少了在编码时跨包移动的时间，所有相关的东西都将放在一个地方（包）。但是不同包中的服务之间的交互呢？

假设我们正在构建一个博客应用程序，并且我们将所有与用户相关的操作（控制器/服务/存储库）放在`com.mycompany.myblog.users`包中。以及包中所有与博客文章相关的操作（控制器/服务/存储库）`com.mycompany.myblog.posts`。

现在我想显示用户个人资料以及他发布的所有帖子。我应该打电话`myblog.posts.PostsService.getPostsByUser(userId)`吗`myblog.users.UserController.showUserProfile()`？

包之间的耦合呢？

同样，无论我在哪里阅读按功能打包的信息，每个人都说这是一个很好的做法。那么为什么很多书籍作者甚至框架都鼓励分层分组呢？只是想知道:-)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-31T07:04:40.350

Take a look at uncle Bob's [Package Design Principles](https://web.archive.org/web/20171219114143/http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod). He explains reasons and motivations behind those principles, which I have elaborated on below:

Classes that get reused together should be packaged together so that the package can be treated as a sort of complete product available for you. And those which are reused together should be separated away from the ones those are not reused with. For example, your Logging utility classes are not necessarily used together with your file io classes. So package all logging them separately. But logging classes could be related to one another. So create a sort of complete product for logging, say, for the want of better name commons-logging package it in a (re)usable jar and another separate complete product for io utilities, again for the want of better name, say commons-io.jar. If you update say commons-io library to say support java nio, then you may not necessarily want to make any changes to the logging library. So separating them is better.

Now, let's say you wanted your logging utility classes to support structured logging for say some sort of log analysis by tools like splunk. Some clients of your logging utility may want to update to your newer version; some others may not. So when you release a new version, package all classes which are needed and reused together for migration. So some clients of your utility classes can safely delete your old commons-logging jar and move to commons-logging-new jar. Some other clients are still ok with older jar. However no clients are needed to have both these jars (new and old) just because you forced them to use some classes for older packaged jar.

Avoid cyclic dependencies. a depend on b; b on c; c on d; but d depends on a. The scenario is obviously deterring as it will be very difficult to define layers or modules, etc and you cannot vary them independly relative to each other.

Also, you could package your classes such that if a layer or module changes, other module or layers do not have to change necessarily. So, for example, if you decide to go from old MVC framework to a rest APIs upgrade, then only view and controller may need changes; your model does not.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-31T04:58:40.453

除了包装设计的耦合之外，我建议查看 OOAD 原则，尤其是包装设计原则，例如

**REP 发布重用等效原则** 重用的粒度就是发布的粒度。

**CCP 共同封闭原则** 一起变化的类被打包在一起。

**CRP 将** 一起使用的公共重用原则类打包在一起。

**ADP 非循环依赖原则** 包的依赖图必须没有循环。

**SDP 稳定依赖原则**依赖于稳定的方向。

**SAP 稳定抽象原则**抽象随着稳定性而增加。

有关更多信息，您可以阅读[《](https://rads.stackoverflow.com/amzn/click/com/0135974445)敏捷软件开发、原则、模式和实践》一书

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-31T05:02:50.940

I personally like the "package by feature" approach, although you do need to apply quite a lot of judgement on where to draw the package boundaries. It's certainly a feasible and sensible approach in many circumstances.

You should probably achieve coupling between packages and modules using public interfaces - this keeps the coupling clean and manageable.

It's perfectly fine for the "blog posts" package to call into the "users" package as long as it uses well designed public interfaces to do so.

One big piece of advice though if you go down this approach: be very thoughtful about your dependencies and in particular *avoid circular dependencies* between packages. A good design should looks like a dependency tree - with the higher level areas of functionality depending on a set of common services which depend upon libraries of utility functions etc. To some extent, this will start to look like architectural "layers" with front-end packages calling into back-end services.

# emacs - 如何在emacs中自动加载菜单栏

> ID：11733268
> 
> 赞同：0
> 
> 时间：2012-07-31T04:48:19.263
> 
> 标签：emacs, yasnippet

我已经在我的 emacs 中安装了 YaSnippet。每次启动emacs都要通过mx menu-bar-mode手动开启菜单栏，默认怎么加载？

同样奇怪的是，YaSnippet 菜单在菜单栏第一次出现时出现，但是在我移动到另一个缓冲区并返回后，我再也看不到菜单了！如何在不重新启动 emacs 的情况下恢复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:52:05.370

在 emacs 中默认加载菜单栏。因此，如果您必须在每个缓冲区中打开，则意味着您已在 init 文件中禁用它。删除会说类似`(menu-bar-mode 0)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:57:38.573

要`menu-bar-mode`自动启动，只需`(menu-bar-mode 1)`输入您的`~/.emacs`

恐怕你的 yasnippet 问题超出了我的知识范围:(

# xaml - 关闭或重新启动 Windows 8 时的事件检测

> ID：11733269
> 
> 赞同：1
> 
> 时间：2012-07-31T04:48:23.323
> 
> 标签：xaml, windows-8, microsoft-metro, application-shutdown, application-restart

我正在开发 Windows 8 Metro 风格的应用程序。我想在发生意外事件（例如关机或重新启动）时显示保存确认消息，并阻止 Windows 执行该事件。但是，我没有找到任何适合我需要的处理程序事件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:20:44.747

通常，Windows 应用程序可以通过使用 FALSE 响应[WM_QUERYENDSESSION](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376890%28v=vs.85%29.aspx)消息来防止关闭（有时）。但是，无法从 Metro 风格应用程序中获取[WindowProc消息。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633573%28v=vs.85%29.aspx)在 Metro 风格应用程序中您能做的最好的事情就是在您的应用程序中正确[处理 Suspending](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)事件（这当然不会阻止关闭）。

# version-control - 如何实现这个 Mercurial+BitBucket 工作流程？

> ID：11733271
> 
> 赞同：4
> 
> 时间：2012-07-31T04:48:29.573
> 
> 标签：version-control, mercurial, open-source, dvcs, bitbucket

我是 DVCS 的新手，所以请多多包涵……

我是一个软件库的作者，目前在 BitBucket 上作为私有存储库托管。我想向公众发布我的库的源代码，但设置如下：

*   我想在 BitBucket 上维护两个存储库，一个是私有的，一个是公共的。
*   我希望公共存储库的初始内容是私有存储库的当前内容，**没有任何历史**。
*   我想继续在不接触公共存储库的情况下向私有存储库提交。然后，偶尔，我想将一大堆提交提交到私有存储库，并将它们**作为单个变更集**推送到公共存储库，并**带有自己的提交消息**。

我怎样才能做到这一点？如果有帮助，我的私人仓库只有一个分支（主要分支）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:08:37.917

这很容易做到。我会创建一个“发布”分支，并在您想要推送到公共仓库时合并到该分支中。然后使用 convert 扩展只提取这个分支。

然而，像这样工作几乎从来都不是一个好主意。潜在的贡献者通常不想忍受闭门造车的发展。对于开源工作，通常最好打开所有内容——错误跟踪器、源代码库、wiki、邮件列表、评论……</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T11:43:45.423

### 连接变更集

好吧，可以使用其中一种[技术](http://mercurial.selenic.com/wiki/ConcatenatingChangesets)或使用[.rebase 扩展](http://mercurial.selenic.com/wiki/RebaseExtension)来实现连接变更集`--collapse`。

### 分支结构

要执行您想要的操作，您必须有一个包含详细提交的开发分支和一个包含串联提交的发布分支。只要发布分支没有来自开发分支的任何节点作为祖先，您就可以只推送发布分支。这意味着您必须使用上述选项之一，您不能将开发分支合并到发布分支，因为这会将开发分支节点设置为公共分支的祖先，并且您必须推送这些节点。

### 争议

虽然这是可能的，但我同意@Ringding，它不应该是常规工作流程。以下是不这样做的两个很好的理由：

1.  您正在为您的工作流程增加不必要的复杂性，事情应该更简单。
2.  这些开发变更集是导致最终版本的演进步骤，它们是历史的一部分，隐藏起来就像撒谎一样。这就是为什么历史编辑工具是扩展而不是核心命令的原因，它们不应该成为正常工作流程的一部分。

# forms - 使用 Google 站点/脚本：将输入值从表单发送到支持电子邮件地址

> ID：11733274
> 
> 赞同：1
> 
> 时间：2012-07-31T04:48:54.080
> 
> 标签：forms, email, google-apps-script, google-sites

*免责声明-我是初学者。如果这里没有简单的答案，我会很乐意复习正确的教程等。但我已经找了几天了，我不太明白。*

用例：

**答：**访问者查看 Google 网站
**我想：**填写表格并选择提交
**这样：**输入的信息将填充到电子邮件中并发送到特定地址。

我做了什么：

*   创建 emailForm.html：

    ```
    <html>
     <body>
      <script>google.script.run.processForm(document.getElementById('myForm'));
      </script>
      <div> 
       <form id='myForm'>
        Subject:<input name='emailSubject' type='text'>
        <br><br>
        Body: <textarea name='emailBody' type='text'></textarea>
        <br><br>
        Add an Attachment: <input name='emailFile' type='file'>
        <br>
         <input type='button' value="Submit ZD Ticket" onclick='google.script.run.formSubmitReply()'>
        </form>
       </div>
      </body>
     </html> 
    ```

*   创建了 sendEmail.gs：（注意：脚本不完整。我已添加我的评论）

    ```
    function doGet() {  // This function creates the form on the google site for the customer to use

    return HtmlService.createHtmlOutputFromFile('emailForm.html')

    }

    function formSubmitReply() {   // This function is ran on the "Submit" button is selected and sends the email

    var subject = // ?? HELP: In a perfect world, it would be as easy as HtmlOuput.getInput('emailSubject')
    var body = // ?? HELP: In a perfect world, it would be as easy as HtmlOuput.getContent('emailBody')
    var attachment = // ?? HELP: In a perfect world, it would be as easy as HtmlOuput.getContent('emailFile') 
    MailApp.sendEmail ('support@support.com', 'subject, body + attachment,                  
                {name:'Support Request'});
    } 
    ```

    ​</p>

我的假设：

*   我认为我不需要访问任何数据库，并且我试图避免使用 Google 电子表格。我只想将输入值直接从表单发送到电子邮件地址。
*   我阅读了一篇建议记录表单值然后调用它的教程。但我不知道如何从表单中调用适当的输入或将这些输入添加到电子邮件中。教程中的示例函数：

    ```
    function processForm(theForm) {
    Logger.log(  // What goes here?
    );
    } 
    ```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:35:19.810

您需要将表单从您的客户端代码传递给调用。您可以使用 document.getElementById 检索表单，或者简单地利用按钮的父级是表单这一事实，因此您可以通过 this.parentNode 引用它。尝试像这样更改html：

> onclick='google.script.run.formSubmitReply( **this.parentNode** )'

然后在您的服务器代码中，您可以使用它：

```
function formSubmitReply(theForm) {
  var subject = theForm.emailSubject;
  var body = theForm.emailBody;
  var file = theForm.emailFile;
  MailApp.sendEmail ('support@support.com', subject, body, {attachments: file});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:16:08.217

当你有一个表单时，提交会转到一个 URL，所以这就是你必须做的

1.  修改表单代码，以便您
2.  在您的应用程序脚本代码中编写一个 doPost(e) 方法 - 这是您发送电子邮件的地方。
3.  将您的脚本发布为 Web 应用程序并获取 URL，并将步骤 1 中的 someURL 替换为 Web 应用程序的 URL。

# setup-project - 为现有的 exe 文件创建设置

> ID：11733275
> 
> 赞同：1
> 
> 时间：2012-07-31T04:49:03.847
> 
> 标签：setup-project, installshield-2010

我想为现有的 .exe 文件创建设置。该文件需要一些 .ocx 和 .dll 文件才能正确运行。所以这个提到的设置应该将这些所有文件粘贴到指定的路径中，然后运行 ​​.exe 文件。

我已经尝试过 installshield 2010 basic 和 InstallScript 项目，但我无法以我想要的格式创建一些对话框。

有没有办法创建这个设置？或者任何人都可以帮助我使用 installshield？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:09:15.243

您可能会发现使用另一个安装程序更容易，请尝试[NSIS（Nullsoft Scriptable Install System）](http://nsis.sourceforge.net/Main_Page)。它有一个 RegDLL 函数：

RegDLL "$WINDIR\OCX\vbalGrid6.ocx"

如果你也需要。

# iphone - 处理 iphone/ipad 图像旋转的正确方法是什么？

> ID：11733279
> 
> 赞同：3
> 
> 时间：2012-07-31T04:49:50.463
> 
> 标签：iphone, ios, device-orientation, landscape-portrait, orientation-changes

我有两张图片，一张是纵向模式，另一张是横向模式。发生移动设备视图旋转时切换这些图像的最佳方式是什么？

目前我只显示肖像图像。当设备旋转到横向模式时，纵向图像被简单地拉伸。

我是否应该在方向旋转处理程序中检查并简单地将图像重置为正确的方向图像（即根据方向手动设置）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:43:02.243

我找到了三种方法。我认为最后一种更好

1：**自动调整大小**

例子：

```
UIImageView *myImageView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourImage.png"]];    
myImageView.frame = self.view.bounds;
myImageView.autoresizingMask=UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight
myImageView.contentMode = UIViewContentModeScaleAspectFill;    
[self.view addSubview:myImageView]; 
[imageView release]; 
```

2：**CGAffineTransformMakeRotation**

例子：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
                                        duration:(NSTimeInterval)duration {
  if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) {        
                myImageView.transform = CGAffineTransformMakeRotation(M_PI / 2);
  }
  else if (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight){
                myImageView.transform = CGAffineTransformMakeRotation(-M_PI / 2);
  }
  else {
             myImageView.transform = CGAffineTransformMakeRotation(0.0);
  }
} 
```

3：**在 Interface Builder 中将 myImageView 的自动调整大小设置为自动填充屏幕**

例子：

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
if((self.interfaceOrientation == UIDeviceOrientationLandscapeLeft) || (self.interfaceOrientation == UIDeviceOrientationLandscapeRight)){
    myImageView.image = [UIImage imageNamed:@"myImage-landscape.png"];
} else  if((self.interfaceOrientation == UIDeviceOrientationPortrait) || (self.interfaceOrientation == UIDeviceOrientationPortraitUpsideDown)){
    myImageView.image = [UIImage imageNamed:@"myImage-portrait.png"];
} } 
```

[在此处](https://stackoverflow.com/questions/4253623/ipad-iphone-multiple-orientations-best-practice)查看更多解决方案

developer.apple 解决方案在[这里](http://developer.apple.com/library/ios/#qa/qa1588/_index.html)

# jquery - FireFox 中带有 YouTube 电影的 Fancybox 并未完全关闭 - 请参阅演示

> ID：11733280
> 
> 赞同：0
> 
> 时间：2012-07-31T04:49:57.643
> 
> 标签：jquery, firefox, youtube, fancybox

窗口关闭，但电影仍在后台播放。

当您关闭并回忆起幻想时，您可以看到电影继续播放。

请参阅此链接和演示（单击 YouTube 小图标）：

[http://reference.xarray.org.uk/pages.php/fancy-problem-jp-59](http://reference.xarray.org.uk/pages.php/fancy-problem-jp-59)

[已编辑：现在上面的链接行为正确-问题已解决-请参阅：底部的答案]

有谁知道如何补救？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:58:53.090

在 fancybox 初始化脚本中添加以下行：

```
callbackOnClose: function() { 
    $("#fancy_content").empty(); 
} 
```

**或者**

```
callbackOnClose: function() { 
    $("#fancy_content").html(" "); 
} 
```

**示例 1：** `$("#fancy_content").empty();`

```
 $("a[rel=fancybox], .fancybox").fancybox({ 
  'overlayShow'     : false, 
  'zoomSpeedIn'     : 600, 
  'zoomSpeedOut'      : 500, 
  'easingIn'        : 'easeOutBack', 
  'easingOut'       : 'easeInBack', 
  callbackOnClose: function() { 
    $("#fancy_content").empty(); 
  } 
}); 
```

**示例 2：** `$("#fancy_content").html(" ");`

```
 $("a[rel=fancybox], .fancybox").fancybox({ 
  'overlayShow'     : false, 
  'zoomSpeedIn'     : 600, 
  'zoomSpeedOut'      : 500, 
  'easingIn'        : 'easeOutBack', 
  'easingOut'       : 'easeInBack', 
  callbackOnClose: function() { 
    $("#fancy_content").html(" "); 
  } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:03:44.523

好的..经过一些研究..就在这里。

而不是直接调用 swf 对象：

```
<a class="fancy_freehand" href="#myId" rel="fancybox" style="outline-style: none; text-decoration: none; "><img alt="" src="/images/user/jmvc_yt .png" /></a></p>
<div style="display:none;">
  <div id="yEJw" style="width:auto; height:auto;">
    <object data="http://www.youtube.com/v/a2RA0vsZXf8?fs=1&autoplay=1&hd=1" height="576" id="close_player" type="application/x-shockwave-闪光“宽度=“1024”>
      <param name="movie" value="http://www.youtube.com/v/a2RA0vsZXf8?fs=1&autoplay=1" />
      <param name="allowFullScreen" value="true" />
      <param name="allowscriptaccess" value="always" />
      <param name="wmode" value="透明" />
    </对象>
 </div>
</div>

```

...最好将荣誉归功于精美的盒子作者并以他（他们）的方式去做（注意：'iframe'类）：

```
<a class="fancy_freehand iframe" href="http://www.youtube.com/embed/a2RA0vsZXf8?autoplay=1"><img alt="" src="/images/user/jmvc_yt.png" /> </a>

```

它会让 Chrome 抱怨：

```
不安全的 JavaScript 尝试使用 URL 访问框架

```

但这是一个轻微的副作用

在所有浏览器的所有最新版本中测试 - IE:7,8,9

检查相同的链接（也适用于 FF）： [http ://reference.xarray.org.uk/pages.php/fancy-problem-jp-59](http://reference.xarray.org.uk/pages.php/fancy-problem-jp-59)

# asp.net - 在 asp.net 中哪里可以创建错误日志功能？

> ID：11733283
> 
> 赞同：1
> 
> 时间：2012-07-31T04:50:07.400
> 
> 标签：asp.net, 3-tier

我在 asp.net 中使用 3 层架构，我想将函数“ErrorLog()”用于记录错误，我应该将我的结构放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:09:32.733

我建议您在`Global.asax`文件中写入错误日志代码。它具有称为 的功能`Application_Error`。如果引发未处理的异常，则会自动调用此函数。

您可以在那里创建您的日志文件。它具有`Server.GetLastError()`跟踪项目中最后一个错误的功能。

有关更多详细信息，请查看[此链接](https://stackoverflow.com/questions/343014/asp-net-custom-error-page-server-getlasterror-is-null)，这将对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:01:50.967

我建议不要将 ErrorLog() 放在任何层中（取决于您的结构，层可以是命名空间或项目）。

它应该在错误实用程序类中，而不是在任何层中，因为您可能希望使用它来记录来自数据层或业务层的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:57:07.107

您可以在 BLL 下创建一个 Uility 文件夹，其中包含 CommonFunction.cs 类等常用函数。在该类中，您可以放置​​ ErrorLog ， AlertMessage,Encrypt ， Decrypt ...函数

# android - 如何跳过或避免清单中的 Android API 级别？

> ID：11733284
> 
> 赞同：1
> 
> 时间：2012-07-31T04:50:18.173
> 
> 标签：android, android-manifest

我们正在编写一个 Android 应用程序，我们计划在至少安装了 Froyo (API 8) 到 Jelly Bean (API 16) 的 Android 设备上提供该应用程序，但我们不想将其提供给 API 级别 12 和 13现在，分别是 Honeycomb 3.1 和 3.2。

基本上，我们只是避免使用 Android 平板电脑。有没有办法跳过这些操作系统？有`AndroidManifest.xml`文件的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T04:56:47.077

您不想跳过操作系统 :) 在清单中使用[< compatible-screens >](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)并限制您支持的内容。

从文档中，

> 指定应用程序兼容的每个屏幕配置。清单中只允许该元素的一个实例，但它可以包含多个元素。每个元素都指定了与应用程序兼容的特定屏幕尺寸-密度组合。

例子 ：

如果您的应用程序仅与小屏幕和普通屏幕兼容，而不管屏幕密度如何，那么您必须指定八种不同的元素，因为每种屏幕尺寸都有四种不同的密度配置。如果您的应用程序仅与小屏幕和普通屏幕兼容，则清单条目如下所示：

```
<manifest ... >
    ...
    <compatible-screens>
        <!-- all small size screens -->
        <screen android:screenSize="small" android:screenDensity="ldpi" />
        <screen android:screenSize="small" android:screenDensity="mdpi" />
        <screen android:screenSize="small" android:screenDensity="hdpi" />
        <screen android:screenSize="small" android:screenDensity="xhdpi" />
        <!-- all normal size screens -->
        <screen android:screenSize="normal" android:screenDensity="ldpi" />
        <screen android:screenSize="normal" android:screenDensity="mdpi" />
        <screen android:screenSize="normal" android:screenDensity="hdpi" />
        <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    </compatible-screens>
    <application ... >
        ...
    <application>
</manifest> 
```

* * *

**编辑：** 澄清为什么你不应该**使用**这个`<supports-screens>`解决方案。

如果您`<supports-screens>`在应用程序不兼容大屏幕时使用该元素并将大屏幕尺寸属性设置为“false”，则 Google Play 等外部服务**不会应用过滤。**您的**应用程序仍可用于更大的屏幕**，但在运行时，它不会调整大小以适应屏幕。相反，系统将模拟手机屏幕尺寸（大约 320dp x 480dp）。

底线：

> 如果您想阻止您的应用程序在更大的屏幕上下载，请使用`<compatible-screens>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:01:03.183

**可能，对于清单文件中的任何声明都不可能。如果你不想使用它，你必须在编码中检查那个版本。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:57:15.447

如果您想跳过平板电脑的应用程序，您可以在 Manifest 文件中将 largeScreenSupport 和 extraLargeScreenSupport 设置为 false。

```
<supports-screens android:largeScreens="false"
                  android:xlargeScreens="false"
                  /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:23:25.867

我有一个类似的查询，这对我有用：

*   Google Play 允许您发布两个具有不同 SDK 范围的 APK。

*   发布时，您的 APK 的所有统计信息都会合并。

    所以我说如果你必须排除 API Level 12 和 13 你可以

*   制作一个范围为 min(1) max(11) 的 APK

*   制作范围为 min(14) [自动表示 14 或更高] 的另一个 APK。

# iphone - 向单元格添加阴影会导致滚动延迟

> ID：11733292
> 
> 赞同：5
> 
> 时间：2012-07-31T04:50:48.353
> 
> 标签：iphone, objective-c, ios, ipad, uiview

所以我有一个有阴影的 UIView：

```
[containerFrame.layer setShadowOffset:CGSizeMake(0, 1)];
[containerFrame.layer setShadowRadius:4.0];
[containerFrame.layer setShadowColor:[UIColor colorWithRed:34/255.f green:25/255.f blue:25/255.f alpha:1.0].CGColor];
[containerFrame.layer setShadowOpacity:0.4]; 
```

有了这个，我的滚动 FPS 下降到 20-30。移除阴影然后繁荣，我的 FPS 回到 60，滚动就像黄油一样顺畅。现在的问题是我需要在这个盒子/容器视图周围有一个阴影效果。如何在不减慢滚动速度的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T04:58:37.540

尝试设置阴影路径：

```
[containerFrame.layer setShadowOffset:CGSizeMake(0, 1)];
[containerFrame.layer setShadowRadius:4.0];
[containerFrame.layer setShadowColor:[UIColor colorWithRed:34/255.f green:25/255.f blue:25/255.f alpha:1.0].CGColor];
[containerFrame.layer setShadowOpacity:0.4];

// New line
[containerFrame.layer setShadowPath:[UIBezierPath bezierPathWithRect:containerFrame.bounds].CGPath]; 
```

> 如果您必须对此视图进行动画处理（尤其是如果它是 UITableViewCell 的一部分），您可能会注意到动画中的卡顿。这是因为计算视图的投影需要 Core Animation 进行屏幕外渲染，以确定视图的确切形状，以便确定如何渲染其投影。（请记住，您的视图可以是任何复杂的形状，甚至可能带有孔。）

从[关于设置 shadowPath 的重要性](http://markpospesel.wordpress.com/2012/04/03/on-the-importance-of-setting-shadowpath/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:59:57.800

设置`containerFrame.layer.shouldRasterize = YES;`它变慢的原因是因为计算阴影很昂贵。光栅化会将视图折叠成图像，因此速度会更快。

# php - AJAX 回显未返回但 php 注册到数据库有效

> ID：11733296
> 
> 赞同：0
> 
> 时间：2012-07-31T04:51:07.323
> 
> 标签：php, ajax

更新：

代码按原样编写，并将保持这种状态。但是，现在它不会将用户在表单中写入的数据提交到数据库。怎么了。

这是第一个文件。它包含 XML HTTP REQUEST 和 html 表单。该文件还包含野生 .

```
 <!DOCTYPE html>

 <html>

<head>

 <?php
 require_once 'core/init.php';
 ?>

    <meta charset="utf-8" />        

    <title></title> 

    <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js">

 //directly below is that wild script tag

 </script>

 <script type="text/javascript">

 function load(thefile, thediv) {

 if (window.XMLHttpRequest) {

xmlhttp = new XMLHttpRequest();

} else {

    xmlhttp = new ActiveXObject ('Microsoft.XMLHTTP');

    }

xmlhttp.onreadystatechange = function () {

if (xmlhttp.readyState==4 && xmlhttp.status==200) {

document.getElementById(thediv).innerHTML = xmlhttp.responseText;   

    }

}   

parameters1 = 'username='+document.getElementById('username').value;
parameters2 = 'email='+document.getElementById('email').value;
parameters3 = 'password='+document.getElementById('password').value;
parameters4 = 'password_again='+document.getElementById('password_again').value;
parameters5 = 'first_name='+document.getElementById('first_name').value;
parameters6 = 'last_name='+document.getElementById('last_name').value;

xmlhttp.open('POST', thefile, true);
xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
xmlhttp.send(parameters1 + '&' + parameters2 + '&' + parameters3 + '&' + 

    parameters4 + '&' + parameters5 + '&' +parameters6);

 }

 </script>

    </script>   

    <title>Pop Up Sign Up</title>

</head>

    <body>

<div id="popupbox"> 

        <form name="signup" action="" method="post">

            Desired Username:

<input id="username" placeholder="Username" value="<?php echo 

    (isset($desired_username) ? strip_tags($desired_username) : '');?>" type="text" 

    placeholder="Bob123" name="username" size="14" />

            <br />   <br /> 

            Your Email:
            Register
<input id="email" placeholder="jasontanner328@gmail.com" value="<?php echo 

    (isset($desired_email) ? strip_tags($desired_email) : '');?>" type="email" 

    name="email" size="14" />

            <br />   <br /> 

            Your Password:

<input id="password" placeholder="Password" name="password" type="password" 

    size="14" />

            <br />  <br />      

            Your Password Again:

<input id="password_again" placeholder="Password Again" 

    name="password_again" type="password" size="14" />

            <br />  <br />  

            First Name:

<input id="first_name" placeholder="Jason" value="<?php echo 

    (isset($desired_first_name) ? strip_tags($desired_first_name) : '');?>" 

    name="first_name" type="text" size="14" />

            <br />  <br />  

            Last Name:

<input id="last_name" placeholder="Tanner" name="last_name" value="<?php echo 

    (isset($desired_last_name) ? strip_tags($desired_last_name) : '');?>" type="text" 

    size="14" />

            <br />  <br />  

<center><input type="button" name="submit" value="Register" 

    onclick="load('register.php', 'popupbox');" /></center>

        </form>

</div> 

 <span id="result">

 </span>

 </body>

 </html> 
```

这是处理将数据插入服务器的第二个文件，以及单击提交按钮后我想要返回的内容。

```
 <?php

require_once 'core/init.php';
logged_in_redirect();
if (empty($_POST) === false) {

$desired_username = $_POST['username'];
$desired_email = $_POST['email'];
$desired_first_name = $_POST['first_name'];
$desired_last_name = $_POST['last_name'];

$required_fields = array 

('username','email','password','password_again','first_name','last_name');

foreach ($_POST as $key=>$value) {

if (empty($value) && in_array($key, $required_fields) === true) {

    $errors[] = 'Fields marked with an asterisk are required.';

break 1;    
                                                                                         }
                                            }

if (empty($errors) === true)    {
if (user_exists($_POST['username']) === true || strlen($_POST ['username']) < 6) {

$errors[] = 'Sorry, the username \''    . $_POST['username'] . '\' is already taken 

or is too short. 6 characters are the minimum.';
                                                                                                                    }

if (preg_match("/\\s/", $_POST ['username']) == true) {
$errors[] = 'Sorry there is a space in your username.';         
                                                                                }

if (strlen($_POST ['password']) < 6)    {
$errors[] = 'Your password must be at least 6 characters';
                                                            }

if ($_POST ['password'] !== $_POST['password_again']) {
$errors[] = 'Make sure both passwords submitted are the same.';     
                                                                                }   

if (filter_var($_POST['email'], FILTER_VALIDATE_EMAIL) === false) {
$errors[] = 'A valid email address is required.';
                                                                                                }   

if (email_exists($_POST['email']) === true) {
$errors[] = 'Sorry, the email \'' . $_POST['email'] . '\' is already in use.';
                                                                    }

if (strlen($_POST ['first_name']) < 2) {
$errors[] = 'Your first name must contain at least two characters.';
                                                  }
if (strlen($_POST ['last_name']) < 2) {
$errors[] = 'Your last name must contain at least two characters.';
                                                  } }
                                                    } else {

//if (isset($_GET['success']) && empty($_GET['success'])) {

//echo 'You have successfully registered. Please check your email to activate your 

account.';  

//  } else {

if (empty ($_POST) === false && empty($errors) === true){
    $register_data = array(
    'username'              => $_POST['username'],      
    'password'              => $_POST['password'],
    'first_name'            => $_POST['first_name'],
    'last_name'             => $_POST['last_name'],
    'email'                     => $_POST['email'],
    'email_code'            => md5($_POST['username'] + microtime())
                                 );

    register_user($register_data);

echo 'WIN';                                     

//      header('Location: register.php?success');
//      exit();

//  } else 

if (empty($errors) === false){
    echo output_errors($errors);
         }
}}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:55:32.047

表单上的按钮是`type="submit"`; 这将提交表单并重定向页面，除非您`return false;`在`onclick`属性中有它。相反，我建议将按钮更改为常规按钮而不是提交按钮：

```
<input type="button" name="submit" value="Register" onclick="load('register.php', 'result');" /> 
```

此更改将阻止您的页面在提交表单后重定向。

**编辑**：查看完整代码后，POST 页面看起来在处理中存在逻辑错误（以及一些语法错误；请参阅我对关闭花括号问题的评论）。

该`if (empty($errors) === true) {`块以`} else {`您输出的用户已成功注册的 else 块内的 and 结尾。翻译过来，这意味着“如果有初始错误，告诉用户他们注册成功”。相反，将之后（包括）的所有内容更改`} else {`为：

```
if (!empty($_POST) && empty($errors)) {
    // the form has been submitted and there are no errors
    echo 'You have successfully registered. Please check your email to activate your account.';
    $register_data = array(
    'username'              => $_POST['username'],      
    'password'              => $_POST['password'],
    'first_name'            => $_POST['first_name'],
    'last_name'             => $_POST['last_name'],
    'email'                     => $_POST['email'],
    'email_code'            => md5($_POST['username'] + microtime())
                                 );
    register_user($register_data);
} else if (!empty($errors)) {
    // there are errors =[
    echo output_errors($errors);
} 
```

# android - 为什么当我创建新的 xml 布局时，调色板中的控件更改为 Android 中的旧版本控件？

> ID：11733298
> 
> 赞同：1
> 
> 时间：2012-07-31T04:51:23.033
> 
> 标签：android, android-layout, palette, android-version, android-controls

![在此处输入图像描述](../Images/e8d36bb8251df08faad517a8a0c5f1de.png)

![在此处输入图像描述](../Images/b2384c20812e8a21fb568aa98eedd4d3.png)

首先，我创建了我的项目，`minSdkVersion="13"`并且`targetSdkVersion="15"`. 但是当我为布局创建新的 xml 时，左侧的 Palette 控件显示旧版本的控件。当它在模拟器（4.0.3版）中启动时，它也显示出旧控件的风格。如何将调色板的控制更改为新版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:56:26.493

这通常发生在最初创建项目时您有一些其他目标但后来您更改了 manifest ，您需要将 project.properties 文件中的 targetsdkversion 更改为 "15" 。

# actionscript-3 - AS3：Z 缓冲

> ID：11733299
> 
> 赞同：2
> 
> 时间：2012-07-31T04:51:24.053
> 
> 标签：actionscript-3, 3d, zbuffer

与 z 排序相比，Z 缓冲是一种更好的渲染技术，因为它可以渲染相交的 3D 对象。

说，我有一个`Array`包含两个`Object`实例如下：

```
{v1:new Vector3D(0, 0, 0), v2:new Vector3D(100, 0, 0), v3:new Vector3D(100, 0, 100)}
{v1:new Vector3D(0, 100, 50), v2:new Vector3D(100, 100, 50), v3:new Vector3D(100, 0, 100)} 
```

这是两个`Object`实例，每个实例包含三个`Vector3D`实例，代表三角形的三个顶点。

我将使用`Matrix3D.transformVector()`和`Vector3D.project()`绘制具有`graphics`舞台属性的三角形。

在没有创建任何精灵的这种情况下，如何使用 Z 缓冲来绘制每个像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T23:02:34.117

我和你在一起。我想念纯 AS3 中的 z 缓冲。此时没有为 Flash/ActionScript-3 提供 z 缓冲。您当前的选择是：

*   [重新排序精灵](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS18334A17-3F85-4d5a-ADB4-F5BF6196774C.html)
*   [剔除](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WSB0132CAB-C91D-4cb4-9A47-394C85677E40.html)
*   [向 Abobe 提交有关 z 缓冲的请求](https://www.adobe.com/cfusion/mmform/index.cfm?name=wishform)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T05:43:17.420

我将提供两个链接，它们足以了解 z 排序背后的逻辑：

[http://www.infiniteturtles.co.uk/blog/fast-sorting-in-as3](http://www.infiniteturtles.co.uk/blog/fast-sorting-in-as3)
[http://www.simppa.fi/blog/the-fastest-way-to-z-sort-and-handle-objects -在-as3/](http://www.simppa.fi/blog/the-fastest-way-to-z-sort-and-handle-objects-in-as3/)

这些文章描述得很好，所以理解这个想法不会太难。甚至提供源代码。

# ios - 缩放图像上的动画

> ID：11733306
> 
> 赞同：0
> 
> 时间：2012-07-31T04:52:46.090
> 
> 标签：ios, animation, core-animation, zooming

我正在尝试执行以下操作：

我有一个显示图像的视图。我已经实现了 pinchgesturerecognizer 来放大/缩小。如何制作动画并完全按照用户在相同位置以相同速度缩放图像的方式显示图像。例如，如果我在右上角放大图像应该在右上角以相同的速度放大图像。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:18:32.413

我也对我的一个项目的同类要求进行了一些研究。

我发现/完成的是：我已将图像视图添加到滚动视图中。然后我设置了所有的滚动视图属性，如 max-min zoomScale、frame、delegate、userInteractionEnabled、scrollEnabled 等。

因此，现在您不需要按捏合级别进行管理，滚动视图本身管理所有缩放级别和滚动部分。

希望这会帮助你。

享受编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:09:57.437

您将不得不创建一个记录系统。在我的脑海中，你可以做这样的事情：

开始用户绘制序列时记录当前时间戳：

NSTimeInterval startTime = [NSDate intervalSinceReferenceDate];

当用户捏合和/或缩放时，记录从开始时间经过的时间量，以及您对所有更改所做的更改。我建议构建一个更改记录数组，其中每条记录都有一个经过时间字段和新的缩放比例。

如果您将用户的更改绘制为不同尺寸的离散渲染，只需记录并重播每个经过的时间和新的尺寸。

如果您在大小之间制作动画，请记录每个动画的时间间隔和时间偏移量。

然后回放，您将遍历每条记录并在相同的时间间隔内执行相同的更改，使用计时器、performSelector:withObject:afterDelay: 或类似的东西。

# java - 如何从 jTable 中获取值并存储在数据库中？

> ID：11733310
> 
> 赞同：-1
> 
> 时间：2012-07-31T04:53:10.207
> 
> 标签：java, swing, jdbc, jtable

我无法理解如何获取在 jTable 中输入的值并将它们存储在数据库中。谁能帮我写代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:27:16.317

这可用于从 jTable 获取值并插入数据库，然后再创建与数据库的正确连接。

```
dbStatement=con.createStatement();
for(int i=0;i<=jTable1.getRowCount;i++){

                String item=jTable1.getValueAt(i, 1).toString();
                String quant=jTable1.getValueAt(i,2 ).toString();
                String unit=jTable1.getValueAt(i, 3).toString();
                String tot=jTable1.getValueAt(i, 4).toString();

                dbStatement.executeUpdate("INSERT INTO tableName VALUES('"+item+"','"+quant+"','"+unit+"','"+tot+"')");

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:57:46.847

[检查这个](http://www.coderanch.com/t/563660/GUI/java/Populate-JTable-Database-Data)。之后出现任何错误，然后将您的代码和错误行放在此处，以便该社区为您提供帮助。这不是您从头开始要求完整代码的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T05:18:31.390

为了从 Jtable 中检索数据，您可以使用最具体的方法：

```
Object value = jtable.getValueAt(rowIndex, columnIndex); 
```

按照代码流，您应该打开一个数据库连接，例如使用 mysql：

```
// driver registration
Class.forName("com.mysql.jdbc.Driver");

// create a connection
Connection connection = DriverManager.getConnection("jdbc:mysql://server_name/database_name","user", "password");

// create a statement
Statement s = connection.createStatement();

// execute a query, this method will return the number of affected rows
int count = s.executeUpdate ("insert into some_table(value) values('" + value + "')); 
```

# c# - 如何在 C# 中在指定的打印机上设置打印机端口

> ID：11733319
> 
> 赞同：2
> 
> 时间：2012-07-31T04:54:12.693
> 
> 标签：c#, com, ports, printers

我希望能够在 c# 中执行以下等效操作：

*   进入“设备和打印机”
*   右键单击打印机
*   转到端口选项卡
*   选择 COM12：端口
*   点击确定

我设法为命名打印机获取了一个 ManagementObject 并尝试调用：

> mObj.SetPropertyValue("端口名称","COM12:");

在该打印机的 ManagementObject 上 - 从 ManagementBaseObject 继承。

但是，这段代码对打印机设置没有任何作用。

我怀疑我需要在适当的库上使用 P/Invoke，但经过大量搜索后，我找不到该库或如何从 c# 执行此操作的教程。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T22:04:29.943

在互联网的一个不起眼的部分找到了答案：

```
public static void SetPrinterPort(string printerName, string portName)
        {
            var oManagementScope = new ManagementScope(ManagementPath.DefaultPath);
            oManagementScope.Connect();

            SelectQuery oSelectQuery = new SelectQuery();
            oSelectQuery.QueryString = @"SELECT * FROM Win32_Printer 
            WHERE Name = '" + printerName.Replace("\\", "\\\\") + "'";

            ManagementObjectSearcher oObjectSearcher =
               new ManagementObjectSearcher(oManagementScope, @oSelectQuery);
            ManagementObjectCollection oObjectCollection = oObjectSearcher.Get();

            foreach (ManagementObject oItem in oObjectCollection)
            {
                oItem.Properties["PortName"].Value = portName;
                oItem.Put();
            }
        } 
```

我很确定最后一部分是您在任何管理对象上设置属性所需的全部内容。我看到 Win32 API 说我想设置的属性是读/写的，但似乎没有任何地方有设置它的代码，这让我发疯了。

那么现在我们知道了！:-)

我希望这对某人有用。

# android - 图像在 AVD 上显示很大？

> ID：11733320
> 
> 赞同：-1
> 
> 时间：2012-07-31T04:54:14.120
> 
> 标签：android, scaling, avd

好吧，我将我的 AVD 设置为

480 x 800 分辨率，

抽象的 lcd 密度为 320 像素

我的图像尺寸是 207 宽和 205 高，图像已设置为每英寸 320 像素，但在分辨率为 480 x 800 和 320 dpi 的 avd 上显示得非常大。图像仅放置在 @drawable/MDPI 文件夹中。这里是

![在此处输入图像描述](../Images/1dfb2ba3482f8b380d6b17f000453260.png)

![在此处输入图像描述](../Images/d39cfc58d5ab2ded09c4a82dc123376c.png)

图像是否需要设置为每英寸 160 像素，或者我必须使用（将显示缩放为实际尺寸）选项设置 avd 尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:07:08.177

检查ImageView 中 xml 文件中的`android:src=""`和`android:background=""`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:01:45.897

你有模拟器，`320 dpi`它是`xhdpi`. 而你正在把你的图像放入`mdpi folder`. 现在，当您启动您的应用程序时，它会`xhdpi folder`首先查找图像，然后最终将图像从`mdpi folder`比例加载到`xhdpi density`并显示它们。这就是为什么图像越来越大。

可能您可以在`mdpi density`模拟器中进行测试，或者您可以`xhdpi`通过在`xhdpi`.

# asp.net - 在 iPad 上滚动 Div

> ID：11733322
> 
> 赞同：1
> 
> 时间：2012-07-31T04:54:23.733
> 
> 标签：asp.net, ipad, html, scroll

我正在 ASP.net 中开发一个应用程序，其中我启用了溢出滚动的 div 属性，如`overflow-y: Scroll`. 但是当我在 iPad 上运行这个应用程序时，div 上的滚动并不顺畅。你能给我推荐任何平滑滚动的插件或任何其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:07:49.223

您可以为您的应用尝试[**jQuery Custom Scrollbar插件。**](http://manos.malihu.gr/jquery-custom-content-scroller)

[**看演示**](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)：

**或者**

[**小提琴示例**](http://jsfiddle.net/akhurshid/nwfpy/)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:04:58.590

试试 Touchwipe jQuery 插件？[http://www.netcu.de/jquery-touchwipe-iphone-ipad-library](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library)

# sms - Kannel 连接的 SMS 已确认但未发送

> ID：11733327
> 
> 赞同：2
> 
> 时间：2012-07-31T04:55:40.300
> 
> 标签：sms, multipart, kannel, smpp

我正在使用 Kannel 将 SMS 发送到 SMSC：

1.  发送 1 部分 SMS（<=160 个字符）被确认并传送到手机。

2.  发送多部分（长）SMS 是：

    A. If `concatenation = false`: 由 Kannel 拆分，部分被 ACKed 和 Delivered（作为唯一的 SMS）。

    B. 如果`concatenation = true`：被 Kannel 拆分，部分被确认但未交付。

    *此外*，任何后续发送到刚刚经历过这种情况 [2.B] 的目标号码的 SMS 也会被确认但未发送，即使它是单部分 SMS！

有没有人有类似的经历？

由于 1-parters 表现正常，我怀疑问题出在连接过程本身..但它来自：

*   Kannel（版本或配置？）。
*   SMSC（我连接的特定 SMSC 是否需要特殊的东西？）。
*   手机（怀疑，我尝试了来自多个网络和多个设备的几个号码）。
*   我将 SMS 发送给 Kannel 的方式（sendsms cgi）？！

令人难以置信的是，所有消息（1 部分、单独的多部分和串联的多部分）都被 SMSC 接受并传递，除了在某处丢失**并导致移动设备不再接收任何内容的**串联消息！

重新连接 SMSC 不会*解锁*号码，重启手机不会*解锁*号码。一旦一个连接的消息被发送到一个号码，ACKed 和 Undelivered，任何东西都不会从 kannel 传递到它。

该号码仍然可以接收和显示从其他号码发送给它的短短信和长短信，即使是从运营商（SMSC 提供商）用于测试的 Web 界面！

**编辑**：事实证明，MSISDN 不会无限期地被阻止，只是在提交串联的多部分 SMS 后*约 24 小时。*24 小时后，所有单部分 SMS 都会*（*一次）发送，但*不是*多部分 SMS。——这进一步表明问题出在我猜的 SMSC 内？！

**编辑**：发现问题！移动运营商终于报告他们的 SMSC
存在*错误！*它无法处理 7 位 (GSM) 级联消息！UCS-2 连接却被成功处理了！
他们向 SMSC 供应商报告了该错误并正在等待修复。*同时*，他们建议以 8 位编码发送 7 位长消息（多部分）[`charset=UTF-8&coding=1`使用 Kannels 的 SMSPush URL]。
这种方法有效，但给我留下了另一个问题，8 位部分最多可以容纳 134 个字符 ( `140 octed - 6 UDH`)，比 7 位部分少 19 个字符。所以我现在的问题是：**是否可以使用 PHP + Kannel 将 7 位字符串打包成 8 位字符串以*绕过*SMSC 的错误和每部分发送 153 个字符？**

以下是 Kannel conf、bearer 和 sms box 启动日志和测试日志。请帮我解决这个问题。谢谢。

**smskannel.conf**：

```
group = smsc
smsc = smpp
smsc-id = UMNIAH
host = *****
port = *****
smsc-username = *****
smsc-password = *****
system-type = VMA
interface-version = 34
transceiver-mode = false #only want to send.. no MOs
connect-allow-ip = 127.0.0.1
#thought the below ton and npi confs might fix the problem, but they had no effect
source-addr-ton = 5 #Alphanumeric
source-addr-npi = 0
source-addr-autodetect = false
dest-addr-ton = 1 #International
dest-addr-npi = 0
bind-addr-ton = 0
bind-addr-npi = 0

group = smsbox
bearerbox-host = 127.0.0.1
sendsms-port = 13013
global-sender = 13013

group = sendsms-user
username = tester
password = foobar
max-messages = 5
concatenation = true #false works fine, but I need long messages to be concatenated

#will setup DLR when I get concatenated messages to work
#no services are defined.. only want to send and won't be recieving 
```

**承载箱启动**：

```
[root@vps-1098126-9711 kannel]# sbin/bearerbox smskannel.conf &
[1] 3517
[root@vps-1098126-9711 kannel]# 2012-07-31 03:41:32 [3517] [0] INFO: Debug_lvl = -1, log_file = <none>, log_lvl = 0
[3517] [0] WARNING: DLR: using default 'internal' for storage type.
[3517] [0] INFO: DLR using storage type: internal
[3517] [0] DEBUG: Kannel bearerbox version `1.4.3'.
Build `Jul  4 2012 11:03:53', compiler `4.1.2 20080704 (Red Hat 4.1.2-52)'.
System Linux, release 2.6.32-042stab057.1, version #1 SMP Fri Jun 22 02:17:07 MSD 2012, machine x86_64.
Hostname *****, IP *****.
Libxml version 2.6.26.
Using OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008.
Compiled with MySQL 5.5.14, using MySQL 5.5.14.
Using native malloc.

[3517] [0] INFO: Added logfile `/tmp/kannel.log' with level `0'.
[3517] [0] INFO: HTTP: Opening server at port 13000.
[3517] [0] DEBUG: Started thread 1 (gwlib/fdset.c:poller)
[3517] [1] DEBUG: Thread 1 (gwlib/fdset.c:poller) maps to pid 3517.
[3517] [0] DEBUG: Started thread 2 (gwlib/http.c:server_thread)
[3517] [0] DEBUG: Started thread 3 (gw/bb_http.c:httpadmin_run)
[3517] [3] DEBUG: Thread 3 (gw/bb_http.c:httpadmin_run) maps to pid 3517.
[3517] [2] DEBUG: Thread 2 (gwlib/http.c:server_thread) maps to pid 3517.
[3517] [0] DEBUG: starting smsbox connection module
[3517] [0] INFO: BOXC: 'smsbox-max-pending' not set, using default (100).
[3517] [0] DEBUG: Started thread 4 (gw/bb_boxc.c:sms_to_smsboxes)
[3517] [0] DEBUG: Started thread 5 (gw/bb_boxc.c:smsboxc_run)
[3517] [4] DEBUG: Thread 4 (gw/bb_boxc.c:sms_to_smsboxes) maps to pid 3517.
[3517] [5] DEBUG: Thread 5 (gw/bb_boxc.c:smsboxc_run) maps to pid 3517.
[3517] [0] INFO: Set SMS resend frequency to 60 seconds.
[3517] [0] INFO: SMS resend retry set to unlimited.
[3517] [0] DEBUG: smsbox MO concatenated message handling enabled
[3517] [0] INFO: DLR rerouting for smsc id <UMNIAH> disabled.
[3517] [0] DEBUG: Started thread 6 (gw/smsc/smsc_smpp.c:io_thread)
[3517] [0] DEBUG: Started thread 7 (gw/bb_smscconn.c:sms_router)
[3517] [6] DEBUG: Thread 6 (gw/smsc/smsc_smpp.c:io_thread) maps to pid 3517.
[3517] [0] INFO: ----------------------------------------
[3517] [0] INFO: Kannel bearerbox II version 1.4.3 starting
[3517] [7] DEBUG: Thread 7 (gw/bb_smscconn.c:sms_router) maps to pid 3517.
[3517] [0] INFO: MAIN: Start-up done, entering mainloop
[3517] [6] DEBUG: SMPP[UMNIAH]: Sending PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e37300 dump:
[3517] [6] DEBUG:   type_name: bind_transmitter
[3517] [6] DEBUG:   command_id: 2 = 0x00000002
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 1 = 0x00000001
[3517] [6] DEBUG:   system_id: "*****"
[3517] [6] DEBUG:   password: "*****"
[3517] [6] DEBUG:   system_type: "VMA"
[3517] [6] DEBUG:   interface_version: 52 = 0x00000034
[3517] [6] DEBUG:   addr_ton: 0 = 0x00000000
[3517] [6] DEBUG:   addr_npi: 0 = 0x00000000
[3517] [6] DEBUG:   address_range: NULL
[3517] [6] DEBUG: SMPP PDU dump ends.
[3517] [6] DEBUG: SMPP[UMNIAH]: Got PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e37300 dump:
[3517] [6] DEBUG:   type_name: bind_transmitter_resp
[3517] [6] DEBUG:   command_id: 2147483650 = 0x80000002
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 1 = 0x00000001
[3517] [6] DEBUG:   system_id: "*****"
[3517] [6] DEBUG: SMPP PDU dump ends.
[3517] [6] DEBUG: SMPP[UMNIAH]: Sending enquire link:
[3517] [6] DEBUG: SMPP PDU 0x1e37300 dump:
[3517] [6] DEBUG:   type_name: enquire_link
[3517] [6] DEBUG:   command_id: 21 = 0x00000015
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 2 = 0x00000002
[3517] [6] DEBUG: SMPP PDU dump ends.
[3517] [6] DEBUG: SMPP[UMNIAH]: Got PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e37300 dump:
[3517] [6] DEBUG:   type_name: enquire_link_resp
[3517] [6] DEBUG:   command_id: 2147483669 = 0x80000015
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 2 = 0x00000002
[3517] [6] DEBUG: SMPP PDU dump ends. 
```

**短信箱启动**：

```
[root@vps-1098126-9711 kannel]# sbin/smsbox smskannel.conf &
[2] 3525
[root@vps-1098126-9711 kannel]# 2012-07-31 03:43:25 [3525] [0] INFO: Debug_lvl = -1, log_file = <none>, log_lvl = 0
[3525] [0] DEBUG: Kannel smsbox version `1.4.3'.
Build `Jul  4 2012 11:03:53', compiler `4.1.2 20080704 (Red Hat 4.1.2-52)'.
System Linux, release 2.6.32-042stab057.1, version #1 SMP Fri Jun 22 02:17:07 MSD 2012, machine x86_64.
Hostname *****, IP *****.
Libxml version 2.6.26.
Using OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008.
Compiled with MySQL 5.5.14, using MySQL 5.5.14.
Using native malloc.

[3525] [0] INFO: Starting to log to file /tmp/smsbox.log level 0
[3525] [0] INFO: Added logfile `/tmp/smsbox.log' with level `0'.
[3525] [0] INFO: Service global sender set as '13013'
[3525] [0] INFO: HTTP: Opening server at port 13013.
[3525] [0] DEBUG: Started thread 1 (gwlib/fdset.c:poller)
[3525] [0] DEBUG: Started thread 2 (gwlib/http.c:server_thread)
[3525] [1] DEBUG: Thread 1 (gwlib/fdset.c:poller) maps to pid 3525.
[3525] [0] INFO: Set up send sms service at port 13013
[3525] [2] DEBUG: Thread 2 (gwlib/http.c:server_thread) maps to pid 3525.
[3525] [0] DEBUG: Started thread 3 (gw/smsbox.c:sendsms_thread)
[3525] [0] DEBUG: ----------------------------------------------
[3525] [0] DEBUG: Kannel smsbox version 1.4.3 starting
[3525] [3] DEBUG: Thread 3 (gw/smsbox.c:sendsms_thread) maps to pid 3525.
[3525] [0] DEBUG:   dumping group (sendsms-user):
[3525] [0] DEBUG:     <group> = <sendsms-user>
[3525] [0] DEBUG:     <max-messages> = <5>
[3525] [0] DEBUG:     <username> = <tester>
[3525] [0] DEBUG:     <concatenation> = <true>
[3525] [0] DEBUG:     <password> = <foobar>
[3525] [0] DEBUG: Started thread 4 (gw/smsbox.c:obey_request_thread)
[3525] [4] DEBUG: Thread 4 (gw/smsbox.c:obey_request_thread) maps to pid 3525.
[3525] [0] DEBUG: Started thread 5 (gw/smsbox.c:url_result_thread)
[3525] [5] DEBUG: Thread 5 (gw/smsbox.c:url_result_thread) maps to pid 3525.
[3525] [0] DEBUG: Started thread 6 (gw/smsbox.c:http_queue_thread)
[3525] [6] DEBUG: Thread 6 (gw/smsbox.c:http_queue_thread) maps to pid 3525.
[3525] [0] INFO: Connected to bearerbox at 127.0.0.1 port 13001.
[3517] [5] INFO: Client connected from <127.0.0.1>
[3525] [0] DEBUG: Started thread 7 (gw/heartbeat.c:heartbeat_thread)
[3525] [7] DEBUG: Thread 7 (gw/heartbeat.c:heartbeat_thread) maps to pid 3525.
[3517] [5] DEBUG: Started thread 8 (gw/bb_boxc.c:function)
[3517] [8] DEBUG: Thread 8 (gw/bb_boxc.c:function) maps to pid 3517.
[3517] [8] DEBUG: Started thread 9 (gw/bb_boxc.c:boxc_sender)
[3517] [9] DEBUG: Thread 9 (gw/bb_boxc.c:boxc_sender) maps to pid 3517. 
```

**1 部分请求——**实际交付：

```
[root@vps-1098126-9711 kannel]# curl "http://localhost:13013/cgi-bin/sendsms?username=tester&password=foobar&from=test&to=962796061912&text=test123&charset=UTF-8&coding=0"
0: Accepted for delivery

[3525] [2] DEBUG: HTTP: Creating HTTPClient for `127.0.0.1'.
[3525] [2] DEBUG: HTTP: Created HTTPClient area 0x1db8280.
[3525] [3] INFO: smsbox: Got HTTP request </cgi-bin/sendsms> from <127.0.0.1>
[3525] [3] INFO: sendsms used by <tester>
[3525] [3] INFO: sendsms sender:<tester:test> (127.0.0.1) to:<962796061912> msg:<test123>
[3525] [3] DEBUG: Stored UUID fe83e486-a35b-43a5-9592-0a11ef19153d
[3525] [3] DEBUG: message length 7, sending 1 messages
[3525] [3] DEBUG: Status: 202 Answer: <Sent.>
[3525] [3] DEBUG: Delayed reply - wait for bearerbox
[3517] [8] DEBUG: boxc_receiver: sms received
[3517] [8] DEBUG: send_msg: sending msg to box: <127.0.0.1>
[3517] [6] DEBUG: SMPP[UMNIAH]: Manually forced source addr ton = 5, source add npi = 0
[3517] [6] DEBUG: SMPP[UMNIAH]: Manually forced dest addr ton = 1, dest add npi = 0
[3525] [0] DEBUG: Got ACK (0) of fe83e486-a35b-43a5-9592-0a11ef19153d
[3517] [6] DEBUG: SMPP[UMNIAH]: Sending PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e392b0 dump:
[3517] [6] DEBUG:   type_name: submit_sm
[3517] [6] DEBUG:   command_id: 4 = 0x00000004
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 15 = 0x0000000f
[3517] [6] DEBUG:   service_type: NULL
[3525] [0] DEBUG: HTTP: Resetting HTTPClient for `127.0.0.1'.
[3517] [6] DEBUG:   source_addr_ton: 5 = 0x00000005
[3517] [6] DEBUG:   source_addr_npi: 0 = 0x00000000
[3517] [6] DEBUG:   source_addr: "test"
[3517] [6] DEBUG:   dest_addr_ton: 1 = 0x00000001
[3517] [6] DEBUG:   dest_addr_npi: 0 = 0x00000000
[3517] [6] DEBUG:   destination_addr: "962796061912"
[3517] [6] DEBUG:   esm_class: 3 = 0x00000003
[3517] [6] DEBUG:   protocol_id: 0 = 0x00000000
[3517] [6] DEBUG:   priority_flag: 0 = 0x00000000
[3517] [6] DEBUG:   schedule_delivery_time: NULL
[3517] [6] DEBUG:   validity_period: NULL
[3517] [6] DEBUG:   registered_delivery: 0 = 0x00000000
[3517] [6] DEBUG:   replace_if_present_flag: 0 = 0x00000000
[3517] [6] DEBUG:   data_coding: 0 = 0x00000000
[3525] [1] DEBUG: HTTP: Destroying HTTPClient area 0x1db8280.
[3517] [6] DEBUG:   sm_default_msg_id: 0 = 0x00000000
[3517] [6] DEBUG:   sm_length: 7 = 0x00000007
[3525] [1] DEBUG: HTTP: Destroying HTTPClient for `127.0.0.1'.
[3517] [6] DEBUG:   short_message: "test123"
[3517] [6] DEBUG: SMPP PDU dump ends.
[3517] [6] DEBUG: SMPP[UMNIAH]: Got PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e392b0 dump:
[3517] [6] DEBUG:   type_name: submit_sm_resp
[3517] [6] DEBUG:   command_id: 2147483652 = 0x80000004
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 15 = 0x0000000f
[3517] [6] DEBUG:   message_id: "65B634C3"
[3517] [6] DEBUG: SMPP PDU dump ends.
[3517] [6] DEBUG: SMPP[UMNIAH]: Sending enquire link:
[3517] [6] DEBUG: SMPP PDU 0x1e38cc0 dump:
[3517] [6] DEBUG:   type_name: enquire_link
[3517] [6] DEBUG:   command_id: 21 = 0x00000015
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 16 = 0x00000010
[3517] [6] DEBUG: SMPP PDU dump ends.
[3517] [6] DEBUG: SMPP[UMNIAH]: Got PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e38cc0 dump:
[3517] [6] DEBUG:   type_name: enquire_link_resp
[3517] [6] DEBUG:   command_id: 2147483669 = 0x80000015
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 16 = 0x00000010
[3517] [6] DEBUG: SMPP PDU dump ends. 
```

**多部分请求**[ `concatenation = true`] --未交付：

```
[root@vps-1098126-9711 kannel]# curl "http://localhost:13013/cgi-bin/sendsms?username=tester&password=foobar&from=test&to=962796061912&text=test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123&charset=UTF-8&coding=0"
0: Accepted for delivery

[3525] [2] DEBUG: HTTP: Creating HTTPClient for `127.0.0.1'.
[3525] [2] DEBUG: HTTP: Created HTTPClient area 0x1dbfc00.
[3525] [3] INFO: smsbox: Got HTTP request </cgi-bin/sendsms> from <127.0.0.1>
[3525] [3] INFO: sendsms used by <tester>
[3525] [3] INFO: sendsms sender:<tester:test> (127.0.0.1) to:<962796061912> msg:<test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123test123>
[3525] [3] DEBUG: Stored UUID 273d4165-ab63-4757-857a-a64413b95bc8
[3525] [3] DEBUG: message length 168, sending 2 messages
[3525] [3] DEBUG: Status: 202 Answer: <Sent. Message splits: 2>
[3525] [3] DEBUG: Delayed reply - wait for bearerbox
[3517] [8] DEBUG: boxc_receiver: sms received
[3517] [8] DEBUG: new split_parts created 0x1e33a00
[3517] [8] DEBUG: send_msg: sending msg to box: <127.0.0.1>
[3517] [6] DEBUG: SMPP[UMNIAH]: Manually forced source addr ton = 5, source add npi = 0
[3517] [6] DEBUG: SMPP[UMNIAH]: Manually forced dest addr ton = 1, dest add npi = 0
[3517] [6] DEBUG: SMPP[UMNIAH]: Sending PDU:
[3525] [0] DEBUG: Got ACK (0) of 273d4165-ab63-4757-857a-a64413b95bc8
[3517] [6] DEBUG: SMPP PDU 0x1e38f80 dump:
[3517] [6] DEBUG:   type_name: submit_sm
[3517] [6] DEBUG:   command_id: 4 = 0x00000004
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 29 = 0x0000001d
[3525] [0] DEBUG: HTTP: Resetting HTTPClient for `127.0.0.1'.
[3517] [6] DEBUG:   service_type: NULL
[3517] [6] DEBUG:   source_addr_ton: 5 = 0x00000005
[3517] [6] DEBUG:   source_addr_npi: 0 = 0x00000000
[3517] [6] DEBUG:   source_addr: "test"
[3517] [6] DEBUG:   dest_addr_ton: 1 = 0x00000001
[3517] [6] DEBUG:   dest_addr_npi: 0 = 0x00000000
[3517] [6] DEBUG:   destination_addr: "962796061912"
[3517] [6] DEBUG:   esm_class: 67 = 0x00000043
[3517] [6] DEBUG:   protocol_id: 0 = 0x00000000
[3517] [6] DEBUG:   priority_flag: 0 = 0x00000000
[3525] [1] DEBUG: HTTP: Destroying HTTPClient area 0x1dbfc00.
[3517] [6] DEBUG:   schedule_delivery_time: NULL
[3525] [1] DEBUG: HTTP: Destroying HTTPClient for `127.0.0.1'.
[3517] [6] DEBUG:   validity_period: NULL
[3517] [6] DEBUG:   registered_delivery: 0 = 0x00000000
[3517] [6] DEBUG:   replace_if_present_flag: 0 = 0x00000000
[3517] [6] DEBUG:   data_coding: 0 = 0x00000000
[3517] [6] DEBUG:   sm_default_msg_id: 0 = 0x00000000
[3517] [6] DEBUG:   sm_length: 159 = 0x0000009f
[3517] [6] DEBUG:   short_message:
[3517] [6] DEBUG:    Octet string at 0x1e392b0:
[3517] [6] DEBUG:      len:  159
[3517] [6] DEBUG:      size: 1024
[3517] [6] DEBUG:      immutable: 0
[3517] [6] DEBUG:      data: 05 00 03 01 02 01 74 65 73 74 31 32 33 74 65 73   ......test123tes
[3517] [6] DEBUG:      data: 74 31 32 33 74 65 73 74 31 32 33 74 65 73 74 31   t123test123test1
[3517] [6] DEBUG:      data: 32 33 74 65 73 74 31 32 33 74 65 73 74 31 32 33   23test123test123
[3517] [6] DEBUG:      data: 74 65 73 74 31 32 33 74 65 73 74 31 32 33 74 65   test123test123te
[3517] [6] DEBUG:      data: 73 74 31 32 33 74 65 73 74 31 32 33 74 65 73 74   st123test123test
[3517] [6] DEBUG:      data: 31 32 33 74 65 73 74 31 32 33 74 65 73 74 31 32   123test123test12
[3517] [6] DEBUG:      data: 33 74 65 73 74 31 32 33 74 65 73 74 31 32 33 74   3test123test123t
[3517] [6] DEBUG:      data: 65 73 74 31 32 33 74 65 73 74 31 32 33 74 65 73   est123test123tes
[3517] [6] DEBUG:      data: 74 31 32 33 74 65 73 74 31 32 33 74 65 73 74 31   t123test123test1
[3517] [6] DEBUG:      data: 32 33 74 65 73 74 31 32 33 74 65 73 74 31 32      23test123test12
[3517] [6] DEBUG:    Octet string dump ends.
[3517] [6] DEBUG:   more_messages_to_send: 1 = 0x00000001
[3517] [6] DEBUG: SMPP PDU dump ends.
[3517] [6] DEBUG: SMPP[UMNIAH]: Manually forced source addr ton = 5, source add npi = 0
[3517] [6] DEBUG: SMPP[UMNIAH]: Manually forced dest addr ton = 1, dest add npi = 0
[3517] [6] DEBUG: SMPP[UMNIAH]: Sending PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e38f80 dump:
[3517] [6] DEBUG:   type_name: submit_sm
[3517] [6] DEBUG:   command_id: 4 = 0x00000004
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 30 = 0x0000001e
[3517] [6] DEBUG:   service_type: NULL
[3517] [6] DEBUG:   source_addr_ton: 5 = 0x00000005
[3517] [6] DEBUG:   source_addr_npi: 0 = 0x00000000
[3517] [6] DEBUG:   source_addr: "test"
[3517] [6] DEBUG:   dest_addr_ton: 1 = 0x00000001
[3517] [6] DEBUG:   dest_addr_npi: 0 = 0x00000000
[3517] [6] DEBUG:   destination_addr: "962796061912"
[3517] [6] DEBUG:   esm_class: 67 = 0x00000043
[3517] [6] DEBUG:   protocol_id: 0 = 0x00000000
[3517] [6] DEBUG:   priority_flag: 0 = 0x00000000
[3517] [6] DEBUG:   schedule_delivery_time: NULL
[3517] [6] DEBUG:   validity_period: NULL
[3517] [6] DEBUG:   registered_delivery: 0 = 0x00000000
[3517] [6] DEBUG:   replace_if_present_flag: 0 = 0x00000000
[3517] [6] DEBUG:   data_coding: 0 = 0x00000000
[3517] [6] DEBUG:   sm_default_msg_id: 0 = 0x00000000
[3517] [6] DEBUG:   sm_length: 21 = 0x00000015
[3517] [6] DEBUG:   short_message:
[3517] [6] DEBUG:    Octet string at 0x1e394d0:
[3517] [6] DEBUG:      len:  21
[3517] [6] DEBUG:      size: 1024
[3517] [6] DEBUG:      immutable: 0
[3517] [6] DEBUG:      data: 05 00 03 01 02 02 33 74 65 73 74 31 32 33 74 65   ......3test123te
[3517] [6] DEBUG:      data: 73 74 31 32 33                                    st123
[3517] [6] DEBUG:    Octet string dump ends.
[3517] [6] DEBUG: SMPP PDU dump ends.
[3517] [6] DEBUG: SMPP[UMNIAH]: Got PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e38f80 dump:
[3517] [6] DEBUG:   type_name: submit_sm_resp
[3517] [6] DEBUG:   command_id: 2147483652 = 0x80000004
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 29 = 0x0000001d
[3517] [6] DEBUG:   message_id: "65B6354E"
[3517] [6] DEBUG: SMPP PDU dump ends.
[3517] [6] DEBUG: SMPP[UMNIAH]: Got PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e38f80 dump:
[3517] [6] DEBUG:   type_name: submit_sm_resp
[3517] [6] DEBUG:   command_id: 2147483652 = 0x80000004
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 30 = 0x0000001e
[3517] [6] DEBUG:   message_id: "65B6354F"
[3517] [6] DEBUG: SMPP PDU dump ends. 
```

**1 部分请求**（与之前的请求相同）**这次未交付！**：

```
[root@vps-1098126-9711 kannel]# curl "http://localhost:13013/cgi-bin/sendsms?username=tester&password=foobar&from=test&to=962796061912&text=test123&charset=UTF-8&coding=0"
0: Accepted for delivery

[3525] [2] DEBUG: HTTP: Creating HTTPClient for `127.0.0.1'.
[3525] [2] DEBUG: HTTP: Created HTTPClient area 0x1dc3060.
[3525] [3] INFO: smsbox: Got HTTP request </cgi-bin/sendsms> from <127.0.0.1>
[3525] [3] INFO: sendsms used by <tester>
[3525] [3] INFO: sendsms sender:<tester:test> (127.0.0.1) to:<962796061912> msg:<test123>
[3525] [3] DEBUG: Stored UUID 18070d9d-dafb-4a27-8e10-e5573b4e48d4
[3525] [3] DEBUG: message length 7, sending 1 messages
[3525] [3] DEBUG: Status: 202 Answer: <Sent.>
[3525] [3] DEBUG: Delayed reply - wait for bearerbox
[3517] [8] DEBUG: boxc_receiver: sms received
[3517] [8] DEBUG: send_msg: sending msg to box: <127.0.0.1>
[3517] [6] DEBUG: SMPP[UMNIAH]: Manually forced source addr ton = 5, source add npi = 0
[3517] [6] DEBUG: SMPP[UMNIAH]: Manually forced dest addr ton = 1, dest add npi = 0
[3517] [6] DEBUG: SMPP[UMNIAH]: Sending PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e3c830 dump:
[3517] [6] DEBUG:   type_name: submit_sm
[3517] [6] DEBUG:   command_id: 4 = 0x00000004
[3525] [0] DEBUG: Got ACK (0) of 18070d9d-dafb-4a27-8e10-e5573b4e48d4
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 44 = 0x0000002c
[3517] [6] DEBUG:   service_type: NULL
[3517] [6] DEBUG:   source_addr_ton: 5 = 0x00000005
[3517] [6] DEBUG:   source_addr_npi: 0 = 0x00000000
[3517] [6] DEBUG:   source_addr: "test"
[3517] [6] DEBUG:   dest_addr_ton: 1 = 0x00000001
[3517] [6] DEBUG:   dest_addr_npi: 0 = 0x00000000
[3517] [6] DEBUG:   destination_addr: "962796061912"
[3517] [6] DEBUG:   esm_class: 3 = 0x00000003
[3525] [0] DEBUG: HTTP: Resetting HTTPClient for `127.0.0.1'.
[3517] [6] DEBUG:   protocol_id: 0 = 0x00000000
[3517] [6] DEBUG:   priority_flag: 0 = 0x00000000
[3517] [6] DEBUG:   schedule_delivery_time: NULL
[3517] [6] DEBUG:   validity_period: NULL
[3517] [6] DEBUG:   registered_delivery: 0 = 0x00000000
[3517] [6] DEBUG:   replace_if_present_flag: 0 = 0x00000000
[3517] [6] DEBUG:   data_coding: 0 = 0x00000000
[3517] [6] DEBUG:   sm_default_msg_id: 0 = 0x00000000
[3517] [6] DEBUG:   sm_length: 7 = 0x00000007
[3517] [6] DEBUG:   short_message: "test123"
[3517] [6] DEBUG: SMPP PDU dump ends.
[3525] [1] DEBUG: HTTP: Destroying HTTPClient area 0x1dc3060.
[3525] [1] DEBUG: HTTP: Destroying HTTPClient for `127.0.0.1'.
[3517] [6] DEBUG: SMPP[UMNIAH]: Got PDU:
[3517] [6] DEBUG: SMPP PDU 0x1e38cc0 dump:
[3517] [6] DEBUG:   type_name: submit_sm_resp
[3517] [6] DEBUG:   command_id: 2147483652 = 0x80000004
[3517] [6] DEBUG:   command_status: 0 = 0x00000000
[3517] [6] DEBUG:   sequence_number: 44 = 0x0000002c
[3517] [6] DEBUG:   message_id: "65B63601"
[3517] [6] DEBUG: SMPP PDU dump ends. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:35:43.713

> 是否可以使用 PHP + Kannel 将 7 位字符串打包成 8 位字符串，以绕过 SMSC 的错误并每部分发送 153 个字符？

不太可能。当您`coding=1`在您的 sendms URL 中设置时，这会更改`data_coding`SMS PDU 中的参数。它将它设置为“未指定的八位字节”，手机可能永远不会尝试将其解码为 7 位 GSM 消息。

有趣的是，根据Android的短信解析源码中的一条评论，一些运营商使用这个`data_coding`来发送UTF8的短信。

# python - Python：如何在后台运行 def

> ID：11733339
> 
> 赞同：-5
> 
> 时间：2012-07-31T04:57:03.033
> 
> 标签：python

我现在如何运行 python 定义，但在一段时间后做更多的事情。所以这是一种在后台静默运行脚本，直到满足特定条件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:01:59.047

您可以使用 cron 作业在特定时间执行 python 脚本。您可以在此处找到类似的[答案](https://stackoverflow.com/questions/826882/crontab-in-python)。如果您正在寻找一个纯 python 实现，[这个答案会有所帮助](https://stackoverflow.com/a/374207/842837)。

# cordova - 如何在 phoneGap 应用程序中显示 .psd 图像？

> ID：11733343
> 
> 赞同：-2
> 
> 时间：2012-07-31T04:57:22.980
> 
> 标签：cordova

我需要如何使用持续 3 到 4 秒并自动隐藏的 HTML 显示启动图像。给我代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:07:12.640

将此行放在 html 的标题部分

`<meta http-equiv="refresh" content="3; URL=newfile.html">`

内容=3；是显示你的启动画面的秒数

& URL=newfile.html 是一个 html，在启动屏幕后，您的应用程序会重定向...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:15:56.833

除了 AamirKhan 的方法之外，iOS 和 Android 都有一种显示启动画面的本机方式：

对于 Android，在 Activity 类中添加/更改以下行：

```
super.setIntegerProperty("splashscreen", R.drawable.splash);
super.loadUrl("file:///android_asset/www/index.html", 3000); // for 3 seconds 
```

对于 iOS，您必须先修改 .plist，然后在 Javascript 代码中禁用启动画面。此处描述了详细信息：http: [//shazronatadobe.wordpress.com/2011/09/15/ios-phonegap-splash-screen-control/](http://shazronatadobe.wordpress.com/2011/09/15/ios-phonegap-splash-screen-control/)

# c - 将图像放置在固定布局 GTK2

> ID：11733352
> 
> 赞同：0
> 
> 时间：2012-07-31T04:58:08.177
> 
> 标签：c, graphics, gtk

我有一个尝试执行以下操作的应用程序：

*   创建`GTK2`顶级主窗口
*   在主窗口中添加一个固定框架，用于小部件的绝对定位
*   创建一个矩阵，`GtkImages`用于显示动画`GIFS`和静态`JPEGS`
*   在启动时，`JPEGS`从列表中随机选取的静态将填充矩阵
*   当事件发生时，矩阵将充满动画`GIFS`
*   动画结束时可能`JPEGS`会再次在矩阵中显示不同

仅当随机选择的两个或多个`JPEGS`被放置在矩阵的一行中时，才会发生运行时错误。

以下是此类运行时错误的示例：

```
(wrong:3909): Gtk-WARNING **: Can't set a parent on widget which has a parent 
```

如果该行的每个图像都是唯一的，则不会发生运行时错误。

代码片段和运行时输出如下：

```
/*
 * Compile me with:
 *   gcc -Wall -o wrong wrong.c $(pkg-config --cflags --libs gtk+-2.0 gmodule-2.0)
 */

/* header includes */

/**** prototypes ****/
/********************/

typedef struct
{
    unsigned int pixel_width, pixel_height;
    gchar fileName[20];
    GtkWidget *image;   
}symbol_t;

symbol_t symbols[] =
{
    { 118, 107, "images/LO.jpg", NULL },
    { 118, 107, "images/L1.jpg", NULL },
    { 118, 107, "images/L2.jpg", NULL },
    { 118, 107, "images/L3.jpg", NULL },
    { 118, 107, "images/H1.jpg", NULL },
    { 118, 107, "images/H2.jpg", NULL },
    { 118, 107, "images/H3.jpg", NULL },
    { 118, 107, "images/H4.jpg", NULL },
    { 118, 107, "images/H5.jpg", NULL }
};

GtkWidget *frame;       /* for absolute positioning of widgets */
GtkWidget *window;

int Init( void )
{
    /* initialize random number generator */
}

static void destroy (GtkWidget *window, gpointer data)
{
  gtk_main_quit ();
}

GtkWidget *SetupWindow(gchar *data, const gchar *filename)
{
    /* setup top-level window setting the background to the image contained
       in *filename and return window widget
    */

    return(window);
}

int main (int argc, char *argv[])
{
    unsigned int y, i, pos_x, pos_y;    

    gtk_init (&argc, &argv);

    Init(); // init random number generator
    window = SetupWindow("Broken", "images/background.jpg");
    g_signal_connect (G_OBJECT (window), "destroy", G_CALLBACK (destroy), NULL);

    frame = gtk_fixed_new();
    gtk_container_add(GTK_CONTAINER(window), frame);

    /* setup symbol jpgs */
    for( i = 0; i < 9; i++ )
    {
        /* load each symbol image into memory */
    symbols[i].image = gtk_image_new_from_file( symbols[i].fileName ); 
    }

    /* display some symbols */
    pos_y = 150;
    pos_x = 187;
    for( y = 0; y < 5 ; y++ )  /* first row - 5 symbols */
    {
    i = (unsigned int)(random()%9);
    printf("Symbol[%d] [%s]\n", i, symbols[i].fileName);
        gtk_fixed_put(GTK_FIXED(frame), symbols[i].image, pos_x, pos_y);
    pos_x += symbols[i].pixel_width;
    }

    gtk_widget_show_all(window);
    gtk_main ();
    return 0;
} 
```

**将两个或多个匹配符号（图像）放在行上时的运行时错误：**

> ```
> [chim] ~/source/matrix > ./wrong 
> Symbol[1] [images/L1.jpg]
> Symbol[7] [images/H4.jpg]
> Symbol[0] [images/LO.jpg]
> Symbol[7] [images/H4.jpg]
> 
> (wrong:3909): Gtk-WARNING **: Can't set a parent on widget which has a parent
> 
> Symbol[5] [images/H2.jpg]
> 
> (wrong:3909): Gtk-CRITICAL **: gtk_widget_destroy: assertion `GTK_IS_WIDGET (widget)' failed
> 
> (wrong:3909): Gtk-CRITICAL **: gtk_widget_destroy: assertion `GTK_IS_WIDGET (widget)' failed 
> ```

发生这种情况时，该行中的一些图像是空的（白色）。

**当没有匹配的符号（图像）放置在行上时输出：**

> ```
> [chim] ~/source/matrix > ./wrong 
> Symbol[1] [images/L1.jpg]
> Symbol[6] [images/H3.jpg]
> Symbol[3] [images/L3.jpg]
> Symbol[0] [images/LO.jpg]
> Symbol[4] [images/H1.jpg] 
> ```

在这种情况下，所有图像都会正确显示。

关于如何修复以及我可能做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:37:30.480

一旦您将图像放入另一个小部件，它就会由该（父）小部件拥有和管理——您不能将其添加到多个小部件中。

让它工作的简单方法是在`gtk_image_new_from_file()`每次要将图像添加到窗口时加载图像。如果您不想这样做，也许您可`gtk_image_new_from_image()`​​以在将图像添加到小部件之前使用复制图像之类的方法。

# c# - 如何根据公共字符串值比较两个列表？

> ID：11733358
> 
> 赞同：0
> 
> 时间：2012-07-31T04:58:42.750
> 
> 标签：c#, linq, list, lambda

我有两个对象列表集合，格式如下：

```
list1{
       new Object1{ State= "AL" , Value = 3.123}
       new Object2{ State= "CO", Value = 2.111}
       }

list2{
       new Object1{State="AL", Value=2.123}
       new Object2{State="CO", Value=3.111}
     } 
```

我需要比较这两个列表并生成另一个列表，如下所示：

```
list3{
      new Object1{State="AL", Value= (3.123 + 2.123)}
      new Object2{ State="CO", Value =(2.111 + 3.111) }
     } 
```

有人可以告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:06:12.717

看一下这个：

```
public class MyEntity
{
    public string Name { get; set; }
    public int Value { get; set; }
}

public static class MyEntityListExtension
{
    public static List<MyEntity> AddList(this List<MyEntity> FirstList, List<MyEntity> SecondList)
    {
        List<MyEntity> ReturnList = new List<MyEntity>();

        foreach (MyEntity CurrentEntity in FirstList)
        {
            MyEntity TempEntity = SecondList.Where<MyEntity>(x => x.Name.Equals(CurrentEntity.Name)).SingleOrDefault<MyEntity>();

            if (TempEntity != null)
            {
                ReturnList.Add(new MyEntity()
                {
                    Name = CurrentEntity.Name,
                    Value = CurrentEntity.Value + TempEntity.Value
                });
            }
        }

        return ReturnList;
    }
} 
```

用法：

```
 List<MyEntity> list1 = new List<MyEntity>();
        List<MyEntity> list2 = new List<MyEntity>();
        List<MyEntity> addedList = new List<MyEntity>();

        list1.Add(new MyEntity()
        {
            Name = "A",
            Value = 1
        });

        list1.Add(new MyEntity()
        {
            Name = "B",
            Value = 1
        });

        list2.Add(new MyEntity()
        {
            Name = "A",
            Value = 2
        });

        addedList = list1.AddList(list2); 
```

问候

* * *

好的，我想出了第二个解决方案。看，我不是 lambda 专家，所以我只是觉得这太棒了！

```
public static class MyEntityListExtension
{
    public static List<MyEntity> AddList(this List<MyEntity> FirstList, List<MyEntity> SecondList)
    {
        return FirstList.Join<MyEntity, MyEntity, string, MyEntity>(SecondList, x => x.Name, y => y.Name, (x, y) =>
            {
                return new MyEntity()
                {
                    Name = x.Name,
                    Value = x.Value + y.Value
                };
            }).ToList<MyEntity>();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:23:35.747

安德烈的回答肯定会奏效。您可以将其推广到**分组**的概念并支持任意数量的`IEnumerables`合并

```
List<MyEntity> source1 = ...;
List<MyEntity> source2 = ...;
IEnumerable<MyEntity> source3 = ...;

var mergedList = (from item in source1.Contact(source2).Concat(source3)
                  group item by item.Name into g
                  select new MyEntity { Name = g.Key, Value = g.Sum(e => e.Value) })
                  .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:58:53.753

我还没有测试过代码，但这可能会给你一些想法......

```
 List<Obj> list1= New List(obj1,obj2);
 List<Obj> list2= New List(obj3,obj4);

    var allObjects= 
        from list1.Concat(list2); 

    var list3=from o in allObjects
            group o by o.State into g 
        select new {State=g.key,Value=g.Sum(p => p.Value)};

    foreach (var obj in list3) 
    { 
        Console.WriteLine("{0},{1}",obj.State,obj.Value); 
    } 
```

# java - 如何将引用（不可序列化）从一个 Activity 传递到另一个？

> ID：11733361
> 
> 赞同：5
> 
> 时间：2012-07-31T04:58:49.023
> 
> 标签：java, android, android-activity

假设我有一个对象的引用，我应该如何将它从一个 Activity 传递到另一个？

我不想查询应用程序对象/单例/静态变量。

这还有可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T05:02:43.590

您可以在另一个活动中声明一个静态变量，或者在应用程序类中声明一些全局变量，然后将其访问到任何活动，例如您想从 OldActivity 解析一些 NewType 类型的对象到类 NewActivity。执行以下操作：

在 NewActivity.java 中声明一个静态 NewType 的对象。

```
public static NewObject newObject=null; 
```

当您调用 NewActivity 时，请执行以下操作。

```
NewActivity.newObject=item;
Intent intent=new Intent(OldActivity.this, NewActivity.class);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:03:30.300

您可以通过以下方式之一执行此操作：

*   使对象静态。（最简单但并不总是有效）
*   序列化 -> 发送 -> 接收 -> 反序列化。如果您的类不可序列化，您也可以使用[JSON 解码和编码之类的方法。](https://stackoverflow.com/questions/3785082/json-deserializing-with-json-parsing-in-android-application)（涉及很多开销，你不想使用这个，除非你有充分的理由）
*   Parcelable（最高效，最快）

这是文档中的一个示例：您可以用 a 包装您的对象`parcelable`，将其附加到一个意图，然后在接收活动中“解包”它。

```
 public class MyParcelable implements Parcelable {
     private int mData;

     public int describeContents() {
         return 0;
     }

     public void writeToParcel(Parcel out, int flags) {
         out.writeInt(mData);
     }

     public static final Parcelable.Creator<MyParcelable> CREATOR
             = new Parcelable.Creator<MyParcelable>() {
         public MyParcelable createFromParcel(Parcel in) {
             return new MyParcelable(in);
         }

         public MyParcelable[] newArray(int size) {
             return new MyParcelable[size];
         }
     };

     private MyParcelable(Parcel in) {
         mData = in.readInt();
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:17:19.577

解决方案之一：

你可以制作一个单例类来携带你想要的信息

例如：

```
StorageManager.getInstance().saveSomething(Object obj); 
```

然后用各自的getter方法取回

确保您处理同步问题；）

# c++ - 基于Boost foreach实现enumerate_foreach

> ID：11733364
> 
> 赞同：3
> 
> 时间：2012-07-31T04:59:04.483
> 
> 标签：c++, loops, boost, boost-preprocessor

作为这个问题的序言：我一直在一个更大的工具包中实现各种 C++ 实用函数和（当我必须）宏供我自己使用。最近我一直在制作各种基于 BOOST_FOREACH 的循环宏以及可迭代的有意识的函数。

长话短说，我在制作一个使用 BOOST_FOREACH 但传递了一个附加参数的**枚举循环**时遇到了困难，该参数在循环的每次迭代中都会递增。这很像 Python 中的 enumerate 命令，我发现它在循环任意迭代器而不添加大量样板代码时很有用。该宏采用类似 BOOST_FOREACH 的形式：

```
ENUMERATE_FOREACH(COUNT, VAR, COL) 
```

并且会有效地做到这一点，但不依赖于放置不平衡的'}'来关闭（或其他循环结束宏）：

```
COUNT = 0; BOOST_FOREACH(VAR, COL) { COUNT++; ...Rest of loop... 
```

现在，在我被指责试图在 C++ 中创建非 C++ 运算符之前，我完全意识到这是将一个外来概念塞进 C++ 中，而我并没有尝试 Pythonize C++ 代码。我只是好奇是否完全可以使用已知的工具集/提升来实现这样的循环而没有极端依赖。拥有这样的宏定义将消除某些循环样式的错误来源，在这些样式中我需要在迭代时进行计数，并且它消除了 COUNT 变量的用途的歧义。

我考虑过在 COL 变量进入 BOOST_FOREACH 之前对其进行模板包装，但是 COL 的可能性数量使得在不制作不同版本的 ENUMERATE_FOREACH 并重新实现大量 BOOST_FOREACH 的情况下，使用一些可迭代变量的组合变得困难/不可能 - - 没有大量测试/时间的艰巨和愚蠢的任务。

做一个单独的内联函数可能会起作用，但是循环的语法会被破坏，我会遇到更多的 on-each 风格的运算符函数传递情况（我已经实现了）。

这让我不得不从 boost 的库中获取 foreach.hpp 的最后几行，并在附加参数上插入我自己的增量运算符。然后我变得依赖于 boost 版本，并担心新的更新（任何语法更改）会破坏我的 hacky 自定义宏。

我想到的最后一个选项是执行 ENUMERATE_BEGIN 和 ENUMERATE_END 来隐藏我的迭代器增量操作。这种方法比单个宏更容易出错，因为用户必须放置两个宏而不是一个——尽管这可能是唯一简单的解决方案。

我试着在 SO 和其他来源上四处寻找，看看是否有人在没有太多运气的情况下尝试过这个。希望有人成功地使用了这样的实现概念，或者对改变我的方法有想法。如果没有一种干净的方法可以做到这一点，我可以在我想计数时继续使用 count++ 开始我的循环。同样，这更像是一种好奇心，有人可能会提出我所争论的一个想法是一种完全合理的方法，或者尽可能好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T05:16:20.723

您可以通过使用 的四参数版本来解决它`ENUMERATE_FOREACH`，其中最后一个参数是要调用的谓词。

就像是：

```
ENUMERATE_FOREACH(COUNT, VAR, COL, PRED) 
```

它会扩展到类似

```
{
    COUNT = 0;
    BOOST_FOREACH(VAR, COL)
    {
        PRED(COUNT);
        COUNT++;
    }
} 
```

上面的好处是谓词可以是 C++11 的 lambda 函数：

```
ENUMERATE_FOREACH(COUNT, VAR, COL,
                  [](int count){ cout << "count = " << count << '\n'; }); 
```

**编辑：**另一种方法是仍然使用第四个参数，但让该参数成为实际代码。例如：

```
ENUMERATE_FOREACH(COUNT, VAR, COL, do { std::cout << COUNT << '\n'; } while (0)) 
```

将扩大到

```
{
    COUNT = 0;
    BOOST_FOREACH(VAR, COL)
    {
        do { std::cout << COUNT << '\n'; } while (0);
        COUNT++;
    }
} 
```

它可能比使用例如 C++11 lambdas 更混乱一些。

**编辑 2：**如果您有 C++11，并且可以使用 lambda，那么您可能也有新[的基于范围的 for 循环](http://en.wikipedia.org/wiki/C%2B%2B11#Range-based_for-loop)，这意味着您可以创建一个适当的函数，例如：

```
template<typename SeqT, typename PredT>
void for_each_count(SeqT seq, PredT pred)
{
    int count = 0;
    for (auto val : seq)
    {
        pred(val, count);
        count++;
    }
} 
```

用法：

```
std::vector<int> v = {1, 2, 3, 4};
for_each_count(v,
    [](int v, int c){
        std::cout << "value = " << v << ", count = " << c << '\n';
    }); 
```

以上将打印

```
值 = 1，计数 = 0
值 = 2，计数 = 1
值 = 3，计数 = 2
值 = 4，计数 = 3

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:13:31.703

在阅读了 Joachim 的回复后，我非常满意，但我尝试操纵 BOOST_FOREACH 直到我至少可以以一种非常 hacky 的方式进行操作，然后我发现我实际上可以以一种良性的方式实现计数器，而无需重写整个宏或做一些 # undef #define 关于 BOOST_FOREACH_NEXT 的语句。

我滥用了 BOOST_FOREACH 有一个 (VAR = derefence(...); ...) 语句的事实，并在 VAR 和 = 之间放置了一个结构，以便我得到 (VAR = IncrementCountAndPassRHS = derefence(...); .. .)。

我还没有对宏扩展问题进行太多测试，但我*认为*它在 forloop 中是安全的。

**编辑**添加更新以修复同一行中多个循环的变量范围名称重叠问题。

```
namespace loopnamespace {
template<typename T>
void incrementT(T *t) {
    (*t)++;
}

struct IncrementCounterPassthrough {
    bool checker;
    boost::function<void(void)> incrementer;

    template<typename Count>
    IncrementCounterPassthrough(Count& t) {
        t = -1;
        checker = true;
        incrementer = boost::bind(&incrementT<Count>, &t);
    }

    template<typename T>
    T& operator=(T& rhs) {
        incrementer();
        return rhs;
    }
};
}

#define ENUMERATE_FOREACH(COUNT, VAR, COL)                                                                   \
    for(::loopnamespace::IncrementCounterPassthrough BOOST_FOREACH_ID(_foreach_count_pass)(COUNT);           \
        BOOST_FOREACH_ID(_foreach_count_pass).checker; BOOST_FOREACH_ID(_foreach_count_pass).checker = false)\
    BOOST_FOREACH(VAR = BOOST_FOREACH_ID(_foreach_count_pass), COL) 
```

允许我这样做：

```
std::string hello( "Hello, boost world!" );
unsigned int value;
ENUMERATE_FOREACH( value, char ch, hello ) {
   std::cout << ch << " => " << value << "\n";
} 
```

输出：

```
H => 0
e => 1
l => 2
l => 3
o => 4
, => 5
  => 6
b => 7
o => 8
o => 9
s => 10
t => 11
  => 12
w => 13
o => 14
r => 15
l => 16
d => 17
! => 18 
```

# regex - 如何在 sublime text 2 中进行正则表达式搜索和替换？

> ID：11733370
> 
> 赞同：10
> 
> 时间：2012-07-31T04:59:51.497
> 
> 标签：regex, sublimetext2

我想从 ST2 中的 html 文档中删除内联样式。

我想我的正则表达式会是这样的 style=\"*\"

如果那是错误的，那也没关系。我相信我会弄清楚我需要的表达方式。

我无法弄清楚的是如何实际使用正则表达式来查找或查找和替换 ST2 中的文本。文档说可以做到。但是我找不到有关如何执行此操作的文档。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T05:05:32.863

只需打开搜索+替换功能（通过 Ctrl-H 或菜单栏）并选中它左侧的第一个框（上面带有“*”的框，或者您可以按 Alt+R）

然后搜索字段将用作正则表达式，您可以在替换框中使用通常的 $1、$2、$3 变量来使用找到的模式

更多信息[在这里](http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace_overview.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-06T01:46:55.820

我有一个类似的任务要执行，我以 Nas62 建议的方式使用的正则表达式是

```
style=\"(.*?)\" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T12:33:20.437

查找内容：style=".*"

替换为：留空

单击全部替换按钮。

# iphone - uitableview 问题中的两个文本字段

> ID：11733377
> 
> 赞同：0
> 
> 时间：2012-07-31T05:00:34.057
> 
> 标签：iphone, ios5, uitableview, uitextfield

我有一个**2 行 n 4 个部分**的 uitableview，每个单元格中 都有一个**标签和文本字段**。问题是我的标签出现在所有部分中，因为我的文本字段在其他部分中没有重复。实际上，每个单元格都有两个文本字段，一个是普通文本字段，另一个是选择器文本字段（当我单击 TF 时，选择器会弹出）。**对于一个部分，TF 都来了，但在其他部分没有重复**。

我的代码

```
static NSString *CellIdentifier = @"Cell";

UITextField *textField;

NSString *string=[NSString stringWithFormat:@"ident_%d",indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:string];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
       }
cell.selectionStyle=UITableViewCellSelectionStyleNone;

UILabel *lbl1 = [[UILabel alloc]initWithFrame:CGRectMake(50, 10, 100, 35)];
[lbl1 setFont:[UIFont systemFontOfSize:16]];
[lbl1 setTextColor:[UIColor blackColor]];
[lbl1 setBackgroundColor:[UIColor clearColor]];

if (indexPath.row==0) {

    lbl1.text = @"Quantity";
    [cell.contentView addSubview:self.qntTF];

}

if (indexPath.row==1) {
    lbl1.text = @"Unit";
    [cell.contentView addSubview:self.unitTF];
  }

// Configure the cell...;
textField  =[self.tableArray objectAtIndex:indexPath.row];
[cell.contentView addSubview:textField];
cell.textLabel.text = nil;
textField.tag = TextFieldTag;
cell.detailTextLabel.text = nil;
[cell addSubview:lbl1];
[lbl1 release];

return cell; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:33:41.833

代码现在的方式是，您添加的标签比您想象的要多得多（每次表格滚动时），您只添加一个文本字段，然后将其移动到不同的单元格。它最终出现在最后渲染的任何单元格上。

现在，您的 cellForRow... 方法的方式是，*每次*出现任何部分的第 0 行和第 1 行时——包括当用户只是在屏幕上滚动它们时——另一个文本视图和标签作为子视图添加到单元格中。向上和向下滚动 100 次，单元格中将有 100 个文本视图和标签堆叠在一起。

为避免这种情况，请仅在创建单元格时添加子视图。所以在这个街区...

```
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    UILabel *label = /* all of your label init */
    label.tag = kSOME_UNIQUE_INT_CONST;

    UITextField *textField = /* all of your text field init */
    textField.tag = kSOME_OTHER_UNIQUE_INT_CONST

    [cell addSubview:label];
    [cell addSubview:textField];
} 
```

现在，在块之后，您可以假设每个单元格都只有一个标签和一个文本字段。下一项工作是找到它们（它们要么是刚刚创建的，要么已经在单元格中，如果它被重复使用）......

```
UILabel *label = (UILabel *)[cell viewWithTag:kSOME_UNIQUE_INT_CONST];
UILabel *textField = (UITextField *)[cell viewWithTag:kSOME_OTHER_UNIQUE_INT_CONST]; 
```

现在您已准备好为给定的部分和行配置单元格。这里的关键是要记住你经常得到重复使用的单元格。它们仍将针对已滚动的行进行配置。所以每个“if”块都需要一个相应的“else”块来改变子视图的状态：

```
if (indexPath.row == 0) {
    label.text = @"Quantity";
    // not sure what view you were adding here, but don't
    // subview adds only in the cell==nil block above
} else {
    label.text = /* whatever the label should be for row != 0 */
    // this is important:  if you change label state in the if, you
    // must specify it's state also in an else, otherwise you'll see
    // leftover state on the label when the cell is reused for a different row
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:48:39.027

在返回单元格之前添加 [cell setNeedsDisplay]; 线。

[单元集NeedsDisplay]；
返回单元格；

会没事的。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:09:02.700

为什么不以与标签相同的方式初始化文本框？

你有TextField：

```
UITextField *textField; 
```

然后标签：

```
UILabel *lbl1 = [[UILabel alloc]initWithFrame:CGRectMake(50, 10, 100, 35)];
[lbl1 setFont:[UIFont systemFontOfSize:16]];
[lbl1 setTextColor:[UIColor blackColor]];
[lbl1 setBackgroundColor:[UIColor clearColor]]; 
```

你为什么不在标签附近试试这个：

```
UITextField *textfield = [[UITextField alloc]initWithFrame:CGRectMake(LOCATION)];
[textfield setTextColor:[UIColor blackColor]];
[textfield setBackgroundColor:[UIColor clearColor]];
[textfield setBorderStyle:UITextBorderStyleNone]; 
```

也可能是您从中获取文本字段的数组中只有两个文本字段？

也可能是因为看起来您没有实例化一个新的文本框，只是一遍又一遍地从实现中添加相同的文本框，例如：

```
if (indexPath.row==0) {

    lbl1.text = @"Quantity";
    [cell.contentView addSubview:self.qntTF];

}

if (indexPath.row==1) {
    lbl1.text = @"Unit";
    [cell.contentView addSubview:self.unitTF];
} 
```

# c# - 根据文化将字符串转换为日期时间

> ID：11733385
> 
> 赞同：0
> 
> 时间：2012-07-31T05:01:15.117
> 
> 标签：c#

有谁知道如何根据用户的文化将字符串转换为日期

我正在使用此代码

```
DateTime.Parse("2-7-1997", CultureInfo.InvariantCulture); 
```

它工作正常，因为我的文化是为我们设定的

但如果我通过

```
DateTime.Parse("23-7-1997", CultureInfo.InvariantCulture); 
```

它抛出格式异常

> 字符串未被识别为有效的日期时间。

是否有任何东西可以根据用户文化将字符串转换为日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:09:23.230

```
// convert it to a datetime
// "d" is the required format
var date = DateTime.ParseExact("7/23/1997", "d", CultureInfo.InvariantCulture);

// now you can output the date in the user's culture
var localizedDateString = date.ToString("d"); 
```

# gridview - 如何取消选择网格视图中的前一行？

> ID：11733386
> 
> 赞同：0
> 
> 时间：2012-07-31T05:01:15.180
> 
> 标签：gridview

我在每一行都有带有下拉列表模板字段的gridview。当我从下拉列表中选择任何值时，它会改变下面第三行的颜色。但是当我点击另一个下拉列表时，它会改变下面第三行的颜色而不是颜色上一行的仍然坚持它。我想要一次有颜色的一行。怎么做。？我正在关注。

```
 protected void GridView1_SelectedIndexChanged(object sender,EventArgs e)
    {

            DropDownList ddl = (DropDownList)sender;
            GridViewRow row = (GridViewRow)ddl.NamingContainer;
            int g = row.RowIndex + 3;
            GridView1.Rows[g].BackColor = Color.Yellow;

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:08:11.107

使用如下代码...

受保护的无效GridView1_SelectedIndexChanged（对象发送者，EventArgs e）{

```
 foreach (GridViewRow gvRow in GridView1.Rows)
        {
            int g1 = gvRow.RowIndex;
            GridView1.Rows[g1].BackColor = Color.White;
        }

        DropDownList ddl = (DropDownList)sender;
        GridViewRow row = (GridViewRow)ddl.NamingContainer;
        int g = row.RowIndex + 3;
        GridView1.Rows[g].BackColor = Color.Yellow; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T06:17:34.670

您可以使用`ClearSelection()`of 的方法`DataGridView`来取消选择行。

# celery - 如何在 celery 中配置延迟时间？

> ID：11733387
> 
> 赞同：1
> 
> 时间：2012-07-31T05:01:32.247
> 
> 标签：celery

输入：

```
>>> from registration import tasks
>>> tasks.mail.delay()
<AsyncResult: 36a2e61c-493b-472c-99f1-cb2391110aa9>
>>> r=tasks.mail.delay()
>>> r.ready() 
```

输出：

```
Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
      File "/usr/local/lib/python2.6/dist-packages/celery/result.py", line 174, in ready
        return self.state in self.backend.READY_STATES
      File "/usr/local/lib/python2.6/dist-packages/celery/result.py", line 277, in state
        return self.backend.get_status(self.id)
      File "/usr/local/lib/python2.6/dist-packages/celery/backends/base.py", line 487, in _is_disabled
        raise NotImplementedError('No result backend configured.  '
    NotImplementedError: No result backend configured.  Please see the documentation for more information. 
```

我如何配置后端，以便我可以修复特定的延迟时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:36:25.230

如果您使用 celeryconfig.py 配置模块，则可以通过 CELERY_RESULT_BACKEND 设置配置结果后端

```
CELERY_RESULT_BACKEND="amqp" 
```

或通过 Celery 实例

```
celery = Celery('tasks', backend='amqp', broker='amqp://') 
```

请查看[文档](http://celery.github.com/celery/getting-started/first-steps-with-celery.html#keeping-results)以获取更多信息。

# vim - 如何防止我的 vim autocmd 在命令行窗口中运行？

> ID：11733388
> 
> 赞同：4
> 
> 时间：2012-07-31T05:01:33.273
> 
> 标签：vim

当我离开插入模式时，我使用自动命令关闭预览窗口，如[本答案](https://stackoverflow.com/a/3107159/79125)中所述。但是当我在命令行窗口 ( `q:`) 中时，我得到一个错误：`E11: Invalid in the command-line window; <CR> executes, CTRL-C quits: :pclose|endif`

我怎样才能防止这个错误？

我尝试`:set`在命令行窗口和常规窗口中运行，但没有明显的选项在差异中显示出来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T05:16:11.987

用于`silent!`抑制错误：

```
autocmd CursorMovedI *  if pumvisible() == 0|silent! pclose|endif
autocmd InsertLeave * if pumvisible() == 0|silent! pclose|endif 
```

# python - 如何清除 Vte.Terminal 中的输出？

> ID：11733391
> 
> 赞同：1
> 
> 时间：2012-07-31T05:02:04.483
> 
> 标签：python, gtk, pygtk, vte

如何清除 Vte.Terminal 中的所有输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T12:48:53.657

我在用着

```
vte.fork_command("clear") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T23:41:14.393

```
vte.feed('\033[2J') 
```

对于其他转义序列：

*   [Bash 提示 HOWTO](http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x361.html)
*   [ANSI 转义码（维基百科）](http://en.wikipedia.org/wiki/ANSI_escape_code)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T00:17:19.383

我自己在 Vte 方面遇到了一些问题，所以我不知道我是否是合适的人选。

您是否尝试过用容器中的另一个终端替换旧终端？它没有清除，但会有一个空终端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:22:10.003

它只会清除终端中*可见*`cls`的文本，但是，您可以运行命令或修改`feed()`方法和空格。

# c# - Onclick 事件在其下方显示一条红线

> ID：11733396
> 
> 赞同：0
> 
> 时间：2012-07-31T05:02:51.260
> 
> 标签：c#, javascript, jquery, html-agility-pack

我正在使用 .html 在 html 文档中插入图像`HtmlAgilityPack`。但是代码在 c# 中显示了一条红线：

```
HtmlNode usern = HtmlNode.CreateNode("<img src='/images/Home.png' alt='home' 

  title='home' onclick='javascript:document.location.href="/Home/Index;"'  <====                                                                                

  style='position:absolute;cursor:pointer;top:10px;left:20px;' />"); 
```

它在 下显示一条红线`onclick event part`。谁能解释一下为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:05:52.980

编辑：

你的字符串中有引号。你需要用反斜杠转义它们：

```
HtmlNode usern = HtmlNode.CreateNode("<img src='/images/Home.png' alt='home' title='home' onclick='javascript:document.location.href=\"/Home/Index\"' style='position:absolute;cursor:pointer;top:10px;left:20px;' />"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:08:16.090

您的分号应该在 href 值周围的引号之外：

```
onclick='javascript:document.location.href="/Home/Index";' 
```

# objective-c - 使 UIWebView 查看的图像更小

> ID：11733397
> 
> 赞同：1
> 
> 时间：2012-07-31T05:02:58.317
> 
> 标签：objective-c, uiwebview, nsdata

我有一个来自数据库的条目列表，我将它们输入到 HTML 到 UIWebView，该 UIWebView 正在制作页面上的数据库条目列表。（比扩展 UITableView 单元更容易/更好）

我的问题是 UITableView 我能够在服务器上抓取图像作为 NSData 并且 UIImageJpegRepresentation 将图像的质量设置得更低一点，以便在 iPhone 的蜂窝下载中更好。

现在我可以从服务器获取图像作为 NSData 压缩图像，然后将其转换为 base 64string 并将其吐到 WebView 中，但是还有其他方法可以做到这一点吗？

TLDR：如何减小 HTML 页面中显示的图像大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:33:03.287

我通过将要访问的页面提供给 Web 服务来解决此问题。然后，Web 服务返回一组以较低质量压缩的图像。

因为该应用程序要访问的唯一页面是我自己的用户头像和我能够描述需要哪些图像的东西。

在 iPhone 上，我用 UIWebView 中那些较小的图像集重建了网页。

所以最后我下载了更少的蜂窝数据，问题就解决了。

# mysql - 带有选择的mysql更新查询

> ID：11733405
> 
> 赞同：0
> 
> 时间：2012-07-31T05:03:34.667
> 
> 标签：mysql

这是我的 mysql 查询，但它不起作用

```
update  jos_users set name =
(SELECT name 
FROM jos_users
WHERE id = 478) where id =477 
```

谁能告诉如何执行这个查询？或其他可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:16:14.890

你应该得到的错误信息是：

```
#1093 - You can't specify target table 'jos_users' for update in FROM clause 
```

这意味着您不能在子选择中使用要更新的同一个表。无论如何，有一个小解决方法可以避免这种情况：只需使用嵌套的子选择：

```
update
  jos_users
set
  name = (select name from
            (SELECT name FROM jos_users WHERE id = 478)
               AS subselect_value)
where
  id = 477 
```

# java - 在特定位置将一个图像添加/覆盖到另一张图像？

> ID：11733406
> 
> 赞同：2
> 
> 时间：2012-07-31T05:03:35.727
> 
> 标签：java, image, jai

我想将图像添加到特定位置的另一个图像，它可以是像素或厘米或（x，y）。我必须通过使用 JAI（Java Advanced Imaging）的 Java 编程来完成。
我用谷歌搜索获取示例代码。
我得到了替换，只在最后添加。但不是在特定位置。
任何想法都是值得赞赏的。
拉克斯曼杂烩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:33:54.977

```
BufferedImage sourceImage = ImageIO.read("myImage");
BufferedImage overlayImage = ImageIO.read("myOverlay");

Graphics2D g2Source = sourceImage.createGraphics();
g2Source.drawImage(overlayImage, x, y, null);

g2Source.dispose(); 
```

# c# - 用同步方法包装异步调用

> ID：11733409
> 
> 赞同：0
> 
> 时间：2012-07-31T05:03:45.417
> 
> 标签：c#, asynchronous

我有一个带有异步方法的第 3 方 DLL，我想用另一个等待其结果的方法包装它。

我开始编写一个类来隐藏功能，但现在我不知道如何`Doc.Completed`在`this.version.DownloadFile(this)`.`Doc.Download`

DLL 调用`InitTransfer`，然后`OnProgressNotify`多次，然后`Completed`. `OnError`可以在任何阶段调用，但`Completed`总是最后调用。我不在乎`InitTransfer`，`OnProgressNotify`或者`OnError`。

我已经阅读 [了同步方法中的](https://stackoverflow.com/questions/7842180/asynchronous-call-in-synchronous-method)异步调用和[将异步调用转换为同步](https://stackoverflow.com/questions/10124524/turn-asynchronous-calls-into-synchronous)，但我不明白如何将答案应用于这种情况。

我正在使用 C# 4。

```
public class Doc : SomeInterfaceFromTheDll
{
  private readonly IVersion version; // An interface from the DLL.

  private bool downloadSuccessful;

  public Doc(IVersion version)
  {
    this.version = version;
  }

  public bool Download()
  {
    this.version.DownloadFile(this);
    return ??? // I want to return this.downloadSuccessful after Completed() runs.
  }

  public void Completed(short reason)
  {
    Trace.WriteLine(string.Format("Notify.Completed({0})", reason));
    this.downloadSuccessful = reason == 0 ? true : false;
  }

  public void InitTransfer(int totalSize)
  {
    Trace.WriteLine(string.Format("Notify.InitTransfer({0})", totalSize));
  }

  public void OnError(string errorText)
  {
    Trace.WriteLine(string.Format("Notify.OnError({0})", errorText));    
  }

  public void OnProgressNotify(int bytesRead)
  {
    Trace.WriteLine(string.Format("Notify.OnProgressNotify({0})", bytesRead));
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:31:16.187

这可以使用 ManualResetEvent 来实现，如下所示。不过有一些注意事项。主要是这种机制不允许您同时在多个线程上调用`Download()`同*一个* `Doc`实例。如果您需要这样做，则可能需要使用不同的方法。

```
public class Doc : SomeInterfaceFromTheDll
{
  private readonly IVersion version; // An interface from the DLL.
  private readonly ManualResetEvent _complete = new ManualResetEvent(false);

  private bool downloadSuccessful;

  // ...

  public bool Download()
  {
    this.version.DownloadFile(this);
    // Wait for the event to be signalled...
    _complete.WaitOne();
    return this.downloadSuccessful;
  }

  public void Completed(short reason)
  {
    Trace.WriteLine(string.Format("Notify.Completed({0})", reason));
    this.downloadSuccessful = reason == 0;
    // Signal that the download is complete
    _complete.Set();
  }

  // ...
} 
```

# php - 替换为空白或空字符串 PHP

> ID：11733412
> 
> 赞同：3
> 
> 时间：2012-07-31T05:04:39.860
> 
> 标签：php, str-replace

好吧，我已经尝试过这些，似乎它们都不起作用，我的示例字符串是

```
 $text_description="&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;Hello world! lorel ipsum";

 $text_description= str_replace("&nbsp;"," ",$text_description);
 $text_description = preg_replace("/&#?[a-z0-9]+;/i"," ",$text_description);
 $text_description=html_entity_decode($text_description); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T05:14:29.360

```
$text_description="&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;Hello world! lorel ipsum";
$text_description = str_replace('&nbsp;', ' ', $text_description);
echo $text_description; 
```

输出：

> 你好世界！洛雷尔伊普苏姆

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-29T18:43:37.510

回答有点晚，但希望可以帮助其他人。从 html 中提取内容最重要的是在 php.ini 中使用[utf8_decode()](http://php.net/manual/en/function.utf8-decode.php)。然后所有其他字符串操作变得轻而易举。甚至外来字符也可以通过直接从浏览器复制粘贴字符到php代码中来替换。以下函数替换`&nbsp;`为空字符。然后使用`preg_replace()`. 最后使用删除前导和尾随空格`trim()`。

```
function clean($str)
{       
    $str = utf8_decode($str);
    $str = str_replace("&nbsp;", "", $str);
    $str = preg_replace('/\s+/', ' ',$str);
    $str = trim($str);
    return $str;
}

$html = "&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;Hello world! lorel ipsum";
$output = clean($html);
echo $output; 
```

> 你好世界！洛雷尔伊普苏姆

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T16:28:00.733

您可以只使用[html_entity_decode()](http://php.net/manual/en/function.html-entity-decode.php)，它允许您将所有 html 实体替换为其适用的字符，例如：

```
 $HtmlText="it's&nbsp;Working \"Correctly\"";
 $MyText=html_entity_decode($HtmlText);
 echo $MyText; // "it's Working "Correctly" 
```

我希望这有帮助！;)

# javascript - jQuery UI 自动完成：如何从 ajax 数据源预取

> ID：11733415
> 
> 赞同：0
> 
> 时间：2012-07-31T05:04:53.200
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我有一个从服务器获取结果的自动完成表单，但是在慢速连接时它变得不稳定，因为数据加载需要时间。无论如何我们可以从ajax源预取数据吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:10:31.357

预取？那不是叫“不是ajax”吗？只需使用页面加载数据并将其用作静态数据源。

当他们“关注”该字段时，可以选择获取数据。这将是获取页面加载数据和执行合法动态源之间的唯一真正妥协。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:23:04.847

只是为了回答您的问题，可以使用同步 AJAX 进行预取。使用 jQuery，它将是（检查语法，因为我在打电话）。

```
$.ajax({
     url: "",
     async: false,
     success: function(resp)
     {}
}); 
```

这将确保在发布之前加载您的数据。但正如 Sinethera 所说，这违背了 AJAX 的全部目的。如果您可以预取内容，则意味着您知道预期的内容。那为什么不把它作为一个静态列表呢？

# multithreading - IIS 网络花园是否使用线程或进程？

> ID：11733418
> 
> 赞同：1
> 
> 时间：2012-07-31T05:05:18.270
> 
> 标签：multithreading, iis, web, process, web-garden

当您在 IIS 中设置应用程序池的最大工作进程属性时，您实际上是在设置进程数还是线程数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:09:31.160

这些是进程（w3wp 实例）。每个进程将有多个线程。

[ASP.NET Web Garden - 我需要多少个工作进程？](https://stackoverflow.com/questions/2151251/asp-net-web-garden-how-many-worker-processes-do-i-need)

# php - 安装 php* 与 mysql-server 冲突

> ID：11733419
> 
> 赞同：0
> 
> 时间：2012-07-31T05:05:18.877
> 
> 标签：php, mysql, linux, amazon-ec2, apache

我是一个 Linux 新手，尝试将 php5 和 httpd 安装到我的 amazon ec2 linux 实例中： yum -y install php* httpd;

我遇到了以下冲突：

```
---> Package unixODBC.i686 0:2.2.14-11.5.amzn1 will be installed
--> Running transaction check
---> Package ghostscript.i686 0:8.70-11.20.amzn1 will be installed
--> Processing Dependency: urw-fonts >= 1.1 for package: ghostscript-8.70-11.20.amzn1.i686
--> Processing Dependency: libcupsimage.so.2 for package: ghostscript-8.70-11.20.amzn1.i686
--> Processing Dependency: libjasper.so.1 for package: ghostscript-8.70-11.20.amzn1.i686
--> Processing Dependency: libcairo.so.2 for package: ghostscript-8.70-11.20.amzn1.i686
--> Processing Dependency: libcups.so.2 for package: ghostscript-8.70-11.20.amzn1.i686
--> Processing Dependency: ghostscript-fonts for package: ghostscript-8.70-11.20.amzn1.i686
---> Package gnutls.i686 0:2.8.5-4.6.amzn1 will be installed
--> Processing Dependency: libtasn1.so.3 for package: gnutls-2.8.5-4.6.amzn1.i686
--> Processing Dependency: libtasn1.so.3(LIBTASN1_0_3) for package: gnutls-2.8.5-4.6.amzn1.i686
---> Package lcms-libs.i686 0:1.19-1.5.amzn1 will be installed
---> Package libXt.i686 0:1.0.7-1.6.amzn1 will be installed
---> Package libgomp.i686 0:4.6.2-1.27.amzn1 will be installed
---> Package libtiff.i686 0:3.9.4-6.10.amzn1 will be installed
---> Package libwmf-lite.i686 0:0.2.8.4-22.7.amzn1 will be installed
--> Running transaction check
---> Package cairo.i686 0:1.8.8-3.1.4.amzn1 will be installed
--> Processing Dependency: libpixman-1.so.0 for package: cairo-1.8.8-3.1.4.amzn1.i686
---> Package cups-libs.i686 1:1.4.2-44.10.amzn1 will be installed
--> Processing Dependency: libavahi-common.so.3 for package: 1:cups-libs-1.4.2-44.10.amzn1.i686
--> Processing Dependency: libavahi-client.so.3 for package: 1:cups-libs-1.4.2-44.10.amzn1.i686
---> Package ghostscript-fonts.noarch 0:5.50-23.1.6.amzn1 will be installed
--> Processing Dependency: xorg-x11-font-utils for package: ghostscript-fonts-5.50-23.1.6.amzn1.noarch
---> Package jasper-libs.i686 0:1.900.1-15.5.amzn1 will be installed
---> Package libtasn1.i686 0:2.3-3.4.amzn1 will be installed
---> Package urw-fonts.noarch 0:2.4-10.7.amzn1 will be installed
--> Running transaction check
---> Package avahi-libs.i686 0:0.6.25-11.12.amzn1 will be installed
---> Package pixman.i686 0:0.18.4-1.5.amzn1 will be installed
---> Package xorg-x11-font-utils.i686 1:7.2-11.5.amzn1 will be installed
--> Processing Dependency: libXfont.so.1 for package: 1:xorg-x11-font-utils-7.2-11.5.amzn1.i686
--> Processing Dependency: libfontenc.so.1 for package: 1:xorg-x11-font-utils-7.2-11.5.amzn1.i686
--> Running transaction check
---> Package libXfont.i686 0:1.4.1-2.6.amzn1 will be installed
---> Package libfontenc.i686 0:1.0.5-2.6.amzn1 will be installed
--> Processing Conflict: php-mysql-5.3.14-2.21.amzn1.i686 conflicts php-mysqlnd
--> Finished Dependency Resolution
Error: php-mysql conflicts with php-mysqlnd
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest 
```

我之前安装了mysql-server，版本是5.5.24。

请就如何克服这一点提出建议。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:06:11.487

好消息是，您已经安装了 php！如果它不起作用，请检查配置。坏消息是你的问题不是 mysql 服务器问题，而是 php 问题，据我所知 libmysql 与 mysqlnd 冲突（这意味着 php 已安装但运行旧驱动程序）。除非您的 Web 应用程序已经在使用 mysqlnd 相关函数，否则您实际上不需要升级，例如`$stmt->get_result();`.

# windows-phone-7 - 如何在 Windows Phone 7 中使用 AES/ECB/PKCS7Padding 算法？

> ID：11733424
> 
> 赞同：2
> 
> 时间：2012-07-31T05:05:49.033
> 
> 标签：windows-phone-7, encryption, aes, windows-phone, aescryptoserviceprovider

我是 Windows Phone 开发的新手。如何在 WP7 中使用 AES/ECB/PKCS7Padding 算法？

谷歌搜索时，我看到很多关于充气城堡的建议。但我并没有清楚地了解这个充气城堡。这是算法吗？

我需要加密/解密密码以发送到服务器。在所有其他手机（Android、iPhone、Blackberry）中，我们为此使用 AES/ECB/PKCS7Padding 算法。它们都为我们的输入提供相同的加密/解密结果。但在 Windows Phone 中，我使用 AesManaged Class 进行加密。但它给出了不同的加密结果。在关于 AESManaged 类的 msdn 文档（[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged%28v=VS.95%29.aspx)）中，他们说“密码模式始终为 CBC，填充模式始终为 PKCS7”。我想也许这就是为什么与其他手机相比，我在这里得到不同的加密结果。

这是这里的问题吗？如果是，那么如何在 WP7 中使用 AES/ECB/PKCS7Padding 算法？

我没有看到任何用于在 AesManaged 类中设置密码模式的属性。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:16:11.993

如果你想在 Windows Phone 中使用 AES/ECB/PKCS7Padding，你应该使用 Bouncy Castle 库。

这个库不是完全为 Windows Phone 制作的，你不能使用来自 Bouncy Castle 网站的 dll。相反，您应该从[此处](http://awkwardcoder.blogspot.com/2011/08/using-bouncy-castle-on-windows-phone-7.html)下载 WP7 移植库。（文章底部有两个链接）

现在，您可以使用 Org.BouncyCastle.Crypto.IBufferedCipher 类型。

```
cipher = CipherUtilities.GetCipher("AES/ECB/PKCS7"); // or PKCS7PADDING, no matter
cipher.Init(false, new KeyParameter(key)); // or something else 
```

然后你应该使用这个变量。

是的，

> “密码模式始终为 CBC，填充模式始终为 PKCS7”

这就是为什么你得到错误的结果。

# sql - 无法将数据库引用添加到 VS2012 项目

> ID：11733426
> 
> 赞同：12
> 
> 时间：2012-07-31T05:05:58.127
> 
> 标签：sql, visual-studio-2012, sql-server-data-tools

我有一个在 VS2008 中创建的 SQL Server CLR 触发器项目。在 VS2012 中打开项目不会出现任何问题，但是在构建解决方案时，我收到 SQL71501 错误，其中 Trigger: [...] has an unresolved reference to object [...]。

根据我的阅读，这是由于项目中缺少数据库引用。当我尝试添加数据库引用时，我得到了“添加数据库引用”对话框，其中提供了三个选项：

*   当前解决方案中的数据库项目 ** 此选项灰显/禁用
*   系统数据库（仅显示系统数据库）
*   数据层应用程序 (.dacpac) ** 没有选项可供选择，因为这不是我创建项目的方式。

进一步阅读表明，没有为第一个选项选择数据库项目的原因是因为没有通过服务器资源管理器添加数据连接。就我而言，肯定存在数据连接，当我的项目打开时，我可以很高兴地浏览数据库、查看数据等。

我认为它可能与Target Framework有关，所以我尝试定位3.5甚至2，但出现同样的问题。

我觉得我错过了一些基本的东西，但无法完全解决。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-11T02:58:51.977

我看到此对话框未启用“确定”按钮，因为它默认的数据库变量无效（在我的情况下，它有一个“。”）。

这是错误的线索是“示例用法”字段中的文本包含错误消息 - 很难看到，因为它是浅灰色的深灰色。

编辑数据库变量名称可以解决此问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T23:29:19.130

我为此找到了一个workarroud，不是最佳的，但至少它有效：

试试这个 - 打开 sql server 对象资源管理器 - 创建一个到您的服务器的新连接 - 右键单击​​数据库并选择创建新项目... - 向导将创建带有所有引用和连接字符串的项目。

干杯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T19:59:49.583

我改变了答案

问题是您不能假设插入是单行，并且您实际上只能将主键作为触发器内的单个值引用

# iphone - 设置 UIDatePickerModeCountDownTimer

> ID：11733434
> 
> 赞同：0
> 
> 时间：2012-07-31T05:06:36.617
> 
> 标签：iphone, ios, timer, uidatepicker, countdown

我的视图中有一个带有 UIDatePickerModeCountDownTimer 的按钮。我如何真正让它开始倒计时？例子会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:40:22.870

您可以为您的分秒选择器创建一个数据源。它有两个组成部分：分钟和秒。你必须在 UIPickerViewDelegate 和 UIPickerViewDataSource 协议中实现一些方法。

Apple 的示例代码[UICatalog.app](https://developer.apple.com/library/ios/#samplecode/UICatalog/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007710)供您参考。您可以找到有关如何创建自定义选择器的示例。

# apache - HTTPS 和 Zend 框架

> ID：11733435
> 
> 赞同：0
> 
> 时间：2012-07-31T05:06:37.863
> 
> 标签：apache, .htaccess, zend-framework, ssl

我正在尝试将功能性 ZF 应用程序转换为使用 SSL。证书有效且有效，但我在配置应用程序时遇到问题。

这是 .htaccess 中的内容：

```
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]

SetEnv APPLICATION_ENV development 
```

IndexController 非常简单：

```
class IndexController extends Zend_Controller_Action
{
    public function indexAction() {
      $auth = Zend_Auth::getInstance();
      if ($auth->hasIdentity()) {
        $this->_helper->redirector('index', 'dash');
      } else {
        $this->_helper->redirector('index', 'auth');
      }
    }

} 
```

当我在没有指定 https 或端口的情况下浏览该站点时，它会准确地将我路由到[https://app-url.com](https://app-url.com)，但随后会尝试重定向到[https://app-url.com/auth](https://app-url.com/auth)并返回 403。什么我失踪了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:25:55.730

假设“index”是控制器的名称，“dash”是操作的名称，那么[Redirector Helper](http://framework.zend.com/code/filedetails.php?repname=Zend%20Framework&path=/tags/release-1.11.12/library/Zend/Controller/Action/Helper/Redirector.php) ¹的参数顺序错误。

第一个参数是动作，第二个是控制器。所以正确的方法调用是

```
$this->_helper->redirector('dash', 'index'); 
```

如果没有设置特定的路由，这会将您重定向到 URL /index/dash。

如果 'dash' 确实是控制器的名称，而 'index' 是动作的名称，只需添加一个名为的新控制器`DashController`，其中包含一个`indexAction()`方法并且重定向应该可以工作。

[1) 如果您通过 $this->_helper->name 调用帮助程序，这将调用 direct() 方法，该方法在重定向器帮助程序中调用该方法`gotoSimple($action, $controller = null, $module = null, array $params = array())`]

# java - 在音序器播放时获取 Java 中的 Midi 消息

> ID：11733436
> 
> 赞同：3
> 
> 时间：2012-07-31T05:06:43.980
> 
> 标签：java, midi

基本上，我希望能够在 ShortMessage 组件上看到一个事件处理程序（用于 ON_NOTE 和 OFF_NOTE）。或者，从轨道上，如何按滴答数查看所有事件（不是一些矢量索引？）

基本上是一种很好的方式来显示当前正在播放的音符，而它实际上是在屏幕上播放的

# python - 应用程序在 uwsgi 线程模式下运行缓慢

> ID：11733437
> 
> 赞同：1
> 
> 时间：2012-07-31T05:06:56.800
> 
> 标签：python, memcached, uwsgi

我们使用 uwsgi + nginx 来构建网站。最近，我们想提高我们网站的 qps，所以我们决定将 uwsgi 模式从 prefork 切换到 threaded。但我们发现了一些非常糟糕的事情。

当使用 prefork 模式，worker 设置为 5 时，我们得到的请求时间为 10-20ms。但在线程模式下（一个工作者 5 个线程），该值增加到 100-200 毫秒。这太糟糕了。

我们发现 memcache.Client 花费的时间最多，这使得请求时间增加。

请帮我知道问题出在哪里以及如何解决，谢谢！

PS：代码：import memcache client = memcache.Client(['127.0.0.1:11211']) client.get('mykey')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:14:56.570

您可能正在经历 python GIL 开销。尝试添加第二个过程以查看结果是否更好。

# android - 如何更新 Android 应用小部件？

> ID：11733438
> 
> 赞同：1
> 
> 时间：2012-07-31T05:06:57.340
> 
> 标签：android, android-widget

我是 android 编程新手。在我的 android 小部件中，我喜欢从名为 get details 的方法更新数据。我尝试过使用下面的代码，但它也不起作用，所以请指出我的代码中有任何错误

Android 清单 xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="study.samples"
  android:versionCode="1"
  android:versionName="1.0" >

  <uses-sdk android:minSdkVersion="10" />
  <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <receiver android:name=".MyW" android:label="WatchWidget">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="android.appwidget.action.APPWIDGET_ENABLED"/>                
        </intent-filter>
        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_provider" />
    </receiver>
</application>
</manifest> 
```

小部件源

```
public class MyW extends AppWidgetProvider {
public String deviceinfo = null;
public Context mContext = null;
public int asu = 0;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    mContext = context;
    RemoteViews remoteViews;
    ComponentName watchWidget;
    remoteViews = new RemoteViews( context.getPackageName(), R.layout.main );
    watchWidget = new ComponentName( context, MyW.class );
    remoteViews.setTextViewText( R.id.widget_textview, "OK -> " + deviceinfo);
    appWidgetManager.updateAppWidget( watchWidget, remoteViews );
}

@Override
public void onReceive(Context context, Intent intent) {
    mContext = context;

    RemoteViews remoteViews;
    ComponentName watchWidget;
    remoteViews = new RemoteViews( context.getPackageName(), R.layout.main );
    watchWidget = new ComponentName( context, MyW.class );
    remoteViews.setTextViewText( R.id.widget_textview, "OK => " + deviceinfo);
    AppWidgetManager.getInstance(context).updateAppWidget( watchWidget, remoteViews );
}

@Override
public void onEnabled(Context context) {
    mContext = context;
    getDetails();
}

public void getDetails(){
       deviceinfo = "Hi friends";

       Intent i = new Intent(mContext, MyW.class);
       mContext.sendBroadcast(i);
}   
 } 
```

谢谢

# jquery - $.ajax 成功函数

> ID：11733440
> 
> 赞同：0
> 
> 时间：2012-07-31T05:07:11.823
> 
> 标签：jquery, ajax

我有 3 个文件：

**f1.php**

```
<?php
 echo 'dis';
?> 
```

**f2.js**

```
 $.ajax({
  url: "scripts/f1.php",
  success: function (rsp){

   // if its not exist
   if(rsp == "dis"){
    $("#sbmt_a").attr("disabled", "disabled"); //Disable Button
    //return = true;
   }
    else{
     $("#sbmt_a").removeAttr("disabled");
     // return = false;
    }
  }
 }) 
```

**p1.php**

```
//include f2.js - this is removed. code from f2.js is added at the bottom just before </body>
<body>
<form>
...
<button id="sbmt_a" name="sbmt_a" class="eee">Submit</button>
</form>

$(document).ready(function(){
     $.ajax({
  url: "scripts/f1.php",
  success: function (rsp){

   // if its not exist
   if(rsp == "dis"){
    $("#sbmt_a").attr("disabled", "disabled"); //Disable Button
    //return = true;
   }
    else{
     $("#sbmt_a").removeAttr("disabled");
     // return = false;
    }
  }
 })
});
</body> 
```

现在，如果我在我的 js 文件中添加类似的东西，`form.submit(function(){`我可以使用`$.ajax`代码并做任何我喜欢的事情。

**但是****当有人访问我的页面时**，有没有办法运行`$.ajax`代码？我的意思是当我的页面加载/重新加载并且 f1.php 中的回显为“dis”时，表单按钮将被禁用。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:11:19.917

您可以在页面中输入您的 AJAX 调用`p1.php`

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

在大多数情况下，一旦完全构建了 DOM 层次结构，就会触发此事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:10:58.203

是的。页面加载完成后只需运行 ajax 代码

```
$(function(){

$.ajax({
  url: "scripts/f1.php",
  success: function (rsp){

   // if its not exist
   if(rsp == "dis"){
    $("#sbmt_a").attr("disabled", "disabled"); //Disable Button
    //return = true;
   }
    else{
     $("#sbmt_a").removeAttr("disabled");
     // return = false;
    }
  }
 });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:11:19.647

只需将 $.ajax 调用放在您的 document.ready 函数中，例如：

```
$(document).ready(function(){
$.ajax({
 url: "scripts/f1.php",
 success: function (rsp){

 // if its not exist
 if(rsp == "dis"){
  $("#sbmt_a").attr("disabled", "disabled"); //Disable Button
  //return = true;
 }
  else{
   $("#sbmt_a").removeAttr("disabled");
   // return = false;
  }
} 
```

}) });**

# php - 如何从内容中仅获取图像

> ID：11733452
> 
> 赞同：2
> 
> 时间：2012-07-31T05:08:48.983
> 
> 标签：php

你好！我有一个内容

```
<p>
    <a href="http://haha.yellowandred.in/wp-content/uploads/2012/07/535540_273587499393207_2112055176_n.jpg">
        <img class="aligncenter size-medium wp-image-9" title="Reasons heals nothing" src="http://haha.yellowandred.in/wp-content/uploads/2012/07/535540_273587499393207_2112055176_n-212x300.jpg" alt="" width="212" height="300" />
    </a>
</p> 
<p>
    The post <a href="http://haha.yellowandred.in/reasons-heals-nothing/">Reasons heals nothing</a> appeared first on <a href="http://haha.yellowandred.in">haha</a>.
</p> 
```

从这个内容中，我必须只获取图像标签及其属性。

我怎么能这样？

我用过`preg_match()`但我不能做我需要的所以有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:11:53.950

这应该让你走上正确的道路。除非绝对必要，否则不要使用正则表达式。

[**SimpleHtml DOM 解析器**](http://simplehtmldom.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:27:46.243

如果您愿意，使用 jQuery 是另一种方式

```
$(document).ready(){

var src = $('p a').find('img').attr('src');
var title = $('p a').find('img').attr('title');
var classname = $('p a').find('img').attr('class');

alert('Title:'+title+'\n'+'Source:'+src+'\n'+'Class:'+classname);

}); 
```

# java - Java WebDriver程序中如何获取浏览器的响应流

> ID：11733453
> 
> 赞同：1
> 
> 时间：2012-07-31T05:08:54.307
> 
> 标签：java, selenium, webdriver, htmlunit, selenium-webdriver

我需要验证 PDF 报告。我需要将报告嵌入 HTML。如果我使用以下方法阅读该 URL：

`File file = new File("url");`

或者

`HttpWebConnection.getResponse();`

它在单独的会话中请求 URL，因此无法获取文件。

ieDriver 有类似 HtmlUnit 的东西吗？

`HttpWebConnection.getResponse()`

或者有人可以提出替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:15:29.313

不幸的是，它没有。如果您想获得响应代码，您将需要一个代理。如果您使用的是 Java，那么[Browser Mob](http://opensource.webmetrics.com/browsermob-proxy/)就是您所需要的。您也可以尝试从 javascript 制作 XmlHttpRequest 并以这种方式获取状态码。您也可以坚持您现在使用的方法（来自 Java 的单独请求）但通过会话传递 cookie（您可以从 WebDriver 获取 cookie）

# email - gmail默认在签名中附加文件

> ID：11733464
> 
> 赞同：0
> 
> 时间：2012-07-31T05:09:49.347
> 
> 标签：email, gmail

我注意到人们有时会发送附有电子名片的电子邮件。他们是如何做到这一点的，有没有办法在 gmail 上做到这一点？

感谢 SOCommunity！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:33:50.207

[该站点](http://vcardmaker.com/)将帮助您创建一个文件 - 您只需将其附加到您的电子邮件中。

对于公司邮件，此[Exchange 签名软件](http://www.exclaimer.com/products/mail-disclaimers)可以为所有用户执行此操作。

# java - DTO 的更好方法？

> ID：11733465
> 
> 赞同：2
> 
> 时间：2012-07-31T05:09:57.520
> 
> 标签：java, spring, oop, spring-mvc

我正在使用 SpringMVC、JPA2 开发一个简单的论坛 Web 应用程序。我创建了反映数据库表结构的 JPA 实体，如用户、论坛、帖子等。

但是在 UI 上显示数据时，我需要 DTO，因为我不能总是使用实体来保存要在 UI 上显示的数据。

例如：更改密码屏幕。在这里我需要保存旧密码、新密码和确认新密码。但是用户实体不会有旧/新/确认密码字段，它只有密码。所以我需要创建 DTO，它们只是 Web 和服务层之间的数据载体。

我的问题是在创建 DTO 对象时，我应该将所有属性放在 DTO 本身中还是将实体包装在 DTO 中并添加所需的其他属性？

例如：对于编辑用户屏幕，

```
public class UserDTO
{
     private User user; // User is a JPA entity
     // setters & getters
} 
```

有了这个，我可以将底层用户实体传递给我的服务层。但是在将 UI 属性绑定到 DTO 时，我需要关联 PropertyEditors。

（或者）

```
public class UserDTO
{
    private String userId;
    private String userName;
    private String password;
    // setters & getters
} 
```

使用这种方法，我需要将 DTO 属性转换并复制到 JPA 实体中并传递给服务层。

哪种方法更好？或者有没有其他完全没有 DTO 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:40:08.107

您的第一种方法仍然将实体对象本身带到表示层。如果您有额外的参数不是来自数据库，并且您的持久性上下文仍然可用，那么这种方法就足够了。

第二种方法需要重复代码，这并不理想。

如果持久性上下文不可用，我建议使用 EntityManager.detach() 将实体从持久性上下文中分离出来，而不是创建一个并行的 bean 层次结构。

另一方面，如果数据来自表示层，您将需要从数据库加载实体（使用 find() 或类似的东西）并更新它，或将其合并（）到持久化上下文中。

# javascript - socket.io，如何从函数中获取事件名称？

> ID：11733469
> 
> 赞同：3
> 
> 时间：2012-07-31T05:10:27.913
> 
> 标签：javascript, node.js, socket.io

在`node.js`和中`socket.io`，许多事件可以由一个函数处理：

```
socket.on( 'async.popular_qtns', rows.bind(socket) );
socket.on( 'async.recent_qtns', rows.bind(socket) );
socket.on( 'async.enum_chn', rows.bind(socket) );
socket.on( 'async.enum_tag', rows.bind(socket) );

function rows() {
  var socket = this;
  switch( socket.?? ) {
    case 'async.popular_qtns': // blah blah
        break;
    case 'async.recent_qtns': // blah blah
        break;
  }
} 
```

如何获取事件名称，例如与`socket.on()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:33:09.683

我不认为事件名称会报告给回调函数。你可以尝试这样的事情：

```
var rowsBound = rows.bind(socket);

socket.on( 'async.popular_qtns', function() { rowsBound('asyn.popular_qtns'); } );
socket.on( 'async.recent_qtns', function() { rowsBound('asyn.recent_qtns'); } );
socket.on( 'async.enum_chn', function() { rowsBound('asyn.enum_chn'); } );
socket.on( 'async.enum_tag', function() { rowsBound('asyn.enum_tag'); } ); 
```

或者，可能更好：

```
var rowsBound = rows.bind(socket),
    events = ['async.popular_qtns', 'async.recent_qtns', 'async.enum_chn', 'async.enum_tag'];

for (var i in events)
    (function(e) { socket.on(e, function() { rowsBound(e); }); })(events[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T08:37:18.893

此外，您可以将[express.io](https://npmjs.org/package/express.io)与[express.io-middleware](https://npmjs.org/package/express.io-middleware)一起使用，它添加了存储事件名称的 req.io.event 和存储事件名称的第一部分的 req.io.namespaces，由“：”分隔。

# jquery - 操作动态创建的 SVG 元素

> ID：11733473
> 
> 赞同：0
> 
> 时间：2012-07-31T05:10:51.400
> 
> 标签：jquery, ajax, svg

我试图能够使用 AJAX 从数据库中“拖动”从数据库加载的 SVG 元素（使用 Raphael）。我可以加载它们并从数据库中很好地显示它们，但是当我想为每个单独的事件处理程序添加事件处理程序时，我似乎无法正确处理。

当DOM准备好时，我在从数据库加载所有元素后尝试使用 .on() ：

```
$('circle').on("mousedown", function(event) {
        ox = event.screenX;
        oy = event.screenY;
        event.target.attr({opacity: .5});
        dragging = true;
    }); 
```

但这似乎永远不会被调用。

我可以在创建圆圈期间添加事件，但只有最后一个添加的元素实际移动——但前提是鼠标位于其他已加载圆圈的 X、Y 范围内：

```
var data = $.ajax({
    type: "POST",
    url: "map.php",
    data: "loadMap=1",
    success: function(text) {
        var item = text.split(";");
        for (x in item)
        {
            if (item[x].length > 0)
            {
                var str = item[x].split(",");
                if (str[0] == "node")
                {
                    var c = svg.circle(str[1], str[2], 10);
                    c.attr("id", str[3]);
                    c.attr("fill", "black");
                    c.attr("stroke", "none");

                    c.mousedown(function(event) {
                        ox = event.screenX;
                        oy = event.screenY;
                        c.attr({opacity: .5});
                        dragging = true;
                    });

                    c.mousemove(function(event) {
                    if (dragging) {
                        c.translate(event.screenX - ox, event.screenY - oy);
                        ox = event.screenX;
                        oy = event.screenY;
                        }
                    });

                    c.mouseup(function(Event) {
                        dragging = false;
                        c.attr({opacity: 1});
                    });

                }
                else if (str[0] == "room")
                {
                }
            }
        }
    }
}); 
```

我做错了什么，或者更好的是，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:04:28.820

根据圆圈的数量，为每个圆圈添加事件侦听器可能不是一个好主意。更强大的解决方案是将事件添加到 svg 元素

```
$("#svgelement").on("mousedown", "circle", function(event){
        target = this;
        ox = event.screenX;
        oy = event.screenY;
        target.setAttribute('opacity', 0.5)
        dragging = true;
});

$("#svgelement").on("mousemove", function(event){
  if (dragging) {
      if(target) target.setAttribute('transform', 'translate('+ event.screenX - ox +','+  event.screenY - oy +')');
      ox = event.screenX;
      oy = event.screenY;
  }
});

//attached to the window, otherwise you might drag
//all the way out of the svg and release there.
$(window).on("mouseup", function(Event) {
   dragging = false;
   target.setAttribute('opacity', 1)
   target = false;
}); 
```

另一个好处是您不需要在 ajax 成功时将其加载为回调，因此您可以丢弃同步问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:56:23.783

我认为错误可能是您`c`从附加到圆圈的鼠标事件处理程序内部引用。

然后每个事件处理程序引用所引用的对象`c`，即最后一个对象。`event`携带一个**目标**成员，您应该使用它。

我正在使用 jQuerySVG，我正在使用的事件成员是**currentTarget**，看看你是否可以使用（我想是的）

# jquery - 使用 jQuery 输入隐藏的单词

> ID：11733474
> 
> 赞同：2
> 
> 时间：2012-07-31T05:10:53.790
> 
> 标签：jquery, keycode

我需要一个功能，每次在浏览器专注于网页时输入一个单词时都会触发一个事件。我想我会为此使用 jQuery 并提出以下工作：

```
$(document).ready(function(){
   var target = "808072727373767673738080";
   var input = "";

   $(window).delegate('*', 'keyup', function (e){
      input += e.keyCode;

      if(input==target){
         alert('philip');
      }

      if(e.keyCode==13){
         input = "";
      } 
   }); 
}); 
```

但是我觉得可能有比使用委托功能更简单的解决方案。有
任何建议或指向其他帖子的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:19:07.207

为 body 提供 ID 并使用 .keyup() 处理事件。我认为这必须是更简单的方法。

# c++ - 在 C++ Win32 客户端/框架区域中进行图形和绘图

> ID：11733479
> 
> 赞同：0
> 
> 时间：2012-07-31T05:11:27.727
> 
> 标签：c++, windows, visual-studio, win32gui

如何编写代码在 Win32 C++ 应用程序的 Windows 主客户区中绘制图形？我在网上找到了一个使用“eclipse”API 的示例，但是当我将它放入我的程序时，IDE 抱怨说它无法编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:24:45.453

假设您的意思是基本绘图（基元、渲染位图等），那么 GDI 和 GDI+ 很可能是您想要的。我使用 GDI+ 的次数不多，但[Forger 的 Win32 API 教程](http://winprog.org/tutorial/)将向您展示如何使用位图。绘制原语更多的是 GDI+ 领域，我真的只能参考[MSDN GDI+ 文档](http://msdn.microsoft.com/en-us/library/7f4d4txw)了解这些功能的详细信息。

另一方面，如果您正在寻找游戏类型的图形，那么您可能需要研究 DirectX 或 OpenGL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:14:40.443

通过在窗体的 WM_PAINT 处理程序中使用[GDI](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145203%28v=vs.85%29.aspx)和/或[GDI+](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533798%28v=VS.85%29.aspx)函数。

[这](http://www.functionx.com/win32/Lesson12.htm)是一个带有一些示例的站点。

# c - 在 fork() 之后寻求有关“文件描述符”的简单描述

> ID：11733481
> 
> 赞同：38
> 
> 时间：2012-07-31T05:11:37.547
> 
> 标签：c, unix, fork, file-descriptor

在“Unix 环境中的高级编程”第 2 版中，作者：W. Richard Stevens。第 8.3 节 fork 函数。

这是描述：

> 重要的是父和子共享相同的文件偏移量。
> 
> 考虑一个派生一个孩子，然后等待孩子完成的过程。假设两个进程都写入标准输出作为其正常处理的一部分。如果父级将其标准输出重定向（可能是通过 shell），那么当子级写入标准输出时，父级的文件偏移量必须由子级更新。

我的回应：

{1} 这是什么意思？例如，如果父级的 std 输出被重定向到“file1”，那么子级写入后子级应该更新什么？父级的原始 std 输出偏移量或重定向输出（即 file1）偏移量？不可能是后者吧？

{2} 更新是如何完成的？由子显式，操作系统隐式，文件描述符本身？在 fork 之后，我认为父母和孩子各走各的路，有自己的文件描述符副本。那么子级如何更新到父级的偏移量呢？

> 在这种情况下，子进程可以在父进程等待时写入标准输出；在孩子完成后，父母可以继续写入标准输出，因为知道它的输出将附加到孩子写的任何内容。如果父级和子级不共享相同的文件偏移量，则这种类型的交互将更难以完成，并且需要父级的显式操作。
> 
> 如果父母和孩子都写入同一个描述符，没有任何形式的同步，例如让父母等待孩子，他们的输出将混合在一起（假设它是一个在分叉之前打开的描述符）。尽管这是可能的，但这不是正常的操作模式。
> 
> 分叉后处理描述符有两种正常情况。
> 
> 1.  父母等待孩子完成。在这种情况下，父级不需要对其描述符做任何事情。当子进程终止时，子进程读取或写入的任何共享描述符都将相应更新其文件偏移量。
>     
>     
> 2.  父母和孩子都各走各的路。在这里，在分叉之后，父级关闭它不需要的描述符，子级也做同样的事情。这样，既不会干扰对方的开放描述符。这种情况通常是网络服务器的情况。

我的回复：

{3} 当 fork() 被调用时，我所理解的只是孩子得到了父母所拥有的副本，在这种情况下是文件描述符，并做它的事情。如果父子共享的文件描述符有任何偏移量发生变化，那只能是因为描述符本身记住了偏移量。我对吗？

我对这些概念有点陌生。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-07-31T06:28:30.547

区分**文件描述符**和文件描述是很重要的，文件描述符是进程在读取和写入调用中用来识别文件的一个小整数，**文件描述**是内核中的一个结构。文件偏移量是文件描述的一部分。它存在于内核中。

作为一个例子，让我们使用这个程序：

```
#include <unistd.h>
#include <fcntl.h>
#include <sys/wait.h>

int main(void)
{
    int fd;

    fd = open("output", O_CREAT|O_TRUNC|O_WRONLY, 0666);

    if(!fork()) {
        /* child */
        write(fd, "hello ", 6);
        _exit(0);
    } else {
        /* parent */
        int status;

        wait(&status);
        write(fd, "world\n", 6);
    }
} 
```

（已省略所有错误检查）

如果我们编译这个程序，调用它`hello`，然后像这样运行它：

```
./hello 
```

这是发生的事情：

程序打开`output`文件，如果它不存在则创建它，如果它确实存在则将其截断为零大小。内核创建一个文件描述（在 Linux 内核中是 a `struct file`）并将其与调用进程的文件描述符（该进程的文件描述符表中尚未使用的最小非负整数）相关联。在程序中返回并分配文件描述符`fd`。为了论证起见，假设`fd`是 3。

该程序执行 fork()。新的子进程获得其父文件描述符表的*副本，但不会复制文件描述。*两个进程的文件表中的条目号 3 指向相同的`struct file`.

父进程等待子进程写入。child 的 write 导致前半部分`"hello world\n"`存储在文件中，并将文件偏移量提前 6。文件偏移量在`struct file`！

子进程退出，父`wait()`进程完成，父进程写入，使用 fd 3 仍然与相同的文件描述相关联，该文件的偏移量由子进程的`write()`. 因此，消息的后半部分存储*在*第一部分之后，而不是像父级的文件偏移量为零时那样覆盖它，如果文件描述未共享，就会出现这种情况。

最后父进程退出，内核看到`struct file`不再使用并释放它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T06:55:31.503

在书的同一部分中，有一个图表显示了打开文件时存在的三个表。

用户文件描述符表（进程表条目的一部分）、文件表和inode表（v-node表）。现在一个文件描述符（它是文件描述符表的索引）条目指向一个文件表条目，它指向一个 inode 表条目。
现在**文件偏移量**（下一次读/写发生的位置）在 **文件表中。**

假设您在父级中打开了一个文件，这意味着它也有一个描述符、一个文件表条目和一个 inode 引用。
现在，当您创建孩子时，将为孩子复制文件描述符表。所以文件表条目中的引用计数（对于那个打开的描述符）增加了，这意味着现在对同一个文件表条目有两个引用。

**这个描述符现在在父子节点中都可用，指向同一个文件表条目，因此共享偏移量。** 现在有了这个背景，让我们看看你的问题，

1.  这是什么意思？例如，如果父级的 std 输出被重定向到“file1”，那么子级写入后子级应该更新什么？父级的原始 std 输出偏移量或重定向输出（即 file1）偏移量？不可能是后者吧？]

孩子明确不需要更新任何东西。本书的作者试图
说明这一点，假设父母的标准输出被重定向到一个文件并进行了一个 fork 调用。之后父级正在等待。所以描述符现在被复制，即文件偏移量也被共享。现在，每当孩子向标准输出写入任何内容时，写入的数据都会保存在重定向文件中。 **偏移量由 write 调用自动增加。**

现在说孩子退出。所以父母从等待中出来并在标准输出（被重定向）上写了一些东西。现在 parent 的 write 调用的输出将放置在 -> 数据之后，该数据由孩子写入。为什么-> 因为偏移量的当前值现在在孩子写入后更改。

```
 Parent ( )
  {
    open a file for writing, that is get the 
    descriptor( say fd);
    close(1);//Closing stdout
    dup(fd); //Now writing to stdout  means writing to the file
    close(fd)
        //Create a child that is do a  fork call.
    ret = fork();
    if ( 0 == ret )
    {
        write(1, "Child", strlen("Child");
        exit ..
    }
        wait(); //Parent waits till child exit.

         write(1, "Parent", strlen("Parent");
    exit ..
} 
```

PL。看上面的伪代码，打开的文件包含的最终数据将是 ChildParent。因此，您会看到文件偏移量在孩子写入时发生了变化，这对父母的 write 调用是可用的，因为 offest 是共享的。

2.更新是如何完成的？由子显式，操作系统隐式，文件描述符本身？在 fork 之后，我认为父母和孩子各走各的路，拥有自己的文件描述符副本。那么子级如何将偏移量更新到父级？]

```
Now I think the answer is clear-> by the system call that is by the OS. 
```

[3\. 当 fork() 被调用时，我所理解的只是孩子得到了父母所拥有的副本，在这种情况下是文件描述符，并做它的事情。如果父子共享的文件描述符有任何偏移量发生变化，那只能是因为描述符本身记住了偏移量。我对吗？]

这也应该清楚。用户文件表的条目指向文件表表条目（其中包含偏移量）。

换句话说，系统调用可以从描述符中获取偏移量。

# datepicker - 日期选择器煎茶触摸 2

> ID：11733482
> 
> 赞同：0
> 
> 时间：2012-07-31T05:11:40.090
> 
> 标签：datepicker, sencha-touch-2

我正在动态创建一个日期选择器字段。我需要将选择器字段值设置为文本字段。不知何故，我无法检索选择器值。显示日期选择器，但完成按钮引发错误，提示“无法调用未定义的方法“Todatestring”。

我的代码是：

```
 case 'date':
                    var cmp1 = Ext.create('Ext.Button', {
                        text:'Date:',
                        ui:'plain',
                        id:'datepicker',
                        handler:function () {

                            var datePicker = Ext.create('Ext.picker.Date', {
                                dateFormat:'Y-m-d',
                                id:'picker1',
                                doneButton:{
                                    listeners:{
                                        // when the done button is tapped, set the value
                                        tap:function (button, event, eOpts) {
                                            console.log('inside done button');
                                            console.log(Ext.getCmp('picker1').getValue());
                                           /* var picker = this.up('datepicker');
                                            picker.fireEvent('change', picker, picker.getValue());*/
                                            console.log('done button');
                                        }
                                    }
                                }
                            });
                            Ext.getCmp('overlayId').add(datePicker);
                            datePicker.show();
                            Ext.getCmp('datefield').setValue('');

                        }
                    });
                    Ext.getCmp('overlayId').add({ xtype:'container', padding:10, items:[cmp1] });
                    var cmp = Ext.create('Ext.field.Text', {
                        //label:'Date:',
                        id:'datefield',
                        listener:{
                            focus:function () {
                                console.log('on blue function called');
                            }
                        }
                    });
                    break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T04:09:13.020

我知道它晚了，但稍后帮助某人，您可以使用更改侦听器动态获取选定的日期值

```
 datePicker = Ext.create('Ext.picker.Date', {
               itemId:'ctsdateselect',

                    value: new Date(),
                    yearFrom: 1985,
                    yearTo  : 2050,

                listeners: {
                    change: function (value, eOpts) {

console.log(eOpts);

                    }, 
                    cancel: function (picker) {
                        Ext.Msg.alert('You hit cancel', '');
                    } 
                } 

            });
datepicker.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:39:50.820

我认为您不需要直接覆盖 setValue() 函数。更好的方法是覆盖 applyValue() 或/和 updateValue() 函数。有关配置属性以及 apply/update/set 模式如何工作的更多信息，请参阅[http://docs.sencha.com/touch/2-0/#!/guide/class_system](http://docs.sencha.com/touch/2-0/#!/guide/class_system)

干杯，奥列格

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T19:27:14.727

我有同样的问题，它通过设置日期选择器的值配置得到解决。要获得新值，您实际上需要有一些初始值。[检查这个](http://www.sencha.com/forum/showthread.php?228713-Form.reset%28%29-and-datepicker-issue)。

# ember.js - Ember.js 路由、出口和动画

> ID：11733483
> 
> 赞同：20
> 
> 时间：2012-07-31T05:11:41.683
> 
> 标签：ember.js, ember-old-router

似乎如果您想使用新的 Ember.js 路由器和插座为状态之间的转换设置动画，那么您就不走运了，因为插座的先前内容将在您有机会对其进行动画处理之前被破坏。如果您可以在转换到新状态之前完全动画化一个视图，则没有问题。只有在新旧视图都需要可见的情况下才有问题。

看起来在[此提交](https://github.com/emberjs/ember.js/pull/1198)中添加了一些动画所需的功能，以便为以前的出口内容和新内容添加动画，但我不确定我是否了解如何使用它。

还有一些关于使用额外的过渡路线/状态来显式建模动画可以表示的“中间”状态的讨论（[这里](https://github.com/emberjs/ember.js/issues/779)和[这里](https://github.com/emberjs/ember.js/commit/b5ff0edb41f50e1f55446c14605fb566aa419ed4)），但我不确定目前是否可以将这种方法与出口控制器相匹配和意见。

这类似于[How *not* to destroy View when exiting a route in Ember.js](https://stackoverflow.com/questions/11083392/ember-js-routing-how-not-to-destroy-view-when-exiting-a-route?rq=1)，但我不确定覆盖`outlet`助手是一个好的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-31T20:33:07.823

我目前正在覆盖`didInsertElement`并`willDestroyElement`在我的一些视图类中支持动画。`didInsertElement`立即隐藏元素，然后将其动画显示。`willDestroyElement`克隆元素并将其动画化。

```
didInsertElement: function ()
{
    this.$().slideUp(0);
    this.$().slideDown(250, "easeInOutQuad");
},

willDestroyElement: function ()
{
    var clone = this.$().clone();
    this.$().replaceWith(clone);
    clone.slideUp(250, "easeInOutQuad");
} 
```

就个人而言，我不想仅仅为了支持动画而将我的出口包装在多余的 ContainerViews 中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T18:48:33.343

您应该检查一下：[https](https://github.com/billysbilling/ember-animated-outlet) ://github.com/billysbilling/ember-animated-outlet 。

然后您可以在 Handlebars 模板中执行此操作：

```
{{animatedOutlet name="main"}} 
```

并从这样的路线中过渡：

```
App.ApplicationRoute = Ember.Route.extend({
    showInvoice: function(invoice) {
        this.transitionToAnimated('invoices.show', {main: 'slideLeft'}, invoice);
    }
}); 
```

# android - 将文件添加到 Android 系统文件夹

> ID：11733489
> 
> 赞同：0
> 
> 时间：2012-07-31T05:12:44.460
> 
> 标签：android, google-maps

并非所有安卓手机都支持谷歌地图。这是因为缺少 2 个文件，即：`com.google.android.maps.jar`& `com.google.android.maps.xml`。如何将这些文件添加到Android的`etc`and文件夹中。**我想以编程方式进行文件传输。**`framework`

 **是否可以在系统内存中添加文件？如果没有，您能否为 Google 地图的兼容性提供可行的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:17:41.033

Android 没有原生的文件浏览器，但是有很多第三方的`(Astro comes to mind)`。

`The filesystem of Android is that of Linux;`

路径分隔符是 / 并且 FS 从称为 / 的单个根增长。因此，您的应用程序包位于 下`/data/apps`，依此类推。

除非电话是`jailbroken ("rooted")`，否则您将看不到整个文件系统 - 权限会妨碍您。

这适用于所有 Android 应用程序，它们是`sandboxed`- 也就是说，它们无法访问整个文件系统。有 API 调用来获取当前应用程序沙箱目录的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:19:05.857

转到 Eclipse DDMS 文件资源管理器，您将获得一个选项，称为将文件推送到设备

在推送之前，您需要通过以下命令更改读/写权限

```
adb shell
mount -o remount,rw /dev/block/mtdblock3 /system 
```**

# javascript - Google Maps Javascript API v3 地理编码库是否会使用以“geocode:”开头的键覆盖 localStorage 键？

> ID：11733490
> 
> 赞同：1
> 
> 时间：2012-07-31T05:12:53.547
> 
> 标签：javascript, google-maps-api-3, google-chrome-extension, local-storage, google-geocoding-api

我在页面上有 Google Maps Javascript API v3，并且正在使用地理编码库： [https ://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)

**代码** 在我的`google.maps.Geocoder.geocode`回调函数中，我将 lat,lng 作为 JSON 保存到 Chrome 浏览器中，`window.localStorage`如下所示：

```
if (localStorage.getItem('geocode:'+job.url) === null) {
    geocoder.geocode({'address': job.address}, function(results, status) {
        var json = JSON.stringify({
            address: job.address,
            lat: results[0].geometry.location.lat(),
            lng: results[0].geometry.location.lng()
        });
        console.log('Set key:"geocode:'+job.url+'", value: '+json);
        localStorage.setItem('geocode:'+job.url, json);
        console.log('Get key:"geocode:'+job.url+'", value: '+localStorage.getItem('geocode:'+job.url));
    });
} 
```

**问题**是我的键在回调函数之外设置为 null 。在上面的代码运行并打印两条日志消息后，在控制台中输入以下内容会显示问题：

```
> localStorage.length;
  1
> localStorage.key(0);
  "geocode:123 street San Francisco CA USA"
> localStorage.getItem("geocode:123 street San Francisco CA USA");
  null 
```

将我的 localStorage 密钥前缀更改为 'blah:' 可以解决问题！

这是否意味着 Google Maps Javascript API v3 地理编码库会在回调函数返回后覆盖带有前缀“geocode:”的 localStorage 键？

**额外的背景信息：**

我在页面上包含来自 Chrome 扩展 url 的此脚本代码，例如：

```
<script src="chrome:///blah" type="text/javascript"></script> 
```

调用`google.maps.Geocoder.geocode`和回调函数是从`window.setTimeout`处理程序调用的。

# c# - 无法在 C# 中发送 POST

> ID：11733491
> 
> 赞同：1
> 
> 时间：2012-07-31T05:12:58.003
> 
> 标签：c#

我有以下问题。我有通过 POST 发送 json 的方法：

```
public string request (string handler, string data) 
{
    WebRequest request = WebRequest.Create(baseUri + "/?h=" + handler);
    request.Method = "POST";
    request.ContentType = "text/json";

    string json = "json=" + data;
    byte[] bytes = Encoding.ASCII.GetBytes(json);
    request.ContentLength = bytes.Length;

    Stream str = request.GetRequestStream();
    str.Write(bytes, 0, bytes.Length);
    str.Close();

    WebResponse res = request.GetResponse();
    StreamReader sr = new StreamReader(res.GetResponseStream());
    lastResponse = sr.ReadToEnd();
    return lastResponse;
} 
```

在服务器上使用该方法时，POST 中没有数据。好像这段代码没有执行。

```
Stream str = request.GetRequestStream();
str.Write(bytes, 0, bytes.Length);
str.Close(); 
```

在服务器上，我使用以下 php 脚本进行调试：

```
<?php print_r($_POST); ?> 
```

还尝试如下写入流：

```
StreamWriter strw = new StreamWriter(request.GetRequestStream());
strw.Write(json);
strw.Close(); 
```

结果 - 零响应。作为响应，出现了一个空数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:43:18.860

问题是，PHP 不能“识别” `text/json`-content 类型。因此不解析 POST-request-data。您必须使用`application/x-www-form-urlencoded`内容类型，其次您必须正确编码 POST 数据：

```
// ...
request.ContentType = "application/x-www-form-urlencoded";

string json = "json=" + HttpUtility.UrlEncode(data);
// ... 
```

如果您打算直接提供 JSON 数据，您可以将内容类型保留为`text/json`并将数据直接传递为`json`（没有“json =”部分）：

```
string json = data; 
```

但在这种情况下，您必须在 PHP 端更改脚本以直接读取发布数据：

```
// on your PHP side:
$post_body = file_get_contents('php://input');
$json = json_decode($post_body); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:43:59.967

您是否考虑过使用 WebClient.UploadValues。使用以“json”为名称、以 JSON 数据字符串为值的 NameValueCollection？

这似乎是最简单的方法。不要忘记您始终可以向 WebClient 添加标头和凭据。

# c# - 带有 Oracle 的 ASP.Net MVC 3

> ID：11733495
> 
> 赞同：2
> 
> 时间：2012-07-31T05:13:42.057
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, oracle

我正在使用 Asp.net mvc 3 开发一个项目，并计划将 oracle 11g 数据库作为后端。

我能够毫无问题地访问 oracle 服务器，并将数据成功加载到 html 表中。

当我尝试添加、编辑或删除记录时，问题就出现了。我相信这是一个非常简单的问题，但直到现在，我都无法弄清楚。使用以下简单模型：

```
class Country
{
    public int CountryId { get; set; }
    public string CountryName { get; set; }
} 
```

CountryId 字段是在 Oracle 使用 NUMBER(10) 创建的，因为我认为这将作为 SQL Server 整数工作。但是引发了一个异常，表明它不能将值作为 Edm.decimal ！

我尝试将其设为 NUMBER(19) 并将 CountryId 更改为 long ，但仍然得到相同的异常。

我花了很长时间寻找一个使用 asp.net mvc 和 oracle 的开源项目，但我找不到任何！

任何想法，为什么 oracle 不支持整数，长？如何使它与我的 MVC 项目按预期工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T05:30:09.223

从[Oracle 数据类型映射](http://msdn.microsoft.com/en-us/library/yk72thhd.aspx)，

> 此数据类型是 NUMBER(38) 数据类型的别名，旨在使 OracleDataReader 返回 System.Decimal 或 OracleNumber 而不是整数值。使用 .NET Framework 数据类型可能会导致溢出。

因此，您需要使用`decimal`.net 框架中的`NUMBER`数据类型来支持 Oracle 中的数据类型。

如果您按以下方式映射数据类型会更好：

```
[.NET: Int32] = [Oracle:NUMBER(2)..NUMBER(9)*] 
[.NET: Int64] = [Oracle:NUMBER(10)..NUMBER(18)*]
[.NET: Double] = [Oracle:NUMBER(x, 0)..NUMBER(x, 15)*]
[.NET: Double] = [Oracle: FLOAT]
[.NET: Decimal] = [Oracle:NUMBER] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:19:09.260

您是否尝试过使用小数或 Int32？我从网上找到的一些文档中得到了我的建议：http: [//docs.oracle.com/cd/E11882_01/win.112/e18754/featLINQ.htm](http://docs.oracle.com/cd/E11882_01/win.112/e18754/featLINQ.htm)。让我知道这可能对你有用。

# apache - RewriteRule 导致子域加载另一个 DocumentRoot？

> ID：11733496
> 
> 赞同：0
> 
> 时间：2012-07-31T05:13:43.817
> 
> 标签：apache, .htaccess, mod-rewrite, subdomain, document-root

这里的 Apache（主要是）菜鸟...肯定可以对我尝试使用`RewriteRule`in进行的操作提供一些帮助`.htaccess`：...导致使用我们的`sharpedge.`子域的 URL 从目录中自动加载`Internet_IE`- 比站点根目录更深一层.

我有这个`httpd.conf`：

```
[snip]
NameVirtualHost 11.22.33.44

<VirtualHost 11.22.33.44>
    Options All +ExecCGI
    ServerAdmin hostmaster@ourhost.com
    DocumentRoot /var/www/html/ourdomain.com
    ServerName ourdomain.com
    ServerAlias www.ourdomain.com
    DirectoryIndex index.htm index.html index.dna
    #---------------------------------
    <IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
    </IfModule>
    #---------------------------------
</VirtualHost>

<VirtualHost 11.22.33.44>
    Options All +ExecCGI
    ServerAdmin hostmaster@ourhost.com
    DocumentRoot /var/www/html/ourdomain.com
    ServerName  sharpedge.ourdomain.com
    DirectoryIndex index.htm index.html index.dna
    #---------------------------------
    <IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
    </IfModule>
    #---------------------------------
</VirtualHost>
[snip] 
```

...这在 .htaccess 中（在站点根目录中，这里：/var/www/html/ourdomain.com/）

```
Options -Indexes

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    RewriteCond   %{HTTP_HOST} ^sharpedge\.ourdomain\.com$
    # years ago this next line was used here, but in httpd.conf: (I don't know what it was supposed to do)
    # RewriteRule   ^(.+)        %{HTTP_HOST}$1          [C]
    RewriteRule   ^sharpedge\.ourdomain\.com(.*) /var/www/html/ourdomain.com/Internet_IE/$1  [L]
</IfModule> 
```

..但是 RewriteRule 没有任何反应；就好像 RewriteRule 不存在一样。

我非常感谢任何建议。

编辑：

*   我只需将 DocumentRoot 更改为我实际想要服务的目录，但我需要能够从该目录中的文件中调用（包含）文件`/`，其中包含路径中的前缀，这些文件位于站点根目录中. 这些文件也同样从站点根目录中的其他文件中调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:50:48.970

您不想将主机的任何部分放在 中`RewriteRule`，但是您正确设置了 HTTP_HOST，请尝试：

```
RewriteCond %{HTTP_HOST} ^sharpedge\.ourdomain\.com$ [NC]
# to prevent looping
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /Internet_IE/$1 [L] 
```

* * *

尝试更改`!-f`和`!-d`检查：

```
RewriteCond %{HTTP_HOST} ^sharpedge\.ourdomain\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/Internet_IE/
RewriteRule ^(.*)$ /Internet_IE/$1 [L] 
```

# javascript - AJAX/JS：在没有页面刷新或按钮单击的情况下回显 div 的值

> ID：11733497
> 
> 赞同：1
> 
> 时间：2012-07-31T05:13:45.983
> 
> 标签：javascript, jquery, ajax

我目前正在使用一个 wmd 编辑器，稍后我将在我的网站上实现它。通过将设置更改为并添加隐藏的输入字段，我已经能够获得`#wmd-preview`div的值。`markdown`问题在于 JS/AJAX 函数。当我在文本区域中输入内容时，我得到了回显的结果，但是当我返回并将粗体应用于单词时，它不会回显更改，直到我再次真正输入内容。

当字体样式更改已应用于单词而无需再次键入时，如何获得 div 值的回显？这是我的[示例](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

```
<script>
     $(document).ready(function() {
        var timer = null; 
        var dataString;   
        function submitForm(){
        $.ajax({ type: "POST",
             url: "test1.php",
             data: dataString,
             success: function(result){
        $('#wmd_result').html( $('#resultval', result).html()); 
                    }
    });
     return false;
}

 $('#wmd-input').on('keyup click', function() {
    clearTimeout(timer);
    timer = setTimeout(submitForm, 1000);
    var wmdVal = $("#wmd-preview").html();
    dataString = 'wmdVal='+ wmdVal;
});
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:21:42.647

你可以试试

```
$('#wmd-button-bar').click(function() {
    clearTimeout(timer);
    timer = setTimeout(submitForm, 1000);
    var wmdVal = $("#wmd-preview").html();
    dataString = 'wmdVal='+ wmdVal;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:39:45.743

您只是在监听`#wmd-input`textarea 上的事件。*单击粗体按钮*可能会更改该文本区域的内容，但这不是编辑事件，也不会在浏览器中触发任何事件。*您*没有更改文本区域，与*您按下*的按钮相关的某些功能正在更改它。

添加一个点击侦听器`.wmd-button`，您将能够捕获该事件。

这是一个[jsfiddle](http://jsfiddle.net/joemaller/uR6FN/)演示它如何工作。

**编辑：**添加了代码示例。

您需要做的就是将`.wmd-button`类添加到您的 jQuery 侦听器中，如下所示：

```
 $('#wmd-input, .wmd-button').on('keyup click', function() {... 
```

您通常需要注意侦听器顺序，以确保您的代码在 wmd 样式代码之后执行，但因为您的函数有超时，所以这可能无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T22:47:34.133

我想建议您可能要考虑的另一种方式。

处理事件可能会变成怪物。例如 - 有人提供了以下代码行 `$('#wmd-input, .wmd-button').on('keyup click', function() {...`

这将在您每次单击输入字段时引发一个事件！（每次您想将其聚焦以进行编辑时，您都单击输入字段）。

不要忘记每秒可能有很多事件 - 这可能会使服务器因请求而爆炸。

更好的方法可能是设置一个区间函数，此方法将从输入字段中读取值并将其与它具有的最后一个值进行比较。如果有什么变化 - 继续发出 Ajax 请求，否则，什么也不做。

通过这种方式，您可以控制发出 Ajax 请求的速率，而且您不必担心任何事件！如果你突然有了一组新的按钮，或输入字段，或插入图像的弹出窗口或其他任何东西......生活就是这样更容易。

不利的一面是——因为间隔更大——你在打字和预览之间会有延迟。

此间隔方法的伪代码如下所示

```
$(function(){
    var lastValue = null;
    setInterval( function(){
         var newValue =   $("#wmd-preview").html();

         if ( lastValue == null || newValue.localeCompare( lastValue ) == 0 ){
               lastValue = newValue;
               // preview code here
         }

         // else do nothing
    }, 1000 );
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:20:13.540

如果你点击这个词，它确实有效，只是你只有`keyup`和`click`作为事件处理程序。尝试添加`change`，看看是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T05:21:27.110

也许尝试改用更改事件？

```
 $('#wmd-input').change(function() {
clearTimeout(timer);
timer = setTimeout(submitForm, 1000);
var wmdVal = $("#wmd-preview").html();
dataString = 'wmdVal='+ wmdVal; 
```

});

# java - 在 java 中获取 URL 参数并从该 URL 中提取特定文本

> ID：11733500
> 
> 赞同：35
> 
> 时间：2012-07-31T05:14:13.937
> 
> 标签：java, url, text-extraction

我有一个 URL，我需要从这个 URL 中获取 v 的值。这是我的网址：`http://www.youtube.com/watch?v=_RCIP6OrQrE`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-31T05:31:57.217

我认为最简单的方法之一是将[URL.getQuery()](https://docs.oracle.com/javase/7/docs/api/java/net/URL.html#getQuery())返回的字符串解析为

```
public static Map<String, String> getQueryMap(String query) {  
    String[] params = query.split("&");  
    Map<String, String> map = new HashMap<String, String>();

    for (String param : params) {  
        String name = param.split("=")[0];  
        String value = param.split("=")[1];  
        map.put(name, value);  
    }  
    return map;  
} 
```

您可以使用此函数返回的映射来检索键入参数名称的值。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-11-08T02:18:28.350

如果您使用的是 Android，则可以执行以下操作：

```
Uri uri = Uri.parse(url);
String v = uri.getQueryParameter("v"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-11T14:26:22.040

我有这样的事情：

```
import org.apache.http.NameValuePair;
import org.apache.http.client.utils.URIBuilder;

private String getParamValue(String link, String paramName) throws URISyntaxException {
        List<NameValuePair> queryParams = new URIBuilder(link).getQueryParams();
        return queryParams.stream()
                .filter(param -> param.getName().equalsIgnoreCase(paramName))
                .map(NameValuePair::getValue)
                .findFirst()
                .orElse("");
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-31T05:17:35.030

我上个月在实现 youtube 视频（使用[Gdata API](http://gdata.youtube.com/)）时为 Joomla Module 编写了这个。我已经将它转换为java。

**导入这些库**

```
 import java.net.URL;
    import java.util.regex.*; 
```

**复制/粘贴此功能**

```
 public String getVideoId( String videoId ) throws Exception {
        String pattern = "^(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]";
        Pattern p = Pattern.compile(pattern);
        Matcher m = p.matcher(videoId);
        int youtu = videoId.indexOf("youtu");
        if(m.matches() && youtu != -1){
            int ytu = videoId.indexOf("http://youtu.be/");
            if(ytu != -1) { 
                String[] split = videoId.split(".be/");
                return split[1];
            }
            URL youtube = new URL(videoId);
            String[] split = youtube.getQuery().split("=");
            int query = split[1].indexOf("&");
            if(query != -1){
                String[] nSplit = split[1].split("&");
                return nSplit[0];
            } else return split[1];
        }
        return null; //throw something or return what you want
    } 
```

**它将使用的 URL**

```
http://www.youtube.com/watch?v=k0BWlvnBmIE (General URL)
http://youtu.be/k0BWlvnBmIE (Share URL)
http://www.youtube.com/watch?v=UWb5Qc-fBvk&list=FLzH5IF4Lwgv-DM3CupM3Zog&index=2 (Playlist URL) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-31T05:27:31.723

假设 URL 语法总是*http://www.youtube.com/watch?v= ...*

```
String v = "http://www.youtube.com/watch?v=_RCIP6OrQrE".substring(31); 
```

或忽略前缀语法：

```
String url = "http://www.youtube.com/watch?v=_RCIP6OrQrE";
String v = url.substring(url.indexOf("v=") + 2); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-23T07:04:29.733

**导入这些库**

```
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair; 
```

类似于逼真度，但具有处理多值参数的能力。注意：我见过没有值的 HTTP GET 请求，在这种情况下，该值将为空。

```
public static List<NameValuePair> getQueryMap(String query)  
{  
    List<NameValuePair> queryMap = new ArrayList<NameValuePair>();
    String[] params = query.split(Pattern.quote("&"));  
    for (String param : params)
    {
        String[] chunks = param.split(Pattern.quote("="));
        String name = chunks[0], value = null;  
        if(chunks.length > 1) {
            value = chunks[1];
        }
        queryMap.add(new BasicNameValuePair(name, value));
    }
    return queryMap;
} 
```

例子：

```
GET /bottom.gif?e235c08=1509896923&%49%6E%... 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-16T07:07:16.260

我相信我们有更好的方法来回答这个问题。

**1：定义一个返回 Map 值的函数。**

开始了。

```
public Map<String, String> getUrlValues(String url) throws UnsupportedEncodingException {
    int i = url.indexOf("?");
    Map<String, String> paramsMap = new HashMap<>();
    if (i > -1) {
        String searchURL = url.substring(url.indexOf("?") + 1);
        String params[] = searchURL.split("&");

        for (String param : params) {
            String temp[] = param.split("=");
            paramsMap.put(temp[0], java.net.URLDecoder.decode(temp[1], "UTF-8"));
        }
    }

    return paramsMap;
} 
```

**2：用 try catch 块调用你的函数**

开始了

```
try {
     Map<String, String> values = getUrlValues("https://example.com/index.php?form_id=9&page=1&view_id=78");
     String formId = values.get("form_id");
     String page = values.get("page");
     String viewId = values.get("view_id");
     Log.d("FormID", formId);
     Log.d("Page", page);
     Log.d("ViewID", viewId);
} catch (UnsupportedEncodingException e) {
     Log.e("Error", e.getMessage());
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-29T16:36:30.680

如果您使用的是[Jersey](https://jersey.github.io/)（我是，我的服务器组件需要发出出站 HTTP 请求），它包含以下公共方法：

`var multiValueMap = UriComponent.decodeQuery(uri, true);`

它是 的一部分`org.glassfish.jersey.uri.UriComponent`，javadoc 在[这里](https://jersey.github.io/apidocs/latest/jersey/org/glassfish/jersey/uri/UriComponent.html)。虽然您可能不想要所有 Jersey，但它是[Jersey 通用包](https://mvnrepository.com/artifact/org.glassfish.jersey.core/jersey-common/2.28)的一部分，在依赖方面还不错......

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-10-27T09:09:42.340

我解决了这样的问题

```
public static String getUrlParameterValue(String url, String paramName) {
String value = "";
List<NameValuePair> result = null;

try {
    result = URLEncodedUtils.parse(new URI(url), UTF_8);
    value = result.stream().filter(pair -> pair.getName().equals(paramName)).findFirst().get().getValue();
    System.out.println("-------------->  \n" + paramName + " : " + value + "\n");
} catch (URISyntaxException e) {
    e.printStackTrace();
} 
return value; 
```

}

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-07-21T15:29:15.157

使用纯 Java 8

假设您想从 url 中提取参数“v”：

```
 String paramV = Stream.of(url.split("?")[1].split("&"))
                        .map(kv -> kv.split("="))
                        .filter(kv -> "v".equalsIgnoreCase(kv[0]))
                        .map(kv -> kv[1])
                        .findFirst()
                        .orElse(""); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-31T05:33:56.307

这适用于所有类型的**youtube** url：
如果**url**可以

youtube.com/?v=_RCIP6OrQrE
youtube.com/v/_RCIP6OrQrE
youtube.com/watch?v=_RCIP6OrQrE
youtube.com/watch?v=_RCIP6OrQrE&feature=whatever&this=that

```
Pattern p = Pattern.compile("http.*\\?v=([a-zA-Z0-9_\\-]+)(?:&.)*");
String url = "http://www.youtube.com/watch?v=_RCIP6OrQrE";
Matcher m = p.matcher(url.trim()); //trim to remove leading and trailing space if any

if (m.matches()) {
    url = m.group(1);        
}
System.out.println(url); 
```

这**将从**您的`url`

进一步[参考](http://gdata-java-client.googlecode.com/svn/trunk/java/sample/youtube/YouTubeWriteClient.java)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-05-13T05:23:40.303

我的解决方案可能不好

```
 String url = "https://www.youtube.com/watch?param=test&v=XcHJMiSy_1c&lis=test";
        int start = url.indexOf("v=")+2;
        // int start = url.indexOf("list=")+5; **5 is length of ("list=")**
        int end = url.indexOf("&", start);

        end = (end == -1 ? url.length() : end); 

        System.out.println(url.substring(start, end));
        // result: XcHJMiSy_1c 
```

与：

*   `https://www.youtube.com/watch?param=test&v=XcHJMiSy_1c&lis=test`
*   `https://www.youtube.com/watch?v=XcHJMiSy_1c`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-14T04:49:40.763

```
public static String getQueryMap(String query) {        
    String[] params = query.split("&");     
    for (String param : params) {           
       String name = param.split("=")[0];
       if ("YourParam".equals(name)) {
           return param.split("=")[1]; 
       }
    }
    return null;
} 
```

# javascript - javascript选择要包含的元素

> ID：11733504
> 
> 赞同：1
> 
> 时间：2012-07-31T05:14:21.913
> 
> 标签：javascript, select, element

我有两个元素，第一个是默认在屏幕上打印

```
<input id=post-category value="first"> 
```

另一个是这个，它只会显示是否进行了一些点击，当然第一个元素必须炫耀

```
<select id=cat-sel ><option>second</option></select> 
```

更新我试过这段代码

```
el = document.getElementById("post-category");
el.style.visibility = "hidden";

el2 = document.getElementById("cat-sel");
el2.style.visibility = "visible"; 
```

但这里的问题是，第二个元素是缩进的。因为它逃脱了第一个元素的空间。我不喜欢那样，我希望他们处于同一个位置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:25:15.593

改成

```
el = document.getElementById("post-category");
el.style.display = "none";

el2 = document.getElementById("cat-sel");
el2.style.display = "block"; 
```

因为可见/隐藏不会删除元素在页面上占用的空间

您需要在最初需要隐藏的字段上设置 display:none

假设一个复选框有

```
window.onload=function() {
  document.getElementById("categoryCheckbox").onclick=function() {
    var chk = this.checked;
    document.getElementById("post-category").style.display = chk?"none":"block";
    document.getElementById("cat-sel").style.display = chk?"block":"none";
  }
} 
```

PS：顺便说一下，显示/隐藏需要更多代码才能在重新加载后幸存下来......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:25:02.893

为您的 ID 定义 CSS 并固定位置。

# windows - 从 Metro 应用程序访问特定的服务方法？

> ID：11733508
> 
> 赞同：0
> 
> 时间：2012-07-31T05:14:41.863
> 
> 标签：windows, windows-phone-7, microsoft-metro, windows-runtime, winrt-async

我有一个 Web 服务，我正在我的客户端应用程序（地铁应用程序）中访问它，但我想在我拥有的许多方法中访问一个特定的方法我应该怎么做，

截至目前，我正在以这种方式从我的 Metro 应用程序访问 Web 服务：-

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
        {
            string responseBodyAsText;
            HttpClient client = new HttpClient();
            HttpResponseMessage response = await client.GetAsync("http://182.134.34.99/OE/examplewebservices.svc");
            response.EnsureSuccessStatusCode();
            StatusText.Text = response.StatusCode.ToString();
            responseBodyAsText = await response.Content.ReadAsStringAsync();

        } 
```

我的要求是：- examplewebservices 中有很多方法，所以我想访问其中的一个方法，将输入参数传递给该方法并获取结果。

1）如何在众多方法中访问一个特定方法（来自 Metro 应用程序）？2）如何将输入传递给该服务方法（来自地铁应用程序）？

问题对您来说可能非常基本，请帮忙。我是地铁应用程序开发的新手。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:54:04.637

您拥有的代码不会调用服务，它会下载服务定义页面。您需要为您的项目添加服务引用（右键单击项目节点，从上下文菜单中选择添加服务引用）。然后您将能够调用您的服务的方法。在 WinRT 应用程序中，您将只能异步调用 Web 服务，因此所有方法都将具有“Async”后缀，并且您在调用它时必须使用 async/await 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:23:47.260

要在服务上调用操作，您可以使用此模式：

```
 using (HttpClient client = new HttpClient())
        {
            client.BaseAddress = new Uri("http://182.134.34.99/OE/examplewebservices.svc");

            HttpResponseMessage response = await client.GetAsync("MyOperation");

            ...

        } 
```

要在这个简单示例中发送值，您可以将它们作为附加到 MyOperation 字符串的 QueryStrings 发送，如下所示：MyOperation?myvalue=1 等。

除此之外，@Seva Titov 对动态方面做出了很好的回应。

# java - 如何从 url 或路径（目录）描述 jtable 中文件 rar / zip 的内容？

> ID：11733509
> 
> 赞同：0
> 
> 时间：2012-07-31T05:14:43.540
> 
> 标签：java, swing, zip, jtable, rar

如何从java中的url或路径目录描述jtable中文件rar/zip的内容？
我发现[here](http://www.adarshr.com/papers/raroscope)和[here](http://www.javareference.com/jrexamples/viewexample.jsp?id=79)
但是如何从描述的URL打开到jtable？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:25:30.650

我将使用[此处](https://stackoverflow.com/a/9832473/230513)`PrpcessBuilder`显示的 来执行或解析输出以创建我的. 另请参阅[*如何使用表格*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。`unzip -l``unrar -l``TableModel`[](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:27:14.617

您需要以某种方式对数据进行建模。也许 a `VirtualFile`，这应该包含您要显示的信息。

然后，您需要创建一个以某种有意义的方式包装此数据的模型。为此，您需要一个[TableModel （最好使用](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html)[Abstract](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)或[Default](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html)实现）

一旦您决定了模型的布局方式，您只需将模型提供给[JTable](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)

有关更多信息，请查看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

**更新**

您可以从[基本 I/O 课程](http://docs.oracle.com/javase/tutorial/essential/io/)中了解更多信息，但这里有一个（真正）将 URL 内容读取到本地磁盘的基本示例

```
File outputFile = new File("Somefile on disk.rar");
Inputstream is;
OutputStream os;
try {
    is = url.openStream();
    os = new FileOutputStream(outputFile);

    byte[] buffer = new byte[1024];
    int bytesIn = -1;
    while ((bytesIn = is.read(buffer)) != -1) {

        os.write(buffer, 0, bytesIn);

    }

    os.flush();
} catch (IOException exp) {
    exp.printStackTrace();
} finally {
    try {
        is.close();
    } catch (Exception exp) {
    }
    try {
        os.close();
    } catch (Exception exp) {
    }
} 
```*

# c++ - dev c++编译器错误

> ID：11733511
> 
> 赞同：-1
> 
> 时间：2012-07-31T05:15:32.350
> 
> 标签：c++, windows, compiler-errors

我在编译时遇到这个错误（实际上这是一个非常简单的项目，语法绝对没问题）

E:\proj1\Makefile.win [构建错误] [main.o] 错误 1

这是我的编译器日志（dev c++ v 4.9.9.2）

```
编译器：默认编译器
构建 Makefile：“E:\proj1\Makefile.win”
执行制作...
make.exe -f "E:\proj1\Makefile.win" 全部
g++.exe -c main.cpp -o main.o -I"C:/Dev-Cpp/lib/gcc/mingw32/3.4.2/include" -I"C:/Dev-Cpp/include/c++/3.4 .2/backward" -I"C:/Dev-Cpp/include/c++/3.4.2/mingw32" -I"C:/Dev-Cpp/include/c++/3.4.2" -I"C:/Dev -Cpp/包括"   

'C:\Users\r' 未被识别为内部或外部命令，
可运行的程序或批处理文件。

该系统找不到指定的路径。
make.exe: *** [main.o] 错误 1

执行终止

```

我的用户路径是'c:\Users\r&d'，我认为'&'在编译过程中造成了麻烦，有人知道吗？，我无法重新安装Windows，因为我在当前的Windows上安装了很多软件，并且这对我来说非常耗时，我该如何解决/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:18:11.230

研发肯定是个问题。尝试用引号括起来："c:\users\r&d" 并希望最好。如果它不起作用，请将文件夹更改为不带 & 符号的文件夹（您无需为此重新安装 Windows，只需创建另一个用户即可）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:19:06.827

您可以尝试在不带 & 的情况下创建另一个用户，然后将您的个人资料复制到其中以保留您的所有设置和应用程序首选项以及文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:22:25.553

您可能想尝试另一种构建环境，例如拥有自己内部构建系统的 code:blocks。您可能想确保您使用的是最新的 gcc mingw 编译器并从 mingw 构建系统（使用他们的安装程序，我认为它是[http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw -get-inst-20120426/](http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/) )，即使您不使用 code::blocks，请确保您使用的是 devc++ 的新分支，该分支已分叉且仍在开发中。最后一件事是，如果您使用 code::blocks，请在论坛中使用每晚构建，[http](http://forums.codeblocks.org/index.php/board,20.0.html) ://forums.codeblocks.org/index.php/board,20.0.html因为它们是最新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:24:18.963

Windows 中的转义字符是`^`. 所以试试

```
C:\Users\r^&d 
```

# codeigniter - CodeIgniter 在调用函数本身时出现致命错误

> ID：11733512
> 
> 赞同：0
> 
> 时间：2012-07-31T05:15:32.460
> 
> 标签：codeigniter

我想将动态数据插入到我的前序遍历表中。我通过参考本教程使用rebuild_tree技术：[http ://www.sitepoint.com/hierarchical-data-database-3/](http://www.sitepoint.com/hierarchical-data-database-3/)

这里我根据codeigniter的需要修改了代码。但是当我在 foreach 循环中调用函数rebuild_tree 时，它​​会显示致命错误，例如：

```
Fatal error: Maximum function nesting level of '100' reached, aborting! in /var/www/hr/system/database/drivers/mysql/mysql_driver.php on line 199 Call Stack: 0.0389 360600 1\. {main}() /var/www/hr/index.php:0 0.0401 468096 2\. require_once('/var/www/hr/system/core/CodeIgniter.php') /var/www/hr/index.php:240 0.0689 3798516 3\. call_user_func_array() /var/www/hr/system/core/CodeIgniter.php:359 0.0689 3798588 4\. Structure->add_structure() /var/www/hr/system/core/CodeIgniter.php:0 0.0689 3798632 5\. 
structure_model->rebuild_tree() /var/www/hr/application/controllers/test/structure.php:42 0.0701 3928356 6\. structure_model->rebuild_tree() /var/www/hr/application/models/test/structure_model.php:35 0.0703 3931572 7\. structure_model->rebuild_tree() /var/www/hr/application/models/test/structure_model.php:35 0.0705 3934788 8\. structure_model->rebuild_tree() /var/www/hr/application/models/test/structure_model.php:35 0.0706 3938008 9\. 
    CI_DB_driver->query() /var/www/hr/application/models/xome/structure_model.php:29 0.0848 4216988 97\. CI_DB_driver->simple_query() /var/www/hr/system/database/DB_driver.php:299 0.0848 4216988 98\. CI_DB_mysql_driver->_execute() /var/www/hr/system/database/DB_driver.php:453 0.0848 4216988 99\. CI_DB_mysql_driver->_prep_query() /var/www/hr/system/database/drivers/mysql/mysql_driver.php:178 
```

以下是我的代码：

```
function rebuild_tree($parent, $left) {
        $resultArr = array();
        $parent = $_GET['level'];
        $left = $_GET['lft'];
        $right = $_GET['rgt'];

        $right = $left + 1;
        $sql = 'SELECT * FROM subunit WHERE level="' . $parent . '";';
        $query = $this->db->query($sql);
        $data = $query->result();

        foreach ($data as $datap) {
            $resultArr['name'] = $datap->name;
            $resultArr['level'] = $datap->level;
            $right = $this->rebuild_tree($resultArr['level'], $right);
        }

        $sql = 'UPDATE subunit SET lft=' . $left . ', rgt=' . $right . ' WHERE name="' . $parent . '";';
        $query = $this->db->query($sql);
        return $right + 1;
    } 
```

有什么解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:03:00.823

调用函数本身时要小心。通常它最终可能会永远称呼自己。你需要某种限制。

您可以检查大多数 Codeigniters 自己的库，并检查`initialize()`. 这是关于如何处理调用自身的函数的一个很好的例子。基本上它会调用自己，直到没有数组剩余，从而结束。

在你的情况下，如果 2 mysql 行是彼此的父母或任何类似的，你已经打开了无限循环的大门。

# 解决方案

您的函数中的*真正*问题是您传递了一个应该获得新值的参数，但是您通过`$_GET`. 这意味着第二个函数调用与第一个函数调用完全相同，第三个相同，第四个相同，依此类推。由于函数调用永远不会更改并且会调用自身，因此会出现您的问题。

将以上部分更改为：

```
$parent = $this->input->get('level');
$left = ($left ?: $this->input->get('lft'));
$right = $this->input->get('rgt'); 
```

# c# - 否定的排序列表在中间

> ID：11733513
> 
> 赞同：1
> 
> 时间：2012-07-31T05:15:32.697
> 
> 标签：c#, .net, sorting

我有一个对象列表

```
public class foo
{
    public decimal val1 {get;set;}
    public decimal val2 {get;set;}
} 
```

I `val1`and`val2`可以包含负值或正值。如果我有`List<foo>items` 一个干净的方法，我可以对它们进行排序，以便 val1 或 val2 中的负值不是列表中的第一项或最后一项。

我的列表大小可以在 1 到 100 之间。如果小于 3，我不需要排序。但如果是，`>= 3`我需要确保任何负值都不是列表中的第一个或最后一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:19:17.550

创建您自己的`MyList:List<decimal>`类并覆盖`Add(..)`、`Insert(...)`和`Remove(..)`其他方法以满足您的需求。

或者您可以使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)并`decimal`监听`CollectionChanged`事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:29:53.957

如果存在，您将尝试将“正”值推送到列表的头部和尾部：

```
if (myList.Count > 2)
{
    //push a positive to the head of the list
    var firstPositive = myList.FirstOrDefault(x => x.val1 > 0 && x.val2 > 0);
    if (firstPositive != null)
    {
        myList.Remove(firstPositive);
        myList.Insert(0, firstPositive);
    }

    //push a positive to the tail of the list
    var secondPositive = myList.Skip(1).FirstOrDefault(x => x.val1 > 0 && x.val2 > 0);
    if (secondPositive != null)
    {
        myList.Remove(secondPositive);
        myList.Add(secondPositive);
    }
} 
```

# php - 通过过程获取最后一条记录id

> ID：11733516
> 
> 赞同：0
> 
> 时间：2012-07-31T05:16:10.043
> 
> 标签：php, mysqli, mysql-insert-id

我是新手，正在尝试获取最后插入的记录 id。

但在这里它给了我以下错误：

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“SELECT @p_customerId”附近使用正确的语法

任何想法如何解决这个问题。

谢谢，

```
<?php
class MyConnection{ 
    var $db_host = '127.0.0.1';
    var $db_user = 'root';
    var $db_password = 'xxx';
    var $db_name = 'xxx';
    var $connection;

    function Connect(){
        $this->connection = @mysqli_connect($this->db_host, $this->db_user, $this->db_password) 
        or 
        die("Error: ".mysqli_connect_error());
        mysqli_select_db($this->connection, $this->db_name);
        mysqli_query($this->connection, "SET NAMES 'utf8'");
    }

    function Disconnect(){
        mysqli_close($this->connection);
    }

    function ExecSQL($query){
        $result = mysqli_query($this->connection, $query) or die('Error: '.mysqli_error($this->connection));
        return $result;
    }

    function LastInsertId() {
        return mysqli_insert_id();
    }
}

if (isset($_POST['btnSubmit'])) {
    $v_custname = mysql_real_escape_string($_POST['txtcustname']);
    $v_custphone = mysql_real_escape_string($_POST['txtcustphone']);
    $v_custemail = mysql_real_escape_string($_POST['txtcustemail']);

    $conn = new MyConnection();
    $conn->Connect();
    $conn->ExecSQL("CALL sp_customer('$v_custname','$v_custphone','$v_custemail',@p_customerId); SELECT @p_customerId;");
    echo $conn->LastInsertId();
    $conn->Disconnect();

}
?> 
```

这是程序；

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_customer`(IN `p_customerName` VARCHAR(50), IN `p_customerPhone` VARCHAR(50), IN `p_customerEmail` VARCHAR(50), OUT `p_customerId` INT)
    LANGUAGE SQL
    NOT DETERMINISTIC
    CONTAINS SQL
    SQL SECURITY DEFINER
    COMMENT ''
BEGIN
INSERT INTO customer(CustomerName, CustomerPhone, CustomerEmail)VALUES(p_customerName, p_customerPhone, p_customerEmail);
SELECT LAST_INSERT_ID() as p_customerId;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:20:22.947

您试图在一个查询中执行多个语句。

阅读： http: [//php.net/manual/en/mysqli.quickstart.multiple-statement.php](http://php.net/manual/en/mysqli.quickstart.multiple-statement.php)

当然，我不知道您为什么要添加`SELECT @p_customerId;`到查询中...无论如何，您的下一行代码都会请求最后一个插入 ID。你为什么不把它拿出来做一个单语句查询呢？

# tridion - 如何在 SDL Tridion 2011 Sp1 组件的 RTF 字段中添加自定义元素

> ID：11733534
> 
> 赞同：2
> 
> 时间：2012-07-31T05:18:08.040
> 
> 标签：tridion, tridion-2011

我想在 SDL Tridion 的富文本字段源中添加自定义元素。是否有机会通过更改 Schema 中的 XSL 过滤来添加它们？

例子：

我在 SDL Tridion 中有一个 RTF 字段“文本”。我想添加这样的东西：

```
<text>
    <customelement>the text added through the custom element</customelement>
</text> 
```

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:13:31.927

我假设您正在尝试在富文本字段中添加一些 HTML5 元素。

如果您不想修改任何 Tridion 安装文件，这是您应该始终尽量避免的事情，您可以尝试以下操作：

*   在富文本字段选项中包含 CSS 类。
*   让用户将 css 类放在富文本字段中的 div、span 或锚标记上。
*   在前端使用一些神奇的 Javascript 和 jQuery，您可以尝试将元素更改为您想要的自定义元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T05:44:56.673

[之前在这里](https://stackoverflow.com/a/9618578/866454)回答过

这可能会引入超出 Tridion 支持范围的问题，因此您最好做好自己支持的准备。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T14:52:39.643

可能没有必要这样做。我怀疑你应该专注于你的模板输出。

Tridion 将数据存储在 RTF 中的标准方式是在 XHTML 命名空间中作为 XML。这并不意味着您的输出需要符合这种格式，就像纯文本字段的输出需要是纯文本一样。

如果您想在 RTF 字段中包含特殊类型的数据，我建议您使用标准 XHTML 元素，并配置自定义样式表，以便最终用户可以选择元素，然后通过选择应用“特殊性”一类。这可能是比编辑源选项卡更好的用户体验。

在您的模板中，您可以简单地将这些元素转换为您想要的输出。我建议使用 XSLT 来执行此操作，或者可能是 DOM 操作，具体取决于复杂性。

# ios - 我应该为 iPad 的邮件应用程序使用哪个框架

> ID：11733538
> 
> 赞同：1
> 
> 时间：2012-07-31T05:18:50.893
> 
> 标签：ios, imap

我想为 iPad 准备应用程序，以通过 IMAP 从服务器访问邮件。我必须为邮件准备本地存储，以便即使没有互联网连接也可以访问所有邮件，我还必须执行其他邮件服务，如发送、转发、收件箱、删除、回复、全部回复并保存为草稿功能来自服务器的邮件。那么我应该使用哪个框架，以便所有事情都可以通过该框架实现，或者通过使用它可能会产生更少的问题。

那么，哪一个对我来说是最好的框架。

因为在使用某些框架之后，如果发现我使用的框架无法实现某些事情，那么它会发现问题更大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:21:35.570

我认为您可以为此使用 MailCore 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:09:51.360

添加 `MessageUIFrameWork`到您的项目并`include #import <MessageUI/MFMailComposeViewController.h>`在您的 .h 文件中采用协议并实现委托方法`MFMailComposeViewControllerDelegate`

# magento - Magento 升级后在服务器中显示错误

> ID：11733540
> 
> 赞同：2
> 
> 时间：2012-07-31T05:18:56.923
> 
> 标签：magento, upgrade, magento-1.4, magento-1.7

我升级了我的 magento 站点。升级完成没有错误。

但是当我在浏览器中加载站点时，我得到了重复的输入错误，所以我清除了数据库并再次在浏览器中获取 url。但是现在我得到了这个错误：

```
Mage_Eav_Exception Object
(
    [_messages:protected] => Array
        (
        )

    [message:protected] => Maximum length of attribute code must be less then 30 symbols
    [string:Exception:private] => 
    [code:protected] => 0
    [file:protected] => /var/www/magento_upgrade/app/Mage.php
    [line:protected] => 579
    [trace:Exception:private] => Array
        (
            [0] => Array
                (
                    [file] => /var/www/magento_upgrade/app/code/core/Mage/Eav/Model/Entity/Attribute.php
                    [line] => 158
                    [function] => exception
                    [class] => Mage
                    [type] => ::
                    [args] => Array
                        (
                            [0] => Mage_Eav
                            [1] => Maximum length of attribute code must be less then 30 symbols
                        )

                )

            [1] => Array
                (
                    [file] => /var/www/magento_upgrade/app/code/core/Mage/Core/Model/Abstract.php
                    [line] => 316
                    [function] => _beforeSave
                    [class] => Mage_Eav_Model_Entity_Attribute
                    [type] => ->
                    [args] => Array
                        (
                        )

                )

            [2] => Array
                (
                    [file] => /var/www/magento_upgrade/app/code/community/Biebersdorf/CustomerOrderComment/sql/customerordercomment_setup/mysql4-install-0.0.3.php
                    [line] => 49
                    [function] => save
                    [class] => Mage_Core_Model_Abstract
                    [type] => ->
                    [args] => Array
                        (
                        )

                )

            [3] => Array
                (
                    [file] => /var/www/magento_upgrade/app/code/core/Mage/Core/Model/Resource/Setup.php
                    [line] => 624
                    [args] => Array
                        (
                            [0] => /var/www/magento_upgrade/app/code/community/Biebersdorf/CustomerOrderComment/sql/customerordercomment_setup/mysql4-install-0.0.3.php
                        )

                    [function] => include
                )

            [4] => Array
                (
                    [file] => /var/www/magento_upgrade/app/code/core/Mage/Core/Model/Resource/Setup.php
                    [line] => 421
                    [function] => _modifyResourceDb
                    [class] => Mage_Core_Model_Resource_Setup
                    [type] => ->
                    [args] => Array
                        (
                            [0] => install
                            [1] => 
                            [2] => 0.1.3
                        )

                )

            [5] => Array
                (
                    [file] => /var/www/magento_upgrade/app/code/core/Mage/Core/Model/Resource/Setup.php
                    [line] => 327
                    [function] => _installResourceDb
                    [class] => Mage_Core_Model_Resource_Setup
                    [type] => ->
                    [args] => Array
                        (
                            [0] => 0.1.3
                        )

                )

            [6] => Array
                (
                    [file] => /var/www/magento_upgrade/app/code/core/Mage/Core/Model/Resource/Setup.php
                    [line] => 235
                    [function] => applyUpdates
                    [class] => Mage_Core_Model_Resource_Setup
                    [type] => ->
                    [args] => Array
                        (
                        )

                )

            [7] => Array
                (
                    [file] => /var/www/magento_upgrade/app/code/core/Mage/Core/Model/App.php
                    [line] => 417
                    [function] => applyAllUpdates
                    [class] => Mage_Core_Model_Resource_Setup
                    [type] => ::
                    [args] => Array
                        (
                        )

                )

            [8] => Array
                (
                    [file] => /var/www/magento_upgrade/app/code/core/Mage/Core/Model/App.php
                    [line] => 343
                    [function] => _initModules
                    [class] => Mage_Core_Model_App
                    [type] => ->
                    [args] => Array
                        (
                        )

                )

            [9] => Array
                (
                    [file] => /var/www/magento_upgrade/app/Mage.php
                    [line] => 683
                    [function] => run
                    [class] => Mage_Core_Model_App
                    [type] => ->
                    [args] => Array
                        (
                            [0] => Array
                                (
                                    [scope_code] => 
                                    [scope_type] => store
                                    [options] => Array
                                        (
                                        )

                                )

                        )

                )

            [10] => Array
                (
                    [file] => /var/www/magento_upgrade/index.php
                    [line] => 87
                    [function] => run
                    [class] => Mage
                    [type] => ::
                    [args] => Array
                        (
                            [0] => 
                            [1] => store
                        )

                )

        )

    [previous:Exception:private] => 
) 
```

我该如何解决这个问题？或者我在这里做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:15:36.223

在您的 Magento 安装的实际版本和您尝试升级到的版本之间的某个位置，Magento 对 EAV 属性的 sku 的字符进行了限制。
您遇到的错误是因为您的属性之一在他的 SKU 中有超过 30 个字符。

您可以做的一件事是覆盖 Mage_Eav_Model_Entity_Attribute::ATTRIBUTE_CODE_MAX_LENGTH 并使其足够大以便继续升级。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T20:40:22.057

为清楚起见，您要编辑的文件的完整路径是...

> 你的项目/app/code/core/Mage/Eav/Model/Entity/Attribute.php CONST ATTRIBUTE_CODE_MAX_LENGTH = 30;
> 
> 把 CONST ATTRIBUTE_CODE_MAX_LENGTH = 30; 到 60

盗自：[Bijal Bhavsar](http://blog.magecracker.com/to-resolve-maximum-length-of-attribute-code-must-be-less-then-30-symbols-error-in-magento-1-6-above-version/)

# git - 多个换行符合并到 git commit 消息中

> ID：11733546
> 
> 赞同：1
> 
> 时间：2012-07-31T05:19:47.203
> 
> 标签：git, msysgit

我正在使用 msys git，我注意到的一件事是，当我在 vi 中时，我编写了一个包含两个或多个换行符的提交消息，当它实际提交时，只有一个换行符。

如果我写这个：

```
my first commit

Hello out there from the first line.

Hello out there from two linefeeds below. 
```

它将被提交为：

```
my first commit

Hello out there from the first line.

Hello out there from two linefeeds below. 
```

有没有人使用 msys git 注意到这一点，我怎样才能阻止它发生？

git 版本 1.7.10.msysgit.1

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:53:14.827

如果您查看**[`pretty.c`](https://github.com/git/git/blob/master/pretty.c)**（负责[`format_commit_item()`function](https://github.com/git/git/blob/master/pretty.c#L1108)），这似乎是提交消息的规范。

第一个空行用于将标题与提交消息的正文分开。
所有其他换行符被分组到不超过一个空行中，可能是因为这些提交可以在电子邮件中发送，并且审阅者不希望看到换行符被使用和滥用，从而使所述电子邮件过长而无法滚动。

* * *

[OP 测试](https://stackoverflow.com/users/894506/test)证实这在以前的 msysgit 版本*中*是可能的：

> 好吧，我在 VM 中进行了一些测试，发现 Git-1.7.7-preview20111014.exe 如果我安装它然后转到 Git GUI 并打开我的存储库并提交提交，我可以在不合并的情况下进行多个换行。
> 我希望他们能把它带回来，我需要它！–

现在，[Git-1.7.7-preview20111014 表示提交 81143a87](https://github.com/msysgit/msysgit/commit/81143a87ecb1c913801a56d1cb3e7cc43f2bb53a) (2011-10-14T06:04:08-07:00)，这意味着[`pretty.c`处于该状态 (commit f67d2e82d6)](https://github.com/git/git/commit/f67d2e82d6d2fd385d3d20e8d348eaf69dc95041#pretty.c)。
从那时起，它 ( `pretty.c`) 主要演变为解析提交签名，对`format_commit_item()`函数没有明显影响。

* * *

我确认另一个 OP 的发现：

即使使用最新的 msysgit (PortableGit-1.7.11-preview20120710)，在**git gui**中编辑的提交也会保留其换行符。
在 vi 中编辑的提交不会。

![d](../Images/5b7eb7489741e3125f3a78a444ca718d.png)

您可以看到初始消息提交仅保留每个评论一个换行符。
我必须在 git gui 中对其进行修改，以便放置（并在提交后保留）多个换行符。

# c# - 生成随机密码？

> ID：11733547
> 
> 赞同：1
> 
> 时间：2012-07-31T05:19:47.867
> 
> 标签：c#, asp.net, .net

如何在 ASP.net（无 GUID）中生成固定长度的随机密码？生成随机密码后，我需要将密码通过电子邮件发送给指定用户。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T05:30:29.010

在`System.Web.Security`命名空间中，您会找到一种生成密码的方法：

```
string pw = Membership.GeneratePassword(8, 1); 
```

您可以在第一个参数中提供密码的长度。第二个是指示生成的密码中非字母数字字符的最小数量。

[MSDN](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WEB.SECURITY.MEMBERSHIP.GENERATEPASSWORD%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T05:32:58.527

只需使用[Membership.GeneratePassword 方法](http://msdn.microsoft.com/en-us/library/system.web.security.membership.generatepassword.aspx)

```
// Generate a new 12-character password with 1 non-alphanumeric character.
  string password = Membership.GeneratePassword(12, 1); 
```

然后使用以下链接作为参考，将您的密码作为 MailMessage 正文发送到电子邮件中。

[通过 SMTP 使用 C#](http://www.codeproject.com/Articles/1684/Sending-Mail-Using-C-via-SMTP)
[发送邮件 通过 Gmail 在 .NET 中发送电子邮件](https://stackoverflow.com/questions/32260/sending-email-in-net-through-gmail)

**来源：** [配置 ASP.NET 以发送](http://www.niranjankala.in/post/2011/11/24/Configuring-ASPNET-for-sending-Email.aspx) [电子邮件](http://developmentsolutionsjunction.blogspot.in/2011/11/configuring-aspnet-for-sending-email.html)

*web.config 的邮件设置*

```
<system.net>
<mailSettings>
<smtp deliveryMethod="Network" from="from@yourdomain.com">
<network host="smtp server addresss" userName="username" password="password"
defaultCredentials="false" port="xxx" enableSsl="true"  />
</smtp>
</mailSettings>
</system.net> 
```

然后使用以下代码加快邮件传递。您可以将您的邮件配置为使用 gmail smtp 服务器等，这一切都取决于您。

```
 try
    {
    MailMessage mailMessage = new System.Net.Mail.MailMessage();
    mailMessage.To.Add(userEmailAddress);
    mailMessage.Subject = "Subject";
    mailMessage.Body = "your password should be in this section";
    var smtpClient = new SmtpClient();
    smtpClient.Send(mailMessage);
    return "Mail send successfully";
    }

catch (SmtpException ex)
{
return "Mail send failed:" + ex.Message;
} 
```

如果您想创建自己的密码，google 上有很多关于此的帮助。
[如何：生成随机密码 (C#/VB.NET)](http://www.obviex.com/Samples/Password.aspx)
[使用 C# 生成随机密码](http://forums.asp.net/t/1685777.aspx/1)
[在 C# 中生成随机数和字符串](http://www.c-sharpcorner.com/uploadfile/mahesh/randomnumber11232005010428am/randomnumber.aspx)
[C# 随机密码生成器](http://eyeung003.blogspot.in/2010/09/c-random-password-generator.html)
[随机密码生成](http://dotnetguts.blogspot.in/2008/06/random-password-generation.html)

希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T05:29:55.187

我会使用本文档中提供的随机函数：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx)

我通常创建一个字符数组或字符串（“abcdefg...”.ToCharArray();）。这种方式就是选择的，所以我们不会生成随机字符。

这不是一个不常见的功能，尤其是对于只有一个管理员的小组（教师/学生情况）。我会说这个功能在单向加密密码的正常情况下是不可取的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:33:07.870

如果您不想使用 Membership.GeneratePassword 方法，这对您有用。
生成随机数

```
 public int RandomNumber(int min, int max)
 {
        try
        {
            Random random = new Random();
            return random.Next(min, max);
        }
        catch (Exception)
        {

            throw;
        }

    } 
```

生成随机字符串

```
 public string RandomString(int size, bool lowerCase)
 {
        StringBuilder builder = new StringBuilder();
        Random random = new Random();
        char ch;
        for (int i = 0; i < size; i++)
        {
            ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
            builder.Append(ch);
        }
        if (lowerCase)
            return builder.ToString().ToLower();
        return builder.ToString();
 } 
```

组合并获取唯一密码

```
 public string GetPassword()
 {
        StringBuilder builder = new StringBuilder();
        builder.Append(RandomString(4, true));
        builder.Append(RandomNumber(1000, 9999));
        builder.Append(RandomString(2, false));
        return builder.ToString();
 } 
```

通过 Gmail SMTP 发送密码

```
 public void SendUsernamePassword(string Email,string UserName,string Password)
  {

        MailMessage mM = new MailMessage();
        mM.From = new MailAddress("YourGmailAccount@gmail.com");
        mM.To.Add(Email);
        mM.Subject = "Your Username and Password.";
        mM.Body = "Your Username and Password is:<br/>Username:" + UserName+ "<br/>" + "Password:" + Password;
        mM.IsBodyHtml = true;
        mM.Priority = MailPriority.High;
        SmtpClient sC = new SmtpClient("smtp.gmail.com");
        sC.Port = 587;
        sC.Credentials = new NetworkCredential("YourGmailAccount@gmail.com", "YourPassword");
        //sC.EnableSsl = true;
        sC.EnableSsl = true;
        sC.Send(mM);

  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-07T07:20:34.943

您可以使用自己的规则创建自己的 PasswordGenerate 方法，

```
public String PasswordGenerate(int passwordSize,
 bool useUpper,
 bool useLower,
 bool useNumbers,
 bool useSpecialChars)
{
    string UPPER_CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    string NUMBERS = "1234567890";
    string SPECIAL_CHARS = "!@#$%^&*()";

    Random random = new Random();
    char[] password = new char[passwordSize];
    string charSet = string.Empty;

    if(useUpper) charSet += UPPER_CHARS;
    if(useLower) charSet += UPPER_CHARS.ToLower();
    if(useNumber) charSet += NUMBERS;
    if(useSpecialChars) charSet += SPECIAL_CHARS;

    for(int i = 0; i < passwordSize; i++)
    {
         password[i] = charSet[random.Next(charSet.Length - 1)];
    }

    return string.Join(null, password);
} 
```

[选中此项以制作密码生成器应用程序](https://github.com/Vicky2004-maker/Xamarin_Password_Gen)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-10-30T08:35:05.023

我建议不要通过电子邮件发送密码，因为相关的固有风险以及这给您的应用程序增加了不必要的复杂性。最好直接在应用程序最自然的位置实现密码创建系统。我意识到“最自然点”的模糊性，但这是因为不同的应用程序有不同的设计理念。同样在这里，我在比通常使用的更广泛的意义上使用“应用程序”。在具有用户帐户的网站中创建密码的自然位置的示例是帐户管理、登录和注册页面。如果密码生成器的目的是提供用户将更改的临时密码，那么最好让用户在注册时决定他们的密码。如果在彻底考虑了应用程序的需求之后您仍然需要密码生成器，那么您可以使用通过管道传输到所需字符集的转换器的随机数生成器。我还敦促您在论坛上提问之前至少在互联网上搜索有关问题主题的信息，特别是如果这是一个简单的问题，但即使不是，您也可能会在您最喜欢的搜索引擎的前几页。如果你的问题已经有一个容易找到的解决方案，那么充其量你会浪费帮助你的友好人士的时间，最坏的情况是得到不友好的答案、忙碌的人难以理解的答案、粗制滥造的帮助来自没有经验的用户或 RTFM。如果您还没有通过粗略搜索您最喜欢的搜索引擎或教程网站找到解决方案，并且在考虑了五分钟后，请务必询问您的具体需求。在进行自己的研究之前询问会增加显得轻率的风险。

作为我实际答案的总结

*   随机数发生器
*   类型转换为所需的字符集。就这么简单。

（如果它比您的首选语言更复杂，也许重新考虑您的首选语言：p）

# rabbitmq - RabbitMQ 中的消息属性和有效负载

> ID：11733548
> 
> 赞同：0
> 
> 时间：2012-07-31T05:20:05.283
> 
> 标签：rabbitmq

我正在使用 AMQP Java 客户端我想使用消息属性属性，如消息优先级、传递模式、消息发布时间戳、过期时间等。如何在 channel.basicPublish() 上设置它；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:13:25.247

你看过 RabbitMQ 教程 ( [http://www.rabbitmq.com/getstarted.html](http://www.rabbitmq.com/getstarted.html) ) 他们有很多很好的例子，这些例子都在 java 和 python 中，应该为你开始使用 RabbitMQ 打下良好的基础

# java - 为 Java 应用程序添加 GNU GPL

> ID：11733549
> 
> 赞同：2
> 
> 时间：2012-07-31T05:20:08.150
> 
> 标签：java

在通过eclipse制作jar时，我没有得到必须放置第三方库的许可文件的地方，任何人都可以在这个问题上帮助我。从 Eclipse 制作罐子时，我收到以下警告

> 该操作重新打包引用的库。
> 
> 请查看与您希望引用的库关联的许可证，以确保您能够使用此应用程序重新打包它们。另请注意，此操作不会将签名从原始库中的文件复制到生成的 jar 文件

任何人都可以让我知道这种类型的错误消息会导致使用通过 eclipse 生成的 jar 文件出现任何问题

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:04:53.477

GNU 组织有一个设置您使用其许可证的[方法](http://www.gnu.org/licenses/gpl-howto.html)

# nfs - ubuntu 中的 NFS 服务器和客户端安装

> ID：11733553
> 
> 赞同：0
> 
> 时间：2012-07-31T05:20:23.860
> 
> 标签：nfs, ubuntu-12.04, nfsclient

我已经在不同的机器上安装了 NFS 服务器和客户端。问题是当我使用命令在客户端挂载共享目录时

> 挂载 server_addr:server_dir client_dir

但它给出了一个错误说

> 无权共享此目录（无法访问 server_dir）

虽然我通过将服务器中的 /etc/exports 文件更新为

> server_dir client_ip(rw,sync,no_root_squash)

但仍然在客户端拒绝访问时给出错误。

任何形式的帮助/建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:31:47.067

设置 iptables 权限（与防火墙有关）

```
iptables -P INPUT ACCEPT
iptables -P OUTPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -F** 
```

# python - Cython cdef 没有速度增加

> ID：11733554
> 
> 赞同：1
> 
> 时间：2012-07-31T05:20:37.753
> 
> 标签：python, c, cython

感谢stackoverflow上的一些人，我终于让cython工作了，但现在有一个问题。从我不使用 cdef 到使用 cdef 时，速度确实没有提高。不要误会我的意思，当我使用 cython 编译 python 代码时，速度有非常显着的提高，但当我使用 cdef 时则没有这么多。

这是减慢程序其余部分的代码区域：

```
def tupdate(self,surf):     

    cdef int x
    cdef int y

    for x in xrange(self.w):
        for y in xrange(self.h):
            if self.map[(x,y)].y <= 600 and self.map[(x,y)].y >= -50: self.map[(x,y)].FLAG = 1
            else: self.map[(x,y)].FLAG = 0
            self.map[(x,y)].y += self.speed
            if self.map[(x,y)].FLAG:
                self.map[(x,y)].rect = ((self.map[(x,y)].x,self.map[(x,y)].y),(50,25))
                self.map[(x,y)].update()
                self.map[(x,y)].render(surf) 
```

这段代码*应该*每秒被调用 60 次，但是由于代码的速度和我的旧硬件，它每秒只被调用大约 30 次，我认为对于像 x 和 y 这样频繁使用的变量使用 cdef 会有所帮助。但是cdef前后的fps是一样的。

我在使用 32 位 python 2.7 的 Windows 7 64 位

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T05:24:50.150

您在代码中索引`self.map` **11 次**，索引相同。索引**一次**，将引用复制到本地名称中，然后使用该名称。

# c# - SqlConnection On Before Close 事件？

> ID：11733555
> 
> 赞同：3
> 
> 时间：2012-07-31T05:20:38.827
> 
> 标签：c#, sql-server, sqlconnection

我想知道是否有一个事件我可以在 SqlConnection 关闭之前处理事件触发的地方，即：`OnBeforeClose` ？我想要实现的是 -`sp_unsetapprole`在 SQL Server 中调用，以便在连接关闭并返回连接轮询时 - 所以它没有附加任何应用程序。

起初我以为我可以处理这个`StateChange`事件 - 但我相信已经太晚了。

我目前的解决方法是手动调用`sp_unsetapprole`SqlConnection 调用者。

非常感谢您的关注+时间！

是的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:02:21.557

当事件触发时为时已晚，无法运行任何类型的 SQL 批处理。我建议您遵循[有关该主题的 MSDN 建议](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.110%29.aspx)：

> 通过调用 `sp_setapprole`系统存储过程激活 SQL Server 应用程序角色后，无法重置该连接的安全上下文。但是，如果启用了池化，则将连接返回到池中，并且在重新使用池化连接时会发生错误。

当提出这样的建议时，试图反对它们通常是一个坏主意。你可以放弃应用角色，[还有更好的选择](http://msdn.microsoft.com/en-us/library/bb669062%28v=vs.110%29.aspx)：

> ## 应用程序角色替代
> 
> 应用程序角色依赖于密码的安全性，这会带来潜在的安全漏洞。密码可能会通过嵌入应用程序代码或保存在磁盘上而暴露。您可能需要考虑以下替代方案：
> 
> *   使用带有 NO REVERT 和 WITH COOKIE 子句的 EXECUTE AS 语句进行上下文切换。您可以在未映射到登录名的数据库中创建用户帐户。然后，您将权限分配给此帐户。对无登录用户使用 EXECUTE AS 更安全，因为它是基于权限的，而不是基于密码的。有关详细信息，请参阅[在 SQL Server 中使用模拟自定义权限](http://msdn.microsoft.com/en-us/library/bb669087%28v=vs.110%29.aspx)。
>     
>     
> *   使用证书签署存储过程，仅授予执行过程的权限。有关详细信息，请参阅[在 SQL Server 中签署存储过程](http://msdn.microsoft.com/en-us/library/bb669102%28v=vs.110%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-06T18:01:49.350

我知道这已经晚了，但我遇到了这个答案，并想在那里抛出另一个选择。我们对我们的应用程序有非常相似的要求。我们需要在每次打开连接时调用自定义存储过程，并在关闭连接时再次调用。

我们能够在[EF Provider Wrapper Toolkit](http://efwrappers.codeplex.com/)的帮助下处理这个问题（现在似乎也在[Nuget](http://nuget.org/packages/CommunityEFProviderWrappers.EFProviderWrapperToolkit)上）。这基本上可以让您将自己的逻辑注入到各种 ADO.NET 对象中——因此在数据库访问的最低级别。然后，我们创建了自己的自定义 DbConnection 类，您的应用程序中的任何代码最终都将使用该类。它实际上非常简单，并且为我们提供了很多很好的“挂钩”到最低级别的数据库访问，这些都派上了用场。

请注意，我们使用的是实体框架，该库称为**EF** Provider Wrapper Toolkit，但它适用于任何使用 ADO.NET 访问数据库的代码。

下面是我们的自定义 DbConnection 类的一些示例代码，显示了您可以完成的各种事情：

```
/// <summary>
/// Custom implementation of a wrapper to <see cref="DbConnection"/>.
/// Allows custom behavior at the connection level.
/// </summary>
internal class CustomDbConnection : DbConnectionWrapper
{
    /// <summary>
    /// Opens a database connection with the settings specified by 
    /// the <see cref="P:System.Data.Common.DbConnection.ConnectionString"/>.
    /// </summary>
    public override void Open()
    {
        base.Open();

        //After the connection has been opened, use this spot to do any initialization type logic on/with the connection

    }

    /// <summary>
    /// Closes the connection to the database. This is the preferred method of closing any open connection.
    /// </summary>
    /// <exception cref="T:System.Data.Common.DbException">
    /// The connection-level error that occurred while opening the connection.
    /// </exception>
    public override void Close()
    {
        //Before closing, we do some cleanup with the connection to make sure we leave it clean
        //   for the next person that might get it....

        CleanupConnection();

        base.Close();
    }

    /// <summary>
    /// Cleans up the connection so the next person that gets it doesn't inherit our junk.
    /// </summary>
    private void CleanupConnection()
    {
        //Create the ADO.NET command that will call our stored procedure
        var cmd = CreateCommand();
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "p_cleanup_connection";

        //Run the SP
        cmd.ExecuteNonQuery();
    }
} 
```

# android - Android：AsyncTask 未按预期工作

> ID：11733563
> 
> 赞同：0
> 
> 时间：2012-07-31T05:21:07.997
> 
> 标签：android, android-asynctask, autocompletetextview

我有一个应用程序，其中有一个 AutoCompleteTextView。在每个文本更改事件中，应用程序都会进入网络以从 Internet 检索一些内容并填充 TextView 的下拉列表。我使用 AsyncTask 来读取网页内容。但是，如果在接收和填充内容之前输入了新文本，则应用程序会挂起，直到获取旧内容为止。有没有办法解决这个问题？

我的 AsyncTask 如下，

```
private class GetSuggestions extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        System.out.println("Suggestions Called()");
        doSearch(params[0]);  // reads the web and populates the suggestions ArrayList
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        System.out.println("Adapter Called() " + suggestions.size());
        suggestionAdapter = new ArrayAdapter<String>(
                getApplicationContext(), R.layout.list, suggestions);
        searchText.setAdapter(suggestionAdapter);
    }
} 
```

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:26:28.620

您可以检查 AsyncTask 是否正在运行。

```
public boolean isRunning()
{
    if (_querymysqltask == null) return false;
    if (_querymysqltask.getStatus() == AsyncTask.Status.FINISHED) return false;
    else return true;
} 
```

您可以取消任务以使用新搜索重新启动它，或等待它结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:29:59.437

```
if(task == null)
{
    task = new GetSuggestions();
    task.execute(new String[] {word});
}
else
{
    task.cancel(true);
    task = new GetSuggestions();
    task.execute(new String[] {word});
} 
```

您可以取消任务并使用新输入的文本开始新任务。代码将类似于上面的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:31:35.073

您可以显示 progressDialog 直到从网络获取数据。

```
 private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

    /** progress dialog to show user that the backup is processing. */
    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:35:52.433

如果用户输入新文本，您可能希望取消 AsyncTask。以下 dos 中描述了取消 AsyncTask。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T05:39:21.993

似乎问题出在

```
doSearch(params[0]);  // reads the web and populates the suggestions ArrayList 
```

doSearch() 已从 调用`doInBackground()`，因此不应触摸 UI elemnets.only，从 执行“读取网络”部分`doInBackground()`并从中填充 ArrayList `onPostExecute()`。

# ios - 如何在 iOS 中使用 UIImageview 添加 UIScrollview 的页面控件

> ID：11733570
> 
> 赞同：0
> 
> 时间：2012-07-31T05:21:41.897
> 
> 标签：ios, xcode, macos, uiscrollview, uipagecontrol

如何在 iOS 中为with添加**页面控件。**如果我选择了某些页面控制项目符号意味着我想移动选定的图像。如果我移动图像意味着我的页面控件项目符号也想移动。`UIScrollView``UIImageView``UIScrollView`

```
 - (void)viewDidLoad
{
    NSLog(@"Welcome to Home Page");
    [super viewDidLoad];

   // self.view.backgroundColor=[[UIColor alloc]initWithPatternImage:[UIImage imageNamed:@"bg-image.png"]];

    UIImage * img = [UIImage imageNamed:@"bg-image.png"];
    [scrollView setBackgroundColor:[UIColor colorWithPatternImage:img]];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)loadView {

    CGRect fullScreenRect=[[UIScreen mainScreen] applicationFrame];
    scrollView=[[UIScrollView alloc] initWithFrame:fullScreenRect];
    scrollView.contentSize=CGSizeMake(1400, 100);

    UIImageView *tempImageView2 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti01.png"]];
    tempImageView2.frame=CGRectMake(10, 60, 200, 200);
    [scrollView addSubview:tempImageView2];

    UIImageView *tempImageView3 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti02.png"]];
    tempImageView3.frame=CGRectMake(240, 60, 200, 200);
    [scrollView addSubview:tempImageView3];

    UIImageView *tempImageView4 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti03.png"]];
    tempImageView4.frame=CGRectMake(470, 60, 200, 200);
    [scrollView addSubview:tempImageView4];

    UIImageView *tempImageView5 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti04.png"]];
    tempImageView5.frame=CGRectMake(700, 60, 200, 200);
    [scrollView addSubview:tempImageView5];

    UIImageView *tempImageView6 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti05.png"]];
    tempImageView6.frame=CGRectMake(930, 60, 200, 200);
    [scrollView addSubview:tempImageView6];

    UIImageView *tempImageView7 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti06.png"]];
    tempImageView7.frame=CGRectMake(1160, 60, 200, 200);
    [scrollView addSubview:tempImageView7];

    self.view=scrollView;
    [scrollView addSubview:tempImageView2];
    [scrollView addSubview:tempImageView3];
    [scrollView addSubview:tempImageView4];
    [scrollView addSubview:tempImageView5];
    [scrollView addSubview:tempImageView6];
    [scrollView addSubview:tempImageView7];

    scrollView.userInteractionEnabled = YES;
    btn = [UIButton buttonWithType:UIButtonTypeCustom];
    btn.frame = CGRectMake(22, 100, 1800, 500);
   // [btn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(buttonTest:) forControlEvents:UIControlEventTouchUpInside];    
    [scrollView addSubview:btn];

}

- (IBAction)buttonTest:(id)sender {
    MSDescriptionpage *aSecondPageController = [[MSDescriptionpage  alloc] initWithNibName:@"MSDescriptionpage" bundle:nil];        
    [self.navigationController pushViewController:aSecondPageController animated:YES];        
    [aSecondPageController release];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:40:35.950

我必须做同样的事情，我所做的是我使用了两个视图控制器（用于页面滑动的页面视图控制器）和带有`UIImage`视图的主视图控制器，您可以在其中添加带有图像的滚动视图.. **这些在页面 VC 里面确实加载了**

```
 [pageController setViewControllers:viewControllers  
                             direction:UIPageViewControllerNavigationDirectionReverse  
                              animated:NO 
                            completion:nil];

    [self addChildViewController:pageController];
    [[self view] addSubview:[pageController view]];
    for (UIGestureRecognizer *gR in pageController.gestureRecognizers) {
        gR.delegate = self;
    }
    [pageController didMoveToParentViewController:self];} 
```

这些调用另一个vc

```
- (UIViewController *)pageViewController:
(UIPageViewController *)pageViewController viewControllerBeforeViewController:
(UIViewController *)viewController
{
    for (UIGestureRecognizer *recognizer in pageController.gestureRecognizers) {
        if ([recognizer isKindOfClass:[UITapGestureRecognizer class]]) {
            recognizer.enabled = NO;
        }
    }
    NSUInteger index = [self indexOfViewController:
                        (MainViewController *)viewController];
    if ((index == 0) || (index == NSNotFound)) {
        return nil;
    }

    index--;
    return [self viewControllerAtIndex:index];
} 
```

# ios - 在 iOS 上安装 Phonegap

> ID：11733575
> 
> 赞同：0
> 
> 时间：2012-07-31T05:22:07.800
> 
> 标签：ios, xcode, cordova

最近我试图将 Cordova 安装到我的 mac 上，这样我就可以为 iphone 编译，但我遇到了一个问题。xcode 上没有创建 Cordova 项目的选项。上网看了一下，发现需要通过终端创建项目。我这样做了，但据我所见，什么都没有创建。

在终端上，将 bin 文件夹拖到终端后，我做了：./create /desktop/ios-program/com.appname appname

我做错什么了吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:12:39.567

这里给出了在 xcode 中创建 phonegap 环境的完整指南

[http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-xcode-for-ios.html](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-xcode-for-ios.html)

如果这还不够的话

[http://www.kendoui.c​​om/blogs/archive/11-12-27/setup_your_phonegap_development_environment_on_mac.aspx](http://www.kendoui.com/blogs/archive/11-12-27/setup_your_phonegap_development_environment_on_mac.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T12:37:47.957

[http://docs.phonegap.com/en/2.7.0/guide_getting-started_ios_index.md.html](http://docs.phonegap.com/en/2.7.0/guide_getting-started_ios_index.md.html)

这些说明非常清楚，即使您在提取 zip 文件后得到的目录树与它们显示的不完全一样。

安装所有要求后：

```
1\. extract the content of phonegap-2.7.0.zip wherever you want
2\. go to lib/ios/bin and run the create command with the suggested parameters.
3\. open the finder and go to the directory you used as first parameter
4\. doubleclick the file with extension xcodeproj to open XCode and the project will be automatically created 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T17:08:26.277

`./create`在输入命令之前，请确保您位于 \phonegap-2.7.0\lib\ios\bin 中。请参阅[博客教程](http://mythoughtsandexperiments.blogspot.in/2013/12/how-to-install-phonegap-in-mac-and.html)

# oracle - Oracle 在更新表时挂起

> ID：11733577
> 
> 赞同：4
> 
> 时间：2012-07-31T05:22:19.867
> 
> 标签：oracle, sqlplus

我正在用语句更新表

```
update asdf123 
   set state='Rlzd' 
 where documentname = '11212121212' 
   and superseded = '-'; 
```

但它无限期地挂起。

我检查了会话，得到了一个挂起的会话，然后杀死了它，上面的会话也被杀死了。同样的情况再次发生。

可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:36:37.620

我猜你杀死了被阻止的会话（你的会话）使用这样的东西来查找阻塞会话：

```
SELECT
   s.blocking_session, 
   s.sid, 
   s.serial#, 
   s.seconds_in_wait
FROM
   v$session s
WHERE
   blocking_session IS NOT NULL 
```

查看另一种找到它们的方法：[http ://www.oraclerecipes.com/monitoring/find-blocking-sessions/](http://www.oraclerecipes.com/monitoring/find-blocking-sessions/)

# python - 将所有 SQLite 数据库与不同的表合并

> ID：11733581
> 
> 赞同：3
> 
> 时间：2012-07-31T05:22:43.890
> 
> 标签：python, sqlite, merge

是否有一种便宜/快速的方法将 SQLite db 文件与不同的表合并？

例如：

*   `a.db`只有桌子`a`
*   `b.db`只有桌子`b`
*   ...

我想将这些合并到一个`abcd.db`包含*所有*表`a`、`b`、`c`和`d`.

我想我想要的是这样一个神奇的脚本：

```
merge_script a.db b.db c.db d.db -o abcd.db 
```

我注意到这个[技巧](https://stackoverflow.com/questions/80801/how-can-i-merge-many-sqlite-databases)和另一个[技巧](https://stackoverflow.com/questions/3689694/merge-sqlite-files-into-one-db-file-and-begin-commit-question)以及 ATTACH 技巧，它将所有记录插入“主”数据库，但是当“主”数据库中没有表时我可以这样做吗？

**更新**

我使用 SQLite 数据库文件作为简单的存储容器。

在大多数情况下，我将每种类型的数据（按表名不同）存储在一个文件中，然后将它们合并到“目标”数据库中。

但是有些类型的数据应该在同一个表名中。如果使用`sqlite3 .dump`会有表名冲突。

然而`.dump`方法非常简单，我将做一些解决方法并使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T05:49:08.920

只需转储和恢复：

```
for db in a, b, c, d; { sqlite3 ${db}.db .dump | sqlite3 abcd.db } 
```

[更新]

> 另一个问题，如果表不都是唯一的，是否有任何快速解决方法，我想合并内容？[tdihp](https://stackoverflow.com/users/1000290/tdihp)

这个问题有点太笼统了。例如，您将如何处理违反主键的问题？我会使用 Python 等脚本语言来处理错误情况（sqlalchemy.SqlSoup 非常适合这种情况）。

也就是说，如果您知道该表已经存在并且没有唯一约束，那么您可能可以通过一些临时 bash 特技来解决问题 - 假设 destinationtablename 和 sourcetablename 具有相同的结构：

```
$ ( echo '.mode insert destinationtablename'
    echo 'select * from sourcetablename;' 
  ) |  sqlite3 -batch -init - source.db \
    |  sqlite3 -batch destination.db 
```

您可能不知道在本网站中，长评论线程被认为是粗鲁的，而是鼓励您更新您的问题。一个更好的问题是：

*   帮助将来有类似问题的其他用户
*   为您赢得声望点，赋予您特权（点数也可用于稍后的赏金）

# plist - 如何进行 Cydia 调整以在安装时修改文件并在卸载时恢复更改？

> ID：11733585
> 
> 赞同：2
> 
> 时间：2012-07-31T05:23:16.227
> 
> 标签：plist, cydia, tweak

我一直在开发一个名为 BrightnessControl 的 Cydia 调整（我对开发非常陌生）。目前，它所做的只是使用 Winterboard 用我的修改版本修补 var/stash/Applications/Brightness.plist。有没有办法，也许用 Theos，我可以在没有 Winterboard 的情况下修补这个文件？我想以某种方式备份这个文件，并在 imstall 时用我修改过的 .plist 替换它，然后在卸载时删除我修改过的 .plist 并恢复原始 .plist。我已经看到通过其他调整完成了类似的操作，但我不知道这是如何完成的。有人可以将我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:33:32.037

你甚至不需要知道编程就可以做到这一点。诀窍在于 Debian 软件包的[postinst 和 prerm 脚本。](http://www.debian.org/doc/debian-policy/ch-maintainerscripts.html)

编辑：根据@Nate 的评论：当心，因为这些脚本也会在更新包时运行。因此，例如，一个包含一个更新然后被删除的包会这样做：

```
1st installation:
run preinst
(APT installs your package)
run postinst

update:
run prerm of the old version
(APT removes old version)
run postrm of old version

run preinst of new version
(APT installs new version)
run postinst of new version

removal:
run prerm of new version
(APT removes the new version... you no longer have the package)
run postrm of new version 
```

# android - 绘制位图的一侧

> ID：11733587
> 
> 赞同：1
> 
> 时间：2012-07-31T05:23:21.717
> 
> 标签：android, android-widget

我最近使用 3D 旋转动画来旋转 ImageView，我发现 imageview 的正面和背面是相同的。那么我可以在正面绘制一个位图，在背面绘制另一个位图吗？

# google-app-engine - 从 ComputeEngine 访问 DataStore

> ID：11733594
> 
> 赞同：4
> 
> 时间：2012-07-31T05:23:49.383
> 
> 标签：google-app-engine, google-compute-engine, google-cloud-datastore

您认为 Google 什么时候会让 ComputeEngine VM 与 DataStore 对话？

与 AppEngine 后端相比，ComputeEngine 实例要便宜得多。也许这就是他们不想支持它的原因。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:10:10.643

我们认为这个用例非常重要。但是，我们没有任何 ETA。敬请期待！

# c++ - MFC 组件的名称是什么？

> ID：11733599
> 
> 赞同：0
> 
> 时间：2012-07-31T05:24:16.017
> 
> 标签：c++, visual-c++, mfc

我们有文件夹或标签列表（不是树）的 MFC 组件（如 CButton、CDialog）的名称是什么。因此，单击其中一个标签后，我们会在该标签下看到带有不同类型组件（标签、图片）的下拉列表。如果我们单击另一个标签（在上一级），该列表将被关闭，新列表将被丢弃。一切都发生在一个窗口中。您知道 MFC 中的此类组件吗？基本上，他叫什么名字？（我在photoshop CS4-CS5中见过）

# c# - GraphicsDevice.Clear 的颜色与绘制到屏幕上的颜色之间的关系

> ID：11733607
> 
> 赞同：1
> 
> 时间：2012-07-31T05:25:03.900
> 
> 标签：c#, xna, kinect, xna-4.0

我是 XNA 的初学者，正在尝试我的新 kinect for windows，所以决定学习一个教程：[http ://digitalerr0r.wordpress.com/2011/06/20/kinect-fundamentals-2-basic-programming/](http://digitalerr0r.wordpress.com/2011/06/20/kinect-fundamentals-2-basic-programming/)

做完这个之后，我注意到所有的颜色都是浅蓝色的。例如，RGB 20、20、20 的颜色看起来像深蓝色而不是深灰色。

我注意到`GraphicsDevice.Clear()`正在使用`Color.CornflowerBlue`. 我尝试将其更改为`Color.Black`，果然所有的东西现在都染成了黑色。

GraphicsDevice.Clear(color) 和绘制到屏幕上的颜色有什么关系？

这是我的绘图功能：

```
/// <summary>
/// This is called when the game should draw itself.
/// </summary>
/// <param name="gameTime">Provides a snapshot of timing values.</param>
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.Black);

    spriteBatch.Begin();
    spriteBatch.Draw(kinectRGBVideo, new Rectangle(0, 0, 640, 480), Color.White);
    spriteBatch.DrawString(font, connectedStatus, new Vector2(20, 80), Color.Black);
    spriteBatch.End();

    base.Draw(gameTime);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:54:40.787

（根据要求，以答案的形式。）

尝试在调用 spriteBatch.Begin() 方法时更改 BlendState。这决定了颜色在彼此上方绘制时如何混合。

我不确定为什么`BlendState.Opaque`将文本显示为块，但我的猜测是这种混合状态不支持 alpha。因此，文本周围的透明区域变得不透明，使文本看起来像一个矩形。我现在没有工具来检查我的这个猜测，所以我可以验证它。

# php - 为什么 mail() 不发送电子邮件？

> ID：11733608
> 
> 赞同：0
> 
> 时间：2012-07-31T05:25:11.677
> 
> 标签：php

为什么下面的代码不向我发送邮件？错误是什么？

```
<?php
if(isset($_POST['name'])){
    $msg="Name: ".$_POST['name']."\n Email: ".$_POST['email']."\n Address: ".$_POST['city']."\n Phone: ".$_POST['phone'];
    mail('sganake@gmail.com', 'New Trial Request', $msg);
    echo '<h2 align="center" style="color:green">Thank you for your message.</h2>';

} ?> 
```

我没有错误。只是我没有在收件箱收到我的电子邮件。这是在 IIS 服务器上运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:35:50.860

试试这个

```
$headers = 'From: from@address.com' . "\r\n";
$validate = mail('sganake@gmail.com', 'New Trial Request', $msg, $headers);

if($validate)
{
  echo '<h2 align="center" style="color:green">Thank you for your message.</h2>';
}
else
{
  echo '<h2 align="center" style="color:red">Something went wrong.</h2>';
} 
```

如果你得到`'Something went wrong'`它意味着问题出在你的邮件服务器上，而不是在 PHP 代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:41:27.360

您可能必须使用许多邮件服务器所要求的 SMTP 身份验证来发送邮件。检查[此链接](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:50:09.933

可能是你的php配置不完整，见`C://xampp/php/php.ini`中：

```
sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t" 
```

这是用于激活电子邮件。可能你的设置是：

```
;sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:51:20.937

我建议你使用[PEAR::Mail](http://pear.php.net/package/Mail/docs)包。然后您可以通过 SMTP 发送电子邮件。

```
require_once "Mail.php";

$from = "your@gmail.com";
$to = "sganake@gmail.com";
$subject = "New Trial Request";
$body = "Name $name, Address $address ...";
$host = "ssl://smtp.gmail.com";
$port = 465;
$username = "your@gmail.com";
$password = "password";

$headers = array(
    'From' => $from,
    'To' => $to,
    'Subject' => $subject
);
$smtp = Mail::factory(
    'smtp',
    array(
        'host' => $host,
        'port' => $port,
        'auth' => true,
        'username' => $username,
        'password' => $password
    )
);

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
    echo("<p>" . $mail->getMessage() . "</p>");
} else {
    echo("<p>Message has been sent!</p>");
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-31T05:50:41.730

尽管我没有更改您的代码中的任何内容。请试试这个

```
<?php
if(isset($_POST['name'])){

    $to = 'sganake@gmail.com';
    $subject = 'the subject';
    $message = 'hello';

    $msg='Name:'.$_POST{name}. "\r\n".
         'Email: '.$_POST{email}. "\r\n".
        'Address: '.$_POST{city}. "\r\n".
         'Phone: '.$_POST{phone}. "\r\n";

    $headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

    $sent = mail($to, $subject, $message, $headers);
    var_dump($sent) // just to debug
    echo '<h2 align="center" style="color:green">Thank you for your message.</h2>';

} ?> 
```

# h.264 - 使用 TCP 上的 RTSP 传输带有 h.264 帧的附加数据

> ID：11733610
> 
> 赞同：2
> 
> 时间：2012-07-31T05:25:24.687
> 
> 标签：h.264, rtsp, data-transfer, payload

在我的一个应用程序中，我试图实现封装在一个对象中的 H.264 帧的发送和接收，该对象中也有其他数据类型。要求是使用 RTSP over tcp 传输这些帧。在接收端，这些帧需要与附加数据一起被提取并显示。我花了相当多的时间试图尽可能地确认标准，但我似乎没有找到任何特定的有效负载格式来讨论在 RTSP 会话中传递自定义对象。使用 NAL 单位是我最好的选择，还是有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:25:02.890

SEI [NAL Unit](http://en.wikipedia.org/wiki/Network_Abstraction_Layer)是数据的占位符之一，您可以将数据直接嵌入到 H.264 流中。除此之外，您可以将自定义数据作为自定义类型的备用数据流发送，您可以在其中自己定义有效负载格式。

这是来自 RTSP 服务器之一的响应，该服务器能够流式传输除视频和音频之外的元数据（底部两行）。请注意，rtpmap 类型 96-127 是“动态类型”，适用于自定义格式。

```
DESCRIBE rtsp://192.168.0.55/data RTSP/1.0
CSeq: 1
Accept: application/sdp
RTSP/1.0 200 OK
CSeq: 1
Date: Fri, Aug 03 2012 07:13:15 GMT
Content-Base: rtsp://192.168.0.55/data/
Content-Type: application/sdp
Content-Length: 629

v=0
o=- 1343377422075556 1 IN IP4 192.168.0.55
s=Session of first stream
i=First Codec Stream
t=0 0
a=tool:LIVE555 Streaming Media v2007.08.03
a=type:broadcast
a=control:*
a=range:npt=0-
a=x-qt-text-nam:Session of first stream
a=x-qt-text-inf:First Codec Stream
m=video 0 RTP/AVP 96
c=IN IP4 0.0.0.0
a=rtpmap:96 H264/90000
a=fmtp:96 packetization-mode=1;profile-level-id=428028;sprop-parameter-sets=Z0KAKIyNQFoJIg==,aM48gA==
a=control:track1
m=audio 0 RTP/AVP 97
c=IN IP4 0.0.0.0
a=rtpmap:97 PCMU/16000
a=control:track2
m=metadata 0 RTP/AVP 98
c=IN IP4 0.0.0.0
a=rtpmap:98 METADATA/64000
a=control:track3 
```

# iphone - Xcode png图片参考

> ID：11733613
> 
> 赞同：1
> 
> 时间：2012-07-31T05:25:29.967
> 
> 标签：iphone, objective-c, xcode, xcode4

一段时间后，我在 xcode 3.2 中创建了一个项目，我在 4.2 中升级了 xcode，一切正常。现在我想在另一台具有相同环境的 Mac 笔记本电脑上设置我的项目。但是在构建过程中它给了我一个错误，即

> CpResource ../../Desktop/th_text-field.png 错误：/Users/gchauhan/Documents/project backup/30july/lisnxios_lisnxios/Lisnx/../../Desktop/th_text-field.png：没有这样的文件或目录

虽然这个 th_text-field.png 在我的 xcode 项目中不存在。我不知道它是如何发生的，请从这个问题中摆脱出来。我会非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:33:18.363

在您的 3.2 项目中，您必须添加此 png 的引用但未复制。
删除参考，然后再次添加，确保`copy item into destination ...`检查如下

![在此处输入图像描述](../Images/3d65b649c5a401408c9d01890e561434.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:31:47.733

那很正常。该图像在其他计算机上不存在，因此程序无法找到它。始终将图像添加到您的项目包中，以便它可以在其他计算机上正常工作。我认为即使您将沙箱添加到您的应用程序中，如果他在其他目录（例如桌面或类似目录）中，它也无法访问图像。沙盒后可以轻松访问音乐、电影、图片和下载文件夹。访问其他目录是处理沙盒的大量工作。如果您要将应用程序提交到应用商店，您将需要它。现在，如果该文件没有出现在 xcode 项目的文件列表中，那么只需将图像（拖放）添加到您的项目文件列表中，然后在弹出的窗口中，勾选“复制项目......”并确保在“添加到目标”中，您的应用已打勾。

# iphone - 在 Facebook 上发送应用请求通知失败

> ID：11733615
> 
> 赞同：1
> 
> 时间：2012-07-31T05:25:31.237
> 
> 标签：iphone, objective-c, facebook

我是 Iphone 的新手，在 facebook 应用程序中卡住了，事实上，我在我的 TableView 中获取了我所有的 facebook 朋友的列表，他们的 id 是。当我在表格视图上选项卡时，我想向我的朋友发送通知，对话框正在显示，当我按下发送按钮时，Facebook 对话框消失，我的朋友没有收到通知。你能帮我吗。这是我的代码，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString* kAppId = @"317060778330475";
    Facebook *faceBook = [[Facebook alloc] initWithAppId:kAppId andDelegate:self];
    NSDictionary *dic = [facebookInfoArray objectAtIndex:indexPath.row];
    NSString *friendId = [dic valueForKey:@"id"];
    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"Hi check my application, please!",  @"message",
                                   friendId, @"to",
                                   nil];
    [faceBook dialog:@"apprequests" andParams:params  andDelegate:self];
}

#pragma mark - Facebook Delegates 

- (void)dialogDidComplete:(FBDialog *)dialog {

    NSLog(@"App Request Sent!");
}
- (void)dialogCompleteWithUrl:(NSURL *)url {
    NSLog(@"Urls is :%@",url);
} 
```

# xslt - 在 xslt 中禁用输出转义的相反方法

> ID：11733618
> 
> 赞同：1
> 
> 时间：2012-07-31T05:26:01.583
> 
> 标签：xslt, xslt-1.0

> **可能重复：**
> [XSLT：如何将 XML 节点转换为字符串](https://stackoverflow.com/questions/6696382/xslt-how-to-convert-xml-node-to-string)

输入：

```
<text> aabbabab  </text> 
```

输出：

```
&lt;text&gt; aabbabab &lt;/text&gt; 
```

这与禁用输出转义相反。

我们如何在 xslt 中实现这一点。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:08:54.657

如果您可以使用 Saxon 扩展，请尝试

```
<xsl:value-of select="saxon:serialize(text)"/> 
```

如果没有，有各种帖子告诉您如何在 XSLT 中编写自己的 serialize() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:04:42.200

看到**[这个答案](https://stackoverflow.com/a/11623265/36305)**。

总之，最短的解决方案使用了一个微小的扩展函数。

# android - 不同标签android中的不同形式

> ID：11733620
> 
> 赞同：0
> 
> 时间：2012-07-31T05:26:12.457
> 
> 标签：android, android-tabs

我有 2 个选项卡：报告和配置文件。

我想在每个选项卡中添加不同的表单（Textview、微调器等）。现在我尝试使用一个按钮，它应该是不同选项卡中的不同按钮。

但我得到的是我在两个选项卡中都有相同的按钮。它应该在报告选项卡中显示按钮名称 ButtonReport 和在配置文件选项卡中显示 ButtonProfile。

下面是它的图片。

![在此处输入图像描述](../Images/065bc28891b8f35702c3e3ad8f1fe146.png)

我将按钮代码放在 main.xml 中。

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

        <TabWidget android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        </TabWidget>

        <FrameLayout android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <!-- Start Interface -->
        <TableLayout android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/tableLayout1" android:alwaysDrawnWithCache="false">  
        <TableRow android:layout_height="fill_parent" android:id="@+id/tableRow3">
            <TableLayout android:id="@+id/tableLayout2" android:layout_width="wrap_content" android:layout_height="wrap_content">

                <Button android:text="Button Report" android:id="@+id/button1" android:layout_width="fill_parent" android:layout_height="wrap_content"></Button>

            </TableLayout>
            </TableRow>     
        </TableLayout>
        <!-- End Interface -->

        </FrameLayout>

    </LinearLayout>

</TabHost> 
```

这是我的 ReportActivity 类和 ProfileActivity（相同的代码只有不同的名称）

```
package com.tab;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class ReportActivity extends Activity{
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        TextView text = new TextView(this);
        text.setText("Artist");
        setContentView(text);
    }
} 
```

这是我的 MainActivity 类

```
package com.tab;

import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;

public class MainActivity extends TabActivity {
    private TabHost aTab;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Resources res = getResources();
        aTab = getTabHost();
        TabHost.TabSpec spec;
        Intent intent;

        //Report Tab
        intent = new Intent(this, ReportActivity.class);

        spec = aTab.newTabSpec("Report")
            .setIndicator("Report", res.getDrawable(R.drawable.tab_icon))
            .setContent(intent);
        aTab.addTab(spec);

        //Profile Tab
        intent = new Intent(this, ProfileActivity.class);

        spec = aTab.newTabSpec("Profile")
            .setIndicator("Profile", res.getDrawable(R.drawable.tab_icon))
            .setContent(intent);
        aTab.addTab(spec);

        aTab.setCurrentTab(1);
    }
} 
```

有没有办法在不同的选项卡中有不同的形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:32:04.137

最好的方法（我认为）是使用 Fragments：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

片段至少适用于 API 级别 11，但您可以使用兼容性包： [http ://android-developers.blogspot.ch/2011/03/fragments-for-all.html](http://android-developers.blogspot.ch/2011/03/fragments-for-all.html)

所以每个标签都会变成一个片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:40:39.497

[看看 TabHost 教程](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)，看看他们如何在他们`TabHost`的例子中使用不同的内容 -

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost> 
```

**报告.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <!-- Screen Design for Photos -->
  <Button android:text="Button Report"
            android:textSize="18dip"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

</LinearLayout> 
```

**配置文件.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <!-- Screen Design for Photos -->
  <Button android:text="Button Profile"
            android:textSize="18dip"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

</LinearLayout> 
```

在您的**main.xml**类中包含一些不同的东西，即**Start Interface**`(Button)`这是每个选项卡都显示相同内容的问题。你必须删除它。

而且，在您的`Profile`和`Report`活动中，只需使用这将提供您需要的单独按钮来查看此`xml`文件。`setContentView`你可以用`MainActivity`这个，看起来很完美。

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T05:42:02.387

您可以为每个活动（报告和配置文件）设置不同的布局 xml： 来源：[http](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/) ://www.androidhive.info/2011/08/android-tab-layout-tutorial/ 首先创建一个名为 TabHostActivity 的活动：

```
import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class TabHostActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();

        TabSpec report = tabHost.newTabSpec("Report");
        report.setIndicator("Report", getResources().getDrawable(R.drawable.icon_report));
        Intent reportIntent = new Intent(this, report.class);
        report.setContent(reportIntent);

TabSpec profile = tabHost.newTabSpec("Profile");
        profile.setIndicator("Profile", getResources().getDrawable(R.drawable.icon_profile));
        Intent profileIntent = new Intent(this, profile.class);
        profile.setContent(profileIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(report); // Adding photos tab
        tabHost.addTab(profile); // Adding songs tab
    }
} 
```

然后在 res/layouts 下制作 Main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost> 
```

然后两个不同的活动将为您的报告和配置文件执行操作：

```
//report.java
package com.example;

import android.app.Activity;
import android.os.Bundle;

public class ReportActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.report_layout);
    }
}

//profile.java
package com.example;

import android.app.Activity;
import android.os.Bundle;

public class ProfileActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.profile_layout);
    }
} 
```

现在您可以制作两个 XML，一个用于配置文件布局，一个用于报告布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <TextView android:text="Profile"
            android:padding="15dip"
            android:textSize="18dip"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

</LinearLayout> 
```

和

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <TextView android:text="Report"
            android:padding="15dip"
            android:textSize="18dip"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

</LinearLayout> 
```

完成后，您可以修改每个 xml 以拥有您喜欢的任何按钮和微调器等。

最后，确保修改您的 AndroidManifest 以允许活动并通过意图过滤器自动启动到您的 tabhostactivity

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="7" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".TabHostActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".profile" />

        <activity android:name=".report" />

    </application> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:36:57.987

我认为这段代码会对您有所帮助。您可以使用不同的意图来调用不同的选项卡活动..并且您可以为不同的活动设置不同的内容视图..

```
public class MainActivity extends TabActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    setContentView(R.layout.activity_main);

        Resources ressources = getResources(); 
        TabHost tabHost = getTabHost();

        //Setting Android TAB
        Intent intentAndroid = new Intent().setClass(this, AndroidTab.class);
        TabSpec tabSpecAndroid = tabHost
          .newTabSpec("Android")
          .setIndicator("", ressources.getDrawable(R.drawable.android))
          .setContent(intentAndroid);

        //Setting Apple TAB
        Intent intentApple = new Intent().setClass(this, AppleActivity.class);
        TabSpec tabSpecApple = tabHost
          .newTabSpec("Apple")
          .setIndicator("", ressources.getDrawable(R.drawable.aapl))
          .setContent(intentApple);

        //Add all tabs
        tabHost.addTab(tabSpecAndroid);
        tabHost.addTab(tabSpecApple);

        tabHost.setCurrentTab(0);
}
} 
```

在你应该创建不同的类并为 android 和 apple 创建两个活动之后。在那个特定的活动中，你可以设置不同的 contentviews，我想你会得到你想要的。这只是一个示例，你可以让它成为你想要的一样。 .

# iphone - 从另一个视图启动和停止一个视图的计时器

> ID：11733628
> 
> 赞同：0
> 
> 时间：2012-07-31T05:26:47.887
> 
> 标签：iphone, objective-c, xcode

在我的应用程序中有两个视图。view1 有一个功能测试

```
 -(void) testing
  {
       NSLog(@"Testing : %d", (++x));
  } 
```

和一个计时器

```
 timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self   selector:@selector(testing) userInfo:nil repeats:YES]; 
```

我想要的是从 view2 停止并运行这个计时器。怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T05:51:14.797

在 AppDelegate 中定义定时器，

```
@interface TimerDemoAppDelegate : NSObject <UIApplicationDelegate>
{
NSTimer *timer;
}

@property (nonatomic, retain) NSTimer *timer;

@end 
```

并通过在您的视图 .h 文件中创建 TimerDemoAppDelegate 对象在您的两个视图中使用计时器

```
@interface View1 : UIViewController
{
TimerDemoAppDelegate *appDelegate;
} 
```

在你看来 .m 文件

```
appDelegate=(TimerDemoAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

现在使用定时器作为 appDelegate.timer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:39:08.003

添加`timer2`到您的`View2`班级

```
@interface View2 : UIView{
    NSTimer *timer2;
}
@property (nonatomic,retain) NSTimer *timer2;
@end

@implementation View2
@synthesize timer2;
@end 
```

并这样做

```
timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self   selector:@selector(testing) userInfo:nil repeats:YES];
view2.timer2 = timer; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:56:11.067

使用`NSNotificationCenter`您可以从另一个视图调用方法，而无需创建任何对象。

在你的`viewDidLoad`

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(button:) 
                                             name:@"Next"
                                           object:nil];

-(void)button:(NSNotification *) notification
{
 // write a code of timer here.....
}

//call this following from another view

[[NSNotificationCenter defaultCenter] 
 postNotificationName:@"Next" 
 object:self]; 
```

享受这段代码......

# django - 当应返回至少一个结果时，ManyRelatedManager 调用返回空列表

> ID：11733629
> 
> 赞同：0
> 
> 时间：2012-07-31T05:26:54.080
> 
> 标签：django, django-models

我指定了两个模型来跟踪用户对文章实例的支持（在另一个应用程序中，在这种情况下`articlescraper`）。

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User)

    articles_upvoted = models.ManyToManyField('useraccounts.UpvotedArticle',
                                              null=True,
                                              blank=True)

class UpvotedArticle(models.Model):
    article = models.ForeignKey('articlescraper.Article')
    user = models.ForeignKey(User) 
```

在 Django shell 中，我尝试通过交互来获取文章列表`UserProfile`：

```
a = UserProfile.objects.get(pk=1)
a.articles_upvoted.all() 
```

返回：

```
[] 
```

但是，然后我走得更远：

```
b = UpvotedArticle.objects.filter(user=User.objects.get(pk=1))
b 
```

返回：

```
[<UpvotedArticle: Arch Linux Lexmark S305 Drivers>, <UpvotedArticle: Structure of a Haystack project>] 
```

这是预期的行为，并反映在 Django 管理员的`UserProfile`和`UpvotedArticle`类别中。

`a.articles_upvoted.all()`但是，我不明白，如果两个模型链接在一起，为什么不能按照我最初尝试使用的方式来尝试获取文章列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:00:23.870

因为这不是同一个关系。通过在一侧定义 ForeignKey 和在另一侧定义 ManyToMany，您为数据库提供了两个单独的位置来存储有关文章投票的信息。

您应该删除`ManyToManyField`on `UserProfile`，并使用自动反向关系：

```
a = UserProfile.objects.get(pk=1)
a.upvotedarticle_set.all() 
```

或者，您可以将其识别`UpvotedArticle`为 ManyToMany 关系的“通过”表，并在 -note 的定义中明确标记它，`articles_upvoted`尽管该关系应该是 with `articlescraper.Article`，而不是`UpvotedArticle`：

```
article_upvoted = models.ManyToManyField(articlescraper.Article, null=True,
                                         blank=True, through=UpvotedArticle) 
```

尽管由于您没有在该关系上添加任何额外数据（这是定义显式直通表的常见原因），但您可能希望完全删除它，而只依赖 Django 将创建的自动数据。

# java - 同步数据读/写到/从主存储器

> ID：11733632
> 
> 赞同：5
> 
> 时间：2012-07-31T05:27:04.143
> 
> 标签：java, multithreading, caching, synchronization, java-memory-model

当一个同步方法完成后，是只把它修改过的数据推送到主存，还是把所有的成员变量都推送到主存，同理，同步方法执行时，是只从主存中读取它需要的数据还是清空所有的数据？缓存中的成员变量并从主存中读取它们的值？例如

```
public class SharedData
{

    int a; int b; int c; int d;

    public SharedData()
    {
        a = b = c = d = 10;
    }

    public synchronized void compute()
    {
        a = b * 20;
        b = a + 10;
    }

    public synchronized int getResult()
    {
        return b*c;
    }

} 
```

在上面的代码中，假设计算由线程A 执行，getResult 由线程B 执行。在执行计算之后，线程A 将使用 a 和 b 更新主内存还是更新 a、b、c 和 d。在执行 getResult 之前，threadB 将只从主内存中获取 b 和 c 的值，还是会清除缓存并获取所有成员变量 a、b、c 和 d 的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:16:42.747

`synchronized`确保您拥有一致的数据视图。这意味着您将读取最新值，而其他缓存将获得最新值。缓存足够智能，可以通过特殊的总线相互通信（JLS 不需要，但允许这样做）这种总线意味着它不必接触主内存即可获得一致的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:56:26.880

我认为以下线程应该回答您的问题。

[Java中同步的记忆效应](https://stackoverflow.com/questions/1850270/memory-effects-of-synchronization-in-java)

实际上，不会刷新整个缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T05:32:55.473

**1.** `synchronized`方法或原子语句上的关键字**，将锁定对它可以修改的资源的访问，只允许一个线程获得锁定。**

**2.**现在**防止将值缓存到变量中是通过** `volatile`关键字完成的。使用`volatile`关键字**将要求 JVM 使访问实例变量的线程将其实例变量的副本与保存在内存中的副本相协调。**

**3.**此外，在你上面的例子中，如果`threadA`执行`compute()`，则`threadB` **不能****同时**访问该`getResult()`方法，因为它们**都是同步方法，并且只有一个线程可以访问对象的所有同步方法**，导致****`its not the method that is locked but the Object. Its` `like this... Every object has one lock, and the thread which wants to access its synchronized block must get that lock`****

 ******4.**甚至**每个类都有一个锁**，用来保护**类中静态变量的关键状态。******

# c# - 在c#中的html文档中插入新节点

> ID：11733634
> 
> 赞同：0
> 
> 时间：2012-07-31T05:27:10.257
> 
> 标签：c#, html-agility-pack

我正在尝试使用 htmlagilitypack 在文档中插入新节点。我正在从流中读取文档，插入节点，然后将文档作为 FileContentResult 对象返回：

```
HtmlDocument ndoc = new HtmlDocument();
ndoc.Load(stream);

HtmlNode usern = HtmlNode.CreateNode("<img .... />");
usern.Attributes.Add("onclick", "javascript:document.location.href='/Home/Index';");
ndoc.DocumentNode.SelectSingleNode("id('main')").AppendChild(usern);

using (MemoryStream ms = new MemoryStream())
{
   ndoc.Save(ms);
   ms.Seek(0, System.IO.SeekOrigin.Begin);
   fileBytes = ms.ToArray();
}

FileContentResult file = File(fileBytes, "text/html");
return file; 
```

**问题：** 未插入新节点 ( img )。如果我使用此代码，并且我只是从流中读取文档并作为 FileContentResult 返回，那么我的页脚内容就消失了，那么一切都很完美。我想知道这段代码有什么问题或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:34:37.740

我遇到了同样的问题，通过传递克隆对象解决了它。只需修改该行

```
ndoc.DocumentNode.SelectSingleNode("id('main')").AppendChild(usern); 
```

至

```
ndoc.DocumentNode.SelectSingleNode("id('main')").AppendChild(usern.CloneNode(true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:36:17.560

看看[HTML Agility pack 创建新的 HTMLNode](https://stackoverflow.com/questions/5309989/html-agility-pack-create-new-htmlnode)。

这显示了如何正确创建新节点。以我的经验，他们的代码运行良好。类似于 jQuery 一步一步来。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:39:25.897

尝试改变

```
HtmlNode usern = HtmlNode.CreateNode("<img .... />"); 
```

只是img

```
HtmlNode usern = HtmlNode.CreateNode("<img></img>"); 
```

并添加这个

```
 ndoc.OptionWriteEmptyNodes = true; 
```

# internet-explorer - Internet Explorer DNS、缓存

> ID：11733637
> 
> 赞同：6
> 
> 时间：2012-07-31T05:27:16.140
> 
> 标签：internet-explorer, browser-cache

我希望有人可以帮助我解决特定的 IE 问题，因为我无法使用 VMWare 复制它。

我最近更改了我托管的网站的 IP 地址。在我更新 DNS 记录的短时间内，客户端使用 Internet Explorer 查看了该网站。服务器响应其标准的“网站配置错误问题，可能是因为 IP 更改了”。（这是简短的版本）

DNS 已更新，站点再次正确显示，但客户端仍然看到错误消息。

我做了什么：

*   要求他们按 F5
*   清除浏览器缓存
*   ipconfig /flushdns
*   我要求他们 ping 域，它会以新的 IP 地址回复。
*   通过 IP 访问站点 - 可以看到新站点。
*   单击菜单项，他们可以转到任何页面，但是当他们转到主页时，“错误页面再次出现”

我现在不知所措。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:04:16.453

希望此信息对其他人有所帮助。

我无法解释为什么会这样，但确实如此。

IE9 有一个 inPrivate 浏览选项。我只是打开它浏览到网页，我可以看到主页。关闭私人浏览器，并能够正常查看该站点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-01T21:33:30.013

Internet Explorer 有另一个内部 DNS 缓存，可将 DNS 条目存储 30 分钟。

刷新计算机的 DNS 后，您可以关闭浏览器以重置 Internet Explorer 的内部缓存，或者等待 30 分钟。

详情： https: [//support.microsoft.com/en-us/help/263558/how-internet-explorer-uses-the-cache-for-dns-host-entries](https://support.microsoft.com/en-us/help/263558/how-internet-explorer-uses-the-cache-for-dns-host-entries)

# c++ - C++ 析构函数

> ID：11733641
> 
> 赞同：0
> 
> 时间：2012-07-31T05:27:28.767
> 
> 标签：c++, oop, constructor, destructor, static-members

考虑这种情况：我需要为某些设置创建一个 ui。由于理论上数据和用户界面应该分开，我定义了一个单独的类来处理配置数据。我的问题是如何在设置类中实例化数据类。

一种方法是在调用者对象中创建数据类，我的意思是调用设置菜单类的对象。

我的问题涉及的另一种方法是在设置类中创建一个 DATA 类变量。我怀疑设置类被破坏时会发生什么！设置类中的数据类对象也会被破坏吗？如果它被定义为设置类的静态成员呢？

```
#ifndef SETTINGSWINDOW_H

#define SETTINGSWINDOW_H

#include <QMainWindow>
#include <QModelIndex>

#include <QSignalMapper>
#include <QRadioButton>
#include <QSpinBox>
#include <QTimer>

#include "cameracommands.h"

struct Config
{
    /* General Options */
    QString general_key_lock;
    QString general_back_light;
};

//class IConfigSource
//{
//public:
//    virtual Config config() const;
//    virtual void setConfig(const Config& cfg);
//};

class ConfigSource /* : public IConfigSource*/
{
    public:

    ConfigSource() {

        config_.general_back_light         = "OFF";
        config_.general_key_lock           = "OFF";
    }

    Config config() const {return config_;}

    void setConfig(const Config& cfg) {config_ = cfg;}

    private:

    Config config_;
};

class ConfigUpdater : public QObject
{
    Q_OBJECT
public:
    ConfigUpdater(ConfigSource& src) : src_(src) {}

public slots:

    void apply () {src_.setConfig(tempConfig_);}
    void cancel() {tempConfig_ = src_.config();}

public:

    void updateGeneralBackLight(QString s)             {tempConfig_.general_back_light         = s; qDebug() << "BackLight updated :)";}
    void updateGeneralKeyLock(QString s)               {tempConfig_.general_key_lock           = s; qDebug() << "KeyLock updated :)";}

    Config tempConfig_;
    ConfigSource& src_;
};

//----------------------------

namespace Ui {
    class SettingsWindow;
}

class SettingsWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit SettingsWindow(QWidget *parent = 0);

    ~SettingsWindow();

signals:
    void clicked(const QString &text);
    void sendToPLC(QByteArray );

public slots:
    void updateGeneralBackLight();
    void updateGeneralKeyLock();

    void getRow(QModelIndex);
    void MySlot(QString);

private slots:
    void on_pushButton_5_clicked();
    void on_pushButton_3_clicked();

private:

    void set_mappings();

    Ui::SettingsWindow *ui;
    ConfigUpdater      *config_updater;
    QSignalMapper      *mapper;
};

#endif // SETTINGSWINDOW_H 
```

这是来源：

```
QMainWindow(parent),
ui(new Ui::SettingsWindow) 
```

{ /* 初始化 */

```
ui->setupUi(this);

ConfigSource src;

config_updater = new ConfigUpdater(src); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:32:44.907

这取决于您需要如何使用它。

*   场景 1\. 程序运行时设置需要保存在内存中。

*   场景 2\. 设置需要立即保存到光盘，然后将按需读取。

***在场景 1***中，您需要能够始终访问内存中的数据。所以最好把`settingsUI`类和`settingsData`类分开，这样你就可以访问后者。

```
class settingsUI
{
<...>
private:
    settingsData * data;//pointer to the data object
}

class settingsData
{
} 
```

***在场景 2***中，您可以聚合`settingsData`到 中`settingsUI`，并在 UI 销毁时将数据保存到文件中。

```
class settingsUI
{
public:
    <...>
    ~settingsUI();

private:
    class settingsData
    {
    <..>
    }data;
<...>
}

class settingsUI::~settingsUI()
{
    data.saveToFile();
} 
```

是的，如果您将设置聚合到 UI 中，它将在 UI 被销毁时被销毁。将数据作为静态成员保存并不是最好的主意，最好将数据与可视化表示（在您的情况下是 UI 类）分开。

**更新**：

如果你想保持它直到程序退出，我建议你在 UI 类中保持一个指向数据的静态指针。这是一个带有原始指针的示例，但您也可以使用智能指针，ofc。

```
class data
{
}

class UI
{
private:
    static data * data_;
}
data* UI::data_; 
```

当您的程序启动时，为 data: 分配内存`UI::data_ = new data()`，当您的程序结束时（或者如果您不再需要数据），释放内存：`delete UI::data_`。再一次，最好使用智能指针，所以这只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:33:21.233

是的，当设置对象被销毁时，数据对象会被销毁。如果您将其设为静态成员，则不会。但这可能不是一个好主意。更好的方法是将数据对象保存到文件中（比如说）。您可以在设置对象构造函数中读取文件并在设置对象析构函数中写入文件。

编辑

```
class SettingsWindow : public QMainWindow
{
Q_OBJECT

public:
    explicit SettingsWindow(ConfigSource& src , QWidget *parent = 0);
...
}

SettingsWindow::SettingsWindow(ConfigSource& src , QWidget *parent)
    QMainWindow(parent),
    ui(new Ui::SettingsWindow)
{
    ui->setupUi(this);
    config_updater = new ConfigUpdater(src);
    ...
} 
```

谢谢，是正确的。当我尝试将以下变量传递给用户定义的函数时，程序终止：（内部标题）

无效打印配置（配置配置文件）；

UI::设置窗口 *ui; 配置更新器 *config_updater;

在cpp里面：

```
void SettingsWindow::print_config(Config config)
{
    qDebug() << config.general_back_light;
    qDebug() << config.general_key_lock;

}

void SettingsWindow::on_sendToMainButton_clicked() /* cancel */
{
   print_config(config_updater->tempConfig_);
   print_config(config_updater->src_.config());
} 
```

第一个，print_config 指令工作正常，对于 tempConfig_，但是当我在第二个语句中传递 src_ 时，它会跳出程序。

//------------

我知道问题出在哪里，但我无法解决，我希望这可以帮助：

```
class ConfigUpdater : public QObject
{
    Q_OBJECT
public:
    ConfigUpdater(ConfigSource& src) : src_(src) {}

public slots:

    void apply () {src_.setConfig(tempConfig_);}
    void cancel() {tempConfig_ = src_.config();}

public:

    Config tempConfig_;
    ConfigSource& src_;
}; 
```

在这里， src_ 是通过引用传递的，无处不在，甚至在设置窗口的构造函数中。当我尝试在内存中访问它时程序失败，例如：

```
config_updater->cancel(); 
```

哪个： void cancel() {tempConfig_ = src_.config();}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:33:25.047

如果设置类仅由 UI 使用，那么将其保留在 UI 类中是有意义的：

```
class Settings {
    int a;
    int b;
};

class Ui {
private:
    Settings settings;
}; 
```

`settings`将在销毁期间销毁`Ui`。

如果您`Settings`在许多地方使用该对象，则保留指向它的共享指针更有意义：

```
class Ui {
public:
    Ui(std::shared_ptr<Settings> someSettings)
        : settings(someSettings)
    {}
private:
    std::shared_ptr<Settings> settings;
}; 
```

当 的最后一个所有者被销毁时，该`Settings`对象将被`shared_ptr`销毁。

# magento - 将子类别添加到 Magento 中的多个父类别

> ID：11733642
> 
> 赞同：2
> 
> 时间：2012-07-31T05:27:30.380
> 
> 标签：magento, magento-1.5, categories, magento-1.6

我想将一个特定的子类别分配给多个父类别。

例如，如果有 2 个父类别，比如戴尔笔记本电脑和索尼笔记本电脑，以及一个名为笔记本电脑配件的子类别。我想在 "Dell Laptop" 和 "Sony Laptop" 中都包含 "Laptop Accessories" 类别。

默认情况下，此功能不在 Magento 中，我需要创建 2 个名为“笔记本电脑配件”的子类别，然后将其分配给父类别。

我该如何解决这个问题？有人做过吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:03:01.730

Magento 中的类别父子关系是一对多的（一个父类别有很多孩子，每个孩子只有一个父母）。数据库模式不允许您做任何事情。

如果您的问题是快速创建多个“笔记本电脑”类别，请考虑将您的类别创建为 CSV，并使用 Unirgy 的 RapidFlow 等工具导入它们，或者编写设置脚本。

# mysql - 复杂的sql语句到不同的行

> ID：11733644
> 
> 赞同：1
> 
> 时间：2012-07-31T05:27:37.170
> 
> 标签：mysql, sql

我有一个简单的表，它有 4 个字段：

```
indexID
UserID
text_1
IsFinal 
```

此表中的每个 可能有多个值`UserID`，并且`IsFinal`字段只能有一个值 1 或 0。

我正在尝试做的是创建一个选择语句，如果`IsFinal`仅等于 0，它将返回用户 ID。问题可能存在多个相同用户 ID 的记录，一些`IsFinal`等于 0，只有 1 个`IsFinal`等于 1。

我的问题是：对于每一个`UserID`，如果它有一个记录`Isfinal = 1`，我想忽略所有相同的记录`UserID`，否则我想返回它的记录。我不知道这是否只能通过 SQL 语句来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:07:40.750

似乎您想要一个*反加入*，即您首先需要确定哪些用户 ID 具有`IsFinal = 1`，然后使用该结果集返回*不在*该列表中的所有用户 ID。

有多种方法可以实现反连接。

1.  `NOT IN`：

    ```
    SELECT *
    FROM atable
    WHERE UserID NOT IN (
      SELECT UserID
      FROM atable
      WHERE IsFinal = 1
    ); 
    ```

2.  `NOT EXISTS`：

    ```
    SELECT *
    FROM atable t1
    WHERE NOT EXISTS (
      SELECT *
      FROM atable t2
      WHERE t1.UserID = t2.UserID
        AND t2.IsFinal = 1
    ); 
    ```

3.  `LEFT JOIN`+ `WHERE IS NULL`:

    一种）

    ```
    SELECT *
    FROM atable t1
      LEFT JOIN (
        SELECT *
        FROM atable
        WHERE IsFinal = 1
      ) t2 ON t1.UserID = t2.UserID
    WHERE t2.UserID IS NULL; 
    ```

    b)

    ```
    SELECT *
    FROM atable t1
      LEFT JOIN atable t2
        ON t1.UserID = t2.UserID AND t2.IsFinal = 1
    WHERE t2.UserID IS NULL; 
    ```

它们可能会在您的数据库中同样有效，但测试它们中的每一个以至少避免最终得到一个性能比其他更差的结果仍然可能是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:41:06.363

我认为这就是你要找的：

```
SELECT a.*
FROM translations a
     INNER JOIN (SELECT UserID FROM translations WHERE IsFinal = 1) b
        ON a.UserID = b.UserID
WHERE IsFinal = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:58:14.930

尝试（未测试）

```
SELECT t1.* FROM table t1
INNER JOIN table t2 USING(indexID)
WHERE t1.IsFinal <>1
GROUP BY t1.UserID 
```

# javascript - 单个标记卡在 Fusion Tables 图层中的多边形下方

> ID：11733649
> 
> 赞同：1
> 
> 时间：2012-07-31T05:27:47.747
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

所以这让我觉得，也许，一个非常不起眼的错误。

我正在为即将到来的魁北克选举绘制地图。你可以[在这里看到](http://demarchy.ca/qc2012)

所以我用所有的骑行多边形建立了一个融合表，我已经开始为感兴趣的骑行添加点。他们都工作正常 - 除了一个。如果您放大蒙特利尔周围的区域（特别是拉瓦尔），则会有一个蓝点卡在红色多边形后面，根本无法点击。

我已经尝试使用 zindex 来处理所有标记，但运气不佳。这就是我正在做的事情：

```
var layer = new google.maps.FusionTablesLayer({
    query: 
    {
        select: 'Geocodable address',
        from: '4722124'
    },
    styles: 
    [
        {
            markeroptions: { zindex: 1, }
        }, 
        {
            polygonOptions: { zindex: 2, }
        }
    ]
});

layer.setMap(map); 
```

除此之外，我不完全确定该怎么做。其余的标记工作正常。

目前，我只是将这些点手动插入融合表中。我应该使用 CSS 删除它们并以这种方式编辑 zindex 吗？（假设这只是一个小故障，没有其他解决方案。）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T23:16:09.837

我自己已经为此苦苦挣扎了很长时间。我尝试以不同的顺序创建标记和多边形（例如，首先是多边形，其次是标记，反之亦然），但没有找到控制哪个项目在另一个之上的方法。

我的解决方法是将融合表导出到 KML 文件，然后手动重新组织文件中项目的顺序。地标在 KML 文件中出现的位置越高，它在地图上的项目顺序中就越靠近顶部。也就是说——首先放置标记，然后放置多边形，然后您将能够单击标记。

希望这可以帮助！

向 FUSION 团队提问——你确定可以将这个逻辑写入 Fusion Tables 代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:44:53.450

我知道强制标记位于顶部的唯一方法是将它们放在单独的层中

```
var layer1 = new google.maps.FusionTablesLayer({
  query: {
    select: 'Geography',
    where: "Marker does not contain '_'",
    from: '4749709' // '4722124'
 }});
layer1.setMap(map);
var layer2 = new google.maps.FusionTablesLayer({
  query: {
    select: 'Geography',
    where: "Marker contains '_'",
    from: '4749709' // '4722124'
 }});
layer2.setMap(map); 
```

[工作示例](http://www.geocodezip.com/demarchy_ca_qc2012a.html)

这样做的缺点是可能同时显示两个信息窗口。一种解决方法是自己管理信息窗口。

[带有单个信息窗口的工作示例](http://www.geocodezip.com/demarchy_ca_qc2012b.html)

# activerecord - Yii php 框架中的 Active Record 模型是什么？

> ID：11733650
> 
> 赞同：-3
> 
> 时间：2012-07-31T05:27:55.030
> 
> 标签：activerecord, yii

我正在阅读有关 Yii 框架的教程。它使用了一个我不知道其含义的术语。它是“**活动记录模型**”。它在数据库部分教程中使用。

你能给我更多关于这个词的解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T05:31:38.637

来自 Yii 的文档：

Active Record (AR) 是一种流行的`Object-Relational Mapping`(ORM) 技术。每个**AR 类**代表一个数据库表（或视图），其属性表示为 AR 类属性，一个 AR 实例代表该表中的一行。常见的 CRUD 操作被实现为 AR 方法。因此，我们可以以更加面向对象的方式访问我们的数据。

例如，我们可以使用以下代码向 tbl_post 表插入新行：

```
$post=new Post;
$post->title='sample post';
$post->content='post body content';
$post->save(); 
```

下面我们将描述如何设置 AR 并使用它来执行 CRUD 操作。我们将在下一节展示如何使用 AR 处理数据库关系。为简单起见，我们在本节的示例中使用以下数据库表。请注意，如果您使用的是 MySQL 数据库，则应在以下 SQL 中将 AUTOINCREMENT 替换为 AUTO_INCREMENT。

```
CREATE TABLE tbl_post (
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    title VARCHAR(128) NOT NULL,
    content TEXT NOT NULL,
    create_time INTEGER NOT NULL
); 
```

[这里](http://www.yiiframework.com/doc/guide/1.1/en/database.ar/)还有更多内容。

# django - 在 Django 中使用 ifequal

> ID：11733651
> 
> 赞同：2
> 
> 时间：2012-07-31T05:27:57.837
> 
> 标签：django, django-templates

我确定这里缺少一些愚蠢的东西，但我正在尝试使用 ifequal 来评估模板变量。

这是我的模型：

```
USER_TYPES = (
('instructor', 'Instructor'),
('student', 'Student'),
)

class UserProfile(models.Model):
    type = models.CharField(
        choices=USER_TYPES, max_length=12
    )
    user = models.ForeignKey(
        User, 
        unique=True
    )

    def __unicode__(self):
        return u'%s' % (self.type) 
```

...我在模板中使用它：

```
{% ifequal user.userprofile_set.get student %}
You're a student! 
{% endifequal %} 
```

当我简单地打印出 {{ user.userprofile_set.get }} 我得到：

```
student 
```

不知道我错过了什么 - 任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T06:33:41.987

ifequal 已被弃用......但我认为这有效：

```
{% ifequal user.userprofile_set.get.type "student" %}
    Your a student! 
{% endifequal %} 
```

# php - 如何在 php 中处理 curl 会话和 cookie

> ID：11733652
> 
> 赞同：0
> 
> 时间：2012-07-31T05:28:09.193
> 
> 标签：php, curl

我想通过 curl 登录并维护 cookie 和会话信息以供进一步调用。我在同一目录中创建了 cookie 文本文件并使用 CURLOPT_COOKIEJAR 、CURLOPT_COOKIEFILE 来维护 CUL 中的 cookie。每当我尝试调用登录 api 时，它都会使用旧 cookie 并显示以前的用户信息。我需要维护不同的用户 cookie 并像普通浏览器句柄一样维护会话。怎么做。任何人都给出想法去做。

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,$url); 
curl_setopt($ch, CURLOPT_HEADER,0); // TRUE to include the header in the output.    
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); // it will follow with server redirects  
curl_setopt($ch,CURLOPT_AUTOREFERER,1);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);//ssl certificate verifyer
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  2);  //ssl certificate host

// Set the location of and send the cookies
curl_setopt($ch, CURLOPT_COOKIEJAR, dirname(__FILE__) . "/cookies.txt");

    curl_setopt($ch, CURLOPT_COOKIEFILE, dirname(__FILE__) . "/cookies.txt");

curl_setopt( $ch, CURLOPT_COOKIESESSION, true );    

$result = curl_exec($ch); //execute curl and store data in result 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:42:28.947

你可以修改

```
dirname(__FILE__) . "/cookies.txt" 
```

进入类似的东西

```
dirname(__FILE__) . '/user_cookies/' . $username . '.txt' 
```

您需要清理该行的用户名，使其不包含任何无效字符。

此外，将 /user_cookies/ 权限设置为 777 之类的内容。

这样您就不需要检查用户是否有 cookie。如果没有，将创建该文件。如果用户拥有它们，将使用现有的文件内容。

您也可以将 cookie 存储在数据库中，但这要复杂得多。

# c# - 这段代码是正确的 MVC 架构吗？

> ID：11733656
> 
> 赞同：3
> 
> 时间：2012-07-31T05:28:26.817
> 
> 标签：c#, model-view-controller, design-patterns

我正在学习 MVC 模式。我创建了这个非常简单的代码作为演示。

代码的目标很简单。我创建了一个初始速度为每小时 95 英里的汽车对象。有 1 个标签显示当前速度，2 个按钮，增加和减少速度。

单击每个按钮时，速度会增加或减少 1，并且标签会显示修改后的速度。一旦速度超过100，增加按钮被禁用，用户现在只能降低速度。一旦速度降低到 100 以下，增加按钮再次启用。

这是我的模型、视图和控制器的代码。

## 接口模型

```
public interface IModel
{
    int getCurrentSpeed();

    int increaseSpeed();
    int decreaseSpeed();

    void updateObserver();
    void setView(IView objView);
} 
```

## 类 carModel（来自 IModel 的具体类）

```
public class carModel : IModel
{
    private IView objLocalView;
    private int currentSpeed;

    //Constructor
    public carModel(int carSpeed)
    {
        this.currentSpeed = carSpeed;
    }

    public void setView(IView objView)
    {
        objLocalView = objView;
    }

    public int increaseSpeed()
    {
        currentSpeed++;
        updateObserver();
        return currentSpeed;
    }

    public int decreaseSpeed()
    {
        currentSpeed--;
        updateObserver();
        return currentSpeed;
    }

    public void updateObserver()
    {
        objLocalView.updateStatus(this);
    }

    public int getCurrentSpeed()
    {
        return currentSpeed;
    }

} 
```

## 接口控制器

```
public interface IController
{
    void requestIncreaseSpeed();
    void requestDecreaseSpeed();
} 
```

## 类 carController（来自 IController 的具体类）

```
public class carController : IController
{
    private IModel objLocalModel;
    private IView objLocalView;

    //constructor
    public carController(IModel objModel, IView objView)
    {
        objLocalView = objView;
        objLocalModel = objModel;
        objLocalModel.setView(objView);
    }

    public void requestIncreaseSpeed()
    {
        int modifiedSpeed = objLocalModel.increaseSpeed();
        checkSpeedLimit(modifiedSpeed);
    }

    public void requestDecreaseSpeed()
    {
        int modifiedSpeed = objLocalModel.decreaseSpeed();
        checkSpeedLimit(modifiedSpeed);
    }

    public void checkSpeedLimit(int modifiedSpeed)
    {
        if (modifiedSpeed > 100)
        {
            objLocalView.disableIncreaseSpeed();
        }
        else
        {
            objLocalView.enableIncreaseSpeed();
        }
    }

} 
```

## 界面 IView

```
public interface IView
{
    void enableIncreaseSpeed();
    void disableIncreaseSpeed();

    void updateStatus(IModel objModel);
} 
```

## form1.cs（用户将看到的视图类）

```
public partial class Form1 : Form, IView
{
    private IModel objModel;
    private IController objController;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        objModel = new carModel(95);
        objController = new carController(objModel, this);

        updateStatus(objModel);
    }

    public void enableIncreaseSpeed()
    {
        btnIncrease.Enabled = true;
    }

    public void disableIncreaseSpeed()
    {
        btnIncrease.Enabled = false;
    }

    public void updateStatus(IModel objModel)
    {
        lblCurrentSpeed.Text = "";
        lblCurrentSpeed.Text = objModel.getCurrentSpeed().ToString();
    }

    private void btnIncrease_Click(object sender, EventArgs e)
    {
        objController.requestIncreaseSpeed();
    }

    private void btnDecrease_Click(object sender, EventArgs e)
    {
        objController.requestDecreaseSpeed();
    }
} 
```

我不确定这是否是正确的 MVC 设计？因为我看不出与常规 3 层架构有太大区别（除了模型和视图在这里通信，这在 3 层架构中不会发生）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:56:05.430

由于您正在尝试实现经典 MVC，因此信息流是正确的。

唯一看起来有点不对劲的是“模型”。您假设模型是一个类。嗯……不是。模型应该是一个包含所有领域业务逻辑的层。

# android - 将 Int 值转换为角度

> ID：11733657
> 
> 赞同：0
> 
> 时间：2012-07-31T05:28:32.750
> 
> 标签：android, int, angle, data-conversion

![ ](../Images/2789c49c365f1069796c97ddfc242074.png)我们如何将 Int 值转换为角度。

```
 int speed = remoteService.getSpeed(); 
```

我从远程服务获取速度值，我想将其转换为角度。

我怎样才能做到这一点？任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:46:07.970

public void getGenginePos(int state,float force, double AOD){ double AODrad=(AOD*0.017444);

```
 switch(state){
       case BOAT_IDLE:
                //System.out.println("Before Vx = " + vx + ", vy = " + vy + ", f = " + force + ", AOD = " + AOD);
                vx = (float)(force * Math.cos(AODrad));
                px = px + (vx * dt);
                vy = (float) (force * Math.sin(AODrad));
                //System.out.println("After Vx = " + vx + ", vy = " + vy);

                py = py - (vy * dt);

                break;
        case BOAT_ACCEL:
                temp = force *dt;
                vx = (float) (force * Math.cos(AODrad) + temp);//(force * dt));
                vy = (float) (force * Math.sin(AODrad) + temp);//(force * dt));
                px = px + (vx * dt);
                py = py - (vy * dt);
                break;
        case BOAT_DECEL:
                temp = force *dt;
                vx = (float) (force * Math.cos(AODrad) - temp);//(force * dt));
                vy = (float) (force * Math.sin(AODrad) - temp);//(force * dt));
                px = px + (vx * dt);
                py = py - (vy * dt);
                break;
       default: break;

   }
}

public void setMeterPos(int rpx,int rpy,int epx,int epy){
   RefX= rpx;
   RefY= rpy;

   EndX = epx;
   EndY = epy;

   screenwidth=BoatRider.screenWidth;
   screenheight=BoatRider.screenHeight;
}

public void setArrowEndX(int x){
    EndX = x;
}
public void setArrowEndY(int y){
    EndY = y;
}
public float getArrowEndX(){
    return EndX;
}

public float getArrowEndY(){
    return EndY;
}

public void getGMeterArrowPos(double AOD,float radius){
    double AODrad=(AOD*0.017444);
    vx=(float)(radius*Math.cos(AODrad));
    vy=(float)(radius*Math.sin(AODrad));

    float height=screenheight-RefY;

    EndX = vx+RefX;
    EndY=screenheight-(vy+height);

}

public float getBorderEndX(){
   return EndX;
}
public float getBorderEndY(){
    return EndY;
}
public void getGBoatBorderPos(double AOD,float radius,float boderRefX,float boderRefY){
    double AODrad=(AOD*0.017444);
    vx=(float)(radius*Math.cos(AODrad));
    vy=(float)(radius*Math.sin(AODrad));

    float height=screenheight-boderRefY;

    EndX = vx+boderRefX;
    EndY=screenheight-(vy+height);

} 
```

} 这将非常有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:49:09.870

```
int speed = 90;
double degrees = speed ;
double angle = degrees * 2 * Math.PI / 360.0; 
```

或者你可以使用

```
int speed = 30;
 double degrees = speed;
 double toDegree = Math.toDegrees(radians); 
```

# java - 获取屏幕上颜色的位置

> ID：11733658
> 
> 赞同：1
> 
> 时间：2012-07-31T05:28:49.657
> 
> 标签：java

在java中，有什么方法可以在屏幕上找到颜色的位置？所以如果我知道颜色是什么，我会得到它的当前位置？

我可以使用机器人类来获得特定的颜色，但我需要能够在屏幕上找到它所在的颜色。

如果这不能用机器人或其他类完成，如果有人可以通过告诉我我需要做什么来指出我正确的方向，我会很高兴。谢谢

如果是这样，任何人都可以帮助我使用什么 api 或如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:52:07.583

*   [http://www.dreamincode.net/forums/topic/234896-faster-screen-capture/](http://www.dreamincode.net/forums/topic/234896-faster-screen-capture/)
*   [如何在 Java 中快速截取屏幕截图？](https://stackoverflow.com/questions/2912007/java-how-to-take-a-screenshot-fast)

真正的问题是，我为什么要为你看这个：P

# java - 如何从另一个程序启动 Jar 文件？

> ID：11733662
> 
> 赞同：1
> 
> 时间：2012-07-31T05:29:05.980
> 
> 标签：java, login, jar, executable-jar

我正在制作的游戏有问题，问题是我希望它能够在不去网站下载新版本的情况下进行更新，并且您需要登录（大约需要 3 美元）才能玩。问题是我希望 jar 不能运行，除非你通过游戏启动器运行它。我想要它，以便它检查更新并使用登录会话。

我还希望能够在构建游戏时调试游戏，然后设置 jar，这样如果不启动启动器并登录然后单击按钮启动它就无法运行它，但我不知道你是如何做到的游戏 jar 只能从启动器启动，并且启动器将登录会话发送到 jar 以便它知道用户名并且知道游戏没有被盗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T05:34:44.273

一种快速简便的方法（但可能不是最好的方法）：

您可以简单地将会话数据保存在数据库或加密文件中。当启动器退出时，它还应该从数据库中销毁会话

运行 jar 文件时，它将从数据库中读取，如果在其中找不到活动会话，则中止。

您还可以防止 jar 从程序外部运行（即使启动器已经在后台运行），方法是使其接收某种必须满足某些条件的随机加密密钥（也可以在此处使用数据库）。然后，用户必须知道能够手动启动它的密钥

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:42:04.723

您可以使用 ProcessBuilder 并启动一个新的 JVM。

可能是这样的：

```
ProcessBuilder pb = new ProcessBuilder("/path/to/java", "-jar", "your.jar");
pb.directory(new File("preferred/working/directory"));
Process p = pb.start(); 
```

希望能帮助到你

# jquery - 我将如何对 jQuery 和 CSS 应用某种动态范围计数器？

> ID：11733664
> 
> 赞同：0
> 
> 时间：2012-07-31T05:29:37.977
> 
> 标签：jquery, css, xhtml

我在这里试图实现的要点是有一个文章列表，其中标题是可点击的，并且可以通过 jQuery 扩展和 div 类。就目前而言，它的工作原理是同时将这种效果应用于所有事物，但这显然是不希望的。

这是jQuery：

```
$(function() {
  $("a.expand").click(function(event) {
    event.preventDefault();
    $(".remainder").slideToggle("fast");
  });
}); 
```

CSS：

```
a.expand {}

.remainder {
  display: none;
} 
```

XHTML：

```
<ul class="shows">
  <li class="show">
    <div class="showInfo alignLeft">
      <h3><a href="" class="expand">Some Band @ Some Venue</a></h3>
    </div>
    <div class="showDate alignRight"><h3>00/00/0000</h3></div>
    <div class="clear"></div>
    <div id="1" class="remainder">
      w/ Some Other Band. Cover is $ and doors are at 00:00.
    </div>
  </li>
</ul> 
```

任何帮助都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:33:51.183

如果您的意思是您有多组这些并且`$(".remainder").slideToggle("fast");`正在影响所有这些，那么您需要将其更改为

`$(this).parents('.show').children('.remainder').slideToggle("fast");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:40:11.730

做你所追求的最好的方法是只定位被点击的锚点。为此，您可以使用`$(this)`.

这是 jQuery 的样子：

```
var $expand = $('.expand');

$expand.on('click', function(e) { 
    e.preventDefault(); 
    $(this).closest('.show').find('.remainder').slideToggle('fast'); 
}); 
```

我缓存了`$('.expand')`选择器以提高性能。

下面是一个例子： http: [//jsfiddle.net/joshnh/8RwJN/](http://jsfiddle.net/joshnh/8RwJN/) ​</p>

# azure - 通过服务管理 API 负载平衡虚拟机 - MS Azure

> ID：11733665
> 
> 赞同：0
> 
> 时间：2012-07-31T05:29:40.493
> 
> 标签：azure, azure-virtual-machine

我找到了以下文章来创建虚拟机并使用现有虚拟机进行负载平衡。

[https://www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/?_sm_au_=iVVNR02FVsMFjVB3](https://www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/?_sm_au_=iVVNR02FVsMFjVB3)

但是如何通过服务管理 API 完成相同的操作。

我在创建 VM 的 POST 请求中找到的相关标签是，

LoadBalancedEndpointSetName、LoadBalancerProbe

我从哪里开始？如何通过 API 连接两个虚拟机？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:53:45.597

以下内容来自 Michael Washam 在 Virtual Machines 上的一篇[文章](http://michaelwasham.com/2012/06/08/understanding-windows-azure-virtual-machines/)，但是 Windows Azure 服务管理 REST API 的想法是相同的：

> 负载平衡集只是在多个 VM 上配置相同的端点，并设置另一个名为“LoadBalancedEndpointSetName”（或 PowerShell 中的 LBSetName）的属性，以将端点组合在一起。此功能在 Windows Azure 管理门户中被抽象出来，但最好详细介绍，因为从命令行您可以通过使用自定义运行状况探测对负载平衡器进行更多控制。

正如 Michael Washam 指出的，您只需为两个虚拟机使用相同的端点，并为[创建虚拟机部署](http://msdn.microsoft.com/en-us/library/windowsazure/jj157194)操作提供相同的 LoadBalancedEndpointSetName。

# android - TabPage 更改时重新加载片段

> ID：11733667
> 
> 赞同：0
> 
> 时间：2012-07-31T05:29:51.547
> 
> 标签：android, android-fragments

我尝试[了 Jake Wharton 的 ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator/)示例。我的应用程序是这样的：

Activity1 开始时像：

```
|------------------------
|Page1  Page2  Page3  Pa|
|-------_____-----------|
|                       |
|                       |
|     fragment 2        |
|                       |
|                       | 
```

这里选择了 Page2。标签页标题已从表格行动态加载。示例我启动 Acitivity2 为 Acitivity1 添加更多标签页。但是我这里有问题。标签页标题加载正常，片段未正确加载。这像：

```
|------------------------
|Page0  Page1  Page2  Pa|
|_____------------------|
|                       |
|                       |
|     fragment 1        |
|                       |
|                       | 
```

我尝试了 mAdapter.notifyDataSetChanged() 但没有得到预期的结果。如何解决我的问题？Extractly, it not fetch data correct on fragment when select tabpage. 示例：选择标签Page0，所有数据必须是fragment0，这里是fragment1。

这是我的代码

```
public class WeatherActivity extends FragmentActivity {

    Cursor cursor, cursor2,cursorMyLocation;
    SQLiteDatabase dh;
    LocationsCustomCursorAdapter myCursorAdapter;
    static int hasMyLocation;

    String strLocation;
    ArrayList<String> arrayLocations;
    static ArrayList<String> arrayLocationReq;      

    LocationsTabsFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;
    TabPageIndicator mTabPage;

    static String[] CONTENT;
    static String[] CONTENT2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        AndroidContext.setContext(this);
        dh=DatabaseHelper.getInstance().getDb();
        getLocation();

        setContentView(R.layout.activity_weather);

        mAdapter = new MyLocationsTabsAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.viewPager);
        mPager.setAdapter(mAdapter);

        mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);   
    }

    class MyLocationsTabsAdapter extends LocationsTabsFragmentAdapter {
        public MyLocationsTabsAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return LocationsTabsFragment.newInstance(WeatherActivity.CONTENT2[position % WeatherActivity.CONTENT2.length]);
        }

        @Override
        public int getCount() {
            return WeatherActivity.CONTENT.length;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return WeatherActivity.CONTENT[position % WeatherActivity.CONTENT.length];
        }

    }

    // NOTE: String[] CONTENT,CONTENT2 = getLocation();
    public void getLocation (){
        ...
    }

    // Method mAdapter.notifyDataSetChanged() not working. 
    // Only mIndicator.notifyDataSetChanged() work fine.

    @Override
    protected void onActivityResult(int arg0, int arg1, Intent arg2) {
        // TODO Auto-generated method stub

        super.onActivityResult(arg0, arg1, arg2);

        if(arg0==2){
            getLocation();
            mIndicator.notifyDataSetChanged();
            mAdapter.notifyDataSetChanged();

        }
    }  
} 
```

和：

```
public class LocationsTabsFragment extends Fragment {

    private String mContent = "";

    private static final String KEY_CONTENT = "LocationsTabsFragment:Content";

    public static LocationsTabsFragment newInstance(String location) {

        LocationsTabsFragment fragment = new LocationsTabsFragment();
        StringBuilder builder = new StringBuilder();
        builder.append(location);
        fragment.mContent = builder.toString();
        return fragment;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_CONTENT)) {
            mContent = savedInstanceState.getString(KEY_CONTENT);
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        new GetWeather().execute();
        v = inflater.inflate(R.layout.weather, container, false);

        return v;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString(KEY_CONTENT, mContent);
    }

    // working with server and fetch data on fragment.
    public class GetWeather extends AsyncTask<Void, Boolean, Weather>{
    }

} 
```

# android - 如何在android的另一个视图上绘制矩形画布？

> ID：11733671
> 
> 赞同：2
> 
> 时间：2012-07-31T05:30:05.013
> 
> 标签：android, canvas, ontouchlistener

嗨，我是 android 的新手，也是 Stackoverflow 的新手。我想创建简单的裁剪应用程序，所以我使用图像视图并在 this.when 我触摸它时应用 on touch 监听器。我画的简单又小默认`rect`。之后，当我在屏幕上拖动光标时，我想增加`rect`运行时的大小。所以在方法上应用属性数组。`onDraw`但我做不到。我的代码如下。

我的绘图视图类

```
public class DrawView extends View 
{   

Paint paint ;

Canvas myCanvas;

float []atr;

public DrawView(Context context) 
{
    super(context);

}

public DrawView(Context context, float [] atr) 
{
      super(context);
      this.atr=atr;
}
@Override
protected void onDraw(Canvas canvas) 
{
    Paint paint = new Paint();
    paint.setStyle(Paint.Style.STROKE);     
    paint.setColor(Color.BLUE);     
    canvas.drawRect(atr[0], atr[1], atr[2],atr[3], paint);
    //System.err.println("After Call on Draw Method");      
}
} 
```

我在这个类中使用我的父类。

```
enter code hereContext myContext;
RelativeLayout relMainLayout,relHeaderLayout,relBelowLayout;    

DrawView drawView;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    myContext=DrawRectActivity.this;

    LayoutInflater layoutInflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);   

    int layoutId = myContext.getResources().getIdentifier("main","layout",getPackageName());

    relMainLayout = (RelativeLayout) layoutInflater.inflate(layoutId,null);

    relHeaderLayout=(RelativeLayout) relMainLayout.findViewById(R.id.relHeaderLayout);

    relBelowLayout=(RelativeLayout) relMainLayout.findViewById(R.id.relBelowLayout);

    /*int[] atr={10,10,00,00};
    drawView=new DrawView(myContext,atr);
    drawView.bringToFront();
    drawView.setBackgroundColor(Color.YELLOW);
    RelativeLayout.LayoutParams drawParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,200);
    drawParams.addRule(RelativeLayout.BELOW, relHeaderLayout.getId());      
    relMainLayout.addView(drawView, drawParams);    */

    setContentView(relMainLayout);
   //drawView.setOnTouchListener(this);
    //relMainLayout.setOnTouchListener(this);
}

public boolean onTouch(View v, MotionEvent event) 
{
    float x,y;
    float incx=5,incy=5;
    x=event.getX();
    y=event.getY();     

    switch (event.getActionMasked()) 
    {       
    case  MotionEvent.ACTION_DOWN:

        System.err.println("X-->"+x);

        System.err.println("Y-->"+y);

        float[] atr={x,y,x+incx,y+incy};
        drawView=new DrawView(myContext,atr);
        drawView.bringToFront();
        //drawView.setBackgroundColor(Color.YELLOW);
        RelativeLayout.LayoutParams drawParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,200);
        drawParams.addRule(RelativeLayout.BELOW, relHeaderLayout.getId());      
        relMainLayout.addView(drawView, drawParams);
        break;

    case MotionEvent.ACTION_MOVE:
        float x1=event.getX();
        float y1=event.getY();
        incx=x1+incx;
        incy=y1+incy;
        float[] at1={x,y,incx,incy};
        drawView=new DrawView(myContext,at1);
        drawView.bringToFront();            
        break;

    case MotionEvent.ACTION_UP:

        System.err.println("Up X-->"+x);
        System.err.println("Up y-->"+y);

        System.err.println("Up X-->"+incx);
        System.err.println("Up y-->"+incy);

        break;

    default:

        break;
    }

    /*int[] atr={100,100,00,00};        
    DrawView drawView2=new DrawView(myContext, atr);
    Bitmap myCanvasBitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
    Canvas myCanvas = new Canvas();
    myCanvas.setBitmap(myCanvasBitmap); 
    //canvas.setDensity(BIND_AUTO_CREATE);      
    drawView2.draw(myCanvas);       */  
    return false;
} 
```

并在此使用触摸事件。

# php - 通过 HTTPS 提供图像的数据字符串，而在 HTTP 上提供 URL

> ID：11733679
> 
> 赞同：2
> 
> 时间：2012-07-31T05:30:29.010
> 
> 标签：php, html, image

我正在尝试读取图像文件，作为 base64 编码字符串，并在连接使用 HTTPS/SSL 时输出数据字符串，否则如果仅在 HTTP 上，则将 URL 放在 IMG src 属性中。这是我当前的代码，但是它不起作用。

```
<?php 
function base64_encode_image($filename, $filetype) {
    if (($_SERVER["HTTPS"] == "on") && $filename) {
        $file = "/home/content/61/9295861/html/resource/image$filename";
        $imgbinary = fread(fopen($file, "r"), filesize($file));
        return "data:image/$filetype;base64," . base64_encode($imgbinary);
    } else {
        return $filename;
    }
}
?>
<img src="<?php echo base64_encode_image('/resource/image/logo-96x72.png', 'png'); ?>" width="96" height="72" /> 
```

它输出：

```
<img src="<br />
<b>Warning</b>:  fopen(/home/content/61/9295861/html/resource/image/resource/image/logo-96x72.png) [<a href='function.fopen'>function.fopen</a>]: failed to open stream: No such file or directory in <b>/home/content/61/9295861/html/theme/latest/index.php</b> on line <b>5</b><br />
<br />
<b>Warning</b>:  filesize() [<a href='function.filesize'>function.filesize</a>]: stat failed for /home/content/61/9295861/html/resource/image/resource/image/logo-96x72.png in <b>/home/content/61/9295861/html/theme/latest/index.php</b> on line <b>5</b><br />
<br />
<b>Warning</b>:  fread() expects parameter 1 to be resource, boolean given in <b>/home/content/61/9295861/html/theme/latest/index.php</b> on line <b>5</b><br />
data:image/png;base64," width="96" height="72" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:59:21.507

您已将**/image/resource**目录添加到您的 URL 两次，这导致了**file not found 错误**。

```
$file = "/home/content/61/9295861/html/resource/image$filename";
$filename = "/resource/image/logo-96x72.png" 
```

所以你的文件网址是`/home/content/61/9295861/html/resource/image/resource/image/logo-96x72.png`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:50:32.463

改变

```
<img src="<?php echo base64_encode_image('/resource/image/logo-96x72.png', 'png'); ?>" width="96" height="72" /> 
```

到

```
<img src="<?php echo base64_encode_image('logo-96x72.png', 'png'); ?>" width="96" height="72" /> 
```

# java - Apache ActiveMQ 回退机制

> ID：11733681
> 
> 赞同：1
> 
> 时间：2012-07-31T05:30:33.613
> 
> 标签：java, spring, activemq

我正在使用带有 Spring 的 Apache Active MQ ......我面临的问题是我正在一台机器上创建生产者，比如说 Machine1，我正在第二台机器上创建一个消费者，比如说 Machine2 ......我正在创建生产者Machine1 通过调用一个简单的 servlet 调用......然后在 Machine2 上创建一个消费者......我面临的问题是，无论如何假设如果我的生产者无法在指定的时间内发送任何数据包，那么我想从 Machine2 中删除我的消费者和队列...无论如何我可以设置我的消费者和队列以自动删除并执行一些业务逻辑，如果我在指定的时间段内没有从生产者那里收到任何数据包...。

```
connectionFactory = new ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_USER,ActiveMQConnection.DEFAULT_PASSWORD,ConnectorURL);
connection = connectionFactory.createConnection();
connection.start();
session = connection.createSession(transacted, Session.AUTO_ACKNOWLEDGE);
destination = session.createQueue(queueID+"");
connection = connectionFactory.createConnection();
connection.start();
consumer = session.createConsumer(destination); 
```

基本上这段代码为我的应用程序创建消费者......然后我将此消费者分配给我的应用程序侦听器，如果生产者向消费者发送任何消息......

```
ScenarioExecutionQueueListenerImpl executionQueueListener = new ScenarioExecutionQueueListenerImpl(scenario,result, host);
beanFactory.autowireBean(executionQueueListener);
connection.setExceptionListener(executionQueueListener);
Message message = consumer.receive();
consumer.setMessageListener(executionQueueListener);
executionQueueListener.setConsumer(consumer);
executionQueueListener.onMessage(message); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:09:51.520

我不会为这种情况设置消息监听器，而只是使用 consumer.receive() 方法。MessageListener 更适合时间独立/异步消耗。

```
public void run(){
  Message m = consumer.receive(timeout_value_in_millisec);
  if( m != null ){
     // got a message, handle it.
     processMessage(msg);
  }else{
     // no message received in specified time, 
  }
  // close session, connection etc.
}

public void processMessage(Message msg){

} 
```

# iphone - iPhone原生ipod应用程序中存储的音频文件的访问路径

> ID：11733683
> 
> 赞同：2
> 
> 时间：2012-07-31T05:30:37.663
> 
> 标签：iphone, objective-c, ios5

我已经构建了一个 iPhone 应用程序，我想将存储在用户 iPhone 中的视频、图像和音频上传到服务器。我已经成功地为存储在照片库中的视频和图像做到了这一点。代码如下：

```
 imageData = UIImageJPEGRepresentation(image.image, 90);

      NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];

       if (image_selected)  {
                stringForImagePathToUpload = [[NSString alloc]initWithFormat:@"..."];
                [request setURL:[NSURL URLWithString:stringForImagePathToUpload]];
            }else if (video_selected){
                stringForVideoPathToUpload = [[NSString alloc]initWithFormat:@"..."];
                [request setURL:[NSURL URLWithString:stringForVideoPathToUpload]];
            }

        [request setHTTPMethod:@"POST"];

        NSString *boundary = [NSString stringWithString:@"*****"]; 

        NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];

        [request addValue:contentType forHTTPHeaderField: @"Content-Type"];  

        NSMutableData *body = [NSMutableData data];       

        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        if (image_selected) {
                [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"uploadedfile\";filename=\"%@"".jpg""\r\n\r\n", imageTitle.text] dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[NSData dataWithData:imageData]];
        }else if (video_selected){

            NSFileHandle *file = [NSFileHandle fileHandleForReadingFromURL:videoURL error:nil];
            NSData *data = [file readDataToEndOfFile];
            [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"uploadedfile\";filename=\"%@"".m4v""\r\n\r\n", imageTitle.text] dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[NSData dataWithData:data]];
        }

    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    /* setting the body of the post to the reqeust */

    [request setHTTPBody:body];

    /* setting up the connection to the web*/
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    NSString *returnString = [[[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]autorelease];

    NSLog(@"Content uploaded %@", returnString); 
```

现在，我发现音频文件存储在 iPhone 的 ipod 应用程序中。我想知道我是否可以像访问照片库中的图像和视频一样访问此音频的路径。如果可以访问音频文件，请帮助我了解如何访问它们。

# ruby-on-rails - 如何动态构建树形结构

> ID：11733685
> 
> 赞同：0
> 
> 时间：2012-07-31T05:30:59.457
> 
> 标签：ruby-on-rails

# 在我看来，我得到了所有页面

我得到了我所有的页面以及所有的孩子和子孩子。如何得到树形结构如下图：

```
<% for page in @pages%>
<li id="<%= page.id%>_page">    
    <div class="link">    
        #my attributes for the div<
      /div>    
#here I got the all siblings of that page. But here the structure is of just two      
#levels. I need upto n-levels.    
<% @childs = page.*descendants* %>    
<% if !@childs.nil? && !@childs.empty? %>
    <% for child in @childs%>     
    <ol class="child">
        <li id="<%= child.id%>_page">
            <div class="link">
                #my attributes for the div
            </div>
            </li>
    </ol>
    <%end%>
    <%end%>
</li>
<%end%> 
```

# 我正在使用嵌套集并希望以这种方式构建结构：

```
page1
     page 2
     page 3
           page 3.1
                   page 3.2
                           page3.4
                                   ...so on to last child
page 4
page 5
....so on to N-levels... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:53:23.557

您正在尝试在视图中创建递归，这不仅复杂而且会使您的视图代码混乱很多。一种干净的方法是定义一个递归生成输出的辅助函数。

我没有任何具体的例子，但你可以在[这个类似问题的答案之一中检查一个](https://stackoverflow.com/questions/6074607/why-does-my-recursive-method-from-helper-not-return-every-value)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:50:28.330

尝试后..我得到了解决方案...我渲染了部分，而后者又渲染了自己..例如_show_children.html.erb ..

```
 <% for page in @pages%>
    <li id="<%= page.id%>_page">    
        <div class="link">    
            #my attributes for the div<
          /div>    
    #here I got the all siblings of that page. But here the structure is of just two      
    #levels. I need upto n-levels.    
    <% @childs = page.descendants %>    
    <% if !@childs.nil? && !@childs.empty? %>
        <% for child in @childs%>     
         <%= render :partial => "show_children", :locals  => {:children => child`enter code here`.children  }%>
        <%end%>
        <%end%>
    </li>
<%end%>

.this partial will inturn render itself` 
```

# ios - 如何通过单击 barbuttonitem 获得新视图？

> ID：11733693
> 
> 赞同：0
> 
> 时间：2012-07-31T05:31:35.667
> 
> 标签：ios, uibarbuttonitem

我在工具栏覆盖层上以编程方式制作了一个 barbuttonitem。当我的相机被访问时，所有这些都会出现。按钮功能正常，选择器完全能够调用它。

这是 .m 中的叠加层，看看 doneButton 选择器。

```
- (UIView*)CommomOverlay  {
//Both of the 428 values stretch the overlay bottom to top for overlay function. It
doesn't cover it. 
UIView* view = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,420)];
UIImageView *FrameImg = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,420)];

[FrameImg setImage:[UIImage imageNamed:@"newGraphicOverlay.png"]];
FrameImg.userInteractionEnabled = YES;

UIToolbar *myToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 428, 320, 50)];

UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]
initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self
action:@selector(doneButtonPressed)];

[myToolBar setItems:[NSArray arrayWithObjects: cancelButton, flexiSpace2, flexiSpace,
doneButton, nil] animated:YES];

[view addSubview:FrameImg];
[view addSubview:myToolBar];
return view;

} 
```

这是我用于 void 函数的方法。

```
//NewViewController is the nib I want to bring up when done is clicked.
-(void)doneButtonPressed {

NewViewController *UIView = [[NewViewController alloc] initWithNibName:nil bundle:nil];
UIView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:UIView animated:NO];
[UIView release];
NSLog(@"Acknowledged!");
} 
```

正在调用该按钮，但没有任何反应。如您所见，我添加了一个 NSLog 函数来查看它是否被调用。单击按钮时，日志中会显示“已确认”，因此选择器没有问题。当我使用按钮时，应用程序也不会崩溃，如果我做了一些严重错误的编码（实际上我什至没有收到任何警告），应该会发生这种情况，就 Xcode 的考虑而言，一切都很好，不用说不是。

我还将 NewViewController 的 .h 文件正确放置在正在实现此代码的视图控制器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:15:04.277

`UIView`是一个类的名称。不要将其用作变量的名称。充其量这是非常令人困惑的，并且可能是您遇到问题的原因。重命名`UIView`为.`myView``doneButtonPressed`

# ruby-on-rails - 是否可以使用少这样的寻呼机运行 Rails 控制台？

> ID：11733698
> 
> 赞同：1
> 
> 时间：2012-07-31T05:31:56.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-console

我正在使用[awesome_print](https://github.com/michaeldv/awesome_print/)来美化要打印的对象。但是当我将它用于许多对象时，我无法看到所有对象，因为它们太多而无法在终端滚动中显示。我想`less`在 rails 控制台中使用寻呼机。有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:42:41.477

Hirb gem 解决了这个问题

```
gem install hirb 
```

用法示例：

```
irb -rhirb
> Hirb.enable
> (1..1000).to_a 
```

在控制台内启用后，打印大数据时，它会自动通过管道传输`less`

它还具有菜单创建功能，在这些情况下可能对您有用。更多信息[在这里](http://tagaholic.me/2009/06/19/page-irb-output-and-improve-ri-with-hirb.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:10:24.833

试一试。[_](http://pryrepl.org/) 它还有许多其他特性可以让你的 Ruby/Rails 编程更有趣。

# ios - 在单元格中创建和调整 UIButton

> ID：11733699
> 
> 赞同：0
> 
> 时间：2012-07-31T05:32:02.953
> 
> 标签：ios, uitableview, uibutton

我想在表格的最后一行下面创建一个按钮（不是动态的）。所有的行和部分都是固定的。我是否必须创建另一个部分和行才能添加一个按钮？如果是的话，我怎样才能将按钮调整到单元格的相同宽度和曲率？

这就是我所做的。我为按钮创建了一个特定的部分，并为它创建了一行。

```
}else if(indexPath.section ==2)
    {
        UIButton *cellButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [cellButton setFrame:CGRectMake(0.0f, 5.0f, cell.frame.size.width, 44.0f)]; // not filling the round parts of the cell
        [cellButton setBackgroundColor: [UIColor yellowColor]];
        [cellButton setTitle:@"test" forState:UIControlStateNormal];
        [cell.contentView addSubview:cellButton];
    }

    return cell; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:35:10.990

你没有。将您的按钮设置为表格视图的表格页脚视图。

```
tableView.tableFooterView = myButton; 
```

# facebook - 如何使用 Graph API 在我的墙上分享朋友的帖子？

> ID：11733704
> 
> 赞同：0
> 
> 时间：2012-07-31T05:32:21.207
> 
> 标签：facebook, facebook-graph-api

如何在我的墙上分享朋友的帖子？我不想复制原始帖子的文字并创建新帖子，因为我需要我的朋友看到​​我分享了他的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:27:37.153

Facebook Graph API 不提供任何分享帖子的功能。但是，您可以执行“评论”或“喜欢”。

# javascript - 仅当用户在 jquery UI 自动完成中暂停时触发 ajax 请求

> ID：11733706
> 
> 赞同：3
> 
> 时间：2012-07-31T05:32:28.867
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我有一个 jQuery UI 自动完成表单，它从远程源获取数据，但是当连接速度很慢时它会变得不稳定（排队请求，并弄乱结果）。我们如何保持请求不被触发，直到用户暂停。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T12:55:22.140

我认为该`delay`选项应该适合您：

> **自动完成在击键后等待激活自身的延迟（以毫秒为单位）**。零延迟对本地数据有意义（响应速度更快），但会为远程数据产生大量负载，同时响应速度较慢。

默认情况下，它是 300 (ms)，但您应该增加它以满足您的需要。

```
$("#my-input").autocomplete({
    /* options */,
    delay: 750
}); 
```

例如，比较以下两个示例：

*   使用默认值（300 毫秒）：http: [//jsfiddle.net/q4Xkd/](http://jsfiddle.net/q4Xkd/)
*   使用 750 毫秒：http: [//jsfiddle.net/x3EkS/](http://jsfiddle.net/x3EkS/)

# mysql - Mysql多左连接

> ID：11733710
> 
> 赞同：8
> 
> 时间：2012-07-31T05:32:57.733
> 
> 标签：mysql

我们有一张表说我们离开了表 A 与表 B 连接。这很好用。这里的问题是，基于表 A 和 B 的左连接，我们希望在表 B 和表 C 之间有另一个左连接，因为这些字段仅在这 2 个表中可用，那么构建此查询的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T05:36:05.793

您可以很容易地链接连接：

```
SELECT ...
FROM a
LEFT JOIN b on a.somefield=b.somefield
LEFT JOIN c on b.otherfield=c.otherfield 
```

# actionscript-3 - 如何在闪光中产生泡沫或气体效果？

> ID：11733713
> 
> 赞同：0
> 
> 时间：2012-07-31T05:32:59.930
> 
> 标签：actionscript-3, flash

我正在尝试为柠檬汁和小苏打实验创建一个动画，我想知道如何创建一个起泡效果，如下图所示：

![实验](../Images/e41ebd16749b095c48f7d1ba9599e34e.png)

我的想法是在 Photoshop 中简单地绘制一个泡沫，然后使用补间动画来改变大小。我希望我能找到更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:44:56.847

我有一些类似的东西，您可能可以将其用作做自己事情的跳板。

[http://www.shaunhusain.com/SteamEffect/](http://www.shaunhusain.com/SteamEffect/)

[http://www.shaunhusain.com/SteamEffect/srcview/index.html](http://www.shaunhusain.com/SteamEffect/srcview/index.html)

目前我只是用它画一些圆圈，然后在它们上设置一个模糊（我知道效率不是很高，但它达到了目的，因为我不需要它来创建一个 bajillion 粒子仍然有效作为“蒸汽”这是预期的目标）。您可以换掉我用于您自己的绘图的形状/过滤器，并使用相同的基本结构。

**编辑**

也许这至少需要一点解释：

基本上，您需要查看 SteamCanvas.mxml 和 BitOfSteam.as 这两个文件。老实说，我不知道为什么我决定将 SteamCanvas 写成一个 mxml 文件。我选择使用 Canvas 作为基类，因此我可以将它作为容器包装在任何其他组件周围，并能够检测区域内任何地方的鼠标点击。如果这是在纯 Flash 环境中使用的，即不使用 Flex 库（或 mxmlc 编译器）的环境，则可以将其更改为从 Sprite 扩展并纯粹在 AS3 中编写，基本上只需将 creationComplete 代码移至构造函数. 它的工作原理是 SteamCanvas 是您想要放入其中的任何控件或组件的包装器（就像普通画布使用绝对定位一样，但如果需要，可以在其中嵌套定义布局的容器）。SteamCanvas 设置了一个计时器，如果在计时器滴答时鼠标按下，它会创建 BitOfSteam 实例并根据 SteamCanvas 自己当前设置的属性设置 Steam 的属性。在项目中，您还会看到一个 SteamEffectTest.mxml，它只是您看到正在运行的文件，上面有滑块来更改 SteamCanvas 的属性，我用这些来提出我认为很好的值逼真的蒸汽。如果我记得我明天会重新访问这个组件并尝试采纳 Marty 的建议来更新它。mxml 这只是您看到运行的文件，上面有滑块来更改 SteamCanvas 的属性，我用这些来提出我认为很好的值来制作一些逼真的蒸汽。如果我记得我明天会重新访问这个组件并尝试采纳 Marty 的建议来更新它。mxml 这只是您看到运行的文件，上面有滑块来更改 SteamCanvas 的属性，我用这些来提出我认为很好的值来制作一些逼真的蒸汽。如果我记得我明天会重新访问这个组件并尝试采纳 Marty 的建议来更新它。

# matlab - 在matlab中创建二维线性列表

> ID：11733725
> 
> 赞同：0
> 
> 时间：2012-07-31T05:33:48.933
> 
> 标签：matlab

非常简单的问题，我在网上找不到，所以我想我会在这里问：

您可以像这样制作一维线性阵列：

```
1:10 = 1 2 3 4 5 6 7 8 9 10
1:2:10 = 1 3 5 7 9 
```

如何轻松初始化二维数组，即。

```
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4 
```

也是同样的事情，但对于列：

```
1 1 1 1
2 2 2 2
3 3 3 3
4 4 4 4 
```

应该是在一行中执行此操作的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:43:22.570

```
v = 1:5;
A = repmat(v, 4, 1);
B = repmat(v', 1, 4); 
```

`A`并且`B`会拥有你需要的东西。

另一种选择是使用 MATLAB 索引，如下所示：

```
v = 1:5;
A = v(ones(4, 1), :);
v = [1:5]';
B = v(:, ones(1, 4)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:50:09.593

或者，我了解到您可以使用网格网格：

```
meshgrid(1:4, 1:4) =>

 1     2     3     4
 1     2     3     4
 1     2     3     4
 1     2     3     4 
```

感谢您的帮助和支持。

# php - 检索具有偏移值的选定文本

> ID：11733730
> 
> 赞同：1
> 
> 时间：2012-07-31T05:34:01.727
> 
> 标签：php, javascript

我想注释文本并将注释文本存储在数据库中。我正在做的是将偏移值和选定文本存储在数据库中。是否有可能使用偏移值检索选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:59:41.470

可能值得研究[substring() *(php.net)*](http://php.net/manual/en/function.substr.php)。

页面上显示了一个用法示例

```
<?php
$rest = substr("abcdef", -1);    // returns "f"
$rest = substr("abcdef", -2);    // returns "ef"
$rest = substr("abcdef", -3, 1); // returns "d"
?> 
```

# assembly - x86汇编编程中如何表示FFFFFFBB等十六进制值？

> ID：11733731
> 
> 赞同：10
> 
> 时间：2012-07-31T05:34:03.110
> 
> 标签：assembly, x86, hex, inline-assembly

我正在学习 x86 内联汇编编程。

我想写`mov ecx, FFFFFFBB`，但是编译器无法识别它。像这样的十六进制数字应该如何写在内联汇编代码中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T07:20:39.877

这取决于您的汇编程序的风格。

*   美国电话电报公司：`movl $0xFFFFFFBB, %ecx`
*   英特尔：`mov ecx, 0FFFFFFBBh`

仅供参考，AT&T 语法被*GNU Assembler*等汇编程序使用，而*NASM*和大多数其他人使用英特尔的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-05-11T03:14:23.910

请参阅[x86](/questions/tagged/x86 "显示标记为“x86”的问题")标记 wiki 以获取汇编器手册和许多其他内容的链接。

* * *

不同的 x86 汇编器支持以下一种或两种十六进制常量语法：

*   `0xDEADBEEF`：[NASM](http://www.nasm.us/doc/nasmdoc3.html#section-3.4.1)（和兼容）、[GNU`as`](https://sourceware.org/binutils/docs/as/Integers.html)、[FASM](http://flatassembler.net/docs.php?article=manual#1.2.4)、MSVC 内联汇编（但*不是*MASM）、emu8086。
*   `0DEADBEEFh`：NASM（和兼容）、FASM、[MASM](https://courses.engr.illinois.edu/ece390/books/artofasm/CH08/CH08-1.html#HEADING1-160)、TASM、emu8086。

DOS/Windows-only 汇编器通常只支持`...h`语法。
可移植汇编器通常支持`0x...`语法，或两者​​兼而有之。

**注意前导`0`：数字常量总是必须以十进制数字开头，以将它们与符号名称区分开来。** （[我如何在 masm 代码中编写以字母开头的十六进制数字？](https://stackoverflow.com/questions/33276232/how-do-i-write-letter-initiated-hexadecimal-numbers-in-masm-code)专门针对此，用于尾随-h 样式。）

另请注意，汇编器（如 C 编译器）可以在汇编时评估表达式，因此您可以编写`foo & 0xF`（如果`foo`是汇编器常量，定义为`foo equ 0xABC`或其他内容）。您甚至可以从标签中加/减（它们是链接时常量，而不是汇编时），因此诸如`mov eax, OFFSET label - 20`仍然汇编为`mov r32, imm32`mov 立即数指令之类的东西，只是使用不同的 32 位立即数。

* * *

从[NASM 手册中关于常量的部分](http://www.nasm.us/doc/nasmdoc3.html#section-3.4.1)：

> 一些例子（都产生完全相同的代码）：
> 
> ```
>  mov     ax,200          ; decimal 
>     mov     ax,0200         ; still decimal 
>     mov     ax,0200d        ; explicitly decimal 
>     mov     ax,0d200        ; also decimal 
>     mov     ax,0c8h         ; hex 
>     mov     ax,$0c8         ; hex again: the 0 is required 
>     mov     ax,0xc8         ; hex yet again 
>     mov     ax,0hc8         ; still hex 
>     mov     ax,310q         ; octal 
>     mov     ax,310o         ; octal again 
>     mov     ax,0o310        ; octal yet again 
>     mov     ax,0q310        ; octal yet again 
>     mov     ax,11001000b    ; binary 
>     mov     ax,1100_1000b   ; same binary constant 
>     mov     ax,1100_1000y   ; same binary constant once more 
>     mov     ax,0b1100_1000  ; same binary constant yet again 
>     mov     ax,0y1100_1000  ; same binary constant yet again 
> ```

* * *

大多数汇编器还允许使用**字符文字**，例如`'0'`ASCII 零。甚至`'0123'`对于打包成 32 位整数的四个 ASCII 数字。有些支持转义序列（`\n'`），有些（如 YASM）不支持。NASM 仅支持反引号内的转义序列，不支持双引号。

* * *

其他平台：

[ARM汇编程序](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0473e/Chdhcdai.html)：`0xDEADBEEF`有效。

我认为 0x... 是典型的。0...h 主要是 DOS 的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T05:35:28.923

这取决于您的汇编程序，但十六进制文字的常见表示法是`0FFFFFFBBh`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T05:35:19.087

十六进制数字通常总是用前导表示`0x`，所以你会使用`0xFFFFFFBB`.

# php - 使用 preg_match php 获取包装元素

> ID：11733733
> 
> 赞同：1
> 
> 时间：2012-07-31T05:34:31.357
> 
> 标签：php, preg-match

我想要一个 preg_match 代码来检测给定的字符串并获取它的包装元素。我有一个字符串和一个 html 代码，例如：

```
$string = "My text";
$html = "<div><p class='text'>My text</p><span>My text</span></div>"; 
```

所以我需要创建一个函数，它将返回包装字符串的元素，如：

```
$element = get_wrapper($string, $html);

function get_wrapper($str, $code){
    //code here that has preg_match and return the wrapper element
} 
```

返回值将是数组，因为它有 2 个可能的返回值，它们是`<p class='text'></p>`和`<span></span>`

任何人都可以给我一个关于如何获取包装给定字符串的 HTML 元素的正则表达式模式？

谢谢！非常感谢答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:34:36.207

即使正则表达式**永远不是**dom 解析领域的正确答案，我还是提出了另一个（非常简单的）解决方案

```
<[^>/]+?>My String</.+?> 
```

如果 html 是好的（即它有结束标签，< 被替换为 < & 等等）。这样，您在第一个正则表达式组中有开始标记，在第二个组中有结束标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:05:13.063

对这个任务使用正则表达式是个坏主意。您可以使用 DOMDocument

```
$oDom = new DOMDocument('1.0', 'UTF-8');
$oDom->loadXML("<div>" . $sHtml ."</div>");
get_wrapper($s, $oDom); 
```

递归后做

```
function get_wrapper($s, $oDom) {
    foreach ($oDom->childNodes AS $oItem) {
        if($oItem->nodeValue == $s) {
            //needed tag - $oItem->nodeName
        }
        else {
            get_wrapper($s, $oItem);    
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:06:19.500

简单的模式如下，但它假设**了很多事情**。正则表达式不应该与这些一起使用。你应该看看像**[Simple HTML DOM parser](http://simplehtmldom.sourceforge.net/)**这样更智能的东西。

无论如何，匹配包装标签和周围 html 元素的正则表达式如下。

> ```
>  /[A-Za-z'= <]*>My text<[A-Za-z\/>]*/g 
> ```

# java - AlarmManager 从不调用 AlarmReceiver/BroadcastReceiver 中的 onReceive

> ID：11733736
> 
> 赞同：4
> 
> 时间：2012-07-31T05:34:38.237
> 
> 标签：java, android, broadcastreceiver, android-service, alarmmanager

我仍然无法触发我的 AlarmReceiver 类的 onReceive 方法。这个实现有什么问题吗？

这一切应该做的就是等待一段时间（最好是6天），然后弹出一个通知。（你能相信没有内置系统吗？crontab 任何人！？）

MyActivity 和 BootReceiver 都在必要的条件下设置了警报。AlarmService 会发出通知。并且 AlarmReceiver*应该*捕捉警报并启动 AlarmService，但它从未捕捉到该广播，无论我做什么都不会。

哦，我一直在测试我的 Droid X，2.3.4。针对 API 8 构建的项目。

PS 大部分内容改编自[http://android-in-practice.googlecode.com/svn/trunk/ch02/DealDroidWithService/](http://android-in-practice.googlecode.com/svn/trunk/ch02/DealDroidWithService/)

------------ MyActivity.java ------------

```
public class MyActivity extends Activity implements SensorEventListener {

    private void setupAlarm() {
        Log.i(TAG, "Setting up alarm...");
        AlarmManager alarmMgr = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 1, new Intent(context, AlarmReceiver.class), 0);

        // Get alarm trigger time from prefs
        Log.i(TAG, "Getting alarm trigger time from prefs...");
        SharedPreferences mPrefs2 = PreferenceManager.getDefaultSharedPreferences(context);
        long trigger = SocUtil.getLongFromPrefs(mPrefs2, AlarmConst.PREFS_TRIGGER);
        Log.i(TAG, "Trigger from prefs: " + trigger + " (" + new Date(trigger).toString() + ").");

        // If alarm trigger is not set
        if(trigger == new Long(-1).longValue()) {
            // Set it
            trigger = new Date().getTime() + NOTIFY_DELAY_MILLIS;
            SocUtil.saveLongToPrefs(mPrefs2, AlarmConst.PREFS_TRIGGER, trigger);
            Log.i(TAG, "Trigger changed to: " + trigger + " (" + new Date(trigger).toString() + ").");

            // And schedule the alarm
            alarmMgr.set(AlarmManager.RTC, trigger, pendingIntent);
            Log.i(TAG, "Alarm scheduled.");
        }
        // If it is already set
        else {
            // Nothing to schedule. BootReceiver takes care of rescheduling it after a reboot
        }
    }

} 
```

------------ AlarmService.java ------------

```
public class AlarmService extends IntentService {

   public AlarmService() {
      super("AlarmService");
   }

   @Override
   public void onHandleIntent(Intent intent) {
      Log.i(AlarmConst.TAG, "AlarmService invoked.");
      this.sendNotification(this);
   }

   private void sendNotification(Context context) {
      Log.i(AlarmConst.TAG, "Sending notification...");
      Intent notificationIntent = new Intent(context, Splash.class);
      PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

      NotificationManager notificationMgr = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
      Notification notification = new Notification(R.drawable.icon, "Test1", System.currentTimeMillis());
      notification.setLatestEventInfo(context, "Test2", "Test3", contentIntent);
      notificationMgr.notify(0, notification);
   }
} 
```

------------ AlarmReceiver.java ------------

```
public class AlarmReceiver extends BroadcastReceiver {

   // onReceive must be very quick and not block, so it just fires up a Service
   @Override
   public void onReceive(Context context, Intent intent) {
      Log.i(AlarmConst.TAG, "AlarmReceiver invoked, starting AlarmService in background.");
      context.startService(new Intent(context, AlarmService.class));
   }
} 
```

------------ BootReceiver.java ------------ （恢复已擦除的警报，因为我在操作系统中安排的内容不够重要，无法通过重启 -_-）

```
public class BootReceiver extends BroadcastReceiver {

   @Override
   public void onReceive(Context context, Intent intent) {
      Log.i(AlarmConst.TAG, "BootReceiver invoked, configuring AlarmManager...");

      Log.i(AlarmConst.TAG, "Setting up alarm...");
      AlarmManager alarmMgr = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
      PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 1, new Intent(context, AlarmReceiver.class), 0);

      // Get alarm trigger time from prefs
      Log.i(AlarmConst.TAG, "Getting alarm trigger time from prefs...");
      SharedPreferences mPrefs2 = PreferenceManager.getDefaultSharedPreferences(context);
      long trigger = SocUtil.getLongFromPrefs(mPrefs2, AlarmConst.PREFS_TRIGGER);
      Log.i(AlarmConst.TAG, "Trigger from prefs: " + trigger + " (" + new Date(trigger).toString() + ").");

      // If trigger exists in prefs
      if(trigger != new Long(-1).longValue()) {
          alarmMgr.set(AlarmManager.RTC, trigger, pendingIntent);
          Log.i(AlarmConst.TAG, "Alarm scheduled.");
      }
   }
} 
```

- - - - - - 显现 - - - - - -

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <activity
        android:name=".MyActivity"
        android:label="@string/app_name" >
    </activity>

<receiver android:name="com.domain.app.BootReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>

<receiver android:name="com.domain.app.AlarmReceiver"></receiver>

    <service android:name="com.domain.app.AlarmService"></service> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:57:24.993

这是我最近用来每小时发出一次通知的一些代码（这是在我的 MainActivity 中）：

```
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
Intent Notifyintent = new Intent(context, Notify.class);
PendingIntent Notifysender = PendingIntent.getBroadcast(this, 0, Notifyintent, PendingIntent.FLAG_UPDATE_CURRENT);
am.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 3600000, Notifysender); 
```

然后在 Notify.java

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
public class Notify extends BroadcastReceiver{

    @SuppressWarnings("deprecation")
    @Override
    public void onReceive(Context context, Intent intent) {
          NotificationManager myNotificationManager = (NotificationManager) context.getSystemService(context.NOTIFICATION_SERVICE);
          Notification notification = new Notification(R.drawable.ic_launcher, "Update Device", 0);
          Intent notificationIntent = new Intent(context, MainActivity.class);
          PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
          notification.setLatestEventInfo(context, "Device CheckIn", "Please run Device CheckIn", contentIntent);
          notification.flags |= Notification.FLAG_HIGH_PRIORITY;
          myNotificationManager.notify(0, notification);
    }
} 
```

然后最后在 AndroidManifest.xml 我在标签之间有这个：

```
<receiver android:name=".Notify" android:exported="true">
         <intent-filter>
                <action android:name="android.intent.action.NOTIFY" />
            </intent-filter>
</receiver> 
```

我有我知道在办公室工作的主要代码，当我遇到同样的问题时，请随时给我发电子邮件寻求更多帮助。

电子邮件： sbrichards at mit.edu

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:20:41.837

您必须使用意图操作注册您的 AlarmReceiver。如下所示。并且动作字符串必须与您通过 sendBroadcast() 方法广播的动作相同。

喜欢`sendBroadcast(new Intent(""com.intent.action.SOMEACTION.XYZ""));`

```
 <receiver android:name="com.domain.app.AlarmReceiver">

<intent-filter>
                <action android:name="com.intent.action.SOMEACTION.XYZ" />
            </intent-filter>
</receiver> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-02T02:16:57.457

我什至不使用`BroadcastReceiver`. 我读到的关于如何做通知警报的每一篇教程和帖子（那是很多）都说使用 a `BroadcastReceiver`，但显然我不明白什么，或者那是一堆废话。

现在我只是`AlarmManager`设置了一个警报，`Intent`它直接进入`Activity`我创建的新警报。重新启动后，我仍然使用`BootReceiver`来重置该警报。

这让通知可以在应用程序内、应用程序外、应用程序进程被终止以及重新启动后工作。

感谢其他评论者的时间。

# c# - .Net 中的异步 Web 请求是否有助于提高性能

> ID：11733738
> 
> 赞同：0
> 
> 时间：2012-07-31T05:35:08.673
> 
> 标签：c#, .net, asynchronous, webrequest

C# .net 中的常规请求和异步请求之间的性能差异（如果有）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:16:48.783

取决于您的用例。虽然在简单场景中使用异步不会立即带来性能优势，但在更复杂的场景中以及对于可扩展性而言，它可能至关重要。

例如，向多个服务器发送多个请求显然最好并行完成，这可以使用异步来处理。

关于可伸缩性，考虑一个使用同步 Web 请求与慢速外部服务器通信的 Web 应用程序。由于 IIS 只分配有限数量的线程来服务来自用户的请求，因此当用户数量增加时，存在所有用户线程在等待外部 Web 请求时被阻塞的风险。这意味着某些用户请求将被 IIS 拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:40:38.263

这取决于，在 asp.net 中你必须使用同步（直到 4.5）；但是在 Windows 窗体或任何其他类型的 C# 项目中，它可以防止线程被暂停。调用 ASYNC 完成事件将允许您更新正确的信息，而无需暂停 UI 或主线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:45:13.713

在异步模式下，服务器只能回复你想要的，这样可以最大限度地减少网络流量，从而最大限度地减少响应时间，提高用户体验。

# javascript - 如何让 iPhone 在 onClick 事件上执行 javascript？

> ID：11733740
> 
> 赞同：0
> 
> 时间：2012-07-31T05:35:11.447
> 
> 标签：javascript, jquery, iphone, menu

我发现这段代码带有一个 jQuery 函数来删除`onClick`事件广告，`tap`甚至在 iPhone 中替换它。我就是不能让它工作。

我怎样才能让 iPhone 执行除 onclick 之外的那些 JavaScript？我尝试 onChange 也没有运气。

```
function rebindClicks(){
var userAgent = navigator.userAgent.toLowerCase();
var isIphone = (userAgent.indexOf('iphone') != -1) ? true : false;

if (isIphone) {
    // For each event with an inline onclick
    $('[onclick]').each(function() {
        var onclick = $(this).attr('onclick');
        $(this).removeAttr('onclick'); // Remove the onclick attribute
        $(this).bind("click", preventClickEvent); // See to it that clicks never happen
        $(this).bind('tap', onclick); // Point taps to the onclick
    });
}
}

function preventClickEvent(event)  {
event.preventDefault();
}

<select name="jumpMenu" class="tableBlackWhite" id="jumpMenu"   style="width:275px" onchange="MM_jumpMenu('parent',this,0)" >
    <option value="#"><font color="#FF0000" size="3">אנא בחר שיר להשמעה</font></option>
    <option onclick="javascript:ajax('/Songs/01.php','SongsContentArea')" value="#"> »  נייס באלמו</option>
    <option onclick="javascript:ajax('/Songs/02.php','SongsContentArea')" value="#"> »  מאתונו</option>
    <option onclick="javascript:ajax('/Songs/03.php','SongsContentArea')" value="#"> »  פיה אסי</option>
    <option onclick="javascript:ajax('/Songs/04.php','SongsContentArea')" value="#"> »  טליוסאמה</option>
  </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:42:05.003

看起来像这条线：

```
$(this).bind('tap', onclick); // Point taps to the onclick 
```

正在传递字符串而不是函数，因为字符串来自`attr()`. 你可以尝试在`eval`这里使用，但它真的很hacky。像这样：

```
$(this).bind('tap', function() { eval(onclick); }); // Point taps to the onclick 
```

# xml - 如何在 xslt 2.0 中获取当前处理元素的下一个直接后续兄弟？

> ID：11733757
> 
> 赞同：-2
> 
> 时间：2012-07-31T05:36:12.480
> 
> 标签：xml, xslt, xpath, xslt-2.0, xpath-2.0

我正在使用 xslt 2.0 将一个 xml 文件转换为另一个 xml 文件。在 XSLT 2.0 中，我创建了一个带有一个参数的函数。实际上，参数是`<w:p>`元素的集合。所以，在我`<xsl:for-each-group>`用来获取每个参数的函数中`<w:p>`并逐个处理。假设，下面提到的 XML 文件`<w:table`在元素之间包含一个 > 元素。所以`<w:p>`，现在我想`following-sibling::w:table`在处理块中的每个`<w:p>`元素后检查函数`<xsl:for-each-group>`。

XML 文件

```
 <w:document>
      <w:p> para0</w:p>
      <w:p> para1</w:p>
      <w:table>table</w:table>
      <w:p>para3</w:p>
</w:document> 
```

XSLT 代码段：

```
<xsl:for-each-group select="$paragraphs" group-starting-with="w:p">           
                <xsl:apply-templates select="current-group()"> <!-- for processing <w:p>elements -->
                </xsl:apply-templates>         

                <xsl:if test="following-sibling::w:table"> <!--check following-sibling of current <w:p> is <w:table> -->
                        <xsl:apply-templates select="following-sibling::w:table">    </xsl:apply-templates>
                    </xsl:if>    
    </xsl:for-each-group> 
```

但是在`following-sibling::w:table`处理第一个元素时调用的检查。我只会在处理第二个元素时调用。所以，我只想检查`following-sibling`当前处理元素的下一个立即数是否在那个地方......

所以，请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:06:24.873

在 xsl:for-each-group 中，上下文项是当前组中的第一项。因此，following-sibling 将相对于组中的第一项进行选择。如果要相对于第二项进行选择，请使用 current-group()[2]/following-sibling::x。（此外，您可能只想要第一个跟随兄弟，这将是 following-sibling::x[1]）。

但是随后您谈论的是“当前处理元素”，这是您自己发明的术语。是否要处理组中每个项目的以下兄弟姐妹？在这种情况下，我希望在 xsl:for-each-group 中看到一个 xsl:for-each select="current-group()"。

# java - 从 json 字符串动态创建和读取树数据结构

> ID：11733759
> 
> 赞同：1
> 
> 时间：2012-07-31T05:36:22.173
> 
> 标签：java, json, lucene, jettison

我正在尝试开发一个动态查询构建器好几天。但是我在构建它时遇到了问题。

我正在复兴的是这样的json。

```
{"category":"Case Law","query":{"AND":{"Year":{"having":"","exact":"","any":"","none":""},"AND":{"Report":{"having":"","exact":"","any":"","none":""},"Citation":{"having":"","exact":"","any":"","none":""}}}}} 
```

这是可读性很强的方式

```
Array
(
    [category] => Case Law
    [query] => Array
        (
            [OR] => Array
                (
                    [Year] => Array
                        (
                            [having] => some
                            [exact] => values
                            [any] => might
                            [none] => have
                        )

                    [AND] => Array
                        (
                            [Report] => Array
                                (
                                    [having] => 
                                    [exact] => 
                                    [any] => 
                                    [none] => 
                                )

                            [Citation] => Array
                                (
                                    [having] => 
                                    [exact] => 
                                    [any] => 
                                    [none] => 
                                )

                        )

                )

        )

) 
```

*   这个 json 可以根据用户输入而改变（可以有更多的深度或更少）。
*   我想要做的是为 apache lucene 创建一个搜索查询......（目前让我们假设叶值只是字符串。）

它**必须是**这样的（我需要什么）

> （年份：另一个值或（报告：一些价值和引用：一些价值））

我尝试使用 Jettison 库并使用 DefaultMutableTreeNode 创建树结构。但它没有像我预期的那样工作。然后我尝试了 whit 递归函数，它也没有工作

我想有没有可能创造出这种东西。如果是怎么办。

非常感谢您的尝试！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:05:16.067

好的现在要求很明确，这是解决方案

定义您的操作

```
enum MyOperator {

  AND,
  OR

} 
```

写一个类来保存你的原子操作

```
class AtomicOperation {

   Object lhs;
   Object rhs;
   MyOperator operator;

} 
```

现在，如果您想要类似（年份：另一个值或（报告：一些价值和引文：一些价值））

您的 JSON 应如下所示：

```
String jsonString = {{Year:['2001','2002']} OR {{Report:['Report1']} AND {Citation:['Citation1']}}} 
```

所以首先使用代码将此 JSON 转换为 AtominOperation 类

```
ConvertJsonToObject.getFromJSON(jsonString,AtominOperation.class);

GSON will cast it to a Simple AtominOperation Object with operation "OR"
and lhs,rhs as 2 LinkedHashMaps (Default behaviour of GSON)

Now use the below method to get the proper AtomicOperation Object from the
above AtomicOperation Object.

public static AtomicOperation deriveFromJSON(AtomicOperation operation) {

        if (operation.getLhs().getClass().equals(LinkedHashMap.class)) {
            AtomicOperation leftOperation = deriveFromJSON(ConvertJsonToObject
                    .getFromJSON(ConvertJsonToObject.toJSON(operation.getLhs()),
                            AtomicOperation.class));
            AtomicOperation rightOperation = deriveFromJSON(ConvertJsonToObject
                    .getFromJSON(ConvertJsonToObject.toJSON(operation.getRhs()),
                            AtomicOperation.class));
            return new AtomicOperation(leftOperation, operation.getOperator(),
                    rightOperation);
        }
        return operation;

    } 
```

最终的 AtomicOperation 对象将是您想要的。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:15:38.050

您查询的 JSON 字符串

行。这是我尝试过的。

（年份：另一个值或（报告：一些值和引用：一些值和字段：另一个））

应该是这样的：

```
String json = 
{"lhs":{"lhs":{"lhs":{"lhs":"Field","rhs":"Value","operator":"EQUAL_TO"},"rhs":{"lhs":"Citation","rhs":"Citation","operator":"EQUAL_TO"},"operator":"AND"},"rhs":{"lhs":"Report","rhs":"Report1","operator":"EQUAL_TO"},"operator":"AND"},"rhs":{"lhs":"Year","rhs":"2001","operator":"EQUAL_TO"},"operator":"OR"} 
```

如果 MYOperator 枚举是：

```
public enum MyOperator {

    AND,
    OR,
    EQUAL_TO {
    @Override
    public String toString() {
        return ":";
    }
},
    IN

} 
```

和原子操作是

```
public class AtomicOperation {

     Object lhs;
     Object rhs;
     MyOperator operator;

     AtomicOperation(Object lhs,MyOperator operator, Object rhs) {
         this.lhs = lhs;
         this.rhs = rhs;
         this.operator = operator;
     }

    public Object getLhs() {
        return lhs;
    }
    public void setLhs(Object lhs) {
        this.lhs = lhs;
    }
    public Object getRhs() {
        return rhs;
    }
    public void setRhs(Object rhs) {
        this.rhs = rhs;
    }
    public MyOperator getOperator() {
        return operator;
    }
    public void setOperator(MyOperator operator) {
        this.operator = operator;
    }

     @Override
public String toString() {
        return "(" + lhs.toString() + " " + operator.toString() + " " + rhs.toString() + ")"; 
}

} 
```

然后您可以使用以下代码构建必要的 AtomicOperation 对象

```
AtomicOperation _r = deriveFromJSON(ConvertJsonToObject.getFromJSON(json,AtomicOperation.class)); 
```

下面是完整的 ConvertJsonToObject 类

```
public class ConvertJsonToObject {

    private static Gson gson = new GsonBuilder().create();

    public static final <T> T getFromJSON(String json, Class<T> clazz) {
        return gson.fromJson(json, clazz);
    }

    public static final <T> String toJSON(T clazz) {
        return gson.toJson(clazz);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:49:01.737

```
Use Something like Google Gson

class ConvertJsonToObject {

    private static Gson gson = new GsonBuilder().create();

    public static final <T> T getFromJSON(String json, Class<T> clazz) {
        return gson.fromJson(json, clazz);
    }

}

String jsonString = "{"category":"Case Law","query":{"AND":{"Year the case was instituted":{"having":"","exact":"","any":"","none":""},"AND":{"Report":{"having":"","exact":"","any":"","none":""},"Citation":{"having":"","exact":"","any":"","none":""}}}}}
"

Now you can use ConvertJsonToObject.getFromJSON(jsonString,Map.class); 
```

# file - 如何使用 bat 循环执行此操作

> ID：11733760
> 
> 赞同：0
> 
> 时间：2012-07-31T05:36:35.567
> 
> 标签：file, loops, batch-file, for-loop

我想循环这些以输出某事。

```
@echo off
set ans=yyynny
echo %ans:~0,1%
echo %ans:~1,1%
echo %ans:~2,1%
echo %ans:~3,1%
echo %ans:~4,1%
echo %ans:~5,1%
pause 
```

输出：

```
y
y
y
n
n
y 
```

在“帮助”之后，我得到了

```
set ans=yyynny
for /l %%i in (0,1,5) do (echo %ans:~%%i,1%)
pause 
```

当然，它不起作用。它输出这些：

```
yyynny
yyynny
yyynny
yyynny
yyynny 
```

我该如何解决这个问题？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:25:22.900

不使用延迟扩展的替代方案：

```
set ans=yyynny
for /l %%i in (0,1,5) do (call echo %%ans:~%%i,1%%) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:48:46.400

循环内变量的扩展`FOR`需要您**启用延迟扩展**以强制变量在运行时扩展，而不是在解析时扩展。

尝试

```
@echo off
setlocal enabledelayedexpansion
set ans=yyynny
for /l %%i in (0,1,5) do (echo !ans:~%%i,1!) 
```

请注意，该变量的引用语法略有不同`!ans!`，而不是 `%ans%`.

# android - 如何在预定时间取消 AlarmManager

> ID：11733761
> 
> 赞同：0
> 
> 时间：2012-07-31T05:36:55.993
> 
> 标签：android, broadcastreceiver, alarmmanager

如何在已启动的预定时间取消一个 AlarmManager。我正在像这样启动一个 AlarmManager。

我想在 5 小时后取消它。我怎样才能做到这一点？

```
AlarmManager service = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
Intent i = new Intent(context, MyStartServiceReceiver.class);
PendingIntent pending = PendingIntent.getBroadcast(context, 0, i, PendingIntent.FLAG_CANCEL_CURRENT);
Calendar cal = Calendar.getInstance();
cal.add(Calendar.SECOND, 30);
service.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), REPEAT_TIME, pending); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:54:03.777

从现在开始再设置一个 5 小时的闹钟。当此警报警报响起时，取消第一个警报。

```
AlarmManager service = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
Intent intentForCancelling = new Intent(context, ReceiverForCancelling.class);
PendingIntent pending = PendingIntent.getBroadcast(context, 0, intentForCancelling,
PendingIntent.FLAG_CANCEL_CURRENT);
Calendar cal = Calendar.getInstance();
cal.roll(Calendar.HOUR_OF_DAY, 5);
service.set(AlarmManager.RTC_WAKEUP,
cal.getTimeInMillis(), pending) 
```

并且，`ReceiverForCancelling`您可以取消第一个警报。
编辑：：

```
AlarmManager service = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(context, ReceiverForCancelling.class);
PendingIntent pending = PendingIntent.getBroadcast(context, 0, intent,
PendingIntent.FLAG_CANCEL_CURRENT);
service.cancel(pending); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:42:00.170

你可以试试下面的代码

```
Intent intentstop = new Intent(this, RefreshFeedsReceiver.class);
PendingIntent senderstop = PendingIntent.getBroadcast(this,
                            0, intentstop, 0);
AlarmManager alarmManagerstop = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManagerstop.cancel(senderstop); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:55:11.377

检查以下代码以设置和取消警报

```
 public void SetAlarm(Context context)
 {
     AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
     Intent i = new Intent(context, Alarm.class);
     PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
     am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * 60 * 10, pi); // Millisec * Second * Minute
 }

 public void CancelAlarm(Context context)
 {
     Intent intent = new Intent(context, Alarm.class);
     PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
     AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
     alarmManager.cancel(sender);
 } 
```

# visual-studio-2010 - 如何更改默认帐户以链接到 tfs？

> ID：11733764
> 
> 赞同：0
> 
> 时间：2012-07-31T05:37:00.637
> 
> 标签：visual-studio-2010

在VS2010中，当我点击连接到团队基础服务器时，它第一次询问了一个帐户和密码，但是它会使用默认帐户。现在，我想更改默认帐户，我该怎么做？顺便说一句，我的操作系统是xp。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:45:26.693

这些资源可以帮助您：

*   [如何将 VisualStudio 2010 连接到 TFS](http://www.bandgap.cs.rice.edu/classes/comp410/resources/Using%20TFS/How%20to%20connect%20to%20a%20Team%20Foundation%20Server.aspx)
*   [更改登录用户](https://stackoverflow.com/questions/5776852/tfs2010-change-connected-user)
*   [在另一个用户帐户下自动连接到 TFS](http://www.ewaldhofman.nl/post/2009/05/21/Automatically-connect-to-TFS-under-another-user-account.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:42:33.210

右键单击 VSTS 并选择“以不同用户身份运行”提供凭据，然后连接到 TFS。

# php - curl 已激活但未显示在 phpinfo 中

> ID：11733765
> 
> 赞同：5
> 
> 时间：2012-07-31T05:37:08.617
> 
> 标签：php, curl, wamp

我有一个问题，`curl`在我使用的时候没有显示在 phpinfo 中，`wampserver(64 bit)`但是当我打开 php 然后 php 扩展时`php_curl`，我的 wamp 服务器前面有一个勾号，但 curl 仍然没有显示在 phpinfo 中。谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T05:45:13.150

几天前我自己遇到了这个问题，我可以解决它的唯一方法是安装 apache 插件版本 2.2.9 和 php 插件版本 5.3.1

两者都可以在[http://www.wampserver.com/en下载页面的插件部分找到](http://www.wampserver.com/en)

编辑:: 这只发生在我的 64 位笔记本电脑上，我的 32 位台式机可以正常运行最新版本，没有任何问题

另外...如果您查看 (C):\wamp\logs\apache_error （或您安装到的任何路径），我怀疑您会看到类似于此的错误..

> PHP 警告：PHP 启动：无法加载动态库 'c:/wamp/bin/php/php5.4.3/ext/php_curl.dll' - 应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解更多详细信息。\r\n 在第 0 行的未知中

由于这个问题现在已经相当老了，而且我在我的新笔记本电脑上再次遇到了这个问题，并且其他用户已经访问了我在这里给出的答案。如果你使用 wampserver 的 32 位安装，即使在 64 位上也会出现平台，这个问题不会发生，这是避免它的最简单方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T13:36:57.650

我在 Windows 7 x64 上使用 curl 库时遇到了同样的问题，但我刚刚从这里下载了 php_curl.dll 库的固定版本：[http ://www.anindya.com/php-5-4-3-and-php-5- 3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-04T13:37:01.583

这就是我终于找到答案的地方： [PHP cURL not working - WAMP on Windows 7 64 bit](https://stackoverflow.com/questions/10939248/php-curl-not-working-wamp-on-windows-7-64-bit)

在那里，Matthieu Napoli 说：

> 转到 [http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/) 并下载与您的 php 对应的 curl 版本“固定卷曲扩展：”下的版本。
> 
> 因此，如果您有 php 5.3.13，请下载“php_curl-5.3.13-VC9-x64.zip”。首先尝试“VC”版本。然后替换 ext 文件夹中的 php_curl.dll。这对我有用。

# vba - 搜索文本并检查下划线

> ID：11733766
> 
> 赞同：0
> 
> 时间：2012-07-31T05:37:12.587
> 
> 标签：vba, ms-word

如何在 word 文档中搜索文本并检查相同文本的下划线。谁能帮我吗？？

```
Sub Underline()
    Dim fnd As String
    Dim n As Long

    fnd = InputBox("Enter text to search" & vbCr & vbCr _
    & "Click OK to search the entire workbook for all instances of the search text.")

    Dim x As Integer

    x = 0

    Do While x = 0
        With Selection.Find
            .ClearFormatting
        End With

        If fnd = False Then
            x = 1
            Exit Do
        End If
        Selection.Find.Execute
        If .Underline = False Then
            Selection.Comments.Add Range:=Selection.Range, Text:="pls underline text"
            Selection.Find.Execute
        End If
    Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:10:00.460

这是你正在尝试的吗？

```
Sub Sample()
    Dim c As Range
    Dim fnd As String

    fnd = InputBox("Enter text to search" & vbCr & vbCr _
    & "Click OK to search the entire document for all instances of the search text.")

    If fnd = "" Then Exit Sub

    Set c = ActiveDocument.Content

    c.Find.ClearFormatting
    c.Find.Replacement.ClearFormatting
    With c.Find
        .Text = fnd
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindStop
    End With

    c.Find.Execute
    While c.Find.Found
        If c.Font.Underline = wdUnderlineNone Then
            c.Select
            c.Comments.Add Range:=Selection.Range, Text:="pls underline text"
        End If
        c.Find.Execute
    Wend
End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-03-21T08:58:13.847

在 Siddharth Rout 的代码中注释以下行

c.Comments.Add Range:=Selection.Range, Text:="pls underline text"

# asp.net - 如何触发asp.net多视图？

> ID：11733767
> 
> 赞同：0
> 
> 时间：2012-07-31T05:37:13.047
> 
> 标签：asp.net, multiview

我还在琢磨asp.net。

我遵循了一些使用多视图的在线示例，当我使用菜单类之类的东西作为选择活动视图的触发器时，它们工作得很好。有了 onClick 事件就很容易了。

但我不知道如何从菜单控件更改发出的代码。

我有以下多视图控制...

```
<asp:View ID="0" runat="server">

   <p>view page 1</p>

</asp:View>

<asp:View ID="1" runat="server">

   <p>view page 2</p>

</asp:View> 
```

我需要使用以下结构来触发视图。（注意：这必须是发送到浏览器的内容。不一定是 aspx 页面中的文字代码）

```
<a class="button large-plain" href="" >
    <span>
        See page 1
    </span>
</a>
<a class="button large-plain" href="" >
    <span>
        See page 2
    </span>
</a> 
```

澄清一下：我们有一个由外部设计师提供的样式表，可以使用上述标记。如果我可以将触发器制作成 asp 按钮控件或菜单​​控件，那将很容易。但是那时样式表不起作用，我被告知如果样式表不起作用，世界将会结束。

我可以自定义一个菜单控件，以便它输出这种结构吗？（如果是这样，怎么做？）

我可以硬编码触发视图的链接（结构不会改变）。但是，如果我对其进行硬编码，我如何调用 onClick 事件来单击链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:07:36.507

我认为您可以尝试以下方法将标签更改为服务器端控件，然后将其用作触发器。将 ID 和 runat="server" 添加到任何 html 元素意味着您可以像访问任何其他 .NET 样式控件一样以编程方式访问它们。此外，如果您使用的是 .NET 4.0，您还可以添加 ClientIdMode="Static" 属性，以便 ID 与您键入的一样，并且不会被 ASP.NET 修改。

要解决单击问题，您可以添加 OnServerClick="" 属性来指定单击链接时在服务器上调用的方法。

```
<a class="button large-plain" href="" ID="ViewPage1" runat="server" OnServerClick="ViewPage1_Click">
    <span>
        See page 1
    </span>
</a>
<a class="button large-plain" href=""  ID="ViewPage2" runat="server" OnServerClick="ViewPage2_Click">
    <span>
        See page 2
    </span>
</a> 
```

# php - 如何使用 php 删除/删除 mySQL 中的特定表行？

> ID：11733773
> 
> 赞同：0
> 
> 时间：2012-07-31T05:37:39.203
> 
> 标签：php, mysql

我已经有这个代码：

```
<?php
if ($quantity == 0){
$prd_name = " ";
$colors = " ";
$sizes = " ";
$quantity = " ";
$price = " ";
$TIP = " ";
$TPA = " ";
$cost = " ";
$amount = " ";
$query ="DELETE FROM orders WHERE quantity='0'";
}
?> 
```

但它仍然会创建一个表格行条目。

我要做的是当输入的数量为 0 时，表格行将被删除。请多多包涵，因为我是 php 和 mySQL 编码的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:39:15.137

您忘记执行查询。它应该是

```
$query = mysql_query("DELETE FROM orders WHERE quantity='0'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:50:06.547

```
<?php
    if($quantity==0)
     {
       $query="Delete from orders where quantity=0";
       mysql_query($query);
      }
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:55:40.723

一旦通过将**Quotes**删除为**0**来运行查询，如果它是一个数字

```
<?php
    if($quantity==0)
     {
       $query = "DELETE FROM orders WHERE quantity = 0 ";
       mysql_query($query);
      }
 ?> 
```

# wordpress - 来自插件的 Wordpress 自定义 url

> ID：11733774
> 
> 赞同：6
> 
> 时间：2012-07-31T05:37:52.510
> 
> 标签：wordpress

我希望能够从插件创建 url。例如。一个新的 url 将是[http://example.com/slug-set-from-plugin](http://example.com/slug-set-from-plugin)，它将输出插件方法的内容。可行吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T06:54:04.867

使用[Rewrite API](https://www.pmg.com/blog/a-mostly-complete-guide-to-the-wordpress-rewrite-api/)，在您的情况下：[`add_rewrite_endpoint()`](https://codex.wordpress.org/Rewrite_API/add_rewrite_endpoint). 有关详细说明，请参阅[此示例](https://wordpress.stackexchange.com/questions/54583/how-can-i-use-wordpress-functions-in-my-stylesheet/54612#54612)。

# c++ - 是否有可以在 iOS 上运行的本地键值存储数据库（与 redis 不同）？

> ID：11733783
> 
> 赞同：0
> 
> 时间：2012-07-31T05:38:49.127
> 
> 标签：c++, caching, key-value-store

所以我有一个需要读取大量小数据的应用程序（例如处理大量客户记录的应用程序）。

通常，对于执行此类操作的服务器系统，您可以使用数据库来处理 a) 缓存最近使用的数据 b) 索引它们，以及 c) 存储它们以便从文件系统中高效检索。

现在，对于我的应用程序，我只有一个 std::map<> ，它将数据 id 映射到数据本身，这些数据本身非常小（比如每个 120 字节，或者接近那个）。数据 id 本身只是直接映射到文件系统中。

但是，这种系统不处理数据的卸载（如果内存开始用完）或数据的有效存储（当然，iOS 使用闪存，因此操作系统应该处理缓存），但是是的。

是否有图书馆或类似的东西可以处理这种东西？还是我必须从头开始构建自己的缓存系统？不太在意索引，只有 a) 缓存/卸载和 c) 存储以进行有效检索。我对将数千个（或可能数十万个）文件存储到文件系统上感到谨慎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:45:15.333

有可以在 iOS 中使用的[SQLite](http://www.sqlite.org/)或使用设备上已经可用的[CoreData](http://en.wikipedia.org/wiki/Core_Data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:42:32.683

为什么不信任属性列表文件和 NSDictionary？他们正是为此目的。

# c# - 最初设置的类声明在内部是否与在构造函数中设置它们相同？

> ID：11733786
> 
> 赞同：1
> 
> 时间：2012-07-31T05:38:58.343
> 
> 标签：c#

最初设置的类声明在内部是否与在构造函数中设置它们相同？

例子：

```
class test
{
     int test1 = 5;
} 
```

那和这有什么区别吗

```
class test
{
     int test1;
     public test()
     {
         test1 = 5;
     }
} 
```

如果没有区别，哪个更正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:00:05.990

在您给出的特定情况下，没有功能差异。但是，当涉及到继承时，字段初始值设定项可能会以令人惊讶的方式表现。字段初始值设定项实际上是在构造函数之前调用的，而构造函数的调用顺序是从最不派生到最派生的，而字段初始值设定项是从最派生到最不派生调用的。因此，如果类 A 派生自 B。当创建 A 的实例时，将执行以下顺序：A 的字段初始值设定项、B 的字段初始值设定项、System.Object 构造函数、B 的构造函数、A 的构造函数。

以上仅适用于实例字段初始化器/构造器。对于静态字段初始化器/构造器，行为是完全不同的。

至于在您的情况下哪个是正确的，没有约定俗成的约定，但读者通常会欣赏一致性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:43:40.543

对于大多数目的，您可以认为这两种成员初始化风格在功能上是等效的。

但是，您应该记住，在成员声明中进行的分配在任何构造函数执行之前执行。正如 Jon Skeet 在评论中指出的那样，如果从基本构造函数调用虚拟方法，这种时间差异会产生可观察到的工件。

“正确性”是一个见仁见智的问题。对于简单的整数值，初始值分配似乎足够无害，但是当您进入更复杂的类型（如日期或其他完整对象）时，混乱因素开始上升。

就我自己而言，我通常更喜欢将初始化作为构造函数主体中的显式赋值语句执行，而不是分散在声明中的整个类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T05:47:30.920

查看 IL 代码差异时，您可以看到在情况 1 中，变量 test 在调用构造函数之前分配，而在情况 2 中，它在调用构造函数之后分配。

**情况1**

```
.class public auto ansi beforefieldinit WebApplication1.Class1
    extends [mscorlib]System.Object
{
    // Fields
    .field public int32 test1

    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor () cil managed 
    {
        // Method begins at RVA 0x28d3
        // Code size 15 (0xf)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: ldc.i4.5
        IL_0002: stfld int32 WebApplication1.Class1::test1 <- HERE
        IL_0007: ldarg.0
        IL_0008: call instance void [mscorlib]System.Object::.ctor()  <- HERE
        IL_000d: nop
        IL_000e: ret
    } // end of method Class1::.ctor

} // end of class WebApplication1.Class1 
```

**案例2**

```
.class public auto ansi beforefieldinit WebApplication1.Class2
    extends [mscorlib]System.Object
{
    // Fields
    .field public int32 test1

    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor () cil managed 
    {
        // Method begins at RVA 0x28e3
        // Code size 17 (0x11)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [mscorlib]System.Object::.ctor() <- HERE
        IL_0006: nop
        IL_0007: nop
        IL_0008: ldarg.0
        IL_0009: ldc.i4.5
        IL_000a: stfld int32 WebApplication1.Class2::test1 <- HERE
        IL_000f: nop
        IL_0010: ret
    } // end of method Class2::.ctor

} // end of class WebApplication1.Class2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T05:42:20.840

在你的情况下，它是一回事。但是如果有参数化的构造函数并且 test1 是从构造函数传递的值中分配的。

```
class test
{
    int test1;
    public test()
    {
        test1 = 5;
    }

    public test(int ctest)
    {
        test1 = ctest;
    }
} 
```

`If there is no difference, which is more correct to do?`

由开发人员选择他想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T05:46:39.513

这称为[实例字段初始化](http://msdn.microsoft.com/en-us/library/aa645759%28v=vs.71%29)：

```
class Test
{
     int test1 = 5;
} 
```

它是如何工作的？

> 类的实例字段变量初始化器对应于在进入该类的任何一个实例构造函数（第 10.10.1 节）时立即执行的一系列赋值。变量初始化器按照它们在类声明中出现的文本顺序执行。

因此，在您的情况下，这两种字段初始化变体在功能上是相同的。

另外，我想建议你看看这个问题：[C# member variable initialization; 最佳实践？](https://stackoverflow.com/questions/298183/c-sharp-member-variable-initialization-best-practice).

# c# - 在另一个类中移动 get/set 方法

> ID：11733788
> 
> 赞同：1
> 
> 时间：2012-07-31T05:39:11.383
> 
> 标签：c#, winforms

是否可以在另一个类中移动 get set 方法？

我正在使用一个选项表单，它基本上直接在主表单中反映所有更改（主要用于更改控件颜色、字体等。

当您开始修改相当多的控件时，问题就开始了，因为主类填充了 get set 方法，所以我想知道是否可以重构代码以增加类的可读性，或者甚至更好，如果可能的话以某种方式移动另一个类中的方法（部分类？）

这是一个只有两个控件的小示例

```
public Font TreeFont
{
    get { return customTreeView1.Font; }
    set { customTreeView1.Font = value; }
}

public Font TextBoxFont
{
    get { return customTextBox1.Font; }
    set { customTextBox1.Font = value; }
}

public Font MenusFont
{
    get { return menuStrip1.Font; }
    set
    {
        menuStrip1.Font = value;
        statusStrip1.Font = value;
        contextMenuStripForSnippetContent.Font = value;
        contextMenuStripTreeViewMenu.Font = value;
    }
}

public Color TreeFontForeColor
{
    get { return customTreeView1.ForeColor; }
    set { customTreeView1.ForeColor = value; }
}

public Color TextBoxFontForeColor
{
    get { return customTextBox1.ForeColor; }
    set { customTextBox1.ForeColor = value; }
}

public Color TreeFontBackgroundColor
{
    get { return customTreeView1.BackColor; }
    set { customTreeView1.BackColor = value; }
}

public Color TextBoxFontBackgroundColor
{
    get { return customTextBox1.BackColor; }
    set { customTextBox1.BackColor = value; }
} 
```

因此，您可以想象，因为其中有很多需要更改，所以这些行就堆积起来了。

此外，仅返回控件并仅在其他表单上进行处理会是更好的做法，还是 get/set 方法被认为是更好的做法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:50:55.233

您可以使用[C# Regions](http://msdn.microsoft.com/en-us/library/9a1ybwek.aspx)使大型代码文件易于管理，也可以使用[Partial Classes](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)将大型代码文件拆分为多个可管理文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:39:20.867

如果我理解正确 - 问题不是“类”而是“文件”。`InitializeComponent`因此，您可以使用[Partial Classes](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.100%29.aspx)简单地将类拆分为两个文件（就像 Visual Studio 对方法所做的那样） 。

确保命名空间相同（如果您在子文件夹中创建文件，您将获得一个嵌套命名空间。只需更改它。）另外，请确保您的类以`public partial class` *两个文件*开头。并且没有在两个类中声明相同的属性。

**分步说明：**在“解决方案资源管理器”中 右键单击您的*项目。*点击“添加”。单击“新项目”。点击“班级”。更改`class Class1`为`public partial class Form1 : Form`。`using System.Windows.Forms;`在文件顶部添加。添加您的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:50:57.253

您可以使用允许 Page.FindControl("controlNameHere") 的不同类型的函数，并将其投射到正确的光线下。这更适用于 ASP.NET 页面，而不适用于 Windows 窗体，但您可以在这里找到相同的解决方案[Find control by name from Windows Forms controls](https://stackoverflow.com/questions/3898588/find-control-by-name-from-windows-forms-controls)。这样您就可以提取控件名称并进行操作，而无需返回任何内容。

# facebook-graph-api - Facebook Web 应用程序获取访问令牌

> ID：11733792
> 
> 赞同：0
> 
> 时间：2012-07-31T05:39:24.260
> 
> 标签：facebook-graph-api, facebook-php-sdk

我正在使用 php 创建一个 Web 应用程序。我在 facebook 有一个封闭的小组。当用户登录我的应用程序时，我向他们展示了一个页面。我想从我的 facebook 组中流式传输数据并显示在该页面中。由于这是一个封闭组，我无法使用 php SDK 从该组流式传输数据。我正在使用以下代码。

如果组是公开的，则此代码有效。

```
$facebook = new Facebook(array('appId' => FB_APP_ID, 'secret' => FB_SECRET_KEY, 'cookie' => true,));
return $facebook->api('/' . FB_GROUP_ID . '/feed'); 
```

我认为我们必须传递具有扩展权限的访问令牌才能获取该数据。但是如何在没有用户干预的情况下生成该令牌？

有任何想法吗？

# google-maps - 在选择 API 时需要帮助（例如：GOOGLE API）以查找离我在印度当前位置最近的位置

> ID：11733794
> 
> 赞同：2
> 
> 时间：2012-07-31T05:39:34.930
> 
> 标签：google-maps

我正在开发一个 Web 应用程序，如果用户输入给定位置（例如：街道、地址、国家/地区），它应该将所有离给定位置更近的零售位置带入，并且用户应该能够单击并查看生成的零售位置的地图并获取位置的方向。我已经对 Google Maps API 进行了一些研究，但我不确定 Google Maps API 能够提供印度任何农村地区的纬度和经度的效率如何。（该 API 也应该适用于移动设备（Android 和 Iphone）等））除了 Google Maps API 之外，是否还有其他替代方案可以完成上述任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:08:00.423

是的，据我所知，与要查找的任何其他 API 相比，Google Maps API 的效率更高。Google Maps API 拥有印度所有 Mandal 总部的信息，因此能够提供附近任何城市的纬度和经度。

# asp.net - 将 SQL Server DB 中的值存储为逗号分隔值有什么问题吗？

> ID：11733798
> 
> 赞同：0
> 
> 时间：2012-07-31T05:40:05.163
> 
> 标签：asp.net, sql, sql-server, database, csv

将 SQL Server DB 中的值存储为逗号分隔值有什么问题吗？

我有 100 个类别，每个类别有 500 个产品。我最初的想法是将产品代码存储在逗号分隔的值中，以便表中只有 100 条记录：

```
 catagcd1 - prod1,prod2,prod3......
  catagcd2 - prod2,prod3,prod5...... 
```

但是当我问我的朋友时：不要将它存储为逗号分隔，存储为正常结构。这意味着：

```
 catagcd1 - prod1
   catagcd1 - prod2
   catagcd1 - prod3
   catagcd2 - prod2
   ----------------
   ---------------- 
```

我的方式和他的方式有什么区别？从性能的角度来看还有什么区别？你能解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:55:18.033

您的朋友可能指的是[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)，即如果产品可以出现在多个类别中，则您可以在`category`and之间建立一对多的关系`product`，或者是 many: many ( `category`, `product`and )。`categoryproduct`

将数据存储在逗号分隔值中的问题在于，每次需要处理产品时都需要对产品字符串进行解码，这可能会很慢而且很麻烦。

作为替代方案，如果您从不需要直接引用产品，您还可以将产品/类别层次结构存储在 Xml 列中（处理类似于文档或多值数据库的问题）

# javascript - 在函数声明而不是运行时解析所有变量

> ID：11733800
> 
> 赞同：1
> 
> 时间：2012-07-31T05:40:05.783
> 
> 标签：javascript, variable-declaration

我想附加一个来自字符串的事件。我遇到的问题是函数名称不是作为字符串传入，而是在调用函数时编译，这会导致未定义的变量错误（temp）。

```
function someFun(arg) {
   alert(arg) ;
}

  temp[0] = "someFunc(test)" ;//this would be a sample of the incoming HTML
  var x = 0 ;
  while(temp[x] != '') {
    temp[x] = temp[x].replace(')','').split('(') ;//remove paranthesis and separate  func name from args
    temp[x][1] = temp[x][1].split(',') ;//turn string of args into array
    func = function() { window[temp[x][0]].apply(el,[]) ; }
    el.addEventListener('click',func,false) ;
    x++ ;
  } 
```

如果我不使用 temp[x][0] （这将是 'someFunc'），而是直接为 .apply 方法（在本例中为 .apply('someFunc'...) ）传入一个字符串，我没有问题并且该函数将按预期使用 onClick 调用。否则，当我单击元素 el 时，我会收到一个错误，即 temp 未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:03:08.507

我很确定，如果您在分配`temp[x][0]`函数之前分配给变量，它应该可以工作。像这样的东西

```
if (attributes._onClick) {

  temp = attributes._onClick;
  var x = 0;

  while(temp[x] != '') {

    var funcSig = temp[x].replace(')','').split('('); //remove paranthesis and separate func name from args

    var funcName = funcSig[0];
    var funcArgs = funcSig[1].split(','); //turn string of args into array

    func = function() { window[funcName].apply(el,[]); }

    el.addEventListener('click',function(){
      window[funcName].apply(el,funcArgs); }
    ,false);

    x++;
  }
} 
```

# java - 保存具有复杂关系的实体时出现 StaleStateException

> ID：11733803
> 
> 赞同：6
> 
> 时间：2012-07-31T05:40:18.597
> 
> 标签：java, spring, hibernate, persistence, save

我保存在数据库（Oracle）中的休眠实体具有非常复杂的关系，因为它具有许多相关实体。它看起来像这样......

```
@Table(name = "t_HOP_CommonContract")
public class Contract {
    @Id
    private ContractPK id;

    @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @PrimaryKeyJoinColumn
    private ContractGroupMember contractGroupMember;

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumns({
        @JoinColumn(name = "TransactionId", referencedColumnName = "TransactionId"),
        @JoinColumn(name = "PrimaryContractId", referencedColumnName = "PrimaryContractId")
    })
    @Fetch(FetchMode.SUBSELECT)
    private List<ContractLink> contractLinks;

    // . . . . . . . 

    // A couple of more one to many relationships

    // Entity getters etc.

} 
```

我还有几个实体，例如...

```
@Table(name = "t_HOP_TRS")
public class TotalReturnSwap {
    @Id
    private ContractPK id;
    // Entity Getters etc.
} 
```

诀窍是我必须在同一个事务中对`Contract`和实体进行持久化。`TotalReturnSwap`

有时它可能是一堆必须在同一个事务中持久化的实体。

当我保存`TotalReturnSwap`实体时，我注意到了以下异常（这总是在我保存`Contract`实体后完成）。

```
org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; nested exception is
    org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:675) \
    at org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793) 
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664) 
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754) 
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723) 
    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:147) 
    at com.rbs.fcg.publishing.DownstreamContractBusinessEventPostingService.performTDWPersistenceForContracts(DownstreamContractBusinessEventPostingService.java:102) 
    at com.rbs.fcg.publishing.DownstreamContractBusinessEventPostingService.persistContractBusinessEvent(DownstreamContractBusinessEventPostingService.java:87)
    at com.rbs.fcg.publishing.DownstreamContractBusinessEventPostingService.publish(DownstreamContractBusinessEventPostingService.java:67)
    at com.rbs.fcg.publishing.PublishingProcessor.publish(PublishingProcessor.java:76)
    at com.rbs.fcg.publishing.PublishingProcessor.process(PublishingProcessor.java:52)
    at com.rbs.are.MultiThreadedQueueItemProcessor$2.run(MultiThreadedQueueItemProcessor.java:106)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1
    at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:85)
    at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:70) 
```

现在有几点在回答问题时可能会有所帮助：

*   我只在数据库中保存（插入）实体 - 从不更新/删除/读取
*   即使在单线程环境中，我也能够隔离此异常，因此即使我们的应用程序是多线程的，它看起来也不像多线程问题

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T09:07:24.693

该错误可能是由几件事引起的：

1.  在提交对象之前刷新数据可能会导致清除所有等待持久化的对象。
2.  如果对象具有自动生成的主键并且您正在强制分配一个键
3.  如果您在将对象提交到数据库之前清理对象。
4.  零或不正确的 ID：如果您将 ID 设置为零或其他值，Hibernate 将尝试更新而不是插入。
5.  Object is Stale：Hibernate 缓存会话中的对象。如果对象被修改了，而 Hibernate 不知道它，它会抛出这个异常——注意 StaleStateException

我没有把它归功于它，在[这里](http://java-fp.blogspot.co.uk/2011/09/orghibernatestalestateexception-batch.html)找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T19:15:48.987

在以下情况下发生在我身上：

*   我在 java 代码中创建了 objectA。
*   我将现存的 objectB 作为一个字段添加到 objectA 中。objectB 与 objectA 具有一对一的关系。
*   我在数据库中保存（创建）objectA。
*   保存 objectA 时，在数据库中更新 objectB 以添加 objectA 的 id。

*   然后我向 objectA 添加了一个 objectC（一个 objectA 用于许多 objectC）。我尝试更新 objectA 并得到了 stalestateexception....即使使用合并。

答案是我需要更新 objectB 或从数据库中检索 objectA 的新实例

# ruby-on-rails-3 - ruby 或 rails 中的延迟函数调用

> ID：11733809
> 
> 赞同：0
> 
> 时间：2012-07-31T05:40:24.057
> 
> 标签：ruby-on-rails-3

我正在编写扑克变体游戏，需要 ruby​​ 或 rails 来运行一个大循环以保持游戏自动化。IE：

*   每 10 秒左右检查一次，确保游戏中有足够的玩家；
*   当有牌时，发牌，然后倒计时约 45 秒，然后摊牌；
*   在我的扑克变体中，有 3 次连续摊牌 - 因此每次摊牌需要缓慢进行，以便玩家知道发生了什么：即 5 秒显示第一部分手牌并宣布该摊牌的赢家，5 秒第二第三个 5 秒
*   手后停顿几秒
*   再次从顶部开始循环

我已经快速浏览了delayed_job 和resque，但是对于我正在尝试做的事情来说，它们看起来相当复杂。我还考虑过使用 javascript/jquery 循环将服务器推送到循环中，但这似乎不太优雅，因为桌子上可能有众多玩家中的每一个都将寻求推动循环，而不是服务器这样做集中。

我是否错过了一个相当简单的功能，还是该深入研究一下delayed_job？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:04:16.913

您几乎需要某种守护进程，但不一定需要任何库。

您可以将代码编写为某个模块上的方法，并使用`rails runner`. 该方法可以执行包含`sleep <seconds>`执行代码和等待的循环。停止进程的简单方法是让它监视 /tmp 中是否存在文件或其他内容，但您也可以执行诸如编写 pid 文件之类的操作，然后稍后使用其 pid 终止该进程。

# android - 媒体播放器错误 (-38, 0)

> ID：11733810
> 
> 赞同：5
> 
> 时间：2012-07-31T05:40:26.097
> 
> 标签：android, android-mediaplayer

每当我试图在另一个活动中停止媒体播放器时，我都会收到无效状态异常“尝试在错误状态下执行 seekTo，错误 (-38, 0)”。请提出解决方案是什么？

媒体播放器活动：

```
@Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            setContentView(R.layout.media);

    Thread t = new Thread()
            {
                public void run() 
                {
                    while (isDownloading) 
                    {
                        if (Data.filenames != null && Data.filenames.size() >= (getIntent() .getExtras().getInt("index") + 1) && Data.filenames.get(getIntent().getExtras() .getInt("index")) != null) 
                        {
                            try 
                            {
                                mediaPlayer.setDataSource(Data.filenames.get(getIntent().getExtras().getInt("index")));
                                mediaPlayer.prepare();
                                mediaPlayer.start();
                                isplayed++;

                                new Thread(onEverySecond).start();
                                mediaPlayer.setOnCompletionListener(new OnCompletionListener() 
                                {
                                    @Override
                                    public void onCompletion(MediaPlayer mp) {
                                        mediaPlayer.seekTo(0);
                                        btnplay.setImageResource(R.drawable.play);
                                        index = 0;
                                    }
                                });
                                boolean isPlaying = mediaPlayer.isPlaying();
                                if(!isPlaying)
                                {
                                mediaPlayer.pause();
                                }                           
                            } catch (IllegalArgumentException e) {
                                e.printStackTrace();
                            } catch (IllegalStateException e) {
                                e.printStackTrace();
                            } catch (IOException e) {
                                e.printStackTrace();
                            } catch (Exception e) {
                                e.printStackTrace();
                            } finally {
                                isDownloading = false;
                            }
    }
    }t.start;

    }

Second Activity From where I am trying to stop media player:

    if (!(MediaPlay1.mediaPlayer == null)) {
      MediaPlay1.mediaPlayer.seekTo(MediaPlay1.mediaPlayer.getCurrentPosition());
      try {
        Thread.sleep(200);
      } catch (InterruptedException e) {
          e.printStackTrace();
       }
      MediaPlay1.mediaPlayer.stop();
      MediaPlay1.mediaPlayer.release();
      } else {
        Log.e("------", "------");
      }

      if (!(MediaPlay.mediaPlayer == null)) {
        MediaPlay.mediaPlayer.stop();
        MediaPlay.mediaPlayer.release();
       } else {
         Log.e("------", "------");
       }

Logcat: 
```

MediaPlayer(11694)：尝试在错误状态下执行 seekTo：mPlayer=0x2b8270，mCu​​rrentState=0 MediaPlayer(11694)：错误 (-38, 0) MediaPlayer(11694)：错误 (-38,0)

# c - 释放指针的算术

> ID：11733814
> 
> 赞同：3
> 
> 时间：2012-07-31T05:40:44.970
> 
> 标签：c, pointers, language-lawyer

在阅读[这个 SO question](https://stackoverflow.com/questions/11732862/memory-allocated-without-allocation-using-malloc-how)的答案时，我了解到越界指针算法是未定义的。事实上，根据 C99 6.5.6 第 8 段

> 如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则计算不应产生溢出；否则，行为未定义。

释放该对象是否会使该保证失效？7.20.3.2 “The Free Function” 好像没提，只提“空间被释放”。由于 6.5.6 特别提到了溢出，这似乎是一个整数溢出问题，free 不会影响。对指向对象的指针的算术是“引用它”的行为吗？

换句话说，就是：

```
char *foo = malloc(10);
free(foo);
foo++; 
```

不明确的？还是“溢出”的用法不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T05:53:49.367

C99 §6.2.4 说：

> 当指针指向的对象到达其生命周期的末尾时，指针的值变得不确定。

§7.20.3 描述了分配对象的生命周期，由以下人员创建`malloc()`：

> 已分配对象的生命周期从分配一直延伸到解除分配。

所以，从形式上讲，指针的值在`foo`之后变得不确定`free()`，因此不能再说指向任何对象。因此，增量的行为是未定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:44:03.663

对无效指针执行算术运算会调用未定义的行为。

# java - 如何在春季为地图中未找到的键设置默认值

> ID：11733817
> 
> 赞同：3
> 
> 时间：2012-07-31T05:41:08.293
> 
> 标签：java, spring

我有三个班级a，b和c。都继承同一个类，我必须根据一个键来选择在运行时使用哪个类。

这是我写的Spring代码：

```
 <bean id="ConfigurationAdapterMap" class="abc">
   <property name="adapterMap">
       <map>
        <entry key="key1">
          <bean class="class1"/>
        </entry>
        <entry key="Other">
          <bean class="class2"/>
        </entry>
      </map>
    </property>     
  </bean> 
```

如果给定的键与键集中的任何键都不匹配，我不想显式传递“其他”，并且我想返回 class2。我可以让春天来做这件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:00:27.807

从文档中：

```
您还可以显式控制将要使用的 Map 的确切类型
通过使用“地图类”实例化和填充
元素上的属性。

```

因此，例如，您可以从中`DefaultedMap`获取`commons-collections`并尝试将其用作`map-class`. 或者您可以实现自己的`Map`并使用它。

# html - 边框是重叠的内容

> ID：11733818
> 
> 赞同：1
> 
> 时间：2012-07-31T05:41:11.747
> 
> 标签：html, css

所以我遇到了一个烦人的问题，我在 a`wide border (15px)`上设置了 a`<div>`并且我有一个元素`floated right`在其中`<div>`，a `negative margin`to top 使它与边界略微重叠。这工作正常，直到我设置`<div>`为`overflow-y:scroll`现在而不是文本与文本的边框重叠`border overlaps`。我不知道为什么会发生这种情况以及如何解决它。

*   [**现场演示**](http://thepelican.me/me/index.html)| 每个顶部的 h1 元素都`.window`与边框重叠，但如果禁用`overflow-y:scroll`on`.window`则很好。

**到目前为止我尝试过的**

*   我尝试给出`h1`比`.window`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:52:48.130

试试这个`h1`：

```
h1 {
font-size: 500%;
margin-top: -38px;
padding-top: 0px;
position: absolute;
width: inherit;
text-align: right;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T05:44:51.800

给你的 h1 元素一个位置：absolute 应该有帮助。

# java - 在Android中发现标签时如何识别mifare classic和mifare ultralight

> ID：11733838
> 
> 赞同：1
> 
> 时间：2012-07-31T05:43:19.900
> 
> 标签：java, android, nfc, mifare

我正在使用 android 中的 nfc，我想知道发现的标签是 Mifare Classic 还是 Mifare Ultralight 或任何其他标签。请告诉我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:06:51.803

尝试

```
String[] techs = tag.getTechList();
for (String t : techs) {
  if ("com.android.nfc.tech.MifareClassic".equals(t)) {
    ... // it's MIFARE Classic
  }
  else if ("com.android.nfc.tech.MifareUltralight".equals(t)) {
    ... // it's MIFARE Ultralight
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:49:28.713

[这篇](https://stackoverflow.com/questions/9971820/how-to-read-detected-nfc-tag-ndef-content-details-in-android)SO 帖子包含一些代码片段

```
String type = ndefTag.getType();         // tag type 
```

看起来像你需要的

# python - 脚本中的python鼻子，从文件中收集测试类，然后运行测试

> ID：11733839
> 
> 赞同：2
> 
> 时间：2012-07-31T05:43:21.400
> 
> 标签：python, nose, nosetests, unittest2

我将如何使用 python 脚本中的鼻子来

1.  从目录中收集 python 文件
2.  foreach 文件
    1.  运行使用传递的参数找到的所有测试类

这是一个示例，给定文件

```
/run.py
/tests/TestClassA.py 
```

在**TestClassA.py**中是代码

```
 class A():
     __init__(self, b):
          self._b = b
     test_run():
          print("%s",self._b) 
```

***重申需求：***
我想从 run.py 调用鼻子。我想要鼻子（或鼻子的某个部分）

1.  在文件 TestClassA.py 中找到类**A**
2.  创建一个名为**a的****A**实例，将字符串**“foo”**传递给**A.__ init __**函数
*******   调用**a.test_run()********

 ****此请求的**run.py**中的 python 鼻子代码是什么？
如果不是 python nose，python 单元测试会做得更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:01:31.860

在 run.py 中：

```
import nose
result = nose.run() 
```

`run()`您可以通过向调用传递适当的参数来选择要运行的测试，请参阅[nose 的使用选项](http://nose.readthedocs.org/en/latest/usage.html#extended-usage)。鼻子会发现 TestClassA.py 很好，因为文件名以`test`. 通常，您只需传递项目的根路径。

您可能应该阅读有关实例化要在测试中使用的对象的鼻子文档。如果你真的想像你写的那样做，你可以编写一个单元测试来创建一个`A`对象并运行测试，但这违背了使用鼻子的目的——通常你测试的东西不仅仅在代码中定义定义测试。****

# php - 动态添加 cron 作业

> ID：11733841
> 
> 赞同：0
> 
> 时间：2012-07-31T05:43:25.040
> 
> 标签：php, exec, crontab

我想通过将命令存储在文本文件中，然后在我的 PHP 代码中使用**exec命令来运行它来动态添加 cron 作业。**

**我的名为cron.txt**的文本文件包含

```
*/5 * * * * /usr/local/bin/php -f public_html/bookmark/email.php 
```

我的相关PHP代码是

```
exec('crontab cron.txt', $a, $return); 
```

当我运行代码时，它的**$return**设置为错误代码**1**，并且没有添加 cron 作业。我以前做过这个没有问题，但我今天错过了一些东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:30:05.477

确保 Apache 用户（例如“www-data”）或作为 CLI 运行脚本的用户对 cron.txt 文件具有权限。

# javascript - 如何使用 JavaScript 将 !important 添加到样式表规则？

> ID：11733844
> 
> 赞同：6
> 
> 时间：2012-07-31T05:43:28.620
> 
> 标签：javascript, css

我`CSSStyleRule`在 JavaScript 中引用了一个对象，我想更新 to 的`border-top-color`样式`red !important`。如果我分配 value `red`，则不会出现问题。如果我分配 value `red !important`，则忽略该值（即未分配）。

```
myStyleSheetRule.style.borderTopColor = 'red'; // success
myStyleSheetRule.style.borderTopColor = 'red !important'; // fail 
```

如何设置 !important 标志？

请注意，它必须通过以编程方式访问的样式表规则来完成。在我的用例中，我不能分配样式属性或其他任何东西。我在 Windows 7 上使用 Chrome。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:27:20.280

像这样的东西应该工作：

**HTML**

```
<div id="colored">?</div>​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**默认样式表**

```
#colored {
    border-top: 1px solid Black;
}​ 
```

**Javascript**

```
var all = document.styleSheets,
    s = all[all.length - 1],
    l = s.cssRules.length;

if (s.insertRule) {
    s.insertRule('#colored {border-top-color: Red !important}', l);
} else {
    //IE
    s.addRule('#colored', 'border-top-color: Red !important', -1);
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-15T15:40:03.657

这应该是诀窍；

```
var property='color';
var value='red !important'; 
var selector='h1';

if(value.indexOf("!important") > 0){
           var newRule=myStyleSheetRule.style.cssText+" "+property+":"+value;
           myStyleSheetRule.insertRule(selector + " { " + newRule + "; }",/*indexOfTheRule*/);            
           myStyleSheetRule.deleteRule(/*indexOfTheRule*/);
    } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-31T05:50:31.047

尝试：

```
myStyleSheetRule.setAttribute('style', 'border-top-color:red !important'); 
```

这将内联添加它。

# html - 如何在文本框中显示数组的值？

> ID：11733845
> 
> 赞同：0
> 
> 时间：2012-07-31T05:43:31.140
> 
> 标签：html, ruby

我有一个文本框，我必须在其中显示从 api 获得的数组值，问题是，我用过这样

```
<input name="f" type="text" id="f" value=entries.f> 
```

并且我将值作为 ["V"] incase 的单个值和 ["V", incase 的多个值，那么我如何在文本框中显示数组值，如 V、N？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:01:56.603

这对你有用

```
 <input name="f" type="text" id="f" value="<%= entries.f %>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:56:39.233

```
<input name="f" type="text" id="f" value="<%= entries.f %>"> 
```

如果您将 Rails 与 ERB 一起使用，这可能会有所帮助

# php - PHP分页功能无法正确显示

> ID：11733848
> 
> 赞同：0
> 
> 时间：2012-07-31T05:43:49.967
> 
> 标签：php, function, hyperlink, pagination

我有这个用于分页的功能，它设置为在链接中一次只显示 10 页。假设有 11 个页面，那么链接看起来像

1 | **2** | **3** | **4** | **5** | **6** | **7** | **8** | **9** | **10** | **下一个 »** | **最后的 ”**

然后在第 11 页上看起来像

**« 第一**| **« 上一页**| 11

但是，在第十页上，这就是它的样子

**« 第一**| **« 上一页**| **11** | **下一个 »** | **最后的 ”**

这是我正在使用的 PHP 函数（对不起，它相当大）

```
function get_paging_link($sql, $itemPerPage = 10, $strGet = '') {
    global $db2;
    global $q;
    $result = $db2->GetDataTable($sql);
    $pagingLink = '';
    $totalResults = count($result);
    $totalPages = ceil($totalResults / $itemPerPage);
    $numLinks = 10;
    if ($totalPages > 1) {
        $self = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
        if (isset($_POST['page']) && $_POST['page'] > 0) {
            $pageNumber = $_POST['page'];
        } else {
            $pageNumber = 1;
        }
        if ($pageNumber > 1) {
            $page = $pageNumber - 1;
            if ($page > 1) {
                $prev = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',$page);return false;\">&laquo; Prev <sp>|</sp></a> ";
            } else {
                $prev = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',$page);return false;\">&laquo; Prev <sp>|</sp></a> ";
            }
            $first = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',1);return false;\">&laquo; First <sp>|</sp></a> ";
        } else {
            $prev = '';
            $first = '';
        }
        if ($pageNumber < $totalPages) {
            $page = $pageNumber + 1;
            $next = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',$page);return false;\"><sp>|</sp> Next &raquo;</a> ";
            $last = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',$totalPages);return false;\"><sp>|</sp> Last &raquo;</a> ";
        } else {
            $next = '';
            $last = '';
        }
        $start = $pageNumber - ($pageNumber % $numLinks) + 1;
        $end = $start + $numLinks - 1;
        $end = min($totalPages, $end);
        $pagingLink = array();
        for ($page = $start; $page <= $end; $page++) {
            if ($page == $pageNumber) {
                $pagingLink[] = " $page ";
            } else {
                if ($page == 1) {
                    $pagingLink[] = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',1);return false;\">$page</a> ";
                } else {
                    $pagingLink[] = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',$page);return false;\">$page</a> ";
                }
            }
        }
        $pagingLink = implode(' <sp>|</sp> ', $pagingLink);
        $pagingLink = $first . $prev . $pagingLink . $next . $last;
    }
    return $pagingLink;
} 
```

我无法完全弄清楚我在数学上做错了什么。我玩过1的加法和减法，但无济于事。提前致谢！对不起，高大的职位

**编辑：**为了让问题更清楚，当我在每 10 页（10,20,30，...）上时，它会显示下一组十个链接。在第 10 页时，它会向他们显示一个页面。

**编辑2：**我用这个替换了包含分页功能的块（以 开头`$start = $pageNumber - ($pageNumber % $numLinks) + 1;`和结尾`$pagingLink = implode(' <sp>|</sp> ', $pagingLink);`）：

```
$max_page_links = 10;
        if ($pageNumber > $max_page_links / 2) {
            if (ceil($totalResults / $itemPerPage) - $pageNumber < (($max_page_links / 2) + 1)) {
                $start_counter = $pageNumber - ($max_page_links - (ceil($totalResults / $itemPerPage) - $pageNumber)) + 1;
                $end_counter = ceil($totalResults / $itemPerPage);
            } else {
                $start_counter = $pageNumber - (($max_page_links / 2) - 1);
                $end_counter = $pageNumber + ($max_page_links / 2);
            }
        } else {
            $start_counter = 1;
            $end_counter = $max_page_links;
        }
        for ($i = $start_counter; $i <= $end_counter; $i++) {
            if ($i == $pageNumber) {
                $pagingLink[] = " $i ";
            } else {
                $pagingLink[] = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',$i);return false;\">$i</a> ";
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:34:00.530

你说的对。你的方程式：

```
$pageNumber - ($pageNumber % $numLinks) + 1 // This equates to 11 when pageNumber is 10 
```

我使用以下内容进行分页：

```
// set the limit of pictures, page number, and number of pages
// multiples of 4 unless you change column count below
$limit = $itemPerPage;
// figures number of pages needed
$numofpages = ceil($totalResults / $limit);

for($i = 1; $i <= $numofpages; $i++){
    if($i == $page){
        echo $i . " ";
    }else{
        echo "<a href='gallery.php?page=" . $i . "'>" . $i . "</a> ";
    }
} 
```

上面的 For 循环可以更改为仅显示 10 个，并进行一些修改。

```
for($i = 0; $i <= $numofpages; $i++){
    $pageNum = $page;
    $currentPageIndex = floor($pageNum/10); // Will return 1 for 11
    $pageIndex = ($currentPageIndex * 10) + 1);
    if($currentPageIndex > 0) {
        $pageIndex = ($currentPageIndex * 10) + 1);
        if($pageIndex == $page){
            $pagingLink[] = " $pageIndex ";
        } else {
            $pagingLink[] = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',$pageIndex);return false;\">$page</a> ";
        }
    } else {
        if($i == $page){
            $pagingLink[] = " $page ";
        } else {
            $pagingLink[] = " <a class=\"paginglink\" href=\"#\" onclick=\"refreshsearch('$q',$i);return false;\">$page</a> ";
        }
    }
} 
```

*没有测试修改过的代码。可能需要一些调整*

# c# - http上的“流式传输”如何工作？

> ID：11733850
> 
> 赞同：1
> 
> 时间：2012-07-31T05:44:01.620
> 
> 标签：c#, .net, streaming, video-streaming, audio-streaming

每次我遇到流媒体这个词时，这个概念都会让我感到困惑。您能否将我链接到有关概念和示例的任何文档？（.net 和 c#）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:35:06.483

[这篇关于 Silverlight Streaming](http://msdn.microsoft.com/en-us/magazine/ee336025.aspx)的文章可能是您正在寻找的。

您可能会发现使用[Expression Encoder](http://www.microsoft.com/expression/products/Encoder4_Overview.aspx)也是一个不错的起点。

# objective-c - iphone相机上传

> ID：11733852
> 
> 赞同：0
> 
> 时间：2012-07-31T05:44:18.187
> 
> 标签：objective-c, ios, cocoa-touch, camera, uiimagepickercontroller

在xcode 4.3中，我尝试使用应用程序中的相机拍照并使用该图像或图片库中的图像添加到此处------->

```
(void) ShareButton {
[AddThisSDK showAddThisButtonInView:self.view
                          withFrame:CGRectMake(75, 50, 150, 50)
                             forImage:[UIImage imageNamed:@"**HERE**"]
                          withTitle:@"Share Your Dinner"
                        description:@""];
} 
```

我的相机可以正常工作我只是不知道如何在此处获取图像名称如果您需要更多信息或更好的解释，请随时询问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:05:34.147

代替：

```
 forImage:[UIImage imageNamed:@"**HERE**"] 
```

你应该使用这个：

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *myImageFromCamera = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    [AddThisSDK showAddThisButtonInView:self.view
                          withFrame:CGRectMake(75, 50, 150, 50)
                             forImage:myImageFromCamera
                          withTitle:@"Share Your Dinner"
                        description:@""];
} 
```

`UIImagePickerController`的 didFinishPickingMediaWithInfo 委托方法可用于检测用户何时按下了选择器中的“使用”按钮。如上所示，它会`UIImage`为用户拍摄的任何图像创建一个，然后我们将此图像设置为`AddThisSDK`共享图像。

请注意，这是一种过度简化，实际上并不会直接执行您想要的操作。为了正确完成此操作，您需要`UIImage`全局声明，以便您可以在 didFinishPickingMediaWithInfo 中设置图像，然后稍后在您的 AddThisSDK 共享方法中调用它。

**注意：** `forImage:[UIImage imageNamed:@"**HERE**"]`告诉方法它应该使用保存在应用程序包中的名为“ **HERE ”的图像。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:56:51.597

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *myImageFromCamera = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    [AddThisSDK showAddThisButtonInView:self.view
                              withFrame:CGRectMake(75, 50, 150, 50)
                               forImage:myImageFromCamera
                              withTitle:@"Share Your Dinner"
                            description:@""];

    NSString *mediaType = [info
                           objectForKey:UIImagePickerControllerMediaType];
    [self dismissModalViewControllerAnimated:YES];
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = [info
                          objectForKey:UIImagePickerControllerOriginalImage];

        imageView.image = image;
        if (newMedia)
            UIImageWriteToSavedPhotosAlbum(image,
                                           self,
                                           @selector(image:finishedSavingWithError:contextInfo:),
                                           nil);
} 
```

这非常有效，您拍摄或从胶卷中选择的照片会通过分享按钮显示

# c# - 绘制具有主要和次要y轴的折线图c#

> ID：11733863
> 
> 赞同：8
> 
> 时间：2012-07-31T05:45:08.330
> 
> 标签：c#, mschart, excel-interop

我一直在研究用c#绘制图表的方法。我有绘制带有 y 轴和 x 轴以及第二个 y 轴的图表的特定要求。我尝试使用 excel Interop，但没有找到解决方案。我已经开始研究 MSChart 组件，但还没有达到我的数据与是

```
index lines branches
1      20     5
2      30     8
3      34     6 
```

我想在 x 轴上绘制索引，在左侧 y 轴上绘制线条的比例，在右侧 y 轴上绘制分支的比例。

如果有帮助，我正在使用 .net 版本 2.0 和 3.5

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T15:23:32.757

创建系列时，将`YAxisType`属性设置为`AxisType.Primary`或`AxisType.Secondary`

```
 var lines = new Series("lines");
        lines.ChartType = SeriesChartType.Line;
        lines.Points.Add(new DataPoint(1, 20));
        lines.Points.Add(new DataPoint(2, 30));
        lines.Points.Add(new DataPoint(3, 34));
        lines.YAxisType = AxisType.Primary;
        chart1.Series.Add(lines);

        var branches = new Series("branches");
        branches.ChartType = SeriesChartType.Line;
        branches.Points.Add(new DataPoint(1, 5));
        branches.Points.Add(new DataPoint(2, 6));
        branches.Points.Add(new DataPoint(3, 8));
        branches.YAxisType = AxisType.Secondary;
        chart1.Series.Add(branches); 
```

这会产生一个像这样的图表，这听起来像你所追求的。下面的例子有点难看，它有主要和次要 y 值的线等，但你可以通过设置图表控件的属性来按照你想要的方式清理它。

![在此处输入图像描述](../Images/2f26111fc8a2d874bd1a47d7efc21dcf.png)

# javascript - 使用jstl读取bean列表并分配给facelets中的javascript变量

> ID：11733867
> 
> 赞同：0
> 
> 时间：2012-07-31T05:45:22.383
> 
> 标签：javascript, jsf-2, jstl, facelets

我正在使用 facelet 和 draw 函数有 jstl 标签：

```
 <ui:define name="content" >
                <h:outputScript name="js/graphics/paths.js"/> 
                <h:outputScript name="js/graphics/draw.js"/> 
```

## 调用函数时要评估的标记（这可能吗）？

```
function showMap(){

 var data = {
        <c:forEach items="${list.KPI}" var="ctag" varStatus="loop">        
            '${ctag.USTER}': ${ctag.Value}
            ${!loop.last ? ',' : ''}
        </c:forEach>
    }     
} 
```

## 错误：

![在此处输入图像描述](../Images/737cbd4905b6883359868f73853f548b.png)

是否可以将 jstl 与 facelets 一起使用？为什么我会收到此错误？我正在使用那里的链接：

1) [javascript 是否可以从 cforeach 标记中提取值](https://stackoverflow.com/questions/4506816/is-possible-javascript-extract-value-from-cforeach-tag)

2)[填充-javascript-array-from-jsp-list](https://stackoverflow.com/questions/3040645/populating-javascript-array-from-jsp-list)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:20:53.813

JSTL 肯定在 Facelets 中工作。只有*真正*理解 Facelets 生命周期才能理解一些技术含义：[JSF2 Facelets 中的 JSTL... 有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

至于您的具体问题，您很可能忘记在 XML 命名空间中声明 JSTL taglib。

```
xmlns:c="http://java.sun.com/jsp/jstl/core" 
```

不这样做会导致 JSTL 标记根本不被解释，并最终导致生成的 HTML/JS 代码出现语法错误，因为 Web 浏览器无法将 JSTL 标记识别为有效的 HTML/JS 代码。在 webbrowser 中右键单击页面并执行*View Source*。您不应该**在**其中看到任何未解析/纯 JSTL 标记。

# algorithm - 从 RDF 获取数据的有效遍历/搜索算法？

> ID：11733868
> 
> 赞同：-1
> 
> 时间：2012-07-31T05:45:23.490
> 
> 标签：algorithm, search, data-structures, rdf, sparql

我将数据作为 RDF 图存储在 DB 中，并使用 SPARQL 检索数据。现在图中的节点（对象）变得很大，遍历/搜索现在变得更慢。

一个。谁能建议有效的遍历/搜索算法来获取数据？

作为下一步，我已经联合了数据，即来自 SAP 等外部应用程序的数据。在这种情况下，搜索变得更加缓慢。

湾。在这种情况下我使用什么有效的搜索算法？

这似乎是大型企业系统中的一个常见问题，任何关于如何在此类系统中解决这些问题的输入也将有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:07:23.067

我有一个类似的问题。我使用 SPARQL 属性路径进行了大量的图形遍历，使用基于 RDF 的存储库太慢了。我使用的是 Jena TDB，它应该很快，但还是太慢了！

就像@Mikos 建议的那样，我尝试了 Neo4J。然后它变得更快了。就像马克沃森在[这篇博](http://blog.markwatson.com/2010/12/nice-neo4j-version-12-final-released.html)文中所说的那样，

> RDF 数据存储支持 SPARQL 查询：非常适合匹配数据中的模式。
> 
> Neo4j 支持任意图结构，并且似乎最适合探索图的邻域：从节点开始并探索连接的节点。（图遍历）

我使用了 Neo4j，但您可以尝试为图遍历构建的任何工具。我读到 Allegrograph 4 是基于 RDF 的，并且具有良好的图形遍历速度。

现在我使用 Neo4j，但我没有放弃 RDF。我仍然使用 URI 作为标识符并尝试重用流行的 rdf 词汇和关系。稍后我将添加一个功能来将我的间隙渲染为 RDF。我知道使用 Neo4j 你也可以使用 Tinkerpop 来渲染 RDF，但我自己还没有尝试过。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T11:50:53.423

图遍历和高效查询是一个范围广泛的问题，使用方法取决于您的情况。我建议查看像 Neo4j 这样的数据存储，并使用像 Lucene 这样的工具对其进行补充。

# node.js - 流星连接数

> ID：11733870
> 
> 赞同：1
> 
> 时间：2012-07-31T05:45:31.583
> 
> 标签：node.js, meteor

使用 Meteor 框架记录实时连接数的最佳方法是什么？我有在线实时共享用户的要求，并已求助于创建一个集合并只是为每个用户替换了初始化记录，但计数似乎已重置，到目前为止我所拥有的内容如下，在此先感谢。

```
Counts = new Meteor.Collection "counts"

if Meteor.is_client
  if Counts.findOne()
    new_count = Counts.findOne().count + 1
    Counts.remove {}
    Counts.insert count: new_count
  Template.visitors.count = ->
    Counts.findOne().count

if Meteor.is_server
  reset_data = ->
    Counts.remove {}
    Counts.insert count: 0
  Meteor.startup ->
    reset_data() if Counts.find().count() is 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:50:29.267

当您信任“获取计数值，从集合中删除，在集合中插入新计数”时，您就有了竞争条件。客户端可以同时获得 X 值。这不是要走的路。

相反，尝试让每个客户端在集合中插入“自身”。放置一个唯一的 id 和它被插入的“时间”。使用 Meteor.Method 实现一个心跳，刷新这个“时间”。可以从集合中删除时间太旧的客户端。在服务器中使用计时器来删除空闲客户端。

您可以在这里查看其中的一些内容： [https ://github.com/francisbyrne/hangwithme/blob/master/server/game.js](https://github.com/francisbyrne/hangwithme/blob/master/server/game.js)

# jquery - 将添加到购物车按钮移动到 Jquery 中的更多信息图像旁边

> ID：11733871
> 
> 赞同：0
> 
> 时间：2012-07-31T05:45:38.710
> 
> 标签：jquery, html

在此页面[http://www.qualityhangers.com/SearchResults.asp?Cat=1818](http://www.qualityhangers.com/SearchResults.asp?Cat=1818)我想将“添加到购物车”图像移动到“更多信息”旁边。所以分离这个

```
<a href="/ShoppingCart.asp?ProductCode=QH1225272">
<img border="0" align="absmiddle" src="/v/vspfiles/templates/210/images/buttons/btn_addtocart_small.gif">
</a> 
```

并附在前面

```
<a class="smalltext colors_text" href="http://www.QUALITYHANGERS.COM/Natural-Wood-Suit-Combo-Hanger-17-p/qh1225272.htm">
<img border="0" src="/v/vspfiles/templates/210/images/Bullet_MoreInfo.gif">
</a> 
```

我应该为图像标签 Bullet_MoreInfo.gif 分配一个 ID 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:26:59.160

我正在`<a>`根据它们的 HREF（因为没有附加的唯一 CSS 类）获取所有标签（添加到购物车按钮）并寻找`<a>`必须是其直接兄弟（间接）的标签（更多信息按钮）。

```
$('a[href^="/ShoppingCart.asp"]').each(function () {
   var $addToCart = $(this),
   $moreInfo = $(this).parents('td[width="100%"]').parent().next().find('a');
   $addToCart.insertAfter($moreInfo);
}); 
```

演示：转到您的网页并在控制台中运行上述代码。

注意：确保您始终具有相同的标记，`parents(selector)`否则`$moreInfo`您必须根据需要进行修改。

# delphi - 桌面 Delphi 应用程序能否通过 Windows 8 认证（使用 Windows 应用认证工具包）？

> ID：11733872
> 
> 赞同：29
> 
> 时间：2012-07-31T05:45:40.200
> 
> 标签：delphi, windows-8, app-certification-kit, wack

显然，Delphi（任何版本）[不支持安全异常处理程序](https://forums.embarcadero.com/thread.jspa?messageID=473469)（Visual Studio 中的 /SAFESEH 开关）。在 Windows 8 上使用 Windows 桌面应用程序认证工具包时，这会导致警告。根据Windows 8 桌面应用程序的[认证要求](http://msdn.microsoft.com/en-us/library/windows/desktop/hh749939)：

> 必须使用 /SafeSEH 标志编译您的应用程序，以确保安全的异常处理

显然Delphi缺少这个开关，所以不能做。我的问题是：

1.  我的理解是否正确，即使套件仅显示警告（没有失败），由于这是“必须”要求，今天的任何 Delphi 应用程序都无法通过 Windows 8 认证，因此不能包含在 Windows 应用程序商店中？

2.  是否可以在编译后以某种方式将 SafeSEH 表添加到 PE 文件中（例如，从映射文件或调试符号中提取所需的信息），或者我们绝对需要编译器/链接器对此的支持，因此必须等到 Embarcadero 实现此功能？

澄清一下，我的应用程序是 Windows 32 位桌面应用程序（64 位兼容），*而不是 Metro 应用程序*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:23:38.543

我无法回答问题 1。但是，我很难想象使用*must*这个词可能意味着该规则是可选的。

至于问题 2，您需要编译器/链接器的支持。您不能合理地期望使用 PE 编辑后链接工具来支持它。考虑以下代码：

```
try
  Beep;
except
  on E: Exception do
    Writeln(E.ClassName, ': ', E.Message);
end; 
```

编译器发出以下内容：

```
Project1.dpr.11: try
0041C3AA 33C0             xor eax,eax
0041C3AC 55               push ebp
0041C3AD 68C9C34100       push $0041c3c9 // exception handler is at $0041c3c9
0041C3B2 64FF30           push dword ptr fs:[eax]
0041C3B5 648920           mov fs:[eax],esp
Project1.dpr.12: Beep;
0041C3B8 6A00             push $00
0041C3BA E8E1CEFEFF       call MessageBeep
0041C3BF 33C0             xor eax,eax
0041C3C1 5A               pop edx
0041C3C2 59               pop ecx
0041C3C3 59               pop ecx
0041C3C4 648910           mov fs:[eax],edx
0041C3C7 EB59             jmp $0041c422
0041C3C9 E97291FEFF       jmp @HandleOnException
0041C3CE 0100             add [eax],eax
0041C3D0 0000             add [eax],al
0041C3D2 E42F             in al,$2f
0041C3D4 41               inc ecx
0041C3D5 00DA             add dl,bl
0041C3D7 C3               ret 
0041C3D8 41               inc ecx
0041C3D9 00A3D83E4200     add [ebx+$00423ed8],ah
Project1.dpr.15: Writeln(E.ClassName, ': ', E.Message);
........ 
```

现在，真正的异常处理程序是`HandleOnException`在`System.pas`. 但是，压入堆栈`$0041c3c9`的地址是包含该`try/except`块的代码的本地地址。这意味着为了创建 SafeSEH PE 部分，您需要找到`try/except`代码中的每一个部分。虽然这显然是可行的，但我认为它并不容易处理。

我宁愿想象 x86 编译器的 SEH 异常处理程序只是`_HandleXXX`在`System.pas`. 在这种情况下，添加一个仅列出这些功能的 PE 部分作为链接后步骤将很容易。然而，由于每一个`try/except`都有自己的本地异常处理程序，我现在相信只有编译器作者才能真正希望添加 SafeSEH PE 部分。

据我所知，没有要求`SafeSEH`支持 x86 Windows 编译器的 QC 报告。我建议您记录 QC 报告和官方支持案例。

**更新：** @haimg 做得很好，因为我在失败的地方取得了成功并设法找到了 QC 报告：[QC#106781](http://qc.embarcadero.com/wc/qcmain.aspx?d=106781)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:14:35.777

Delphi申请无法通过认证还有其他因素

[http://delphitools.info/2012/08/23/why-no-native-winrt-support-in-delphi-xe3/](http://delphitools.info/2012/08/23/why-no-native-winrt-support-in-delphi-xe3/)

# oracle - 在一个表字段上触发适用于所有表字段

> ID：11733873
> 
> 赞同：2
> 
> 时间：2012-07-31T05:45:50.357
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我有一个触发器，用于表中的几个字段。但是由于某种原因，如果另一个字段被更改（未在触发器中定义），那么它仍然会触发。

```
CREATE OR REPLACE TRIGGER INTEGRATION_EMPLOYMENT
    AFTER UPDATE OF start_day_of_employment, end_of_employment ON hr_employment_data
    FOR EACH ROW
    DECLARE
    BEGIN
         IF UPDATING THEN
            MERGE INTO ad_integration intg USING dual ON (intg.user_id = :NEW.user_id AND intg.integrated = 'NO')
            WHEN MATCHED THEN
                UPDATE SET
                         intg.start_day_of_employment = decode(:NEW.start_day_of_employment, NULL, ' ', :NEW.start_day_of_employment),
                         intg.end_of_employment = decode(:NEW.end_of_employment, NULL, ' ', :NEW.end_of_employment),
                         intg.manager_status = :NEW.manager_status,
                         intg.pid = (SELECT pid FROM arc.user_info WHERE user_id = :NEW.user_id),
                         intg.network_access_start_date = (SELECT network_access_start_date FROM hr_extension_data WHERE user_id = :NEW.user_id)
             WHEN NOT MATCHED THEN
                INSERT (intg.user_id, intg.start_day_of_employment, intg.end_of_employment, intg.manager_status, intg.pid, intg.network_access_start_date
                VALUES (:NEW.user_id, :NEW.start_day_of_employment, :NEW.end_of_employment, :NEW.manager_status, (SELECT pid FROM arc.user_info WHERE user_id = :NEW.user_id), (SELECT network_access_start_date FROM hr_extension_data WHERE user_id = :NEW.user_id));
END IF;

END HR_ADINTEGRATION_EMPLOYMENT; 
```

是因为使用 DUAL 还是我遗漏了什么？

干杯! :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:10:50.343

如果您想保持结构不变并且仅在特定字段更改时处理触发器，那么只需进行快速比较（新代码行 7 和 8）：

```
CREATE OR REPLACE TRIGGER INTEGRATION_EMPLOYMENT
AFTER UPDATE OF start_day_of_employment, end_of_employment ON hr_employment_data
FOR EACH ROW
DECLARE
BEGIN
     IF UPDATING 
        AND (:NEW.start_day_of_employment <> :OLD.start_day_of_employment
        OR   :NEW.end_of_employment <> :OLD.end_of_employment)  THEN
        MERGE INTO ad_integration intg USING dual ON (intg.user_id = :NEW.user_id AND intg.integrated = 'NO')
        WHEN MATCHED THEN
            UPDATE SET
                     intg.start_day_of_employment = decode(:NEW.start_day_of_employment, NULL, ' ', :NEW.start_day_of_employment),
                     intg.end_of_employment = decode(:NEW.end_of_employment, NULL, ' ', :NEW.end_of_employment),
                     intg.manager_status = :NEW.manager_status,
                     intg.pid = (SELECT pid FROM arc.user_info WHERE user_id = :NEW.user_id),
                     intg.network_access_start_date = (SELECT network_access_start_date FROM hr_extension_data WHERE user_id = :NEW.user_id)
         WHEN NOT MATCHED THEN
            INSERT (intg.user_id, intg.start_day_of_employment, intg.end_of_employment, intg.manager_status, intg.pid, intg.network_access_start_date
            VALUES (:NEW.user_id, :NEW.start_day_of_employment, :NEW.end_of_employment, :NEW.manager_status, (SELECT pid FROM arc.user_info WHERE user_id = :NEW.user_id), (SELECT network_access_start_date FROM hr_extension_data WHERE user_id = :NEW.user_id));
END IF;

END HR_ADINTEGRATION_EMPLOYMENT; 
```

# android - 如何国际化 Android 应用程序？

> ID：11733874
> 
> 赞同：3
> 
> 时间：2012-07-31T05:45:50.660
> 
> 标签：android, internationalization

如何确定 Android 设备的语言设置。我这样做是为了使我的应用程序国际化。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T05:54:19.743

您必须使用不同的 string.xml 文件

```
 res/
   values/
       strings.xml
   values-es/
       strings.xml
   values-fr/
       strings.xml 
```

请参考以下链接

[支持不同的语言](http://developer.android.com/intl/zh-CN/training/basics/supporting-devices/languages.html)

并阅读[本地化](http://developer.android.com/resources/tutorials/localization/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:51:06.007

最常见的做法是在 res/values 文件夹中保留一个包含要本地化的字符串的字符串文件。然后，您可以创建带有资源限定符的附加值文件夹，其中将包含本地化字符串文件。

例如，如果您想翻译成德语，您可以创建 res/values-de 文件夹并将您的本地化字符串文件放入该文件夹中。如果语言设置为德语，Android 将自动加载此文件夹。如果当前系统语言没有 values 文件夹，它将使用默认的 res/values 文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T05:51:38.050

为不同的语言创建值文件夹并放置此语言字符串。

示例：values-ca 并将加拿大语言字符串放在此文件夹中。

因此，如果用户更改手机语言，则显示该国家/地区语言。

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-12T12:53:27.427

您必须使用不同的 string.xml 文件

res/values/strings.xml values-hi/strings.xml

```
<resources>
<string name="welcome">स्वागतम&lt;/string>
<string name="email">ईमेल पता&lt;/string>
<string name="password">पासवर्ड&lt;/string>
<string name="login">लॉगिन&lt;/string>
<string name="signup">खाता नहीं है? साइन अप करें</string> 
```

值-gu/strings.xml

```
<resources>
<string name="welcome">પધારો </string>
<string name="email">ઈમૈલ નું નામ&lt;/string>
<string name="password">પાસવોર્ડ</string>
<string name="login">લોગીન&lt;/string>
<string name="signup">એકાઉન્ટ નથી ? સાઈન ઉપ કરો&lt;/string> 
```

值-ja/strings.xml

```
<resources>
<string name="welcome">歓迎</string>
<string name="email">電子メールアドレス&lt;/string>
<string name="password">パスワード&lt;/string>
<string name="login">ログイン</string>
<string name="signup">アカウントをお持ちでない場合は？サインアップ</string> 
```

值-ja/strings.xml

```
<string name="welcome">Willkommen!</string>
<string name="email">Email Addresse</string>
<string name="password">passowrd</string>
<string name="login">Login</string>
<string name="signup">müssen nicht angemeldet? Anmeldung</string> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-09T12:19:33.583

有一个非常简单的方法：右键单击strings.xml 文件并选择打开翻译编辑器或单击打开编辑器。 [![在此处输入图像描述](../Images/094d24e99fcc19694aff56a699da4ae1.png)](https://i.stack.imgur.com/D8Ott.png) 您将看到不同的条目出现在 strings.xml 文件中。通过单击代表地球的图标（添加本地），您可以添加新语言并根据需要输入条目的翻译。

[![在此处输入图像描述](../Images/2911103081ac6256f05f62627c8fbfb1.png)](https://i.stack.imgur.com/cEPpy.png) [![在此处输入图像描述](../Images/c9a64526924423630a72e0072c830da3.png)](https://i.stack.imgur.com/6R7iK.png) 完成后，您应该会在树窗口中看到一个新的 strings.xml 文件，并附有所选语言的标志和括号中的该语言的扩展名。您只需在模拟器上编译和测试应用程序，通过在其上测试不同的语言选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T05:48:59.810

您真的需要手动执行此操作吗？实际上在 android 中已经内置了国际化机制——资源限定符。

您需要做的就是为每个语言环境添加特定的 strings.xml。

[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

# c# - windows phone 7 中的折纸动画

> ID：11733875
> 
> 赞同：1
> 
> 时间：2012-07-31T05:45:51.590
> 
> 标签：c#, windows-phone-7, xaml

嗨，我正在开发一个需要翻转动画的动画，如[http://www.avatar-app.com/dev/2012/01/24/ios-flip-transform/](http://www.avatar-app.com/dev/2012/01/24/ios-flip-transform/)所示（类似于 wp7 中的 weatherflow 应用程序）。现在，我成功地实现了这一点，方法是使用两个边界一个在另一个之上，并使用平面投影为一个边界设置动画。这是我的代码

```
<Grid x:Name="ContentPanel" Background="Wheat" Grid.Row="1" Margin="12,0,12,0">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
            <Grid.Resources>
                <Storyboard x:Name="myStoryboard">
                   <DoubleAnimation  Storyboard.TargetName="planeProjection"    Storyboard.TargetProperty="RotationX" From="0" To="90" Duration="0:0:5" />

                </Storyboard>
        </Grid.Resources>

        <Border Background="AliceBlue" Grid.Row="0" ManipulationStarted="Border_ManipulationStarted">

           <Border .Projection>
              <PlaneProjection x:Name="planeProjection" CenterOfRotationY="1"/>
           </Border .Projection>         
        </Border>

        <Border Background="Aqua" Grid.Row="1">
        </Border>
    </Grid> 
```

问题是，这里我使用了两个控件（边框），但我只想在一个控件上使用动画，即分割动画，使其适用于控件的一半（只有一个边框）？

伙计们帮帮我。

# php - 如何获取远程 HTML 页面的内容

> ID：11733876
> 
> 赞同：8
> 
> 时间：2012-07-31T05:45:57.423
> 
> 标签：php, html

我想使用 div 获取具有空间类名称和 em 子级的“li”上的远程 html 内容。

我的远程内容是这样的

> <ul>
> 
> <li class="用户">
> 
> > <div class="name">我的名字 1</div>
> > 
> > <div class="rep">20</div>
> 
> </li>
> 
> <li class="用户">
> 
> > <div class="name">我的名字2</div>
> > 
> > <div class="rep">23</div>
> 
> </li>
> 
> <li class="用户">
> 
> > <div class="name">我的名字 3</div>
> > 
> > <div class="rep">40</div>
> 
> </li>
> 
> </ul>

得到他们的数据后，它必须是这样的。

> [我的名字 1,20]
> 
> [我的名字 2,23]
> 
> [我的名字 3,40]

谢谢。

对不起我可怜的英语

注意：在远程页面上有比这更多的内容。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-31T05:54:28.617

使用 CURL 读取远程 URL 以获取 HTML。

```
$url = "http://www.example.com";
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
$output = curl_exec($curl);
curl_close($curl); 
```

然后使用[PHP 的 DOM 对象模型](http://www.php.net/manual/en/book.dom.php)来解析 HTML。

例如`<h1>`要从源中获取所有标签，

```
$DOM = new DOMDocument;
$DOM->loadHTML( $output);

//get all H1
$items = $DOM->getElementsByTagName('h1');

//display all H1 text
 for ($i = 0; $i < $items->length; $i++)
        echo $items->item($i)->nodeValue . "<br/>"; 
```

# fiddler - 仅对某些进程使用提琴手

> ID：11733878
> 
> 赞同：11
> 
> 时间：2012-07-31T05:46:02.167
> 
> 标签：fiddler

我想知道是否可以仅在某些进程而不是所有使用系统代理设置的应用程序上使用 Fiddler2。我知道 Fiddler2 中有一个过滤器选项，但据我所知，它只*隐藏*信息并且无论如何都会捕获流量。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-04T01:09:06.220

**提琴手工具栏上有一个“任何进程”按钮。将图标拖到窗口以仅显示来自该进程的流量。再次单击该图标可取消过滤器。这是按进程过滤的最好和最简单的方法。**

或者，在文件菜单中，不要选中“捕获交通”项。然后在需要被提琴手捕获的其他应用程序中设置代理。

如果您捕获 HTTPS，请打开 https 配置对话框（Fiddler 选项 >> HTTPS），您将看到一个包含以下列表项的列表框：

*   ...来自所有流程
*   ...仅来自浏览器
*   ...仅来自非浏览器
*   ...仅来自远程客户端

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-26T23:54:17.153

Here is a video which shows you how to filter by processes in fiddler. Towards the end of the video, you can learn how to filter by browser or even the tab of a browser. [https://www.youtube.com/watch?v=qZYl3a60-Uc](https://www.youtube.com/watch?v=qZYl3a60-Uc)

Steps (Fiddler 4.3x) -

1.  Fiddler > Filters Tab

2.  Use filters - check it!

3.  Client processes : Show only Traffic from - check it! > Choose your process (a browser or tab in browser) from the adjacent drop down menu.

4.  Actions button > Run filterset now - click it!

Done !

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-05T07:19:12.320

要使用 Fiddler 捕获来自**特定进程/应用程序**的流量， fiddler 提供了一个选项 - **“任何进程”** [![任何工艺选项](../Images/a75d3e043cca3b9a892710593fc85745.png)](https://i.stack.imgur.com/2zlwb.png)

脚步 ：

*   打开/启动您要监控的应用程序。
*   选择**“任何进程”**选项并将其拖到您的应用程序中。
*   现在您已限制 Fiddler 捕获来自特定进程/应用程序的流量。

# bash - 将多个变量与包含多列数据的变量相呼应；重击

> ID：11733881
> 
> 赞同：1
> 
> 时间：2012-07-31T05:46:10.247
> 
> 标签：bash, awk

好的，所以首先要更详细地解释我遇到的问题。我在这里设置了两个变量；一个复制一列数据，另一个复制多列数据...

问题是我想在多列前面附加第一列数据，同时保持它们对齐

当我将它们单独重定向到 Cmain 时，这些循环也会执行我想要的操作；但我需要对他们俩都这样做

```
#copies first column of original car file to format the atom numbers

 FC=$(awk '{for (i=6; i<=21 ; i++)
 if (NR >= 6 && NR == i)
      print $1}' $carf)

 #copies and formats  the rest of the columns from the .incoor file and sets to variable Col

 col=$(awk '{for (j=6; j <= 21 ; j++)
 if (NR >= 6 && NR == j)
 printf  "%13.8f\t%12.8f\t%12.8f%s%s%s%s%4.3f\n", $2, $3, $4,
 "     XXXX", " 1", "    xx","  " $1"  ", "  0.000"}' $coor) 
```

这就是出问题的地方

```
 #echos variables and appends to Cmain 
 echo  " $FC   $col" >> Cmain 
```

正在发生的事情的例子；出于某种原因，它需要第二组列并将它们向下移动，并将第一行移动...就像我说的那样，当我单独执行它们时，列对齐并且一切都很好...除了我缺少第一列数据

```
 U1
U2
U3
U4
C1
C2
C3
C4
U5
U6
U7
U8
C5
C6
C7
C8       0.00000000       0.00000000      0.00000000     XXXX 1    xx  U  0.000
   0.00000000     4.43785037      4.86047726     XXXX 1    xx  U  0.000
   4.86047726     0.00000000      4.86047726     XXXX 1    xx  U  0.000
   4.86047726     4.43785037      0.00000000     XXXX 1    xx  U  0.000
   4.86047726     4.43785037      4.86047726     XXXX 1    xx  C  0.000
   4.86047726     0.00000000      0.00000000     XXXX 1    xx  C  0.000
   0.00000000     0.00000000      4.86047726     XXXX 1    xx  C  0.000
   0.00000000     8.87570074      0.00000000     XXXX 1    xx  U  0.000
   0.00000000    13.31355111      4.86047726     XXXX 1    xx  U  0.000
   4.86047726     8.87570074      4.86047726     XXXX 1    xx  U  0.000
   4.86047726    13.31355111      0.00000000     XXXX 1    xx  U  0.000
   4.86047726    13.31355111      4.86047726     XXXX 1    xx  C  0.000
   4.86047726     8.87570074      0.00000000     XXXX 1    xx  C  0.000
   0.00000000    13.31355111      0.00000000     XXXX 1    xx  C  0.000
   0.00000000     8.87570074      4.86047726     XXXX 1    xx  C  0.000 
```

~

我想要的是

```
 U1    0.00000000     0.00000 etc
  U2    0.00000000     4.43785037      4.86047726 ....... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:39:02.050

您正在寻找[`paste`(1)](http://www.manpagez.com/man/1/paste/)命令。 `echo`不能将一个字符串拼接到另一个字符串（这似乎是您正在寻找的，真的；在字符串 2 中的每个新行之前，插入字符串 1 的下一行）。

`paste`虽然适用于文件，而不是字符串，但在 Bash 中，这很容易解决；只需使用[流程替换](http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/process-sub.html)。

```
#!/bin/bash

# Refactored into a function for maintainability and legibility
# Maybe you want to factor out the magical constants 6 and 21 somehow as well?
atoms () {
    awk '# Simplified script; apparently, you simply want lines 6 through 21
     NR==6,NR==21 { print $1 }' "$@"
}
# Ditto
cols () {
    awk '# Simplified this script as well
     NR==6,NR==21 {
       printf  "%13.8f\t%12.8f\t%12.8f%s%s%s%s%4.3f\n", $2, $3, $4,
               "     XXXX", " 1", "    xx","  " $1"  ", "  0.000"}' "$@"
}

paste <(atoms "$carf") <(cols "$coor") 
```

如果文件很大，在第 21 行之后退出可以节省大量时间。

```
NR==22 { exit } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:58:14.087

*对于每个文件的每一*行，您的 AWK 脚本从 6 计数到 21 。我不认为这是必要的。我认为您要做的只是测试行号是否在该范围内。这是我的意思的一个例子：

```
FC=$(awk 'NR >= 6 && NR <=21)
     print $1}' $carf) 
```

但是，您真正需要做的是结合两个 AWK 脚本，将第一个文件中的值保存在数组中，并在打印第二个文件中的值时打印数组中的值。

```
awk 'FNR == NR && FNR >= 6 && FNR <= 21 {    # first file
        carf[FNR] = $1
     }
     FNR == NR {
         next
     }
     FNR >= 6 && FNR <= 21 {    # second file
         printf  "%-4s%13.8f\t%12.8f\t%12.8f%s%s%s%s%4.3f\n", carf[FNR], $2, $3, $4,
             "     XXXX", " 1", "    xx","  " $1"  ", "  0.000"
     }' "$carf" "$coor" 
```

请注意，没有`echo`（或`paste`）。

除非您在输出中确实需要制表符，否则您可以将它们排除在外并调整字段宽度以提供所需的输出对齐方式。

# winapi - 从非活动到 RDP 会话的屏幕截图

> ID：11733883
> 
> 赞同：1
> 
> 时间：2012-07-31T05:46:16.407
> 
> 标签：winapi, directshow, rdp

我需要使用 RDP 会话中的 DirectShow 进行屏幕截图，但问题是如果与会话断开连接，则不会发生癫痫发作。即使断开 rdp 会话，有什么方法可以继续绘制会话吗？

# visual-c++ - 在“PreTranslateMessage”函数中处理 WM_KEYDOWN 时无法进入 OnChar()

> ID：11733886
> 
> 赞同：0
> 
> 时间：2012-07-31T05:46:44.897
> 
> 标签：visual-c++

`WM_KEYDOWN message`出于某种原因，当我进入时我需要做一些事情`PreTranslateMessage`，所以我做了这样的事情：

```
if(WM_KEYDOWN == pMsg->message && pMsg->hwnd == GetSafeHwnd())
{      
     SendMessage(pMsg->message,pMsg->wParam,pMsg->lParam);
     return TRUE;       
} 
```

这样做之后，我发现没有办法进入`OnChar`功能，这很糟糕。有谁知道为什么以及如何解决这个问题？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:26:04.490

当您从 PreTranslateMessage() 返回 TRUE 时，将不会进一步处理该消息。您对*每次*击键都执行此操作，因此不会处理任何内容，并且永远不会生成 WM_CHAR 消息。换句话说，你得到了你想要的。看起来您正在向自己发送消息。很难提出替代方案，代码没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:42:51.847

为什么你会向自己发送同样的信息？如果您要做的只是进行一些处理并让消息通过您在“if”语句中需要做的所有事情就是进行处理并让正常的消息链接工作。这样，消息将被发送以进行进一步处理并最终到达您的 onChar。

所以你的代码应该是这样的：

```
void YourWnd::PreTranslateMessage(MSG *pMsg)
{
    if(WM_KEYDOWN == pMsg->message && pMsg->hwnd == GetSafeHwnd())
    {      
         processKeyDown();      
    }
    return CWnd::PreTranslateMessage(pMsg);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:46:23.137

为什么选择 PreTranslateMessage？您必须在 PreTranslateMessage 中执行此操作的可能原因是什么？

PreTranslateMessage 顾名思义就是包含热键/快捷键的预翻译消息。使用它作为某种绷带经常会迟早导致灾难。

你能告诉我们你想要达到什么目标吗？有人将能够提出更好的解决方案。

# android - 在 Textview 中显示指示

> ID：11733892
> 
> 赞同：1
> 
> 时间：2012-07-31T05:47:25.980
> 
> 标签：android, textview

在我的应用程序中，我有 1 个列表视图和 4 个文本视图按列显示。我正在显示来自数据库的数据，因为有些数据有一些重复值，而另一些则没有。所以我必须为那些重复出现的数据提供指示图像.所以我有一个想法在列表视图中的第二个文本视图的末尾放置一些小图像。如果我尝试通过在 xml 中放置一些文本视图并为此设置一些图像意味着另一个 textview(textview 3 ,4) 也是放错地方了。有没有人有任何想法这样做。我也尝试了 spannableimage 但没有得到想要的结果。在此先感谢。

我有什么： 我的列表视图：

```
31/7/2012 | gfdhh  |  78  |   78 
```

我想要的是：

```
31/7/2012  | gfdhh* | 78  |78. 
```

我的代码：（对于列表视图）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    android:id="@+id/Layout1"
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal"
     >     

     <TextView android:id="@+id/text1"      
        android:layout_width="80dip"
        android:layout_height="wrap_content"        
        /> 

     <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

     <TextView android:id="@+id/text3"          
        android:layout_width="60dip"
        android:layout_height="wrap_content"        
        android:layout_marginLeft="30dp"/>

     <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

       <TextView android:id="@+id/text5"            
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        />
       <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView android:id="@+id/text7"           
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        />

          <TextView android:id="@+id/text9"         
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"            
         android:visibility="gone"/>

</LinearLayout> 
```

我尝试的可扩展图像代码：

```
SpannableString ss = new SpannableString(cursor.getString(cursor.getColumnIndex(db.KEY_DESC))); 
                                Drawable d = getResources().getDrawable(R.drawable.up); 
                                d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight()); 
                                ImageSpan span = new ImageSpan(d, ImageSpan.ALIGN_BASELINE); 
                                ss.setSpan(span, 0,cursor.getString(cursor.getColumnIndex(db.KEY_DESC)).length() , Spannable.SPAN_INCLUSIVE_EXCLUSIVE); 
                                text3.setText(ss); 
```

# asp.net - 仅在单击按钮后如何显示正则表达式验证的消息？

> ID：11733893
> 
> 赞同：2
> 
> 时间：2012-07-31T05:47:29.147
> 
> 标签：asp.net, .net, validation

下面是我的html代码。我有一个电子邮件文本框，并且有一个登录按钮。我为电子邮件文本框添加了必填字段验证器和正则表达式验证器。

问题是当我在电子邮件文本框中输入一些内容时，浏览器的自动建议会显示一些电子邮件列表。当我使用向下箭头键和输入键选择任何这些电子邮件时，即使电子邮件格式正确，它也会显示正则表达式验证的错误消息。

```
<asp:RequiredFieldValidator ID="reqValUserName" runat="server" 
    ErrorMessage="Email is required!" 
    ControlToValidate="txtUserName"
    ValidationGroup="validateCredential"
    Display="Dynamic">
</asp:RequiredFieldValidator>
<asp:RegularExpressionValidator ID="regValUserName" runat="server" 
    ErrorMessage="Incorrect format!"
    ControlToValidate="txtUserName" 
    ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
    ValidationGroup="validateCredential"
    Display="Static">
</asp:RegularExpressionValidator>                 

     <asp:TextBox ID="txtUserName" runat="server"
           TabIndex="1" CssClass="inputCredential" MaxLength="60"
           AccessKey="E" 
           ValidationGroup="validateCredential">
     </asp:TextBox>

     <asp:Button ID="btnLogin" runat="server" CssClass="btnPrimary" 
           Text="Login" onclick="btnLogin_Click" 
           ValidationGroup="validateCredential"/> 
```

![在此处输入图像描述](../Images/4e998530d324b02c5da893e5de4febb8.png)

在此图像中，您可以看到如果我从建议中选择电子邮件并按 Enter，它会显示错误的电子邮件验证消息。

谁能告诉我，如何停止这种消息显示？

如果需要对该问题进行任何澄清，请将其添加为评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:20:48.427

您可以将 EnableClientValidation="false" 属性添加到正则表达式验证器，以便它仅在其他验证器通过后检查服务器上的格式。

或者按照这里的建议：

[什么决定了验证器触发的顺序？](https://stackoverflow.com/questions/3252722/what-determines-the-order-validators-fire-in)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:51:56.053

还为电子邮件文本框添加正则表达式验证器

```
<asp:RegularExpressionValidator ID="regtxtPrimaryEmail" runat="server" ControlToValidate="txtEmailId"
                                            Display="Dynamic" CssClass="cssVal" ToolTip="Invalid email." ValidationGroup="registration"
                                            ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"></asp:RegularExpressionValidator> 
```

然后它不会提交，直到电子邮件格式正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:54:34.980

似乎您的某些控件具有`autopostback="true"`并且您的这些控件在更新面板中，如果没有，那么您可以做的是..删除所有验证控件的显示属性和`btnLogin_Click`事件调用`Validate();`方法。

[另请阅读MSDN](http://msdn.microsoft.com/en-us/library/aa479045.aspx)上有关验证器的更多详细信息

你一定会得到你的答案......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T06:21:14.137

感谢您的所有回答和建议。以下是我在完成所有答案后所做的。

```
<asp:RegularExpressionValidator ID="regValUserName" runat="server" 
     ErrorMessage="Incorrect format!"
     ControlToValidate="txtUserName" 
     ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
     ValidationGroup="validateCredential"
     Display="Dynamic" EnableClientScript="false">
</asp:RegularExpressionValidator> 
```

如您所见，我添加了 EnableClientScript="false"，这样当我键入一半电子邮件并从自动建议中选择并按 Enter 时，将不会显示错误消息。

现在的问题是它总是检查输入的凭据是否正确，因为它在服务器端进行验证。所以我有一些不必要的代码执行和数据库交互。

因此，在登录按钮的单击事件处理程序中，我做了以下更改。

```
if(Page.IsValid)
{
     // My credential check code
} 
```

因此，只有在格式正确的情况下，上述代码块才会运行用于检查输入凭据正确性的代码。

但我仍在寻找更好的答案。这只是一种解决方法。因为在性能方面，服务器端验证永远无法匹配客户端验证。在这里，我在可用性方面做出了妥协。因为我希望用户在输入格式错误的电子邮件后立即收到通知。这可以通过使用 javascript 来实现，但我想知道是否有任何方法可以使用验证器控件来实现它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T18:58:44.603

发生这种情况是因为客户端 REV 正在验证部分输入。例如，在上图中，REV 正在验证“r”作为其输入。为了验证这一点，

1.  输入**整个**电子邮件地址“rupeshn@aol.com”>> 然后
2.  使用向下箭头选择建议的电子邮件 >> 然后
3.  按回车键。

REV这次不会抱怨了。

至于解决方案：在javascript中实现REV。在错误消息的文本框旁边添加一个标签。当光标退出文本框时调用js。如果验证失败，在js中找到标签，添加错误信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-01T05:43:10.393

只需查看验证器的属性，您就会在外观部分下找到“显示”属性，将其设置为动态和 VOLA！

# java - GL_NEAREST上的Android OpenGL mag过滤器，小纹理仍然模糊

> ID：11733899
> 
> 赞同：3
> 
> 时间：2012-07-31T05:48:02.080
> 
> 标签：java, android, opengl-es, textures

我正在使用两种大小的纹理 (128x128) 的幂，并将它的一小部分绘制到多边形上（将其用作纹理图集）。我设置了以下内容：

```
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_NEAREST); 
```

然而，结果是仍然模糊在一起的纹理。看起来它正在使用 GL_LINEAR 。

任何想法为什么纹理仍然会变得模糊而不是像素化？

这是一个例子：

![用四种不同的纹理分辨率绘制的字母](../Images/b1ee04704375d6c39f9c0212b965beea.png)

字母 F 是图像的一部分。这里使用 128px、256px、512px 和 1024px 的图像绘制。如您所见，它变得更好，但即使在 1024px 时，它仍然会稍微混合边缘。我应该能够使用 128 像素的图像并使用 GL_NEAREST 将其放大并使其具有清晰的边缘。是什么导致它画成这样？

**编辑**

我已更新应用程序以使用 GLES20，但问题仍然存在。在绑定纹理之后和调用 drawArrays 之前，我尝试使用以下内容，以确保我使用的是 GL_NEAREST：

```
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST); 
```

**编辑 2**

即使不使用地图集，也会出现问题。我在一个四边形上放了一个 8px x 8px png 的图片，结果一团糟。OpenGL ES 2.0 不使用 GL_NEAREST 是否有某些原因？

结果如下：

![在四边形上绘制的 8px x 8px 字母 A](../Images/fd7081d25dd3a7af95197f4d56fc58ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:15:11.323

我相信`glTexParameterf`应该是`glTexParameteri`。您将枚举作为最终参数传递，而不是浮点数。

您是否也在使用 glGetError 检查错误？

还要确保为每个要进行线性采样的纹理设置它。它的状态是每个纹理，而不是全局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:04:47.683

我终于想通了！！！！

这是我加载资源的方式。

我从这个改变：

```
Bitmap bitmap = BitmapFactory.decodeResource(GLRenderer.context.getResources(), textureId); 
```

对此：

```
InputStream is = GLRenderer.context.getResources().openRawResource(textureId);
Bitmap bitmap;
try {
    bitmap = BitmapFactory.decodeStream(is);
} finally {
    try {
        is.close();
    } catch(IOException e) {
        // Ignore.
    }
} 
```

# javascript - 创建window.customizedobject？

> ID：11733901
> 
> 赞同：1
> 
> 时间：2012-07-31T05:48:13.273
> 
> 标签：javascript

我发现一些 js 源使用了它自己的自定义对象。

比如 jQuery 使用`$`, android 可以使用 javascript 接口。

如何制作我的自定义对象？我需要将我的自定义对象添加到窗口对象吗？（喜欢`window.myObject`）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:19:37.437

你不需要明确地这样做..

当你这样做时，`function myFucntion(){... }`你可以称之为`window.myFunction()`

但是对于对象..

```
var myObject = { prop : values } //In your case, { myCustomizedObject : {} }

$.extend(window, myObject); 
```

对于单一财产，你可以做..`window.myProp = "myValue";`

注意：请注意不要意外覆盖预定义窗口属性的值。如：`location`等。

# java - 如果在属性文件中找不到属性，则打印系统属性名称

> ID：11733903
> 
> 赞同：0
> 
> 时间：2012-07-31T05:48:23.883
> 
> 标签：java, properties, jvm

我有 2 个属性文件：

应用程序.properties 配置.properties

这两个字段都包含属性。

我通过在 IBM websphere 服务器中设置系统属性来加载这些字段的属性。

在应用程序启动期间，这两个文件中的所有属性都是通过`ApplicationProperty.java`类加载的。

```
private static Properties applicationProperties = new Properties();

 readPropertyFileOne(...){  
properties.load(new FileInputStream(propertiesLocationOne));
}

readPropertyFileTwo(...){  
    properties.load(new FileInputStream(propertiesLocationTwo));
} 
```

现在在应用程序启动并读取两个文件中的所有属性之后。如果我尝试通过此代码访问文件中的任何属性

```
findNonNullableProperty(String aPropertyName){
        String value = properties.getProperty(aPropertyName);
        if(value == null){
        //print system property name here. Name can be propertiesLocationOne or propertiesLocationTwo. But what is that? I want to know file location.
        }
    } 
```

它返回null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:55:18.470

更新：再次评估您的问题后，我明白这一点：您想从您自己的属性类中获取属性值。如果属性值返回 null，您想知道哪个属性文件拥有密钥并打印出属性文件的名称。

答案是你不能这样做。如果您阅读了属性类的 javadoc，那么 get("KEY_NAME") 方法仅在放入未知键时才返回 null。对于空值，您会得到“”，即空字符串。由于密钥未知，它不能在您的任何一个文件中。您无法决定要打印哪个文件名（或者您必须同时打印两者）。

如果要对空字符串 ("") 执行此操作，则必须在自己的属性类中添加更多信息。java.util.Properties 类使用哈希映射来存储键值对。从文件加载对后，文件名不再可用。因此，您需要将文件名存储在某处。

下一个问题是您将两个文件中的键加载到一个哈希映射中。一旦进入表格，您就无法决定他们从哪个文件中读取。两种可能的解决方案：

1.  您将文件名添加到键中：如果您在属性文件本身中执行此操作很容易，但是您必须知道文件名才能获取值。
2.  您为每个文件持有一个属性：然后当有人询问值时，您必须查看这两个属性。但是，这可以包含在您的 Property 类中，因此用户不知道这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:26:54.900

只需从 System 类中获取属性：

```
public class PrintPropery {
    public static void main(String[] args) {
        System.out.println(System.getProperty("app.property"));
    }
} 
```

# php - 如何在线向 mp3 文件添加详细信息？

> ID：11733905
> 
> 赞同：0
> 
> 时间：2012-07-31T05:48:42.490
> 
> 标签：php, mp3

我的主机中有大量 mp3 文件。（超过 10000 条）我需要在歌曲中添加标题、专辑、艺术家等详细信息/删除歌曲的现有详细信息，但在线本身。因为下载所有歌曲，编辑信息并重新上传歌曲会很安静。

通过PHP的任何可能性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:50:54.440

是的，PHP 会这样做，因为您可以使用这些[ID3 函数](http://www.php.net/manual/en/ref.id3.php)来做到这一点。

寻找`id3_get_tag`和`id3_set_tag`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:17:22.500

ID3v2 操作起来很简单，因为它在文件末尾只有 128 个字节。ID3v1 是文件前面的任意字节数。将 ID3v2 添加到尚无 ID3v2 的文件，或增加现有 ID3v2 标记中的数据量将需要重新复制整个文件。除非您对这些文件具有直接的文件系统级别访问权限（例如通过非 url fopen/fwrite/etc...），否则您必须下载整个文件，添加 id3，然后上传修改后的版本。

# iphone - 如何从sqlite数据库中获取Itmes调用任何其他类中的方法而不是iphone中的appDelegate

> ID：11733914
> 
> 赞同：1
> 
> 时间：2012-07-31T05:49:12.053
> 
> 标签：iphone, xcode, sqlite

我在 QuestionData 中有 getQuestions 方法，如以下签名我希望用户可以在除 appDelagate 之外的其他类中调用此函数如何调用它，因为 getDBPath 在 appDelegate 中声明。

如何在任何其他类中访问此方法

```
[QuestionData getQuestions:[self getDBPath]];

+ (void)getQuestions:(NSString*)dbPath{ 
```

# javascript - 如何在java中取消在javascript中转义的cookie值

> ID：11733915
> 
> 赞同：0
> 
> 时间：2012-07-31T05:49:14.393
> 
> 标签：javascript, jsp, cookies

我`cookie`在一个jsp页面中设置如下。

```
document.cookie = cookieName + "=" + escape("#{myBean.cookieValue}"); 
```

我正在`cookie`使用`request.getCookies();`.

在我的目标 jsp 页面中获取 cookie 的值。但是，在 cookie 中设置的值包含`space`like `31st July 2012`。所以，当我在我的目标 JSP 页面中打印这个 cookie 值时，我得到`31st%20July%202012`.

在我的目标 JSP 页面中，我只想显示确切的初始值，例如`31st July 2012`.

我怎样才能做到这一点？

# php - Kohana 3.2 AJAX 形式令牌不断变化

> ID：11733917
> 
> 赞同：0
> 
> 时间：2012-07-31T05:49:33.393
> 
> 标签：php, ajax, kohana, token

我想在我的 ajax 表单中使用令牌。表单是从生成唯一令牌的 ajax 控制器加载的。然后表单发布到同一个控制器。

但我做错了！当表单被加载然后发布时，会话为空或创建了一个新令牌！我猜这是因为表单和令牌是在进行 ajax 调用时创建的。

这是我所做的：

我将创建令牌函数放在 ajax 控制器的 before() 中，每次 ajax 加载页面时，它都会创建一个永远不会验证的新令牌，因为它总是在变化。

所以然后我将令牌功能移动到主控制器并在那里创建令牌，ajax 控制器不扩展主控制器，它是独立的。因为我认为现在 ajax 调用不会加载令牌函数。相反，ajax 控制器将只获取在 main 处创建的令牌。但是......它是空的

我试过 Session::instance()->get('securitytoken') 它应该访问整个应用程序的所有会话，对吗？

有谁知道我怎样才能做到这一点？或者为什么我无法访问在另一个控制器中创建的会话？

这个测试函数通过ajax获取token

```
class Controller_Ajax extends Controller_Temp{ 
public function action_test(){
$user2 =  Session::instance()->get('securitytoken');
echo $user2; }
} 
```

在我的主控制器中：

```
$token = md5(uniqid(microtime(), true));    

Session::instance()->set('securitytoken', $token); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:11:27.937

在你的视野中：

```
<?php echo Form::hidden('csrf', Security::token()) ?> 
```

现在在您的控制器中，通过验证库检查：

```
<?php

$post = Validation::factory($_POST)
    ->rule('name', 'not_empty')
    ->rule('email', 'not_empty')
    ->rule('email', 'email')
    ->rule('csrf', 'not_empty')
    ->rule('csrf', 'Security::check')
;
if($post->check()) { ... }
?> 
```

# c - 如何在创建多维数组后一次将多个值分配给多维数组 - 在 C 中？

> ID：11733919
> 
> 赞同：2
> 
> 时间：2012-07-31T05:49:50.573
> 
> 标签：c, arrays, multidimensional-array, assign, multiple-value

我正在用 C 编程，想知道是否可以一次将多个值分配给多维数组？我尝试了一些技术，但都失败了！我对遍历数组来分配值不感兴趣（我想要一种快速的方式来为数组中的所有索引分配新值）。我正在使用的数组：ary[4][4]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:04:12.070

来自另一个的 memcpy 将覆盖已经存在的内容`ary`。

```
int ary[4][4];
int another[4][4] = {{1,2,3,4}, {5,6,7,8}, {1,2,3,4}, {5,6,7,8}};
memcpy(ary, another, 4 * 4 * sizeof(int)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:56:16.613

由于数组不是可修改的左值，因此它不能出现在赋值的左侧。您可以对其进行初始化，并且可以通过索引分配单个成员。

> 6.3.2.1
> 
> 可修改的左值是没有数组类型的左值，没有...

和一个可修改的`lvalue`：

> 名称“左值”最初来自赋值表达式 E1 = E2，其中要求左操作数 E1 是（可修改的）左值。

所以不，你不能做你想做的事。

# matplotlib - 在 wxPython 面板中选择时，Matplotlib 工具栏图标消失

> ID：11733926
> 
> 赞同：0
> 
> 时间：2012-07-31T05:50:24.333
> 
> 标签：matplotlib, wxpython, toolbar

我在 wx.Frame（或 wx.Panel）的 Matplotlib Figure 画布中使用 Matplotlib NavigationToolbar2Wx 间歇性地遇到了这种行为。如果选择了缩放图标或平移图标，图标会消失，但在空白处单击仍会切换工具。Home、Backward 步骤或 Forward 步骤的图标都按预期运行。

任何人都可以就 1\. 是什么原因和 2\. 如何解决它提供建议吗？

感谢 joaquin 发布了稍微修改以包含工具栏的初始代码。（http://stackoverflow.com/questions/10737459/embedding-a-matplotlib-figure-inside-a-wxpython-panel）

我正在使用 python 2.6、wxPython 2.9.2.4 osx-carbon（经典）和 Matplotlib 1.1.0

谢谢

下面的代码显示了问题：

```
 #!/usr/bin/env python
    # encoding: UTF-8
    """
    wxPython and Matplotlib Canvas with Matplotlib Toolbar.py

    """
    from numpy import arange, sin, pi
    import matplotlib
    matplotlib.use('WXAgg')

    from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas
    from matplotlib.backends.backend_wx import NavigationToolbar2Wx
    from matplotlib.figure import Figure

    import wx

    class CanvasPanel(wx.Panel):
        def __init__(self, parent):
            wx.Panel.__init__(self, parent)
            self.figure = Figure()
            self.axes = self.figure.add_subplot(111)
            self.canvas = FigureCanvas(self, -1, self.figure)
            # Add Matplotlib Toolbar
            # Add the Matplotlib Navigation toolBar here
            self.toolbar=NavigationToolbar2Wx(self.canvas)
            self.toolbar.AddLabelTool(5,'',wx.ArtProvider.GetBitmap(wx.ART_FILE_OPEN, wx.ART_TOOLBAR, (32,32)))
            #self.Bind(wx.EVT_TOOL, self.NewTitle(), id=5)
            self.toolbar.Realize()      

            # Add to Box Sizer
            self.sizer = wx.BoxSizer(wx.VERTICAL)
            self.sizer.Add(self.toolbar, 0, wx.LEFT | wx.TOP | wx.GROW)
            self.sizer.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
            self.SetSizer(self.sizer)
            self.Fit()

        def draw(self):
            t = arange(0.0, 3.0, 0.01)
            s = sin(2 * pi * t)
            self.axes.plot(t, s)

    if __name__ == "__main__":
        app = wx.PySimpleApp()
        fr = wx.Frame(None, title='test',size=(800,600))
        panel = CanvasPanel(fr)
        panel.draw()
        fr.Show()
        app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:29:08.463

我无法评论这个特定问题的原因，但我在使用 wxpython 2.9 的非 Agg 后端也遇到了一些问题（而代码在 2.8 中运行良好）。用 Agg 版本替换工具栏为我解决了这些问题；例如：

```
from matplotlib.backends.backend_wx import NavigationToolbar2Wx 
```

==>

```
from matplotlib.backends.backend_wxagg import NavigationToolbar2WxAgg 
```

并相应地调整代码：

```
self.toolbar=NavigationToolbar2Wx(self.canvas) 
```

==>

```
self.toolbar = NavigationToolbar2WxAgg(self.canvas) 
```

hth, vbr

# sql - ORA 00932: 尝试查看表内容时，预期 NUMBER 出现 BLOB 错误

> ID：11733931
> 
> 赞同：0
> 
> 时间：2012-07-31T05:50:32.880
> 
> 标签：sql, oracle, oracle10g, blob

我编写了一个 servlet 程序来将图像上传到 Oracle 表。我使用的是 Oracle 10g 版本。

我使用创建表

```
create table insertimage( image BLOB); 
```

表创建成功。我的 servlet 显示图片上传成功。即使我删除使用

```
delete from insertimage; 
```

它显示成功的行删除。

但是当我尝试使用查看表格内容时

```
select * from insertimage; 
```

它给了我

```
ORA-00932: inconsistent datatypes: expected NUMBER got BLOB error. 
```

那么如何直接在Oracle表中查看图片是否上传成功呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:10:08.303

有很多第三方 IDE 可供您使用 - 一个不错的免费 IDE 是 Oracle 自己的[SQL Developer](http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/index.html)

双击对象树中的表。在“数据”选项卡上，单击带有 BLOB 列的“...”按钮，然后单击“查看为图像”复选框

# google-maps - Gmap3 在不破坏整个地图的情况下应用新的中心位置

> ID：11733933
> 
> 赞同：3
> 
> 时间：2012-07-31T05:50:52.253
> 
> 标签：google-maps, jquery-gmap3

我正在使用 gmap3 设法使第一个任务正常工作。使用纬度显示地图。

我的 javascript 看起来像

```
 $('#map_canvas').gmap3(
                    {
                        action: 'init',
                        options: {
                            center: [x,y],
                            zoom: 12,
                            mapTypeId: google.maps.MapTypeId.ROADMAP,
                            mapTypeControlOptions: {
                                mapTypeIds: []
                            }
                        }
                    },
                    {
                        action: 'addMarkers',
                        radius: 100,
                        markers: GetMarkers(),
                        clusters:
                        {
                            0:
                                {
                                    content: '<div class="cluster cluster-3">CLUSTER_COUNT <div class="cluster-3text">Stops</div> </div>',
                                    width: 66,
                                    height: 65
                                }
                        },
                        marker:
                        {
                            options:
                            {
                                icon: new google.maps.MarkerImage('../img/marker.png', size, origin, null, null)
                            },
                            events:
                            {
                                mouseover: function (marker, event, data) {
                                                                        getArrivalsAndStop(marker, event, data);
                                },
                                mouseout: function () {
                                    $(this).gmap3({ action: 'clear', name: 'overlay' });
                                }
                            }
                        }
                    }); 
```

这会加载我想要的地图。我的下一步是能够应用新的纬度和经度。我怎样才能在不破坏整个地图并每次都重新创建它的情况下做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T16:51:59.867

我正在使用[jquery gmap3 插件](http://gmap3.net/en/)。

如果您想在初始化地图并且不重新加载整个内容后调用 setCenter ，您可以这样做：

```
$('#mymap').gmap3('get').setCenter(new google.maps.LatLng(48.706685,-3.486694899999975)) 
```

$('#mymap').gmap3('get') 是这里的神奇之处，它为您提供了我认为的真正的谷歌地图对象。

我很难找到这个，所以我希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:05:56.800

从[文档中：](http://gmap3.net/documentation.html)

> 这个例子使用地址解析的结果执行map.setCenter，没有指定目标，因为这是地图。

```
$('#test').gmap3(
{ 
  action: 'getLatLng',
  address: '2 bis rue saint antoine, eguilles',
  callback: function(result){
    if (result){
      $(this).gmap3({action: 'setCenter', args:[ result[0].geometry.location ]});
    } else {
      alert('Bad address 2 !');
    }
  } 
```

});

所以看起来如果你知道坐标并且不需要使用地理编码器，它会是：

```
 $(this).gmap3({action: 'setCenter', args:[ new google.maps.LatLng(latitude, longitude) ]}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-21T04:05:24.457

有点晚了，但我使用的是列表和地图（谷歌地图类型）。希望能帮助到你

这是我实现它的方法

```
$(document).delegate('#inner_list li', 'click', function () {
var id = $(this).attr('data-id');

$("#map-canvas").gmap3({
    get: {
        name:"marker",
        id: id,
        all: true,
            callback: function(objs){
                $.each(objs, function(i, obj){
                obj.setIcon("http://www.markericon.com");
                var newLL = obj.getPosition()
                $('#map-canvas').gmap3('get').panTo(newLL)

                });
            }
  }
}); 
```

});

# c# - 如何将asp.net c#中的日期时间属性插入到sql server中的日期列？

> ID：11733936
> 
> 赞同：0
> 
> 时间：2012-07-31T05:50:54.890
> 
> 标签：c#, asp.net, sql-server, sql-server-2008-r2

我在使用日历控件时遇到问题..我在文本框中获取日期...我必须将其插入数据库..使用 asp.net 和 c#

在我的 Web 应用程序中，字段属性设置为`datetime`，在表中，列的数据类型为`date`..

我怎样才能做到这一点？？

我得到的错误是：

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。该语句已终止。

有人可以在这方面帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:57:26.190

> 我得到的错误是：将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

听起来您正试图将其作为字符串插入，这通常是一个坏主意。您应该使用参数化 SQL 并将值设置为参数，仍然是 .NET `DateTime`。[`SqlCommand.Parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)有关参数化 SQL 的示例，请参阅文档。您应该尽可能长时间地保持数据的自然类型。

当然，如果您尝试插入一个超出 SQL 可以存储范围的值，您*仍然可能会收到此错误。*`DateTime`特别是，我认为 SQL 的下限为 1753 作为年份。如果您的价值是`DateTime.MinValue`出于某种原因（1 月 1 日，公元 1 日），那么您仍然会遇到这个问题。您是否为尝试插入的值添加了诊断信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:16:47.733

对不起，我的第一个答案错过了你的问题。尝试使用标准参数系统添加参数。

command.CommandText = "插入到 FooTable (FooDate) 值 (@FooDate)"; command.Parameters.AddWithValue("@FooDate", DateToUse.Date);

使用 .Date 只会返回对象的日期部分。这是另一个对它的引用[Date vs DateTime](https://stackoverflow.com/questions/798121/date-vs-datetime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:18:16.967

如果您使用的是**参数化查询**，我可以毫不费力地将它`DateTime`从 ASP.NET 日历控件插入到包含类型列的 SQL Server 数据库表中`DATE`。

使用这样的东西：

```
// define INSERT statement - of course, yours will look quite different!
string insertStmt = "INSERT INTO dbo.DateTest(TheDate) VALUES(@DateValue);";

// set up connection and SqlCommand to do insert
using(SqlConnection conn = new SqlConnection("....your-connection-string-here...."))
using (SqlCommand cmd = new SqlCommand(insertStmt, conn))
{
     // add the parameters - the @DateValue - to the SqlCommand object and
     // define it's datatype (on the database) and set the value to be stored
     cmd.Parameters.Add("@DateValue", SqlDbType.Date).Value = Calendar1.SelectedDate;

     // open connection, execute command, close connection
     conn.Open();
     cmd.ExecuteNonQuery();
     conn.Close();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-31T06:09:02.327

首先尝试一件事，尝试在列中插入 01/01/2012，因为这可能是由于错误的文化......它可能是 mm/dd/yyyy 或 dd/mm/yyyy

先试试这个 2012 年 1 月 1 日，看看这是否有效。

谢谢

# c# - 查询字符串在启用分页的网格视图中不起作用。

> ID：11733938
> 
> 赞同：0
> 
> 时间：2012-07-31T05:50:58.300
> 
> 标签：c#, asp.net

当用户单击网格上的 RegionProjectName 字段时，我试图从查询字符串中传递网格的 RegionProjectID 列。我已将 RegionProjectname 作为超链接，您还可以在下面找到代码。但这不起作用。请建议我或帮助说明它为什么不起作用。在我的网格视图中也启用了分页。

```
<asp:GridView ID="ResultGridView" runat="server" AutoGenerateColumns="False" ShowFooter="true"
    DataKeyNames="RegionProjectID" 
    AllowPaging="True" 
    CellPadding="3" 
    OnPageIndexChanging="ResultGridView_PageIndexChanging" 
    OnRowDeleting="ResultGridView_RowDeleting" 
    CssClass="mGrid"
    OnRowEditing="ResultGridView_RowEditing" 
    OnRowUpdating="ResultGridView_RowUpdating" 
    OnRowCancelingEdit="ResultGridView_RowCancelingEdit" 
    PageSize="15" BackColor="#DEBA84" BorderColor="#DEBA84" BorderStyle="None" BorderWidth="1px" CellSpacing="2"
     OnRowCommand="ResultGridView_RowCommand" >
        <Columns>
            <asp:BoundField DataField="RegionProjectID" HeaderText="Region ID" InsertVisible="False"
                ReadOnly="True" SortExpression="RegionProjectID" Visible="false" />
            <asp:TemplateField HeaderText="Region Name" SortExpression="RegionProjectName">
                <EditItemTemplate>
                    <asp:TextBox ID="txtRegion" Width="250px" runat="server" Text='<%# Bind("RegionProjectName") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                <asp:TextBox ID="txtRegion1" runat="server"  Width="250px"></asp:TextBox> 
                </FooterTemplate>
                <ItemTemplate>
                   <asp:LinkButton ID="LinkButton3" CommandName="Details" CommandArgument='<%# Eval("RegionProjectID") %>' Text='<%# Bind("RegionProjectName") %>' runat="server" /> 
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Edit" ShowHeader="False"> 
            <EditItemTemplate> 
              <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton> 
              <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton> 
            </EditItemTemplate> 
            <FooterTemplate> 
              <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="AddNew" Text="Add New"></asp:LinkButton> 
            </FooterTemplate> 
            <ItemTemplate> 
              <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton> 
            </ItemTemplate> 
            </asp:TemplateField> 
            <asp:CommandField HeaderText="Delete" ShowDeleteButton="True"  ShowHeader="True" /> 
           <%-- <asp:CommandField HeaderText="Select" ShowSelectButton="True"  ShowHeader="True"/> --%>

        </Columns>
        <RowStyle BackColor="#FFF7E7" ForeColor="#8C4510" />
        <FooterStyle BackColor="#F7DFB5" ForeColor="#8C4510" />
        <PagerStyle ForeColor="#8C4510" HorizontalAlign="Center" />
        <%--<SelectedRowStyle BackColor="#738A9C" Font-Bold="True" ForeColor="White" />--%>
        <HeaderStyle BackColor="#A55129" Font-Bold="True" ForeColor="White" />
    </asp:GridView>`

protected void ResultGridView_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Details")
        {
            Server.Transfer("Default3.aspx?ID=" + e.CommandArgument.ToString()); 

        } 

        if (e.CommandName.Equals("AddNew"))
        {

            TextBox txtRegion1 = (TextBox)ResultGridView.FooterRow.FindControl("txtRegion1");
            TextBox txtNatureOFWork1 = (TextBox)ResultGridView.FooterRow.FindControl("txtNatureOFWork1");
            if (txtRegion1.Text != "")
            {
                cmd.Connection = conn;
                cmd.CommandText = "INSERT INTO RegionAndProjectInfo(RegionProjectName, NatureOFWorkID ) Values('" + txtRegion1.Text + "', '" + ddlnatureOfWork.SelectedValue.ToString() + "')";
                conn.Open();
                cmd.ExecuteNonQuery();
            }
            FillVendorGrid();
            conn.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:58:35.767

你必须使用

`Response.Redirect("Default3.aspx?ID=" + e.CommandArgument.ToString());`

而不是服务器传输，因为服务器传输与 Response.Redirect 相比做了不同的事情。

Server.Transfer 方法还有第二个参数——“preserveForm”。如果将此设置为 True，请使用如下语句

```
`Server.Transfer("Default3.aspx?ID=" + e.CommandArgument.ToString()`, True); 
```

，现有的查询字符串和任何表单变量仍可用于您要转移到的页面。

它更多的是文件传输，而不是重定向

[http://msdn.microsoft.com/en-us/library/ms525800%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms525800%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:03:03.140

```
<ItemTemplate>
                   <asp:hyperlink id="LinkButton3" navigateurl='<%# "Default3.aspx?ID=" + Eval("RegionProjectID")%>' text='<%# Bind("RegionProjectName")%>' runat="server" />  
                </ItemTemplate> 
```

我已经更新了 Regionprojectname 的 itemtemplate ，现在得到了 query string 。

# java - 如何在 struts2+hibernate 应用程序中使用 log4j 创建日志文件？

> ID：11733940
> 
> 赞同：1
> 
> 时间：2012-07-31T05:51:03.090
> 
> 标签：java, logging, log4j

我正在使用 Struts2，hibernate web 应用程序。在该文件上，我在 pom.xml 中使用了 log4j 的以下依赖项

```
 <dependency>
 <groupId>log4j</groupId>
 <artifactId>log4j</artifactId>
 <version>1.2.9</version>
 </dependency> 
```

在我的 Actionclass 中，我使用以下代码编写日志文件：

```
 public class loginAction extends action{
     static Logger log = Logger.getLogger(com.action.LoginAction.class);

     public String checklogin(){
          log.debug("Debug Message(LOGIN)!");
      log.info("Info Message(LOGIN)!");
      log.warn("Warn Message(LOGIN)!");
      log.error("Error Message(LOGIN)!");
      log.fatal("Fatal Message(LOGIN)!");

           //my coding for checking logged status.
     } 
 } 
```

我已使用以下代码将 log4j.properties 文件放在 WEB-INF/classes 文件夹下，

```
 log4j.appender.file=org.apache.log4j.RollingFileAppender
 log4j.appender.file.File=C\:\\logfile.log
 log4j.appender.file.MaxFileSize=10MB
 log4j.appender.file.layout=org.apache.log4j.PatternLayout
 log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 

  # Root logger option
  log4j.rootLogger=debug, file 
```

当我在服务器上运行和部署此应用程序时，属性文件被放置在正确的路径中。但是在操作类中运行语句后，log4j.properties 文件没有任何影响。我不知道我哪里做错了。

所以请任何人帮助我找到这个问题。提前致谢。

# objective-c - UISegmentedControl 事件无法正常工作

> ID：11733949
> 
> 赞同：1
> 
> 时间：2012-07-31T05:51:47.250
> 
> 标签：objective-c, ipad, uisegmentedcontrol

我目前正在使用带有 2 个选项的 UISegmentedControl。我已经在 -(void)viewDidLoad 中定义了它：

```
_segmentSelector = [[UISegmentedControl alloc] initWithItems:_selectorItems];
_segmentSelector.frame = CGRectMake(40, 356, 200, 43);
_segmentSelector.segmentedControlStyle = UISegmentedControlStyleBezeled;
_segmentSelector.selectedSegmentIndex = 0; 
[_segmentSelector addTarget:self  
                     action:@selector(selectorValueChanged)
           forControlEvents:UIControlEventValueChanged]; 
```

的动作`@selector(selectorValueChanged)`如下：

```
 - (void)selectorValueChanged
 {
     if(_segmentSelector.selectedSegmentIndex=1)
     {

     }
     if(_segmentSelector.selectedSegmentIndex=0)
     {

     }
 } 
```

我的问题是，当我运行模拟并单击一个按钮，然后尝试单击另一个按钮时，SegmentedControl 没有响应。它停留在选择上并拒绝接受另一个点击/单击/我命令它执行的任何操作。它有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:02:29.503

在`selectorValueChanged`中，您为选定的段索引分配新值：

```
if (_segmentSelector.selectedSegmentIndex = 1) 
```

你可能的意思

```
if (_segmentSelector.selectedSegmentIndex == 1) 
```

# android - Android 应用程序在 4G 互联网连接上崩溃，但仅在 GSM 模式下工作正常

> ID：11733953
> 
> 赞同：0
> 
> 时间：2012-07-31T05:52:11.727
> 
> 标签：android, networking, 4g

我创建了一个 android 应用程序，用户使用 Http Post 和 Get 调用从 Web 服务器读取和写入数据。也没有什么太华而不实的。我的手机/SIM 卡有 4G。每次应用程序尝试连接时，事情都会变得很慢，而且大多数情况下应用程序都会崩溃。所以我将设置更改为仅 GSM。你猜怎么着？该应用程序工作得更好。可能的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:46:22.623

使用以下方法来检测客户可以使用的所有可用网络类型：

```
public static boolean checkNetworkRechability(Context context) {
        Boolean bNetwork = false;
        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

        for (NetworkInfo networkInfo : connectivityManager.getAllNetworkInfo()) {
            int netType = networkInfo.getType();
            int netSubType = networkInfo.getSubtype();

            if (netType == ConnectivityManager.TYPE_WIFI) {
                bNetwork = networkInfo.isConnected();
                if (bNetwork == true)
                    break;
            } else if (netType == ConnectivityManager.TYPE_MOBILE && netSubType != TelephonyManager.NETWORK_TYPE_UNKNOWN) {
                bNetwork = networkInfo.isConnected();
                if (bNetwork == true)
                    break;
            } else {
                bNetwork = false;
            }
        }
        if (!bNetwork) {
            Log.i(TAG, "You are not in network");
        }
        Log.i(TAG, "bNetwork : " + bNetwork);
        return bNetwork;
    } 
```

# bash - 用于每 5000 段更改 wput 上传目录的 bashscript

> ID：11733954
> 
> 赞同：1
> 
> 时间：2012-07-31T05:52:15.027
> 
> 标签：bash, shell

我如何在每 5000 个段落上更改 wput 的上传目录？我的代码有什么问题？

仅作记录；我需要无限循环，我想 24 小时 365 天运行这个脚本！每 5000 个段落在目录中增加一个数字，例如incoming1-infinite

此致

豪格

```
#!/bin/bash
for (( ; ; ))
do
  no=1
  while [ $no -le 5000 ]
  do
    perl job.pl false false 1
    cd comp

    for fname in *.jpg;
    do
      mv -i "$fname" ${RANDOM}${RANDOM}.jpg
    done

    for fname in *.jpg;
    do
      mv "$fname" $(echo "$fname" | sha1sum | cut -f1 -d' ').jpg
    done

    if [ $no = '5000' ]
    then
      echo $no
      echo $n
      n=$(( n+1 )) # <-- this one not do what i need :-(

    else
      wput *.jpg ftp://user:pass@ip:port/incoming$n/  # <-- here is the important part 2, i need it to change one directory higher every 5000 passage for example; incoming1 until   infinite       
      rm  -rf *.jpg
      cd ..
    fi

    no=`expr $no + 1`
  done
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:11:37.287

只需在无限循环中放置一个执行 5,000 次的 for 循环（它可以为您跟踪目录序列号）：

```
#!/bin/bash
for (( n=0; ; n++ )); do
  for (( no=1; no < 5000; no++ )); do
    perl job.pl false false 1
    ( # Subshell so we don't have to worry about returning
      # to the previous directory.
      cd comp

      # No need to rename each file twice.
      for fname in *.jpg; do
        mv "$fname" $(echo "${RANDOM}${RANDOM}.jpg" | sha1sum | cut -f1 -d' ').jpg
      done

      wput *.jpg ftp://user:pass@ip:port/incoming$n
    )
  done      
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:59:09.423

只需计算除以 5000 的余数，如果它等于 0（或 1 或任何 < 5000），则执行您需要的操作。

```
if [ $((no%5000)) = 0 ]
then
...
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:54:39.443

```
cd comp
for ((no=1; ; no++))
do
  n=`expr $no / 5000`

  perl job.pl false false 1

  for fname in *.jpg;

  # ... rest of the script
done 
```

# ruby - bash：规范：找不到命令

> ID：11733956
> 
> 赞同：3
> 
> 时间：2012-07-31T05:52:30.390
> 
> 标签：ruby, rspec

我安装了`rspec`宝石。我收到以下消息

```
Successfully installed rspec-2.11.0
1 gem installed
Installing ri documentation for rspec-2.11.0...
Installing RDoc documentation for rspec-2.11.0... 
```

但是当我跑步时

```
 spec path/to/file.rb 
```

我明白了

```
-bash: spec: command not found 
```

对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T05:54:40.107

我认为你应该跑

```
rspec path/to/file.rb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:57:49.230

首先尝试使用`rspec`而不是仅仅`spec`

其次，试试这个 export PATH=$PATH:/path/to/gems/bin

显然用正确的路径替换虚拟路径，指向您的 gem 安装路径中的 bin 目录。例如，我的是`~/.rvm/gems/ruby-1.9.3-p194/bin`

# linux - 在网页上返回域的 Linux 脚本

> ID：11733957
> 
> 赞同：0
> 
> 时间：2012-07-31T05:52:30.307
> 
> 标签：linux, bash

我的任务是处理这个问题：编写一个 bash 脚本，将 URL 作为其第一个参数，并在 URL 的 HTML 中打印出每个主机/域的链接数的统计信息。

因此，例如给定一个像 www.bbc.co.uk 这样的 URL，它可能会打印出类似的东西

```
www.bbc.co.uk: 45
bbc.com: 1
google.com: 2
Facebook.com: 4 
```

也就是说，它应该分析页面的 HTML，拉出所有链接，检查 href 属性，确定哪些链接是指向同一个域的（当然是指那个），哪些是外来的，然后为本地的和远程的。

规则：您可以在脚本中使用任何一组标准 Linux 命令。您不得使用任何高级编程语言，例如 C、Python 或 Perl。但是，您可以使用 awk、sed 等。

我想出了如下解决方案：

```
#!/bin/sh

echo "Enter a url eg www.bbc.com:"
read url
content=$(wget "$url" -q -O -)
echo "Enter file name to store URL output"
read file
echo $content > $file
echo "Enter file name to store filtered links:"
read links
found=$(cat $file | grep -o -E 'href="([^"#]+)"' | cut -d'"' -f2 | sort | uniq | awk '/http/' > $links)
output=$(egrep -o '^http://[^/]+/' $links | sort | uniq -c > out)
cat out 
```

然后我被告知“我必须查看数据，然后检查您的程序是否能够令人满意地处理所有场景。这会报告 URL，但没有域”是否有人可以帮助我或为我指明正确的方向这样我才能实现我的目标？我错过了什么或脚本没有做什么？我以为我已经让它按要求工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:58:56.453

您的脚本的输出是：

```
 7 http://news.bbc.co.uk/
      1 http://newsvote.bbc.co.uk/
      1 http://purl.org/
      8 http://static.bbci.co.uk/
      1 http://www.bbcamerica.com/
     23 http://www.bbc.com/
    179 http://www.bbc.co.uk/
      1 http://www.bbcknowledge.com/
      1 http://www.browserchoice.eu/ 
```

我认为他们的意思是它应该看起来更像：

```
 7 news.bbc.co.uk
      1 newsvote.bbc.co.uk
      1 purl.org
      8 static.bbci.co.uk
      1 www.bbcamerica.com
     23 www.bbc.com
    179 www.bbc.co.uk
      1 www.bbcknowledge.com
      1 www.browserchoice.eu 
```

# android - 如何让 Qualcomm Snapdragon 的示例项目在 Android 模拟器上运行？

> ID：11733958
> 
> 赞同：0
> 
> 时间：2012-07-31T05:52:36.330
> 
> 标签：android, eclipse, sdk

我正在尝试[Qualcomm Snapdragon SDK](https://developer.qualcomm.com/mobile-development/mobile-technologies/snapdragon-sdk-android/download)。我在带有 ADT 的 Eclipse 中成功地编译和构建了示例项目，例如音频 SDK 示例。

此外，我根据高通网站上给出的指南在 SDK 管理器中安装了高通 SDK 包。我使用 Qualcomm 自定义目标运行项目（在配置虚拟设备时，您可以指定 Qualcomm 作为目标，而不是原生 API 15 等）。

但是根据应用程序的运行输出，应该可用的功能都显示为“不受支持”。

# svn - 在处理同一个文件时如何使用svn？

> ID：11733965
> 
> 赞同：1
> 
> 时间：2012-07-31T05:53:20.210
> 
> 标签：svn

当两个程序员在同一个项目中处理同一个文件时如何使用svn？一个程序员是否需要等待其他程序员对该文件提交他的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:00:26.890

**一个程序员是否需要等待其他程序员对该文件提交他的工作？**

确保两个或多个开发人员可以同时处理同一个文件是任何 VCS 的目的之一。大多数现代 VCS，包括 SVN，都提供了非常先进的冲突解决机制。

如果您碰巧正在处理同一个文件，更改与您的同行/s 相同的行 - 您可以轻松解决它。

如果您在同一个文件中处理不同的地方，SVN 将可靠而优雅地合并更改。

所以，*别担心；并且不要停止编写代码，以为其他人可能正在编辑它。*:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:08:36.443

我怀疑你是否尝试过阅读 SVN 的基础知识

[http://svnbook.red-bean.com/en/1.7/svn.basic.version-control-basics.html#svn.basic.vsn-models.copy-merge](http://svnbook.red-bean.com/en/1.7/svn.basic.version-control-basics.html#svn.basic.vsn-models.copy-merge)

这是在 SVN 官方参考的一节中讨论的内容。

# jquery - 通过带有原始文本的标签过滤内容

> ID：11733969
> 
> 赞同：0
> 
> 时间：2012-07-31T05:53:34.977
> 
> 标签：jquery, filter, tags, html-lists

我正在尝试创建一个过滤器/标记系统。这个[答案](https://stackoverflow.com/questions/2703961/filtering-content-jquery)效果很好，但使用类而不是原始文本。大多数 jquery 排序/过滤似乎都使用类，我想使用原始文本。

我的html是这样设置的。

```
<div class="pin">
<img src="/thumbnail.jpg" >
<span>10.08.12</span>
<ul>
<li>Red</li>
<li>Green</li>
<li>Blue</li>
<li>Yellow</li>
</ul>
</div> 
```

标签在`.li`元素内，但我希望它们成为过滤内容页面的链接。

```
<div class="pin">
<img src="/thumbnail.jpg" >
<span>10.08.12</span>
<ul>
<li><a href="#">Red</a></li>
<li><a href="#">Green</a></li>
<li><a href="#">Blue</a></li>
<li><a href="#">Yellow</a></li>
</ul>
</div> 
```

什么是仅显示`.pin`基于他们是否具有特定列表项的最佳方法。例如，单击`<li><a href="#">Red</a></li>`将过滤`.pin`列表项为 的所有 div `Red`。

*编辑：*

我正在研究[:contains()](http://api.jquery.com/contains-selector/)选择器。这合适吗？

`.each`onclick 看看里面`.pin`是否包含`<.li>Red</li>` `.show`父 div？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:12:27.227

这可能会满足您的需求...它仅使用 jquery 来遍历元素，因此对“原始文本”本身进行测试...

```
$(".pin a").click(function () {
    var lookingFor = $(this).text();
    $('.pin').hide();
    $('.pin li a').each(function (idx) {
        var $el = $(this);
        if ($el.text() === lookingFor) {
            $el.closest(".pin").show();
        }
    });
}); 
```

编辑：基于 jsFiddle，这无需添加锚标签即可工作（我同意海报，如果你可以只使用`cursor:pointer;`CSS，锚标签是不必要的。

```
$(".pin li").click(function() {
    var lookingFor = $(this).text();
    $('.pin').hide()
    $('.pin:contains(' + lookingFor + ')').show();
}); 
```

如果您必须有锚标签，则可以执行以下操作：

```
$(".pin a").click(function() {
    var lookingFor = $(this).text();
    $('.pin').hide()
    $('.pin:contains(' + lookingFor + ')').show();
}); 
```

不确定哪个会更快...

（第二次编辑：对“lookingFor”变量使用了错误的文本......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:16:31.560

工作示例：

[http://jsfiddle.net/gVpqx/](http://jsfiddle.net/gVpqx/)

但是，我真的建议使用类，这样更可靠。我放弃了插入`a`，因为它没有任何作用，只需在 上使用一个`cursor: pointer`阶梯就可以了`li`。

```
$(document).ready(function()
             {
             $("li").each(function(x){
                 $(this).click(function()
                     {
                     var tagval = $(this).html();
                     filterDivs(tagval);
                     });       
                 });

             $("#showall").click(function(){$(".pin").show();});             
             });

function filterDivs(tag)
         {
         $(".pin").each(function(x)
                   {
                   var ch = $(this).children("ul").children();
                   var tagfound = false;
                       console.log(ch.length);
                   for (c=0; c<ch.length; c++)
                       {
                       if ($(ch[c]).html() == tag)
                           {
                           tagfound = true;
                           break;
                           }
                       }
                   if (tagfound)
                       $(this).show();
                   else
                       $(this).hide();                               
                   });
         } 
```

# asp.net - 如何将此 ListView 作为一个两列表？

> ID：11733970
> 
> 赞同：0
> 
> 时间：2012-07-31T05:53:34.747
> 
> 标签：asp.net, listview

我是一名新的 ASP.NET 开发人员，我正在努力获取我正在处理的 ListView，如下图所示：

![在此处输入图像描述](../Images/30ee0a6e8ffb39d2274457e32540fba6.png)

**怎么做？**

我的 ASP.NET 代码：

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource1" >
                    <ItemTemplate>
                        <tr style="">
                            <td>
                                <p>
                                <asp:Label ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' />
                                </p>
                            </th>
                            <td>
                                <p>
                                <asp:Label ID="UsernameLabel" runat="server" 
                                    Text='<%# Eval("Username") %>' />
                                </p>
                            </td>
                            <td>
                                <p>
                                <asp:Label ID="JobTitleLabel" runat="server" Text='<%# Eval("JobTitle") %>' />
                                </p>
                            </td>
                            <td>
                                <p>
                                <asp:Label ID="DivisionLabel" runat="server" Text='<%# Eval("DivisionName") %>' />
                                </p>
                            </td>
                            <td>
                                <p>
                                <asp:Label ID="RoleLabel" runat="server" Text='<%# Eval("RoleName") %>' />
                                </p>
                            </td>
                        </tr>
                    </ItemTemplate>

                    <LayoutTemplate>
                        <table id="Table2" runat="server">
                            <tr id="Tr5" runat="server">
                                <td id="Td4" runat="server">
                                    <table ID="itemPlaceholderContainer" runat="server" border="1" style="">
                                        <tr id="Tr6" runat="server">
                                            <td id="Td6" runat="server" colspan="3">
                                                <center>Personal Information</center>
                                            </td>
                                        </tr>
                                        <tr id="Tr9" runat="server" style="">
                                            <th id="Th3" runat="server">
                                                Name</th>
                                        </tr>
                                        <tr id="Tr10" runat="server">
                                            <th id="Th4" runat="server">
                                                Username</th>
                                        </tr>
                                        <tr id="Tr11" runat="server">
                                            <th id="Th5" runat="server">
                                                JobTitle</th>
                                        </tr>
                                        <tr id="Tr12" runat="server">
                                            <th id="Th6" runat="server">
                                                Badge Number</th>
                                        </tr>
                                        <tr id="Tr13" runat="server">
                                            <th id="Th7" runat="server">
                                                Division</th>
                                        </tr>
                                        <tr id="Tr14" runat="server">
                                            <th id="Th8" runat="server">
                                                Role</th>
                                        </tr>
                                        <tr ID="itemPlaceholder" runat="server">
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr id="Tr8" runat="server">
                                <td id="Td7" runat="server" style="">
                                    <asp:DataPager ID="DataPager1" runat="server" PageSize="5">
                                        <Fields>
                                            <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" 
                                                ShowNextPageButton="False" ShowPreviousPageButton="False" />
                                            <asp:NumericPagerField />
                                            <asp:NextPreviousPagerField ButtonType="Button" ShowLastPageButton="True" 
                                                ShowNextPageButton="False" ShowPreviousPageButton="False" />
                                        </Fields>
                                    </asp:DataPager>
                                </td>
                            </tr>
                        </table>
                    </LayoutTemplate>

                </asp:ListView> 
```

我现在得到的是在左列上列出标题或标题，并将它们下面的检索值列在一个中，而不是用标题显示每个值。这是我现在得到的快照：

![在此处输入图像描述](../Images/7b5c75818355e4b518100a681beb0458.png)

**更新：**

![在此处输入图像描述](../Images/6615f33cc914fcee76309920373f2e94.png)

**更新#2：**

我仍在努力解决这个问题并获得与快照相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:02:30.233

你的html太大了。

```
 <tr style="">
                        **<td>**
                            <p>
                            <asp:Label ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' />
                            </p>
                        **</th>** 
```

看到一个标记**。打开 td 并用 th 关闭。

```
 <tr style="">
                    <td>
                        <p>
                        <asp:Label ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' />
                        </p>
                    </th>
                    <td>
                        <p>
                        <asp:Label ID="UsernameLabel" runat="server" 
                            Text='<%# Eval("Username") %>' />
                        </p>
                    </td> 
```

关闭`tr`上面的代码并重新打开`tr`下一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:25:59.747

**这是 JSFIDDLE：http: [//jsfiddle.net/collabcoders/xSbyG/](http://jsfiddle.net/collabcoders/xSbyG/)**

好的。我对其进行了重新设计并进行了测试。这是我得到的结果： ![在此处输入图像描述](../Images/239b7410d0c0e6e8c2cea1838c8e1be5.png)

首先，我添加了一些 CSS 来清理代码和格式。

```
<style>
    .rightcolumn {
        text-align:right; 
        height:25px;
        text-overflow:ellipsis;
        overflow: hidden;
        white-space:nowrap;
        font-weight:bold;
    }
    .leftcolumn {
        text-align:left; 
        height:25px;
        text-overflow:ellipsis;
        overflow: hidden;
        white-space:nowrap;
    }
</style> 
```

然后是 ListView 模板和布局：

```
<asp:listview id="ListView1" runat="server" datasourceid="SqlDataSource1">
        <ItemTemplate>
            <table style="width:200px;">
                <tr>
                   <td class="leftcolumn">
                            <asp:Label ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' />
                    </td>
                </tr>
                <tr>
                    <td class="leftcolumn">
                            <asp:Label ID="UsernameLabel" runat="server" Text='<%# Eval("Username") %>' />
                    </td>
                </tr>
                <tr>
                    <td class="leftcolumn">
                            <asp:Label ID="JobTitleLabel" runat="server" Text='<%# Eval("JobTitle") %>' />
                    </td>
                </tr>
                <tr>
                    <td class="leftcolumn">
                            <asp:Label ID="BadgeNumberLabel" runat="server" Text='<%# Eval("BadgeNumber") %>' />
                    </td>
                </tr>
                <tr>
                    <td class="leftcolumn">
                            <asp:Label ID="DivisionLabel" runat="server" Text='<%# Eval("DivisionName") %>' />
                    </td>
                </tr>
                <tr>
                    <td class="leftcolumn">
                            <asp:Label ID="RoleLabel" runat="server" Text='<%# Eval("RoleName") %>' />
                    </td>
                </tr>
            </table>
        </ItemTemplate>

        <LayoutTemplate>
            <table id="outertable" border="1" runat="server">
                <tr>
                    <td colspan="2" style="font-weight:bold;">
                        <center>Personal Information</center>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table id="itemPlaceholderContainer" style="width:150px;" runat="server">
                            <tr>
                                <td class="rightcolumn">
                                    Name
                                </td>
                            </tr>
                            <tr>
                                 <td class="rightcolumn">
                                     Username
                                 </td>
                            </tr>
                            <tr>
                                 <td class="rightcolumn">
                                     Job Title
                                 </td>
                            </tr>
                            <tr>
                                 <td class="rightcolumn">
                                     Badge Number
                                 </td>
                            </tr>
                            <tr>
                                 <td class="rightcolumn">
                                     Division
                                 </td>
                            </tr>
                            <tr>
                                 <td class="rightcolumn">
                                     Role
                                 </td>
                            </tr>
                        </table>
                    </td>
                    <td id="itemPlaceholder" runat="server">

                        <!---List Item Template Goes Here--->

                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <asp:DataPager ID="DataPager1" runat="server" PageSize="5">
                            <Fields>
                                <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" ShowNextPageButton="False"
                                    ShowPreviousPageButton="False" />
                                <asp:NumericPagerField />
                                <asp:NextPreviousPagerField ButtonType="Button" ShowLastPageButton="True" ShowNextPageButton="False"
                                    ShowPreviousPageButton="False" />
                            </Fields>
                        </asp:DataPager>
                    </td>
                </tr>
            </table>
        </LayoutTemplate>
    </asp:listview> 
```

# ruby-on-rails - Activerecord 关系连接

> ID：11733976
> 
> 赞同：0
> 
> 时间：2012-07-31T05:54:16.673
> 
> 标签：ruby-on-rails, activerecord

我正在使用 Rails 和 Activerecord 并尝试在我的视图中将相关表中的一些数据合并在一起，这是我的模型：

```
class Report < ActiveRecord::Base
  has_many :votes
end

class Vote < ActiveRecord::Base
  belongs_to :reports
end

class User < ActiveRecord::Base
  has_many :votes
end 
```

每个投票都有一个用户和一个报告。

在我看来，我需要以下内容，希望尽可能简单：

1.  所有用户对每个报告的总投票数
2.  如果用户对特定报告进行了投票，则为真/假

现在，我对 ActiveRecord 查询的基本理解只需要我为报告和当前创建一个*助手*`user`，而不是查询是否存在`report`

计算 a 的所有用户的总票数也是`report`如此：

**控制器**

```
def index
  #this is where I need some help to get the related information into a single
  #object
  @reports = Report.where('...')
end 
```

**看法**

```
<% @reports.each do |report| %>
    <% if(hasVoted(@current_user.id, report.id)) %>
        <!-- display the 'has voted html' -->
    <% end %>
<% end %> 
```

**帮手**

```
def hasVoted(current_user_id, report_id)
    if(Vote.exists?(:user_id => current_user_id, :report_id => report_id))
      true
    else
      false
    end      
end 
```

希望这能让您对帮助有所了解……谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:04:50.740

当然。

首先，请考虑将您的方法命名为 has_voted？而不是已投票。其次，考虑在用户模型中移动该方法。

```
#user.rb
def voted_on?(report_id)
  votes.where(:report_id => report_id).exists?
end 
```

然后您的视图将读取

```
<% if current_user.voted_on?(report) %>
  ...
<% end %> 
```

您遇到的另一个问题是找出报告收到的票数。这也很简单。您可以在循环内的视图中执行此操作，在该循环中迭代 @reports

```
<% vote_count = report.votes.size %> 
```

请记住，他会导致 N 个查询（其中 N = 报告数）。由于您是 Rails 新手，因此我不会在控制器中使您的 Reports 查询复杂化，您可以在控制器中获取报告以包括投票计数（除非您要求我这样做）。但是，一旦您对这里发生的事情感到满意，那就是您要优化的地方。

# c - 结构中零长度数组的目的是什么？

> ID：11733981
> 
> 赞同：46
> 
> 时间：2012-07-31T05:54:35.620
> 
> 标签：c, linux

当我查看 Linux 内核代码时，发现以下代码：

```
 struct thread_info {
    struct task_struct  *task;
    struct exec_domain  *exec_domain;
    unsigned long       flags;
    __u32           status;
    __u32           cpu;
    int         preempt_count;
    mm_segment_t        addr_limit;
    struct restart_block    restart_block;
    void __user     *sysenter_return;
    unsigned long           previous_esp;
    __u8            supervisor_stack[0];
}; 
```

注意最后一个变量“supervisor_stack”，它是一个零长度数组，它的用途是什么？提前致谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-31T06:00:00.197

它是 GCC 作为扩展提供的灵活数组成员的 C99 之前的版本。

C99的方式是用空括号定义灵活数组成员，

```
__u8  supervisor_stack[]; 
```

它用于存储数量与结构不连续的数据。内存分配的形式

```
struct foo *ptr = malloc(sizeof *ptr + whatever_is_needed); 
```

在 6.7.2.1 的第 18 段中，标准（草案 N1570）描述了它们：

> 作为一种特殊情况，具有多个命名成员的结构的最后一个元素可能具有不完整的数组类型；这称为灵活数组成员。在大多数情况下，灵活数组成员被忽略。特别是，结构的大小就像省略了柔性数组成员一样，只是它可能具有比省略所暗示的更多的尾随填充。然而，当一个`.`（或`->`) 运算符的左操作数是（指向）具有灵活数组成员的结构，右操作数命名该成员，它的行为就好像该成员被替换为最长的数组（具有相同的元素类型），不会使结构大于被访问的对象；数组的偏移量应保持灵活数组成员的偏移量，即使这与替换数组的偏移量不同。如果这个数组没有元素，它的行为就好像它有一个元素，但如果尝试访问该元素或生成一个越过它的指针，则行为是不确定的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-31T06:03:16.887

声明可以称为可变长度数组的内容是一种常见的 C 技巧（您在分配时定义大小

例子：

```
struct line {
   int length;
   char contents[0];
 };

 struct line *thisline = (struct line *)
   malloc (sizeof (struct line) + this_length);
 thisline->length = this_length; 
```

这样，您就有了数据的结构定义，它还存储数组长度以用于明显的方便目的，但您不受通常与结构相关联的固定大小的限制

取自[此处](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)的示例 （还有更多信息）