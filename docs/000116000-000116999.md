# StackOverflow 问答 000116000-000116999

# c++ - 指针和容器

> ID：116002
> 
> 赞同：11
> 
> 时间：2008-09-22T16:44:11.060
> 
> 标签：c++, stl, containers, smart-pointers

我们都知道 RAW 指针需要包装在某种形式的智能指针中才能获得 Exception 安全的内存管理。但是当涉及到指针容器时，问题变得更加棘手。

std 容器坚持包含的对象是可复制的，因此这排除了 std::auto_ptr 的使用，尽管您仍然可以使用 boost::shared_ptr 等。

但也有一些 boost 容器明确设计用于安全地保存指针：
请参阅[指针容器库](http://www.boost.org/doc/libs/1_36_0/libs/ptr_container/doc/reference.html)

问题是：在什么情况下我应该更喜欢使用 ptr_containers 而不是 smart_pointers 容器？

```
boost::ptr_vector<X>

or

std::vector<boost::shared_ptr<X> > 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-22T16:50:44.417

Boost 指针容器对其拥有的资源拥有严格的所有权。std::vector<boost::shared_ptr<X>> 具有共享所有权。有必要这样做是有原因的，但如果不是，我会默认使用 boost::ptr_vector<X>。YMMV。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T16:58:45.597

稳定：智能指针是处理资源管理的一种非常好的方法，但不是唯一的方法。我同意您会在编写良好的 C++ 代码中看到很少的原始指针，但根据我的经验，您也不会看到那么多智能指针。有许多使用原始指针容器实现的完全异常安全的类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T16:49:23.450

好吧，开销是一种情况。

共享指针向量将执行大量无关的复制，包括在调整大小时创建新的智能指针、增加引用、减少引用等。使用指针容器可以避免所有这些。

需要分析以确保容器操作是瓶颈:)

# database-design - 您是否根据保留字列表检查您的字段和表名称？

> ID：116032
> 
> 赞同：4
> 
> 时间：2008-09-22T16:46:38.153
> 
> 标签：database-design, reserved-words

我的字段、表、查看器存储过程名称有时会出现问题。例子：

```
 SELECT from, to, rate FROM Table1 
```

问题是***from***是 SQL-92 中的保留字。您可以将字段名放在双引号中来解决这个问题，但是如果其他一些数据库工具想要读取您的数据库怎么办？这是您的数据库设计，如果其他应用程序对您的数据库有问题，那是您的错。

还有许多其他[保留字](http://developer.mimer.com/validator/sql-reserved-words.tml "SQL 保留字")（~300），我们应该避免所有这些。如果您将 DBMS 从制造商 A 更改为 B，您的应用程序可能会失败，因为一些字段名现在是保留字。一个名为***PERCENT***的字段可能适用于 oracle 数据库，但在 MS SQL Server 上，它必须被视为保留字。

我有一个工具可以对照这些保留字检查我的数据库设计；你也是？

这是我的规则

1.  不要使用超过 32 个字符的名称（某些 DBMS 无法处理更长的名称）
2.  仅使用 az、AZ、0-9 和下划线（:-;,/&!=?+- 是不允许的）
3.  不要以数字开头的名字
4.  避免这些保留字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T16:47:25.670

简单的方法：只要确保*每个*字段名称都被引用。

编辑：任何明智的数据库工具都应该做同样的事情，我当然从未遇到过任何问题（至少在我自己的代码之外！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T16:52:11.947

您不应该使用保留字作为表中的列名，即使您可以引用它们。

引用它们会使代码变得非常尴尬，因为您必须始终在代码中的 SQL 语句中转义引号字符。在我看来，它还使 SQL 命令行成为真正的 PITA。

最后它看起来很乱。花时间想出一个不与 SQL 关键字冲突的不同单词要好得多。

你的规则在我看来很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T16:49:00.520

确实。为此，我有一个 SQL_RESERVED_WORDS 表。

顺便说一句，Oracle 只能处理 30 个字符的表名。而且它们都是大写的。

只需要一个小时的不必要的调试就可以收回成本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T16:54:40.240

只是避免保留字。

请注意，大多数数据库（和数据库链接层）都有一种以编程方式列出所有保留字的方法。您可以将其用作应用程序启动时的健全性检查，以确保您没有误入歧途。

引用确实有效，因此您可以这样做以确保安全。然而，对于 DBA 和针对您的应用程序制作自定义报告的人来说，这让生活变得非常尴尬，因此这应该仅用作创可贴。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T10:51:49.307

撇开名称和保留字之间明显的混淆不谈，我认为至少有两个非常充分的理由避免使用保留字作为名称：

1.  您不必使用大大损害可读性的引号（或 MS 世界中的方括号）。

    **注意：**当您发现自己需要从 SQL（所谓的“动态 SQL”方法）或从其他语言生成 SQL 代码时，可读性可能会特别受损。您不希望在单引号内添加额外的双引号，或额外重复的双引号，或转义引号，或任何其他类似的晦涩内容。

    例如，您希望这些片段如何：

    ```
    -- SQL -----------------------
    declare @sql as varchar(4000)
    set @sql = 'select "To", "From" from MyTable'

    ' VB -------------------------
    Dim sql as String
    sql = "select ""To"", ""From"" from MyTable"

    // C++ -----------------------
    String sql = "select \"To\", \"From\" from MyTable" 
    ```

2.  无论如何，大多数保留字都不适合命名表、列、变量等。在绝大多数情况下，名词（有时是形容词）比动词、副词和介词更适合命名。:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-15T11:39:58.427

我同意 Yarik 关于保留字适用性的第二点。在 OP 示例中，他使用“to”、“from”和“rate”。我脑海中最直接的问题，因此也可能是未来开发人员的问题，是“去往和来自什么？” 也许考虑将这些列重命名为“EffectiveFromDate”和“EffectiveUntilDate”，如果这就是它们所代表的。

</2c>

# java - VMWare 服务器上的 Java 垃圾收集

> ID：116036
> 
> 赞同：1
> 
> 时间：2008-09-22T16:47:45.717
> 
> 标签：java, garbage-collection

在 VmWare 实例上运行应用程序时，是否有人遇到过 Java 默认垃圾收集器的问题？

我遇到的问题是完整的垃圾收集没有像我预期的那样经常运行，并且很好奇 VmWare 变量是否与它有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T16:57:41.840

一般来说，垃圾收集器只会在真正需要的时候运行一次完整的 GC。原因是它需要很多时间。它将尝试执行更多更小的 GC，从而花费更少的时间。在大多数情况下，这似乎是一个很好的策略。

如果你想尝试 tweek 事情，你可以添加一些额外的 GC 标志到 VM。[看到这个](http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp) 另外你可能想确保你正在运行服务器虚拟机而不是客户端虚拟机。

我想真正的问题是你想要实现什么。如果您的内存不足，可能不是因为 GC。这可能是因为[内存泄漏](http://www.ibm.com/developerworks/java/library/j-leaks/)，是的，您可以在内存管理的环境中创建它们。他们只是有点不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T17:04:58.250

我没有注意到 VmWare 实例上的 Java 垃圾收集有任何明显问题。我建议您使用像[Netbeans](http://www.netbeans.org/) 6 分析器或[YourKit](http://www.yourkit.com)这样的好的分析器来分析您的应用程序，以确保您没有任何内存泄漏。一旦我们消除了我们的泄漏，我们就不需要太担心垃圾收集了。我相信一些垃圾收集器依赖于 CPU 使用率。无论如何，您都可以在[此处](http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html)阅读有关为 Java 6 调整垃圾收集的信息。较旧的 VM 版本存在类似的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T16:57:43.587

我自己还没有看到这个，但是根据您运行的 VMware 版本以及您的处理器类型，虚拟机时钟可能比实时运行得更快（或更慢），这当然会影响间隔垃圾集合运行在。

有关计时问题的高级概述，以及有关如何使 VM 时间尽可能接近实时的建议，请参阅 VMware 论文[VMware Virtual Machines 中的计时](http://www.vmware.com/pdf/vmware_timekeeping.pdf)。

# c++ - 如何在 C++ 中将整个文件读入 std::string？

> ID：116038
> 
> 赞同：234
> 
> 时间：2008-09-22T16:48:02.440
> 
> 标签：c++, string, file-io

如何将文件读入`std::string`. 即一次读取整个文件？

调用者应指定文本或二进制模式。该解决方案应符合标准、可移植且高效。它不应该不必要地复制字符串的数据，并且应该避免在读取字符串时重新分配内存。

一种方法是统计文件大小，将`std::string`和调整`fread()`为`std::string`' `const_cast<char*>()`ed `data()`。这要求`std::string`'s 的数据是连续的，这不是标准所要求的，但似乎所有已知的实现都是这种情况。更糟糕的是，如果以文本模式读取文件，则`std::string`'s 的大小可能不等于文件的大小。

可以使用`std::ifstream`'s `rdbuf()`into a`std::ostringstream`和从那里到`std::string`. 但是，这可能会复制字符串数据和/或不必要地重新分配内存。

*   所有相关的标准库实现是否足够聪明，可以避免所有不必要的开销？
*   还有另一种方法吗？
*   我是否错过了一些已经提供所需功能的隐藏 Boost 功能？

```
void slurp(std::string& data, bool is_binary) 
```

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2008-09-22T17:22:30.033

一种方法是将流缓冲区刷新到单独的内存流中，然后将其转换为`std::string`（省略错误处理）：

```
std::string slurp(std::ifstream& in) {
    std::ostringstream sstr;
    sstr << in.rdbuf();
    return sstr.str();
} 
```

这非常简洁。然而，正如问题中所指出的，这执行了一个冗余副本，不幸的是，基本上没有办法删除这个副本。

不幸的是，避免冗余副本的唯一真正解决方案是手动循环读取。由于 C++ 现在已经保证了连续的字符串，因此可以编写以下内容（≥C++17，包括错误处理）：

```
auto read_file(std::string_view path) -> std::string {
    constexpr auto read_size = std::size_t(4096);
    auto stream = std::ifstream(path.data());
    stream.exceptions(std::ios_base::badbit);

    auto out = std::string();
    auto buf = std::string(read_size, '\0');
    while (stream.read(& buf[0], read_size)) {
        out.append(buf, 0, stream.gcount());
    }
    out.append(buf, 0, stream.gcount());
    return out;
} 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2008-09-22T17:13:40.553

最短的变体：**`[Live On Coliru](http://coliru.stacked-crooked.com/a/ab16e6dd34c38b92)`**

```
std::string str(std::istreambuf_iterator<char>{ifs}, {}); 
```

它需要标题`<iterator>`。

有一些报道称这种方法比预分配字符串和使用`std::istream::read`. 然而，在启用了优化的现代编译器上，情况似乎不再如此，尽管各种方法的相对性能似乎高度依赖于编译器。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2009-02-08T03:27:07.020

有关类似问题，请参阅[此答案。](https://stackoverflow.com/questions/524591/performance-of-creating-a-c-stdstring-from-an-input-iterator/524843#524843)

为了您的方便，我重新发布 CTT 的解决方案：

```
string readFile2(const string &fileName)
{
    ifstream ifs(fileName.c_str(), ios::in | ios::binary | ios::ate);

    ifstream::pos_type fileSize = ifs.tellg();
    ifs.seekg(0, ios::beg);

    vector<char> bytes(fileSize);
    ifs.read(bytes.data(), fileSize);

    return string(bytes.data(), fileSize);
} 
```

当针对 Moby Dick (1.3M) 的文本平均运行 100 次时，此解决方案的执行时间比此处提供的其他答案快约 20%。对于可移植的 C++ 解决方案来说还不错，我想看看对文件进行映射的结果；）

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2016-12-01T05:53:44.650

如果您有 C++17 (std::filesystem)，还有这种方式（通过`std::filesystem::file_size`而不是`seekg`and获取文件的大小`tellg`）：

```
#include <filesystem>
#include <fstream>
#include <string>

namespace fs = std::filesystem;

std::string readFile(fs::path path)
{
    // Open the stream to 'lock' the file.
    std::ifstream f(path, std::ios::in | std::ios::binary);

    // Obtain the size of the file.
    const auto sz = fs::file_size(path);

    // Create a buffer.
    std::string result(sz, '\0');

    // Read the whole file into the buffer.
    f.read(result.data(), sz);

    return result;
} 
```

**注意**：如果您的标准库尚未完全支持 C++17 `<experimental/filesystem>`，您可能需要使用。如果它不支持[非常量 std::basic_string data](http://en.cppreference.com/w/cpp/string/basic_string/data)`std::experimental::filesystem` ，您可能还需要替换`result.data()`为。`&result[0]`

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2008-09-22T16:57:43.167

利用

```
#include <iostream>
#include <sstream>
#include <fstream>

int main()
{
  std::ifstream input("file.txt");
  std::stringstream sstr;

  while(input >> sstr.rdbuf());

  std::cout << sstr.str() << std::endl;
} 
```

或非常接近的东西。我没有打开 stdlib 参考来仔细检查自己。

是的，我知道我没有`slurp`按要求编写函数。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2017-03-24T21:07:34.377

我没有足够的声誉直接评论使用`tellg()`.

请注意，`tellg()`错误时可以返回 -1。如果您将结果`tellg()`作为分配参数传递，您应该首先检查结果。

问题的一个例子：

```
...
std::streamsize size = file.tellg();
std::vector<char> buffer(size);
... 
```

在上面的示例中，如果`tellg()`遇到错误，它将返回 -1。`tellg()`有符号（即 的结果）和无符号（即构造函数的 arg）之间的隐式转换`vector<char>`将导致您的向量错误地分配**大量**字节。（可能是 4294967295 字节，或 4GB。）

修改 paxos1977 的答案以解决上述问题：

```
string readFile2(const string &fileName)
{
    ifstream ifs(fileName.c_str(), ios::in | ios::binary | ios::ate);

    ifstream::pos_type fileSize = ifs.tellg();
    if (fileSize < 0)                             <--- ADDED
        return std::string();                     <--- ADDED

    ifs.seekg(0, ios::beg);

    vector<char> bytes(fileSize);
    ifs.read(&bytes[0], fileSize);

    return string(&bytes[0], fileSize);
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-03-26T10:15:05.530

此解决方案将错误检查添加到基于 rdbuf() 的方法中。

```
std::string file_to_string(const std::string& file_name)
{
    std::ifstream file_stream{file_name};

    if (file_stream.fail())
    {
        // Error opening file.
    }

    std::ostringstream str_stream{};
    file_stream >> str_stream.rdbuf();  // NOT str_stream << file_stream.rdbuf()

    if (file_stream.fail() && !file_stream.eof())
    {
        // Error reading file.
    }

    return str_stream.str();
} 
```

我添加这个答案是因为在原始方法中添加错误检查并不像您期望的那么简单。原始方法使用 stringstream 的插入运算符 ( `str_stream << file_stream.rdbuf()`)。问题是这会在没有插入字符时设置字符串流的故障位。这可能是由于错误，也可能是由于文件为空。如果您通过检查故障位来检查故障，则在读取空文件时会遇到误报。您如何区分由于文件为空而无法插入任何字符的合法失败和插入任何字符的“失败”？

您可能会考虑显式检查空文件，但这需要更多代码和相关的错误检查。

检查失败条件`str_stream.fail() && !str_stream.eof()`不起作用，因为插入操作没有设置 eofbit（在 ostringstream 或 ifstream 上）。

所以，解决办法是改变操作。不要使用 ostringstream 的插入运算符 (<<)，而是使用 ifstream 的提取运算符 (>>)，它确实设置了 eofbit。然后检查故障情况`file_stream.fail() && !file_stream.eof()`。

重要的是，当`file_stream >> str_stream.rdbuf()`遇到合法失败时，它不应该设置 eofbit （根据我对规范的理解）。这意味着上述检查足以检测合法故障。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-09-11T13:24:21.087

由于这似乎是一个广泛使用的实用程序，我的方法是搜索并更喜欢已经可用的库而不是手工制作的解决方案，特别是如果您的项目中已经链接了 boost 库（链接器标志 -lboost_system -lboost_filesystem）。[在这里（以及旧的 bo​​ost 版本）](https://www.boost.org/doc/libs/1_74_0/boost/filesystem/string_file.hpp)，boost 提供了一个 load_string_file 实用程序：

```
#include <iostream>
#include <string>
#include <boost/filesystem/string_file.hpp>

int main() {
    std::string result;
    boost::filesystem::load_string_file("aFileName.xyz", result);
    std::cout << result.size() << std::endl;
} 
```

作为一个优势，这个函数不会寻找整个文件来确定大小，而是在内部使用 stat() 。但是，作为一个可能可以忽略不计的缺点，人们可以通过检查源代码轻松推断：字符串不必要地用`'\0'`被文件内容重写的字符调整大小。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-11-06T20:24:17.700

这是一个使用新文件系统库的版本，具有相当强大的错误检查功能：

```
#include <cstdint>
#include <exception>
#include <filesystem>
#include <fstream>
#include <sstream>
#include <string>

namespace fs = std::filesystem;

std::string loadFile(const char *const name);
std::string loadFile(const std::string &name);

std::string loadFile(const char *const name) {
  fs::path filepath(fs::absolute(fs::path(name)));

  std::uintmax_t fsize;

  if (fs::exists(filepath)) {
    fsize = fs::file_size(filepath);
  } else {
    throw(std::invalid_argument("File not found: " + filepath.string()));
  }

  std::ifstream infile;
  infile.exceptions(std::ifstream::failbit | std::ifstream::badbit);
  try {
    infile.open(filepath.c_str(), std::ios::in | std::ifstream::binary);
  } catch (...) {
    std::throw_with_nested(std::runtime_error("Can't open input file " + filepath.string()));
  }

  std::string fileStr;

  try {
    fileStr.resize(fsize);
  } catch (...) {
    std::stringstream err;
    err << "Can't resize to " << fsize << " bytes";
    std::throw_with_nested(std::runtime_error(err.str()));
  }

  infile.read(fileStr.data(), fsize);
  infile.close();

  return fileStr;
}

std::string loadFile(const std::string &name) { return loadFile(name.c_str()); }; 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-09-22T17:14:24.343

这样的事情应该不会太糟糕：

```
void slurp(std::string& data, const std::string& filename, bool is_binary)
{
    std::ios_base::openmode openmode = ios::ate | ios::in;
    if (is_binary)
        openmode |= ios::binary;
    ifstream file(filename.c_str(), openmode);
    data.clear();
    data.reserve(file.tellg());
    file.seekg(0, ios::beg);
    data.append(istreambuf_iterator<char>(file.rdbuf()), 
                istreambuf_iterator<char>());
} 
```

这里的优点是我们先做保留，这样我们就不必在读入内容时增加字符串。缺点是我们逐个字符地进行。更智能的版本可以抓取整个读取缓冲区，然后调用下溢。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-09-22T17:16:23.357

您可以使用“std::getline”函数，并指定“eof”作为分隔符。生成的代码虽然有点模糊：

```
std::string data;
std::ifstream in( "test.txt" );
std::getline( in, data, std::string::traits_type::to_char_type( 
                  std::string::traits_type::eof() ) ); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-31T18:52:14.590

对于性能，我没有发现比下面的代码更快的东西。

```
std::string readAllText(std::string const &path)
{
    assert(path.c_str() != NULL);
    FILE *stream = fopen(path.c_str(), "r");
    assert(stream != NULL);
    fseek(stream, 0, SEEK_END);
    long stream_size = ftell(stream);
    fseek(stream, 0, SEEK_SET);
    void *buffer = malloc(stream_size);
    fread(buffer, stream_size, 1, stream);
    assert(ferror(stream) == 0);
    fclose(stream);
    std::string text((const char *)buffer, stream_size);
    assert(buffer != NULL);
    free((void *)buffer);
    return text;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-05T13:28:27.963

您可以使用我开发的[第一个](https://github.com/sabbakumov/rst/blob/master/rst/files/file_utils.h#L79)C++ 库来执行此操作：

```
#include "rst/files/file_utils.h"

std::filesystem::path path = ...;  // Path to a file.
rst::StatusOr<std::string> content = rst::ReadFile(path);
if (content.err()) {
  // Handle error.
}

std::cout << *content << ", " << content->size() << std::endl; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-10T13:59:13.403

```
#include <string>
#include <fstream>

int main()
{
    std::string fileLocation = "C:\\Users\\User\\Desktop\\file.txt";
    std::ifstream file(fileLocation, std::ios::in | std::ios::binary);

    std::string data;

    if(file.is_open())
    {
        std::getline(file, data, '\0');

        file.close();
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-10T08:01:34.833

我知道这是一个非常古老的问题，有很多答案，但没有一个提到我认为最明显的方法。是的，我知道这是 C++，使用 libc 是邪恶的和错误的或其他什么，但对此很疯狂。使用 libc 很好，尤其是对于这样一个简单的事情。

本质上：只需打开文件，获取它的大小（不一定按那个顺序），然​​后阅读它。

```
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <sys/stat.h>

static constexpr char const filename[] = "foo.bar";

int main(void)
{
    FILE *fp = ::fopen(filename, "rb");
    if (!fp) {
        ::perror("fopen");
        ::exit(1);
    }

    struct stat st;
    if (::fstat(fileno(fp), &st) == (-1)) {
        ::perror("fstat");
        ::exit(1);
    }

    // You could simply allocate a buffer here and use std::string_view, or
    // even allocate a buffer and copy it to a std::string. Creating a
    // std::string and setting its size is simplest, but will pointlessly
    // initialize the buffer to 0\. You can't win sometimes.
    std::string str;
    str.reserve(st.st_size + 1U);
    str.resize(st.st_size);
    ::fread(str.data(), 1, st.st_size, fp);
    str[st.st_size] = '\0';
    ::fclose(fp);
} 
```

除了（在实践中）完全可移植之外，这似乎并不比其他一些解决方案更糟糕。当然，也可以抛出异常而不是立即退出。调整总是 0 的大小会初始化它，这让我非常恼火`std::string`，但它无济于事。

**请注意**，这只适用于为 C++17 及更高版本编写的代码。早期版本（应该）不允许编辑`std::string::data()`。如果使用早期版本，请考虑使用`std::string_view`或简单地复制原始缓冲区。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-13T06:21:12.983

```
#include <iostream>
#include <fstream>
#include <string.h>
using namespace std;
main(){
    fstream file;
    //Open a file
    file.open("test.txt");
    string copy,temp;
    //While loop to store whole document in copy string
    //Temp reads a complete line
    //Loop stops until temp reads the last line of document
    while(getline(file,temp)){
        //add new line text in copy
        copy+=temp;
        //adds a new line
        copy+="\n";
    }
    //Display whole document
    cout<<copy;
    //close the document
    file.close();
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-05-04T01:34:37.030

基于 CTT 解决方案的更新功能：

```
#include <string>
#include <fstream>
#include <limits>
#include <string_view>
std::string readfile(const std::string_view path, bool binaryMode = true)
{
    std::ios::openmode openmode = std::ios::in;
    if(binaryMode)
    {
        openmode |= std::ios::binary;
    }
    std::ifstream ifs(path.data(), openmode);
    ifs.ignore(std::numeric_limits<std::streamsize>::max());
    std::string data(ifs.gcount(), 0);
    ifs.seekg(0);
    ifs.read(data.data(), data.size());
    return data;
} 
```

有两个重要的区别：

`tellg()`不保证返回自文件开头以来的偏移量（以字节为单位）。相反，正如 Puzomor Croatia 所指出的，它更像是一个可以在 fstream 调用中使用的令牌。`gcount()`但是*会*返回上次提取的未格式化字节的数量。因此，我们打开文件，提取并丢弃其所有内容`ignore()`以获取文件的大小，并基于此构造输出字符串。

其次，我们避免了通过直接写入字符串来将文件的数据从 a 复制`std::vector<char>`到 a 。`std::string`

就性能而言，这应该是绝对最快的，提前分配合适大小的字符串，调用`read()`一次。作为一个有趣的事实，在 gcc 上使用`ignore()`and`countg()`而不是`ate`and`tellg()`编译成[几乎相同的东西](https://godbolt.org/z/8XvEvS)，一点一点。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-09-21T15:57:39.390

这是我使用的函数，在处理大文件（1GB+）时，由于某种原因，当你知道文件大小时，std::ifstream::read() 比 std::ifstream::rdbuf() 快得多，所以*整体*“首先检查文件大小”实际上是速度优化

```
#include <string>
#include <fstream>
#include <sstream>
std::string file_get_contents(const std::string &$filename)
{
    std::ifstream file($filename, std::ifstream::binary);
    file.exceptions(std::ifstream::failbit | std::ifstream::badbit);
    file.seekg(0, std::istream::end);
    const std::streampos ssize = file.tellg();
    if (ssize < 0)
    {
        // can't get size for some reason, fallback to slower "just read everything"
        // because i dont trust that we could seek back/fourth in the original stream,
        // im creating a new stream.
        std::ifstream file($filename, std::ifstream::binary);
        file.exceptions(std::ifstream::failbit | std::ifstream::badbit);
        std::ostringstream ss;
        ss << file.rdbuf();
        return ss.str();
    }
    file.seekg(0, std::istream::beg);
    std::string result(size_t(ssize), 0);
    file.read(&result[0], std::streamsize(ssize));
    return result;
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-09-17T11:56:03.253

```
#include <string>
#include <sstream>

using namespace std;

string GetStreamAsString(const istream& in)
{
    stringstream out;
    out << in.rdbuf();
    return out.str();
}

string GetFileAsString(static string& filePath)
{
    ifstream stream;
    try
    {
        // Set to throw on failure
        stream.exceptions(fstream::failbit | fstream::badbit);
        stream.open(filePath);
    }
    catch (system_error& error)
    {
        cerr << "Failed to open '" << filePath << "'\n" << error.code().message() << endl;
        return "Open fail";
    }

    return GetStreamAsString(stream);
} 
```

用法：

```
const string logAsString = GetFileAsString(logFilePath); 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2008-09-22T17:05:37.297

永远不要写入 std::string 的 const char * 缓冲区。永远不能！这样做是一个巨大的错误。

为 std::string 中的整个字符串保留（）空间，从文件中读取合理大小的块到缓冲区中，然后 append（）它。块的大小取决于您的输入文件大小。我很确定所有其他可移植和符合 STL 的机制都会做同样的事情（但可能看起来更漂亮）。

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2021-12-27T20:12:13.973

我知道我迟到了，但现在（2021 年）在我的机器上，这是我测试过的最快的实现：

```
#include <fstream>
#include <string>

bool fileRead( std::string &contents, const std::string &path ) {
    contents.clear();
    if( path.empty()) {
        return false;
    }
    std::ifstream stream( path );
    if( !stream ) {
        return false;
    }
    stream >> contents;
    return true;
} 
```

# c# - 我的图片的位置

> ID：116050
> 
> 赞同：23
> 
> 时间：2008-09-22T16:51:12.433
> 
> 标签：c#, windows, windows-vista, windows-xp

如何以编程方式（使用 C#）找出我的图片文件夹的路径是什么？

这在 XP 和 Vista 上有效吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-09-22T16:53:20.290

以下将返回用户图片文件夹位置的完整路径（XP 上的用户名\我的文档\我的图片，Vista 上的用户名\图片）

```
Environment.GetFolderPath(Environment.SpecialFolder.MyPictures); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-22T16:52:43.037

Environment.GetFolderPath(Environment.SpecialFolder.MyPictures);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T16:57:12.170

使用 Microsoft.VisualBasic.FileIO.SpecialDirectories.MyPictures 你可以得到它，适用于 vista 和 XP。

# java - 如何在运行时显示/隐藏列？

> ID：116053
> 
> 赞同：11
> 
> 时间：2008-09-22T16:51:28.830
> 
> 标签：java, jasper-reports

我想根据特定条件在运行时显示/隐藏列。我正在使用“Print when expression”在我的报告中有条件地显示/隐藏此列（及其标题）。当该列被隐藏时，它本来占用的空间是空白的，这不是特别吸引人。

我希望以更有效的方式使用额外的空间，可能性包括：

*   报表的宽度减少了隐藏列的宽度
*   额外的空间分布在剩余的列中

理论上，我可以通过将列（和标题）的宽度设置为 0 来实现第一个，但也表明该列应该调整大小以适应其内容。但是 JasperReports 不提供“调整宽度以适应内容”选项。

另一种可能性是使用 Jasper API 生成报告，而不是在 XML 中定义报告模板。但是对于这样一个简单的要求，这似乎需要付出很多努力。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-04-28T10:22:03.930

在 jasper 报告的更高版本（v5 或更高版本）中，您可以使用该`jr:table`组件并**真正**实现这一点（无需使用 java 代码，就像使用 dynamic-jasper 或 dynamic-reports 一样）。

该方法是使用`<printWhenExpression/>`下`<jr:column/>`

# 例子

**样本数据**

```
+----------------+--------+
|      User      |  Rep   |
+----------------+--------+
| Jon Skeet      | 854503 |
| Darin Dimitrov | 652133 |
| BalusC         | 639753 |
| Hans Passant   | 616871 |
| Me             |   6487 |
+----------------+--------+ 
```

**示例 jrxml**

**注意**：参数`$P{displayRecordNumber}`和`<printWhenExpression>`下面的第一个`jr:column`

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="reputation" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a88bd694-4f90-41fc-84d0-002b90b2d73e">
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <subDataset name="tableDataset" uuid="7a53770f-0350-4a73-bfc1-48a5f6386594">
        <field name="User" class="java.lang.String"/>
        <field name="Rep" class="java.math.BigDecimal"/>
    </subDataset>
    <parameter name="displayRecordNumber" class="java.lang.Boolean">
        <defaultValueExpression><![CDATA[true]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[]]>
    </queryString>
    <title>
        <band height="50">
            <componentElement>
                <reportElement key="table" style="table" x="0" y="0" width="555" height="47" uuid="76ab08c6-e757-4785-a43d-b65ad4ab1dd5"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="tableDataset" uuid="07e5f1c2-af7f-4373-b653-c127c47c9fa4">
                        <dataSourceExpression><![CDATA[$P{REPORT_DATA_SOURCE}]]></dataSourceExpression>
                    </datasetRun>
                    <jr:column width="90" uuid="918270fe-25c8-4a9b-a872-91299cddbc31">
                        <printWhenExpression><![CDATA[$P{displayRecordNumber}]]></printWhenExpression>
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement x="0" y="0" width="90" height="30" uuid="5cd6da41-01d5-4f74-99c2-06784f891d1e"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <text><![CDATA[Record number]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table_TD" height="30" rowSpan="1">
                            <textField>
                                <reportElement x="0" y="0" width="90" height="30" uuid="5fe48359-0e7e-44b2-93ac-f55404189832"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="90" uuid="7979d8a2-4e3c-42a7-9ff9-86f8e0b164bc">
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement x="0" y="0" width="90" height="30" uuid="61d5f1b6-7677-4511-a10c-1fb8a56a4b2a"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <text><![CDATA[Username]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table_TD" height="30" rowSpan="1">
                            <textField>
                                <reportElement x="0" y="0" width="90" height="30" uuid="a3cdb99d-3bf6-4c66-b50c-259b9aabfaef"/>
                                <box leftPadding="3" rightPadding="3"/>
                                <textElement verticalAlignment="Middle"/>
                                <textFieldExpression><![CDATA[$F{User}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="90" uuid="625e4e5e-5057-4eab-b4a9-c5b22844d25c">
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement x="0" y="0" width="90" height="30" uuid="e1c07cb8-a44c-4a8d-8566-5c86d6671282"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <text><![CDATA[Reputation]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table_TD" height="30" rowSpan="1">
                            <textField pattern="#,##0">
                                <reportElement x="0" y="0" width="90" height="30" uuid="6be2d79f-be82-4c7b-afd9-0039fb8b3189"/>
                                <box leftPadding="3" rightPadding="3"/>
                                <textElement textAlignment="Right" verticalAlignment="Middle"/>
                                <textFieldExpression><![CDATA[$F{Rep}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </title>
</jasperReport> 
```

**输出 $P{displayRecordNumber}=true**

[![真的](https://i.stack.imgur.com/B4Lwv.png)](https://i.stack.imgur.com/B4Lwv.png)

**输出 $P{displayRecordNumber}=false**

[![错误的](https://i.stack.imgur.com/UsUo9.png)](https://i.stack.imgur.com/UsUo9.png)

*正如您所看到的，列在显示的基础上很好地适应了。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T07:32:55.620

[JasperDesign](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/design/JasperDesign.html)用于在运行时从代码中修改模板对象 (JasperReport)。我想这可能适合你的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-26T21:25:00.960

空白时删除行：如果不可见，此选项会带走对象占用的垂直空间；元素可见性由 Print when 表达式属性中包含的表达式的值确定。把页面想象成一个放置元素的网格，一条线是元素占据的空间。图 4-17 突出显示元素 A 行；为了真正删除该行，共享该行一部分的所有元素都必须为空（也就是说，它们不会被打印）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-01T16:33:46.180

A slight variation on the "second report" theme that I have used is to isolate the part of the report where you have an optional column into it's own subreport, and then create two subreports, one with and one without the column, and then use conditions to determine which subreport to print.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-10-08T07:12:34.330

我推荐使用[DynamicReports](http://dynamicreports.sourceforge.net)，它是开源的并且基于 JasperReports。这个库的主要好处是动态报表设计，不需要可视报表设计器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T21:47:03.190

如果只是一列，是否可以把这一列放在最右边，然后用 print when 表达式。这样中间就没有洞了。我知道这并不理想，因为我过去曾尝试做您目前正在尝试完成的事情，但找不到我所说的好的解决方案。

第二个想法是在没有列的情况下基于第一个报告创建第二个报告，然后在调用报告时检查条件，以决定调用哪个报告。再次不理想，但会工作。

我知道这并不是您真正想要的答案，但其中一个建议可能对您有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-11T19:14:44.973

我想这个答案来得太晚了，但我将其添加为记录。就我而言，我可以在没有任何额外依赖项或工具的情况下解决它。在 JRXML 文件中，我只是多次将文本字段宽度添加为动态宽度。每个可能的宽度一次。然后在每个文本字段上，我设置它只应在特定条件下打印。

这可能不如动态设置宽度那么优雅，但它可以不用额外的库就可以解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-02T18:39:45.223

检查[这个](http://www.ibm.com/developerworks/websphere/library/techarticles/0505_olivieri/0505_olivieri.html)在那个教程中，他们使用带有 Velocity 框架的 XML 模板。这是相当复杂的。为了使它更简单，您可以使用[DynamicJasper](http://dynamicjasper.sourceforge.net/)。这个库是一个开源 Java API，它在 JasperReports 上运行，解决了动态列问题。

# html - 在网页中嵌入 LaTeX 的最佳方法是什么？

> ID：116054
> 
> 赞同：56
> 
> 时间：2008-09-22T16:51:29.017
> 
> 标签：html, latex

我不是在询问将 LaTeX 文档转换为 html 的问题。

我想做的是有一些方法可以在 html 文档中使用 LaTeX 数学命令，并让它在浏览器中正确显示。这可以在服务器端或客户端完成。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-03T15:22:05.453

我更喜欢[MathJax](http://mathjax.org/)，而不是选择渲染图像的解决方案（这会导致锯齿问题）。

MathJax 是一个开源的 Javascript 数学渲染引擎。它使用 CSS 和 Webfonts 而不是图像或 Flash，并且可以渲染 LaTeX 或 MathML。这样您就不会遇到缩放问题，甚至可以兼容屏幕阅读器。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2010-01-22T11:14:13.237

我曾经开发过一个 jQuery 插件，它实际上是这样做的：[jsLaTeX](http://blog.dreasgrech.com/2009/12/jslatex-jquery-plugin-to-directly-embed.html)

这是如何使用它的最简单示例：

```
$(".latex").latex();

<div class="latex">  
    \int_{0}^{\pi}\frac{x^{4}\left(1-x\right)^{4}}{1+x^{2}}dx =\frac{22}{7}-\pi  
</div> 
```

以上将在您的页面上生成以下 LaTeX 方程：

[![方程](https://i.stack.imgur.com/O5Rzk.gif)](https://i.stack.imgur.com/O5Rzk.gif)

该插件的[演示页面](http://dreasgrech.com/upload/jslatex/demos.html)包含更多代码示例和演示。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-09-22T16:53:30.400

MediaWiki 可以满足您的需求。它使用 Texvc ( [http://en.wikipedia.org/wiki/Texvc](http://en.wikipedia.org/wiki/Texvc) ) “验证 (AMS) LaTeX 数学表达式并将它们转换为 HTML、MathML 或 PNG 图形”。听起来像你在找什么。

查看维基百科关于他们如何处理数学方程的文章：[http](http://en.wikipedia.org/wiki/Help:Formula) ://en.wikipedia.org/wiki/Help:Formula 。他们还对 LaTeX 和不同渲染类型（PNG/MathML/HTML）的优缺点有广泛的参考。

> MediaWiki 使用 TeX 标记的子集，包括 LaTeX 和 AMS-LaTeX 的一些扩展，用于数学公式。它根据用户偏好和表达式的复杂性生成 PNG 图像或简单的 HTML 标记。未来，随着更多浏览器变得更智能，它在很多情况下将能够生成增强的 HTML 甚至是 MathML。（有关添加 MathML 支持的当前工作的信息，请参阅 blahtex。）
> 
> 更准确地说，MediaWiki 通过 Texvc 过滤标记，然后将命令传递给 TeX 以进行实际渲染。因此，仅支持完整 TeX 语言的有限部分；详情见下文。...
> 
> HTML 的优点
> 
> *   内联 HTML 公式始终与 HTML 文本的其余部分正确对齐。
> *   公式的背景、字体大小和字体与 HTML 内容的其余部分相匹配，并且外观符合 CSS 和浏览器设置。
> *   使用 HTML 的页面将加载得更快。
> 
> TeX 的优点
> 
> *   TeX 在语义上优于 HTML。在 TeX 中，“x”表示“数学变量 x”，而在 HTML 中，“x”可以表示任何东西。信息已不可挽回地丢失。这有很多好处：
>     1.  TeX 可以转换为 HTML，反之则不行。这意味着在服务器端，我们总是可以根据公式的复杂性和在文本中的位置、用户偏好、浏览器类型等来转换公式。因此，在可能的情况下，可以保留 HTML 的所有优点，以及TeX 的好处。确实，目前的情况并不理想，但这不是删除信息/内容的好理由。这更多的是帮助改善情况的原因。
>     2.  TeX 可以为支持它的浏览器转换为 MathML，从而保持其语义并允许将其呈现为向量。
> *   TeX 专为排版公式而设计，因此输入更轻松自然，输出更美观。
> *   使用 TeX 编写时，编辑者不必担心浏览器支持，因为它是由服务器渲染成图像的。另一方面，HTML 公式最终可能会被某些浏览器或旧版本的浏览器渲染为与编辑器的意图不一致（或根本不一致）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-09-22T20:57:13.060

如果您想将数学嵌入为图像，您可以查看[MathTran](http://mathtran.org/)。

如果您希望主要将数学作为文本插入页面（仅在必要时使用图像），[jsMath](http://www.math.union.edu/~dpvc/jsMath/)可能是您正在寻找的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-22T16:55:40.380

从历史上看，渲染 LaTeX 和提取图像一直是跨平台、跨浏览器数学的最佳选择。MathML 越来越成为一种合理的替代方案。 [这是](http://www.orcca.on.ca/MathML/texmml/textomml.html)一个在线转换器，它将从 Tex 标记发出 MathML，然后您可以将其嵌入到您的网页中。我知道 Firefox 和 Camino 等基于 Gecko 的浏览器与 MathML 配合得很好，Opera 也是如此。IE 不能开箱即用，但有可用的插件（比如[这个](http://en.wikipedia.org/wiki/MathPlayer)）。

Texvc 是一个很棒的发现！如果您对上标/下标/斜体/常用符号最感兴趣，则普通 HTML 输出应该可以正常工作，但对于更复杂的事情，请注意最流行的面向数学的网站（例如[Wolfram](http://mathworld.wolfram.com/)）会生成图像，所以那里如果您对跨浏览器兼容性感兴趣，您可能只能做这么多:-(

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-10-30T21:47:56.707

我自己开始研究这个，似乎事情已经发展了。我遇到了[这个](https://www.intmath.com/cg5/katex-mathjax-comparison.php)[KaTeX](https://katex.org/)和[MathJax](https://www.mathjax.org/)的比较演示。

* * *

长话短说*（截至撰写本文时）*：

*   矩阵内的分数在 KaTeX 中会相互碰撞，但在 MathJax 中不会（参见“叉积”）
*   在平方（或第 n 个）根符号内，指数和嵌套平方根似乎与水平顶线相撞（请参阅“重复分数”和“第 n 个根”。）
*   MathJax 的字体稍粗大一些，而 KaTeX 的字体稍显瘦。

但也许最决定性的是，我发现页面的总 MathJax 处理平均为**1674 毫秒**，运行了 3 次。相比之下，KaTeX 平均为**128 毫秒**，这要好一个数量级！

* * *

在浏览他们各自的网站时，还需要考虑其他一些比较点：

*   KaTeX 主网站声称支持大部分但不是全部的 LaTeX。[他们在这里](https://katex.org/docs/supported.html)列出了他们支持的功能。MathJax 也表达了它的一些[限制](http://docs.mathjax.org/en/latest/tex.html)。尽管通过快速浏览这些内容很难知道最终谁拥有“更好”的支持。我遇到的一些博客说 KaTeX 的支持较少，但其他人说 KaTeX 近年来显着改进了支持。
*   MathJax 网站宣传对输入和输出的 MathML 的支持。[此处](https://github.com/Khan/KaTeX/issues/593)和[此处的](https://github.com/Khan/KaTeX/issues/211)[github](https://github.com/Khan/KaTeX)站点上的一些 KaTeX 问题表明它们支持将 MathML 用于输出，但不支持用于输入（我对 MathML 了解不多，但如果您想帮助有视觉障碍的用户，它至少看起来很重要）。
*   KaTeX[同步](https://www.intmath.com/blog/mathematics/katex-a-new-way-to-display-math-on-the-web-9445)呈现，因此它不会重排页面（使其更快的部分原因）。但作为交换，它会暂时锁定浏览器。
*   StackOverflow 是 MathJax 的合作伙伴（参见[此处](https://www.mathjax.org/StackOverflow-continues-as-mathjax-partner-2017/)）。它在[一些](https://meta.stackexchange.com/questions/216606/which-stack-exchange-sites-use-mathjax)StackExchange 站点上使用，但由于页面加载时间性能而没有在 StackOverflow 本身上使用。相比之下，KaTeX 是由卡恩学院开发的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-03-18T10:26:41.243

我在这里阅读了所有答案，我很惊讶没有人提到从 PDF 到 HTML 的转换。如果您使用[pdf2htmlEX](https://github.com/coolwanglu/pdf2htmlEX)，它将**从 pdf 创建完美的网页**。您只需将您的乳胶编译为 pdf (pdflatex)。

默认情况下，它会生成一个 html 文件，其中 PDF 的内容由 CSS、javascript 和 html 组成。我尝试了很多工具将乳胶转换为 html，这是迄今为止**我发现的最好和最简单的解决方案**。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-01-02T15:28:05.513

这个问题只有一个（非常好的）答案引用了[**KaTeX**](https://katex.org/)，根据我的经验，它是最有效的解决方案，加载速度快且易于实施。

您需要添加一个`<link>`标签（用于样式表）和两个`<script>`s 到您的`<head>`. 然后`\( \)`用作内联数学`\[ \]`的分隔符和 . 中显示的数学的分隔符`<body>`。

这是一个带有实现的最小 html5 文件：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
  <title>Katex</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>

<body>
<p>Math can be inline like \(2^{2x}=4\), or displayed like:</p>
\[2^{3x}=8\]
</body>
</html> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-22T16:58:18.873

你可以试试[LaTexRenderer](http://www.mayer.dial.pipex.com/tex.htm)。我不知道它是否是最好的，但它确实有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T18:03:21.200

如果这符合您的要求，我肯定会鼓励您查看 MathML，但是使用[JsTeX](http://simile.mit.edu/wiki/JsTeX)进行一些工作可以为您提供所需的一切。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-05T16:45:35.637

您可以使用[tex2gif](http://www.fourmilab.ch/webtools/textogif/)。它需要一个 LaTeX 片段，运行 LaTeX 并生成一个 PNG（或 GIF）。易于嵌入，易于编写脚本。这个对我有用。

您还可以检查[tex2png](http://www-cdf.fnal.gov/~cplager/latex/#png)。

# svn - 如何使用 SVN 忽略目录？

> ID：116074
> 
> 赞同：776
> 
> 时间：2008-09-22T16:55:59.443
> 
> 标签：svn, version-control, directory

我刚开始使用 SVN，并且我有一个在源代码控制下不需要的缓存目录。如何使用 SVN 忽略整个目录/文件夹？

我在 OS X 和命令行上使用[Versions](https://en.wikipedia.org/wiki/Comparison_of_Subversion_clients#Standalone_Subversion_clients_comparison_table)和[TextMate 。](http://en.wikipedia.org/wiki/TextMate)

* * *

## 回答 #1

> 赞同：815
> 
> 时间：2008-09-22T16:56:30.563

设置`svn:ignore`父目录的属性：

```
svn propset svn:ignore dirname . 
```

如果您有多个要忽略的内容，请在属性值中用换行符分隔。在这种情况下，使用外部编辑器编辑属性值会更容易：

```
svn propedit svn:ignore . 
```

* * *

## 回答 #2

> 赞同：413
> 
> 时间：2008-09-22T17:06:51.287

这是一个示例目录结构：

```
\project
    \source
    \cache
    \other 
```

当`project`您看到您的缓存目录未添加并显示为这样时。

```
> svn st
M  source
?  cache 
```

要设置忽略属性，请执行

> svn propset svn:忽略缓存。

where`svn:ignore`是您要设置的属性的名称，是属性`cache`的值，`.`是您要设置此属性的目录。它应该是`cache`需要该属性的目录的父目录。

要检查设置了哪些属性：

```
> svn proplist
Properties on '.':
  svn:ignore 
```

要查看 的值`svn:ignore`：

```
> svn propget svn:ignore
cache 
```

要删除以前设置的属性：

```
svn propdel svn:ignore 
```

* * *

## 回答 #3

> 赞同：135
> 
> 时间：2009-05-07T23:38:51.947

重要的是要提到：

在命令行上你不能使用

```
svn add * 
```

这也将添加被忽略的文件，因为命令行会扩展`*`，因此`svn add`认为您希望添加所有文件。因此改用这个：

```
svn add --force . 
```

* * *

## 回答 #4

> 赞同：83
> 
> 时间：2009-10-30T15:02:03.627

由于我花了一段时间试图让它工作，应该注意如果文件已经存在于 SVN 中，你需要`svn delete`它们，然后编辑`svn:ignore`属性。

我知道这似乎很明显，但是当我认为它会在本地忽略它们时，它们一直显示`?`在我的列表中。`svn status`

* * *

## 回答 #5

> 赞同：76
> 
> 时间：2008-09-22T17:00:43.220

稍微扩展一下，如果您使用 svn 命令行工具执行此操作，您需要输入：

```
svn propedit svn:ignore path/to/dir 
```

这将打开您选择的文本编辑器，然后键入“*”以忽略其中的所有内容，然后保存+退出 - 这将在 svn 中包含目录本身，但忽略其中的所有文件，若要忽略目录，请使用父路径，然后在文件中键入目录的名称。保存后，运行更新（'svn up'），然后检查适当的路径。

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2008-09-22T17:02:37.257

`svn:ignore`在父目录上设置属性：

```
$ cd parentdir
$ svn ps svn:ignore . 'cachedir' 
```

这将覆盖 的任何当前值`svn:ignore`。您可以使用以下方法编辑值：

```
$ svn pe svn:ignore . 
```

这将打开您的编辑器。您可以添加多个模式，每行一个。

您可以通过以下方式查看当前值：

```
$ svn pg svn:ignore . 
```

如果您使用的是 GUI，则应该有一个菜单选项来执行此操作。

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2011-09-13T03:26:09.547

感谢以上所有的贡献。我只想在忽略文件的同时分享一些我的经验中的额外信息。

* * *

**当文件夹已经处于修订控制之下时**

在*svn import*和*svn co*文件之后，我们通常第一次做的事情。

所有运行时缓存、附件文件夹都将受版本控制。因此，在*svn ps svn:ignore*之前，我们需要将其从存储库中删除。

我们可以使用 SVN 1.5 以上版本`svn del --keep-local your_folder`，但对于早期版本，我的解决方案是：

1.  *svn 导出*文件夹的干净副本（没有`.svn`隐藏文件夹）
2.  *svn del*本地和存储库，
3.  *svn ci*
4.  复制回文件夹
5.  执行*svn st*并确认文件夹被标记为“？”
6.  现在我们可以根据解决方案来做*svn ps*

* * *

**当我们需要忽略多个文件夹时**

*   在一个目录中，我有两个文件夹需要设置为`svn:ignore`
*   如果我们设置一个，另一个将被删除。
*   然后我们想知道我们需要*svn pe*

`svn pe`将需要编辑文本文件，如果需要使用[vi](http://en.wikipedia.org/wiki/Vi)设置文本编辑器，您可以使用此命令：

```
export SVN_EDITOR=vi 
```

1.  使用“o”可以打开一个新行
2.  输入您要忽略的所有文件夹名称
3.  点击“esc”键退出编辑模式
4.  输入":wq" 然后点击`Enter`保存并退出

该文件看起来就像这样：

```
runtime
cache
attachments
assets 
```

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2013-06-27T15:16:41.143

## 先把它去掉...

如果您的目录`foo`已经受版本控制，请先使用以下命令将其删除：

```
svn rm --keep-local foo 
```

## ...然后忽略：

```
svn propset svn:ignore foo . 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2008-09-22T17:01:43.563

如果您使用的是特定的 SVN 客户端[TortoiseSVN](http://en.wikipedia.org/wiki/TortoiseSVN)，那么在提交时，您可以选择右键单击项目并选择“添加到忽略列表”。

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2010-11-17T10:25:03.193

...如果您想忽略多个目录（例如`build/` `temp/`和`*.tmp`文件），您可以分两步执行（忽略第一个并编辑忽略属性（请参阅此处的其他答案），或者可以编写类似的内容

```
svn propset svn:ignore "build
temp
*.tmp" . 
```

在命令行上。

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2011-07-14T06:40:12.940

忽略多个条目的命令有点棘手，需要反斜杠。

```
svn propset svn:ignore "cache\
tmp\
null\
and_so_on" . 
```

此命令将忽略当前目录中名为`cache`、`tmp`、`null`和的任何内容。`and_so_on`

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2011-09-05T09:24:16.553

Bash oneliner 多次忽略：

```
svn propset svn:ignore ".project"$'\n'".settings"$'\n'".buildpath" "yourpath" 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2010-10-04T10:22:22.687

我在忽略嵌套目录时遇到了问题；我想忽略的顶级目录不会显示'svn status'，但所有子目录都会显示。这对其他人来说可能是不言而喻的，但我想我会分享它：

例子：

> /树干
> 
> /主干/缓存
> 
> /主干/缓存/子目录1
> 
> /主干/缓存/子目录2

```
cd /trunk
svn ps svn:ignore . /cache
cd /trunk/cache
svn ps svn:ignore . *
svn ci 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2008-09-22T17:01:49.117

如果您的项目目录名为/Project，并且您的缓存目录名为/Project/Cache，那么您需要在/Project 上设置一个颠覆属性。属性名称应为“svn:ignore”，属性值应为“Cache”。

有关属性的更多信息，请参阅Subversion 手册中的[此](http://svnbook.red-bean.com/en/1.1/ch07s02.html)页面。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2008-09-22T17:02:22.670

杰森的回答会成功。但是，不是将 svn:ignore 设置为 "." 在缓存目录上，您可能希望在*父*目录的 svn:ignore 属性中包含“缓存”，以防缓存目录并不总是存在。我在许多“一次性”文件夹上执行此操作。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2013-10-08T06:20:35.777

*“谢谢”* svn 以这种可怕的、虚假的和困难的方式忽略文件。

所以我写了一个脚本[svn-ignore-all](http://sam.nipl.net/b/svn-ignore-all)：

```
#!/bin/sh

# svn-ignore-all

# usage: 
#   1\. run svn status to see what is going on at each step 
#   2\. add or commit all files that you DO want to have in svn
#   3\. remove any random files that you don't want to svn:ignore
#   4\. run this script to svn:ignore everything marked '?' in output of `svn status`

svn status |
grep '^?' |
sed 's/^? *//' |
while read f; do
    d=`dirname "$f"`
    b=`basename "$f"`
    ignore=`svn propget svn:ignore "$d"`
    if [ -n "$ignore" ]; then
        ignore="$ignore
"
    fi
    ignore="$ignore$b"
    svn propset svn:ignore "$ignore" "$d"
done 
```

此外，要忽略特定的文件/路径名列表，我们可以使用这个变体[svn-ignore](http://sam.nipl.net/b/svn-ignore)。我猜 svn-ignore-all 应该真的像 xargs svn-ignore。

```
#!/bin/sh

# svn-ignore

# usage:
#   svn-ignore file/to/ignore ...

for f; do
    d=`dirname "$f"`
    b=`basename "$f"`
    ignore=`svn propget svn:ignore "$d"`
    if [ -n "$ignore" ]; then
        ignore="$ignore
"
    fi
    ignore="$ignore$b"
    svn propset svn:ignore "$ignore" "$d"
done 
```

还有一件事：我倾向于用许多随机文件污染我的 svn 结帐。当需要提交时，我将这些文件移动到一个“旧”子目录中，并告诉 svn 忽略“旧”。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2008-09-22T17:01:02.347

如果您正在使用像 TortoiseSVN 之类的 SVN 前端，或者某种 IDE 集成，在提交/添加操作的同一菜单中也应该有一个忽略选项。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2015-06-13T22:39:36.330

**保留 SVN 将忽略的目录：**

1.  这将从存储库中删除文件，但将目录保持在 SVN 控制之下：

> svn delete --keep-local 路径/directory_to_keep/*

2.  然后设置为忽略目录（和所有内容）：

> svn propset svn:ignore "*" path/directory_to_keep

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-09-22T16:56:45.260

设置 svn:ignore[属性](http://svnbook.red-bean.com/en/1.1/ch07s02.html)。大多数 UI svn 工具都有办法做到这一点，以及链接中的命令行讨论。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2012-07-24T01:45:28.767

由于您使用的是版本，因此实际上非常简单：

*   浏览您的签出副本
*   单击要忽略的目录
*   在右侧的“忽略”框中单击编辑
*   键入 *.* 以忽略所有文件（或 *.jpg 仅用于 jpg 文件等）

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2012-09-24T15:22:50.427

也要注意你的尾部斜线。我发现包含`images/*`在我的忽略设置文件中并没有忽略`./images/`. 当我运行`svn status -u`它仍然显示`? images`。所以，我只是将忽略设置更改为 just `images`，没有斜线。进行状态检查并将其清除。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2014-02-19T20:08:44.903

在花了很多时间寻找如何进行这个简单的活动之后，我决定发布它并不难找到一个体面的解释。

先让样本结构

$ svn st ? 项目/主干/目标？项目/主干/myfile.x

1 - 首先配置编辑器，在mycase vim export SVN_EDITOR=vim

2 – “svn propedit svn:ignore project/trunk/”将打开一个新文件，您可以在我们的案例类型“target”中添加您的文件和子目录，保存并关闭文件并运行

$ svn st ? 项目/主干/myfile.x

谢谢。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2014-03-10T13:12:57.947

用[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)用下一个方法解决：

首先，将您的文件夹同步到项目中：

> 团队->同步

在下一个视图（团队视图）中，您可以看到可以提交到 SVN 服务器的所有资源。

因此，选择要忽略的资源的资源文件夹，然后可以使用

> 团队 -> 添加到`svn:ignore`.

之后，在确认窗口中，选择第一个选项：“按名称忽略”。

例如，如果我想忽略目标文件夹及其 .class 资源，我将进行同步，并在同步视图中选择目标文件夹。之后我会选择

> 团队->添加

到`svn:ignore`，然后我将在确认窗口中确认第一个选项。

# ftp - 使用 Blogger（FTP、Classic）如何添加对模板来说过于复杂的功能？

> ID：116088
> 
> 赞同：1
> 
> 时间：2008-09-22T16:59:11.713
> 
> 标签：ftp, blogger

使用经典模板，通过 FTP 发布到自定义域。

我想添加自定义元素，例如：

*   归档帖子的树形视图（使用 CSS/JavaScript 扩展）
*   标签云
*   图像幻灯片

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-24T13:21:42.733

在通过 FTP 发布 Blogger 博客后，我使用 PHP 来处理它。任何服务器端语言都可以做到这一点（ASP、ASP.NET、Python、JSP……）。

我编写了一个 PHP`blogger_functions.php`脚本`$snippet`（

我将此 PHP 添加到了我的 Blogger 模板的顶部：

```
<?php 

<MainPage>
$site_rootpath = "../";
</MainPage>

<ArchivePage>
$site_rootpath = "../../";
</ArchivePage>

<ItemPage>
$site_rootpath = "../../../";
</ItemPage>

include($site_rootpath."includes/blogger_functions.php");

?> 
```

这是模板的侧边栏部分：

```
<?php
echo $snippet;
?> 
```

然后，我将 Apache 配置为处理博客的 .html 文件中的 PHP 标记，方法是将其放入博客根目录中的 .htaccess 文件中：

```
AddType application/x-httpd-php .html .htm 
```

通过这种方法，您可以在 Blogger 博客中使用 PHP 的全部功能。

# c# - 如何使用 Vb.NET 或 C# 终止进程？

> ID：116090
> 
> 赞同：71
> 
> 时间：2008-09-22T16:59:17.297
> 
> 标签：c#, vb.net, process, kill

我有一个场景，我必须检查用户是否已经打开了 Microsoft Word。如果他有，那么我必须杀死 winword.exe 进程并继续执行我的代码。

有没有人有任何使用 vb.net 或 c# 杀死进程的直接代码？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2008-09-22T17:00:44.063

您需要使用[System.Diagnostics.Process.Kill](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)方法。您可以使用 [System.Diagnostics.Proccess.GetProcessesByName](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getprocessesbyname.aspx)获取所需的过程。

示例已在此处发布，但我发现非 .exe 版本效果更好，因此类似于：

```
foreach ( Process p in System.Diagnostics.Process.GetProcessesByName("winword") )
{
    try
    {
        p.Kill();
        p.WaitForExit(); // possibly with a timeout
    }
    catch ( Win32Exception winException )
    {
        // process was terminating or can't be terminated - deal with it
    }
    catch ( InvalidOperationException invalidException )
    {
        // process has already exited - might be able to let this one go
     }
} 
```

您可能不必处理`NotSupportedException`，这表明该过程是远程的。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-09-22T17:10:00.517

完全终止 Word 进程是可能的（参见其他一些回复），但完全粗鲁和危险：如果用户在打开的文档中有重要的未保存更改怎么办？更不用说这将留下的陈旧的临时文件......

这可能是您在这方面所能做到的（VB.NET）：

```
 Dim proc = Process.GetProcessesByName("winword")
    For i As Integer = 0 To proc.Count - 1
        proc(i).CloseMainWindow()
    Next i 
```

这将有序地关闭所有打开的 Word 窗口（如果适用，提示用户保存他/她的工作）。当然，在这种情况下，用户始终可以单击“取消”，因此您也应该能够处理这种情况（最好通过“请关闭所有 Word 实例，否则我们无法继续”对话框... )

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-09-22T17:02:35.260

这是一个简单的示例，说明如何杀死所有文字进程。

```
Process[] procs = Process.GetProcessesByName("winword");

foreach (Process proc in procs)
    proc.Kill(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-25T20:18:02.723

您可以绕过安全问题，创建一个更礼貌的应用程序，只需检查 Word 进程是否正在运行，并要求用户关闭它，然后单击应用程序中的“继续”按钮。这是许多安装人员采用的方法。

```
private bool isWordRunning() 
{
    return System.Diagnostics.Process.GetProcessesByName("winword").Length > 0;
} 
```

当然，只有当您的应用程序有 GUI 时，您才能这样做

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-02-22T12:20:07.537

```
 public bool FindAndKillProcess(string name)
    {
        //here we're going to get a list of all running processes on
        //the computer
        foreach (Process clsProcess in Process.GetProcesses()) {
            //now we're going to see if any of the running processes
            //match the currently running processes by using the StartsWith Method,
            //this prevents us from incluing the .EXE for the process we're looking for.
            //. Be sure to not
            //add the .exe to the name you provide, i.e: NOTEPAD,
            //not NOTEPAD.EXE or false is always returned even if
            //notepad is running
            if (clsProcess.ProcessName.StartsWith(name))
            {
                //since we found the proccess we now need to use the
                //Kill Method to kill the process. Remember, if you have
                //the process running more than once, say IE open 4
                //times the loop thr way it is now will close all 4,
                //if you want it to just close the first one it finds
                //then add a return; after the Kill
                try 
                {
                    clsProcess.Kill();
                }
                catch
                {
                    return false;
                }
                //process killed, return true
                return true;
            }
        }
        //process not found, return false
        return false;
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-08T14:27:11.467

在我的托盘应用程序中，我需要清理 Excel 和 Word 互操作。所以这个简单的方法一般会杀死进程。

这使用通用异常处理程序，但可以轻松拆分为多个异常，如其他答案中所述。如果我的日志记录产生很多误报（即不能杀死已经杀死的），我可能会这样做。但到目前为止如此指导（工作笑话）。

```
/// <summary>
/// Kills Processes By Name
/// </summary>
/// <param name="names">List of Process Names</param>
private void killProcesses(List<string> names)
{
    var processes = new List<Process>();
    foreach (var name in names)
        processes.AddRange(Process.GetProcessesByName(name).ToList());
    foreach (Process p in processes)
    {
        try
        {
            p.Kill();
            p.WaitForExit();
        }
        catch (Exception ex)
        {
            // Logging
            RunProcess.insertFeedback("Clean Processes Failed", ex);
        }
    }
} 
```

这就是我当时的称呼：

```
killProcesses((new List<string>() { "winword", "excel" })); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T17:02:42.670

像这样的东西会起作用：

```
foreach ( Process process in Process.GetProcessesByName( "winword" ) )
{
    process.Kill();
    process.WaitForExit();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-21T11:30:06.797

检测进程是否正在运行并告诉用户手动关闭它是更好的做法，更安全和更有礼貌。当然，如果它们消失了，您也可以添加超时并终止进程...

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-06-17T09:02:06.030

我打开了一个 Word 文件，2。现在我通过 vb.net 运行时以编程方式打开另一个 word 文件。3.我想通过编程方式单独杀死第二个进程。4.不要杀死第一个进程

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2015-03-25T19:29:48.053

请看下面的例子

```
public partial class Form1 : Form
{
    [ThreadStatic()]
    static Microsoft.Office.Interop.Word.Application wordObj = null;

    public Form1()
    {
        InitializeComponent();
    }

    public bool OpenDoc(string documentName)
    {
        bool bSuccss = false;
        System.Threading.Thread newThread;
        int iRetryCount;
        int iWait;
        int pid = 0;
        int iMaxRetry = 3;

        try
        {
            iRetryCount = 1;

        TRY_OPEN_DOCUMENT:
            iWait = 0;
            newThread = new Thread(() => OpenDocument(documentName, pid));
            newThread.Start();

        WAIT_FOR_WORD:
            Thread.Sleep(1000);
            iWait = iWait + 1;

            if (iWait < 60) //1 minute wait
                goto WAIT_FOR_WORD;
            else
            {
                iRetryCount = iRetryCount + 1;
                newThread.Abort();

                //'-----------------------------------------
                //'killing unresponsive word instance
                if ((wordObj != null))
                {
                    try
                    {
                        Process.GetProcessById(pid).Kill();
                        Marshal.ReleaseComObject(wordObj);
                        wordObj = null;
                    }
                    catch (Exception ex)
                    {
                    }
                }

                //'----------------------------------------
                if (iMaxRetry >= iRetryCount)
                    goto TRY_OPEN_DOCUMENT;
                else
                    goto WORD_SUCCESS;
            }
        }
        catch (Exception ex)
        {
            bSuccss = false;
        }
    WORD_SUCCESS:

        return bSuccss;
    }

    private bool OpenDocument(string docName, int pid)
    {
        bool bSuccess = false;
        Microsoft.Office.Interop.Word.Application tWord;
        DateTime sTime;
        DateTime eTime;

        try
        {
            tWord = new Microsoft.Office.Interop.Word.Application();
            sTime = DateTime.Now;
            wordObj = new Microsoft.Office.Interop.Word.Application();
            eTime = DateTime.Now;
            tWord.Quit(false);
            Marshal.ReleaseComObject(tWord);
            tWord = null;
            wordObj.Visible = false;
            pid = GETPID(sTime, eTime);

            //now do stuff
            wordObj.Documents.OpenNoRepairDialog(docName);
            //other code

            if (wordObj != null)
            {
                wordObj.Quit(false);
                Marshal.ReleaseComObject(wordObj);
                wordObj = null;
            }
            bSuccess = true;
        }
        catch
        { }

        return bSuccess;
    }

    private int GETPID(System.DateTime startTime, System.DateTime endTime)
    {
        int pid = 0;

        try
        {
            foreach (Process p in Process.GetProcessesByName("WINWORD"))
            {
                if (string.IsNullOrEmpty(string.Empty + p.MainWindowTitle) & p.HasExited == false && (p.StartTime.Ticks >= startTime.Ticks & p.StartTime.Ticks <= endTime.Ticks))
                {
                    pid = p.Id;
                    break;
                }
            }
        }
        catch
        {
        }
        return pid;
    } 
```

# asp.net - 您何时会在 Web 自定义控件上使用 Web 用户控件？

> ID：116096
> 
> 赞同：8
> 
> 时间：2008-09-22T17:00:27.980
> 
> 标签：asp.net, controls, client-side, web-user-controls

有人可以解释何时使用这些吗？在许多情况下，它们几乎可以互换。

自定义控件被添加到工具栏，而用户控件 (ascx) 不能。自定义控件不会在设计器中呈现，而用户控件会呈现。除此之外，您如何选择哪个是正确的？

此外，我正在寻找从 JavaScript (GetElementById) 访问控件的最佳方法。因此，添加客户端支持的正确方向会很棒。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-22T17:06:29.713

这是来自微软的网站：

**网络用户控件**

*   更容易创建
*   对使用视觉设计工具的消费者的支持有限
*   每个应用程序都需要一个单独的控件副本
*   无法添加到 Visual Studio 中的工具箱
*   适合静态布局

**网页自定义控件**

*   更难创造
*   为消费者提供完整的视觉设计工具支持
*   在全局程序集缓存中只需要一个控件副本
*   可以添加到 Visual Studio 的工具箱中
*   适合动态布局

[http://msdn.microsoft.com/en-us/library/aa651710(VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa651710(VS.71).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T17:09:14.230

UserControl 必须由网站托管，并使用代码隐藏模型与 ASCX 文件相关联。因此，使用用户控件，您可以在 ASCX 文件中定义控件的基本标记，并将所有代码放入 ASCX.CS 文件中。

WebControl 只是一个类，不允许您定义关联的 ASCX 文件；您需要重写 Render 函数以打印出控件将要生成的任何标记。但是，由于它不依赖于 ASCX，因此可以将其放入共享库中。（一个DLL）

回答您的问题：Web 控件和 UserControls 都具有相同的好处 - 它们占用页面的某些部分并将其封装。当相关代码仅适用于我的一个网站时，我使用 UserControls；如果我在多个站点中使用类似的代码，那么我会将代码转换为 WebControl 并将其移动到共享库中。这样，当我需要更新它时，我会在一个地方而不是 3 或 4 处进行更改。

提示：您可以通过从标准 ASP WebControl 之一继承来避免定义自己的 WebControl 的一些麻烦。许多标准控件（如 Label 或 Image）不是密封的 - 您可以从它们继承并覆盖它们的方法以创建您自己的该控件的专用版本。这比直接扩展 WebControl 更容易且不易出错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T20:02:50.693

用户控件与项目一起编译，并且必须使用与项目相同的语言编写。

自定义控件可以放在画布上并通过设置属性进行配置，而程序员无需了解所有内部结构（可能是好的或坏的）。此外，由于自定义控件是在 dll 中预编译的，因此不需要使用与项目相同的语言编写。

如果注意细节，可以编写自定义控件以在设计器中显示（尽管这可能不值得麻烦）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T17:08:53.047

我认为您正在考虑的是自定义控件与用户控件，两者都是 Web 控件。用户控件没有设计器 UI，而自定义控件可以。

通常，我们使用 UserControls 将我们的 UI 分成不同的功能区域。但是，如果我们创建想要跨多个解决方案使用的功能，我们通常将它们创建为自定义控件。

只能将自定义控件添加到工具箱中。

以下是微软的摘录：

[http://msdn.microsoft.com/en-us/library/aa651710(VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa651710(VS.71).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-02T12:56:01.193

## 用户控制

*   易于实现，因为您可以在标记部分直观地拖放其他控件。
*   Visual Studio 中良好的设计器支持
*   只能在同一个项目中重复使用
*   如果需要，您还可以创建模板化的用户控件（虽然不常用）

## 自定义服务器控件

*   更难创建，但有多种可能的场景：
    *   继承现有的控件，如标签、按钮、...
    *   创建*复合控件*
    *   制作模板化+数据绑定控件
*   在其他项目中具有很好的可重用性
*   非常适合制作可在公司范围内使用的框架

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T17:07:29.960

要从 JavaScript 访问它们，您应该使用`document.GetElementById('<%=TheControl.ClientID%>')`.
Web 控件和用户控件的区别在于，用户控件具有带有 html 定义的 ascx 文件，而 Web 控件没有；这就是其他差异的原因。此外，对于您不能使用的用户控件`new Control()`，您需要改为使用，`LoadControl`因为它会加载 .ascx。
对于从 .Net 控件继承的简单控件，例如带有验证功能的文本框或类似的东西，我倾向于使用 Web 控件；对于带有 html 和内部控件的更复杂的控件，我倾向于使用用户控件。但这基本上是您的个人喜好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T17:09:19.097

简单的：

用户控制：

*   UserControl 需要 *.ascx 文件来完成实例初始化。因此，您不能从另一个派生一个 UserControl。
*   UserControl 有 *.ascx 文件，因此您可以轻松编写 HTML。并且（最大的优点）您可以更改文件的 *.ascx 内容，并在 Web 应用程序的运行时更改控件的外观。

网络控制：

*   WebControl 是程序集中的“唯一”类，因此您可以从它们派生另一个控件。
*   WebControl 没有 *.ascx（或其他）文件，没有人可以更改此控件的外观（例如不合格的网络管理员）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T17:13:24.610

这并不完全正确。Web 控件就像一个按钮，您可以为它构建一个设计器，这样它就可以在设计器模式下呈现。

主要区别在于 webcontrol 是一个原子单元。它应该像 Visual Studio 中的所有其他默认服务器控件一样工作（包括设计器模式）。此外，它完全用代码构建，并存储在 DLL 中（即它没有 html 部分，也没有任何内容发布到网站上）。

而用户控件是 ASP 包含的 .NET 版本。有一个带有相应代码隐藏页面的 html 片段。有一个 ASCX 文件在发布期间被推送到网站。附加说明，这些比服务器控件更容易开发。

这个比那个好吗？这取决于目标是什么。但总的来说，如果您正在构建一些供其他人/项目使用的东西，请使用网络控件。如果您正在为自己的项目消费构建一些东西，那么请使用用户控件。

现在，就 JS 而言，这是一件更难描述的事情，并且值得单独进行相当大的讨论。对于服务器控件，您需要为 JS 提供挂钩以获取每个内部控件的客户端 ID。作为用户控件，您可以直接在用户控件上编写 JS 代码，并以与在 ASPX 页面中相同的方式访问控件。

# java - 我应该将我的项目文件置于版本控制之下吗？

> ID：116121
> 
> 赞同：90
> 
> 时间：2008-09-22T17:05:14.507
> 
> 标签：java, eclipse, version-control, ide

我是否应该将项目文件（如 Eclipse 的 .project、.classpath、.settings）置于版本控制之下（例如 Subversion、GitHub、CVS、Mercurial 等）？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2008-09-23T06:25:25.423

您确实希望将**任何可移植设置文件**保留在版本控制中，
这意味着：
任何没有绝对路径的文件。
包括：

*   。项目，
*   .classpath（*如果没有使用绝对路径*，可以使用 IDE 变量或用户环境变量）
*   **IDE 设置**（这是我强烈反对“接受”答案的地方）。这些设置通常包括**静态代码分析规则**，这些规则对于将项目加载到他/她的工作区的任何用户始终如一地执行至关重要。
*   IDE 特定的设置建议必须写在一个大的 README 文件中（当然也是版本化的）。

我的经验法则：
您必须能够将项目加载到工作区中，并在其中拥有在 IDE 中正确设置并在几分钟内开始运行所需的一切。
没有额外的文档，维基页面阅读或什么没有。
加载它，设置它，去。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-09-22T17:12:44.707

.project 和 .classpath 文件是的。但是，我们不会将 IDE 设置保留在版本控制中。有一些插件在持久化设置方面做得不好，我们发现一些设置从一台开发机器到另一台机器的移植性不是很好。因此，我们有一个 Wiki 页面，其中突出显示了开发人员设置其 IDE 所需的步骤。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-09-22T17:13:38.930

这些是我认为生成的文件，因此我从不将它们置于版本控制之下。它们可能因机器和开发人员而异，例如当人们安装了不同的 Eclipse 插件时。

相反，我使用了一个构建工具 (Maven)，它可以在您进行新的结帐时生成这些文件的初始版本。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-23T09:56:21.033

我在这里的两个选择之间左右为难。

一方面，我认为每个人都应该可以自由使用他们最有效率的开发工具集，只要所有源工件都存储在版本控制中，并且构建脚本（比如 ANT 或 Maven）通过以下方式确保符合标准准确指定要使用的 JDK、要依赖的第三方库的版本、运行样式检查（例如 checkstyle）和运行单元测试等。

另一方面，我认为很多人都使用相同的工具（例如 Eclipse），通常在设计时标准化一些东西而不是在构建时标准化要好得多 - 例如 Checkstyle 作为 Eclipse 插件比作为一个 ANT 或 Maven 任务 - 最好对一组开发工具和一组通用插件进行标准化。

我在一个项目中工作，每个人都使用完全相同的 JDK、相同版本的 Maven、相同版本的 Eclipse、相同的 Eclipse 插件集和相同的配置文件（例如 Checkstyle 配置文件、代码格式化程序规则等）。所有这些都保存在源代码控制中 - .project、.classpath 以及 .settings 文件夹中的所有内容。在项目的初始阶段，当人们不断调整依赖关系或构建过程时，它让生活变得非常轻松。在为项目添加新的启动器时，它也有很大帮助。

总的来说，我认为如果发生宗教战争的可能性不大，您应该标准化基本的开发工具和插件集，并确保构建脚本中的版本合规性（例如通过明确指定 Java 版本）。I不要认为将 JDK 和 Eclipse 安装存储在源代码管理中有什么好处。其他不是派生工件的东西——包括你的项目文件、配置和插件首选项（特别是代码格式化程序和样式规则）——都应该进入源代码控制。

PS 如果您使用 Maven，则有一种说法是 .project 和 .classpath 文件是派生的工件。仅当您每次进行构建时都生成它们，并且在从 POM 生成它们之后从未手动调整它们（或通过更改某些首选项无意中更改它们）时，这才是正确的

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-22T18:27:17.677

不，因为我只有构建软件所需的版本控制文件。此外，个别开发人员可能有自己的项目特定设置。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-22T18:24:40.603

不，我是一个重度[Maven](http://maven.apache.org)用户，使用[Q for Eclipse](http://code.google.com/p/q4e/)插件创建并保持 .project 和 .classpath 更新。对于其他的东西，比如插件的设置，我通常会维护一个 README 或 Wiki 页面。

同样，我与之合作过的那些更喜欢其他 IDE 的人只需使用 Maven 插件来生成让他们的 IDE（和他们自己）满意所需的文件。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-23T04:50:31.097

我想这都是意见 - 但多年来的最佳实践表明，特定于给定 IDE 的文件不应该存储在源代码控制中，除非您的整个组织都在一个 IDE 上进行了标准化，并且您从来没有任何切换的意图。

无论哪种方式，您绝对不希望存储用户设置 - 并且 .project 可以包含真正特定于开发人员的设置。

我建议使用 Maven 或 Ant 之类的东西作为标准化的构建系统。任何开发人员都可以在几秒钟内获得在其 IDE 中配置的类路径。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-22T17:06:57.153

是的，除了 .settings 文件夹。提交其他文件对我们来说效果很好。[这里](https://stackoverflow.com/questions/81567/how-do-you-handle-different-java-ides-and-svn)有一个类似的问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-10-28T17:05:32.380

虽然我普遍同意“不版本生成文件”的方法，但我们遇到了问题，不得不切换回去。

> 注意：我也对[VonC 的回答](https://stackoverflow.com/questions/116121/do-you-keep-your-project-files-under-version-control/119377#119377)感兴趣，特别是关于“在几分钟内启动 Eclipse”这一点。但这对我们来说不是决定性的。

我们的上下文是Eclipse+Maven，使用m2eclipse插件。我们有一个共同的开发环境，尽可能的有共同的目录。但有时有人会尝试一个插件，或者更改配置中的一些小东西，或者为不同的分支导入第二个工作区......

我们的问题是 .project 的生成是在 Eclipse 中导入项目时完成的，但**在以后的所有情况下都不会更新**。这很可悲，而且可能不是永久性的，因为 m2eclipse 插件会改进，但现在确实如此。所以我们最终有不同的配置。我们今天所拥有的是：*在某些机器上的许多项目中添加了几种性质，然后它们的行为就大不相同了*:-(

**我们看到的唯一解决方案是对 .project 文件进行版本控制**（为避免风险，我们将对 .classpath 和 .settings 执行相同的操作）。这样，当一个开发人员更改她的 pom 时，本地文件会使用 m2eclipse 更新，所有这些文件都会一起提交，其他开发人员将看到所有更改。

> 注意：在我们的例子中，我们使用相对文件名，所以我们可以共享这些文件。

所以，为了回答你的问题，我说是的，提交这些文件。

* * *

我也喜欢：

*   富卖家的[回答](https://stackoverflow.com/questions/1429125/when-working-with-eclipse-should-i-add-the-workspace-to-the-source-control/1429225#1429225)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T17:06:31.537

似乎这些项目文件在您处理项目时会随着时间而改变，所以是的，我将它们置于版本控制之下。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-15T06:33:00.840

是的。除了构建输出之外的所有内容。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-09T13:10:25.903

我们使用 IntelliJ IDEA，并将项目 (.ipr) 和模块 (.iml) 文件的“.sample”版本置于版本控制之下。

恕我直言，这里比版本控制更重要的是*共享和重用。*但是，如果您要共享这些配置，还有什么比存储库更好的放置它们的地方，就在其他所有东西旁边。

共享和版本化项目文件的一些优点：

*   您可以检查任何标签/分支并快速开始工作
*   使新开发人员更容易首先设置开发环境并加快速度
*   这更好地遵守了 DRY，这总是令人深感满足。在此之前，*所有*开发人员都必须时不时地设置这些东西，基本上是重复工作。当然，每个人都有自己避免重复的小方法，但从团队整体来看，重复的努力很多。

请注意，在 IDEA 中，这些文件包含以下配置：“源”和“测试源”目录是什么；关于外部依赖的一切（库 jars 的位置，以及相关的源代码或 javadocs）；构建选项等。这是因开发人员而异的东西（我非常不同意*这*[一点](https://stackoverflow.com/questions/116121/do-you-keep-your-project-files-under-version-control/116176#116176)）。IDEA 在别处存储更多个人 IDE 设置，以及任何插件配置。（我不太了解 Eclipse；这可能会也可能不会完全不同。）

我同意[这个答案](https://stackoverflow.com/questions/116121/do-you-keep-your-project-files-under-version-control/119377#119377)，说：

> 您必须能够将项目加载到工作区中，并在其中包含在 IDE 中正确设置并在几分钟内开始运行所需的一切。[...]加载它，设置它，去。

多亏了版本化的项目文件，我们才有了这样的结果。

# python - 如何在 Word 2007 .docx 文件中搜索单词？

> ID：116139
> 
> 赞同：50
> 
> 时间：2008-09-22T17:08:12.423
> 
> 标签：python, ms-word, openxml, docx

我想在 Word 2007 文件 (.docx) 中搜索文本字符串，例如，可以/将在 Word 中搜索的“一些特殊短语”。

有没有办法从 Python 中查看文本？我对格式化不感兴趣——我只想将文档分类为有或没有“一些特殊短语”。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2009-12-30T12:08:33.283

在阅读了您上面的帖子后，我制作了一个 100% 原生 Python docx 模块来解决这个特定问题。

```
# Import the module
from docx import *

# Open the .docx file
document = opendocx('A document.docx')

# Search returns true if found    
search(document,'your search string') 
```

docx 模块位于[https://python-docx.readthedocs.org/en/latest/](https://python-docx.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-09-22T17:22:10.097

更准确地说，.docx 文档是 OpenXML 格式的 Zip 存档：您必须首先解压缩它。
我下载了一个示例（谷歌：*一些搜索词文件类型：docx*），解压缩后我找到了一些文件夹。*word*文件夹包含文档本身，位于文件document.xml*中*。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-09-22T23:12:59.630

在此示例中，“Course Outline.docx”是一个 Word 2007 文档，其中包含单词“Windows”，并且不包含短语“random other string”。

```
>>> import zipfile
>>> z = zipfile.ZipFile("Course Outline.docx")
>>> "Windows" in z.read("word/document.xml")
True
>>> "random other string" in z.read("word/document.xml")
False
>>> z.close() 
```

[基本上，您只需使用zipfile](http://docs.python.org/lib/module-zipfile.html)打开 docx 文件（这是一个 zip 存档），然后在 'word' 文件夹中的 'document.xml' 文件中找到内容。如果您想要更复杂，则可以[解析 XML](https://docs.python.org/3/library/xml.etree.elementtree.html)，但如果您只是在寻找一个短语（您知道它不会是标签），那么您可以在 XML 中查找字符串。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-11-15T11:01:08.003

在 Word 文档 XML 文件中搜索的一个问题是文本可以在任何字符处拆分为元素。如果格式不同，它肯定会被拆分，例如在 Hello **World**中。但它*可以*在任何时候拆分，这在 OOXML 中是有效的。因此，即使在短语中间格式没有改变，您最终也会像这样处理 XML！

```
<w:p w:rsidR="00C07F31" w:rsidRDefault="003F6D7A">

<w:r w:rsidRPr="003F6D7A">

<w:rPr>

<w:b /> 

</w:rPr>

<w:t>Hello</w:t> 

</w:r>

<w:r>

<w:t xml:space="preserve">World.</w:t> 

</w:r>

</w:p> 
```

您当然可以将其加载到 XML DOM 树中（不确定这将在 Python 中是什么）并要求仅将文本作为字符串获取，但您最终可能会因为 OOXML 规范而出现许多其他“死胡同” 6000 页长，MS Word 可以写出很多你意想不到的“东西”。因此，您最终可以编写自己的文档处理库。

或者您可以尝试使用[Aspose.Words](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)。

它以 .NET 和 Java 产品的形式提供。两者都可以从 Python 中使用。一个通过 COM 互操作，另一个通过 JPype。请参阅 Aspose.Words 程序员指南，在其他编程语言中使用 Aspose.Words（抱歉，我不能发布第二个链接，stackoverflow 还没有让我这样做）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-12-09T10:51:23.733

您可以使用`docx2txt`获取 docx 中的文本，而不是在该 txt 中搜索

```
npm install -g docx2txt
docx2txt input.docx # This will  print the text to stdout 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-22T17:16:43.417

docx 只是一个 zip 存档，里面有很多文件。也许你可以看看那些文件的一些内容？除此之外，您可能必须找到一个理解单词格式的库，以便您可以过滤掉您不感兴趣的内容。

第二种选择是与 word 互操作并通过它进行搜索。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-22T17:17:15.037

docx 文件本质上是一个 zip 文件，其中包含一个 xml。
xml 包含格式，但它也包含文本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-22T23:03:32.773

OLE 自动化可能是最简单的。您必须考虑格式化，因为 XML 中的文本可能如下所示：

```
<b>Looking <i>for</i> this <u>phrase</u> 
```

使用简单的文本扫描没有简单的方法可以找到它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T17:17:26.347

您应该能够使用 MSWord ActiveX 界面提取要搜索的文本（或者，可能进行搜索）。我不知道你如何从 Python 访问 ActiveX。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-18T19:34:32.707

您也可以考虑使用来自[OpenXMLDeveloper.org的库](http://openxmldeveloper.org/default.aspx)

# msbuild - 使用 AssemblyInfo 自动更新多个 AssemblyInfo.cs 文件

> ID：116140
> 
> 赞同：8
> 
> 时间：2008-09-22T17:08:16.543
> 
> 标签：msbuild, continuous-integration, teamcity

我有几个 AssemblyInfo.cs 文件作为单个解决方案中许多项目的一部分，我作为 TeamCity 的一部分自动构建。

为了使 msbuild 脚本更易于维护，我希望能够将 AssemblyInfo 社区任务与 ItemGroup 结合使用，例如

```
<ItemGroup>
     <AllAssemblyInfos Include="..\**\AssemblyInfo.cs" />
</ItemGroup>

<AssemblyInfo AssemblyTitle="" AssemblyProduct="$(Product)" AssemblyCompany="$(Company)" AssemblyCopyright="$(Copyright)" 
                  ComVisible="false" CLSCompliant="false" CodeLanguage="CS" AssemblyDescription="$(Revision)$(BranchName)" 
                  AssemblyVersion="$(FullVersion)" AssemblyFileVersion="$(FullVersion)" OutputFile="@(AllAssemblyInfos)" /> 
```

这显然不起作用，因为 OutputFile 不能是引用的 ItemGroup。

任何人都知道如何使这项工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-22T17:14:52.640

我们在项目中使用“链接”文件。解决方案资源管理器 -> 添加 Existin 项 -> .. select_file .. -> arrow_on_left_of_add_button -> 添加为链接

然后选择的文件（现在是 AssemblyInfo.cs ）不会复制到项目的目录中，bud 仅从指定的路径链接。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-22T17:28:49.440

尝试将 @ 更改为 % 如下

```
<ItemGroup>
 <AllAssemblyInfos Include="..\**\AssemblyInfo.cs" />
</ItemGroup>

<AssemblyInfo AssemblyTitle="" AssemblyProduct="$(Product)" AssemblyCompany="$(Company)" AssemblyCopyright="$(Copyright)" 
                              ComVisible="false" CLSCompliant="false" CodeLanguage="CS" AssemblyDescription="$(Revision)$(BranchName)" 
                              AssemblyVersion="$(FullVersion)" AssemblyFileVersion="$(FullVersion)" OutputFile="%(AllAssemblyInfos)" /> 
```

这会为 AllAssemblyInfos 中的每个条目创建一个调用。

也看看这篇文章，应该会有所帮助。

[http://blogs.msdn.com/aaronhallberg/archive/2006/09/05/msbuild-batching-generating-a-cross-product.aspx](http://blogs.msdn.com/aaronhallberg/archive/2006/09/05/msbuild-batching-generating-a-cross-product.aspx)

# c# - C# 3.0 Auto-Properties - 是否可以添加自定义行为？

> ID：116142
> 
> 赞同：6
> 
> 时间：2008-09-22T17:08:24.653
> 
> 标签：c#, .net, properties, automatic-properties

我想知道是否有任何方法可以将自定义行为添加到自动属性获取/设置方法中。

我能想到的一个明显案例是希望每个 set 属性方法都调用任何`PropertyChanged`事件处理程序作为`System.ComponentModel.INotifyPropertyChanged`实现的一部分。这将允许一个类具有许多可以观察到的属性，其中每个属性都使用自动属性语法定义。

基本上我想知道是否有任何类似于 get/set 模板或 post get/set hook 的类范围。

（我知道可以通过稍微冗长的方式轻松实现相同的最终功能 - 我只是讨厌重复模式）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-22T17:10:37.550

不，您必须为自定义行为使用“传统”属性定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T17:12:46.203

不，你不能：自动属性是显式访问私有字段的快捷方式。例如

```
public string Name { get; set;} 
```

是一个捷径

```
private string _name;
public string Name { get { return _name; } set { _name = value; } }; 
```

如果要放置自定义逻辑，则必须显式编写 get 和 set。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T17:27:20.083

查看[PostSharp](http://www.postsharp.org/ "PostSharp")。它是一个 AOP 框架，用于典型的问题“这个代码模式我一天做几百次，我怎样才能自动化它？”。您可以使用 PostSharp 进行简化（例如）：

```
public Class1 DoSomething( Class2 first, string text, decimal number ) {
    if ( null == first ) { throw new ArgumentNullException( "first" ); }
    if ( string.IsNullOrEmpty( text ) ) { throw new ArgumentException( "Must be not null and longer than 0.", "text" ) ; }
    if ( number < 15.7m || number > 76.57m ) { throw new OutOfRangeArgumentException( "Minimum is 15.7 and maximum 76.57.", "number"); }

    return new Class1( first.GetSomething( text ), number + text.Lenght );
} 
```

到

```
 public Class1 DoSomething( [NotNull]Class2 first, [NotNullOrEmpty]string text, [InRange( 15.7, 76.57 )]decimal number ) {
        return new Class1( first.GetSomething( text ), number + text.Lenght );
} 
```

但这并不是全部！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T17:12:23.427

如果这是您在开发过程中经常重复的行为，您可以为您的特殊类型的属性创建自定义代码片段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T17:12:59.463

您可以考虑使用[PostSharp](http://www.postsharp.org/)编写设置器的拦截器。它既是 LGPL 又是 GPLed，具体取决于您使用的库的哪些部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T17:18:42.447

我能想到的最接近的解决方案是使用辅助方法：

```
public void SetProperty<T>(string propertyName, ref T field, T value)
 { field = value;
   NotifyPropertyChanged(propertyName);
 }

public Foo MyProperty 
 { get { return _myProperty}
   set { SetProperty("MyProperty",ref _myProperty, value);}
 } Foo _myProperty; 
```

# .net - 如何在 IIS 6 和 7 上安装 SSL 证书？

> ID：116147
> 
> 赞同：0
> 
> 时间：2008-09-22T17:09:07.773
> 
> 标签：.net, iis-7, iis-6, windows-server-2008, windows-server-2003

是否有工具或编程方式将 SSL 证书安装到 IIS 6 和 7 中的默认网站？理想情况下，我正在寻找可以通过非托管代码或 .NET 托管代码完成的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T17:22:20.457

你可以看看

[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/bf6b6472-f58e-4271-9297-284357f69023.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/bf6b6472-f58e-4271-9297-284357f69023.mspx?mfr=true)

类似于： set ssl = CreateObject("IIS.CertObj")

ssl.InstanceName = "0.0.0.0:443"

ssl.Import pfxfile, pfxfilepassword, true, true

# c++ - 将对象属性绑定到 WTL 控件的框架

> ID：116154
> 
> 赞同：1
> 
> 时间：2008-09-22T17:10:15.727
> 
> 标签：c++, wtl

我想要这样的东西：

```
class Foo {
private:
  int bar;
public:
  void setBar(int bar);
  int getBar() const;
}

class MyDialog : public CDialogImpl<MyDialog> {
  BEGIN_MODEL_MAPPING()
    MAP_INT_EDITOR(m_editBar, m_model, getBar, setBar);
  END_MODEL_MAPPING()
  // other methods and message map
private:
  Foo * m_model;
  CEdit m_editBar;
} 
```

如果我能提供我的自定义验证，那就太好了：

```
MAP_VALIDATED_INT_EDITOR(m_editBar, m_model, getBar, setBar, validateBar)
...
bool validateBar (int value) {
  // custom validation
} 
```

有没有人见过这样的东西？

PS 我不喜欢 DDX，因为它很旧而且不灵活，而且我不能使用 getter 和 setter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-02T10:33:25.680

DDX 映射只是一系列`if`语句，因此您可以轻松编写自己的 DDX 宏。

```
#define DDX_MAP_VALIDATED_INT_EDITOR(control, variable, getter, setter, validator)\
    if(nCtlID==control.GetDlgCtrlID())\
    {\
        if(bSaveAndValidate)\
        {\
            int const value=control.GetDlgItemInt();\
            if(validator(value))\
            {\
                variable->setter(value);\
            }\
            else\
            {\
                return false;\
            }\
        }\
        else\
        {\
            control.SetDlgItemInt(variable->getter());\
        }\
    } 
```

这是未经测试的，但如果你把它放在 DDX 地图中，它应该可以按照你的例子工作。它应该给你的想法。当然，您可以将其提取到一个函数中，这是标准 DDX 宏所做的：它们只是执行外部操作`if`，然后调用一个函数。这将允许您为不同类型的函数重载`variable`（例如指针与引用/值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-23T09:54:45.763

[Cocoa Bindings](http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaBindings/CocoaBindings.html)提供了你想要的东西，但它们只在 Mac/Objective-C 单词中可用。[GNUstep](http://www.mail-archive.com/help-gnustep@gnu.org/msg01423.html)是它的免费版本，但它仍然是 Objective-C，而不是 C++。

但是，它可能是对自己的框架的一个很好的启发，或者是进一步研究的一个很好的起点。

# sql - Delphi：Paradox DB 字段名称问题（字段名称中的空格）

> ID：116163
> 
> 赞同：7
> 
> 时间：2008-09-22T17:12:18.513
> 
> 标签：sql, delphi, paradox, tquery

我有一个来自遗留系统的悖论表，我需要在其上运行单个查询。字段名称中有空格 - 即“Street 1”。当我尝试在 delphi 中仅针对“Street 1”字段制定查询时，出现错误 - 关键字的使用无效。令牌：1，行号：1

Delphi V7 - 对象 pascal，标准 Tquery 对象名称 query1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-22T18:10:37.797

您需要在查询中使用表名作为字符串前缀。

例如：字段名称为'Street 1'，表名为customers 选择为：

```
SELECT customers."Street 1" FROM customers WHERE ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T17:29:20.157

在这种情况下，您通常需要引用字段名称。例如：

select * from t1 where "street 1" = 'test';

我在一个 paradox 7 表上试过这个，它奏效了。如果这没有帮助，您可以发布您尝试使用的查询吗？提供这些信息会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T18:05:00.087

我只需要客户表中保存的地址详细信息中的街道信息。如果我执行 SELECT * FROM customers，我可以让它正常工作，但是这是一个非常大的表并返回许多结果。如果我从客户中选择“Street 1”，则返回的每条记录中的输出都是“Street 1”——即它不返回实际数据。它必须与使用“

谢谢你的帮助

乔

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-22T20:00:11.527

我认为您必须使用 [ 和 ] 而不是“：

```
SELECT customers.[Street 1] FROM customers WHERE ... 
```

# java - 您如何在版本控制下处理开发人员的个人文件？

> ID：116164
> 
> 赞同：7
> 
> 时间：2008-09-22T17:12:19.793
> 
> 标签：java, version-control

我们存储库中的某些文件对每个开发人员都是独立的。例如，一些开发人员使用本地数据库，该数据库在项目的属性文件中进行配置。所以每个开发者都有不同的设置。当一位开发人员提交时，他总是必须注意不要提交他单独配置的文件。

你怎么处理这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T17:15:23.840

我们的属性文件位于“属性”目录下。每个开发人员都有自己的“username.properties”文件，他们可以覆盖环境特定文件中的属性，例如“dev.properties”或“test.properties”。这利用了 ANT 的不可变属性（包括个人优先，然后环境属性）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T17:37:03.650

在源代码管理中保留一组默认值，然后：

*   让每个开发人员都有一组他们自己管理的可选配置（​​例如，不保存在源代码管理中）或

*   让每个开发人员在某种标识方案下将自己的配置保存在源代码控制中（@Dustin 使用的用户名.properties）

将开发人员的特定配置保存在源代码控制中的优势在于可以轻松地从一台计算机迁移到另一台计算机（例如，在硬件故障或升级的情况下）。它是一个简单的 svn co [repos] 和 ant

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T17:14:13.063

使用 SVN:Ignore （或其等效项）确保它们没有被检入您的主干分支。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T17:15:19.753

我们使用 ant 构建或应用程序，并且我们的 ant 构建文件具有对如下文件名的引用：

${env.COMPUTERNAME}-.properties

此文件中的所有属性将覆盖主构建文件中的属性（如果存在）。因此，开发人员可以创建一个以他们的机器名称命名的覆盖文件，以覆盖他们喜欢的任何属性，例如数据库名称和或 jdbc url。然后可以将该文件签入版本控制

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T18:26:07.323

我们只是在开发人员之间保持一个标准。每个人都使用相同的目录、数据库名称和用户，所以我们不需要担心这些事情。

亲切的问候

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T17:15:14.653

好的，但是例如一个 db-config-file 应该保持在版本控制之下并且不能被忽略。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T17:23:28.550

如果他们必须在同一个存储库中，请创建一个“dev”文件夹或其他东西，然后为每个开发人员创建一个子文件夹以签入他们的用户文件。

或者有一个单独的用户文件存储库。

或者让开发人员自行决定如何处理自己的文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T17:25:53.800

这在上一篇文章中得到了解答。虽然问题更多地针对 WebApps，但实际问题正是您现在面临的问题。

[您如何在不同的暂存环境中维护 java webapps？](https://stackoverflow.com/questions/93944/how-do-you-maintain-java-webapps-in-different-staging-environments#94280)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T17:26:26.577

我们的项目的设置与其他项目类似，其中您拥有开发人员独有的某种属性文件，但是我不认为应将特定于单个开发人员的文件检入源代码管理。

我们有一个`personal.properties`已加载并覆盖任何项目默认值的文件。该文件位于用户主目录中。对于特定于用户的任何值，默认值设置如下：

```
database_user_name = DATABASE_USER_NAME_MUST_BE_SET_IN_PERSONAL_PROPERTIES_FILE 
```

开发人员永远不会编辑该文件，因此不会将用户特定信息签入源代码管理，如果开发人员忘记在其 personal.properties 文件中设置值，您会收到一个明显的错误，例如：

```
Unable to login to database with username: "DATABASE_USER_NAME_MUST_BE_SET_IN_PERSONAL_PROPERTIES_FILE" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T17:40:02.707

使用模板，您不要将 db-config 添加到源代码控制（实际上您在他身上使用 SVN:IGNORE），并添加 db-config.tmpl 或 db-config.template 或 db-config.tmp 或其他明确说明的内容你它是一个模板。

该文件具有基本配置，旨在复制到“db-config”中（只是复制后将模板留在那里以接收更新）供每个开发人员自定义。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-22T17:57:03.617

使用 git 或其他去中心化的版本控制系统。然后每个开发人员可以将他的私有更改保留在他自己的私有分支中，在该分支上工作，然后从该分支中​​挑选已完成的功能回到开发的主干中。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2008-09-22T17:19:40.180

不要将它们置于版本控制之下，并使用工具的忽略功能来防止它们被意外签入。相反，对生成它们的脚本进行版本控制，该脚本可以使用版本控制的数据和本地的非版本控制的数据。这使它们保持最新，同时进行任何适当的本地修改，而不会有这些修改滑回存储库的危险。

编辑：某些文件格式可以选择使用本地覆盖。这些可以签入，但一般来说，许多人不够聪明，无法做到这一点。因此，这种解决方法。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-09-22T17:23:24.057

它们**绝对**应该受到版本控制。您可以使用用户环境中的环境变量来检测开发人员特定的属性。在蚂蚁中，例如：

```
<property environment="env" />
<property file="${basedir}/online/${env.LOGNAME}.build.properties" />
<property file="${basedir}/online/${env.USERNAME}.build.properties" />
<property file="${basedir}/online/default.properties" /> 
```

如果您已`LOGNAME`设置为 'davec' 并且`davec.build.properties`存在，它将覆盖`default.properties`.

这也有助于检查您的同事配置以开始或诊断问题。

# .net - 有人使用带有 Oracle 数据库的实体框架吗？

> ID：116173
> 
> 赞同：2
> 
> 时间：2008-09-22T17:13:12.363
> 
> 标签：.net, oracle, entity-framework

我想知道是否有人已经在生产环境中使用带有 Oracle 数据库的实体框架？ODP.Net 中似乎不支持 EF，并且似乎只有第 3 方数据提供者 (OraDirect) 可用于与 Oracle 连接。有人提到 Codeplex 上提供了一个示例数据提供程序，但它显示的消息是它永远不应该在生产环境中使用。

您是否已经将 EF 与 Oracle 数据库一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T17:31:04.663

就个人而言，我还不会尝试这个。示例数据提供者上的消息已经足够警告了。IMO，您需要经过的验证级别才能在此配置中舒适地使用 EF，这不值得付出努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-22T15:49:40.313

我已经从 Oracle 安装了这个

[http://www.oracle.com/technetwork/topics/dotnet/downloads/oracleefbeta-302521.html](http://www.oracle.com/technetwork/topics/dotnet/downloads/oracleefbeta-302521.html)

我所知道的唯一问题是，当我有一个带有 SEQ+Trigger 的表以具有“自动识别”字段时，当我添加上下文对象时，框架不会返回“SaveChanges()”上的数字。但是记录本身可以很好地插入。

否则它似乎没问题。

我正在做的应用程序只能在公司内部使用。但由于该公司的主要系统是 Oracle 上的 Microsoft XAL，因此可能会有更多的应用程序以这种方式完成。所以当然希望尽快稳定发布。

\T

# sql - 如何选择 nHibernate 子查询结果的 Count(*)

> ID：116188
> 
> 赞同：9
> 
> 时间：2008-09-22T17:15:47.210
> 
> 标签：sql, nhibernate, subquery

为了在 nHibernate 中分页查询，我需要执行以下操作：

```
Select count(*) from 
(Select e.ID,e.Name from Object as e where...) 
```

我尝试了以下方法，

```
select count(*) from Object e where e = (Select distinct e.ID,e.Name from ...) 
```

我得到一个 nHibernate 异常，说我无法将 Object 转换为 int32。

关于所需语法的任何想法？

**编辑**

子查询使用不同的子句，我不能用 e.ID,e.Name 替换，`Count(*)`因为`Count(*) distinct`它不是有效的语法，而且`distinct count(*)`没有意义。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2011-01-20T19:06:53.260

NHibernate 3.0 允许 Linq 查询。

尝试这个

```
int count = session.QueryOver<Orders>().RowCount(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-23T00:29:14.593

```
var session = GetSession();
var criteria = session.CreateCriteria(typeof(Order))
                    .Add(Restrictions.Eq("Product", product))
                    .SetProjection(Projections.CountDistinct("Price"));
return (int) criteria.UniqueResult(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T21:58:03.193

通过修改 Geir-Tore 的答案解决了我自己的问题.....

```
 IList results = session.CreateMultiQuery()
        .Add(session.CreateQuery("from Orders o").SetFirstResult(pageindex).SetMaxResults(pagesize))
        .Add(session.CreateQuery("select count(distinct e.Id) from Orders o where..."))
        .List();
    return results; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T20:19:23.150

这是我如何做的草稿：

询问：

```
public IList GetOrders(int pageindex, int pagesize)
{
    IList results = session.CreateMultiQuery()
        .Add(session.CreateQuery("from Orders o").SetFirstResult(pageindex).SetMaxResults(pagesize))
        .Add(session.CreateQuery("select count(*) from Orders o"))
        .List();
    return results;
} 
```

对象数据源：

```
[DataObjectMethod(DataObjectMethodType.Select)]
public DataTable GetOrders(int startRowIndex, int maximumRows)
{
    IList result = dao.GetOrders(startRowIndex, maximumRows);
    _count = Convert.ToInt32(((IList)result[1])[0]);

    return DataTableFromIList((IList)result[0]); //Basically creates a DataTable from the IList of Orders
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T17:34:25.403

如果您只需要`e.Id`，`e.Name`：

`select count(*) from Object where`......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-07-19T18:44:51.300

我更喜欢，

```
 public IList GetOrders(int pageindex, int pagesize, out int total)
    {
            var results = session.CreateQuery().Add(session.CreateQuery("from Orders o").SetFirstResult(pageindex).SetMaxResults(pagesize));

            var wCriteriaCount = (ICriteria)results.Clone());

            wCriteriaCount.SetProjection(Projections.RowCount());

            total = Convert.ToInt32(wCriteriaCount.UniqueResult());

            return results.List();
    } 
```

# networking - 我在哪里可以找到关于网络管理的好入门书？

> ID：116189
> 
> 赞同：0
> 
> 时间：2008-09-22T17:15:53.090
> 
> 标签：networking

诸如 DHCP、IP 地址、配置……之类的东西。我打开了一个谷歌搜索，似乎有这么多，我不知道从哪里开始。也许有一些特别好的网站/书籍/博客可能会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T17:23:32.340

网络管理是一个非常广泛的领域，几乎每个组织都会对所需的技能有自己的想法。不过，对基础知识的良好理解永远不会受到伤害，为此我遇到的最好的书籍之一是 Howard C. Berkowitz 的[Designing Addressing Architectures for Routing and Switching](https://rads.stackoverflow.com/amzn/click/com/1578700590)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T18:09:19.907

您可能想看看《系统和网络管理实践》一书（[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/0321492668)）。

这本书的第一版是一本很棒的书，这个新版本也收到了热烈的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-23T02:54:45.930

如果您正在寻找有关允许 Internet 工作的机制的良好入门知识，我从[Security Now 中学到了最多的知识！](http://www.grc.com/securitynow.htm) 不幸的是，在第 75 集左右，它开始变得非常糟糕，并变成了长达一小时的索尼电子阅读器电视广告，但在那之前真的很好。

对完成所有这些工作的原因有一个基本的了解，可以更容易地发现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-14T18:57:47.833

对于基础知识，您需要从 TCP/IP 介绍开始。对于从一个操作系统到另一个操作系统的实际管理行为，您需要提及您正在使用的操作系统。

您可能想在此 stackoverflow 的管理员版本上提出这个问题：[https ://serverfault.com/](https://serverfault.com/)

# xml - 在 XML 成为一种标准并考虑到它的所有缺点之前，是什么让 XML 如此流行？

> ID：116195
> 
> 赞同：13
> 
> 时间：2008-09-22T17:16:45.663
> 
> 标签：xml, standards, popularity

是的，XML 是人类可读的，但逗号分隔的文本和属性文件也是如此。

XML 臃肿，难以解析，难以在代码中修改，还有很多我可以用它思考的其他问题。

我的问题是使 XML 如此受欢迎的最吸引人的品质是什么？？？？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-22T17:30:21.700

与 CSV 文件相比，它的主要优势之一是它可以轻松地表示分层数据。为此，您要么需要像 XML 这样的自描述树结构，要么需要像 SWIFT 或 EDI 这样的预定义格式（如果您曾经处理过其中任何一种，那么您会意识到 XML 解析起来很简单相比下）。

它实际上很容易解析的原因之一是*因为*它“臃肿”。这些结束标记意味着您可以准确地将元素的结尾与开始匹配，并计算出树何时变得不平衡。您不能在 JSON 等“轻量级”替代方案中做到这一点。

它易于解析的另一个原因是它从一开始就完全支持 Unicode 编码，因此您不必担心目标系统上的默认代码页是什么，或者如何编码多字节字符，因为这些信息都包含在文件中。

我们不要忘记它附带的其他人工制品，例如定义的描述和验证机制 (XSD) 以及强大的声明性转换机制 (XSLT)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-09-22T17:25:34.520

那是 90 年代后期，互联网很热很热，但是公司的系统无法靠近互联网。他们花费了无数个小时与 CORBA 打交道，并且正在计划使用 Enterprise JavaBeans 让这些旧系统与新系统进行通信。

随之而来的是 SGML，它是几乎所有标记语言的先驱（我跳过了 GML）。SGML 已经用于定义如何定义 HTML，但 HTML 具有必须使用的特定标签，以便 Netscape 正确显示给定的网页。

但是，如果我们还有其他需要解释的数据呢？啊哈！

因此，鉴于 XML 是结构化的，并且您可以随意定义该结构，它自然允许您构建接口（从非 OO 的角度来看）。它并没有真正做其他界面语言已经做的任何事情，但它让人们能够设计自己的定义。

像 X12 和 HL7 这样的界面语言是肯定存在的，但是使用 XML，人们可以根据他们各自的 AIX 或 AS/400 系统对其进行定制。

由于 HTML 导致标记语言占主导地位，因此 XML 很自然地会因为其易用性而被推到最前沿。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-22T17:47:05.623

直接从[马的嘴里](http://www.w3.org/TR/2004/REC-xml11-20040204/#sec-origin-goals)说，XML 的设计目标是：

> 1.  XML 应该可以直接在 Internet 上使用。
> 2.  XML 应支持广泛的应用程序。
> 3.  XML 应与 SGML 兼容。
> 4.  编写处理 XML 文档的程序应该很容易。
> 5.  XML 中可选功能的数量应保持在绝对最小值，理想情况下为零。
> 6.  XML 文档应该是易于阅读且相当清晰的。
> 7.  应该快速准备 XML 设计。
> 8.  XML 的设计应正式、简洁。
> 9.  XML 文档应易于创建。
> 10.  XML 标记中的简洁性并不重要。

它之所以流行，是因为人们需要一个跨平台数据交换格式的标准。XML 可能有点臃肿，但它是一种非常简单的分隔文本数据的方法，并且它向后兼容现有的大量 SGML 系统。

您确实无法将 XML 与 CSV 进行比较，因为 CSV 是一种极其有限的数据表示方式。CSV 无法处理基本行列表之外的任何内容，并且没有层次结构的概念。

XML 并不难解析，一旦您编写或找到了一个不错的 XML 实用程序，在代码中处理也不难。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-09-22T17:24:17.783

XML 不难解析，事实上它非常简单，因为有大量优秀的 API 可用于每种语言。

XML 本身并不臃肿，它可以根据需要尽可能简洁，但保持这种方式取决于您的模式。

XML 以逗号分隔的文本永远不能或不应该的方式处理分层数据集。

XML 是自文档化/描述性的，并且是人类可读的。为什么它是一个标准？嗯，首先，因为它可以标准化。CSV 不是（也不能是）标准，因为存在无限量的变化。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-22T17:26:28.340

*   您可以获得一个 xml 文件，并有机会通过阅读它来理解数据的含义，而无需单独规范您的 pre-xml 数据格式。
*   工具可用于一般地处理 xml。以前，如果每个人都使用不同的文件格式：逗号分隔、二进制等。您需要编写一个自定义工具。
*   您可以通过将新标签添加到具有默认值的架构中来扩展它。如果操作正确，xml 不会破坏所有解析 xml 但不知道标签的旧代码。这通常不适用于专有格式。
*   可能使它流行的主要原因是它看起来有点像以前很多人都理解的 HTML。所以它变得流行，然后因为它很流行，它变得更流行，因为它很高兴与每个人都知道的一个标准一起工作。
*   一件坏事是xml通常要大得多，因为所有的标签和它的基于文本的比以前使用的要大。但是，随着计算机现在变得更大，我们通常可以处理它以及它的价值交易规模以获得更好的自我描述数据。
*   您可以下架将解析/写入 xml 的现成代码/库。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-22T17:26:16.653

它有很多优点，也很少有缺点。主要问题是文件大小增加和处理速度变慢。但是，有以下优点：

*   它是结构化的，所以你只写一次解析器
*   它支持具有嵌套结构的数据（层次结构、树等）
*   您可以在单个 XML 中嵌入多种类型的数据结构
*   您可以使用标准语言（XSL ...）描述架构（数据类型等）

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-22T17:30:27.877

它支持标准化的查询语言 XPath 怎么样？这对我来说非常有用。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-22T17:21:03.873

您还记得 XML 流行之前的日子吗？数据不容易互换——一个程序会采用 .csv 文件，下一个是 .xls，下一个是 EBSIDIC 格式的文件。XML 有其弱点，但它是结构化的，这使得它可以解析和转换。

正如您所指出的，CSV 文件非常便携。然而，对他们来说没有任何*意义*。第 (14) 列对我意味着什么？与 <customer id="14"/> 相反？

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-22T17:43:46.550

XML 的一些固有特性使其如此流行和有用：

1.  XML 表示一棵树，树状结构是编程中非常常见的模式。这是从 CSV 等基于记录的表示形式的进化飞跃，这得益于当今廉价的计算能力和带宽。

2.  XML 在人为因素（它是纯文本且相当易读）和计算实用性（简洁性、易于解析、表达性、可扩展性等）之间取得了很好的平衡。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-09-22T18:04:16.157

XML 提供了一种非常直接的方式来表示数据。解析相当容易——它是一种非常规则的语法，适合直接递归下降解析。这使得数据消费者和生产者可以轻松地交换信息，而不必真正了解他们各自的应用程序和内部结构。

然而，这是一种非常低效的数据表示方式，并且容易被严重滥用。这方面的一个例子是我使用的对象接口，而不是导出特定对象的构造函数和属性，而是要求我以编程方式编写 XML 并将生成的 XML 传递给单个构造函数。同样，XML 不适用于可能需要随机访问而不创建附加编目系统的大型数据集（即，如果我有一千页 XML 文档，我将需要解析几乎整个文件才能到达第 999 页，假设页面数据是有序的），而我最好将实际页面数据放在一个或多个单独的文件中，并使用 XML 指向正确的文件或文件中的位置。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-09-24T15:08:55.640

我还没有看到提到的是，不仅 XML 是结构化的，而且属性和元素交互的方式创建了一种不寻常的结构，但人类仍然很容易理解。

如果您将 XML 树与其最近的结构邻居（有向无环图）进行比较，您可能会注意到典型的 DAG 在每个节点处仅携带一个 ID 和一个值。XML 也携带这一点（gi/tag 对应于 ID，节点的文本对应于 value），但是每个节点也可以携带任意数量的附加元数据：元素。这与拥有一个额外的维度非常相似——如果您认为 DAG 以每个分支在二维中展开，则 XML 文档在三个维度中展开，展开，然后向下到仅包含属性的子树。

这是结构的可选弯曲。像任何子元素列表一样遍历属性列表，您将回到二维树。完全忽略它们，您将拥有一个简化的节点/值树，它可能更纯粹地代表包含数据的整体“形状”。但是，如果您需要元数据，则存在额外的维度。

有了不错的缩进，人类只需通过观察原始数据就可以了解这一点，使 XML 成为潜在复杂结构的微型可视化工具 - 并且在应用程序的数据交换中内置可视化工具意味着程序员参与的人更有可能构建一个代表数据可能被使用方式的结构。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-22T17:23:38.457

1.  模式定义语言 - 您可以描述 XML 的预期格式
2.  这是一个标准:) - 它绝对比使用自己的自定义格式的每个人都好

CSV 是人类可读的，但这确实是它唯一的好处 - 它非常不灵活，并且没有为这些值分配任何含义。如果我现在开始设计一个系统，我肯定会改用[YAML](http://www.yaml.org/) - 它不那么臃肿，而且肯定会获得动力。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-09-15T20:55:40.647

XML 与二进制数据相比的另一个好处是错误恢复能力。

对于二进制数据，如果单个位出错，数据很可能无法使用，使用xml，作为最后的手段，您仍然可以打开它并进行更正......

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-24T14:39:55.883

XML 的流行源于其他标记语言。HTML 是人们最熟悉的一种，但现在我们越来越多地看到“降价”语言，例如 wiki 甚至 stackoverflow 帖子表单所使用的语言。

HTML 在格式化文本方面做了一项有趣的工作，但这还不够。它长大了。人们想为所有东西添加标签。<眨眼> 有人吗？布局、样式甚至数据。

XML 是一种可扩展的标记语言（呃，对吧？），其设计目的是让任何人都可以创建自己的标签，并且您的 RECORD 标签不会干扰我的 RECORD 标签，以防它们具有不同的含义，并且对HTML 的编码、标签匹配和转义问题。

一开始，它受到已经了解 HTML 的人的欢迎，并且喜欢使用标记来组织数据的熟悉概念。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-24T14:50:32.037

它是跨平台的。我们用它来编码机器人控制程序和在 VxWorks 下运行在 C 中的数据以供执行，但是我们的离线编程是在 dot net 下完成的。两者都很容易解析 XML。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-22T17:18:07.173

它是结构化的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-22T17:20:22.707

它与许多语言兼容

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-11-06T16:31:04.060

It is a text format that is one of it's major advantages. All binary formats are usually much smaller but you always need tools to "read" them. You can simply open and editor and modify XML files to your liking. However I'd argue it's stil a bloated format, but well you can compress it quite well.... if one looks at the specs for the Windows Office XML formats one just can imagine it's wonderful to be seemingly open....

Regards Friedrich

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-24T15:02:16.360

与以前的一些标准相比，这是一个梦想。尝试编写 HDF（分层数据格式）文件或 FITS。FITS 在磁盘驱动器发明之前就已标准化——您必须担心将文件填充为块大小！
甚至 CSV 也没有那么简单。快速提问，德语 CSV 文件中的分隔符是什么？

许多关于 XML 的抱怨来自使用它在数据仅存在几毫秒的机器之间直接传输数据的人。在很多领域，数据必须持续 50 到 100 年，并且比运行它的机器更有价值。有时支付结束标签税是值得的。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-22T17:59:23.207

它赋予的主要优势是分层数据的系统独立表示。逗号分隔的文本和属性文件在许多使用 XML 的地方更合适，但表示复杂数据结构和数据类型、字符集意识和标准文档的能力使其可以用作良好的应用程序间交换格式。

我对语言的小改进建议是改变结束标签的工作方式。`</>`想象一下，如果你可以用 结束标签，`<my_tag>blah</>`而不是 < ，将节省多少带宽和磁盘空间`my_tag>blah</my_tag>`。你不允许有重叠的标签，所以我不知道为什么标准坚持比它需要的更多的文本。事实上，为什么要使用尖括号呢？

尖括号的丑陋很好地展示了它本来可以是什么：JSON。JavaScript Object Notation 以更少的输入实现了 XML 的大部分目标。另一种使 XML 可以接受的替代语法是 Builder 语法，它被 Groovy 和 Ruby 使用。它更加自然和可读。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-22T18:06:25.310

我猜它的流行最初源于这样一个事实，即它以一种对足够大的玩家获得他们的支持并因此获得广泛的行业采用并不算太糟糕的方式解决了正确的问题。在这一点上，由于围绕 XML 进行了如此多的组件开发投资，因此它已相当牢固地嵌入到环境中。MS BizTalk Server（和 BizTalk 本身）附带的 HIPPA 和其他 EDI XML 模式和适配器是逐渐建立在 XML 之上的山的一个很好的例子。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-24T15:14:51.773

使 XML 被广泛采用的两个主要因素是“人类可读性”和“Sun Microsystem”。它们曾经是（并且仍然存在）其他跨语言、跨平台的数据交换格式，这些格式比 XML 更灵活、更易于解析、更简洁。如[ASN.1](http://www.asn1.org/)。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2008-09-22T17:21:01.097

由于有可用的工具，为 XML 方言编写解析器比为任意方言编写解析器更容易。

例如，使用 DOM 解析器比 lexx 和 yacc 简单得多，尤其是在它流行的 Java 中。

# javascript - 您如何处理特定于浏览器的 .js 和 .css

> ID：116221
> 
> 赞同：6
> 
> 时间：2008-09-22T17:22:50.923
> 
> 标签：javascript, css

这不是一个新话题，但我很好奇每个人是如何处理的，`.js`或者`.css`是特定于浏览器的。

您是否有包含条件的`.js`函数，`if/else`或者每个浏览器都有单独的文件？

这些天来，每个流行浏览器的当前版本真的是一个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-22T17:25:24.613

这是一个非常现实的问题。主要是因为IE6。您可以使用[条件注释](http://msdn.microsoft.com/en-us/library/ms537512.aspx)来处理特定于 IE6 的 CSS 。

对于 JavaScript，我建议使用已经完成了大部分抽象浏览器差异工作的库。jQuery 在这方面确实做得很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T17:26:17.717

不写吗？

老实说，对于大多数布局来说，特定于浏览器的 CSS 并不是真正需要的——如果是，请考虑更改布局。当下一个需要另一种变化的浏览器问世时会发生什么？呸。如果您确实需要包含某些内容，并且它似乎无法在一个浏览器中运行，请在此处提问！有很多伟大的头脑。

对于 JS，有几个框架负责实现跨浏览器行为，例如[jQuery](http://jquery.com/)（在本网站上使用）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-23T00:37:37.290

IE 条件注释具有额外文件下载的缺点。我更喜欢使用几个著名的 CSS 过滤器：

```
.myClass {
  color: red;     // Non-IE browsers will use this one
  *color: blue;   // IE7 will see this one
  _color: green;  // IE6 and below will see this one
} 
```

（是的，它不会验证，但我上次查了一下，我们的钱来自用户和广告商，而不是来自 W3C。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T17:27:16.857

如今，CSS 无法在所有浏览器（主要是 IE6/7）中工作仍然是一个问题。

对于我所做的任何事情，我从来不需要单独的 JS 文件。如果您使用的是 JS 库（jQuery、YUI、Prototype 等），99% 的浏览器不兼容问题将得到解决。

至于 CSS，我更喜欢将特定于浏览器的修复程序放在同一个 CSS 文件中。当您只需要在 1 个地方查找样式时，它会使调试变得容易得多。您可能会花费数小时调试某些东西，只是为了找出错误是由您的 10 行浏览器特定样式表引起的。

从性能的角度来看，只有 1 个 CSS 和 1 个 JS 文件也更好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T17:32:09.777

使用所谓的“[特征检测](http://peter.michaux.ca/article/7146)”。

例如，如果要使用`document.getElementsByClassName`，请执行以下操作：

```
if(document.getElementsByClassName) {
    // do something with document.getElementsByClassName
} else {
    // find an alternative
} 
```

至于CSS，如果你使用标准，你应该很好，除了IE。在 IE 中，使用条件注释——这是[微软的人推荐](http://blogs.msdn.com/ie/archive/2005/10/12/480242.aspx)的方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T18:15:36.553

就个人而言，如上所述，我主要使用条件注释。

不过，在 Stackoverflow 播客中，Jeff 表示 Stackoverflow 正在使用[Yahoo 的 CSS Reset](http://developer.yahoo.com/yui/reset/)，这是我从未听说过的。如果它按照它宣传的那样做，似乎可以解决许多（大多数？全部？）基于浏览器的 CSS 差异；至少，我在 Stackoverflow html 源代码中没有看到任何指示条件注释的内容。我肯定会在我的下一个 Web 项目中使用它，并且很想听听任何人的经验。

就Javascript而言；正如已经说过的，使用你最喜欢的 JS 框架......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T17:25:01.633

我使用一个框架来处理 99% 的 xbrowser 内容。

对于框架中未涵盖的所有内容，我会使用 if/else 或 try/catch。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-22T17:35:31.953

if/else 和单独的文件都取决于站点的复杂性。

浏览器之间肯定仍然存在不兼容性，因此请考虑让 JavaScript 框架为您完成繁琐的工作......

jQuery [http://jquery.com/](http://jquery.com/)

道场 [http://www.dojotoolkit.org/](http://www.dojotoolkit.org/)

Script.aculo.us [http://script.aculo.us/](http://script.aculo.us/)

原型 [http://prototypejs.org/](http://prototypejs.org/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T17:28:26.633

我使用 jQuery 的内置函数进行实际检测：

```
jQuery.each(jQuery.browser, function(i, val) {}); 
```

至于组织，这将取决于您的应用程序。我认为将其放入初始化代码中，然后在需要的地方使用检测是最好的。我仍然遇到有时必须检测 Explorer 的问题。例如，在使用 jQuery 时，我发现 parent() 和 next() 函数在 Explorer 中与 Firefox 相比有时会有不同的含义。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T17:30:08.517

Internet Explorer 具有条件结构，例如

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="ie.css" />
<![endif]--> 
```

这将让您为 IE 引入特定的样式表和 JavaScript。如果没有符合标准的方法来处理问题，我认为这是最后的解决方案。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-23T00:50:08.180

如果您正在做 ASP.Net 开发，您还可以使用[设备过滤](http://ryanfarley.com/blog/archive/2008/08/14/more-on-device-filtering-with-asp.net-server-control-properties.aspx)（我今天刚刚在 Stack Overflow 上了解到）。

您可以在页面指令上使用它来链接不同的皮肤、母版页或 CSS 文件，但您也可以在 ASP.Net 服务器控件属性上使用它，如下所示：

```
<asp:Label runat="server" ID="labelText" 
   ie:CssClass="IeLabelClass" 
   mozilla:CssClass="FirefoxLabelClass" 
   CssClass="GenericLabelClass" /> 
```

当然，这个例子有点极端，但它确实可以让您在仅使用单个 CSS 文件的情况下解决一些令人讨厌的浏览器不一致问题。

我也支持使用 CSS 重置文件的想法，并且绝对使用像 jQuery 这样的库，而不是在 JavaScript 事件和 DOM 差异上重新发明轮子。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-23T17:54:18.223

我认为条件注释非常适合样式表，但它们也可以用于 javascript/jquery。

由于 .browser 已被弃用并且现在从 jquery 1.9 (?) 中删除，因此使用条件注释是执行特定于浏览器的 javascript 的一种很好的方法。

这是我的简单示例：

1 - 在页面某处放置条件注释。我个人把它放在body标签之后。我见过人们在实际的正文或 html 上使用它，但这会带回 IE8/9/10 可比性视图按钮，如果可能的话，您希望避免这种情况。

```
<!--[if lt IE 9]><div class="ie8-and-below"></div><![endif]--> 
```

2 - 然后使用 jquery 检查我们的 IE 特定容器是否存在。

```
if ($("div").hasClass("ie8-and-below")) {
        //do you JS for IE 8 and below only
    } 
```

3 - （可选）设置您的目标可比性并输入如下内容：

```
<meta http-equiv="X-UA-Compatible" content="IE=10" /> 
```

就在`<head>`标签之后。（它必须是开幕后的第一件事`<head>`）。如果页面的其余部分编码正确，这将关闭 ie10/9/8 中的兼容性按钮。如果您有需要比较模式的部分，这是一个很好的故障保险，如果运行兼容的较新浏览器，您可能会触发 JS 的其他方式。

注意：截至本文发布之日，http-equiv 尚未验证 W3C 标准，但它是一个非常有用的标签，已被 google 和 microsoft 等主页采用。我认为这只是因为 W3C 在采用它方面有点落后。

# mysql - 具有大量临时表写入的复制

> ID：116228
> 
> 赞同：1
> 
> 时间：2008-09-22T17:23:49.547
> 
> 标签：mysql, replication

我有一个数据库，出于备份原因，我打算复制它（目前性能不是问题）。

我们已经正确设置了复制并对其进行了测试，一切都很好。

然后我们意识到它会将所有写入复制到临时表中，这实际上意味着对于空闲的从站而言，一天的数据复制需要将近两个小时。

原因是我们每 15 分钟通过 cronjob 重新计算数据库中的一些数据以确保它同步（总共需要大约 3 分钟，因此在 Web 请求期间执行这些操作是不可接受的；相反，我们只是在 Web 请求中存储修改而不尝试重新计算任何内容，然后批量完成所有工作）。为了有效地处理这些数据，我们使用临时表（因为有很多相互依赖关系）。

现在，第一个问题是，如果我们在从属服务器正在处理使用该临时表的事务时重新启动它，那么临时表不会持久存在。这可以通过不使用临时表来避免，尽管这有其自身的问题。

更严重的问题是，如果不是所有重新计算（它一个接一个地进行，所以每 15 分钟重建一次数据没有任何好处），奴隶可以在不到半小时的时间内轻松赶上......你可以从字面上看到它停留在 1115，只是为了快速赶上并停留在 1130 等）。

我们提出的一种解决方案是将所有重新计算从复制的数据库中移出，这样从站就不会复制它。但它的缺点是我们必须修剪它最终更新的表，使我们的奴隶实际上被“阉割”，即。在我们真正使用它之前，我们必须重新计算它上面的所有内容。

有没有人遇到过类似的问题和/或您将如何解决？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-26T11:51:18.600

我想出了解决方案。它利用了 Nick 提到的 replicate-do-db。在这里写下来以防有人遇到类似问题。

在这种情况下仅使用 replicate-(wild-)do* 选项的问题（就像我说的，我们使用临时表重新填充中央表）是您忽略临时表并重新填充没有数据的中央表（这会导致进一步的问题，因为依赖于中央表是最新的所有查询都会产生不同的结果）或者你忽略了有类似问题的中央表。更不用说，在将这些选项中的任何一个添加到 my.cnf 后，您必须重新启动 mysql。我们想要的东西可以涵盖所有这些情况（以及未来的情况），而无需进一步重新启动。

因此，我们决定将数据库拆分为“真实”数据库和“工作区”数据库。仅复制“真实”数据库（我想您可以决定用于复制野生执行表语法的表名约定）。

所有临时表工作都发生在“workarea”数据库中，为了避免上述依赖问题，我们不会通过 INSERT ... SELECT 或 RENAME TABLE 填充中央表（位于“真实”数据库中），但是而是查询 tmp 表以在活动表上生成一种差异（即，为新行生成 INSERT 语句，为旧行生成 DELETE 并在必要时进行更新）。

这样，唯一被复制的查询就是所需的更新，没有别的，即。一些（大多数？）每十五分钟发生一次的重新计算查询甚至可能不会进入从属服务器，而那些做的查询将是最小的并且根本不计算昂贵，只是简单的 INSERT 和 DELETE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T18:13:32.780

在 MySQL 中，我相信从 5.0 开始，您可以使用表通配符来复制特定的表。可以设置许多命令行选项，但您也可以通过 MySQL 配置文件进行设置。

```
[mysqld]
replicate-do-db    = db1
replicate-do-table = db2.mytbl2
replicate-wild-do-table= database_name.%
replicate-wild-do-table= another_db.% 
```

这个想法是您告诉它不要复制除您指定的表之外的任何表。

# database - PowerBuilder 数据库连接池？如何

> ID：116248
> 
> 赞同：2
> 
> 时间：2008-09-22T17:27:36.463
> 
> 标签：database, connection-pooling, powerbuilder

如何在 PowerBuilder (v9+) 中使用...建立数据库连接池

*   ...ODBC？
*   ...SQL 服务器？
*   ...甲骨文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-26T02:28:01.803

冒着自我推销的风险，这些可能会让您开始使用 Oracle：

*   [PB9/甲骨文 9i](http://www.techno-kitten.com/Changes_to_PowerBuilder/New_In_PowerBuilder_9/PB9New_-_Database_Connectivity/PB9New_-_Oracle9i_Support/pb9new_-_oracle9i_support.html)
*   [PB11.5/Oracle 11g](http://www.techno-kitten.com/Changes_to_PowerBuilder/New_in_PowerBuilder_11_5/NewIn115-Database_interface_en/NewIn115-Native_driver_support/NewIn115-Support_for_session_a/newin115-support_for_session_a.html)

如果您访问[Sybase 手册](http://sybooks.sybase.com)（直观，嗯？），访问您正在查看的版本的连接到您的数据库手册，搜索“池”可能会很有成效。查看 11.5 的本地副本，我可以看到对 SNC (MS) 和 ODBC 的引用。

至于“非本地”方法，我猜 Jason 可能指的是与应用程序服务器建立连接池，然后通过它获取数据。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T19:39:54.120

不幸的是，至少在 PB 9 中，你不能*原生*. PB 一直是一个两层的开发工具。但是，如果您使用的是从 PB 9 开始的 WebServices 支持，您可以通过在连接池 appServer 上调用 WebServices 来绕过此限制。顺便说一句，我还没有玩过 PB 11.5。那里可能会有所不同。

杰森

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-01T15:53:54.683

**在 PowerBuilder 版本 9 及更高版本中，使用 Oracle 本地驱动程序并连接到 Oracle 9i 及更高版本的数据库，您可以使用CnnPool='Yes'**数据库参数告诉 Oracle 在池中维护连接：

来自 PB 11.1 文档的附加信息：http: //infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc33820_1110/html/dbparm/ [BJEBJADI.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc33820_1110/html/dbparm/BJEBJADI.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-14T20:47:07.560

我不相信

> CnnPool='是'

在 PB 9中得到*正式支持。*

我不确定大多数 PB 开发人员都熟悉如何处理池。

至少与我使用一些 Java 应用程序服务器的经验相比，ASP.Net 的方法简单直接。（请不要对最后一句话发动激烈的战争，我说的是我的经验）。

我编写了一个“服务器”应用程序，它接收为 ds.retrieve() 和 ds.update() 执行的 PB 数据存储，并将数据传递回客户端 PB 应用程序。这是一种汇集的方式。服务器应用程序将打开多个连接......我在 PB 8 中做到了这一点（某处有一本书）。我不会推荐这种方法......很多代码。

在 PB 11.x 中，您应该考虑一些很酷的新方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-23T11:37:55.517

@杰森沃格尔...

你说我不能在*本地*做......所以有另一种方法可以做到吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-19T18:09:39.830

/* 声明为实例变量*/

## n_to_server i_to_server //SQLCA 的事务对象替代，i_to_server 和 n_to_server 一样是自定义名称

/* 实例化连接对象*/

i_to_server = CREATE transaction //在n_to_server的实例变量中声明

i_to_server.DBMS = "ODBC"

i_to_server.AutoCommit = TRUE

i_to_server.DBParm = "ConnectString='DSN=SourceServer;UID=username;PWD=password'"

使用 i_to_server 连接；

选择@@trancount INTO :li_TranCount

来自系统对象

WHERE 名称 = 'sysobjects'

使用 i_to_server ；//必须在不使用 SQLCA（本机事务）的事务中使用 USING

# visual-studio-2008 - 如何将数字向上/向下控件添加到 .Net StatusStrip 容器

> ID：116258
> 
> 赞同：0
> 
> 时间：2008-09-22T17:29:25.320
> 
> 标签：visual-studio-2008, statusstrip

我正在寻找向.Net StatusStrip 添加数字向上/向下控件。不幸的是，它没有在 UI 设计器中列为一个选项。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T17:39:02.303

您可以使用[ToolStripControlHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcontrolhost.aspx)类来托管自定义（现在为 NumericUpDown）类。您还可以从此类“NumericUpDownToolStripItem”派生，该类使用自定义控件初始化“控件”属性，并可以从托管控件填充下一个属性（例如，最小值、最大值、值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T17:41:57.507

您可以尝试添加 3 个 ToolStripStatusLabels，将第一个的图像设置为“向上箭头”，将第三个的图像设置为“向下箭头”。空白他们的文本属性。

中间的可以容纳您在点击事件中增加/减少的数字。

编辑：左/右箭头可能会更好看。左为下，右为上。

# windows - 用于管理中型项目的软件

> ID：116261
> 
> 赞同：1
> 
> 时间：2008-09-22T17:29:57.737
> 
> 标签：windows, project-management, agile, bug-tracking

所以，在我目前的工作中，我们通常是每个项目有 1-3 名开发人员、1-2 名艺术总监和 1 名项目经理，最小的只是每个项目中的一名，而较大的则为 3 名开发人员和 2 名艺术总监。

我正在寻找一种软件、软件组合或某种类型的服务，以使我们能够单独管理我们的项目，重要的是我们能够在一个系统/软件中一次管理多个项目（无需经过每个项目的设置过程过于复杂），因为我们通常同时有 2-3 个正在进行的项目。

我们需要能够与 SVN 集成，跟踪错误/功能/请求，建立里程碑和某种类型的敏捷管理，比如 SCRUM 会很好。

最好它应该能够在 Windows 上运行（没有太多麻烦，曾经尝试在同一个 Windows 2003 服务器上安装 Apache+Python+Svn+Trac 并让它们一起运行？不好玩。）因为我们大多这样做。 NET 开发，我们的大多数服务器都运行 Windows 2003。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-23T20:01:36.663

由于您似乎最多有六个人在一个房间里工作 - 我会认真考虑根本不使用软件。

每个项目的白板和软木板，加上一大堆索引卡/便签可以很长很长的路要满足一个或两个小项目的项目管理需求。

（失败了——我发现 basecamp 是一个用于小型项目的相当轻量级的工具——尽管它不进行任何类型的源代码控制集成。我也听说过有关最新 FogBugz 的好消息——但我的个人经历如此糟糕早期版本的经验我自己还没有尝试过）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T10:27:58.973

[http://www.project-open.org/](http://www.project-open.org/) covers your requirements and is available for Windows. However it is targeted at larger organizations (>20 employees), so that you might find it overkill for a group of 6.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T17:34:24.747

我个人将[BaseCamp](http://www.basecamphq.com/?referrer=MITCHELSELLERS)用于我的公司，并且非常幸运！

**编辑**哎呀，我没有注意到 SVN 要求，BaseCamp 可以帮助解决其他问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T17:34:57.930

您可能想尝试 Mantis (www.mantisbt.org)。一开始有点麻烦，但稍微定制一下，它就会为你工作。它有 SVN 集成，还有一堆我还没有使用过的其他东西……：|……例如移动支持、Wiki 支持等。

它是 OSS（开源软件）。用 PHP 编写，可与 MySQL 或 PostgreSQL 一起使用。看看就好了

[http://www.mantisbt.org/](http://www.mantisbt.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T17:55:50.827

Atlassian 的[Jira Studio](http://www.jira.com/)听起来正是您所需要的。它是托管的，因此无需安装任何东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T19:21:49.840

如果您想要快速且易于使用且与 Windows 完美集成的东西，我建议您使用 Microsoft Office Groove。我一直在我当前的项目中使用它，它还可以轻松地让您开始新项目和添加成员。

它不是世界上最好的解决方案，但它包含在 Office '07 中，并且它具有帮助项目管理、错误报告、日历、会议摘要等的工具。

我发现的一个主要问题是默认情况下不包含版本控制。据我了解，您必须设置一个 SharePoint 服务器才能在 Groove 中进行版本控制，但我还没有这样做，并且一直希望我的备份能够正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-30T19:26:03.123

+1 从白板、便签纸和您能想到的任何其他办公用品开始。能够在可见的大墙上可视化项目的状态**非常**有用，比基于软件的跟踪（恕我直言）更有用。

不过，您需要确保团队致力于使其保持最新状态。

# java - Java中的ArrayList和输入

> ID：116276
> 
> 赞同：6
> 
> 时间：2008-09-22T17:32:06.423
> 
> 标签：java, arrays, arraylist

我习惯了python，所以这对我来说有点困惑。我正在尝试逐行输入，直到用户输入某个数字。这些数字将存储在一个数组中，以便对其应用一些统计数学。目前，我有一个主课、统计课和一个“阅读”课。

两个问题：

1.  我似乎无法使输入循环正常工作，这样做的最佳做法是什么。

2.  阅读方法的对象类型是什么？double[] 还是 ArrayList？

    1.  如何将方法类型声明为数组列表？

    2.  如何防止数组中存储超过 1000 个值？

让我展示一下我到目前为止所拥有的：

```
public static java.util.ArrayList readRange(double end_signal){
    //read in the range and stop at end_signal

    ArrayList input = new ArrayList();
    Scanner kbd = new Scanner( System.in );
    int count = 0;
    do{
        input.add(kbd.nextDouble());
        System.out.println(input); //debugging
        ++count;
    } while(input(--count) != end_signal);
    return input;
} 
```

任何帮助将不胜感激，请原谅我的新手...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T17:34:12.547

您在循环条件中需要的是：

```
while ( input.get( input.size()-1 ) != end_signal ); 
```

你正在做的是递减计数器变量。

你也应该`ArrayList`这样声明：

```
ArrayList<Double> list = new ArrayList<Double>(); 
```

这使得列表类型特定并允许给定条件。否则有额外的铸造。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T18:15:37.533

答案：

*>1。我似乎无法使输入循环正常工作，这样做的最佳做法是什么。*

我宁愿有一个简单的 while 循环而不是 do{}while... 并将条件放在 while... 在我的示例中它显示为：

*而读取的数量不是结束信号并且计数低于限制：做。*

*>2。阅读方法的对象类型是什么？double[] 还是 ArrayList？*

一个 ArrayList，但是我强烈建议您改用 List ( java.util.List ) 接口。对接口而不是实现进行编程是一种很好的 OO 实践。

*>2.1如何将method-type声明为arraylist？*

请参阅下面的代码。

*>2.2。如何防止数组中存储超过 1000 个值？*

通过在 while 条件中添加此限制。

```
import java.util.Scanner;
import java.util.List;
import java.util.ArrayList;

public class InputTest{

    private int INPUT_LIMIT = 10000;

    public static void main( String [] args ) {
        InputTest test = new InputTest();
        System.out.println("Start typing numbers...");
        List list = test.readRange( 2.0 );
        System.out.println("The input was " +  list );
    }

    /**
     * Read from the standar input until endSignal number is typed.
     * Also limits the amount of entered numbers to 10000;
     * @return a list with the numbers.
     */
    public List readRange( double endSignal ) {
        List<Double> input = new ArrayList<Double>();
        Scanner kdb = new Scanner( System.in );
        int count = 0;
        double number = 0;
        while( ( number = kdb.nextDouble() ) != endSignal && count < INPUT_LIMIT ){
            System.out.println( number );
            input.add( number );
        }
        return input;
    }
} 
```

最后的评论：

最好使用“实例方法”而不是类方法。这样，如果需要，“readRange”可以由子类处理，而无需更改签名，因此在示例中我删除了“static”关键字并创建“InputTest”类的实例

在 java 代码风格中，变量名称应该像“endSignal”而不是“end_signal”一样采用驼峰式大小写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T17:36:20.420

**

```
public static java.util.ArrayList readRange(double end_signal) {

    //read in the range and stop at end_signal

    ArrayList input = new ArrayList();

    Scanner kbd = new Scanner(System. in );
    int count = 0;

    do {
        input.add(Double.valueOf(kbd.next()));
        System.out.println(input); //debugging
        ++count;
    } while (input(--count) != end_signal);
    return input;
} 
```

**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T18:16:48.607

我认为您开始时还不错，但这是我的建议。我将强调代码下方的重要区别和要点：

包控制台；

导入 java.util。*; 导入 java.util.regex。*;

公共类 ArrayListInput {

```
public ArrayListInput() {
    // as list
    List<Double> readRange = readRange(1.5);

    System.out.println(readRange);
    // converted to an array
    Double[] asArray = readRange.toArray(new Double[] {});
    System.out.println(Arrays.toString(asArray));
}

public static List<Double> readRange(double endWith) {
    String endSignal = String.valueOf(endWith);
    List<Double> result = new ArrayList<Double>();
    Scanner input = new Scanner(System.in);
    String next;
    while (!(next = input.next().trim()).equals(endSignal)) {
        if (isDouble(next)) {
            Double doubleValue = Double.valueOf(next);
            result.add(doubleValue);
            System.out.println("> Input valid: " + doubleValue);
        } else {
            System.err.println("> Input invalid! Try again");
        }
    }
    // result.add(endWith); // uncomment, if last input should be in the result
    return result;
}

public static boolean isDouble(String in) {
    return Pattern.matches(fpRegex, in);
}

public static void main(String[] args) {
    new ArrayListInput();
}

private static final String Digits = "(\\p{Digit}+)";
private static final String HexDigits = "(\\p{XDigit}+)";
// an exponent is 'e' or 'E' followed by an optionally
// signed decimal integer.
private static final String Exp = "[eE][+-]?" + Digits;
private static final String fpRegex = ("[\\x00-\\x20]*" + // Optional leading "whitespace"
        "[+-]?(" + // Optional sign character
        "NaN|" + // "NaN" string
        "Infinity|" + // "Infinity" string

        // A decimal floating-point string representing a finite positive
        // number without a leading sign has at most five basic pieces:
        // Digits . Digits ExponentPart FloatTypeSuffix
        // 
        // Since this method allows integer-only strings as input
        // in addition to strings of floating-point literals, the
        // two sub-patterns below are simplifications of the grammar
        // productions from the Java Language Specification, 2nd
        // edition, section 3.10.2.

        // Digits ._opt Digits_opt ExponentPart_opt FloatTypeSuffix_opt
        "(((" + Digits + "(\\.)?(" + Digits + "?)(" + Exp + ")?)|" +

        // . Digits ExponentPart_opt FloatTypeSuffix_opt
        "(\\.(" + Digits + ")(" + Exp + ")?)|" +

        // Hexadecimal strings
        "((" +
        // 0[xX] HexDigits ._opt BinaryExponent FloatTypeSuffix_opt
        "(0[xX]" + HexDigits + "(\\.)?)|" +

        // 0[xX] HexDigits_opt . HexDigits BinaryExponent
        // FloatTypeSuffix_opt
        "(0[xX]" + HexDigits + "?(\\.)" + HexDigits + ")" +

        ")[pP][+-]?" + Digits + "))" + "[fFdD]?))" + "[\\x00-\\x20]*");// Optional
                                                                        // trailing
                                                                        // "whitespace" 
```

}

1.  在 Java 中，使用泛型是一件好事。这样，您就可以向编译器和虚拟机提示您将要使用的类型。在这种情况下，它的 double 并通过声明结果 List 包含 double 值，您可以使用这些值而无需转换/类型转换：

    ```
    if (!readRange.isEmpty()) {
        double last = readRange.get(readRange.size() - 1);
    } 
    ```

2.  使用 Java 集合时最好返回接口，因为有许多特定列表的实现（LinkedList、SynchronizedLists...）。因此，如果您稍后需要另一种类型的 List，您可以轻松更改方法内部的具体实现，而无需更改任何进一步的代码。

3.  **您可能想知道为什么 while 控制语句有效，但正如您所见，在next = input.next().trim()**周围有括号。这样，变量赋值就发生在条件测试之前。还需要进行修剪以避免空白问题

4.  我在这里没有使用**nextDouble()**，因为每当用户输入不是双精度的东西时，你就会得到一个异常。通过使用字符串，我可以解析用户提供的任何输入，还可以针对结束信号进行测试。

5.  **可以肯定的是，用户确实输入了一个双精度值，我使用了Double.valueOf()**方法的 JavaDoc 中的正则表达式。如果此表达式匹配，则转换该值，否则将打印错误消息。

6.  由于我在您的代码中没有看到的原因，您使用了计数器。如果您想知道成功输入了多少个值，只需调用**readRange.size() 即可**。

7.  如果你想处理一个数组，构造函数的第二部分展示了如何转换它。

8.  我希望你不会被我混淆 double 和 Double，但是感谢 Java 1.5 的 Auto-Boxing 特性，这没有问题。而且由于**Scanner.next()**永远不会返回 null (afaik)，这根本不应该是一个问题。

9.  如果要限制数组的大小，请使用

好的，我希望您发现我的解决方案和解释有用，使用**result.size()**作为指示符和关键字**break**离开 while 控制语句。

格瑞兹，GHad

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-11T03:33:56.063

```
public static ArrayList&lt;Double> readRange(double end_signal) {

    ArrayList<Double> input = new ArrayList<Double>();
    Scanner kbd = new Scanner( System.in );
    int count = 0;
    do{
        input.add(kbd.nextDouble());
        ++count;
    } while(input(--count) != end_signal);
return input;
} 
```

# vb6 - 在VB6中处理错误的更好方法是什么

> ID：116289
> 
> 赞同：15
> 
> 时间：2008-09-22T17:34:41.673
> 
> 标签：vb6, error-handling

我有 VB6 应用程序，我想在其中添加一些好的错误处理函数，它可以告诉我错误是什么以及它发生的确切位置，任何人都可以建议这样做的好方法

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-09-22T17:40:32.377

首先，去获取[MZTools for Visual Basic 6](http://www.mztools.com/v3/mztools3.aspx)，它是免费且无价的。其次在每个函数（是的，每个函数）上添加一个自定义错误处理程序。我们使用的错误处理程序如下所示：

```
On Error GoTo {PROCEDURE_NAME}_Error

{PROCEDURE_BODY}

    On Error GoTo 0
    Exit {PROCEDURE_TYPE}

{PROCEDURE_NAME}_Error:

   LogError "Error " & Err.Number & " (" & Err.Description & ") in line " & Erl & _
            ", in procedure {PROCEDURE_NAME} of {MODULE_TYPE} {MODULE_NAME}" 
```

然后创建一个将错误记录到磁盘的 LogError 函数。接下来，在发布代码之前，将行号添加到每个函数（这也内置在 MZTools 中）。从现在开始，您将从错误日志中知道发生的一切。如果可能，还可以上传错误日志并在现场实际检查它们。

这是您在 VB6 中对意外全局错误处理（其众多缺陷之一）所能做的最好的事情，实际上这应该只用于发现意外错误。如果您知道在某种情况下可能会发生错误，那么您应该捕获该特定错误并进行处理。如果您知道某个部分中发生的错误会导致不稳定（文件 IO、内存问题等），请警告用户并知道您处于“未知状态”并且可能会发生“坏事”。显然使用友好的术语来让用户了解情况，但不要害怕。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-09-22T18:11:18.857

一种无需额外模块的简单方法，对类模块很有用：

抢占每个功能/子：

```
On Error Goto Handler 
```

处理程序/冒泡：

```
Handler:
  Err.Raise Err.Number, "(function_name)->" & Err.source, Err.Description 
```

瞧，贫民窟堆栈跟踪。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-24T17:43:43.320

我使用了一个自制的`Error.bas`模块来减少报告和重新筹集的麻烦。

这是它的内容（编辑长度）：

```
Option Explicit

Public Sub ReportFrom(Source As Variant, Optional Procedure As String)
    If Err.Number Then
        'Backup Error Contents'
        Dim ErrNumber As Long: ErrNumber = Err.Number
        Dim ErrSource As String: ErrSource = Err.Source
        Dim ErrDescription As String: ErrDescription = Err.Description
        Dim ErrHelpFile As String: ErrHelpFile = Err.HelpFile
        Dim ErrHelpContext As Long: ErrHelpContext = Err.HelpContext
        Dim ErrLastDllError As Long: ErrLastDllError = Err.LastDllError
    On Error Resume Next
        'Retrieve Source Name'
        Dim SourceName As String
        If VarType(Source) = vbObject Then
            SourceName = TypeName(Source)
        Else
            SourceName = CStr(Source)
        End If
        If LenB(Procedure) Then
            SourceName = SourceName & "." & Procedure
        End If
        Err.Clear
        'Do your normal error reporting including logging, etc'
        MsgBox "Error " & CStr(ErrNumber) & vbLf & "Source: " & ErrSource & vbCrLf & "Procedure: " & SourceName & vbLf & "Description: " & ErrDescription & vbLf & "Last DLL Error: " & Hex$(ErrLastDllError)
        'Report failure in logging'
        If Err.Number Then
            MsgBox "Additionally, the error failed to be logged properly"
            Err.Clear
        End If
    End If
End Sub

Public Sub Reraise(Optional ByVal NewSource As String)
    If LenB(NewSource) Then
        NewSource = NewSource & " -> " & Err.Source
    Else
        NewSource = Err.Source
    End If
    Err.Raise Err.Number, NewSource, Err.Description, Err.HelpFile, Err.HelpContext
End Sub 
```

报告错误很简单：

```
Public Sub Form_Load()
On Error Goto HError
    MsgBox 1/0
    Exit Sub
HError:
    Error.ReportFrom Me, "Form_Load"
End Sub 
```

`Error.Reraise`重新提出错误就像使用新源调用一样简单。

如果使用符号调试信息进行编译，虽然可以从调用堆栈中检索`Source`和`Procedure`参数，但在生产应用程序中使用它还不够可靠

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-22T17:42:10.110

错误转到

和

```
Err 
```

目的。

[这里](http://web.archive.org/web/20171020040908/http://www.vb6.us:80/tutorials/error-handling)有一个教程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T17:51:22.803

是的，听从 Kris 的建议并获取 MZTools。

您可以将行号添加到复杂过程的部分区域，ERL 将在错误处理程序中报告这些区域，以追踪导致错误的区域。

```
10
    ...group of statements
20
    ...group of statements
30
    ...and so on 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-23T21:41:08.490

使用在

```
dim errhndl as string
on error goto errhndl
errhndl:
msgbox "Error" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T17:40:59.333

使用 On Error 语句和 Err 对象。

# php - 什么是 PHP 的最佳 IDE？

> ID：116292
> 
> 赞同：48
> 
> 时间：2008-09-22T17:35:32.297
> 
> 标签：php, ide

我是一名 PHP 开发人员，现在我使用[Notepad++](http://en.wikipedia.org/wiki/Notepad_%28software%29)进行代码编辑，但最近我一直在寻找一个 IDE 来简化我的工作。

我研究了[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)、[Aptana Studio](http://en.wikipedia.org/wiki/Aptana#Aptana_Studio)和其他几个，但我还没有真正决定，它们看起来都不错，但有点复杂。我相信一旦我习惯了一切都会变得容易，但我不想浪费我的时间。

这就是我要找的：

*   FTP支持
*   代码高亮
*   SVN支持会很棒
*   Ruby 和 JavaScript 会很棒

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2010-11-11T19:08:16.943

对于 PHP，我会推荐[PhpStorm](http://www.jetbrains.com/phpstorm/)。

它支持 FTP/SFTP 同步，与[Subversion](http://en.wikipedia.org/wiki/Apache_Subversion)、[CVS](http://en.wikipedia.org/wiki/Concurrent_Versions_System)、[Mercurial](http://en.wikipedia.org/wiki/Mercurial)甚至与[Git](http://en.wikipedia.org/wiki/Git_%28software%29)很好地集成。此外，它还支持 HTML、CSS、JavaScript 并像 PHP 代码、JSON 等中的 SQL 或 HTML 块一样处理语言混合。

但是，如果您需要 Ruby，您可以尝试另一个 IDE - [RubyMine](http://en.wikipedia.org/wiki/RubyMine)，它具有相同的功能，但适用于 Ruby。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2008-09-22T17:37:52.493

[网豆](http://netbeans.org/kb/trails/php.html)。签出 7.0.1。

它支持 FTP/SFTP 同步，与 Subversion、CVS、Mercurial 甚至与 Git（带插件）很好地集成。此外，它还支持 HTML、CSS、JavaScript、流行框架[等](http://netbeans.org/kb/docs/php/editorguide.html)。

而且它是免费的。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2008-10-02T11:14:32.633

太糟糕了，没有人提到[phpDesigner](http://www.mpsoftware.dk/phpdesigner.php)。这确实是我遇到过的最好的 IDE（我相信我已经全部尝试过了）。

这个的主要优点是它*不是*基于 Java 的。这使整个事情保持快速。

### 特征：

*   Intelligent Syntax Highlighter - 根据您的位置在 PHP、HTML、CSS 和 JavaScript 之间自动切换！
*   PHP（支持版本 4 和 5）
*   SQL（MySQL、MSSQL 2000、MSSQL 7、Ingres、Interbase 6、Oracle、Sybase）
*   HTML/XHTML
*   CSS（支持版本 1 和 2.1）
*   JavaScript
*   VBScript
*   爪哇
*   C＃
*   Perl
*   Python
*   红宝石
*   聪明的

### PHP：

*   支持 PHP 4 和 PHP 5
*   PHP 代码资源管理器（包括、类、扩展类、接口、属性、函数、常量和变量）
*   PHP 的代码完成 (IntelliSense) - 键入时的代码辅助
*   PHP 的代码提示（代码提示） - 键入时的代码辅助
*   使用任何 PHP 框架（动态访问类、函数、变量等）
*   PHP 面向对象编程 (OOP)，包括嵌套对象
*   支持 PHP heredoc
*   用单引号或双引号、换行符、回车符或制表符将字符串括起来
*   PHP 服务器变量
*   PHP 语句模板（if、else、then、while……）
*   强大的 PHP 代码美化器，具有许多配置和配置文件支持
*   phpDocumentor 向导
*   一键将phpDocumentor文档添加到函数和类中！
*   phpDocumentor 标签
*   一键评论或取消评论！
*   通过类、接口、函数、变量或常量过滤跳转到任何声明

### 调试（PHP）：

*   使用 Xdebug 进行调试
*   断点
*   逐步调试
*   踏进
*   跨过去
*   运行到光标
*   跑到回来
*   调用堆栈
*   手表
*   上下文变量
*   评估
*   剖析
*   多个会话
*   评估提示
*   捕捉错误

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2008-09-22T17:46:39.367

您确定要寻找 IDE 吗？您所描述的功能，以及您从例如 Aptana 获得的过于复杂的印象，表明您可能真正想要的只是一个具有语法突出显示和与一些常用工作流工具集成的优秀编辑器。为此，有很多选择。

我已经在几个平台上成功使用了[jEdit](http://www.jedit.org/)，仅此一项就使其高于大多数其他平台（许多 IDE 也是跨平台的，但是 Aptana 和任何基于 Eclipse 的东西如果完全的话，将是相当重量级的——特色）。jEdit 为您列表中的所有内容提供现成的插件，并为各种语言提供语法高亮显示。您还可以在窗口底部打开一个 shell，从编辑器中调用脚本等等。它并不完美（UI 比大多数 Java UI 更好，但我认为还不完美），但我很幸运，它会比 Aptana/Eclipse 简单得多。

也就是说，我确实非常喜欢 Aptana 用于 Web 开发，一旦你完成了学习曲线，它就会为你做很多繁重的工作。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2008-09-22T17:38:51.523

[Eclipse PDT](http://en.wikipedia.org/wiki/PHP_Development_Tools)非常好。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2008-10-02T13:17:13.493

我总是对越来越多的人不使用[ActiveState Komodo](https://www.activestate.com/Products/komodo_ide/)感到惊讶。

它拥有我尝试过的所有 PHP IDE 中最好的调试工具，是一款非常成熟的产品，并且具有比您无法动摇的更多有用的功能。值得注意的是，它有一个很棒的 HTTP 检查器、Javascript 调试器和正则表达式工具包。你可以得到它，让它逐步通过你的 PHP，然后你看到你的 Javascript 正在运行，然后看到你的 HTTP 流量通过网络传输出去！

它还提供免费（Komodo 编辑）和开放（OpenKomodo 版本）。

哦，如果您不总是*只*使用 PHP，它被设计为多语言编辑器，并且也适用于 Ruby 和 Python。

大约 5 年以来，我一直是一个满意的客户。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-09-22T17:37:41.043

为了帮助您入门，这里有[一个 PHP 编辑器列表](http://en.wikipedia.org/wiki/List_of_PHP_editors)（维基百科）。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-09-23T15:34:46.680

没有“最好”的 IDE，只有更好和更差的 IDE。

现在我正试图适应 Aptana。它有很多我不想要的东西，比如到处都是“Jaxer”的小玩意儿。它相当快，但是在启用语法高亮时会阻塞大文件。我一直无法弄清楚如何设置 PHP 调试。Aptana 的三个优点：简单的插件安装、非常快速和直观的 Subversion 插件、快速的文件搜索。

我尝试了 Eclipse PDT 和 Zend for Eclipse，但它们的界面杂乱无章。安装插件是版本不匹配和神秘错误消息的活生生的恐惧。

我也使用 Komodo（他们在工作中为我们购买了许可证）。Komodo 有一个非常直观的界面，但速度非常慢，在带有语法高亮显示的中等大小的文件上卡住了。文件搜索很直观，但速度较慢。Subversion 集成并不是那么好——速度慢而且有问题。如果不是因为速度慢，我可能会坚持使用 Komodo，尤其是调试器。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-09-23T15:44:37.453

特别是对于 PHP，[PHPEdit](http://www.phpedit.com/)是最好的，我尝试并使用了其中的一些工具，包括 Dreamweaver、Elipse、Emacs、Notepad++、NetBeans、UltraEdit ...

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2010-08-01T00:38:05.590

[Geany](http://www.geany.org)是一个很棒的轻量级编辑器——就像Linux 的[Notepad++](http://en.wikipedia.org/wiki/Notepad_%28software%29)，只有更好。我发现这一点，再加上一些用于将模块链接到 Web 源代码树的 shell 脚本和符号链接，使得在 Linux 上进行开发变得简单而有趣。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2011-06-03T12:02:21.953

我喜欢[JetBrains](http://en.wikipedia.org/wiki/JetBrains) IDE。对于 PHP，它是[JetBrains PHPStorm](http://www.jetbrains.com/phpstorm/)。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-22T17:37:56.487

[http://www.ibm.com/developerworks/opensource/library/os-php-ide/index.html](http://www.ibm.com/developerworks/opensource/library/os-php-ide/index.html)

就个人而言，我喜欢 Notepad++ ... :D 。上面的链接比较了一些更好的 IDE，最好的不是免费的。

不过我推荐 Komodo 4.4（我使用的是试用版），因为它很棒。比记事本++更好，但不是免费的...... :(

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-22T17:39:57.307

我会推荐[Zend](http://www.zend.com/en/) IDE 用于集成调试器。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-10-02T11:26:22.977

我正在使用[Zend Studio](http://www.zend.com/en/products/studio/)。它具有不错的语法突出显示、代码完成等功能。但最好的部分是，您可以使用独立的 PHP 解释器，甚至在您“浏览”页面时在实时 Web 服务器上调试 PHP 代码。您可以获得通常的 Visual Studio 键、断点、监视和调用堆栈，这对于寻找错误几乎是必不可少的。不再有“alert()”杂乱无章的调试源代码 :)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-10-03T00:34:05.067

你看过[Delphi for PHP](http://www.codegear.com/products/delphi/php) (< [http://www.codegear.com/products/delphi/php](http://www.codegear.com/products/delphi/php) >) 吗？

Microsoft 的 Joe Stagner 非常喜欢[用于 PHP 的 Delphi](http://www.codegear.com/products/delphi/php)。
他在这里说：[“[Delphi for PHP] 2.0 是真正的交易，我喜欢它！”](http://www.misfitgeek.com/Delphi+For+PHP+Version+20.aspx)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-22T17:46:33.737

您想要 IDE 的哪些功能？集成构建引擎？调试器？代码高亮？智能感知？项目管理？配置管理？测试工具？除了代码高亮，这些都不符合您的要求。

所以我的建议是使用支持插件的编辑器，比如[Notepad++](http://en.wikipedia.org/wiki/Notepad_%28software%29)（你已经习惯了）。如果还没有一个插件可以满足你的需求，那就写一个。

我在 Mac OS X 上使用[Coda 。](http://en.wikipedia.org/wiki/Coda_%28web_development_software%29)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-10-02T11:20:27.627

带有 PDT 的 Eclipse。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2009-10-30T10:33:51.667

我使用并喜欢[Rapid PHP](http://www.blumentals.net/rapidphp/)。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2010-09-18T15:17:22.837

镇上有一个新人，来自 JetBrains的[PhpStorm 。](http://en.wikipedia.org/wiki/PhpStorm)你使用它，我敢打赌你会忘记所有其他编辑器。不过有点贵，可惜了。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2010-10-15T07:25:04.687

[RadPHP](http://en.wikipedia.org/wiki/Embarcadero_Delphi#RadPHP_.28formerly_Delphi_for_PHP.29)（以前称为 Delphi for PHP）是最好的。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2010-10-19T12:35:45.637

一切都很好，但只有 Delphi for PHP (RadPHP 3.0) 有设计器、拖放控件、GUI 编辑器、大量组件，包括[Zend Framework](http://en.wikipedia.org/wiki/Zend_Framework)、Facebook、数据库等组件。这是城里最好的。

RadPHP 是最好的；它具有其他所有功能。它的设计师是最好的。您可以像 Dreamweaver 一样设计您的页面（超过 Dreamweaver）。

**如果您使用 RadPHP，您会感觉像在 Visual Studio 中使用 ASP.NET（但语言是 PHP**）。

可惜只有少数人知道这件事。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-09-22T17:44:05.473

Aptana 支持这一点，我现在将它用于我所有的 Web 开发。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-09-22T18:29:27.597

我个人的偏好是 Eclipse（带有各种插件），因为我正在使用多种语言（PHP、Java 和 Ruby）进行开发，因此我总是习惯于使用界面和键盘快捷键。这不是一件小事，因为您通过这种方式变得非常高效。我没有使用 Aptana，但（希望）很快会使用 - 不过它看起来确实很有趣。对于我使用过的其他 IDE：jEdit（用于小 Java）、Notepad++（仍然用于一些脚本和简短的测试代码运行）。对于你问的特性：Eclipse 支持许多源代码版本服务器（[Subclipse](http://subclipse.tigris.org/)）；您的项目可以在 Samba 共享上；ZendDebugger/xdebug 用于调试。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2008-09-22T19:44:53.967

毫无疑问，最好的 PHP IDE 是 NuSphere PHPEd。这是一场没有比赛的比赛。太好了，我使用 WINE 在我的 Mac 上运行它。PHPEd 内置了一个很棒的调试器，可以与他们的本地网络服务器一起使用（完全自动），或者您可以为 XAMPP 或您想要运行的任何其他 Apache 安装 dbg 模块。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2008-10-02T13:30:27.877

在我看来，最好的 PHP IDE 是[Zend Studio](http://www.zend.com/en/products/studio/)（它本身基于 Eclipse PDT）。请注意，在这种情况下，“最好”并不一定意味着“好”。它速度慢而且有一点问题，但即便如此，它仍然是 PHP 程序员的最佳选择。这些年来我尝试了很多 PHP 编辑器，但我还没有找到一个*很好*用的。

[Komodo IDE](http://www.activestate.com/Products/komodo_ide/index.mhtml)将是我的第二选择。我对 Komodo 的唯一问题是自动完成功能不太好。对于使用 phpDoc 记录返回类型等的结构合理的应用程序，应该没问题。但是我从事的项目并没有真正做到这一点，并且 Komodo 无法跨文件读取以知道 $user 是一个用户对象。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2009-05-19T01:17:08.000

就个人而言，所有基于 Eclipse 或 NetBeans 的东西都是多余的，GUI 很糟糕，与其他替代方案相比，性能太慢了。

如果您愿意付费，我建议您使用 Zend IDE（版本 5.5，而不是 6，因为它基于 Eclipse）和 EditPlus，以获得更轻量级但功能更强大的代码编辑器。

如果您正在寻找免费的替代品，或者如果您使用 PHP 以外的其他语言编写代码，OpenKomodo 是一个非常不错的 IDE，具有您需要的几乎所有功能（既没有 SVN，也没有 CVS），我看到的关于 OpenKomodo 的唯一缺点是有时它会弄乱我的代码缩进，但我又不经常使用它。

至于免费的轻量级替代品：Notepad++。=)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-22T17:40:50.223

您是否尝试过 NetBeans 6？Zend Studio 和 NetBeans 6 是您会遇到的最好的支持 PHP 的 IDE，而且 NetBeans 是免费的。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-22T17:43:34.977

我已经尝试过 Eclipse PDT，并取得了一些成功。Aptana 也很不错，或者如果你正在做很多 AJAX 的东西，那就太好了。但是，您的里程可能会有所不同，具体取决于您要与它们一起使用的其他插件。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-22T17:44:08.687

我相信 PHP 就是这样，实际上并不需要 IDE。我使用[vi](http://en.wikipedia.org/wiki/Vi)，它速度快，不会崩溃，并且与`grep -r`Ctags[一起](http://en.wikipedia.org/wiki/Ctags)，它可以将生产力提高很多倍。

Subversion 实际上是内置在控制台中的，因此您不会遇到源代码控制问题。

最后，我用作`springloops.com`存储库，所以我不必手动将文件 FTP 到任何服务器。它有一个 FTP 部署选项，该选项还确保只有更改的文件移动到登台服务器。

最好的部分是你可以去朋友家，找到一台 Linux 机器，然后开始开发，因为你需要的一切大部分都在大多数机器上可用。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-09-22T17:45:15.767

您可以使用一些 IDE。我个人喜欢 UltraEdit。它具有语法高亮、FTP/SFTP 支持、超快速、宏等功能——仅需 30 美元。

如果您正在做任何繁重的事情并且想要一些企业级 IDE 功能（本地/远程调试、框架支持、[IntelliSense](http://en.wikipedia.org/wiki/IntelliSense)），请尝试 Zend IDE。我相信这是几百美元，但值得。

您还可以尝试使用 Eclipse 插件（我认为是 PHPEclipse）。我希望这有帮助。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-09-22T17:52:03.770

[织梦者](http://en.wikipedia.org/wiki/Adobe_Dreamweaver)

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2008-09-22T17:55:31.733

就在昨晚，我终于买了最新版的[Zend Studio](http://en.wikipedia.org/wiki/Zend_Studio)。我使用了以前的版本，我总是很满意。我认为您不能低估他们的调试器与 Firefox 和 Internet Explorer 工具栏之间的集成。我经常使用它们，它们让我很好地了解了应用程序将如何实时运行。

最新版本是在 Eclipse 上构建的，因此您可以将它的许多特性作为基础，让 Zend 专注于提供更高级的功能。我喜欢他们让 Studio 非常了解 PHP 的方式，因为一旦你启动它，一切都面向开发 PHP 应用程序。它了解 Zend Framework、[PHPDoc](http://en.wikipedia.org/wiki/PHPDoc)和 PHP 的新 OOP 特性。（它与 PHP 一起成长。）您可以从 Eclipse 或[Eclipse PDT](http://en.wikipedia.org/wiki/PHP_Development_Tools)获得大部分相同的功能，但我总觉得它们为我提供了太多选择，我实际上无能为力。Studio 让我可以很快地开始构建应用程序，因为这就是它所做的一切。

我认为它可以满足您的大多数要求，除了 Ruby 部分。我相信你可以添加 Ruby 扩展，因为它是 Eclipse，但我还没有尝试过。另外，我认为他们最近也改进了 JavaScript 编码，但到目前为止我还没有进行太多测试。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2008-10-03T00:49:36.510

[PHPEclipse](http://www.phpeclipse.de/)尽可能接近 Eclipse java 的强大功能。Eclipse PDT 要弱得多（上次我检查过）。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2010-05-17T13:03:37.213

为什么选择 Dreamweaver - 2？对于当前的工作，我更喜欢 Dreamweaver 而不是其他编辑器。我尝试了很多编辑器，但最后我还是坚持使用 Dreamweaver。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2010-08-01T00:13:00.443

我正在使用 PHPDesigner，但我会选择 Eclipse PDT。我一直反对 Eclipse，直到几个月前我有一个 Java 项目要完成......很棒的 IDE

现在我无法想象没有 Eclipse 的一天。:)

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2010-10-19T12:53:54.413

Adobe Dreamweaver CS5 非常易于使用。它具有代码高亮功能，并在单独的选项卡中显示您包含在父文件中的文件，并具有`php.net`离线选项。这意味着如果您想了解新的内置函数，只需`Ctrl`+ `space`。它将显示下拉菜单。它具有语法以及来自`php.net`.

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2010-10-30T03:05:46.897

我认为最适合 PHP 的是 RadPHP。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2011-02-11T09:10:46.410

我有一个朋友向[Aptana Studio](http://en.wikipedia.org/wiki/Aptana#Aptana_Studio)发誓。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2011-02-18T23:04:42.493

*   最重要的是：记事本++（免费且对颜色和链接很有帮助）
*   平均：NetBeans（普通 IDE）
*   **不好**：Eclipse（当你不等待它时它会崩溃）
*   哦，我忘记了：永远不要使用[JDeveloper](http://en.wikipedia.org/wiki/JDeveloper)：D

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2011-03-13T15:14:58.667

NetBeans 非常好，因为它具有语法突出显示、选项卡、自动格式化和实时语法验证。可悲的是，您无法在不设置“项目”的情况下保存为 UTF-8。

多么烦人，我想知道是否有另一个编辑器具有语法突出显示、选项卡、自动格式化和实时语法验证，但也允许我使用 UTF-8 而无需设置“项目”。

# sharepoint - 如何在 Sharepoint 环境中处理代码提升？

> ID：116294
> 
> 赞同：4
> 
> 时间：2008-09-22T17:36:38.953
> 
> 标签：sharepoint, deployment

在具有内部开发的典型企业场景中，您可能拥有开发、登台和生产环境。您可以使用 SVN 在主干中包含正在进行的开发工作，补丁存储在分支中，并且您发布的代码进入适当命名的标签。将二进制文件从一个环境迁移到下一个环境可能就像将它们复制到中间件服务器、GAC'ing 需要 GAC 的东西等一样简单。与二进制文件的新修订版相协调，数据库会更新，通常通过添加存储过程、视图和添加/调整表模式。

在 Sharepoint 环境中，您可能会使用类似的版本控制方案。自定义代码（程序集）最终成为手动或通过各种安装程序安装的功能。但是，需要从开发到登台再到生产的一些内容可能是支持自定义代码位的数据库内容。

如果您管理过企业 Sharepoint 环境，请分享有关如何管理环境之间代码和内容更改的推广的想法，同时保护您的工作和用户，并保持您的理智。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T17:47:01.083

我假设当您谈论数据库内容时，您指的是站点 a 或列表中包含的实际内容。

执行此操作的最佳方法可能是使用 stsadm 导入和导出命令将内容从一个环境导出和导入到另一个环境。（从一种环境转移到另一种环境时，不要使用备份/恢复。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T18:02:37.067

对于任何文件更改（程序集、aspx），您可以使用功能，然后跟踪安装程序。您将安装该功能并进行升级以推送更改。

同步数据没有简单的方法......您可以使用 stsadm 导入/导出命令，正如 John 指出的那样。但这可能不是直截了当的，尤其是在服务器配置不同的情况下。

您还可以尝试Data Sync Studio 产品 ( [http://www.simego.net/DataSync_Studio.aspx )。](http://www.simego.net/DataSync_Studio.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-23T08:59:02.917

根据数据库内容采用的形式，我会在代码中保留它的创建，这样它就在一个地方（您的 Visual Studio 项目），也可以通过源代码管理进行管理。内容的部署可以通过控制台应用程序甚至更好的功能接收器。

您可能还想[阅读这篇博](http://www.sharepointnutsandbolts.com/2008/09/sharepoint-dev-strategies-it-not-all.html)文并查看其中提到的工具以了解另一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-30T04:06:48.247

我可以为您指出的最佳资源是 Eric 的论文：

[http://msdn.microsoft.com/en-us/library/bb428899.aspx](http://msdn.microsoft.com/en-us/library/bb428899.aspx)

我是一个团队的一员，该团队致力于通过 TFS 改进 WSS 和 MOSS 解决方案的开发故事，但我不知道它的立场。

# macos - SVN 客户端与 OS X 的 Finder 集成

> ID：116297
> 
> 赞同：17
> 
> 时间：2008-09-22T17:37:19.890
> 
> 标签：macos, smartsvn

是否有适用于 OS X 的 TortoiseSVN？我正在寻找一个 SVN 客户端，它将与 OS X 的 Finder 集成并作为上下文菜单项添加。

更新：刚刚找到[SmartSVN](https://www.smartsvn.com/)。有人对此有反馈吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-11-12T15:39:36.213

请注意，SCPlugin 和[SmartSVN](https://www.smartsvn.com/) Finder 集成都不能在 OS X 10.6 (Snow Leopard) 上运行，因为 Apple 已经放弃了对 Finder 插件的支持。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-22T17:51:02.257

SCPlugin[与](http://scplugin.tigris.org/ "SCP插件")OS X 上的 TortoiseSVN 最接近。它在 Finder 中添加了覆盖图标和上下文菜单条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T17:41:15.417

我不这么认为，但我最近开始在 Mac 上使用 Cornerstone 作为 SVN 客户端，我对此非常满意。

大约 60 美元，试用期为 30 天。也尝试“版本”。我跟踪了它几个星期，它是“最好的其他”SVN 客户端，但不如 Cornerstone (IMO)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T17:42:15.883

谷歌发现了这个：

[http://scplugin.tigris.org/](http://scplugin.tigris.org/)

看起来不像乌龟那么圆滑，但至少这是一个开始。

我尝试了一段时间的版本，但它经常让我感到困惑和恼火。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T17:43:49.810

您可能对[版本](http://www.versionsapp.com/)感兴趣。不完全是您要找的东西，但很接近

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-23T16:17:40.960

同意。SCPlugin 是最好的选择。但它在最新版本的 OS X 中有点错误。已经有一段时间了。另一种选择是[PathFinder](http://www.cocoatech.com/)，它是一个非常巧妙的 Finder 替代品，它集成了 SCPlugin、控制台和各种其他 SVN 集成。这是一个商业产品，但物有所值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-01T11:57:17.513

在我看来，svn-finder 脚本是 leopard 或 snowleopard 的最佳解决方案，因为 scplugin 在这些系统中无法与 Finder 一起使用。您可以从以下网址下载脚本：[http](http://svn-finder.sourceforge.net/) : //svn-finder.sourceforge.net/ 我还发现了easySVN [http://sourceforge.net/projects/easy-svn/](http://sourceforge.net/projects/easy-svn/)，它还不错而且免费。

# solaris - 打开 solaris 代码与 solaris 代码

> ID：116309
> 
> 赞同：2
> 
> 时间：2008-09-22T17:40:01.240
> 
> 标签：solaris, opensolaris

在 Solaris 下编写的代码与 Open Solaris 的兼容性如何？我会对一些内核模块特别感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T17:43:34.803

我认为很难量化软件兼容性，但我想说为 Solaris 编写的代码与 OpenSolaris 内核非常兼容。OpenSolaris 源代码演变成 Solaris 11，Sun 对向后兼容性的承诺是不争的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T18:21:00.110

为 Solaris 编写的内核模块应该在简单的重新编译后在 OpenSolaris 中运行，前提是您使用在 Solaris 和 OpenSolaris 中使用的发行版之间兼容的公开内核 API。

Sun 做了大量工作来确保使用公开的接口编写的程序是兼容的。大多数 API 的手册页底部都有一个列出的“暴露/稳定性”条目，以定义的术语说明人们如何使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T18:10:18.703

特别是内核模块将在 Solaris 和 OpenSolaris 之间非常兼容。OpenSolaris（通过 Project Indiana）正在大力发展用户空间组件，包括安装程序和软件包。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-09T14:01:02.740

这仅与核心操作系统守护进程有关，而**不是**内核模块，但我已经成功地从源代码编译 OpenSolaris 组件并在商业 Solaris 上使用生成的二进制文件就好了。使用 Makefile 显然更容易，但我手动完成了一个。

我用少量的二进制文件尝试了这个，我需要添加调试输出并使用 gcc 在商业 Solaris 系统上直接编译它们而没有问题。如前所述，YMMV 基于它是什么应用程序/模块。

# crystal-reports - 水晶报表 .Net 指南

> ID：116324
> 
> 赞同：6
> 
> 时间：2008-09-22T17:42:47.473
> 
> 标签：crystal-reports

在过去的六年中，我们一直在使用 .Net 和 Visual Studio，并且早期使用与 Visual Studio 捆绑的 Crystal Reports 的 .Net 版本开发了许多基于 Web 的报告应用程序。我对那个产品不以为然：使用起来似乎非常困难和复杂。我们必须进行安全更改，安装各种额外的软件，等等。

现在，我们正在迁移到 .Net 框架的 VS2008 和 3.5 版本，是时候重新开发旧应用程序了。我们的 Crystal .Net 开发人员早已离开，我面临一个决定：我们是坚持使用 Crystal 还是转向其他公司？我们可以使用 Crystal Reports XI 的“完整”版本。

我们生成从各种数据库中提取的数据的 PDF 版本。一些应用程序使用内置的报表查看器，但这对于网格视图的灵活性来说似乎是多余的。我们仍然需要以网格或可下载的 Excel 格式生成可打印的 PDF。

*   Crystal Reports .Net 值得坚持，还是我们应该研究如何使用版本 XI？
*   或者，是否有一种简单且低成本的方法来生成 PDF 报告*而不*使用 Crystal？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T17:51:53.113

我在 CrystalReports（尝试与 Visual Studio 捆绑的精简版）、DataDynamics 的 ActiveReports（4 年，完整版）、Telerik 的报告（试用试用版）和 DevExpress 的 XtraReports（过去一年）中都有报告经验。

我认为（不仅是我 :)），CrystalReports 是该工具中最不高效的工具（开发人员生产力）。DataDynamics 好多了，好多了，bud 有点小错误:(。去年我们决定更改报告套件 - 我们选择了 XtraReports（带有源代码），我非常高兴。价格很低，没有错误（到现在 :) ），出色的支持，以及（最重要的）生产力提高了很多。

我向您推荐 DevExpress 或 Telerik 的报告工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-24T20:59:57.670

我会推荐**[i-net Clear Reports](http://www.inetsoftware.de/products/crystalclear/)**（以前是 i-net Crystal-Clear）。它可以读取您现有的 *.rpt 文件。拥有更好且更易于使用的 API（我承认这并没有说太多……）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T17:47:43.157

和你一样，我对 Crystal Reports 的体验很糟糕，我的直觉是用大量感叹号在所有大写字母中“不惜一切代价避免它”。不过，我今天午睡了，所以我会像个大人一样发帖。

如果您要做的只是 pdf-ize（是的，这是一个真实的词，该死！）那么您可能会查看一些 PDF 小部件，如[ABCPDF](http://www.websupergoo.com)等。将格式良好的网页弹出到 PDF 文档中并完成它相对容易。

但是，如果您需要严格的报告格式，请考虑坚持使用水晶报告——您在该技术方面拥有大量投资和知识基础。或者，您也可以切换到 ActiveReports 或 SQL Server 报告服务。

我想成本/收益分析是重新培训开发团队和投资新技术的成本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T17:49:00.937

远离 CR：只需为 .NET 获取一个好的[PDF 生成器](http://www.siberix.com/)和[Excel 引擎](http://www.spreadsheetgear.com/)，并使用您自己的数据库代码提供这些内容。您可以使用所有强大的 .NET 功能，包括 LINQ，而不必为 Crystal Reports 运行时及其严重不足的文档和支持而苦恼。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T17:52:14.330

我可以建议内置的 Microsoft 报告框架可以正常工作。您可以进行本地报告或基于 MS SQL 服务器的报告。有一个客户端控件，可以显示报告并可以导出为 pdf 和 Excel 等格式。Visual Studio 可以处理堆栈的报表设计。

至于它是否比 Crystal Reports 更好，我会说检查一下，看看您是否更喜欢它。与 Crystal Reports 相比，我使用 Microsoft Report Viewer 的次数更多，但两者似乎都非常相似。顺便说一下，Crystal Reports 似乎是一个更高级的报表工具，但更复杂。

我不确定如何在 Visual Studio 之外使用 Microsoft Report Viewer 基础结构。如果您使用的是 Visual Studio，它应该都可以在其中使用，并且您可以按照在线帮助说明将服务器的部分部署到您的服务器。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T17:57:56.033

我使用过来自 DataDynamics 和 Crystal Reports 的 ActiveReports。在这两者中，基于易用性，更重要的是，未来的维护，我会推荐 Crystal 之上的 ActiveReports。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-24T21:02:56.743

**离开水晶报表**。他们很穷。

查看**SQL 报告服务**。它与.NET 配合得很好。试试看。有学习曲线，但什么时候没有？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T18:02:34.133

我们的商店也使用水晶。我们目前使用的是 8.5，它已经过时并且不再受 SAP 支持。我们最近尝试升级到 CRXI，其中涉及一个全新的 API。由于其他优先事项，我们不得不搁置这项工作。在进行升级时，我在许多论坛上找到了对 CRXI 的支持。去谷歌上查询。

我相信您可以找到一种无需使用 Crystal 即可生成 PDF 的廉价方法。我相信 Adob​​e 会免费提供创作部分。我会访问他们的网站并进行调查。

仅当您有很多报告已经在使用该技术时，我才会建议您继续使用 Crystal。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-01-13T17:51:12.617

IMO，您还应该考虑其他标准，例如：

*   软件成本
*   与您的 .NET 应用程序集成
*   API 和程序化灵活性（总而言之，总是有“定制”和剪裁。对于这种情况，开发人员最终会求助于程序化解决方案而不是开箱即用

现在，根据我的经验（同时使用 Crystal Reports 和 SSRS(2005/2008) ，虽然 Crystal Reports 确实带有一组友好的 API，但它在许多基本标准上都失败了，开发人员最终与软件抗争。这是我说的基于我在 SSRS 方面的经验让开发人员更熟悉。对于初学者来说，它广泛使用 XML，并且使用自定义代码程序集的规定也没有害处。

——我想你会在我所说的地方——

*“考虑和评估*SSRS*。如果您一开始犹豫不决，请进行概念验证并测试您的要求。我感觉您会对所看到的内容感到满意

1.  特别是考虑到**您**使用 PDF 格式的要求。
2.  开发人员，尤其是 MSFT 专家将感谢您
3.  利用报告的程序化呈现（虽然听起来很花哨，相信我，它只不过是处理一个 API 调用

例如：public Byte[] Render(string Report, string **Format** , string HistoryID, string DeviceInfo, [Namespace].ParameterValue[] Parameters, [Namespace].DataSourceCredentials[] Credentials, string ShowHideToggle, out string Encoding, out string MimeType, out [Namespace].ParameterValue[] ParametersUsed, out [Namespace].Warning[] 警告 out string[] StreamIds); [命名空间].ReportingService 的成员）

--- 格式为“PDF”

希望你觉得这相关

# javascript - 使用 Javascript 在表格上拖动 HTML 单元格

> ID：116338
> 
> 赞同：3
> 
> 时间：2008-09-22T17:45:25.737
> 
> 标签：javascript, jquery, html

伙计们，

我需要一个允许在表格上拖放单元格的解决方案。

单元格可以有不同的跨度，所以当单元格被放到另一个更大的单元格的中间时，应该执行以下步骤：

1.  另一个 td 元素被创建，它的宽度与可拖动元素相等。
2.  新 td 元素左右两侧的单元格会自动调整其宽度。

现在我使用JQuery拖放插件。它允许拖动元素，但在可放置元素的部分操作 DOM 元素时变得有点尴尬。

有人可以提出一些实现这种行为的库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T17:50:22.697

[DragTable](http://code.google.com/p/dragtable/)可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T17:57:42.337

不确定它是否支持表格，但我之前使用过[链接文本](http://tool-man.org/examples/index.html "这")，它对我来说效果很好

# c - vmalloc 和 kmalloc 有什么区别？

> ID：116343
> 
> 赞同：125
> 
> 时间：2008-09-22T17:46:20.273
> 
> 标签：c, linux-kernel, kmalloc, vmalloc

我四处搜索，发现大多数人都提倡使用`kmalloc`，因为您可以保证获得连续的物理内存块。但是，如果找不到您想要`kmalloc`的连续**物理**块，似乎也会失败。
拥有连续的内存块有什么好处？具体来说，为什么我需要在*系统调用中有一个连续的***物理**内存块？有什么理由我不能使用吗？ 最后，如果我要在处理系统调用期间分配内存，我应该指定吗？系统调用是否在原子上下文中执行？*`vmalloc`
`GFP_ATOMIC`*

 *> `GFP_ATOMIC`
> 分配是高优先级的，不休眠。这是在中断处理程序、下半部分和其他无法睡眠的情况下使用的标志。
> 
> `GFP_KERNEL` 这是正常分配，可能会阻塞。这是在可以安全睡眠时在进程上下文代码中使用的标志。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2008-09-22T18:05:22.613

如果缓冲区将由物理寻址总线（如 PCI）上的 DMA 设备访问，您只需要担心使用物理上连续的内存。问题是许多系统调用无法知道它们的缓冲区是否最终会被传递给 DMA 设备：一旦你将缓冲区传递给另一个内核子系统，你真的不知道它要去哪里。即使内核*今天不使用缓冲区进行 DMA，*未来的开发也可能会这样做。

vmalloc 通常比 kmalloc 慢，因为它可能必须将缓冲区空间重新映射到几乎连续的范围内。kmalloc 从不重新映射，但如果不使用 GFP_ATOMIC 调用 kmalloc 可能会阻塞。

kmalloc 可以提供的缓冲区大小受到限制：128 KBytes ^(*))。如果您需要一个非常大的缓冲区，则必须使用 vmalloc 或其他一些机制，例如在启动时保留高内存。

> ^(*)) *这适用于早期的内核。在最近的内核上（我在 2.6.33.2 上测试过），单个 kmalloc 的最大大小为 4 MB！（我为此写了一篇相当[详细的帖子](http://kaiwantech.wordpress.com/2011/08/17/kmalloc-and-vmalloc-linux-kernel-memory-allocation-api-limits/)。） — kaiwan*

对于不需要将 GFP_ATOMIC 传递给 kmalloc() 的系统调用，可以使用 GFP_KERNEL。您不是中断处理程序：应用程序代码通过陷阱进入内核上下文，它不是中断。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-22T18:05:11.383

简短的回答：下载[Linux 设备驱动程序](http://lwn.net/Kernel/LDD3/)并阅读有关内存管理的章节。

说真的，您需要了解与内核内存管理相关的许多微妙问题——我花了很多时间调试它。

vmalloc() 很少使用，因为内核很少使用虚拟内存。kmalloc() 是通常使用的，但是您必须知道不同标志的后果是什么，并且您需要一种策略来处理失败时会发生什么 - 特别是如果您在中断处理程序中，就像您建议的那样。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-11T22:37:55.803

Robert Love 的 Linux Kernel Development（第 12 章，第 3 版第 244 页）非常清楚地回答了这个问题。

是的，在许多情况下不需要物理上连续的内存。在内核中使用 kmalloc 多于 vmalloc 的主要原因是性能。该书解释说，当使用 vmalloc 分配大内存块时，内核必须将物理上不连续的块（页）映射到单个连续的虚拟内存区域。由于内存实际上是连续的并且物理上是不连续的，因此必须将几个虚拟到物理地址的映射添加到页表中。在最坏的情况下，将有*（缓冲区大小/页面大小）*数量的映射添加到页表中。

这也增加了访问此缓冲区时 TLB（存储最近的虚拟地址到物理地址映射的缓存条目）的压力。这会导致[颠簸](http://en.wikipedia.org/wiki/Thrashing_%28computer_science%29)。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-11-30T10:38:44.197

`kmalloc()`&函数是一个简单的`vmalloc()`接口，用于以字节大小的块获取内核内存。

1.  该`kmalloc()`函数保证页面在物理上是连续的（并且实际上是连续的）。

2.  该`vmalloc()`函数的工作方式与 类似`kmalloc()`，但它分配的内存仅是虚拟连续的，不一定是物理连续的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-22T17:48:13.280

*拥有连续的内存块有什么好处？具体来说，为什么我需要在系统调用中有一个连续的物理内存块？有什么理由我不能只使用vmalloc吗？*

来自谷歌的“我感觉很幸运” `vmalloc`：

**kmalloc 是首选方式，只要您不需要很大的区域。问题是，如果你想从/到某些硬件设备进行 DMA，你需要使用 kmalloc，而且你可能需要更大的块。解决方案是在内存碎片化之前尽快分配内存。**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-05T20:13:31.137

在 32 位系统上，kmalloc() 返回内核逻辑地址（尽管它是一个虚拟地址），它具有到物理地址的直接映射（实际上具有恒定偏移量）。这种直接映射确保我们获得连续的物理 RAM 块。适用于 DMA，我们只给出初始指针并期望之后为我们的操作提供一个连续的物理映射。

vmalloc() returns the kernel virtual address which in turn might not be having a contiguous mapping on physical RAM. Useful for large memory allocation and in cases where we don't care about that the memory allocated to our process is continuous also in Physical RAM.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-03-12T06:26:37.300

其他区别之一是 kmalloc 将返回逻辑地址（否则您指定 GPF_HIGHMEM）。逻辑地址被放置在“低内存”中（在物理内存的第一个千兆字节中）并直接映射到物理地址（使用 __pa 宏进行转换）。此属性意味着 kmalloced 内存是连续内存。

另一方面，Vmalloc 能够从“高端内存”返回虚拟地址。这些地址不能以直接方式转换为物理地址（您必须使用 virt_to_page 函数）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-01T12:53:44.267

In short, vmalloc and kmalloc both could fix fragmentation. vmalloc use memory mappings to fix external fragmentation; kmalloc use slab to fix internal frgamentation. Fot what it's worth, kmalloc also has many other advantages.

# ruby-on-rails - 在 Ruby on Rails 中上传文件

> ID：116353
> 
> 赞同：8
> 
> 时间：2008-09-22T17:48:43.760
> 
> 标签：ruby-on-rails, ruby, file-upload

我有一个 Web 应用程序需要从用户那里上传文件并将其上传到远程服务器。我可以通过file_field从用户到服务器的输入很好，但似乎无法完成从服务器上传到远程的下一步。Net::HTTP 没有开箱即用的多部分表单，我也找不到另一个好的解决方案。我需要一些允许我从用户 -> 服务器 -> 远程而不是用户 -> 远程的东西。以前有人成功过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-23T10:47:07.823

我相信 attachment_fu 插件会允许这样做：

[http://svn.techno-weenie.net/projects/plugins/attachment_fu/](http://svn.techno-weenie.net/projects/plugins/attachment_fu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T18:37:54.080

令人惊讶的是，多部分形式的帖子确实不在 Net:HTTP 中。comp.lang.ruby 中的一个[线程](http://groups.google.com/group/comp.lang.ruby/browse_thread/thread/47e004681a47a5cb)似乎有一段代码，您可能会发现它对执行必要的编码很有用：

```
BOUNDARY = "AaB03x"

def encode_multipartformdata(parameters = {})
  ret = String.new
  parameters.each do |key, value|
    unless value.empty?
      ret << "\r\n--" << BOUNDARY << "\r\n"
      ret << "Content-Disposition: form-data; name=\"#{key}\"\r\n\r\n"
      ret << value
    end
  end
  ret << "\r\n--" << BOUNDARY << "--\r\n"
end 
```

# c - Windows 的 C 编译器？

> ID：116368
> 
> 赞同：128
> 
> 时间：2008-09-22T17:51:34.083
> 
> 标签：c, windows, compiler-construction

我很好地使用 gcc 作为我的 C 编译器在 Linux 上工作，但我想要一个 Windows 解决方案。有任何想法吗？我看过[Bloodshed 的 Dev-C++，](http://en.wikipedia.org/wiki/Dev-C%2B%2B)但正在寻找更多选择。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2008-09-22T17:53:07.823

您可以通过下载[MingW](http://www.mingw.org/)（*已停产*）或其继任者[Mingw-w64](https://mingw-w64.org/)在 Windows 上使用 GCC 。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-09-22T17:52:41.240

如果你想要一些针对 Win32 的东西，你可以直接从 Microsoft 获得[Visual C++ Express Edition 。](http://www.microsoft.com/express/vc/)否则 MinGW 或 lcc，如其他地方所建议的那样。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2008-09-22T18:01:22.047

GCC 无处不在。它受到数十个社区的数千人的信任和充分理解。

Visual Studio 可能是有史以来最好的 IDE。它下面有一个很棒的编译器。但它严格来说是仅限 Windows 的。

如果您只是在玩，请获取 GCC——它是免费的。如果您担心多个平台，那就是 GCC。如果您正在谈论严肃的 Windows 开发，请获取 Visual Studio。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2008-09-22T17:53:48.617

你总是可以通过 cygwin 使用 gcc。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2009-04-23T10:31:08.537

还有另一个适用于 Windows 的免费 C 编译器：Pelles C。

Pelles C 是一个完整的 Windows 和 Windows Mobile 开发工具包。它包含一个优化 C 编译器、一个宏汇编器、一个链接器、一个资源编译器、一个消息编译器、一个 make 实用程序以及适用于 Windows 和 Windows Mobile 的安装构建器。它还包含一个集成开发环境 (IDE)，带有项目管理、调试器、源代码编辑器和资源编辑器，用于对话框、菜单、字符串表、加速器表、位图、图标、光标、动画光标、动画视频（AVI 无声音）、版本和 XP 清单。

网址：[http ://www.smorgasbordet.com/pellesc/](http://www.smorgasbordet.com/pellesc/)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-09-22T17:58:45.157

我个人一直在研究在[Code Blocks IDE](http://www.codeblocks.org)中使用 MinGW（Bloodshed 使用什么） 。

我也在考虑使用[Digital Mars C/C++](http://www.digitalmars.com)编译器。

两者似乎都受到好评。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-09-24T06:52:13.683

你可以试试[Code::Blocks](http://www.codeblocks.org/)，它是更好的 IDE 并且带有 MinGW GCC！我已经使用过它，它对于 C/C++ 来说是一个非常好的免费软件 IDE。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-09-24T07:25:17.580

GCC 在技术上并不是一个特定于 linux 的编译器。它是一个符合标准的 c/c++ 编译器，我每天都将它用于 Windows 程序。最好使用它，直到您对其他东西变得更舒服为止。

我推荐你使用 GCC 的 MinGW 发行版。这将使用标准库等为 Windows 本地编译您的程序。

如果您正在寻找 IDE，我有两个建议。Visual Studio 是 Microsoft 版本，尽管存在问题，但它是处理代码的*出色*IDE。但是，如果您正在寻找更轻量级的东西，CodeBlocks 也相当不错，并且具有基本上能够使用您安装的任何编译器的额外好处（包括几种形式的 GCC 和 Visual 附带的 Microsoft 编译器） Studio）并能够从其他 IDE 打开项目文件。此外，它也可以在 linux 上运行，因此您可以让自己更轻松地进行过渡。

我个人更喜欢 GCC，但这只是我。如果您真的想要 Microsoft 解决方案，VS 是您的最佳选择。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2008-09-22T17:52:37.497

[MinGW](http://www.mingw.org/)将是 gcc for windows 的直接翻译，或者您可能想使用 IDE 查看[LCC](http://www.cs.virginia.edu/~lcc-win32/)、 vanilla c （或多或少）。[Pelles C](http://www.smorgasbordet.com/pellesc/)似乎基于 lcc 并且有一个更好的 IDE，虽然我没有亲自使用它。当然，总是有免费的 MSVC [Express Edition](http://www.microsoft.com/express/download/)，但那是您的决定。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2010-11-14T01:41:41.280

大多数大学都允许您访问[Microsoft Dreamspark](https://www.dreamspark.com/default.aspx)。

如果您在课堂上使用 GCC/Linux，只需安装[Ubuntu](http://www.ubuntu.com/)。Windows 是一个糟糕的 C 开发平台。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2008-09-22T18:01:29.567

如果您实际上在使用 C，请小心使用 C 编译器，而不是 C++。虽然 C 中的大多数程序都可以使用 C++ 编译器工作，但存在足够的差异可能会出现问题。我同意那些建议通过 cygwin 使用 gcc 的人。

编辑：
[http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B)显示了一些主要差异

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-22T17:53:11.287

[http://www.mingw.org/wiki/HOWTO_Install_the_MinGW_GCC_Compiler_Suite](http://www.mingw.org/wiki/HOWTO_Install_the_MinGW_GCC_Compiler_Suite)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-22T17:56:59.000

GCC 工作正常。请注意，MSVC*不一定*是有效的解决方案，因为它不支持 C99。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2012-09-21T19:05:59.560

我参加这个聚会迟到了，但对于 Windows 上的任何未来 C 人员来说，Visual Studio 的目标是 C90 而不是 C99，这是你在 *nix 上得到的。我目前在 Windows 上使用 Sublime Text 2 与 Cygwin 结合使用 C99。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-22T17:55:37.380

[Cygwin](http://cygwin.org/)在 Windows 上提供完整的 GCC 支持；此外，免费的 Microsoft [Visual C++ Express Edition](http://www.microsoft.com/express/)也可以很好地支持“传统”C 项目。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-22T17:57:39.933

[Visual C++ Express](http://www.microsoft.com/express/vc/)是一款出色的免费 IDE，适用于 Windows，带有编译器。

如果您对一般的命令行解决方案（尤其是 gcc）更熟悉， 那么[MinGW](http://www.mingw.org/)或[Cygwin](http://www.cygwin.com/)可能更适合您。它们也是免费的。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-09-22T21:11:15.723

有一些评论指出 C 不是 C++。虽然这是真的，但任何 C++ 编译器也将编译 C 也是如此 - 通常编译器模式将根据文件扩展名自动选择，但每个编译器也可以选择强制 C 或 C++ 模式，而不管文件名如何。

因此，请选择您最熟悉 gcc、VC++ Express、Digital Mars 等的免费 C++ 编译器。使用你最喜欢的 IDE 最好的 emacs、vim、VC++ Express、Code::Blocks、Bloodshed——不管怎样。

这些工具中的任何一个都足以用于学习。就个人而言，既然你问的是 Windows，我会选择 VC++ Express——它是一个很棒的 IDE，它是免费的，而且它可以很好地编译 C 程序。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-22T18:03:00.420

这取决于您在课堂上使用的内容。

如果实验室和作业在 linux 中，那么您可能需要 MinGW 解决方案。如果它们在 Windows 中，请获取 Visual Studio Express。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-22T18:12:34.233

您不能从学校获得免费版本的 Visual Studio Student Addition 吗？大多数大学都有向学生提供免费软件的计划。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-23T22:19:54.647

你是说 Bloodshed 的 Dev-C++？这是一个不错的 C++ 可视化 IDE，它使用 MinGW 的 gcc for Windows 作为后台编译器。该项目已经被放弃了一段时间（在我看来，使用 Delphi 开发 C++ IDE 是一件*非常*愚蠢的事情来引起开发人员的注意），但是没有什么可以阻止您使用它并更新 MinGW 的 gcc 版本它使用最新的 - 除了它是 GPL 许可的。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-10-14T19:30:51.863

我使用 BloodShed 的 DEV C++、CygWin 或 Visual C++ Express。所有这些都是免费的并且运行良好。我发现对我来说，DEV C++ 工作得最好，而且最不离奇。每个编译器都有自己的怪癖和差异，您需要尝试一些并找到最适合您的编译器。我还喜欢 DEV C++ 允许我更改编辑器中使用的字体这一事实。我喜欢 Proggy Programming 字体！

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2008-09-22T17:53:10.850

必须 Windows C++ 编译器才能工作。

另外，请查看[MinGW](http://www.mingw.org/)。

# java - Java ME UI 库

> ID：116394
> 
> 赞同：11
> 
> 时间：2008-09-22T17:55:25.413
> 
> 标签：java, java-me, mobile

我正在开发一个 Java ME 应用程序并需要指向一些非常好的 UI 库的指针。我确实看到了一些，例如 Java ME Polish。外面还有吗？例如，ebuddy 的 java ME 应用程序具有令人惊叹的 UI，gmail 的 java ME 应用程序也是如此。他们会使用什么库，或者他们会自己开发什么库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-23T08:40:38.687

Sun 最近发布并开源了他们的解决方案来解决看起来很糟糕的 lcdui。它被称为轻量级 UI 工具包，可以在[lwuit.dev.java.net上找到](http://lwuit.dev.java.net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-23T08:25:27.663

eSWT 将可用于最新 J9 VM 上的 MIDlet，正如 Series60 第 3 版功能包 2 手机（诺基亚 N78、6210、N96...）所使用的那样，但我们主要讨论的是外观更好的 UI 控件。基本上，MIDlet 现在看起来更像本机应用程序。

Sun 最近开源了 LWUIT。这也值得一看。

不过，没有什么比在画布上绘制自己的图像更好的了。任何类型的库中的通用布局管理器只会让你到目前为止。仅当您对应用程序应具有多少种不同类型的屏幕以及它们的外观有了很好的了解后，您才应该查看可用的技术。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-11T18:47:32.237

我们最近一直在尝试 kuix .. 到目前为止，它比 LWUIT 代码好且重量更轻。[http://code.google.com/p/kuix](http://code.google.com/p/kuix)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-23T22:19:04.663

大多数具有令人惊叹的 UI 的应用程序（Opera Mini、Gmail、来自 AAA 开发人员的任何游戏）都使用内部开发的自定义 UI。这些开发人员将开发 UI 的任务作为他们项目中的一项任务，并赋予其个性，包括专业的图形设计师。使用打包的库可以快速完成任务，但它会使应用程序看起来一般而乏味（使用默认 UI 时不那么乏味，但仍然乏味且有限）。

简而言之，使用打包的 UI 进行快速开发，但不要期望质量水平接近您提到的应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-24T16:07:31.820

我现在也面临着类似的困境。我们目前正在使用默认的高级 LCDUI 框架来加快开发速度，但这严重限制了我们的能力。我曾认为我们最好的选择是使用第三方 UI 框架，但我现在确信，如果我们认真对待应用程序，我们应该编写自己的应用程序。它就像软件中的任何东西一样，如果它的任务对您的应用程序至关重要，您应该自己编写它，即使这意味着重新发明轮子。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-12T10:11:14.267

Digitalapes 为 J2ME 应用程序开发开发了一个框架，其中包括一个高级 UI 库。

该库是轻量级的并且文档齐全，您可以查看[Gear 框架页面以获取更多信息，或者您可以直接从](http://www.digitalapes.net/en/applications/gear/)[Gear 的 sourceforge 页面](http://sourceforge.net/projects/gearjmf)下载 JAR 和 javadoc 。

[Digitalapes 博客](http://digitalapes.blogspot.com/)还包括一系列关于如何使用该框架的教程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-17T19:46:52.647

[波兰语](http://www.j2mepolish.org)有一组非常好的 UI 组件，它们可以使用 css 样式注释进行换肤。它还具有用于兼容性目的的设备数据库。

如果您决定使用波兰语（就像我一样），请提供一些提示：

1.  使用 eclipse 和 mepose 插件。netbeans 集成真的很伤脑筋。
2.  公告板已经死了，所以一定要使用邮件列表！
3.  如果您不熟悉 ant 构建系统，最好从现在开始。
4.  J2ME 波兰书不值钱。（我的意见）。他们网站上的文档和编码示例足以为您提供一个坚实的开始。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T17:57:32.943

我在部署到完整配置文件 J2ME（PocketPC 上的 IBM J9）时使用了 SWT，但是我不知道 MIDlets 是否可以使用它。它以自己的方式是一个相当不错的 GUI 库，并且比 AWT 好得多。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-10-30T09:43:50.603

不幸的是，当涉及到移动开发时，公司通常最终会设计自己的 GUI。这是完全控制您的界面的唯一方法，但您应该考虑是否值得额外的开发时间，而且当涉及到设备兼容性问题/手机错误时，您也需要自己解决——其中有很多。

如果您对不太灵活的界面感到满意，则可以使用现有库之一。[我目前使用来自http://www.garcer.com/](http://www.garcer.com/)的J2ME GUI 。我们获得了与桌面开发相同的灵活性，它还具有自定义样式，因此只需付出一点额外的努力，您就可以让它看起来像您想要的那样。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-03-13T09:21:06.410

您可以在 J2ME 框架中使用 LWUIT 进行 UI 开发。

# sql - 用于记录创建日期时间的 SQL Server 2000 函数

> ID：116402
> 
> 赞同：4
> 
> 时间：2008-09-22T17:56:02.620
> 
> 标签：sql, sql-server

当数据库中的记录被添加时，我被分配了一个显示的任务，但是以前的开发人员从未为此创建一个字段，我无法返回并为所有现有记录补上日期。有没有一种简单的方法可以从`SQL server 2000`查询中提取记录创建日期。

```
SELECT RECORD_CREATED_DATE FROM tblSomething WHERE idField = 1 
```

`RECORD_CREATED_DATE`不是现有表中的字段。是否有某种 SQL 函数来获取此信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-22T17:57:20.120

如果未将其存储为字段，则在事务日志回收后（通常每天），信息会*丢失*，甚至可能更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T18:12:42.207

不，不幸的是，插入或上次更新的日期不会自动存储在每条记录中。

为此，您需要在表中创建两个**日期**时间列（例如**CreatedOn**、**UpdatedOn**），然后在**INSERT**触发器中设置**CreatedOn = getdate()**并在**UPDATE**触发器中设置**UpdatedOn = getdate()**。

```
CREATE TRIGGER tgr_tblMain_Insert
   ON  dbo.tblMain
   AFTER INSERT
AS 
BEGIN
    set nocount on

    update dbo.tblMain
    set CreatedOn = getdate(),
    CreatedBy = session_user
    where tblMain.ID = INSERTED.ID

END 
```

我还喜欢创建我设置为**session_user**或通过其他方法更新的**CreatedBy**和**UpdatedBy varchar(20)列。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T18:02:16.520

我不知道您可以通过何种方式获取现有记录的此信息。但是，以后您可以创建一个审计表来存储 TableName 和 RecordCreateDate（或类似的东西。

然后，对于相关表，您可以创建一个插入触发器：

```
CREATE TRIGGER trigger_RecordInsertDate
ON YourTableName
AFTER INSERT
AS
BEGIN
 -- T-SQL code for inserting a record and timestamp
 -- to the audit table goes here
END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T18:55:46.457

我将从现在开始输入这些信息。创建两列，InsertedDate、LastUpdatedDate。在第一个上使用 getdate() 的默认值，并在第二个上使用更新触发器（可能也需要考虑 UpdatedBy）。然后我会编写一个查询来显示信息，使用 CASE 语句显示日期（如果有的话）并显示“未知”字段为空。如果您需要存储所有更新的记录，这会变得更加复杂。然后你需要使用审计表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T18:14:07.210

创建另一列并给它一个默认的 getdate() 来处理插入的日期，对于更新的日期，你需要编写一个更新触发器

# html - 从字符串中删除给定 (x)HTML 标记的正则表达式

> ID：116403
> 
> 赞同：6
> 
> 时间：2008-09-22T17:56:48.407
> 
> 标签：html, regex, string

假设我有一个包含一堆文本和 (x)HTML 标记的字符串。我想删除给定标签的所有实例（以及该标签的任何属性），留下所有其他标签和文本。完成这项工作的最佳正则表达式是什么？

编辑添加：哦，我很欣赏使用正则表达式来解决这个特定问题并不是最好的解决方案。但是，为了讨论，我们是否可以假设该特定技术决策比我的薪酬等级高出几个级别？;)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-22T17:58:39.587

尝试使用正则表达式解析 HTML 通常是一个*非常*糟糕的主意。改用解析器，应该有一个可用于您选择的语言。

你**也许**可以摆脱这样的事情：

```
</?tag[^>]*?> 
```

但这完全取决于你在做什么。例如，这不会删除标签的内容，并且可能会使您的 HTML 处于无效状态，具体取决于您要删除的标签。它还不能很好地处理无效的 HTML（并且有很多这样的问题）。

改用解析器:)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-22T18:09:47.627

我认为这里发生了一些严重的反正则表达式偏见。很多时候，当使用完整的解析器没有意义时，您可能希望从某些标记中去除特定标记。

当然，有时解析器可能是最好的选择，但如果您正在寻找正则表达式，那么：

```
<script[^>]*?>[\s\S]*?<\/script> 
```

这将删除脚本标签及其内容。确保使用不区分大小写的匹配。

如果您不想删除标签的内容，则可以使用：

```
<\/?script[^>]*?> 
```

javascript 中的一个使用示例是：

```
function stripScripts(markup) {
  return markup.replace(/<script[^>]*?>[\s\S]*?<\/script>/gi, '');
}

var safeText = stripScripts(textarea.value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T18:00:57.837

我想可能是 Raymond Chen (blogs.msdn.com/oldnewthing) 我在这里解释（糟糕！）...但是，你想要一个正则表达式？“现在你有两个问题” ... :=)

如果字符串是格式正确的 (X)HTML，您能否将其加载到解析器 (HTML/XML) 中并使用它来删除任何有问题的节点？如果它的格式不正确，那么它会变得有点棘手，但是，我怀疑 RegEx 不是解决这个问题的最佳方法......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T18:01:36.570

单个标签的出现方式太多了，更不用说编码、变体等。
我强烈建议你重新考虑这种方法……无论如何，你真的不应该直接处理 HTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T18:04:26.423

在我的脑海中，我会说这会让你朝着正确的方向开始。

```
s/<TAG[^>]*>([^<]*)</TAG[^>]*>/\1 
```

基本上找到开始标签，标签之间的任何文本，然后是结束标签。用标签之间的任何内容替换整个内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-04T01:53:46.173

更正答案：

```
</?TAG\b[^>]*?> 
```

因为 Dans 回答会删除`<br />`，但你只想要`<b>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-24T23:35:09.200

这是我为此目的编写的正则表达式，它适用于更多情况：

```
</?(?(?=b|img|a|script)notag|[a-zA-Z0-9]+)(?:\s[a-zA-Z0-9\-]+=?(?:(["",']?).*?\1?)?)*\s*/?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-18T15:17:09.863

虽然使用正则表达式解析 HTML 通常不受欢迎或被鄙视，但您几乎肯定不想编写自己的解析器。

但是，您可以使用一些内置或库函数来实现您所需要的。

*   JavaScript 有`getElementsByTagName`，`getElementById`更不用说[jQuery](http://jquery.com/)了。
*   PHP 具有[DOM](http://au2.php.net/manual/en/intro.dom.php)扩展。
*   Python有很棒的[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)
*   ...还有很多。

# java - 在 Java/JSP 代码中查找潜在的 SQL 注入问题

> ID：116415
> 
> 赞同：2
> 
> 时间：2008-09-22T17:58:35.547
> 
> 标签：java, jsp, security, sql-injection

我正在为一个拥有大量遗留代码库的客户工作，该代码库由各种基于 Java en JSP 的应用程序组成。

大多数查询是使用自制的“orm”系统完成的。一些应用程序使用普通的旧 JDBC。一些应用程序基于 Hibernate（是的，带有加号的 HQL 构建也是一个潜在问题）。一些较旧的应用程序完全用 JSP 编写。

我手动发现了几个 SQL 注入错误。但我真的可以使用某种工具来寻找潜在的弱点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T18:08:02.950

我会编写一些搜索或加载一个 IDE，以查找使用 java.sql.Statement 而不是 PreparedStatement。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T18:14:38.893

我会推荐[FindBugs](http://findbugs.sourceforge.net)（还有一个 eclipse 插件），它可以追踪这些问题等等。

我们在工作中使用它，它速度快而且物有所值（就像免费一样）。在它的帮助下，我们解决了一些常见问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T20:52:32.290

您的 URL 空间有多大？如果可能，最好尝试通过 HTTP GET 和 POST 请求进行 SQL 注入。通过源代码/字节代码检查可以发现一些问题，但确定您的应用程序将接受哪些类型的潜在恶意输入的唯一方法是使用 HTTP 请求。

[如果您的 URL 集很小， CAL9000](http://www.owasp.org/index.php/Category:OWASP_CAL9000_Project)是一个很好的 SQL 注入/跨站点脚本测试工具。

认真检测处理不当的恶意输入的公司将聘请第三方进行渗透测试。 [White Hat Security](http://www.whitehatsec.com/home/index.html)是我过去合作过的供应商，可以推荐。我们将它们用于 100 毫米以上的电子商务网站。（我与 White Hat 没有任何关系，如果您成为他们的客户，我不会以任何方式受益。）

[除了对代码的所有测试/强化之外，像mod_security](http://www.modsecurity.org/)这样的 HTTP 防火墙是一个非常好的主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T18:05:25.140

当我在做“this-will-never-need-localization”应用程序的本地化工作时，我们使用自制的工具来分析编译的代码（.NET 中的 IL，它与 Java 中的字节码相同）。

您可以找到调用与 DB（典型的 CRUD 操作）一起使用的指定方法，其中有一个带有 SQL 命令的字符串参数，并跟踪字符串实例并检查连接。

我们使用 .NET Reflector 来反编译和跟踪字符串。但我不知道，是否有类似的 Java 工具可用 :(。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T18:08:04.010

你可以去预防而不是治疗。在您的 UI 下方添加一个清理层，因此您最终不会在用户输入中使用 sql/scripts。java中一定有例子，我在CakePHP中见过这样的做法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T18:08:48.423

找到任何不使用`PreparedStatement`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-05T12:21:28.060

我推荐CAL9000。您可以从以下链接获取详细信息：

[CAL9000](https://www.owasp.org/index.php/Category:OWASP_CAL9000_Project)

# sql - 我的应用程序如何从临时表中受益？

> ID：116423
> 
> 赞同：15
> 
> 时间：2008-09-22T18:00:10.693
> 
> 标签：sql, mysql

我一直在阅读一些关于 MySQL 中临时表的内容，但是当谈到一般的数据库，特别是 MySQL 时，我是一个公认的新手。我已经查看了一些示例和有关如何创建临时表的 MySQL 文档，但我试图确定临时表如何使我的应用程序受益，其次我想我会遇到哪些问题。当然，每种情况都不同，但我想我正在寻找的是关于该主题的一些一般性建议。

我做了一点谷歌搜索，但没有找到我在该主题上寻找的确切内容。如果你有这方面的经验，我很想听听。

谢谢，马特

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-22T18:04:15.970

当您想要执行相当复杂的 SELECT 并对其执行一堆查询时，临时表通常很有价值......

您可以执行以下操作：

```
 CREATE TEMPORARY TABLE myTopCustomers
   SELECT customers.*,count(*) num from customers join purchases using(customerID)
   join items using(itemID) GROUP BY customers.ID HAVING num > 10; 
```

然后对 myTopCustomers 执行一堆查询，而不必在每个查询中对购买和项目进行连接。然后，当您的应用程序不再需要数据库句柄时，无需进行清理。

您几乎总是会看到用于派生表的临时表，这些表的创建成本很高。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-22T18:46:37.273

首先是免责声明——我的工作是报告，所以我得到的查询比任何普通开发人员都要复杂得多。如果您正在编写一个简单的 CRUD（创建读取更新删除）应用程序（这将是大多数 Web 应用程序），那么您真的不想编写复杂的查询，如果您需要创建临时表，您可能做错了。

也就是说，我在 Postgres 中出于多种目的使用临时表，并且大多数将转换为 MySQL。我使用它们将复杂的查询分解为一系列单独可以理解的部分。我使用它们是为了保持一致性——通过一系列查询生成复杂的报告，然后我可以将其中一些查询卸载到我在多个地方使用的模块中，我可以确保不同的报告彼此一致。（并确保如果我需要修复某些东西，我只需要修复一次。）而且，我很少故意使用它们来强制执行特定的查询计划。（除非你真的明白你在做什么，否则不要尝试这个！）

所以我认为临时表很棒。但话虽如此，了解数据库通常有两种风格对您来说*非常重要。*第一个针对抽取大量小交易进行了优化，另一个针对抽取少量复杂报告进行了优化。这两种类型需要进行不同的调整，并且在事务数据库上运行的复杂报表存在阻塞事务的风险（因此导致网页无法快速返回）。因此，您通常不希望避免将一个数据库用于两种目的。

我的猜测是您正在编写一个需要事务数据库的 Web 应用程序。在这种情况下，您不应该使用临时表。如果您确实需要从交易数据生成的复杂报告，推荐的最佳做法是定期（例如每天）备份，在另一台机器上恢复它们​​，然后针对该机器运行报告。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-22T18:04:48.030

使用临时表的最佳位置是当您需要从多个表中提取一堆数据，对这些数据进行一些处理，然后将所有内容组合到一个结果集时。

在 MS SQL 中，由于与游标相关的速度和资源影响，还应尽可能使用临时表代替游标。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-28T01:57:52.270

如果您是数据库新手，Joe Kelko 的一些好书回顾了 ANSI SQL 的最佳实践。 [SQL For Smarties](https://rads.stackoverflow.com/amzn/click/com/0123693799)将非常详细地描述临时表的使用、索引的影响、where 子句等。这是一本很好的参考书，内容很详细。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T18:03:13.087

我过去在需要创建评估数据时使用过它们。那是在 MySQL 中的视图和子选择之前，我现在通常使用那些我需要临时表的地方。我可能会使用它们的唯一时间是评估数据需要很长时间才能创建。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T18:09:21.513

我没有在 MySQL 中完成它们，但我已经在其他数据库（Oracle、SQL Server 等）上完成了它们。

在其他任务中，临时表为您提供了一种方法来创建专门构建的可查询（并且可以从存储过程中返回）数据集。假设您有几个数字表——您可以使用一个临时表将这些数字汇总到漂亮、干净的总计（或其他数学），然后将该临时表连接到您的架构中的其他表以获得最终输出。（在我的一个项目中，这方面的一个例子是计算给定的销售相关员工每周、每两周、每月等必须拨打多少预定电话。）

我还经常将它们用作“倾斜”数据的一种手段——将列转换为行等。它们有利于高级数据处理——但只在需要时使用它们。（我的黄金法则一如既往地适用：如果您不知道为什么要使用*x*，并且您不知道*x*是如何工作的，那么您可能不应该使用它。）

通常，我最终在需要复杂数据处理的存储过程中使用它们。我很想举一个具体的例子，但我的会是 T-SQL（而不是 MySQL 更标准的 SQL），而且它们都是我无法共享的客户端/生产代码。我相信这里的其他人会拿起并提供一些真正的示例代码；这只是为了帮助您了解域临时表解决的问题的要点。

# xsd - 您可以在 XML 模式中使用 key/keyref 代替限制/枚举吗？

> ID：116432
> 
> 赞同：0
> 
> 时间：2008-09-22T18:02:04.213
> 
> 标签：xsd

假设我们有一个样式表，它使用 key() 函数提取元数据。换句话说，我们有这样的实例文​​档：

```
<items>

<item type="some_type"/>

<item type="another_type"/>

</items> 
```

以及我们希望在处理过程中与项目关联的附加数据表：

```
<item-meta>

<item type="some_type" meta="foo"/>

<item type="another_type" meta="bar"/>

<item type="yet_another_type" meta="baz"/>

</item-meta> 
```

最后，假设我们要对实例文档进行模式验证，将类型属性限制为出现在 item-meta 中的类型集。所以在模式中我们想使用 key/keyref 而不是限制/枚举。这是因为使用限制/枚举将需要制作一个单独的有效类型属性列表。

但是，看起来 key/keyref 并不会真正起作用。尝试过（使用 MSXML 6.0）后，模式键的选择器似乎不会接受其 xpath 参数中的 document() 函数，因此我们无法检查项目元数据，无论它是否出现在外部文件中或在架构文件本身中。看起来我们唯一可以查找键的地方是实例文档。

所以如果我们真的不想有一个单独的有效类型列表，我们必须做一个预验证转换，拉入 item-meta 的东西，然后做验证，然后做我们原来的转换。对于应该相对直接地使用 XML 模式和样式表来说，这似乎过于复杂了。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T20:30:25.153

key/keyref 中的选择器只允许非常受限的 xpath 语法。简短但不完全准确：选择器必须指向声明元素的子节点。

受限语法的完整定义是[-> here](http://www.w3.org/TR/xmlschema-1/#coss-identity-constraint)。

所以，不，我没有看到更好的方法，抱歉。

顺便说一句：W3C 声明这个限制是为了让 XML Schema 处理器的实现者生活更轻松。请记住，XML Schema 的设计目标之一是使以流模式处理文档成为可能。这确实解释了 XML Schema 的很多有时看似随机的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T21:41:30.270

在考虑了更多之后，我想出了让样式表完成验证的那部分的想法。模式将项目类型定义为纯字符串，如果样式表无法在项目元表中查找项目类型，则样式表将发出一条消息并停止处理。

此解决方案修复了必须多次写下有效类型列表的原始问题，但它引入了验证逻辑现在与样式表逻辑混合的问题。我没有足够的 XSD+XSLT 经验来判断这个新问题是否不如旧问题严重，但它似乎比我之前写的关于将 item-meta 表拉入每个实例文档中的内容更优雅预验证变换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T21:54:01.877

您不需要因为一些错误而停止 XSLT。让它产生一些架构不会验证的东西，并且指向原来的问题，比如

```
 <error txt="Invalid-Item-Type 'invalid_type'"/> 
```

除此之外，请记住这里没有讨论线程。这些帖子可能会上下波动，因此最好相应地编辑您的问题。

请记住，这里的理念是“一个问题，最佳答案获胜”。

# netbeans - 如何更改 netbeans 设置目录 (~/.netbeans) 的位置

> ID：116444
> 
> 赞同：11
> 
> 时间：2008-09-22T18:03:20.280
> 
> 标签：netbeans

默认情况下，netbeans 将其设置存储在用户主目录下名为 .netbeans 的目录中。是否可以更改此目录的位置（尤其是在 Windows 下）？

感谢 James Schek，我现在知道了答案（更改 netbeans.conf 中的路径），但这让我想到了另一个问题：有没有办法将当前用户名包含在 netbeans 设置目录的路径中？

我想做这样的事情：

```
netbeans_default_userdir="D:\etc\${USERNAME}\.netbeans\6.5beta" 
```

但我不知道要使用的变量的名称（如果有的话）。当然，我可以使用 --userdir 选项实现相同的目的，我只是好奇。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-22T18:37:07.700

是的，编辑 %NETBEANS_HOME%\etc 下的 netbeans.conf 文件。

使用以下命令编辑该行： netbeans_default_userdir="${HOME}/.netbeans/6.0"

如果您需要不同的“配置文件”——即想要使用不同的主目录运行不同的 Netbeans 副本，您可以将一个新的主目录传递给启动器。运行“netbeans.exe --userdir /path/to/dir”或“nb.exe --userdir /path/to/dir”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T20:11:25.963

“HOME”是 IDE 支持的唯一变量。使用 Netbeans 平台部署自定义应用程序时，还支持开箱即用的“APPNAME”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-15T23:40:37.153

对于来到这里寻找答案的人：

如果您尝试在 Windows 中设置可移植版本，如果 userdir 处于同一级别或低于 Netbeans 根目录，则 Netbeans 7.2 及更高版本将无法启动。

所以如果你有： `c:\Portable\Netbeans`你不能做`netbeans_default_userdir="c:\Portable\Netbeans\userdir\8.0"`

在 netbeans 安装之外使用文件夹，例如 `netbeans_default_userdir="c:\Portable\NetbeansUserDir\8.0"`

对于缓存没关系。

在 Windows 8.1 和 7 中测试。

# winforms - 适用于 Mac、Linux 和 PC (Redux) 的 Mono 的 Winforms

> ID：116468
> 
> 赞同：3
> 
> 时间：2008-09-22T18:06:51.487
> 
> 标签：winforms, mono, cross-platform, gtk#

[（我用另一种方式](https://stackoverflow.com/questions/72580/making-a-cwinform-application-cross-platform-should-i-use-air-mono-or-something)问了这个问题，得到了一些有趣的回答，但我不太相信。）

Mono 的 GtkSharp 真的是跨平台的吗？它似乎是基于 Gnome 的......它如何与 PC 和 Mac 一起使用？

有人可以给我一个使用 Microsoft .Net 中的单个代码库编写的工作 Mac/PC/Linux 应用程序的示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-03-28T04:37:21.983

意识到这是一个老问题，但 Banshee 符合作为使用 GTK# 的跨平台应用程序的要求。它可以在 Max、Linux 和 Windows 上运行。 [http://banshee.fm/download/](http://banshee.fm/download/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T18:58:22.643

在 Windows 和 Linux 上运行的 Gtk# 应用程序的最佳示例可能是 Medsphere 的 OpenVista。诚然，它不是很多人需要运行的应用程序，但它是一个非常专业、精致、开源的 Gtk# 应用程序。它展示了如何编写专业的 Gtk# 应用程序。

[http://medsphere.org/community/project/openvista-cis](http://medsphere.org/community/project/openvista-cis)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-24T07:47:10.743

[Plastic SCM](http://www.plasticscm.com/xpproducts/xpcore/xpmultiplatform.aspx)在 Windows、Linux、Solaris 和 Mac OS X 上受支持。该链接包括 Windows 和 Linux 上的屏幕截图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T18:09:07.723

Gtk# 是跨平台的。然而，它看起来不错的唯一平台是运行 GNOME 的 Linux/BSD。如果可能的话，分离前端和后端，并为 Linux、Windows 和 OS X 开发单独的用户界面。即使是在所有三个平台上看起来都很好的 wx，也有其局限性。

在 Gtk# 中工作的 Mac/PC/Linux 应用程序？我认为假小子在所有三个上运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T18:13:33.920

说 GNOME 是基于 GTK 比说 GTK 是基于 GNOME 更正确。GTK 是 GNOME 所基于的工具包，您可以获得适用于多个平台的 GTK，包括 Windows。这就是 GIMP 在 Windows 上的工作方式：首先安装 GTK。

# c++ - 在 C++ 中清理一串标点符号

> ID：116469
> 
> 赞同：9
> 
> 时间：2008-09-22T18:07:03.327
> 
> 标签：c++

好的，所以在我问我的问题之前，我想澄清一件事。我目前是 NIU 计算机科学专业的学生，​​这确实与我在那里的一个班级作业有关。因此，如果有人有问题，请不要继续阅读，继续您的业务。

现在对于任何愿意帮助的人来说都是这种情况。对于我目前的任务，我们必须读取一个只是文本块的文件。对于文件中的每个单词，我们要清除单词中的任何标点符号（例如：“can't”最终会变成“can”，而“that--to”显然会变成“that”而没有引号，引号仅用于指定示例的内容）。

我遇到的问题是我可以很好地清理字符串，然后将其插入我们正在使用的地图中，但由于某种原因，我编写的代码允许将空字符串插入地图中。现在我已经尝试了我能想出的一切来阻止这种情况的发生，我唯一想出的就是在地图结构本身中使用擦除方法。

所以我要找的是两件事，关于我如何能够解决这个问题的任何建议，而不只是简单地删除它，以及 b) 我可以对我已经编写的代码进行的任何改进。

这是我编写的从文件中读取的函数，然后是清理它的函数。

注意：从文件中读取的函数调用 clean_entry 函数以在将任何内容插入地图之前去除标点符号。

编辑：谢谢克里斯。数字是允许的:)。如果有人对我编写的代码有任何改进或对我所做的事情有任何批评，我会倾听。在学校里，我们真的没有得到关于正确、正确或最有效的做事方式的反馈。

```
int get_words(map<string, int>& mapz)
{
 int cnt = 0;               //set out counter to zero

 map<string, int>::const_iterator mapzIter;

 ifstream input;            //declare instream
 input.open( "prog2.d" ); //open instream
 assert( input );           //assure it is open

 string s;                  //temp strings to read into
 string not_s;

 input >> s;

 while(!input.eof())        //read in until EOF
  {
   not_s = "";
   clean_entry(s, not_s);

   if((int)not_s.length() == 0)
    {
     input >> s;
     clean_entry(s, not_s);
    }    

   mapz[not_s]++;              //increment occurence
   input >>s;
  }
 input.close();     //close instream 

 for(mapzIter = mapz.begin(); mapzIter != mapz.end(); mapzIter++)
  cnt = cnt + mapzIter->second;

 return cnt;        //return number of words in instream
}

void clean_entry(const string& non_clean, string& clean)
{
 int i, j, begin, end;

 for(i = 0; isalnum(non_clean[i]) == 0 && non_clean[i] != '\0'; i++);

 begin = i;

 if(begin ==(int)non_clean.length())
   return;

 for(j = begin; isalnum(non_clean[j]) != 0 && non_clean[j] != '\0'; j++);

 end = j;

 clean = non_clean.substr(begin, (end-begin));

 for(i = 0; i < (int)clean.size(); i++)
  clean[i] = tolower(clean[i]);

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-22T18:12:41.707

空条目的问题在于您的 while 循环。如果你得到一个空字符串，你清理下一个，并添加它而不检查。尝试改变：

```
not_s = "";
clean_entry(s, not_s);

if((int)not_s.length() == 0)
 {
  input >> s;
  clean_entry(s, not_s);
 }    

mapz[not_s]++;              //increment occurence
input >>s; 
```

到

```
not_s = "";
clean_entry(s, not_s);

if((int)not_s.length() > 0)
{
    mapz[not_s]++;              //increment occurence
}    

input >>s; 
```

编辑：我注意到您正在检查字符是否为字母数字。如果不允许数字，您可能还需要重新访问该区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T18:27:55.460

进一步的改进将是

*   仅在使用它们时声明变量，并且在最内部的范围内
*   使用 c++ 风格的强制转换而不是 c 风格的 (int) 强制转换
*   使用 empty() 而不是 length() == 0 比较
*   对迭代器使用前缀增量运算符（即`++mapzIter`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T18:17:59.293

空白字符串是字符串类的有效实例，因此将其添加到地图中没有什么特别之处。您可以做的是首先检查它是否为空，并且仅在这种情况下增加：

```
if (!not_s.empty())
    mapz[not_s]++; 
```

风格方面，我会改变一些东西，一个是从 clean_entry 返回 clean 而不是修改它：

```
string not_s = clean_entry(s);
...
string clean_entry(const string &non_clean)
{
    string clean;
    ... // as before 
    if(begin ==(int)non_clean.length())
        return clean;
    ... // as before
    return clean;
 } 
```

这使得函数在做什么（获取一个字符串，并根据该字符串返回一些内容）更清楚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T19:08:37.063

函数“getWords”正在执行许多不同的操作，这些操作可以拆分为其他函数。很有可能通过将其拆分为各个部分，您自己会发现错误。

从基本结构来看，我认为您可以将代码拆分为（至少）：

*   getNextWord：从流中返回下一个（非空白）单词（如果没有剩余则返回 false）
*   clean_entry：你现在拥有的
*   getNextCleanWord：调用 getNextWord，如果为“真”，则调用 CleanWord。如果没有单词，则返回“false”。

'getNextWord' 和 'getNextCleanWord' 的签名可能类似于：

```
bool getNextWord (std::ifstream & input, std::string & str);
bool getNextCleanWord (std::ifstream & input, std::string & str); 
```

这个想法是每个函数都在解决问题中更小、更独特的部分。例如，'getNextWord' 只获取下一个非空白单词（如果有的话）。因此，如果需要，这个较小的部分将成为问题中更容易解决和调试的部分。

'getWords' 的主要组成部分可以简化为：

```
std::string nextCleanWord;
while (getNextCleanWord (input, nextCleanWord))
{
  ++map[nextCleanWord];
} 
```

恕我直言，发展的一个重要方面是尝试分而治之。将其分解为需要执行的各个任务。这些子任务将更容易完成，也应该更容易维护。

# .net - 我应该从 Web 服务返回强类型数据集吗？

> ID：116471
> 
> 赞同：7
> 
> 时间：2008-09-22T18:07:40.160
> 
> 标签：.net, data-binding, dataset

我应该从 Web 服务公开强类型数据集并将其直接绑定到客户端吗？还是有更明智的 asmx Web 服务方式？我正在执行 CRUD 操作（创建、读取、更新、删除）。

我发现使用数据集令人沮丧并且难以使用，例如当插入到其中的表中时。当仅插入一条记录或仅从数据集中的特定表中获取一条记录时，来回传送整个数据集似乎不合逻辑。

有没有更好的办法？

我是否应该转换为对象并通过 Web 服务使用对象？到处进行转换以传递对象可能同样乏味？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T18:10:53.990

这取决于您的互操作性要求。尽管从几乎任何环境中处理 DataSet XML 都是完全可能的，但它会变得笨拙。如果您不进行互操作，我肯定会推荐类型化的数据集路由，因为它在 C# 中使用起来非常简单并且“可以正常工作”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T18:17:13.443

我会说选择对象，DataSet 可能会有点混乱。对象可以看起来更干净，当然也可以调试。

使用抽象类型时要小心，因为如果您有基于抽象类/接口的集合，那么序列化它们可能会有点痛苦。过去我遇到过这个问题，但是，我[找到了解决方案](https://stackoverflow.com/questions/20084/xml-serialization-and-inherited-types-closed)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T18:15:12.123

请注意，[数据集](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)特定于 .NET。如果您想让您的 API 可互操作，您应该坚持使用基本数据类型和构造（否则，对于非 .NET 开发人员来说，这种情况可能会很麻烦）。

然后，Web 服务的设计目的不是在一次行程中传递大型对象。如果您的数据集包含超过几百 KB，您可能最终会遇到客户端或服务器端 HTTP 超时（考虑默认设置）。

对于 CRUD 操作，我只是建议直接通过 WS 公开每个操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T18:20:37.617

我在 DataSets 方面取得了巨大的成功（服务器使用并返回一个强类型数据集，而客户端将其作为标准数据集使用）。就像 Tomer 警告的那样，我的好处是没有互操作性问题。

关于更新，发送整个数据集是个坏主意。DataSet 和 DataTable 对象都有一个名为 GetChanges() 的方法，它将返回自调用 AcceptChanges() 以来的所有编辑。这应该可以帮助您降低网络流量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-13T09:42:47.290

与此主题相关的一些链接

scott hanselman -[从 Web 服务返回数据集是撒旦的产物，代表了世界上真正邪恶的一切](http://www.hanselman.com/blog/ReturningDataSetsFromWebServicesIsTheSpawnOfSatanAndRepresentsAllThatIsTrulyEvilInTheWorld.aspx)

rockford lhotka -[关于通过 Web 服务传递 DataSet 对象的思考](http://www.lhotka.net/weblog/ThoughtsOnPassingDataSetObjectsViaWebServices.aspx)

4guysfromrolla -[更多关于为什么我不在我的 ASP.NET 应用程序中使用数据集](http://aspnet.4guysfromrolla.com/articles/051805-1.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T18:16:26.037

我同意 Joannes 的观点……坚持使用对象和特定方法来处理您想要公开的操作类型。

# c++ - 查看固定长度数组之间有多少字节相等的最快方法

> ID：116485
> 
> 赞同：13
> 
> 时间：2008-09-22T18:09:23.010
> 
> 标签：c++, arrays, optimization

我有 2 个包含 16 个元素（字符）的数组，我需要“比较”并查看两者之间有多少元素相等。

这个例程将被使用数百万次（通常运行大约 60 或 7000 万次），所以我需要它尽可能快。我正在研究 C++（C++Builder 2007，记录在案）

现在，我有一个简单的：

```
matches += array1[0] == array2[0]; 
```

重复 16 次（分析它似乎比使用 for 循环快 30%）

有没有其他方法可以更快地工作？

关于环境和数据本身的一些数据：

*   我正在使用 C++Builder，它没有考虑任何速度优化。我最终会尝试使用另一个编译器，但现在我被这个编译器困住了。
*   大多数时候数据会有所不同。100% 相等的数据通常非常罕见（可能少于 1%）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-22T18:30:55.593

更新：此答案已被修改，以使我的评论与下面提供的源代码相匹配。

如果您能够使用 SSE2 和 popcnt 指令，则可以进行优化。

16 个字节恰好适合 SSE 寄存器。使用 c++ 和汇编/内在函数，将两个 16 字节数组加载到 xmm 寄存器中，然后对它们进行 cmp。这会生成一个位掩码，表示比较的真/假条件。然后，您使用 movmsk 指令将位掩码的位表示加载到 x86 寄存器中；然后这成为一个位字段，您可以在其中计算所有 1 以确定您有多少真实值。硬件 popcnt 指令可以是一种快速计算寄存器中所有 1 的方法。

这需要了解汇编/内在知识，尤其是 SSE。您应该能够找到两者的网络资源。

如果您在不支持 SSE2 或 popcnt 的机器上运行此代码，则必须遍历数组并使用展开循环方法计算差异。

祝你好运

编辑：由于您表示您不知道汇编，这里有一些示例代码来说明我的答案：

```
#include "stdafx.h"
#include <iostream>
#include "intrin.h"

inline unsigned cmpArray16( char (&arr1)[16], char (&arr2)[16] )
{
    __m128i first = _mm_loadu_si128( reinterpret_cast<__m128i*>( &arr1 ) );
    __m128i second = _mm_loadu_si128( reinterpret_cast<__m128i*>( &arr2 ) );

    return _mm_movemask_epi8( _mm_cmpeq_epi8( first, second ) );
}

int _tmain( int argc, _TCHAR* argv[] )
{
    unsigned count = 0;
    char    arr1[16] = { 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0 };
    char    arr2[16] = { 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0 };

    count = __popcnt( cmpArray16( arr1, arr2 ) );

    std::cout << "The number of equivalent bytes = " << count << std::endl;

    return 0;
} 
```

一些注意事项：此函数使用 SSE2 指令和在 Phenom 处理器（我使用的机器）中引入的 popcnt 指令。我相信最新的带有 SSE4 的英特尔处理器也有 popcnt。此函数不检查 CPUID 的指令支持；如果在没有 SSE2 或 popcnt 的处理器上使用该函数是未定义的（您可能会得到一个无效的操作码指令）。该检测代码是一个单独的线程。

我没有对这段代码计时；我认为它更快的原因是因为它一次比较 16 个字节，无分支。你应该修改它以适应你的环境，并自己计时，看看它是否适合你。我在 VS2008 SP1 上编写并测试了这个。

SSE 更喜欢在自然 16 字节边界上对齐的数据；如果你能保证那么你应该得到额外的速度改进，你可以将_mm_loadu_si128指令更改为_mm_load_si128，这需要对齐。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-22T18:23:05.893

关键是使用 CPU 支持的最大寄存器进行比较，然后在必要时回退到字节。

下面的代码演示了使用 4 字节整数，但如果您在 SIMD 架构（任何现代 Intel 或 AMD 芯片）上运行，您可以在回退到基于整数的循环之前在一条指令中比较两个数组。如今，大多数编译器都对 128 位类型具有内在支持，因此不需要 ASM。

（请注意，对于 SIMD 比较，您的数组必须是 16 字节对齐的，并且某些处理器（例如 MIPS）会要求数组是 4 字节对齐以进行基于 int 的比较。

例如

```
int* array1 = (int*)byteArray[0];
int* array2 = (int*)byteArray[1];

int same = 0;

for (int i = 0; i < 4; i++)
{
  // test as an int
  if (array1[i] == array2[i])
  {
    same += 4;
  }
  else
  {
    // test individual bytes
    char* bytes1 = (char*)(array1+i);
    char* bytes2 = (char*)(array2+i);

    for (int j = 0; j < 4; j++)
    {
      same += (bytes1[j] == bytes2[j];
    }
  }
} 
```

我不记得 MSVC 编译器究竟支持什么 SIMD，但你可以做类似的事情；

```
// depending on compiler you may have to insert the words via an intrinsic
__m128 qw1 = *(__m128*)byteArray[0];
__m128 qw2 = *(__m128*)byteArray[1];

// again, depending on the compiler the comparision may have to be done via an intrinsic
if (qw1 == qw2)
{
    same = 16;
}
else
{
    // do int/byte testing
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T18:12:43.703

如果您有能力控制数组的位置，例如在内存中一个接一个地放置，它可能会导致它们在第一次访问时被加载到 CPU 的缓存中。

它取决于 CPU 及其缓存结构，并且会因一台机器而异。

[您可以在Henessy & Patterson 的计算机体系结构：定量方法](https://rads.stackoverflow.com/amzn/click/com/0123704901)中阅读有关内存层次结构和缓存的信息

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T18:15:20.500

如果您需要绝对最小的占用空间，我会使用汇编代码。我已经有一段时间没有这样做了，但我敢打赌 MMX（或者更可能是 SSE2/3）的指令可以让你在很少的指令中做到这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T18:18:17.467

如果匹配是常见情况，则尝试将值加载为 32 位整数而不是 16，这样您就可以一次比较 2（并将其计为 2 个匹配）。

如果两个 32 位值**不**相同，那么您将不得不分别测试它们（并得出顶部和底部 16 位值）。

代码会更复杂，但应该更快。

如果你的目标是 64 位系统，你可以用 64 位整数做同样的技巧，如果你真的想突破极限，那么看看进入汇编程序并使用各种基于向量的指令，这可以让你使用 128 位立刻。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T18:15:15.663

神奇的编译器选项会在时间上有很大的不同。特别是让它生成 SSE 矢量化可能会给你带来巨大的加速。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T18:32:05.513

这是否必须与平台无关，或者此代码是否总是在相同类型的 CPU 上运行？如果您将自己限制在现代 x86 CPU 上，您可以使用[MMX](http://en.wikipedia.org/wiki/MMX_(instruction_set))指令，它应该允许您在一个时钟周期内对 8 个字节的数组进行操作。AFAIK，gcc 允许您在 C 代码中嵌入汇编，并且英特尔的编译器 (icc) 支持内部函数，这些内部函数是允许您直接调用特定汇编指令的包装器。其他 SIMD 指令集，例如 SSE，也可能对此有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-22T19:09:17.983

数组中的值之间是否有任何联系？某些字节是否比其他字节更可能相同？价值观中可能存在某种内在顺序吗？然后您可以针对最可能的情况进行优化。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-23T01:00:05.597

如果您解释数据实际代表什么，那么可能有一种完全不同的方式来表示内存中的数据，这将使这种类型的蛮力比较变得不必要。想详细说明数据实际代表什么？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T18:12:05.563

它作为一个语句更快吗？

```
matches += (array1[0] == array2[0]) + (array1[1] == array2[1]) + ...; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-22T18:14:58.987

如果写这 16 倍比一个简单的循环快，那么你的编译器要么很糟糕，要么你没有打开优化。

简短的回答：没有更快的方法，除非您在并行硬件上进行矢量运算。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-22T18:19:19.617

尝试使用指针而不是数组：

```
p1 = &array1[0];
p2 = &array2[0];
match += (*p1++ == *p2++);
// copy 15 times. 
```

当然，您必须根据其他方法来衡量这一点，看看哪种方法最快。

你确定这个程序是你处理过程中的瓶颈吗？您是否真的通过优化来提高整个应用程序的性能？同样，只有测量才能说明问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-22T18:25:12.050

有什么方法可以修改数组的存储方式吗？考虑到您可能使用的是 32 位编译器，一次比较 1 个字节非常慢。相反，如果您将 16 个字节存储在 4 个整数（32 位）或 2 个长整数（64 位）中，则只需分别执行 4 或 2 次比较。

要问自己的问题是将数据存储为 4 整数或 2 长数组的成本是多少。您需要多久访问一次数据等。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-22T18:26:40.877

总是有很好的旧 x86 REPNE CMPS 指令。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-22T21:34:23.297

一个额外的可能优化：如果您期望大多数时间数组是相同的，那么在第一步执行 memcmp() 可能会稍微快一些，如果测试返回 true，则将“16”设置为答案。当然，如果您不希望数组经常相同，那只会减慢速度。

# .net - 使用 iBATIS 映射到字典

> ID：116486
> 
> 赞同：0
> 
> 时间：2008-09-22T18:09:42.947
> 
> 标签：.net, ibatis, datamapper

给定一个简单的语句，例如：

```
<statement id="SelectProducts" resultMap="???">
  SELECT * FROM Products
</statement> 
```

是否可以获得键是列名的字典对象列表？IE。

```
var list = Mapper.QueryForList<IDictionary<string,string>>("SelectProducts", null);

IDictionary<string, string> dict = list[0];
// dict["id"] == "1"
// dict["name"] == "Some Product Name"
// dict["price"] == "$9.99"
// etc. 
```

我想概括查询的结果以处理任意数量的列/列名，而不映射到某个类的特定属性。

我意识到这里的示例会失败，因为结果集可能有重复（或空）的列名。我考虑过一个包含键值对索引列表的结果类。这里的关键是将列信息保留在某处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T18:23:35.427

您可以通过在 resultMap 配置中将 class 属性设置为 HashTable 来做到这一点。[此处](http://ibatis.apache.org/docs/dotnet/datamapper/ch03s05.html#id383376)提供更多详细信息。

# python - python正则表达式分割段落

> ID：116494
> 
> 赞同：5
> 
> 时间：2008-09-22T18:10:41.370
> 
> 标签：python, regex, parsing, text, split

如何编写一个正则表达式在 python 中使用来分割段落？

一个段落由 2 个换行符 (\n) 定义。但是可以有任意数量的空格/制表符以及换行符，它仍然应该被视为一个段落。

我正在使用 python，因此该解决方案可以使用扩展的 python[正则表达式语法。](https://docs.python.org/2/library/re.html)（可以利用`(?P...)`东西）

# 例子：

```
the_str = 'paragraph1\n\nparagraph2'
# splitting should yield ['paragraph1', 'paragraph2']

the_str = 'p1\n\t\np2\t\n\tstill p2\t   \n     \n\tp3'
# should yield ['p1', 'p2\t\n\tstill p2', 'p3']

the_str = 'p1\n\n\n\tp2'
# should yield ['p1', '\n\tp2'] 
```

我能提供的最好的方法是：`r'[ \t\r\f\v]*\n[ \t\r\f\v]*\n[ \t\r\f\v]*'`，即

```
import re
paragraphs = re.split(r'[ \t\r\f\v]*\n[ \t\r\f\v]*\n[ \t\r\f\v]*', the_str) 
```

但这很丑陋。有更好的吗？

**编辑**：

# 拒绝的建议：

`r'\s*?\n\s*?\n\s*?'`-> 这将使示例 2 和 3 失败，因为`\s`包含`\n`，因此它将允许超过 2`\n`秒的段落中断。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T18:28:47.923

不幸的是，没有写“空格但不是换行符”的好方法。

我认为你能做的最好的事情就是用`x`修饰符添加一些空间，并尝试将丑陋因素排除在外，但这是值得怀疑的：`(?x) (?: [ \t\r\f\v]*? \n ){2} [ \t\r\f\v]*?`

您也可以尝试仅为字符类创建一个子规则并对其进行 3 次插值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T18:28:28.067

您是否试图在普通测试中推断出文档的结构？你在做[docutils](http://docutils.sourceforge.net/)做的事情吗？

您也许可以简单地使用[Docutils 解析器](http://docutils.sourceforge.net/docs/dev/hacking.html#parsing-the-document)，而不是自己动手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-23T20:54:44.837

不是正则表达式，但非常优雅：

```
from itertools import groupby

def paragraph(lines) :
    for group_separator, line_iteration in groupby(lines.splitlines(True), key = str.isspace) :
        if not group_separator :
            yield ''.join(line_iteration)

for p in paragraph('p1\n\t\np2\t\n\tstill p2\t   \n     \n\tp'): 
    print repr(p)

'p1\n'
'p2\t\n\tstill p2\t   \n'
'\tp3' 
```

当然，您可以根据需要剥离输出。

灵感来自著名的“Python Cookbook”；-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T18:18:09.633

几乎相同，但使用非贪婪量词并利用空白序列。

```
\s*?\n\s*?\n\s*? 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-16T19:33:42.847

FYI: I just wrote 2 solutions for this type of problem in another thread. First using regular expressions as requested here, and second using a state machine approach which streams through the input one line at a time:

[https://stackoverflow.com/a/64863601/5201675](https://stackoverflow.com/a/64863601/5201675)

# emacs - 如何从 Emacs 编译缓冲区快速获取状态？

> ID：116506
> 
> 赞同：15
> 
> 时间：2008-09-22T18:12:08.777
> 
> 标签：emacs

默认情况下，emacs 22.1.1 仅在您第一次发出 compile 命令时显示编译缓冲区的顶部。当我使用编译命令以保存击键时，我希望它自动滚动到底部。这样，我只需查看编译缓冲区并查看当前正在编译哪些文件，就可以轻松获得当前编译的状态，而不必切换窗口并滚动到缓冲区的底部。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2010-01-07T13:55:11.750

我认为最好的选择是停止第一个错误

```
(setq compilation-scroll-output 'first-error) 
```

使用这种配置，Emacs 会滚动编译模式，直到出现第一个错误。这允许您在编译完成之前使用`next-error`和。`previous-error`

如果没有任何错误，它会滚动到最后，因此您可以很容易地看到编译成功。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-22T18:13:17.057

从信息> emacs > 编译：

> 如果您将变量设置`compilation-scroll-output`为非`nil` 值，则编译缓冲区始终滚动以跟随输出进入。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-23T17:41:26.843

```
(setq 编译-滚动-输出 t)

```

或者

```
Mx 设置变量编译滚动输出 t RET

```

此外，如果您习惯于在编译完成之前使用`next-error`，`previous-error`您将开始了解为什么需要使用默认行为。

# oracle - 使用 DBMS_METADATA.GET_DDL 需要哪些 Oracle 权限？

> ID：116522
> 
> 赞同：6
> 
> 时间：2008-09-22T18:14:42.670
> 
> 标签：oracle, metadata, privilege

（请原谅我的无知 - 我不是经验丰富的 Oracle 用户。）

我正在尝试使用 DBMS_METADATA.GET_DDL 函数（与 ALL_OBJECTS 或类似函数结合使用）来获取特定模式中所有表的 DDL。当我这样做时（对于所有对象或单个特定对象），我得到一个 ORA-31603 错误（在模式“SCHEMA”中找不到类型为 TABLE 的对象“FOO”）。

我假设这意味着我登录的用户没有任何必要的权限来读取 GET_DDL 所需的元数据。这需要什么特权？登录时有没有办法确认当前用户有/没有这个权限？

谢谢！李

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-22T18:23:58.403

阅读此文档，但基本上，您需要 SELECT_CATALOG_ROLE

[http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_metada.htm#i1016867](http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_metada.htm#i1016867)

# c# - 字符串与字符串

> ID：116523
> 
> 赞同：37
> 
> 时间：2008-09-22T18:14:54.027
> 
> 标签：c#, .net, string, declaration

在 C# 中有`String`对象和`string`对象。

两者有什么区别？关于使用的最佳实践是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-09-22T18:15:55.757

没有区别。string（小写）只是 System.String 的别名。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-22T18:17:25.423

没有不同。`System.String`与 严格相同`string`。通用 C# 编码准则表明您应该使用关键字`string`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-22T18:16:59.777

它们是别名并且可以互换。但是，在风格上，对于声明，我使用小写的字符串，对于静态方法，我使用 String。

```
string foo = "bar";

if( foo != String.Empty )
{
   Console.WriteLine(String.Format("foo.Length = {0}", foo.Length));
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-22T18:17:39.183

一种是 System.String 的 .Net 类型，另一种是特定于 C# 的，它原来是 System.String 的别名。

[http://msdn.microsoft.com/en-us/library/362314fe(VS.71).aspx](http://msdn.microsoft.com/en-us/library/362314fe(VS.71).aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-22T18:16:06.003

没有区别。string 是编译器转换为 System.String 的别名。

事实上，它甚至在 MSIL 中有别名：

```
.method private hidebysig static void  Main(string[] args) cil managed 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T18:16:10.560

它们之间没有区别。string 只是 System.String 的别名。编译时，它们都被编译为 System.String 对象。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-22T18:16:19.093

小写版本只是实际类 String 的别名。就 IL 生成而言，没有真正的区别。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-22T18:17:46.953

没有区别。string 是一个 C# 语言关键字，它引用 System.String 类，就像 int 是一个引用 System.Int32 的关键字一样。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-22T19:09:39.840

将来，尝试编译一个同时使用两者的应用程序，然后使用 Reflector（将语言更改为 IL）查看编译后的输出。你会发现没有区别。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-22T18:17:15.317

没有区别，因为 string 被编译器转换为 System.String 。与所有常见类型相同（int 转到 System.Int32 等）。我们使用简单的名称，以便它们脱颖而出。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-22T20:39:35.550

考虑到“int”在某些语言中因 16 位/32 位系统而异，“字符串”将来可能会演变为与 System.String 不同。

但就目前而言。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-22T20:48:07.277

请注意：字符串/字符串不是唯一的几个别名：例如。Integer,Int32, int 都是别名。

@mliesen：它不会在 C# 中发生，它不像 C。这是因为从 C# 你不会创建可执行文件，而是创建每个编译的代码，如 java。

# oracle - 如何将 NULL 输入参数限制为 oracle 存储过程

> ID：116525
> 
> 赞同：10
> 
> 时间：2008-09-22T18:15:00.517
> 
> 标签：oracle, stored-procedures

我已经编写了一些 Oracle 存储过程，其中有超过 20 个输入参数，其中需要超过 10 个参数，我希望所有参数都有一些值并且不想为此接受空值，有什么我可以在可以限制 null 输入参数的过程定义本身，或者我是否必须检查每个值并在所需值为 null 时引发异常？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-08-22T12:29:57.293

我知道这是一个老问题，但还有另一种选择（[在此处](http://chrishritzuk.blogspot.co.uk/2012/03/not-null-parameters.html)描述）：

```
SUBTYPE varchar2_not_null IS VARCHAR2 NOT NULL; 
```

您可以在与存储过程相同的包中定义这种类型（和`number_not_null`等），如果您想在很多地方使用它们，也可以在它们自己的包中定义。然后，您可以声明这些类型的参数。

如果`NULL`作为参数传递，您将收到一条非常有用的错误消息：

```
cannot pass NULL to a NOT NULL constrained formal parameter 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-22T18:27:16.727

在 PL/SQL 中，我不知道如何检查每一个。

如果您从外部库调用存储过程，则该库可能具有该功能。这可能不太可能，因为经常需要 NULL 输入参数。

您可以创建一个辅助 PL/SQL 过程，如果给定一个值，如果它为 null 将引发异常以节省冗余代码。然后，您可以编写一大块 perl/python/groovy 来吞噬您的过程声明并将这些调用发出到您的空检查过程。

# ruby - 有没有办法从正在运行的 ruby 进程中转储内存中的对象？

> ID：116527
> 
> 赞同：3
> 
> 时间：2008-09-22T18:15:09.703
> 
> 标签：ruby, heap-memory

在获取此信息的同时终止进程会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T18:25:41.770

一种快速而肮脏的方式是`ObjectSpace.each_object{|e| p e}`. 你可以做一些测试来确定你想保留什么，或者编组这些对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T20:50:35.347

对于 1.9.2/1.9.3 有 heap_dump gem，可以使用 gdb 将它注入到正在运行的进程中（但更稳定的是将它包含在进程本身中，没有性能开销）

它转储对对象的引用，而不是对象本身，但是如果您要解决泄漏问题，这很有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-23T04:01:03.290

对于更硬核的人，还有[BleakHouse](http://blog.evanweaver.com/files/doc/fauna/bleak_house/files/README.html)，它为您提供了一个特殊的自定义编译的 ruby​​ 副本，具有更好的内存泄漏跟踪 powarz

# html - 哪种浏览器最适合测试 Web 标准？

> ID：116533
> 
> 赞同：6
> 
> 时间：2008-09-22T18:15:54.087
> 
> 标签：html, css, xhtml, web-standards, browser

当我建立一个网站时，我希望至少有一个浏览器可以在没有任何黑客或变通方法的情况下展示它，但仍然保留最大的功能。知道没有一个浏览器具有完美的标准遵守，哪一个最接近？

此外，是否有任何单一浏览器似乎擅长的标准领域？例如，Opera 似乎一心要遵守所有与语音相关的 CSS 标准。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-22T18:18:09.073

我认识的大多数人的工作方式是运行 Firefox（使用 Firebug）并在其中进行开发。Firebug 是一个非常有用的调试工具。他们通常会采取什么到达那里，并尝试将其插入 IE 和其他浏览器。不完全是您问题的答案（它不是 100% 合规，但很接近），但希望它有所帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-22T18:23:26.017

[Safari](http://www.apple.com/safari/)使用最新的[WebKit](http://webkit.org/) nightly build。

并不是说世界上任何浏览器都在使用它（甚至不是 Chrome），但如果您担心的只是标准，那么这是您最好的选择 - 它通过了[Acid3](http://acid3.acidtests.org/)，这是市场上没有浏览器可以做到的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-22T18:48:38.283

这是一个很好的问题，但我发现很难给出一个单一的答案。传统上，Opera 一直是最符合标准的。长期以来，它实际上是唯一通过 ACID2 测试的浏览器。FireFox 和 IE 无法声明这一点（尽管据说 IE8 应该解决这个问题，而 FF 一直在努力解决这个问题）。

话虽如此，但请记住，IE 目前在所有浏览器中拥有最大的“市场份额”（企业与 MS 有联系，Windows 总是附带开箱即用的 IE），紧随其后的是 FireFox。因此，如果您的目标是在大多数人将使用的浏览器中展示您的应用程序，那么它必须是其中之一。

纯粹主义者会告诉你 FF 比 IE7 更符合标准（他们是对的），所以你应该为此设计而不是 IE。作为一名设计师/开发人员，我可以从多年的经验中看出，采用这种方法的页面可能不是一个好主意。再次记住 - IE 拥有市场份额，而且通常是重要的。因此，如果它在 FF 中看起来很棒，但在 IE 中出现故障，大多数用户会非常沮丧，反之亦然。

最佳折衷方案 - 专注于这两个。至少在 FF 和 IE 中对其进行调整以使其看起来正确，现在您已经覆盖了 90% 以上的将使用您的网站的人。

不要误会我的意思——我并不是要拒绝 Opera、Safari 或任何其他浏览器的用户。但是，如果您希望以最少的工作量获得最多的结果，那么就可以了。

最佳答案-慢慢来，做对，测试所有主要浏览器。提前解决这些令人头疼的浏览器问题（当您可以按照自己的步调完成时）将获得丰厚的回报。将其与想知道为什么您的页面在他最喜欢的浏览器中中断并希望今天修复它的尖叫客户进行比较。:)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-22T18:41:18.813

“当我建立一个网站时，我希望至少有一个浏览器可以在没有任何黑客或变通方法的情况下展示它，同时仍然保留最大的功能。”

如果您正在测试您的网站，您最好根据用户的需求选择目标浏览器。

除非您处于可以强制用户更改为特定浏览器的位置，否则您需要在他们使用的任何浏览器中测试您的网站。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-22T18:17:55.657

[Opera](http://www.opera.com/)最接近[标准合规性](http://en.wikipedia.org/wiki/Acid3)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-23T00:02:01.947

我使用带有 IE 标签和 chrome 的 Firefox。Firefox 带有 IE 标签，因为它们是市场份额最大的两个浏览器，而 chrome 因为它是少数使用 webkit 的 Windows 浏览器之一，这意味着它的显示应该与 safari 类似。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T18:23:21.963

> 我认识的大多数人的工作方式是运行 Firefox（使用 Firebug）并在其中进行开发。Firebug 是一个非常有用的调试工具。他们通常会采取什么到达那里，并尝试将其插入 IE 和其他浏览器。不完全是您问题的答案（它不是 100% 合规，但很接近），但希望它有所帮助。

+1 - 对于大多数浏览，我更喜欢 firefox，因为我发现它最稳定且最易于使用，但在 Web 开发方面，与 firebug 结合使用是最棒的！其他的都适合测试，但我发现 firefox+firebug 让一切变得更容易使用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T18:17:21.367

试试谷歌浏览器，它使用的 WebKit 功能齐全，符合最新标准。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T18:30:18.637

我曾经使用 Opera 和 Firefox 作为我的“标准兼容”浏览器，但最近我对 Safari 非常着迷。引擎盖下的 WebKit 非常可靠，javascript 非常快（或者足够快，无论如何），并且 CSS 支持非常出色。它并不完美，但在做它应该做的事情方面做得非常好。

此外，它还具有我在浏览器中见过的最强大的打印屏幕功能。严重地。虽然其他所有浏览器似乎真的会在我尝试打印的任何屏幕上占据优势，但 Safari 似乎总是能做到这一点。一件小事，但值得我书中的要点。

编辑添加：Chrome 即将取代 Safari，但打印屏幕仍然是决定因素。能够在与客户的会议期间点击“打印”，而不必摆弄任何设置以使其正常工作，这是一种重大的解脱。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T19:57:46.073

不要只使用符合标准的浏览器，而是使用其他工具，例如[w3c 验证器](http://validator.w3.org/)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-23T00:06:07.007

我发现如果你坚持使用符合标准的标记，并且不使用任何太不寻常的东西，它会在 Firefox 2/3 和 Safari/Chrome 中呈现良好（在 IE7/8 中通常也很好）。如果没有，您可能最好尝试简化您的标记，而不是引入黑客和变通方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-02T15:38:39.453

使用一个浏览器进行所有测试，然后为其他人破解它是大多数人的做法，但这通常会导致问题。尽管 Safari 可能是一个更符合标准的浏览器，但它并不是一个非常受欢迎的浏览器，我更倾向于使用您的客户最常使用的浏览器，同时编写 100% 标准代码，然后针对其他浏览器的特性进行调整。这并不理想，但它更以客户为中心。

我见过拥有多名全职员工的 Web 开发公司在他们的主页上出现错误，因为他们所做的正是您似乎认为的答案。他们在 Mac 上开发了网页，并专门使用 Safari 进行了测试。结果是超过 60% 的潜在客户可能会在他们的浏览器窗口化时看到布局错误。

# c++ - 仅包括操作系统上的某些库

> ID：116535
> 
> 赞同：3
> 
> 时间：2008-09-22T18:16:04.740
> 
> 标签：c++, c, c-preprocessor, conditional-compilation

在编写一个想要在 mac、linux 和 windows 上编译的应用程序时，管理需要包含在各种操作系统中的不同库的最佳方法是什么。例如，使用 glut opengl 工具包需要在每个操作系统上使用不同的包含。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T19:35:54.720

Your question is actually two questions in one:

1) How do I write my C++ code to include the right include files on the right platform?

2) How do I write my Makefile to work on different platforms?

The C++ code question is already answered - find the platform-specific defines and use them to figure out what platform you're on.

Automake or scons are quite complex, and are worth your time only if you intend to release your code to a wide audience. In the case of in-house code, a "generic" makefile with per-platform include is usually sufficient. For Windows, you can get GNU Make for Windows (available from [here](http://sourceforge.net/projects/gnuwin32/), or use nmake and limit yourself to the subset of syntax common between all platforms.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T19:20:12.183

There is a good article on [Macros](https://stackoverflow.com/questions/96196/when-are-c-macros-benificial). One of the answers how to use conditional compilation based on OS/COmpiler (its near the top).

The use of the Autoconfiguration tools is a nice addition on top of this but is not needed for small projects where it may be easier to detect the OS explicitly, though for larger projects that may need to run on many different types of OS you should also explore the Available autoconfiguration tools mentioned by [Branan](https://stackoverflow.com/questions/116535/what-is-the-best-way-to-only-include-certain-libraries-on-certain-operating-sys#116664)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T18:37:09.307

如果您只需要担心头文件，那么预处理器将完成您需要的一切。如果你想处理不同的源文件，可能还有不同的库，你需要一个工具来处理它。

一些选项包括：

*   [自动工具](http://sources.redhat.com/autobook/)
*   [斯康斯](http://www.scons.org/)
*   [制作](http://www.cmake.org/)

我个人最喜欢的是 CMake。Autotools 使用相对容易破解的多阶段过程，而 scons 对我来说感觉很奇怪。除了 makefile 之外，Cmake 还将为各种 IDE 生成项目文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T18:19:09.633

我从事过的几个项目使用基于 autoconf 的配置脚本来构建 Makefile，因此您可以通过简单的方式从源代码构建所有这些项目：

```
./configure
make
make install 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T18:22:16.410

[Scons](http://scons.org)有一个配置机制，可以在不复杂的情况下完成许多 autotools 的工作，并且非常便携（尽管不如 autotools 便携）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T18:25:13.033

编译器应该有一组预处理器符号，它将提供您可以使用的符号。例如**linux**用于 Linux 系统上的 gcc，_WIN32 用于 VC++。如果您需要更复杂的东西，请查看[autoconf](http://www.gnu.org/software/autoconf/)，但这最适合基于 Unix 的代码。

我建议查看一些较大的开源项目是如何处理这个问题的。请参阅Apache Xerces（旧版本）的[AutoSense.hpp](http://svn.apache.org/viewvc/xerces/c/branches/xerces-2/src/xercesc/util/AutoSense.hpp?view=markup)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T18:31:27.450

如果库在不同平台上提供相同的 API，我将创建一个“代理”包含文件，其中包含所有必要`#ifdef`的 s。然后，该“平台无关”包含文件将包含在您的客户端代码中，而不是用大量难看的预处理器命令将其弄乱。这些将包含在丑陋而杂乱的独立于平台的包含中。

如果 API 跨平台不同，您将需要创建自己的抽象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T18:50:51.757

也许这是一个逃避的答案，但你有没有看过 boost 如何处理这个问题？他们在很多没有 autoconf 的平台上构建，尽管他们确实有自己*的*构建系统 - bjam - 可能处理一些相同的情况。他们还在 windows 上做了一个很好的自动链接技巧，根据 MSVC 编译器的版本自动选择正确版本的库进行链接。根据您最初的描述，听起来只是检查各种平台/编译器的宏定义可能会奏效，但也许您的问题还有更多可以防止这种情况发生。

# asp.net - 处理错误消息的最佳方法

> ID：116542
> 
> 赞同：5
> 
> 时间：2008-09-22T18:16:41.853
> 
> 标签：asp.net, vb.net

我想知道在我的应用程序中处理错误消息的最佳方法是什么。

目前我正在开发一个 Web 应用程序，所有错误消息都存储在数据库中，我们通过 ID 获取它们，负数是错误消息，正数是成功消息。

问题是很难维护和跟踪短信。

你的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T18:19:33.733

一般来说，我将错误消息的文本保存在资源文件中。如果您使用 .NET 2.0 或更高版本（Visual Studio 2005 或更高版本），资源文件会自动编译为强类型类，从而使访问所述消息的代码更加清晰易读。

（编辑：看到另一条提到本地化的评论后，我也很荣幸在这里提到它：.NET 资源文件在本地化方面做得很好。您可以通过完全相同的代码获取资源的本地化文本，使用只需进行一些小的调整即可提供 CultureInfo。）

也就是说，听起来这个问题域的一部分是消息编号。这些错误是否从数据库中抛出（例如，作为存储过程或触发器的一部分）？在这种情况下，数据库存储很可能是它们的正确位置，因为这只是因为它记录了它们最接近使用“幻数”的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T18:20:01.470

如果您要本地化它们，我会使用英文文本作为键，然后查找您选择的存储（基于 SQL 的数据库、文件存储或您拥有的），然后正确返回本地化字符串。

如果商店中不存在所请求的密钥，您可能会产生纯文本错误，可能会通过电子邮件发送给开发人员？

如需更多灵感，请参阅[GNU gettext](http://www.gnu.org/software/gettext/)。

# unix - 当命令尝试以 shell 模式打开编辑器时打开 Emacs 缓冲区

> ID：116560
> 
> 赞同：19
> 
> 时间：2008-09-22T18:18:58.993
> 
> 标签：unix, shell, emacs

我喜欢使用 Emacs 的 shell 模式，但它有一些不足之处。其中之一是当 shell 命令尝试调用编辑器时打开新缓冲区不够聪明。例如，将环境变量`VISUAL`设置为`vim`我从`svn propedit`：

```
$ svn propedit svn:externals 。
“svn-prop.tmp”2L，149C[1;1H
~ [4;1H~ [5;1H~ [6;1H~ [7;1H~            
...

```

（可能很难从表示中分辨出来，但这是一个可怕的、丑陋的混乱。）

`VISUAL`设置为`"emacs -nw"`，我得到

```
$ svn propedit svn:externals 。
emacs：终端类型“dumb”不足以运行 Emacs。
它缺乏定位光标的能力。
如果这不是您拥有的实际终端类型，
使用 Bourne shell 命令 `TERM=... export TERM' (C-shell:
`setenv TERM ...') 来指定正确的类型。可能有必要
做 `unset TERMINFO' (C-shell: `unsetenv TERMINFO') as well.svn: system('emacs -nw svn-prop.tmp') 返回 256

```

（它适用于`VISUAL`set to just `emacs`，但只能从 Emacs X 窗口内部，而不是在终端会话内部。）

有没有办法让 shell 模式在这里做正确的事情并代表命令行进程打开一个新的缓冲区？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-22T18:21:23.573

您可以通过`emacsclient`. 首先，启动emacs服务器

```
M-x server-start 
```

或添加`(server-start)`到您的`.emacs`. 然后，

```
export VISUAL=emacsclient 
```

编辑离开。

笔记：

*   `emacs`和的版本`emacsclient`必须一致。如果您安装了多个版本的 Emacs，请确保调用与`emacsclient`运行服务器的 Emacs 版本相对应的版本。
*   如果您在多个 Emacs 进程/帧中启动服务器（例如，因为`(server-start)`在您的 中`.emacs`），缓冲区将在最后一帧中创建以启动服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-23T17:37:12.877

有 emacsclient、gnuserv 和 Emacs 23 中的 multi-tty，它们都对此很有用。实际上，我认为在 Emacs 23 中，emacsclient 具有 gnuserv 的所有有趣功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-13T02:06:17.913

不完全正确。 `ansi-term`可以很好地运行 emacs（尽管我通常为提交日志运行 mg，但在极少数情况下我不会直接从 emacs 提交）。 `eshell`如果您首先启动`screen`并从那里运行它，也可以运行 emacs。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T22:22:40.960

除了使用 emacs 客户端/服务器，我还使用这个脚本来调用 emacs。

如果它还没有运行，这将启动 emacs，或者只是在正在运行的 emacs 中打开一个新的 emacs 缓冲区（使用 gnuclient）。默认情况下它在后台运行，但对于需要一些输入的进程，它可以在前台运行。例如，在输入更改列表描述时，我将其用作源代码控制编辑器。我有“SVN_EDITOR=emacs sync”，所以我可以在 emacs shell 中执行“svn commit”，它会在同一个 emacs 中的新 emacs 缓冲区中打开 svn 编辑器。当我关闭缓冲区时，“svn commit”继续。挺有用的。

```
#!/bin/sh

如果 [ -z $EMACS_CMD ]; 然后
  EMACS_CMD="/usr/bin/emacs"
菲

如果 [ -z $GNUCLIENT_CMD ]; 然后
  GNUCLIENT_CMD="/usr/bin/gnuclient"
菲

如果 [ "$1" = "同步" ]; 然后
    班次 1
    同步=真
别的
    同步=假
菲

cmd="${EMACS_CMD} $*"
lsof $EMACS_CMD | grep $USER >/dev/null 2>&1
如果[“$？” -ne "1" ]; 然后
    cmd="${GNUCLIENT_CMD} $*"
菲

如果 [ $sync = "true" ]; 然后
    $cmd
别的
    $cmd &
菲

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-20T16:50:07.330

我想做一些类似的事情来通过 mercurial 合并到 emacs shell 中。感谢这里的海报，我找到了方法。两个步骤：

1.  在您的 .emacs 文件中添加：(start-server)（请记住在更改后加载文件）

2.  在你的 hgrc 中：

    ```
    [合并工具]
    emacs.executable = emacsclient
    emacs.premerge = 假
    emacs.args = --eval "(ediff-merge-with-ancestor \"$local\" \"$other\" \"$base\" nil \"$output\")"

    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T00:11:04.480

当我的 .emacs 中有 (start-server) 时，我收到此错误....

```
Debugger entered--Lisp error: (void-function start-server)
  (start-server)
  eval-buffer(#<buffer  *load*> nil "/Users/jarrold/.emacs" nil t)  ; Reading at buffer position 22768
  load-with-code-conversion("/Users/jarrold/.emacs" "/Users/jarrold/.emacs" t t)
  load("~/.emacs" t t)
  #[nil "^H\205\276^@   \306=\203^Q^@\307^H\310Q\202A^@ \311=\2033^@\312\307\313\314#\203#^@\315\202A^@\312\307\$
  command-line()
  normal-top-level() 
```

....我正在使用 GNU Emacs 22.1.1

这是我正在使用的 Mac OS-X 版本：

> shandemo 511 $ uname -a 达尔文设施-MacBook-Pro.local 10.8.0
> 
> Darwin Kernel Version 10.8.0: Tue Jun 7 16:33:36 PDT 2011;
> 
> root:xnu-1504.15.3~1/RELEASE_I386 i386

Note that m-x ansi-term appears to allow me to successfully hg commit inside of its shell. However, that shell does not let me scroll through the buffer with e.g. c-p or c-n so I would prefer to us m-x shell.

# asp.net - 你如何重置 ASP.Net AJAX 级联下拉控件（客户端）

> ID：116564
> 
> 赞同：0
> 
> 时间：2008-09-22T18:19:22.813
> 
> 标签：asp.net, asp.net-ajax, drop-down-menu

级联下拉控件效果很好，只是我无法找到重置下拉客户端的方法（在 Javascript 中）

我的设置是这样的

```
DD1
DD2
DD3
DD4 
```

每个`DD`都依赖于前一个`DD`并使用 web 服务来加载它们。

在更改时`DD3`我需要重置`DD4`，但之前的选择仍然存在。

这可以做到吗？我尝试清除支持的隐藏输入控件（cddTest_ClientState）中的值，但徒劳无功

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T19:18:19.117

这是解决方案

```
<asp:DropDownList ID="dd1" runat="server" onChange="ondd1ChangeHandler(this)>
</asp:DropDownList>
<asp:DropDownList ID="dd2" runat="server">
</asp:DropDownList>
<cc1:CascadingDropDown ID="cdd2" runat="server" Category="Cat1"
    ParentControlID="dd1" PromptText="(Select Option)" ServiceMethod="GetOptions"
    ServicePath="Services/GetOptions.asmx" TargetControlID="dd2">
</cc1:CascadingDropDown>

<script type='text/javascript>
    function ondd1ChangeHandler(dd){
        var dd2=$get('dd2');
        dd2.selectedIndex=0;
        var cdd=$find('cdd2');
        if(cdd!=null){
            cdd.set_SelectedValue('','');
            cdd._onParentChange(null,false);
        }
    }
</script> 
```

希望这可以帮助

# java - 以编程方式非规范化 XML 模式

> ID：116571
> 
> 赞同：3
> 
> 时间：2008-09-22T18:21:35.477
> 
> 标签：java, xml, xsd, schema

我需要采用任何给定的有效 XML 模式 (XSD) 并将其非规范化为不包含引用、不包含等的简单形式。所有简单类型定义都应该是内联的，这样在查看任何给定元素时，所有声明都是可见的执行另一个查找。

我找到了一些内置此功能的工具，但我需要“即时”完成。选择的平台是 Java，但如有必要，我愿意从另一种语言移植代码。我只是真的不想在这里重新发明轮子。从 Apache/etc 搜索 OSS 库一无所获。我发现最接近的是 XSOM，它支持将模式作为对象模型进行遍历，但是您仍然必须处理模式可以用来表示给定结构的所有可能形式。

输出不必是实际的 XML，因为它实际上将以最终形式在对象模型中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T19:27:23.760

You might find XSD4J helpful:

[http://dynvocation.selfip.net/xsd4j/](http://dynvocation.selfip.net/xsd4j/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T19:28:49.370

The EMF XSD model may be helpful:

[http://www.eclipse.org/modeling/mdt/?project=xsd](http://www.eclipse.org/modeling/mdt/?project=xsd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T13:01:43.817

XML Schema 的另一个有用 API 是[XSOM](https://xsom.java.net/)。

XSOM 由[XJC](http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html)使用，集线器下的 JAXB 模式编译器因此可能保证保持活动状态。

# java - java有效地获取文件大小

> ID：116574
> 
> 赞同：170
> 
> 时间：2008-09-22T18:21:40.423
> 
> 标签：java, filesize

谷歌搜索时，我发现使用[`java.io.File#length()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#length%28%29)速度可能很慢。 [`FileChannel`](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html)也有一个[`size()`](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html#size%28%29)可用的方法。

java中有没有一种有效的方法来获取文件大小？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2008-09-22T19:21:05.380

好吧，我试着用下面的代码来衡量它：

对于运行 = 1 和迭代 = 1，URL 方法在大多数情况下最快，其次是通道。我在大约 10 次暂停的情况下运行此程序。因此，对于一次性访问，使用 URL 是我能想到的最快方式：

```
LENGTH sum: 10626, per Iteration: 10626.0

CHANNEL sum: 5535, per Iteration: 5535.0

URL sum: 660, per Iteration: 660.0 
```

对于运行 = 5 和迭代 = 50，图片绘制不同。

```
LENGTH sum: 39496, per Iteration: 157.984

CHANNEL sum: 74261, per Iteration: 297.044

URL sum: 95534, per Iteration: 382.136 
```

文件必须缓存对文件系统的调用，而通道和 URL 有一些开销。

代码：

```
import java.io.*;
import java.net.*;
import java.util.*;

public enum FileSizeBench {

    LENGTH {
        @Override
        public long getResult() throws Exception {
            File me = new File(FileSizeBench.class.getResource(
                    "FileSizeBench.class").getFile());
            return me.length();
        }
    },
    CHANNEL {
        @Override
        public long getResult() throws Exception {
            FileInputStream fis = null;
            try {
                File me = new File(FileSizeBench.class.getResource(
                        "FileSizeBench.class").getFile());
                fis = new FileInputStream(me);
                return fis.getChannel().size();
            } finally {
                fis.close();
            }
        }
    },
    URL {
        @Override
        public long getResult() throws Exception {
            InputStream stream = null;
            try {
                URL url = FileSizeBench.class
                        .getResource("FileSizeBench.class");
                stream = url.openStream();
                return stream.available();
            } finally {
                stream.close();
            }
        }
    };

    public abstract long getResult() throws Exception;

    public static void main(String[] args) throws Exception {
        int runs = 5;
        int iterations = 50;

        EnumMap<FileSizeBench, Long> durations = new EnumMap<FileSizeBench, Long>(FileSizeBench.class);

        for (int i = 0; i < runs; i++) {
            for (FileSizeBench test : values()) {
                if (!durations.containsKey(test)) {
                    durations.put(test, 0l);
                }
                long duration = testNow(test, iterations);
                durations.put(test, durations.get(test) + duration);
                // System.out.println(test + " took: " + duration + ", per iteration: " + ((double)duration / (double)iterations));
            }
        }

        for (Map.Entry<FileSizeBench, Long> entry : durations.entrySet()) {
            System.out.println();
            System.out.println(entry.getKey() + " sum: " + entry.getValue() + ", per Iteration: " + ((double)entry.getValue() / (double)(runs * iterations)));
        }

    }

    private static long testNow(FileSizeBench test, int iterations)
            throws Exception {
        long result = -1;
        long before = System.nanoTime();
        for (int i = 0; i < iterations; i++) {
            if (result == -1) {
                result = test.getResult();
                //System.out.println(result);
            } else if ((result = test.getResult()) != result) {
                 throw new Exception("variance detected!");
             }
        }
        return (System.nanoTime() - before) / 1000;
    }

} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-09-23T06:18:54.503

GHad 给出的基准除了测量长度外，还测量了许多其他的东西（例如反射、实例化对象等）。如果我们试图摆脱这些事情，那么对于一个电话，我会在微秒内得到以下时间：

```
   文件总和___19.0，每次迭代___19.0
    raf sum___16.0，每次迭代___16.0
通道总和__273.0，每次迭代__273.0

```

对于 100 次运行和 10000 次迭代，我得到：

```
   文件总和__1767629.0，每次迭代__1.7676290000000001
    raf sum___881284.0，每次迭代__0.8812840000000001
通道总和___414286.0，每次迭代__0.414286

```

我确实运行了以下修改后的代码，将 100MB 文件的名称作为参数。

```
import java.io.*;
import java.nio.channels.*;
import java.net.*;
import java.util.*;

public class FileSizeBench {

  private static File file;
  private static FileChannel channel;
  private static RandomAccessFile raf;

  public static void main(String[] args) throws Exception {
    int runs = 1;
    int iterations = 1;

    file = new File(args[0]);
    channel = new FileInputStream(args[0]).getChannel();
    raf = new RandomAccessFile(args[0], "r");

    HashMap<String, Double> times = new HashMap<String, Double>();
    times.put("file", 0.0);
    times.put("channel", 0.0);
    times.put("raf", 0.0);

    long start;
    for (int i = 0; i < runs; ++i) {
      long l = file.length();

      start = System.nanoTime();
      for (int j = 0; j < iterations; ++j)
        if (l != file.length()) throw new Exception();
      times.put("file", times.get("file") + System.nanoTime() - start);

      start = System.nanoTime();
      for (int j = 0; j < iterations; ++j)
        if (l != channel.size()) throw new Exception();
      times.put("channel", times.get("channel") + System.nanoTime() - start);

      start = System.nanoTime();
      for (int j = 0; j < iterations; ++j)
        if (l != raf.length()) throw new Exception();
      times.put("raf", times.get("raf") + System.nanoTime() - start);
    }
    for (Map.Entry<String, Double> entry : times.entrySet()) {
        System.out.println(
            entry.getKey() + " sum: " + 1e-3 * entry.getValue() +
            ", per Iteration: " + (1e-3 * entry.getValue() / runs / iterations));
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2011-03-22T01:02:59.260

这篇文章中的所有测试用例都存在缺陷，因为它们为每个测试的方法访问同一个文件。因此磁盘缓存启动，测试 2 和 3 从中受益。为了证明我的观点，我采用了 GHAD 提供的测试用例并更改了枚举顺序，以下是结果。

从结果来看，我认为 File.length() 真的是赢家。

测试的顺序是输出的顺序。您甚至可以看到我的机器上所花费的时间在执行之间有所不同，但 File.Length() 不是第一次，并且导致第一次磁盘访问获胜。

```
---
LENGTH sum: 1163351, per Iteration: 4653.404
CHANNEL sum: 1094598, per Iteration: 4378.392
URL sum: 739691, per Iteration: 2958.764

---
CHANNEL sum: 845804, per Iteration: 3383.216
URL sum: 531334, per Iteration: 2125.336
LENGTH sum: 318413, per Iteration: 1273.652

--- 
URL sum: 137368, per Iteration: 549.472
LENGTH sum: 18677, per Iteration: 74.708
CHANNEL sum: 142125, per Iteration: 568.5 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-09-23T03:42:41.727

当我修改您的代码以使用通过绝对路径而不是资源访问的文件时，我得到了不同的结果（对于 1 次运行、1 次迭代和 100,000 字节文件 - 10 字节文件的时间与 100,000 字节相同)

长度总和：33，每次迭代：33.0

CHANNEL总和：3626，每次迭代：3626.0

URL 总和：294，每次迭代：294.0

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-11-26T13:18:49.197

为了响应 rgrig 的基准测试，还需要考虑打开/关闭 FileChannel 和 RandomAccessFile 实例所花费的时间，因为这些类将打开一个流来读取文件。

修改基准后，我在一个 85MB 的文件上进行了 1 次迭代，得到了这些结果：

```
file totalTime: 48000 (48 us)
raf totalTime: 261000 (261 us)
channel totalTime: 7020000 (7 ms) 
```

对于同一文件的 10000 次迭代：

```
file totalTime: 80074000 (80 ms)
raf totalTime: 295417000 (295 ms)
channel totalTime: 368239000 (368 ms) 
```

如果您只需要文件大小，file.length() 是最快的方法。如果您打算将该文件用于读/写等其他目的，那么 RAF 似乎是一个更好的选择。只是不要忘记关闭文件连接:-)

```
import java.io.File;
import java.io.FileInputStream;
import java.io.RandomAccessFile;
import java.nio.channels.FileChannel;
import java.util.HashMap;
import java.util.Map;

public class FileSizeBench
{    
    public static void main(String[] args) throws Exception
    {
        int iterations = 1;
        String fileEntry = args[0];

        Map<String, Long> times = new HashMap<String, Long>();
        times.put("file", 0L);
        times.put("channel", 0L);
        times.put("raf", 0L);

        long fileSize;
        long start;
        long end;
        File f1;
        FileChannel channel;
        RandomAccessFile raf;

        for (int i = 0; i < iterations; i++)
        {
            // file.length()
            start = System.nanoTime();
            f1 = new File(fileEntry);
            fileSize = f1.length();
            end = System.nanoTime();
            times.put("file", times.get("file") + end - start);

            // channel.size()
            start = System.nanoTime();
            channel = new FileInputStream(fileEntry).getChannel();
            fileSize = channel.size();
            channel.close();
            end = System.nanoTime();
            times.put("channel", times.get("channel") + end - start);

            // raf.length()
            start = System.nanoTime();
            raf = new RandomAccessFile(fileEntry, "r");
            fileSize = raf.length();
            raf.close();
            end = System.nanoTime();
            times.put("raf", times.get("raf") + end - start);
        }

        for (Map.Entry<String, Long> entry : times.entrySet()) {
            System.out.println(entry.getKey() + " totalTime: " + entry.getValue() + " (" + getTime(entry.getValue()) + ")");
        }
    }

    public static String getTime(Long timeTaken)
    {
        if (timeTaken < 1000) {
            return timeTaken + " ns";
        } else if (timeTaken < (1000*1000)) {
            return timeTaken/1000 + " us"; 
        } else {
            return timeTaken/(1000*1000) + " ms";
        } 
    }
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2011-04-02T03:25:53.730

我遇到了同样的问题。我需要获取网络共享上 90,000 个文件的文件大小和修改日期。使用 Java 并尽可能简约，这将需要很长时间。（我需要从文件中获取 URL，以及对象的路径。所以它有所不同，但一个多小时。）然后我使用了本机 Win32 可执行文件，并做了同样的任务，只是转储文件路径、修改和大小到控制台，并从 Java 执行。速度是惊人的。本机进程和我用于读取数据的字符串处理每秒可以处理超过 1000 个项目。

因此，即使人们对上述评论进行了排名，这也是一个有效的解决方案，并且确实解决了我的问题。在我的情况下，我提前知道我需要大小的文件夹，我可以在命令行中将它传递给我的 win32 应用程序。我从几个小时来处理一个目录到几分钟。

这个问题似乎也与 Windows 相关。OS X 没有同样的问题，并且可以尽可能快地访问网络文件信息。

Windows 上的 Java 文件处理非常糟糕。不过，文件的本地磁盘访问很好。只是网络共享导致了糟糕的表现。Windows 也可以在一分钟内获得有关网络共享的信息并计算总大小。

——本

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-01-23T12:00:23.987

如果您想要一个目录中多个文件的文件大小，请使用[`Files.walkFileTree`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.util.Set,%20int,%20java.nio.file.FileVisitor%29). 您可以从`BasicFileAttributes`您将收到的尺寸中获取尺寸。

这比调用`.length()`的结果`File.listFiles()`或使用`Files.size()`的结果要快得多`Files.newDirectoryStream()`。在我的测试用例中，它快了大约 100 倍。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-11-17T07:40:25.530

实际上，我认为“ls”可能更快。Java 在处理获取文件信息时肯定存在一些问题。不幸的是，对于 Windows，没有等效的递归 ls 安全方法。（cmd.exe 的 DIR /S 可能会混淆并在无限循环中产生错误）

在 XP 上，访问 LAN 上的服务器，在 Windows 中我需要 5 秒才能获得文件夹中文件的数量（33,000）和总大小。

当我在 Java 中递归地遍历它时，我花了 5 多分钟。我开始测量执行 file.length()、file.lastModified() 和 file.toURI() 所需的时间，我发现这 3 个调用占用了我 99% 的时间。我实际上需要做的3个电话......

1000 个文件的区别是本地 15 毫秒与服务器上的 1800 毫秒。Java 中的服务器路径扫描速度非常慢。如果本机操作系统可以快速扫描同一个文件夹，为什么 Java 不能呢？

作为更完整的测试，我在 XP 上使用 WineMerge 来比较服务器上文件与本地文件的修改日期和大小。这是对每个文件夹中 33,000 个文件的整个目录树进行迭代。总时间，7 秒。爪哇：超过5分钟。

因此，OP 的原始陈述和问题是真实且有效的。在处理本地文件系统时它不太明显。在 WinMerge 中对包含 33,000 个项目的文件夹进行本地比较需要 3 秒，而在 Java 中本地需要 32 秒。同样，在这些基本测试中，java 与 native 相比，速度要慢 10 倍。

Java 1.6.0_22（最新），千兆网卡，网络连接，ping不到1ms（都在同一个交换机）

Java 很慢。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-10-17T14:54:36.877

从 GHad 的基准测试中，人们提到了几个问题：

1>就像 BalusC 提到的：在这种情况下，stream.available() 是流动的。

因为 available() 会返回一个**估计**的字节数，该字节数可以从此输入流中读取（或跳过）而不会被下一次调用此输入流的方法阻塞。

因此，首先要删除 URL 这种方法。

2>正如 StuartH 所提到的 - 测试运行的顺序也会使缓存有所不同，所以通过单独运行测试来消除它。

* * *

现在开始测试：

当 CHANNEL one 单独运行时：

```
CHANNEL sum: 59691, per Iteration: 238.764 
```

当 LENGTH one 单独运行时：

```
LENGTH sum: 48268, per Iteration: 193.072 
```

所以看起来 LENGTH 是这里的赢家：

```
@Override
public long getResult() throws Exception {
    File me = new File(FileSizeBench.class.getResource(
            "FileSizeBench.class").getFile());
    return me.length();
} 
```

# internet-explorer - 在 Internet Explorer 中调试网站

> ID：116576
> 
> 赞同：6
> 
> 时间：2008-09-22T18:21:49.593
> 
> 标签：internet-explorer, profiling

我有一个网站非常慢，使用时“感觉”非常糟糕。服务器很好，这是一个客户端问题，我认为是因为 JavaScript 或图像请求过多，但由于它不是我自己的网站，我想知道是否有一种方法可以从 IE 中显示和配置页面。

在 Firefox 中，我会使用 Firebug、Y!Slow 和 Web Developer 扩展来查看所有 JavaScript、CSS、图像和其他请求、AJAX 请求等，但在 IE 上我没有发现任何问题。我知道我可以使用 Firefox，但该页面在 FF 中比在 IE 中效果更好，所以我想知道是否有一些专门在 IE 中的开发插件。

**编辑：**感谢您的许多建议！选择一个“已接受”的好答案太多了，但我会看看建议的各种工具。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-22T18:25:05.220

有[Internet Explorer Web Developer Toolbar](http://www.microsoft.com/en-us/download/details.aspx?id=18359)。它不如 Firebug 恕我直言，但它有效。

IE8 也将内置一个。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-22T18:25:01.723

提琴手可帮助您查看互联网活动。它显示了通过网络堆栈的所有请求/响应消息的日志。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-22T18:25:41.643

有一个[精简版](http://getfirebug.com/lite.html)的 Firebug 可以与 IE 和其他浏览器一起使用，你试过吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-22T20:32:47.487

试试[提琴手](http://www.fiddler2.com/)！它是一个免费的 HTTP 调试代理，除其他外，它可以洞察您网站中加载的内容、可能减慢速度的内容等。它具有高级功能，如解码压缩资源、为某些 URL 提供预先设定的响应等。学习 Fiddler 是任何 Web 开发人员的必修课。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-24T21:37:24.227

我还建议使用两种工具来发现[JavaScript 内存泄漏](http://javascript.crockford.com/memory/leak.html)：

*   [筛](http://home.wanadoo.nl/jsrosman/)
*   [Microsoft JavaScript 内存泄漏检测器](http://blogs.msdn.com/gpde/pages/javascript-memory-leak-detector.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T19:44:39.537

我最近一直在使用[Web Development Helper](http://projects.nikhilk.net/WebDevHelper/Default.aspx)。它比 Firebug 更好地进行 HTTP 日志记录。也可以让您运行任意 Javascript。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T18:28:01.467

有一个名为 firebug light 的 JS 库，您需要将它包含在您的站点中。它为您所做的是它使您能够弹出一个 div，您可以在其中吐出文本，就像在 firebug 中一样，使用您在 firebug 中执行的相同语句。MochiKit 也有类似的东西。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-22T18:32:01.020

这不是分析器或插件，但您可能会发现[Quirksmode](http://www.quirksmode.org/js/contents.html)可以帮助您解决一些以 IE 为中心的问题，一旦您找到它们。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-22T19:08:46.363

您是否在客户端运行了性能监视器以查看发生了什么，例如，是否存在大量内存交换导致速度变慢，或者问题在于所有网络流量？

另一个想法是，如果有一堆文件要加载以及 Javascript 来初始化事物，是否有服务器日志可能有助于查看请求的时间。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-22T19:49:15.453

通过使用像 Wireshark 这样的网络嗅探器或代理，您可以监控流量并查看是否是图像和/或脚本的加载导致您的站点变慢。如果您不确定 - 关闭或注释掉您的 javascript，以排除是它们的处理速度变慢了。

如果您在网络流量中看不到任何减速迹象 - 那么您将不得不对 javascript 代码本身进行更深入的分析 - 也许通过插入计时器或其他测量来查看可以优化的部分。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-22T20:28:34.687

我使用[HTTPWatch](http://www.httpwatch.com/)。它提供了像 Firefox LiveHeaders 这样的所有信息，但以一种更有用的方式。它也是一个很好的工具，可以确定您是否有任何内容阻止下载页面的更多内容的操作。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-24T21:47:16.447

您可以尝试来自同一家公司[http://www.debugbar.com/的](http://www.debugbar.com/)**调试栏**和**同伴**JS ，它们是免费的，并且在概念上与 Firebug 非常相似，但不像开发的那样

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-24T21:52:17.030

[随着 IE 插件的发展， HttpWatch](http://www.httpwatch.com/)也非常棒。

# sql - 文件系统管理工具

> ID：116577
> 
> 赞同：1
> 
> 时间：2008-09-22T18:21:59.127
> 
> 标签：sql, database, file, system

寻找有关文件系统管理工具的建议。我们有数 TB 的图像、pdf、excel 表格等。

我们正在寻找某种软件来帮助我们管理、存档等图像。

我们不会将所有文件信息存储在数据库中，但有些是，我们希望找到一个可以帮助我们将存档过程集成到数据库中的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-23T01:26:44.223

我总是在贸易杂志上看到这些家伙。 [http://www.dtsearch.com/](http://www.dtsearch.com/) 我相信他们早在谷歌之前就已经存在了。不确定这是否是您要查找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T18:25:24.517

如果某些数据保存在磁盘上，则搜索应用程序可能更合适。您可以使用谷歌、微软搜索或类似程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-23T01:01:11.820

一些数据库产品（例如，Oracle）提供了类似文件系统的存储，您可以将文件放入其中。由于它是 Oracle 管理的文件系统，因此您拥有所有 Oracle 备份和管理工具。由于它是一个文件系统，您只需使用普通的操作系统工具，例如`cp`将文件移入和移出。

最佳实践是避免将 RDBMS 浪费在 RDMBS 无法使用的大型 BLOBS 数据上。将数据库用于名称、日期和它处理得很好的东西。实际的图像文件或电子表格文件可以留在普通的文件系统世界中。如果您这样做，您不会付出太多努力或复杂性 - 您只是在收集有关文件的基本信息。

您不会重复存储（电子表格只是一个普通文件）。您不要将无法由数据库处理的大型对象放入数据库中。

文件系统比数据库更快、更简单、更可靠。随意将其用于大容量存储。该数据库具有很酷的搜索功能。为此使用数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-26T13:03:22.437

为了澄清，我想我应该说所有文件都在文件服务器上，但是在数据库中有对其中一些的引用（上传日志等）所以我们只是希望也许有一些工具可以让我们设置它，这样如果它将文件存档在某个目录中，它可以运行某种 sql 命令，以便更新数据库以知道文件已存档。

但感谢您的信息。我认为在这种情况下我们将不得不自己动手。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-26T14:12:48.573

您可以定期运行作业以列出自上次运行作业以来已添加到文件系统的文件。在 Windows 上，此批处理文件将列出其中的所有文件和文件夹，`archivedirectory`以便您可以将该列表与上次运行的时间进行比较。

```
cd archivedirectory
del oldlist.txt
rename newlist.txt oldlist.txt
dir /s /b > newlist.txt 
```

如果您在 Windows 上安装 diffutils，则可以使用标准`diff`工具列出新文件。要隔离新文件：

```
diff oldlist.txt newlist.txt > newfiles.txt 
```

任何以`newfiles.txt`开头的行`>`现在都应该为您提供新文件。（您可以使用`grep`并`sed`进一步精简它。Windows 版本可从[gnuwin32](http://gnuwin32.sourceforge.net/packages/)获得）您现在应该能够对该文件运行进一步的操作，可能使用 Python、C# 或 Java 等语言，以将信息添加到数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-31T22:09:41.200

我必须将您指向[Total Commander](http://www.ghisler.com/)。这是一个两窗格的文件管理器，它使几乎所有的文件任务变得简单快捷。你使用它的次数越多，你使用它的速度就越快。

这类程序已经存在了很长时间。从 Norton Commander 时代到 Unix/Linux 系统上的 Midnight Commander。它们*非常*高效，相比之下，在 Windows 资源管理器中完成的大多数操作显得笨拙和缓慢。

# java - 一次打开多个相同的 Mac 应用程序

> ID：116579
> 
> 赞同：1
> 
> 时间：2008-09-22T18:22:16.723
> 
> 标签：java, eclipse, macos

我正在用 Java 开发一个 Mac 应用程序，它可以登录到我们客户的任何一个数据库中。我的用户希望运行该程序的多个副本，以便他们可以同时登录几个客户端，而不是注销并重新登录。

如何允许用户一次打开我的应用程序的多个副本？

我正在使用 Eclipse 进行开发，并使用 Jarbundler 来制作应用程序。

编辑：更重要的是，有没有办法在代码库中这样做，而不是让我的用户在他们的系统上做一些时髦的事情？我宁愿给他们一个“打开新窗口”菜单项，然后让他们在终端中输入内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-23T13:00:15.507

您可能已经获得了足够多不想听到的代码，但是您真的不应该启动同一个应用程序的两个实例。你发现它如此困难是有原因的，那是因为 Apple 不希望你这样做。

OSX 的做法是在 XCode 中使用**Cocoa Document-based Application**模板。[Apple 文档：选择一个项目。](http://developer.apple.com/documentation/DeveloperTools/Conceptual/XcodeProjectManagement/030-Creating_Projects/chapter_4_section_2.htm)

这是用户非常习惯的事情，而且效果很好。FTP 程序、IRC 客户端和许多其他类型已经使用不同的“文档”窗口来指向不同的服务器或通道。指向不同的数据库并没有本质上的不同。

根据您编写的代码量以及应用程序的设计方式，如果不重新开始，这几乎是不可能实现的。但是，在设计阶段遇到此问题的开发人员绝对应该听取 Apple 的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T19:19:32.827

从终端（或在脚本包装器中）：

```
/Applications/TextEdit.app/Contents/MacOS/TextEdit  & 
```

像这样的东西应该适合你。

要在 Java 中执行此操作：

```
 String[] cmd = { "/bin/sh", "-c", "[shell commmand goes here]" };
 Process p = Runtime.getRuntime().exec (cmd); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T20:09:50.600

从终端，我可以运行

```
open -n -a appName.app 
```

然后从Applescript，我可以运行

```
tell application "Terminal"
activaate
   do script "open -n -a appName.app"
end tell 
```

然后从 Java 中，我可以执行该脚本。然后，我可以将该 Java 代码填充到一个 Action 中。然后，将该操作填充到显示“打开新窗口”的菜单项中。

这就是我现在要做的。现在我只需要获取 appName。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T20:21:47.653

如果你是在摇摆中开发它，你应该能够实例化顶部的 Frame 来创建一个新窗口。

# java - 确定类的扩展接口

> ID：116587
> 
> 赞同：11
> 
> 时间：2008-09-22T18:23:27.157
> 
> 标签：java, reflection, interface

我需要确定表示接口的 Class 对象是否扩展了另一个接口，即：

```
 package a.b.c.d;
    public Interface IMyInterface extends a.b.d.c.ISomeOtherInterface{
    } 
```

根据[规范](http://web.archive.org/web/20100705124350/http://java.sun.com:80/j2se/1.4.2/docs/api/java/lang/Class.html)Class.getSuperClass() 将为接口返回 null 。

> 如果此 Class 表示 Object 类、接口、原始类型或 void，则返回 null。

因此以下将不起作用。

```
Class interface = Class.ForName("a.b.c.d.IMyInterface")
Class extendedInterface = interface.getSuperClass();
if(extendedInterface.getName().equals("a.b.d.c.ISomeOtherInterface")){
    //do whatever here
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-22T18:27:49.033

使用 Class.getInterfaces，例如：

```
Class<?> c; // Your class
for(Class<?> i : c.getInterfaces()) {
     // test if i is your interface
} 
```

以下代码也可能会有所帮助，它将为您提供一组包含某个类的所有超类和接口的集合：

```
public static Set<Class<?>> getInheritance(Class<?> in)
{
    LinkedHashSet<Class<?>> result = new LinkedHashSet<Class<?>>();

    result.add(in);
    getInheritance(in, result);

    return result;
}

/**
 * Get inheritance of type.
 * 
 * @param in
 * @param result
 */
private static void getInheritance(Class<?> in, Set<Class<?>> result)
{
    Class<?> superclass = getSuperclass(in);

    if(superclass != null)
    {
        result.add(superclass);
        getInheritance(superclass, result);
    }

    getInterfaceInheritance(in, result);
}

/**
 * Get interfaces that the type inherits from.
 * 
 * @param in
 * @param result
 */
private static void getInterfaceInheritance(Class<?> in, Set<Class<?>> result)
{
    for(Class<?> c : in.getInterfaces())
    {
        result.add(c);

        getInterfaceInheritance(c, result);
    }
}

/**
 * Get superclass of class.
 * 
 * @param in
 * @return
 */
private static Class<?> getSuperclass(Class<?> in)
{
    if(in == null)
    {
        return null;
    }

    if(in.isArray() && in != Object[].class)
    {
        Class<?> type = in.getComponentType();

        while(type.isArray())
        {
            type = type.getComponentType();
        }

        return type;
    }

    return in.getSuperclass();
} 
```

编辑：添加了一些代码来获取某个类的所有超类和接口。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-22T18:30:31.260

```
if (interface.isAssignableFrom(extendedInterface)) 
```

是你想要的

一开始我总是把顺序倒过来，但最近意识到这与使用 instanceof 完全相反

```
if (extendedInterfaceA instanceof interfaceB) 
```

是一样的，但你必须有类的实例而不是类本身

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T18:29:10.387

Class.isAssignableFrom() 做你需要的吗？

```
Class baseInterface = Class.forName("a.b.c.d.IMyInterface");
Class extendedInterface = Class.forName("a.b.d.c.ISomeOtherInterface");

if ( baseInterface.isAssignableFrom(extendedInterface) )
{
  // do stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T18:28:11.700

看看 Class.getInterfaces();

```
List<Object> list = new ArrayList<Object>();
for (Class c : list.getClass().getInterfaces()) {
    System.out.println(c.getName());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-28T13:57:35.880

```
Liast<Class> getAllInterfaces(Class<?> clazz){
    List<Class> interfaces = new ArrayList<>();
    Collections.addAll(interfaces,clazz.getInterfaces());
    if(!clazz.getSuperclass().equals(Object.class)){
        interfaces.addAll(getAllInterfaces(clazz.getSuperclass()));
    }
    return interfaces ;
} 
```

# ruby - 你如何清除 IRB 控制台？

> ID：116593
> 
> 赞同：193
> 
> 时间：2008-09-22T18:24:20.883
> 
> 标签：ruby, irb

如何清除 IRB 控制台屏幕？

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2008-09-22T18:24:57.810

在*Mac OS X*或*Linux 上*，您可以使用`Ctrl`+`L`来清除*IRB*屏幕。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2008-09-22T18:25:25.607

把这个扔进去`%userprofile%\.irbrc`，你很好

```
def cls
  system('cls')
end 
```

从[Windows 上的 IRB 清除屏幕](http://snipplr.com/view/3055/irb-clear-screen-on-windows/)。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2008-09-22T18:27:23.340

在 *nix 盒子上

```
`clear` 
```

在 Windows 上

```
system 'cls' # works
`cls` # does not work 
```

在 OSX 上

```
system 'clear' # works
`clear` # does not work 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-11-01T22:49:07.590

`Command`*macOS*`K`中的+效果很好。

 ** * *

## 回答 #5

> 赞同：16
> 
> 时间：2011-12-06T15:55:55.310

在 Ubuntu 11.10 系统`clear`上大部分会清除 irb 窗口。你得到一个`=> True`打印的返回值。

一大堆丑陋的文字

```
ruby-1.9.2-p290 :007 > system 'clear' 
```

你得到什么：

```
 => true 
ruby-1.9.2-p290 :007 > 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-07-17T07:09:35.903

今天刚刚发现：在 Pry（IRB 替代方案）中，以 a 开头的一行输入`.`将被转发到命令 shell。这意味着在 Mac 和 Linux 上，我们可以使用：

```
. clear 
```

而且，在 Windows（命令提示符和 Windows 终端）上，我们可以使用：

```
. cls 
```

来源：[pry.github.io](https://pry.github.io)

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-10-20T09:54:24.480

```
system 'clear' 
```

也应该适用于 rails 4.0

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-02-14T16:11:16.743

为了清除屏幕，只需执行以下操作：

```
puts "\e[H\e[2J" 
```

PS 这是在 Linux 上测试的。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2015-09-21T11:52:48.053

在 Linux Mint 17 上，您也可以使用`Ctrl`++`Shift``L`

或者

`Ctrl`+`L` 清除 IRB 屏幕。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-04-24T03:06:06.890

```
puts `clear` 
```

清除屏幕，然后返回`=> nil`Tested on Mac OSX 10.6 Terminal 和 iTerm2。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-07-22T16:29:18.090

方法： `def clear_screen if RUBY_PLATFORM =~ /win32|win64|\.NET|windows|cygwin|mingw32/i system('cls') else system('clear') end end`

或者在 IRB 中你可以使用`system('clear')`

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2014-01-16T15:18:32.477

在 Windows 中，使用 Rails 4，

```
system('cls') 
```

为我工作

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2016-08-21T01:26:39.457

这里有很多好的答案，但我经常从 Windows 远程进入带有 Mintty 的 linux 盒子。上面关于使用 .irbrc 的荣誉，但想出了这个：

```
def cls
  puts "\ec\e[3J"
end

def clear
  puts "\e[H\e[2Js"
end 
```

这为您提供了 *nix 'clear' 行为和 Windows 'cls' 行为的选项，如果我真的想核对缓冲区而不是仅仅将其滚动到视野之外，我通常会发现它们更有用。

PS 类似的变体也适用于 .bashrc：

```
alias cls='echo -e "\ec\e[3J"' 
```

如果有人能找到一种方法将其实际映射到击键，我很想听听。我真的很想在 osx 上有类似于 cmd-k 的东西，它可以在 Mintty 中工作。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-07-09T20:38:16.840

将以下方法添加到`~/.irbrc`：

```
def clear
  conf.return_format = ""
  system('clear')
end 
```

`Cntrl-L`或`Cntrl-K` 在常规控制台中工作，但我正在使用 tmux 并且那些在 tmux 窗口内弄乱了屏幕。

conf.return_format = "" 将 nil 从返回值中取出**。**

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2014-09-29T12:11:02.473

Windows 用户只需尝试，

```
system 'cls' 
```

或者

```
system('cls') 
```

在 IRB 窗口中看起来像这样，

```
irb(main):333:0> system 'cls'
irb(main):007:0> system('cls') 
```

在 ruby​​ 1.9.3 中为我做了诀窍。但是以下命令不起作用并返回`=> nil`，

```
system('clear')
system 'clear'
system `cls`       #using the backquotes below ESC Key in windows 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-11-20T17:18:50.993

我已将其用于可执行文件：

```
def clear
    system("cls") || system("clear") || puts("\e[H\e[2J")
end

clear 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-09-22T14:42:29.210

```
system 'cls' 
```

在 Windows 中为我工作，使用 Ruby 2.2.0 和 rails 4.0

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2012-10-17T21:07:46.140

我来这里是为了寻找一种用 irb 重置 tty 的方法，因为它没有打印换行符或显示我以某种方式输入的内容，只有一些输出。

```
1.9.3-p125 :151 >   system 'reset' 
```

终于为我成功了！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-08-23T21:34:57.640

对于 Windows 用户：

如果您创建一个 bat 文件名为 c.bat，其内容为：

```
@echo off
cls 
```

然后，在 IRB 中，你可以说：

```
system('c') 
```

清除控制台。我只是想我会分享，因为我觉得那很酷。基本上路径中的任何东西都是可访问的。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-10-19T14:50:14.103

```
->(a,b,c){x=a.method(b);a.send(c,b){send c,b,&x;false};print"\e[2J\e[H \e[D"}[irb_context,:echo?,:define_singleton_method] 
```

这将完全清除您的 IRB 屏幕，没有多余的空行和“=> nil”的东西。在 Linux/Windows 上测试。

这个单行可以扩展为：

```
lambda {
  original_echo = irb_context.method(:echo?)
  irb_context.send(:define_singleton_method, :echo?) {
    send :define_singleton_method, :echo?, &original_echo
    false
  }
  print "\e[2J\e[H \e[D"
}.call 
```

这使用了很多技巧。

首先，irb 会调用`echo?`来检查是否应该打印结果。我保存了该方法，然后使用恢复定义但返回 false 的方法重新定义，因此 irb 不会回显结果。

其次，我打印了一些 ANSI 控制字符。`\e[2J`将清洁屏幕并将`\e[H`光标移动到屏幕的左上角。`\e[D`将打印一个空格，然后将光标移回，而这是 Windows 上某些奇怪事物的解决方法。

最后，这根本不实用。只是笑一下 ;）

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2008-09-22T19:04:47.697

反引号运算符捕获命令的输出并将其返回

```
s = `cls`
puts s 
```

我想会更好。

# java - 使用 WSO2 WSAS 的最佳设置是什么

> ID：116599
> 
> 赞同：1
> 
> 时间：2008-09-22T18:25:11.333
> 
> 标签：java, eclipse, wso2, wso2carbon, wso2developerstudio

我应该使用什么版本的 java、eclipse 和 WPT？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-23T12:02:07.533

Java 2 SDK 5.0 或更高版本 发行说明在这个站点告诉你一切

[http://wso2.org/project/wsas/java/2.3/docs/tools/ide.html](http://wso2.org/project/wsas/java/2.3/docs/tools/ide.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-29T15:28:14.470

WSO2 WSAS 现在称为 WSO2 Application Server，现在是 4.0.0 版本

如果您要运行最新的 WSO2 Application Server，建议您使用 JDK 1.6 运行它

如果您想开发要托管的服务，您可以使用 WSO2 Carbon Studio 来实现此目的。请注意，Carbon Studio 基于 Eclipse，并提供与 WTP 相同的体验。

# html - MySpace DOM？

> ID：116610
> 
> 赞同：2
> 
> 时间：2008-09-22T18:27:00.767
> 
> 标签：html, dom, myspace

我的任务是在 MySpace 中定制艺术家的空间。似乎您将想要的 HTML 破解到您的编辑个人资料页面（其中有几个空框）。MySpace 页面似乎已经是 HTML，所以你只能破解它。建议的“调整”包括不完整的 HTML 代码（例如，一个`<DIV>`不带标签的`</DIV>`标签来抑制某些部分）和您可以“放置在任何地方”的样式表片段（即在您的编辑配置文件页面上的某个地方）。最好的一个是提供布局的网站说，“布局代码 - 将代码复制并粘贴到‘我想见面’部分的底部！”

这不可能这么蹩脚吧？

是否有任何为程序员/HTML 设计师定制 MySpace 页面的连贯指南？是否有一个连贯的 DOM（包括诸如此类的东西`.contactTable`）？难道所有的调整都只是人们通过查看生成的 HTML 发现的黑客行为？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T18:31:26.687

你的最后一个问题一针见血。MySpace DOM 是一组令人作呕的几乎无限嵌套的表。通常，人们通过查找那些允许您“剪切和粘贴”并使用他们生成的 CSS 的网站来编辑页面，因为他们已经完成了隔离适当元素的艰苦工作。

祝你好运......不幸的是，你*真的*需要它。=/

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T18:50:45.157

如果你抽出 Firebug 并做一堆“检查 > 点击页面 > 在 Firebug 的编辑器中编辑 CSS” 的工作，看看你可以了解页面的结构，这应该不会太难。然后将其模拟为您想要的大致方式，并记下哪些元素和哪些样式需要工作，并弄清楚如何在配置文件编辑器中进行设置。

尝试从挑战的角度来解决这个问题。从好的方面来说，MySpace 允许您访问 DOM，因此您可以处理各种事情。不利的一面是，他们对 HTML 组合的选择有些争议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T18:29:34.740

你的担心是正确的。MySpace“定制”是一堆黑客。祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T07:36:50.533

您可以在此链接中获取很多信息：http: [//spiff-myspace.blogspot.com/](http://spiff-myspace.blogspot.com/)

我认为其他人的答案相同：自定义 MySpace 页面是一项艰巨而复杂的任务。

问候，

# ruby - 为什么我的 Ruby 代码中出现“参数数量错误（0 表示 2）”异常？

> ID：116626
> 
> 赞同：3
> 
> 时间：2008-09-22T18:29:26.520
> 
> 标签：ruby, metaprogramming, xunit

我试图通过从“测试驱动开发：示例”中重新编写 Kent Beck 的 xUnit Python 示例来完善我的 Ruby。我已经走了很远，但现在我在运行时收到以下错误，我不知道。

```
C:\Documents and Settings\aharmel\My Documents\My Workspace\TDD_Book\TDDBook_xUnit_RubyVersion\lib\main.rb:21:in `test_running': wrong number of arguments (0 for 2) (ArgumentError)
    from C:\Documents and Settings\aharmel\My Documents\My Workspace\TDD_Book\TDDBook_xUnit_RubyVersion\lib\main.rb:21:in `run'
    from C:\Documents and Settings\aharmel\My Documents\My Workspace\TDD_Book\TDDBook_xUnit_RubyVersion\lib\main.rb:85 
```

我的代码如下所示：

```
class TestCase
  def initialize(name)
    puts "1\.  inside TestCase.initialise: @name: #{name}"
    @name = name
  end
  def set_up
    # No implementation (but present to be overridden in WasRun) 
  end
  def run
    self.set_up
    self.send @name  # <<<<<<<<<<<<<<<<<<<<<<<<<= ERROR HERE!!!!!!
  end
end

class WasRun < TestCase
  attr_accessor :wasRun
  attr_accessor :wasSetUp 

  def initialize(name)
    super(name)
  end
  def set_up
    @wasRun = false
    @wasSetUp = true
  end
  def test_method
    @wasRun = true
  end
end

class TestCaseTest < TestCase
  def set_up
    @test = WasRun.new("test_method")
  end
  def test_running
    @test.run
    puts "test was run? (true expected): #{test.wasRun}"
  end
  def test_set_up
    @test.run
    puts "test was set up? (true expected): #{test.wasSetUp}"
  end
end

TestCaseTest.new("test_running").run 
```

谁能指出我明显的错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-22T19:43:20.960

这是您的打印声明：

```
 puts "test was run? (true expected): #{test.wasRun}" 
```

应该

```
 puts "test was run? (true expected): #{@test.wasRun}" 
```

没有“@”，您调用的是 Kernel#test，它需要 2 个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T18:42:13.117

跳出来的一件事是该`send`方法需要一个标识方法名称的符号，但您正在尝试使用实例变量。

[Object.send 文档](http://www.ruby-doc.org/core/classes/Object.html#M000334)

另外，不应该这样的行：

```
puts "test was run? (true expected): #{test.wasRun}" 
```

是：

```
puts "test was run? (true expected): #{@test.wasRun}" 
```

?

# java - 需要 Drools 项目创意

> ID：116629
> 
> 赞同：2
> 
> 时间：2008-09-22T18:29:52.180
> 
> 标签：java, drools, webmethods

我被要求为我的队友制作一些流口水。只是为了向他们展示如何使用它以及它可能有多大用处。要进行此培训，我首先必须学习 Drools，并且我认为学习它的最佳方法是围绕 Drools 进行的小型项目。

有什么有趣的想法吗？

我对这个项目的想法是做一些 webMethods 流文件验证（只是一些示例验证）。我只会做验证——我们有该文件格式的内部解析器。

但实际上做一些工作的东西会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T22:56:47.890

实际上，我们有一个基于 drools 的项目，你可以尝试模仿它。:-)

假设您有传入的 SMS 消息通过基于 HTTP 的协议到达。HTTP 请求包含 Anumber（发件人的电话号码）、Bnumber（收件人的电话号码）和消息文本。

您的目标是使用 drools 根据消息的内容将消息路由到适当的服务。您应该有一组规则，每条规则都说明如下内容：如果 B 编号是 1792 并且消息文本包含关键字“VIDEO”，则消息应该被定向到视频提供服务。

实际上，我们使用这个精确的设置，一个基于 drools 的路由器，它从 HTTP servlet 线程中获取消息，并根据它们的内容将它们放入 JMS 队列。

做这个项目对你来说会很有趣吗？:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-24T01:49:28.323

我会给你举两个我公司现在正在使用的真实例子。该公司是巴西最大的电子商务公司之一。

1.  Drools 用于对产品进行价格促销和折扣，而用户只需在产品目录中导航。因此，在为用户浏览器呈现响应之前，我们必须应用与价格、分期付款和运费相关的促销。

2.  并且在查看产品时，由于客户地址区域、州、年龄、性别、产品数量、每个类别的产品数量、组合促销、节假日等，可能有可能适用的促销活动。每个促销的应用都会影响整个产品列表，这需要一个新的规则应用程序，直到结账状态稳定。

这真的很有挑战性，但工作得很好。Drools 也在该公司内部的其他环境中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T23:20:52.823

上一个项目的一个例子：

您正在尝试递送包裹，而您想要递送包裹的方式是使用多家运输公司。每家公司将在一个仓库提取包裹并将其运送到另一个仓库，直到最终到达目的地。每家公司都有一个时间表，可能是天数和时间的奇怪组合。例如每周二和周四，除公共假期外，每月的第 5 个周二和第一个周四除外。站点之间的每次旅行都需要一定的时间。给定站点之间的固定路线，给定开始时间，我需要多长时间才能交付此包裹？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-02T20:38:47.693

如果您正在尝试学习 Drools，那么最近还出版了一本相当不错的书。它可以在[http://www.packtpub.com/drools-jboss-rules-5-0-developers-guide/book](http://www.packtpub.com/drools-jboss-rules-5-0-developers-guide/book)找到。Drools 出来时我已经使用了一段时间，但浏览它以学习一些新概念。我的一些队友也读过这本书，并同意它有助于他们理解工具/应用程序。

有一些短暂的下跌。信息组织得不是很好。你必须从头到尾阅读它，否则你肯定会错过一些会阻碍你以后学习的基本概念。此外，示例代码可能有点难以完成。总的来说，虽然我会说这将有助于拉平你的学习曲线。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-02T21:17:37.410

最简单的事情就是玩游戏，比如纸牌。扑克可能有点复杂，但黑桃，老女仆等可能更容易。

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2008-09-22T18:33:03.983

你为什么要训练他们使用你甚至不使用的工具？你打算如何应用它？一个人为的例子就是——人为的。如果您确实需要该技术，请将其应用于该领域。至少这可以作为一个非常粗略的概念证明，看看该技术是否适用于您的系统。

# sql - 在 SQL 报表 (RDL) 中隐藏子报表

> ID：116630
> 
> 赞同：1
> 
> 时间：2008-09-22T18:29:57.220
> 
> 标签：sql, report, rdl

我有一堆打印出来并邮寄给客户的报告。报告顶部是返回地址，左对齐。我被要求在报告中添加一个可选的徽标。此徽标应位于退货地址的左侧。（徽标和所有其他信息都存储在数据库中）。因此，如果徽标存在，您应该看到：

<someimage> <返回地址>

如果不存在徽标，您应该看到：

<退货地址>

许多不同的报告中可能放置了许多不同的徽标，因此为了使生活更轻松，徽标被实现为子报告。子报表只是抓取正确的徽标图像，然后它会自动显示在报表中。

我遇到的问题是这个。如果日志不存在，那么我们希望返回地址左对齐，如上所示。但是发生的情况是，虽然子报表没有显示任何内容，但它仍然占用徽标所在的空间，并且返回地址浮动在页面左侧的右侧几英寸处。

```
 <Return Address> 
```

所以...如果没有要显示的徽标，我是否可以使用/设置使子报告不显示或不占用任何空间的设置？

对不起，希望我说得足够清楚。我对 RDL 完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T19:31:46.087

您应该能够在子报表的可见性上设置一个表达式，这样如果没有徽标，它就不会显示。

这是我方便的 RDL 中的 XML：

```
<Subreport Name="SubReport">
  <ReportName>SubReport</ReportName>
  <Visibility>
    <Hidden>=Not Parameters!ShowLogo.Value</Hidden>
  </Visibility>
</Subreport> 
```

这将针对一个名为 ShowLogo 的布尔参数进行测试，但您可以同样轻松地测试另一个参数的值（可能是 URL 的长度？）。

需要明确的是，在为“隐藏”属性指定表达式时，当您希望元素显示时，您希望它的计算结果为 False。如果您的表达式计算结果为 True，则意味着该元素将被隐藏。

# java - 带有自签名 SSL 证书的“SocketException：未实现未连接的套接字”

> ID：116635
> 
> 赞同：9
> 
> 时间：2008-09-22T18:30:41.150
> 
> 标签：java, ssl

（我已经问过 jmeter-user 邮件列表的相同问题，但我也想在这里尝试 - 所以至少我可以在找到答案后更新它）。

我在使用[JMeter](http://jakarta.apache.org/jmeter/)使用自签名 SSL 证书测试 Tomcat webapp 时遇到问题。JMeter 抛出带有 message 的 SocketException `Unconnected sockets not implemented`。[根据 JMeter 的文档](http://jakarta.apache.org/jmeter/usermanual/get-started.html#opt_ssl)，该应用程序被设计和编写为接受任何证书，自签名或 CA 签名或其他。

有没有人遇到过这个特定的例外？

我试图从服务器导出此证书并将其导入我的本地密钥库（使用*keytool -import -alias tomcat -file*），但结果是相同的。

我还尝试将 javax.net.debug=all 设置为 JVM arg（[JSSE 参考指南](http://java.sun.com/j2se/1.5.0/docs/guide/security/jsse/ReadDebug.html)将此列为调试步骤）；但是，我在任何地方都看不到任何调试输出 - 除了标准输出/错误之外，我是否应该期待这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-04T10:17:42.790

大多数`javax.net.SocketFactory`实现将所有**具有参数**`createSocket()`的方法定义为抽象。但是有一个没有参数的方法，如下所示：**`createSocket()`**

 **```
public Socket createSocket() throws IOException {
   throw new SocketException("Unconnected sockets not implemented");
} 
```

因此，如果您将抽象子类化，`javax.net.SocketFactory`您将被迫用参数覆盖方法，但是很容易错过覆盖`createSocket()`没有参数的方法。因此，如果您的代码调用`createSocket()`. 只需覆盖该方法即可完成。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-07-05T08:15:11.767

我的代码中有同样的问题（与 JMeter 无关）。

我的代码使用自定义的`SocketFactory`. 我发现该类`com.sun.jndi.ldap.Connection`调用了`SocketFactory`using的一些方法`Method.invoke()`。它尝试调用的方法之一是`createSocket()`- 不带参数。

当我将这种方法添加到我的工厂时，一切正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T20:30:31.703

这是一个提示，而不是正确的答案：粗略浏览一下 Google 结果似乎表明该异常通常是由强制使用默认 SSL 套接字工厂的代码引起的，该工厂在调用 createSocket() 时故意抛出异常它。一些结果似乎表明该问题有时是由于 Java 6 中的某个版本中的错误，或者当为密钥库提供了不正确的路径或密码时发生的。

所以，我想说，尝试使用 Java 5。另外，尝试将 JMeter 指向一个使用适当 SSL 证书的知名站点。这样您就可以测试自签名证书假设。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-08T17:06:44.520

尝试搜索 SSLSocketFactory* 的类路径（在 Eclipse 中，我使用 ctrl-shift-t 来执行此操作）。如果找到，请将其设置为 Security 类的属性：

在我的环境中，我发现了以下两个：

```
Security.setProperty("ssl.SocketFactory.provider", "com.ibm.jsse2.SSLSocketFactoryImpl"); 
```

或者

```
Security.setProperty("ssl.SocketFactory.provider", "com.ibm.websphere.ssl.protocol.SSLSocketFactory"); 
```

（或您找到的任何其他课程）

同样`ServerSocketFactory`，如果您需要服务器套接字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-03T18:40:09.677

我在 jdk 1.6.0_10 中遇到了与此类似的 Web 服务问题。

我升级到 1.6.0_16 并且一切正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-01T09:06:28.630

这是我的解决方案（java 1.6）完全删除 TLS_DHE_ 密码，强制覆盖方法 createSocket()

（[https://gist.github.com/hoangthienan/735afb17ffd6955de95a49aa0138dbaa](https://gist.github.com/hoangthienan/735afb17ffd6955de95a49aa0138dbaa)）

# database - 使用 BLOB 进行在线备份的速度

> ID：116639
> 
> 赞同：1
> 
> 时间：2008-09-22T18:31:29.667
> 
> 标签：database, oracle, blob

在 Oracle 8 中，使用数据库中的 BLOB 进行在线备份非常慢。慢，我的意思是用 100MB 的 BLOB 数据备份数据库需要一个多小时。Oracle 承认它很慢，但不会解决这个问题（为了支持支付这么多钱）。有谁知道 Oracle 是否在后续版本中解决了这个问题？此外，在线备份与 BLOB 在 SQL Server 和 MySQL 中的工作速度有多快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-19T17:07:05.520

To answer your question about the speed of online backups of BLOBs in SQL Server, it's the same speed as backing up regular data for SQL 2000/2005/2008 - it's typically limited by the speed of your storage. I usually get over 100mb/sec on my database backups with BLOBs.

Be wary of using backup compression tools with those, though - if the BLOB is binary-style data that's heavily random, then you'll waste CPU cycles trying to compress the data, and compression can make the backup slower instead of faster.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T18:52:26.183

我过去遇到过这个问题，我们发现的唯一体面的解决方法是确保 LOB 位于它们自己的表空间中，并对它们使用不同的备份策略，或者切换到使用 BFILE 类型。您是否可以使用 BFILE 将取决于您如何使用 LOB。

BFILE 的一些使用信息：

[http://download-uk.oracle.com/docs/cd/B10501_01/java.920/a96654/oralob.htm#1059942](http://download-uk.oracle.com/docs/cd/B10501_01/java.920/a96654/oralob.htm#1059942)

请注意，BFILE 存在于 Oracle 之外的文件系统上，因此您需要在正常 Oracle 备份之外的进程中备份它们。在一个项目中，我们刚刚安排了 rsync 到异地备份。另外需要注意的是，您不能通过 JDBC 创建/更新 BFILE，但可以读取它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T20:24:39.410

根据 BLOB 的大小，确保将它们适当地内联/外联存储。

请参阅[http://www.dba-oracle.com/t_table_blob_lob_storage.htm](http://www.dba-oracle.com/t_table_blob_lob_storage.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-23T07:16:39.717

您可以将您正在创建的导出文件和 Oracle 表空间放在不同的磁盘上吗？您的 I/O 吞吐量可能是限制因素...？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T18:41:33.900

我使用 Redgate 的 SQL Backup for SQL Server —— 它速度快得离谱，即使是我的 BLOB 数据。

我保留了我进行 EDI 处理的每个文件的副本，因此虽然它们不是很大，但它们数量众多，而且是 BLOB。我有超过 100Megs 的这些文本文件。

重要的是要注意 Redgate 的 SQL 备份只是标准 SQL 备份的前端......它基本上为您提供了额外的管理功能，但仍然使用 SQL Server 备份引擎。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-09T15:08:02.360

8i 上的 exp 很慢，但没有你描述的那么多。我已经在 10g 的几分钟内备份了千兆字节的 blob ..（到磁盘 - 使用 expdp）

# java - Red Hat Linux 中的低 Java 单进程线程限制

> ID：116640
> 
> 赞同：8
> 
> 时间：2008-09-22T18:32:00.210
> 
> 标签：java, linux, redhat

我在使用 Java 1.6（1.6.0_02 或 1.6.0_04）运行 Red Hat Linux（内核版本为 2.4.21-37.ELsmp）的测试机器上遇到问题。问题是，一旦在单个线程组中创建了一定数量的线程，操作系统就不愿意或无法再创建。

这似乎特定于 Java 创建线程，因为 C 线程限制程序能够创建大约 1.5k 线程。此外，Java 1.4 JVM 不会发生这种情况......它可以创建超过 1.4k 个线程，尽管它们显然在操作系统方面的处理方式不同。

在这种情况下，它切断的线程数仅为 29 个线程。这可以通过一个简单的 Java 程序进行测试，该程序只创建线程，直到出现错误，然后打印它创建的线程数。错误是一个

```
java.lang.OutOfMemoryError：无法创建新的本地线程
```

这似乎不受其他进程或用户使用的线程数或系统当时使用的内存总量等因素的影响。Xms、Xmx 和 Xss 等 JVM 设置似乎也没有改变任何东西（这是意料之中的，考虑到问题似乎与本机 OS 线程创建有关）。

“ulimit -a”的输出如下：

```
核心文件大小（块，-c）0
数据段大小 (kbytes, -d) 无限制
文件大小（块，-f）无限制
最大锁定内存 (kbytes, -l) 4
最大内存大小 (kbytes, -m) 无限制
打开文件 (-n) 1024
管道大小（512 字节，-p）8
堆栈大小（千字节，-s）10240
cpu时间（秒，-t）无限制
最大用户进程 (-u) 7168
虚拟内存 (kbytes, -v) 无限制

```

用户进程限制似乎不是问题。搜索可能出错的信息并没有太多，但[这篇文章](http://blogs.oracle.com/gverma/2008/03/redhat_linux_kernels_and_proce_1.html)似乎表明，至少有一些 Red Hat 内核将进程限制为为堆栈分配 300 MB 内存，并且每个线程为堆栈分配 10 MB 内存，似乎就像问题可能存在一样（尽管它似乎也很奇怪且不太可能）。

我尝试使用“ulimit -s”更改堆栈大小来测试这一点，但除 10240 和 JVM 之外的任何值都不会以以下错误开始：

```
初始化虚拟机时出错
无法创建 VM 线程。系统资源不足。
```

我通常可以绕过Linux，但我对系统配置真的不太了解，而且我还没有找到专门解决这种情况的任何东西。任何有关可能导致此问题的系统或 JVM 设置的想法都将不胜感激。

**编辑：运行**[plinth](https://stackoverflow.com/questions/116640/low-single-process-thread-limit-in-red-hat-linux#116696)提到的线程限制程序，在尝试创建第 1529 个线程之前没有失败。

使用 1.4 JVM 时也不会出现此问题（1.6.0_02 和 1.6.0_04 JVM 会出现此问题，目前无法使用 1.5 JVM 进行测试）。

我正在使用的线程测试代码如下：

```
public class ThreadTest {

   public static void main(String[] pArgs) throws Exception {

      try {
         // keep spawning new threads forever
         while (true) {
            new TestThread().start();
         }
      }
      // when out of memory error is reached, print out the number of
      // successful threads spawned and exit
      catch ( OutOfMemoryError e ) {
         System.out.println(TestThread.CREATE_COUNT);
         System.exit(-1);
      }
   }

   static class TestThread extends Thread {
      private static int CREATE_COUNT = 0;
      public TestThread() {
         CREATE_COUNT++;
      }
      // make the thread wait for eternity after being spawned
      public void run() {
         try {
            sleep(Integer.MAX_VALUE);
         }
         // even if there is an interruption, dont do anything
         catch (InterruptedException e) {
         }
      }
   }
} 
```

如果您使用 1.4 JVM 运行它，它将在无法创建更多线程并需要 kill -9 时挂起（至少它对我有用）。

**更多编辑：**

事实证明，有问题的系统使用的是 LinuxThreads 线程模型，而另一个运行良好的系统使用的是 NPTL 模型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T18:43:17.280

你看过[这个资源](http://people.redhat.com/alikins/system_tuning.html#threads)吗？它指出您应该能够运行 thread-limit 以找到最大线程数，并可以通过编译 glibc 来调整它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-04T19:09:56.010

使用 NPTL 线程将内核更新到较新的版本（2.6.something）修复了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T21:11:46.177

这是 Ubuntu Linux (1GB RAM)

```
dsm@localhost:~$ javac ThreadTest.java 
dsm@localhost:~$ java ThreadTest 
8113
dsm@localhost:~$ java -version
java version "1.6.0_07"
Java(TM) SE Runtime Environment (build 1.6.0_07-b06)
Java HotSpot(TM) Client VM (build 10.0-b23, mixed mode, sharing)
dsm@localhost:~$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-23T00:33:32.523

你能用 JRockit JVM 试试吗？IIRC，它的线程模型与普通的 Sun JVM 不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-22T10:57:56.690

中的设置`/etc/security/limits.d/90-nproc.conf`可能会覆盖您的`/etc/security/limits.conf`设置。这可能会导致系统以不同的方式运行，如图所示`ulimit -u`。

[https://bugzilla.redhat.com/show_bug.cgi?id=823030](https://bugzilla.redhat.com/show_bug.cgi?id=823030)

# project-management - 项目管理软件

> ID：116643
> 
> 赞同：4
> 
> 时间：2008-09-22T18:32:13.283
> 
> 标签：project-management

我对类似于 MS Project 的项目管理软件感兴趣。该项目是对我的软件的认真重建。我们已经有一个错误管理系统，但我需要跟踪项目进度。

我不太喜欢基于 Web 的应用程序，因为数据要么托管在异地，要么我需要设置自己的服务器。

我喜欢 MS Project，但它似乎没有将估计时间与实际时间进行比较，并用它来按比例计算未来的工作估计。

我想要一个甘特图和日历视图。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T18:33:40.953

请尝试[开放式工作台。](https://sourceforge.net/projects/openworkbench/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T18:33:58.957

这是维基百科的[概要](http://en.wikipedia.org/wiki/List_of_project_management_software)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T18:38:54.297

从 Ben Hoffstein 提供的列表中，有两个引起了我的注意[——eGroupWare](http://www.egroupware.org/)和[Project Pier](http://www.projectpier.org/)。尽管这两个可能无法满足您的需求，但它们似乎值得考虑我的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T18:38:35.653

我以前用过 primavera，我认为它可以进行上述比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T18:48:25.070

我记得 Joel 发布了关于新的 Fogbugz [Evidence Based Scheduling](http://www.fogcreek.com/FogBugz/learnmore.html?section=PredictShipDates)的帖子。似乎它可能是您正在寻找的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T21:59:55.483

它是基于 Web 的，但[Jira](http://www.atlassian.com/software/jira/)可以跟踪时间，并且可以与[GreenHopper](http://www.greenpeppersoftware.com/en/products/GreenHopper/)插件结合以提供敏捷风格的规划板和燃尽图。但是，它不会为您提供速度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-23T10:12:19.200

我还使用了开源工具[OpenProj](http://www.openproj.org/openproj)，非常适合我。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-15T15:23:29.757

因为我是一个单人项目，所以很明显对我来说最好的解决方案是一个[Excel 工作簿](http://xrw.bc.ca/download/so/plan.xls)，它可以跟踪时间管理并按比例分配剩余任务。Recalculate 宏更新统计信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-12-18T19:25:33.160

试试船员！[http://www.devmynd.com/crew](http://www.devmynd.com/crew)

# c++ - 数据访问对象模式实现

> ID：116646
> 
> 赞同：4
> 
> 时间：2008-09-22T18:33:03.733
> 
> 标签：c++, design-patterns, oop

我想在 C++ 中实现数据访问对象模式，但最好不使用多重继承和/或提升（我的客户不喜欢）。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T18:46:36.837

OTL (otl.sourceforge.net) 是一个优秀的 C++ 数据库库。它是一个单独的包含文件，因此没有与 Boost 相关的所有复杂性（正确或错误！）。

就 DAO 本身而言，您有很多选择。隐藏数据库实现的最简单方法就是使用 C++ 样式接口并在特定实现中实现数据访问层。

```
类 MyDAO {
  // 纯虚函数来访问数据本身
}

类 MyDAOImpl ：公共 MyDAO {
  // 从数据库中获取数据的实现
}

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T23:30:34.050

对数据访问对象设计模式的快速谷歌搜索将在第一页上返回至少 10 个有用的结果。其中最常见的是 Jeff Foster 已经展示的抽象界面设计。您可能希望添加的唯一内容是创建对象的数据访问对象工厂。

我能找到的大部分代码都不错的例子都是用 Java 编写的，这是 Java 中的一种常见设计模式，但它们仍然与 C++ 非常相关，你可以很容易地使用它们。

[这是一个很好的链接](http://www.dofactory.com/patterns/PatternAbstract.aspx)，它很好地描述了抽象工厂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-25T20:27:27.397

我首选的数据访问抽象是[存储库模式](http://martinfowler.com/eaaCatalog/repository.html)。

# java - JAVA 中的 cURL 等效项

> ID：116650
> 
> 赞同：43
> 
> 时间：2008-09-22T18:34:18.440
> 
> 标签：java, php, authentication, curl

我的任务是为开源`JAVA`应用程序编写身份验证组件。我们有一个内部身份验证小部件，它使用`https`. 我有一些示例`php`代码可以访问`widget`用于`cURL`处理传输的。

我的问题是是否有`cURL`to的端口`JAVA`，或者更好的是，什么基础包能让我足够接近来处理任务？

**更新**：

简而言之，我想在 JAVA 中复制的代码：

```
$cp = curl_init();
$my_url = "https://" . AUTH_SERVER . "/auth/authenticate.asp?pt1=$uname&pt2=$pass&pt4=full";
curl_setopt($cp, CURLOPT_URL, $my_url);
curl_setopt($cp, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($cp);
curl_close($cp); 
```

[Heath](https://stackoverflow.com/questions/116650/curl-equivalent-in-java#116725)，我认为您走在正确的轨道上，我想我最终将使用 HttpsURLConnection ，然后从响应中挑选出我需要的东西。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-09-22T18:48:05.897

省略异常处理：

```
HttpURLConnection con = (HttpURLConnection) new URL("https://www.example.com").openConnection();
con.setRequestMethod("POST");
con.getOutputStream().write("LOGIN".getBytes("UTF-8"));
con.getInputStream(); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-09-22T18:58:41.223

我会使用[Commons Http Client](http://hc.apache.org/httpclient-3.x/)。项目中有一个contrib类可以让你使用ssl。

我们正在使用它，它运行良好。

编辑：这是[SSL 指南](http://hc.apache.org/httpclient-3.x/sslguide.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-16T23:01:40.753

# 汤

[jsoup](http://www.jsoup.org/)库获取 URL 作为其 HTML 抓取和解析任务的第一步。

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T18:38:25.077

尝试使用[Apache Commons Net](http://commons.apache.org/net/)获取网络协议。自由！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T18:44:13.877

如果您需要比通过 Commons Net 提供的功能更多的功能，您也可以尝试 Apache 项目中的 [ [http://hc.apache.org/](HTTP Components)。](http://hc.apache.org/](HTTP)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-02T07:22:34.533

您可以尝试 curl-to-java lib 将 curl php 代码转换为 java 代码[https://github.com/jeffreyning/curl-to-java](https://github.com/jeffreyning/curl-to-java)演示像这样

```
public Object curl(String url, Object postData, String method) {

CurlLib curl = CurlFactory.getInstance("default");
ch = curl.curl_init();
curl.curl_setopt(ch, CurlOption.CURLOPT_CONNECTTIMEOUT, 1000);
curl.curl_setopt(ch, CurlOption.CURLOPT_TIMEOUT, 5000);
curl.curl_setopt(ch, CurlOption.CURLOPT_SSL_VERIFYPEER, false);
curl.curl_setopt(ch, CurlOption.CURLOPT_SSL_VERIFYHOST, false);
String postDataStr = "key1=v1";

curl.curl_setopt(ch, CurlOption.CURLOPT_CUSTOMREQUEST, "POST");
curl.curl_setopt(ch, CurlOption.CURLOPT_POSTFIELDS, postDataStr);
curl.curl_setopt(ch, CurlOption.CURLOPT_URL, "https://xxxx.com/yyy");
Object html = curl.curl_exec(ch);
Object httpCode = curl.curl_getinfo(ch, CurlInfo.CURLINFO_HTTP_CODE);
if (httpCode != null && 200 == Integer.valueOf(httpCode.toString())) {
    return null;
}
return html;
} 
```

# haskell - 用于生成式编程的非 C++ 语言？

> ID：116654
> 
> 赞同：24
> 
> 时间：2008-09-22T18:34:53.573
> 
> 标签：haskell, lisp, clojure, metaprogramming, boo

C++ 可能是最流行的[静态元编程](https://stackoverflow.com/questions/112277/best-intro-to-c-static-metaprogramming)语言，而[Java 不支持它](https://stackoverflow.com/questions/112320/is-static-metaprogramming-possible-in-java)。

除了 C++ 之外，还有其他语言支持生成式编程（创建程序的程序）吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-09-22T18:36:56.487

模板样式元编程的替代方案是您在各种 Lisp 实现中看到的宏样式。如果您对带有在 JVM 上运行的宏的 Lisp 感兴趣，我建议您下载[Paul Graham 的*On Lisp*](http://www.paulgraham.com/onlisp.html)并查看[Clojure 。](http://clojure.org)

Lisp 中的宏比 C/C++ 风格强大得多，并且本身就构成了一种语言——它们是为元编程设计的。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-09-23T10:45:41.990

让我列出**一些有关****元编程**如何**在 lisp**（或[scheme](http://schemers.org/)或[slate](http://slate.tunes.org/documentation.html)或选择您最喜欢的“动态”语言）中工作的重要细节：

*   在 lisp 中进行元编程时，您**不必处理两种语言**。元级代码使用与其生成的对象级代码相同的语言编写。元编程不仅限于两个层次，而且在大脑上也更容易。
*   在 lisp 中，您**可以在运行时使用编译器**。事实上，编译时/运行时的区别在那里感觉非常人为，并且非常受制于您放置观点的位置。在 lisp 中，只需函数调用，您就可以将函数编译为机器指令，从那时起您可以将其用作第一类对象；即它们可以是未命名的函数，您可以将其保存在局部变量或全局哈希表等中...
*   **lisp 中的宏**非常简单：一堆函数填充在哈希表中并提供给编译器。对于编译器将要编译的每种形式，它都会查阅该哈希表。如果它找到一个函数，则在编译时以原始形式调用它，并代替原始形式编译此函数返回的形式。（模一些不重要的细节）所以 lisp 宏**基本上是编译器的插件**。
*   在 lisp 中编写一个评估 lisp 代码的 lisp 函数大约需要两页代码（这通常称为**eval**）。在这样的功能中，您可以在元级别上引入您想要的任何新规则。（让它运行得很快需要一些努力......与引导一种新语言大致相同...... :)

**您可以使用 lisp 元编程作为用户库实现的**随机示例（这些是常见 lisp 库的实际示例）：

*   **用定界延续**扩展语言(hu.dwim.delico)
*   实现一个可以在 javascript 中使用的**js-to-lisp-rpc宏（从 lisp 生成）。**它扩展为 js/lisp 代码的混合体，自动发布（在 http 请求中）所有引用的局部变量，在服务器端对其进行解码，在服务器上运行 lisp 代码主体，并将返回值返回给 javascript边。
*   将类似回溯的序言添加到与“正常”lisp 代码非常无缝集成的语言中（参见尖叫者）
*   普通 lisp的[XML 模板扩展](https://stackoverflow.com/questions/106058/practical-example-of-lisps-flexibility#109131)（包括作为lisp 解析器插件的**阅读器宏**示例）
*   大量的小型 DSL，例如[*循环*](http://www.lispworks.com/reference/HyperSpec/Body/m_loop.htm)或[*迭代*](http://common-lisp.net/project/iterate/)，以便于循环

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-09-22T19:49:04.627

模板元编程本质上是对模板机制的滥用。我的意思是，你基本上可以从一个计划外的副作用中得到你所期望的——这是一团糟，而且（尽管工具越来越好）一个真正的痛苦，因为语言没有支持你做这件事（我应该注意，我在这方面的最新经验已经过时了，因为我基本上放弃了这种方法。不过，我还没有听说有任何重大进展）

在大约 98 年左右解决这个问题是促使我寻找更好的解决方案的原因。我可以编写依赖它的有用系统，但它们是地狱般的。闲逛最终让我找到了 Common Lisp。当然，模板机制是图灵完备的，但是 intercal 也是如此。

Common Lisp 可以“正确”地进行元编程。当你做这件事时，你拥有语言的全部力量，没有特殊的语法，而且因为语言是非常动态的，你可以用它做更多的事情。

当然还有其他选择。我用过的任何其他语言都没有比 Lisp 更好的元编程，这就是我将它用于研究代码的原因。虽然有很多原因你可能想尝试其他东西，但这一切都将是权衡。你可以看看 Haskell/ML/OCaml 等。许多函数式语言都有一些接近 Lisp 宏的功能。您可以找到一些针对 .NET 的东西，但它们都非常边缘化（就用户群等而言）。工业使用语言的大玩家都没有这样的东西，真的。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-09-22T18:37:08.917

[Nemerle](http://nemerle.org "内梅尔")和[Boo](http://boo.codehaus.org "嘘")是我个人的最爱。Nemerle 有一个非常优雅的宏语法，尽管它的文档很差。Boo 的文档非常好，但它的宏不太优雅。然而，两者都工作得非常好。

两者都以 .NET 为目标，因此它们可以轻松地与 C# 和其他 .NET 语言——甚至是 Java 二进制文件（如果您使用 IKVM）进行互操作。

编辑：澄清一下，我指的是 Lisp 意义上的宏，而不是 C 的预处理器宏。这些允许在编译时定义新语法和繁重的元编程。例如，Nemerle 附带的宏将在编译时针对您的 SQL 服务器验证您的 SQL 查询。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-07-28T14:01:48.817

Nim 是一种相对较新的编程语言，它广泛支持静态元编程并生成高效（类似 C++）的编译代码。

[http://nim-lang.org/](http://nim-lang.org/)

它支持编译时函数评估、通过宏进行类似 lisp 的 AST 代码转换、编译时反射、可以用任意值参数化的泛型类型以及可用于创建用户定义的高级类型感知的术语重写窥孔优化。甚至可以在编译过程中执行可能影响代码生成的外部程序。例如，考虑与本地运行的数据库服务器通信，以验证代码中的 ORM 定义（通过某些 DSL 提供）与数据库的模式匹配。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-22T19:22:40.867

“ [D”编程语言](http://d-programming-language.org/ "D 编程语言")类似于 C++，但具有更好的元编程支持。这是一个仅使用编译时元编程编写的光线追踪器示例：

[跟踪](http://h3.team0xf.com/ctrace/)

此外，还有一个名为“Concept GCC”的 gcc 分支，它支持 C++ 不支持的元编程结构（至少目前还没有）。

[海合会概念](http://www.generic-programming.org/software/ConceptGCC/ "海合会概念")

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-23T17:51:53.557

Common Lisp 支持以多种不同方式编写程序的程序。

1）程序数据和程序“抽象语法树”是统一的（S-表达式！）

2)`defmacro`

3) 阅读器宏。

4) 澳门币

其中，真正令人兴奋的是MOP。阅读“元对象协议的艺术”。我保证，它会为你改变一切！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-22T18:38:04.487

我推荐[Haskell](http://www.haskell.org/)。这是[一篇](http://research.microsoft.com/~simonpj/papers/meta-haskell/)描述其编译时元编程功能的论文。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-11-19T08:01:28.773

Haskell 中的大量工作：领域特定语言 (DSL)、可执行规范、程序转换、部分应用程序、分阶段计算。几个链接可以帮助您入门：

*   [http://haskell.readscheme.org/appl.html](http://haskell.readscheme.org/appl.html)
*   [http://www.cse.unsw.edu.au/~dons/papers/SCKCB07.html](http://www.cse.unsw.edu.au/~dons/papers/SCKCB07.html)
*   [http://www.haskell.org/haskellwiki/Research_papers/Domain_specific_languages](http://www.haskell.org/haskellwiki/Research_papers/Domain_specific_languages)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-22T19:29:56.420

'元编程'对于这个特定的特性来说确实是一个坏名字，至少在你讨论一种以上的语言时，因为这个特性只需要一小部分语言：

*   静止的
*   编译成机器语言
*   在编译时对性能进行了高度优化
*   可使用用户定义的数据类型进行扩展（C++ 中的 OOP）
*   非常受欢迎

取出其中任何一个，以及“静态元编程”，都是没有意义的。因此，如果任何远程主流语言都有类似的东西，就像在 C++ 上所理解的那样，我会感到惊讶。

当然，动态语言和几种函数式语言支持完全不同的概念，也可以称为元编程。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-10-19T10:03:50.737

ML 系列语言是专门为此目的而设计的。OCaml 最著名的成功案例之一是用于高性能 FFT的[FFTW库，它是几乎完全由 OCaml 程序生成的 C 代码。](http://fftw.org)

干杯，乔恩·哈罗普。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-06-14T04:48:17.497

大多数人试图找到一种具有“终极反射”的语言来进行自我检查，并找到一种类似“eval”的语言来具体化新代码。这样的语言很难找到（LISP 是一个主要的反例），它们当然不是主流。

但另一种方法是使用一组可以检查、生成和操作程序代码的工具。Jackpot 就是这样一个专注于 Java 的工具。[http://jackpot.netbeans.org/](http://jackpot.netbeans.org/)

我们的 DMS 软件再造工具包就是这样一个工具，适用于 C、C++、C#、Java、COBOL、PHP、Javascript、Ada、Verilog、VHDL 和各种其他语言。（它使用生产质量的前端使其能够阅读所有这些语言）。更好的是，它可以同时使用多种语言做到这一点。请参阅[http://www.semdesigns.com/Products/DMS/DMSToolkit.html](http://www.semdesigns.com/Products/DMS/DMSToolkit.html)

DMS 之所以成功，是因为它提供了一种常规方法和支持基础设施，可以完全访问作为 AST 的程序结构，并且在大多数情况下，附加数据，如符号表、类型信息、控制和数据流分析，都是执行复杂程序操作所必需的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-22T18:36:43.833

Lisp 支持一种“元编程”形式，尽管与 C++ 模板元编程的意义不同。此外，您的术语“静态”在这种情况下可能意味着不同的东西，但 Lisp 也支持静态类型，如果这就是您的意思的话。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-22T19:33:44.493

元语言 (ML)，当然：[http ://cs.anu.edu.au/student/comp8033/ml.html](http://cs.anu.edu.au/student/comp8033/ml.html)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-16T09:31:23.113

你使用什么语言并不重要——它们中的任何一个都能够进行异构生成元编程。**使用任何动态语言**，例如 Python 或 Clojure，或者如果您是类型爱好者，则使用 Haskell，并用这种宿主语言**编写模型，这些模型***能够将它们自己编译成*您想要或被您的团队/雇主强制使用的一些主流语言。

我发现对象图是内部模型表示的一个很好的模型。该图可以在单个节点中混合属性和有序子图，这是属性文法和 AST 所固有的。因此，对象图解释可以成为宿主语言和目标语言之间的有效层，并且可以充当在数据结构上定义的某种无语法语言。

最接近的模型是 AST：将 Python（宿主语言）目标中的 AST 树描述为 C++ 语法（目标语言）：

```
# from metaL import *
class Object:
    def __init__(self, V):
        self.val = V
        self.slot = {}
        self.nest = []

class Module(Object):
    def cc(self):
        c = '// \ %s\n' % self.head(test=True)
        for i in self.nest:
            c += i.cc()
        c += '// / %s\n' % self.head(test=True)
        return c

hello = Module('hello')

# <module:hello> #a04475a2

class Include(Object):
    def cc(self):
        return '#include <%s.h>\n' % self.val

stdlib = Include('stdlib')
hello // stdlib

# <module:hello> #b6efb657
#     0: <include:stdlib> #f1af3e21

class Fn(Object):
    def cc(self):
        return '\nvoid %s() {\n}\n\n' % self.val

main = Fn('main')
hello // main

print(hello.cc()) 
```

```
// \ <module:hello>
#include <stdlib.h>

void main() {
}

// / <module:hello> 
```

但是您不受构造对象图的抽象级别的限制：您不仅可以自由添加自己的类型，而且对象图可以解释自己，因此可以像 Lisp 中的列表一样修改自己。

# python - 如何从 python 包创建 osx 应用程序/dmg？

> ID：116657
> 
> 赞同：24
> 
> 时间：2008-09-22T18:35:28.547
> 
> 标签：python, macos, packaging

我想从 python 包创建一个 mac osx 应用程序，然后将其放入磁盘映像中。

因为我从包中加载了一些资源，所以包不应该**驻留**在 zip 文件中。

生成的磁盘映像应显示背景图片以“拖到此处 -> 应用程序”进行安装。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-22T19:19:30.207

I don't know the correct way to do it, but this manual method is the approach I've used for simple scripts which seems to have preformed suitably.

I'll assume that whatever directory I'm in, the Python files for my program are in the relative `src/` directory, and that the file I want to execute (which has the proper shebang and execute permissions) is named `main.py`.

```
$ mkdir -p MyApplication.app/Contents/MacOS
$ mv src/* MyApplication.app/Contents/MacOS
$ cd MyApplication.app/Contents/MacOS
$ mv main.py MyApplication

```

At this point we have an application bundle which, as far as I know, should work on any Mac OS system with Python installed (which I think it has by default). It doesn't have an icon or anything, that requires adding some more metadata to the package which is unnecessary for my purposes and I'm not familiar with.

To create the drag-and-drop installer is quite simple. Use Disk Utility to create a New Disk Image of approximately the size you require to store your application. Open it up, copy your application and an alias of `/Applications` to the drive, then use View Options to position them as you want.

The drag-and-drop message is just a background of the disk image, which you can also specify in View Options. I haven't done it before, but I'd assume that after you whip up an image in your editor of choice you could copy it over, set it as the background and then use `chflags hidden` to prevent it from cluttering up your nice window.

I know these aren't the clearest, simplest or most detailed instructions out there, but I hope somebody may find them useful.

# javascript - FCKeditor 的最大字符数

> ID：116658
> 
> 赞同：1
> 
> 时间：2008-09-22T18:36:27.250
> 
> 标签：javascript, wysiwyg, fckeditor

您是否确定了[FCKEditor](http://www.fckeditor.net/)中允许的最大字符数？

我好像撞墙了。它将显示要编辑的文本，但不会将更改发送回服务器 - 只有原始文本会发送回服务器。我假设更改的文本不会复制回隐藏的输入字段。

仅在大量文本时才会出现此问题。较小长度的文本就可以了。

这可能是编辑器、javascript 或浏览器本身的限制。

我意识到这可能更适合向 FCKEditor 项目报告错误，但堆栈溢出社区似乎真的反应迅速并且愿意提供帮助。

编辑：我应该澄清我所说的大的意思。包含 60,000 个字符的文本字段给我们带来了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T18:38:13.080

我们还没有——我们将它用于 Web 内容管理系统，并且有一些大页面可以很好地处理。您的响应大小缓冲区可能有限制，或者您的网络服务器上的某些内容....

# javascript - Firebug 1.2 document.cookie 与 Web Developer 不一致

> ID：116682
> 
> 赞同：1
> 
> 时间：2008-09-22T18:41:12.620
> 
> 标签：javascript, firebug

我在这里有一个 URI，其中通过控制台进行的简单 document.cookie 查询会导致显示三个 cookie。我也使用以下简单代码验证了这一点：

```
var cookies = document.cookie.split(';'); 
console.log(cookies.length); 
```

变量 cookie 确实排在第 3 位。另一方面，Web Developer 表示总共使用了 8 个 cookie。

我有点困惑，相信哪个是不准确的。我相信最好的解决方案可能只是在不受 Firebug 影响的情况下重复上面的代码。但是，我想知道是否有人可能会建议一个更聪明的替代方案来破译哪个工具给我的信息不准确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T19:34:28.687

一个原因可能是其他 5 个 cookie 是 HTTPONLY：

> [http://msdn.microsoft.com/en-us/library/ms533046.aspx](http://msdn.microsoft.com/en-us/library/ms533046.aspx)
> 
> 如果响应标头中包含 HttpOnly 属性，则当用户浏览到有效域中的网站时仍会发送 cookie。无法通过 Internet Explorer 6 SP1 中的脚本访问 cookie，即使是最初设置 cookie 的网站也是如此。这意味着即使存在跨站点脚本错误，并且用户被诱骗点击利用此错误的链接，Windows Internet Explorer 也不会将 cookie 发送给第三方。信息是安全的。

Firefox 也尊重这个标志（从 v2.0.0.5 开始）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-23T12:01:57.207

我很确定 Web 开发人员工具栏会显示域和子域的 cookie。

所以它会显示cookies

abc.xyz.com xyz.com

您是否在任一域的页面上

# security - 我应该使用什么算法将密码散列到我的数据库中？

> ID：116684
> 
> 赞同：22
> 
> 时间：2008-09-22T18:41:33.713
> 
> 标签：security, encryption, passwords, hash

有没有*什么东西*是不容易破碎的？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-09-22T18:51:23.313

> *这个 2008 年的答案现在危险地过时了。*SHA（所有变体）现在很容易破解，现在（截至 2013 年 1 月）最佳实践是使用密钥拉伸散列（如 PBKDF2）或理想情况下是 RAM 密集型散列（如[Bcrypt](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage)）并添加每个用户的盐也。
> 
> 第2、3、4点还是值得关注的。
> 
> 有关更多信息，请参阅[IT 安全 SE 网站](http://security.stackexchange.com)。

* * *

2008年原始答案：

1.  使用经过验证的算法。SHA-256 在数据库中使用 64 个字符，但在列上的索引没有问题，它是经过验证的哈希，比 MD5 和 SHA-1 更可靠。作为标准安全套件的一部分，它也以大多数语言实现。但是，如果您使用 SHA-1，请不要感到难过。

2.  不要只是散列密码，还要将其他信息放入其中。您经常使用“用户名：密码：salt”或类似的哈希值，而不仅仅是密码，但如果您使用它，那么您会更难运行字典攻击。

3.  安全是一个艰难的领域，不要认为你可以发明自己的算法和协议。

4.  不要写像“[AddUser] Hash of GeorgeBush:Rep4Lyfe:ASOIJNTY is xyz”这样的日志

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-09-23T18:58:08.250

密码学和密码存储的第一条规则是“*不要自己发明*”，但如果你必须这样做，这是你必须做的绝对最低限度的安全措施：

**基本规则：**

1.  永远不要存储纯文本密码（这意味着您也永远不能显示或传输它。）
2.  切勿通过不安全的线路（纯文本、编码或散列）传输存储的密码表示。
3.  *速度是你的敌人。*
4.  随着硬件和密码分析的改进，定期重新分析和*改进您的流程。*
5.  密码学和过程是解决方案的一*小*部分。
6.  故障点包括：存储、客户端、传输、处理、用户、法律保证、入侵和管理员。

脚步：

1.  强制执行一些合理的最低密码要求。
2.  经常更改密码。
3.  使用你能得到的最强哈希——这里建议使用**SHA-256 。**
4.  将密码与*固定盐*相结合（整个数据库相同）。
5.  将上一步的结果与存储并附加到该记录 的*唯一盐（可能是用户名、记录 id、guid、长随机数等）结合起来。*
6.  多次运行哈希算法——*比如 1000+ 次*。理想情况下，每次在前一个哈希中都包含不同的盐。速度是你的敌人，多次迭代会降低速度。每隔一段时间就会将迭代加倍（这需要捕获一个新的哈希值——下次他们更改密码时再做一次。）

哦，除非您正在运行 SSL 或其他一些线路安全，否则不要让您的密码以纯文本形式传输。如果您只是将来自客户端的最终哈希值与您存储的哈希值进行比较，那么也不允许以纯文本形式传输它。您需要向客户端发送一个随机数（使用一次的数字），并让他们使用生成的哈希（使用上述步骤）哈希对其进行哈希处理，然后他们将其发送给您。在服务器端，您运行相同的进程并查看两个一次性哈希是否匹配。然后处理掉它们。有一种更好的方法，但这是最简单的方法。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-09-22T18:43:43.037

CodingHorror 去年有[一篇很棒的文章](https://en.wikipedia.org/wiki/Bcrypt)。文末推荐的是[bcrypt。](https://en.wikipedia.org/wiki/Bcrypt)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-22T19:13:44.010

上述算法是加密安全的散列算法（但 MD5 现在不被认为是安全的）。

但是，有一些算法是专门为从密码中派生密钥而创建的。这些是[关键派生函数](http://en.wikipedia.org/wiki/Key_derivation_function)。它们是为与对称密码一起使用而设计的，但它们也适用于存储密码。[例如， PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)使用盐、大量迭代和良好的散列函数。如果你有一个库，什么实现它（例如.NET），我认为你应该考虑它。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-22T18:45:24.967

使用强大的加密哈希函数，如 MD5 或 SHA1，但请确保使用良好的[salt](http://en.wikipedia.org/wiki/Salt_(cryptography))，否则您将容易受到[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)攻击。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-22T18:55:15.630

向哈希密码值添加[唯一的盐](http://aspnet.4guysfromrolla.com/articles/112002-1.aspx)（将盐值存储在数据库中）。当使用[独特的盐](http://www.matasano.com/log/958/enough-with-the-rainbow-tables-what-you-need-to-know-about-secure-password-schemes/)时，使用比 SHA1 或 MD5 更安全的算法的好处并不是真正必要的（在这一点上，它是一个增量改进，而使用盐是一个巨大的改进）。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-22T18:57:24.330

**2013 年 1 月更新**

最初的答案是从 2008 年开始的，在过去的 5 年里事情发生了一些变化。云计算和强大的并行处理器图形卡的现成可用性意味着密码多达 8 或 9 个字符散列为 MD5 或 SHA1 现在可以轻松破解。

现在长盐是必须的，像 SHA512 这样更硬的东西也是必须的。

然而，所有 SHA 变体哈希都是为通信加密而设计的——消息来回加密，每条消息都被加密，因此它们被设计为*快速*。

在密码散列世界中，这种设计是一个很大的缺点，因为生成散列的速度越快，生成大量散列所需的时间就越少。

像 SHA512 这样的快速哈希每秒可以生成数百万甚至数十亿次。投入廉价的并行处理，密码的每一种可能的排列都成为绝对必须的。

按键拉伸是解决此问题的一种方法。密钥拉伸算法（如 PBKDF2）应用更快的哈希（如 SHA512）数千次，通常导致哈希生成需要 1/5 秒左右。登录的人不会注意到，但如果你每秒只能生成 5 个哈希值，那么暴力攻击会更加困难。

其次，应该*总是*有一个每个用户的随机盐。这可以随机生成为哈希的前*n*个字节（然后将其剥离并添加到密码文本中以在构建哈希进行比较之前进行检查）或作为额外的 DB 列。

所以：

> 我应该使用什么算法将密码散列到我的数据库中？

*   *键拉伸*以减慢哈希生成。我可能会选择 PBKDF2。

*   *每用户盐*意味着每个用户的新攻击，并且一些工作弄清楚如何获得盐。

计算能力和可用性呈指数级增长——这些规则很可能在 4 年内再次改变。如果您需要面向未来的安全性，我会研究 bcrypt/scrypt 风格的哈希 - 这些采用较慢的密钥拉伸算法并添加一个使用大量 RAM 来生成哈希的步骤。使用如此多的 RAM 会降低廉价并行处理器的效率。

**2008 年 9 月的原件（留下来让评论有意义）**

MD5+salt 或 SHA1+salt 不是“易碎的”——大多数黑客都依赖于巨大的彩虹表，而这些对 salt 的用处不大`[update, now they are]`。

MD5+salt 是一个相对较弱的选项，但它不会被轻易破解`[update, now it is very easy to break]`。

SHA2 一直上升到 512 - 使用现成的工具包几乎不可能破解`[update, pretty easy up to 9 char passwords now]`- 尽管我确信某个军事掩体中有一个 Cray 可以做到这一点`[You can now rent this 'Cray' from Amazon]`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-22T18:45:13.640

MD5 或 SHA 与每个条目的随机生成的盐值相结合

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-22T12:49:00.007

如前所述，不应使用简单的散列算法，原因如下：

[http://arstechnica.com/security/2012/08/passwords-under-assault/](http://arstechnica.com/security/2012/08/passwords-under-assault/)

所以使用其他东西，比如[http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T18:47:42.107

所有散列算法都容易受到“字典攻击”。这只是攻击者拥有一个非常大的可能密码字典的地方，并且他们对所有密码进行了哈希处理。然后，他们查看这些哈希中是否有任何与他们要解密的密码的哈希匹配。这种技术可以轻松测试数百万个密码。这就是为什么您需要避免使用任何可远程预测的密码。

但是，如果你愿意接受字典攻击的威胁，MD5 和 SHA1 就足够了。SHA1 更安全，但对于大多数应用程序来说，这确实不是一个显着的改进。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2008-09-22T18:43:11.960

MD5 / SHA1 哈希都是不错的选择。MD5 略弱于 SHA1。

# c++ - 在 C++ 中链接“静态”方法的问题

> ID：116687
> 
> 赞同：8
> 
> 时间：2008-09-22T18:41:41.107
> 
> 标签：c++, linker, g++

我想调用在不同文件中定义的 CPP 类的一些“静态”方法，但我遇到了链接问题。我创建了一个重新创建我的问题的测试用例，它的代码如下。

（我对 C++ 完全陌生，我来自 Java 背景，对 C 有点熟悉。）

```
// CppClass.cpp
#include <iostream>
#include <pthread.h>

static pthread_t thread;
static pthread_mutex_t mutex;
static pthread_cond_t cond;
static int shutdown;

using namespace std;

class CppClass
{
public:
        static void Start()
        {
                cout << "Testing start function." << endl;
                shutdown = 0;
                pthread_attr_t attr;
                pthread_attr_init(&attr);
                pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);
                pthread_mutex_init(&mutex, NULL);
                pthread_cond_init(&cond, NULL);

                pthread_create(&thread, &attr, run_thread, NULL);
        }

        static void Stop()
        {
                pthread_mutex_lock(&mutex);
                shutdown = 1;
                pthread_cond_broadcast(&cond);
                pthread_mutex_unlock(&mutex);
        }

        static void Join()
        {
                pthread_join(thread, NULL);
        }
private:
        static void *run_thread(void *pthread_args)
        {
                CppClass *obj = new CppClass();
                pthread_mutex_lock(&mutex);
                while (shutdown == 0)
                {
                        struct timespec ts;
                        ts.tv_sec = time(NULL) + 3;
                        pthread_cond_timedwait(&cond, &mutex, &ts);
                        if (shutdown)
                        {
                                break;
                        }
                        obj->display();
                }
                pthread_mutex_unlock(&mutex);
                pthread_mutex_destroy(&mutex);
                pthread_cond_destroy(&cond);
                pthread_exit(NULL);
                return NULL;
        }

        void display()
        {
                cout << " Inside display() " << endl;
        }
};

// main.cpp
#include <iostream>
/* 
 * If I remove the comment below and delete the
 * the class declaration part, it works.
 */
// #include "CppClass.cpp"
using namespace std;

class CppClass
{
public:
        static void Start();
        static void Stop();
        static void Join();
};

int main()
{
        CppClass::Start();
        while (1)
        {
                int quit;
                cout << "Do you want to end?: (0 = stay, 1 = quit) ";
                cin >> quit;
                cout << "Input: " << quit << endl;
                if (quit)
                {
                        CppClass::Stop();
                        cout << "Joining CppClass..." << endl;
                        CppClass::Join();
                        break;
                }
        }
} 
```

当我尝试编译时，出现以下错误：

```
$ g++ -o go main.cpp CppClass.cpp -l pthread
/tmp/cclhBttM.o(.text+0x119)：在函数“main”中：
: 未定义对 `CppClass::Start()' 的引用
/tmp/cclhBttM.o(.text+0x182)：在函数“main”中：
: 未定义对 `CppClass::Stop()' 的引用
/tmp/cclhBttM.o(.text+0x1ad)：在函数“main”中：
: 未定义对 `CppClass::Join()' 的引用
collect2: ld 返回 1 个退出状态

```

但是，如果我删除 main.cpp 中的类声明并将其替换为 #include "CppClass.cpp"，它就可以正常工作。基本上，我想将这些声明放在一个单独的 .h 文件中并使用它。我错过了什么吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-09-22T18:51:39.710

很明显您来自 Java 背景，因为您还没有掌握头文件的概念。在 Java 中，定义某些东西的过程通常是一体的。您同时声明和定义。在 C/C++ 中，这是一个两步过程。**声明**一些东西会告诉编译器“这种类型存在一些东西，但我稍后会告诉你它是如何实际实现的”。**定义**一些东西是给编译器实际的实现部分。头文件主要用于声明，.cpp 文件用于定义。

头文件用于描述类的“API”，但不是它们的实际代码。可以在标头中包含代码，这称为标头内联。您已经内联了 CppClass.cpp 中的所有内容（不好，标题内联应该是例外），然后您在 main.cpp AGAIN 中声明您的类，这是 C++ 中的双重声明。每次使用方法时，类主体中的内联都会导致代码重复（这*听起来很*疯狂。有关详细信息，请参阅[有关内联的 C++ 常见问题解答部分](http://www.parashift.com/c++-faq-lite/inline-functions.html)。）

在你的代码中包含双重声明会给你一个编译器错误。保留类代码编译但会给您一个链接器错误，因为现在您在 main.cpp 中只有类似标题的类声明。链接器看不到实现您的类方法的代码，这就是出现错误的原因。与 Java 不同，C++ 链接器不会自动搜索它想要使用的目标文件。如果你使用 XYZ 类并且不给它 XYZ 的目标代码，它只会失败。

请查看[维基百科的头文件文章](http://en.wikipedia.org/wiki/Header_files)和[头文件包含模式](http://www.eventhelix.com/RealtimeMantra/HeaderFileIncludePatterns.htm)（链接也在维基百科文章的底部，包含更多示例）

简而言之：

对于每个类，生成一个 NewClass.h 和 NewClass.cpp 文件。

在 NewClass.h 文件中，写入：

```
class NewClass {
public:
   NewClass();
   int methodA();
   int methodB();
}; <- don't forget the semicolon 
```

在 NewClass.cpp 文件中，写入：

```
#include "NewClass.h"

NewClass::NewClass() {
  // constructor goes here
}

int NewClass::methodA() {
  // methodA goes here
  return 0;
}

int NewClass::methodB() {
  // methodB goes here
  return 1;
} 
```

在 main.cpp 中，编写：

```
#include "NewClass.h"

int main() {
  NewClass nc;
  // do something with nc
} 
```

要将它们链接在一起，请执行

g++ -o NewClassExe NewClass.cpp main.cpp

（只是 gcc 的一个例子）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-22T19:16:00.510

你定义了两次类，我很确定这不起作用。

尝试这样的事情：

首先是头文件 CppClass.h 文件：

```
// CppClass.h
using namespace std;

class CppClass
{
public:
    static void Start();
    static void Stop();
    static void Join();
private:
    void *run_thread(void *pthread_args);
    void display();
}; 
```

然后是实现它的 CppClass.cpp 文件：

```
// CppClass.cpp
#include <iostream>
#include <pthread.h>
#include "CppClass.h"

using namespace std;

void CppClass::Start()
{
    /* method body goes here */
}
void CppClass::Stop()
{
    /* method body goes here */
}
void CppClass::Join()
{
    /* method body goes here */
}
void *CppClass::run_thread(void *pthread_args)
{
    /* method body goes here */
}
void CppClass::display() {
    /* method body goes here */
} 
```

然后你的主文件：

```
// main.cpp
#include "CppClass.h"

int main()
{
    /* main method body here */
} 
```

我相信 g++ 调用会是一样的。

基本上，你不能两次声明同一个类。您应该在头文件中声明类，然后在 cpp 文件中声明实现。您还可以将所有代码内联放在头文件中的类的*单个*声明中。但是像你一样声明两次是行不通的。

我希望这是有道理的...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T18:45:29.897

我想你想做这样的事情：

g++ -c CppClass.cpp g++ -c main.cpp g++ -o go main.o CppClass.o

那应该解决它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T18:48:47.797

制作一个包含类定义的 .h 文件，然后将该文件 #include 到您的 2 个文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T18:51:28.587

当然看起来链接器没有选择你的第二个源文件。

# javascript - 从 SVN 关键字替换中提取作者/日期的 Javascript

> ID：116690
> 
> 赞同：-1
> 
> 时间：2008-09-22T18:42:56.673
> 
> 标签：javascript, html, svn

SVN 关键字替换给出的并不漂亮。例如，

> 最后更新时间：$Date$ by $Author$

产量

> 最后更新时间：$Date: 2008-09-22 14:38:43 -0400 (Mon, 22 Sep 2008) $ 作者：cconway $"

有没有人有一个 Javascript 片段可以美化事物并输出一些 HTML？结果应该更像：

> 最后更新：2008 年 9 月 22 日 cconway

PS有没有办法用显示名称替换“cconway”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T19:03:48.230

Errr .. 这感觉有点像我为你做你的工作:)，但这里是：

```
function formatSvnString(string){
    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']

    var re = /\$Date: (\d{4})-(\d\d)-(\d\d).*?\$Author: (\S+) \$/
    return string.replace(re, function(match, year, month, day, author){ 
        var date = new Date([year, month, day].join('/'))
        return date.getDate()
            + ' ' + months[date.getMonth()]
            + ' ' + date.getFullYear()
            + ' by ' + author
    })
} 
```

用法：

```
formatSvnString("$Date: 2008-09-22 14:38:43 -0400 (Mon, 22 Sep 2008) $ by $Author: cconway $")
// returns: 22 Sep 2008 by cconway 
```

我将由您来决定如何找到这些 SVN 字符串并自动应用上面的代码 :)

要做用户的显示名称，你要么必须说服 SVN 插入它（我不认为它可以这样做，但我可能错了），或者以某种方式为 JS 提供一种获取它的方法，或者可以访问一个充满用户名和相关显示名称的表格（尽管可能有点像安全风险。嘿孩子们，看看你是否可以使用这些用户名之一闯入我的服务器！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T18:58:56.353

一些 JavaScript 库提供模板功能。

原型 - [http://www.prototypejs.org/api/template](http://www.prototypejs.org/api/template)
Ext JS - [http://extjs.com/deploy/dev/docs/?class=Ext.DomHelper](http://extjs.com/deploy/dev/docs/?class=Ext.DomHelper)

我相信你可以找到一个 JQuery 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-24T15:15:16.157

这里有一些 jQuery 代码来完成这项工作：

```
$(文档).ready(函数() {
     var date = "$Date: 2008-09-23 00:10:56 -0400（2008 年 9 月 23 日，星期二）$"
         .replace(/\$Date:.*\((.*)\)\s*\$/,"$1");
     $(".timestamp").text("最后更新时间：" + date);
 });

```

`<div class="timestamp" />`在 HTML 中您希望时间戳文本出现的任何位置都有一个。

# sharepoint - SharePoint 安全性

> ID：116697
> 
> 赞同：0
> 
> 时间：2008-09-22T18:43:33.537
> 
> 标签：sharepoint

我们在自己的域上有一个 SharePoint 站点，并且正在讨论使用表单身份验证或 Active Directory。真的，我们想要 kerberos 的强大功能以及表单身份验证的灵活性和透明性（例如使用 asp.net 中的 sqlmembershipprovider 将用户存储在 sqlserver 中）。有没有办法强制 Active Directory 对我们的用户存储进行身份验证，或者我们可以设置一个不是 Active Directory 的 kerberos 身份验证服务器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T19:52:29.923

也许 ADAM 可能对您的方案有帮助：http: [//www.microsoft.com/windowsserver2003/adam/default.mspx](http://www.microsoft.com/windowsserver2003/adam/default.mspx)

Forms 身份验证的问题在于它遗漏了一些最终用户 GUI 控件，例如：更改密码、忘记密码等。我们在一个项目中实现了它，并且必须进行大量编码才能为最终用户实现良好的可用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T19:55:27.077

您可能还想研究使用 ISA 服务器来帮助您：http: [//blogs.msdn.com/jannemattila/archive/2007/07/23/isa-moss-makes-life-a-lot-easier-for -fba.aspx](http://blogs.msdn.com/jannemattila/archive/2007/07/23/isa-moss-makes-life-a-lot-easier-for-fba.aspx)

[http://www.isaserver.org/tutorials/Configuring-ISA-Firewalls-ISA-2006-RC-Support-User-Certificate-Authentication-using-Constrained-Delegation-Part1.html](http://www.isaserver.org/tutorials/Configuring-ISA-Firewalls-ISA-2006-RC-Support-User-Certificate-Authentication-using-Constrained-Delegation-Part1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:02:42.697

您还可以考虑使用 Forefront 用户访问网关 (UAG)。我已经实施了多次，它比 ISA 工作得更好，事实上，位与 SharePoint 一起安装用于用户配置文件服务 - [http://www.microsoft.com/en-us/server-cloud/forefront/unified-访问网关.aspx](http://www.microsoft.com/en-us/server-cloud/forefront/unified-access-gateway.aspx)。

UAG 为您提供更好的安全性和灵活性，它是“SharePoint Aware”。基于 Whale Communications（由 MS 购买）开发的技术，它为您的所有应用程序（除了 SharePoint）提供了一个通用网关。

UAG 注销的方式有一个“陷阱”，但我在这里为您解决了问题：http: [//davidmsterling.blogspot.com/2011/08/sharepoint-logout-with-uag.html](http://davidmsterling.blogspot.com/2011/08/sharepoint-logout-with-uag.html)。

迄今为止，已有 20 位客户从 ISA 迁移到 Forefront UAG，并且都非常喜欢它。

大卫斯特林 - [http://davidmsterling.blogspot.com](http://davidmsterling.blogspot.com) - [http://www.sterling-consulting.com](http://www.sterling-consulting.com) - [http://www.sharepoint-blog.com](http://www.sharepoint-blog.com)

# windows - C/C++ 程序如何将自己置于后台？

> ID：116701
> 
> 赞同：14
> 
> 时间：2008-09-22T18:44:02.803
> 
> 标签：windows, linux, macos, shell, background

从命令行启动的正在运行的 C 或 C++ 程序将自身置于后台的最佳方式是什么，相当于用户从命令末尾带有“&”的 unix shell 启动？（但用户没有。）它是一个 GUI 应用程序，不需要任何 shell I/O，所以没有理由在启动后绑定 shell。但我希望在没有“&”（或在 Windows 上）的情况下自动启动 shell 命令。

理想情况下，我想要一个可以在任何 Linux、OS X 和 Windows 上运行的解决方案。（或者我可以使用#ifdef 选择的单独解决方案。）可以假设这应该在执行开始时完成，而不是在中间的某个地方。

一种解决方案是让主程序成为启动真正二进制文件的脚本，小心地将其置于后台。但是，需要这些耦合的 shell/二进制对似乎并不令人满意。

另一种解决方案是立即启动*另一个*执行版本（使用“系统”或 CreateProcess），使用相同的命令行参数，但将子进程置于后台，然后让父进程退出。*但与将自身*置于后台的过程相比，这似乎很笨拙。

**在几个答案后编辑**：是的，fork()（或 system()，或 Windows 上的 CreateProcess）是一种方法，我在最初的问题中暗示了这一点。但是所有这些解决方案都会创建一个后台的 SECOND 进程，然后终止原始进程。我想知道是否有办法将现有进程置于后台。一个区别是，如果应用程序是从记录其进程 id 的脚本启动的（可能是为了以后杀死或其他目的），那么新分叉或创建的进程将具有不同的 id，因此任何启动脚本都无法控制，如果你明白我在说什么。

**编辑#2**：

fork() 对于 OS X 来说不是一个好的解决方案，其中“fork”的手册页说如果使用某些框架或库是不安全的。我试过了，我的应用程序在运行时大声抱怨：“进程已经分叉，你不能安全地使用这个 CoreFoundation 功能。你必须 exec()。”

我对 daemon() 很感兴趣，但是当我在 OS X 上尝试它时，它给出了相同的错误消息，所以我认为它只是 fork() 的一个精美包装器，并且具有相同的限制。

请原谅 OS X 中心主义，它恰好是我眼前的系统。但我确实在寻找所有三个平台的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-23T00:14:42.007

我的建议：**不要这样做**，至少不要在 Linux/UNIX 下这样做。

Linux/UNIX 下的 GUI 程序传统上*不会*自动后台运行。虽然这可能偶尔会让新手感到厌烦，但它有许多优点：

*   在核心转储/其他需要调试的问题的情况下，可以轻松捕获标准错误。

*   使 shell 脚本可以轻松地运行程序并等待它完成。

*   使 shell 脚本可以轻松地在后台运行程序并获取其进程 ID：

    ```
    gui-program &
    pid=$!
    # do something with $pid later, such as check if the program is still running 
    ```

    如果您的程序自行分叉，则此行为将中断。

“可脚本性”在许多意想不到的情况下很有用，即使是 GUI 程序，我也不愿明确地破坏这些行为。

Windows 是另一回事。AFAIK，Windows 程序自动在后台运行——即使是从命令 shell 调用——除非它们明确请求访问命令窗口。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-22T20:09:50.270

如果我理解正确的话，在 Linux 上，[daemon()](http://manpages.ubuntu.com/manpages/hardy/en/man3/daemon.html)就是你要找的东西。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-22T18:46:05.167

它通常在类 Unix 操作系统上完成的方式是在开头 fork() 并从父级退出。这在 Windows 上不起作用，但比启动另一个存在分叉的进程要优雅得多。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-22T19:05:17.167

需要做的三件事，

```
fork
setsid
redirect STDIN, STDOUT and STDERR to /dev/null 
```

这适用于 POSIX 系统（您提到的所有系统都声称是 POSIX（但 Windows 停止在声称位））

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-22T19:23:20.320

A process cannot put itself into the background, because it isn't the one in charge of background vs. foreground. That would be the shell, which is waiting for process exit. If you launch a process with an ampersand "&" at the end, then the shell does *not* wait for process exit.

But the only way the process can escape the shell is to fork off another child and then let its original self exit back to the waiting shell.

From the shell, you can background a process with Control-Z, then type "bg".

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-22T18:56:15.567

在 UNIX 上，您需要连续两次 fork 并让父节点死亡。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-22T19:24:02.737

Backgrounding a process is a shell function, not an OS function.

If you want an app to start in the background, the typical trick is to write a shell script to launch it that launches it in the background.

```
#! /bin/sh
/path/to/myGuiApplication & 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-22T19:18:03.673

Here is some pseudocode for Linux/UNIX:

```
initialization_code()
if(failure) exit(1)
if( fork() > 0 ) exit(0)
setsid()
setup_signal_handlers()
for(fd=0; fd<NOFILE; fd++) close(fd)
open("/dev/null", O_RDONLY)
open("/dev/null", O_WRONLY)
open("/dev/null", o_WRONLY)
chdir("/") 
```

And congratulations, your program continues as an independent "daemonized" process without a controlling TTY and without any standard input or output.

Now, in Windows you simply build your program as a Win32 application with WinMain() instead of main(), and it runs without a console automatically. If you want to run as a service, you'll have to look that up because I've never written one and I don't really know how they work.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-23T01:50:06.147

您编辑了您的问题，但您可能仍然错过了您的问题是某种语法错误这一点——如果该过程一开始没有放在后台并且您希望 PID 保持不变，那么您可以不要忽略启动进程的程序正在等待该 PID 的事实，这几乎就是在前台的**定义**。

我认为您需要考虑为什么要同时将某些内容放在后台并保持 PID 相同。我建议您可能不需要这两个约束。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-22T19:10:58.493

要跟进您编辑的问题：

> 我想知道是否有办法将现有进程置于后台。

在类 Unix 操作系统中，我所知道的确实没有办法做到这一点。shell 被阻塞，因为它正在执行 wait() 调用的变体之一，等待子进程退出。没有办法让子进程保持运行，但会以某种方式导致 shell 的 wait() 返回“请停止看我”状态。你有子叉子并退出原件的原因是外壳将从等待（）返回。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-22T18:54:33.760

正如其他人提到的，fork() 是如何在 *nix 上执行此操作的。您可以使用 MingW 或 Cygwin 库在 Windows 上获取 fork()。但是这些将要求您切换到使用 GCC 作为编译器。

在纯 Windows 世界中，您将使用[CreateProcess](http://msdn.microsoft.com/en-us/library/ms682425.aspx)（或其派生类 CreateProcessAsUser、CreateProcessWithLogonW 之一）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-22T19:08:32.180

背景的最简单形式是：

```
if (fork() != 0) exit(0); 
```

在 Unix 中，如果您想完全取消与 tty 的关联，您可以：

1.  关闭所有可能访问 tty 的描述符（通常是`0`、`1`和`2`）。
2.  `if (fork() != 0) exit(0);`
3.  `setpgroup(0,getpid()); /* Might be necessary to prevent a SIGHUP on shell exit. */`
4.  `signal(SIGHUP,SIG_IGN); /* just in case, same as using nohup to launch program. */`
5.  `fd=open("/dev/tty",O_RDWR);`
6.  `ioctl(fd,TIOCNOTTY,0); /* Disassociates from the terminal */`
7.  `close(fd);`
8.  `if (fork() != 0) exit(0); /* just for good measure */`

这应该完全守护你的程序。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-22T22:48:58.097

所以，正如你所说，只是 fork()ing 不会成功。您必须做的是 fork()，然后是 re-exec()，就像此代码示例所做的那样：

```
#include stdio.h>
#include <unistd.h>
#include <string.h>

#include <CoreFoundation/CoreFoundation.h>

int main(int argc, char **argv)
{
    int i, j;

    for (i=1; i<argc; i++)
        if (strcmp(argv[i], "--daemon") == 0)
        {
            for (j = i+1; j<argc; j++)
                argv[j-1] = argv[j];

            argv[argc - 1] = NULL;

            if (fork()) return 0;

            execv(argv[0], argv);

            return 0;
        }

    sleep(1);

    CFRunLoopRun();

    CFStringRef hello = CFSTR("Hello, world!");

    printf("str: %s\n", CFStringGetCStringPtr(hello, CFStringGetFastestEncoding(hello)));

    return 0;
} 
```

该循环用于检查 --daemon 参数，如果存在，则在重新执行之前将其删除，以避免无限循环。

如果将二进制文件放入路径中，我认为这不会起作用，因为 argv[0] 不一定是完整路径，因此需要对其进行修改。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-22T19:50:05.950

我认为，在 Windows 下，你将要访问 fork() 的最后一件事是将你的程序作为 Windows 服务加载。

这是一篇关于 Windows 服务的介绍性文章的链接... [CodeProject：简单的 Windows 服务示例](http://www.codeproject.com/KB/dotnet/simplewindowsservice.aspx)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-22T18:47:34.400

在 Linux 下执行此操作的最常见方法是通过[分叉](http://en.wikipedia.org/wiki/Fork_(operating_system))。在 Mac 上也应该这样，至于 Windows，我不确定 100%，但我相信它们有类似的东西。

基本上发生的事情是进程将自己分成两个进程，然后原来的进程退出（将控制权返回给 shell 或其他），第二个进程继续在后台运行。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-22T19:05:06.637

我不确定 Windows，但在类 UNIX 系统上，您可以`fork()`将`setsid()`分叉进程移动到未连接到终端的新进程组中。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-22T19:07:24.900

如果你需要一个脚本来获取程序的 PID，你仍然可以在 fork 之后得到它。

fork 时，将子进程的 PID 保存在父进程中。当您退出父进程时，要么将 PID 输出到，`STD{OUT,ERR}`要么`return pid;`在`main()`. 然后调用脚本可以获取程序的 pid，尽管它需要对程序如何工作有一定的了解。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-02-23T12:28:03.370

在 Unix 中，我学会了使用`fork()`. 如果你想把一个正在运行的进程放到后台，`fork`它两次。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-11-29T14:33:13.130

```
/**Deamonize*/

pid_t pid;
pid = fork(); /**father makes a little deamon(son)*/
if(pid>0)
exit(0); /**father dies*/
while(1){
printf("Hello I'm your little deamon %d\n",pid); /**The child deamon goes on*/
sleep(1)
}

/** try 'nohup' in linux(usage: nohup <command> &) */ 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2010-03-24T10:21:09.377

我正在尝试解决方案。

父进程只需要一个分叉。

最重要的一点是，在fork之后，父进程必须通过调用`_exit(0);`而不是调用而死`exit(0);`

使用`_exit(0);`时，命令提示符会立即在 shell 上返回。

这就是诀窍。

# deployment - ClickOnce 部署可以与 windows mobile 和 compact 框架一起使用吗？

> ID：116713
> 
> 赞同：7
> 
> 时间：2008-09-22T18:46:25.213
> 
> 标签：deployment, windows-mobile, compact-framework

我可以使用 ClickOnce 部署方法来部署和自动更新针对 windows 移动平台（例如智能手机或袖珍电脑）的应用程序吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-22T21:29:19.207

不支持真正的单击一次。您可能会查看这些文章，以便更好地了解可以做什么：

*   [MSDN 关于部署模式的文章](http://msdn.microsoft.com/en-us/library/aa446503.aspx)
*   [Alex Feinman 关于自我更新应用程序的文章](http://msdn.microsoft.com/en-us/library/aa446487.aspx)

您还可以将应用程序打包成一个[CAB 文件](http://msdn.microsoft.com/en-us/library/aa446504.aspx)，然后放到网上进行 OTA 部署。还有一些第三方提供商，如[CloudSync](https://cloudsync.com)和[mProdigy](http://www.b2m-solutions.com)（未使用过 YMMV）也用于 OTA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T18:49:23.727

不，希望在未来。

# javascript - 什么事件触发 Javascript 表单字段验证和格式化？

> ID：116736
> 
> 赞同：10
> 
> 时间：2008-09-22T18:50:24.003
> 
> 标签：javascript, validation, usability

首先让我说，我们验证服务器端的每个字段，所以这是一个关于客户端可用性的问题。

*关于何时*使用 javascript 验证和格式化 html 表单输入字段的传统智慧是什么？

例如，我们有一个电话号码字段。我们允许使用数字、空格、括号和连字符。我们希望该字段有十位数字。此外，我们希望该字段看起来像 (123) 456-7890，即使用户没有那样键入它。

好像我们可以

*   当用户退出该字段时对其进行验证和格式化。
*   对输入的每个字符进行验证和格式化。
*   拦截击键并防止用户输入错误的字符。
*   以上的一些组合（例如，进入时的格式和退出时的验证，进入时的阻止和退出时的格式等）
*   [**新增**] 当用户点击提交时，等待并做所有的验证和格式化。

我已经看到它以所有这些方式完成了，但我无法从可用性的角度找到关于什么是最好的（甚至是普遍接受的）的信息，更重要的是，为什么。

[**编辑**：一些澄清]

我们绝对不会强制执行任何格式标准。当我说格式时，我的意思是我们将使用 javascript 来重写东西，使它们看起来不错。如果用户键入 1234567890，我们将其更改为 (123) 456-7890。没有可能失败的“格式化规则”。

我将此与验证区分开来，因为如果他们没有输入足够的数字，我们必须让他们修复它。

我想我应该将这个问题改写为“关于何时验证以及何时格式化......的传统智慧是什么？

到目前为止，答案中的信息很好！

**编辑**：我在下面接受我自己的答案，希望其他人会发现这个链接和我一样有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T19:15:15.877

> 当用户退出该字段时对其进行验证和格式化。

是的。如果验证或格式化规则失败，则向用户提供非侵入性反馈。我的意思是不弹出警报或模式对话框，从而迫使用户单击某些东西。而是在验证或格式化失败的字段附近或下方动态显示消息。

> 对输入的每个字符进行验证和格式化。

不，我认为这会妨碍可用性。而是向用户提供关于格式规则或验证规则是什么的工具提示或其他提示。例如，对于“必填”字段，几乎无处不在的星号，对于带有格式的字段，预先告诉用户预期的格式是什么。

> 拦截击键并防止用户输入错误的字符。

如果您要阻止用户输入无效字符，请以非侵入性的方式告诉用户您刚刚阻止他们输入的原因。另外，不要窃取该领域的焦点。

所以对我来说，一般原则是：

1.  预先通知用户您的验证和格式化规则。
2.  不要假设用户有视力，因此请牢记 Web 可访问性和屏幕阅读器。（除非您正在开发目标受众有限的网站，例如 Intranet。）
3.  为用户提供非侵入性反馈，这意味着不要让用户在每次失败时单击警报框或模式对话框。
4.  明确哪个输入框未通过验证或格式化规则，并告诉用户输入失败的原因。
5.  提供反馈时，不要窃取鼠标/指针焦点。
6.  记住制表符顺序，这样当面向键盘的用户完成一个字段时，他们可以点击制表符并转到下一个逻辑输入/选择字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T18:54:31.873

我将描述各种选项，但仅使用现有的 js 框架来处理输入掩码可能是有益的。[这是各种选项的一个很好的总结](http://www.webresourcesdepot.com/javascript-input-masks/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-17T19:11:52.763

bmb 声明他们接受任何格式，并将其更改为所需的格式 (xxx) nnn-xxxx。这是非常好的。问题是 A) 格式更改和 B) 验证的时间安排。

A) 格式更改应在用户退出该字段时完成。越快越烦人，越晚就完全违背了显示变化的目的。

B) 验证最适合在退出字段或提交表单时执行。Sooner 让用户感到沮丧和困惑。在一个冗长而复杂的表单中，有多个屏幕，我倾向于在退出控件时进行验证，以便更轻松地进行更正。在简短的表格上，我会在提交时完成，以避免破坏填写表格的流程。这确实是一个判断电话，所以如果可能的话，请与真实用户一起测试。

无论如何，您最好还是与真实用户一起测试您的工作，但是如果您没有预算或访问权限，那么快速而肮脏的“用户”测试可以帮助做出这样的决定。您可以找一些**没有使用该软件**的人（尽可能与您的真实最终用户匹配）并要求他们填写表格。指示他们专门输入内容以获取错误，然后看着他们纠正它。让他们大声说出他们正在做什么，这样您就无需猜测他们的思维过程。寻找他们有问题的地方以及最让他们感到困惑/恼火的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-20T21:43:52.977

到目前为止，最好的答案不是答案，而是评论（见上文。）我将其添加为答案，以防有人在评论中错过它。

请参阅以下关于 A List Apart 的文章。

[Luke Wroblewski 的 Web 表单中的内联验证](http://www.alistapart.com/articles/inline-validation-in-web-forms/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T18:52:28.710

我发现前三个选项真的很烦人。没有什么比在打字过程中被打断更糟糕的了。

**您的用户的主要目标是尽可能快地完成表单，而您所做的任何减慢他们速度的事情只是他们完全放弃它的另一个原因。**

我也讨厌被迫输入诸如信用卡#或电话#之类的东西，这正是满足表格的正确格式。只要有可能，就给用户一个输入框，不要让他们处理格式。

如果是你的手机#，让他们随意输入，去掉你不喜欢的任何东西，试着把它重新组合成你想要的格式（（124）567-8901），如果你抛出错误不能。

如果您绝对必须以特定格式验证某些内容，请在他们提交表单时执行此操作，然后突出显示有问题的字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T18:54:05.273

这取决于每个字段。但是对于像电话号码这样的东西，阻止某人甚至输入非数字通常非常好。

这样，在键入时，您会注意到您的 1-800-HELLOWORLD 电话号码未正确显示，并意识到该字段只接受数字（您也可以在输入字段旁边使用某种信息字段突出显示）。

在我看来，这比在您完成填写*后*显示的尴尬模式对话、弹出错误字段或服务器生成的消息显示更加直观和友好。

当然，始终在最终的客户端验证与构建它的最终技术要求之间取得平衡。如果您开始在页面提交之前使用 Ajax 验证图像上传，那可能是一条很长的路。

编辑：另外，考虑你的听众。与更习惯于 Internet 的非 Ajax 方法的人相比，更有技术头脑的人会更容易接受“动态”形式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T18:55:58.607

就我个人而言，我认为在退出时格式化和验证对用户来说是最不麻烦的。让他们以他们喜欢的任何格式输入号码（电话号码有很多这样的格式），然后将其更改为您喜欢的格式。**当您可以以他们喜欢的格式处理数据时，不要强迫用户符合您的偏好。**

此外，当我没有完成输入时的验证消息很烦人，而且无法在文本字段中输入某个字符也很烦人。

我能想到的唯一例外是“这个值是否可用”的情况（例如创建一个唯一的用户名）——在这种情况下，即时反馈真的很方便。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T18:58:34.233

我见过的最用户友好的验证方式是在输入字段旁边显示一个指示器，以指示该值无效。这样您就不会在用户输入时打断他们，而且他们可以不断地查看他们是否输入了有效的条目。我讨厌不得不将信息输入一个长格式，只是让事情在最后告诉我“哦，你需要回去修复字段 1”。

您可以在用户键入时显示/隐藏指示器。当值无效时，我会使用警告图标，并在图标上设置工具提示来解释值无效的原因。

如果您有屏幕空间，您可以只输入诸如“有效”或“必须采用 XXX-YYY-XXXX 格式”之类的文本。

请记住，当您进行每次击键验证时，您还需要捕获粘贴的文本。

除此之外，您还应该首先防止输入无效的击键。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-09-17T19:44:40.733

对于可用性最佳实践，我建议阅读[How To Design The Perfect Form](http://webdesigntuts.com/web-design/how-to-design-the-perfect-form/)（更准确地说是[Context & Assistance](http://webdesigntuts.com/web-design/how-to-design-the-perfect-form/#context)）和[Beautiful Forms](http://www.noupe.com/php/beautiful-forms.html)。

对于表单验证框架，请检查[fValidator](http://zendold.lojcomm.com.br/fvalidator/)和[iMask](http://zendold.lojcomm.com.br/imask/)组合，它们是互补的，因此可以完美地协同工作。

# sql - Oracle：有没有一种简单的方法可以在合并/更新语句中说“如果 null 保持当前值”？

> ID：116760
> 
> 赞同：0
> 
> 时间：2008-09-22T18:56:10.947
> 
> 标签：sql, oracle

我对 oracle 的任何更高级的功能都知之甚少，但我认为这应该是可能的。

假设我有一个具有以下架构的表：

```
MyTable
  Id INTEGER,
  Col1 VARCHAR2(100),
  Col2 VARCHAR2(100) 
```

我想用以下内容写一个sproc

```
PROCEDURE InsertOrUpdateMyTable(p_id in integer, p_col1 in varcahr2, p_col2 in varchar2) 
```

其中，在更新的情况下，如果 p_col1、p_col2 中的值为 null 将不会分别覆盖 Col1、Col2

所以如果我有记录：

```
id=123, Col1='ABC', Col2='DEF'

exec InsertOrUpdateMyTable(123, 'XYZ', '098'); --results in id=123, Col1='XYZ', Col2='098'
exec InsertOrUpdateMyTable(123, NULL, '098');  --results in id=123, Col1='ABC', Col2='098'
exec InsertOrUpdateMyTable(123, NULL, NULL);   --results in id=123, Col1='ABC', Col2='DEF' 
```

有没有任何简单的方法可以在没有多个 SQL 语句的情况下做到这一点？

我在想可能有一种方法可以用 Merge 语句来做到这一点，尽管我只是稍微熟悉它。

* * *

**编辑：** Cade Roux 波纹管建议使用 COALESCE，效果很好！ [下面是一些使用 coalesce kewyord 的例子。](http://www.java2s.com/Code/Oracle/Conversion-Functions/COALESCEreturnsthefirstnonnullexpressionintheexpressionlist.htm) 这是我的问题的解决方案：

```
MERGE INTO MyTable mt
    USING (SELECT 1 FROM   DUAL) a
    ON (mt.ID = p_id)
    WHEN MATCHED THEN
        UPDATE
           SET mt.Col1 = coalesce(p_col1, mt.Col1), mt.Col2 = coalesce(p_col2, mt.Col2)
    WHEN NOT MATCHED THEN
        INSERT (ID, Col1, Col2)
        VALUES (p_id, p_col1, p_col2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T19:02:25.207

更改要使用的调用或更新语句

```
nvl(newValue, oldValue) 
```

对于新的字段值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T19:01:58.717

使用 MERGE 和 COALESCE？ [试试这个链接的例子](http://blogs.oracle.com/cmar/entry/using_merge_to_do_an)

和

```
SET a.Col1 = COALESCE(incoming.Col1, a.Col1)
    ,a.Col2 = COALESCE(incoming.Col2, a.Col2) 
```

# database - 最佳实践：将项目的工作流状态存储在数据库中？

> ID：116762
> 
> 赞同：11
> 
> 时间：2008-09-22T18:56:12.430
> 
> 标签：database, database-design, refactoring, workflow

我有一个关于如何存储复杂工作流状态以在数据库中处理任务的最佳实践的问题。我一直在网上寻找无济于事，所以我想我会问社区他们认为什么是最好的。

这个问题来自我在上一个问题中给出的同一个“BoxItem”示例。这个“BoxItem”在我的系统中被跟踪，因为它执行了各种任务。该任务可能会持续数天并需要人工交互，因此必须保持 BoxItem 的状态。还必须跟踪谁完成了任务（如果适用）以及任务完成的时间。

起初，我通过在“BoxItems”表中为每个需要完成的人工交互任务添加三个字段来解决这个问题：

*任务名称*是否完整

日期*TaskName*完成

用户*任务名*完成

当工作流程很简单时，这很有效……但现在它已经发展成为一个复杂的流程（流程中可能有 10 个以上的人机交互……其中大约一半是可选的，可能会或可能不会针对 BoxItem 完成，这导致我开始为那些可选任务添加“Do *TaskName* ”字段），我发现应该是一个简单的表现在有 40 个左右的字段完全用于保留此状态信息。

我发现自己在问是否有更好的方法来做到这一点......但我不知所措。

我的第一个想法是制作一个通用的“BoxItemTasks”表，它定义了可以在给定盒子上完成的任务，但我仍然需要单独保存日期和用户信息，所以它并没有真正帮助。

我的第二个想法是，也许这无关紧要，如果这张表有 40 个或更多用于状态保留的字段，我不应该担心......也许我只是偏执。但感觉要保留很多信息。

无论如何，我不知道第三种选择可能是什么，或者上述两种选择中的一种是否真的合理。我可以看到这个工作流程在未来可能会变得更加复杂，对于每一个新任务，我需要添加 3-4 个字段来支持它的跟踪......感觉就像它正在失控。

在这个情况下，你会怎么做？

我应该注意，这是对现有系统的维护，它是在没有 ORM 的情况下构建的，所以我不能把它留给 ORM 来处理。

编辑：

凯夫，你是在谈论做这样的事情：

## 盒子物品

(PK) BoxItemID

（其他无关的东西）

## BoxItemActions

(PK) BoxItemID

(PK) BoxItemTaskID

完成了

完成日期

用户已完成

## BoxItemTasks

(PK) 任务类型

描述（如果有必要）

嗯......这会起作用......它代表需要改变我目前执行 SQL 查询的方式以查看哪些项目处于什么状态，但从长远来看，这样的事情看起来会更好（没有进行像序列化想法所代表的基本设计更改......虽然如果我有时间，我想按照我的想法去做。）。

这就是你提到的Kin，还是我不同意？

编辑：啊，我也看到了你的想法，用“最后一个动作”来确定当前状态......我喜欢它！我认为这可能对我有用......我可能需要稍微改变一下（因为在某些时候任务会同时发生），但这个想法似乎是个好主意！

编辑最后：总而言之，如果其他人在未来用同样的问题来查找这个......听起来如果您的系统将信息预加载到某个可查询的界面中（即不直接调用数据库本身，就像我正在处理的临时系统那样），但如果你没有那个，附加表的想法似乎应该很好用！谢谢大家的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T19:09:05.627

如果我理解正确，我会添加 BoxItemTasks 表（只是一个枚举表，对吗？），然后添加一个 BoxItemActions 表，其中包含 BoxItems 和 BoxItemTasks 的外键，以了解它是什么类型的任务。如果你想让一个特定的任务只能在一个特定的盒子项目上执行一次，只需将 (Items + Tasks) 列对作为 BoxItemActions 的主键。

（你比我做得好得多，并且正确解释了我所说的话。你写的正是我所想象的。）

至于确定当前状态，您可以在 BoxItemActions 上编写一个触发器来更新单个列 BoxItems.LastAction。对于并发操作，您的触发器可能只是有特殊情况来决定哪个操作需要最近。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T19:23:30.103

正如先前的答案所建议的那样，我会将您的桌子分成几份。

BoxItemActions，包含工作流需要通过的操作列表，在每次创建 BoxItem 时创建。在此表中，您可以跟踪每个任务完成的详细日期\时间\用户。

使用这种类型的应用程序，知道 Box 下一步要去哪里可能会变得非常棘手，因此拥有 Box 剩余步骤的“地图”将非常有帮助。同样，这个表可以疯狂地分组，每框数百行，而且仍然很容易查询。

它还使得可以轻松更改“不同路径”。通过工作流程的“路径”主数据表是一种解决方案，在创建每个框时，用户必须选择框将遵循的“路径”。或者您可以进行设置，以便在用户创建框时，他们选择此特定框所需的任务。取决于我们的业务问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-10T18:48:12.130

序列化和数据库模型的混合怎么样。拥有一个用作主工作流文档的 XML 文档，其中包含每个步骤的节点，其中包含详细说明其名称、流程中的顺序、是否可选的条件等的属性和元素。最重要的是，每个步骤节点都可以有一个唯一的步骤 ID。

然后在您的数据库中，您有一个简单的两个表结构。BoxItems 表存储您的基本 BoxItem 数据。然后是一个 BoxItemActions 表，非常类似于您标记为答案的解决方案。

它本质上类似于作为答案接受的解决方案，但不是使用 BoxItemTasks 表来存储任务的主列表，而是使用 XML 文档为实际的工作流定义提供更多的灵活性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T19:00:15.010

值得一提的是，在 BizTalk 中，它们通过将长时间运行的消息模式（工作流等）二进制序列化到数据库来“脱水”它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T19:03:30.807

我想我会将 Workflow 对象序列化为 XML 并使用 ID 列存储在数据库中。报告可能更困难，但听起来它可能适用于您的情况。

# .net - 文档/视图或复合应用程序架构有哪些好的资源？

> ID：116766
> 
> 赞同：-1
> 
> 时间：2008-09-22T18:57:01.727
> 
> 标签：.net, model-view-controller, architecture, document-view

最近我一直在研究相对面向数据的应用程序。一般来说，他们往往是由以奇怪方式相关的类表示的数据的编辑器。我一直在通过`UserControl`为每种类型的对象设置一个来处理它，并且随着选择的更改，程序会为该对象显示适当的编辑器。

我为此制作的“框架”感觉笨重和凌乱。一般来说，我有一个两窗格的界面，左侧是“项目选择”控件，右侧是“工作区”。UI 必须通过确定`UserControl`要显示的内容来响应项目选择的大部分工作，并实施诸如撤消和询问用户是否要在更改项目之前保存数据等行为可能会变得混乱。这篇文章的灵感来自于我正在与一位同事一起开发的一个很好的“让我们的构建过程更容易”的应用程序，但它真的无法控制，以至于精心设计的重写可能会比当前代码完成的速度更快。 .

通过阅读一些 C++ 书籍，我对文档/视图架构有了初步的了解。我知道 .NET 中更现代的对应物可能是 Composite UI Application 块。问题是除了这些主题的快速演练或操作指南外，我从未见过任何东西。从来不是从“你应该如何为此设计一个应用程序”的观点，而是从“把这个粘贴到应用程序中，你就会明白！”的观点。我花了一两个小时来研究 CAB 文档，但这让我有些困惑。我不喜欢 CAB 主要是因为我很好奇事情是如何在幕后工作的，我想如果在我开始使用框架之前能够实现类似模式的简单版本，我会更感激它。

我真正认为我需要的是一个专注于这个问题的网站或书籍。我似乎没有得到的重要部分是如何将关注点分离到适当的位置；我习惯于用几种方法来设计我的数据类来处理数据，这似乎是控制器对象的工作？您认为哪些资料对介绍该主题有用？我看过很多文章都画了这样漂亮的图表[，](http://upload.wikimedia.org/wikipedia/commons/2/2e/ModelViewControllerDiagram.svg)我对这些架构的工作原理有了高级的了解。我认为我从来没有找到合适的资源来教我低级的“如何实现它”部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T19:50:05.170

我发现Martin Fowler 的[这篇文章](http://www.martinfowler.com/eaaDev/uiArchs.html)很好地概述了各种 UI 架构。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T20:58:27.270

我接受了@Luke H 的回答，因为它最终让我找到了一些相当不错的资源。

*   Martin Fowler 的书看起来一流，在我的队列中。
*   [Jeremy Miller的 Build Your Own CAB 系列](http://codebetter.com/blogs/jeremy.miller/archive/2007/07/25/the-build-your-own-cab-series-table-of-contents.aspx)做得非常好。
*   看起来我对设计模式有点太无知了，无法继续，所以我正在阅读 Head-First Design Patterns，然后是四人帮一书来帮助那里；之后我打算消化福勒的作品。

# c# - 对流布局面板内的控件进行排序的最佳方法是什么？

> ID：116775
> 
> 赞同：1
> 
> 时间：2008-09-22T18:58:41.567
> 
> 标签：c#, .net, vb.net

我正在向 FlowLayoutPanel 添加自定义控件。每个控件都有一个日期属性。我想根据 date 属性对 flowlayoutpanel 中的控件进行排序。在添加控件之前，我无法对控件进行预排序，因为用户可以添加更多控件。

我目前的想法是，当触发 FlowLayoutPanel 的 ControlAdded 事件时，我会遍历控件并使用 BringToFront 函数根据日期对控件进行排序。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T21:29:35.133

我怀疑这是最好的，但到目前为止是我所拥有的：

```
 SortedList<DateTime,Control> sl = new SortedList<DateTime,Control>();
        foreach (Control i in mainContent.Controls)
        {
            if (i.GetType().BaseType == typeof(MyBaseType))
            {
                MyBaseType iTyped = (MyBaseType)i;
                sl.Add(iTyped.Date, iTyped);
            }
        }

        foreach (MyBaseType j in sl.Values)
        {
            j.SendToBack();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T20:03:50.083

BringToFront 影响 z 顺序而不是 x/y 位置，我怀疑当有人在面板中添加或删除控件时，您想对 FlowLayoutPanel.Controls 集合进行排序。可能在排序代码周围使用 SuspendLayout 和 ResumeLayout。

# c# - 为 ASP.NET MVC 项目设置数据访问的最佳方式是什么？

> ID：116776
> 
> 赞同：7
> 
> 时间：2008-09-22T18:58:55.123
> 
> 标签：c#, asp.net, asp.net-mvc, visual-studio, visual-studio-2008

我正在开始一个新的 ASP.NET MVC 项目来学习，并且想知道设置项目以连接到 SQL 服务器以获取数据的最佳方法是什么。例如，假设我们有一个产品表和一个产品对象，我想用它来填充视图中的数据。

我知道在这里的某个地方我应该有一个可以实现的接口，等等，但我今天不能把它包起来:-(

编辑：现在（即：此应用程序的当前、编码不佳的版本）我只是使用普通的旧 SQL 服务器（甚至 2000 年），仅使用存储过程进行数据访问，但我不会反对添加额外的一层使用 linq to sql 或其他东西的灵活性。

编辑#2：我想添加的一件事是：我将针对数据库的 V1 编写这个，并且我需要能够让我们的 DBA 重新处理数据库并稍后给我一个 V2，所以它现在只需要更改一些未通过数据库提供的小东西，这将是很好的。而不必重新编写一个全新的 DAL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T19:03:50.307

这实际上取决于您使用的数据访问技术。如果您使用的是 Linq To Sql，您可能希望抽象出某种“存储库”接口背后的数据访问，例如 IProductRepository。这样做的主要吸引力在于您可以随时更改特定的数据访问实现（例如在编写单元测试时）。

我试图在[这里](http://haacked.com/archive/2007/12/07/tdd-and-dependency-injection-with-asp.net-mvc.aspx)介绍其中的一些内容：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T19:03:50.960

我会查看[Rob Conery](http://blog.wekeroad.com/)关于他创建 MVC 店面的视频。该系列可以在这里找到：[MVC 店面系列](http://www.asp.net/learn/mvc-videos/)

本系列深入探讨各种与设计相关的主题以及与 MVC 和其他项目一起使用的编码/测试实践。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-25T18:09:22.140

我认为 Billy McCafferty 的[S#arp 架构](http://code.google.com/p/sharp-architecture/)是使用 ASP.NET MVC 和数据访问层（默认使用 NHibernate）、依赖注入（Ninject atm，但计划支持 CommonServiceLocator）和测试的一个很好的例子 -带动发展。该框架仍在开发中，但我认为它非常好且稳定。从当前版本开始，在最终版本发布之前应该很少有重大更改，因此针对它进行编码应该是可以的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-09T07:07:42.803

我已经完成了一些 MVC 应用程序，并且我找到了一个非常适合我的结构。它基于JPrescottSanders 提到[的 Rob Conery 的 MVC Storefront Series （尽管他发布的链接是错误的）。](http://blog.wekeroad.com/mvc-storefront/mvc-storefront-part-1/)

所以这里 - 我通常尝试将我的控制器限制为仅包含视图逻辑。这包括检索数据以传递给视图，以及将从视图传回的数据映射到域模型。关键是尝试将业务逻辑排除在这一层之外。

为此，我通常在我的应用程序中使用 3 层。第一个是表示层——控制器。第二个是服务层——该层负责执行复杂的查询以及验证等事情。第三层是存储库层——这一层负责对数据库的所有访问。

因此，在您的*产品*示例中，这意味着您将拥有一个 ProductRepository，其中包含 GetProducts() 和 SaveProduct(Product product) 等方法。您还将拥有一个 ProductService（取决于 ProductRepository），其中包含 GetProductsForUser（用户用户）、GetProductsWithCategory（类别类别）和 SaveProduct（产品产品）等方法。验证之类的事情也会在这里发生。最后，您的控制器将依赖于您的服务层来检索和存储产品。

您可以跳过服务层而侥幸，但您通常会发现您的控制器变得非常胖并且往往做得太多。我已经尝试过这种架构很多次了，而且它工作得很好，特别是因为它很好地支持了 TDD 和自动化测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T19:03:27.747

在我的站点解决方案中，我有 MVC Web 应用程序项目和一个“通用”项目，其中包含我的 POCO（纯 C# 对象）、业务经理和数据访问层。

DAL 类与 SQL Server 相关联（我没有将它们抽象出来）并将 POCO 返回给我从 MVC 项目中的控制器调用的业务经理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-23T00:02:27.420

对于我们的应用程序，我计划使用 LINQ to Entities，但由于它对我来说是新的，因此如果它不能按我的意愿执行并使用其他类似 LINQ to SQL 或NHibernate，所以我将把数据访问对象抽象成一个抽象工厂，以便对应用程序隐藏实现。

你如何做取决于你，只要你选择一个经过验证且众所周知的设计模式来实现，我认为你的最终产品将得到很好的支持和健壮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-23T00:27:41.913

查看[Code Camp Server](http://code.google.com/p/codecampserver/)以获得一个很好的参考应用程序，它可以做这件事，正如@haacked 所说的抽象，它可以让它们分开。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-12T20:00:49.390

使用 LINQ。创建一个 LINQ to SQL 文件并拖放您需要的所有表和视图。然后，当您调用模型时，所有 CRUD 级别的东西都会自动为您创建。

LINQ 是我很久以来见过的最好的东西。以下是从 Scott Gu 的博客中获取数据的一些简单示例。

[LINQ 教程](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-18T16:14:14.427

我刚刚完成了我的第一个 MVC 项目，并使用了 Service-Repository 设计模式。现在网上有很多关于它的信息。它使我从 Linq->Sql 轻松过渡到实体框架。如果您认为您将要进行大量更改，请花一点额外的精力来使用接口。

我为您的 DAL/存储库推荐实体框架。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-27T09:35:53.340

我想你需要一个orm。

例如实体框架（代码优先）

您可以为模型创建一些类。

为您的逻辑和视图使用这些模型，并将它们映射到 db(v1)。

当 dba 给你新的 db(v2) 时，只更改映射配置。(v1 和 v2 都是 rdb,sql server,mysql,oracel...),如果 db(v1) 是 rdb 而 db(v2) 是nosql（mongo，redis，couchbase ...），那是行不通的

可能需要做一些查找和替换

# asp.net - 在 Web 用户控件中将 int 数组作为参数传递

> ID：116797
> 
> 赞同：24
> 
> 时间：2008-09-22T19:02:36.127
> 
> 标签：asp.net, web-user-controls

我有一个 int 数组作为 Web 用户控件的属性。如果可能，我想使用以下语法将该属性设置为内联：

```
<uc1:mycontrol runat="server" myintarray="1,2,3" /> 
```

这将在运行时失败，因为它需要一个实际的 int 数组，但正在传递一个字符串。我可以创建`myintarray`一个字符串并在 setter 中解析它，但我想知道是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-22T19:52:25.260

实现一个类型转换器，这是一个，警告：quick&dirty，不用于生产，等等：

```
public class IntArrayConverter : System.ComponentModel.TypeConverter
{
    public override bool CanConvertFrom(System.ComponentModel.ITypeDescriptorContext context, Type sourceType)
    {
        return sourceType == typeof(string);
    }
    public override object ConvertFrom(System.ComponentModel.ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        string val = value as string;
        string[] vals = val.Split(',');
        System.Collections.Generic.List<int> ints = new System.Collections.Generic.List<int>();
        foreach (string s in vals)
            ints.Add(Convert.ToInt32(s));
        return ints.ToArray();
    }
} 
```

并标记您的控件的属性：

```
private int[] ints;
[TypeConverter(typeof(IntsConverter))]
public int[] Ints
{
    get { return this.ints; }
    set { this.ints = value; }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-22T20:45:57.987

@mathieu，非常感谢您的代码。为了编译，我对其进行了一些修改：

```
public class IntArrayConverter : System.ComponentModel.TypeConverter
{
    public override bool CanConvertFrom(System.ComponentModel.ITypeDescriptorContext context, Type sourceType)
    {
        return sourceType == typeof(string);
    }
    public override object ConvertFrom(System.ComponentModel.ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        string val = value as string;
        string[] vals = val.Split(',');
        System.Collections.Generic.List<int> ints = new System.Collections.Generic.List<int>();
        foreach (string s in vals)
            ints.Add(Convert.ToInt32(s));
        return ints.ToArray();
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-22T19:26:56.833

在我看来，合乎逻辑且更具可扩展性的方法是从`asp:`列表控件中获取一个页面：

```
<uc1:mycontrol runat="server">
    <uc1:myintparam>1</uc1:myintparam>
    <uc1:myintparam>2</uc1:myintparam>
    <uc1:myintparam>3</uc1:myintparam>
</uc1:mycontrol> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-02-22T16:57:02.137

很棒的片段@mathieu。我需要使用它来转换 long，但我没有制作 LongArrayConverter，而是编写了一个使用泛型的版本。

```
public class ArrayConverter<T> : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return sourceType == typeof(string);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, object value)
    {
        string val = value as string;
        if (string.IsNullOrEmpty(val))
            return new T[0];

        string[] vals = val.Split(',');
        List<T> items = new List<T>();
        Type type = typeof(T);
        foreach (string s in vals)
        {
            T item = (T)Convert.ChangeType(s, type);
            items.Add(item);
        }
        return items.ToArray();
    }
} 
```

此版本应适用于任何可从字符串转换的类型。

```
[TypeConverter(typeof(ArrayConverter<int>))]
public int[] Ints { get; set; }

[TypeConverter(typeof(ArrayConverter<long>))]
public long[] Longs { get; set; }

[TypeConverter(typeof(ArrayConverter<DateTime))]
public DateTime[] DateTimes { get; set; } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T19:23:59.460

您是否尝试过查看类型转换器？这个页面看起来值得一看： http: [//www.codeguru.com/columns/VB/article.php/c6529/](http://www.codeguru.com/columns/VB/article.php/c6529/)

此外，Spring.Net 似乎有一个 StringArrayConverter （[http://www.springframework.net/doc-latest/reference/html/objects-misc.html](http://www.springframework.net/doc-latest/reference/html/objects-misc.html) - 第 6.4 节），如果你可以将它提供给 ASP.net用 TypeConverter 属性装饰属性，可能会起作用..

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-11-23T11:45:34.880

你也可以这样做：

```
namespace InternalArray
{
    /// <summary>
    /// Item for setting value specifically
    /// </summary>

    public class ArrayItem
    {
        public int Value { get; set; }
    }

    public class CustomUserControl : UserControl
    {

        private List<int> Ints {get {return this.ItemsToList();}
        /// <summary>
        /// set our values explicitly
        /// </summary>
        [PersistenceMode(PersistenceMode.InnerProperty), TemplateContainer(typeof(List<ArrayItem>))]
        public List<ArrayItem> Values { get; set; }

        /// <summary>
        /// Converts our ArrayItem into a List<int> 
        /// </summary>
        /// <returns></returns>
        private List<int> ItemsToList()
        {
            return (from q in this.Values
                    select q.Value).ToList<int>();
        }
    }
} 
```

这将导致：

```
<xx:CustomUserControl  runat="server">
  <Values>
            <xx:ArrayItem Value="1" />
  </Values>
</xx:CustomUserControl> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T19:43:22.677

要添加构成列表的子元素，您需要以某种方式设置控件：

```
[ParseChildren(true, "Actions")]
[PersistChildren(false)]
[ToolboxData("<{0}:PageActionManager runat=\"server\" ></PageActionManager>")]
[NonVisualControl]
public class PageActionManager : Control
{ 
```

上面的 Actions 是子元素所在的 cproperty 的名称。我使用 ArrayList，因为我没有用它测试任何其他内容。：

```
 private ArrayList _actions = new ArrayList();
    public ArrayList Actions
    {
        get
        {
            return _actions;
        }
    } 
```

当您的 contorl 初始化时，它将具有子元素的值。那些你可以制作一个只包含整数的迷你类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T19:30:59.287

做比尔所说的，你只需要在你的用户控件上创建一个 List 属性。然后您可以按照 Bill 的描述来实现它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T19:38:36.353

您可以在 aspx 中添加页面事件，如下所示：

```
<script runat="server">
protected void Page_Load(object sender, EventArgs e)
{
    YourUserControlID.myintarray = new Int32[] { 1, 2, 3 };
}
</script> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T20:07:03.413

您可以实现一个在 int 数组和字符串数据类型之间进行转换的类型转换器类。然后使用 TypeConverterAttribute 装饰您的 int 数组属性，指定您实现的类。然后，Visual Studio 将使用您的类型转换器对您的属性进行类型转换。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-24T14:26:23.350

如果在其中一个父控件上使用 DataBinding，则可以使用 DataBinding 表达式：

```
<uc1:mycontrol runat="server" myintarray="<%# new [] {1, 2, 3} %>" /> 
```

使用自定义表达式生成器，您可以执行类似的操作。表达式生成器：

```
[ExpressionPrefix("Code")]
public class CodeExpressionBuilder : ExpressionBuilder
{
    public override CodeExpression GetCodeExpression(System.Web.UI.BoundPropertyEntry entry, object parsedData, ExpressionBuilderContext context)
    {
        return new CodeSnippetExpression(entry.Expression.Trim());
    }
} 
```

用法：

```
<uc1:mycontrol runat="server" myintarray="<%$ Code: new [] {1, 2, 3} %>" /> 
```

# html - 抓取多框架网站

> ID：116810
> 
> 赞同：3
> 
> 时间：2008-09-22T19:04:38.977
> 
> 标签：html, wget, frames

我正在审核我们现有的 Web 应用程序，它大量使用[HTML 框架](http://www.w3schools.com/HTML/html_frames.asp)。我想下载每一帧中的所有 HTML，有没有一种方法可以用[wget](http://www.gnu.org/software/wget/)或一些脚本来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-22T19:14:23.493

作为史蒂夫回答的补充：

跨越到任何主机——'-H'</p>

'-H' 选项打开主机跨越，从而允许 Wget 的递归运行访问链接引用的任何主机。除非应用了足够的递归限制标准，否则这些外部主机通常会链接到更多主机，依此类推，直到 Wget 最终吸收的数据比您预期的要多得多。

限制跨越到某些域——'-D'</p>

“-D”选项允许您指定将遵循的域，从而将递归限制为仅属于这些域的主机。显然，这仅在与“-H”结合使用时才有意义。

一个典型的例子是下载“www.server.com”的内容，但允许从“images.server.com”等下载：

```
 wget -rH -Dserver.com http://www.server.com/ 
```

您可以指定多个地址，用逗号分隔它们，

例如'-Ddomain1.com,domain2.com'。

取自：[wget手册](http://www.gnu.org/software/wget/manual/html_node/Spanning-Hosts.html#Spanning-Hosts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T19:10:53.143

```
wget --recursive --domains=www.mysite.com http://www.mysite.com 
```

这表明递归爬网也应该遍历帧和 iframe。请注意将递归范围仅限于您的网站，因为您可能不想爬取整个网络。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T19:21:05.333

wget 有一个 -r 选项可以使其递归，请尝试**wget -r -l1** （以防字体难以阅读：最后一部分是小写 L 后跟数字一） -l1 部分告诉它递归最大深度为 1。尝试使用这个数字来刮更多。

# regex - 排除关键字集的正则表达式

> ID：116819
> 
> 赞同：51
> 
> 时间：2008-09-22T19:05:50.690
> 
> 标签：regex, regex-negation

我想要一个在遇到诸如“boon.ini”和“http”之类的词时会失败的表达式。目标是采用此表达式并能够为任何一组关键字构建。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-09-22T19:14:24.303

```
^(?:(?!boon\.ini|http).)*$\r?\n? 
```

（取自[RegexBuddy](http://www.regexbuddy.com)的库）将匹配任何不包含 boon.ini 和/或 http 的行。那是你想要的吗？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-06T21:58:10.603

可以使用的另一种表达方式：

```
^(?!.*IgnoreMe).*$ 
```

`^`= 表示行首
`$`= 表示行尾
`(?! Expression)`= 表示零宽度前瞻 表达式的负匹配

在`^`前面是必需的，否则在评估时，负面展望可能从“IgnoreMe”文本之内/之外的某个地方开始 - 并在您不想要的地方进行匹配。

例如，如果您使用正则表达式：

```
(?!.*IgnoreMe).*$ 
```

输入“Hello IgnoreMe Please”，这将导致类似：“gnoreMe Please”，因为否定的前瞻发现在“I”之后没有完整的字符串“IgnoreMe”。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-09-22T19:14:08.283

与其在表达式中否定结果，不如在代码中进行。这样，表达式变得非常简单。

```
\b(boon\.ini|http)\b 
```

`true`如果 boon.ini 或 http 在您的字符串中的任何位置，将返回。`\b`由于, 或单词边界，它不会匹配 httpd 或 httpxyzzy 之类的单词。如果你愿意，你可以删除它们，它也会匹配那些。要添加更多关键字，只需添加更多管道。

```
\b(boon\.ini|http|foo|bar)\b 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-22T19:16:56.547

编写一个在遇到您要查找的单词时会*成功*的正则表达式，然后反转条件，您可能会得到很好的服务。

例如，在 perl 中你会使用：

```
if (!/boon\.ini|http/) {
    # the string passed!
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-05-09T16:18:01.450

```
^[^£]*$ 
```

上面的表达式将只限制字符串中的井号。这将允许除字符串之外的所有字符。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T19:29:20.633

哪种语言/正则表达式库？我以为您的问题是关于 ASP.NET，在这种情况下您可以看到本文的“负面外观”部分：http: [//msdn.microsoft.com/en-us/library/ms972966.aspx](http://msdn.microsoft.com/en-us/library/ms972966.aspx)

严格来说，正则表达式的否定仍然定义了正则语言，但很少有库/语言/工具可以表达它。

负向查找可能为您提供相同的服务，但实际语法取决于您使用的内容。蒂姆的回答是一个例子`(?...)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-28T18:07:05.843

我使用它（基于 Tim Pietzcker 的回答）来排除 Google Analytics 配置文件过滤器的非生产子域 URL：

```
^\w+-*\w*\.(?!(?:alpha(123)*\.|beta(123)*\.|preprod\.)domain\.com).*$ 
```

您可以在此处查看上下文：[Regex to Exclude Multiple Words](http://technicaldebt.com/?p=1496)

# php - 用 php 在 mysql 表中获取总记录数的最佳方法是什么？

> ID：116824
> 
> 赞同：8
> 
> 时间：2008-09-22T19:06:16.103
> 
> 标签：php, mysql

从大表中选择记录总数的最有效方法是什么？目前，我只是在做

```
$result = mysql_query("SELECT id FROM table");
$total = mysql_num_rows($result) 
```

有人告诉我，如果表中有很多记录，这不是非常有效或快速。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-09-22T19:08:40.747

你被正确地告诉了。mysql 可以为你做这个计数，效率更高。

```
$result = mysql_query( "select count(id) as num_rows from table" );
$row = mysql_fetch_object( $result );
$total = $row->num_rows; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-22T19:07:02.233

您应该使用[SQL 内置的 COUNT 函数](http://dev.mysql.com/doc/refman/5.0/en/counting-rows.html)：

```
$result = mysql_query("SELECT COUNT(id) FROM table"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-22T20:16:16.263

**MyISAM 表已经存储了行数**

```
SELECT COUNT(*) FROM table 
```

在 MyISAM 表上只是读取该值。它不扫描表或索引。因此，它与从不同表中读取值一样快或更快。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-22T19:14:44.287

根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count)，如果您使用的是 MyISAM 表（这是最常用的表类型），这是最有效的：

```
$result = mysql_query("SELECT COUNT(*) FROM table"); 
```

否则，您应该按照 Wayne 的说明进行操作，并确保已对计数列进行了索引。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T19:38:21.110

我可以补充一下，获取记录总数的最“有效”方法，尤其是在大表中，是将总数保存为另一个表中的数字。这样，您不必每次想要获取总数时都查询整个表。

但是，您必须在数据库中设置一些代码或触发器，以在添加/删除行时增加或减少该数字。

所以这不是最简单的方法，但如果您的网站增长，您绝对应该考虑这样做。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-02T11:02:13.213

尽管我同意使用内置函数，但我并没有真正看到 mysql_num_rows 和 count(id) 之间的任何性能差异。对于 25000 个结果，相同的性能（可以说是精确的）。仅作记录。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T19:13:32.810

像这样的东西怎么样：

```
$result = mysql_query("SELECT COUNT(id) AS total_things from table");
$row = mysql_fetch_array($result,MYSQL_ASSOC);
$num_results = $row["total_things"]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-09T15:19:02.993

只是想注意`SHOW TABLE STATUS`返回一`Rows`列，尽管我不能说它的效率。一些轻松的谷歌搜索发现了两年前 MySQL 4 运行缓慢的报告。可能会进行有趣的计时赛。

另请注意有关不准确计数的[InnoDB 警告。](http://dev.mysql.com/doc/refman/5.0/en/show-table-status.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-13T12:22:07.557

使用聚合函数。试试下面的 SQL 命令

```
$num= mysql_query("SELECT COUNT(id) FROM $table"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-01T21:49:48.707

mysqli_query() 已弃用。更好地使用这个：

```
$result = $dbh->query("SELECT id FROM {table_name}");
$total = $result->num_rows; 
```

使用 PDO：

```
$result = $dbh->query("SELECT id FROM {table_name}");
$total = $result->rowCount(); 
```

（其中 '$dbh' = 连接到的数据库的句柄）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-28T09:38:43.780

我有一个大表（> 5000 万行），计算主键需要很长时间，所以我使用以下内容：

```
SELECT TABLE_NAME, TABLE_ROWS
FROM information_schema.tables
WHERE TABLE_SCHEMA = "database"; 
```

将数据库替换为您的架构名称。

# c# - C# 中是否有“匿名”通用标签，例如“？” 在 Java 中？

> ID：116830
> 
> 赞同：39
> 
> 时间：2008-09-22T19:07:11.327
> 
> 标签：c#, generics, syntax

在 Java 中，可以声明一个由“未知”泛型类型参数化的变量，如下所示：

```
Foo<?> x; 
```

在 C# 中是否有与此问号等效的构造？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2008-09-22T19:25:11.657

最简洁的答案是不。C# 中没有等效的功能。

Dare Obasanjo[从 Java 开发人员的角度来看 C# 的](http://www.25hoursaday.com/CsharpVsJava.html#generics)一种解决方法：

在某些情况下，可能需要创建一种方法，该方法可以对包含任何类型的数据结构进行操作，而不是那些包含特定类型的数据结构（例如，打印数据结构中所有对象的方法），同时仍然利用泛型中的强类型。在 C# 中指定这一点的机制是通过称为泛型类型推断的功能，而在 Java 中这是使用通配符类型完成的。以下代码示例显示了两种方法如何导致相同的结果。

C# 代码

```
using System;
using System.Collections;
using System.Collections.Generic; 

class Test{

    //Prints the contents of any generic Stack by 
    //using generic type inference 
    public static void PrintStackContents<T>(Stack<T> s){
        while(s.Count != 0){
            Console.WriteLine(s.Pop()); 
        } 
    }

    public static void Main(String[] args){

    Stack<int> s2 = new Stack<int>(); 
    s2.Push(4); 
    s2.Push(5); 
    s2.Push(6); 

    PrintStackContents(s2);     

    Stack<string> s1 = new Stack<string>(); 
    s1.Push("One"); 
    s1.Push("Two"); 
    s1.Push("Three"); 

    PrintStackContents(s1); 
    }
} 
```

Java 代码

```
import java.util.*; 

class Test{

    //Prints the contents of any generic Stack by 
    //specifying wildcard type 
    public static void PrintStackContents(Stack<?> s){
        while(!s.empty()){
            System.out.println(s.pop()); 
        }
    }

    public static void main(String[] args){

    Stack <Integer> s2 = new Stack <Integer>(); 
    s2.push(4); 
    s2.push(5); 
    s2.push(6); 

    PrintStackContents(s2);     

    Stack<String> s1 = new Stack<String>(); 
    s1.push("One"); 
    s1.push("Two"); 
    s1.push("Three");   

    PrintStackContents(s1); 
    }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-22T19:16:34.970

AFAIK 你不能在 C# 中做到这一点。BCL 做了什么并且有大量的例子是创建一个非泛型的类，然后创建一个从前一个继承基本行为的泛型类。请参见下面的示例。

```
class Foo
{
}

class Foo<T> : Foo
{
} 
```

你可以这样写：

```
Foo t = new Foo<int>(); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-06T08:19:02.580

虽然公认不是干净的方法，但使用`Foo<object> x`也可能是合适的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-22T19:34:56.597

C# 中没有等价物，这不是（完全）正确的。没有任何静态等价物可以用作类型或调用方法，这是真的。为此，请使用[Jorge 的回答](https://stackoverflow.com/questions/116830/is-there-an-anonymous-generic-tag-in-c-like-in-java#116881)。

另一方面，有时您需要等效的思想来进行反思，并且那里有等效的想法。如果你有：

```
interface IFoo<T>
{
  T Bar(T t, int n);
} 
```

你可以得到一个`Type`代表`IFoo<int>`using `typeof(IFoo<int>)`。鲜为人知，对您的问题的部分回答是，您还可以获得`Type`表示`IFoo<T>`using的 a `typeof(IFoo<>)`。

`IFoo<T>`当您想通过反射使用某些内容并且直到运行时才`T`知道时，这很有用。`T`

```
Type theInterface = typeof(IFoo<>);
Type theSpecificInterface = theInterface.MakeGenericType(typeof(string));

// theSpecificInterface now holds IFoo<string> even though we may not have known we wanted to use string until runtime

// proceed with reflection as normal, make late bound calls / constructions, emit DynamicMethod code, etc. 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-22T19:15:39.637

C# 中没有等效的语法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T19:14:55.007

不，C# 中没有完全相同的概念。您需要引用 Foo 的基类（可能是非泛型 Foo），或者将您正在使用的方法设为泛型本身（以便您可以引用 Foo，并让您的方法的调用者确定什么 T是）。

希望有帮助。

# asp.net - 有没有办法阻止同一网页上的其他 ReportViewer 刷新？

> ID：116846
> 
> 赞同：1
> 
> 时间：2008-09-22T19:09:25.783
> 
> 标签：asp.net, reporting-services, reportviewer

目前，我正在处理一个网页，该网页有六个[ReportViewer](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportviewer(VS.80).aspx)控件，这些控件正在使用远程处理并允许向下钻取。当用户单击一个控件时，整个页面都会刷新，而其他五个报表也会全部刷新。用户当前要求删除其他控件的刷新，只支持他们单击刷新的那个。有没有办法做到这一点，我注意到在 Sharepoint 中单击向下钻取报告不需要重新加载整个页面，我想知道是否可以提供相同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T20:15:43.877

我一直在对此问题进行更多研究，看起来ReportViewer 控件的[AsyncRendering属性控制了我正在寻找的功能。](http://msdn.microsoft.com/en-us/library/ms252090(VS.80).aspx)当它设置为“false”时，它会阻止显示“正在生成报告”消息，这是用户评论的内容。缺点是页面加载时间可能比以前长一些，但由于我们正在开发机器上工作，一旦我们移动到实际的生产机器，这可能不会那么明显。

# ruby-on-rails - 开始使用轨道？一定要有宝石吗？

> ID：116854
> 
> 赞同：14
> 
> 时间：2008-09-22T19:12:11.847
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在使用 Rails 开始一个项目，但我正在等待实用 Rails 书的第 3 版出版，然后再购买一本书。

无论如何，我的问题比我如何开始更尖锐......

每个人都使用的必备宝石有哪些？

我需要基本身份验证，所以我有 restful 身份验证 gem，但除此之外，我不知道我不知道什么。在某处是否存在这些信息的枯竭？99% 的人在启动新的 Rails 应用程序时都会使用一些基本设置？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-22T19:17:31.270

我在大多数项目中倾向于使用的 gems 和插件是：

*   [Restful Authentication](http://github.com/technoweenie/restful-authentication/tree/master) -- 用于身份验证
*   [Will Paginate](http://github.com/mislav/will_paginate/tree/master) -- 用于分页
*   [附件 Fu](https://github.com/technoweenie/attachment_fu/tree/master) -- 用于图像和文件附件
*   [RedCloth](http://redcloth.org/) -- 用于纺织品渲染
*   [Capistrano——](http://capify.org/)用于部署

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-22T19:17:43.970

对于分页，[will_paginate](http://github.com/mislav/will_paginate/tree/master)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-22T19:18:22.563

这是非常非常主观的，因为这完全取决于您的应用程序的功能！但是，我刚刚查看了我已安装的 Gems，而绝对强制要求的一个是[Capistrano](http://www.capify.org/)。

BTW Restful Authentication 是 Rails 插件而不是 Gem。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-22T19:46:29.220

[HAML](http://haml.hamptoncatlin.com/docs/)是必须的。您再也不会以同样的方式思考 HTML 了——不再有标签汤。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-23T00:16:36.573

您需要的唯一宝石是：

*   导轨
*   耙

如果您“gem install rails”，您将获得 Rails 所需的一切。您只在需要时才需要宝石，因此在此之前无需担心。

编辑：实际上你可能还需要几个：

*   mysql - 或您需要的任何 Ruby 数据库驱动程序
*   mongrel - 在生产之前你不一定需要这个，但在开发/测试中使用也很好
*   ZenTest - 我主要将它用于“自动测试”，以便每当我的源文件更改时我的测试都会在控制台窗口中运行

可能还有许多其他宝石可以帮助您，但我们需要您提供更多信息才能知道它们是否适用，例如：

*   网页抓取（hpricot）
*   CSV（更快的csv）
*   Amazon S3 支持 (aws-s3)
*   图像处理（rmagick）
*   绘图（粗鲁） - 我用这个作为插件
*   基于角色的安全性 (role_requirement) - 这也是一个插件

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-23T00:22:55.500

*   须藤宝石安装[哈姆](http://haml.hamptoncatlin.com/)
*   须藤宝石安装[ZenTest](http://www.zenspider.com/ZSS/Products/ZenTest/)
*   [轨道上的 rspec](http://github.com/dchelimsky/rspec-rails/wikis/home)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-23T03:06:25.170

怎么没有人提到[andand](http://andand.rubyforge.org/)呢？这是自那以后最好的事情`||=`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-11-28T01:35:32.147

mini_magick 而不是 rmagick。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-11-28T01:51:33.963

可能需要关注：[http](http://rubygems.org/) ://rubygems.org/ - 你可以在那里看到一些有趣的统计数据：下载最多、最活跃等...

也很有趣，有点说明：[https ://github.com/languages/Ruby](https://github.com/languages/Ruby)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-10-27T01:39:15.163

这是一个旧线程，但我想我会用我认为此时必须拥有的宝石来完善列表：

*   [RSpec](http://rspec.info/)或[Shoulda](https://github.com/thoughtbot/shoulda) - 用于 BDD/测试的工具
*   [factory_girl](https://github.com/thoughtbot/factory_girl) - 夹具更换
*   [will_paginate](https://github.com/mislav/will_paginate/wiki) - 简单的分页
*   [回形针](https://github.com/thoughtbot/paperclip)- 图片上传/附件
*   [CanCan-](https://github.com/ryanb/cancan)授权
*   [Authlogic](https://github.com/binarylogic/authlogic) - 身份验证
*   [HAML](http://haml-lang.com/) - 模板引擎

# java - Java中闭包的当前状态是什么？

> ID：116865
> 
> 赞同：19
> 
> 时间：2008-09-22T19:14:28.407
> 
> 标签：java, closures

有人知道，Java 7 中是否会出现闭包？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-22T19:20:52.887

在创建 Java SE 7 JSR（可能是由 Danny Coward）创建专家组并选择内容之前，它是未知的。

我的 Java 7 页面是一个很好的关于 Java 7 的链接集合，并且包含所有闭包提案和博客条目的链接：

[http://tech.puredanger.com/java7#closures](http://tech.puredanger.com/java7#closures)

我维护了一个 Java 7 链接博客，您可以在其中找到关于闭包和其他内容的链接：

[http://java7.tumblr.com](http://java7.tumblr.com)

如果您想要我的意见，您可能会发现我的 Java 7 预测博客文章也很有趣：http: [//tech.puredanger.com/2008/08/02/java7-prediction-update/](http://tech.puredanger.com/2008/08/02/java7-prediction-update/)

更新：Mark Reinhold 于 12 月 8 日在 Devoxx 上表示，由于对如何实现缺乏共识，闭包不会包含在 Java 7 中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-12-30T18:56:29.023

在 Devoxx 2008 上，[Mark Reinhold 明确](http://java.dzone.com/articles/java-7-update-mark-reinhold-de)表示Java 7 中*不会*包含闭包。

* * *

等待！闭包*将*包含在 Java 7 中。Mark Reinhold在 Devoxx 2009 上[宣布了这一逆转。](http://blogs.oracle.com/mr/entry/closures)

* * *

保护它！闭包（*lambda 表达式*）已推迟到 Java 8。请关注[Project Lambda (JSR 335)](http://openjdk.java.net/projects/lambda/)以获取更多信息。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-22T19:21:34.367

目前有几个竞争提案，[BGGA](http://www.javac.info/)、[CICE](http://www.javac.info/)等。不幸的是，关于最佳方法的激烈辩论仍然存在。因此，由于接受过程的保守性质，此时闭包不太可能进入 Java 7。

这里的关键问题是，在不无意中引入显着复杂性的情况下，向预先存在的语言添加功能可能非常困难。这就是 Java 1.5 中泛型的经验，许多人担心它会随着闭包的引入而复杂化。

我的建议是，如果你真的想使用像闭包这样的现代语言特性，但又希望留在 Java 生态系统中，你应该看看[Scala](http://www.scala-lang.org/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-22T19:47:50.543

Groovy 是我见过的最好的 Java 替代品，它包括动态语言的特性，包括闭包、运行时类扩展等。虽然 Ruby 有一点设计优势，恕我直言，我不得不说 Groovy 编译成 Java 字节的事实-无需任何接口代码的代码和与 Java 交互是一个不可忽视的巨大优势。

[http://groovy.codehaus.org](http://groovy.codehaus.org)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-10T16:31:36.307

显然闭包不会出现在 Java 7 中。请参阅[this](http://rickyclarkson.blogspot.com/2008/12/java-just-died-no-closures-in-java-7.html) 和[this](http://groups.google.com/group/javaposse/browse_thread/thread/a8994433180f5872)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-09-12T07:42:23.563

闭包不会在 Java 7 中明确出现，但是如果您正在寻找更轻的解决方案来在 Java 中使用闭包，请查看它们是如何在 lambdaj 库中实现的：

[http://code.google.com/p/lambdaj/wiki/Closures](http://code.google.com/p/lambdaj/wiki/Closures)

# asp.net - 使用 C# 和 ASP.net 在基于 url 的控件中拉入动态图像

> ID：116869
> 
> 赞同：0
> 
> 时间：2008-09-22T19:14:55.007
> 
> 标签：asp.net, image, dynamic

我知道这是一个愚蠢的问题。出于某种原因，我对此一无所知。有任何想法吗？

抱歉应该更清楚。

使用 a`HtmlGenericControl`拉入链接描述和图像。

```
 private void InternalCreateChildControls()
    {
        if (this.DataItem != null && this.Relationships.Count > 0)
        {
            HtmlGenericControl fieldset = new HtmlGenericControl("fieldset");
            this.Controls.Add(fieldset);
            HtmlGenericControl legend = new HtmlGenericControl("legend");
            legend.InnerText = this.Caption;
            fieldset.Controls.Add(legend);

            HtmlGenericControl listControl = new HtmlGenericControl("ul");
            fieldset.Controls.Add(listControl);

            for (int i = 0; i < this.Relationships.Count; i++)
            {
                CatalogRelationshipsDataSet.CatalogRelationship relationship =
                    this.Relationships[i];

                HtmlGenericControl listItem = new HtmlGenericControl("li");
                listControl.Controls.Add(listItem);

                RelatedItemsContainer container = new RelatedItemsContainer(relationship);
                listItem.Controls.Add(container);

                Image Image = new Image();
                Image.ImageUrl = relationship.DisplayName;

                LinkButton link = new LinkButton();
                link.Text = relationship.DisplayName;

               ///ToDO Add Image or Image and description
                link.CommandName = "Redirect";
                container.Controls.Add(link);
            }
        }
    } 
```

**不要求任何人为我做这件事只是一个参考或一个想法。**

谢谢 - 过度沮丧和感到谦卑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T19:22:29.450

我假设您想根据 url 动态生成图像。

我通常做的是创建一个非常轻量级的 HTTPHandler 来提供图像：

```
using System;
using System.Web;

namespace Example
{  
    public class GetImage : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            if (context.Request.QueryString("id") != null)
            {
                // Code that uses System.Drawing to construct the image
                // ...
                context.Response.ContentType = "image/pjpeg";
                context.Response.BinaryWrite(Image);
                context.Response.End();
            }
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
} 
```

您可以直接在您的 img 标签中引用它：

```
<img src="GetImage.ashx?id=111"/> 
```

或者，您甚至可以创建一个为您执行此操作的服务器控件：

```
using System;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Example.WebControl
{

    [ToolboxData("<{0}:DynamicImageCreator runat=server></{0}:DynamicImageCreator>")]
    public class DynamicImageCreator : Control
    {

        public int Id
        {
            get
            {
                if (ViewState["Id" + this.ID] == null)
                    return 0;
                else
                    return ViewState["Id"];
            }
            set
            {
                ViewState["Id" + this.ID] = value;
            }
        }

        protected override void RenderContents(HtmlTextWriter output)
        {
            output.Write("<img src='getImage.ashx?id=" + this.Id + "'/>");
            base.RenderContents(output);
        }
    }
} 
```

这可以像这样使用

```
<cc:DDynamicImageCreator id="db1" Id="123" runat="server/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T19:18:17.853

查看ASP.NET 团队在 CodePlex 中发布的新[DynamicImage 控件。](http://www.codeplex.com/aspnet/Wiki/View.aspx?title=WebForms&referringTitle=Home)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-22T19:17:02.130

这是一个可怕的问题。我的意思是，.NET 有一个图像控件，您可以在其中将源设置为您想要的任何内容。我不确定你想讨论什么。

# windows - 你如何在 NSIS 中设置目录权限？

> ID：116876
> 
> 赞同：38
> 
> 时间：2008-09-22T19:15:37.407
> 
> 标签：windows, installation, permissions, nsis

我正在尝试使用需要管理员安装的 Nullsoft 安装系统构建 Windows 安装程序。安装程序会创建一个“日志”目录。由于普通用户可以运行此应用程序，因此该目录需要普通用户可写。如何指定所有用户都应该有权以 NSIS 脚本语言对该目录进行写访问？

我承认这听起来有点像一个坏主意，但该应用程序只是私有网络上只有少数人使用的内部应用程序。我只需要保存日志文件，这样我就可以看到如果发生不好的事情，应用程序为什么会损坏。用户不能成为管理员。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-09-22T19:47:19.827

使用[AccessControl](http://nsis.sourceforge.net/AccessControl_plug-in)插件，然后将其添加到脚本中，其中“logs”目录位于安装目录中。

```
AccessControl::GrantOnFile "$INSTDIR\logs" "(BU)" "FullAccess" 
```

这为所有用户提供了对该文件夹的完全访问权限。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2010-10-13T16:01:41.547

`AccessControl::GrantOnFile "<folder>" "(BU)" "FullAccess"`在 Windows Server 2008 机器上对我不起作用。相反，我不得不使用这个：

`AccessControl::GrantOnFile "<folder>" "(S-1-5-32-545)" "FullAccess"`

根据 Microsoft 支持，S-1-5-32-545 相当于“用户” [：Windows 操作系统中的知名安全标识符](https://support.microsoft.com/en-us/help/243330/well-known-security-identifiers-in-windows-operating-systems)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-24T18:56:59.913

与其更改 Program Files 下目录的权限，不如将日志放在所有用户均可写入的位置。

请参阅 NSIS 文档中的 4.9.7.7 SetShellVarContext 部分。您可以将它与 $APPDATA 一起使用，以获取所有用户均可写入的应用程序数据文件夹。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2011-03-03T08:57:32.750

现在这是一个老问题，但正如 Sören 所建议的，APPDATA 目录是做你想做的事的好方法，事情是：不要拿用户的个人 APPDATA 而是“所有用户”的 APPDATA 目录！这样任何人都可以访问日志文件;-)

另外，我在某处读到，在 GrantOnFile 上使用 (BU) 在某些系统上无法正常工作（如果我没记错的话，Win 7 x64），也许你应该使用 SID "(S-1-5-32-545)" 代替（它是所有用户的 SID，这个值在每个 Windows 操作系统上都是一个常量）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-22T19:21:05.147

一种方法：调用 shell，然后使用[`cacls`](http://technet.microsoft.com/en-us/library/bb490872.aspx)or [`xcacls`](http://support.microsoft.com/kb/318754)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T19:22:33.660

为什么不在用户的 %APPDATA% 目录中创建一个日志目录？您真的需要将所有日志都放在安装目录中吗？为什么？

# ruby-on-rails - Rails 测试使用 Sqlite3 失败

> ID：116887
> 
> 赞同：3
> 
> 时间：2008-09-22T19:17:19.150
> 
> 标签：ruby-on-rails, ruby

当我在 Rails 中运行测试时，我似乎遇到了一个奇怪的错误，它们都因相同的原因而失败，并且没有任何在线文档似乎对这个特定错误特别有帮助：

```
SQLite3::SQLException: cannot rollback - no transaction is active 
```

这个错误削弱了我测试​​应用程序的能力，而且似乎突然出现了。我有最新版本的 sqlite3 (3.6.2)、最新的 sqlite3-ruby (1.2.4) gem 和最新的 rails (2.1.1)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T20:11:21.000

检查[http://dev.rubyonrails.org/ticket/4403](http://dev.rubyonrails.org/ticket/4403)，它显示了一种解决方法。这可能是您遇到的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-24T19:55:21.087

我曾经遇到过这个问题，但使用的是 MySQL。原来我没有创建测试数据库。嗬！我相信 Rails 和 sqlite 会自动创建它们（至少在 Windows 中是这样）。

正在尝试做内存测试吗？如果不存在，测试数据库是否存在？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-26T17:04:15.807

谢谢您的帮助。实际上，我最终只是删除了 rails 文件夹并从版本控制中检出最后一个工作副本。我进行了相同的更改，但这个问题没有再次出现，所以要么我搞砸了，要么 Rails 出现了某种打嗝。谢天谢地我有版本控制:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-26T20:47:05.450

我在运行测试时遇到此错误，最后一条语句是单击表单提交。一旦我做了一个断言或应该测试，测试就会正确关闭，我不必重新运行 rake db:test:prepare

# sql - 就像在 CASE 语句中没有按预期进行评估一样

> ID：116888
> 
> 赞同：1
> 
> 时间：2008-09-22T19:17:22.207
> 
> 标签：sql, sql-server

鉴于此数据：

```
CREATE TABLE tmpTable(
fldField varchar(10) null);

INSERT INTO tmpTable
SELECT 'XXX'
UNION ALL 
SELECT 'XXX'
UNION  ALL
SELECT 'ZZZ'
UNION  ALL
SELECT 'ZZZ'
UNION  ALL
SELECT 'YYY'

SELECT
CASE WHEN fldField like 'YYY' THEN 'OTH' ELSE 'XXX' END AS newField
FROM tmpTable 
```

预期的结果集是：
XXX
XXX
XXX
XXX
OTH

什么情况会导致 SQL Server 2000 找不到“YYY”？并返回以下结果集：
XXX
XXX
XXX
XXX
XXX

问题出在'YYY'之类的问题上，我找到了其他方法来编写它以使其工作，但我想知道为什么这种确切的方法不起作用。另一个困难是它适用于我的大多数 SQL Server 2000 环境。我需要找出它们之间有什么不同导致这种情况。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T20:38:19.750

我在 SQL 2000 机器上运行代码并得到了相同的结果。不仅如此，当我运行一些额外的代码进行测试时，我得到了一些非常奇怪的结果：

```
CREATE TABLE dbo.TestLike ( my_field varchar(10) null);
GO
CREATE CLUSTERED INDEX IDX_TestLike ON dbo.TestLike (my_field)
GO
INSERT INTO dbo.TestLike (my_field) VALUES ('XXX')
INSERT INTO dbo.TestLike (my_field) VALUES ('XXX')
INSERT INTO dbo.TestLike (my_field) VALUES ('ZZZ')
INSERT INTO dbo.TestLike (my_field) VALUES ('ZZZ')
INSERT INTO dbo.TestLike (my_field) VALUES ('YYY')
GO

SELECT
      my_field,
      case my_field when 'YYY' THEN 'Y' ELSE 'N' END AS C2,
      case when my_field like 'YYY' THEN 'Y' ELSE 'N' END AS C3,
      my_field
FROM dbo.TestLike
GO 
```

我的结果：

```
my_field   C2   C3   my_field
---------- ---- ---- ----------
N          XXX  N    XXX
N          XXX  N    XXX
Y          YYY  N    YYY
N          ZZZ  N    ZZZ
N          ZZZ  N    ZZZ 
```

注意 my_field 如何在同一行中有两个不同的值？我已经请了这里办公室的其他人进行快速测试。对我来说似乎是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-23T14:38:48.267

检查您的服务包。将我的 SQL 2000 机器升级到 SP4 后，我现在得到了适合您情况的正确值。

不过，我仍然收到我在之前的帖子中报告的交换数据 :(

如果你这样做`SELECT @@version`，你应该得到 8.00.2039。任何低于该版本号的版本，您都应该安装 SP4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T19:22:41.400

怎么样`fldField = '%YYY%'`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T19:44:06.307

它在我的 SQL 2005 安装中按预期工作。如果它在其他机器上工作，听起来你有一个环境差异。尝试在 SQL Server Management Studio 中比较您的连接属性，了解一个有效的连接和一个无效的连接，看看您是否能找出差异所在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T20:08:23.753

我是 Oracle 人员，而不是 SQL*Server 人员，但在我看来，您应该是：-

```
SELECT
   CASE WHEN fldField like '%YYY%' THEN 
             'OTH' 
        ELSE 'XXX'
   END AS newField 
FROM
   tmpTable 
```

或者 ...

```
SELECT
   CASE WHEN fldField = 'YYY' THEN 
             'OTH' 
        ELSE 'XXX'
   END AS newField 
FROM
   tmpTable 
```

第二个是我要走的方向，至少在 Oracle 中，平等解决的速度比喜欢的快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T20:26:37.423

当您使用 LIKE 而不指定任何搜索条件时，它的行为类似于 = 比较。在您的示例中，我希望它能够正常工作。在您的真实数据中，您的数据中可能有一个隐藏的（不可打印的）字符（想想回车、换行、制表符等......）。

看看这个例子……

```
Declare @tmpTable TABLE(
fldField varchar(10) null);

INSERT INTO @tmpTable
SELECT 'XXX'
UNION ALL 
SELECT 'XXX'
UNION  ALL
SELECT 'ZZZ'
UNION  ALL
SELECT 'ZZZ'
UNION  ALL
SELECT 'YYY'
UNION  ALL
SELECT 'YYY' + Char(10)

SELECT CASE WHEN fldField like 'YYY' THEN 'OTH' ELSE 'XXX' END AS YourOriginalTest,
       CASE WHEN fldField like 'YYY%' THEN 'OTH' ELSE 'XXX' END AS newField
FROM   @tmpTable 
```

您会注意到我添加的最后一条数据是 YYY 和换行符。如果您选择此数据，您将不会注意到数据中的换行符，但它存在，因此您的 LIKE 条件（其作用类似于相等条件）不匹配。

常见的“隐藏”字符是制表符、回车符和换行符。要确定这是否导致您的问题...

```
Select *
From Table
Where  Column Like '%[' + Char(10) + Char(9) + Char(13) + ']%' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T23:32:48.287

多么可爱的虫子。我想我知道原因。如果我是对的，那么您将获得您期望的结果：

```
SELECT
  CASE
    WHEN fldField like 'YYY       '  -- 7 spaces
    THEN 'OTH'
    ELSE 'XXX'
  END as newField
from tmpTable 
```

错误是 varchar(10) 的行为就像 char(10) 应该的那样。至于为什么不这样，您需要了解没有元字符的两个字符串如何可以 = 但不能互相喜欢的古老琐事问题。

问题是 char(10) 应该在内部填充空格。like 运算符不会*忽略*这些空格。= 运算符应该在字符的情况下。内存告诉我，Oracle 通常会忽略字符串的空格。Postgres 做了一些转换技巧。我没有使用过 SQL*Server，所以我不能告诉你它是怎么做的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-03-14T07:10:13.250

通过将 (%) 添加到表达式中，它将正常工作。

```
SELECT
CASE 
    WHEN fldField like '%YYY%' THEN 'OTH' 
    ELSE 'XXX' END AS newField
END 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-22T19:21:51.900

您没有指定要选择的内容并针对...检查 CASE

```
SELECT  CASE fldField WHEN 'YYY' 
THEN 'OTH' ELSE 'XXX' END AS newField FROM tmpTable 
```

# python - 在 Python 中操作数据库结果集的最佳实践？

> ID：116894
> 
> 赞同：6
> 
> 时间：2008-09-22T19:18:21.440
> 
> 标签：python, database

我正在编写一个简单的 Python Web 应用程序，它包含几页为 iPhone 格式化的业务数据。我对 Python 编程很自在，但我对 Python 的“习语”不是很熟悉，尤其是关于类和对象。Python 的面向对象设计与我使用过的其他语言有些不同。因此，即使我的应用程序正在运行，我也很好奇是否有更好的方法来实现我的目标。

细节：通常如何在 Python 中实现 request-transform-render 数据库工作流？目前，我正在使用 pyodbc 获取数据，将结果复制到对象的属性中，使用这些对象的列表执行一些计算和合并，然后渲染对象列表的输出。（下面的示例代码，SQL 查询已编辑。）这是理智的吗？有没有更好的办法？在我对 Python 的相对无知中，是否有任何特定的“陷阱”？我特别关心我是如何使用空的“记录”类实现行列表的。

```
class Record(object):
    pass

def calculate_pnl(records, node_prices):
    for record in records:
        try:
            # fill RT and DA prices from the hash retrieved above
            if hasattr(record, 'sink') and record.sink:
                record.da = node_prices[record.sink][0] - node_prices[record.id][0]
                record.rt = node_prices[record.sink][1] - node_prices[record.id][1]
            else:
                record.da = node_prices[record.id][0]
                record.rt = node_prices[record.id][1]

            # calculate dependent values: RT-DA and PNL
            record.rtda = record.rt - record.da
            record.pnl = record.rtda * record.mw
        except:
            print sys.exc_info()

def map_rows(cursor, mappings, callback=None):
    records = []
    for row in cursor:
        record = Record()
        for field, attr in mappings.iteritems():
            setattr(record, attr, getattr(row, field, None))
        if not callback or callback(record):
            records.append(record)

    return records

def get_positions(cursor):
    # get the latest position time
    cursor.execute("SELECT latest data time")
    time = cursor.fetchone().time
    hour = eelib.util.get_hour_ending(time)

    # fetch the current positions
    cursor.execute("SELECT stuff FROM atable", (hour))

    # read the rows
    nodes = {}
    def record_callback(record):
        if abs(record.mw) > 0:
            if record.id: nodes[record.id] = None
            return True
        else:
            return False
    records = util.map_rows(cursor, {
        'id': 'id',
        'name': 'name',
        'mw': 'mw'
    }, record_callback)

    # query prices
    for node_id in nodes:
        # RT price
        row = cursor.execute("SELECT price WHERE ? ? ?", (node_id, time, time)).fetchone()
        rt5 = row.lmp if row else None

        # DA price
        row = cursor.execute("SELECT price WHERE ? ? ?", (node_id, hour, hour)).fetchone()
        da = row.da_lmp if row else None

        # update the hash value
        nodes[node_id] = (da, rt5)

    # calculate the position pricing
    calculate_pnl(records, nodes)

    # sort
    records.sort(key=lambda r: r.name)

    # return the records
    return records 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T22:23:44.787

空 Record 类和（通常）应用于单个 Record 的自由浮动函数暗示您没有正确设计您的类。

```
class Record( object ):
    """Assuming rtda and pnl must exist."""
    def __init__( self ):
        self.da= 0
        self.rt= 0
        self.rtda= 0 # or whatever
        self.pnl= None # 
        self.sink = None # Not clear what this is
    def setPnl( self, node_prices ):
        # fill RT and DA prices from the hash retrieved above
        # calculate dependent values: RT-DA and PNL 
```

现在，您`calculate_pnl( records, node_prices )`的更简单并且可以正确使用该对象。

```
def calculate_pnl( records, node_prices ):
    for record in records:
        record.setPnl( node_prices ) 
```

关键不是以小方式对代码进行微不足道的重构。

重点是： **一个类封装了责任**。

是的，看起来空洞的课程*通常*是个问题。这意味着职责分散在其他地方。

类似的分析适用于记录的收集。这不仅仅是一个简单的列表，因为集合 - 作为一个整体 - 具有它执行的操作。

“请求-转换-渲染”不太正确。你有一个模型（记录类）。模型的实例被构建（可能是因为请求）。模型对象负责它们自己的状态转换和更新。也许它们被某些检查其状态的对象显示（或渲染）。

正是那个“转换”步骤经常违反良好的设计，将责任分散到各处。“转换”是非对象设计的延续，责任是一个模糊的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T19:30:31.427

您是否考虑过使用 ORM？[SQLAlchemy](http://www.sqlalchemy.org/features.html "SQL 炼金术功能")相当不错，而[Elixir](http://elixir.ematia.de/trac/wiki "长生不老药维基")让它变得漂亮。它确实可以减少处理数据库所需的样板代码量。此外，许多提到的问题已经出现，SQLAlchemy 开发人员已经解决了这些问题*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T21:30:03.357

根据您想要对数据执行多少操作，您可能不需要填充中间对象。游标的标题数据结构将让您获得列名 - 一点内省将让您创建一个字典，其中包含行的 col-name:value 对。您可以将字典传递给 % 运算符。odbc 模块的文档将解释如何获取列元数据。

这段代码以这种方式显示了 % 运算符的应用。

```
>>> a={'col1': 'foo', 'col2': 'bar', 'col3': 'wibble'}
>>> 'Col1=%(col1)s, Col2=%(col2)s, Col3=%(col3)s' % a
'Col1=foo, Col2=bar, Col3=wibble'
>>> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-09-22T19:35:55.937

由于性能问题，为 iPhone 应用程序使用 ORM 可能不是一个好主意，您希望代码尽可能快。所以你不能避免样板代码。如果您正在考虑使用 ORM，除了 SQLAlchemy，我建议您使用 Storm。

# visual-studio - Visual Studio：如何中断处理的异常？

> ID：116896
> 
> 赞同：193
> 
> 时间：2008-09-22T19:18:24.483
> 
> 标签：visual-studio, exception, debugging

我希望 Visual Studio 在发生处理的异常时中断（即我不只是想看到“第一次机会”消息，我想调试实际的异常）。

例如，我希望调试器在异常处中断：

```
try
{
   System.IO.File.Delete(someFilename);
}
catch (Exception)
{
   //we really don't care at runtime if the file couldn't be deleted
} 
```

我遇到了 Visual Studio.NET 的[这些](http://www.syncfusion.com/faq/windowsforms/faq_c60c.aspx#q583q)注释：

> 1）在 VS.NET 中，进入调试菜单>>“异常...”>>“公共语言运行时异常”>>“系统”并选择“System.NullReferenceException”
> 
> 2）在该对话框的底部有一个“抛出异常时：”组框，选择“进入调试器”
> 
> 3）运行你的场景。抛出异常时，调试器将停止并通过对话框通知您：“已抛出“System.NullReferenceException”类型的异常。[Break] [Continue]”
> 
> 点击[休息]。这将使您进入导致问题的代码行。

但它们不适用于 Visual Studio 2005（**调试菜单上没有****异常**选项）。

 **有谁知道在 Visual Studio 中找到此选项对话框的位置，即“*引发异常时*”组框，以及“*进入调试器*”选项？

*更新：问题是我的**调试**菜单没有**例外**项。我自定义菜单以手动添加它。*

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2008-09-22T19:23:11.553

打开解决方案后，转到调试 - 异常 ( `Ctrl`+ `D`, `E`) 菜单选项。从那里您可以选择中断*抛出*或*用户未处理的*异常。

编辑：我的实例是使用 C#“配置文件”设置的，也许其他配置文件不存在？

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2008-09-22T19:20:58.907

VS2005 中有一个“异常”窗口...在调试时尝试++ `Ctrl`，然后单击要停止的异常的“抛出”复选框。`Alt``E`

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2017-08-22T13:28:42.600

我花了一段时间才找到期望设置的新位置，因此有了新的答案。

**从 Visual Studio 2015 开始**，您可以在异常设置窗口（调试->Windows->异常设置）中控制要停止的异常。快捷方式仍然是`Ctrl`- `Alt`- `E`。

处理自定义异常的最简单方法是选择“所有不在此列表中的异常”。

这是英文版的截图：

[![在此处输入图像描述](https://i.stack.imgur.com/DsdlA.png)](https://i.stack.imgur.com/DsdlA.png)

这是德文版的截图：

[![在此处输入图像描述](https://i.stack.imgur.com/uFtgN.png)](https://i.stack.imgur.com/uFtgN.png)

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2017-12-06T19:16:55.887

从 Visual Studio 2015 及更高版本开始，您需要转到“异常设置”对话框 ( `Ctrl`++ `Alt`)`E`并检查“公共语言运行时异常”（或您想要的特定异常`ArgumentNullException`），以使其在**处理**的异常时中断。

第 1 [![第1步](https://i.stack.imgur.com/An8K9.png)](https://i.stack.imgur.com/An8K9.png) 步 第 2 步 [![第2步](https://i.stack.imgur.com/VFTit.png)](https://i.stack.imgur.com/VFTit.png)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-09-22T19:30:31.940

检查[使用调试器](https://docs.microsoft.com/en-gb/visualstudio/debugger/managing-exceptions-with-the-debugger?view=vs-2015)页面管理异常，它解释了如何设置它。

本质上，这里是步骤（在调试期间）：

1.  在“调试”菜单上，单击“例外”。

2.  在“异常”对话框中，为整个异常类别选择“引发”，例如，公共语言运行时异常。

    -或者-

    展开异常类别的节点，例如公共语言运行时异常，然后为该类别中的特定异常选择抛出。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-11T23:35:27.250

我使用的技术类似于以下内容。根据您要调试的内容定义一个全局变量，您可以将其用于一个或多个 try catch 块，并使用以下结构：

```
if(!GlobalTestingBool)
{
   try
   {
      SomeErrorProneMethod();
   }
   catch (...)
   {
      // ... Error handling ...
   }
}
else
{
   SomeErrorProneMethod();
} 
```

我发现这在测试方面给了我更多的灵活性，因为仍然有一些我不希望 IDE 中断的例外情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-23T13:08:28.293

网上的文档好像有点不清楚，所以我只是做了一点测试。从“异常”对话框中选择“抛出时中断”会导致程序执行中断*任何*已处理或未处理的异常。如果您只想中断已处理的异常，您唯一的办法似乎是遍历您的代码并在所有已处理的异常上放置断点。这似乎有点过分，因此在处理异常时添加调试语句可能会更好。然后，当您看到该输出时，您可以在代码中的该行设置断点。

# webserver - 我必须做些什么来确保外部世界无法访问机器上运行的 Web 服务器 (Apache)？

> ID：116905
> 
> 赞同：1
> 
> 时间：2008-09-22T19:19:54.697
> 
> 标签：webserver, development-environment

我想将我的笔记本电脑用作 Web 开发（PHP、Python 等）机器，但我很犹豫，除非我能确保它不能被外界访问。

我猜想除了防火墙之外还需要其他东西，例如对 Apache 配置文件的配置，但我不确定我还需要什么才能 100% 确定它已被紧紧锁定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-22T19:22:22.553

在配置文件中，将 LISTEN 指令更改为仅侦听环回地址：

听 127.0.0.1

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T19:21:44.990

您需要使用 Listen 指令将服务器守护程序配置为仅绑定到 localhost，如下所示：

```
Listen 127.0.0.1 
```

另一种方法是像这样为主服务器配置访问控制

```
<Directory "/var/www/localhost/htdocs">
AllowOverride None
Deny from all
Allow from 127.0.0.1/255.0.0.0
</Directory> 
```

请记住将服务器的根目录放在目录指令中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-22T19:21:50.293

安装防火墙并关闭所有外部端口，但您要使用的端口除外。如果您使用 Linux，则有很好的 iptables 前端，例如 firestarter；如果您使用 OS X，则有一个集成的防火墙，Windows 也有。:)

但是，是的，防火墙是要走的路。（或者你可以告诉 Apache 只听`127.0.0.1:80`）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T19:21:49.340

防火墙应该就足够了。只需确保您在非标准端口（通常为 8080）中运行 apache，并确保您的防火墙阻止外部对该端口的访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T19:23:13.237

防火墙应该足够了。但是您也可以使用[Listen](http://httpd.apache.org/docs/2.0/bind.html)指令。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T19:24:05.467

防火墙就可以了。但是，如果您不满足于仅使用防火墙，则可以将 apache 配置为仅在环回设备上进行侦听，或者告诉它仅接受来自局域网上一组地址的连接。第一种方法更简单，但这样您只能从运行 apache 的机器上访问网页。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T19:22:45.610

在您和互联网之间放置一个路由器，并且不要将任何端口转发到您的笔记本电脑。这样一来，任何试图访问笔记本电脑的人都会撞到路由器，无法再进一步。

如果您需要它可用于传入连接，您可以将端口转发到您的主机（或只是将主机放在 DMZ 中）。

# table-driven - 如何使用决策表来帮助您的应用程序

> ID：116907
> 
> 赞同：7
> 
> 时间：2008-09-22T19:20:11.390
> 
> 标签：table-driven

我前段时间了解了决策树和决策表。我觉得决策表可以帮助处理条件 If-Then-Else 语句。特别是，我觉得决策表没有副作用，例如，如果您没有注意到您还需要一个“else if”语句。

但我不确定如何实现它。数组？数据库表？现在有没有人在他们的代码中使用决策表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T19:30:06.920

我强烈推荐[Code Complete](http://cc2e.com/)的第 18 章。

您还可以查看这篇文章[什么是表驱动方法](https://stackoverflow.com/questions/105311/what-are-table-driven-methods)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T23:06:44.853

好吧，我做了自己的研究：S

1.  这是[IBM](http://www.ibm.com/developerworks/rational/library/jun06/vauthier/)关于用于制作测试场景的决策表的内容
2.  这来自一家[制作决策表](http://www.catalyst.com/videos/logicgem/logicgem2.html)的公司，然后将这些决策表转换为 vb.net 中的 if-then-else 语句。
3.  使用决策表的[开源 ruby​​ 工作流和 bpm 引擎。](http://openwferu.rubyforge.org/decision.html)

所以，我还在找。如果有人有好的答案，请输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T17:59:39.773

SourceForge 和 Github 上提供了多平台 CCIDE-0.5.0-6（或更高版本）。

[请参阅位于http://twysf.users.sourceforge.net/](http://twysf.users.sourceforge.net/)的网页

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-23T00:53:04.303

表驱动方法使用数据结构而不是 if-then 语句来驱动程序逻辑。例如，如果您正在处理两种类型的记录（电视与有线电视），您可以这样做：

哈希[tv] = processTvRecords

哈希[电缆] = processCableRecords

在某些语言中，例如 Ruby 或 Perl，这种技术很简单。在 Java 中，您需要使用反射来查找方法句柄。

如果您想了解决策表，请查看[http://fitnesse.org/](http://fitnesse.org/)上的 Fitnesse 测试框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-15T06:04:07.850

到目前为止，我见过的决策表的最佳实现是一个名为 Prologa 的应用程序，可从[http://www.econ.kuleuven.be/prologa](http://www.econ.kuleuven.be/prologa)下载。不幸的是，它仅在 Windows 中可用，并且在您等待评估密钥时可能会有短暂的延迟。

该软件处理非二进制条件，可以折叠类似的规则，并实际跟踪您的表当前覆盖的组合数量，因此非常适合特别大表的完整性检查。还可以优雅地处理嵌套表（一个表的结果可以是另一个表的条件）。

# sql-server - Performance implications of computed columns in SQL Server 2005 database?

> ID：116926
> 
> 赞同：1
> 
> 时间：2008-09-22T19:21:59.357
> 
> 标签：sql-server, performance, tsql, database-design, calculated-columns

The situation: we have a large database with a number of denormalized tables. We frequently have to resummarize the data to keep the summary tables in synch. We've talked on and off about using computed columns to keep the data fresh. We've also talked about triggers, but that's a separate discussion.

In our summary tables, we denormalized the table such that the Standard ID as well as the Standard Description is stored in the table. This inherently assumes that the table will be resummarized often enough so that if they change the standard description, it will also change it in the summary table. A bad assumption.

Question: What if we made the Standard Description in the summary table a derived/computed column which selects the standard description from the standard table? Is there a tremendous performance hit by dropping a computed column on a table with 100,000-500,000 rows?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-24T08:54:11.393

表中的计算列只能从该行上的值派生。您不能在计算列中进行查找。为此，您需要一个视图。

在一个表上，将名称非规范化到表中可能对性能的影响可以忽略不计。您可以使用[DBCC PINTABLE](http://msdn.microsoft.com/en-us/library/aa258284(SQL.80).aspx)来提示服务器将表保留在缓存中。

如果您需要实时更新，那么您唯一的选择就是触发器。将聚集索引放在与您正在更新的名称相对应的 ID 列上应该会减少总体 I/O 量（给定 ID 的记录将位于同一块或一组块中）因此，如果触发器导致，请尝试此操作性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T19:56:42.270

当计算列不是计算密集型并且不在大量行上执行时，它们很好。您的问题是“删除计算列是否会有影响”。除非此列是查询使用的索引（索引一个比较列真的很糟糕 - 我不知道您是否可以取决于您的数据库），否则删除它不会损害您的性能（查询和处理的数据更少）。

如果标准表有描述，那么你应该从 id 加入它，而不是使用任何计算。

您提到了可能是一个真正的问题，那就是您的数据库的架构。我以前也遇到过这样的问题，系统是为处理一件事而构建的，而报告之类的东西需要被固定在上面。在不重构架构以平衡所有需求的情况下，Sunny 使用视图的想法几乎是唯一简单的方法。

如果您想发布一些经过清理的 DDL 和数据，以及您试图从数据库中获取的内容的示例，我们可能会给您一个不那么主观的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T08:54:50.940

只是为了澄清 sql2005 及更高版本的问题：

> 在 SQL Server 6.5 版中引入了此功能以提高性能。DBCC PINTABLE 具有非常有害的副作用。这些包括损坏缓冲池的可能性。DBCC PINTABLE 不是必需的，已将其删除以防止出现其他问题。此命令的语法仍然有效，但不影响服务器。

# sql - 使用可变数组变量运行插入查询时遇到问题

> ID：116938
> 
> 赞同：0
> 
> 时间：2008-09-22T19:23:42.847
> 
> 标签：sql, oracle, plsql

我在 Oracle 10g 企业版上使用 SQL*Plus 9.2。我创建了一些使用通过命令提示符传递的参数进行基本插入的脚本。我应该能够在一个循环中运行一堆插入似乎是合乎逻辑的。所以我尝试了以下方法：

```
--begin

DECLARE

TYPE va_orgs IS TABLE OF nbr.lien_item.lien_item_name%type;

org va_orgs :=  va_orgs('RTA','RTB','RTE','RTI','RTM','RTT');

BEGIN

FOR i in org.FIRST .. org.LAST

LOOP

INSERT INTO nbr.lien_item (lien_item_sid, excel_row, include_in_calcs, indent, header_level, sort_order, unit, lien_item_status, lien_item_name) VALUES (nbr.lien_item_seq.nextval, 0, 'Y', 1, 0, 1, 'FTE', 'A', 'org(i)');

COMMIT;

END LOOP;

END;

/

--end 
```

当我运行脚本时，我收到一条 PL/SQL 成功完成的消息。我尝试调试并使用`dbms_output`来显示`org(i)`. 一切看起来都很好。但是这些行永远不会输入到数据库中。一旦我进行选择，新行就不存在了。循环和插入有什么技巧吗？

（我也试过`IS VARRAY(6) OF`代替`IS TABLE OF`。同样的非结果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-22T19:52:29.377

在您的插入语句中，您有 org(i) 单引号。您不应该这样，您可能将单词 org(i) 作为值插入到表中。所以你的插入语句应该是

```
INSERT INTO nbr.lien_item (lien_item_sid, excel_row, include_in_calcs, indent, header_level, sort_order, unit, lien_item_status, lien_item_name) VALUES (nbr.lien_item_seq.nextval, 0, 'Y', 1, 0, 1, 'FTE', 'A', org(i)); 
```

# macos - 当我的 Mac 进入睡眠状态时，我的应用程序会发生什么？

> ID：116945
> 
> 赞同：17
> 
> 时间：2008-09-22T19:24:21.973
> 
> 标签：macos, sleep, process-management

当 Mac OS X 进入睡眠状态时，由于关闭笔记本电脑或从 Apple 菜单中选择“睡眠”，它如何暂停正在执行的进程？

我想非窗口进程只是在任意执行点暂停。对于 Cocoa 应用程序也是如此，还是操作系统会等到控制权返回到运行循环调度程序，然后在“已知”位置进入睡眠状态？是否有任何现代操作系统可以做到这一点，或者无论应用程序在做什么，它通常是否足够安全以简单地暂停应用程序？

我很好奇，因为允许随时发生睡眠意味着，从应用程序的角度来看，系统时钟可能会突然大幅向前跳跃。这是我在编码时通常不会考虑的一种可能性。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-09-23T18:24:36.677

如果 CPU 实际当前正在执行您的应用程序的代码，您的应用程序将在那个时刻被中断。您的应用程序不断地通过任务调度程序获取*执行时间*，这决定了哪个应用程序获得 CPU 时间、在哪个内核上以及持续多长时间。一旦系统*真的*进入睡眠状态时，调度程序不再为您的应用程序提供任何时间，因此它会在此时停止执行，这几乎可以在任何地方发生。但是，内核必须处于干净状态。这意味着如果您刚刚对内核进行了调用（许多 libC 函数都这样做）并且此调用不在某个安全点（例如休眠、等待条件变为真等）或可能持有关键的内核锁（例如漏斗），内核可能会暂停睡眠，直到此调用返回用户空间或执行达到这样的安全点，然后才最终从任务调度程序中取消您的应用程序。

您可以打开内核端口并注册睡眠/唤醒事件。在这种情况下，当系统想要进入睡眠状态时，您的应用程序将收到一个事件。你有几种可能性。一是回复它，系统可能会进步。另一种是暂停睡眠；但是，Apple 表示某些事件最多可以暂停 30 秒，之后，无论您的应用程序是否喜欢，系统都会继续运行。最后，您可以取消它；尽管并非所有活动都可以取消。如果系统已经决定要进入休眠状态，您最多只能暂停 30 秒或立即允许，不能取消。但是，您也可以收听一个事件，系统询问应用程序是否可以现在进入睡眠状态，您可以回复“否”，从而取消睡眠。

“可以睡觉了吗”和“我打算睡觉”之间的区别是：如果应用了省电设置，即如果用户没有移动鼠标或输入任何内容，则发送第一个在那里配置的时间。在这种情况下，系统只会询问睡眠是否正常。像 Apple 的 DVD 播放器这样的应用程序会说“不”，因为很可能用户观看了 DVD，因此不与计算机交互，仍然没有理由去睡觉。OTOH，如果用户关闭他的 Mac Book，则不会询问应用程序，系统肯定会进入睡眠状态，只是通知应用程序，现在最多有 30 秒的时间对其做出反应。

Wake-up events can also be quite interesting to catch. E.g. if your system wakes up, open files might be inaccessible (an external drive has been unplugged) or network sockets won't work any longer (network has changed). So you may re-init certain app parts before using them and running into errors that are more or less expected.

[Apple's page regarding catching these events.](http://developer.apple.com/qa/qa2004/qa1340.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-23T11:25:48.930

这取决于您的应用程序。
如果您正在与外部系统交互（考虑联网或通过 USB/火线等进行操作），那么它可能会受到影响。在 OSX 上运行的应用程序会运行有限的时间（最长 10 毫秒），之后它会被内核中断，内核会从进程队列中安排一个新进程在 CPU 上运行。这对于应用程序来说是透明的，它“认为”它一直在 CPU 上运行。因此，过渡到睡眠没有什么不同——除了时间跳跃。
如果您需要注意已转换到睡眠模式，请参阅此技术说明，其中详细说明了如何接收有关状态更改的通知：[注册和取消注册睡眠和唤醒通知](http://developer.apple.com/qa/qa2004/qa1340.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T19:30:21.193

我相信它只会暂停所有应用程序，无论它们碰巧在哪里。

请记住，这无论如何都会发生。由于上下文切换，应用程序不断地暂停和恢复。因此，实际上，时钟可以在您的应用程序中的任何 2 条指令之间跳跃，尽管通常不会以明显/显着的方式。

如果操作系统等待应用程序返回某个主循环，您可能会遇到应用程序导致睡眠挂起的情况。如果他们做了很多工作并且没有返回到运行循环调度程序，他们会阻止机器进入睡眠状态。那不会很好。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T19:34:28.780

而且，如果您设置时间，它似乎也会飞跃到正在运行的程序。也没什么特别的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-23T13:37:16.510

看看这篇维基百科[文章](http://en.wikipedia.org/wiki/Hibernate_(OS_feature))。Cavver 正确地指出网络连接之类的事情可能会超时，因此这些服务可能会被中断。

# language-agnostic - 什么是语义网，我为什么要使用它？

> ID：116947
> 
> 赞同：1
> 
> 时间：2008-09-22T19:24:32.423
> 
> 标签：language-agnostic, semantic-web

就像它读的一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T19:45:42.233

我发现的最简单和最短的解释是：“语义网之于机器就像万维网之于人类”。

至于你为什么要这样做：出于同样的原因，你让你的机器计算 Pi 到万亿位数，而不是自己做。所以你可以专注于*有趣*的问题，把琐碎的工作留给机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T20:02:02.583

嗯，它可能不符合“官方”的定义，但我总是尝试向人们解释它“这就像联合知识而不是内容”。

你为什么要使用它？好吧...如果您正在制作可以从机器可解析和可查询的“知识”中受益的应用程序，那么...您可能想要使用它:)。

恕我直言，它的定义相当不明确，目前还没有以广泛有用的方式实施。这是一个好主意，我毫不怀疑将来事情会倾向于这种方法，但还没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T19:27:07.957

[来自维基百科：](http://en.wikipedia.org/wiki/Semantic_Web)

> 语义网是万维网的一个不断发展的扩展，其中定义了网络上信息和服务的语义，使网络能够理解和满足人和机器使用网络内容的请求。它源于万维网联盟董事 Tim Berners-Lee 爵士将万维网视为数据、信息和知识交换的通用媒介的愿景。

# c++ - using fstream to read every character including spaces and newline

> ID：116951
> 
> 赞同：33
> 
> 时间：2008-09-22T19:26:06.103
> 
> 标签：c++, newline, spaces, fstream

I wanted to use `fstream` to read a txt file.

I am using `inFile >> characterToConvert`, but the problem is that this omits any spaces and newline.

I am writing an encryption program so I need to include the spaces and newlines.

What would be the proper way to go about accomplishing this?

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2008-09-22T20:03:51.143

可能最好的方法是将整个文件的内容读入一个字符串，这可以很容易地使用 ifstream 的[`rdbuf()`](http://en.cppreference.com/w/cpp/io/basic_ios/rdbuf)方法来完成：

```
std::ifstream in("myfile");

std::stringstream buffer;
buffer << in.rdbuf();

std::string contents(buffer.str()); 
```

既然您已经从文件中获得了所有内容，那么您就可以使用常规的字符串操作了。

当[Tomek](https://stackoverflow.com/users/20678/tomek)询问读取文本文件时，同样的方法也适用于读取二进制数据，尽管在创建输入文件流时需要提供 std::ios::binary 标志。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-09-22T19:36:35.313

For encryption, you're better off opening your file in binary mode. Use something like this to put the bytes of a file into a vector:

```
std::ifstream ifs("foobar.txt", std::ios::binary);

ifs.seekg(0, std::ios::end);
std::ifstream::pos_type filesize = ifs.tellg();
ifs.seekg(0, std::ios::beg);

std::vector<char> bytes(filesize);

ifs.read(&bytes[0], filesize); 
```

Edit: fixed a subtle bug as per the comments.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-09-22T19:37:02.987

I haven't tested this, but I believe you need to clear the "skip whitespace" flag:

```
inFile.unsetf(ios_base::skipws); 
```

I use the following reference for C++ streams: [IOstream Library](http://www.cplusplus.com/reference/iostream/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-04-13T08:24:34.233

```
std::ifstream ifs( "filename.txt" );

std::string str( ( std::istreambuf_iterator<char>( ifs ) ), 
                 std::istreambuf_iterator<char>()
               ); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-22T21:29:25.417

istream 层的许多好处是为简单类型 ro 和来自流的类型提供基本格式和解析。出于您描述的目的，这些都不重要，您只对文件作为字节流感兴趣。

出于这些目的，您最好只使用 filebuf 提供的 basic_streambuf 接口。“跳过空白”行为是您不需要的 istream 接口功能的一部分。

filebuf 是 ifstream 的基础，但直接使用它是完全有效的。

```
std::filebuf myfile;
myfile.open( "myfile.dat", std::ios_base::in | std::ios_base::binary );

// gets next char, then moves 'get' pointer to next char in the file
int ch = myfile.sbumpc();

// get (up to) the next n chars from the stream
std::streamsize getcount = myfile.sgetn( char_array, n ); 
```

还可以查看函数 snextc（将“get”指针向前移动，然后返回当前字符）、sgetc（获取当前字符但不移动“get”指针）和 sungetc（备份“get”如果可能，将指针移到一个位置）。

当您不需要 istream 类提供的任何插入和提取运算符而只需要一个基本的字节接口时，通常 streambuf 接口（filebuf、stringbuf）比 istream 接口（ifstream、istringstream）更合适。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-22T19:31:31.220

The following c++ code will read an entire file...

```
 #include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () 
{
  string line;
  ifstream myfile ("foo.txt");

  if (myfile.is_open()){

    while (!myfile.eof()){
      getline (myfile,line);
      cout << line << endl;
    }
    myfile.close();
  }
  return 0;
} 

```

post your code and I can give you more specific help to your problem...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-22T19:55:20.510

您可以调用[`int fstream::get()`](http://www.cplusplus.com/reference/iostream/istream/get.html)，它将从流中读取单个字符。您也可以使用[`istream& fstream::read(char*, streamsize)`](http://www.cplusplus.com/reference/iostream/istream/read.html)，它与 执行相同的操作`get()`，只是在多个字符上。给定的链接包括使用每种方法的示例。

我还建议以二进制模式读写。这允许正确地从文件读取和写入 ASCII 控制字符。否则，加密/解密操作对可能会产生不相同的文件。为此，您打开带有[`ios::binary`](http://www.cplusplus.com/reference/iostream/ios_base/openmode.html)标志的文件流。对于二进制文件，您要使用该`read()`方法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-24T03:43:20.397

另一个更好的方法是使用 istreambuf_iterator，示例代码如下：

```
ifstream inputFile("test.data");

string fileData(istreambuf_iterator<char>(inputFile), istreambuf_iterator<char>()); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-22T19:45:22.093

对于加密，您可能应该使用[read()](http://www.cplusplus.com/reference/iostream/istream/read.html)。加密算法通常处理固定大小的块。哦，要以二进制模式打开（不从 \n\r 转换为 \n），请将 ios_base::binary 作为第二个参数传递给构造函数或 open() 调用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-23T06:05:15.783

简单的

```
#include <fstream>
#include <iomanip>

ifstream ifs ("file");
ifs >> noskipws 
```

就这样。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-21T08:58:32.680

```
ifstream ifile(path);
std::string contents((std::istreambuf_iterator<char>(ifile)), std::istreambuf_iterator<char>());
ifile.close(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-15T15:36:26.840

我还发现 ifstream 对象的[get()](http://www.cplusplus.com/reference/istream/istream/get/)方法也可以读取文件的所有字符，不需要 unset `std::ios_base::skipws`。引自*C++ Primer*：

> 一些未格式化的操作一次处理一个字节的流。表 17.19 中描述的这些操作读起来宁愿忽略空格。

这些操作列表如下： [is.get()](http://www.cplusplus.com/reference/istream/istream/get/)、[os.put()](http://www.cplusplus.com/reference/ostream/ostream/put/)、[is.putback()](http://www.cplusplus.com/reference/istream/istream/putback/?kw=putback)、[is.unget()](http://www.cplusplus.com/reference/istream/istream/unget/?kw=unget)和[is.peek()](http://www.cplusplus.com/reference/istream/istream/peek/?kw=peek)。

以下是最低工作代码

```
#include <iostream>
#include <fstream>
#include <string>

int main(){
    std::ifstream in_file("input.txt");

    char s;

    if (in_file.is_open()){
        int count = 0;
        while (in_file.get(s)){

            std::cout << count << ": "<< (int)s <<'\n';
            count++;
        }

    }
    else{
        std::cout << "Unable to open input.txt.\n";
    }
    in_file.close();

    return 0;
 } 
```

输入文件 ( `cat input.txt`) 的内容是

```
ab cd
ef gh 
```

程序的输出是：

```
0: 97
1: 98
2: 32
3: 99
4: 100
5: 10
6: 101
7: 102
8: 32
9: 103
10: 104
11: 32
12: 10 
```

10 和 32 是换行符和空格字符的十进制表示。显然，所有字符都已被读取。

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2008-09-22T22:12:20.697

正如查尔斯贝利正确指出的那样，您不需要 fstream 的服务来读取字节。所以忘记这个 iostream 愚蠢，使用 fopen/fread 并完成它。C stdio 是 C++ 的一部分，你知道 ;)

# java - 您使用哪个布局管理器？

> ID：116957
> 
> 赞同：18
> 
> 时间：2008-09-22T19:27:47.893
> 
> 标签：java, swing, layout

大家都用什么java GUI布局管理器？最近，我一直在使用[MigLayout](http://www.miglayout.com/)，它有一些强大的组件控件。只是想看看除了标准的 JDK 之外，其他开发人员正在使用什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-23T16:22:50.277

[MiGLayout](http://www.miglayout.com/)是 Java 开发人员广泛使用的 GUI 布局管理器。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-22T19:51:36.353

[GridBagLayout](http://java.sun.com/javase/6/docs/api/java/awt/GridBagLayout.html)是可用的。一旦你习惯了使用它，它就会很好用。我认为标准的 JDK 布局管理器本身就非常强大。此外，您还可以最大限度地减少对 3rd 方库的依赖。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-23T04:47:13.927

MiG 和 FormLayout (JGoodies) 都非常适合手动布局（几乎所有布局最终都变成了手动）。我最大的建议是设计您的视图，以便您可以完全删除布局并重新实现它而不影响您的应用程序（视图和控制器的良好分离是这里的关键）。

一定要看看 JGoodie 的 PresentationModel 方法来实现“哑”视图。我将这种技术与 GUI 构建器一起使用（我将 GroupLayout 与 Jigloo GUI 构建器插件一起使用）来扔掉快速原型。经过 3 或 4 次迭代后，这通常会消失，我们使用 MiG 或 FormLayout 重新实现。

编辑：自从我写这篇文章以来，我已经开始使用 MiG 来进行我的所有布局，并且我不再使用 GUI 构建器 - 使用 MiG 进行布局太容易了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-22T19:40:10.140

我使用的最后一个 Swing 应用程序使用了[JGoodies 的 FormsLayout](http://www.jgoodies.com/freeware/forms/index.html)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-22T19:52:17.147

我使用[GridBagLayout](http://java.sun.com/javase/6/docs/api/java/awt/GridBagLayout.html)。它似乎需要很多代码，但它使布局看起来非常漂亮。

我还喜欢将[BorderLayout](http://java.sun.com/javase/6/docs/api/java/awt/BorderLayout.html)与 GridBagLayout 面板结合起来，以实现出色的可定制性。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-22T20:10:54.700

我非常喜欢使用[TableLayout](https://tablelayout.dev.java.net/)而不是 GridBagLayout。一切都是有道理的，而每次我尝试使用 GridBagLayout 时，它都会压垮我的灵魂。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-02T05:56:41.673

我曾经为控件使用 GridBagLayout，但是从 java1.6 开始，我将使用**GroupLayout 太棒**了。

这是使用它的屏幕截图和示例代码！

[替代文字 http://img145.imageshack.us/img145/7844/screenshot1dz8.png](http://img145.imageshack.us/img145/7844/screenshot1dz8.png)

```
 private void layoutComponents(){
        JPanel panel = new JPanel();

        GroupLayout layout = new GroupLayout(panel);
        panel.setLayout(layout);

        layout.setAutoCreateGaps(true);

        layout.setAutoCreateContainerGaps(true);
        SequentialGroup hGroup = layout.createSequentialGroup();

        JLabel nameLbl  = new JLabel("Name");
        JLabel countLbl = new JLabel("Amount");
        JLabel dateLbl  = new JLabel("Date(dd/MM/yy)");
        hGroup.addGroup(layout.createParallelGroup().
                addComponent(nameLbl).
                addComponent(countLbl).
                addComponent(dateLbl).
                addComponent(go));

        hGroup.addGroup(layout.createParallelGroup().
                addComponent(name).
                addComponent(count).
                addComponent(date));

        layout.setHorizontalGroup(hGroup);

        SequentialGroup vGroup = layout.createSequentialGroup();

        vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
                addComponent(nameLbl).addComponent(name));
        vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
                addComponent(countLbl).addComponent(count));
        vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
                addComponent(dateLbl).addComponent(date));
        vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
                addComponent(go));
        layout.setVerticalGroup(vGroup);

        frame.add( panel , BorderLayout.NORTH );
        frame.add( new JScrollPane( textArea ) );
    } 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-01-06T05:46:54.687

我的大部分面板都使用[DesignGridLayout 。](https://designgridlayout.java.net/)

对于`DesignGridLayout`无法完全处理的稀有面板，我使用了 Borderlayout 和`DesignGridLayout`.

使用 DesigngridLayout，您可以用最少的代码行数手动编写布局，易于输入和阅读：

```
DesignGridLayouut layout = new DesignGridLayout(myPanel);
layout.row().grid(lblFirstName).add(txfFirstName).grid(lblSurName).add(txfSurName);
layout.row().grid(lblAddress).add(txfAddress);
layout.row().center().add(btnOK, btnCancel); 
```

面板网格的每一行都由一行代码定义。如您所见，“绘制”您的面板非常简单。

此外，我发现`DesignGridLayout`它还有一些独特的功能（例如它的“**智能垂直调整大小**”）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-11-02T19:54:05.980

GridBagLayout 功能强大但非常原始：连接布局的代码非常冗长。这个实用程序库（实际上只有 1 个包含大约 10 个类的 jar 文件）简化了很多工作：[http](http://code.google.com/p/painless-gridbag/) ://code.google.com/p/painless-gridbag/以下片段引自该网站的主页：

```
 PainlessGridBag gbl = new PainlessGridBag(getContentPane(), false);

    gbl.row().cell(lblFirstName).cell(txtFirstName).fillX()
             .cell(lblFamilyName).cell(txtFamilyName).fillX();
    gbl.row().cell(lblAddress).cellXRemainder(txtAddress).fillX();

    gbl.doneAndPushEverythingToTop(); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-22T23:15:34.177

作为一般概述，您可能会发现我很久以前在 sun 上写的一篇文章很有用。它不是最新的布局管理器，但它专注于布局管理器的有效嵌套，而不是试图用一个布局做所有事情。

请参阅[http://developer.java.sun.com/developer/onlineTraining/GUI/AWTLayoutMgr](http://developer.java.sun.com/developer/onlineTraining/GUI/AWTLayoutMgr)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-23T16:18:11.630

我发现对于任何重要的 GUI，我都使用带有嵌套子面板的多个布局，其中主面板可能有一个`GridBagLayout`，并且每个子面板（通常没有边框或指示它是一个面板）使用更简单的布局，其中可能的。通常我会使用`BorderLayout`, `FlowLayout`, 和`BoxLayout`用于更小、更简单的子面板。`GridBagLayout`通过将 GUI 的小部分划分为子面板并使用可能的最简单布局来控制 GUI 的该部分，您可以创建复杂、排列良好的显示，而不会因众多选项而感到头疼。此外，通过将类似的显示功能分组到一个面板中，它可以创建更具可读性的代码。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-22T19:32:20.360

为作为 netbeans 一部分的尾数 gui 构建器开发的[Spring 布局。](http://java.sun.com/docs/books/tutorial/uiswing/layout/spring.html)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-22T19:55:15.470

我也使用过[GroupLayout](http://java.sun.com/javase/6/docs/api/javax/swing/GroupLayout.html)。同样，它是从 Java6 开始的标准 JDK 布局管理器，但您也可以找到单独的库。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-23T04:53:33.337

我一直是 GridBagLayout 的忠实粉丝。它非常类似于 HTML 表格，因此对于那些 web 程序员来说是直观的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-10-10T00:01:23.390

我开始使用各种嵌套布局，然后转到 GridBagLayout（这很令人沮丧）。从那以后，我尝试了 FormLayout（但发现它不适合除了表单之外的任何东西）并坚定地选择了 TableLayout，总的来说我很满意。

从那时起，我发现了 MiGLayout，虽然除了玩它之外我没有做更多的事情，但它似乎非常有能力，与 TableLayout 非常相似，并且可能更干净一些。

对我来说最大的好处是 MiGLayout 将成为 JDK 的一部分，所以我打算在它出现时完全使用它。

要记住的另一件事是，无论您选择哪种重量级 LayoutManager，总有一些更简单的布局管理器（例如 GridLayout）有一席之地。我已经看到使用 GridBagLayout 完成了一些可怕的事情，而使用更简单的布局管理器可以更轻松地完成这些事情。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-04-16T22:35:03.270

我更喜欢尽量减少对 3rd 方库的依赖，因此通常是 BoxLayout 用于对话框，而 GridBagLayout 用于“复杂”布局。GridBagLayout 很容易理解，但配置起来有点困难。我为自己编写了一个从 HTML 布局创建代码的工具（希望对其他人也有帮助）： [http ://www.onyxbits.de/content/blog/patrick/java-gui-building-gridbaglayout-manager-made-easy](http://www.onyxbits.de/content/blog/patrick/java-gui-building-gridbaglayout-manager-made-easy)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-22T22:56:38.060

我发现的唯一一个我真正**喜欢**的布局管理器是[相对布局管理器](http://www.onjava.com/pub/a/onjava/2002/09/18/relativelayout.html)。相对布局管理器的工作方式与对话框的*概念*组织方式一致。一个缺点是，虽然此布局管理器处理附加约束。它似乎*没有*处理比率约束。幸运的是，它设计得很好，我能够实现这个功能。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-10-22T04:51:53.333

我在嵌套[BoxLayout](http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/BoxLayout.html)和[SpringLayout时使用](http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/SpringLayout.html)[BorderLayout](http://java.sun.com/j2se/1.4.2/docs/api/java/awt/BorderLayout.html) 90%

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-12-02T05:41:36.277

我有点Java新手。

我尝试了 GridBagLayout，放弃了，然后尝试了 BoxLayout，然后放弃了，然后制作了我自己的[自定义布局](http://java.sun.com/docs/books/tutorial/uiswing/layout/custom.html)，它有效。对于 GridBag 和 Box，我做出了最好的猜测，布局引擎决定做一些不同的事情，没有任何明显的方式来调试它们。

使用我的自定义布局，我可以打印出坐标、宽度和高度，以找出哪里出了问题。放置东西有点数学，但是您可以使用 java 的全部功能，而不是使用内置布局管理器之一的有限词汇。

当然这只是一个家庭项目，你永远不会被允许在工作中这样做。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-01-16T20:44:01.380

我将 GridBagLayout 用于类似布局的表单，将 BorderLayout 用于简单布局，将 FlowLayout 用于中间有一些空格的水平图标/按钮的数量。Netbeans 也是一个很好的 GUI 构建器，可以避免大量繁琐的布局编码以节省您的时间。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-10-30T10:04:55.623

我最近开始使用 Swing，并且正在使用 GridBagLayout。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-11-20T22:32:09.073

我厌倦了所有那些需要大量设置、可读性不强或手动完成的布局管理器，所以我编写了自己的非常简单的 laoutmanager，它使用两个照片角的抽象来保持每个组件的位置。您可以像这样添加组件：`parent.add(child,"topleft(0, 0.5)bottomright(0.5,1.0)");`

看看这里[https://github.com/hageldave/UsefulStuff/blob/master/src/PhotoCornersLayout.java](https://github.com/hageldave/UsefulStuff/blob/master/src/PhotoCornersLayout.java) ;) 你自己负责正确的布局，因为它不会检查布局的重叠或其他缺点。

# usergroups - 是否有任何在线用户组会议？

> ID：116963
> 
> 赞同：3
> 
> 时间：2008-09-22T19:29:12.803
> 
> 标签：usergroups

我必须承认，我非常嫉妒那些碰巧住在活跃用户组附近的开发人员（例如奥斯汀的 ALT.NET 人员）。我经常阅读博客文章并收听引用这些面对面会议的播客，并发现自己希望自己也能坐下来参与其中。但是，飞越全国，在酒吧里与几个人会面几个小时，讨论模式和实践是不现实的。

所以我想知道是否有类似的论坛供那些碰巧住在活跃用户组附近的人使用。毕竟，博客和书籍只能走这么远，而且在很大程度上是一种单向的交流途径。诚然，您可以使用评论、电子邮件、推文和 IM 来获得一些互动，但在所有这些媒介中，面对面的实时互动会迷失方向。

我想我正在寻找某种视频会议协议，让对特定软件开发领域有共同兴趣的人可以聚在一起交谈和互动，而不必住在隔壁。这样的事情存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T19:34:22.137

SecondLife 中有一个[.NET 用户组。](http://www.sldnug.net/)当然，这取决于你对第二人生的感受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-01T00:52:55.050

我还没有机会检查它，但[Virtual ALT.NET](http://groups.google.com/group/virtualaltnet?hl=en)组听起来很有希望。

# project-management - 如何表明您了解项目的要求

> ID：116965
> 
> 赞同：5
> 
> 时间：2008-09-22T19:29:33.067
> 
> 标签：project-management

您如何向您的客户/雇主表明您了解他们的要求？

你推荐使用什么？用例图？流程图？数据流图？决策树？

我并不是真的要求一个非常详细的答案。只是一些简单的东西来帮助我与编写需求的人交流，看看你们俩是否在同一页面上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-22T19:35:25.487

我通常在项目的早期就将 PowerPoint 幻灯片放在一起，提供项目的高级概述，以及一些架构图（越简单越好）和屏幕模型/线框。然后我有一个需求审查的“启动”会议，讨论业务问题和提出的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-22T19:34:19.700

我只是用我自己的语言解释需求，提供我的假设并添加限制。

要求可能是“单击时按钮变为绿色”

我会问“好的，所以当用户单击按钮时，按钮的背景颜色变为绿色，但文本保持相同的颜色？”

基本上是促使提出要求的人解释他们设想它是如何工作的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-22T21:38:16.283

我的角色有很多需求收集。我发现最好的方法是双管齐下，通过 PowerPoint 演示文稿进行讨论，保持一切简单和高水平，并展示概念证明或模型。走过并与客户交谈会看到他们回答许多“如果”，例如“我可以尝试颜色吗？” 这让每个人都能大致了解他们正在得到什么。如果你能得到一些用户可以触摸和玩的东西，那么它在揭示隐藏的假设方面非常有效。

然后，用非常详细的低级别要求支持这个高级别。拼出带点的“i”并划掉“t”。在完成 POC 之外的任何事情之前，让用户通读并签署它们。通常带有大量屏幕截图的单词效果很好。

除非用户可以为您带来 UML 和数据流程图，否则不要在客户看到或签署的任何内容中使用它们。如果它是由客户签署的，并且您必须重新安排后端以满足“假设”，那么您必须完全让所有事情都辞职。

最后一件事是确保客户可以用他们自己的话与您谈论他们的要求并说明他们得到了什么。做到这一点的一种方法是坐在任何中层管理人员向更高管理人员出售的情况下。

不要试图欺骗客户，如果他们想要在最后一刻改变某些东西，请解释成本是多少，时间和金钱，并询问他们是否完全需要这样做。这样做，通常会阻止人们做出微不足道的改变，并迫使他们思考为什么他们想要改变。

需求是从他们所说的他们想要的东西中得到客户需要的东西。

编辑 - 关于尽早显示屏幕截图 - 这有时需要一个好的 PM 让客户知道时间尺度和一切在哪里。如果 PM 帮助设定了一些体面的时间框架和期望，客户就不会感到兴奋。POC 和屏幕截图的好处是人们可以了解它可能是什么样的，并且通常可以在他们的脑海中发挥作用。

如果您想避免屏幕截图，请进行线框外观或使用白板和 20 分钟的绘图。只需记住在鞭打之前将白板保存为照片。

白板（和良好的旧 OHP）可以成为需求收集的天赐之物 - 开发一种清晰的绘图概念风格可以节省研讨会的时间。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-22T19:32:04.903

流程图往往会混淆一些非技术人员（即客户），还有数据流程图。用例很好且易于理解，还有业务需求和技术需求文档，可能是某种粗略的线框草图。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-22T19:39:09.847

这真的取决于你在谈论的要求。

*   功能要求？也许UML是正确的工具。但我更喜欢测试 o 测试规范
*   图形用户界面要求？没有什么能比得上一张纸和一支铅笔。
*   安全要求？通过描述您的安全限制，您可以避免意外的欺骗。
*   可靠性要求？测试机制和软件/硬件备份/恢复计划。
*   其他要求：取决于您的客户。

但无论如何，请记住并向客户解释，在开发阶段需求会发生变化，这将始终是成本和功能之间的讨论和妥协。诚实让您的客户更有信心。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T19:45:49.643

我认为展示你真正理解客户想法的最佳方式是构建原型。

顺便说一句，我参加了上一届需求工程会议和其中一个研讨会 (MERE)，西门子展示了基于编写客户想法视频的有趣软件（它适用于不限于软件的项目）只是为了确保完全理解所有要求。

无论如何，事情是有时以创造性的方式展示它们会更好。不要将自己局限于标准图表。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T21:46:56.373

我在创建一个简单的词汇表方面有很好的经验，使用领域中的术语及其含义和关系，然后通过它并确保每个人都同意一切。

写作和讨论词汇会迫使你思考，而不是仅仅认为“我们稍后会解决这个问题”。

当然，这不是灵丹妙药，应该与其他方法一起使用，例如功能需求规范和可能的原型。

# javascript - IMG SRC 标签和 JavaScript

> ID：116967
> 
> 赞同：11
> 
> 时间：2008-09-22T19:29:37.577
> 
> 标签：javascript, asp.net, image

是否可以从 IMG SRC 标签调用 JavaScript 函数来获取图片 url？

像这样：

```
<IMG SRC="GetImage()" />

<script language="javascript">
   function GetImage() {return "imageName/imagePath.jpg"}
</script> 
```

这是使用 .NET 2.0。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-22T19:33:00.033

没有。这是不可能的，至少不是在所有浏览器中。你可以这样做：

```
<img src="blank.png" id="image" alt="just nothing">
<script type="text/javascript">
    document.getElementById('image').src = "yourpicture.png";
</script> 
```

你最喜欢的 JavaScript 框架会提供更好的方法 :)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-10-26T19:58:42.443

如果您想进行黑客攻击，这也可以。

```
<img src='blah' onerror="this.src='url to image'"> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-23T00:16:13.347

> 是否可以从 IMG SRC 标签调用 JavaScript 函数来获取图片 url？

您的意思是执行以下操作吗？

```
<img src="javascript:GetImage()" /> 
```

不幸的是，不——你不能那样做。但是，您可以执行以下 hack：

```
function getImageUrl(img) {
   var imageSrc = "imageName/imagePath.jpg";
   if(img.src != imageSrc) { // don't get stuck in an endless loop
      img.src = imageSrc;
   }
} 
```

然后，有以下html：

```
<img src="http://yourdomain.com/images/empty.gif" onload="getImageUrl(this)" /> 
```

仅当您将实际图像设置为 src 属性时才会触发 onload 事件 - 如果您不设置该属性或将其设置为空字符串或类似的东西，您将得不到爱。将其设置为单像素透明 gif 或类似的东西。

无论如何，这个 hack 是有效的，但取决于你真正想要完成的事情，这可能不是最好的解决方案。我不知道您为什么要这样做，但也许您有充分的理由（您想与我们分享！）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T19:31:39.770

你不能内联图像@src，但你应该能够从紧跟图像的内联脚本块中调用它：

```
<img src="" id="myImage"/>
<script type="text/javascript">
  document.getElementById("myImage").src = GetImage();
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T20:29:51.707

您可以通过调用 SRC 中的 aspx 页面来动态提供图像。

前任;

```
<img src="provideImage.aspx?someparameter=x" /> 
```

在页面方面，您需要将图像放入响应中并更改图像的内容类型。

唯一的“问题”是您的图像不会被索引，您最好在该提供程序页面上放置一些缓存，否则您将破坏服务器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T19:33:12.293

您在寻找 this.src 吗？

```
<img src='images/test.jpg' onmouseover="alert(this.src);"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T19:34:01.870

由于您使用的是 .NET，因此您可以添加`runat="server"`属性并`src`在代码隐藏中设置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T19:34:57.703

您**可能**可以在服务器端执行此操作。或者，您可以附加一个 onload 事件来交换图像 src。我想问题就变成了，为什么你必须首先使用 Javascript？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-23T00:29:16.013

我以前不得不做这样的事情，而 IIRC 的窍门最终是你不能更改 DOM 树的一部分的图像的 src 属性。因此，最好的办法是编写不带图像的 HTML 骨架，并 1）创建一个 onLoad 函数，该函数使用 document.createElement 生成一个新的 img 元素，2）使用 setAttribute() 设置 src 属性，以及 3）将其附加到您的 DOM树。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-10T10:52:34.473

一次又一次调用图像的 OnLoad 事件做这样的事情

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-09T08:53:28.910

这个怎么样？

```
var imgsBlocks = new Array( '/1.png', '/2.png', '/3.png');
function getImageUrl(elemid) {  
var ind = document.getElementById(elemid).selectedIndex;
document.getElementById("get_img").src=imgsBlocks[ind]; 
} 
```

它不工作？

```
<img src="'+imgsBlocks[2]+'" id="get_img"/> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2008-09-22T19:31:03.407

不，Img 的 SRC 属性不是事件，因此内联 JS 永远不会触发。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-12-10T10:50:41.403

一次又一次调用图像的 OnLoad 事件做这样的事情

# sql-server - 在 SQL Server 2005 中，我可以在不设置表属性的情况下进行级联删除吗？

> ID：116968
> 
> 赞同：39
> 
> 时间：2008-09-22T19:29:53.473
> 
> 标签：sql-server, sql-server-2005, cascade

我有一个充满客户数据的数据库。它太大了，操作起来真的很麻烦，我宁愿把它缩小到 10% 的客户，这对于开发来说已经足够了。我有很多表，我不想用“ON DELETE CASCADE”来改变它们，特别是因为这是一次性交易。

我可以在不先设置它们的情况下执行级联所有表的删除操作吗？如果没有，我最好的选择是什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-09-22T23:10:43.737

结合您的建议和我在网上找到的脚本，我制作了一个程序，该程序将生成 SQL，您可以运行该 SQL 来执行级联删除，而不管`ON DELETE CASCADE`. 这可能是在浪费时间，但我写得很开心。这样做的一个好处是，您可以`GO`在每一行之间放置一个语句，它不必是一个大事务。原来是一个递归过程；这个将递归展开到堆栈表中。

```
create procedure usp_delete_cascade (
    @base_table_name varchar(200), @base_criteria nvarchar(1000)
)
as begin
    -- Adapted from http://www.sqlteam.com/article/performing-a-cascade-delete-in-sql-server-7
    -- Expects the name of a table, and a conditional for selecting rows
    -- within that table that you want deleted.
    -- Produces SQL that, when run, deletes all table rows referencing the ones
    -- you initially selected, cascading into any number of tables,
    -- without the need for "ON DELETE CASCADE".
    -- Does not appear to work with self-referencing tables, but it will
    -- delete everything beneath them.
    -- To make it easy on the server, put a "GO" statement between each line.

    declare @to_delete table (
        id int identity(1, 1) primary key not null,
        criteria nvarchar(1000) not null,
        table_name varchar(200) not null,
        processed bit not null,
        delete_sql varchar(1000)
    )

    insert into @to_delete (criteria, table_name, processed) values (@base_criteria, @base_table_name, 0)

    declare @id int, @criteria nvarchar(1000), @table_name varchar(200)
    while exists(select 1 from @to_delete where processed = 0) begin
        select top 1 @id = id, @criteria = criteria, @table_name = table_name from @to_delete where processed = 0 order by id desc

        insert into @to_delete (criteria, table_name, processed)
            select referencing_column.name + ' in (select [' + referenced_column.name + '] from [' + @table_name +'] where ' + @criteria + ')',
                referencing_table.name,
                0
            from  sys.foreign_key_columns fk
                inner join sys.columns referencing_column on fk.parent_object_id = referencing_column.object_id 
                    and fk.parent_column_id = referencing_column.column_id 
                inner join  sys.columns referenced_column on fk.referenced_object_id = referenced_column.object_id 
                    and fk.referenced_column_id = referenced_column.column_id 
                inner join  sys.objects referencing_table on fk.parent_object_id = referencing_table.object_id 
                inner join  sys.objects referenced_table on fk.referenced_object_id = referenced_table.object_id 
                inner join  sys.objects constraint_object on fk.constraint_object_id = constraint_object.object_id
            where referenced_table.name = @table_name
                and referencing_table.name != referenced_table.name

        update @to_delete set
            processed = 1
        where id = @id
    end

    select 'print ''deleting from ' + table_name + '...''; delete from [' + table_name + '] where ' + criteria from @to_delete order by id desc
end

exec usp_delete_cascade 'root_table_name', 'id = 123' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-11T06:40:22.763

这是针对人口稀少的数据模型优化的公认答案的一个版本。它在将数据添加到删除列表之前检查 FK 链中是否存在数据。我用它来清理测试数据。

不要在活动的事务数据库中使用它——它会持有太久的锁。

```
/*
-- ============================================================================
-- Purpose: Performs a cascading hard-delete.
--          Not for use on an active transactional database- it holds locks for too long.
--          (http://stackoverflow.com/questions/116968/in-sql-server-2005-can-i-do-a-cascade-delete-without-setting-the-property-on-my)
-- eg:
exec dbo.hp_Common_Delete 'tblConsumer', 'Surname = ''TestDxOverdueOneReviewWm''', 1
-- ============================================================================
*/
create proc [dbo].[hp_Common_Delete]
(
    @TableName sysname, 
    @Where nvarchar(4000),  -- Shouldn't include 'where' keyword, e.g. Surname = 'smith', NOT where Surname = 'smith'
    @IsDebug bit = 0
)
as
set nocount on

begin try
    -- Prepare tables to store deletion criteria.  
    -- #tmp_to_delete stores criteria that is tested for results before being added to #to_delete
    create table #to_delete
    (
        id int identity(1, 1) primary key not null,
        criteria nvarchar(4000) not null,
        table_name sysname not null,
        processed bit not null default(0)
    )
    create table #tmp_to_delete 
    (
        id int primary key identity(1,1), 
        criteria nvarchar(4000) not null, 
        table_name sysname not null
    )

    -- Open a transaction (it'll be a long one- don't use this on production!)
    -- We need a transaction around criteria generation because we only 
    -- retain criteria that has rows in the db, and we don't want that to change under us.
    begin tran
        -- If the top-level table meets the deletion criteria, add it
        declare @Sql nvarchar(4000)
        set @Sql = 'if exists(select top(1) * from ' + @TableName + ' where ' + @Where + ') 
            insert #to_delete (criteria, table_name) values (''' + replace(@Where, '''', '''''') + ''', ''' + @TableName + ''')'
        exec (@Sql)

        -- Loop over deletion table, walking foreign keys to generate delete targets
        declare @id int, @tmp_id int, @criteria nvarchar(4000), @new_criteria nvarchar(4000), @table_name sysname, @new_table_name sysname
        while exists(select 1 from #to_delete where processed = 0) 
        begin
            -- Grab table/criteria to work on
            select  top(1) @id = id, 
                    @criteria = criteria, 
                    @table_name = table_name 
            from    #to_delete 
            where   processed = 0 
            order by id desc

            -- Insert all immediate child tables into a temp table for processing
            insert  #tmp_to_delete
            select  referencing_column.name + ' in (select [' + referenced_column.name + '] from [' + @table_name +'] where ' + @criteria + ')',
                    referencing_table.name
            from  sys.foreign_key_columns fk
                    inner join sys.columns referencing_column on fk.parent_object_id = referencing_column.object_id 
                            and fk.parent_column_id = referencing_column.column_id 
                    inner join  sys.columns referenced_column on fk.referenced_object_id = referenced_column.object_id 
                            and fk.referenced_column_id = referenced_column.column_id 
                    inner join  sys.objects referencing_table on fk.parent_object_id = referencing_table.object_id 
                    inner join  sys.objects referenced_table on fk.referenced_object_id = referenced_table.object_id 
                    inner join  sys.objects constraint_object on fk.constraint_object_id = constraint_object.object_id
            where referenced_table.name = @table_name
                    and referencing_table.name != referenced_table.name

            -- Loop on child table criteria, and insert them into delete table if they have records in the db
            select @tmp_id = max(id) from #tmp_to_delete
            while (@tmp_id >= 1)
            begin
                select @new_criteria = criteria, @new_table_name = table_name from #tmp_to_delete where id = @tmp_id
                set @Sql = 'if exists(select top(1) * from ' + @new_table_name + ' where ' + @new_criteria + ') 
                    insert #to_delete (criteria, table_name) values (''' + replace(@new_criteria, '''', '''''') + ''', ''' + @new_table_name + ''')'
                exec (@Sql)

                set @tmp_id = @tmp_id - 1
            end
            truncate table #tmp_to_delete

            -- Move to next record
            update  #to_delete 
            set     processed = 1
            where   id = @id
        end

        -- We have a list of all tables requiring deletion.  Actually delete now.
        select @id = max(id) from #to_delete 
        while (@id >= 1)
        begin
            select @criteria = criteria, @table_name = table_name from #to_delete where id = @id
            set @Sql = 'delete from [' + @table_name + '] where ' + @criteria
            if (@IsDebug = 1) print @Sql
            exec (@Sql)

            -- Next record
            set @id = @id - 1
        end
    commit
end try

begin catch
    -- Any error results in a rollback of the entire job
    if (@@trancount > 0) rollback

    declare @message nvarchar(2047), @errorProcedure nvarchar(126), @errorMessage nvarchar(2048), @errorNumber int, @errorSeverity int, @errorState int, @errorLine int
    select  @errorProcedure = isnull(error_procedure(), N'hp_Common_Delete'), 
            @errorMessage = isnull(error_message(), N'hp_Common_Delete unable to determine error message'), 
            @errorNumber = error_number(), @errorSeverity = error_severity(), @errorState = error_state(), @errorLine = error_line()

    -- Prepare error information as it would be output in SQL Mgt Studio
    declare @event nvarchar(2047)
    select  @event =    'Msg ' + isnull(cast(@errorNumber as varchar), 'null') + 
                        ', Level ' + isnull(cast(@errorSeverity as varchar), 'null') + 
                        ', State ' + isnull(cast(@errorState as varchar), 'null') + 
                        ', Procedure ' + isnull(@errorProcedure, 'null') + 
                        ', Line ' + isnull(cast(@errorLine as varchar), 'null') + 
                        ': ' + isnull(@errorMessage, '@ErrorMessage null')
    print   @event

    -- Re-raise error to ensure admin/job runners understand there was a failure
    raiserror(@errorMessage, @errorSeverity, @errorState)
end catch 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-22T20:05:07.130

除非您想按照 Chris 的建议维护所有相关查询，否则 ON DELETE CASCADE 是迄今为止最快和最直接的解决方案。如果您不希望它是永久的，为什么不使用一些 T-SQL 代码来打开和关闭此选项，就像这里

1.  删除原始`Tbl_A_MyFK`约束（没有 ON DELETE CASCADE）

    `ALTER TABLE Tbl_A DROP CONSTRAINT Tbl_A_MyFK`

2.  `Tbl_A_MyFK`使用 ON DELETE CASCADE设置约束

    `ALTER TABLE Tbl_A ADD CONSTRAINT Tbl_A_MyFK FOREIGN KEY (MyFK) REFERENCES Tbl_B(Column) ON DELETE CASCADE`

3.  在这里你可以做你的删除

    `DELETE FROM Tbl_A WHERE ...`

4.  放弃你的约束`Tbl_A_MyFK`

    `ALTER TABLE Tbl_A DROP CONSTRAINT Tbl_A_MyFK`

5.  `Tbl_A_MyFK`设置没有 ON DELETE CASCADE的约束

    `ALTER TABLE Tbl_A ADD CONSTRAINT Tbl_A_MyFK FOREIGN KEY (MyFK) REFERENCES (Tbl_B)`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-22T19:59:48.750

进入 SQL Server Management Studio 并右键单击数据库。选择任务-> 生成脚本。单击下一步两次。在 Options 窗口中选择将其设置为仅生成 CREATE 语句，并将除外键外的所有内容都设置为 False。点击下一步。选择表并再次单击下一步。单击“全选”按钮并单击下一步，然后单击完成并将脚本发送到您选择的查询窗口或文件（不要使用剪贴板，因为它可能是一个大脚本）。**现在删除所有添加表的脚本，**你应该留下一个脚本来创建你的外键。

制作该脚本的副本，因为这是您将数据库恢复到当前状态的方式。使用搜索和替换将 ON DELETE CASCADE 添加到每个约束的末尾。这可能会有所不同，具体取决于您的 FK 当前设置的方式，您可能需要进行一些手动编辑。

重复脚本生成，但这次将其设置为仅生成 DROP 语句。**请务必手动删除生成的表删除**。运行 drop，然后运行您编辑的创建以使它们在删除时全部级联。执行删除操作，再次运行 drop 脚本，然后运行您在开始时保存的脚本。

另外 -**首先备份您的数据库！**即使它只是一个开发数据库，​​如果部分脚本不完全正确，它也会让你头疼。

希望这可以帮助！

顺便说一句 - 您绝对应该按照另一张海报的建议对您的完整测试数据进行一些测试，但我可以理解为什么您可能不需要它进行初始开发。只是不要忘记在某些时候将其作为 QA 的一部分。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-11-21T15:36:12.557

凯文帖子不完整，他的 t-sql sp 只打印命令，执行这些命令，在最后结束之前添加这个

```
DECLARE @commandText VARCHAR(8000)
        DECLARE curDeletes CURSOR FOR
            select 'delete from [' + table_name + '] where ' + criteria from @to_delete order by id desc

        OPEN curDeletes
        FETCH NEXT FROM curDeletes
        INTO
            @commandText

        WHILE(@@FETCH_STATUS=0)
        BEGIN
            EXEC (@commandText)
            FETCH NEXT FROM curDeletes INTO @commandText
        END
        CLOSE curDeletes
        DEALLOCATE curDeletes 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T19:41:04.303

我通常只是手写查询以删除我不想要的记录并将其保存为 .sql 文件以供将来参考。伪代码是：

1.  从我要删除到临时表的主表中选择记录的 id
2.  为连接到临时表的每个相关表编写一个删除查询。
3.  为加入我的临时表的主表编写删除查询。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-22T19:42:17.093

我的建议是继续编写一个脚本，将 on delete 级联添加到数据库中的每个关系，同时导出修改后的关系列表。然后您可以反转该过程并删除列表中每个表上的 on delete cascade 命令。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-22T19:44:31.080

就个人而言，如果您打算将记录留在生产中，我也会将它们留在开发中。否则，您可能编写的代码在记录集较小时可以正常工作，但在面对真实记录集时会超时。

但是，如果您决心这样做，我会先将您要检测的记录的 id 字段从主表复制到工作表中。然后，我将获取每个相关表并写入该工作表的删除连接，以仅删除这些记录。完成父表。确保这个 ia 写在脚本中并保存，这样下次你想对测试数据做类似的事情时，你可以轻松地运行它，而不必弄清楚哪些表是需要从它们中删除记录的。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-10-07T18:36:17.607

进一步考虑接受的答案，我需要跨不同模式的表执行此操作。我已更新脚本以在输出的删除脚本中包含架构。

```
CREATE PROCEDURE usp_delete_cascade (
        @base_table_schema varchar(100), @base_table_name varchar(200), @base_criteria nvarchar(1000)
)
as begin

        -- Expects the name of a table, and a conditional for selecting rows
        -- within that table that you want deleted.
        -- Produces SQL that, when run, deletes all table rows referencing the ones
        -- you initially selected, cascading into any number of tables,
        -- without the need for "ON DELETE CASCADE".
        -- Does not appear to work with self-referencing tables, but it will
        -- delete everything beneath them.
        -- To make it easy on the server, put a "GO" statement between each line.

        declare @to_delete table (
                id int identity(1, 1) primary key not null,
                criteria nvarchar(1000) not null,
                table_schema varchar(100),
                table_name varchar(200) not null,
                processed bit not null,
                delete_sql varchar(1000)
        )

        insert into @to_delete (criteria, table_schema, table_name, processed) values (@base_criteria, @base_table_schema, @base_table_name, 0)

        declare @id int, @criteria nvarchar(1000), @table_name varchar(200), @table_schema varchar(100)
        while exists(select 1 from @to_delete where processed = 0) begin
                select top 1 @id = id, @criteria = criteria, @table_name = table_name, @table_schema = table_schema from @to_delete where processed = 0 order by id desc

                insert into @to_delete (criteria, table_schema, table_name, processed)
                        select referencing_column.name + ' in (select [' + referenced_column.name + '] from [' + @table_schema + '].[' + @table_name +'] where ' + @criteria + ')',
                                schematable.name,
                                referencing_table.name,
                                0
                        from  sys.foreign_key_columns fk
                                inner join sys.columns referencing_column on fk.parent_object_id = referencing_column.object_id 
                                        and fk.parent_column_id = referencing_column.column_id 
                                inner join  sys.columns referenced_column on fk.referenced_object_id = referenced_column.object_id 
                                        and fk.referenced_column_id = referenced_column.column_id 
                                inner join  sys.objects referencing_table on fk.parent_object_id = referencing_table.object_id 
                                inner join sys.schemas schematable on referencing_table.schema_id = schematable.schema_id
                                inner join  sys.objects referenced_table on fk.referenced_object_id = referenced_table.object_id 
                                inner join  sys.objects constraint_object on fk.constraint_object_id = constraint_object.object_id
                        where referenced_table.name = @table_name
                                and referencing_table.name != referenced_table.name

                update @to_delete set
                        processed = 1
                where id = @id
        end

        select 'print ''deleting from ' + table_name + '...''; delete from [' + table_schema + '].[' + table_name + '] where ' + criteria from @to_delete order by id desc
end

exec usp_delete_cascade 'schema', 'RootTable', 'Id = 123'
exec usp_delete_cascade 'schema', 'RootTable', 'GuidId = ''A7202F84-FA57-4355-B499-1F8718E29058''' 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-06-01T20:35:21.240

扩展 croisharp 的答案以考虑触发器，即禁用所有影响触发器、删除行并启用触发器的模式感知解决方案。

```
CREATE PROCEDURE usp_delete_cascade (
@base_table_schema varchar(100),
@base_table_name varchar(200),
@base_criteria nvarchar(1000)
)
as begin

    -- Expects the name of a table, and a conditional for selecting rows
    -- within that table that you want deleted.
    -- Produces SQL that, when run, deletes all table rows referencing the ones
    -- you initially selected, cascading into any number of tables,
    -- without the need for "ON DELETE CASCADE".
    -- Does not appear to work with self-referencing tables, but it will
    -- delete everything beneath them.
    -- To make it easy on the server, put a "GO" statement between each line.

    declare @to_delete table (
            id int identity(1, 1) primary key not null,
            criteria nvarchar(1000) not null,
            table_schema varchar(100),
            table_name varchar(200) not null,
            processed bit not null,
            delete_sql varchar(1000)
    )

    insert into @to_delete (criteria, table_schema, table_name, processed) values (@base_criteria, @base_table_schema, @base_table_name, 0)

    declare @id int, @criteria nvarchar(1000), @table_name varchar(200), @table_schema varchar(100)
    while exists(select 1 from @to_delete where processed = 0) begin
            select top 1 @id = id, @criteria = criteria, @table_name = table_name, @table_schema = table_schema from @to_delete where processed = 0 order by id desc

            insert into @to_delete (criteria, table_schema, table_name, processed)
                    select referencing_column.name + ' in (select [' + referenced_column.name + '] from [' + @table_schema + '].[' + @table_name +'] where ' + @criteria + ')',
                            schematable.name,
                            referencing_table.name,
                            0
                    from  sys.foreign_key_columns fk
                            inner join sys.columns referencing_column on fk.parent_object_id = referencing_column.object_id 
                                    and fk.parent_column_id = referencing_column.column_id 
                            inner join  sys.columns referenced_column on fk.referenced_object_id = referenced_column.object_id 
                                    and fk.referenced_column_id = referenced_column.column_id 
                            inner join  sys.objects referencing_table on fk.parent_object_id = referencing_table.object_id 
                            inner join sys.schemas schematable on referencing_table.schema_id = schematable.schema_id
                            inner join  sys.objects referenced_table on fk.referenced_object_id = referenced_table.object_id 
                            inner join  sys.objects constraint_object on fk.constraint_object_id = constraint_object.object_id
                    where referenced_table.name = @table_name
                            and referencing_table.name != referenced_table.name

            update @to_delete set
                    processed = 1
            where id = @id
    end

    select 'print ''deleting from ' + table_name + '...''; delete from [' + table_schema + '].[' + table_name + '] where ' + criteria from @to_delete order by id desc

    DECLARE @commandText VARCHAR(8000), @triggerOn VARCHAR(8000), @triggerOff VARCHAR(8000)
    DECLARE curDeletes CURSOR FOR
        select
            'DELETE FROM [' + table_schema + '].[' + table_name + '] WHERE ' + criteria,
            'ALTER TABLE [' + table_schema + '].[' + table_name + '] DISABLE TRIGGER ALL',
            'ALTER TABLE [' + table_schema + '].[' + table_name + '] ENABLE TRIGGER ALL'
        from @to_delete order by id desc

    OPEN curDeletes
    FETCH NEXT FROM curDeletes INTO @commandText, @triggerOff, @triggerOn

    WHILE(@@FETCH_STATUS=0)
    BEGIN
        EXEC (@triggerOff)
        EXEC (@commandText)
        EXEC (@triggerOn)
        FETCH NEXT FROM curDeletes INTO @commandText, @triggerOff, @triggerOn
    END
    CLOSE curDeletes
    DEALLOCATE curDeletes
end 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-03-31T19:58:15.697

选择后，您必须构建并执行实际的删除

```
declare @deleteSql nvarchar(1200)
declare delete_cursor cursor for
select table_name, criteria 
from @to_delete
order by id desc

open delete_cursor

fetch next from delete_cursor
into @table_name, @criteria

while @@fetch_status = 0
begin
 select @deleteSql = 'delete from ' + @table_name + ' where ' + @criteria
 --print @deleteSql
-- exec sp_execute @deleteSql
EXEC SP_EXECUTESQL @deleteSql

 fetch next from delete_cursor
 into @table_name, @criteria
end
close delete_cursor
deallocate delete_cursor 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-10-21T18:04:51.060

在这里发布一个将使用外键的脚本包含多个列。

```
create procedure usp_delete_cascade (
@TableName varchar(200), @Where nvarchar(1000)
) as begin

declare @to_delete table (
    id int identity(1, 1) primary key not null,
    criteria nvarchar(1000) not null,
    table_name varchar(200) not null,
    processed bit not null default(0),
    delete_sql varchar(1000)
)
            DECLARE @MyCursor CURSOR

declare         @referencing_column_name varchar(1000)
declare         @referencing_table_name varchar(1000)
 declare @Sql nvarchar(4000)
insert into @to_delete (criteria, table_name) values ('', @TableName)

declare @id int, @criteria nvarchar(1000), @table_name varchar(200)
while exists(select 1 from @to_delete where processed = 0) begin
    select top 1 @id = id, @criteria = criteria, @table_name = table_name from @to_delete where processed = 0 order by id desc
        SET @MyCursor = CURSOR FAST_FORWARD
        FOR
        select referencing_column.name as column_name,
            referencing_table.name as table_name
        from  sys.foreign_key_columns fk
            inner join sys.columns referencing_column on fk.parent_object_id = referencing_column.object_id 
                and fk.parent_column_id = referencing_column.column_id 
            inner join  sys.columns referenced_column on fk.referenced_object_id = referenced_column.object_id 
                and fk.referenced_column_id = referenced_column.column_id 
            inner join  sys.objects referencing_table on fk.parent_object_id = referencing_table.object_id 
            inner join  sys.objects referenced_table on fk.referenced_object_id = referenced_table.object_id 
            inner join  sys.objects constraint_object on fk.constraint_object_id = constraint_object.object_id
        where referenced_table.name = @table_name
            and referencing_table.name != referenced_table.name

        OPEN @MyCursor
        FETCH NEXT FROM @MYCursor
        INTO @referencing_column_name, @referencing_table_name

        WHILE @@FETCH_STATUS = 0

        BEGIN
            PRINT @referencing_column_name
            PRINT @referencing_table_name
                    update @to_delete set criteria = criteria + ' AND '+@table_name+'.'+@referencing_column_name+'='+ @referencing_table_name+'.'+@referencing_column_name
                    where table_name = @referencing_table_name

                    if(@@ROWCOUNT = 0)
                    BEGIN
                            --if(@id <> 1)
                            --BEGIN
                                insert into @to_delete (criteria, table_name)
                                VALUES( ' LEFT JOIN '+@table_name+' ON '+@table_name+'.'+@referencing_column_name+'='+ @referencing_table_name+'.'+@referencing_column_name+ @criteria,
                                @referencing_table_name
                                )
                            --END
                            --ELSE
                            --BEGIN
                                --insert into @to_delete (criteria, table_name)
                                --VALUES( ' LEFT JOIN '+@table_name+' ON '+@table_name+'.'+@referencing_column_name+'='+ @referencing_table_name+'.'+@referencing_column_name,
                                --@referencing_table_name
                                --)
                            --END
                    END
                        FETCH NEXT FROM @MYCursor
            INTO @referencing_column_name, @referencing_table_name
        END

        CLOSE @MyCursor 
        DEALLOCATE @MyCursor 
    update @to_delete set
        processed = 1
    where id = @id
end

--select 'print ''deleting from ' + table_name + '...''; delete from [' + table_name + '] where ' + criteria from @to_delete order by id desc

--select id, table_name, criteria, @Where from @to_delete order by id desc

select @id = max(id) from @to_delete
while (@id >= 1)
begin
    select @criteria = criteria, @table_name = table_name from @to_delete where id = @id
    set @Sql = 'delete [' + @table_name + '] from [' + @table_name + '] ' + @criteria+' WHERE '+@Where
    exec (@Sql)
    PRINT @Sql

    -- Next record
    set @id = @id - 1
end
end 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-26T07:07:20.420

此脚本有两个问题： 1\. 您必须指明条件 1=1 才能删除所有表库。2\. 这仅创建与基表的直接关系。如果最终表有另一个表父关系，则删除失败

DELETE FROM [dbo].[table2] WHERE TableID in (select [ID] from [dbo].[table3] where 1=1)

如果 table2 有一个父关系 table1

# java - 谁能推荐一个简单的 Java web-app 框架？

> ID：116978
> 
> 赞同：65
> 
> 时间：2008-09-22T19:30:59.677
> 
> 标签：java, web-frameworks

我正在尝试开始我希望在 Java 中相对快速的 Web 应用程序，但是我尝试过的大多数框架（Apache Wicket、Liftweb）都需要大量的设置、配置和尝试把我的头绕在 Maven 上，同时让整个事情与 Eclipse 一起玩得很好，我整个周末都在试图达到我写第一行代码的地步！

谁能推荐一个不涉及 Maven、极其复杂的目录结构或无数必须手动编辑的 XML 文件的简单 Java webapp 框架？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-10-25T19:15:57.547

自己没试过，但我觉得

[http://www.playframework.org/](http://www.playframework.org/)

有很大的潜力...

来自 php 和经典的 asp，它是第一个听起来对我很有希望的 java web 框架......

*由原始提问者编辑 - 2011-06-09*

只是想提供一个更新。

我选择了 Play，这正是我所要求的。它只需要很少的配置，开箱即用。不同寻常的是，它避开了一些常见的 Java 最佳实践，而倾向于使事情尽可能简单。

特别是，它大量使用了静态方法，甚至对传递给方法的变量名称进行了一些自省，这是 Java 反射 API 不支持的。

Play 的态度是，它的首要目标是成为一个有用的 Web 框架，坚持常见的 Java 最佳实践和习语是次要的。这种方法对我来说很有意义，但 Java 纯粹主义者可能不喜欢它，并且使用[Apache Wicket](http://wicket.apache.org/)会更好。

总而言之，如果您想构建一个方便和简单的 Web 应用程序，它可以与 Ruby on Rails 之类的框架相媲美，但在 Java 中并受益于 Java 工具（例如 Eclipse），那么 Play Framework 是一个不错的选择。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2008-09-22T20:47:32.303

（针对 Spring 3.0 更新）

我也使用[Spring MVC](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html)。

你需要从[这里下载 Spring](http://www.springframework.org/download)

要将您的 Web 应用程序配置为使用 Spring，请将以下 servlet 添加到您的`web.xml`

```
<web-app>
    <servlet>
        <servlet-name>spring-dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring-dispatcher</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

然后你需要创建你的 Spring 配置文件`/WEB-INF/spring-dispatcher-servlet.xml`

这个文件的第一个版本可以很简单：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
        http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/mvc     http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

   <context:component-scan base-package="com.acme.foo" />    
   <mvc:annotation-driven />

</beans> 
```

然后 Spring 将自动检测带有注释的类`@Controller`

那么一个简单的控制器是：

```
package com.acme.foo;

import java.util.logging.Logger;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping("/person")
public class PersonController {

    Logger logger = Logger.getAnonymousLogger();

    @RequestMapping(method = RequestMethod.GET)
    public String setupForm(ModelMap model) {
        model.addAttribute("person", new Person());
        return "details.jsp";
    }

    @RequestMapping(method = RequestMethod.POST)
    public String processForm(@ModelAttribute("person") Person person) {
        logger.info(person.getId());
        logger.info(person.getName());
        logger.info(person.getSurname());
        return "success.jsp";
   }
} 
```

和`details.jsp`

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<form:form commandName="person">
<table>
    <tr>
        <td>Id:</td>
        <td><form:input path="id" /></td>
    </tr>
    <tr>
        <td>Name:</td>
        <td><form:input path="name" /></td>
    </tr>
    <tr>
        <td>Surname:</td>
        <td><form:input path="surname" /></td>
    </tr>
    <tr>
        <td colspan="2"><input type="submit" value="Save Changes" /></td>
    </tr>
</table>
</form:form> 
```

这只是 Spring 可以做什么的冰山一角……

希望这可以帮助。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2008-09-22T20:28:13.550

我*真的很*[喜欢](http://www.stripesframework.org)Stripes 。整个设置包括一些将 XML 剪切并粘贴到您的应用程序的 web.xml 中，然后您就可以离开了。不需要配置，因为 Stripes 是一个约定优于配置的框架。覆盖默认行为是通过 Java 1.5 注释完成的。文档很棒。我花了大约 1-2 小时阅读教程并设置我的第一个应用程序。

我还不能与 Struts 或 Spring-MVC 进行深入比较，因为我还没有在其中构建完整的模型（就像我在 Struts 中所做的那样），但看起来它会扩展到那个级别建筑相当不错。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2008-09-22T19:35:53.100

您正在搜索[http://grails.org/](http://grails.org/)

您可以使用 groovy 对其进行编码，这是一种基于 Java 的动态语言，并且可以与 Java 代码、类和库一起顺利运行。语法既不难学，也与 Java 相差甚远。试一试，让网站启动并运行需要几分钟。只需按照[http://grails.org/Installation](http://grails.org/Installation)和[http://grails.org/Quick+Start](http://grails.org/Quick+Start)

格瑞兹，GHad

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-22T20:19:02.167

查看 WaveMaker 以构建快速、简单的 web 应用程序。他们有一个基于浏览器的 Dojo/JavaScript 小部件拖放设计器，后端是 100% Java。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-22T20:34:03.897

条纹：很不错。务实的程序员出版了一本关于这方面的书：http: [//www.pragprog.com/titles/fdstr/stripes](http://www.pragprog.com/titles/fdstr/stripes)。没有 XML。需要 java 1.5 或更高版本。

Tapestry：尝试过旧版本 3.x。有人告诉我，当前版本 5.x 处于 Beta 版并且相当不错。

在照顾 maven、没有 xml 和快速环绕你的头方面，条纹应该更好。

BR，
~A

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-09-22T20:10:09.460

Grails 是为 Groovy 而不是 Java 编写的。AppFuse 只是减少了启动任意数量的 Webapp 框架所需的设置时间，而不是推广其中的任何一个。

我建议使用 Spring MVC。遵循编写良好的教程后，您将拥有一个简单易用的模型，该模型自动连接（无需 XML 配置！）到您喜欢的任何视图技术中。

想要在您的客户列表中添加“删除”操作？只需将一个名为“delete”的方法添加到您的客户控制器，它就会自动连接到 URL /customers/delete。

需要将您的请求参数绑定到一个对象上吗？只需将目标对象的实例添加到您的方法中，Spring MVC 将使用反射来绑定您的参数，使编写逻辑就像客户端传递一个强类型对象一样简单。

厌倦了所有强制的 MVC 分工？只需让您的方法返回 void，然后将您的响应直接写入 servlet 的 Writer，如果那是您的事情。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-22T20:18:45.413

我喜欢 Spring MVC，使用 2.5 特性几乎没有涉及 XML。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-09-22T20:25:23.417

[Stripes 框架](http://www.stripesframework.org/)是一个优秀的框架。所涉及的唯一配置是在 web.xml 中粘贴几行。

这是一个非常直接的基于请求的 Java Web 框架。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-09-24T00:52:29.553

> Apache Wicket、Liftweb）需要如此多的设置、配置

我不同意，我将 Wicket 用于我所有的项目，并且从未回头！设置不需要太多，甚至不需要一个小时来设置一个完整的环境来使用 Wicket..

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-06-07T09:25:23.550

看看 Ninja Web 框架。

它是Rails 传统的纯Java MVC 框架。它不使用任何基于 xml 的配置，并且拥有您立即开始所需的一切：会话管理、安全管理、html 呈现、json 呈现和解析、xml 呈现和解析。它还具有内置的测试环境，并且与传统的 servlet 容器 100% 兼容。

虽然它使用了 Maven——但正确使用 Maven 使软件开发变得超级简单。它还允许您立即使用任何 Ide :)

顺便说一句 - 开发 Ninja 真的很有效率 - 更改您的代码并立即查看结果。

查看：[http](http://www.ninjaframework.org) ://www.ninjaframework.org 。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-09-22T19:35:12.930

我喜欢编写普通的旧 servlet+ [winstone](http://winstone.sourceforge.net/) servlet 容器。从那里我在需要时使用模板（速度、XSLT 等）和数据库访问（休眠、扭矩等）库，而不是进入实际框架。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2010-02-01T21:51:04.030

试试[Apache 点击](http://click.apache.org)

它类似于 Wicket，但效率更高且易于学习。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-22T23:29:39.497

Tapestry 5 可以使用 maven 原型快速设置。请参阅 Tapestry 5 教程： [http ://tapestry.apache.org/tapestry5/tutorial1/](http://tapestry.apache.org/tapestry5/tutorial1/)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-23T09:11:43.417

我真的不明白让 maven + eclipse 工作有什么大不了的，只要你不必过多地更改 pom.xml :)

用户 maven 的大多数框架都具有可以生成存根项目的 maven 原型。

所以基本上步骤应该是：

1.  安装maven
2.  将 M2_REPO 类路径变量添加到 eclipse
3.  使用原型生成项目
4.  将项目导入eclipse

至于 Wicket，没有 maven 就没有理由不能使用它。maven 的好处是它会处理所有依赖项，因此您不必这样做。另一方面，如果您只想制作几个页面的原型，那么 Wicket 可能就有点过分了。但是，如果您的应用程序最终增长，Wicket 的好处将随着每个添加的表单、链接或页面继续显示 :)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-23T10:18:01.933

正确答案 IMO 取决于两件事： 1\. 您要编写的 Web 应用程序的目的是什么？您只是告诉我们您想快速编写它，而不是您实际尝试做的事情。例如。它需要数据库吗？它是某种商业应用程序（提示：也许搜索“脚手架”）？..还是游戏？..或者你只是在尝试某种东西？2\. 你现在最熟悉的框架是什么？通常花费最多时间的是阅读文档并弄清楚事情（真正）是如何工作的。如果您想快速完成，请坚持您已经熟悉的事情。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-09-23T10:43:04.807

在经历了 Struts、Tapestry 3/4、JSF、JBoss Seam、GWT 的许多痛苦经历之后，我现在会坚持使用 Wicket。Eclipse 的 Wicket Bench 很方便，但不是 100% 完成，但仍然有用。用于部署到 Tomcat 的 MyEclipse 插件是 ace。没有 Maven 只需部署一次，更改会自动复制到 Tomcat。魔法。

我的建议：Wicket 1.4、MyEclipse、Subclipse、Wicket Bench、Tomcat 6。设置需要一个小时左右，但其中大部分将是下载 tomcat 和 Eclipse 插件。

提示：不要使用 Wicket Bench 库，手动将 Wicket 1.4 库安装到项目中。

这个网站花了我大约 2 个小时来写[http://rateearear.co.uk](http://ratearear.co.uk) - 不要下班去那里！而这个工作大约需要 3 天[http://tnwdb.com](http://tnwdb.com)

祝你好运。蒂姆

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2009-10-27T00:42:03.070

[web4j](http://www.web4j.com/)工具将自己推销为简单易用。关于它的几点：

*   使用单个 xml 文件（所有 servlet 所需的 web.xml 文件）
*   不依赖 Maven（或任何其他 3rd 方工具/jar）
*   全栈，开源（BSD）
*   任何全栈 Java 框架的最少类数
*   放在纯文本文件中的 SQL
*   鼓励使用不可变对象
*   所需的最少工具集（JSP/JSTL、Java、SQL）

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2009-12-14T23:03:04.613

如果您喜欢轻松地进行 CRUD 并创建一个快速原型应用程序，那么 Grails 是您的最佳选择，它也与 Eclipse 配合得很好。按照此处[http://grails.org/Tutorials](http://grails.org/Tutorials)的“构建您的第一个 Grails 应用程序”教程，您可以在不到一个小时的时间内启动并运行您自己的应用程序。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2010-11-26T01:39:36.310

你可以试试[JRapid](http://www.jrapid.com)。使用领域驱动设计，您可以定义您的应用程序，它会为您的 Web 应用程序生成完整的堆栈。它使用已知的开源框架并生成一个非常漂亮且易于使用的 UI。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-09-22T19:42:57.497

[AppFuse](http://appfuse.org/display/APF/Home)我没有使用过它，它旨在促进 Java Web 开发附带的令人讨厌的设置。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2010-10-01T08:21:59.283

试试 Wavemaker [http://wavemaker.com](http://wavemaker.com)免费，易于使用。使用 WaveMaker 构建美观的 Java 应用程序的学习曲线只需几周！

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2011-06-27T13:21:11.053

城堡框架

[http://maven.castleframework.org/nexus/content/repositories/releases/](http://maven.castleframework.org/nexus/content/repositories/releases/)

使用 maven 安装。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2011-08-04T16:48:47.273

试试瓦丁！非常简单，您也可以轻松地使用 UI！[www.vaadin.com](http://www.vaadin.com)

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2012-06-07T23:42:55.650

前几天我发现了一个非常轻量级的 Java Web 框架。

它被称为 Jodd，它为您提供了 Spring 所期望的许多基础知识，但它是一个小于 1MB 的非常轻量级的包。

[http://jodd.org/](http://jodd.org/)

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2012-07-28T10:43:29.433

也看看[activeweb](http://code.google.com/p/activeweb/)。它简单，轻量级，并利用了我喜欢的其他一些东西（guice，maven ...）。它的控制器可以提供您想要的任何内容，包括 json、Html、纯文本、pdf、图像...您可以制作 restful 控制器，甚至使用注释来确定控制器方法接受哪些 http 方法（POST、GET、...）。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2013-06-05T09:49:10.047

我会考虑坚持使用 JSP、servlet 和 JSTL 在与我共事的几家公司处理 Web 框架超过 12 年之后，我总是发现自己回到了良好的旧 JSP。是的，有些事情您需要自己编写，而某些框架会自动完成。但是如果你正确地处理它，并在你的 servlet 之上构建一些基本的实用程序，它会提供最好的灵活性，你可以轻松地做任何你想做的事情。我没有发现在任何框架中编写的真正优势。我一直在寻找。

看了上面所有的答案也意味着没有一个真正的框架是好的和规则的。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-22T19:43:48.913

你试过 DWR 吗？[http://directwebremoting.org](http://directwebremoting.org)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-10-25T19:23:53.760

Oracle ADF [http://www.oracle.com/technology/products/jdev/index.html](http://www.oracle.com/technology/products/jdev/index.html)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2010-10-01T08:36:33.370

最近我发现了看起来很有前途的[AribaWeb框架。](http://aribaweb.org/)它提供了良好的功能（甚至是 AJAX）、良好的文档。用 Groovy/Java 编写，甚至包括一个 Tomcat-Server。试图进入*春天*真的让我很生气。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2012-01-11T18:37:44.530

我也推荐[Apache Click](http://click.apache.org)。如果您通过了十分钟的测试（我认为这是您阅读[快速入门指南](http://click.apache.org/docs/quick-start.html)的时间），您将不会回来！

问候，

吉尔伯托

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2012-06-23T09:26:51.747

试试这个：[http ://skingston.com/SKWeb](http://skingston.com/SKWeb)

它可以做一些更多的功能和改进，但它很简单而且很有效。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2013-02-22T21:48:41.233

Java Web 应用程序的一个共同属性是它们通常使用 servlet，这通常意味着 Web 服务器也运行 Java。这有助于感知复杂性，恕我直言。但是您可以以传统的 Unix 风格“只做一件事，把它做好”来构建 Java 应用程序，而不会影响性能。

你也可以使用[SCGI](https://gist.github.com/ArtemGr/38425)，它比 FastCGI 简单得多。我会先试试。但如果不成功：

# 如何用 Java 编写 FastCGI 应用程序

1.  创建一个空的工作目录并进入它
2.  下载 FastCGI 开发包：`wget --quiet --recursive --no-parent --accept=java --no-directories --no-host-directories "http://www.fastcgi.com/devkit/java/"`
3.  `mkdir -p com/fastcgi`
4.  `mv *.java com/fastcgi`
5.  现在您需要对 devkit 应用一个小补丁（将 operator 替换`==`为`<=`第 175 行或使用此脚本来执行此操作）：

    `echo -e "175c\nif (count <= 0) {\n.\nw\nn\nq" | ed -s com/fastcgi/FCGIInputStream.java`

6.  创建一个测试应用程序，`TinyFCGI.java`（来源如下）
7.  编译一切：（`javac **/*.java`可能`**`只适用于`zsh`）
8.  启动 FastCGI 服务器：（`java -DFCGI_PORT=9884 TinyFCGI`让它在后台运行）
9.  现在设置例如 Apache 以使用服务器：

    *   使用 Apache 2.4，您可以`mod_proxy_fcgi`像这样使用：
        1.  使用 Ubuntu，使用 ie [this PPA升级到 Apache 2.4](https://launchpad.net/~derek-morton/+archive/apache-2.4)
        2.  启用模组：`sudo a2enmod proxy_fcgi`
        3.  `/etc/apache2/conf-enabled/your_site.conf`使用以下内容创建
        4.  重启阿帕奇：`sudo apache2ctl restart`
10.  现在您可以在以下位置访问 webapp`http://localhost/your_site`

11.  下面的基准测试结果

## `TinyFCGI.java`

```
import com.fastcgi.FCGIInterface;
import java.io.*;
import static java.lang.System.out;

class TinyFCGI {
    public static void main (String args[]) {
        int count = 0;
        FCGIInterface fcgiinterface = new FCGIInterface();
        while(fcgiinterface.FCGIaccept() >= 0) {
            count++;
            out.println("Content-type: text/html\n\n");
            out.println("<html>");
            out.println(
                "<head><TITLE>FastCGI-Hello Java stdio</TITLE></head>");
            out.println("<body>");
            out.println("<H3>FastCGI-HelloJava stdio</H3>");
            out.println("request number " + count +
                               " running on host "
                               + System.getProperty("SERVER_NAME"));
            out.println("</body>");
            out.println("</html>");
        }
    }
} 
```

## `your_site.conf`

```
<Location /your_site>
  ProxyPass fcgi://localhost:9884/
</Location> 
```

## 基准测试结果

**工作**

```
$ ./wrk -t1 -c100 -r10000 http://localhost/your_site 
Making 10000 requests to http://localhost/your_site
  1 threads and 100 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     3.58s    13.42s    1.06m    94.42%
    Req/Sec     0.00      0.00     0.00    100.00%
  10000 requests in 1.42m, 3.23MB read
  Socket errors: connect 0, read 861, write 0, timeout 2763
  Non-2xx or 3xx responses: 71
Requests/sec:    117.03
Transfer/sec:     38.70KB 
```

**抗体**

```
$ ab -n 10000 -c 100 localhost:8800/your_site
Concurrency Level:      100
Time taken for tests:   12.640 seconds
Complete requests:      10000
Failed requests:        0
Write errors:           0
Total transferred:      3180000 bytes
HTML transferred:       1640000 bytes
Requests per second:    791.11 [#/sec] (mean)
Time per request:       126.404 [ms] (mean)
Time per request:       1.264 [ms] (mean, across all concurrent requests)
Transfer rate:          245.68 [Kbytes/sec] received 
```

**围城**

```
$ siege -r 10000 -c 100 "http://localhost:8800/your_site"
** SIEGE 2.70
** Preparing 100 concurrent users for battle.
The server is now under siege...^C
Lifting the server siege...      done.
Transactions:              89547 hits
Availability:             100.00 %
Elapsed time:             447.93 secs
Data transferred:          11.97 MB
Response time:              0.00 secs
Transaction rate:         199.91 trans/sec
Throughput:             0.03 MB/sec
Concurrency:                0.56
Successful transactions:       89547
Failed transactions:               0
Longest transaction:            0.08
Shortest transaction:           0.00 
```

# c# - C# 泛型有性能优势吗？

> ID：116988
> 
> 赞同：38
> 
> 时间：2008-09-22T19:32:52.637
> 
> 标签：c#, .net, performance, generics

我有许多代表各种实体的数据类。

哪个更好：使用泛型和接口编写一个泛型类（例如，打印或输出 XML），还是编写一个单独的类来处理每个数据类？

是否有性能优势或任何其他优势（除了节省我编写单独类的时间）？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2008-09-22T19:33:42.090

使用泛型有一个显着的性能优势——你取消了[装箱和拆箱](http://en.wikipedia.org/wiki/Boxing_(Computer_science)#Boxing)。与开发自己的课程相比，这是一次抛硬币（硬币的一侧比另一侧更重）。仅当您认为自己可以胜过框架的作者时，才可以自己动手。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-09-23T03:16:02.633

不仅是的，而且是的。我不相信他们能带来多大的改变。在将一小部分使用 ArrayLists 和 HashTables 的核心代码改写为泛型之后，我们在 VistaDB 中进行了测试。速度提高了 250% 或更多。

[阅读我的博客，了解](https://web.archive.org/web/20100709213139/http://www.vistadb.net/blog/post/2008/07/18/Strongly-type-everything!.aspx)我们对泛型与弱类型集合所做的测试。结果让我们大吃一惊。

我已经开始将许多使用弱类型集合的旧代码重写为强类型集合。我对 ADO.NET 接口最大的了解之一是它们不公开更强类型的数据输入和输出方法。从物体到背面的铸造时间是大批量应用中的绝对杀手。

强类型的另一个副作用是您经常会在代码中发现弱类型的引用问题。我们发现，通过在某些情况下[实现结构](https://web.archive.org/web/20101124023832/http://www.vistadb.net/blog/post/2008/08/15/Class-v-Struct.aspx)以避免对 GC 施加压力，我们可以进一步加快代码速度。将此与强输入相结合，以获得最佳速度提升。

有时您必须在 dot net 运行时中使用弱类型接口。尽管尽可能寻找保持强类型的方法。它确实对非平凡应用程序的性能产生了巨大影响。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-09-22T19:46:45.833

从 CLR 的角度来看，C# 中的泛型是真正的泛型类型。泛型类的性能与执行完全相同操作的特定类之间不应该有任何根本区别。这与 Java 泛型不同，Java 泛型更多的是在需要的地方进行自动类型转换或在编译时扩展的 C++ 模板。

这是一篇好论文，有点旧，解释了基本设计： [“.NET 公共语言运行时泛型的设计和实现”](http://research.microsoft.com/pubs/64031/designandimplementationofgenerics.pdf)。

如果您为特定任务手动编写类，则您可以通过泛型类型的接口优化需要额外绕行的某些方面。

总之，可能会有性能优势，但我会首先推荐通用解决方案，然后在需要时进行优化。如果您希望实例化具有许多不同类型的泛型，则尤其如此。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-22T19:39:01.500

我针对另一个问题对 ArrayList 与 Generic Lists 进行了一些简单的基准测试：[Generics vs. Array Lists](https://stackoverflow.com/questions/94884/generics-vs-array-lists#95753)，你的里程会有所不同，但 Generic List 比 ArrayList 快 4.7 倍。

*所以是的，如果*您要进行大量操作，装箱/拆箱至关重要。如果您正在做简单的 CRUD 事情，我不会担心。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-22T19:44:23.017

泛型是参数化代码和避免重复的方法之一。查看您的程序描述和您编写一个单独的类来处理每个数据对象的想法，我会倾向于泛型。让一个类来处理许多数据对象，而不是许多类做同样的事情，可以提高你的性能。当然，以更改代码的能力衡量的性能通常比计算机性能更重要。:-)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-22T20:17:04.700

根据微软的说法，泛型比铸造（装箱/拆箱原语）更快，**这是真的**。他们还声称泛型提供了比引用类型之间的强制转换更好的性能，**这似乎是不真实的**（没有人能完全证明这一点）。

Tony Northrup - MCTS 70-536: Application Development Foundation 的合著者 - 在同一本书中陈述如下：

> 我无法重现泛型的性能优势；然而，根据微软的说法，泛型比使用强制转换更快。在实践中，铸造证明比使用泛型快几倍。但是，您可能不会注意到应用程序的性能差异。（我对超过 100,000 次迭代的测试只用了几秒钟。）所以你仍然应该使用泛型，因为它们是类型安全的。

与引用类型之间的转换相比，我无法通过泛型重现这种性能优势 - 所以我会说性能提升是“假设的”而不是“显着的”。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-22T19:40:15.257

如果您将通用列表（例如）与您使用的类型的特定列表进行比较，那么差异很小，JIT 编译器的结果几乎相同。

如果将泛型列表与对象列表进行比较，那么泛型列表有很大的好处——值类型没有装箱/拆箱，也没有引用类型的类型检查。

.net 库中的通用集合类也经过大量优化，您自己不太可能做得更好。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-01-23T20:38:41.720

泛型更快！

我还发现 Tony Northrup 在他的书中写了关于泛型和非泛型性能的错误内容。

我在我的博客上写过这个：http: [//andriybuday.blogspot.com/2010/01/generics-performance-vs-non-generics.html](http://andriybuday.blogspot.com/2010/01/generics-performance-vs-non-generics.html)

这是一篇很棒的文章，作者比较了泛型和非泛型的性能：

nayyeri.net/use-generics-to-improve-performance

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-22T19:44:10.630

如果您正在考虑调用某个接口上的方法来完成其工作的泛型类，那将比使用已知类型的特定类慢，因为调用接口方法比（非虚拟）函数调用慢。

当然，除非代码是性能关键过程的缓慢部分，否则您应该关注清晰。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-22T23:00:43.403

在泛型集合与拳击等人的情况下，对于像 ArrayList 这样的旧集合，泛型是性能上的胜利。但在绝大多数情况下，这并不是泛型最重要的好处。我认为有两件事会带来更大的好处：

1.  类型安全。
2.  自我记录又更具可读性。

泛型促进了类型安全，迫使集合更加同质。想象一下当您期望一个 int 时偶然发现一个字符串。哎哟。

通用集合也更加自我记录。考虑以下两个集合：

```
ArrayList listOfNames = new ArrayList();
List<NameType> listOfNames = new List<NameType>(); 
```

阅读第一行，您可能会认为 listOfNames 是一个字符串列表。错误的！它实际上是存储 NameType 类型的对象。第二个示例不仅强制类型必须是 NameType（或后代），而且代码更具可读性。我马上就知道我需要去查找 TypeName 并通过查看代码来学习如何使用它。

我在 StackOverflow 上看到了很多这样的“x 是否比 y 表现更好”的问题。这里的问题非常公平，事实证明，无论您以何种方式剥猫皮，仿制药都是一种胜利。但归根结底，重点是为用户提供有用的东西。当然，您的应用程序需要能够执行，但它也需要不崩溃，并且您需要能够快速响应错误和功能请求。我认为您可以看到最后两点如何与泛型集合的类型安全和代码可读性相关联。如果是相反的情况，如果 ArrayList 的性能优于 List<>，我可能仍会采用 List<> 实现，除非性能差异很大。

就性能而言（一般而言），我敢打赌，在您的职业生涯中，您会发现这些领域的大部分性能瓶颈：

1.  数据库或数据库查询设计不佳（包括索引等），
2.  糟糕的内存管理（忘记调用 dispose、深堆栈、持有对象太久等），
3.  线程管理不当（线程太多，桌面应用程序的后台线程没有调用 IO 等），
4.  糟糕的 IO 设计。

这些都不是用单线解决方案解决的。作为程序员、工程师和极客，我们想知道所有很酷的性能小技巧。但重要的是我们要密切关注球。我相信专注于我上面提到的四个领域的良好设计和编程实践将进一步导致远远超过担心小的性能提升。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-23T22:54:18.153

也可以在 MSDN 上查看 Rico Mariani 的博客：

[http://blogs.msdn.com/ricom/archive/2005/08/26/456879.aspx](http://blogs.msdn.com/ricom/archive/2005/08/26/456879.aspx)

> Q1：哪个更快？
> 
> 泛型版本要快得多，见下文。

文章有点旧，但提供了详细信息。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-27T00:54:46.423

由于底层实现的变化，您不仅可以取消装箱，而且泛型实现比具有引用类型的非泛型实现要快一些。

原件的设计考虑了特定的扩展模型。这个模型从未真正使用过（无论如何都是一个坏主意），但设计决定迫使一些方法是虚拟的，因此是不可内联的（基于这方面当前和过去的 JIT 优化）。

这个决定在较新的类中得到纠正，但不能在旧类中改变，除非它是潜在的二进制破坏性变化。

此外，由于 ArrayList 的 Enumerator 需要堆分配，因此通过 List<>（而不是 IList<>）上的 foreach 迭代更快。诚然，这确实导致了一个[晦涩的错误](http://www.eggheadcafe.com/software/aspnet/31702392/c-compiler-challenge--s.aspx)

# xna - 除了 XBox360 之外，还有与 XNA 框架等效的控制台吗？

> ID：116992
> 
> 赞同：8
> 
> 时间：2008-09-22T19:33:23.650
> 
> 标签：xna, video-game-consoles

它必须是免费的。毕竟是爱好，不是生意！创建营利性软件不是问题，但任何需要硬件模块的东西都已经过时了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T19:35:55.783

不，我不这么认为。我知道的唯一其他用于控制台的 .NET 环境需要花钱，称为 unity3d：[http ://unity3d.com/](http://unity3d.com/)

我认为它支持 iPhone 和 Wii，并使用 Mono 作为运行时环境。200块钱，你在:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T19:41:50.883

不，除 Xbox 360 之外的所有主要游戏机都没有开放的开发环境。您可以获得各种自制套件，但这些套件不受游戏机制造商（任天堂、索尼和微软）的认可，因此您最多只能免费赠送您制作的 ROM。如果您试图出售任何东西，您将被起诉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T19:46:20.220

正如亚当所说，自制几乎是做你想做的事的唯一方法。很多时候，使用自制套件还涉及以某种方式修改控制台。

有一个名为[GP2X](http://en.wikipedia.org/wiki/GP2X)的基于 Linux 的便携式游戏设备可能会让您感兴趣，但我认为开源游戏开发（或至少使用开源工具进行游戏开发）更像是 PC 的事情。

如果您是认可大学的学生，您可以通过[Dreamspark](https://downloads.channel8.msdn.com/Default.aspx)网站获得 XNA Creator's Club 的 12 个月免费试用订阅。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T19:43:26.513

免费和官方？不，XNA 并不是免费的，因为您必须支付 99 美元才能在 360 上使用它。

您几乎仅限于被黑客入侵的自制软件开发以及硬件修改。至少有一个控制台不需要硬件修改，但我不确定我们是否可以谈论它。

从历史上看，索尼在 PSX 上发布了一个名为[Yarouze](http://assembler.roarvgm.com/Yarouze/yarouze.html)的东西，它与 360 上的 XNA Creators Club 有类似的情况（付费套件，仅供业余爱好者使用），但它从未来到美国。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T19:45:21.093

不像 XNA 那样被广泛记录和支持，但这里有一些带有用于手持控制台的文档/wiki 的库。

*   GameBoy Advance：[火腿](http://www.aaronrogers.com/ham/)
*   Nintendo DS：[PAlib](http://www.palib.info/)、[devkitPro](http://www.devkitpro.org/)（DS 上几乎所有自制软件的基础）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T19:50:59.880

您可能仍然可以找到可用的“ [PS2 Linux](http://en.wikipedia.org/wiki/PS2_Linux) ”套件——但您在那里制作的游戏只能在其他 PS2 Linux 实例上运行——受众有限。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T19:44:43.903

这取决于您将什么归类为控制台。iPod Touch 和 iPhone 有 iPhone SDK，用它应该可以开发出相当不错的游戏，当你完成后，它们可以很容易地通过 App Store 分发，无论是免费还是以你将获得 70 的价格%。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-26T09:27:51.343

正如[bhinks 所](https://stackoverflow.com/questions/116992/is-there-an-equivalent-to-the-xna-framework-for-consoles-other-than-xbox360#117080)提到的，有 GP2X，但已经存在了一段时间，并且有一个[庞大](http://www.gp32x.com/)的自制游戏开发者社区。GP2X 现在已经停产，它还有 2 个继任者，同一家公司的[WIZ ，Game Park 和](http://en.wikipedia.org/wiki/GP2X_Wiz)[Pandora](http://en.wikipedia.org/wiki/Pandora_(console))，这是一个合适的发烧友设备。

美妙之处在于您可以在[SDL](http://en.wikipedia.org/wiki/Simple_DirectMedia_Layer)中制作游戏并为所有设备构建游戏，包括 PC

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-12T08:41:43.127

只需为 Unity3D 独立许可证支付 200 美元，您就可以为 PC、Mac、浏览器、iPhone 和 Wii 创建游戏。它可以说是比 XNA 更强大的引擎，因为它具有内置的碰撞检测、物理等功能********