# StackOverflow 问答 10828000-10828999

# c++ - 没有全局互斥锁的 pThread 互斥锁

> ID：10828001
> 
> 赞同：3
> 
> 时间：2012-05-31T05:40:04.433
> 
> 标签：c++, thread-safety, pthreads, mutex

我看到的所有使用 pThread 库进行互斥锁的教程都使用了全局互斥锁：

看：

[https://computing.llnl.gov/tutorials/pthreads/#Mutexes](https://computing.llnl.gov/tutorials/pthreads/#Mutexes)

[http://www.drdobbs.com/cpp/184401518?pgno=3](http://www.drdobbs.com/cpp/184401518?pgno=3)（对于 boost::thread 但相同的上下文）

我想做的是在主文件的全局超出需要锁定变量的函数的范围时使用互斥锁。这是一个例子：

主文件

```
int main() {
    some initilisation code.
    tree * tree1;
    *Start thread to visualise tree* (see code below)

    Mutex Lock:
         delete tree1;
         tree1 = newTree();
    Mutex Unlock 
```

可视化器.cpp

```
visualise(Tree *) {
    Forever:
    Mutex Lock:
         Check for tree change.
         Update tree image.
         Display tree image.
    Mutex Unlock 
```

我想知道这是否可能：

1.  没有全局范围互斥锁。
2.  如果可能，不将互斥锁传递给可视化函数。

我知道这可能不合理，如果不是，我将如何使用 extern 将全局范围变量获取到 visualiser.cpp？

另外，如果我需要将互斥锁传递给函数，我将如何去做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T05:43:53.850

是的，只要互斥锁在任何线程使用它时保持在范围内，它就不必是全局的。你*必须*告诉第二个线程互斥锁在哪里，不幸的是没有办法解决这个问题。

传递它与传递任何其他变量没有什么不同。

因此，只需在第一个线程中定义并初始化它，然后在创建第二个线程时，将其地址作为线程参数传递。

然后第二个线程可以使用该地址来访问互斥锁。

* * *

就您希望函数既可用作线程又可用作普通函数的评论而言，由于复杂性，我会避开这一点。

你*可以*做的是将大部分工作放到一个普通函数中，然后让线程函数成为一个简单的包装器。你甚至可以传入一个互斥指针，如果有效则可以使用，如果为 NULL 则不使用。

有关详细信息，请参阅以下完整程序。首先，一些支持的东西，需要的标题和日志功能：

```
#include <pthread.h>
#include <stdio.h>
#include <time.h>

static void mylog (int indent, char *s) {
    int i;
    time_t now = time (NULL);
    struct tm *lt = localtime (&now);
    printf ("%02d:%02d:%02d ", lt->tm_hour, lt->tm_min, lt->tm_sec);
    putchar ('|');
    for (i = 0; i < indent; i++) printf ("%-20s|", "");
    printf ("%-20s|", s);
    for (i = indent + 1; i < 3; i++) printf ("%-20s|", "");
    putchar ('\n');
} 
```

接下来，将完成工作的函数。这是以这样一种方式构建的，它可以从任何线程调用，如果你希望它使用一个互斥指针，可以传递一个互斥指针：

```
static void *myfunction (void *ptr) {
    pthread_mutex_t *pMtx = ptr;

    mylog (2, "starting");

    if (pMtx != NULL) {
        mylog (2, "locking mutex");
        pthread_mutex_lock (pMtx);
        mylog (2, "locked mutex");
    }

    mylog (2, "sleeping");
    sleep (5);
    mylog (2, "finished sleeping");

    if (pMtx != NULL) {
        mylog (2, "unlocking mutex");
        pthread_mutex_unlock (pMtx);
    }

    mylog (2, "stopping");
} 
```

然后是一个实际的线程函数，它实际上是上面工作函数的薄包装。请注意，它通过特定于线程的参数接收互斥锁并将其传递给工作函数：

```
static void *mythread (void *ptr) {
    mylog (1, "starting");

    mylog (1, "call fn with mutex");
    myfunction (ptr);
    mylog (1, "and back");

    mylog (1, "stopping");
} 
```

最后，主要功能。这首先调用没有互斥锁的工作函数，然后创建一个互斥锁用于与其他线程共享：

```
int main (void) {
    pthread_mutex_t mtx;
    pthread_t tid1;
    char buff[100];

    printf ("         |%-20s|%-20s|%-20s|\n", "main", "thread", "workfn");
    printf ("         |%-20s|%-20s|%-20s|\n", "====", "======", "======");

    mylog (0, "starting");

    mylog (0, "call fn, no mutex");
    myfunction (NULL);
    mylog (0, "and back");

    mylog (0, "initing mutex");
    pthread_mutex_init (&mtx, NULL);

    mylog (0, "locking mutex");
    pthread_mutex_lock (&mtx);
    mylog (0, "locked mutex");

    mylog (0, "starting thead");
    pthread_create (&tid1, NULL, mythread, &mtx);

    mylog (0, "sleeping");
    sleep (5);
    mylog (0, "sleep done");

    mylog (0, "unlocking mutex");
    pthread_mutex_unlock (&mtx);

    mylog (0, "joining thread");
    pthread_join (tid1, NULL);
    mylog (0, "joined thread");

    mylog (0, "exiting");
    return 0;
} 
```

您可以在输出中看到代码如何对自身进行排序：

```
 |main                |thread              |workfn              |
         |====                |======              |======              |
15:07:10 |starting            |                    |                    |
15:07:10 |call fn, no mutex   |                    |                    |
15:07:10 |                    |                    |starting            |
15:07:10 |                    |                    |sleeping            |
15:07:15 |                    |                    |finished sleeping   |
15:07:15 |                    |                    |stopping            |
15:07:15 |and back            |                    |                    |
15:07:15 |initing mutex       |                    |                    |
15:07:15 |locking mutex       |                    |                    |
15:07:15 |locked mutex        |                    |                    |
15:07:15 |starting thead      |                    |                    |
15:07:15 |sleeping            |                    |                    |
15:07:15 |                    |starting            |                    |
15:07:15 |                    |call fn with mutex  |                    |
15:07:15 |                    |                    |starting            |
15:07:15 |                    |                    |locking mutex       |
15:07:20 |sleep done          |                    |                    |
15:07:20 |unlocking mutex     |                    |                    |
15:07:20 |joining thread      |                    |                    |
15:07:20 |                    |                    |locked mutex        |
15:07:20 |                    |                    |sleeping            |
15:07:25 |                    |                    |finished sleeping   |
15:07:25 |                    |                    |unlocking mutex     |
15:07:25 |                    |                    |stopping            |
15:07:25 |                    |and back            |                    |
15:07:25 |                    |stopping            |                    |
15:07:25 |joined thread       |                    |                    |
15:07:25 |exiting             |                    |                    | 
```

与使用互斥锁的调用相比，请特别注意没有互斥锁的直接调用是如何起作用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:47:09.973

一旦您将代码从伪代码转换为具体代码，答案就会变得显而易见。

例如：

您的可视化线程必须“检查树变化”。

你怎么做到这一点？你必须有一个可以告诉你这些信息的数据结构。这个 ds 将由主线程更新。

因此，您将互斥锁保留在该数据结构中。它可以是全局的或堆上的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:55:46.780

实际上，每个线程传入并使用不同的互斥体实例化不是线程安全的，因为这不会同步多个线程访问所有相关线程共有的对象。

通常，每个对象/数据结构实例应该有一个互斥锁，而不是每个线程一个。话虽如此，需要同步的对象具有互斥体属性更有意义，并在需要同步的方法中对其进行内部管理。

关于全局互斥锁的提及，并考虑到我之前的段落，互斥锁对于正在同步的对象和所涉及的线程的上下文应该有效地是全局的。也就是说，相同的互斥锁应该是通用的，并且对所有这些实体都可用。这可以在不使其成为全局变量的情况下实现，尽管如前所述。

# javascript - Javascript 局部变量未更新

> ID：10828002
> 
> 赞同：0
> 
> 时间：2012-05-31T05:40:10.283
> 
> 标签：javascript, geolocation, local-variables

我已经编写了这个函数来检测和更新 postLat 和 postLon 变量。

```
function searchAddSubmit(){
    var shopId = 1; //random number to test the function
    var postLon, postLat;
    var shopTime = $("#selected-search-result-minutes").val();
    navigator.geolocation.getCurrentPosition(function(position){
        postLat=position.coords.latitude;
        postLon=position.coords.longitude;
        console.log(postLat);
        console.log(postLon);
        console.log('reun');
    },function(error){});
    console.log(postLat+" 1231");
    console.log(postLon+" 1231");
    $.ajax({
        type: "POST",
        url: "search-add-process.php",
        cache: false,
        dataType: "json",
        data:{
            id: shopId,
            time: shopTime, //this value is taken from a form input
            lat: postLat,
            lon: postLon
        },
        success: function (data) {
            if(data.error === true) {
                alert(data.msg);
            } else {
                alert(data.msg);
                //remove output when successful
            }
        }
    });
} 
```

我使用 Chrome 的 Javascript 控制台工具检查变量（用 打印`console.log()`），结果如下：

```
undefined 1231
undefined 1235
1.2957797
103.8501069
ruen 
```

说到这一点，我有这些问题：

1.  为什么是变量`postLon`而不`postLat`更新？事实上，未定义的变量被传递到`search-add-process.php`ajax 块中，而不是实际值。
2.  为什么`navigator.geolocation.getCurrentPosition()`函数在行后运行`console.log(postLat+" 1231")`？如果我错了，请纠正我，我一直认为 Javascript 会逐行执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:46:51.457

您首先告诉 Geolocation API 尝试查找用户的当前位置，然后在您完成其余工作时放手搜索。这称为**异步执行**。换句话说，您让 Geolocation API 花时间搜索并找到用户的位置，而您完成其余工作（其余代码正在执行）。然后，当 API 找到该位置时，它会执行您传递给它的函数。

将ajax的代码放入**成功回调**中，一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:47:26.167

将整个`$.ajax({...});`调用放在`getCurrentPosition`回调函数中；例如，将其直接放在行之前或之后`console.log('reun');`

# javascript - 使用 Play Framework 和 JW Player 嵌入视频

> ID：10828007
> 
> 赞同：4
> 
> 时间：2012-05-31T05:40:49.487
> 
> 标签：javascript, html, video, playframework, jwplayer

我正在尝试使用 Play Framework 和 JW Player 嵌入视频。我可以硬编码并使其正常工作，但我想使用模型的类来确定将嵌入的视频文件（通过路径）。

这是我一直在玩的代码，但不起作用：

```
<script src="@{'/public/jwplayer/jwplayer.js'}"></script> 
```

* * *

```
<script>
    $(document).ready(function(){
    var content = ${_post.content};
    setVideo(content)
    });
</script> 
```

* * *

```
<script type='text/javascript'>

    function setVideo( content )
    {
        jwplayer('mediaspace').setup({
            'flashplayer': "@{'/public/jwplayer/player.swf'}",
            'file': content,
            'controlbar': 'bottom',
            'width': '640',
            'height': '480'
        });
    }
</script> 
```

老实说，此时这可能更像是伪代码......但希望很清楚我在这里*想要*做什么：

1.  检索帖子的内容（如果内容将是视频的路径）
2.  将其放入函数中。
3.  这将设置“文件”：内容。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:31:31.390

解决这个问题的一些想法：

1.  路径在呈现的 HTML 中可见吗？
2.  它在生成的javascript中可见吗？
3.  是否需要正确转义？我想你`var content`应该是一个字符串？
4.  如何`_post.content`生成？为什么是下划线？您是在播放模板标签中执行此操作吗？
5.  该文件是否可以在脚本之外通过所述路径访问？

希望这可以帮助。

# android - Android 库项目作为 jar 文件进行分发，如谷歌分析

> ID：10828014
> 
> 赞同：10
> 
> 时间：2012-05-31T05:41:51.097
> 
> 标签：android, jar

我已经看到[了这个](https://stackoverflow.com/questions/5014128/create-an-android-jar-library-for-distribution)问题，并且对创建一个我可以分发并可以在任何 android 应用程序中使用的 jar 文件有一些疑问。

我的要求是什么

1.  正如我所说，我想构建和分发一个封闭源代码库。我不希望源代码可见。
2.  在那个库中，我不想使用任何资产、布局、资源等。但我想使用一些 android 特定代码，例如[获取 android 设备 ID。](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)

上面链接的 SO 问题中最流行的答案是**创建一个常规的 java 项目并在其中导入 android.jar。**我试图这样做，但我不知道如何将 android.jar 添加到任何 java 项目中。我也想澄清一下。

此外，我想知道是否有任何其他方法使用 android sdk 本身（不使用 java 项目）创建一个封闭源库 jar 文件。

我认为我想要的是可能的，因为[android 原生应用程序的谷歌分析](https://developers.google.com/analytics/devguides/collection/android/)似乎已经做到了。我确信在他们分发的 .jar 文件中，他们使用的是 android 特定代码，因为他们似乎没有其他方法可以让设备信息显示在分析查看器中。

# 编辑：有人可以澄清一下吗？

我想我已经取得了一些进展。这就是我所做的

*   创建了一个常规的android项目（不是库项目，“是库”复选标记未选中）

*   在项目中，我已经编写了我的逻辑。它使用一些 android 特定的类，如`SharedPreference`, `UUID`, `PackageManager`. 但与资产无关，布局也没有类扩展 `Activity`。只是一个扩展的java类`java.lang.object`

*   使用**Project->rightclick->export->Java->JAR file**导出项目。在下一个屏幕中，我取消选中 附近的复选框 `AndroidManifest.xml`。设置要导出的目标目录，然后在保持默认设置的情况下单击三次。然后我点击完成，在我的桌面上得到了一个可爱的**libMyLibraryName.jar 。**

然后我创建了另一个android项目，使用**项目->右键单击->属性->java构建路径->库->添加外部jar将**`libMyLibraryName.jar`其添加到新项目中。

 **我试图在我的新项目中使用我在图书馆中的课程

```
MyLibraryClass objClass = new MyLibraryClass(this); 
```

我能够成功编译并运行。我什至将库发送给我的一位同事，他能够在他的机器上使用该库（只需确保我的工作区中的库项目不会影响使用它的项目）。

现在我有2个问题。

**1）我的第一个问题是，下面给出的文档中“真正的库”一词是什么意思？**是否有任何可以导出到 JAR 文件的非 android java 项目？

> 但是，**库项目**与标准 Android 应用程序项目的不同之处在于，您不能将其直接编译为自己的 .apk 并在 Android 设备上运行。**类似地，您不能将库项目导出为独立的 JAR 文件**，就像对**真正的库**所做的那样。相反，您必须通过在依赖应用程序中引用库并构建该应用程序来间接编译库。

好吧，这部分取自标题为“图书馆项目”的[文档。](http://developer.android.com/guide/developing/projects/index.html)

**2) 我的第二个问题是，我创建 JAR 文件的方式有什么问题吗？**任何可能的陷阱可能会在以后咬我？在我的重要项目中使用它之前，我想确保我没有做一些非常错误的事情。

我可能会补充一点，我没有尝试创建 JAVA 项目并导入`android.jar`. 如果我目前所做的事情是错误的，我准备尝试那个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T06:02:12.573

将`android.jar`位于您安装 Android SDK 的位置。在该`platforms`目录下应该有一些名为`android-<version>`. 会`android.jar`在那里。选择特定于您所针对的最低 android 版本的版本。

一旦你有了它，把它复制到你的项目中。如果您使用的是 eclipse，我认为您可以直接将 jar 剪切并粘贴到您的项目中，右键单击并将其添加到构建路径。如果您不使用 eclipse 或任何其他 IDE，您只需要在构建 jar 文件时确保 android.jar 在类路径中。

之后，您可以将新构建的 android 库放入任何 Android 项目中。

回答您的其他问题：

1.  他们所说的真正的库是 jar 文件，而不是 Android 库项目。

2.  我认为您创建 jar 文件的方式没有任何问题。`android.jar`如上所述，我会使用它，但你的方式也应该有效。为了验证这一点，我将检查 jar 内容并确保您拥有的所有`.class`文件。**

# r - lattice auto.key - 如何调整线和点？

> ID：10828016
> 
> 赞同：3
> 
> 时间：2012-05-31T05:41:58.683
> 
> 标签：r, graphics, statistics, lattice

当我使用时`barchart()`，我得到这样的东西（我知道图像不是条形图，但我`auto.key`产生了相同的图例）：

![条形图](../Images/0bceced798e6b48ff9fe56a09bec529f.png)

我想填充这些点并使它们变大或将它们设置为具有相应颜色的矩形。

当我使用时`densityplot()`，我得到这样的东西：

![密度图](../Images/165abdb8da45272a6bf306597d8461aa.png)

如果可能的话，我想让线条“更粗”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T07:16:09.997

见`?xyplot`。一些细节：

对于您关于更改颜色的第一个问题，请使用`col`参数，例如

```
barplot(table(mtcars$am, mtcars$gear), col = c("green", "yellow")) 
```

![在此处输入图像描述](../Images/369ea7e7f7012ac35b36873c33607212.png)

但是，如果您想处理带有修改符号的散点图而不是条形图（在此处混淆），那么`auto.key`不幸的是不是选项，但是这样的事情可以毫无问题地工作：

```
xyplot(mtcars$hp ~ mtcars$wt, groups = mtcars$gear, 
        key = list(text = list(as.character(unique(mtcars$gear))), 
                   points = list(pch = 10:12, col = 12:14)), pch = 10:12, col = 12:14) 
```

![在此处输入图像描述](../Images/907268a4a3320975e4a7924ab48cbd4a.png)

对于您的第二个问题，请使用`lwd`：

```
densityplot(mtcars$hp, lwd = 3) 
```

![在此处输入图像描述](../Images/a62d297056d82c1f8f77fda0c46a25a7.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T00:37:57.497

我只是花了很多时间在本质上同样的问题上。出于某种原因，@daroczig 样式方法不适用于更改密度图中的线类型（包括键）。

无论如何，我认为“正确”的方法是像这样`trellis.par.set`使用`auto.key`：

```
# Maybe we'll want this later
old.pars <- trellis.par.get()

trellis.par.set(superpose.symbol=list(pch = 10:12, col = 12:14))
xyplot(hp ~ wt, data=mtcars, groups = gear, auto.key=TRUE)

# Optionally put things back how they were
trellis.par.set(old.pars) 
```

实际上，这种方式的输入更少（特别是如果你不计算我保存和恢复原始格子 pars 的情况），并且冗余更少（允许 DRY 编码）。此外，对于我的生活，我无法弄清楚如何使用 轻松制作多列`key`，但您可以将其添加`columns`为列表的元素之一`auto.key`。

另外，请确保您更改了正确的元素！例如，如果你改变了`plot.symbol`（这听起来确实是正确的事情），它不会做任何事情。一般来说，对于基于 xyplot 的东西，我相信`superpose.*`是实际修改符号、线条等的正确元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T09:29:00.313

daroczig 的回答是我遇到这种情况时通常会做的事情。但是，总的来说，我更喜欢使用`lattice`默认颜色而不是指定我自己的颜色。

你可以这样做：

```
lattice.theme <- trellis.par.get()
col <- lattice.theme$superpose.symbol$col
pl <- xyplot(X ~ Y, groups=Z, data=dframe, pch=1:nlevels(dframe$Z),
             type='o', key=list(text=list(levels(dframe$Z)), space='top',
                                points=list(pch=1:nlevels(dframe$Z), col=col),
                                lines=list(col=col),
                                columns=nlevels(dframe$Z))) 
```

# html - 如何开发线下支持网站？

> ID：10828022
> 
> 赞同：-2
> 
> 时间：2012-05-31T05:42:50.103
> 
> 标签：html

我想为网站提供离线支持，这样用户即使在没有互联网的情况下也可以访问网站，就像离线 Gmail 一样。

请推荐技术？

回答：HTML5 就是这个问题的答案。我在下面添加了详细的答案。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:45:58.430

看看 HTML5 应用程序缓存：[http](http://www.html5rocks.com/en/tutorials/appcache/beginner/) ://www.html5rocks.com/en/tutorials/appcache/beginner/ 。请注意，这还不是一种跨浏览器技术，并且不适用于旧浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:54:38.477

HTML5 就是这个问题的答案。在 HTML5 中使用 LocalStorage 和 Tag。

属性脱机脚本 当文档脱机时触发，之后您可以从本地存储服务器内容。

更多关于 web_storage [http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

**编辑：**

[https ://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)

[http://www.html5rocks.com/en/tutorials/service-worker/introduction/](http://www.html5rocks.com/en/tutorials/service-worker/introduction/)

# javascript - django视图是否有可能返回javascript函数

> ID：10828023
> 
> 赞同：0
> 
> 时间：2012-05-31T05:43:07.390
> 
> 标签：javascript, django, view, return

我想在我的视图中返回一个 js 函数。逻辑是这样的：如果用户在没有选择文章的情况下单击“book”按钮，book 函数将在数据库中查找并发现在 db 中没有选择产品，那么页面不应该再往前走，但它应该给出一个屏幕上的 js 消息说“对不起，首先选择一个产品”。

我的想法是我想在数据库中查找后在我的视图函数中给出这个消息。我可以将javascript函数返回到页面吗？

伪：

```
function book():
   products = Produkt.objects.all()
    if products == None:
        return HttpResponse("<script type='text/javascript'> some function? </script>")
    return render_to_response('book.html', {'products':products}, context_instance=RequestContext(request)) 
```

这是正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:03:13.897

Django 可以返回任何内容，但客户端的浏览器将无法以这种方式使用它。您应该拦截单击链接，对服务器进行 AJAX 调用，检索一些数据（HTML 或带有书籍列表的 JSON 或其他内容）并在 javascript 中处理它（可能使用 jQuery 或其他一些 js 框架）。

# php - 将网站转换为多语言？

> ID：10828024
> 
> 赞同：0
> 
> 时间：2012-05-31T05:43:10.610
> 
> 标签：php, mysql

我在语言转换方面遇到问题。我的网站语言是英语，但我的客户需要土耳其语的网站。这是交易网站。后端管理员以英语发布交易，但在前端客户需要以土耳其语显示。我正在使用 PHP & Mysql 来开发这个项目。我如何将页面转换为土耳其语任何人帮助我..

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:47:52.647

1.  对于您希望支持的每种语言，您都需要一组并行的页面。

2.  您可以简单地在主页上提供指向不同“语言根”的链接。

3.  或者您可以使用这样的 PHP 脚本，根据浏览器的语言自动重定向：

[http://www.willmaster.com/library/automation/alternate-language-redirect.php](http://www.willmaster.com/library/automation/alternate-language-redirect.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:09:47.717

另外，不要忘记设置字符集，以便它可以接受英语/土耳其语：

```
<!DOCTYPE html5>
...
<meta charset='utf8'> 
```

你的 mysql 表也应该为 utf8 准备好：

```
CREATE TABLE foo (
   id INT PRIMARY KEY AUTO_INCREMENT;   # example
   ...
) CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

或更新它们：

```
ALTER TABLE foo CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

在你的 php 中（在顶部）：

```
header("Content-type:text/html;charset=UTF-8\n"); 
```

那么你就可以在你的数据库中添加（翻译的）utf8 了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:47:44.720

如果您不打算以允许多种语言的方式构建代码，则必须使用谷歌翻译之类的东西。

您可以在页面上创建一个链接，其中包含指向谷歌翻译的链接以及您的实际页面网址。

# xml - 这可以在 XSLT 中完成吗？

> ID：10828029
> 
> 赞同：0
> 
> 时间：2012-05-31T05:43:58.727
> 
> 标签：xml, xslt

我是 XSLT 世界的新手，所以请多多包涵。我有一个具有以下结构的 Web 服务的 XML 输出：

```
<NotificationListResponse>
    <MessageReceiver ID=15>
        <Services>
          <Service ID=40>
              <...Other Tags Per Service ...>
          </Service>
          <Service ID=38>
              <...Other Tags Per Service ...>
          </Service>
        </Services>
    </MessageReceiver>
    <MessageReceiver ID=18>
        <Services>
          <Service ID=40>
              <...Other Tags Per Service ...>
          </Service>
          <Service ID=38>
              <...Other Tags Per Service ...>
          </Service>
        </Services>
    </MessageReceiver>
</NotificationListResponse> 
```

我想把它变成这样的东西：

```
<NotificationListResponse>
    <Services>
        <Service ID=40>
           <Receivers>
             <MessageReceiver ID=15>
               <...Other Tags Per Service ...>
             </MessageReceiver>
             <MessageReceiver ID=18>
               <...Other Tags Per Service ...>
             </MessageReceiver>
           </Receivers> 
          </Service>
          <Service ID=38>
           <Receivers>
             <MessageReceiver ID=15>
               <...Other Tags Per Service ...>
             </MessageReceiver>
             <MessageReceiver ID=18>
               <...Other Tags Per Service ...>
             </MessageReceiver>
           </Receivers> 
          </Service>
    </Services>
</NotificationListResponse> 
```

我希望这足够清楚。我想做的是按服务进行分割，在Web服务响应中，主要分割是由接收方。

这甚至可以在 XSLT 中完成，而无需将 XML 反序列化为对象并在代码中进行转换吗？如果相关的话，我们的主要编程语言是 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:42:04.590

像这样反转层次结构是分组问题的一个示例：因为任务是找到具有相同 ID 的所有 MessageReceiver 元素，并根据该值对输出进行分组。

XSLT 2.0 中的分组比 XSLT 1.0 中的分组要容易得多，尽管在这两种情况下您的标题问题（可以完成吗？）的答案都是肯定的。但是，解决方案非常不同，因此了解您使用的版本会有所帮助。

从逻辑上讲，解决方案的伪代码在两种情况下都是相同的：

```
<for each group of Service elements grouped by ID>
  <Service ID=ID>
    <for each Service in the group>
      <process the ancestor MessageReceiver/>
    </
  </
</ 
```

在 XSLT 2.0 中查找`<xsl:for-each-group>`元素。在 XSLT 1.0 中，查找有关“Muenchian 分组”的教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:40:50.477

像这样的东西可能有点罗嗦，可以改进，但可以通过 c# 中的 msxsl 工作。正如其他人所说，只是看待分组的另一种方式：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

        <xsl:template match="/NotificationListResponse">
            <NotificationListResponse>
            <Services>
                <xsl:for-each select=".//Service">
                    <xsl:variable name="id" select="@ID"/>
                    <xsl:if test="count(preceding::Service[$id]) &lt; 2">
                        <Service ID="{$id}">
                            <Receivers>
                                <xsl:for-each select="//Service[@ID=$id]">
                                    <MessageReciever>
                                        <xsl:attribute name="ID">
                                            <xsl:value-of select="ancestor::MessageReceiver/@ID"/>
                                        </xsl:attribute>
                                        <xsl:copy-of select="*"/>
                                    </MessageReciever>
                                </xsl:for-each>
                            </Receivers>
                        </Service>
                    </xsl:if>
                </xsl:for-each>
            </Services>
            </NotificationListResponse>
        </xsl:template>
    </xsl:stylesheet> 
```

# javascript - 在javascript中绘制左下区域阴影的正态分布曲线

> ID：10828031
> 
> 赞同：0
> 
> 时间：2012-05-31T05:44:20.553
> 
> 标签：javascript, normal-distribution

我是 javascript 新手，想知道是否有人可以帮助我在 javascript 中绘制一条正态分布曲线，左下区域为阴影（例如：17% 以下的区域为阴影）。先感谢您！

这是我希望我的图表看起来如何的图片的链接： http: [//ars.els-cdn.com/content/image/1-s2.0-S0005791612000110-gr1.jpg](http://ars.els-cdn.com/content/image/1-s2.0-S0005791612000110-gr1.jpg) 或 [http://sdrv .ms/LLEFQg](http://sdrv.ms/LLEFQg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:02:07.013

你可能想看看[jStat](http://www.jstat.org/demonstration)插件，它支持着色并且有一个非常强大的统计引擎。

# api - 什么是 Trello API 中的“addToBoard”通知？

> ID：10828032
> 
> 赞同：0
> 
> 时间：2012-05-31T05:44:21.410
> 
> 标签：api, trello

[Trello API](https://trello.com/docs/api/member/index.html#get-1-members-member-id-or-username-notifications-filter)指示有一种称为“addToBoard”的通知类型。有谁知道如何触发此通知？

我尝试将成员添加到现有的私人和公共董事会，但它总是会触发“invitedToBoard”通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:16:46.073

当董事会属于他所属的组织并触发此操作类型时，您可以直接将某人添加到董事会（无需邀请过程）。

# tridion - 联系 Profilesync.aspx 抛出“尝试在本机端加载 JVM 失败”

> ID：10828037
> 
> 赞同：2
> 
> 时间：2012-05-31T05:45:14.720
> 
> 标签：tridion, tridion-2011

**简要总结**：我们使用没有任何修补程序的 Tridion 2011 SP1，以及作为同步服务器 (Profilesync.aspx) 的 .net Web 应用程序来同步订阅数据库和受众管理器数据库的联系。我们也使用 Java 6。

**问题**：完成安装后，当我们点击“Profilesync.aspx”页面时，它给出了错误“尝试在本机端加载 JVM 失败”。

**错误**：

```
Attempt to load JVM failed on native side

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: Codemesh.JuggerNET.JuggerNETFrameworkException: Attempt to load JVM failed on native side

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[JuggerNETFrameworkException: Attempt to load JVM failed on native side]
Codemesh.JuggerNET.JvmLoader.Load(Boolean bAcceptPreloaded) +287
Codemesh.JuggerNET.JvmLoader.Load() +41
Codemesh.JuggerNET.JavaClass.init() +111
Codemesh.JuggerNET.JavaClass.get_JObject() +49
Codemesh.JuggerNET.JavaMethod.init() +1082
Codemesh.JuggerNET.JavaMethod.get_MethodPtr() +54
Codemesh.JuggerNET.JavaMethod.get_Handle() +50
Codemesh.JuggerNET.JavaMethod.CallObject(JavaProxy jpo, JavaMethodArguments args) +390
Com.Tridion.Marketingsolution.Utilities.TcmUri..ctor(Int32 publicationId, Int32 itemId, Int32 itemType) +160
Tridion.OutboundEmail.ContentDelivery.Utilities.Settings.set_ConfigFileName(String value) +51
Tridion.OutboundEmail.ContentDelivery.OutboundEmailPage.Page_Init(Object sender, EventArgs e) +153
System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
 System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
System.Web.UI.Control.OnInit(EventArgs e) +91
System.Web.UI.Page.OnInit(EventArgs e) +12
System.Web.UI.Control.InitRecursive(Control namingContainer) +140
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +480 
```

有人可以帮我找出问题所在。

提前致谢！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T06:29:25.960

通常这意味着 32 位和 64 位文件 (dll) 与已安装的 Java 版本不匹配。如果您安装了 64 位版本的 Java，请务必使用 64 位版本的 SDL Tridion (OutboundEmail) Content Delivery dll。Java 的 32 位版本也是如此；使用 SDL Tridion Content Delivery dll 的 32 位版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:56:56.537

如果 Albert 的帖子不适合您（尽管他说的*非常*正确），请查看我在这里遇到的相同问题[HTTP Deployer throws "Attempt to load JVM failed on native side"](https://stackoverflow.com/questions/10238273/http-deployer-throws-attempt-to-load-jvm-failed-on-native-side)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T19:32:54.913

只是想留下一些笔记以帮助将来的人。如果您确认使用了正确的 .dll，但仍然遇到错误（尝试加载 JVM 在本机端失败）。

尝试卸载系统中的所有java运行时并重新安装干净（首先安装JRE 64位）

我已经看到这有助于解决我的一个客户的问题。

# android - Android 应用程序在模拟器 2.3.3 中没有崩溃，但在设备 4.0.3 中崩溃

> ID：10828038
> 
> 赞同：-1
> 
> 时间：2012-05-31T05:45:18.347
> 
> 标签：android, android-emulator, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

我有一个在 Android 2.3.3 设备上正常运行的应用程序。但在 Android 4.0.3 设备上无法正常工作。

错误是应用程序在启动时崩溃。单击一次后无法单击网格视图图标。重新启动一次后再次工作。

这些都是例子。这些是平台问题，只是编码错误。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:17:21.443

我也面临同样的问题。我在[这里](https://stackoverflow.com/questions/10782601/location-manager-not-working-in-android-4-0-2-emulator)找到了解决方案。尝试不要在您的代码中使用已弃用的方法/API（在您的情况下为 GRIDVIEW），因为 Android API 不支持最新版本中已弃用的方法/API。

# php - 条形/管道分隔字段

> ID：10828043
> 
> 赞同：1
> 
> 时间：2012-05-31T05:45:51.337
> 
> 标签：php, postgresql

任何人都知道如何在数组字段中插入条形/管道分隔的数组？

使用逗号它可以工作，但是当我将其更改为 bar 时，它会产生错误“格式错误的数组文字”

示例（作品）：

```
insert into table (arrayfield) values ('{"var1","var2","var3"}') 
```

示例（不起作用）：

```
insert into table (arrayfield) values ('{"var1"|"var2"|"var3"}') 
```

顺便说一句，我使用的是 postgres 8.2 和 PHP，由于各种原因，我不能使用逗号作为分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:43:08.187

如果您可以使用不带引号的值，因为您知道数据中没有管道，那么您可以使用：

```
insert into table (arrayfield) select string_to_array('var1|var2|var3','|'); 
```

如果您需要在管道分隔的字符串上引用您的值，那么它会变得复杂。如果是这种情况，那么我认为您应该使用`ARRAY['val1','val2','val3']`PHP 中的语法正确格式化和引用您的数组。

# wpf - 标签绑定不起作用

> ID：10828045
> 
> 赞同：0
> 
> 时间：2012-05-31T05:46:42.890
> 
> 标签：wpf

我的标签没有显示任何内容。我想要做的是我有一个用户控件 TemplateForPlan，我从该用户控件中获取选定的项目，然后我将进入下一个用户控件，并且该选定的模板名称必须存在于标签内容中。

抱歉描述不佳。我是新手，刚开始研究 WPF。

```
<UserControl x:Class="ChaosMonkeyUI.TemplateForPlan"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="344" d:DesignWidth="424" Name="TemplateForPlanUC"> 
```

这是另一个 UC 上显示所选模板的标签

```
 <Label Content="{Binding ElementName=TemplateForPlanUC, Path=selectedTemplate.TemplateName }" Grid.Row="1" Grid.Column="1" Height="28" HorizontalAlignment="Stretch" 
        Name="labelTemplateName" VerticalAlignment="Stretch" Margin="10,5,0,5" /> 
```

这是**TemplateForPlan**的 .cs 文件和

```
public partial class TemplateForPlan : UserControl
{
    IList<TemplateType> template;
    public int noOfElementSelected;
    TemplateHelper xmlParser ;
    NewChaosSteps parentNewChaosStepPageForNextButton;
    public TemplateType selectedTemplate = null;

    public TemplateForPlan( NewChaosSteps parentNewChaosStepPageForNextButton)
    {
        InitializeComponent();
        this.parentNewChaosStepPageForNextButton = parentNewChaosStepPageForNextButton;
        parentNewChaosStepPageForNextButton.EnableOrDisableNextButton("disable");
        xmlParser = new TemplateHelper();
        template = xmlParser.GetTemplates();
        listTemplate.ItemsSource = template;
    }

    private void listTemplate_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        selectedTemplate = template[listTemplate.SelectedIndex];
        parentNewChaosStepPageForNextButton.EnableOrDisableNextButton("enable");
    } 
```

并且 TemplateType 在其他项目中定义，其定义为：

```
public partial class TemplateType 
{

    private TemplateRuleType[] templateRuleField;

    private string templateNameField;

    private string templateDescriptionField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("TemplateRule")]
    public TemplateRuleType[] TemplateRule {
        get {
            return this.templateRuleField;
        }
        set {
            this.templateRuleField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string TemplateName {
        get {
            return this.templateNameField;
        }
        set {
            this.templateNameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string TemplateDescription {
        get {
            return this.templateDescriptionField;
        }
        set {
            this.templateDescriptionField = value;
        }
    }
} 
```

还请提供一些好的链接，以便我可以正确理解绑定。我对此感到非常困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:02:39.357

您不能绑定到字段。

`listTemplate`是一个项目控件，因此它将具有一个 SelectedItem 属性，您可以将其绑定到后面代码中的属性。

```
public TemplateType SelectedTemplate { get; set; } 
```

然后更改您的标签绑定：

```
<Label Content="{Binding ElementName=TemplateForPlanUC, Path=SelectedTemplate.TemplateName }"  /> 
```

（请注意路径中名称大写的变化。如果您在 TemplateForPlanUC 中发布 ItemsControl 的 XAML，那么我将在我的回答中包含一个适合您情况的示例）。

您还需要确保在控件上实现 INotifyPropertyChanged，并确保您的`SelectedTemplate`属性在其设置器中通知。我不会在这里详细说明，因为它在 StackOverflow 上已经被覆盖了十亿次。

# grails - 获取在控制器上定义的变量的值，而无需在操作中编写查询

> ID：10828051
> 
> 赞同：-1
> 
> 时间：2012-05-31T05:47:13.483
> 
> 标签：grails, grails-orm, grails-domain-class, grails-controller

我的控制器中有以下代码。

```
class WorkStationAssetController {
     def requestList = Request.list()

     def list = {
         [requestList :requestList]
     }        

     def save = {
         def requestInstance = new Request(params)            
         requestInstance.save(flush:true)  
         redirect(action:'list')            
     }
} 
```

在 requestList 变量中，我得到了具有新保存值的请求列表。

我的问题是如何在保存操作的渲染部分中不编写查询（比如 Request.list()）来获取新值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:54:14.607

如果您真的只需要获取请求列表，您可以在模板顶部添加：

```
<%@ page import="your.package.Request" %> 
```

并且您需要列表的地方只需调用：

```
${ Request.list() } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T04:51:51.040

在您的列表操作中，您使用了包含请求列表的全局变量，而在列表操作中，您只是将该值返回到 gsp 页面，这就是您变老以及创建新请求的原因。

# git - GUI 为 VCS 用户提供了哪些优势？

> ID：10828052
> 
> 赞同：0
> 
> 时间：2012-05-31T05:47:14.247
> 
> 标签：git, user-interface, version-control

几周后，我将向一群科学家发表演讲，向他们介绍 VCS（或试图激励他们为已经了解的人使用 VCS）。我担心的一件事是，当人们习惯了 GUI 时，他们会用一堆命令行工具吓跑他们。因此，我试图思考 GUI 相对于命令行工具为 VCS 用户提供了哪些优势，但我真的想不出很多。

除了明显的“留在你的舒适区”之外，还有什么好处，比如使用鼠标而不必记住命令？

一般的答案很好，但也欢迎针对特定 VCS 或 GUI 的答案（我将使用 git 作为主要示例进行演讲）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:33:38.217

我沉迷于命令行，但我发现提交历史的 GUI 表示形式比`git log --graph`. GUI 允许用户直接从历史视图分析和操作存储库，这比复制/粘贴哈希、从 HEAD 倒数或查找正确的管道命令等更方便。GUI 还为用户提供了更好的配置设置界面。（我已经记不清有多少次因为没有转义引号或其他东西而搞砸了设置。）

你提到不必记住命令并留在舒适区，但我认为对于像 Git 这样复杂的工具来说，这些是相当重要的一点。有无数个 Git 命令，有无数个选项，其中一些但不是全部适用于多个命令（`--dry-run`，任何人？），还有一些但不是全部使用不同的格式（`-n 1`与`-1`？）。`git help`对于大多数用户来说，像在他们使用的每个其他程序中一样单击一个按钮比在您不记得是否应该使用`master..origin/master`or`master origin/master`或时浏览要直观和方便得多`origin master`。（作为一个极客，略过`git help`是我乐趣的一部分，但对于我工作中使用 GUI 的任何队友来说，情况并非如此。他们认识到 Git 简化了他们的工作流程，但他们不想花太多心思在工具本身上。他们只是想把事情做好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:21:21.167

好吧，“我”认为：

1) 命令行不提供任何“预防性控制”，2) 命令行不能引导用户，只能提出在特定情况下可以执行的有限命令集。好吧，不如 GUI 做的那么好。

两个极端的类比来解释：

你能想象通过一堆命令行驾驶飞机吗？从技术上讲，这应该是可能的，但是如果没有驾驶舱及其监控工具实时为您提供 - 并且不需要您要求 - 您需要驾驶的任何相关信息，很容易想象它会更加困难。像飞机驾驶舱这样的 GUI 可以为您提供对您正在做的事情的预防性控制。它们甚至可以为您提供您无法想象存在的信息，因为您以前从未听说过等效的命令行。

在城市或沙漠中开车时，您是否感觉更舒适？在第一种情况下，路标会给你一些关于你要去哪里的指示，而且由于道路就是道路，所以无论如何你只能选择有限的方式。同样，GUI 充当一组原子命令行的外观，将它们重新组合为单个和连贯的高级操作，在菜单中描述为路标。在第二种情况下，你几乎可以去任何地方——可能是在错误的方向——并且你必须自己追踪自己的方式，安排自己的检查点。这与命令行相同。

我认为这些想法也与 VCS 相关。

# javascript - 在浏览器中，如何从被调用选项卡移动到调用选项卡？

> ID：10828054
> 
> 赞同：0
> 
> 时间：2012-05-31T05:47:19.197
> 
> 标签：javascript, html, browser

在现代的选项卡式浏览器中，如果我在一个选项卡中有一个页面可以在另一个选项卡中打开一个页面

1.  如何从第二个选项卡移动到第一个选项卡？

2.  当第二个选项卡关闭时，如何移动到第一个选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:49:58.583

AMAIK你不能。这是一个安全问题。从父亲选项卡（这是一个[浏览上下文](http://thoughtresults.com/browsing-context)）您可以访问子选项卡（这是另一个浏览上下文）。但反之亦然。

您可能会测试`window.parent.focus()`方法，但我没有得到结果。

# c# - 如何为 c# windows 应用程序创建自动更新

> ID：10828059
> 
> 赞同：3
> 
> 时间：2012-05-31T05:47:29.620
> 
> 标签：c#, winforms

我正在为我的 c# windows 应用程序寻找自动更新。有人可以帮助我，我在哪里可以找到开源自动更新项目，或者我如何通过 c# 创建它。

谢谢大家

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T05:57:49.000

[ClickOnce](http://msdn.microsoft.com/en-us/library/748fh114.aspx)会做你想做的事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T14:09:05.370

您可以将一些框架集成到您的应用程序中。ClickOnce 将是选项之一，但您需要对程序集进行签名。

这是提供自动更新的免费库

[http://autoupdatemodule.codeplex.com/](http://autoupdatemodule.codeplex.com/)

[http://autoupdater.codeplex.com](http://autoupdater.codeplex.com)

[http://brice-lambson.blogspot.in/2011/03/automatic-update-for-codeplex-projects.html](http://brice-lambson.blogspot.in/2011/03/automatic-update-for-codeplex-projects.html)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T05:57:29.137

您可能需要有两个“应用程序”——一个由用户启动，当它发生时它会检查某个地方（网站？）是否有更新；如果存在此类更新，它将安装它（或提示这样做）。如果没有，它将启动“真正的”应用程序。

有一些技术可以帮助您做到这一点，例如 Click Once，您可以查看它们。

# javascript - 如何在 JavaScript 中对多维数组进行排序

> ID：10828060
> 
> 赞同：3
> 
> 时间：2012-05-31T05:47:36.493
> 
> 标签：javascript, jquery, arrays, json

我通常会发布到目前为止的代码，但我对此一无所知... :(

我将如何重新排序以下数组，以便我可以基于“百分比”键中的值，无论是从低到高还是从高到低？

```
var data = [{
    "id": "q1",
    "question": "blah blah blah",
    "percentage": "32"
}, {
    "id": "q2",
    "question": "blah blah blah",
    "percentage": "23"
}, {
    "id": "q3",
    "question": "blah blah blah",
    "percentage": "11"
}, {
    "id": "q4",
    "question": "blah blah blah",
    "percentage": "3"
}, {
    "id": "q5",
    "question": "blah blah blah",
    "percentage": "6"
}] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T05:48:38.727

稍微更正一下，它不是多维数组，而是对象数组，您很可能混淆了 from 的命名，对于您的问题，请使用[sort](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)`PHP`的可选函数参数来定义您自己的排序顺序。

```
data.sort(function(a, b) {
   return a.percentage - b.percentage;
})

// sorted data, no need to do data = data.sort(...); 
```

[http://jsfiddle.net/cEfRd/](http://jsfiddle.net/cEfRd/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T05:55:37.553

排序器生成器，概括[https://stackoverflow.com/users/135448/siganteng](https://stackoverflow.com/users/135448/siganteng)答案，使其适用于任何属性

```
function  createSorter(propName) {
    return function (a,b) {
        // The following won't work for strings
        // return a[propName] - b[propName];
        var aVal = a[propName], bVal = b[propName] ;
        return aVal > bVal ? 1 : (aVal < bVal ?  - 1 : 0);

    };
}
data.sort(createSorter('percentage')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T05:49:54.247

```
data.sort(function(a,b){return a.percentage - b.percentage}); 
```

[参考](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)。_

# android - Android 电子邮件在模拟器上发送，但不在设备上

> ID：10828064
> 
> 赞同：0
> 
> 时间：2012-05-31T05:47:55.627
> 
> 标签：android, email, emulation

我编写了一个在 Android 中发送电子邮件的应用程序。当我在模拟器上测试它时，它工作得很好，但是当我在设备上测试它时，它给了我一个：

> 无法在端口 456 连接到 smtp.gmail.com。

任何想法这是如何发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:04:55.857

你的端口号不对，smtp.gmail.com的端口号是465，不是456

# php - Asterisk 中的 AGI 命令和 php 文件

> ID：10828065
> 
> 赞同：0
> 
> 时间：2012-05-31T05:48:00.223
> 
> 标签：php, voip, asterisk, agi

我想在 Asterisk 中使用 php 制作简单的 IVR。当我单独运行 php 程序时，它可以正常工作。但是当我在星号中通过 AGI 命令调用它时，它不起作用。这是我的 php 文件：

```
#!/usr/bin/php -q
<?
 set_time_limit(30);
 require('phpagi.php');
 $agi = new AGI();
 $agi->answer();
 $file = '/var/www/html/test.txt';
 $current = file_get_contents($file);
 $current .= "Test\n";
 file_put_contents($file, $current);
 $agi->say_digits(1234);
 $agi->hangup();
 ?> 
```

这是拨号方案：

```
[testphp]
exten => 6565,1,Answer 
exten => 6565 2,Playback(Hello-World)
exten => 6565,3,AGI(testphp.php) 
exten => 6565 4,Playback(Hello-World)
exten => 6565,5,Hangup 
```

当我用手机拨打 6565 时，它只播放两次“Hello World”信息！php 文件权限是可执行的。

我已经在 VirtualBox 中安装了 Elastix(Asterisk)。

我究竟做错了什么？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:01:59.423

执行以下操作：

1）停止星号

```
asterisk -rx "core stop now" 
```

2) 在 ssh 控制台中启动它

```
asterisk -vvvgc 
```

3) 启用星号 AGI 调试

```
agi set debug on 
```

您将在脚本中看到错误。还要检查 selinux 是否已关闭

# facebook-wall - Android SDK Wall Post 未显示在朋友新闻提要中

> ID：10828068
> 
> 赞同：1
> 
> 时间：2012-05-31T05:48:07.803
> 
> 标签：facebook-wall, facebook-android-sdk

我使用 Facebook Android SDK 编写了一个简单的 Android 应用程序，它只在墙上发布一条简短的消息。“消息”不包含任何媒体链接。运行应用程序后，短信显示在我自己的 Facebook 页面上。但它不会显示在新的提要页面上（即最近的提要更新页面，或 facebook 的主页）。

由于代码非常简单，我找不到任何问题。如果有人能提供一些建议或建议，我真的很感激。

这是代码：

```
mFacebook.authorize(
    FacebookPostActivity.this,
    new String[] { "publish_stream", "read_stream" },
    new SimpleDialogListener() );
...
mAsyncRunner = new AsyncFacebookRunner( mFacebook );
Bundle params = new Bundle();
params.putString("message", "Some Message" );
mAsyncRunner.request( 
    "me/feed", 
    params, 
    "POST", 
    new SimpleRequestListener(), 
    null ); 
```

# python - 网络爬虫文本云

> ID：10828069
> 
> 赞同：1
> 
> 时间：2012-05-31T05:48:08.870
> 
> 标签：python

我需要有关我正在开发的文本云程序的帮助。我意识到这是家庭作业，但我自己已经走了很远，只是现在被难住了几个小时。我被困在网络爬虫部分。该程序应该打开一个页面，收集该页面中的所有单词，并按频率对它们进行排序。然后它应该打开该页面上的任何链接并获取该页面上的单词等。深度由全局变量 DEPTH 控制。最后，它应该把所有页面中的所有单词放在一起，形成一个文本云。

我正在尝试使用递归来调用一个函数来保持打开链接，直到达到深度。顶部的 import 语句只是使用了一个名为 getHTML(URL) 的函数，它返回页面上单词列表的元组，以及页面上的任何链接。

到目前为止，这是我的代码。除了 getRecursiveURLs(url, DEPTH) 和 makeWords(i) 之外，每个函数都可以正常工作。我也不是 100% 确定底部的 counter(List) 函数。

```
from hmc_urllib import getHTML

MAXWORDS = 50
DEPTH = 2

all_links = []

def getURL():
    """Asks the user for a URL"""

    URL = input('Please enter a URL: ')

    #all_links.append(URL)

    return makeListOfWords(URL), getRecursiveURLs(URL, DEPTH)

def getRecursiveURLs(url, DEPTH):
    """Opens up all links and adds them to global all_links list,
    if they're not in all_links already"""

    s = getHTML(url)
    links = s[1]
    if DEPTH > 0:
        for i in links:
            getRecursiveURLs(i, DEPTH - 1)
            if i not in all_links:
                all_links.append(i)
                #print('This is all_links in the IF', all_links)
                makeWords(i)#getRecursiveURLs(i, DEPTH - 1)
            #elif i in all_links:

             #   print('This is all_links in the ELIF', all_links)
              #  makeWords(i) #getRecursiveURLs(i, DEPTH - 1)
    #print('All_links at the end', all_links)
    return all_links

def makeWords(i):
    """Take all_links and create a dictionary for each page.
    Then, create a final dictionary of all the words on all pages."""

    for i in all_links:
        FinalDict = makeListOfWords(i)
        #print(all_links)
        #makeListOfWords(i))
    return FinalDict

def makeListOfWords(URL):
    """Gets the text from a webpage and puts the words into a list"""

    text = getHTML(str(URL))
    L = text[0].split()
    return cleaner(L)

def cleaner(L):

    """Cleans the text of punctuation and removes words if they are in the stop list."""

    stopList = ['', 'a', 'i', 'the', 'and', 'an', 'in', 'with', 'for',
                'it', 'am', 'at', 'on', 'of', 'to', 'is', 'so', 'too',
                'my', 'but', 'are', 'very', 'here', 'even', 'from',
                'them', 'then', 'than', 'this', 'that', 'though']

    x = [dePunc(c) for c in L]

    for c in x:
        if c in stopList:
            x.remove(c)

    a = [stemmer(c) for c in x]

    return counter(a)

def dePunc( rawword ):
    """ de-punctuationifies the input string """

    L = [ c for c in rawword if 'A' <= c <= 'Z' or 'a' <= c <= 'z' ]
    word = ''.join(L)
    return word

def stemmer(word):

    """Stems the words"""

    # List of endings
    endings = ['ed', 'es', 's', 'ly', 'ing', 'er', 'ers']

    # This first case handles 3 letter suffixes WITH a doubled consonant. I.E. spammers -> spam
    if word[len(word)-3:len(word)] in endings and word[-4] == word[-5]:
        return word[0:len(word)-4]

    # This case handles 3 letter suffixes WITHOUT a doubled consonant. I.E. players -> play
    elif word[len(word)-3:len(word)] in endings and word[-4] != word[-5]:
        return word[0:len(word)-3]

    # This case handles 2 letter suffixes WITH a doubled consonant. I.E. spammed -> spam
    elif word[len(word)-2:len(word)] in endings and word[-3] == word[-4]:
        return word[0:len(word)-3]

    # This case handles 2 letter suffixes WITHOUT a doubled consonant. I.E. played -> played
    elif word[len(word)-2:len(word)] in endings and word[-3] != word[-4]:
        return word[0:len(word)-3]

    # If word not inflected, return as-is.
    else:
        return word

def counter(List):
    """Creates dictionary of words and their frequencies, 'sorts' them,
    and prints them from most least frequent"""

    freq = {}
    result = {}
 # Assign frequency to each word
    for item in List:
        freq[item] = freq.get(item,0) + 1

    # 'Sort' the dictionary by frequency
    for i in sorted(freq, key=freq.get, reverse=True):
        if len(result) < MAXWORDS:
            print(i, '(', freq[i], ')', sep='')
            result[i] = freq[i]
    return result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:58:32.350

目前尚不完全清楚该作业的确切要求，但据我所知，您希望一次且仅一次访问 DEPTH 的所有页面。此外，您希望从所有页面中获取所有单词并使用聚合结果。下面的代码片段是您正在寻找的，但它未经测试（我没有 hmc_urllib）。`all_links`，`makeWords`并且`makeListOfWords`已被删除，但其余代码将是相同的。

```
visited_links = []

def getURL():
    url = input('Please enter a URL: ')
    word_list = getRecursiveURLs(url, DEPTH)
    return cleaner(word_list) # this prints the word count for all pages

def getRecursiveURLs(url, DEPTH):
    text, links  = getHTML(url)
    visited_links.append(url)
    returned_word_list = text.split()
    #cleaner(text.split()) # this prints the word count for the current page

    if DEPTH > 0:
        for link in links:
            if link not in visited_links:
                returned_word_list += getRecursiveURLs(link, DEPTH - 1)
    return returned_word_list 
```

一旦你有一个清理和词干的列表，你可以使用以下函数来生成单词统计字典并分别打印单词统计字典：

```
def counter(words):
    """
    Example Input: ['spam', 'egg', 'egg', 'egg', 'spam', 'spam', 'egg', 'egg']
    Example Output: {'spam': 3, 'egg', 5}
    """
    return dict((word, x.count(word)) for word in set(words))

def print_count(word_count, word_max):
    """
    Example Input: {'spam': 3, 'egg', 5}
    Prints the word list up to the word_max sorted by frequency
    """
    for word in sorted(word_count, key=word_count.get, reverse=True)[:word_max]:
        print(word,'(', word_count[word], ')', sep= '') 
```

# javascript - Nowjs：[RangeError：超出最大调用堆栈大小]

> ID：10828073
> 
> 赞同：10
> 
> 时间：2012-05-31T05:48:36.820
> 
> 标签：javascript, node.js, nowjs-sockets

当我在端口 8080 上启动服务器时，它不会给我一个错误，但是当我尝试浏览`http://localhost:8080/nowjs/now.js`服务器时会引发一个错误：

`[RangeError: Maximum call stack size exceeded]`
`undefined`

我对 socket.io 进行了同样的尝试，并且效果很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T19:37:42.350

嗯，如果 now.js 使用 date.js，也许你的问题就[在这里](http://code.google.com/p/datejs/issues/detail?id=143)。该链接所说的是 date.js 尝试将 toString 设置为 Date 原型，但是当 toString 已经定义时，您会得到其他答案中提到的**循环引用。**

基本上，他们说在 date.js 中，你改变了

```
Date.prototype._toString=Date.prototype.toString 
```

至

```
if(Date.prototype._toString==undefined) {Date.prototype._toString=Date.prototype.toString;} 
```

我希望它会帮助某人。它帮助了我。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T16:53:24.300

Aadit，您是否阅读过以下内容：

[在 setTimeout 调用期间超出最大调用堆栈大小](https://stackoverflow.com/questions/8731840/maximum-call-stack-size-exceeded)

[未捕获的 RangeError：超出最大调用堆栈大小，JavaScript](https://stackoverflow.com/questions/9497774/uncaught-rangeerror-maximum-call-stack-size-exceeded-javascript)

因此，正如您所见，问题似乎是由于堆栈大小使用不当造成的。如果您还没有，您可以在此处详细阅读有关此问题的更多信息以及**可能的解决方案**： [Maximum call stack size exceeded 错误](https://stackoverflow.com/questions/6095530/maximum-call-stack-size-exceeded-error)

我认为它与端口没有任何关系，更多的是与您交互/使用堆栈的方式的方法/功能有关。

再说一次，我可能错了。;D

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-10T04:19:51.790

我有两个产生此错误消息的 now.js 问题。希望其中之一对您有所帮助。

**循环引用**

您不能在现在传入的对象中包含任何循环引用，否则它的扩展方法将失败。对此进行了一些优化和解决方法，现在它被 [列为已解决的问题](https://github.com/Flotype/now/issues/143)，但我遇到了它。

**初始化（）只有一次**

其次，您可能不会调用`require('now').initialize(...)`两次，或者两个实例进行[了一些智力对话](http://www.nuklearpower.com/2001/04/12/episode-015-a-little-intellectual-conversation/)，并在堆栈中相互竞争。

我所做的是`everyone`在 app.js 中创建并将其传递给我所有需要引用现在的“口袋”的 require(...) 方法。

在 /app.js 中：

```
var conf = {
    everyone: require('now').initialize(app)
    port: 3000,
    // etc...
};

require('./routes')(conf)
// etc... 
```

在路由/index.js 中：

```
module.exports = function(conf) {
   var everyone = conf.everyone;

   return {
       send: function() {
           everyone.now.clientFxn(...);
       }
   }
} 
```

# pdf - “快速网络视图”是否可以在任何带有 Adob e Reader X 的浏览器中工作？

> ID：10828076
> 
> 赞同：4
> 
> 时间：2012-05-31T05:48:43.873
> 
> 标签：pdf

我正在运行 WIN7 并尝试使用最新版本的 IE、Opera、Safari、Firefox 和 Chrome，并且 ALL 在显示之前下载整个文件。

我正在使用 Fiddler2 监控流量。

我知道这里有一些关于如何响应来自 adobe Web 插件的字节范围请求的问题，但在我看到 Fast Web View 工作之前我不会去那里。

我找到了一些链接。

[http://blogs.adobe.com/pdfdevjunkie/web_designers_guide](http://blogs.adobe.com/pdfdevjunkie/web_designers_guide) http://stackoverflow.com/questions/1817750/do-most-browsers-make-multiple-http-requests-when-displaying-a-pdf-from-within -t [http://dotnetslackers.com/articles/aspnet/Range-Specific-Requests-in-ASP-NET.aspx](http://dotnetslackers.com/articles/aspnet/Range-Specific-Requests-in-ASP-NET.aspx)

Med venlig hilsen / 致以最诚挚的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T07:39:07.603

您看不到“快速 Web 视图工作”的一个可能原因可能是您没有使用正确的 PDF 文件对其进行测试。为了使快速 Web 视图正常工作，PDF 需要*“线性化”*（有时也称为*“网络优化”*）。默认情况下，大多数 PDF 不是线性化的。

Ghostscript 和 Acrobat Professional（以及其他一些程序）可以将现有的 PDF 转换为线性化的 PDF。

* * *

**更新：**要检查 PDF 的属性，请运行`pdfinfo your.pdf`或`pdfinfo your.pdf | grep Optimized:`. 应该说`Optimized: yes`。

该`pdfinfo`实用程序可在 Windows、Linux、Mac OS X 上使用。

# android - Android 获取当前触摸的集合，如 XNA

> ID：10828078
> 
> 赞同：0
> 
> 时间：2012-05-31T05:48:59.937
> 
> 标签：android, touch, xamarin.android

有什么方法可以在屏幕或视图上获取当前触摸的集合，例如在 wp7 的 XNA 中？PS我实际上正在使用monodroid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:24:58.857

文档（[http://developer.android.com/reference/android/view/MotionEvent.html](http://developer.android.com/reference/android/view/MotionEvent.html)）：

> 运动事件包含有关当前活动的所有指针的信息，即使它们中的一些自上次事件被传递以来还没有移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:02:18.590

你看过单机游戏吗？它为 Android 提供 XNA 绑定，[https://github.com/mono/MonoGame](https://github.com/mono/MonoGame)

# c - gtk+ 文本编辑器，打开 python 脚本中止抱怨无效的 utf-8 文本

> ID：10828080
> 
> 赞同：0
> 
> 时间：2012-05-31T05:49:06.463
> 
> 标签：c, gtk, glibc

我正处于使用 gtk+ 2.0 和 gtksourceview 2.0 编写文本编辑器的调试阶段。当我打开某些文件（以前在 geany 中编辑，通常是 python 文件）时，编辑器崩溃并显示以下输出：

```
(ledit:23515): Gtk-CRITICAL **: IA__gtk_text_buffer_set_text: assertion `GTK_IS_TEXT_BUFFER (buffer)' failed
**
GLib:ERROR:gutf8.c:1915:_g_utf8_make_valid: assertion failed: (g_utf8_validate (string->str, -1, NULL))
Aborted 
```

我试图按如下方式捕获此错误：

```
char *path,*string;
GtkTextBuffer *tbuffer;
gsize length = -1;

path = gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
g_file_get_contents(path,&string,&length,NULL); 
if (g_utf8_validate(string,length,NULL))
{
  ...
  gtk_text_buffer_set_text(tbuffer,string,-1);
  ...
}
else
{
  printf("invalid utf-8 data\n");
} 
```

但这不起作用。我有两个问题：

1.  为什么这未能捕获错误？
2.  我还能做些什么来使字符串在运行中有效 utf-8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:34:56.947

事实证明，我试图在错误的函数上捕获错误。引发错误的函数是`g_file_get_contents`. 我修改了如下所示的代码块，问题文件现在可以正常打开，我对此感到有些困惑，因为它仍在执行引发错误的相同功能，但现在处于 if 的状态声明，它工作正常？？？

```
char *path,*string;
GtkTextBuffer *tbuffer;
gsize length = -1;

path = gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));

if ( g_file_get_contents(path,&string,&length,NULL) )
{
  ...
  gtk_text_buffer_set_text(tbuffer,string,-1);
  ...
}
else
{
  printf("file did not open\n");
} 
```

# c - 父进程在设置 SIGCHLD 时被阻塞

> ID：10828081
> 
> 赞同：0
> 
> 时间：2012-05-31T05:49:07.603
> 
> 标签：c, linux, process, signals, fork

这是我的代码，我已经简化了它。

```
#include <stdio.h>
#include <unistd.h>
#include <signal.h>
#include <sys/wait.h>

void signal_handle(int sig)
{
    int status;
    wait(&status);
}

int main()
{
    pid_t pid = fork();

    if (pid > 0)
        signal(SIGCHLD, signal_handle);
    if (pid == 0) {
        if (execl("/bin/ls", "/", (char *)0) < 0)
        {
            perror("execl");
            return -1;
        }
    }
    return 0;
} 
```

当我运行它时，我发现，子进程打印运行结果，但父进程被阻塞。

如果一个父亲有很多儿子进程，我该怎么办？`wait(&status)`为每个人设置？

我很抱歉我的英语不好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:17:47.273

我不明白为什么父进程会挂起，而且它不在我的机器上。

之后`fork()`，父进程调用`signal()`设置信号处理程序并立即退出。同时，子进程执行`ls`以打印当前目录的内容（因为`"/"`参数变为`argv[0]`，程序名称，并且没有其他参数）。然后它也退出。除非在极不可能的情况下，父母在孩子完成之前很久就退出了。

如果您希望父进程等到它收到“子进程死亡”信号，请`pause()`在仅父进程的执行路径中添加一个调用：

```
#include <stdio.h>
#include <unistd.h>
#include <signal.h>
#include <sys/wait.h>

static void signal_handle(int sig)
{
    int status;
    pid_t pid = wait(&status);
    printf("%d: signal %d child %d status 0x%.4X\n", (int)getpid(), sig, (int)pid, status);
}

int main(void)
{
    pid_t pid = fork();

    if (pid > 0)
    {
        signal(SIGCHLD, signal_handle);
        pause();
    }
    else if (pid == 0)
    {
        execl("/bin/ls", "ls", "/", (char *)0);
        perror("execl");
        return -1;
    }
    else
        perror("fork");
    return 0;
} 
```

# scheduler - 如何在 EJB3.1 中创建调度程序

> ID：10828083
> 
> 赞同：0
> 
> 时间：2012-05-31T05:49:15.540
> 
> 标签：scheduler, ejb-3.1

我是 EJB3 世界的新手。我想为 EJB 中的文件处理创建调度程序。我尝试了以下代码..

```
package com.fks.nclp.ejb.scheduler;

import javax.ejb.Schedule;
import javax.ejb.Schedules;
import javax.ejb.Stateless;

@Stateless
public class AutoTimerBean {

    @Schedules(
            {
                @Schedule(second="3",persistent=false)
            }
    )   
    public void executeOnEveryTwoSecond(){
        System.out.println("THIS IS TESTING OF EJB SCHEDULER");
    }
} 
```

并在 GlassFish3.1 上部署了 EAR 应用程序。根据我的要求，调度程序应该每三秒触发一次。

但它没有发生。有什么建议吗？？？谢谢，甘扬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:36:40.827

得到了解决方案。在 GlassFish 服务器中，我们必须从管理控制台创建 EJB 计时器服务。

步骤如下..

转到 glassFish 管理控制台 -> 转到配置 -> 转到服务器配置 -> 转到 EJB 容器

这里设置 Timer DataSource = JDBC Default Resource pool。重新启动服务器。

将 JDBC 默认资源池添加到 Timer DataSource 后，调度程序工作正常。

谢谢，甘扬。

# oop - 澄清术语“应用程序基础架构”

> ID：10828084
> 
> 赞同：1
> 
> 时间：2012-05-31T05:49:17.070
> 
> 标签：oop, architecture

抱歉，如果我要问的内容过于笼统，请随时将其标记为社区 wiki，甚至关闭它，但请在得到一个好的答案后......这里什么都没有。

我与一家大公司的顾问就应用程序基础架构这个术语进行了激烈的辩论，因此我在这里看看专家们的想法，因为我自己也需要很好的理解。我是一个微不足道的软件开发人员，并试图就软件架构和其他东西进行交谈，然后我们就陷入了应用程序基础架构这个术语。

根据我的竞争对手的理解，这仅用于后端硬件组件，而我认为他正在混合上下文，从软件工程的上下文来看，它应该指支持应用程序的东西，例如日志记录、ORM，甚至框架（.net）等

我在多大程度上错了，如果我错了，请阐明定义……这真的很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:55:25.903

以下是一些链接，其中包含有关`Application Infrastructure`从中提取的术语的一些描述：

*   [应用基础设施——f5.com](http://www.f5.com/pdf/application-briefs/application-infrastructure-ab.pdf)

    应用程序基础架构由应用程序服务器、Web 服务器和通常的数据库服务器组成，是大多数网络架构中的核心组件。这部分网络基础设施向 LAN 以及 WAN 上的员工、合作伙伴和客户提供高性能应用服务。

    应用程序基础架构的一些关键功能包括事务管理、集群、可靠的应用程序到应用程序消息传递、系统管理、高级应用程序开发工具、专有访问以及与传统技术的互操作性。

*   [应用基础设施——networkmagazineindia.com](http://www.networkmagazineindia.com/200212/inperson1.shtml)

    需要一个（通用/标准）平台来使企业中的不同应用程序跨地域或跨多个位置工作，并管理企业内发生的大量用户和事务。这个确保不同应用程序相互协作的平台被称为应用程序基础架构。

*   [应用基础设施——bitpipe.com](http://www.bitpipe.com/tlist/Application-Infrastructure.html)

    一种高性能、可靠和安全的集成技术基础架构，用于管理应用程序服务提供商的多个托管应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T06:51:29.850

据我所知，它与硬件和软件（中间件和 API 管理）有关。

Gertner 定义：应用程序基础设施是用于交付业务应用程序的软件平台，包括开发和运行时启用程序。

来自 Gartner 的有趣信息： [http ://wso2.com/resources/analyst-reports/comparing-vendors-of-comprehensive-application-infrastructure-suites/](http://wso2.com/resources/analyst-reports/comparing-vendors-of-comprehensive-application-infrastructure-suites/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:01:29.097

他似乎在描述的是*软件平台（如果它与**软件平台*相同，我将保持开放状态。我确实在应用程序基础架构定义中包括软件服务，并且还包括连接/网络以及硬件和软件作为基础设施的三个基础基石。基础设施是通用商品组件，而不是通常始终是软件的领域特定组件；（一个可能的例外是组织使用定制硬件）。AIH；[IBM 将 WebSphere 定位为应用程序Infrastructure](https://www.ibm.com/developerworks/mydeveloperworks/wikis/home/wiki/We98b8e939a26_4de1_8977_6a608ae3fc43/page/WebSphere%20Application%20Infrastructure%20Summit?lang=en) 和 Microsoft 认为他们的[Windows Server to the Application Infrasture](http://download.microsoft.com/download/8/5/3/8533724A-1F88-4F19-AB49-690EF9AB3EEB/Gartner-Microsoft%20joint%20newsletter%20-%20Next-generation%20Application%20Infrastructure.pdf)都同意你和我的观点。

# ruby-on-rails - 设计管理员重定向

> ID：10828085
> 
> 赞同：4
> 
> 时间：2012-05-31T05:49:22.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用 Devise + CanCan 并希望重定向到我的管理界面（由 rails admin gem 生成）如果它是登录的**管理员**..

我使用以下内容自定义了**用户**重定向到他们各自的配置文件：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_path, :alert => exception.message
  end
  def after_sign_in_path_for(resource)
    user_path(current_user)
  end

end 
```

角色.rb

```
class Role < ActiveRecord::Base
  has_and_belongs_to_many :users, :join_table => :users_roles
  belongs_to :resource, :polymorphic => true
end 
```

能力.rb

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.has_role? :admin
      can :manage, :all
      can :access, :rails_admin
      can :dashboard 
    end 
```

用户.rb

```
class User < ActiveRecord::Base
    rolify
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable
 ..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:55:56.173

我假设您`admin`的 User 模型上有一个布尔属性。

```
def after_sign_in_path_for(resource)
  if current_user.has_role? :admin
    rails_admin.dashboard_path
  else
    user_path(current_user)
  end
end 
```

# java - 如何在 MVC 流程中使用模型

> ID：10828088
> 
> 赞同：0
> 
> 时间：2012-05-31T05:49:47.400
> 
> 标签：java, model-view-controller, jsp, servlets

我有一个提供登录屏幕的 jsp 文件，在提交表单后，控件必须转到 servlet。现在，我如何将表单中的值保存到模型（Bean 类）并让它们在控制器中使用。？我没有使用任何框架，如 struts、spring 等。

我使用了以下代码，但收到错误

```
java.lang.NoClassDefFoundError: bean/LoginBean 
```

**我的代码是：**

**index.jsp：**

```
 <form name="signin" method="post" action="LoginServlet">
                 <table>
                     <tr><td><font>USERNAME</font></td><td><input type="text" name="signin_uname" /></td></tr>
                     <tr><td><font>PASSWORD</font></td><td><input type="password" name="signin_pwd" /></td></tr>
                     <tr><td><input type="reset" value="RESET" /></td><td><input type="submit" value="LOGIN" /></td></tr>
                 </table>
            </form> 
```

**登录Servlet.java**

```
 @Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
  processRequest(request, response);
    HttpSession session=request.getSession();
    System.out.println(session);
    try {
        LoginBean login=new LoginBean();
        login.setSignin_pwd("raviteja");
        login.setSignin_uname("raviteja");
        System.out.println(login.getSignin_uname());
        System.out.println(login.getSignin_pwd());
    } finally {

    }
    response.sendRedirect("");
} 
```

**登录Bean.java**

```
public class LoginBean implements Serializable {
String signin_uname,signin_pwd;
public LoginBean() {

}

public String getSignin_pwd() {
    return signin_pwd;
}

public void setSignin_pwd(String signin_pwd) {
    this.signin_pwd = signin_pwd;
}

public String getSignin_uname() {
    return signin_uname;
}

public void setSignin_uname(String signin_uname) {
    this.signin_uname = signin_uname;
} 
```

}

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
  <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee                    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<servlet>
    <servlet-name>LoginServlet</servlet-name>
    <servlet-class>servlets.LoginServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>LoginServlet</servlet-name>
    <url-pattern>/LoginServlet</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:13:24.723

1 将 Spring 库添加到您的项目中，并将 web.xml 中的 DispatherServlet 映射到处理 /LoginServlet

2 创建 bean（表单和 bean 字段的名称相同）：

```
public class LoginData {
    private String signin_uname;
    private String signin_pwd;

    // Getters and setters
} 
```

3 创建控制器：

```
@Controller
public class LoginController {

    @RequestMapping(value = "/LoginServlet", method = RequestMethod.POST)
    public String postLoginData(@ModelAttribute LoginData loginData) {

        // All data from form will be at your model attribute bean. It will also will 
        // be putted at request
        String userName = logigData.getSignin_uname();

        return "loginResult.jsp";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:33:44.840

您的代码应该可以正常运行。你的类路径有问题。JVM 在运行时无法找到该类`LoginBean`。

顺便说一句，您想向控制台输出什么？如果要打印输入的数据用户，请使用以下内容更正您的代码：

```
LoginBean login = new LoginBean(); 
String username = request.getParameter("signin_uname");
String password = request.getParameter("signin_pwd");
login.setSignin_uname(username);
login.setSignin_pwd(password); 
```

但是，如果您正确地使用您的代码创建了一个项目，则不应该出现错误。

# jquery - 如何使用 javascript 显示 jquery 页面（在 div 内）？

> ID：10828089
> 
> 赞同：1
> 
> 时间：2012-05-31T05:49:47.603
> 
> 标签：jquery, jquery-ui, jquery-mobile

这是我的问题，我称之为这个方法，它的作用是

使用 jQuery 在服务器上发布一些数据，我想使用从服务器收到的结果显示页面

我的页面 index.html

```
<div data-role="page" id="login">
    // other page content
            <div id="divrightButton">

            <!-- calling loginSubmit which calls loginPostData-->   
            <a class="bluebutton" href="#" onclick="loginSubmit(); return false;">Login</a>

            </div>
        </form>
</div>

<!--main page-->
<div data-role="page" id="mainMenu">

     Main menu
</div> 
```

这是来自 javascript 的一段代码，**快速的东西 loginSubmit() 调用 loginPostData**，loginSubmit 创建一个 json 对象并将其传递给 loginPostData

```
function loginPostData(jsonRequest)
{
    $.post("http://localhost:8080/edserve/MobileServlet", 
            JSON.stringify( jsonRequest), 
            function(data) 
            {
                var obj = JSON.stringify(data);
                //var object = JSON.parse(json_text);
                //alert(obj);
                alert(obj);
                if(data.status=="success")
                {
                    //display main page
                    //$('#mainMenu').show(); <-- this does not give desired result
                }
                else
                {
                    if(data.message=="user not verified")
                    {
                        //display verification page
                    }   
                    if(data.message=="no user exist with this usname")
                    {
                        //set focus to username
                        $("#username").focus();
                    }   
                }   
        }, "json");
} 
```

成功时如何显示主菜单，html的整个代码在不同div的单个文件中

* * *

使用此代码重定向/显示特定的 div 标签/元素

`$.mobile.changePage("#mainMenu",{allowSamePageTransition: true });`

并下载以下 css 文件，它是页面/div 元素之间转换的必要条件

[jquery.mobile.transitions.css](https://github.com/jquery/jquery-mobile/blob/ca9df1197a9748ee7448fb9b28c14c41d80d4601/themes/default/jquery.mobile.transitions.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:53:13.573

您可以尝试对此[http://api.jquery.com/load/使用 jquery 加载功能](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:57:44.957

试试这个代码

```
 $.mobile.changePage( "#mainMenu", { allowSamePageTransition: true }); 
```

并检查此链接

[http://jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T06:10:24.627

试试这个..

```
function loginPostData(jsonRequest)
    {
        $.post("http://localhost:8080/edserve/MobileServlet", 
                JSON.stringify( jsonRequest), 
                function(data) 
                {
                    var obj = JSON.stringify(data);
                    //var object = JSON.parse(json_text);
                    //alert(obj);
                    alert(obj);
                    if(data.status=="success")
                    {
                        $.mobile.changePage( "#mainMenu"); // main menu div id..
                    }
                    else
                    {
                        if(data.message=="user not verified")
                        {
                            //display verification page
                        }   
                        if(data.message=="no user exist with this usname")
                        {
                            //set focus to username
                            $("#username").focus();
                        }   
                    }   
            }, "json");
    } 
```

# php - JQuery 和 F3 框架 ajax 问题

> ID：10828094
> 
> 赞同：0
> 
> 时间：2012-05-31T05:49:59.197
> 
> 标签：php, jquery, ajax, post

我有以下代码：

```
jQuery.ajax({
            type: "POST",
            async: true,
            url: '/index/city',
            data:  {massiv: 'qweqwe'},
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (msg)
            { alert('success') },
            error: function (err)
            { console.log(err.responseText);}
        }); 
```

以及 php 端的以下代码：

```
var_dump($_POST); 
```

当我运行它时，我得到空白`$_POST`数组。但是，使用 firebug，我可以清楚地看到我发送了 POST query `massiv=qweqwe`。如果我使用 GET 类型运行查询，我可以在`$_GET`数组中看到它而没有任何问题。

nginx 和 php-fpm 日志中没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:42:00.077

我找到了使用 $.post 而不是 $.ajax 的解决方法

# php - 故障排除除以零警告

> ID：10828095
> 
> 赞同：-5
> 
> 时间：2012-05-31T05:50:12.317
> 
> 标签：php

我想用计数显示喜欢和不同的投票。我的代码在下面给出，但它显示警告：filename.php 中除以零。

```
<?php
include("db.php");

if($_POST['id'])
{
$id=mysql_escape_String($_POST['id']);
$name=mysql_escape_String($_POST['name']);

mysql_query("update messages set $name=$name+1 where id='$id'");

$result=mysql_query("select up,down from messages where id='$id'");
$row=mysql_fetch_array($result);

$up_value=$row['up'];
$down_value=$row['down'];
$total=$up_value+$down_value;

$up_per=($up_value*100)/$total;
$down_per=($down_value*100)/$total;
?>
<div style="margin-bottom:10px">
<b>Ratings for this blog</b> ( <?php echo $total; ?> total)
</div>
<table width="700px">

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $up_value; ?></td>
<td width="600px"><div id="greebar" style="width:<?php echo $up_per; ?>%"></div></td>
</tr>

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $down_value; ?></td>
<td width="600px"><div id="redbar" style="width:<?php echo $down_per; ?>%"></div></td>
</tr>

</table>

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:52:59.303

`$total`在除法运算中使用之前检查变量

例如`if ($total != 0)`，然后进行除法运算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:53:01.127

如果一个资源没有被赞成或反对，它将导致在那里被零除：

```
$up_per=($up_value*100)/$total; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:54:05.663

```
if ($total !== 0) {
  $up_per = ($up_value*100)/$total;
  $down_per = ($down_value*100)/$total;
} else {
  // what do you want to show when there is no votes.
  $up_per = 0;
  $down_per = 0;
} 
```

# c - C中的CRC计算

> ID：10828102
> 
> 赞同：0
> 
> 时间：2012-05-31T05:50:41.940
> 
> 标签：c, crc

我有一个设备，它向我发送带有 CRC 计算的数据。每 16 个字节有 2 个 CRC 字节。生成多项式为 x16 + x13 + x12 + x11 + x10 + x8 + x6 + x5 + x2 + 1

我的代码如下所示：

```
int crc16(unsigned char *addr, int num, int crc)
{
    uint16_t poly = 0x3D65;
    int i;
    for (; num > 0; num--)           /* Step through bytes in memory */
    {
        crc = crc ^ ((unsigned short)*addr++ << 8);         /* Fetch byte from memory, XOR into  CRC top byte*/
        for (i = 0; i < 8; i++)      /* Prepare to rotate 8 bits */
        {
            if (crc & 0x10000)       /* b15 is set... */
                crc = (crc << 1) ^ poly;    /* rotate and XOR with XMODEM polynomic */
            else                     /* b15 is clear... */
                crc <<= 1;           /* just rotate */
        }                            /* Loop for 8 bits */
        crc &= 0xFFFF;               /* Ensure CRC remains 16-bit value */
     }                               /* Loop until num=0 */
     return(crc);                    /* Return updated CRC */
} 
```

我还用其他多项式（如 0x9CB2）尝试了这段代码。我认为代码中存在错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:02:18.363

您使用的是哪个编译器/平台？您确定`int`数据类型是 32 位吗？尝试`long`并比较结果。

此外，如果出现以下情况，您可以提出以下几点：

```
if ( crc & 0x10000 ) 
```

并在评论中声明您正在验证第 15 位。不，这不是真的，您将验证第 16 位。对于 15 日，它将是`( crc & 0x8000 )`。

# objective-c - OSX 应用程序在发布模式下崩溃

> ID：10828105
> 
> 赞同：-1
> 
> 时间：2012-05-31T05:51:54.470
> 
> 标签：objective-c, cocoa, xcode4.2, xcodebuild, release-mode

任何指针我们如何在发布模式下调试应用程序，它甚至在第一行就崩溃了，下面是代码片段

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    // Insert code here to initialize your application

    debugLog<<" inside app did finish launching "<<endl;

    **// here its crashing**        
    [self InitAppController];

    [AppUtil createAppMacFolder];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:28:55.200

不知道是什么问题，
但是当我将优化级别设置为 0 时工作正常，

![在此处输入图像描述](../Images/72d10adf124ab07ca41cb18ea3b149f9.png)

# asp.net - 32 位和 64 位系统版本 12.0 的 Firefox 布局问题

> ID：10828109
> 
> 赞同：0
> 
> 时间：2012-05-31T05:52:32.353
> 
> 标签：asp.net, firefox, windows-7

我们有一个基于 ASP.Net 构建的 Web 应用程序，我们通常在所有浏览器上测试系统，但最近我们发现 32 位操作系统上的 Firefox V 12.0 显示布局正确，但在 Windows 7 上的 64 位操作系统上显示布局混乱。

对于相同版本的浏览器会出现这种不同的问题，您有什么想法吗？

# magento - Magento URL 重定向到基于客户登录的类别

> ID：10828111
> 
> 赞同：0
> 
> 时间：2012-05-31T05:52:46.980
> 
> 标签：magento

我需要为特定用户重定向 URL，例如，如果男性登录该网站必须重定向到男性类别，如果女性登录该网站必须重定向到女性类别。下面是我用于重定向的代码。

如果（男）

$this->_redirect('men');

别的

$this->_redirect('女性');

谁能解释我做错了什么？上面的代码对我不起作用。

谢谢普拉卡什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:10:46.063

您可以覆盖该`Mage_Customer_AccountController::_loginPostRedirect()`方法，以便在登录后重定向到您想要的任何位置。

如果男性和女性是客户群体，那么您可以使用以下现成的扩展轻松地将他们重定向到您喜欢的任何页面：http:
[//www.magepsycho.com/custom-login-redirect-pro.html](http://www.magepsycho.com/custom-login-redirect-pro.html)

干杯!

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T05:58:55.247

我不确定如何回答这个问题。

您发布的内容并不是真正的代码。它不是有效的 PHP。

此外，您要实现的目标没有简单的解决方案。

如果您是学习编程的新手，我真诚地建议您不要从 Magento 开始。Magento 是一个非常强大的平台，但其背后的概念和软件非常复杂。

我建议在尝试使用这个平台构建之前，尽可能多地独立于 Magento 学习 PHP/MySQL。

# c# - 在字符串列表中的每个字符串的开头、结尾和中间添加字符的最快方法

> ID：10828113
> 
> 赞同：5
> 
> 时间：2012-05-31T05:53:00.100
> 
> 标签：c#, string, list, c#-4.0, join

这是我的清单：

```
List<string> elements = new List<string> { "apple", "orange", "peach" }; 
```

我需要一个具有此返回值的方法：

```
string result = "'apple', 'orange', 'peach'"; 
```

如您所见，结果添加`"'"`到每个字符串的第一个，也在它们的末尾，然后它们都加入了`", "`. 那么，您对快速流畅地进行操作有何建议？还要考虑性能问题，也许这个列表已经包含了很多元素，那怎么样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T06:02:04.223

提出我的建议：

```
string result = string.Join(", ", elements.Select(e => "'" + e + "'")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T05:54:23.640

怎么样

```
string result = string.Empty;

if (elements.Count > 0) 
    result = "'" + string.Join("', '", elements) + "'" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T05:57:00.120

我的建议是：

```
string result = 
"'" + elements.Aggregate((a, b) => string.Format("{0}', '{1}", a, b)) + "'" 
```

顺便说一句，堆栈交换有一个名为代码审查的站点。我认为那个地方更适合这个问题。

# android - 当我们从 Web 服务调用中获得响应时，可能会触发自定义事件。

> ID：10828117
> 
> 赞同：0
> 
> 时间：2012-05-31T05:53:18.913
> 
> 标签：android, web-services

我找到了一个从 Android 调用 Web 服务的示例代码，如下所示：

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
//...
try
{
SoapObject request = new SoapObject(NAMESPACE, GET_INTREBARE);

// add paramaters and values
request.addProperty("idTest", idTest);
request.addProperty("idIntrebare", idIntrebare);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

//Web method call
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL_WS);
androidHttpTransport.call(NAMESPACE + GET_INTREBARE, envelope);
//get the response
SoapObject result = (SoapObject) envelope.getResponse();

//the response object can be retrieved by its name: result.getProperty("objectName")
}
catch (Exception e)
{
e.printStackTrace();
} 
```

在上面的代码中，**HttpTransportSE**用于调用 Web 服务方法。我的疑问是，当我们调用 Web 服务时，可能会有一些延迟来获得响应，具体取决于网络。

在上面的代码中，响应在 Web 服务被调用后立即分配给 SoapObject。

**SoapObject 结果 = (SoapObject) 信封.getResponse();**

当我们从 Web 服务调用中获得响应时，是否可以触发自定义事件？

# php - 如何使用正则表达式以随机顺序匹配所需字符？

> ID：10828118
> 
> 赞同：2
> 
> 时间：2012-05-31T05:53:21.717
> 
> 标签：php, regex

我需要匹配其中包含`@`、`#`和任何数字的文本。只要字符在文本中，它们就可以处于随机位置。鉴于此输入：

```
abc@#d9
a9b#c@d
@@abc#9
abc9d@@
a#b#c@d 
```

正则表达式应匹配前 3 行。目前我的正则表达式是：

```
/@.*?#.*?[0-9]/ 
```

这不起作用，因为它只会按顺序匹配三个字符。如何以随机顺序匹配三个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:59:09.837

找到一个丑陋的正则表达式，如果你真的必须使用一个：

`/(?=.*@)(?=.*#)(?=.*[0-9]).*/`

[http://jsfiddle.net/BP53f/2/](http://jsfiddle.net/BP53f/2/)

正则表达式基本上是使用他们所说的`lookahead`

[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

上面链接中的一个简单案例是尝试匹配`q`，然后是`u`，通过做`q(?=u)`，这就是为什么它被称为`lookahead`，它发现`q`后面是`u`前面。

让我们以您的有效案例之一为例：`a9b#c@d`

第一个前瞻是`(?=.*@)`，它指出：匹配任何内容，然后是`@`。确实如此，即字符串`a9b#c`，然后由于必须丢弃来自前瞻的匹配，引擎将退回到字符串的开头，即`a`. 然后它转到

`(?=.*#)`，其中指出：匹配后面的任何内容`#`，然后在 处找到它`a9b`。等等。使用前瞻和后退的区别`(a)(b)(c)`基本上是后退。

从上面的链接：

> 让我们再看一下内部，以确保您了解前瞻的含义。让我们应用 q(?=u)i 退出。我已将前瞻设为正面，并在其后放置了一个标记。同样，q 匹配 q，u 匹配 u。**同样，来自前瞻的匹配必须被丢弃**，因此引擎从字符串中的 i 退回到 u。前瞻成功，因此引擎继续执行 i。但我无法匹配你。所以这个匹配尝试失败了。所有剩余的尝试也将失败，因为字符串中没有更多的 q。

它很难看，因为它很难维护......括号内基本上有 3 个不同的子正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:55:30.877

使用单独的表达式来确保 @ 和 # 存在。一旦它们是，将它们删除并匹配其余的字符/数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:04:19.803

决定我最好把这个写成答案：

```
$text = "a9b#c@d";
$themAll = "#@";
$themAny = "0123456789";
echo (strspn($themAll, $text)==strlen($themAll) && strpbrk($text, $themAny)); 
```

对于维护和一些（有限的）扩展，这应该尽可能容易，尤其是`$themAll`列表较长时。

# android - 限制未经授权的用户在 Google Play 中下载 apk？

> ID：10828121
> 
> 赞同：1
> 
> 时间：2012-05-31T05:54:01.977
> 
> 标签：android, google-play, apk

由于推送通知（每当有新版本时）、apk 的安全性等原因，我打算将我的应用程序放到 Google Play（早期的 Android Market）中。而且由于 apk 受 Google play（付费 apks）保护，我放弃了下载我网站上的 apk（只有经过身份验证的人才能下载 apk）

实际上，它是具有用户名和登录访问权限的特定用户的商业应用程序。应用程序中的一切都很好，具有登录和安全机制

**我正在考虑一种方法来限制在安装自身时不在列表中的其他用户。** 我的问题是我们是否可以在从 Google Play 下载应用程序时设置任何类型的过滤器或身份验证机制，它应该要求输入密码或类似的东西来过滤未经授权的用户下载应用程序。

我的最终目标是我不希望人们在不必要的下载后尝试它

任何人都可以帮助尝试过android市场中所有这些的人吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T06:18:59.960

好的。。一件接一件的事情。。

*   谷歌提出[了他们的许可机制](http://developer.android.com/guide/market/licensing/index.html)。但是应用程序需要互联网连接，否则它不需要它，这是不利的。如果我做对了，您确实需要连接到服务器，所以这对您来说不是问题。在我看来，您已经熟悉这种方法。
*   现在不存在用于保护在 Google Play 上下载或查看应用程序的密码机制。
*   您可以使用 IMEI（如果您不考虑在没有它的平板电脑上使用应用程序）、WLAN MAC、BT MAC 地址或这些方法的某种奇异组合来识别用户，并将其用作身份验证。
*   在我看来，最好的解决方案是让市场上的人下载它。您的应用程序已经在对服务器使用某种身份验证机制（用户/密码）。因此，如果用户需要做的第一件事是登录，那么如果没有通过，任何功能都会被禁用。如果通过，您已经知道谁是您的用户以及他拥有什么权限。

问题就在这里，如果在身份验证之前禁用该屏幕之后的所有内容，那么当用户没有登录/通过下载应用程序时，我不太确定您有什么顾虑。用户将下载（如果他们找到它..），他们将安装，尝试使用它，看到没有凭据是不可能的并卸载它。

希望它有所帮助..我会尝试在一段时间内添加更多链接..

# ios - 除了推送来唤醒 iOS 应用程序之外的其他方式？

> ID：10828129
> 
> 赞同：1
> 
> 时间：2012-05-31T05:54:44.507
> 
> 标签：ios, push

是否有人创建了一个 iOS 应用程序来响应来自推送 (APNS) 以外的外部源的事件或触发器？例如，iOS 应用可以订阅远程主题或队列吗？或者监听 HTTP 或套接字请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:29:38.797

不。

在以下情况下可以启动应用程序：

1.  用户点击了图标
2.  用户选择了推送通知/本地通知
3.  应用程序支持 url-schemes 并在打开 URL 时启动
4.  应用程序支持查看/编辑文档，并且用户已选择您的应用程序来执行此操作

如果有人有其他想法 - 请随时编辑或添加评论。

应用程序可以在后台运行并具有活动的 http-connection/socket。但它无法自动打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:50:42.330

除了用户操作和推送/本地通知之外，如果应用程序已表明它想要监视此类事件，则应用程序可以通过显着的位置更改唤醒。

请参阅：[CLLocationManager 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#startMonitoringSignificantLocationChanges)

寻找一个名为`startMonitoringSignificantLocationChanges`. 如果在您的应用程序不在前台或根本没有运行时发生重大位置更改，您的应用程序将在后台启动，允许应用程序执行仅后台操作（例如，不会运行视图代码）。

但是，如果由于位置发生重大变化而启动该应用程序，则该应用程序将不会启动到前台。

# networking - MPLS VPN中的BGP控制平面信息

> ID：10828132
> 
> 赞同：1
> 
> 时间：2012-05-31T05:55:04.950
> 
> 标签：networking, network-protocols, vpn, bgp

我正在学习 MPLS VPN 网络。据我了解，IGP 在所有核心路由器（P 和 PE）上运行，而 BGP 在所有 PE 路由器上运行。一旦 IGP 向所有路由器传达了可达性信息，并且所有路由器都已收敛，则使用 LDP 分配用于传输数据包的确切标签。

我的疑问是，BGP 控制数据包是如何在 PE 之间传输的。

有两种选择。
1.在PE之间使用标签交换路径。
2.通过P路由器使用普通IP转发。

实际使用了这两种方法中的哪一种？
如果两者都可以使用，PE路由器如何决定使用哪一个？
我们必须在路由器中手动配置它吗？
对于瞻博网络、思科等不同的路由器，这些答案是否有所不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:40:47.863

> 我的疑问是，BGP 控制数据包是如何在 PE 之间传输的。有两种选择：
> 
> 1.  在 PE 之间使用标签交换路径。
> 2.  通过 P 路由器使用正常的 IP 转发。
> 
> 如果两者都可以使用，PE路由器如何决定使用哪一个？

如果 LSP 可用，则 LSP 优先于每跳 IP 转发。

> 我们必须在路由器中手动配置它吗？

“它”是指为 BGP 控制平面信息配置 LSP 的使用吗？它在 Cisco IOS 机器上自动发生

> 对于瞻博网络、思科等不同的路由器，这些答案是否有所不同？

Cisco 将通过 LDP LSP 发送 BGP 信息，只要 BGP 端点前缀具有标签绑定。

我不记得 Juniper 的行为，它们对 LSP 行为提供了更精细的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:13:48.763

BGP 使用 TCP 建立连接并将其数据包发送给他的邻居。这意味着您的邻居需要在第 3 层 (ip) 级别上看到对方。

我希望这是您需要的信息。

有关此问题的更多详细信息，请参见：[http](http://en.wikipedia.org/wiki/Border_Gateway_Protocol) ://en.wikipedia.org/wiki/Border_Gateway_Protocol 部分“操作”。

# c# - 国际化组合框

> ID：10828135
> 
> 赞同：1
> 
> 时间：2012-05-31T05:55:32.593
> 
> 标签：c#, winforms, internationalization, combobox

我们有一个目前正在国际化的 WinForms 应用程序。虽然有些控件很容易被 i18n 编辑，但带有下拉项目的组合框给我们带来了困难。使用包含以下下拉项目的组合框：

```
year
month
day 
```

目前，这些项目在设计器中提供，文本值保存在应用程序数据库中。我知道一开始并不是什么好主意，但我们现在就是这样。

我怀疑我需要寻找一个键/值类型列表并将其作为数据源分配给组合框。问题是完成这项任务的最佳实践是什么？

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:12:08.680

当您使用组合框时，我们有两个属性，一个是“文本”和“值”。您必须始终从代码中设置本地化资源文件和值字段中的文本值。

```
cbxJobTile.Item.Text  ="Localized string from resource file";
cbxJobTile.Item.Value = "SoftwareEngineer"; 
```

# xslt - 在xslt中的元素下分组相同的标签

> ID：10828142
> 
> 赞同：1
> 
> 时间：2012-05-31T05:55:45.160
> 
> 标签：xslt, xpath, xslt-1.0

我正在使用 XSLT，源代码看起来像这样。

来源：

```
 <Data>
             <AB>all</AB>
             <AB>all2</AB>
             <CD>hhhhhh</CD>
             <DE>hhhshhh</DE>                
        </Data> 
```

需要编写 XSLT 以获取输出为

```
 <Info>
        <XXX>
        <TTT value="all"/>
        <TTT value="all2"/>
        </XXX>
    <!--    ....-->
    <!--    ..to het all the elements..   -->

   </Info> 
```

我必须写 xslt 来匹配标签。

```
 <xsl:template match="AB">

    </xsl:template> 
```

我可以通过匹配数据标签来做到这一点。

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="xml" indent="yes"/>

         <xsl:template match="Data">
        <info>
          <XXX>
          <xsl:for-each select="AB">
          <TTT>
          <xsl:attribute name="value">
            <xsl:value-of select="."/>
          </xsl:attribute>
          </TTT>
          </xsl:for-each>
          </XXX>
        </info>
          </xsl:template>

    </xsl:stylesheet> 
```

任何人都可以通过匹配 AB 标签来帮助我如何做到这一点

```
 <xsl:template match="AB">

    </xsl:template> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:30:07.910

我想您是在问如何使用**xsl:apply-templates**。如果是这样，您的 XSLT 将如下所示

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="Data">
      <info>
         <XXX>
            <xsl:apply-templates select="AB"/>
         </XXX>
      </info>
   </xsl:template>

   <xsl:template match="AB">
      <TTT value="{.}"/>
   </xsl:template>
</xsl:stylesheet> 
```

**还要注意AB**模板中使用属性值模板来简化 XSLT。

如果您还要求其他非 AB 元素不变地输出，则可以在 XSLT 中使用恒等变换

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="Data">
      <info>
         <XXX>
            <xsl:apply-templates select="AB"/>
         </XXX>
         <xsl:apply-templates select="node()[not(self::AB)]" />
      </info>
   </xsl:template>
   <xsl:template match="AB">
      <TTT value="{.}"/>
   </xsl:template>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>   
</xsl:stylesheet> 
```

这也将匹配所有非 AB 元素，在 XXX 元素之后输出。在您的情况下，它将输出以下内容：

```
<info>
   <XXX>
      <TTT value="all" />
      <TTT value="all2" />
    </XXX>
    <CD>hhhhhh</CD>
    <DE>hhhshhh</DE>
</info> 
```

当然，没有理由不能让其他模板匹配 CD 或 DE 等元素来转换它们。

# c# - FileNotFoundException 由于非英文字符

> ID：10828145
> 
> 赞同：0
> 
> 时间：2012-05-31T05:56:09.223
> 
> 标签：c#, asp.net-mvc-3, filenotfoundexception

我有一个图像控制器如下：

```
public ActionResult ViewImage(int id, string imageType = "image")
{
    var item = GetItem(id);
    string fileContent;
    string mimeType;
    string fileName;

    if (imageType == "thumb")
    {
        fileContent = contestImage.ThumbNail.Image;
        mimeType = contestImage.ThumbNail.ImageMimeType;
        fileName = contestImage.ThumbNail.ImageFileName;
    }
    ....

    var res = File(fileContent, mimeType, fileName);

    return res;

} 
```

`FileNotFoundException`即使文件在那里，我也得到了。但是我看到该文件有一些土耳其语字符。

我该如何解决这个问题？

**编辑：我可以看到路径是正确的，并且文件实际上在那里。但是给我一个带有 FileNotFoundException 的 500。我还看到其中一个土耳其字符被转换为英文**

# c - 澄清：在数据段上分配了哪些数据/值

> ID：10828151
> 
> 赞同：0
> 
> 时间：2012-05-31T05:56:40.323
> 
> 标签：c, pointers

除了全局和静态数据之外，数据段上还分配了什么？

我记得在某处读到常量字符串也分配在数据段上，并且当引用相同的字符串常量时使用相同的内存

前任：

```
char* returnPointer()
{
   char *p = "hello world"

   //some code

   return p;
}

void foo()
{
   char *s = "hello world"
  //some code
} 
```

在上面的代码中，

1.  是否在数据段或堆栈上分配了常量“hello world”的内存（就像任何其他局部变量一样）？

2.  如果在数据段上分配，p 和 s 是否都指向同一个位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:59:20.487

> **是否在数据段或堆栈上分配了常量“hello world”的内存（就像任何其他局部变量一样）？**

不，它被分配在一些只读实现定义的内存区域中。C 标准并没有准确定义它应该存储在哪里。它仅保证字符串文字将具有***静态存储持续时间***，并且不应由用户程序修改。

> **如果在数据段上分配，两者是否都`p`指向`s`同一个位置？**

这完全取决于所使用的编译器的效率。一个高效的编译器可能只优化和分配一个字符串，而另一个编译器可能不会这样做。

无论如何，您应该依赖这些行为，因为它们与语言的用户无关，它们是用户程序不应该依赖的实现细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T05:59:55.770

> 是否在数据段或堆栈上分配了常量“hello world”的内存（就像任何其他局部变量一样）？

这是特定于编译器的，但通常字符串文字存在于初始化数据段上（通常是初始化数据段的特殊只读部分）。我不知道字符串文字可以合理地存在于堆栈上的任何架构。

> 如果在数据段上分配，p 和 s 是否都指向同一个位置？

这取决于编译器。

当我使用 gcc 4.4.6 编译您的代码时，我看到以下内容：

```
 .section        .rodata
.LC0:
        .string "hello world"
        .text
.globl returnPointer
        .type   returnPointer, @function
returnPointer:
.LFB0:
        .cfi_startproc
        ...
        movq    $.LC0, -8(%rbp)
        ...
        ret
        .cfi_endproc
.LFE0:
        .size   returnPointer, .-returnPointer
.globl foo
        .type   foo, @function
foo:
.LFB1:
        .cfi_startproc
        ...
        movq    $.LC0, -8(%rbp)
        ...
        ret
        .cfi_endproc
.LFE1:
        .size   foo, .-foo
        .ident  "GCC: (GNU) 4.4.6 20110731 (Red Hat 4.4.6-3)" 
```

在这里，字符串文字存储在只读数据 ( `.rodata`) 部分中。编译器足够聪明，可以意识到完全相同的文字在编译单元中被使用了两次，并且它只将它的一个副本放入`.rodata`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:59:44.050

对于您的第一个问题，答案是，“hello world”将存储在只读内存区域中。

对于您的第二个问题，答案是它可能会或可能不会。不能保证它们具有相同的地址。

下面还有一些信息：

**初始化数据段：**

初始化数据段，通常简称为Data Segment。数据段是程序虚拟地址空间的一部分，其中包含由程序员初始化的全局变量和静态变量。

请注意，数据段不是只读的，因为变量的值可以在运行时更改。

该段可以进一步分为初始化只读区和初始化读写区。

例如，由 C 中的 char s[] = “hello world” 定义的全局字符串和 main 之外的诸如 int debug=1 的 C 语句（即全局）将存储在初始化的读写区域中。而像 const char* string = “hello world” 这样的全局 C 语句使字符串文字“hello world”存储在初始化的只读区域中，而字符指针变量 string 则存储在初始化的读写区域中。

例如：静态 int i = 10 将存储在数据段中，全局 int i = 10 也将存储在数据段中

**未初始化的数据段：**

未初始化的数据段，通常称为“bss”段，以一个古老的汇编运算符命名，代表“由符号开始的块”。该段中的数据在程序开始执行前被内核初始化为算术0

未初始化的数据从数据段的末尾开始，包含所有初始化为零或在源代码中没有显式初始化的全局变量和静态变量。

例如一个变量声明为 static int i; 将包含在 BSS 段中。例如一个全局变量声明为 int j; 将包含在 BSS 段中。

# .net - 两位线程专家（Albahari 和 Reed Coopsey）对 UnObservedException 的观点存在冲突

> ID：10828154
> 
> 赞同：0
> 
> 时间：2012-05-31T05:56:59.287
> 
> 标签：.net, multithreading, .net-4.0, task-parallel-library

[阿尔巴哈里](http://www.albahari.com/)说——</p>

> 静态 TaskScheduler.UnobservedTaskException 事件为处理未处理的任务异常提供了最后的最后手段。通过处理此事件，您可以拦截否则会结束应用程序的任务异常，并提供您自己的逻辑来处理它们。

**参考：** [http ://www.albahari.com/threading/part5.aspx](http://www.albahari.com/threading/part5.aspx)

[@ReedCoopsey](https://stackoverflow.com/users/65358/reed-copsey)说——</p>

> 请注意，在任何情况下，UnobservedTaskException 都不会阻止应用程序关闭 - 您需要在任务内部处理异常，或者始终等待任务，如果您想阻止它关闭应用程序。

**参考：** [TaskScheduler.UnobservedTaskException 永远不会被调用](https://stackoverflow.com/questions/3973315/taskscheduler-unobservedtaskexception-never-gets-called#comment4249545_3973354)

* * *

我阅读了 Albahari 并注册了 UnObservedTaskException，当出现未处理的异常时，我的应用程序随之崩溃。我不确定我在理解这两位线程专家时是否犯了任何错误。有人可以告诉我，如果只听 UnObservedTaskException 事件并设置观察到的异常就可以确保应用程序不会关闭？我明白这应该是处理异常的最后手段，应该使用 try/catch 块或等待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:17:14.740

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.tasks.unobservedtaskexceptioneventargs.aspx)，此事件的 EventArgs 有一个`SetObserved()`方法：

> 将异常标记为“已观察”，从而防止它触发异常升级策略，默认情况下，该策略会终止进程。

所以你的两个来源都是正确的，在处理事件时，你有非默认选项来保持活力。

# authentication - 延长现有令牌的到期时间

> ID：10828158
> 
> 赞同：0
> 
> 时间：2012-05-31T05:57:32.970
> 
> 标签：authentication, facebook-graph-api

我想扩展我现有的令牌。

我通过服务器端调用进行了 facebook 身份验证，并在 60 天的时间内获得了 fb access_token。

然后第二天我打电话，[https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN](https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN)

在 FB 文档[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)他们说，

> 我们的平台每天只会延长一次过期时间，所以即使用户每天多次访问您的网站，令牌也会在第一次请求时延长

但是我没有延长时间就得到了相同的 access_token。

如何扩展我现有的令牌？

* * *

> 返回的 access_token 将有一个新的长寿命到期时间，但是，access_token 本身可能与之前授予的长寿命 access_token 相同，也可能不同。”</p>

您告诉返回的令牌将具有新的长寿命到期时间。

例如 EXISTING_ACCESS_TOKEN - 有效期为 50 天的有效令牌

[我使用查询https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN](https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN)拨打电话。

在该响应中，facebook 返回了相同的令牌和相同的 50 天有效期。50 天后，此令牌将过期。

我的问题是如何延长我的到期时间？或者这个查询有什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-31T08:38:17.920

> 但是我没有延长时间就得到了相同的 access_token。

当然你会这样做，因为这正是“场景 4”下描述的内容：[https ://developers.facebook.com/roadmap/offline-access-removal/#extend_token](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)

都在里面，你只需要阅读它;-)

> 如果您传递具有长期过期时间的 access_token，端点将简单地将相同的 access_token 传递回您，而不会更改或延长过期时间。[...] 如果您想刷新仍然有效的长期 access_token，您必须先获取一个新的短期用户 access_token，然后调用下面的相同端点。

# android - Android 和 iOS 中的 Phonegap - 从头开始 构建应用程序的建议

> ID：10828159
> 
> 赞同：1
> 
> 时间：2012-05-31T05:57:43.380
> 
> 标签：android, ios, cordova, directory

这只是个人知识，我将非常感谢您的意见。我想在 phonegap 中构建一个 Android/iOS 应用程序，基本上它是一个商业列表应用程序，每个商业列表都会有这些数据：

*   姓名
*   图片
*   地址
*   电话
*   地图位置 [纬度，经度]，所以我可以使用地图 API。

我想在应用程序中拥有所有目录列表，因此您可以“离线”使用它，当然不是地图，因为使用地图您必须在线。

所以我的问题是：

*   关于如何保存数据的建议，你推荐我阅读哪些主题
*   有什么方法可以购买/下载国家地图并将它们放在我的应用程序上，因此用户无需在线查看商家列表的位置。
*   你认为用phonegap来发展这个想法是个好主意吗？还是您推荐其他方法/框架？

我希望它很清楚，对不起我的英语不好！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:03:53.423

1.将数据保存在 SharePreferences 或 sqllite 中。2.使用google或bing maps api更容易。获取本地地图数据并更新它的成本很高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T06:08:32.323

1.  您可以使用[Sqlite 数据库](http://www.sqlite.org/quickstart.html)来存储数据。请阅读链接中提供的文档：http: [//docs.phonegap.com/en/1.7.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/1.7.0/cordova_storage_storage.md.html#Storage)。
2.  您可以在离线时使用 Google Maps API。但是在线时，您可以使用链接中提供的PhoneGapAPI：http: [//docs.phonegap.com/en/1.7.0/cordova_geolocation_geolocation.md.html#Geolocation](http://docs.phonegap.com/en/1.7.0/cordova_geolocation_geolocation.md.html#Geolocation)
3.  是的，您可以使用 phonegap，因为它是您应用程序的最佳方式。有关更多信息，请通过 PhoneGap 文档链接：[http ://docs.phonegap.com/en/1.7.0/index.html](http://docs.phonegap.com/en/1.7.0/index.html)

# solr - Solr 搜索查询方面仅返回 100 个结果

> ID：10828162
> 
> 赞同：11
> 
> 时间：2012-05-31T05:57:54.363
> 
> 标签：solr, lucene, solrnet, faceted-search

我正在使用查询调用托管在另一台机器上的 solr search。当我编写查询时，它会返回`numFound=2405`匹配的文档。我们有超过 10000 个文档被索引。但是返回的构面结果只有 100 个我作为构面字段获取的 id。

* * *

我的 solr 查询在这里（为了便于阅读而拆分）：

```
localhost:8983/solr/select/?
q="C"
&start=0&rows=10
&facet=on
&facet.field=currentEmployer
&facet.field=state
&facet.field=industry
&facet.field=education_university
&facet.field=workHistory_employer
&facet.field=id
&facet.mincount=1 
```

* * *

为什么会这样？请帮助我在哪里做错了？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-31T06:15:52.037

[facet.limit](http://wiki.apache.org/solr/SimpleFacetParameters#facet.limit)的默认值为100
添加此请求参数以改变返回的构面数。

负值意味着无限。

# ios - iOS 5 中使用 Storyboards 的 UIView 不会在 iPad 设备旋转时旋转内容

> ID：10828165
> 
> 赞同：5
> 
> 时间：2012-05-31T05:58:36.857
> 
> 标签：ios, uiview, uiviewcontroller, uistoryboard

我刚刚开始使用 Storyboards 和 iOS 5.1。我正在构建的应用程序使用导航控制器作为其根控制器，并且设计用于横向（它是一个内部企业应用程序）。

我创建了一个工作正常的单一视图：当模拟器改变方向时，内容会正确旋转以保持“正面朝上”。

然后我添加了一个新视图，那个视图*根本不*旋转；当设备旋转时，内容保持纵向（因此是横向）。

我查看了两个 UIViewControllers 和 UIViews 的设置，看不出它们之间有什么区别。关于我应该在哪里看的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T06:12:04.023

首先，故事板中的每个 UIViewController 都必须有一个与之关联的类。创建一个继承自 UIViewController 的新类，然后在情节提要中单击 uiviewcontroller，然后在该控制器的底部，单击右侧框并在类检查器中，将 UIViewController 替换为您创建的新类的名称.

然后，确保在您创建的每个视图控制器类中，您都实现了该方法

```
-(BOOL)shouldAutoRotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

只需让这个 deleate 方法在每个视图控制器中返回 YES，以确保它们的所有视图都以任何方向旋转。你做过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:57:41.373

这也困扰着我。我的应用程序在 iPad 模拟器中旋转，但不在实际 iPad 上。够奇怪的。我有一个带有三个选项卡的 UITabBarController。连接到选项卡栏的所有三个控制器都具有 shouldAutoRotateToInterfaceOrientation 方法，但其中只有两个（在导航控制器钻取 5 步后）没有。我也将方法添加到了这些方法中，现在它可以旋转了。

只是我的2美分。

# html - HTML表格中的样式

> ID：10828166
> 
> 赞同：0
> 
> 时间：2012-05-31T05:58:38.243
> 
> 标签：html, css

我想对我的特定应用以下样式，`td`但我不知道为什么它不能这样做

```
/*Style*/
font: 100%/1.4 "Alvi Nastaleeq", Verdana, Arial, Helvetica, sans-serif; color: black;

<td colspan="2" class="centerAlign border">ABC</td> 
```

请帮助这样做。提前致谢。

编辑：该类`centerAlign border`是所有其他类的类，`td`但我想在此单元格上应用特殊样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:08:06.893

这是为您的 td 元素创建的新样式

```
<style type="text/css">

.style1
{
font-size:100%;
font-family: "Alvi Nastaleeq", Verdana, Arial, Helvetica, sans-serif;
color: #00000;
}
</style> 
```

要使用它，只需修改您的 td

```
<td colspan="2" class="centerAlign border style1">ABC</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:09:11.943

您的字体大小不能使用 100%/1.4。无论如何，将您的样式包装在另一个类中并将其应用于您的元素：

```
 .font-style {
      font-family: "Alvi Nastaleeq", Verdana, Arial, Helvetica, sans-serif;         
      color: black;
      font-size: 13px;
 } 
```

HTML：

```
 <td colspan="2" class="centerAlign border font-style">ABC</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:09:50.400

**CSS**

```
.centerAlign.border{
font: 100%/1.4 "Alvi Nastaleeq", Verdana, Arial, Helvetica, sans-serif; color: black;
} 
```

**HTML**

```
<table>
    <tr>

<td colspan="2" class="centerAlign border">ABC</td>

    </tr>
</table> 
```

现场演示[http://jsfiddle.net/mWRMS/1/](http://jsfiddle.net/mWRMS/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T06:23:50.203

HTML

```
<table>
    <tr>
<td colspan="2" class="font">ABC</td>
    </tr>
</table> 
```

CSS

```
.font{

font-family:"Alvi Nastaleeq", Verdana, Arial, Helvetica, sans-serif; 
color: #000000;
font-size:13px;
} 
```

# layout - 行中的 div - 对齐到底部

> ID：10828168
> 
> 赞同：0
> 
> 时间：2012-05-31T05:58:46.317
> 
> 标签：layout, html, positioning

我的表单中的 div 定位有问题。我的页面包含一张纸。使用 div 布局如下。

在左侧的 div 中，有字段的描述。（它们共享相同的样式类）在右侧的 div 中，有字段。（他们共享相同的样式类）

![](../Images/1be1199decf374dadd802bc22f8f28bc.png)

验证后我的页面如下所示：

![](../Images/7edb9288476c1af6f822ac1d874dd6f5.png)

但我希望它看起来像这样：

![](../Images/c79af014ccbc27e63a6bf0b31641c392.png)

老实说，我想如何处理它，对于一个白人来说，我根本不知道该怎么做。我的页面几乎准备好了，所以我想以低成本解决这个问题。

[edit1]：我当前的 css 看起来很简单，如下所示：

```
div_on_left{
   clear: both;
   float: left;
   width: 440px;
   padding-top: 5px;
   padding-bottom: 8px;
}
div_on_right{
   float: left;
   width: 500px;
   padding-top: 3px;
   padding-bottom: 6px;
} 
```

[edit2]：我刚刚找到了一个解决方案（发布在下面），但我不喜欢它。如果左侧 div 的上下文太大，它将崩溃。那是由于

> 位置：绝对；

所以我想避免这个属性。

```
<html>
<head>
<style type="text/css">
.row
{
position:relative;
}
.left
{
font-size:100%;
position:absolute;
left:0px;
bottom:0px;
}
.right
{
font-size:200%;
position:relative;
left:150px;
bottom:0px;
}
</style>
</head>
<body>
<div class="row">
<div class="left">Left_1</div>
<div class="right">Right_1</div>
</div>

<div class="row">
<div class="left">Left_2</div>
<div class="right">Right_2</div>
</div>

<div class="row">
<div class="left">Left_3</div>
<div class="right">Right_3</div>
</div>
</html> 
```

它必须是一个普遍的问题。您如何处理出现在字段框上的带有验证的宽度表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:51:02.807

您的问题有一个解决方案，但它涉及`table-cell`布局。布局必须有一行和两个与底部对齐的内部单元格。这是一个 JSFiddle 示例：http: [//jsfiddle.net/cvbLC/](http://jsfiddle.net/cvbLC/)

我不知道您需要哪种浏览器支持，但这里有更多关于这个问题的信息：[http ://www.quirksmode.org/css/display.html](http://www.quirksmode.org/css/display.html)

# javascript - 用户脚本如何获得有关页面上 ajax 驱动更改的通知？

> ID：10828171
> 
> 赞同：1
> 
> 时间：2012-05-31T05:58:59.520
> 
> 标签：javascript, userscripts

给定网页上的项目随着时间的推移被 AJAX 调用更改，用户脚本如何在这些更改发生时得到通知？

想象一下 Facebook 新闻源。加载页面时，它有 12 个项目。这些项目被包装在`<li>`包含在`<ul>`. 当您向下滚动页面时，新`<li>`的数据块会加载到`<ul>`.

我想知道如何将这种更改通知用户脚本。

一个想法是不断地查询它`<ul>`，计算它的项目，然后观察这个数字是否变大。可能，但是要在更改发生时立即捕获更改，它可能必须经常运行以致成本太高。

另一个想法是找出触发加载的滚动位置，并注意这种变化。较便宜，但非常具体。

**我想知道是否有第三种选择。** 每当发生变化时都会通知我的东西。我不仅对提要感兴趣，而且更普遍地对这个概念感兴趣。给定页面上被 AJAX 调用更改的项目，用户脚本如何获得有关这些更改的通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:05:44.757

劫持发送方法

```
var oldSend = XMLHttpRequest.prototype.send;
XMLHttpRequest.prototype.send = function(){
    // do what you need; then send the request
    oldSend.apply(this, arguments);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:00:52.863

我认为您正在寻找的是 DOMSubtreeModified 事件。

这适用于 firefox chrome 和 IE >= 9，如果您在 facebook 上的脚本我猜测它是用于油脂猴/chrome 扩展？如果是这样的话，这应该没问题。

每当添加删除或更改子节点时，都会在节点上触发此事件

你可以使用它

```
.addEventListener ("DOMSubtreeModified", handler, useCapture); 
```

但我认为它不适用于 attachEvent。

这是有关它的更多信息。

[http://help.dottoro.com/ljrmcldi.php](http://help.dottoro.com/ljrmcldi.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:06:09.977

您是否有权访问更新页面内容的 Ajax 调用？通常，更好的方法是将调用附加到实际的 Ajax 调用。

如果使用 Jquery 发出请求，请使用 $.ajaxComplete() 或 $.ajaxSuccess() 来触发您的代码。这些将在请求完成时触发，因此当发生这种情况时，您可以检查内容是否已更改而不会花费太多。

```
$.ajaxSuccess(function() { //check for update and do something }); 
```

# iphone - 如何进行每小时位置更新？

> ID：10828172
> 
> 赞同：4
> 
> 时间：2012-05-31T05:59:02.593
> 
> 标签：iphone, ios, core-location

我正在构建一个基于位置的应用程序，但我讨厌打开位置服务图标。我每小时只需要一次坐标，但如果不说该应用程序是 VoIP 应用程序，我无法弄清楚如何做到这一点。是否有可能以 App Store 可接受的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:09:53.460

您可以`location`在`UIBackgroundModes`您的应用程序中使用，[请参阅文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)。

关于位置服务图标，我认为你应该离开它。这对您的用户来说是一个公平的反馈。用户必须知道其位置正在被跟踪，并且每次地理位置实际发生时让图标打开几秒钟是不公平的。（对我来说，这听起来像是应用程序被拒绝的情况）。

只要您对设备电池没有负面影响，用户就会很感激您让它知道您正在跟踪他的位置。

例如，OpenPaths 等应用程序让我的 iPhone 一直显示位置图标，并且对电池没有真正的负面影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T03:25:35.437

我会注册重要的位置更改更新。当更新发生时，将时间戳与上次更新进行比较。如果时间增量 > 60 分钟，则使用更新。最坏的情况：我**相信**你得到了位置指示器的轮廓。这告诉用户一种跟踪正在发生——但不是一直在发生，所以这不是电池问题，您不会收到太多支持请求。最佳情况：注册重大位置更改更新不显示指示器轮廓。但我不确定。完全没有图标可能是不可能的。

# c# - 如何获得屏幕的分辨率？对于 WinRT 应用程序？

> ID：10828179
> 
> 赞同：35
> 
> 时间：2012-05-31T05:59:56.997
> 
> 标签：c#, xaml, windows-8, windows-runtime

我想知道屏幕分辨率，以便我可以根据 Windows 8 应用程序中的分辨率设置元素的高度。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-31T06:56:26.173

这个怎么样？

```
var bounds = Window.Current.Bounds;

double height = bounds.Height;

double width = bounds.Width; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-15T13:25:27.577

获取当前窗口的边界很容易。但是如果你想为更大的屏幕设置一个大的字体大小（分辨率与 10 英寸设备相同，但屏幕是 27 英寸），这将无济于事。请参阅[缩放到不同的屏幕](http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different-screens.aspx) 我使用以下方法来检测屏幕大小并适当地更改文本块字体样式。

```
 void detectScreenType()
    {
        double dpi = DisplayProperties.LogicalDpi;
        var bounds = Window.Current.Bounds;
        double h;
        switch (ApplicationView.Value)
        {
            case ApplicationViewState.Filled:
                h = bounds.Height;
                break;

            case ApplicationViewState.FullScreenLandscape:
                h = bounds.Height;
                break;

            case ApplicationViewState.Snapped:
                h = bounds.Height;
                break;

            case ApplicationViewState.FullScreenPortrait:
                h = bounds.Width;
                break;

            default:
                return;
        }
        double inches = h / dpi ;
        string screenType = "Slate";
        if (inches < 10)
        {
            screenType = "Slate";
        } else if (inches < 14) {
            screenType = "WorkHorsePC";
        }
        else 
        {
            screenType = "FamilyHub";
        }
        ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;
        localSettings.Values["screenType"] = screenType;
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-14T14:49:21.800

然而，适用于所有其他类型的 Metro 应用程序的支持 DirectX 的应用程序的最佳选择可能是：

[http://blogs.microsoft.co.il/blogs/tomershamam/archive/2012/07/24/get-screen-resolution-in-windows-8-metro-style-application.aspx](http://blogs.microsoft.co.il/blogs/tomershamam/archive/2012/07/24/get-screen-resolution-in-windows-8-metro-style-application.aspx)

PS来吧，获取窗口大小来确定屏幕分辨率？捕捉/填充模式呢？这个世界太破碎了：-/

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-18T21:45:26.980

显然我还没有足够的代表来回复帖子，但关于@Krishna 的回答，可能值得注意的是，他的解决方案需要：

```
using Windows.UI.Xaml; 
```

对你们大多数人来说可能不是问题，但在我的情况下（试图从导入的库中获取执行应用程序的解决方案），默认情况下它不存在。

希望这对其他人有帮助...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-31T06:09:16.800

你在使用 XAML 吗？如果是这样也没关系。使用网格控件。它将填满所有可用空间。阅读[Jerry 的博客](http://blog.jerrynixon.com/2012/05/windows-8-why-i-choose-xaml-metro-over.html)，了解您可能希望使用 xaml 进行 WinRT 开发的原因。

# jquery - 想在 gwt 中使用 jquery SlickGrid

> ID：10828180
> 
> 赞同：1
> 
> 时间：2012-05-31T06:00:09.557
> 
> 标签：jquery, gwt, slickgrid

我想在 gwt 中使用 jquery SlickGrid。有人试过这个吗？目前丝网非常流行。但在我开始之前，如果有人已经使用它，请分享你的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:05:27.910

As GWT is a wrapper library. There is a [`gwt-jquery`](http://code.google.com/p/gwt-jquery/) - A GWT library that wraps the existing jQuery , jQuery UI and jQuery Mobile javascript libraries, to use `jQuery` with GWT.

I think GWT-Wrapper is still not developed for `SlickGrid`. This [thread](http://groups.google.com/group/slickgrid) somewhat confirm on the same.

# c - 这个程序中数组的行为是什么？

> ID：10828181
> 
> 赞同：-5
> 
> 时间：2012-05-31T06:00:12.403
> 
> 标签：c

```
#include<stdio.h>

main()
{
    int a[]={10,20,30,40,50};
    char *p;
    int i;

    p=(char*)a;
    for(i=0;i<8;i++)
    {
        printf("%d    %u\n",*p,p);
        p++;
    }
    return 0;
} 
```

请解释数组如何存储在内存中的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:21:08.493

您的数组存储在一个连续的内存块中：

```
index:      0       |       1       |      2       |      3        |      4
bytes: 0  1  2  3   |  4  5  6  7   |  8  9 10 11  |  12 13 14 15  | 16 17 18 19
values:    10       |      20       |      30      |     40        |      50 
```

这些问题将帮助你：
[数组静态声明中第一个元素的地址](https://stackoverflow.com/q/6472662/1168156)
[这个指针算法是如何工作的？](https://stackoverflow.com/q/2126421/1168156)

# android - SpannableStringBuilder 创建具有多种字体/文本大小等的字符串示例？

> ID：10828182
> 
> 赞同：91
> 
> 时间：2012-05-31T06:00:13.367
> 
> 标签：android, spannablestring, spannablestringbuilder

我需要创建一个放置在 TextView 中的字符串，它将显示如下字符串：

> 第一部分不加粗 **粗体** 其余不加粗

所以我想知道如何使用它[`SpannableStringBuilder`](http://developer.android.com/reference/android/text/SpannableStringBuilder.html)来做到这一点？

我可以使用三个 TextEdit 来完成此操作，但我想使用最佳解决方案。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-05-31T06:26:30.873

```
First Part Not Bold   BOLD  rest not bold 
```

您可以按照@Rajesh 的建议或按此执行此操作。

```
String normalBefore= "First Part Not Bold ";
String normalBOLD=  "BOLD ";
String normalAfter= "rest not bold";
String finalString= normalBefore+normalBOLD+normalAfter;
Spannable sb = new SpannableString( finalString );
sb.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), finalString.indexOf(normalBOLD)+ normalBOLD.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); //bold
sb.setSpan(new AbsoluteSizeSpan(intSize), finalString.indexOf(normalBOLD)+ normalBOLD.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);//resize size 
```

在 TextView 中显示

```
textview.setText(sb,  TextView.BufferType.SPANNABLE); 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2014-05-01T01:00:58.057

接受的答案很好（我赞成），但它未能按照提交者的要求使用 SpannableStringBuilder。因为我有一个 Builder 最有意义的案例，这里是代码（如果这对其他人有帮助，还可以更改文本的颜色）。请注意，您还可以将初始字符串提供给 SpannableStringBuilder 构造函数，但我在此处将其设置为使用“附加”以明确您可以在所需的“粗体”文本之前附加很多内容，然后如图所示记录开始。我怀疑这也是比接受的答案更快的代码。

```
SpannableStringBuilder longDescription = new SpannableStringBuilder();
longDescription.append("First Part Not Bold ");
int start = longDescription.length();
longDescription.append("BOLD");
longDescription.setSpan(new ForegroundColorSpan(0xFFCC5500), start, longDescription.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
longDescription.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), start, longDescription.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
longDescription.append(" rest not bold"); 
```

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2018-04-27T01:04:08.447

如果您使用的是 Kotlin，您可以使用[android-ktx](https://developer.android.com/kotlin/ktx)库执行以下操作

```
val s = SpannableStringBuilder()
        .append("First Part Not Bold ")
        .bold { append("BOLD") } 
        .append("Rest not bold") 
```

是 上的`bold`扩展功能`SpannableStringBuilder`。[您可以在此处](https://android.github.io/android-ktx/core-ktx/androidx.text/android.text.-spannable-string-builder/index.html)查看文档以获取可以使用的操作列表。

另一个例子：

```
val s = SpannableStringBuilder()
            .color(green, { append("Green text ") })
            .append("Normal text ")
            .scale(0.5, { append("Text at half size " })
            .backgroundColor(green, { append("Background green") }) 
```

`green`解析的 RGB 颜色在哪里。

甚至可以嵌套 span，因此您最终会得到一个嵌入式 DSL：

```
bold { underline { italic { append("Bold and underlined") } } } 
```

您需要在您的应用程序模块级别`build.gradle`中使用以下内容才能使其工作：

```
repositories {
    google()
}

dependencies {
    implementation "androidx.core:core-ktx:1.2.0"
} 
```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2016-03-21T13:07:53.797

从 API 21 SpannableStringBuilder 包括一个简单的方法来做到这一点。这是一个解决方案示例：

```
SpannableStringBuilder builder= new SpannableStringBuilder();
StyleSpan boldSpan = new StyleSpan(android.graphics.Typeface.BOLD);
builder.append("First Part Not Bold ")
              .append("BOLD ", boldSpan, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
              .append("rest not bold"); 
```

由于您很有可能不支持 API 21，因此您只能从该方法复制代码：

```
public SpannableStringBuilder append(CharSequence text, Object what, int flags) {
        int start = length();
        append(text);
        setSpan(what, start, length(), flags);
        return this;
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-05-31T06:20:50.293

使用[`Html`](http://developer.android.com/reference/android/text/Html.html)类在 TextView 中使用 HTML 代码：

```
Spanned styledText = Html.fromHtml("First Part Not Bold <b>BOLD</b> rest not bold");
textView.setText(styledText); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-08-05T20:35:30.103

此代码应将 html 粗体标记内的所有内容设置为粗体。它还会删除标签，因此只显示里面的内容。

```
 SpannableStringBuilder sb = new SpannableStringBuilder("this is <b>bold</b> and this is <b>bold too</b>  and this is <b>bold too, again</b>.");

        Pattern p = Pattern.compile("<b>.*?</b>", Pattern.CASE_INSENSITIVE);            
        boolean stop = false;
        while (!stop)
        {
            Matcher m = p.matcher(sb.toString());
            if (m.find()) {
                sb.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), m.start(), m.end(), Spannable.SPAN_INCLUSIVE_INCLUSIVE);
                sb.delete(m.end()-4, m.end());
                sb.delete(m.start(), m.start() + 3);
            }
            else
                stop = true;
        } 
```

这段代码也可以适配其他html风格的标签，比如Superscript（sup标签）等。

```
 SpannableStringBuilder sb = new SpannableStringBuilder("text has <sup>superscript</sup> tag");

        Pattern p = Pattern.compile("<sup>.*?</sup>", Pattern.CASE_INSENSITIVE);            
        boolean stop = false;
        while (!stop)
        {
            Matcher m = p.matcher(sb.toString());
            if (m.find()) {
                sb.setSpan(new SuperscriptSpan(), m.start(), m.end(), Spannable.SPAN_INCLUSIVE_INCLUSIVE);
                sb.delete(m.end()-6, m.end());
                sb.delete(m.start(), m.start() + 5);
            }
            else
                stop = true;
        } 
```

要设置颜色，只需将 ForegroundColorSpan 与 setSpan 一起使用。

```
sb.setSpan(new ForegroundColorSpan(Color.rgb(255, 0, 0)), m.start(), m.end(), Spannable.SPAN_INCLUSIVE_INCLUSIVE); 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-06-18T08:12:30.307

我们也可以使用[SpannableStringBuilder](https://developer.android.com/reference/android/text/SpannableStringBuilder.html)和[TextAppearanceSpan](https://developer.android.com/reference/android/text/style/TextAppearanceSpan.html)来完成。请按照以下步骤来实现。

1.  在 中创建样式`styles.xml`。

```
<style name="BoldStyle">
   <!-- Can add other styling attributes -->
   <item name="android:textStyle">bold</item>
   ......
</style>
```

2.  使用下面的代码。

```
SpannableStringBuilder builder = new SpannableStringBuilder("First Part Not Bold BOLD rest not bold");
builder.setSpan(new TextAppearanceSpan(this, R.style.BoldStyle), 20, 24, 0);
((TextView)findViewById(R.id.tv7)).setText(builder);

```

就是这样。希望它会帮助某人。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-12-24T12:54:01.657

所以我知道这已经解决了，即使按照 SpannableStringBuilder 的要求，但如果你想更动态地构建一个字符串，我想我会提出这个问题。

```
// Stuff needed
TextView DataTextView = (TextView)rootView.findViewById(R.id.DataView);
String Fields[] = {...database column names as strings... "x","y"};

String DataString = new String();   

int start,stop;     // Start and Stop of formatting

// Final Result
SpannableStringBuilder coloredString = new SpannableStringBuilder(); 

SpannableString temp;       // Small segment of colored string
for (int i =0; i < Fields.length; i++)
{
    if (database_result.containsKey(Fields[i]))  // Be sure a field exists in the ContentValues
    {
            DataString = Fields[i]+": ";
        start = DataString.length();
        DataString = DataString+ +database_result.getAsInteger(Fields[i])+" ";
        stop= DataString.length();
        temp = new SpannableString(DataString);
        temp.setSpan(new ForegroundColorSpan(Color.WHITE),start, stop, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        coloredString.append(temp);
    }   
}
DataTextView.setText(coloredString); 
```

database_result 是我从返回的 SQL 查询的 Cursor 类型构造的 ContentValues 类型。我遇到的唯一问题是起初它只是第一个部分的 ColorSpaning。每次您想在循环中使用一个（或任何其他类型的跨度）时，您都需要声明一个新的 ForegroundColorSpan 。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-10-17T11:08:55.273

您可以在 kotlin 中加粗并调整字符串的一部分

```
val s = SpannableStringBuilder()
    .append("First Part Not Bold And No Resize ")
    .bold { scale(1.5f, { append("Second Part By Bold And Resize " )}) } 
    .append("Third Part Not Bold And No Resize")

yourTextview.text = s 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-10T14:04:26.407

既然可以使用 SpannableBuilder，为什么还要使用 SpannableStringBuilder？（[https://gist.github.com/qtyq/90f9b4894069a8b3676c](https://gist.github.com/qtyq/90f9b4894069a8b3676c)）

```
SpannableString ss = SpannableBuilder.init("First Part Not Bold BOLD rest not bold")
                                     .makeBold("BOLD")
                                     .create() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-04T01:12:32.830

对于`Xamarin.Android`：

```
SpannableStringBuilder TextoFormateado = new SpannableStringBuilder();
                TextoFormateado.Append("Not Bold");
                int start = TextoFormateado.Length();

                TextoFormateado.Append("Bold and Red");
                TextoFormateado.SetSpan(new ForegroundColorSpan(new Color(255, 0, 0, 149)), 
                    start, TextoFormateado.Length(), SpanTypes.ExclusiveExclusive);
                TextoFormateado.SetSpan(new StyleSpan(TypefaceStyle.Bold), 
                    start, TextoFormateado.Length(), SpanTypes.ExclusiveExclusive);

                TextoFormateado.Append("Not bold");

                TxtFinalText.TextFormatted = TextoFormateado; 
```

# c++ - sybase 客户端库 libsybdb.so 挂在 pollsys 中

> ID：10828185
> 
> 赞同：1
> 
> 时间：2012-05-31T06:00:20.970
> 
> 标签：c++, sql, sap-ase

我的 C++ 应用程序使用 libsybdb.so sybase 共享库连接到 Sybase 数据库。我在 Solaris 10 Sparc OS 中运行它。即我的应用程序使用库 libsybdb.so 提供的 API 在 sybase 数据库中执行操作（特别是批量复制）。C++ 应用程序解析输入文件并使用 bulkcopy 将解析后的数据复制到数据库中（为此，libsybdb.so 提供了 API）。

通常批量复制会在几分钟内完成，但有时需要 1 小时才能完成。当它很慢时，我拿了一个应用程序的 pstack。下面给出。

```
fd4ce294 pollsys  (ffbcfbd8, 1, ffbcfb28, 0)
fd464b2c poll     (ffbcfbd8, 1, 3e8, 10624c00, 0, 0) + 7c
fe699ce8 sybnet__complete_io (2d8c84, 3e8, 0, fffffffd, 0, 2d8c20) + 2a0
fe66bafc read_buffer (2d6d60, ffbcfca4, ffffd8f1, 0, fffffff6, fe7454c0) + 36c
fe669ec8 recvfill (2d6d60, ffbcfd04, 0, 0, 2d6850, 2d6d60) + 40
fe669e64 recvserver (2d6d60, 2d6d68, 1, 1, 0, 1) + 70
fe65a384 dbdoneinproc (2d6d60, 0, 0, 0, 1, 1) + 44
fe66447c dbsqlok  (2d6d60, 2d54, f91cc, 0, 2d6d8c, 0) + 394
<<application code functions>> 
```

Pstack 是在问题发生时以 1 分钟的固定间隔进行的。堆栈是一样的。

显示的所有方法（如 dbsqlok、sybnet__complete_io）都属于 libsybdb.so，除了 poll 和 pollsys（它们是系统调用），它们正在触发 pollsys 的执行，这被调用了数千次，这使得它变慢了。虽然最终解决了对 pollsys 的调用并且没有数据丢失，即加载成功。我想知道为什么它很慢，为什么 pollsys 被多次调用？？？此外，当批量复制工作正常时，调用 ti pollsys 最少，即大约 300 次调用。

提前致谢。

# java - 通过表单传递输入并在 servlet 中接受，在 Jsp 中重定向以显示结果。但我有一些问题

> ID：10828186
> 
> 赞同：-1
> 
> 时间：2012-05-31T06:00:28.567
> 
> 标签：java, jsp, servlets

> 这是我的表格。

**form10.html**

```
<form method="get" action="./a"><br>
 FirstName: <input type="text" name="txtname"><br>
 LastName:<input type="text" name="txtlast"><br>
Address:<input type="text" name="txtadd"><br>
<input type="submit" value="submit"><br>
 </form> 
```

> 这是我的 servlet 页面

**Process10.java**

```
 PersonBean p1= new PersonBean();

    p1.setfn(req.getParameter("txtname"));
    fn=p1.getfn();
    req.setAttribute("fn", fn);

    p1.setln(req.getParameter("txtlast"));
    ln=p1.getln();
    req.setAttribute("ln", ln);

    p1.setfn(req.getParameter("txtadd"));
    ca=p1.getca();
    req.setAttribute("ca", ca);

req.setAttribute("p",p1);
RequestDispatcher rd=req.getRequestDispatcher("/display10.jsp");
rd.forward(req,res);
} 
```

}

> 这是我的豆子

**PersonBean.java**

```
public PersonBean()
{
    setfn(fn);
    setln(ln);
    setca(ca);
}
public String getfn()
{
    return(fn);
}
public String getln()
{
    return(ln);
}
public String getca()
{
    return(ca);
}

public void setfn(String newfn)
{
    this.fn=newfn;
}
public void setln(String newln)
{
    this.ln=newln;
}
public void setca(String newca)
{
    this.ca=newca;
} 
```

}

> 这是我的 Jsp 页面

**显示10.jsp**

```
<html>
<head><title></title></head><BR>

<body>
<B>Firstname:<%=p1.fn%></b><BR>
<b>Lastname:<%=p1.ln%></b><BR>
<b>Address:<%=p1.ca%></b><BR>

</body>
</html> 
```

> 这是我的 Web.xml

**web.xml**

```
<description>
  Servlet and JSP Examples.
</description>
<display-name>Servlet and JSP Examples</display-name>

    <servlet>
  <servlet-name>jsp</servlet-name>
  <servlet-class>Process10</servlet-class>
   </servlet>
<servlet-mapping>
  <servlet-name>jsp</servlet-name>
  <url-pattern>/a</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:46:24.557

您无法以编写方式访问该属性。如果您想在您的页面上看到该值，您可以使用 el：

```
${p.fn} 
```

或者如果你不喜欢 el 你可以这样做：

```
<%= request.getAttribute("p").getFn() %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:05:36.967

我猜这个但是这个

```
Firstname:<%=p1.fn%>
Lastname:<%=p1.ln%>
Address:<%=p1.ca%> 
```

应该是这个

```
Firstname:<%=p.fn%>
Lastname:<%=p.ln%>
Address:<%=p.ca%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T20:13:38.450

你好，不知道你还有没有问题。但如果你有，我会改变一些东西。我建议您更改 servlet 映射。（我之前没有看你的web.xml）但是如果你检查tomcat的web.xml你会看到已经定义了同名的servet。

```
<servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
        <param-name>fork</param-name>
        <param-value>false</param-value>
    </init-param>
    <init-param>
        <param-name>xpoweredBy</param-name>
        <param-value>false</param-value>
    </init-param>
    <load-on-startup>3</load-on-startup>
</servlet> 
```

接下来我建议您更改的是制作包并将servlet类放入该包中，并且在web.xml中您需要指定完整的类名而不仅仅是Process10。我希望这将有所帮助。

# xml - 在 Go 中的元素中编组任意 XML 属性？

> ID：10828187
> 
> 赞同：2
> 
> 时间：2012-05-31T06:00:30.163
> 
> 标签：xml, go

我需要在运行时在元素上编组额外的属性。我试过这个：

```
type Meh struct {
    XMLName xml.Name
    Attrs []xml.Attr
}

Meh{
    Attrs: []xml.Attr{
        xml.Attr{xml.Name{Local: "hi"}, "there"},
    },  
} 
```

但是这些字段被视为新元素：

```
<Meh><Attrs><Name></Name><Value>there</Value></Attrs></Meh> 
```

如果我将标签添加`xml:",attr"`到该`Attr`字段，它需要一个`[]byte`或`string`指定单个属性的内容。

如何在运行时指定属性？如何注释类型以为此提供字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:11:30.397

您可以尝试直接使用模板。例子：

```
package main

import (
    "bytes"
    "encoding/xml"
    "fmt"
    "text/template"
)

type ele struct {
    Name  string
    Attrs []attr
}

type attr struct {
    Name, Value string
}

var x = `<{{.Name}}{{range $a := .Attrs}} {{$a.Name}}="{{xml $a.Value}}"{{end}}>
</{{.Name}}>`

func main() {
    // template function "xml" defined here does basic escaping,
    // important for handling special characters such as ".
    t := template.New("").Funcs(template.FuncMap{"xml": func(s string) string {
        var b bytes.Buffer
        xml.Escape(&b, []byte(s))
        return b.String()
    }})
    template.Must(t.Parse(x))
    e := ele{
        Name: "Meh",
        Attrs: []attr{
            {"hi", "there"},
            {"um", `I said "hello?"`},
        },
    }
    b := new(bytes.Buffer)
    err := t.Execute(b, e)
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Println(b)
} 
```

输出：

```
<Meh hi="there" um="I said &#34;hello?&#34;">
</Meh> 
```

# xquery - 在 Xquery 中传递参数

> ID：10828189
> 
> 赞同：3
> 
> 时间：2012-05-31T06:00:51.637
> 
> 标签：xquery

让我们考虑一个示例代码

```
declare function local:topic(){

    let $forumUrl := "http://www.abc.com"
    for $topic in $rootNode//h:td[@class="alt1Active"]//h:a

        return
            <page>{concat($forumUrl, $topic/@href, '')}</page>

};

declare function local:thread(){

    let $forumUrl := "http://www.abc.com"
    for $thread in $rootNode//h:td[@class="alt2"]//h:a

        return
            <thread>{concat(forumUrl, $thread/@href, '')}</thread>

}; 
```

我可以在此代码中传递任何参数，而不是重复 "$forumUrl" 。如果可能，请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T07:52:43.550

这肯定是可能的，您可以将其传入或将其声明为“全局”变量：声明的变量：

```
declare variable $forumUrl := "http://www.abc.com";
declare variable $rootNode := doc('abc');
declare function local:topic(){
    for $topic in $rootNode//td[@class="alt1Active"]//a

        return
            <page>{concat($forumUrl, $topic/@href, '')}</page>

};

declare function local:thread(){

    for $thread in $rootNode//td[@class="alt2"]//a

        return
            <thread>{concat($forumUrl, $thread/@href, '')}</thread>

}; 
```

或者您将 URL 作为参数传递：

```
declare variable $rootNode := doc('abc');

declare function local:topic($forumUrl){
    for $topic in $rootNode//td[@class="alt1Active"]//a

        return
            <page>{concat($forumUrl, $topic/@href, '')}</page>

};

declare function local:thread($forumUrl){

    for $thread in $rootNode//td[@class="alt2"]//a

        return
            <thread>{concat($forumUrl, $thread/@href, '')}</thread>

};
local:topic("http://www.abc.de") 
```

注意我从您的示例中删除了“h：”命名空间并添加了`$rootNode`变量。

希望这有帮助。

XQuery 函数的一般参数可以指定如下：

`local:foo($arg1 as type) as type` 例如，类型可能是：

*   `xs:string`一个字符串
*   `xs:string+`至少一个字符串的序列
*   `xs:string*`任意数量的字符串
*   `xs:string?`长度为零或一个字符串的序列

函数可以有任意多的参数，参数的类型可以省略。

也可以键入函数返回值，在您的示例的上下文中，签名可能是：

*   `declare function local:thread($forumUrl as xs:string) as element(thread)+`

定义 local:thread 只接受一个字符串并返回一个非空的线程元素序列。

迈克尔

# serialization - 使用 JPA 时从一个 VM 序列化到另一个 VM 是什么意思

> ID：10828191
> 
> 赞同：0
> 
> 时间：2012-05-31T06:00:53.707
> 
> 标签：serialization, jpa-2.0

我正在阅读 JPA 2.0。我遇到一个句子

```
We have used the transient modifier instead of the @Transient annotation so that 
if the Employee gets serialized from one VM to another then the translated name 
will get reinitialized to correspond to the locale of the new VM.

@Entity
public class Employee {
    @Id private int id;
    private String name;
    private long salary;
    transient private String translatedName;
    // ...
    public String toString() {
        if (translatedName == null) {
            translatedName = ResourceBundle.getBundle("EmpResources").getString("Employee");
        }
        return translatedName + ": " + id + " " + name;
    }
} 
```

我的理解是，当我们使用 @Entity 注释并且容器遇到它时，它会调用 JPA 提供者来做这些事情。就像将 id 映射到数据库中的 ID 列一样。虽然我们没有提到姓名和薪水上的@Column 注解，但默认情况下它映射到数据库中的 NAME 和 SALARY 列。我们在translatedName 上使用了transient，因此JAP 保持原样，而不是对其应用映射。它只是这个类中的一个字段。但我无法理解这句话

```
if the Employee gets serialized from one VM to another 
```

有人请给我解释一下吗？还告诉我上面关于 JAP 工作流程的定义是正确的吗？就像容器遇到@Entity 注解时会发生什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:23:17.880

当一个类实现`java.io.Serializable`接口时，这个类的实例是可序列化的。这意味着 JVM 可以将对象转换为字节序列。这些字节可以通过网络发送，或者保存在磁盘上，并且可以被另一个 VM 读取并转换回 Java 对象。

如果一个字段有`transient`Java 关键字，则意味着该字段将被此序列化机制忽略。该字段不会被序列化。

带有注释`@Transient`的字段被 JPA 视为非持久字段。它不会将其保存在数据库中，也不会从数据库中加载它。但是如果对象被发送到另一个JVM，它将被序列化。

Java`transient`关键字自动生成一个字段`@Transient`。这意味着一个`transient`字段不会被序列化，也不会被 JPA 保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:45:44.570

在“JEE5 世界”中，您可以像使用传输对象一样使用分离的实体。（我不判断这是否是一个好主意！）

因此，您可以调用例如一个服务方法（例如 EJB 3 SLSB 方法），该方法使用关于序列化的通常远程调用语义远程返回一个 Employee 实例。

应该注意的是，如果 Employee 的实例被成功序列化，那么您的 Java 运行时可能会被破坏，因为该类没有实现 Serializable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T05:20:41.807

如果您不想将实体的状态保存到 DB 并且也不希望将状态转移到另一个 jvm，请使用`Transient`关键字。

如果您不想将实体的状态保存到 DB，但希望将状态转移到另一个 jvm，则使用`@Transient`注释。

# javascript - parent.window.location.pathname 返回未定义？

> ID：10828192
> 
> 赞同：0
> 
> 时间：2012-05-31T06:01:00.197
> 
> 标签：javascript

```
if ( parent.window.location.pathname.indexOf ( "login" ) > 0 )
    var selfUrl = 'http://www.example.com';
else
    var selfUrl = unescape(parent.window.location.pathname); 
```

这是登录问题的重定向，但 parent.window.location.pathname 返回未定义。

更奇怪的是，我们在我们的开发服务器上运行相同的代码，并且一切正常。相同的浏览器，相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:46:40.473

父窗口是否在同一个域中？如果没有，那么您无权访问`parent.location`. 我忘记了在这种情况下有多少`location`是不可访问的（我认为您没有读取权限，但您可能有一些写入权限），但您肯定无法访问路径名。

# c - SPI（串行端口通信）问题，卡在 ioctl()

> ID：10828194
> 
> 赞同：4
> 
> 时间：2012-05-31T06:01:12.157
> 
> 标签：c, linux-device-driver, embedded-linux, ioctl, atmel

我正在尝试使用 SPIDEV 驱动程序访问 SPI 传感器，但我的代码卡在 IOCTL 上。

我在 SAM9X5EK（安装 AT91SAM9G25）上运行嵌入式 Linux。该设备连接到 SPI0。我在 menuconfig 中启用了 CONFIG_SPI_SPIDEV 和 CONFIG_SPI_ATMEL 并将正确的代码添加到 BSP 文件中：

```
static struct spi_board_info spidev_board_info[] {
    {
        .modalias = "spidev",
        .max_speed_hz = 1000000,
        .bus_num = 0,
        .chips_select = 0,
        .mode = SPI_MODE_3,
    },
    ...
};
spi_register_board_info(spidev_board_info, ARRAY_SIZE(spidev_board_info)); 
```

1MHz 是传感器接受的最大值，我尝试了 500kHz，但在 Linux 启动期间出现错误（显然太慢了）。.bus_num 和 .chips_select 应该正确（我也尝试了所有其他组合）。SPI_MODE_3 我检查了它的数据表。

启动时我没有收到任何错误，并且设备正确显示为 /dev/spidevX.X。我设法打开文件并获得有效的文件描述符。我现在正在尝试使用以下代码访问设备（受我在网上找到的示例的启发）。

```
#define MY_SPIDEV_DELAY_USECS 100
// #define MY_SPIDEV_SPEED_HZ 1000000
#define MY_SPIDEV_BITS_PER_WORD 8
int spidevReadRegister(int fd,
                       unsigned int num_out_bytes,
                       unsigned char *out_buffer,
                       unsigned int num_in_bytes,
                       unsigned char *in_buffer)
{
    struct spi_ioc_transfer mesg[2] = { {0}, };
    uint8_t num_tr = 0;
    int ret;

    // Write data
    mesg[0].tx_buf = (unsigned long)out_buffer;
    mesg[0].rx_buf = (unsigned long)NULL;
    mesg[0].len = num_out_bytes;
    // mesg[0].delay_usecs = MY_SPIDEV_DELAY_USECS,
    // mesg[0].speed_hz = MY_SPIDEV_SPEED_HZ;
    mesg[0].bits_per_word = MY_SPIDEV_BITS_PER_WORD;
    mesg[0].cs_change = 0;
    num_tr++;

    // Read data
    mesg[1].tx_buf = (unsigned long)NULL;
    mesg[1].rx_buf = (unsigned long)in_buffer;
    mesg[1].len = num_in_bytes;
    // mesg[1].delay_usecs = MY_SPIDEV_DELAY_USECS,
    // mesg[1].speed_hz = MY_SPIDEV_SPEED_HZ;
    mesg[1].bits_per_word = MY_SPIDEV_BITS_PER_WORD;
    mesg[1].cs_change = 1;
    num_tr++;

    // Do the actual transmission
    if(num_tr > 0)
    {
        ret = ioctl(fd, SPI_IOC_MESSAGE(num_tr), mesg);
        if(ret == -1)
        {
            printf("Error: %d\n", errno);
            return -1;
        }
    }

    return 0;
} 
```

然后我正在使用这个功能：

```
#define OPTICAL_SENSOR_ADDR "/dev/spidev0.0"

...

int fd;
fd = open(OPTICAL_SENSOR_ADDR, O_RDWR);
if (fd<=0) {
   printf("Device not found\n");
   exit(1);
}

uint8_t buffer1[1] = {0x3a};
uint8_t buffer2[1] = {0};
spidevReadRegister(fd, 1, buffer1, 1, buffer2); 
```

当我运行它时，代码卡在 IOCTL 上！

我这样做是因为，为了读取传感器上的寄存器，我需要发送一个包含其地址的字节，然后在不更改 CS 的情况下返回答案（但是，当我尝试使用 write() 和 read()功能，在学习时，我得到了相同的结果，坚持下去）。我知道指定 .speed_hz 会导致 Atmel 上出现 ENOPROTOOPT 错误（我检查了 spidev.c），所以我评论了那部分。

为什么会卡住？我虽然可以像设备一样创建它，但它实际上并没有“感觉”任何硬件。由于我不确定硬件 SPI0 是否对应于 bus_num 0 或 1，所以我尝试了两者，但仍然没有成功（顺便说一句，它是哪一个？）。

更新：我设法让 SPI 工作！一半.. MOSI 正在传输正确的数据，但 CLK 没有启动......知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:33:27.983

当我使用 SPI 时，我总是使用示波器来查看 io 的输出。如果您有 4 通道示波器，ypu 可以轻松调试问题，并确定您是否使用正确的 io、使用正确的速度等。我通常将我得到的信号与数据表图进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-01T10:20:45.407

我认为这里有几个问题。首先SPI是双向的。所以如果你想通过公共汽车发送一些东西，你也会得到一些东西。因此，您必须始终为 rx_buf 和 tx_buf 提供有效的缓冲区。

其次，结构 spi_ioc_transfer 的所有成员都必须使用有效值进行初始化。否则，它们只是指向某个内存地址，而底层进程正在访问任意数据，从而导致未知行为。

第三，为什么要在 ioctl 中使用 for 循环？你已经告诉 ioctl 你有一个 spi_ioc_transfer 结构数组。因此，所有定义的事务都将通过一个 ioctl 调用执行。

第四个 ioctl**需要一个指向**您的结构数组的指针。所以 ioctl 应该是这样的：

```
 ret = ioctl(fd, SPI_IOC_MESSAGE(num_tr), &mesg); 
```

你看到你的代码有改进的空间。

这就是我在树莓派的 c++ 库中执行此操作的方式。整个库很快就会在 github 上。完成后我会更新我的答案。

```
void SPIBus::spiReadWrite(std::vector<std::vector<uint8_t> > &data, uint32_t speed,
                          uint16_t delay, uint8_t bitsPerWord, uint8_t cs_change)
{
    struct spi_ioc_transfer transfer[data.size()];
    int i = 0;
    for (std::vector<uint8_t> &d : data)
    {
        //see <linux/spi/spidev.h> for details!
        transfer[i].tx_buf = reinterpret_cast<__u64>(d.data());
        transfer[i].rx_buf = reinterpret_cast<__u64>(d.data());
        transfer[i].len = d.size(); //number of bytes in vector
        transfer[i].speed_hz = speed;
        transfer[i].delay_usecs = delay;
        transfer[i].bits_per_word = bitsPerWord;
        transfer[i].cs_change = cs_change;
        i++
    }
    int status = ioctl(this->fileDescriptor, SPI_IOC_MESSAGE(data.size()), &transfer);
    if (status < 0)
    {
        std::string errMessage(strerror(errno));
        throw std::runtime_error("Failed to do full duplex read/write operation "
                                 "on SPI Bus " + this->deviceNode + ". Error message: " +
                                 errMessage);
    }
} 
```

# asp.net-mvc-3 - 在 Ajax 网格脚手架中搜索

> ID：10828197
> 
> 赞同：1
> 
> 时间：2012-05-31T06:01:22.003
> 
> 标签：asp.net-mvc-3, asp.net-mvc-scaffolding

我正在使用 Ajax Grid Scaffolder 在 asp.net mvc3 中对网格进行内联编辑。它默认不提供搜索选项。是否有任何其他包与 Ajax Grid Scaffolder 具有相同的帮助方式，但具有搜索选项，或者唯一的方法是手动执行？

# jquery - jquery和css的最小高度

> ID：10828204
> 
> 赞同：0
> 
> 时间：2012-05-31T06:02:06.020
> 
> 标签：jquery, css, html, height

我正在使用以下函数根据窗口高度为 div 提供高度值。但是对于非常小的屏幕，我想添加一个 400 像素的最小高度。

```
 $('.info').height(function(){
       return $(window).height() * 0.7;
    }); 
```

所以对于小于 630px 的窗口高度，给`.info`类一个 400px 的高度值。

任何帮助都会很棒。

*编辑：*

如果窗口小于 630px，则将此高度添加到其 css：

```
.info {height:400px;} 
```

否则找到 * 0.7 的窗口高度并使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:10:48.140

```
$('.info').css('min-height', function(){ $(window).height() * 0.7 }); 
```

试试这个它会工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:09:30.343

试试这个，但你应该先检查窗口的高度，以确保它值得增加

```
var windowh=$(window).height()* 0.7;
$('.info').height(windowh); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:10:19.937

```
$('.info').height(function(){
       if($(window).height() <= 630)
       {
           return ($(window).height() * 0.7) + 400;
       }

       return ($(window).height() * 0.7)

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T06:19:05.007

使用 Math.max 函数。

```
$('.info').height(function(){
  return Math.max($(window).height() * 0.7, 400)+'px';
}); 
```

# compiler-errors - 在 ubuntu 上编译内核时出错

> ID：10828208
> 
> 赞同：1
> 
> 时间：2012-05-31T06:02:20.583
> 
> 标签：compiler-errors, linux-kernel, kernel

我在安装在 Windows 7 pc 上的 vmware 上使用 ubuntu 12.04...我试图编译 linux-2.6.0 源文件（从 kernel.org 下载）...我按照网上所说的步骤进行操作，但有问题...

所以我搜索了一下并遇到了[这个](https://stackoverflow.com/questions/8869931/compiling-the-2-6-0-kernel-on-slackware)......我按照答案中的方式进行了操作，但是在执行第二步之后，当我继续执行第三步（make menuconfig）时，我收到以下错误..

```
make[1]: `scripts/fixdep' is up to date.
HOSTCC  scripts/kconfig/mconf.o
scripts/kconfig/mconf.c:91:21: error: static declaration of ‘current_menu’ follows
non-static declaration
scripts/kconfig/lkc.h:63:21: note: previous declaration of ‘current_menu’ was here
scripts/kconfig/mconf.c: In function ‘show_textbox’:
scripts/kconfig/mconf.c:553:7: warning: ignoring return value of ‘write’, declared with
attribute warn_unused_result [-Wunused-result]
scripts/kconfig/mconf.c: In function ‘exec_conf’:
scripts/kconfig/mconf.c:225:6: warning: ignoring return value of ‘pipe’, declared with
attribute warn_unused_result [-Wunused-result]
make[1]: *** [scripts/kconfig/mconf.o] Error 1
make: *** [menuconfig] Error 2 
```

当我使用 make xconfig 时发生了同样的错误...请告诉我应该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:25:54.053

[这是](http://sites.google.com/site/iprinceps/Home/embedded-system-and-operating-systems/linux/scripts-kconfig-mconf-c-of-linux-2-6-8-rc3-seems-to-have-a-bug) 从 scripts/kconfig/mconf.c 中的 'static struct menu *current_ment' 行中去掉 'static' 关键字的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:40:23.987

'current_menu' 在 mconf.c:91 中被声明为静态但在 lkc.h:63 中没有，这可能不被当前版本的 gcc 接受，根据 2.6.0 源中的 README 推荐 gcc-2.95.3，所以尝试如果你真的想编译 2.6.0，降级你的 gcc 版本。

# jquery - 通过 Jquery 获取父 div 的元素 ID

> ID：10828212
> 
> 赞同：0
> 
> 时间：2012-05-31T06:02:40.330
> 
> 标签：jquery, jquery-selectors, closest

我有一种情况，我需要发生动作的 div 的元素 id。

例如，我有动态生成的答案列表，在答案中有评论。当我点击删除评论时，我需要获取答案的 id，我可以获取评论的 id。通过代码更详细。

例如，有一个动态生成的核心 div。

```
<div class="ans" id="ans_332">...</div> 
```

例如，这是一个删除评论链接

```
<a href="#" class="delcmt" id="cmtid_5432">delete</a> 
```

这是jQuery代码

```
$(".ans").on({
   click: function (e) {
       var id = $(this).closest("div").attr("id");
       return false;
   }
}, '.delcmt'); 
```

我想获取所选“.ans”的元素 id，而不是获取目标评论项的最接近的 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:04:58.463

将`.ans`类添加到`closest`选择器：

```
var id = $(this).closest("div.ans").attr("id"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:06:42.730

你可以试试这个：

```
$(".delcmt").click(function(e) {

  e.preventDefault();

  alert($(this).closest("div.ans").attr('id'));

} 
```

我认为如果链接在答案 div 中，这应该可以工作。

# asp.net - 在 ASP 中的“附件响应”之后运行 JavaScript？

> ID：10828213
> 
> 赞同：1
> 
> 时间：2012-05-31T06:02:44.053
> 
> 标签：asp.net, attachment

所以这是我的问题：我有一个使用对 ExportFile 的响应的代码，但问题出在响应代码之后。随后的代码不再执行，或者它就像被读取但被忽略了。对不起，我是菜鸟。所以这是我的代码：

```
fullFilePath = "" + rootPath + "" + Filename + ".xlsx";
string fileName = fullFilePath.Substring(fullFilePath.LastIndexOf('\\') + 1);
byte[] buffer;

using (FileStream fileStream = new FileStream(fullFilePath, FileMode.Open))
{
    int fileSize = (int)fileStream.Length;

    buffer = new byte[fileSize];

    // Read file into buffer
    fileStream.Read(buffer, 0, (int)fileSize);
}

Response.Clear();

Response.Buffer = true;
Response.BufferOutput = true;
Response.ContentType = "application/x-download";
Response.AddHeader("Content-Disposition", "attachment; filename=" + fileName);
Response.CacheControl = "public";
// writes buffer to OutputStream
Response.OutputStream.Write(buffer, 0, buffer.Length);
newFile.Delete();

ClientScript.RegisterStartupScript(GetType(), "id", "EnableCtrl()", true); 
```

执行此操作后，不会触发或触发 javascript“EnableCtrl()”。当我删除与响应相关的代码部分并将其更改为其他内容时，将触发 javascript。那么我怎么能在响应代码之后运行 javascript 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:16:30.530

脚本不会/不能触发此方法，因为浏览器已经收到*响应*：这是文件，而*不是*回发的标记。一请求。一回应。这不是回发标记。

相反，我会建议：

1.  也在浏览器中处理启动控件的“客户端单击”（该操作可能会延迟`setTimeout`）。由于响应中的附件配置，浏览器实际上不会刷新页面/DOM，这就是它起作用的原因。但是，如果下载被接受、开始或完成，则没有客户端事件¹

2.  更改设计，使“下载”是一个没有其他副作用的单独操作。

快乐编码。

* * *

¹可以设计允许客户端查询下载进度的服务器辅助设置，就像上传进度指示器一样。然而，这不是微不足道的或标准的，可能仍然不能准确地反映状态。

# php - 解析非序列化数组

> ID：10828214
> 
> 赞同：0
> 
> 时间：2012-05-31T06:03:08.167
> 
> 标签：php

我有一个像这样的非序列化数组

```
Array (
    [status] => 1 
    [msg] => Transaction Fetched Successfully 
    [transaction_details] => Array ( 
        [100002982] => Array ( 
            [mihpayid] => 4149968 
            [request_id] => 635788 
            [bank_ref_num] => NINETE.31845.28052012 
            [amt] => 3295.00 
            [disc] => 0.00 
            [mode] => CC 
            [retries] => 0 
            [status] => success 
            [unmappedstatus] => captured 
        ) 
    ) 
) 
```

我想解析这个数组，以便我可以获得状态值，即成功

我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:09:25.673

```
$success = $array['transaction_details']['100002982']['status']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:06:11.367

```
$arr['transaction_details']['100002982']['status'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:23:59.047

PHP 文档有一个用户注释，它建议了一种解析 print_r 输出的方法（类似于上面）。可以在这里找到：[http ://www.php.net/manual/en/function.print-r.php#93529](http://www.php.net/manual/en/function.print-r.php#93529)

这是在上述链接中找到的源代码的副本：

```
<?php 
function print_r_reverse($in) { 
    $lines = explode("\n", trim($in)); 
    if (trim($lines[0]) != 'Array') { 
        // bottomed out to something that isn't an array 
        return $in; 
    } else { 
        // this is an array, lets parse it 
        if (preg_match("/(\s{5,})\(/", $lines[1], $match)) { 
            // this is a tested array/recursive call to this function 
            // take a set of spaces off the beginning 
            $spaces = $match[1]; 
            $spaces_length = strlen($spaces); 
            $lines_total = count($lines); 
            for ($i = 0; $i < $lines_total; $i++) { 
                if (substr($lines[$i], 0, $spaces_length) == $spaces) { 
                    $lines[$i] = substr($lines[$i], $spaces_length); 
                } 
            } 
        } 
        array_shift($lines); // Array 
        array_shift($lines); // ( 
        array_pop($lines); // ) 
        $in = implode("\n", $lines); 
        // make sure we only match stuff with 4 preceding spaces (stuff for this array and not a nested one)
        preg_match_all("/^\s{4}\[(.+?)\] \=\> /m", $in, $matches, PREG_OFFSET_CAPTURE | PREG_SET_ORDER); 
        $pos = array(); 
        $previous_key = ''; 
        $in_length = strlen($in); 
        // store the following in $pos: 
        // array with key = key of the parsed array's item 
        // value = array(start position in $in, $end position in $in) 
        foreach ($matches as $match) { 
            $key = $match[1][0]; 
            $start = $match[0][1] + strlen($match[0][0]); 
            $pos[$key] = array($start, $in_length); 
            if ($previous_key != '') $pos[$previous_key][1] = $match[0][1] - 1; 
            $previous_key = $key; 
        } 
        $ret = array(); 
        foreach ($pos as $key => $where) { 
            // recursively see if the parsed out value is an array too 
            $ret[$key] = print_r_reverse(substr($in, $where[0], $where[1] - $where[0])); 
        } 
        return $ret; 
    } 
} 

?> 
```

我没有测试过上面的功能。

# php - 从数据库实时更新内容

> ID：10828218
> 
> 赞同：0
> 
> 时间：2012-05-31T06:03:28.847
> 
> 标签：php, database, real-time

我这周开始使用 php，所以我没有经验。我想知道如何从数据库中实时更新（不刷新页面）数据。如果我有这个数据库：

```
section  | himidity

1        | 5

2        | 40   

3        | 30

4        | 25

5        | 26 
```

由于湿度一直在变化，我如何实时更新值？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:55:39.390

我发现了一个每秒更新但只刷新日期的代码：

```
<script type="text/javascript">
function display_c(){
var refresh=1000; // Refresh rate in milli seconds
mytime=setTimeout('display_ct()',refresh)
}

function display_ct() {
var strcount
var x = new Date()
document.getElementById('ct').innerHTML = x;
tt=display_c();
}
</script>

<body onload=display_ct();>
update<span id='ct' ></span> 
```

我必须改变什么才能从数据库中提供更新？

谢谢

# jquery - 加载第一个锚链接背景颜色更改

> ID：10828219
> 
> 赞同：0
> 
> 时间：2012-05-31T06:03:32.060
> 
> 标签：jquery, css

我有点震惊，当我加载页面时，它工作正常并打开第一个锚链接相关数据。week1-faith ...但是Link1“Faith”背景颜色在Onload时没有激活。请让我知道解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:07:17.123

嗨，像这样在第一个链接中添加活动类

```
<li class="link week1-faith active" rel="#faith"><a href="#week1-faith">FAITH</a></li> 
```

在你的 js 文件中更新

在文件中添加一行

```
$('.coda-nav > ul > li:first').addClass('active'); //**********Add This line in your js*************// 
```

在`javascripts/modules.js`

```
// Script for chapters of MODULE 1
$(function() {
$('div.panel').hide();
$('.coda-nav > ul > li:first').addClass('active'); //**********Add This line in your js*************//
$('div.panel:first').addClass('active').show(); // Keeps the first one on
$('li.link').click(function() { // When an item is clicked 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:13:36.637

有了这个：

```
(function($){
    var hash = window.location.hash;
    $('a[href$='+ hash +']').addClass('active');
})(jQuery); 
```

然后在你的css中主动改变背景。

我已经在您的页面中尝试了选择器并且运行良好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:20:36.357

我不太擅长 css 但

你有这个CSS

```
.coda-nav ul li.active a {
    background: none repeat scroll 0 0 #287ED6;
    color: #EDEDED;
} 
```

**还有这个**

```
#leftmenu ul li {
    height: 143px;
    list-style: none outside none;
    margin: 0;
    padding-top: 15px;
    width: 143px;
}
#leftmenu ul li a:link, a:hover, a:visited, a:active {
    color: #FFFFFF;
    font-size: 16px;
    text-decoration: none;
    text-shadow: 1px 1px #666666;
} 
```

我认为有**覆盖**css所以建议通过css或javascript解决这个问题

```
e.g element.className = 'newClassName'; 
```

[链接 JavaScript 教程 - DOM CSS](http://www.howtocreate.co.uk/tutorials/javascript/domcss)

**更新：**

并确保发生了什么，以及您在做什么，请使用链接中的**getComputedStyle**方法查看示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-16T09:41:33.663

如果您想在重新加载页面背景颜色更改`archer tab` `<a>`后使用此代码。

```
$("a").each(function() {
    if ((window.location.pathname.indexOf($(this).attr('href'))) > -1) {
        $(this).addClass('activeMenuItem');
    }
}); 
```

# sql - 在 SQL Server 2008 中生成脚本非常慢

> ID：10828222
> 
> 赞同：1
> 
> 时间：2012-05-31T06:03:43.757
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

在 SQL Server Management Studio 2008 R2 中从我的数据库中获取脚本的时间约为 45:00 分钟。表数：380 视图数：89 SP 数：109

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:02:48.447

看看你的 tempdb，有时，操作很慢，也许 sqlserver 为其他对象划分空间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T06:13:50.480

此速度将取决于您的系统或服务器的配置。如果在这种情况下您的系统配置较低，则需要更多时间。其次，这取决于您的数据库大小假设您在数据库中以二进制模式保存图像或 pdf 文件，在这种情况下生成脚本需要很长时间.....

# php - cakephp - 如何以不同的方式对结果进行分组？

> ID：10828225
> 
> 赞同：0
> 
> 时间：2012-05-31T06:04:11.070
> 
> 标签：php, cakephp, cakephp-2.0

当使用 cakephp Model->find() 方法时，我想以不同的方式对结果进行分组。

我的架构是：

```
 `id` int(11) NOT NULL AUTO_INCREMENT,
  `deviceid` varchar(255) NOT NULL,
  `user_id` int(11) NOT NULL,
  `sessionid` varchar(255) NOT NULL,
  `ip` text NOT NULL,
  `image_type` varchar(100) NOT NULL DEFAULT 'invalid_image',
  `filename` text NOT NULL,
  `analysis_basic` text COMMENT 'output from the image script',
  `analysis_admin` text,
  `created` datetime DEFAULT NULL,
  `modified` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `sessionid` (`sessionid`) 
```

在 cakephp 我想得到这样的东西：

```
Array
(
    [0] => Array
    (
        [Picture] => Array
        (
            [sessionid] => somevalue
        )
        [0] => Array
        (
            [id] => 32
            [deviceid] => 5124125
            [userid] => 4541221
            ...and all other fileds
        )
        [1] => Array
        (
            [id] => 35
            [deviceid] => 5124125
            [userid] => 4541221
            ...and all other fileds
        )        
    )
    [1] => Array
    (
        [Picture] => Array
        (
            [sessionid] => someothervalue
        )
        [0] => Array
        (
            [id] => 38
            [deviceid] => 5124454
            [userid] => 34241
            ...and all other fileds
        )
        [1] => Array
        (
            [id] => 35
            [deviceid] => 5124454
            [userid] => 34241
            ...and all other fileds
        ) 
```

cakephp 有可能吗？或者有没有更好的方法来实现类似于上面的东西？如果我能获得这样的结果，我知道 [0] 元素中的所有记录都具有相同的 sessionid .. 这就是原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:09:27.190

尝试：

```
$pictures = $this->Picture->find('all');
$grpPicts = array();

foreach($pictures as $p) {
   $sessid = $p['sessionid'];
   $grpPicts[$sessid]['Picture']['sessionid'] = $sessid;
   $grpPicts[$sessid][] = $p;
}

var_dump(array_values($grpPicts)); 
```

我知道这不是最优雅的解决方案，但它应该接近您正在寻找的解决方案。

# facebook - 动词“参数”打开图形操作

> ID：10828226
> 
> 赞同：1
> 
> 时间：2012-05-31T06:04:11.160
> 
> 标签：facebook, action, facebook-opengraph

我正在尝试为我的应用程序定义 facebook 图形操作。

用户可以发表他们对动物的看法，动物可以是*好的*也可以是*坏的*。我想使用时间轴和 Open Graph API 发布他们的投票：

> 约翰认为大象很好。

或者

> 约翰认为蛇是坏的。

有可能做到这一点吗？我可以有一个以好/坏作为论据的*思考动词吗？*或者我可以有两个动词：“认为*对象*是好的”，“认为*对象*是坏的”，并以某种方式配置应用程序以显示我想要的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:55:22.857

这是不可能的，因为您的操作中有三个变量。将`object`是动物，而`action`将是“思考”，但没有空间添加“好”和“坏”。Facebook只会让你在表格中做某事`User is {action} {object}`，不会`User is {action} {object} is {good|bad}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:08:54.723

您可以将自定义属性添加到操作，请参阅 [1] 和 [2]。

虽然您可以在构建聚合时轻松访问这些属性，但我不确定您是否可以让它们显示在发布的简单操作消息中……（也许通过您的应用程序的翻译设置？但我对此表示怀疑。）

也许您可以使用 message 参数，并在发布动作时预先填写“我认为大象是好/坏”？（然后您可能必须将您的动作动词更改为“评价”动物之类的东西，否则它才有意义。）

[1] [https://developers.facebook.com/docs/opengraph/define-actions/#custom](https://developers.facebook.com/docs/opengraph/define-actions/#custom) [2] [https://developers.facebook.com/docs/opengraph/actions/#instance-property](https://developers.facebook.com/docs/opengraph/actions/#instance-property)

# php - $(document).ready(function(){ 每次在 Hyperlink 的 onclick 事件上执行？

> ID：10828227
> 
> 赞同：2
> 
> 时间：2012-05-31T06:04:14.737
> 
> 标签：php, javascript, jquery, html

在我的代码中，我正在使用**PHP**动态创建产品列表（参见图片），并且现在在**document.ready()**`labels and image paths`方法上将当前的响应存储到**隐藏字段**（`created dynamically`使用 PHP）中，我将第一个列表项及其备注设置为使用第一个隐藏备注和图像路径字段。**`imagepath to img's src``label remarks`**

 **并在 listitem 单击我想更改它我的函数将这些值正确设置为 img 和标签（使用警报检查）但是当函数结束时它将图像 src 和备注内文设置为在 document.ready() 方法上设置的默认值

现在我的问题是我可以阻止下一次在 javascript 函数调用上执行 document.ready()

**我的视图：** 由于图像被重新加载，因此页面渲染再次完成，因此再次调用 document.ready 并将这些值再次设置为默认值。

**笔记 ：**

**我的页面不会在任何时候重新加载，只有图像和标签正在更改**

图片中显示的列表只是一组，其他组也是动态创建的。

![带有备注和图片的产品列表](../Images/39e8e231129288264c1bfe7d052996ac.png)

**PHP中的服务器端代码**

```
<?php 
for($j=0;$j<count($productstr);$j++) { 
$valuerem = $productstr[$j]["pcode"];
$idrem  = "rem".$j.$grp;
$valueimg =$productstr[$j]["imgpath"];
$idimg = "img".$j.$grp;
echo "<input type='hidden' value='$valuerem' id='$idrem' />" ;
echo "<input type='hidden' value='$valueimg' id='$idimg' />" ;
}?>
<script>   
   $(document).ready(function() {
    idrv < ? PHP echo $grp; ? > = 'rem0<?PHP echo $grp; ?>';
    idmv < ? PHP echo $grp; ? > = 'img0<?PHP echo $grp; ?>';
    $('#txt<?PHP echo $grp; ?>').text(document.getElementById(idrv < ? PHP echo $grp; ? ).value);
    alert($('#txt<?PHP echo $grp; ?>').text());
    $('#img<?PHP echo $grp; ?>').attr('src', document.getElementById(idmv < ? PHP echo $grp; ? > ).value);
    alert($('#img<?PHP echo $grp; ?>').attr('src'));
  });

  function Change(id) {
    idrv < ? PHP echo $grp; ? > = 'rem' + id;
    idmv < ? PHP echo $grp; ? > = 'img' + id;
    $('#txt<?PHP echo $grp; ?>').text(document.getElementById(idrv < ? PHP echo $grp; ? > ).value);
    alert($('#txt<?PHP echo $grp; ?>').text());
    $('#img<?PHP echo $grp; ?>').attr('src', document.getElementById(idmv < ? PHP echo $grp; ? > ).value);
    alert($('#img<?PHP echo $grp; ?>').attr('src'));
    return true;
  }​
</script> 
```

**警报仅用于测试值**

**在客户端浏览器上生成的代码**

```
 <tr>
    <td width="220px" valign="top" align="left">
    <input id="YN" type="hidden" value="true">
    <input id="rem00" type="hidden" value="SPL FUNNEL 1">
    <input id="img00" type="hidden" value="adminpanel/product_images/4f8e530154d74155.jpg">
    <input id="rem10" type="hidden" value="SPL FUNNEL 2">
    <input id="img10" type="hidden" value="adminpanel/product_images/4f8e53daf13e6156.jpg">
    <input id="rem20" type="hidden" value="SPL FUNNEL 3">
    <input id="img20" type="hidden" value="adminpanel/product_images/4f8e543100eaf157.jpg">
    <input id="rem30" type="hidden" value="SPL FUNNEL 4">
    <input id="img30" type="hidden" value="adminpanel/product_images/4f8e545a829e1158.jpg">
    <script>
    $(document).ready(function() {
        idrv0 = 'rem00';
        idmv0 = 'img00';
        $('#txt0').text(document.getElementById(idrv0).value);
        alert($('#txt0').text());
        $('#img0').attr('src', document.getElementById(idmv0).value);
        alert($('#img0').attr('src'));
    });

    function Change(id) {
        $('#YN').val('false');
        idrv0 = 'rem' + id;
        idmv0 = 'img' + id;
        $('#txt0').text(document.getElementById(idrv0).value);
        alert($('#txt0').text());
        $('#img0').attr('src', document.getElementById(idmv0).value);
        alert($('#img0').attr('src'));
        return true;
    }​
    </script>
    <ul>
    <li>
    <a id="00" style="text-decoration: none; text-size: 1.1em; color: " 
onclick=" Change(this.id); alert($('#txt0').text()); alert($('#img0').attr('src'));">
SPL FUNNEL 1</a>
    </li>
    <li>
    <li>
    <li>
    </ul>
    </td>
    <td valign="bottom" align="left" colspan="2">
    <td width="110px" valign="bottom" align="left" style="width: 180px">
    </tr> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T06:31:42.727

您需要在单击时停止重新加载，如下所示。

```
$('a.availableProducts').click(function(e){
   e.preventDefault();
   // your code
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T06:24:21.563

猜测一下，每次单击锚点时，它都会执行新的页面加载。如果是这样，您可能需要将**preventDefault**添加到锚点**onClick 方法**中。

假设您的代码看起来像这样，请在适当的地方添加**preventDefault()**：

```
$('a.availableProducts').click(function(ev){
   ev.preventDefault();
   //do image stuff or whatever
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T06:31:18.167

> 现在我的问题是我可以阻止下一次在 javascript 函数调用上执行 document.ready()

`(document).ready()`应该只用于检测页面加载。如果您加载 HTML 并将其附加到包含内部的 DOM（例如通过 ajax），它也会触发`(document).ready()`。

`(document).ready()`是您告诉 jQuery 的一种方式（在 DOM 加载且可编写脚本时执行此代码）。这样您就不需要将 javascript 放在 HTML 的末尾以确保所有内容都已加载（尽管这仍然是一个好习惯）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T04:46:12.873

感谢其他人的支持，感谢他们的回答，但没有一个答案给我解决方案

一种不同的方法解决了我的问题

我的问题已经解决了

**服务器端代码**

```
<tr>
    <td width="220px" align="left" valign="top"><?php for($j=0;$j<count($productstr);$j++)
    {
        $valuerem = $productstr[$j]["remark"];
        $idrem  = "rem".$j.$grp;
        $valueimg =$productstr[$j]["imgpath"];
        $idimg = "img".$j.$grp;
        $valuepid = $productstr[$j]["pid"];
        $idpid ="pid".$j.$grp;
        $image = $productstr[0]["imgpath"];
        $remark = $productstr[0]["remark"];
        $pid = $productstr[0]["pid"];
        echo "<input type='hidden' value='$valuerem' id='$idrem' />" ;
        echo "<input type='hidden' value='$valueimg' id='$idimg' />" ;
        echo "<input type='hidden' value='$valuepid' id='$idpid' />" ;
    }
    ?> <script>
    txt = '#txt<?PHP echo $grp; ?>';
    img = '#img<?PHP echo $grp; ?>';
    alink = '#aimg<?PHP echo $grp; ?>';
    function Change<?PHP echo $grp; ?>(id){                                                                             
        idrv<?PHP echo $grp; ?> = 'rem'+id;
        idmv<?PHP echo $grp; ?> = 'img'+id;
        idpv<?PHP echo $grp; ?> = 'pid'+id;
        $('#txt<?PHP echo $grp; ?>').html(document.getElementById(idrv<?PHP echo $grp; ?>).value);
        $('#img<?PHP echo $grp; ?>').attr('src',document.getElementById(idmv<?PHP echo $grp; ?>).value);
        $('#aimg<?PHP echo $grp; ?>').attr('href',"view_large.php?mid="+document.getElementById(idpv<?PHP echo $grp; ?>).value);                                                                            
        return false;
        }   
    </script>
    <ul>
    <?php for($j=0;$j<count($productstr);$j++){
        $imgarray[ $productstr[$j]["imgpath"].'#'.$productstr[$j]["pid"]]  = $j+1;
        ?>
        <li><a id='<?PHP echo $j.$grp;?>'
            onclick="Change<?PHP echo $grp; ?>(this.id);"
            style="text-decoration: none; text-size: 1.3em; cursor: pointer;"
            title='Click to see'> <?php echo
            $productstr[$j]["pcode"]; ?> </a></li>
            <?php } $randomdata = array_rand($imgarray,1); $randompic = explode('#',$randomdata);
            ?>
    </ul>
    </td>
    <td align="left" valign="bottom" colspan="2"><label
        id="txt<?PHP
        echo $grp; ?>"><?PHP echo $remark; ?></label></td>
    <td width="110px" align="left" valign="bottom" style="width: 180px"><span
        class="color-4_inner p1" style="text-align: center;"> <a
        id="aimg<?PHP echo $grp; ?>"
        href="view_large.php?mid=<?PHP echo $pid; ?>"
        onclick="return hs.htmlExpand(this, { objectType: 'ajax'} )"> <img
        title='Click to view Full image!' id="img<?PHP echo $grp; ?>"
        src="<?PHP echo $image; ?>" border="0" width="102" height="110" /> </a>
    </span></td>
</tr> 
```**

# r - 在R中聚类平铺表面

> ID：10828228
> 
> 赞同：2
> 
> 时间：2012-05-31T06:04:53.270
> 
> 标签：r, cluster-analysis

我是集群的新手。我手头的问题是：我有一个固定大小的平铺表面（非常像棋盘），其中每个瓷砖可以取一个介于 0 和 1 之间的连续值（称为高度）。我有（比如说）20 个这样的表面。我需要创建具有相似外观组的高度轮廓或形状的表面簇。

定义可用于将这些表面聚类成相似外观组的度量（相似性或距离矩阵）的最佳策略是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:18:36.367

您可以将两个矩阵 d(A,B) 之间的距离视为矩阵范数 ||AB|| 然后取许多[矩阵范数](http://en.wikipedia.org/wiki/Matrix_norm)中的任何一个。

# php - 使用会话时获取未定义的变量

> ID：10828235
> 
> 赞同：0
> 
> 时间：2012-05-31T06:05:24.040
> 
> 标签：php, session, variables

当我调用另一个时，我得到一个 undefiend 变量错误，`$_SESSION`但是当我删除这段代码时它没有显示任何错误，我正在使用`$_SESSION`以便将一个变量传递给另一个 php 脚本，有人可以告诉我可能导致这个问题的原因吗？

我知道该变量已定义，但由于某种原因调用 a`$_SESSION`会导致此错误？

```
<div>
    <? 
    if(empty($item_details['trucks'])) {
        include_once ('trucks.php');
        $_SESSION['runmapapi'] = 'start'; 
        //$runmapapi == true;
        echo '<p> Success</p></div>'; 
    } else {
        echo '<p>failed</p></div>';
    } 
    ?>
<div>
    <p>Cars</p>
</div>  
</div>
</div></body>
<? } ?>
<? } ?>   
<?= $print_footer; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:17:21.370

当您使用会话变量时，您必须使用初始化会话

`session_start();`

因此，无论您在页面中使用任何会话变量，请确保首先声明`session_start()`

所以在你的页面中应该是

```
//initialize session to use session variable
session_start();
include_once ('trucks.php');
$_SESSION['runmapapi'] = 'start'; 
```

# php - 登录验证器检查器 PHP MYSQL

> ID：10828240
> 
> 赞同：0
> 
> 时间：2012-05-31T06:05:52.050
> 
> 标签：php, mysql

下面是我的“登录检查器”如果我使用旧的传统 mysql 连接它可以正常工作。但是使用 PDO 它似乎不起作用..介意是否有人给我一些提示或修改此代码以便它可以工作？

它给了我这个错误：

```
Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\clubresults\checklogin.php on line 23 
```

其中第 23 行是 $count=mysql_num_rows($result); 谢谢！！

```
<?php
ob_start();
$tbl_name="admin_passwords"; // Table name 

        $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
    #Set Error Mode to ERRMODE_EXCEPTION.
    $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

// username and password sent from form 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $myusername and $mypassword, table row must be 1 row

if($count==1){
// Register $myusername, $mypassword and redirect to file "login_success.php"
$_SESSION["myusername"] = "$myusername";
$_SESSION["mypassword"] = "$mypassword";
header("location:login_success.php");
}
else {

echo "ACCESS DENIED.<br> Incorrect username and/or Password
<br>Please check your username and password. <br> wait five seconds for redirection. ";
}
ob_flush();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:18:48.670

看起来您并没有完全利用 PDO 并使用参数化语句。

如果是我，我会编写如下代码：

```
$tbl_name="admin_passwords"; // Table name 

$pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
#Set Error Mode to ERRMODE_EXCEPTION.
$pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$stmt = $pdo->prepare("SELECT * FROM $tbl_name WHERE username = :username AND password = :password");
$stmt->execute(array('username' => $_POST['myusername'], 'password' => $_POST['mypassword']));
if ($stmt->fetch() === false) {
    //access deined
    //....
}
else {
   //access granted
   //...
} 
```

此外，出于安全目的，您应该在数据库中至少使用 sha1（我使用 sha512）对您的密码进行哈希处理，这样即使您的数据被盗，密码也无法在不付出很多努力的情况下进行逆向工程。

编辑：再看一遍，使用 root 以外的用户访问数据库也可能很好，但这更符合个人喜好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:12:10.393

尝试从这一行打印结果：

```
$result=mysql_query($sql); 
```

看起来 mysql_query 可能会失败，因为它没有被传递一个 link_identifier。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:16:07.203

你需要不做 pdo-query，mysql_query。

见这里： http: [//php.net/manual/en/pdo.query.php](http://php.net/manual/en/pdo.query.php)

# loops - 识别 LLVM CFG 中的循环

> ID：10828241
> 
> 赞同：0
> 
> 时间：2012-05-31T06:06:01.193
> 
> 标签：loops, llvm, nodes, edges, control-flow-graph

我正在 llvm 中编写一个传递，它将识别循环不变量并将那些使用这些不变量的指令提升到循环体上方。但为此，我需要知道从一个节点到另一个节点是否有任何后沿。例如，我想找出从节点 N 到节点 H 是否存在后沿，其中节点 H 支配节点 N，这将帮助我识别自然循环。如何在 CFG 中找到从一个节点到另一个节点的任何边？我在 LLVM 中找不到任何名为 CFG 的类，我可以从中收集这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:32:51.007

`succ_iterator`您可以自己滚动（通过使用/ `succ_begin`/遍历基本块的后继者`succ_end`），或者您可以使用[`LoopInfo`](http://llvm.org/docs/doxygen/html/classllvm_1_1LoopInfo.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-25T01:59:06.947

如果你调用[loop-simplify](https://llvm.org/docs/Passes.html#loop-simplify-canonicalize-natural-loops) pass，它将保证循环头只有一个后边。这是一个转换过程，因此修改了 CFG，但它使额外的 CFG 黑客攻击变得更加简单。

# security - 短期有效的令牌

> ID：10828242
> 
> 赞同：0
> 
> 时间：2012-05-31T06:06:07.333
> 
> 标签：security, authentication

如何创建身份验证令牌或有效期为 10 分钟左右的东西。我有一个`auth_token`用于验证其请求的 api。基本上，我想要一种加密我的方法，`auth_token`并且加密`auth_token`是随请求一起发送的，有效期很短。

# php - PHP 中的 Javascript 值

> ID：10828245
> 
> 赞同：0
> 
> 时间：2012-05-31T06:06:26.500
> 
> 标签：php, drop-down-menu

> **可能重复：**
> [如何在 PHP 代码中获取下拉框的选定选项值](https://stackoverflow.com/questions/1442853/how-to-get-the-selected-option-value-of-a-drop-down-box-in-php-code)

落下 ：

```
 <SELECT NAME='action' class="action" id="action" onchange="a();"> 
        <OPTION VALUE="IN"> IN </OPTION>
        <OPTION VALUE="OUT"> OUT </OPTION>
    </SELECT> 
```

获取下拉文本的脚本：

```
 <script type="text/javascript">
    function a(){
    var e = document.getElementById("action");
    var strUser = e.options[e.selectedIndex].text;
    document.write(strUser);
    }
   </script> 
```

//从[使用JavaScript获取下拉列表中的选定值中获取脚本？](https://stackoverflow.com/q/1085801/1257426) 这里我需要在 php 中打印 strUser 的值。否则在更改下拉值时应在同一页面中打印，而不是在新页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:40:14.643

如果您想将其传递给 PHP 脚本（然后将其保存为全局或数据库中），您可以使用 cookie，或将其作为表单的一部分提交（我建议这样做）。

所以你有了

`<form action="form_receiver.php" method="get">`

这基本上意味着，将此表单中的所有（命名）字段提交到`form_receiver`页面。“get”可以替换为“post”，它们只是发送数据的两种方法（“get”数据在 URL 中编码，因此可以保存，对简单的事情很有用，“post”是“隐藏发送浏览器”，因此更适合处理大量数据或机密内容）。

现在要发送每个字段中的数据，您需要为它命名，正如您提供的那样。因此，对于该输入字段，您只需将其包含在一个表单中。

在 上`form_reciever.php`，您将能够使用`$_GET['name']`或`$_POST['name']`根据您使用的方法按名称访问变量。然后，您可以将其保存在其他地方以备后用。

* * *

Cookie 应该用于保存有关用户的数据（例如会话 ID），我不建议使用它们在页面之间传递数据。但是，如果出于某种原因您需要这样做，您可以使用 javascript 设置 cookie 数据并`$_COOKIE['cookie_name']`在 php.ini 中使用它。如果您在 php 中使用 cookie 设置`setcookie("name", "value")`（更多详细信息请参见[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)）。

有很多方法可以在 javascript 中设置 cookie。我建议使用像 jQuery 这样的库，您可以以类似的方式设置和获取 cookie：`$.cookie("name", "new_value")`或`$.cookie("name")`获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:14:03.313

PHP 是在 javascript（客户端）代码之前运行的服务器端脚本。你可以试试

`Ajax`用于将此值发送到服务器并生成您想要的输出。

查看详细信息[Ajax](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:14:45.750

如果要将 Dropbox 中选择的数据传递给 PHP 脚本，则必须使用表单或来自 JavaScript 的 submit() 调用，而不是动态生成的表单。

但是如果你不希望页面被重新加载，那么你必须依赖 AJAX 技术。

看看[这里](http://api.jquery.com/jQuery.ajax/)和[这里](https://stackoverflow.com/questions/2613627/how-to-use-the-value-of-a-selected-value-from-a-dropdownlist-populated-with-ajax)。网络上有大量的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T06:28:19.307

> <html><头>
> 
> <脚本> //document.getElementById('yourSelectBoxId').options[document.getElementById('yourSelectBoxId').selectedIndex].value//or
> 
> 函数 onchg(){ alert(document.getElementById('yourSelectBoxId').value); } </script> </head>
> 
> <select id="yourSelectBoxId" onchange="onchg();">
> 
> <选项值=1> a</选项> <选项值=2> b</选项> <选项值=3> c</选项>
> 
> </选择>

<正文>

</正文>

</html>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T07:40:18.250

使用[innerHTML](http://www.tizag.com/javascriptT/javascript-innerHTML.php)而不是 document.write

# objective-c - 目标 C：使用 NSData 键值的 AES 256 加密

> ID：10828250
> 
> 赞同：0
> 
> 时间：2012-05-31T06:06:55.720
> 
> 标签：objective-c, encryption

我想使用 NSDATA 密钥进行 AES 256 加密。但是在任何地方我都可以找到带有 NSString 键的示例。现在，如何使用 NSData 键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:20:04.287

您不能使用字节作为键。您必须使用字符串作为键。虽然，您可以将 NSData 字节转换为字符串。但请注意，数据必须使用一些有效的字符串编码进行编码。

然后您可以使用以下方法将您的 NSData 转换为 string ，以用作键。

```
NSString* newStr = [[[NSString alloc] initWithData:theData
                                         encoding:NSUTF8StringEncoding] autorelease]; 
```

# javascript - 为什么在脚本中将样式更改为阻止/无后浏览器不显示/隐藏 div？

> ID：10828254
> 
> 赞同：0
> 
> 时间：2012-05-31T06:07:53.897
> 
> 标签：javascript, css

调用 onblur 处理程序，并执行开关。然而，指定的元素保持不变。

尝试使用 javascript 在下面的 HTML 中将元素样式设置为“无”/“块”有什么问题？

```
<html>
  <head>
    <meta content="text/html; charset=windows-1252" http-equiv="Content-Type">
    <title>Randomage</title>
    <link rel="shortcut icon" href="//ssl.gstatic.com/docs/spreadsheets/forms/favicon_jfk.png" type="image/x-icon">
    <link href="http://spreadsheets.google.com/client/css/779923916-published_form_compiled.css" type="text/css" rel="stylesheet">
    <style type="text/css">@media print{@page {size:A5}body{padding:0;background-color:#fff}.ss-form-container{width:100%;border:none}}h2.ss-section-title{background-color:transparent}div.ss-submit div.ss-form-entry{background:none;border:none}</style>
  </head>
  <body class="ss-base-body" dir="ltr" itemscope=""
    itemtype="http://schema.org/CreativeWork/FormObject">    
    <h3>Please fill in the form below</h3>
    <br>
    <div class="ss-required-asterisk">* Required</div>
    <div class="ss-form">
      <form id="halfyly_edit">
        <div class="errorheader"><b>Looks like you have a question or two that still needs to be filled out.</b></div>
        <table style=" text-align: left; width: 75%;" border="0" cellpadding="2" cellspacing="2">
          <tbody>
            <tr>  
              <td style="align:center;"><br>
                <div class="errorbox-bad">
                  <div class="ss-item ss-item-required ss-select">
                    <div class="ss-form-entry"> <label
                        class="ss-q-title" for="entry_16">Options <span class="ss-required-asterisk">*</span></label>
                      <label class="ss-q-help" for="entry_16"></label>
                      <select name="entry.16.single" id="entry_16" onblur="doSelect();">
                        <option value="sel0">Select 0</option>
                        <option value="sel1">Select 1</option>
                      </select>
                    </div>
                  </div>
                </div>
              </td>
              <td style="align:center;" >
                <div class="errorbox-good" id="entry_17_div"> <br>
                  <div class="ss-item ss-text">
                    <div class="ss-form-entry"> <label
                        class="ss-q-title" for="entry_17">Option 0
                      </label> <label class="ss-q-help" for="entry_17">A quick brown fox jumps over the lazy dog</label> <input name="entry.17.single"
                        value="" class="ss-q-short" id="entry_17"
                        type="text"> 
                    </div>
                  </div>
                </div>
               </td>
              <td style="align:center;">
                <div class="errorbox-good" id="entry_18_div"> <br>
                  <div class="ss-item ss-text">
                    <div class="ss-form-entry"> <label
                        class="ss-q-title" for="entry_18">Option 1</label> <label class="ss-q-help"
                        for="entry_18">The quick brown dog jumps over a lazy fox</label> <input
                        name="entry.18.single" value=""
                        class="ss-q-short" id="entry_18" type="text"> 
                    </div>
                  </div>
                </div>
              </td>
            </tr>
            <tr>
              <td> 
                    <input name="pageNumber" value="" type="hidden"> 
                    <input name="backupCache" value="" type="hidden">
                <div class="ss-item ss-navigate">
                  <div class="ss-form-entry"> 
                    <input name="submit" value="Submit" type="submit" disabled> 
                  </div>
                </div>
              </td>
            </tr>

          </tbody>
        </table>
      </form>
  </div>
  <script type="text/javascript">
        function doSelect(){

                var entry_16 = document.getElementById('entry_16');                

                switch( entry_16.selectedIndex ){

                case 0: 
                    // Option 0
                    document.getElementyById('entry_18_div').style.display = "none";                
                    document.getElementyById('entry_17_div').style.display = "block";
                    break;
                case 1:
                    // Option 1
                    document.getElementyById('entry_18_div').style.display = "block";
                    document.getElementyById('entry_17_div').style.display = "none";
                    break;
                }
        }

  </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:15:31.453

您有 4 个错字：`getElementyById`不是默认的 DOM 元素 javascript 方法（不存在）。将它们替换为`getElementById`.

然后，您的功能将在`onblur`事件中正确执行。**[JSFiddle](http://jsfiddle.net/ult_combo/Cbhj8/)**

`onchange`如果您希望页面更具动态性，我建议您在活动中调用它。**[例子](http://jsfiddle.net/ult_combo/Cbhj8/2/)**

此外，在测试代码时检查您的 Javascript 控制台（Chrome/IE：F12，Firefox：Ctrl+Shift+K）。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:19:57.923

您的 javascript 拼写错误：

```
document.getElementById('entry_18_div').style.display = "none"; 
```

# html - 提交后自动返回结果页面

> ID：10828262
> 
> 赞同：1
> 
> 时间：2012-05-31T06:09:08.287
> 
> 标签：html, email, thickbox, php

我想知道如何返回上一页...

我在存在许多结果的搜索结果页面上。对于每个结果，都有一个选项，例如“EMAIL ME”。

当用户点击它时，会打开一个厚框表单，用户需要在其中提供他的姓名和电子邮件 ID。当用户单击“发送以提交表单”时，会在我们的数据库中创建一个条目，并通过他/她的电子邮件 ID 向用户发送一封电子邮件。

问题是，在提交表单后，我想将用户重定向到搜索结果页面，用户可以选择发回电子邮件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T06:13:50.387

您可以使用 Ajax 提交表单，然后关闭厚框。如果 Ajax 不是一个选项，您还可以使用引用 URL 将用户重定向到上一页。

```
header("Location: ".$_SERVER["HTTP_REFERER"]); 
```

更新：

由于某些浏览器有时不提供引荐来源网址，因此上述方法不起作用。一种解决方法是让Thickbox 中的表单提供搜索页面的URL，然后可以使用该URL 进行重定向。

在Thickbox 表单中，添加一个带有URL 的隐藏元素。这可以通过 JavaScript 或 PHP 来完成。

然后不使用 HTTP_REFERER，而是使用隐藏元素的名称。

形式：`<input type='hidden' name='searchUrl' value='http://the.search.url' />`

PHP：`header("Location: ".$_REQUEST["searchUrl"]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:11:20.713

记住会话的最后一个位置，并使用 Location 标头重定向到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:03:36.290

**将以下代码添加到您要返回的页面=>**

```
<?php
   session_start();
   $_SESSION["addresser"]="home.php";
?> 
```

**现在将以下代码添加到您拥有表单的页面/或您要返回的页面=>** *首先在表单中添加一个隐藏字段=>*

```
<input type="text" name="valid" hidden="hidden" readonly="readonly" value="true"/> 
```

*现在将以下php代码添加到此页面的顶部==>*

```
<?php
session_start();
$location=$_SESSION["addresser"];
if($_SESSION["validate"]="true"){
header("location: $location");}
?> 
```

**Also Add following code to the php file where form is submitted....**

```
<?php
$_SESSION["validate"]=$_POST["valid"];
?> 
```

# git - Git 可以在不丢失历史记录的情况下重组我的文件夹吗？

> ID：10828267
> 
> 赞同：40
> 
> 时间：2012-05-31T06:09:19.390
> 
> 标签：git

我有一个 git repo，目前我是唯一一个使用它的人。我想获取根文件夹下的所有文件和文件夹，并将它们放在一个新文件夹中。

当前结构：

```
主要->
  源代码
  资源

```

新结构：

```
主要->
  应用程序1
    源代码
    资源

```

有没有办法让文件不会丢失它们的 git 历史记录？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-31T08:14:53.103

### TL;DR

Go ahead: move your files and directories around. Just make sure you don't make any edits to files in the same commit as your directory restructuring.

### Why It Works

Git is a content tracker, not a file tracker. If you move/rename files, but make no other changes to the *content* of those files, then Git just [rewrites the tree objects](http://git-scm.com/book/en/Git-Internals-Git-Objects). The file blobs are not changed by directory operations; directory location information is stored separately in tree objects.

Actual rename detection is handled by [diffing the blobs and trees](http://git-scm.com/docs/gitdiffcore), and looking for a configurable percentage of similarity between files. This means that Git doesn't really store moves or renames directly; it *computes* them from differences between commits.

The upshot of all this is that your history is not tied to a particular filename or directory structure. This works really well for most use cases, but stands in contrast to systems like [Bazaar](http://wiki.bazaar.canonical.com/BzrFeatures) that track renames as first-class operations.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T06:15:33.600

您只需移动文件，Git 就会（或应该）注意到移动已经发生。它将保留历史。

如果由于某种原因它*没有*`--find-copies-harder`注意到移动，您可以尝试使用带有选项的 diff。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-25T13:59:48.283

当我移动或重命名一些文件时，我也丢失了历史记录。但我试图接触**TortoiseGit**和**SourceTree**应用程序。

当我尝试使用 git bash 命令时，我发现我可以看到历史记录。

```
$Git log 
```

在网上花了几个小时了解原因后，终于找到了答案。

Tortoise git 默认设置，向我们展示了实际的文件历史记录。我的意思是，如果你重命名，如果你移动任何文件或文件夹，你就看不到历史记录。要查看历史记录，您必须单击 TortoiseGit 设置上的以下复选框。

[![在此处输入图像描述](../Images/9bbbea439ce13039a53c4d20ce34ba92.png)](https://i.stack.imgur.com/JmkGM.png)

# delphi - Delphi，oAuth 和 Linked API，访问令牌未授权

> ID：10828270
> 
> 赞同：2
> 
> 时间：2012-05-31T06:09:28.460
> 
> 标签：delphi, oauth, linkedin

我正在开发一个向 LinkedIn 发布更新的程序。

我正在使用 Delphi XE2、oAuth 和 LinkedIn API。我能够请求令牌并授权应用程序。但是在尝试访问令牌时出现错误。

我正在使用来自[http://chuckbeasley.wordpress.com/2009/04/29/using-oauth-for-delphi/](http://chuckbeasley.wordpress.com/2009/04/29/using-oauth-for-delphi/)的 oAuth for Delphi 。对于我使用的 SSL，TIdSSLIOHandlerSOcketOpenSSL 和方法 sslvSSLv3。我正在尝试发布以下内容。

```
https://api.linkedin.com/uas/oauth/accessToken?oauth_consumer_key=xxxx&oauth_nonce=A7CB896D776BA2FEC05E9FBB66AD06B2&oauth_signature_method=HMAC-SHA1&oauth_signature=K%2F7uzf%2FjEvQ3u12a0Olimf%2FZxG4%3D&oauth_timestamp=1338019026&oauth_token=xxxx&oauth_version=1.0&oauth_verifier=53326 
```

我从 Indy Http 得到的结果如下。

```
Http/1.1 401 – Unauthorized 
```

谁能帮我解决这个问题。

# bash - 如何根据匹配的关键字段将文本文件中的行替换为另一个文件中的行？

> ID：10828272
> 
> 赞同：4
> 
> 时间：2012-05-31T06:09:39.483
> 
> 标签：bash, unix, sed, awk

**输入.txt**

```
1,Ram,Fail
2,John,Fail
3,Ron,Success 
```

**param.txt（新输入）**

```
1,Sam,Success
2,John,Sucess 
```

现在我想用 param.txt 中的那些替换 input.txt 中的整行。第一列将充当主键。

**输出.txt**

```
1,Sam,Success
2,John,Sucess
3,Ron,Success 
```

我试过

```
awk 'FNR==NR{a[$1]=$2 FS $3;next}{ print $0, a[$1]}' input.txt param.txt > Output.txt 
```

但它正在合并文件内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T06:22:12.323

这可能对您有用（GNU sed）：

```
 sed 's|^\([^,]*,\).*|/^\1/c\\&|' param.txt | sed -f - input.txt 
```

解释：

*   使用第一个字段作为地址转换`param.txt`为脚本，以更改.`sed``input.txt``s|^\([^,]*,\).*|/^\1/c\\&|`
*   针对`input.txt`.`sed -f - input.txt`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T14:00:01.773

这可以通过一次调用来完成`sort`：

```
sort -t, -k1,1n -us param.txt input.txt 
```

在第一个逗号分隔的字段上使用稳定的数字排序，并`param.txt`在之前列出，`input.txt`以便在消除重复项时首选正确的、较新的行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T06:34:51.107

您可以使用 join(1) 来完成这项工作：

```
$ join -t, -a1 -j1 Input.txt param.txt | sed -E 's/,.*?,.*?(,.*?,.*?)/\1/'
1,Sam,Success
2,John,Sucess
3,Ron,Success 
```

sed 作为管道尾部从替换行中删除 Input.txt 中的字段。

仅当两个输入文件都按第一个字段排序时，这才有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T06:42:15.463

纯 awk 并不是真正适合这项工作的工具。如果您*必须*只使用 awk，[https://stackoverflow.com/a/5467806/1301972](https://stackoverflow.com/a/5467806/1301972)是您努力的一个很好的起点。

但是，Unix 提供了一些工具来帮助 awk 为您尝试做的事情提供正确的输入。

```
$ join -a1 -t, <(sort -n input.txt) <(sort -n param.txt) |
     awk -F, 'NF > 3 {print $1 "," $4 "," $5; next}; {print}' 
```

基本上，您正在为 awk 提供一个文件，其中包含在 input.txt 中的键上连接的行。然后 awk 可以解析出您想要正确显示或重定向到输出文件的字段。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-31T13:41:27.313

这应该适用于`awk`

```
awk -F"," 'NR==FNR{a[$1]=$0;next} ($1 in a){ print a[$1]; next}1' param.txt input.txt 
```

### 测试：

```
$ cat input.txt 
1,Ram,Fail
2,John,Fail
3,Ron,Success
$ cat param.txt 
1,Sam,Success
2,John,Sucess
$ awk -F"," 'NR==FNR{a[$1]=$0;next} ($1 in a){ print a[$1]; next}1' param.txt input.txt 
1,Sam,Success
2,John,Sucess
3,Ron,Success 
```

# php - 学说 ODM（mongodb）合并不起作用

> ID：10828273
> 
> 赞同：0
> 
> 时间：2012-05-31T06:09:47.550
> 
> 标签：php, mongodb, doctrine, doctrine-odm

我没有任何运气使用`merge()`. 我正在做几乎完全[记录在案的事情](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/working-with-objects.html#merging-documents)：

```
/* @var $detachedDocument MyDocumentClass */ 
$detachedDocument = unserialize($serializedDocument);
$document = $dm->merge($detachedDocument);
$document->setLastUpdated(new \MongoDate());
$dm->persist($document); 
```

但改变永远不会坚持。我必须这样做：

```
$dm->createQueryBuilder('MyDocumentClass')
    ->findAndUpdate()
    ->field('lastUpdated')->set(new \MongoDate())
    ->getQuery()
    ->execute(); 
```

`merge()`看起来很简单，所以我很困惑为什么它不像我认为的那样工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:10:09.663

在您的第一个代码示例中，`merge()`后跟`persist()`是多余的，并且您省略了 a `flush()`，这是实际写入数据库的唯一操作（除非您手动执行查询，就像您在第二个示例中所做的那样）。如果您浏览 中的代码`UnitOfWork::doMerge()`，您会看到它要么保留对象（如果它没有 ID），要么通过其 ID 获取文档。最终结果是`merge()`返回一个托管文档。Persist 确保文档在被调用后被管理（它本身不返回任何内容）。如果您深入`UnitOfWork::doPersist()`了解，您会发现将托管对象传递给该方法实际上是一个 NOOP。

尝试替换`persist()`为`flush()`. 请注意，如果需要，您可以刷新单个文档，但`$dm->flush()`默认情况下会处理所有托管对象。

如果这仍然没有帮助，我会确认该`lastUpdated`字段已在 ODM 中正确映射。您可以检查输出`$dm->getClassMetadata('MyDocumentClass')`以确认。如果它不是映射字段，UnitOfWork 将检测到文档中没有任何更改，并且不会刷新任何内容。

顺便说一句：在第二个代码示例中，您在`findAndUpdate()`没有任何搜索条件的情况下执行（仅`set()`指定了 ）。通常，您会将修改与类似的东西`equals()`（可能是您的 ID）配对，以确保单个文档被原子修改并返回。

# random - GPU上两个数字之间的统一伪随机数生成器

> ID：10828275
> 
> 赞同：1
> 
> 时间：2012-05-31T06:09:48.657
> 
> 标签：random, numbers, generator, gpu

只需要一种快速的方法来在 GPU 上生成介于 -1 和 1 之间的伪随机数。

我一直在研究 xorshift 随机数生成器，但我不知道如何将它们限制在两个数字之间。

# c# - 将对象添加到网格中

> ID：10828279
> 
> 赞同：0
> 
> 时间：2012-05-31T06:10:00.877
> 
> 标签：c#, wpf

如何将包含图形的类添加到网格类中？目前我在*CreateGraphics*上有错误。

```
using System.Windows;
using System.Windows.Controls;

namespace Othello
{
class Board : Grid
{
    public Grid grid = new Grid();
    ColumnDefinition col;
    RowDefinition row;

    int boxesAmount = 8;
    int boxSize = 100;
    int i = 0;

    public Board()
    {
        grid.Width = boxSize * boxesAmount;
        grid.Height = boxSize * boxesAmount;
        grid.HorizontalAlignment = HorizontalAlignment.Left;
        grid.VerticalAlignment = VerticalAlignment.Top;
        grid.ShowGridLines = true;
        grid.Background = System.Windows.Media.Brushes.Green;

        for (i = 0; i < boxesAmount; i++)
        {
            // Create Columns
            col = new ColumnDefinition();
            grid.ColumnDefinitions.Add(col);

            // Create Rows
            row = new RowDefinition();
            grid.RowDefinitions.Add(row);
        }
        //Console.WriteLine(grid));
        this.Children.Add(grid);

        Chess chess = new Chess();
        grid.Children.Add(chess);
        Grid.SetColumn(chess, 0);
        Grid.SetRow(chess, 0);
    }
}
} 
```

包含图形的第二类

```
using System;
using System.Drawing;
using System.Windows.Controls;

namespace Othello
{

    class Chess : UserControl
    {
        Graphics g;

        public Chess()
        {
            Console.WriteLine("load chess");

            g = this.CreateGraphics();
            g.DrawEllipse(Pens.Black, 30, 30, 50, 50);
            this.AddChild(g);
        }
    }
} 
```

错误：

```
error CS1061: 'Othello.Chess' does not contain a definition for 'CreateGraphics' and no extension method 'CreateGraphics' accepting a first argument of type 'Othello.Chess' could be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:56:02.567

该类`UserControl`或其基类不包含该方法，正如编译器错误告诉您的那样。*在编写代码时，当方法没有*出现在 Intellisense中时，您还可以注意到类似的情况。键入时，您可能会立即得到一条红色的波浪线。

`CreateGraphics`是 Windows 窗体。但是您正在使用 WPF。这两个是具有不同类（具有不同方法）的不同 UI 框架。您是否不小心创建了 WPF 自定义控件库但想要创建 Windows 窗体控件库？

在 XAML 文件中为您的控件尝试这样的操作：

```
<UserControl x:Class="WpfApplication2.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Ellipse Stroke="Black" Margin="30"></Ellipse>
    </Grid>
</UserControl> 
```

或者，您可以覆盖[`OnRender`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.onrender.aspx)以提供自定义绘画。

# apache - 如果用户已经登录，则 j_security_check 不可用

> ID：10828280
> 
> 赞同：4
> 
> 时间：2012-05-31T06:10:06.253
> 
> 标签：apache, authentication, tomcat, j-security-check

Apache tomcat 版本：6.0.20

如果用户已经登录，并且他尝试从登录页面再次登录，则会遇到 j_security_check is not available 错误。这是正常行为还是我必须做些什么？

实际上，我有不同的用户角色来访问不同的页面，当特定用户拒绝访问页面时，我想将他重定向到登录页面，他可以在其中使用相应的凭据登录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T11:34:02.763

这种行为是正常的：当用户请求受保护的资源并且用户尚未提供凭据时，servlet 规范仅列出了容器管理的身份验证（即登录）的过程。所有其他情况都未定义，包括您的情况。

如果您想捕获“禁止”条件，您可以使用 WEB-INF/web.xml 中的 <error-page> 映射将用户发送到您想要的任何地方，包括登录页面。请记住，容器仅在上述条件成立后才会接受登录，因此您可能必须先注销用户（通过终止用户的会话）。

我可能会推荐一个“禁止”页面，上面写着“您无权访问此资源。如果您想以其他用户身份登录以访问它，请单击 [此处]”其中 [此处]是一个指向 servlet 的链接，它终止用户的会话，然后重定向到用户试图访问的资源。这将导致容器请求身份验证（即显示登录表单），验证凭据，并将用户发送到所需的资源。

如果您使用容器（和 webapp）以及 servlet 规范的 3.0 版，则有一个新的 HttpServletRequest.login() 方法可用于以编程方式将用户登录到您的 webapp。您可能可以使用它而不是终止会话并执行所有这些重定向......相反，您可以自己收集用户名和密码，然后要求容器为您进行登录。

# json - JAXB JSON Jackson 解组数组/单例列表

> ID：10828287
> 
> 赞同：1
> 
> 时间：2012-05-31T06:10:21.487
> 
> 标签：json, jaxb, jackson

JSON 响应

情况1：只有一个元素存在

```
{
"Person": {
    "first": "foo",
    "last": "bar"
}
} 
```

情况2：存在多个元素（即）正确的数组类型

```
{
"Person": [
    {
        "first": "foo",
        "last": "bar"
    },
    {
        "first": "cow",
        "last": "pal"
    }
]
} 
```

生成上述我无法控制的响应的 JAXB 代码。

```
@XmlRootElement
public class PersonContainer {

@XmlElement
List<Person> personList;
} 
```

我使用 Jackson 解析器的 JAXB 功能将 JSON 解组为 JAXB 对象。由于有两种类型的响应是可能的，Jackson 解析器对于案例 1 响应不能正常工作。

如何正确处理这两种情况并绑定 JSON 响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:05:31.343

对于上述情况，似乎需要一些自定义编码

使用以下内容映射列表

```
 @JsonDeserialize(using=PersonSerializer.class)
          List<Person> personList; 
```

实现 PersonSearializer

```
 public class PersonSerializer extends JsonDeserializer<List<Person>>{

public List<Person> deserialize(JsonParser jsonParser, DeserializationContext deserializationContext)
    throws IOException, JsonProcessingException {
     ObjectCodec oc = jsonParser.getCodec();
     JsonNode node = oc.readTree(jsonParser);
     Iterator<JsonNode>  iterator = node.getElements();

     List<Person> list = new ArrayList<Person>();
     while (iterator.hasNext()){
         JsonNode j = iterator.next();
         Person nr = new Person();
         if (j.get("first") == null) {
             nr.setFirstName(node.get("first").getTextValue()));
             nr.setLastName(node.get("last").getTextValue()));
             list.add(nr);
             break;
         }
         nr.setFirstName(j.get("first").getTextValue()));
         nr.setLastName(j.get("last").getTextValue()));
         list.add(nr);
     }

     return list;
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T06:40:55.557

我找到了一个解决方案：将 JAXB JSON 序列化器替换为像 Jackson 这样表现更好的 JSON 序列化器。简单的方法是使用 jackson-jaxrs，它已经为您完成了。该类是 JacksonJsonProvider。您所要做的就是编辑项目的 web.xml，以便 Jersey（或其他 JAX-RS 实现）扫描它。这是您需要添加的内容：

```
<init-param>
  <param-name>com.sun.jersey.config.property.packages</param-name>
  <param-value>your.project.packages;org.codehaus.jackson.jaxrs</param-value>
</init-param> 
```

这就是它的全部。Jackson 将用于 JSON 序列化，它的工作方式与您期望的列表和数组一样。

**它对我有用，确保你的类路径中有 jackson-jaxrs.jar。**

参考： [如何自定义将 JAXB 对象列表序列化为 JSON？](https://stackoverflow.com/questions/2199453/how-can-i-customize-serialization-of-a-list-of-jaxb-objects-to-json)

# php - php 包含 html 文档的“头”部分，如果

> ID：10828288
> 
> 赞同：1
> 
> 时间：2012-05-31T06:10:22.217
> 
> 标签：php, html, if-statement, include

我有很多页面，大多数都有头部部分并且可以“独立”。此外，它们中的大多数都被“包含”在“更大”的文档或文章中。所以，在一个，让我们称之为“大页面”，我可以有 3 或 4 个包含的页面，所有页面都有自己的头部信息。有没有一种更好的方法来包含一个包含所有元数据、样式等的“head.html”，但只有一次，这样如果“父级”，可以说 index.php 已经“包含”“head.html”包含比如说，specialcharacters.html 也不会加载 head，但如果我自己加载 specialcharacters.html，它会“包含”“head.html”？？？？

（exp：index.php 包括、nav.html、nav_r.html、页眉（徽标、欢迎等）、footer.html、body01.html、specialcharacters.html 等。但是，我想使用 specialcharacters.html 作为带有头部，样式等的独立文档，用于文档格式。）

所以，某种包含 if... 所以 head.html 只包含一次。

我希望这比较清楚..

提前谢谢你，兰迪斯。Landisreed dot com/index.php - head.html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:13:46.937

我想你可以使用

```
include_once 'header.html'; 
```

然后，如果它之前被包含，它将不会再次被包含。

这表示您必须将标题信息包含到每个文件中，因此您`specialcharacters.html`必须使用它以及`body01.html`. 然后无论哪个`include_once`先出现 - header.html 都会出现。

编辑：

要区分标题或其他信息，您可以在 header.html 中执行以下操作：

```
<title><?=$title;?></title> 
```

然后在你的每个脚本中

```
$title = 'Whatever';
include_once "header.html"; 
```

现在，首先调用 header 的人将首先设置 $title 并将其呈现到 header 中。一旦它呈现到标题中，`$title`任何其他包含的后续更改将被您的页面简单地忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:13:02.710

你试过使用'include_once'吗？ [http://www.php.net/manual/en/function.include-once.php](http://www.php.net/manual/en/function.include-once.php)

例子：

```
include_once "header.php"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:13:16.563

`include_once()`是你可以使用的，根据 PHP 的文档

> include_once 语句在脚本执行期间包含并评估指定的文件。这是一种类似于 include 语句的行为，唯一的区别是如果文件中的代码已经被包含，它将不会再次被包含。顾名思义，它将仅包含一次。

更多信息在这里[http://in3.php.net/include_once](http://in3.php.net/include_once)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T06:21:43.710

如果我的问题是正确的，我认为您需要的是一个`header.php`包含在所有页面中的头文件`require_once`。诀窍是将你拥有的所有不同种类的头，比如一个用于 head.html 和一个用于 specialcharacters.html，放入`header.php`由 if 语句分隔的文件中。`header.php`可能看起来像这样 ：

```
 if ($caller == 'head') { // HTML for head.html}
 elseif($caller != 'head' && $caller ==  'specialcharacters') 
     { // HTML specific to specialcharacters.html  for standalone viewing} 
```

一旦`header.php`编写好所有条件，您需要`$caller`在每个文件的顶部进行相应设置（例如，`specialcharacters.php`第一行代码应该是`$caller = 'specialcharacters';`. 然后在指定之后包含`header.php`到所有文件中。 **编辑** 您的文件将如下所示： `require_once("header.php")``$caller`**`index.php`**

 **```
$caller = 'in_my_index';
require_once('header.php'); 
```

您的`specialcharacters.php`文件将如下所示：

```
$caller = ($caller != 'in_my_index')?'in_my_specialchars':'in_my_index'; // This is to make sure that when specialcharacters.php is included inside index.php then it should still show index.php title but when loaded standalone, it will show its own title.
require_once('header.php'); 
```

现在你`header.php`看起来像这样：

```
 <html><head>
 <?PHP    if($caller == 'in_my_index') { echo '<title>I am Index Title</title>';} 
          elseif($caller == 'in_my_specialchars') { echo '<title>I am standalone Specialcharacters.php Title</title>';}
 ?> 
```

我希望这应该给出一个更好的主意。

希望这可以帮助！**

# c++ - C 和 C++：自动结构的部分初始化

> ID：10828294
> 
> 赞同：78
> 
> 时间：2012-05-31T06:10:44.227
> 
> 标签：c++, c

例如，如果`somestruct`有三个整数成员，我一直认为在 C（或 C++）函数中这样做是可以的：

```
somestruct s = {123,}; 
```

第一个成员将被初始化为 123，最后两个成员将被初始化为 0。我经常对自动数组做同样的事情，写入数组`int arr[100] = {0,};`中的所有整数都初始化为零。

最近我在[GNU C 参考手册](http://www.gnu.org/software/gnu-c-manual/gnu-c-manual.html#Initializing-Structure-Members)中读到：

> 如果不初始化结构变量，效果取决于它是否具有静态存储（请参阅存储类说明符）。如果是，则整数类型的成员初始化为 0，指针成员初始化为 NULL；否则，结构成员的值是不确定的。

有人可以告诉我 C 和 C++ 标准对部分自动结构和自动数组初始化有什么看法吗？我在 Visual Studio 中执行上述代码没有问题，但我想与 gcc/g++ 兼容，也许还有其他编译器。谢谢

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-31T06:13:35.253

链接的 gcc 文档没有谈论**Partial Initialization**它只是谈论**(Complete)Initialization**或**No Initialization**。

> **什么是部分初始化？**

标准没有定义对象的部分初始化，要么有完全初始化，要么没有初始化。部分初始化是一个非标准术语，通常是指您提供一些初始化器但不是全部的情况，即：初始化器少于数组的大小或正在初始化的结构元素的数量。

例子：

```
int array[10] = {1,2};                    //Case 1:Partial Initialization 
```

> **什么是（完全）初始化或无初始化？**

初始化意味着在创建变量的同时为创建的变量提供一些初始值。即：在相同的代码语句中。

例子：

```
int array[10] = {0,1,2,3,4,5,6,7,8,9};    //Case 2:Complete Initialization
int array[10];                            //Case 3:No Initialization 
```

引用的段落描述了`Case 3`.

有关 Partial Initialization( `Case 1`) 的规则由标准很好地定义，这些规则不依赖于被初始化变量的存储类型。
AFAIK，所有主流编译器都 100% 遵守这些规则。

* * *

> **有人可以告诉我 C 和 C++ 标准对部分自动结构和自动数组初始化有什么看法吗？**

C 和 C++ 标准保证即使整数数组位于自动存储中，并且如果大括号括起来的列表中的初始化程序较少，那么未初始化的元素也**必须**初始化为`0`.

**C99 标准 6.7.8.21**

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

* * *

在 C++ 中，规则的表述略有不同。

**C++03 标准 8.5.1 聚合**
**第 7 段：**

> 如果列表中的初始化器少于聚合中的成员，则每个未显式初始化的成员都应进行**值初始化**（8.5）。[例子：
> 
> ```
>  struct S { int a; char* b; int c; };
>  S ss = { 1, "asdf" }; 
> ```
> 
> `ss.a`使用、 和形式的表达式的值进行初始化`1`，即. ]`ss.b``"asdf"``ss.c``int()``0`

虽然值初始化在
**C++03 8.5 Initializers**
**Para 5 中定义：**

> 对T 类型的对象进行**值初始化**意味着：
> — 如果 T 是具有用户声明的构造函数（12.1）的类类型（第 9 条），则调用 T 的默认构造函数（如果 T没有可访问的默认构造函数）；
> — 如果 T 是没有用户声明的构造函数的非联合类类型，则 T 的每个非静态数据成员和基类组件都是值初始化的；
> — 如果 T 是一个数组类型，那么每个元素都是值初始化的；
> — 否则，对象被零初始化

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-31T06:31:18.643

在 C 中，对象*永远不会*被部分初始化——如果它们的任何部分被初始化，则整个对象（以及递归的所有子对象）都会被初始化。如果没有提供显式初始化器，则元素被初始化为“适当类型的零”。

您问题中的引用是指当整个对象的初始化程序完全被排除在外时，而不是当子对象缺少初始化程序时。例如，假设`arr`具有自动存储持续时间，那么：

```
int arr[100] = { 123 }; 
```

初始化`arr[0]`to和to`123`的所有其他元素。而这：`arr``0`

```
int arr[100]; 
```

留下`arr`未初始化的每个元素。引用所指的是后一种情况。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-26T19:44:34.673

最新的 gcc 版本还允许同时“部分”初始化和 zeromem：

```
typedef struct{
  int a,b,c;
}T;

T s = {0, .b=5}; 
```

结构成员现在将具有以下值：`a=0, b=5, c=0`

我没有任何关于其他编译器是否允许这样做的信息：p

# java - JavaEE：同一个Timer的两个对象，@Timeout和TimerService中的Timer不同

> ID：10828297
> 
> 赞同：0
> 
> 时间：2012-05-31T06:11:05.763
> 
> 标签：java, jakarta-ee, jboss, timer

在我们的 JavaEE 应用程序（在 JBoss 6.1 上运行）中，我们使用`Timer`对象。这些对象是使用该`timerService.createIntervalTimer()`方法创建的。这些计时器的信息对象是一个具有`String`（作为 ID）和布尔字段的类。

想象一下，只有一个`Timer`为`timerService`. 现在，一个用 注释的方法`@Timeout`负责处理`Timer`超时时的行为。此`Timer`对象与可通过 访问的对象不同（不同的哈希码）`timerService.getTimers()`。的 info 对象的 ID`Timers`相同`String`，但对象不一样。

我的问题如下：我希望该`@Timeout`方法仅`Timer`在其布尔字段设置为 true 时才执行某些操作，然后将其设置为 false。稍后，在 @Timeout 方法之外，我想再次将此布尔字段设置为 true。但由于对象不同，这没有效果。

这是 JBoss 中的错误还是这是预期的行为？有谁知道如何规避这个？

**编辑：**

这是一个代码示例：

```
public class TimerManager {
   @Resource
   TimerService timerService;

   public void createTimer(String Id) {
      TimerConfig timerConfig = new TimerConfig();
      timerConfig.setInfo(new TimerInfo(Id));
      this.timerService.createIntervalTimer(new Date(), 120000, timerConfig);
   }

   @Timeout
   public void timeOut(Timer timer) {
      TimerInfo timerInfo = (TimerInfo) timer.getInfo();
      if (timerInfo.isFlagSet()) {
         //do something
         System.out.println("Timeout for timer with ID: " + info.getID() + " and hashcode " + timer.hashCode());
         timerInfo.setFlag(false);
      }
   }

   //will be called from outside this class and after the timeout happened once
   public void searchTimerByIdAndChangeFlag(String ID) {
      for (Timer timer : this.timerService.getTimers()) {
         if (timer.getInfo() instanceof TimerInfo) {
            TimerInfo info = (TimerInfo) timer.getInfo();
            if (info.getID().equals(ID)) {
               System.out.println("Searching for timer with ID: " + info.getID() + " and hashcode " + timer.hashCode());
               info.setFlag(true); // has no effect because the flag is still set to true
            }
         }
      }
   }

}

public class TimerInfo {
   private String id;
   private boolean flag;

   public TimerInfo(String id) {
      this.id = id;
      this.flag = true;
   }

   //getter and setter for id and flag

} 
```

第一次执行timeOut后，timer的timerInfo.flag会为false，并且不能被searchTimerByIdAndChangeFlag改变，因为timerService.getTimers()中存储的timerService.getTimers()中的timerInfo.id相同的对象不是同一个对象在 timeOut 方法中。

我希望这可以澄清情况。

# sql - 如何查询count(customer)、count(order)对

> ID：10828299
> 
> 赞同：1
> 
> 时间：2012-05-31T06:11:09.377
> 
> 标签：sql

假设我们有桌子

```
Order(customerId,orderDetails...) 
Customer(Id, customerDetails...) 
```

查询 Count(customer)xCount(order) 对的最简单方法是什么？

例子

顾客：

```
ID | Name
---------
1  | Bob
2  | Ann 
```

命令

```
CustomerId | Address
--------------------
 1         | Block1
 1         | Block2
 1         | Block1
 2         | Home Address 
```

想要得到

```
CustomerCount | OrderCount
--------------------------
     1        |    3
     1        |    1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:14:39.597

怎么样

```
 SELECT DISTINCT COUNT(DISTINCT c.ID) AS CustomerCount
               , COUNT(*) AS OrderCount
        FROM   Customer AS c
               INNER JOIN [Order] AS o ON o.customerID = c.ID
        GROUP BY
              c.ID 
```

[SQL小提琴](http://sqlfiddle.com/#!3/d41d8/1442)

**编辑**

想起来，前面的说法可以简化成这样

```
 SELECT DISTINCT 1 AS CustomerCount
               , COUNT(*) AS OrderCount
        FROM   Customer AS c
               INNER JOIN [Order] AS o ON o.customerID = c.ID
        GROUP BY
              c.ID 
```

但这让我觉得我最初的陈述一开始就是错误的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:24:35.413

```
select order.id, count(.CustomerId )
from Order order left join Customer customer on order.id = customer.CustomerId 
group by order.id 
```

# sql - Oracle 查询链接查询

> ID：10828308
> 
> 赞同：0
> 
> 时间：2012-05-31T06:11:43.940
> 
> 标签：sql, oracle, linker

我的 SQL 查询在应该吐出 20 个时吐出 3000 个查询，我使用的是 Oracle。

以下是表格：

```
Item (itemNumber, itemName, itemDescription, itemValue, itemLocation, 
categoryID, sellerUsername)   

Auction (auctionNumber, currency, startDateTime, endDateTime, shippingTerms, 
startBidAmount, reserveAmount, bidIncrementAmount, noOfItems, itemSold, 
itemNumber feedbackDateAndTime, rating, comments, paymentDate, paymentid)

Bid (bidderUsername, auctionNumber, bidDateTime,bidAmount) 
```

和我的查询

```
SELECT
   i.itemname,
   i.itemdescription,
   i.itemvalue,
   CASE
       WHEN i.itemnumber=a.itemnumber and a.itemSold='y' THEN 'Sold'
       WHEN a.auctionnumber != b.auctionnumber and TO_CHAR(sysdate,'DD-MON-YY')>endDateTime THEN 'No Bids on that closed auction'
       WHEN TO_CHAR(sysdate,'DD-MON-YY')<a.endDatetime and a.auctionnumber=b.auctionnumber 
                 and reserveamount>(
                 SELECT b.bidAmount
                 FROM dbf12.bid b, dbf12.auction a               
                 WHERE a.auctionnumber=b.auctionnumber 
                 GROUP BY b.bidAmount
                 HAVING b.bidAmount= max(b.bidAmount)) THEN 'No Bids that meets the reserve'
        ELSE 'Auction Still Open'
   END 
FROM 
   dbf12.item i, dbf12.auction a, dbf12.bid b; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:17:27.810

您似乎忘记了 dbf12.item、dbf12.auction 和 dbf12.bid 之间的连接条件。这使得它本质上是三个表的交叉产品，将每个表中的每一行连接到所有其他表中的每一行。

尝试这样的事情：

```
SELECT
   i.itemname,
   i.itemdescription,
   i.itemvalue,
   CASE
       WHEN i.itemnumber=a.itemnumber and a.itemSold='y' THEN 'Sold'
       WHEN a.auctionnumber != b.auctionnumber and TO_CHAR(sysdate,'DD-MON-YY')>endDateTime THEN 'No Bids on that closed auction'
       WHEN TO_CHAR(sysdate,'DD-MON-YY')<a.endDatetime and a.auctionnumber=b.auctionnumber 
                 and reserveamount>(
                 SELECT b.bidAmount
                 FROM dbf12.bid b, dbf12.auction a               
                 WHERE a.auctionnumber=b.auctionnumber 
                 GROUP BY b.bidAmount
                 HAVING b.bidAmount= max(b.bidAmount)) THEN 'No Bids that meets the reserve'
        ELSE 'Auction Still Open'
   END 
FROM 
   dbf12.item i, dbf12.auction a, dbf12.bid b
    WHERE i.itemnumber = a.itemnumber and b.actionnumber = a.auctionnumber 
```

你也可以这样说：

```
SELECT
   i.itemname,
   i.itemdescription,
   i.itemvalue,
   CASE
       WHEN i.itemnumber=a.itemnumber and a.itemSold='y' THEN 'Sold'
       WHEN a.auctionnumber != b.auctionnumber and TO_CHAR(sysdate,'DD-MON-YY')>endDateTime THEN 'No Bids on that closed auction'
       WHEN TO_CHAR(sysdate,'DD-MON-YY')<a.endDatetime and a.auctionnumber=b.auctionnumber 
                 and reserveamount>(
                 SELECT b.bidAmount
                 FROM dbf12.bid b, dbf12.auction a               
                 WHERE a.auctionnumber=b.auctionnumber 
                 GROUP BY b.bidAmount
                 HAVING b.bidAmount= max(b.bidAmount)) THEN 'No Bids that meets the reserve'
        ELSE 'Auction Still Open'
   END 
    from db12.item i
        inner join dbf12.auction a on a.itemnumber = i.itemnumber
        inner join dbf12.bid b on b.auctionnumber = a.auctionnumber 
```

# regex - 如何将 URI 中的字符串与正则表达式匹配？

> ID：10828309
> 
> 赞同：0
> 
> 时间：2012-05-31T06:11:44.703
> 
> 标签：regex, apache

在我的 Apache 配置 httpd.conf 中，我希望设置如下规则

```
SetEnvIfNoCase %{QUERY_STRING} ^.*(getBook+)$ no-gzip dont-vary 
```

当我的 URL 看起来像时，我希望不使用 gzip

[http://myurl.fake.com/book/getBook3?id=234](http://myurl.fake.com/book/getBook3?id=234) [http://myurl.fake.com/book/getBook1?id=xxx](http://myurl.fake.com/book/getBook1?id=xxx)

我不确定是否可以通过在 httpd.conf 中设置类似上述内容来做到这一点。

谢谢！

# java - 在最后一次出现字符后删除字符串

> ID：10828313
> 
> 赞同：40
> 
> 时间：2012-05-31T06:12:06.410
> 
> 标签：java

在我的应用程序中，我附加了一个字符串来创建生成 URL 的路径。现在我想在按下后退按钮时删除附加的字符串。

假设这是字符串：

```
/String1/String2/String3/String4/String5 
```

现在我想要一个这样的字符串：

```
/String1/String2/String3/String4/ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-31T06:13:50.367

您可以使用`lastIndexOf()`相同的方法

```
if (null != str && str.length() > 0 )
{
    int endIndex = str.lastIndexOf("/");
    if (endIndex != -1)  
    {
        String newstr = str.substring(0, endIndex); // not forgot to put check if(endIndex != -1)
    }
} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-05-31T06:14:38.043

```
String whatyouaresearching = myString.substring(0, myString.lastIndexOf("/")) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-03T15:25:43.203

您可以使用空安全的[org.apache.commons.lang3.StringUtils.substringBeforeLast 。](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#substringBeforeLast-java.lang.String-java.lang.String-)

从javadoc：

```
// The symbol * is used to indicate any input including null.
StringUtils.substringBeforeLast(null, *)      = null
StringUtils.substringBeforeLast("", *)        = ""
StringUtils.substringBeforeLast("abcba", "b") = "abc"
StringUtils.substringBeforeLast("abc", "c")   = "ab"
StringUtils.substringBeforeLast("a", "a")     = ""
StringUtils.substringBeforeLast("a", "z")     = "a"
StringUtils.substringBeforeLast("a", null)    = "a"
StringUtils.substringBeforeLast("a", "")      = "a" 
```

Maven依赖：

```
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-lang3</artifactId>
    <version>3.8</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-15T10:12:57.597

**最简单的方法是...**

```
 String path = "http://zareahmer.com/questions/anystring";

        int pos = path.lastIndexOf("/");

        String x =path.substring(pos+1 , path.length()-1); 
```

> 现在`x`有值**stringAfterlastOccurence**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-01T18:10:23.957

内普斯特回答的第三行应该是

> `String x =path.substring(pos+1 , path.length());`

而不是 `String x =path.substring(pos+1 , path.length()-1);`因为`substring()`方法将**end+1 偏移量**作为第二个参数。

# objective-c - NSRegularExpression 不匹配

> ID：10828317
> 
> 赞同：2
> 
> 时间：2012-05-31T06:12:25.783
> 
> 标签：objective-c, ios, regex, nsregularexpression

所以我有一个字符串：

```
users/9881570/?access_token= 
```

我尝试与正则表达式匹配：

```
 NSRegularExpression * regex = [NSRegularExpression regularExpressionWithPattern:@"users/\\d/?access_token=" options:NSRegularExpressionCaseInsensitive error:&error];

        NSArray* wordArray = [regex matchesInString:self.currentRequestURL_ 
                                            options:0 range:NSMakeRange(0, [self.currentRequestURL_ length])]; 
```

但是，wordArray 的计数为 0。为什么这不匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:18:30.030

一方面，您需要转义问号，另一方面，您需要在 \d 后面加上一个加号 (+) 来表示 1 个*或多个*数字。因为现在你只寻找一位数字。

```
@"users/\\d+/\\?access_token=" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:15:44.630

因为问号是正则表达式中的特殊字符，需要转义。

# android - Grid View 单子可绘制动画

> ID：10828319
> 
> 赞同：0
> 
> 时间：2012-05-31T06:12:50.183
> 
> 标签：android, android-layout

> 你好，我只想为网格视图单个孩子绘制可绘制动画，但我找不到合适的解决方案

![在此处输入图像描述](../Images/cfbf6def7b2ab5c99f491e529e0a56ab.png)

> 这是您可以看到红色圆圈的示例图片，我只想要该网格视图子 [红色圆圈图像] 的可绘制动画。

谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T05:11:34.107

这是解决方案......

我只是将以下代码写入 Adapter 类的 getView 方法

```
if (position == 0) {
                v.setBackgroundResource(R.anim.frame);
                mAnimation = (AnimationDrawable) v.getBackground();
                v.postDelayed(new Runnable() {
                    public void run() {
                        if (mAnimation != null)
                            mAnimation .start();
                    }
                }, 100);
            } 
```

# iphone - 希望计算器屏幕的结果在另一个标签中显示“2+4-3”

> ID：10828339
> 
> 赞同：0
> 
> 时间：2012-05-31T06:14:01.213
> 
> 标签：iphone, ios, xcode, xcode4

我想为计算器创建 2 个标签。Calculatorscreen 显示计算结果，Resultscreen 显示正在执行的操作类型。我应该怎么做？这是我的方法：-

```
-(IBAction)buttonDigitPressed:(id)sender
 { 
  currentNumber = currentNumber*10 + (float)[sender tag];
  calculatorScreen.text = [NSString stringWithFormat:@"%g",currentNumber];
 }

-(IBAction)buttonOperationPressed:(id)sender
{

} 
```

我在哪里将运算符附加到带有数字的标签中以显示一组完整的操作？

# java - 原始数据类型和自定义对象之间的推土机映射？

> ID：10828340
> 
> 赞同：1
> 
> 时间：2012-05-31T06:14:02.490
> 
> 标签：java, collections, mapping, dozer

我有以下情况：

```
Class A{
  private List<Long> longList;
  //getter and setter
}

Class B{
  private List<C> listC;
  //getter and setter
}

Class C{
  private Long id;
  //getter and setter
} 
```

现在，我想在 和 之间进行`longList`转换`C`。我找到了以下映射：

```
<mapping>
  <class-a>A</class-a>
  <class-b>B</class-b>
  <field>
    <a>longList</a>
    <b>listC</b>
    <a-hint>java.lang.Long</a-hint>
    <b-hint>C</b-hint>
  </field>
</mapping> 
```

我不确定上述映射是否是正确的解决方案。`long`我可以在和之间建立一个映射`C`，这样 long 就可以映射到`C.id`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T21:58:17.473

您可以尝试像这样将 Long 映射到 C：

```
<mapping>
    <class-a>A</class-a>
    <class-b>B</class-b>
    <field>
        <a>longList</a>
        <b>listC</b>
    <field>
</mapping>

<mapping>
    <class-a>java.lang.Long</class-a>
    <class-b>C</class-b>
    <field>
        <a>this</a>
        <b>id</b>
    <field>
</mapping> 
```

# ios - 核心情节 - 折线图

> ID：10828342
> 
> 赞同：0
> 
> 时间：2012-05-31T06:14:11.120
> 
> 标签：ios, core-plot

我正在尝试使用核心图生成一个简单的折线图，但无法获得实线。我遇到的问题是，这条线似乎默认为虚线。

我是 iOS 和 Xcode 开发的新手，如果它非常简单，请原谅我。我附上了我的代码，谁能看到我错过了什么？提前致谢！

该代码基于项目中包含的示例代码：

```
-(void)constructScatterPlot
{
graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
CPTTheme *theme = [CPTTheme themeNamed:kCPTDarkGradientTheme];
[graph applyTheme:theme];

graphView.hostedGraph = graph;    

graph.plotAreaFrame.borderLineStyle = nil;
graph.paddingLeft   = 0;
graph.paddingTop    = 0;
graph.paddingRight  = 0;
graph.paddingBottom = 0;

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.allowsUserInteraction = YES;
plotSpace.xRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(1.0) length:CPTDecimalFromFloat(100.0)];
plotSpace.yRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(1.0) length:CPTDecimalFromFloat(20.0)];

CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;

CPTXYAxis *x          = axisSet.xAxis;
x.labelFormatter = nil;
x.labelingPolicy = CPTAxisLabelingPolicyNone;
x.axisLineStyle = nil;

CPTXYAxis *y = axisSet.yAxis;
y.labelFormatter = nil;
y.labelingPolicy = CPTAxisLabelingPolicyNone;
y.axisLineStyle = nil;

CPTScatterPlot *dataSourceLinePlot = [[CPTScatterPlot alloc] init];

CPTMutableLineStyle *lineStyle = [dataSourceLinePlot.dataLineStyle mutableCopy];
lineStyle.lineWidth              = 1.f;
lineStyle.lineColor              = [CPTColor whiteColor];
dataSourceLinePlot.dataLineStyle = lineStyle;

dataSourceLinePlot.dataSource = self;

[graph addPlot:dataSourceLinePlot];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:15:59.387

它真的是一条虚线，还是只是抗锯齿伪影？尝试增加线条宽度和/或更改线条颜色以首先排除这种情况。

# php - 如何从其他计算机访问 localhost(xampp)

> ID：10828343
> 
> 赞同：6
> 
> 时间：2012-05-31T06:14:23.477
> 
> 标签：php, apache, xampp, localhost

我已经在我的计算机上安装了 XAMPP。我想在另一台计算机上输入我的 IP 地址时访问我的本地主机。但是当我输入我的 IP 地址时，它会将我带到我的调制解调器设置页面。请帮助我。（我正在使用 IP 地址来自whatismyip.com）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T06:18:41.930

如果您尝试从本地网络上的另一台计算机访问本地 XAMPP，则需要使用本地 IP 地址。可能类似于 192.168.xx（在 Windows 机器上，您可以在命令提示符中键入“ipconfig”来获取此 IP）

如果您尝试从本地网络外部访问，则需要通过路由器将端口 80 转发到运行 XAMPP 的计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:18:07.903

您需要在防火墙上打开端口 80（或您用于 Apache 的任何端口）。对于大多数路由器，这在[http://portforward.com/](http://portforward.com/)中有很好的记录。

我还建议您使用[DynDNS](http://dyn.com/dns/)之类的东西，这样可以减少动态 IP 的麻烦。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-05-31T07:11:38.317

首先，您需要将计算机配置为从路由器获取静态 IP。可以找到有关如何执行此操作的说明：这里

例如，假设您选择了 IPaddress 。完成上述步骤后，您应该可以通过访问“http://localhost”和“http://theipaddress”来访问本地计算机上的网站，因为您的计算机现在将始终拥有该 IP 地址在您的网络上。

如果你查找你的IP地址（例如“http://www.ip-adress.com/”），你看到的IP实际上是你路由器的IP。当你的朋友访问你的网站时，你会给他这个IP。但是，您需要告诉您的路由器，当它收到对网页的请求时，将该请求转发到您的服务器。这是通过端口转发完成的。

可以在此处和此处找到如何执行此操作的两个示例，尽管您看到的确切屏幕会因路由器制造商而异（如果需要，请通过 Google 获取确切说明）。

对于我拥有的 Linksys 路由器，我输入“http://192.168.1.1/”，输入我的用户名/密码，应用程序和游戏选项卡 > 端口范围转发。输入应用程序名称（随便你怎么称呼它）、起始端口（80）、结束端口（80）、协议（TCP）、IP地址（使用上面的例子，你将输入192.168.1.102，这是静态IP您分配了您的服务器），并确保选中以启用转发。重新启动路由器，更改应生效。

完成所有这些后，您现在应该能够通过访问他机器上的网络浏览器并输入“http://IP.address.of.your.computer”来访问您的网页（与您在此处看到的相同） ）。

如前所述，无论您是否离线登录，您的 ISP 分配给您的 IP 地址最终都会改变。

我希望这有帮助。

# javascript - 出乎意料的结果 - 针对约克郡的 Google 自动填充

> ID：10828345
> 
> 赞同：5
> 
> 时间：2012-05-31T06:14:31.807
> 
> 标签：javascript, google-maps, autocomplete

我使用谷歌地图自动完成 API 对“约克郡”得到了意想不到的结果。我已过滤结果以仅显示英国的地区。请帮我

以下是我在搜索约克郡时得到的结果：

*   北约克郡，Royaume-Uni
*   约克郡东方酒店，Reino Unido
*   约克郡德尔南，雷诺统一

下面是代码：

```
<script src="http://maps.google.com/maps?file=api&v=2&key=MYGooGleAPiKey" type="text/javascript"></script><script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places&language=en"></script><script>
$(function() {

    var options = {
        types: ['(regions)'],
        componentRestrictions: {country: 'uk'},
        region: ['(GB)']
    };

    var autocomplete = new google.maps.places.Autocomplete($("#txt_search")[0], options);

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
        var place = autocomplete.getPlace();
        //console.log(place.address_components);
    });
});</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-16T14:09:11.873

这似乎是 API 中的一个错误，请参阅[https://code.google.com/p/gmaps-api-issues/issues/detail?id=8619](https://code.google.com/p/gmaps-api-issues/issues/detail?id=8619)如果您想看到他们修复它，请加注星标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:28:46.453

在 ISO 3166-1 Alpha-2 兼容的国家代码规范中，国家“英国”不存在。你用GB试过吗？

检查此链接：[http ://www.iso.org/iso/home/standards/country_codes/country_names_and_code_elements.htm](http://www.iso.org/iso/home/standards/country_codes/country_names_and_code_elements.htm)

# wordpress - 如何在wordpress post中动态分配图像

> ID：10828347
> 
> 赞同：0
> 
> 时间：2012-05-31T06:14:38.123
> 
> 标签：wordpress, wordpress-theming

我正在开发一个 wordpress 网站。我在里面发了一篇文章。现在我想在那篇文章中分配图像。为此，我在媒体中上传了一张图片并将该图片附加到我的帖子中。

但是如何在我的帖子中分配上传的图片？我需要手动提供路径吗？或者我可以提供动态路径，这样即使我在服务器上上传此站点或更改主文件夹名称，路径也会自动更改..

任何帮助将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:25:14.647

您应该考虑在帖子中使用[帖子缩略图](http://codex.wordpress.org/Post_Thumbnails)（也称为特色图片）。为此，您需要做的就是将以下内容添加到您的 functions.php 文件中：

```
add_theme_support('post-thumbnails'); 
```

这将在您的帖子编辑器中添加一个控件，以通过上传或设置 URL 来添加图像，以您查找的方式有效地将您的图像“附加”到您的帖子。要在模板中显示图像：

```
<?php
if(have_posts()) : while(have_posts()) : the_post();
    if(has_post_thumbnail())
        echo '<div class="post_thumb">'.get_the_post_thumbnail().'</div>';
?>
<div class="post_content"><?php the_content(); ?></div>
<?php
endwhile;endif;
?> 
```

至于更改文件夹名称、路径等，您需要小心使用这种方法。请记住，您正在为资产提供路径。服务器不知道你想要什么，只知道你的代码请求什么。如果您希望更改资源的路径相当多，那么您总是可以放弃 Post Thumbnails 以支持巧妙的命名约定。像这样的东西：

```
<?php
if(have_posts()) : while(have_posts()) : the_post();
$imgPath = get_bloginfo('stylesheet_directory').'/images/featured_'.$post->post_name.'.jpg';
?>
<div class="post_thumb"><img src="<?php echo $imgPath; ?>" /></div>
<div class="post_content"><?php the_content(); ?></div>
<?php
endwhile;endif;
?> 
```

这会在主题目录的图像文件夹中查找名为 features_{post_slug}.jpg 的图像

这种方法的好处是，无论 URL 发生什么变化，Wordpress 都将始终知道您的主题文件夹在哪里。只要你的主题目录中有一个 images 文件夹，Wordpress 就会知道去哪里找。

缺点是这段代码在显示图像之前没有首先检查图像的存在性，如果图像命名不正确或根本不存在，可能会导致图像损坏。这种方法还需要使用一个文件扩展名

您的最后一个选择是考虑使用[自定义字段](http://codex.wordpress.org/Custom_Fields)来定义图像的路径。好处是这不需要您将图像实际上传到您的服务器。但是，这种方法仍然是所有选项中动态性最低的，并且如果资产路径发生更改，可能会中断。

使用您认为最适合这项工作的任何工具。希望这可以帮助！

# android - 片段不起作用

> ID：10828351
> 
> 赞同：0
> 
> 时间：2012-05-31T06:14:58.177
> 
> 标签：android, android-layout, android-fragments

我有这样的主要布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <Button
        android:id="@+id/btn_showdetails"
        android:layout_width="100dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="110dip"
        android:layout_marginTop="15dip"
        android:text="Show Details" />

    </LinearLayout>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
     android:id="@+id/my_parent_layout"
    >
    </LinearLayout>

</LinearLayout> 
```

我正在尝试使用此类包 com.appnetics 调用 my_parent_layout 中的另一个活动；

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.View;
import android.widget.Button;

public class FragmenttestActivity extends FragmentActivity {
    Button LogIn = null ;
    final   FragmentManager fragmentManager =    getSupportFragmentManager()  ;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LogIn = (Button) findViewById(R.id.btn_showdetails); 
        LogInEvent() ; 
    }
public void LogInEvent(){

        LogIn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
                        details fragment = new details();
                        fragmentTransaction.add(R.id.my_parent_layout, fragment);
                        fragmentTransaction.commit();

            }
        }); 

    }

} 
```

详细布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

   <TextView
        android:id="@+id/date_time_label"
        android:layout_centerVertical="true"
        android:layout_marginLeft="200dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:textSize="32dp"
        android:textStyle="bold"

        android:text="time_label"
        />

    <TextView
        android:id="@+id/last_view_time"
        android:layout_toRightOf="@+id/date_time_label"
        android:layout_alignBaseline="@+id/date_time_label"
        android:layout_marginLeft="8dip"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="32dp"

        />

</LinearLayout> 
```

并且布局代码是 /* $Id: $ */

```
package com.appnetics;

import java.text.SimpleDateFormat;
import java.util.Date;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

/**
 * DateTime
 */
public class details extends Fragment {
    private static String getDateTimeString(Date time) {
        return new SimpleDateFormat("d MMM yyyy HH:mm:ss")
            .format(time);
    }

    private final String time = getDateTimeString(new Date());

    /** @see android.app.Fragment#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle) */
    @Override
    public View onCreateView(
        LayoutInflater inflater,
        ViewGroup container,
        Bundle b)
    {
        View view = inflater.inflate(
            R.layout.details,
            container,
            false);  //!!! this is important

        ((TextView) view.findViewById(R.id.last_view_time))
            .setText(time);

        return view;
    }
} 
```

问题是当点击按钮时，什么都没有出现，知道我的代码有什么问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T07:27:24.523

开始吧！

在您的详细信息 XML 上：

```
android:layout_toRightOf="@+id/date_time_label"
android:layout_alignBaseline="@+id/date_time_label" 
```

这两个标签用于相对布局，布局的父级必须是相对类型才能工作。

```
android:layout_centerVertical="true" 
```

这个标签也是不正确的，如果你想在 textview 中居中文本，你可以使用两种方式或在 textView 中包装内容并在其父级中设置中心或使用：

```
android:gravity="right"
android:width="fill_parent" 
```

这将是 detail_fragment.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TextView
    android:id="@+id/date_time_label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:textSize="32dp"
    android:textStyle="bold"
    android:text="time_label"
    />

<TextView
    android:id="@+id/last_view_time"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:text="view time"
    android:textSize="32dp" />

</LinearLayout> 
```

在您的 main.xml 中，您多次声明模式！应该在你的根布局上声明一次。

```
 LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
```

所以 main.xml 将是......

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center_horizontal"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<Button
    android:id="@+id/add_fragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

<LinearLayout
    android:id="@+id/fragment_holder"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

</LinearLayout>

</LinearLayout> 
```

片段是在其类中声明并应用其 xml 的元素。

```
public class DetailsFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.fragment, container, false);
}
} 
```

并在主要活动中将其添加到持有者布局中：

```
public class FragmentSimpleTestActivity extends FragmentActivity {

private Button addFragment;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);   

    final FragmentManager fragmentManager = getSupportFragmentManager();

    addFragment = (Button) findViewById(R.id.add_fragment);

    addFragment.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {   
            FragmentTransaction fragmentTransaction =      fragmentManager.beginTransaction();
            DetailsFragment fragment = new DetailsFragment();
            fragmentTransaction.add(R.id.fragment_holder,fragment, "MY_FRAG");
            fragmentTransaction.commit();
        }
    });
}
} 
```

fragmentTransaction.add 有参数很重要

1：保存片段的视图的ID。2：片段对象。3：用于在堆栈中查找片段的标签。

就这样 ：）

享受你的片段！您还可以在添加或删除它时设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:15:26.883

onCreateView()

> 当片段第一次绘制其用户界面时，系统会调用它。要为您的 Fragment 绘制 UI，您必须从此方法返回一个 View，它是 Fragment 布局的根。如果片段不提供 UI，您可以返回 null。

在片段类中调用 OnCreateView

```
 return inflater.inflate(R.layout.fragmentlayout, container, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T16:36:50.710

当片段没有出现时，我遇到了类似的问题。问题是我删除了 AndroidAnnotations，但忘记将代码从 onViewCreated 和 onCreate 方法移动到 onCreateView。我通过比较两个片段的代码发现了这个错误——一个出现了，另一个没有出现。因此，如果您有类似的问题，请尝试检查片段的代码。乍一看，它可能不会显示任何错误，但由于这些错误，它仍然无法工作或显示。

特别是，检查你是否有这个方法并且你膨胀了一个视图：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.your_fragment_layout, container, false);
    return v;

} 
```

# java - 上传到 S3 的 Http 响应实体不是空的，而是像它一样

> ID：10828352
> 
> 赞同：0
> 
> 时间：2012-05-31T06:15:11.177
> 
> 标签：java, android, http, amazon-s3, http-chunked

我正在尝试通过授权将文件上传到我的 Amazon S3 存储桶。我知道我的签名有效：使用与[hurl.it](http://hurl.it)相同的 url、标题和签名可以成功上传。

我也知道使用我的程序进行常规文件上传是有效的：如果我关闭 S3 安全性并删除标题，则上传工作正常。

```
HttpClient client = new DefaultHttpClient();
url = "http://mybucket.s3.amazonaws.com/test/" + filename;

HttpPut put = new HttpPut(url);
put.setEntity(entity);
put.addHeader("Date", formattedDate);
put.addHeader("Authorization",
              "AWS " + c.getString(R.string.AWSAccessKeyId) +
              ":" + signature);
put.addHeader("Content-Type",contentType);

HttpResponse httpResponse = client.execute(put);
Log.e(TAG, allHeaders(httpResponse));

HttpEntity responseEntity = httpResponse.getEntity();
InputStream content = responseEntity.getContent();
InputStreamReader is = new InputStreamReader(content);
BufferedReader br = new BufferedReader(is,2000);

String read = br.readLine();
Log.e("AUTH", ">>>"+read+"<<<");
String response = "";
while (read != null){
    Log.e("AUTH", read);
    read = br.readLine();
    response += read + "\n";
}

Log.e("Code:", ""+httpResponse.getStatusLine().getStatusCode()); 
```

还值得注意的是，我在 Android 模拟器上异步执行此操作。

生成的标题（使用 显示`Log.e(TAG, allHeaders(httpResponse))`）是：

```
Date: Thu, 31 May 2012 05:58:08 GMT
Connection: close
Server: AmazonS3
Transfer-Encoding: chunked 
```

响应状态码是`400: Bad Request`。

所以奇怪的是我得到了这些标题，但是来自的内容流`responseEntity.getContent()`完全是空的——我没有进入 while 循环。

我也尝试切换到有`HttpGet`针对性的`www.google.com`，这完全没问题。

我对分块编码做错了吗？有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:43:44.750

我不知道为什么会这样，但不知何故，我的签名编码添加了一些完全与整个 http 模型搞砸的隐藏字符。我只是使用了没有最后一个字符的签名子字符串，并且能够读取分块流。

# ms-word - 显示图像的内容页面

> ID：10828358
> 
> 赞同：0
> 
> 时间：2012-05-31T06:15:39.043
> 
> 标签：ms-word

我正在 Word 中创建内容页面。出于某种原因，我从 Visio 粘贴的对象显示在页面列表中......

为什么是这样？

更重要的是，我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:18:49.977

好的，简单。只是将图像设置为标题。

索兹人。

# windows-phone-7 - windows phone 7 bing 地图中图钉信息框的示例？

> ID：10828361
> 
> 赞同：1
> 
> 时间：2012-05-31T06:15:45.513
> 
> 标签：windows-phone-7

在 windows phone 7 中单击图钉时如何显示信息框？即单击图钉时需要在数据右侧显示一些数据和箭头按钮。请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:54:11.227

当您单击图钉时，您会显示消息框。即在您的点击事件中放置消息框。参见下面的编码

```
 pin[i] = new Pushpin();
                        pin[i].Location = new GeoCoordinate(Latitude, LongLatitude);

                        map1.Children.Add(pin[i]);
                        myCoorditeWatcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
                        myCoorditeWatcher.MovementThreshold = 20;

                        var gl = GestureService.GetGestureListener(pin[i]);
                        gl.Tap += new EventHandler<GestureEventArgs>(GestureListener_Stack_Tap);

 private void GestureListener_Stack_Tap(object sender, Microsoft.Phone.Controls.GestureEventArgs e)
        {
            for (int i = 0; i <= ClsGetDeviceMap.lstLongLatitude.Count - 1; i++)
            {
                if (sender.Equals(pin[i]))
                {
                    MessageBox.Show(ClsGetDeviceMap.lstLocationName.ElementAt<string>(i).Trim());
                                        MessageBox.Show(ClsGetDeviceMap.lstLatitude.ElementAt<string>(i).Trim());
                    MessageBox.Show(ClsGetDeviceMap.lstLongLatitude.ElementAt<string>(i).Trim());

                }
          }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T11:19:30.733

Bind sdk 站点上有很多示例：http: [//www.bingmapsportal.com/isdk/ajaxv7](http://www.bingmapsportal.com/isdk/ajaxv7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:10:32.763

您可以自定义您的图钉

例如 ：

```
<my:Map Name="map1">

                <my:Map.Resources>
                    <DataTemplate x:Key="pushpinTpl">
                        <my:Pushpin PositionOrigin="{Binding position}">
                            <my:Pushpin.ContentTemplate>
                                <DataTemplate>
                                    <ToggleButton x:Name="togButt" >
                                        <Grid>
                                            <TextBlock Text="click" 
                                                       Visibility="{Binding ElementName=togButt,Path=IsChecked,Converter={StaticResource BoolConverter},ConverterParameter=!}"/>
                                            <TextBlock Text="alternative content" 
                                                       Visibility="{Binding ElementName=togButt,Path=IsChecked,Converter={StaticResource BoolConverter}}"/>
                                        </Grid>
                                    </ToggleButton>
                                </DataTemplate>
                            </my:Pushpin.ContentTemplate>
                        </my:Pushpin>
                    </DataTemplate>
                </my:Map.Resources>

                <my:MapItemsControl ItemsSource="{Binding items}" 
                                    ItemTemplate="{StaticResource pushpinTpl}"
                                    />
            </my:Map> 
```

希望这有帮助:)

# android - 如何使用 XmlPullParser 解析 xml

> ID：10828365
> 
> 赞同：0
> 
> 时间：2012-05-31T06:16:29.683
> 
> 标签：android, xml, hashmap, xmlpullparser, linkedhashmap

我正在尝试使用 XmlPullParser 以类似的格式解析 xml 文件

```
<BOOK bnumber="1">
<CHAPTER cnumber="1">
<VERS vnumber="1">abc</VERS>
<VERS vnumber="2">cde</VERS>
<VERS vnumber="3">fgh</VERS>
</CHAPTER>
<CHAPTER cnumber="2">
<VERS vnumber="1">abc</VERS>
<VERS vnumber="2">cde</VERS>
<VERS vnumber="3">fgh</VERS>
</CHAPTER>
</BOOK> 
```

以下是我尝试开发的代码。我想要做的是将数据放入一个数组中，以便我可以调用数据并稍后使用它。您能否就如何修改代码以适合我的目的提供一些建议？

```
ArrayList<LinkedHashMap<String, ArrayList<LinkedHashMap<String, String>>>> array;
ArrayList<LinkedHashMap<String, String>> array2;
LinkedHashMap map,map_1 ;   

try {
                /** Handling XML */
                    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
                factory.setNamespaceAware(true);
                XmlPullParser xpp = factory.newPullParser();
            /** Handling XML */

            /** Send URL to parse XML Tags */
            URL sourceUrl = new URL(
                    "http://123.com/mobile/1.xml");
            /** Create handler to handle XML Tags ( extends DefaultHandler ) */
             xpp.setInput(sourceUrl.openStream(), null);
             int eventType = xpp.getEventType();
             String currentTag = null;

             while (eventType != XmlPullParser.END_DOCUMENT) {
                 switch (eventType) {

                 case XmlPullParser.START_DOCUMENT:
                     System.out.println("START_DOCUMENT "+xpp.getName());

                     array = new ArrayList<LinkedHashMap<String, ArrayList<LinkedHashMap<String, String>>>>();

                     break;

                 case XmlPullParser.START_TAG:

                     if ("CHAPTER".equals(xpp.getName()))
                     {
                     array2 = new ArrayList<LinkedHashMap<String, String>>();
                     map_1 = new LinkedHashMap<String, Object>();
                     map_1.put("cnumber",xpp.getAttributeValue(0));

                     }
                     else if ("VERS".equals(xpp.getName()))
                     {
                     map = new LinkedHashMap<String, Object>();
                     String Vers_number = xpp.getAttributeValue(0);
                     String Vers_content=xpp.nextText();
                     map.put("vnumber",Vers_number);
                     map.put("vcontent",Vers_content);
                     array2.add(map);
                     }

                     break;

                 case XmlPullParser.END_TAG:
                     if ("CHAPTER".equals(xpp.getName()))
                     {
                    map_1.put("in",array2);
                    array.add(map_1);}
                     break;  
                 }

                 eventType = xpp.next();  
             }

             itemCount=array.size();

            }catch (Exception e) {
                System.out.println("XML Pasing Excpetion = " + e);
            } 
```

取回数据的代码[我不知道怎么做，以下是我的想法]

```
try{  
            for(int i=0;i<itemCount;i++)
            {

        ArrayList<LinkedHashMap<String, String>> ch=array.get(i).get("cnumber");
        ArrayList<LinkedHashMap<String, String>> in=array.get(i).get("in");

            } 
```

# wpf - WinForms - WPF 像绘画

> ID：10828371
> 
> 赞同：3
> 
> 时间：2012-05-31T06:17:08.157
> 
> 标签：wpf, winforms, double-buffering

我们非常清楚创建一个 WPF 应用程序是多么容易，用户可以使用鼠标在其中绘制一个矩形。为此，您只需创建一个 Rectangle 控件并设置它的坐标，您不必担心 DoubleBuffering、重新绘制等。好吧，我很高兴你将 WPF 用于用户可以绘制不同形状的应用程序，但客户坚持使用 WinForms 应用程序。所以这里的解决方案是使用 XOR 或 ROP 操作，就像在旧的良好 WinAPI 年代一样，我不太喜欢这样。这并没有给我一个在 XOR 模式下移动文本的好选择。

所以我在想如何在 WinForms 应用程序中实现与 WPF 中相同的流畅绘画体验。将这样的代码放在一起，我想在其中创建一个单独的图层，在其中绘制当前形状，同时保持其余对象不变。我在 iPad 应用程序中使用了相同的技术并且效果很好。

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.Windows.Forms;

namespace TestPainting
{
    public partial class Form1 : Form
    {
        private bool _isMouseDown;
        private Graphics _bufferGraphics;
        private Point _startPos;
        private TransparentPanel _paintBuffer;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void Form1_MouseDown(object sender, MouseEventArgs e)
        {
            _isMouseDown = true;
            _paintBuffer = new TransparentPanel
                            {
                                Size = Size,
                            };
            Controls.Add(_paintBuffer);
            _paintBuffer.BringToFront();

            _bufferGraphics = Graphics.FromHwnd(_paintBuffer.Handle);
            _startPos = e.Location;
            Capture = true;
        }

        private void Form1_MouseMove(object sender, MouseEventArgs e)
        {
            if (!_isMouseDown)
                return;

            _bufferGraphics.Clear(Color.Transparent);
            _bufferGraphics.DrawRectangle(Pens.Green, _startPos.X, _startPos.Y, e.X - _startPos.X, e.Y - _startPos.Y);

        }

        private void Form1_MouseUp(object sender, MouseEventArgs e)
        {
            _isMouseDown = false;
            Capture = false;
            _bufferGraphics.Dispose();
            Controls.Remove(_paintBuffer);
            _paintBuffer.Dispose();
        }
    }

    public class TransparentPanel : Panel
    {
        public TransparentPanel()
        {
            DoubleBuffered = true;
        }

        [Browsable(false)]
        protected override CreateParams CreateParams
        {
            get
            {
                CreateParams cp = base.CreateParams;
                cp.ExStyle |= 0x20;
                return cp;
            }
        }

        protected override void OnPaintBackground(PaintEventArgs e)
        {
            // Do Nothing
        }
    }
} 
```

如果课程不能按需要工作。按下鼠标而不是透明面板时，我得到一个黑色面板。加上绘制时的矩形闪烁很多，即使我确实设置了 DoubleBuffering 的东西。

有人可以提供一些关于这种实现的更好的想法，或者也许还有其他一些开源项目，我可以看到其他人在做什么。我需要有与 Paint.NET 相同的经验，可惜不再是开源的了。（我知道我可以使用 Reflector，而且我做到了，但是伙计，那里有很多代码 :)）

感谢任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:06:53.863

试试这个（参见 FIX #1 和 FIX #2）：

```
 private void Form1_MouseDown( object sender, MouseEventArgs e )
    {
        _isMouseDown = true;
        _paintBuffer = new TransparentPanel
        {
            Size = Size,
        };
        Controls.Add( _paintBuffer );
        _paintBuffer.BringToFront();

        // FIX #1:
        //
        this.Refresh();

        _bufferGraphics = Graphics.FromHwnd( _paintBuffer.Handle );

        _startPos = e.Location;
        Capture = true;
    }

    private void Form1_MouseMove( object sender, MouseEventArgs e )
    {
        if ( !_isMouseDown )
            return;

        //FIX #2:
        //   _bufferGraphics.Clear( Color.Transparent );
        _bufferGraphics.Clear( this.BackColor );

        _bufferGraphics.DrawRectangle( Pens.Green, _startPos.X, _startPos.Y, e.X - _startPos.X, e.Y - _startPos.Y );

    } 
```

# c# - 写入文件需要针对大流量进行优化

> ID：10828372
> 
> 赞同：1
> 
> 时间：2012-05-31T06:17:10.123
> 
> 标签：c#, io

我对 C# 很陌生，这是我的第一个问题，请对我温柔

我正在尝试编写一个应用程序来从数据提供者那里捕获一些刻度数据，下面是程序的主要部分

```
void zf_TickEvent(object sender, ZenFire.TickEventArgs e)
{

    output myoutput = new output();

    myoutput.time = e.TimeStamp;
    myoutput.product = e.Product.ToString();
    myoutput.type = Enum.GetName(typeof(ZenFire.TickType), e.Type);
    myoutput.price = e.Price;
    myoutput.volume = e.Volume;

    using (StreamWriter writer = File.AppendText("c:\\log222.txt"))
    {

        writer.Write(myoutput.time.ToString(timeFmt) + ",");
        writer.Write(myoutput.product + "," );
        writer.Write(myoutput.type + "," );
        writer.Write(myoutput.price + ",");
        writer.Write(myoutput.volume + ",");

    } 
```

我已经成功地将数据写入文本文件，但是我知道这个方法在高峰时间每秒会被调用 10000 次，并且打开一个文件并每秒附加很多次是非常低效的，我被指出使用缓冲区或某种，但我不知道该怎么做，我尝试阅读文档但我仍然不明白，这就是我在这里求助的原因。

请给我一些（工作）代码段，以便我可以指出写入方向。谢谢

编辑：我已经尽可能地简化了代码

```
 using (StreamWriter streamWriter = File.AppendText("c:\\output.txt"))
    {
        streamWriter.WriteLine(string.Format("{0},{1},{2},{3},{4}",
                        e.TimeStamp.ToString(timeFmt),
                        e.Product.ToString(),
                        Enum.GetName(typeof(ZenFire.TickType), e.Type),
                        e.Price,
                        e.Volume));
    } 
```

ED 告诉我要把我的流放到一个字段中，语法是什么样的？任何人都可以发布一些代码来帮助我吗？多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:27:12.813

您需要为流创建一个字段而不是局部变量。在构造函数中初始化一次，不要忘记在某个地方关闭它。最好实现`IDisposable`接口并在`Dispose()`方法中关闭流。

[一次性](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

```
class MyClass : IDisposable {
    private StreamWriter _writer;

    MyClass() {
        _writer = File.App.....;
    }

    void zf_TickEvent(object sender, ZenFire.TickEventArgs e)
    {

        output myoutput = new output();

        myoutput.time = e.TimeStamp;
        myoutput.product = e.Product.ToString();
        myoutput.type = Enum.GetName(typeof(ZenFire.TickType), e.Type);
        myoutput.price = e.Price;
        myoutput.volume = e.Volume;

        _writer.Write(myoutput.time.ToString(timeFmt) + ",");
        _writer.Write(myoutput.product + "," );
        _writer.Write(myoutput.type + "," );
        _writer.Write(myoutput.price + ",");
        _writer.Write(myoutput.volume + ",");

    }

    public void Dispose() { /*see the documentation*/ }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:29:57.167

你可以做很多事情

第 1 步。确保不要进行多次 io 调用和字符串连接。

```
Output myOutput = new Outoput(e); // Maybe consruct from event args?

// Single write call, single string.format
writer.Write(string.Format("{0},{1},{2},{3},{4},{5}", 
  myOutput.Time.ToString(), 
  myOutput.Product, 
  ...); 
```

无论您当前的表现如何，我都建议您这样做。我还做了一些外观上的更改（变量/属性/类名大小写。您应该查看变量和属性之间的区别及其推荐的大小写等）

第 2 步。分析您的表现，看看它是否符合您的要求。如果是这样，则无需再做任何事情。如果性能仍然太差，你可以

*   保持文件打开并在处理程序关闭时将其关闭。
*   写入缓冲区并定期刷新它。
*   使用像[log4net](http://logging.apache.org/log4net/)这样的记录器框架，它会在内部为您处理上述问题，并处理诸如从多个线程访问日志文件之类的棘手问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-31T06:24:25.100

我会使用 String.Format：

```
using (StreamWriter writer = new StreamWriter(@"c:\log222.txt", true))
        {
            writer.AutoFlush = true;
            writer.Write(String.Format("{0},{1},{2},{3},{4},", myoutput.time.ToString(timeFmt), 
                myoutput.product, myoutput.type, myoutput.price, myoutput.volume);
        } 
```

如果您`@`在字符串之前使用，则不必使用 double `\`。

这要快得多 - 您只向文件写入一次而不是 5 次。此外，您不要将`+`运算符与字符串一起使用，这不是最快的操作；）

另外——如果这是多线程应用程序——你应该考虑使用一些锁。它会阻止应用程序尝试从例如写入文件。一次2个线程。

# javascript - 通过使用 JQuery 保留其内容来去除不需要的 html 元素

> ID：10828373
> 
> 赞同：0
> 
> 时间：2012-05-31T06:17:10.723
> 
> 标签：javascript, jquery

我有很多 html 内容的输入。寻找一个 jquery 函数来有效地去除不需要的元素（只是元素，但需要保留内容），要保留的元素将是我指定的元素。还希望该功能易于配置以添加或删除我不想要的元素。例如： var tagsToRetain="p,i,u,br";

我在下面尝试过，但这需要指定我不想要的元素，这样做会很乏味。

```
$("span,h1,h2").each(function(){
$(this).replaceWith($(this).html());
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:52:24.237

如果我理解正确，您想指定循环*不应*处理哪些元素。`.each()`如果是这样，请使用[`:not()`选择器](http://api.jquery.com/not-selector/)或[`.not()`方法](http://api.jquery.com/not/)：

```
$("body *:not(p,i,u,br)").each(function(){
   $(this).replaceWith($(this).html());
});​

// OR:
$("body *").not("p,i,u,br").each(function(){
   $(this).replaceWith($(this).html());
});​

// OR, encapsulated in a function with a clunky name:

function stripElementsNotSpecified(tagsToRetain) {
   $("body *").not(tagsToRetain).each(function(){
      $(this).replaceWith($(this).html());
   });
}

stripElementsNotSpecified("p,i,u,br");​ 
```

请注意，如果没有`"body *"`选择器部分，该`:not(p,i,u.br)`部分将选择文档的 html、head、脚本等元素。用`"body *"`它只选择身体的孩子。

# android - 推送通知参数

> ID：10828375
> 
> 赞同：0
> 
> 时间：2012-05-31T06:17:15.347
> 
> 标签：android, iphone, ios, push-notification, push

我想问你关于推送通知到iOS和Android设备的参数。我的问题是：

可以向这两种类型的设备发送什么？我的意思是我发送的字符串、主题、操作按钮等的一些限制。我们需要支持像 iPhone 3g 这样的“旧”设备。iOS 5 中的横幅或警报（用户设置）之间是否存在一些差异。Android 呢？

我们想向用户发送一些可能打开我们的应用程序的文本。

非常感谢您的回答。

亲切的问候，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:24:03.750

对于 iOS，推送通知的有效负载限制为 256 字节，这并不算多。您无法修改通知到达时将向用户显示的 AlertView。它只有这两个按钮（查看和关闭。查看将打开应用程序）。但是所有 iOS 版本的通知都是相同的。

# iphone - UITapGestureRecognizer 相互冲突

> ID：10828376
> 
> 赞同：0
> 
> 时间：2012-05-31T06:17:18.043
> 
> 标签：iphone, objective-c, ios, ipad, uitapgesturerecognizer

所以我有两个 UITapGestureRecognizer 一个用于单击，另一个用于双击。但是，当我双击时，也会触发单击动作手势识别器。有没有办法禁用此功能，以便双击仅调用双击操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T06:22:13.477

尝试

```
[singleTap requireGestureRecognizerToFail:doubleTap]; 
```

# javascript - 如何将 Javascript 代码转换为 Jquery 代码？

> ID：10828381
> 
> 赞同：0
> 
> 时间：2012-05-31T06:17:36.127
> 
> 标签：javascript, jquery

请帮助我，这是Javascript中的代码，我需要将此代码更改为Jquery。

```
eval("parent.document.forms[0].strKey" + 
      intDimensionId).value = strIds[intDimensionId]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:28:17.363

高性能：最小的 jQuery：`$('form:first')[0]["strKey" + intDimensionId].value = strIds[intDimensionId];`

不如高性能：完整的 jQuery：`$('form:first *[name="strKey' + intDimensionId + '"]').val(strIds[intDimensionId]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:22:47.903

这应该可行，尽管确实有很多方法可以做到这一点。还要注意输入标签的使用。您的代码可能使用不同的标签，因此请相应更新。

```
$('input[name=strKey'+intDimensionId+']',
   parent.document.forms[0]).val(strIds[intDimensionId]); 
```

# asp.net - 显示对空异常的对象引用的会话

> ID：10828385
> 
> 赞同：0
> 
> 时间：2012-05-31T06:18:05.537
> 
> 标签：asp.net, vb.net, session

我有一个与本地主机完美运行的 VB.NET 应用程序。但是当我将它上传到我的服务器时，会话对象会抛出空引用异常。

会话不在单个页面中工作。如果我在任何其他页面上使用会话，它工作得很好。

我已经使用该`EnableSessionState`属性在该页面中启用了会话。同样在`web.config`我启用了会话变量的使用。

我使用会话的方式如下：

```
HttpContext.Current.Session("leftmenu").ToString() 
```

我也尝试过添加`System.Web`infront，但没有成功。

请推荐一些有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:23:51.970

在使用之前检查会话变量是否为空。

伪代码

```
if(HttpContext.Current.Session("leftmenu") is not null) 
    HttpContext.Current.Session("leftmenu").ToString() 
```

# jquery - 即使在回发之后也使用 jquery 更改 li 的颜色或父级

> ID：10828388
> 
> 赞同：1
> 
> 时间：2012-05-31T06:18:14.893
> 
> 标签：jquery, css, postback, parent

我有一棵具有以下结构的树：

```
Home
Products
    Product1
    Product2
Item1
Item2
Item3 
```

我要求选择产品1时，产品的颜色应为红色。为此，我使用了以下 jquery：

```
<script type="text/javascript">
$(document).ready(function () {
     $(".leftnav li ul li").click(function(){
       var thisAnchor = $(this);
       var parent = $(thisAnchor).parent().parent();
       $(parent).children("a").css('color','red');
    }); 
});
</script> 
```

这里 leftnav 是包含树结构的 div 上使用的类。一旦我点击**Product1**颜色就会改变，但一旦页面回发就会消失。有人可以指导我如何解决这个问题。

问候，斯瓦蒂耆那教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:38:41.203

如果我理解正确，您需要在回发中保持状态。要么你可以

1.  将当前选择状态回发到服务器并在生成的 html 上为回发设置颜色
2.  将当前选择状态存储在 cookie 中（查看 jquery cookie 插件）并修改颜色`document.ready`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:40:42.203

您需要使用 php 动态设置类或设置页面 id/类，以便页面知道它在哪里。例如，如果您在产品页面上，正文标签将有一个 id 或产品。然后在你的CSS中，你可以将产品导航元素设置为红色

```
body#products .leftnav li ul li.on{
 color: red;
} 
```

您的 html 将位于产品页面上，如下所示：

```
<body id="products">
...
<ul>
  <li>
    <ul>
      <li class="on">
         Products
      </li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:41:39.053

好吧，您可能可以准备好文档上的页面 url 并做一些 if 条件，或者您可以在加载更改颜色的页面上添加一个静态 jscript，再次在页面准备好时。顺便说一句，要获取 url，只需编写 var url = window.location.href

# java - 如何获取上个月的第一个日期和最后一个日期？（爪哇）

> ID：10828398
> 
> 赞同：20
> 
> 时间：2012-05-31T06:18:57.863
> 
> 标签：java, datetime, date

有了今天的日期，我应该得到上个月的第一个日期和最后一个日期。我想不出任何逻辑。

例如，在通过`05/30/2012`时，我应该得到`04/01/2012`and `04/30/2012`。

任何帮助都感激不尽。谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-31T06:24:08.377

和[`Calendar`](http://docs.oracle.com/javase/1.6/docs/api/java/util/Calendar.html)

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.MONTH, -1);
cal.set(Calendar.DATE, 1);
Date firstDateOfPreviousMonth = cal.getTime();

cal.set(Calendar.DATE, cal.getActualMaximum(Calendar.DATE)); // changed calendar to cal

Date lastDateOfPreviousMonth = cal.getTime(); 
```

**看**

*   [ideone演示](http://ideone.com/ErCbI)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-01T07:55:11.190

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T06:20:59.023

使用[乔达时间](http://joda-time.sourceforge.net/)

```
DateMidnight now = new DateMidnight();
DateMidnight beginningOfLastMonth = now.minusMonths(1).withDayOfMonth(1);
DateMidnight endOfLastMonth = now.withDayOfMonth(1).minusDays(1);
System.out.println(beginningOfLastMonth);
System.out.println(endOfLastMonth); 
```

输出：

> 2012-04-01T00:00:00.000+02:00
> 2012-04-30T00:00:00.000+02:00

说明： DateMidnight 对象是没有时间信息的 Date 对象，这似乎正是您所需要的。如果不是，请将上述代码中出现的所有 DateMidnight 替换为 DateTime。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T06:22:49.833

好吧，您可以创建一个日历对象，将日期设置为当月的第一天（应该是第一天：P），然后您可以执行两项操作：从您的日历对象中，您可以减去特定的时间段，例如月（这会给你上个月的第一个日期，或者一天，这会给你上个月的最后一天。我没有尝试过，但这将是我的第一步。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-31T06:29:08.597

还想在 Jigar 的回答中添加一些内容。使用`DateFormat`该类以您在问题中指定的格式获取日期：

```
DateFormat df = DateFormat.getInstance(DateFormat.SHORT);
System.out.println(df.format(firstDateOfPreviousMonth));
System.out.println(df.format(lastDateOfPreviousMonth)); 
```

输出：

```
04/01/12
04/30/12 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-13T04:34:52.887

//在模式中你可以使用你想要的格式。

```
 DateTimeFormatter format = DateTimeFormatter.ofPattern("MM/dd/yyyy");
                LocalDate now = LocalDate.now();
                String startDate = now.minusMonths(1).with(TemporalAdjusters.firstDayOfMonth()).format(format);
                String endDate = now.minusMonths(1).with(TemporalAdjusters.lastDayOfMonth()).format(format); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-12-14T13:12:58.413

```
public static LocalDate getPreviousMonthStartDate() {

    return LocalDate.now().minusMonths(1).with(TemporalAdjusters.firstDayOfMonth());
}

public static LocalDate getPreviousMonthLastDate() {

    return LocalDate.now().minusMonths(1).with(TemporalAdjusters.lastDayOfMonth());
} 
```

使用 Java.Time 编写代码非常容易。java.time 包具有更好的设计、更多的线程安全、许多支持常用操作的实用方法以及易于使用 Local 和 ZonedDate/Time API 处理时区。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-11T20:52:34.207

```
 Calendar cal = Calendar.getInstance();
    cal.set(Calendar.DATE, 1);
    cal.add(Calendar.DAY_OF_MONTH, -1);
    Date lastDateOfPreviousMonth = cal.getTime();
    cal.set(Calendar.DATE, 1);
    Date firstDateOfPreviousMonth = cal.getTime(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-07T06:49:05.753

```
 public List customizeDate(String month, int year) {
        List<String> list = new ArrayList<String>();
        try {
            String edates = null;
            String sdates = null;
            if (month.equals("JAN") || month.equals("MAR") ||
                month.equals("MAY") || month.equals("JUL") ||
                month.equals("AUG") || month.equals("OCT") ||
                month.equals("DEC")) {
                String s1 = "01";
                String s2 = "31";

                String sdate = s1 + "-" + month + "-" + year;
                System.out.println("Startdate" + sdate);
                SimpleDateFormat sd = new SimpleDateFormat("dd-MMM-yyyy");
                Date ed = sd.parse(sdate);
                sdates = sd.format(ed);
                System.out.println("ed" + ed + "------------" + sdates);
                String endDate = s2 + "-" + month + "-" + year;
                System.out.println("EndDate" + endDate);
                SimpleDateFormat s = new SimpleDateFormat("dd-MMM-yyyy");
                Date d = s.parse(endDate);
                edates = s.format(d);
                System.out.println("d" + d + "------------" + edates);
            } else if (month.equals("APR") || month.equals("JUN") ||
                       month.equals("SEP") || month.equals("NOV")) {
                String s3 = "01";
                String s4 = "30";
                String sdate = s3 + "-" + month + "-" + year;
                System.out.println("Startdate" + sdate);
                SimpleDateFormat sd = new SimpleDateFormat("dd-MMM-yyyy");
                Date ed = sd.parse(sdate);
                sdates = sd.format(ed);
                System.out.println("ed" + ed + "------------" + sdates);
                String endDate = s4 + "-" + month + "-" + year;
                System.out.println("EndDate" + endDate);
                SimpleDateFormat s = new SimpleDateFormat("dd-MMM-yyyy");
                Date d = s.parse(endDate);
                edates = s.format(d);
                System.out.println("d" + d + "------------" + edates);
            } else {
                if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {
                    System.out.println("Leap year");
                    if (month.equals("FEB")) {
                        String s5 = "01";
                        String s6 = "29";
                        String sdate = s5 + "-" + month + "-" + year;
                        System.out.println("Startdate" + sdate);
                        SimpleDateFormat sd =
                            new SimpleDateFormat("dd-MMM-yyyy");
                        Date ed = sd.parse(sdate);
                        sdates = sd.format(ed);
                        System.out.println("ed" + ed + "------------" +
                                           sdates);
                        String endDate = s6 + "-" + month + "-" + year;
                        System.out.println("EndDate" + endDate);
                        SimpleDateFormat s =
                            new SimpleDateFormat("dd-MMM-yyyy");
                        Date d = s.parse(endDate);
                        edates = s.format(d);
                        System.out.println("d" + d + "------------" + edates);
                    }
                } else {
                    System.out.println("Not a leap year");
                    String s7 = "01";
                    String s8 = "28";
                    String sdate = s7 + "-" + month + "-" + year;
                    System.out.println("Startdate" + sdate);
                    SimpleDateFormat sd = new SimpleDateFormat("dd-MMM-yyyy");
                    Date ed = sd.parse(sdate);
                    sdates = sd.format(ed);
                    System.out.println("ed" + ed + "------------" + sdates);
                    String endDate = s8 + "-" + month + "-" + year;
                    System.out.println("EndDate" + endDate);
                    SimpleDateFormat s = new SimpleDateFormat("dd-MMM-yyyy");
                    Date d = s.parse(endDate);
                    edates = s.format(d);
                    System.out.println("d" + d + "------------" + edates);
                }
            }
            list.add(edates);
            list.add(sdates);
        } catch (Exception e) {
            System.err.println(e.getMessage());
        }
        return list;
    }
} 
```

# javascript - 如何使 jQuery 验证插件与 jQuery spinner 配合得很好？

> ID：10828402
> 
> 赞同：1
> 
> 时间：2012-05-31T06:19:23.483
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

所以我正在使用一个 jQuery 微调器，我希望它可以通过 jQuery 验证插件进行验证。微调器的形式是“form”，代码如下所示：

```
jQuery("#mySpinner").spinner({
    min: 110,
    max: 350,
    step: 10,
    spin: function() {jQuery("form").valid();}
});

jQuery("form").validate({
  rules:{
    mySpinner: {required: true, min: 150, max: 350}
  }
}); 
```

我在旋转时调用 jQuery("form").valid()，因为当微调器旋转时，验证不会发生。这将是我的问题的结束，但不幸的是，验证发生在微调器中的值更改之前。这是场景：

用户在微调器中键入 1111。验证在 4 日 1 开始（因为 .validate 中的最大值设置为 350），并让用户知道输入无效。然后用户单击向下箭头。首先，验证触发，该值被标记为无效。接下来，微调器内部的值更改为最大值（350，来自微调器的“最大值”值）。我剩下的是一个被标记为无效的有效值。如果我再次单击微调器，它将使用新值进行验证，并且无效标志消失。

有人可以告诉我如何在该微调器中的值更改*后进行验证检查吗？*就此而言，如果有更明显、更简单的解决方案，你能说出来吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:44:42.800

I managed to trigger the validation *after* the value changes in the spinner by doing this:

```
jQuery(".ui-spinner").mouseup(function() {jQuery("form").valid();}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:18:33.930

[查看来自http://demos.radiantq.com/jQueryGanttDemo/demo.htm](http://demos.radiantq.com/jQueryGanttDemo/demo.htm)的 TimeScaleStartAndEnd 示例。他们有代码选项卡来查看 html 代码。希望样本对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T22:53:42.943

我认为使用 'change' 事件而不是 'spin' 事件可以解决您的问题。IE，

```
jQuery("#mySpinner").spinner({
    min: 110,
    max: 350,
    step: 10,
    change: function() {jQuery("form").valid();}
}); 
```

# android - 如何在钛 android 中使用 C2DM 获得推送通知？

> ID：10828410
> 
> 赞同：0
> 
> 时间：2012-05-31T06:20:18.780
> 
> 标签：android, android-c2dm, titanium-mobile

我正在使用[appcelerator Titan](http://en.wikipedia.org/wiki/Appcelerator_Titanium)开发一个 android 应用程序。我们可以使用 C2Dm 在 android 的原生应用程序中获取推送通知。但我没有办法在钛中获得推送通知。请提供示例源代码以使用[Titanium](http://www.appcelerator.com/platform)在 android 中获取推送通知。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:31:09.620

您可以通过添加 java C2DM 模块来使用 C2DM。[从这里](https://github.com/IGx89/titanium-c2dm)获取 GitHub 代码。

我还没有尝试过，这是在[Titanium 网站论坛](http://developer.appcelerator.com/question/136737/c2dm-for-android)中提到的。

这个[讨论](http://search.appcelerator.com/?q=c2dm&x=0&y=0)也可能有用。

# mono - Monotouch 默认应用程序在模拟器中运行但在设备上崩溃

> ID：10828415
> 
> 赞同：2
> 
> 时间：2012-05-31T06:20:38.630
> 
> 标签：mono, xamarin.ios, ios-simulator

我用模拟器简单地尝试过 MT，并决定购买它并加入开发计划。程序似乎在模拟器上运行，但在部署到我的（运行 5.1 的最新型号）iPad 时立即崩溃。这是在做任何事情之前！例如，如果我创建一个新的 ipad 'Utility' 解决方案或'Single view' 应用程序，不更改生成的默认值并在模拟器上运行它，它就会运行。然后我将它部署到设备上，它安装但在运行时立即崩溃。

报告的错误是：

```
MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSUnknownKeyException Reason: [<UIApplication 0x658ee0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key view. 
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 
  at Utility.Application.Main (System.String[] args) [0x00000] in /Users/Mark/Projects/Utility/Utility/Main.cs:17 
```

main.cs 中的第 17 行是： UIApplication.Main (args, null, "AppDelegate"); 'usings' 等都存在（这是未修改的 MT iPad 'Utility' 解决方案）。我正在运行我认为是最新的 xcode（没有开发预览或任何东西）和 Lion 下的 monotouch 版本。

为什么默认（但功能正常）的应用程序会像这样崩溃？此跟踪信息是否写入文件？我尝试过的另一个应用程序（示例“摇我”GL 绘图应用程序）在设备上正确运行。

我在这里看到另一个问题：[Monotouch 4：App 在 iPhone 设备上启动时崩溃，在模拟器上工作](https://stackoverflow.com/questions/8702780/monotouch-4-app-crash-on-launch-on-iphone-device-works-on-simulator)，最终成为 monotouch 中的一个错误，但我有最新版本。

谢谢你们的帮助，真的很感激。

标记

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T09:58:39.010

我之前亲自看到此错误的一个地方是：

[http://support.xamarin.com/customer/portal/articles/135125-this-class-is-not-key-value-coding-compliant-for-the-key-xxxx](http://support.xamarin.com/customer/portal/articles/135125-this-class-is-not-key-value-coding-compliant-for-the-key-xxxx)

> 当您在代码中初始化 ViewController 但也从 XIB 文件初始化 ViewController 时，会发生此错误。
> 
> 如果您将“主界面”值设置为您在代码中创建的 ViewController，则可能会发生这种情况。要解决此问题，请将此值设为空，然后不会自动初始化任何 ViewController。

您可以检查您的 pInfo 文件以查看是否设置了 MainInterface 吗？

如果这是默认项目模板中的错误，请同时在[http://bugzilla.xamarin.com/enter_bug.cgi上提交报告](http://bugzilla.xamarin.com/enter_bug.cgi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:18:19.037

如果您没有至少 MonoTouch 5.2.4 版本并且您在代码中写入控制台，则需要更新以解决崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T11:00:10.990

就我而言，问题是在使用 Storyboard 构建时，我找到了修复它的方法：

右键单击您的项目，在“Build”子标题下选择“Options”，然后选择“iOS Build”，将 -f 添加到“Additional mtouch arguments”并重新构建。

这个解决方案不是我的，多亏了 Richard Adams，在这里： [https ://stackoverflow.com/a/17583923/1600491](https://stackoverflow.com/a/17583923/1600491)

# perl - Perl：仅打印列表中的重复值

> ID：10828416
> 
> 赞同：3
> 
> 时间：2012-05-31T06:20:44.147
> 
> 标签：perl, list

使用 Perl，我只想打印每个列表中的重复（重复）值。这些值应至少出现 2 次（2 次或更多次）。每个列表（行）都应单独考虑。

例如，给定输入：

```
abc 51082 6457 31072 5575 5488 4842 16567 151

cde 5575 3674 8150  5575 3674 8150

fgh 5737 6887 48278 3674 34399 3674 8150 
```

我想要以下输出：

```
abc 
cde 5575 3674 8150
fgh 3674 
```

我编写了以下源代码，但没有给出正确的输出：

```
#!/usr/bin/perl -w

open FH, "input.txt";
@a=<FH>;

my %count_of;

foreach $tmp (@a) 
{
    foreach $word (split /\s/, $tmp) 
    {
        $count_of{$word}++;

        if ($count_of{$word} >=2)
        {
            print "$word\n";
        }
    }
}

exit; 
```

有人可以指导我对代码进行哪些更改吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:37:18.583

这是一个工作版本。查看代码中的注释以了解更正

```
#!/usr/bin/perl

# always use strict and warnings: this will help you to find errors
use warnings;
use strict;

open FH, 'input.txt';

# always declare variables
my @a=<FH>;

# you should close file handles
close FH;

# declare $tmp
foreach my $tmp (@a) {

    # you need to process the first element differently since you
    # want to always print it
    my @row = split /\s/, $tmp;

    # you should check for empty rows
    if (@row == 0) {
        # empty row
        next;
    }

    # removes the first element
    my $header = shift @row;

    # the first element is always printed
    print $header;

    # this should be local otherwise you are counting globally
    # a new declaration will give you a new hash
    my %count_of;

    # declare $word
    foreach my $word ( @row ) {

        # you should not increment an undefined variable
        if ( $count_of{$word} ) {
            $count_of{$word} = 1;
        } else {
            $count_of{$word}++;
        }

        # just print the second time you see the word
        if ( $count_of{$word} == 2) {
            print " $word";
        }

    }

    print "\n";

}

# it is good practice to return true at the end of a script (no need to exit)
1; 
```

这会产生：

```
abc
cde 5575 3674 8150
fgh 3674 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:56:33.590

`grep`结合使用哈希来跟踪所见值非常适合这些类型的问题：

```
#!/usr/bin/env perl
use strict;
use warnings;

my $file = "input.txt";
open my $fh, "<", "$file" or die "Unable to open $file: $!\n";

while (<$fh>) {
    chomp;
    my ($key, @values) = split or next; # skip empty rows
    my (%seen, @dupl);
    @dupl = grep $seen{$_}++ == 1, @values;
    print "$key @dupl\n";
} 
```

输出：

```
abc 
cde 5575 3674 8150
fgh 3674 
```

请注意，`or`（相对于`||`）在这两种情况下都至关重要。此外，您应该始终检查尝试打开文件的结果，`use strict;`并最好替换`-w`为`use warnings;`可移植性。无论如何，当您要逐行处理文件时，也没有必要啜饮您的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:50:15.640

```
#!/usr/bin/perl -w

use strict;

while (<>) {
    chomp;
    my ($name, @inp) = split /\s+/ or next;
    my %counts;
    for (@inp) { $counts{$_}++ }
    print join (' ', $name, map { $counts{$_} > 1 ? $_ : () } keys %counts), "\n";
} 
```

# asp.net-mvc-3 - Windows Server 2008 R2 上的 Solr

> ID：10828423
> 
> 赞同：5
> 
> 时间：2012-05-31T06:21:13.483
> 
> 标签：asp.net-mvc-3, solr, solrnet

我需要在 Windows Server 2008 R2 上安装 Solr，并将其与 asp.net mvc3 应用程序集成。我试图找到有关如何在 Windows 服务器上安装/设置 solr 的文档，但没有找到好的文档/帮助。此外，安装后我想将结果集成到 asp.net mvc3 应用程序中，因此需要在那里显示搜索查询和结果。我也不太清楚如何做到这一点。尽管这两个问题都略有不同，但任何可以帮助我们入门的建议/文件都非常受欢迎。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T08:40:31.620

以下是帮助您入门的分步程序：

**第 1 步：**下载 Solr。它只是一个 zip 文件。

**第 2 步：**`SOLR_HOME_DIR/dist/apache-solr-1.3.0.war`从您的 tomcat webapps 目录复制： `$CATALINA_HOME/webapps/solr.war`– 注意 war 文件名的更改。这很重要。

**第 3 步：**在您选择的位置创建 solr 主目录。这是该 solr 安装的配置所在的位置。最简单的方法是将`SOLR_HOME_DIR/examples/solr`目录复制到您希望 solr 主容器所在的任何位置。说把它放进去`C:\solr`。

**第四步：**希望你已经设置了环境变量，如果没有，请设置`JAVA_HOME`, `JRE_HOME`, `CATALINA_OPTS`, `CATALINA_HOME`. 请注意，它`CATALINA_HOME`指的是您的 Tomcat 目录 &`CATALINA_OPTS`指的是您想要提供给 Solr 的堆内存量。

**第五步：**启动tomcat。请注意，这只需要允许 tomcat 解压缩您的 war 文件。如果你往下看，`$CATALINA_HOME/webapps`现在应该有一个 solr 目录。

**第6步：**停止tomcat

**第 7 步：**进入该 solr 目录并编辑`WEB-INF/web.xml`. 向下滚动，直到看到如下所示的条目：

```
<!-- People who want to hardcode their "Solr Home" directly into the 
     WAR File can set the JNDI property here... 
 --> 
<!-- 
  <env-entry> 
     <env-entry-name>solr/home</env-entry-name> 
     <env-entry-value>/Path/To/My/solr/Home/solr/</env-entry-value> 
     <env-entry-type>java.lang.String</env-entry-type> 
  </env-entry> 
--> 
```

设置您的 Solr 主页（例如`C:\solr`：）并取消注释 env 条目。

**第 8 步：**再次启动 Tomcat，事情应该会很顺利。您应该能够通过尝试 url 来验证 solr 是否正在运行`http://localhost:8080/solr/admin/`。

这里的其他答案足以让您将 Solr 与您的 ASP.Net 集成，并且它应该非常简单，因为 Solr 公开了 HTTP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:24:35.670

在 Windows 上安装意味着：

*   从 apache 下载 zip
*   解压到你想要的目录

就是这样，现在你必须定义你的 schema.xml、solrconfig.xml 等，从[solr 教程开始](http://lucene.apache.org/solr/api/doc-files/tutorial.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:06:26.473

Tomcat 应用程序服务器可以托管您的 solr 实例。

[http://wiki.apache.org/solr/SolrTomcat#Multiple_Solr_apps](http://wiki.apache.org/solr/SolrTomcat#Multiple_Solr_apps)

放入一个 XML 文件（在该页面中提供）`/var/lib/tomcat6/conf/Catalina/localhost`以注册 Solr 应用程序并`conf/solrconfig.xml`设置索引目录 `<dataDir>${solr.data.dir:/var/www/app/app_indexer}</dataDir>`。对不起Linux路径...

至于 .Net 库，SolrNet 经常在 StackOverflow 上讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T07:53:20.453

要安装 Solr，只需安装 64 位版本的 Tomcat 并部署 Solr 战争文件。
为了将 Solr（请求和结果页面）合并到我的 asp.net 应用程序中，我使用了[AJAX Solr](https://github.com/evolvingweb/ajax-solr/wiki/reuters-tutorial)。

[这](http://evolvingweb.github.com/ajax-solr/examples/reuters/index.html)是一个演示它的外观。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T14:15:06.420

这个网站上有一篇很好的文章，它为 nopcommerce 提供了 solr 集成插件。他们在这里提供了非常好的支持和文档，可能对您有所帮助：

[http://www.nopaccelerate.com/wiki/installing-apache-solr/](http://www.nopaccelerate.com/wiki/installing-apache-solr/)

和

[http://www.nopaccelerate.com/wiki/configuring-apache-solr-to-use-with-nopaccelerate/](http://www.nopaccelerate.com/wiki/configuring-apache-solr-to-use-with-nopaccelerate/)

谢谢，一切顺利。

# reporting-services - SSRS - 表达式中的嵌套 IIF

> ID：10828424
> 
> 赞同：2
> 
> 时间：2012-05-31T06:21:20.030
> 
> 标签：reporting-services, ssrs-2008, iif-function

`=iif((Fields!Company_OEM.Value = "Channel") AND (Parameters!paramCompanyOEM.Count < 2), "None", iif(Not(Fields!Company_OEM="Channel"), Count(Fields!TS_ISSUEID.Value), "None"))`

**错误显示且无法运行报告**

假设条件（第一个 iif）语句位于“无”的真实部分。错误的部分在于第二个 iif 语句。

有指南吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:16:39.570

在“Channel”的第二次测试中，您似乎缺少一个“.Value”。（经常发生在我身上）

```
=iif((Fields!Company_OEM.Value = "Channel") AND (Parameters!paramCompanyOEM.Count < 2), "None", iif(Not(Fields!Company_OEM.Value="Channel"), Count(Fields!TS_ISSUEID.Value), "None")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:13:13.183

看一下这个

```
=IIF((Fields!Company_OEM.Value = "Channel") AND (Parameters!paramCompanyOEM.Count < 2), "None", IIF(Not(Fields!Company_OEM="Channel"), Count(Fields!TS_ISSUEID.Value).ToString(), "None")) 
```

让我知道您的问题是否已解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:34:20.037

尝试：

```
Count(Fields!TS_ISSUEID.Value).toString() 
```

# java - java - 如何使用Java中的Web服务从URL（浏览器）调用方法？

> ID：10828425
> 
> 赞同：1
> 
> 时间：2012-05-31T06:21:30.647
> 
> 标签：java, web-services, wadl

我是网络项目的新手。所以我正在学习与之相关的新事物。昨天我问了关于如何调用方法的问题，如下所示。实际上，我有一个 Web 服务，其中包含一个 WADL 文件。 [我可以创建在 JBOSS 服务器上运行的类的对象吗？](https://stackoverflow.com/questions/10810630/can-i-create-the-object-of-the-class-which-is-running-on-jboss-server)

从那我得到一个回复​​，你使用 wadl2java 工具，它将使用你的 Application.wadl 文件并生成 java 存根。您可以使用这些生成的 java 类来调用部署在 JBoss 服务器中的对象上的方法。

因此，我使用 wadl2java 生成 Java Stub，它是来自 WADL 的接口。但现在我想从浏览器的 URL 访问方法。我怎么称呼它？

这种方式我试过了......`http://localhost:8080/prjname/rest/methodName`

从 URL 调用方法是否正确？

请指教

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:28:02.277

这就是我们所说的 Web 服务的标准 URL，没有自动生成的 URL 或固定或预定义的 URL 来调用它们。你必须在代码库中为你的项目定义 URL 结构，你必须在 web.xml 中声明基本 URL项目 ( *http://localhost:8080/prjname* ) 以及进一步使用路径注释的 java 类和方法 ( */rest/methodName )。*

# objective-c - 获取有关 iPhone BluetoothDevice 的信息（在 BluetoothManager 中）

> ID：10828427
> 
> 赞同：3
> 
> 时间：2012-05-31T06:21:36.497
> 
> 标签：objective-c, ios, bluetooth, iphone-privateapi, rssi

我正在使用私有 API 开发个人应用程序`BluetoothManager`。我能够在我的应用程序上检测到蓝牙设备并获取它们的名称和 MAC 地址。现在我的下一个障碍是找出最近的设备，CoreBluetooth 对我没有帮助，因为它只对 BLE 设备有用，没有其他东西可以给我像 RSSI 这样的信息，所以我现在认为这个信息在`struct BTDeviceImpl *_device`我看到的某个地方在`BluetoothDevice.h`文件中，但是当我尝试使用 xcode 调试器查看其中的内容时，我得到了一个无法访问的地址（我无法使用调试器进入它）..

我似乎无法考虑任何其他解决方案，所以如果有人可以帮助我解决它或者给我一个更好的解决方案，它将对我有很大帮助。

请不要建议查看首先发现了哪个设备，这对我没有帮助，因为它只是说它的 RSSI 更强（并且它还取决于每个设备查询扫描间隔）而不是设备更接近。

# java - Android，内部具有多个视图的滚动菜单-来自 XML 的视图

> ID：10828428
> 
> 赞同：0
> 
> 时间：2012-05-31T06:21:37.463
> 
> 标签：java, android, layout-inflater

超级新手在这里。在谷歌和这些论坛上搜索了 4 个小时，但没有看到这个问题。抱歉，如果是这样，但就像我说的，这里是超级新手。

我需要一个具有线性布局的滚动视图。在线性布局中，我需要在其中定制“迷你布局”。这些是动态拉入的。

这个想法是用户登录，我们返回一个包含他们内容的数据流。迷你布局将由图像、上下文本和按钮组成。

我为此获得了一个 xml，但是当我浏览数据列表时，它不会让我多次附加该 xml。请帮忙，如果我以最糟糕的方式这样做，请告诉我。

谢谢。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.springboard_view);

    // Set page title
    TextView temp = (TextView) findViewById(R.id.page_label);
    temp.setText("Springboard");

    // Get the message from the intent, format and set
    // We also need to keep the pdf's for the library page
    Intent intent = getIntent();
    String message = intent.getStringExtra(ffacademyActivity.EXTRA_MESSAGE);
    List<String[]> formattedStrings = formatStrings(message);
    List<String[]> pdfStrings = new ArrayList<String[]>();

    String[] almostThere;

    mInflater = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout convertView = (LinearLayout)mInflater.inflate(R.layout.sb_icon,null);

    while(!formattedStrings.isEmpty()) {
        setContentView(R.layout.sb_icon);
        almostThere = formattedStrings.remove(0);   

        if (almostThere[0].contains("product")) {
            TextView tempText = (TextView) findViewById(R.id.spring_board_title);
            tempText.setText(almostThere[2]);
            tempText = (TextView)findViewById(R.id.spring_board_description);
            tempText.setText(almostThere[5]);
        } else if (almostThere[0].contains("link")) {
            TextView tempText = (TextView) findViewById(R.id.spring_board_title);
            tempText.setText(almostThere[1]);
            tempText = (TextView)findViewById(R.id.spring_board_description);
            tempText.setText(almostThere[4]);
        } else {
            pdfStrings.add(almostThere);
        }

        setContentView(R.layout.springboard_view);
        LinearLayout linearLayout = (LinearLayout)findViewById(R.id.sbpad);
        linearLayout.addView(convertView);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:37:58.217

这不就是一个带有 ArrayAdapter 的普通 ListView。就像这个例子中的一样：[自定义 ListView 项目和适配器](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

# visual-studio - Office 加载项重新安装错误：无法加载文件或程序集

> ID：10828433
> 
> 赞同：4
> 
> 时间：2012-05-31T06:21:57.433
> 
> 标签：visual-studio, vsto

我正在尝试重新部署 Office 插件。它安装并且一切似乎都很好，但它无法启动。设置环境变量 VSTO_SUPPRESSDISPLAYALERTS = 0 后，我在启动 MS Project 时收到以下消息：

```
Could not load file or assembly Microsoft.Office.Tools.Common.v4.0.Utilities 
```

我已验证该程序集已捆绑在 ClickOnce 应用程序中。在这一点上，我几乎被难住了，不知道下一步该往哪里看。任何人都可以提供任何指导吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:51:03.237

在验证了客户端机器上的运行时运行良好，并多次尝试重新编译/重新安装（仍然出现相同的错误）之后，我终于解决了这个问题。我真的很讨厌我必须做的事情，所以如果您有更好的解决方案，请发布。

**脚步**

1.  通过添加/删除程序卸载插件

2.  进入注册表并删除所有条目
    **`KEY_CURRENT_USER > Software > Microsoft > Office > MS Project > Addins`**

3.  还必须删除条目**`HKEY_LOCAL_MACHINE > Software > Microsoft > Office > MS Project > Addins`**（不确定这些条目是如何到达那里的......）

4.  删除了应用程序文件夹**`C:\Documents and Settings\[user name]\Local Settings\Apps\2.0`**（注意——这个很糟糕，因为它删除了所有应用程序——不仅仅是插件......）你可以变得可爱并尝试挑选你的特定 vsto 插件文件，但此时我是太生气了，我只是给整个该死的东西打蜡）

5.  使用以下命令从命令提示符删除应用缓存：
    **`rundll32 dfshim CleanOnlineAppCache`**

我已经成功复现了错误，现在用这个方法解决了3次，所以我对它很有信心。我不知道为什么重新安装会抛出原始错误，但至少我现在有一个解决方法。

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:26:02.200

您是否安装了诸如 Dotnet 框架和 VSTO 运行时之类的先决条件？我认为 clickonce 已经捆绑了程序集，但应用程序在 GAC 或其他东西中寻找它。

# android - 使用 ViewPager 和 PassByValue 滑动页面时将执行 onTouchEvent

> ID：10828436
> 
> 赞同：7
> 
> 时间：2012-05-31T06:22:08.600
> 
> 标签：android, android-viewpager, touch-event, pass-by-value

在我的项目中，使用 onTouchEvent 检测屏幕上的触摸并相应地执行操作，并使用 viewPager 进行滑动操作。问题在于滑动触摸动作正在执行。所以从[这里](https://stackoverflow.com/questions/8122460/viewpager-intercepts-all-x-axis-ontouch-events-how-to-disable)找到解决方案解决了它。但是我的新问题是一旦 TouchEvent.Action_up 被执行，触摸就会被禁用。代码如下：

```
parent.setOnTouchListener(new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {

        switch(event.getAction())
        {
         case MotionEvent.ACTION_MOVE: 
                awesomePager.requestDisallowInterceptTouchEvent(true);
                break;
        case MotionEvent.ACTION_UP:
            awesomePager.requestDisallowInterceptTouchEvent(true);
             if(flag)
             {
               upperdock.setClickable(false);
                upperdock.bringToFront();
                tocparent.bringToFront();
                tocbottom.bringToFront();
                upperdock.setVisibility(RelativeLayout.VISIBLE);
                tocparent.setVisibility(LinearLayout.VISIBLE);
                tocbottom.setVisibility(LinearLayout.VISIBLE);
                flag=false;
             }
             else
             {

                parent.bringToFront();
                upperdock.setVisibility(RelativeLayout.INVISIBLE);
                tocparent.setVisibility(LinearLayout.INVISIBLE);
                tocbottom.setVisibility(LinearLayout.INVISIBLE);
                flag=true;
             }
             break;

        case MotionEvent.ACTION_CANCEL:
            awesomePager.requestDisallowInterceptTouchEvent(false);
             break;
        default:
            break;
        }

        return false;
    }
}); 
```

在上面的代码中，如果我返回 false Action_up 没有得到执行..如果我返回 true Action_cancel 没有得到执行..那是按值传递是那里的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:49:19.710

我为此改变了一些东西。

不使用 `awesomePager.requestDisallowInterceptTouchEvent(false)`，只使用`return true`。

在**活动**中定义一个**布尔滚动**；

在**ViewPager.onPageScrolled**中设置**sroll = positionOffset != 0.0** 并覆盖**onTouchEvent**，其中**ViewPager**中的**视图**。

 ******现在你可以检查**if (event.getAction()==MotionEvent.ACTION_UP && !sroll)**来决定事件是否会触发

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-01T11:50:00.677

我有同样的问题！对我来说，这工作得很好......

```
case MotionEvent.ACTION_MOVE: {
        getParent().requestDisallowInterceptTouchEvent(false);
        break;
    }

 case MotionEvent.ACTION_CANCEL:{
        getParent().requestDisallowInterceptTouchEvent(true);
        break;

}

case MotionEvent.ACTION_UP:{

 //delete  awesomePager.requestDisallowInterceptTouchEvent(true);
 //you don't need it here!
                 .
                 .
            do your stuff....
                 .

} 
```

将您的整个 onTouch 方法返回为真而不是假...

```
return true; 
```******

# mysql - SQL 查询 - 无法比较字段值？

> ID：10828445
> 
> 赞同：0
> 
> 时间：2012-05-31T06:22:51.377
> 
> 标签：mysql, sql

我`played_dt`在表中有列`widget_event_data`。 `plyed_dt`以这种格式保存日期***2009-06-16 21:38:07***

我想获取`played_dt`包含***2009-06-16的行***

有没有办法做到这一点。我该如何为此编写sql查询？

将不胜感激帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:24:28.193

```
WHERE DATE(played_dt) = '2009-06-16' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T06:24:54.180

```
select * from your_table
where played_dt like '2009-06-16%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:29:45.850

```
select * from table where played_dt = '2009-06-16' 
```

将在甲骨文中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T06:34:23.507

使用`DATE()`功能。试试这个：

```
select * 
FROM widget_event_data
where DATE(played_dt) = DATE('2009-06-16') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T06:34:33.960

`select * from tableName
where played_dt = str_to_date('2009-06-16', '%Y-%m-%d')`

查看更多[mysql str_to_date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

# java - 线程.sleep(5000); 和 TimerThread.sleep(5000); 在java中

> ID：10828446
> 
> 赞同：0
> 
> 时间：2012-05-31T06:22:54.533
> 
> 标签：java, multithreading, thread-safety

有什么区别

`thread.sleep(5000);`

和

`TimerThread.sleep(5000);`

在java中

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:25:04.183

如果我们谈论这个[`TimerThread`](http://www.docjar.com/docs/api/java/util/TimerThread.html)，那么没有区别。两种调用`sleep()`resolve的方法是同一个方法( `Thread.sleep()`)。

我希望任何其他合理的扩展类都是这种情况`Thread`。但是，如果有疑问，可以随时查看相关类的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:36:10.440

**TimerThread 扩展了 Thread**。所以 Thread.sleep(5000) 和 TimerThread.sleep(5000) 没有区别。

# c# - 在数据库 WPF 中存储键盘快捷键

> ID：10828450
> 
> 赞同：2
> 
> 时间：2012-05-31T06:23:14.233
> 
> 标签：c#, wpf, keyboard-shortcuts

我打算将键盘快捷键保存在数据库中。当用户按下快捷键时，应打开特定窗口。与 Visual Studio 键盘快捷键分配窗口相同的功能，

![在此处输入图像描述](../Images/73fb5f15878abf9f959e6c318ade4b72.png)

我应该在数据库中存储哪个组合键？

我正在听以下方法来挂钩按键

```
protected override void OnKeyUp(KeyEventArgs e)
{
     // Here I'm gonna hook the keypress
} 
```

如果用户按下，`CTRL + W`（与控制键的任何组合键）

`e.KeyboardDevice.Modifiers`是`Control`和`e.Key`是`W`

如果用户按下，`ALT + W`（与 Alter Key 的任何组合键）

`e.KeyboardDevice.Modifiers`是是是是`Alt`_`e.Key``System``e.SystemKey``W`

如果用户按下，`CTRL + Shift + W`它会在两个连续的 OnKeyUp 事件中给出键组合

没有共同的模式。我应该 Hook 哪个组合？我应该将哪种组合存储在数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:38:39.733

查看[KeyGesture](http://msdn.microsoft.com/en-us/library/system.windows.input.keygesture.aspx)类。您可以保存和解析字符串中的手势，也可以在您的`OnKeyUp`方法中轻松地比较它们，如下所示：

```
if (e.Key == Gesture.Key && Gesture.Modifiers == Keyboard.Modifiers)
   //do stuff... 
```

# java - 如何使用java在同一目录中创建多个同名文件？

> ID：10828451
> 
> 赞同：1
> 
> 时间：2012-05-31T06:23:40.723
> 
> 标签：java, file, directory

根据我的要求，我需要将文件上传到指定目录，稍后经过一些修改，我需要将相同的文件上传到同一目录，这里以前的文件不应该被覆盖意味着文件必须保存在同一目录中相同的名称（这里我有一个假设，例如，如果我的文件是 abc.txt，修改后如果我上传修改后的文件，它可以保存为 abc(1).txt）。我该如何解决我的问题？任何人都可以帮助我摆脱这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:35:34.937

[`File.createNewFile()`](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#createNewFile%28%29)在while循环中使用。当且仅当文件不存在时，它将创建文件。这是线程安全的，因为 API 保证了原子性。

在循环中检查文件的存在[`File.exists()`](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#exists%28%29)并不能为您提供这样的保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:36:00.267

如果您可以保留上传的数量，您可以为每个特定文件增加一个数字并将其添加到您的文件名（例如 foo_1.txt 或您想要的任何内容）如果您不能，您可能想要浏览所有文件并检查它们是否适合您的命名模式。然后您可以提取最高数字，将其增加 1 并将其附加到您的新文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:38:39.733

检查[File](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)的方法，例如：

[存在（）](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#exists%28%29)

如果文件存在，您可以计算一个数字并创建一个新文件名，例如

```
newFilename = MessageFormat.format("({0}){1}", counter++, originalFilename);
File newFile = new File(originalFile.getParentFile(),newFilename); 
```

只要找到不存在的文件名，就可以创建和检查新文件。

# iphone - iOS将数据从tableview传递到新视图

> ID：10828460
> 
> 赞同：2
> 
> 时间：2012-05-31T06:24:16.193
> 
> 标签：iphone, ios, xcode

我密切关注这个中心页面[http://klanguedoc.hubpages.com/hub/iOS-How-To-Display-Detail-Data-from-UITableView-in-Detail-View-Controller](http://klanguedoc.hubpages.com/hub/iOS-How-To-Display-Detail-Data-from-UITableView-in-Detail-View-Controller)并且几乎能够复制它完美，除了最后的组件。prepareForSegue 方法。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        klViewController *detailViewController = [segue destinationViewController];

        detailViewController.treeData = [self.ds objectAtIndex:[self.tableView indexPathForSelectedRow].row];

    }
} 
```

我试图仔细查看并尝试在网上找到其他prepareForSegue方法的示例，但它们都指向同一个方向，这意味着方法和代码是正确的！

xcode 发出的错误是 ARC Issue - No visible @interface for 'NSString' 声明选择器 'isEqualToString:'

谁能指出我正确的方向？

PS 如果我错了，请纠正我，但是这个 prepareForSegue 方法是否应该在 tableview 类中？如果不是，请告诉我，因为我是 xcode 的新手，而且教程有点模糊，因此我担心我会错过解释代码应该去的地方。

提前谢谢了 ：）

编辑：

样本数据.h

```
#import <Foundation/Foundation.h>

@interface SampleData : NSObject

@property (nonatomic,strong) NSString * treeName;
@property (nonatomic,strong) NSString * treeDescription;

@end 
```

样本数据.m

```
#import "SampleData.h"

@implementation SampleData
@synthesize treeName, treeDescription;

@end 
```

样本数据DOA.h

```
#import <Foundation/Foundation.h>
#import "SampleData.h"
@interface SampleDataDAO : NSObject

@property (nonatomic,strong) NSMutableArray *someDataArray;

-(NSMutableArray *)PopulateDataSource;

@end 
```

样本数据DOA.m

```
#import "SampleDataDAO.h"

@implementation SampleDataDAO

@synthesize someDataArray;

-(NSMutableArray *)PopulateDataSource
{
    someDataArray= [[NSMutableArray alloc]initWithCapacity:3];
    SampleData * mydata= [[SampleData alloc]init];

    mydata.treeName = @"Oak";
    mydata.treeDescription = @"an oak is a tree or shurb bla bla bla";
    [someDataArray addObject:mydata];
    mydata=nil;

    mydata=[[SampleData alloc]init];
    mydata.treeName=@"Douglas Fir";
    mydata.treeDescription=@"Douglas Fir are medium-size to extremely large evergreen trees";
    [someDataArray addObject:mydata];
    mydata=nil;

    mydata=[[SampleData alloc]init];
    mydata.treeName=@"Sugar Maple";
    mydata.treeDescription=@"Sugar Maple is a species of Maple. Sugar Maple is best known for it's sweet leaves as it contain natural sugar and is extremely healthy and beneficial to our health";
    [someDataArray addObject:mydata];
    mydata=nil;

    return someDataArray;
}

@end 
```

表视图控制器.h

```
#import <UIKit/UIKit.h>
#import "SampleDataDAO.h"
#import "SampleData.h"
#import "ViewController.h"

@interface TableViewController : UITableViewController

@property(nonatomic,strong) SampleDataDAO* daoDS;
@property (nonatomic,strong) NSMutableArray *ds;

@end 
```

TableViewController.m（prepareForSegue 方法出错）

```
#import "TableViewController.h"

@interface TableViewController ()

@end

@implementation TableViewController
@synthesize daoDS,ds;

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if( [[segue identifier] isEqualtoString:@"showDetail"]){        
        ViewController * detailViewController = [segue destinationViewController];

        detailViewController.treeData=[self.ds objectAtIndex:[self.tableView indexPathForSelectedRow].row];
    }
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    daoDS = [[SampleDataDAO alloc]init];
    self.ds = daoDS.PopulateDataSource;

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return 3;
}   

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"treeCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    // Configure the cell...
    SampleData * sample = [self.ds objectAtIndex:indexPath.row];
    cell.textLabel.text = sample.treeName;
    NSLog(@"Cell Value %d %@", indexPath.row, cell.textLabel.text);

    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "SampleData.h"
@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet UITextView *treeInfo;
@property (nonatomic, strong) SampleData * treeData;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize treeData, treeInfo;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}   

@end 
```

PS - 代码几乎与网站中的 1 相似，主要区别在于我删除了代码的图片部分。

编辑 - 'NSString' 的错误日志文件没有可见的@interface 声明选择器'isEqualtoString:' if( [[segue identifier] isEqualtoString:@"showDetail"]){

错误下划线位于“[[” 希望这是对你们找出真正错误的有用提示._。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:46:44.647

因此，当您处理 iOS 时，您处于 MVC 架构中，这意味着您拥有控制情节提要的 ViewController，因此您的 prepareForSegue 方法应该位于与正在转换的视图对应的 ViewController 类中。

也许在右侧的身份检查器中查看您的故事板。确保“自定义类”是您正在使用的视图控制器，其中包含 prepareForSegue 方法

没有看到更多代码，很难说，但这个链接似乎有你需要的东西：[“'BlahDataController'没有可见的@interface声明选择器'aMethod：'”](https://stackoverflow.com/questions/10727677/no-visible-interface-for-blahdatacontroller-declares-the-selector-amethod)

如果此链接不起作用，请尝试再次查看给定教程的每个步骤。你可能会发现一些东西。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:35:10.670

一方面，改变：

```
if ([[segue identifier] isEqualToString:@"showDetail"]) { 
```

到

```
if ([segue.identifier isEqualToString:@"showDetail"]) { 
```

和

```
klViewController *detailViewController = [segue destinationViewController]; 
```

到

```
klViewController *detailViewController = segue.destinationViewController; 
```

此外，我倾向于将 segue 连接到 ViewController 或 TableViewController 本身，而不是连接到 tableview 单元格。然后在 cellForRowAtIndexPath 中，我会关闭 segue 并像这样传递 IndexPath：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [self performSegueWithIdentifier:@"showDetail" sender:indexPath];
} 
```

然后使用您的 prepareForSegue 方法，我会这样做：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"showDetail"]) {
        // Get the indexPath
        NSIndexPath *indexPath = (NSIndexPath *)sender;

        klViewController *detailViewController = segue.destinationViewController;
        detailViewController.treeData = [self.ds objectAtIndex:indexPath.row;
    }
} 
```

# objective-c - 可变高度 UITextView

> ID：10828461
> 
> 赞同：0
> 
> 时间：2012-05-31T06:24:20.573
> 
> 标签：objective-c, ios, uitextview

我在表格视图单元格中嵌入了一个文本视图。此文本视图用于编写长文本。

它如何获得一个可变高度的uitextview，当输入的文本超过uitextview的指定高度时，它会自动扩展。它必须像在邮件应用程序中撰写邮件一样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:32:50.323

1.  设置和实现`UITextView`委托协议的委托
2.  检查大小`UITextView.contentSize`。如果它的高度参数已更改，那么您应该展开表格视图单元格：2.1 重新加载特定单元格。2.2 在`UITableViewDelegate`方法中返回新的高度值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:35:25.400

看看这个 SO [question](https://stackoverflow.com/questions/7281467/uitableviewcell-dynamic-height)。

您可以将`font`属性 from`UITextView`用于`sizeWithFont:`方法中。

您应该实现该`UITextViewDelegate`协议，并且每次文本视图更改时，即当`– textViewDidChange:`被调用时，您应该重新加载单元格以将其调整为内容的大小。

要重新加载特定行，您可以使用`– reloadRowsAtIndexPaths:withRowAnimation:`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-12T17:34:45.243

我使用 Content Hugging Priority 属性通过 Storyboard 进行了管理。

在 IB 中，我将文本视图高度设置为默认值，并将其优先级设置为 250（低）。

文本视图高度[1](https://i.stack.imgur.com/b12LT.png)

然后我将 Content Hugging Priority 设置为 1000。视图调整大小以完全适合我想要的文本。内容拥抱优先级[2](https://i.stack.imgur.com/AjZ8H.png)

希望这可以帮助

# c# - 如何防止在 c# 中使用 DataBindCrossTable 进行聚类图表？

> ID：10828465
> 
> 赞同：1
> 
> 时间：2012-05-31T06:24:26.020
> 
> 标签：c#, asp.net, visual-studio-2010

我有这个问题，我的所有列栏都聚集在一起，我尝试按字段和其他字段更改顺序，它似乎不起作用。

代码：

```
 try
            {
                MultiView1.Visible = true;
                Chart1.Series.Clear();
                Chart1.ChartAreas[0].AxisX.MajorGrid.LineColor = System.Drawing.Color.LightGray;
                Chart1.ChartAreas[0].AxisY.MajorGrid.LineColor = System.Drawing.Color.LightGray;
                MultiView1.Visible = true;
                DataTable table = new DataTable();
                table.Columns.Add("AverageGrading");
                table.Columns.Add("Date");
                ArrayList listofdates = dbmanager.GetListofDatesViaAll();

                foreach (DateTime date in listofdates)
                {
                    double gradingresult = dbmanager.GetAverageAppraisalForSectionALL(date);

                    string monthname = System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(date.Month);
                    table.Rows.Add(gradingresult, monthname.Substring(0, 3) + "/" + date.Year.ToString().Substring(2, 2));
                }
                DataTableReader datareader = table.CreateDataReader();
                Chart1.ChartAreas[0].AxisX.Title = "Period of appraisal";
                Chart1.ChartAreas[0].AxisY.Title = "Average grade";
                Chart1.DataBindCrossTable(datareader, "Date", "Date", "AverageGrading", "");
                Chart1.Legends.Add("Legend");
                Chart1.Legends[0].Enabled = true;
                Chart1.Legends[0].BackColor = System.Drawing.Color.Transparent;
                Chart1.Width = 1000;
                Chart1.Height = 600;

                MultiView1.ActiveViewIndex = 0;
            }
            catch (Exception e)
            {
                MultiView1.Visible = false;
                MessageBoxShowWithoutredirect(e.Message);
            } 
```

如图所示，这张图表聚集在一起，显示的日期仅为底部的 5 月，这是不正确的。

![](../Images/46df215279f49dfef8d1eb50ea9e3f12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:22:05.157

看看这个简单的例子提供给她：[http](http://www.asp.net/web-pages/tutorials/data/7-displaying-data-in-a-chart) ://www.asp.net/web-pages/tutorials/data/7-displaying-data-in-a-chart 。

希望这可以帮助。

# sql-server - 如何在触发器中执行安装在 SQL Server 中的 SSIS 包

> ID：10828468
> 
> 赞同：6
> 
> 时间：2012-05-31T06:24:38.547
> 
> 标签：sql-server, triggers, ssis

我在 SQL Server 商业智能开发工作室中创建了 SSIS 包。如果我在那里运行该包可以正常工作，因此我部署了该包。

然后我使用包安装向导，将其安装在本地 SQL Server 2005 上。

现在我想在我的触发器中使用它。

我知道如何从文件中执行一个包，但是当它安装在 SQL Server 中时如何执行它？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T06:54:39.427

正如我之前提到的：我**不会**将这样的任务放入触发器中。由于您无法控制触发触发器的时间和次数，因此触发器中的任何内容在执行时间方面都应该非常短。不要**将**长时间运行的处理放入触发器中！

我的方法是：

1.  触发器将一个条目写入表（“作业”表或任何您想调用的表）

2.  例如每 5 分钟运行一次的任务（例如 SQL 代理作业）。或读取该表的任何内容，并在必要时写入文件。

这将触发代码与实际写入文件的较长过程分离。

否则，您的系统性能将受到这个潜在的非常长时间运行的触发器的严重影响......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:34:40.203

有一种方法可以从 T-SQL 执行 SSIS 包，但我认为这是一种非常不可靠的方法。它涉及启用“xp_cmdshell”选项和使用 dtexec。但这绝对不能用于触发器！无论如何，正如 marc_s 在他的评论中指出的那样，触发器应该非常精简。由于它是触发命令事务的一部分，因此任何长时间运行的操作，尤其是 SSIS 包，都会大大降低您的数据库速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T06:51:36.643

我会将其分解为单独的步骤。文件要求可能在那里，但请考虑一下：只要每一行都生成一个文件，如果创建文件可能需要五到十分钟，这真的会破坏交易吗？这是否比您从触发器中运行 SSIS 包所看到的连锁效应更糟糕？

所以：

第 1 步：触发器只需将一行插入到另一个表中，其中包含要创建的文件所需的信息。
第 2 步：修改您的 SSIS 包，使其有一个额外的早期步骤，即轮询该表以查找任何新条目，根据需要创建文件，然后将条目标记为已完成（或完全删除它们，但我个人喜欢审计跟踪）。
第 3 步：将计划作业添加到每 5 分钟运行该 SSIS 包的服务器。

如果您不想修改 SSIS 包，则可以改为创建一个存储过程来轮询表并执行包，并将其安排在作业中。最主要的是摆脱直接从触发器触发包裹的想法。

上述方法还将最大限度地减少潜在问题的影响，例如文件目的地由于某种原因不可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T08:55:04.983

只是补充所有其他答案，你绝对不应该这样做。在我看来，marc_s 将数据插入表并每 X 分钟有一份工作的想法是最好的方法。

PS1：[这](http://www.codeproject.com/Articles/27156/How-to-Call-SSIS-Package-from-the-Stored-Procedure)是关于如何从 SP 调用包的链接

PS2：回答您的其他问题，使用 DTEXEC 调用存储在 SQl 上的包，只需替换 `/FILE`为`/SQL`

```
dtexec /sql "\YourPackage" 
```

# internet-explorer - IE中的颜色变化

> ID：10828470
> 
> 赞同：0
> 
> 时间：2012-05-31T06:24:58.257
> 
> 标签：internet-explorer, colors, twitter-bootstrap

我正在使用 Bootsrap，但颜色有问题。在 Firefox 和其他普通浏览器中，我的网站看起来不错，但是当我在 IE 中打开它时 - 按钮的颜色变成白色并且看起来很糟糕，几乎所有颜色都变得不同。我错过了什么？

[1]：http: [//i.imgur.com/ZNBuR.png](http://i.imgur.com/ZNBuR.png)

[2]： http: [//i.imgur.com/iHGuv.png@import](http://i.imgur.com/iHGuv.png@import) "bootstrap"；

```
.menu .dropdown-menu{
margin-top: 10px;
 }

 body{
padding-top:60px;
 }

 .navbar-inner{ 
border-top-style:solid;
border-top-color:#628d28;
background-color: white;

margin-left:14.8%;

 width:960px;
}
.container{
background-color: white;
width: 960px;
 }

.navbar .nav {
position: relative;
left: 0;
display: block;
float: left;
margin: 0 0px 0 0;
}

.navbar .nav .active > a, .navbar .nav .active > a:hover {
padding-top:0px;
padding-bottom:0px;
color: black;
text-decoration: none;
background-color: white;
}
.navbar .nav > li > a:hover {
background-color: transparent;
color: black;
text-decoration: none;
}

.navbar .divider-vertical {
height: 40px;
width: 1px;
margin: 5px;
overflow: hidden;
background-color: #222222;
border-right: 1px solid #333333;
 }

 #logo {

font-size: 1.7em;
color: #fff;
 text-transform: uppercase;
letter-spacing: -1px;

 font-weight: bold;
 line-height: 1;
 &:hover {
color: #fff;
text-decoration: none;
  }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:32:22.640

IE 有一个已知的 PNG 伽马信息错误，尽管我认为他们在版本 7 中修复了它

使用“PNG Crush”从 PNG 文件中删除伽马信息。更多信息：在 Windows 中使用 pngcrush

# css - .eot 在 ie7-8 中不起作用

> ID：10828474
> 
> 赞同：0
> 
> 时间：2012-05-31T06:25:14.383
> 
> 标签：css, internet-explorer, fonts, font-face

我正在使用[这种](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)格式（我理解这是正确的），但我所做的任何事情都不会使字体在 ie7 和 8 中工作（使用 ie9 模拟）。

它适用于 Chrome、Firefox 和 IE9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:29:25.550

我认为这个问题可能与字体许可有关： `EOT`文件有一个标题，其中存储了一些关于许可信息的字节，如果您的字体没有获得许可，Internet Explorer 可能决定根本不渲染您的字体。

作为反检查尝试加载不同的 EOT 文件，例如免费字体

# c# - 我需要将按钮链接到控制器类中的函数吗？

> ID：10828475
> 
> 赞同：0
> 
> 时间：2012-05-31T06:25:29.897
> 
> 标签：c#, jquery, asp.net, html, asp.net-mvc-3

我有一个打印按钮和一个打印方法，我需要将两者联系起来吗？

我需要让打印按钮调用此方法***public ActionResult Print(int id)***。

我不确定如何将两者联系起来，我确定有很多选项我只是在寻找最简单的选项，如果将代码添加到 html 或 jQuery 我不介意。

可以请给我看看。提前致谢 ：）

**创建到我的按钮：**

```
<input type="button" value="Print" id="btnPrint" /> 
```

**下面是我的控制器：**

```
namespace Contract.Controllers
{

    public class ContractController : Controller
    {

        CompassEntities db = new CompassEntities();

        public ActionResult Index()
        {
            IEnumerable<tbSalesContract> contracts = db.sptbSalesContractsGetForUser(Environment.UserName.Trim() + "_comps").AsEnumerable();

            return View(contracts);
        }

        public ActionResult Print(int id)
        {
            return View(""); // This can be removed and Print code may be added
        }

        public ActionResult Edit(int? id)
        {
            tbSalesContract c = new tbSalesContract();
            c.Suretyship = true;
            if (id != null)
            {
                c = db.tbSalesContracts.Find(id);
            }

            ViewBag.UserName = Environment.UserName.Trim();

            //ContractInstance c = new ContractInstance();       
            return View(c);
        } 
```

**已经可以使用 JQuery 设置动作的打印按钮：**

```
$('#btnPrint').click(function () {     
        if ($('#chkFinal').is(':checked')) {
            $(function () {
                $("#PrintDialog").dialog('close');
            });
        }
        else {
            $('#chkFinal').attr('checked', true); // Set finalized. This checkbox is not visible its like a hidden field
            $('#btnSubmit').click(); // Save
        } 
```

**我目前所拥有的，编译但不带我打印方法：**

```
// Save, set state to finalized and Print
    $('#btnDialogPrint').click(function () {    
        if ($('#chkFinal').is(':checked')) {
            $(function () {
                $("#PrintDialog").dialog('close');
            });
        }
        else {
            $('#chkFinal').attr('checked', true); // Set finalized. This checkbox is not visible its like a hidden field
            $('#btnSubmit').click(); // Save
        }

    $.ajax({
        url: '@Url.Action("Print","ContractController", new {id = Model.SalesContractId})'
    });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:29:35.740

```
$('#btnPrint').click(function() {
    // Call the controller function, put it where you need it.
    $.ajax({
        url: '@Url.Action("Print","ContractController", new {id = Model.SalesContractId})'
    });

    if ($('#chkFinal').is(':checked')) {
        $(function() {
            $("#PrintDialog").dialog('close');
        });
    }
    else {
        $('#chkFinal').attr('checked', true); // Set finalized. This checkbox is not visible its like a hidden field
        $('#btnSubmit').click(); // Save
    }​
}); 
```

# numpy - 有没有办法可以矢量化 fsolve？

> ID：10828477
> 
> 赞同：1
> 
> 时间：2012-05-31T06:25:43.247
> 
> 标签：numpy, scipy

我正在尝试将 fsolve 应用于数组：

```
from __future__ import division
from math import fsum
from numpy import *
from scipy.optimize import fsolve
from scipy.constants import pi

nu = 0.05
cn = [0]
cn.extend([pi*n - pi/4 for n in range(1, 5 +1)])
b = linspace(200, 600, 400)
a = fsolve(lambda a: 1/b + fsum([1/(b+cn[i]) for i in range(1, 5 +1)]) - nu*(sqrt(a) - 1)**2, 3) 
```

默认情况下不允许：

```
TypeError: only length-1 arrays can be converted to Python scalars 
```

有没有办法可以将 fsolve 应用于数组？

**编辑**：

```
#!/usr/bin/env python

from __future__ import division
import numpy as np
from scipy.optimize import fsolve

nu = np.float64(0.05)

cn = np.pi * np.arange(6) - np.pi / 4.
cn[0] = 0.

b = np.linspace(200, 600, 400)

cn.shape = (6,1)
cn_grid = np.repeat(cn, b.size, axis=1)
K = np.sum(1/(b + cn_grid), axis=0)

f = lambda a: K - nu*(np.sqrt(a) - 1)**2
a0 = 3\. * np.ones(K.shape)
a = fsolve(f, a0)

print a 
```

解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:48:30.947

`fsum`适用于 python 标量，因此您应该使用 numpy 进行矢量化。您的方法可能失败了，因为您试图对五个 numpy 数组的列表求和，而不是五个数字或单个 numpy 数组。

首先，我会`cn`使用 numpy 重新计算：

```
import numpy as np

cn = np.pi * np.arange(6) - np.pi / 4.
cn[0] = 0. 
```

接下来我将分别计算前一个 fsum 结果，因为它是一个常数向量。这是一种方法，尽管可能有更有效的方法：

```
cn.shape = (6,1)
cn_grid = np.repeat(cn, b.size, axis=1)
K = np.sum(1/(b + cn_grid), axis=0) 
```

现在应该可以重新定义您的功能`K`：

```
f = lambda a: K - nu*(np.sqrt(a) - 1)**2 
```

* * *

要用于`fsolve`查找解决方案，请为其提供适当的初始向量以进行迭代。这使用零向量：

```
a0 = np.zeros(K.shape)
a = fsolve(f, a0) 
```

或者您可以使用`a0 = 3`：

```
a0 = 3\. * np.ones(K.shape)
a = fsolve(f, a0) 
```

此函数是可逆的，因此您可以检查`f(a) = 0`两个确切的解决方案：

```
a = (1 - np.sqrt(K/nu))**2 
```

或者

```
a = (1 + np.sqrt(K/nu))**2 
```

`fsolve`似乎在从 开始时选择了第一个解决方案`a0 = 0`，而对于`a0 = 3`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:49:26.120

您可以定义 aa 函数来最小化（它应该是原始函数的平方），然后使用简单的最小化器（最好还定义函数的导数）：

```
funcOrig = lambda a: (K - nu*(np.sqrt(a) - 1)**2)
func2 = lambda a: funcOrig(a)**2
dotfunc2 = lambda a: 2*funcOrig(a)* (-nu * 2 * ( np.sqrt(a)-1) * 1./2./np.sqrt(a))
ret = scipy.optimize.fmin_l_bfgs_b(func2, np.ones(400)+1, fprime=dotfunc2, pgtol=1e-20) 
```

# html - 标签可以有多个 xmlns 属性吗？

> ID：10828486
> 
> 赞同：1
> 
> 时间：2012-05-31T06:26:43.957
> 
> 标签：html

在 IE9 中，我在控制台中收到以下错误：

> SCRIPT1002：语法错误 subdomain.domain.com，第 2 行字符 1

创建此错误的行是：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml" dir="ltr" lang="en-US"> 
```

我在 Chrome 中没有收到此错误。

我无法准确地弄清楚出了什么问题。我猜想在 html 标记中有多个 xmlns 属性可能会造成问题。我搜索了这个，但无法获得信息。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:30:32.340

回答你的问题：如果它定义不同的命名空间，它肯定可以有多个命名空间属性！就像你对`xmlns:fb`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:10:38.467

是的，它可以有多个...我在 fb:api 中使用过它

# android - 是否可以在不使用 HTML 的情况下在 android 应用中添加 Facebook 社交评论

> ID：10828491
> 
> 赞同：2
> 
> 时间：2012-05-31T06:27:12.917
> 
> 标签：android, facebook-social-plugins

在我的 Android 应用程序中，无需使用 HTML 就需要插入 facebook 社交评论。我进行了搜索，但到处都使用 html 标签插入了社交评论。

# sql-server - 将 Time DataType 转换为 AM PM 格式：

> ID：10828492
> 
> 赞同：64
> 
> 时间：2012-05-31T06:27:14.623
> 
> 标签：sql-server, sql-server-2008, select, time

我有一个表，其中有两个字段，例如“StartTime”和“EndTime”。两列的数据类型是时间。

所以表的值如下所示：

```
TableA:

            StartTime                EndTime
       ------------------         ----------------
        17:30:00.0000000          17:57:00.0000000 
```

但我需要结果为

```
 StartTime                EndTime
       ------------------         ----------------
            05:30 PM                 05:57 PM 
```

当我选择表格时。如何以 AM PM 格式获取时间？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2015-08-14T15:16:01.847

在 SQL 2012 中，您可以使用 Format() 函数。

[https://technet.microsoft.com/en-us/library/hh213505%28v=sql.110%29.aspx](https://technet.microsoft.com/en-us/library/hh213505%28v=sql.110%29.aspx)

如果列类型为 (datetime)，则跳过强制转换。

**例子：**

```
SELECT FORMAT(StartTime,'hh:mm tt') AS StartTime
FROM TableA 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-05-31T06:45:44.287

使用以下语法将时间转换为 AM PM 格式。

将字段名称替换为以下查询中的值。

```
select CONVERT(varchar(15),CAST('17:30:00.0000000' AS TIME),100) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-03-18T06:44:10.033

以下是您可以使用的各种方法（取决于您的需要）。

使用**时间**数据类型：

```
DECLARE @Time Time = '15:04:46.217'
SELECT --'3:04PM'
       CONVERT(VarChar(7), @Time, 0),

       --' 3:04PM' --Leading Space.
       RIGHT(' ' + CONVERT(VarChar(7), @Time, 0), 7),

       --' 3:04 PM' --Space before AM/PM.
       STUFF(RIGHT(' ' + CONVERT(VarChar(7), @Time, 0), 7), 6, 0, ' '),

       --'03:04 PM' --Leading Zero.  This answers the question above.
       STUFF(RIGHT('0' + CONVERT(VarChar(7), @Time, 0), 7), 6, 0, ' ')

       --'03:04 PM' --This only works in SQL Server 2012 and above.  :)
       ,FORMAT(CAST(@Time as DateTime), 'hh:mm tt')--Comment out for SS08 or less. 
```

使用**日期**时间数据类型：

```
DECLARE @Date DateTime = '2016-03-17 15:04:46.217'
SELECT --' 3:04PM' --No space before AM/PM.
       RIGHT(CONVERT(VarChar(19), @Date, 0), 7),

       --' 3:04 PM' --Space before AM/PM.
       STUFF(RIGHT(CONVERT(VarChar(19), @Date, 0), 7), 6, 0, ' '),

       --'3:04 PM' --No Leading Space.
       LTRIM(STUFF(RIGHT(CONVERT(VarChar(19), @Date, 0), 7), 6, 0, ' ')),

       --'03:04 PM' --Leading Zero.
       STUFF(REPLACE(RIGHT(CONVERT(VarChar(19), @Date, 0), 7), ' ', '0'), 6, 0, ' ')

       --'03:04 PM' --This only works in SQL Server 2012 and above.  :)
       ,FORMAT(@Date, 'hh:mm tt')--Comment line out for SS08 or less. 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-27T07:35:43.813

这会像**上午 11:30一样返回**

```
select CONVERT(VARCHAR(5), FromTime, 108) + ' ' + RIGHT(CONVERT(VARCHAR(30), FromTime, 9),2)
from tablename 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-31T06:43:55.303

```
SELECT CONVERT(varchar, StartTime, 100) AS ST,
       CONVERT(varchar, EndTime, 100) AS ET
FROM some_table 
```

或者

```
SELECT RIGHT('0'+ LTRIM(RIGHT(CONVERT(varchar, StartTime, 100),8)),8) AS ST,
       RIGHT('0'+ LTRIM(RIGHT(CONVERT(varchar, EndTime, 100),8)),8) AS ET
FROM some_table 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-09T06:08:14.507

```
> SELECT CONVERT(VARCHAR(30), GETDATE(), 100) as date_n_time
> SELECT CONVERT(VARCHAR(20),convert(time,GETDATE()),100) as req_time
> select convert(varchar(20),GETDATE(),103)+' '+convert(varchar(20),convert(time,getdate()),100)

> Result (1):- Jun  9 2018 11:36AM
> result(2):-  11:35AM
> Result (3):-  06/10/2018 11:22AM 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-03-26T19:40:37.920

> 选择 CONVERT(varchar(15),CAST('17:30:00.0000000' AS TIME),100)

除了空间问题外，几乎可以完美运行。如果将其更改为：

```
select CONVERT(varchar(15),CAST('17:30:00.0000000' AS TIME),22) 
```

...然后你得到空间。此外，如果要转换的列已经是`TIME`格式，如果直接引用它，则可以跳过强制转换。

**最终答案**：

```
select CONVERT(varchar(15),StartTime,22) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-31T06:46:51.130

多种功能，但这将为您提供所需的功能（在 SQL Server 2008 上测试）

**编辑：**以下内容不仅适用于`time`类型，也适用于 a `datetime`。

`SELECT SUBSTRING(CONVERT(varchar(20),StartTime,22), 10, 11) AS Start, SUBSTRING(CONVERT(varchar(20),EndTime,22), 10, 11) AS End FROM [TableA];`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-29T08:35:46.087

试试这个：

```
select CONVERT(VARCHAR(5), ' 4:07PM', 108) + ' ' + RIGHT(CONVERT(VARCHAR(30), ' 4:07PM', 9),2) as ConvertedTime 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-29T08:08:05.387

试试这个：

```
select CONVERT(varchar(15),CAST('2014-05-28 16:07:54.647' AS TIME),100) as CreatedTime 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-15T19:01:11.697

```
 select right(convert(varchar(20),getdate(),100),7) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-06T03:48:56.160

使用上面@Saikh 的答案，第二个选项，您可以在时间本身和 AM 或 PM 之间添加一个空格。

```
REVERSE(LEFT(REVERSE(CONVERT(VARCHAR(20),CONVERT(TIME,myDateTime),100)),2) + ' ' + SUBSTRING(REVERSE(CONVERT(VARCHAR(20),CONVERT(TIME,myDateTime),100)),3,20)) AS [Time], 
```

我知道混乱，但这是我选择的解决方案。奇怪的是 CONVERT() 不会自动添加该空间。*SQL Server 2008 R2*

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-14T15:58:27.857

1.  声明 @iniTme 时间 = '03:15:30'
2.  声明 @endTme 时间 = '15:15:30'
3.  选择格式（CAST（@iniTme 作为日期时间），'hh:mm tt'）
4.  选择格式（CAST（@endTme 作为日期时间），'hh:mm tt'）
5.  03:15 AM
6.  下午 3:15

# sql - 根据MongoDB中的不同值查询文档？

> ID：10828493
> 
> 赞同：2
> 
> 时间：2012-05-31T06:27:30.713
> 
> 标签：sql, mongodb, mongoid, distinct

我正在尝试从 MongoDB 集合中获取一些文档，但是有很多非常相似的条目。假设有 4 个文档具有`{title: "Foo", author: "John"}`，但我只想返回结果集中的一个。例如，只要有一个文档具有一组给定的重复值，就只有一条记录。你是怎样做的？有点像一个`SQL SELECT DISTINCT(author), title`

**更新**

我应该澄清一下：我有兴趣显示一个包含 100 个标题的列表，但只显示标题的 1 个实例，无论有多少作者拥有该标题的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:57:27.383

mongo 中有一个[独特的](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)命令可用。

# java - PHP - 如果我们在 php 中创建子类的对象，它会调用父类构造函数，然后像 java 那样调用子类构造函数吗？

> ID：10828494
> 
> 赞同：2
> 
> 时间：2012-05-31T06:27:46.770
> 
> 标签：java, php

PHP - 如果我们在 php 中创建子类的对象，它会调用父类构造函数，然后像 java 那样调用类构造函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:30:43.120

不，您需要在子类中调用父构造函数。

```
public function __construct() {
  parent::__construct();
  //...other code
} 
```

# arrays - 如何通过mongoid查询出具有空白数组字段的条目？

> ID：10828498
> 
> 赞同：0
> 
> 时间：2012-05-31T06:28:02.917
> 
> 标签：arrays, mongoid

我的模型是：（使用 mongoid 版本2）

```
class Trip
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::MultiParameterAttributes

  field :images, :type => Array, :default => []
end 
```

我可以通过以下方式搜索其图像大小不为 0 的条目：

```
Trip.where(:images.size => 1).size #=>1, correct 
```

虽然此方法不能用于搜索空白数组字段：

```
Trip.where(:images.size => 0).size #=>0, error, as i do have many entries with default [] field. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:14:36.977

尝试以下查询，我希望它应该工作：

```
Trip.all.or(:images.size => 0).or(:images => nil) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:52:52.120

以下测试验证 @rubish 的最新编辑是否有效。

```
Trip.all.or(:images.size => 0).or(:images => nil) 
```

测试/单元/trip_test.rb

```
require 'test_helper'

class TripTest < ActiveSupport::TestCase
  def setup
    Trip.delete_all
  end

  test "criteria or" do
    Trip.create(:images => nil)
    Trip.create(:images => [])
    Trip.create(:images => ['xyzzy'])
    assert_equal(3, Trip.count)
    puts "Trip.all images:#{Trip.all.to_a.map(&:images).inspect}"
    trips_with_images_empty_or_nil = Trip.all.or(:images.size => 0).or(:images => nil).to_a
    puts "trips_with_images_empty_or_nil images: #{trips_with_images_empty_or_nil.map(&:images).inspect}"
    assert_equal(2, trips_with_images_empty_or_nil.size)
  end
end 
```

测试输出

```
Run options: --name=test_criteria_or

# Running tests:

Trip.all images:[nil, [], ["xyzzy"]]
trips_with_images_empty_or_nil images: [nil, []]
.

Finished tests in 0.009099s, 109.9022 tests/s, 219.8044 assertions/s.

1 tests, 2 assertions, 0 failures, 0 errors, 0 skips 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-04T16:05:15.137

只需添加我的解决方案，这可能会有所帮助（也是最新的语法）：

```
scope :without_images, -> { any_of(:images.with_size => 0, images: nil) } 
```

# opencv - 在单个图像中重复筛选关键点

> ID：10828501
> 
> 赞同：5
> 
> 时间：2012-05-31T06:28:19.970
> 
> 标签：opencv, duplicates, sift

我正在使用 opencv2.3.1 来检测图像中的 SIFT 关键点。但是我发现在检测结果中，有重复的点。即，有两个坐标相同（以像素为单位）的关键点，但它们对应的描述符却大不相同。以下代码显示了 SIFT 提取过程。我认为人们应该熟悉使用过的“box.png”。所以有兴趣的朋友可以试试下面的代码，看看有没有跟我一样的问题。

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/features2d/features2d.hpp"
#include <iostream>
int main( )
{
cv::Ptr<cv::FeatureDetector> detector = cv::FeatureDetector::create( "SIFT" );
cv::Ptr<cv::DescriptorExtractor> extractor = cv::DescriptorExtractor::create("SIFT" );
cv::Mat im = cv::imread("box.png", CV_LOAD_IMAGE_COLOR );
std::vector<cv::KeyPoint> keypoints;
cv::Mat descriptors;
detector->detect( im, keypoints);
extractor->compute( im,keypoints,descriptors);
int duplicateNum = 0;
for (int i=0;i<keypoints.size();i++)
{
    for (int j=i+1;j<keypoints.size();j++)
    {
        float dist = abs((keypoints[i].pt.x-keypoints[j].pt.x))+abs((keypoints[i].pt.y-keypoints[j].pt.y));
        if (dist == 0)
        {
            cv::Mat descriptorDiff = descriptors.row(i)-descriptors.row(j);
            double diffNorm = cv::norm(descriptorDiff);
            std::cout<<"keypoint "<<i<<" equal to keypoint "<<j<<" descriptor distance "<<diffNorm<<std::endl;
            duplicateNum++;
        }
    }
}
std::cout<<"Total keypoint: "<<keypoints.size()<<", duplicateNum: "<<duplicateNum<<std::endl;

return 1; 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T03:46:12.757

希望能帮助你理解为什么。

为关键点周围的所有像素计算大小和方向。然后，为此创建一个直方图。在这个直方图中，360 度的方向被分成 36 个 bin（每个 10 度）。假设某个点（在“方向收集区域”中）的梯度方向是 18.759 度，那么它将进入 10-19 度的 bin。添加到 bin 中的“数量”与该点的梯度大小成正比。一旦对关键点周围的所有像素都完成了此操作，直方图将在某个点出现峰值。

假设您看到直方图在 20-29 度处达到峰值。因此，关键点被分配方向 3（第三个 bin）

**此外，任何高于最高峰 80% 的峰都将转换为新的关键点**。这个新的关键点具有与原始关键点相同的位置和比例。但它的方向与另一个峰相同。

因此，方向可以将一个关键点拆分为多个关键点。

关于 SIFT 的重要参考：http: [//aishack.in/tutorials/sift-scale-invariant-feature-transform-introduction/](http://aishack.in/tutorials/sift-scale-invariant-feature-transform-introduction/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T16:53:22.333

是的，这是真的 - SIFT 描述符的 openCV 实现为某些关键点生成多个描述符，它们的方向不同（SIFT 描述符估计关键点的主要方向）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T22:24:30.017

通过在 .NET 中实现 SIFT，我遇到了同样的问题：

相同的关键点但不同的描述符如下所示：

![在此处输入图像描述](../Images/edf402e86d520118f24e51affb09dac9.png)

![在此处输入图像描述](../Images/360e867e2e79a0b9f0222f7da373d9d8.png)

# azure - 同一实例上的多个工作角色

> ID：10828502
> 
> 赞同：7
> 
> 时间：2012-05-31T06:28:26.540
> 
> 标签：azure, azure-worker-roles

如何将 Windows Azure 设置为在同一实例上运行的多个辅助角色？可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T10:55:25.353

我认为您误解了工人角色是什么。Web 和 Worker 角色是 Window Server VM，主要区别在于 Web 角色运行 IIS。您可能有多个实例。

真的没有“同一实例中的多个工作角色”这样的事情。将 Worker Role 视为虚拟机的模板：启动脚本和事件处理代码，用于处理启动和关闭等消息，以及您编写的打包并在虚拟机内部运行的代码。

从`OnStart()`or `Run()`，您可以运行几乎任何您想要的代码。启动多个线程，运行服务器代码（如 Tomcat）等。您拥有的任何代码都将在每个实例中运行。当您横向扩展到多个实例时，每个实例都会使用相同的 VM 模板。

另请参阅[此答案](https://stackoverflow.com/a/7121886/272109)，我在其中提供了更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T12:38:26.233

就像大卫在他的回答中提到的那样，您可以启动多个线程。我的一位客户通过使用[ThreadedRoleEntryPoint](http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2012/02/combining-multiple-azure-worker-roles.html)类来做到这一点。

此类允许您使用多个工作角色入口点类（甚至来自多个程序集）并以相同的角色运行它们：

```
 public override void Run()
    {
        Trace.TraceInformation("WebRole::Run begin", "Information");

        List<WorkerEntryPoint> workers = new List<WorkerEntryPoint>();

        workers.Add(new Worker1());
        workers.Add(new Worker2());

        base.Run(workers.ToArray());

        Trace.TraceInformation("WebRole::Run end", "Information");
    } 
```

这里的优点是您可以从小处着手，并在单个角色（您实际部署的角色）中运行所有工作角色（实际上不是工作角色，但我们称它们为进程或工作人员）。

然后，当您的业务开始增长时，您可以开始使用专用角色，这意味着每个工作角色至少运行 1 个实例。当这需要发生时，对您的代码的影响将是最小的，因为传递给 ThreadedRoleEntryPoint 的工作人员继承自 WorkerEntryPoint，看起来很像 RoleEntryPoint 类。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-03T17:36:26.780

是的你可以。这是设计模式[http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2010/12/running-multiple-threads-on-windows.html](http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2010/12/running-multiple-threads-on-windows.html)

# android - 使除一个之外的所有图像动态消失

> ID：10828506
> 
> 赞同：0
> 
> 时间：2012-05-31T06:29:01.070
> 
> 标签：android, android-imageview, android-view

我正在尝试创建一个在屏幕上有一组图像的应用程序。当用户单击图像然后摇动手机时，视图中的所有图像都会从屏幕上消失，除了他单击的图像。这是我到目前为止写的：

```
// List of the Images for the app
private ImageView image1, image2;
private ImageView image3, image4;
private ImageView image5, image6;
private ImageView image7, image8;
private ImageView image9, image10;
private ImageView image11, image12;

private ImageView selectedImage;
private boolean flag = true;

// an array that will hold all the images.
private ImageView cards[] = new ImageView[12];

//SET THE IMAGES...

// onShake
mSensorListener
        .setOnShakeListener(new ShakeEventListener.OnShakeListener() {
                public void onShake() {
                if (selectedImage != null) {
                    showSelectedImageOnly();
                }
            }
        });

private void showSelectedImageOnly() {
    if(!flag)
        return;

    for (ImageView image : cards){
        if(image.getId() != selectedImage.getId()){
            image.setVisibility(View.INVISIBLE);
            Log.d("--MY-APP", "image number "+image.getId()+" was deleted");
        }
    }
    flag = false;
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.ImageView01:
        selectedImage = null;
        selectedImage = image1;
        rotateImage(0, image1, image2);
        defineTrickCard(0);
        break;
    case R.id.ImageView02:
        selectedImage = image1;
        rotateImage(0, image1, image2);
        defineTrickCard(0);
        break;
    case R.id.ImageView03:
    // .... THIS GOES ON...
    case R.id.ImageView12:
        selectedImage = image11;
        rotateImage(5, image11, image12);
        defineTrickCard(5);
        break;
    }
}

private void rotateImage(int index, ImageView firstImage,
        ImageView secondImage) {
    if (isImages[index]) {
        applyRotation(0, 90, firstImage, secondImage, isImages[index]);
        isImages[index] = !isImages[index];

    } else {
        applyRotation(0, -90, firstImage, secondImage, isImages[index]);
        isImages[index] = !isImages[index];
    }
}

private void applyRotation(float start, float end, ImageView firstImage,
        ImageView secondImage, boolean isFirst) {
    // Find the center of image
    final float centerX = firstImage.getWidth() / 2.0f;
    final float centerY = firstImage.getHeight() / 2.0f;

    // Create a new 3D rotation with the supplied parameter
    // The animation listener is used to trigger the next animation
    final Flip3dAnimation rotation = new Flip3dAnimation(start, end,
            centerX, centerY);
    rotation.setDuration(500);
    rotation.setFillAfter(true);
    rotation.setInterpolator(new AccelerateInterpolator());
    rotation.setAnimationListener(new DisplayNextView(isFirst, firstImage,
            secondImage));

    if (isFirst) {
        firstImage.startAnimation(rotation);
    } else {
        secondImage.startAnimation(rotation);
    }

} 
```

问题是，当用户点击多张图片时，手机会摇晃，所有点击过的图片都会保留在视图中，其余的会根据需要消失。

关于如何解决这个问题的任何想法？我必须使所有未选择的（包括以前的选择）从屏幕上消失。

**更新：**

更新了代码以显示`rotateImage`功能，3D 动画的其余代码取自这个[非常好的教程](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:40:16.387

我猜您正在使用`Animation`该方法中旋转图像`rotateImage`。在动画的情况下要注意的一点是`View`对象在动画期间是不变的。因此，如果您必须将视图设置为隐藏，则需要注册`onAnimationEnd`事件并调用`view.setVisibility(View.INVISIBLE)`。

# android - 如何从另一个类（它扩展了 Activity）方法，Android 调用 CCColorLayer 类的方法？

> ID：10828512
> 
> 赞同：5
> 
> 时间：2012-05-31T06:29:40.700
> 
> 标签：android, methods, android-activity, cocos2d-android

我需要从 B 类的方法（它扩展活动）调用 A 类的方法（它扩展 CCColorLayer）。这怎么可能？尝试在 B 类中为 A 类创建对象。但这不是解决方案。每次它创建不同的层。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T05:06:18.913

您是否正在寻找创建单例模式？

```
 public Class A extends CCcolorlayer
    { 
    private static final A INSTANCE= new A();
     A() 
    { 
    }
     public static A getInstance() 
    { return INSTANCE; 
    } 

    } 
```

从 B 类

```
 public class B
{
   B()
     {
        A.getInstance();// which returns object of the class A.(you dont need to create object of class A everytime.)
     }

} 
```

我不确定你是否正在寻找这个。

# google-chrome-extension - Chrome 扩展程序：来自 URL 的图标

> ID：10828515
> 
> 赞同：0
> 
> 时间：2012-05-31T06:29:46.617
> 
> 标签：google-chrome-extension

尝试制作 Chrome 扩展程序，由于某些超出我的原因，我必须从托管在其他地方的 url 加载图像......

```
{
  "name": "Name",
  "version": "1.0",
  "manifest_version": 1,
  "description": "A something something something",
  "browser_action": {
    "default_icon": "favicon.ico",
    "default_popup": "popup.html"
  },
  "icons": {
    "128": "logo_white.gif"
    }

} 
```

如何从[http://www.example.com/favicon.ico](http://www.example.com/favicon.ico)和[http://www.example.com/logo_white.gif](http://www.example.com/logo_white.gif)加载 favicon.ico 和 logo_white.gif ？我很困惑，因为我对 chrome 扩展及其对 JSON 的使用相当陌生。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:08:53.033

您可以在运行时将数据作为图像标签加载，然后将其粘贴到画布对象中，提取 ImageData 并将其传递给[setIcon](http://code.google.com/chrome/extensions/browserAction.html#method-setIcon) API。

在 background.js 中像下面这样的东西可以解决问题：

```
var canvas = document.createElement("canvas");
var img = new Image();
img.onload = function() {
  document.body.appendChild(canvas);
  var context = canvas.getContext("2d");
  context.drawImage(this, 0, 0);
  var imageData = context.getImageData(0, 0, img.width, img.height);
  chrome.browserAction.setIcon({imageData: imageData});
}
img.src = "http://www.example.com/logo_white.gif"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:56:43.810

您不能使用位于扩展程序之外的图标。您的扩展程序将安装在本地计算机上，当没有可用的 Internet 连接时，Google Chrome 应该能够获取您的扩展程序的图标。

# c++ - 如何在 PyQt 上使用 Qxt 库？

> ID：10828520
> 
> 赞同：9
> 
> 时间：2012-05-31T06:30:13.973
> 
> 标签：c++, python, qt, pyqt, libqxt

首先，请原谅我的英语不好。我希望你们明白我在说什么。

我已经开发了服务器和客户端系统。服务器端基于**Qt**，客户端基于**PyQt**。（我也想基于**Qt**构建客户端，但由于几个问题没有其他选择）。

为了相互交流，我使用`QLocalSocket`. 但这还不够。我想使用`Signal`和`Slot`通过网络。

幸运的是，我发现了`QxtRPCPeer`。它完全支持我想做的事情。但是，不幸的是，我找不到如何`QxtRPCPeer`在 Python (PyQt) 上使用。

我尝试使用`SIP`，但我没有这方面的经验，也没有足够的时间`SIP`自己学习。

我希望有另一种方法可以通过**Qt**和**PyQt**之间的网络实现信号/插槽。我等待你的回应，并继续研究它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:24:13.673

对 pyqt 和 pyside 源代码进行搜索表明，这两个项目都没有对 Qxt 的绑定。

有一个关于谷歌代码的项目，尚未发布代码：[http ://code.google.com/p/pyqxt/](http://code.google.com/p/pyqxt/)

焦点非常狭窄的绑定，只有全局快捷方式：[https ://github.com/jmatt/pygs](https://github.com/jmatt/pygs)

恐怕就目前情况而言，你无法拥有你想要的东西。

如果可以接受，请用 C++ 编写 rpc shim 并将其包装在 Python 模块中。

# matlab - 如何在matlab中从工作区读取结构变量到Gui？

> ID：10828522
> 
> 赞同：0
> 
> 时间：2012-05-31T06:30:26.133
> 
> 标签：matlab, user-interface

我试图从工作区获取一个结构变量到 gui 编辑文本框，经过多次试验我成功地做到了，但是在显示变量时我遇到了另一个问题。

将字符串应用于文本框后，我收到此警告。**单行编辑控件不能有多行文本**'所以我将编辑框属性最大步长更改为 2，这样我就可以避免这个错误。

我的意图是在模拟正在进行时显示变量值，但我无法做到。模拟完成后，当且仅当我在一段时间后单击编辑框时，我才会显示值，但这也像向下滚动显示。

```
function edit3_Callback(hObject, eventdata, handles)
% hObject    handle to edit3 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

simout=evalin('base','simout');
L = length(simout);
vars = cell(1,L);
[vars{1:L}] = simout.signals.values;
set(handles.edit3,'string',vars);
guidata(hObject,handles); 
```

任何人请尽快帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:12:13.570

如果您希望您的编辑框在模拟过程中显示值，您必须调用

```
set(handles.edit3,'string',currentValue); 
```

*在*模拟期间（其中 currentValue 是您要显示的值）。

> 模拟完成后，当且仅当我在一段时间后单击编辑框时，我才会显示值，但这也像向下滚动显示。

只有在单击后才能看到该值，因为该代码位于“回调”函数中，当您与编辑框交互时会调用该函数。如果您想在模拟结束时立即显示该值，让您的模拟在完成时执行*set*命令以更新编辑框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:19:27.297

您可能会遇到问题，即 Matlab 进程在运行时不会更新屏幕。

`drawnow`在您的更新之后可能需要包括在内。但这仅在窗口位于前台时才有帮助。

就我个人而言，我总是将内容写入日志文件并在 matlab 之外显示。

# javascript - 带有嵌套项的手风琴控制

> ID：10828526
> 
> 赞同：1
> 
> 时间：2012-05-31T06:31:06.203
> 
> 标签：javascript, css, html

我已经创建了手风琴控件，并且在该手风琴控件中它有 2 个单选按钮和按钮。我在 HTML5 中使用 javascrip 和 Dot net 中的 css 创建。当在同一个手风琴面板中选中任何单选按钮时，其他一些控制面板应该打开。当检查另一个广播按钮时，应禁用第一单元按钮的面板，并应在同一手风琴控制中看到另一个面板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:16:10.563

This can be done with CSS alone, via the `:checked` pseudo-selector.

Example:

```
input[type="radio"] + div {
    height: 0;
}

input[type="radio"]:checked + div {
    height: 100px;
} 
```

jsFiddle (complete with transitions): [http://jsfiddle.net/dH65w/](http://jsfiddle.net/dH65w/)

Unfortunately transitions don't work right with `height: auto`, so you'd need fixed heights. Also, the "+" part of the CSS doesn't work in IE7, and transitions don't even work in IE9.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:35:44.477

这是与我的其他答案基本相同的 jQuery 版本（与浏览器更兼容，但它是 JavaScript）。

```
$('input[type="radio"]').change(function() {
    $('input[type="radio"]:checked + div').animate({
        height: "100px"
    }, ".25s");
    $('input[type="radio"]:not(:checked) + div').animate({
        height: 0
    }, ".25s");
}); 
```

jsFiddle：http: [//jsfiddle.net/dH65w/1/](http://jsfiddle.net/dH65w/1/)

jQuery 方式更灵活，因为您可以做 CSS 规则不允许的事情（例如影响父元素之外的元素），如在这个 jsFiddle 中：http: [//jsfiddle.net/dH65w/2 /](http://jsfiddle.net/dH65w/2/)

# android - 点击广告后删除广告 - ADMOB

> ID：10828531
> 
> 赞同：3
> 
> 时间：2012-05-31T06:31:20.107
> 
> 标签：android, admob

我在 Play 商店中几乎没有适用于 Android 的免费应用程序。我想弄清楚它是否违反了让广告消失的 admob 规则，例如在用户点击广告后 12 小时。Admob 服务条款说：

> 鼓励点击
> 
> 发布商不得要求他人点击其广告或使用欺骗性实施方式获取点击。这包括但不限于为用户查看广告或执行搜索提供补偿，承诺为此类行为为第三方筹集资金或将图片放置在单个广告旁边。

我不确定这是否包括我想做的事情，我知道这里有很多经验丰富的出版商，所以欢迎提出想法。

# node.js - Socket.IO 客户端库加载缓慢

> ID：10828532
> 
> 赞同：7
> 
> 时间：2012-05-31T06:31:20.123
> 
> 标签：node.js, socket.io

![在此处输入图像描述](../Images/38f5b322b44aa2c520b640e3d0fbc990.png)

我启动我的服务器，并在浏览器中刷新页面，然后需要 >2 秒来加载 JS 资源。如果我然后在任何浏览器中重新加载页面，它会快速加载。

这仅在服务器启动后发生第一个请求。我想这与第一次将 JS 文件放在一起，然后将其缓存在服务器上有关。

**有什么办法可以减少这个时间吗？**

我尝试过使用和不使用生产设置（gzip、minify 等）。

客户端代码：

```
<script src="/socket.io/socket.io.js"></script>
<script>
var socket = io.connect();
</script> 
```

服务器代码：

```
var express = require('express'),
    expressServer = express.createServer(),
    socketServer = require('socket.io').listen(expressServer);

expressServer.listen(1337); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T18:35:22.043

socket.io 中当前存在导致此问题的错误。确保你没有这个设置，它应该加载得更快：

```
io.set('browser client gzip', true);          // gzip the file 
```

第一次调用 load socket.io.js 将尝试压缩它并将其存储在内存中。你会遇到这些错误：

*   [https://github.com/LearnBoost/socket.io/issues/984](https://github.com/LearnBoost/socket.io/issues/984)
*   [https://github.com/LearnBoost/socket.io/issues/932](https://github.com/LearnBoost/socket.io/issues/932)

您可以通过使用缩小版本并允许缓存直到解决此问题来提高速度：

```
io.set('browser client minification', true);  // send minified client
io.set('browser client etag', true);          // apply etag caching logic based on version number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:52:43.677

不知何故，您的 jQuery 库是 socket.io 库的一半以上，下载速度提高了 50 倍。也许它是从以前缓存的？最终，浏览器只是下载一个文件。

不管怎样，[这家伙](https://stackoverflow.com/questions/9012686/socket-io-script-size-reduce)声称已经缩小了它。

# powershell - Powershell 移动目录并添加扩展

> ID：10828536
> 
> 赞同：1
> 
> 时间：2012-05-31T06:32:20.680
> 
> 标签：powershell, copy-item

我有一个家庭作业问题，我无法完成它：
`Write a shell that has two folder names as parameters and moves the second folder as subfolder of the first one and adds '.unu' to all filenames in that second folder.`

这是我写的，但它不起作用：

```
gci D:\powershell\dir2 | foreach-object{ ren -new ($_.Name + ".unu")} 

Copy-Item -Recurse D:\powershell\dir2.unu D:\powershell\dir2

Remove-Item -Recurse D:\powershell\dir2.unu 
```

你也可以看到我在`D:\powershell`2 个文件夹中制作，我想搬进`dir2`去`dir1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:40:19.043

你在这里并没有真正使用管道......：

```
Move-Item dir3 .\dir1\ -PassThru | Get-ChildItem | 
    where { ! $_.PsIsContainer } | 
    Rename-Item -NewName { $_.Name + ".unu" } 
```

Move-item 将为您处理移动文件夹，如果使用 PassThru，您将获得要播放的新对象... 将其传送到 Get-ChildItem 将返回其中的内容（可以考虑在其中添加 -recurse ...）。Where 将过滤掉目录（仅要求您重命名文件），并且 Rename-Item 将绑定所有文件，并根据要求重命名它们。

有人想为此写一个脚本..？:o

# sql - 如何获取每个月的第一个日期和最后一个日期

> ID：10828538
> 
> 赞同：1
> 
> 时间：2012-05-31T06:32:27.507
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

表格1

```
id sdate edate
001 05/01/2012 25/02/2012
002 19/02/2012 17/04/2012
..... 
```

sDate, eDate 格式为`dd/mm/yyyy`

我想从 table1 中获取每个月的第一个日期和最后一个日期，例如`01/01/2012 31/01/2012`，`01/02/2012 29/02/2012`

预期产出

```
id sdate edate
001 05/01/2012 31/01/2012
001 01/02/2012 25/02/2012
002 19/02/2012 29/02/2012
002 01/03/2012 31/03/2012
002 01/04/2012 17/04/2012
..... 
```

如何查询上述条件？

需要查询帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:37:13.337

```
SELECT 
DATEADD(mm, DATEDIFF(mm, 0, sdate), 0),
DATEADD(ms, -3, DATEADD(mm, DATEDIFF(m, 0, edate) + 1, 0))
from yourtable; 
```

它实际上是一个两部分查询：

```
SELECT DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0);
SELECT DATEADD(ms, -3, DATEADD(mm, DATEDIFF(m, 0, GETDATE()) + 1, 0)); 
```

以上将为您提供当月的开始日期和结束日期，

# javascript - 如何将浏览器活动捕获到视频文件中

> ID：10828539
> 
> 赞同：2
> 
> 时间：2012-05-31T06:32:33.977
> 
> 标签：javascript, asp.net, video, browser, video-capture

我想在浏览器中捕获活动以进行测试。可以使用javascript吗？还有其他可能吗？

我想在按下录制按钮后录制屏幕，并在按下停止按钮时停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:38:00.483

你试过京吗？我们的 QA 经常使用该应用程序来捕获浏览器错误的截屏视频。[http://www.techsmith.com/jing-features.html]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:42:10.960

**CrazyEgg：**它可以让您跨多个域检查您的访问者活动，并且非常容易设置。免费帐户（提供以下功能

*   热图分析 - 人们点击您网站的位置的可视化表示。这会告诉您什么是热门的，什么不是，因此您可以做出重要的更改。

*   五彩纸屑——这将帮助您更深入地了解访客活动，并根据推荐人、操作系统、浏览器等对其进行优化。

*   覆盖 - 帮助您了解链接被点击了多少次？您网站中的“热门”链接是什么？

*   列表 - 帮助您了解每个元素的活动（例如，有多少访问者使用了“搜索框”，点击了图像。

**ClickDensity：**提供与 Crazyegg 非常相似的功能，并且与其他功能几乎没有区别：

*   惊喜区域——人们是否点击了他们不应该点击的区域？（未链接的徽标？）。同样，您网站中不受欢迎的区域/链接是什么？

*   精确的热图 - 与许多其他服务不同，ClickDensity 热图非常精确，并且很容易比较不同的部分/组件。

-悬停地图 - 显示页面上各个项目的使用数据。页面上的所有可点击项目都会突出显示，并且可以单独激活以显示点击它们的访问者数量以及其他统计信息。

*   页面统计信息：您可以点击您网站上的任何链接并查看该页面的统计信息（即使是免费帐户）。

**UserFly：**观看网站上的用户活动视频怎么样？观察他们点击的地方，他们如何滚动？他们的鼠标移动等？他们如何消费内容？

Userfly 本质上可以让您跟踪网站上的访问者活动并将视频存储在您的帐户中。我们使用 Userfly 已经有一段时间了，并且非常喜欢这项服务（尽管团队有很多功能建议）。

**WebVisor：**是一个模块 Yandex Metrica，它允许您查看访问者以激活的视频形式。

您可以观看诸如鼠标移动、单击、滚动页面、表单填写和选择/复制文本等操作。

参考网址： [http ://www.pluggd.in/track-website-visitor-activity-services-tools-to-use-297/](http://www.pluggd.in/track-website-visitor-activity-services-tools-to-use-297/)

[http://existenceweb.fr/wordpress/webvisor-enregistrez-lactivite-de-vos-visiteurs-en-video/?lang=en](http://existenceweb.fr/wordpress/webvisor-enregistrez-lactivite-de-vos-visiteurs-en-video/?lang=en)

# java - 如何在 hql 查询中选择对象的一部分？

> ID：10828545
> 
> 赞同：0
> 
> 时间：2012-05-31T06:33:52.290
> 
> 标签：java, hibernate, join, hql

我需要调整查询以提高性能。对象树如下：

```
classA {
 classB b;
 classC c;
.....} 
```

我需要类似于 SQL 的选择：

```
select a.field1, b.field2, c.field3, c.field4 from a left outer join b 
  on a.id=b.fk left outer join c on b.id=c.fk 
```

我不明白会返回什么样的结果，是arrayList吗？或者查询返回所有 3 个对象？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:37:24.607

这将是

```
List<Object[]> list = new ArrayList<Object[]>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T06:47:28.650

查询返回的结果类型为 -

```
 List<Object[]> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T06:53:07.760

如果您使用 HQL，我认为您使用的是休眠。为您的对象提供具有关系（ManyToOne 或 OneToOne）的映射：

```
class A {

    @ManyToOne
    pribvate B b;

    @OneToOne
    private C c;
} 
```

然后使用会话方法通过 hql 查询条件来选择您的对象 A。Hibernate 会自动为您完成所有连接。它将返回 A 列表。

# c#-4.0 - 如何获得直接显示填充？

> ID：10828546
> 
> 赞同：1
> 
> 时间：2012-05-31T06:34:18.053
> 
> 标签：c#-4.0, directshow, directshow.net

我正在使用 C#.net 中的 DirectshowLib2005.dll 从网络摄像头录制视频。我有这个代码来 startVideoRecoding，如下所示。

```
try
        {
            IBaseFilter capFilter = null;
            IBaseFilter asfWriter = null;
            IFileSinkFilter pTmpSink = null;
            ICaptureGraphBuilder2 captureGraph = null;
            GetVideoDevice();
            if (availableVideoInputDevices.Count > 0)
            {
                //
                //init capture graph
                //
                graphBuilder = (IFilterGraph2)new FilterGraph();
                captureGraph = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();
                //
                //sets filter object from graph
                //
                captureGraph.SetFiltergraph(graphBuilder);
                //
                //which device will use graph setting
                //
                graphBuilder.AddSourceFilterForMoniker(AvailableVideoInputDevices.First().Mon, null, AvailableVideoInputDevices.First().Name, out capFilter);
                captureDeviceName = AvailableVideoInputDevices.First().Name;
                //
                //check saving path is exsist or not;if not then create
                //
                if (!Directory.Exists(ConstantHelper.RootDirectoryName + "\\Assets\\Video\\"))
                {
                    Directory.CreateDirectory(ConstantHelper.RootDirectoryName + "\\Assets\\Video\\");
                }
                #region WMV                   
                //
                //sets output file name,and file type
                //
                captureGraph.SetOutputFileName(MediaSubType.Asf, ConstantHelper.RootDirectoryName + "\\Assets\\Video\\" + videoFilename + ".wmv", out asfWriter, out pTmpSink);                    
                //
                //configure which video setting is used by graph
                //                
                IConfigAsfWriter lConfig = asfWriter as IConfigAsfWriter;
                Guid asfFilter = new Guid("8C45B4C7-4AEB-4f78-A5EC-88420B9DADEF");
                lConfig.ConfigureFilterUsingProfileGuid(asfFilter);
                #endregion
                //
                //render the stram to output file using graph setting
                //
                captureGraph.RenderStream(null, null, capFilter, null, asfWriter);
                m_mediaCtrl = graphBuilder as IMediaControl;
                m_mediaCtrl.Run();
                isVideoRecordingStarted = true;
                VideoStarted(m_mediaCtrl, null);
            }
            else
            {
                isVideoRecordingStarted = false;
            }
        }
        catch (Exception Ex)
        {               
           ErrorLogging.WriteErrorLog(Ex);
        } 
```

如果你观察这行代码

```
//
                //configure which video setting is used by graph
                //                
                IConfigAsfWriter lConfig = asfWriter as IConfigAsfWriter;
                Guid asfFilter = new Guid("8C45B4C7-4AEB-4f78-A5EC-88420B9DADEF");
                lConfig.ConfigureFilterUsingProfileGuid(asfFilter); 
```

它将应用该 GUID 上描述的视频设置，我从位于“C:\windows\WMSysPr9.prx”的文件中获取此 GUID。

所以我的问题是如何使用格式、分辨率和所有内容创建我自己的视频设置？

如何使用网络摄像头以黑白模式或灰度模式录制视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:55:46.317

> 所以我的问题是如何使用格式、分辨率和所有内容创建我自己的视频设置？

不推荐使用基于 GUID 的配置文件，但您仍然可以使用它们。您可以使用和朋友在代码中构建自定义配置文件[`WMCreateProfileManager`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757762%28v=vs.85%29.aspx)（您从空配置文件开始，并自行决定添加视频和/或音频流）。这是 C++ API，我想[WindowsMedia.NET](http://windowsmedianet.sourceforge.net/)是您已经在使用的 DirectShowLib 的姊妹项目，它为您提供了与 .NET 代码的接口。

[Windows SDK`WMGenProfile`示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757605%28v=vs.85%29.aspx)展示了如何手动构建配置文件，并为您提供了一个工具来交互式地构建它并保存到`.PRX`您可以在应用程序中使用的文件中。

> $(WindowsSDK)\Samples\multimedia\windowsmediaformat\wmgenprofile

![在此处输入图像描述](../Images/3e74f50dc001767164fcbc671d333e12.png)

> 如何使用网络摄像头以黑白模式或灰度模式录制视频？

相机给你一张照片，然后它通过管道通过某些处理进行记录。使其灰度化的能力并不是与生俱来的。

您可能需要考虑两件事。首先，如果相机能够在捕获时剥离颜色信息，您可以利用这一点。检查一下 - 如果它的设置有饱和度滑块，那么你只需把它输入最小值位置，相机就会给你灰度。

在代码中，您`IAMVideoProcAmp`为此使用接口。

另一个选项，包括如果相机缺少提到的功能，是应用后处理过滤器或转换为灰度的效果。没有这方面的原液，否则有几种方法可以达到效果：

*   使用去除颜色的第三方过滤器
*   从 DirectShow 管道导出，使用[`Color Control Transform DSP`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819078%28v=vs.85%29.aspx)（从 Win Vista 开始可用）或 GDI 函数转换代码中的数据
*   在流管道中使用 Sample Grabber 并直接更新图像位

# c# - C# 邮件程序 - 550 访问被拒绝 - HELO 名称无效

> ID：10828555
> 
> 赞同：0
> 
> 时间：2012-05-31T06:34:55.657
> 
> 标签：c#, smtp

我知道有各种与此问题相关的线程，但我无法在这些线程上获取任何响应并使其在我的服务器上运行。

因此，让我们尝试看看是否有人可以在这里帮助我。99% 的电子邮件都能正常发送，但实际上很少会返回该错误。

我的代码看起来像这样

```
 MailMessage mm = new MailMessage(Settings.EmailCustomerService, to, subject, body);
        mm.SubjectEncoding = Encoding.UTF8;
        mm.BodyEncoding = Encoding.UTF8;
        mm.IsBodyHtml = true;

        MailAddress add = new MailAddress(Settings.EmailCustomerService, "Customer Service");
        mm.From = add;

        try
        {
            SmtpClient client = new SmtpClient(Settings.EmailSMTP);

            client.UseDefaultCredentials = false;
            client.Credentials = new NetworkCredential(Settings.EmailUser, Settings.EmailPwd); 

            System.Threading.ParameterizedThreadStart threadStart = new System.Threading.ParameterizedThreadStart(SendInThread);
            threadStart.Invoke(new SendInThreadParams
            {
                client = client,
                Message = mm
            });
        }
        finally
        {
            mm = null;
        } 
```

实际上，凭据代码是后来添加的，但即使没有它，我的代码也可以正常运行。只是碰巧有 1% 的电子邮件从未发送给收件人，而添加这 2 行作为凭据并没有什么不同。

Settings.EmailUser 只是运行 SMTP 的服务器上的用户，但我没有将它附加到任何地方。

> > 我敢打赌这就是问题所在。

SMTP 服务器中继设置为使用 127.0.0.1，而 FQDN 只是机器的名称（类似于“Machine1”......没有 domain.com 名称）

我得到的错误是这个

> 报告-MTA：dns；机器 1
> 从 MTA 接收：dns；机器 1
> 到达日期：2012 年 5 月 30 日星期三 23:08:36 -0700
> 最终收件人：rfc822；test@email.net
> 操作：失败
> 状态：5.5。 0
> 诊断代码：smtp；550 访问被拒绝 - HELO 名称无效（请参阅 RFC2821 4.1.1.1）

通过电子邮件返回的回复信息是：

```
 > This is an automatically generated Delivery Status Notification.  
   Delivery to the following recipients failed.  
   test@email.com 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:10:41.593

除了邮件/投递状态附件，DSN 通常还会有返回的邮件。对于此类问题，您应该发布返回邮件的标题和 DSN。

在我看来，您的服务器已接受该消息，但在继续传输时出错。如果您的服务器拒绝了它，您的代码将引发异常。因此，您的服务器 Machine1 接受了它，并试图将其传输到 email.net，但 email.net 拒绝了它。Machine1 然后生成了一个 DSN（交付状态通知，在您的情况下为 NDR = 未交付报告）。

换句话说，这是电子邮件服务器的配置错误，而不是代码问题。几乎可以肯定，问题是电子邮件服务器没有像您所说的那样使用 FQDN 设置。

作为一个配置问题，它属于ServerFault。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:22:39.997

根据 BEN 的回答，我意识到我缺少 PRIMARY DND 后缀。

主要是为了找出您的 FQDN，您只需：1）打开命令提示符 2）键入“ipconfig /all”

阅读您的主机名 + 主要 DNS 后缀。

我的 DNS 后缀是 emtpy，所以我使用此链接添加
[http://www.simpledns.com/kb.aspx?kbid=1227](http://www.simpledns.com/kb.aspx?kbid=1227)

然后重新启动机器。

现在代码就像一个魅力。谢谢本！！！

# java - java.sql.SQLException：配置单元中的 org.apache.thrift.transport.TTransportException？

> ID：10828562
> 
> 赞同：12
> 
> 时间：2012-05-31T06:35:46.080
> 
> 标签：java, hadoop, hbase, hive

我正在尝试使用 java 在 hive 中创建表。我发现

`java.sql.SQLException: org.apache.thrift.transport.TTransportException`

在执行我的代码时。

这是我的代码

```
public void createTable(String tableName) {
        try{
            Statement stat = con.createStatement();

        String QueryString = "CREATE TABLE '"+tableName+"'(User_Id INTEGER NOT NULL AUTO_INCREMENT, " + "User_Name VARCHAR(25), UserId VARCHAR(20), User_Pwd VARCHAR(15), primary key(User_Id))";

        a = stat.executeUpdate(QueryString);
        if(a==1){
            System.out.println(a);
            System.out.println("Table has been created");
        }

        }catch(Exception e){
        System.out.println(e);}
} 
```

为什么抛出这个异常，我该如何解决它。？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T05:50:05.183

这是一个非常通用的错误消息，描述**hiveserver**出现问题并建议您查看 Hive 日志。如果您访问配置单元日志并找到异常调用堆栈，则可以找到根本原因，或者如果您共享异常，我可能会为您提供帮助。

我见过的最常见的问题是：

1.  与并发相关的元存储问题

2.  当您以**$hive --service yourhiveserver**启动配置单元服务器并使其运行数天然后运行您的代码时，您的连接可能是代理到服务器，您将得到完全相同的错误。如果您重新连接到服务器，此错误将消失。这只是因为经过一段时间 wait_time 过期并发生断开连接。

3.  端口特定错误

请务必为您的 Hive 服务器设置一个开放端口，并在启动 hive 服务器之前将其设置如下：

```
 $export HIVE_PORT=10000
 $hive --service hiveserver
 $ _run_your_code 
```

可能还有其他原因，但是您最好的选择是检查配置单元日志中的调用堆栈以找出根本原因并解决问题。

# python - 如何计算“for”循环中的某些内容？

> ID：10828564
> 
> 赞同：1
> 
> 时间：2012-05-31T06:35:47.903
> 
> 标签：python

我正在做一个任务，我必须在屏幕上循环移动一个模拟机器人 - 我已经把那部分放下了，但是，在循环之间，我还必须打印每个动作覆盖的区域百分比 - 那是我的问题。

我用谷歌搜索了一下，甚至发现有人有同样的问题，但是，我不确定我是否做得正确。

提供了此代码：

```
percent_complete = 0

for i in range(5):
    percent_complete += 20
    print('{}% complete'.format(percent_complete)) 
```

但是，在出现错误后，进一步的谷歌搜索显示仅适用于某些版本

所以我使用了这段代码：

```
percent_complete = 0

for i in range(5):
        percent_complete += 20
        print '% complete' % (percent_complete) 
```

而且，至少，它现在执行代码，但是，打印时的输出如下：

```
Here we go!
hello
omplete
hello
(omplete
hello
<omplete
hello
Pomplete
hello
domplete 
```

这是什么原因？我假设因为必须编辑其中一个代码，其他部分也可以，但我不确定需要做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T06:38:19.190

```
for i in range(5):
    percent_complete += 20
    print '%d complete' % (percent_complete) 
```

您缺少说明`d`符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T06:38:27.000

第一个版本仅适用于 Python 3，因为它`print`用作函数。您可能正在寻找以下内容：

```
percent_complete = 0
for i in xrange(5):
    percent_complete += 20
    print '{0} complete'.format(percent_complete) 
```

您的其他代码没有执行您打算执行的操作，因为它现在将数字显示为字符串。您想要的是先将数字正确转换为字符串，然后再显示在字符串中。该功能`format`为您做到这一点。

您还可以使用 Ansari 的方法，它明确指定它`percent_complete`是一个数字（带有说明`d`符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T06:55:28.620

添加/更正上述答案：

您的第一个示例不起作用的原因不是因为 print 不是函数，而是因为您遗漏了参数说明符。试试`print('{0}% complete'.format(percent_complete))`。括号内的 0 是其中的关键因素。

# asp.net-mvc-3 - 使用 Code First EF 部署 MVC 3，也使用 Web Deploy

> ID：10828565
> 
> 赞同：0
> 
> 时间：2012-05-31T06:35:51.743
> 
> 标签：asp.net-mvc-3, entity-framework, code-first

我正在尝试部署我的第一个 MVC 网站（使用 arvixe 作为我的主机），但我遇到了数据库问题。当我在本地开发并更改模型上的任何内容（映射到我的 DbContext）时，它会清除我的数据库并创建一个新数据库（如果存在），或者只是为我的实体完全创建一个数据库。

话虽如此，我的问题是，当我部署它时，部署了包含所有控制器的项目，并且我可以访问我的登录页面，但是一旦我尝试登录（这会触发在我的本地创建数据库），它只会给出我一个错误，不会尝试创建数据库。

不太确定我在这些步骤中遗漏了什么，我是否应该至少在没有记录的情况下创建数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:53:11.157

这听起来像是权限问题。您在服务器上运行的帐户很可能没有 DROP/CREATE 表的权限。

部署到生产/托管服务器时，我通常不依赖 EF 来创建我的架构。我将我的 CREATE tabel 脚本从我的 DEV 环境复制到 PRODUCTION 并确保我的 DBCONTEXT 初始化代码设置为不进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:55:33.237

尝试这个：

```
using System.Data.Entity;
using System.Data.Entity.Migrations;
using System.Data.Entity.ModelConfiguration.Conventions;
public class YourDbContext: DbContext
{
    public YourDbContext()
        : base("name = YourConnection")
    {
        Database.SetInitializer<YourDbContext>(new MigrateDatabaseToLatestVersion<YourDbContext, YourMigrationsConfiguration>());
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        //Your Building Rules
    }

    #region DbSets
    public DbSet<YourTable> YourTables { get; set; }
    #endregion
}

public class YourMigrationsConfiguration : DbMigrationsConfiguration<YourDbContext>
{
    public YourMigrationsConfiguration()
        : base()
    {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = true;
    }

    protected override void Seed(YourDbContext context)
    {
        /*sql script*/
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:38:40.757

因此，显然，我可以在我的主机本地执行我的应用程序执行相同操作的唯一方法是拥有系统管理员权限/帐户以删除 dbase。这不会发生......永远......所以我决定只生成一个脚本并远程运行它。我不确定一旦我开始对表进行更改和对数据进行维护，它将如何影响我的数据库。祝我好运。

哦，顺便说一句，这是我的脚本来源

[https://stackoverflow.com/a/10760985/639713](https://stackoverflow.com/a/10760985/639713)

# sql - 使用包含列或不使用创建索引的区别

> ID：10828568
> 
> 赞同：21
> 
> 时间：2012-05-31T06:36:11.493
> 
> 标签：sql, sql-server, tsql, indexing, sql-server-2008-r2

我想在 SQL Server 2008 R2 的 Column1 和 Column2 中创建索引 以下查询有什么区别：

1.  不包括

    ```
    CREATE NONCLUSTERED INDEX [IX_1] ON [dbo].[MyTable] 
    (
        [Column1] ASC,
        [Column2] ASC
    ) ON [PRIMARY] 
    ```

2.  或包括：

    ```
    CREATE NONCLUSTERED INDEX [IX_2] ON [dbo].[MyTable] 
    (
        [Column1] ASC
    )
    INCLUDE ([Column2]) ON [PRIMARY] 
    ```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-31T06:39:55.783

在第一个`Column2`被添加到索引键中。在第二个中，它可能不会^((*))添加到键中，在这种情况下，它只会出现在索引叶页中。这可以允许搜索索引，`Column1`但避免需要返回基表（[书签查找/键查找](https://stackoverflow.com/questions/820714/what-is-a-bookmark-lookup-in-sql-server)）来检索`Column2`.

即它使 index2 “覆盖”查询，例如

```
SELECT Column1,Column2
FROM [dbo].[MyTable] 
WHERE Column1 = 'X' 
```

它还涵盖查询，例如

```
SELECT Column1,Column2
FROM [dbo].[MyTable] 
WHERE Column1 = 'X' AND Column2 = 'Y' 
```

但是 index1 对于第二个查询可能会表现得更好，因为它可以直接在两列上搜索（而不是只能搜索`Column1`然后需要在索引叶级别评估所有匹配的行以查看它们是否符合`Column2`谓词）。如果`Column2`从未用作针对该索引的搜索谓词，并且您对该索引的查询不会从已`Column2`排序中受益，则应将其添加为`INCLUDE`-d 列以保持键的大小并减少指数。

[（*）我在上面说“可能不是”的原因是因为如果`Column2`是（部分）聚集索引键，它[仍然会被添加到那里，](http://sqlblog.com/blogs/kalen_delaney/archive/2010/03/07/more-about-nonclustered-index-keys.aspx)`UNIQUE`因为它不是使用该选项创建的非聚集索引。]

# java - 正则表达式从控制台命令获取标志？

> ID：10828569
> 
> 赞同：0
> 
> 时间：2012-05-31T06:36:22.107
> 
> 标签：java, regex, console, flags

我正在尝试获得一个可以提取字符串中的标志和值的正则表达式。基本上，我需要能够接受这样的字符串：

```
 command -aparam -b"Another \"quoted\" param" -canother one here 
```

并捕获数据：

```
a  param
b  Another "quoted" param
c  another one here 
```

到目前为止，这是我的 Java 正则表达式：

```
(?<= -\w)(?:(?=")(?:(?:")([^"\\]*(?:\\.[^"\\]*)*)(?="))|.*?( -\w|$))? 
```

但它还没有完全奏效。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:42:48.757

建议是使用可用的 CLI 解析器之一。例如来自 Jakarta的[CLI ，或者更好的是](http://commons.apache.org/cli/)[args4j](http://weblogs.java.net/blog/kohsuke/archive/2005/05/parsing_command.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:48:32.303

`split`使用方法将字符串标记为命令及其参数，

```
String input = "command -aparam -b\"Another \"quoted\" param\" -canother one here ";
String[] cmds = input.split("\\s*-(?=\\w)"); 
```

# entity-framework - 什么是实体框架？我们为什么使用它？

> ID：10828572
> 
> 赞同：3
> 
> 时间：2012-05-31T06:36:57.240
> 
> 标签：entity-framework, orm

我将在几天后开始一个新项目，该项目基于`ASP.NET` `MVC3`我在 Web 开发方面没有足够的经验。
我只想了解`Entity`框架。什么是`Entity`框架？我们为什么使用它？也想了解一下`Object Relational Mapping`。它如何与实体框架连接？
我用谷歌搜索但没有得到确切的想法。
我很想知道所有这些东西背后的基本概念是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T06:43:03.177

Entity Framework 是一个对象关系映射器。这意味着它可以将数据库中的数据作为对象（例如：具有 Id、Name 等属性的 Person 对象）或对象集合返回。

为什么这很有用？嗯，这真的很容易。大多数时候您不必自己编写任何 SQL，并且使用您的语言内置函数进行迭代非常容易。当您对对象进行任何更改时，ORM 通常会检测到这一点，并将对象标记为“已修改”。当您将 ORM 中的所有更改保存到数据库时，ORM 将根据您对对象所做的操作自动生成插入/更新/删除语句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T06:43:24.433

在代码中，您可能希望以面向对象的方式处理对象。

```
MyClass obj = new MyClass(); // etc. 
```

但是，将数据从对象保存到数据库可能很麻烦，因为您最终可能会将对象映射到 SQL 查询字符串

```
// Perhaps with parameter bindings instead, but the idea is the same
"INSERT INTO MYTBL name,phone VALUES(" + obj.Name + "," + obj.Phone + ")"; 
```

ORM 框架通过生成 SQL 语句将此对象映射到 SQL 语句，当您需要从数据库保存或加载对象时，实体管理器将执行它们。它以另一个抽象层为代价，但它会使代码更容易编写。

# python - Python open(file,vr) 是否应该及时更新？

> ID：10828578
> 
> 赞同：5
> 
> 时间：2012-05-31T06:37:20.460
> 
> 标签：python, linux, file-io, filesystems

每当我`open()`使用 的文件时`Python`，最后一次访问时间都不会更新，这很奇怪：

如果我打开`r/rb`文件时没有任何变化

如果我打开`w/r+`或打开 ctime 和 mtime 正确更新但没有`atime`

它看起来不像是文件系统问题（在这种情况下是 ext3），因为如果我触摸或 cat 文件，它会正确更新。

我还没有找到很多关于它的信息；它应该以这种方式表现还是有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:46:12.353

请尝试运行`mount`，看看是否`noatime`在挂载的 fs 上使用了 flag。此外，如果您的内核足够新鲜，则默认设置为“relatime”。

“open()”代码是不言自明的，不会与 ATIME 标志混淆：

```
/* >> fileutils.c from Python 3.2.3 */

FILE*
_Py_fopen(PyObject *path, const char *mode)
{
#ifdef MS_WINDOWS
    wchar_t wmode[10];
    int usize;

    usize = MultiByteToWideChar(CP_ACP, 0, mode, -1, wmode, sizeof(wmode));
    if (usize == 0)
        return NULL;

    return _wfopen(PyUnicode_AS_UNICODE(path), wmode);
#else
    FILE *f;
    PyObject *bytes = PyUnicode_EncodeFSDefault(path);
    if (bytes == NULL)
        return NULL;

    /* >> Plain fopen(), nothing fancy here. */
    f = fopen(PyBytes_AS_STRING(bytes), mode);
    Py_DECREF(bytes);
    return f;
#endif
} 
```

# javascript - 带有自动填充功能的标签和搜索系统

> ID：10828580
> 
> 赞同：-5
> 
> 时间：2012-05-31T06:37:29.457
> 
> 标签：javascript, search, tags, live

我一直在寻找易于编辑的标签和搜索系统，并且需要在打字时使用自动填充系统。

它需要从数据库示例中获取信息：键入“Sh”

在数据库中获取以下信息。

```
Sharks 2         / 2004 / Drama / Dreamworks
Sherlock Holmes  / 2009 / Drama / UnitedFilms
Sherlock Holmes  / 2012 / Drama /United Films 
```

它现在将其显示为列表并带有链接。

我还需要一个标签系统，当我输入字母时，它会向我显示用户并在变量中从该用户那里获取 id。

我做不到我不太擅长 js，也找不到教程，因为我不喜欢 scipt，只是我想了解它。

好的，我的想法是从 mysql 调用数据库并显示一个 for 循环，我知道如何使用变量和所有内容来执行此操作，但我无法为每次键入字母时再次生成代码，再次通过 mysql all 进行搜索我想这是我不知道我是否有正确的想法。

```
<?php
   $var_search = $typed;
   $query = mysql_query("SELECT * FROM movies WHERE name = '%$typed%");
   $rows = mysql_num_rows($query);
    for($i=0, $i = $rows, $++){
      echo "here show the list"
     }

?> 
```

但是我怎么能在每次输入一个字母时重新进行查询。

对不起我的英语，不是我的母语。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:35:02.627

是的，Antonio Laguna 是对的，但据我所知，您需要使用的是 ajax：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您必须创建一个文本框并使用 onkeyup 事件启动一个 ajax 请求，每次用户键入一个键时，以显示一个带有数据库给定输出的 php 文件（在这个文件中将是您在你上面的问题）。

这看起来像这样：

**索引.html：**

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
        function typing(search){
        $.ajax({
          url: 'get_db.php?q='+search,
          success: function(data) {
            $('#result').html(data);
          }
        });

        }
    </script>
</head>
<body>
    <input type="textbox" onkeyup="javascript: typing(this.value);">
    <div id="results" style="width: 200px; height: 300px;">

    </div>
</body>
</html> 
```

**get_db.php：**

```
<html>
<head>

</head>
<body>
<ul>
    <?php
       $typed = $_GET["q"];
       $typed = trim($typed);
       $query="select * from movies where name = '%typed%'";  
        $rt=mysql_query($query);
        echo mysql_error();  
        while($nt=mysql_fetch_array($rt)){
    ?>
        <li>
            <a href="<?php echo "$nt[link]"; ?>"><?php echo "$nt[name]"; ?></a> 
        </li> 
    <?php 
        }
    ?>

    ?>
</ul>
</body>
</html> 
```

# c# - 将更改保存到 db

> ID：10828582
> 
> 赞同：0
> 
> 时间：2012-05-31T06:37:48.660
> 
> 标签：c#, datagridview

当我从`DataGridView`. 假设我按下`Delete`键删除 上的选定行`DataGridView`，然后对其他行进行一些其他更改。

最后我会按下`Save`按钮来保存所有这些更改

这是我的代码：

```
 private bool SaveData(DataGridView dgv)
        {
            bool bDone = true;
            DataTable dtVesselDataChanges;
            SQLiteCommand DeleteCmd = new SQLiteCommand();
            string sdeleteVesselCase = "  public string SQL_DeleteVesselDataCase = "delete from vesseldata where plantid = @plantid and fileid=@fileid and vdid=@vdid";"
            DeleteCmd.CommandText = sdeleteVesselCase;
 dtVesselDataChanges = gdt.GetChanges();

            if (dtVesselDataChanges.Rows.Count > 0 && dtVesselDataChanges != null)
            {
                for (int i = 0; i < dtVesselDataChanges.Rows.Count; i++)
                {
                    if (dtVesselDataChanges.Rows[i].RowState == DataRowState.Deleted)
                    {
                        int rowindexPlant = Convert.ToInt32(gdt.Rows[i]["PlantId", DataRowVersion.Original]);
                        int rowindexFile = Convert.ToInt32(gdt.Rows[i]["FileId", DataRowVersion.Original]);
                        int rowindexVDID = Convert.ToInt32(gdt.Rows[i]["VDID", DataRowVersion.Original]);
                        DeleteCmd.Parameters.AddWithValue("@plantid", rowindexPlant);
                        DeleteCmd.Parameters.AddWithValue("@fileid", rowindexFile);
                        DeleteCmd.Parameters.AddWithValue("@VDID", rowindexVDID);
                        _DatabaseConnection.ExecuteQuery(DeleteCmd); ;

                    }
                }
            }
There is no error except DB is not updated 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:06:32.570

你需要有正确的删除命令

```
DeleteCmd.CommandText = "delete from vesseldata where plantid = @plantid and fileid= @fileid and vdid=@vdid"; 
```

在命令文本中设置具有相同名称的参数。

```
DeleteCmd.Parameters.AddWithValue("@plantid", rowindexPlant);
DeleteCmd.Parameters.AddWithValue("@fileid", rowindexFile);
DeleteCmd.Parameters.AddWithValue("@vdid", rowindexVDID); 
```

如果尚未打开`_DatabaseConnection`，请先打开。`ExecuteQuery`

如果您的应用程序没有上`ExecuteQuery`线，调试并检查您的应用程序是否到达该点以及命令文本、连接状态和任何错误是什么，您将不会收到任何错误。

# asp.net - 在模式弹出窗口中打开 aspx 页面

> ID：10828596
> 
> 赞同：0
> 
> 时间：2012-05-31T06:38:40.473
> 
> 标签：asp.net, popup, modal-dialog

我有一个带有标签和按钮的 aspx 页面（比如说 page1.aspx）。在其他一些页面中，我需要在模式弹出窗口中显示 page1.aspx 的内容。我已经阅读了很多文章，但没有找到确切的解决方案。一些可能的想法是，1：创建用户控件，2：使用 Server.execute() 方法。

请提出任何解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:56:37.563

如果您只想显示一个弹出窗口（模式对话框），您可以创建一个包含标记表单 page1.aspx 的用户控件并使用[AjaxControlTookit (ModalPopup)](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)或[jQuery.dialog](http://docs.jquery.com/UI/Dialog)

我更喜欢 jQuery.Dialog，它将 2 个回发保存到服务器并且更容易集成。

[下面](https://stackoverflow.com/a/768163/782754)是如何将它与 ASP .Net 集成，这是一个小技巧，因此当单击按钮时，该对话框中的输入将被发布到服务器。

# ios - 为什么我不能为我的 UITableViewCell 设置图像？

> ID：10828599
> 
> 赞同：0
> 
> 时间：2012-05-31T06:38:45.540
> 
> 标签：ios, uitableview

我使用 a 创建了一个选项菜单，`UITableViewController`并且可以正确设置标签，但不能正确设置图像。

我尝试取出 switch 语句并使用基于正确值填充的数组，但`[indexPath row]`也无法使其正常工作。

有任何想法吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
    }

    switch ([indexPath row]) {
        case 0:
            [[cell imageView] setImage:[UIImage imageNamed:@"42-photos.png"]];
            [[cell textLabel] setText:@"Photos"];
            break;
        case 1:
            [[cell imageView] setImage:[UIImage imageNamed:@"280-clapboard.png"]];
            [[cell textLabel] setText:@"Videos"];
            break;
        case 2:
            [[cell imageView] setImage:[UIImage imageNamed:@"42-info.png"]];
            [[cell textLabel] setText:@"About"];
            break;
        default:
            return cell;
            break;
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:58:37.057

`UITableViewCellStyleValue2`不包括图像：

> 单元格左侧带有标签的单元格样式，其文本为右对齐和蓝色；单元格右侧是另一个带有较小文本的标签，左对齐和黑色。电话/联系人应用程序使用这种样式的单元格。

您应该`UITableViewCellStyleDefault`改用（或设计自己的单元格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:05:11.367

我猜你还没有创建自定义单元格，如果你的 UITableViewCell 中有这么多控件，最好有一个自定义单元格，然后访问控件的属性，你可以更改图像。你可以参考我的这篇[文章](https://stackoverflow.com/a/10602224/936588)。你的风格选择将不支持图像。

# apache - 为什么以下 apache htaccess 代码没有返回我的页面？

> ID：10828601
> 
> 赞同：1
> 
> 时间：2012-05-31T06:39:17.580
> 
> 标签：apache, .htaccess

我请求了一个网址“http://mydomain/testscripts/php_Env”

我的 testscripts 文件夹中有一个 php_Env.php 文件。

我的htaccess如下

```
RewriteEngine On    # Turn on the rewriting engine
RewriteCond %{REQUEST_FILENAME} !-f    # Existing File
RewriteCond %{REQUEST_FILENAME} !-d    # Existing Directory
RewriteRule    ^(php_([a-zA-Z_]+))$  $1.php   [NC,L] 
```

运行时，浏览器返回我

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, admin@localhost and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log 
```

我想要做的是，如果请求文件不是目录而不是文件，则请求文件。我在 htaccess 中哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:00:58.290

尝试没有多余的空格和注释：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(php_([a-zA-Z_]+))$ $1.php [NC,L] 
```

如果可行，您可以添加回注释（可能在规则中的最后一个字符和`#`符号之间只留一个空格）。

# iphone - NSUnknownKeyException setValue:forUndefinedKey:

> ID：10828608
> 
> 赞同：11
> 
> 时间：2012-05-31T06:40:07.097
> 
> 标签：iphone, ios5, uitableview, nsexception

> 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键 buttonOfFirstView 的键值编码不兼容。”

为什么我会收到此错误？我正在尝试通过 XIB 制作一个表格单元格。添加此代码后，它会引发上述异常。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"MyCell";

    MyTableViewCell *cell = (MyTableViewCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        NSArray *arrayCellXib = [[NSBundle mainBundle] loadNibNamed:@"MyTableViewCell" 
                                                              owner:self 
                                                            options:nil];

....
} 
.....

return cell;
} 
```

如何解决？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-31T06:42:09.927

检查您在 XIB 中对网点的引用，其中一个可能引用了不再存在的属性 (buttonOfFirstView)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-04T19:48:21.953

将 File's Owner 类设置为`NSObject`并将`UITableViewCell`类设置为您在 XIB 中的自定义类。它将解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T06:42:47.183

这正是与您的情况下的关键 buttonOfFirstView 相关的问题。如果它是一个按钮，它可能在您的任何 xib 中连接错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T19:55:30.070

退出 iOS 模拟器。确保保存项目，然后退出 xCode 并重新启动，一切都会好起来的。我这样做了，它对我有用。那就是如果其他一切都正确连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T17:45:54.963

你需要清理你的项目：转到 Product -> Clean

这对我有用

# math - 用模数减去非常大的数

> ID：10828610
> 
> 赞同：1
> 
> 时间：2012-05-31T06:40:11.363
> 
> 标签：math

我需要减去两个非常大的整数以及模数 1000000007

x 和 y 是整数 1 <= x,y <= 1000

```
long long s[x+1];
long long c[x+1];

for(int i=1;i<=x;i++)
  c[i] = power(y,i)%mod;

s[1]=1;
for(int i=2;i<=x;i++){
    sum=0;
    for(int j=1;j<i;j++){
        sum = (sum + (s[j]*c[i-j]%mod))%mod;
    }
    s[i] = (c[i] - sum)%mod; // <----------- s[i] is -ve 
} 
```

问题是什么时候`c[i]%mod`小于`Sum%mod`

例如：当 c[i] 大于 Sum 时。
但`c[i]%mod`小于`Sum%mod`
437001927 - 952742480

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:58:52.340

你可以添加一个`if`语句。

```
if(s[i]<0)
  s[i] += mod 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:55:45.510

我会用

```
s[i] = (c[i] - sum + mod) % mod; 
```

在这种情况下。`sum`是模计算的`mod`，所以它不能大于`mod`。

# c# - c#有什么方法可以找到虚拟磁盘驱动器的详细信息吗？

> ID：10828611
> 
> 赞同：0
> 
> 时间：2012-05-31T06:40:15.517
> 
> 标签：c#, windows

比如说`D:`是虚拟驱动器；我需要知道虚拟驱动器的以下详细信息。

```
 1\. on which HDD it is present
 2\. virtual drive no.
 3\. want to write a file to confirm the details 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:15:21.887

我想您可能正在[VHD API中寻找](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323700%28v=vs.10%29.aspx)[GetVirtualDiskPhysicalPath](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323672%28v=vs.10%29.aspx)等。此[博客文章](http://www.jmedved.com/2009/05/open-and-attach/)包含一些使用 VHD 的 C# 代码，因此可能是一个起点。

如果您无法从中获取所需的所有信息，也许您至少可以获取足够的信息，以便您可以使用 WMI 查询其余信息，可能使用[Win32_DiskDrive](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132%28v=vs.85%29.aspx)或类似的。

# php - PHP 会话与 JavaScript Cookie 冲突

> ID：10828615
> 
> 赞同：1
> 
> 时间：2012-05-31T06:40:30.113
> 
> 标签：php, javascript

我试图保持垂直滚动条的位置，这样用户在页面自动刷新时不需要滚动到他们所在的位置。这是我第一次使用 JavaScript，所以我还没有编写任何东西来使滚动条功能工作，但尝试使用 Internet 上的 cookie 教程进行测试，例如简单的 cookie 教程，询问您的姓名，然后页面将显示我们在警报框中的名字。

```
<html>
<head>
<script type="text/javascript">
<!--
function WriteCookie()
{
  if( document.myform.customer.value == "" ){
  alert("Enter some value!");
  return;
}

cookievalue= escape(document.myform.customer.value) + ";";
document.cookie="name=" + cookievalue;
alert("Setting Cookies : " + "name=" + cookievalue );
}

function ReadCookie()
{
  var allcookies = document.cookie;
  alert("All Cookies : " + allcookies );

  // Get all the cookies pairs in an array
  cookiearray  = allcookies.split(';');

  // Now take key value pair out of this array
  for(var i=0; i<cookiearray.length; i++){
  name = cookiearray[i].split('=')[0];
  value = cookiearray[i].split('=')[1];
  alert("Key is : " + name + " and Value is : " + value);
  }
}

//-->
</script>
</head>
<body>
<form name="myform" action="">
Enter name: <input type="text" name="customer"/>
<input type="button" value="Set Cookie" onclick="WriteCookie();"/>
<input type="button" value="Get Cookie" onclick="ReadCookie()"/>
</form>
</body>
</html> 
```

当我单击“获取 Cookie”按钮时，警报将列出 PHPSESID 值和我之前使用不同的测试过的一些其他 cookie 值。所以我使用 print_r 来显示 $_COOKIE 数组并发现 JavaScript cookie 也被添加到 PHP 的 cookie 中。有没有办法使用 JavaScript 创建 cookie 而不必影响 PHP 的 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:50:37.037

cookie 列表是唯一的，JS cookie 和 PHP cookie 没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:50:57.157

虽然有 cookie 可以限制在服务器端，但没有 cookie 可以限制在客户端。您始终可以命名 cookie 名称以避免冲突。

如果你的目标是现代浏览器，你也可以使用[localStorage](http://www.w3.org/TR/webstorage/)。这里有一些关于如何实现它的好问题。

# python - 使用 cjson 解码无效 JSON - python-django

> ID：10828621
> 
> 赞同：0
> 
> 时间：2012-05-31T06:41:20.483
> 
> 标签：python, django, json

我正在使用的 Google API 正在为“&”符号输出无效的 JSON。

**“名称”：“Abercrombie \x26 Fitch Co.”**

我已经厌倦了简单的 .replace('\x26', '&')，但这并没有解决 python-django 中的问题。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:58:25.353

也许你错过了`{ }`，我可以正确解码。你`UTF-8`在你的python解释器中使用吗？

```
In [11]: simplejson.loads('''{"name" : "Abercrombie \x26 Fitch Co."}''')
Out[11]: {'name': 'Abercrombie & Fitch Co.'} 
```

# android - 传递值另一个页面

> ID：10828622
> 
> 赞同：0
> 
> 时间：2012-05-31T06:41:24.533
> 
> 标签：android, android-intent

我是安卓新手。并编写此程序但出现错误。

```
public class First1Activity extends Activity {

    /** Called when the activity is first created. */

    public final static String x= "com.example.my.p";
    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
    }
    public void mess(View view) {
        Intent intent=new Intent(First1Activity.this,DisMess.class);
        EditText edittext = (EditText) findViewById(R.id.editText1);
        String m= edittext.getText().toString();
        intent.putExtra(x, m);
        TextView t=(TextView)findViewById(R.id.textView1);
        t.setText(m);

            First1Activity.this.startActivity(intent);

    }
    public class DisMess extends Activity{

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Intent intent = getIntent();
            String message = intent.getStringExtra(First1Activity.x);
            TextView textView = new TextView(this);
            textView.setTextSize(40);
            textView.setText(message);
            setContentView(textView);

        }

    } 
```

现在我得到类似:::::: 的错误

**应用程序已停止工作...**

我遇到错误：***First1Activity.this.startActivity(intent);***

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:43:08.527

在活动 1-

```
Intent i = new Intent(this, ActivityTwo.class);
i.putExtra("Value1", "This value one for ActivityTwo ");
i.putExtra("Value2", "This value two ActivityTwo");
 startActivity(i); 
```

在活动 2 中 - 在 onCreate 函数中

```
Bundle extras = getIntent().getExtras();

if (extras == null) {
        return;
        }
// Get data via the key
String value1 = extras.getString(Intent.EXTRA_TEXT);
if (value1 != null) {
    // Do something with the data
} 
```

=================

在你的代码中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:46:34.410

```
Intent intent=new Intent(First1Activity.this,DisMess.class);
EditText edittext = (EditText) findViewById(R.id.editText1);
String m= edittext.getText().toString();
intent.putExtra("x", m); 
```

和

```
Intent intent = getIntent();
String message = intent.getStringExtra("x"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:51:51.987

确保您已在清单中声明了 DisMess 活动。

我稍微修改了你的代码。

```
public class First1Activity extends Activity {

public final static String key= "com.example.my.p";
private Context context;

@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    context=First1Activity.this;

}
public void mess(View view) {

    EditText edittext = (EditText) findViewById(R.id.editText1);
    TextView t=(TextView)findViewById(R.id.textView1); 

    String m= edittext.getText().toString();       
    t.setText(m);   

    Intent intent=new Intent(context,DisMess.class); 
    intent.putExtra(x, m);
    startActivity(intent);
}

  public class DisMess extends Activity{

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Intent intent = getIntent();
            String message = intent.getStringExtra(First1Activity.x);
            TextView textView = new TextView(this);
            textView.setTextSize(40);
            textView.setText(message);
            setContentView(textView);

        }

    } 
```

# jsf - 数字转换器包装忽略语言环境？漏洞？

> ID：10828626
> 
> 赞同：1
> 
> 时间：2012-05-31T06:41:58.320
> 
> 标签：jsf, locale, converter

根据使用的 f:view 语言环境，第一个在点或逗号（总是点）之间进行选择是否是一个错误？或者是否有规则如何嵌套数字转换器。

**1.**

```
<f:converter converterId="javax.faces.BigDecimal">
    <f:convertNumber maxIntegerDigits="3" maxFractionDigits="2"/>
</f:converter> 
```

**2.**

```
<f:convertNumber maxIntegerDigits="3" maxFractionDigits="2">
    <f:converter converterId="javax.faces.BigDecimal"/>
</f:convertNumber> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:40:16.043

您不能嵌套转换器。它们只会按照`UIComponent`声明的顺序应用于最近的父级。您也不能指定多个转换器。只有最后一个会真正被使用。每个[`ValueHolder`](http://docs.oracle.com/javaee/6/api/javax/faces/component/ValueHolder.html)组件只能有一个转换器，而每个组件可以[`EditableValueHolder`](http://docs.oracle.com/javaee/6/api/javax/faces/component/EditableValueHolder.html)有多个验证器。

坚持下去`<f:convertNumber>`。当用于已经绑定到类型属性的输入组件时`BigDecimal`，它将尊重类型。

# php - 如何在没有任何画布或 gui 的情况下创建 facebook 应用程序

> ID：10828641
> 
> 赞同：0
> 
> 时间：2012-05-31T06:43:22.110
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql, facebook-apps

我想创建一个没有任何画布或 GUI 的简单 facebook 应用程序。我想访问应用程序用户的详细信息，发布到他们的墙上，访问他们的朋友个人资料等，没有他们的存在我的意思是随时访问他们的数据。我只知道 PHP . 我是 Facebook 应用程序的初学者。请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:00:45.407

没有任何 GUI 是不可能的。您将需要一种方法来提示用户：

1.  授权您的应用，或
2.  授权贴到墙上。

这些操作都通过 gui（网页、远程应用程序等）发生。不一定是网页，但必须是可以提示用户的东西 - 检查登录可用的 API。[http://developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)

一旦您克服了这些障碍，就可以使用令牌，尽管当令牌变得无效时，您需要再次提示用户授权（返回 gui - 您需要让他们访问/单击您的关联）。

# mysql - phpmyadmin (mysql) 中的列名计数

> ID：10828647
> 
> 赞同：3
> 
> 时间：2012-05-31T06:43:51.080
> 
> 标签：mysql, sql, phpmyadmin

这看起来很愚蠢，但我真的不知道这件事。今天，我需要获取 mysql 表中的属性数量（在 phpmyadmin 中）。我可以得到 phpmyadmin (mysql) 中列名的计数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T06:47:27.420

为此，您可以在 phpmyadmin 中编写 sql 查询。

```
SELECT count(*) 
FROM information_schema.columns 
WHERE table_name = '<table_name>' 
```

# objective-c - 如何禁用扩展 NSOutlineView 中元素的所有子树？

> ID：10828653
> 
> 赞同：1
> 
> 时间：2012-05-31T06:44:27.757
> 
> 标签：objective-c, cocoa, nsoutlineview

如您所知，如果您在 NSOutlineView 中单击展开元素的三角形，它会展开该元素的所有子树。但是，如果此子树包含太多元素（例如文件系统树），此操作的效果可能对您的应用程序来说是悲剧性的。问题是，如何禁用此选项单击功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:51:34.973

通过将此方法添加到大纲视图委托来解决。

```
- (BOOL)outlineView:(NSOutlineView *)outlineView shouldExpandItem:(id)item
{
    return ([[NSApp currentEvent] modifierFlags] & NSAlternateKeyMask) == 0;
} 
```

# css - Css居中而不影响每一边

> ID：10828654
> 
> 赞同：0
> 
> 时间：2012-05-31T06:44:28.083
> 
> 标签：css, twitter-bootstrap, ruby-on-rails-3.2

我有一个使用 Twitter Bootstrap 和 Rails 3.2 的简单导航栏

```
<header class="navbar navbar-fixed-top">
 <div class="navbar-inner">
 <div class="container">
  <%= link_to logo, root_path, :class=>"logo1" %>
  <nav>
  <ul class="nav pull-right">
   <% if signed_in? %>
    <li class="hova"><%= link_to "#" %></li>
    <li class="hova"><%= link_to "#" %></li>
    <li class="hova"><%= link_to "#" %></li>
    <li class="hova"><%= link_to "#" %></li>
    <li id="fat-menu" class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-user"></i><b class="caret"></b>
     </a> 
```

```
 </header> 
```

到目前为止，徽标位于居中工具栏的左侧，链接和下拉插入符号位于右侧，每侧没有间距。

我如何为两者添加一些填充/边距（将徽标向左移动约 5 像素，将右侧内容向右移动约 5 像素，因此我牺牲了中心空白而不是移动内容。

例如，

```
.navbar .container {
 width: 960px;
 margin-left:10px;
 } 
```

..适用于左侧。但是我怎么能同时为权利实现同样的目标呢？抱歉，不是前端设计师。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:05:43.457

将徽标放在一个跨度中

```
<span class="logo"><%= link_to logo, root_path, :class=>"logo1" %></span> 
```

然后使用 CSS 作为 -

```
.logo{
    margin: 0 0 0 -5px;
}

.dropdown{
    margin: 0 -5px 0 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:11:04.097

试试这个

```
<img src="logo.png" style="margin-left:-5px;" /> 
```

# javascript - 如何在单击按钮时为左右滚动添加动画效果？

> ID：10828656
> 
> 赞同：1
> 
> 时间：2012-05-31T06:44:33.217
> 
> 标签：javascript, jquery, html, css

我是 jQuery 新手，遇到了这个问题。在我的 document.ready 函数中，当我在链接上应用的点击事件发生时，.animate() 效果不起作用，因此它不会左右滚动。谁能告诉我这有什么问题，以便它左右滚动。

```
<html>
<head>
<style type="text/css">
ul.images 
{
  padding:0px;
  margin:0px;
  white-space: nowrap;
  width:auto;
  overflow:hidden;
}

ul.images li 
{
  line-height:200px;
  display: inline;

}

</style>

<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script language="javascript">
var totalWidth;
 $(document).ready(function(){
        $("a.abc").click(function() {
            $("#scroller").animate({"scrollLeft":"-=204"},"slow");
            return false;
        });
        $("a.def").click(function() {
            $("#scroller").animate({"scrollRight":"+=204"},"slow");
            return false;
        });
});

</script>

</head>
<body>
<div style="width:1450px">
    <div style="float:left;">
        <a class="abc" href="javascript: void(0);"  style="display:table-cell;height:155px;vertical-align:middle"><img src="backward.png" height="50" width="50"/></a>
    </div>

        <div style="width:1220px;float:left">
            <ul class="images" id="scroller">
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li> 
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li> 
                <li class="list"><img src="Tulips.jpg" class="image" alt="anuj"  width="200"/></li>
                <li class="list"><img src="Penguins.jpg" class="image" alt="anuj"  width="200"/></li>       
            </ul>
        </div>

    <div style="float:left;">
        <a class="def" href="javascript: void(0);"  style="display:table-cell;height:155px;vertical-align:middle;"><img src="forward.png" height="50" width="50"/></a>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:23:33.230

试试这个：

```
<div style="width:1050px">
<div style="float:left;">
    <a class="abc" href="javascript: void(0);"  style="display:table-cell;height:155px;vertical-align:middle">PREV</a>
</div>

    <div style="width:1220px;float:left">
        <ul class="images" id="scroller">
            <li class="list"><img src="http://placehold.it/350&text=TEST1" class="image" alt="anuj"  width="200"/></li>
            <li class="list"><img src="http://placehold.it/350&text=TEST2" class="image" alt="anuj"  width="200"/></li>
            <li class="list"><img src="http://placehold.it/350&text=TEST3" class="image" alt="anuj"  width="200"/></li>
            <li class="list"><img src="http://placehold.it/350&text=TEST4" class="image" alt="anuj"  width="200"/></li>     
        </ul>
    </div>

<div style="float:left;">
    <a class="def" href="javascript: void(0);"  style="display:table-cell;height:155px;vertical-align:middle;">NEXT</a>
</div> 
```

```
$("a.abc").click(function() {
    $(".images").each(function(){
        $(this).animate({"margin-left":"-=204px"},800)  
            });
});

$("a.def").click(function() {
            $(".images").each(function(){
                $(this).animate({"margin-left":"+=204px"},800)
            });
}); 
```

见：http: [//jsfiddle.net/MMyGE/](http://jsfiddle.net/MMyGE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:55:13.643

语法：.animate({'css property','value'},'speed')，如果你想向左设置动画，则为 .animate({'left','100px'},'800')在值之前添加一个（减号），否则它将动画到右边。另请注意，动画不支持所有 css 属性。

# android - 如何在 ListView 中标记视图？

> ID：10828657
> 
> 赞同：3
> 
> 时间：2012-05-31T06:44:43.437
> 
> 标签：android, listview, initialization

我有一个带有列表视图的应用程序。列表视图工作正常。当我希望列表以标记的某些行开头时，问题就开始了。如果我按下它，我可以标记一行。但是，似乎没有找到在初始化时标记任何行的方法。

这是我的代码：

```
listViewOfBluetooth = getListView();
setInitialEnabledDevices();
  listViewOfBluetooth.setOnItemClickListener(new OnItemClickListener() {

  public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
      String chosenBluetoothDevice = (String) ((TextView) view).getText();

      BluetoothEnableOrDisable(view, chosenBluetoothDevice);
      Toast.makeText(getApplicationContext(), chosenBluetoothDevice, Toast.LENGTH_SHORT).show();
      editor.putString("bluetooth_name_from_list1", chosenBluetoothDevice);
      editor.putBoolean("have_the_cars_bluetooth", true);
      editor.commit();
      Intent intent = new Intent(List.this, ParkOGuardActivity.class);
      startActivity(intent);
      }
  });
}

public static void setInitialEnabledDevices(){
    int length = listViewOfBluetooth.getChildCount();
    View view = null;
    String first = prefs.getString("bluetooth_name_from_list0", "");
    String second = prefs.getString("bluetooth_name_from_list1", "");
    String third = prefs.getString("bluetooth_name_from_list2", "");
    for(int i = 0; i < length; i++){
        view = listViewOfBluetooth.getChildAt(i);
        if(view.equals(first) || view.equals(second) || view.equals(third)) {
            view.setBackgroundColor(Color.GRAY);
        }
    }       
} 
```

我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T06:55:39.830

您可以通过使用自定义适配器来实现这一点。这是解决方法。

*   初始化您的自定义适配器
*   为标记的设备名称添加一些标志。
*   覆盖`getView()`& 检查标志。并相应地设置列表项的背景。

如果您不明白或面临任何复杂问题，请回复。

**更新：**

这是一个示例适配器。我没有编译代码。所以可能会有一些错误。

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Color;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class TestAdapter extends BaseAdapter
{
    ArrayList<String> deviceNames;
    ArrayList<Boolean> selected;
    Context context;

    public TestAdapter(Context context)
    {
        this.context = context;
        deviceNames = new ArrayList<String>();
        selected = new ArrayList<Boolean>();
    }

    public void addDeviceToList(String deviceName, boolean isSelected)
    {
        deviceNames.add(deviceName);
        selected.add(isSelected);
        notifyDataSetChanged();
    }

    public int getCount()
    {
        return deviceNames.size();
    }

    public Object getItem(int position)
    {
        return deviceNames.get(position);
    }

    public long getItemId(int position)
    {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent)
    {
        TextView tv = new TextView(context);
        tv.setText(deviceNames.get(position));
        if(selected.get(position) == true)
        {
            tv.setBackgroundColor(Color.parseColor("#ff0000"));
        }
        return tv;
    }
} 
```

现在创建适配器对象并将适配器设置为 listView。并通过调用`addDeviceToList()`方法添加单个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:04:19.343

这似乎很讨厌，但我认为你想在加载它之前修改 listview 中的视图

问题是，只要列表不向用户显示，您的列表就不会有子级。所以在向用户显示之前您可能不会修改视图

但是，如果您真的需要在如此低的级别上与视图进行通信，您可以尝试将滚动侦听器附加到您的列表中：

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
    for (int i = 0; i < visibleItemCount; i++) {
        View child = getChildAt(i);
        Now edit this view 

    }
} 
```

# facebook - 使用图形 api 返回的 Facebook 帖子 ID 和在 Facebook 上发布的 ID 不同

> ID：10828665
> 
> 赞同：1
> 
> 时间：2012-05-31T06:45:39.133
> 
> 标签：facebook, comments

我需要检索 Facebook 上特定帖子的评论，所以每当我使用下面提到的图形 api 在 facebook 上发布一些文本时。

$result = $facebook->api($fid.'/feed/','post',$attachment);

它在响应（$result）中返回帖子 ID。

当我登录 facebook 并将鼠标悬停在该帖子的“日期时间”上时，它会向我显示不同的帖子 ID，而不是在我的回复中返回的 ID，因此我无法获得该帖子 ID 的评论。

我使用下面的代码来获取评论。

$post_comments = $facebook->api('/'.$postid,array('access_token' =>'AAAAxxxxxx'));

任何帮助，将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:47:08.900

API 返回的 Post ID 的格式`{user_id}_{post_id}`与 facebook 显示的略有不同。但是，如果您将 替换为`_`，`/posts/`您将获得与 Facebook 提供的 URL 相同的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:50:17.073

几天前我自己也遇到了这种行为——用户使用了三个不同的应用程序，从而创建了三个单独的链接帖子。他们每个人的“x 分钟前”链接显示了不同的分钟数，但点击其中任何一个都会导致相同的帖子，这是第一个发布的帖子。

我怀疑这与所有三个帖子都是从同一个粉丝页面上的页面标签发布的（？）有关 - 但我看起来像一个错误，因为对于他的任何朋友来说，跟随“x分钟前”链接其他两个帖子之一肯定会被带到与实际点击的帖子不同的帖子详细信息页面有点混乱。

# objective-c - 如何更改 ViewDidLoad 中注释的标题？

> ID：10828666
> 
> 赞同：0
> 
> 时间：2012-05-31T06:45:42.010
> 
> 标签：objective-c, xcode, mkannotation

我有 mkannotation 的代码，但我不知道如何更改 ViewDidLoad 中的标题。

这是我的代码：

**位置视图.h**

```
...
@interface AddressAnnotation : NSObject<MKAnnotation> {
    CLLocationCoordinate2D coordinate;

    NSString *mTitle;
    NSString *mSubTitle;

}

@end

@interface LocationView : UIViewController<MKMapViewDelegate> {

    IBOutlet MKMapView *mapView;

    AddressAnnotation *addAnnotation;

}

@property (nonatomic, retain) Offers *offer;

@property (retain, nonatomic) IBOutlet MKMapView *mapView;

-(CLLocationCoordinate2D) addressLocation;

@end 
```

**位置视图.m**

```
#import "LocationView.h"

@implementation AddressAnnotation

@synthesize coordinate;

- (NSString *)subtitle{
    return @"Sub Title";
}
- (NSString *)title{
    return @"Title";
}

-(id)initWithCoordinate:(CLLocationCoordinate2D) c{
    coordinate=c;
    //NSLog(@"%f,%f",c.latitude,c.longitude);
    return self;
}

@end

@interface LocationView ()

@end

@implementation LocationView

@synthesize mapView, offer;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // I want in this method to change title

    MKCoordinateRegion region;
    MKCoordinateSpan span;
    span.latitudeDelta=0.2;
    span.longitudeDelta=0.2;

    CLLocationCoordinate2D location = [self addressLocation];
    region.span=span;
    region.center=location;

    if(addAnnotation != nil) {
        [mapView removeAnnotation:addAnnotation];
        addAnnotation = nil;
    }

    addAnnotation = [[AddressAnnotation alloc] initWithCoordinate:location];

    [mapView addAnnotation:addAnnotation];

    [mapView setRegion:region animated:TRUE];
    [mapView regionThatFits:region];

    //[mapView selectAnnotation:mLodgeAnnotation animated:YES];

}

- (void)viewDidUnload
{
    [super viewDidUnload];

}

//:(MKMapView *)mapView

-(CLLocationCoordinate2D) addressLocation {

    double latitude = 0.0;
    double longitude = 0.0;

    if(offer.lat > 0 && offer.lon > 0) {
        latitude = [offer.lat doubleValue];
        longitude = [offer.lon doubleValue];
    }

    CLLocationCoordinate2D location;
    location.latitude = latitude;
    location.longitude = longitude;

    return location;
}

- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation{
    MKPinAnnotationView *annView=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"currentloc"];

    annView.pinColor = MKPinAnnotationColorGreen;
    annView.animatesDrop=TRUE;
    annView.canShowCallout = YES;
    annView.calloutOffset = CGPointMake(-5, 5);

    return annView;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:41:32.113

Why dont you simply synthesize the properties of your AddressAnnotation class and use something like

```
addAnnotation.mTitle = yourNewString; 
```

Do I get your question wrong? This seems to be too obvious by far.

**Edit**

Of course, you have to give this back. For example like this:

```
- (NSString *)title{ return mTitle;} 
```

# encoding - Padrino - Sass，Coffee - Encoding::UndefinedConversionError，从 ASCII-8BIT 到 UTF-8

> ID：10828668
> 
> 赞同：2
> 
> 时间：2012-05-31T06:45:55.997
> 
> 标签：encoding, coffeescript, padrino

如何重现

**宝石文件**

```
gem 'haml'
gem 'sass'
gem 'coffee-script' 
```

**应用程序/app.rb**

```
get '/javascripts/rus_test.js' do
  content_type 'text/javascript', charset: 'utf-8'
  coffee :"../../public/javascripts/rus_test"
end 
```

**public/javascripts/rus_test.coffee（它的工作）**

```
alert 'Hello World!' 
```

**本地主机：3000/javascripts/rus_test.js**

```
(function() {

  alert('Hello World!');

}).call(this); 
```

**public/javascripts/rus_test.coffee（不起作用）**

```
alert 'Привет!' 
```

**给出错误**

/javascripts/rus_test.js "\xD0" 处的编码::UndefinedConversionError 从 ASCII-8BIT 到 UTF-8

我尝试在**config/boot.rb**中设置 Encoding.default 的几个变体。

**启动初始化的变体之一**

```
Padrino.before_load do
  Encoding.default_internal = nil
  # Encoding.default_external = 'ASCII-8BIT'
end 
```

它适用于带有俄语文本的 HAML，但**不适用于 SASS 和 COFFEE**

我应该怎么做才能修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:49:22.370

删除荒谬`Encoding.default_internal = nil`并将此代码添加到猴子补丁倾斜的某处：

```
# this makes tilt to treat templates as properly encoded (respect Encoding.default_external)
module Tilt
  class CoffeeScriptTemplate
    def prepare
      @data.force_encoding Encoding.default_external
      if !options.key?(:bare) and !options.key?(:no_wrap)
        options[:bare] = self.class.default_bare
      end
    end
  end
end 
```

# javascript - 如何创建一个简单的总价？

> ID：10828670
> 
> 赞同：1
> 
> 时间：2012-05-31T06:46:07.743
> 
> 标签：javascript, jquery, html

正如标题所说，我需要创建一个简单的总价格函数。我需要将人数乘以 1000 并在“totalPrice”中显示。任何 javascript/html/jquery 都很棒。到目前为止我有这个：

```
 <html>
 <body>
     <form id="buyTicket" method="post">
         <div>
             Booking Name : <input type="text" required id="bookingName" placeholder="booking name" /> 
         </div>
         <div>
             Number of persons : <input type="number" required id="numberOP" placeholder="number of persons"/> 
         </div>
         <div>
             Depature : <input type="text" required id="depature" class="datepicker" placeholder="enter depature date"/> 
         </div>
         <div>
             Return           :
             <input type="text" required id="return" class="datepicker" placeholder="enter return date"/> 
         </div>
         <div id="totalPrice">Total:</div>
         <div>
             <button type="submit" id="buttonTicket">Buy Ticket</button>
         </div>
     </form>
     <script type="text/javascript"> 
        function CalculateTotal() {
            var numberOP = document.getElementById('numberOP').value;
            var total = numberOP * 1000;                       
            document.getElementById('totalPrice').innerHTML = total;
        }
    </script>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:54:02.630

您需要调用您的函数来显示总价。将更改事件添加到您的输入以调用函数。

```
<div>Number of persons :<input type="number" required id="numberOP" onchange="CalculateTotal()" placeholder="number of persons"/></div> 
```

完整代码：

```
<html><body>
   <form id="buyTicket" method="post">
      <div>Booking Name      :<input type="text" required id="bookingName" placeholder="booking name" /></div>
      <div>Number of persons :<input type="number" required id="numberOP" onchange="CalculateTotal()" placeholder="number of persons"/></div>
      <div>Depature          :<input type="text" required id="depature" class="datepicker" placeholder="enter depature date"/></div>
      <div>Return            :<input type="text" required id="return" class="datepicker" placeholder="enter return date"/></div>
      <div id="totalPrice">Total:</div>
      <input type="hidden" id="total" /> <!-- BAD IDEA -->
      <div><button type="submit" id="buttonTicket">Buy Ticket</button></div>
   </form>

   <script type="text/javascript"> 
      function CalculateTotal() {
         var numberOP = document.getElementById('numberOP').value;
         var total = numberOP * 1000;                       
         document.getElementById('totalPrice').innerHTML = 'Total: ' + total;
         document.getElementById('total').value = total; //<--BAD IDEA
      }
   </script>
</body></html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:54:05.883

尝试 parseInt 获取数字而不是字符串。

```
function CalculateTotal()
{ 
       var numberOP =  parseInt("0" + document.getElementById('numberOP').value);
       var total = numberOP * 1000;                       
       document.getElementById('totalPrice').innerHTML = total;
}

//Call above method
CalculateTotal(); 
```

你可以在提交按钮上调用这个方法来检查它是否有效

```
 <button type="submit" id="buttonTicket" onclick="CalculateTotal();" >Buy Ticket</button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T07:03:20.727

我认为您不需要在您的情况下使用表单。您只想显示总价。试试这个：

```
<html>
<body>
     <div>
         Booking Name : <input type="text" required id="bookingName" placeholder="booking name" /> 
     </div>
     <div>
         Number of persons : <input type="number" required id="numberOP" placeholder="number of persons"/> 
     </div>
     <div>
         Depature : <input type="text" required id="depature" class="datepicker" placeholder="enter depature date"/> 
     </div>
     <div>
         Return           :
         <input type="text" required id="return" class="datepicker" placeholder="enter return date"/> 
     </div>
     <div id="totalPrice">Total:</div>
     <div>
         <button type="submit" id="buttonTicket" onlick="CalculateTotal();">Buy Ticket</button>
     </div>
 <script type="text/javascript"> 
    function CalculateTotal() {
        var numberOP = document.getElementById('numberOP').value;
        var total = numberOP * 1000;                       
        document.getElementById('totalPrice').innerHTML = total;
    }
</script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T07:08:13.027

Knockout.js 就是为这种情况而设计的，请参阅[Knockout 主页](http://knockoutjs.com/)

# python - python 3.2 apache httpd.conf 解析

> ID：10828671
> 
> 赞同：0
> 
> 时间：2012-05-31T06:46:08.320
> 
> 标签：python, apache, httpd.conf, python-3.2

我想知道是否有任何好的模块/库/教程/'我忘记的任何东西'来解析 httpd.conf。

具体来说：我需要能够从所述文件中提取标签中包含的几行。这可以在标签本身 ( `<VirtualHost hereissometext>`) 中或在标签本身之间。

任何和所有的帮助表示赞赏。

问候，

绍留斯

# java - Eclipse 控制台和 java stacktrace 颜色

> ID：10828673
> 
> 赞同：5
> 
> 时间：2012-05-31T06:46:09.430
> 
> 标签：java, eclipse

我知道我可以在控制台的 Eclipse 首选项中更改背景、标准输出和标准错误颜色。但是我的 java 错误的堆栈跟踪显示为红色（错误颜色）和蓝色的可点击链接。我在哪里改变那个蓝色？如果我将控制台背景更改为黑色，它几乎是不可见的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T06:53:28.183

你必须改变颜色`hyperlink`。

> Windows -> 首选项 -> 常规 -> 颜色和字体 -> 基本 -> 超链接文本颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:53:42.890

窗口->首选项

在左上角的搜索框中输入颜色。您在该搜索框下方获得的树中的第一个是您要单击的位置。改变`Hyperlink text color`和可能`Active hyperlink text color`（一般->外观->颜色和字体）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:59:06.500

*请查看下图描述如何在 Eclipse 中更改链接和错误的颜色：*

![在 Eclipse 控制台中更改背景、标准输出和标准错误颜色](../Images/d61a956f0e5b9f8126b91d8e60bb6911.png)

# javascript - 跨域 JavaScript 通信

> ID：10828676
> 
> 赞同：2
> 
> 时间：2012-05-31T06:46:33.400
> 
> 标签：javascript, jquery, json

这是一个情况。我的客户将拥有自己的网页。在那个页面上，他们可能有一个 iFrame，他们可以在其中显示位于我的服务器上的页面。在 iFrame 之外，它们将具有简单的按钮，单击时应在 iFrame 中执行 javascript 函数。

所以基本上客户域上客户网页的代码是这样的

```
<input type="button" value="Say Hi" id="TestButton">
<iframe src="myserver.com/some_html_page.htm" width="800" height="550"></iframe> 
```

和代码`myserver.com/some_html_page.htm`将是

```
$("#TestButton").click(function(){
  alert("Hi");
}); 
```

我做了我的研究，我知道浏览器安全问题，但我想知道有什么办法可以处理这个问题，可能是`json`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:38:26.927

正如您已经知道的那样（鉴于父级和子级位于不同的域中），您绝对无法从子级 iFrame 进入父级以侦听事件。

解决此问题的一种方法是在页面之间传递消息。这将要求您的客户在其页面中包含额外的 javascript 以及指向您的服务器的 iFrame。[这在带有postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)的本机 javascript 中得到支持，但包括 @Mark Price 建议的库将使您的生活更轻松。

所以这里有一个例子：

客户页面：

```
...
  <script type="text/javascript" src="jquery.min.js"></script>
  <script type="text/javascript" src="jquery.postMessage.min.js"></script>

  <script type="text/javascript">       
    $(document).ready(function () {
      $("#TestButton").click(function(){
        jQuery.postMessage("say_hi", "myserver.com/some_html_page.htm");
      });
    });
  </script>
</head> 

<input type="button" value="Say Hi" id="TestButton">
<iframe src="myserver.com/some_html_page.htm"></iframe> 
```

myserver.com/some_html_page.htm 上的代码：

```
...
  <script type="text/javascript" src="jquery.min.js"></script>
  <script type="text/javascript" src="jquery.postMessage.min.js"></script>

  <script type="text/javascript">
    // you will need to set this dynamically, perhaps by having your
    // clients pass it into the URL of the iFrame,
    // e.g. <iframe src="myserver.com/some_html_page.htm?source_url=..
    var source_origin = "clients_page.com/index.html"; 

    var messageHandler = function (data) {
      // process 'data' to decide what action to take...
      alert("Hi");
    };

    $.receiveMessage(messageHandler, source_origin);
  </script>
</head> 
```

将客户端代码捆绑到一个它们可以包含的库中可能会很好，这样您的客户端就不会为编写自己的 javascript 感到负担。

需要注意的是，我是在脑海中写下这段代码的，它很可能充满了错别字。我以前使用过这个库来完成类似的目标，我希望这个答案对你来说是一个有用的起点（以及[插件文档](http://benalman.com/code/projects/jquery-postmessage/docs/files/jquery-ba-postmessage-js.html)）。

如果我能澄清任何事情，请告诉我，祝你好运！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:26:10.633

您可以尝试 Ben Alman 的这个 jquery 插件，前提是您可以在您的服务器和您的客户端服务器上运行该插件 - 请参阅示例以了解跨域执行 js 的方法：

[http://benalman.com/code/projects/jquery-postmessage/docs/files/jquery-ba-postmessage-js.html](http://benalman.com/code/projects/jquery-postmessage/docs/files/jquery-ba-postmessage-js.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:32:12.350

`test()`让我们考虑一下，如果你有一个在 Iframe 下加载的名为的函数，那么你可以`test()`按如下方式访问该函数

```
document.getElementsByName("name of iframe")[0].contentWindow.functionName() 
```

例如

```
document.getElementsByName("iframe1")[0].contentWindow.test() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-31T06:50:54.397

执行跨域请求的常见模式之一是使用[JSONP](http://devlog.info/2010/03/10/cross-domain-ajax/)。

# php - mysql通过将固定位置的行与strlength()匹配来获取数据

> ID：10828679
> 
> 赞同：0
> 
> 时间：2012-05-31T06:46:49.720
> 
> 标签：php, mysql

我有一个表格，其中一个文件包含卷号，如下所示：

```
 id | roll_no
   --------------
   1  | 290320452
   2  | 290320453
   3  | 290340454
   4  | 290330455 
```

从上列中，我希望 roll_no 与位置 4 和 5 与 32 匹配。结果将是

```
 id | roll_no
   --------------
   1  | 290320452
   2  | 290320453 
```

现在我已经通过像这样过滤结果数组来完成：

```
 $subject_code = 32;    
    foreach($result as $row){
                    if($subject_code != NULL){
                        if(substr($row['roll_no'],3,2) == $subject_code){
                            $data[] = $row['roll_no'];
                        }
                    }
                    else{
                        $data[] = $row['roll_no'];
                    }
} 
```

在查询 mysql 查询时是否有更好的过滤方法。

我见过 mysql 的 SUBSTRING() 函数，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:50:06.247

```
select roll_no from your_table
where substring(cast(roll_no as char(11)), 4, 2) = '32' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:44:42.450

这个怎么样：
您可以使用`_ (underscore)`通配符来匹配确切的位置数。

```
select
 id, roll_no 
from
 roll_numbers_table
where
 roll_no like '___32%'; // 3 underscores before 32 
```

对您的样本数据的此声明将导致：

```
id | roll_no
--------------
1  | 290320452
2  | 290320453 
```

# visual-c++ - 二进制数据的 BSON

> ID：10828687
> 
> 赞同：0
> 
> 时间：2012-05-31T06:47:37.383
> 
> 标签：visual-c++, bson

如何将`char* buffer`具有二进制数据（从图像文件中读取）的文件转换为 BSON 格式。我正在vc++中尝试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:55:27.297

您应该能够使用[BsonObjBuilder 的 appendBinData 方法](http://api.mongodb.org/cplusplus/2.1.0/classmongo_1_1_b_s_o_n_obj_builder.html#a720696f5ac79c620fe15056786c96108)将其添加为二进制数据。

# php - 过去六个月的 PHP 列表

> ID：10828688
> 
> 赞同：4
> 
> 时间：2012-05-31T06:47:38.380
> 
> 标签：php

我需要前六个月的列表，并为此使用以下代码。

```
for ($i=6; $i >= 1; $i--) {
  array_push($months, date('M', strtotime('-'.$i.' Month')));
}

print_r($months); 
```

它给出错误的输出如下

```
Array
(
    [0] => 'Dec'
    [1] => 'Dec'
    [2] => 'Jan'
    [3] => 'Mar'
    [4] => 'Mar'
    [5] => 'May'
) 
```

一定是

```
Array
(
    [0] => 'Nov'
    [1] => 'Dec'
    [2] => 'Jan'
    [3] => 'Feb'
    [4] => 'Mar'
    [5] => 'Apr'
) 
```

我哪里错了。请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T07:06:10.537

您需要从当月的第一天开始计算。

```
$first  = strtotime('first day this month');
$months = array();

for ($i = 6; $i >= 1; $i--) {
  array_push($months, date('M', strtotime("-$i month", $first)));
}

print_r($months);

/*
Array
(
    [0] => Nov
    [1] => Dec
    [2] => Jan
    [3] => Feb
    [4] => Mar
    [5] => Apr
)

*/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T07:17:34.470

和往常一样，我发布了这样做的对象方式：

```
$startDate = new DateTime('first day of this month - 6 months');
$endDate   = new DateTime('last month');
$interval  = new DateInterval('P1M'); // P1M => 1 month per iteration

$datePeriod = new DatePeriod($startDate, $interval, $endDate);

foreach($datePeriod as $dt) {
  array_push($months, $dt->format('M'));
}

/* output:
Array
(
   [0] => Nov
   [1] => Dec
   [2] => Jan
   [3] => Feb
   [4] => Mar
   [5] => Apr
)
*/ 
```

有关详细信息，请参阅[DateTime](http://php.net/datetime)、[DateInterval](http://php.net/dateinterval)和[DatePeriod](http://php.net/dateperiod)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:52:56.450

使用这个：

```
date('M',strtotime('-'.$i.' Month', strtotime(date('Y-m-01')))) 
```

为什么：因为今天是 5 月 31 日，而不是每个月都有 31 天。实际上，这个（我的意思是 +/- 月）功能并不那么可靠。你能猜出这个的输出是什么吗：

```
print(date('Y-M-d',strtotime('+1 Month', strtotime(date('2012-01-30'))))."\n"); 
```

?

# python - 为测试机改进python代码的IO

> ID：10828689
> 
> 赞同：1
> 
> 时间：2012-05-31T06:47:40.703
> 
> 标签：python

我在[Codechef](http://www.codechef.com)做一些练习题。有一个称为[歧义排列](http://www.codechef.com/problems/PERMUT2/)的问题：

我对此的解决方案是：

```
while 1:
   cnt = int(raw_input())
   if cnt == 0:
      break
  vals = [int(u) for u in raw_input().split(' ')]
  valr = []
  for i in range(cnt):
    valr.append(vals.index(i+1)+1)
  if vals == valr:
    print 'ambiguous'
  else:
    print 'not ambiguous' 
```

当我在[Trypython.org](http://www.trypython.org)中检查它时，它按预期工作。但是当我在 Codechef 中提交解决方案时，它超时了。

我的问题是这个。代码有什么问题（/可以改进），还是有什么特定的方法来处理测试机器的 sysin 和输出？

[编辑] 接受的解决方案提供了一些很好的建议，我重新考虑了代码逻辑并相应地修改了代码。代码现在可以在一段时间内运行，尽管它因错误答案而失败（尽管无法在我的测试用例中复制错误答案）。感谢您的建议。

```
import sys
def ambigcheck(lis):
   amb = 'ambiguous'
   for i in range(1,len(lis)+1):
       if lis[lis[i-1]-1] != i:
          amb = 'not ambiguous'
          break
   return amb 
while 1:
   cnt = int(sys.stdin.readline())
   if cnt == 0:
       break
   vals = [int(u) for u in sys.stdin.readline().split(' ')]
   sys.stdout.write(ambigcheck(vals)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:05:03.990

不要使用`raw_input`. 使用`sys.stdin`: 作为迭代器，或者`read()`它一次。并使用`sys.stdout.write`而不是`print`. 尝试只使用一次：预先计算整个输出并在之后将其写入屏幕。

这将为您提供 Python 中最快的 I/O。

更多提示：

*   你不需要构造一个新的排列，你可以检查原始排列中的元素是否有正确的索引
*   你不需要做全面检查，如果至少一个元素没有正确的索引，排列不是模棱两可的
*   避免`.index()`方法，按索引检查，而不是按值检查
*   您可以通过仅读取奇数行来更有效地处理输入`itertools.islice`（您不需要 Python 中的项目数）

# asp.net-mvc - 上传图片并保存在asp.net mvc3中的数据库中

> ID：10828690
> 
> 赞同：1
> 
> 时间：2012-05-31T06:48:04.643
> 
> 标签：asp.net-mvc, asp.net-mvc-3, image, file-upload, image-uploading

我想添加上传图像并将其保存在我的数据库中的功能。我有一个表，其中一列是 Image 数据类型。我关注[了这个链接](http://forums.asp.net/t/1679447.aspx/1)和一些类似的链接，但它似乎不起作用。这是我尝试过的代码：

```
if (Request.Files.Count > 0 && Request.Files[0] != null)
{
    HttpPostedFileBase file = Request.Files[0];
    var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), file.FileName);
    file.SaveAs(path);
} 
```

但是文件没有保存在指定的文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:37:01.507

您必须确保在 HTML 表单`encType`中设置为。`multipart/form-data`

前任。

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, 
      new { enctype = "multipart/form-data" }))
{
    <input type="file" name="file" />
    <input type="submit" value="OK" />
} 
```

# perl - Perl - 处理具有非英文（日文）名称的文件

> ID：10828691
> 
> 赞同：-1
> 
> 时间：2012-05-31T06:48:15.193
> 
> 标签：perl, file

我正在尝试查找文件是否存在（使用 -e 选项）并从中读取（使用`@lines = <FILE>`），两者都不适用于包含（例如）日文字符的（文件或目录）名称。

我正在使用 ActivePerl 5.14.1 和 win7。这是我正在做的一个简短示例：

```
if(-e 'C:\\test\\本のテれキス\\本のテれキス.txt') {
    print "exist";
} else {
    print "ne";
} 
```

虽然文件存在我得到`ne`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:59:15.697

我建议您尝试使用当前目录中的文件，以防“\”无法按预期工作。

# c# - 设置为私有或没有私有关键字的属性。有什么区别？

> ID：10828697
> 
> 赞同：4
> 
> 时间：2012-05-31T06:48:34.843
> 
> 标签：c#, properties

我正在设置这样的类的属性

```
public string Name { get; set; } 
```

但我也可以这样设置属性

```
public string Name { get; private set; } 
```

我想知道这些之间的区别？他们有什么范围？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T06:49:12.597

这意味着您不能从类实例中设置此属性。只有同级别的成员才能设置它。因此，对于外人来说，这个财产就成了`read-only`财产。

```
class Foo
{
    public string Name1 { get; set; }

    public string Name2 { get; private set; }

    public string Name3 { get { return Name2; } set { Name2 = value; }
} 
```

然后

```
Foo f = new Foo();

f.Name1 = ""; // No Error

f.Name2 = ""; // Error.

f.Name3 = ""; // No Error 
```

`Name3`将设置值，`Name2`但`Name2`无法直接设置值。

> 他们有什么范围？

由于`Name1`和`Name3`属性是公共的，因此它们及其 get 和 set 方法在任何地方都可用。

`Name3`也是公共的，但它的集合是私有的，因此属性和 get 方法将在任何地方都可用。Set 方法范围仅限于类（`private`访问修饰符在定义它的实体内具有范围）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T06:50:30.117

对于`public string Name { get; private set; }` 使用私有集的情况，意味着该属性`ReadOnly`来自外部。当您拥有只读属性并且不想显式声明支持变量时，它很有用。

`public string Name { get; private set; }`它与以下内容相同：

```
private string _Name;
public string Name
{
    get { return _Name; }
    private set { _Name = value; }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T06:50:32.267

第一个将在您的班级之外提供`Set`和`Get`方法。第二个将有一个`Get`方法可以在您的班级之外使用，但该`Set`方法只能在您的班级中使用。这通常表示只读行为。

# c# - Rhino 使用 CompositionContainer 模拟异常

> ID：10828699
> 
> 赞同：0
> 
> 时间：2012-05-31T06:49:01.523
> 
> 标签：c#, .net-4.0, rhino-mocks

```
[TestFixture]
public class UnitListViewModelTests
{
    private CompositionContainer _container;
    private INHDataService _nhDataService;
    private INHUnitOfWork _nhUoW;

    [SetUp]
    [TestCase]
    public void create_container()
    {
        _container = MockRepository.GeneratePartialMock<CompositionContainer>();
        _nhDataService = MockRepository.GenerateMock<INHDataService>();
        _nhUoW = MockRepository.GenerateMock<INHUnitOfWork>();

        _container.Expect(x => x.GetExportedValue<INHDataService>()).IgnoreArguments().Return(_nhDataService);
    }
} 
```

此代码在 处引发异常`_container.Expect...`。

```
SetUp : System.InvalidOperationException : Previous method 'IEnumerator.MoveNext();' requires a return value or an exception to throw.
   at Rhino.Mocks.Impl.RecordMockState.AssertPreviousMethodIsClose()
   at Rhino.Mocks.Impl.RecordMockState.MethodCall(IInvocation invocation, MethodInfo method, Object[] args)
   at Rhino.Mocks.MockRepository.MethodCall(IInvocation invocation, Object proxy, MethodInfo method, Object[] args)
   at Rhino.Mocks.Impl.Invocation.Actions.RegularInvocation.PerformAgainst(IInvocation invocation)
   at Rhino.Mocks.Impl.RhinoInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Proxies.IEnumerator`1Proxy15c4de116cb145039cc424d2b9ced840.IDisposable.Dispose()
   at Microsoft.Internal.Collections.CollectionServices.GetCardinality[T](IEnumerable`1 source)
   at System.ComponentModel.Composition.ExportServices.CheckCardinality(ImportDefinition definition, IEnumerable`1 exports)
   at System.ComponentModel.Composition.Hosting.ExportProvider.TryGetExportsCore(ImportDefinition definition, AtomicComposition atomicComposition, IEnumerable`1& exports)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExports(ImportDefinition definition, AtomicComposition atomicComposition)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExportsCore(Type type, Type metadataViewType, String contractName, ImportCardinality cardinality)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExportedValueCore[T](String contractName, ImportCardinality cardinality)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExportedValue[T](String contractName)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExportedValue[T]()
   at MIB.Test.ViewModels.UnitListViewModelTests.<create_container>b__0(CompositionContainer x) in E:\Work\MIB\MIB.Test\ViewModels\UnitListViewModelTests.cs:line 29#0
   at Rhino.Mocks.RhinoMocksExtensions.Expect[T,R](T mock, Function`2 action)
   at MIB.Test.ViewModels.UnitListViewModelTests.create_container() in E:\Work\MIB\MIB.Test\ViewModels\UnitListViewModelTests.cs:line 29#1 
```

编辑：我也试过了，但它仍然抛出异常：

```
_container.Stub(x => x.GetExportedValue<INHDataService>()).IgnoreArguments().Return(_nhDataService); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:19:47.923

我猜该`CompositionContainer.GetExportedValue()`方法不是虚拟的。

# java - 在集群环境中同步文件系统中的文件

> ID：10828700
> 
> 赞同：1
> 
> 时间：2012-05-31T06:49:11.643
> 
> 标签：java, tomcat, websphere, weblogic, cluster-computing

我有一个基于 Java 的 CRUD 服务，它允许在文件系统上/从文件系统中创建、检索、更新和删除文件。该服务可以部署在集群环境中。

1.  是否有任何设计模式或解决方案可以帮助在集群中的节点之间同步这些文件？
2.  可以将文件夹配置为同步吗？
3.  一个节点上的用户是否有机会（例如在更新的情况下）不会获得更新的文件？

我对特定于 tomcat、websphere 或 weblogic 的解决方案很好。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:54:38.147

除非您特别想自己编写代码，否则为什么不使用像[NFS](http://en.wikipedia.org/wiki/Network_File_System_%28protocol%29)这样的分布式文件系统，或者，如果您想要基于 Java 的东西，可以使用[Hadoop 分布式文件系统 (HDFS)](http://hadoop.apache.org/hdfs/)。[更多信息可以在这里找到。](http://en.wikipedia.org/wiki/Distributed_file_system)

# google-maps-api-3 - 如何将方向功能添加到自定义 Google 地图

> ID：10828704
> 
> 赞同：0
> 
> 时间：2012-05-31T06:49:42.890
> 
> 标签：google-maps-api-3, maps, direction

我跟着这个家伙教程

[http://stiern.com/tutorials/adding-custom-google-maps-to-your-website/](http://stiern.com/tutorials/adding-custom-google-maps-to-your-website/)

本教程是关于向网站添加自定义谷歌地图。

一切正常，如您所见[http://olivegrove.com.gr/?page_id=7](http://olivegrove.com.gr/?page_id=7)

我真的很想在地图上有方向功能，因为它是在实际的谷歌地图上完成的。

有没有办法添加这个？

有没有人在互联网上的一个很好的教程呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:23:08.120

不*完全相同*，但具有强大的方向搜索功能；您可能想使用`DirectionsService`[^(dev-guide)](https://developers.google.com/maps/documentation/javascript/directions)。如果您刚开始使用 Google 地图，您还需要查看：

*   [API文档](https://developers.google.com/maps/documentation/javascript/reference)
*   [代码示例](https://developers.google.com/maps/documentation/javascript/examples/)
*   [实用程序库](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries)

# windows-phone-7 - Windows Phone 7 应用内购买

> ID：10828705
> 
> 赞同：0
> 
> 时间：2012-05-31T06:49:57.270
> 
> 标签：windows-phone-7, windows-phone

Windows Phone 7 在应用内购买方面的状态如何？开发人员可以访问吗？

另外还有PhoneGap 的插件可用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:06:20.743

如果您已经拥有处理卡支付的相关基础设施，您已经可以自己实施 - 事实上，必胜客确实有一个非常好的应用程序，可以通过电话订购和支付比萨饼（至少在英国市场） - 它是具有讽刺意味的是，他们的比萨饼的质量没有应用程序那么高......

# php - PHP 中的 system()、exec() 和 shell_exec() 有什么区别？

> ID：10828707
> 
> 赞同：67
> 
> 时间：2012-05-31T06:50:07.457
> 
> 标签：php, shell, system, exec, shell-exec

可以通过以下三个 PHP 函数运行外部命令

```
system();
exec();
shell_exec(); 
```

但它们有什么区别？尽管它们有特定的应用，但在大多数情况下，它们都可以同样使用。我很想知道当它们可以同等使用时哪个是首选。例如，对于解压缩文件或压缩文件夹（使用 tar 命令），哪个是首选（可能从性能角度来看）？

**更新：**在另一个问题中，我发现了一个非常有用的**[链接](http://web.archive.org/web/20130809032648/http://chipmunkninja.com/Program-Execution-in-PHP%3A-exec-m@)**，描述了这些功能的不同方面。我在这里分享链接，因为其他人可能会使用它来更好地了解安全问题和其他方面。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-31T06:55:18.463

[exec](http://php.net/manual/en/function.exec.php) — 执行外部程序

[system](http://php.net/system) — 执行外部程序并显示输出

[shell_exec](http://php.net/shell_exec) — 通过 shell 执行命令并将完整的输出作为字符串返回

所以如果你不需要输出，我会选择 exec。

更多细节：

*   [http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)
*   [http://php.net/manual/en/function.system.php](http://php.net/manual/en/function.system.php)
*   [http://php.net/shell_exec](http://php.net/shell_exec)

# php - 如何在cakephp中获取表单输入的值

> ID：10828709
> 
> 赞同：3
> 
> 时间：2012-05-31T06:50:23.203
> 
> 标签：php, validation, cakephp

我有：

```
echo $this->Form->input('username', array('label' => 'Username: ')); 
```

相当于传统的php编码..

我怎样才能得到在那个文本框中输入的值，就像你做 $val = $_POST['username']; 在传统的 php 编码中。

我需要这个来进行登录验证。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T06:54:05.470

你可以的

```
$val = $this->data['ModelName']['username']; //CakePHP 1.X.X

//or

$this->request->data['ModelName']['username']); //CakePHP 2.X.X 
```

其中“ModelName”是您当前分配的要形成的模型。

更新：

```
$user = $this->Account->find('first', array(
   'conditions' => array(
      'username' => 'user1'
   )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-07T21:19:47.137

从 CakePHP 4.x 开始，您应该使用

```
$this->request->getData() 
```

例如

```
$title = $this->request->getData('title'); 
```

如果数据是嵌套的（即指定模型），请使用点表示法

```
$userName = $this->request->getData('user.name'); 
```

# c++ - 在 Windows 中停止线程

> ID：10828710
> 
> 赞同：-6
> 
> 时间：2012-05-31T06:50:28.560
> 
> 标签：c++, c, windows, multithreading, winapi

我使用 C 在 Windows 中创建了一个线程：

```
hookThreadHandle = CreateThread(NULL, 0, lpStartAddress, NULL, 0, &hookThreadId); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:51:13.703

使用[`TerminateThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686717%28v=vs.85%29.aspx)功能。

您发布的功能是：

```
 PostThreadMessage(hookThreadId, WM_QUIT, (WPARAM) NULL, (LPARAM) NULL);
  WaitForSingleObject(hookThreadHandle, 5000); 
```

所以它向那个线程发送一个退出消息，然后等待它关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:41:57.017

如果你想关闭线程，你可以使用**TerminateThread()**如果你只想暂停它，你可以使用**SuspendThread()**（恢复它使用**ResumeThread()**）

# javascript - 想要在客户端单击时使用 javascript 更改 ImageButton 的图像 src

> ID：10828716
> 
> 赞同：4
> 
> 时间：2012-05-31T06:50:37.463
> 
> 标签：javascript, asp.net

我首先尝试了这个，但它不起作用：

```
<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="minus.gif" OnClientClick="this.src='plus.gif';"/> 
```

另一种方法：

```
<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="minus.gif" OnClientClick=" return changeImg(this)"/>    

 function changeImg(cnt)
    {
    if(cnt.src='minus.gif')
    {
    cnt.src='plus.gif';
    }
    else
    {
    if(cnt.src='plus.gif')
    {
    cnt.src='minus.gif';
    }
    }
    return false;
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:26:17.230

这里的问题是，在客户端单击时您不会返回 false，而是在后面的代码上触发 onlick。只**返回false；**避免回邮，你会得到你所尝试的。

`<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="minus.gif" OnClientClick="this.src='plus.gif';return false;"/>`

## 更新

在您键入的代码上 `if(cnt.src='plus.gif')`，但您必须键入`==`，而不是`=`

为了避免这种类型的错误，最好先放置 const，例如 type

`if('plus.gif' == cnt.src)`

和最终代码

```
function changeImg(cnt)
    {
      if(endsWith(cnt.src, 'minus.gif'))
      {
        cnt.src='plus.gif';
      }
      else if(endsWith(cnt.src, 'plus.gif'))
      {
         cnt.src='minus.gif';
      }          
      // to avoid post back return false
      return false;
    }

function endsWith(str, suffix) {
   return str.indexOf(suffix, str.length - suffix.length) !== -1;
} 
```

相对：[JavaScript 中的 endWith](https://stackoverflow.com/questions/280634/endswith-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:28:12.687

以下应该工作

```
<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="minus.gif"  onClick="function(){this.setAttribute("src", 'plus.gif');}"/> 
```

# c# - 如何使用架构为字符串格式的架构验证 xml 文件

> ID：10828720
> 
> 赞同：1
> 
> 时间：2012-05-31T06:50:56.800
> 
> 标签：c#, xml

我需要验证一个`XML`文件，`XSD Schema`并且代码工作正常。但目前，模式以字符串格式存储在数据库中，验证代码如下所示，不起作用

```
 XmlReaderSettings settings = new XmlReaderSettings();
 settings.Schemas.Add(null,"SchemaURL"); 
```

请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:23:40.470

试试这个：

```
StringReader stringReader = new StringReader("XmlSchema"); 
XmlSchema xmlSchema;
xmlSchema = XmlSchema.Read(stringReader, null);
settings.Schemas.Add(xmlSchema); 
```

# android - Android 列表视图图像不适合屏幕宽度

> ID：10828722
> 
> 赞同：1
> 
> 时间：2012-05-31T06:51:09.650
> 
> 标签：android, listview, android-layout, imageview

我有这个列表视图，其中的图像视图不适合屏幕宽度，即使位图的大小大于屏幕大小。这是我得到的结果：

（由于垃圾邮件政策，我不能在这里发布我的截图。请点击下面的链接查看截图。） [http://www.sundancepost.com/ivue/screen/screen1.jpg](http://www.sundancepost.com/ivue/screen/screen1.jpg)

如上面屏幕中的红色框所示，列表不适合屏幕的宽度。

以下是我想要的结果：

[http://www.sundancepost.com/ivue/screen/screen2.jpg](http://www.sundancepost.com/ivue/screen/screen2.jpg)

这是我的布局代码。

features_listrow.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:orientation="vertical">    

<ImageView
   android:id="@+id/banner"        
   android:layout_width="fill_parent"       
   android:layout_height="wrap_content"
   android:adjustViewBounds="true"
   android:src="@drawable/ampersand_banner"/>

</RelativeLayout> 
```

精选列表：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:smoothScrollbar="true" 
    >

</ListView>

</LinearLayout> 
```

我相信我已经为两个布局文件正确设置了 layout_width 和 layout_height。我认为这与运行时的**android:adjustViewBounds**设置有关。有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:47:34.140

我终于发现了问题所在。图像的缩放发生在[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/中的](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)**ImageLoader.class**中

所以，当我注释掉代码的缩放部分时，一切都恢复正常了。

这是代码：

```
private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
       // final int REQUIRED_SIZE=100;
       // int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
      //while(true){
        //if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
        //break;
        //width_tmp/=2;
        //height_tmp/=2;
        //scale*=2;
       //}

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-04T07:58:05.577

您可以使用在图像视图中设置图像

1)`android:scaleType="fitXY"`

或者

2)`android:scaleType="centerCrop"`

在您的图像视图中使用任何一种。它给了我想要的完美结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:21:30.233

我认为唯一可以帮助的就是使用其他程序调整图像大小。问题是图像不能仅在水平或垂直边上以编程方式裁剪，在 xml 或代码中设置图像大小时它总是这样做。

# android - Android - 下载 APK 文件并将其保存在手机存储中（不在 SD 卡中）

> ID：10828723
> 
> 赞同：0
> 
> 时间：2012-05-31T06:51:13.627
> 
> 标签：android

我试图**从我的服务器下载一个 APK 文件并将其保存在 Phone Storage**中。

以下是我使用的代码：

```
 String apkLink = "http://10.1.20.53/files/test.apk";
            URL url = new URL(apkLink);
            HttpURLConnection c = (HttpURLConnection) url.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            context.getDir("test.apk", Context.MODE_WORLD_WRITEABLE);
            FileOutputStream fos = context.openFileOutput("app_test.apk", Context.MODE_WORLD_WRITEABLE);

            InputStream is = c.getInputStream();
            fileSize = c.getContentLength();
            byte[] buffer1 = new byte[1024];
            int len1 = 0;
            int total = 0;
            while ((len1 = is.read(buffer1)) != -1) {
                total += len1;
                percentage = (int)(total*100/fileSize);
                publishProgress();
                fos.write(buffer1, 0, len1);
            }
            fos.close();
            is.close(); 
```

相同的代码适用于 XML 文件。（当我将 XML 文件下载到手机内存时）。

有人可以帮我弄这个吗？

谢谢

* * *

其实我已经知道原因了

context.getDir("test.apk", Context.MODE_WORLD_WRITEABLE); 代码行创建一个名为“data/data/package_name/app_test.apk”的目录

但是 FileOutputStream fos = context.openFileOutput("app_test.apk"); 创建一个名为 data/data/package_name/files/app_test.apk 的目录

我试图从 data/data/package_name/app_test.apk 目录中读取文件。

不管怎样，现在我要用这段代码执行这个文件，

```
File f = new File(getFilesDir()+ "/app_test.apk");

intent.setDataAndType(Uri.fromFile(f) , "application/vnd.android.package-archive");
startActivity(intent); 
```

但它给了我一个解析错误信息。

任何人都可以想到一个解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:21:33.720

创建文件时尝试使用 Context.MODE_WORLD_READABLE|Context.MODE_WORLD_WRITEABLE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:43:10.743

我在[这里](https://stackoverflow.com/questions/8615338/installing-apk-programmattically-without-defining-the-apk-name/8615751#8615751)回答了类似的问题。考虑到您的问题，我有几个不同的意见，为什么它不起作用。

1.  您的应用程序将 apk 下载到其私有文件夹中，并且 PackageManager 可能没有读取此文件夹的权限。尝试将应用程序下载到 sdcard 上并运行它。
2.  也许您的 .apk 文件没有正确签名。您是否使用生成的签名对其进行了签名，或者使用默认测试签名导出文件？
3.  如果您在真实设备上进行测试，请检查是否可以从其他来源安装文件（不仅来自 Google Play 市场）
4.  我不记得确切但可能调用 PackageManager 来安装需要权限的应用程序。

# javascript - null 和 undefined 的构造函数

> ID：10828725
> 
> 赞同：3
> 
> 时间：2012-05-31T06:51:17.260
> 
> 标签：javascript

在五种基本 JavaScript 数据类型（`string`、`number`、和）中`boolean`，前三种具有关联的构造函数：`null``undefined`

```
new String("Hello!")
new Number(40)
new Boolean(true) 
```

构造的对象是对象字面量的包装器。特别是，`new String("Hello!") === "Hello!"`评估为`false`。

是否有类似的构造函数用于生成与相应对象字面量不同的对象包装器的`null`原始`undefined`数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:53:39.153

不，没有，考虑到它们所代表的“价值”是没有意义的。

忽略 typeof null === 'object'

[根据 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String)：

```
JavaScript automatically converts primitives and String objects, so that it's
possible to use String object methods for primitive strings. 
```

如果您调用影响原语的方法，如`charAt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:55:26.873

原始类型没有构造函数。string、number 和 boolean 具有包装原始类型的对象包装器。这就是为什么js中的字符串对象与您所说的“”不同的原因。null 和 undefined 原始类型没有关联的 Object 构造函数。

# jquery - 请求标头在 IE 中不可用

> ID：10828728
> 
> 赞同：1
> 
> 时间：2012-05-31T06:51:32.430
> 
> 标签：jquery, ajax, asp.net-mvc

我正在使用一个通过 Ajax 上传图像的插件。这个插件的js源码在[这里](https://github.com/valums/file-uploader/blob/master/client/fileuploader.js)。

如果您看到从 1200 开始的行，您会注意到：

```
// build query string
    params = params || {};
    params['qqfile'] = name;
    var queryString = qq.obj2url(params, this._options.action);

    xhr.open("POST", queryString, true);
    xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    xhr.setRequestHeader("X-File-Name", encodeURIComponent(name));
    xhr.setRequestHeader("Content-Type", "application/octet-stream");
    xhr.send(file); 
```

所以基本上，上传的文件名可以作为`qqfile`参数或作为 Header var: 使用`X-File-Name`。使用此 ASP.NET MVC 代码，这两种方法都可以在 FF/Chrome 中完美运行：

```
public JsonResult AjaxUpload(String qqfile)
    {

        String fileName = System.Web.HttpContext.Current.Request.Headers["x-file-name"];
        //rest of the code
    } 
```

但是在 IE 中，这些都不起作用...Header var 为 null（在 Debug 中我清楚地看到此参数未发送）并且`1qqfile`始终为`"System.Web.HttpPostedFileWrapper"`.

有人知道如何为 IE 解决这个问题吗？

Ps：这个插件的Demo在[这里](http://valums.com/ajax-upload/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T08:46:11.940

我终于能够做到这一点：

```
 public JsonResult AjaxUpload(HttpPostedFileWrapper qqfile)
    {
        //IE
        if (qqfile != null)
        {
            fileName = qqfile.FileName;
        }
        else
        {
            fileName = System.Web.HttpContext.Current.Request.Headers["x-file-name"];
        }
  //rest of the code
  } 
```

似乎在 IE`HttpPostedFileWrapper`中包含 fileName 和其他属性（而在其他浏览器中是`null`），很奇怪我必须为 IE 做一个特殊情况。

# wcf - WCF路由和单连接的使用

> ID：10828731
> 
> 赞同：1
> 
> 时间：2012-05-31T06:51:49.093
> 
> 标签：wcf, wcf-routing

我正在玩 WCF 路由。它从一开始就工作正常......但有一个问题我无法通过。在我的操场上，我有路由服务和其他 4 个 WCF 服务，它们实现了 2 个不同的合同。正如我所说，它工作正常......但是当从客户端从单线程访问两个合同时，我必须建立 2 个不同的连接。使用 ChannelFactory<> 访问合约。我试图通过 WCF 通道堆栈来了解如何实现自己的绑定/通道，但未能实现单连接的目标。

可以选择将接口生成为两个接口的总和，但该解决方案应该在许多（30-40）个独立合约的环境中工作。使我无法应用这个简单解决方案的复杂因素是，根据“松散耦合”规则，所有这 30-40 个独立合约都是独立存在的。

有没有办法以允许我们通过单个 WCF 路由服务路由许多合同并使用单个连接（每个线程的连接池/连接池）从客户端访问它们的方式构建通道堆栈。?

亲切的问候

莱谢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:40:23.470

没有“工具包”方法可以做到这一点，但您可以在客户端结合两个合同，确保保留操作，然后在路由服务中按操作路由到正确的下游服务

# javascript - 检查给定的开始日期和结束日期时间之间是否已经有预订

> ID：10828738
> 
> 赞同：-1
> 
> 时间：2012-05-31T06:52:30.837
> 
> 标签：javascript, mysql, html, sql

我正在使用 jquery mobile 构建一个移动网络应用程序。我想预订。所以用户进入一个房间，一个开始日期时间和一个结束日期时间。然后它转到查询数据库的 web 服务功能。

它将检查用户输入的开始日期时间和结束日期时间之间是否已经有预订。如果有，它会把它们放在一个列表中。

现在在我的 javascript 中，我将使用 ajax 调用来调用此函数。这里我要检查这个列表中是否有东西 --> 房间不可用，否则 --> 房间可用。

但是我的查询有问题。你能帮我弄清楚吗？

```
SELECT * FROM ARTICLES_RESERVERING res
INNER JOIN ARTICLES_ZAAL roo ON res.ZAALID = roo.ID WHERE roo.ID = @ZAALID 
AND (res.DATUM_BEGIN >= @DATUM_EINDE OR res.DATUM_EINDE <= @DATUM_BEGIN) 
```

有人可以帮忙吗？

亲切的问候。

史蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:57:55.200

重叠事件的一般算法是：

```
if ((eventA.startTime <= eventB.startTime && eventA.endTime > eventB.startTime) ||
    (eventA.startTime < eventB.endTime && eventA.endTime > eventB.startTime)) 
{
    // events overlap
} 
```

### 编辑

更改了第二行的最后一部分以涵盖 eventA 在 eventB 期间的情况。请注意，事件开始和结束必须按正确的时间顺序排列。

# java - 将类类型存储在 bean 中

> ID：10828747
> 
> 赞同：1
> 
> 时间：2012-05-31T06:53:11.427
> 
> 标签：java, generics

我有一个 ThreadPool 类，它有一个方法 add ，它需要 a`Runnable`和若干毫秒作为调度任务：

```
public static void addScheduler(Runnable r, long millis) {
 //scheduling code
 //now I want to save it to check later
 ScheduledTask st = new ScheduledTask();
 st.setTaskType(r.getClass());
 st.setFrequency(millis);
 persistentes.add(st); //this is an ArrayList<ScheduledTask>
} 
```

现在我想将任务信息存储到一个ArrayList中以供以后检查，但是当我保存任务信息并检查taskType时，它始终是java.lang.Class。我知道这是因为 java 类型擦除，但是有没有办法存储类的类型？

这是我的 ScheduledTask 类：

```
public class ScheduledTask {

    private Class<?> taskType;
    private long frequency;

    public Class<?> getTaskType() {
        return taskType;
    }

    public void setTaskType(Class<?> taskType) {
        this.taskType = taskType;
    }

    public long getFrequency() {
        return frequency;
    }

    public void setFrequency(long frequency) {
        this.frequency = frequency;
    }

    public String toString(){
        return taskType.getClass().getName()+ ": " + (frequency / 1000) + " seg.";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:04:41.477

我相信你的错误是你调用`getClass()`了太多次：

```
public String toString(){
    return taskType.getClass().getName() + ": " + (frequency / 1000) + " seg.";
} 
```

`taskType`是您要查找的类（例如`MyTask`）。它的（原始）类型以及对 is 的多余调用返回的`getClass()`内容`java.lang.Class`。

```
public String toString(){
    return taskType.getName() + ": " + (frequency / 1000) + " seg.";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T07:00:04.213

您可以使用 newInstance() 创建新实例并检查类型（使用 instanceof 运算符）。您还可以使用 getName() 获取类的名称并使用字符串比较

# jquery - JS函数在for循环内的for循环后中断

> ID：10828751
> 
> 赞同：0
> 
> 时间：2012-05-31T06:53:38.110
> 
> 标签：jquery, json, clone

此脚本的目的是动态创建元素的克隆，然后使用 JS 对象中包含的数据填充这些克隆。我的目标是从服务器返回解析后的 JSON，并调用此函数来克隆 DOM 中的元素，并使用来自服务器的数据填充这些克隆。我想要这样做的原因是完全消除了从显式编写的 JS 字符串中动态创建 html 元素，例如：

```
var HTMLelementAsJSstring = "<article></article>"; 
```

我希望通过读取包含元素与解析的 JSON（作为 JS 对象）属性的关系的对象（eTreeObj）来动态创建这些元素。

这是我的 JS（使用 jQuery）

```
var jso = {
"Result": [
    {
        "Title": "HQWE",
        "Details": "sdfsdf"
    },
    {
        "Title": "WQasdaE",
        "Details": "asdadas"
    }
    ]
};

function dynECreatefromJSO(Oproperty, parentE, childE, eTree) {
    for (i = 0; i <= Oproperty.length; i++) {

        if (i != 0) {
            var TargetE = Eclone.appendTo(parentE);
        } else {
            var TargetE = $(childE),
                Eclone = TargetE.clone();
        }

        for (q = 0; q <= eTree.length; q++) {
            TargetE.children(eTree[q].Element).html(Oproperty[i][eTree[q].JSOproperty]);
        }
        alert("DOESN'T REACH HERE");

    }
}

var eTreeObj = [ {
        "Element": "header",
        "JSOproperty": "Title"
        }, 
        {
        "Element": "article",
        "JSOproperty": "Details"
        }
    ];

dynECreatefromJSO(jso.Result, "div#main", "section.thiselement", eTreeObj);​ 
```

还有我的 HTML：

```
<div id="main"></div>

<section class="thiselement">
    <header></header>
    <article></article>
</section>​ 
```

当我访问 for 循环内的 eTree 对象中的属性时，我遇到的问题发生了，其中我的递增变量是“q”。该函数中断，并且无法再次使用递增变量“i”运行循环。

如果我删除此 for 循环中的操作，一切正常。我无法弄清楚为什么会这样：

**http://jsfiddle.net/KKv22/2/**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:59:37.213

You have to change your loop like this,

```
for (i = 0; i < Oproperty.length; i++) {

    if (i != 0) {
        var TargetE = Eclone.appendTo(parentE);
    } else {
        var TargetE = $(childE),
            Eclone = TargetE.clone();
    }

    for (q = 0; q < eTree.length; q++) {
        TargetE.children(eTree[q].Element).html(Oproperty[i][eTree[q].JSOproperty]);
    }
    alert("DOESN'T REACH HERE");

} 
```

This is because array index starts with 0(zero) So, it will contain items only upto length-1 index.

# maven - 如何将战争中的资源包含到另一个 Maven 项目中

> ID：10828754
> 
> 赞同：1
> 
> 时间：2012-05-31T06:53:52.597
> 
> 标签：maven, maven-2, dependency-management, maven-dependency-plugin

我有一个 maven 项目，它需要从另一个打包为 war 的 maven 项目中复制 webapp/WEB-INF/ 资源。我该怎么做 ？请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:13:08.383

正如 Bittrance 所说，您应该使用 maven 依赖插件。

更好的方法是创建包含所有共享资源的项目，可能是 zip 类型，它是使用程序集插件构建的。这是好的“行家之道”。这是一个比解开战争更好的解决方案。

然后参考一下

```
 <dependency>
        <groupId>com.mygroup/groupId>
        <artifactId>my-dependencies</artifactId>
        <version>1.0.0</version>
        <type>zip</type>
    </dependency> 
```

接下来，您使用 maven 依赖插件解压您的资源，在您选择的目录中（可能是 WEB-INF/ ？）

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
       <execution>
           <id>unpack-cfg-test-resources</id>
           <goals>
                <goal>unpack-dependencies</goal>
           </goals>
           <phase>resources</phase>
              <configuration>
                <outputDirectory>${project.build.directory}/WEB-INF/</outputDirectory>
                                <includeArtifacIds>my-resources</includeArtifacIds>
                <excludeTypes>pom</excludeTypes>
                <excludeTransitive>true</excludeTransitive>
            </configuration>
        </execution>
     </executions>
 </plugin> 
```

我不太确定这个代码片段（为其他目的而编写），但这是一个示例。欲了解更多信息，请点击此链接：[http ://maven.apache.org/plugins/maven-dependency-plugin/](http://maven.apache.org/plugins/maven-dependency-plugin/)

如果您无法共享包含文件的公共项目，则可以解压缩仅包含 ftl（或任何您想要的）的战争，但这不是一个真正干净的解决方案；）

有很多关于这个主题的帖子： [Unzip dependency in maven](https://stackoverflow.com/questions/5388661/unzip-dependency-in-maven) ...只需尝试使用关键字 maven-dependency-plugin, unpack :)

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:05:54.037

我可以看到一些替代方案：

1.  在您的版本控制系统中使用外部引用将所有存储库指向相同的文件。
2.  Maven 依赖模块可以复制和解压项目依赖。从那里，您可以使用 Maven 程序集插件（或 Ant 目标）在您自己的安装中包含该依赖项的一部分。
3.  至少对于 FTL 文件，也许您可​​以将它们打包到单独的 Jar 文件中，然后通过类加载器将它们作为资源加载。

如果资源被过滤，如果你想要过滤版本，你可能会遇到解决方案 1 的问题，如果你想要源版本，则可能会遇到问题 2、3。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T08:11:14.207

（这假设您的依赖项目是 java (jar) 而不是另一个 Web 应用程序，如果它是一个 Web 应用程序，我认为解决方案是相似的）。

我建议一种（稍微）不同的方法：
不要从战争中读取资源，而是将其添加到您的战争 pom 中，以在工件和战争中生成一个 jar：

```
<!-- maven war plugin config -->
<plugin>
<groupId>org.apache.maven.plugins</groupId>
    <configuration>
        ...
        <attachClasses>true</attachClasses>
        <classesClassifier>some-string</classesClassifier>
    </configuration>
    <artifactId>maven-war-plugin</artifactId>
    <version>3.0.0</version>
</plugin>
...
<resources>
<!-- This is for inclusion in the jar, so dependent module can load it -->
    <resource>
        <targetPath>some-path</targetPath>
        <directory>src/main/webapp/path...</directory>
        <includes>
            <include>your-resource</include>
        </includes>
    </resource>
</resources> 
```

这对你的消费 pom，所以生成的 jar 将被加载：

```
<dependency>
    <groupId>com.company</groupId>
    <artifactId>...</artifactId>
    <classifier>some-string</classifier>
</dependency> 
```

然后您将能够以通常的方式加载资源 ( `getResourceAsStream("some-path/your-resource")`)

# iphone - 本地通知

> ID：10828755
> 
> 赞同：0
> 
> 时间：2012-05-31T06:53:57.337
> 
> 标签：iphone, uilocalnotification

我是 iPhone 应用程序的新手。

我必须使用本地通知在我的应用程序中设置假来电。

那么任何人都可以建议我将本地通知集成到我的应用程序中的步骤。

如果有可用的链接或带有解释的源代码，请为此建议我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:07:57.423

您可以在此处找到本地通知的文档

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW13](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW13)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:02:09.230

这是将本地通知集成到您的应用程序中的一个很好的教程[http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-local-notifications/](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-local-notifications/)

# salesforce - salesforce.com 公式：如何检查记录是否是新的

> ID：10828761
> 
> 赞同：2
> 
> 时间：2012-05-31T06:54:16.483
> 
> 标签：salesforce, apex-code

我必须计算我的新记录的协议值。假设协议值是ending_days - begining_days。我已将此公式放入我的对象中。

IF（开始*_ c <> 结束*_c，结束_ *c-开始*_c，0）。

我有两个与此相关的问题

1：协议值是多少？，我假设我假设的内容是正确的还是有其他特定的含义？

2：我只需要为新记录创建协议值。那么，我是否应该在我的 IF 条件中处理这个事实例如：我的 IF 代码是否应该看起来像这样

IF (AND(//以某种方式检查记录是否是新的,Beginning_ *c <> Ending* _c),Ending_ *c-Beginning* _c,0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:57:19.670

首先，如果`Beginning__c == Ending__c`then`Ending__c-Beginning__c`已经是 0，那么您的公式根本不需要 IF。

其次，公式每次在 SOQL 中引用时都会被评估，如果您想要一次性计算，您应该使用`before insert`触发器或工作流并将结果存储在常规字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:25:59.503

回答您问题的第 2 部分。在您的公式中使用函数 ISNEW()。所以你的完整公式是：

```
IF (AND(ISNEW(),Beginning_c <> Ending_c),Ending_c-Beginning_c,0) 
```

# objective-c - 没有位置服务的 iOS 后台轮询

> ID：10828762
> 
> 赞同：5
> 
> 时间：2012-05-31T06:54:25.500
> 
> 标签：objective-c, background, location, voip

这是一个我们都想知道很多次的问题，似乎没有人有一个好的答案。

像 DataMan 这样的应用程序如何在后台定期、无限期地运行，并且仍然进入应用程序商店？

该应用程序允许用户打开“精确数据跟踪”并选择应用程序以零用户交互更新其数据使用计数器的频率——间隔为每分钟一次、每 10 分钟一次和每 20 分钟一次。

是的，我已经阅读了有关[后台进程的所有相关 Apple 文档，](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)并成功实现了其中的许多。我还[探索了这篇旧帖子的来龙去脉](https://stackoverflow.com/questions/4656214/iphone-backgrounding-to-poll-for-events/4808049#4808049)，但现在已经足够老了，许多“漏洞”已经被修补，并且文档中的东西无论如何都可以更好地工作。

虽然我很幸运地将我的应用程序注册为 VOIP 应用程序并在特定时间间隔请求保持活动状态，但除非它是 VOIP 应用程序（DataMan 不是），否则它不是 app-store-ok。此外，注册 VOIP keep-alives 实际上并没有表现出与 DataMan 相同的行为......VOIP keep-alive 呼叫以某种随机间隔出现，或者至少以您选择的频率而不同步时钟时间。DataMan 实际上符合时钟规定的时间间隔，并在 :10、:20、:30 分钟标记等处更新其数据计数器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:22:58.683

根据[他们的支持网站](http://xvision.me/support)，他们的专业版刚刚被苹果撤下。我敢打赌他们的其他版本是下一个。

仅仅因为你设法偷偷溜过审查团队并不意味着他们以后不会抓住它，或者其他人会成功。如果他们不提供经批准的后台服务之一，他们所做的显然违反了 Apple 的指导方针。

# ios - 适用于 iOS 图形应用程序的 OpenCV

> ID：10828763
> 
> 赞同：3
> 
> 时间：2012-05-31T06:54:31.147
> 
> 标签：ios, opencv

我想为 iPad 创建一个照片和视频处理应用程序。该应用程序将以各种方式影响图像（例如使用精明的边缘检测或双边模糊）。

我看到了一些非常有趣的使用 OpenCV 进行边缘检测的例子，但是如果我想创建这样的图形应用程序，OpenCV 是否是正确的工具？

如果是这样，任何人都可以推荐一些好的阅读材料来帮助我入门。

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:31:13.597

是的，你当然可以在 iOS 上使用 OpenCV。您只需交叉编译代码并将其包含在您的项目中。OpenCV 可以轻松完成您所描述的工作，甚至更多。

O'Reilly 出版了一本关于 OpenCV 的好书，这可能是加快速度的最佳方式。它解释了方法以及如何使用它们，并附有大量示例代码和图像。

*   [学习 OpenCV](http://shop.oreilly.com/product/0636920022497.do)，Gary Bradski、Adrian Kaehler、O'Reilly 2012

周围有一些示例项目：

*   [iOS 项目上的示例 OpenCV](http://github.com/niw/iphone_opencv_test)

还有许多构建脚本等，但请注意它们可能不是最新版本（2.4）。

# c++ - 从 Lua 中提取变量到 C++

> ID：10828766
> 
> 赞同：2
> 
> 时间：2012-05-31T06:54:46.983
> 
> 标签：c++, lua, c++11, configuration-files, ini

我正在处理数字 C++ 代码。此 C++ 代码有一个配置文件，其中包含我系统的物理参数。我希望能够在配置文件中进行数学计算和一些编程。Lua 看起来很完美。

假设我的 lua 文件计算变量`vol`和`mass`：

```
method = cube
len = 3
rho = 1.5
vol = len*len*len
mass = vol*rho 
```

我想传递`vol`和传递`mass`给 C++ 代码。我也想通过`method`，这是一个`std::string`。

我可以做这样的[事情](http://lua-users.org/lists/lua-l/2004-04/msg00201.html)。但是，在此示例中，它们一个接一个地遍历表的元素，而不依赖于变量的名称。我希望 C++ 根据变量的名称提取变量的值。lua 配置代码的结构也可能更复杂；我可能正在编写一些函数来获取这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:01:23.263

我认为您可以制作诸如 之类的函数`GetGlobal(name)`，它基本上会返回给定变量的值。然后从 C++ 调用此函数，并将适当的参数压入堆栈，并从堆栈中获取结果。

此外，使用`lua_is*`函数保护您的代码免受类型错误的变量的影响可能是值得的。

我可以向您发布更完整的代码解决方案，但我不想让您破坏自己编写代码的乐趣；），所以如果您需要任何其他信息，请告诉我。

# ruby-on-rails-3 - 资产清单文件可以是咖啡还是 sass

> ID：10828767
> 
> 赞同：1
> 
> 时间：2012-05-31T06:54:52.540
> 
> 标签：ruby-on-rails-3, asset-pipeline

当我部署到生产环境中时，我发现一些清单文件没有预编译。而且我意识到这些清单文件都有 .sass 或 .js.coffee 之类的扩展名

`application.rb`我确实包括了这些`config.assets.precompile << 'admin.js.coffee'`。

那么清单文件不能是纯 css/js 以外的东西吗？

更新

我有一个fish.sass，做`config.assets.precompile << 'fish.sass'`不会做任何事情。但是，如果我这样做`config.assets.precompile << 'fish.css'`，它将正确编译。我必须指定一个不存在的文件才能使其工作，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:44:49.150

清单文件可以包括其他文件，例如 sass、coffee。部署应用程序时，您需要运行`rake assets:precompile`. 这将预编译您的所有资产文件。

如果您有其他文件，则需要将其添加到您的 production.rb 中

```
config.assets.precompile += %w( admin.js, admin.css ) 
```

确保你的 production.rb 中也有这个

```
config.assets.compile = true 
```

**您必须使用扩展名`.js`和命名清单文件`.css`，然后在其中添加相同的名称`production.rb`。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:27:46.723

该文件`fish.css`确实“存在”。在编译资产之前，rails 会查看你的文件名，并根据它们的扩展名解析文件。所以 sass 文件将在 css 中呈现，在 js 中呈现咖啡等。

# java - 获取字段的起始位置

> ID：10828768
> 
> 赞同：0
> 
> 时间：2012-05-31T06:55:04.227
> 
> 标签：java

嗨，伙计们，我正在编写一个以这种格式读取文本文件的代码：

```
City             |First Name| Second Name|Last Name| 
```

我目前的输出是：

```
Column 1 is 17--------City
Column 2 is 10--------First Name
Column 3 is 12--------Second Name
Column 4 is 9---------Last Name 
```

我还需要文本文件中每个字段的开始位置，例如：

```
Column 1 is 17--------City : Position 1
Column 2 is 10--------First Name: Position 18
Column 3 is 12--------Second Name: Position 31
Column 4 is 9---------Last Name: Position 44 
```

这是我目前拥有的代码。有没有办法实现这个？

```
 package stanley.column.reader;

 import java.io.*;

 public class StanleyColumnReader {

    public static void main(String[] args) throws IOException {
        System.out.println("Developed By Stanley Mungai");       
        File f = new File("C:/File/");
        if (!f.exists()) {
            f.createNewFile();
        } else {
            f.delete();
        }
        String [] files = f.list();
        for (int j = 0; j < files.length; j++){
            FileInputStream fs = new FileInputStream("C:/File/" + files[j]);
            BufferedReader br = new BufferedReader(new InputStreamReader(fs));
            String result = "_result";
            BufferedWriter is = new BufferedWriter(new FileWriter("C:/File/" + files[j] + result + ".txt"));
            for (int i = 0; i < 0; i++) {
                br.readLine();
            }

            String line = br.readLine();
            String[] split = line.split("|");
            for (int i = 0; i < split.length; i++) {
                int k = i + 1;
                System.out.println("Calculating the size of field " + k );
                is.write("Column " + k + " is " + split[i].length());
                is.flush();
                is.newLine();
            }
        }
        System.out.println("Success");
        System.out.println("Output Saved to C:/File");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:04:41.603

您可以使用更高级的正则表达式组匹配来做到这一点并获取组开始索引。但考虑到这个问题，可能是矫枉过正和过于先进。

但是，在您的情况下，一种可能有效的快速简单方法就是`indexOf`在线使用。那就是将您的输出更改为包括：

```
" Position "+(line.indexOf(split[i])+1) 
```

只要姓氏、名字和城市不在同一行重复...

顺便说一句，你几乎不需要在每一行上刷新，我建议将它移到循环之外。

正则表达式解决方案：

```
//first declare the pattern once in the class
static final Pattern pattern = Pattern.compile("\\s*(.*?)\\s*\\|");
...
//instead of the split loop:
String line = "City             |First Name| Second Name|Last Name| Foo |Bar |"; //br.readLine();
Matcher matcher = pattern.matcher(line);
int column = 1;
while (matcher.find(column == 1 ? 0 : matcher.end())) {
    String match = matcher.group(1);
    System.out.println("Column " + column + " is " + match.length() + "---" + match + ": Position " + (matcher.start() + 1));
    column++;
} 
```

可能，根据您想要的确切位置，您可能希望更改`(matcher.start()+1)`为`(matcher.start(1)+1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T07:21:21.810

这是一个`assignment`吗？请正确标记。

您还没有说分隔符是否`"|"`也在数据中，但是看到您的代码，我假设它是。

我不明白的是你提到的第 3 列的位置是 31，第 4 列是 44？第 3 列应为 10+17+1 =28，第 4 列应为 10+17+12+1=40。如果我弄错了，您也需要发布原始数据。

```
String[] split = line.split("|");
int pos=1; //initial position
for (int i = 0; i < split.length; i++) {
    System.out.println("Calculating the size of field " + (i+1));
    is.write("Column " + (i+1) + " is " + pos+" : Position "+pos);
    pos=pos+split[i].length+1; //starting position for next column data
    is.flush();
    is.newLine();
} 
```

或者您可以使用`indexOf`方法找到位置：`line.indexOf(split[i])+1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T07:06:14.900

如果我明白你需要什么。也许您可以使用 indexOf 方法。这给你带来了第一个巧合。找到这个后，将管道更改为不同的内容，并在下一次迭代中再次调用 indexOf 管道。

```
String line = br.readLine();
for (int i = 0; i < split.length; i++) {
        System.out.println("Calculating the position " + line.indexOf("|") );
        line[line.indexOf("|")] = ",";
} 
```

# android - 单击时如何使列表中的文本变为粗体？

> ID：10828770
> 
> 赞同：0
> 
> 时间：2012-05-31T06:55:12.347
> 
> 标签：android, android-listview, textview

> **可能重复：**
> [如何在运行时更改 TextView 的样式](https://stackoverflow.com/questions/4630440/how-to-change-a-textviews-style-at-runtime)

```
 <ListView
    android:id="@+id/listproducts"
    android:layout_below="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:divider="#C8C8C8"
    android:dividerHeight="1dip" >
</ListView> 
```

这是我正在使用的列表的代码。下面是我想要在我的列表中的文本的代码。

```
<TextView
    android:id="@+id/productname"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="#000"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:layout_marginLeft="10dip"
    android:layout_marginTop="25dip"
    android:layout_marginBottom="10dip"
    android:selectAllOnFocus="true"
    /> 
```

' android:selectAllOnFocus ' 似乎不适用于 textview，它适用于按钮。我应该怎么办 ？

# graphics - 3D 对象中的多边形数量和渲染工作量？

> ID：10828772
> 
> 赞同：1
> 
> 时间：2012-05-31T06:55:15.140
> 
> 标签：graphics, 3d, game-engine

3D 对象中的多边形数量与渲染工作量之间是否存在任何关系（最好是方程）？我想看看如果多边形数量增加一倍，渲染工作量会增加多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:10:40.123

任意数量的多边形与神话中的“工作量”之间没有明确的联系。

请参阅以下示例：

1.  您渲染一个立方体，它有 6 个面，由 12 个三角形组成。你得到，比如说，1000fps（没有垂直同步）。当您将立方体细分为 120 个三角形时，fps 计数器很可能仍为 1000。

2.  您使用大量计算的重型片段着色器渲染单个全屏大小的四边形。你得到 0.5fps（或更多，但我希望你明白这一点）。

3.  另一个极端。您正在渲染一千个相似的立方体，每个立方体都有不同的纹理。渲染状态更改将花费大部分时间，而不是实际渲染。

因此，多边形可能具有不同的屏幕区域，并且它们可能不在单个图元中渲染。如果您谈论的是具有大量多边形的大型顶点数组，那么对于某些特定场景，性能变化必须是线性的。“某事”，因为视频卡和驱动程序正在剪裁不可见的多边形并针对每个正在渲染的像素执行早期测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:21:27.897

> 你能定义“工作量”吗？– 埃尔诺昨天
> 
> 好吧，我的意思是工作计算。我想看看会增加多少开销（对于 GPU、CPU、内存……）。其实我想总结一下设备的能源使用情况 – user1196937 2 小时前

如果这是实际问题，请比较能源使用情况：

您必须选择特定的配置并对其进行测试。GPU 到 GPU 和机器到机器的能源使用非常不同。

一些 GPU 制造商提供了有关其处理器性能的非常详细的信息，但是当您想要比较这些信息时，您将需要一台实际的机器。

# java - 方法上的不兼容类型

> ID：10828778
> 
> 赞同：0
> 
> 时间：2012-05-31T06:55:29.520
> 
> 标签：java, incompatibletypeerror

```
import java.util.*;
import java.lang.Math;

class StandardDeviation{
  public static void main(String args[]){
    ArrayList<Double> numbers = new ArrayList<Double>();
    Scanner kb=new Scanner(System.in);
    double in=kb.nextDouble();
    while(in!=-1){
        numbers.add(kb.nextDouble()); 
    }
    double avg = getAvg(numbers);
    double stdD = getD(avg,numbers);// tells me these are incompatible types
    System.out.printf("%f\n",stdD);
  }

  public static double getAvg(ArrayList<Double> numbers){
    double sum = 0.0;
    for (Double num : numbers){
        sum+= num;
    }
    return sum/numbers.size();
  }

  public static void getD(double avg, ArrayList<Double> numbers){
    ArrayList<Double> newSet = new ArrayList<Double>();
    for (int i = 0; i < numbers.size(); i++){
        newSet.add(Math.pow(numbers.get(i)-avg,2));
    }
    double total = 0.0;
    for (Double num : newSet){
        total += num;
    }
    double mean =(total/numbers.size());
    return Math.sqrt(mean);
  }
} 
```

我太累了，我在这个练习中走了这么远，我什至不确定它是否打印出正确的答案，但现在它告诉我 double stdD = getD(avg,numbers); 有不兼容的类型，不确定什么是不兼容的提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T06:56:59.647

`getD`是无效的，它不返回值。目前是

```
public static void getD(double avg, ArrayList<Double> numbers){ 
```

但它可能应该是

```
public static double getD(double avg, ArrayList<Double> numbers){ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T07:02:52.960

```
Your method is not returning anything. method return type is void and you are assigning that into double. that's why you are getting an error. Your method declaration should be like this - 

public static double getD(double avg, ArrayList<Double> numbers) 
```

# java - json字符串不能通过jquery ajax作为纯字符串发布？

> ID：10828781
> 
> 赞同：0
> 
> 时间：2012-05-31T06:55:34.190
> 
> 标签：java, gson, webwork

我想将一个json字符串作为纯字符串发布到一个动作中，然后使用gson将该字符串转换为List，但该字符串仍被jquery/webwork视为json对象，我使用的是jquery 1.43+webwork+gson，没有jquery json插件什么的。

这是行动：

```
public class ImageAction extends BaseAction {

    private String pks;

    public void setPks(String pks) {
        this.pks = pks;
        Gson gson=new Gson();
        List<Map> list=gson.fromJson(pks,new TypeToken<List<Map<String,String>>>(){}.getType());
        System.out.println(list.size());
    }

    ......
} 
```

jQuery代码：

```
j$.ajax({
            url:approveUrl,
            data: {pks:'[{"userName":"theoffspring"}]'},
//            dataType:'json',
            type:'post',
//            traditional: true,
            success:function (response) {
                hideProgressBar(parent.document)
                if (response.result==false){
                    alert(response.msg);
                    return;
                }

//                document.location.reload();
            }

        }) 
```

我希望将 pks 作为通用字符串而不是 json 对象发布。但是当我调用 jquery 代码时，结果并没有调用 setPks 方法。这么奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:03:26.833

看看这个：http: [//jsfiddle.net/flocsy/vuGL9/](http://jsfiddle.net/flocsy/vuGL9/)

您会看到您的 pks 实际上是根据需要作为字符串发送的，当它不是作为字符串 (pks2) 发送时，它看起来会有所不同。

**PS：**根据您的浏览器，查看 firebug 或检查元素中的网络选项卡：

```
pks: '[{"userName":"theoffspring"}]' 
```

* * *

```
pks2[0][userName2]:'hehe' 
```

所以可能你的服务器端做了一些魔法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:24:13.493

您还没有序列化您通过 ajax.serialize 在客户端使用 JSON.stringify() 发送的数据，发送它将被转换为单个字符串。

将您的代码修改为：

```
$.ajax({
            url:approveUrl,
            data:JSON.stringify(yourdata),
//            dataType:'json',
            type:'post',
//            traditional: true,
            success:function (response) {
                hideProgressBar(parent.document)
                if (response.result==false){
                    alert(response.msg);
                    return;
                }

//                document.location.reload();
            }

        }) 
```

这可能有效。

# android - 使用警报管理器通知位置更新

> ID：10828785
> 
> 赞同：1
> 
> 时间：2012-05-31T06:55:46.403
> 
> 标签：android, geolocation, location, alarmmanager

是否可以设置警报管理器以在某个位置到达我自己在半径内的位置时发出通知？

我一直在寻找没有运气。无论如何，也许这不是最好的方法。

提前致谢

# android - 在我的 android 项目中实现 facebook android sdk

> ID：10828787
> 
> 赞同：1
> 
> 时间：2012-05-31T06:55:47.460
> 
> 标签：android

现在，我想做一个应用程序来登录并将照片上传到 facebook 我下载了 facebook android sdk 文件 zar 我创建了一个项目 SocialNetwork，我还导入了上面的存档文件 sdk。如下：（我没有权限直接上传图片） [http://nn2.upanh.com/b6.s26.d2/1e48fcdafe93b494c89afdb4897c1145_45504792.project1.png](http://nn2.upanh.com/b6.s26.d2/1e48fcdafe93b494c89afdb4897c1145_45504792.project1.png)

但我不知道如何在 LoginPage 类中使用 facebook sdk，因为他们的包不像。我想调用 facebook sdk 中的方法来实现登录和上传照片 tomy 应用程序。我必须怎么做？当我添加 facebook sdk 时，它在 Facebook 类的这一部分显示错误

```
 @Override
    public void onServiceConnected(ComponentName className, IBinder service) {
        messageSender = new Messenger(service);
        refreshToken();
    }

    @Override
    public void onServiceDisconnected(ComponentName arg) {
        serviceListener.onError(new Error("Service disconnected"));
        // We returned an error so there's no point in
        // keeping the binding open.
        applicationsContext.unbindService(TokenRefreshServiceConnection.this);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:15:18.590

如果你看看[Facebook 教程](https://developers.facebook.com/docs/mobile/android/sso/)

**仔细阅读*Step1***。它解释了如何创建 facebook sdk 项目。

**仔细阅读第 2 步和第 3 步**。它解释了如何将该 facebook 库项目导入当前（您的）项目。

完成后，您可以自由调用 facebook API。

# facebook - 在不使用 Like 和 Comments 插件的情况下为 Like 和 Comment 发布 OpenGraph 操作

> ID：10828790
> 
> 赞同：2
> 
> 时间：2012-05-31T06:55:58.370
> 
> 标签：facebook, facebook-like, photo, facebook-opengraph, facebook-comments

我正在使用**GraphAPI**将**评论**和**喜欢**从我的网站发送到**Facebook 照片。**问题是我想将操作发布到用户的墙上，应该可以从他们朋友的新闻提要中查看，例如*“ChrisB 喜欢一个链接”*和*“ChrisB 评论了一个链接”*，其中 link 是**Facebook 上照片的 url**。当然，我希望照片拇指、名称和描述也会出现在帖子上。

我试图为这些使用自定义 OpenGraph 操作和对象，但**og:url 现在不接受 facebook 链接**（这很奇怪，因为它仍然适用于 facebook 页面）。我从 linter 得到的错误是*“Facebook urls cannot be crawled”。*

有没有办法得到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:29:09.547

不要直接使用 Facebook URL，而是尝试使用 bit.ly 链接或某种方式自动从您的网站重定向到 Facebook。例如，[我会](http://www.webniraj.com/2011/09/06/using-htaccess-files-to-hide-query-variables/)使用 apache 模块`mod_rewrite`在我的网站上创建一个页面，但让它重定向到 Facebook。

例如，“假页面”将是 domain.com/{photo_id}.jpg，但已`mod_rewrite`重定向到`http://www.facebook.com/photo.php?fbid={photo_id}`

# .net - 以通用方式传递属性？

> ID：10828798
> 
> 赞同：1
> 
> 时间：2012-05-31T06:56:50.913
> 
> 标签：.net, generics, compact-framework, sql-server-ce, sqlcedatareader

我正在阅读 SqlCeDataReader 并像这样评估值：

```
if(reader["abc"] != DBNull.Value)
    Abc = (int)reader["abc"];

if(reader[dude] != DBNull.Value)
    Dude = (string)reader[dude];

int Abc
{
    get;
    set;
}

string Dude
{
    get;
    set;
} 
```

我想把它浓缩成一个函数，但用最少的代码，理想情况下我想要这样的东西：

```
Dude = GetField( "dude", reader ); 
```

如果没有什么可以返回，让它自己返回 NULL 。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:03:12.630

您可以编写一个扩展方法，例如：

```
public static string GetSafeString(this IDataReader reader, string name)
{
    int ordinal = reader.GetOrdinal(name);
    return reader.IsDBNull(ordinal) ? null : reader.GetString(ordinal);
} 
```

并使用：

```
Dude = reader.GetSafeString("dude"); 
```

然而！就我个人而言，我建议查看类似 dapper-dot-net 之类的东西，它将*为您*处理所有实现代码，因此您只需编写：

```
string region = "North";
var users = connection.Query<User>(
    "select * from Users where Region = @region", // <=== query
    new { region }                                // <=== parameters
).ToList(); 
```

# android - PreferenceScreen 中的时区输入

> ID：10828800
> 
> 赞同：0
> 
> 时间：2012-05-31T06:57:03.453
> 
> 标签：android, timezone

是否可以在 PreferenceScreen 中选择 TimeZone？

# android - 一旦 GPS 更新开始，Android GPSListener 就会收到通知

> ID：10828803
> 
> 赞同：0
> 
> 时间：2012-05-31T06:57:13.267
> 
> 标签：android, gps, locationlistener

因此，众所周知的事实是 GPS 接收器需要一段时间（大约 10-12 秒）才能锁定卫星。使用 Android LocationListener 我想在位置更新开始时收到通知。例如：

我有一个带有以下代码的活动来实例化和调用 LocationListener

```
public void startLocationUpdates() {
    try{
    Common.locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            listener = new LocListener();
            if(Common.locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
                Common.locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);
            } else if(Common.locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
                Common.locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener);
            }
        }catch(Exception e) {
            e.printStackTrace();
        }
    } 
```

这是 LocationListener onLocationChanged 的​​实现。

```
public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        try{
            Common.currentLocation = new String(String.valueOf(location.getLatitude()) + "," + String.valueOf(location.getLongitude()));
            Log.i("LocListener",Common.currentLocation);
        } catch(Exception e) {
                e.printStackTrace();
        }

    } 
```

在 locationUpdates 开始后，Common.currentLocation 字符串得到更新。但是，我想在我的主要活动中等待，直到该字段更新。

如果我在我的活动中放置一个 while 循环以等待更新 Common.currentLocation 字段，则线程将暂停并且不会调用 onLocationChanged 方法（不打印日志消息）。

一旦调用 onLocationChanged 并且纬度和经度值可用，从 onLocationChanged 方法获取更新到公共接口/活动的最佳方法是什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:44:04.947

您不应该忙于等待（例如在循环中）位置更新。`LocationManager`实现一个`requestSingleUpdate(String provider, PendingIntent intent)`方法。考虑使用`PendingIntent`通知您的活动更新可用。有多种其他形式`requestSingleUpdate`，请参阅此处了解更多信息：http: [//developer.android.com/reference/android/location/LocationManager.html](http://developer.android.com/reference/android/location/LocationManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:15:02.177

如果您需要将侦听器放在一个类中以实现可重用性，那么有许多方法可以提供信息

要记住的重要一点是，Android 是一个事件驱动的系统，因此您需要创建一种方法，让类创建一个事件，然后响应该事件的任何相关方，而不是通过轮询“等待”结果。

如果您不需要可重用性，最简单的做法是简单地在同一个活动中实现侦听器并在那里进行处理，例如

```
public class yourclass extends Activity implements LocationListener {
  ...

  public void onLocationChanged(Location location) {
     ...
  }

} 
```

下一个最简单的方法是在您的类中使用侦听器创建一个接口，因此，这不是没有错误并且来自内存，但您会得到一般的想法，实际上这只是在您的类和事件侦听器之间放置了一层，但确实如此将您的侦听器隔离到一个类中，然后可以很容易地被其他活动使用，也不是我没有做任何事情来考虑多个活动注册注销等。

```
public mylistenerclass implements LocationListener {
   ...

   public interface LocationEvents { 
      public abstract void onLocationEvent(Location location); 
   }

   LocationEvents mListener = null; 

   public void registerForEvents(LocationEvents eventListener, ... any-params) {
      ... start listening for location stuff
      mListener = eventListener;

   }

    public void unregisterForEvents(LocationEvents eventListener) {
      ... end listening for location stuff
      mListener = null;

    } 

    public void onLocationChanged(Location location) {
         ... 
         if (null != mListener)
            mListener.onLocationEvent(location); 
    } 
} 
```

公共类 yourclass 扩展 Activity 实现 LocationEvents { ...

```
 @Override
  public void onResume() {
      super.onResume();      
      registerForEvents(locationEvent, anyparams); 
  }

  @Override
  public void onPause() {
      super.onPause();      
      unregisterForEvents(locationEvent); 
  }

} 
```

您还可以使用服务，或从您的班级广播意图。我建议，如果您的其他活动不需要该功能，则只需在现有活动中实现侦听器并前往那里

# sql - 如何在 sql 中获取 123456 数字中的前 3 位数字？

> ID：10828804
> 
> 赞同：8
> 
> 时间：2012-05-31T06:57:14.437
> 
> 标签：sql, tsql, sql-server-2000

我的 CDR 表中有一个名为**CallingParty**的字段，它包含如下数据：

```
CallingParty
------------
267672668788 
```

我想选择每个数字的前 3 个数字，例如

```
CallingParty
------------
267 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T07:01:42.500

如果`CallingParty`是 int 类型：

```
SELECT CAST(LEFT(CallingParty, 3) AS INT)
From CDR 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T07:03:22.380

SQL Server 有一个 Left() 函数，但它最适用于字符串。（SQL 中的 varchar/char）

```
Select left(cast(267672668788 as varchar), 3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T07:02:23.787

使用此查询：

```
SELECT SUBSTRING(CAST(CallingParty AS VARCHAR(50)), 1, 3) FROM [CDR] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-07T15:29:00.373

如果数据长度不变，那么您始终可以除以 10 * 您拥有的数字

```
SELECT FLOOR(267672668788 / 1000000000)
=267 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-01-17T09:42:04.247

尝试这个：

```
SELECT Substring(callingparty, 1, Length(callingparty) - 9) 
FROM   cdr; 
```

# c# - 如何在 C# 中将“=?utf-8?B?...?=”解码为字符串

> ID：10828807
> 
> 赞同：17
> 
> 时间：2012-05-31T06:57:49.967
> 
> 标签：c#, string, unicode, utf-8

我使用 Visual Studio 2010、C# 来阅读 Gmail 收件箱`IMAP`，这很有吸引力，但我认为 Unicode 不完全受支持，因为我无法轻松获取波斯语（波斯语）字符串。

例如，我有我的字符串：`سلام`，但`IMAP`给了我：`"=?utf-8?B?2LPZhNin2YU=?="`。

如何将其转换为原始字符串？将 utf-8 转换为字符串的任何提示？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T07:05:38.777

我们来看看MIME编码的含义：

```
=?utf-8?B?...something...?=
    ^   ^
    |   +--- The bytes are Base64 encoded
    |
    +---- The string is UTF-8 encoded 
```

因此，要对此进行解码，请`...something...`取出您的字符串（`2LPZhNin2YU=`在您的情况下），然后

1.  反转Base64编码

    ```
    var bytes = Convert.FromBase64String("2LPZhNin2YU="); 
    ```

2.  将字节解释为 UTF8 字符串

    ```
    var text = Encoding.UTF8.GetString(bytes); 
    ```

`text`现在应该包含所需的结果。

* * *

这种格式的描述可以在 Wikipedia 中找到：

*   [http://en.wikipedia.org/wiki/MIME#Encoded-Word](http://en.wikipedia.org/wiki/MIME#Encoded-Word)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T07:05:12.643

你所拥有的是一个 MIME 编码的字符串。.NET 不包含用于 MIME 解码的库，但您可以[自己](http://www.codeproject.com/Articles/11380/A-C-Implementation-of-Mime-De-encode)实现它或使用[库](https://stackoverflow.com/questions/3876406/basic-c-sharp-mime-decoding).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-17T10:47:11.830

他在这里

```
 public static string Decode(string s)
    {
        return String.Join("", Regex.Matches(s ?? "", @"(?:=\?)([^\?]+)(?:\?B\?)([^\?]*)(?:\?=)").Cast<Match>().Select(m =>
        {
            string charset = m.Groups[1].Value;
            string data = m.Groups[2].Value;
            byte[] b = Convert.FromBase64String(data);
            return Encoding.GetEncoding(charset).GetString(b);
        }));
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-03T17:41:24.743

以下方法将“=?utf-8?B?...”或“=?utf-8?Q?...”等字符串解码为普通字符串。编码（如“utf-8”）是自动选择的。不使用正则表达式。C＃

```
public static string DecodeQuotedPrintables(string InputText)
    {
        var ResultChars = new List<char>();
        Encoding encoding;
        for (int i= 0; i < InputText.Length; i++)
        {
            var CurrentChar = InputText[i];
            switch (CurrentChar)
            {
                case '=':
                    if((i + 1) < InputText.Length && InputText[i+1] == '?')
                    {
                        // Encoding
                        i += 2;
                        int StIndex = InputText.IndexOf('?', i);
                        int SubStringLength = StIndex - i;
                        string encodingName = InputText.Substring(i, SubStringLength);
                        encoding = Encoding.GetEncoding(encodingName);
                        i += SubStringLength + 1;

                        //Subencoding
                        StIndex = InputText.IndexOf('?', i);
                        SubStringLength = StIndex - i;
                        string SubEncoding = InputText.Substring(i, SubStringLength);
                        i += SubStringLength + 1;

                        //Text message
                        StIndex = InputText.IndexOf("?=", i);
                        SubStringLength = StIndex - i;
                        string Message = InputText.Substring(i, SubStringLength);
                        i += SubStringLength + 1;

                        // encoding
                        switch (SubEncoding)
                        {
                            case "B":
                                var base64EncodedBytes = Convert.FromBase64String(Message);
                                ResultChars.AddRange(encoding.GetString(base64EncodedBytes).ToCharArray());

                                // skip space #1
                                if ((i + 1) < InputText.Length && InputText[i + 1] == ' ')
                                {
                                    i++;
                                }
                                break;

                            case "Q":
                                var CharByteList = new List<byte>();
                                for (int j = 0; j < Message.Length; j++)
                                {
                                    var QChar = Message[j];
                                    switch (QChar)
                                    {
                                        case '=':
                                            j++;
                                            string HexString = Message.Substring(j, 2);
                                            byte CharByte = Convert.ToByte(HexString, 16);
                                            CharByteList.Add(CharByte);
                                            j += 1;
                                            break;

                                        default:
                                            // Decode charbytes #1
                                            if (CharByteList.Count > 0)
                                            {   
                                                var CharString = encoding.GetString(CharByteList.ToArray());
                                                ResultChars.AddRange(CharString.ToCharArray());
                                                CharByteList.Clear();
                                            }

                                            ResultChars.Add(QChar);
                                            break;
                                    }
                                }

                                // Decode charbytes #2
                                if (CharByteList.Count > 0)
                                {
                                    var CharString = encoding.GetString(CharByteList.ToArray());
                                    ResultChars.AddRange(CharString.ToCharArray());
                                    CharByteList.Clear();
                                }

                                // skip space #2
                                if ((i + 1) < InputText.Length && InputText[i + 1] == ' ')
                                {
                                    i++;
                                }
                                break;

                            default:
                                throw new NotSupportedException($"Decode quoted printables: unsupported subencodeing: '{SubEncoding}'");
                        }
                    }
                    else
                        ResultChars.Add(CurrentChar);
                    break;

                default:
                    ResultChars.Add(CurrentChar);
                    break;
            }
        }

        return new string(ResultChars.ToArray());
    } 
```

# jquery - 如何在jquery中更改对话框文本大小

> ID：10828811
> 
> 赞同：4
> 
> 时间：2012-05-31T06:58:03.843
> 
> 标签：jquery, dialog, text-size

嗨，我想更改对话框文本大小。我动态创建了对话框，我需要更改文本大小。怎么做？请指导我。

```
function validate_email(){
                window.$required = $("#dialog").dialog({
                  width: 300,
                  height: 450,

                    autoOpen: false,
                           buttons: {
                'Complete': function() {
                   checkstatus(userid);
                }
              }
                });
            $required.html('Your account setup has been initiated. 
started.').dialog('open');//here my text
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T07:02:25.487

您可以使用[.css()](http://api.jquery.com/css/)修改对话框的样式：

```
function validate_email(){
     window.$required = $("#dialog").dialog({
         width: 300,
         height: 450,
         autoOpen: false,
         buttons: {
            'Complete': function() {
               checkstatus(userid);
            }
          }
     }).css("font-size", "20px");

     $required.html('Your account setup has been initiated. started.').dialog('open');//here my text
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:16:26.550

在您的样式表中，您可以为整个对话框和/或其中的元素设置字体：

```
<style>
#dialog { font-size: 25px; }
#dialog h2 { font-size: larger; }
#dialog div { font-size: 20px; }
#dialog div.bigger { font-size: 150%; }
#dialog p { font-size: x-small; background-color: blue; }
</style> 
```

该[`font-size`物业](https://developer.mozilla.org/en/CSS/font-size)接受许多不同的单位。

当然你也可以用同样的方法设置其他的 CSS 属性，如我上面例子的最后一行所示。

# javascript - 触控设备的鼠标悬停脚本

> ID：10828812
> 
> 赞同：1
> 
> 时间：2012-05-31T06:58:05.617
> 
> 标签：javascript, ios, touch, mouseevent, jquery-events

我正在尝试在我的网站上使用此图像浏览脚本，我希望它与 iPhone 和 iPad 兼容。问题是它是基于鼠标悬停的，所以它在触摸时不起作用。任何人都可以帮助我更改脚本，而不是将鼠标悬停在您单击并拖动以浏览它们的图像上？那么它可以在触摸设备上工作吗？谢谢。（脚本示例：[http](http://www.fourcornersbooks.co.uk) ://www.fourcornersbooks.co.uk ）

```
(function($) {
$.fn.skim = function() {
    return this.each(function() {

        var container = $(this);
        var numImgs    = container.find("img").size();
        var zoneWidth  = container.width() / numImgs;

        container.find("img").css("display", "none");
        container.find("img:first").css("display", "block");

        container.mousemove(function(e) {
            var offset = container.offset();
            x = e.pageX - offset.left;
            var currentZone = Math.floor(x / zoneWidth);
            $(this).find("img").css("display", "none");
            $(this).find("img:eq(" + currentZone + ")").css("display", "block");
        });
        container.mouseout(function(){
            $(this).find("img").css("display", "none");
            $(this).find("img:first").css("display", "block");
        });

    });
}
})(jQuery); 
```

# wordpress - 强制父 Div 继承子图像高度（用于响应缩放图像）

> ID：10828814
> 
> 赞同：0
> 
> 时间：2012-05-31T06:58:16.950
> 
> 标签：wordpress, css, height, responsive-design, inheritance

我试图让父 div 继承响应子图像设置的高度......但它不起作用。

这适用于响应式网站，因此在调整浏览器大小时，图像会调整大小。问题是，如果我在父 .​​mosaic-block-three 元素上设置高度，则图像似乎会固定在该高度。

如果我将 .mosaic-block-three 元素设置为 height: auto，那么它会完全失败并下降到 0 高度。

为了使这个规模顺利进行，我缺少什么？我可以重新排列和添加 css、html 或 javascript，无论我必须做什么来完成它。我已经尝试了几个小时，所以非常感谢任何帮助:-)

示例页面在这里：[http ://bit.ly/KzfN2g](http://bit.ly/KzfN2g)

我的目标是复制图像在此页面上的完美响应方式，但添加了翻转马赛克文本：[http ://bit.ly/LIrJv7](http://bit.ly/LIrJv7)

```
<div class="mosaic-block-three magnifier2">
     <a href="/wp-content/uploads/2012/05/home-office-vignette-tiered-architella-shades-01.png" class="mosaic-overlay fancybox" rel="gallery" style="display: inline; opacity: 0; "> </a>
     <div class="details"> 

        <a class="pf_title_link" href="/portfolio/vignette-tiered-architella-shades/">Vignette® Tiered™ Architella® Shades  </a> </div>

        <div class="mosaic-backdrop" style="display: block; ">
        <img src="/wp-content/uploads/2012/05/home-office-vignette-tiered-architella-shades-01-1024x564.png" class="attachment-large wp-post-image" alt="home-office-vignette-tiered-architella-shades-01" title="home-office-vignette-tiered-architella-shades-01"> 
        </div>
          <!-- end mosaic-backdrop --> 

     </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:28:06.953

这适用于以下几个 CSS 更改（仅在 Chrome 中测试）：

*马赛克.css 第 46 行*

> .mosaic-block-三{~~高度：250px~~ }

*马赛克.css 第 74 行*

> .mosaic-backdrop {~~位置：绝对~~}

*Promotion.css 第 92 行*

> .details {~~边距：15px 20px;~~ 边距：0 20px;}

*responsepress.css 第 155 行*

> .mosaic-backdrop img {float:left}

您现在可能还想将其`border-radius:5px`移至 img。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:28:53.853

您可能应该使用 img 标签而不是背景。然后设置该图像的最大宽度。不要在父元素上设置宽度/高度。

那应该工作！

# java - 无对象调用方法

> ID：10828817
> 
> 赞同：6
> 
> 时间：2012-05-31T06:58:34.423
> 
> 标签：java

我为自己构建了一个小的（只有 3 个方法！）api，我希望能够像在 Powerbot 中调用方法一样调用它（一个 Runescape 机器人工具（我使用它，但出于编程目的，不是用于实际作弊目的）），而不创建您需要的文件的对象。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T07:01:07.910

您将需要创建静态方法，因此您需要执行以下操作：

```
public class A
{
    public static void foo()
    {
        ...
    }
} 
```

然后，您可以这样称呼它们：

```
public class B
{
    ...
    A.foo();
} 
```

但是请注意，`static`方法需要是自包含的。

编辑：按照以下答案之一的建议，您可以使它像这样工作：

```
package samples.examples
public class Test
{
    public static void A()
    {
        ...
    }
} 
```

然后这样做：

```
import static sample.examples.Test.A;

public class Test2
{
    ...
    A();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T07:00:55.667

如果在导入类时使用 static 关键字，则可以使用它的方法，就好像它们属于要导入它们的类一样。看：

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)

当然，您的“api 方法”也需要是静态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T00:14:59.843

我发现对我来说最好的方法是`extend`我的活动（如果我说得对的话）......

**主要课程**

```
public class myMainActivity extends myMiniApi{
...
} 
```

我认为这是一种更好的方法（我的观点），只需像往常一样调用您的方法，就好像它在同一个班级中一样。例子：

```
randomMethod(); 
```

# shell - 从日志中获取除具有特定字符串的行之外的所有行

> ID：10828823
> 
> 赞同：0
> 
> 时间：2012-05-31T06:59:11.047
> 
> 标签：shell, unix, aix

以下代码给出了包含字符串“类型：错误”的日志输出

```
grep -E "$Currentdate" *.log |  grep "Type: Error" | sort -u 
```

什么是代码如果我想获取日志中所有行的输出，除了带有字符串“类型：错误”的行

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:02:07.133

使用`-v`选项 grep 可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:01:42.093

```
cat logFile | grep -v "Type: Error" 
```

有了这个，首先，你将显示你的文件，然后你将使用`-v`反转匹配的选项，然后技巧就完成了！

对于多个字符串，你可以做这样的事情

```
cat logFile | egrep -v '(firstString)|(secondString)|(thirdString)|...|(nString)' 
```

# search - 使用 Lucene 进行增量搜索

> ID：10828825
> 
> 赞同：1
> 
> 时间：2012-05-31T06:59:41.627
> 
> 标签：search, lucene

我想使用 lucene 进行增量搜索。我在单词之间有空格。说“今日印度”。我的搜索查询返回

*   今天的印度
*   今天印度时间
*   今天时间印度

我希望在 sql 中搜索结果，例如“India today%”。但这并没有发生。我尝试使用短语查询，但这适用于精确搜索。我存储的数据是 NOT_ANALYZED 以便我可以使用空格进行搜索。

```
KeywordAnalyzer analyzer = new KeywordAnalyzer (); 

PhraseQuery pq = new  PhraseQuery();
pq.add(new Term("name", "MR DANIEL KELLEHER")); 

int hitsPerPage = 1000;
IndexReader reader = IndexReader.open(index);
IndexSearcher searcher = new IndexSearcher(reader);
TopScoreDocCollector collector = TopScoreDocCollector.create(hitsPerPage, true);
searcher.search(pq, collector); 
```

我无法获得中间有空格的查询。我也参考了很多关于网络和 stackoverflow 的文章，但没有得到解决方案。

```
package org.lucenesample;

import org.apache.lucene.search.Query;

import org.apache.lucene.*;
import org.apache.lucene.analysis.*;
import org.apache.lucene.analysis.standard.*;
import org.apache.lucene.analysis.standard.std31.*;
import org.apache.lucene.analysis.tokenattributes.*;
import org.apache.lucene.collation.*;
import org.apache.lucene.document.*;
import org.apache.lucene.document.Field.Index;
import org.apache.lucene.document.Field.Store;
import org.apache.lucene.index.*;
import org.apache.lucene.index.IndexWriter.MaxFieldLength;
import org.apache.lucene.messages.*;
import org.apache.lucene.queryParser.*;
import org.apache.lucene.search.*;
import org.apache.lucene.search.function.*;
import org.apache.lucene.search.payloads.*;
import org.apache.lucene.search.spans.*;
import org.apache.lucene.store.*;
import org.apache.lucene.util.*;
import org.apache.lucene.util.fst.*;
import org.apache.lucene.util.packed.*;

import java.io.File;
import java.sql.*;
import java.util.HashMap;

public class ExactPhrasesearchUsingStandardAnalyser {

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        Directory directory = new RAMDirectory();
        StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_35);
        MaxFieldLength mlf = MaxFieldLength.UNLIMITED;
        IndexWriter writer = new IndexWriter(directory, analyzer, true, mlf);
        writer.addDocument(createDocument1("1", "foo bar baz blue"));
        writer.addDocument(createDocument1("2", "red green blue"));
        writer.addDocument(createDocument1("3", "test panda foo & bar testt"));
        writer.addDocument(createDocument1("4", " bar test test foo in panda  red blue "));
        writer.addDocument(createDocument1("4", "test"));
        writer.close();

    IndexSearcher searcher = new IndexSearcher(directory);
    PhraseQuery query = new PhraseQuery();

    QueryParser qp2 = new QueryParser(Version.LUCENE_35, "contents", analyzer);
    //qp.setDefaultOperator(QueryParser.Operator.AND);
    Query queryx2 =qp2.parse("test foo in panda re*");//contains query
    Query queryx23 =qp2.parse("+red +green +blu*"  );//exact phrase match query.Make last word as followed by star
    Query queryx234 =qp2.parse("(+red +green +blu*)& (\"red* green\") "  );

     /*String term = "new york";
        // id and location are the fields in which i want to search the "term"
        MultiFieldQueryParser queryParser = new MultiFieldQueryParser(
                                           Version.LUCENE_35,
                                           { "contents"},
                                           new KeywordAnalyzer());
        Query query = queryParser.parse(term);
        System.out.println(query.toString());*/

    QueryParser qp = new QueryParser(Version.LUCENE_35, "contents", analyzer);
    //qp.setDefaultOperator(QueryParser.Operator.AND);

    Query queryx =qp.parse("\"air quality\"~10");
    System.out.println("******************Searching Code starts******************");
    TopDocs topDocs = searcher.search(queryx2, 10);
    for (ScoreDoc scoreDoc : topDocs.scoreDocs) {
        Document doc = searcher.doc(scoreDoc.doc);
        System.out.println(doc+"testtttttttt");
    }

}

   private static Document createDocument1(String id, String content) {
        Document doc = new Document();
        doc.add(new Field("id", id, Store.YES, Index.NOT_ANALYZED));
        doc.add(new Field("contents", content, Store.YES, Index.ANALYZED,
                Field.TermVector.WITH_POSITIONS_OFFSETS));
        System.out.println(content);
        return doc;
    }
} 
```

我尝试过这种方式。我可以搜索包含格式。但我无法获得选项的开头，因此当用户按下“India to”时，“India today”和“india today”结果也会出现。我能够当我做“+india* +to*”时靠近它但是这也会导致“今天的印度人”。在用户输入完成“今天”之前我无法获得搜索结果。基本上我想要短语查询“\”印度今天"上班。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:25:08.583

对于已分析的字段，一种方法是使用[MultiPhraseQuery](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/MultiPhraseQuery.html)与已枚举的[前缀术语：](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/PrefixTermEnum.html)

```
<MultiPhraseQuery: field:"india (today todays)"> 
```

或者，可以使用[SpanQuery ，其优点是它可以处理术语扩展。](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/spans/SpanQuery.html)

```
<SpanNearQuery: spanNear([field:india, SpanMultiTermQueryWrapper(field:today*)], 0, true)> 
```

# url - UTF-8 url 必须是大写或小写

> ID：10828833
> 
> 赞同：2
> 
> 时间：2012-05-31T07:00:40.300
> 
> 标签：url, utf-8, seo, case-sensitive

SEO 网站出于某种原因建议 url 必须小写，但我的问题是 utf-8 url 可以有一些数字和字符，例如：

> %D9%F6

哪种类型是标准的和更好的？这：

> %D9%F6

或这个：

> %d9%f6

我使用小写，但是当我复制 url 并将其粘贴到地址栏中时，它会自动变为大写，这种情况下 301 在我的 php 代码中重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:14:05.423

因为按照 w3c 和 web 标准，编码的 UTF8 应该保持大写。在谷歌的观点是相同的，他们把他们编码的 UTF8 字大写。

最好的标准是`%D9%F6`，你应该坚持！不要尝试降低，否则您应该会遇到一些重复的页面，并且对于您的 seo 这真的很糟糕。

# kerberos - Kerberos 在 IE 和 Chrome 中有效，但在 FF 和 Safari 中无效

> ID：10828841
> 
> 赞同：2
> 
> 时间：2012-05-31T07:01:06.173
> 
> 标签：kerberos, single-sign-on

我有一个 Kerberos 安全页面，我可以在 IE 和 Chrome 中成功访问，而无需重新输入我的用户凭据。所以单点登录起作用了。

使用 FF 会直接出现 401 错误页面，使用 Safari 会出现登录框，当我插入用户凭据时，它会失败并出现 401 错误页面。

我认为它适用于 Chrome，因为它猜对了 SPN：[http](http://dev.chromium.org/developers/design-documents/http-authentication) ://dev.chromium.org/developers/design-documents/http-authentication查看 Kerberos SPN 生成。

**所以我的问题是：** 为什么它在 FF 和 Safari 中不起作用，即使使用用户凭据登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T11:25:38.893

您必须在 Firefox 中启用协商`about:config`。谷歌会提供帮助。

# java - PowerMockito：使用匹配器模拟静态方法时出现 InvalidUseOfMatchersException

> ID：10828843
> 
> 赞同：6
> 
> 时间：2012-05-31T07:01:08.980
> 
> 标签：java, mockito, powermock

当我测试这个静态方法时

```
public class SomeClass {
    public static long someMethod(Map map, String string, Long l, Log log) {
        ...
    }
} 
```

和

```
import org.apache.commons.logging.Log;

@RunWith(PowerMockRunner.class)
//@PrepareForTest(SomeClass.class)
public class Tests {
    @Test
    public void test() {
        ...
        PowerMockito.mockStatic(SomeClass.class);
        Mockito.when(SomeClass.someMethod(anyMap(), anyString(), anyLong(), isA(Log.class))).thenReturn(1L);
        ...
    }
} 
```

我得到了`InvalidUseOfMatchersException`。我的问题是：

1.  当所有参数都使用匹配器时，为什么会出现此异常？如何解决？我已经调试过了，发现`isA(Log.class)`返回为空。
2.  当我将`@PrepareForTest`注释添加到测试类并运行测试时，junit 没有响应。为什么？

编辑

我试图不使用参数匹配器，并得到

> org.mockito.exceptions.misusing.MissingMethodInvocationException: when() 需要一个参数，该参数必须是“模拟的方法调用”。例如：when(mock.getArticles()).thenReturn(articles);
> 
> 此外，可能会出现此错误，因为：
> 
> 1.  你存根其中之一：final/private/equals()/hashCode() 方法。这些方法*不能*被存根/验证。
>     
>     
> 2.  在 when() 中，您不会在模拟上调用方法，而是在其他对象上调用方法。
>     
>     
> 
> 在 ...

所以这似乎是由于它`someMethod`本身。方法中有**同步**块。我想知道 Powermockito 是否可以模拟这种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:10:05.767

尝试像这样将 isA() 替换为另一个 any() 调用

```
Mockito.when(SomeClass.someMethod(anyMap(), anyString(), anyLong(), any(Log.class))).thenReturn(1L); 
```

**[编辑]**

当你得到异常时检查你的堆栈跟踪。你看到有`NoClassDefFoundError`报道吗？我注意到当我没有将它包含`javassist.jar`在我的项目中时，我遇到了类似的错误。

我使用 PowerMockito，这些是我添加到一个全新项目中的 jar，用于运行 @Tom 发布的代码

*   powermock-mockito-1.4.10-full.jar
*   mockito-all-1.8.5.jar
*   javassist-3.15.0-GA.jar
*   junit-4.8.2.jar
*   common-logging-1.1.1.jar

检查您是否使用兼容的 JAR 版本，并检查您的项目类路径中是否有任何其他冲突的 JAR 始终是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-09T14:08:23.690

迟到总比没有好，下面一行：

```
Mockito.when(SomeClass.someMethod(anyMap(), anyString(), anyLong(),
    isA(Log.class))).thenReturn(1L); 
```

应该：

```
PowerMockito.when(SomeClass.someMethod(anyMap(), anyString(), anyLong(),
    isA(Log.class))).thenReturn(1L); 
```

因此，`Mockito.when`应该调用而不是调用`PowerMockito.when`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:47:07.400

1.  isA 将始终返回`null`。这是设计使然，它记录在 isA() 方法的 Javadoc 中。这样做的原因是 null 将始终与类的参数化返回类型匹配，该类的返回类型将始终与使用 isA() 匹配器的存根方法中的参数类型匹配。返回的空值实际上并未被执行。

2.  似乎对我来说工作得很好。我完整的测试用例：

```
import static org.mockito.Matchers.*;

import java.util.Map;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.impl.SimpleLog;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mockito;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

class SomeClass {
  public static long someMethod(final Map map, final String string, final Long l, final Log log) {
    return 2L;
  }
}

@RunWith(PowerMockRunner.class)
@PrepareForTest(SomeClass.class)
public class InvalidUseOfMatchersTest {
    @Test
    public void test() {
        // Mock the SomeClass' static methods, stub someMethod() to return 1
        PowerMockito.mockStatic(SomeClass.class);
        Mockito.when(SomeClass.someMethod(anyMap(), anyString(), anyLong(), isA(Log.class))).thenReturn(1L);

        // null NOT is-a Log, uses default stubbing: returns 0
        System.out.println(SomeClass.someMethod(null, null, 5L, null));
        // SimpleLog passes is-a test, uses stubbed result: returns 1
        System.out.println(SomeClass.someMethod(null, null, 7L, new SimpleLog("simplelog")));
    }
}
```

也许发布一个完整的例子来帮助诊断发生了什么？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T08:43:32.387

```
<dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>${mockito.version}</version>
    </dependency>
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-module-junit4</artifactId>
        <version>${powermock.version}</version>
        <type>jar</type>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-api-mockito</artifactId>
        <version>${powermock.version}</version>
        <type>jar</type>
        <scope>provided</scope>
    </dependency> 
```

我希望你的项目使用的是 maven。尝试将这些 jar 包含到构建中。

# android - 带有自定义适配器的可点击 ListView

> ID：10828844
> 
> 赞同：0
> 
> 时间：2012-05-31T07:01:11.273
> 
> 标签：android, listview, android-listview

我是 Java 和 Android 开发的新手，所以请耐心等待...

我正在尝试使用自定义适配器创建一个可点击的 ListView。我的 ListView 设置显示了每一行，但是当我尝试调用 setOnClickListener 时，它抱怨说：

> AdapterView 类型中的方法 setOnClickListener(View.OnClickListener) 不适用于参数（新的 AdapterView.OnItemClickListener(){}）

所以这是我的代码：

```
AccountArrayAdapter myAdapter = new AccountArrayAdapter(this, accountArray);        

listView.setAdapter(myAdapter);

listView.setOnClickListener(new android.widget.AdapterView.OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            Toast.makeText(getApplicationContext(), "Click ListItemNumber " + position, Toast.LENGTH_LONG).show();

        }
    }); 
```

很直接的东西。代码大部分是从其他地方复制的，我认为这就是为什么我很难弄清楚可能出现的问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:02:13.927

使用`setOnItemClickListener` **而不是** `setOnClickListener`

```
listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
            Toast.makeText(getApplicationContext(), "Click ListItemNumber " + position,Toast.LENGTH_LONG).show();
            }
        }); 
```

-[请参阅此 CustomAdapter ListView](http://samir-mangroliya.blogspot.in/p/android-customized-listview.html)

# oracle - 包需要返回查询的执行计划和统计信息

> ID：10828846
> 
> 赞同：2
> 
> 时间：2012-05-31T07:01:17.140
> 
> 标签：oracle, plsql, oracle11gr2

假设我在 sql plus 中执行我的脚本，如下所示

```
sql>set autotrace traceonly;
sql>select * from employees;

Execution Plan
----------------------------------------------------------
   0       SELECT STATEMENT Optimizer Mode=ALL_ROWS (Cost=2 Card=14 Bytes=1 K)
   1    0    TABLE ACCESS FULL T416493.EMPLOYEE (Cost=2 Card=14 Bytes=1 K)

Statistics
----------------------------------------------------------
      6  user calls
      0  physical read total multi block requests
      0  physical read total bytes
      0  cell physical IO interconnect bytes
      0  commit cleanout failures: block lost
      0  IMU commits
      0  IMU Flushes
      0  IMU contention
      0  IMU bind flushes
      0  IMU mbu flush
     14  rows processed 
```

我正在创建一个包，我在其中传递查询，它将为我提供具有此统计信息的执行计划。我该如何实现这个包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:12:40.877

这是 DMBS_XPLAN 的基本包装器。

```
CREATE OR REPLACE PROCEDURE print_plan(p_sql IN VARCHAR2)
IS
BEGIN
  EXECUTE IMMEDIATE 'explain plan for '||p_sql;

  FOR r_plan IN (SELECT * 
                 FROM table(DBMS_XPLAN.DISPLAY))
  LOOP
    dbms_output.put_line(r_plan.plan_table_output);
  END LOOP;
END;
/

BEGIN
  print_plan('select 1 from dual');
END;
/ 
```

# javascript - jsonp在chrome中失败

> ID：10828848
> 
> 赞同：0
> 
> 时间：2012-05-31T07:01:28.553
> 
> 标签：javascript, google-chrome, jsonp

**编辑：**这在版本 19.0.1084.56 中再次起作用，所以我要关闭它。

我正在使用 Chrome 19.0.1084.52，我发现 chrome 只是默默地失败了 jsonp 相关代码。

作为一个真实世界的案例（因为我的代码在私人服务器 atm 上），使用 Firefox 访问[http://tweet.seaofclouds.com/](http://tweet.seaofclouds.com/)似乎工作正常，但 chrome 只是默默地失败了。

该脚本未显示在任何选项卡中。

我试过手动写一个标签。我试过 jQuery.getJSON 和 jQuery.ajax

除了在本地运行代码的非实用方法（file：//）之外，我尝试过的任何方法似乎都无法解决

除了在禁用网络安全模式下运行 chrome（我还没有尝试过）之外，还有什么方法可以让 chrome 工作？

# actionscript-3 - 为 FLVPlayback 预加载外部 flv

> ID：10828850
> 
> 赞同：1
> 
> 时间：2012-05-31T07:01:38.693
> 
> 标签：actionscript-3, flv, preloader, flvplayback

我有 flash actionscript 3 项目，它在第二帧（欢迎屏幕之后）将外部 flv 加载到 FLVPlayback 组件或外部 mp3 以供播放器使用。

我正在尝试为整个项目的预加载器找到代码 - 这将显示在第一个屏幕之前，并且还将预加载外部文件，因此当用户使用播放器移动到框架时，将立即显示 flv/mp3。

是否可以将 flv 加载到某个对象中，然后将其分配给 FLVPlayBack 组件作为源？

任何帮助都感激不尽！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:30:27.310

您可以通过对照 getBytesTotal 检查 getBytesLoaded 并创建自己的加载栏来做到这一点，但我建议使用 Greensocks LoaderMax 库。

[http://www.greensock.com/loadermax/](http://www.greensock.com/loadermax/)

大量信息和示例供您入门。

# java - 自定义类加载器有什么用

> ID：10828863
> 
> 赞同：27
> 
> 时间：2012-05-31T07:02:33.060
> 
> 标签：java, classloader

最近我遇到了java自定义类加载器api。我在这里找到了一个用途，[kamranzafar 的博客](http://kamranzafar.org/weblog/2006/12/25/loading-classes-directly-from-jar-files/) 我对类加载器的概念有点陌生。谁能详细解释一下，我们可能需要或应该使用它的不同场景是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-31T07:43:34.610

自定义类加载器在由多个模块/应用程序组成的大型架构中很有用。以下是自定义类加载器的优点：

*   **提供模块化架构**允许定义多个允许模块化架构的类加载器。
*   **避免冲突**在类加载器中明确定义类的范围。
*   **支持版本控制**支持同一 VM 中不同模块的不同版本的类。
*   **更好的内存管理**可以删除未使用的模块，从而卸载该模块使用的类，从而清理内存。
*   **从任何地方加载类**类可以从任何地方加载，**例如数据库、网络，甚至可以动态定义它**。
*   **动态添加资源或类**以上所有功能都允许您动态添加类或资源。
*   **Runtime Reloading Modified Classes** 允许您通过将子类加载器创建到包含修改后的类的实际类加载器来重新加载一个或多个类运行时。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-31T07:13:21.137

主要用途是在应用程序服务器中，以便它们可以运行两个应用程序而不会发生类冲突。即，如果应用程序 1 有一个与应用程序 2 同名的类，则使用自定义类加载器，应用程序 1 将加载其类，应用程序 2 将加载其类。

此外，如果一个类由自定义类加载器加载，则可以从 JVM 中卸载该类。在应用程序服务器中再次有用。

另一种用途是检测 - 一种进行面向方面编程或使用某些持久性 API 的方法。使用自定义类加载器，您可以在加载的类被传递给正在运行的应用程序之前向它们添加行为。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T07:50:26.627

Java 类加载器的功能与顾名思义差不多：将类加载到内存中以便它们可以使用。

类也与加载它们的 ClassLoader 链接。

自定义类加载器因此开辟了各种有趣的可能性：

*   使用不同的类加载器加载同一类的多个版本（例如，解决可能的版本控制冲突）
*   在运行时动态加载和卸载类
*   生成新的类（例如，像 Clojure 这样的 JVM 语言使用各种类加载技巧来生成新的编译类以在运行时表示 Clojure 函数）
*   从非标准源加载类

普通的 Java 应用程序通常不需要担心类加载器。但是，如果您正在编写一个需要托管其他代码的框架或平台，那么它们就会变得更加重要/相关。

# iphone - 从 facebook API 获取birth_day=Null

> ID：10828865
> 
> 赞同：1
> 
> 时间：2012-05-31T07:02:49.127
> 
> 标签：iphone, ios

```
NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                @"select uid,name,birthday_date from user where uid in (select uid2 from friend where uid1=me())", @"query",
                                nil];
[[StaticFacebook getFacebook] requestWithMethodName: @"fql.query" 
                       andParams: params
                   andHttpMethod: @"POST" 
                     andDelegate: self] 
```

;

我正在使用上面的代码来获取朋友信息.....但问题是我得到了`birth_day="null"` 请给我建议解决方案......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:50:28.860

确保您已请求适当的访问权限来检索生日字段。

`user_birthday - Provides access to the birthday with year as the birthday property`

参考：[https ://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:29:11.607

像这样访问生日权限..

```
[facebookObj authorize:App_ID permissions:[NSArray arrayWithObjects:@"offline_access",@"publish_stream",@"user_birthday",@"user_events",@"read_stream",@"friends_likes", nil] delegate:self]; 
```

# web-services - asp.net (asmx) web 服务在 windows phone 7 中不起作用

> ID：10828867
> 
> 赞同：0
> 
> 时间：2012-05-31T07:02:54.083
> 
> 标签：web-services, windows-phone-7

我正在开发一个 wp7 应用程序，它使用一个用 asp.net 编写的简单 Web 服务

Web 服务在桌面应用程序（用 C# 编写）中运行良好（也在 Web 浏览器中测试并且运行良好），但在 wp7 中无法运行。

以下是我在 wp7 中用来调用 web 服务的代码

```
BookService.BooklocationSoapClient client = new BookService.BooklocationSoapClient();
client.BookListCompleted += new EventHandler<BookService.BookListCompletedEventArgs>(client_BookListCompleted);
client.BookListAsync(dId);

void client_BookListCompleted(object sender, BookService.BookListCompletedEventArgs e)
{
       Debug.WriteLine(e.Result);
} 
```

以下是我得到的例外

```
A first chance exception of type 'System.IO.FileNotFoundException' occurred in mscorlib.dll
A first chance exception of type 'System.Net.WebException' occurred in System.Windows.dll
A first chance exception of type 'System.Net.WebException' occurred in System.Windows.dll
A first chance exception of type 'System.ServiceModel.FaultException' occurred in System.ServiceModel.dll
A first chance exception of type 'System.ServiceModel.FaultException' occurred in System.ServiceModel.dll 
```

另外，我收到以下消息

```
Server was unable to process request. ---> Length cannot be less than zero.
Parameter name: length 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T15:03:12.630

好像您尝试在您的开发人员机器上调用本地 Web 服务，这是 Windows Phone 模拟器不允许的。尝试调用互联网上可用的任何公共网络服务，例如天气预报

# java - 如何从 LinkedHashSet 中获取单个值 有大小（n，3）

> ID：10828883
> 
> 赞同：0
> 
> 时间：2012-05-31T07:03:52.990
> 
> 标签：java

`[[58, 89, -50], [58, 50, -89], [89, 50, -58], [-51, -35, 75], [-51, -75, 35], [-35, -75,` `51], [-83, -60, -97], [-83, 97, 60], [-60, 97, 83], [null]]`

在上面的例子中，`LinkedHashSet<Integer> [size<N><3>]`有 N 号。整数对象，每个对象包含 3 个原始 int 值。我想在三个不同的 int 类型列表中访问它，以便我得到

```
list1[1] : {58,58,89,-51,.......}
list2[1] : {89,50,50,-35,.......}
list3[1] : {-50,-89,-58,75.......} 
```

正如我在 C 语言中所做的那样，让 P 指向我们访问的第一个节点

```
struct Node *P=Start;
int i=0;
while(P!=NULL){
int a[i]=P->data1;
int b[i]=P->data2;
int c[i]=P->data3;
i++;} 
```

在 Java 中会怎样。请帮助我。谢谢！Ashish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:55:07.087

您可以实现 3 个不同的 Lists 。最简单的方法就是编写一个覆盖 `java.util.AbstractList<E>` [http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html)的类并从 3 元素列表中选择一个元素。

这是您的解决方案：

```
import java.util.ArrayList;

public class DemuxList extends java.util.AbstractList<Integer>{

    ArrayList<Integer[]> listToDemux;
    int listIndex;

    DemuxList(ArrayList<Integer[]> listToDemux, int listIndex) {
        this.listToDemux = listToDemux;
        this.listIndex = listIndex;
    }

    @Override
    public Integer get(int index)
    {
        Integer[] el = listToDemux.get(index);
        if (el != null) {
            return el[listIndex];
        } else {
            return null;
        }        
    }

    @Override
    public int size()
    {
        return listToDemux.size();
    }
} 
```

你可以这样使用它：

```
ArrayList<Integer[]> fullList = new ArrayList<Integer[]>();
DemuxList l0 = new DemuxList(fullList, 0);
DemuxList l1 = new DemuxList(fullList, 1);
DemuxList l2 = new DemuxList(fullList, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:12:12.690

我解决了这个问题，代码如下。鉴于

```
LinkedHashSet<Set<Integer>> r;
i=0
for(<Set<Integer>> set:r)
    ar[i++]=s.toArray(new Integer[3]); 
```

其中 ar 是一个大小为 3 的二维数组，`[r.length][3]`因为 r 中的内部集合的大小为 3。

# java - 定制的 Maven 可部署（删除了一些依赖项的战争）

> ID：10828885
> 
> 赞同：1
> 
> 时间：2012-05-31T07:04:07.367
> 
> 标签：java, maven, deployment, maven-2

我有一个使用 Maven 构建的多模块 Web 应用程序。我们按照正常方式构建战争，并使用 tomcat 在开发人员机器和本地测试服务器上部署和运行。

然后我们要将应用程序部署到云端。为此，我们创建了一个特殊版本的 tomcat，它预先加载了所有库，以及一个只有我们的代码的特殊版本的 war。这里的重点是tomcat是在云服务器上预加载的，每次更改都会上传war。目前，我们不得不从构建的战争中手动删除依赖项。

Maven 做到这一点的最佳方法是什么？我应该构建自定义包装类型还是运行一些构建后插件来消除这些战争？或者是其他东西？我认为激活此自定义构建的最佳方式是通过配置文件。我确实尝试通过将它们设置`scope = provided`为新配置文件来删除这些依赖项，但传递依赖项仍然进入了战争。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:26:43.003

您可以在 Maven 中使用配置文件来实现。正如你所说的它不起作用，我可以认为你配置错误。尝试类似：

```
 <profiles>
    <profile>
      <id>dev</id>
      <activation>
        <!-- active by default, turn off when on prod -->
        <activeByDefault>true</activeByDefault>
      </activation>
      <dependencies>
        <!-- include this in dev, not in prod -->
        <dependency>
          <groupId>com.company</groupId>
          <artifactId>xyz</artifactId>
        </dependency>
      </dependencies>
    </profile>
  </profiles> 
```

然后在命令行中，`mvn package -P !dev`停用`dev`配置文件以便不包含罐子。

确保`com.company:xzy`不包含在`<project><dependencies></dependencies></project>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:39:40.973

如果要排除*所有*依赖项，可以使用 war 插件`packagingExcludes`来执行此操作：

```
 <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.2</version>
        <configuration>
            <packagingExcludes>WEB-INF/lib/*.jar</packagingExcludes>
            ...
        </configuration>
    </plugin> 
```

在配置文件中指定此插件以仅在生产中执行它。

# c++ - 从 MFC CImage 到 Opencv IPlImage 的转换

> ID：10828896
> 
> 赞同：0
> 
> 时间：2012-05-31T07:05:03.230
> 
> 标签：c++, user-interface, opencv, mfc

我有一个使用 opencv 的相机应用程序，而我正在使用 MFC GUI。我需要将 CImage 转换为 IplImage 以供 Opencv 模块进行图像处理，并将其转换回 CImage 以便再次在窗口中显示。

我研究了这个主题，但没有足够的例子和解决方案。任何人有一些建议。谢谢

这是我的代码...

```
void CChildView::OnFileOpenimage(void)
{
    // TODO: Add your command handler code here
    CString strFilter;
    CSimpleArray<GUID> aguidFileTypes;
    HRESULT hResult;
hResult = imgOriginal.GetExporterFilterString(strFilter,aguidFileTypes);
if (FAILED(hResult)) {
    CString fmt;
    fmt.Format("GetExporterFilter failed:\n%x - %s", hResult, _com_error(hResult).ErrorMessage());
    ::AfxMessageBox(fmt);
    return;
}

CFileDialog dlg(TRUE, NULL, NULL, OFN_FILEMUSTEXIST, strFilter);
dlg.m_ofn.nFilterIndex = m_nFilterLoad;
hResult = (int)dlg.DoModal();
if(FAILED(hResult)) {
    return;
}

m_nFilterLoad = dlg.m_ofn.nFilterIndex;
imgOriginal.Destroy();
CString pathval =  dlg.GetPathName();
hResult = imgOriginal.Load(dlg.GetPathName());
if (FAILED(hResult)) {
    CString fmt;
    fmt.Format("Load image failed:\n%x - %s", hResult, _com_error(hResult).ErrorMessage());
    ::AfxMessageBox(fmt);
    return;
}
// IplImage *img from  imgOriginal; want to convert here for further processing.

m_nImageSize = SIZE_ORIGINAL;
Invalidate();
UpdateWindow();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:26:41.987

我自己有这个问题很长一段时间。[我在这里](http://tech.groups.yahoo.com/group/OpenCV/message/33709)找到了这段代码，我最终使用它效果很好。而不是研究“CImage to IplImage”，您应该搜索“HBITMAP to IplImage”

```
IplImage* hBitmap2Ipl(HBITMAP hBmp, bool flip)
{
    BITMAP bmp;
    ::GetObject(hBmp,sizeof(BITMAP),&bmp);

    int    nChannels = bmp.bmBitsPixel == 1 ? 1 : bmp.bmBitsPixel/8;
    int    depth     = bmp.bmBitsPixel == 1 ? IPL_DEPTH_1U : IPL_DEPTH_8U;

    IplImage *img=cvCreateImageHeader(cvSize(bmp.bmWidth, bmp.bmHeight), depth, nChannels);

    img->imageData = (char*)malloc(bmp.bmHeight*bmp.bmWidth*nChannels*sizeof(char));
    memcpy(img->imageData,(char*)(bmp.bmBits),bmp.bmHeight*bmp.bmWidth*nChannels);
    return img; 
```

}

用法：

```
ATL::CImage image;
//whatever code you use to generate the image goes here
IplImage *convertedImage=hBitmap2Ipl(image.Detach());
image.Destroy(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T00:05:56.253

找了半夜的复制粘贴内存泄露，终于找到了！

所以这是原始答案的**更新**代码片段。对我来说重要的是使用*cvCreateImage*而不是*cvCreateImageHeader*因为在调用*hBitmap2IplImage*之后我确实使用了*cvReleaseImage*。在我的情况下，翻转也是必要的。干杯!

 *```
IplImage* hBitmap2IplImage(HBITMAP hBmp, bool flip)
{
    BITMAP bmp;
    ::GetObject(hBmp,sizeof(BITMAP),&bmp);

    int    nChannels = bmp.bmBitsPixel == 1 ? 1 : bmp.bmBitsPixel/8;
    int    depth     = bmp.bmBitsPixel == 1 ? IPL_DEPTH_1U : IPL_DEPTH_8U;

    IplImage *img=cvCreateImage(cvSize(bmp.bmWidth, bmp.bmHeight), depth, nChannels);

    size_t imgSize = bmp.bmHeight*bmp.bmWidth*nChannels;
    memcpy_s(img->imageData, imgSize, (char*)(bmp.bmBits), imgSize);
    if (flip)
        cvFlip(img, NULL, 0);

    return img;
} 
```

用法：

```
ATL::CImage image;
HBITMAP hBitmap = image.Detach(); // some handle to your bitmap
bool flip = true;
IplImage* pSomeIplImage = hBitmap2IplImage(hBitmap, flip);
image.Destroy();
//
// use "pSomeIplImage"
//
cvReleaseImage( &pSomeIplImage ); // don't forget 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-30T10:22:45.573

如果位图图像在视图上，您​​可以使用设备上下文（CDC dcBuffer）来复制它。

```
IplImage *pCapture = cvCreateImage(cvSize(U16_IMAGE_WIDTH/2,U16_IMAGE_HEIGHT/2),8, 3);

::GetDIBits(dcBuffer.GetSafeHdc(), bitmapBuffer, 0, U16_IMAGE_HEIGHT/2, pCapture->imageData, &bitmapInfo, DIB_RGB_COLORS);

cvSaveImage("temp.bmp", pCapture);

cvReleaseImage(&pCapture); 
```*

# c# - 在 mvc 中创建视图

> ID：10828900
> 
> 赞同：2
> 
> 时间：2012-05-31T07:05:22.633
> 
> 标签：c#, asp.net, asp.net-mvc-3

我想通过 c#`View`以`MVC`编程方式创建并希望将它放在`View folder`我的`MVC project`. 如果这是可能的，那么请告诉我如何实现这样的逻辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:24:03.650

您可以实现 IView 接口并构建自己的视图：

```
public class HomeController : Controller
{
    public class MyCustomView : IView
    {
        public void Render(ViewContext viewContext, System.IO.TextWriter writer)
        {
            writer.WriteLine("view's content");
        }
    }

    public ActionResult Index()
    {
        return View(new MyCustomView());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:16:57.463

我认为可以只编写文件并以编程方式将其保存在视图文件夹中（假设授予了写权限）。但是您还需要一个传递视图名称的操作：

```
public ActionResult ShowProgramaticView(string nameOfTheView){
    return this.View(nameOfTheView);
} 
```

根据您的结构，您可以将文件写入此控制器的共享文件夹或子文件夹。

# android-layout - 自定义对话框 EditText 返回 null

> ID：10828901
> 
> 赞同：0
> 
> 时间：2012-05-31T07:05:24.747
> 
> 标签：android-layout, android-edittext, android-dialog

很多人都面临过类似的问题，我想我已经关注并修复了 stackoverflow 上所有这些帖子中提到的所有问题。

*   setContentView 到我的布局
*   使用 dialog.findViewById 初始化 edittext

但我仍然停留在空指针上。我错过了什么？

布局名称是 serverchange.xml。serverchange.xml 的内容是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/server"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="textUri" />

<TextView
    android:id="@+id/status"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:editable="true" />

</LinearLayout> 
```

通过在选项菜单上选择一个菜单来创建对话框。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.serverChange:
        showDialog(SERVER_CHANGE);
        // newGame();
        return true;
    }
} 
```

我得到一个 NullPointerException

```
if (changeServerView == null) throw new NullPointerException() ; 
```

代码：

```
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case SERVER_CHANGE:
        serverChangeDialog = new Dialog(this);
        serverChangeDialog.setContentView(R.layout.serverchange);
        serverChangeDialog.setTitle("Change Server");
        serverChangeDialog.setOnKeyListener(this);
        serverChangeDialog.show();
        changeServerView = (EditText) serverChangeDialog.findViewById(R.id.serverChange);
        status = (TextView) serverChangeDialog.findViewById(R.id.status);
        if (changeServerView == null) throw new NullPointerException() ;
    }
    return null;
} 
```

我的 onKey 实现

```
@Override
public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
    if (dialog == serverChangeDialog) {
        if (keyCode == KeyEvent.KEYCODE_ENTER) {
            String backupServer = server;
            server = changeServerView.getText().toString(); 
```

这里我也得到一个 NullPointerException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:08:18.857

来自 xml 文件的错误 id 引用，

使用`server` **代替** `serverChange`

```
changeServerView = (EditText) serverChangeDialog.findViewById(R.id.server);
                                                                   ^^^^^^ 
```

# location - windows phone 地图控件显示所有位置（缩放以包括所有图钉）

> ID：10828906
> 
> 赞同：1
> 
> 时间：2012-05-31T07:05:48.877
> 
> 标签：location, zooming, windows-phone, bing

我试过使用 map.SetView(LocationRect.CreateLocationRect(locations));

但问题是我还需要显示所有图钉。使用上述方法只考虑位置。一些图钉被裁剪，尤其是角落的图钉。

有一个更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:36:51.453

```
You can increase the zoom level of map so that pushpins will be visible...
try this.
map1.ZoomLevel = 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:50:52.213

`LocationRect.CreateLocationRect(locations)`为您提供位置的绑定框，因此您可以在将其传递给`SetView`

# html - CSS3 动画 - 在每个循环中停止

> ID：10828908
> 
> 赞同：1
> 
> 时间：2012-05-31T07:06:03.693
> 
> 标签：html, css

我试图理解 CSS3 动画。我举了一个例子： [morphing-cubes](http://www.webkit.org/blog-files/3d-transforms/morphing-cubes.html)

在这种无限循环的情况下，我想在每次循环后停止一秒钟。（在环模型中）。当我使用延迟时，它会在动画开始时停止。如何在每个循环开始时延迟？

我使用了缓出选项，它给人一种停止的感觉，但立即开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:04:48.053

不确定您是否需要在这里延迟；不要使用关键字值“from”和“to”，而是使用百分比（以毫秒为单位）；我拿了那个演示并实现了这个；idk，如果它正是你想象的那样，但它在每次旋转后都会停止。您可以在限制中添加更多/更少的百分比，以获得所需的效果：

[http://jsfiddle.net/jalbertbowdenii/MLfyv/](http://jsfiddle.net/jalbertbowdenii/MLfyv/)

# php - 如何通过ajax将数组传递给php文件？

> ID：10828911
> 
> 赞同：-3
> 
> 时间：2012-05-31T07:06:14.257
> 
> 标签：php, ajax, json, jquery

我有一个表单，可以将某些项目的 id 传递给`ajax` ，我需要使用更新后的数据更新这些数组的所有行。我必须用它`ajax`来完成这个。id 是通过 mysql 查询生成的，我将它传递给一个数组。所以它已经是一个数组，我如何更改为 javascript-processable（如果这是一个单词）数据并将其更改回 php 数组。这是我的代码这是如何制作数组

```
foreach($items as $item){
    $item_arr[]=$item['id']
} 
```

我将数组传递给输入字段以获取 ajax

```
<input type="hidden" id="myid" value="<?php echo json_encode($item_arr); ?>"/> 
```

和

```
 $myid=$("#myid").val();
    $.ajax({
    url:"myurl.php",
    data:{myid:myid},
}) 
```

这是返回我不知道是什么！！请帮助这是我第一次尝试这种数组转换..请多多包涵

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:20:48.373

如果“myid”字段中的数据已经是 json 字符串，直接通过 ajax 传递即可，使用：

```
var myid=$("#myid").val();
$.ajax({
    url:"myurl.php",
    data:myid
}); 
```

# c - 如何在 MS Visual Studio 中使用 SSE 内在函数？

> ID：10828915
> 
> 赞同：0
> 
> 时间：2012-05-31T07:06:32.007
> 
> 标签：c, visual-studio-2005, sse, inline-assembly, intrinsics

我正在尝试使用 SSE2 指令制作一些优化的代码。目前，我用内联汇编编写它，如下所示：

```
...
__m128 zero = {0};
__asm {
    ...
LINE_LOOP_1:
    MOVQ        xmm0, QWORD PTR [eax]    ; no problem
    PUNPCKLBW   xmm0, zero               ; PROBLEM IS HERE
    ...
    LOOP        LINE_LOOP_1
} 
```

它工作得很好，但我想用内在函数重写它，这样更容易改变（我有稍微不同的计算版本，我想优化）。

但是，我无法弄清楚要使用哪些内在函数。我找到的任何文档都列出了大约一半的 SSE2 指令，看起来另一半不能作为内在函数使用！MS 似乎不太可能中途放弃 SSE 的实施。

那么，我可以使用哪个内在函数来生成`PUNPCKLBW`指令？

我使用 MS Visual Studio 2005。

PS 一些 MSDN[文档](http://msdn.microsoft.com/en-us/library/8z56xtyh%28v=vs.71%29.aspx)建议使用`_mm_unpacklo_pi8`，但它不起作用：

```
#include "xmmintrin.h"

int main()
{
    __m128 x = {0}, y = {0};
    x = _mm_unpacklo_pi8(x, y);
} 
```

这会产生编译错误：

> 错误 C2664：“_m_punpcklbw”：无法将参数 1 从“_m128”转换*为“* _m64”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:43:34.960

你必须使用`_mm_unpacklo_epi8` [see here](http://msdn.microsoft.com/en-US/library/xf7k860c%28v=vs.80%29)。

后缀内部`epi`函数用于 SSE 寄存器，`pi`用于 MMX 寄存器。

# java - 使用哪个免费的 LDAP 服务器？

> ID：10828917
> 
> 赞同：8
> 
> 时间：2012-05-31T07:06:33.880
> 
> 标签：java, apache, ldap

我正在尝试构建一个将在 Apache Tomcat 7.0 上使用 LDAP 服务器的 Web 应用程序。浏览互联网，我没有找到足够的文章来证明为什么使用一台服务器而不是另一台服务器。

因此，我求助于这里有经验的人，他们对不止一台 LDAP 服务器有足够的经验。

我的要求是：免费、易于安装和使用（良好的 gui）和足够的 API，以便我能够从基于 java 的应用程序中插入用户、组、执行查找等。它还应该提供良好的安全性。

预先感谢您的关注

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T07:30:48.557

我会推荐使用[openLDAP](http://www.openldap.org/)作为服务器，[UnboundID](http://www.unboundid.com/products/ldap-sdk/)作为 LDAP SDK，[JXPlorer](http://jxplorer.org/)或[ApacheDirectoryStuido](http://directory.apache.org/studio/)作为对 ldap 的 GUI 控制——这可能涵盖了您的所有要求。

以上所有软件都是免费的：

*   如果不计算 ActiveDirectory，openLDAP 可能是广泛使用的 LDAP 服务器。它有据可查，很容易得到支持。

*   UnboundID 库是我所体验过的最好的库，而且在我看来——目前最友好、功能最丰富的 LDAP 库。查看此[功能比较矩阵](http://www.unboundid.com/products/ldap-sdk/docs/advantages/comparison.php)。

*   UI 工具的复杂性不同 - JXplorer 是更简单的工具。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T07:32:07.320

周围有很多 LDAP 服务器。我正在使用[OpenDJ](http://www.forgerock.com/opendj.html)，它是在较旧的[OpenDS](http://opends.java.net/)上开发的，我从来没有遇到过这两个问题。

如果您喜欢 Apache，您可以使用[Apache Directory](http://directory.apache.org/)，但其中最著名的可能是[OpenLDAP](http://www.openldap.org/)。

关于`API`使用 Java 访问目录，这不是要在特定 LDAP 服务器实现中寻找的功能，因为它是 Java SDK 中的标准：魔术词是`JNDI`：

> JNDI 对 LDAP 的作用类似于 JDBC 对 Oracle 的作用——它提供了一个标准 API，用于使用类似于 JDBC 驱动程序的服务提供者接口 (SPI) 与命名和目录服务进行交互

（来源：[LDAP 和 JNDI：永远在一起](http://www.javaworld.com/javaworld/jw-03-2000/jw-0324-ldap.html)，我建议查看这个优秀的教程）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T12:35:55.223

在 Windows 环境中，您还可以考虑使用[轻量级目录服务](http://technet.microsoft.com/en-us/library/cc754361%28v=ws.10%29.aspx)，这是一个小型且免费（如啤酒）的 LDAP 服务器。

**优点：**

1.  安装非常简单
2.  开箱即用的多主复制
3.  它可以将身份验证请求链接到 Active Directory，使用 userProxy 或 userProxyFull 对象类。
4.  管理员帐户可以是 Windows 域帐户

**缺点：**

1.  准备好自己实施密码策略。它依赖于有效的机器密码策略，在生产环境中，管理员可能比用户更严格。
2.  将基础结构的这一部分与 Windows 联系起来。

# php - PHP 表单条件语句

> ID：10828918
> 
> 赞同：1
> 
> 时间：2012-05-31T07:06:34.080
> 
> 标签：php, forms, contact

我有一个包含现有验证码的联系表。我创建了表单并在其中结合了上传功能。问题是当我尝试在没有验证码的情况下提交表单时，它不会显示 js 警报或无效的验证码警报，但是当我尝试附加图像然后在没有验证码的情况下提交表单时，它被提交了.. 代码现在一团糟. 任何人都可以检查条件语句，看看你能不能帮我解决这个问题？我不擅长 php。

这是我的mail.php

```
 <?php
if($_SESSION["captcha"] == $_POST["captcha"]) {

  //if($_SESSION["captcha"] == $_POST["captcha"]) {

   // we'll begin by assigning the To address and message subject
   $to="myemail@gmail.com";

   $subject="E-mail with attachment";

   // get the sender's name and email address
   // we'll just plug them a variable to be used later
   $from = stripslashes($_POST['fromname'])."<".stripslashes($_POST['fromemail']).">";

   // generate a random string to be used as the boundary marker
   $mime_boundary="==Multipart_Boundary_x".md5(mt_rand())."x";

   // store the file information to variables for easier access
   $tmp_name = $_FILES['filename']['tmp_name'];
   $type = $_FILES['filename']['type'];

   $size = $_FILES['filename']['size'];

   // here we'll hard code a text message
   // again, in reality, you'll normally get this from the form submission
   $message = 'Message from '.$_REQUEST['name'].'

    Full Name: '.$_REQUEST['name'].'
    Address: '.$_REQUEST['address'].'
    Contact Number: '.$_REQUEST['contact'].'
    Email: '.$_REQUEST['email'].'
    How do you come to know about us: '.$_REQUEST['type'].'
    Car Make: '.$_REQUEST['make'].'
    Car Model: '.$_REQUEST['model'].'
    Year: '.$_REQUEST['year'].'
    Registration: '.$_REQUEST['registration'].'
    Comment: '.$_REQUEST['comments'].'
   ';

   // if the upload succeded, the file will exist
   if (file_exists($tmp_name)){

      // check to make sure that it is an uploaded file and not a system file
      if(is_uploaded_file($tmp_name)){

         // open the file for a binary read
         $file = fopen($tmp_name,'rb');

         // read the file content into a variable
         $data = fread($file,filesize($tmp_name));

         // close the file
         fclose($file);

         // now we encode it and split it into acceptable length lines
         $data = chunk_split(base64_encode($data));
     }

      // now we'll build the message headers
      $headers = "From: $from\r\n" .
         "MIME-Version: 1.0\r\n" .
         "Content-Type: multipart/mixed;\r\n" .
         " boundary=\"{$mime_boundary}\"";

      // next, we'll build the message body
      // note that we insert two dashes in front of the
      // MIME boundary when we use it
      $message = "This is a multi-part message in MIME format.\n\n" .
         "--{$mime_boundary}\n" .
         "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
         "Content-Transfer-Encoding: 7bit\n\n" .
         $message . "\n\n";

      // now we'll insert a boundary to indicate we're starting the attachment
      // we have to specify the content type, file name, and disposition as
      // an attachment, then add the file content and set another boundary to
      // indicate that the end of the file has been reached
      $message .= "--{$mime_boundary}\n" .
         "Content-Type: {$type};\n" .
         " name=\"{$name}\"\n" .
         //"Content-Disposition: attachment;\n" .
         //" filename=\"{$fileatt_name}\"\n" .
         "Content-Transfer-Encoding: base64\n\n" .
         $data . "\n\n" .
         "--{$mime_boundary}--\n";

      // now we just send the message
      if (@mail($to, $subject, $message, $headers)){
        echo "<script>alert('Your details has been Sent Successfully, we shall revert back to you shortly!!!');</script>";
        echo "<script>window.location.href='index.php';</script>";
      } else {
         echo "<script>alert('Sending Failed');</script>";
         echo "<script>window.location.href='index.php';</script>";
   } }
} else {
    echo "<script>window.location.href='index.php?cap=invalid';</script>";
}
?> 
```

这是表格：

```
 <div class="quote-wrap left">
<form name="quoteForm" enctype="multipart/form-data" method="post" action="mail.php" onsubmit="return validateQuoteForm();">
<div class="quote-table left liquid-size">
<table width="100%">
    <tr>
        <td colspan="2" align="center" valign="middle" style="padding-bottom:0px;"><?php $qerror ?></td>
    </tr>                                               
    <tr>
        <td colspan="2" align="center" valign="middle" style="padding-bottom:0px; color:#FF0000;"><h3><?php $captcha_stat?></h3></td>
    </tr>
    <tr>
        <td valign="middle" align="left">
        <input type="text" name="make" placeholder="Make:" class="input-field" value="$make" />
        <span class="required">*</span> 
        </td>
    </tr>
        <tr>
        <td valign="middle" align="left">
        <input type="text" name="model" placeholder="Model:" class="input-field" value="$model" /><span class="required">*</span></td>
    </tr>
    <tr>
        <td valign="middle" align="left">
        <input type="text" name="year" placeholder="Year:" class="input-field" value="$year"/>
        <span class="required">*</span>                                                  
    </td>
    </tr>
        <tr>
        <td valign="middle" align="left">
        <input type="text" name="registration" placeholder="Registration:" class="input-field" value="$registration" /><span class="required">*</span></td>
    </tr>
</table>
</div>

<div class="quote-table left liquid-size">
<table width="100%">
    <tr>
        <td valign="middle" align="left">
        <input type="text" name="address" placeholder="Full Address:" class="input-field" value="$address" /><span class="required">*</span></td>
    </tr>
    <tr>
        <td valign="middle" align="left">
        <input type="text" name="name" placeholder="Name:" class="input-field"  value="$name"/><span class="required">*</span></td>
    </tr>
    <tr>
        <td valign="middle" align="left">
        <input type="text" name="contact" placeholder="Contact No:" class="input-field"  value="$contact"/><span class="required">*</span></td>
    </tr>
    <tr>
        <td valign="middle" align="left">
        <input type="text" name="email" placeholder="Email:" class="input-field" value="$email" /><span class="required">*</span></td>
    </tr>                                           
    <tr>
        <td valign="middle" align="left">How do you come to know about Us?</td>
    </tr>
    <tr>
        <td valign="middle" align="left">
        <select class="quotable-select" name="type">
        <option value="Google search">Google search</option>
        <option value="Yahoo search">Yahoo search</option>
        <option value="Bing search">Bing search</option>
        <option value="Hotfrog">Hotfrog</option>
        <option value="Local Newspaper">Local Newspaper</option>
        <option value="Magazine">Magazine</option>
        <option value="Returning Customer">Returning Customer</option>
        <option value="Heard about us">Heard about us</option>
        <option value="Saw us on the road">Saw us on the road</option>                                      
        <option value="Referral">Referral</option>
        <option value="Facebook">Facebook</option>
        <option value="Trademe">Trademe</option>
        <option value="Yellow Online">Yellow Online</option>
        </select>
        </td>
    </tr>
</table>
</div>

<table width="100%">
    <tr>
        <td colspan="2" align="left" class="required" valign="middle">
        <span class="required">Note: Image must not be greater than 1MB.</span>
        </td>
    </tr>
    <tr>
        <td valign="middle" align="left" wid>
            Attach Photos:&nbsp;&nbsp; 
            <input type="file" id="fileupload" name="filename" border="0" />  
        </td>
    </tr>
        <tr>
            <td valign="middle" align="left">
            <textarea class="quote-txtarea" placeholder="Comments:" name="comments" rows="3" cols="22">$comments</textarea>   
        </td>
    </tr>                                               
    <tr>                                                    
        <td valign="top" >
            <img src="captcha.php" name="captcha" id="captcha" style="padding: 0px;  margin: 0 0 -4px;" />
            <input class="input" type="text" name="captcha" style="width:100px; height: 20px; padding: 0px;" />
            <input type="submit" name="submit_quote" class="submit" value="Submit" />
        </td>
    </tr>
</table>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:13:19.203

您的最后`echo`一行有语法错误，请记住以分号结束该行。您没有提供太多信息来说明您的意思是不验证 - 所以我只是在这里猜测 - 但您正在使用`@mail`. 该`@`符号将抑制错误。

因此，请尝试删除该`@`符号以查看是否有更多描述性错误，并通过在开头附近添加以下行来打开错误报告：

```
error_reporting(E_ALL); 
```

此外，您不会一直看到错误，因为您没有涵盖所有可能的情况。这是您的代码的简化：

```
 <?php
    if($_SESSION["captcha"] == $_POST["captcha"]) {
        if (file_exists($tmp_name)){
            if (@mail($to, $subject, $message, $headers)){
                // Success
            } else {
                // Send failed
            } 
        } // <-- Add an else clause here!
    } else {
        // Invalid
    }
?> 
```

`file_exists`所以如果返回 false，你什么都不做。添加返回消息的 else 子句：

# forms - Spring Form Bean 名称顺序的 BindingResult 和普通目标对象均不可用

> ID：10828919
> 
> 赞同：0
> 
> 时间：2012-05-31T07:06:35.270
> 
> 标签：forms, spring

我创建了一个这样的 Spring 表单：

索引.jsp

```
<a href="/Spring_MVC/order.jsp">Order</a> 
```

订单.jsp

```
<form:form action="createOrder" method="Post" modelAttribute="order">
        <table>
            <tr>
                <th>
                    Order ID:
                </th>
                <td>
                    <form:input path="order.orderId"/>
                </td>
            </tr>

            <tr>
                <th>
                    Product Name: 
                </th>
                <td>
                    <form:input path="order.productName"/>
                </td>
            </tr>

            <tr>
                <td>
                    <input type="submit" value="Submit"/>
                </td>
            </tr> 

        </table>
    </form:form> 
```

订单.java：

```
public class Order {

    private String orderId;
    private String productName;

    /**
     * 
     */
    public Order() {

    }

    public Order(String orderId, String productName) {
        super();
        this.orderId = orderId;
        this.productName = productName;
    }

    public String getOrderId() {
        return orderId;
    }

    public void setOrderId(String orderId) {
        this.orderId = orderId;
    }

    public String getProductName() {
        return productName;
    }

    public void setProductName(String productName) {
        this.productName = productName;
    }
} 
```

订单控制器.java：

```
@Controller
public class OrderController {

    private static final Logger logger = Logger.getLogger(LoginController.class.getName());

    /**
     * 
     */
    public OrderController() {
        super();
    }

    @RequestMapping(value = "/createOrder", method=RequestMethod.POST)
    public String createOrder(@ModelAttribute("order")Order order, BindingResult result) {
        logger.log(Level.INFO, "Order ID: " + order.getOrderId());
        logger.log(Level.INFO, "Product Name: " + order.getProductName());

        // Implementation validator

        // Data Binding the form properties to Order field
        if (result.hasErrors()) {
            logger.log(Level.INFO, "Error in Binding Result");
        }

        return "/order";
    }
} 
```

对于可用的 bean 名称顺序，我得到了既没有 BindingResult 也没有普通目标对象。我是否需要使用 GET 创建一个 bean 名称顺序并在 POST 回服务器之前先传递到网络。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:14:49.980

问题出在您的 JSP 页面中。

您在输入标签的路径属性中错误地使用了字段名称。

它应该是这样的。

```
 <form:input path="orderId"/> 
```

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:13:45.473

根据[参考](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/view.html#view-jsp-formtaglib-formtag)，标签`path`内的属性`input`不应包含模型属性名称`order`；例如：

```
<form:input path="orderId" /> 
```

# javascript - 为什么我不能将函数传递给 Function 构造函数？

> ID：10828920
> 
> 赞同：0
> 
> 时间：2012-05-31T07:06:40.370
> 
> 标签：javascript

JavaScript 有一个`Function`构造函数，它产生一个匿名函数：

```
new Function() 
```

将函数作为参数传递给 时`Function`，出现语法错误：

```
new Function(function(){}) 
```

生产

> SyntaxError：意外的令牌（

但是，当我传递一个数字时，一切都很好：

```
new Function(10) 
```

为什么将函数传递给时会出现语法错误`Function`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:10:43.473

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function)

考虑到除了最后一个参数之外的所有参数都是参数名称，我不希望字符串以外的任何东西都可以工作。

我想语法错误是因为您在内部使用的 JS 引擎尝试将函数转换为字符串的方式。我真的很惊讶它没有在 10 上窒息。

另外，我怀疑你这样做只是出于好奇，但如果你不是，我建议你不要`Function`在你可以控制的代码中使用。没有真正的理由使用 Function ，除非您需要在运行时获取一个字符串并从中创建一个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T07:10:53.293

因为 Function 构造函数需要 String 参数并将最后一个作为函数体，所以期望它是有效的 javascript。当它尝试将匿名函数参数评估为字符串时，它会失败，因为该匿名函数的字符串表示形式不是有效的 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:12:28.437

我不知道那个错误，但你可以尝试这样的事情：

```
var func = function(){};
new Function(func) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T07:32:25.253

我建议使用：

```
new Function(func) 
```

代替

```
new Function(func(){}) 
```

您必须将 func 定义为单独的函数。以下示例演示：

```
<html>
<script>
function init(func)
{
    func();
}
function greet()
{
    alert("good morning!");
}
</script>
<body onLoad="init(greet);">
<body>
</html> 
```

# wpf - 当用户在其外部单击时如何关闭 WPF 对话框窗口

> ID：10828921
> 
> 赞同：15
> 
> 时间：2012-05-31T07:06:47.310
> 
> 标签：wpf

如果用户单击它之外的任何位置，我想关闭 System.Windows.Window。窗口显示为对话框。如何在 wpf 窗口外接收点击？

```
AppointmentDetailsView.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-28T21:52:57.740

这个怎么样？

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    protected override void OnDeactivated(EventArgs e)
    {
        base.OnDeactivated(e);
        Close();
    }
} 
```

# flash - Flash 没有光标改变 onRollOver

> ID：10828923
> 
> 赞同：0
> 
> 时间：2012-05-31T07:06:51.213
> 
> 标签：flash, events, cursor, actionscript-2

如何在 onRollOver 事件之后鼠标不会改变。我有movieclip，我希望鼠标光标在翻转后保持不变，某种动画会开始，但看起来你不能按下它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:03:08.940

您想要的 ActionScript 2 是：

```
movieClip.useHandCursor = false; 
```

# windows - 从 Windows qtconsole 到远程 iPython 内核的 iPython ssh

> ID：10828930
> 
> 赞同：2
> 
> 时间：2012-05-31T07:07:29.143
> 
> 标签：windows, ssh, ipython, paramiko

我想在 Linux 机器上运行 iPython 内核，然后在 Windows 机器上远程连接到它。ipython 内核工作正常，我可以在 Linux 机器上将 qtconsole 本地连接到它。在 Windows 上，我安装了 ipython 和 paramiko 作为它的 ssh 客户端。我在 Windows 7 x64 cmd 上运行以下命令

```
D:\...\.ssh>ipython qtconsole --IPythonConsoleApp.sshserver='user@hostname:22' --IPythonConsoleApp.sshkey='myKey' --IPythonConsoleApp.password='1234' 
```

我收到以下错误：

```
[IPythonQtConsoleApp] Could not setup tunnels
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\IPython\frontend\consoleapp.py", line 289, in init_ssh
    newports = tunnel_to_kernel(info, self.sshserver, self.sshkey)
  File "C:\Python27\lib\site-packages\IPython\lib\kernel.py", line 245, in tunnel_to_kernel
    if tunnel.try_passwordless_ssh(sshserver, sshkey):
  File "C:\Python27\lib\site-packages\IPython\external\ssh\tunnel.py", line 87, in try_passwordless_ssh
    return f(server, keyfile)
  File "C:\Python27\lib\site-packages\IPython\external\ssh\tunnel.py", line 123, in _try_passwordless_paramiko
    look_for_keys=True)
  File "C:\Python27\lib\site-packages\paramiko\client.py", line 332, in connect
    self._auth(username, password, pkey, key_filenames, allow_agent, look_for_keys)
  File "C:\Python27\lib\site-packages\paramiko\client.py", line 493, in _auth
    raise saved_exception
SSHException: not a valid DSA private key file 
```

密钥甚至是用 RSA 创建的。

有没有人成功地从 Windows 机器远程连接到远程 ipython 内核？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:24:05.310

你说

> 密钥甚至是用 * *R* *SA 创建的。

但

> SSHException: not a valid * *D* *SA private key file

RSA 和 DSA 是不同的算法。

要么创建一个 DSA 私钥文件，要么将 ipython 配置为使用 RSA。

（我对 ipython 不熟悉，所以无法提供具体建议。抱歉。）

# ember.js - 何时使用 SproutCore 和何时使用 Ember

> ID：10828935
> 
> 赞同：2
> 
> 时间：2012-05-31T07:07:47.720
> 
> 标签：ember.js, sproutcore

我即将开发一个 Web 应用程序，并且我需要一个 MVC 框架，我开始使用 SproutCore，但做了一些更多的研究，我也了解了 Ember.js。我看过很多帖子，他们声称 ember.js 比 Sproutcore 好得多，但看看差异，我发现 Ember.js 中不支持小部件。

我还看到了其他一些关于两者之间差异的帖子，例如[Here](https://stackoverflow.com/questions/9425307/differences-between-sproutcore-and-ember)，但我仍然不明白，何时更喜欢 Sproutcore 和何时使用 Ember。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:29:31.647

它主要归结为您所追求的应用程序的设计风格，因为它们的共同祖先在技术上存在许多相似之处。

如果您想要一个“感觉”像桌面应用程序的 Web 应用程序，我会选择 Sproutcore。

如果您希望您的 Web 应用程序更像 Twitter、github 或 stackoverflow，我会选择 Ember。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:17:30.367

根据我的历史知识，sproutcore 是 emberjs 的前身。

# c++ - 如何让cin只取数字

> ID：10828937
> 
> 赞同：12
> 
> 时间：2012-05-31T07:07:48.377
> 
> 标签：c++

这是代码

```
double enter_number()
{
  double number;
  while(1)
  {

        cin>>number;
        if(cin.fail())
        {
            cin.clear();
            cin.ignore(numeric_limits<streamsize>::max(), '\n');
            cout << "Invalid input " << endl;
        }
        else
        break;
        cout<<"Try again"<<endl;
  }
  return number;
} 
```

我的问题是，当我输入 1x 之类的内容时，会将 1 作为输入，而不会注意到为另一次运行而遗漏的字符。有什么方法可以使它与任何实数一起工作，例如 1.8？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-31T07:15:14.273

当 cin 遇到无法正确读入指定变量的输入时（例如将字符输入到整数变量中），它会进入错误状态并将输入留在其缓冲区中。

您必须做几件事才能正确处理这种情况。

1.  您必须测试此错误状态。
2.  您必须清除错误状态。
3.  您必须交替处理生成错误状态的输入数据，或者将其清除并重新提示用户。

以下代码提供了执行这三件事的众多方法之一。

```
#include<iostream>
#include<limits>
using namespace std;
int main()
{

    cout << "Enter an int: ";
    int x = 0;
    while(!(cin >> x)){
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        cout << "Invalid input.  Try again: ";
    }
    cout << "You enterd: " << x << endl;        
} 
```

您可以将一些较大的值传递给 cin.ignore ，例如 1000 ，并且对于所有实际目的而言，它的行为可能完全相同。

您还可以在输入尝试后测试 cin 并以这种方式处理它，例如 if(!cin){//clean up the error} 。

查看其他成员函数的 istream 参考以处理流状态：[http ://cplusplus.com/reference/iostream/istream/](http://cplusplus.com/reference/iostream/istream/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-31T07:21:55.200

我会使用`std::getline`and`std::string`来读取整行，然后只有当你可以将整行转换为双精度时才跳出循环。

```
#include <string>
#include <sstream>

int main()
{
    std::string line;
    double d;
    while (std::getline(std::cin, line))
    {
        std::stringstream ss(line);
        if (ss >> d)
        {
            if (ss.eof())
            {   // Success
                break;
            }
        }
        std::cout << "Error!" << std::endl;
    }
    std::cout << "Finally: " << d << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2020-09-20T05:52:59.567

```
#include<iostream>
#include<cstdlib>
#include<cstring>
using namespace std;
int get_int(void);
int main()
{
    puts("Enter a number");
    cout<<"The integer is "<<get_int()<<endl;
    return 0;
}
int get_int(void)
{
    char str[20];
    char* end;
    int num;
    do{
        fgets(str,20,stdin);
        str[strlen(str)-1]='\0';
        num=strtol(str,&end,10);
        if(!(*end))
            return num;
        else
        {
            puts("Please enter a valid integer");
            num=0;
        }
    }while(num==0);
} 
```

这适用于任何整数。它甚至可以检查您是否在整数后输入了空格或任何其他字符。唯一的问题是它没有使用`std::cin`. 但是，问题`std::cin`在于它忽略了整数之后的任何空格字符，并愉快地将整数作为输入。

# c# - 获取图片路径

> ID：10828940
> 
> 赞同：1
> 
> 时间：2012-05-31T07:08:04.517
> 
> 标签：c#, asp.net, url, path, image

大家！

我知道，这个问题可能被问了很多次，但无论如何..

问题是：

我有一个包含 2 个项目（C# 类库和 Web 项目）的解决方案。在类库项目中，我重写了一个文本框控件，因此它具有内置验证。在本地服务器上一切正常，但是当我上传已发布的项目时，问题就开始了。

这是代码：

```
 [Browsable(true)]
    [Category("Appearance")]
    [DefaultValue("~/images/alert.png")]
    public string AlertImageUrl
    {
        get
        {
            string path = HttpContext.Current.Server.MapPath("~/images/alert.png");
            return GetPropertyValue<string>("AlertImageUrl", path);
        }
        set
        {
            SetPropertyValue("AlertImageUrl", value);
        }
    }

    protected override void Render(HtmlTextWriter writer)
    {
        this.Attributes["onfocus"] = "var objs = this.parentNode.childNodes; for (var i = 0; i < objs.length; i++) {if (objs[i].id == 'imgAlert') { objs[i].style.display = 'none'; } }";
        writer.WriteFullBeginTag("span");
        base.Render(writer);
        if (!_validator.IsValid)
        {
            writer.WriteBeginTag("img");
            writer.WriteAttribute("id", "imgAlert");
            writer.WriteAttribute("runat", "server");
            writer.WriteAttribute("style", "left: -20px; top: 3px;");
            writer.WriteAttribute("src", AlertImageUrl);
            writer.WriteEndTag("img");
        }
        writer.WriteEndTag("span");
    } 
```

图片位于 App_Themes/Theme_name/images/alert.png 如何正确获取 AlertImageUrl？奇怪，如果我手动设置它会返回正确的路径，但是 WriteAttribute - no..

任何帮助表示赞赏，问候， Maris

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:25:10.057

使用`ResolveClientUrl`方法而不是`Server.MapPath`

# c# - 在我的控制器中对 html“字符串”进行部分视图，用于 json 请求

> ID：10828946
> 
> 赞同：2
> 
> 时间：2012-05-31T07:08:46.737
> 
> 标签：c#, jquery, json, asp.net-mvc-2

我正在制作一个 jQuery JSON 帖子，并希望将 PartialView 作为 HTML 返回。在我的控制器中，我需要将 PartialView 制作成 HTML。

我找到了一些示例，但其中大多数都涉及 BaseController。我的项目不允许我使用 BaseController。我宁愿需要一个可以在控制器中使用的扩展。

我查看了一些代码并找到了一个示例，但我在使用它时遇到了一些问题。我不知道如何传入我使用的当前控制器。

```
[HttpPost]
public ActionResult HtmlJsonTryout(/*passing values*/)
{
    //code here......
    if (first.CartID == 0)
    {               
        var viewData = m_cartViewDataFactory.Create();
        var miniCart = ControllerExtensionsHelper.PartialViewToString("HERE I NEED TO PASS CONTROLLER RIGHT?", "_FullCart", viewData);
        var cart = PartialView("_CartSum", viewData);

        this.Response.ContentType = "application/json";
        return Json(new
        {
            Status = "OK",
            MiniCart = miniCart,
            Cart = cart
        });
    }
}

public static class ControllerExtensionsHelper
{
    public static string PartialViewToString(this Controller controller)
    {
        return controller.PartialViewToString(null, null);
    }

    public static string RenderPartialViewToString(this Controller controller, string viewName)
    {
        return controller.PartialViewToString(viewName, null);
    }

    public static string RenderPartialViewToString(this Controller controller, object model)
    {
        return controller.PartialViewToString(null, model);
    }

    public static string PartialViewToString(this Controller controller, string viewName, object model)
    {
        if (string.IsNullOrEmpty(viewName))
        {
            viewName = controller.ControllerContext.RouteData.GetRequiredString("action");
        }

        controller.ViewData.Model = model;

        using (StringWriter stringWriter = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, viewName);
            ViewContext viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, stringWriter);
            viewResult.View.Render(viewContext, stringWriter);
            return stringWriter.GetStringBuilder().ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:11:35.473

您没有正确使用扩展方法。您在它们正在扩展的类的实例上调用扩展方法。请阅读有关[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)的文档：

```
[HttpPost]
public ActionResult HtmlJsonTryout(int amount)
{
    if (first.CartID == 0)
    {               
        var viewData = m_cartViewDataFactory.Create();
        string miniCart = this.PartialViewToString("_FullCart", viewData);
        string cart = this.PartialViewToString("_CartSum", viewData);

        return Json(new
        {
            Status = "OK",
            MiniCart = miniCart,
            Cart = cart
        });
    }
} 
```

# database - 通过Excel VBA查询数据库

> ID：10828949
> 
> 赞同：0
> 
> 时间：2012-05-31T07:08:59.803
> 
> 标签：database, excel, teradata, vba

我是 Excel VBA 的初学者。我想从 Teradata 数据库中查询数据并将输出提供到 Excel 工作表的行中。当我编写以下代码时：

```
Private Sub CommandButton1_Click()
    Dim conn As Connection
    Dim rec1 As Recordset
    Dim thisSql As String
    Set conn = New Connection
    conn.Open "Driver=Teradata; DBCName=" & DBCName & ";UID=" & UID & ";PWD=" & PWD
    thisSql = "simple select qyery here"
    With .QueryTables.Add(Connection:=conn, Destination:=.Range("A1"))
        .Sql = thisSql
        .Name = "data"
        .FieldNames = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

我收到错误消息**“编译器错误：未定义用户定义的类型”**

如何克服这个错误？我需要在代码中包含任何内容吗？

请帮忙

我正在使用 MSVisualBasic 6.5 编辑器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:48:11.990

嗨，我想在使用 QueryTables.Add 时它需要一个记录集作为连接对象。我修改了您的代码并尝试如下：

```
Dim conn As adodb.Connection
Dim rec1 As adodb.Recordset
Dim thisSql As String

Set conn = New adodb.Connection

conn.Open your_connection_string

thisSql = "your query here"

Set rec1 = New adodb.Recordset
rec1.Open thisSql, conn

With Sheet3.QueryTables.Add(Connection:=rec1, Destination:=Sheet3.Range("A1"))
    .Name = "data"
    .FieldNames = True
    .Refresh BackgroundQuery:=False
End With 
```

# html - HTML5 的 window.postmessage 在 IE9 IE 下不起作用

> ID：10828960
> 
> 赞同：0
> 
> 时间：2012-05-31T07:10:15.577
> 
> 标签：html, iframe, internet-explorer-8, cross-domain

我有一个[非常简单的演示](http://t0mjane1.webng.com/cpminwan/container.htm)，用于使用 html5 的 postMessage API 在 iframe 中进行跨域通信。它在所有现代浏览器和 IE9 中都能成功地为我工作，但在 IE8 或更低版本中却不行。

我尝试了使用自定义标头注册一些 html5 标记的解决方案，但 window.postMessage 对于 IE8 来说仍然很神秘。

是的，我知道我可以在 IE8 中使用各种方式进行跨域，例如 xdr，但是为了清洁，有人请评论 window.postMessage 是否可以在 IE8 或更低版本中以某种方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:20:42.533

显然，IE8 不允许`postMessage`跨选项卡/窗口，只允许在`iframe`和 parent: [reference](http://blogs.msdn.com/ieinternals/archive/2009/09/16/Bugs-in-IE8-support-for-HTML5-postMessage-sessionStorage-and-localStorage.aspx)之间。在 IE8 之下你就不走运了，因为 IE7 是在 2006 年发布的，而 HTML5 已在 2007 年被 W3C 采纳为工作草案。

# richfaces - 如何在皮肤文件richfaces中设置表格的行颜色

> ID：10828962
> 
> 赞同：1
> 
> 时间：2012-05-31T07:10:22.710
> 
> 标签：richfaces, skinning, jsf-1.2

谁能告诉我如何使用 Richfaces 皮肤设置表格的行颜色？我必须在哪个文件和哪个属性中更改？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:56:10.507

您可以尝试使用 firebug 检查您的表格并在您的 CSS 文件中覆盖其样式。像（不完全是这样）：

```
.rf-dt-c {
  color: #FFFFFF;
} 
```

或者您可以创建自己的样式`<rich:dataTable>`，例如：

```
.richTable {
  width: 100%;
}
  .richTable .rowEven {
    background-color: #FFFFFF;
  }
  .richTable .rowOdd {
    background-color: #CCCCFF;
  }
  .richTable .active-row {
    background-color: #FFEBDA !important;
    cursor: pointer;
  } 
```

为您设置样式`<rich:dataTable>`：

```
<rich:dataTable id="table" var="item" value="#{bean.model}" styleClass="richTable">
  ...
</rich:dataTable> 
```

根据需要使用`jQuery`样式行（偶数，奇数，活动）：

```
<rich:jQuery selector=".richTable tr:odd" query="addClass('rowOdd')" />
<rich:jQuery selector=".richTable tr:even" query="addClass('rowEven')" />
<rich:jQuery selector=".richTable tr" event="mouseover" query="jQuery(this).addClass('active-row')"/>
<rich:jQuery selector=".richTable tr" event="mouseout" query="jQuery(this).removeClass('active-row')"/> 
```

当然也可以添加`jQuery`到你的视图中：

```
<script type='text/javascript' src='js/jquery-1.4.4.js'></script> 
```

# c# - 在winform中拖动一条动态线

> ID：10828963
> 
> 赞同：1
> 
> 时间：2012-05-31T07:10:26.750
> 
> 标签：c#, winforms

我只想知道如何在 c# 中拖放一条在运行时动态创建的线（鼠标绘制线）。动态线放置在面板上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:36:53.913

我过去使用过两种方法：

1.  在 MouseDown 上[计算线和鼠标光标之间的距离](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)。如果它在几个像素内，则开始拖动。当 MouseButton 按下时，通过在同一向量上平移线的起点和终点来响应 MouseMove（当前鼠标位置 - 开始拖动鼠标位置）

2.  在 MouseDown 上测试鼠标光标下像素的颜色，看它是否超过了线条。如果是这样，请执行与上述相同的拖动。

棘手的是，当有多条线接近并且您需要找出需要拖动哪条线时，选项 1 很难

当线条很细时，选项 2 很难。

另一种方法是在绘制线条时在不可见位图上画一条较粗的线，并在不可见位图上测试像素。这样，您可以提供更多的容差，并且可以为每条不可见的线赋予不同的颜色，以便更容易识别单击了哪条线。

这有意义吗？

# html - 链接到更高级别文件夹中的文件

> ID：10828964
> 
> 赞同：4
> 
> 时间：2012-05-31T07:10:28.750
> 
> 标签：html, file, href

我在提供比我的根文件夹更高级别的文档时遇到问题。

```
<a href='../../home/folder/document.docx'>Proposal</a> 
```

在浏览器中，上面的内容被解释为：

```
http://localhost/home/folder/document.docx 
```

我在文件夹中看不到浏览器，然后我得到的答案是：

```
Not Found
The requested URL /home/folder/document.docx was not found on this server. 
```

我在 Firefox 和 Chrome 中尝试过，它发生了同样的情况。我在 Linux 机器上使用 Apache Web 服务器。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T07:12:51.477

您不能将访问者重定向到文档根目录之外的文件（您拥有 index.html 的位置）。人们看不到高于`http://localhost/`最终位置的文件。

一个解决方案是将它`.docx`放在您的文档根目录中（您的 index.html 所在的位置）。

但是，您可以让 PHP 使用[readfile](http://php.net/manual/en/function.readfile.php)函数提供文件。但不要忘记 www-data 需要有权访问您提供的文件。

# java - getter 和 setter 方法无法正常工作

> ID：10828965
> 
> 赞同：0
> 
> 时间：2012-05-31T07:10:28.937
> 
> 标签：java, swing, joptionpane

在我发布的这个程序中，当我调用（setter 函数）即。obj.setsize(res) 在主函数中比它无法将（在类“contact_entry”中声明的变量“size”）private int size=2 更改为 size=1。

当我调用（getter 函数）时，该值保持为 2，即。obj.getsize() 在主程序中，在 if(obj.getsize()>0). 当 set 方法被调用时，它应该设置变量“size to 1”的值，但它不能修改“大小保持不变”的值和值。

请让我知道我会很感激的问题。

```
 import javax.swing.JOptionPane;
    public class nokia {

        public static void main(String[] args) 
        {
            int itr=0;

            while(itr==JOptionPane.YES_OPTION)
            {
                String s3=JOptionPane.showInputDialog("Enter your option\nEnter 1 to add contact\nEnter 2 to delete contact\nEnter 3 to display contact" +
                    "\nEnter 4 to search a contact detail\nEnter 5 to exit");
                switch(s3)
                {
                case "1":
                {
                    contact_entry obj=new contact_entry();
                    if(obj.getsize()>0)
                    {
                        obj.add_contact();
                        int res=obj.getsize()-1;
                        obj.setsize(res);
                    }
                    else
                        JOptionPane.showMessageDialog(null, "MEMORY FULL....NO MORE CONTACTS CAN BE ADDED");
                    break;
                }

                case "2":
                }

            }
        }

    }

    class contact_entry
    {
        private String fst_nme;
        private String lst_nme;
        private long [] mo_no=new long[3];
        private int[] hme_no=new int[3];
        private int size=2;

        public contact_entry()
        {
            fst_nme="ron";
            lst_nme="capton";
            mo_no[0]=mo_no[1]=mo_no[2]=0;
            hme_no[0]=hme_no[1]=hme_no[2]=0;

        }

        public void add_contact()
        {
            fst_nme=JOptionPane.showInputDialog("Enter the first name: ");
            lst_nme=JOptionPane.showInputDialog("Enter last name: ");

            int itr=0,itr1=0;
            for(int i=0;itr==JOptionPane.YES_OPTION;i++)
            {
                if (i>2)
                {
                    JOptionPane.showMessageDialog(null,"NO MORE MOBILE NUMBER CAN BE ADDED...MEMORY FULL");
                    break;
                }
                String s1=JOptionPane.showInputDialog("Enter mobile number: ");
                mo_no[i]=Long.parseLong(s1);
                itr=JOptionPane.showConfirmDialog(null, "Do you want to add addtional contact number");

            }

            for(int i=0;itr1==JOptionPane.YES_OPTION ;i++)
            {
                if(i>2)
                {
                    JOptionPane.showMessageDialog(null, "NO MORE PHONE NUMBER CAN BE ADDED....MEMORY FULL");
                    break;
                }
                String s2=JOptionPane.showInputDialog("Enter phone number: ");
                hme_no[i]=Integer.parseInt(s2);
                itr1=JOptionPane.showConfirmDialog(null, "DO you want to add more contact number");

            }   
        }

        public void display()
        {
            String output= "First Name: "+fst_nme+"\nLast name: "+lst_nme+"\nmobile number1: "+mo_no[0]+"\nmobile number2: "+mo_no[1]+
                    "\nmobile number3: "+mo_no[2]+"\nphone number1: "+hme_no[0]+"\nphone number2: "+hme_no[1]+"\nphone number3: "+hme_no[2];
            JOptionPane.showMessageDialog(null, output);
        }

        public int getsize()
        {
            JOptionPane.showMessageDialog(null, size);
            return size;
        }

        public void setsize(int size1)
        {
            this.size=size1;
            JOptionPane.showMessageDialog(null, size);
        }
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:21:40.900

我无法用您的代码重现这一点。注释掉`add_contact`（因为它无关紧要）我看到三个对话框：

*   2（第一次调用`getsize()`）
*   2（第二次调用`getsize()`）
*   1（打电话给`setsize()`）

所以它将*值*设置`size`为1。

请注意，当您循环并创建一个*新* `contact_entry`实例时，它的大小为 2……这让您感到困惑吗？

（顺便说一句，您应该*真正*尝试遵循 Java 命名约定。您的代码目前非常单一。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:33:57.737

您正在`contact_entry`每个循环中创建新对象。所以每次你有新的对象时`size = 2`。你正在向它添加新的联系人。因此，您没有看到 contact_entry 对象中的联系人增加。在循环之前创建该对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:33:14.170

我想你不想做的是限制可以添加的联系人数量。

现在您将 size 声明为 contact_entry 的实例变量。为了让它工作，它应该是一个类变量（以便每个对象都相同）。

但请不要这样做，因为它只是简单丑陋的设计。

你可以做的是在你的诺基亚上做一个收藏，并对其进行一些限制。

每次创建新的联系人条目时，首先检查集合是否已满，如果没有，则将其添加到集合中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T07:41:15.663

The value is being set to 1, however the object `obj` is going out of scope, as soon as it leaves the case statement, so it would be reset to "2" once you create a new `obj`, as per the default value, in the class itself.

# iphone - UITableView 索引可以跳转到一行而不是一个节吗？

> ID：10828975
> 
> 赞同：2
> 
> 时间：2012-05-31T07:10:55.267
> 
> 标签：iphone, ios, xcode, uitableview, indexing

我已经实现了一个只有一个巨大部分的 UITableView，现在我需要为这个 UITableView 实现一个索引（类似于联系人应用程序），但是我的索引不代表它代表行的部分。据我所知，您只能跳到一个部分，而不能跳到带有 tableview 索引的行。

我不想添加部分，因为我必须为每一行添加一个部分，这有点愚蠢。

所以我的问题是：有没有办法实现 UITableView 的索引，这样当我点击索引的任何部分时，它会将我带到相对行而不是 tableview 中的部分？

我可能最终会为这个真正想要避免的东西写一个黑客，并按照它应该做的方式去做（如果有任何这样的方式），所以任何帮助都将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:13:55.617

只需实现这些部分并将它们的高度设置为 0`tableView:heightForHeaderInSection:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:38:26.777

这不是一个大黑客。只需更改一行部分的行。把你有的东西`tableView:numberOfRowsInSection:`移到`numberOfSectionsInTableView:`. 您必须稍微适应`cellForRowAtIndexPath:`以检查您所在的部分而不是行和您所在的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:53:59.240

使用此方法：

```
- (void)scrollToRowAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UITableViewScrollPosition)scrollPosition animated:(BOOL)animated; 
```

# ios - 自定义 UIAlertView 上的按钮

> ID：10828977
> 
> 赞同：1
> 
> 时间：2012-05-31T07:10:59.887
> 
> 标签：ios, uibutton, customization, uialertview

这是我自定义按钮的当前方式：

```
UIAlertView *av = [[UIAlertView alloc] init];

[av addButtonWithTitle:@""];
UIButton *yesButton = [av.subviews lastObject];

[av show];

[yesButton setImage:[UIImage imageNamed:@"test.png"] forState:UIControlStateNormal]; 
```

这样做的问题是原始视图在我为按钮设置的图像周围仍然可见。它没有完全封装图像。这是我到目前为止的一个例子：

[https://www.dropbox.com/s/htb9pfihwmel5oo/testimage.png](https://www.dropbox.com/s/htb9pfihwmel5oo/testimage.png)

有没有办法让图像完全占据整个按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:44:25.257

如果您不想要像 Sly Raskal 的答案那样健壮的东西，而只想快速破解，那么它的工作原理与您现有的代码类似。你可以做这样的事情..当然你可以改变新的按钮框架来匹配你想要的。此外，您必须将 UIAlertView 定义为一个变量，以便您可以引用它，并在您的 someAction: 方法中将其关闭。

```
UIAlertView *av = [[UIAlertView alloc] init];
[av addButtonWithTitle:@""];
UIButton *yesButton = [av.subviews lastObject];
[yesButton setHidden:YES];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[av addSubview:button];
[av show];

[button setImage:[UIImage imageNamed:@"test.png"] forState:UIControlStateNormal];
[button addTarget:av action:@selector(someAction:) forControlEvents:[yesButton allControlEvents]];
[button setFrame:yesButton.frame]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:26:48.360

如果在这种情况下，您所做的只是将按钮设置为不同的样式，但以一种简单的方式，我将按照本教程完成您正在寻找的效果：

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)

如果您正在创建的应用程序是针对 App Store 的，我只想提一下，无论您实施什么更改，请确保它不使用任何私有 API 或违反 HIG 中记录的任何内容。这些情况中的任何一种都肯定会警告您的应用程序被拒绝。

# java - TaskManager for linux - Java Swing 可以在 Linux 上运行吗？

> ID：10828980
> 
> 赞同：2
> 
> 时间：2012-05-31T07:11:19.750
> 
> 标签：java, linux, swing, process, taskmanager

我要为 Linux 开发一个任务管理器，并且处于初始阶段。首先我在 Windows 平台的 Java Eclipse 中实现了它，它工作得很好。它不适用于 Linux 平台。我使用了 Java/Swing 的组合。

Windows 中的“tasklist.exe”完美运行。linux中的“ps-aux”不起作用。

> 代码：

```
package test.t100.t001;

import java.awt.*;
import java.awt.event.KeyEvent;
import java.io.BufferedReader;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;

import javax.swing.*;

public class TabbedPaneDemo extends JPanel {

    private static final long serialVersionUID = 1L;
    Integer i;

    JTextArea output = new JTextArea();

    public static void main(String args[]) 
    {
        SwingUtilities.invokeLater(new Runnable() {
            public void run()
            {
                JFrame frame = new JFrame("TabbedPaneDemo");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TabbedPaneDemo(), BorderLayout.CENTER);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    private String getDetails() throws IOException {
        //fn();
        String line;
        String result = "";
        PrintStream p;
        Process p1 = Runtime.getRuntime().exec("tasklist.exe");
        // read from a process
        BufferedReader input = new BufferedReader(
                new InputStreamReader(p1.getInputStream()));
        while ((line = input.readLine()) != null)
        {
            //System.out.println(line);
            output.append(line + "\n");
            result += line+"\n";
            //p.println (line);
            //textarea.setVisible(true);    
        }
        //msgBox(result);
        //p.close();
        input.close();   

        return result;
    }

    public TabbedPaneDemo() {
        super(new GridLayout(1, 1));

        JTabbedPane tabbedPane = new JTabbedPane();
        ImageIcon icon = createImageIcon("images");

        JComponent panel1 = makeTextPanel("tasklist");
        tabbedPane.addTab("tasks", icon, panel1,
                "ta");
        // add it to something!
        panel1.add(new JScrollPane(output));
        tabbedPane.setMnemonicAt(0, KeyEvent.VK_1);

        JComponent panel2 = makeTextPanel("windows");
        tabbedPane.addTab("wins", icon, panel2,
                "wi");
        tabbedPane.setMnemonicAt(1, KeyEvent.VK_2);

        add(tabbedPane);//`enter code here`
        tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);

        try {
            String s = getDetails();
            output.setText(s);
        } catch(IOException e) {
            e.printStackTrace();
        }
    }

    public static void msgBox(String msg) {
        javax.swing.JOptionPane.showConfirmDialog((java.awt.Component)
                null, msg, "WindowsUtils",
                javax.swing.JOptionPane.DEFAULT_OPTION);
    }

    protected JComponent makeTextPanel(String text)
    {
        JPanel panel = new JPanel(false);
        JLabel filler = new JLabel(text);
        filler.setHorizontalAlignment(JLabel.CENTER);
        panel.setLayout(new GridLayout(1, 1));
        panel.add(filler);
        return panel;
    }

    protected static ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = TabbedPaneDemo.class.getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T07:15:59.977

我假设`Java Swings`你的意思是`Java Swing`。Java 是跨平台的，因此除非您使用一些外部库（具有特定于平台的调用），否则您应该能够在任何平台上编译和运行。

话虽如此，根据[this](https://stackoverflow.com/questions/10204433/tasklist-exe-equivalent-in-linux) previous SO post，`ps -ef`将使您运行所有任务，因此您似乎可能使用了错误的调用。

我假设您尝试在其上执行此代码的 Linux 平台具有某种 GUI，并且不是基于控制台的发行版之一。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T07:28:51.973

由于您似乎忽略了我关于整理如何`Process`创建和消耗输出**流**的建议，我将尝试不同的策略。

> Java Swing 可以在 Linux 上运行吗？

是的，确实如此。这是你的证明（每个都有完整的来源）。

1.  [通过平台示例设置位置](https://stackoverflow.com/a/5630271/418556)
    ![](../Images/4612e17641da45d6c283ce17f1d8e9e8.png)
2.  [嵌套布局示例](https://stackoverflow.com/a/5630271/418556)
    ![](../Images/9311338d93aec944e03780b8f6c23705.png)

# c++ - 如何释放 boost::unordered_map 持有的空闲内存？

> ID：10828981
> 
> 赞同：3
> 
> 时间：2012-05-31T07:11:19.793
> 
> 标签：c++, memory, unordered-map

我添加了大量元素，然后在 boost::unordered_map 中将它们全部删除。然后我看到这个程序持有的内存是198MB（大于（64+4）*2M），unordered_map的大小是0。

然后我测试了一个向量，没有这样的问题。为什么？

```
#include <iostream>
#include <boost/unordered_map.hpp>

template <int N>
struct big_struct {
    char c[N];
};

int main(void) {
    typedef big_struct<64> data_type;
    typedef boost::unordered_map<int, data_type*> map_type;

    map_type m;

    for (int i = 0; i < 2000 * 1000; i++) {
            m.insert(std::make_pair(i, new data_type));
    }   

    for (map_type::iterator it = m.begin(); it != m.end();) {
            delete it->second;
            it = m.erase(it);
    }   

    std::cout << "finish, map size " << m.size() << std::endl;
    pause();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T07:32:55.470

假设您可能想再次使用它，语言运行时会保留分配的内存。将数百万个小块返回给操作系统需要相当长的时间，并且会使您的程序运行速度变慢。

如果你有一个非常大的向量，那仍然只是一个内存块。一些编译器考虑在不再需要时返回*这种内存。*返回*一个*大块比一百万个小块更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-23T08:09:16.073

这是一个明显的例子，说明当 boost 成为 C++ 的标准部分时会发生什么。

```
std::unordered_map 
```

实际上缺乏对释放内存的控制，**上述答案是不正确的**。

在 a发生之前， A`std::unordered_map`可能不会释放任何内存。`rehash`当记录可能发生重新散列时，如果您查看`size()`文档，它只是说它是元素的数量，如果您想要一个实际大小的想法，您必须在映射中添加一个自定义分配器并计算分配/释放的字节数。

很遗憾，因为没有记录该行为（也没有一些 API 来控制它），您不知道实现是否有可用内存（如果您暂时不使用地图则很好），或者是否实现缓存内存（如果您要再次插入不同的元素，那很好）。

这使得以内存有效的方式使用 unordered_map 非常困难。此外，这基本上在没有记录的情况下为巨大的内存使用留出了空间（没有任何地方说明没有元素的地图可能需要数百兆字节）

这是一个自定义分配器，用于分析内存使用情况

```
#include <unordered_map> //c++ container but in practice the same of boost
#include <memory>
#include <iostream>
using namespace std;

size_t counter = 0;

template <typename T>
class countingAllocator: public std::allocator<T>
{
public:
    typedef size_t size_type;
    typedef T* pointer;
    typedef const T* const_pointer;

    template<typename _Tp1>
    struct rebind
    {
            typedef countingAllocator<_Tp1> other;
    };

    pointer allocate(size_type n, const void *hint=0){
           counter += n;
            return std::allocator<T>::allocate(n, hint);
    }

    void deallocate(pointer p, size_type n){
            counter -= n;
            return std::allocator<T>::deallocate(p, n);
    }

    static size_t getAllocatedBytes() { return counter;}

    countingAllocator() throw(): std::allocator<T>() {}
    countingAllocator(const countingAllocator &a) throw(): std::allocator<T>(a) { }
    template <class U>                    
    countingAllocator(const countingAllocator<U> &a) throw(): std::allocator<T>(a) { }
    ~countingAllocator() throw() { }
};

template <int N>
struct big_struct {
    char c[N];
};

template<

    class Key,
    class T,
    class Hash = std::hash<Key>,
    class KeyEqual = std::equal_to<Key>,
    class Allocator = std::allocator< std::pair<const Key, T> >
> class unordered_map;

int main( int argc, char ** argv) {
    typedef big_struct<64> data_type;
    typedef std::unordered_map<int, data_type*, std::hash<int>, std::equal_to<int>, 
                            countingAllocator< std::pair< const int, data_type*>> > map_type;

    map_type m;

    for (int i = 0; i < 1000 * 1000; i++) {
            m.insert(std::make_pair(i, new data_type));
    }   

    for (map_type::iterator it = m.begin(); it != m.end();) {
            delete it->second;
            it = m.erase(it);
    }   

    std::cout << "allocated memory before returning " << countingAllocator< std::pair< const int, data_type*>> ::getAllocatedBytes() << std::endl;

    return 0;
} 
```

和程序的输出：

```
allocated memory before returning 1056323 
```

所以基本上这意味着您需要以某种方式调用映射析构函数以正确摆脱先前分配的内存，您可以通过多种方式做到这一点：

*   将 unordered_map 放入`shared_ptr`
*   使 unordered_map 超出范围

我在我的[PublicProfileTests](https://github.com/Darelbi/PublicProfileTests/tree/master/BoostMemoryUsage)存储库上上传了配置文件代码，以便您可以贡献

# xcode - 应用内购买测试 mzfinance.InAppBuyLoginRequired_message（沙盒）

> ID：10828983
> 
> 赞同：15
> 
> 时间：2012-05-31T07:11:33.827
> 
> 标签：xcode, ios-simulator, in-app-purchase, app-store-connect

我正在进行应用内购买...我在模拟器/（沙盒模式）中运行良好。我仍在使用该应用程序和测试进行一些工作。今天，当我测试应用内购买时，我得到了。

应用内购买测试 mzfinance.InAppBuyLoginRequired_message（沙盒）

我查看了 iTunes Connect，它在应用内购买下显示“拒绝”。我没有提供完整的描述，但我认为这并不重要，因为我之前开发者拒绝了该应用程序。

所以我删除了应用内购买...上传/拒绝了另一个二进制文件并添加了新的应用内购买。我使用相同的 apple-id 进行测试。第一次，它说成功。我再试一次，我得到同样的错误信息。

应用内购买测试 mzfinance.InAppBuyLoginRequired_message（沙盒）

知道发生了什么吗？我认为代码很好，因为我没有更改它。它与iTunes连接设置或其他东西有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T06:34:22.703

我有同样的问题，我无法购买任何应用程序内，因为我每次都看到：

mzfinance.InAppBuyLoginRequired_message（沙盒）

早些时候我在这个测试帐户上测试了我的应用内购买，一切都很好。我在 iTunesConnect 中创建了新的测试帐户，它有帮助！

去：

[https://itunesconnect.apple.com/](https://itunesconnect.apple.com/)

选择：

“管理用户”>>“测试用户”

接下来“添加新用户”并使用任何电子邮件地址创建新用户（我使用了虚构的电子邮件地址）。这对我有用，我现在正在使用第二个帐户进行测试。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:36:10.007

自 2012 年 5 月 31 日以来发生了同样的事情。仅在模拟器中注意到此行为，在设备上一切正常。

每次在 iTunesConnect 创建新的测试用户时，我都会在模拟器上进行测试。这非常耗时，但否则它不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:29:52.427

当您第一次购买该应用程序时，它不会出现。（创建新用户意味着第一次购买）。当您尝试恢复 InApp 购买并且没有正确处理恢复购买时，它就会出现。

[请参阅In-App Purchase Programming Guide](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW1)中的“恢复交易”部分。

# c - 如何使用 libxml 和 C 获取序列化的 HTML 片段

> ID：10828988
> 
> 赞同：2
> 
> 时间：2012-05-31T07:12:03.927
> 
> 标签：c, libxml2

我有非常简单的 xml

```
<root>
    <node>some value</node>
</root> 
```

如何使用 libxml 和 C 获取序列化的 HTML 片段。我的意思与您可以`outerHTML`在 JS ( `document.getElementsByTagName("node")[0].outerHTML`) 中使用的相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:29:16.280

您必须使用[xmlNodeDump](http://xmlsoft.org/html/libxml-tree.html#xmlNodeDump)。或者，如果要将节点打印到文件/标准输出，则使用[xmlElemDump](http://xmlsoft.org/html/libxml-tree.html#xmlElemDump)

# internet-explorer - IE8兼容性视图

> ID：10828990
> 
> 赞同：1
> 
> 时间：2012-05-31T07:12:11.243
> 
> 标签：internet-explorer, internet-explorer-8, compatibility, rendering-engine

从开发的角度来看，IE8 兼容性视图和普通视图之间的基本区别是什么？我看到一些在 IE8 普通视图中不能正常工作的东西在兼容性视图中也能正常工作。是否存在任何技术差异或 IE8 处理在不同视图中运行的应用程序脚本的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:26:36.223

Microsoft Internet Explorer 8 内置了五种 (!) 不同的渲染模式。打开兼容性视图会将 IE 转换为 IE7 呈现。

*   [IE8如何确定文档模式](https://blogs.msdn.com/b/ie/archive/2010/03/02/how-ie8-determines-document-mode.aspx)
*   [更改 IE 使用`X-UA-Compatible` `<meta>` 标签的渲染模式](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx#SetMode)

# javascript - 为什么需要 javascript 编码约定？

> ID：10828996
> 
> 赞同：1
> 
> 时间：2012-05-31T07:12:53.523
> 
> 标签：javascript, coding-style

假设我必须编写一个 javascript 函数：

```
function(){
    var a=1;
    var sum=1;
    for(var i=0;i<6;i++){
        sum=sum+a+1;
    }
    console.log(sum);
} 
```

有人建议我这样写这个函数：

```
function () {

   var a = 1;
   var sum = 1;
   for (var i = 0; i < 6; i++) {
      var sum = sum + a +1;
   }
   console.log(sum);

} 
```

有了更多的空白，我知道这条规则，但我不知道它是如何工作的，或者我能从中受益什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:16:15.610

编码风格的好处是增强了可读性。您决定坚持哪种风格并不重要，只要您坚持统一的风格，并且可以就其可读性与您的同事达成一致，这并不总是容易的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:26:54.440

*什么是好的*风格是一个见仁见智的问题，但在一般意义上，选择*一些*风格并在整个代码中始终如一地遵循它会更容易阅读（对于其他人来说，当你稍后回来时对你来说都是如此）。

以我的经验，大多数人发现代码更容易阅读额外的空格，如第二个示例所示。

我不喜欢在 and 之间`function`加空格`()`。或者，如果有函数名称，我不会在名称和括号之间放置空格：`function someName()`。

另请注意，使用具有语法突出显示的现代代码编辑器（如 Stack Overflow），它比以前更容易阅读没有空格的代码。比较以下两个：

```
for(var i=0;i<6;i++) 
```

`for(var i=0;i<6;i++)`

阅读和编辑后者，全是黑白的，*真的*让我很烦，但我不介意彩色版本。不过，我仍然更喜欢它有额外的空间。

我会在你的功能中做一些其他的改变：

```
function() {
    var a = 1,
        sum = 1,
        i;

    for(i = 0; i < 6; i++){
       sum += a + 1;
    }
    console.log(sum);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T07:33:22.967

这些编码约定适用于人类，它们增加了可读性。假设我写了一个这样的表达式：

```
x=(a*b/2)+m-n+c*(d/e); 
```

它看起来笨拙且难以阅读。如果我们像这样在运算符周围使用空格会更容易理解：

```
x = (a * b / 2) + m - n + c * (d / e); 
```

再次使用空行通过表示部分来增加可读性。例如：

```
function foo() {
    var a;
    var b;
    // a blank line here to specify the end of variable declarations
    if (some_cond) {

    } else if (another_cond) {

    }
    // another blank line to specify end of some logic
    //more codes here;
} 
```

如果你不遵循这些指导方针，并且所有团队成员都不同意某些约定，那么长期维护一个大项目将非常困难。

最后请注意，约定不是针对编译器的，而是针对人类的。这就是为什么它被称为编码指南，而不是语言语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T07:20:02.933

也许你应该阅读更多关于 javascript 闭包的信息，你可以关注[“Google Javascript Style Guide”](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T07:26:06.063

在编码时遵循一些统一的风格准则可以使代码更易于阅读，并帮助您编写漂亮的代码，并帮助其他人理解（并热爱！）您的代码。

当然，网上有很多资源（只需谷歌搜索一段时间，您就会得到一些 javascript 指南或指南），但这个非常简单、简单且完整：

[http://javascript.crockford.com/code.html](http://javascript.crockford.com/code.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T07:27:12.543

这不是规则。这只是编码约定风格。如果你不想，你不需要跟随。但是这种风格可以让你的代码更易读、更容易维护、更干净。对我来说，我更喜欢有空格而不是窄字母。同样，这不是规则。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T07:30:20.947

编码风格总是非常个人化；一个人喜欢精简的代码，以便他们可以在一个屏幕上尽可能多地看到，另一个人需要单独的行上的左大括号和右大括号，等等。

当只为自己编码时，你应该选择最适合你的东西。但是，当您开始在团队中工作并且其他人必须维护您的代码时，反之亦然，就一种编码风格达成一致就变得很重要……这可能很难。

我参加过编码风格的讨论，他们很不舒服，因为你放弃了一些个人偏好，尽管是为了更大的利益。短暂的不适后，您会习惯的；-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-13T00:27:53.013

1.  第二个版本不等同于第一个版本，因为它声明了一个内部“总和”变量，除非 Javascript 没有按照它在锡上所说的那样做。

2.  额外的空白行对恕我直言没有什么贡献，但我可能不会死在他们的沟里。然而，同样有效的问题是下载速度，该建议使下载速度变得更糟。

# wpf - WPF：无效的 URI：无法确定 URI 的格式

> ID：10828997
> 
> 赞同：0
> 
> 时间：2012-05-31T07:12:59.560
> 
> 标签：wpf, http, https, uri

我想得到你管的视频信息。所以我准备了网址并将其命名如下

```
String YouTubeVideoInfo = "www.youtube.com/get_video_info?video_id=" + FinalVideoId;

                **WebRequest HttpWReq = (WebRequest)WebRequest.Create(YouTubeVideoInfo);**
                WebResponse HttpWResp = (WebResponse)HttpWReq.GetResponse();
                Stream stream = HttpWResp.GetResponseStream();
                StreamReader reader = new StreamReader(stream);
                string contents = reader.ReadToEnd(); 
```

但上面的代码给出了错误。所以我只想知道是否有任何方法可以在不添加协议（http，https）的情况下调用这个url

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:16:18.663

你不能。如果你不给它一个URI，怎么`WebRequest`知道协议？就目前而言，它肯定缺少协议部分，因此您不能将其作为 URI 传递给任何期望的东西。